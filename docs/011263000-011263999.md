# StackOverflow 问答 11263000-11263999

# ios - iOS单元测试私有模拟对象？

> ID：11263002
> 
> 赞同：3
> 
> 时间：2012-06-29T13:49:28.073
> 
> 标签：ios, unit-testing, singleton, ocunit, ocmock

在我的 XCode 项目中，我有：

*   控制器
*   （单例）数据库控制器

databaseController 在控制器类中实例化。

如何用模拟对象替换此 databaseController 以验证控制器类的正常运行而不依赖于实际的 databaseController？

注意：
- OCUnit 用于单元测试。
- OCMock 用于创建 Mock 对象。

额外问题：如果 databaseController 不是单例怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T16:28:56.040

这是我一直采取的方法。在你的单身人士中：

```
static SomeManager *_sharedInstance = nil;

+(SomeManager *)sharedInstance {
    if (_sharedInstance == nil) {
        _sharedInstance = [[SomeManager alloc] init];
    }
    return _sharedInstance;
}

+(void)setSharedInstance:(SomeManager *)instance {
    _sharedInstance = instance;
} 
```

然后，在您的测试中：

```
-(void)testSomethingThatUsesSingleton {
    id mockManager = [OCMockObject mockForClass:[SomeManager class]];
    [SomeManager setSharedInstance:mockManager];
    [[mockManager expect] something];

    [controller doSomething];

    [mockManager verify];
    [SomeManager setSharedInstance:nil];
} 
```

不要忘记在测试结束时将单例设置回零。我通常`tearDown`在我的单元测试基类中执行此操作，因此它会在每次测试后自动发生。

或者，您可以[在单元测试中创建一个覆盖`sharedInstance`以返回模拟对象](http://twobitlabs.com/2011/02/mocking-singletons-with-ocmock/)的类别。

# css - 下拉样式 - CSS（整个区域的边框）

> ID：11263003
> 
> 赞同：4
> 
> 时间：2012-06-29T13:49:30.770
> 
> 标签：css, drop-down-menu

任何人都知道如何编写这种类型的样式。我尝试了背景顶部图像和其余部分的边框，并尝试使用 z-index（父导航下的下拉菜单），但这很快就变得非常混乱。我正在寻找一种在 CSS 中编码的干净方式，任何想法都会非常有帮助。谢谢！

![CSS 下拉菜单](../Images/b15161f0916307d77963b7b3d74d8396.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:21:24.260

我会通过一些`absolute`定位来做到这一点，`border`并且`:hover`.

示例 HTML：

```
<div class="top">
    Technology
    <div>
        Extra options
    </div>
</div>​ 
```

示例 CSS：

```
.top {
    background: grey;
    border: 1px solid purple;
    position: relative;
}

.top > div {
    background: grey;
    border: 1px solid purple;
    position: absolute;
    left: -1px; /* or whatever works for your layout */
    top: 28px; /* or whatever works for your layout */
    z-index: -1;
    display: none;
}

.top:hover {
    border-bottom: 0;
}

.top:hover > div {
    display: block;
} 
```

​这里有一些更多样式的[小提琴](http://jsfiddle.net/aq6kR/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:55:23.270

像这样的东西？

```
<div id="technology">Technology</div>

#technology:hover {
border-top:1px solid blue;
border-left:1px solid blue;
border-right:1px solid blue;
}

#dropdown {
border:1px solid blue;
} 
```

# powershell - 根据数组从 CSV 中删除项目

> ID：11263009
> 
> 赞同：0
> 
> 时间：2012-06-29T13:49:39.803
> 
> 标签：powershell

首先，这必须在 powershell 中完成，我没有其他可用的东西。好的，我有一个看起来像这样的 CSV 文件

```
名称, 位置, 州, 市, 邮编, 身份
鲍勃, 纽约上城, 纽约, 37903, 1001
威尔, 纽约市中心, 布鲁克林, 99999, 1010
坦率, 市中心, pa, 匹兹堡, 46546, 2015
马克，某处，德克萨斯州，达拉斯，45644, 1000
丽莎，这里，北卡罗来纳州，富兰克林，46542，1510

```

然后我有一个看起来像这样的数组

```
$foo = @ (1000, 2015, 1010) 
```

我想要做的是构建一个新数组，其中删除了 foo 数组中列出的项目。

给出的示例中的预期输出将是

```
名称, 位置, 州, 市, 邮编, 身份
鲍勃, 纽约上城, 纽约, 37903, 1001
丽莎，这里，北卡罗来纳州，富兰克林，46542，1510

```

我已经尝试了很多东西，但到目前为止一直没有成功创建这个。顺便说一句，我不必在新数组中包含标题信息。身份字段是唯一的唯一字段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:59:41.020

尝试：

```
$csv = Import-Csv .\aaa.csv
$foo = @(1000, 2015, 1010)
$csvnew = $csv | ? { $foo -notcontains $_.identity } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:35:39.977

在 PowerShell 3.0 中，您可以使用新的 NotIn 运算符：

```
Import-Csv file.csv | where Identity -notin $foo 
```

# wix - 如何从由于重新启动而离开的位置继续安装？

> ID：11263010
> 
> 赞同：2
> 
> 时间：2012-06-29T13:49:42.697
> 
> 标签：wix, wix3.6

在安装某些软件包期间重新启动后，如何继续我的安装程序？

[实际上，我已经使用WiX 包](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)构建了一个项目的安装程序包（有不同的包安装在一个链中）。但是，当它安装 Microsoft [Windows Installer](http://en.wikipedia.org/wiki/Windows_Installer) 4.5 (.msi) 时，它会重新启动 PC。重新启动后，我希望我的安装在此之后继续。我怎样才能做到这一点？

我想我们可以使用退出代码来做到这一点，但我不知道如何在 WiX 包中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:18:09.463

是的你是对的。您需要在 Bundle 中使用退出代码：

```
<ExePackage Id="WinXP_x86"
              Cache="no"
              Compressed="no"
              PerMachine="yes"
              Permanent="yes"
              Vital="yes"
              Name="redist\WindowsXP-KB942288-v3-x86.exe"
              DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/WindowsXP-KB942288-v3-x86.exe"
              InstallCondition="VersionNT=v5.1 AND NOT VersionNT64 AND VersionMsi &lt; v4.5"
              InstallCommand="/quiet /norestart">
    <RemotePayload ProductName="Windows Installer 4.5"
                   Description="Windows Installer 4.5 Setup"
                   CertificatePublicKey="F321408E7C51F8544B98E517D76A8334052E26E8"
                   CertificateThumbprint="D57FAC60F1A8D34877AEB350E83F46F6EFC9E5F1"
                   Hash="86E1CC622DBF4979717B8F76AD73220CDB70400B"
                   Size="3327000"
                   Version="4.5.0.0" />
    <ExitCode Behavior="forceReboot"/>
</ExePackage> 
```

重新启动后，它将继续安装，假设您使用的是最新版本。有一个错误，引导程序在重新启动后不会继续。

# python - 使用python将文件中的列转换为单独的列表

> ID：11263014
> 
> 赞同：1
> 
> 时间：2012-06-29T13:49:45.840
> 
> 标签：python, list

我有一个 excel 文件，我想阅读每一列并为它们创建单独的列表。然后我想将每个列表的每个元素与我拥有的其他相应列表进行比较。有没有办法可以使用 python 将列转换为列表？

例如（我可以将此文件作为 txt 空格分隔文件或 excel 文件获取）

```
HST_9578_02_ACS_WFC_F775W 245.8976441 -26.5255957 4339.570 1882.364
HST_10615_03_ACS_WFC_F435W 245.8976450 -26.5255138 2084.978 2101.122
HST_10120_02_ACS_WFC_F658N 245.8976758 -26.5255024 1778.055 1752.193
HST_10775_64_ACS_WFC_F606W 245.8977532 -26.5255296 2586.612 2603.519
HST_10775_64_ACS_WFC_F814W 245.8977532 -26.5255296 2586.612 2603.519
HST_9578_02_ACS_WFC_F775W 245.8978148 -26.5255491 4328.571 1885.712
HST_10120_02_ACS_WFC_F625W 245.8978053 -26.5254741 1769.711 1754.229
HST_10353_02_ACS_WFC_F435W 245.8976003 -26.5257784 3758.430 985.125
HST_10775_64_ACS_WFC_F606W 245.8979115 -26.5254936 2576.410 2606.114 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:52:07.533

这听起来像是 Python 的[CSV 模块](http://docs.python.org/library/csv.html)的工作。读取的每一行都作为字符串列表返回。

从文档中借用一个简短的例子：

> 从 csv 文件读取的每一行都作为字符串列表返回。不执行自动数据类型转换。
> 
> 一个简短的使用示例：

[这只是打印出每一行]

```
import csv
with open('some.csv', 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        print row 
```

您可以通过使用适当的索引值对行进行索引来访问特定列。

或者，如果您想“手动”执行此操作（每行由 分隔`,`）：

```
s = """HST_9578_02_ACS_WFC_F775W 245.8976441 -26.5255957 4339.570 1882.364,
HST_10615_03_ACS_WFC_F435W 245.8976450 -26.5255138 2084.978 2101.122,
HST_10120_02_ACS_WFC_F658N 245.8976758 -26.5255024 1778.055 1752.193,
HST_10775_64_ACS_WFC_F606W 245.8977532 -26.5255296 2586.612 2603.519,
HST_10775_64_ACS_WFC_F814W 245.8977532 -26.5255296 2586.612 2603.519,
HST_9578_02_ACS_WFC_F775W 245.8978148 -26.5255491 4328.571 1885.712,
HST_10120_02_ACS_WFC_F625W 245.8978053 -26.5254741 1769.711 1754.229,
HST_10353_02_ACS_WFC_F435W 245.8976003 -26.5257784 3758.430 985.125,
HST_10775_64_ACS_WFC_F606W 245.8979115 -26.5254936 2576.410 2606.114
"""

bl = [[],[],[],[],[]]
for r in s.split(','):
    for c in range(5):
        bl[c].append(r.split()[c]) 
```

给出：

```
bl[0]
['HST_9578_02_ACS_WFC_F775W', 'HST_10615_03_ACS_WFC_F435W', 'HST_10120_02_ACS_WFC_F658N', 'HST_10775_64_ACS_WFC_F606W', 'HST_10775_64_ACS_WFC_F814W', 'HST_9578_02_ACS_WFC_F775W', 'HST_10120_02_ACS_WFC_F625W', 'HST_10353_02_ACS_WFC_F435W', 'HST_10775_64_ACS_WFC_F606W']

bl[1]
['245.8976441', '245.897645', '245.8976758', '245.8977532', '245.8977532', '245.8978148', '245.8978053', '245.8976003', '245.8979115']

bl[2]
['-26.5255957', '-26.5255138', '-26.5255024', '-26.5255296', '-26.5255296', '-26.5255491', '-26.5254741', '-26.5257784', '-26.5254936']

bl[3]
['4339.57', '2084.978', '1778.055', '2586.612', '2586.612', '4328.571', '1769.711', '3758.43', '2576.41']

bl[4]
['1882.364', '2101.122', '1752.193', '2603.519', '2603.519', '1885.712', '1754.229', '985.125', '2606.114'] 
```

**编辑/更新**：

将这两种方法合二为一：

```
import csv

with open('so.csv') as f:
    bl = [[],[],[],[],[]]
    reader = csv.reader(f)
    for row in reader:
        for col in range(5):
            bl[col].append(row[col]) 
```

使用`with`打开文件的好处是当你完成或发生异常时它会自动为你关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:52:11.437

```
with open('data.txt') as f:
   lis=[x.split() for x in f]
cols=[x for x in zip(*lis)]
for x in cols:
    print(x) 
```

**输出：**

```
 ('HST_9578_02_ACS_WFC_F775W', 'HST_10615_03_ACS_WFC_F435W', 'HST_10120_02_ACS_WFC_F658N', 'HST_10775_64_ACS_WFC_F606W', 'HST_10775_64_ACS_WFC_F814W', 'HST_9578_02_ACS_WFC_F775W', 'HST_10120_02_ACS_WFC_F625W', 'HST_10353_02_ACS_WFC_F435W', 'HST_10775_64_ACS_WFC_F606W')
('245.8976441', '245.8976450', '245.8976758', '245.8977532', '245.8977532', '245.8978148', '245.8978053', '245.8976003', '245.8979115')
('-26.5255957', '-26.5255138', '-26.5255024', '-26.5255296', '-26.5255296', '-26.5255491', '-26.5254741', '-26.5257784', '-26.5254936')
('4339.570', '2084.978', '1778.055', '2586.612', '2586.612', '4328.571', '1769.711', '3758.430', '2576.410')
('1882.364', '2101.122', '1752.193', '2603.519', '2603.519', '1885.712', '1754.229', '985.125', '2606.114') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:55:59.490

```
>>> s = """HST_9578_02_ACS_WFC_F775W 245.8976441 -26.5255957 4339.570 1882.364
HST_10615_03_ACS_WFC_F435W 245.8976450 -26.5255138 2084.978 2101.122
HST_10120_02_ACS_WFC_F658N 245.8976758 -26.5255024 1778.055 1752.193
HST_10775_64_ACS_WFC_F606W 245.8977532 -26.5255296 2586.612 2603.519
HST_10775_64_ACS_WFC_F814W 245.8977532 -26.5255296 2586.612 2603.519
HST_9578_02_ACS_WFC_F775W 245.8978148 -26.5255491 4328.571 1885.712
HST_10120_02_ACS_WFC_F625W 245.8978053 -26.5254741 1769.711 1754.229
HST_10353_02_ACS_WFC_F435W 245.8976003 -26.5257784 3758.430 985.125
HST_10775_64_ACS_WFC_F606W 245.8979115 -26.5254936 2576.410 2606.114
"""
>>> from collections import defaultdict
>>> cols = defaultdict(list)
>>> for line in s.split('\n'):
    for index, val in enumerate(line.split()):
        cols[index].append(val)

>>> cols
defaultdict(<type 'list'>, {0: ['HST_9578_02_ACS_WFC_F775W', 'HST_10615_03_ACS_WFC_F435W', 'HST_10120_02_ACS_WFC_F658N', 'HST_10775_64_ACS_WFC_F606W', 'HST_10775_64_ACS_WFC_F814W', 'HST_9578_02_ACS_WFC_F775W', 'HST_10120_02_ACS_WFC_F625W', 'HST_10353_02_ACS_WFC_F435W', 'HST_10775_64_ACS_WFC_F606W'], 1: ['245.8976441', '245.8976450', '245.8976758', '245.8977532', '245.8977532', '245.8978148', '245.8978053', '245.8976003', '245.8979115'], 2: ['-26.5255957', '-26.5255138', '-26.5255024', '-26.5255296', '-26.5255296', '-26.5255491', '-26.5254741', '-26.5257784', '-26.5254936'], 3: ['4339.570', '2084.978', '1778.055', '2586.612', '2586.612', '4328.571', '1769.711', '3758.430', '2576.410'], 4: ['1882.364', '2101.122', '1752.193', '2603.519', '2603.519', '1885.712', '1754.229', '985.125', '2606.114']})
>>> cols[0]
['HST_9578_02_ACS_WFC_F775W', 'HST_10615_03_ACS_WFC_F435W', 'HST_10120_02_ACS_WFC_F658N', 'HST_10775_64_ACS_WFC_F606W', 'HST_10775_64_ACS_WFC_F814W', 'HST_9578_02_ACS_WFC_F775W', 'HST_10120_02_ACS_WFC_F625W', 'HST_10353_02_ACS_WFC_F435W', 'HST_10775_64_ACS_WFC_F606W']
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:35:52.347

一个班轮版本：

```
with open('go.txt') as input:
    print zip(*(line.split() for line in input)) 
```

或使用 csv

```
with open('go.txt') as input:
     print zip(*csv.reader(input, delimiter = ' ')) 
```

`zip(*)`最终进行您需要的转换，将每列转换为自己的列表。`zip`进行相反的转换，将列组合回列表。

# qt4 - 防止在 VTK 中旋转 2D 非结构化网格

> ID：11263016
> 
> 赞同：0
> 
> 时间：2012-06-29T13:49:54.397
> 
> 标签：qt4, vtk

我正在使用 QVTKRenderWindowInteractor 在 Qt 应用程序中嵌入 VTK 窗口。在这个窗口中，我需要显示一个创建为 vtkUnstructuredGrid 的网格。因为我的数据只是二维的，所以我想确保相机始终保持数据的法线。我应该怎么做才能挡住摄像头？非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:28:20.420

短篇小说：使用特定的`vtkInteractorStyle`. 已经有一些样式可用（例如`vtkInteractorStyleRubberBandZoom`等），但在最坏的情况下， a`vtkInteractorStyle`可以根据自己的需要进行子类化和定制。在此示例中，我们可以禁用左键的基本行为（相机旋转）并使用另一种行为。

# mysql - MySQL：导入时忽略错误？

> ID：11263018
> 
> 赞同：147
> 
> 时间：2012-06-29T13:49:59.827
> 
> 标签：mysql, database, import

我正在导入一个相当大的数据库。该`.sql`文件中有近 1,000,000 行。问题是我在尝试导入数据库时​​遇到语法错误。它说：

> 第 8428420 行的错误 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在“
> **致命错误**：超过 600 秒的最大执行时间 ”附近使用的正确语法

通常我会打开 .sql 文件并修复错误。但是我的电脑真的很难打开这个文件。

导入 MySQL 数据库时有什么方法可以忽略错误？

* * *

## 回答 #1

> 赞同：347
> 
> 时间：2014-09-10T17:21:49.700

在您的 mysql 导入上使用`--force`( `-f`) 标志。MySQL 不会在有问题的语句上停止，而是继续并将错误记录到控制台。

例如：

```
mysql -u userName -p -f -D dbName < script.sql 
```

# python - __import__ 从哪里获取别名？

> ID：11263027
> 
> 赞同：2
> 
> 时间：2012-06-29T13:50:15.453
> 
> 标签：python, import, alias

Python 允许通过`...as <ALIAS>`import 语句中的子句对导入进行别名，如下所示：

```
import mymodule as somealias
from myothermodule import spam as spamalias, ham as hamalias 
```

现在，至少在默认情况下，import 语句，包括那些`as`像上面那样具有 - 子句的语句，会导致对其`__builtin__.__import__`参数列表*不*包含此类别名名称的调用。IOW，AFAICT，以下“无别名”导入语句产生与`__builtin__.__import__`上面引用的导入语句相同的调用：

```
import mymodule
from myothermodule import spam, ham 
```

那么这些别名是如何进入导入流程的呢？Python 是否提供了自定义导入过程如何使用别名的方法？

（我没有想到任何特定的应用程序；我只是想更好地理解 Python 是如何工作的。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T13:52:55.687

该函数`__import__()`不绑定调用范围内的任何名称。基本上，

```
import foo 
```

类似于

```
foo = __import__("foo") 
```

和

```
import foo as bar 
```

类似于

```
bar = __import__("foo") 
```

名称绑定发生在调用范围内，而不是函数内部，因此`__import__()`不需要知道模块最终将绑定到什么名称*。*

这也可以从这些语句的 CPython 字节码中看出：

```
>>> dis.dis(compile("import foo", "", "exec"))
  1           0 LOAD_CONST               0 (-1)
              3 LOAD_CONST               1 (None)
              6 IMPORT_NAME              0 (foo)
              9 STORE_NAME               0 (foo)
             12 LOAD_CONST               1 (None)
             15 RETURN_VALUE        
>>> dis.dis(compile("import foo as bar", "", "exec"))
  1           0 LOAD_CONST               0 (-1)
              3 LOAD_CONST               1 (None)
              6 IMPORT_NAME              0 (foo)
              9 STORE_NAME               1 (bar)
             12 LOAD_CONST               1 (None)
             15 RETURN_VALUE 
```

`IMPORT_NAME`操作码隐式调用并将生成的`__import__()`模块留在内部堆栈上。随后`STORE_NAME`从堆栈中弹出模块并将其绑定到本地名称。您可以看到两个片段之间的唯一区别是模块存储到哪个名称。

# visual-c++ - 如何在非 mfc 项目中使用静态库中的 MFC 对话框类？

> ID：11263028
> 
> 赞同：1
> 
> 时间：2012-06-29T13:50:15.470
> 
> 标签：visual-c++, mfc, static-libraries

我想要达到的目标：

我有一个非 mfc 的大型现有项目。

我创建了一个静态库，其中定义了 cdialogs。

我已经读过，可以在非 mfc 应用程序中使用这个库，但我不知道如何。

我阅读了很多关于 mfc 入口点和初始化的内容，这些内容发生在 afxwinmain()、InitInstance、run() 等中。所以，显然，这些东西从未在我的应用程序中完成。

谁能建议一种在主应用程序中使用我的库中的 cdialogs 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:48:55.937

感谢@satuon，您的假设到目前为止有效。

我实际上将 afxwinmain() 函数中的 mfc 代码复制到了我的静态库中的一个函数中（在我的例子中，是一个 cwinapp 方法）。

在我的主应用程序中，我将 cwinapp 对象声明为外部对象。然后，我只需调用 theApp.InitMFC() 即可。

例子：

```
extern MyCWinApp theApp;
theApp.InitMFC(); 
```

就我而言，theApp 是全球性的。

# java - 最终可执行文件中是否包含未引用的方法？

> ID：11263029
> 
> 赞同：6
> 
> 时间：2012-06-29T13:50:16.407
> 
> 标签：java, android, eclipse, jar

在不运行 ProGuard 的情况下在 Android 上构建和部署可执行文件时，最终可执行文件中是否包含未引用的方法？

是否也包括来自外部库 jar 的未引用方法？

这种行为是否依赖于 Java 编译器，或者 dex 是否会进行所有修整（如果有）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:26:38.580

我用一个简单的类进行了测试（所有这些方法都没有被引用）：

```
public class Test
{
    private void privateMethod()
    {
        System.out.println("private");
    }

    protected void protectedMethod()
    {
        System.out.println("protected");
    }

    public void publicMethod()
    {
        System.out.println("public");
    }

    void method()
    {
        System.out.println("method");
    }
} 
```

我编译了 APK，提取`Test.class`并反编译了它（使用`javap -c`）。我得到了以下结果。我也用jar而不是APK进行了测试，结果完全一样。我使用了 Java 1.6.0_29。

```
 protected void protectedMethod();
    Code:
       0: getstatic     #44             // Field java/lang/System.out:Ljava/io/PrintStream;
       3: ldc           #47             // String protected
       5: invokevirtual #46             // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       8: return        

  public void publicMethod();
    Code:
       0: getstatic     #44             // Field java/lang/System.out:Ljava/io/PrintStream;
       3: ldc           #48             // String public
       5: invokevirtual #46             // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       8: return        

  void method();
    Code:
       0: getstatic     #44             // Field java/lang/System.out:Ljava/io/PrintStream;
       3: ldc           #49             // String method
       5: invokevirtual #46             // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       8: return 
```

这意味着在编译时**只排除私有函数。**

我也尝试声明 class `final`，但结果是一样的。

# c# - C# - 当方法参数验证失败时，我应该回退异常吗？

> ID：11263030
> 
> 赞同：4
> 
> 时间：2012-06-29T13:50:18.673
> 
> 标签：c#, validation, exception, methods

我正在整理一个技术分析库，我希望其他人最终可以使用它，所以我想确保我验证进入我的方法的数据并返回适当的东西。现在，如果验证失败，我让它返回一个空白值。抛出异常会更合适吗？如果其他开发人员可以使用这个库，更好的做法是什么？这是我目前验证的方式：

```
 /// <summary>
    /// Calculates the MACD (Moving Average Convergence Divergence) over n periods, where n is the number of elements in the input prices.
    /// </summary>
    /// <param name="InputValues">The numbers used for the MACD calculation. Index 0 must be the oldest, with each index afterwards one unit of time forward. There must more values present than what the SlowEMA calls for.</param>
    /// <param name="FastEMA">Optional: The smaller (faster) EMA line used in MACD. Default value is 12\. Must be less than the SlowEMA.</param>
    /// <param name="SlowEMA">Optional: The larger (slower) EMA line used in MACD. Default value is 26\. Must be less than the number of elements in InputValues.</param>
    /// <param name="SignalEMA">Optional: The EMA of the MACD line. Must be less than the FastEMA.</param>
    /// <returns>Returns the components of a MACD, which are the MACD line itself, the signal line, and a histogram number.</returns>
    public MACD CalculateMACD(decimal[] InputValues, decimal FastEMA = 12M, decimal SlowEMA = 26M, decimal SignalEMA = 9M)
    {
        MACD result;

        // validate that we have enough data to work with
        if (FastEMA >= SlowEMA) { return result; }
        if (SlowEMA >= InputValues.Count()) { return result; }
        if (SignalEMA >= FastEMA) { return result; }

        // Do MACD calculation here

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T13:53:09.153

.Net 中有三个标准的参数异常：

*   参数异常
*   参数NullException
*   参数OutOfRangeException

它们的构造函数都有重载，以允许您说明哪个参数是一个问题，并在抛出它们时给出更详细的消息。

使用这些将是正常的做法。

编辑：

除了可以接受 null （或空或其他）之外，我仍然倾向于抛出异常，因为您不一定知道您的图书馆的用户会接受什么。如果他们不介意空值，他们总是可以捕获异常并酌情处理它。

但是，如果您不抛出异常，那么您告诉图书馆使用者问题所在的能力就会受到限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:54:33.097

由于您尝试返回未分配的变量，因此此代码将无法编译。假设您真的使用`MACD result = new MACD();`，答案是：视情况而定。你可以用一个初始化的对象做*任何事情吗？*那么是的，可以退货。

如果没有，您可以`return null`检查一下，或者只是`throw`一个`ArgumentException()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:18:12.400

如果`CalculateMACD`由于传递了荒谬的参数而以错误的方式使用了，这可以被认为是编程错误并且应该抛出异常。不要担心在这种情况下抛出异常的后果，因为它应该只在开发环境中测试应用程序时抛出。

但是，如果有问题的参数可以在生产环境中传递，您应该确定这是否是正常情况。在这种情况下，请考虑在返回值中返回适当的信息（特殊属性或通过返回`null`例如。

如果这是不应该发生的异常情况，那么抛出异常可能是更好的方法。在这种情况下，请确保应用程序在之后仍能顺利运行，或者至少以适当且可理解的消息结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:58:53.447

我会考虑这样一个事实，如果您的应用程序运行到任何错误或不正确的状态，如果继续未处理或没有额外注意会造成损坏，那么应该抛出异常。

如果您的数据太少而无法进行有意义的分析，则由您决定结果计算是否正确/不正确/有害/等。

您还必须记住，抛出异常意味着中断程序的正常执行路径并输入附加路径（异常处理路径）。

我会用某种消息通知用户这种情况，并让程序以普通方式终止或继续，而不是强行抛出异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-21T00:18:50.527

验证您的论点是一种常见的良好做法。有一些库可以完成常见的参数检查，因此您不必重复这些检查。这是一个名为[Argument Validator](https://github.com/rezahok/ArgumentValidator)的工具，我为我的项目编写并使用它。

示例用法如下所示：

```
public void AddPerson(string personId, Person personData)
        {
            Throw.IfNullOrEmpty(personId, nameof(personId));
            Throw.IfNull(personData, nameof(personData)); 
```

..

```
public void Compute(int generation)
        {
            Throw.IfNot(() => generation > 100); 
```

..

```
 public void Compute(int generation)
        {
            Throw.IfOutOfRange(generation, 1, 100, nameof(generation)); 
```

# php - 如何通过检查另一个键的数组值的重复来总结一个键的数组值

> ID：11263033
> 
> 赞同：1
> 
> 时间：2012-06-29T13:50:21.337
> 
> 标签：php, arrays, multidimensional-array

```
Array
(
    [0] => Array
        (
            [linkId] => 1
            [clicksDate] => 1340856000
            [clicksCount] => 1
        )

    [1] => Array
        (
            [linkId] => 1
            [clicksDate] => 1340942400
            [clicksCount] => 2
        )

    [2] => Array
        (
            [linkId] => 1
            [clicksDate] => 1340942400
            [clicksCount] => 1
        )

    [3] => Array
        (
            [linkId] => 2
            [clicksDate] => 1340856000
            [clicksCount] => 2
        )

    [4] => Array
        (
            [linkId] => 2
            [clicksDate] => 1340942400
            [clicksCount] => 3
        )

    [5] => Array
        (
            [linkId] => 2
            [clicksDate] => 1340942400
            [clicksCount] => 1
        )

    [6] => Array
        (
            [linkId] => 3
            [clicksDate] => 1340856000
            [clicksCount] => 0
        )
} 
```

输出 ：

```
Array(

    [0] => Array(  
       [clicksDate] => 1340856000,
       [clicksCount] => 3
     )

    [1] => Array(  
       [clicksDate] => 1340942400,
       [clicksCount] => 7
     )
) 
```

第一个数组有两个相似的日期，基于日期重复，我需要对点击次数求和。有人能帮我找到简单的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:01:11.637

您可以将日期设置为关联数组的键，然后将点击次数作为值求和，如下所示：

```
$result = array();
foreach ($data as $value) {
    if (!isset($result[$value['clicksDate']])) {
        $result[$value['clicksDate']] = 0;
    }
    $result[$value['clicksDate']] += $value['clicksCount'];
}
var_dump($result); 
```

在此处查看实际操作：http: [//codepad.org/tJEBTobr](http://codepad.org/tJEBTobr)

# php - 如何使用 PDO 将二进制数据插入 MSSQL

> ID：11263034
> 
> 赞同：12
> 
> 时间：2012-06-29T13:50:25.647
> 
> 标签：php, sql, sql-server, pdo

我目前遇到一个奇怪的错误。

设置：带有 localdb 的 MSSQL Server 2012 Express 目标表排序规则是：SQL_Latin1_General_CP1_CI_AS

带有 MCRYPT_RIJNDAEL_256 和 MCRYPT_MODE_ECB 的 Zend Server 5.6 MCrypt 上的 PHP 5.3.9

Sublime Text 2 默认编码（我读的是 UTF8 BOM）

我将 PDO 与 MSSQL 服务器的官方 MS 适配器一起使用。除了一件事之外，一切都很好：由于密码，我无法在管理员表中写入一行。

让我们看看我的加密密码：

```
y"ûƒ^äjw¾bðúl5êù-Ö=W¿Š±¬GP¥Œy÷&ø 
```

这是 PDO 跟踪：

```
Array
(
    [0] => IMSSP
    [1] => -7
    [2] => An error occurred translating string for input param 3 to UCS-2: No mapping for the Unicode character exists in the target multi-byte code page.

)
SQL: [120] INSERT INTO administrator ( [username], [email], [password], [section] )  VALUES(:username, :email, :password, :section)
Params:  4
Key: Name: [9] :username
paramno=0
name=[9] ":username"
is_param=1
param_type=2
Key: Name: [6] :email
paramno=1
name=[6] ":email"
is_param=1
param_type=2
Key: Name: [9] :password
paramno=2
name=[9] ":password"
is_param=1
param_type=2
Key: Name: [8] :section
paramno=3
name=[8] ":section"
is_param=1
param_type=2 
```

当我使用我的 MSSQL 管理中心时，我可以使用完全相同的 SQL 查询插入我的行。我想列设置很好：

```
 ["id"]=>
    string(3) "int"
    ["username"]=>
    string(12) "nvarchar(45)"
    ["email"]=>
    string(12) "nvarchar(45)"
    ["password"]=>
    string(12) "varbinary(45)"
    ["section"]=>
    string(11) "nvarchar(7)"
    ["country_code"]=>
    string(11) "nvarchar(2)" 
```

我使用准备好的语句和`bindParam`没有额外选项的函数来执行我的 SQL 语句。

如果有人有想法，请告诉我如何解决。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:20:18.373

您应该将排序规则更改`utf8_unicode_ci`为处理那些少数无人看管的字符。

你也应该尝试这样的事情：

```
$db = new PDO('foo', 'bar', 'blo');
$stmt = $db->prepare("select foo, bar from table where id=?");
$stmt->execute(array($_GET['id']));
$stmt->bindColumn(1, $type, PDO::PARAM_STR, 256);
$stmt->bindColumn(2, $lob, PDO::PARAM_LOB);
$stmt->fetch(PDO::FETCH_BOUND);
header("Content-Type: $type");
fpassthru($lob); 
```

要仔细检查类型（这是错误/错误开始发生的地方），请执行此检查，甚至可以代替上面示例的最后一行：

```
if (is_string($lob)) echo $lob;
else fpassthru($lob); 
```

# java - 在电子邮件中附加 MS Word、Excel 和 pdf 文件

> ID：11263037
> 
> 赞同：0
> 
> 时间：2012-06-29T13:50:36.143
> 
> 标签：java, email, email-attachments, attachment

下面是我用于发送电子邮件的代码，效果很好。

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package myWorkingFiles;

import org.apache.commons.mail.*;

/*
*
* @author xyz
*/
public class GmailEmailWorking {

    public static void main(String[] args) {
        String myEmailId = "myEmailId@gmail.com";
        String myPassword = "myPassword";
        String senderId = "senderId@yahoo.co.in";
        try {
            Email email = new SimpleEmail();
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator(myEmailId, myPassword));
            email.setDebug(true);
            email.setHostName("smtp.gmail.com");
            email.setFrom(myEmailId);
            email.setSubject("Hi");
            email.setMsg("This is a test mail ... :-)");
            email.addTo(senderId);
            email.setTLS(true);
            email.send();
            System.out.println("Mail sent!");
        } catch (Exception e) {
            System.out.println("Exception :: " + e);
        }
    }
} 
```

现在我想发送带有附件的电子邮件，而不是如上所示的普通电子邮件。

请让我知道我需要做哪些改变？我相信这很容易，但遗憾的是，谷歌先生也没有帮助我。

我找到了一些链接，但它们没有用。

[http://www.tutorialspoint.com/jsp/jsp_sending_email.htm](http://www.tutorialspoint.com/jsp/jsp_sending_email.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:55:05.033

快速搜索让我找到了这个.. [http://commons.apache.org/email/userguide.html](http://commons.apache.org/email/userguide.html)

你在尝试寻找不同的东西吗？

# extjs4 - Sencha Touch 2 - 冲突 itemtap 和 itemswipe

> ID：11263038
> 
> 赞同：0
> 
> 时间：2012-06-29T13:50:38.407
> 
> 标签：extjs4, extjs, sencha-touch-2

我正在使用 Sencha Touch 2 开发一个应用程序，并且我有一个屏幕来列出保存在数据库中的一些记录的列表。用户可以选择单击并查看有关记录的详细信息或滑动该行以显示删除按钮。我的问题是，当我刷线时，会触发 itemtap 事件。有人有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T12:22:50.270

如果您的控制器中有 someList ref，请将其添加到控制块：

`someList: { itemtap: 'onItemTap', itemswipe: 'onItemSwipe' }`

然后定义两个函数处理程序如下 `onItemTap: function(item, index, target, record, e) { console.log('in onItemTap'); }, onItemSwipe: function(this, index, target, record, e,) { console.log('in onItemSwipe'); }`

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T05:39:45.260

诀窍是您需要将两个事件侦听器放在一起，即在您的控制器中

```
downloadslist: {
    itemtap : 'showItem',
    itemswipe: 'deleteItem'
}, 
```

如果你把它当作

```
downloadslist: {
    itemtap : 'showItem'
},

downloadslist: {
    itemswipe: 'deleteItem'
}, 
```

它行不通。

# ios - OpenGL ES 2.0 在 modelMatrix 中修改几何

> ID：11263039
> 
> 赞同：0
> 
> 时间：2012-06-29T13:50:55.557
> 
> 标签：ios, 3d, opengl-es-2.0

我在 iOS 平台上使用 OpenGL ES 2.0 构建的环境。我有在启动时制作的元素，所以我有几何的初始点。这些点包含在模型和模型视图矩阵中，但包含初始点的数组在应用程序的整个生命周期中永远不会更新。因此，我无法再参考这些要点来寻找任何有用的东西。有没有办法以其他方式（从模型或模型视图矩阵）获取这块几何图形的当前 3d 坐标？如果是这样，任何人都可以提供一个非常清楚的例子来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:25:15.390

你想要做的是在你应用了所有你想要的转换的地方获取当前的模型视图矩阵。

```
 GLfloat matrix[16]; 
    glGetFloatv (GL_MODELVIEW_MATRIX, matrix); 
```

这将为您返回整个矩阵，您可以将其与模型的所有顶点相乘，然后将在世界空间中做任何您想做的事情:)

希望这可以帮助！

# objective-c - 蓝牙信号 iOS 设备

> ID：11263040
> 
> 赞同：1
> 
> 时间：2012-06-29T13:50:58.263
> 
> 标签：objective-c, macos, cocoa-touch, cocoa

在objective-c（可可）中，我如何能够查询从计算机到iOS设备的蓝牙信号强度？

我正在运行的操作系统是 Lion (10.7)。

# hibernate - Grails 一对多与抽象类

> ID：11263044
> 
> 赞同：1
> 
> 时间：2012-06-29T13:51:11.370
> 
> 标签：hibernate, grails, groovy, grails-orm, single-table-inheritance

在我们的应用程序中，我们有一个 Player 可以有游戏和练习计划，因此我们设计了抽象类 Plan 和两个派生类 GamePlan 和 PracticePlan。在数据库中，派生类被保存到具有“类”属性的单个表中。

当我们对特定玩家使用 getPlans() 时，我们会获得所有计划，但我们想知道如何仅获得游戏或练习计划。类似 player.getPracticePlans() 或 Player.PracticePlans(player_id) 的东西。以下是我们的课程。

```
class Player  {

    String name
    static hasMany = [ plans : Plan] 
}

abstract class Plan {
}

class PracticePlan extends Plan{
}

class GamePlan extends Plan{
} 
```

注意：我们尝试使用类似的东西：

```
def query = Player.where {
    plans {  class == "GamePlan" }
} 
```

但是该类是保留关键字，并且无法编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:53:54.620

我相信你可以这样做来加载一个人的所有计划，然后过滤掉不需要的计划：

```
def gamePlansForPlayer = Player.get( id ).plans.findAll { plan ->
  plan.instanceOf( GamePlan )
} 
```

虽然没有测试过:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T20:00:22.390

您应该能够使用`getClass()`. 请参阅此答案：[Groovy / grails 如何确定数据类型？](https://stackoverflow.com/questions/2060427/groovy-grails-how-to-determine-a-data-type).

您还可以使用[Criteria](https://grails.github.io/grails-doc/latest/ref/Domain%20Classes/withCriteria.html)，它将列放在引号中，这样它就不会遇到保留字问题：

```
def plans = Player.withCriteria {
    plans {
        eq('class', "com.name.space.GamePlan")
    }
} 
```

（请注意，我使用命名空间指定类名，因为这就是它在我的经验中的存储方式。YMMV。）

如果这可行并且您想让它更通用，您可以将其变成[命名查询](https://grails.github.io/grails-doc/latest/ref/Domain%20Classes/namedQueries.html)并将类作为参数提供：

```
def namedQueries = {
    plansByClass = { clazz ->
        plans {
            eq('class', clazz)
        }
    }
} 
```

然后，您可以像调用静态方法一样调用它：

```
def plans = Player.plansByClass('GamePlan') 
```

请注意，虽然我确实在我的应用程序中使用了 Criteria，但这些特定示例并未经过测试。

# c# - 数据注释验证在 ASP.NET MVC 3 中不起作用

> ID：11263046
> 
> 赞同：1
> 
> 时间：2012-06-29T13:51:24.953
> 
> 标签：c#, jquery, .net, asp.net-mvc, razor

我在部分视图中有一个表单，该表单呈现在选项卡控件上的选项卡内，如下所示：

```
@model USARAFSyncMVC.Areas.Event.Models.EventFullScaffoldModel

@using (Ajax.BeginForm("SaveMainEventDetails", "Event", new { area = "Event" },
    new AjaxOptions { UpdateTargetId = "FormWrapper", OnComplete = "SetSuccessLabel", InsertionMode = InsertionMode.Replace },
    new { method = "post" }))
{
    @Html.Hidden("eventType", "1", new { id = "eventType" })
    <div id="FormWrapper">
      <hr />
      <table border="0">
        <tr>
          <td>Title</td>
          <td>@Html.TextBoxFor(model => model.Title, new { style = "width:300px" })
            @Html.ValidationMessageFor(model => model.Title)</td>

        </tr>
        <tr>
          <td>OPR</td>
          <td> @Html.EditorFor(model => model.OPRID)</td>

        </tr>
        <tr>
          <td>Organization</td>
          <td> @Html.EditorFor(model => model.DomainID)</td>

        </tr>
        <tr>
          <td>POC</td>
          <td> @Html.EditorFor(model => model.POC)</td>

        </tr>
        <tr>
          <td>Location</td>

          <td>
            @Html.EditorFor(model => model.LocationID)
          </td>

        </tr>
        <tr>
          <td>Dates</td>
          <td>
            <table>
              <tr>
                <th>@Html.LabelFor(m => m.StartDate)</th>
                <th> @Html.LabelFor(m => m.EndDate)</th>
              </tr>
              <tr>
                <td> @Html.EditorFor(m => m.StartDate)</td>
                <td>@Html.EditorFor(m => m.EndDate)</td>
              </tr>

            </table>

            <table id="DeployRedeployDiv">
              <tr>
                <th>Deploy</th>
                <th>ReDeploy</th>
              </tr>
              <tr>
                <td> @Html.EditorFor(m => m.EstimatedDeployDate)</td>
                <td>@Html.EditorFor(m => m.EstimatedReDeployDate)</td>
              </tr>

            </table>

          </td>
        </tr>
        <tr>
          <td>OSRs</td>
          <td>
            @(Html.Telerik()
                  .PanelBar()
                  .Name("PanelBar")
                  .HtmlAttributes(new { style = "width:300px;" })
                  .Items(o => o.Add().Text("Click").Content(@<text> 

                @Html.CheckBoxList("OprList",
                    x => x.OprList,
                    x => x.OPRID,
                    x => x.AltTitle,
                    x => x.EventOSRs, Position.Vertical)</text>).Expanded(false)))
          </td>
        </tr>
        <tr>
          <td>Purpose</td>
          <td> @Html.TextBoxFor(model => model.Why, new { style = "width: 400px; height:200px" })</td>
        </tr>
        <tr>
          <td>Background</td>
          <td> @Html.TextBoxFor(model => model.What, new { style = "width: 400px; height:200px" })</td>
        </tr>
        <tr>
          <td>Viewable</td>
          <td> @Html.CheckBoxFor(model => model.Viewable)</td>
        </tr>

      </table>
      <div>
        <input class="t-button" type="submit" name="button" value="Save" />

      </div>

    </div>

} 
```

这是控制器：

```
 [HttpPost]
    public ActionResult SaveMainEventDetails(EventFullScaffoldModel model, string[] OprList, string eventType, string cbLoc, string cbOpr, string cbOrg)
    {
        if (OprList != null)
        {
            model.EventOSRs = miscRepository.GetOprsList().ToModel().Where(o => OprList.Contains(o.OPRID.ToString())).ToList();
        }

        model.Type = int.Parse(eventType);
        model.LocationID = cbLoc;
        model.OPRID = int.Parse(cbOpr);
        model.DomainID = int.Parse(cbOrg);
        eventRepository.Insert(model.ToDto());
        return View();
    } 
```

这是模型：

```
 public partial class EventFullScaffoldModel
    {
        public Int32 EventID { get; set; }

        [Required(ErrorMessage = "Required!")]
        public String Title { get; set; }

        [Required(ErrorMessage = "Required!")]
        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:dd-MM-yyyy}")]
        public DateTime StartDate { get; set; }

        [Required(ErrorMessage = "Required!")]
        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:dd-MM-yyyy}")]
        public DateTime EndDate { get; set; }

        [Required(ErrorMessage = "Required!")]
        public String What { get; set; }

        [Required(ErrorMessage = "Required!")]
        public String Why { get; set; }

        public Nullable<DateTime> Modified { get; set; }

        public String ModifiedBy { get; set; }

        public Nullable<DateTime> Created { get; set; }

        public String CreatedBy { get; set; }

        [UIHint("ActiveDirectoryLoadOnDemand"), Required]
        public String POC { get; set; }

        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:MM-dd-yyyy}")]
        public Nullable<DateTime> EstimatedDeployDate { get; set; }

        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:MM-dd-yyyy}")]
        public Nullable<DateTime> EstimatedReDeployDate { get; set; }

        public Nullable<Int32> TSCMISID { get; set; }

        public Nullable<Int32> ReviewStatus { get; set; }

        public int? Type { get; set; }

        public String InactivityReason { get; set; }

        public Boolean Viewable { get; set; }

        public string OPRAltTitle { get; set; }

        [UIHint("OprDropDown"), Required]
        public int OPRID { get; set; }

        [UIHint("OrgDropDown"), Required]
        public int DomainID { get; set; }

        [UIHint("LocationsLoadOnDemand"), Required]
        public string LocationID { get; set; }

        public string LocationTitle { get; set; }

        public IList<OsrModel> EventOSRs { get; set; }

        public IList<TargetAndEffectModel> EventTargetEffects { get; set; }

        public IList<AssociationModel> EventAssociations { get; set; }

        public IList<EventObjectiveModel> EventObjectives { get; set; }

        public IList<StrategicObjectiveModel> EventTSOs { get; set; }

        public IList<TaskModel> EventTasks { get; set; }

        public IList<PaxModel> EventPaxBreakDowns { get; set; }

        public IList<FundingModel> EventFundings { get; set; }

        public IList<UnitModel> EventExecutingUnits { get; set; }

        public IList<OsrModel> OprList { get; set; }

        public IList<ObjectiveModel> ObjectiveList { get; set; }

        public IList<StrategicObjectiveModel> StrategicList { get; set; }

        public IList<OrgModel> OrgsList { get; set; }
    } 
```

模型永远不会得到验证并直接通过控制器上的事务运行。为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:53:02.070

我建议首先检查您是否以正确的顺序包含了必要的 javascript 文件以进行不显眼的验证，这将使验证在客户端成功进行。

关于服务器端验证，基本上你必须通过显式检查将模型保存到数据库中`ModelState.IsValid`。由于您正在进行 AJAX 调用，我可能会建议您将模型状态错误返回为 JSON。

所以在`OnFailure`方法中`AjaxOptions`你可以解析 JSON 并将错误显示为一个 div 中的摘要。

基本上你可以遵循这个模式。

```
[HttpPost]
public JsonResult SaveMainEventDetails(..)
{
  if(ModelState.IsValid)
  {
    .. save to database

    return Json(new{ success = true });
  }

  var errorDict =  ModelState..
  return Json(new { success = false, errors = errorDict });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T13:53:12.743

您需要明确检查是否`ModelState.IsValid`在操作中，如果不是，则返回编辑视图。
如果您显示无效模型的编辑视图，MVC 将通过 Validate 帮助程序自动显示错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:53:05.923

这应该会有所启发： [ModelState.IsValid 在 NerdDinner 的 ASP.NET MVC 中对什么有效？](https://stackoverflow.com/questions/881281/what-is-modelstate-isvalid-valid-for-in-asp-net-mvc-in-nerddinner)

基本上你必须通过使用触发模型验证`ModelState.IsValid`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:56:26.840

`@{ Html.EnableClientValidation(); }`在视图中添加

并参考此链接了解更多详细信息[如何：使用 DataAnnotations 属性验证模型数据](http://msdn.microsoft.com/en-us/library/ee256141.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T12:26:15.663

好的，问题是 Telerik Script Registrar 没有引用正确的 JQuery。现在它正在工作。我直接引用了 JQuery 库，还有验证脚本。在 Telerik 脚本注册器上，它已经是 default group 的一部分，像我一样重新引用它们，导致它由于某种原因而崩溃。仅添加对不属于原始默认组的脚本的引用。有关这方面的更多信息，需要阅读此 MVC 扩展的在线文档。

# android - 在安卓平板电脑中查找当前位置

> ID：11263047
> 
> 赞同：0
> 
> 时间：2012-06-29T13:51:26.017
> 
> 标签：android, geolocation, gps

在没有 SIM 卡的 android 平板电脑中查找当前用户位置的最佳方法是什么？

我的问题可能很幼稚，但位置管理器是否需要网络运营商 (SIM) 和互联网连接？同样，如果我们必须使用 GPS，是否也需要网络运营商？

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:10:06.633

您实际上并不需要网络运营商的 GPS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T13:57:44.800

GPS 不需要网络运营商。

不过，您确实需要 Internet 连接才能使用 NETWORK_PROVIDER。如果没有 Internet 连接，您将无法获得最新的位置。

NETWORK_PROVIDER 收集 wifi 站信息和手机信号塔信息，并通过 Internet 将其发送到 Google 的位置服务器。位置服务器根据存储在服务器数据库中的数据，使用该信息来查找用户最可能的位置。

您可以通过 wifi 或移动数据访问互联网。如果您没有 SIM 卡，NETWORK_PROVIDER 只会收集 wifi 信息并尝试据此猜测您的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:57:46.147

该`LocationManager`课程使用内部 GPS 无线电，而不是您的 SIM 卡。`MapView`除非您计划使用或类似的地图组件，否则您也不需要互联网连接。如果您的平板电脑中有 GPS，只需将其打开（激活）并尝试使用SensorManager` 从 GPS 传感器读取数据`LocationManager`的众多示例之一。`or`希望这可以帮助！这是一个帮助您入门的[示例。](http://hejp.co.uk/android/android-gps-example/)

# java - 在 selenium rc 中检查日期格式

> ID：11263050
> 
> 赞同：0
> 
> 时间：2012-06-29T13:51:38.970
> 
> 标签：java, selenium

我在下面的代码中苦苦挣扎。在网页中，一些文档显示在网格中。我选择第一行，然后我想检查它是否按照标准显示日期和时间格式。

```
DateFormat dateFormat = new SimpleDateFormat("mm/dd/yyyy hh:mm:ss aa");
Date date = new Date();

String newDate = dateFormat.format(date);

// This xpath for selecting first row on the grid
if(!selenium.getText("//*@id='gbs_evo_grid__TreeView_1']/div/div/div/div[1]/table/tbody/tr/td[3]").equals(newDate))
{
    SeleneseTestBase.fail("The Date format is not correct");
} 
```

你能帮我看看上面的代码是否正确，或者你能提供替代代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:16:30.553

`mm/dd/yyyy hh:mm:ss aa`：您正在使用`m`月份，而不是`M`.

此外，您的代码会检查页面中的日期是否与当前日期完全相同（第二精度）。这真的是你需要的吗？如果生成页面的服务器与执行测试的客户端的日期不完全相同，或者如果测试有点慢，则测试永远不会通过。您不只是想检查生成的日期是否可以用日期格式解析（并且可能，它的值与当前日期在同一分钟或小时内）？

# objective-c - 将 PDF 的每一页提取为图像：设置图像的大小

> ID：11263055
> 
> 赞同：1
> 
> 时间：2012-06-29T13:51:50.280
> 
> 标签：objective-c, pdf, export, nsbitmapimagerep

我在下面的代码中设置输出图像的大小时遇到​​了一些问题（我发现这是另一个 StackOverflow 问题的答案）。

我需要将图像输出为小预览和高分辨率图像。但无论如何，它只能输出 596 x 842。

我尝试使用 setSize 方法更改大小，但它只更改图像的大小，在大空白区域中留下一个小图像。我无法让它正确扩展。

有人有想法吗？

```
NSPDFImageRep *img = [NSPDFImageRep imageRepWithContentsOfFile:pdfPath]; 
NSImage *temp = [[NSImage alloc] init]; 
NSBitmapImageRep *rep;

int count = [img pageCount]; 
for(int i = 0 ; i < count ; i++)
{ 
    [img setCurrentPage:i];
    [temp addRepresentation:img];      

    rep = [NSBitmapImageRep imageRepWithData:[temp TIFFRepresentation]];

    NSData *finalData = [rep representationUsingType:NSJPEGFileType properties:nil]; 
    NSString *pageName = [NSString stringWithFormat:@"%d.jpg", [img currentPage]]; 
    [fileManager createFileAtPath:[NSString stringWithFormat:@"%@/%@", localPath, pageName] contents:finalData attributes:nil];
} 
```

提前致谢。

注意：这是一个 Mac OSX 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T14:08:33.787

似乎 TIFFRepresentation 只会返回 72dpi 结果，这是非常低的分辨率。

我遇到了同样的问题，并通过重写函数以使用[ImageIO 框架](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/ImageIOGuide/imageio_basics/ikpg_basics.html)来解决它。我将 PDF 作为 CGImageSource，并将 JPG 设置为 CGImageDestination。您可以使用 CGImageProperties 来指定分辨率以及许多其他内容。

# ssis - SSIS 复合键

> ID：11263057
> 
> 赞同：1
> 
> 时间：2012-06-29T13:51:57.360
> 
> 标签：ssis

我的 SSIS 包将数据从数据库 X 提取到我的本地数据库。这是情况。传入的数据有 3 列：`colA`, `colB`，`colC`它们都没有主键和唯一性。我使用连接`columnA`从另一个表中获取。这些列与我的表列`col1`, `col2`, `col3`. 两者`Col1`都是`Col2`主键。

```
colA    colB   colC
100       1     1000.00
100       2     500.00
...
100       5      1500.00
200       1       500.00
....
200       6      5678.00
... 
```

我不应该使用 colC 作为查找列。如何将数据从数据库 X 提取到我的数据库？Plz..我是 SSIS 的新手。

# c# - Metro 应用程序可以在 Windows XP 或 Windows 7 上运行吗？

> ID：11263066
> 
> 赞同：1
> 
> 时间：2012-06-29T13:52:15.540
> 
> 标签：c#

我正在使用 Visual Studio 构建一个桌面程序，并注意到他们添加了对 Metro 应用程序的支持。这些是否也适用于 XP 和 7（桌面应用程序）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:55:49.750

不。

Metro 风格的应用程序对于 Windows 8 来说是全新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:04:39.857

要使 Windows 8 风格的应用程序支持 Windows 7（可能还有 XP，我不确定），可以使用 Microsoft Surface SDK：http: [//msdn.microsoft.com/en-us/ library/ff727815.aspx](http://msdn.microsoft.com/en-us/library/ff727815.aspx)但这个 SDK 只是对 .NET Framework 的补充。当使用 Surface SDK 编写的程序在 Windows 8 中执行时，它在 Desktop 子系统中运行，而不是在本机 Windows 8 环境中运行。Real Metro 应用程序仅在 Windows 8 中运行。

# python - 最长公共序列组

> ID：11263068
> 
> 赞同：3
> 
> 时间：2012-06-29T13:52:20.457
> 
> 标签：python, algorithm, nlp, pattern-matching

给定以下文本行

```
TOKYO-BLING.1 H02-AVAILABLE
TOKYO-BLING.1 H02-MIDDLING
TOKYO-BLING.1 H02-TOP
TOKYO-BLING.2 H04-USED
TOKYO-BLING.2 H04-AVAILABLE
TOKYO-BLING.2 H04-CANCELLED
WAY-VERING.1 H03-TOP
WAY-VERING.2 H03-USED
WAY-VERING.2 H03-AVAILABLE
WAY-VERING.1 H03-CANCELLED 
```

我想做一些解析来生成一些合理的分组。上面的列表可以分组如下

```
TOKYO-BLING.1 H02-AVAILABLE
TOKYO-BLING.1 H02-MIDDLING
TOKYO-BLING.1 H02-TOP

TOKYO-BLING.2 H04-USED
TOKYO-BLING.2 H04-AVAILABLE
TOKYO-BLING.2 H04-CANCELLED

WAY-VERING.2 H03-USED
WAY-VERING.2 H03-AVAILABLE

WAY-VERING.1 H03-TOP
WAY-VERING.1 H03-CANCELLED 
```

任何人都可以建议一种算法（或某种方法），它可以扫描给定数量的文本并计算出可以如上所述对文本进行分组。显然每个组都可以更进一步。我想我正在寻找一个很好的解决方案来查看短语列表并找出如何最好地按一些常见的字符串序列对它们进行分组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:37:22.430

这是一种方法：

1.  对您的条目进行排序
2.  确定每个条目之间公共前缀的长度
3.  通过在公共前缀比上一个条目短的点处分隔列表来对条目进行分组

示例实现：

```
def common_count(t0, t1):
  "returns the length of the longest common prefix"
  for i, pair in enumerate(zip(t0, t1)):
    if pair[0] != pair[1]:
      return i
  return i

def group_by_longest_prefix(iterable):
  "given a sorted list of strings, group by longest common prefix"
  longest = 0
  out = []

  for t in iterable:
    if out: # if there are previous entries 

      # determine length of prefix in common with previous line
      common = common_count(t, out[-1])

      # if the current entry has a shorted prefix, output previous 
      # entries as a group then start a new group
      if common < longest:
        yield out
        longest = 0
        out = []
      # otherwise, just update the target prefix length
      else:
        longest = common

    # add the current entry to the group
    out.append(t)

  # return remaining entries as the last group
  if out:
    yield out 
```

示例用法：

```
text = """
TOKYO-BLING.1 H02-AVAILABLE
TOKYO-BLING.1 H02-MIDDLING
TOKYO-BLING.1 H02-TOP
TOKYO-BLING.2 H04-USED
TOKYO-BLING.2 H04-AVAILABLE
TOKYO-BLING.2 H04-CANCELLED
WAY-VERING.1 H03-TOP
WAY-VERING.2 H03-USED
WAY-VERING.2 H03-AVAILABLE
WAY-VERING.1 H03-CANCELLED
"""

T = sorted(t.strip() for t in text.split("\n") if t)

for L in group_by_longest_prefix(T):
  print L 
```

这会产生：

```
['TOKYO-BLING.1 H02-AVAILABLE', 'TOKYO-BLING.1 H02-MIDDLING', 'TOKYO-BLING.1 H02-TOP']
['TOKYO-BLING.2 H04-AVAILABLE', 'TOKYO-BLING.2 H04-CANCELLED', 'TOKYO-BLING.2 H04-USED']
['WAY-VERING.1 H03-CANCELLED', 'WAY-VERING.1 H03-TOP']
['WAY-VERING.2 H03-AVAILABLE', 'WAY-VERING.2 H03-USED'] 
```

在此处查看实际操作：http: [//ideone.com/1Da0S](http://ideone.com/1Da0S)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:00:21.163

您可以用空格分割每个字符串，然后制作一个`dict`.

我是这样做的：

```
f = open( 'hotels.txt', 'r' )   # read the data
f = f.readlines()               # convert to a list of strings (with newlines)
f = [ i.strip() for i in f ]    # take off the newlines
h = [ i.split(' ') for i in f ] # split using whitespace
                                # now h is a list of lists of strings

keys = [ i[0] for i in h ]      # keys = ['TOKYO-BLING.1','TOKYO-BLING.1',...]
keys = list( set( keys ) )      # take out redundant elements

d = dict()                      # start a dict
for i in keys:                  # initialize dict with empty lists
    d[i] = list()               # (one for each key)

for i in h:                     # for each list in h, append a suffix
    d[i[0]].append(i[1])        # to the appropriate prefix (or key) 
```

这会产生：

```
{'TOKYO-BLING.1': ['H02-AVAILABLE', 'H02-MIDDLING', 'H02-TOP'],\
 'TOKYO-BLING.2': ['H04-USED', 'H04-AVAILABLE', 'H04-CANCELLED'],\
 'WAY-VERING.1': ['H03-TOP', 'H03-CANCELLED'],\
 'WAY-VERING.2': ['H03-USED', 'H03-AVAILABLE']} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T23:43:26.847

这是我的，开始时间较短：

```
import os

def prefix_groups(data):
    """Return a dictionary of {prefix:[items]}."""
    lines = data[:]
    groups = dict()
    while lines:
        longest = None
        first = lines.pop()
        for line in lines:
            prefix = os.path.commonprefix([first, line])
            if not longest:
                longest = prefix
            elif len(prefix) > len(longest):
                longest = prefix
        if longest:
            group = [first]
            rest = [item for item in lines if longest in item]
            [lines.remove(item) for item in rest]
            group.extend(rest)
            groups[longest] = group
        else:
            # Singletons raise an exception
            raise IndexError("No prefix match for {}!".format(first))
    return groups

if __name__ == "__main__":
    from pprint import pprint
    data = """
    TOKYO-BLING.1 H02-AVAILABLE
    TOKYO-BLING.1 H02-MIDDLING
    TOKYO-BLING.1 H02-TOP
    TOKYO-BLING.2 H04-USED
    TOKYO-BLING.2 H04-AVAILABLE
    TOKYO-BLING.2 H04-CANCELLED
    WAY-VERING.1 H03-TOP
    WAY-VERING.2 H03-USED
    WAY-VERING.2 H03-AVAILABLE
    WAY-VERING.1 H03-CANCELLED
    """
    data = [line.strip() for line in data.split('\n') if line.strip()]
    groups = prefix_groups(data)
    pprint(groups) 
```

输出：

```
{'TOKYO-BLING.1 H02-': ['TOKYO-BLING.1 H02-AVAILABLE',
                        'TOKYO-BLING.1 H02-MIDDLING',
                        'TOKYO-BLING.1 H02-TOP'],
 'TOKYO-BLING.2 H04-': ['TOKYO-BLING.2 H04-USED',
                        'TOKYO-BLING.2 H04-AVAILABLE',
                        'TOKYO-BLING.2 H04-CANCELLED'],
 'WAY-VERING.1 H03-': ['WAY-VERING.1 H03-TOP', 'WAY-VERING.1 H03-CANCELLED'],
 'WAY-VERING.2 H03-': ['WAY-VERING.2 H03-USED', 'WAY-VERING.2 H03-AVAILABLE']} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T01:45:44.440

通用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)或[后缀数组可以工作](http://en.wikipedia.org/wiki/Suffix_array)

# c# - 无法连接到mysql数据库C#

> ID：11263072
> 
> 赞同：1
> 
> 时间：2012-06-29T13:52:30.390
> 
> 标签：c#, mysql, serial-port

我正在尝试使用 C# 连接到我的数据库并查询一些数据。

但是尝试连接时出现此错误：

```
{"Fatal error encountered during command execution."}
{"Parameter '?param1' must be defined."} 
```

代码：

```
checkmsisdn.CommandText = "SELECT name FROM acl where msisdn = ?param1 and passwd = ?param2 and items LIKE (\"%?param3%\")";  //fourth
//try
//{
    sqlConn.Open();
    Reader = checkmsisdn.ExecuteReader();
    checkmsisdn.Parameters.Add(new MySqlParameter("param1", msisdn));
    checkmsisdn.Parameters.Add(new MySqlParameter("param2", passwd));
    checkmsisdn.Parameters.Add(new MySqlParameter("param3", itemno));
//}
//catch 
//{ 
//    Console.WriteLine("Error Connecting to Database\n"); 
//}

while (Reader.Read())
{
    name = (Reader.GetValue(0).ToString());
} 
```

查询将只返回一行，即名称。我是否为此查询正确使用了参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:54:36.643

您`ExecuteReader()`在添加参数之前调用。

# handlebars.js - 带有斜杠的车把模板中的部分会导致错误

> ID：11263075
> 
> 赞同：2
> 
> 时间：2012-06-29T13:52:48.653
> 
> 标签：handlebars.js

我正在使用车把的运行时构建并尝试使用已注册的部分。我愿意：

```
Handlebars.registerPartial("path/partialname", Handlebars.templates["path/partialname"]) 
```

如果我在部分名称中使用斜杠，如下所示：

```
{{> path/partialname}} 
```

我得到错误

```
The partial path.partialname could not be found [...]/lib/handlebars/handlebars.runtime 
```

“/”似乎被替换为“。”

如何在不修改 Handlebars.registerPartial 调用的情况下在部分中使用“/”？多谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T02:02:04.750

我整理的解决方案：

```
// automaticly register all templates as partials, so we dont have to do it manually
// https://github.com/wycats/handlebars.js/issues/190
// also convert slashes to dots in the template name because this is how
// handlebars resolves partial names.
 _.each(Handlebars.templates, function(val, key){
    var key = key.replace(/\//g, ".")
    Handlebars.partials[key] = val
}) 
```

# php - 发布禁用的选择字段 PHP

> ID：11263076
> 
> 赞同：2
> 
> 时间：2012-06-29T13:52:49.253
> 
> 标签：php, html, post, html-select

我找到了这个问题的答案[https://stackoverflow.com/a/7244888/1473523](https://stackoverflow.com/a/7244888/1473523)，但是在我的情况下我无法放置隐藏字段，所以没有办法在 PHP 中发布禁用的选择字段吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T13:55:52.800

不，这就是禁用该字段的作用：防止将值回发到服务器。如果您禁用该字段，您应该*知道*它的值，因为它无法更改。您*不需要*回发该值。

如果该值基于其他输入而发生变化，则应在服务器端捕获该输入并使用它来计算*将*回发的值，这与计算要选择客户端的值的方式相同。依赖客户端计算的值是准确的，这是一个严重的安全漏洞。

您的选择是在表单发布之前以某种方式启用该字段，或者添加一个隐藏字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:56:25.033

尝试在提交表单之前删除使用 javascript 禁用的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:56:26.203

根据您发布的问题，这是创建禁用字段的方式：

`<select class="txtbx1" name="country_disabled" disabled="disabled">`

您也可以将其隐藏：

```
<select class="txtbx1" name="country_disabled" type="hidden"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:57:27.403

不要依赖客户来做这样的事情。他们可以禁用 JS 或使用浏览器中的开发人员工具或 Fiddler 之类的工具来制作请求。

如果有您期望的值但不允许用户更改，请将其保留在服务器端。例如，使用会话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T13:57:41.620

没有**办法**发布禁用的字段，如果是这样，那将是无稽之谈。

因此，要么在未提交值时在服务器端定义默认值，要么使用`<input type="hidden" name="same_as_select" value="default" />`提供默认值，然后，如果您的表单已启用，它将始终覆盖默认值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-03T21:53:38.680

不，甚至没有办法，但是您可以测试该字段是否为空以防止未定义的索引通知：

```
if(empty($_POST['select_name'])){ //or !isset()
  $disabled_select = 0; //or its default value
} else {
  $disabled_select = $_POST['select_name'];
} 
```

我更喜欢使用单行：

```
$disabled_select = empty($_POST['select_name']) ? 0 : $_POST['select_name']; 
```

# vb.net - 如何将文件夹添加到不在根文件夹中的网站？

> ID：11263091
> 
> 赞同：0
> 
> 时间：2012-06-29T13:53:46.147
> 
> 标签：vb.net, visual-studio-2010, path, directory

是否可以在 VS 2010 项目中添加对位于我项目根文件夹之外的文件夹的引用？

例如，我想要一个文件夹，里面有很多图片和其他静态内容，多个项目共有，我不想每次都复制这个文件夹。我怎样才能引用这个文件夹，结果它将被视为我项目根目录的子文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:16:38.700

您可以只在项目文件夹下创建文件夹，但不要将它或任何图片文件添加到项目中。在 Web 服务器上，将该文件夹添加为虚拟文件夹。

# internet-explorer-9 - IE 9 将目标另存为将文件扩展名从 ASF 更改为 ASX

> ID：11263095
> 
> 赞同：1
> 
> 时间：2012-06-29T13:54:11.577
> 
> 标签：internet-explorer-9, file-extension

我在 .NET 4.0 网站上有一个简单的 ASPX 网页，该网页具有嵌入式 Windows Media 播放器对象和以多种格式（mp4、mp3、高质量 asf、低质量 asf）下载该视频的链接。

在 32 位和 64 位的 Internet Explorer 9 (9.0.8112.16421) 中，如果我右击任一 ASF 链接并单击“目标另存为”，则会打开一个 Windows“另存为”对话框（如预期的那样），文件名正确但带有ASX 扩展而不是 ASF。这发生在多台机器上。

在 Chrome、Firefox、Safari 和 Opera 中，从相同链接保存会显示具有正确 ASF 扩展名的文件。我检查了 IIS，它具有 ASF 的正确 MIME 类型。我还检查了我的计算机，它的 ASF 文件扩展名已注册并指向 Windows Media Player。

有什么想法可以让 IE 9 将其保存为 ASF？

# css - twitter boostrap（响应式）：当宽度在 320px 和 797px 之间时，.span3 采用 .span6 全宽行为

> ID：11263096
> 
> 赞同：1
> 
> 时间：2012-06-29T13:54:12.437
> 
> 标签：css, twitter-bootstrap, responsive-design, media-queries, html

有了 twitter bootstrap.css 和 bootstrap-responsive.css，`.span*`就相当于一个`.span12`under `768px`。

当嵌入文本时，这种行为非常好，但对于图片，使用和`2x2`之间的布局是有意义的。`4x1``1x4`

如何从 to 获得此`2x2`布局？`767px``320px`

**768 像素宽 (4x1)** ![4x .span3，宽度为 768px](../Images/04ec19eef97fba40466ab79e0533d289.png)

**767 像素宽 (1x4)** ![4x .span3，宽度为 767px](../Images/25655434d767f845ae0fb9f4d3f7518d.png)

**HTML：**

```
<div class="row-fluid">
    <ul class="thumbnails">
        <li class="span3">
            <div class="thumbnail" href="#">
                <img alt="" src="http://placehold.it/200x150">
                <p>1</p>
            </div>
        </li>
        <li class="span3">
            <div class="thumbnail" href="#">
                <img alt="" src="http://placehold.it/200x150">
                <p>2</p>
            </div>
        </li>
        <li class="span3">
            <div class="thumbnail" href="#">
                <img alt="" src="http://placehold.it/200x150">
                <p>3</p>
            </div>
        </li>
        <li class="span3">
            <div class="thumbnail" href="#">
                <img alt="" src="http://placehold.it/200x150">
                <p>4</p>
            </div>
        </li>
    </ul>
</div> 
```

[http://jsfiddle.net/baptme/jWcdS/](http://jsfiddle.net/baptme/jWcdS/)

* * *

**注意：这个问题的灵感来自对此**[答案](https://stackoverflow.com/a/11223746/1416911)的评论中提出的请求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:54:13.233

**CSS：**

```
@media (min-width: 320px) and (max-width: 767px) {
    .row-fluid .thumbnails .span3 {
        width:48.6188%;
        margin-left: 2.76243%;        
        float:left;
    }
    .row-fluid .thumbnails .span3:nth-child(2n+1) {
        margin-left: 0;
    }
} 
```

[http://jsfiddle.net/baptme/jWcdS/1/](http://jsfiddle.net/baptme/jWcdS/1/)

**500 像素宽 (2x2)**

![4x .span3，宽度为 500px](../Images/dc7c2d5e0e45eaabcefd6fb5e749a0d4.png)

**319 像素宽 (1x4)**

![4x .span3，宽度为 319px](../Images/c727f9e851dea9d2b75e34e8157ddd08.png)

**说明：**

[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)可用于覆盖 320px 和 767px 之间的 twitter bootstrap，方法是使用`@media (min-width: 320px) and (max-width: 767px)`

`.row-fluid .thumbnails .span3`已被使用过 a`.span3{ ... }`或`.row-fluid .span3{ ... }`出于以下原因：

*   3个类有足够的[优先级](http://www.w3.org/wiki/CSS/Training/Priority_level_of_selector)`.row-fluid .span3`从bootstrap.css覆盖
*   在和`.thumbnails`之间添加不会影响用于布局的其他。`.row-fluid``.span3``.row-fluid .span3`

`width:48.6188%;`和`margin-left: 2.76243%;`对应于给a的值`.row-fluid .span6`

`float:left;`覆盖_`float:none`

伪类`nth-child(2n+1)`已用于删除页面左侧（1 和 3）末端`margin-left: 0;`的左边距。`.row-fluid .thumbnails .span3`

# directshow - 将 Direct2d 渲染到现有内存中

> ID：11263099
> 
> 赞同：2
> 
> 时间：2012-06-29T13:54:24.113
> 
> 标签：directshow, direct2d, wic

我想在 DirectShow 就地视频转换过滤器中使用 Direct2D 在视频顶部呈现文本和图像。为了避免额外的副本，我实现了我自己的 IWICBitmap 子类包装媒体样本缓冲区并使用 CreateWicBitmapRenderTarget 使 Direct2D 写入该内存。我的问题是，我是否错过了将现有内存包装成位图的内置 WIC 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:32:17.830

IWICImagingFactory 有一个方法可以创建一个带有指向图像数据的指针的 IWICBitmap - [http://msdn.microsoft.com/en-us/library/ee690291%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ee690291%28v=vs.85%29.aspx) - 但听起来只是复制数据从内存到一个新的缓冲区。创建 IWICBitmap 的唯一其他方法是通过看起来无用的其他 IWICImagingFactory 方法，因此很可能 WIC 中没有任何东西可以满足您的需求。

# wix - 使用 WIX 3.6 注册 ActiveX-Exe

> ID：11263104
> 
> 赞同：0
> 
> 时间：2012-06-29T13:54:38.393
> 
> 标签：wix, wix3.6

对于 ActiveX-DLL，Heat.exe 工具工作得很好，但对于可执行的 ActiveX 组件（想要通过“foo.exe /RegServer”自行注册的那个），它处理 exe 文件就像处理普通文件一样，没有用于注册的条目（clsid，...）。

有没有办法在不使用自定义操作的情况下处理这个问题？

# .net - 修改所有带有前缀的资源字符串以轻松发现 i18n 或 RTL 问题

> ID：11263106
> 
> 赞同：1
> 
> 时间：2012-06-29T13:54:41.017
> 
> 标签：.net, localization, resources, internationalization, pseudolocalization

我想轻松（即：不手动触摸每个字符串）为我的所有资源字符串添加前缀，例如“XXXSomeString”，这样我就可以发现两个非本地化字符串（它们没有前缀）或不RTL 兼容形式（前缀将在左侧）。

有没有一种工具可以做到这一点，或者可能有一种方法可以修改资源代码文件以在返回每个字符串值时添加前缀？或者，如果您对此问题有更好的解决方案，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:42:57.980

有一种称为[伪定位](http://en.wikipedia.org/wiki/Pseudolocalization)的技术可以做到这一点。有关可以为 .NET 找到的现有工具，请参阅另一个问题：[ASP.NET MVC 伪本地化](https://stackoverflow.com/questions/7673529/asp-net-mvc-pseudo-localization)

**编辑**

为了补充关于 RTL（从右到左）的观点，伪本地化也可以做到这一点，并且在 Windows 中有一个特定的“镜像”伪语言环境（命名为`qps-plocm`，其中常规伪是`qps-ploc`），按照[这个MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319106%28v=vs.85%29.aspx)。虽然我不知道现有的公开可用工具来生成镜像伪本地化资源，但也许我还不够努力。

# c# - 如何在msword中获取当前页码

> ID：11263107
> 
> 赞同：-2
> 
> 时间：2012-06-29T13:54:51.233
> 
> 标签：c#, visual-c++, c#-4.0, vba

使用 MSWord 自动化，我需要从一行文本的行号中获取页码。我愿意接受 VC++/C#/VB 中的答案。

我想创建一个文档的索引，我需要光标当前所在行的页码

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:08:50.460

```
Selection.Information(wdActiveEndPageNumber) 
```

# c++ - 在聊天应用程序中如何高效地在公共房间发送消息

> ID：11263109
> 
> 赞同：0
> 
> 时间：2012-06-29T13:54:57.733
> 
> 标签：c++, algorithm, architecture, client-server

我正在创建一个基于服务器/客户端架构的聊天应用程序。服务器和客户端之间的通信是基于 TCP 的套接字。在这个应用程序中，我正在创建不同的公共房间。任意数量的用户都可以加入任何公共房间。

现在，当公共房间中的用户说“XYZ”为房间发送消息时，我需要将该消息传递给“XYZ”公共房间中的所有人。

问题从这里开始。假设公共房间“XYZ”中有 1000 个用户，每当用户在这个房间发送消息时，我需要在 for 循环中的相应套接字描述符上一一发送此消息以让 999 人休息。

这是我知道的唯一方法，我认为这不是一个好方法，因为如果用户增加，它会严重影响系统的性能。

请通过建议我实现相同目标的有效方法来帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:59:08.767

根据我的知识，这是使用流套接字（即 TCP，我建议将其用于（可靠）聊天）的唯一方法。

多播和其他仅适用于 UDP 等。

这也是（其中包括冗余等）大型 IRC 网络具有多个服务器的原因。接收用户消息的服务器只需要分发给他自己的所有用户和网络中的所有服务器，然后再分发给他们的用户。这减少了单个服务器的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:01:36.203

使用 pub 订阅。客户端订阅聊天室，您只需将消息发布到单个实体 - 聊天室。

# c# - 基于 C# 的代理开发框架

> ID：11263113
> 
> 赞同：3
> 
> 时间：2012-06-29T13:55:17.073
> 
> 标签：c#, frameworks, agent

不久前，我参加了有关代理技术的课程，我们不得不使用 JADE 来学习这个概念。现在我想知道是否有任何基于 C# 语言的好且易于使用的框架。如果有人知道一个好的框架，请分享链接。

提前谢谢^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:27:11.760

[这](http://oot.zcu.cz/NET_2003/Papers/Grosso.pdf)是热那亚大学关于 C# 代理平台的论文，可以作为寻找框架的起点。你需要锻炼你的谷歌技能....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-11T02:40:48.177

我发现了与您正在寻找的类似的东西。

检查以下网址。

boris.net 可能会完成这项工作。

[http://www.alibojar.com/boris-net](http://www.alibojar.com/boris-net)

[https://www.scm.tees.ac.uk/isg/website/index.php?page=downloads_boris](https://www.scm.tees.ac.uk/isg/website/index.php?page=downloads_boris)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:42:49.417

你可以看看：

*   [http://www.alibojar.com/boris-net](http://www.alibojar.com/boris-net)
*   [http://oellabs.com/aplodee3.aspx](http://oellabs.com/aplodee3.aspx)

还有这篇文章可以很方便：

[http://www.jot.fm/issues/issue_2004_10/article1/](http://www.jot.fm/issues/issue_2004_10/article1/)

# yii - 任何人都知道将模型关系和表模式（包括键和注释）显示为流程图的 Yii 扩展或方法？

> ID：11263114
> 
> 赞同：3
> 
> 时间：2012-06-29T13:55:18.853
> 
> 标签：yii, model, schema, visualization, yii-relations

我似乎找不到任何可以很好地做到这一点的扩展/模块/等。

您可以按如下方式访问列元数据，但我想要一种在模型索引中将其显示为流程图或超图的好方法。

```
$m=new MyModel; 
Yii::log(CVarDumper::dumpAsString($m->tableSchema->columns),'warning'); 
```

// 回显 $m->toJSON(); // 使用 json 行为，将其提供给 js 流程图以显示架构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:39:33.447

phpmyadmin 中有一个工具叫做设计器。它是用 PHP 编写的，并且真的从数据库中绘制了一个很好的数据模型。你应该参考那个代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T06:32:16.770

不完全是您想要的，但是您看过[MySQL Workbench](http://dev.mysql.com/downloads/tools/workbench/)了吗？使用它的经验有些[混杂](http://www.yiiframework.com/forum/index.php/topic/13004-what-is-your-experience-with-mysql-workbench/)，但我发现保持对数据库的概述非常好。

# javascript - 背景位置底部 parseInt

> ID：11263115
> 
> 赞同：0
> 
> 时间：2012-06-29T13:55:19.207
> 
> 标签：javascript, jquery, css, scroll, position

我有一个脚本，用于在滚动时为背景位置设置动画。

图像的背景位置：中心底部。

滚动时，脚本将从中心顶部位置开始。

知道如何从底部背景位置开始 parseInt 吗？我已经看遍了，但找不到该怎么做。

```
<script> 
$(window).scroll(function() { 
    var x = $(window).scrollTop(); 
        $('.container_image).css('background-position', 'center ' + parseInt(-x / -3) + 'px');
 }); 
</script>

div .container_image{
background-image: url("../images/image.jpg");
background-position: 50% bottom;
background-color:#fff;
min-height:325px;
height:325px;
-moz-transition: height 0.3s ease 0s;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:28:10.823

事先计算该值将有助于解决您的问题。

```
var newPos = (-x/-3);
$('.container_image').css('background-position', 'center ' + newPos + 'px'); 
```

或正如托马斯建议的那样

```
$('.container_image').css('background-position', 'center ' + (-x/-3) + 'px'); 
```

也可以。

# javascript - CRC32 每次返回新整数

> ID：11263117
> 
> 赞同：0
> 
> 时间：2012-06-29T13:55:35.747
> 
> 标签：javascript, hash, passwords, crc32

每次我运行该`password`函数时，我都会得到一个新值。为什么？

```
/**
*
*  Javascript crc32
*  http://www.webtoolkit.info/
*
**/

function crc32 (str) {

    function Utf8Encode(string) {
        string = string.replace(/\r\n/g,"\n");
        var utftext = "";

        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }

        }

        return utftext;
    }

    str = Utf8Encode(str);

    var table = "00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";

    if (typeof(crc) == "undefined") { crc = 0; }
    var x = 0;
    var y = 0;

    crc = crc ^ (-1);
    for( var i = 0, iTop = str.length; i < iTop; i++ ) {
        y = ( crc ^ str.charCodeAt( i ) ) & 0xFF;
        x = "0x" + table.substr( y * 9, 8 );
        crc = ( crc >>> 8 ) ^ x;
    }

    return crc ^ (-1);

}

function password(str) {
    var code = Math.abs(crc32(str)).toString(16);
    var first_char = String.fromCharCode(97 + parseInt(code.substr(0,1),16)).toUpperCase();   
    return first_char + code.substr(1);   
}

document.write(password('xx')+'<p>');

document.write(password('xx')+'<p>');

document.write(password('xx')+'<p>'); 
```

预期输出：

```
H1ee7f1
H1ee7f1
H1ee7f1 
```

实际输出：

```
H1ee7f1
Cdcc7689
Ed220c77 
```

Jsbin在这里：http: [//jsbin.com/udoyaj/4/edit](http://jsbin.com/udoyaj/4/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:00:02.600

代码确实

```
if (typeof(crc) == "undefined") { crc = 0; } 
```

即，在调用之间不会重置 crc。这使您可以计算以较短的块形式提供给 crc 函数的数据块的 CRC。

对于您的用例（只需计算以 1 块形式传递给函数的一段数据的 CRC），您应该在每次调用函数时初始化 crc，例如将上面的行替换为

```
var crc = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T14:01:20.367

你可能想说

```
var crc = 0; 
```

代替

```
if (typeof(crc) == "undefined") { crc = 0; } 
```

# c# - 如何增加 Windows 服务应用程序中的 Web 服务超时？

> ID：11263127
> 
> 赞同：1
> 
> 时间：2012-06-29T13:56:09.720
> 
> 标签：c#, wcf, windows-services, timeout

我正在开发一个使用 asmx Web 服务在 IIS7 中导入数据的 Web 应用程序。我们有一个 Windows 服务选择一个文件来导入并通过 Web 服务发送它。在 1 分钟后的大型导入过程中出现以下错误：

> 请求通道在 00:00:59.9843750 之后等待回复时超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。

我看过很多帖子，建议不要让 Web 服务调用运行那么久。我原则上同意，但这是一个低流量的内部网站。除非另有证明，否则我相信重新架构系统其他部分的工作量将比更新超时时间更长。

到目前为止，我们已经尝试更新 web.config 中的[basicHttpBinding](http://msdn.microsoft.com/en-us/library/ms731361.aspx)属性，特别是 openTimeout、receiveTimeout、sendTimeout 和 closeTimeout 属性。行为没有改变。

我们还尝试在构建对象后调用 Web 服务的代码中设置这些属性。仍然没有运气。

我查看了 IIS 设置，没有看到当前设置为 60 秒的任何超时值。我们还尝试将 web.config 中的 executionTimeout 提高到无效。

我缺少什么配置值？还有其他方法可以修改超时吗？

**更新：**

根据要求，这里是配置：

应用程序配置

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="ImportServiceSoap" closeTimeout="00:02:00" openTimeout="00:02:00"
                    receiveTimeout="00:10:00" sendTimeout="00:10:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="1265536" maxBufferPoolSize="12524288" maxReceivedMessageSize="1265536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://mysite.com/Importservice.asmx"
                binding="basicHttpBinding" bindingConfiguration="ImportServiceSoap"
                contract="ImportService.ImportServiceSoap" name="ImportServiceSoap" />
        </client>
    </system.serviceModel>
</configuration> 
```

Web.config（删节，删除连接字符串）：

```
<configuration>
  <appSettings>
    <system.web>
      <roleManager enabled="false" cacheRolesInCookie="false" defaultProvider="AspNetSqlRoleProvider" />
      <siteMap defaultProvider="MenuElementsProvider">
      </siteMap>
      <compilation debug="false" targetFramework="4.0">
      </compilation>
      <customErrors mode="RemoteOnly" defaultRedirect="Shared/Internal_Server_Error.html">
        <error statusCode="404" redirect="Shared/Internal_Server_Error.html" />
        <error statusCode="500" redirect="Shared/Internal_Server_Error.html" />
      </customErrors>
      <authentication mode="Windows" />
      <identity impersonate="true" />
      <authorization>
        <allow users="*" />
      </authorization>
      <trace enabled="false" requestLimit="10" pageOutput="false" traceMode="SortByTime" localOnly="true" />
      <sessionState mode="InProc" stateConnectionString="tcpip=127.1.0.1" cookieless="false" timeout="30" />
      <globalization fileEncoding="utf-8" requestEncoding="utf-8" responseEncoding="utf-8" culture="en-US" uiCulture="en-US" />
      <httpRuntime maxRequestLength="102400" requestValidationMode="2.0" executionTimeout="14400" />
    </system.web>
    <location path="DefaultWsdlHelpGenerator.aspx">
      <system.web>
        <pages styleSheetTheme="" />
        <httpRuntime maxRequestLength="1048576" executionTimeout="3600" />
      </system.web>
    </location>
    <system.webServer>
      <validation validateIntegratedModeConfiguration="false" />
    </system.webServer>
  </appSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:31:01.853

您是在代码中还是仅在客户端的 app.config 中更新绑定超时？我已经看到更改 app.config 设置会从客户端 Web 服务的原始创建中被忽略 - 因此即使 app.config 已更改，旧设置也会保留。多发性硬化症

# real-time - 可以将原始半结构化数据作为输入的实时计算解决方案有哪些？

> ID：11263130
> 
> 赞同：-4
> 
> 时间：2012-06-29T13:56:22.090
> 
> 标签：real-time, bigdata, low-latency, schemaless

是否有任何技术可以获取原始的半结构化、无模式大数据输入（例如来自 HDFS 或 S3），对其执行近实时计算，并生成可以查询或插入 BI 工具的输出？

如果没有，是否有人至少在努力在未来一两年发布？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:34:40.773

![在此处输入图像描述](../Images/3637d806ba98e2026afb3fa43cc43eb1.png)

有一些解决方案具有大的半结构化输入和查询输出，但它们通常是

1.  独特的

2.  昂贵的

3.  足够秘密

如果您能够避免使用神经网络或专家系统进行直接计算，那么您将足够接近低延迟系统。你所需要的只是一个出色的数学家团队来为你的问题建立模型，一个程序员团队用代码实现它，以及一些现金来购买服务器并为它们获得所需的输入/输出通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:19:03.533

你看过[Splunk](http://www.splunk.com)吗？我们使用它来分析 Windows 事件日志，Splunk 在索引这些信息方面做得非常出色，以便快速查询出现在数据中的任何字符串。

# mysql - 两个相似的 MySQL 查询给出不同的结果

> ID：11263134
> 
> 赞同：1
> 
> 时间：2012-06-29T13:56:26.253
> 
> 标签：mysql, database

我有一个保存设备读数的数据库。我正在尝试编写一个可以从设备中选择最新读数的查询。我有两个看似相同的查询，我希望给出相同的结果；但是他们没有。查询如下：

第一个查询：

```
select max(datetime), reading
from READINGS
where device_id = '1234567890' 
```

第二个查询：

```
select datetime, reading
from READINGS
where device_id = '1234567890' and datetime = (select max(datetime)
                                               from READINGS
                                               where device_id = '1234567890') 
```

他们都为阅读属性给出了不同的结果。第二个是给出正确结果的那个，但为什么第一个给出不同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:02:46.300

这是 MySQL 的工作行为。当您使用分组时，您选择的列必须要么出现在分组依据中，要么是聚合函数，例如 min()、max()。在大多数其他数据库风格中，不允许混合聚合和普通列。

第一个查询将只返回每个组中的第一个评级（首先是它出现在文件系统上的位置），这很可能是错误的。

第二个查询将评级与导致正确结果的最大时间戳相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:00:08.157

这是因为您没有使用`GROUP BY reading`应在两个查询中使用的子句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:09:00.660

这在 MySQL 上是正常的。请参阅有关此的[文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)：

```
If you use a group function in a statement containing no GROUP BY clause, it is equivalent to grouping on all rows. 
```

另外，请阅读[http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:03:44.007

您可以使用[Explain](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)和[Explan 扩展](http://dev.mysql.com/doc/refman/5.0/en/explain-extended.html)命令来了解有关您的查询的更多信息。

# service - 服务不是从 AsyncTask 开始的

> ID：11263138
> 
> 赞同：1
> 
> 时间：2012-06-29T13:56:29.673
> 
> 标签：service, android-asynctask

我试图从 AsyncTask 启动我的服务，但看不到它的启动。

希望你能看到我的错误。

这是我的代码：

```
protected String doInBackground(String... params) {
    //starts service number activite
    Intent i = new Intent(context, DownloadService.class);
    i.putExtra("url", "www.google.com");
    i.putExtra("receiver", new DownloadReceiver(new Handler()));
    context.startService(i); 
```

这是我的服务

```
public class DownloadService extends Service{
    protected void onHandleIntent(Intent intent) {  
        String urlLink = intent.getStringExtra("url");
        ResultReceiver receiver = intent.getParcelableExtra("receiver");
        // some body
        Bundle data = new Bundle();
        //publishing progress
        data.putString("key",getActivityUrl() );
        receiver.send(1,data);
    }

    ResultReceiver resultReceiver;

    public int onStart(Intent intent, int flags, int startId) {
        onHandleIntent( intent)
        return START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

     public String getActivityUrl() {.....} 
```

和我的清单文件：

```
<service android:name="connection.DownloadService">
    <intent-filter>
    <action android:name="connection.DownloadService">
    </action>        
</intent-filter> 
```

# postgresql - 带有postgis的dblink postgresql中的线串不起作用

> ID：11263143
> 
> 赞同：4
> 
> 时间：2012-06-29T13:56:44.083
> 
> 标签：postgresql, postgis, dblink

我正在尝试使用 postgis 函数进行 dblink，但线串给了我很多问题。

```
SELECT 
    DV3."XXX",
        s."QQQID",s."X",s."Y",a."PPP"
FROM 
    "QQQ" s INNER JOIN "AAA" a ON a."QQQID" = s."QQQID",
    dblink('dbname=ZZZ',
        'SELECT XXX,the_geom 
        FROM "geometry", "QQQ" s 
        WHERE box2d(geomfromtext(''LINESTRING('|| s."X" ||' '||s."Y" ||','|| s."X" || ' '||s."Y" || ')'',2309))
        && the_geom'
                           ) 
        DV3("XXX" INTEGER,"the_geom"  geometry)

WHERE 
    contains(DV3.the_geom,geomfromtext('POINT('|| s."X" ||' '|| s."Y" ||')',2309))--21
    AND "GGG" IS NOT NULL 
```

错误

> 第 9 行： ... WHERE box2d(geomfromtext(''LINESTRING('|| s."X" + 0....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:39:47.760

按照 Tanzeeb 所说，有两个单引号紧挨着的实例看起来应该是双引号而不是两个单引号。

在

```
 'SELECT XXX,the_geom 
    FROM "geometry", "QQQ" s 
    WHERE box2d(geomfromtext(''LINESTRING('|| s."X" ||' '||s."Y" ||','|| s."X" || ' '||s."Y" || ')'',2309))
    && the_geom' 
```

就在 LINESTRING 之前和 ,2309 之前。

# triggers - 尝试拥有独特的 OpportunityLineItem APEX-CODE

> ID：11263145
> 
> 赞同：2
> 
> 时间：2012-06-29T13:56:47.177
> 
> 标签：triggers, salesforce, apex-code

我目前正在开发 OpportunityLineItem 的触发器，Salesforce 上的每个产品都是我们的“基本”产品。

当销售人员将产品添加到机会时，他还需要输入 mpn（= 产品的唯一 ID），他们将致电我们的网站以获取实际价格，因为实际价格取决于产品上设置的每个选项。我的触发器正在调用一个类来发出请求，到目前为止它正在工作！但是，当我想添加相同的一对 productID 和 mpn 时，它将不起作用。

问题：

销售人员将添加一个产品 OpportunityLineItem ，但该产品已经在他的 Opportunity 的当前 OpportunityLineItem 中，因此无法正常工作。

首先，我的触发器不会得到价格，因为我的 SOQL 请求将返回多个结果。

这是我的触发器：

```
trigger GetRealPrice on OpportunityLineItem (after insert) {
    for(OpportunityLineItem op : Trigger.new){
        RequestTest.getThePrice(op.Id_UAD__c,op.MPN__c,op.OpportunityId);  
    }
} 
```

这里是被调用的类；

```
public class RequestTest {
    //Future annotation to mark the method as async.
    @Future(callout=true)
    public static void getThePrice(Decimal idUad, String mpnProduct,String opID){
        // Build the http request
        Http http = new Http();
        HttpRequest req = new HttpRequest();
        req.setEndpoint('http://www.site.com/mpn.getprice?id='+idUad+'&mpn='+mpnProduct);
        req.setMethod('GET'); 

         String result;
         HttpResponse res = http.send(req);
         System.debug(res.getBody());
         result = res.getBody();
          Decimal price = Decimal.valueof(result);

         System.debug(opID);
         OpportunityLineItem op = [SELECT UnitPrice FROM OpportunityLineItem 
                                  WHERE Id_UAD__c = :idUad
                                  AND OpportunityId = :opID 
                                  AND MPN__c = :mpnProduct] ;
        System.debug('you went through step1');

        op.UnitPrice = price;
        System.debug('This is the opportunity price'+op.UnitPrice);
        update op;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:09:51.443

由于您要遍历触发器中的每个订单项，因此请传递订单项 ID。然后更改您的方法来处理每个行项目的更新：

```
trigger GetRealPrice on OpportunityLineItem (after insert) {
  for(OpportunityLineItem op : Trigger.new){
    RequestTest.getThePrice(op.Id_UAD__c,op.MPN__c,op.Id);  
  }
}

...

public class RequestTest {
  //Future annotation to mark the method as async.
  @Future(callout=true)
  public static void getThePrice(Decimal idUad, String mpnProduct,String opLineID){
    ...
    Decimal price = Decimal.valueof(result);
    System.debug(opID);
    OpportunityLineItem op = [SELECT UnitPrice FROM OpportunityLineItem 
                              WHERE Id = :opLineID] ;

    op.UnitPrice = price;
    System.debug('This is the opportunity price'+op.UnitPrice);
    update op;
  }
} 
```

# qt - Qt3 / Vs2003 - 断点等，不起作用

> ID：11263148
> 
> 赞同：0
> 
> 时间：2012-06-29T13:56:58.390
> 
> 标签：qt, qt3

我继承了一个 Qt3/Vs2003 项目。我认为多年来一直受到严重破坏，例如添加了一个新的 DEBUG 宏，它正在记录到文件中......在 VS 中打开解决方案并检查构建配置，我发现没有调试配置（我已经通过复制发布配置添加？），但它并没有在断点处停止（虽然它在某一点，现在不再播放 - 注意：我似乎正在生成 PDB）。

那么这应该整合到什么程度呢？
断点、代码完成等应该工作还是我期待太多？

我见过的唯一集成是当我在 VS 中单击 ui 时使用 Qt 设计器打开 UI。

更多...它在 CVS 中，QT 是否必须用 LF 行结尾检查？，这是破坏我的 VDProj 吗？

编译器输出不应该放在发布（或调试）文件夹中，我的被转储到与解决方案相同的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:08:50.890

我添加了一个调试构建配置，然后添加了调试符号和工作目录的路径，再次尝试并成功了。所有项目选项似乎或多或少都未设置（因此 exe 的放置位置等）

# ruby - 使用 bundler 只更新一个 gem

> ID：11263150
> 
> 赞同：268
> 
> 时间：2012-06-29T13:57:02.713
> 
> 标签：ruby, rubygems, bundler

我使用 bundler 来管理我的 rails 应用程序中的依赖项，并且我在 git 存储库中托管了一个 gem，包括如下：

```
gem 'gem-name', :git => 'path/to/my/gem.git' 
```

为了更新这个 gem，我执行了，`bundle update`但它也更新了 Gemfile 中提到的所有 gem。那么只更新一个特定 gem 的命令是什么？

* * *

## 回答 #1

> 赞同：422
> 
> 时间：2014-04-24T12:11:39.507

[在这里](https://web.archive.org/web/20141009095250/http://ilikestuffblog.com/2012/07/01/you-should-update-one-gem-at-a-time-with-bundler-heres-how/)你可以找到一个很好的解释

*更新 gem 和依赖项：*

```
bundle update gem-name 
```

**或者**

*专门更新 gem：*

```
bundle update --source gem-name 
```

以及一些可能的副作用的好例子。

## 更新

正如@Tim 的回答所说，从 Bundler 1.14 开始，官方支持的方式是使用`bundle update --conservative gem-name`.

* * *

## 回答 #2

> 赞同：194
> 
> 时间：2013-03-06T11:35:05.027

执行此操作的方法是运行以下命令：

```
bundle update --source gem-name 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2017-04-21T19:06:13.503

看来，对于较新版本的捆绑程序（> = 1.14），它是：

```
bundle update --conservative gem-name 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-06-29T13:59:23.877

您只需要在命令行上指定 gem 名称：

```
bundle update gem-name 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-06-09T08:30:43.803

`bundle update gem-name [--major|--patch|--minor]`

这也适用于依赖项。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-13T20:12:56.803

我已经使用`bundle update --source`了很长时间，但是在某些情况下它不起作用。幸运的是，有一个名为的 gem[`bundler-patch`](https://github.com/livingsocial/bundler-patch)旨在解决这个缺点。

我还写了一篇简短的[博客文章](https://christoph.luppri.ch/articles/2016/05/14/how-to-conservatively-update-a-single-gem-with-bundler/)，介绍如何使用`bundler-patch`以及为什么`bundle update --source`不能始终如一地工作。另外，请务必查看chrismo[的帖子](https://github.com/chrismo/bundler-source-hack)，该帖子详细解释了该`--source`选项的作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-08T10:51:52.170

`bundler update --source gem-name`将更新 Gemfile.lock 中的修订哈希，您可以将其与该 git 分支的最后提交哈希（默认为 master）进行比较。

`GIT remote: git@github.com:organization/repo-name.git revision: c810f4a29547b60ca8106b7a6b9a9532c392c954`

可以在`github.com/organization/repo-name/commits/c810f4a2`（我使用速记 8 字符提交哈希作为 url）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-18T15:44:43.113

如果要将单个 gem 更新到特定版本：

1.  在 Gemfile 中更改 gem 的版本
2.  `bundle update`

```
> ruby -v
ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-darwin19]
> gem -v
3.0.3
> bundle -v
Bundler version 2.1.4 
```

# asp.net-mvc-2 - 是否可以多次重复一个占位符的内容？

> ID：11263151
> 
> 赞同：1
> 
> 时间：2012-06-29T13:57:04.437
> 
> 标签：asp.net-mvc-2, master-pages

是否可以`ContentPlaceHolder`在母版页的多个位置使用 a 的内容？

例如，我经常想做类似的事情：

```
<html>
 <head>
  <title><asp:ContentPlaceHolder ID="TitleContent" runat="server" /></title>
  <link rel="Stylesheet" href="../../Content/Corporate.css" />
 </head>
 <body>
  <div id="header">
   <h1>I'd like to reuse the TitleContent ContentPlaceHolder content here?</h1>
  </div>
  <div id="content">
   <asp:ContentPlaceHolder ID="MainContent" runat="server" />
  </div>
  <div id="footer">
   &copy; 2012 Acme corp.
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:08:35.007

答案就[在这里](https://stackoverflow.com/a/1514146/179482)，所以请奖励作者，但要将其调整为 MVC，您需要执行以下操作：

**首先：**定义自己的母版页类（Site.Master）：

```
<%@ Master Language="C#" Inherits="MyProject.Views.Shared.MyMasterPage" %> 
```

**二：**上课内容：

```
public class MyMasterPage : ViewMasterPage
{
    protected override void RenderChildren(HtmlTextWriter writer)
    {
        var mainPlaceHolder = FindControl("TitleContent");
        var doublePlaceHolder = FindControl("TitleContentDuplicated");

        var sb = new StringBuilder();

        using (var sw = new StringWriter(sb))
        using (var tw = new HtmlTextWriter(sw))
        {
            mainPlaceHolder.RenderControl(tw);
        }

        var lc = new LiteralControl(sb.ToString());
        doublePlaceHolder.Controls.Add(lc);

        base.RenderChildren(writer);
    }
} 
```

**第三**：然后你可以使用：

```
<title>
    <asp:ContentPlaceHolder ID="TitleContent" runat="server" />
    <asp:ContentPlaceHolder ID="TitleContentDuplicated" runat="server" />
</title> 
```

# silverlight - 从 Silverlight 4 登录到 ULS

> ID：11263155
> 
> 赞同：0
> 
> 时间：2012-06-29T13:57:35.330
> 
> 标签：silverlight, logging, sharepoint-2010

我正在尝试登录到 SharePoint 2010 ULS 日志，但没有取得多大成功。我添加了对`http://localhost/_vti_bin/Diagnostics.asmx`我的 Silverlight 项目的引用，我正在安装 sharepoint 的同一台机器上工作，然后我使用以下代码

```
private void button1_Click2(object sender, RoutedEventArgs e)
    {
        SharePointDiag.SharePointDiagnosticsSoapClient client = new SharePointDiag.SharePointDiagnosticsSoapClient();
        client.SendClientScriptErrorReportCompleted += new EventHandler<SharePointDiag.SendClientScriptErrorReportCompletedEventArgs>(sendComp);
        client.SendClientScriptErrorReportAsync("TEST", "TEST", 123, "TEST", "<client><browser name='Internet Explorer' version='9.0'></browser><language> en-us </language></client>"
            , "<stack><function depth='0' signature=' myFunction() '>function myFunction() { 'displaypage ();}</function></stack>", "TEST");
    } 
```

代码没有给出错误或结果，只是完成的事件参数为空。在 Fiddler 中，看起来调用工作正常，但是当我检查“C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\LOGS”中的日志时，我的消息不在其中。

任何想法或提示都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:40:28.757

原来，中央管理中的一项设置未正确设置。由于某种原因，它只会在最不重要的事件设置为信息而不是详细时记录。

# cocoa - 表视图问题中的 NSTrackingArea

> ID：11263156
> 
> 赞同：2
> 
> 时间：2012-06-29T13:57:37.373
> 
> 标签：cocoa, row, nstableview, nstrackingarea

我已经将我的表格视图设置为有点像 Twitter 应用程序，这意味着当您将鼠标悬停在每一行上时，图标将出现在右侧，而离开该行时它们将消失。我基于此对其进行了编码：

[当鼠标在滚动时离开 trackingArea 时，不会调用 mouseExited](https://stackoverflow.com/questions/8979639/mouseexited-isnt-called-when-mouse-leaves-trackingarea-while-scrolling)

非常奇怪的是，我在每一行（以及其他文本字段等）上都有一个复选框，当单击该复选框时，它会导致该行的图标跳到下一行。再次单击复选框将导致它们跳转到下一行。重复此操作，直到图标跳转到最后一个可见行，然后它们将跳转到第一个可见行并继续重复此行为。它只是偶尔发生。:-/ 我试图弄清楚这一点，但发生这种情况时甚至没有调用任何内容，这意味着没有调用跟踪区域或鼠标没有进入/退出任何内容。这是否有任何意义，也许考虑到我正在尝试重新创建 Twitter 是如何编码的？

谢谢，

rc

# xml - 在 SQL Server 2008 中创建索引视图

> ID：11263163
> 
> 赞同：0
> 
> 时间：2012-06-29T13:57:54.757
> 
> 标签：xml, sql-server-2008, indexing, views, cross-apply

```
CREATE TABLE Storage
(
    ID INT IDENTITY(1,1) PRIMARY KEY,
    data XML NOT NULL
)

GO

INSERT INTO Storage(data) 
VALUES('
<footballteams>   
    <team manager="Benitez">     
        <name>Liverpool</name>     
        <ground>Anfield</ground>   
    </team>   
    <team manager="Mourinho">     
        <name>Chelsea</name>     
        <ground>Stamford Bridge</ground>   
    </team>   
    <team manager="Wenger">     
    <name>Arsenal</name>     
        <ground>Highbury</ground>   
    </team> 
</footballteams>'); 
----------------------------------------
GO

CREATE VIEW FootballView WITH SCHEMABINDING AS 
(    
    SELECT            
        TeamName = Team.TeamNode.value('(name)[1]', 'varchar(100)'),              
        Manager = Team.TeamNode.value('(@manager)', 'varchar(100)'),              
        Ground = Team.TeamNode.value('(ground)[1]', 'varchar(100)')    
    FROM         
        dbo.Storage S          
        CROSS APPLY DATA.nodes('/footballteams') AS Teams(TeamsNode)
        CROSS APPLY data.nodes('/footballteams/team') AS Team(TeamNode)
)
GO
CREATE UNIQUE CLUSTERED INDEX TeamNameInd ON FootballView(TeamName) 
```

-

```
Error Message: Cannot create index on view "CF.dbo.FootballView" because it contains an APPLY. Consider not indexing the view, or removing APPLY. 
```

我意识到，事实上，不能为此视图创建索引，因为使用了 CROSS APPLY。任何人都可以为此提出解决方法吗？因为在处理大量 XML 数据时，使用这种没有索引的视图太慢了。

编辑：

有什么办法可以索引 XML 本身吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:09:04.527

您可以通过将 XML 数据解析为 SQL 关系表并使用简单触发器使表保持同步来解决此问题（*并且可能获得更好的性能）。*以下脚本是如何完成它的示例，我希望它对您的情况有用：

```
CREATE TABLE Storage (
  id INT IDENTITY(1,1) PRIMARY KEY,
  data XML NOT NULL
);

CREATE TABLE FootballTable (
  id INT,
  teamName varchar(100),
  manager varchar(100),
  ground varchar(100)
);
GO

CREATE TRIGGER TG_INS_Storage ON Storage
FOR INSERT, UPDATE, DELETE AS
BEGIN
  DELETE FootballTable WHERE id IN (SELECT dlt.id FROM deleted dlt);

  INSERT FootballTable (id, teamName, manager, ground)
  SELECT ins.id,
    TeamName = Team.TeamNode.value('(name)[1]', 'varchar(100)'),
    Manager  = Team.TeamNode.value('(@manager)', 'varchar(100)'),
    Ground   = Team.TeamNode.value('(ground)[1]', 'varchar(100)')
  FROM inserted ins
  CROSS APPLY ins.data.nodes('/footballteams/team') AS Team(TeamNode);
END

INSERT INTO Storage(data) 
VALUES('
<footballteams>
  <team manager="Benitez"><name>Liverpool</name><ground>Anfield</ground></team>   
  <team manager="Mourinho"><name>Chelsea</name><ground>Stamford Bridge</ground></team>   
  <team manager="Wenger"><name>Arsenal</name><ground>Highbury</ground></team> 
</footballteams>');
GO
SELECT * FROM FootballTable; 
```

# .net - JSON.NET JsonConvert 与 .NET JavaScriptSerializer

> ID：11263166
> 
> 赞同：32
> 
> 时间：2012-06-29T13:58:01.667
> 
> 标签：.net, json, json.net

在 .NET 中对 JSON 进行编码和解码时，使用什么更好？我已经尝试了这两种方法，到目前为止，JsonConvert 似乎做得很好。我过去成功使用过 JavaScriptSerializer，但最近遇到了一些问题。使用 JSON.NET 比使用 .NET 类更好吗？

使用适当的库编码/解码 json 的首选函数是什么？我使用来自 JSON.NET 的 SerializeObject/DeSerializeObject 和来自 .NET 的 Serialize/DeSerialize。

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-08-19T13:08:58.363

我认为[这](https://www.newtonsoft.com/json/help/html/Introduction.htm)正是您正在寻找的比较。

它基本上说 JSON.Net 更好，因为它除其他外......

*   **更快**_
***   **支持 LINQ** to JSON*   可以在 JSON 和**XML之间进行****转换****

 ****在我看来，对于内置序列化程序，唯一的积极因素（而且是一个小积极因素）是没有额外的外部依赖项需要管理。

**编辑**：Codeplex 有一天会关闭，因此您也可以在[此处](http://www.newtonsoft.com/json)找到比较，只需在页面上搜索“功能比较”即可。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-04-02T17:07:14.080

很长一段时间以来，我的应用程序都在使用`JavascriptSerializer`并且没有看到迁移的真正理由。即使性能比较声称获得了巨大的百分比收益，我们说的是毫秒。

但是这里有一个非常好的迁移理由：`JavascriptSerializer`不可用，`.Net Core`因为它是其中的一部分`System.Web`所以如果你正在使用`JavascriptSerializer`，你会被卡住并且必须迁移到 JSON.net****

# sql-server-2008 - 如何使用 TOP 并有条件地忽略 UNION ALL？

> ID：11263171
> 
> 赞同：2
> 
> 时间：2012-06-29T13:58:10.997
> 
> 标签：sql-server-2008, tsql, optimization

我正在查询一个表，其中包含用户搜索的顶级结果的全文索引，然后将通配符搜索的结果附加到该表的末尾。

这是我稍微简化的 SQL ......

```
SELECT TOP(@top) * FROM     
(       
    SELECT TOP (@top) ft.[RANK], p.ProductID, p.Name FROM dbo.Product p 
    INNER JOIN FREETEXTTABLE(dbo.Product, *, @search_term) AS ft ON p.ProductID = ft.[KEY]
    ORDER BY ft.[RANK] * p.Popularity DESC

    UNION ALL

    SELECT TOP (@top) 0 AS [RANK], p.ProductID, p.Name FROM dbo.Product p 
    WHERE (NOT p.ProductID IN (SELECT [KEY] FROM FREETEXTTABLE(dbo.Product, *, @search_term)))
    AND   (p.Name LIKE '%' + @search_term + '%')
    ORDER BY p.Popularity DESC
) AS results 
```

这一切都有效，并且已经存在了一段时间。

现在这是棘手的部分。我最近发现这是网站上更昂贵的查询之一。我查看了查询计划，发现查询的 LIKE '%%' 部分会产生 50-80% 的成本。这真的不是什么大惊喜，因为通配符搜索往往很慢。问题是当前半部分本身返回足够的行时，UNION ALL 的后半部分不需要运行。

当前半部分（全文搜索）返回我需要的所有行时，有没有办法**不执行 UNION ALL？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:03:22.380

你可以这样做：

```
SELECT TOP (@top) ..., ft.[RANK] * p.Popularity INTO #foo ... <FT query>;

IF @@ROWCOUNT < @top
  INSERT #foo SELECT TOP (@top) ..., p.Popularity FROM <like query>;

SELECT TOP (@top) ... FROM #foo ORDER BY Popularity DESC; 
```

它的 I/O 多一点，但可能值得补偿。

您也可以考虑仅将第一个查询返回给客户端，并仅在第一个查询不够的情况下返回*第二个结果集，并使应用程序足够智能以合并结果集。*这只有在仅按 p.Popularity 排名的任何结果*之前显示 ft.[RANK] * p.Popularity 时才有效。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:03:44.470

我不知道您可以在单个语句中执行此操作的方法，但是您可以`@@rowcount`在第一个查询之后进行检查，如果它不够高，则仅触发第二个查询

# python - 查找列表列表的最长公共前缀的 Pythonic 方法是什么？

> ID：11263172
> 
> 赞同：20
> 
> 时间：2012-06-29T13:58:23.320
> 
> 标签：python

**Given**：列表的列表，例如`[[3,2,1], [3,2,1,4,5], [3,2,1,8,9], [3,2,1,5,7,8,9]]`

**Todo**：查找所有子列表中最长的公共前缀。

**Exists**：在另一个线程“[两个列表之间的公共元素不使用 Python 中的集合](https://stackoverflow.com/questions/2727650/common-elements-between-two-lists-not-using-sets-in-python)”中，建议使用“计数器”，它在 python 2.7 之上可用。但是我们当前的项目是用 python 2.6 编写的，所以没有使用“计数器”。

**我目前这样编码：**

```
l = [[3,2,1], [3,2,1,4,5], [3,2,1,8,9], [3,2,1,5,7,8,9]]
newl = l[0]
if len(l)>1:
    for li in l[1:]:
    newl = [x for x in newl if x in li] 
```

但我发现它不是很pythonic，有没有更好的编码方式？

谢谢！

**新编辑**：抱歉提一下：在我的情况下，“l”中列表的共享元素具有相同的顺序，并且总是从第 0 项开始。所以你不会有像`[[1,2,5,6],[2,1,7]]`

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-01-28T23:31:38.230

[`os.path.commonprefix()`](http://docs.python.org/2/library/os.path.html#os.path.commonprefix)适用于列表:)

```
>>> x = [[3,2,1], [3,2,1,4,5], [3,2,1,8,9], [3,2,1,5,7,8,9]]
>>> import os
>>> os.path.commonprefix(x)
[3, 2, 1] 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-29T14:41:24.823

我不确定它是多么pythonic

```
from itertools import takewhile,izip

x = [[3,2,1], [3,2,1,4,5], [3,2,1,8,9], [3,2,1,5,7,8,9]]

def allsame(x):
    return len(set(x)) == 1

r = [i[0] for i in takewhile(allsame ,izip(*x))] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T14:36:27.093

这是使用 itertools 的另一种方法：

```
>>> import itertools
>>> L = [[3,2,1,4], [3,2,1,4,5], [3,2,1,8,9], [3,2,1,5,7,8,9]]
>>> common_prefix = []
>>> for i in itertools.izip(*L):
...    if i.count(i[0]) == len(i):
...       common_prefix.append(i[0])
...    else:
...       break
... 
>>> common_prefix
[3, 2, 1] 
```

不确定它可能被认为是多么“pythonic”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T14:22:32.880

鉴于您的示例代码，您似乎想要一个`reduce(set.intersection, map(set, l))`保留第一个列表的初始顺序的版本。

这需要*算法*改进，而不是风格改进；单独的“pythonic”代码在这里对你没有任何好处。想一想每个列表中出现的所有值都*必须满足的情况：*

> 给定一个列表列表，当且仅当它出现在`nlist`列表中时，一个值才会出现在每个列表中，其中`nlist`是列表的总数。

如果我们可以保证每个值在每个列表中只出现一次，那么上面的内容可以改写为：

> 给定一个唯一项目列表的列表，当且仅当它出现的`nlist`次数总计时，每个列表中才会出现一个值。

我们可以使用集合来保证列表中的项目是唯一的，因此我们可以将后一个原则与一个简单的计数策略结合起来：

```
>>> l = [[3,2,1], [3,2,1,4,5], [3,2,1,8,9], [3,2,1,5,7,8,9]]
>>> count = {}
>>> for i in itertools.chain.from_iterable(map(set, l)):
...     count[i] = count.get(i, 0) + 1
... 
```

现在我们要做的就是过滤原始列表：

```
>>> [i for i in l[0] if count[i] == len(l)]
[3, 2, 1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T18:46:33.453

它效率低下，因为它不会在发现不匹配后立即退出，但它很整洁：

```
([i for i,(j,k) in enumerate(zip(a,b)) if j!=k] or [0])[0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-16T23:37:07.137

使用生成器表达式和 Python 3 内置的现代化*垂直扫描*`zip`解决方案：

```
lst = [[3,2,1], [3,2,1,1,5], [3,2,1,8,9], [3,2,1,5,7,8,9]]

next(zip(*(x for x in zip(*lst) if len(set(x)) == 1)))
# (3, 2, 1) 
```

另请参阅相关的[Leetcode 问题 - *Longest Common Prefix*](https://leetcode.com/problems/longest-common-prefix/description/)。

# android - MediaPlayer 抛出非法状态异常

> ID：11263173
> 
> 赞同：2
> 
> 时间：2012-06-29T13:58:30.193
> 
> 标签：android

**编辑3：啊哈！当 SP“提供未准备好的样本 14”时，MP 崩溃了......**

编辑 2：我的活动中还有一个 SoundPool 播放短音效，显然，它以某种方式杀死了 MediaPlayer。就像 MediaPlayer 加载一样，播放大约一秒钟，然后在加载 SP 时死亡。如果我稍后加载 MediaPlayer，当 SP 已经加载时，MP 将开始正常播放，但如果我在 SP 中播放一些声音 FX 就会死掉......

old：我正在尝试播放音乐声音文件，大约 2 分钟长...

```
 try {
        MediaPlayer mp = MediaPlayer.create(main.this, R.raw.naturesounds );
        mp.prepare();
        mp.start();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

但它抛出

```
06-29 16:50:52.359: E/MediaPlayer(3772): prepareAsync called in state 8
06-29 16:50:52.359: W/System.err(3772): java.lang.IllegalStateException
06-29 16:50:52.359: W/System.err(3772):     at android.media.MediaPlayer.prepare(Native Method)
06-29 16:50:52.359: W/System.err(3772):     at engineDemo.com.main.fillWorld(main.java:132)
06-29 16:50:52.359: W/System.err(3772):     at engineDemo.com.main.onCreate(main.java:83)
06-29 16:50:52.359: W/System.err(3772):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-29 16:50:52.359: W/System.err(3772):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-29 16:50:52.359: W/System.err(3772):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-29 16:50:52.359: W/System.err(3772):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-29 16:50:52.359: W/System.err(3772):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-29 16:50:52.359: W/System.err(3772):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 16:50:52.359: W/System.err(3772):     at android.os.Looper.loop(Looper.java:130)
06-29 16:50:52.359: W/System.err(3772):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-29 16:50:52.359: W/System.err(3772):     at java.lang.reflect.Method.invokeNative(Native Method)
06-29 16:50:52.359: W/System.err(3772):     at java.lang.reflect.Method.invoke(Method.java:507)
06-29 16:50:52.359: W/System.err(3772):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-29 16:50:52.363: W/System.err(3772):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-29 16:50:52.363: W/System.err(3772):     at dalvik.system.NativeStart.main(Native Method) 
```

任何想法可能是错误的或播放背景音乐的最佳方式是什么？

谢谢！

编辑：

像这样编辑

```
 final MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.naturesounds);
    mediaPlayer.setOnPreparedListener(new OnPreparedListener(){

        public void onPrepared(MediaPlayer arg0) {
            Log.e("ready!","ready!");
            mediaPlayer.start();

        }} ); 
```

它确实显示了日志，但仍然没有播放...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T14:01:27.153

[MediaPlayer 上的开发文档](http://developer.android.com/guide/topics/media/mediaplayer.html)示例：

```
mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer arg0) {
        mp.start();

    }
});
//Below this line is the example from docs.
/*----------------------------------------------------*/
MediaPlayer mediaPlayer = MediaPlayer.create(context, R.raw.sound_file_1);
//mediaPlayer.start(); // no need to call prepare(); create() does that for you 
```

您的 MediaPlayer 已经 Prepared() 您不需要在创建后调用它。

# sencha-touch-2 - 在 Sencha Touch 2 中使用积木构建应用程序？

> ID：11263175
> 
> 赞同：2
> 
> 时间：2012-06-29T13:58:31.317
> 
> 标签：sencha-touch-2

我的问题与在 Sencha Touch 2 上构建 GUI 有关，首先创建控件，然后在面板的项目上实例化它们。像这样：

```
var myButton = Ext.create('Ext.Button', {
    text: 'Button',
}); 
```

然后执行此操作以在屏幕上显示它：

```
//..some panel
items:[{myButton}, {anotherControl}] 
```

当我尝试在 Sencha Touch 2 上执行此操作时，它只会抛出一个错误：“Uncaught SyntaxError: Unexpected identifier”

我曾经在 Sencha Touch 1.x 上这样做过，这让我发疯了，因为在我在网上找到的每个示例中，他们使用 xtype 属性声明面板内的控件。

一个小代码片段对我有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:48:30.040

你可以这样做：

```
Ext.define('App.view.MyView', {
  xtype: 'myview',

  extend: 'Ext.Panel',

  config: {
    layout: 'vbox'
  },

  constructor: function() {
    var me = this;
    me.callParent(arguments);

    var myButton1 = Ext.create('Ext.Button', {
        text: 'Button1',
    });

    var myButton2 = Ext.create('Ext.Button', {
        text: 'Button2',
    });

   me.add([myButton1,myButton2]);
  }
}); 
```

希望这可以帮助

# .htaccess - htaccess 问题，将 '/' 更改为 '.'

> ID：11263179
> 
> 赞同：0
> 
> 时间：2012-06-29T13:58:45.223
> 
> 标签：.htaccess, mod-rewrite

这是我对 StackOverflow 的第一个问题。我一直在为当前正在开发的 PHP 应用程序使用 .htaccess。我的争用是将正斜杠更改为句点。

到目前为止，我还没有 Joy，目前我的代码如下所示：

```
RewriteRule ^([A-Za-z_-]+)?$ app/account/?account_name=$1 [NC,L] 
```

以上内容删除了“app/account/?account_name=account_name”并允许显示以下内容：www.exampleurl.com/examplename。这很好，但无论如何要更改我的代码，而不是 /examplename 它声明 www.exampleurl.com.examplename ？我花了一些时间在谷歌上搜索答案无济于事。

如果有人能给我一些很棒的指导，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:38:05.047

我想不出真正的替换，但是*如果*嵌套限制为某个数字（比如说 3），您可以提供多个规则，每个规则都处理特定的嵌套级别：

```
 RewriteRule ^([^/]+)/([^/]+)/(.*) /$1.$2.$3 [L,QSA]
 RewriteRule ^([^/]+)/(.*) /$1.$2 [L,QSA]
 # third rule is not needed, because when there is only one level, there is nothing to replace 
```

您需要确保规则按嵌套级别的*降序*排列（`L`标志确保处理在匹配的级别上停止）

# java - Hadoop 架构内部：作业和任务跟踪器的使用

> ID：11263187
> 
> 赞同：-2
> 
> 时间：2012-06-29T13:59:09.780
> 
> 标签：java, hadoop

hadoop中job tracker和task tracker有什么用？namenode 中存在的元数据的内容是什么？hadoop中二级namenode有什么用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:07:55.077

注意：请查看检查点节点（辅助名称节点在最新版本中已弃用）。辅助名称节点的目的是执行定期检查点。辅助名称节点定期下载当前名称节点图像并编辑日志文件，将它们加入新图像并将新图像上传回（主要和唯一的）名称节点。请参阅用户指南。

因此，如果名称节点失败并且您可以在同一个物理节点上重新启动它，则无需关闭数据节点，只需重新启动名称节点即可。如果您不能再使用旧节点，则需要将最新图像复制到其他地方。如果可用，可以在故障前曾经是主节点的节点上找到最新的映像；或在辅助名称节点上。后者将是没有后续编辑日志的最新检查点，即最近的名称空间修改可能在那里丢失。在这种情况下，您还需要重新启动整个集群

JobTracker 是用于在 Hadoop 中提交和跟踪 MapReduce 作业的守护程序服务。任何 hadoop 集群上只运行一个 Job Tracker 进程。Job Tracker 在其自己的 JVM 进程上运行。在典型的生产集群中，它在单独的机器上运行。每个从节点都配置有作业跟踪器节点位置。JobTracker 是 Hadoop MapReduce 服务的单点故障。如果它发生故障，所有正在运行的作业都将停止。Hadoop 中的 JobTracker 执行以下操作（来自 Hadoop Wiki：）客户端应用程序将作业提交到 Job Tracker。JobTracker 与 NameNode 对话以确定数据的位置 JobTracker 在数据处或附近找到具有可用插槽的 TaskTracker 节点 JobTracker 将工作提交给选定的 TaskTracker 节点。TaskTracker 节点受到监控。如果他们没有足够频繁地提交心跳信号，则认为他们已经失败，并且工作被安排在不同的 TaskTracker 上。当任务失败时，TaskTracker 会通知 JobTracker。JobTracker 决定接下来要做什么：它可能会在其他地方重新提交作业，它可能会将特定记录标记为要避免的事情，甚至可能会将 TaskTracker 列入不可靠的黑名单。工作完成后，JobTracker 会更新其状态。

客户端应用程序可以轮询 JobTracker 以获取信息。

TaskTracker 是集群中的从属节点守护进程，它接受来自 JobTracker 的任务（Map、Reduce 和 Shuffle 操作）。任何 hadoop 从节点上都只运行一个 Task Tracker 进程。Task Tracker 在其自己的 JVM 进程上运行。每个 TaskTracker 都配置了一组槽，这些槽表示它可以接受的任务数。TaskTracker 启动一个单独的 JVM 进程来做实际的工作（称为 Task Instance），这是为了确保进程失败时不会关闭任务跟踪器。TaskTracker 监视这些任务实例，捕获输出和退出代码。当任务实例完成时，无论成功与否，任务跟踪器都会通知 JobTracker。TaskTracker 还会向 JobTracker 发送心跳消息，通常每隔几分钟，以向 JobTracker 保证它仍然存在。

Namenode 存储整个系统命名空间。上次修改时间、创建时间、文件大小、所有者、权限等信息存储在 Namenode 中。名称节点上的 fsimage 是二进制格式。使用“离线图像查看器”以人类可读的格式转储 fsimage。当文件数量巨大时，单个 Namenode 将无法保留所有元数据。事实上，这也是 HDFS 的局限之一。您可以检查 HDFS Federation，它旨在通过拆分为由不同名称节点服务的不同名称空间来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:29:55.763

这是一个快速参考：

*   **NameNode**：管理命名空间、文件系统元数据和访问控制。每个集群中只有一个 NameNode。
*   **SecondaryNameNode**：从 NameNode 下载定期检查点以实现容错。每个集群中只有一个 SecondaryNameNode。
*   **JobTracker**：将任务分发给从节点。每个集群中只有一个 JobTracker。
*   **DataNode**：保存文件系统数据；每个数据节点管理自己的本地连接存储（即节点的硬盘），并在文件系统中存储部分或全部块的副本。每个集群中有一个或多个 DataNode。如果您的集群只有一个 DataNode，则无法复制文件系统数据。
*   **TaskTracker**：执行map和reduce任务的slave。每个集群中有一个或多个 TaskTracker。

（[来源](http://pages.cs.brandeis.edu/~cs147a/lab/hadoop-cluster/)）

# css - 如何在萤火虫上隐藏划掉的 CSS 行？

> ID：11263188
> 
> 赞同：3
> 
> 时间：2012-06-29T13:59:22.417
> 
> 标签：css, firebug

当使用 firebug 检查网站的元素时，总会有几行 CSS 被划掉并且没那么有用。有没有办法隐藏它们，只留下活动的 CSS 行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T14:03:49.197

在`Style ∇`选项卡上，单击向下箭头`∇`并选择`Only Show Applied Styles`

# ruby-on-rails - 如何在 Gem 中获取 Rails 应用程序的根目录

> ID：11263192
> 
> 赞同：5
> 
> 时间：2012-06-29T13:59:30.637
> 
> 标签：ruby-on-rails, ruby, rubygems

是否可以在应用程序中包含的 gem 的代码中知道应用程序的 Rails 文件系统根目录？

这是 gem 源代码的示例：

```
module MyGem
  def self.included(base)
    puts Rails.root # return nil
  end
end

ActionController::Base.send :include, MyGem 
```

感谢并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T19:17:36.590

我发现解决类似问题的解决方案是使用 railtie 初始化程序包含我的模块。

所以，在你的 /lib/mygem/railtie.rb

```
module MyGem
  class Railtie < Rails::Railtie
    initializer "Include your code in the controller" do
      ActiveSupport.on_load(:action_controller) do
        include MyGem
      end
    end
end 
```

使用此代码，您的模块将在 ActionController 加载后包含在内，您将能够使用 Rails.root

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:16:44.270

当然：

```
Rails.root 
```

仅仅因为您正在编写 gem 并不意味着您不能访问全局命名空间。唯一需要担心的是，如果您的 Gem 在初始化期间设置 Rails 模块之前使用该访问权限。如果您发现这是问题所在，请发布您正在使用的代码及其所在位置，我们很乐意帮助您调试问题。

# pdf - 使用 cfsearch 和 SOLR 的 ColdFusion PDF 文件搜索速度极慢

> ID：11263194
> 
> 赞同：4
> 
> 时间：2012-06-29T13:59:45.630
> 
> 标签：pdf, coldfusion, solr, indexing, cfsearch

我有一个功能正常的 Adob​​e ColdFusion 应用程序，它通过 Solr 搜索索引大约 2k 个 PDF 文件并提供预期的结果 - 但是对集合的每个搜索查询通常需要 25-30 秒。

这就是我将 2k PDF 文件索引到 Solr 的方式：

```
<!--- query database files --->
<cfset getfiles = application.file.getfiles()>

<!--- create solr query set --->
<cfset filesQuery = QueryNew("
    fileUID
    , filepath
    , title
    , description
    , fileext
    , added
")>

<!--- create new file query with key path and download url --->
<cfoutput query="getfiles">
<cfset ext = trim(getfiles.fileext)>
<cfset path = expandpath('/docs/#fileUID#.#ext#')>

<cfscript>
    newRow = QueryAddRow(filesQuery);
    QuerySetCell(filesQuery, "fileUID","#fileUID#" );
    QuerySetCell(filesQuery, "filepath","#path#" );
    QuerySetCell(filesQuery, "title","#filename#" );
    QuerySetCell(filesQuery, "description","#description#" );
    QuerySetCell(filesQuery, "added","#added#" );
</cfscript>

</cfoutput>

<!--- index the bunch --->
<cfindex  
    query = "filesQuery" 
    collection = "resumes" 
    action = "update" 
    type = "file" 
    key = "filepath"     
    title = "title" 
    body = "title, description"
    custom1 = "fileext"
    custom2 = "added"
    category= "file"
    status = "filestatus"> 
```

这是搜索文件的方式以及（25-30 秒）Solr 搜索发生的位置：

```
<!--- imagine form with (form.search) for terms --->

<cfsearch name = "results" 
    collection = "resumes" 
    criteria = "#form.search#
    contextPassages = "1"
    contextBytes = "300"
    maxrows = "100"
    contextHighlightBegin = "<strong>"
    contextHighlightEnd = " </strong>">

<!--- show (results) query ---> 
```

关于项目的一些附加信息：所有文件的长度都小于 1 页，因此在向 Solr 创建索引结果时没有字符截断。我在 ColdFusion Administrator 中使用过 Solr 缓冲区限制，没有明显的时间变化（目前为 40）。我在使用 MS Server 2003、1.86 Xeon - Adob​​e ColdFusion 9.0.1 和 1GB RAM 的开发 VM 上。JVM 是 Sun Microsystems (14.3-b01)。几乎没有其他东西在服务器端运行，因此性能应该不受外部因素的影响。

它提供了预期的和完美的结果，只是不及时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:30:54.840

您可以尝试使用[CFSorLib](http://cfsolrlib.riaforge.org/)。它使用 Solr API。您可能会通过绕过来获得性能提升`<cfsearch>`

# forms - 创建完全自定义的 Magento 客户登录表单

> ID：11263196
> 
> 赞同：1
> 
> 时间：2012-06-29T14:00:00.560
> 
> 标签：forms, magento, login

如何在前端创建自己的登录表单？我不只是想修改现有登录表单的模板，而是想创建自己的。

我正在使用 Magento 社区 1.7。

谢谢你能给我的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:03:27.260

创建一个新模板并覆盖布局 xml 以插入您自己的块。

# java - 如何避免此 NullPointerException

> ID：11263199
> 
> 赞同：2
> 
> 时间：2012-06-29T14:00:11.290
> 
> 标签：java, swing, inheritance, nullpointerexception, double-buffering

我正在开发一款小型街机视频游戏，并且我正在寻找双缓冲以改善动画效果。我有一个类应该绘制空白图像，另一个类应该绘制一条简单的线。但是，我一直在应该绘制线的线上收到 NullPointerException

```
class Render extends JPanel {
    public int dbWidth = 500, dbHeight = 400;
    public Image dbImage = null;
    public Graphics dbg;

    public void gameRender() {

        if( dbImage == null )  
            dbImage = createImage( dbWidth, dbHeight );

        dbg = dbImage.getGraphics();
        dbg.setColor( Color.white );
        dbg.fillRect( 0, 0, dbWidth, dbHeight );
    }
}

class MC extends Render {
    public Render render = new Render();

    public void draw() {
        render.gameRender();
        dbg.drawLine( 100, 100, 200, 200 ); // line where NullPointerException occurs
    }
} 
```

我想是 Graphics 变量 dbg 为空，但它获得了`dbImage.getGraphics();`如何`gameRender();`修复此 NullPointerException？

我也在像这样的另一个类中调用 draw() 方法

```
 public void run() {

    running = true;

    while( running ) {

        mc.draw();
        try {
            Thread.sleep( 50 );
        }
        catch( Exception e ) {}
    }
} 
```

我在那个类的构造函数中说过 mc = new MC();

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T14:02:37.873

您正在调用`dbg`实例`this`，而不是`render`.

您需要将其更改为

```
render.dbg.drawLine(....) 
```

或者，如果您想保持`dbg`通话不变，您可以拨打

```
this.gameRender(); 
```

先调用再调用

```
dbg.drawLine(...); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T14:02:39.810

您`dbg`通过调用`gameRender`on 进行设置`render`，但不是`this`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:04:20.870

由于 MC 扩展了渲染，因此`dbg`您所指的属于调用 draw 的 MC 实例。您可以通过调用来修复它

```
render.dbg.drawLine( 100, 100, 200, 200 ); 
```

或利用您实现的继承

```
class MC extends Render {
    //MC is a render, so you don't need to create another one
    public void draw() {
        gameRender(); //Call the MC's own gameRender
        dbg.drawLine( 100, 100, 200, 200 );  //Calling gameRender initialized dbg so you won't get a NullPointerException
    }
} 
```

# iphone - 在 Xcode 中设置 RestKit

> ID：11263200
> 
> 赞同：3
> 
> 时间：2012-06-29T14:00:15.220
> 
> 标签：iphone, ios, xcode, restkit

我的名字是 Marco，我正在尝试在我的项目中使用 RestKit。总的来说，我是 RestKit 和 iOS 的新手，但经验丰富的 .NET 程序员。

你们能帮帮我吗？

问题是我无法设置 XCode 来使用 RestKit。当我尝试编译它时，它总是说：

架构 i386 的未定义符号：

_CGRectIsEmpty”，引用自：

```
 -[RKAbstractTableController addToOverlayView:modally:] in libRestKit.a(RKAbstractTableController.o) 
```

“_CGRectContainsPoint”，引用自：

```
 -[RKAbstractTableController resizeTableViewForKeyboard:] in libRestKit.a(RKAbstractTableController.o) 
```

“_CGRectZero”，引用自：

```
 -[RKAbstractTableController initWithTableView:viewController:] in libRestKit.a(RKAbstractTableController.o)

  -[RKAbstractTableController showImageInOverlay:] in libRestKit.a(RKAbstractTableController.o)

  -[RKRefreshGestureRecognizer initWithTarget:action:] in libRestKit.a(RKRefreshGestureRecognizer.o)

  -[RKRefreshTriggerView initWithFrame:] in libRestKit.a(RKRefreshTriggerView.o)

  -[RKAbstractTableController initWithTableView:viewController:] in libRestKit.a(RKAbstractTableController.o)

  -[RKAbstractTableController showImageInOverlay:] in libRestKit.a(RKAbstractTableController.o)

  -[RKRefreshGestureRecognizer initWithTarget:action:] in libRestKit.a(RKRefreshGestureRecognizer.o)

  -[RKRefreshTriggerView initWithFrame:] in libRestKit.a(RKRefreshTriggerView.o)

  -[RKAbstractTableController initWithTableView:viewController:] in libRestKit.a(RKAbstractTableController.o)

  -[RKAbstractTableController showImageInOverlay:] in libRestKit.a(RKAbstractTableController.o)

  -[RKRefreshGestureRecognizer initWithTarget:action:] in libRestKit.a(RKRefreshGestureRecognizer.o)

  -[RKRefreshTriggerView initWithFrame:] in libRestKit.a(RKRefreshTriggerView.o) 
```

“_CGRectGetWidth”，引用自：

```
 -[RKRefreshGestureRecognizer observeValueForKeyPath:ofObject:change:context:] in libRestKit.a(RKRefreshGestureRecognizer.o)

  -[RKRefreshTriggerView layoutSubviews] in libRestKit.a(RKRefreshTriggerView.o) 
```

“_CGRectGetMidY”，引用自：

```
 -[RKRefreshTriggerView layoutSubviews] in libRestKit.a(RKRefreshTriggerView.o) 
```

“_CGRectIntegral”，引用自：

```
 -[RKRefreshTriggerView layoutSubviews] in libRestKit.a(RKRefreshTriggerView.o) 
```

“_CGRectGetHeight”，引用自：

```
 -[RKRefreshTriggerView layoutSubviews] in libRestKit.a(RKRefreshTriggerView.o) 
```

“_CGRectOffset”，引用自：

```
 -[RKRefreshTriggerView layoutSubviews] in libRestKit.a(RKRefreshTriggerView.o) 
```

ld：未找到体系结构 i386 的符号

clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

当我删除 -ObjC -all_load 链接器标志时，我的项目构建“正常”。但后来我尝试使用它，我得到了错误：

2012-06-29 10:40:08.346 AgroERP[5234:fb03]-[NSURL queryParameters]：无法识别的选择器发送到实例 0x6e4cd60

2012-06-29 10:40:08.349 AgroERP [5234:fb03] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSURL queryParameters]：无法识别的选择器发送到实例 0x6e4cd60”

***首先抛出调用栈：

(0x1780022 0x19e6cd6 0x1781cbd 0x16e6ed0 0x16e6cb2 0x2424c 0x2405f 0x241cf 0x240d4 0x2751 0x1781e99 0xa0114e 0xa010e6 0xaa7ade 0xaa7fa7 0xaa6d8a 0xa262cf 0xa265e6 0xa0cdc4 0xa00634 0x1f8bef5 0x1754195 0x16b8ff2 0x16b78da 0x16b6d84 0x16b6c9b 0x1f8a7d8 0x1f8a88a 0x9fe626 0x1fac 0x1f45 0x1)

终止称为抛出异常

在行中：RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://192.168.1.101/AgroERPAPI/AuthenticationClient.svc"];

请，我很抱歉打扰你，但我真的需要帮助。非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T14:05:59.770

这些是 Core Graphics 框架的一部分，因此它看起来由于某种原因没有被包含在内。确保将其添加到项目中并且选择了正确的构建目标。查看构建设置中的框架。

# gwt - 如何在 GWT 中检索事件的“真实”目标元素

> ID：11263205
> 
> 赞同：8
> 
> 时间：2012-06-29T14:00:34.083
> 
> 标签：gwt

新手关于 GWT 的快速问题。考虑以下代码：

```
FlowPanel block = buildMyBlock(); // buildMyBlock builds a FlowPanel with different widgets in it
block.addDomHandler(
    new ClickHandler()
    {
        @Override
        public void onClick(ClickEvent event)
        {
            // do some stuff
        }
    },
    ClickEvent.getType()); 
```

在 onClick() 方法中，我希望能够根据块内已单击的内部元素进行不同的处理是否可能？如何 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-29T14:40:17.153

您可以使用`Element.as(event.getNativeEvent().getEventTarget())`来检索事件的实际目标。

# iphone - uialertview 上的活动指示器

> ID：11263206
> 
> 赞同：0
> 
> 时间：2012-06-29T14:00:34.753
> 
> 标签：iphone, uialertview, uiactivityindicatorview

如果用户单击 uialertview 上的某个按钮，我有一个耗时的步骤要做。我想在完成时用活动指示器通知用户。我不确定要获得所需的输出究竟需要做什么。这是流程：

用户单击按钮 1“建造塔”。

UIAlertview 显示“你想这样做吗，这需要时间”

用户单击“是”：现在我在 alertview 委托方法中。

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

if (buttonIndex == 1) {//Yes the user wants to do this
 //Show activity indicator here

    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc]     initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

    indicator.center = CGPointMake(alert.bounds.size.width / 2, alert.bounds.size.height - 50);
    [indicator startAnimating];
    [alertView addSubview:indicator];
    [indicator release];

//
[SimpleFunctions doThatMethodThatTakesALongTime];
 //remove activity indicator here

    }

} 
```

在这里，我想在“大处理”完成之前显示一个活动指示器。

将活动指示器添加到 alertview 的示例展示了如何将指示器添加到上述 alertview。但我不希望该指示器出现，直到用户单击“是”。关于如何实现这一目标的任何指示都会很棒。我希望我把问题说清楚了，如果没有，请告诉我，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:09:38.013

警报视图参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)

在委托方法`- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`中，您可以在那里向 alertView 添加内容。

例如

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    UIActivityIndicator * ai = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [alertView addSubview:activityIndicator];
    activityIndicator.frame = CGRectMake(80, 0, 30, 30);
    [ai startAnimating];
} 
```

您想添加`ai`为 ivar（类变量）以便稍后将其删除。

`[self.ai removeFromSuperview];`

希望这可以帮助。

编辑：要记住的一件事是，这样您可能必须自己管理解除警报视图。您可以使用`- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated`警报视图上的方法将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:19:02.550

这里：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

if (buttonIndex == 1) {//Yes the user wants to do this
 UIActivityIndicatorView *loading = [[UIActivityIndicatorView alloc]
                initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];   
loading.frame=CGRectMake(150, 150, 16, 16);
[YOURAlertView addSubview:loading];
[SimpleFunctions doThatMethodThatTakesALongTime];
[self performSelector:@selector(turnOff:) withObject:nil afterDelay:1.0];

    }
}

-(void) turnOff {
[loading removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:21:40.697

根据您在您的委托中使用并制作标签以识别不同的不同警报...

UIAlertview *myAlertView = [[UIAlertView alloc] initWithTitle:@"Loading" message:@"Your Message" delegate:self cancelButtonTitle:nil otherButtonTitles:nil];

```
 UIActivityIndicatorView *loading = [[UIActivityIndicatorView alloc]
            initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];   
 loading.frame=CGPointMake(myAlertView .bounds.size.width / 2, myAlertView .bounds.size.height - 40);
 [myAlertView addSubview:loading];
 [loading release];
 [myAlertView show]; 
```

这可能会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T10:56:10.110

使用`AlertView`' 的边界来布局活动指示器是一个好主意，但请注意，在调用`AlertView`之前 ' 的边界都为零。`[alertView show]`

# oracle11g - Oracle 提供者 VS 2012 RC

> ID：11263210
> 
> 赞同：0
> 
> 时间：2012-06-29T14:00:50.180
> 
> 标签：oracle11g, visual-studio-2012, server-explorer

**数据库**：Oracle 11g

**VS 20120 提供程序：** ODAC 11.2 第 4 版和适用于 Visual Studio (11.2.0.3.0) 的 Oracle 开发人员工具

我刚刚更新到 VS 2012 RC，我什至无法连接到我的数据库。我不希望 EF 5 或 .NET 4.5 与此提供程序一起使用，但我只想能够为 .Net 4 设置我的解决方案目标并且仍然能够连接到我的数据库。当我使用服务器资源管理器时，我看不到我通常使用的提供程序，并且 VS 附带的唯一 Oracle 提供程序支持高达 10g 并且已被弃用。

**任何人都可以帮助我在 VS 2012 中获得 Oracle 11g 的提供者吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:23:17.520

我能够弄清楚这一点，尽管谷歌搜索不清楚是否有可能使用 EF 5 找到用于 VS 2012 RC、.NET 4.5 的 oracle 提供程序。所以我会拯救所有试图做同样事情的人有些麻烦！

Devart 为不同的数据库开发提供程序。我已经放弃为 .NET 4.5 寻找一个，而只是寻找替代 oracle 为支持 EF 4.2 而发布的提供程序。我在 Devarts 站点找到了替代方案，它被称为 dotConnect for Oracle。

[http://www.devart.com/dotconnect/oracle/download.html](http://www.devart.com/dotconnect/oracle/download.html)

在撰写本文时，它们是第 7 版。通过查看屏幕右侧的发行说明，我发现它支持 VS 2012 RC 和 EF5。据我所知，这在其他任何地方都没有表现出来。它确实支持使用 .NET 4.5 和 EF 5 连接到 oracle 11G 数据库。正常工作。它要花钱，但我觉得它物有所值，而不是等待 Oracle 没有就开发 .NET 4.5 提供程序发表评论或宣布，并且无论如何都未能成功交付 EF 4.3。

因此，请节省一些时间和心痛，并查看 dotConnect for oracle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:48:32.033

这个适用于 Oracle 11g（支持 .NET 4.5）的 Ora.NET 提供程序可用：

64位 [http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html](http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html)

32位 [http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)

# php - mysql where field in 使用变量填充部分

> ID：11263212
> 
> 赞同：0
> 
> 时间：2012-06-29T14:01:05.157
> 
> 标签：php, mysql, field

我将如何做到（这只是示例）不返回错误？

```
$field_in = this, that

$result = mysql_query("SHOW COLUMNS FROM " . $table. " WHERE Field IN ( ".$field_in." )") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:03:54.313

```
$result = mysql_query( 
   "select *
    from INFORMATION_SCHEMA.COLUMNS c
    where c.TABLE_SCHEMA = '" . $table. "' 
    and c.COLUMN_NAME IN ( ".$field_in." )") 
```

# php - Joomla 数据库查询在更新后返回旧值

> ID：11263219
> 
> 赞同：2
> 
> 时间：2012-06-29T14:01:29.980
> 
> 标签：php, mysql, joomla, civicrm

我正在实现一个在更新/添加数据库行后触发的基本侦听器（一个[civicrm_post挂钩）。](http://wiki.civicrm.org/confluence/display/CRMDOC41/CiviCRM+hook+specification#CiviCRMhookspecification-hookcivicrmpost)我遇到的问题是，即使表中的一行已更改，通过 Joomla 数据库对象加载同一行也会返回先前的值。

假设我将对象的名称从“foo”更改为“bar”。

```
$db =& JFactory::getDBO();
$db->setQuery("SELECT ..."); 
```

返回 '​​foo' 作为名称，而

```
$c = mysql_connect("host","user","password");
mysql_select_db("db", $c);
$result = mysql_query("SELECT ..."); 
```

返回“酒吧”。

是否正在进行任何缓存，有什么方法可以清除它吗？

以供参考：

*   Joomla 2.5.6
*   PHP 5.3.10
*   MySQL 5.1.36

编辑：这是我在 CiviCRM 论坛上开始的一个主题，它提供了更多细节：http: [//forum.civicrm.org/index.php/topic,25200.0.html](http://forum.civicrm.org/index.php/topic,25200.0.html)

编辑2：“最新发展”和一些澄清。

我正在使用钩子推送更新的 iCal 提要，这是 CiviCRM 的前端组件提供的提要。当钩子触发时它不会更新，即使数据库在那时更新并且两端都没有缓存。显然 CiviCRM 使用自己的数据库连接器，因此上述措辞不再严格有效。使用稍后触发的钩子（civicrm_postProcess）解决了这个问题，但这是一个“hacky”修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T19:09:52.367

在我看来，有三种选择：

1.  @SørenBeckJensen 可能是对的！尝试运行：
    `select DATABASE() from dual`
    并查看每个数据库正在调用哪个数据库。

2.  另一种选择是`autocommit`关闭，在这种情况下您需要提交：
    `$db->setQuery("COMMIT");`

3.  第三个选项是`INSERT`没有正确写入（在第一种情况下）并且它失败了。但我需要查看查询才能确定。

# java - 使用 Restlet 设置自定义 Content-Range 标头

> ID：11263224
> 
> 赞同：0
> 
> 时间：2012-06-29T14:01:50.963
> 
> 标签：java, restlet, restlet-2.0

我正在使用 restlet 2.0.11 通过 REST-Web-Interface 为基于 Dojo 的 Web 应用程序提供数据。

根据 dojo 的文档，分页是使用 HTTP 的“content-range”标头实现的，因此 dojo 需要一个像这样的标头：

```
Content-Range: items 0-19/100 
```

（来源：[http](http://dojotoolkit.org/reference-guide/1.7/dojox/data/JsonRestStore.html) ://dojotoolkit.org/reference-guide/1.7/dojox/data/JsonRestStore.html ）

这意味着 REST-Api 提供了 100 个项目中的前 20 个。

像这样手动设置 Content-Range 标头

```
getResponse().getAttributes().get("org.restlet.http.headers").add(new Parameter("Content-Range", "FooBar") 
```

导致以下错误：

```
WARNING: Addition of the standard header "Content-Range" is not allowed. Please use the equivalent property in the Restlet API. 
```

根据restlet的文档，该属性是“message.entity.range”（来源：[http](http://wiki.restlet.org/docs_2.0/130-restlet.html) ://wiki.restlet.org/docs_2.0/130-restlet.html ）

这个哈希映射的直接修改也没有成功：

```
getResponse().getAttributes().put("message.entity.range", "FooBat"); 
```

另一种似乎很有希望的方法是使用 restlet 的“表示”对象，因为它有一个 setRange() 方法，但是在请求期间，对象引用为空：

```
getResponse().getEntity() 
```

所以我的问题是：如何将 Content-Range 标头设置为 Restlet 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T22:23:06.040

您必须在 Representation 类中使用等效的 Java 属性，因此这是 getResponse().getEntity().setRange(myRange)。

# sql - 有没有办法将 WHERE 条件仅应用于选择中的一个字段？

> ID：11263226
> 
> 赞同：1
> 
> 时间：2012-06-29T14:01:54.257
> 
> 标签：sql, oracle

没有做这样的事情

**编辑于 2012 年 6 月 29 日上午 10:17** 我意识到我的查询比我的示例查询复杂一些，并且当前的建议不起作用，但这是我的错。我在原始查询之上创建了一个更准确的查询。

```
SELECT DISTINCT
a,
max(b) as b,
(select count(distinct c) as c from d where e=2) as c
FROM d
GROUP BY a 
```

**来自 d 的样本数据**

```
 a | b | c | e
---+---+---+---
 0 | 0 | 0 | 1
 0 | 0 | 0 | 2
 1 | 0 | 0 | 1
 1 | 0 | 0 | 1 
```

因此对于这组数据，其中 a = 0 c 的计数为 1（其中 e==1），对于 a = 1 c 的计数为 2（其中 e==1）

**编辑结束**

```
SELECT
a,
b,
(SELECT c from d where e=2)
FROM d 
```

或者至少有更好的方法来提高性能吗？也许像一个工会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:07:09.917

如果我理解您的要求，那么这将起作用：

```
SELECT
  a,
  b,
  case
    when e=2 then c
    else null
  end as c
FROM
  d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:40:09.180

据我了解，您想按`a`. 对于您想要最大值的每个组`b`，并且您想知道`c`行中不同值的数量`e=2`。

其他答案在使用方面有正确的想法，`CASE`但没有解决您要计算不同值的问题。我认为这就是你要找的：

```
SELECT a, MAX(b), COUNT(DISTINCT CASE WHEN e=2 THEN c else NULL end)
  FROM d
  GROUP BY a 
```

（您目前的问题不清楚`e`您的值是 1 还是 2；我在上面的查询中选择了 2。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:17:25.533

根据新信息，试试这个：

```
SELECT a,
       max(b) as b,
       sum(case when e=2 then 1 else 0 end) as c
FROM d 
GROUP BY a 
```

# php - PHP - 从 URL 中删除最后一个目录

> ID：11263229
> 
> 赞同：0
> 
> 时间：2012-06-29T14:02:04.960
> 
> 标签：php, parsing, url

假设我的网址是：

> [http://www.example.com/news/media-centre/news/17/an-example-news-post/?foo=bar](http://www.example.com/news/media-centre/news/17/an-example-news-post/?foo=bar)

我想在 PHP 中删除 URL 中的最后一个目录，所以我得到：

> [http://www.example.com/news/media-centre/news/17/?foo=bar](http://www.example.com/news/media-centre/news/17/?foo=bar)

如何在确保维护任何其他 URL 参数的同时执行此操作？

我试过用这个：

```
$url = parse_url( $url );
$url['path'] = str_replace( strrchr($url['path'], "/"), "", $url['path'] ); 
```

但是如果最后一个目录也在路径中的其他位置，则替换会导致问题。

更不用说将 URL 重新拼接在一起似乎还有很长的路要走......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:11:42.963

```
$url = "http://www.example.com/news/media-centre/news/17/an-example-news-post/?foo=bar";
$info = parse_url($url);
$info["path"]=dirname($info["path"]);

$new_url = $info["scheme"]."://".$info["host"].$info["path"];
if(!empty($info["query"])) $new_url .= "?".$info["query"];
if(!empty($info["fragment"])) $new_url .= "#".$info["fragment"]; 
```

# django - 配置 PyDev/Eclipse 以获得最佳 Django 模板编辑（无 Aptana）的提示？

> ID：11263240
> 
> 赞同：4
> 
> 时间：2012-06-29T14:02:40.897
> 
> 标签：django, eclipse, django-templates, pydev

我正在寻找的是：

*   完整的语法突出显示，包括 {% Django 模板关键字 %} 和 {{ Django 模板表达式 }}
*   特定于 Django 模板的其他编辑便利，类似于 PyDev 编辑器为 .py 源代码提供的许多功能（例如，用于错误/警告的 Command-1 快速修复、PEP8 检查等）
*   抑制导致表单模板代码破坏正常 HTML 语法的无关警告，例如 Django 模板代码的“无效文本”警告和引用 {{ STATIC_URL}}xyz.js 时的“找不到资源”警告等。

我知道 Eclipse 的 Aptana Studio 版本有一个 Django 特定的模板编辑器。这个问题专门针对普通的 Eclipse/Pydev sans Aptana Studio。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T12:29:24.607

编辑：

当前推荐的方法是使用 LiClipse。请参阅：[https ://stackoverflow.com/a/20837924/110451](https://stackoverflow.com/a/20837924/110451)

另一种选择是使用[http://eclipse.kacprzak.org](http://eclipse.kacprzak.org)（或 Aptana Studio 3，尽管此时捆绑了一个非常旧的 PyDev 版本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-25T10:58:01.167

只是想补充上述答案，因为人们抱怨他们的编辑没有看到任何不同。

仅仅安装 Django 编辑器插件不会有任何区别。您必须明确关联编辑器才能编辑所有`.html`文件。

您可以通过以下方式链接`.html`文件以使用 Django 编辑器：

> Windows 菜单 > 首选项 > 常规 > 编辑器 > 文件关联

一旦你这样做了，Django Editor 插件会处理代码突出显示和模板的自动完成。

为了完整起见，安装过程可以在[这里](http://eclipse.kacprzak.org/)找到。

# javascript - 无法绑定到传单弹出窗口上的单击事件

> ID：11263243
> 
> 赞同：9
> 
> 时间：2012-06-29T14:02:59.010
> 
> 标签：javascript, jquery, click, leaflet

我正在使用 Leaflet 绘制地图，在弹出窗口中我添加了一个链接，该链接应该导致更详细的描述，描述与地图分离并使用手风琴排列到列表中，因此每个描述都被隐藏了。

我可以使用锚链接到手风琴内容，但我需要执行一些 JavaScript `onclick`，所以我试图添加一个`click`事件处理程序 - 它不起作用。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Leaflet Quick Start Guide Example</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<script src="http://leaflet.cloudmade.com/dist/leaflet.js"></script>-->
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>

    <link rel="stylesheet" href="http://code.leafletjs.com/leaflet-0.3.1/leaflet.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="http://code.leafletjs.com/leaflet-0.3.1/leaflet.ie.css" /><![endif]-->

</head>
<body>

    <div id="map" style="width: 600px; height: 400px"></div>
    <div id="log"></div>

    <div id="map_box_text" class="status_half">
            <br>
            <br>
        <p>List made using JQuery UI accordion, every element is hidden, only on hover it opens, you can click on it to display on map, reverse cliking on map should aopen accordion list description (this), it's currently done using permalinks because I cannot catch click event on a or span tag.
        <div class="accordion">
            <h4><a href="#" class="pointpopup" id="point_111_11"> Ioff :: **** ***</a></h4>
                <div>Detailed data</div>
            <br>
            <br>
            <h4><a href="#" class="pointpopup" id="point_222_22">Us sb  :: **** ***    </a></h4>
                <div>Detailed data</div>
            <br>
            <br>
            <h4><a href="#" class="pointpopup" id="point_333_33">Ioff  :: **** ***</a></h4>
                <div>Detailed data</div>
            <br>
            <br>
            <h4><a href="#" class="pointpopup" id="point_555_44">Us sb  :: **** ***    </a></h4>
                <div>Detailed data</div>
        </div>
    </div>

    <script src="http://leaflet.cloudmade.com/dist/leaflet.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){

            var map = new L.Map('map', {
                center: new L.LatLng(51.641485,-0.15362),
                zoom: 13
            });

            var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/a0ead8ee56bd415896e0c7f7d22e8b6e/997/256/{z}/{x}/{y}.png',
            cloudmadeAttrib = 'Map data &copy; 2011 OpenStreetMap contributors',
            cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18, attribution: cloudmadeAttrib});
            map.addLayer(cloudmade);
            var point = {};

                point["point_111_11"] = new L.Marker(new L.LatLng(51.4800166666667,-0.43673)).bindPopup("<a href=\"#point_111_11\" class=\"map_popup link\">Ioff</a> <br>**** ***");
                point["point_222_22"] = new L.Marker(new L.LatLng(51.6616333333333,-0.0528583333333333)).bindPopup("<a href=\"#point_222_22\" class=\"map_popup link\">Us sb</a> <br>**** ***");
                point["point_333_33"] = new L.Marker(new L.LatLng(52.3910783333333,-0.696951666666667)).bindPopup("<a href=\"#point_333_33\" class=\"map_popup link\">Ioff</a> <br>**** ***");
                point["point_555_44"] = new L.Marker(new L.LatLng(51.641485,-0.15362)).bindPopup("<a href=\"#point_555_44\" class=\"map_popup link\">Us sb</a> <br>**** ***");

        var points_layer = new L.LayerGroup();

                points_layer.addLayer(point["point_111_11"]);
                points_layer.addLayer(point["point_222_22"]);
                points_layer.addLayer(point["point_333_33"]);
                points_layer.addLayer(point["point_555_44"]);
        map.addLayer(points_layer);

        $('.pointpopup').click(function(){
            var pointname = this.id;
            map.setView(point[pointname].getLatLng(),15);
            point[pointname].openPopup();
        });
    });

    $(window).load(function(){

        $("body").click(function(event) {
            //console.log('event target is:' + event.target.nodeName);
            $("#log").html("clicked: " + event.target.nodeName);
        });

        $('.map_popup').live('click',function () {
        //$('.map_popup').click(function(){
            alert('Try to open Accordion ' + $(this).attr('href'))
            //console.log('Try to open Accordion');
        })
    })
    </script>
</body>
</html> 
```

你可以在[JS Fiddle上查看](http://jsfiddle.net/M5Ntr/6/)

我已将此作为 github 上的错误报告给 Leaflet 的开发人员[here](https://github.com/CloudMade/Leaflet/issues/765)和[here](https://github.com/CloudMade/Leaflet/issues/767)但他关闭错误回复说这不是问题，我可以使用另一个`class`- 这是行不通的。

编辑：我自己也找到了一些：http: [//jsfiddle.net/M5Ntr/12/](http://jsfiddle.net/M5Ntr/12/) 但仍然存在问题，可能有 500 分，所以我希望代码尽可能少，我试图创建函数，但我不能传递变量:(

这是有效的

```
point["point_111_11"] = new L.Marker(new L.LatLng(51.4800166666667,-0.43673)).bindPopup("<b>Ioff</b> <br>**** ***").on('click', function (e) { console.log("clicked (Try to open Accordion): " + e.target) }); 
```

但这是可取的（不工作）：

```
point["point_111_11"] = new L.Marker(new L.LatLng(51.4800166666667,-0.43673)).bindPopup("<b>Ioff</b> <br>**** ***").on('click', myfunction('point_111_11'));

function myfunction(seclectedId){
   //do something with seclectedId
   console.log(seclectedId)
} 
```

甚至

```
point["point_111_11"] = new L.Marker(new L.LatLng(51.4800166666667,-0.43673)).bindPopup("<b>Ioff</b> <br>**** ***").myBindFunction('point_111_11') 
```

这将在里面做 .on('click') 或类似的东西......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T15:19:37.053

正如[您提出的票证](https://github.com/CloudMade/Leaflet/issues/765)中所指定的，您可以创建 DOM 元素并将它们传递给`bindPopup`方法......所以您可以这样做：

```
var domelem = document.createElement('a');
domelem.href = "#point_555_444";
domelem.innerHTML = "Click me";
domelem.onclick = function() {
    alert(this.href);
    // do whatever else you want to do - open accordion etc
};

point["point_555_44"] = new L.Marker(new L.LatLng(51.641485, -0.15362)).bindPopup(domelem); 
```

你只需要更新`onclick`函数来做你需要它做的事情......

**[这是您示例中的上述代码部分](http://jsfiddle.net/manseuk/M5Ntr/11/)**

# java - Java：如何实现通用二叉搜索树？

> ID：11263244
> 
> 赞同：10
> 
> 时间：2012-06-29T14:03:10.147
> 
> 标签：java, binary-search-tree

到现在为止，我一直在写一个 Node 类

```
class Node {
        private  value;
        private Node left;
        private Node right;

        public int getValue() {
            return value;
        }

        public void setValue(int value) {
            this.value = value;
        }

        public Node getLeft() {
            return left;
        }

        public void setLeft(Node left) {
            this.left = left;
        }

        public Node getRight() {
            return right;
        }

        public void setRight(Node right) {
            this.right = right;
        }
    } 
```

和二叉搜索树为

```
public class BinarySearchTree {
    private Node root;

    public BinarySearchTree(int value) {
        root = new Node(value);
    }

    public void insert(int value) {
      Node node = new Node(value);
        // insert logic goes here to search and insert
    }
} 
```

现在我想支持 BinarySearchTree 插入任何类型的节点，比如字符串，人

我怎样才能使它通用以容纳任何类型？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-29T14:06:27.840

使用泛型：

```
class Node<T extends Comparable<T>> {
        private T value;
        ...
}

public class BinarySearchTree<T extends Comparable<T>> {
    private Node<T> root;

    public BinarySearchTree(T value) {
        root = new Node<T>(value);
    }

    public void insert(T value) {
      Node<T> node = new Node<T>(value);
        // insert logic goes here to search and insert
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T14:08:26.257

只需将每个`Node`和`BinarySearchTree`类设为通用：

```
class Node<T extends Comparable<T>> {
    private T value;
    private Node<T> left;
    private Node<T> right;

    public Node(T value) {
        this.value = value;
    }

    public T getValue() {
        return value;
    }

    public void setValue(T value) {
        this.value = value;
    }

    public Node<T> getLeft() {
        return left;
    }

    public void setLeft(Node<T> left) {
        this.left = left;
    }

    public Node<T> getRight() {
        return right;
    }

    public void setRight(Node<T> right) {
        this.right = right;
    }
} 
```

和：

```
class BinarySearchTree<T extends Comparable<T>> {
    private Node<T> root;

    public BinarySearchTree(T value) {
        root = new Node<T>(value);
    }

    public void insert(T value) {
      Node<T> node = new Node<T>(value);
        // insert logic goes here to search and insert
    }
} 
```

请注意`Comparable`稍后在树中强制执行节点排序时需要的扩展约束。感谢 zaske 的建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-17T17:53:45.090

```
Please find the BST using Generics, U can find more information on below link 
```

[https://www.cs.cmu.edu/~adamchik/15-121/lectures/Trees/code/BST.java](https://www.cs.cmu.edu/~adamchik/15-121/lectures/Trees/code/BST.java)

```
public class BinarySearchTree< T extends Comparable<T>> {
    Node root;
    class Node {
        T data;
        Node left;
        Node right;

        public Node(T data) {
            this.data = data;
        }
    }

    public boolean isEmpty() {
        return root == null;
    }

    public void insert(T value) {
        if(isEmpty())
            root = new Node(value);
        else
            insert(root, value);
    }

    private void insert(Node node, T value) {

        if(value.compareTo(node.data) < 0) {
            if(node.left == null)
                node.left = new Node(value);
            else
                insert(node.left, value);
        }
        else {
            if(node.right == null)
                node.right = new Node(value);
            else
                insert(node.right, value);
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T14:12:30.043

请不要您的代码无法编译。
您在这里有一些挑战 -
A. 将节点定义为通用 -

```
public class Node<T> {
   private T value;
   //... here goes the rest of your code
} 
```

B. 您的搜索类也应该是通用的，并且签名应该是

```
public class BinarySearchTree <T extends Comparable<T>> {

   public BinarySearchTree(T value) {
      //Do your logic here
   }

   public void insert(T value)  {
        //Do your logic here
   }
} 
```

这是必需的，以强制您仅提供实现 Comparable 的类型，以便您能够在树中执行搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:07:42.680

你有两个选择：

1）您可以进入泛型/模板。

2）让你的树接受一个类型`Object`而不是`int`让用户负责转换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-13T17:18:07.993

[我在这里找到了一个实现](https://github.com/nbronson/snaptree)[并发 AVL 树](http://arsenalfc.stanford.edu/papers/ppopp207-bronson.pdf)系统的 SnapTreeMap 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-30T15:47:23.863

最近写了这个。希望对你有帮助

```
public class GenericBST<V extends Comparable<V>> {

private class Node {
    Node left, right;
    V value;
    public Node(V value) {
        this.value = value;
    }
}

private Node root;
private int size;

public int getSize() {
    return size;
}

public GenericBST() {
    this.root = null;
    this.size = 0;
}

public boolean isEmpty() {
    if (root == null) return true;
    else return false;
}

public void insert(V value) {
    size++;
    if (isEmpty()) root = new Node(value);
    else insert(root, value);
}

public boolean contains(V value) {
    return contains(root, value);
}

public void print() {
    print(root);
}

private boolean contains(Node node, V value) {
    if (value.compareTo(node.value) == 0) {
        return true;
    } else if (value.compareTo(node.value) < 0) {
        if (node.left == null) return false;
        else return contains(node.left, value);
    } else {
        if (node.right == null) return false;
        else return contains(node.right, value);
    }
}

private void print(Node node) {
    if (root == null) return;
    System.out.println(node.value);
    if (node.left != null) print(node.left);
    if (node.right != null) print(node.right);
}

private void insert(Node node, V value) {
    if(value.compareTo(node.value) <= 0) {
        if(node.left == null) node.left = new Node(value);
        else insert(node.left, value);
    } else {
        if(node.right == null) node.right = new Node(value);
        else insert(node.right, value);
    }
} 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-27T04:04:49.623

```
public class TNode<T extends Comparable<T>> {
    T data;
    public TNode<T> left;
    public TNode<T> right;

    public TNode(T data){
        this.data = data;
    }
}

import java.util.ArrayList;
import java.util.List;

public class BinaryTree<T extends Comparable<T>> {
private TNode root;

public TNode getRoot() {
    return this.root;
}

public void add(T data) {
    TNode<T> newNode = new TNode<T>(data);
    if (root == null) {
        root = newNode;
    } else {
        TNode<T> tempNode = root;
        TNode<T> prev = null;
        while (tempNode != null) {
            prev = tempNode;
            if (data.compareTo(tempNode.data) > 0) {
                tempNode = tempNode.right;
            } else {
                tempNode = tempNode.left;
            }
        }
        if (data.compareTo(prev.data) < 0) {
            prev.left = newNode;
        } else {
            prev.right = newNode;
        }

    }
}

public void traverseInOrder(TNode<T> root, List<T> storageList) {
    if (root != null) {
        traverseInOrder(root.left, storageList);
        storageList.add(root.data);
        traverseInOrder(root.right, storageList);
    }
}

public void traversePreOrder(TNode<T> root, List<T> storageList) {
    if (root != null) {
        storageList.add(root.data);
        traversePreOrder(root.left, storageList);
        traversePreOrder(root.right, storageList);
    }
}

public void traversePostOrder(TNode<T> root, List<T> storageList) {
    if (root != null) {
        traversePostOrder(root.left, storageList);
        traversePostOrder(root.right, storageList);
        storageList.add(root.data);
    }
}

public void printList(List<T> list) {
    for (T item : list) {
        System.out.println(item);
    }
}

public static void main(String args[]) {
    BinaryTree<Integer> bTree = new BinaryTree<>();
    bTree.add(50);
    bTree.add(30);
    bTree.add(60);
    bTree.add(25);
    bTree.add(40);
    bTree.add(35);
    bTree.add(70);
    bTree.add(65);

    System.out.println("#### Inorder Traversal ####");
    List<Integer> inOrderList = new ArrayList<>();
    bTree.traverseInOrder(bTree.getRoot(), inOrderList);
    bTree.printList(inOrderList);

    System.out.println("#### Pre Traversal ####");
    List<Integer> preOrderList = new ArrayList<>();
    bTree.traversePreOrder(bTree.getRoot(), preOrderList);
    bTree.printList(preOrderList);

    System.out.println("#### Post Traversal ####");
    List<Integer> postOrderList = new ArrayList<>();
    bTree.traversePostOrder(bTree.getRoot(), postOrderList);
    bTree.printList(postOrderList);

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-30T15:20:13.627

最近写了这个。希望对你有帮助

```
public class TreeMap<V extends Comparable<V>> {

private class Node {
    Node left, right;
    V value;
    public Node(V value) {
        this.value = value;
    }
}

private Node root;
private int size;

public int getSize() {
    return size;
}

public TreeMap() {
    this.root = null;
    this.size = 0;
}

public boolean isEmpty() {
    if (root == null) return true;
    else return false;
}

public void insert(V value) {
    size++;
    if (isEmpty()) root = new Node(value);
    else insert(root, value);
}

public boolean contains(V value) {
    return contains(root, value);
}

public void print() {
    print(root);
}

private boolean contains(Node node, V value) {
    if (value.compareTo(node.value) == 0) {
        return true;
    } else if (value.compareTo(node.value) < 0) {
        if (node.left == null) return false;
        else return contains(node.left, value);
    } else {
        if (node.right == null) return false;
        else return contains(node.right, value);
    }
}

private void print(Node node) {
    if (root == null) return;
    System.out.println(node.value);
    if (node.left != null) print(node.left);
    if (node.right != null) print(node.right);
}

private void insert(Node node, V value) {
    if(value.compareTo(node.value) <= 0) {
        if(node.left == null) node.left = new Node(value);
        else insert(node.left, value);
    } else {
        if(node.right == null) node.right = new Node(value);
        else insert(node.right, value);
    }
} 
```

}

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-06-29T14:07:45.577

关于第二个问题，您应该使用 Template ：

[http://www.oracle.com/technetwork/articles/javase/generics-136597.html](http://www.oracle.com/technetwork/articles/javase/generics-136597.html)

关于第一：

[http://en.wikipedia.org/wiki/Binary_search_algorithm](http://en.wikipedia.org/wiki/Binary_search_algorithm) http://en.wikipedia.org/wiki/Tree_rotation（插入）

也许读起来更快：

[http://www.roseindia.net/java/java-get-example/java-binary-tree-code.shtml](http://www.roseindia.net/java/java-get-example/java-binary-tree-code.shtml)

好好学习！

# html - 使用 xslt 和约定的通用 xml -> html 转换？

> ID：11263245
> 
> 赞同：0
> 
> 时间：2012-06-29T14:03:13.483
> 
> 标签：html, css, xml, xslt

我一直在网上搜索类似的东西并且是一个懒惰的程序员，在我自己尝试这样做之前，我想我会在这里问。

我想要的是一种方法，可以按照约定（如 cakephp 或 ruby​​）采用节点名称的任何 xml，然后以准备好打印的格式呈现该数据。

IE：

```
<xml>
<home_address>The Street</home_address>
</xml> 
```

至：

```
<tr><td>Home Address</td><td>The Street</td></tr> 
```

等等，孩子们有单独的桌子。

它看起来很简单，而且以前很多次都需要。我发现了一个有用的讨论，但没有结论。

[http://www.daniweb.com/software-development/xml-xslt-and-xpath/threads/363621/xml-to-html-using-xslt-without-hardcoding-node-names-in-xslt](http://www.daniweb.com/software-development/xml-xslt-and-xpath/threads/363621/xml-to-html-using-xslt-without-hardcoding-node-names-in-xslt)

我在这里错过了什么吗？是否有一个简单的通用 xslt/css 方法来执行此操作？还是这项工作每天在世界各地的小隔间中重复数百次？

提前致谢，

F

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:01:41.993

使用以下 XSL 样式表。我已经对其进行了测试，并且可以正常工作。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:template match="/">
    <xsl:for-each select="*">
      <xsl:for-each select="*">
        <tr>
          <xsl:variable name="NodeNameClearText">
            <xsl:call-template name="repalceNodeName">
              <xsl:with-param name="value" select="local-name(.)"/>
            </xsl:call-template>
          </xsl:variable>
              <td>
                <xsl:value-of select="$NodeNameClearText" />
              </td>
              <td>
                <xsl:value-of select="." />
              </td>
            </tr>
      </xsl:for-each>
    </xsl:for-each>
  </xsl:template>

  <xsl:template name="repalceNodeName">
    <xsl:param name="value"/>
    <xsl:variable name="valueWithoutUnderscores">
      <xsl:value-of select="translate($value, '_',' ')"/>
    </xsl:variable>
    <xsl:call-template name="caseLowerAcceptFirstWord">
      <xsl:with-param name="data" select="$valueWithoutUnderscores"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="caseDown">
    <xsl:param name="data"/>
    <xsl:if test="$data">
      <xsl:choose>
        <xsl:when test="starts-with($data,' ')">
          <xsl:text> </xsl:text>
          <xsl:call-template name="caseLowerAcceptFirstWord">
            <xsl:with-param name="data" select="normalize-space(substring($data,2))"/>
          </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="translate(substring($data,1,1),
                                  'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')"/>
          <!-- put all the chars you want to change 
                 into the last two strings -->
          <xsl:call-template name="caseDown">
            <xsl:with-param name="data" select="substring($data,2)"/>
          </xsl:call-template>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:if>
  </xsl:template>

  <xsl:template name="caseUP">
    <xsl:param name="data"/>
    <xsl:if test="$data">
      <xsl:choose>
        <xsl:when test="starts-with($data,' ')">
          <xsl:text> </xsl:text>
          <xsl:call-template name="caseLowerAcceptFirstWord">
            <xsl:with-param name="data" select="substring($data,2)"/>
          </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="translate(substring($data,1,1),
                                  'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')"/>
          <!-- put all the chars you want to change 
                 into the last two strings -->
          <xsl:call-template name="caseDown">
            <xsl:with-param name="data" select="substring($data,2)"/>
          </xsl:call-template>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:if>
  </xsl:template>

  <xsl:template name="caseLowerAcceptFirstWord">
    <xsl:param name="data"/>
    <xsl:variable name="upperData">
      <xsl:call-template name="caseUP">
        <xsl:with-param name="data" select="$data"/>
      </xsl:call-template>
    </xsl:variable>
    <xsl:if test="$upperData">
      <xsl:value-of select="substring($upperData,1,1)"/>
      <xsl:call-template name="caseDown">
        <xsl:with-param name="data" select="substring($data,2)"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

关于我测试的更多信息。以下 XML：

```
<xml>
<home_address>The Street</home_address>
<po_box>474</po_box>
</xml> 
```

被输出到

```
<tr><td>Home Address</td><td>The Street</td></tr>
<tr><td>Po Box</td><td>474</td></tr> 
```

如果那不是您想要的，那么您的问题就含糊不清

# css - 如何在画布/div 的 4 个角中的每一个中浮动可点击的图像元素？

> ID：11263247
> 
> 赞同：2
> 
> 时间：2012-06-29T14:03:15.577
> 
> 标签：css, html

所以我有画布，在一个div中。我有 4 个元素（图像），我想漂浮在画布顶部（谷歌地图控件样式）的每个角落。我正在尝试找出正确的 html/css 组合，以便它可以工作。理想情况下，如果我动态调整画布大小，元素将继续与每个角的边缘保持适当间距。我希望画布上的任何转换和翻译都将与这些元素完全隔离。

```
<div id="content">
     <canvas id="render"></canvas>
</div>

<script type="text/javascript">
     $(document).ready(function(){
         var canvas = document.getElementById("render");
         canvas.height = 800;
         canvas.width = 900;
     });
</script> 
```

浮动元素可能包含使用背景图像 css 属性的图像，并且需要可点击以用于 jQuery 事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T14:09:03.143

将四个元素绝对定位在`#content`：

[http://jsfiddle.net/thirtydot/UTM7x/](http://jsfiddle.net/thirtydot/UTM7x/)

```
#content {
    position: relative;
}
#clickable-1 {
    position: absolute;
    top: 0;
    left: 0;
}
#clickable-2 {
    position: absolute;
    top: 0;
    right: 0;
}
#clickable-3 {
    position: absolute;
    bottom: 0;
    right: 0;
}
#clickable-4 {
    position: absolute;
    bottom: 0;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:10:55.027

`position: absolute`在您的叠加元素上使用。

[这是 JSFiddle 上的一个示例](http://jsfiddle.net/A3F8Z/)。它很粗糙，但它表现得很好。

HTML：

```
<div id="canvasContainer">
    <canvas></canvas>
    <div class="overlay top left">
        Top left stuff
    </div>
</div>​ 
```

CSS：

```
#canvasContainer {
    position: relative;
}
#canvasContainer canvas {
    width: 400px;
    height: 300px;
    background: blue;
}
#canvasContainer div.overlay {
    position: absolute;
    padding: 10px;
    background: #eee;
    top: 0px;
    left: 0px;
}
​ 
```

# c# - 以编程方式获取 TFS 中文件的两个版本之间的差异

> ID：11263251
> 
> 赞同：11
> 
> 时间：2012-06-29T14:03:24.750
> 
> 标签：c#, tfs, tfs-sdk

我正在尝试编写一个代码，给定 TFS 存储库中项目的路径和两个修订版，将计算这两个时刻的内容文件之间的差异。现在，代码可能如下所示：

```
using (var projectCollection = new TfsTeamProjectCollection(new Uri(repositoryUrl)))
{
    projectCollection.EnsureAuthenticated();
    var versionControlServer = (VersionControlServer)projectCollection.GetService(typeof(VersionControlServer));

    string path = "$/MyProject/path/to/file.xml"

    var before = new DiffItemVersionedFile(versionControlServer, path, VersionSpec.ParseSingleSpec(minRevision.ToString(), null));
    var after = new DiffItemVersionedFile(versionControlServer, path, VersionSpec.ParseSingleSpec(maxRevision.ToString(), null));

    using (var stream = new MemoryStream())
    using (var writer = new StreamWriter(stream))
    {
        var options = new DiffOptions();
        options.Flags = DiffOptionFlags.EnablePreambleHandling;
        options.OutputType = DiffOutputType.Unified;
        options.TargetEncoding = Encoding.UTF8;
        options.SourceEncoding = Encoding.UTF8;
        options.StreamWriter = writer;
        Difference.DiffFiles(versionControlServer, before, after, options, path, true);
        writer.Flush();

        var reader = new StreamReader(stream);
        var diff = reader.ReadToEnd();
    }
} 
```

但是一旦执行此代码，`diff`即使我确定该文件已在`minRevision`和之间修改，该变量也是一个空字符串`maxRevision`。

`minRevision`如果文件在 中不存在或被删除，则此代码也会引发异常`maxRevision`，但这似乎是以后要解决的问题，一旦我让这个东西处理仅编辑过的文件。

## 编辑

检查临时文件后，我确定文件的两个版本都已正确下载。计算差异或将差异写入流或将差异复制到字符串时出现问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T14:34:52.283

解决了。问题出在读者身上。在我将最后两行更改为

```
var diff = Encoding.UTF8.GetString(stream.ToArray()); 
```

我终于得到了一些差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-08T20:06:29.607

我知道你接受了你的答案，这是在 2012 年提出的，但我最近不得不做同样的事情，但更喜欢使用`StreamReader`vs`.ToArray()`

答案是您必须`MemoryStream`在开始阅读之前重置它。

添加这个

```
stream.Position = 0; 
```

在你冲洗作家之后

# database - 将访问中的表拆分为两个链接表

> ID：11263253
> 
> 赞同：0
> 
> 时间：2012-06-29T14:03:32.177
> 
> 标签：database, ms-access

我有一个大表，其中包括来自旧数据库的客户详细信息和订单详细信息。我创建了一个具有表结构的新数据库，并希望将其分别拆分为客户表和订单表，同时保持数据链接。有没有办法做到这一点？

# php - 选择术语（类别）van mysql表并将它们输出到选择框中

> ID：11263261
> 
> 赞同：0
> 
> 时间：2012-06-29T14:04:10.573
> 
> 标签：php, mysql, list, select, taxonomy

这是我的术语表（类别）的数据库结构：

```
 id   |   name   |   parent_id   |   level   |   position   
--------------------------------------------------------------
   1    |   term 1 |   NULL        |   0       |   1
   2    |   term 2 |   1           |   1       |   1
   3    |   term 3 |   1           |   1       |   2
   4    |   term 4 |   NULL        |   0       |   2
   5    |   term 5 |   4           |   1       |   1 
```

所以术语 2 和 3 是 1 的第一级孩子，而 5 是 4 的第一级孩子

这是我的查询：（这是不正确的，这应该是固定的）

```
SELECT
    `id`,
    `name`
FROM
    `terms`
ORDER BY
    `position` ASC,
    `level` ASC 
```

这是我的 php：

```
$terms = array();

// query part

if(!$this->_db->resultRows > 0)
  return $terms;

while($d = $this->_db->fetch($r))
{
  $terms[$d->id] = new Term($d->id);
}     

return $terms; 
```

当前结果：

```
term 1
  term 2
  term 5
term 4
 term 3 
```

但结果应该是：

```
term 1
  term 2
  term 3
term 4
  term 5 
```

我不知道如何更改查询以获得正确的结果
目标是在（多个）选择框中输出它
我知道如何使用嵌套列表，但你不能嵌套选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:32:12.723

好的，所以有很多方法可以处理这类问题。我将介绍的所有方式都不需要表中存在级别列。在我看来，这是多余的数据，因为它可以从其他列中的信息中推断出来。

如果您知道最大“级别”仅为 1（最大深度为 2），则可以使用如下查询：

```
SELECT
        t.`id`,
        t.`name`,
        IF(p.`position` IS NULL, t.`position`*{$row_count}, p.`position`*{$row_count}+t.`position`) AS display_order
FROM
        `terms` t
        LEFT JOIN `terms` p ON p.`id` = t.`parent_id`
ORDER BY
        display_order 
```

在哪里`$row_count`计算：

```
SELECT COUNT(*) FROM `terms` 
```

有一些方法可以修改此 SQL 以使其适用于更多级别（深度），但查询需要随着它支持的每个最大级别/深度而变得更大。

如果您不确定您将拥有的关卡数量，那么您可能应该执行以下操作：

```
$dbh->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);
$sth = $dbh->prepare('SELECT id,name FROM terms WHERE parent_id IS NULL ORDER BY position');
$sth->execute(array(NULL));
$terms = $sth->fetchAll();

$sql = 'SELECT id,name FROM terms WHERE parent_id = ? ORDER BY position';
$terms_to_check = $terms;
$terms = array();
while(count($terms_to_check))
{
        $k = array_shift($terms_to_check);
        $terms[] = $k;
        $sth = $dbh->prepare($sql);
        $sth->execute(array($k['id']));
        $results = $sth->fetchAll();
        $terms_to_check = array_merge($results, $terms_to_check);
} 
```

（顺便说一下，我建议使用 PDO。）

# ruby-on-rails - Ruby on Rails net/http 使用 '\r\n' 发布

> ID：11263264
> 
> 赞同：1
> 
> 时间：2012-06-29T14:04:25.613
> 
> 标签：ruby-on-rails, http-post, net-http

我需要将 Rails 中的一些数据发布到外部 ASP。

我的 curl 命令正在运行：

```
printf 'foo=bar\r\nparameter1=4711\r\nparameter2=4712' | curl --data-binary @- http://example.com/request.asp 
```

如何使用 net/http 执行此操作？

保持参数之间的 '\r\n' 很重要。

到目前为止我的编码：

```
uri = URI.parse('http://example.com/request.asp')

http = Net::HTTP.new(uri.host, uri.port)

req = Net::HTTP::Post.new(url.request_uri)
req.set_form_data(params)
response = http.request(req) 
```

如何设置参数？

我试过这样的事情：

```
params = {
  'foo' => 'bar\r\n',
  'parameter1' => '4711\r\n',
  'parameter2' => '4712'
} 
```

但它不起作用。我需要对其进行编码，但如何编码？

我尝试使用 '\r\n': %0D%0A 的 URL 编码版本，但它不起作用。有没有办法像 curl 一样将它作为二进制发送？

谢谢。

**编辑：感谢您的回答，我找到了解决方案：**

```
uri = URI.parse('http://example.com/request.asp')

http = Net::HTTP.new(uri.host, uri.port)

req = Net::HTTP::Post.new(url.request_uri)
req.body = "foo=bar\r\nparameter1=4711\r\nparameter2=4712"
response = http.request(req) 
```

set_form_data a) 编码和 b) 添加“&”我不需要。直接设置身体是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:19:09.773

只是解决方案的一部分，但您不能在 Ruby 的单引号文本中嵌入转义字符，例如 \r 和 \n：

```
'I like\r\nthe newlines'  # Won't work
"I like\r\nthe newlines"  # Will work 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:58:19.130

如果没关系，`\r\n`除了第一个`=`在 POST 数据中编码的 URL，您可以尝试：

```
params = {
   'foo' => 'bar\r\nparameter1=4711\r\nparameter2=4712'
} 
```

主要问题是什么，摆脱对分隔符`&`还是`\r\n`应该以未编码的方式发送？或两者？

# jquery - 仅适用于 IE 的 JQuery 对话框中的 Iframe 问题

> ID：11263265
> 
> 赞同：2
> 
> 时间：2012-06-29T14:04:32.780
> 
> 标签：jquery, asp.net, iframe, jquery-ui-dialog

我的 asp.net Web 应用程序面临着非常关键的问题，我在其中开发了一个页面并在 Jquery 对话框中使用 iframe 加载该页面。因为当我尝试在 IE 中打开它时，我遇到了与“未定义对象”相关的错误以及许多后续错误，然后在我进行研究后发现对于 IE，我们需要在打开对话框后根据这个[答案](https://stackoverflow.com/questions/1658632/jquery-dialog-iframe-loading-once-in-ie-and-twice-in-other-browsers)分配 iframe src ，我得到了现在在 IE 中打开时的解决方案当我尝试关闭 popup.final 代码时遇到相同的错误，如下所示。

```
<link href="../../App_Themes/Default/jquery-ui.css" rel="stylesheet" type="text/css" />  
    <script src="../../Scripts/jquery.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.preload.js" type="text/javascript"></script>
    <script type="text/javascript" src="../../Scripts/js/ui/ui.core.js">

 <script language="javascript" type="text/javascript">
function openDialog() {

            var $dialog = jQuery('#dialog');
            $dialog.dialog({
                autoOpen: false,
                resizable: false,
                title: 'Register App',
                modal: true,
                height: 500,
                width: 950,
                show: 'puff',
                hide: 'puff',
                close: function (event, ui) {
                    $('#iframeManageApp').attr('src', 'about:blank');
                    $dialog.dialog('close');
                    $dialog.dialog('destroy');
                    if (isReload) {
                        if (isAdd)
                            $("#" + '<%=hdnIsApplicationAdd.ClientID %>').val("true");
                        else
                            $("#" + '<%=hdnIsApplicationAdd.ClientID %>').val("");

                        window.location.reload();
                    }

                },
                open: function (event, ui) {
                    $('#iframeManageApp').attr('src', 'RegisterApplication.aspx');
                }
            });

            $dialog.dialog('open');
        }
    </script> 
```

和对话框 div 如下

```
<div id="dialog" style="display: none; padding-left: 10px; overflow: hidden;">
        <iframe id="iframeManageApp" height="450px" width="910px" 
            frameborder="0" style="overflow: hidden;"></iframe>
    </div> 
```

如果有人确实找到了此类问题的解决方案，请帮助我。IE 关于这个问题应该有什么问题？如果有人对此有替代解决方案，也建议我。

提前致谢。

**更新：**

经过一些研究，我发现这是由于 Iframe 页面中的相同 js 引用导致的问题。我刚刚更改了 Test.aspx 代替 RegisterApplication.aspx 页面，并且在 IE 中没有错误，但是当我在其中添加相同的 js 时，就会出现相同的行为！

```
<script src="../../Scripts/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:44:27.607

我已经通过对对话框选项的一些更改自己解决了这个问题，但找不到发生这种情况的真正原因？

我已经从对话框和对话框的最终代码中删除了 hide='puff' 选项，如下所示

```
 $dialog.dialog({
            autoOpen: false,
            resizable: false,
            title: 'Test',
            modal: true,
            height: 500,
            width: 950,
            show: 'puff',
            close: function (event, ui) {
               -----
               ----- 
```

我认为在关闭事件中它会尝试找到 jquery.min.js 以实现隐藏效果，这应该是我的问题的原因。但是如果有人想重现这个东西，那么你可以通过以下方式来做到这一点

1）根据我的问题打开对话框代码（忽略关闭事件中的重新加载部分）
2）创建另一个测试页面并在其中添加jquery.min.js的引用
3）在javascript的opendialog函数中加载iframe内的测试页面

# objective-c - 按下 UISegmentedControl 时的 UITableView + UITableViewCell

> ID：11263268
> 
> 赞同：1
> 
> 时间：2012-06-29T14:04:38.953
> 
> 标签：objective-c, uitableview, uinavigationcontroller

我想问一个关于 UITableViewCell 的问题。显然，这就是我想要实现的目标。

我有一个页面，我一次显示一个问题。因此，当按下右上角的 UISegmentedController 时，我会显示另一个问题，依此类推。

请参阅附件或此处的图片：http: [//dl.dropbox.com/u/27303579/StackOverflow.jpg](http://dl.dropbox.com/u/27303579/StackOverflow.jpg)

![问题 1 至问题 3](../Images/f332e4ef5fad36f24ebf69251ee12d2f.png)

请注意，我使用 UITableView（组样式）来显示我的问题。问题文本实际上是部分标题。

*所有问题均来自Web Service。

我的问题是：

按下下一个（右上角）按钮时我应该怎么做？我可以做些什么来刷新我的页面？我需要重用当前的 UITableView 还是如何？

非常感谢你们的帮助。我希望我说清楚。真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:10:11.967

按下箭头时，您可以更新填充表格单元格的任何数据结构中的数据，然后调用`[self.tableView reloadData]`. 这将再次触发`UITableViewDataSource`函数，使用数据结构重新填充您的表。当然，`cellForRowAtIndexPath`需要一些处理，以便它知道如何根据它们应该显示的数据来绘制单元格。

# c - 从文件读入字符数组

> ID：11263272
> 
> 赞同：0
> 
> 时间：2012-06-29T14:04:45.050
> 
> 标签：c, arrays, file, char, scanf

我正在尝试将字符串列表从文件读取到数组。在文件中它看起来像这样

```
ItemOne
ItemTwo
ItemThree etc. 
```

我将一个数组声明为：

```
char** array; 
```

并归档为：

```
FILE *read; 
```

这就是我想出的：

```
{
    i = 0;
    printf("Type in the name of the file\n");
    scanf("%s", &name);

    read = fopen(name, "r");
    if (read == NULL)
    {
        perror("Doesn't work");
        return 1;
    }

    else
    {
        array = malloc(100 * sizeof(*array));
        while (!feof(read))
        {
            array[i] = malloc(32 * sizeof(*array[i]));
            fscanf(read, "%s", &array[i]);
            i++;

        }
    }
} 
```

Tt 编译，但是当我尝试显示数组时它是空的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:17:49.573

```
 while (!feof(read))
    {
        array[i] = malloc(32 * sizeof(*array[i]));
        fscanf(read, "%s", array[i]); //You should pass a pointer to a pointer to array of chars
        i++;
    } 
```

我希望它会工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:10:11.603

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

long GetFileSize(FILE *fp){
    long fsize = 0;

    fseek(fp,0,SEEK_END);
    fsize = ftell(fp); 
    fseek(fp,0,SEEK_SET);//reset stream position!!

    return fsize;
}

char *ReadToEnd(const char *filepath){
    FILE *fp;
    long fsize;
    char *buff;

    if(NULL==(fp=fopen(filepath, "rb"))){
        perror("file cannot open at ReadToEnd\n");
        return NULL;
    }
    fsize=GetFileSize(fp);
    buff=(char*)malloc(sizeof(char)*fsize+1);
    fread(buff, sizeof(char), fsize, fp);
    fclose(fp);
    buff[fsize]='\0';

    return buff;
}

char** split(const char *str, const char *delimiter, size_t *len){
    char *text, *p, *first, **array;
    int c;
    char** ret;

    *len = 0;
    text=strdup(str);
    if(text==NULL) return NULL;
    for(c=0,p=text;NULL!=(p=strtok(p, delimiter));p=NULL, c++)//count item
        if(c==0) first=p; //first token top

    ret=(char**)malloc(sizeof(char*)*c+1);//+1 for NULL
    if(ret==NULL){
        free(text);
        return NULL;
    }
    strcpy(text, str+(first-text));//skip until top token
    array=ret;

    for(p=text;NULL!=(p=strtok(p, delimiter));p=NULL){
        *array++=strdup(p);
    }
    *array=NULL;
    *len=c;
    free(text);
    return ret;
}

void free4split(char** sa){
    char **array=sa;

    if(sa!=NULL){
        while(*sa)
            free(*sa++);//for string
        free(array);    //for array
    }
}

int main(){
    char *text, **lines;
    size_t line_count;

    text=ReadToEnd("data.txt");
    lines=split(text, "\r\n", &line_count);
    free(text);
    {   //test print
        int i;
        for(i=0;i<line_count;++i)
            printf("%s\n", lines[i]);
    }
    free4split(lines);

    return 0;
} 
```

# c++ - mysql/mysql.h C++ 错误

> ID：11263273
> 
> 赞同：0
> 
> 时间：2012-06-29T14:04:49.200
> 
> 标签：c++, mysql, linux

这是我用于 mysql 插入的 c++ 代码的片段。我找到了一个如何使用 mysql.h 的示例。程序运行良好，直到我为 mysql 添加以下内容。我是 C++ 新手，并且在其他代码中找到了相同的示例，只是无法指出问题我添加了 mysql/mysql.h 而不仅仅是 mysql.h 以及 -i 和 -l 以按照建议进行编译在网上，仍然没有运气。任何帮助，将不胜感激。

```
#include    <mysql/mysql.h>

string unknown = "Unknown"

MYSQL *conn;

conn = mysql_init(NULL);
mysql_real_connect(conn, "localhost", "root", "password", "alert", 0, NULL, 0);

mysql_query(conn, "INSERT INTO alert_tbl (alert_srcip, alert_country, alert_destip, alert_desthost, alert_destport, alert_bl) VALUES ('%s','%s','%s','%s','%s','%s')", src_ip,country_code,dest_ip,unknown,dest_prt,blip);

mysql_close(conn); 
```

g++ test.c -o test -lstdc++ -I/usr/include/mysql -L/usr/lib/mysql -lmysqlclient

test.c：错误：预期，或；MYSQL 之前

test.c：错误：未在此范围内声明 conn

test.c：错误：未在此范围内声明 conn

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:05:55.687

缺少分号：

```
string unknown = "Unknown"; 
```

调用的`mysql_query`参数太多；它不是“printf”风格的函数。您可以使用 sprintf 到一个单独的缓冲区，冒[sql 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)的风险。您应该使用[参数化查询](http://dev.mysql.com/doc/refman/5.0/en/c-api-prepared-statements.html)。

# c# - C# Excel COM 互操作：产生太多进程

> ID：11263274
> 
> 赞同：1
> 
> 时间：2012-06-29T14:04:49.603
> 
> 标签：c#, excel, interop, com-interop

我编写了一个输出到 Excel 文件的 winform 应用程序。但是，之后我无法正确清理，因为我总是以太多的 Excel 进程运行而告终。下面是创建和销毁代码：

```
Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
Workbook wb = xlApp.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
Worksheet ws = (Worksheet)wb.Worksheets[1];
...
wb.Close();
xlApp.Quit(); 
```

有人能告诉我我错过了什么吗？

问候。

# r - R获得概率分布

> ID：11263276
> 
> 赞同：1
> 
> 时间：2012-06-29T14:05:03.347
> 
> 标签：r

我有一个关系：y = a + b + c

我有 a、b 和 c 的平均值和标准偏差，我想通过蒙特卡罗模拟从中获得 y 的概率分布。

有没有可以用来执行此操作的功能或包或简单方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:12:38.433

我假设您假设您的输入 a、b 和 c 是正态分布的，因为您说您可以用均值和标准差来定义它们。如果是这种情况，您无需任何特殊软件包即可快速完成此操作。

```
 mu.a=33
 mu.b=32
 mu.c=13
 sigma.a=22
 sigma.b=22
 sigma.c=222

n= a.large.number=10^5
a=rnorm(n,mu.a,sigma.a)
b=rnorm(n,mu.b,sigma.b)
c=rnorm(n,mu.c,sigma.c)
y=a+b+c
plot(density(y))
mean(y)
sd(y) 
```

确保了解我们对`y`、`a`和所做`b`的所有假设`c`。如果你想做一些更复杂的事情，比如找出 y 平均值的抽样方差。然后多次执行此过程，收集平均值并绘制它。

```
mysimfun=function(n,mu,sigma,stat.you.want='mean') 
   #  mu is length 3 and sigma is too.

{
n= a.large.number=10^5
    a=rnorm(n,mu[1],sigma[1])
    b=rnorm(n,mu[2],sigma[2])
    c=rnorm(n,mu[3],sigma[3])
    y=a+b+c
    plot(density(y))

return(ifelse(stat.you.want=='mean',mean(y),sd(y))
}

mu=c(mu.a,my.b,mu.c)
sigma=c(sigma.a,sigma.b,sigma.c)
mi=rep(NA,100) 
```

然后在某种循环中运行它。

```
for(i in 1:100) {mi[i]=mysimfun(10,mu,sigma,stat.you.want='mean') }

par(mfrow=c(2,1)
hist(mi)
plot(density(mi))

mean(mi)
sd(mi) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T16:28:14.997

将有两种方法：我认为引导，我认为这可能是 MonteCarlo 的意思，或者如果您对理论比从经验分布构建估计值更感兴趣，“distr”包及其朋友“disstrSim”和“distrTEst”。

```
require(boot)
ax <- rnorm(100); bx<-runif(100); cx<- rexp(100)
dat <- data.frame(ax=ax,bx=bx,cx=cx)

boot(dat, function(d){ with(d, mean(ax+bx+cx) )}, R=1000,  sim="parametric")
boot(dat, function(d){ with(d, sd(ax+bx+cx) )}, R=1000,  sim="parametric") 
```

# c# - 在 C# 中使用 Google REST API 刷新 Google 令牌

> ID：11263278
> 
> 赞同：3
> 
> 时间：2012-06-29T14:05:12.160
> 
> 标签：c#, asp.net-mvc, rest, google-api, google-calendar-api

我想知道是否有人解决了管理 Google OAuth2 令牌的过期问题？

下面的示例是一个 REST 调用，用于获取具有有效令牌的日历列表。如果令牌已过期，我将收到 401 响应，并且需要使用存储在我的数据库中的“刷新令牌”来刷新令牌。我想知道是否有人为他们的 Web 应用程序制定了策略？

```
 var httpContent = new HttpRequestMessage(HttpMethod.Get, "https://www.googleapis.com/calendar/v3/users/me/calendarList");
            httpContent.Headers.Add("Authorization", "OAuth " + token);
            responseBody = client.SendAsync(httpContent).Result.EnsureSuccessStatusCode().Content.ReadAsStringAsync().Result; 
```

我考虑过在用户登录时自动刷新并保存会话中加密的刷新令牌，但不确定是否有更好的策略。

//笔记策略选项：

1 - 登录用户后，刷新用户的所有 OAuth 令牌。假设会话永远不会持续超过令牌超时期限，则此方法有效。（可能对所有 OAuth 服务器都不可靠）。

2 - 刷新时，使用令牌过期在数据库中记录过期日期/时间。在调用任何 API 之前，请检查令牌是否需要刷新。（仍然需要考虑令牌在正常到期计划之外意外到期的边缘情况）

3 - 捕捉呼叫的响应状态并检查 401s。如果收到 401，请刷新令牌并重试。这可能是两个选项 1/2 的故障转移。此示例的代码将在此处：

```
 var restClient = new RestClient();
        var request = new RestRequest("https://www.googleapis.com/calendar/v3/users/me/calendarList", Method.GET);
        request.AddHeader("Authorization", "OAuth " + token);

        // execute the request
        var response = restClient.Execute(request);
        if (response.StatusCode == HttpStatusCode.Unauthorized)
        {
            var newToken = RefreshGoogleToken(token);
            request = new RestRequest("https://www.googleapis.com/calendar/v3/users/me/calendarList", Method.GET);
            request.AddHeader("Authorization", "OAuth " + newToken);

            // execute the request
            response = restClient.Execute(request);
        }
        var content = response.Content; // raw content as string
        dynamic responseJson = JsonValue.Parse(content);

        var calendarList = new List<GoogleCalendar>();
        foreach (var item in responseJson.items)
        {
            var calendar = new GoogleCalendar { Kind = item.kind, Etag = item.etag, Id = item.id, Title = item.summary, Description = item.description, Location = item.location, Timezone = item.timeZone, SummaryOverride = item.summaryOverride, ColorId = item.colorId, AccessRole = item.accessRole };
            if (item.defaultReminders != null)
            {
                calendar.DefaultReminders = new List<GoogleCalendarReminder>();
                foreach (var reminder in item.defaultReminders)
                {
                    var rem = new GoogleCalendarReminder { Method = reminder.method, Minutes = reminder.minutes };
                    calendar.DefaultReminders.Add(rem);
                }
            }

            calendarList.Add(calendar);
        }

        return calendarList;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:11:48.573

如果知道过期时间，您可以跟踪令牌的过期时间并预计它已经过期，然后在那个时候进行刷新。

我想你也可以简单地通过刷新来响应 401 错误，甚至在到期跟踪发生失败时作为故障保险（只要确保添加代码以避免陷入循环）。

# php - 是否可以在 Opencart 中制作持久购物车

> ID：11263285
> 
> 赞同：1
> 
> 时间：2012-06-29T14:05:35.907
> 
> 标签：php, opencart, cart

我想在由 Opencart 提供支持的商店中制作持久购物车。换句话说，如果用户将产品添加到购物车并且用户尚未登录。但是下次当客户在一周内再次访问网站时，他的产品应该在他的购物车中。

仅当用户从购物车或结帐中明确删除产品时或一周后才应删除产品。

我认为这可以通过使用cookies来完成？帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:25:41.093

有一个非常简单的方法可以做到这一点。

此修改适用于 OC 1.4.XX 和 OC 1.5.XX

这是如何完成的：

在主目录中，找到 system/library/session.php

你会发现一行写着：

session_set_cookie_params(0, '/');

对于 24 小时 cookie，将行更改为：

session_set_cookie_params(60*60*24, '/');

您将一分钟内的秒数乘以一小时内的分钟数乘以一天中的小时数，您希望将 cookie 设置为。

这不是一个真正的持久性 cookie，而是一个非常长的会话 cookie，正如 Jay Gilford 所指出的，使用 OpenCart 创建持久性 cookie 没有[简单] 方法，如果我们想办法做到这一点，我们会让你们都知道。并且因为 OpenCart 将此 cookie 视为会话 cookie，所以无论会话多长时间，只要 cookie 尚未过期，它就不会自动更新 cookie 为新的过期日期。

扩展会话 cookie 的一个无害的副作用是，当您登录到管理员页面而之前没有注销时，您会收到“无效令牌”消息。这是因为（扩展的）会话 cookie “记住”了您上次的管理员登录。只需忽略这一点并登录。不过还有另一个缺点，即如果产品价格发生变化，并且用户已经将该产品添加到购物篮中，用户将在 24 小时 cookie 中存储之前的价格。

像这样构建 OpenCart 的原因似乎是欧盟的隐私法，该法禁止持久性 cookie，除非注册用户没有注销。在美国和加拿大，许多使用 Opencart 的电子商务网站都受到了硬连线 cookie 政策的不必要负担，这导致他们失去了返回网站的客户，而不得不重新订购。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:39:37.717

在 opencart 中没有 mod 可以做到这一点。如评论部分所述，您最好的选择是使用带有令牌的 cookie 或将会话到期时间设置为长达 7 天（尽管这有它的缺点）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T16:01:23.407

这是错误的：

```
session_set_cookie_params(60*60*24, '/'); 
```

它**应该**是：

```
session_set_cookie_params(time() + 60*60*24, '/'); 
```

无论如何，这会修改核心文件（system/library/session.php），所以真的不是一个完美的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T03:34:58.467

请参阅下一条评论以获取解决方案。

# c# - 使用 EntityFramework 刷新实体时如何检测属性更改？

> ID：11263286
> 
> 赞同：0
> 
> 时间：2012-06-29T14:05:36.233
> 
> 标签：c#, .net, entity-framework, inotifypropertychanged

$大家好，

一个简单的问题，在一个项目中，我想在模型类上引发属性更改事件。模型类使用 Entity Framework ( `ObjectContext.Refresh()`) 加载和刷新。

是否可以修改 EF 生成的属性以包含处理 propertychanged 事件引发的代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:23:09.070

您需要修改类生成器。基于默认`EntityObject`的实体已经实现`INotifyPropertyChanged`。如果您使用 POCO 实体（和 POCO T4 生成器或 DbContext T4 生成器），您只需修改 T4 文件以生成带有引发事件的代码的属性。

# entity-framework - EF CodeFirst 验证唯一复合键

> ID：11263290
> 
> 赞同：1
> 
> 时间：2012-06-29T14:05:47.627
> 
> 标签：entity-framework, entity-framework-4, ef-code-first, data-annotations

我有一个包含 Id 列作为主键的表。还需要在其他两个列上强制唯一性，这两个列实际上是 FK。在 Sql Server 中，我可以在这两列上创建一个 UniqueKey。

我可以在 EF 端做什么，以便它可以验证这两个字段的唯一性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:17:29.897

EF 不支持唯一键，因此您最好的解决方法是在数据库中使用唯一键并在保存期间捕获异常。如果您需要 EF 在创建数据库期间创建唯一键，您可以[使用自定义初始化程序](https://stackoverflow.com/questions/5701608/unique-key-with-ef-code-first/5701702#5701702)。

如果您想在应用程序中进行一些验证，您将需要执行一些查询并检查这些数据是否尚不存在，但您仍然需要使用前一个通知来捕获异常，因为另一个线程/进程/用户可以创建这样的查询和保存更改之间的数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T14:17:54.530

在您的 POCO 类中，将需要唯一的每一列标记为 Key。如：

```
public MyPocoClass {
   [Key, Column(Order = 0)]
   public int Id { get; set; }

   [Key, Column(Order = 1)]
   public int Col2name { get; set; }

   [Key, Column(Order = 2)]
   public int Col3name { get; set; }
} 
```

设置列顺序很有用，以便您的主键列全部显示在 sql db 中。

如果这些列是其他实体框架代码第一类的外键，则只需将该属性命名为 tablename_tableId，其余的将由 EF 完成。IE

```
public anotherClass {
       public int Id { get; set; }

       public int MyPocoClass_Id { get; set; } //this is a foreign key

    } 
```

# mysql - MySQL中的整数除法

> ID：11263294
> 
> 赞同：18
> 
> 时间：2012-06-29T14:05:57.560
> 
> 标签：mysql, sql, select, sqldatatypes

我有一个 MySQL 表，它有一个`product_id`字段（大整数）

> `1102330008` `1102330025` `1102330070` `1103010009` `1103010010` `1103020006` ...

我想选择具有`product_id = 110301****`. 我尝试使用此查询：

```
SELECT * FROM `product` WHERE (product_id/10000)=110301 
```

但它不会通过此消息返回任何值：

> `MySQL returned an empty result set (i.e. zero rows). ( Query took 0.0005 sec )`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-06-18T15:23:11.497

使用[`DIV`运算符](http://dev.mysql.com/doc/refman/5.0/en/arithmetic-functions.html#operator_div)。

```
mysql> SELECT 5 DIV 2;
    -> 2 
```

> 整数除法。类似于 FLOOR()，但使用 BIGINT 值是安全的。超出 BIGINT 范围的非整数操作数可能会出现不正确的结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-29T14:08:40.773

```
SELECT *
FROM product
WHERE product_id BETWEEN 1103010000
                     AND 1103019999 
```

如果您想在 PHP 中创建您的查询，那么您可以像这样构建您的查询

```
$sql = "
    SELECT *
    FROM product
    WHERE product_id BETWEEN {$product_id_range}0000
                         AND {$product_id_range}9999  
"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T14:08:16.210

```
SELECT * 
  FROM `product` 
 WHERE `product_id` >= 1103010000 
   AND `product_id` <= 1103019999 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T14:11:20.620

[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)说它`LIKE`也使用索引，所以我认为你也可以使用：

```
SELECT *
FROM `product`
WHERE product_id LIKE '110301____' -- four undersores as biziclop suggested 
```

**编辑：**要修复您自己的查询，您需要使用`FLOOR()`（[文档](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_floor)），因为它会产生如下结果：

```
1103010006 / 10000 
```

结果 110301,0006 不等于`110301`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T22:34:50.943

您可以像这样使用 MySQL 整数除法运算符[DIV](http://dev.mysql.com/doc/refman/5.6/en/arithmetic-functions.html#operator_div)：

```
SELECT * FROM `product` WHERE (product_id DIV 10000)=110301 
```

对于 BIGINT 也很安全。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T14:55:25.190

[我认为MYSQL Documentation](http://dev.mysql.com/doc/refman/5.0/en/arithmetic-functions.html)解释了为什么会发生这种情况；

> 仅当在结果转换为整数的上下文中执行除法时，才使用 BIGINT 算术计算除法。

因此，如果将结果转换为整数，它可能会起作用。

**编辑：** 试试

```
SELECT * FROM `product` WHERE cast((product_id/10000) as int) = 110301 
```

# javascript - 在backbone.js中触发任一事件但不能同时触发

> ID：11263295
> 
> 赞同：1
> 
> 时间：2012-06-29T14:05:57.937
> 
> 标签：javascript, backbone.js, backbone-events

我正在模拟一个待办事项列表，其中文本字段的值在失去焦点或用户按下回车时保存在模型中。

```
//view etc.
events:{
    "blur .task": "doneEditing",
    "keypress .task": "doneEditing"
},
doneEditing: function(e){
    if(e.which && e.which != 13) return;
    e.preventDefault();
    //model saving code
} 
```

问题是按键输入触发doneEditing，然后模糊发生并再次触发doneEditing。我可以使用一些技巧来找到解决方法，但我想知道骨干是否有办法只触发任一事件中的一个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:28:54.317

如果这两个事件发生在很短的时间间隔内，你可以使用`underscore.js`库的（Backbone 的硬依赖，所以无论如何你都会拥有它）`throttle`- 方法来在短时间内停止过多的调用。这是[文档](http://underscorejs.org/#throttle)的链接。

还有一个例子：

```
doneEditing: _.throttle(function(e) {
  // Copy your event handling here
}, 100), // The number here defines the time threshold within which the function can be called only once 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:08:50.600

使用`e.stopPropagation()`或仅返回`false`（它同时调用jQuery`preventDefault`和`stopPropagation`as of jQuery）。DOM 事件传播超出了 Backbone 的范围，对于这么简单的事情，不需要帮助程序。

# c# - 从 byte[] 中删除尾随零？

> ID：11263297
> 
> 赞同：5
> 
> 时间：2012-06-29T14:06:02.983
> 
> 标签：c#, arrays, byte

我正在使用 TCP 协议并从套接字读取并将数据写入 byte[] 数组。
这是我的数据示例：

```
94 39 E5 D9 32 83
D8 5D 4C B1 CB 99 
08 00 45 00 00 98 
41 9F 40 00 6C 06 
9C 46 26 50 48 7D 
C0 A8 01 05 03 28 
```

我创建了一个大小为 1024 的 byte[] 数组。现在我使用此方法从中删除空索引：

```
public void Decode(byte[] packet)
{
    byte[] temp;
    int c = 0;
    foreach(byte x in packet)
        if (x != 0)
            c++;
    temp = new byte[c];
    for (int i = 0; i < c; i++)
        temp[i] = packet[i];
    MessageBox.Show(temp.Length.ToString());
} 
```

但它也删除了可能有用数据的 0x00 索引...
如何删除未用非零数据包装的 0（尾随 0）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-01T09:25:01.013

这是从数组中修剪尾随零的非常短而快速的功能。

```
public static byte[] TrimEnd(byte[] array)
{
    int lastIndex = Array.FindLastIndex(array, b => b != 0);

    Array.Resize(ref array, lastIndex + 1);

    return array;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-29T14:20:15.643

您应该修复从 TCP 套接字读取的代码，这样您就不会读取您打算在之后丢弃的东西。这对我来说似乎是一种浪费。

但是要回答您的问题，您可以开始以相反的顺序计数，直到遇到非零字节。一旦确定了这个非零字节的索引，只需从源数组复制到目标数组：

```
public byte[] Decode(byte[] packet)
{
    var i = packet.Length - 1;
    while(packet[i] == 0)
    {
        --i;
    }
    var temp = new byte[i + 1];
    Array.Copy(packet, temp, i + 1);
    MessageBox.Show(temp.Length.ToString());
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-05T18:20:52.310

有一个很好的单行解决方案纯 LINQ：

```
 public static byte[] TrimTailingZeros(this byte[] arr)
    {
        if (arr == null || arr.Length == 0)
            return arr;
        return arr.Reverse().SkipWhile(x => x == 0).Reverse().ToArray();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T14:21:18.607

由于您无法根据定义缩小数组的大小，因此您必须改用动态数据结构。

以列表为例

```
List<byte> byteList; 
```

遍历您的字节数组并将每个值 != 0 添加到 byteList。当您到达 byteArray 中的数据末尾时，中断迭代并丢弃数组并从现在开始使用 byteList。

```
for (int i = 0; i <= byteArray.Length; i++) {

    if (byteArray[i] != 0) {

        byteList.Add(byteArray[i]);
    } else {

         break;
    }

} 
```

如果你想使用一个数组，你可以直接从你的列表中创建一个

```
byte[] newByteArray = byteList.ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:21:25.483

所以你想修剪最后的`0x00`s 并将其复制到一个新数组中？那将是：

```
int endIndex = packet.Length - 1;
while (endIndex >= 0 && packet[endIndex] == 0)
    endIndex--;

byte[] result = new byte[endIndex + 1];
Array.Copy(packet, 0, result, 0, endIndex + 1); 
```

虽然当然最后也可能有某种有效`0x00`的 s 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T15:01:59.827

实际上非常接近的例子是在 MSDN 网站上给出的。真正的 C# 4.5 风格 - 带有`Predicate<T>`. 如果你愿意，你可以试试（虽然正确答案已经提交）

[MSDN：谓词委托](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)

PS我仍在等待Linq风格的答案`Select()`，`.ToList<byte[]>()`最后

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-22T14:21:27.573

```
Byte[] b = new Byte[1024]; // Array of 1024 bytes

List<byte> byteList; // List<T> of bytes

// TODO: Receive bytes from TcpSocket into b

foreach(var val in b) // Step through each byte in b
{

    if(val != '0') // Your condition
    {
    }
    else
    {
        bytelist.Add(val); //Add the byte to the List
    }
}
bytelist.ToArray(); // Convert the List to an array of bytes 
```

# c# - C# 中的 Magento API 检索所有订单项

> ID：11263301
> 
> 赞同：1
> 
> 时间：2012-06-29T14:06:09.837
> 
> 标签：c#, api, magento

我在检索订单的项目列表时遇到问题。我可以提取订单号，但不能提取订购的产品。我在 C# Visual Studio 中运行 Magento API。我的代码如下所示：

```
class Program
{
    //Mage_Api_Model_Server_V2_HandlerPortType handler = new Mage_Api_Model_Server_V2_HandlerPortType();
    static void Main(string[] args)
    {
        Mage_Api_Model_Server_V2_HandlerPortTypeClient handler = new Mage_Api_Model_Server_V2_HandlerPortTypeClient();
        try
        {
            //initiate connection
            string session = handler.login("tauren_SOAP", "test123");
            filters mf = new filters();

            /* expiriment to grab order items */
            string order_id = "";
            salesOrderListEntity[] soe = handler.salesOrderList(session, mf);
            foreach (salesOrderListEntity msoe in soe)
            {
                try
                {
                    order_id = msoe.increment_id;
                    Console.WriteLine("Order Id: " + order_id);
                    orderItemIdQty itm = new orderItemIdQty();
                    Console.WriteLine(itm.qty);

                    Console.WriteLine("-----------------------");
                }
                catch (Exception exp)
                {
                    Console.WriteLine(exp.ToString());
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }

        //prompt for exit
        Console.WriteLine("Finshed. Press Return to Exit...");
        Console.ReadLine();
    } 
```

如果您需要更多信息，请告诉我。提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:50:07.593

您需要迭代 order.items ...

foreach（msoe.items 中的 salesOrderItemEntity OrderDetail）{ ... }

# java - 了解 Hibernate：JDBCExceptionReporter | 参数索引无效

> ID：11263302
> 
> 赞同：0
> 
> 时间：2012-06-29T14:06:24.283
> 
> 标签：java, hibernate

每当我尝试更新数据库中的特定信息时，我都会收到以下错误，我现在一直在网上寻找很多东西，但我无法找到任何地方来解释究竟是什么错误以及导致此错误的原因

```
2012-06-29 14:50:02,193 [project] ERROR [http-8080-2] JDBCExceptionReporter | Invalid parameter index 57.
2012-06-29 14:50:02,209 [project] ERROR [http-8080-2] AbstractFlushingEventListener | Could not synchronize database state with session
org.hibernate.exception.SQLGrammarException: could not update: [com.company.project.PSDBusinessAssociate#18962]
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at      org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2360)
at  org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2242)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2542)
at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:92)
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:248)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:232)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:655)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:709)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:678)
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:321)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:116)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:635)
at com.fexco.wuams.service.dwr.BusinessAssociateFormService$$EnhancerByCGLIB$$cb75a250.updateBusinessAssociate(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.directwebremoting.impl.DefaultRemoter$1.doFilter(DefaultRemoter.java:740)
at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:744)
at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:593)
at org.directwebremoting.dwrp.BaseCallHandler.handle(BaseCallHandler.java:90)
at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:120)
at org.directwebremoting.servlet.DwrServlet.doPost(DwrServlet.java:141)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:265)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:72)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:124)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.util.FilterChainProxy.doFilter(FilterChainProxy.java:149)
at org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:228)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:212)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:818)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:624)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:445)
at java.lang.Thread.run(Thread.java:619)
Caused by: java.sql.SQLException: Invalid parameter index 57.
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.getParameter(JtdsPreparedStatement.java:255)
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.setParameter(JtdsPreparedStatement.java:326)
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.setLong(JtdsPreparedStatement.java:509)
at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setLong(NewProxyPreparedStatement.java:703)
at org.hibernate.type.LongType.set(LongType.java:42)
at org.hibernate.type.NullableType.nullSafeSet(NullableType.java:83)
at org.hibernate.type.NullableType.nullSafeSet(NullableType.java:60)
at org.hibernate.type.ManyToOneType.nullSafeSet(ManyToOneType.java:78)
at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:1932)
at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2306)
... 57 more 
```

这出现在我屏幕上的错误输出中

```
could not update: [com.company.project.dataobject.PSDBusinessAssociate#18962]; nested exception is org.hibernate.exception.SQLGrammarException: could not update: [com.company.project.dataobject.PSDBusinessAssociate#18962] 
```

所以我的问题是这个错误到底是什么意思，是什么导致这个错误发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:25:35.687

这看起来像休眠生成的 SQL 无效。这通常意味着您的映射不正确（例如不正确的列/表名称）。调试 SQL Grammer 异常的一个好方法是在 SessionFactory 中设置 hibernate.show_sql=true 和 hibernate.format_sql=true。Hibernate 会将生成的 sql 输出到控制台供您验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:57:47.243

您是否尝试过通过 Hibernate 命令重建数据库？（我知道Netbeans允许你这样做，不知道它是否`ant`在幕后运行脚本......）看看它是否有效？

也许有人在您不知道（或您自己！）的情况下手动编辑了数据库，并且 Hibernate 发现一个与访问数据库时预期不同的表结构......

# lucene - Lucene 3.6.0 - SnowballAnalyzer Stemmer 已弃用

> ID：11263306
> 
> 赞同：0
> 
> 时间：2012-06-29T14:06:38.260
> 
> 标签：lucene, stop-words

今天我试图在 Lucene Java API v3.6.0 上使用**SnowballAnalyzer**，但它似乎已经过时了。当我尝试在我的代码上使用分析器时，代码在到达分析器时停止。其实我想用 PorterStemmer 但在 luce 上没有，所以我决定用这个雪球，但是出现了这个问题。

任何人都知道如何解决这个问题？

另外，有谁知道如何**设置停用词文件格式**，因为当我输入：

```
a
as
able
about
above
according
accordingly
across
actually
after
afterwards
.
.
. 
```

在*stopword.txt*中，调用它，程序停止。谁能与我分享如何格式化*stopword.txt*文件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:37:34.497

被弃用不能使您的代码停止运行。你肯定有其他问题。

您的 stopword.txt 似乎格式正确。

# ruby-on-rails - Rails：修改简单静态页面的好方法？

> ID：11263307
> 
> 赞同：1
> 
> 时间：2012-06-29T14:06:45.357
> 
> 标签：ruby-on-rails, gem, edit, administration, static-pages

有没有办法让管理员修改简单静态页面的内容？

我知道我可以创建一个具有“标题”、“内容”、“图像”等属性的“页面”模型，并让管理员修改它们。但是这样的事情有宝石吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:16:27.970

我找到了一种不同的解决方案，它为我提供了一种更完整的方式来修改静态页面。

由于页面可能与简单文本不同，我使用[Mercury](http://jejacks0n.github.com/mercury/)编辑器。观看页面中的演示。有一个很好的[railscast](http://railscasts.com/episodes/296-mercury-editor)，但**不要太严格地遵循它，**因为在新版本中发生了一些变化（例如更新方法是saveUrl，而在演员表中称为saveURL）。

**小心！**: github 项目是[这样](https://github.com/jejacks0n/mercury)的，github 上还有一个，但它对我不起作用。希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:13:54.520

[Copycopter](https://github.com/copycopter/copycopter-server)就是为这种事情而创建的。观看[railscast](http://railscasts.com/episodes/336-copycopter)。

# android - 关于最简单的绘图技术的任何想法？

> ID：11263309
> 
> 赞同：-1
> 
> 时间：2012-06-29T14:07:00.287
> 
> 标签：android

我需要创建一个代表 x/y 轴的视图。我将读入 9 组单独的 (x,y) 坐标，并将有 9 个复选框，每组数据一个。当用户按下复选框时，将出现不同的波浪。

我做了研究，发现了三种可能性：google chart、achartengine 和 Canvas。

有没有人知道我可以用什么来最简单地实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:17:56.840

我建议你使用 AChartEngine 而不是画到画布上。[您可以在此处](http://code.google.com/p/achartengine/downloads/list)下载库、javadocs 和演示应用程序。使用 AChartEngine 的主要优点是您不需要数据连接来呈现图表。

youtube 上有关于 AChartEngine 入门的教程。该库是免费和开源的。

# c# - 有没有比 .net 中的 System.Guid.NewGuid() 创建 GUID 更好的选择

> ID：11263310
> 
> 赞同：0
> 
> 时间：2012-06-29T14:07:02.800
> 
> 标签：c#, asp.net, sql, visual-studio-2010, sql-server-2008

在我的应用程序代码中，我使用生成 GUID`System.Guid.NewGuid()`并将其保存到 SQL Server DB。

关于 GUID 生成，我有几个问题：

1.  当我运行程序时，在性能方面我没有发现任何问题，但我仍然想知道我们是否有其他更好的方法来生成 GUID。
2.  `System.Guid.NewGuid()`这是在 .NET 代码中创建 GUID 的唯一方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:12:38.733

`Guid.NewGuid`根据 SQL Server 的排序顺序，生成的 GUID不是连续的。这意味着您将随机插入到索引中，这对性能来说是一场灾难。如果写入量足够小，这可能并不重要。

您可以使用 SQL Server`NEWSEQUENTIALGUID()`函数来创建顺序函数，或者只使用 int。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:12:01.823

生成 guid 的另一种方法（我认为是您的 PK）是像这样设置表中的列：

```
create table MyTable(
    MyTableID uniqueidentifier not null default (newid()),
... 
```

像这样实现意味着您可以选择是在.Net 中设置它们还是让SQL 来做。

不过，我不会说两者都会“更好”或“更快”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T14:52:45.087

要回答这个问题：

> 有没有比 .net 中的 System.Guid.NewGuid() 创建 GUID 更好的选择

我敢说 System.Guid.NewGuid() 是首选。

但是对于后续问题：

> ...将其保存到 SQL 服务器数据库。

答案不太清楚。这在网上已经讨论了很长时间。只需谷歌“ **guid as primary key** ”，您将有数小时的阅读时间。

通常，当您在 Sql 服务器中使用 Guid 时，这是因为在表中用作主键。这有很多不错的优点：

*   无需访问数据库即可轻松生成新值
*   您可以合理地确定您本地生成的 Guid 不会导致主键冲突

但也有明显的缺点：

*   如果主键也是聚集索引，插入大量新行会导致大量的IO（磁盘操作）和索引更新。
*   与代理键的另一种流行替代方法 int 相比，Guid 相当大。由于表上的所有其他索引都包含聚集索引键，因此如果您有 Guid 与 int，它们的增长速度会更快。
*   这也将导致更多 IO，因为这些索引将需要更多内存

为了缓解 IO 问题，Sql Server 2005 引入了一个新的 NEWSEQUENTIALGUID() 函数，可用于在插入新行时生成顺序 Guid。但是，如果您打算使用它，那么您将必须与数据库联系才能生成一个，因此您在离线时失去了生成一个的可能性。在这种情况下，您仍然可以生成一个普通的 Guid 并使用它。

网上也有很多关于如何滚动自己的顺序指南的文章。一个样本：

[http://www.codeproject.com/Articles/388157/GUIDs-as-fast-primary-keys-under-multiple-database](http://www.codeproject.com/Articles/388157/GUIDs-as-fast-primary-keys-under-multiple-database)

我没有测试过它们中的任何一个，所以我不能保证它们有多好。我选择了那个特定的样本，因为它包含一些可能很有趣的信息。具体来说：

> 它变得更加复杂，因为 Microsoft SQL Server 的一个怪癖是它根据最低有效六个字节（即 Data4 块的最后六个字节）对 GUID 值进行排序。因此，如果我们想创建一个用于 SQL Server 的顺序 GUID，我们必须将顺序部分放在末尾。大多数其他数据库系统一开始就需要它。

**编辑**：由于问题似乎是关于使用批量复制插入大量数据，因此可能需要一个顺序 Guid。如果在插入之前不需要知道 Guid 值，那么**Jon Egerton**的答案将是解决问题的一种好方法。如果您需要事先知道 Guid 值，则必须生成顺序 Guid 以在插入时使用或使用解决方法。

一种可能的解决方法是更改​​表以使用种子 INT 作为主键（和聚集索引），并将 Guid 值作为具有唯一索引的单独列。插入时，Guid 将由您提供，而种子 int 将是聚集索引。然后将按顺序插入行，您生成的 Guid 仍可用作稍后获取记录的备用键。我不知道这是否对您来说是一个可行的解决方案，但它至少是一种可能的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:17:51.663

`NewGuid`将是通常推荐的方式 - 除非您需要顺序值，在这种情况下，您可以 P/Invoke 到 rpcrt 函数[UuidCreateSequential](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379322%28v=vs.85%29.aspx)：

```
Private Declare Function UuidCreateSequential Lib "rpcrt4.dll" (ByRef id As Guid) As Integer 
```

（对不起，从 VB 中删除，请确保您可以[根据需要](http://pinvoke.net/default.aspx/rpcrt4/UuidCreateSequential.html)转换为 C# 或其他 .NET 语言）。

# iphone - 在越狱的全新 iOS 设备上进行测试 - 使用 Xcode？

> ID：11263317
> 
> 赞同：1
> 
> 时间：2012-06-29T14:07:50.583
> 
> 标签：iphone, ios, xcode, jailbreak, provisioning-profile

好的。所以，这里有一些关于我的情况的细节：

*   我有一个全新的**iPhone 4**。
*   iOS 版本已更新至**5.1.1** (9B206)。
*   手机已使用*redsn0w***越狱**。
**   我正在运行**Lion (10.7.4)**和**Xcode 4.3**。*

 *现在，我的问题：

*   我正在创建一个示例测试应用程序，它在模拟器下运行良好。
*   跟随[这里](http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices)的一切，但没有任何结果。
*   还尝试通过管理器启用我的设备（“用作开发设备”）。

当我点击“用作开发设备”时，它一直说...

> “Dr.Kameleon 的 iPhone” 上的 iOS 版本不匹配任何支持使用此 iOS SDK 安装进行开发的 iOS 版本。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；可在此处获得。
> 
> 安装在 Dr.Kameleon 的 iPhone 5.1.1 (9B206) 上的操作系统
> 
> Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 4.2

而当我尝试在我的“iOS 设备”上运行时（它就是这样显示的），它声称没有具有正确 iOS 版本的设备。

> 没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

有任何想法吗？怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T04:12:21.660

此错误不是由于越狱的 iPhone 造成的，它基本上是由于您的 Xcode 版本较低，不支持最新的 iOS，请尝试将您的 Xcode 版本升级到最新版本。
希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T04:57:02.247

看，每个说你不能直接在越狱设备上构建的人都是错误的。你可以，而且很容易做到。如果您没有配置的设备（看起来您没有），使用[本指南](https://stackoverflow.com/a/4180498/862536)即可。我自己在运行 Xcode 4.3 的 Lion 上对其进行了测试（它甚至可以在更高版本上运行，但这些都在 NDA 之下）。

真正的问题似乎是，无论出于何种原因，您都没有 iOS 5.1 SDK - 您使用的是 iOS 5.0 SDK。`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs`您可以通过查看和来确认这一点`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport`。如果您没有看到 5.1 的任何提及，则说明您没有安装它。尝试再次下载并安装 Xcode（我相信现在是 4.3.2），它应该捆绑了 iOS 5.1 SDK。*

# c# - 哪个是最好的将一行插入数据库？

> ID：11263320
> 
> 赞同：3
> 
> 时间：2012-06-29T14:07:55.337
> 
> 标签：c#, asp.net, database, entity-framework

长期以来，我一直在做以下事情：

```
using(var db = new MainContext())
{
    // Create license issue record
    var n = new tblStoreLicenseIssue
    {
        Comment = comment,
        EmailAddress = email,
        Hash = mangled2,
        LicensedTo = name,
        Timestamp = unixTime,
        ValidClaimID = validClaimID
    };

    db.tblStoreLicenseIssues.InsertOnSubmit(n);
    db.SubmitChanges();
} 
```

但我想知道这种方法是否有任何优势：

```
var n = new tblStoreLicenseIssue
{
    Comment = comment,
    EmailAddress = email,
    Hash = mangled2,
    LicensedTo = name,
    Timestamp = unixTime,
    ValidClaimID = validClaimID
};

using(var db = new MainContext())
{
    db.tblStoreLicenseIssues.InsertOnSubmit(n);
    db.SubmitChanges();
} 
```

哪种方法被认为是最佳实践，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:11:47.230

我会选择后者——因为创建对象不使用数据库上下文，所以它不必在`using`构造中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:11:57.690

第二种方法提供的唯一优点是，您可以避免`MainContext`在构造`tblStoreLicenseIssue`失败的情况下构造和处理实例。除此之外，这两个片段是相同的。

# sql-server-2008 - 类型 3 缓慢变化的维度，用于可变数量的替代现实

> ID：11263321
> 
> 赞同：1
> 
> 时间：2012-06-29T14:07:57.577
> 
> 标签：sql-server-2008, ssas, olap, business-intelligence, multidimensional-array

我正在使用带有回写操作的 SSAS 设计自定义 BI 应用程序。基本上，用户想要分析他们的销售代表和区域的当前状态，在“假设”场景中调整区域边界和分配，然后如果他们喜欢该场景的外观，则提交更改。每个用户可以有许多不同的场景来展示他/她的老板，当一个场景被批准时，这将成为销售组织的新当前状态。我将大量使用 ROLAP 和 HOLAP 的组合来实现这一点。

我的老板和我在如何实现场景功能上存在分歧。他对 SSAS 的工作原理进行了行政级别的总结，并利用了他多年构建数据库应用程序的经验，而我已经用 SSAS 进行了数周的试验并阅读了 Kimball 圣经，但我对多维建模仍然相对较新。我只需要一个知道他们在做什么的人来批准、拒绝或调整我的想法，如下所示。

我有许多 2 型 SCD 表，大致如下所示：

```
Create Table SlowlyChangingDimension
(
    SurrogateId Int Identity(1,1) Not Null,
    NaturalId NVarChar(50) Not Null,
    BeginDate DateTime Not Null,
    EndDate DateTime Not Null,
    IsCurrent Bit Not Null,
    IsCommitted Bit Not Null,
    -- Data columns
    Constraint PK_SlowlyChangingDimension Primary Key Clustered (SurrogateId),
    Constraint Ck_SlowlyChangingDimension_DateRange Check (EndDate > BeginDate)
) 
```

我通过适当使用 BeginDate、EndDate 和 IsCurrent 列来维护历史数据。当新数据进来时，我结束对象的当前版本并创建一个新的当前版本。

现在要处理场景，我想添加一个场景表，用于标记 SCD 中对象的特定版本。创建新场景时，我将在 SCD 中使用该场景标记每个对象的已提交版本。由于提交的版本可以通过这种方式存在于多个场景中，因此通过桥接表可以方便地进行 M2M 链接。

现在已经创建了场景并且它的初始状态与提交状态相同，用户可以开始进行更改。更改将作为 IsCommitted = False 的附加当前行存储在 SCD 表中。当进行更改时，场景桥表将被更新，以便它删除到已提交版本的对象的链接，现在链接到新的替代版本的对象。当一个场景被提交时，旧的提交版本被结束，替代的当前版本被提交，场景和它与 SCD 表中行的所有链接都被删除。

对我来说，这听起来很合理。然而，我的老板希望在创建新场景时在运行时创建额外的架构元素，以便场景数据存储在单独的表中并通过单独的多维数据集查看。这让我很反感，因为我很确定在运行时更改模式是一种反模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:15:22.417

尽管理论上可以在运行时以编程方式重新生成 Analysis Services 多维数据集的架构，但您仍然必须等待处理发生 - 对于小型数据集来说这可能非常快，对于大量数据来说可能非常长。然而，在实践中，Analysis Services 旨在具有相对静态的架构。您可以通过添加数据和重新处理多维数据集来处理其他场景 - 甚至通过增量更新来加快速度。预算和预测应用程序通常采用后一种方法——通过数据更改而不是模式更改添加新场景。

# ios - 警告：在正常情况下，_fillInQueueWithExtraSpace:ignoreExistingItems: 不应重新输入

> ID：11263323
> 
> 赞同：6
> 
> 时间：2012-06-29T14:08:04.113
> 
> 标签：ios, video, mpmovieplayercontroller, avfoundation

这是我管理我的视频的课程：

```
#import "video.h"
#import <MediaPlayer/MediaPlayer.h>

@interface video()
{
    MPMoviePlayerController* videoView;
}
@end

@implementation video

static video *sharedSingleton = nil;

+ (video *)sharedSingleton
{
    @synchronized([video class])
    {
        if (!sharedSingleton)
            sharedSingleton = [[super allocWithZone:NULL] init];
        return sharedSingleton;
    }
    return nil;
}

- (id)init 
{
    self = [super init];

    CGRect dimVideo = CGRectMake(0, 0, 472, 400);
    NSURL* videoPath = [[NSBundle mainBundle] URLForResource: @"videoName" withExtension: @"mp4"];

    self->videoView = [[MPMoviePlayerController alloc] initWithContentURL:videoPath];
    [self->videoView.view setFrame:dimVideo];
    [self->videoView prepareToPlay];

    return self;
}

- (void)addVideoOn:(UIView*)view{
    [view addSubview:self->videoView.view];
    [self->videoView play];
}

- (void)removeVideo{
    [self->videoView stop];
    [self->videoView.view removeFromSuperview];
}

@end 
```

但有时播放视频时会出现此错误：警告：在正常情况下，_fillInQueueWithExtraSpace:ignoreExistingItems: 不应重新输入。

问题出在哪里？先感谢您

我注意到一件事：当您在停止和播放之间经过时间时，视频会冻结。我修复了让视频暂停而不是停止的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:02:36.807

以下是我将如何构建您的代码

```
@interface Video : NSObject
@property ( nonatomic, strong, readonly ) MPMoviePlayerController * videoView ;
@end

@implementation Video
@synthesize videoView = _videoView ;

+(Video *)sharedSingleton
{
   static Video * __sharedSingleton ;
   static dispatch_once_t once ;
   dispatch_once( &once, ^{
       __sharedSingleton = [ [ [ self class ] alloc ] init ] ;
   }
   return __sharedSingleton ;
}

-(void)dealloc
{
    [ _videoView stop ] ;
    [ _videoView.view removeFromSuperview ] ;
}

-(void)ensureMoviePlayer
{
   if (!_videoView ) 
   { 
       NSURL* url = [[NSBundle mainBundle] URLForResource:@"videoName" withExtension:@"mp4"];
       _videoView = [[MPMoviePlayerController alloc] initWithContentURL:url];
   }
}

- (void)addVideoOn:(UIView*)view
{
   [ self ensureMoviePlayer ] ;
   self.videoView.view.frame = view.bounds ; // per documentation
   [view addSubview:self.videoView.view];
   [self.videoView play];
}

- (void)removeVideo
{
   [self.videoView stop];
   [ self.videoView.view removeFromSuperview ] ;
}

@end 
```

如果您尝试在父视图中播放特定大小的视频，请查看`AVPlayer`+`AVPlayerLayer`

# android - 蓝牙设备配对问题

> ID：11263330
> 
> 赞同：0
> 
> 时间：2012-06-29T14:08:30.850
> 
> 标签：android, bluetooth

我正在开发一个简单的蓝牙应用程序，我想在其中发送短信。尝试配对设备时遇到问题，它会抛出异常“java.io.IOException：服务发现失败”。有关更多详细信息，我将在此发布代码。在 LG 手机 Android 版本 2.3.3 上移植的应用程序

```
private static final UUID MY_UUID = UUID.fromString("00000003-0000-1000-8000-00805F9B34FB");
BluetoothDevice btDevice = BluetoothActivity.btDevices.get(position).getBtDevice();

clientSocket = btDevice.createRfcommSocketToServiceRecord(MY_UUID);

//Method m = btDevice.getClass().getMethod("createRfcommSocketToServiceRecord", new Class[] { UUID.class } );                   
//clientSocket =(BluetoothSocket) m.invoke(btDevice, MY_UUID);

//Method m = btDevice.getClass().getMethod("createRfcommSocket",new Class[] { int.class }); 
//clientSocket =(BluetoothSocket) m.invoke(btDevice, 1);

if(clientSocket!=null)
{

    if(BluetoothActivity.btAdapter.isDiscovering()){
        BluetoothActivity.btAdapter.cancelDiscovery();

}
//facing issue during paring                        
clientSocket.connect();

tmpOut = clientSocket.getOutputStream();
tmpOut.write("HelloWorld.txt".getBytes());
if(tmpOut!=null){
    tmpOut.close();
}   
} 
```

任何形式的帮助表示赞赏，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:16:13.107

尝试使用此 UUID：

```
fa87c0d0-afac-11de-8a39-0800200c9a66 
```

出于某种原因，这是我可以开始工作的唯一 UUID ......我不知道为什么。

# ios - 在自定义 UITableViewCell 中使用 UISearchBar - 将结果返回给 TableView

> ID：11263331
> 
> 赞同：0
> 
> 时间：2012-06-29T14:08:33.933
> 
> 标签：ios, xcode

我一定对此有心理障碍！

我有一个搜索栏作为自定义 UITableViewCell 的一部分，它是类似 iBooks 的 PDF 书架的一部分。目标是在搜索栏中输入字母时消除书架上的书籍。

我的第一次尝试捕获使用 textDidChange 输入的字符，它在子类 UITableViewCell 中调用。当我得到一个字符时，我使用 NSNotificationCenter 将 searchText 发送到我的 TableView（使用 searchText 显示或隐藏 pdf）。效果很好，除了在通知发布期间键盘被关闭，我需要让它保持正常。

可能的解决方法是

a) 防止键盘在通知发布期间关闭。我不知道这是否可能，或者 b) 以某种方式从 TableView 中调用 textDidChange 方法。委托被分配给 IB 中的子类 UITableViewCell，这是发生心理障碍的地方，我不确定我是否可以将委托移到 TableView，或者 c）我忽略的方法。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:16:38.433

你可以做一些简单的事情，比如在你的 tableviewcell 中有一个指向 viewcontroller 的弱指针。然后你可以调用任何你想要的函数而不使用委托/NSNotificationCenter。只需将其设置在`cellForRowAtIndexPath`.

`@property (nonatomic, weak) UIViewController *parent;`

**编辑：**

为了保持键盘处于活动状态，它看起来像而不是`[tableView reloadData]`

你可以做 ：

```
[tableView beginUpdates];
[tableview endUpdates]; 
```

# javascript - jQuery 动画移动窗口

> ID：11263332
> 
> 赞同：0
> 
> 时间：2012-06-29T14:08:35.147
> 
> 标签：javascript, jquery

如果窗口足够小（您必须向下滚动才能看到滑块）并且单击图像右侧的灰色按钮，则窗口会跳到屏幕顶部。

为什么会这样，我该如何阻止它？

[http://jsfiddle.net/CUFjC/12/](http://jsfiddle.net/CUFjC/12/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:13:40.177

发生这种情况是因为“按钮”是一个链接，当您单击它时，您将被重定向到“#”。尝试替换`<a href="#" class="arrow left">`with`<span class="arrow left"></span>`或任何其他标签，但不要替换`a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:16:36.110

改变

```
$("div#wiseSlider a.arrow").bind('click', function(e){
    e.preventDefault();
    wiseSlider.shouldMove($(this));
}); 
```

[http://jsfiddle.net/CUFjC/14/](http://jsfiddle.net/CUFjC/14/)

# php - 查询量大的网站中的查询日志场景

> ID：11263337
> 
> 赞同：1
> 
> 时间：2012-06-29T14:08:51.287
> 
> 标签：php, mysql, logging, lamp

我面临记录 LAMP（Debian/PHP/MySQL）站点的数据库活动的问题。

这很复杂，因为我希望每个查询都记录在用户启动它们的上下文中，比如知道“谁做了什么”。我承认对 MySQL 的日志记录功能不太了解，但我在查找有关我的特定场景的信息时遇到了问题。

现在我们已经实现了一个`mysql_query()`替换*（我知道，我知道，使用 PDO 和准备好的语句重写代码！）*，它执行查询并将其记录`INSERT DELAYED`在日志表中。

问题是，可以很容易地预测，日志表达到数百万行，其中最旧的行是毫无用处的。另一个问题是，对于每个需要的查询，都会执行两个。部分解决方案是不记录`SELECT`s。

另一种解决方案是使用精美的日志轮换和 gzipping 等内容登录文本文件。但是如何知道运行查询的用户上下文呢？

是否有人实现了一个成功的查询记录器，该记录器还记录已登录的用户并且具有性能意识？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:29:06.210

好吧，这是一个权衡。如果要记录用户活动，它将占用大量空间，并使用更多处理。

我个人记录所有对 PHP 文件的 HTTP 请求（包括 GET、POST、COOKIE 等），而不是 SQL 查询。但这仍然会导致数百万行。我也永远保留它们，因为硬盘空间通常很便宜。当我需要进行审计时，它可能会很慢，但我不需要经常审计。

写入文件只会使分析变得更加困难，并且您仍将在每个请求中处理额外的 IO。

如果空间是一个问题，您可以运行一个 cron 作业来删除所有早于 X 时间量的行。

# ruby - 如何使用 Bundler 在 nginx 下为 Phusion Passenger 定义 PATH？

> ID：11263341
> 
> 赞同：2
> 
> 时间：2012-06-29T14:09:03.800
> 
> 标签：ruby, nginx, passenger

请原谅我对 Ruby 几乎完全无知，但我遇到了 Phusion Passenger 的问题，因为它试图运行依赖于 $PATH 的东西（并且盲目地假设它是定义的和一个字符串）。但是，nginx 显然清除了该变量。

```
Error message:
    private method `split' called for nil:NilClass

...

Backtrace:
#   File                                                       Line  Location
0   /usr/lib64/ruby/gems/1.8/gems/bundler-1.1.0/lib/bundler.rb 254   in `which' 
```

那行写着：

```
 path = ENV['PATH'].split(File::PATH_SEPARATOR).find do |p| 
```

如果有解决方法，我将不胜感激，因为我想尽可能避免使用 Apache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:23:41.237

您是否尝试过在您的 nginx 配置中设置路径？大意是：

```
env  PATH=/some/path/expected:/another/path; 
```

见：[http ://wiki.nginx.org/CoreModule#env](http://wiki.nginx.org/CoreModule#env)

# python - 无法使用鼻子测试运行测试

> ID：11263343
> 
> 赞同：2
> 
> 时间：2012-06-29T14:09:23.213
> 
> 标签：python, django, nosetests

我正在尝试使用nosetests 在我的项目中运行所有测试用例。

我 cd 到我的项目目录：

```
cd projects/myproject 
```

然后我做：

```
nosetests 
```

哪个输出：

```
----------------------------------------------------------------------
Ran 0 tests in 0.001s

OK 
```

在 projects/myproject 我有一个名为 Encode 的包，在包内我有包含测试的 Test 目录：

```
Encode/
    __init__.py
    Video.py
    Ffmpeg.py
    Test/
        VideoTest.py
        FfmpegTest.py 
```

为什么鼻子测试没有检测到我的单元测试？我所有的单元测试类都扩展了 unittest.TestCase。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:47:30.657

从[鼻子文档](http://nose.readthedocs.org/en/latest/writing_tests.html)：

> 默认情况下，与配置的 testMatch 正则表达式 ((?:^|[\b_\.-])[Tt]est) 匹配的任何函数或类 - 即在单词边界处具有 test 或 Test 或在 - 或 _ 之后) 并且存在于也匹配该表达式的模块中，将作为测试运行。

找不到您的测试，因为您的文件名与模式不匹配。例如，将它们更改为 Video_Test.py 或 Test_Video.py。顺便说一句：他们有这样的驼峰名称也很奇怪，但这不会阻止他们工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:22:43.770

`nose`如果它们被埋在子目录中，将找不到您的测试。你应该能够告诉它在哪里看。试试`nosetests --where=Encode/Test`。

# java - BufferedReader 无法读取日志文件中的新行

> ID：11263346
> 
> 赞同：1
> 
> 时间：2012-06-29T14:09:40.333
> 
> 标签：java, file-io, bufferedreader, tail

我正在尝试使用 Java 来实现 Unix tail 实用程序以在添加新行时读取日志文件。日志文件每 15 分钟写入新行。一旦 BufferedReader 到达文件末尾，我让它休眠几分钟，当它醒来时，它会检查文件中是否存在新行。我的代码看起来像这样：

```
String line;
BufferedReader br = new BufferedReader(new FileReader("logfile.log"));
while (alive) {
    line = br.readline();
    if (line != null) {
        processLine(line);
    } else {
        Thread.sleep(1000 * 60 * 5);
    }
} 
```

由于某种原因，在 BufferedReader 第一次读取最后一行后，它将无法检测到该点之后的任何新行。有没有人有任何想法？谢谢！

*** 更新 *** 真正奇怪的是，如果我只阅读当天的日志，这段代码就可以正常工作。但是，如果我阅读前一天，将其关闭，然后打开当天，则存在问题。使用前几天日志中的数据是该程序的要求。

测试代码如下所示：

```
 String yestFile = "\\\\2012\\06\\28\\logfile.log"; 
        String todayFile = "\\\\2012\\06\\29\\logfile.log"; 

        FileWriter out;
        String outputFile = "c:\\temp\\brOut.txt";
        File outFile = new File(outputFile);
        if (!outFile.exists()) {
            outFile.createNewFile();
        }
        out = new FileWriter(outputFile);

        String line;
        String file = yestFile;
        while (true) {
            BufferedReader br = new BufferedReader(new FileReader(file));
            while (true) {
                line = br.readLine();
                if (line != null) {
                    out.write(line + "\n");
                } else {
                    if (file.equals(yestFile)) {
                        br.close();
                        br = null;
                        file = todayFile;
                        break;
                    }
                    Thread.sleep(1000 * 60);
                }
            }
        } 
```

*** 更新 2 *** 感谢所有建议，但我认为最有效的解决方案就是防止在一天结束之前到达文件末尾。日志的每一行都表示该事件发生的时间，所以我只是用它来滞后当前系统时间 20 分钟。

```
long diff = System.currentTimeMillis() - eventCal.getTimeInMillis();
if (diff < _20_MINUTES) {
    Thread.sleep(_20_MINUTES - diff);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:18:34.770

一旦缓冲读取器在第一次到达文件末尾时遇到 EOF 字符，`br.readline()`将永远不会返回除 null 之外的任何内容。

```
String line;
BufferedReader br = new BufferedReader(new FileReader("logfile.log"));
 while (alive) {
     line = br.readLine();
     if (line != null) {
         processLine(line);
     } else {
         Thread.sleep(1000 * 60 * 5);
         br.read();
     }
 } 
```

当然，用 try/catch 包围整个事情

# php - SQL按两列分组和排序

> ID：11263347
> 
> 赞同：3
> 
> 时间：2012-06-29T14:09:43.063
> 
> 标签：php, sql, database, group-by, sql-order-by

> **可能重复：**
> [GROUP BY 中的 SQL ORDER BY 总计](https://stackoverflow.com/questions/2237918/sql-order-by-total-within-group-by)

**更新：我找到了我的解决方案，我已经在[这里](https://stackoverflow.com/a/11264711/1207056)发布了。感谢大家的帮助！**

* * *

我正在开发一个需要排行榜的 Facebook 应用程序。记录完成游戏所用的分数和时间，首先按分数组织，然后在两个相同分数的情况下使用时间。如果用户玩了多次，则使用他们的最佳分数。

分数越低，游戏中的表现越好。

我的表结构是：

```
id
facebook_id - (Unique Identifier for the user)
name
email
score
time - (time to complete game in seconds)
timestamp - (unix timestamp of entry)
date - (readable format of timestamp)
ip 
```

我认为可行的查询是：

```
SELECT *
FROM entries
ORDER BY score ASC, time ASC
GROUP BY facebook_id 
```

我遇到的问题是在某些情况下，它会提取用户在数据库中的第一个分数，而不是他们的最高分。我认为这取决于 GROUP BY 语句。我原以为 ORDER BY 语句会解决这个问题，但显然不是。

例如：

```
----------------------------------------------------------------------------
|  ID  |       NAME       |  SCORE  |  TIME  |  TIMESTAMP  |  DATE  |  IP  |
----------------------------------------------------------------------------
|  1   |  Joe Bloggs      |  65     |   300  | 1234567890  |  XXX   |  XXX |
----------------------------------------------------------------------------
|  2   |  Jane Doe        |  72     |   280  | 1234567890  |  XXX   |  XXX |
----------------------------------------------------------------------------
|  3   |  Joe Bloggs      |  55     |   285  | 1234567890  |  XXX   |  XXX |
----------------------------------------------------------------------------
|  4   |  Jane Doe        |  78     |   320  | 1234567890  |  XXX   |  XXX |
---------------------------------------------------------------------------- 
```

当我使用上面的查询时，我得到以下结果：

```
 1\. Joe Bloggs - 65 - 300 - (Joes First Entry, not his best entry) 
 2\. Jane Doe - 72 - 280 
```

我本来预计...

```
 1\. Joe Bloggs - 55 - 285 - (Joe's best entry)
 2\. Jane Doe - 72 - 280 
```

就像 Group By 忽略了 Order - 只是覆盖了这些值。

使用 MIN(score) 与 group by 选择最低分数，这是正确的 - 但是它合并了用户在数据库中第一次记录的时间，因此经常返回错误。

那么，如何选择用户的最高分以及相关的时间、姓名等，然后按分数排序结果，然后按时间排序？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:15:29.313

您的查询实际上没有意义，因为 order by 应该在 group by 之后。您使用的是什么 SQL 引擎？大多数会给出错误。

我认为你想要的更像是：

```
select e.facebookid, minscore, min(e.time) as mintime -- or do you want maxtime?
from entries e join
     (select e.facebookid, min(score) as minscore
      from entries e
      group by facebookid
     ) esum
     on e.facebookid = esum.facebookid and
        e.score = e.minscore
group by e.facebookid, minscore 
```

您也可以使用窗口函数执行此操作，但这取决于您的数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:16:32.813

你需要降低分数

```
 SELECT
      facebook_id,
      name,
      email,
      min(score) as high_score
    FROM
      entries
    GROUP BY
      facebook_id,
      name,
      email
   ORDER BY
     min(score) ASC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T14:51:39.053

一种方法是：

```
SELECT entries.facebook_id, MIN(entries.score) AS score, MIN(entries.time) AS time
FROM entries
    INNER JOIN (
        SELECT facebook_id, MIN(score) AS score
        FROM entries
        GROUP BY facebook_id) highscores
    ON highscores.facebook_id = entries.facebook_id
    AND entries.score = highscores.score
GROUP BY entries.facebook_id
ORDER BY MIN(entries.score) ASC, MIN(entries.time) ASC 
```

如果您需要条目表中的更多信息，则可以将其用作子查询，并再次加入所显示的信息（facebook_id、分数、时间）以获取每个用户一行。

你需要聚合两次，这才是症结所在；一次找到用户的最低分数，再次找到该用户的最短时间和分数。您可以颠倒聚合的顺序，但我希望这会过滤得最快，因此效率最高。

您可能还想检查哪个更快，第二次聚合：使用最低分数或使用分数进行分组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T15:33:39.340

谢谢你的帮助。@Penguat 有最接近的答案。这是我对可能有同样问题的任何人的最终查询...

```
SELECT f.facebook_id, f.name, f.score, f.time FROM
    (SELECT facebook_id, name, min(score)
    AS highscore FROM golf_entries
    WHERE time > 0
    GROUP BY facebook_id)
AS x
INNER JOIN golf_entries as f
ON f.facebook_id = x.facebook_id
AND f.score = x.highscore
ORDER BY score ASC, time ASC 
```

再次感谢！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T14:13:48.527

如果你想要他们最好的时间，你想使用 MIN() 函数 - 你说分数越低，他们做得越好。

```
SELECT facebook_id, MIN(score), time, name, ... 
FROM entries 
GROUP BY facebook_id, time, name, ...
ORDER BY score, time 
```

# php - 使用 PHP 进行电子邮件开放长度跟踪

> ID：11263348
> 
> 赞同：6
> 
> 时间：2012-06-29T14:09:50.070
> 
> 标签：php

多年来，我一直使用“信标”图像跟踪电子邮件，对于那些允许下载图像的客户，它可以很好地跟踪有多少人打开了电子邮件。

我遇到了服务“DidTheyReadIt”，它显示了客户实际阅读电子邮件的时间，我用他们的免费服务对其进行了测试，它实际上非常接近我打开电子邮件的时间。

我很好奇他们是如何实现跟踪这一点的，我确信无论选择什么解决方案都会给服务器/数据库带来很大的负载，并且许多社区都会回复“停止，不和不要”但我确实想对此进行调查并尝试一下，即使它足以让我在服务器上运行测试并说“不”。

我做了一些谷歌搜索，发现这篇文章有一个基本的解决方案[http://www.re-cycledair.com/tracking-email-open-time-with-php](http://www.re-cycledair.com/tracking-email-open-time-with-php)

我在信标图像页面中使用 sleep() 进行了测试：

```
<?php 

set_time_limit(300); //1000 seconds
ignore_user_abort(false);  

$hostname_api = "*";
$database_api = "*";
$username_api = "*";
$password_api = "*";

$api = mysql_pconnect($hostname_api, $username_api, $password_api) or     trigger_error(mysql_error(),E_USER_ERROR);
mysql_select_db($database_api, $api);

$fileName = "logo.png";

$InsertSQL = "INSERT INTO tracker (FileName,Time_Start,Time_End) VALUES   ('$fileName',Now(),Now()+1)";
mysql_select_db($database_api, $api);
$Result1 = mysql_query($InsertSQL, $api) or die(mysql_error());
$TRID = mysql_insert_id();

//Open the file, and send to user.

$fp = fopen($fileName, "r");
header("Content-type: image/png");
header('Content-Length: ' . filesize($fileName));
readfile($fileName);

set_time_limit(60);
$start = time();

for ($i = 0; $i < 59; ++$i) {

// Update Read Time

$UpdateSQL = "UPDATE tracker SET Time_End = Now()  WHERE TRID = '$TRID'";
mysql_select_db($database_api, $api);
$Result1 = mysql_query($UpdateSQL, $api) or die(mysql_error());

time_sleep_until($start + $i + 1);
}

?> 
```

上面代码的问题（除了每秒更新数据库）是，一旦脚本运行，即使用户断开连接（或在这种情况下移动到另一封电子邮件），它也会继续运行。

我添加了“ignore_user_abort(false);”，但是由于没有与邮件客户端的连接并且标题已经写入，我不认为“ignore_user_abort(false);” 可以开火。

我查看了[跟踪大量电子邮件活动](https://stackoverflow.com/questions/2958926/track-mass-email-campaigns)的帖子，从底部向上的一个“Haragashi”说：

> “您可以简单地构建一个跟踪处理程序，该处理程序逐字节返回跟踪图像。每个字节后刷新响应并休眠一段时间。
> 
> 如果您遇到流关闭异常，则客户端已关闭电子邮件（已删除或更改为另一个知道的电子邮件）。
> 
> 在异常发生时，您知道客户“阅读”电子邮件的时间。”

有谁知道我如何可以像这样“简单地构建一个跟踪处理程序”，或者知道我可以在我的代码中实现的解决方案，该解决方案将在用户断开连接时强制代码停止运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:52:46.727

我认为问题在于您没有经常进行标头重定向。之所以有必要，是因为一旦脚本开始在 PHP+Apache 中执行，它基本上会忽略客户端，直到完成。如果您每隔 X 秒强制进行一次重定向，它会使服务器重新评估客户端是否仍处于连接状态。如果客户端未连接，则无法强制重定向，因此停止跟踪时间。

当我玩这些东西时，我的代码看起来像：

```
header("Content-type: image/gif");
while(!feof($fp)) {
    sleep(2);
    if(isset($_GET['clientID'])) {
        $redirect = $_SERVER['REQUEST_URI'];
    } else {
        $redirect = $_SERVER['REQUEST_URI'] . "&clientID=" . $clientID;
    }
    header("Location: $redirect");
    exit;
} 
```

如果设置了客户端 ID，那么在此代码块上方，我将记录读取数据库中信标的尝试。每次服务器强制重定向时，很容易将电子邮件列上的时间增加 2 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:19:11.750

你会不会做更多这样的事情：

```
<?php
// Time the request
$time = time(); 

// Ignore user aborts and allow the script
// to run forever
ignore_user_abort(true);
set_time_limit(0);

// Run a pointless loop that sometime 
// hopefully will make us click away from 
// page or click the "Stop" button.
while(1)
{
    // Did the connection fail?
    if(connection_status() != CONNECTION_NORMAL)
    {
        break;
    }

    // Sleep for 1 seconds
    sleep(1);
}

// Connention is now terminated, so insert the amount of seconds since start
$duration = time() - $time; 
```

# c++ - 在 ActiveDirectory 和 Sqlite3 之间复制文本数据时的 C++ 问题

> ID：11263351
> 
> 赞同：1
> 
> 时间：2012-06-29T14:10:04.390
> 
> 标签：c++, utf-8, sqlite, active-directory

我编写了一个 C++ 程序来从 MS-Active Directory 中检索一些文本数据并将它们保存到 Sqlite3 数据库中，但是我有一个问题，即 utf-8 编码。

根据一些读数，来自活动目录的数据是 UTF-8 编码的，但是当从 C++ 读取时，它被视为 Sqlite3（默认为 utf-8）不接受为 UTF-8 的“宽字符”（wchar_t），因为它只在其“sqlite3_bind_text”的参数中使用“char”，除非我使用 sqlite3_bind_text16，但我不希望这样做，因为它会增加数据库的大小。

我尝试使用函数“wcstombs_s”将“wchar_t”转换为“char”，但结果数据不正确。

我读到唯一的方法是使用 MultiByteToWideChar 或 WideCharToMultiByte，但我没有尝试，因为我读到转换成本非常昂贵。

我想知道你们中是否有人遇到过类似的情况，并为这个问题找到了一个干净有效的解决方案。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:54:07.763

在使用`sqlite3_bind_text16`UTF-8 编码创建的数据库上使用不会增加其大小，字符串会即时转换为 UTF-8。

[请参阅此页面](http://www.sqlite.org/version3.html)上的“支持 UTF-8 和 UTF-16”段落。

# uiviewcontroller - UITabbarController 动态更改项目

> ID：11263352
> 
> 赞同：1
> 
> 时间：2012-06-29T14:10:11.717
> 
> 标签：uiviewcontroller, uitabbarcontroller, uitabbar, uitabbaritem

我想在视图生命周期内编辑 UITabbarItems。背景是我有一个带有登录视图的应用程序，根据用户是否是管理员，管理员 TabbarItem 应该可见或不可见。

我正在使用此代码在 AppDelegate 中最初创建 UITabbarController：

```
// AppDelegate.m

settings = [[settingsViewController alloc] init];
settings.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"Einstellungen" image:[UIImage imageNamed:@"settings.png"] tag:3];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:readState, friends, settings, nil]; 
```

当我稍后尝试从另一个 UIViewController 操作项目时，什么也没有发生，并且 UITabbar 仍然像以前一样。我实际上尝试了两种我能想象的方法：

```
[[self tabBarController] setToolbarItems:[[[self tabBarController] toolbarItems] arrayByAddingObject:admin] animated:NO];
[[self tabBarController] setViewControllers:[[[self tabBarController] viewControllers] arrayByAddingObject:admin] animated:NO]; 
```

我怎样才能达到我的目标？在此先感谢，致以诚挚的问候，朱利安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T23:35:17.203

我想出了解决我的问题的方法。我不太喜欢导入 AppDelegate，但似乎没有为 UITabbarController 的 UIViewControllers 自动设置 tabbarController 属性。

```
// generate an instance of the needed UIViewController
adminViewController *admin = [[adminViewController alloc] init];
admin.tabBarItem = [[UITabBarItem alloc] initWithTitle:@"Admin" image:[UIImage imageNamed:@"admin.png"] tag:5];

// get the AppDelegate instance
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

// get the »viewControllers« array of the AppDelegates UITabbarController as mutable array
NSMutableArray *viewControllersArray = [NSMutableArray arrayWithArray:[[appDelegate tabBarController] viewControllers]];
// insert the UITabbarItem of the needed UIViewController
[viewControllersArray insertObject:admin atIndex:2];

// Finally tell the app delegates UITabbarController to set the needed viewControllers
[[appDelegate tabBarController] setViewControllers:viewControllersArray animated:NO]; 
```

# sas - 从SAS中的矩阵计算订单统计量

> ID：11263355
> 
> 赞同：0
> 
> 时间：2012-06-29T14:10:24.360
> 
> 标签：sas

我在 SAS/IML 中有一个矩阵：

```
x = {7 6 3 3 8,
     2 3 5 2 5,
     2 6 4 3 8,
     7 4 8 1 3,
     8 8 6 8 7,
     3 2 6 1 5 }; 
```

我想创建一个新矩阵，*其中*包含`x`. 例如，如果*k=3*，我希望结果矩阵包含：

```
8  8  8  8  8 
7  6  6  3  8
7  6  6  3  7 
```

因为，例如，第一列中最大的 3 个数字`x`是 8、7 和 7。

我没有成功地试图弄清楚如何使用**[rank](http://support.sas.com/documentation/cdl/en/imlug/59656/HTML/default/viewer.htm#langref_sect217.htm)**函数来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:09:07.173

你的代码看起来不错。这是一个小修改：

```
do c=1 to ncol(x);   
    r = rank(x[,c]);
    y = x[loc(r>=nrow(x)-k+1), c];
    call sort(y);
    tops[,c] = y;
end; 
```

至于避免循环以使其更快，则没有必要。即使有 10,000 列，此代码也可以在几分之一秒内运行。尝试运行以下时序代码：

```
x = j(500, 10000);
call randgen(x,"normal");
k = 3;
t0=time();
tops = j(k,ncol(x),0);
do c=1 to ncol(x);   
    r = rank(x[,c]);
    y = x[loc(r>=nrow(x)-k+1), c];
    call sort(y);
    tops[,c] = y;
end;
t=time()-t0;
print t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:55:38.070

这是我想出的部分答案：

```
k = 3;
tops = j(k,ncol(x),0);
do c=1 to ncol(x);   
    r = rank(x[,c]);
    h=loc(r>=nrow(x)-k+1);
    tops[,c] = x[,c][h];
end; 
```

这种方法使用了一个循环，我想避免这种情况，所以如果可能的话，请发布改进！

# ruby-on-rails - 继承的康康能力问题

> ID：11263356
> 
> 赞同：0
> 
> 时间：2012-06-29T14:10:31.993
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cancan

我在使用 cancan 限制显示给特定用户组的数据时遇到问题。

我的用户有很多产品。并且产品有很多优惠券。

在我的 routes.rb 我有这个：

```
resources :products do
  resources :vouchers
end 
```

在能力.rb 中：

```
 can [:create, :update, :read ], Voucher, :product => { :user_id => user.id } 
```

在我的凭证控制器中：

```
 def index
  ...
   if params[:product_id]
     @voucher = Voucher.find_all_by_product_id(params[:product_id])
   end
  ...
  end 
```

最后，在我看来，我试图在与当前用户关联的产品组中显示优惠券列表。

例如：

```
 http://localhost:3000/products/eef4e33116a7db/voucher 
```

这列出了产品组中的优惠券，但是，所有用户都可以看到每个优惠券/产品。

我会假设我的能力是错误​​的。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:23:14.060

对于遇到此问题的其他人，我需要在我的凭证控制器中执行以下操作：

```
 @product = Product.accessible_by(current_ability).find(params[:product_id])
 @voucher = @product.vouchers 
```

然而，尽管这确实阻止了其他用户查看结果，但首先使用 access_by 加载产品会导致异常，需要单独的救援块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:55:34.783

查看 can can wiki 以获取记录：[https ://github.com/ryanb/cancan/wiki/Fetching-Records](https://github.com/ryanb/cancan/wiki/Fetching-Records)

如果您正在调用`load_and_authorize_resource`，您将能够执行类似于以下两件事之一的操作：

```
 def index
  ...
   if params[:product_id]
     @vouchers = @vouchers.where(product_id: params[:product_id])
   end
  ...
  end 
```

`load_and_authorize_resource`应该根据该控制器操作的参数自动分配`@vouchers`实例变量。`accessible_by`如果这不起作用，只需更明确地定义它：

```
if params[:product_id]
  @vouchers = Voucher.includes(:product).where(product_id: params[:product_id]).where(product: { user_id: current_user.id })
end 
```

# delphi - ANSI 应用程序和越南代码页

> ID：11263358
> 
> 赞同：0
> 
> 时间：2012-06-29T14:10:36.007
> 
> 标签：delphi, localization, delphi-7

* * *

1.  [如本网站](http://www.sisulizer.com/localization/support/codepages-w7.shtml)所述，我已将系统的代码页更改为俄语
2.  电脑重新启动
3.  然后，我在目录中创建了一个文件，其名称包含特殊的俄语字符
4.  然后，我列出了此目录中的所有文件，并尝试使用典型的 Delphi 7 代码显示该文件：

* * *

```
 SearchRec: TSearchRec;

  FindFirst

  showmessage(SearchRec.Name);

  FindNext(SearchRec);
  FindClose(SearchRec); 
```

代码运行良好。

当我用越南语而不是俄语重做所有 4 个步骤时，显示消息的文件名不正确。反而出现了一些`?`（见截图）：

[![在此处输入图像描述](../Images/fdae15b3eb79fd7a14556b5118af332e.png)](https://i.stack.imgur.com/aTn1o.jpg)

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:20:03.237

这是由于 2009 年之前的 Delphi 版本实现其`string`类型的方式。不是字体的问题，而是字符编码的问题。

所有`string`变量以及所有 Windows API 调用都使用 ANSI 编码执行。使用 ANSI，您一次只能使用一个代码页。为了*混合*代码页（即混合俄罗斯和越南编码），您需要处理文本并调用 UNICODE Windows API。

这是您的案例中发生的情况：

*   您通过 Windows 使用 UNICODE 编码创建一个带有俄语字符的文件；
*   当您使用越南语当前代码页读取文件时，只有前 127 个字符（即 ASCII 七个字符，例如数字、主要标点和英文字母）能够从 UNICODE 读取到 ANSI 越南语：在转换过程中，所有不正确的字符转换为 ? 在您的 ANSI 越南语字符串中。

因此，您有几种解决方法：

*   升级到 Delphi >= 2009，你`string`将是 UNICODE，所以你将能够混合字符集；
*   用于存储您的文本，并直接调用 Windows范围的API——`widestring`也就是说，您不能使用 VCL 单元，也不能使用.`FindFirst/FindNext``SysUtils``ShowMessage``Dialogs`

当然，第一个是最简单的！

# if-statement - 条件语句的主体内是否有可能包含多个语句？

> ID：11263359
> 
> 赞同：24
> 
> 时间：2012-06-29T14:10:38.147
> 
> 标签：if-statement, scheme, conditional-statements

我主要是一个 C++（因此是一个 OO/命令式）程序员，我发现在条件语句中每次评估只能有一个语句，例如功能语言 Scheme 中的 if 语句，这很奇怪。

例如：

```
 (let ((arg1 0) (arg2 1))
   (if (> arg1 arg2)
       arg1
       arg2))) 
```

错误的例子：

```
(let ((arg1 0) (arg2 1))
  (if (> arg1 arg2)
      (arg1 (display "cool"))
      (arg2 (display "not cool")))) 
```

给我一个类型的错误“程序应用程序：预期的程序，给定：2；参数是：#void”

这可以通过将该条件语句放入已定义函数的主体内的不同语句中来解决，例如，条件语句的主体每次都有单独的语句，如下所示：

```
(if (condition) statement1a statement2a)
(if (condition) statement1b statement2b) 
```

等等...

不用说，它不太实用。更不用说重复的代码开销了。

我在这里遗漏了什么还是真的没有其他办法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-29T14:21:42.737

```
(let((arg1 0)(arg2 1))
  (if (> arg1 arg2) 
      (begin
        (display arg1)
        (newline)
        (display "cool"))
      (begin
        (display arg2)
        (newline)
        (display "not cool")))) 
```

当您说 (arg1 (disply "cool")) 时，您是在暗示 arg1 应该是一个过程。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-29T15:27:33.777

您可能缺少的一件事是，在 Scheme 中没有“声明”之类的东西。一切都是表达式，您可能认为语句的事物也返回一个值。这适用于`if`，它通常用于返回一个值（例如，`(if (tea-drinker?) 'tea 'coffee)`。与 C++ 不同，条件的大多数用途不会用于改变变量或打印值。这减少了在`if`子句中具有多个表达式的需要。

但是，正如 Ross 和 Rajesh 所指出的，您可以在子句中使用`cond`（推荐）或使用`begin`s 。`if`请注意，如果您在条件中有许多副作用计算，那么您可能不会习惯性地使用 Scheme。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-29T14:57:00.663

@RajeshBhat 给出了一个在 if 语句中使用 begin 的好例子。

另一种解决方案是`cond`表格

```
(let ([arg1 0] [arg2 1])
  (cond
    [(< arg1 0) (display "negative!")]
    [(> arg1 arg2) (display arg1) (newline) (display "cool")]
    [else (display arg2) (newline) (display "not cool")])) 
```

表单中的每一行`cond`都有一个隐含的`begin`内容，如果您查看`cond`.

（链接是 Chez Scheme 文档，可能（阅读：可能）与您使用的实现不同，因为它是专有的，尽管 Petite Chez 是免费的（小版本中没有编译器））

[http://scheme.com/tspl4/syntax.html#./syntax:s39](http://scheme.com/tspl4/syntax.html#./syntax%3as39)

**编辑：**关于开始形式的重要说明，因此所有具有隐式开始的表达式。

以下代码

```
(+ 2 (begin 3 4 5)) 
```

计算结果为 7。这是因为`begin`表单的返回值是它的最后一个表达式。这只是开始使用时要记住的事情。但是，使用副作用和诸如显示之类的东西在 3 和 4 所在的位置可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T13:03:23.457

既然您已经在“内部”过程中使用了迭代过程，为什么不使用**命名的 let来使用这个定义**

```
(define (fact n)
  (let inner ((counter 1) (result 1))
    (if (> counter n)
        result
        (inner (+ counter 1) (* result counter))))) 
```

由于进程的状态可以仅用 2 个变量来确定，因此它不会使用那么多内存。

例如（事实 6）是这样计算的

```
(inner 1 1)
(inner 2 1)
(inner 3 2)
(inner 4 6)
(inner 5 24)
(inner 6 120)
(inner 7 720)
720 
```

这是相同过程的 letrec 版本：

```
(define (fact n)
  (letrec ((inner
            (lambda (counter result)
              (if (> counter n)
                  result
                  (inner (+ counter 1) (* result counter))))))
    (inner 1 1))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-03T15:25:08.843

如果你觉得受到 Scheme 语法的限制，你总是可以通过定义一个宏来改变语法。宏类似于 lambda，但它在编译时生成代码（如 C++ 模板），并且在调用宏之前不会评估其参数。

您可以轻松地制作一个宏，让您使用通常表示过程应用程序的语法，例如`(arg1 "cool")`，表示“在括号内显示所有内容，并在每个项目后添加换行符”。（当然，这意味着只在宏内部。）像这样：

```
(define-syntax print-if
  (syntax-rules ()
    [(_ c (true-print ...) (false-print ...))
      (if c
          (display-with-newlines true-print ...)
          (display-with-newlines false-print ...))]))

(define-syntax display-with-newlines
  (syntax-rules ()
    [(_ e)
      (begin (display e) (newline))]
    [(_ e0 e* ...)
      (begin (display-with-newlines e0) (display-with-newlines e* ...)) ]))

(let ([arg1 0] [arg2 1])
  (print-if (> arg1 arg2)
            (arg1 "cool")
            (arg2 "not cool"))) 
```

输出：

```
1
not cool 
```

如果您现在不了解宏定义的工作原理，请不要担心。如果您只是在掌握 C++ 之后才尝试使用 Scheme，那么您无疑会遇到很多挫折。您应该对 Scheme 真正拥有的那种力量和灵活性有一个初步的了解。

Scheme 宏和 C++ 模板之间的一个很大区别在于，在宏中，您可以使用整个 Scheme 语言。宏告诉使用 Scheme，如何以您喜欢的任何完全任意的方式将 s-expr 转换为 Scheme 代码。然后编译器编译宏输出的 Scheme 代码。由于 Scheme 程序本身就是 s-exprs，因此基本上没有任何限制（除了词法范围和需要将所有内容括在括号中）。

如果你愿意，不要让任何人阻止你使用副作用。Scheme 的荣耀在于你可以*为所欲为*。

# vb.net - 如何取消后台工作人员调用的函数？

> ID：11263360
> 
> 赞同：0
> 
> 时间：2012-06-29T14:10:50.180
> 
> 标签：vb.net, backgroundworker

我有一个后台工作人员，它在一个单独的类中调用一个函数。可能需要随时通过从前端单击按钮来取消此过程。我试过使用 CancelAsync() 但这没有效果。cofunds_downloadfiles 是我正在调用的函数。我如何去取消这个过程？

TIA。

```
Private Sub btnProcessdld_Click(sender As System.Object, e As System.EventArgs) Handles btnProcessdld.Click

    Dim cfHelper As New CoFundsHelper

    If btnProcessdld.Text = "Process" Then
        btnProcessdld.Text = "Cancel"

        If chkDailyFiles.Checked = False And chkWeeklyFiles.Checked = False Then
            MessageBox.Show("Please select which files you want to download")
        Else

            lblProgress.Text = "Processing...if you are downloading weekly files this may take a few minutes"
            uaWaitdld.AnimationEnabled = True
            uaWaitdld.AnimationSpeed = 50
            uaWaitdld.MarqueeAnimationStyle = MarqueeAnimationStyle.Continuous
            uaWaitdld.MarqueeMarkerWidth = 60

            _backGroundWorkerdld = New BackgroundWorker
            _backGroundWorkerdld.WorkerSupportsCancellation = True
            _backGroundWorkerdld.RunWorkerAsync()

        End If

    ElseIf btnProcessdld.Text = "Cancel" Then
        btnProcessdld.Text = "Process"
        _backGroundWorkerdld.CancelAsync()
        uaWaitdld.AnimationEnabled = False

    End If

Private Sub StartProcessdld(ByVal sender As Object, _
    ByVal e As System.ComponentModel.DoWorkEventArgs) Handles _backGroundWorkerdld.DoWork

    Dim cfHelper As New CoFundsHelper
    cfHelper.ConnString = PremiumConnectionString
    Dim dateValue As String

    Dim weekly As Boolean = False
    Dim daily As Boolean = False

    If dtePicker.Value IsNot Nothing Then
        dateValue = Format(dtePicker.Value, "yyyyMMdd")

        If chkWeeklyFiles.Checked = True Then
            weekly = True
        End If
        If chkDailyFiles.Checked = True Then
            daily = True
        End If

        cfHelper.Cofunds_DownloadFiles(dateValue, weekly, daily)

    Else
        Throw (New Exception("Date Field is empty"))
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:28:33.487

基本上你可以做到以下几点：

*   在 DoWork 子中，测试`cancellationpending`属性
*   如果它是真的，那么你根本不调用那个函数，也许把`e.Cancelled = true`它放在 RunWorkerCompleted 中检查并决定你必须做什么。
*   如果您需要取消它，只需`Stop()`在您的班级中创建一个完全执行此操作的子程序 - 停止该过程。然后，您只需要像这样调用它

    ```
    Me.Invoke(Sub()
              myClass.Stop()
           End Sub) 
    ```

*   您可能需要暂停后台工作人员，直到来自主线程的调用返回。你可以使用信号量来做到这一点： `Private chk As New Semaphore(1,1,"checking1")` 你把它作为一个全局变量来给你的主线程和后台工作线程。

*   在 backgroundworker_doWork 中，您可以在`chk.WaitOne()`需要执行的行之后使用信号量。
*   在你的类的方法中，当它完成计算时你放`a.Release`

仅当您需要确保等待结果时才需要信号量。它有点违背了多线程的目的，但是您可以在等待主线程之前在工作线程中执行其他操作（例如用其他东西启动另一个线程等）。

除此之外，调用停止方法就足够了。对不起，我没有时间分析你的代码，但我希望我能把你引向正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:17:47.273

`CancelAsync`实际上并没有取消工作人员（只是 sets `CancellationPending = True`）所以你基本上必须在你的函数中检查 BackGroundWorker 的状态：

```
Do While Not worker.CancellationPending
    'some long running process
Loop 
```

但是我发现这不是 100% 可靠的，因此使用您自己的取消标志可能更安全。

# select - 如何通过列表键从struts2 select标签中检索选定列表对象的多个属性？

> ID：11263361
> 
> 赞同：0
> 
> 时间：2012-06-29T14:10:53.627
> 
> 标签：select, struts2

我在 struts2 选择标签中有一个对象列表。我想检索选定的列表对象，而不仅仅是 id 或任何属性，因为它们都不是或唯一属性，有没有办法获取整个对象？我的代码如下我想检索所有字段，名称，id，日期，cba，seq .. 因为它们都不是唯一字段，我不能只获取 id，然后从数据库中获取其他字段。

有什么帮助吗？？？

```
<s:select name="appls" list="applList" id="appls"
          listKey="id"
          listValue="%{enroller.name.fullName + '-' + enroller.cba+'......' + openDateStr + '.....' + seq}"
          multiple="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:54:16.837

你是什​​么意思，“获取整个对象”或“检索列表对象”？

无论如何，IMO 你应该在 Java 中构建复杂的选项标签，而不是在视图中。

`listValue`可以是任意 OGNL 表达式，使用与页面本身相同的值堆栈，加上每个选择的列表项推到顶部。如果不了解更多关于您实际尝试做的事情，那么很难提供更多帮助。

# iphone - 尝试构建谷歌地图路径时崩溃

> ID：11263366
> 
> 赞同：0
> 
> 时间：2012-06-29T14:11:28.670
> 
> 标签：iphone, ios, google-maps

我有一个相当紧迫的问题，我找不到答案。我正在尝试在 iPhone 应用程序中使用谷歌地图 API 绘制当前位置和目的地之间的路径。我从谷歌获取数据，解析没有错误的 JSON，解码折线，然后我有这个方法：

```
-(void) loadRouteWithPoints:(NSArray *) routes
{
    CLLocationCoordinate2D coords[[routes count]];
    for(int i = 0; i < routes.count; i++)
    {
        CLLocation* loc = (CLLocation*)[NSKeyedUnarchiver unarchiveObjectWithData:[routes objectAtIndex:i]];
        CLLocationCoordinate2D c;
        c.latitude  = loc.coordinate.latitude;
        c.longitude = loc.coordinate.longitude;
        coords[i]   = c;
    }

    MKPolyline *line = [MKPolyline polylineWithCoordinates:(CLLocationCoordinate2D*)coords count:[routes count]];
    [self.mapsView addOverlay:line];    
} 
```

这会引发异常`[NSKeyedUnarchiver unarchiveObjectWithData:[routes objectAtIndex:i]];`：

> “-[CLLocation 字节]：发送到实例的无法识别的选择器”

我作为参数发送的数组是我在解码折线后得到的数组，它不是 nil ，它有 - 在我的测试中 - 47 个值。我可以看到它们，每个条目如下所示：

> <+44.47874069,+26.10523033> +/- 0.00m（速度 -1.00 mps / 路线 -1.00）@ 2012 年 6 月 29 日 17:09:37 东欧夏令时间

您是否知道可能导致此崩溃的原因以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:58:56.517

此处的错误表明您认为 [routes objectAtIndex:x] 中的值可能不是您认为的值。

尝试分离线，查看在 [routes objectAtIndex:x] 检索到的对象的类类型到底是什么，您可能会得到答案。

该对象似乎可能已经是一个 CLLocation 并且不需要未编码……</p>

# python - 种子 Pylab 的随机数生成器？

> ID：11263367
> 
> 赞同：2
> 
> 时间：2012-06-29T14:11:31.333
> 
> 标签：python, random, matplotlib, weibull

我一直在搜索网络和文档无济于事。我可以播种`random`但不能`mtrand`生成生成器（我相信 Mersenne Twister？），似乎没有任何命令有效。

```
from pylab import *

# >> seed random number generator <<
print '%.3f' % weibull(2)
print '%.3f' % weibull(2) 
```

我希望这两个字符串都能产生相同的结果。我在更复杂的设置中使用该功能，但这应该足以满足我的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:51:14.023

您使用以下方法播种 pylab `pylab.seed`：

```
>>> pylab.seed(0)
>>> pylab.weibull(2)
0.89211799004566095
>>> pylab.seed(0)
>>> pylab.weibull(2)
0.89211799004566095 
```

# javascript - 设置 viewScope onLoad 和 onResize

> ID：11263368
> 
> 赞同：1
> 
> 时间：2012-06-29T14:11:33.537
> 
> 标签：javascript, onload, xpages, onresize

我在我的 CSS 中使用了“@media only screen”来根据用户的屏幕大小确定应该如何以及应该显示哪些信息。我有一个名为 panelContainer 的类，它设置为在屏幕大于 767px 时显示，还有一个名为 mobileContainer 的类，它在屏幕小于 767 像素时显示。

我有几个自定义控件，一个包含标准表单布局，另一个包含移动设备表单布局。最初我用适当的 styleClass 在每个周围放置了一个 div。这种方式的问题是，虽然只有一个表单可见，但它们都已加载，因此导致保存问题。

```
<xp:div id="panelContainer" styleClass="panelContainer">
    <xc:content_sCompany></xc:content_sCompany>
</xp:div>
<xp:div id="mobileContainer" styleClass="mobileContainer">
    <xc:content_iCompany></xc:content_iCompany>
</xp:div> 
```

我已经使用 panelContainer 的 styleClass 在我的 Xpage 中添加了一个 div，然后我添加了返回 div 的 style.display 的 onLoad 和 onResize 事件，然后这些应该将结果写入 viewScope。但我发现它只会写 onLoad 并且虽然该函数被调用 onResize 它不会改变 viewScope 变量。

```
<xp:scriptBlock id="scriptBlock1" type="text/javascript">
    <xp:this.value>
        <![CDATA[var init = function() {
            obj=document.getElementById('formType');
            if(getStyleDisplay(obj)=="none"){
                formType='#{javascript:viewScope.put("formFormat","mobile");}';
            }else{ 
                formType='#{javascript:viewScope.put("formFormat","standard")}';
           }
        }

        dojo.addOnLoad(init);
        dojo.connect(window,"onresize",init);

        function getStyleDisplay(obj) {
            if(obj.currentStyle) { // IE – Opera
                return obj.currentStyle.display;
            } else { // firefox
                return getComputedStyle(obj,'').getPropertyValue('display');
            }
        }]]>
    </xp:this.value>
</xp:scriptBlock>
<div id="formType" class="panelContainer"></div> 
```

.....这个 viewScope 变量然后以下列方式使用：

```
<xc:content_Company xp:key="ContentControl">
    <xp:this.facets>
        <xc:content_sCompany id="content_sCompany"
            xp:key="standard">
        </xc:content_sCompany>
        <xc:content_iCompany id="content_iCompany"
             xp:key="mobile">
        </xc:content_iCompany>
    </xp:this.facets>
</xc:content_Company> 
```

......从 content_Company 中提取......

```
<xp:callback facetName="#{viewScope.formFormat}" id="cbkCompanyFormContent">
</xp:callback> 
```

我觉得这是实现我需要的结果的更好方法，因为当我手动尝试它时，它只加载一个表单并且它们按预期工作。

我看不出为什么 viewScope 没有被正确设置，它总是被设置为“标准”，即使我在加载页面之前缩小了我的页面。我确实尝试将值写入隐藏输入，这有效，但是每当我尝试使用 getComponent("hiddenInput1").getValue() 访问该值时，它都会返回 null，即使我可以在查看时看到该值已设置萤火虫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:05:59.010

好的，您可以通过一些 console.log("") 检查（或告诉我您是否已经拥有） onResize 正在被调用，并且正确的显示正在被下拉等。

接下来它可能会触发 onResize 但您是否正在部分刷新正在使用 viewScope 的区域？

代码示例：（将 controlID 替换为您的）

```
XSP.partialRefreshGet("controlID", {
    onError: function() { console.log('Error'); }
}); 
```

我对使用 onResize 的目的有点困惑？如果是决定在移动屏幕还是普通屏幕上显示什么，有更有效的方法可以做到这一点。

1.  在 openNTF 上的 ExtLib 的最新版本中使用新的重定向控件。它完全按照名称所暗示的那样做，并根据某些表达式进行重定向。让您将其放在页面上，并说是否移动（或其他）重定向到此页面。

2.  有一个虚拟的默认加载页面，它检查用户代理字符串以查看要加载的页面（具有单独的移动/全屏页面）。这就是 ExtLib 附带的 teamroom 模板应用程序对其 main.xsp 所做的事情，然后将其设置为默认启动选项。

或者，如果您尝试处理手机/平板电脑是横向还是纵向，您应该使用 onOrientationChange 事件而不是 onResize。看看这个例子（不是问题中的代码也是我向你指出的，他在让它在 webview 中工作时遇到了问题）：

[如何处理uiwebview中的javascript onorientationchange事件](https://stackoverflow.com/questions/5220999/how-to-handle-javascript-onorientationchange-event-inside-uiwebview)

# java - 在 ListView 中的 TextView 旁边显示 ImageView

> ID：11263373
> 
> 赞同：0
> 
> 时间：2012-06-29T14:11:52.547
> 
> 标签：java, android, imageview

所以我有一个正确显示的列表视图。当项目“打开”时，文本为白色，关闭时为灰色。那部分功能都很好。但是，当我将 ImageView 添加到组合中时，我得到一个空指针异常。我不明白为什么。我也尝试过使用位图并遇到同样的问题。

这是一些代码：

```
@Override
public void bindView(View view, Context context, Cursor cursor) {

    TextView rRule = (TextView) view.findViewById(R.id.rule_text);
    TextView rType = (TextView) view.findViewById(R.id.rule_type);
    ImageView iChecked = (ImageView) view.findViewById(R.id.checkBox);

    String ruleName = cursor.getString(1);
    int ruleType = cursor.getInt(2);
    String ruleEnabled = cursor.getString(3);

    switch (ruleType) {
    /*...some irrelevant code */

    }

    if (ruleEnabled.equals("true")) {
        rRule.setTypeface(null, Typeface.BOLD);
        rRule.setTextColor(Color.WHITE);
        iChecked.setVisibility(View.VISIBLE);   //line 271

    } else if (ruleEnabled.equals("false")) {
        rRule.setTypeface(null, Typeface.NORMAL);
        rRule.setTextColor(Color.GRAY);
        iChecked.setVisibility(View.GONE);

    }
    rRule.setText(ruleName);
} 
```

根据请求错误日志：（抱歉，空指针没有说任何有用的信息。我知道错误是图像视图）

```
06-29 10:29:02.777: E/AndroidRuntime(29516): FATAL EXCEPTION: main
06-29 10:29:02.777: E/AndroidRuntime(29516): java.lang.NullPointerException
06-29 10:29:02.777: E/AndroidRuntime(29516):    at com.company.app.DefaultRulesList$RulesAdapter.bindView(DefaultRulesList.java:271)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at com.company.app.DefaultRulesList$RulesAdapter.newView(DefaultRulesList.java:284)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.CursorAdapter.getView(CursorAdapter.java:246)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.AbsListView.obtainView(AbsListView.java:2033)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.ListView.makeAndAddView(ListView.java:1772)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.ListView.fillDown(ListView.java:672)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.ListView.fillFromTop(ListView.java:732)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.ListView.layoutChildren(ListView.java:1625)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.AbsListView.onLayout(AbsListView.java:1863)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.View.layout(View.java:11278)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.View.layout(View.java:11278)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.View.layout(View.java:11278)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.View.layout(View.java:11278)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.View.layout(View.java:11278)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.os.Looper.loop(Looper.java:137)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at java.lang.reflect.Method.invokeNative(Native Method)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at java.lang.reflect.Method.invoke(Method.java:511)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-29 10:29:02.777: E/AndroidRuntime(29516):    at dalvik.system.NativeStart.main(Native Method) 
```

iChecked 的代码（调用 id 的地方）

```
 <ImageView
android:id="@+id/checkBox"
android:padding="2dip"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@android:drawable/checkbox_on_background"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:12:35.177

在我看来，您必须为适配器提供错误的布局。

我看不出 NPE 的其他原因，`ImageView`因为它在您正在寻找它的布局中不存在。

# dataset - 如何在 c# 代码中给出 c# Rdlc 报告，无类型数据集

> ID：11263378
> 
> 赞同：1
> 
> 时间：2012-06-29T14:12:17.973
> 
> 标签：dataset, datasource, rdlc, reporting-services

我有一个带有一些计算的小型 Windows 应用程序，并填充了我的无类型数据集，即“progDS”。我使用了 MS Access 数据库。如果我使用类型化的数据集，报表会挑选每一行并将其显示在报表查看器上（这不是我的要求）。我一直在尝试做的是只显示必须包含新计算字段的三行。

该应用程序适用于我的部门，接收学生的形式，提供特定程序（数据集“progDS”包含）。RDLC 报告，而 ReportViewer 只接受类型化的数据集，如何覆盖或更改数据集并提供我的，即“progDS”。

我在另一个表单上有 ReportViewer，我能够将数据集“progDS”放入该表单。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace FreshFormReport
{
    public partial class Form3 : Form
    {
        Form1 ObjFomr1 = new Form1();
        DataSet dsF3 = new DataSet();
        DataSet2 dataSet = new DataSet2();
        DataTable dtF3 = new DataTable();
        BindingSource bs = new BindingSource();

        public Form3()
        {
            InitializeComponent();
        }

        private void Form3_Load(object sender, EventArgs e)
        {
            try
            {
                // TODO: This line of code loads data into the    'DataSet2.RpTable' table. You can move, or remove it, as needed.
                //    this.RpTableTableAdapter.Fill(this.DataSet2.RpTable);
                reportViewer1.LocalReport.DataSources.Clear();
                //    this.reportViewer1.RefreshReport();
                Microsoft.Reporting.WinForms.ReportDataSource rptSource = new Microsoft.Reporting.WinForms.ReportDataSource("dsF3", dsF3.Tables["Porgrams"]);
                 reportViewer1.Reset();
                 reportViewer1.ProcessingMode =    Microsoft.Reporting.WinForms.ProcessingMode.Local;
                Microsoft.Reporting.WinForms.LocalReport localRep = reportViewer1.LocalReport;
                localRep.Refresh();
                localRep.ReportEmbeddedResource = "C:\\Users\\*******  \\Documents\\Visual Studio 2010\\Projects\\FreshFormReport\\FreshFormReport\\MyReport.rdlc";

                rptSource.Name = "MyReport";
                //RpTableTableAdapter.Fill(DataSet2.RpTable);
                rptSource.Value = DataSet2.RpTable;
                reportViewer1.LocalReport.DataSources.Clear();
                reportViewer1.LocalReport.DataSources.Add(rptSource);
                //string name = localRep.GetDataSourceNames().ToString();
                reportViewer1.LocalReport.ReportPath = "C:\\Users\\******  \\Documents\\Visual Studio 2010\\Projects\\FreshFormReport\\FreshFormReport\\MyReport.rdlc";

                //reportViewer1.LocalReport.ReportEmbeddedResource =  "MyReport.rdlc";
                //reportViewer1.Refresh();
                reportViewer1.Refresh();
                reportViewer1.RefreshReport();
            }
            catch (Exception x)
            {
                MessageBox.Show(x.Message);
            }

        }

        public void F3function(DataSet ds, DataTable dt)
        {
            try
            {
                dsF3 = ds;
                dtF3 = dt;
                bs.DataSource = dt;
            }
             catch (Exception x)
            {
                MessageBox.Show(x.Message);
            }
        }
    }
} 
```

# javascript - Jquery如何指定哪个droppable应该与嵌套的droppable元素一起使用

> ID：11263379
> 
> 赞同：0
> 
> 时间：2012-06-29T14:12:28.480
> 
> 标签：javascript, jquery, html, jquery-ui-draggable, jquery-droppable

我有一个小问题，我似乎无法自己解决。看看这个小提琴：[JSfiddle](http://jsfiddle.net/4sNv2/20/)

这是我遇到的问题的一个基本示例。我有一个大 div 是一个可放置的区域。在这个可放置区域内还有多个其他可放置区域。

当元素被删除时，内部的可放置区域应该穿过它的代码。相反，来自外部 div 的代码似乎在运行。难道我做错了什么？div 周围的区域应该保持这种方式，因为元素可以放置在这里（不是正式删除）。

我希望我的问题足够清楚，但我认为提琴手不言自明。

PS - 此示例中的调整大小不起作用，但在我的开发环境中起作用。

* * *

生锈和马克，谢谢你的回复。

对于令人困惑的调整器，我很抱歉。我刚刚从代码中删除了它。 [新提琴手](http://jsfiddle.net/4sNv2/20/)

只是为了澄清事情。box div 是一个包含多个图像的容器。我正在尝试实现以下目标： [http](http://postimage.org/image/qwhtik04f/) ://postimage.org/image/qwhtik04f/ 灰色虚线框是我示例中的 dropbox2 div。这些投递箱周围的空间是投递箱 div。

有板的空间是唯一可以在没有任何事情发生的情况下丢弃图像的地方。拖动的图像可以捕捉回 dropbox2 div。如果图像被拖到 dropbox div 上，图像应该恢复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:16:31.877

在内部 droppable 上设置`greedy: true`选项将防止事件在外部 droppable 上发生：

```
jQuery('#dropbox2').droppable({
    greedy: true,
    drop: function(event, ui) {
        // ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:42:43.347

您的代码在外部有这个`<div>`：

```
$("#dropbox").droppable({
    drop: function(event, ui) {
       ui.draggable.draggable( 'option', 'revert', true );
    }
}); 
```

这表示将`revert`选项设置为`true`当您拖动到外部时`<div>`。但是，当您放入较小的 时`<div>`，该选项仍设置为`true`。您需要做的就是`revert`在您的 inner 成功放置后更改可拖动元素上的值`<div>`：

```
$("#dropbox2").droppable({
    drop: function(event, ui) {
        ui.draggable.position( { of: $(this), my: 'center', at: 'center' } );
        // Add this line
        ui.draggable.draggable( 'option', 'revert', false );
    }
}); 
```

### 更新：

Mark 指出我的解决方案不会停止将事件传播到父容器。正如他的回答所示，您需要添加`greedy: true`初始选项。[jQuery 文档](http://jqueryui.com/demos/droppable/#option-greedy)说：

> 如果为 true，将阻止嵌套 droppable 上的事件传播。

这听起来像你在找什么。你仍然需要改变`revert`你的可拖动属性，因为`greedy`它只在你的 droppables 上设置并且不会影响你的可拖动反应。

# asp.net - ASP.NET 设置单个子项会删除其他子项

> ID：11263386
> 
> 赞同：2
> 
> 时间：2012-06-29T14:12:41.020
> 
> 标签：asp.net, vb.net, visual-studio-2010, cookies

我正在使用一个大 cookie 的子键来存储多个帮助文本的隐藏状态。但是如果更新了单个子项，则所有其他子项都将被删除。我是否应该始终同时更新给定 cookie 的所有子键来解决这个问题？

这是我目前有问题的功能。

```
' Store cookie_value of cookie_name  .
sub store_string( cookie_value , cookie_name  )
    ' Sets cookie cookie_name to cookie_value.
        response.Cookies( "UserSettings" )( cookie_name ) = cookie_value 
        response.Cookies( "UserSettings").Expires = datetime.now.adddays(365*10)  ' 10 years.  The hardware won't last that long!
end sub

' Retrieve stored cookie_name.
function restore_string( byval cookie_name  ) 
    ' Returns cookie named cookie_name.
        If  Request.Cookies( "UserSettings") Is Nothing Then
            return ""
        else
            cookie_value =  Server.HtmlEncode(Request.Cookies( "UserSettings" )( cookie_name ))
            return   cookie_value
        end if
end function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:23:51.700

我遇到了同样的问题，看起来这已经在 asp.net 论坛上得到了回答： [http ://forums.asp.net/t/1819596.aspx/1](http://forums.asp.net/t/1819596.aspx/1)

这是代码片段：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Me.Label1.Text = DateTime.Now.ToString()
    'add cookie
    If Not Me.IsPostBack Then
        Dim aCookie As New HttpCookie("userInfo")
        aCookie.Values("userName") = "UserName"
        aCookie.Values("lastVisit") = DateTime.Now.ToString()
        aCookie.Expires = DateTime.Now.AddDays(1)
        Response.Cookies.Add(aCookie)
    End If
End Sub

Protected Sub Button1_Click(sender As Object, e As EventArgs)
    ' update subkey : "lastVisit"
    Dim cookie As HttpCookie = Request.Cookies("userInfo")
    cookie("lastVisit") = DateTime.Now.ToString()
    cookie.Expires = DateTime.Now.AddDays(1)
    Response.Cookies.Add(cookie)

End Sub

Protected Sub Button2_Click(sender As Object, e As EventArgs)
    ' show all subkey values
    Response.Write(Request.Cookies("userInfo")("userName"))
    Response.Write(Request.Cookies("userInfo")("lastVisit"))
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T19:24:08.670

我花了几天时间试图解决这个问题，最后得出了这个解决方案：

如果您只编辑 1 个子项，则必须使用代码：

```
Dim cookieCode As HttpCookie = _contxt.Request.Cookies(COOKIE_NAME)
cookieCode.Values.Set(KEY, ivalue) 
Response.Cookies.Add(cookieCode) 
```

SET 命令将只更新子项。使用完整响应方法将覆盖其他子项。

# c# - 是否可以从 wpf 中的 ivalueconverter 返回多个值？

> ID：11263387
> 
> 赞同：0
> 
> 时间：2012-06-29T14:12:41.453
> 
> 标签：c#, wpf, xaml, datatemplate, ivalueconverter

我有一个 wpf 列表框，它实现了一个包含 TextBlock 的 DataTemplate。

```
 <local:BooleanToFontColorConverter x:Key="boolToFontColor" />
    <DataTemplate x:Key="ListBox_DataTemplateSpeakStatus">
            <Label Width="Auto">
                    <TextBlock Foreground="{Binding Path=myProperty, Converter={StaticResource boolToFontColor}}" />
            </Label>
    </DataTemplate> 
```

我手头的任务是改变“myProperty”，我希望字体的颜色不同。我的转换器如下所示：

```
public class BooleanToFontColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
                  CultureInfo culture)
    {
        if (value is Boolean)
        {
            return ((bool)value) ? new SolidColorBrush(Colors.Red) : new SolidColorBrush(Colors.Black);
        }

        return new SolidColorBrush(Colors.Black);
    }

    public object ConvertBack(object value, Type targetType, object parameter,
                              CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这行得通。更改绑定属性时，字体颜色（前景）将变为红色。

我的问题是：我希望我的字体变为红色、粗体和斜体。我知道这可以通过使用文本块内联来实现，但是是否可以使用我的转换器来完成所有这三件事？

感谢所有有想法和洞察力的人做出回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:16:16.057

不要为此使用转换器，请使用 a并分别为属性[`DataTrigger`](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)添加三个。`Setters`

（您可以返回多个对象，但这毫无意义，因为所有这些属性都只接受一个对象。另一种方法是使用 ，`Binding.ConverterParameter`然后您可以在转换器中切换以返回正确属性的正确值，您仍然需要三个绑定，每个绑定都有不同的参数，*非常*难看）

# uitableview - 数据传入后UITableView不重新加载

> ID：11263388
> 
> 赞同：0
> 
> 时间：2012-06-29T14:12:42.800
> 
> 标签：uitableview

我知道这里有很多类似的问题，但我复习了一堆，但仍然卡住了。有人可以查看我的代码，看看他们是否能找到未调用 UITableView 方法的原因。我检查了数组，它正在被填充，但是当我在表上调用 reloadData 时，什么也没有。

这个过程是我进行 SOAP 调用以获取数据，将返回的 XML 解析为字典（每个条目都是存储信息的数组），然后将其传递给表的视图控制器。然后我遍历字典，获取每个数组，获取商店名称并将其放在 dataPointTitles 数组中。那是我表的数据源。代表已定。当应用程序启动时，我在数据源上的计数为 0，这是正确的，因为尚未加载任何数据。一旦用户检索到数据，dataPointTitles 数组就会被填充（请参阅下面的控制台日志打印输出），但不会触发任何方法。

这是我的代码：

.h 文件：

```
@interface DataController : UIViewController  <UITableViewDelegate, UITableViewDataSource>{ 

NSMutableDictionary* dataDict;
NSMutableArray* dataPointTitles;

UILabel* lblDataLabel;
UITableView* tblDataTable;

SoapController* soapManager; 

ColorController* colorManager;

MKMapView* thisMap; 
CLPlacemark* thisPlaceMark;

}

@property (nonatomic, retain) NSMutableDictionary* dataDict;

- (void) parseData; 

- (void) setDataDict : (NSMutableDictionary* ) passedDict;

@end 
```

.m 文件的相关部分

```
#import "DataController.h"

@interface DataController ()

@end

@implementation DataController

@synthesize dataDict;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

//color manager
colorManager = [ColorController new];

//add data label
lblDataLabel = [[UILabel alloc] initWithFrame:CGRectMake(10.0, 40.0, 300.0, 30.0)];
[lblDataLabel setTextColor:[UIColor whiteColor]];
[lblDataLabel setFont: [UIFont fontWithName:@"Helvetica-Bold" size: 12]];
[lblDataLabel setText:@"Local Medicare Providers and Services:"];
[lblDataLabel setBackgroundColor:[UIColor clearColor]];

//add the table 
tblDataTable = [[UITableView alloc] initWithFrame: CGRectMake(10.0, 70.0, 300.0, 300.0)];
tblDataTable.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
tblDataTable.separatorColor = [colorManager setColor:176.0:196.0:222.0];
tblDataTable.layer.borderWidth = 1.0;
tblDataTable.rowHeight = 20.0;
tblDataTable.scrollEnabled = YES;
tblDataTable.delegate = self;
tblDataTable.dataSource = self;

[self.view addSubview:lblDataLabel];
[self.view addSubview:tblDataTable];

}

- (void) setDataDict : (NSMutableDictionary* ) passedDict {

dataDict = passedDict;
[self parseData];

} 

#pragma mark Parsing Data
- (void) parseData { 

dataPointTitles = [[NSMutableArray alloc] init];

for(NSString* thisObj in dataDict) { 
    NSArray* thisDataSet = [dataDict objectForKey:thisObj];
    [dataPointTitles addObject:[thisDataSet objectAtIndex:1]];
}
NSLog(@"%@", dataPointTitles);
[tblDataTable reloadData];

}

#pragma mark Table Management
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
NSLog(@"%i", [dataPointTitles count]);
return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

return [dataPointTitles count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"tableCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.textColor = [UIColor colorWithRed:66.0/255.0 green:66.0/255.0 blue:66.0/255.0 alpha:1];
cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size: 13.0];
cell.textLabel.text = [dataPointTitles objectAtIndex:indexPath.row];

CGRect cellFrame = [cell frame];
cellFrame.size.height = 50.0;

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString* thisDataPointTitle = [dataPointTitles objectAtIndex:indexPath.row];

for(NSString* thisObj in dataDict) { 

    NSArray* thisDataPoint = [dataDict objectForKey:thisObj];

    if ([thisDataPoint objectAtIndex:1] == thisDataPointTitle) { 

    }
}
} 
```

这是 parseData 方法的 console.log 输出：

```
"PASSAVANT DEVELOPMENT CORPORATION",
"MYERS DRUG STORE INC",
"WAL-MART STORES EAST LP",
"JAMES GRANT MCGINNESS",
"WAL-MART STORES EAST INC",
"WILLIAM J DIMINO",
"SUBURBAN EYE CARE OPTOMETRIC",
"CMMC INC",
"FOR EYES OPTICAL CO INC",
"LACONS PHARMACY INC",
"PASSAVANT DEVELOPMENT CORPORATION",
"WAL-MART STORES EAST LP",
"RITE AID CORPORATION",
"JAMES GRANT MCGINNESS",
"ABLE MEDICAL EQUIPMENT",
"GIANT FOOD STORES LLC",
"WALGREEN CO",
"ACCESS CARE INC",
"RITE AID CORPORATION",
"CVS DEKALB NORRISTOWN INC",
"FS-PHILADELPHIA LLC",
"DRUG EMPORIUM INC",
"PAUL D HALPERN OD",
"HARRY W FIRTH  JR",
"ABLE MEDICAL EQUIPMENT",
"ACME MARKETS INC DE",
"BROWN'S CH LLC",
"THE MEDICINE SHOPPE",
"MYERS DRUG STORE INC",
"NCS HEALTHCARE OF PENNSYVANIA INC",
"ACCESS CARE INC",
"NORMATEC INC",
"WAL-MART STORES EAST LP",
"COLE VISION CORPORATION",
"RESTORATIVE INNOVATIONS INC",
"ABLE MEDICAL EQUIPMENT",
"CMMC INC",
"KMART OF PENNSYLVANIA LP",
"WAL-MART STORES EAST LP",
"THERESE C DESCHENES OD PC",
"ALLEN SOFFER OD PC",
"WAL-MART STORES EAST INC",
"RITE AID CORPORATION",
"NORRISTOWN CVS INC",
"WAL-MART STORES EAST LP",
"FOR EYES OPTICAL CO INC",
"LACONS PHARMACY INC" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:31:55.383

从评论中：显然我们遇到了一个问题，即逻辑中涉及多个`DataController`对象并在解析/视图加载中引起一些混乱。

# cordova - 停止应用程序的 gwt-phonegap 代码

> ID：11263395
> 
> 赞同：0
> 
> 时间：2012-06-29T14:13:19.883
> 
> 标签：cordova

我正在使用 gwt-phonegap 1.7 版构建一个移动应用程序。我尝试使用“.exitApp”关闭我的应用程序，它正在关闭应用程序并返回主屏幕到目前为止没有问题但是当我在“设置>应用程序>管理应用程序”中检查应用程序的状态时，我的应用程序仍在运行且“强制停止”选项仍处于活动状态。

请问有没有其他方法可以关闭安卓应用？我正在使用 GWT-phonegap 和 Mgwt 来构建我的应用程序。

谢谢和问候， Ganesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:45:48.480

在您扩展 DroidGap 的类的 onCreate 方法中，您需要添加以下行：

```
super.setBooleanProperty("keepRunning", false); 
```

这应该防止它在后台运行。

# c++ - C++：如何检查，那个枚举只有唯一值

> ID：11263396
> 
> 赞同：3
> 
> 时间：2012-06-29T14:13:22.097
> 
> 标签：c++, enums, switch-statement, int64, unique-values

我们使用 VS 2008

有一个很大的枚举，由许多开发人员填充

这个枚举有一个类型 __int64 （微软扩展），我想让编译器抱怨枚举中的非唯一值。

如果这是一个通常的枚举，我会这样做：

```
enum E1
{
    E11 = 0x01F00,
    E12 = 0x01F00,
    E13
};
#pragma warning(push)
#pragma warning(error: 4061)
#pragma warning(error: 4062)
void F(E1 e1)
{
    switch (e1)
    {
    case E11:
    case E12:
    case E13:
        return;
    }
}
#pragma warning(pop) 
```

如果 E1 有 2 个相同的值，函数 F 会出错

如果开发人员忘记添加新值来切换，它会出现另一个错误

但我的枚举类型为 __int64 （或 long long）

当我尝试为 E1 e1 执行相同的开关时，它会截断值并抱怨值，差异是 0x100000000 或 0x200000000 ....

如果我将 e1 转换为 __int64，编译器不会抱怨，如果开发人员忘记向开关添加新值（因此整个检查功能变得无用）

问题：有人知道我能做些什么吗？或者也许VS 2008（或C++）有另一种工具来确保枚举：__int64 只有唯一值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:47:59.740

根据您的评论，我假设您在枚举本身中没有聚合（组合）标志。在这种情况下，您可以使用两个枚举来使出错变得更加困难。你仍然可以颠覆编译器，但我认为这不是真正的问题。

```
enum Bit_Index
{
    FLAG1_INDEX,
    FLAG2_INDEX,
    FLAG_FANCY_INDEX,
    LAST_INDEX
};

#define DECLARE_BIT_VALUE(att) att##_VALUE = 1ULL << att##_INDEX
enum Bit_Value
{
    DECLARE_BIT_VALUE(FLAG1),
    DECLARE_BIT_VALUE(FLAG2),
    DECLARE_BIT_VALUE(FLAG_FANCY),

    // Declared NOT using the macro so we can static assert that we didn't forget
    // to add new values to this enum.
    LAST_BIT   // Mainly a placeholder to prevent constantly having to add new commas with new ids.
};
#undef DECLARE_BIT_VALUE 
```

然后在实现文件中使用 static_assert 确保枚举不会错位：

```
// Make sure to the best of our abilities that we didn't mismatch the index/bit enums.
BOOST_STATIC_ASSERT((LAST_BIT - 1) == (1U << (LAST_INDEX - 1))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:32:35.483

> 有人知道我能做些什么吗。

其他答案可以是算法分析。静态分析不一定是寻找安全漏洞。不幸的是，在这种情况下，您将不得不使用外部工具来验证您的约束。我可以帮助你实现这一点。

# php - 必应翻译与 POST

> ID：11263400
> 
> 赞同：0
> 
> 时间：2012-06-29T14:13:44.623
> 
> 标签：php, bing

我使用 Bing Translate 和 GET (curl) 方法，一切正常。

但现在我需要使用 POST 方法，添加新行：

```
$postData = array('text'=>'home', 'to'=>'it', 'from'=>'en');
curl_setopt($ch, CURLOPT_POST, TRUE);   
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); 
```

现在得到错误：

“错误状态代码：'InternalServerError'

详细信息：服务器在处理请求时遇到错误。有关详细信息，请参阅服务器日志。” BING 不支持 POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T10:16:38.280

[您可以在http://code.google.com/p/micrsoft-translator-php-wrapper/](http://code.google.com/p/micrsoft-translator-php-wrapper/)找到实现， 您还可以看到演示 [http://renjith.co.in/translate/](http://renjith.co.in/translate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:34:28.340

BING 支持 POST：[http ://wangpidong.blogspot.com/2012/04/how-to-use-new-bing-translator-api-with.html](http://wangpidong.blogspot.com/2012/04/how-to-use-new-bing-translator-api-with.html)

（见第 4 步）

# json - 功能未按正确的逐步顺序执行

> ID：11263404
> 
> 赞同：0
> 
> 时间：2012-06-29T14:13:54.437
> 
> 标签：json, windows-phone-7

我有 2 个 webclient 方法一个接一个地执行。

问题是，执行的第一个仅在第二个之后执行。

我的主要问题是，为了让第二种方法执行，第一种方法首先需要完成，因为第二种方法需要第一种方法中的数据才能成功执行。

```
 {

string name;
string surname;
string url1 =" //sample/1";
string url2 ="//sample/2";

       //execution point!
        public void ListBox_SelectionChagned(Object sender, SelectionChangedEventArgs e)
        {
            var sel = ((ListBox)ContextMenuPopup.Child).SelectedItem;

            SubName = Convert.ToString(sel);

            try
            {

                WebClient webClient = new WebClient();
                Uri uri = new Uri(url1);
                webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted1);
                webClient.OpenReadAsync(uri);

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
  try
            {

                WebClient webClient = new WebClient();
                Uri uri = new Uri(url2 + name);
                webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted2);
                webClient.OpenReadAsync(uri);
                System.Diagnostics.Debug.WriteLine(url2 + name);

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

}

 //Method1       
void webClient_OpenReadCompleted1(object sender, OpenReadCompletedEventArgs e)
        {
            DataContractJsonSerializer ser = null;
            try
            {
                ser = new DataContractJsonSerializer(typeof(ObservableCollection<Subscriptions>));
                ObservableCollection<Subscriptions> alldata = ser.ReadObject(e.Result) as ObservableCollection<Subscriptions>;
                foreach (data _dt in alldata)
                {

                    name = First_Name;
                     surname = Surname;    
                    System.Diagnostics.Debug.WriteLine("My first name "  + name);

                }

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

        }

//Method2
        void webClient_OpenReadCompleted2(object sender, OpenReadCompletedEventArgs e)
        {
            DataContractJsonSerializer ser = null;
            try
            {
                ser = new DataContractJsonSerializer(typeof(ObservableCollection<Subscriptions>));
                ObservableCollection<Subscriptions> alldata = ser.ReadObject(e.Result) as ObservableCollection<Subscriptions>;
                foreach (data _dt in alldata)
                {

                    name = First_Name;
                     surname = Surname;    

                }

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

 }
public class data 
    {

        public string First_Name { get; set; }
        public string Surname { get; set; }
    }
} 
```

摘要：我需要在第一种方法中获取值“name”并在第二种方法中使用它来附加我的url2？

但我的第二种方法在我的第一种方法之前完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:17:57.917

然后将以下代码从 selectionchanged 事件处理程序移动到 webClient_OpenReadCompleted1 事件处理程序

```
WebClient webClient = new WebClient();
Uri uri = new Uri(url2 + name);
webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted2);
webClient.OpenReadAsync(uri);
System.Diagnostics.Debug.WriteLine(url2 + name); 
```

这意味着，您必须在第一个请求成功完成后发出第二个请求。

# c - 用于 CFD 求解器 Fluent 的 UDF（C 代码）编写器的段违规问题

> ID：11263405
> 
> 赞同：0
> 
> 时间：2012-06-29T14:14:00.710
> 
> 标签：c, user-defined-functions, fluent, calloc

用户定义函数 (UDF) 是可以编程的函数，并且可以与 CFD 软件 Fluent Solver 一起动态加载以增强标准功能。UDF 是用 C 编程语言编写的。

以下是我的 UDF 的一部分：

```
/*Memory Allocation only at first call to the subroutine*/
if(CellAroundNodeFirstCallflag==0)
{
    CellAroundNodeFirstCallflag=1;
    Avg_CellAroundNode =(cell_t**)calloc((Nnum+1),sizeof(cell_t));
    for(i=0;i<Nnum;i++)
    {
        Avg_CellAroundNode[i] =(cell_t*)calloc((NCellANode+1),sizeof(cell_t));
    }
}

if (Avg_CellAroundNode!=NULL)
        {
            Message("Check: Not Null.... \n");              
        }

Message("CHECK Enter... \n.");

Message("Check:Array size %d %d \n",Nnum,NCellANode);

/*Initializing the matrix*/
for(i=0;i<Nnum;i++)
{
    for(j=0;j<NCellANode;j++)
    {
        Message("Check:Initalizing cell: %d %d \n",i,j);
        Avg_CellAroundNode[i][j]=-1;
    }
}

Message("CHECK  Exit...."); 
```

我对在 Windows 32 位中使用 VC++ 编译上述代码没有任何问题。但在 Windows 64 位和 Linux 32/64 位（使用 GCC）中。我收到以下错误：

```
 ==============================================================================
   Stack backtrace generated for process id 10801 on signal 1 :
   Please include this information with any bug report you file on this issue!
   ==============================================================================

   Data.In is read...
   Check: Not Null.... 
   CHECK Enter... 
   Check:Array size 10 20

   Check:Initalizing cell: 0 0 
   Check:Initalizing cell: 0 1 
   Check:Initalizing cell: 0 2 
   .
   .
   Check:Initalizing cell: 7 18 
   Check:Initalizing cell: 7 19 
   Check:Initalizing cell: 8 0 
   /opt/Fluent.Inc/fluent6.3.26/lnamd64/2ddp/fluent.6.3.26[0xcc0e0b]
   /opt/Fluent.Inc/fluent6.3.26/lnamd64/2ddp/fluent.6.3.26[0xcc0d61]
   /lib64/libpthread.so.0[0x355aa0de70]
   BubUDF/lnamd64/2ddp/libudf.so(NodeAvg+0x104)[0x2ba2089bc1bd]
   Error: fluent.6.3.26 received a fatal signal (SEGMENTATION VIOLATION). 
```

你们中的任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:20:31.397

您的第一次分配需要分配一个指向 cell_t 的指针，但您正在分配一个 cell_t。如果`cell_t`大小为 4 个字节，那么这就是它迄今为止在 32 位（与指针大小相同）上工作而在 64 位上失败的原因。在 64 位的情况下，它会比指针小，这意味着您没有分配足够的内存并最终超出已分配的范围。您的正确代码应该是：

```
Avg_CellAroundNode =(cell_t**)calloc((Nnum+1),sizeof(cell_t*)); 
```

不过，这并不能解释为什么它在 32 位 Linux 上会失败。

# mysql - 如何对mysql中多列的行进行排序

> ID：11263406
> 
> 赞同：0
> 
> 时间：2012-06-29T14:14:07.520
> 
> 标签：mysql, sql-order-by

如何对多列的行进行排序，以使排序保持这样的条件，即如果两个人具有相同的详细信息，他们将获得相同的排名。我将举一个例子来说明：这里首先按分数进行排序，如果平局有罚分，如果平局存在，则两者都被赋予相同的排名，下一个人获得调整后的排名。

```
###################
rank roll score penalty
 1    11    3     23
 2    12    3     20
 2    13    3     20
 2    14    3     20
 5    15    2     10 
```

所以问题是如何填充排名列？？如果在 mysql 中不可能，其他选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:26:23.073

测试数据：

```
/*
drop table test;
create table test (roll int, score int, penalty int);
insert into test (roll, score, penalty) values (11, 3, 23), (12, 3, 20), (13, 3, 20), (14,3,20), (15, 2, 10);
*/ 
```

它来了：

```
ALTER TABLE test ADD COLUMN `rank` int FIRST;
CREATE TEMPORARY TABLE tmp_test LIKE test;
INSERT INTO tmp_test (`rank`, roll, score, penalty)
SELECT cast(q.`rank` as unsigned integer) as `rank`, roll, score, penalty FROM (
SELECT IF(@prev != CONCAT(sq.score, '_', sq.penalty), @rownum:=@rownum2, @rownum) AS rank, 
@prev:=CONCAT(sq.score, '_', sq.penalty), 
@rownum2:=@rownum2 + 1,
sq.*
FROM (
  SELECT
  roll, score, penalty
  FROM
  test
  , (SELECT @rownum:=0, @prev:='', @rownum2:=1) r 
  ORDER BY score DESC, penalty DESC
) sq
) q;

UPDATE test t INNER JOIN tmp_test tt ON t.roll = tt.roll AND t.score = tt.score AND t.penalty = tt.penalty
SET t.rank = tt.rank;
/*optionally...*/    
DROP TABLE tmp_test; 
```

您需要在此处使用临时表，因为您无法更新正在读取的表。会话结束时将自动删除临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:25:04.650

尝试这个：

```
SET @row = 0; 
select min(a.Row) as Rank, s.Roll, s.Score, s.Penalty
from (
    select @row := @row + 1 AS Row, 
        Roll, 
        Score, 
        Penalty
    from Score
    order by Score desc, Penalty desc
) a
inner join Score s on a.Score = s.Score and a.Penalty = s.Penalty
group by Roll, Score, Penalty
order by min(Row) 
```

# c# - 如何跟踪数据库的更改？

> ID：11263409
> 
> 赞同：1
> 
> 时间：2012-06-29T14:14:28.213
> 
> 标签：c#, sql-server, asp.net-mvc-3, entity-framework, logging

我正在创建一个会计部门将使用的网站。跟踪不同项目的预算支出。

我将 SQL Server 2008 R2 用于数据库，将 ASP.net C# MVC 3 用于网站。

我的老板要求我做的是每次任何用户更新或创建项目时，我们都需要将更改记录到一个名为`Mapping_log`. 它应该记录正在保存或创建的整`Mapping`行，以及用户和日期戳。备注字段现在是必填字段，备注应保存到`Mapping_log`.

现在在编辑 PA 时，Notes 字段将始终为空，并且在其下方，它应该有一个按日期组织的旧笔记列表。我一直在研究可能使用 Nlog 和 Log4net，但我找不到任何适合我这种情况的好的教程。似乎这些模块主要用于错误日志记录，尽管这很重要，但并不是我目前正在尝试做的事情。

我需要一些指导...有没有人有任何建议或教程可以用来学习如何实施一个流程来跟踪网站用户对数据所做的更改。

感谢您的帮助/建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:35:24.490

您可以考虑 SQL Server 2008 引入的两个新功能：[更改跟踪](http://msdn.microsoft.com/en-us/library/bb933875%28v=sql.105%29.aspx)和[更改数据捕获](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)。

您可以使用它并避免使用自定义`Mapping_log`表。

但是，如果您需要应用更复杂的业务规则，也许在应用层而不是纯粹在数据库中这样做会更好。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:08:14.990

我只会创建两个触发器——一个用于更新，一个用于插入。

这些触发器看起来像这样 - 假设您还想在表中记录*操作*（插入与更新）`Mapping_Log`：

```
CREATE TRIGGER trg_Mapping_Insert
ON dbo.Mapping
AFTER INSERT
AS
   INSERT INTO dbo.Mapping_Log(col1, col2, ..., colN, User, DateStamp, Operation)
      SELECT 
         col1, col2, ..., colN, SUSER_NAME(), GETDATE(), 'INSERT'
      FROM
         Inserted 
```

（*您的 UPDATE 触发器将非常相似 - 只需将“插入”替换为“更新”出现的任何位置*）

这是为您“在幕后”完成的——一旦到位，您无需再做任何事情即可将这些操作“记录”到您的`Mapping_Log`表中。

# php - 每次实例化一个类时传入一个数据库连接对象有什么性能问题吗？

> ID：11263410
> 
> 赞同：0
> 
> 时间：2012-06-29T14:14:33.763
> 
> 标签：php, object, reference, scope

我的许多课程都需要访问数据库才能完成工作。一段时间以来，我一直在做类似以下的事情：

```
// Create a (one) database object
$mysqli = new mysqli("host", "username", "password", "db");

// Pass database object into each new object that requires database interaction as follows
$car = new Car($data, $mysqli);
$plane = new Plane($data, $mysqli);
// etc 
```

然后每个类都有一个私有的 $mysqli 成员，传入的 mysqli 对象在构造中被分配如下：

```
class Car {

    private $mysqli;

    public function __construct($data, $mysqli) {

        $this->mysqli = $mysqli;

    }

} 
```

然后类方法可以像这样轻松地使用 mysqli 对象：

```
public function fuelLevel() {

    $this->mysqli->query("SELECT fuel_level FROM fuel_tank");

} 
```

我的问题是，如果我要创建几千个这样的对象，我会遇到任何性能问题吗？我认为这样做在我的整个应用程序中在技术上只有一个数据库连接是正确的吗？或者我应该使用下面的引用（指针？）来避免担心的性能开销？

```
$car = new Car($data, &$mysqli);
$plane = new Plane($data, &$mysqli); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:16:24.733

不，这不可能造成任何可衡量的性能影响。您是对的，您通过引用传递了一个连接对象。在使用 PHP 进行开发时，这种优化级别不是您应该关心的。

您绝对不应该使用在 PHP 5.3 中已弃用的调用时传递引用 ( `new Car($data, &$mysqli)`)。

# email - 如何为 SaaS 应用程序中的租户提供其@companyName.application.com 特定的电子邮件服务？

> ID：11263411
> 
> 赞同：1
> 
> 时间：2012-06-29T14:14:38.480
> 
> 标签：email, smtp, saas, multi-tenant

在我们的 SaaS 应用程序中，每个公司（租户）都有自己的自定义域，例如**companyName.ourapp.com** 我们希望提供一些电子邮件服务，例如：

*   能够从 info@companyName.ourapp.com 和类似地址发送和接收电子邮件通知
*   能够在运行时以编程方式在需要时在客户的子域中创建新的电子邮件帐户。例如，我们将为每个“打开”创建单独的电子邮件，以便解析发送到该地址的电子邮件信息将被提取
*   类似的任务

现在我什至不知道在哪里看以及这可能如何工作。据我了解电子邮件它应该是某种自定义邮件服务器 (SMTP)，服务于所有子域并具有我们可以用来发送电子邮件、列出和检索消息等的 API。

请建议它是如何工作的，是否有任何组件可以用来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:19:12.143

对此有三种选择。

*   创建一个电子邮件服务器并以编程方式将其配置为接受或拒绝特定帐户。然后使用 cron 通过 pop3 或 imap 轮询并下载该帐户的消息。然后，您可以将它们发送给客户或在您的 Web 应用程序中处理它们。
*   创建一个由电子邮件服务器在收到每封电子邮件时触发的脚本。然后，该脚本可以处理收到的电子邮件的处理方式。
*   使用第三方在您的应用程序中通过 HTTP Post 接收电子邮件。例如，使用[CloudMailin](http://www.cloudmailin.com)将允许您创建一个自定义授权过滤器，该过滤器将实时调用您的应用程序并确定给定帐户是否存在以及是否应接受消息。

我为 Rails 写了一篇关于接收传入电子邮件的[博客文章](http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/)，但原则适用于任何编程语言和框架。

# haskell - 如何绑定一个键以切换到 XMonad 中的特定工作区？

> ID：11263414
> 
> 赞同：4
> 
> 时间：2012-06-29T14:14:45.007
> 
> 标签：haskell, xmonad

我正在运行一个双头设置，我非常想绑定喜欢`M-i`将左显示器的工作区切换到工作区 5，将右显示器的工作区切换到工作区 6。

我已经看过了`Xmonad.Actions`，但我看不到我在找什么。

就像是

```
xmonad `additionalKeysP` [("M-i", switchToWorkspaces)] 
```

`switchToWorkspace`我要的功能在哪里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T16:29:02.637

使用[XMonad.Actions.OnScreen](https://hackage.haskell.org/package/xmonad-contrib-0.13/docs/XMonad-Actions-OnScreen.html#v:onScreen)：

```
windows (greedyViewOnScreen 0 "5" . greedyViewOnScreen 1 "6") 
```

# c# - 检查几个布尔值是否具有相同的值

> ID：11263415
> 
> 赞同：2
> 
> 时间：2012-06-29T14:14:54.483
> 
> 标签：c#, boolean, compare

我有三个布尔变量。我需要检查三个都是真的还是三个都是假的。

我可以以“虚拟”方式做到这一点：

```
bool areSame = false; 
if(a && b && c)    
    areSame = true; 
else if (!a && !b && !c)
    areSame = true; 
```

我想知道是否有另一种更优雅的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T19:14:15.047

当然，您在这里只比较三个，但***未来***呢？您可能不得不在路上的某个地方相互比较十个布尔值。

```
 class Program
        {
            static void Main(string[] args)
            {
                Console.WriteLine(false.AllEqual(false, false)); 
                Console.WriteLine(true.AllEqual(false, false));
                Console.WriteLine(true.AllEqual(true, false));

                bool a = true;
                bool b = false;
                bool c = true;
                Console.WriteLine(a.AllEqual(b, c));
                b = true;
                Console.WriteLine(a.AllEqual(b, c));
                Console.ReadLine();
            } 
        }

        static class Extensions
    {
        static public  bool AllEqual(this bool firstValue, params bool[] bools)
        {
            return bools.All(thisBool => thisBool == firstValue);
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T14:17:03.460

您也可以在布尔值上使用相等运算符：

```
bool areSame = (a == b) && (a == c); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T14:18:11.037

用这个怎么样？

```
areSame = (a == b && b == c); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T14:31:35.020

关于什么：

```
bool areSame = (a && b && c) || (!a && !b && !c) ? true : false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-04T19:05:50.043

这种方法怎么样？它将允许您传入尽可能多的布尔值，并查看是否满足最小数量的真值。

```
public static bool AreMinNumberOfTruesMet(int minNumOftrue, params bool[] bools)
{
    var totalTrue = bools.Count(boolean => boolean == true);

    return totalTrue >= minNumOftrue;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-29T09:42:06.413

或在一行中：

```
bool allSame = !bools.Any(b => b != bools[0]) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-01-30T06:05:47.477

```
//all same
bool allSame = a == b == c == d;

//all false
bool allFalse = a == b == c == d == false; 
```

# python - python：通过检查每个实例的成员变量（列表）中的项目来选择实例列表

> ID：11263420
> 
> 赞同：0
> 
> 时间：2012-06-29T14:15:13.787
> 
> 标签：python

原始代码有点复杂，我将其简化为：

**鉴于：**

1.  类实例列表，例如：l=[c1,c2,c3, ...]
2.  每个实例都有一个成员变量列表，例如 c1.memList=[3,2,5], c2.memList=[1,2]

**Todo：** 选择 l 中那些 memList 只有 '3'-modulo item 的实例，例如 c3.memList=[3,6,9,3,27]

我**想**这样编码：

```
newl = [ n for n in l if len( [m for m in n.memList if m%3] )==0 ] 
```

**但是**：列表理解不允许这样说'm未定义'

**问题**：如何以pythonic方式编码？

**新编辑**：对不起，我打错字了（如果输入错误），它起作用了。我将提议结束这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:38:51.367

您提供的代码对我有用！我不确定你遇到了什么问题。但是，我会以不同的方式编写我的列表理解：

```
[n for n in l if not any(m % 3 for m in n.memList)] 
```

测试：

```
>>> class Obj(object):
...     def __init__(self, name, a):
...         self.name = name
...         self.memList = a
...     def __repr__(self):
...         return self.name
...     
>>> objs = [Obj('a', [3, 2, 5]), Obj('b', [3, 6, 9, 3, 27])]
>>> [n for n in objs if not any(m for m in n.memList if m % 3)]
[b] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:39:23.720

我没有收到有关“未定义 m”的任何错误，原因必须在此代码段之外。

```
newl = [ n for n in l if all([ m % 3 == 0  for m in n.memList]) ] 
```

我会推荐这样的东西， all() 函数提高了可读性。使用列表语法总是好的，因为它可以加快计算速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:33:03.633

我认为这就是您要寻找的。它比你的方法要冗长得多，但是 python 强调可读性。

```
 class c(object):
    def __init__(self, memlist):
        self.m = memlist

    c1 = c([3,6,9])
    c2 = c([1,5,7])
    l = [c1,c2]
    newl = []
    for n in l:
        b = True
        for x in n.m:
            if x % 3 != 0:
                b = False
        if b != False:
            newl.append(n) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:37:10.587

这是我所拥有的

```
c1.memList = [0, 1, 2, 3]
c2.memList = [0, 1]
c3.memList = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27] 
```

这个代码：

```
for y in l:
    newl = []
    for m in y.memList:
        if m%3 == 0:
            newl.append(m)
    print newl 
```

结果我得到了这个：

```
[0, 3]
[0]
[0, 3, 6, 9, 12, 15, 18, 21, 24, 27] 
```

# c++ - 如何在 C++ 中预分配对象而不是使用 new？

> ID：11263421
> 
> 赞同：1
> 
> 时间：2012-06-29T14:15:13.657
> 
> 标签：c++, xml, new-operator, xerces-c

我被要求查看的一段 C++ 表现不佳，原因是我们用于在 XML DOM 树中存储节点信息的对象上的“new”调用次数过多。我已经使用 AQTime 和 Very Sleepy 分析器验证了 new 是原因。

这些对象都包含其他几种对象类型和指向对象的指针作为成员，因此节点对象上的每个新对象也会调用所有成员对象的构造函数，我猜这就是每次分配花费这么长时间的原因。这也意味着我们不能只调用像 GlobalAlloc 这样的东西并请求一大块内存——它需要在之后进行初始化。

我一直在研究使用预分配技术来减轻这种糟糕的性能，但是我看到的那些涉及请求大块未初始化的内存，这不适合我需要的东西，而其他人最终最终还是调用 new ，取消任何我们可能会观察到性能提升，所以我想知道是否还有其他我不知道的选项？我有一种感觉，我所要求的无法完成，它要么快速检索未初始化的内存，要么缓慢地初始化内存。请证明我错了:)

谢谢

# php - 替换字符串中两点之间的文本

> ID：11263422
> 
> 赞同：0
> 
> 时间：2012-06-29T14:15:15.167
> 
> 标签：php, html, regex

这似乎很简单，但问题是我不会提前知道字符串的长度。我的客户有一个预制/购买的博客，它通过其 CMS 将 youtube 视频添加到帖子中 - 基本上我希望我的函数搜索如下字符串：

```
<embed width="425" height="344" type="application/x-shockwave-flash"     pluginspage="http://www.macromedia.com/go/getflashplayer" src="http://www.youtube.com/somevid"></embed> 
```

无论当前的宽度和高度值如何，我都想用我自己的常量替换它们，例如 width="325" height="244"。有人可以解释一下解决这个问题的最佳方法吗？

提前谢谢了！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:31:01.273

`DOMDocument`FTW！

```
<?php

define("EMBED_WIDTH", 352);
define("EMBED_HEIGHT", 244);

$html = <<<HTML
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<embed width="425" height="344" type="application/x-shockwave-flash"
       pluginspage="http://www.macromedia.com/go/getflashplayer" src="http://www.youtube.com/somevid"></embed>

</body>
</html>
HTML;

$document = new DOMDocument();
$document->loadHTML($html);

$embeds = $document->getElementsByTagName("embed");

$pattern = <<<REGEXP
|
(https?:\/\/)?   # May contain http:// or https://
(www\.)?         # May contain www.
youtube\.com     # Must contain youtube.com
|xis
REGEXP;

foreach ($embeds as $embed) {
    if (preg_match($pattern, $embed->getAttribute("src"))) {
        $embed->setAttribute("width", EMBED_WIDTH);
        $embed->setAttribute("height", EMBED_HEIGHT);
    }
}

echo $document->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-29T14:17:47.563

您应该使用正则表达式来替换它。例如：

```
 if(preg_match('#<embed .*type="application/x-shockwave-flash".+</embed>#Us', $originalString)) {
        $string = preg_replace('#width="\d+"#', MY_WIDTH_CONSTANT, $originalString);
    } 
```

“.*”表示任何字符。就像我们在升号后传递“s”标志一样，我们也接受换行符。“U”标志表示*不贪婪*。它将在找到的第一个结束嵌入标记处停止。

"\d+" 表示一位或多位数字。

# java - 将 eclipse 3.7 升级到 4.2 (Juno) 的最简单方法

> ID：11263423
> 
> 赞同：106
> 
> 时间：2012-06-29T14:15:17.057
> 
> 标签：java, eclipse

因此，由于 Eclipse juno 基于 4.2 而不是 3.7，那么升级到它的最简单方法是什么，除了安装一个单独的 juno 副本并将我现有的所有插件从 3.7 重新安装到其中吗？

eclipse.org 上似乎没有提到直接的升级路径。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-06-29T15:04:11.013

Eclipse 几乎不能从 3.7.1 更新到 3.7.2，更别提从 3.7 到 4.2。

如果您尝试对现有的 Eclipse 开发环境进行如此大的升级，那么您将把开发环境的生命掌握在自己手中。我不了解你，但我的开发环境太重要了，不能冒险升级。

**当您想要更改开发环境时，请**始终创建一个新的 Eclipse 目录和新的 Eclipse 工作区。****

 **将 Eclipse 4.2 解压缩到一个新目录，然后一次添加一个插件。可以使用 Bananeweizen 的方法复制 Eclipse 3.7 插件，也可以手动添加。查看您使用的插件是否已针对 Eclipse 4.2 升级可能是一个好主意。

创建一个新的 Eclipse 4.2 工作区，并从 Eclipse 3.7 工作区复制项目代码。如果您以后发现问题，您可以退回到 Eclipse 3.7 和您的 Eclipse 3.7 工作区。

当您有一个可以工作的 Eclipse 4.2 环境时，将其压缩备份并保留 zip 文件，以便在 Eclipse 损坏时恢复您的 Eclipse 4.2 环境。

**永远不要考虑改变你的工作环境。**

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-06-29T15:49:08.910

[从http://download.eclipse.org/eclipse/downloads/drops4/R-4.2-201206081400/](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2-201206081400/)下载**平台运行时**二进制文件。这基本上是一个“没有插件的 Eclipse”。运行它（在一个新的工作空间上），选择**File -> Import -> Installation -> From existing Installation**并将向导指向您现有的 3.7 目录。勾选“安装最新版本”，点击完成。

 **这会将在 3.7 安装中找到的最新版本的插件安装到 4.2 安装中。遗憾的是，大多数人不知道此功能并在升级时手动安装每个插件。

额外奖励：使用相同的向导，您还可以将已安装功能列表导出到可以与同事共享的文件中，因此您都安装了相同的插件。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-17T19:37:08.780

我刚刚将[http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)添加到 Window -> Pref -> Install/Update -> Available Software Sites

之后，您可以在帮助中更新您的软件 -> 检查更新

似乎对我来说很好用

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-08-08T07:16:16.520

我花了 2 分钟来迁移（最长的部分是下载；））：

*   下载 eclipse 的最新版本：http: [//download.eclipse.org/eclipse/downloads/](http://download.eclipse.org/eclipse/downloads/)

*   提取存档，启动新版本并选择您现有的工作区

*   从菜单文件 -> 导入

    *   选择安装/从现有安装

    *   它会让您选择要保留的扩展名（仍然兼容）

注意：我从 Eclipse 4.2 到 4.3 测试了这种操作。我添加此答案是因为我认为与其他答案相比，此解决方案快速、简单且安全。****

# javascript - Page.ResolveUrl 在 javascript 中不起作用

> ID：11263425
> 
> 赞同：2
> 
> 时间：2012-06-29T14:15:22.457
> 
> 标签：javascript, jquery, asp.net

在我使用的 jQuery 代码中`ResolveUrl("~/DynamicMenu.ashx")`。

但它只返回确切的字符串：

> `"ResolveUrl("~/DynamicMenu.ashx")"`

这是一段代码：

```
pageIndex = pageIndex + 1;
var CountryCode = getCookie("SetCountry");
var urlToHandler = '<%= ResolveUrl("~/DynamicMenu.ashx") %>'; 
urlToHandler = urlToHandler + CountryCode + "&PageIndex=" + pageIndex;
alert(urlToHandler); 
```

我的**ResolveUrl()**代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T20:16:16.030

正如*poncha 所*指出的，问题在于就 ASP.NET 而言，您的 .js 文件中传递的内容是一个字符串。在 IIS 交付之前，它不会应用任何类型的呈现。它得到与任何其他*内容*文件相同的处理，例如 a`.jpg`或`.png`.

为了调用服务器端方法（如`ResolveUrl`），您需要`<% ... %>`在任何由 ASP.NET*解析*`.aspx`的页面（如或`.master`文件）中使用语法。

* * *

顺便说一句，这些小代码块有很多不同的名称：

> *   [内联表达式](http://support.microsoft.com/kb/976112)
> *   [嵌入式代码块](http://msdn.microsoft.com/en-us/library/ms178135(v=vs.100).ASPX)
> *   [代码块](http://weblogs.asp.net/scottgu/archive/2010/12/16/asp-net-mvc-3-implicit-and-explicit-code-nuggets-with-razor.aspx)
> *   [服务器端脚本分隔符](http://msdn.microsoft.com/en-us/library/aa239615(v=vs.60).aspx)
> *   [代码渲染块](http://msdn.microsoft.com/en-us/library/k6xeyd4z(v=vs.100).aspx)
> *   [ASP 指令](http://msdn.microsoft.com/en-us/library/ms524741(v=vs.90).aspx#aspdirectives)

* * *

特别是，我们想要一个具有语法的[*显示表达式*](http://msdn.microsoft.com/en-us/library/6dwsdcf5.aspx)`<%= ... %>`，其中：

> 等号后输入的值写入当前页

知道了这一点，我们可以使用以下方法构建自己的 URL [`ResolveClientUrl()`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveclienturl.aspx)：

> 返回适合客户端访问 Web 服务器上资源的 URL 字符串

为此，我们将传入[**Web 应用程序根运算符**](http://msdn.microsoft.com/en-us/library/ms178116.aspx)或`~`字符，其中 ASP.NET：

> 将 ~ 运算符解析为当前应用程序的根：

通过结合这些，我们可以将显示表达式的结果保存到 JavaScript 变量中，方法是在您的母版页上放置以下代码（改编自[Joel Varty 的博客](http://weblogs.asp.net/joelvarty/archive/2009/07/17/resolveurl-in-javascript.aspx)）：

```
<script type="text/javascript">
    var baseUrl = '<%= Page.ResolveClientUrl("~/") %>';
</script> 
```

由于 JavaScript 变量本质上是全局的，因此任何其他脚本现在都可以访问该`baseUrl`变量，因此我们可以通过以下脚本从 .js 文件中使用它：

```
function ResolveUrl(url) {
    return url.replace("~/", baseUrl);
} 
```

现在您可以`ResolveUrl("~/DynamicMenu.ashx")`直接从您的 javascript 文件中调用，它会通过删除“~/”并将其替换为服务器端脚本之前创建的 baseUrl 来创建适当的 URL。

* * *

延伸阅读：

*   [ResolveUrl 和 ResolveClientUrl 有什么区别？](https://stackoverflow.com/q/1874636/1366033)
*   [相对网址](http://www.webreference.com/html/tutorial2/3.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:26:36.860

试试这个解决方案 - [ResolveUrl in Javascript](http://weblogs.asp.net/joelvarty/archive/2009/07/17/resolveurl-in-javascript.aspx)

# sharepoint - 我可以为 TFS 提供非 SharePoint 门户吗？

> ID：11263426
> 
> 赞同：1
> 
> 时间：2012-06-29T14:15:26.590
> 
> 标签：sharepoint, tfs

我发现 SharePoint (WSS 3) 门户在使用和管理 TFS 时很混乱。我想使用 Scrum 模板并可以访问所有需要的报告，但没有 SharePoint。是否有任何其他机制可以在 TFS 上提供门户结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T18:26:11.793

在`Team Settings`>上`Portal Settings`，您可以将任何网站设置为将在该`Show Project Portal`选项上打开的团队门户。 ![门户网站](../Images/be252faa0390a586bcb241f54bc6f2ac.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T14:30:15.300

您无需安装 SharePoint 即可查看报告（除非您正在谈论 Excel Services 报告，但它们很少）。Team Explorer 中的 Reports 文件夹将显示您需要的报告，以及 SQL 报告服务网站。

# kml - 使用 vb.net 将 kml 文件加载到谷歌地球

> ID：11263428
> 
> 赞同：-1
> 
> 时间：2012-06-29T14:15:52.080
> 
> 标签：kml, google-earth-plugin

请任何人都可以帮助使用 vb.net 将 kml 文件加载到谷歌地球，我还有另一个问题如何将 xml 文件解析为 kml 文件。请尽快回答我的问题。

带着敬意

菲罗兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:03:38.587

您是在谈论 Google 地球桌面客户端吗？如果您可以执行命令（使用 Process.Start()？我不是 vb.net 开发人员...），使用 KML 文件的名称启动 Google 地球将起作用：

```
googleearth.exe "filename.kml" 
```

如果您正在谈论在 .net 应用程序中运行 Google 地球插件（因为您的问题被标记为 google-earth-plugin），您可以使用 .net 代码中的 javascript 界面，就像您对插件执行所有命令一样。有关通过 Javascript API 加载 KML 的不同方法的概述，请参阅本文：[在 Earth API 中使用 KML 的概述](https://developers.google.com/earth/articles/earthapikml)。

您必须更具体地了解有关将 xml 解析为 KML 文件的问题。KML*就是*KML（尽管显然不是所有的 KML 都是 XML。您必须讨论 XML 的格式（可能在不同的问题中）才能获得解决该问题的帮助。

同时，[KML 参考](https://developers.google.com/kml/documentation/kmlreference)提供了有关 KML 规范的大量详细信息。那里也有许多 KML 转换器...尝试四处搜索，看看是否有任何可以帮助您处理任何格式的 XML。

# .net - Visual Studio 探查器，如何追踪 [clr.dll] 的使用情况

> ID：11263429
> 
> 赞同：9
> 
> 时间：2012-06-29T14:15:52.293
> 
> 标签：.net, visual-studio, profiler

在使用 Visual Studio 中的分析器来跟踪昂贵的函数时，我有时会看到大部分工作最终都在 [clr.dll] 中。这基本上相当于一个黑匣子，我想知道是否有办法追查为什么它在那里花了这么多时间。

我假设 clr.dll 处理诸如 JIT 编译、加载程序集和管理 appdomains、垃圾收集、反射等之类的事情。但是实际上很难判断是什么代码导致它花费了这么多时间。

很明显，除了运行时本身之外，还有其他一些代码导致它在 clr.dll 中花费了这么多时间，那么您如何追踪哪些代码有问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:49:55.597

你需要知道你的代码的哪一部分——你可以编辑和编译的代码，这是你唯一可以修复的代码——那部分代码占了相当大比例的时间使用。

知道*clr.dll*使用了很多时间是没有用的，除非您能分辨出代码的哪一部分负责它。

该信息在调用堆栈中。

如果你有一个方法，甚至是一行代码，它在堆栈上存在一定百分比的时间，例如 20%，那么它负责大约那个百分比的时间。如果你能以某种方式消除那行代码（或让它花费更少的时间），那么总时间的 20% 将变为*零，或者几乎为零，*给你一个 1.0/0.8 = 1.25 或 25% 的加速因子

那么如何找到这样的线条呢？ [*这是我使用的方法。*](https://stackoverflow.com/a/378024/23771) 没有人声称它很漂亮，除非总的结果得到赞赏。如果重复应用，[*可能会有很大的加速因子*](https://scicomp.stackexchange.com/a/1870/1262)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T18:32:08.350

根据我的经验，它可能在 GC 中。如果您使用 LINQ，几乎可以肯定它在 GC 中。我推荐 CLRProfiler 来追踪 Gen 0 垃圾邮件。

# proxy - 记录来自非浏览器应用的 HTTP 请求

> ID：11263430
> 
> 赞同：0
> 
> 时间：2012-06-29T14:15:55.130
> 
> 标签：proxy, httpwebrequest

我想将来自外部源的 http webrequests 记录到我桌面上的自定义软件（windows xp）。据我所知，无法在此自定义应用程序上配置代理。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:19:33.770

您可以将[Fiddler](http://www.fiddler2.com/fiddler2/)设置为[反向代理](http://www.fiddler2.com/fiddler/help/reverseproxy.asp)。这将允许您检查传入的请求。

# java - LWJGL - 简单程序不起作用

> ID：11263439
> 
> 赞同：1
> 
> 时间：2012-06-29T14:16:35.113
> 
> 标签：java, lwjgl

我正在关注 lwjgl wiki 上的教程，但是当我在第一个教程中运行程序时，什么也没有发生（没有出现窗口）。

这是我的程序代码：

```
public Test()
{}

public void start() {
    try {
        Display.setDisplayMode(new DisplayMode(800,600));
        Display.setTitle("Test");
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    }
    // init OpenGL here
    while (!Display.isCloseRequested()) {
        // render OpenGL here
        Display.update();
    }
    Display.destroy();
}

public static void main(String[] argv) {
    Test displayExample = new Test();
    displayExample.start();
} 
```

任何想法为什么当我运行它时什么都没有发生？我使用的 IDE 是 eclipse，我按照教程所示设置了构建路径。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:07:22.483

这些应用程序在我的 LWJGL 配置上运行良好。

[单击此处获取有关设置 LWJGL 工作区的文本教程。](http://thecodinguniverse.com/lwjgl-workspace/)

[单击此处获取有关设置 LWJGL 工作区的视频教程。](http://youtu.be/0v56I5UWrYY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:23:49.097

如果您没有将 lwjgl jar 添加到类路径中，然后告诉 lwjgl jar 从哪里获取本地人，它将无法工作。虽然奇怪的是之前没有抛出错误。它不应该简单地关闭。对于 Eclipse，您进入构建路径并右键单击 lwjgl.jar 并说编辑本机或类似的东西。然后查找或键入 lwjgl 的本地路径，即 .dll 或 .so 等...

另一个问题可能是这样的：“public class Test {}”里面什么都没有！！！尽管您发布时可​​能是典型问题

# wix - WIX 和先决条件（System32 中的 DLL/OCX，...）

> ID：11263443
> 
> 赞同：0
> 
> 时间：2012-06-29T14:16:39.630
> 
> 标签：wix, wix3.6

*我有什么：*
我有一个用 WIX 3.6 编写的安装例程（带有热、蜡烛、光）

*问题是什么：*
它只安装应用程序文件夹文件（注册 activex 组件、注册和启动服务、制作 regentries、. ..) 而不是 System32 文件夹中的 DLL/OCX。也没有检查 ADO（ActiveX 数据对象）的可用性。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:08:23.760

*   如果您创建的文件需要安装到 System32，那么您需要手动编辑 .wxs 文件以包含这些文件。

*   如果您有需要安装的第三方必备软件，一般来说您会使用供应商提供的分发方法（安装程序）来安装它们。然后，您可以[创建一个 WiX 包](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)，在安装包之前安装您的先决条件。

# wpf - 触发器不更新

> ID：11263448
> 
> 赞同：0
> 
> 时间：2012-06-29T14:17:05.903
> 
> 标签：wpf, mvvm, triggers, visualstatemanager, multidatatrigger

这是我想做的伪代码

```
IF NOT ISDIRTY
    THEN VISIBILITY EQ VISIBILITY.COLLAPSED

IF ISDIRTY AND ISVALID        
    THEN VISIBILITY EQ VISIBILITY.VISIBLE AND COLOR = GREEN

IF ISDIRTY AND NOT ISVALID        
    THEN VISIBILITY EQ VISIBILITY.VISIBLE AND COLOR = RED 
```

下面的 ToggleButton 的样式在第一次更新时获得正确的条件，但此后不会改变。

例如，如果我进行了不会使 vm 无效的更改，则颜色正确为绿色。但是，如果我随后进行更改以使 vm 无效，它会保持绿色，而它应该是红色的。相反，如果第一次更新使 vm 无效，则颜色正确设置为红色，但纠正无效错误但使 vm 变脏的第二次更新不会将颜色更改为绿色。

我究竟做错了什么？

我还没有尝试过 Visual State Manager，但这会是首选方式吗？看起来怎么样？

# 用法

```
 <Ellipse Style="{StaticResource EditedStateIndicatorStyle}"/> 
```

# 样式

```
<Style x:Key="EditedStateIndicatorStyle" TargetType="{x:Type Ellipse}">
    <Setter Property="Width" Value="8" />
    <Setter Property="Height" Value="8" />
    <Setter Property="Margin" Value="8,0"/>
    <Setter Property="SnapsToDevicePixels" Value="false" />
    <Setter Property="Focusable" Value="False" />

    <Style.Triggers>

        <!-- Dirty, && NOT Valid -->
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsDirty}" Value="true"/>
                <Condition Binding="{Binding IsValid}" Value="false"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Fill" Value="Red"/>
            <Setter Property="ToolTip" Value="You got errors, fool!"/>
        </MultiDataTrigger>

        <!-- Dirty, but Valid -->
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding IsDirty}" Value="true"/>
                <Condition Binding="{Binding IsValid}" Value="true"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Fill" Value="Green"/>
            <Setter Property="ToolTip" Value="You made changes!"/>
        </MultiDataTrigger>

        <!-- Not Dirty, don't show anything -->
        <DataTrigger Binding="{Binding IsDirty}" Value="false">
            <Setter Property="Visibility" Value="Collapsed"/>
        </DataTrigger>
    </Style.Triggers>

</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:13:39.700

如果您的 ViewModel 正在实施，请[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)确保它正确地引发了事件。说我推荐一个简化：

```
<Style TargetType="{x:Type Ellipse}">
    ...
    <Setter Property="Fill" Value="Green" />
    <Setter Property="ToolTip" Value="You made changes!" />

    <Style.Triggers>
        <!-- Dirty, but NOT Valid -->
        <DataTrigger Binding="{Binding IsValid}" Value="false">
            <Setter Property="Fill" Value="Red" />
            <Setter Property="ToolTip" Value="You got errors, fool!" />
        </DataTrigger>

        <!-- Not Dirty, don't show anything -->
        <DataTrigger Binding="{Binding IsDirty}" Value="false">
            <Setter Property="Visibility" Value="Collapsed"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:52:33.073

尝试将填充设置为默认颜色（绿色）作为触发器外部的设置器（即在样式中）

# java - 每个 JTree 节点存储和使用多个值

> ID：11263450
> 
> 赞同：1
> 
> 时间：2012-06-29T14:17:09.980
> 
> 标签：java, swing, jtree, netbeans6.8, treemodel

好的，我对 Java 很陌生，所以请多多包涵。

我正在使用 Netbeans 6.8 编写一个包含`JTree`组件的小型桌面应用程序，我的要求是我能够保存和加载树结构，但该结构允许每个树节点包含三项信息 - 文本显示为节点、唯一标识符和文件名。

当然，当单击节点时，我还需要能够获取所有三位信息。

我已经使用`getModel()`and `XMLDecoder`/成功保存并加载了树模型`encoder`，但这当然只保存了默认的树模型。

我已经学习了几个关于创建自定义树模型的教程，但我发现它们令人困惑，并且我无法将他们告诉我的内容转移到我自己的项目中，因为当然他们通常会一次性创建一个完整的示例应用程序。

假设像这样的树模型甚至是可能的，请有人解释如何创建这样的模型，最重要的是，如何将模型放入`JTree`应用程序中已经存在的模型中（以及我将如何检索信息单击节点时-我当前可以找到所选节点并检索其文本）

如果这不可能，我很乐意听到任何导致相同功能的替代方法。

**已经找到了一个解决方案**，感谢大家的努力，但是正确的答案必须先交给安德鲁才能发布！

对于那些感兴趣的人：我使用 Netbeans IDE 创建了一个新`Javabean`对象。一旦我意识到这个和普通对象之间的区别，我就设法将一个新创建的`Javabean`对象放入树节点中。只是为了让一切都好起来，我原来的保存方法仍然有效！

谢谢大家的努力。

MVK

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:23:05.273

> 要显示为节点的文本、唯一标识符和文件名。

将它们封装在[JavaBean](http://docs.oracle.com/javase/tutorial/javabeans/index.html) `Object`中并使用适当的渲染器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:09:29.827

默认情况下，JTree 使用 DefaultTreeModel 反过来使用 DefaultMutableTreeNode 来表示每个节点。您可以将任何对象分配给节点，并且将通过调用它的 toString() 方法来呈现它。

因此，最简单的解决方案是将您需要的所有数据封装在一个类中，并实现 toString() 方法以返回您想要显示的任何内容。作为额外的奖励，如果您按照[JavaBeans](http://docs.oracle.com/javase/tutorial/javabeans/index.html)规范实现您的类，您将免费获得 XML 序列化。

你真的应该看看 Swing 教程，特别是[How to use Trees](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)。阅读如何处理树、列表和表格后，模型、渲染器和编辑器会更加清晰。

# c# - XML文件复制问题c#“XML文档必须有一个顶级元素。错误处理资源”

> ID：11263455
> 
> 赞同：0
> 
> 时间：2012-06-29T14:17:23.173
> 
> 标签：c#, xml, copy

在我的程序中，我正在检查是否存在 xml 文件。如果该文件不存在，我只需在指定目录中创建它，然后尝试将另一个 xml 的内容复制到新的 xml 文件中。同样，如果文件存在，我将复制另一个文件的内容并覆盖现有文件。当我运行我的应用程序并检查目录时，我想要在 xml 代码之外复制的文件也显示“XML 文档必须具有顶级元素。错误处理资源”。

到目前为止，我已经尝试过： System.IO.File.Copy(sourceFile, targetPath); 用于文件复制。

我的代码块与此类似：

```
string sourceFile= "C:\\fileIWantToCopy.xml;
string targetpath= "C:\\NeedsFilledWithSourceContents.xml;

if (File.Exists(targetPath) == false) {
    File.Create(targetPath);
    System.IO.File.Copy(sourceFile, targetPath, true);
} else {
    System.IO.File.Copy(sourceFile, targetPath, true);
}

XDoc.Save(String.Format(targetPath)); 
```

同样，我只需要一些关于如何将一个 xml 文件的内容复制到另一个新创建的文件的提示，而不会出现“XML 文档必须具有顶级元素。错误处理资源”错误。我的源 xml 文档的第一行是：

< ? xml 版本="1.0" 编码="utf-8" ？>

然后继续进行典型的头部/身体构造。

在将任何内容复制到新文件之前，我是否需要将内容写入新文件？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:26:22.833

使用`System.IO`文件操作复制现有文件或保存`XDocument`您在内存中的文件。但是两者都做完全没有意义！

```
if (File.Exists(sourceFile)) {
    System.IO.File.Copy(sourceFile, targetPath, true);
} else {
    XDocument doc = new XDocument(
        new XDeclaration("1.0", "utf-8", "yes"),
        new XComment("This is a test"),
        new XElement("root")
    );
    doc.Save(targetPath);
} 
```

* * *

如果你想保存`XDocument`这个就足够了，不需要提前创建文件。

```
doc.Save(targetPath); 
```

MSDN上的描述说

> ```
> XDocument.Save(String) 
> ```
> 
>         将此 XDocument 序列化为文件，覆盖现有文件（如果存在）。

所有节点必须嵌入单个根节点（任何名称都可以）并且至少根节点必须存在

好的

```
<?xml version="1.0" encoding="utf-8" ?> 
<html>
    <head />
    <body />
</html> 
```

错误（两个根节点）

```
<?xml version="1.0" encoding="utf-8" ?> 
<head />
<body /> 
```

错误（没有根节点）

```
<?xml version="1.0" encoding="utf-8" ?> 
```

* * *

另外，我看不出它有什么`String.Format`用，没有额外的参数。

而且我也不喜欢`if (File.Exists(targetPath) == false)`. 更好：`if (!File.Exists(targetPath))`。更好的是，颠倒条件以获得积极的问题

```
if (File.Exists(targetPath)) {
    System.IO.File.Copy(sourceFile, targetPath, true);
} else {
    File.Create(targetPath);
    System.IO.File.Copy(sourceFile, targetPath, true);
} 
```

# html - 无法让 css 表格边框在整个表格和嵌套表格中保持一致

> ID：11263460
> 
> 赞同：1
> 
> 时间：2012-06-29T14:17:48.567
> 
> 标签：html, css, border, border-layout

我表中的第一行有三个单元格。我正在尝试设置具有四个单元格的第二行。我希望所有的边界都是一样的。但是，我无法做到这一点，因为底行（有四个单元格的行）的单元格要么有双边框，要么没有边框。我已经厌倦了border-collapse和border-style-right，没有运气。我怎样才能让底行看起来就像顶行一样 - 有一个 1px 边框 - 除了 4 个单元格而不是 3 个单元格？这是我的代码：

```
<style type="text/css"> 
table
{
    border-collapse:collapse;
}
table.outer
{
    border: 1px black solid;
    border-collapse: collapse;
    width:750px;
}
table.outer td
{
    border: 1px black solid;
    border-collapse: collapse;
}
table.nested
{
    width: 750px;
}
table.nested td
{
    border:0px black solid;
    border-collapse:collapse;
}   
</style>    
</head>
<body>

<table class="outer">
  <tr>
    <td>foo 1</td>
    <td>foo 2</td>
    <td>foo 3</td>
  </tr>
        <td colspan="3">
            <table class="nested">
              <tr>
                <td>bar 1</td>
                <td>bar 2</td>
                <td>bar 3</td>
                <td>bar 4</td>
              </tr> 
            </table>
        </td>   
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:31:50.230

有什么理由必须有一个嵌套表吗？如果您希望两行看起来相同，请尝试添加更多行并调整`colspan`每个单元格的行。如果找到三和四的最小公倍数，则可以制作一个有十二列的表，并将`colspan`三列的行的 设置为四，将`colspan`四列的行的设置为三。

在表格中嵌套表格可能会出现 CSS 问题，而且对于页面来说也更重。

```
<table class="outer">
  <tr>
    <td colspan="4">foo 1</td>
    <td colspan="4">foo 2</td>
    <td colspan="4">foo 3</td>
  </tr>
  <tr>
    <td colspan="3">bar 1</td> 
    <td colspan="3">bar 2</td>
    <td colspan="3">bar 3</td>
    <td colspan="3">bar 4</td>
  </tr>
</table> 
```

这样`td`，如果您想在两行之间共享一个通用样式，您也可以只使用一个 CSS 选择器来设置所有单元格的样式。

答案的额外解释：（使用LCM作为表格的总列数确保每个单元格可以与其行中的其他单元格大小相同，而不会影响其他行中单元格的大小。您可以制作一行有 n 个单元格，只要表格中的总列数可以被 n 整除。因此，对于这个 12 列宽的表格，您可以有 1、2、3、4、6 或 12 列的行，并且所有单元格可以以表格的中间为中心。此外，如果您想动态生成表格，使用此方法编写一个函数来创建每行所需的单元格并不难。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:23:49.493

我看到两个问题。首先，`<td>`嵌套表周围的标签应该是真正的`<tr>`标签。其次，嵌套表的`border`宽度应该是`1px`，而不是`0px`。

HTML：

```
<table class="outer">
    <tr>
        <td>foo 1</td>
        <td>foo 2</td>
        <td>foo 3</td>
    </tr>
    <tr colspan="3">
        <table class="nested">
            <tr>
                <td>bar 1</td>
                <td>bar 2</td>
                <td>bar 3</td>
                <td>bar 4</td>
            </tr> 
        </table>
    </tr>   
</table> 
```

CSS：

```
table {
    border-collapse:collapse;
}

table.outer {
    border: 1px black solid;
    border-collapse: collapse;
    width:750px;
}

table.outer td {
    border: 1px black solid;
    border-collapse: collapse;
}

table.nested {
    width: 750px;
}

table.nested td {
    border:1px black solid;
    border-collapse:collapse;
} 
```

JS 小提琴：http: [//jsfiddle.net/5D2hN/](http://jsfiddle.net/5D2hN/)

# javascript - JQuery 处理事件，但不执行函数

> ID：11263463
> 
> 赞同：1
> 
> 时间：2012-06-29T14:17:50.457
> 
> 标签：javascript, jquery, click

我有一个带有 class="evidence" 的 div，其中包含我想通过 jQuery 管理的 4 个元素（按钮）。我必须更改单击按钮的背景颜色，并重置其他 3 个按钮背景以模拟切换按钮

我写了这个：

```
$('.evidence [id^=button]').on('click', function () {
    $('.evidence [id^=button]').not($(this)).css('backgroud-color', '#88e885');
    $(this).css('backgroud-color', '#559153');
}); 
```

按钮 ID 以 button 开头，并且按钮是 div class="evidence" 的子级。我可以使用 firebug 进行调试，并且可以看到 $('.evidence [id^=button]') 上的断点停止，但该函数未执行。

你能帮助我吗？

已编辑

这是我的 HTML

```
<div class="evidence">
    <table>
        <tr>
            <td><asp:Button runat="server" CssClass="btn" ID="button1"/></td>
            <td><asp:Button runat="server" CssClass="btn" ID="button2"/></td>
            <td><asp:Button runat="server" CssClass="btn" ID="button3/></td>
            <td><asp:Button runat="server" CssClass="btn" ID="button4"/></td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:38:00.387

我假设您的 HTML 看起来像这样：

```
<div class="evidence">
    <input type="button" value="1" />
    <input type="button" value="2" />
    <input type="button" value="3" />
    <input type="button" value="4" />
</div> 
```

此 jQuery 适用于上述标记：

```
$(".evidence input[type=button]").click(function(){
    $(".evidence input[type=button]").css('background-color', '#559153'),
    $(this).css('background-color', '#88e885');
}); 
```

这比您提供的代码示例更简单；单击按钮时，它会重置按钮上的所有背景颜色，然后设置单击按钮的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:24:01.777

我了解您有一些 HTML，例如：

```
<div class="evidence">
    <button id="button-n1">1<button>
    <button id="button-n2">2<button>
    <button id="button-n3">3<button>
    <button id="button-n4">4<button>
</div> 
```

你有一个错字`background-color`，而是你写`backgroud-color`的，那是因为你的代码不工作。

我建议将该[`.siblings()`](http://api.jquery.com/siblings/)方法用于您想做的事情。

```
$('.evidence [id^=button]').on('click', function () {
   $(this)
     .css('background-color', '#559153')
     .siblings("[id^=button]").css('background-color', '#88e885');
}); 
```

[这是一个工作 jsfiddle](http://jsfiddle.net/YCGyt/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:25:59.610

我个人建议`click`从轻微的性能角度预先选择事件范围之外的按钮。这是假设按钮不会更改。

> 我有一个包含 4 个元素（按钮）的 class="evidence" 的 div

考虑到这一点，我使用了以下选择器：

```
var buttons = $('.evidence input[type="button"]');
$(buttons).click(function()
{
    $(buttons).css('background', '#88e885').not(this).css('background', '#559153');
}); 
```

这也意味着您可以轻松地在一个地方更改选择器，而无需进行更多不必要的更改。

你可以更进一步，制作一个 jQuery 插件......

```
(function ($)
{
    $.fn.buttonToggler = function (inactiveColour, activeColour)
    {
        var buttons = this;
        return buttons.click(function()
        {
           buttons.css('background', inactiveColour).not(this).css('background', activeColour);
        });
    }
})(jQuery);

$('.evidence input[type="button"]').buttonToggler('#88e885', '#559153');
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:21:43.503

您需要在证据之后将选择器过滤为某些内容。

`$('.evidence div[id^=button]')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:21:33.297

试试这个 - [http://jsfiddle.net/A9jzR/](http://jsfiddle.net/A9jzR/)

```
$('div.evidence button').on('click', function() {
    $('div.evidence button').css('background', '#88e885');
    $(this).css('background', '#559153');
}); 
```

无需申请`.not()`。您可以用切换颜色为所有按钮着色，然后为您单击的按钮提供所需的外观。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T14:45:22.377

您可以改为委托事件，这更有意义。此外，如果按钮都是同级按钮，请使用该`.siblings()`函数获取其他按钮：

```
$('.evidence').on('click', '[id^=button]', function () {
    $(this).css('background-color', '#559153')
        .siblings().css('background-color', '#88e885');
}); 
```

如果他们不是兄弟姐妹，例如：

```
$('.evidence').on('click', '[id^=button]', function () {
    $(this).css('background-color', '#559153')
        .closest('.evidence').find('[id^=button]')
        .css('background-color', '#88e885');
}); 
```

# mysql - Rails 适配器“mysql”在 ruby irb 上工作，rake db:seed 出错

> ID：11263473
> 
> 赞同：0
> 
> 时间：2012-06-29T14:18:17.370
> 
> 标签：mysql, ruby-on-rails

运行时出现以下错误`rake db:seed`（迁移时也会出错）

```
rake aborted!

NULL pointer given 
```

我正在使用 Rails 3.2.6 和 MySQL 2.8.1。

# python - Web2py 导入模块

> ID：11263474
> 
> 赞同：2
> 
> 时间：2012-06-29T14:18:17.863
> 
> 标签：python, web2py

我在 web2py 的模块路径中有模块，并导入我刚刚放入的那些模块

```
import mymodule 
```

它工作得很好，但**有时**它会以某种方式粉碎并显示一个错误说

```
ImportError: No module named mymodule 
```

我想使用`local_import`，但它不再支持`Web2py`>`1.99.5`

修复它我删除所有然后它`.pyc`工作`web2py/gluon`但有时不是

即使一切正常，当我编辑一个模块时，我必须重新启动 web2py 以获得新的修改！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:31:31.007

> ImportError：没有名为 mymodule 的模块

我认为有时当导入的模块本身存在错误时会出现该错误（即，它没有正确传递真正的错误）。尝试从标准 Python shell 导入和使用模块，看看模块中是否存在需要修复的错误。

> 我想使用`local_import`，但它不再支持`Web2py`>`1.99.5`

`local_import`应该仍然有效，它不再是首选方法。如果它不起作用，请将其报告为错误。

> 当我编辑一个模块时，我必须重新启动 web2py 以获得新的修改

是的，这就是 Python 的工作原理。但是，在开发过程中，您可以通过执行以下操作让 web2py 在更改时自动重新加载：

```
from gluon.custom_import import track_changes; track_changes(True) 
```

# mongodb - EntityManagerFactory.createEntityManager() - 非关系平台不支持此操作

> ID：11263475
> 
> 赞同：0
> 
> 时间：2012-06-29T14:18:19.257
> 
> 标签：mongodb, eclipselink, java-ee-6, nosql

我正在研究[https://blogs.oracle.com/arungupta/entry/java_ee_6_and_nosql](https://blogs.oracle.com/arungupta/entry/java_ee_6_and_nosql)中的示例。

这是模型 src [http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/examples/org.eclipse.persistence.example.jpa.nosql.mongo/src/的链接](http://dev.eclipse.org/svnroot/rt/org.eclipse.persistence/trunk/examples/org.eclipse.persistence.example.jpa.nosql.mongo/src/)

导致我出现问题的部分是：

```
EntityManagerFactory factory;
...
test.factory = Persistence.createEntityManagerFactory("mongo");
EntityManager em = test.factory.createEntityManager(); 
```

当调用 org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager 时，我得到

```
SEVERE: javax.persistence.PersistenceException: Exception [EclipseLink-7108] (Eclipse Persistence Services - 2.0.1.v20100213-r6600): org.eclipse.persistence.exceptions.ValidationException
Exception Description: This operation is not supported for non-relational platforms. 
```

以下是我正在使用的所有依赖项：

```
<classpath>
  <classpathentry kind="src" path="src/main/java" including="**/*.java"/>
  <classpathentry kind="src" path="src/main/resources" excluding="**/*.java"/>
  <classpathentry kind="output" path="target/classes"/>
  <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
  <classpathentry kind="var" path="M2_REPO/javax/javaee-web-api/6.0/javaee-web-api-6.0.jar"/>
  <classpathentry kind="var" path="M2_REPO/com/sun/jersey/jersey-server/1.8/jersey-server-1.8.jar"/>
  <classpathentry kind="var" path="M2_REPO/asm/asm/3.1/asm-3.1.jar"/>
  <classpathentry kind="var" path="M2_REPO/com/sun/jersey/jersey-core/1.8/jersey-core-1.8.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/mongodb/mongo-java-driver/2.7.3/mongo-java-driver-2.7.3.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/org.eclipse.persistence.oracle.nosql/2.4.0/org.eclipse.persistence.oracle.nosql-2.4.0.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/javax.persistence/2.0.4.v201112161009/javax.persistence-2.0.4.v201112161009.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/org.eclipse.persistence.asm/3.3.1.v201206041142/org.eclipse.persistence.asm-3.3.1.v201206041142.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/org.eclipse.persistence.antlr/3.2.0.v201206041011/org.eclipse.persistence.antlr-3.2.0.v201206041011.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/org.eclipse.persistence.jpa.jpql/2.4.0/org.eclipse.persistence.jpa.jpql-2.4.0.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/org.eclipse.persistence.core/2.4.0/org.eclipse.persistence.core-2.4.0.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/org.eclipse.persistence.nosql/2.4.0/org.eclipse.persistence.nosql-2.4.0.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/eclipse/persistence/org.eclipse.persistence.jpa/2.4.0/org.eclipse.persistence.jpa-2.4.0.jar"/>
</classpath> 
```

服务器是 GlassFish Server Open Source Edition 3。当我从适用于其他人的示例代码中复制所有内容时，我无法弄清楚为什么不允许 createEntityManager？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:09:13.837

异常显示 EclipseLink 构建为 2.0.1.v20100213-r6600，而此功能需要 EclipseLink 2.4 或更高版本。无论您如何设置依赖项，它似乎都在使用 Glassfish 附带的 EclipseLink 版本。您可以尝试按照此处所述替换/升级这些捆绑包： [https ://blogs.oracle.com/GlassFishPersistence/entry/updating_eclipselink_bundles_in_glassfish](https://blogs.oracle.com/GlassFishPersistence/entry/updating_eclipselink_bundles_in_glassfish)

# c++ - InterviewStreet 查找字符串

> ID：11263479
> 
> 赞同：3
> 
> 时间：2012-06-29T14:18:41.983
> 
> 标签：c++, string, algorithm, set

给你 'n' 个字符串 w1, w2, ......, wn。令 Si 表示通过考虑字符串 wi 的所有唯一子字符串形成的字符串集合。子字符串定义为字符串中一个或多个字符的连续序列。可以在此处找到有关子字符串的更多信息。让'S' = {S1 U S2 U .... Sn}。即'S'是通过考虑所有集合S1，S2，......Sn中的所有唯一字符串而形成的字符串集合。您将获得许多查询，并且对于每个查询，您将获得一个整数“k”。您的任务是从集合“S”中输出按字典顺序排列的第 k 个最小字符串。

输入：

输入的第一行包含一个整数“n”，表示字符串的数量。接下来的每一行都由一个字符串组成。第 i 行 (1<=i<=n) 上的字符串用 wi 表示，长度为 mi。下一行由一个整数“q”组成，表示查询的数量。接下来的“q”行中的每一行都包含一个整数“k”。

注意：输入字符串仅由小写英文字母 'a' - 'z' 组成。

输出：

输出“q”行，其中第 i 行由一个字符串组成，该字符串是第 i 个查询的答案。如果输入无效（'k' > |S|），则输出“INVALID”（为清楚起见，引号）。

约束：

```
1<=n<=50
1<=mi<=2000
1<=q<=500
1<=k<=1000000000 
```

[https://www.interviewstreet.com/challenges/dashboard/#problem/4efa210eb70ac](https://www.interviewstreet.com/challenges/dashboard/#problem/4efa210eb70ac)

**我的方法**

对于每个输入字符串，生成其子字符串并将它们添加到集合中，这将自动消除重复并保持它们的排序。返回集合中索引 i 处的元素。

我在这里写了关于上述方法的代码：

[http://justprogrammng.blogspot.com/2012/06/interviewstreet-find-strings-solution-c.html](http://justprogrammng.blogspot.com/2012/06/interviewstreet-find-strings-solution-c.html)

**但我面临的问题是**

```
terminate called after throwing an instance of 'std::bad_alloc'
what(): std::bad_alloc
Aborted (core dumped) 
```

此错误出现在少数测试用例中。有人可以告诉我为什么我会收到这个错误，我应该如何纠正这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:49:01.720

@enjay 的回答是正确的。我将为任何不熟悉此类字符串处理算法问题并想了解更多信息的人详细说明。我的回答将描绘大图并指出所提到的任何细节。

@sachin 在 interviewstreet.com 中指出的问题属于一大群涉及子串、回文等的问题。所有这些问题都可以通过一个专用的数据结构来解决：后缀数组（en.wikipedia.org/wiki/Suffix_array）。完整的学习路径如下。但如果你只是在解决问题，你可以直接进入3。

1.  特里（http://en.wikipedia.org/wiki/Trie）。后缀树的基础。

2.  后缀树（http://en.wikipedia.org/wiki/Suffix_tree）。将一个字符串的所有后缀放入 Trie 中。观察给定字符串的任何子字符串是给定字符串后缀之一的某个前缀。后缀树的想法很鼓舞人心，但由于后缀树的构建要么太复杂而无法实现，要么太慢，在实践中，我怀疑有人使用它。但是，对于任何想挑战不必要的困难的人，这里是后缀树构造算法的最佳说明：http://stackoverflow.com/questions/9452701/ukkonens-suffix-tree-algorithm-in-plain-english

3.  后缀数组（http://en.wikipedia.org/wiki/Suffix_array）。后缀数组包含后缀树所具有的任何信息（因此可以做任何后缀树可以做的事情）并且更容易实现。话虽如此，如果你想用它完成任何不平凡的事情，你需要为 RMQ 构造至少三个数组和一个索引。这三个数组是：

一个。后缀数组本身。

湾。秩数组。

C。高度数组。

由于使用后缀数组时的一项常见任务是查找两个后缀的最长公共前缀，因此需要对高度数组进行 RMQ 查询。RMQ 在这里描述：[http ://en.wikipedia.org/wiki/Range_Minimum_Query](http://en.wikipedia.org/wiki/Range_Minimum_Query)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:48:47.170

您会收到 bad_alloc 错误，因为有太多唯一的子字符串无法放入内存。要纠正它，您可以使用任何不需要存储每个唯一子字符串的方法。

我的解决方案相当复杂，所以我只提供一个算法草图。

可以只存储那些从 w1、w2、......、wn 中的每个可能位置开始并在 w1、w2、......、wn 结束处结束的子字符串。而不是整个子字符串，您只能存储指向其起始字符的指针。

要回答查询，您可以对所有查询进行排序，对所有子字符串进行排序。然后以以下方式迭代子字符串：取所有从同一个字符开始的子字符串，然后取所有具有相同第二个字符的子字符串，依此类推。换句话说，您**隐式**构造了一个 trie，其中所有内部节点的权重为 1，所有叶节点的权重等于与该节点相对应的剩余唯一子串的长度。然后您遍历这个 trie，计算每个节点权重的累积总和，并将其与下一个尚未处理的查询进行比较。一旦找到匹配项，就打印子字符串并继续进行 trie 遍历。

所有这些都不需要太多内存，但非常需要计算资源。但它可能会被优化。您可以使用显式 trie 存储所有短子字符串（可能长度为 1 .. 2 或 1 .. 3）。您也可以使用桶排序算法对较长的子字符串进行排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T14:11:38.347

使用**后缀数组**...它在内存上会比生成所有子字符串更快、更容易...如果您对后缀数组进行排序，然后尝试使用一些扩充数据结构（如**lcp 数组**和**累积子字符串计数数组）**进行搜索，您可以在内存限制内及时解决它....

# vba - How do I trigger a macro to run after a new mail is received in Outlook?

> ID：11263483
> 
> 赞同：41
> 
> 时间：2012-06-29T14:18:55.767
> 
> 标签：vba, outlook, triggers

I'm writing a macro that creates tickets on a database based on alerts received from a Nagios server as an email. However, I cannot let the macro run in an infinite loop while checking for mails because it is just too resource heavy and makes my desktop hang. I need to find a way to trigger the macro only when a new mail is received.

I looked for something along the lines of NewMail events on the MSDN website, but I can't find anything coherent. Can anyone show me just a bit of sample code to show how to trigger macros from new mail events?

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-29T19:22:58.067

This code will add an event listener to the default local Inbox, then take some action on incoming emails. You need to add that action in the code below.

```
Private WithEvents Items As Outlook.Items 
Private Sub Application_Startup() 
  Dim olApp As Outlook.Application 
  Dim objNS As Outlook.NameSpace 
  Set olApp = Outlook.Application 
  Set objNS = olApp.GetNamespace("MAPI") 
  ' default local Inbox
  Set Items = objNS.GetDefaultFolder(olFolderInbox).Items 
End Sub
Private Sub Items_ItemAdd(ByVal item As Object) 

  On Error Goto ErrorHandler 
  Dim Msg As Outlook.MailItem 
  If TypeName(item) = "MailItem" Then
    Set Msg = item 
    ' ******************
    ' do something here
    ' ******************
  End If
ProgramExit: 
  Exit Sub
ErrorHandler: 
  MsgBox Err.Number & " - " & Err.Description 
  Resume ProgramExit 
End Sub 
```

After pasting the code in `ThisOutlookSession` module, you must restart Outlook.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-29T14:53:39.687

Try something like this inside `ThisOutlookSession`:

```
Private Sub Application_NewMail()
    Call Your_main_macro
End Sub 
```

My outlook vba just fired when I received an email and had that application event open.

Edit: I just tested a hello world msg box and it ran after being called in the `application_newmail` event when an email was received.

# php - X-SendFile 有什么作用？

> ID：11263486
> 
> 赞同：5
> 
> 时间：2012-06-29T14:19:01.630
> 
> 标签：php, curl, fopen, x-sendfile

在四处打听和做一些研究时，似乎很多人确实在推动 X-Sendfile 作为从 PHP 脚本向基于浏览器的客户端提供大型可下载文件的首选方法。

我一直在研究的一些方法是：

*   流式传输
*   流式 cURL
*   文件获取内容
*   卷曲
*   X-发送文件

其中，大多数人告诉我 X-Sendfile 是最好的。

问题是，我正在尝试实现一种下载方法，它不仅能够处理大文件，而且在大多数服务器上广泛通用，因为我编写的脚本将被许多其他服务器使用，而不仅仅是我自己的。

我的问题是：是什么让 X-Sendfile 变得更好？如果它这么好，为什么我没有听到很多关于它的消息，为什么它没有被更频繁地使用？最后，大多数典型的低预算共享网络主机是否支持 X-Sendfile？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:20:50.953

它允许网络服务器以它认为是将该文件发送到客户端的最佳方式发送文件。它还支持范围请求（即下载管理器和恢复），只要网络服务器支持它而无需为其编写一行代码。

然而，“典型的低预算共享网络主机”不太可能支持它。考虑一下您是否*真的*想针对他们；这通常还涉及支持过时的 PHP 版本、讨厌的配置（启用 safe_mode 和/或 magic_quotes）以及缺少诸如 PDO 之类的 PHP 模块（在最近的 PHP 版本中总是启用，但请参阅我之前的观点之一）。

*将文件发送到客户端的任何其他方式都有缺点，PHP 需要读取它，然后将其作为字符串数据传递给 Web 服务器（与例如让内核*将整个文件写入套接字相比效率不高）。使用`file_get_contents`它时更糟 - 您将*整个文件*读入内存，这根本没有必要。

# html - CSS 覆盖规则和特殊性

> ID：11263488
> 
> 赞同：57
> 
> 时间：2012-06-29T14:19:06.330
> 
> 标签：html, css

我经常对 CSS 覆盖规则感到困惑：一般来说，我意识到更具体的样式表会覆盖不太具体的样式表，而具体性取决于指定了多少选择器。还有`!important`关键字，它也起作用。

所以，这是一个简单的例子：我有一个包含两个表格单元格的表格。表格本身有一个 CSS 规则，适用于表格中的所有单元格。但是，第二个表格单元格有它自己的规则，应该覆盖通用表格规则：

```
<html>
<head>
<style type = "text/css">

table.rule1 tr td {
    background-color: #ff0000;
}

td.rule2 {
    background-color: #ffff00;
}

</style>

</head>
<body>
    <table class = "rule1">
        <tr>
            <td>abc</td>
        </tr>
        <tr>
            <td class = "rule2">abc</td>
        </tr>
    </table>
</body>
</html> 
```

但是......当我在浏览器中打开它时，我看到它`rule2`并没有覆盖`rule1`. 好的 - 所以我想我需要`rule2`更“具体”，但我不能真正定义任何进一步的选择器，因为我只想将它应用于特定的表格单元格。所以，我尝试输入`! important`关键字，但这也不起作用。

`rule2`如果我将文本节点包装在 a 中，我可以覆盖`<div>`，例如：

```
 <td class = "rule2"><div>abc</div></td> 
```

...然后使 CSS 规则更具体：

```
td.rule2 div {
    background-color: #ffff00; !important
} 
```

这行得通，但这不是我想要的。一方面，我想将规则应用于*表格单元格*，而不是 DIV。它有所不同，因为您仍然可以将背景颜色`rule1`视为 div 周围的边框。

那么，我需要做什么来告诉 CSS 我想要`rule2`覆盖`rule1`该`td`元素？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-29T14:27:09.497

为了使第二条规则具有更高的特异性，您始终可以使用第一条规则的部分内容。在这种情况下，我`table.rule1 tr`将从规则一中添加并将其添加到规则二。

```
table.rule1 tr td {
    background-color: #ff0000;
}

table.rule1 tr td.rule2 {
    background-color: #ffff00;
} 
```

一段时间后，我发现这很自然，但我知道有些人不同意。对于那些人，我建议研究[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-29T14:24:12.310

特异性是根据规则中的 id、class 和 tag 选择器的数量计算的。Id 具有最高的特异性，然后是类，然后是标签。您的第一个规则现在比第二个更具体，因为它们都有一个类选择器，但第一个规则也有两个标签选择器。

要使第二个覆盖第一个，您可以通过添加其父母的信息来使其更具体：

```
table.rule1 tr td.rule2 {
    background-color: #ffff00;
} 
```

[这](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)是一篇不错的文章，了解有关选择器优先级的更多信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-29T14:21:55.660

重要的需要在里面；

```
td.rule2 div {     background-color: #ffff00 !important; } 
```

事实上我相信这应该覆盖它

```
td.rule2 { background-color: #ffff00 !important; } 
```

# java - 使用反射打印列表

> ID：11263492
> 
> 赞同：3
> 
> 时间：2012-06-29T14:19:20.767
> 
> 标签：java, list, reflection

```
 public class Service{ 
       String serviceName;
      //setter and getter
  }

  public class Version{ 
       int VersionID;
      //setter and getter
  }

  public void test(Object list){

        //it shd print the obtained list

   } 
```

> 列表<服务> list1; //Service是一个Bean
> List<版本> list2; //版本是一个Bean
> test(list1);
> 测试（列表2）；

现在测试方法 shd 打印获得的列表 - （即）如果列表是**Service**类型，那么 serviceName 应该使用它的 getter 打印。如果列表类型是**版本**，则应打印 versionID。
是否可以在不使用接口或抽象类的情况下实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:40:26.403

```
if(Object instanceof List) {
    List list = (List)Object ;

   for(int index=0; index < list.length();index++) {
       Object obj = list.get(index);

       if(obj instanceof Service) {
         //cast to service and print value or use reflection
           Service service= (Service)obj ;
           System.out.println(service.geServiceName());
       } else if(obj instanceof Version) {
          // cast to Version and print versionID  someting
          Version version = (Version)obj ;
          System.out.println(version.getVersionId());
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:41:55.293

```
public void test(Object list) {
    if(list instanceof List)
        test((List)list);
}

public void test(List<?> list) {
    if (!list.isEmpty()) {
        Object o = list.get(0);
        if (o instanceof Version) {
            @SuppressWarnings("unchecked")
            List<Version> lVersion = (List<Version>) list;
            for (Version v : lVersion) {
                System.out.println(v.getVersionID());
            }
        } else if (o instanceof Service) {
            @SuppressWarnings("unchecked")
            List<Service> lService = (List<Service>) list;
            for (Service s : lService) {
                System.out.println(s.getServiceName());
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:45:43.140

```
static public class Service {

    String serviceName;

    @Override
    public String toString() {
        return serviceName;
    }
}

static public class Version {

    String VersionID;

    @Override
    public String toString() {
        return VersionID;
    }
}

static public void test(List<?> list) {
    for (Object object : list) {
        System.out.println(object.toString());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:12:35.940

@danLeon 到目前为止有最简单的想法（添加`toString`到类中），假设您可以访问`Service`and `Version`。

我不确定你为什么要考虑反射，但我唯一能想到的是你想要的东西可以与任何具有单个属性`String`getter 的对象一起使用，然后你会做这样的事情（疯狂的 IMO，但它使用反射）：

```
Class clazz = list.get(0).getClass();
Method[] methods = clazz.getDeclaredMethods();
Method onlyStringGetter = null;
for (Method method: methods) {
    String mName = method.getName();
    if (mName.matches("get\w+") {
        if (method.getReturnType().equals(String.class) {
            if (onlyStringGetter != null) thrown new RuntimeException("More than one String getter available");
            onlyStringGetter = method;
        }
    }
}
if (onlyStringGetter == null) throw new RuntimeException("No String getter found for class: " + clazz.getName());
List<String> strings = new ArrayList<String>();
for (Object singleStringAttribObj: list) {
    // some exception handling needed for below
    String result = (String)onlyStringGetter.invoke(singleStringAttribObj);
    strings.add(result);
}
System.out.println(strings); 
```

我没有编译或尝试过，但这大约是正确的。肯定需要一些额外的异常处理

# flex-lexer - 如何在 flex/lex 中声明标识符？

> ID：11263497
> 
> 赞同：1
> 
> 时间：2012-06-29T14:19:33.740
> 
> 标签：flex-lexer, lex, lexical-analysis, lexical

我想创建一个基于 flex 的 CSS2.1 词法扫描器。[w3 org](http://www.w3.org/TR/CSS21/grammar.html#scanner)上有扫描仪 flex 实现。我试着打电话

```
$ flex css2.1.flex
$ gcc lex.yy.c -lfl 
```

但得到错误：

```
css2.1.flex: In function ‘yylex’:
css2.1.flex:53:9: error: ‘S’ undeclared (first use in this function)
css2.1.flex:53:9: note: each undeclared identifier is reported only once for each function it appears in
css2.1.flex:58:9: error: ‘CDO’ undeclared (first use in this function)
css2.1.flex:59:9: error: ‘CDC’ undeclared (first use in this function)
css2.1.flex:60:9: error: ‘INCLUDES’ undeclared (first use in this function)
css2.1.flex:61:9: error: ‘DASHMATCH’ undeclared (first use in this function)
css2.1.flex:63:9: error: ‘STRING’ undeclared (first use in this function)
css2.1.flex:64:9: error: ‘BAD_STRING’ undeclared (first use in this function)
css2.1.flex:66:9: error: ‘IDENT’ undeclared (first use in this function)
css2.1.flex:68:9: error: ‘HASH’ undeclared (first use in this function)
css2.1.flex:70:9: error: ‘IMPORT_SYM’ undeclared (first use in this function)
css2.1.flex:71:9: error: ‘PAGE_SYM’ undeclared (first use in this function)
css2.1.flex:72:9: error: ‘MEDIA_SYM’ undeclared (first use in this function)
css2.1.flex:73:9: error: ‘CHARSET_SYM’ undeclared (first use in this function)
css2.1.flex:75:9: error: ‘IMPORTANT_SYM’ undeclared (first use in this function)
css2.1.flex:77:9: error: ‘EMS’ undeclared (first use in this function)
css2.1.flex:78:9: error: ‘EXS’ undeclared (first use in this function)
css2.1.flex:79:9: error: ‘LENGTH’ undeclared (first use in this function)
css2.1.flex:85:9: error: ‘ANGLE’ undeclared (first use in this function)
css2.1.flex:88:9: error: ‘TIME’ undeclared (first use in this function)
css2.1.flex:90:9: error: ‘FREQ’ undeclared (first use in this function)
css2.1.flex:92:9: error: ‘DIMENSION’ undeclared (first use in this function)
css2.1.flex:94:9: error: ‘PERCENTAGE’ undeclared (first use in this function)
css2.1.flex:95:9: error: ‘NUMBER’ undeclared (first use in this function)
css2.1.flex:97:9: error: ‘URI’ undeclared (first use in this function)
css2.1.flex:99:9: error: ‘BAD_URI’ undeclared (first use in this function)
css2.1.flex:101:9: error: ‘FUNCTION’ undeclared (first use in this function) 
```

我必须如何声明缺少的标识符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:00:02.963

它们是在链接上的 flex 语法之前的解析器定义中定义的。当你`bison -d`在解析器定义上运行类似的东西时，它会生成一个`y.tab.h`包含定义的文件（通常是 ）。

# c++ - SDL 在发布构建配置中找不到 -lSDL_main

> ID：11263499
> 
> 赞同：1
> 
> 时间：2012-06-29T14:19:39.040
> 
> 标签：c++, sdl

我使用代码块作为我的 IDE。

我拥有完美的所有链接器设置，我拥有所有 SDL 库，当我构建调试配置时，一切正常。

我还应该提到我正在用 SDL 编译一个 dll，所以没有 main 函数。

当我尝试编译成 Release 配置时，问题就出现了。无论我做什么，我都会遇到同样的错误：

```
ld.exe  cannot find -lSDL_main. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:30:39.840

如果没有`main`功能，则无需链接**SDL_main**。从您的构建配置中删除它。

# c# - 构建后缺少程序集

> ID：11263500
> 
> 赞同：5
> 
> 时间：2012-06-29T14:19:40.760
> 
> 标签：c#

我的 C# 解决方案中有 5 个项目。

1.  常见的
2.  数据访问。
3.  用户界面
4.  组件
5.  测试

我可以添加对 Components.dll 的引用。但是，当我运行解决方案时，我得到了错误：

> 类型或命名空间名称“组件”不存在。

已`Components.dll`存在于引用文件夹中。

你能帮帮我吗？

这是构建输出：

```
------ Rebuild All started: Project: Comps, Configuration: Release Any CPU ------
  Comps -> ..\Ashyaneh\Comps\bin\Release\AshyanehComps.dll
------ Rebuild All started: Project: Interfaces, Configuration: Debug Any CPU ------
  Interfaces -> ..\Ashyaneh\Interfaces\bin\Debug\AshyanehInterfaces.dll
------ Rebuild All started: Project: Common, Configuration: Debug Any CPU ------
  Common -> ..\Ashyaneh\Common\bin\Debug\AshyanehCommon.dll
------ Rebuild All started: Project: Web, Configuration: Debug Any CPU ------
  Web -> E:\My Programming 1391\HRShojaieWebAppRC2\Ashyaneh\Web\bin\Web.dll
------ Rebuild All started: Project: Test, Configuration: Debug x86 ------
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9):
warning MSB3253: The referenced assembly "AshyanehComps.dll" could not be resolved
because it has a dependency on "System.Web, Version=4.0.0.0, Culture=neutral,
PublicKeyToken=b03f5f7f11d50a3a" which is not in the currently targeted framework
".NETFramework,Version=v4.0,Profile=Client". Please remove references to assemblies
not in the targeted framework or consider retargeting your project.
  Test -> ..\Ashyaneh\Test\bin\Debug\Test.exe
========== Rebuild All: 5 succeeded, 0 failed, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T17:35:51.080

这是你的问题：

*无法解析引用的程序集“E:\My Programming 1391\HRShojaieWebAppRC2\Ashyaneh\Comps\bin\Release\AshyanehComps.dll”，因为它依赖于“System.Web，Version=4.0.0.0，Culture=neutral， PublicKeyToken=b03f5f7f11d50a3a" 不在当前目标框架 ".NETFramework,Version=v4.0,Profile=Client" 中*

假设您正在尝试运行 .NET 4.0，您正在针对“轻量级”、客户端配置文件、基类库进行编译。您需要包含 System.Web 的成熟框架类库。

**解决方案**

为了更改此设置，请右键单击 AshyanehComps.dll 的项目 > 单击属性 > 单击“应用程序”选项卡 > 将“目标框架”更改为“.NET Framework 4”。

为了安全起见，我会为您解决方案中的所有项目执行上述步骤，您应该会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:24:29.953

您确定通过右键单击有错误的项目并单击“添加引用”并选择项目引用，在每个需要添加的位置作为参考添加了组件吗？

如果完成上述操作，我将遵循以下过程：

*   保存全部
*   关闭 Visual Studio
*   删除每个项目中的 BIN 和 OBJ 文件夹
*   重启VS
*   再试一次

如果它仍然不起作用，那么您可能需要调整构建顺序。右键单击解决方案并确保您的每个项目都以正确的依赖顺序构建，并确保您没有任何循环依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:21:24.450

确认您在提交解决方案时保存了您的 csproj，因为您的 csproj 包含您的引用：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:37:51.677

确认您的主应用程序目标框架未设置为 .Net Framework 4.0 Client Profile。如果设置为此，请将其更改并设置为 .Net framework 4.0。

您可以查看如何更改 [http://msdn.microsoft.com/en-us/library/bb398202.aspx](http://msdn.microsoft.com/en-us/library/bb398202.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:37:58.587

首先，您有 5 个项目。您必须确定报告的哪些**“组件”**不存在于哪个特定项目中？

然后你去项目参考添加（重新添加，如果它在那里让VS参考缓存生成）到项目。检查您是否需要“复制到本地”选项或验证全局程序集路径。

现在您已完成所有参考，如果问题仍然存在，请检查您的项目代码（特定行）以查看其无法正常工作的原因。发布 MS Build 输出，它会告诉你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T14:44:04.933

*   当您将“组件”项目添加到其他项目作为参考时，在“添加参考”屏幕中，将您的参考添加到“组件”项目输出路径（Components.dll）中的“项目”选项卡而不是“浏览”选项卡中。

*   然后，清除您的解决方案并构建您的“组件”项目。

*   如果您的“组件”项目中有错误，请解决它们。

*   最后构建您的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-13T19:48:27.270

最有可能您的应用程序目标框架是 4.0 客户端配置文件，就像我的一样。除非您使用特定于 4.0 的解决方案，否则解决方案是将其降至 3.5 并且错误消失。感谢微软。

# image-processing - 使用 Kinect 进行面部识别

> ID：11263501
> 
> 赞同：10
> 
> 时间：2012-06-29T14:19:46.107
> 
> 标签：image-processing, kinect, face-detection

最近我一直在尝试使用 Kinect 进行面部识别，使用新的 Developer Toolkit (v1.5.1)。可以在此处找到 FaceTracking 工具的 API：http: [//msdn.microsoft.com/en-us/library/jj130970.aspx](http://msdn.microsoft.com/en-us/library/jj130970.aspx)。基本上到目前为止，我尝试做的是获得每个人独有的“面部特征”。为此，我引用了 Kinect 跟踪的这些面部点： ( ![http://i.msdn.microsoft.com/dynimg/IC584330.png](../Images/cfb55039b9327ae7fc9ffac6da654933.png)) 。

然后我跟踪我的脸（加上几个朋友）并使用基本代数计算点 39 和 8 之间的距离。我还获得了当前头部深度的值。这是我获得的数据样本：

```
DISTANCE FROM RIGHT SIDE OF NOSE TO LEFT EYE: 10.1919198899636
CURRENT DEPTH OF HEAD: 1.65177881717682
DISTANCE FROM RIGHT SIDE OF NOSE TO LEFT EYE: 11.0429381713623
CURRENT DEPTH OF HEAD: 1.65189981460571
DISTANCE FROM RIGHT SIDE OF NOSE TO LEFT EYE: 11.0023324541865
CURRENT DEPTH OF HEAD: 1.65261101722717 
```

这些只是我获得的一些价值。所以我的下一步是使用 excel 绘制它们。我的预期结果是深度和距离之间的线性趋势。因为随着深度的增加，距离应该更小，反之亦然。所以对于人 X 的数据，趋势是相当线性的。但对于我的朋友（Y 人）来说，情节到处都是。所以我得出结论，我不能用这种方法进行面部识别。我无法获得跟踪如此短距离所需的精度。

我的目标是能够在人们进入房间时识别他们，保存他们的“个人资料”，然后在他们退出时将其删除。对不起，如果这有点多，但我只是想解释一下我到目前为止所取得的进展。那么，你们如何看待我如何实现面部识别？任何想法/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T15:16:52.327

如果你使用 a`EnumIndexableCollection<FeaturePoint, PointF>` 所以你可以使用 a`FaceTrackFrame`的`GetProjected3DShape()`方法。你像这样使用它：

```
 private byte[] colorImage;

  private ColorImageFormat colorImageFormat = ColorImageFormat.Undefined;

  private short[] depthImage;

  private DepthImageFormat depthImageFormat = DepthImageFormat.Undefined;

  KinectSensor Kinect = KinectSensor.KinectSensors[0];

  private Skeleton[] skeletonData;

  colorImageFrame = allFramesReadyEventArgs.OpenColorImageFrame();
  depthImageFrame = allFramesReadyEventArgs.OpenDepthImageFrame();
  skeletonFrame = allFramesReadyEventArgs.OpenSkeletonFrame();
  colorImageFrame.CopyPixelDataTo(this.colorImage);
  depthImageFrame.CopyPixelDataTo(this.depthImage);
  skeletonFrame.CopySkeletonDataTo(this.skeletonData);
  skeletonData = new Skeleton[skeletonFrame.SkeletonArrayLength];

  foreach(Skeleton skeletonOfInterest in skeletonData)
  {
       FaceTrackFrame frame = faceTracker.Track(
           colorImageFormat, colorImage, depthImageFormat, depthImage, skeletonOfInterest);
  }

  private EnumIndexableCollection<FeaturePoint, PointF> facePoints = frame.GetProjected3DShape(); 
```

然后您可以使用图像中的每个点。我会有一个`const double preferedDistance`你可以将当前深度和不同点的 x 和 y 相乘，以通过公式找到 x 和 y 的首选版本和深度

> 首选距离/当前距离

例子：

```
 const double preferredDistance = 500.0;//this can be any number you want.

        double currentDistance = //however you are calculating the distance

        double whatToMultiply = preferredDistance / currentDistance;

        double x1 = this.facePoints[39].X;
        double y1 = this.facePoints[39].Y;
        double x2 = this.facePoints[8].X;
        double y2 = this.facePoints[8].Y;

        double result = whatToMultiply * //however you are calculating distance. 
```

然后你可以`List<>`知道要搜索的距离。我还建议你有一个`List<>`bool ，如果结果匹配，它与要设置为 true 的距离相协调，这样你就可以跟踪哪个 bool 是真/假。
例子：

```
 List<double> DistanceFromEyeToNose = new List<double>
        {
            1,
            2,
            3 //etc
        };

        List<bool> IsMatch = new List<bool>
        {
            false,
            false,
            false //etc
        }; 
```

然后使用`for`循环搜索它。

```
 for (int i = 0; i < DistanceFromEyeToNose.Count; i++)
        {
            if (result == DistanceFromEyeToNose[i]) IsMatch[i] = true;
        } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:02:10.020

您附上的图片是指二维模型。`GetProjected3DShape`与图片无关。

用于`IFTResult.Get2DShapePoints`获取 2D 人脸点。如果您使用的是 FaceTrackingBasics-WPF 示例，则必须为该方法编写 C# 包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T19:23:42.200

我正在为我的硕士学位做一个像这样的项目，我正在使用比例不变的马氏距离计算距离。这是公式： d(x,y)=sqrt(Pow((Xi-Yi),2)/Pow(Si,2)) ; i:1-->N，其中 Si 是样本集上 Xi 和 Yi 的标准差。这是维基百科链接：[http ://en.wikipedia.org/wiki/Mahalanobis_distance](http://en.wikipedia.org/wiki/Mahalanobis_distance)

# python - 遮蔽内置类型/函数的后果

> ID：11263502
> 
> 赞同：5
> 
> 时间：2012-06-29T14:19:54.697
> 
> 标签：python, built-in

我想知道重用内置类型或函数的名称可能会产生什么后果。为了说明我的意思，请阅读以下示例：

`list()`是一个内置函数。如果我创建另一种`list()`方法，我想它将覆盖原来的方法，以便执行我的方法而不是内置方法。但如果我这样做会`list=[a,z,e,r,t,y]`怎样？内置`list`类型或`list()`功能是否存在风险？

我知道做这种事不好。但我的目标只是了解在这些情况下会发生什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:21:32.857

`list`不，您不会以任何方式损坏内置设备。它只会让每个人[感到困惑](https://stackoverflow.com/questions/11141940/attributeerror-nt-stat-result-object-has-no-attribute-s-iwrite/11142152#11142152)。

您仍然可以`list`通过`__builtin__.list`. 然而，分配给`__builtin__.list`意志，`list`对每个人都不利。

# hadoop - 如何挂载安全的 HDFS？

> ID：11263506
> 
> 赞同：0
> 
> 时间：2012-06-29T14:19:58.930
> 
> 标签：hadoop, kerberos, fuse

为了让标准文件系统用户或程序将 HDFS 名称空间视为本地安装的目录，CDH4 即具有[hadoop-hdfs-fuse](https://ccp.cloudera.com/display/CDH4DOC/Mountable+HDFS)组件。

它与**非**安全 HDFS 一起工作，但在 Kerberos 安全 HDFS 上，如何在那里做呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-26T11:36:35.003

您可以使用支持 Kerberos 且更易于设置的 py-hdfs-mount：[https ://github.com/EDS-APHP/py-hdfs-mount](https://github.com/EDS-APHP/py-hdfs-mount)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T11:27:06.967

自 Apache Hadoop 发行版 2.0.2 版以来，已添加对 fuse_dfs 可执行文件（随 Hadoop 发行版提供）的 Kerberos 身份验证支持。

我花了很多时间来弄清楚应该如何配置它。我发现**为了使 Fuse-DFS 选择正确的配置文件（包含身份验证类型、kerberos 不简单等），`CLASSPATH`必须包含`HADOOP_CONF_DIR`之前Hadoop jar 目录**。

使用 Kerberos 身份验证时，用户必须在访问 FUSE 挂载点之前运行 kinit。不这样做会导致用户尝试访问挂载点时出现 I/O 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:08:45.917

hdfs fuse 模块还没有 kerberos 支持。

# java - 通过特定替换重复地将一个文件的内容写入另一个文件

> ID：11263507
> 
> 赞同：1
> 
> 时间：2012-06-29T14:20:00.443
> 
> 标签：java, file, filestream

```
 BufferedReader template = new BufferedReader(new FileReader("<InputFile>"));
    PrintWriter itemList = new PrintWriter(new FileWriter("<OutputFile>"));

    Iterator<String> iterator = allProduct.iterator();

    while(iterator.hasNext()){
        String l;
        while((l = template.readLine()) != null){
            if(l.contains("~")==false)
                itemList.print(l);                  
            else
                itemList.print(l.replace("~", iterator.next()));
        }

    }

    template.close();
    itemList.close(); 
```

但是编程并没有终止，也没有产生任何错误，它基本上被挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:55:30.340

当您到达模板文件的末尾时，`template.readLine()`将继续返回`null`，因此您不会进入内部`while`循环，因此`iterator`不会前进。

您的代码将等同于：

```
while(iterator.hasNext()){
    String l;
    // This bit commented out because template.readLine() always returns null
    //while((l = template.readLine()) != null){
    //    if(l.contains("~")==false)
    //        itemList.print(l);                  
    //    else
    //        itemList.print(l.replace("~", iterator.next()));
    //}

} 
```

解决方案是关闭然后重新打开文件（一点都不好）或将两者分开：首先将模板逐行读取到列表中，然后只遍历列表。

我只是猜测，但您可能不想`iterator.next()`每次遇到都打电话`~`，所以我认为您需要这样的东西：

```
BufferedReader template = new BufferedReader(new FileReader("<InputFile>"));
    ArrayList<String> templateLines = new ArrayList<String>(); //this is where we store the lines from the template
    String l;
    while((l = template.readLine()) != null){ //read template lines
        templateLines.add( l );  //add to list
    }
    template.close();  //done

    PrintWriter itemList = new PrintWriter(new FileWriter("<OutputFile>")); //now let's look at the output
    Iterator<String> iterator = allProduct.iterator();

    while(iterator.hasNext()){
        String product = iterator.next(); //take one product at a time
        for( String templateLine : templateLines ) { //for each line in the template
            if(templateLine.contains("~")==false) //replace ~ with the current product
                itemList.print(templateLine);                  
            else
                itemList.print(templateLine.replace("~", product));
        }

    }

    itemList.close(); 
```

# extjs - Sencha labelWidth 设置为内联样式中的 !important - 如何从 css 更改它

> ID：11263509
> 
> 赞同：0
> 
> 时间：2012-06-29T14:20:09.430
> 
> 标签：extjs, sencha-touch-2

为什么 sencha touch 将 !important 指令放入内联样式属性中？在这种情况下，现在有办法从 css 更改宽度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:40:53.660

如果您想在之后覆盖它，为什么要向该字段添加 labelWidth 属性。

从您的字段配置中删除`labelWidth`，添加一个`cls`属性，然后仅在 CSS 中自定义您的字段。

# sed - 为什么 sed 的自动打印没有达到预期的效果？

> ID：11263511
> 
> 赞同：1
> 
> 时间：2012-06-29T14:20:13.253
> 
> 标签：sed

### 什么有效

此 sed 脚本按预期工作：

```
$ echo -e "2\n1\n4\n3" | sed -n 'h; n; G; p'
1
2
3
4 
```

它一次需要一对输入线，并交换线。到现在为止还挺好。

### 什么不起作用

我*不*明白的是为什么我不能使用 sed 的自动打印。由于 sed 在每个执行周期结束时自动打印模式空间（除非它被抑制），为什么这不等效？

```
$ echo -e "2\n1\n4\n3" | sed 'h; n; G'
2
1
2
4
3
4 
```

我*认为*代码说的是：

1.  输入行被复制到保持空间。
2.  下一行被读入模式空间。
3.  保持空间附加到模式空间。
4.  **模式空间 (line1 + newline + line2) 会自动打印**，因为我们已经到了执行周期的末尾。

显然，我错了……但我不明白为什么。谁能解释为什么第二个示例会中断，以及为什么需要打印抑制才能产生正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:24:49.647

该`n`命令使 sed 在读取下一行之前打印当前缓冲区。这是来自[http://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html的描述](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html)

```
[2addr]n
    Write the pattern space to standard output if the default
    output has not been suppressed, and replace the pattern
    space with the next line of input, less its terminating <newline>. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T21:10:18.797

这可能对您有用：

```
echo -e "2\n1\n4\n3" | sed 'h;N;s/.*\n//;G'
1
2
3
4 
```

或者这个（GNU sed）：

```
echo -e "2\n1\n4\n3" | sed '1~2{h;d};2~2G'
1
2
3
4 
```

找出将要打印的内容`l`或您是否使用 GNU`l0`

# c# - 查找字符串中包含属性值的 XmlNode

> ID：11263523
> 
> 赞同：2
> 
> 时间：2012-06-29T14:20:51.543
> 
> 标签：c#, xml, linq, xml-parsing

我有一个xml文件...

```
<?xml version="1.0" encoding="UTF-8"?>
<items defaultNode="1">
    <default contentPlaceholderName="pageContent" template="" genericContentItemName="" />
    <item urlSearchPattern="connections-learning" contentPlaceholderName="pageContent" template="Connections Learning Content Page" genericContentItemName="" />
    <item urlSearchPattern="online-high-school" contentPlaceholderName="pageContent" template="" genericContentItemName="" />
</items> 
```

我试图找到字符串中包含 urlSearchPattern 属性的第一个节点`urlSearchPattern`。我遇到麻烦的地方是找到*属性包含在字符串值中*的节点，而不是*字符串值包含在属性中*。

到目前为止，这是我的尝试。这将找到属性中包含字符串值的 firstOrDefault 节点（我需要相反）...

```
string urlSearchPattern = Request.QueryString["aspxerrorpath"];
MissingPageSettingsXmlDocument missingPageSettingsXmlDocument = new MissingPageSettingsXmlDocument();
XmlNode missingPageItem = missingPageSettingsXmlDocument.SelectNodes(ITEM_XML_PATH).Cast<XmlNode>().Where(item => item.Attributes["urlSearchPattern"].ToString().ToLower().Contains(urlSearchPattern)).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:38:52.460

好吧...然后反转！

```
var result = missingPageSettingsXmlDocument
                .SelectNodes(ITEM_XML_PATH)
                .Cast<XmlNode>()
                .FirstOrDefault(
                    m => m.Attributes != null && 
                    m.Attributes["urlSearchPattern"] != null && 
                    urlSearchPattern.Contains(m.Attributes["urlSearchPattern"].ToString().ToLower())
                 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:38:33.080

使用这个[Xml Library](https://github.com/ChuckSavage/XmlLib/)，并提供您的 ITEM_XML_PATH 看起来像：`//item`

```
XElement root = XElement.Load(file); // or .Parse(string)
var matches = root.XPath("//item[contains({0}, {1}, false)]", 
    urlSearchPattern, new NodeSet("@urlSearchPattern")); 
```

false 用于使用节点集转换所有值`.ToLower()`并反转模式，它将搜索`pattern.Contains(nodeset)`.

如果您的项目没有 urlSearchPattern 或其值为`""`，您可以添加`and . != ''`到 xpath 表达式以从结果中删除它们。

该库还处于起步阶段，因此如果您的 ITEM_XML_PATH 非常复杂，这可能不适合您。

**更新：**基于 Pawel 的评论，使用包含的 Linq-to-Xml XPath 版本：

```
root.XPathSelectElements(
    "//item[contains('" + urlSearchPattern + "', @urlSearchPattern)]"); 
```

# c# - 什么是“聚合而不是继承”？

> ID：11263525
> 
> 赞同：1
> 
> 时间：2012-06-29T14:21:05.403
> 
> 标签：c#, inheritance, aggregation

> **可能的重复：**
> [继承与聚合](https://stackoverflow.com/questions/269496/inheritance-vs-aggregation)

该网站的一位合作伙伴告诉我，我需要“聚合而不是继承”作为解决方案。

我调查了每个人的想法，但“过度继承”？这是我的疑问。有人可以给我举例说明这是什么意思？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:25:36.593

这意味着一个类应该包含另一个类的实例，而不是从它继承。

## 继承示例

```
class Engine
{
}

class vehicle extends Engine
{
} 
```

## 聚合示例

```
class Engine
{
}

class Vehicle
{
Engine powerplant;
} 
```

我在我们的教科书中写了一篇关于[不良继承示例的危险的帖子。](http://codewright.blogspot.com/2009/01/identity-crisis.html)我发现了一个有用的例子，联邦航空管理局根据其对飞机及其能力的分类方式对法规进行细分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:30:26.083

正如评论中提到的，这意味着尽可能使用聚合而不是继承。[更喜欢组合而不是继承](https://stackoverflow.com/a/53354/95573)中给出了解释？

> 更喜欢组合而不是继承，因为它更具延展性/以后易于修改，但不要使用始终组合的方法。通过组合，可以很容易地通过依赖注入/设置器来动态改变行为。继承更加严格，因为大多数语言不允许您从一种以上的类型派生。

如果您想知道[组合和聚合之间的区别。](https://stackoverflow.com/a/6231433/95573)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:30:56.397

聚合比使用继承更不容易出错（继承可能导致难以维护的代码，并且难以理解）

此外，当您继承一个类时，您还将它的所有公共成员公开给派生类的客户端（您可以改为使用聚合并将字段设为私有以限制客户端对该对象的访问）

# python - 文本文件到字典

> ID：11263526
> 
> 赞同：-2
> 
> 时间：2012-06-29T14:21:06.603
> 
> 标签：python

我有一个包含 5 列数据的文本文件。第一列包含名称，接下来的 4 列用数字填充。如何导入文本文件并将每一行转换为字典项，其中键作为第一列中的名称，返回值作为第三列中的值？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:22:57.447

假设列由空格分隔，您可以执行

```
d = {}
with open("input") as f:
    for line in f:
        key, dummy, dummy, value, dummy = line.split()
        d[key] = float(value) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:27:13.750

如果你有一个 csv 文件：

```
with open('yourfile.csv', 'rb') as f:
    reader = csv.reader(f)
    if you_have_header_row:
        next(reader)
    d = {row[0]:float(row[2]) for row in reader} 
```

# java - 通过从一个 Activity 调用函数将退出按钮添加到 Android 应用程序

> ID：11263527
> 
> 赞同：0
> 
> 时间：2012-06-29T14:21:09.260
> 
> 标签：java, android

我在一个活动中具有以下功能

```
 public void AppExit()
  {
    Editor edit = preferences.edit();
    edit.putString("pref_code", "");
    edit.commit();

    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);

    int pid = android.os.Process.myPid();
    android.os.Process.killProcess(pid);

  } 
```

它在自己的活动中工作正常。我想将此称为另一项活动。我也创建了类实例，如下所示

```
 Home hm = new Home();
 hm.AppExit(); 
```

但它的错误为

```
 06-29 19:41:06.024: E/AndroidRuntime(583): FATAL EXCEPTION: main
  06-29 19:41:06.024: E/AndroidRuntime(583): java.lang.NullPointerException
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.app.Activity.startActivityForResult(Activity.java:2827)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.app.Activity.startActivity(Activity.java:2933)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.mythrii.timeApp.Home.AppExit(Home.java:219)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.mythrii.timeApp.AdminPage.onOptionsItemSelected(AdminPage.java:205)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.app.Activity.onMenuItemSelected(Activity.java:2205)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:748)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.view.View$PerformClick.run(View.java:9080)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.os.Handler.handleCallback(Handler.java:587)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.os.Handler.dispatchMessage(Handler.java:92)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.os.Looper.loop(Looper.java:130)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at android.app.ActivityThread.main(ActivityThread.java:3683)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at java.lang.reflect.Method.invokeNative(Native Method)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at java.lang.reflect.Method.invoke(Method.java:507)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  06-29 19:41:06.024: E/AndroidRuntime(583):    at dalvik.system.NativeStart.main(Native Method) 
```

有谁能够帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:40:00.400

作为一般建议：**不要利用操作系统。**

除了在常规桌面系统中，Android（和 iOS）是您通常没有*那么*多常用应用程序的系统。由于大多数用户只经常使用满手的应用程序，因此系统不会在您返回主屏幕时完全“杀死”应用程序，以使其在*再次*打开时加载更快。

这将导致一些应用程序启动得非常快（最常用的应用程序）。但是，当 Android 系统需要占用的资源时，它会自行释放这些资源，杀死一些仍在后台运行的旧应用程序。

这就是为什么您通常不应该自己终止应用程序的原因。

* * *

除了上述声明之外，您似乎正在尝试手动启动主屏幕。**没有必要这样做！**

如果您只是想添加一个从您的应用程序返回到主屏幕的选项，请调用[`this.finish()`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)您的`Activity`. 这将关闭当前活动并返回主屏幕。

* * *

最后一点，如果您希望您的应用程序**存储有关当前状态的信息**（就像您正在使用共享首选项一样），您应该在 Activity 的[`onStop()`-method](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)或`onPause()`-method 中执行此操作。有关更多信息，请参阅[文档](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)。

这个方法会被Android系统调用，不管是你自己关闭应用还是系统关闭它（因为它需要内存空间）。

* * *

最后（也是最不重要的）一些**通用的 Android 编程建议**：

不要使用`new`-operator 手动创建活动。让系统执行此操作并`Intent`为此使用 s。

活动实际上只是“要在上面画画的墙”。它们旨在向用户*展示*一些东西。应用程序代码（以及任何类型的繁重工作）几乎总是应该放入`AsyncTask`. 这样，您的 UI 将始终响应并且永远不会“冻结”，这会使用户感到紧张。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:27:10.930

对于活动通信，您可以使用广播消息。

*   这是 Android 参考：http: [//developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

*   这是关于那个联合国的问题：

[如何发送和接收广播消息](https://stackoverflow.com/questions/3907713/how-to-send-and-receive-broadcast-message)

*   另一个很好的教程：

[http://mobisys.in/blog/2012/01/android-sending-receiving-broadcast-messages/](http://mobisys.in/blog/2012/01/android-sending-receiving-broadcast-messages/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:33:54.680

运行这个：

```
Intent i = new Intent(this,Home.class);
Bundle data = new Bundle();
data.putString("0","0");
i.putExtras(data);
startActivity(i); 
```

在 Home 活动中：

```
protected void onResume() {

Intent i = getIntent();
if (i.getExtras() != null) {
    //AppExit();  unneccessary
    finish();
} 
```

# android - v4 支持库是否在可用时使用新类？

> ID：11263533
> 
> 赞同：8
> 
> 时间：2012-06-29T14:21:28.820
> 
> 标签：android, android-fragments, android-support-library, android-dialogfragment

我知道*v4 支持库*可用于在旧的 android 版本中实现在较新版本中引入的东西，例如 Fragments。如果我们实现一个使用*v4 支持库*来显示*Dialog Fragments*的应用程序，例如，它在 ICS 上运行时使用最新的代码（即原始和更新的片段）还是仍然使用每个 android 版本的支持代码？

有没有办法在同一个应用程序中同时使用`android.app.Fragment`类和`android.support.v4.app.Fragment`类，在运行时区分我们是在*支持 Fragment 的 android 版本上运行，还是在导入**v4 支持库*时只需要使用支持类？

也许我错了，但在我看来，在最近的平台上运行时不使用最新代码似乎不是一个好主意..

坚持*Dialog Fragment*案例，你觉得哪个更好：

**1）**使用*v4支持库*，即在所有android版本上使用兼容代码

**2)**`android.app.DialogFragment`在 API 级别 11 或更高级别上运行时使用新的，在 API 级别 < 11 上运行时使用该类的弃用`showDialog`和`onCreateDialog`方法`Activity`

正如我已经说过的，最好的恕我直言如下，但是（如果我错了，请纠正我）这不是一个可能的解决方案：

**3)**`android.app.DialogFragment`在 API 级别 11 或以上运行时使用新类，`android.support.v4.app.DialogFragment`在 API 级别 < 11 上运行时使用该类

如果我造成了一些混乱，我很抱歉，我希望这个问题很清楚..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T14:28:15.920

当您在项目中使用 android 支持库时，即使设备具有兼容的 Android API 级别，因此不需要使用兼容库，它仍然会使用兼容库中的方法。

**编辑**

浏览它声明的 Android 支持库 v4 代码（在`android.support.v4.app.Fragment`类的注释中）：

> 框架的android.app.Fragment 的静态库支持版本。用于编写在 Android 3.0 之前的平台上运行的应用程序。在Android 3.0以上运行时，仍然使用这个实现；它不会尝试切换到框架的实现。有关类概述，请参阅框架 SDK 文档。

链接[在这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/app/Fragment.java#Fragment)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T14:47:23.683

> 例如，如果我们实现一个使用 v4 支持库来显示 Dialog Fragments 的应用程序，它在 ICS 上运行时是使用最新代码（即原始和更新的片段）还是仍然使用每个 android 版本的支持代码?

特别是对于片段，它总是使用自己的反向端口。在其他情况下，它可能会传递到可用的本机实现。

> 有没有办法在同一个应用程序中同时使用 android.app.Fragment 类和 android.support.v4.app.Fragment 类，在运行时区分我们是在支持 Fragment 的 android 版本上运行还是我们需要当我们导入 v4 支持库时只使用支持类？

我会坚持支持课程。通过采用替代方法，您将添加大量额外的工作而没有真正的好处。

> 也许我错了，但在我看来，在最近的平台上运行时不使用最新的代码似乎不是一个好主意。

欢迎您发表意见。对于像片段这样的较大子系统，恕我直言，成本将超过收益。

> 坚持Dialog Fragment案例，你觉得哪个更好：

最好的选择是根本不使用`DialogFragment`，而是找到一种方法来完成你想要的而不使用对话框。

在您提出的三个选项中，暂时使用选项#1。一旦您觉得可以放弃对 Android 2.x 的支持，您就可以切换到在整个应用程序中使用原生 Fragment。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T14:37:14.927

您可以通过以下方式以编程方式查看 API 级别：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.FROYO){
// Do something for froyo and above versions
} else{
// do something for phones running an SDK before froyo
} 
```

然后，您可以通过在代码中写入类的完整名称来复制您的代码以使用您想要的类，即 android.app.DialogFragment 或 android.support.v4.app.Fragment 而不仅仅是 DialogFragment。

# powershell - HTML 电子邮件中的 PowerShell 显示表格

> ID：11263538
> 
> 赞同：9
> 
> 时间：2012-06-29T14:21:41.523
> 
> 标签：powershell

好的，这可能已经回答了，但我是新手并且正在努力学习，所以我想我没有“得到”它。我有一个包含信息表的变量（我从 SQL 查询中得到它）。我可以将变量输出到屏幕并查看表格，但是当我尝试在正文中使用它构建 HTML 电子邮件时，它会出现乱码。

这是代码：

```
# This code sets up the HTML table in a more friendly format
$style = "<style>BODY{font-family: Arial; font-size: 10pt;}"
$style = $style + "TABLE{border: 1px solid black; border-collapse: collapse;}"
$style = $style + "TH{border: 1px solid black; background: #dddddd; padding: 5px; }"
$style = $style + "TD{border: 1px solid black; padding: 5px; }"
$style = $style + "</style>"

# This code defines the search string in the IssueTrak database tables
$SQLServer = "Blah"
$SQLDBName = "Blah"
$SQLUsername = "Blah"
$SQLPassword = "Blah"
$SQLQuery = "SELECT u.FirstName,u.LastName,u.EMail,COUNT(UserID) as Count
        FROM dbo.Issues i with(nolock)
        JOIN DBO.Users u with(nolock) on u.UserID = i.NextActionBy
        where i.Status='Open'
        group by u.FirstName,u.LastName,u.EMail
        order by Count(*) desc"

# This code connects to the SQL server and retrieves the data
$SQLConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server = $SQLServer; Database = $SQLDBName; uid = $SQLUsername; pwd = $SQLPassword"

$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = $SqlQuery
$SqlCmd.Connection = $SqlConnection

$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd

$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet)
$SqlConnection.Close()

# This code outputs the retrieved data
$DataSet.Tables | Format-Table -Auto

# This code emails a report regarding the results of the retrieved data
$smtpServer = "Blah"
$smtpFrom = "Blah"
$smtpTo = "Blah"
$messageSubject = "IssueTrak Open Issues By Next Action Report"
$message = New-Object System.Net.Mail.MailMessage $smtpfrom, $smtpto
$message.Subject = $messageSubject
$message.IsBodyHTML = $true
$message.Body = "Here is a listing of open issues in IssueTrak, sorted by Next Action.<br><br>"
$message.Body = $message.Body + $html

$smtp = New-Object Net.Mail.SmtpClient($smtpServer)
$smtp.Send($message) 
```

屏幕上的输出如下所示：

```
35

FirstName   LastName   EMail                                Count
---------   --------   -----                                -----
John        Doe        John.Doe@blah.com                       51
Jane        Doe        Jane.Doe@blah.com                       20 
```

...但电子邮件正文如下所示：

```
Here is a listing of open issues in IssueTrak, sorted by Next Action.

Microsoft.PowerShell.Commands.Internal.Format.FormatStartData Microsoft.PowerShell.Commands.Internal.Format.GroupStartData

Microsoft.PowerShell.Commands.Internal.Format.FormatEntryData Microsoft.PowerShell.Commands.Internal.Format.FormatEntryData 
```

...等等。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T14:51:48.957

这是我的做法：

```
# Create a DataTable
$table = New-Object system.Data.DataTable "TestTable"
$col1 = New-Object system.Data.DataColumn Name,([string])
$col2 = New-Object system.Data.DataColumn Dept,([string])
$table.columns.add($col1)
$table.columns.add($col2)

# Add content to the DataTable
$row = $table.NewRow()
$row.Name = "John"
$row.Dept = "Physics"
$table.Rows.Add($row)
$row = $table.NewRow()
$row.Name = "Susan"
$row.Dept = "English"
$table.Rows.Add($row)

# Create an HTML version of the DataTable
$html = "<table><tr><td>Name</td><td>Dept</td></tr>"
foreach ($row in $table.Rows)
{ 
    $html += "<tr><td>" + $row[0] + "</td><td>" + $row[1] + "</td></tr>"
}
$html += "</table>"

# Send the email
$smtpserver = "smtpserver.domain.com"
$from = "user@domain.com"
$to = "user@domain.com"
$subject = "test"
$body = "Hi there,<br />Here is a table:<br /><br />" + $html
Send-MailMessage -smtpserver $smtpserver -from $from -to $to -subject $subject -body $body -bodyashtml 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-24T16:12:37.977

我认为这是一个更好的解决方案（参见参考文献 1）

```
$DataSet.Tables[0] |select * -ExcludeProperty RowError, RowState, HasErrors, Name, Table, ItemArray | ConvertTo-Html 
```

使用 ExcludeProperty，我们都可以从表中排除嘈杂的列，而无需专门指定我们想要的列

(1) [http://sqlblog.com/blogs/jonathan_kehayias/archive/2010/05/25/reinventing-the-wheel-automating-data-consistency-checks-with-powershell.aspx](http://sqlblog.com/blogs/jonathan_kehayias/archive/2010/05/25/reinventing-the-wheel-automating-data-consistency-checks-with-powershell.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T14:29:55.550

您可以尝试（未测试）：

```
$message.Body = $message.Body + ($DataSet.Tables | format-Table -auto |  convertto-html) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-28T12:40:23.803

我这样使用：

```
Import-Module C:\dbatools\dbatools.psd1

$HostName = Get-WMIObject Win32_ComputerSystem | Select-Object -ExpandProperty name
$DiskResult = Get-DbaDiskSpace -ComputerName $HostName | Sort-Object $_.FreeInGB | Out-DbaDataTable

# Create column headers of Table1
$HtmlTable1 = "<table border='1' align='Left' cellpadding='2' cellspacing='0' style='color:black;font-family:arial,helvetica,sans-serif;text-align:left;'>
<tr style ='font-size:13px;font-weight: normal;background: #FFFFFF'>
<th align=left><b>ComputerName</b></th>
<th align=left><b>Name</b></th>
<th align=left><b>Label</b></th>
<th align=left><b>SizeInGB</b></th>
<th align=left><b>FreeInGB</b></th>
<th align=left><b>PercentFree</b></th>
</tr>"

# Insert data into Table1
foreach ($row in $DiskResult)
{ 
    $HtmlTable1 += "<tr style='font-size:13px;background-color:#FFFFFF'>
    <td>" + $row.ComputerName + "</td>
    <td>" + $row.Name + "</td>
    <td>" + $row.Label + "</td>
    <td>" + $row.SizeInGB + "</td>
    <td>" + $row.FreeInGB + "</td>
    <td>" + $row.PercentFree + "</td>
    </tr>"
}
$HtmlTable1 += "</table>"

# Send Mail Inputs
$smtpserver = "smtp.domain.com"
$from = "Powershell Mail <" + $HostName + "@domain.com>"
$to = "<mail1@domain.com>", "<mail2@domain.com>"
$cc = "<mail3@domain.com>" , "<mail4@domain.com>"
$subject = "Disk Check for SQL Server"
$body = "Disk info for SQL Server like below:<br/><br/>" + $HtmlTable1

Send-MailMessage -smtpserver $smtpserver -from $from -to $to -cc $cc -subject $subject -body $body -bodyashtml 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-26T11:22:41.813

对于寻找简单桌子的人，这是我找到的

首先添加以下变量

```
$Header = @"
<style>
TABLE {border-width: 1px; border-style: solid; border-color: black; border-collapse: collapse;}
TH {border-width: 1px; padding: 3px; border-style: solid; border-color: black; background-color: #6495ED;}
TD {border-width: 1px; padding: 3px; border-style: solid; border-color: black;}
</style>
"@ 
```

你可以像下面那样添加

```
Get-PSDrive | ConvertTo-Html -Property Name,Used,Provider,Root,
CurrentLocation 
-Head $Header | Out-File -FilePath PSDrives.html 
```

读取文件时，请确保使用`-raw`如下参数

```
Get-ChildItem Cert:\LocalMachine\My  | Where-Object {$_.NotAfter -ge (get-date -DisplayHint Date) } |ConvertTo-Html -Property Issuer,Thumbprint,Notafter -Head $Header | Out-File C:\Iris\Cert.html
$body=Get-Content -Path C:\Iris\cert.html -Raw 
```

然后在发送邮件时，你可以做

```
send-emailmessage -body $body -bodyashtml #other values 
```

**参考资料：**
[https ://4sysops.com/archives/building-html-reports-in-powershell-with-convertto-html/](https://4sysops.com/archives/building-html-reports-in-powershell-with-convertto-html/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-20T13:21:32.003

笼统的回答：

`$body+=($variable|Select-Object property1,property2|ConvertTo-Html)`

只需使用您自己的变量和属性。当其他人寻找解决方案时，这就是我们希望看到的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-15T09:36:23.903

以 user1491315 答案为基础。

```
$html = "<table border='1'><tr>"
$tableCol = $table.Columns | select Caption
foreach($col in $tableCol){
    $html += "<td>" + $col.Caption + "</td>"
}
    $html += "</tr>"
$tableColCount = $table.Columns.Count
foreach ($row in $table.Rows)
{
    $html += "<tr>"
    For ($i=0; $i -le $tableColCount; $i++) {
        $html += "<td>" + $row[$i] + "</td>"
    }
    $html += "</tr>"
}
$html += "</table>" 
```

这做同样的事情，但会自动设置列名。

# entity-framework - Code First Entity Framework 模型中的一对多 - 关系如何工作？

> ID：11263542
> 
> 赞同：4
> 
> 时间：2012-06-29T14:21:49.100
> 
> 标签：entity-framework, code-first

给定标准的 Northwind 数据库（为了简洁而减少）：

```
 [Table("Order Details")]
    public class OrderDetail : IValidatableObject
    {
        [Key, Column(Order = 1)]
        public int OrderID { get; set; }
        [Key, Column(Order = 2)]
        public int ProductID { get; set; }
        ...
    }
   [Table("Orders")]
    public class Order
        {
        public int OrderID { get; set; }
        ...
        public virtual ICollection<OrderDetail> OrderDetails { get; set; }
    } 
```

我想知道这到底是如何工作的。我猜是因为 Order (OrderID) 中的主键在 OrderDetails (OrderID) 中具有相同名称的外键，所以 EF 的规则正确猜测它们具有外键/主键关系。

那是对的吗？

第二部分是另一个问题：

我有一个现有数据库，其中外键的名称不同（例如，将 OrderDetail 中的 OrderId 更改为 RecordNumber -（我无法更改数据库））。在这种情况下，我正在努力理解如何关联这两个表。

我正在使用 Fluent API（而不是上面的注释）并且有这样的东西：

```
---OrderDetails

// set up the primary key
HasKey(t => new { t.RecordNumber, t.ProductID };

---Order

HasKey(t => t.OrderId);

HasRequired(t => t.OrderDetails).WithMany().HasForeignKey(t => t.OrderId) 
```

（最后一条语句似乎非常错误，因为 HasForeignKey(...) 似乎唯一能够关联的是声明的主复合键）

我也试过

```
HasMany((t => t.OrderDetails).WithMany() 
```

这似乎与前面的声明不同，因为它使得没有 OrderDetails 成为可能。

两者都不起作用。

我试图表达的想法是订单必须至少有一个 OrderDetails - 我试图能够这样导航：

```
 Con.Orders.Single(o => o.OrderId == 1).OrderDetails 
```

我遇到的问题是我用 HasForeignKey(...) 声明的外键与 Orders 上的任何内容都不相关（并且代码引发了适当的异常 - “多重性无效”），我不知道如何来完成我的目标。

有什么想法吗？我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:32:16.333

> 我猜是因为 Order (OrderID) 中的主键在 OrderDetails (OrderID) 中具有相同名称的外键，所以 EF 的规则正确猜测它们具有外键/主键关系。

是，对的。重要的部分是它`Order`有一个到 s 的导航集合`OrderDetail`。`OrderDetail`EF 从这个属性（以及在引用 时没有相应的导航属性的事实）推断出`Order`两个实体之间存在一对多的关系。然后通过命名约定推断外键属性。

> 我试图表达的想法是订单必须至少有一个 OrderDetails。

您不能在模型和数据库之间的映射中定义这样的约束。您必须在应用程序的业务逻辑中确保这一点。在一对多关系中，集合可以有零个元素。

Fluent API 的正确映射是：

```
modelBuilder.Entity<Order>()
    .HasMany(order => order.OrderDetails)
    .WithRequired()
    .HasForeignKey(orderDetail => orderDetail.RecordNumber); 
```

# perl - 是否可以欺骗 Perl 使用变量 %INC 并且仍然保持全局 %INC 不变？

> ID：11263543
> 
> 赞同：2
> 
> 时间：2012-06-29T14:21:49.703
> 
> 标签：perl, global-variables, require, perlvar

我刚刚找到了一个我们正在使用的脚本，其中有一个子说明`my %INC`，其中存储了一些关于激励的值，因此`%INC`. 这似乎从来都不是问题，或者没有人注意到。对我来说，它产生了 20 个重新定义警告屏幕，因为`%INC`.perl 包含所有文件名`do`ne、`require`d 或`use`d，非常大，而现在是`('stuff' => 123)`.

我真的必须去重命名 sub 中对 this 的每一个引用，还是有另一种方法可以让 Perl 原谅这个......？

* * *

这是输出的一部分：

```
print Dumper \%INC; # I added this line
my %INC;             
print Dumper \%INC; # I added this line
exit;               # I added this line 
```

输出：

```
 [...]
          'SqlConnect.pm' => 'lib1/SqlConnect.pm',
          'Lib/RateRequest.pm' => 'Lib/RateRequest.pm'
        };
$VAR1 = {};
[Fri Jun 29 16:09:13 2012] live_batch_test.pl: Subroutine export_fail redefined at /usr/lib/perl5/5.14.2/Carp.pm line 43.
[Fri Jun 29 16:09:13 2012] live_batch_test.pl: Subroutine _cgc redefined at /usr/lib/perl5/5.14.2/Carp.pm line 45.
[Fri Jun 29 16:09:13 2012] live_batch_test.pl: Subroutine longmess redefined at /usr/lib/perl5/5.14.2/Carp.pm line 51.
[Fri Jun 29 16:09:13 2012] live_batch_test.pl: Subroutine shortmess redefined at /usr/lib/perl5/5.14.2/Carp.pm line 71.
[...] (Snipped like 20 screens of redefine warnings) 
```

警告仅显示我是否创建了我的一个类的对象（它恰好包含`SOAP::WSDL`所以它有很多东西）。我不确定为什么这些是重新定义警告。如果`%INC`是空的，它怎么知道东西正在被重新定义？

* * *

**更新：**

看来您实际上**可以**创建一个词法`my %INC`.

```
use strict; use warnings; use Data::Dumper;
print Dumper \%INC;
{
  my %INC = ('asdf' => 'asdf');
  print Dumper \%INC;
}
print Dumper \%INC; 
```

产生（剪断）：

```
 'feature.pm' => 'C:/Perl/lib/feature.pm'
        };
$VAR1 = {
          'asdf' => 'asdf'
        };
$VAR1 = {
          'warnings/register.pm' => 'C:/Perl/lib/warnings/register.pm', 
```

在我的情况下的问题似乎不是`my %INC`，而是`%INC = &sub_that_has_my_percent_INC_and_returns_it()`我实际上必须在脚本中`require`。现在，反过来，也有`use vars qw(%INC)`。更换它......好吧，我不确定它会破坏什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:33:39.200

全局变量`%INC`（或`%main::INC`或`%::INC`）是与词法范围完全不同的变量`%INC`，由 . 创建`my`。您可以安全地`my %INC`在您的子程序中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:30:34.617

定义词法范围`my %INC`是可能的，但是这个变量绝对没有特殊含义。`%INC`Perl在使用模块系统时只考虑全局。

你的问题在别处

举个例子来娱乐你，给定：

下午

```
package Aaa;
warn "Aaa loaded!";

1; 
```

公司

```
use strict;
use warnings;
use Data::Dumper;

use Aaa;
require Aaa;
warn 1, Dumper \%INC;
{
    my %INC;
    use Aaa;
    require Aaa;
    warn 2, Dumper \%INC;
}
warn 3, Dumper \%INC;
my %INC;
use Aaa;
require Aaa;

sub again {
    my %INC;
    require Aaa;
    warn 4, Dumper \%INC;
}

again();
warn 5, Dumper \%INC; 
```

您只会`%INC`在 1 和 3 中看到全局，而不会对词法进行任何更改，并且`Aaa.pm`仍将仅加载一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T17:02:13.473

`perldoc vars`表示`vars`编译指示已被`our`关键字取代。

遵循文档的建议似乎对我有用：

```
package Incentives;

use strict;
use warnings;
use Data::Dump 'dump';

our %INC = ( abc => 123 );

dump \%INC;                   # ( abc => 123 ),
                              # different under use vars '%INC';

use List::Util;               # Loads just fine

package Test;

use Data::Dump 'dump';

dump \%Incentives::INC;       # ( abc => 123 )
dump \%main::INC;             # reference to global %INC

1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T19:42:04.183

如果你触摸全局包变量`%INC`，你会遇到问题，但是你可以创建所有你想要的命名词法`%INC`，这不会是一个问题。

```
$ perl -e'require CGI; my %INC; require CGI;'

$ perl -e'require CGI; local %INC; require CGI;'
Subroutine export_fail redefined at .../Carp.pm line 64.
Subroutine _cgc redefined at .../Carp.pm line 66.
Subroutine longmess redefined at .../Carp.pm line 72.
Subroutine shortmess redefined at .../Carp.pm line 92.
Subroutine croak redefined at .../Carp.pm line 100.
Subroutine confess redefined at .../Carp.pm line 101.
Subroutine carp redefined at .../Carp.pm line 102.
Subroutine cluck redefined at .../Carp.pm line 103.
Constant subroutine Carp::CALLER_OVERRIDE_CHECK_OK redefined at .../Carp.pm line 108.
Subroutine caller_info redefined at .../Carp.pm line 114.
Subroutine format_arg redefined at .../Carp.pm line 181.
Subroutine get_status redefined at .../Carp.pm line 213.
Subroutine get_subname redefined at .../Carp.pm line 222.
Subroutine long_error_loc redefined at .../Carp.pm line 240.
Subroutine longmess_heavy redefined at .../Carp.pm line 268.
Subroutine ret_backtrace redefined at .../Carp.pm line 276.
Subroutine ret_summary redefined at .../Carp.pm line 309.
Subroutine short_error_loc redefined at .../Carp.pm line 324.
Subroutine shortmess_heavy redefined at .../Carp.pm line 348.
Subroutine str_len_trim redefined at .../Carp.pm line 361.
Subroutine trusts redefined at .../Carp.pm line 376.
Subroutine trusts_directly redefined at .../Carp.pm line 396.
Constant subroutine CGI::XHTML_DTD redefined at .../constant.pm line 151.
Subroutine _ops_to_nums redefined at .../overloading.pm line 10.
Subroutine import redefined at .../overloading.pm line 19.
Subroutine unimport redefined at .../overloading.pm line 37. 
```

你说的不靠谱。您必须在`%INC`某处更改全局而不是词法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T16:58:47.210

我想我找到了实际的问题和处理它的方法。

我没有创建两个文件。

`file1.pl`有一些潜艇。这些潜艇之一做这样的事情：

```
sub foo {
  my %INC = (foo => 'bar'); # lexical variable, does not mess with global %INC
  return %INC;
} 
```

`file2.pl`看起来像这样：

```
use vars qw(%INC);     # oops! global variable
require 'file1.pl';

sub bar1 {
  if (!$INC{'foo'}) {
    %INC = &foo();     # this is breaking stuff
  }
  my $hashref = {
    'inc' => \%INC,
  }
  return $hashref;
}

sub bar2 {
  if (!$INC{'foo2'}) {
    %INC = &foo();
  }
}
# and so on 
```

我在`file3.pl`其中创建，我有：

```
use MyModule;
require 'file2.pl';

my $data = &bar1();
my $obj = MyModule->new();
$obj->doStuff(); 
```

现在，当我调用`doStuff()`它时，它会为全局中的每个项目打印一个重新定义警告`%INC`（由于 file2，现在它是空的）。

我搜索了代码库`%INC`，发现只有 file1 和 file2 使用它。所以我所做的就是将 file2 更改为：

```
use vars qw();
require 'file1.pl';

my %INC;     # now lexical, but still the same for all subs in this file
sub bar1 {
  if (!$INC{'foo'}) {
    %INC = &foo();     # this is not breaking stuff any more
  }
  my $hashref = {
    'inc' => \%INC,
  }
  return $hashref;
}

sub bar2 {
  if (!$INC{'foo2'}) {
    %INC = &foo();
  }
}
# and so on 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T14:25:24.010

尝试

`no warnings 'redefine';`

不过，在那个子例程中，这可能会在未来产生一些有趣的副作用

# javascript - 从序列号生成的 html 颜色，用于区分各个设备

> ID：11263547
> 
> 赞同：0
> 
> 时间：2012-06-29T14:22:05.583
> 
> 标签：javascript, embedded

我们的客户拥有不止一种我们的网络设备，不同之处仅在于序列号和 IP 地址。

客户端在连续配置多个设备时会出错，因为各个 Web 应用程序看起来太相似了，并且由于客户端复制和粘贴错误而返回了运行良好的设备。

因此，在网页标题中使用易于识别的颜色来区分 Web 应用程序将非常有用，该颜色对于每个设备都是不同的。

序列号可用于 JavaScript，我认为在 JavaScript 中生成独特的颜色会很好。这样，每个设备在每个页面标题中都会有不同的颜色点或几何图形，并且更容易区分。

我编写了有效的 JavaScript 代码：

```
function ChangeColor(mySerialNumber) 
{
    var i = 0;    
    var asciinum;  
    var numberstring = '';  
    for(i=0; i < mySerialNumber.length; i++)  
    {  
        asciinum = mySerialNumber.charCodeAt(i);  
        numberstring += (asciinum).toString();  
    }  

    if(numberstring.length < 9)  
    {  
        while(numberstring.length < 9)  
        {  
            numberstring = '9' + numberstring; // prepend  
        }  
    }  
    else  
    {  
         numberstring = numberstring.substring((numberstring.length -10),(numberstring.length -1));  
    }  

    newcolorcode = 'rgb(' + numberstring.substring(1,3) + ',';  
    newcolorcode = newcolorcode + numberstring.substring(4,6) + ',';  
    newcolorcode = newcolorcode + numberstring.substring(7,9) + ')';  

    alert('numberstring is ' + numberstring + ' and new color code is ' + newcolorcode);  

    colorme.style.backgroundColor = newcolorcode;  
} 
```

我们的序列号是连续的，看起来像这样：

677-026A、677-027A、677-028A 等

所以生成的颜色太接近了，看起来太相似了。

有人对改善颜色跨度有什么建议吗？我不能使用 rand 函数，因为颜色必须在给定机器的每个网页上保持相同？

谢谢，伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T17:09:47.963

通过在屏幕一角添加装饰点并允许用户使用 Jan Odvarko 的 JavaScript 颜色选择器更改颜色来解决此问题

[http://jscolor.com](http://jscolor.com)

在颜色选择时，JavaScript 确认会询问用户是否要保留此颜色。如果是，Ajax 调用会在服务器端保留选择。

效果很好。

谢谢大家！

# mysql - 预检查长 SQL 语句

> ID：11263550
> 
> 赞同：0
> 
> 时间：2012-06-29T14:22:19.890
> 
> 标签：mysql, parsing

我正在使用多个 INSERT（INSERT INTO ... VALUES (1)、(2) 等）进行表导入。是否有一种工具可用于检查语句的形式对于给定的 SQL 类型（例如：MySQL）是否正确，而不必对数据库运行查询？我只想检查值中的撇号、反斜杠等内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:25:07.350

有一个名为[SqlFiddle](http://sqlfiddle.com)的工具，您可以在其中测试这种情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:25:34.250

如果您使用的是 Microsoft SQL Server Management Studio，则执行按钮旁边有一个解析按钮。它是一个复选图标。

# javascript - 在Javascript中排队Ajax请求？

> ID：11263555
> 
> 赞同：1
> 
> 时间：2012-06-29T14:22:48.207
> 
> 标签：javascript, ajax

我想每秒钟执行一次 Ajax 请求。我的下一个代码完美运行。

```
 window.onload = function () {
        setTimeout(doStuff, 1000); //wait before continuing
    }

    function doStuff() {
        $.ajax({
            // ...
        });
        setTimeout(doStuff, 1000);
    }; 
```

但是此时如果我使用 Fiddler 之类的工具来阻止我的请求，系统会继续发送新的 Ajax 请求。我想将它们排入队列并仅在我的服务器应答后发送我的下一个 Ajax 请求。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:28:14.253

在成功回调中调用 setTimeout：

```
function doStuff() {
    $.ajax({
        // ...
        success: function(result) {
            // ...
            setTimeout(doStuff, 1000);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:51:12.100

我刚刚遇到了一个类似的问题并解决了它，所以我想我会在 SO 上分享我的答案。

这是我所做的：

//全局变量：

```
var ajaxQue = [];   //array containing immediate que of ajax object request to be fired off
var ajaxCache = {}; //object holding ajax requests. 
var ajaxThreadActive = 0;   //var for indicating if the ajaxQue if currently firing off or not. 

//get the last (newest) ajax Request
function getLastRequest() {
    for (i in ajaxCache) {
        ajaxQue.push(ajaxCache[i]);
        delete ajaxCache[i];
        return; //aim to only get one request at a time inorder to catch more requests
    }
    //if no items in the cache exist, will come here
    ajaxThreadActive = 0; //ajax queue is now empty
}

//put an ajax request in an obj with a specific id so that if a newer ajax request is created before the ajax requests are finished sending, it will replace the old one
function queRequest(ajaxObj, id) {
    if (arguments.length != 2) {    //id argument is optional
        id = uuid++;    //create unique id as default
    }
    if (id in ajaxCache) {
        console.log('duplicate request');   
    }
    ajaxCache[id] = ajaxObj;
    if (ajaxThreadActive == 0) {
        ajaxThreadActive = 1;
        getLastRequest();   //retrieve most 'updated' ajax request
        fireOffAjaxQue();   
    } else {
        return 'ajax thread is running';
    }
}

//fire off the ajax queue
function fireOffAjaxQue () {
    if ((ajaxQue.length > 0) && ajaxThreadActive == 1) {    //an if check on the thread active incase I want to close this from another place in code
        $.ajax(ajaxQue[0]).always( function () {
            setTimeout(function () {
                getLastRequest();   //retrieve most 'updated' ajax request
                fireOffAjaxQue();
            }, 50); //fire off another ajax request since this one has been completed.
        });
        ajaxQue.shift();    //perform this immediately after the ajax request is sent, will execute before the .always() function
    } 
} 
```

用法很简单，而不是你通常在 jQuery 中所做的：

```
$.ajax({url: 'someplace.php',
        data: dataVar,
        success: function(data) {...}); 
```

用这个改变它：

```
//create ajax object
var ajaxObj = {url: 'someplace.php',
               data: dataVar,
               success: function (data) {...}};
 //send ajax object to que 
```

然后将其发送给 Que：

```
 queRequest(ajaxObj);  //send to que without an id since this is a unique request
 // *******OR********
 queRequest(ajaxObj, id);   //send to the que with an id IF this is to replace any 'older' requests of the same id 
```

我已经包含了一个 AjaxCache 来保存*最新*的ajax 请求。即，如果您有一个在用户击键时发送重复请求的功能，有时您只需要发送最新、最新的请求（如表单信息）。以这个管理器的方式，它处理具有关联 id 的请求（可选），以便新请求可以通过覆盖具有相同 id 的请求来替换旧请求。

```
//for an example, I use it like this in my webpage
queRequest(ajaxObj, 'table1Data'); 
```

现在，如果队列仍在触发我发出的任何请求，`'table1Data'`则只会用 id 覆盖 ajaxObj，`'table1Data'`从而仅发送最少量的 Ajax 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:26:59.437

使用 async 使 ajax 请求等到第一个完成

```
jQuery.ajax({
    url: "query.php?Time="+myTimestamp(),
    async: false,
    success: function(data){
        jQuery.ajax({
            url: "query.php?Time="+myTimestamp(), 
            async: false,
            success: function(data){

            }
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:27:44.083

我已将[http://code.google.com/p/jquery-ajaxq/](http://code.google.com/p/jquery-ajaxq/)用于生产应用程序。

我已经定制了代码来中止运行 ajax 请求。

*   Navigational Ajax（导航到屏幕） - 使用中止。

*   数据提交 - 使用的队列。可以有不同名称的不同队列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:29:48.297

只需在请求的成功处理程序中移动下一个请求的触发器即可：

```
function doStuff() {
    $.ajax({
        // ...
        success: function( data ) {
           // your other code
           setTimeout(doStuff, 1000);
        }
    });  
}; 
```

# sql-server-2008-r2 - 在 sql server 2008 r2 的 ssrs 报告管理器上使用 roports 时，我无法获取下拉列表来配置订阅和呈现格式

> ID：11263563
> 
> 赞同：2
> 
> 时间：2012-06-29T14:23:18.167
> 
> 标签：sql-server-2008-r2, ssrs-2008-r2

在 sql server 2008 r2 的 ssrs 中使用报表管理器上的 roports 时，我无法获取下拉列表来配置订阅和呈现格式。我在多个浏览器 IE、Mozilla 和 chrome 上尝试过，但没有用。将光标放在特定报告上时，它显示“家中的项目”而不是下拉列表。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T13:51:06.030

与现代版本的 Chrome、Firefox、IE 等相比，旧版本的 IE 处理 javascript 的方式有几个不同之处。

我发现修复 SSRS 2008 R2 的最简单方法是将 IE 设置为对我的 SSRS 站点使用兼容模式，并且仅使用 IE 来管理 SSRS。

但是，我无法说服我所有的用户他们应该切换到 IE，所以我必须找到一个更通用的解决方案。为了让 SSRS 2008 R2 在现代浏览器中工作，我修改了文件夹**C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\js**中的 ReportingServices.js 文件。

我修复了以下问题：

*   element.value 已替换为 element.getAttribute("value")
*   table.cells.length 已替换为 table.rows.length
*   table.cells[index] 已替换为 table.rows[index].cells[0]
*   添加了一个基本的“GetElementsByClass”函数来解决“lastChild”工作方式的差异
*   添加了一个“pageLoad”函数，用于更新包含渲染报告的 div 的 element.style.overflow 值

[您可以自己进行这些修改，但为方便起见，您可以在www.pottersolutions.com/ssrs-2008-r2.html](http://www.pottersolutions.com/ssrs-2008-r2.html)上查看我正在使用的整个 ReportingServices.js 文件（该文件太大，无法在此回复中发布）。

永远记得在进行任何修改之前备份您的文件！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:46:12.280

我遇到了同样的问题，在网上搜索了很多之后，解决方案似乎是**使用兼容模式在 IE**中查看页面......希望这对你有用。

# c++ - Opengl ES 纹理绘制不正确

> ID：11263565
> 
> 赞同：2
> 
> 时间：2012-06-29T14:23:24.223
> 
> 标签：c++, opengl-es

我对opengl es（Android）有一个奇怪的问题。有些纹理绘制不正确，就像纹理坐标发生了变化，但其他纹理呈现正常。例如我有这个： ![在此处输入图像描述](../Images/b0181b6ce6a920a03d94406daafbd015.png)

我明白了：

![在此处输入图像描述](../Images/c6620686716c36906ee924a4f14e9885.png)

（简历和圆圈是使用相同纹理坐标/顶点绘制的其他纹理）

我像这样加载纹理：

```
 GLuint texture;
  glGenTextures(1, &texture);
  glBindTexture(GL_TEXTURE_2D, texture);

  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

  glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,GL_MODULATE);

  if(alpha)glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid*) image_data);
  else glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, (GLvoid*) image_data); 
```

并像这样渲染：

```
//int to fixed point
#define iX(x) (x<<16)
//float ti fixed point
#define fX(x) ((int)(x * (1  << 16)))

int square[12] = {
    fX(-0.5), fX(-0.5), 0,
    fX(0.5), fX(-0.5), 0,
    fX(-0.5), fX(0.5), 0,
    fX(0.5), fX(0.5), 0
};

int texCoords[8] = {
    fX(0), fX(0),
    fX(1), fX(0),
    fX(0),fX(1),
    fX(1),fX(1)
};

void Render(int type)
{

    if(type==RENDER_2D)gltviewOrtho();

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnable(GL_TEXTURE_2D);

    glBindTexture(GL_TEXTURE_2D, id);
    glVertexPointer(3, GL_FIXED, 0, square);
    glTexCoordPointer(2, GL_FIXED, 0, texCoords);
    /////////////////////////////////////////////////////
    glPushMatrix();

    if(align==ALIGN_CENTER)glTranslatef(x,y,z);

    if(align==ALIGN_LEFT)glTranslatef(x-scalex/2,y,z);
    if(align==ALIGN_LEFT+ALIGN_TOP)glTranslatef(x-scalex/2,y+scaley/2,z);
    if(align==ALIGN_LEFT+ALIGN_BOTTOM)glTranslatef(x-scalex/2,y-scaley/2,z);

    if(align==ALIGN_RIGHT)glTranslatef(x+scalex/2,y,z);
    if(align==ALIGN_RIGHT+ALIGN_TOP)glTranslatef(x+scalex/2,y+scaley/2,z);
    if(align==ALIGN_RIGHT+ALIGN_BOTTOM)glTranslatef(x+scalex/2,y-scaley/2,z);

    if(align==ALIGN_BOTTOM)glTranslatef(x,y-scaley/2,z);
    if(align==ALIGN_TOP)glTranslatef(x,y+scaley/2,z);

    glScalef(scalex,scaley,0);
    glColor4f(r,g,b,a);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
    glPopMatrix();
    ////////////////////////////////////////////////////
    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    if(type==RENDER_2D)gltviewPerspective();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:58:13.033

上传纹理时的像素解包对齐为 4：这意味着每个纹理行应以 4 字节对齐开始。

如果您的数据被紧密打包，使用 250 像素宽的 RGB 位图需要 2 字节对齐：实际上每个位图行由 750 字节定义，而不是 4 的倍数。

本质上，纹理上传器忽略每行 2 个字节，因为它认为位图行长 752 个字节。

要解决您的问题，请在上传纹理之前设置像素对齐：

```
 glPixelStorei(GL_UNPACK_ALIGNMENT, 2) 
```

如果您能够使用 NPOT 纹理，请不要浪费内存。

# sublimetext2 - 如何为 Sublime text 2 中的语言创建新的语法高亮集

> ID：11263568
> 
> 赞同：4
> 
> 时间：2012-06-29T14:23:33.890
> 
> 标签：sublimetext2, syntax-highlighting, mel

我正在使用令人惊叹的 Sublime Text 2 为 Maya 编写 MEL（Maya 嵌入式语言）脚本，但它没有针对 MEL 的语法突出显示。现在我强迫它把文本解释为 Perl，它做得很好，但远非完美。添加 Maya 的命令会很方便。有人知道我将如何为 Sublime 创建语法高亮集吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:08:07.843

我一直在使用在 github 上找到的 MEL textmate 包。我分叉了它，添加了一些片段并稍微调整了语言。语言文件是 MEL.plist，但我将其更改为 MEL.tmLanguage，它现在可以在 Sublime Text 2 中使用。所有片段都可以正常工作。

如果您想使用它，请转到您的 Sublime Text Packages 目录并将 repo 克隆到 MEL：

```
git clone git@bitbucket.org:hoolymama/mel.tmbundle.git MEL 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T05:11:30.913

我认为您最好的选择是阅读有关[如何编写语法定义](http://docs.sublimetext.info/en/latest/reference/syntaxdefs.html)的文档。它是一种 json 格式，定义了要捕获的所有模式以及如何表示它们。

您可以使用现有`.tmLanguage`文件作为指南，例如（在 OSX 上）： `~/Library/Application Support/Sublime Text 2/Packages/Perl/Perl.tmLanguage`

简而言之，您创建一个像“MEL”这样的新包，并将`MEL.tmLanguage`文件放在那里。

# database - 避免在视图中连接数据库

> ID：11263572
> 
> 赞同：0
> 
> 时间：2012-06-29T14:23:48.050
> 
> 标签：database, zend-framework, zend-db-table

在 IndexController 中，我从表中检索数据并将它们发送到视图。在视图中，我执行 foreach 循环并显示它。需要从数据库中获取一种类型的数据，因此需要在视图中链接到数据库来获取它。

```
<?php foreach ($this->datas as $data ): > 
  <div id="<?php echo $data->data_id ?>"></div>
  <?php 

$Data = Zend_Db::factory('pdo_mysql', $config);

    $select = $Data->select()
            ->FROM('data')
            ->WHERE('data_id = ?',$data->anchor); 
       $name = $Data->fetchRow($select);
   ?>

<span class="nick_name"><?php echo $name?></span>  

<?php endif; ?> 
```

如何避免在视图中连接到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:27:57.957

简单：只是不要这样做。

只需将该数据库逻辑从您的视图中移开即可。在控制器或（甚至更好）模型中执行一个`foreach`循环，为每个元素获取您想要的数据。或者，如果可能，使用 a`JOIN`直接组合结果。

# hash - 带有特殊字符的散列函数？

> ID：11263574
> 
> 赞同：1
> 
> 时间：2012-06-29T14:23:51.790
> 
> 标签：hash, sha1

我的应用程序需要数据库来存储用户名和密码。要散列密码，我正在寻找 SHA 1 算法。基本上我需要一些特殊字符，例如 . , ! @ # $ % ^ & * ( ) 以及我的哈希中的 AZ 、 az 、 0-9 等。
有什么办法得到它们吗？
寻找 php 或 javascript 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:26:04.393

它的输出只是二进制数据。随心所欲地对其进行编码。

# c++ - C++ 访问一个类的成员，该类是 std::map 中的 mapped_type

> ID：11263579
> 
> 赞同：2
> 
> 时间：2012-06-29T14:24:08.250
> 
> 标签：c++, stdmap

考虑一个`std::map<const char *, MyClass*>`.

如何访问`MyClass`映射指向的对象的成员（变量或函数）？

```
// assume MyClass has a string var 'fred' and a method 'ethel'
std::map<const char*, MyClass*> MyMap;

MyMap[ "A" ] = new MyClass;
MyMap.find( "A" )->fred = "I'm a Mertz";  // <--- fails on compile
MyMap.find( "A" )->second->fred = "I'm a Mertz";  // <--- also fails 
```

* * *

**编辑**——根据 Xeo 的建议

我发布了虚拟代码。这是真正的代码。

```
// VarInfo is meta-data describing various variables, type, case, etc.
std::map<std::string,VarInfo*> g_VarMap; // this is a global 

int main( void )
{ 
   // ........ g_VarMap["systemName"] = new VarInfo; 
   g_VarMap.find( "systemName" ).second->setCase( VarInfo::MIXED, VarInfo::IGNORE ); 
   // ..... 
} 
```

错误是：

```
struct std::_Rb_tree_iterator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, VarInfo*> >’ has no member named ‘second’
Field 'second' could not be resolved Semantic Error make: *** [src/ACT_iod.o] Error 1 C/C++ Problem
Method 'setCase' could not be resolved Semantic Error – 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T14:32:56.190

`std::map`在内部将类型存储为 a `std::pair`，并且`std::map::find`，返回 a `iterator`。因此，要访问您班级的成员，您必须通过`iterator`，它表示`key_type`as`first`和`value_type`as `second`。此外，正如其他人所说，您可能*不*应该`const char*`将`key_type`. 这是一个简短的例子。

```
#include <string>
#include <map>
#include <iostream>

struct T
{
   T(int x, int y) : x_(x), y_(y)
   {}

   int x_, y_;
};

int main()
{
   typedef std::map<std::string, T> map_type;
   map_type m;

   m.insert(std::make_pair("0:0", T(0,0)));
   m.insert(std::make_pair("0:1", T(0,1)));
   m.insert(std::make_pair("1:1", T(1,1)));

   // find the desired item (returns an iterator to the item
   // or end() if the item doesn't exist.
   map_type::const_iterator t_0_1 = m.find("0:1");

   if(m.end() != t_0_1)
   {
      // access via the iterator (a std::pair) with 
      // key stored in first, and your contained type
      // stored in second.
      std::cout << t_0_1->second.x_ << ':' << t_0_1->second.y_ << '\n';
   }

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:31:20.383

它失败是因为`std::map<T, Y>::find()`返回一个迭代器，而不是对 MyMap 对象的引用。正确的代码是：

```
map<const char*, MyClass*>::iterator a;
a = MyMap.find("A");
// a->fred; this is wrong too
a->second->fred = "Whatever"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:32:52.657

最明显的方法是

```
MyMap[key]->fred 
```

， 但

```
MyMap.find( key )->second->fred 
```

也应该工作。在这两种情况下，您都必须确保在使用之前存在密钥。在您编写的代码中，它（通常）不会是，因为您使用字符串文字的特定实例的地址作为键；允许编译器合并具有相同值的实例，但不是必须的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-10T15:16:46.217

问题是迭代器是指针类型，而不是引用类型，因此`iter.second`无法编译。

相反，您必须使用指针语法：（`iter->second`箭头而不是点）。

考虑这个简短的例子：

```
#include <iostream>
#include <map>

int main()
{
   std::map<int, std::string> myMap;

   std::map<int, std::string>::iterator it;
   std::map<int, std::string>::iterator end = myMap.end();

   myMap.insert(std::pair<int, std::string>(0, "hello"));
   myMap.insert(std::pair<int, std::string>(1, "world"));

   for(it = myMap.begin(); it != end; ++it)
   {
      // std::cout << "Value: " << it.second << "\n";
      // The previous line will fail to compile with error:
      //    ‘struct std::_Rb_tree_iterator<std::pair<const int,
      //    std::basic_string<char, std::char_traits<char>,
      //    std::allocator<char> > > >’ has no member named ‘second’

      // The following line is correct
      std::cout << "Value: " << it->second << "\n";
   }
} 
```

# c# - RestSharp 屏幕抓取

> ID：11263580
> 
> 赞同：2
> 
> 时间：2012-06-29T14:24:08.457
> 
> 标签：c#, asp.net-mvc-3, rest, screen-scraping, restsharp

问题：我们有一个非常慢的工作流程，我正在尝试使用 RestSharp（我以前从未使用过）在 restful / MVC3 中重写它。到目前为止，我能够执行网站的初始 GET，但是当我进行第一次后续 POST（模拟单击复选框，然后单击继续按钮转到下一页）时，我不断得到以下错误：`405 - HTTP verb used to access this page is not allowed.` 无法显示您要查找的页面，因为使用了无效的方法（HTTP 动词）尝试访问。

我可能在代码中做错了什么。我知道我试图“屏幕抓取”的网站允许这些类型的请求，因为我们有一个古老的缓慢工作流程基础，目前正在运行，但它非常缓慢且过时。旁注该网站位于 asp.net 中，需要会话状态。

这是我的代码：

```
var client = new RestClient("https://thewebsite.com/");            
var request = new RestRequest(Method.GET);
request.AddHeader("Content-Type", "application/x-www-form-urlencoded");            
request.RequestFormat = DataFormat.Json;

var response = client.Execute(request);

string responseString = string.Empty;
if (response.StatusCode == HttpStatusCode.OK)
{                                 
    string ViewState = string.Empty;
    string EventValidation = string.Empty;
    request = new RestRequest(Method.POST);    

    request.AddHeader("Content-Type", "application/x-www-form-urlencoded");                
    request.RequestFormat = DataFormat.Json;                
    responseString = HttpUtility.HtmlDecode(response.Content);

    request.AddParameter("__EVENTTARGET", "");
    request.AddParameter("__EVENTARGUMENT", "");
    request.AddParameter("ctl00%24MainContent%24cbAgree", "on");
    request.AddParameter("ctl00%24MainContent%24ctl01", "Continue");                

    //parses & adds the session variables from the raw html to keep the sessionstate
    Match m = RegexMatch(responseString, @"<input(\s\w+?[^=]*?=""[^""]*?"")*?\s+?id=""(\S+?\s)*?__VIEWSTATE(\s\S+?)*?"".*?value=""(?<value>.*?)"" />");
    if (m.Success)
        ViewState = m.Groups["value"].Value;

    m = RegexMatch(responseString, @"<input(\s\w+?[^=]*?=""[^""]*?"")*?\s+?id=""(\S+?\s)*?__EVENTVALIDATION(\s\S+?)*?"".*?value=""(?<value>.*?)"" />");
    if (m.Success)
        EventValidation = m.Groups["value"].Value;

    if (!string.IsNullOrWhiteSpace(ViewState) && !string.IsNullOrWhiteSpace(EventValidation))
    {
        request.AddParameter("__VIEWSTATE", UrlEncode(ViewState));
        request.AddParameter("__EVENTVALIDATION", UrlEncode(EventValidation));
    }

    response = client.Execute(request);
}
else
{
    //error in the GET
    responseString = response.StatusDescription + " --------------------" + HttpUtility.HtmlDecode(response.Content);
} 
```

# ruby - Ruby Test::Unit 中的线程问题？

> ID：11263584
> 
> 赞同：1
> 
> 时间：2012-06-29T14:24:32.883
> 
> 标签：ruby, multithreading, unit-testing, testunit

我正在使用 Ruby 的 Test::Unit 对 Web 应用程序进行一些前端测试。如果我在测试中使用多线程，Test::Unit 中是否有任何尴尬的竞争条件？

例如，如果我想在 200 个不同的页面上运行测试，最好将它并行化，这样测试可能会在 1 秒而不是 200 秒内运行。

到目前为止，代码中似乎存在一个计算断言数量的竞争条件（如果我在多线程部分中有一个断言，那么它会说有一个断言而不是 200 个断言），但我没有无法发现任何其他问题（如果有错误，它总是会注意到）。

谢谢！

# python - Python：获取字符串参数

> ID：11263588
> 
> 赞同：0
> 
> 时间：2012-06-29T14:24:54.597
> 
> 标签：python, string, list

我想将一个期望参数字典的字符串转换为期望字典的键列表，例如 find f 这样：

```
f("some text %(foo)s %(bar)s") == ['foo', 'bar',] # True 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:33:55.287

喜欢

```
>>> import re
>>> re.findall("%\(([^\)]+)\)[sif]", "some text %(foo)s %(bar)s", re.M)
['foo', 'bar'] 
```

`[sif]`部分可以使用[http://docs.python.org/library/stdtypes.html#string-formatting-operations上的表中的符号进行扩展](http://docs.python.org/library/stdtypes.html#string-formatting-operations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:30:15.550

这个怎么样：

```
>>> S = "some text %(foo)s %(bar)s"
>>> print re.findall(r'%\((.*?)\)', S)
['foo', 'bar'] 
```

# asp-classic - ASP 脚本不接受 PNG

> ID：11263590
> 
> 赞同：-1
> 
> 时间：2012-06-29T14:25:04.147
> 
> 标签：asp-classic

我认为这段代码

```
For Each file in filecoll
    Ext = UCase(Right(File.Path, 3)) 
    If Ext = "JPG" OR Ext = "GIF" Then
    on error resume next 
```

只允许显示 JPG 文件，是否有添加 PNG 和 GIF 以便脚本也会显示这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:35:47.090

看起来你已经为 .gif 文件设置好了，大概你可以更改行

```
If Ext = "JPG" OR Ext = "GIF" Then 
```

读书

```
If Ext = "JPG" OR Ext = "GIF" OR Ext = "PNG" Then 
```

一切都会好起来的。*

* 也就是说，现在是 2012 年，您正在开发一个 ASP 经典项目，所以可能不是。

# javascript - 按住 shift 键时防止按键

> ID：11263593
> 
> 赞同：2
> 
> 时间：2012-06-29T14:25:10.347
> 
> 标签：javascript, jquery

我试图阻止某些键被输入到输入框中，但前提是在按住该键的同时按下该**特定****键`shift`**：

```
$('selector').keydown(function(e) {
  console.log(e.shiftKey);
  if (e.shiftKey && e.which == 51) {
    e.preventDefault();
    alert('Disallowed');
  }
}); 
```

警报触发，但字符仍出现在文本框中。

我已经尝试四处寻找解释为什么会发生这种情况但无济于事，任何帮助将不胜感激！

**编辑**

删除`alert`似乎可以解决问题（这似乎很奇怪），我真的很想知道为什么它会以这种方式运行，但它似乎没有任何意义。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T14:29:04.103

只需使用**[`e.which`](http://api.jquery.com/event.which/)**而不是`e.keyCode`

```
$('#input').keydown(function(e) {
  if (e.shiftKey && e.which == 51) {
    e.preventDefault();
    alert('Disallowed');
  }
}); 
```

**[工作样本](http://jsfiddle.net/QStkd/536/)**

因为，来自 jQuery 文档：

> 对于键或鼠标事件，此属性指示按下的特定键或按钮。**event.which**属性规范**event.keyCode**和 **event.charCode**。建议观看**event.which**进行键盘按键输入。 **event.which**还标准化按钮按下（**mousedown 和 mouseupevents**），报告*1 为 left button*，*2 为 middle*，*3 为 right*。使用**event.which**而不是**event.button**。

## 试试这个`.keyup()`

```
$('#input').keyup(function(e) {
   var val = $.trim( this.value );
  if (e.shiftKey && e.which == 51) {
    $(this).val(val.replace(/\#/,''));
  }
}); 
```

**[演示](http://jsfiddle.net/QStkd/538/)**

​</p>

### 如果您尝试从输入中删除井号，请尝试：

```
$(this).val( val.replace(/\u00A3/g, '') ); 
```

***完整代码***

```
$('#input').keyup(function(e) {
   var val = $.trim( this.value );
  if (e.shiftKey && e.which == 51) {
    $(this).val( val.replace(/\u00A3/g, '') );
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T15:50:50.800

如果现在的问题是：为什么会`alert()`有所作为？

`alert`是一个有趣的语句（and `confirm`and `prompt`），它暂停了 JavaScript 的执行，但释放了等待 JavaScript 执行的任何其他浏览器处理。它会严重干扰调试。

在您的 JavaScript 完成之前，浏览器不会响应您的`preventDefault()`声明，放入`alert`那里已暂停您的 JavaScript，因此浏览器此时尚未收到事件的返回状态，不幸的是`alert`，浏览器已允许浏览器处理其他事件，即`keypress`偷偷过去，因此您会看到不想输入的字符出现。

你不能使用`alert`，或者，如果你需要它（？！），你可以发出它包裹在 a`setTimeout`中，这样它就不会阻塞你的 JavaScript 并且结果`keydown`将导致`keypress`被抑制。

--

或者，您可以一开始就使用`keypress`！

```
$('selector').keypress(function(e) {
  console.log(e.shiftKey);
  if (e.which == 163) {
    e.preventDefault();
    alert('Disallowed');
  }
}); 
```

不过，这仍然不能阻止通过其他方法输入字符，所以我个人不会一开始就接受这个。：-/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:42:38.383

```
$('#selector').keydown(function(e) {
  console.log(e.shiftKey);
  if (e.shiftKey && e.keyCode == 51) {
    $(this).prop('disabled', true);
    //do something, fade an object in...display a message, etc
    setTimeout(function(){
      $(this).prop('disabled', false);
    }, 500);
  }
}); 
```

这对我有用。

**编辑**

添加了 setTimeout 函数来复制您的愿望。

# java - 在字符串中找到最大的子回文

> ID：11263599
> 
> 赞同：0
> 
> 时间：2012-06-29T14:25:31.347
> 
> 标签：java

我试图在 Java 中找到一个子回文。但是下面的代码没有提供正确的输出。

```
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    in.useDelimiter("\n");
    String text = in.next();
    int start = 0;
    int end = 0;

    int i = 0;
    int j = 0;
    while(i <= text.length())
    {
        j = i+1;
        while(j < text.length())
        {
            if(text.substring(i, j).equals(reverse(text.substring(i, j))))
            {
                if(j-i > end-start)
                {
                    start = i; end = j;
                }   
            }
            j++;
        }
        i++;
    }
    System.out.println(start + " : " + end);
}
static String reverse(String s)
{
    return new StringBuffer(s).reverse().toString();
} 
```

样本输出：

```
apros tda adda
7 : 12
after the ostso
11 : 14
att feref
5 : 8 
```

以上都是错误的。

PS：我知道这不是一个有效的算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:45:05.917

有两个问题：

1：我在上面的评论中提到的那个：

```
if(j-i > end-start) {
    start = i;
    end = j;
} 
```

2：让j一直到正文结束：

```
while(j <= text.length()) 
```

这是另一种可能性，既然您已经修复了代码，如果您需要，我可以为您提供一个更优化的替代解决方案。找到最大的回文基本上是在一个字符串和它的反向之间找到最大的常用词。所以从反转字符串开始（即text2）。遍历文本 (i)，然后有一个表示长度减小的子迭代（从 text.length()-i 下降到 0。如果您在 text2 中找到当前单词，那么您就找到了回文。您只需需要评估它是否是最大的。

一个明显的额外优化是，如果您已经找到回文，则长度的子迭代不需要降至零。

```
 String text = "absoopoo";       
    String text2 = new StringBuffer(text).reverse().toString();

    int start = 0;
    int end = -1;

    for(int i=0; i<text.length(); i++) {
        for(int length=text.length()-i; length > (end-start); length--) {
            String sub = text.substring(i, i+length);
            if(text2.indexOf(sub) >= 0) {
                start = i;
                end = start+length;
            }
        }
    }

    System.out.println(start + " : " + end+ " => "+text.substring(start, end)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:40:14.693

终于让它工作了。

```
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    in.useDelimiter("\n");
    String text = in.next();

    int start = 0;
    int end = 0;

    int i = 0;
    int j = 0;
    while(i < text.length())
    {
        j = i;
        while(j <= text.length())
        {
            if(text.substring(i, j).equals(reverse(text.substring(i, j))))
            {
                if(j-i > 1 && j-i > end-start)
                {
                    start = i; 
                    end = j;
                }   
            }
            j++;
        }
        i++;
    }
    System.out.println(start + " : " + (end-1));
}
static String reverse(String s)
{
    return new StringBuffer(s).reverse().toString();
} 
```

这是一个更优化的版本。这是基于[此](http://explored.tk/experiments/palindrome/#%5B%5B%22hello%20world%22,%5B%22p%22,0%5D,%5B%22p%22,0.5%5D,%5B%22c%22,0,1,0%5D,%5B%22p%22,1%5D,%5B%22c%22,0,2,0%5D,%5B%22p%22,1.5%5D,%5B%22c%22,1,2,0%5D,%5B%22p%22,2%5D,%5B%22c%22,1,3,0%5D,%5B%22p%22,2.5%5D,%5B%22c%22,2,3,1%5D,%5B%22c%22,1,4,0%5D,%5B%22p%22,3%5D,%5B%22c%22,2,4,0%5D,%5B%22p%22,3.5%5D,%5B%22c%22,3,4,0%5D,%5B%22p%22,4%5D,%5B%22c%22,3,5,0%5D,%5B%22p%22,4.5%5D,%5B%22c%22,4,5,0%5D,%5B%22p%22,5%5D,%5B%22c%22,4,6,0%5D,%5B%22p%22,5.5%5D,%5B%22c%22,5,6,0%5D,%5B%22p%22,6%5D,%5B%22c%22,5,7,0%5D,%5B%22p%22,6.5%5D,%5B%22c%22,6,7,0%5D,%5B%22p%22,7%5D,%5B%22c%22,6,8,0%5D,%5B%22p%22,7.5%5D,%5B%22c%22,7,8,0%5D,%5B%22p%22,8%5D,%5B%22c%22,7,9,0%5D,%5B%22p%22,8.5%5D,%5B%22c%22,8,9,0%5D,%5B%22p%22,9%5D,%5B%22c%22,8,10,0%5D,%5B%22p%22,9.5%5D,%5B%22c%22,9,10,0%5D%5D,%5B%22hello%20world%22,%5B%22p%22,0%5D,%5B%22c%22,0,0,1%5D,%5B%22p%22,0.5%5D,%5B%22c%22,0,1,0%5D,%5B%22p%22,1%5D,%5B%22c%22,1,1,1%5D,%5B%22c%22,0,2,0%5D,%5B%22p%22,1.5%5D,%5B%22c%22,1,2,0%5D,%5B%22p%22,2%5D,%5B%22c%22,2,2,1%5D,%5B%22c%22,1,3,0%5D,%5B%22p%22,2.5%5D,%5B%22c%22,2,3,1%5D,%5B%22c%22,1,4,0%5D,%5B%22p%22,3%5D,%5B%22c%22,3,3,1%5D,%5B%22c%22,2,4,0%5D,%5B%22p%22,3.5%5D,%5B%22c%22,3,4,0%5D,%5B%22p%22,4%5D,%5B%22c%22,4,4,1%5D,%5B%22c%22,3,5,0%5D,%5B%22p%22,4.5%5D,%5B%22c%22,4,5,0%5D,%5B%22p%22,5%5D,%5B%22c%22,5,5,1%5D,%5B%22c%22,4,6,0%5D,%5B%22p%22,5.5%5D,%5B%22c%22,5,6,0%5D,%5B%22p%22,6%5D,%5B%22c%22,6,6,1%5D,%5B%22c%22,5,7,0%5D,%5B%22p%22,6.5%5D,%5B%22c%22,6,7,0%5D,%5B%22p%22,7%5D,%5B%22c%22,7,7,1%5D,%5B%22c%22,6,8,0%5D,%5B%22p%22,7.5%5D,%5B%22c%22,7,8,0%5D,%5B%22p%22,8%5D,%5B%22c%22,8,8,1%5D,%5B%22c%22,7,9,0%5D,%5B%22p%22,8.5%5D,%5B%22c%22,8,9,0%5D,%5B%22p%22,9%5D,%5B%22c%22,9,9,1%5D,%5B%22c%22,8,10,0%5D,%5B%22p%22,9.5%5D,%5B%22c%22,9,10,0%5D%5D%5D)

```
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    in.useDelimiter("\n");
    char[] text = in.next().toCharArray();

    int start = 0;
    int end = 0;
    ArrayList<Integer[]> list = new ArrayList<Integer[]>();
    for( ;start<text.length; start++)
    {
        for(end=start; end<=start+1; end++)
        {
            list.add(grow(text, start, end));
        }
    }
    for(Integer[] v: list)
        System.out.println(v[0] +" : "+v[1]);
    findmax(list);
}
static Integer[] grow(char[] text, int start, int end)
{
    while(start>0 && end < text.length && text[start-1]==text[end])
    {
        start--;
        end++;
    }
    return new Integer[]{start, end};
}
static void findmax(ArrayList<Integer[]> list)
{
    int i=0; int j=0;
    for(Integer[] v: list)
    {
        if(v[1]-v[0]>j-i)
        {
            i = v[0];
            j = v[1];
        }
    }
    System.out.println(i+" "+j);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:08:07.473

让我们知道您是否需要它（以及它是否具有良好的性能）：

```
/** Transmitted max size between to parses */
static int maxSize = 0;

/**
 * Said if the String is a palindrome.
 * 
 * @param s
 *            sentence to parse.
 */
static void singlePalindrome(final String s) {

    System.out.println("singlePalindrome: " + s);
    final char[] word = s.toCharArray();
    final int t = word.length;
    boolean ok = true;
    for (int i = t / 2; i > 0; i--) {

        if (word[i - 1] != word[word.length - i]) {

            ok = false;
            break;
        }

        System.out.println((i - 1) + ":" + word[i - 1] + "\t" + (t - i)
            + ":" + word[t - i]);
    }

    System.out.println("It is " + (true == ok ? "" : "NOT ")
        + "a palindrome.");
}

/**
 * Find all palindromes included anywhere in a sentence, with two search
 * phases from left to right and right to left. Then keep the biggest one *
 * 
 * @param sentence
 *            to parse
 * @param len
 *            minimal size of palindrome(s) to find.
 */
static void palindromeNested(final String sentence, final int len) {
    System.out.println(len + " = minimal size for palindromeNested(..): "
        + sentence);
    int debS = 2;
    String max = null;

    while (debS <= sentence.length()) {

        int i = debS / 2;
        int cpt = 0;
        for (; i <= debS; i++) {
            ++cpt;
            if (sentence.charAt(i) == sentence.charAt(debS - i)) {
                if (cpt >= len) {
                    final String sTmp = (i > debS - i) //
                        ? sentence.substring(debS - i, i + 1) //
                        : sentence.substring(i, debS - i + 1);

                    final int maxTmp = sTmp.length();
                    if (maxTmp > maxSize) {
                        maxSize = maxTmp;
                        max = sTmp;
                        System.out.println(maxTmp + "\t" + max);
                    }

                    // System.out.format("%4d:%-4d %d :: %d %s,\n", i, debS
                    // - i, cpt, maxTmp, sTmp);
                }

                continue;
            }

            break;
        }

        debS++;         
    }

    System.out.println("Result: " + max);

}

/** @param args */
public static void main(final String[] args) {

    singlePalindrome("abccdccba");// "abccddccba" works
    System.out.println("============================");

    // "baabcc dd ccbaabiib" works like "baabcc d ccbaabiib" (odd problem)
    final String words = "baabcc d ccbaabi o iba ab";
    palindromeNested(new StringBuilder(words).reverse().toString(), 3); // 3carsMini
    System.out.println("----------------------------");

    palindromeNested(words, maxSize / 2); // the max found in first
    System.out.println("============================");

} 
```

}

输出 ：

单回文：abccdccba
3:c 5:c
2:c 6:c
1:b 7:b
0:a 8:a
是回文。
============================
3 =回文嵌套的最小尺寸（..）：ba abi o ibaabcc d ccbaab
5 ba ab
7 bi o ib
9 abi o iba
结果：abi o iba
----------------------------
4 = palindromeNested(..) 的最小尺寸： baabcc d ccbaabi o iba ab
11 abcc d ccba
13 aabcc d ccbaa
15 baabcc d ccbaab
结果：baabcc d ccbaab
========================== =

# ios - ios：落下的照片动画

> ID：11263607
> 
> 赞同：2
> 
> 时间：2012-06-29T14:25:50.287
> 
> 标签：ios, animation, 3d

我正在其中一个屏幕上开发一个普通的 iPad 应用程序，其中应该有以下内容。

这是背景图片[http://postimage.org/image/pmykiudut/](http://postimage.org/image/pmykiudut/)

这是一个没有盖子的盒子，有一个狭缝。照片（我有）应该真实地从地板上的那个缝隙掉下来。

我已经实现了一些简单的动画，`[UIView animateWithDuartion...]`但这不是最好的解决方案，因为使用这种方法，照片总是表现得像坚固的矩形。

我曾尝试使用 Core Animation 框架和`layer.transform`属性添加透视和旋转，但结果比前一种情况更糟......

照片被认为是纸质的。它们应该轻巧灵活。

有一些视频显示了它的外观：

*   切割阶段
    [http://www.youtube.com/watch?v=6O5us2-uvXU](http://www.youtube.com/watch?v=6O5us2-uvXU)
    [http://www.youtube.com/watch?v=ZeDGrB8s0Uo#t=217s](http://www.youtube.com/watch?v=ZeDGrB8s0Uo#t=217s)
*   下降阶段
    [http://www.youtube.com/watch?v=HIK9F5v0iZc](http://www.youtube.com/watch?v=HIK9F5v0iZc)

请指导我，使照片灵活并以如此复杂的方式移动它们的最佳方法是什么？我应该选择哪个框架？还是在某处实施了类似的东西？在哪里寻找和在哪里挖掘？)

我已经开始学习cocos2d了，但是不知道那里有没有这样的能力……

# stack - RISC 与 CISC 堆栈

> ID：11263610
> 
> 赞同：4
> 
> 时间：2012-06-29T14:26:08.623
> 
> 标签：stack, processor

这是《汇编语言简介》一书中关于RISC（与CISC）的引述

> 在 MIPS 中，我们可以在不使用堆栈的情况下编写程序。对于大多数普通程序，我们不必使用堆栈。大量寄存器的可用性允许我们使用基于寄存器的参数传递。但是，当我们编写递归过程时，我们必须使用堆栈。

我对在没有堆栈的情况下工作的魔力感到非常困惑。任何标准程序都有一个链式调用：Main()-> Function1() -> Function2() -> ... ->

即使有很多寄存器（128），这种方式也很常见：

1.  决定你应该使用哪些寄存器并保存它们的上下文（通常推入堆栈）
2.  提供操作
3.  返回寄存器状态（通常从堆栈中弹出）

没有人阻止我们在 CISC 中使用基于寄存器的参数传递，尤其是在现代处理器上。那么，如何在没有堆栈的情况下执行 RISC 程序呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T17:34:58.853

我认为他们指的是参数传递。在大多数 RISC 机器中，参数是在寄存器中传递的，通常为此目的保留大约 6-8 个寄存器（其中一个用于返回值）。这不是强制性的，它只是约定（称为 ABI 或应用程序二进制接口）。因此，如果函数的参数比寄存器少，并且这些参数足够简单以适合寄存器，则不需要额外的堆栈空间来传递这些参数。在 CISC 机器上，没有那么多用于参数的寄存器，因此 ABI 指定这些参数在堆栈上传递。

此外，在 RISC 机器中，有许多可用的临时寄存器（特别是被调用者保存的）用于存储局部变量。在 CISC 机器上，局部变量通常分配在堆栈上，而寄存器通常保留用于中间值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-02T16:43:29.310

精简指令集计算机（RISC /发音为“风险”/）是一种仅使用简单指令的计算机，这些指令可以分为多个指令，这些指令在单个时钟周期内执行低级操作，顾名思义。让我们以两个数相乘 A = A * B 为例；<<<======这是 C 语句。对于这个特定的任务，CISC 处理器会准备好一条特定的指令（我们称之为“MULT”）。执行时，该指令将两个值加载到单独的寄存器中，将执行单元中的操作数相乘最后，将乘积存储在适当的寄存器中。因此，两个数相乘的整个任务可以用一条指令完成： MULT A,B <<<======这是汇编语句

```
 MULT is what is known as a “complex instruction.” It operates directly  on the computer’s memory banks and does not require the programmer to  explicitly call any loading or storing functions. 
```

RISC 处理器只使用可以在一个时钟周期内执行的简单指令。为了执行 CISC 方法中描述的确切系列步骤，程序员需要编写四行汇编代码： LOAD R1, A <<<======这是汇编语句 LOAD R2,B <<< ======这是汇编语句 PROD A, B <<<======这是汇编语句 STORE R3, A <<<======这是汇编语句 优点：- 每条指令都需要只执行一个时钟周期，整个程序将在与多周期“MULT”命令大致相同的时间内执行。这些 RISC“精简指令”比复杂指令需要更少的晶体管硬件空间，为通用寄存器留出更多空间。因为所有指令都在统一的时间内执行（即一个时钟）。
**要了解更多关于 RISC 和 CISC 的信息，请点击以下链接：- **

[http://www.firmcodes.com/difference-risc-sics-architecture/](http://www.firmcodes.com/difference-risc-sics-architecture/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-30T07:21:48.787

RISC

1.  指令数量较少
2.  指令长度固定
3.  它使用加载/存储指令。
4.  示例：ARM7、ARM9。
5.  执行程序所需的周期数更多，例如，如果我们想要产品 2 no，那么我们使用以下代码 Load a, 12 load b, 14, prod a, b store (memory location), b

思科：

1.  指令数量更多
2.  指令长度可变
3.  它不使用加载/存储指令来访问内存
4.  示例：奔腾
5.  执行程序所需的周期数较少，例如对于两个无用的乘积，仅 MULT（内存位置 1）、内存位置 2 和结果存储在内存位置 1

# c - 我需要实现一种方法让这个线程休眠，直到它有工作要做

> ID：11263613
> 
> 赞同：10
> 
> 时间：2012-06-29T14:26:22.003
> 
> 标签：c, linux, multithreading, pthreads, embedded-linux

好吧，所以这个问题不完全是关于线程管理的......嗯，有点。我正在寻找这种配置的不同解决方案。我有一些想法，但正在寻找任何可以解决问题的解决方案。并且会权衡利弊来实施最好的。

这是情况。

我有一个将产生线程的管理器应用程序。该线程将持续运行并处理与通过 USB 连接到系统的板的串行通信。管理器应用程序促进了系统上运行的其他应用程序与该线程之间的通信。线程需要真正执行两件事：

1.  通过可变计时器上的串行轮询板以获取样本数据..通常大约每分钟一次（串行总线相当慢，波特率为 4800。我无法控制这个）
2.  促进与管理器应用程序的通信。（即其他应用程序将请求样本数据，管理器将请求转发给线程。线程执行操作并返回数据）

我最初的设计很简单，而且很有效。我使用队列和互斥锁进行管理器线程通信。所以线程的逻辑如下：

1.  初始化
2.  虽然我们还没有收到经理的关机命令
3.  如果我们的计时器到了，请轮询董事会以获取数据
4.  否则，检查我们是否有经理向队列发布的消息。如果是，处理它

问题是我没有考虑 CPU 利用率。99.9% 的时间我的线程什么都不处理，只是在消耗能量。我需要实现一种方法来让这个线程休眠，直到它有工作要做。所以有几个想法：

> 使用 select() 来阻止。这可以根据我需要使用的计时器进行阻塞，并且我可以将队列消息传递实现更改为套接字消息传递。因此，线程将向管理器打开一个客户端套接字，而管理器将通过套接字将消息传递给线程。然后 select() 会一直休眠，直到 fd 上有活动或我的计时器到时为止。

Pro：正是我需要的功能。

缺点：对于与您已经共享内存的线程的通信，套接字不是有点繁重的处理吗？

> 使用信号系统。（更了解 Linux 的人可以在这里提供一个实现示例……我不确定具体该怎么做。）但是线程可以在计时器的持续时间内休眠，如果有信号则唤醒以进行处理从经理那里收到。

优点：使用共享内存维护当前实现

缺点：不确定如何实施。是否有像 select() 这样的函数可以处理信号而不是 fds？

> 可能是互斥体。我可以阻止，直到经理发布互斥锁。

优点：仍然共享内存

缺点：可能需要将计时器处理移至管理器，这确实不是一个选项，因为它还有其他计时器和关键工作要执行。

请推荐并随时批评。我对任何有效的选择持开放态度。请注意，虽然这是在嵌入式系统上运行的，但资源使用至关重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:44:31.800

处理这种情况的经典工具是信号量，而不是互斥锁或条件变量。将它们视为从管理器传递到线程的令牌。

该线程可以`sem_timedwait`用来确保不时唤醒以检查数据。

小心捕捉`sem_`函数的错误返回，它们是可中断的。所以你可能比你想象的要多一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T14:43:23.063

切换到 POSIX 消息队列而不是您自己的。 `mq_timedreceive`如果经理发布请求，将返回。如果超时，您必须进行计时器轮询。同步和阻塞已经打包好了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-02T08:04:15.273

尝试这样的事情，使用信号量：

```
#include <stdio.h>
#include <unistd.h>
#include <pthread.h>
#include <semaphore.h>

static sem_t s_sem;
static int iAlive = 1;

void* thFunc(void *param)
{
    printf("%s : ENTER \n", __FUNCTION__);
    while(iAlive)
    {
        printf("%s : waiting \n", __FUNCTION__);
        sem_wait(&s_sem);

        printf("%s : got a signal - doing something \n", __FUNCTION__);
        sleep(1);
    }

    printf("%s : EXIT \n", __FUNCTION__);
    return 0;
}

int main()
{
    pthread_t thread;
    sem_init(&s_sem, 0, 0);

    if(0 != pthread_create(&thread, NULL, thFunc, NULL))
    {
        printf("%s : pthread_create FAILED \n", __FUNCTION__);
        return -1;
    }

    while ( getchar() != 'q' )
    {
        printf("%s : sending signal \n", __FUNCTION__);
        sem_post(&s_sem);
    }

    iAlive = 0;
    sem_post(&s_sem);
    pthread_join(thread, NULL);
    sem_destroy(&s_sem);

    return 0;
} 
```

如果需要超时，可以替换`sem_wait`为。`sem_timedwait`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-29T14:41:13.037

让每个线程在输入生产者-消费者队列上等待超时。如果队列等待超时，则轮询串行链路，否则处理队列中接收到的命令。要从头开始形成一个合适的队列，您需要一个实际的队列（您已经拥有），一个用于保护队列指针/索引的互斥锁（您已经拥有），以及一个初始化为 0 的信号量，带有等待（超时）功能。要向线程发送请求，锁定互斥体，推送请求，解锁互斥体，发送信号量。在线程中，等待信号量，如果等待返回没有超时，锁定互斥锁，弹出请求，（因为总是有一个），解锁互斥锁并处理接收到的请求。如果 sema 等待返回超时，则轮询串行链路。完成后，循环以再次等待信号量。

要更改超时，请使用命令“EchangeWaitInterval”（例如：）向线程发送一条消息，以及用于后续等待的新超时间隔。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T07:22:24.647

经典的 pthreads 方法是让您的线程阻塞，`pthread_cond_wait()`直到管理器线程将消息放入队列并向条件变量发出信号。在这种情况下，要及时唤醒以轮询串行设备，请`pthread_cond_timedwait()`改用。

# asp.net - LoadControl 和公开构造函数之间的区别？

> ID：11263622
> 
> 赞同：1
> 
> 时间：2012-06-29T14:26:41.423
> 
> 标签：asp.net, user-controls

要在代码隐藏中添加用户控件，有两种方法。

1.  向父页面公开用户控件构造函数。
2.  使用 Page.LoadControl 方法。

所以基本上有两种不同的方式来完成同样的任务。一种方法在某些情况下有效而另一种方法无效吗？它们的工作方式有什么区别？什么时候更喜欢一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:26:36.300

[我在这里](http://bytes.com/topic/asp-net/answers/294324-loadcontrol-v-calling-constructor)找到了答案

> 您需要了解 Web 自定义控件和 Web 用户控件之间的区别。
> 
> Web 自定义控件，如 WebControls (DataGrid, Button, ...) 是类。要创建它们，您只需调用它们的构造函数： Dim b as Button = new Button()
> 
> Web 用户控件由一个 ASCX 页面（包含 HTML）和一个类定义。该类只是控件的代码隐藏，因此如果您调用其构造函数，则不会创建控件。这就是需要 LoadControl 方法的地方：您将 ASCX 页面的名称传递给它，它会同时加载此页面和 CodeBehind 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:48:18.683

`LoadControl`主要用于在类型不可用时将用户控件动态添加到页面。大多数用户控件在可更新的网站应用程序中不可用。另请注意，由于类型不可用，动态创建的用户控件的属性很难设置。

`MyControl c = new MyUserControl()`是首选，但不会阻止您执行以下操作：

```
MyControl c = (MyControl)Page.LoadControl('path to ascx'); 
```

但是，我认为没有必要。

# lucene - “abc” w/3 “def” w/5 “ghi”（使用 Lucene 进行精确邻近搜索）

> ID：11263628
> 
> 赞同：1
> 
> 时间：2012-06-29T14:27:16.663
> 
> 标签：lucene, lucene.net

我需要能够使用 Lucene 对带有 3 个“def”和 5 个“ghi”的“abc”进行全文搜索。我意识到我可以使用这样的邻近搜索来近似：“abc def ghi”~8。但是，我需要前两项的精确精度在 3 以内，后两项在 5 以内。我能想到的唯一方法是搜索：“abc def ghi”~8 &&“abc def”~3 &&“def ghi”~5。有没有人对如何解决这个问题有任何其他想法，也许更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:29:55.810

"abc def ghi"~8 && "abc def"~3 && "def ghi"~5 不同于 "abc" w/3 "def" w/5 "ghi" 这就是为什么

我假设您想查找包含以下条款的文档：

abc,1,2,3,def,1,2,3,4,5,ghi

这两个查询都会找到上面的文档。但是第一个查询也会找到这个

abc 1,2,3,4,5,6,7,8,def,1,2,3,4,5,6,8 ghi , a,b,c,d,e,f,g,h, i,abc,1,2,3,def,1,2,3,4,5,6,7,8,9,10,def,1,2,3,4,5,ghi

我认为您不希望在搜索结果中出现第二个文档。

我对 .NET 版本的 Lucene 了解不多。似乎它支持跨度查询。您可以使用跨度查询进行邻近搜索。

```
 SpanNearQuery spanNear = new SpanNearQuery(new SpanQuery[] {
      new SpanTermQuery(new Term(FIELD, "abc")),
      new SpanTermQuery(new Term(FIELD, "def"))},
      3,
      true);

    Query queryToBeExecuted = new SpanNearQuery(new SpanQuery[] {
      spanNear,
      new SpanTermQuery(new Term(FIELD, "ghi"))},
      5,
      true); 
```

您可以使用 queryToBeExecuted 查询进行搜索。

有关更多信息，请查看 Mark Miller 关于[跨度查询](http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/)的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T02:11:37.417

我遇到了完全相同的问题。Lucene 的查询语言不是很健壮。除了无法将邻近搜索串在一起之外，在邻近查询中执行布尔运算和短语查询也很困难。

我通过编写自己的查询解析器并手动实例化查询原语解决了这个问题。编写自己的查询解析器并不容易，但它为您提供了很大的灵活性。在我的新查询语言中，我使用 w/N 来指定邻近查询。有了它，以下复杂的查询成为可能：

```
foo w/3 bar w/5 biz
foo w/3 bar w/5 (biz or buz) 
```

甚至更复杂的查询

```
("first part" within/3 foo) w/10 ("second part" within/3 (bar or biz)) 
```

我在 python 中使用`pyparsing`. 这是一个项目，但它是一个有趣的项目，你最终会得到比 lucene 查询解析器更强大的东西。

# c++ - 我可以防止复制构造函数有一些例外吗？

> ID：11263630
> 
> 赞同：1
> 
> 时间：2012-06-29T14:27:29.633
> 
> 标签：c++, stl, initialization, copy-constructor, shallow-copy

我会用`std::map<int, A>`

`A`是一个类，我必须防止浅拷贝，但是有很多类`A`，所以制作一个深拷贝结构和运算符很烦人。由于我似乎不必使用复制构造函数和复制赋值运算符，所以我决定不使用它们。

为了防止一些错误，我创建了 UnCopyable 类，它具有私有的复制构造函数和复制赋值运算符，并`A`继承了它。

但是，有一个问题。`std::map`使用复制构造函数。

我不想将`A`' 指针保存在地图中。

更好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:48:59.020

您可能会考虑尝试 C++11，它对此类问题有几个解决方案：`std::map::emplace`它消除了对 的 Copyable 要求`A`，并且`std::move`允许您将一个对象传输到另一个对象而无需复制。

此外，还有一种新的、更明确的方法可以将类定义为不可复制：

```
A( A const & ) = delete; 
```

现在是升级 C++ 编译器的好时机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:40:26.247

您可以使用智能指针`std::shared_ptr`或编写代理类。

例如：

```
class Foo {
public:
    std::string name() const;
};

typedef std::shared_ptr<Foo> SharedFoo; 
```

或者

```
class SharedFoo {
public:
    std::string name() const { return instance->name(); }
private:
    std::shared_ptr<Foo> instance;
}; 
```

# java - Apache ftpserver 上传通知

> ID：11263631
> 
> 赞同：1
> 
> 时间：2012-06-29T14:27:33.713
> 
> 标签：java, apache, ftp

我正在使用 Apache ftpserver (Java)。当通过 ftp 上传文件时，我需要在我的程序中有一个通知。这似乎是可能的，但我找不到如何做到这一点。

有什么解决方案吗？

mina.apache.org/ftpserver

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T07:34:49.967

您可以使用 ftplet 获取所有通知。检查一下... [http://apilevel.wordpress.com/2011/05/12/ftplet-servlet-for-apache-ftpserver/](http://apilevel.wordpress.com/2011/05/12/ftplet-servlet-for-apache-ftpserver/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:27:50.050

我假设，您有一个桌面程序，它在 ftpserver 本身上运行。因此，只要将任何文件上传到同一个 ftpserver，您的程序就必须通知它...对。！！

让我们来看看....

1.  我确定您已经在 ftp 服务器中创建了一个目录，文件将被上传到该目录中。

2.  使您的这个程序在同一台服务器上运行，**以每隔 2 分钟或根据您的要求继续查看该文件夹/目录中的文件总数。一旦程序注意到文件数量增加了，那么我将在程序中引发某种事件来通知你。**

怎么做...

1.  创建一个**单独的线程**以保持循环目录以查找文件数量的任何更改。**不要**让 Event Dispatcher 线程来做这件事。**否则你的 GUI 将被挂起。**

2.  试试下面的逻辑..

    ```
    private static int max = 0;    // i am assuming the folder is Empty.

     while(true) {

     File f = new File("path_of_files_on_ftp_server");
     File[] farr = f.listFiles();

     if ( farr.length > max ){

               // There has been an upload......
               // Raise the alarm here, by doing some event....
               max = farr.length ;

         }

     else {

           continue;
         } 
    ```

    }

# c++ - Mysql.h c++ 参数太多

> ID：11263634
> 
> 赞同：2
> 
> 时间：2012-06-29T14:27:40.640
> 
> 标签：c++, mysql, linux

现在，当我编译时，我收到：

```
/usr/include/mysql/mysql.h:452: error: too many arguments to function int mysql_query(MYSQL*, const char*) 
```

的论点是否有限制，`mysql.h`如果有，我该如何解决？

```
#include    <mysql/mysql.h>

string unknown = "Unknown";

MYSQL *conn;

conn = mysql_init(NULL);
mysql_real_connect(conn, "localhost", "root", "password", "alert", 0, NULL, 0);

mysql_query(conn, "INSERT INTO alert_tbl (alert_srcip, alert_country, alert_destip, alert_desthost, alert_destport, alert_bl) VALUES ('%s','%s','%s','%s','%s','%s')", src_ip,country_code,dest_ip,unknown,dest_prt,blip);

mysql_close(conn); 
```

* * *

```
g++ test.c -o test -lstdc++ -I/usr/include/mysql -L/usr/lib/mysql -lmysqlclient 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:32:54.357

您必须使用[mysql_stmt_prepare然后使用](http://dev.mysql.com/doc/refman/5.0/en/mysql-stmt-prepare.html)[mysql_stmt_bind_param](http://dev.mysql.com/doc/refman/5.0/en/mysql-stmt-bind-param.html)将参数值一一绑定

当语句准备好时，使用[mysql_stmt_execute执行它](http://dev.mysql.com/doc/refman/5.0/en/mysql-stmt-execute.html)

或者使用 sprintf()：

```
char query[1024 /* or longer */];

sprintf(query,
     "INSERT INTO alert_tbl"
     "(alert_srcip, alert_country, alert_destip, alert_desthost, alert_destport, "
     "alert_bl) VALUES ('%s','%s','%s','%s','%s','%s')",
     src_ip,country_code,dest_ip,unknown,dest_prt,blip);

mysql_query(conn, query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:35:49.437

或者干脆使用：

```
char query[1000];
snprintf(query, 1000, "INSERT INTO alert_tbl (alert_srcip, alert_country, alert_destip, alert_desthost, alert_destport, alert_bl) VALUES ('%s','%s','%s','%s','%s','%s')", src_ip, country_code, dest_ip, unknown, dest_prt, blip);
mysql_query(conn, query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:37:28.433

你使用它的方式，你真的将许多参数传递给`mysql_query(..)`.

使用 std::stringstream 构建您的查询。（**警告**：您需要确保它们被正确转义）。

```
std::stringstream ss;
ss<<"INSERT INTO alert_tbl (alert_srcip, alert_country, alert_destip, alert_desthost, alert_destport, alert_bl) VALUES ('"<<src_ip<<"','"<<country_code //and so on..

mysql_query(conn, ss.str().c_str()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T21:41:18.043

在这里找到了答案：

[http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-prepared-statements.html](http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-prepared-statements.html)

# c++ - 从 C++ 中的错误模板实例化继承

> ID：11263635
> 
> 赞同：0
> 
> 时间：2012-06-29T14:27:43.397
> 
> 标签：c++, templates, inheritance, overriding, instantiation

考虑以下代码：

```
struct Foo
{
    Foo operator+(const Foo &rhs) const;
    // notice lack of: Foo operator*(const Foo &rhs) const;
};

template <class T>
struct Bar
{
    T x, y;
    T add() const { return x + y; }
    T mul() const { return x * y; }
}; 
```

我有两个问题：

1.  我可以继承`Bar<Foo>`并覆盖`mul()`有意义的东西吗？

2.  如果我从不在任何地方使用，我可以继承`Bar<Foo>`而不覆盖吗？`mul()``mul()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:50:51.087

1.  当然
2.  当然

模板实际上是一种智能预处理器，它们没有被编译。如果您不使用某些东西，则可以编写完整（语法正确）的垃圾，即您可以继承自

```
template <class T>
struct Bar
{
    T x, y;
    T add() const { return x + y; }
    T mul() const { return x.who cares what-s in here; }
}; 
```

PS由于您的 + 运算符用于 const 函数，因此也应将其声明为 const 。

*编辑*：好的，不是所有的编译器都支持这个，这里有一个用 gcc 编译的：

```
template <class T>
struct Bar
{
    T x, y;
    T add() const { return x + y; }
    T mul() const { T::was_brillig & T::he::slith(y.toves).WTF?!0:-0; }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T14:31:07.560

1.  `Bar<Foo>::mul()`不是虚函数，所以不能被覆盖。

2.  是的，如果您不使用模板成员函数，那么它不会被实例化，并且不会因实例化它而导致任何错误。

您可以通过在子类中提供相同签名的函数来*隐藏* `Bar<Foo>::mul()`，并且由于*2*，`Bar<Foo>::mul()`不会被实例化。但是，这可能不是一个好习惯。`mul()`读者可能会对隐藏与覆盖感到困惑，与简单地使用不同的函数名而不使用，或为 Foo 提供 Bar 的显式特化相比，这样做并没有太大的好处。

# jquery - 如果鼠标悬停超过 2 秒，则显示否则不显示？

> ID：11263636
> 
> 赞同：31
> 
> 时间：2012-06-29T14:27:43.837
> 
> 标签：jquery, html, css, timer, slidedown

这是我在悬停时应用于 div 的 jQuery 幻灯片功能，以便向下滑动按钮。

它工作得很好，只是现在每次有人进出它时，它都会不断上下波动。

我想如果我在它上面放一个一两秒的延迟计时器会更有意义。

仅当用户在 div 上超过一两秒时，我将如何修改函数以运行向下滑动？

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js "></script>
<script type="text/javascript">

$("#NewsStrip").hover(
function () {
    $("#SeeAllEvents").slideDown('slow');    },
function () {
    $("#SeeAllEvents").slideUp('slow');
});

</script> 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-29T14:34:41.430

您需要在鼠标悬停时设置一个计时器，并在激活幻灯片或鼠标悬停时清除它，以先发生者为准：

```
var timeoutId;
$("#NewsStrip").hover(function() {
    if (!timeoutId) {
        timeoutId = window.setTimeout(function() {
            timeoutId = null; // EDIT: added this line
            $("#SeeAllEvents").slideDown('slow');
       }, 2000);
    }
},
function () {
    if (timeoutId) {
        window.clearTimeout(timeoutId);
        timeoutId = null;
    }
    else {
       $("#SeeAllEvents").slideUp('slow');
    }
}); 
```

[**在行动中看到它。**](http://jsfiddle.net/6RKHf/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T14:32:55.517

```
var time_id;

$("#NewsStrip").hover(
function () {
    if (time_id) {
        clearTimeout(time_id);
    } 
    time_id = setTimeout(function () {
        $("#SeeAllEvents").stop(true, true).slideDown('slow');
    }, 2000);
}, function () {
    if (time_id) {
        clearTimeout(time_id);
    } 
    time_id = setTimeout(function () {
        $("#SeeAllEvents").stop(true, true).slideUp('slow');
    }, 2000);
}); 
```

# ios - GLKit GLKVertexAttribColor：动态改变颜色

> ID：11263639
> 
> 赞同：1
> 
> 时间：2012-06-29T14:27:58.103
> 
> 标签：ios, opengl-es, glkit, eaglview, texturing

所以随着物体离我越来越远，我想应用淡入淡出。对象是有纹理的。

我相信对象的颜色是通过这条线控制的

```
glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, Color)); 
```

而不是从顶点数组中获取颜色，是否可以在其中插入颜色？

我试过设置 glColor4 等并设置

```
effect.useConstantColor = YES;
effect.constantColor =  self.color; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T02:05:16.823

另一种方法是使用雾。查看[GLKBaseEffect 雾属性的文档](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKEffectPropertyFog_ClassRef/Reference/Reference.html#//apple_ref/doc/c_ref/GLKEffectPropertyFog)

# c# - 用于 CXF Web 服务的 .NET 客户端身份验证和 SOAP 凭据标头

> ID：11263640
> 
> 赞同：5
> 
> 时间：2012-06-29T14:28:06.040
> 
> 标签：c#, web-services, authentication, cxf, soapheader

**设想**

我必须使用 .NET 客户端访问 Web 服务。该服务是 Apache CXF Web 服务。需要用户名和密码验证。我已经创建了代理。我已经设置了凭证。

```
MyServiceReference proxy = new MyServiceReference();
proxy.Credentials = new NetworkCredential("username", "password");
string res = proxy.Method1(); 
```

当我运行客户端时，会引发以下异常：

```
System.Web.Services.Protocols.SoapHeaderException: An error was discovered processing the <wsse:Security> header 
```

服务发布者告诉我凭据不存在于 SOAP 标头中。所以，我猜[IWebProxy.Credentials](http://msdn.microsoft.com/en-us/library/system.net.iwebproxy.credentials%28v=vs.110%29.aspx)不是设置身份验证的正确方法。

**问题**

那么，如何设置身份验证所需的 SOAP 标头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T13:12:43.960

最终，我不得不调用创建整个 SOAP 消息并生成`HttpWebRequest`. 在 SOAP 消息中，我手动指定了安全标头：

```
<soapenv:Header>
  <wsse:Security soapenv:mustUnderstand='1' xmlns:wsse='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd'>
     <wsse:UsernameToken wsu:Id='UsernameToken-1' xmlns:wsu='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd'>
        <wsse:Username>Foo</wsse:Username>
        <wsse:Password Type='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText'>Bar</wsse:Password>
        <wsse:Nonce EncodingType='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary'>qM6iT8jkQalTDfg/TwBUmA==</wsse:Nonce>
        <wsu:Created>2012-06-28T15:49:09.497Z</wsu:Created>
     </wsse:UsernameToken>
  </wsse:Security>
</soapenv:Header> 
```

这里是服务客户端：

```
String Uri = "http://web.service.end.point"
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(Uri);
req.Headers.Add("SOAPAction", "\"http://tempuri.org/Register\"");
req.ContentType = "text/xml;charset=\"utf-8\"";
req.Accept = "text/xml";
req.Method = "POST";

String SoapMessage = "MySoapMessage, including envelope, header and body"
using (Stream stm = req.GetRequestStream())
{
    using (StreamWriter stmw = new StreamWriter(stm))
    {
        stmw.Write(SoapMessage);
    }
}

try
{
    WebResponse response = req.GetResponse();
    StreamReader sr = new StreamReader(response.GetResponseStream());
    log.InfoFormat("SoapResponse: {0}", sr.ReadToEnd());
}
catch(Exception ex)
{
    log.Error(Ex.ToString());
} 
```

有关 Web 服务安全 (WSS) 的有趣资源：

*   [维基百科](http://en.wikipedia.org/wiki/WS-Security)
*   [绿洲](http://docs.oasis-open.org/wss-m/wss/v1.1.1/wss-SOAPMessageSecurity-v1.1.1.html)

# php - NSArray 无法识别我放入其中的内容并给我错误

> ID：11263642
> 
> 赞同：0
> 
> 时间：2012-06-29T14:28:13.137
> 
> 标签：php, iphone, ios, nsarray, json

我正在使用 NSArray 并在其中放入我使用`json_encode` 它检索的字符串，当它是纯文本时有效，但如果它在我的图像中不起作用并给我这个错误

![在此处输入图像描述](../Images/34cd666e7abf121754d4f493f49a6284.png)

我也尝试使用 NSMutableArray 但同样的问题，所以如果是这些 "\r\n" .. 等的问题，如何将其转换为纯文本？

这是我使用的代码：

```
NSError *er;
    SBJsonParser *parser = [[SBJsonParser alloc] init];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost:8888/ost.php"]];
    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *json_string = [[NSString alloc]initWithData:response encoding:NSUTF8StringEncoding];
    content = [parser objectWithString:json_string error:&er];
    NSLog(@"%@",json_string);     
NSLog(@"%d",[content count]);
    NSLog(@"%@",[content objectAtIndex:0]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:32:58.050

我看到一个 NSDictinoary 错误，它使用`objectForKey`而不是`objectAtIndex`

你的问题很可能是：

```
NSLog(@"%@",[content objectAtIndex:0]); 
```

检查它的类型`content`很可能是一个字典，它被要求提供索引处的对象。

# ruby-on-rails - Ruby on Rails - 将 ActiveRecord 查询从视图重构到模型

> ID：11263646
> 
> 赞同：0
> 
> 时间：2012-06-29T14:28:20.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refactoring, rails-activerecord

我知道“胖模型/瘦控制器”和“永远不要将逻辑放在视图中”的建议；但是，它会帮助我从一个例子中学习。在下文中，重写代码以使查询不在视图中的最佳方法是什么？

**模型**

```
 class Product < ActiveRecord::Base
   belongs_to :order
 end

 class Order < ActiveRecord::Base
   has_many :products
 end 
```

**控制器**

```
 @orders = Order.all 
```

**看法**

```
 <% @orders.each do |o| %>
 <%= Product.where("order_id = ?", o.id).count %>
 <% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:34:00.120

这完全取决于您想要显示的内容，但最直接的选择是利用您指定的关联：

```
<% @orders.each do |o| %>
  <%= o.products.count %>
<% end %> 
```

然后在您的控制器中，您可以使用[预先加载](http://railscasts.com/episodes/22-eager-loading?view=asciicast)来优化您的 SQL 调用。

```
@orders = Order.all(:include => :products) 
```

# c - HPUX 上的 wcwidth 问题：HPUX 上的国际化和本地化问题

> ID：11263648
> 
> 赞同：0
> 
> 时间：2012-06-29T14:28:48.023
> 
> 标签：c, internationalization, locale, hp-ux

以下程序在 HPUX 上返回不正确的值 {-1,0,-1}，而如果我在 Linux 上运行相同的程序，它对于区域设置“de_DE.iso885915@euro”正常工作。HPUX wcwidth、iswprint 和 wcswidth 有什么问题吗？

```
int main () 
{
    wchar_t str[2];
    wchar_t ch = 8364; /* Euro sign */

    str[0] = ch;
    str[1] = '\0';

    /* Locale set to de_DE.iso885915@euro before running this program */
    setlocale(LC_ALL, "");

    printf ("%d\n", wcwidth(ch));
    printf ("%d\n", iswprint(ch));
    printf ("%d\n", wcswidth(str, 2));

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:02:32.377

HPUX 可能不使用 Unicode 作为编码，`wchar_t`而是在使用 8 位语言环境时将 8位`char`值简单地存储在 32 位中。`wchar_t`这是一种丑陋的老式做法，现在通常不受欢迎，但根据 C 标准它是合法的，实际上 C 标准允许并鼓励实现提供预定义的宏`__STDC_ISO_10646__`来指示`wchar_t`值是 Unicode。如果您尝试切换到基于 UTF-8 的语言环境并且问题消失了，那么这几乎肯定是您遇到的问题。

# debugging - 带有 Trace32-Using System.Up 命令的劳特巴赫调试器不起作用

> ID：11263649
> 
> 赞同：1
> 
> 时间：2012-06-29T14:28:53.330
> 
> 标签：debugging, embedded

我正在使用带有 Trace32 的 Lauterbach 调试器来调试在 TC1797 上闪烁的代码。我能够调试我在 ECU 上闪烁的代码。但不知何故，过了一段时间我无法在代码中放置任何断点。软件似乎正在运行并正常运行。我尝试重新刷新但 system.Up 命令似乎也不起作用。它给出一条消息说“ PLL 锁定等待”。所以问题是我不再能够使用 ECU 来调试/重新刷新软件。谁能建议我如何让 ECU 从 PLL 锁定等待条件中恢复？这可能是什么原因？

我怀疑当我在连接调试器时将另一个校准工具连接到 ECU 时会发生这种情况。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:32:42.863

我相信这是系统时钟设置的问题。

请查看您的 TC1797 用户手册或其他相关文档，了解如何为您所需的时钟设置锁定 PLL，应首先初始化 MCU 的哪些寄存器值？

我相信这会解决你的问题。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:23:11.153

谢谢..但我最近碰巧偶然发现了这个网站：http://www.lauterbach.com/frames.html?ephone.html：它谈到了类似的问题：“PLL未锁定的信息由调试器从位于 SCU 中的寄存器 PMSCR.PLL 是否锁定不影响调试连接，所以这不是错误而是信息。

然而，在调试器似乎已建立调试连接但目标不响应调试器命令（如 break）的情况下，通常会观察到这种 CPU 状态。尽管调试连接完全断开，但调试器认为从目标获得有效响应，但能够识别它们是无效的。因此对于调试器来说，目标状态是 TriCore 正在运行且 PLL 未锁定。

另一个检查调试连接是否正常工作的检查是执行 JTAG 链扫描。为此，执行“Menu -> Help -> Support -> Systeminfo...”并检查“JTAG Chain”部分中文件末尾的结果：如果链扫描失败并且您看到诸如“TDO”之类的消息一直保持低电平”，此设备无法进行目标连接。

可能有两个主要原因：物理或逻辑连接问题，或者您的 TriCore 设备损坏。您可能希望与另一个目标系统或调试器进行交叉检查。移除所有延长线并将调试电缆直接连接到目标设备”

我试过这个，它确实给了我结果：'TDO 一直很低'。现在我的 3 个 ECU 发生了这种情况（在连接调试器的情况下碰巧工作得很好。所以我猜 MCU 的寄存器值应该是正确初始化）。如果有人能建议我是否可以以某种方式恢复 ECU 会很有帮助？是否可能只是调试接口坏了？

# android - 我的 Android 项目中文件夹的路径

> ID：11263651
> 
> 赞同：0
> 
> 时间：2012-06-29T14:28:54.463
> 
> 标签：android, path, jsch

在我的 android 应用程序中，我在 /res 文件夹 (/res/raw) 中创建了一个“原始”文件夹。“原始”文件夹包含一个文件（一个无需密码即可连接 sftp 的公钥/私钥文件）。

我正在使用 Jsch 库使用公钥/私钥连接到 sftp。为了设置密钥文件，我需要一个密钥文件所在的路径。Jsch设置私钥文件路径的方法是：

```
 JSch ssh = new JSch();
    ssh.addIdentity("path/to/key/file/filename"); 
```

我应该为密钥文件传递什么路径？传递“res/raw/filename”给出`java.io.FileNotFoundException: /res/raw/firmware_key (No such file or directory)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:42:36.230

> 为了设置密钥文件，我需要一个密钥文件所在的路径。

然后，您需要将资源复制到文件中。资源没有文件——它是 APK 文件中的一堆字节。用于`getResources().openRawResource()`获取`InputStream`可用于将数据复制到内部存储中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:33:16.363

你可以这样做。

```
ssh.addIdentity("android.resource://com.mypackage.myapp/raw/firmware_key"); 
```

`com.mypackage.myapp`您的应用程序根包在哪里。

问候， 阿基夫·哈米德

# php - Wordpress：自定义表单的电子邮件脚本？

> ID：11263652
> 
> 赞同：1
> 
> 时间：2012-06-29T14:28:56.160
> 
> 标签：php, email, plugins, wordpress

是否有任何插件或脚本来处理简单的自定义表单并将其发送出去？

我有一个由硬编码 HTML 制作的两个项目的非常简单的网上商店，现在我只想将表单发布到一个 php 脚本，该脚本将其发送给两个收件人（我自己和客户）。

我一直在尝试使用 mail() 函数设置一个简单的脚本，但它不起作用，我无法收到错误消息..尝试了 ini_set('display_errors...) 等。但我不想现在解决这个问题。我记得几年前就这样做了，开始摆弄服务器设置等的时间太多了。

关于开箱即用的工作解决方案的任何想法？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:32:42.693

所以你正在尝试 mail() 函数，但它实际上并没有发送电子邮件并且你没有收到任何错误？我使用一个名为 PHPMailer 的库来发送电子邮件：

[http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)

听起来您希望使用所有表单元素对电子邮件进行预格式化。您可能必须编写自己的电子邮件格式，但也许有适合您的东西？

# email - 在 Clojure 中将电子邮件字符串解析为数据结构

> ID：11263653
> 
> 赞同：3
> 
> 时间：2012-06-29T14:28:59.470
> 
> 标签：email, clojure

我正在寻找一种以纯文本格式接收电子邮件并将其解析为更好的内容以在 Clojure 项目中使用的方法。生成的数据结构应该允许我快速获取发件人、主题、正文和附件。

有一个与此类似的问题，但在 Java 中：

[Java电子邮件消息解析器？](https://stackoverflow.com/questions/3444660/java-email-message-parser)

我发现的大多数库只支持电子邮件发送，不一定支持解析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:39:03.580

既然没有人回答，也许我应该。这是一个加载电子邮件文件并打印出`from`字段（第一个地址）的非常简单的示例。

```
(ns something.views.welcome
  (:use [noir.core :only [defpage]]
        [clojure.contrib.java-utils]
        [clojure.java.io :only [input-stream]])
(:import 
    (javax.mail Session)
    (javax.mail.internet MimeMessage)
))

(def session
    (Session/getDefaultInstance 
    (as-properties [["mail.store.protocol" "imaps"]])))

(def email "email.txt")

(defn get-message [filename]
    (bean (MimeMessage. session (input-stream filename))))

(defn get-from [message]
    (.toString (first (:from message))))

(println (get-from (get-message email))) 
```

# asp.net - RegularExpressionValidator 限制输入长度，对字符类型没有限制

> ID：11263659
> 
> 赞同：6
> 
> 时间：2012-06-29T14:29:27.720
> 
> 标签：asp.net, .net, regex, validation

我正在尝试使用 a`RegularExpressionValidator`来验证`TextBox`输入长度。我有它的工作，但它只接受字母和数字。我想允许**任何**字符，唯一的检查是不超过 25 个字符。

```
<asp:TextBox ID="MenuLabel" runat="server" />
<asp:RegularExpressionValidator ValidationExpression="^[a-zA-Z0-9]{25}$" ID="MenuLabelVal" runat="server" ErrorMessage="Menu Label must be no longer than 25 characters." ControlToValidate="MenuLabel"  /> 
```

正则表达式不是我的强项，所以有人可以告诉我如何修改`^[a-zA-Z0-9]{25}$`以表示*任何字符*最多 25 次，而不仅仅是字母数字。

**注意 1：**我已经有一个`RequiredFieldValidator`地方可以确保 1 个或多个字符。

**注意 2：**我知道我可以只使用`MaxLength`TextBox 上的属性，但是此表单也用于编辑现有数据，我不希望它在编辑时简单地截断现有记录。我更喜欢实现一个验证器，这对于编辑现有数据的用户来说很明显，他们需要缩短值，而不是在用户没有意识到的情况下截断表单。

**注意 3：**我对其他解决方案持开放态度，例如自定义验证器，只要它仅依赖于客户端验证。我无权访问代码隐藏以在服务器上编写自定义验证处理程序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T14:34:52.400

```
.{1,25} 
```

应该将值限制为任何字符 1 到 25 次。不确定这将如何处理 unicode 输入 - 它可能会将多字节字符计为单个字符，因此如果您使用它来限制数据库，请小心

可能你可能想要`^.{1,25}$`，但我认为即使是这个简单的版本也应该工作

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T14:34:19.573

如果您使用自定义验证器，那么您可以执行以下操作：

```
<asp:CustomValidator ID="MenuLabelVal" runat="server" ClientValidationFunction="ValidateFieldLegth" ErrorMessage="Menu Label must be no longer than 25 characters." ControlToValidate="MenuLabel" EnableClientScript="true"  /> 
```

你的javascript会是这样的：

```
<script>     
    function ValidateFieldLegth(sender, args) {
        var v = document.getElementById('<%=MenuLabel.ClientID%>').value;
        if (v.length > 25) {
            args.IsValid = false;
        }
        else {
            args.IsValid = true;
        }
    }
</script> 
```

# unit-testing - RhinoAutoMocker：为某些类型生成不同的对象

> ID：11263662
> 
> 赞同：0
> 
> 时间：2012-06-29T14:29:30.387
> 
> 标签：unit-testing, structuremap, rhino-mocks

我已经开始使用 RhinoAutoMocker，我想知道是否有人可以帮我解决我面临的问题。我有以下构造函数（由我要测试的对象公开）：

```
public class MyViewModel{
   public MyViewModel(ICommand cmd1, ICommand cmd2){
   }
} 
```

每个命令都会触发一个事件，该事件负责执行不同的操作。在使用 RhinoAutoMocker 之前，我可以简单地创建不同的模拟，这样我就可以控制我的视图模型运行的操作。现在我正在尝试将我的代码更新为 RhinoAutoMocker，它将尝试对两个参数使用相同的对象。我假设有一个简单的方法可以解决这个问题，但我不知道如何。谁能帮我一把？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:10:22.957

我设法通过在设置存根和访问被测类之前更改默认配置来解决这个问题：

```
[TestFixture]
public class BoletimViewModelApresentaDlgPdf {
    [Test]
    public void Test() {
        var geraRelatorioCmd = MockRepository.GenerateStub<ICommand>();

        var autoMocker = new RhinoAutoMocker<BoletimViewModel>();
        autoMocker.Container.Configure(
            conf => {
                conf.For<BoletimViewModel>()
                    .Use<BoletimViewModel>()
                    .Ctor<ICommand>("geraRelatorio").Is(geraRelatorioCmd);
            }
        );

        autoMocker.ClassUnderTest.GeraRelatorio
            .Raise( cmd => cmd.CommandExecuted += null,
                    autoMocker.ClassUnderTest.GeraRelatorio,
                    new CommandParameterEventArgs(new object() ));

        autoMocker.Get<IVisualizadorBoletim>()
            .AssertWasCalled( v => v.VisualizaBoletim(
                Arg<IEnumerable<DadosHorticulas>>.Is.Anything,
                Arg<DateTime>.Is.Anything,
                Arg<DateTime>.Is.Anything));

    }
} 
```

# hadoop - 使用 start-all.sh 启动 Hadoop 时出错

> ID：11263664
> 
> 赞同：1
> 
> 时间：2012-06-29T14:29:35.253
> 
> 标签：hadoop

使用 strat-all.sh 启动 Hadoop 时，出现以下错误：

```
2012-06-28 19:51:56,655 FATAL org.apache.hadoop.mapred.JobTracker: java.lang.IllegalArgumentException: Does not contain a valid host:port authority: localhost:54311 
    at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:147)
    at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:128)
    at org.apache.hadoop.mapred.JobTracker.getAddress(JobTracker.java:2560)
    at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:2200)
    at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:2192)
    at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:2186)
    at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:300)
    at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:291)
    at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:4978)

2012-06-28 19:51:56,655 INFO org.apache.hadoop.mapred.JobTracker: SHUTDOWN_MSG: 
```

## mapred-site.xml 内容

```
<configuration>
  <property>
    <name>mapred.job.tracker</name>
    <value>localhost:54311 </value>
    <description>mapred</description>
  </property>
</configuration> 
```

## 系统配置

```
RHEL V5.0 enterprise
JDK : java 1.6.0_26
Hadoop : 1.0.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:43:50.607

验证您的集群配置。特别是 /etc/hosts 文件。验证为您的名称节点提供的名称。

您的名称节点和作业跟踪器是否在同一台机器上运行？

# android - 为什么 Android 的 LVL 将我锁定在自己的应用程序之外？

> ID：11263672
> 
> 赞同：0
> 
> 时间：2012-06-29T14:30:13.520
> 
> 标签：android, android-lvl

我最近在我的应用程序中添加了 Android 的 LVL 复制保护，结果至少可以说是不稳定的。

我在开发人员控制台中手动设置的每个测试响应似乎都按预期工作。但是，当我设置“正常响应”时，问题就出现了。周三，我第一次上传了这个应用程序，在它上市后不久，它按预期报告了 LICENSED。

但是，昨天下午没有任何警告，我的应用程序突然告诉我我没有获得许可。到目前为止，我没有对开发人员的控制台或代码进行任何更改。发现这一点后，我立即取消发布，直到找到解决方案。我已经尝试清除应用程序的缓存和 Google Play 的缓存。

所以，我不知道我在这里做错了什么。我通过 Eclipse 中的 APK 在手机上安装了自己的应用程序，而不是从市场上购买自己的应用程序。要进行 LVL 的现场测试，我是否必须实际购买自己的应用程序，或者上传到开发者页面就足够了？我的 LVL 代码实际上是示例页面的副本，我在版本中这样做是为了在进一步优化之前尝试开始工作。我把它贴在这里，剪掉了一些可识别的信息。

```
public class Main extends Activity {
private static final byte[] SALT = { <salt> };
private static final String B64 = "<base 64 key>";
private dbHelper db = new dbHelper(this);
private int requestCode;

LicenseCheckerCallback mLCC;
    LicenseChecker mC;
Handler mH;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    checkL();
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == 1) {
        startActivity(new Intent(Main.this, MainProfiler.class)); //callback for profile setup
        finish();
    }
}

protected void checkL() {
    String a = Settings.Secure.getString(getContentResolver(), Settings.Secure.ANDROID_ID); 
    mH = new Handler();
    mLCC = new settingsResolved();
    mC = new LicenseChecker(
            this, 
            new ServerManagedPolicy(this, new AESObfuscator(SALT, getPackageName(), a)),
            B64);
    mC.checkAccess(mLCC);
}

protected class settingsResolved implements LicenseCheckerCallback {
    @Override
    public void allow(int reason) {
        //the application is licensed properly
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        //authorize access
        startFromCallback();
    }

    @Override
    public void dontAllow(int reason) {
        //the application is not licensed properly
        Log.e("Main", "LVL Failed!");
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        failFromCallback(reason);
    }

    @Override
    public void applicationError(int errorCode) {
        //an error occurred
        Log.e("Main", "LVL Error!");
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        errorFromCallback(errorCode);
    }
}

private void startProcedure() {
    if (db.getRunOnce()) { //this is the first run
        Intent i = new Intent(Main.this, ProfileSetup.class);
        i.putExtra("NewProfile", true);
        startActivityForResult(i, requestCode);
    } else { //this is not the first run
        startActivity(new Intent(Main.this, MainProfiler.class));
        finish();
    }
}

private void failureState(int reason) {
    AlertDialog.Builder adb = new AlertDialog.Builder(this);
    adb.setTitle("LVL Error");
    adb.setCancelable(false);
    adb.setMessage(<license refused message>));
    adb.setPositiveButton("Exit", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            finish();
        }
    }); 
    if (reason != Policy.NOT_LICENSED) {// not NOT_LICENSED, meaning the error is not due to a licensing issue
        adb.setNegativeButton("Check Again", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                checkL();
            }
        });
    } else {
        adb.setNegativeButton("Google Play", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Intent i = new Intent(Intent.ACTION_VIEW);
                i.setData(Uri.parse("market://details?id=<package name>"));
                startActivity(i);
                finish();
            }
        });
    }
    adb.create().show();
}

private void applicationError(int errorCode) {
    AlertDialog.Builder adb = new AlertDialog.Builder(this);
    adb.setTitle("LVL Error");
    adb.setCancelable(false);
    adb.setMessage(<application error message>);
    adb.setPositiveButton("Exit", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            finish();
        }
    }); 
    adb.create().show();
}

private void startFromCallback() {
    mH.post(new Runnable() {
        public void run() {
            Log.i("LVL", "License Pass!");
            startProcedure();
        }
    });
}

private void failFromCallback(final int reason) {
    mH.post(new Runnable() {
        public void run() {
            failureState(reason);
        }
    }); 
}

private void errorFromCallback(final int errorCode) {
    mH.post(new Runnable() {
        public void run() {
            applicationError(errorCode);
        }
    }); 
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (mC != null) {
        mC.onDestroy();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:54:18.433

是的。设置“正常响应”时，您的测试帐户需要通过 Google Play 购买应用程序。对我来说，我只是将测试帐户的响应设置为“许可”。我买自己的应用程序太便宜了 ;-)

# sql - SQL Anywhere 11 - 检查事件是否存在

> ID：11263680
> 
> 赞同：2
> 
> 时间：2012-06-29T14:30:37.830
> 
> 标签：sql, schedule, sqlanywhere

我有一个创建预定事件的 SQL 脚本：

```
CREATE EVENT "Daily_1200PM"
SCHEDULE "Daily_1200PM" START TIME '12:00' EVERY 24 HOURS
HANDLER
begin 
   -- Blah blah, do some stuff here
end; 
```

我想删除这个事件，如果它存在的话。我知道我可以通过以下方式删除该事件：

```
DROP EVENT "Daily_1200PM" 
```

但是对于某些数据库，该事件实际上并不存在，因此会引发错误。

*仅*当事件存在时，如何删除该事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T16:44:45.003

```
if exists( select * from sys.sysevent where event_name='Daily_1200PM' ) then
    drop event Daily_1200PM;
end if 
```

# browser - 电话间隙 - 隐藏地址栏的元标记？

> ID：11263682
> 
> 赞同：0
> 
> 时间：2012-06-29T14:30:43.867
> 
> 标签：browser, cordova

我见过很多关于隐藏地址栏的问题。我正在开发一个本地电话间隙应用程序。换句话说，一组带有 javascript 文件的 html 页面托管在针对移动用户的服务器上（不在 iPhone/android 应用程序中）。在这种情况下，有没有办法在第一次加载页面后隐藏地址栏？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:04:22.910

是的，这可以通过这个小 Javascript 实现：

```
<script type="text/javascript">
// When ready...
window.addEventListener("load",function() {
   // Set a timeout...
   setTimeout(function(){
      // Hide the address bar!
      window.scrollTo(0, 1);
   }, 0);
});
</script> 
```

`<head>`您应该在HTML 代码的某处添加它。

该`window.scrollTo`方法是隐藏地址栏的关键。iPhone 需要使用换行`setTimeout`功能才能正确隐藏地址栏——不使用 setTimeout 会导致问题。

* * *

如果您还想支持将网页添加到 iPhone 的主屏幕，您还需要添加以下`<meta>`-tag。

```
 <meta name="apple-mobile-web-app-capable" content="yes" /> 
```

这也将隐藏 iPhone 屏幕底部的工具栏（仅当用户添加到主屏幕时）。

# xcode - iOS 配置 get-task-allow 和 ：配置文件无效：0xe8008012

> ID：11263683
> 
> 赞同：4
> 
> 时间：2012-06-29T14:30:46.417
> 
> 标签：xcode, provisioning, ad-hoc-distribution, over-the-air

我有一个为应用商店构建的 iPhone 应用。在我到达那里之前，我需要在内部对其进行测试。所以本周早些时候我出去了，得到了一个分发配置文件，并将它安装在我组织周围的大约 50 台设备上。没问题，一切都非常顺利，每个人都很开心。所以我随后对代码进行了一些清理，进行了一些重构，并添加了一些润色。与此同时，我们在测试版中添加了更多设备（大约增加了 10 个设备）。因此，当我准备好构建并运行第二个测试版时，我出去了，获得了一个新的配置文件并将构建存档以进行临时无线部署。然后我在我的手机（也是开发设备）上测试了这个应用程序，它没有安装。我在 Organizer 中检查了设备控制台，看到了如下所示的错误：`<Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile`. 没关系，当我在 3 天前存档和部署它时，它在没有权利 plist 的情况下运行良好。所以我想“好吧，只是其中一个怪癖。” 我添加了一个 Entitlements.plist 并将其设置`get-task-allow`为`YES`. 然后我用我的分发配置文件重新归档它，并尝试将它安装到我的设备上，它确实安装正确。然后我在 2 个单独的设备上尝试了它——一个在我周二成功部署时安装了它，另一个没有。没有一个工作。它做了几乎到最后的事情，然后说“安装失败”。所以我想“好吧，它不喜欢 Entitlements.plist 文件。我[读过一些东西](https://stackoverflow.com/questions/4871726/do-i-still-need-an-entitlements-plist-file-for-an-ad-hoc-build)如果应用商店中有一个 Entitlements.plist，Apple 将拒绝应用商店的应用（这是真的吗？我想在下周末提交，如果我可以让这个愚蠢的测试版再次运行！）我删除该文件，存档并再次部署它，我得到了同样的错误。我将其中一个设备连接到 Organizer 的控制台，我收到一条如下所示的错误消息：

```
Jun 29 08:49:13 unknown installd[14394] <Error>: profile not valid: 0xe8008012
Jun 29 08:49:13 unknown installd[14394] <Error>: 00381000 install_embedded_profile: Could not install embedded profile: -402620398
Jun 29 08:49:13 unknown installd[14394] <Error>: 00381000 verify_signer_identity: Could not copy validate signature: -402620395
Jun 29 08:49:13 unknown installd[14394] <Error>: 00381000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.PHE3Kj/foo_extracted/Payload/Lenexa.app
Jun 29 08:49:13 unknown installd[14394] <Error>: 00381000 install_application: Could not preflight application install
Jun 29 08:49:13 unknown installd[14394] <Error>: 00381000 handle_install: API failed
Jun 29 08:49:13 unknown installd[14394] <Error>: 00381000 send_message: failed to send mach message of 71 bytes: 10000003
Jun 29 08:49:13 unknown installd[14394] <Error>: 00381000 send_error: Could not send error response to client 
```

然后我查看了`0xe8008012`错误，我注意到人们说您应该确保在 XCode 中正确设置了配置文件，并确保配置文件中的 UDID 与您尝试安装它的设备匹配。

考虑到这一点，我针对周二成功部署的同一个配置文件进行了测试，以确保这不是 UDID 问题。还是不行。

我将构建设置上的所有代码签名部分更改为如下所示： ![在此处输入图像描述](../Images/1bbf35ab1fabceb2fa8303829ad541de.png)

我读到有些人在 XCode 中重建了项目。我想避免这样做。有人有什么想法吗？我将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T20:41:29.230

我想通了。有人给了我一个错误的 UDID 号码。坦率地说，XCode 可以更好地管理这些类型的问题。想通这些事情应该不会花半天时间吧！

# xcode - 如何返回 App Temp 目录

> ID：11263692
> 
> 赞同：4
> 
> 时间：2012-06-29T14:31:25.083
> 
> 标签：xcode, macos, sandbox

我正在尝试确定将脚本文件放置在沙盒时可以读取/写入的位置的位置。在阅读 Apple 文档时，我看到了以下内容：

一些路径查找 API（在 POSIX 层之上）指的是用户主目录之外的特定于应用程序的位置。例如，在沙盒应用程序中，NSTemporaryDirectory 函数提供了指向用户主目录之外但特定于您的应用程序和沙盒内的目录的路径；您对当前用户拥有不受限制的读/写访问权限。这些寻路 API 的行为已针对 App Sandbox 进行了适当调整，无需更改代码。

所以基本上我需要使用 NSTemporaryDirectory 函数来返回应用程序临时目录。但我似乎无法弄清楚如何使用 NSTemporaryDirectory 的其他文档：

NSTemporaryDirectory 返回当前用户的临时目录的路径。

NSString * NSTemporaryDirectory (void); 返回值 包含当前用户临时目录路径的字符串。如果当前没有这样的目录可用，则返回 nil。

有人可以帮我弄清楚这个临时目录可能位于哪里，或者如何用某种 NSLog 找到它？

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:34:14.507

简单地说：

```
NSString *tempDir = NSTemporaryDirectory();
NSLog(@"tempDir='%@'", tempDir); 
```

**编辑**：根据 OP 请求，更新了将值存储在变量中的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:33:53.510

使用这个文件：

```
#import <Foundation/Foundation.h>

int main()
{
    NSLog(@"Temporary directory is: %@", NSTemporaryDirectory());
    return 0;
} 
```

然而，一般来说，NSTemporaryDirectory 只返回 /tmp。

# php - JQuery AJAX调用php SLIM框架调用报错函数，没有报错信息？

> ID：11263694
> 
> 赞同：0
> 
> 时间：2012-06-29T14:31:29.527
> 
> 标签：php, jquery, slim

我有这个服务器端 SLIM 代码：

```
require 'Slim/Slim.php';

$app = new Slim();
//$app->config('debug', true);
$app->get('/hello', 'hello');
//$app->post('/addConsultant', 'addConsultant');
$app->run();

function hello() {
    echo '{"hello": ' . json_encode("merp") . '}';
} 
```

很裸露的骨头吧？我的意思是它只有一个 GET。

现在，我有这个客户端 Javascript 代码：

```
var rootURL = "http://somabsolutions.se/dev/index.php/";

$('#btnHello').click(function() {
    $.ajax({
        type: 'GET',
        url: rootURL + '/hello',
        dataType: "text json",
        success: function(data){
            alert("Something " + data);
        },
        error: ajaxFailed
    });

    return false;
});

function ajaxFailed(XMLHttpRequest, textStatus, errorThrown) {
    alert("XMLHttpRequest=" + XMLHttpRequest.responseText + "\ntextStatus=" + textStatus     + "\nerrorThrown=" + errorThrown);
} 
```

也很容易。

我有这个 HTML 东西，它包含由 jQuery 绑定到 AJAX 调用的按钮：

```
<!DOCTYPE HTML>
    <html>
        <head>
            <title>
                Backend test
            </title>
        </head>
        <body>
            <form id="testForm">

                <button id="btnHello">Hello World</button>

            </form>
            <script src="javascript/jquery-1.7.2.min.js"></script>
            <script src="javascript/main.js"></script>
        </body>
     </html> 
```

这玩意，曾经可以工作，直到今天，由于某种外星原因停止了工作！

看，它有效，对吧？

但是每次我按下那个 HTML 按钮时，Ajax 都会认为调用失败并将我重定向到错误函数，该函数除了空白错误消息之外没有提供任何东西。

这有什么问题？几天前它工作得很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:38:30.690

您的问题可能是您的根 URL 以 a 结尾，`/`并且您在添加的 url 的开头有a `/hello`（因此`root//hello`会请求 URL），或者`dataType: "text json"`. 我总是只使用`dataType: "json"`对我有用的东西。

另外（但它只是一个格式化的东西）你可以让这一行更像 PHP 风格：（我知道这是更多的代码，但我认为它更容易阅读并且看起来更像 PHP ...：D）

> 回声'{“你好”：'。json_encode("merp") 。'}';

如果您将其更改为：

> echo json_encode(array("hello" => "merp"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:25:35.677

好的，我认为它一定是浏览器或服务器出了问题，因为现在它可以工作了……所以如果你遇到这个问题，请尝试清除所有 Chrome 数据。

诡异如地狱。

不过感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:34:10.583

好的，现在我明确知道出了什么问题，问题是我试图对一个与当前不同的 URL 进行 REST 调用，我试图`http://something.com/argument`从`http://www.something.com/argument`

显然，这足以让 JavaScript 认为它是一个跨域调用，而事实并非如此。

JQuery中有一个参数-

```
jQuery.support.cors = true; 
```

这应该允许跨域调用，或者至少 javaScript 认为是跨域调用，但它对我没有任何作用。我只需要确保 REST 调用来自正确的 URL。

# javascript - 获取数组中所有选中复选框的对应值

> ID：11263700
> 
> 赞同：0
> 
> 时间：2012-06-29T14:31:49.807
> 
> 标签：javascript, jquery, arrays, concatenation

请看下面的代码：

```
 $("#saveButton").click(function(){

        $this = $("#tableData").find("input:checked").parent().parent();

        tea = $this.find(".teaCls").text();

        $.ajax({
            type: "POST",
            url: "chkSelectedValues.php",
            data: "tea=" + tea,
            success: function(msg){
                $("#theField").html(msg);
            }

        });       

    }); 
```

现在，如果选择了多个复选框，`tea`并`flower`最终将`text`所有这些字段中的 s 连接起来。如果选中了两个复选框，一个包含单词`some`，另一个包含单词`text`，则最终`tea`变量获得值： `sometext`。但我想`tea`成为一个包含这些值的数组（在本例中为`some`和`text`），因为我需要在 AJAX 请求中传递它们并希望轻松捕获`chkSelectedValues.php`

结构：

```
<table #tableData>
 <tr>
   <td .teaCls></td>
   <td> Checkbox here</td>
  </tr>
  <tr>
  ..... 
```

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:39:43.690

这应该有效：

```
var tea = $(':checked').map(function() {
    return this.value;
}).get(); 
```

演示在[http://jsfiddle.net/alnitak/Dwevr/](http://jsfiddle.net/alnitak/Dwevr/)

**编辑**更新以反映 OP 的说明：

```
var tea = $(':checked').map(function() {
    return $(this).parent().siblings('.teaCls').text();
}).get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:22:03.407

试一试，我认为这正是您想要的，减去用于演示目的的 alert() 部分。这里也是 jsFiddle：http: [//jsfiddle.net/pT2bP/](http://jsfiddle.net/pT2bP/)

```
<table id="tableData">
    <tr>
        <td class="teaCls">FooA</td>
        <td><input type="checkbox" value="BarA"/></td>
    </tr>
    <tr>
        <td class="teaCls">FooB</td>
        <td><input type="checkbox" value="BarB"/></td>
    </tr>
    <tr>
        <td class="teaCls">FooC</td>
        <td><input type="checkbox" value="BarC"/></td>
    </tr>
</table>

<button id="saveButton">Save</button>

$(function() {

    $("#saveButton").click(function() {
        var keyValue = {};

        $("#tableData :checkbox:checked").each(function() {
            var $this = $(this);      
            keyValue[$this.val()] = $this.closest('tr').find('.teaCls').html();
        });
        alert($.param(keyValue));
    });
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T15:01:53.800

是的。解决了。​​。谢谢大家的帮助。

```
var md = new Array();
$("input:checkbox").filter(":checked").parent().parent().each(function(){

   md.push($(this).find(".teaCls").text());

}); 
```

现在`md`是我的英雄！

# c# - 在 C# 中轻松导入和管理哪种文件类型

> ID：11263703
> 
> 赞同：2
> 
> 时间：2012-06-29T14:31:56.780
> 
> 标签：c#, automated-tests, ranorex

我是 C# 开发的初学者，我需要您的建议来帮助我选择实用的文件格式，其内容将导入我的应用程序。

基本上我正在使用 Ranorex 开发测试自动化，Ranorex 是一个测试自动化软件，其项目基于 C#。

具体项目的目的是测试另一个软件，该软件导入包含设备列表的文件并重复此过程我想查看设备是否每次都成功导入。这就像一个大循环，Ranorex 一次又一次地重新启动程序，并从一个文件中导入另一个文件和其他设备。

所以我有几个文件要导入其中的各种设备。问题是数量不规律。

我的第一个想法是使用这样的 excel 文件，但在 C# 中导入 excel 似乎并不实用。

![在此处输入图像描述](../Images/ab105be07ffeb8100f304cde7f70353c.png)

我们的程序只能逐个文件导入，检查设备后需要重新启动。基本上我希望我的 C# (ranorex) 项目启动我的软件，导入一个文件，检查这个文件中的每个设备，关闭软件并以同样的方式重新启动它。你明白这或多或少是一个二维列表的问题。

该列表将包含要导入的文件，每个文件都包含要测试的设备。最好的解决方案是什么？一个数据库？

编辑1：嗯，我的第一张图片非常基础，可以帮助您理解。实际上，我的行是这样的，MHZ 是文件，其他冒号是一个设备的描述。您会明白为什么我认为 XML 管理起来可能会很复杂，因为设备的特征在于许多参数。 ![在此处输入图像描述](../Images/7bcc5f7bb91c6eb6fb8ce97d7c410a7f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:33:37.743

这正是[XML](http://en.wikipedia.org/wiki/XML)文件格式的用途。有大量关于使用 .NET 进行 XML 序列化的文章，我建议您从[介绍 XML 序列化](http://msdn.microsoft.com/en-us/library/182eeyhh%28v=vs.71%29.aspx)开始，并逐步了解示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T23:12:26.190

Ranorex 支持的数据驱动测试不正是您想要做的吗？ [http://www.ranorex.com/support/user-guide-20/lesson-3-data-driven-testing.html](http://www.ranorex.com/support/user-guide-20/lesson-3-data-driven-testing.html)

只需在您的 Ranorex 存储库中创建两个变量，并为 Excel 表的文件列和设备列设置一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:36:28.717

*.xml 已经足够好了。*.txt 如果只是想要一个类似 *.ini 的文件，列表由“，”分隔就足够了，这更简单。

# ruby-on-rails - Rails 查询内部连接

> ID：11263707
> 
> 赞同：-1
> 
> 时间：2012-06-29T14:32:10.667
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, inner-join

```
clients :has_many :project,:roles 
```

我有实施，但它不是一个好的实施..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:31:22.260

`joins`可以使用多个层次，例如Activity属于Carrier Activity.joins(:carrier => {:projects => {:client => :roles}})

将按照以下方式生成 sql

```
SELECT * from activities
JOIN carriers on activities.carrier_id = carriers.id
JOIN projects on carriers.id = projects.carrier_id
JOIN clients on projects.client_id = clients.id
JOIN roles on roles.client_id = clients.id 
```

您可以在其中添加您的条件。你需要限定你的列名，即使用`projects.id`而不是仅仅`id`让你的数据库知道`id`你想要哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:27:21.487

你的解决方案已经足够好了。也许你可以像这样改进它：

```
clients = Client.joins(:roles).where("roles.name in ('responsible', 'replacement')")
client_ids = clients.map(:&id)
projects = Project.where('id in (?) && start=? && stop=?',client_ids,params[:start_time],params[:end_time])
project_ids = projects.map(:&id)
carriers = Carrier.joins(:projects).where('projects.id in (?) AND carriers.has_clients=1', project_ids)
carrier_ids = carriers.map(&:id)
activities = Activity.joins(:carriers).where('carriers.id in (?)', carrier_ids) 
```

# internationalization - 覆盖播放 2.0 的默认 i18n 消息

> ID：11263712
> 
> 赞同：2
> 
> 时间：2012-06-29T14:32:44.753
> 
> 标签：internationalization, playframework, validation

我们使用@Constraint.Required 来验证表单的字段，这会产生一个 ValidationError - 这一切都很好。此错误具有与以下字符串相关联的标准错误消息 (error.required)：“此字段是必需的”。

然而，我们想要控制这个字符串并（可能）覆盖它——我们怎么做呢？我们的 conf/-文件夹中有一个消息文件，其中包含以下行：

```
error.required = dummytext 
```

但是错误消息仍然显示“此字段是必需的” - 即使正在读取消息文件（我们做了一些测试）。

我们如何覆盖这些消息？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T15:53:26.433

这不是一个很好的解决方案，尤其是当您想要制作多语言应用程序时。因此，在这种情况下，将更改的消息放在注释中将失败。

幸运的是，有解决方案，可以按预期工作。您需要将标签放入以语言代码作为扩展名的语言文件中，即。`conf/messages.en`，即使只定义了一种语言并且是英语。

可以从[Play 的来源复制带有密钥的默认消息](https://github.com/playframework/playframework/blob/master/framework/src/play/src/main/resources/messages.default)

# sql - 如果对非唯一属性进行排序，PostgreSQL 顺序是否完全得到保证？

> ID：11263715
> 
> 赞同：21
> 
> 时间：2012-06-29T14:32:50.847
> 
> 标签：sql, postgresql, sql-order-by

> **可能重复：**
> [为什么 SQL 查询的结果没有按我期望的顺序返回？](https://stackoverflow.com/questions/10999913/why-do-results-from-a-sql-query-not-come-back-in-the-order-i-expect)

通过阅读[7.5 Sorting Rows](http://www.postgresql.org/docs/current/interactive/queries-order.html)和我在 PostgreSQL 中看到的问题，我的印象如下，但该部分并不完全明确，因此如果有人可以验证，我将不胜感激：

```
SELECT * FROM items; 
```

没有保证的顺序。

```
SELECT * FROM items ORDER BY published_date ASC; 
```

保证具有不同日期的两个项目以给定的顺序出现，但不*保证*具有相同日期的两个项目总是以相同的顺序出现。

```
SELECT * FROM items ORDER BY published_date ASC, id ASC; 
```

总是以相同的顺序返回项目，因为它是完全确定的。

我有这个权利吗？

我不太清楚对一个属性（例如`published_date`）进行排序是否能保证具有相同值的记录的顺序，如第二个示例所示。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T14:45:32.767

除非您在子句中明确指定顺序，否则[无法保证顺序。](http://www.postgresql.org/docs/current/interactive/queries-order.html)`ORDER BY`

如果没有数据库活动，您*可能会*在多次执行时以相同的顺序获取数据，因为 PostgreSQL 只会按照在数据库页面中找到它们的顺序返回行。做一个小测试：

*   插入保持所需顺序的行数；
*   查询表：你会得到有序的行；
*   更新集合中的第一条记录；
*   再次查询表；
*   观察结果。

简而言之：您甚至*可以按**所需*顺序获取行，但这只是巧合。

# jquery - HTA 中的服务器端 ASP

> ID：11263720
> 
> 赞同：0
> 
> 时间：2012-06-29T14:32:55.087
> 
> 标签：jquery, asp-classic, hta

我对 HTA 很陌生，但对网站、javascript、ASP 等非常熟悉。我有一个 HTA，需要读取磁盘上的一些配置文件以获取其显示数据等。我已经编写了 vbscript 来执行此操作并可以执行它在 HTA 中的标签内。这很好，效果很好。

然而，考虑到我的 javascript 以及最近的 jQuery 背景，我对 jQuery 中的 DOM 操作等比我在 VBScript 中更舒服。我想我会很聪明，并使用 jQuery.ajax 来处理我的配置文件并将 JSON 数据返回到主页。但是，当我从 .get 调用中获取返回的数据时，它只是 .asp 代码，而不是它应该输出的数据。看起来很像 ASP 标签没有被识别，因此代码没有运行。

如果通过在主代码中的 '<%..%>' 标记内放置一个 'response.Write' 语句来确认这一点并且观察到没有任何输出，我很高兴。

那么，我认为我不能从 HTA 执行服务器端 ASP 是否正确？

谢谢，艾尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:41:54.987

是的，你是对的 ASP 是 IIS 的服务器端技术主机。在客户端，Internet Explorer 用于托管 HTA。IE 不支持`<% %>`也不支持任何 ASP 对象，如`Response`. HTA 中的等价物`Response.Write`是`document.write`.

# java - NullPointerException 避免

> ID：11263725
> 
> 赞同：-1
> 
> 时间：2012-06-29T14:32:58.533
> 
> 标签：java, inheritance, nullpointerexception

> **可能重复：**
> [如何避免此 NullPointerException](https://stackoverflow.com/questions/11263199/how-to-avoid-this-nullpointerexception)

实际上我早些时候问过这个问题，但我不得不编辑它，我认为我为时已晚，因为在那之后没有人回答。

我正在开发一款小型街机视频游戏，并且我正在寻找双缓冲以改善动画效果。我有一个类应该绘制空白图像，另一个类应该绘制一条简单的线。但是，我一直在应该绘制线的线上收到 NullPointerException

```
class Render extends JPanel {
    public int dbWidth = 500, dbHeight = 400;
    public Image dbImage = null;
    public Graphics dbg;

    public void gameRender() {

        if( dbImage == null )  
            dbImage = createImage( dbWidth, dbHeight );

        dbg = dbImage.getGraphics();
        dbg.setColor( Color.white );
        dbg.fillRect( 0, 0, dbWidth, dbHeight );
    }
}

class MC extends Render {
    public Render render = new Render();

    public void draw() {
        render.gameRender();
        dbg.drawLine( 100, 100, 200, 200 ); // line where NullPointerException occurs
    }
} 
```

我想是 Graphics 变量 dbg 为空，但它获得了`dbImage.getGraphics();`如何`gameRender();`修复此 NullPointerException？

我也在像这样的另一个类中调用 draw() 方法

```
 public void run() {

    running = true;

    while( running ) {

        mc.draw();
        try {
            Thread.sleep( 50 );
        }
        catch( Exception e ) {}
    }
} 
```

我在那个类的构造函数中说过 mc = new MC();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:36:01.253

类`MC`扩展类`Render`。这意味着`MC`继承`Render`的`dbg`字段。您不需要创建另一个`Render`. 试试这个：

```
class MC extends Render {

    public void draw() {
        super.gameRender();
        dbg.drawLine( 100, 100, 200, 200 ); // line where NullPointerException occurs
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:39:33.690

你正在处理`Render`这里的两个实例：你的类中有一个`render`字段`MC`，并且由于`MC`它本身 extends `Render`，那里还有另一个隐式实例。当你这样做时：

```
render.gameRender(); 
```

您正在调用`gameRender`初始化的实例，`render.dbg`但是当您调用时，`dbg.drawLine`您正在使用尚未初始化`MC`的 s 实例。`dbg`

在这种情况下，你真的不需要继承，所以只需要`render`字段即可：

```
public void draw() {
    render.gameRender();
    render.dbg.drawLine( 100, 100, 200, 200 );
} 
```

此外，公开字段也不是一个好习惯，因此请考虑为`dbg`in添加一个吸气剂`Render`：

```
public Graphics getGraphics() {
    return dbg;
}

...

render.getGraphics().drawLine( 100, 100, 200, 200 ); 
```

或委托`drawLine`电话：

```
public void drawLine(int x1, int y1, int x2, int y2) {
    dbg.drawLine(x1, y1, x2, y2);
}

...

render.drawLine( 100, 100, 200, 200 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:40:00.150

我想在调用构造函数之前，java绘图环境会调用您的draw方法。

在构造函数中放置一个断点，在 draw() 中放置一个断点来验证这一点。

如果那是真的，只需在 draw 语句周围加上一个 if 来检查！= null。当然，这是一种解决方法，但也许对您有所帮助。

# ruby - Sinatra 请求["SOME_HEADER"] 在 POST 上不起作用；文档错误？

> ID：11263729
> 
> 赞同：12
> 
> 时间：2012-06-29T14:33:09.900
> 
> 标签：ruby, sinatra, rack

Sinatra README[说](http://www.sinatrarb.com/intro#Accessing%20the%20Request%20Object)：

```
request["SOME_HEADER"]      # value of SOME_HEADER header 
```

鉴于此应用程序：

```
require 'sinatra'

post '/env' do
    env['HTTP_X_FOO']
end

post '/request' do 
    request['X-Foo']
end

post '/request_rack_http_format' do
    request['HTTP_X_FOO']
end 
```

第一个规范通过；接下来的两个失败：

```
describe "Sinatra should place the header in" do
    before(:all) do
        header 'X-Foo', 'Bar'
    end

    example "env" do
        post '/env'
        last_response.body.should == 'Bar' #pass
    end

    example "request[]" do
        post '/request'
        last_response.body.should == 'Bar' #fail; got ""
    end

    example "request[] (rack format)" do
        post '/request_rack_http_format'
        last_response.body.should == 'Bar' #fail; got ""
    end
end 
```

查看源代码，Sinatra 实际上并没有对`[]`;做任何事情。它在 Rack 中作为 和 的`GET`并集实现`POST`。并且`POST` [只返回表单 hash](https://github.com/rack/rack/blob/master/lib/rack/request.rb#L194)。因为`GET`它是查询哈希。在所有三个路线中，`request.params`都是空的。

**我的问题：**这是一个文档错误，还是我误解了如何使用`request[]`？目前，我的应用程序使用该`env[]`方法运行良好。但我想做到“正确”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T16:05:54.613

似乎是文档中的错误。`request[]`实际上检索请求的参数，而不是标头：

[https://github.com/rack/rack/blob/master/lib/rack/request.rb#L262](https://github.com/rack/rack/blob/master/lib/rack/request.rb#L262)

```
def [](key)
  params[key.to_s]
end 
```

我也通过测试仔细检查了它。看起来有点傻，但看起来你真的不能以任何方式直接访问标题，**除了通过`env`**. 至少我想不出任何其他方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-28T11:18:00.287

我意识到如果标题中的参数是“SOME_HEADER”

我可以访问它

```
env['HTTP_SOME_HEADER'] 
```

所以 Sinatra（也许是 Rack）似乎添加了**HTTP_**前缀（和大写）......奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T07:19:03.597

是的，正如 Giorgio 所说，标题大写并格式化如下：

```
env['HTTP_SOME_HEADER'] 
```

任何连字符都转换为下划线。这很令人困惑。

# android - Android IAP 错误 RESULT_SERVICE_UNAVAILABLE

> ID：11263733
> 
> 赞同：2
> 
> 时间：2012-06-29T14:33:21.060
> 
> 标签：android, in-app-billing, subscription, google-play, recurring

我在尝试恢复事务时看到的奇怪错误：

```
06-29 10:04:30.765: I/BillingService(16135): checkResponseCode got responseCode: RESULT_SERVICE_UNAVAILABLE 
```

我遇到了[其他](https://stackoverflow.com/questions/10527162/android-restore-transactions-returns-result-service-unavailable)[几个](https://stackoverflow.com/questions/10447801/android-in-app-billing-result-service-unavailable) 很有希望的 SO 问题，但最终似乎它们是由不同的问题引起的。但他们至少给了我一个提示，让我知道我还能看到什么，我在 logcat 中看到了这一点：

```
06-29 10:04:30.694: E/Finsky(16231): [1] NotifyingErrorListener.onErrorResponse: Server error on InAppPurchaseInformationRequest: com.android.volley.ServerError 
```

它响应恢复事务的请求而返回。GPlay 很好，运行没有问题......而且我还可以购买我以前拥有的另一个 IAP（这只是在最近几天才开始发生，因为我已经完成了定期计费/订阅实施）。

任何想法将不胜感激，谢谢！

*编辑：经过仔细检查......它看起来实际上与报告的其他问题之一相同，尽管据我所知，他们都没有报告我在上面看到的错误。*

```
06-29 11:26:08.142: E/Volley(16498): [14] BasicNetwork.performRequest: Unexpected response code 429 for https://android.clients.google.com/vending/api/ApiRequest 
```

这是一个相当不幸的错误，显然很多人都看到了。知道如何从中恢复吗？答案只是“等待”吗？我昨天遇到了这个问题，所以如果真的是因为我提出请求太频繁，我希望它在今天早上重试时至少会通过一次，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:56:05.863

我遇到了这个问题，并通过等待“解决了它”。但是，我只能说停工超过2天，不到3周……我搁置了一段时间，没有测试。唯一的解决方案可能是等待，尽管请求谷歌支持可能会帮助或解决问题。

# mysql - 是否可以在子表的复合外键中使用引用（通过外键）祖父行中的字段？

> ID：11263734
> 
> 赞同：1
> 
> 时间：2012-06-29T14:33:25.747
> 
> 标签：mysql, composite-key

# 完整问题：

从通过外键（引用祖父主键）链接到其祖父表中的行的子表中，是否可以使用子表的复合外键中引用的祖父行中的字段？

我当前的数据库设计是有一个主父表**Projects**。**Projects**有两个子表**JobTitles**和**Tasks**。**Tasks**然后有一个子表**Subtasks**。**Subtasks**然后有一个子表**Assignments**，这是一个将员工放在**Subtasks**上的外部参照表。我遇到的问题是将**JobTitles**分配给**Assignments**；**JobTitles**属于一个**Project**，因此任何给定**Project下的****Assignments**应该只能引用****共享一个**Project的****JobTitles**。我最近问[了这个](https://stackoverflow.com/questions/11228453/how-to-represent-a-categorized-many-to-many-database-relationship-where-categori)关于将**JobTitle**选择限制为共享项目的人的问题。但是，从那时起，我发现复合外键是一种更清洁的解决方案。****

 ****# 简单的数据库布局：

*   项目
    *   职称
    *   任务
        *   子任务
            *   作业

[我在这里](https://stackoverflow.com/questions/9780163/composite-key-as-foreign-key-sql)找到了如何创建复合键，但为此我需要使用项目的主键作为复合外键的一部分。

# 表：

*   项目
    *   项目名称**(PK)**
    *   ProjectID（唯一索引）
*   职称
    *   职称
    *   ProjectID（外键-> Projects.ProjectID）**（复合PK：JobTitle-ProjectID）**
    *   JobTitleID（唯一索引）
*   任务
    *   任务名称
    *   ProjectID（外键-> Projects.ProjectID）**（复合PK：TaskName-ProjectID）**
    *   TaskID（唯一索引）
*   子任务
    *   子任务名称
    *   TaskID(外键-> Tasks.TaskID) **(复合PK: SubtaskName-TaskID)**
    *   SubtaskID（唯一索引）
*   作业
    *   EmployeeID（外键）
    *   SubTaskID（外键-> Subtasks.SubtaskID）**（复合PK：EmployeeID-SubtaskID）**
    *   JobTitleID（外键 -> JobTitles.JobTitleID）
    *   分配 ID（唯一索引）

为了将 JobTitle 分配给分配，我想使用分配的 ProjectID（来自其父任务）及其选定的 JobTitleID 设置复合外键。唯一的问题是我不知道如何获取两代之后的 ProjectID 用于密钥。可以通过将 ProjectID 包装在每个表中的复合键中来将其传递到每一代，但考虑到它们对性能的影响（更不用说传递值），复合键并不是随便扔的东西下来似乎有点草率）。有没有办法在不通过其他表的情况下获取 ProjectID 以在密钥中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:58:13.467

正如您所说，您可以通过每个表向下传递 ProjectID。我不认为这很草率，它使您能够创建复合主键，从而可以在不同的项目中重复使用例如 TaskID。一旦意识到这一点，就会发现`ID`在每个表中使用列的常见做法有点多余。可以改为使用语义上有意义的数据作为键，这通常是我的偏好（确保它在空间方面成本更高，但索引对时间的影响相对较小）：

```
CREATE TABLE Projects (
  ProjectName VARCHAR(20) NOT NULL PRIMARY KEY
);

CREATE TABLE JobTitles (
  ProjectName VARCHAR(20) NOT NULL,
  JobTitle    VARCHAR(20) NOT NULL,
  PRIMARY KEY (ProjectName, JobTitle),
  FOREIGN KEY (ProjectName) REFERENCES Projects (ProjectName)
);

CREATE TABLE Tasks (
  ProjectName VARCHAR(20) NOT NULL,
  TaskName    VARCHAR(20) NOT NULL,
  ParentTask  VARCHAR(20),
  PRIMARY KEY (ProjectName, TaskName),
  FOREIGN KEY (ProjectName) REFERENCES Projects (ProjectName),
  FOREIGN KEY (ProjectName, ParentTask) REFERENCES Tasks (ProjectName, TaskName)
);

CREATE TABLE Assignments (
  ProjectName VARCHAR(20)  NOT NULL,
  TaskName    VARCHAR(20)  NOT NULL,
  JobTitle    VARCHAR(20)  NOT NULL,
  Email       VARCHAR(255) NOT NULL,
  PRIMARY KEY (ProjectName, TaskName, JobTitle),
  FOREIGN KEY (ProjectName) REFERENCES Projects (ProjectName),
  FOREIGN KEY (ProjectName, TaskName) REFERENCES Tasks (ProjectName, TaskName),
  FOREIGN KEY (ProjectName, JobTitle) REFERENCES JobTitles (ProjectName, JobTitle),
  FOREIGN KEY (Email) REFERENCES Employees (Email)
); 
```

由于 MySQL 不支持更强大的约束验证，我能想到的唯一其他选择是定义`BEFORE INSERT`并`BEFORE UPDATE`触发`Assignments`引发错误以拒绝包含无效 JobTitle 的数据。但是，您还需要创建触发器`JobTitles`来处理此类引用记录发生更改或被删除的情况；然后还有可能导致链接中断的所有其他表。丑丑丑。

因此，我更喜欢上面给出的第一种方法。****

# matlab - Matlab - 矩阵分离成子矩阵

> ID：11263737
> 
> 赞同：-2
> 
> 时间：2012-06-29T14:33:31.523
> 
> 标签：matlab, matrix, split

我有一个家庭作业，其中我有 640x480 的图像，我想把它分成 16x16 块。有人可以告诉我该怎么做吗？如果可能的话，我想避免循环。我已经尝试了几个小时，但没有运气......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:44:09.267

我认为最适合您的是使用 Matlab 函数[blockproc](http://www.mathworks.com/help/toolbox/images/ref/blockproc.html)。如果您真的想获取块，请深入研究 matlab 代码，但我想您想对图像应用一些处理功能？假设您想做一些图像压缩，然后通过将压缩函数和块大小作为参数来调用 blockproc。

如果您想获取块或没有可用的图像处理工具箱，请参阅[此处](https://stackoverflow.com/questions/1637000/how-to-divide-an-image-into-blocks-in-matlab)，您的问题实际上已被多次询问（您是否甚至费心搜索它？？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:49:55.143

这可能不是最佳实践，但您可以根据需要做一些事情。它将允许您从生成的 40 x 30 二维矩阵中调用每个 16x16 块。

注意：这只是一些输入的代码，我自己没有测试过。

如果你想把它解析成一个单元格数组，你可以这样做：

```
%Original Image
Image = imread(somefilename);

%Block size desired (16x16)
bsize = 16;

% 40 and 30 come from dividing the 640 and 480 by 16 since you want 16x16 blocks.
% result = mat2cell(Y, bsize*ones(1,40), bsize*ones(1,30))
result = mat2cell(Y, bsize*ones(1,size(Image,1)/bsize), bsize*ones(1,size(Image,1)/bsize)); 
```

# c#-4.0 - 如何将映射作为新映射的基础？

> ID：11263743
> 
> 赞同：0
> 
> 时间：2012-06-29T14:33:57.940
> 
> 标签：c#-4.0, nhibernate-mapping, partial-classes

是否可以使用来自引用程序集的映射作为新映射的基础？

这背后的原因是有许多应用程序使用的通用对象，因此它们引用 CentralDataLayer.dll。问题是某些应用程序具有与 CentralDataLayer 中的表相关的附加表。所以我希望能够从这些应用程序中扩展这些映射。

引用的基本映射看起来像通常那样：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="CentralDataLayer" namespace="NHibernate.Map">
    <class name="NHibernate.Map.Employee, CentralDataLayer" table="`wt_employee`" schema="`wt_global`">

        <id name="Id" column="`emp_id`" type="Int32" unsaved-value="0">
            <generator class="native" />
        </id>

        <property name="Number" column="`emp_number`" type="Int32" not-null="true" />
        <property name="Email" column="`email`" type="String" length="100" />
        <property name="IsFullTime" column="`is_full_time`" type="Boolean" not-null="true" />
        <property name="HireDate" column="`hire_date`" type="Date" />

        <property name="SsnSerialNumber" column="`last4ssn`" type="String" lazy="true" />

        <property name="OfficePhone" column="`work_phone`" type="String" length="10" />
        <property name="OfficeExtension" column="`work_phone_extn`" type="String" length="5" />

        <component name="UpdateRecord" class="NHibernate.Map.Component.UpdateRecord, CentralDataLayer">
            <property name="Date" column="`updated_dt`" type="Date" />
            <property name="By" column="`updated_by`" type="String" length="60" />
        </component>

        <many-to-one name="User" column="`user_id`" class="NHibernate.Map.User, CentralDataLayer" unique="true" />
        <many-to-one name="Job" column="`job_id`" class="NHibernate.Map.Job, CentralDataLayer" />

    </class>
</hibernate-mapping> 
```

下一个映射文件是我不确定的：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="DataLayer" namespace="NHibernate.Map.WIP" auto-import="false">
    <class name="NHibernate.Map.WIP.Employee, DataLayer" table="`wt_employee`" schema="`wt_wip`">

        <!-- Logically I would do something like this. -->
        <include class="NHibernate.Map.Employee" table="`wt_employee`" schema="`wt_global`" />

        <property name="Active" column="`emp_active`" type="Boolean" not-null="true" />
        <property name="DashboardColumnAmount" column="`emp_dashboard_col_amount`" type="Byte" not-null="true" />

    </class>
</hibernate-mapping> 
```

NHibernate.Map.WIP.Employee 映射的结果类将是：

```
namespace NHibernate.Map.WIP
{
    public class Employee : Map.Employee
    {
        #region Fields

        private bool _active;
        private byte _dashboardColumnAmount;

        #endregion Fields

        #region Properties

        public virtual bool Active
        {
            get { return _active; }
            set { _active = value; }
        }
        public virtual byte DashboardColumnAmount
        {
            get { return _dashboardColumnAmount; }
            set { _dashboardColumnAmount = value; }
        }

        #endregion Properties
    }
} 
```

现在，开发人员应该能够在项目中使用 NHibernate.Map.WIP.Employee 以及连接的 NHibernate.Map.Employee 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:24:04.347

AFAIK你不能。您可以加载映射 xml 并在将其提供给会话工厂之前对其进行更改，或者您可以将其移植到 FluentNHibernate，然后您可以根据需要添加子类。

# java - 如何使用 google docs api 获取文本文档内容

> ID：11263744
> 
> 赞同：3
> 
> 时间：2012-06-29T14:33:59.107
> 
> 标签：java, google-docs, google-docs-api, google-drive-api

我尝试使用 google docs api 获取文本文档的内容，这就是我获取 url 以像文本一样导出文档的方式

```
 MediaContent mc = (MediaContent) entry.getContent();
  String UrlForDownload = mc.getUri()+"&exportFormat=txt&format=txt"; 
```

但不知道如何在java中获取内容，

希望有人可以提前帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T16:28:37.103

请尝试以下代码：

```
MediaContent mc = new MediaContent();
mc.setUri(UrlForDownload);
MediaSource ms = docsService.getMedia(mc);
InputStream in = ms.getInputStream(); 
```

# jquery - 使用 jQuery 查找特定输入

> ID：11263745
> 
> 赞同：0
> 
> 时间：2012-06-29T14:33:59.920
> 
> 标签：jquery, jquery-selectors

我正在开发一个评估系统。页面上有许多“questionItem”块。目标是确定 answers[2].SetAnswer 或 answers[2].Answer 设置为空字符串或？并突出显示标题（项目）。当用户更改问题时，删除突出显示。

它有效，我只是在寻找如何改进它。这是一个块：

```
$<div class="questionItem">
    <input data-val="true" data-val-number="The field MappingId must be a number." data-val-required="The MappingId field is required." id="answers_2__MappingId" name="answers[2].MappingId" type="hidden" value="24" />
    <input id="answers_2__Item" name="answers[2].Item" type="hidden" value="B0300" />
    <input id="answers_2__OldAnswer" name="answers[2].OldAnswer" type="hidden" value="^" />
    <input id="answers_2__SetAnswer" name="answers[2].SetAnswer" type="hidden" value="^" />
    <h3 class="item">B0300</h3>
    Hearing aid<br/>
    <select class="hyperSwap" id="answers_2__Answer" name="answers[2].Answer">
        <option selected="selected" value="?">(select item)</option>
        <option value="0">(0) No</option>
        <option value="1">(1) Yes</option>
        <option value="-">(-) Not assessed</option>
    </select>
</div>

<div class="questionItem">
    <input data-val="true" data-val-number="The field MappingId must be a number." data-val-required="The MappingId field is required." id="answers_11__MappingId" name="answers[11].MappingId" type="hidden" value="228" />
    <input id="answers_11__Item" name="answers[11].Item" type="hidden" value="C0900A" />
    <input id="answers_11__OldAnswer" name="answers[11].OldAnswer" type="hidden" value="0" />
    <input id="answers_11__SetAnswer" name="answers[11].SetAnswer" type="hidden" value="?" />
    <h3 class="item">C0900A</h3>
    Staff asmt mental status: recall current season <br/>
    <div class="questionCheckbox"><input id="C0900A_0" name="answers[11].Answer" type="radio" value="0" /> (0) Not checked (No)</div>
    <div class="questionCheckbox"><input id="C0900A_1" name="answers[11].Answer" type="radio" value="1" /> (1) Checked (Yes)</div>
    <div class="questionCheckbox"><input id="C0900A_-" name="answers[11].Answer" type="radio" value="-" /> (-) Not assessed</div>
</div> 
```

这是我想出的jQuery代码：

```
$function highlightUnanswered() {
    var coll = $(".questionItem").filter(function () {
        return $(this).find(":input").filter(function () {
            return (/^answers\[\d+\]\.SetAnswer$/.test(this.name) && this.value == "?") ||
                           ((/^answers\[\d+\]\.Answer$/.test(this.name) && this.value == "?") &&
                            (/^answers\[\d+\]\.Answer$/.test(this.name) && this.value == ""));
        }).length > 0;
    });

    coll.find(".item").addClass("unanswered");
    coll.find(":input").change(function (e) { $(this).parent().find(".item").removeClass("unanswered"); });
} 
```

有两个问题：

Q1：最后一行，如果我没记错的话，处理程序被添加到所有输入中，包括隐藏的。如何将其连接到答案[#].Answer 输入？

Q2：这个表单上的某个人给了我第一个查询，该查询提出了不同功能的初始集合。我明白它在做什么，但我不明白如何： /^answers[\d+].Answer$/.test(this.name) 怎么了？为什么最后有一个 .length() > 0 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:58:30.203

Q1：

```
coll.find(":input").filter(function(){
  return (/^answers\[\d+\]\.Answer$/.test(this.name);
}).addClass('unanswered'); 
```

Q2：

[http://api.jquery.com/filter/](http://api.jquery.com/filter/)说：“对于每个元素，如果函数返回 true（或“真实”值）”，那么过滤函数可以简单地返回`.length`：0 是假的，其他数字是真实的.

`/^answers[\d+].Answer$/`是一个正则表达式：

[https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

`.test(this.name)`检查当前处理的输入名称是否与所需格式匹配。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)

# javascript - 如何获得屏幕的物理尺寸（即英寸）？

> ID：11263747
> 
> 赞同：17
> 
> 时间：2012-06-29T14:34:05.017
> 
> 标签：javascript, dimension

我试图弄清楚如何通过 Javascript 获取设备屏幕的物理尺寸。到目前为止，我的结论是目前不可能，但我希望有人能证明我错了:)。

到目前为止，我已尝试通过查找设备的 DPI 来获取此信息，但似乎无法在这里获得正确的值，因为我测试过的所有设备（一些 HDPI 和 XHDPI Android 设备、iPhone4S、iPad 2 和iPad 3) 报告 96DPI。

我尝试的第一种获取 DPI 的方法是您可以在 Internet 上随处找到的方法：创建`div`一个 CSS 宽度为 的`1in`，获取它的`clientWidth`or `offsetWidth`，然后就是您的 DPI。不行，所有设备都报96。

第二种方法是使用[分辨率媒体查询](http://www.w3.org/TR/css3-mediaqueries/#resolution)，类似于：

```
for (var i=90; i < 400; i++) {
    if (matchMedia('(resolution: ' + i + 'dpi)').matches) {
       return i;
    }
} 
```

我认为这是一个聪明的解决方案，但不幸的是，它也返回 96。

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T15:07:06.103

96“DPI”是一个与现实关系不大的网络标准。它测量的英寸最好被认为是“逻辑”英寸，它对应于字体度量和 CSS 测量值（可以包括点和英寸）。排版中的“点”被定义为 1/72 英寸，但屏幕在很久以前就不再始终保持 72 DPI。因此，现在所有 CSS 点的真正含义是 96 点字体是 72 像素高。（这是逻辑像素，因为这个问题现在被高 DPI 屏幕进一步混为一谈。）

无论如何，大多数原生操作系统并不知道它们真正的物理屏幕尺寸，因此它们甚至没有关于它们可以通过浏览器暴露给 Web 应用程序的信息。你问的是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:38:57.337

看看[这个帖子](http://sunpig.com/martin/archives/2012/03/18/goldilocks-and-the-three-device-pixel-ratios.html)。它完成了：

```
<meta name="viewport" content="width=device-width, target-densitydpi=device-dpi"> 
```

# c# - GridView 删除一行

> ID：11263754
> 
> 赞同：0
> 
> 时间：2012-06-29T14:34:26.437
> 
> 标签：c#, asp.net, gridview

我有我的`<asp:GridView ID="gridView" runat="server">` 我这样绑定它：

```
 myConnection.Open();
        SqlCommand myCommand = myConnection.CreateCommand();
        myCommand.CommandType = CommandType.StoredProcedure;
        myCommand.CommandText = "sp_SelectWeek";

        myCommand.Parameters.AddWithValue("@Division", Convert.ToInt32(e.PostBackValue));
        SqlDataReader myReader = myCommand.ExecuteReader();
        myReader.Read();

        gridView.DataSource = myReader;
        gridView.DataBind();

        myReader.Close();
        myConnection.Close();` 
```

但是当我运行它时，它会从查询中删除一行。我很确定这一点，因为我用一张桌子和那里的所有行都试过了。我从同一个查询构建了一个图表，您清楚地看到我缺少一行：

![在此处输入图像描述](../Images/a9cafa185bb537e393dd852864f6b9bd.png)

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:36:06.717

你在打电话

```
myReader.Read(); 
```

在您将阅读器作为数据源传递之前。所以你有效地移动了记录指针。从而失去你的一排。只是不要打电话给阅读，你应该很好。

# jquery - 单击离开时关闭 gmap3 信息窗口

> ID：11263762
> 
> 赞同：1
> 
> 时间：2012-06-29T14:35:05.340
> 
> 标签：jquery, google-maps-api-3

我正在使用 GMAP3 jquery 插件。

我正在使用以下示例添加信息窗口[http://gmap3.net/api/add-info-window.html](http://gmap3.net/api/add-info-window.html)

当鼠标点击离开信息窗口时，如何关闭信息窗口？

到目前为止我试过

```
var inside = false;
$('.infowindow').live('mouseenter',function(){ 
    inside=true; 
}).live('mouseleave', function(){ 
    inside=false; 
});
$("body").mouseup(function(){ 
    if(!inside) $('.infowindow').remove();
}); 
```

但这会使 infowindow 保持打开状态，但会从 infowindow 类中删除内容。

我一直在尝试 infowindow.close() 但无法正常工作？

编辑：这是 addinfowindow 函数

```
function addInfoWindow(lati, longi, name, datestring) {
  // get address
  $("#dispatcher").gmap3({
    action: 'getAddress',
    latLng: [lati, longi],
    callback: function (results) {
      content = results && results[1] ? results && results[1].formatted_address : 'No Address';

      // create infowindow       
      $('#dispatcher').gmap3({
        action: 'addInfoWindow',
        latLng: [lati, longi],
        infowindow: {
          options: {
            content: name
          },
          events: {
            closeclick: function (infowindow, event) {
              //alert('closing : ' + $(this).attr('id') + ' : ' + infowindow.getContent());
            }
          },
          apply: [{
            action: 'setContent',
            args: ['<span class="infowindow">' + name + '<br />' + content + '<br />' + datestring + '<span>']
          }]
        }
      });

    } // end callback

  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:47:22.017

如果需要在信息窗口外关闭鼠标单击操作，则以下代码应该可以工作：

```
var map = creteMap();
var infoWindow = createInfoWindow(map);

 google.maps.event.addListener(map, 'click', function() {
       infoWindow.setMap(null);
 }); 
```

注意`createMap()`和`createInfoWIndow`是抽象的。单击 infow 窗口本身时不会触发单击事件，因为它是“上方”地图对象。

而不是像这样创建信息窗口

```
$('#dispatcher').gmap3({
        action: 'addInfoWindow',
        latLng: [lati, longi],
        infowindow: {
          options: {
            content: name
          },
          events: {
            closeclick: function (infowindow, event) {
              //alert('closing : ' + $(this).attr('id') + ' : ' + infowindow.getContent());
            }
          },
          apply: [{
            action: 'setContent',
            args: ['<span class="infowindow">' + name + '<br />' + content + '<br />' + datestring + '<span>']
          }]
        }
      }); 
```

您应该在 GMAP3 插件之外添加 infoWindow，例如：

```
function createInfoWindow(lati, longi, mapDivId,mapOptions, infowindowHtml){
  var map = new google.maps.Map(document.getElementById(mapDivId),mapOptions);

  var latLng = new google.maps.LatLng(lati,lngi);
  var infoWindow = new google.maps.InfoWindow();
  infoWindow.setContent(infowindowHtml);
  infoWindow.setPosition(latLng);
  google.maps.event.addListener(map, 'click', function() {
       infoWindow.setMap(null);
   });

  infoWindow.open(map);
} 
```

有关地图选项[的参考，请查看此示例](https://developers.google.com/maps/documentation/javascript/tutorial#MapOptions)

免责声明：我尚未测试此代码，因此可能存在拼写错误等，但这是在 GMAP3 插件之外执行此操作的方法。

编辑：使用 GMAP3 插件，它应该是可行的，虽然我还没有尝试过：

```
 $('#dispatcher').gmap3({
        action: 'addInfoWindow',
        latLng: [lati, longi],
        callback : function(infoWindowObj) { 
               if(infoWindowObj.getMap() != null){
                      infoWindowObj.getMap().addListener(map, 'click', function() {
                           infoWindowObj.setMap(null); });

               }
        },
        infowindow: {
          options: {
            content: name
          },
          events: {
            closeclick: function (infowindow, event) {
              //alert('closing : ' + $(this).attr('id') + ' : ' + infowindow.getContent());
            }
          },
          apply: [{
            action: 'setContent',
            args: ['<span class="infowindow">' + name + '<br />' + content + '<br />' + datestring + '<span>']
          }]
        }
      }); 
```

请让我知道这个是否有效。

# wpf - 有关如何将 m38u 文件流式传输到 Metro 风格应用程序 (WinRT) 的指南

> ID：11263764
> 
> 赞同：6
> 
> 时间：2012-06-29T14:35:17.767
> 
> 标签：wpf, silverlight, windows-runtime, live-streaming

我正在获取 m38u 文件以流式传输到直播电视频道。我试图打开这些文件（因为它们只是媒体类型为“MPEG/TS”的文件列表）并从中构建一个播放列表。但是视频之间的过渡很糟糕，它会在开始下一个视频之前暂停一两秒钟。

我不介意编写一些服务器端代码来解决这个问题，但我需要一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:40:17.877

我不知道你是如何设置播放列表的，但我想这就是你这样做的方式：

1.  你有一个 MediaElement
2.  您订阅 MediaElement.MediaEnded 事件
3.  您解析 m38u 文件并将列表中的第一个流设置为 MediaElement.Source。
4.  您处理 MediaElement.MediaEnded 并且每次您只需从列表中设置下一个流。

这是真的吗？如果是，那么您的问题是第 4 步。每次设置新源时 - MediaElement 从服务器请求流并至少缓冲一些内容以开始显示视频。我想这就是为什么你会看到 3 秒的转换。这就是您需要解决的方法：

1.  您有相同的 MediaElement。
2.  您需要在自己的 IRandomAccessStream 接口上实现，该接口可以将流下载到内存（如果不是很大）或磁盘上，或者只是具有特定缓冲区大小的缓冲流。
3.  您解析 m38u 文件，首先初始化您的 IRandomAccessStream 并将其设置为源。
4.  例如，当第一个视频播放 90% 时 - 您需要从播放列表初始化第二个流，开始使用 IRandomAccessStream 下载它。
5.  当 MediaElement.MediaEnded 将被触发时 - 您将拥有已为 MediaElement 准备好的缓冲流，因此您只需从第 4 步开始设置流。

# html - 缓存清单：首选在线设置是什么？

> ID：11263765
> 
> 赞同：16
> 
> 时间：2012-06-29T14:35:22.270
> 
> 标签：html, application-cache, cache-manifest

我一直在寻找一种方法来缓存页面以供用户离线使用，否则正常下载页面。但是，一旦检测到缓存清单，浏览器将仅从这些缓存页面加载。

我的搜索使我登陆[http://whatwg.org](http://whatwg.org)。关于[编写缓存清单](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#writing-cache-manifests)的部分引起了我的注意。这是一段摘录：

> **节标题**
> 
> 节标题更改当前节。有四个可能的部分标题：
> 
> ```
> CACHE:
>     Switches to the explicit section. 
> FALLBACK:
>     Switches to the fallback section. 
> NETWORK:
>     Switches to the online whitelist section. 
> SETTINGS:
>     Switches to the settings section. 
> ```

前三个是众所周知的，但我没有听说过最后一节标题，`SETTINGS:`. 文档继续这样说：

> 目前只定义了一种**设置**：
> 
> **缓存模式设置**
> 
> 这由字符串“ `prefer-online`”组成。它将缓存模式设置为优选在线。（缓存模式默认为快速。）

这让我想知道这个`prefer-online`设置是否正是我想要的。我希望这个设置会告诉浏览器，如果设置为 ，它应该只加载缓存`fast`的页面，否则如果用户在线，则下载页面。

不幸的是，我找不到任何关于此的额外信息或解释。有没有人遇到过有关`prefer-online`设置的任何信息？或者关于`SETTINGS:`一般的部分？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T15:50:03.587

`prefer-online`如果有连接，即使文件被缓存，也会转到服务器。如果没有连接，它将使用缓存。

`fast`将使用离线版本，即使有连接。

尽管您可以设置这些首选项，但用户代理仍然可以决定它认为什么是最好的。

# iis - 通过命令行更改 IIS .NET Framework 版本

> ID：11263767
> 
> 赞同：1
> 
> 时间：2012-06-29T14:35:28.683
> 
> 标签：iis, powershell

我正在编写一组脚本来自动在 Windows Server 2008 R2 上安装和配置 IIS。我不知道如何编写脚本将 IIS 的默认服务器级 .net 框架版本从**v2.0.50727**更改为**v4.0.30319**

到目前为止，我主要使用 PowerShell（强迫自己学习它的好借口）以及 WebAdministration 模块来执行所有配置。首选 PowerShell 解决方案，但不是必需的。

有关在 IIS 管理器中进行更改的位置的可视化参考： ![在此处输入图像描述](../Images/b2ec5b9cff2b7329c60b61d717ecd6b9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-28T23:08:30.197

您可以从 cmd.exe 提示符运行以下命令来更改 IIS 7 设置。

```
C:\Windows\System32\inetsrv\appcmd.exe set config /section:system.applicationHost/applicationPools /applicationPoolDefaults.managedRuntimeVersion:"v4.0" /commit:apphost 
```

# android - 为什么服务不应该开始活动？

> ID：11263772
> 
> 赞同：2
> 
> 时间：2012-06-29T14:35:41.977
> 
> 标签：android, service

[在这里](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)的状态通知文档中，我读到：

> 后台服务**不应该**为了接收用户交互而自行启动活动。服务应该创建一个状态通知，在用户选择时启动活动。

为什么这是“不应该”？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T14:40:20.723

因为服务发生在后台，所以用户很可能在你的服务运行时做其他事情。如果你打断他们正在做的任何事情，只是将你的活动放在上面，他们充其量只会感到困惑，最坏的情况是会生气。

他们建议使用通知，因为这样会提醒用户您想开始一项活动，但他们可以选择在准备好时通过在通知栏中点击它来“按自己的时间”开始它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:49:02.010

从用户体验的角度来看，这很可能。如果您从后台进程启动 Activity，它对用户来说看起来和感觉很奇怪。让用户在他们正在做的任何事情中停下来让您的应用程序可以优先考虑是非常突兀的。状态栏通知让他们可以选择根据需要做出响应，或者只要他们认为合适就忽略该操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:42:53.597

您的服务在想要获得用户交互的那一刻不知道用户在做什么。如果用户在另一个应用程序中，创建一个新活动会杀死（或至少进入睡眠状态）另一个应用程序，可能会打扰用户（如果他正在玩游戏，你可能会杀死游戏，如果他正在做更严重的事情可能是更具破坏性）。

# c++ - 指定参数。函数定义中的值

> ID：11263779
> 
> 赞同：-2
> 
> 时间：2012-06-29T14:36:03.570
> 
> 标签：c++

我是否完全错过了一些东西。我们怎样才能简单地将值放在函数的定义行中。如果是这样，如果我们已经预定义了传递值，那么传递值的意义何在。像这样的东西：

```
node( unsigned char c = 0, int i = 0) 
```

奇怪的是这段代码运行，并正确执行。（视觉工作室 2010）。

它与 const 函数有关吗？但是没有提到 const 。

或类似的东西：

```
void traverse(string code="") const 
```

但早期的定义不是 const'd。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:15:47.293

> 节点（无符号字符 c = 0，int i = 0）

这些是默认参数。这意味着您可以编写`node()`一些代码体而不是`node(0,0)`，`node('x')`而不是`node('x',0)`. 没有什么可以阻止您使用`node('x', 2)`. 在这种情况下，`node`将接收`'x'`and`2`作为 and 的`c`值`i`。

# asp.net-mvc - 编码 100 条路线或使用通用路线并捕获路线错误

> ID：11263781
> 
> 赞同：0
> 
> 时间：2012-06-29T14:36:10.980
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在这里问了一个问题，[当路线不满意](https://stackoverflow.com/questions/11261900/throw-404-error-when-route-is-not-satisfied)并得到答案时抛出 404 错误，我想：我选择的设计是不是一个好的设计，所以我决定将它作为一个单独的问题发布：

您认为更好的解决方案是什么：为我的 Web 应用程序中的每个页面硬编码 100 条路由，一个捕获所有路由以重定向到 404 页面，或者硬编码 1 条“通用”路由并在错误处理程序中捕获所有“错误”URL？

后者的“问题”是，当应用程序充斥着错误的网址时，应用程序将抛出（我经常读到的昂贵）大量异常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:37:35.213

拥有太多路由也是低效的，特别是对于 URL 生成。你可以：

1.  使用基本 Controller 和 override `HandleUnknownAction`，因此它不会引发异常。
2.  `controller`您可以对类似的路由进行分组，并对和`action`标记使用约束，而不是为每个操作创建路由。像[MvcCodeRouting](http://mvccoderouting.codeplex.com)这样的工具可以帮助您自动执行此操作。

# xml - SQL Server 2008 / XML 批量加载映射架构 / 查找外键 ID

> ID：11263786
> 
> 赞同：0
> 
> 时间：2012-06-29T14:36:40.850
> 
> 标签：xml, sql-server-2008, xsd, bulk-load

我正在尝试为 SQL Server 2008 XML 批量上传创建 XML 映射架构。我的 XML 数据文件包含将填​​充数据库中多个表的数据。到目前为止，我能够创建一个将填充多个表的映射模式。我遇到的问题是我的数据库表中有很多“查找”列。这些“查找”表包含两列：(1) 主键 ID (INT) 列和 (2)**具有**唯一约束的名称 (VARCHAR) 列。包含对这些查找表的外键引用的表引用主键 ID 列，而**不是**名字。问题是我的 XML 数据文件包含查找的名称而不是主键 ID。映射模式中是否有办法自动将这些查找的名称转换为其对应的主键 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:14:15.023

我还没有找到有关 SQL Server 2008 XML 批量上传架构的问题的答案。但是，我想到另一种方法是使用 XSLT（可扩展样式表语言转换），它将获取 XML 文件并将数据转换为 SQL 插入语句。使用这种方法，生成将“查找”名称转换为相应 ID 的 SQL 选择语句应该相当“容易”。

# c# - 如何获取 SharePoint 列表项作者的电子邮件地址？

> ID：11263787
> 
> 赞同：4
> 
> 时间：2012-06-29T14:36:45.907
> 
> 标签：c#, sharepoint-2010, author, sharepoint-object-model

正如标题所说，我可以访问当前列表项 - 并且很容易获得作者/按名称创建 - 但是如何从对象模型中检索 C# 中作者的电子邮件地址？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T17:45:56.220

您可以从[SPFieldUserValue](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfielduservalue.aspx)对象获取[SPUser ：](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spuser.aspx)

```
SPFieldUserValue userValue = 
    new SPFieldUserValue(web, item[SPBuiltInFieldId.Author].ToString());
SPUser user = userValue.User;
string email = user.Email; 
```

# javascript - jquery 和更新面板？

> ID：11263793
> 
> 赞同：3
> 
> 时间：2012-06-29T14:37:23.797
> 
> 标签：javascript, jquery, asp.net

我在 ASP.NET 中有一个更新面板，可以刷新部分页面。

我使用 jQuery 的`on()`方法取得了一些成功，但是`$(document).ready(function(){})`仅在页面的初始加载期间调用，而不是在每次更新面板刷新之后调用。

我想我可能可以使用 ' `ScriptManager.RegisterStartupScript()`' 触发它，但更喜欢“更清洁”的方法。有吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T14:39:43.597

你应该在 JS 中使用[pageLoad () 函数](http://encosia.com/document-ready-and-pageload-are-not-the-same/)

```
function pageLoad()
{
 // put your code when returning from update panel request.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:44:20.190

您可以`endRequest`使用与此类似的行（在您的 Javascript 中）注册处理程序：

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function(){}) 
```

这将在您的每次更新后执行。

# iphone - 如何在第二次点击时取消选择地图注释

> ID：11263796
> 
> 赞同：6
> 
> 时间：2012-06-29T14:37:31.240
> 
> 标签：iphone, ios, xcode, mkmapview

我的任务是在第二次点击时取消选择地图注释。

我没有找到如何使用 mapView 函数来做到这一点。所以我使用了来自stackoverflow的一篇文章并这样做：

```
- (void)viewDidLoad
{
    annotationTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(annotationTapRecognized:)];
    annotationTap.numberOfTapsRequired = 1;
    annotationTap.delegate = self;
}

- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    [view addGestureRecognizer:annotationTap];
}

- (void)mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view
{
    [view removeGestureRecognizer:annotationTap];
}

- (void)annotationTapRecognized:(UIGestureRecognizer *)gesture
{
    NSArray *selectedAnnotations = self.viewMap.selectedAnnotations;
    for (MapAnnotation *annotationView in selectedAnnotations) {
        [self.viewMap deselectAnnotation:annotationView animated:NO];
    }
} 
```

它似乎工作正常，但事实并非如此。当我第二次点击注释时，标注消失并再次出现。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-12T15:26:18.847

我找到了解决方案。也许不是很好。

正如 luxsypher 所提到的，我添加了布尔值“is show”。所以我的函数如下所示：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    [view addGestureRecognizer:annotationTap];

    if (isShow) {
        NSArray *selectedAnnotations = self.viewMap.selectedAnnotations;
        for (MapAnnotation *annotationView in selectedAnnotations) {
            [self.viewMap deselectAnnotation:annotationView animated:YES];
        }
        isShow = FALSE;
    }
}

- (void)annotationTapRecognized:(UIGestureRecognizer *)gesture
{
    NSArray *selectedAnnotations = self.viewMap.selectedAnnotations;
    for (MapAnnotation *annotationView in selectedAnnotations) {
        [self.viewMap deselectAnnotation:annotationView animated:YES];
    }
    isShow = TRUE;
} 
```

也许它对某人有用:)。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:28:03.410

也许您应该添加一个布尔值“可见”并相应地采取行动。因为看起来您的手势被调用，然后再次调用“did Select”。

# objective-c - iPhone/Objective-C - UITextView 或 UIWebView 中的对齐对齐

> ID：11263797
> 
> 赞同：0
> 
> 时间：2012-06-29T14:37:32.740
> 
> 标签：objective-c, string, uiwebview, alignment, uitextview

我有一个很长的字符串，我想在单独的视图中显示它，但我不知道如何进行合理的对齐。我知道 UITextView 中唯一的对齐方式是左、右和居中，所以我尝试使用下面的代码使用具有合理对齐的 UIWebView

```
[description loadHTMLString:[NSString stringWithFormat:@"<div align='justify'>%@<div>",MY_TEXT] baseURL:nil]; 
```

但没有成功...字符串没有换行符，但显示如下图...

![UITextViewResult](../Images/e49514903a2c99290bd665e3e37fe5af.png)

![UIWebViewResult](../Images/5db9ef228041142f9b579638eb23a68c.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:44:16.713

我认为还有另一个选项可以使用：`CATextLayer`. [http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATextLayer_class/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATextLayer_class/Introduction/Introduction.html)

它支持合理对齐。

或者你可以`CoreText`直接使用框架。

也试试这个链接[这里](http://furbo.org/2008/10/07/fancy-uilabels/)。

# itextsharp - iTextSharp IndexOutOfRange 添加条码时出现异常，如文档

> ID：11263805
> 
> 赞同：1
> 
> 时间：2012-06-29T14:38:01.460
> 
> 标签：itextsharp, barcode, indexoutofboundsexception

我像这样在 iTextSharp (C#) 中重写了 iText (Java) [http://itextpdf.com/examples/iia.php?id=297](http://itextpdf.com/examples/iia.php?id=297)的示例 ..

```
var document = new Document(PageSize.A4);
        var writer = PdfWriter.GetInstance(document,
                                                 new FileStream(Path, FileMode.Create, FileAccess.Write,
                                                                FileShare.None));
        document.Open();
        var cb = writer.DirectContent;
        document.Add(new Paragraph("Barcode EAN.UCC-13"));
        var codeEan = new BarcodeEAN {Code = "230482304"};
        document.Add(new Paragraph("default:"));
        document.Add(codeEan.CreateImageWithBarcode(cb, BaseColor.BLACK, BaseColor.WHITE));
        codeEan.GuardBars = false;
        document.Add(new Paragraph("without guard bars:"));
        Image i = codeEan.CreateImageWithBarcode(cb, null, null);
        document.Add(i);
        codeEan.Baseline = -1f;
        codeEan.GuardBars = true;
        document.Add(new Paragraph("text above:"));
        document.Add(codeEan.CreateImageWithBarcode(cb, null, null));
        codeEan.Baseline = codeEan.Size;
        document.Close(); 
```

但得到以下异常

```
Index was outside the bounds of the array.

       at iTextSharp.text.pdf.BarcodeEAN.GetBarsEAN13(String _code)
   at iTextSharp.text.pdf.BarcodeEAN.PlaceBarcode(PdfContentByte cb, BaseColor barColor, BaseColor textColor)
   at iTextSharp.text.pdf.Barcode.CreateTemplateWithBarcode(PdfContentByte cb, BaseColor barColor, BaseColor textColor)
   at iTextSharp.text.pdf.Barcode.CreateImageWithBarcode(PdfContentByte cb, BaseColor barColor, BaseColor textColor) 
```

我的错误在哪里？它的 1:1 页面上的示例......我没有找到 C# 的东西，但是 C# 端口和没有 Doku 有点......什么都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:59:40.530

这里的问题是您为您`BarcodeEAN`的`Code`财产提供了无效的 EAN 条形码值。EAN 条形码值必须具有特定格式，包括最低字符要求，最后一位数字是校验和。[您可以在此处](http://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29)找到有关此格式的更多信息。

有大量资源可用于验证 EAN 条形码值。在 codeproject.com 上有[一篇](http://www.codeproject.com/Articles/10146/An-EAN13-Code-Control)带有 C# 代码的文章，它将验证 EAN13 条形码，并且还将计算给定 12 位 EAN13 条形码值的校验和数字。

# python - 使用 Django (Python) 构建博客 RSS 提要

> ID：11263807
> 
> 赞同：0
> 
> 时间：2012-06-29T14:38:11.430
> 
> 标签：python, django

如标题所示，我正在尝试构建一个小型应用程序，用于聚合来自不同博客的 RSS。我正在尝试测试并探索此操作的 feedparser，但在尝试编写可以检测 rss 提要的代码时却被卡住了。

大多数人只会输入 www.mysite.com/blog，这并不完全是 RSS 提要的 URL。如果有办法让我检测到 RSS 提要，我会尝试复制可以看到 RSS URL 的浏览器行为。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:56:53.687

[使用BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)之类的东西来解析 HTML 文档并查找 RSS 提要。以下是一个基本示例，不一定是最有效的：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc)

rss_links = soup.select('link[type="application/rss+xml"]')
for link in rss_links:
    rss_url = link.get('href') 
```

请参阅完整的[BeautifulSoup 文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:52:49.307

浏览器使用[RSS 提要自动发现](http://www.rssboard.org/rss-autodiscovery/)和[Atom 提要自动发现](http://philringnalda.com/rfc/draft-ietf-atompub-autodiscovery-01.html)来查找给定网页上的提要。

例如，[django](/questions/tagged/django "显示标记为“django”的问题")问题列表可通过 Atom 提要获得，该提要在相关页面的 HTML 标头中链接：

```
<link rel="alternate" type="application/atom+xml" title="Feed of questions tagged python" href="/feeds/tag/python" /> 
```

您需要解析`<link rel="alternate">`给定页面中的标签才能发现这些标签；任何带有`application/atom+xml`或`application/rss+xml`类型的东西都适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:07:50.747

有一个很棒的应用程序，叫做[Feedjack](http://feedjack.org)

但是，当 RSS 提要包含少于 100 个字符时，您会发现自己会碰壁。

对于完全控制（准确聚合您需要的内容）和没有任何 RSS 提要的网站，我建议使用[Scrapy](http://scrapy.org)

# listview - 在 ListLayout 中显示具有可变高度的项目

> ID：11263810
> 
> 赞同：5
> 
> 时间：2012-06-29T14:38:20.583
> 
> 标签：listview, microsoft-metro, winjs

我有一个 WinJs Metro 应用程序，其中包含一个`ListView`高度可变的项目。它基本上与[“HTML ListView 项目模板”示例](http://code.msdn.microsoft.com/windowsapps/ListView-item-templates-7d74826f)中的场景 4 中的方式相同。一个`groupInfo`函数用于启用`GridLayout`与 ListView 关联的单元格跨越：

![网格布局中的项目](../Images/7c73daa8c80d6239c4458f8c63c0331a.png)

现在在我的应用程序的快照视图中，我希望项目垂直滚动，所以我尝试`GridLayout`用`ListLayout`. 这会导致垂直滚动，但现在缺少单元格跨度并且项目重叠：

![列表布局中的项目](../Images/7f292ed729c67fe82973d2215f06d97f.png)

我以`groupInfo`与 相同的方式使用该函数`GridLayout`，但它似乎被忽略了：

```
layout: { 
    groupInfo: groupInfo, 
    type: WinJS.UI.ListLayout 
} 
```

有没有办法在 a 中使用可变大小的项目`ListLayout`？我的一些项目比其他项目有更多的内容，我真的很想使用不同大小的图块以最佳方式显示所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:38:03.517

> 旧帖
> 
> 是的，您当然可以自定义所有内容。我认为您的渲染问题来自这个您可能已经忘记的`forceLayout`.
> 
> ```
> ready: function (element, options) { 
>             element.querySelector("#listView").winControl.forceLayout(); 
>         } 
> ```
> 
> 我的 Windows 8 离我很近，所以如果没有其他人回复并且问题不是来自`forceLayout`我将在晚上更新回复。
> 
> 我希望这会有所帮助。

好的，所以我之前误解了你的问题。

这里有一些应该让你满意的东西。

问题是您必须在 JavaScript 和 CSS 文件中管理应用程序的不同视图状态。

因此，关于 JavaScript，我使用了两个可以在 Grid Application 模板中找到的函数。所以我修改了scenario4.js 来获取这段代码。

```
function MyCellSpanningJSTemplate(itemPromise) {
    return itemPromise.then(function (currentItem) {
        var result = document.createElement("div");

        // Use source data to decide what size to make the
        // ListView item
        result.className = currentItem.data.type;
        result.style.overflow = "hidden";

        // Display image
        var image = document.createElement("img");
        image.className = "regularListIconTextItem-Image";
        image.src = currentItem.data.picture;
        result.appendChild(image);

        var body = document.createElement("div");
        body.className = "regularListIconTextItem-Detail";
        body.style.overflow = "hidden";
        result.appendChild(body);

        // Display title
        var title = document.createElement("h4");
        title.innerText = currentItem.data.title;
        body.appendChild(title);

        // Display text
        var fulltext = document.createElement("h6");
        fulltext.innerText = currentItem.data.text;
        body.appendChild(fulltext);

        return result;
    });
}

var appViewState = Windows.UI.ViewManagement.ApplicationViewState;
var appView = Windows.UI.ViewManagement.ApplicationView;
var ui = WinJS.UI;

(function () {
    "use strict";
    var page = WinJS.UI.Pages.define("/html/scenario4.html", {
        initializeLayout: function (listView, viewState) {
            /// <param name="listView" value="WinJS.UI.ListView.prototype" />

            if (viewState === appViewState.snapped) {
                listView.layout = new ui.ListLayout();
            } 
            else {
                listView.layout = new ui.GridLayout({ groupInfo: groupInfo });
            }
        },
        ready: function (element, options) {
            var listView = element.querySelector("#listView").winControl;
            this.initializeLayout(listView, appView.value);
        },
        updateLayout: function (element, viewState, lastViewState) {

            var listView = element.querySelector("#listView").winControl;

            if (lastViewState !== viewState) {
                if (lastViewState === appViewState.snapped || viewState === appViewState.snapped) {                   
                    this.initializeLayout(listView, viewState);
                } 
                else {
                    listView.layout = new ui.GridLayout({ groupInfo: groupInfo });
                }
            }
        }
    });
})(); 
```

然后我删除了`layout`scenario4.html中listview的整个属性，因为我在scenario4.js中创建了上面的布局

因此，您的列表视图根据视图状态使用不同的布局，但您将获得与以前相同的结果（顺便说一句，您必须在处于捕捉模式时更改场景才能看到结果）。

所以我们只需要根据视图状态更新scenario4.css，在CSS 3中我们有媒体查询允许我们这样做。然后根据此处的视图状态，`snapped`我们将覆盖我们的属性。您只需将以下代码添加到您的scenario4.css

```
@media screen and (-ms-view-state: snapped) {
    #listView {
        max-width: 260px;
        height: 280px;
        border: solid 2px rgba(0, 0, 0, 0.13);
    }

    .regularListIconTextItem {
        max-width: 250px;
        max-height: 70px;
        padding: 5px;
        overflow: hidden;
        display: -ms-grid;
    }

    .smallListIconTextItem {
        max-width: 250px;
        max-height: 70px;
        padding: 5px;
        overflow: hidden;
        background-color: Pink;
        display: -ms-grid;
    }

    /* Medium size */
    .mediumListIconTextItem {
        max-width: 250px;
        max-height: 70px;
        padding: 5px;
        overflow: hidden;
        background-color: LightGreen;
        display: -ms-grid;
    }

    /* Large size */
    .largeListIconTextItem {
        max-width: 250px;
        max-height: 70px;
        padding: 5px;
        overflow: hidden;
        background-color: LightBlue;
        display: -ms-grid;
    }
} 
```

希望这次能有所帮助；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:21:32.247

我的一般想法是在快照视图中切换模板以避免使用 MyCellSpanningJSTemplate 来调整项目模板的大小。你可以试试这个。

1）创建第二个项目模板：

```
 <div id="listLayoutItemTemplate" data-win-control="WinJS.Binding.Template" style="display: none">
        <div class="regularListIconItem">
            <img src="#" class="regularListIconItem-Image" data-win-bind="src: picture" />
        </div>
    </div> 
```

2）通过侦听调整大小事件来检测快照视图（参见[http://code.msdn.microsoft.com/windowsapps/Snap-Sample-2dc21ee3](http://code.msdn.microsoft.com/windowsapps/Snap-Sample-2dc21ee3)）

3) 以编程方式将模板更改为在步骤 1 中创建的模板。

```
var listView = document.querySelector("#listView").winControl;
listView.itemTemplate = listLayoutItemTemplate; 
```

# powershell - PowerShell复制文件

> ID：11263811
> 
> 赞同：-1
> 
> 时间：2012-06-29T14:38:24.357
> 
> 标签：powershell

需要有关此脚本的一些帮助。

我有一个 web.config 文件，我需要将其递归复制到 100 个文件夹和子文件夹，但前提是该文件夹包含 ASPX 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:35:46.613

试试这个代码，但是用你自己的文件夹路径替换 c:\rootfolder。此外，您需要更新对 web.config 文件的引用。

```
$FoldersToCopyTo = Get-ChildItem -Path c:\rootfolder -Recurse | ? { $_ -is [System.IO.DirectoryInfo] };

foreach ($Folder in $FoldersToCopyTo) {
    if (Get-ChildItem -Path $Folder.FullName -Filter *.aspxx) {
        Write-Host -Object 'copying item', $folder.fullname; 
        Copy-Item -Path c:\web.config -Destination ($folder.FullName);
    }
} 
```

# php - PDO::PARAM 与过滤器消毒

> ID：11263815
> 
> 赞同：0
> 
> 时间：2012-06-29T14:38:39.310
> 
> 标签：php, filter, pdo

有人可以确认一下：如果我使用的是 PDO::PARAM，我不需要过滤清理来注入 mysql 数据库，因为 PDO:PARAM 已经这样做了......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:46:22.130

“PDO::PARAM”我想你的意思是[*将参数绑定*](http://php.net/manual/en/pdostatement.bindparam.php)到准备好的语句中。

是的，如果你正确使用prepared statements，你不需要做更多的事情来避免SQL注入，因为数据库有机会清楚地看到SQL语句和用户提供的值之间的差异。绑定参数不会清理或转义这些值，它通过将语句与数据分离来回避清理和转义的整个业务。

# php - 脚本太慢了如何避免多次运行相同的查询？

> ID：11263820
> 
> 赞同：0
> 
> 时间：2012-06-29T14:38:58.587
> 
> 标签：php, mysql

我有一个脚本运行时间过长，我一直在努力优化它以使其更快。我知道需要额外时间的一件事是我必须多次运行相同的查询。我希望能够存储该查询的结果（无需将其写入数据库），以便稍后可以引用它的值而无需再次运行查询。

我正在极大地简化下面的脚本，但希望这能给你一个想法。

假设我有两个函数，每个函数都返回一个值：

```
 function a(){
          $query = "SELECT SUM(price) FROM table_1 WHERE zip='$this->zip'"; 
          $result = mysql_query($query) or die(mysql_error());
          while($row = mysql_fetch_array($result)){
          return $row['SUM(price)'];
    }
    function b(){
          $query = "SELECT SUM(price) FROM table_2 WHERE zip='$this->zip'"; 
          $result = mysql_query($query) or die(mysql_error());
          while($row = mysql_fetch_array($result)){
          return $row['SUM(price)'];
    } 
```

假设函数 a() 返回值 10，函数 b() 返回值 5

现在，假设我的脚本是这样的：

```
 if (function a() > 5) { echo 'it is greater than 5!' }
    if (function a() < 5) { echo 'it is less than 5!' }
    if (function b() == 5) { echo 'it equals 5!' }
    if (function b() > 10) { echo 'it is not greater than 5!' } 
```

如果我理解正确，上面的脚本会导致对我的数据库进行 4 个单独的查询。是否可以存储每个查询的初始运行？我想到的一件事是这样做：

```
 $a = function a();
    $b = function b(); 
```

然后让我的脚本是这样的：

```
 if ($a > 5) { echo 'it is greater than 5!' }
    if ($a < 5) { echo 'it is less than 5!' }
    if ($b == 5) { echo 'it equals 5!' }
    if ($b > 10) { echo 'it is not greater than 5!' } 
```

这会导致查询在我定义 $a 和 $b 时每个只运行一次吗？是否有另一种方法可以考虑我没有想到的？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:40:56.853

是的，这将导致您的查询只运行一次。如果您想确保它们在每个会话中运行一次，而不是每次都手动将结果缓存在变量中，您可以查看具有一些缓存能力的 ORM，或者在每个函数中使用静态变量：

```
function a() {
  static $cached_result;
  if (!is_null($cached_result) return $cached_result;

  $query = "SELECT SUM(price) FROM table_2 WHERE zip='$this->zip'"; 
  $result = mysql_query($query) or die(mysql_error());
  while($row = mysql_fetch_array($result)){
    return $cached_result = $row['SUM(price)'];
  }
} 
```

如果您不想使用 ORM，您至少应该编写自己的一系列围绕数据库访问的封装函数，而不是手动调用`mysql_query`每个函数。实际上，您的应用程序应该只有一个点通过`mysql_*`函数系列接触数据库。这隔离了变化；如果您一开始就围绕您的数据库访问实现了一个小型包装器，那么您现在只有一个地方可以更改，以便放弃过时的`mysql_query`函数以支持 PDO。

# svn - 重新组织颠覆存储库的最佳方法？

> ID：11263821
> 
> 赞同：1
> 
> 时间：2012-06-29T14:39:21.773
> 
> 标签：svn

所以挑战是这样的：

我们有一个单一的 SVN 存储库服务器，其中包含多个项目：

```
http://server.com/svn/projectA/trunk
http://server.com/svn/projectA/branches
http://server.com/svn/projectA/tags

http://server.com/svn/projectB/trunk
http://server.com/svn/projectB/branches
http://server.com/svn/projectB/tags 
```

ProjectA 和 ProjectB 实际上只是 ProjectX 的组件。现在大家想要的是：

```
http://server.com/svn/projectX/trunk/ProjectA
http://server.com/svn/projectX/trunk/ProjectB 
http://server.com/svn/projectX/branches/OldVersion/ProjectA 
http://server.com/svn/projectX/branches/OldVersion/ProjectB 
http://server.com/svn/projectX/tags/PreMajorChange/ProjectA 
http://server.com/svn/projectX/tags/PreMajorChange/ProjectB 
```

我在想 svndump，但是重新检查所有数据排序意味着我们的修订号将超过 100,000。不确定这是最好的方法（或者也许这是唯一的方法）。

还是会像 svn move 一样简单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T10:14:21.460

使用`svn move`. 它将保留历史记录并最小限度地增加 SVN 存储库的大小。首先，您在根级别签出存储库，然后执行以下操作：

```
mkdir -p projectX/{trunk,branches/OldVersion,tags/PreMajorChange}

svn add projectX

svn move projectA/trunk projectX/trunk/ProjectA

svn move projectA/branches/* projectX/branches/OldVersion/ProjectA

svn move projectA/tags/* projectX/tags/PreMajorChange/ProjectA

svn move projectB/trunk projectX/trunk/ProjectB

svn move projectB/branches/* projectX/branches/OldVersion/ProjectB

svn move projectB/tags/* projectX/tags/PreMajorChange/ProjectB

svn commit . -m "Restructuring" 
```

首先在测试存储库上尝试（例如，通过 复制现有的存储库`svnadmin hotcopy`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:40:58.310

我猜你想保留提交历史，即使没有明确写？

您可以为 ProjectX 创建一个新的 repo，然后使用 svn:externals 属性将项目 A 和 B 链接到其中。它就像普通 FS 中的符号链接。[您可以在此处](http://blog.kowalczyk.info/article/Short-tutorial-on-svn-propset-for-svnexternals-p.html)阅读快速示例。

这是更简单的方法，因为您不必执行一些“危险”操作。

# jquery - 如何从多选列表框中获取选定的项目以便它们被选中？

> ID：11263823
> 
> 赞同：3
> 
> 时间：2012-06-29T14:39:25.730
> 
> 标签：jquery, asp.net, listbox, multi-select

我有一个 Web 应用程序，我在其中使用页面加载时数据库中的项目填充列表框。

我从列表框中获取所有被选中的项目，但它们是按照它们填充的顺序排列的。

我希望这些项目按照用户选择的顺序排列。

我尝试`.change(function()`使用 jQuery，但它只返回第一个选定的项目值。

我附上我的代码以供参考。我使用了列表框[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

这是我的列表框：

```
 <asp:ListBox ID="dr_menuitem" runat="server" class="chzn-select" SelectionMode="Multiple" style="width:300px;" >
                    <asp:ListItem></asp:ListItem>
               </asp:Listbox> 
```

这是我调用的 jQuery：

```
<script type="text/javascript">
           $(document).ready(function() {

               $('#dr_menuitem').change(function() {

                     alert($("#dr_menuitem option:selected").val());
                   });
           });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:45:16.927

要以选定的顺序获取选定的值，请尝试以下操作：

```
$("#dr_menuitem").change(function() {

   // $(this).val() will give you an array
   // of selected value in order
   // you've selected

   alert( $(this).val() );
}); 
```

**[演示](http://jsfiddle.net/QStkd/550/)**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-28T06:09:43.493

试试这个jquery，

```
$(document).ready(function () {
   $("#listbox").multiselect();
}); 
```

# c# - Visual Studio 2010 提示说无法准备重构文件。我该如何解决？

> ID：11263827
> 
> 赞同：1
> 
> 时间：2012-06-29T14:39:34.513
> 
> 标签：c#, asp.net, visual-studio-2010, tfs, automated-refactoring

我在 C# 环境中工作，使用 Visual Studio 2010 Ultimate 进行 Web 开发。Intellisense 仍在工作，我的代码编译并运行良好，但我无法使用右键菜单重构工具重构我的代码。相反，系统提示我“无法准备重构文件”。我已经将我的设置重置为默认值，但没有运气。它仍然无法正常工作。其他功能正常工作，如转到定义等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:43:12.503

如果您有 Web 部署项目，我知道删除它们可以解决这个（非常罕见的）问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:37:53.630

问题是由于 Web 部署项目 Beta 引起的。我需要卸载 Visual Studio 2010 的测试版并安装 Web 部署项目 RTW。

# android - 是否可以在没有 FEATURE_CUSTOM_TITLE 的情况下更改活动标题栏的颜色？

> ID：11263829
> 
> 赞同：7
> 
> 时间：2012-06-29T14:39:36.887
> 
> 标签：android, android-titlebar

到目前为止，我发现的所有用于更改**活动**标题栏颜色的解决方案（即通过[activity.setTitle()](http://developer.android.com/reference/android/app/Activity.html#setTitle%28int%29)和[activity.setProgress()](http://developer.android.com/reference/android/app/Activity.html#setProgress%28int%29)访问的解决方案）都要求`FEATURE_CUSTOM_TITLE`：

[https://stackoverflow.com/a/2285722/869501](https://stackoverflow.com/a/2285722/869501)

但是我已经在使用`FEATURE_PROGRESS`并且 Android 禁止将自定义标题与其他标题功能（通过 AndroidRuntimeException 的方式）相结合，我不想放弃作为我活动不可或缺的一部分的漂亮进度条。

关于在没有 FEATURE_CUSTOM_TITLE 的情况下更改活动标题栏颜色的可能性的唯一提示是在[另一个 SO 线程](https://stackoverflow.com/q/6582508/869501)中：

```
View titleView = getWindow().findViewById(android.R.id.titlebar);
    if (titleView != null) {
      ViewParent parent = titleView.getParent();
      if (parent != null && (parent instanceof View)) {
        View parentView = (View)parent;
        parentView.setBackgroundColor(Color.RED);
      }
    } 
```

但是如果我尝试按原样使用代码，则`android.R.id.titlebar`无法解决！

我在哪里可以找到那个`android.R.id.titlebar`？

我必须自己定义吗？（如果答案是肯定的，这本质上不是 FEATURE_CUSTOM_TITLE 吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:40:23.120

简短的回答（现在，直到出现更好的答案）：**否**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T16:04:39.593

嗯，如果在开头没有附加“android”，我会说不，它不是 FEATURE_CUSTOM_TITLE，因为它不是*系统*标题栏。里面有“机器人”，我真的不知道。

它看起来有点像我以前做过的事情，它`android:theme="@android:style/Theme.NoTitleBar"`在清单中运行，然后在每个布局的顶部创建一个类似于视图的标题栏。

# html - 如何添加带有固定标题的滚动条

> ID：11263831
> 
> 赞同：0
> 
> 时间：2012-06-29T14:39:42.303
> 
> 标签：html, css, html-table

如何修改此 CSS 以应用带有固定标题的滚动条？

```
#gradient-style {
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    overflow: auto;
}

#gradient-style th {
    font-size: 12px;
}

#gradient-style td {
    height: 20px;
} 
```

我的桌子是这样的：

```
<table  id="gradient-style" align="center"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:30:15.423

我假设您正在谈论具有可滚动表格内容（表格正文）的固定表格标题。

请检查这个例子：http: [//jsfiddle.net/randeep161/n8zNq/](http://jsfiddle.net/randeep161/n8zNq/)

# matlab - 我需要在 matlab 中对 GUI 进行编程以连续检查串口中的数据

> ID：11263832
> 
> 赞同：1
> 
> 时间：2012-06-29T14:39:42.830
> 
> 标签：matlab, user-interface, loops

我是 GUI、MatLab 的初学者。我需要对 GUI 进行编程以连续检查串行端口中的数据。同时，我的 GUI 也应该具备其他功能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:49:47.720

你绝对应该从[这里开始。](http://www.mathworks.com/discovery/matlab-gui.html)开始使用 Matlab 设计 GUI 所需的一切。

# objective-c - scrollview 不在第二个 viewcontroller 中滚动，而只在第一个主 viewcontroller 中滚动

> ID：11263835
> 
> 赞同：0
> 
> 时间：2012-06-29T14:39:51.457
> 
> 标签：objective-c, ios

在我的应用程序中，我有一个 CameraAppViewController，我从它导航到另一个视图控制器 OverlayViewController，然后我从它导航到另一个视图控制器 ScrollerViewController。我想在 scrollerviewcontroller 上有一个 uiscrollview，但它不滚动。但是，当我将 uiscrollview 的相同代码放在第一个 CameraAppViewController 时，它会滚动。与视图的框架相比，我尝试了所有改变滚动视图内容大小的技巧，但没有任何效果。我认为代码是正确的，因为它适用于一个视图控制器。我什至试图把它放到另一个项目中，它对第一个和第二个视图控制器都有效。我将不胜感激任何帮助。

我使用的代码如下：

```
UIImage *image1=[UIImage imageNamed:@"logo_idv0.jpg"];
UIImage *image2=[UIImage imageNamed:@"logo_idv1.jpg"];
UIImage *image3=[UIImage imageNamed:@"logo_idv2.jpg"];
NSMutableArray *allImages=[[NSMutableArray alloc] init];

[allImages addObject:image1];
[allImages addObject:image2];
[allImages addObject:image3];

self.view.backgroundColor = [UIColor redColor];
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

scroll.pagingEnabled = YES;

scroll.scrollEnabled = YES;
scroll.clipsToBounds = YES;

NSInteger numberOfViews = 3;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat yOrigin = i * self.view.frame.size.width;

    UIView *awesomeView = [[UIView alloc] initWithFrame:CGRectMake(yOrigin, 0, self.view.frame.size.width, self.view.frame.size.height)];

    UIImageView *imageView=[[UIImageView alloc] initWithImage:[allImages objectAtIndex:i]];

    [awesomeView addSubview:imageView];

    awesomeView.backgroundColor = [UIColor colorWithRed:0.5/i green:0.5 blue:0.5 alpha:1];
    [scroll addSubview:awesomeView];

} 
```

scroll.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height+10);

```
[self.view addSubview:scroll]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:55:52.740

首先在 .h 中执行此操作：

```
@interface SecondViewController : UIViewController <UIScrollViewDelegate> 
```

然后在 .m 中执行此操作：

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0,self.view.frame.size.width, self.view.frame.size.height)];

self.scroll.delegate = self; 
```

# iframe - 是否有任何工具可用于获取网页上给出的 iframe Id？

> ID：11263836
> 
> 赞同：1
> 
> 时间：2012-06-29T14:39:59.993
> 
> 标签：iframe, selenium, webdriver

使用 firefox-firebug 无法获取 iFrame ID。

我想获得那个 iframe id 我去页面源并从那里手动搜索它。

用于 iframe 控制下的 selenium 自动化

```
driver.switchTo().frame(""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:28:26.083

如果 上有名称或 id `iframe`，Firebug 应该显示它（至少在元素的 DOM 选项卡中 - 右键单击​​元素并选择 Inspect in DOM 选项卡）。如果没有名称或 ID，则没有工具可以帮助您获取它。

您应该考虑通过以下方式选择框架

[`driver.switchTo().frame(int index)`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html#frame%28int%29)

或（我最喜欢的）

[`driver.switchTo().frame(WebElement frameElement)`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html#frame%28org.openqa.selenium.WebElement%29)

# sql - Oracle Query：在单个查询中进行条件提取

> ID：11263839
> 
> 赞同：3
> 
> 时间：2012-06-29T14:40:03.940
> 
> 标签：sql, oracle

我在 oracle db 中有三个表，分别是 newitems、itemdetails、ticketitems 表。一些虚拟数据如下：

门票：

```
id    ticketid     itemid    quantity

1     100          9999      2
2     100          9998      5
3     100          2222      3 
```

商品详情：

```
id    description    col_sumthing   extra_col
9999  Marlboro       val_sumthing   123_op
9998  Cigar Black    val_sumthing   456_pqwe 
```

新东西：

```
id    description    col_sumthing
2222  100Pipes       val_different 
```

最初我只需要从 itemdetails + ticketitems 中获取数据，这很容易使用简单的连接。查询是：

```
SELECT "TI".*, "I"."ID" AS "ITEMID", "I"."DESCRIPTION", "I"."col_sumthing" 
  FROM "TICKETITEMS" "TI"
 INNER JOIN "ITEMDETAILS" "I" ON TI.ITEMID = I.ID
 WHERE (TI.TICKET = '100') 
```

类似的东西。

现在引入了 newitem 表，其中可能还有一些项目存在于 ticketitems 表中。

所以我想要这样的结果：

```
Final Result:
id    description    itemid    quantity   col_sumthing    extra_col
1     Marlboro       9999      2          val_sumthing    123_op
2     Cigar Black    9998      5          val_sumthing    456_pqwe
3     100Pipes       2222      3          val_different 
```

我面临的问题是，它应该只在 itemdetails 中找不到详细信息时才检查 NEWITEMS。也欢迎任何其他解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:06:40.683

```
SELECT TI.ID AS "id",
       COALESCE( I.DESCRIPTION, NI.DESCRIPTION ) AS "description"
       COALESCE( I.ID, NI.ID ) AS "itemid",
       TI.QUANTITY AS "quantity"
       COALESCE( I.COL_SUMTHING, NI.COL_SUMTHING ) AS "col_sumthing"
       I.EXTRA_COL AS "extra_col"
  FROM TICKETITEMS TI
  LEFT OUTER JOIN ITEMDETAILS I ON TI.ITEMID = I.ID
  LEFT OUTER JOIN NEWITEMS NI ON I.ID IS NULL AND TI.ITEMID = NI.ID
 WHERE TI.TICKETID = '100' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:54:40.940

您可以使用两个 OUTER 联接：

```
SELECT ti.*, 
       nvl(i.id, n.id) itemid, 
       nvl(i.description, n.description) description, 
       nvl(i.col_sumthing, n.col_sumthing) col_sumthing 
  FROM ticketitems ti
  LEFT JOIN itemdetails i ON ti.itemid = i.id
  LEFT JOIN newsitems n ON ti.itemid = n.id
 WHERE ti.ticket = '100' 
```

只要两个详细表都`ID`作为主键，这将起作用。[`COALESCE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions030.htm#SQLRF00617)如果您有两个以上的明细表，请使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:56:34.097

您需要使用 ITEMDETAILS 和 NEWITEMS 表的 UNION，但随后需要对数据进行排名并仅获取相关行。

```
select 
  ti.id, 
  it.description, 
  it.id as itemid, 
  ti.quantity, 
  it.col_sumthing, 
  it.extra_col
from 
  ticketitem ti
  join (
    select 
      id,  
      description,  
      col_sumthing,  
      extra_col,  
      row_number() over (partition by id order by item_ordering) as item_priority
    from (
      select id, description, col_sumthing, extra_col, 1 as item_ordering
      from itemdetails
      union all
      select id, description, col_sumthing, null as extra_col, 2 as item_ordering
      from newitems 
    )
  ) it on (it.id = ti.itemid and it.item_priority = 1) 
```

# ruby - Ruby attr_accessor 方法名 != 实例变量名

> ID：11263847
> 
> 赞同：0
> 
> 时间：2012-06-29T14:40:27.807
> 
> 标签：ruby, instance-variables, attr-accessor

有没有捷径可以做到这一点？

```
def value
   @val
end

def value=(value)
    @val = value
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:46:54.423

不，那里没有。attr_accessor 所做的只是定义两个方法，一个称为 value （在这种情况下），另一个称为 value= ，它设置了一个同名的实例变量。由于您应该只通过 getter/setter 方法访问实例变量，因此在内部调用什么并不重要。

如果您正在继承，您可以使用对 super 的调用来确保恒常性：

```
class Walrus
  attr_accessor :bubbles
end

class Harold < Walrus
  def bubbles
    # do Harold related things here
    super
  end

  def bubbles=(value)
    # do Harold related things here
    super(value)
  end
end 
```

编辑

如果您真的想这样做，那么您可以在 Class 上定义自己的方法：

```
class Class
  def attr_accessor2(method_name, attribute_name)
    define_method(method_name) do
      instance_variable_get("@#{attribute_name}")
    end

    define_method("#{method_name}=") do |value|
      instance_variable_set("@#{attribute_name}", value)
    end
  end
end 
```

我还没有测试过，但类似的东西应该可以。我并不是说这是一个好主意，但这就是您正在寻找的。

编辑2

以下是它在实践中的工作方式：

```
1.9.3p0 :012 > class Derp
1.9.3p0 :013?>   attr_accessor2 :herp, :meep
1.9.3p0 :014?>   end
 => #<Proc:0x007fc75b02e958@(irb):7 (lambda)> 
1.9.3p0 :015 > d = Derp.new
 => #<Derp:0x007fc75b027e00> 
1.9.3p0 :016 > d.herp
 => nil 
1.9.3p0 :017 > d.herp = 10
 => 10 
1.9.3p0 :018 > d.herp
 => 10 
1.9.3p0 :019 > d.instance_variable_get("@meep")
 => 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:32:51.810

```
attr_accessor :val
alias_method :value, :val
alias_method :value=,:val= 
```

如果要阻止原始方法的访问，可以使用

```
remove_method :val
remove_method :val= 
```

我不知道你是否认为这更短。

# c# - 导出 C++ DLL 函数并导入 C#

> ID：11263849
> 
> 赞同：1
> 
> 时间：2012-06-29T14:40:31.737
> 
> 标签：c#, c++, dllimport, dllexport

所以我试图将用 C++ 开发的 DLL 中的函数导出到 C# 项目中。在网上搜索并进行了一些书籍研究之后，我找到了一种方法。然而，我对此的接触是有限的，而且我所有的知识都是自我紧绷的，所以我确信我在某个地方搞砸了。

我正在像这样导出函数：

```
STDMETHODIMP __export DataSetpImpl::set_HeaderFile(BSTR Value) 
```

并像这样导入它：

```
public unsafe class test
{
  const string _dllLocation = "DllPath.dll";
  [DLLImport(_dllLocation, CallingConvention = CallingConvention.stdCall)]
  [return: MarshalAs(UnmanagedType.Bstr)]
  public static extern string set_HeaderFile([MarshalAs(UnmanagedType.BStr)] String path);
} 
```

然后在应用程序中调用它，如下所示：

```
test.set_HeaderFile(@"C:\temp\SomeHeaderFile.hdz"); 
```

一切都正确构建并且链接得很好......当应用程序点击上述调用时会出现问题。它抛出并错误说：

```
Unable to find an entry point named 'set_HeaderFile' in DLL 'DLLPath.dll'. 
```

关于我做错了什么的任何想法？如果我对这个主题的了解非常有限，请记住我的知识，我只是在网上和办公室周围的笔记中找到我能找到的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:47:26.853

这样你只能导入非类成员函数。

在您的情况下，名称“set_HeaderFile”被修改为类似于“DataTableImpl$$set_HeaderFile@4”的名称，即使它被声明为静态，CLR 也不会在使用名称“set_HeaderFile”的 .dll 文件中找到它。

你可以做一个解决方法。

说你有一个

```
DataSetpImpl* g_Instance; 
```

然后写一个函数

```
LONG __stdcall mySetHeaderFile(BSTR Val)
{
    return g_Instance->set_HeaderFile(Val);
} 
```

然后在 C# 中你可以访问它。

```
[DLLImport(_dllLocation, CallingConvention = CallingConvention.stdCall, EntryPoint="mySetHeaderFile")]
public static extern Int32 set_HeaderFile([MarshalAs(UnmanagedType.BStr)] String path); 
```

返回 BSTR 还需要使用 Marshalling 进行一些包装。看到这个：http: [//msdn.microsoft.com/en-us/library/7b620dhe.aspx](http://msdn.microsoft.com/en-us/library/7b620dhe.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:47:52.267

我认为您混淆了与托管代码交互的两种方式。您可以将代码包装在 COM 服务器中并利用 .NET 的 COM 互操作工具。或者，您可以创建一个非类（即全局范围）导出函数并使用 P/Invoke。

该函数的措辞建议使用 COM。但是在 C# 方面，您错误地使用了 P/Invoke。

我建议你使用 P/Invoke。COM 是一个很大的话题；除非你愿意学习很多，否则不要去那里。

对于 P/Invokable 函数，创建一个非类函数。您不能通过 P/Invoke 使用从 DLL 导出的 C++ 类。两个类系统——托管和 C++——是完全不同的。此外，您不必传递 BSTR，P/Invoke 可以很好地用于旧的 LPCWSTR。

# c - 使用 gdb 调试多个文件

> ID：11263851
> 
> 赞同：1
> 
> 时间：2012-06-29T14:40:35.323
> 
> 标签：c, debugging, gdb

我有一个正在处理的项目，它有多个文件，我使用 make 来编译项目。这是生成文件

```
CC =  /opt/gcc-4.7-cilkplus/bin/gcc
CFLAGS = -ggdb3 -Wall
COMPLILEFLAGS = `mysql_config --include` -I/opt/gcc-4.7-cilkplus/include/
LINKERINFO = `mysql_config --cflags --libs` -lrt -lm -lz
CILKFLAGS = -lcilkrts

# To be provided at the commandline
DIR = './bloom'
MODE = '2'
FILENAME = 'database.info'

exec: main.o mysql-client.o databaseConnection-common.o murmurhash3.o bloom-filter.o md5.o auxilary-functions.o
    $(CC) $(CFLAGS) -o exec main.o mysql-client.o databaseConnection-common.o murmurhash3.o bloom-filter.o \
    md5.o auxilary-functions.c $(LINKERINFO) $(CILKFLAGS)

main.o: main.c mysql-client.h databaseConnection-common.h bloom-filter.h
    $(CC) $(CFLAGS) $(COMPLILEFLAGS) -c main.c $(CILKFLAGS)

bloom-filter.o: bloom-filter.c bloom-filter.h murmurhash3.h auxilary-functions.h 
    $(CC) $(FLAGS) $(COMPLILEFLAGS) -c bloom-filter.c

murmurhash3.o: murmurhash3.c murmurhash3.h
    $(CC) $(CFLAGS) -c murmurhash3.c

md5.o: md5.c md5.h
    $(CC) $(CFLAGS) -c md5.c

mysql-client.o: mysql-client.c mysql-client.h databaseConnection-common.h
    $(CC) $(CFLAGS) $(COMPLILEFLAGS) -c mysql-client.c

databaseConnection-common.o: databaseConnection-common.c databaseConnection-common.h
    $(CC) $(CFLAGS) $(COMPLILEFLAGS) -c databaseConnection-common.c

auxilary-functions.o: auxilary-functions.h auxilary-functions.c
    $(CC) $(CFLAGS) -c auxilary-functions.c

run:
    ./exec $(MODE) $(FILENAME) $(DIR) 
```

现在要调试程序，我通过按时间顺序运行以下命令来使用 gdb：

`gdb ./exec`

`run 2 database.info ./bloom`

现在，如果我尝试在文件 main.c 中添加断点，它可以正常工作。但是当我尝试时，`break bloom-filter.c:340`我得到了错误`No source file named bloom-filter.c`。如何在源文件中添加断点而不是`main.c`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:20:27.043

`Makefile`for target中有错字`bloom-filter.o`。您提到了编译标志，`$(FLAGS)`而不是`$(CFLAGS)`由于未启用调试标志，`bloom-filter.o`这很可能是您收到错误的原因。尝试更改`$(FLAGS)`并`$(CFLAGS)`检查。
希望这可以帮助！

# linux - 在 main 之前调用系统调用

> ID：11263853
> 
> 赞同：0
> 
> 时间：2012-06-29T14:40:48.773
> 
> 标签：linux, linux-kernel

我在 x86-64 上使用 Linux。我需要在用户程序开始执行其代码之前（但在加载器/链接器映射库等之后）插入一个系统调用（本质上需要对操作系统的陷阱）。有没有人建议在**不需要**二进制修改/重新编译的情况下实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:19:44.387

使用 LD_PRELOAD 环境变量在 libc 之前加载自定义库，这将拦截对 __libc_start_main 的调用，_start 似乎使用该调用来开始实际的 main() 函数。

或者使用 ptrace() 像调试器一样附加到进程。

# matlab - 绘制二维应力矢量场的特征向量和值

> ID：11263854
> 
> 赞同：0
> 
> 时间：2012-06-29T14:40:53.373
> 
> 标签：matlab, gnuplot, data-visualization, eigenvector, paraview

我打算绘制一个二维应力场。我手头有 2 个特征向量和系统中所有粒子的 2D 应力张量场各自的 2 个特征值。恐怕我无法弄清楚如何使用 MATLAB、gnuplot、Grapher、ParaView 或任何其他合适的板形式来评估这些特征向量（方向）和特征值（最大和最小应力值）来绘制 2D 应力场。

任何形式的代码（C、C++、MATLAB 或 ParaView）以及对利用这个微不足道的特征问题的简要说明都将是非常可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:33:59.227

类似于 matlab 的 quiver 是 gnuplot 的`with vectors`绘图风格。

出于好奇，只有特征向量和特征值，您希望如何获得完整的二维应力场？这对我来说似乎不可能（尽管我的线性代数有点生疏）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:48:17.443

你试过[Matlab 颤抖](http://www.mathworks.com/help/techdoc/ref/quiver.html)吗？

# google-sheets - Google 表格替代 Excel 的 =DATEDIF()？

> ID：11263857
> 
> 赞同：5
> 
> 时间：2012-06-29T14:40:58.367
> 
> 标签：google-sheets, google-sheets-formula

我将我的 Excel 电子表格导入 Google，但公式中只有一个错误，我无法弄清楚。我正在寻找从开始日期（D2）开始计算周年日期/服务年限，当然还有今天的日期，使用：

```
=DATEDIF(D2,TODAY(),"y")&" years "&DATEDIF(D2,TODAY(),"ym")&" months" 
```

谷歌给了我错误“未知的函数名 DATEDIF”。

有谁知道如何在 Google Docs 中进行这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:17:41.090

`datedif`即使在 Excel 中也没有记录，只需在两个应用程序中使用普通公式：

```
=TODAY()-D2 
```

在 Excel 中，您可以使用自定义数字格式：`yy" years "mm" months"`，要在 Google Docs 中获得正确的格式，请使用以下公式：

```
=text(today()-D2, "yy' years 'mm' months'") 
```

PS：这个公式的excel等价物是`=TEXT(TODAY()-D2, "yy"" years ""mm"" months""")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-23T00:02:16.473

如果您仍然像我一样使用旧的 Google 文档，您可以使用这些公式作为等效公式

```
DDd =DATEDIF($A2;$B2;"d") =INT($B2-$A2)
DDm =DATEDIF($A2;$B2;"m") =12*(YEAR($B2)-YEAR($A2))+MONTH($B2)-MONTH($A2)-(DAY($B2)<DAY($A2))
DDy =DATEDIF($A2;$B2;"y") =YEAR($B2)-YEAR($A2)-IF(MONTH($A2)>MONTH($B2);1;IF(MONTH($A2)=MONTH($B2);DAY($A2)>DAY($B2);0)) 
```

来源[https://forum.openoffice.org/en/forum/viewtopic.php?f=9&t=8791#p42479](https://forum.openoffice.org/en/forum/viewtopic.php?f=9&t=8791#p42479)

# javascript - 在数据集中使用递归搜索二维数组模式

> ID：11263858
> 
> 赞同：0
> 
> 时间：2012-06-29T14:41:02.880
> 
> 标签：javascript, regex, pattern-matching

有人可以就使用javascript在CSV表/数据集中搜索模式的更好方法提出一些建议吗？

```
var dataset= [[0, 0, 0], [0, 1, 1], [0, 1, 1]];
var pattern = [[0, 0, 0], [0, 1, 1], [0, 1, 1]];
arrex(dataset, pattern, 0, 0);

arrex = function(dataset, pattern, row, column) {
  if(dataset[row][column] == pattern[row][column] || patern[row][column] == "_") { // _ is the dont care case
    if(dataset[row].length-1 == column && dataset.length-1 == row){ 
      return true; // final case everything matched!!
    } else if (dataset[row].length > column+1) {
      return arrex(dataset, pattern, row, column+1); 
    } else {
      return arrex(dataset, pattern, row+1, 0); // check next row
    }
  } else {
    return false;
  }
} 
```

任何建议都会很棒......我对将数组转换为字符串然后进行字符串比较特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:54:15.450

好吧，假设模式是相同大小的数据集并包含 0、1 或“_”，它是一个单行：

```
var dataset= [[0, 0, 0], [0, 1, 1], [0, 1, 1]];
var pattern = [[0, 0, 0], ["_", 1, 1], [0, 1, 1]];

var match= dataset.join('').test(new RegExp('^' + pattern.join('').replace(/_/, '.') + '$'));

console.log(match); 
```

# c# - ASP.NET WebAPI JSON 绑定区分大小写

> ID：11263865
> 
> 赞同：19
> 
> 时间：2012-06-29T14:41:28.927
> 
> 标签：c#, asp.net-web-api, json.net

从 ASP.NET WebAPI Beta 升级到 RC 带来了一些兴奋和挫败感。我已经能够解决大部分问题，但现在困扰我的问题是 JSON 请求数据的大小写敏感性。

用于 JSON 请求的格式化程序（默认情况下是 JSON.NET 格式化程序）似乎区分大小写，而用于表单 urlencoded 数据的格式化程序则不区分大小写。有没有办法将 JSON 请求配置为使用不区分大小写的格式化程序？

这是一个简单的示例来说明我在使用 JSON 请求时遇到的问题：

**HTML / JavaScript**

```
<button id="tester">Click here!</button>

<script type="text/javascript">
    $(function () {
        $("#tester").on("click", function() {
            $.ajax({
                type: "POST",
                url: "/Api/Test/Index/" + 168,
                data: ko.toJSON({ key: 123, value: "test value" }), // THIS FAILS
                               // Key: 123, Value: "test value" <- BUT THIS WORKS
                contentType: "application/json; charset=utf-8",
                statusCode: {
                    200: function () {
                        $("body").append("<p>Success</p>");
                    },
                    400: function () {
                        $("body").append("<p>Failure</p>");
                    }
                }
            }).always(function () {
                $("body").append("<hr />");
            });
        });
    });
</script> 
```

**C＃**

```
public class TestController : ApiController
{
    public HttpResponseMessage Index(int? id, KeyValuePair<int, string> test)
    {
        if (id != 168 || test.Key != 123 || test.Value != "test value")
            return Request.CreateResponse(HttpStatusCode.BadRequest);

        return Request.CreateResponse(HttpStatusCode.OK);
    }
} 
```

我在提供 JSON 数据的行上提供了注释。我宁愿不通过适当的大小写属性成员来打破我的 JavaScript 对象的约定，我当然也不想通过降低我的 C# 属性的大小写来打破约定。有什么想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-29T17:48:36.457

Json.NET 格式化程序对反序列化 (json -> CLR) 不区分大小写。

在序列化时，您可以使用[CamelCasePropertyNamesContractResolver](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_Serialization_CamelCasePropertyNamesContractResolver.htm)获得骆驼外壳。

在您的 Global.asax 中：

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T14:37:10.893

在深入研究了这个问题之后，我意识到我在 Json.NET KeyValuePair 转换器中遇到了一个错误。James Newton-King 很友好地回答了我的相关问题，并提供了一个修复链接：

[Json.NET 不区分大小写的属性反序列化](https://stackoverflow.com/questions/11266695/json-net-case-insensitive-property-deserialization)

# google-maps - 谷歌地图自定义图像和自定义坐标

> ID：11263866
> 
> 赞同：1
> 
> 时间：2012-06-29T14:41:30.150
> 
> 标签：google-maps, google-maps-api-3

我正在使用 Google API 为游戏构建地图。问题是我试图使用 lat/long 来显示坐标，并且我试图将这些坐标与从左上角开始的地图坐标相匹配。

链接：[http ://cstauffer.com/dayz/map/ARMAII_MAP.html](http://cstauffer.com/dayz/map/ARMAII_MAP.html)

我环顾四周，但没有找到很多文档或帮助修改纬度/经度背后的数学。现在这张地图只是一张 2D 地图，所以我不需要墨卡托投影，只需要 x/y 和缩放级别。任何提示/帮助将不胜感激。

我应该添加一些信息：8,960 x 8,960 图像。我希望左上角从 0,0 开始。这是一张平面地图，使用的缩放级别为 2-6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:45:09.197

我不确定，但我想你可能正在寻找这些：

*   `google.maps.Map.getProjection`[^(api文档)](https://developers.google.com/maps/documentation/javascript/reference#Map)
*   `google.maps.Projection.fromLatLngToPoint`[^(api文档)](https://developers.google.com/maps/documentation/javascript/reference#Projection)

# vb.net - 从 Windows Phone 到 Windows 8

> ID：11263868
> 
> 赞同：0
> 
> 时间：2012-06-29T14:41:32.517
> 
> 标签：vb.net, windows-phone-7, windows-8

我为 Windows Phone 7.5 编写了以下代码。你知道这些应该如何为 Windows 8 编写吗？

```
Me.NavigationService.Navigate(New Uri(String.Format("/ImagePage.xaml?tag={0}", li.Tag), UriKind.Relative))

Protected Overrides Sub OnNavigatedTo(e As NavigationEventArgs)
    MyBase.OnNavigatedTo(e)
    If Me.NavigationContext.QueryString.ContainsKey("tag") Then
        Me.tagname = Me.NavigationContext.QueryString("tag")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:51:14.693

在 Win8 WinRT 中，您通过指定类型进行导航

`rootFrame.Navigate(typeof(ImagePage), li.Tag)`

不是通过指定 XAML URI/位置

`NavigationService.Navigate(new Uri(String.Format("/ImagePage.xaml?tag={0}", li.Tag)))`

（如果您使用的`Frame`是默认情况下的控件）

# javascript - 如何自定义 YUI 图表中的 y 轴刻度？

> ID：11263872
> 
> 赞同：0
> 
> 时间：2012-06-29T14:41:44.560
> 
> 标签：javascript, charts, yui, histogram

我正在使用以下代码使用 YUI 图表生成直方图：

```
YUI().use('charts', function(Y) {
    //Data for the chart
    var myDataValues = barResponse.data;
    // Instantiate and render the chart
    var mychart = new Y.Chart({
        dataProvider: myDataValues,
        legend: {
            position: "right",
            width: 300,
            height: 300,
            styles: {
                hAlign: "center",
                hSpacing: 4
            }
        },
        axes: {
            category: {
                styles: {
                    label: {
                        rotation: -45
                    }
                }
            }
        },
        render: "#mychart",
        type: "column"
    });
}); 
```

其中 barResponse 是包含数据的 JSON 对象，`myChart`是要绘制图表的 html div：

```
<div id="mychart"></div> 
```

由于我的数据是低值，例如：0.028、0.047 .. 等。由于 y 轴自动定义在 0 到 1 之间，因此图表中的条形非常小。这就是它的外观：

![在此处输入图像描述](../Images/6f42d98ef77f0561dd8a563c4ad062b9.png)

问题是如何自定义 y 轴的刻度范围：例如从 0.0 到 0.3？或者换句话说，如何使同一数据集的直方图条更大？

我检查了 API 文档，但它令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:24:21.503

将 设置`YAHOO.widget.NumericAxis.maximum`为所需的值。

官方文档指定：

> ...如果未明确设置，将自动计算轴最大值。

**参考：**

*   [`NumericAxis`关于 YUI 图表 API](http://developer.yahoo.com/yui/docs/YAHOO.widget.NumericAxis.html)

# sql - 数据质量服务内部行为

> ID：11263876
> 
> 赞同：1
> 
> 时间：2012-06-29T14:41:57.763
> 
> 标签：sql, sql-server, tsql, sql-server-2012, data-quality-services

在 DQS 上创建知识库时，我们只能从下拉列表中选择 SQL Server 和 Excel。

我想查询oracle。为此，我想在 SQL Server 上创建一个从 Oracle 链接服务器中选择的视图，但我担心性能。

假设我的表有 10k 行，我不介意对返回 10k 行的链接服务器运行查询的影响，只要它只运行一次。

我的问题是：DQS 是一次性加载执行清理操作所需的所有数据，还是在清理过程中不断向数据源（在我的示例中为 oracle）提交查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:55:19.563

您需要将 Oracle 数据导出为可导入 DQS 的格式。这是清理项目的一次性数据导入。我在 DQS 上制作了一系列简短的（每个不到 5 分钟）[截屏视频](http://www.youtube.com/playlist?list=PL41EB59B228FECB9B&feature=plcp)- 这可能对您开始时有所帮助。

此外，请在开始使用 DQS 之前安装[CU1 ，因为此更新可显着提高性能。](http://support.microsoft.com/kb/2679368)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:06:54.427

是的，通过链接服务器指向 ORACLE 的 SQL 视图“愚弄”了 DQS，使其认为本地数据在 SQL 中。数据被访问一次并复制到 DQS 数据库并在那里进行处理。

我建议安装 2012 SP1 而不是 CU，因为那里有更稳定/经过测试的更新。安装 SP1 后，您需要运行

```
DQSInstaller.exe –upgrade 
```

默认安装中的此文件位于

```
C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Binn 
```

# mysql - 使用 Ruby/Rails 基于 Information Schema 生成 MySQL 视图

> ID：11263877
> 
> 赞同：0
> 
> 时间：2012-06-29T14:42:20.990
> 
> 标签：mysql, sql, ruby-on-rails, ruby

我正在使用旧数据库。命名约定到处都是并且不一致。我们正在编写一个 Ruby on Rails 应用程序，但显然数据库不能很好地与 Rails 内置功能配合使用。这是我们的策略，希望得到一些意见：

1.  创建一个新数据库并将 rails 应用程序指向该数据库
2.  将旧的数据库表/列映射到新的、rails 友好的表名/列名
3.  使用 map 生成视图，以便 rails 应用程序“认为”这些表是真实的
4.  发展
5.  当 Rails 应用程序准备好接管旧 UI 并将实际数据迁移到真实表而不是视图时，请回圈

我遇到的问题是如何将此 MySQL 视图生成脚本放入 rails 应用程序。像这样的东西在哪里适合文件结构？作为某种插件？

**表映射：**

```
+--------------------+------------------+------+-----+---------+----------------+
| Field              | Type             | Null | Key | Default | Extra          |
+--------------------+------------------+------+-----+---------+----------------+
| id                 | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| database           | varchar(64)      | NO   |     |         |                |
| current_name       | varchar(64)      | NO   |     |         |                |
| current_pk         | varchar(64)      | YES  |     | NULL    |                |
| new_system_prefix  | varchar(255)     | YES  |     | NULL    |                |
| new_format         | varchar(255)     | YES  |     | NULL    |                |
| new_vendor         | varchar(255)     | YES  |     | NULL    |                |
| new_name           | varchar(64)      | YES  |     | NULL    |                |
| new_pk             | varchar(64)      | YES  |     | NULL    |                |
| notes              | varchar(255)     | YES  |     | NULL    |                |
+--------------------+------------------+------+-----+---------+----------------+ 
```

**列映射：**

```
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| table_id        | int(11) unsigned | YES  | MUL | NULL    |                |
| current_name    | varchar(255)     | YES  |     | NULL    |                |
| current_type    | varchar(255)     | YES  |     | NULL    |                |
| current_default | varchar(255)     | YES  |     | NULL    |                |
| new_name        | varchar(255)     | YES  |     | NULL    |                |
| new_type        | varchar(255)     | YES  |     | NULL    |                |
| new_default     | varchar(255)     | YES  |     | NULL    |                |
| extra           | varchar(255)     | YES  |     | NULL    |                |
| notes           | varchar(255)     | YES  |     | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:39:36.020

我建议您阅读一些有关反腐败层的信息，这是 DDD 模式之一。这种模式的主要原则是保护您的模型免受与之交互的遗留系统的影响。一种选择是创建一个存储库并封装所有处理旧数据库的查询。存储库将充当旧数据库和新模型之间的转换器。数据库字段到实体的映射也将由存储库完成。

# asp.net - 如何在gridview中将navigationurl添加到超链接

> ID：11263879
> 
> 赞同：9
> 
> 时间：2012-06-29T14:42:28.903
> 
> 标签：asp.net, gridview

我的 gridview 中的每一行都应该有一个按钮/超链接导航到 Page?id= **something** 然后有 javascript 可以捕获重定向并将页面打印为 iframe。这**东西**在行中已经可用（但被隐藏了）。所以我想为每个字段做类似 NavigateUrl = "~/Page.aspx?id=" + Id.ToString() 的事情，但问题是 Id 是从 LINQ 数据源填充到 DataBind() 中的。

```
<asp:GridView ID="gridleitNidurstada" runat="server" GridLines="None" AllowPaging="True"
    CssClass="mGrid" PagerStyle-CssClass="pgr" DataKeyNames="Id" OnRowDataBound="gridLeit_RowDataBound"
    AllowSorting="True" SortedAscendingHeaderStyle-CssClass="sortasc-header" SortedDescendingHeaderStyle-CssClass="sortdesc-header"
    OnSorting="gridleitNidurstada_Sorting" CurrentSortField="Id" CurrentSortDir="Ascending"
    AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="Id" HeaderText="Id" SortExpression="Id" Visible="false"/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:HyperLinkField HeaderText="Print" Text="Print" **anything here?**/>
    </Columns>
    <PagerStyle CssClass="pgr"></PagerStyle>
    <SortedAscendingHeaderStyle CssClass="sortasc-header"></SortedAscendingHeaderStyle>
    <SortedDescendingHeaderStyle CssClass="sortdesc-header"></SortedDescendingHeaderStyle>
</asp:GridView> 
```

绑定是这样的：我可以在那里做吗？还是在 rowbound 事件中？

```
IQueryable<model.SomeClass> someClass = 
    from m in preparePredicate()
    select new model.SomeClass
    {
        Id = m.id,
        ...
    };
        gridleitNidurstada.DataSource = someClass;
        gridleitNidurstada.DataBind(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T14:47:11.487

您可以使用以下语法：

```
<asp:HyperLinkField DataNavigateUrlFields="col1,col2" DataNavigateUrlFormatString="gotopage.aspx?p1={0}&p2={1}" Text="Print"> 
```

更多信息[here](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.datanavigateurlfields.aspx)和[here](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.datanavigateurlformatstring) on MSDN。

编辑：

* * *

如果您在创建网格时不知道确切的 url，则需要做更多的工作。本周我使用 itemtemplate 处理的一个示例。但为了使用它，您必须设置`EnableSortingAndPagingCallbacks`为`false`. 并为此在后面的代码中做一些额外的工作。我只在我的网格上使用了分页，所以我可以提供这个示例。标记：

```
<asp:GridView ID="gridViewTicketsClosed" runat="server" CellPadding="4" ForeColor="#333333"
    GridLines="None" EnableSortingAndPagingCallbacks="False" AutoGenerateColumns="False"
    AllowPaging="True" OnRowDataBound="gridViewTicketsClosed_RowDataBound" OnPageIndexChanging="GridViewPageIndexChanging">
    <PagerSettings Mode="NextPrevious" NextPageText="Next" PreviousPageText="Previous" />
    <Columns>
        <asp:BoundField DataField="TicketId" HeaderText="Nr.">
            <ItemStyle Width="20px" />
        </asp:BoundField>
        <asp:BoundField DataField="DateStarted" DataFormatString="{0:dd/MM/yyyy HH:mm}" HeaderText="Date">
            <ItemStyle Width="100px" />
        </asp:BoundField>
        <asp:BoundField DataField="President" HeaderText="President">
            <ItemStyle Width="100px" />
        </asp:BoundField>
        <asp:BoundField DataField="TicketTypeId" HeaderText="TicketType"></asp:BoundField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:HyperLink ID="lnkActionLog" runat="server" Text="Log"></asp:HyperLink>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

后面的代码：

```
protected void gridViewTicketsClosed_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var hyperLink = e.Row.FindControl("lnkActionLog") as HyperLink;
        if (hyperLink != null)
            hyperLink.NavigateUrl = CreateShowActionLogUrl(e.Row) + "?id="+ DataBinder.Eval(e.Row.DataItem, "TicketId");
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T16:52:43.290

`NavigateUrl`在您的属性中包含以下内容

```
NavigateUrl='<%# Eval("Sl_no", 
              "frmAddIntake.aspx?id=Dashboard&intake_id={0}") %>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T07:20:26.710

```
<asp:TemplateField HeaderText = "Id" ItemStyle-Width="30">
            <ItemTemplate>
                <asp:HyperLink runat="server" NavigateUrl='<%# Eval("TheQueryStringParameterComingFromDB", "~/PageYouWantTONavigateTo.aspx?Id={0}") %>'
                    Text='GiveTextYouWantToDisplay' />
            </ItemTemplate>
        </asp:TemplateField> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-06T01:07:16.970

这对我来说很有效。没有其他要求。

```
<asp:HyperLink ID="HyperLink1" runat="server" 
                        Text="URL Text" NavigateUrl='<%# "URL.aspx?your_parameter=" + Eval("ID") %>'></asp:HyperLink> 
```

# web - 另一个域中的文件夹访问

> ID：11263883
> 
> 赞同：0
> 
> 时间：2012-06-29T14:42:38.910
> 
> 标签：web, dns

我有一个结构简单的网站：

```
\public_html
  {files}.php
  \files
  \es 
```

对于 public_html，我创建了一个域 site.com，对于 public_html/es，我创建了 spanishsite.com 域。问题是：我需要访问西班牙域中的 FILES 目录......那么，我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T02:07:23.253

听起来您正在尝试链接到该文件，而不仅仅是从 PHP 中读取它。当然，由于您`/es/`在该域上提供服务，因此您的网络服务器不会提供该目录上方的文件。

你有两个选择：

1）最简单的，只是符号链接并链接`files`到`es/`它：

```
cd es/
ln -s ../files 
```

在您的 PHP 文件中，链接到 files/，就好像它在`es/`. 如果您的服务器运行 Windows，则必须使用`mklink`ln 而不是。检查手册以了解您需要的确切参数。

2) 将您的网络服务器配置为`/files/`从不同的路径为西班牙域的目录提供服务；`files`准确地说是当前所在的路径。如何做到这一点在很大程度上取决于您使用的网络服务器，并且您必须在任何时候更改它时重新配置它，以及在任何测试服务器上复制此配置等。

# objective-c - xcode NSURLConnection NSMutableData appendData 仅适用于某些类型的内容

> ID：11263887
> 
> 赞同：0
> 
> 时间：2012-06-29T14:42:51.457
> 
> 标签：objective-c, nsurlconnection

我创建了一个类，用于在我的 iOS 应用程序中获取服务器端数据，基于 NSURLConnection，将获取的数据转发给委托进行处理。

下载 text/json 时，这非常有效。

我现在正在扩展以获取一些 png 图像，但无法获取数据。

我发现它在 didReceiveData 调用中中断，其中 [receivedData appendData:data] 对接收到的图像数据没有做任何事情。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    [receivedData appendData:data];
} 
```

我将数据放入此方法（NSData >0 字节），但调用 [receivedData appendData:data] 不会更改 receivedData 的大小（仍为 0 字节）。

由于这适用于文本而不是图像数据，我相信它与字符集或编码有关，但在这方面找不到任何东西。

任何帮助表示赞赏。

* * *

**使用请求的代码示例**更新：****

 **在进行调用的方法中：

```
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    // Create the NSMutableData to hold the received data.
    receivedData = [NSMutableData data];
    // Also tried with no change in behaviour
    // receivedData = [[NSMutableData alloc] initWithLength:0];
} else {
    // Inform the user that the connection failed.
} 
```

我的`didReceiveResponse`：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
} 
```

* * *

**另一个更新**

结果发现问题归结为并发性，因为我同时触发了该类的三个实例以异步获取三个文件。问题是第一个版本`receivedData`在完成破坏其他两个实例的响应时发布。

我如何确保类的每个实例都有自己的`receivedData`可玩性？

* * *

**最后的注意事项** 使用 MutableArrays 的字典来检索数据可以解决并发问题。

似乎将 MutableArray 定义为类的私有属性也会为每个实例创建一个数组。

```
@interface MyClass(){
    @private NSMutableData * receivedData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:51:15.503

你有没有初始化`receivedData`？

这样的事情会做到这一点：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    if(!receivedData)
    {
        receivedData = [NSMutableData data];
    }
    [receivedData appendData:data];
} 
```

一种更快的方法是在您启动实际请求之前对其进行初始化（这样就不会在每次接收到数据时都对其进行检查）。

还记得`receivedData`在您的请求完成并且您完成提取它时为零，以便为下一个请求做好准备。

* * *

**这是并发请求的一种解决方案：**

代替单个 NSMutableData 属性，创建一个 NSMutableDictionary 以便您可以一次挂起多个实例。

`NSMutableDictionary *receivedData`

现在，一旦你把你的 NSURLConnection （我们称之为它`urlConnection`）放在一起，你就可以创建一个新的唯一数据对象并将它放入你的字典中。您应该能够使用连接的字符串描述作为您的唯一键。

```
if(!receivedData)
  receivedData = [NSMutableDictionary dictionary];

NSMutableData *dataObject = [NSMutableData data];
[receivedData setObject:dataObject forKey:[urlConnection description]]; 
```

现在你可以这样做：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
  NSMutableData *currentData = (NSMutableData*)[receivedData objectForKey:[connection description]];
  [currentData.appendData:data];
} 
```

`removeObjectForKey`连接完成后，请记住在不再需要数据对象时调用以删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:33:49.743

我找到了一种可行的解决方法，即将在 JSON 响应中编码的 base64 数据库发送到设备，并在设备上本地使用文件之前对其进行解码。

这也证明非常有用，因为它可以在一个请求中传输所需的三个文件。**

# c# - Azure 表存储：字符串 '' 不是有效的 AllXsd 值

> ID：11263889
> 
> 赞同：0
> 
> 时间：2012-06-29T14:43:04.887
> 
> 标签：c#, azure, azure-table-storage

当我尝试从表存储中读取时，出现以下异常。我在添加`DateTime?`属性后得到它。

**例外：**

```
The current value 'String.Empty' type is not compatible with the expected 'System.DateTime' type. 
```

**内部异常：**

```
The string '' is not a valid AllXsd value. 
```

我想到了以下解决方案：

1.  我让提供者将不存在的值映射到 null
2.  用日期更新对象（但我无法获取它？）

有没有人对如何解决这个问题有更好的想法？

**堆栈跟踪：**

```
System.InvalidOperationException: The current value 'String.Empty' type is not compatible with the expected 'System.DateTime' type. ---> System.FormatException: The string '' is not a valid AllXsd value.
   at System.Xml.Schema.XsdDateTime..ctor(String text, XsdDateTimeFlags kinds)
   at System.Xml.XmlConvert.ToDateTime(String s, XmlDateTimeSerializationMode dateTimeOption)
   at System.Data.Services.Client.ClientConvert.ChangeType(String propertyValue, Type propertyType)
   --- End of inner exception stack trace ---
   at System.Data.Services.Client.ClientConvert.ChangeType(String propertyValue, Type propertyType)
   at System.Data.Services.Client.AtomMaterializer.MaterializeDataValue(Type type, AtomContentProperty atomProperty, DataServiceContext context)
   at System.Data.Services.Client.AtomMaterializer.MaterializeDataValues(ClientType actualType, List`1 values, Boolean ignoreMissingProperties, DataServiceContext context)
   at System.Data.Services.Client.AtomMaterializer.MaterializeResolvedEntry(AtomEntry entry, Boolean includeLinks)
   at System.Data.Services.Client.AtomMaterializer.Materialize(AtomEntry entry, Type expectedEntryType, Boolean includeLinks)
   at System.Data.Services.Client.AtomMaterializer.DirectMaterializePlan(AtomMaterializer materializer, AtomEntry entry, Type expectedEntryType)
   at System.Data.Services.Client.AtomMaterializerInvoker.DirectMaterializePlan(Object materializer, Object entry, Type expectedEntryType)
   at System.Data.Services.Client.ProjectionPlan.Run(AtomMaterializer materializer, AtomEntry entry, Type expectedType)
   at System.Data.Services.Client.AtomMaterializer.Read()
   at System.Data.Services.Client.MaterializeAtom.MoveNextInternal()
   at System.Data.Services.Client.MaterializeAtom.MoveNext()
   at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
```

模型

```
class Car : TableServiceEntity {

 public DateTime? LastUpdated { get; set; }
 public DateTime? LastUsed { get; set; }

// more properties

} 
```

询问

```
 var sx = this.GetServiceContext();
 return (from x in sx.CreateQuery<Car>("Table") select x).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:01:32.680

如果有人用谷歌搜索，我找到了解决方案：

我正在使用 Azure 存储资源管理器，当我在测试时更新另一个属性时，它在其中一个实体中保存了一个空字符串而不是可以为空的日期。

# facebook - 通过多用户 Saas 发布到 Facebook

> ID：11263890
> 
> 赞同：0
> 
> 时间：2012-06-29T14:43:06.607
> 
> 标签：facebook

开发允许用户登录和管理他们的客户的 CRM Saas。我想为他们提供的是能够将我们 CRM 中的评论发布到他们的 Facebook 墙上。在单独的“Facebook”部分或他们的仪表板上。

如何让每个用户能够将他们的 Facebook 墙添加到应用程序。他们必须以某种方式授予我们权限或将权限添加到我们的系统，我们为每个用户存储这些权限（由他们的登录信息绑定）

我是否需要使用 Facebook API 开发应用程序，或者我们现在有什么东西吗？

我们现在有大约 500 个用户，我们希望让这个实现尽可能顺利。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:22:18.600

是的，您需要在 Facebook 注册一个 Facebook 应用程序才能获得一个 API ID 和可用于访问 API 的密钥。您需要使用 Facebook Connect 让用户登录到您的网站，然后将 access_token 和 user_id 保存到您的数据库中，这样您就知道每个用户是谁，以及他们拥有哪个 Facebook 帐户。

您可以遵循 Facebook 身份验证指南，然后阅读将内容发布到 Facebook Walls 和 Pages 的内容。

不能更具体，因为答案将涉及大量代码和解释。你应该学习的东西。

# bugzilla - 在 @INC 中找不到 Math/Random/ISAAC.pm

> ID：11263894
> 
> 赞同：3
> 
> 时间：2012-06-29T14:43:24.000
> 
> 标签：bugzilla

这是一个已升级到新的共享托管服务器（仍在运行 Linux）的 bugzilla 版本。请参阅帖子底部以获取完整的错误消息。

```
./checksetup.pl does not complain of any missing modules and completes successfully 
```

有许多本地 perl 模块位于`~/perl5/lib/perl5`下面报告为缺失的模块中。

`perl -V`报告以下环境变量值（NB 已将此输出中的主文件夹的根目录替换为`~`）

```
 %ENV:
    PERL5LIB="/~/perl5/lib/perl5/x86_64-linux-thread-multi:/~/perl5/lib/perl5:/~/perl5/lib/perl5/x86_64-linux-thread-multi:/~/perl5/lib/perl5"
    PERL_MM_OPT="INSTALL_BASE=/~/perl5"
  @INC:
    /~/perl5/lib/perl5/x86_64-linux-thread-multi
    /~/perl5/lib/perl5/x86_64-linux-thread-multi
    /~/perl5/lib/perl5
    /~/perl5/lib/perl5/x86_64-linux-thread-multi
    /~/perl5/lib/perl5/x86_64-linux-thread-multi
    /~/perl5/lib/perl5
    /usr/local/lib64/perl5
    /usr/local/share/perl5
    /usr/lib64/perl5/vendor_perl
    /usr/share/perl5/vendor_perl
    /usr/lib64/perl5
    /usr/share/perl5 
```

任何帮助将非常感激。Bugzilla 是否忽略 PERL5LIB 环境变量？

```
Full error message is:
Can't locate Math/Random/ISAAC.pm in @INC (@INC contains: . lib /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5) at Bugzilla/RNG.pm line 28.
BEGIN failed--compilation aborted at Bugzilla/RNG.pm line 28.
Compilation failed in require at Bugzilla/Util.pm line 50.
BEGIN failed--compilation aborted at Bugzilla/Util.pm line 50.
Compilation failed in require at Bugzilla/Error.pm line 33.
BEGIN failed--compilation aborted at Bugzilla/Error.pm line 33.
Compilation failed in require at Bugzilla/Install/Filesystem.pm line 31.
BEGIN failed--compilation aborted at Bugzilla/Install/Filesystem.pm line 31.
Compilation failed in require at Bugzilla/Config.pm line 38.
BEGIN failed--compilation aborted at Bugzilla/Config.pm line 38.
Compilation failed in require at Bugzilla.pm line 38.
BEGIN failed--compilation aborted at Bugzilla.pm line 38.
Compilation failed in require at index.cgi line 34.
BEGIN failed--compilation aborted at index.cgi line 34. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T02:52:04.057

我认为不同之处在于您`./checksetup.pl`以自己的用户身份运行，而当您在可能是用户 www-data 的 Web 服务器中运行 Bugzilla 时。如果是这种情况，您需要配置您的 Web 服务器以查看`~/perl5/lib/perl5`.

将以下内容（在替换 foobar 之后）添加到 Apache 配置 - 如果这是您使用的 - 可能会起作用：

```
SETENV PERL5LIB /home/foobar/perl5/local/lib/perl5:/home/foobar/perl5/local/lib/perl5/x86_64-linux-gnu-thread-multi 
```

可能有帮助的两篇相关文章：（由我自己发表）

*   [在@INC 中找不到...](http://perlmaven.com/cant-locate-in-inc)
*   [如何更改 @INC 以在非标准位置查找 Perl 模块](http://perlmaven.com/how-to-change-inc-to-find-perl-modules-in-non-standard-locations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-03T15:05:36.417

在 Windows 的命令行上

```
cd c:\perl64\bin
ppm install Math-Random-ISAAC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T21:47:54.387

此答案适用于 Windows，但您也可以将其调整为适用于 Linux。

* * *

**Math::Random::ISAAC**
**1\. 下载** [Math-Random-ISAAC-1.004.tar.gz](http://cpan.metacpan.org/authors/id/J/JA/JAWNSY/Math-Random-ISAAC-1.004.tar.gz)
**2\. 在控制台上打开“cpan”控制台**。
**3.进入下载文件的路径**

> C:>cd C:\strawberry\cpan
> C:\strawberry\cpan>cd Math-Random-ISAAC-1.004

**4\. perl Makefile.PL**

> C:\strawberry\cpan\Math-Random-ISAAC-1.004>perl Makefile.PL
> 
> 为 Math::Random::ISAAC 编写 Makefile 编写 MYMETA.yml 和 MYMETA.json

**5\. 制作**

> C:\草莓\cpan\Math-Random-ISAAC-1.004>dmake
> 
> cp lib/Math/Random/ISAAC.pm blib\lib\Math\Random\ISAAC.pm
> cp lib/Math/Random/ISAAC/PP.pm blib\lib\Math\Random\ISAAC\PP.pm

**6\. dmake 测试**

> C:\strawberry\cpan\Math-Random-ISAAC-1.004>dmake 测试
> C:\strawberry\perl\bin\perl.exe "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib \lib', 'blib\arch')" t/*.tt/01compile.t
> ........ 好
> t/02sequence.t .... ... 好的
> t/03memory.t .... 跳过：测试内存泄漏所需的 Test::LeakTrace
> t/04uniform.t .... .... 已跳过：安装
> t/05fallback.t不需要作者测试.............已跳过：Test::Without::Module 和 Math::Random::ISAAC::XS测试回退能力所需的
> t/06exceptions.t ...... ok
> t/release-dist-manifest.t .. 跳过：这些测试用于发布候选测试
> t/release-kwalitee.t ....... 已跳过：这些测试用于候选发布测试
> t/release-pod-coverage.t ...已跳过：这些测试用于候选发布测试
> t/release-pod- syntax.t ..... skipped：这些测试用于发布候选测试
> t/release-portability.t ....skipped：这些测试用于发布候选测试 所有测试都成功。
> Files=11, Tests=607, 15 wallclock secs (0.17 usr + 0.14 sys = 0.31 CPU)
> 结果：PASS

**7.dmake安装**

> C:\strawberry\cpan\Math-Random-ISAAC-1.004>dmake install 安装 C:\strawberry\perl\site\lib\Math\Random\ISAAC.pm 安装 C:\strawberry\perl\site\lib\Math\ Random\ISAAC\PP.pm 将安装信息附加到 C:\strawberry\perl\lib/perllocal.pod

这应该有效。

# css - 使用 nth-child(odd) 的行为似乎不像我预期的那样

> ID：11263900
> 
> 赞同：0
> 
> 时间：2012-06-29T14:44:00.227
> 
> 标签：css, css-selectors

我有一块像这样的CSS：

```
.formTable:nth-child(odd)
{
    background-color: #eeb;
} 
```

我还有一个具有以下基本结构的表单（显然不是完整的 HTML）。值得注意的是`dynTable1`在某些情况下加载了 AJAX 调用。

```
<table class="formTable" id="table1" />
<table class="formTable" id="table2" />
<table class="formTable" id="table3" />
<table class="formTable" id="table4" />
<div id="divDynamic1" class="fadeIn">
    <table class="formTable" id="dynTable1" />
</div> 
```

对我来说没有意义的是，`nth-child`选择器将针对`table2`,`table4`和`dynTable1`Firefox 和 IE9 （我没有尝试其他人）。我本来希望`dynTable1`不会将样式应用于它。显然，我对如何`nth-child`工作的理解不足，但是虽然我的 Google-fu 发现了许多如何使用的示例，但`nth-child`我很难找到一个简单的解释来解释它在这种情况下是如何工作的。所以，我转向SO。

为什么`nth-child`会有这样的行为，我怎样才能让它在`table`class 的元素之间严格交替`formTable`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:53:24.667

`:nth-child(odd)`*应用于它们自己的父容器的*第 1、3、5 等子元素，而不是它们的子元素。我猜`.formTable`在它们的父容器中的 s 之前还有一些其他元素？这就是为什么每第二个表都匹配规则，并且`#dynTable1`匹配是因为它是`#divDynamic1`.

**编辑：**既然我理解了你想要达到的目标，我可以建议这样的事情：

```
.wrapper > div > .formTable
{
    background-color: #ccc;
}

.wrapper > div:nth-child(odd) > .formTable:nth-child(odd)
{
    background-color: #eeb;
}

.wrapper > div:nth-child(even) > .formTable:nth-child(even)
{
    background-color: #eeb;
}
​ 
```

它所做的是重置`div`s 中表格的背景颜色，然后为其中的表格指定新的交替规则 - 如果 s 是偶数子元素，则从灰色开始，`div`如果是奇数子元素，则从黄色开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:53:28.673

您的目标是所有`.formTable`. 即使是`#divDynamic1`. （并`odd`针对第一个，第三个，第五个等元素，这就是为什么要针对第一个表`#divDynamic1`）

尝试使用包装器来指定您只想定位孩子：

```
.wrapper > .formTable:nth-child(odd)
{
    background-color: #eeb;
}​ 
```

这是给你的[小提琴](http://jsfiddle.net/4SYzu/)。

# c++ - 如何在 C++ 中获取 char 的最低有效位

> ID：11263908
> 
> 赞同：1
> 
> 时间：2012-06-29T14:44:23.033
> 
> 标签：c++, char

我有一个 char 变量，我只对两个最不重要的十六进制值感兴趣。我如何放弃其他价值观？例子：

```
 char input = 0xFFFFFFD1; 
```

我想：

```
 output = 0xD1; 
```

我试过了：

```
output = (input&0x000000FF); 
```

但我只是得到：

```
output = 0xFFFFFFD1 
```

我该如何解决这个挑战？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:47:15.203

在您的平台上很可能`char`是 8 位的。在这种情况下，这个：

```
char input = 0xFFFFFFD1; 
```

与此相同：

```
char input = 0xD1; 
```

我还假设那`output`是 type `int`。在这种情况下，你需要这个：

```
int output = (unsigned char)input & 0xFF; 
```

演示：http: [//ideone.com/FOdRG](http://ideone.com/FOdRG)。

[*如果这不是问题，那么您将需要更新您的问题以包含您正在使用的实际代码。*]

# sql - 使用光标或循环创建视图

> ID：11263909
> 
> 赞同：0
> 
> 时间：2012-06-29T14:44:27.087
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我已经设法从一个游标创建一个表，该游标从我的数据库中类似命名的表中插入行。它成功运行，但我想创建一个视图，这样我就不需要更新我的原始查询。我可能会使用游标走错路线，但我当前的查询是：

```
use LaganPDM
set nocount on 
declare @table varchar(128)
declare @cmd varchar(500) 
create table SPECIAL_CASE_FORMS_2 (table_name varchar(128), flods_id numeric(22,0) PRIMARY KEY, lgncc_id numeric(22,0), case_enquiry_id numeric(22,0),amount varchar(4000), costcode varchar(4000), jobcompletedate varchar(4000), jobreleasedate varchar(4000),paymentstatus varchar(4000))
declare tables cursor for
select table_name
from information_schema.tables
   where table_name like '%SPECIAL_UP_C00%'
and left(right(table_name, 24),9) > '101000363'
and not left(right(table_name, 24),9) in('101000487', '101000507', '101000510')
open tables
fetch next from tables into @table
while @@fetch_status = 0
begin
  set @cmd = 'select ''' + @table + ''', * from ' + @table 
insert into SPECIAL_CASE_FORMS_2 exec (@cmd)
  fetch next from tables into @table
END
CLOSE tables 
DEALLOCATE tables
select  * from SPECIAL_CASE_FORMS_2 
```

我试图适应这一点并创建一个视图，但没有运气。任何建议都将不胜感激，即使这意味着走不同的路线。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:15:03.777

正如评论中已经说过的，您不能在视图中使用游标，只能在存储过程中使用。

要将查询结果放入每次将新表添加到数据库时自动更新的表中，您可以执行以下操作：

首先，您已经在数据库中创建了一个名为的永久表`SPECIAL_CASE_FORMS_2`。
您可以将此表用于现有报告，因此您需要确保它经常更新。
您甚至不需要在每次执行查询时创建表......只需在数据库中手动创建一次，然后将`create table`查询开头的行替换为：

```
delete from SPECIAL_CASE_FORMS_2 
```

另外，您可以在最后删除此行：

```
select  * from SPECIAL_CASE_FORMS_2 
```

现在[创建一个](http://databases.about.com/od/sqlserver/ss/sql_server_agent.htm)执行查询的 SQL Server 代理作业。
您可以将完整的查询粘贴到[“命令”字段中](http://databases.about.com/od/sqlserver/ss/sql_server_agent_5.htm)，也可以将查询保存为存储过程并在作业中执行存储过程。
*（我更喜欢后者，因为这样，实际代码与表在同一个数据库中 - SQL Server 代理作业保存在`msdb`系统数据库中）*

安排作业，使其每天运行一次。

而已！

现在，该作业将每天删除并重新填充`SPECIAL_CASE_FORMS_2`一次表格，您可以在所有报告中使用该表格。
如果将新表添加到数据库中，则该`SPECIAL_CASE_FORMS_2`表中的数据也会在第二天出现在表中。
*（如果您在第二天之前需要它，只需安排 SQL Server 代理作业，使其每天运行几次）*

此外，您的报告会以这种方式运行得更快，因为它们只是从预先填充的表格中获取数据。
您上面的查询循环遍历多个表并将数据插入到一个新表中，因此对每个报告再次执行此操作会更慢并导致数据库负载更大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-30T00:43:07.397

我认为 CTE 比光标更合适，所以也许试试这个

```
use LaganPDM 

Create view as [dbo].[test]
With cteTables as (
select
*
from 
information_schema.tables 
where table_name like '%SPECIAL_UP_C00%' and left(right(table_name, 24),9) > '101000363' and not left(right(table_name, 24),9) in('101000487', '101000507', '101000510'))
Select
* -- because it's a view, you'll have to list all the columns instead of just using select *
From
CteTables 
```

不过，关于 CTE 的警告的话，如果您浏览大量记录，它可能会出现性能问题，所以请记住这一点。

# android - 我们如何在android中重置或清空布局

> ID：11263911
> 
> 赞同：6
> 
> 时间：2012-06-29T14:44:34.310
> 
> 标签：android

嗨，我正在开发一个创建动态组件（如按钮等）的应用程序。当发生某种情况时，我想删除或清空我的布局。任何人都可以指导或建议我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T14:48:17.997

在布局上使用函数**removeAllViews() 。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T14:46:11.847

所有 Layout 类都是 ViewGroup 的子类，因此您可以使用[ViewGroup.removeAllViews()](http://developer.android.com/reference/android/view/ViewGroup.html#removeAllViews%28%29)方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T08:02:57.723

**`yourLayout.removeAllViews();`**应该可以正常工作....

# java - 从枚举调用函数

> ID：11263913
> 
> 赞同：0
> 
> 时间：2012-06-29T14:44:40.603
> 
> 标签：java, android, function, enumeration

我在 JAVA 代码中有枚举`ERequestTypes`我的枚举包含 20 多个元素，每个元素都是我的 JAVA 代码中的函数的名称。现在我想做以下事情而不是编写`switch(ERequestTypes) case`，并且在这种情况下以这种方式调用函数：

```
switch(ERequestTypes a) {
    case ERequestTypes.Initialize:
        Initialize();
    case ERequestTypes.Uninitialize:
        Uninitialize();
} 
```

我想用一条线来做。枚举中的所有函数都具有相同的参数并返回相同的 int 值。我怎么能做到这一点？可能像在 C++ 或其他东西中一样在枚举中保留函数的指针。请帮忙 ！

```
class CRequestValue {
    /**
     * Constructor.
     * 
     * @param aName - Name of the request.
     * @param aCode - Code of the request.
     */
    public CRequestValue(String aName, int aCode) {
        this.mName = aName;
        this.mCode = aCode;
    }

    private String mName;
    private int    mCode;

    public String GetName() {
        return this.mName;
    }

    public int GetCode() {
        return this.mCode;
    }

} /* class CRequestValue **/

enum ERequestTypes
{
    Initialize(new CRequestValue("Initialize", 0)),
    Uninitialize(new CRequestValue("Uninitialize", 1)),
    GetDeviceInfoList(new CRequestValue("GetDeviceInfoList", 2)),
    GetDeviceInfo(new CRequestValue("GetDeviceInfo", 3));

    private CRequestValue mRequestValue;

    private ERequestTypes(CRequestValue aRequestValue) {
        this.mRequestValue = aRequestValue;
    }

    public String GetName() {
        return this.mRequestValue.GetName();
    }

    public int GetCode() {
        return this.mRequestValue.GetCode();
    }

} /* enum ERequestTypes **/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:09:04.427

我不确定您的目标是什么，但您可以使用多态性而不是 switch 块，例如：

```
interface Invokable {
    int init(Object arg);
    int uninit(Object arg);
}

enum Request {
    INIT() {
        @Override
        public int invoke(Invokable invokable, Object arg) {
            return invokable.init(arg);
        }
    },
    UNINIT() {
        @Override
        public int invoke(Invokable invokable, Object arg) {
            return invokable.uninit(arg);
        }
    },
    ;
    public abstract int invoke(Invokable invokable, Object arg);
}

Invokable i = ....;
Object arg = ....;
Request r = Request.INIT;
r.invoke(i, arg); // should invoke Invokable.init(arg);
r = Request.UNINIT;
r.invoke(i, arg); // should invoke Invokable.uninit(arg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:58:44.700

你正在寻找[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

```
ErequestTypes a = <init>;
Object o = Class.forName(<your class name>).getMethod(a.getName(), <argtype>.class).invoke(<instance of your class, or null if static method>, <arg>); 
```

请注意，如果您已经知道方法所在的类，则不需要 Class.forName。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:41:45.677

您可以使用 Pavel 提到的多态性，但还有另一种解决方案——您根本不需要枚举。

将每个函数设为自己的对象并像枚举本身一样传递/使用这些对象的实例非常简单。

还有一些使用匿名内部类的解决方案（将它们附加到对象实例并传递这些实例），但我认为这通常不像只制作单独的对象那样可重用。

这是一些假代码：

```
public void MainClass {
    private final Runnable init=new Runnable {
        run() {
            // Initialize the system
        }
    }
    private final Runnable uninit = new Runnable() {
        run() {
            // Uninitialize the system
        }
    }

public someMethod() {

    // At this point you can treat the instances as you would any variable...
    Runnable nextOperation = init;

    // and executing whichever one you have is as simple as:
    nextOperation.run(); 
```

如果您希望“类型安全”（与枚举一样），请不要扩展 Runnable，而是创建一个扩展 Runnable 的新类，然后扩展该类。

由于这些是“内部类”（在另一个类的上下文中定义），它们可以访问和修改所有类成员变量，使它们更像独立方法而不是独立类。

最后请注意，由于每个类都是匿名在线定义的，因此它们几乎与创建枚举一样难以创建“重复项”，因此您通常可以将它们完全视为枚举（例如，使用“==”而不是 .equals()。

# ruby-on-rails-3 - 减少 Herokuapp 中的最终用户延迟

> ID：11263915
> 
> 赞同：2
> 
> 时间：2012-06-29T14:44:48.163
> 
> 标签：ruby-on-rails-3, heroku

[这个问题是我之前关于](https://stackoverflow.com/questions/11256053/scaling-dynos-with-heroku)在 heroku 中缩放的问题的后续问题。我注意到的是，当我使用我的应用程序时，感觉并不那么流畅——我使用过像 YSlow 这样的插件，它们始终告诉我大部分时间都花在了服务器端生成 HTML 上。New Relic 似乎表明我的应用程序在请求队列中花费了大量时间，如下所示：

![NewRelicGraph1](../Images/86029dda76bebb4dd1316b42ad63f5d0.png)

和这里：

![NewRelicGraph2](../Images/9898c0b72fc52e7c64d3abead2eaabf9.png)

但是，我也有一些信息向我展示：

![NewRelicGraph3](../Images/11d3b75e505c6a5f7405c0457b3efa3f.png)

在服务器上 10.7 毫秒的处理时间与用户体验的 1.3 秒响应时间之间，这似乎是一个非常非常大的差异。这是什么意思？减少用户延迟的最佳方法是什么？（再次，我是一个完整的新手，非常感谢所有帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:46:31.753

你应该**改用 unicorn**。这仅适用于 Cedar 堆栈！基本上无需再购买，它将为您提供更多的测功机。

## 关于如何的快速概要：

在您的 Gemfile 中：

```
gem 'unicorn' 
```

创建 Rails.root/config/unicorn.rb

```
worker_processes 4 # amount of unicorn workers to spin up
timeout 30  # restarts workers that hang for 30 seconds 
```

创建 Rails.root/Procfile

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb 
```

提交并将其推送到heroku，然后**您需要对其进行调整**（使用worker_process 编号进行实验）。每个测功机都有内存限制。如果您有太多工人并达到该限制，那么测功机将减速至爬行。

更多详细信息请参考本文：http: [//michaelvanrooijen.com/articles/2011/06/01-more-concurrency-on-a-single-heroku-dyno-with-the-new-celadon-cedar-stack/](http://michaelvanrooijen.com/articles/2011/06/01-more-concurrency-on-a-single-heroku-dyno-with-the-new-celadon-cedar-stack/)

# android - 如果软键盘可见，则 ScrollView 不会滚动

> ID：11263917
> 
> 赞同：8
> 
> 时间：2012-06-29T14:45:04.403
> 
> 标签：android, android-layout, scrollview

我正在为登录屏幕使用简单的布局，其中包含顶部的栏和用户登录或进入注册活动的必要项目。

在虚拟键盘出现之前，所有元素都很好地适合屏幕。Android 软键盘遮住了表单的一部分，我想使用 ScrollView 以便用户可以滚动并能够看到所有元素。

但是，即使使用 ScrollView，我也无法滚动查看页面底部：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true" >
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFCB05"
android:orientation="vertical"
android:isScrollContainer="true"
android:gravity="top" >

<include
    android:id="@+id/include1"
    android:layout_width="fill_parent"
    android:layout_height="50dip"
    layout="@layout/actionbar_layout" />

<LinearLayout 
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF"
android:orientation="vertical"
android:gravity="center_vertical"
android:layout_below="@+id/include1"
 >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/usuario"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000" />

    <EditText
        android:id="@+id/txtUsuario"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="5dp"
        android:ems="10"
        android:hint="@string/usuario" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_marginTop="15dip" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/senha"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000" />

    <EditText
        android:id="@+id/txtSenha"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView2"
        android:layout_centerVertical="true"
        android:layout_marginTop="5dip"
        android:ems="10"
        android:hint="@string/senha"
        android:inputType="textPassword" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="right" >

    <Button
        android:id="@+id/logarBtn"
        android:layout_width="93dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="30dip"
        android:layout_marginTop="15dip"
        android:layout_marginBottom="15dip"
        android:text="@string/logar" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center_horizontal" >

    <TextView
        android:id="@+id/registerBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/logarBtn"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dip"
        android:layout_marginBottom="60dip"
        android:linksClickable="true"
        android:text="@string/cadastrar"
        android:textColor="#0000CC"
        android:textSize="18dp" />
</LinearLayout>

</LinearLayout>

</RelativeLayout>
</ScrollView> 
```

我想我可以这样做：[Android Soft Keyboard Obscures EditTexts in ScrollView](https://stackoverflow.com/questions/10388326/android-soft-keyboard-obscures-edittexts-in-scrollview)但这似乎不是最佳实践。

有谁知道使它正确滚动的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-28T00:11:11.370

```
public class CustomScrollView extends ScrollView {

  private int scrollOffset = 0;

  public CustomScrollView (final Context context, final AttributeSet attrs) {
    super(context, attrs);
  }

  public void setScrollOffset (final int scrollOffset) {
    this.scrollOffset = scrollOffset;
  }

  @Override
  protected int computeScrollDeltaToGetChildRectOnScreen (final Rect rect) {
    // adjust by scroll offset
    int scrollDelta = super.computeScrollDeltaToGetChildRectOnScreen(rect);
    int newScrollDelta = (int) Math.signum(scrollDelta) * (scrollDelta + this.scrollOffset);
    return newScrollDelta;
  }
} 
```

使用此自定义滚动视图而不是正常的滚动视图。改变scrollOffset的值来达到想要的效果（scrollOffset = 10表示打开软键盘时会向下滚动额外的10dp）确保 `android:windowSoftInputMode="adjustResize"`在activity中添加

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T09:57:44.830

查看以下链接：

[Android：ScrollView 不使用键盘滚动](https://stackoverflow.com/questions/15343355/android-scrollview-not-scrolling-with-keyboard-out)

这个解决方案对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T02:53:53.570

理想的做法如下。

```
android:windowSoftInputMode="adjustResize" 
```

但是，当视图已经适合屏幕时，即使软键盘打开，滚动也将被禁用。

# entity-framework - 执行 INSERT 时，Entity Framework 同时执行 INSERT 和 UPDATE 存储过程

> ID：11263918
> 
> 赞同：1
> 
> 时间：2012-06-29T14:45:04.610
> 
> 标签：entity-framework, stored-procedures

我有这个存储过程，它映射在 Entity Framework 4.1 对象中。呼叫是在

```
using (TransactionScope transaction = new TransactionScope())
{
            try
            {
                DbEntity.Car.AddObject(CarInfo);
                DbEntity.SaveChanges();

/* Other object savings */

                transaction.Complete();

                DbEntity.AcceptAllChanges();
            }
            catch (Exception exp)
            {
                throw exp;
            }
            finally
            {
                DbEntity.Dispose();
            }
} 
```

我看到当前已完成存储过程映射。如果我在 MS SQL 服务器上单独执行存储过程，它会正确执行。

这是存储过程

```
ALTER PROCEDURE [dbo].[Carinsert] @Qty               INT
                              ,@StyleID          INT
                              ,@TFee             MONEY
                              ,@HWayTax          MONEY
                              ,@OFees            MONEY
                              ,@OFeesDescription NTEXT
                              ,@MUp              DECIMAL(18, 4)
                              ,@BAss             MONEY
                              ,@PriceMSRP        MONEY
                              ,@PriceSpecial     MONEY
AS
BEGIN
  SET nocount ON

  DECLARE @PTotal MONEY
  DECLARE @TaxFeesNet MONEY
  DECLARE @CarID INT

  SET @TaxFeesNet = Isnull(@TFee, 0) + Isnull(@HWayTax, 0)
                    + Isnull(@OFees, 0)

  IF( @PriceSpecial IS NULL )
    BEGIN
        SET @PTotal = @PriceMSRP + @TaxFeesNet
    END
  ELSE
    BEGIN
        SET @PTotal = @PriceSpecial + @TaxFeesNet
    END

  INSERT INTO Car
              (Qty
               ,StyleID
               ,MUp
               ,BAss
               ,PriceMSRP
               ,PriceSpecial
               ,TFee
               ,HWayTax
               ,OFees
               ,OFeesDescription
               ,PriceTotal)
  VALUES      (@Qty
               ,@StyleID
               ,@MUp
               ,@BAss
               ,@PriceMSRP
               ,@PriceSpecial
               ,@TFee
               ,@HWayTax
               ,@OFees
               ,@OFeesDescription
               ,@PTotal)

    SELECT Scope_identity() AS CarID
END 
```

如果我在 MS SQL 上执行此操作，它会将表中的 PriceTotal 列计算为 3444.00，这是正确的。

```
 @Qty= 5,
    @StyleID = 331410,
    @TFee = NULL,
    @HWayTax = NULL,
    @OFees = NULL,
    @OFeesDescription = NULL,
    @MUp = 4,
    @BAss = 10000,
    @PriceMSRP = 20120,
    @PriceSpecial = 3444 
```

当我运行 MVC Web 应用程序时，我调试并看到这些是传递的值，PriceTotal 达到 20120.00

我无法弄清楚为什么它不进行 IF ELSE 计算并使用价格。

有没有人看到什么奇怪的东西？这已经令人生畏了好几天了。任何帮助表示赞赏。谢谢

**更新** 我更新了标题以更好地指导他人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:04:56.617

在发布问题几分钟后，我想通了。

实际上有2个错误。

1.  即使我尝试插入新记录，实体框架也使用了 UPDATE 存储过程。只是为了记录，UPDATE 存储过程需要 CarID [主键]。可能是 EF 首先执行 INSERT 然后立即执行 UPDATE，即使是为了创建新记录？

2.  UPDATE sproc 有一个使用 <> 检查 NULL 的错误。它应该是 IS NOT NULL

无论如何，现在这是一个更大的问题。当我只想创建一条新记录时，如何强制 EF 使用 INSERT sproc 而不是 UPDATE？

我试过 DbEntityContext.ObjectStateManager.ChangeObjectState(carInfo, EntityState.Added); 并且仍然 EF 继续调用 UPDATE sproc。

# java - 在 Java 中关闭输入流

> ID：11263926
> 
> 赞同：26
> 
> 时间：2012-06-29T14:45:24.903
> 
> 标签：java, inputstream

我在 try/catch 块中有以下代码

```
 InputStream inputstream = conn.getInputStream();
 InputStreamReader inputstreamreader = new  InputStreamReader(inputstream);
 BufferedReader bufferedreader = new BufferedReader(inputstreamreader); 
```

我的问题是，当我必须在 finally 块中关闭这些流时，我是否必须关闭所有 3 个流或仅关闭*befferedreader*会关闭所有其他流？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-29T14:47:10.457

按照惯例，包装流（包装现有流）在关闭底层流时会关闭它们，因此只需要`bufferedreader`在您的示例中关闭即可。此外，关闭已经关闭的流通常是无害的，因此关闭所有 3 个流也不会受到伤害。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T14:55:25.057

通常只关闭最外层的流是可以的，因为按照惯例，它必须在底层流上触发关闭。

所以通常代码如下所示：

```
BufferedReader in = null;

try {
    in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    ...
    in.close(); // when you care about Exception-Handling in case when closing fails
}
finally {
    IOUtils.closeQuietly(in); // ensure closing; Apache Commons IO
} 
```

然而，在极少数情况下，底层流构造函数会在流已经打开的情况下引发异常。在这种情况下，上面的代码不会关闭底层流，因为外部构造函数从未被调用并且`in`为空。因此，finally 块不会关闭任何使底层流打开的东西。

从 Java 7 开始，您可以这样做：

```
 try (OutputStream out1 = new ...; OutputStream out2 = new ...) {
        ...
        out1.close(); //if you want Exceptions-Handling; otherwise skip this
        out2.close(); //if you want Exceptions-Handling; otherwise skip this            
    } // out1 and out2 are auto-closed when leaving this block 
```

在大多数情况下，您不希望在关闭时引发异常处理，因此请跳过这些显式的 close() 调用。

**编辑** 这里有一些代码供非信徒使用，使用这种模式很重要。您可能还想阅读有关[closeQuietly()](https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.Closeable...%29)方法的 Apache Commons IOUtils javadoc。

```
 OutputStream out1 = null;
    OutputStream out2 = null;

    try {
        out1 = new ...;
        out2 = new ...;

        ...

        out1.close(); // can be skipped if we do not care about exception-handling while closing
        out2.close(); // can be skipped if we ...
    }
    finally {
        /*
         * I've some custom methods in my projects overloading these
         * closeQuietly() methods with a 2nd param taking a logger instance, 
         * because usually I do not want to react on Exceptions during close 
         * but want to see it in the logs when it happened.
         */
        IOUtils.closeQuietly(out1);
        IOUtils.closeQuietly(out2);
    } 
```

`out1`当创建`out2`引发异常时，使用@Tom 的“建议”将保持打开状态。这个建议来自有人谈论`It's a continual source of errors for obvious reasons.`好吧，我可能是盲人，但这对我来说并不明显。我的模式在我能想到的每个用例中都是白痴安全的，而 Tom 的模式容易出错。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T14:49:59.577

关闭最外面的就足够了（即`BufferedReader`）。阅读[BufferedReader 的源码](http://www.docjar.com/html/api/java/io/BufferedReader.java.html)我们可以看到它在`Reader`调用自己的 close 方法时关闭了内部：

```
513       public void close() throws IOException {
514           synchronized (lock) {
515               if (in == null)
516                   return;
517               in.close();
518               in = null;
519               cb = null;
520           }
521       }
522   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T14:47:35.900

根据经验，您应该按照打开它们的相反顺序关闭所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T14:48:30.497

我会按照您打开它们的相反顺序关闭它们，就好像打开它们时会将阅读器推入堆栈，而关闭会将阅读器从堆栈中弹出一样。

最后，全部关闭后，“阅读器堆栈”一定是空的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T14:54:58.690

您只需要关闭实际资源。即使构造装饰器失败，您也应该关闭资源。对于输出，您应该在快乐的情况下刷新最多的装饰器对象。

一些并发症：

*   有时装饰器是不同的资源（一些压缩实现使用 C 堆）。
*   在悲伤的情况下关闭装饰器实际上会导致刷新，随之而来的是混乱，例如实际上并没有关闭底层资源。
*   看起来你的底层资源是 a `URLConnection`，它没有`disconnect`/`close`方法。

您可能希望考虑使用 Execute Around 习语，这样您就不必重复这种事情。

# graphics - Blender 2.6：如何撤消 3D 光标移动

> ID：11263928
> 
> 赞同：1
> 
> 时间：2012-06-29T14:45:35.327
> 
> 标签：graphics, 3d, blender

`嗨，我的鼠标非常灵敏，这就是为什么我有时会通过未设计的左键单击将 3D 光标放在错误的位置。`

 `但是当我试图单击`Control + Z`以撤消意外的 3D 光标移动时，它不会恢复。

所以**我的问题**是：有没有一种简单的方法可以让 Blender 的（2.6）3D 光标回到它*之前*的位置？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T03:43:19.223

**Shift - C**将光标移动到 (0,0,0)

另一种方法是切换到“编辑模式”并选择一条边。然后按**Shift - S**并选择“ **Cursor to selected** ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:40:35.333

@libertas 建议我在 GameDev 上发布这个问题，所以我得到了一个非常有用的[答案](https://gamedev.stackexchange.com/a/31357/17554)（感谢 @Byte56！）`

# video - 以 J2me Lwiit 形式播放 youtube 视频

> ID：11263931
> 
> 赞同：0
> 
> 时间：2012-06-29T14:45:50.207
> 
> 标签：video, java-me, youtube, lwuit

在我的项目中，我需要通过 RSS 提要以基于 j2me lwuit 的形式显示和播放 youtube 视频吗？我在互联网上找不到任何这样的例子？如何在我的 J2me 基础 LWUIT 表单上显示和播放 youtube 视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:05:07.427

据我所知，在某些情况下可能适用的唯一选择是用于`Display.getInstance().execute(url)`打开 youtube 视频本身。

# c - c linux 多线程网络

> ID：11263933
> 
> 赞同：4
> 
> 时间：2012-06-29T14:46:12.047
> 
> 标签：c, linux, multithreading, networking

我在网关上有一个网络应用程序。它接收和发送数据包。对于他们中的大多数人来说，我的网关充当路由器，但在某些情况下，它也可以接收数据包。

我应该有：

*   只有一个主线程
*   一个主线程 + 一个调度线程，负责将其提供给正确的流处理程序
*   与流一样多的线程
*   别的东西。

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:48:23.780

正确地执行多线程并不是一件简单的事情，在许多情况下，基于[选择](http://linux.die.net/man/2/select)和[朋友](http://www.techrepublic.com/article/using-the-select-and-poll-methods/1044098)的解决方案将更容易创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:52:38.507

您的案例听起来很像典型的 Unix 服务守护进程。解决您的问题的流行解决方案不是使用线程，而是使用分叉。

这个想法是您的程序侦听套接字并等待连接。一旦连接到达，它就会分叉。然后子进程继续处理连接。父进程本身只是继续循环并等待传入​​的连接。

**相对于线程的优点：**

*   非常简单的程序设计
*   没有并发问题
*   Unix/Linux系统的建立方法

**缺点：**

*   当多个连接相互交互时，事情会变得复杂（您的用例听起来不像）
*   Windows 系统上的性能损失（不是 Unix 系统！）

您可以在线找到许多代码示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T14:50:48.677

我对网络应用了解不多，但我认为是这样的：

*   如果您有能力对请求做出异步反应，您可能只使用一个线程（如在 Node.JS 中）。如果您无法异步做出反应，主线程将始终阻止其他操作。
*   如果您无法对请求做出异步反应，则必须使用多个线程。但是您可以通过许多不同的方式实现这一点：您可以为每个请求创建一个线程，或有限数量的线程，然后将它们分配给您的请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T00:27:46.153

我个人的偏好是每个连接使用一个主线程和一个工作线程。没有任何上限。我假设您的服务器将像 HTTP 服务器一样是无状态的。

对于有状态的服务器，您必须想办法控制线程数。

# asp-classic - 如何显示 100x75 的图像，并在单击时以原始尺寸显示它们。ASP 经典

> ID：11263934
> 
> 赞同：2
> 
> 时间：2012-06-29T14:46:19.787
> 
> 标签：asp-classic, vbscript

下面的代码首先将文件夹显示为超链接，您可以单击这些文件夹，如果它们包含 JPG，它将显示它们。

是否可以使这些图像显示为属性 width="100" height="75" 但仍然允许我单击它们并让它们显示原始大小？

```
<%
Const ForReading = 1, ForWriting = 2, ForAppending = 3
Const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

qfolder = request.querystring("f")
if qfolder = "" then
    folderspec = server.mappath(".")
    Set filesys = CreateObject("Scripting.FileSystemObject") 
    Set demofolder = filesys.GetFolder(folderspec) 
    Set folcoll = demofolder.SubFolders
    For Each subfol in folcoll
        folsize = left((subfol.size/1000000), 3)
        folist = folist & "<a href='?f=" & subfol.name & "'><strong title='view'></strong> " & subfol.Name & "" & vbcrlf
        folist = folist & "<BR>"  
    Next
    set filesys = nothing
    Response.Write folist

else

filepath = server.mappath(".") & "\" & qfolder
captionfile = filepath & "\captions.txt"
Set filesys = CreateObject("Scripting.FileSystemObject")
Dim SomeArray()
'caption part
    If filesys.FileExists(captionfile) then
        set file = filesys.GetFile(captionfile)
        Set TextStream = file.OpenAsTextStream(ForReading,TristateUseDefault)
        captioncount = 0
        Do While Not TextStream.AtEndOfStream
            Line = TextStream.readline
            ReDim Preserve SomeArray(captioncount)
            SomeArray(captioncount) = line
            'response.write captioncount & " " & somearray(captioncount) & "<br>"
            captioncount = captioncount + 1
            'Response.write Line
        Loop
        textStream.close
    end if

'folder part
    Set demofolder = filesys.GetFolder(filepath) 
    Set filecoll = demofolder.Files
    filecount = 0
    For Each file in filecoll
        Ext = UCase(Right(File.Path, 3)) 
        If Ext = "JPG" OR Ext = "GIF" Then
        on error resume next
        data = SomeArray(filecount)
        on error goto 0
        hrefpath = qfolder & "/" & file.name
        imagepath = "<strong>" & data & "</strong><br><a href='" & hrefpath & "' title='free image gallery' border=0><img src='" & hrefpath & "' border='" & border_size & "' title=""" & data & """ style='border-color: " & border_color & ";'></a><br>"
        filist = filist & imagepath & vbcrlf
        filist = filist & "<BR>"
        filecount = filecount + 1
        data = ""
        end if
    Next
    set filesys = Nothing
    filist = filist & "<br><small><a href='http://www.allscoop.com/' target='_blank'>allscoop free image gallery</a></small>"
%>

<h3><a href="." title="up one level">&#171;</a>
&nbsp;<%=qfolder%></h3>

<p><%=filist%></p>

<% end if %> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T01:54:52.883

您需要更新创建标签的单行：

```
imagepath = "<strong>" & data & "</strong><br><a href='" & hrefpath & _
       "' title='free image gallery' border=0><img width=100 height=75 src='" &_
       hrefpath & "' border='" & border_size & "' title=""" & data &_
       """ style='border-color: " & border_color & ";'></a><br>" 
```

以防万一这里是完整的脚本：

```
<%
Const ForReading = 1, ForWriting = 2, ForAppending = 3
Const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

qfolder = request.querystring("f")
if qfolder = "" then
    folderspec = server.mappath(".")
    Set filesys = CreateObject("Scripting.FileSystemObject") 
    Set demofolder = filesys.GetFolder(folderspec) 
    Set folcoll = demofolder.SubFolders
    For Each subfol in folcoll
        folsize = left((subfol.size/1000000), 3)
        folist = folist & "<a href='?f=" & subfol.name & "'><strong title='view'></strong> " & subfol.Name & "" & vbcrlf
        folist = folist & "<BR>"  
    Next
    set filesys = nothing
    Response.Write folist

else

filepath = server.mappath(".") & "\" & qfolder
captionfile = filepath & "\captions.txt"
Set filesys = CreateObject("Scripting.FileSystemObject")
Dim SomeArray()
'caption part
    If filesys.FileExists(captionfile) then
        set file = filesys.GetFile(captionfile)
        Set TextStream = file.OpenAsTextStream(ForReading,TristateUseDefault)
        captioncount = 0
        Do While Not TextStream.AtEndOfStream
            Line = TextStream.readline
            ReDim Preserve SomeArray(captioncount)
            SomeArray(captioncount) = line
            'response.write captioncount & " " & somearray(captioncount) & "<br>"
            captioncount = captioncount + 1
            'Response.write Line
        Loop
        textStream.close
    end if

'folder part
    Set demofolder = filesys.GetFolder(filepath) 
    Set filecoll = demofolder.Files
    filecount = 0
    For Each file in filecoll
        Ext = UCase(Right(File.Path, 3)) 
        If Ext = "JPG" OR Ext = "GIF" Then
        on error resume next
        data = SomeArray(filecount)
        on error goto 0
        hrefpath = qfolder & "/" & file.name
        imagepath = "<strong>" & data & "</strong><br><a href='" & hrefpath & "' title='free image gallery' border=0><img width=100 height=75 src='" & hrefpath & "' border='" & border_size & "' title=""" & data & """ style='border-color: " & border_color & ";'></a><br>"
        filist = filist & imagepath & vbcrlf
        filist = filist & "<BR>"
        filecount = filecount + 1
        data = ""
        end if
    Next
    set filesys = Nothing
    filist = filist & "<br><small><a href='http://www.allscoop.com/' target='_blank'>allscoop free image gallery</a></small>"
%>

<h3><a href="." title="up one level">&#171;</a>
&nbsp;<%=qfolder%></h3>

<p><%=filist%></p>

<% end if %> 
```

# c# - 更改多边形的点

> ID：11263936
> 
> 赞同：3
> 
> 时间：2012-06-29T14:46:22.563
> 
> 标签：c#, wpf, data-binding, polygon, point

**解决方案** [窗口拖动时的动态边距](https://stackoverflow.com/questions/11327398/dynamic-margin-on-window-drag#comment14917015_11327398)

所以我试图让我的多边形随着窗口的移动而移动。我有;

```
 private void ResetPolygon(Point Point1, Point Point2, Point Point3)
    {
        SpeechPoly.Points.Clear();
        ObservableCollection<Point> myPointCollection = new ObservableCollection<Point>();
        myPointCollection.Add(Point3);
        myPointCollection.Add(Point2);
        myPointCollection.Add(Point1);
        foreach (Point p in myPointCollection)
        {
            SpeechPoly.Points.Add(p);
        }
    }

    private void Window_LocationChanged(object sender, EventArgs e)
    {
        if (this.IsLoaded)
        {
            Point Point1 = new Point(newPoint3);
            Point Point2 = new Point(newPoint2);
            Point Point3 = new Point(newPoint1);
            ResetPolygon(newPoint1, newPoint2, newPoint3);

//Write out the values of both the list and the polygon to screen!
            txtBlock.Text = newPoint1.X.ToString("N2") + ", " + newPoint1.Y.ToString("N2") + 
"\n" + newPoint2.X.ToString("N2") + ", " + newPoint2.Y.ToString("N2") + "\n" + 
newPoint3.X.ToString("N2") + ", " + newPoint3.Y.ToString("N2");

            txtBlock.Text += "\n" + SpeechPoly.Points[0].X.ToString("N2") + ", " + 
SpeechPoly.Points[0].Y.ToString("N2") + "\n" + SpeechPoly.Points[1].X.ToString("N2") + ", " +        
SpeechPoly.Points[1].Y.ToString("N2") + "\n" + SpeechPoly.Points[2].X.ToString("N2") + ", "+ 
SpeechPoly.Points[2].Y.ToString("N2");
                        }
                    } 
```

但是多边形无论如何都保持相同的形状，即使`Textblock`清楚地显示了所有点的值`Points`和`List`点`Polygon`肯定在变化。

我还尝试将 的`Points`属性绑定`Polygon`到我的代码。

```
<Polygon
    Name="SpeechPoly"
    Points="{Binding myPointCollection, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
    Stroke="Black" 
    StrokeThickness="2"
    </Polygon> 
```

我也尝试过使用`pointsCollection`相反`List<Points>`但相同的结果。几乎看起来`Polygon`并不令人耳目一新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:44:06.623

我对我之前给出的答案并不满意，因为它毕竟是一种解决方法..

我找到了一个更好的解决方案，不需要重置数据绑定。

因此，来自 XAML 的绑定被定向到具有 INCC 的属性，但是数据本身被转换为点以供多边形在绘制时使用。

```
<Window x:Class="WpfApplication9.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication9"
    Title="MainWindow" Height="350" Width="525" LocationChanged="Window_LocationChanged" >
<Window.Resources>
    <local:MyPointCollectionConverter x:Key="mcolconv" />
</Window.Resources>
<Canvas>
    <Polygon Name="SpeechPoly" Stroke="Black" StrokeThickness="2" 
             Points="{Binding Path=myPointCollection, Converter={StaticResource mcolconv}}" />
</Canvas> 
```

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows;
using System.Windows.Data;
using System.Windows.Media;

namespace WpfApplication9
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private ObservableCollection<Point> _myPointCollection = new ObservableCollection<Point>();
    public ObservableCollection<Point> myPointCollection { get { return _myPointCollection; } }

    public MainWindow()
    {
        myPointCollection.Add(new Point(100, 50));
        myPointCollection.Add(new Point(150, 100));
        myPointCollection.Add(new Point(50, 100));
        InitializeComponent();
        DataContext = this;
    }

    private void ResetPolygon(Point Point1, Point Point2, Point Point3)
    {
        myPointCollection.Clear();
        myPointCollection.Add(Point1);
        myPointCollection.Add(Point2);
        myPointCollection.Add(Point3);
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs("myPointCollection"));
    }

    private void Window_LocationChanged(object sender, EventArgs e)
    {
        if (this.IsLoaded)
        {
            Random rnd = new Random();
            Point Point1 = new Point(rnd.Next(50, 200), rnd.Next(50, 200));
            Point Point2 = new Point(rnd.Next(50, 200), rnd.Next(50, 200));
            Point Point3 = new Point(rnd.Next(50, 200), rnd.Next(50, 200));
            ResetPolygon(Point1, Point2, Point3);
        }

    }
}

public class MyPointCollectionConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var regPtsColl = new PointCollection(); //regular points collection.
        var obsPtsColl = (ObservableCollection<Point>)value; //observable which is used to raise INCC event.
        foreach (var point in obsPtsColl)
            regPtsColl.Add(point);
        return regPtsColl;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return null;
    }

    #endregion
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:17:39.993

PointsCollection 没有使用 INotifyCollectionChanged..
所以绑定永远不会知道某事已经改变。

您可以通过刷新绑定来解决此问题。

这是一个执行您要求的示例：

```
<Window x:Class="WpfApplication9.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" LocationChanged="Window_LocationChanged" >
<Canvas>
    <Polygon Name="SpeechPoly" Stroke="Black" StrokeThickness="2" Points="{Binding Path=myPointCollection}" />
</Canvas> 
```

```
using System;
using System.Windows;
using System.Windows.Media;

namespace WpfApplication9
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public PointCollection myPointCollection { get; set; }

    public MainWindow()
    {
        myPointCollection = new PointCollection
        {
            new Point(100, 50),
            new Point(150, 100),
            new Point(50, 100)
        };
        InitializeComponent();
        DataContext = this;
    }

    private void ResetPolygon(Point Point1, Point Point2, Point Point3)
    {
        myPointCollection[0] = Point1;
        myPointCollection[1] = Point2;
        myPointCollection[2] = Point3;
        DataContext = null;
        DataContext = this;
    }

    private void Window_LocationChanged(object sender, EventArgs e)
    {
        if (this.IsLoaded)
        {
            Random rnd = new Random();
            Point Point1 = new Point(rnd.Next(50, 200), rnd.Next(50, 200));
            Point Point2 = new Point(rnd.Next(50, 200), rnd.Next(50, 200));
            Point Point3 = new Point(rnd.Next(50, 200), rnd.Next(50, 200));
            ResetPolygon(Point1, Point2, Point3);
        }

    }
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:09:21.273

那么你在`Window_LocationChanged`处理程序中所做的就是添加点，所以难怪你最终会得到更多的多边形。您`myPointCollection`必须是`ObservableCollection`，并且您必须在添加点之前清除集合。我还想知道您是否可以使用从`Point`( `System.Windows.Point`) 继承的类，但将 x 和 y 重载给`NotifyingPropertyChanged`它们，以便绑定可以更新。如果可行，您不必再更改 Collection，而是更改 Collection 内容。

**更新后编辑：**

看起来问题出在您的更新中：因为您使用相同的 Collection 更新它，所以不会发生更新。
这是完全正常的行为，因为 Collection (a `PointCollection`) 没有实现`CollectionChanged`，所以即使你清除它，所有 clr '看到'都是同一个对象，所以没有变化，因此没有更新。

您不应该修改（清除）Xaml Polygon 对象本身的点集合，因为绑定就足够了。

1.  `PointCollection`尝试每次创建一个新点，添加点，然后将列表分配给 Polygon Points 。

2.  或尝试制作通知点并更改点。也许你可以用空字符串“”通知 X 和 Y，这意味着一切都改变了，或者用“X”通知 X，用“Y”通知 Y。

# asp.net - 在gridview中添加具有相同值的新行后更新一个单元格

> ID：11263938
> 
> 赞同：0
> 
> 时间：2012-06-29T14:46:30.783
> 
> 标签：asp.net, gridview, datatable

我想制作购物车Datatable，我在这里写了以下代码来制作产品列表

```
public  DataTable ShoppingCartlist(string proname , string country, 
    string area ,string address,int quantity,decimal price,DateTime date)
{
    DataTable dt = new DataTable();

    if (HttpContext.Current.Session["ShoppingList"]==null)
    {  
        dt.Columns.Add("ProName");
        dt.Columns.Add("odate");
        dt.Columns.Add("ocountry");
        dt.Columns.Add("oarea");
        dt.Columns.Add("oaddress");
        dt.Columns.Add("quantity");
        dt.Columns.Add("price");
        dt.Columns.Add("SubTotal");

        dt.Constraints.Add("Proid_PK", dt.Columns[0], true);
    }
    else
    {
        dt = (DataTable)HttpContext.Current.Session["ShoppingList"];

        DataRow dr = dt.NewRow();
        dr[0] = proname;
        dr[1] = date;
        dr[2] = country;
        dr[3] = area;
        dr[4] = address;
        dr[5] = quantity;
        dr[6] = price;
        dr[7] = quantity * price;

        dt.Rows.Add(dr);      
    }
    return dt;
} 
```

它可以很好地绑定数据，没有问题，但是我在gridview的新记录中插入具有相同值的同一行，我不希望它像我只想更新一个单元格（我的意思是当我添加新记录时具有相同的值，我希望`Quantity`增加值而不在gridview中添加新记录）就像我在图像上标记的那样

![在此处输入图像描述](../Images/1a1c5d2b75fc0802d7b892c2a03b17e4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:09:02.620

经过长时间的测试和谷歌搜索，我终于完成了，这里是我使用的代码

```
public  DataTable ShoppingCartlist(string proname , string country, 
    string area ,string address,int quantity,decimal price,DateTime date)
{
      DataTable dt = new DataTable();
    if (HttpContext.Current.Session["ShoppingList"]==null)
    {  
    dt.Columns.Add("ProName");
    dt.Columns.Add("odate");
    dt.Columns.Add("ocountry");
    dt.Columns.Add("oarea");
    dt.Columns.Add("oaddress");
    dt.Columns.Add("quantity");
    dt.Columns.Add("price");
    dt.Columns.Add("SubTotal");

   DataRow dr = dt.NewRow();
    dr[0] = proname;
    dr[1] = date;
    dr[2] = country;
    dr[3] = area;
    dr[4] = address;
    dr[5] = quantity;
    dr[6] = price;
    dr[7] = quantity * price;
    dt.Rows.Add(dr); 
    }
    else
    {
      dt = (DataTable)HttpContext.Current.Session["ShoppingList"];

    DataView dv = dt.DefaultView;
    dv.Sort = "ProName";
    int found;
    string Proname;
      DataRow dr;
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            dr = dt.Rows[i];
          Proname = dr[0].ToString();
       found = dv.Find(Proname);

        if (found != -1)
        {
            foreach (DataRow pro in dt.Rows)
            {
                for (int x = 0; x < dt.Rows.Count; x++)
            {
                if (dt.Rows[x]["ProName"].ToString()==Proname)
                {
                    dt.Rows[x]["quantity"] = Convert.ToInt16(dt.Rows[x]["quantity"]) + quantity;
                }
            }
            } 
        }   
        }          
        }
   return dt;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:06:05.850

您可以使用 LINQ：

```
DataTable dt = new DataTable("products"); 
dt.Columns.Add("ProName", typeof(string)); 
dt.Columns.Add("odate", typeof(DateTime)); 
dt.Columns.Add("ocountry", typeof(string)); 
dt.Columns.Add("oarea", typeof(string)); 
dt.Columns.Add("oaddress", typeof(string)); 
dt.Columns.Add("quantity", typeof(int)); 
dt.Columns.Add("price", typeof(decimal)); 
dt.Columns.Add("SubTotal", typeof(decimal)); 

DataRow dr1 = dt.NewRow(); 

dr1[0] = "test"; 
dr1[1] = new DateTime(2005, 5, 15); 
dr1[2] = "US"; 
dr1[3] = "test area"; 
dr1[4] = "555"; 
dr1[5] = 1; 
dr1[6] = 5.25; 
dr1[7] = 5.25 * 1;

dt.Rows.Add(dr1);

DataRow dr2 = dt.NewRow();

dr2[0] = "test";
dr2[1] = new DateTime(2005, 5, 15);
dr2[2] = "US";
dr2[3] = "test area";
dr2[4] = "555";
dr2[5] = 3;
dr2[6] = 5.25;
dr2[7] = 5.25 * 3; 

dt.Rows.Add(dr2);

var shoppingCart = from r in dt.AsEnumerable()
                   group r by new
                   {
                       ProName = r.Field<string>("ProName"),
                       odate = r.Field<DateTime>("odate"),
                       ocountry = r.Field<string>("ocountry"),
                       oarea = r.Field<string>("oarea"),
                       oaddress = r.Field<string>("oaddress"),
                       price = r.Field<decimal>("price")
                   } into g
                   select new
                   {
                       g.Key.ProName,
                       g.Key.odate,
                       g.Key.ocountry,
                       g.Key.oarea,
                       g.Key.oaddress,
                       g.Key.price,
                       quantity = g.Sum(s1 => s1.Field<int>("quantity")),
                       SubTotal = g.Sum(s2 => s2.Field<decimal>("SubTotal"))
                   };

foreach (var p in shoppingCart)
{
    Console.WriteLine("Product: {0}, Quantity: {1}, Subtotal: {2}", p.ProName, p.quantity, p.SubTotal);
} 
```

* * *

结果：

产品：测试，数量：4，小计：21.00

# actionscript-3 - 将 JPG 从 CDROM 保存到 PC

> ID：11263940
> 
> 赞同：0
> 
> 时间：2012-06-29T14:46:33.703
> 
> 标签：actionscript-3

我正在使用以下函数来保存 SWF 的输出并将其发送到 PHP 页面以便它创建 JPG，如果没有 INTERNET 连接并且 SWF 在 CDROM 中，我的问题可以在 FLASH 中使用 Save 函数以便它输出JPG并将其保存在计算机上。

简而言之，我们可以将影片剪辑输出另存为 JPG

```
 /**
    Screenshot and jpg output
    **/
    import flash.display.BitmapData;
    import flash.geom.Matrix;

    //Buttons handlers. Should add an extra function because delegate doesn't allow to pass parameters
    shaF.onPress = mx.utils.Delegate.create(this,makeShadow);

    //Helper functions to pass parameters
    function makeShadow() { capture(0) }

    /*
    create a function that takes a snapshot of the Video object whenever it is called
    and shows in different clips
    */
    function capture(nr){
     this["snapshot"+nr] = new BitmapData(abc._width,abc._height); 

     //the bitmap object with no transformations applied
     this["snapshot"+nr].draw(abc,new Matrix());
     var t:MovieClip = createEmptyMovieClip("bitmap_mc"+nr,nr);

     //positions clip in correct place
     //t._x = 350; t._y = 10+(nr*130); t._xscale = t._yscale = 50

     //display the specified bitmap object inside the movie clip
     t.attachBitmap(this["snapshot"+nr],1);
    output(nr);
     //attachMovie("print_but", "bot"+nr, 100+nr, {_x:t._x+t._width+50, _y:t._y+t._height/2}) 
    }
    //Create a new bitmapdata, resize it 50 %, pass image data to a server script
    // using a LoadVars object (large packet)
    function output(nr){
      //Here we will copy pixels data
      var pixels:Array = new Array()
      //Create a new BitmapData
      var snap = new BitmapData(this["snapshot"+nr].width, this["snapshot"+nr].height); 
      //Matrix to scale the new image
      myMatrix = new Matrix();
      myMatrix.scale(1, 1)

      //Copy image
      snap.draw(this["snapshot"+nr],  myMatrix);

      var w:Number = snap.width, tmp
      var h:Number = snap.height
      //Build pixels array
      for(var a=0; a<=w; a++){
       for(var b=0; b<=h; b++){
        tmp = snap.getPixel32(a, b).toString(16)
        //if(tmp == "-fcffff")
        //{
         //tmp="-ff0000";
        //}

        pixels.push(tmp.substr(1))
       }
      }
      //Create the LoadVars object and pass data to PHP script
      var output:LoadVars = new LoadVars()
      output.img = pixels.toString()
      output.height = h
      output.width = w
      //The page (and this movie itself) should be in a server to work
      output.send("show.php", "output", "POST")    
    }
    stop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:44:03.530

由于您已经拥有`BitmapData`，这相当容易。修改你的`output`功能：

```
//Copy image
snap.draw(this["snapshot"+nr],  myMatrix); 

//Now check if we want to save as JPG instead of sending data to the server
if (runningFromCdrom) {
    var encoder:JPEGEncoder = new JPEGEncoder();
    var bytes:ByteArray = encoder.encode(snap);
    var file:FileReference = new FileReference();
    file.save(bytes);
} else {
    // ...the rest of your output method...
} 
```

如何确定`runningFromCdrom`价值取决于您。如果 SWF 在 HTML 文档中运行，判断程序是否从 CD-ROM 运行的最佳方法是在 FlashVars 中指定它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:46:34.523

是的，您可以直接从 Flash 保存 JPEG。不需要 PHP 的中间步骤。

您可以使用以下 JPEG 编码器之一：

[https://github.com/mikechambers/as3corelib](https://github.com/mikechambers/as3corelib)

[http://www.switchonthecode.com/tutorials/flex-tutorial-an-asynchronous-jpeg-encoder](http://www.switchonthecode.com/tutorials/flex-tutorial-an-asynchronous-jpeg-encoder)

我会推荐第二个，因为它可以异步工作（有点），这意味着您的 UI 在编码 JPEG 时不应锁定。

# c# - NHibernate 存储过程 - 设置参数大小？

> ID：11263941
> 
> 赞同：5
> 
> 时间：2012-06-29T14:46:36.603
> 
> 标签：c#, sql-server, nhibernate, stored-procedures

我正在使用 执行存储过程`GetNamedQuery`并使用`SetString`. NHibernate 将字符串参数设置为`NVarchar(4000)`. 我的字符串参数值实际上比这长，因此被截断。

有没有办法告诉 NHibernate 在执行查询时使用更长的字符串类型？查询在映射文件中被简单地定义。`exec dbo.ProcessUploads :courseId, :uploadxml`

编辑：我的参数都不是所涉及实体的属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T23:29:32.703

由于 NHibernate 没有足够的信息来自动设置参数长度，因此您必须手动进行。

例子：

```
session.GetNamedQuery("ProcessUploads")
       .SetParameter("courseId", courseId)
       .SetParameter("uploadXml", uploadXml, NHibernateUtil.StringClob)
       .ExecuteUpdate(); 
```

在这种情况下，我使用的是`StringClob`，这将转换为`NVARCHAR(max)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:51:13.077

您应该向我们展示或检查您的 HBM 文件的参数。在那里您可以指定字段/属性类型、长度...

在这里您可以阅读官方[nHibernate 文档](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-property)

# c# - 从 DataTemplate 绑定 ZIndex

> ID：11263946
> 
> 赞同：3
> 
> 时间：2012-06-29T14:46:56.433
> 
> 标签：c#, wpf, xaml, binding, datatemplate

我有一个基本上是这样设置的视图：

```
<Grid>
<ViewBox>
    <Grid>
        <ItemsControl ItemsSource="{Binding MyItems}"
                      ItemTemplate="{Binding Source={StaticResource MyItemsDataTemplate}}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Grid />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </Grid>
</ViewBox>
</Grid> 
```

此处使用的 DataTemplate 可以简化为：

```
<DataTemplate x:Key="AreaItemDisplayDataTemplate">
<Canvas Grid.ZIndex={Binding Z}>
    <Grid>
        // an shape is displayed here...
    </Grid>
</Canvas> 
```

我现在希望 ZIndex 绑定到单个项目的 Z 属性。当我调试代码时，我还可以看到，Z 属性 getter 在我期望的时候被访问（例如，每当我为它引发 propertychanged 事件时）所以我假设绑定正常工作。

但是，ZIndex 没有按预期工作。绑定到值对实际显示的 Z 顺序没有影响。这段代码我哪里出错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T15:08:09.803

的内容`DataTemplate`被包裹在 a中`ContentPresenter`，所以`Canvas`in`DataTemplate`不是`ItemsPanel` `Grid`. 这就是`ZIndex`属性不做任何事情的原因。

将 移至`ZIndex` `Binding`，`ItemContainerStyle`它应该可以工作。

```
<ItemsControl ItemsSource="{Binding MyItems}" 
              ItemTemplate="{Binding Source={StaticResource MyItemsDataTemplate}}"> 
    <ItemsControl.ItemsPanel> 
        <ItemsPanelTemplate> 
            <Grid /> 
        </ItemsPanelTemplate> 
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="ContentPresenter">
            <Setter Property="Grid.ZIndex" Value="{Binding Z}"/>
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

# mysql - mysql前面的代理，用于去除冗余

> ID：11263947
> 
> 赞同：0
> 
> 时间：2012-06-29T14:46:58.600
> 
> 标签：mysql, database, architecture, proxy

我正在尝试在 MySQL 服务器前面实现一个代理层，它将捕获冗余 SQL 查询并将它们仅发送一次到服务器。换句话说，我有很多客户端（在 PHP、Perl 中，在不同的 Web 节点上）与 MySQL 通信并且经常重复相同的`SELECT`查询。当流量上升时，MySQL 通常会下降。

问题是 - 您是否知道任何可以提供帮助的开源（或商业）工具？我试过[MySQL Proxy](http://forge.mysql.com/wiki/MySQL_Proxy)，但看起来无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:38:01.753

两个建议：

1.  MySQL 代理这是 MySQL 的前端代理，据我所知，它可以满足您的需求
2.  vtocc 来自 vitess 项目，用于 YouTube mysql 环境，也做了类似的事情。查询合并：将进行中查询的结果重用于查询仍在执行时收到的任何后续请求的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:49:18.960

您可能想了解[HAProxy](http://haproxy.1wt.eu/)及其[工作原理](http://flavio.tordini.org/a-more-stable-mysql-with-haproxy/comment-page-1)。

这里有两个额外的建议

**建议 #1 设置集群**

如果你的数据都是 InnoDB，你应该尝试[Percona XtraDB Cluster](http://www.percona.com/software/percona-xtradb-cluster/)并结合它使用 HAProxy。您可以在集群中的所有服务器（包括 Write Master）之间进行负载平衡。

**SUGGESTION #2 通过 MySQL 复制设置集群到 1 个或多个 DB 服务器**

使用 HAProxy 在 Read Slave 之间对读取进行负载平衡

如果预算有限且数据相对较小，请[**在一台服务器上设置多个 MySQL 实例**](http://youtu.be/5uKBg9prA1A)

# c# - 优化变量正则表达式

> ID：11263949
> 
> 赞同：1
> 
> 时间：2012-06-29T14:47:06.680
> 
> 标签：c#, regex

我正在匹配以下字符串：

*   水印=测试
*   水印=文本测试|位置-24-50
*   水印=文本测试|position-24-50|color-6aa6cc
*   水印=文本测试|position-24-50|color-6aa6cc|size-48

使用以下正则表达式：

```
watermark=(text-\w+\|position-\d+-\d+\|color-([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})\|size-\d+|text-\w+\|position-\d+-\d+\|color-([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})|text-\w+\|position-\d+-\d+|\w+) 
```

它有效，但它太丑了，让我想用热棒戳我的眼睛。你们中的任何一个正则表达式大师都愿意通过对您的方法的简要解释来重构它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:59:35.120

```
\bwatermark=(?:text-|)\w+(?:\|position-\d+-\d+(?:\|color-[0-9a-fA-F]+(?:\|size-\d+|)|)|)\b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:54:52.407

```
watermark=(text-\w+\|position-\d+-\d+(\|color-([0-9a-fA-F]{3}){1,2}(\|size-\d+)?)?|\w+) 
```

由于我观察到（来自示例+原始正则表达式）“大小”意味着前面的所有字段都可用，“颜色”意味着前面的所有字段都可用，我刚刚创建了嵌套可选：

```
(\|color-([0-9a-fA-F]{3}){1,2}
  (\|size-\d+)?
)? 
```

对于`([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})`，我“简化”为`([0-9a-fA-F]{3}){1,2}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-09T18:50:09.730

您可以通过分解软件[http://regexformat.com运行您的正则表达式](http://regexformat.com)

前：

```
watermark=(text-\w+\|position-\d+-\d+\|color-([A-Fa-f0-9]{3}(?:[A-Fa-f0-9]{3})?)\|size-\d+|text-\w+\|position-\d+-\d+\|color-([A-Fa-f0-9]{3}(?:[A-Fa-f0-9]{3})?)|text-\w+\|position-\d+-\d+|\w+) 
```

后：

```
watermark=(?:text-\w+\|position-\d+-\d+(?:\|color-[A-Fa-f0-9]{3}(?:[A-Fa-f0-9]{3})?(?:\|size-\d+)?)?|\w+) 
```

[![在此处输入图像描述](../Images/b6564b25676c143d920ecc377a1bf18e.png)](https://i.stack.imgur.com/JYIKi.png)

```
 watermark=
 (?:
    text- \w+ \| position- \d+ - \d+ 
    (?:
       \| color- [A-Fa-f0-9]{3} 
       (?: [A-Fa-f0-9]{3} )?
       (?: \| size- \d+ )?
    )?
  | \w+ 
 ) 
```

# android - 安卓锁屏

> ID：11263954
> 
> 赞同：0
> 
> 时间：2012-06-29T14:47:19.740
> 
> 标签：android, locking, screen

> **可能重复：**
> [如何锁定屏幕，android](https://stackoverflow.com/questions/6762671/how-to-lock-screen-android)

我试图在我的代码中锁定手机屏幕，但它不起作用。我花了几个小时来研究它并尝试新的方法，但没有任何效果。我正在尝试将屏幕锁定在一项服务中，但首先我只是在一项活动中进行尝试。

这是我的活动：

```
PowerManager manager;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    manager = (PowerManager) getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = manager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,   "Your Tag");

    wl.acquire();

  }

} 
```

这根本没有做任何事情。

注意：我确实有`android.permission.WAKE_LOCK permission`

我也在下面尝试过这种方法，但它什么也没做，没有强制关闭或任何东西。

```
manager = (PowerManager) getSystemService(Context.POWER_SERVICE);
manager.goToSleep(1000); // go to sleep in 1 second 
```

我在下面尝试了这种方法并且它有效（在活动中）：

```
WindowManager.LayoutParams params = getWindow().getAttributes();
params.screenBrightness = 0;
getWindow().setAttributes(params); 
```

但是这种方法在服务中不起作用，所以我需要找到不同的方法？但是我只是没有运气。

有什么帮助吗？会很棒，谢谢，杰克

# linux - 什么是最好的 Emacs 工作区插件？

> ID：11263960
> 
> 赞同：18
> 
> 时间：2012-06-29T14:47:29.160
> 
> 标签：linux, emacs, aquamacs, workspace

工作区，我的意思是 - 我需要保存我打开的缓冲区的状态（可能在用户指定的工作区文件中）并快速切换到另一组打开的缓冲区，例如继续处理与另一个项目相关的文件。

是否有允许这样做的 Emacs 插件？你会推荐哪一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T21:17:42.990

我使用[save-visited-files](https://github.com/nflath/save-visited-files)和[workgroups](https://github.com/tlh/workgroups.el)的组合。事实上，工作组可能会自行完成大部分您想做的事情。

我的配置：

```
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; workgroups for windows

(setq wg-prefix-key (kbd "C-c z")
      wg-no-confirm t
      wg-file (concat emacs-persistence-directory "workgroups")
      wg-use-faces nil
      wg-switch-on-load nil)

(defun wg-load-default ()
  "Run `wg-load' on `wg-file'."
  (interactive)
  (wg-load wg-file))

(defun wg-save-default ()
  "Run `wg-save' on `wg-file'."
  (interactive)
  (when wg-list
    (with-temp-message ""
      (wg-save wg-file))))

(with-library 'workgroups
  (define-key wg-map (kbd "C-l") 'wg-load-default)
  (define-key wg-map (kbd "C-s") 'wg-save-default)
  (workgroups-mode 1)
  (add-hook 'auto-save-hook 'wg-save-default)
  (add-hook 'kill-emacs-hook 'wg-save-default)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-16T19:05:15.067

就个人而言，我一直在使用[`persp-mode'](https://github.com/Bad-ptr/persp-mode.el)：

> 基于`perspective-el`Nathan Weizenbaum 的 Emacs 观点。但是框架之间共享的观点+从/到文件保存/恢复的能力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T04:57:02.937

如果你使用 Linux/Gnome3，你可以试试这个扩展：[https](https://extensions.gnome.org/extension/361/emacs-manager/) ://extensions.gnome.org/extension/361/emacs-manager/ 这个扩展允许你通过管理多个 emacs 守护进程同时处理不同的项目，并且保存/恢复缓冲区的状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T17:39:28.980

desktop.el 将对您的情况有所帮助。

它可以（从它的介绍页面复制）来自 emacs 包缓冲区：

保存桌面，即 - 一些全局变量 - 带有关联文件的缓冲区列表。对于每个缓冲区还有 - 主要模式 - 默认目录 - 点 - 标记和标记活动 - 缓冲区只读 - 一些局部变量

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-11T01:02:44.220

HIROSE Yuuji's [revive.el](http://www.gentei.org/~yuuji/software/euc/revive.el) has worked nicely for me for quite some time. I use the standard configuration presented in the comments in revive.el. The documentation is well written and revive is very easy to use and configure. In particular, revive.el has better support than some for reviving configurations that are a bit more complex. It is particularly nice if you combine it with the HIROSE Yuuji's [windows.el](http://www.gentei.org/~yuuji/software/euc/windows.el). They are made to work together. windows.el makes it possible to recall window splits, etc. revive.el is built with an eye toward extensibility toward deeper mode integration for particular setups. But for my uses, I have found it to be quite nice out of the box, though I think I'll next tweak it to revive w3m windows which I currently don't have setup (Update: I do now: see bottom).

Here is my revive config. I include some helpful comments, first for windows.el and then revive.el inline:

```
(provide 'my-revive-config)

(require 'windows) ; use this with revive so that window splits are recallable
                   ; too

(win:startup-with-window) ; start with window 1

;;;[Key Bindings]
;;;
;;;   The default prefix key stroke for Windows is `C-c C-w'.  If it
;;; causes  you some  troubles, see  the  section  `Customizations'.
;;; Here are the default key bindings.
;;;
;;;     C-c C-w 1       Switch to window 1 (Q)
;;;     C-c C-w 2       Switch to window 2 (Q)
;;;        :
;;;     C-c C-w 9       Switch to window 9 (Q)
;;;     C-c C-w 0       Swap windows with the buffer 0 (Q)
;;;                 (Select unallocated frame(Emacs 19))
;;;     C-c C-w SPC     Switch to window previously shown (Q)
;;;     C-c C-w C-n     Switch to next window
;;;     C-c C-w C-p     Switch to previous window
;;;     C-c C-w !       Delete current window (Q)
;;;     C-c C-w C-w     Window operation menu
;;;     C-c C-w C-r     Resume menu
;;;     C-c C-w C-l     Local resume menu
;;;     C-c C-w C-s     Switch task
;;;     C-c C-w =       Show window list (Q)
;;;
;;;   The  key strokes  to  select  windows from  1    to 9 must  be
;;; frequently used, so the alternative key strokes `C-c [Num.]' are
;;; available  by default  (And  any  function  with (Q)mark can  be
;;; invoked without  C-w).  To disable these  quick key strokes, set
;;; the variable win:quick-selection to `nil' in your ~/.emacs.

(autoload 'save-current-configuration "revive" "Save status" t)
(autoload 'resume "revive" "Resume Emacs" t)
(autoload 'wipe "revive" "Wipe Emacs" t)

(define-key ctl-x-map "S" 'save-current-configuration)
(define-key ctl-x-map "F" 'resume)
(define-key ctl-x-map "K" 'wipe)

;;;
;;;[How to use]
;;;
;;;  Call `save-current-configuration' (`C-x S' if you define key as
;;; above) when you want to save current editing status and call
;;; `resume' to restore it. Numerical prefix arg to them specifies
;;; the buffer number in which the editing status will be saved.
;;; Here the buffer refers to a revive s-exp in ~/.revive.el of
;;; which there can be n
;;;
;;;     [Sample Operations]
;;;     C-u 2 C-x S     ;save status into the buffer #2
;;;     C-u 3 C-x F     ;load status from the buffer #3 
```

There are variants of this that others like [revive-plus.el](https://github.com/martialboniou/revive-plus) and a [slightly modified clone on github](https://github.com/vedang/revive-mode), but I prefer the original.

Update Monday, January 12, 2015: Now I can restore w3m in revive (see revive.el docs for details and in particular look at examples in revive:major-mode-command-alist-default):

```
(setq revive:major-mode-command-alist-private
      '(("*w3m*"    . w3m))) 
```

Notice you are telling revive the name of the w3m buffer. Even if you have multiple tabs, only the first one need be enumerated as above.

Here is the w3m variable I have set to restore all tabs from the previous session:

```
(setq w3m-session-load-last-sessions t) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-08T15:56:48.457

弹丸模式可以实现你什么：

在项目中切换缓冲区：projectile-switch-to-buffer

切换项目： projectile-switch-to-project

我有这样的事情：

```
(global-set-key (kbd "C-x b") '(λ ()
                                (interactive)
                                (if (projectile-project-p) 
                                    (call-interactively 'projectile-switch-to-buffer)
                                (call-interactively 'ivy-switch-buffer))))

(global-set-key (kbd "C-x B") 'ivy-switch-buffer) 
```

# tridion - Tridion 新 UI 预览网站不会反映更改，除非发布

> ID：11263963
> 
> 赞同：6
> 
> 时间：2012-06-29T14:47:40.347
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我有新的 UI 设置，并注意到当我更新页面时，更新的更改不会刷新。我也没有看到 page_{sessionId/GUID}.aspx 创建。

检查了会话预览数据库，我看到 PAGE_CONTENT 表中的更改包含新的渲染内容，因此会话预览似乎工作正常，但预览站点无法获取更改并刷新 UI。

我检查了 .aspx 的所有预览处理程序和映射，并确保它们在 web.config 中是正确的。关于为什么预览网站没有显示更改的任何想法？

我在 cd_storage_conf.xml 中有会话预览数据库设置。

```
<StorageBindings>
  <Bundle src="preview_dao_bundle.xml"/>
</StorageBindings>
<Wrappers>
  <Wrapper Name="SessionWrapper">
    <Timeout>120000</Timeout>
    <Storage Type="persistence" Id="db-session-webservice" dialect="MSSQL"
             Class="com.tridion.storage.persistence.JPADAOFactory">
      <Pool Type="jdbc" Size="5" MonitorInterval="60" 
            IdleTimeout="120" CheckoutTimeout="120" />
      <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
        <Property Name="serverName" Value="localhost" />
        <Property Name="portNumber" Value="1433" />
        <Property Name="databaseName" Value="Tridion_Broker_SessionPreview" />
        <Property Name="user" Value="usr" />
        <Property Name="password" Value="pwd" />
      </DataSource>
    </Storage>
  </Wrapper>
</Wrappers> 
```

web.config（处理程序）：

```
<add verb="GET" path="*.htm" type="Tridion.ContentDelivery.Preview.Web.StaticFileHandler" />
<add verb="GET" path="*.jpg" type="Tridion.ContentDelivery.Preview.Web.StaticFileHandler" />
<add verb="GET" path="*.png" type="Tridion.ContentDelivery.Preview.Web.StaticFileHandler" />
<add verb="GET" path="*.html" type="Tridion.ContentDelivery.Preview.Web.StaticFileHandler" />
<add name="Tridion.ContentDelivery.Preview.Web.PreviewContentModule" type="Tridion.ContentDelivery.Preview.Web.PreviewContentModule" /> 
```

日志（时间戳和 DEBUG 前缀已删除）：

```
ClaimStore - put: uri=taf:session:id, value=tridion_db59279b-7d37-4b2e-ad98-eaaa6af7038e
ClaimStore - put: uri=taf:session:id, value=tridion_db59279b-7d37-4b2e-ad98-eaaa6af7038e
ClaimStore - put: uri=taf:tracking:id, value=tridion_d1fa1017-a28d-4f48-a790-b74f78c69314
ClaimStore - put: uri=taf:tracking:id, value=tridion_d1fa1017-a28d-4f48-a790-b74f78c69314
SearchClaimProcessor - No match found for referrer string http://uidemo.practice.com/en/Product/musk.aspx
SearchClaimProcessor - No match found for referrer string http://uidemo.practice.com/en/Product/musk.aspx
ClaimStore - put: uri=taf:claim:ambientdata:footprintcartridge:devicetype, value=Desktop
ClaimStore - put: uri=taf:claim:ambientdata:footprintcartridge:devicetype, value=Desktop
ClaimStore - put: uri=taf:claim:ambientdata:footprintcartridge:mobiledevice, value=NotMobile
ClaimStore - put: uri=taf:claim:ambientdata:footprintcartridge:acceptlanguage, value=en-US
ClaimStore - put: uri=taf:claim:ambientdata:footprintcartridge:mobiledevice, value=NotMobile
ClaimStore - put: uri=taf:claim:ambientdata:footprintcartridge:acceptlanguage, value=en-US
PageHandler - The session wrappers are correctly installed. 
```

关于可能出现问题的任何想法/指示......？（对不起，很长的帖子）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T16:39:34.113

在“正确安装了会话包装器”之后。消息，一旦我做出更改，我会在我的日志中得到很多反馈（在调试中）。这是短版...

```
DEBUG PageHandler - The session wrappers are correctly installed.
DEBUG SessionManagerImpl - Retrieved the session on the current execution thread: PreviewSession [sessionId=db5c1e84-649f-4635-bbdd-fb6683e98b07, expirationDate=2012-06-29 12:31:24.65].
DEBUG PageHandler - The session db5c1e84-649f-4635-bbdd-fb6683e98b07 was found loaded!
DEBUG DynamicMetaRetriever - Searching for pageMeta for url='http://localhost:81/'.
DEBUG MetaResolverFactory - Fetching meta resolver for PAGE_META meta data type.
DEBUG MetaResolverFactory - Fetching meta resolver for PAGE_META meta data type.
DEBUG MappingsResolverImpl - Getting publication mapping for http://localhost:81/
DEBUG MappingsStrategyContext - Resolving url using strategy com.tridion.dynamiccontent.publication.mappingsstrategy.impl.StaticMappingsStrategy
DEBUG StaticMappingsStrategy - Resolving: http://localhost:81/
DEBUG ProtocolOptionMatcher - Mapped Protocol match with the url. Protocol is [http].
DEBUG ProtocolOptionMatcher - The calculated weight is [1].
DEBUG DomainOptionMatcher - The Domain extracted from the url is: [localhost]
DEBUG DomainOptionMatcher - The mapped Domain is: [localhost]
DEBUG DomainOptionMatcher - Mapped Domain match with the url. Mapped Domain is [localhost] and extracted Domain is [localhost].
DEBUG DomainOptionMatcher - The calculated weight is [10000].
DEBUG PortOptionMatcher - The Port extracted from the url is: [:81]
DEBUG PortOptionMatcher - The mapped Port is: [81] 
```

[...]

```
DEBUG JPAPreviewSessionDAO - Retrieving PreviewSession by sessionId: db5c1e84-649f-4635-bbdd-fb6683e98b07 
```

[...]

```
SessionManagerImpl - Retrieved the session on the current execution thread: PreviewSession [sessionId=db5c1e84-649f-4635-bbdd-fb6683e98b07, expirationDate=Fri Jun 29 12:31:25 EDT 2012]. 
```

然后它会加载正确的更新。

我看不出你发布的配置有什么问题，所以这是我对 cd_ambient_conf.xml 的配置；

```
<Configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="6.1" xsi:noNamespaceSchemaLocation="schemas/cd_ambient_conf.xsd">
  <Cartridges>
    <Cartridge File="cd_webservice_preview_cartridge.xml"/>
    <Cartridge File="footprint_cartridge_conf.xml"/>
  </Cartridges>
  <ClaimStoreProvider>com.tridion.siteedit.preview.PreviewClaimStoreProvider</ClaimStoreProvider>
</Configuration> 
```

和 cd_dynamic_conf：

```
<?xml version="1.0" encoding="UTF-8"?>
<Configuration Version="6.1"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:noNamespaceSchemaLocation="schemas/cd_dynamic_conf.xsd">
    <URLMappings>
        <StaticMappings>
            <Publications>
                <Publication Id="5">
                    <Host Domain="localhost" Port="81" Protocol="http" Path=""/>
                </Publication>
            </Publications>
        </StaticMappings>
        <StorageMapping IdentifyPublicationByProperty="publicationUrl"/>
    </URLMappings>
    <TCDLEngine>
        <Renderer Class="com.tridion.tcdl.TCDLRenderer">
            <Properties>
                <Property Name="prop1" Value="value1"/>
                <Property Name="prop2" Value="value2"/>
            </Properties>
        </Renderer>
    </TCDLEngine>
</Configuration> 
```

希望这会有所帮助。

ñ

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T21:01:35.980

**解决方案/修复**

在预览应用程序上应用新的 hotifx“CD_2011.1.1.81686”解决了这个问题。Hotifx 可以从[https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011_SP1_1/index.aspx](https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011_SP1_1/index.aspx)下载（需要登录）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-02T14:58:59.140

编辑此文件 cd_ambient_conf.xml；取消注释以下行

```
<Cartridge File="footprint_cartridge_conf.xml"/> 
```

然后尝试编辑您将能够预览更改

感谢和问候阿比吉特·安格尔

# ruby-on-rails - 如何为 link_to 块传递 html？

> ID：11263968
> 
> 赞同：8
> 
> 时间：2012-06-29T14:48:16.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试`link_to`使用 html 传递一个块，但无法得到它。我尝试了其他一些没有运气的方法，所以我将使用我的原始代码：

```
<% link_to survey_path(survey), :class => "button" do %>
   <span>add questions to <%= survey.name %></span>
<% end %> 
```

这并没有显示`:class`出来。

需要纠正什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-29T15:00:36.720

尝试添加`=`使其`<%= %>`

```
<%= link_to survey_path(survey), :class => "button" do %>
   <span>add questions to <%= survey.name %></span>
<% end %> 
```

> 在 Rails 3 应用程序的视图代码中，有时需要在输出内容的块的开头使用 <%= 而不是 <%，例如 form_for。

既然只是一个跨度，你为什么不做

```
<%= link_to "add questions to #{survey.name}", survey_path(survey), :class => "button" %> 
```

# ruby-on-rails - Rails Brakeman 警告：动态渲染路径误报？

> ID：11263976
> 
> 赞同：9
> 
> 时间：2012-06-29T14:48:33.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, brakeman

我刚刚开始使用 Rails，所以我正在使用[Brakeman](https://github.com/presidentbeef/brakeman)来了解我的新手代码中的潜在漏洞。`show.js.erb`它对我的文件中的以下代码发出高度可信的“动态渲染路径”警告：

```
$('#media-fragment').html('<%= escape_javascript(render(params[:partial])) %>'); 
```

我实际上预计这是一个问题，所以这并不奇怪。所以我将其更改为以下内容：

```
 # controller:
  def show
    if legal_partial?
      @allowed_partial = params[:partial]
    else
      raise StandardError, "unexpected partial request: #{params[:partial]}"
    end
  end

  private

  def legal_partial?
    %w(screenshots video updates).include? params[:partial]
  end

  # ...
  # show.js.erb
  $('#media-fragment').html('<%= escape_javascript(render(@allowed_partial)) %>'); 
```

尽管我相信代码现在是安全的，但 Brakeman 仍然对此不满意。有没有更惯用的方法来控制基于用户输入的部分渲染？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T19:27:32.247

**更新（2016 年 2 月 5 日）：**

从 Brakeman 3.0.3 开始，此问题已得到修复。

如果该`legal_partial?`方法是这样内联的：

```
def show
  if %w(screenshots video updates).include? params[:partial]
    @allowed_partial = params[:partial]
  else
    raise StandardError, "unexpected partial request: #{params[:partial]}"
  end
end 
```

Brakeman 将能够检测到警卫状态，并且不会再对稍后的`render`呼叫发出警告。

* * *

**原答案：**

不幸的是，布雷克曼不知道这`if legal_partial?`是一个合适的后卫。它只知道`params[:partial]`分配给`@allowed_partial`，然后传递给`render`。

您可能会说这`@allowed_partial`将始终是一个安全的值。此时，您必须考虑增加复杂性以使工具满意是否有意义。

举个例子，你可以这样做：

```
def show
  render_allowed_partial params[:partial]
end

def render_allowed_partial name
  if %w(screenshots video updates).include? name
    @allowed_partial = name
  else
    raise StandardError, "unexpected partial request: #{params[:partial]}"
  end
end 
```

基本上是一样的，除了现在你对`@allowed_partial`Brakeman 隐藏了任务。

（警告：不一定是“最佳”方式。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-14T13:47:50.423

使用**刹车手 4.2.0**

我在尝试渲染特定的**手动定位和命名模板**时遇到了类似的问题。我的应用程序的每个产品都需要特定的命名模板。模板名称来自控制器参数，如`params[:a_particular_slug].underscore`.

我解决了这样的问题：

```
 def show
    if @products = Product.where(a_slug: params[:a_particular_slug])
      render template: lookup_context.find(params[:a_particular_slug].underscore, ["featured_products"])
    else
      render_404
    end
  end 
```

在这里，我正在寻找一个模板。如果您需要使用部分，请注意`lookup_context.find`设置为 true 的第三个参数允许搜索部分。

[你可以在这里](http://api.rubyonrails.org/classes/ActionView/LookupContext/ViewPaths.html)找到更多`lookup_context.find`

希望这可以帮助。

# sql-server - LineChart 使用 SSRS 中的 2 个数据集

> ID：11263977
> 
> 赞同：0
> 
> 时间：2012-06-29T14:48:36.103
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2, bids

我想使用两组值创建一个折线图。第一个值（即线）将显示打开的报告，第二个值（即线）将显示关闭的报告。x 轴将显示月份，y 轴将显示数字（即报告的总和）。我尝试在图表数据的值框中使用以下表达式，但我得到一条直线。

```
=Sum(Fields!Count.Value, "DataSet1") for line 1
=Sum(Fields!Count.Value, "DataSet2") for line 2 
```

我正在使用多维数据集来创建我的数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:31:02.813

您不能在同一个图表中合并两个数据集。如果 Dataset1 和 Dataset2 之间有公共字段，则需要将数据组合到单个数据集中或使用 Lookup 函数：

[http://msdn.microsoft.com/en-us/library/ee210575(SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ee210575(SQL.105).aspx)

# python - 尝试从 google.appengine.api 导入 background_thread（如示例）失败并出现 ImportError

> ID：11263979
> 
> 赞同：2
> 
> 时间：2012-06-29T14:48:38.490
> 
> 标签：python, google-app-engine, backend, background-thread

简单地做...

```
from google.appengine.api import background_thread 
```

...就像在[官方文档](https://developers.google.com/appengine/docs/python/backends/overview#background_threads)中一样，对我来说失败了...

```
<type 'exceptions.ImportError'>: cannot import name background_thread 
```

...从我的后端调用它时。

如何让它正确导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:05:56.010

这是 Python 2.7 独有的功能。SDK 也不支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:48:45.017

它仅适用于 Python 2.7，并且在开发服务器中不受支持（正如@Guido van Rossum 所说），就在您将其上传到 GAE 服务器时

# drupal - 当前用户已发布和未发布内容的视图

> ID：11263982
> 
> 赞同：1
> 
> 时间：2012-06-29T14:48:42.950
> 
> 标签：drupal, drupal-views

在我的站点上，授权用户可以创建一种称为协议的内容类型。这可以由用户保存为已发布或未发布。我想创建一个页面，其中包含一个名为“我的协议”的视图，当前用户可以在其中查看他们作为作者、已发布和未发布的所有协议。

为此，我使用 Views 模块创建了“我的协议”视图，该模块在未格式化的预告片列表中显示协议。我使用过滤器“内容：类型（=协议）”和“（作者）用户：当前（是）”。对于页面设置，我有：

```
Path:/my-protocols
Menu:Normal: My protocols
Access:Permission | View own unpublished content 
```

我试过改变 Access 部分但没有成功。

在人员>权限下，我已设置为允许授权用户：“查看自己未发布的内容”和“访问内容概述页面”（以及其他课程外的内容，但我教的这些内容可能与我的 Views 问题有关）

当我尝试查看以授权用户身份登录的“我的协议”视图时，我无法让它显示未发布的内容，并且我检查了该用户是否创建了已发布和未发布的协议类型的内容。但是当以管理员身份登录时查看页面时，我会看到已发布和未发布的内容。

是否由于某种原因无法做我想做的事？还是我忘记了什么？还是我需要安装一些进一步的模块来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:35:30.193

我认为这是因为视图使用 node_access 表来检查节点访问权限，但是从 node_access 表中删除了未发布的节点。您可以尝试在“高级”部分下的视图“查询设置”中禁用“SQL 重写”。不确定这是否是解决方案。

# c# - 为什么 PHP 不需要中间层，而其他语言则需要

> ID：11263988
> 
> 赞同：0
> 
> 时间：2012-06-29T14:49:09.193
> 
> 标签：c#, java, php, middleware

对于基于 Web 的应用程序，为什么 PHP 不需要中间件来运行 - 而 Java、C# 等语言却需要？

**更新**：

重新措辞：为什么 PHP 不需要中间层或将其与数据库分开的业务层，而其他的却需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:47:00.560

假设“中间件”一词的意思是“中间层”或“业务层”，答案是它们都不*需要*它。

例如，没有什么可以阻止您在 C# 中（或者更准确地说，在 .Net Framework“堆栈”上）在直接访问数据库的网页中编写代码。事实上，很多原型都是这样开始的。

这里的问题更多的是关于良好实践 - 通常认为编写直接访问数据库的网页（坚持相同的示例）是一件坏事（tm），其原因有很多。可测试性、安全性、良好的解耦代码——所有这些都需要您将代码分开，而拥有多个层是实现此目的的自然方式。

为什么您在 PHP 中看不到这么多呢？我认为[Jeff 的最新博客文章](http://www.codinghorror.com/blog/2012/06/the-php-singularity.html)很好地涵盖了这一点：）

我想说的是 C#（语言）、.Net（框架）、ASP.NET（尤其是 ASP.NET MVC）以及许多文档和教程都鼓励你做正确的事情而不是打拳从网页到数据库的一个整体。

但实际上没有什么能阻止你这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T22:51:18.170

可能出现的用例如下：

您有多个 Web 应用程序提供存储在数据库中的数据。假设网络应用程序是：

1.  为您的桌面 Web 体验提供前端
2.  移动网络体验的前端
3.  您向开发人员公开的 API 的前端

假设每个前端都直接访问数据库。 *然后*，您的工程团队决定更换当前数据库。现在你遇到了在*每个*前端重写代码的问题。

如果你有一个中间层来抽象实际的数据存储，你只需要重写一层代码。此外，对该中间层进行单元测试将确保中间层公开数据的方式保持一致，无论数据存储平台如何。

# r - 删除 R 中的调查不响应

> ID：11263992
> 
> 赞同：0
> 
> 时间：2012-06-29T14:49:23.293
> 
> 标签：r

所以，我有一个包含几个连续变量和几个虚拟变量的数据框。该数据框来自的调查使用 6、7、8 和 9 来表示不同类型的不答复。因此，每当它们出现在虚拟变量列中时，我想用 NA 替换 6、7、8 和 9，但将它们留在连续变量列中。

有没有一种简洁的方法来做到这一点？这是我的数据：

```
> dput(head(sfsuse[c(4:16)]))
structure(list(famsize = c(3L, 1L, 2L, 5L, 3L, 5L), famtype = c(2L, 
1L, 2L, 3L, 2L, 3L), cc = c(1L, 1L, 1L, 1L, 1L, 1L), nocc = c(1L, 
1L, 1L, 3L, 1L, 1L), pdloan = c(2L, 2L, 2L, 2L, 2L, 2L), help = c(2L, 
2L, 2L, 2L, 2L, 2L), budget = c(1L, 1L, 1L, 1L, 2L, 2L), income = c(340000L, 
20500L, 0L, 165000L, 95000L, -320000L), govtrans = c(7500L, 15500L, 
22000L, 350L, 0L, 9250L), childexp = c(0L, 0L, 0L, 0L, 0L, 0L
), homeown = c(1L, 1L, 1L, 1L, 1L, 2L), bank = c(2000L, 80000L, 
25000L, 20000L, 57500L, 120000L), vehval = c(33000L, 7500L, 5250L, 
48000L, 8500L, 50000L)), .Names = c("famsize", "famtype", "cc", 
"nocc", "pdloan", "help", "budget", "income", "govtrans", "childexp", 
"homeown", "bank", "vehval"), row.names = c(NA, 6L), class = "data.frame") 
```

我正在尝试在 NA 中为 3:7 和第 11 列中的 6、7、8 和 9 替换。我知道如何通过列名一次完成这一列：

```
 df$name[df$name %in% 6:9]<-NA 
```

但我必须按名称为每一列执行此操作，是否有一种通过列索引执行此操作的简洁方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:00:23.343

这个功能应该可以

```
f <- function(data,k) {
  data[data[,k] %in% 6:9,k] <- NA
  data
} 
```

现在在控制台：

```
> for (k in c(3:7,11)) { data <- f(data,k) } 
```

# jquery - ev.preventDefault(); 和 HREF

> ID：11263993
> 
> 赞同：0
> 
> 时间：2012-06-29T14:49:45.480
> 
> 标签：jquery, html

[在回答](https://stackoverflow.com/questions/11262911/script1002-syntax-error-line-1-character-6)了我的最后一个问题之后，我再也没有看到 preventDefault(); 之前的功能。

所以我现在的问题是，最好的方法是什么？我做了以下代码

```
<!DOCTYPE html>
<head>
    <script type='text/javascript' src='files/jquery-1.7.2.min.js'></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#abc").click(function(ev) {
            ev.preventDefault();
            alert('hey');
            });
        });
       </script>
</head>
<body>
    <h1>helloasdasdasdsad</h1>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <a href="javascript:void();" id="abc">Link 1: javascript:void();</a><BR><BR>
    <a href="#" id="abc">Link 2: #</a><BR><BR>
    <a href="javascipt:void(0);" id="abc">Link 3: javascript:void(0);</a><BR><BR>
    <a id="abc">Link 4: NO HREF</a><BR><BR>
</body>
</html> 
```

..我讨厌使用#，因为它会滚动到页面顶部。原来 javascript:void(); 在 href 中会导致 IE 中的语法错误。那么将 (ev) 和`ev.preventDefault();`行放在**每个**函数中的答案是什么？或者我可以`return false;`在每个函数的末尾吗？

什么是最好的、最广泛接受的做法？

编辑：好的，所以 event.preventDefault(); 是最好的使用方法，但是如果我想要一个冗余链接，那仍然不能回答 HREF 中的内容？我认为最佳做法是**始终**使用`.click`带有 的事件`<a href="">`，因为某些较旧的浏览器不会响应单击事件或将鼠标悬停在 DIV/SPAN/IMG 元素上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:51:40.347

请参阅这篇[很棒的帖子](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)，它应该可以回答您的问题。此外，您不需要在 hrefs 中添加任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:51:45.797

对于您不希望单击执行任何操作的锚点，请添加 preventDefault()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T14:59:55.197

如果您的链接只有一个空的`href="#"`，也许您应该考虑使用 a`<span>`或 a`<div>`代替。这样你就不需要了`e.preventDefault()`。

`e.preventDefault()`并且`return false`都阻止默认事件行为。`return false`还可以防止事件冒泡 DOM。

[如果你想要不显眼的代码](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)`href="javascript:void();`，应该避免使用。

还要确保不要在多个地方使用相同的 id，就像使用“ABC”一样

# wpf - 实体框架连接字符串与远程服务器（URL）

> ID：11263999
> 
> 赞同：0
> 
> 时间：2012-06-29T14:50:11.367
> 
> 标签：wpf, entity-framework, connection-string, sqlconnection

这是一个引用实体框架类库的 WPF 应用程序。在类库项目的 App.config 中，我有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

都非常标准。我想要做的是添加一个连接字符串，这将使我能够通过数据库的 URL 连接到远程服务器。这有可能吗？

我试过这样的事情：

```
<connectionStrings>
    <add name="LanguageEntities" connectionString="metadata=res://*/LanguageModel.csdl|res://*/LanguageModel.ssdl|res://*/LanguageModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=http://www.myweb.net:667;User ID=Remote;Password=cleverstring;initial catalog=LanguageModel.LanguageEntities;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

但是我的应用程序似乎默认为本地连接而没有给我一条错误消息。

任何建议都非常感激。

非常感谢！