# StackOverflow 问答 10801000-10801999

# python - 如何保存谷歌搜索的图像？

> ID：10801000
> 
> 赞同：0
> 
> 时间：2012-05-29T14:17:44.117
> 
> 标签：python, google-api

我想将 Google 图片搜索的前三张图片保存到我的本地驱动器。为此，我需要一个 API。Google 有[Google Image Search API](https://developers.google.com/image-search/)，但现在似乎已弃用。

1.  有替代方案吗？
2.  如果不是，是否违反谷歌的服务条款来解析网页本身？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:21:21.680

您现在可以改用[自定义搜索 API](https://developers.google.com/custom-search/)。这是一个[起点](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=1210656)。

希望有帮助。

# javascript - 数据为动态 .html jquery mobile 我想将动态数据添加到选项菜单。我用过.html（对象）。对象的格式为 '<option>ww</option>....<option>xx</option>'

> ID：10801001
> 
> 赞同：0
> 
> 时间：2012-05-29T14:17:44.893
> 
> 标签：javascript, select, dynamic, jquery-mobile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:53:22.980

尝试

```
$('#description').html(cc).trigger('create') 
```

或者

```
$('#description').html(cc).trigger('refresh') 
```

取决于元素是否是全新的。

请参阅[http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)中的**增强新标记**

# java - Java - 错误：long n = 8751475143；

> ID：10801003
> 
> 赞同：0
> 
> 时间：2012-05-29T14:17:59.773
> 
> 标签：java, long-integer

这个数字属于长期范围，那么为什么我会收到错误消息：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The literal 8751475143 of type int is out of range 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T14:18:56.347

做了

```
long n = 8751475143L; 
```

`L`将使它长字面意思

默认情况下它的`int`

> 如果整数文字以 ASCII 字母 L 或 l (ell) 为后缀，则它是 long 类型；否则它是 int 类型（§4.2.1）。后缀 L 是首选，因为字母 l（ell）通常很难与数字 1（一）区分开来。[[..]](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T14:19:06.143

解析文字时不考虑赋值的目标 - 所以你需要 L 后缀：

```
long n = 8751475143L; 
```

在大多数情况下 - 也*有*一些值得注意的例外 - 表达式的类型是在没有太多参考其上下文的情况下确定的。因此，根据[JLS 的第 3.10.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)，整数文字是类型的`int`，除非它具有`l`or`L`后缀，并且类型的整数文字的`int`范围当然限于其自身的范围`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:25:37.533

java 中的所有数字都被视为`integer`s，除非您另有说明（或者您使用小数分隔符 - 然后它们被视为`float`s）。

所以，如果你写

`long i = 1234;`

java会将数字`1234`作为`integer`，并`long`为您进行类型转换。

但是，如果您键入：

`long n = 8751475143;`

Java 不能`8751475143`视为`integer`，因为它超出了范围。您需要通过在末尾添加“L”来指定您的意思是`long`：

`long n = 8751475143L;`

# jquery - 打开对话框时出现奇怪的 IE 行为

> ID：10801010
> 
> 赞同：3
> 
> 时间：2012-05-29T14:18:22.880
> 
> 标签：jquery, internet-explorer, cross-browser, datatables, jquery-ui-dialog

考虑到很难证明问题¹ ，这可能是一个很难回答的问题。

我正在使用 datatables + datatables jEditable，但我已经完全更改（和改进）代码，以便当用户双击表中的一行时，会打开一个带有表单的 jQuery UI 对话框，您可以在其中编辑该行。它利用一种形式完成两项任务，即添加和编辑。

这在所有浏览器中都很好，除了你猜对的：IE。
我发誓，这是迄今为止我见过的 IE 最奇怪的行为。

当你双击一行时，对话框不会出现，但是当你打开开发工具（F12）时，它突然起作用了。

澄清

1.  用户打开 Internet Explorer（在本例中为 IE9，但它也发生在早期版本上）
2.  用户浏览 Intranet
3.  用户双击数据表行。没发生什么事。
4.  用户打开开发工具 (F12) 并关闭它
5.  用户双击数据表行。对话框打开。
6.  用户关闭选项卡并重新打开并再次导航到那里。一切正常。
7.  用户关闭 Internet Explorer
8.  重复步骤 1 到 8

我无法调试问题很烦人，因为一旦我打开调试器它就会消失......！

我原本以为是因为IE上的内网站点默认是在兼容性视图中打开的，所以我改变了这个设置，希望它能解决这个问题。
它没有。

此外，一旦打开开发工具并刷新页面，就没有错误或任何错误代码的迹象。

所以... 怎么了？

[¹代码比较复杂，不知道能不能把它简化得够多，做个演示。这是在内网上完成的，使用的数据是分类的，所以我也不允许/不能直接给你看。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T14:34:55.303

这可能不是你的麻烦的原因。但我之前在 IE 中看到过类似的行为。罪魁祸首是`console.log`代码中的一个流浪者。在 IE中直到开发工具打开后才存在，并在开发工具关闭后`window.console`继续存在。`window`如果您的代码中有杂散`console.log`，它可能会阻止对话框按原样打开`console`，`undefined`然后从您尝试调试它的那一刻开始。

如果您想测试这种可能性但又不想追捕流浪者，只需将以下内容添加到文档顶部：

```
if (!window.console) {
  this.console = {
    log: $.noop
  };
} 
```

# php - 让这个 PHP 代码更高效？

> ID：10801011
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:18:25.473
> 
> 标签：php, arrays

> **可能重复：**
> [php中的逗号分隔列表](https://stackoverflow.com/questions/4682913/comma-separated-list-in-php)

问题：

我希望能够遍历一个未知大小的列表，并吐出一个逗号分隔的列表。

**例如：**

```
Input:
  $data = array();
  $data[0]['productId'] = 11;
  $data[1]['productId'] = 22;
  $data[2]['productId'] = 33;
  $data[3]['productId'] = 44; 
```

**以下代码可以解决问题：**

```
$prodsToCheck = "";
foreach ($data as $d) {
  $prodsToCheck .= $d['productId'].", ";
}
$prodsToCheck = substr($prodsToCheck, 0, strlen($prodsToCheck) - 2); // THIS IS THE IMPORTANT PART

print $prodsToCheck; die(); 
```

**结果必须是**

11、22、33、44

并不是：

11、22、33、44、

这不可能是最快的方法……什么是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:21:40.977

您的示例和您的代码不连贯，因此我决定忽略该示例，否则问题将太简单。

你可以像这样使用 implode、array_map 和匿名函数：

```
$prodsToCheck = implode(
   ", ", 
   array_map(
       function($element) { return $element['productId'];}, 
       $data)); 
```

完全未经测试，应该可以使用 php 5.3+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:19:48.790

`print implode(", ", $array);`

阅读内[爆](http://php.net/implode)。

# jquery - 头像更换功能

> ID：10801012
> 
> 赞同：0
> 
> 时间：2012-05-29T14:18:35.253
> 
> 标签：jquery, css

![在此处输入图像描述](../Images/768a6b3a5519adc6f5483669f2c90f64.png)

这是头像更改和上传。当我单击“上传新图像”按钮时，将出现第一个浏览窗口，然后我选择一个头像，然后将显示所选头像。这个功能可以在 Jquery 上实现吗？

我的尝试：http: [//jsfiddle.net/anglimass/uBGpR/](http://jsfiddle.net/anglimass/uBGpR/)

任何人请帮助我！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:23:32.067

这可以使用[AJAX Upload](http://valums.com/ajax-upload/) jQuery 插件来完成。

首先包括 jQuery 和插件：

```
<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/ajaxupload.js" type="text/javascript"></script> 
```

最终的 JavaScript：

```
$(document).ready(function(){

  var thumb = $('img#thumb'); 

  new AjaxUpload('imageUpload', {
    action: $('form#newHotnessForm').attr('action'),
    name: 'image',
    onSubmit: function(file, extension) {
      $('div.preview').addClass('loading');
    },
    onComplete: function(file, response) {
      thumb.load(function(){
        $('div.preview').removeClass('loading');
        thumb.unbind();
      });
      thumb.attr('src', response);
    }
  });
}); 
```

这个例子取自[这个非常好的教程](http://www.zurb.com/playground/ajax_upload)。

# java - LWJGL 纹理和字符串

> ID：10801016
> 
> 赞同：17
> 
> 时间：2012-05-29T14:18:48.513
> 
> 标签：java, image, lwjgl

`LWJGL`是否可以在不使用 Slick 框架的情况下加载 PNG 纹理并绘制字符串？

每次我谷歌*“如何在 lwjgl 中加载 png 图像”时，*我都会得到这样的答案 -> *“嘿，只需使用光滑框架中的纹理加载器”*。
与*“如何在 lwjgl 中绘制字符串”*相同-> *“只需使用 slick 框架中的 TTFFont 类”*

但我不想使用这种中途交叉框架设计。因为我不认为这是最好的方法。

是否有任何`LWJGL`仅适用于纹理或字符串的库或扩展？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-03T16:40:08.960

基本上，您获取一个`BufferedImage`，使用[getRGB()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int,%20int,%20int,%20int%5B%5D,%20int,%20int%29)获取每个像素的 RGB，获取该数据并将其放入[ByteBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html)（用于将图像数据输入到 OpenGL 的数据类型），设置一些纹理数据，然后创建`GL_TEXTURE_2D`.

[Krythic](https://stackoverflow.com/users/3214889)的这段代码做到了：

```
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.nio.ByteBuffer;

import javax.imageio.ImageIO;

import org.lwjgl.BufferUtils;
import org.lwjgl.opengl.GL12;

import static org.lwjgl.opengl.GL11.*;

public class TextureLoader {
    private static final int BYTES_PER_PIXEL = 4;//3 for RGB, 4 for RGBA
       public static int loadTexture(BufferedImage image){

          int[] pixels = new int[image.getWidth() * image.getHeight()];
            image.getRGB(0, 0, image.getWidth(), image.getHeight(), pixels, 0, image.getWidth());

            ByteBuffer buffer = BufferUtils.createByteBuffer(image.getWidth() * image.getHeight() * BYTES_PER_PIXEL); //4 for RGBA, 3 for RGB

            for(int y = 0; y < image.getHeight(); y++){
                for(int x = 0; x < image.getWidth(); x++){
                    int pixel = pixels[y * image.getWidth() + x];
                    buffer.put((byte) ((pixel >> 16) & 0xFF));     // Red component
                    buffer.put((byte) ((pixel >> 8) & 0xFF));      // Green component
                    buffer.put((byte) (pixel & 0xFF));               // Blue component
                    buffer.put((byte) ((pixel >> 24) & 0xFF));    // Alpha component. Only for RGBA
                }
            }

            buffer.flip(); //FOR THE LOVE OF GOD DO NOT FORGET THIS

            // You now have a ByteBuffer filled with the color data of each pixel.
            // Now just create a texture ID and bind it. Then you can load it using 
            // whatever OpenGL method you want, for example:

          int textureID = glGenTextures(); //Generate texture ID
            glBindTexture(GL_TEXTURE_2D, textureID); //Bind texture ID

            //Setup wrap mode
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL12.GL_CLAMP_TO_EDGE);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL12.GL_CLAMP_TO_EDGE);

            //Setup texture scaling filtering
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

            //Send texel data to OpenGL
            glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, image.getWidth(), image.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

            //Return the texture ID so we can bind it later again
          return textureID;
       }

       public static BufferedImage loadImage(String loc)
       {
            try {
               return ImageIO.read(MainClass.class.getResource(loc));
            } catch (IOException e) {
                //Error Handling Here
            }
           return null;
       }
} 
```

要使用此代码，请执行以下操作：

```
BufferedImage image = TextureLoader.loadImage("/res/test.png");//The path is inside the jar file
int textureID = TextureLoader.loadTexture(image); 
```

您可以将 textureID 保存为`final`变量（如果纹理从不改变），或者在每次渲染后使用`GL11.glDeleteTextures(textureID);`

要做文本，只需`BufferedImage`手动创建一个，然后使用[createGraphics()](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#createGraphics%28%29)获取图像的[graphics2D()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics2D.html)实例。然后，使用`drawString()`绘制到`BufferedImage`，将其加载到`TextureLoader`，在屏幕上渲染，并使用上述方法卸载纹理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-27T11:15:22.217

LWJGL 现在包括 STB 绑定，这是加载图像和字体的首选方式，无需使用 Slick 甚至 AWT。

要加载 PNG：

```
import static org.lwjgl.opengl.GL11.GL_REPEAT;
import static org.lwjgl.opengl.GL11.GL_LINEAR;
import static org.lwjgl.opengl.GL11.GL_RGBA;
import static org.lwjgl.opengl.GL11.GL_TEXTURE_2D;
import static org.lwjgl.opengl.GL11.GL_TEXTURE_MAG_FILTER;
import static org.lwjgl.opengl.GL11.GL_TEXTURE_MIN_FILTER;
import static org.lwjgl.opengl.GL11.GL_TEXTURE_WRAP_S;
import static org.lwjgl.opengl.GL11.GL_TEXTURE_WRAP_T;
import static org.lwjgl.opengl.GL11.GL_UNPACK_ALIGNMENT;
import static org.lwjgl.opengl.GL11.GL_UNSIGNED_BYTE;
import static org.lwjgl.opengl.GL11.glBindTexture;
import static org.lwjgl.opengl.GL11.glGenTextures;
import static org.lwjgl.opengl.GL11.glPixelStorei;
import static org.lwjgl.opengl.GL11.glTexImage2D;
import static org.lwjgl.opengl.GL11.glTexParameteri;
import static org.lwjgl.opengl.GL30.glGenerateMipmap;
import static org.lwjgl.stb.STBImage.stbi_load_from_memory;
import static org.lwjgl.system.MemoryStack.stackPush;
import static org.lwjgl.demo.util.IOUtils.ioResourceToByteBuffer;

import java.nio.ByteBuffer;
import java.nio.IntBuffer;

import org.lwjgl.system.MemoryStack;

public class Texture{
    private int width;
    private int height;
    private int id;

    public Texture(String imagePath) {
        ByteBuffer imageData = ioResourceToByteBuffer(imagePath, 1024);

        try (MemoryStack stack = stackPush()) {
            IntBuffer w = stack.mallocInt(1);
            IntBuffer h = stack.mallocInt(1);
            IntBuffer components = stack.mallocInt(1);

            // Decode texture image into a byte buffer
            ByteBuffer decodedImage = stbi_load_from_memory(imageData, w, h, components, 4);

            this.width = w.get();
            this.height = h.get();

            // Create a new OpenGL texture 
            this.id = glGenTextures();

            // Bind the texture
            glBindTexture(GL_TEXTURE_2D, this.id);

            // Tell OpenGL how to unpack the RGBA bytes. Each component is 1 byte size
            glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

            // Upload the texture data
            glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, this.width, this.height, 0, GL_RGBA, GL_UNSIGNED_BYTE, decodedImage);

            // Generate Mip Map
            glGenerateMipmap(GL_TEXTURE_2D);
        }
    }
} 
```

更完整的图像加载和文本打印示例可以在 LWJGL 源代码中找到：

[org.lwjgl.demo.stb](https://github.com/LWJGL/lwjgl3/tree/master/modules/samples/src/test/java/org/lwjgl/demo/stb)

# python - 使用单线程时 Queue.full() 是否可靠？

> ID：10801019
> 
> 赞同：3
> 
> 时间：2012-05-29T14:18:53.653
> 
> 标签：python, multithreading, thread-safety, queue

Python 的[线程安全`Queue`](http://docs.python.org/library/queue.html)[`Queue.full()`](http://docs.python.org/library/queue.html#Queue.Queue.full)对象有一个用以下文档命名的有用函数：

> 如果队列已满，则返回 True，否则返回 False。如果 full() 返回 True，则不能保证对 get() 的后续调用不会阻塞。同样，如果 full() 返回 False，则不能保证后续调用 put() 不会阻塞。

很明显，在`put()`队列中有多个线程项和多个线程`get()`项的多线程场景中，存在竞争条件。但是，如果只有一个线程使用`put()`，而一个不同的线程使用`get()`的值不能`full()`被信任？
这是一个特定于 Python 实现的问题吗？如果是这样，CPython 的答案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:25:39.023

如果你的意思是你只使用一个线程来做所有事情，那么是的。如果没有其他东西在访问它，那么它就无法改变。

如果您的意思是总体上两个线程，那么不，仍然存在竞争条件的机会。

无论哪种方式，真正的问题是您为什么要这样做？试试看，如果失败就捕获异常——这就是 Python 的方式。

```
try:
    some_queue.get_nowait()
except queue.Empty:
    do_something_else() 
```

这具有将来线程安全的优点，并且在任何情况下都避免了竞争条件（不需要线程来导致它，您只需进行调用即可在检查和获取之间偶然更改代码） .

编辑：正如[larsmans](https://stackoverflow.com/users/166749/larsmans)在下面的评论中指出的，在与竞争条件有关的其他问题中，CPython 已`Queue.full()`标记为*可能在某些时候被删除*，因此还有另一个避免它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:06:05.057

我曾经观察到 Queue() 中 isfull 信息的更新延迟，因为它本身使用了一个特殊的线程（！）来执行诸如 put 和 get 之类的操作。所以即使我（！）只使用一个线程，我也不会依赖这个。也许队列不是。

# c++ - 如何使用 tree.hh 重新父级

> ID：10801020
> 
> 赞同：0
> 
> 时间：2012-05-29T14:18:55.560
> 
> 标签：c++, n-ary-tree

在这里，我有一个带有行组列表的窗口。在上图中，路径 2 到 6 是 Group1 的子节点。

[http://i.stack.imgur.com/zb4FB.png](http://i.stack.imgur.com/zb4FB.png)

用于这棵树的容器是[tree.hh](http://tree.phi-sci.com/documentation.html "树.hh")。我将使用什么函数使 Group1（及其子级）成为路径 10 的子级。我不想删除行并将它们重新放回原处，只是重新父级。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:28:01.237

I guess you should look at [`::move_after()`](http://tree.phi-sci.com/doxygen/html/classtree.html#e7f72ba46cd061f71720c731b4a9bf63)

# postgresql - 调整两列与一组整数的比较

> ID：10801023
> 
> 赞同：1
> 
> 时间：2012-05-29T14:19:00.477
> 
> 标签：postgresql, indexing, database-performance, performance

有这个`WHERE`条款：

```
WHERE detail.element_id IN (4, 5, 6, 7, 8) AND
      (
        detail.additionalelement_id IS NULL OR
        detail.additionalelement_id IN (4, 5, 6, 7, 8)
      ) 
```

我们可以创建什么样的索引/对象来优化查询的性能？
您将如何以更有效的方式重写此子句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:22:49.123

并在两者上创建一个索引，`detail(element_id)`并`detail(additionalelement_id)`让 postgres 决定使用哪个。

（编辑删除使用`coalesce(detail.additionalelement_id, -1)`）

# asp.net-mvc-3 - 遍历模型并更新值 (ASP.NET MVC3)

> ID：10801027
> 
> 赞同：0
> 
> 时间：2012-05-29T14:19:16.317
> 
> 标签：asp.net-mvc-3, entity-framework

我有一个网站，我想删除所有超过 15 天的广告。我不想从数据库中删除帖子，而只是将它们标记为“已删除 = true”。我试图在遍历广告列表时更新值，但没有成功。这是我的代码：

```
 [Authorize]
    [ValidateAntiForgeryToken]
    [HttpPost]
    public ActionResult RemoveOldAdsConfirmed()
    {
        DateTime removeDate = DateTime.Now.AddDays(-15);
        var removeAds = db.Ads.Where(a => a.Date <= removeDate && a.Deleted != true).OrderByDescending(a => a.Date);

        foreach (var items in removeAds)
        {
            // remove the images related to that specific ad
            foreach (var item in items.Images.ToList())
            {
                // remove image from disk
                System.IO.File.Delete(Server.MapPath("~/Content/img/UserUploads/") + item.ImageUrl);
                System.IO.File.Delete(Server.MapPath("~/Content/img/UserUploads/") + "medium_" + item.ImageUrl);
                System.IO.File.Delete(Server.MapPath("~/Content/img/UserUploads/") + "small_" + item.ImageUrl);

                // remove image from db
                Image deleteImage = db.Images.Find(item.ImageId);
                db.Images.Remove(deleteImage);
                db.SaveChanges();
            }

            // mark the ad as "Deleted"
            items.Deleted = true;

            // update the db
            db.Entry(items).State = EntityState.Modified;
            db.SaveChanges();
        }
        // Redirect to view that lists ads that should be removed
        return RedirectToAction("RemoveOldAds");
    } 
```

这是我的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace AlltForMusik.Models
{
public class Ad
{
    public virtual int AdId { get; set; }

    public virtual int CategoryId { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    [StringLength(70, ErrorMessage = "Max 70 tecken")]
    [Display(Name="Rubrik")]
    public virtual string Headline { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    [Display(Name = "Beskrivning")]
    [DataType(DataType.MultilineText)]
    public virtual string Text { get; set; }

    [ScaffoldColumn(false)]
    public virtual DateTime Date { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    [Display(Name = "Pris")]
    [Range(0, 999999999)]
    public virtual int Price { get; set; }

    [Display(Name = "Kan skickas")]
    public virtual int KanSkickas { get; set; }

    [Display(Name = "BVSA")]
    public virtual int BVSA { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    [StringLength(40, ErrorMessage = "Max 40 tecken")]
    [Display(Name = "Ditt namn")]
    public virtual string Name { get; set; }

    [StringLength(15, ErrorMessage = "Max 15 tecken")]
    [Display(Name = "Telefon")]
    public virtual string Phone { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    [StringLength(100, ErrorMessage = "Max 100 tecken")]
    [DataType(DataType.EmailAddress)]
    [RegularExpression(@"^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-zA-Z0-9]{1}[a-zA-Z0-9\-]{0,62}[a-zA-Z0-9]{1})|[a-zA-Z])\.)+[a-zA-Z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$",
                                    ErrorMessage="Inte en giltig e-postadress")]
    [Display(Name = "E-post")]
    public virtual string Email { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    [Display(Name = "Län")]
    public virtual int CountyId { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    [Display(Name = "Stad")]
    public virtual int CityId { get; set; }

    [Required(ErrorMessage = "Obligatoriskt fält")]
    public virtual int Type { get; set; }

    public string Password { get; set; }

    public bool Deleted { get; set; }

    [Display(Name = "Kategori")]
    public virtual Category Category { get; set; }

    public virtual ICollection<Image> Images { get; set; }

}
} 
```

我收到此错误消息：

异常详情：

> System.Data.Entity.Validation.DbEntityValidationException：
> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

问题是什么？

最好的问候米凯尔

# javascript - Require.js 有些不清楚

> ID：10801028
> 
> 赞同：1
> 
> 时间：2012-05-29T14:19:18.347
> 
> 标签：javascript, backbone.js, require

我正在尝试使用[requirejs](http://requirejs.org/)并加载外部供应商 js 并隐藏 Backbone 或 Underscore 等全局变量。

这是我的代码：

```
<script data-main="./main" src="<?php echo $rootRequirejs?>/require.js"></script>
<script type="text/javascript">
    require.config({
        baseUrl: "/web/js",
        paths: {
            "jquery": "/vendor/js/jquery-1.7.1.min",
            'underscore': '/vendor/js/underscore-min',
            'backbone': '/vendor/js/backbone-min'
        }
    }); 
```

这是我的问题：

1）如果我去 javascript 控制台并写 Backbone 或下划线，它们被定义......。
我认为它应该不能从控制台访问，而只能从我的 main.js 文件中访问。
为什么它们是全球性的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:39:01.017

由于库本身（骨干网等）的编写方式，这些默认情况下将是全局的 - 它们明确使用全局空间（b/c 很好，这就是 js 的工作方式）。您是否尝试过这些库[的 AMD 分支？](https://github.com/amdjs)

正如弗洛里安在上面的评论中指出的那样，也许一个更好的选择是使用 Require2.0，因为它现在带有一个[“垫片”功能](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim)，可以帮助您使用非 AMD 库......虽然我不确定这会消除全局变量.

首先，除非您有特定的理由避免使用全局变量，否则它们通常没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:35:43.067

您可以使用包装到 AMD 模块中的那些库的 amd 版本，这应该避免使用全局变量：

[https://github.com/amdjs/backbone](https://github.com/amdjs/backbone)

[https://github.com/amdjs/underscore](https://github.com/amdjs/underscore)

它们由 RequireJS 的作者 James Burke 维护。

希望这能解决您的问题！

# ms-word - 需要一个简单的工具来绘制箭头和标签

> ID：10801031
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:19:27.127
> 
> 标签：ms-word, annotations, ms-office, photoshop, diagram

我正在尝试使用一堆屏幕截图和箭头以及为每个箭头编号的标签来制作一个模拟技术指南。

我正在寻找一种允许我绘制箭头的工具（我知道我可以用 microsoft word 做到这一点）并贴上数字标记每个箭头（用 word 做更多的工作），所以我想知道是否已经有了允许我这样做的开箱即用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:31:13.617

我不确定您在创建文档方面要更有效地做些什么。如果您需要做很多图表，那么 MS Visio 就是您想要的程序。

如果您正在参考图表，请[单击此处获取有关制作编号箭头标签的综合教程。](http://www.boxesandarrows.com/view/wireframe_annotations_in_visio_special_deliverable_11 "Annotations Tutorial")

# linux - 命令行：监控日志文件并将数据添加到数据库

> ID：10801034
> 
> 赞同：0
> 
> 时间：2012-05-29T14:19:46.593
> 
> 标签：linux, perl, unix, command-line, tail

我正在监视一个日志文件。每行具有以下格式：

```
2012    5       29      14      20              438.815 872.737 -1.89976       -0.55156     8.68749 -0.497848       -0.54559                0       0       6      00       0       0       0               0       0       0       0       0      80       9               0       0       10      0       0       0       8      00       9       0       0       0       0       0       0               2      41       84      0       0       0       1       0 
```

如您所见，每个值都由制表符分隔。

如何编写 Perl 脚本来获取每一行新数据（日志文件每十分钟更新一次）并将这些数据插入 MySQL 数据库？

我想在命令行上做尽可能多的事情。

如果我这样做`tail -f -n 1 ./Eamorr.out > myPerlScript.pl`，我的 perl 脚本会在每次附加文件时获取数据吗？

提前谢谢了，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:42:58.743

bash 中的另一种方法：

```
#!/usr/bin/perl -w

use strict;

$|++; # unbuffer output

open FH, "tail -f /var/log/syslog |";

while (<FH>) { chomp; print; } 
```

在纯 shell 中没有 Perl：

```
tail -f /var/log/syslog |
    while read a; do
        echo "INSERT INTO FOOBAR VALUES($(
            sed "s/ /','/g; s/^/'/; s/$/'/" <<< "$a")
        );"
    done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:36:21.033

如果这是您要采用的方法，则需要一个管道，例如：

```
tail -f -n 1 ./Eamorr.out | myPerlScript.pl 
```

where`myPerlScript.pl`读取传入的行，如：

```
while (<>) {
chomp;
print "Handling: $_\n"; 
```

}

# haskell - 迭代 + 永远 = iterateM？使用反馈重复操作

> ID：10801036
> 
> 赞同：7
> 
> 时间：2012-05-29T14:19:53.553
> 
> 标签：haskell, monads

我试图永远重复一个 IO 操作，但是将一个执行的结果输入到下一个执行中。像这样的东西：

```
-- poorly named
iterateM :: Monad m => (a -> m a) -> a -> m b
iterateM f a = f a >>= iterateM f 
```

Hoogle 似乎对我没有帮助，但我看到很多功能看起来非常接近我想要的功能，但似乎没有一个功能完全符合我的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:16:12.457

你是对的，我不知道这种特殊循环在哪里实现。你的实现看起来不错；为什么不将它作为补丁提交给[monad-loops](http://hackage.haskell.org/package/monad-loops)包呢？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T15:08:25.543

好吧，我希望`iterateM`组合器具有这种类型签名：

```
iterateM :: (Monad m) => (a -> m a) -> a -> m [a] 
```

当然，这不是一个非常有用的组合器，因为您无法在大多数 monad 中提取结果。与组合器的基本命名标准一起使用的更明智的名称是`iterateM_`：

```
iterateM_ :: (Monad m) => (a -> m a) -> a -> m b
iterateM_ f = fix $ \again x -> f x >>= again 
```

这个组合器很有用：

```
countFrom :: (Enum a) => a -> IO b
countFrom = iterateM_ (\x -> succ x <$ print x) 
```

但是，为了简单起见，我只会使用`fix`或显式递归。显式递归代码不会更长或更不可读：

```
countFrom :: (Enum a) => a -> IO b
countFrom = fix (\again x -> print x >> again (succ x)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T14:33:03.583

我相信您在标准库中看不到它的原因是它永远不会终止。iterate 函数可以利用惰性列表来允许您使用`take`结果列表上的函数指定终止。在这里，你的结果是一元的，所以这是不可能的。

显然你的想法的精神是可以做到的。它只是看起来有点不同：

```
iterateM :: Monad m => Int -> (a -> m a) -> a -> m a
iterateM 0 _ a = return a
iterateM n f a = f a >>= iterateM (n-1) f 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:33:01.153

这实际上可以`forever`用`StateT`.

```
import Control.Monad.Trans.State
import Control.Monad.Trans.Class (lift)
import Control.Monad (forever)

iterateM :: Monad m => (a -> m a) -> a -> m b
iterateM f = evalStateT $ forever $ get >>= lift . f >>= put 
```

# blackberry - 用js计算的文本缩进在黑莓上是错误的 - 如何调试？

> ID：10801037
> 
> 赞同：0
> 
> 时间：2012-05-29T14:20:02.383
> 
> 标签：blackberry

我需要在跨设备和浏览器的选择列表中居中文本。这不能用文本对齐中心来完成，所以我使用 javascript 来计算所需的文本缩进值并应用它。这个小提琴显示一切正常：

[http://jsfiddle.net/mnu6D/8/](http://jsfiddle.net/mnu6D/8/)

我不能把我的实际代码放到网上。它适用于桌面浏览器、iPhone、iPad 和 Android，但在 Blackberry 中，它看起来文本缩进不够。我无法弄清楚为什么会发生这种情况并且没有萤火虫类型的工具我不知道如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:51:14.737

解决方案很奇怪。当我取消隐藏用于将文本放入要测量的跨度时，我可以看到它的正确字体大小。但是再次设置字体大小使 js 计算工作。

# .net - .NET Framework：Silverlight 和 DAL 连接

> ID：10801039
> 
> 赞同：1
> 
> 时间：2012-05-29T14:20:17.327
> 
> 标签：.net, silverlight, data-access-layer

我试图在 Silverlight 中将我的 DAL（数据访问层）与我的 BL（业务层）连接起来，但我在 Internet 上没有找到任何简单的示例。

拜托，有人可以帮助我，我是 .NET Framework 的初学者，我真的迷路了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:51:58.183

您需要像本教程一样在 C# 中使用 WebService：http: [//www.codeproject.com/Articles/112470/Developing-a-REST-Web-Service-using-CA-walkthroug](http://www.codeproject.com/Articles/112470/Developing-a-REST-Web-Service-using-C-A-walkthroug)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:21:56.970

您只需使用 WebService 将您的 C# Dal 与您的 Silverlight 演示文稿连接起来。

# php - 通过 FTP 服务器上的 PHP 检查文件大小以获取没有扩展名的文件？

> ID：10801041
> 
> 赞同：0
> 
> 时间：2012-05-29T14:20:18.357
> 
> 标签：php, javascript, ajax, ftp

我正在尝试为使用 PHP 的 FTP 文件创建进度条。为此，我需要找到要下载的项目的文件大小。问题是该文件没有扩展名 - 它只是“地图”。使用 PHP 时，`filesize()`我会遇到一些错误。我的假设是它需要指定一个扩展名（使用扩展名进行测试并且工作正常）。最后我想做什么：

1.  确定远程文件的文件大小
2.  开始 FTP 下载
3.  向本地文件发送 AJAX 调用以确定其文件大小
4.  用JS增加显示的进度条

我的假设是这应该有效 - 也就是说，如果我可以在没有定义扩展名的情况下确定文件的初始大小。

这是可能的，还是有另一种可能更容易的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:05:53.127

如果我正确理解您要做什么（从 FTP 服务器下载远程文件），我认为您不能使用`filesize`功能，因为它只处理本地文件。要获取 FTP 服务器上远程文件的文件大小，您需要使用以下内容：

```
$file = '/remote/path/map';
$conn_id = ftp_connect($ftp_server);
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
$res = ftp_size($conn_id, $file);

if ($res != -1) {
    echo "size of $file is $res bytes";
} else {
    echo "couldn't get the size";
}
ftp_close($conn_id); 
```

看看[ftp_size 函数](http://php.net/manual/en/function.ftp-size.php)。

# spring - 带有 Spring 的 Quartz 没有提交

> ID：10801048
> 
> 赞同：5
> 
> 时间：2012-05-29T14:20:38.497
> 
> 标签：spring, hibernate, jpa, quartz-scheduler

我正在使用石英、Spring 和 Hibernate 作为 JPA 提供程序。数据库是甲骨文。

我有一种将文件写入文件系统并使用详细信息更新数据库的方法。该方法可以通过两种方式调用：

1.  使用网络服务
2.  或者，作为预定的 quatrz 作业。

我已将石英设置为：

```
<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean" lazy-init="false" scope="singleton">
        <property name="autoStartup" value="true"/>
        <property name="waitForJobsToCompleteOnShutdown" value="true"/>
        <property name="overwriteExistingJobs" value="true"/>
        <property name="dataSource" ref="dataSource"/>
        <property name="transactionManager" ref="transactionManager"/>
        <property name="quartzProperties">
            <props>
                <prop key="org.quartz.scheduler.instanceName">FileScheduler</prop>
                <prop key="org.quartz.scheduler.instanceId">AUTO</prop>
                <prop key="org.quartz.jobStore.misfireThreshold">6000</prop>
                <prop key="org.quartz.jobStore.class">org.quartz.impl.jdbcjobstore.JobStoreTX</prop>
                <prop key="org.quartz.jobStore.driverDelegateClass">${driverDelegateClass}</prop>
                <prop key="org.quartz.jobStore.tablePrefix">QRTZ_</prop>
                <prop key="org.quartz.jobStore.isClustered">true</prop>
                <prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop>
                <prop key="org.quartz.threadPool.threadCount">5</prop>
                <prop key="org.quartz.threadPool.threadPriority">5</prop>
            </props>
        </property>
    </bean> 
```

此方法使用弹簧托管事务。

问题是当石英调度程序调用此方法时，文件被创建但数据库没有更新（应该有两个表更新和一个表插入）。

我也启用了hibernate show_SQL，但是在调度程序的情况下，没有更新\插入语句被记录。

尽管当 Web 服务请求调用此方法时，这可以正常工作。日志也显示 update\insert 语句。

**更新 1**

总结一下我的问题，这就是我想要实现的目标：

1.  在员工表中创建一条新记录。
2.  将employee_id 保存在job_store（石英）中。
3.  当触发触发时，quartz 会返回employee_id
4.  根据此键检索（加载）员工记录。
5.  向员工发送电子邮件
6.  更新状态为“已发送”的通知（插入语句）

最后，我希望所有的表都会更新。

当石英触发工作时，**除了第 6 点外**，一切都在工作。代码是正确的，因为当我使用 Web 服务调用调用此方法时，表正在更新。

**更新 2**

我更新了要使用的代码

```
<prop key="org.quartz.jobStore.class">org.springframework.scheduling.quartz.LocalDataSourceJobStore</prop> 
```

但这也无济于事。

请帮忙。谢谢。阿迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:02:25.020

Quartz 在它自己的上下文中运行，即使是由 Spring 便利方法启动的，所以实际上你最终不会得到整个 Spring 应用程序上下文，除非你明确`JobDataMap`地传入 bean（参见[http://forum.springsource. org/showthread.php?76974-Why-autowired-doesn-t-work-on-a-QuartzJobBean-bean](http://forum.springsource.org/showthread.php?76974-Why-autowired-doesn-t-work-on-a-QuartzJobBean-bean)）。因此，您可以传入 Spring 管理的 bean，但如果您不需要 Quartz 的全部功能，这一切似乎有点混乱。

如果您的调度需求不是那么复杂，您可能需要考虑使用`@Scheduled`Spring 注释（[请参见此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-scheduled)），因为整个方法调用在 Spring 上下文中本地发生，然后您的事务将像在 Web 服务中一样工作称呼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T10:47:18.157

这里有两点要检查：

*   数据源必须是非 XA 数据源。如果您正在使用来自 Java EE 应用程序服务器的连接池，那么您很有可能拥有 XA 数据源。将该数据源配置为非 XA（如果您的应用程序设置和服务器允许）或创建第二个非 XA 数据源并将其传递到`nonTransactionalDataSource`属性中。如果您使用该属性，有一个小问题`nonTransactionalDataSource`- 请记住保持`dataSource`属性设置。您也无法在`nonTransactionalDataSource`不设置 (transactional)的情况下定义 a `dataSource`。

*   确保您的代码确实在 Spring 事务中运行。使用. `schedulerContextAsMap`_ `SchedulerFactoryBean`如果您运行带有注释的代码，`@Transactional`则需要自动装配。如果您对该 bean 的实例化进行硬编码，Spring 将无法应用`@Transactional`注释并默默地忽略它。

此外，删除该`org.quartz.jobStore.class`属性。在任何情况下`SchedulerFactoryBean`都会覆盖该设置。它放了一个`LocalDataSourceJobStore`，如果工厂的新版本决定放别的东西，它可能会变得混乱。

最后但并非最不重要的一点是，我想知道您是否可能忽略了某处记录的任何异常？确保您正在监视来自应用程序服务器的所有 Spring 日志消息和所有错误消息。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-13T13:04:50.317

尝试`@Transactional`注释。（参见[。http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/transaction/annotation/Transactional.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/transaction/annotation/Transactional.html)）

# sql - 如何在 SUM 语句中使用别名？

> ID：10801049
> 
> 赞同：1
> 
> 时间：2012-05-29T14:20:41.810
> 
> 标签：sql, sql-server, sql-server-2008

我不知道如何措辞这个问题，我知道措辞不好，但问题本身很简单。

这就是我想要做的。

```
 SELECT /*stuff*/
      , ISNULL (a.z, a.y) AS "c1"
      , SUM(a.x - c1) AS "c2"
 /* more stuff */ 
```

这就是发生的事情。

**列名“c1”无效。**

我什至不确定我想做的事情是否可行。我总是可以在代码的其他地方执行此操作，但我尝试让 SQL 为我完成大部分工作。

我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T14:23:30.697

您可以将查询放在另一个查询中以使用别名

```
SELECT Sum(a.x - c1) as c2
FROM
(
    SELECT /*stuff*/
      , ISNULL (a.z, a.y) AS "c1"
     /* more stuff */
) a 
```

或者

```
SELECT /*stuff*/
      , ISNULL (a.z, a.y) AS "c1"
      , SUM(a.x - ISNULL (a.z, a.y)) AS "c2"
 /* more stuff */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T14:23:15.047

您不能使用同一级别中另一列的别名`SELECT`。

你将不得不这样做 -

```
SELECT /*stuff*/
  , ISNULL (a.z, a.y) AS "c1"
  , SUM(a.x - ISNULL (a.z, a.y)) AS "c2"
/* more stuff */ 
```

还要确保该列`a.z`只有值或`NULL`列在is`a.y`时具有值。我的意思是价值观`a.z``NULL``Numbers`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T19:27:37.167

为了坚持“不要重复自己”，我将提出一个公用表表达式：

```
with cte as (
   select ISNULL (a.z, a.y) AS [c1]
   from yourTable
)
select sum([c1])
from cte 
```

这样，您不必`ISNULL (a.z, a.y)`在查询中重复该位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:25:51.040

更容易将功能组合在一条线上。如果您不需要 C1，那么只需将其作为输出消除即可。

```
SELECT /*stuff*/
      , ISNULL (a.z, a.y) AS "c1"
      , SUM(a.x - ISNULL(a.z, a.y)) AS "c2" 
```

# ios - 为什么在启用 NSZombie 时我会看到所有这些泄漏？

> ID：10801051
> 
> 赞同：4
> 
> 时间：2012-05-29T14:20:51.077
> 
> 标签：ios, memory-leaks, nszombieenabled

我的第一个应用程序即将完成，我突然发现该应用程序导致内存泄漏。我发现了一些漏洞并修复了它们。现在没有泄漏，但令我惊讶的是，当启用 NSZombie 时，它​​显示了 4000 多个主要来自框架的泄漏。

我对 NSZombie 的确切使用感到困惑。它仅用于查找僵尸还是以任何方式用于查找泄漏？

这是一个屏幕截图，显示了与框架相关的所有泄漏：

![泄漏的屏幕截图](../Images/62ac745e6df9b6cce8ae9bd6d48f8014.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T17:17:00.113

我相信命令行选项“NSDeallocateZombies”默认为 NO。所以僵尸永远不会被释放，因此如果僵尸 (NSZombiesEnabled) 处于打开状态，则会显示为泄漏。永远不要在僵尸开启的情况下测试泄漏。您也可以将 NSDeallocateZombies 设置为 YES，但我不确定它如何与 Instruments 交互。僵尸是一个特殊的对象，它响应所有异常消息。为了使它有用，它必须存在很长时间（这样当您尝试重用已释放的对象时可以捕获），但这使它看起来完全像泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:45:44.900

如果 NSZombie 启用“释放”，则不要释放内存。NSZombie 用于测试是否使用已发布的对象

# performance - 在不同的环境中复制生产负载

> ID：10801055
> 
> 赞同：1
> 
> 时间：2012-05-29T14:21:01.687
> 
> 标签：performance, amazon-web-services

是否有任何工具可以记录当前访问我的生产网站的所有请求/流量，然后在不同的环境中重播此负载以检查新环境的性能？

基本上，我希望能够测试我的应用程序在 aws 云上的性能，以及如果将其迁移到 aws 来处理生产中的当前负载需要什么配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:41:14.527

您可以使用[JMeter 的 Access Log Sampler](http://jmeter.apache.org/usermanual/component_reference.html#Access_Log_Sampler)（另请参阅[Access log replay for load testing？Jmeter Pitfalls and Competitors](https://stackoverflow.com/questions/5009999/access-log-replay-for-load-testing-jmeter-pitfalls-and-competitors)）。

这将允许您从生产服务器中获取日志，并针对您的新服务器重放流量。不确定它是否复制了确切的负载配置文件 - 实际流量往往分布在一天中，访问的高峰和低谷取决于您的时区和用户；它也不处理 POST 请求。

事实上，对于任何与检索网页无关的网络应用程序，重放历史流量都可能存在问题。例如，如果用户必须登录，您需要知道他们的密码；如果他们浏览电子商务网站中的产品目录，您需要拥有正确的数据来反映您记录日志文件时的目录。

在我看来，更有用的是根据您当前的流量构建性能模型，并了解您需要能够支持的每个（类型）页面的峰值页面请求数/秒。

例如，如果您知道今天每小时有 10K 访问者，并且您知道最常见的用户旅程，您可以构建一个性能模型，将这 10K 用户等同于“每秒登录页面请求数”、“产品主页请求数” /second", "支付页面请求/秒"; 然后，您可以使用 JMeter 之类的工具对这些旅程进行建模，并增加负载直到超出目标。

# performance - Solr 索引和搜索如何工作得如此之快？

> ID：10801057
> 
> 赞同：11
> 
> 时间：2012-05-29T14:21:02.583
> 
> 标签：performance, solr

solr 是否将索引保存在文件或内存中？我已经查看了文档，但它提到了两者，如果它将索引存储在文件中，它如何工作得如此之快？我的意思是我想了解它基本上是如何工作的？它在哪里存储索引，以及如何快速执行搜索？如果它的内存是否一直将索引加载到内存中，或者它是如何工作的？

我对这样的事情很陌生，这确实是一个非常基本的问题，它将帮助我理解其中涉及的技术细节。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T14:29:58.443

if you are new to the whole theme i would recommend this:

*   [http://en.wikipedia.org/wiki/Search_engine_technology](http://en.wikipedia.org/wiki/Search_engine_technology)
*   [http://en.wikipedia.org/wiki/Index_(search_engine)](http://en.wikipedia.org/wiki/Index_%28search_engine%29)
*   [http://en.wikipedia.org/wiki/Inverted_index](http://en.wikipedia.org/wiki/Inverted_index)

# c++ - lseek 在 Windows 中使用 2 GB 文件

> ID：10801060
> 
> 赞同：0
> 
> 时间：2012-05-29T14:21:06.330
> 
> 标签：c++, c

> **可能重复：**
> [关于文件搜索位置的问题](https://stackoverflow.com/questions/1686434/question-about-file-seeking-position)

我面临一个与 lseek() 相关的问题。如果我们尝试在 Windows（32 位机器）中访问 2GB+ 文件，它会返回失败。lseek 可以在我们正在使用的文件中设置文件指针是否有任何限制？？？偏移值是 2154654555。

编译器详细信息

c:\Program Files\Inno Setup 5\Compil32.exe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:27:16.750

您应该看看 _lseeki64，它采用 64 位偏移量。lseek()（及其后继者 _lseek()）仅限于带符号的 32 位偏移量，其上限为 2147483647。您的 215465455 偏移量超过了该值（如果存储在 long 中，将被视为负数） . 请参阅[http://msdn.microsoft.com/en-us/library/1yee101t](http://msdn.microsoft.com/en-us/library/1yee101t)。（你的编译器需要类似的东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:26:35.360

off_t 的最大值为 2147483647，其中 off_t 是 lseek() 中偏移量的类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T14:26:50.880

lseek 不适用于大于 2 GB 的文件，因为偏移量输入位于 32 位变量上，该变量不能取大于 2147483647 的值。在许多操作系统中，它要么通过编译时宏支持，要么通过提供替代函数来支持。

如果是 MSVC 编译器，您可以尝试[_lseeki64](http://msdn.microsoft.com/en-us/library/aa298446%28v=vs.60%29.aspx)。偏移量需要 64 位变量。由于您没有使用 MSVC，因此您可以检查等效功能。

# ruby-on-rails - 自定义宝石 - 如何提取？

> ID：10801070
> 
> 赞同：1
> 
> 时间：2012-05-29T14:21:46.907
> 
> 标签：ruby-on-rails, ruby, gem

我是 Ruby/Rails 的新手，我收到了一份 Rails 项目的副本。从我在线阅读的内容来看，gemfile 包含依赖项 - 即其他库。因此，如果我在 gemfile 中有一个“gem 'mycustomgem'”，并且这个 gem 不能作为开源提供，有没有办法从我拥有的项目中提取这个 gem？我已经要求编写一个新的替代版本的 rails 项目，我将需要这个自定义 gem。还是我必须联系编写自定义宝石的人？

还是我完全错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:22:48.830

打开你的 Gemfile 并替换行

```
gem 'your_gem' 
```

和

```
gem 'your_gem', :path => '/absolute_path_to_you_local_folder_with_gem' 
```

# iphone - 发布到 Facebook 并解锁关卡

> ID：10801072
> 
> 赞同：0
> 
> 时间：2012-05-29T14:21:47.967
> 
> 标签：iphone, ios, facebook

我正在编写自己的 iPhone 游戏，因为我不希望用户为我的关卡付费，所以我想允许他们在他们的 FB 或 Twitter 时间线上发布一些东西。完成后，我想免费解锁关卡，并为每个关卡包都这样做。

任何人都知道如何做到这一点？我知道我可以使用 iOS 版 Facebook API 发布状态，但如何确保操作已完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:32:45.533

你可以这样做，使用 FB 的图形 api 很容易。

您可以说用户在您的代码中发布硬编码的消息，并且您从 api 收到消息已发布在他的墙上的响应，然后您可以解锁关卡。

此外，如果您希望该用户无法编辑消息，那么您需要在后台发布消息，就像下面的代码一样简单。

```
NSMutableDictionary *dictPara = [[NSMutableDictionary alloc] init];
[dictPara setObject:objSelGameStep.smsg forKey:@"message"];
[dictPara setObject:@"status" forKey:@"type"];
[facebook requestWithGraphPath:@"me/feed" andParams:dictPara andHttpMethod:@"POST" andDelegate:self]; 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:31:59.050

每个帖子或推文都有一个确认委托方法。添加 NSNotification 以在确认完成后解锁您的关卡。

# spring - spring 如何在内部根据配置创建对象

> ID：10801077
> 
> 赞同：0
> 
> 时间：2012-05-29T14:22:11.350
> 
> 标签：spring, namespaces, instantiation

有人可以阐明spring如何根据命名空间为配置创建对象。例如。

```
 <jms:jca-listener-container resource-adapter="myResourceAdapter"
                        destination-resolver="myDestinationResolver"
                        transaction-manager="myTransactionManager"
                        concurrency="10">

<jms:listener destination="queue.orders" ref="myMessageListener"/> 
```

我想知道内部发生了什么，spring 如何实例化对象。指向框架中执行此操作的代码的指针将有很大帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:37:33.623

这是内部工作原理的[简要说明。](http://blog.springsource.org/2006/08/28/creating-a-spring-20-namespace-use-springs-abstractbeandefintionparser-hierarchy/)您还可以查看有关 TSS的[简短教程。](http://www.theserverside.com/news/1364131/Authoring-Custom-Namespaces-in-Spring-20)

# sql - 如何在更新后的表上使用多个联接更新 SQL Server 上的表？（从加入）

> ID：10801079
> 
> 赞同：4
> 
> 时间：2012-05-29T14:22:34.380
> 
> 标签：sql, sql-server, sql-update

如何在更新后的表上使用多个联接更新 SQL Server 上的表？在 MySQL 中，您可以为更新的表定义别名，但它如何与 TSQL 一起使用。

```
 UPDATE recert.ou              --#1-- In MSSQL/TSQL no alias allowed
SET parent_id = o2.ID
    FROM recert.ou as O              
    JOIN recert.country C ON C.ID = O.country_id
    JOIN recert.ou P ON O.parent_id = P.ID and p.country_id <> O.country_id     
    JOIN recert.ou o2 on o2.name = p.name and c.ID = o2.country_id              
    JOIN recert.country as c2 on c2.ID = o2.country_id
           WHERE O.ID = o2.ID 
```

-

```
RESULT: *The table 'o' is ambiguous.* 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T15:02:12.020

[这适用于 Sql Fiddle](http://sqlfiddle.com/#!3/c19eb/3)。

```
UPDATE o
SET parent_id = o2.ID
    FROM recert O
    JOIN c C ON C.ID = O.country_id
    JOIN recert P ON O.parent_id = P.ID and p.country_id <> O.country_id
    JOIN recert o2 on o2.name = p.name and c.ID = o2.country_id
    JOIN c c2 on c2.ID = o2.country_id
WHERE O.ID = o2.ID 
```

我想问题的出现是因为您尝试重新设置别名，但我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:30:30.563

您可以将所有内容移到 WHERE 子句中：

```
UPDATE o              --#1-- In MSSQL/TSQL no alias allowed
    SET parent_id = o2.ID
    FROM c, o, o o2, C c2
    Where o.country_id = c.id and o.parent_id = p.id and p.country_id <> O.country_id and
          o2.name = p.name and c.ID = o2.country_id and c2.ID = o2.country_id 
```

这*不是*我最喜欢的连接样式，但它应该足以满足您的目的。

但是，在 TSQL 中，我真的会执行以下操作。创建一个查询，返回每个 id 的新更新值。然后使用以下格式编写查询：

```
with toupdate as (<the query>)
    update o
        set o.parent_id = toupdate.id
    from toupdate
    where o.id = toupdate.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T14:35:42.857

您只需要删除 o 表的别名

```
UPDATE o              
SET parent_id = o2.ID
FROM o               
JOIN c C ON C.ID = o.country_id
JOIN o P ON o.parent_id = P.ID and p.country_id <> o.country_id   
JOIN o o2 on o2.name = p.name and c.ID = o2.country_id             
JOIN c c2 on c2.ID = o2.country_id
 WHERE o.ID = o2.ID 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-08-28T03:58:27.657

自加入更新

```
update #table1 set column1= b.column2
from #table1 #table1, #table1 b where #table1.Id=b.Id 
```

# php - AJAX 入门 - 通过 PHP 更新表单

> ID：10801082
> 
> 赞同：1
> 
> 时间：2012-05-29T14:22:37.233
> 
> 标签：php, ajax, forms, jquery

我有一个简单的 HTML 表单，它以选择菜单开头，用户可以从项目列表中进行选择。我在这里用 HTML 表单创建了一个简单的 JSFiddle：

[http://jsfiddle.net/AZ4PM/](http://jsfiddle.net/AZ4PM/)

我想要发生的是，当用户从列表中选择时，它会触发一个要执行的 php 脚本，该脚本从他们选择的 ProjectNumber 中获取值并将其作为参数传递，例如，如果我选择 Project A，则 URL 将是：

getProjectPhases.php?projectNumber=10000

然后，此 php 脚本将返回一个新的表格单元格，然后我希望将其显示为表单中的第二个单元格。它包含一个新的选择菜单，其值根据第一个选择菜单中的选择而变化。这个 php 页面手动运行良好，但我现在需要在用户从项目编号菜单中进行选择时触发它。

我是 AJAX 新手，想在学习的同时一步一步地从一个简单的示例开始。如果让事情变得更容易，我很乐意使用 jQuery。

感谢任何指向我需要包含的基本元素的指针（假设至少有一个 js 文件等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:43:58.703

我有一些非常相似的东西：

```
<select name="selectProject" id="selectID" onChange="showUser(this.options[selectedIndex].value)">

    <?php
        // Loop through and list each project
        foreach ($var as $row) {
            echo '<option value="'.$row['projectNumber'].'">'.$row['projectName'].'</option>';
        }
    ?>

</select>

<label>Project Name</label>
<input id="projectName" type="text" class="span3" name="projectName"> 
```

上面只是调用了 showUser 函数，参数是 projectNumber

然后在下面我有：

```
<SCRIPT TYPE="text/javascript">

    // Function to fill in form fields
    function showUser(str)
    {
    if (str=="")
      {
      document.getElementById("").innerHTML="";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var obj = eval('(' + this.responseText + ')');

            document.getElementById("projectName").value=obj.projectname;
        }
      }
    xmlhttp.open("GET","http://url.com/ajax/"+str,true);
    xmlhttp.send();
    }
</SCRIPT> 
```

此脚本将调用 url url.com/ajax/whateverIdIsSelected

在该页面上，您希望对查询执行任何操作。

至于返回什么，我已经设置为使用 json，这就是为什么我有这条线

```
 var obj = eval('(' + this.responseText + ')'); 
```

this.reponseText 是从 ajax 页面返回的内容。我的回电看起来像这样

```
$projectData = json_encode($project);

echo $projectData; 
```

其中 $project 是一个包含项目属性的数组。

我不太擅长 ajax 或 js，但我以我喜欢的方式工作。如果您有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:28:56.243

将 id 传递给选项选择列表

```
<select name="ProjectNumber" id="ProjectNumber"> 
```

然后调用具有这些的方法，然后通过 Ajax 调用对其进行解析。

```
var pvalue = document.getElementById('ProjectNumber').value;
var url = 'getProjectPhases.php?projectNumber='+pvalue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:30:56.070

首先，您需要将 JQuery`change()`处理程序绑定到您的下拉菜单，调用一个启动 ajax 请求的函数，看看您需要执行以下操作的 jQuery [get 函数：](http://api.jquery.com/jQuery.get/)

```
$.get("getProjectPhases.php", { projectNumber: this.val() }, function(data){
   //Update your output using the data var
); 
```

getProjectPhases 的输出在哪里`data`，所以只输出纯文本而不输出 html 标记或其他内容可能是个好主意。

# javascript - 垂直和水平滚动滚动元素（Jquery/Javascript）

> ID：10801088
> 
> 赞同：0
> 
> 时间：2012-05-29T14:23:11.460
> 
> 标签：javascript, jquery, scroll

一位朋友问我是否可以帮助她完成她正在进行的项目。她想带来一条消息，并希望通过一个用户可以滚动和阅读内容的网站来做到这一点。

在这里，您可以查看显示她正在尝试完成的内容的 PDF： [https ://www.dropbox.com/s/bew7rw1uzjv8nwc/INFOpagina.pdf](https://www.dropbox.com/s/bew7rw1uzjv8nwc/INFOpagina.pdf)

当您开始在幻灯片 4 和 5 上滚动时，您应该明白，滚动时文字和图像会从位置发生变化。所以我现在的问题是，你们知道任何可以帮助我实现这一目标的 Javascript 或 Jquery 插件吗？我已经在谷歌上搜索了很多，但找不到任何真正合适的东西。

谢谢，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:28:33.140

[jQuery Scroll Path Plugin](http://joelb.me/scrollpath/)是适合您的完美 JQuery 插件。

# c# - 在 aspx 页面中使用 PostBackURL 时无法获取值

> ID：10801091
> 
> 赞同：0
> 
> 时间：2012-05-29T14:23:14.197
> 
> 标签：c#, asp.net

我有一个带有文本框和按钮的页面。我在这个按钮上设置了一个 postbackurl 并在目标页面的加载事件上写了以下代码：

```
if (PreviousPage != null)
        {
            string name = ((TextBox)PreviousPage.FindControl("TextBox1")).Text;

            Response.Write(name);
        } 
```

在使用调试器时，我发现我收到以下错误：

```
Object reference not set to an instance of an object. 
```

我无法弄清楚问题出在哪里，因为当我将鼠标悬停在 PreviousPage 上时，我可以看到第一页名称，当我看到 TextBox1 的值时，它显示`{System.Web.UI.WebControls.TextBox}`的不是我输入的值！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:55:43.740

设置 时`PostBackUrl`，您实际上是在将表单发布到目标页面。这意味着您应该能够使用以下方式访问该值`Request.Form`：

```
string value = Request.Form["MyTextBoxValue"].ToString(); 
```

如果 form 方法是`GET`，您应该能够通过`QueryString`.

**编辑**

如果您只是需要将表单提交到另一个页面，您还可以考虑将表单更改`action`为指向目标页面。然后，您将能够使用该`Request`对象访问这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:29:42.590

我现在能够获得文本框的值。当使用带有母版页的 aspx 页面时，我们需要先获取 contentplaceholder 的引用，然后使用该引用来获取文本框的引用。

```
ContentPlaceHolder Content1 =(ContentPlaceHolder)PreviousPage.Master.FindControl("MainContent");
            TextBox SourceTextBox =
    (TextBox)Content1.FindControl("TextBox1");
       Response.Write(SourceTextBox.Text); 
```

这将打印 textbox.text 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:37:15.883

您没有使用代码获取文本框的值的原因是因为您没有在 .Text 之后使用 .ToString()。它需要是：

```
if (PreviousPage != null)
    {
        string name = ((TextBox)PreviousPage.FindControl("TextBox1")).Text.ToString();

        Response.Write(name);
    } 
```

试试看它是否有效！

# c# - LINQ to SQL 自定义查询生成器

> ID：10801092
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:23:14.580
> 
> 标签：c#, .net, linq-to-sql

使用 ADO.NET 很容易构建这样的自定义查询：

```
SqlCommand.CommandText = "SELECT Column" + variable1 + ", Column" + Variable2 + " FROM TABLE"; 
```

可以在 LINQ to SQL 中这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:25:20.887

不，没有通用的方法来构建动态查询。

> 方法必须具有已知的特定返回类型。该类型可以是 System.Object 但您必须使用大量丑陋的反射代码才能真正获取成员。在这种情况下，您还必须使用大量丑陋的反射表达式树代码来生成返回值。
> 
> 如果您尝试在 UI 端动态生成列 - 请停止这样做。在设计时定义列，然后简单地显示/隐藏您实际需要/希望用户看到的列。让您的查询返回所有可能可见的列。
> 
> 除非您注意到选择所有数据列存在严重的性能问题（在这种情况下，您可能在数据库级别存在未覆盖的索引问题），否则使用这种方法会好得多。动态生成谓词和排序顺序非常好，但您真的不想对输出列表执行此操作。 [更多关于这个](https://stackoverflow.com/a/2990217/655293)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-01T14:08:18.153

是的，您可以使用`Dynamic query with Linq`.
这是一个示例，您可以使用以下命令构建自定义查询`Dynamic query with Linq`：

```
string strWhere = string.Empty;
    string strOrderBy = string.Empty;

    if (!string.IsNullOrEmpty(txtAddress.Text))
        strWhere = "Address.StartsWith(\"" + txtAddress.Text + "\")";  
    if (!string.IsNullOrEmpty(txtEmpId.Text))
    {
        if(!string.IsNullOrEmpty(strWhere ))
            strWhere = " And ";
        strWhere = "Id = " + txtEmpId.Text;
    }
    if (!string.IsNullOrEmpty(txtDesc.Text))
    {
        if (!string.IsNullOrEmpty(strWhere))
            strWhere = " And ";
        strWhere = "Desc.StartsWith(\"" + txtDesc.Text + "\")";
    }
    if (!string.IsNullOrEmpty(txtName.Text))
    {
        if (!string.IsNullOrEmpty(strWhere))
            strWhere = " And ";
        strWhere = "Name.StartsWith(\"" + txtName.Text + "\")";
    }

    EmployeeDataContext edb = new EmployeeDataContext();
    var emp = edb.Employees.Where(strWhere);
    grdEmployee.DataSource = emp.ToList();
    grdEmployee.DataBind(); 
```

有关更多信息，您可以[查看此](http://pranayamr.blogspot.com/2011/04/dynamic-query-with-linq.html)页面。

# python - 使用scrapyd一次运行多个scrapy spider

> ID：10801093
> 
> 赞同：12
> 
> 时间：2012-05-29T14:23:15.063
> 
> 标签：python, screen-scraping, scrapy, scrapyd

我在一个项目中使用[scrapy](http://scrapy.org/)，我想抓取多个站点 - 可能是数百个 - 我必须为每个站点编写一个特定的蜘蛛。我可以在部署到scrapyd的项目中安排*一个*蜘蛛，使用：

```
curl http://localhost:6800/schedule.json -d project=myproject -d spider=spider2 
```

但是我如何一次安排一个项目中的*所有*蜘蛛呢？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-29T18:02:14.740

我一次运行 200 多个蜘蛛的解决方案是为项目创建一个自定义命令。有关实现自定义命令的更多信息，请参阅[http://doc.scrapy.org/en/latest/topics/commands.html#custom-project-commands](http://doc.scrapy.org/en/latest/topics/commands.html#custom-project-commands)。

**YOURPROJECTNAME/commands/allcrawl.py**：

```
from scrapy.command import ScrapyCommand
import urllib
import urllib2
from scrapy import log

class AllCrawlCommand(ScrapyCommand):

    requires_project = True
    default_settings = {'LOG_ENABLED': False}

    def short_desc(self):
        return "Schedule a run for all available spiders"

    def run(self, args, opts):
        url = 'http://localhost:6800/schedule.json'
        for s in self.crawler.spiders.list():
            values = {'project' : 'YOUR_PROJECT_NAME', 'spider' : s}
            data = urllib.urlencode(values)
            req = urllib2.Request(url, data)
            response = urllib2.urlopen(req)
            log.msg(response) 
```

确保在您的 settings.py 中包含以下内容

```
COMMANDS_MODULE = 'YOURPROJECTNAME.commands' 
```

然后从命令行（在你的项目目录中）你可以简单地输入

```
scrapy allcrawl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T19:40:10.097

对不起，我知道这是一个老话题，但我最近开始学习scrapy，在这里偶然发现，我还没有足够的代表发表评论，所以发布一个答案。

从[常见的scrapy实践中](http://doc.scrapy.org/en/latest/topics/practices.html#distributed-crawls)你会看到，如果你需要一次运行多个spider，你必须启动多个scrapyd服务实例，然后在这些实例中分发你的Spider运行。

# java - 如何在 Java 中使 JFrame 可滚动？

> ID：10801104
> 
> 赞同：10
> 
> 时间：2012-05-29T14:23:37.153
> 
> 标签：java, swing, user-interface, jframe, jscrollpane

我有这段代码，我试图在其中安装一个可滚动的面板（JPanel），但我不明白。这是我的代码：

```
public class Sniffer_GUI extends JFrame {
Canvas c = new Canvas();
ConnectorPropertiesPanel props;
public Sniffer_GUI() {
    super("JConnector demo");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    getContentPane().setLayout(new GridBagLayout());
    init();

    getContentPane().add(new JLabel("Connectors example. You can drag the connected component to see how the line will be changed"),
                         new GridBagConstraints(0, 0, 2, 1, 1, 0, GridBagConstraints.NORTHWEST, GridBagConstraints.HORIZONTAL, new Insets(5, 5, 0, 5), 0, 0));
    getContentPane().add(initConnectors(),
                         new GridBagConstraints(0, 1, 1, 1, 1, 1, GridBagConstraints.NORTHWEST, GridBagConstraints.BOTH, new Insets(5, 5, 5, 5), 0, 0));
    getContentPane().add(props,
                         new GridBagConstraints(1, 1, 1, 1, 0, 1, GridBagConstraints.NORTHWEST, GridBagConstraints.VERTICAL, new Insets(5, 0, 5, 5), 0, 0));
    setSize(800, 600);
    setLocationRelativeTo(null);

} 
```

提前致谢。

我编辑添加了一个部分似乎有效的代码......

```
public Sniffer_GUI() {
    super("JConnector demo");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel container = new JPanel();
    JScrollPane scrPane = new JScrollPane(container);
    add(scrPane);
    scrPane.setLayout(new ScrollPaneLayout());
    init();

    add(initConnectors());

    setSize(800, 600);
    setLocationRelativeTo(null);

} 
```

但它仍然不能滚动，至少它在 JScrollPane 中实现了它的功能，这是一个很好的步骤。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T14:30:03.933

Make a JPanel scrollable and use it as a container, something like this:

```
JPanel container = new JPanel();
JScrollPane scrPane = new JScrollPane(container);
add(scrPane); // similar to getContentPane().add(scrPane);
// Now, you can add whatever you want to the container 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T14:48:02.467

扩展@Eng.Fouad 答案：

```
public class Sniffer_GUI extends JFrame {
    Canvas c = new Canvas();
    ConnectorPropertiesPanel props;
    public Sniffer_GUI() {
        super("JConnector demo");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel container = new JPanel();
        JScrollPane scrPane = new JScrollPane(container);
        getContentPane().add(scrPane);
        container.setLayout(new GridBagLayout());
        init();

        container.add(new JLabel("Connectors example. You can drag the connected component to see how the line will be changed"),
                             new GridBagConstraints(0, 0, 2, 1, 1, 0, GridBagConstraints.NORTHWEST, GridBagConstraints.HORIZONTAL, new Insets(5, 5, 0, 5), 0, 0));
        container.add(initConnectors(),
                             new GridBagConstraints(0, 1, 1, 1, 1, 1, GridBagConstraints.NORTHWEST, GridBagConstraints.BOTH, new Insets(5, 5, 5, 5), 0, 0));
        container .add(props,
                             new GridBagConstraints(1, 1, 1, 1, 0, 1, GridBagConstraints.NORTHWEST, GridBagConstraints.VERTICAL, new Insets(5, 0, 5, 5), 0, 0));
        setSize(800, 600);
        setLocationRelativeTo(null);

    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-30T18:02:34.117

也许这会有所帮助...

```
JFrame frame = new JFrame();
JPanel panel = new JPanel();

// add something to you panel...
// panel.add(...);

// add the panel to a JScrollPane
JScrollPane jScrollPane = new JScrollPane(panel);
// only a configuration to the jScrollPane...
jScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
jScrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

// Then, add the jScrollPane to your frame
frame.getContentPane().add(jScrollPane); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-09T03:36:38.497

要使 JFrame 的组件可滚动，请将组件包装在 JScrollPane 中：

```
 JScrollPane myJScrollPane = new JScrollPane(myJLabel,
         JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
         JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED); 
```

并将 myJLabel 的提及替换为 myJScrollPane。为我工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-24T00:21:16.877

只是插话，如果我不在基地，请随时纠正我，但使用这样的 JScrollPane 会产生意想不到的后果，即需要更频繁地调整窗口大小。

例如，我有一个程序，我在其中设置了类似的 JFrame 范围的滚动窗格。我还在框架中的一个选项卡中有一个 JTextArea，它与内容窗格的大小相同。这个 textArea 也在它自己的滚动窗格中（这更像是一个搞砸的项目而不是其他任何东西）。当我从文件加载内容以存放在 textArea 中时，它触发了文本区域周围的滚动条。

结果是，我的，我们称之为 innerScrollPane，现在比 JFrame 大，因为滚动条以前不可见。然后这触发了我现在要调用的外层滚动窗格，以显示它的滚动条，然后覆盖内部滚动条。

这很容易通过在我的文件打开方法的末尾添加一个额外的 window.pack() 参数来解决，但我只是想把它扔在那里。如果您不小心，滚动条可能会掩盖窗口中的内容。但是......好吧，有一百万种方法可以防止这个问题，所以这不是什么大问题。只是需要注意的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T14:28:39.713

Try this:

```
JScrollPane sp = new JScrollPane();
this.add(sp).
sp.add( *GUI elements for your applications.*) 
```

Something like that should work for you. Take a look at [this](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html) as well:

# c# - 双击后访问数据视图的元素

> ID：10801106
> 
> 赞同：0
> 
> 时间：2012-05-29T14:23:44.483
> 
> 标签：c#, datagridview

我有一个 DataGridView (c#)。我想在双击后访问所选行的每个成员。

知道该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:39:33.893

连接数据网格的`CellDoubleClick`事件。`DataGridViewCellEventArgs`包含被单击的行和列。如果行索引为 -1，则单击标题。

```
private void MyDataGridView_CellDoubleClick(object sender,
    DataGridViewCellEventArgs e)
{
    if (e.RowIndex < 0)
    {
        // header was clicked
    }
    else
    {
        // data row was clicked, can access the row contents like this
        var row = MyDataGridView.Rows[e.RowIndex];
        var cell = row[0];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:34:45.987

```
private void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
   foreach(var item in dataGridView1.SelectedRows)
   {

   }
} 
```

# email - 什么是合适的 Java EE 技术来做一个定时的“cron 工作”？

> ID：10801111
> 
> 赞同：0
> 
> 时间：2012-05-29T14:23:57.853
> 
> 标签：email, jakarta-ee

我在 WebSphere 7 上有一个 Java EE 应用程序。

我的应用程序将需要发送的电子邮件放在数据库的通知表中。

我想编写每 5 或 10 分钟触发一次的代码，并扫描通知表以查找状态为“PENDING”的条目，发送电子邮件，然后将状态更新为“SENT”。

什么是适当的 Java EE 技术可以使这每 5 或 10 分钟发生一次？Java EE 中是否有某种“定时器进程”可用？

任何信息都很有用，谢谢！抢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:24:51.523

[Quartz Scheduler](http://quartz-scheduler.org/documentation/quartz-2.1.x/quick-start)是一个很好的库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T14:43:05.280

您可以为此目的使用@Schedule 注释。

JavaEE 6 为此提供了 Timer 服务

[http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

```
@ManagedBean
@Stateless(name="MyScheduledTaskClass")
public class MyScheduledTaskClass implements Serializable{
private Logger _log = Logger.getLogger(this.getClass());

    @Schedule(minute="*/5")       //minute="*/10" if you want every 10 minutes
    public void executeTask(){
        _log.info("Scheduled task started");
        //Do some stuff here
        _log.info("Scheduled task finished");
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T14:50:31.120

WebSphere 7 运行 Java EE 5（我认为），因此您的选择在这方面有点有限。

您可以使用[Quartz Scheduler](http://quartz-scheduler.org/)之类的库，但必须小心将其连接到由容器管理的线程池。我相信默认情况下它只是自己创建线程，这在 EJB 中是完全禁止的（并且在 Web 容器中强烈反对）。

我发现了一篇不错的博客文章，它引导您完成在 WebSphere 上设置工作管理器池的配置：http: [//sanjsuya.wordpress.com/2012/01/19/asynchronousbean-was-spring-integration/](http://sanjsuya.wordpress.com/2012/01/19/asynchronousbean-was-spring-integration/)

如果您使用的是 Spring，则可以使用 WorkManagerTaskExecutor 轻松地将 Quartz 调度程序连接到该线程池。这里有一些关于它的 Spring 文档（注意，它来自 Spring 2，但我相信你或多或少地为 Spring 3 做这样的事情）：[http ://static.springsource.org/spring/docs/ 2.0.x/reference/scheduling.html](http://static.springsource.org/spring/docs/2.0.x/reference/scheduling.html)

编辑：我的建筑师有点畏缩（尽管也许你有充分的理由这样做）。为什么您将电子邮件写入数据库而不是队列？这样，它们可以在接收系统的空闲时间进行处理，并且您不会将大量后台工作重载到 WebSphere 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:34:18.260

如果你不需要任何非常花哨的东西，你可以安排任务`java.util.concurrent.Executors`

```
public class Foo implements Runnable(){

    public void run(){
    //do stuff
    }

} 
```

并安排每*t*毫秒运行*d*延迟秒

```
Executors.newScheduledThreadPool(10).scheduleAtFixedRate(new Foo(), d, t, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T14:27:16.500

Quartz 非常好，但是 Java EE 规范现在包括 EJB 计时器，它可能适合您的需要。

# c++ - 任意类型的 GDB 条件断点，例如 C++ std::string 相等

> ID：10801112
> 
> 赞同：13
> 
> 时间：2012-05-29T14:24:02.973
> 
> 标签：c++, linux, gdb

是否可以在条件表达式包含任意类类型的对象的 GDB 中设置条件断点？

我需要在函数内设置断点，条件将检查对象的成员字符串变量是否等于说“foo”。所以，像：

```
condition 1 myObject->myStringVar == "foo" 
```

但它不起作用。GDB 是否只允许在原始类型和 char* 类型上设置条件断点？有什么办法可以在非原始类型上设置条件断点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T15:15:35.237

> 有什么办法可以在非原始类型上设置条件断点？

是的，一种方法是将非原始类型转换为原始类型，在您的情况下转换为`char*`，并用于`strcmp`比较字符串。

```
condition 1 strcmp(myObject->myStringVar.c_str(),"foo") == 0 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-29T16:29:57.557

您提出的问题的答案是肯定的......在一般情况下，它适用于任意类和函数以及类成员函数。您不必拘泥于测试原始类型。类成员重载，如`operator==`，应该可以工作。

但我猜这种情况的问题与`operator==`for std::string 是*全局模板化运算符重载*有关：

[http://www.cplusplus.com/reference/string/operators/](http://www.cplusplus.com/reference/string/operators/)

所以声明就像：

```
template<class charT, class traits, class Allocator>
    bool operator==(const basic_string<charT,traits,Allocator>& rhs,
                const charT* lhs ); 
```

如果 gdb 不知道如何为您连接这些点，我不会感到惊讶。

请注意，除了 @ks1322 所说的之外，您还可以留在 C++ 领域，更简单地使用[std::string::compare()](http://www.cplusplus.com/reference/string/string/compare/)：

```
condition 1 myObject->myStringVar.compare("foo") == 0 
```

# google-app-engine - Google Appengine 重定向到奇怪的网址

> ID：10801113
> 
> 赞同：0
> 
> 时间：2012-05-29T14:24:06.573
> 
> 标签：google-app-engine

最近，当我与 facebook 握手（oauth flow）时，当回调返回时，谷歌将其发送到：`http://<version>-dot-<app_id>.appspot.com`

我在表单中发送了一个回调，`https://<app_id>.appspot.com/bah/facebook_callback`它返回为 `http://<version>-dot-<app_id>.appspot.com/bah/facebook_callback`

以前它工作正常，没有代码改变什么.. 这个 SDK 1.6.6 相关吗？

有谁知道为什么，或者可以向我解释如何不允许这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:51:02.070

GAE 实际上将此 Urls 映射到同一个实例：`http://<version>-dot-<app_id>.appspot.com`映射方式与`http://<version>.<app_id>.appspot.com`

这样做是为了解决浏览器对通配符 SSL 证书的限制：`*.domain.com`域的浏览器不允许使用证书`*.*.domain.com`

因此，Google 将映射`*.*`到`*-dot-*`作为一种解决方法，并在 QAuth 过程中使用替代表示法。

看到这个：[https ://developers.google.com/appengine/docs/java/config/webxml#Secure_URLs](https://developers.google.com/appengine/docs/java/config/webxml#Secure_URLs)

还有这个：[appengine 上的通配符子域通过 Firefox 上的 https](https://stackoverflow.com/questions/5722397/wildcard-subdomains-on-appengine-over-https-on-firefox/10284023#10284023)

# asp.net - 将字节 [] 插入 SqlDataSource ASP.Net 的问题

> ID：10801114
> 
> 赞同：0
> 
> 时间：2012-05-29T14:24:12.870
> 
> 标签：asp.net, sql

也许我只是没有在谷歌上搜索正确的参数，但我似乎无法弄清楚这一点。
我创建了一个散列密码，据我了解，它应该是一个字节数组。然后我需要将它插入到 SqlDataSource 中，这就是我的问题所在。

我的数据库定义如下；

```

**专栏** || **数据类型**
----------------------------  
姓名 || varchar(50)  
用户名 || varchar(50)  
哈希密码 || 变量二进制 (50)  
盐 || 变量二进制 (50)  
用户类型 || varchar(50)
```

我的代码如下；

```
HashAlgorithm hashing = new SHA256Managed();
byte[] passwordPlainText = (new System.Text.ASCIIEncoding()).GetBytes(txtPassword.ToString());
byte[] salt = (new System.Text.ASCIIEncoding()).GetBytes(RNGCryptoServiceProvider.Create().ToString());
// Combine salt and password before hashing.
byte[] saltAndPwd = new byte[passwordPlainText.Length + salt.Length];
Array.Copy(passwordPlainText, saltAndPwd, passwordPlainText.Length);
Array.Copy(salt, 0, saltAndPwd, passwordPlainText.Length, salt.Length);
byte[] hashedPwd = hashing.ComputeHash(saltAndPwd);

database.InsertCommandType = SqlDataSourceCommandType.Text;
database.InsertCommand = "INSERT INTO userlist (Name, Username, HashedPwd, Salt, Type) VALUES (@insName, @insUsername, @insHashedPass, @insSalt, @insType);";
database.InsertParameters.Add("insName", txtName.Text);
database.InsertParameters.Add("insUsername", txtUsername.Text);
database.InsertParameters.Add("insHashedPass", (new System.Text.ASCIIEncoding()).GetString(hashedPwd));
database.InsertParameters.Add("insSalt", (new System.Text.ASCIIEncoding()).GetString(salt));
database.InsertParameters.Add("insType", txtType.Text);
database.Insert(); 
```

数据库的东西是我从 Internet 上的研究中收集到的，并查看了 Visual Studio 中方便的自动完成功能为我提供了哪些选项。
仅供参考，我使用的是 Visual Studio 2010 版本 10.0.4，.Net 版本 4.0.3
似乎有一些用于 SQL 连接的外部库，但我更愿意只使用 .Net 提供的内置内容。

目前，我在运行插入算法时收到此错误；
**不允许从数据类型 nvarchar 到 varbinary 的隐式转换。使用 CONVERT 函数运行此查询。**
我不确定如何使用转换功能。
Add() 方法可以像我现在正在做的那样接受字符串、字符串，也可以接受字符串、DbType、字符串。我已经尝试过`database.InsertParameters.Add("insSalt", DbType.Binary, salt);`，但我什至无法编译/构建网站。我明白了；“无法从字节 [] 转换为字符串”。
如果我把它改成`salt.ToString()`我得到；Insert() 行上的“无法将参数值从字符串转换为 Btye[]”。

所以是的......真的迷路了，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:47:14.797

您不需要**SqlDataSource**，它用于数据绑定控件。您需要的是**SqlConnection 和 SqlCommand**。这是你要做的：

```
...your hashing code here...

using (SqlConnection conn = new SqlConnection("Data Source=.; Initial Catalog=test; Integrated Security=SSPI;"))
{
    var command = conn.CreateCommand();
    command.CommandText = "INSERT INTO userlist (Name, Username, HashedPwd, Salt, UserType) VALUES (@insName, @insUsername, @insHashedPass, @insSalt, @insType);";
    command.CommandType = System.Data.CommandType.Text;

    command.Parameters.Add(new SqlParameter("insName", txtName.Text));
    command.Parameters.Add(new SqlParameter("insUsername", txtUsername.Text));
    command.Parameters.Add(new SqlParameter("insHashedPass", hashedPwd));
    command.Parameters.Add(new SqlParameter("insSalt", salt));
    command.Parameters.Add(new SqlParameter("insType", txtType.Text));

    conn.Open();
    command.ExecuteNonQuery();
} 
```

另请注意，我已将命令文本中的“类型”更改为“用户类型”以匹配您的数据库表定义。当然，您需要替换连接字符串以匹配您的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:28:06.917

我最近遇到了类似的问题。您需要检查创建哈希的类以查看返回类型是什么。

如果返回类型是字符串，那么您将无法分配给：

byte[] hashedPwd = hashing.ComputeHash(saltAndPwd);

# ruby-on-rails - Ruby - 如何从具有其他数组和散列的数组中获取值？

> ID：10801115
> 
> 赞同：0
> 
> 时间：2012-05-29T14:24:15.670
> 
> 标签：ruby-on-rails, ruby

我有这种格式的数据：

```
{"values"=>
[
{"updateKey"=>"UNIU-16268324-5608633092144111616-SHARE", 
"updateComments"=>{"_start"=>1, 
"values"=>[{"comment"=>"Sample test this is mike testing.", 
  "person"=>{"siteStandardProfileRequest"=>{"url"=>"http://www.linkedin.com/profile?viewProfile=&key=116654056&authToken=xVLh&authType=name&trk=api*a140290*s148640*"}, 
  "lastName"=>"DeLorenzo", 
  "headline"=>"--", 
  "id"=>"QM86-RIKjb", 
  "pictureUrl"=>"http://media.linkedin.com/mpr/mprx/0_OurBLnHMma92b4U4pecXLq2MuW8aFOo4ywXHLqEbPuNO4sjZtEhUwNOWCFhAkJIq07-WoP4V_Zqg", "firstName"=>"Jennifer", 
  "apiStandardProfileRequest"=>{"url"=>"http://api.linkedin.com/v1/people/QM86-RIKjb",     "headers"=>{"values"=>
[{"name"=>"x-li-auth-token", 
"value"=>"name:xVLh"}], 
"_total"=>1}}}, 
"timestamp"=>1337202768000, 
"sequenceNumber"=>1, 
"id"=>80942976}, 
{"comment"=>"123", 
"person"=>{"siteStandardProfileRequest"=>{"url"=>"http://www.linkedin.com/profile?viewProfile=&key=70292133&authToken=wEAo&authType=name&trk=api*a140290*s148640*"}, "lastName"=>"Kartsovnyk", "headline"=>"Snr Software Developer", "id"=>"7-32mNn-Ob", "pictureUrl"=>"http://media.linkedin.com/mpr/mprx/0_xjj5WPXU6fCjCExLjUa9WA69XWNS 
```

我要做的是遍历 updateComments 并获取该用户的每个“id”属性。

这是我到目前为止所拥有的：

```
if linked_in_updates.values.updateComments.is_a?(Hash)   
  linked_in_updates.each { |key, value|
    some_value = key
  }
end 
```

我正在尝试使用以下方法提取作为 updateComments 的哈希：linked_in_updates.values.updateComments 但我收到如下错误：

```
NoMethodError: undefined method `updateComments' for #<Array:0x13228fc20> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:27:52.447

尝试更换

```
linked_in_updates.values.updateComments.is_a?(Hash) 
```

和

```
linked_in_updates.values[0]['updateComments'].is_a?(Hash) 
```

# android - 在 Android 中并发访问 SQLite 数据库 - db 已关闭

> ID：10801119
> 
> 赞同：3
> 
> 时间：2012-05-29T14:24:40.053
> 
> 标签：android, sqlite, sqliteopenhelper, getwritabledatabase

我阅读了很多关于这个主题的主题，但没有人能回答我的问题。

我从并发线程访问我的数据库，我的 SQLiteOpenHelper 实现了单例的设计模式，所以我的应用程序只有一个实例。

我用这样的代码访问我的数据库：

```
 SQLiteDatabase db = DatabaseHelper.getInstance().getWritableDatabase();
 ...
 Do some update in the DB
 ...
 db.close(); 
```

我不明白为什么我仍然收到“数据库已关闭”错误，getWritableDatabase() 方法不应该在调用 close() 之前锁定数据库吗？来自其他线程的其他 getWritableDatabase() 调用应该等到数据库关闭？这是对的还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T15:36:39.827

扩展 elhadi 的答案时，我在跨多个异步任务打开和关闭数据库连接时遇到了类似的问题。根据我当时的调查，很明显没有必要经常打开和关闭数据库连接。我最终采用的方法是子类化`Application`并执行单个 db open during`onCreate`和单个 db close `onTerminate`。然后我设置了一个静态 getter 来检索已经打开的`SQLiteDatabase`对象。对 DI（依赖注入）不友好，但 Android 还不能真正做到这一点。

像这样的东西；

```
 public class MainApplication extends Application {
          private static SQLiteDatabase database;

          /**
           * Called when the application is starting, before any other 
           * application objects have been created. Implementations 
           * should be as quick as possible...
           */
          @Override
          public void onCreate() {
          super.onCreate();
          try {
           database = SQLiteDatabase.openDatabase("/data/data/<yourdbpath>", null, SQLiteDatabase.OPEN_READWRITE);
          } catch (SQLiteException e) {
            // Our app fires an event spawning the db creation task...
           }
         }

          /**
           * Called when the application is stopping. There are no more 
           * application objects running and the process will exit.
           * <p>
           * Note: never depend on this method being called; in many 
           * cases an unneeded application process will simply be killed 
           * by the kernel without executing any application code...
           * <p>
           */
          @Override
          public void onTerminate() {
            super.onTerminate();
            if (database != null && database.isOpen()) {
              database.close();
            }
          }

          /**
           * @return an open database.
           */
          public static SQLiteDatabase getOpenDatabase() {
            return database;
          }
    } 
```

读回 JavaDoc 我肯定从某个地方 plagerised 这个但是这个静态的单个 db open/close 解决了你遇到的这个问题。SO上有另一个答案，描述了这个解决方案。

**更多详情：**

为了回应 Fr4nz 关于下面 NPE 的评论，我提供了我们具体实现的更多细节。

**简洁版本**

如果没有对 BroadcastReceivers 有很好的理解，下面的“全图”很难掌握。在您的情况下（并且首先）添加您的数据库创建代码并在创建数据库后初始化并打开数据库。所以写；

```
 try {
       database = SQLiteDatabase.openDatabase("/data/data/<yourdbpath>", null, SQLiteDatabase.OPEN_READWRITE);
      } catch (SQLiteException e) {
        // Create your database here!
        database = SQLiteDatabase.openDatabase("/data/data/<your db path>", null, SQLiteDatabase.OPEN_READWRITE);
       }
     } 
```

**长版**

是的，它不仅仅是上面的代码。请注意我对第一个实例中的异常捕获的评论（即您的应用程序第一次运行时）。这里是说，“我们的应用程序触发了一个产生数据库创建任务的事件”。在我们的应用程序中实际发生的`BroadcastReceiver`是注册了一个监听器（Android 的框架），并且主应用程序活动所做的第一件事就是检查`database`静态变量 in`MainApplication`是否为空。如果它为空，则生成一个创建数据库的异步任务，当它完成时（即运行该`onPostExecute()`方法）最终触发我们知道将由我们在 try-catch 中注册的侦听器拾取的事件。接收器作为内部类存在于 MainApplication 类下，如下所示；

```
 /**
    * Listener waiting for the application to finish
    * creating the database.
    * <p>
    * Once this has been completed the database is ready for I/O.
    * </p>
    *
    * @author David C Branton
    */
      public class OpenDatabaseReceiver extends BroadcastReceiver {
        public static final String BROADCAST_DATABASE_READY = "oceanlife.core.MainApplication$OpenDatabaseReceiver.BROADCAST_DATABASE_READY";

        /**
         * @see android.content.BroadcastReceiver#onReceive(android.content.Context, android.content.Intent)
         */
        @Override
        public void onReceive(final Context context, final Intent intent) {
          Log.i(CreatedDatabaseReceiver.class.getSimpleName(), String.format("Received filter event, '%s'", intent.getAction()));
          database = SQLiteDatabase.openDatabase("/data/data/<your db path>", null, SQLiteDatabase.OPEN_READWRITE);
          unregisterReceiver(openDatabaseReceiver);

          // Broadcast event indicating that the creation process has completed.
          final Intent databaseReady = new Intent();
          databaseReady.setAction(BROADCAST_DATABASE_READY);
          context.sendBroadcast(databaseReady);
        }
      } 
```

所以第一次安装的启动过程总结是这样的；

1.  类：MainApplication，角色-检查是否有数据库？
    *   是的？数据库变量被初始化
    *   不？接收方注册（`OpenDatabaseReceiver`）
2.  类： MainActivity：应用程序的角色登陆活动，最初检查数据库变量是否为空。
    *   `database`一片空白？不添加执行 I/O 的片段，并在对话框中添加“创建应用程序数据库”或类似内容。
    *   `database`不为空？继续主应用程序执行流程，添加由 db 支持的列表等
3.  类：DatabaseCreationDialogFragment：角色 - 生成异步任务以创建数据库。
    *   在创建数据库时注册新的接收者。
    *   在收集“我已创建数据库”消息时，会触发另一个事件（来自接收方），告诉应用程序打开数据库。
4.  类：MainApplication：角色 2- 侦听“数据库已创建”消息。
    *   上述接收器 ( `OpenDatabaseReceiver`) 打开数据库并广播（通过另一个事件！）数据库已准备好使用。
5.  类：MainActivity：角色 2- 获取“数据库已准备好”消息，摆脱“我们正在创建数据库”对话框并继续在应用程序中显示数据/功能。

和平恢复了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:46:14.137

如果您在线程中调用 DatabaseHelper.getInstance().getWritableDatabase()，我建议您在启动线程之前对其进行管理。你在主程序中打开你的数据库，你调用你的线程。线程终止后，您在主程序中关闭您的数据库。

# sql-server - 用户和数据库架构冲突

> ID：10801120
> 
> 赞同：0
> 
> 时间：2012-05-29T14:24:45.173
> 
> 标签：sql-server, sql-server-2008, database-schema

我想要一个用户和一个同名的数据库模式。执行以下脚本

```
CREATE DATABASE db1
GO
EXECUTE sp_addlogin @loginame = 'abc',
                    @passwd   = '123456789',
                    @defdb    = 'db1'
GO
USE db1
GO
EXECUTE sp_grantdbaccess @loginame   = 'abc', 
                         @name_in_db = 'abc'
GO
CREATE SCHEMA abc
GO 
```

给我错误：

> 消息 2714：数据库中已经有一个名为“abc”的对象。

有没有办法在不使用不同名称的情况下处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:21:43.817

为此，我建议不要使用 sp_ 过程，并且在您将它们添加为该数据库中的用户之前，我不会将数据库设为默认值。

```
CREATE DATABASE db1;
GO
CREATE LOGIN abc WITH PASSWORD = '123456789';
GO
USE db1;
GO
CREATE USER abc FROM LOGIN abc;
GO
ALTER LOGIN abc WITH DEFAULT_DATABASE = db1;
GO
CREATE SCHEMA abc;
GO

-- if you want them to own the schema:
ALTER AUTHORIZATION ON schema::abc TO abc;

-- if you just want abc to be their default schema:
ALTER USER abc WITH DEFAULT_SCHEMA = abc;
GO 
```

# cxf - 在 CXF API 中处理多部分附件

> ID：10801122
> 
> 赞同：4
> 
> 时间：2012-05-29T14:24:52.300
> 
> 标签：cxf, inputstream, multipart

我正在尝试使用 Apache CXF 开发一个 API 调用，该调用接收一个附件以及请求。我遵循[了本](http://cxf.apache.org/docs/jax-rs-multiparts.html)教程，这就是我到目前为止所得到的。

```
@POST
@Path("/upload")
@RequireAuthentication(false)
public Response uploadWadl(MultipartBody multipartBody){
    List<Attachment> attachments = multipartBody.getAllAttachments();
    DataHandler dataHandler = attachments.get(0).getDataHandler();
    try {
        InputStream is = dataHandler.getInputStream();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return Response("OK");
} 
```

我正在为附件获取一个 InputStream 对象，并且一切正常。但是我需要将附件作为 java.io.File 对象传递给另一个函数。我知道我可以在这里创建一个文件，从输入流中读取并写入它。但是有更好的解决方案吗？CXF 是否已将其存储为文件？如果是这样，我可以继续使用它。有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T14:26:06.007

我对这个问题也很感兴趣。在 CXF 邮件列表上与 Sergey 讨论时，我了解到如果附件超过某个阈值，CXF 正在使用临时文件。

在这个过程中，我发现了这篇[博](http://ext2xhb.wordpress.com/2011/06/08/using-cxf-attachment-safely/)文，它解释了如何安全地使用 CXF 附件。您也可以[对此页面](https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+Multiparts#JAX-RSMultiparts-Writingattachments)上的示例感兴趣。

我现在正在调查，目前只能说这些，希望对您有所帮助。

* * *

编辑：目前这是我们使用 CXF 2.6.x 处理附件的方式。关于使用多部分内容类型上传文件。

在我们的 REST 资源中，我们定义了以下方法：

```
 @POST
  @Produces(MediaType.APPLICATION_JSON)
  @Consumes(MediaType.MULTIPART_FORM_DATA)
  @Path("/")
  public Response archive(
          @Multipart(value = "title", required = false) String title,
          @Multipart(value = "hash", required = false) @Hash(optional = true) String hash,
          @Multipart(value = "file") @NotNull Attachment attachment) {

    ...

    IncomingFile incomingFile = attachment.getObject(IncomingFile.class);

    ...
  } 
```

关于该片段的一些注释：

*   `@Multipart`不是 JAXRS 的标准，甚至在 JAXRS 2 中也不是，它是 CXF 的一部分。
*   在我们的代码中，我们实现了 bean 验证（您必须在 JAXRS 1 中自己完成）
*   您不必使用 a `MultipartBody`，这里的关键是使用类型的参数`Attachment`

所以是的，据我们所知，目前还不可能在方法签名中直接获得我们想要的类型。因此，例如，如果您只想要`InputStream`附件的，则不能将其放在方法的签名中。您必须使用`org.apache.cxf.jaxrs.ext.multipart.Attachment`类型并编写以下语句：

```
InputStream inputStream = attachment.getObject(InputStream.class); 
```

我们还发现在*Sergey Beryozkin*的帮助下，我们可以转换或包装它`InputStream`，这就是为什么我们在上面的代码片段中写道：

```
IncomingFile incomingFile = attachment.getObject(IncomingFile.class); 
```

`IncomingFile`是我们围绕. `InputStream`_`MessageBodyReader``ParamHandler``String`

```
@Component
@Provider
@Consumes
public class IncomingFileAttachmentProvider implements MessageBodyReader<IncomingFile> {
  @Override
  public boolean isReadable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
    return type != null && type.isAssignableFrom(IncomingFile.class);
  }

  @Override
  public IncomingFile readFrom(Class<IncomingFile> type,
                              Type genericType,
                              Annotation[] annotations,
                              MediaType mediaType,
                              MultivaluedMap<String, String> httpHeaders,
                              InputStream entityStream
  ) throws IOException, WebApplicationException {

    return createIncomingFile(entityStream, fixedContentHeaders(httpHeaders)); // the code that will return an IncomingFile
  }
} 
```

但是请注意，已经进行了一些试验来了解通过了什么、如何以及如何热修复错误*（例如，附件部分的第一个标题的第一个字母是 eat 所以你有`ontent-Type`而不是`Content-Type`）*。

当然代表附件`entityStream`的实际情况。`InputStream`此流将从内存或磁盘读取数据，具体取决于 CXF 将数据放在何处；有一个大小阈值属性 ( `attachment-memory-threshold`) 。您还可以说出临时附件的去向 ( `attachment-directory`)。

完成后不要忘记**关闭流**（某些工具会为您完成）。

配置完所有内容后，我们使用 Johan Haleby 的Rest *-* [Assured](https://code.google.com/p/rest-assured/)对其进行了测试。*（虽然有些代码是我们测试工具的一部分）*：

 **```
given().log().all()
        .multiPart("title", "the.title")
        .multiPart("file", file.getName(), file.getBytes(), file.getMimeType())
.expect().log().all()
        .statusCode(200)
        .body("store_event_id", equalTo("1111111111"))
.when()
        .post(host().base().endWith("/store").toStringUrl()); 
```

或者，如果您需要以这种方式通过 curl 上传文件：

```
curl --trace -v -k -f
     --header "Authorization: Bearer b46704ff-fd1d-4225-9dd4-e29065532b73"
     --header "Content-Type: multipart/form-data"
     --form "hash={SHA256}3e954efb149aeaa99e321ffe6fd581f84d5a497b6fab5c86e0d5ab20201f7eb5"
     --form "title=fantastic-video.mp4"
     --form "archive=@/the/path/to/the/file/fantastic-video.mp4;type=video/mp4"
     -X POST http://localhost:8080/api/video/event/store 
```

为了完成这个答案，我想提一下，可以在多部分中包含 JSON 有效负载，因为您可以`Attachment`在签名中使用一个类型，然后编写

```
Book book = attachment.getObject(Book.class) 
```

或者您可以编写如下参数：

```
@Multipart(value="book", type="application/json") Book book 
```

只是不要忘记`Content-Type`在执行请求时将标头添加到相关部分。

值得一提的是，可以将所有部分都放在一个列表中，只需编写一个带有 type 的单个参数的方法`List<Attachment>`。但是，我更喜欢在方法签名中包含实际参数，因为它更干净且样板文件更少。

```
@POST
void takeAllParts(List<Attachment> attachments) 
```**

# uiscrollview - UISCrollView 看不到底部，因为它在顶部返回

> ID：10801123
> 
> 赞同：1
> 
> 时间：2012-05-29T14:24:59.727
> 
> 标签：uiscrollview, uilabel

我正在使用 UIScrollView 进行测试，并在其中放置了一个 UILabel 。关键是我试图滚动到底部以阅读整个 UIlabel，但是一旦我停止向上拖动，滚动视图就会返回（橡皮筋效果）并且我无法阅读最后三行文本。

```
scrollView.backgroundColor = [UIColor redColor];
scrollView.contentSize = CGSizeMake(320, 600);

UILabel *lbltestScroll = [[UILabel alloc]initWithFrame:CGRectMake(0,100,320,600)];

lbltestScroll.text =@"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.";

lbltestScroll.lineBreakMode = UILineBreakModeWordWrap; 
lbltestScroll.numberOfLines = 0;

[scrollView addSubview:lbltestScroll]; 
```

哪里有问题？

谢谢卢卡

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T14:28:30.263

滚动视图的 contentSize 太小。

由于标签的大小与滚动视图的内容大小相同，但它位于 0、100，它不适合滚动视图内的可用空间。contentSize 属性与滚动视图（您正在查看的“窗口”）的实际大小无关，而是设置可用于显示内容的“画布”的大小，或多或少多远你可以滚动。

# internet-explorer-8 - jquery.tablesort 表中的列标题排序按钮在 IE8 中消失

> ID：10801127
> 
> 赞同：0
> 
> 时间：2012-05-29T14:25:21.070
> 
> 标签：internet-explorer-8, header, tablesorter

这可能是一个非常简单的问题，因为我对编码比较陌生，但我正在使用 jquery.tablesorter 对我的表进行排序。到目前为止，它在 Chrome 和 Firefox 上运行良好，但在 Internet Explorer 8 中，一旦我单击它，排序箭头就会消失。您仍然可以单击实际的列标题框并对数据进行排序，但在您单击另一列之前不会显示箭头。然后那个按钮消失了！似乎在任何地方都没有关于此的任何内容。

这是我在我的 html 文件中获得的代码，但是所有的 js 下载当然都是单独的文件：

```
 $(function() {
        $("table")
            .tablesorter({debug: false, sortColumn: 'Rank 2012', sortReset: false, widthFixed: true, widgets: ['zebra']})
            .tablesorterPager({container: $("#pager")})
            .tablesorterFilter({filterContainer: $("#filter-box"),
                          filterClearContainer: $("#filter-clear-button"),
                          filterColumns: [0,1,2,3,4,5,6,7,8],
                          filterCaseSensitive: false}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:39:56.273

您应该验证您的 IE8 实现与[TableSorter Demo](http://tablesorter.com/docs/#Demo)一起使用。

如果这可行，那么它应该在你的 CSS 中强制箭头离开当前选定的列标题。

如果可能，将您的页面剥离到仅 tablesorter css 文件，然后看看它的外观。

# php - PHP棋盘无法将图像放入棋盘内

> ID：10801128
> 
> 赞同：0
> 
> 时间：2012-05-29T14:25:22.927
> 
> 标签：php, javascript, html, css

我已经成功地对棋盘和图片进行了完全编码。但是，我需要使用“if”语句在 for 循环而不是数组中插入棋子图片，而不是多维数组。每当我尝试它时，它都不起作用，而且它们都搞砸了。任何人都可以帮助我并建议我该怎么做。请在下面查看我的编码。

```
<html> 
<head> 
<style> 
th{ 
   width:60px; 
   height:60px; 
} 

table{ 
     border: 5px solid #FFBB78; 
     border-collapse:collapse; 
} 

td{ 
   width:60px; 
   height:60px; 
} 

tr{ 
   width:60px; 
   height:60px;  

} 
h1{ 
  color:#6633FF; 
}

</style> 

<script type="text/javascript"> 
function changeColor(){
    document.getElementById("king").style.backgroundColor="#666699";
 }

 function knight(){
    var msg = "This is the Knight";
    alert(msg);
 }

 function king(){
    var msg = "This is the King";
    alert(msg);
 }

 function pawn(){
    var msg = "This is the Pawn";
    alert(msg); 
 }

 function bishop(){
    var msg = "This is the Bishop";
    alert(msg);   
 }

 function rook(){
    var msg = "This is the Rook";
    alert(msg);    
 }

 function queen(){
     var msg = "This is the Queen";
     alert(msg);   
 }

</script> 
</head> 
<body> 
<?php 

/*$pictures = array( //Multi-dimensional array starts here
    //row 1/column 1
    "1,1" => '<img src="chess/br.gif" onclick="rook()"/>',  
    "1,3" => '<img src="chess/bb.gif" onclick="bishop()"/>', 
    "1,4" => '<img src="chess/bq.gif" onclick="queen()"/>',
    "1,5" => '<img src="chess/bk.gif" onclick="king()" />',
    "1,8" => '<img src="chess/br.gif" onclick="rook()"/>',

    //row 2 column 2
    "2,1" => '<img src="chess/bp.gif" onclick="pawn()"/>', 
    "2,2" => '<img src="chess/bp.gif" onclick="pawn()"/>', 
    "2,3" => '<img src="chess/bp.gif" onclick="pawn()"/>', 
    "2,4" => '<img src="chess/bp.gif" onclick="pawn()"/>', 
    "2,5" => '<img src="chess/bb.gif" onclick="bishop()"/>', 
    "2,6" => '<img src="chess/bp.gif" onclick="pawn()"/>', 
    "2,7" => '<img src="chess/bp.gif" onclick="pawn()"/>', 
    "2,8" => '<img src="chess/bp.gif" onclick="pawn()"/>',

    //row 3 column3
    "3,3" => '<img src="chess/bn.gif"  onclick="knight()"/>',
    "3,6" => '<img src="chess/bn.gif"  onclick="knight()" />',

    //row 4 column4
    "4,5" => '<img src="chess/bp.gif" onclick="pawn()"/>',

    //row 5 column 5
    "5,3" => '<img src="chess/wb.gif" onclick="bishop()"/>',
    "5,5" => '<img src="chess/wp.gif" onclick="pawn()"/>',

    //row 6 column 6
    "6,4" => '<img src="chess/wp.gif" onclick="pawn()"/>',
    "6,6" => '<img src="chess/wn.gif" onclick="knight()"/>',

    //row 7 column 7
    "7,1" => '<img src="chess/wp.gif" onclick="pawn()"/>',
    "7,2" => '<img src="chess/wp.gif" onclick="pawn()"/>',
    "7,3" => '<img src="chess/wp.gif" onclick="pawn()"/>',
    "7,6" => '<img src="chess/wp.gif" onclick="pawn()"/>',
    "7,7" => '<img src="chess/wp.gif" onclick="pawn()"/>',
    "7,8" => '<img src="chess/wp.gif" onclick="pawn()"/>',

    //row 8 column 8
    "8,1" => '<img src="chess/wr.gif" onclick="rook()"/>',
    "8,2" => '<img src="chess/wn.gif" onclick="knight()"/>',
    "8,3" => '<img src="chess/wb.gif" onclick="bishop()"/>',
    "8,4" => '<img src="chess/wq.gif" onclick="queen()"/>',
    "8,6" => '<img src="chess/wr.gif" onclick="rook()"/>',
    "8,7" => '<img src="chess/wk.gif" onmouseover="changeColor()" id="king" onclick="king()"/>',);//array ends here*/

    echo"<h1 align='center'>SAJID Chess Board</h1>"; 
    echo"<table border='1' align='center'>"; 

     for($i = 1; $i <= 8; $i++){ //loop starts here and sequently creates sqares     
          echo "<tr>"; 
     for($j = 1; $j <=8; $j++){ 
          if( ($i+$j)%2==0 ) {// since i and j will create the same sqaures throughout the loop, so I add it up without writting another loop 

                echo"<td bgcolor='#FF9933'>"; //color names are taken from www.w3schools.com html color picker
              } 
            else { 
                echo"<td bgcolor='#FFFF66'>"; 
            } 

          if(isset($pictures["{$i},{$j}"]))//Determine if a picture variable is set and is not NULL 
                echo $pictures["{$i},{$j}"]; //prints out the chess piece pictures

                echo "</td>"; 
                } 
                echo "</tr>"; 
                } //loop ends here

                echo "</table>"; 

?> 
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:42:17.523

我自己找到了答案，并感谢所有试图帮助我的人。使用'if'将图像放入循环内的棋盘内

让我们将 $i 视为行，将 $j 视为列所以，

```
if($i==1 && $j==2){
  echo "<img src='image.gif'/>";
} 
```

完成后，现在可以将图像放在“for”循环内棋盘内的任何位置，并且无需在任何行和列上重复图像。

# unit-testing - 使用 Mockito 模拟方法

> ID：10801133
> 
> 赞同：1
> 
> 时间：2012-05-29T14:25:38.460
> 
> 标签：unit-testing, mockito

使用 mockito 模拟方法是否确保永远不会调用模拟方法？我有 Main 类，其中包含一些我想为其编写单元测试的代码，并且我有一个单元测试类 MainTest，其中包含 Main 类的单元测试。

例如：

源类：

```
package abc;

public class Main {

    public int check1() {
        int num = 10;
        num = modify(num);
        return num;
    }

    public int modify(int num) {
        if (num % 10 == 0) return num / 10;
        return -1;
    }
} 
```

Junit 测试（使用 mockito）

```
package abc;

import junit.framework.Assert;

import org.junit.BeforeClass;
import org.junit.Test;
import org.mockito.Mockito;

public class MainTest {

    private static Main main;

    @BeforeClass
    public static void setUp() {
        main = Mockito.mock(Main.class);
        Mockito.when(main.modify(10)).thenReturn(5);
    }

    @Test
    public void testCheck1() {
        Test1 main1 = new Main();
        int num = main.check1();
        Assert.assertEquals(5, num);
    }
} 
```

这个测试失败了。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T14:31:29.627

**已编辑** 因为您没有为`check1()`. *所有*方法都会被模拟，因此如果您不提供行为，`check1()`则返回 int 的返回类型的默认值，即 0。此外，`check1()`由于它被模拟，因此甚至无法调用`modify()`.

如果你想测试一个类，你永远不会模拟被测类。在极少数情况下，您可能需要监视正在测试的类。相反，您只嘲笑合作者。

我猜你的例子是一个人为的例子（我希望）。但是，如果您正在编写和测试一个您认为要修改某些内部方法行为的类，我会看到两种可能的可能性：

1.  您可能需要将要模拟的方法的功能重构为协作者类。然后，作为合作者继续嘲笑这种行为是有意义的。
2.  您可能还需要修改 API，以便您可以传递将要更改的内容。在你的情况下，`check1()`硬编码它传递给的值`modify()`，这就是你试图模拟的原因`modify()`。相反，如果该值是`check1()`class 的参数或可设置字段`Main`，那么甚至根本不需要使用模拟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T15:08:36.043

您的测试问题是，您不使用新创建的 main1 对象。

如果您想更改被测系统 (SUT) 的行为，您通常会执行以下操作：

```
@Test
public void testCheck1() {
    Test1 main1 = new Main(){
        public int modify(int num) {
            return 5; // hard coded return value
        }
    };
    int num = main1.check1();
    Assert.assertEquals(5, num);
} 
```

这将创建一个 Main 的子类，其中包含修改方法的新实现。这是替换 SUT 中难以测试的方法的重要技术。您通常会使用它来避免昂贵的远程调用或类似的事情。

当然可以像这样使用 Mockito 间谍：

```
@Test
public void testCheck1() {
    Test1 main1 = spy(new Main());
    stub(main1.modify(10)).toReturn(5);

    int num = main1.check1();
    Assert.assertEquals(5, num);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-08T20:32:47.067

虽然我迟到了，但它可能对某些人有用。只是添加到@VivaceVivo 答案：使用间谍时，请考虑 doReturn|Answer|Throw() 存根方法系列。有时使用 when(Object) 来存根间谍是不可能或不切实际的。更多信息[在这里](http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#13)

# asp.net-mvc - .NET 应用程序从 Default.aspx.cs 中的请求中剥离查询字符串参数

> ID：10801139
> 
> 赞同：1
> 
> 时间：2012-05-29T14:26:14.017
> 
> 标签：asp.net-mvc, url-rewriting, query-string

我很难弄清楚为什么我的 URL 的请求部分没有在我的应用程序的 Default.aspx.cs 的 Page_Load 方法中正确显示。

如果我的网址是这样的：

```
http://localhost:3161/SignOn?ReturnUrl=%2fReturnMeHere 
```

当我调试时，我希望我的请求对象中有查询字符串参数：

```
public void Page_Load(object sender, System.EventArgs e)
{
    string originalPath = Request.Path;
} 
```

然而，没有人出现。我猜这些正在某处被剥离，但我不确定在管道中还会做些什么。

*编辑，来自本地 URL 调试“ [http://localhost:3161/SignOn?ReturnUrl=/ThisIsDisappearing](http://localhost:3161/SignOn?ReturnUrl=/ThisIsDisappearing) ” 的屏幕截图![在此处输入图像描述](../Images/bc2c72f6ad12b7516c5dd09f92bb4360.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:34:17.387

页面的路径将始终是 www.url.co.uk。

原始路径将是没有任何格式或剥离的完整路径。

查询字符串是路径的扩展，而不是路径的一部分，因此不会包含在内。

如上所述，引用原始 URL 而不是页面路径将带回完整的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:34:05.540

`Request.Params["ReturnUrl"]`应该返回`ReturnUrl`参数的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:29:03.177

Look at Request.QueryString that is where query string parameters are stored.

Request.Path would only give you "http://localhost:3161/SignOn" as far as I can remember.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:31:54.753

Request.Path 去掉参数 Request.RawUrl 显示整个 URL，Request.Query 只是查询字符串。

# java - 如何在 Spring 上下文中将 null 设置为 Integer

> ID：10801141
> 
> 赞同：6
> 
> 时间：2012-05-29T14:26:26.253
> 
> 标签：java, spring

这是我上下文的一小部分：

```
<property name="a" value="1"/> where a is Integer. 
```

如何将 null 设置为此值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T14:28:31.710

您可以使用该元素`<null/>`来指示空值：

```
<property name="a" value="1"/><null/></property> 
```

**编辑：**官方 spring 2.5 文档中有更多信息：http: [//static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-null-element](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-null-element)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:31:18.480

在 Spring 配置文件中有设置 null 值的方法。

春天：

```
<bean class="SampleBean">
    <property name="name"><value></value></property>
</bean> 
```

结果 name 属性被设置为 ""，相当于 java 代码：sampleBean.setName("")。特殊`<null>`元素可用于指示空值，因此：

春天：

```
<bean class="ExampleBean">
    <property name="email"><null/></property>
</bean> 
```

以上配置等价于java代码：

爪哇：

```
exampleBean.setEmail(null). 
```

请参阅此链接：[http ://www.java-forums.org/java-tip/3218-how-set-null-value-springs-configuration-file.html](http://www.java-forums.org/java-tip/3218-how-set-null-value-springs-configuration-file.html)

# php - 使用 SoapClient 到 .NET Web 服务的 PHP Soap 请求

> ID：10801146
> 
> 赞同：0
> 
> 时间：2012-05-29T14:26:35.250
> 
> 标签：php, soap, service, web, wsdl

这是我第一次在这里问问题:)

所以，事情是这样的：

我是 Web 服务 WSDL 和 Soap 的新手，但对 PHP 非常有经验。我正在尝试对 WebService 进行 Soap 请求，这是 URL：

[http://webservice.monytor.com.br/WSGeope/ImpExpGEOPE.asmx?WSDL](http://webservice.monytor.com.br/WSGeope/ImpExpGEOPE.asmx?WSDL)

当我尝试做一个不需要参数的请求时，比如“AVL”，我得到的结果很好：

```
<?php
$options = array('soap_version' => SOAP_1_2, 'trace' => true, 'exceptions' => true, 'cache_wsdl' => WSDL_CACHE_NONE);
$monytor = new SoapClient("http://webservice.monytor.com.br/WSGeope/ImpExpGEOPE.asmx?WSDL", $options);
$result = $monytor->AVL();
?> 
```

生成：

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://webservices.monytor.com.br/WSGeope/">
<env:Body>
<ns1:AVL/>
</env:Body>
</env:Envelope> 
```

返回我：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<AVLResponse xmlns="http://webservices.monytor.com.br/WSGeope/">
<AVLResult>
<anyType xsi:type="xsd:string">AUTOTRAC</anyType>
<anyType xsi:type="xsd:string">CHECKROTA</anyType>
<anyType xsi:type="xsd:string">CONTROLLOC</anyType>

... and so on. 
```

这是完全预期的结果。

但是当我尝试使用一些参数时：

```
<?php
$options = array('soap_version' => SOAP_1_2, 'trace' => true, 'exceptions' => true, 'cache_wsdl' => WSDL_CACHE_NONE);
$monytor = new SoapClient("http://webservice.monytor.com.br/WSGeope/ImpExpGEOPE.asmx?WSDL", $options);
$result = $monytor->VerifyAccess(array('Empresa' => 1, 'Usuario' => 1, 'Senha' => 'test'));
?> 
```

生成：

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://webservices.monytor.com.br/WSGeope/">
<env:Body>
<ns1:VerifyAccess>
<ns1:Empresa>1</ns1:Empresa>
<ns1:Usuario>1</ns1:Usuario>
<ns1:Senha>test</ns1:Senha>
</ns1:VerifyAccess>
</env:Body>
</env:Envelope> 
```

返回我：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<VerifyAccessResponse xmlns="http://webservices.monytor.com.br/WSGeope/">
<VerifyAccessResult>false</VerifyAccessResult>
</VerifyAccessResponse>
</soap:Body>
</soap:Envelope> 
```

（“Empresa”意为“公司”，“Usuario”意为“用户”，“Senha”意为“密码”，当然我这里发的都是虚构的，但我是用真实的来测试的）

根据 Web 服务支持参数是正确的，但我的请求 XML 应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
<soap12:Body>
<VerifyAccess xmlns="http://webservices.monytor.com.br/WSGeope/">
<Empresa>1</Empresa>
<Usuario>1</Usuario>
<Senha>test</Senha>
</VerifyAccess>
</soap12:Body> 
```

在任何情况下都不会返回错误（我尝试过“try ... catch”），所以我认为请求是好的。

我的问题是：这真的是“错误”返回的原因，还是凭证错误？

如果您在浏览器中访问，还有其他方法说明：[http ://webservice.monytor.com.br/WSGeope/ImpExpGEOPE.asmx](http://webservice.monytor.com.br/WSGeope/ImpExpGEOPE.asmx)

提前致谢。

对不起我的英语不好，我是巴西人。

# c - 开关盒中的枚举

> ID：10801152
> 
> 赞同：4
> 
> 时间：2012-05-29T14:26:58.027
> 
> 标签：c, enums

这段代码有什么问题：

```
#define str(x) #x
#define xstr(x) str(x)

typedef unsigned char   uint8_t;   
typedef enum
{

         RED = 0x64,
         GREEN = 0x65,
       /* other enum values */
         BLUE = 0x87

} Format;

char buffer[50];

/* other code and variables */

/* somewhere later in code */     

myformat = RED;
/* later calling format function */

MapFormattToString(myformat,&buffer);

void MapFormattToString(uint8_t format,char *buffer)
{    
    printf("format = %x\n",format);  /*format printf has output 64 */
    switch(format)
    {
    case RED:
        sprintf(buffer,"%s\n", xstr(RED));
        break;
    case GREEN:
        sprintf(buffer,"%s\n", xstr(GREEN));
        break;
    case BLUE:
        sprintf(buffer,"%s\n", xstr(BLUE));
        break;
    default:
        sprintf(buffer,"Unsupported color\n");
    }
} 
```

如果我使用 myformat = RED 逐步执行此函数，它不会通过任何情况，而是在 switch 情况下通过默认值。
我的目标是该缓冲区应该有 RED 而不是它对应的枚举值，即 64。

编译器：Windows XP 上的 gcc 3.4.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:05:56.210

我刚刚写了如下程序，编译，测试，输出如下：

```
$ ./test
    d
    e

$ 
```

这正是您所期望的。希望这可以帮助您发现程序中的一些差异。

```
#include<stdio.h>

typedef unsigned char uint8_t;

typedef enum {
    RED = 0x64,
    GREEN = 0x65,
    BLUE = 0x87
} Format;

void MapFormatToString(uint8_t format, char *buffer) {
    switch (format) {
        case RED:
            sprintf(buffer, "%c\n", RED);
            break;
        case GREEN:
            sprintf(buffer, "%c\n", GREEN);
            break;
        case BLUE:
            sprintf(buffer, "%c\n", BLUE);
            break;
        default:
            sprintf(buffer, "Unknown\n");
    }

}

main (int argc, char *argv[]) {
    char buffer[100];

    MapFormatToString(RED, buffer);
    printf(buffer);
    MapFormatToString(GREEN, buffer);
    printf(buffer);
    MapFormatToString(BLUE, buffer);
    printf(buffer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:51:37.020

我复制粘贴了你的代码。只是对函数调用做了一个小改动。它给了我想要的输出。

更改：而不是 &buffer，传递缓冲区

```
//MapFormattToString(myformat,&buffer);
MapFormattToString(myformat, buffer); 
```

以下是主要功能供您参考：

```
int main()
{
char buffer[50];

/* other code and variables */

/* somewhere later in code */

Format myformat = BLUE;
/* later calling format function */

//MapFormattToString(myformat,&buffer);
MapFormattToString(myformat, buffer);

//  MapFormattToString(0x64, buffer);
  printf("\n***** Buffer = %s\n", buffer);
} 
```

使用的编译器：gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T15:41:25.130

在`MapFormatToString`尝试打印格式内的值：

`printf("%x", format);`

如果你没有得到 64（即 0x64），这意味着在格式化赋值和在里面读取它之间出现了问题`MapFormatToString`。例如，如果将枚举视为 32 位整数，则在转换 uint8 时可能会发生某些事情。另外，首先尝试不传递缓冲区，只打印格式的值。

# asp.net-mvc - AppHarbor MVC - 无法使用 HttpNoContent 状态代码

> ID：10801153
> 
> 赞同：0
> 
> 时间：2012-05-29T14:27:03.617
> 
> 标签：asp.net-mvc, appharbor

我需要能够以 204 的 http 状态代码响应请求，但 appharbor 只返回 500 错误。我的控制器代码正在正确执行，但是当调用下面的代码时，我只在提琴手中看到 500 错误。

```
protected ViewResult HttpNoContent()
{
    Response.StatusCode = (int)HttpStatusCode.NoContent;

    return View("NoContent");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:34:50.970

引用[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)（我已将重要部分以粗体表示）：

> 204 响应**不得包含 message-body**，因此始终以标头字段之后的第一个空行终止。

你不遵守这条规则。204 状态码表示没有内容，但您正在返回视图。尝试返回[EmptyResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.emptyresult.aspx)：

```
protected ViewResult HttpNoContent()
{
    Response.StatusCode = (int)HttpStatusCode.NoContent;

    return new EmptyResult();
} 
```

# mpi - 收集 MPI_SCAN 的结果

> ID：10801154
> 
> 赞同：1
> 
> 时间：2012-05-29T14:27:07.420
> 
> 标签：mpi, openmpi, prefix-sum

我有这个数组 [1 2 3 4 5 6 7 8 9]，我正在对其执行扫描操作。

我有 3 个 mpi 任务，每个任务都有 3 个元素，然后每个任务计算其扫描并将结果返回给主任务

```
task 0 - [1 2 3] => [1 3 6] 
task 1 - [4 5 6 ] => [4 9 15] 
task 2 - [7 8 9] => [7 15 24] 
```

现在任务 0 得到所有结果 [1 3 6] [4 9 15] [7 15 24]

我如何结合这些结果来产生最终的扫描输出？

数组的最终扫描输出为 [1 3 6 10 15 21 28 36 45]

谁能帮帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:53:30.003

您是否尝试实现自己的扫描操作？因为这不是什么`MPI_SCAN`。*它对存储在每个节点上的输入数组的每个i*元素逐元素应用扫描操作，结果将更像：

```
rank 0 - [1 2 3] => [ 1  2  3]
rank 1 - [4 5 6] => [ 5  7  9]
rank 2 - [7 8 9] => [12 15 18] 
```

然而，为了获得您想要的结果，您应该将`6`（任务 0 中第一次扫描的最后一个元素）添加到下一次扫描中的所有元素：

```
[ 1  3  6][ 4  9 15][ 7 15 24]
           +6 -------------->
            =
[ 1  3  6][10 15 21][13 21 30] 
```

然后，您应该将（*之前*`15`添加的任务 1 中扫描的最后一个元素）添加到下一次扫描中的所有元素，依此类推。 *`6`*

 *```
[ 1  3  6][10 15 21][13 21 30]
                    +15 ---->
                    =
[ 1  3  6][10 15 21][28 36 45] 
```

或者，您可以`6`只添加到第二次扫描的结果中，然后添加`21`到第三次扫描的结果中，依此类推。

也许您可以使用 MPI 操作找到一些巧妙的方法来做到这一点。*

# linux - s3fs 将 Amazon S3 存储桶挂载为本地目录的稳定性如何

> ID：10801158
> 
> 赞同：75
> 
> 时间：2012-05-29T14:27:18.743
> 
> 标签：linux, amazon-s3, s3fs

s3fs 将 Amazon S3 存储桶挂载为 linux 中的本地目录有多稳定？对于高需求的生产环境是否推荐/稳定？

有没有更好/类似的解决方案？

**更新：**使用 EBS 并通过 NFS 将其挂载到所有其他 AMI 会更好吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-05-30T16:41:25.593

[这里有一篇关于 s3fs 的好文章](http://www.turnkeylinux.org/blog/exploring-s3-based-filesystems-s3fs-and-s3backer)，在阅读后我求助于 EBS Share。

它强调了使用 s3fs 时的一些重要注意事项，即与 S3 的固有限制有关：

*   没有文件可以超过 5GB
*   您不能部分更新文件，因此更改单个字节将重新上传整个文件。
*   对许多小文件的操作非常有效（毕竟每个都是一个单独的 S3 对象）但大文件效率非常低
*   尽管 S3 支持部分/分块下载，但 s3fs 并没有利用这一点，因此如果您只想读取 1GB 文件的一个字节，则必须下载整个 GB。

因此，s3fs 是否可行取决于您存储的内容。如果您要存储照片，您想要写入整个文件或读取整个文件永远不会增量更改文件，那么它很好，尽管有人可能会问，如果您正在这样做，那么为什么不使用 S3 API 直接？

如果您谈论的是应用程序数据（例如数据库文件，日志文件），您想在其中进行小的增量更改，那么它绝对不会 - S3 Just 无法以这种方式工作，您无法增量更改文件。

上面提到的文章确实谈到了一个类似的应用程序 - [s3backer](https://code.google.com/p/s3backer/) - 它通过在 S3 上实现虚拟文件系统来解决性能问题。这解决了性能问题，但它本身也有一些问题：

*   由于延迟写入，数据损坏的风险很高
*   太小的块大小（例如，默认的 4K）会增加大量的额外成本（例如，50GB 的 4K 块存储需要 130 美元）
*   太大的块大小会增加大量的数据传输和存储费用。
*   内存使用可能令人望而却步：默认情况下它缓存 1000 个块。
    使用默认的 4K 块大小不是问题，但大多数用户
    可能希望增加块大小。

我求助于从 EC2 实例共享的 EBS Mounted Drived。但是您应该知道，虽然性能最高的选项有一个大问题 EBS Mounted NFS Share 有其自身的问题 - 单点故障；如果共享 EBS 卷的机器出现故障，那么您将失去访问该共享的所有机器的访问权限。

这是我能够承受的风险，也是我最终选择的选择。我希望这有帮助。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-20T12:09:37.960

这是一个老问题，所以我将分享我在过去一年中使用 S3FS 的经验。

最初，它有许多错误和内存泄漏（我有一个 cron-job 每 2 小时重新启动一次），但在最新版本 1.73 中它非常稳定。

S3FS 最好的一点是您无需担心的事情减少了，并免费获得了一些性能优势。

大多数 S3 请求将是 PUT (~5%) 和 GET (~95%)。如果您不需要任何后期处理（例如缩略图生成）。如果您不需要任何后处理，则不应首先访问您的 Web 服务器并直接上传到 S3（使用 CORS）。

假设您正在访问服务器可能意味着您需要对图像进行一些后期处理。使用 S3 API，您将上传到服务器，然后上传到 S3。如果用户想要裁剪，你需要从 S3 重新下载，然后重新上传到服务器，裁剪然后上传到 S3。启用 S3FS 和本地缓存后，此编排会为您处理并保存从 S3 下载文件。

在缓存方面，如果您要缓存到 EC2 上的临时驱动器，您将获得随之而来的性能优势，并且可以清除缓存而无需担心任何事情。除非您的磁盘空间用完，否则您应该没有理由清除缓存。这使得搜索和过滤等遍历操作变得更加容易。

我希望它拥有的一件事是与 S3（RSync 风格）完全同步。这将使其成为 DropBox 或 S3 的 Google Drive 的企业版，但无需应对随之而来的配额和费用。

# vb.net - DateAdd 函数调用

> ID：10801161
> 
> 赞同：0
> 
> 时间：2012-05-29T14:27:32.927
> 
> 标签：vb.net, function, date, syntax, windows-forms-designer

在我的 Windows 窗体中，我有一个用于添加天数的文本框和一个包含日期的文本框...在按钮单击事件中，我需要使用“DateAdd”函数在文本框中添加天数到 textxbox 日期中输入的日期的天数？有人可以给我正确的语法吗？我尝试过这个并遇到语法错误。

```
DateAdd(DateInterval.Day, txtNumDaysTAdd.Text, txtDate.Text) 
```

我需要使用 formatdatetime 函数在 Longdate 格式的消息框中显示答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:33:10.083

我宁愿使用 .NET 的 DateTime 函数来执行此操作：

```
Dim myDate As DateTime = DateTime.Parse(txtDate.Text)
Dim daysToAdd As Integer = Integer.Parse(txtNumDaysTAdd.Text)

Dim result As DateTime = myDate.AddDays(daysToAdd) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:36:15.830

不要使用 DateAdd，它只是为了向后兼容 VB6。请改用 DateTime 类型的方法。在 VB.NET 中，关键字`Date`是 DateTime 类型的快捷方式，就像`Integer`Int32 类型的快捷方式一样。

```
Dim originDate As Date = Date.Parse(txtDate.Text)
Dim daysToAdd As Integer = Integer.Parse(txtDaysToAdd.Text)
Dim result As Date = originDate.AddDays(daysToAdd)
MessageBox.Show(result.ToLongDateString()) 
```

# cordova - XCode 不会更新应用程序图标。

> ID：10801162
> 
> 赞同：6
> 
> 时间：2012-05-29T14:27:35.950
> 
> 标签：cordova, xcode4

我无法让 XCode 更新我的 iPad 应用程序图标。我正在使用 Phonegap/Cordova 构建它，但应用程序图标是通过 XCode 构建/管理的。

我在我的设备上构建了该应用程序进行测试，它带有默认的 Cordova 图标，然后我将我自己的图标添加到项目中，方法是将它们放入构建摘要 > 应用程序图标中。在 XCode 中，它们显示在那里，但是当我将它构建到设备时，默认的 Cordova 图标仍然显示。有任何想法吗？

PS。我正在使用 XCode 4.3.2。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T06:02:15.917

在此[链接](http://wiki.phonegap.com/w/page/39991939/Getting%20Started%20with%20PhoneGap%20iOS%20using%20Xcode%204)中，顶部的第三张图片显示您要更改图标。您会在左侧列 Resources->icons 中看到一个文件夹。在查找器中打开它并替换 iPad 等的图标。您还可以在 Resources->Splash 部分更改启动画面图像。

清空缓存从设备中删除应用程序并进行清理和构建。即使它仍然存在（有时它确实存在，相信我），重新启动您的 xCode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:12:49.993

替换 icon@2x.png 和 Default@2x~iphone.png 然后它就可以正常工作了。新 iPhone 使用 114x114 像素图标和 640x960 像素默认图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:35:24.470

列表顶部（点击文件夹图标），目标组，选择您的目标。点击摘要，向下滚动到图标，重新指向您要使用的文件。建造。部署。请享用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-22T18:54:01.467

我在 Stackoverflow 上看到过很多人问过这个问题，但似乎还没有人正确回答。这实际上很简单。

例如，如果您使用 phonegap 构建 iOS 应用程序，您需要做的就是：替换默认图像

```
www/res/icon/ios/icon-36-ldpi.png
www/res/icon/ios/icon-48-mdpi.png
www/res/icon/ios/icon-72-hdpi.png
www/res/icon/ios/icon-96-xhdpi.png 
```

用你的图标...

接下来，在您可以运行应用程序之前，您还需要替换 Xcode 上的图标：路径应该是

```
**YOUR-APP-ROOT/platforms/ios/YOUR-APP-NAME/Resources/icons** 
```

神奇之处在于“icon.png”和“icon@2x.png”，但是您应该替换上面的所有图标，并确保您要替换的每个图像都有正确的尺寸，否则应用程序将无法构建成功地。

现在你可以

> ```
> phonegap build ios 
> ```

其次是 ：

> phonegap运行ios

玩得开心！

# sql - Rails Active Record 查询生成——使用包含和点（'.'）时的奇怪行为

> ID：10801168
> 
> 赞同：1
> 
> 时间：2012-05-29T14:27:46.687
> 
> 标签：sql, ruby-on-rails-3, activerecord

我有一个像这样的商业模型和地址模型

```
class Business < ActiveRecord::Base
  has_one :address, as: :addressable
end

class Address < ActiveRecord::Base
  belongs_to :addressable, polymorphic: true
end 
```

现在奇怪的部分。如果我运行以下

```
Business.includes(:address).where(['email like ?', '%whatever%']) 
```

生成两个查询

```
SELECT `businesses`.* FROM `businesses` WHERE (email like '%whatever%')
SELECT `addresses`.* FROM `addresses` WHERE `addresses`.`addressable_type` = 'Business' AND `addresses`.`addressable_id` IN (26) 
```

但是如果将出现在like 子句中的文本有一个点（'.'），如下所示

```
Business.includes(:address).where(['email like ?', '%what.ever%']) 
```

这次使用 JOIN 生成单个查询

```
SELECT `businesses`.`id` AS t0_r0, `businesses`.`name` AS t0_r1, `businesses`.`primary_category_id` AS t0_r2, `businesses`.`secondary_category_id` AS t0_r3, `businesses`.`sub_primary_category_id` AS t0_r4, `businesses`.`sub_secondary_category_id` AS t0_r5, `businesses`.`website` AS t0_r6, `businesses`.`phone` AS t0_r7, `businesses`.`manager_name` AS t0_r8, `businesses`.`manager_phone` AS t0_r9, `businesses`.`email` AS t0_r10, `businesses`.`created_at` AS t0_r11, `businesses`.`updated_at` AS t0_r12, `businesses`.`encrypted_password` AS t0_r13, `businesses`.`reset_password_token` AS t0_r14, `businesses`.`reset_password_sent_at` AS t0_r15, `businesses`.`remember_created_at` AS t0_r16, `businesses`.`sign_in_count` AS t0_r17, `businesses`.`current_sign_in_at` AS t0_r18, `businesses`.`last_sign_in_at` AS t0_r19, `businesses`.`current_sign_in_ip` AS t0_r20, `businesses`.`last_sign_in_ip` AS t0_r21, `businesses`.`confirmation_token` AS t0_r22, `businesses`.`confirmed_at` AS t0_r23, `businesses`.`confirmation_sent_at` AS t0_r24, `businesses`.`failed_attempts` AS t0_r25, `businesses`.`unlock_token` AS t0_r26, `businesses`.`locked_at` AS t0_r27, `addresses`.`id` AS t1_r0, `addresses`.`line1` AS t1_r1, `addresses`.`line2` AS t1_r2, `addresses`.`city` AS t1_r3, `addresses`.`country` AS t1_r4, `addresses`.`zip` AS t1_r5, `addresses`.`neighbourhood` AS t1_r6, `addresses`.`addressable_id` AS t1_r7, `addresses`.`addressable_type` AS t1_r8, `addresses`.`created_at` AS t1_r9, `addresses`.`updated_at` AS t1_r10, `addresses`.`latitude` AS t1_r11, `addresses`.`longitude` AS t1_r12, `addresses`.`gmaps` AS t1_r13 FROM `businesses` LEFT OUTER JOIN `addresses` ON `addresses`.`addressable_id` = `businesses`.`id` AND `addresses`.`addressable_type` = 'Business' WHERE (email like '%what.ever%') 
```

我尝试为 like 子句使用不同的值，并注意到仅当输入具有点（'.'）并且点（'.'）之前至少有 2 个字符时才会生成 JOIN 查询。

几个例子

*   'whatever' 导致 2 个没有 JOIN 的查询

*   'w.hatever' 导致 2 个没有 JOIN 的查询

*   'wh' 导致 2 个没有 JOIN 的查询

*   'w.ha' 导致 2 个没有 JOIN 的查询

*   'w。' 导致 2 个没有 JOIN 的查询

*   'xxxxxxxxw.hatever' 导致 1 个 JOIN 查询

*   'what.ever' 导致 1 个 JOIN 查询

*   “什么。” 结果 1 查询与加入

我的猜测是这与 Rails 认为如果 where 子句中有一个点它可能引用另一个表，所以应该应用连接，如果没有点或者之前只有一个字符点（可能是表名不能是单个字符的 y .. 猜测！！）而不是生成 2 个查询。

有人见过这种问题吗？我正在使用 Rails 3.2

# google-chrome - 内部元素在 css3 转换后仍然不可见

> ID：10801171
> 
> 赞同：4
> 
> 时间：2012-05-29T14:27:59.233
> 
> 标签：google-chrome, css, css-transitions

在完成 css3 转换后，回调使内部元素可见（使用通用选择器和 opacity 属性）。

在以下情况下，它们在屏幕上保持不可见。最奇怪的是，当使用控制台并“检查元素”时，它们神奇地出现了。

[http://jsfiddle.net/tT84s/12/](http://jsfiddle.net/tT84s/12/)

此错误发生在 Chrome 19.0.1084.52 上，但不在 Safari 5.1.5 上

我怀疑一个渲染错误，一些不会触发的内部浏览器触发器或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:56:43.507

`-webkit-backface-visibility: hidden`

Webkit 错误。尝试使用上面的代码，它可能会帮助您解决问题。此外，您可能想要使用`transform: scale()`而不是宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T23:57:06.817

试试[http://jsfiddle.net/tT84s/13/](http://jsfiddle.net/tT84s/13/)

摇动 DOM 似乎有效。在这个小提琴中，我重新附加了过渡元素的子元素（以它们最初定位的顺序）。它似乎在小提琴中起作用 - 尽管这里提到的一些解决方案不适用于我们对该错误的特定体验。

一般来说，强制 DOM 更改看起来很有效。但是请注意，插入和删除 a`<div>`没有效果。去搞清楚！祝你好运，每个人都请尝试为这个或相关的小提琴/错误演示发布你的工作解决方案。例如，这可能适用于简单地添加和删除最后一个孩子 - 以避免执行不必要的 appendChild 操作。

# mysql - 如何强制 Django 进行区分大小写的比较？

> ID：10801180
> 
> 赞同：0
> 
> 时间：2012-05-29T14:28:22.707
> 
> 标签：mysql, django

由于我们的数据库的整理方式，它们会忽略用户名和密码的大小写，我们目前无法在数据库级别进行修复。从[这个线程](https://stackoverflow.com/questions/3936967/mysql-case-insensitive-select)看来`WHERE BINARY 'something' = 'Something'`应该可以解决问题，但我无法弄清楚让 Django 插入`BINARY`。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:19:00.053

我认为没有一种简单的方法可以强制 Django 在查询内容中添加一些内容。

您可能想简单地在 Django 中编写一个[原始 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)，以获取通过区分大小写比较过滤的对象，然后在普通查询中使用它们。

另一种方法是使用 Django 区分大小写的过滤器来获得相同的结果。例如`contains`/`startswith`两者都使用`BINARY LIKE`并且可以在比较具有相同长度的两个字符串时使用（如密码哈希））。最后，您可以使用`regexp`来进行区分大小写的比较。但在那种情况下，这些都是相当丑陋的方法。它们有不必要的开销，您应该尽可能避免它们。

# hibernate - Hibernate manytomany @JoinTable + @SecondaryTable duplicate entries

> ID：10801181
> 
> 赞同：4
> 
> 时间：2012-05-29T14:28:26.063
> 
> 标签：hibernate, hibernate-mapping

I have a relation of type `@ManyToMany` with a `@JoinTable` association.

The thing is that the entity in the relation has its own table, but a couple of properties should go to the association table.

The `A_C` table is fine I think.

Adding the `@SecondaryTable` duplicate.

```
@Entity
@Table(name = "A")
@SecondaryTable(name = "A_C", pkJoinColumns = {
@PrimaryKeyJoinColumn(columnDefinition = "A_ID", name = "A_ID")})
class A {
    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "A_B", joinColumns = {@JoinColumn(name = "A_ID")}, inverseJoinColumns = {@JoinColumn(name = "B_ID")})
    private List<B> bs = new ArrayList<B>();

    @Column(table = "A_B")
    private int b1;
}

@Entity
@Table(name = "B")
@SecondaryTable(name = "A_B", pkJoinColumns = {
@PrimaryKeyJoinColumn(columnDefinition = "B_ID", name = "B_ID")})
class B {
    @Column(table = "A_B")
    private int a1;

    @Column(table = "A_B")
    private int a2;

    @ManyToMany(mappedBy = "A_ID", fetch = FetchType.LAZY)
    private List<A> as = new ArrayList<A>();

} 
```

This when saving `A` entities the `B` are duplicated in a way where:

```
A_ID    B_ID   a1     a2
   1       0    1      1    
   1       1    0      0 
```

Where should be

```
A_ID    B_ID   a1    a2
   1       1    1     1 
```

With `@Embeddable` won't work neither.

ssedano.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T14:32:33.767

`A_B`是 Table 的 Join-Table `A`，`B`但您也将它用作`B`.

这行不通。如果将 a分配给多个s ，应该`B.a1`并且`B.a2`具有什么值？`B``A`

有三种可能： * a1 和 a2 属于关联。在这种情况下，您需要一个关联类来存储该附加信息。* a1 和 a2 只属于 B：a1 和 a2 不应该在表中`A_B` *`A`是一个组成`B`：表`A_B`并且`B`应该被合并并且多对多关系被一对多关系取代。

如果没有属性的具体名称，很难判断它们是否真正属于。

# sql - 在大 MDB 文件中使用 Select SQL 命令时速度很慢

> ID：10801183
> 
> 赞同：0
> 
> 时间：2012-05-29T14:28:31.137
> 
> 标签：sql, ms-access, vb6, ado

我正在使用大小为 500 MB 的 access 2000 mdb 文件，当我`Select * From MyTable Where Phone=7744111`让它花费太长时间时，超过 30 秒才能得到结果。

如何提高搜索性能？（我使用的是 vb6 和 ado 2.8）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T14:31:26.680

索引字段 [Phone] - 似乎您正在执行完整扫描

也尝试给出确切的列列表而不是'*'

# php - changing url structure with mod_rewrite

> ID：10801184
> 
> 赞同：0
> 
> 时间：2012-05-29T14:28:31.600
> 
> 标签：php, .htaccess, url, mod-rewrite

For a new site we are developing, the URL structure is as follows.

*   [http://sitename.com/index.php?video=id/id2](http://sitename.com/index.php?video=id/id2) (ids are numeric)
*   [http://sitename.com/index.php?aboutus](http://sitename.com/index.php?aboutus)

After everything is finished, now the *client wants to change the URL structure as follows

*   [http://sitename.com/video/id/id2](http://sitename.com/video/id/id2)
*   [http://sitename.com/aboutus](http://sitename.com/aboutus)

How can i change this as per his requirements with mod_rewrite / htaccess? I am not an expert with htaccess and its not possible for us to change the platform now.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:33:46.430

尝试这样的事情：

```
RewriteEngine on
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ $1?$2/$3 [L,QSA]
RewriteRule (.*?)/?$ index.php?$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:38:57.570

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ index.php?$1=$2/$3 [L,QSA]

RewriteRule (.*?)/?$ index.php?$1 [L,QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:47:17.507

## htaccess 示例

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # About Us ---------------------------------------
    RewriteRule ^aboutus.html*$ index.php?page=aboutus [L]

</IfModule> 
```

## mod重写php示例

```
function replace_for_mod_rewrite($s) {
$siteUrl = "Your site url";
$urlin = array( "`".$siteUrl."/index\.php\?page=aboutus(['|\"|#])`is" );
$urlout = array( $siteUrl."/aboutus.html\\1" );
$s = preg_replace($urlin, $urlout, $s);
} 
```

更多详情：[TechNew.In](http://www.technew.in/)

# ruby-on-rails - How do I remove a heading yield a specific page?

> ID：10801188
> 
> 赞同：1
> 
> 时间：2012-05-29T14:28:33.643
> 
> 标签：ruby-on-rails

I am providing the h1 into my header, but I don't want it on products/show. How do I remove it just for that page?

_header.html

```
<header>
  <h1><%= yield(:heading) %></h1>
</header> 
```

Homepage

```
<% provide(:heading, 'This is the homepage heading') %> 
```

products/show

```
<% provide(:heading, '') %> 
```

Obviously, I could just not provide any heading for the products/show page but there is CSS styling applied to my H1 that is screwing up my design, whether there is content in the h1 tag or not.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:37:34.793

仅在元素有内容时才渲染它：

```
<header>
  <% if content_for?(:heading) %>
    <h1><%= yield(:heading) %></h1>
  <% end %>
</header> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:30:05.517

Use a different partial? Put an `if`-ish statement around the header?

As-is the elements themselves will always be there, because there's no reason for them not to be.

# php - Socialengine - 获取正在查看的个人资料的用户 ID

> ID：10801199
> 
> 赞同：0
> 
> 时间：2012-05-29T14:29:04.753
> 
> 标签：php, socialengine

我正在尝试创建一个小部件来显示有关正在查看个人资料的用户的信息。例如

Andys 个人资料页面（由 steven 查看）

Andy 在我们的论坛上发表了 10 个帖子

所以我想要安迪的用户 ID 而不是查看者（史蒂文的）ID

希望这很清楚：D

目前我正在使用当前的 url 和 preg 匹配它以获得用户唯一的用户名，但我希望可能有一个更优雅的解决方案

谢谢，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:21:06.963

您可以执行以下操作；

```
Engine_Api::_()->core()->getSubject() 
```

这将返回正在查看的当前用户的用户对象

# java - How to adjust the height of a View that is contained in a row of TableLayout

> ID：10801202
> 
> 赞同：0
> 
> 时间：2012-05-29T14:29:32.630
> 
> 标签：java, android, view, tablelayout, tablerow

This what i get in my `Activity`:

[http://img855.imageshack.us/img855/2056/androidscreenshot.jpg](http://img855.imageshack.us/img855/2056/androidscreenshot.jpg)

The activity is filled by a `TableLayout`. The `TableLayout` in turn is filled by 2 `TableRow` that are Two `View` containing a 100x100 cyan bitmap. The yellow area is the background of the activity in position (1,1) of the TableView. The red area is the background of the activity in position (1,2).

The problem is that i cannot see the other two cyan bitmap in position (2,1) and (2,2). I think the problem is that the View in the first row are resized in the width but not in the height. So the view in the first row obscure the view in the second row.

If i add to the `View` both `ViewGroup.LayoutParams` or `LayoutParams` with `WRAP_CONTENT` i get a `java.lang.ArithmeticException: divide by zero`

This is my code:

```
public class HIDActivity extends Activity
{

    boolean toggle = false;            
    TableLayout IFaceLayout;
    TableRow TButtons1;
    TableRow TButtons2;
    TableRow TArea;
    SimpleButton TButton1;
    SimpleButton TButton2;
    SimpleButton TButton3;
    SimpleButton TButton4;

    public void onCreate(Bundle icicle)
    {
        super.onCreate(icicle);

        TButton1 = new SimpleButton(this);
        TButton2 = new SimpleButton(this);
        TButton3 = new SimpleButton(this);
        TButton4 = new SimpleButton(this);

        TButtons1 = new TableRow(this);
        TButtons2= new TableRow(this);

        TButtons1.setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) );
        TButtons2.setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) );

        TButtons1.addView(TButton1);                
        TButtons1.addView(TButton2);
        TButtons2.addView(TButton3);
        TButtons2.addView(TButton4);

        IFaceLayout = new TableLayout(this);
        IFaceLayout.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) );
        IFaceLayout.setStretchAllColumns(true);

        IFaceLayout.addView(TButtons1);
        IFaceLayout.addView(TButtons2);

        setContentView(IFaceLayout);
        IFaceLayout.requestLayout();
    }

    class SimpleButton extends View
    {
        BitmapDrawable ButtonImage;
        Paint Style;
        int i , j ;
        int width , heigth;

        public SimpleButton(Context context) 
        {
            super(context);
            Style = new Paint();

            if(toggle == false) 
            {    
                this.setBackgroundColor(Color.YELLOW);
                toggle = true;
            }    
            else 
            {    
                this.setBackgroundColor(Color.RED);
                toggle = false;
            }
        }

        @Override
        public void onDraw(Canvas canvas)
        {       
            ButtonImage = new BitmapDrawable(Bitmap.createBitmap(100 , 100 , Bitmap.Config.RGB_565)); 
            this.width = ButtonImage.getBitmap().getWidth();
            this.heigth = ButtonImage.getBitmap().getHeight();

            for(i = 0 ; i < width ; i++)
            {                
                for(j = 0 ; j < heigth ; j++)
                {
                    ButtonImage.getBitmap().setPixel(i, j, Color.CYAN);
                }
            }

            canvas.drawBitmap(ButtonImage.getBitmap() , 0 , 0 , Style);        
        }        
    }
} 
```

Could someone please help me with this problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:48:36.873

**Gophermofur**的暗示我部分正确。

调用 MyView.setLayoutParams 并将与包含 MyView 的对象的类型匹配的 Layout 对象传递给它是正确的。然而，为了允许容器控制包含对象的大小，我必须使用 MATCH_PARENT 而不是 WRAP_CONTENT。

此外，我已经部分解决了手动将高度设置为 100 的问题。即：

```
TButton1.setLayoutParams(new TableRow.LayoutParams(LayoutParams.MATCH_PARENT , 100); 
```

现在我得到了 4 个正方形：

[http://img152.imageshack.us/img152/1530/androidscreenshot3.jpg](http://img152.imageshack.us/img152/1530/androidscreenshot3.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:08:46.277

问题似乎是扩展 View 的 SimpleButton 未设置为 wrap_content 垂直。

设置布局参数时，您希望使用对象所在的容器。当您定义布局参数时，您实际上是在说“这就是我的对象/视图将如何填充它所在容器的空间”。在这种情况下，您的按钮将位于表格行内，因此您应该定义相对于表格行的布局参数，如下所示：

```
TButton1.setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) );

TButton2.setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) );

TButton3\. [same thing]
TButton4\. [same thing] 
```

您可能还需要将 TButtons 布局参数更改为相对于 TableLayout，因为 TableRow 位于表格布局中。

```
TButtons1.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) );            
TButtons2.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) ); 
```

您的表格布局也包含在父布局中。我不确定它是什么，但它将是您的 xml 文件的根（可能），这很可能是相对或线性布局。您应该根据它所在的父布局定义表格布局参数。

```
IFaceLayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT , LayoutParams.WRAP_CONTENT ) ); 
```

# java - Android Change image depending on a global variable

> ID：10801205
> 
> 赞同：0
> 
> 时间：2012-05-29T14:29:44.953
> 
> 标签：java, android, xml, eclipse, variables

the question is simple.

I have 2 images in PNG format (logo1.png and logo2.png) in the project. Currently the project is loaded (in a imageview) the logo1.png, but I would do, depending on the value of a variable load the logo1.png or load logo2.png in imageview control.

The project currently has 20 Activitys with this picture (each with its own layout in XML), I will not be changing code on the 20 screens, it could do with a simple instruction to verify the value of the variable, but would have to make change in the 20 screens.

wonder if there is no way to do that depending on the value of a variable, change the image in the ImageView.

will be able to access the value of the variable from the same XML?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:48:38.940

我有点困惑，但我会试一试。

是的，您可以有一个全局变量来定义要加载的图像。但据我了解，您需要更改加载该图像的活动中的代码，以使它们通过代码隐藏动态加载图像。

我怀疑它会是这样的：

1.  从数据库中获取指示要加载的值的信息。
2.  `SetImageToLoad(someValue)`
3.  在每个加载图像的类中，您需要检索您之前在步骤#2 中设置的值。

    公共类 HelperClass
    {

    ```
    int resIDOfImageToLoad =  0;

    public static void SetImageToLoad(String imageName)
    {
        if(imageName.equals("abc"))
        {
            resIDOfImageToLoad = R.id.abc;
        }
        else if(imageName.equals("xyz"))
        {
            resIDOfImageToLoad = R.id.xyz;
        }
     }

     public static int GetResourceIDOfImageToLoad()
     {
         return resIDOfImageToLoad;
     } 
    ```

    }

然后在需要加载图像的类中，你会调用这样的东西

```
ImageView myImage = (ImageView)findViewById(...)
myImage.setImageResource(HelperClass.GetResourceIDOfImageToLoad()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:50:35.063

假设您有一个基类 Activity ，您可以`getLogo()`在基类中定义一个返回 png（或文件名或任何适合您的名称）的方法。然后在扩展布局时调用该方法。

最初，您必须更改所有活动，但之后，如果您决定更改选择显示哪个图像的逻辑，则只需更改基类。（如果这不是您想要的，请澄清您的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:46:11.420

如果我理解正确的话。创建图像的新 XML 视图，例如 logo.xml，并在所有 20 个视图中使用它，当您想要更改该图像时，仅在 logo.xml 中更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:53:57.410

我建议使用[Style 或 Themes](http://developer.android.com/guide/topics/ui/themes.html)。阅读有关继承的部分，并`Style`为每个徽标声明一个单独的部分。`Style`然后，您可以在每个 XML 文件中重用。

如果您决定以编程方式确定要使用的图像，则可以声明一个`static`可在应用程序范围内使用的方法来确定在每个上下文中使用哪个徽标，然后`setImageResource()`相应地确定。

# java - Invoke R Language/script from java

> ID：10801207
> 
> 赞同：2
> 
> 时间：2012-05-29T14:29:50.290
> 
> 标签：java, r, rserve, jri, rcaller

How do we invoke R language / R script from java? Basically I need java kind of wrapper around R script.

1.  Data will be given to java layer say method setData(double[]) which should in turn sends to R script - let us say setDataR(double []) method.

2.  R script will perform some computation say calls method double[] computeR().

3.  Java program will get the computation result by invoking double[] getData() which in turn delegates to R script to get the computated data.

How can this be performed by JRI, Rserv, Rcaller? I do not see any way to invoke Rscript methods? Please send sample. It should be simular to JNI (java, C++) invocations.

1.  Does within jvm I think multiple threads cannot invoke R script call correct? Any work around?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:31:04.843

从 Java 中使用 R 的最简单方法是使用`Runtime.exec("")`、获取响应并解析它。有关如何运行本机指令的典型示例是：

```
Process p = Runtime.getRuntime().exec("ls");
BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));
BufferedReader stdError = new BufferedReader(new InputStreamReader(p.getErrorStream())); 
```

从这里，您可以读取和处理打印到标准输出并缓冲到`stdInput`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T15:08:29.940

RCaller 正是你想要的。假设您有一个定义为的双数组“a”

```
double[] a = new double[] {1.0, 2.0, 3.0}; 
```

并且您想要计算平均值、中位数和标准差值。创建一个新的 RCaller 实例

```
RCaller caller = new RCaller();
Globals.detect_current_rscript();
caller.setRscriptExecutable(Globals.Rscript_current);

RCode code = new RCode();

code.addDoubleMatrix("a", a);
code.addRCode("s <- list(mean=mean(a), median=median(a), sd=sd(a))");

caller.setRCode(code);

caller.runAndReturnResult("s");

double mean = caller.getParser().getAsDoubleArray("mean")[0];
double median = caller.getParser().getAsDoubleArray("median")[0];
double sd = caller.getParser().getAsDoubleArray("sd")[0]; 
```

并且变量中位数保存从 R 脚本返回的 2.0 的值。有关详细信息，请访问[此处的页面](http://stdioe.blogspot.com.tr/search/label/rcaller)

# android - Android and JSON wrong SessionID

> ID：10801208
> 
> 赞同：0
> 
> 时间：2012-05-29T14:29:53.530
> 
> 标签：android, json, request, response, sessionid

I have problem with getting sessionID with JSON. JSON is always returning new sessionID and when I'm trying to add sessionID to request response is wrong SessionID, it should return opened sessionID if it's open or open new sessionID and always return the same sessionID while it's opened.

It's my request class:

```
public abstract class RequestSender<T> {

    private final String requestUrl;

    DefaultHttpClient httpclient;

    InputStream inputStream;

    public RequestSender(String methodName) {
        this.requestUrl = Settings.URL + methodName;
    }

    public void execute() throws IllegalStateException, IOException {
        httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(requestUrl);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        inputStream = entity.getContent();
    }

    private String convertResponseToString() throws IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                inputStream, "UTF8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        inputStream.close();
        return sb.toString();
    }

    protected JSONObject parseToJSON() throws JSONException, IOException {
        return new JSONObject(convertResponseToString());

    }

    public String getRequestUrl() {
        return requestUrl;
    }

    public abstract T getResults() throws JSONException, IOException;

} 
```

If anybody can help me I will be thankfull :).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:23:38.330

`new DefaultHttpClient()`问题解决了，是每次make造成的。`getSessionId`调用方法时应该只创建一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:33:56.547

我所做的是，在与服务器的第一次成功身份验证（或请求-响应交换）时，我使用“登录成功”json 消息显式发送会话 ID。

我的 Android 应用程序将此会话 ID 保存在一个单例中，并且发出的每个请求都伴随着会话 ID。

服务器脚本使用会话 ID 来验证会话是否已由经过身份验证的用户打开。

在服务器端，我使用这个脚本根据 sessionid 重新创建会话：

```
<?php
    if($_REQUEST['sessionid'])  //see if client sent a sessionid
        session_id($_REQUEST['sessionid']); //create session on the basis of retreived session id
    session_start(); // start session
?> 
```

# c++ - Not sure how to call a class function using templates

> ID：10801216
> 
> 赞同：3
> 
> 时间：2012-05-29T14:30:43.140
> 
> 标签：c++, templates

I am making my own dictionary using templates **(no I can't and I won't use anything from STL)**.

I want to have a very simple search function, but I have a small problem.

```
template <typename TElement>
void Dictionary<TElement>::search(TElement ADT, int key) {  // Abstract Data Type
    inf flag = 0;
    index =  int (key % max);
    temp[index] = root[index]; // root of the hash
    while (temp[index]->next != NULL) {
        if(temp[index]->data->key_actual_name == key) { @things happen }
    }
} 
```

**What I want to understand:** how to use template so that I can have `temp[index]->data-><template call>` if that makes any sense

I want to call the dictionary by using: Class_type == TElement and "key" is always an int but it can be different things. It might be an ID or phone number. Problem is I need to use the actual name of the key (`if(temp[index]->data->ID (or phone or what ever) == key`) { @things happen }), I imagine I could use templates here but I don't know how.

also maybe relevant:

```
template <typename TElement>
typedef struct list{
    TElement data;
    struct list *next;
}node_type;
node_type *ptr[max], *root[max], *temp[max]; 
```

Also, if I do use a template for key_actual_name, how would the implementation work AND how would I call that function ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T14:45:07.743

你可以从标准库函数中获得一些灵感，比如`find_if`有一个额外的参数进行比较。

```
template <class InputIterator, class Predicate>
InputIterator find_if ( InputIterator first, InputIterator last, Predicate pred ); 
```

然后，您可以传递一个参数，告诉`search`函数如何找到您要查找的密钥。也许用`==`with代替

```
if(pred(temp[index]->data, key)) { @things happen } 
```

并传递不同`pred`的函数以将密钥与适当的成员进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:00:45.147

如果我理解正确：

```
temp[index]->data->key_actual_name 
```

解析为 TElement 的数据成员，它是一个 int，并且您希望它是一个模板。如果是这种情况，您可以这样做：

```
template <template <class> class TElement, typename TKey>
struct node_type
{
    TElement<TKey> data;
    node_type *next;
};

template <template <class> class TElement, typename TKey>
class Dictionary
{
    typedef node_type<TElement, TKey> node_t;
    node_t _root;

    void search(node_t& node, const TKey& key)
    {
        TKey& thekey = node.data.key_actual_name;
        // Do some algorithm
    }
public:
    void search(const TKey& key)
    {
        search(_root, key);
    }
};

template <class T>
struct Element
{
    T key_actual_name;
};

int main(int argc, char ** argv)
{
    Dictionary<Element, int> dic1;
    dic1.search(1);

    Dictionary<Element, char> dic2;
    dic2.search('a');

    return 0;
} 
```

如您所见，Element 有一个模板参数，因此您可以将 key_actual_name 的类型更改为适合您的情况，但让搜索函数以通用方式访问它（假设它具有 operator== 重载）。

# php - 通过许多拼写选项之一搜索名称

> ID：10801217
> 
> 赞同：0
> 
> 时间：2012-05-29T14:30:47.747
> 
> 标签：php, mysql, performance

我有一个城市列表，每个城市都有许多拼写选项（即：New-york、New York City、NY、NYC）

选项的数量不是恒定的，并且可能因城市而异。

现在我有一个`cities`看起来像（破折号、逗号等）的表，在插入`alternative_names`列之前被删除：

```
|  id  |     name     |    alternative_names    |
-------------------------------------------------
|  1   |   New-York   |    ny,new york, nyc     |
|  2   |  New Jersey  |  new jersey,jersey,nj   | 
```

当用户输入`NYC`或`New Yo`例如 - 他应该得到 New-York

我可以用`REGEX`or来做`LIKE '%query%'`，但表格包含数千个城市，效率极低。

所以 - 有没有更好的方法在大型数据库上执行这种搜索？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:33:07.870

请参阅有关数据库设计中的[多值属性的文章。](http://www.tomjewett.com/dbdesign/dbdesign.php?page=hobbies.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:34:22.590

分离`alternative_names`成一个新表：

```
city_alternative_names
----------------------
id
city_id
name 
```

并查询此表以获取“官方”城市名称。

```
SELECT c.name
FROM city c
LEFT JOIN city_alternative_names cn ON c.id=cn.city_id
WHERE cn.name='nyc' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:38:22.873

我会将数据库设计更改为具有三列表，每行只有一个拼写选项。然后您可以使用数据库选择。如果您的数据库如下所示：

```
|  id  | city_id  |   name     |  alternative_names    |
------------------+------------+------------------------
|  1   |      1   | New-York   |  ny                   |
|  2   |      1   | New-York   |  new york             |
|  3   |      1   | New-York   |  nyc                  |
|  5   |      2   | New Jersey |  new jersey           |
|  6   |      2   | New Jersey |  jersey               |
|  6   |      2   | New Jersey |  nj                   | 
```

然后你可以像这样编写一个简单的搜索：

```
SELECT city_id, name
FROM cities
WHERE LOWER(name) = LOWER($1)
OR LOWER(alternative_name) = LOWER($1) 
```

或者，更好的是，将它们拆分为两个表 CITIES (id, name) 和 ALT_CITIES (city_id, alt_name) 并在查询时加入。

# facebook - Getting friend user id, and their photos

> ID：10801218
> 
> 赞同：1
> 
> 时间：2012-05-29T14:30:49.430
> 
> 标签：facebook, userid

I am doing some research into the capacity of Facebook Connect. I have some questions on how a couple of bits of functionality.

1.  Is it possible to fetch a list of all friends of a user?

The idea of this is that a user would log in using my site and then they could search through their friends and select one, and the site would get that friends users id and store it to the sites database.

1.  Getting a photos from that user

After getting the friends user id, would it then be possible to get their photos? Or would the friend need to give the site permission to do that?

I am looking into a site where you can buy a greetings card for a friend, and i wanted to know whether my users would be able to login via facebook, pick a friend, get a photo and then at the time of their birthday it would send them a private message (which i think i know how to do) linking them back to my site where they could view the birthday card and their photo.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:53:01.450

要回答您的问题：

1.  是的。从用户的登录过程中获得访问令牌后，向`https://graph.facebook.com/me/friends`. 你可以在这里自己测试一下：[https ://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends)

2.  是的。在登录过程中，您必须请求`user_photos`和`friends_photos` [权限](https://developers.facebook.com/docs/authentication/permissions/)，之后您才能使用访问令牌向 Graph API 请求`https://graph.facebook.com/USERID/photos`。这将仅返回允许用户查看当前隐私设置的朋友的照片。

# javascript - remove class name in prototypejs

> ID：10801221
> 
> 赞同：1
> 
> 时间：2012-05-29T14:31:02.790
> 
> 标签：javascript, prototypejs

I need to convert following jquery into prototype. How can I do it ?

```
$('.exercise-main .menu li').removeClass('current');

<div class="exercise-main">

<div class="menu">

    <ul id="myList">
            <li class="firstTab current" ></li>
            <li class="secondTab"></li>
            <li class="thirdTab"></li>

    </ul>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:33:19.833

用这个：

```
$$(.exercise-main .menu li).invoke('removeClassName','current'); 
```

# c# - NLog 找不到或加载配置文件

> ID：10801223
> 
> 赞同：5
> 
> 时间：2012-05-29T14:31:09.370
> 
> 标签：c#, ninject, config, nlog

我正在编写一个应用程序并使用 Ninject 创建一个可用于创建 Nlog Loggers 的 Logging 工厂实例。我有自己的 Logger 类，它包装了 Nlog Logger 类

我有一个处理注入的 IOC 项目和一个托管 LoggerFactory 和 Logger 类的 Logging 项目。

我想要这样做的原因是让所有其他项目共享一个日志记录配置，而不是必须分别在每个项目中包含 Nlog dll 和配置。

这一切都构建并运行良好，但是当 LoggerFactory 来创建一个记录器时

```
public ILogger GetLogger<T>()
{
    NLog.Logger nLogLogger = NLog.LogManager.GetLogger(typeof(T).ToString());

    return new Logging.Logger(nLogLogger);
} 
```

配置为空，表明 NLog.dll 没有找到 NLog.config 文件。

```
NLog.LogManager.Configuration 
```

我按照说明将 NLog.config 命名为 NLog.dll.nlog 复制到 bin 目录，我可以在 NLog.dll 旁边看到它

从 Nlog 文档来看，这应该足够了[http://nlog-project.org/wiki/Configuration_file](http://nlog-project.org/wiki/Configuration_file)但它没有被发现。“NLog.dll 所在目录中的 NLog.dll.nlog”

我将 NLog.dll.nlog 文件标记为内容并将 copyToLocal 标记为 true。

感谢尼尔的任何帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T09:51:13.070

我今天早上设法让这个工作

有两个正在运行的项目使用日志记录——一个 MVC 应用程序和一个 WEBAPI 应用程序。问题是在构建解决方案时 NLog.config 文件被复制到应用程序的 BIN 文件夹中。配置文件需要与 web.config 文件一起位于项目根目录中。

为了解决这个问题，我在 Logging 项目上创建了一个构建后事件，以将配置文件复制到 MVC 应用程序和 WEBAPI 应用程序的项目根目录。

日志记录现在工作正常。

# coldfusion-8 - cfsearch - 对查询中的类别使用显式

> ID：10801226
> 
> 赞同：1
> 
> 时间：2012-05-29T14:31:19.227
> 
> 标签：coldfusion-8, explicit, verity, cfsearch

我有一个搜索工作，它使用类别结合了多个 cfsearch'es 的结果。收集数据来自查询，即 mssql 数据库中的视图。

问题是搜索需要多个 cfsearch'es，每个都需要时间来处理。它们也都是单独处理的，因此结果不是由 Verity 组合，而是由 QoQ 联合。

所以我的问题是：我可以使用 AND、OR 或 NOT 搜索多个类别，每个类别都包含特定的单词吗？

类别：水果、蔬菜、乳制品 搜索词：橙子、苹果、芹菜、酸奶、福特、篮球

我想要的是像这样搜索条件：

```
basketball AND FRUIT<CONTAINS>orange AND VEGETABLES<CONTAINS>celery 
```

所以我的标签是：

```
<cfsearch type="explicit" collection="myCollection" name="mySearch"
    criteria="basketball AND FRUIT<CONTAINS>orange AND VEGETABLES<CONTAINS>celery"> 
```

我正在寻找橙色的水果，芹菜的蔬菜和篮球的所有类别。

我也无法进行简单的显式搜索：

```
<cfsearch type="explicit" collection="myCollection" name="mySearch"
    criteria="FRUIT<CONTAINS>orange"> 
```

但是当我搜索

```
<cfsearch type="explicit" collection="myCollection" name="mySearch"
        criteria="<WORD>orange"> 
```

我得到一个类别为 FRUIT 的结果。

任何明确搜索的帮助或指导都会有所帮助。我看过 Adob​​e 的东西，但我要么错过了一些东西，要么没有解释如何做到这一点（或者如果不可能的话）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:54:24.690

我发现 Verity 在执行显式搜索时似乎没有搜索类别。

我必须将我的类别列转换为 cf_customN 列，然后对其进行匹配。我已经在使用 cf_custom1，所以我将 cf_custom2 用于我的类别。

我的标准现在建立为：

```
(CF_CUSTOM2<MATCHES>fruit AND <ACCRUE>('orange','apple')) OR
(<ACCRUE>('basketball')) OR 
(CF_CUSTOM2<MATCHES>vegetables AND <ACCRUE>('celery')) 
```

我将搜索参数用引号括起来的原因是保留字。如果您搜索 Verity 使用的任何单词（例如“单词”），并且不将其括在引号中，则搜索会中断。

我希望这可以节省其他人一些时间。谢谢阅读。

# c# - 3 层应用程序和大型对象数组列表

> ID：10801230
> 
> 赞同：0
> 
> 时间：2012-05-29T14:31:38.103
> 
> 标签：c#, .net-4.0, arraylist, n-tier-architecture

我有一个通过循环从 URL 返回的 XML 文件创建的对象数组列表。由于它可能很大，具体取决于客户端请求的数据量，我想在 Gridview 或类似的东西中以 50 页左右的页面显示它。它有 15 个属性，即字符串、日期和整数，并且需要能够对它们中的任何一个进行排序。我不认为在客户端进行排序遵循 3 层模式。我也不认为我应该将数组列表保存在 state 中。我是 3 层应用程序的新手，所以我想了解如何保留原始列表以使我能够获取下一页数据，同时能够对任何列上的当前页面进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:07:50.987

好吧，有很多方法可以给猫剥皮，我的可能不是最好的，但是，如果是我，我可能会创建一个带有两个整数参数的服务，PageIndex 和 PageSize，这样客户端就可以只请求它需要什么。毕竟，所需的信息可能在前 10 个结果之内，那为什么要下载 10000 个呢？

您不会说 XML 是来自外部 URL 还是可从您的站点获得。如果是外部的，客户端第一次从服务请求数据时，我会加载 XML 并存储到磁盘。然后，服务器可以将其加载为 XDocument 并使用 Linq 查询所需的数据。

像（完全未经测试）：

```
 public ArrayList GetObjects(int pageIndex, int pageSize)
    {
        XDocument xmlDoc = XDocument.Load("resource.xml");
        var objects = (from o in xmlDoc.Descendants() 
                       select o).Skip(pageIndex).Take(pageSize);

        // parse elements into objects and add to collection before returning
    } 
```

我原以为这就足够了——如果在每个请求重新加载文件时证明存在任何严重的性能问题，那么我会在何时重新审视缓存的想法。也许我会研究.NET 4 中现在支持的[内存映射文件，或者更基本的缓存机制。](http://blogs.msdn.com/b/salvapatuel/archive/2009/06/08/working-with-memory-mapped-files-in-net-4.aspx)不幸的是，我真的不能再谈论这些了，因为我远不是这方面的专家。

此外，如果我使用的是 .NET 4，我会返回一个强类型的泛型集合，而不是一个 ArrayList。

# java - 为 SOAP java webservices 中的字段定义期望值

> ID：10801231
> 
> 赞同：0
> 
> 时间：2012-05-29T14:31:40.007
> 
> 标签：java, web-services

我使用 Java、Spring、CXF 创建了一个 Web 服务。Web 服务返回已使用 XmlRootElement(name = "LeaveRecord") 注释的 POJO。这个 POJO 有字段，getter 用 @XmlAttribute 注释。有没有办法定义（通过我期望的注释？）该字段可以预期哪些值（例如，状态字段可能返回 APPROVED、PENDING 或 DECLINED），我希望这些预期值会在 WSDL被创建以便想要使用这个 web 服务的客户可以事先知道期望什么值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:34:32.663

我认为您应该考虑将这些预期值编码为枚举。这样您就可以完全控制这些字段的值：

```
public Enum ExpectedValues {
    APPROVED,
    PENDING,
    DECLINED
} 
```

# c# - 从关联的设置类自动创建派生类？

> ID：10801235
> 
> 赞同：1
> 
> 时间：2012-05-29T14:32:07.213
> 
> 标签：c#, xml, instance, derived-class

我正在尝试根据派生设置类自动实例化正确的派生类。

在这里，我有一个主基类和一个基本设置类

```
public abstract class BaseClass
{
    public BaseClass() { }

    public abstract BaseClassSettings Write();
}

public class BaseClassSettings
{

} 
```

现在这是我的派生类及其设置类

```
public class DerivedFoo : BaseClass
{
    public DerivedFoo(DerivedFooSettings settings) 
    { 
         // Apply settings
    }

    public override BaseClassSettings Write()
    {
        DerivedFooSettings settings = new DerivedFooSettings();

        return settings;
    }
}

public class DerivedFooSettings : BaseClassSettings
{

}

public class DerivedBar : BaseClass
{
    public DerivedBar(DerivedBarSettings settings) 
    { 
         // Apply settings
    }

    public override BaseClassSettings Write()
    {
        DerivedBarSettings settings = new DerivedBarSettings();

        return settings;
    }
}

public class DerivedBarSettings : BaseClassSettings
{

} 
```

我可以将所有派生类设置保存在一个数组中

```
DerivedFoo foo = new DerivedFoo();
DerivedBar bar = new DerivedBar();

BaseClassSettings[] s = new BaseClassSettings[2];
s[0] = foo.Write();
s[1] = bar.Write(); 
```

它以 XML 格式序列化到光盘。

如何根据派生设置类自动实例化派生类？

因此，如果数组元素是 DerivedBarSettings 类，则创建 DerivedBar 类的新实例。

我想在不使用越来越多的 else if 语句的情况下做到这一点，具体取决于类的数量。

```
if (BaseClassSettings is DerivedFooSettings)
    new DerivedFoo(settings)
else if (BaseClassSettings is DerivedBarSettings) 
    new DerivedBar(settings) 
```

如何才能做到这一点？

==================================================== ==============================

[编辑]

这是我正在使用的：

```
[
    XmlInclude(typeof(DerivedSettingsClassA)),
    XmlInclude(typeof(DerivedSettingsClassB)),
    XmlInclude(typeof(DerivedSettingsClassC)),
    XmlInclude(typeof(DerivedSettingsClassD)),
    XmlInclude(typeof(DerivedSettingsClassE)),
]
public abstract class BaseSettingsClass
{
    public abstract DerivedClass Load(Game1 game, OutputDimensionSettings settings);
} 
```

唯一的缺点是我必须为所有派生类明确定义 XmlInclude。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:00:01.593

这是作业吗？

这是一种方法（还有其他可能性）：

```
public abstract class BaseClass
{ 
  public abstract BaseClassSettings Write(); 
} 

public abstract class BaseClassSettings
{
  public abstract BaseClass CreateCorrespondingInstance();
} 
```

然后：

```
public class DerivedFoo : BaseClass             
{             
  public DerivedFoo(DerivedFooSettings settings)              
  {              
    // Apply settings             
  }             

  public override BaseClassSettings Write()             
  {             
    DerivedFooSettings settings = new DerivedFooSettings();             
    return settings;             
  }             
}             

public class DerivedFooSettings : BaseClassSettings             
{             
  public override BaseClass CreateCorrespondingInstance()
  {
    return new DerivedFoo(this);
  }
} 
```

但看起来你可以从泛型中受益！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:01:01.907

我不确定泛型在这里会有多大帮助。泛型用于延迟或约束一个直到编译时才知道的类型。您正在做的是在不相关的类型之间创建关系。这可以通过自定义属性和一些反射来完成。

首先是我们的自定义属性：

```
 [System.AttributeUsage(System.AttributeTargets.Class)]
    public class BaseClassLinkAttribute : System.Attribute
    {
        public System.Type LinkedType { get; set; }

        public BaseClassLinkAttribute(Type linkedType)
        {
            // Probably wat to make sure type is derrived from BaseClass
            LinkedType = linkedType;
        }
    } 
```

现在我们向我们的基类添加一个静态方法，该方法在自定义属性中创建该类型的实例：

```
public abstract class BaseClass 
{ 
    public BaseClass() 
    { 
    } 

    public abstract BaseClassSettings Write();

    public static BaseClass CreateFromSettings(BaseClassSettings settings)
    {
        Attribute attr = Attribute.GetCustomAttribute(settings.GetType(), typeof(BaseClassLinkAttribute));

        // Check for null here and throw exception if attribute can't be found in prduction code

        BaseClassLinkAttribute linkAttribute = (BaseClassLinkAttribute)attr;

        // This is only going to work if class implements a constructor
        // that take a base settings class

        return (BaseClass)Activator.CreateInstance(linkAttribute.LinkedType,settings);
    }
} 
```

现在我们要做的就是用我们希望它创建的类的属性标记设置类。

```
[BaseClassLink(typeof(DerivedFoo))]
public class DerivedFooSettings : BaseClassSettings
{
} 
```

所以给定一个设置类，我们现在可以创建关联类：

```
 DerivedFooSettings x = new DerivedFooSettings();

       BaseClass y = BaseClass.CreateFromSettings(x);

       Console.WriteLine(y.GetType().FullName); 
```

这将为您提供 Namespace.DerivedFoo 的输出。

当然这里有一些限制，派生类必须实现一个接受设置类的构造函数，否则激活将失败。我认为我们的一些工作可能会让您摆脱属性并使用泛型传递类型。但是，您仍然必须在类型之间创建链接。

# c# - 在 .NET 应用程序中收集系统状态快照（内存百分比、HD 空间等）的最不痛苦的方法？

> ID：10801236
> 
> 赞同：0
> 
> 时间：2012-05-29T14:32:09.970
> 
> 标签：c#, .net, resources, reporting

我们有一个应用程序在运行数小时后“在野外”报告减速、锁定和其他不良行为。当然，这在开发和暂存环境中没有发生。

寻找一种从应用程序中收集尽可能多的系统信息的方法（每 10-15 分钟左右），然后通过我们已经设置的 Web 服务进行报告。这将排除或排除与系统生命体征相关的资源问题。

认为这个轮子可能已经被发明了......是否有一个通常用于技术支持环境的可重用库或类似的东西，可以节省我们查询单个 WMI 对象等的时间？欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:35:20.760

为什么它必须来自应用程序内部？

您可以使用 PerfMon 监视和记录各种性能计数器。

有关更深入的答案，请参阅[http://dotnetdebug.ne​​t](http://dotnetdebug.net/2005/06/30/perfmon-your-debugging-buddy/) /2005/06/30/perfmon-your-debugging-buddy/ 。

# jvm - Tomcat“ps old gen”内存上的奇怪现象

> ID：10801240
> 
> 赞同：0
> 
> 时间：2012-05-29T14:32:29.823
> 
> 标签：jvm, tomcat7, heap-memory

它发生了一些奇怪的事情。

我有一个服务器 ubuntu 8.04 LTS Jvm 1.6.0.24

在测试模式下一切正常。

当我将服务器释放给用户时（我使用 mod_jk 重定向来自 apache 的输入），它运行良好一段时间，然后在几秒钟内 PS OLD GEN 内存（1.3 GB）填满并使 tomcat 无响应。

我检查了应用程序中的内存泄漏和线程泄漏，但一切似乎都正常。

有人经历过类似的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:46:21.217

Tomcat [MemoryLeakProtection](http://wiki.apache.org/tomcat/MemoryLeakProtection)不会检测到所有可能的内存泄漏。

我建议您在出现问题时主动检查内存泄漏并获取 JVM 堆转储并进行分析。

SO中有大量信息可以帮助您完成任务

*   [如何查找 Java 内存泄漏](https://stackoverflow.com/questions/40119/how-to-find-a-java-memory-leak)
*   [https://stackoverflow.com/questions/1716597/java-memory-leak-detection-tools](https://stackoverflow.com/questions/1716597/java-memory-leak-detection-tools)
*   [如何使用 visualvm 查找内存泄漏](https://stackoverflow.com/questions/9154785/how-to-find-memory-leaks-using-visualvm)

# c# - 基于 TCP 的基本 WCF 托管

> ID：10801243
> 
> 赞同：1
> 
> 时间：2012-05-29T14:32:39.050
> 
> 标签：c#, wcf

我正在尝试通过 tcp 在 Windows 服务中托管 wcf 服务。一切都很好，直到安装服务并启动它。但是，当我添加客户端应用程序并尝试为其添加服务引用时，我收到了此错误。

```
System.ServiceModel.AddressAlreadyInUseException:
There is already a listener on IP endpoint 0.0.0.0:8523\. 
Make sure that you are not trying to use this endpoint multiple times 
in your application and that there are no other applications listening 
on this endpoint. ---> 

System.Net.Sockets.SocketException: Only one usage of each socket address 
(protocol/network address/port) is normally permitted
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, 
      SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at System.ServiceModel.Channels.SocketConnectionListener.Listen()
   --- End of inner exception stack trace ---
   at System.ServiceModel.Channels.SocketConnectionListener.Listen()
   at System.ServiceModel.Channels.ConnectionAcceptor.StartAccepting()
   at System.ServiceModel.Channels.ExclusiveTcpTransportManager.OnOpen()
   at System.ServiceModel.Channels.TransportManager.Open(
      TransportChannelListener channelListener)
   at System.ServiceModel.Channels.TransportManagerContainer.Open(
      SelectTransportManagersCallback selectTransportManagerCallback)
   at System.ServiceModel.Channels.TcpChannelListener`2.OnOpen(
      TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Dispatcher.ChannelDispatcher.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(
      TimeSpan timeout)
   at Microsoft.Tools.SvcHost.ServiceHostHelper.OpenService(ServiceInfo info)

System.Net.Sockets.SocketException (0x80004005): Only one usage of each socket 
address (protocol/network address/port) is normally permitted
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, 
      SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at System.ServiceModel.Channels.SocketConnectionListener.Listen() 
```

这是由于防火墙还是其他问题？这是一个非常基础的服务，终点如下：`net.tcp://localhost:8523/CalculatorService`.

这是配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="Service.CalculatorService">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
          contract="Service.ICalculatorService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="netTcpBinding" bindingConfiguration=""
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8523/CalculatorService" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

和服务代码：

```
 public partial class Service1 : ServiceBase
    {
        internal static ServiceHost myServiceHost = null;

        public Service1()
        {
            InitializeComponent();
        }
        protected override void OnStart(string[] args)
        {
            if (myServiceHost != null)
            {
                myServiceHost.Close();
            }
            myServiceHost = new ServiceHost(typeof(CalculatorService));
            myServiceHost.Open();
        }
        protected override void OnStop()
        {
            if (myServiceHost != null)
            {
                myServiceHost.Close();
                myServiceHost = null;
            }
        } 
```

我已经将配置文件从 WCF 服务库处理到 Windows 服务项目，它们是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:30:12.317

试试这个代码：

```
protected override void OnStart(string[] args)
{
    if (myServiceHost != null)
    {
        myServiceHost.Close();
    }
    Uri baseAddress = new Uri("http://localhost:8523/CalculatorService");
    myServiceHost = new ServiceHost(typeof(CalculatorService), baseAddress);
    myServiceHost.Open();
} 
```

和这个 Web.config

```
 <?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

# iphone - 为什么要打扰 Apples Reachability 类而不只是尝试建立实际连接？

> ID：10801245
> 
> 赞同：4
> 
> 时间：2012-05-29T14:32:46.360
> 
> 标签：iphone, ios, reachability

Apple 提供了一个名为 Reachability 的类。我几乎使用它，但后来发现很多人报告 SO 问题。例如，它会报告误报或多次显示相同的错误通知，使用户多次点击“无互联网”警报视图。

为什么我不能简单地尝试在后台获取数据并查看我得到了什么？

```
NSData *download = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlStr]]; 
```

我查了一下：当没有互联网时，`download`它将是零。然后我可以调出 UIAlertView 并抱怨。

还有一些用户说只检查“互联网连接”是愚蠢的，因为可达性只告诉是否连接到网关。网关可以没有互联网。我的 WiFi 路由器一直这样做。iPad 有 WiFi 接收但没有互联网。

其他人说最好测试一个特定的 URL 并查看服务器是否在那里。

那么，为什么还要打扰 Reachability 类呢？为什么不尝试实际下载，如果没有任何反应，假设有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:45:55.513

**如何确定当前活动的网络连接是 Wi-Fi 还是运营商的网络？**

`SCNetworkReachability`API 允许应用程序确定系统当前网络配置的状态和目标主机的可达性。API 返回的标志之一`kSCNetworkReachabilityFlagsIsWWAN`将告诉您与目标主机的网络连接是否使用运营商网络...

从网络和互联网编码指南

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:41:27.023

一个原因是您会在加载时检查可访问性，如果没有互联网，甚至不显示连接互联网的按钮。这将使您不必在知道它是否可用之前加载整个下载。

在很多情况下，你是对的。但有时您只想在实际下载任何内容之前进行检查。

此外，如果你在 Github 上环顾四周，有很多可达性类比 Apple 提供的类做得更好。

# c# - 在 Windows Mobile 6 下开发相对于 Windows CE 6 的优势？

> ID：10801255
> 
> 赞同：0
> 
> 时间：2012-05-29T14:33:18.783
> 
> 标签：c#, .net, windows-mobile, compact-framework, windows-ce

我手头有一个小型 .NET CF C# 项目，可以让我选择 - Windows CE 6 或 Windows Mobile 6.1

该应用程序适用于单个设备 (Symbol MC3xxx)，因此它不需要与具有不同功能的许多设备兼容。一切都很紧凑，只会使用设备中可用的功能。

**为这样的项目选择 Windows Mobile**有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:26:37.733

我知道这个问题的答案已经被接受，但要考虑的一件事是，我认为您会发现更多 Microsoft 提供的仅适用于 WindowsMo​​bile 的程序集（例如 GPS、PowerManagement 等）。有时不必重新发明轮子真是太好了。

深思熟虑...

# r - 在 MATLAB 中调用 R 失败

> ID：10801257
> 
> 赞同：2
> 
> 时间：2012-05-29T14:33:23.573
> 
> 标签：r, matlab

我按照这篇文章[http://neurochannels.blogspot.com/2010/05/how-to-run-r-code-in-matlab.html](http://neurochannels.blogspot.com/2010/05/how-to-run-r-code-in-matlab.html)安装 R(D)Com 服务器以便从 MATLAB 调用 R ，但我收到错误消息：

```
Error using openR (line 68)
Cannot connect to R.
Error using COM.StatConnectorSrv_StatConnector/Init
Error: Object returned error code: 0x80040013 
```

这是怎么回事？有没有其他方法可以在 MATLAB 中调用 R？有人告诉我

```
system 
```

可以用bee来调用其他的执行程序，但是怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:17:42.680

使用了 R(D)COM 和 Matlab R-link 一段时间后，不推荐了。COM 接口在解析很多命令时遇到了麻烦，并且很难调试代码。我建议使用 Matlab 中的系统命令，如[R Wiki](http://rwiki.sciviews.org/doku.php?id=tips:callingr:matlab)中所述。这也避免了必须安装 RAndFriends。

# python - 从 shell 脚本中读取 python 脚本中带空格的参数

> ID：10801258
> 
> 赞同：8
> 
> 时间：2012-05-29T14:33:27.240
> 
> 标签：python, shell

运行 python 脚本时如何读取带空格的参数？

**更新**：

看起来我的问题是我通过 shell 脚本调用 python 脚本：

这有效：

```
> python script.py firstParam file\ with\ spaces.txt
# or
> python script.py firstParam "file with spaces.txt"

# script.py
import sys
print sys.argv 
```

但是，不是当我通过脚本运行它时：

myscript.sh：

```
#!/bin/sh
python $@ 
```

打印：**['firstParam', 'file', 'with', 'spaces.txt']**

但我想要的是： **['firstParam', 'file with spaces.txt']**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T14:50:50.810

改用`"$@"`：

```
#!/bin/sh
python "$@" 
```

输出：

```
$ /tmp/test.sh /tmp/test.py firstParam "file with spaces.txt"
['/tmp/test.py', 'firstParam', 'file with spaces.txt'] 
```

`/tmp/test.py`定义为：

```
import sys
print sys.argv 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T14:50:51.693

如果你想将参数从一个 shell 脚本传递给另一个程序，你应该使用`"$@"`而不是`$@`. 这将确保每个参数都被扩展为一个单词，即使它包含空格。`$@`等价于`$1 $2 ...`，而`"$@"`等价于`"$1" "$2" ...`。

例如，如果您运行`./myscript param1 "param with spaces"`：

*   `$@`将扩展为`param1 param with spaces`- 四个参数。
*   `"$@"`将扩展为`"param1" "param with spaces"`- 两个参数。

# sql - 如何自动将数据发送到excel

> ID：10801259
> 
> 赞同：1
> 
> 时间：2012-05-29T14:33:35.067
> 
> 标签：sql, sql-server, excel

我一直在研究如何让 sql server 在特定时间自动创建发票或报告，类似于预定的工作。我希望能够使用具有发票模板的 excel 工作表并更新我的 sql 服务器并使用给定的数据（客户名称、帐户 ID、销售税等）更新字段。我遇到了做报告的SSRS，但我不知道它是否会为我做数据处理。我需要的处理类型很简单，使用的加仑 * 价格/加仑 * 销售税。我对sql server的经验很少，据我所知，sql中的这些算法不太方便，所以我宁愿让excel帮我做。再说一遍，有没有办法让 sql 运行自动查询来更新 Excel 电子表格？我已通过 csv 文件将数据导入到 excel 中，反之亦然，但在这种情况下让我感到困惑的是，我的 excel 电子表格本身就是一个带有公司徽标的发票模板，所以我不能只将数据导入模板。有没有人有什么建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:47:29.450

我认为您应该使用 SSRS 报告。SSRS 中的报表服务器可以处理报表的处理以及文件的计划和交付。U 可以获取大多数格式的报告（Excel、Word、pdf 等）。您可以通过以下链接了解如何安排和交付您的报告 [http://msdn.microsoft.com/en-us/library/ms156297(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms156297(v=sql.105).aspx)

关于 gallons=*price/gallon*sales 等逻辑。这些逻辑可以使用表达式轻松应用于 ssrs 报告中的列，例如

对于使用的列加仑，表达式将是

```
=(Fields!price.Value/Fields!gallons.Value)*Fields!Sales.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:52:22.557

你可以使用这个应用层：

```
数据库管理系统
           |
           五
     提供数据给
           |
           五
    你的申请
           |
           五
       会使用
           |
           五
[OPEN XML SDK 2.0 For excel] - http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/06/02/4730.aspx
           |
           五
  生成 Excel 文件
包含提供的数据
     由您的 DBMS 到
    你的申请

```

[1]：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T16:13:01.253

最简单的方法是在 SSRS 报告中重新创建模板（例如，在报告中嵌入公司徽标），为报告创建订阅，并将 Excel 指定为订阅的输出格式。

您描述的计算非常简单。如果您的结果集很小，将计算嵌入到报告中可能会证明不那么具有挑战性。但是，如果您正在处理大型数据集，最好将计算包含在数据库服务器上执行的查询中。如果您能从一开始就弄清楚如何为报表编写查询，那么进行简单的计算就不难了。

# entity-framework-4 - 为什么实体框架的 EF 迁移添加迁移步骤需要数据库连接字符串？

> ID：10801260
> 
> 赞同：26
> 
> 时间：2012-05-29T14:33:38.920
> 
> 标签：entity-framework-4, entity-framework-4.3, entity-framework-migrations

我正在尝试使用和理解 EF 迁移（使用 EF 4.3.1，代码优先）。为了构建新的更改，我必须使用如下命令：

```
Add-Migration MyMigration
   -ConnectionString "Data Source=.;Initial Catalog=mydb;" 
   -ConnectionProviderName "System.Data.SqlClient"
   -StartUpProjectName MyWebsite 
   -ProjectName MyEF.Migrations 
```

为什么添加迁移需要连接字符串数据？ `Update-Database`需要一个，这是有道理的。但是 Add-Migration 不是从 DbContext 和配置中获得了它需要的一切吗？

给它一个数据库，这不仅仅是空想，它非常令人困惑，因为我们有一个“多租户”的东西，其中所需的数据库是灵活的，并且可能会因请求而异，更不用说在静态编译时。因此，如果`Add-Migration`实际上将该数据库用于任何事情，我们就会遇到问题。

更新：我们放弃了 EF 迁移并改用[Fluent Migrator](https://github.com/schambers/fluentmigrator/)，并且很高兴。它要快得多，甚至算上我们必须写两次（一次用于 EF 对象，一次用于迁移）的事实，并且它没有这个问题中讨论的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T19:35:15.630

`Add-Migration`检查数据库的存在并与`__MigrationHistory`表交互。正如@Anders Abel 提到的，它用于调查待处理的迁移，也用于选择以前的模型以实际发现发生了什么变化 - 如果您将显式迁移添加到启用自动迁移的解决方案中，这一点尤其重要。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-29T19:32:46.777

我在阅读您的问题时很好奇，所以我启动了一个 Sql Server Profiler 来查看运行 add-migration 时发生了什么。它确实连接到数据库并访问数据库以检查`__MigrationHistory`表。

尝试创建第二个基于代码的迁移而不运行第一个迁移时产生的错误消息也显示了这一点：

> 无法生成显式迁移，因为以下显式迁移处于挂起状态：[201205291928386_foo]。在尝试生成新的显式迁移之前应用挂起的显式迁移。

我认为迁移引擎使用数据库中的序列化模型来计算新迁移中应包含哪些迁移步骤。

据我了解，数据库仅用作代码生成的助手。只要您使用的所有各种数据库都与代码中的模型兼容，这对您来说应该不是问题。

### 编辑

正如@Ladislav Mrnka 指出的那样，如果混合使用基于代码的迁移和自动迁移，则需要检查数据库。当你搭建一个新的迁移时，它应该包括自上次迁移以来你的模型中发生的任何变化。如果您使用的是自动迁移，则不会在代码中跟踪这些迁移。在计算要包含在迁移中的更改时，使用上次运行的迁移作为基础。检查的唯一方法是数据库 - 因为可能会打开自动迁移。

如果您只使用基于代码的迁移（我认为这是保持控制的唯一选择），那么该数据库可以被视为只是一个代码生成帮助。只要确保您连接到的所有数据库中的模型兼容性，一切都应该正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T13:24:41.223

我从 2014 年 3 月开始观看 Rowan Miller 的这段视频：[Migrations - Under the Hood](https://channel9.msdn.com/Blogs/EF/Migrations-Under-the-Hood)

在视频中，Rowan 解释了该`Add-Migration`命令执行多个步骤，其中包括一个名为`EdmModelDiffer`. 将`EdmModelDiffer`当前模型与上次迁移的先前模型（嵌入在先前迁移的 resx 文件中）进行比较，然后计算数据库所需的更改。

所以`EdmModelDiffer`组件需要数据库连接。

视频中描述的步骤是：

1.  从代码构建当前模型
2.  从上次迁移中获取以前的模型（作为快照存储在 resx 文件中）
3.  计算所需的数据库更改（由 完成`EdmModelDiffer`）
4.  生成了新的迁移文件

从理论上讲，可以假设将当前模型与上次迁移的模型进行比较就足以生成新的迁移。但与此同时，其他人也可以在数据库中执行更改。这可能就是为什么还要检查数据库的原因。如果不这样做，生成的迁移文件就不需要是正确的。

还可以看一下名为[Migrations - Team Environments的第二个视频](https://channel9.msdn.com/Blogs/EF/Migrations-Team-Environments?ocid=relatedentry)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T21:34:41.143

OP写道：

> 但是 Add-Migration 不是从 DbContext 和配置中获得了它需要的一切吗？

不 - 正如其他人在这里提到的那样，手动迁移代码的设计器部分（由 创建的`add-migration`）包含数据库模式的快照。

也就是说，您使用连接字符串等的事实非常奇怪。EF 通常从您的 DbContext 类和 Web.Config 中暗示它。在我有一个数据库和一个 DbContext 的项目中，我创建了一个配置类并添加了一个手动迁移：

```
add-migration 
```

我不必传递任何其他命令行参数。那是在 EF 4.3.1 中 - 也许您使用的是 CTP 或某些旧版本，或者只是误解了文档？

如果我有多个 DB 或 DbContexts，那么我有多个配置类并使用例如：

```
add-migration -conf Log 
```

它使用我的配置类和 Web.config 中的相关连接字符串来为该数据库/DbContext 添加手动迁移。

这是一个用于存储日志的简单 DbContext 的较长代码示例（与主数据库分开）：

```
namespace MyProj.Models.Log
{
    public class LogDb : DbContext
    {
        public DbSet<LogLine> LogLines { get; set; }
        public DbSet<LogTag> LogTags { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    }

    public LogDb()
#if DEPLOYDB
         : base("LogDeploy")
#else
         : base()
#endif
     {
     }
}

namespace MyProj.Migrations
{
    internal sealed class Log : DbMigrationsConfiguration<LogDb>
    {
        public Log()
        {
            AutomaticMigrationsEnabled = true;
        }
    }
} 
```

在 Web.Config 中：

```
<add name="LogDb" connectionString="Initial Catalog=Log;Data Source=.\SqlExpress;Integrated Security=SSPI;MultipleActiveResultSets=true" providerName="System.Data.SqlClient" />
<add name="LogDeploy" connectionString="Initial Catalog=Log;Data Source=00.00.000.00,12345;User ID=sql;Password=xxx;Network Library=DBMSSOCN" providerName="System.Data.SqlClient" /> 
```

所以在这个例子中，我有多个数据库，多个 DbContext。LogDb 根据是否在编译时定义了“DBDEPLOY”，在 Web.Config 中使用不同的连接字符串；如果是，它使用“LogDeploy”。如果不是，它使用默认值 - 与类同名的连接字符串“LogDb”。这允许我通过切换我的项目配置、在 SQL 数据库机器上打开一个端口并运行，轻松地将数据库更改从我的本地机器部署到服务器：

```
> update-database -conf Log 
```

在包管理器控制台中。

# asp.net - 在 ASP.NET 中自动生成控件 ID

> ID：10801264
> 
> 赞同：1
> 
> 时间：2012-05-29T14:33:49.963
> 
> 标签：asp.net

我注意到如果我将 TextBox 添加到页面，但没有为其分配 ID 属性，则此属性会根据该呈现页面的控制层次结构自动生成。

我正在创建一个要在一个页面上多次使用的自定义控件（所以硬编码一个 ID 是行不通的）。

ASP.NET 是否有一种方法可以用来为这些控件中的每一个生成一个“唯一”ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:41:08.370

您已经回答了自己的问题 - 不要指定一个，它将为您生成。

有趣的可能是[Scott Guthrie 博客上的这篇文章](http://weblogs.asp.net/scottgu/archive/2010/03/30/cleaner-html-markup-with-asp-net-4-web-forms-client-ids-vs-2010-and-net-4-0-series.aspx)`ClientIdMode`，它描述了ASP.NET 4 中可用的“新” ：

> *   **AutoID** — 像在 .NET 3.5 中一样呈现输出（自动生成的 ID，仍会呈现 ctrl00 等前缀以实现兼容性）
> *   **可预测（默认）** - 修剪任何“ctl00” ID 字符串，如果列表/容器控件连接子 ID（例如：id=”ParentControl_ChildControl”）
> *   **静态**——将完整的 ID 命名控制权交给开发人员——无论他们设置为控件的 ID 是什么，都会呈现（例如：id=”JustMyId”）
> *   **继承**——告诉控件遵循父容器控件的命名行为模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:46:13.560

如果您愿意，您可以覆盖`ClientID`或。`UniqueID`但使用`ClientIDMode`更好。

```
public override string UniqueID
{
    get
    {
        return "newid";
    }
}

public override string ClientID
{
    get

    {
        return "newid";
    }
} 
```

# python - random.randrange 中的 ValueError

> ID：10801265
> 
> 赞同：1
> 
> 时间：2012-05-29T14:33:53.007
> 
> 标签：python, random

```
def wordjumble(Wordlist, Hintlist, score):
    wordchoice = getword(Wordlist, Hintlist)
    high = len(wordchoice)
    low = -len(wordchoice)
    for i in range(10):
        position = random.randrange(high,low)
        print wordchoice[position]
    score = wordguess(wordchoice, score)
    return score 
```

我收到一个值错误，我的任务是获取高低之间的随机数。我的错误在哪里？

这是回溯：

```
Traceback (most recent call last): 
File "E:\Programming\Python\Worksheet 15\test.py", line 54, in
wordjumble(Wordlist, Hintlist, score) 
File "E:\Programming\Python\Worksheet 15\test.py", line 49, in wordjumble
position = random.randrange(high,low) 
File "E:\Portable Python 2.7.2.1\App\lib\random.py", line 217, in
randrange raise ValueError, "empty range for randrange() (%d,%d, %d)"
% (istart, istop, width) ValueError: empty range for randrange() (7,-7, -14) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:40:54.287

换行

```
 position = random.randrange(high,low) 
```

到

```
 position = random.randrange(low,high) 
```

ETA：此代码还有其他问题。如果`wordchoice`是一个单词（如`getword`函数所暗示的那样），那么您的循环正在做的是在`-len(wordchoice)`和之间选择一个随机数`len(wordchoice)-1`。如果您试图从单词中获取一个随机字母，那么在`0`and之间做一个随机数会更简单`len(wordchoice)-1`，甚至更简单`random.choice(wordchoice)`。

看起来循环正在从单词中挑选 10 个随机字母并打印它们（每个字母在单独的行上）。这意味着使用这个词`the`最终会出现“混乱”，例如：

```
h
t
t
e
h 
e
t
e
t
e 
```

这总是有 10 个字母，并且不保证它使用单词的每个字母一次（这可能是你的混乱所必需的）。如果您不想选择 10 个替换字母，而是希望它通过更改字母的顺序来混淆单词（正如函数标题所暗示的那样`wordjumble`），请查看[这个问题](https://stackoverflow.com/questions/2668312/shuffle-string-in-python)以获得一个好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:40:48.137

你得到一个错误，因为你在网上颠倒了论点：

```
 position = random.randrange(high,low) 
```

它应该是：

```
 position = random.randrange(low,high) 
```

建议：大多数 python 参考文档都显示了代码示例。首先检查它们，因为它们可能会立即帮助您：
[http ://docs.python.org/library/random.html](http://docs.python.org/library/random.html)

亲切的问候，
博

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:37:34.217

```
 random.randrange([start], stop[, step])
   Return a randomly selected element from range(start, stop, step). This is equivalent to          choice(range(start, stop, step)), but doesn’t actually build a range object. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:38:42.233

一般来说，范围是用`low`to给出的`high`，你想检查[randrange 文档](http://docs.python.org/library/random.html?highlight=randrange#random.randrange)。

[您可以在 Python Number randrange() 函数](http://www.tutorialspoint.com/python/number_randrange.htm)中找到*简单的*使用示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T14:47:31.560

替换`high,low`为`low,high`：

```
def wordjumble(Wordlist, Hintlist, score):
    wordchoice = getword(Wordlist, Hintlist)
    high = len(wordchoice)
    low = -len(wordchoice)
    for i in range(10):
        position = random.randrange(low,high)
        print wordchoice[position]
    score = wordguess(wordchoice, score)
    return score 
```

# xml - 使用 xslt 将 xml 命名空间和属性复制到其他节点

> ID：10801278
> 
> 赞同：0
> 
> 时间：2012-05-29T14:34:39.253
> 
> 标签：xml, xslt, xslt-2.0

所以我是 xslt 的新手，使用了 2 周，现在遇到了将命名空间和属性从一个节点复制到另一个节点的问题。我需要将命名空间和属性复制到另一个节点，删除根节点并删除一些不在新节点中的节点。如果我认为应该更容易，第二部分删除节点可以在其他转换中完成。

这是输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" attribute1="some1">

<mode>
<node0>0</node0>

<node1 attribute2="some2"> 
    <child1 name="a" id="1"/>
    <child2 name="b" id="2"/>
</node1>

</mode>

<extra1 id="1"/>
<extra2 id="3"/>

<xmi:XMI> 
```

我需要的输出：

```
<?xml version="1.0" encoding="UTF-8"?>

<node1 xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" attribute1="some1" attribute2="some2" > 
    <child1 name="a" id="1"/>
    <child2 name="b" id="2"/>
</node1>
<extra1 id="1"/> 
```

可能以后需要保留 xmi:XMI 节点，只需删除除 node1 和 extra1 之外的其他节点，但认为此 xsl 与修改会有所帮助：

```
<xsl:stylesheet 
xmlns:xls="http://www.w3.org/1999/XSL/Transform" 
xmlns:xmi="http://www.omg.org/spec/XMI/20110701"
 version="2.0">
 <xsl:strip-space elements="*"/> 
<xsl:output indent="yes" method="xml"/>        
 <xsl:template match="@*|node()"> 
<xsl:copy> 
<xsl:apply-templates select="@*|node()"/> 
</xsl:copy> 
</xsl:template> 
<xsl:template match="node"> 
<xsl:apply-templates select="node()"/>
 </xsl:template>
</xsl:stylesheet> 
```

我现在不知道如何做到这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:40:34.070

这是一个示例 XSLT 2.0 样式表，主要工作不是复制名称空间（默认情况下会这样做），主要工作是从`extra1`（和潜在的后代）中剥离名称空间，我使用不同的模式来执行此操作：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701"
  exclude-result-prefixes="namespace1 xmi">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="/">
  <xsl:apply-templates select="xmi:XMI/mode/node1"/>
  <xsl:apply-templates select="xmi:XMI/extra1" mode="strip-namespaces"/>
</xsl:template>

<xsl:template match="node1">
  <xsl:copy>
    <xsl:apply-templates select="@*, /*/@*, node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="node()" mode="strip-namespaces">
  <xsl:element name="{local-name()}">
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates mode="strip-namespaces"/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

输入为

```
<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" attribute1="some1">

<mode>
<node0>0</node0>

<node1 attribute2="some2"> 
    <child1 name="a" id="1"/>
    <child2 name="b" id="2"/>
</node1>

</mode>

<extra1 id="1"/>
<extra2 id="3"/>

</xmi:XMI> 
```

Saxon 9.4 的输出是

```
<?xml version="1.0" encoding="UTF-8"?><node1 xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" attribute2="some2" attribute1="some1">
    <child1 name="a" id="1"/>
    <child2 name="b" id="2"/>
</node1><extra1 id="1"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:14:36.990

该脚本有效，谢谢。但是今天我的任务发生了一些变化:(对不起，第一个问题不是最终要求:(

现在我需要做类似的事情：

1) 节点可以带有命名空间，我现在不知道节点的确切位置，可以是 namespace1:mode/node0/namespace1:parm，但可以是 namespace1:mode/node0/../namespace1:parm 或 namespace1:mode/node0/ ../element 或类似但需要按类型和名称查找节点，其中 namespace1:type="type1" 和 name="givenName"

2) 可以是不同的节点需要成为根节点，例如namespace1:parm 或element，但每次都必须有标签namespace1:parm。首先，如果有使用的节点，我不需要删除 xmi 节点，也不需要合并属性。

3）命名空间每次都可能不同，现在不知道如何使这项工作。需要删除未使用的标签。

4) 可能需要再进行一次转换，但是当 xmi:XMI 标签中只有 xmi:XMI 和 namespace1:parm 格式的标签且没有 extar 标签时，需要将 xmi:XMI 与 namespace1:parm 合并并保留所有属性和命名空间。

输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" attribute1="some1" xmlns:M="mOptions" xmlns:N="nOptions">

 <namespace1:mode name="Main">
 <node0>0</node0>

<namespace1:parm name="node1" attribute2="some2" namespace1:type="type1"> 
    <child1 name="a" id="1"/>
    <child2 name="b" id="2"/>
</namespace1:parm>

<element name="node2" attribute2="some3" namespace1:type="type2"> 
    <child6 name="a6" id="6"/>
    <child7 name="b7" id="7"/>
</element>

<node id="55"/>

</namespace1:mode>

<M:extra1 id="1"/>
<M:extra2 id="2"/>
<M:extra6 id="6"/>
<M:extra7 id="7"/>

</xmi:XMI> 
```

我需要与上次类似的第一个可能性，需要找到带有名称空间的所有内容。尝试修改xsl，没有成功。需要的输出：当 namespace1:type="type1"

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<namespace1:parm name="node1" attribute2="some2" namespace1:type="type1"> 
        <child1 name="a" id="1"/>
        <child2 name="b" id="2"/>
</namespace1:parm>

<M:extra1 id="1"/>
<M:extra2 id="2"/> 
```

当 namespace1:type="type2"

```
<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" attribute1="some1" xmlns:M="mOptions" xmlns:N="nOptions">

<namespace1:parm name="node2" attribute2="some3" namespace1:type="type2"> 
        <child6 name="a6" id="6"/>
    <child7 name="b7" id="7"/>
</namespace1:parm>

<M:extra6 id="6"/>
<M:extra7 id="7"/>
</xmi:XMI> 
```

而如果：

```
<namespace1:parm name="node2" attribute2="some3" namespace1:type="type2"> 
        <child6 name="a6" id="6"/>
    <child7 name="b7" id="7"/>
</namespace1:parm>
</xmi:XMI> 
```

然后需要

```
<?xml version="1.0" encoding="UTF-8"?>  
<namespace1:parm name="node2" attribute2="some3" namespace1:type="type2"xmlns:namespace1="http://namespace" xmlns:xmi="http://www.omg.org/spec/XMI/20110701" attribute1="some1" xmlns:M="mOptions" xmlns:N="nOptions"> 
        <child6 name="a6" id="6"/>
    <child7 name="b7" id="7"/>
</namespace1:parm> 
```

试过：

```
 <xsl:template match="*">
    <xsl:copy>
        <xsl:for-each select="@*">
            <xsl:attribute name="{name(.)}">
                <xsl:value-of select="."/>
            </xsl:attribute>
        </xsl:for-each>
        <xsl:apply-templates select="xmi:XMI|*[@namespace1:type='type1']"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="xmi:XMI|*[@namespace1:type='type1']">
    <xsl:copy>
        <xsl:for-each select="@*">
            <xsl:attribute name="{name(.)}">
                <xsl:value-of select="."/>
            </xsl:attribute>
        </xsl:for-each>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

但是得到：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <xmi:XMI xmlns:namespace1="http://namespace"
             xmlns:xmi="http://www.omg.org/spec/XMI/20110701"
             xmlns:M="mOptions"
           xmlns:N="nOptions"
           attribute1="some1">some1<namespace1:mode name="Main">
        <namespace1:parm name="node1" attribute2="some2"           namespace1:type="type1">node1some2type1<child1 name="a" id="1"/>
           <child2 name="b" id="2"/>
        </namespace1:parm>
     </namespace1:mode>
     <M:extra1 id="1"/>
       <M:extra2 id="3"/>
     <M:extra6 id="6"/>
     <M:extra7 id="7"/>
     </xmi:XMI> 
```

# java - 获取Java中两个URI的相对路径

> ID：10801283
> 
> 赞同：5
> 
> 时间：2012-05-29T14:34:56.260
> 
> 标签：java, uri

我有这两个 URI：

`http://www.google.de/blank.gif`

`http://www.google.de/sub/`

`http://www.google.de/sub/`我想要结果的相对路径`http://www.google.de/blank.gif so`是`../blank.gif`

`URI.relativize()`在这里不起作用：/

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:28:33.837

Apache URIUtils 应该可以工作。如果您不想引入外部库，这里有一个简单的方法实现，该方法应该正确解析`java.net.URI`无法处理的情况下的相对 URI（即，基本 URI 路径不是子 URI 路径的前缀）。

```
public static URI relativize(URI base, URI child) {
  // Normalize paths to remove . and .. segments
  base = base.normalize();
  child = child.normalize();

  // Split paths into segments
  String[] bParts = base.getPath().split("\\/");
  String[] cParts = child.getPath().split("\\/");

  // Discard trailing segment of base path
  if (bParts.length > 0 && !base.getPath().endsWith("/")) {
    bParts = Arrays.copyOf(bParts, bParts.length - 1);
  }

  // Remove common prefix segments
  int i = 0;
  while (i < bParts.length && i < cParts.length && bParts[i].equals(cParts[i])) {
    i++;
  }

  // Construct the relative path
  StringBuilder sb = new StringBuilder();
  for (int j = 0; j < (bParts.length - i); j++) {
    sb.append("../");
  }
  for (int j = i; j < cParts.length; j++) {
    if (j != i) {
      sb.append("/");
    }
    sb.append(cParts[j]);
  }

  return URI.create(sb.toString());
} 
```

请注意，这并不强制 base 和 child 具有相同的方案和权限——如果您希望它处理一般情况，则必须添加它。这可能不适用于所有边界情况，但它适用于您的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T14:59:27.200

我认为您可以使用 Apache URIUtils

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URIUtils.html#resolve%28java.net.URI,%20java.net.URI%29](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URIUtils.html#resolve%28java.net.URI,%20java.net.URI%29)

解决

公共静态 URI 解析（URI baseURI，URI 引用）

```
Resolves a URI reference against a base URI. Work-around for bugs in java.net.URI (e.g. )

Parameters:
    baseURI - the base URI
    reference - the URI reference 
Returns:
    the resulting URI 
```

例子：

[http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/httpclient/src/test/java/org/apache/http/client/utils/TestURIUtils.java](http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/httpclient/src/test/java/org/apache/http/client/utils/TestURIUtils.java)

# php - Twitter 按钮未在 IE9 中显示

> ID：10801284
> 
> 赞同：0
> 
> 时间：2012-05-29T14:34:56.357
> 
> 标签：php, javascript, twitter, xhtml

您好 Stackoverflow 社区，

我目前正面临一个尴尬的问题，即我试图整合到网页中的 twitter 关注按钮。在除 IE9 之外的所有浏览器中，我的 Twitter 按钮都会出现。在 IE9 中它有时会，有时不会。

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="<?php echo constant('TWEET_LINK');?>" data-text="<?php echo constant('TWEET_TEXT');?>" data-count="none" data-hashtags="<?php echo constant('TWEET_HASHTAG');?>">Tweet</a>           
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:40:35.210

在这个 javascipt 上使用 jslint 来确保它！无效。消除 ！从一开始就让它通过jslint。

我不想开始火焰战，但简单地使用分号对 IE 有很大帮助

```
function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs"); 
```

应该可以。

# jquery - jquery mobile：垂直居中两行按钮文本

> ID：10801285
> 
> 赞同：0
> 
> 时间：2012-05-29T14:34:58.010
> 
> 标签：jquery, css, jquery-ui, jquery-mobile, mobile-website

我有一个带有 2 行文本的 jQuery 移动按钮，具有以下 CSS 规则：

```
.ui-btn-text {
    word-wrap: break-word !important;
    white-space: normal !important;
} 
```

jQuery 与类建立了一个跨度：`ui-btn-inner ui-btn-corner-all`围绕文本。

我希望这个元素垂直居中。

我用`vertical-align`的时候没有效果。`line-height`也不起作用，因为我的文本可以有两行。

有谁知道我如何在按钮中垂直居中我的文本？

![编译代码的图像](../Images/50711fb6951493c27bbafed960374c19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:39:51.923

你应该使容器 div

```
position: relative; 
```

并给它一个高度。然后制作内部div

```
position: absolute; margin: 0px auto; 
```

使其在容器中垂直居中！

=============
原始答案：

```
text-align: center; 
```

应该做水平居中的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:39:53.080

试试上下`padding: 10px 0;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:32:38.923

内联元素（如`<SPAN>`）只能用于`line-height`伪造垂直对齐。因此，如果由于多行而在这种情况下对您不起作用，请切换到表格/单元格 ( `<TD>`)。但是，如果 jQuery mobile 正在生成内部跨度标签，那将不适合您。

您也可以垂直对齐包装器`<TD>`并使按钮具有较小的高度，因此文本本身不需要垂直居中。但这意味着视觉设计的变化。

HTML 规范不是为这种类型的布局设计的。因此，如果上述解决方案在您的情况下不起作用，您将放弃尝试动态垂直对齐内联元素中的文本，至少通过 HTML/CSS-only 解决方案。

非 CSS 解决方案包括预渲染图像、数据绑定后的 Javascript 调整、HTML5`<CANVAS>`或 SVG 图像以及其他高级解决方法，如果您想要的只是垂直对齐的文本，这些解决方法通常不值得麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T12:00:59.510

我通过将文本放在顶部边缘的 div 中解决了这个问题，当它有 2 行时，它现在没有完美居中，但应该没问题。谢谢你的建议

# security - 从黑莓复制安装的文件并重新安装

> ID：10801288
> 
> 赞同：0
> 
> 时间：2012-05-29T14:35:07.857
> 
> 标签：security, blackberry

我开发了一个黑莓应用程序，并将其安装在 bb 设备上。假设我丢失了手机，有人找到它并想​​要复制我的应用程序并将其安装在另一台设备上。有可能吗？您可以从设备中复制文件并将其重新安装到另一台设备上吗？还是只能通过bb桌面管理器和源代码安装应用程序？（不包括市场营销）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:29:37.210

是的。您可以通过让用户在启动时输入一些操作所需的值并将其存储在[PersistentStore](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/PersistentStore.html)中以及保护您的设备的密码来防止这种情况。如果有人找到该设备，他们可以通过输入错误的密码使其进行安全擦除。这将删除 PersistentStore 但不会删除软件。但是，如果他们尝试将您的程序复制到另一台设备，它将无法运行，因为他们无法复制数据。如果您真的很担心，那么您可以将数据基于加密过程。

如果您只在个人设备上运行程序，一种更简单的方法是检查[PIN](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/DeviceInfo.html#getDeviceId%28%29)并将其与应该运行它的设备的 PIN 值进行比较。这将阻止他们复制到新设备，但不会阻止他们在找到的设备上运行程序。

# java - Java 中的 Selenium Firefox Webdriver（运行参数）

> ID：10801290
> 
> 赞同：4
> 
> 时间：2012-05-29T14:35:13.607
> 
> 标签：java, firefox, unix, selenium, xvfb

我在 Java 中用 Selenium 2 开发了一个使用 Firefox 引擎的测试单元。

部署机器没有显示，所以我使用 Xvfb 来创建它。不幸的是，这迫使我使用`DISPLAY=:0 java -jar xxx.jar`. 我搜索了 selenium javadoc 并搜索了一些资源，但找不到 java 用来启动 Firefox 的方法，女巫是我的目标，让 java 使用相同的方法启动 firefox `DISPLAY=:0 firefox ...`。

长话短说：我必须这样做`DISPLAY=:0 java -jar xxx.jar`，但我想用 java`DISPLAY=:XX firefox ...`代替，`firefox ...`所以我也可以使用多个显示器。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:53:29.780

我们实际上在生产中使用 Xvfb 和 Selenium 以及十几个连续工作的 Firefox 实例。我们使用`xvfb-run java -jar xxx.jar`which select a free display 来运行该程序的所有 firefox 实例。如果您关心屏幕截图，您可以只使用一个显示器，而仍然有十几个 Firefox 同时为不同的网站截取屏幕截图

我们将它封装在一个 shell 脚本下，这是透明的。

如果你真的希望每个 selenium 服务器都有自己的显示，你可以在配置中指定的浏览器字符串中覆盖它。只需制作一个执行此操作的 shell 脚本`xvfb-run /usr/bin/firefox`并将此脚本传递给您的配置。这应该够了吧

好好测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:29:32.720

We have made an bash file which sets the display and then starts firefox. We have put it into the path under the name `firefox`, so selenium finds it using `which` to locate the firefox binary.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T11:18:30.493

编写一个“代理”程序，使用所需的参数执行 shell；然后将“webdriver.firefox.bin”属性指向您的代理程序。我不认为这可能是一个 java 程序，因为它是通过 java 命令执行的。它可能必须是本机代码，可能是 C 和类似“system ("DISPLAY=:XX firefox ...");”的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:42:14.507

您应该查看本手册，我前一段时间使用它来做同样的事情：

[http://www.alittlemadness.com/2008/03/05/running-selenium-headless/](http://www.alittlemadness.com/2008/03/05/running-selenium-headless/)

TLDR；

```
$ export DISPLAY=:0
$ firefox 
```

# regex - 字符串替换的 Perl 代码

> ID：10801294
> 
> 赞同：1
> 
> 时间：2012-05-29T14:35:25.043
> 
> 标签：regex, string, perl

我想用其他三个子字符串（作为参数传递给我的例程）替换字符串中的子字符串“[ids]”、“[order]”和“[limit]”。

但是如果“[”或“]”前面有“\”（“\[”，“\]”），我想取消“[...]”的特殊含义。“\”也应该自行取消：“\\”表示“\”。

如何在 Perl 中实现这一点？

请注意，我们可以使用其他东西来代替“[ids]”、“[order]”和“[limit]”。这不是一成不变的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:09:35.527

为什么不使用现有的模板[模块](http://search.cpan.org/perldoc?Template)而不是发明另一个？

无论如何，这是一个可以处理您的格式的解析器。

```
my %replace = (
   ids => ...,
   ...
);

my $out = '';
for ($in) {
   if (/\G    ( (?: [^\\\[\]]+ | \\. )+ )    /xsgc) {
       $out .= $1;
       redo;
   }

   if (/\G \[ ( (?: [^\\\[\]]+ | \\. )+ ) \] /xsgc) {
       die if !exists($replace{$1});
       $out .= $replace{$1};
       redo;
   }

   die if !/\G\Z/xsgc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:22:18.693

这是您可以做到的一种方法：

```
sub replace{
    my ($str, $ids, $order, $limit) = @_;
    $str =~ s/(?<!\\)((?:\\.)*) \[ (?: (ids) | (order) | limit ) \]/
              $1 . ($2? $ids: $3? $order: $limit)/gsex;
    return $str;
} 
```

例子：

```
print replace <<'_STR_', '<1DZ>', '<0RD3RZ>', '<L1M1TZ>';
[ids][order][limit]
\[ids]\\[ids]\\\[ids]
_STR_ 
```

输出：

```
<1DZ><0RD3RZ><L1M1TZ>
\[ids]\\<1DZ>\\\[ids] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:15:05.093

```
#!/usr/bin/perl

use strict;
use warnings;

sub replace_squared_terms {
  my ($str, $hash) = @_;
  my $new = "";
  for(;;) {
    return $new if $str eq "";
    if($str =~ /^([^\[\]\\\/]+)(.*)/s) {
      $new .= $1;
      $str = $2;
    } elsif($str =~ /^\[([^\/\[\]]+)\](.*)/s) {
      die "Wrong template" unless exists $hash->{$1};
      $new .= $hash->{$1};
      $str = $2;
    } elsif($str =~ /^\\(.)(.*)/s) {
      $new .= $1;
      $str = $2;
    } else {
      die "Wrong template";
    }
  }
}

my $str = "[a] [b] \\[ [a] \\\\";
print replace_squared_terms($str, {a=>"123", b=>"XYZ"}), "\n"; 
```

# objective-c - 如何通过单击而不是拖放在不同的 UIView 之间移动不同的 UIImage

> ID：10801295
> 
> 赞同：1
> 
> 时间：2012-05-29T14:35:31.250
> 
> 标签：objective-c, xcode, drag-and-drop, uiimageview, uiimage

我正在使用 Xcode 开发一个项目，我使用一堆包含 UIImage 的小 UIImageViews 设置了一个棋盘，并将它们放置在一个更大的 UIImageView 中，代表棋盘。

到目前为止，我设法正确使用 UITouches 在棋盘上自由拖放 UIImageViews（碎片）。但是，当我放下它们时，它们就会降落在我释放它们的任何地方，这自然是应该的，但这不是我想要的效果。

理想情况下，UIImageViews 不应该移动到任何地方，我只想将 UIImage 从当前选择的 UIImageView 转移到下一个 UIImageView。我相信不以这种方式进行拖放会简单得多，而是我使用点击（或点击）。我点击一个 UIImageView，然后点击下一个 UIImageView 将从前一个 UIImageView 中获取 UIImage。想一想如何在不拖放图像的情况下下棋。

那么有人对如何在这里进行有任何建议吗？提前致谢！

编辑：这里有一些代码来显示我现在在做什么：

```
//================================================================================
// I have two arrays containing UIImageViews each, one representing board cells,
// the other one the pieces. The below functions handle the touch and drag actions.
// What I need to do is change this somehow so that the UIImageViews representing
// the pieces do one of the following things:
// 1\. When the pieces are dragged, you can drop them and they center themselves
//    on top of the UIImage views that represent the cells of the board.
// 2\. I have an array of UIImageViews containing the cells, when I click on a
//    UIImageView that has the image of a piece, it is copied and pasted onto
//    the next UIImageView that I click, of course controls will be set to determine
//    a valid move I can handle doing this part.
//================================================================================

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    //get location of the current touch event
    UITouch *touch = [[event allTouches] anyObject];
    //get touch location for the touched image (self used instead of touch)
    CGPoint touchLocation = [touch locationInView:[self view]];   
    //select and give current location to the selected view
    for (UIImageView *piece in chessCells) {
        if([touch view] == piece){
            piece.center = touchLocation;
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    //allow the selected event (in our case a UIImageView) to be dragged
    [self touchesBegan:touches withEvent:event];
} 
```

最初我把这个问题留了下来，因为我知道我必须以某种方式改变我的实现，但我希望这段代码有助于理解我所面临的问题：Drag and Drop anywhere without任何限制，我只是不知道如何控制这从发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:39:23.570

当点击发生在 UIImageView 上时如何制作它的副本，并使用该副本进行拖动。发布完成后，使用复制的 UIImageView 中的 UIImage 来更改正在放置的 UIImageView，然后删除复制的 UIImageView？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:46:15.990

UIImage 只是数据——它不会在任何地方绘制自己。您需要一个 UIImageView（或其他一些视图或图层类）来在屏幕上绘制图像。因此，如果您只是将图像从一个图像视图移动到另一个图像视图，则图像将在一个位置消失并出现在另一个位置——当该块从一个正方形移动到另一个正方形时，不会有任何动画。

我建议使用 Core Animation 自己移动图像视图。这将提供一些反馈，以便用户更好地了解哪块移动到了哪里。这在象棋这样的游戏中尤其重要，其中的一部分挑战是注意哪些棋子能够移动到哪里。

将棋子正确放置在广场上的关键是将它们移动到所需的位置。例如，您可以通过将`center`相应图像视图的 更改从一个正方形的中心到另一个正方形的中心来移动一块。

# tridion - 如何使用 Anguilla JavaScript 设置 Tridion ApplicationData？

> ID：10801301
> 
> 赞同：5
> 
> 时间：2012-05-29T14:35:51.027
> 
> 标签：tridion

我有一个带有表单和文本字段的选项卡 GUI 扩展。我想将表单字段的值保存到 ApplicatioData。我在想一个调用 Anguilla 方法的“更新”按钮。

有安圭拉的方法吗？我在安圭拉没有看到任何方法。代码开始：

```
var c = $display.getItem();
var uri = c.getId(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T14:37:57.973

Anguilla 不公开任何（webservice 或 JavaScript）方法来一般地修改 ApplicationData。您必须提供自己的服务器端代码来设置 ApplicationData。

因此，在我最后一次需要时，我编写了一个简单的 WCF Web 服务来设置应用程序数据：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
[ServiceContract(Namespace= "ExtensionsModel.Services")]
public class ExtensionsService
{
    [OperationContract]
    [WebInvoke(Method = "POST",
                RequestFormat = WebMessageFormat.Json,
                ResponseFormat = WebMessageFormat.Json)]
    public void SetEnabled(string[] itemIDs, bool enabled)
    {
        using (var client = TridionCoreService.GetSessionAwareClient())
        {
            var appdata = new ApplicationData();
            appdata.ApplicationId = "ext:IsEnabled";
            appdata.Data = new ASCIIEncoding().GetBytes(enabled ? bool.TrueString : bool.FalseString);
            foreach (var itemID in itemIDs)
            {
                client.SaveApplicationData(itemID, new[] {appdata});
            }
        }
    }
} 
```

将其连接到我模型的配置文件中：

```
<?xml version="1.0" encoding="utf-8" ?>
<Configuration> <!-- namespaces removed for readability -->
  <resources cache="true">
    <cfg:filters/>
    <cfg:groups>
      <cfg:group name="Extensions.Models">
        <cfg:domainmodel name="Extensions.Models">
          <cfg:services>
            <cfg:service type="wcf">Services/ExtensionsService.svc</cfg:service>
          </cfg:services>
        </cfg:domainmodel>
      </cfg:group>
    </cfg:groups>
  ... 
```

然后从我的`command._execute`

```
Extensions.Commands.DisableExtension.prototype._execute = function (selection) {
  ExtensionsModel.Services.ExtensionsService.SetEnabled(selection.getItems(), false);
}; 
```

# mysql - 尝试使用 REPLACE 和 AUTO_INCREMENT 执行 LOAD DATA INFILE

> ID：10801302
> 
> 赞同：19
> 
> 时间：2012-05-29T14:35:53.193
> 
> 标签：mysql, replace, auto-increment, load-data-infile

我正在尝试将文件加载到 MySQL 数据库中，主键为 auto_incremented，如果我发现任何重复的行，我希望更新数据。但是，REPLACE 关键字仅适用于主键，它是自动生成的，所以我被卡住了。

如何能够拥有一个 ID 为 auto_increments 的表，同时能够使用 LOAD DATA INFILE 从文件中插入/更新数据？

这是桌子

```
CREATE TABLE  `oxygen_domain`.`TEST` (
`TEST_ID` int(11) NOT NULL AUTO_INCREMENT,
`NAME` varchar(255) NOT NULL,
`VALUE` varchar(255) DEFAULT NULL,
PRIMARY KEY (`TEST_ID`,`NAME`,`VALUE`)
) 
```

这是命令

```
LOAD DATA LOCAL INFILE 'C:/testData.txt'
REPLACE
INTO TABLE TEST
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(NAME, VALUE); 
```

这是样本数据

```
ignored name, ignored value
name1,value1
name2,value2
name3,value3 
```

使用上述数据多次运行上述命令后想要的结果是

```
|TEST_ID |NAME |VALUE|
1, 'name1', 'value1'
2, 'name2', 'value2'
3, 'name3', 'value3' 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-09-10T17:29:03.530

# 观察#1

你不应该这样做`REPLACE`，因为它是机械`DELETE`和`INSERT`.

正如[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/replace.html)所说的关于 REPLACE

第 2 段

> REPLACE 是对 SQL 标准的 MySQL 扩展。它要么插入，要么删除和插入。对于标准 SQL 的另一个 MySQL 扩展（插入或更新），请参阅第 13.2.5.3 节，“INSERT ... ON DUPLICATE KEY UPDATE 语法”。

第 5 段

> 要使用 REPLACE，您必须同时拥有该表的 INSERT 和 DELETE 权限。

使用 REPLACE 将丢弃无法自动重用的 TEST_ID 已建立的值。

# 观察#2

表格布局将不支持捕获重复键

如果名称是唯一的，则表应像这样布置

## 布局#1

```
CREATE TABLE  `oxygen_domain`.`TEST` (
`TEST_ID` int(11) NOT NULL AUTO_INCREMENT,
`NAME` varchar(255) NOT NULL,
`VALUE` varchar(255) DEFAULT NULL,
PRIMARY KEY (`TEST_ID`),
KEY (`NAME`)
) 
```

如果名称允许多个值，则表应像这样布置

## 布局#2

```
CREATE TABLE  `oxygen_domain`.`TEST` (
`TEST_ID` int(11) NOT NULL AUTO_INCREMENT,
`NAME` varchar(255) NOT NULL,
`VALUE` varchar(255) DEFAULT NULL,
PRIMARY KEY (`TEST_ID`),
KEY (`NAME`,`VALUE`)
) 
```

# 提议的解决方案

使用临时表捕获所有内容。然后，根据布局从临时表中执行大 INSERT

## 布局#1

替换`VALUE`为重复`NAME`

```
USE oxygen_domain
DROP TABLE IF EXISTS `TESTLOAD`;

CREATE TABLE `TESTLOAD` SELECT NAME,VALUE FROM TEST WHERE 1=2;

LOAD DATA LOCAL INFILE 'C:/testData.txt'
INTO TABLE `TESTLOAD`
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(NAME, VALUE);

INSERT INTO `TEST` (NAME, VALUE)
SELECT NAME, VALUE FROM `TESTLOAD`
ON DUPLICATE KEY UPDATE VALUE = VALUES(VALUE);

DROP TABLE `TESTLOAD`; 
```

## 布局#2

忽略重复`(NAME,VALUE)`行

```
USE oxygen_domain
DROP TABLE IF EXISTS `TESTLOAD`;

CREATE TABLE `TESTLOAD` SELECT NAME,VALUE FROM TEST WHERE 1=2;

LOAD DATA LOCAL INFILE 'C:/testData.txt'
INTO TABLE `TESTLOAD`
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(NAME, VALUE);

INSERT IGNORE INTO `TEST` (NAME, VALUE)
SELECT NAME, VALUE FROM `TESTLOAD`;

DROP TABLE `TESTLOAD`; 
```

## 更新

如果我们需要避免每次创建和删除表。我们可以在使用 INSERT...INTO 语句之前或之后TRUNCATE [TRUNCATE表。](https://dev.mysql.com/doc/refman/5.7/en/truncate-table.html)因此，我们下次不必创建表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T00:14:45.533

在 NAME & VALUE 上创建唯一索引并使用 IGNORE 而不是 REPLACE：

```
LOAD DATA LOCAL INFILE 'C:/testData.txt'
IGNORE
INTO TABLE `TEST`
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(NAME, VALUE); 
```

# xpages - 生成 PDF 后 XPage 有一段时间没有响应

> ID：10801303
> 
> 赞同：0
> 
> 时间：2012-05-29T14:35:55.203
> 
> 标签：xpages, xpages-ssjs

我正在使用 Ulrich Krause 的这个例子 [http://www.eknori.de/2011-10-25/xpages-to-pdf-with-itext/](http://www.eknori.de/2011-10-25/xpages-to-pdf-with-itext/)

而且效果很好，但是当您单击按钮时，PDF 将返回给用户。任何 SSJS 点击都会在页面上死掉一段时间。像超时一样，有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:16:53.033

我会将代码移动到它自己的 xpage 到 beforeRenderResponse 事件中，并使用按钮打开该页面（最终在它自己的窗口中？）。这样您就不需要劫持您想要继续使用的页面的响应。

# python - 带有问题模型的 Django 中的自定义权限

> ID：10801305
> 
> 赞同：1
> 
> 时间：2012-05-29T14:36:01.813
> 
> 标签：python, django, authorization

我目前的项目涉及一个遗留代码库，它以有限的方式使用 Django 的模型；`syncdb`没有被使用（即模型不是 Django 管理的）。我需要根据权限限制对某些列的访问（即 view_all 权限将显示所有列，而没有权限会将用户限制为几个基本列）。此权限将适用于不同的表。

我正在考虑这样做的方式是简单地使用 SQL 插入一个新的`auth_permission`. 但是，该`content_type_id`列使这变得复杂：我的理解是内容类型适用于*一个*模型，而这（正如我所说）将需要适用于不同的表，并且我无法可靠地运行`syncdb`.

有没有其他人按照这些思路实施了一些东西？您是否使用了 Django 基础架构，还是为了安全而最终使用了单独的表？您是在信号级别还是在使用模型的每个点都实现了这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:51:41.703

您始终可以围绕虚拟对象创建自定义权限，即：

```
class ColumnLevelPermissions(models.Model):

    class Meta:
        permissions = (
             ("can_view_column1", "Can view column 1"),
             ("can_view_column2", "Can view column 2"),
        ) 
```

然后创建一个包装器来过滤你的数据库调用（你说你的模型不是由 Django models.Model 管理的）：

```
class SelectManager(object):
    def get_columns(user):
        allowed_columns = []
        if user.has_perm('app.can_view_column1'):
            allowed_columns.append('column1')
        return allowed_columns 
```

唯一需要决定的是如何使用它。您可以将数据库中的对象创建为 dict()，如果出现在 allowed_columns 中，只需按键过滤对象中的列。然而，这意味着您将从数据库中读取一些冗余数据。另一种解决方案是根据列修改“选择”查询，尽管这不是很安全的方法。

有关如何在代码中存储和读取对象的更多信息可能有助于定义最佳方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T23:22:05.447

在我看来，您实际上是在寻找权限组。它们可以很容易地独立创建模型。用户组不需要包含任何实际权限。

您可以检查用户是否在特定组中：

```
def user_in_group(user, group_name):
    return user.groups.filter(name=group_name).count() 
```

你可以像这样使用它：

```
def my_view(request):
    if user_in_group(request.user, 'view_all'):
        # do the things
    else:
        # do the other things

# limit this view to 'view_all' users
@user_passes_test(lambda u: user_in_group(u, 'view_all'))
def my_other_view(request):
    # and do some more things 
```

我不知道你是什么意思

> 您是在信号级别还是在使用模型的每个点都实现了这一点？

显然，对于任何授权方法，您都需要在查看模型的任何地方插入检查并插入逻辑以仅显示允许的列（例如在模板中呈现列的子集）。

为了确保不会访问错误的列，您可以编写限制对适当字段/列的访问的代理类，并使用代理实例而不是模型实例。

```
class SomeModelProxy(object):
    def __init__(self, model_instance, user):
        self.instance = model_instance
        self.user = user

    def save(self, *args, **kwargs):
        self.instance.save(*args, **kwargs)

    # define other methods that are needed...

    def __getattr__(self, name):
        if not name in get_allowed_columns_for_user_somehow(self.user):
            raise AttributeError

        return getattr(self.instance, name)

    def __setattr__(self, name, value):
        if not name in get_allowed_columns_for_user_somehow(self.user):
            raise AttributeError

        setattr(self.instance, name, value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T06:19:45.763

也许[这](https://docs.djangoproject.com/en/dev/topics/auth/#id9)可以帮助你。我从未使用过它，但我认为您可以使用它。

您可以为一组用户[创建一些权限](https://docs.djangoproject.com/en/dev/topics/auth/#programmatically-creating-permissions)，然后根据请求该页面/模板的人（使用简单的“if”模板标签）显示一些列或其他列。这可能有点乏味，但它可以帮助你完成你正在寻找的东西。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:42:11.047

如果我理解正确，您需要根据用户/消费者的某些属性显示任何表的所有/部分对象。用户将无法部分访问某些行并完全访问其他行，这是全有或全无。

这与 ContentTypes 框架无关，后者允许*行*级别的多态关系。您只需要过滤视图中的公开字段。

如果您使用标准的用户/组类，您可以为每个表添加权限“see_complete_xxx”，并分配组，然后在视图中（这是一个 api 可能会遍历字段并将它们转换为 json/xml/无论如何）仅序列化组的允许字段。

符合以下条件的东西：

```
from django.forms.models import model_to_dict

class MyModel(models.Model):

    def serialize_full(self):
        return model_to_dict(self)

    def serialize_restricted(self):
        return model_to_dict(self, self.low_level_access_fields)

    def serialize_to_dict(self, user):
        if self.user_can_view_all(user):
            return self.serialize_full
        else:
            return self.serialize_restricted

    @classmethod
    def user_can_view_all(cls, user)
        return user.has_perm('my_model.see_all')

    @classmethod
    def low_level_access_fields(cls)
        return ["id", "name", "nickname"] 
```

您可以将大部分代码提取到 mixin 中，并在需要的地方使用它。

# android - 如何提高网络提供商的定位精度？安卓

> ID：10801308
> 
> 赞同：1
> 
> 时间：2012-05-29T14:36:12.203
> 
> 标签：android, locationmanager

我想跟踪我的手机的位置，如果我尝试通过 GPS_Provider 获取位置，我可以毫无问题地管理它......同样准确，你认为没问题......好吧，如果我在建筑物里有时我们没有 GPS 信号，因此我想实现 Network_Provider。这也没有问题，但如果我看一下我的准确度，我会看到 700 米的准确度……嗯，这太多了，我不喜欢它。

有没有办法只用一个 netwerk_provider 来获得更好的准确性？！

希望有人能让我走上正轨！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:12:44.823

不会。您使用 NetworkProvider 获得的准确度取决于移动小区的大小以及 Google 的小区和 wifi 站数据库中的 wifi 基站数量。你得到的就是你得到的。你无法控制这一点。您将在城市中心获得更好的准确性，那里的小区尺寸更小并且有更多的 wifi 基站。在国内你可以获得2500米的精度或5公里以上的精度。

当然，您可以过滤掉精度超过某个阈值的位置回调（如果这是您想要做的）。

# php - 如何从 php 中指定的日期检测过去 3 小时？

> ID：10801310
> 
> 赞同：-3
> 
> 时间：2012-05-29T14:36:17.593
> 
> 标签：php, date

如何从 php 中指定的日期检测过去 3 小时？我有我最近的脚本，我不知道我的脚本哪里出错了。

```
 $currentdate =  "2012-05-29 21:00:01";
   $dateassigned =  "2012-05-29 18:00:00";
   $startTime = mktime() - 3*3600; 
   $getdate = strtotime($date);
   if($getdate >= $startTime) { 
   //if get date already past with 3 hour this will show yes 
    echo "yes"; 
   } else { 
    echo "no"; 
   } 
```

对这个问题有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:22:35.130

如果我理解你的意思，这应该有效：

```
$now = date('Y-m-j H:i:s');
$last3Hour = strtotime ( '-3 hour' , strtotime ( $now ) ) ;
$specificDate = "2012-05-29 18:00:00";
if(strtotime($specificDate) >= $last3Hour) { 
    echo "yes"; 
} else { 
    echo "no"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:51:11.093

不确定是否要比较到第二个，但是

```
date("now -3 hours"); 
```

应该返回时间
*Tue, 29 May 2012 14:48:01 +000001*
您可以使用`strtotime()`php >= 5.3 进行比较或 date_diff()

# c++ - C++ 类 Typedef Struct 没有命名类型

> ID：10801312
> 
> 赞同：5
> 
> 时间：2012-05-29T14:36:19.343
> 
> 标签：c++, templates

我正在尝试在我的 C++ 程序中使用 typedef 结构。我开始编写以下代码，直到尝试向我的类添加返回模板 typedef 结构指针的方法时收到错误消息。

结构源.h

```
template <typename T>
class StructSource {
public:
    struct TestStruct{
        T value;
    };
}; 
```

用户.h

```
#include "StructSource.h"

class User {
    public:
        typedef StructSource<int>::TestStruct IntStruct;

        IntStruct *getIntStruct();

}; 
```

用户.cpp

```
#include "User.h"

IntStruct *User::getIntStruct() {
    return 0;
} 
```

这在使用 GCC 编译时会出现以下错误。

> User.cpp:3:1：错误：“IntStruct”没有命名类型

我不知道为什么会这样。我缺少什么类型的信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T14:39:46.503

“用户”也是一个“命名空间”（实际上，正如大多数评论者指出的那样，“命名空间”是为了快速回答），所以你必须使用

```
User::IntStruct *User::getIntStruct() {
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T14:37:59.877

你需要：

```
User::IntStruct *User::getIntStruct() { ... } 
```

IntStruct 是在作用域内定义的`User`，但函数的返回值不在作用域内。[这里](http://www2.research.att.com/~bs/C++0xFAQ.html#init-list)有对这些范围界定问题的讨论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T14:45:29.047

由于`IntStruct`是在类中定义的，因此您必须使用类名来引用它，除非在类代码中它是默认名称搜索路径的一部分。

```
User::IntStruct *User::getIntStruct() { 
```

这与命名空间*不同*，尽管语法相同。

# ios - Unity iOS 中的软动态阴影

> ID：10801315
> 
> 赞同：1
> 
> 时间：2012-05-29T14:36:23.797
> 
> 标签：ios, shader, unity3d

我需要在 iOS 平台上统一显示刚体的软动态阴影。

到目前为止，我所做的是我能够使用光线方向进行动态阴影，并在平面上投影刚体，然后使用纹理，我得到了阴影效果。但不知道该怎么做才能使它们的边缘变软。

任何建议或参考链接都会有很大帮助。

谢谢。

# html - html小程序标签，通过chrome开发者工具访问

> ID：10801316
> 
> 赞同：1
> 
> 时间：2012-05-29T14:36:33.520
> 
> 标签：html, google-chrome, applet

我碰巧收到一个带有小程序标签的 Html，有没有办法访问通过 chrome 开发人员工具收到的类，我在脚本中看不到它。如果没有我如何访问它？

```
<applet name="tradesapp" id="tradesapp" code="loader3.SunLoaderApplet.class" archive="loader_20110113.jar" codebase="http://ih.advfn.com/" width="1100" height="2000" mayscript="" alt="This browser either has java disabled or does not support it" title="Java"><param name="manifestcrc" value="1211857157"><param name="storagepath" value="ih.advfn.com"><param name="masterloader" value="master"><param name="initial_focus" value="false"><param name="cache_archive" value="loader_20110113.jar"><param name="cache_version" value="1.0.7.7"><param name="java_arguments" value="-Dsun.java2d.d3d=false"><param name="advfn_url" value="http://ih.advfn.com/"><param name="streamer" value="stream-9.advfn.com"><param name="user" value="ih_340884"><param name="root" value="advfnclient.framework.BaseControl"><param name="page" value="advfnclient.TradesContainer"><param name="tz" value="US/Eastern"><param name="clearAllDateStamp" value="1272534624504"><param name="clearCacheDateStamp" value="1272534624504"><param name="language" value="us"><param name="view" value="ih"><param name="config_name" value="trades"><param name="config_default" value="Default"><param name="params" value="w=1100&amp;h=2000&amp;symbol=N%5EMSFT&amp;montage=true&amp;sources=afx:ukreg:rssnon&amp;dims=664 79 15 0&amp;col_widths=45 55 344 90 115&amp;sid=1f58fa6b4ea88725c5b8e23d614a6e80&amp;page_key=1338581393&amp;w=1100&amp;h=2000&amp;pid=applet_embed&amp;mypid=trades"><center><iframe width="600" height="300" src="/p.php?pid=javadisabled"></iframe></center></applet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:37:55.983

Chrome 不包含 Java 调试器，小程序也不是脚本。

您可以通过`document.getElementById('tradesapp');`JS 控制台访问它。如果你想用它做任何事情，那么小程序必须[显式地向 JavaScript 公开方法](http://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/java_js.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:19:21.413

我怀疑这不是您的 Java 项目，所以我无法想象 Quentin 的建议会对您有所帮助。在我看来，您想自己运行 Java Applet，可能进行更改并访问调试器。我决定看看我能做些什么，因为我以前从未有过这种东西的经验。

首先，您可以在存档属性中下载 .jar 文件。在您的情况下，它看起来位于[http://ih.advfn.com/loader_20110113.jar](http://ih.advfn.com/loader_20110113.jar)

然后，您可以使用[Java Decomipler](http://java.decompiler.free.fr)反编译 .jar 文件。如果这样做，您将看到这个 jar 文件充当加载器，并从 advfn.com 拉取更多的 java 类。它将它们保存在以下给出的位置：

```
String path = System.getProperty("user.home"); 
```

在 Windows 上，这是 C:\<USER>\advfn

如果您有兴趣，也可以反编译这些类。您将得到原始源代码的近似值。在这种情况下，一个相当不错的。

如果希望您更进一步并决定自己构建项目，您可以将这些类导入 Eclipse。您会注意到有一些奇怪的错误，例如：

```
LoadFile(String paramLong, long arg3)
{
    this.name = paramLong;
    Object localObject;
    this.size = localObject;
} 
```

我自己从未构建过反编译器，而且对 Java 字节码一点也不熟悉，但如果我不得不猜测，我会想象反编译器试图表示传递给它的参数的本地实例。

`this.size`一旦你知道是 type ，修复就相当明显了`Long`。

```
LoadFile(String paramLong, long arg3)
{
    this.name = paramLong;
    this.size = arg3;
} 
```

如果您继续进行这些更改，您的代码将成功编译。但它仍然无法运行，因为您缺少 HTML 中设置的参数。LoaderApplet.java 中的示例行如下：

```
this.manifestCRC = Long.parseLong(getParameter("manifestcrc")); 
```

如果您返回您在其中找到它的 HTML 页面，您会发现那里指定了各种参数。您应该能够浏览您的项目并将参数请求替换为适当的值。

这是我第一次反编译 Java，所以我可能遗漏了一些细节。如果您需要更多帮助，请告诉我。

# php - php 数组中的每个

> ID：10801318
> 
> 赞同：0
> 
> 时间：2012-05-29T14:36:55.303
> 
> 标签：php, arrays

我正在尝试从 中获取值的选择列表`$staff` 我正在努力选择已经注册的员工`$entry->enrolments`。

如果`$staff id`存在于`$entry->enrolments`选择列表中选择它

`$entry`= 从 mysql 记录

`$staff`= 数组中的人员列表。

`$entry->enrolments`= 注册员工的逗号分隔值

```
<select name="tutor[]" id="tutor" multiple="multiple" size="5" class="required" title="Select Staff">

<?php
    $entry = get_record("staff_development", "id", $id);
    $staff = get_records("user", "deleted", "0", "lastname ASC", "id,firstname,lastname,idnumber");
    $sdenrolments=array($entry->enrolments);
    $people = explode(",", $entry->enrolments);

    foreach($staff as $tutor){
    foreach($people as $person){

    if($tutor->id>1)echo '<option value="'.$tutor->id.'"';
    if ($person==$tutor->id) {echo 'selected="selected"';}
    echo '>'.$tutor->lastname.' '.$tutor->firstname.'</option>';
    }
    }
?>

</select> 
```

任何帮助/指导将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:41:10.410

[in_array](http://php.net/manual/en/function.in-array.php)是判断一个值是否在数组中的最简单方法:) 用这个替换你的循环：

```
foreach($staff as $tutor){
    echo '<option value="'.$tutor->id.'"';
    if(in_array($tutor->id, $people))
        echo 'selected="selected"';
    echo '>'.$tutor->lastname.' '.$tutor->firstname.'</option>';
} 
```

您可能还想将变量从 to 重命名`people`或`enrolled_staff`更清晰一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:47:56.350

你的`if`块令人困惑。您`$tutor->id > 1`在打开选项标签时检查，但在关闭它时不检查。 [PaulP.RO 提到](https://stackoverflow.com/a/10801384/138383) `in_array`你应该用哪个替换你的 foreach 循环。这是您`if`清理的块并设置内联选择检查。

```
if($tutor->id > 1) {
    echo '<option value="'.$tutor->id.'" ' . (($person==$tutor->id) ? ' selected="selected"': '') . '>';
    echo $tutor->lastname.' '.$tutor->firstname;
    echo '</option>';
} 
```

# javascript - 如果文档上存在元素，则在方法中添加一个附加值

> ID：10801319
> 
> 赞同：0
> 
> 时间：2012-05-29T14:36:57.040
> 
> 标签：javascript, resize

我真的需要一些帮助，老实说，我一点也不了解 javascript，几个月前我的一个朋友把其中的一些放在一起，我刚刚添加了 $contentContainer 并添加了这些变量，但我只需要再添加一件事如果它适合我​​的需求...

```
 <script type="text/javascript">
                // DOM Container Resize Handler
                var adjustStyle = function() {
                    var winWidth = $(window).width(),
                        width = parseInt(winWidth),
                        container = $('body .fixed');
                        contentContainer = $('body .content');
                    if (width >= 1454) {
                        container.css('width','1454px');
                        contentContainer.css('width','1210px');
                    } else if ((width < 1454) & (width >= 1212)) {
                        container.css('width','1212px');
                        contentContainer.css('width','968px');
                    } else {
                       container.css('width','970px');
                       contentContainer.css('width','726px');
                    }
                };
                 $(function() {
                    var filterWrap = $("#filterWrap"),
                        offset = filterWrap.offset(),
                        topPadding = 15;

                    $(window).scroll(function() {
                        if ($(window).scrollTop() > offset.top) {
                            filterWrap.stop().animate({
                                marginTop: $(window).scrollTop() - offset.top + topPadding
                            });
                        } else {
                            filterWrap.stop().animate({
                                marginTop: 0
                            });
                        };
                    });

                    // DOM Container Resize Handler - Initialization    
                    $(window).resize(function() {
                        adjustStyle();
                    });
                    adjustStyle();
                });
            </script> 
```

我需要修改此脚本以搜索文档并且如果文档不包含 ('body .asideContent') 以将 252px 添加到对象 contentContainer.css 方法

不用担心 fileerWrap 功能，它可以正常工作:)

我非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:46:55.767

应该是这样的:)

```
if($("body.asideContent").length === 0){
  var width = contentContainer.css('width');
  contentContainer.css('width',width + 252 + "px");  
} 
```

# mod-rewrite - 更改地址栏中的 URL 但保持在同一页面上

> ID：10801321
> 
> 赞同：0
> 
> 时间：2012-05-29T14:37:05.190
> 
> 标签：mod-rewrite, redirect, url-rewriting

是否可以重写 url 以使页面保持不变并且 url 本身被更改？

例如：

我在 www.example.com/sales 有一个页面

我希望这个网址在地址栏中显示为 www.example.com/sales_and_repairs

我不想将 www.example.com/sales 上的页面重定向到 www.example.com/sales_and_repairs 上的另一个页面 ....只有一个页面 - 这只是我要更改的 URL，以便如果一个人输入 www.example.com/sales，他们将转到该页面，但地址栏中的 URL 将更改为显示为 www.example.com/sales_and_repairs

这可能与重写规则吗？我查找的任何内容似乎都表明您必须重定向到第二页 - 但这不是我想要做的 - 我只是想更改实际的 URL。

请问有什么建议吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:05:44.063

如果您想将 www.example.com/sales_and_repairs 永久重定向到 www.example.com/sales，您可以使用 .htaccess 文件来完成。

首先，您必须在 apache 中启用 mod_rewrite。

然后将以下内容添加到您的 .htaccess 文件中：

```
Options +FollowSymlinks
RewriteEngine on
Rewriterule ^http://www\.example\.com/sales_and_repairs$ http://www\.example\.com/sales [R=301,NC,L] 
```

此方法允许您在两个 url 后面只有一个文件。

但是，如果您想在用户操作后修改 url，您可以使用上面 Sparda 给出的答案来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:48:17.207

似乎您可以使用 javascript 实现此目的：

```
location.hash = 'newurl'; 
```

但这会给网址添加一个锚点。html5 的一些早期特性可以做到这一点，但还没有真正支持：

```
history.pushState(data, 'title', 'newurl'); 
```

# android - Android-设置壁纸和保存图像错误？

> ID：10801322
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:37:07.207
> 
> 标签：android, eclipse, button, imageview, wallpaper

嗨，我想知道是否有人知道如何通过单击按钮将图像设置为墙纸的教程

我尝试使用墙纸管理器，它可以工作，但是当我添加代码以将图像保存到 sdcard/internal 时，它给了我和错误。有人知道其他方法吗？谢谢所有帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:07:09.550

您是否添加了 SDCARD 的权限？

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

# c# - 使用部分视图 MVC3 填充 Telerik 窗口

> ID：10801324
> 
> 赞同：0
> 
> 时间：2012-05-29T14:37:16.833
> 
> 标签：c#, asp.net-mvc-3

这是一个 MVC3 应用程序。我有一个 Telerik 网格，当单击一行时，我想弹出一个 Telerik 窗口。该窗口将填充部分视图。我的网格很好。这是窗口的代码：

```
 @(Html.Telerik().Window()
    .Name("EditTaskWindow")
    .Visible(false)
     .Content(@<text><iframe id="ifrmEditTask" width="600" height="500" marginheight="0"   marginwidth="0"></iframe></text>)

) 
```

这是打开窗口的javascript：

```
 function WFTaskGrid_onRowSelect(e) {
       var url = "@(Url.Content("~/WorkflowTask/Edit/"))" + "1/2/3";
        $('#ifrmEditTask').attr('src',url);
        $('#EditTaskWindow').data('tWindow').center().open();
     } 
```

但是，当我单击网格上的一行时，会弹出窗口，但我得到 404 找不到“WorkflowTask/Edit/1/2/3” 这是我的控制器：

```
 public ActionResult _Edit(string id, string sub, string log)        
       {
           return PartialView();
      } 
```

我将此添加到 global.asax：

```
 routes.MapRoute(
     "EditTasks", // Route name
    "{controller}/{action}/{id}/{sub}/{log}", // URL with parameters
     new { controller = "WorkflowTask", action = "Edit", id = UrlParameter.Optional, sub = UrlParameter.Optional, log = UrlParameter.Optional } // Parameter defaults
 ); 
```

仍然得到 404。有人知道为什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:10:37.460

你有和 ActionResult

```
public ActionResult _Edit(string id, string sub, string log) 
```

并且您已将路线指定为

```
routes.MapRoute(
     "EditTasks", // Route name
    "{controller}/{action}/{id}/{sub}/{log}", // URL with parameters
     new { controller = "WorkflowTask", action = "Edit", id = UrlParameter.Optional, sub = UrlParameter.Optional, log = UrlParameter.Optional } // Parameter defaults
 ); 
```

看到错误？？

您在操作结果之前放置的下划线`_Edit`

然后你有

```
 var url = "@(Url.Content("~/WorkflowTask/Edit/"))" + "1/2/3"; 
```

仍然缺少下划线

现有路线的可能补救措施是添加一个动作名称，例如

```
[ActionName("Edit")]
public ActionResult _Edit(string id, string sub, string log) 
```

# twitter-bootstrap - 更改引导插入符号（颜色和位置）

> ID：10801325
> 
> 赞同：21
> 
> 时间：2012-05-29T14:37:30.270
> 
> 标签：twitter-bootstrap, caret

我想更改插入符号的颜色并使其与输入文本无关，因为很难让它看起来很好。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-29T17:55:55.007

我有两种方法可以做到这一点。如果您希望这影响您网站上的所有插入符号（可能不是首选），那么您可以覆盖您的插入符号 css 类：

```
.caret{border-top:4px solid red;} 
```

另一种选择是创建一个自定义类并将其添加到标记中的插入符号

```
.red{border-top:4px solid red;}

<div class="btn-group">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Action<span class="caret red"></span></button>
    <ul class="dropdown-menu" role="menu">
        <li><a href="#">Action</a></li>
        <li><a href="#">Another action</a></li>
        <li><a href="#">Something else here</a></li>
        <li class="divider"></li>
        <li><a href="#">Separated link</a></li>
    </ul>
</div> 
```

原 JSFiddle 已更新 [http://jsfiddle.net/whoiskb/pE5mQ/](http://jsfiddle.net/whoiskb/pE5mQ/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-16T09:58:55.980

这适用于 Wordpress Bootstrap

```
// Caret color
.navbar .nav li.dropdown > .dropdown-toggle .caret {
    border-bottom-color: #FFFFFF;
    border-top-color: #FFFFFF;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-18T22:24:47.840

请参阅这篇文章：[CSS 三角形是如何工作的？](https://stackoverflow.com/questions/7073484/how-does-this-css-triangle-shape-work)

例如，bootstrap 提供的标准“向下”箭头使用以下样式：

```
<span class="caret"></span>

.caret {
  display: inline-block;
  width: 0;
  height: 0;
  margin-left: 2px;
  vertical-align: middle;
  border-top: 4px solid #000000;
  border-right: 4px solid transparent;
  border-bottom: 0 dotted;
  border-left: 4px solid transparent;
  content: "";
} 
```

在这里，我只是稍微调换了边界，现在它是一个“向上”箭头。可以对左右插入符号执行相同的方法。

```
<span class="up_caret"></span>

.up_caret {
  display: inline-block;
  width: 0;
  height: 0;
  margin-left: 2px;
  vertical-align: middle;
  border-bottom: 4px solid #000000;
  border-left: 4px solid transparent;
  border-top: 0 dotted;
  border-right: 4px solid transparent;
  content: "";
} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T17:33:42.323

不是最好的方法，但它应该有效：

在 Bootstrap 包含之后将此添加到您的样式表 (CSS)。

```
.btn-primary .caret, .btn-warning .caret, .btn-danger .caret, .btn-info .caret, .btn-success .caret, .btn-inverse .caret {

    border-top-color: red;

    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    -moz-opacity:1;
    -khtml-opacity: 1;
    opacity: 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T15:39:49.680

另一种更改颜色的方法是根据需要配置引导程序：http: [//getbootstrap.com/customize/](http://getbootstrap.com/customize/)

对于插入符号颜色更改：下拉菜单-> @dropdown-caret-color

然后转到站点底部并单击“编译和下载”以获取您的自定义引导程序版本。

**但请注意 @dropdown-caret-color 自 v3.1.0 起已弃用**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T23:55:26.457

找到了这个简单的解决方案来改变插入符号的位置。

```
//example of moving curser 20 pixels to the right
input { 
    padding-left: 20px;
    padding-right: -20px;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-19T18:49:31.110

如果您只想更改插入符号本身的颜色，而不是大小或位置，一些简单的 CSS 可以正常工作（这是 Bootstrap 3.3.6 和 Wordpress 4.5.2）：

```
a span.caret {
  color: #666
} 
```

# c# - 如何正确并行运行多个异步任务？

> ID：10801328
> 
> 赞同：8
> 
> 时间：2012-05-29T14:37:35.487
> 
> 标签：c#, asynchronous, task-parallel-library, async-ctp, async-await

如果您需要并行运行多个异步 I/O 任务，但需要确保不超过 XI/O 进程同时运行，该怎么办？并且前后 I/O 处理任务不应该有这样的限制。

这是一个场景 - 假设有 1000 个任务；它们中的每一个都接受一个文本字符串作为输入参数；转换该文本（预 I/O 处理），然后将该转换后的文本写入文件。目标是使预处理逻辑利用 100% 的 CPU/内核和 I/O 部分以最大 10 度的并行度运行（一次最多同时打开 10 个用于写入文件）。

您能否提供一个示例代码如何使用 C#/.NET 4.5 进行操作？

[http://blogs.msdn.com/b/csharpfaq/archive/2012/01/23/using-async-for-file-access-alan-berman.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2012/01/23/using-async-for-file-access-alan-berman.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T16:13:31.770

我认为为此使用 TPL 数据流将是一个好主意：您可以创建具有无限并行性的预处理和后处理块、具有有限并行性的文件写入块并将它们链接在一起。就像是：

```
var unboundedParallelismOptions =
    new ExecutionDataflowBlockOptions
    {
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded
    };

var preProcessBlock = new TransformBlock<string, string>(
    s => PreProcess(s), unboundedParallelismOptions);

var writeToFileBlock = new TransformBlock<string, string>(
    async s =>
            {
                await WriteToFile(s);
                return s;
            },
    new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 10 });

var postProcessBlock = new ActionBlock<string>(
    s => PostProcess(s), unboundedParallelismOptions);

var propagateCompletionOptions =
    new DataflowLinkOptions { PropagateCompletion = true };

preProcessBlock.LinkTo(writeToFileBlock, propagateCompletionOptions);
writeToFileBlock.LinkTo(postProcessBlock, propagateCompletionOptions);

// use something like await preProcessBlock.SendAsync("text") here

preProcessBlock.Complete();
await postProcessBlock.Completion; 
```

哪里`WriteToFile()`可能看起来像这样：

```
private static async Task WriteToFile(string s)
{
    using (var writer = new StreamWriter(GetFileName()))
        await writer.WriteAsync(s);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:40:39.200

听起来您想考虑使用 Djikstra Semaphore 来控制对任务开始的访问。

但是，这听起来像是典型的队列/固定数量的消费者类型的问题，这可能是一种更合适的结构方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-09T23:10:26.960

我将创建一种扩展方法，在该方法中可以设置最大并行度。SemaphoreSlim 将成为这里的救星。

```
 /// <summary>
    /// Concurrently Executes async actions for each item of <see cref="IEnumerable<typeparamref name="T"/>
    /// </summary>
    /// <typeparam name="T">Type of IEnumerable</typeparam>
    /// <param name="enumerable">instance of <see cref="IEnumerable<typeparamref name="T"/>"/></param>
    /// <param name="action">an async <see cref="Action" /> to execute</param>
    /// <param name="maxDegreeOfParallelism">Optional, An integer that represents the maximum degree of parallelism,
    /// Must be grater than 0</param>
    /// <returns>A Task representing an async operation</returns>
    /// <exception cref="ArgumentOutOfRangeException">If the maxActionsToRunInParallel is less than 1</exception>
    public static async Task ForEachAsyncConcurrent<T>(
        this IEnumerable<T> enumerable,
        Func<T, Task> action,
        int? maxDegreeOfParallelism = null)
    {
        if (maxDegreeOfParallelism.HasValue)
        {
            using (var semaphoreSlim = new SemaphoreSlim(
                maxDegreeOfParallelism.Value, maxDegreeOfParallelism.Value))
            {
                var tasksWithThrottler = new List<Task>();

                foreach (var item in enumerable)
                {
                    // Increment the number of currently running tasks and wait if they are more than limit.
                    await semaphoreSlim.WaitAsync();

                    tasksWithThrottler.Add(Task.Run(async () =>
                    {
                        await action(item).ContinueWith(res =>
                        {
                            // action is completed, so decrement the number of currently running tasks
                            semaphoreSlim.Release();
                        });
                    }));
                }

                // Wait for all tasks to complete.
                await Task.WhenAll(tasksWithThrottler.ToArray());
            }
        }
        else
        {
            await Task.WhenAll(enumerable.Select(item => action(item)));
        }
    } 
```

样品用法：

```
await enumerable.ForEachAsyncConcurrent(
    async item =>
    {
        await SomeAsyncMethod(item);
    },
    5); 
```

# mysql - MySQL - 排序和前导零

> ID：10801329
> 
> 赞同：2
> 
> 时间：2012-05-29T14:37:40.603
> 
> 标签：mysql

我的数据库中有一堆具有想象名称的产品，例如“256”、“167 brown”和“1115 black”，我需要按产品编号排序返回它们，以便名为 256 的产品出现在 1115 black 之前但在 167 brown 之后。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T14:40:07.047

尝试这个：

```
SELECT code FROM your_table
ORDER BY CAST(code AS SIGNED) 
```

# javascript - 网站上的orientationchange事件（无移动应用程序）

> ID：10801332
> 
> 赞同：3
> 
> 时间：2012-05-29T14:37:47.680
> 
> 标签：javascript, jquery, orientation-changes

您是否必须使用 jquery Mobile 来检测方向更改事件？我有一个简单的网站（不是移动应用程序），只有当 iPad/iPhone/等上的方向发生变化时我才要做一些特定的事情，但我目前没有使用 jQuery Mobile 文件，所以当我测试这个时，它不起作用.

jQuery版本：

```
$(window).bind('orientationchange',function(e){
      $("#navTempResize").click();
}); 
```

javascript版本：

```
window.onorientationchange = function () {
    document.getElementById("navTempResize").click();
} 
```

另外，有没有办法在网络浏览器（FF、Safari、Chrome）上模拟方向变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:27:56.240

这个我没测试过，以后有时间再测试一下：

```
Something = function () {
  this.init();
};
Something.prototype = {
  constructor: Something, // <-- fixed constructor

  this.resizeEvent: null,

  init: function () {
    this.resizeEvent = 'onorientationchange' in window ? 'orientationchange' : 'resize';
    document.body.addEventListener($.proxy(this.resizeEvent, this), this, false);
  },

  handleEvent: function (e) {
    switch(e.type) {
      case this.resizeEvent: this.resize(e); break;
    }
  },

  resize: function(event) {
    var ratio = $(window).width()/$(window).height();
    if (ratio < 1.0) {
      this.portrait();
    } else {
      this.landscape();
    }
  },
  portrait: function () {
    // do something...
  },
  landscape: function () {
    // do something...
  }
}; 
```

我喜欢这样组织我的 js，但你可以在没有对象的情况下这样做（或者选择一个更好的名称：P，我无法想象）。所以你只需要`new Something()`准备好文件（我怀疑它是否**必须**在那里完成或者是否可以在任何地方完成）。我会在测试完所有内容后进行编辑。

**- - - - - - 编辑 - - - - - - -**

这是另一个使用 CSS3 媒体查询的解决方案：

您可以像这样使用最大和最小宽度的明智选择：

```
@media screen and (min-width: 800px) and (max-width: 1200px) {
  .class1 {
     ...
  }
  .class2 {
     ...
  }
  ...
} 
```

特别是对于 iPad，还有一个称为方向的媒体查询属性。该值可以是横向（水平方向）或纵向（垂直方向）。

```
@media screen and (orientation: landscape) {
     .iPadLandscape {
       ...
     }
}
@media screen and (orientation: portrait) {
     .iPadPortrait {
       ...
     }
} 
```

您可以在此处找到更多信息：http: [//coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

# javascript - Javascript：如何检查/删除文档头部的 CSS 样式标签

> ID：10801334
> 
> 赞同：1
> 
> 时间：2012-05-29T14:37:53.460
> 
> 标签：javascript, css

我以这种方式通过 javascript 在文档头部注入样式：

```
var style = document.createElement("style");
document.head.appendChild(style);
style.innerHTML = "a, .left-hand { cursor:wait; }"; 
```

我想知道是否有办法检查此样式是否在文档中（考虑到其他样式）以及如何删除它。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T14:40:15.000

只需保留参考，在本例中为`style`变量。

要检查它是否仍在 DOM 中，请检查它是否有一个使用`parentNode`. 如果是这样，它仍然在 DOM 中。如果不是 ( `null`)，则它不在 DOM 中。

要删除它：

```
if(style.parentNode){                     //check if it has a parent
    style.parentNode.removeChild(style);  //if it does, this is how to remove it
} 
```

即使在此之后，只要仍然引用样式标签，在这种情况下是`style`变量，您仍然可以将其重新附加到 DOM。`removeChild`仅从 DOM 中删除元素，并且不清除引用。

# tcl - 按钮 - for 循环中的命令（没有这样的变量）

> ID：10801338
> 
> 赞同：2
> 
> 时间：2012-05-29T14:37:59.327
> 
> 标签：tcl

我在 TCL 中有这个小循环

```
for {set i 1} {$i <= $user} {incr i} {
   grid [ttk::button .seluser.$i -text "$i" -command { set ::user $i }] -column $i -row 1
} 
```

我收到了消息

> 错误无法读取“i”：没有这样的变量

我认为这是因为它`-command`像一个新的 proc 一样工作，这就是它无法识别变量的原因`i`。

我不知道该怎么做。有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:58:17.747

尝试使用引号而不是大括号，以便进行`$i`预插值。例如，

```
for {set i 1} {$i <= $user} {incr i} {
    grid [ttk::button .seluser.$i -text "$i" -command " set ::user $i "] -column $i -row 1
} 
```

# asp.net - HTTP 错误 500.19 - 内部服务器错误？

> ID：10801340
> 
> 赞同：7
> 
> 时间：2012-05-29T14:38:16.300
> 
> 标签：asp.net, iis

我正在将一个非常基本的站点从 Win 2003 移动到 Win 2008 R2。该网站收到下面列出的错误。我该如何诊断？我在这两个服务器之间移动了许多其他站点，这是唯一收到此错误的站点。

我已经看过有关此问题的其他帖子，但没有一个列出适合我的解决方案。

HTTP 错误 500.19 - 内部服务器错误
错误代码 0x8007000d
配置源 -1：0：

更新：

以下是我检查的一些注释：
1）通过进程监视器的权限。配置文件正在正确打开。
2) .Net 版本 - 尝试了多种设置 3) 集成与经典管道
4) 将启用的 32 位更改为真
5) 我还没有尝试过**Aspnet_regiis.exe**，因为新盒子上的其他站点工作正常。

接下来我将尝试注释掉配置文件中的各种项目

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T16:47:07.263

I found the issue! The issue was the following line in web.config. I found this by commenting various things out in web.config until the site worked. But why is this line an issue on my new 2008 box with IIS 7.5? What isn't installed or configured?

Update:

This was the line I commented out. Could this have been related to IIS Feature Delegation? If config settings in the `<system.webServer>` element are causing this error then Feature Delegation settings could be the problem.

```
 <httpRuntime maxRequestLength="1000000"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-26T13:30:31.607

运行->cmd

运行“c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i”

以管理员身份运行此命令

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T14:42:54.880

您可能使用了不正确的 asp.net 版本。请检查从 iis 应用程序池中选择了哪个版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T15:41:08.697

您试探性地更改了您的 NT 密码。进入 IIS 右键单击​​您的应用程序 -> 管理应用程序 -> 高级设置 -> 物理路径凭据。

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T06:39:53.113

请检查此主题以获取可能的答案： [如何解决 IIS7.0 上的“HTTP 错误 500.19 - 内部服务器错误”](https://stackoverflow.com/questions/929131/how-do-i-resolve-http-error-500-19-internal-server-error-on-iis7-0/9495430#9495430) 未标记为解决方案的答案对我有帮助。我错过了：[网址重写模块](http://www.iis.net/download/urlrewrite)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-07T08:54:31.957

在我的情况下，通过在管理员模式下运行 VS2017 解决了这个问题。

# oracle - 只插入一次

> ID：10801348
> 
> 赞同：0
> 
> 时间：2012-05-29T14:38:50.720
> 
> 标签：oracle, insert

我想确保当我执行我的查询时，它只适合一次

```
INSERT INTO SERVICEPAYANT ( TYPE_FLUX, DELAI ) VALUES (160,'9999');
INSERT INTO SERVICEPAYANT ( TYPE_FLUX, DELAI ) VALUES (161,'9999');
INSERT INTO SERVICEPAYANT ( TYPE_FLUX, DELAI ) VALUES (162,'9999');
INSERT INTO SERVICEPAYANT ( TYPE_FLUX, DELAI ) VALUES (163,'9999'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:43:44.443

我可以认为两列的组合是您的自然键吗？如果是这样，您需要一个唯一性约束，这将取决于您的数据库实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:43:56.923

您将必须标记该列`TYPE_FLUX`，或者`DELAI`好像`UNIQUE KEY`您已经`PRIMARY KEY`在表中的其他列上有一个。这将在您输入agin`161`列时给您一个错误，或者在您再次输入列时给您一个错误。`TYPE_FLUX``'9999'``DELAI`

如果您希望两列的组合是唯一的，则创建一个组合`UNIQUE KEY`，这将永远不会让您`161 and '9999'`再次在表中输入**TOGETHER**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:42:20.237

```
INSERT INTO SERVICEPAYANT 
            (TYPE_FLUX, 
             DELAI) 
SELECT 161, 
       '9999' 
FROM   dual  
WHERE  NOT EXISTS (SELECT 1 
                   FROM   SERVICEPAYANT 
                   WHERE  TYPE_FLUX = 161 
                          AND DELAI = '9999') 
```

# c# - C# UserControl - 在运行时添加它们

> ID：10801350
> 
> 赞同：2
> 
> 时间：2012-05-29T14:38:59.543
> 
> 标签：c#, wpf, user-controls, runtime

我正在编写 ac#/WPF 应用程序。我的窗口上会有一个列表容器，里面装满了用户可以从中选择的用户控件。我想做的是有一个文件夹来放置我的用户控件。我的主应用程序会在启动时查看所有用户控件的此文件夹位置，然后将它们添加到列表容器中。这将允许我创建新的用户控件并将它们放在应用程序知道要查找的位置。有人对处理此问题的最佳方法有任何指导/指导吗？

我猜我的文件夹会是这样的：usercontrols/usercontrols/controlOne usercontrols/controlTwo usercontorls/newControl

ETC...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:59:41.277

在运行时使用`XamlReader`加载 Xaml 标记的片段。

这是一个例子：

```
void AddDynamicContent(string path, Panel panelToAddContent)
{

  DirectoryInfo di = new DirectoryInfo(path);
  if (di.Exists)
  {
    FileInfo[] fileInfos = di.GetFiles("*.xaml");
    foreach (FileInfo fi in fileInfos)
    {

      XmlReader xmlReader = XmlReader.Create(fi.FullName);
      FrameworkElement dynamicContent = (FrameworkElement)XamlReader.Load(xmlReader);
      panelToAddContent.Children.Add(dynamicContent);
    }
  }
}

...

AddDynamicContent(@"c:\temp\controls", myStackPanel); 
```

确保在标记定义中省略类声明部分 (x:Class="") 否则会出现异常。请注意，CodeBehind 不会执行，它只是创建一个简单的 UIElement。

# c# - LINQ ToDictionary 初始容量

> ID：10801352
> 
> 赞同：1
> 
> 时间：2012-05-29T14:39:11.520
> 
> 标签：c#, .net, linq, extension-methods

我经常使用 LINQ 扩展方法 ToDictionary，但我想知道性能。没有参数来定义字典的容量，并且列表包含 10 万个或更多项目，这可能会成为一个问题：

```
IList<int> list = new List<int> { 1, 2, ... , 1000000 };
IDictionary<int, string> dictionary = list.ToDictionary<int, string>(x => x, x => x.ToString("D7")); 
```

实现是否实际采用 list.Count 并将其传递给字典的构造函数？或者字典的大小调整是否足够快，所以我真的不用担心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:51:20.197

> 实现是否实际采用 list.Count 并将其传递给字典的构造函数？

不，根据[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)，实现基本上是这样的：

```
Dictionary<TKey, TElement> dictionary = new Dictionary<TKey, TElement>(comparer);
foreach (TSource current in source)
{
    dictionary.Add(keySelector(current), elementSelector(current));
}
return dictionary; 
```

如果您**分析**您的代码并确定该`ToDictionary`操作是您的瓶颈，那么根据上述代码制作您自己的函数是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:43:18.657

> 实现是否实际上采用 list.Count 并将其传递给字典的构造函数？

这是一个实现细节，对您来说应该无关紧要。

> 或者字典的大小调整是否足够快，所以我真的不用担心？

嗯，我不知道。只有您知道这是否真的是您的应用程序的瓶颈，以及性能是否可以接受。如果您想知道它是否足够快，请编写代码并计时。正如 Eric Lippert 常说的那样，如果你想知道两匹马的速度，你是让它们相互竞争，还是你在互联网上随便问一个陌生人哪一匹更快？

也就是说，我很难想象这是任何实际应用程序中的瓶颈。如果将项目添加到字典是您的应用程序的瓶颈，那么您做错了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:45:16.817

我不知道调整字典大小，但使用 dotPeek.exe 检查实现表明该实现不占用列表长度。

代码的基本作用是：

*   创建一个新字典
*   迭代序列并添加项目

如果您发现这是一个瓶颈，那么创建自己的扩展方法将是微不足道的，该方法`ToDictionaryWithCapacity`可以在无需迭代整个事物的情况下实际计算其长度的事物上工作。

刚刚扫描了`Dictionary`实现。基本上，当它开始填满时，内部列表会通过将其大致翻倍到接近素数来调整大小。所以这不应该发生得太频繁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:47:09.297

我认为这不会成为 TBH 的瓶颈。如果你有真正的抱怨和问题，你应该在那个时候查看它，看看你是否可以改进它，也许你可以做分页而不是一次转换所有东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T14:59:25.070

> 实现是否实际采用 list.Count 并将其传递给字典的构造函数？

它没有。这是因为调用 Count() 会枚举源，然后将其添加到字典中会再次枚举源。枚举源两次不是一个好主意，例如这将在 DataReaders 上失败。

> 或者字典的大小调整是否足够快，所以我真的不用担心？

Dictionary.Resize 方法用于扩展字典。它分配一个新字典并将现有项复制到新字典中（使用 Array.Copy）。字典大小以素数步长增加。

这不是最快的方法，但如果您不知道大小，则足够快。

# c# - Datagridview-多表转单表

> ID：10801356
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:39:34.500
> 
> 标签：c#, visual-studio, datagridview

我已经使用**完全连接**来用两个表的内容填充我的 datagridview，现在我想将 datagridview 的内容保存到一个表中。我不想使用循环，也不想访问 datagridview 的单个单元格。

现在有人有解决方案吗？

并且使用datagridview及其适配器的数据源不是解决方案，所以请在了解我的问题后如实回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:48:04.147

我不确定我是否理解您的要求，但我会尽力为您服务。您正在获得一个使用完全连接组合两个表的结果集，然后想要将该结果集输出到第三个表中？那是对的吗？

首先，我建议为第三个表创建一个视图。这可能是最有效和最动态的解决方案。如果您想将该数据呈现给您的用户，请将数据网格绑定到视图。如果您对两个原始表进行了任何更改，则必须“手动”更新第三个表。视图会自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:59:06.450

如何使用完全联接填充第三个表，然后将第三个表绑定到 DataGridView，因此当您对 DataGridView 进行更改时，第三个表会自动更新

尝试这个。我创建了一个新的 winforms 项目，添加了一个按钮和一个 datgridview。我创建了一个公共数据表，并在 Form1 构造函数中为其指定了列和行。当您单击该按钮时，它会显示数据表中包含的行数。所以我运行程序单击按钮 MessageBox 说 1 我在数据网格视图中添加一行并单击按钮 Messagebox 说 2

```
//public/Global datatable
public DataTable myTable = new DataTable();
public Form1()
    {
        InitializeComponent();
        //create myTable Columns
        myTable.Columns.Add("Name");
        myTable.Columns.Add("Age");
        myTable.Columns.Add("Number");
        //add one row
        myTable.Rows.Add(new object[] {"myName","myAge","myNumber"});
        bind to the datagridview
        dataGridView1.DataSource = myTable;

    }

    private void button1_Click(object sender, EventArgs e)
    {
        //display the number or rows in the datatable
        MessageBox.Show(myTable.Rows.Count.ToString());
    }
} 
```

# actionscript-3 - 将谷歌地图静态图像加载到闪存中

> ID：10801360
> 
> 赞同：1
> 
> 时间：2012-05-29T14:39:47.917
> 
> 标签：actionscript-3, flash, google-maps, cross-domain-policy

我正在尝试将来自谷歌地图静态图像 api 的图像加载到闪存中。当我尝试加载它们时，闪存会抱怨沙盒问题。即使在我尝试从谷歌加载策略文件之后。

`Security.loadPolicyFile("http://maps.googleapis.com/crossdomain.xml");`

有没有办法解决？还是根本不可能以这种方式加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:34:02.967

```
 var loader1:Loader = new Loader();
        var lctx1:LoaderContext = new LoaderContext(true);
        loader1.contentLoaderInfo.addEventListener(Event.INIT, doImgInit);
        loader1.load(new URLRequest("http://maps.googleapis.com/maps/api/staticmap?center=Brooklyn+Bridge,New+York,NY&zoom=14&size=600x400&maptype=satellite&sensor=false&scale=4"), lctx1);
    private function doImgInit(evt:Event):void
    {
        trace("DO IT")
        // get a reference to the LoaderInfo object in which the image is loaded
        var lInfo:LoaderInfo = evt.target as LoaderInfo;

        // this variable is used as reference to the image in the end.
        var dO:DisplayObject;

        // try to access the "content" property of the loader, if it works, there is a crossdomain.xml file. 
        try{
            dO = lInfo.loader.content;
        } 

        // if there wasn't one, we need to put the loader inside another object in order to manipulate it
        catch(err:SecurityError)
        {
            // create a new Sprite to contain the loaded image
            var sprt:Sprite = new Sprite();
            // add the loader to the sprite
            sprt.addChild(lInfo.loader);
            // get a reference to this sprite in the dO variable
            var dO:DisplayObject = sprt as DisplayObject;
        }

        // from here on you can do anything to the dO variable, rotate it, draw it unto a bitmapData, move it around.. 
        // but first don't forget to add to to some container that is on the stage so you can see it!   
    } 
```

# javascript - 在 KnockoutJS 中销毁自定义订阅

> ID：10801361
> 
> 赞同：1
> 
> 时间：2012-05-29T14:39:50.157
> 
> 标签：javascript, knockout.js

我有一个带有一些可观察对象的视图模型，并且我已经为这些可观察对象创建了自定义订阅。我想通过执行类似`model(null)`.

这会破坏那些自定义订阅还是我必须手动删除它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:48:54.253

如果您要在模型 observable 中创建针对 observable 的手动订阅，那么您需要保留对各个订阅的引用并`.dispose()`自己调用它们。

# android - Ajax 调用返回 null：Phonegap Android

> ID：10801375
> 
> 赞同：0
> 
> 时间：2012-05-29T14:40:37.330
> 
> 标签：android, jquery, cordova

我有一个 Ajax 调用：

```
$.ajax({
  url : 192.168.4.111/.....,
  type : "GET",
  async : "true",
  username : username,
  password : password,
  success : controller.handleSuccess,
  error : controller.handleError,
  beforeSend : function(xhr) {
    xhr.setRequestHeader('X-CSRF-Token', "fetch");
    xhr.withCredentials = true;
  }
}); 
```

但这不起作用，我得到了回应，但是有数据。响应为“空”。谁能帮我？如果我在android模拟器的浏览器中调用相同的html项目，没有问题，只有当我想用Phonegap创建自己的项目时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:30:53.863

I assume you tested it on android. Note that make this work in browser you have to use JSONP or another crossdomain techniqe.

# iphone - 从 iphone 应用程序在 youtube 上上传视频

> ID：10801383
> 
> 赞同：11
> 
> 时间：2012-05-29T14:41:10.363
> 
> 标签：iphone, ios, youtube-api

我想从我的 iphone 应用程序上传 youtube 上的视频。我试过这个[http://urinieto.com/2010/10/upload-videos-to-youtube-with-iphone-custom-app/](http://urinieto.com/2010/10/upload-videos-to-youtube-with-iphone-custom-app/) 但最后我我收到错误 Domain=com.google.GDataServiceDomain Code=400 “操作无法完成。（com.google.GDataServiceDomain 错误 400。）” UserInfo=0x4d921f0 {}

谁能帮我。谢谢！！！

我的代码

```
 NSString *devKey = [mDeveloperKeyField text];

    GDataServiceGoogleYouTube *service = [self youTubeService];
    [service setYouTubeDeveloperKey:devKey];

    NSString *username = [mUsernameField text];
    NSString *clientID = [mClientIDField text];

    NSURL *url = [GDataServiceGoogleYouTube youTubeUploadURLForUserID:username
                                                             clientID:clientID];

    // load the file data
    NSString *path = [[NSBundle mainBundle] pathForResource:@"YouTubeTest" ofType:@"m4v"]; 
    NSData *data = [NSData dataWithContentsOfFile:path];
    NSString *filename = [path lastPathComponent];

    // gather all the metadata needed for the mediaGroup
    NSString *titleStr = [mTitleField text];
    GDataMediaTitle *title = [GDataMediaTitle textConstructWithString:titleStr];

    NSString *categoryStr = [mCategoryField text];
    GDataMediaCategory *category = [GDataMediaCategory mediaCategoryWithString:categoryStr];
    [category setScheme:kGDataSchemeYouTubeCategory];

    NSString *descStr = [mDescriptionField text];
    GDataMediaDescription *desc = [GDataMediaDescription textConstructWithString:descStr];

    NSString *keywordsStr = [mKeywordsField text];
    GDataMediaKeywords *keywords = [GDataMediaKeywords keywordsWithString:keywordsStr];

    BOOL isPrivate = mIsPrivate;

    GDataYouTubeMediaGroup *mediaGroup = [GDataYouTubeMediaGroup mediaGroup];
    [mediaGroup setMediaTitle:title];
    [mediaGroup setMediaDescription:desc];
    [mediaGroup addMediaCategory:category];
    [mediaGroup setMediaKeywords:keywords];
    [mediaGroup setIsPrivate:isPrivate];

    NSString *mimeType = [GDataUtilities MIMETypeForFileAtPath:path
                                               defaultMIMEType:@"video/mp4"];

    // create the upload entry with the mediaGroup and the file data
    GDataEntryYouTubeUpload *entry;
    entry = [GDataEntryYouTubeUpload uploadEntryWithMediaGroup:mediaGroup
                                                          data:data
                                                      MIMEType:mimeType
                                                          slug:filename];

    SEL progressSel = @selector(ticket:hasDeliveredByteCount:ofTotalByteCount:);
    [service setServiceUploadProgressSelector:progressSel];

    GDataServiceTicket *ticket;
    ticket = [service fetchEntryByInsertingEntry:entry
                                      forFeedURL:url
                                        delegate:self
                               didFinishSelector:@selector(uploadTicket:finishedWithEntry:error:)];

    [self setUploadTicket:ticket]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:32:02.707

首先，检查 YouTube API 是否有对其 GData 库的任何更新（上次我使用它们并破坏了我的应用程序时它们发生了变化）。

[http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)

接下来，检查愚蠢的东西。已导入所有标题，所有内容都已签出等？

尝试将您的**info.plist**设置为使用 Wi-Fi，我听说一些新的 GData API 可能会解释您的 400 错误，您的应用可能无法 ping YouTube 服务器。

# .net - “步入”突然在 Visual Studio 中不起作用

> ID：10801385
> 
> 赞同：57
> 
> 时间：2012-05-29T14:41:11.910
> 
> 标签：.net, visual-studio-2010, debugging, visual-studio-debugging

突然之间，我遇到了一个问题，我无法通过 Visual Studio 中的调试进入任何代码。跨步工作正常，但它拒绝进入 ( `F11`) 我的任何代码。以前是这样，现在突然不行了。

我在下面尝试了一些事情，但仍然没有成功：

*   删除我的解决方案中每个项目中的所有 bin 文件，清理解决方案，重新构建解决方案。

*   在解决方案中单独构建项目

*   重启机器

它是一个在本地使用[WCF服务的](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET) [C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)应用程序。它处于调试模式。我在使用该服务的页面上设置了一个断点。断点命中，但不会单步执行服务代码。

ASP.NET 站点和服务代码都在同一个解决方案中。这一下子不起作用，它以前确实起作用。

我该如何解决这个问题？

向服务项目添加断点我收到警告：

> 断点当前不会被命中。没有为此文档加载任何符号。

我删除了所有项目的所有 bin 文件夹，并一一重建。他们都成功了，但我仍然得到*符号不会加载*到我放入解决方案中任何项目的任何断点上，而不是断点工作的 ASP.NET 项目。我之前能够调试所有项目，这是一个突然的事情。

来自输出窗口的信息..

```
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\SMDiagnostics\v4.0_4.0.0.0__b77a5c561934e089\SMDiagnostics.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.DurableInstancing\v4.0_4.0.0.0__31bf3856ad364e35\System.Runtime.DurableInstancing.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Xaml.Hosting\v4.0_4.0.0.0__31bf3856ad364e35\System.Xaml.Hosting.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\2d49cf50\14eee2cf\App_Web_jmow15fw.dll', Symbols loaded.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.Serialization\v4.0_4.0.0.0__b77a5c561934e089\System.Runtime.Serialization.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.WorkflowServices\v4.0_4.0.0.0__31bf3856ad364e35\System.WorkflowServices.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Web\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Web.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Discovery\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Discovery.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Activities\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Activities.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Routing\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Routing.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Channels\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Channels.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.IdentityModel\v4.0_4.0.0.0__b77a5c561934e089\System.IdentityModel.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled. 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-06T05:37:32.153

关闭 Visual Studio：

*   删除解决方案的 suo 文件（包含调试信息、断点等用户设置、书签和其他用户设置。）
*   删除 Visual Studio 缓存文件（见下文）
*   删除所有临时文件（从 VS9 到 VS10 的转变是 VS10 使用临时文件夹）
*   使用 Windows 资源管理器手动删除所有 obj 和 bin 文件夹。

打开 Visual Studio 并重建所有内容。这总是有效的。请参阅[C# VS2010 Entering break mode failed](https://stackoverflow.com/questions/7021116/c-sharp-vs2010-entering-break-mode-failed/7021171#7021171)。

以供参考：

```
Private Sub ClearVS9
    ClearFolder(oShell.ExpandEnvironmentStrings("%APPDATA%") & "\Microsoft\VisualStudio\9.0\ProjectAssemblies")
    ClearFolder(oShell.ExpandEnvironmentStrings("%APPDATA%") & "\Microsoft\VisualStudio\9.0\Recent")
    ClearFolder(oShell.ExpandEnvironmentStrings("%USERPROFILE%") & "\Local Settings\Application Data\ApplicationHistory")
    ClearFolder(oShell.ExpandEnvironmentStrings("%USERPROFILE%") & "\Local Settings\Application Data\Microsoft\VisualStudio\9.0\ProjectAssemblies")
    ClearFolder(oShell.ExpandEnvironmentStrings("%WINDIR%") & "\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files")
End Sub

Private Sub ClearVS10
    ClearFolder(oShell.ExpandEnvironmentStrings("%APPDATA%") & "\Local\Microsoft\WebsiteCache")
    ClearFolder(oShell.ExpandEnvironmentStrings("%APPDATA%") & "\Local\Microsoft\VisualStudio\10.0\ProjectAssemblies")
End Sub 
```

查看链接The evil suo 文件 - 与JMarsch 提到的[Visual Studio 战斗和获胜。](http://briannoyesblog.azurewebsites.net/2008/05/10/the-evil-suo-file-fighting-and-winning-with-visual-studio/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-05-12T17:39:34.830

就我而言，我正在进入一个产生`IEnumerable`. 在这种情况下，F11 可能会跳过该方法直到`IEnumerable`被迭代，因为它的执行被推迟到那个时候。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-14T13:22:57.890

[![在此处输入图像描述](../Images/05168dcc4b50813f65b7df1cbfbbc18d.png)](https://i.stack.imgur.com/Ifbdu.png)
我的问题是，当我设置断点时，代码会在该点正确停止，但是当我按下`F10`或`F11`代码将简单地完成运行而不是转到下一行时。我还注意到，当代码在断点处停止时，我无法使用光标将鼠标悬停在变量上以查看它们的值。这是我纠正问题的方法：

1.  在项目打开但未运行的情况下，确保显示标准工具栏（可能是因为它是默认工具栏）
2.  查看工具栏中的下拉列表，其中包含“调试”、“发布”、“配置管理器”选项。从此列表中选择调试。我的设置为发布

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-24T12:53:48.860

**当 Visual Studio无法加载 DLL 的符号**（.PDB 文件）时，它不会单步执行代码。

下面是一篇文章的链接和一些屏幕截图，这些屏幕截图解释了**如何发现 Visual Studio 尝试加载 PDB 文件的位置**。一旦你找到了你拥有的目录，只需将 .pdb 文件复制到那里，Visual Studio 就会进入。

[https://devblogs.microsoft.com/devops/understanding-symbol-files-and-visual-studios-symbol-settings/](https://devblogs.microsoft.com/devops/understanding-symbol-files-and-visual-studios-symbol-settings/)

**模块窗口 --> 调试 > 窗口 > 模块**

[![模块窗口 --> 调试 > 窗口 > 模块](../Images/7e0e28885e49dcdf76e3c42a6c6c947b.png)](https://i.stack.imgur.com/6SaKD.png)

[![符号加载信息....](../Images/f67c6387b557dd42c9660f890d69a3f2.png)](https://i.stack.imgur.com/MRDPH.png)

[![符号加载信息窗口](../Images/555b1ac4be50b6766baa1f7e116f0732.png)](https://i.stack.imgur.com/DcSpu.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T15:16:44.343

试试这个：

1.  `%temp%`从该位置删除临时 ASP.NET 文件。
2.  一个一个地清理和构建您的解决方案中的项目，然后构建您的主机并尝试调试。

它对我有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-08T11:44:18.047

你的`F11`钥匙可能会反弹到别的东西上。如果您单击 Visual Studio 中的 step-into 按钮，它可能会起作用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-01T14:21:20.160

1.  WCF 项目也是 Web 应用程序吗？是否为它启用了 ASP.NET 调试？（右键单击 WCF 项目，转到*Properties* | *Web*）

2.  当引用被弄乱时，我也曾在项目中发生过这种情况——确保来自 Web 应用程序的引用与解决方案中的项目副本相同。

3.  检查配置管理器（在[解决方案资源管理器](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Other_tools)中，右键单击*解决方案*|*配置管理器*），并确保两个项目都在构建。

4.  有时`.suo`文件会损坏，您可能会遇到各种奇怪的行为。您可以尝试删除它（如果您偏执，请制作备份副本，请参阅*[The evil suo 文件 - 与 Visual Studio 战斗并获胜](http://briannoyes.net/2008/05/10/TheEvilSuoFileFightingAndWinningWithVisualStudio.aspx)*）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-30T05:22:25.877

我遇到过同样的问题。

我想进入一个返回 an 的方法，`IEnumerator`我只是通过简单的调用（只是方法的名称）来调用它。

```
private void Start()
{
    GetTagsFromCloud();
} 
```

但是由于它是在后台运行的，所以最好用下面的方式调用它。

```
private void Start()
{
    StartCoroutine(GetTagsFromCloud());
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-18T20:52:16.533

如果您仍然可以使用工具栏但`F11`死机了，那么 Visual Studio 可能没有任何问题，但是按键的优先级更高，并且永远不会到达 Visual Studio。

您可以通过将密钥与另一个程序（如另一个应用程序或游戏）一起使用来验证这一点。如果它在那里也不起作用，那么就是这种情况。

在弄乱 VS 之前尝试一下是很好的，因为它更快更安全。您可能最终重新安装了整个工作室，却发现问题仍然存在。

我遇到了同样的问题，在我的情况下，更高优先级的消费者是 Nvidia geforce 体验，我将其设置`F11`为 FPS 指示器切换。当我关闭该程序的游戏内覆盖时（该程序始终处于活动状态并准备好击键以显示 fps、录制、拍摄快照、广播等）`F11`在 PC 重新启动后就像一个魅力。

我假设还有其他永远在线的相同或相似角色的应用程序可能会消耗击键。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-05T16:52:56.247

根据我的阅读和理解，您应该查找以下文件：

项目的程序集名称.pdb 在 bin 目录中。如果你没有看到它，它就没有被建造。请参阅我关于将调试信息设置为完整和选项/调试/符号的评论。

将项目的构建输出设置为详细或详细（工具/选项/项目和解决方案/构建和运行/MSBuild 项目构建输出详细程度）。

使用该文件（即 AssemblyName.pdb）查找某些任务、删除、复制等，并查看是否可以找出是否（尝试）删除该 pdb 文件，该文件从 (dll/exe) 引用到它所在的位置把它，复制它，等等。

如果它没有被构建，你只会看到删除任务。如果是，您将看到复制和参考任务。这些复制和引用路径将告诉您需要将该程序集 (AssemblyName.exe) 的模块控制台指向何处以获取它的符号文件（即该 pdb 文件被复制到的位置）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-12T18:34:25.567

在我的例子中，我在 Visual Studio 之外运行了一个 Web 应用程序。我尝试的程序集是从我的常规文件系统中的某个位置引用的，但在运行时它是从 GAC 加载的。我一直认为 .NET 尝试先从本地 bin 加载，然后是 GAC，但我猜不是。无论如何，它无法在 GAC 中找到该版本的 .pdb 调试符号，这就是我无法介入的原因。一旦我在 GAC 中更新了程序集并提供了 .pdb 文件，它就可以工作了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-12-04T09:57:00.493

如果您自定义了输出路径，请确保所有输出路径都指向同一个输出目录

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-12-08T16:08:52.430

就我而言，我试图进入 Web 服务方法，但它不起作用。在我使用 Unity 解决服务实例后开始工作。

更多信息： [使用 Unity 解析类型实例](https://msdn.microsoft.com/en-us/library/ff664762(v=pandp.50).aspx#ResolveObjects_CustomTypes)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-27T06:01:47.910

在我的情况下，在 VS2008 中，检查 Project Properties|Debug 下的“启用非托管代码调试”选项就可以了。我不知道为什么会这样，因为项目中的所有代码都在 vb.net 中。

在以后的版本中，此选项已重命名为“启用本机代码调试”。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-18T03:28:25.940

我也遇到了这个问题，原来我期望采用的方法是 Moq'd（我正在调试一个测试）。这个起订量刚回来。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-05T15:39:23.620

在 VS 2005 上，检查*c/c++* （项目属性）下的*优化*是否设置为*Maximize Speed(/02)*。将设置更改为*Disabled(/Od)*。

 **** * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-09-06T23:25:27.443

一些解决方案，这可能不是那么明显。检查您的语言设置并将其更改为英语。我知道这听起来很愚蠢，但我在 2 小时后解决了它。我什至没有意识到我将它设置为我的第二语言

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-08T15:36:50.993

在 VS2022 预览中遇到此问题并删除 .suo 文件修复了它。

必须使用文件资源管理器搜索文件。该文件还包含在隐藏的 .vs 文件夹中。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-06-08T17:24:24.863

关闭 Visual Studio 然后重新启动对我有用。***

# c# - 使用 LINQ to XML 填充和 XML 模板？

> ID：10801388
> 
> 赞同：1
> 
> 时间：2012-05-29T14:41:19.110
> 
> 标签：c#, xml, linq-to-xml

我有多个 XML 模板，我想使用 LINQ to XML 填充它们，但我不确定如何开始，这意味着如何正确读取 XML 文件（最佳方法）并填充属性和节点（InnerText）。此外，如何在现有模板中创建新元素和属性以及删除/更新现有模板？下面是一个模板示例：

```
<Person age="age">
<FirstName></FirstName>
<LastName></LastName>
<Children>
<Name></Name>
</Children>
</Person> 
```

在上图中，age 属性是占位符，Children 下的 FirstName、LastName 和 Name 是占位符。我们还假设我想要删除子项下的名称或添加名称。还假设我想在 Person 中添加一个带有日、月、年属性的 DOB 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:04:11.443

这是一个例子。您为每个模板构建一个类。我正在使用以下库扩展类 (XElementExtensions.cs)：[https ://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/)

```
public class Person
{
    XElement self;
    public Person(XElement person) { self = person; }

    // Age should be a value of Now minus DOB in years.
    public int Age { get { return DateTime.Now.Year - DOB.Year; } }

    public DateTime DOB
    {
        get { return self.Get("DOB", DateTime.MinValue ); } // choose a default date that works for you
        set { self.Set("DOB", value, true); } // true set as attribute
    }

    public string FirstName
    {
        get { return self.Get("FirstName", string.Empty); }
        set { self.Set("FirstName", value, false); } // false set as child node
    } 

    public string LastName
    {
        get { return self.Get("LastName", string.Empty); }
        set { self.Set("LastName", value, false); }
    } 

    public Children Children
    {
        get { return new Children(self.GetElement("Children")); }
    }
}

public class Children
{
    XElement self;
    public Children(XElement children) { self = children; }

    public Child this[string name]
    {
        get 
        { 
            return self.Elements("Name")
                         .Select(x => new Child(x))
                         .FirstOrDefault(c => c.Name == name);
        }
    }

    public Child this[int index]
    {
         get { return new Child(self.Elements("Name").ElementAt(index)); }
    }

    public void Add(string name)
    {
         Child child = this[name];
         if(null == child)
         {
             child = new Child(new XElement("Name"));
             child.Name = name;
             self.Add(child.self);
         }
         else
             throw new ArgumentException("Child with name: "+ name +" already exists!");
    }
}

public class Child
{
    internal XElement self;
    public Child(XElement child) { self = child; }

    // You can have an Age/DOB for the child as well, or remove these two properties.
    // Age should be a value of Now minus DOB in years.
    public int Age { get { return DateTime.Now.Year - DOB.Year; } }

    // DOB is an attribute as self.Value in Name erases all child nodes when set.
    public DateTime DOB
    {
        get { return self.Get("DOB", DateTime.MinValue ); } // choose a default date that works for you
        set { self.Set("DOB", value, true); }
    }

    public string Name
    {
        get { return self.Value }
        set { self.Value = value; }
    } 
} 
```

如果要将 null 指定为任何 Get() 的默认值，则需要指定 Get 的类型`Get<Type>("node", null)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:50:17.663

我建议看一下[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)及其 XDocument 类。它使 xml 文档的导航和编辑变得非常容易。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T14:50:57.737

查看此[站点](http://msdn.microsoft.com/en-us/vstudio/bb688087.aspx)以获取 linq to xml 的示例

# magento - 如何在magento的模板页面（.phtml页面）中按类别ID显示产品？

> ID：10801391
> 
> 赞同：1
> 
> 时间：2012-05-29T14:41:26.960
> 
> 标签：magento, categories, product

我是 magento 的新手。我在 allproduct.phtml 文件中使用以下代码来获取所有类别 ID。

```
function get_categories(){

$category = Mage::getModel('catalog/category'); 
$tree = $category->getTreeModel(); 
$tree->load();
$ids = $tree->getCollection()->getAllIds(); 
$arr = array();
if ($ids){ 
foreach ($ids as $id){ 
$cat = Mage::getModel('catalog/category'); 
$cat->load($id);
$arr[$id] = $cat->getName();
} 
}

return $arr;

} 
```

现在我在一个数组中得到了下面想要的类别，

```
Array
(
    [Root Catalog] => 1
    [Default Category] => 2
    [Multivitamins] => 3
    [Vitamins and Minerals] => 4
    [Joints and Arthritis] => 5
    [EFA's] => 6
    [Diet and Digestion] => 7
    [Mood, Mind and Specialty] => 8
    [cardiostrong™] => 9
    [Teas and Juices] => 10
    [Additional] => 11
) 
```

现在我需要显示由上述类别 ID 分隔的所有产品。

我怎样才能做到这一点？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:18:59.450

您可以通过调用获取某个类别的产品`$category->getProductCollection()`。

样本：

```
 $categories = Mage::getModel('catalog/category')->getCollection()->addAttributeToSelect('name');

foreach ($categories as $category) {
  $products = $category->getProductCollection()->addAttributeToSelect('name');
  echo sprintf("< h1>%d. %s", $category->getId(), $category->getName());
  foreach ($products as $product) {
    echo sprintf("%d. %s< br />",  $product->getId(), $product->getName());
  }
} 编辑：我故意弄错了html标签，以防止它们被解析。

```

# continuous-integration - 如何在一个仪表板上整合来自不同位置的多个 Jenkins 实例的构建状态？

> ID：10801396
> 
> 赞同：4
> 
> 时间：2012-05-29T14:41:50.413
> 
> 标签：continuous-integration, jenkins

我们有几个团队分布在世界各地（美国、英国、印度），他们在地理上非常专注于项目。目前，每个团队都有自己的 Jenkins 服务器来构建他们的项目。可以说它是这样的：

*   JenkinsA（美国）[项目 A]
*   JenkinsB（印度）[项目 B]
*   JenkinsC（英国）[项目 C]

这些站点通过（必然）高延迟 VPN 连接。管理层希望对所有团队的所有构建状态有一个汇总视图。但是，由于集成系统在地理上分布，因此我们无法在一个位置整合到单个构建系统。

1.  是否有一种预构建的解决方案可以在一个网页/破折号上汇总来自各种 Jenkins 实例的所有构建的状态？可以将各种 RSS 提要合并到一个显示中的东西？

2.  鉴于我们开发组织的结构、地理和网络拓扑结构，将美国实例提升为 Master，而将英国和印度实例降级为 slave 是否有任何好处？这将为我们提供一个汇总视图，但会将美国办公室和慢速 VPN 介绍为所有站点的单点故障？此外，它可能会将构建实例的所有权从团队手中夺走。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:01:33.927

一个相当简单的方法是构建一个简单的 HTML 页面，该页面使用 Jenkins API 从各种 Jenkins 实例中提取状态。以下是一些可能对您有用的 JavaScript 代码：

[詹金斯状态](https://github.com/AF83/jenkins-status)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T05:55:28.617

这个 Jenkins 插件可能也很有趣。

[维基詹金斯](https://wiki.jenkins-ci.org/display/JENKINS/Build+Publisher+Plugin)

插件说明：

> 该插件允许将来自一个 Jenkins 的记录发布到另一个 Jenkins。典型的用例是让您在防火墙内运行构建，然后将结果发送到另一个面向外部世界的 Jenkins。

到目前为止，我发现的唯一问题是您必须确保 Jenkins 实例之间的作业具有不同的名称。如果“公共”Jenkins 上已经有一个工作与您尝试从“私人”Jenkins 发布的工作同名，那么公共工作可能会被覆盖，然后似乎不可能再次断开工作。

# python - 系统日期格式不使用 django 语言环境

> ID：10801397
> 
> 赞同：14
> 
> 时间：2012-05-29T14:42:01.333
> 
> 标签：python, django, localization, date-format

试图了解 L10N 在 Django 中的实现，这是我的设置

```
LANGUAGE_CODE = 'fr-FR'
USE_L10N = True 
```

如果我尝试

```
>>> datetime.datetime.strptime('2012-05-30 15:30', '%Y-%m-%d %H:%M')
      .strftime('%c') 
```

它会给我`'Wed May 30 15:30:00 2012'`那是*EN*语言环境。然而，[医生](https://docs.djangoproject.com/en/1.3/topics/i18n/localization/#format-localization)说：

> [...] 访问相同内容但使用不同语言的两个用户将看到以不同方式格式化的日期和数字字段，具体取决于他们当前区域设置的格式 [...]

他们是在谈论为各自浏览器设置的语言环境吗？
如果没有，例如，我如何将其默认设置为法语？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-29T15:11:52.403

Django 的本地化工作在 Django 模板和表单的上下文中，并且不能向上传播到 Python 的内部日期时间表示：

```
When using Django's formatting system, dates and numbers on templates 
will be displayed using the format specified for the current locale. 
...Django will also use localized formats when parsing data in forms. 
```

因此，如果您有`USE_L10N = True`并且该地区的用户`FR`输入`10,45`了一个表格，那将被解释为`10.45`英文十进制系统中的意思。类似地，模板标签 like 的输出`{{ value|date:"SHORT_DATE_FORMAT" }}`将根据用户的语言环境而有所不同。

但是，Python 内部`strftime('%c')`不访问 Django 的设置，而是引用安装它的机器上设置的语言环境。您可以检索和更改 Python 指向的语言环境设置：

```
>>> datetime.datetime.strptime('2012-05-30 15:30', '%Y-%m-%d %H:%M').strftime('%c')
'Wed May 30 15:30:00 2012'
>>> import locale
>>> locale.getlocale()
(None, None)
>>> locale.getdefaultlocale()
('en_US', 'UTF-8')
>>> locale.setlocale(locale.LC_ALL, "fr_FR.UTF-8")
'fr_FR.UTF-8'
>>> datetime.datetime.strptime('2012-05-30 15:30', '%Y-%m-%d %H:%M').strftime('%c')
'Mer 30 mai 15:30:00 2012' 
```

或者通过设置环境变量`$LANG`。

# objective-c - Xcode4：带有类别：...类方法...未找到（返回类型默认为'id'）

> ID：10801398
> 
> 赞同：0
> 
> 时间：2012-05-29T14:42:06.513
> 
> 标签：objective-c, xcode4

对于与objective-c类别相关的明显错误的情况，我不断得到这个。

注意：这工作正常，然后一夜之间停止工作。

就好像 Xcode 从根本上破坏了它“读取文件系统”的能力，这让我发疯了。任何关于如何强制它...读取文件系统的想法......将不胜感激。

例如：

1.  启动 Xcode，编写文件，导入它，使用 Xcode 自动完成。
2.  cmd-click 导入行，跳转到头文件
3.  几次构建之后，Xcode 标记一个警告：，例如“类方法 '+stringFromCGPath:' not found (return type defaults to 'id')”
4.  现在，当您在导入行上单击 cmd 时，Xcode 会弹出一个对话框“未找到符号”（世界上最糟糕的对话框？甚至没有确认，它会闪烁并消失）
5.  如果您运行该应用程序，它会在该行崩溃，说选择器无法识别

然后，证明FUBAR Xcode是如何的：

1.  退出 Xcode，重新启动
2.  Cmd-click 再次工作
3.  ...但警告仍然存在，应用程序仍然崩溃
4.  几秒钟后，cmd-click 停止工作

注意：我检查过的东西：

1.  该文件在项目文件夹中？是的
2.  .m 文件包含在目标中？是的
3.  .m 文件是否在要编译的文件列表中？是的
4.  做一个 CLEAN ... 然后一个 BUILD？是的

* * *

更新：我正在尝试导入的示例标头 - 我已经成功导入了几个月，并且在数百个版本中运行良好，并且我没有更改（使用 SCM 确认）：

```
#import <Foundation/Foundation.h>

#import "CGGeometryExtensions.h"

@interface NSString(CGPath)

+(NSString*) NSStringFromCGPath:(CGPathRef) path;

@end 
```

* * *

UPDATE2：实际上，这不会在运行时崩溃——它崩溃是因为在调用“NSStringFromCGPath:”时有一个错字（一个字母是小写的，而它应该是大写的）。但这很难看到，因为 XCode 声称整个头文件不存在 - 尽管如上所述，IMPORT 行是由 Xcode 自动生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:57:26.127

听起来好像您的索引器可能有问题。您的项目中有多个目标，或者工作区中有多个项目吗？如果是这样，请确保它们**都**完全干净地构建 - 索引一个目标的失败可能会扰乱另一个目标的代码完成。

您也可以尝试删除项目的**DerivedData**文件夹

# c# - 如何在 C# 中按以...开头的属性选择节点

> ID：10801399
> 
> 赞同：7
> 
> 时间：2012-05-29T14:42:12.587
> 
> 标签：c#, xml

我有这个 xml 文档，我想按以“/employees/”开头的属性选择节点。

```
<table>
  <tr>
    <td>
      <a href="/employees/1.html" title="Employee 1">Employee 1</a>
    </td>
    <td>Robert</td>
  </tr>
  <tr>
    <td>
      <a href="/employees/2.html" title="Employee 2">Employee 2</a>
    </td>
    <td>Jennifer</td>
  </tr>
</table> 
```

所以在 C# 中，我会做这样的事情：

```
parentNode.SelectNodes("//table/tr/th/a[@href='/employees/.....']") 
```

这可以用 C# 实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T14:49:39.313

简单的`starts-with`功能可以满足您的需要：

```
parentNode.SelectNodes("//table/tr/td/a[starts-with(@href, '/employees/')]") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T14:49:34.980

使用纯`LINQ`你可以做这样的事情

```
var doc = XDocument.Parse("YOUR_XML_STRING");
var anchors = from e in doc. Descendants("a") where e.Attribute("href").Value.StartsWith("/employee/") select e; 
```

// 现在您可以通过组合 .Parent.Parent 来选择任何节点.....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T14:50:26.390

那么，像这样的事情？

```
var xml = @"<table>
  <tr>
    <td>
      <a href=""/employees/1.html"" title=""Employee 1"">Employee 1</a>
    </td>
    <td>Robert</td>
  </tr>
  <tr>
    <td>
      <a href=""/employees/2.html"" title=""Employee 2"">Employee 2</a>
    </td>
    <td>Jennifer</td>
  </tr>
</table>";
var doc = new XmlDocument();
doc.LoadXml(xml);

var employees = doc.SelectNodes("/table/tr/td/a[starts-with(@href, '/employees/')]");
DoWhatever(employees); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:46:57.710

当然，您可以将 XML 加载到[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)实例中并使用[XPathSelectElements](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.xpathselectelements%28v=vs.90%29.aspx)方法使用您的表达式进行搜索。

# java - 如何在表格中向上/向下移动项目

> ID：10801402
> 
> 赞同：2
> 
> 时间：2012-05-29T14:42:24.900
> 
> 标签：java, swt

以下是一个用户界面： ![在此处输入图像描述](../Images/7653e541303c0f48651cf766087707f3.png)

UI中有一个向上按钮和一个向下按钮，当单击向上/向下按钮时，左侧表格中的选定项目（例如lib/logger.jar）（**我假设它是一个表格**，因为我将创建一个表格显示我的应用程序中的项目）将向上/向下移动。

问题：如何为上/下按钮添加功能，使点击上/下按钮后表格中的项目会移动？

顺便说一句，我正在使用 Java SWT/JFace。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:52:55.900

如果它是一张桌子，您将使用`TableItems`. 要移动 TableItem，您必须处理要移动的 TableItem 并使用接收索引作为其参数之一的构造函数创建一个新的。该索引是放置新 TableItem 的位置。

# objective-c - 基本 Facebook / Twitter URL 处理程序格式

> ID：10801404
> 
> 赞同：9
> 
> 时间：2012-05-29T14:42:29.910
> 
> 标签：objective-c, ios, facebook, twitter, openurl

我很确定在我发布这个小时后我可能会找到答案，但我已经找了一个多小时了，似乎无法解决。所以这里..

我想在我的应用程序中添加一些简单的“联系我们”链接，如果可用，可以在其中一个推特应用程序中打开我的个人资料....“推特”、“Tweetbot”、“Twitterriffic”或 Facebook Safari 如果没有可用。我不想为 twitter 等添加完整的 API，因为它只是一个联系页面，我不需要访问他们的时间线，或者知道他们的用户 ID 等。

我在手机上使用的 Tweetbot 应用程序和处理程序工作正常（见下文）并打开我的个人资料页面，但是我似乎无法获得默认 Facebook 或 Twitter 应用程序的工作，应用程序启动但没有进入我各自的个人资料页面（我显然遗漏了测试代码，但这些是调用应用程序的行）......

```
//Twitter
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"twitter://twitter.com/MyTwitterID"]];

//Tweetbot - WORKS!
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tweetbot:///user_profile/MyTwitterID"]];

//Fall Back to Safari - WORKS!
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.twitter.com/MyTwitterID"]];

//Facebook 
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"fb://profile/MyFbID"]]; 
```

[现在我在这里](http://wiki.akosma.com/IPhone_URL_Schemes#Twitter)得到了相当多的信息，但除了 Tweetbot 和 Safari 之外，我无法让它工作。我猜 URL 部分的格式有误，但我找不到任何解释它应该如何的地方。Google 搜索会显示带有 twitter 和 facebook 标签但没有有用信息的页面，而且 Twitter API 文档对于我想要做的简单实现来说太详细了。谁能帮助我正确的 URL 格式？

* * *

[编辑] 花了我一个多小时，但这里至少是推特..

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"twitter://user?screen_name=MyTwitterID"]]; 
```

还在 Facebook 上工作！！[尽管我在这里](http://www.cocoanetics.com/2010/02/making-a-follow-us-on-twitter-button/)偶然发现了答案，但我不能相信答案

当我让 Facebook 也能正常工作时，我会在此处发布我的代码以及所有代码，以防它对其他人有所帮助！

等离子体

* * *

编辑 2：好的，这是我的代码（我已经删除了我的网站 URL 和我的 Facebook ID，但你会明白的......它会弹出一个带有联系我们选项的 UI 操作表。希望它对其他人。

```
#pragma mark - Contact Us Methods
- (IBAction)openContact {   

    UIActionSheet *popupContact = [[UIActionSheet alloc] initWithTitle:@"Contact Us" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Twitter", @"Facebook", @"Email", @"Visit our website", nil];

    popupContact.actionSheetStyle = UIActionSheetStyleDefault;

    [popupContact showInView:self.parentViewController.tabBarController.view];

}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    NSString *twitterUserName  = @"MyTwitterName";

    //Facebook ID (not the page name) check the FB urls for id=XXXXXXXXXXXXXXXX
    NSString *facebookUserID = @"XXXXXXXXXXXXXXX";

    UIApplication *app = [UIApplication sharedApplication];

    switch(buttonIndex){
        case 0: {
            //Contact Us By Twitter 

            //Twitter Default
            NSURL *twitterURL = [NSURL URLWithString:[NSString stringWithFormat:@"twitter://user?screen_name=%@", twitterUserName]];
            if ([app canOpenURL:twitterURL]) 
            {
                [app openURL:twitterURL];
                return;
            }

            //Tweetbot 
            NSURL *tweetbotURL = [NSURL URLWithString:[NSString stringWithFormat:@"tweetbot:///user_profile/%@", twitterUserName]];
            if ([app canOpenURL:tweetbotURL]) 
            {
                [app openURL:tweetbotURL];
                return;
            }

            // Tweetie: http://developer.atebits.com/tweetie-iphone/protocol-reference/
            NSURL *tweetieURL = [NSURL URLWithString:[NSString stringWithFormat:@"tweetie://user?screen_name=%@", twitterUserName]];
            if ([app canOpenURL:tweetieURL])
            {
                [app openURL:tweetieURL];
                return;
            }

            // Birdfeed: http://birdfeed.tumblr.com/post/172994970/url-scheme
            NSURL *birdfeedURL = [NSURL URLWithString:[NSString stringWithFormat:@"x-birdfeed://user?screen_name=%@", twitterUserName]];
            if ([app canOpenURL:birdfeedURL])
            {
                [app openURL:birdfeedURL];
                return;
            }

            // Twittelator: http://www.stone.com/Twittelator/Twittelator_API.html
            NSURL *twittelatorURL = [NSURL URLWithString:[NSString stringWithFormat:@"twit:///user?screen_name=%@", twitterUserName]];
            if ([app canOpenURL:twittelatorURL])
            {
                [app openURL:twittelatorURL];
                return;
            }

            // Icebird: http://icebirdapp.com/developerdocumentation/
            NSURL *icebirdURL = [NSURL URLWithString:[NSString stringWithFormat:@"icebird://user?screen_name=%@", twitterUserName]];
            if ([app canOpenURL:icebirdURL])
            {
                [app openURL:icebirdURL];
                return;
            }

            // Fluttr: no docs
            NSURL *fluttrURL = [NSURL URLWithString:[NSString stringWithFormat:@"fluttr://user/%@", twitterUserName]];
            if ([app canOpenURL:fluttrURL])
            {
                [app openURL:fluttrURL];
                return;
            }

            // SimplyTweet: http://motionobj.com/blog/url-schemes-in-simplytweet-23
            NSURL *simplytweetURL = [NSURL URLWithString:[NSString stringWithFormat:@"simplytweet:?link=http://twitter.com/%@", twitterUserName]];
            if ([app canOpenURL:simplytweetURL])
            {
                [app openURL:simplytweetURL];
                return;
            }

            // Tweetings: http://tweetings.net/iphone/scheme.html
            NSURL *tweetingsURL = [NSURL URLWithString:[NSString stringWithFormat:@"tweetings:///user?screen_name=%@", twitterUserName]];
            if ([app canOpenURL:tweetingsURL])
            {
                [app openURL:tweetingsURL];
                return;
            }

            // Echofon: http://echofon.com/twitter/iphone/guide.html
            NSURL *echofonURL = [NSURL URLWithString:[NSString stringWithFormat:@"echofon:///user_timeline?%@", twitterUserName]];
            if ([app canOpenURL:echofonURL])
            {
                [app openURL:echofonURL];
                return;
            }

            // --- Fallback: Mobile Twitter in Safari
            NSURL *safariURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://mobile.twitter.com/%@", twitterUserName]];
            [app openURL:safariURL];
            return;

        }
        case 1: {
            //Facebook
            NSURL *facebookURL = [NSURL URLWithString:[NSString stringWithFormat:@"fb://profile/%@", facebookUserID]];
            if ([app canOpenURL:facebookURL]) 
            {
                [app openURL:facebookURL];
                return;
            }

            // --- Fallback: Mobile Facebook in Safari
            NSURL *safariURL = [NSURL URLWithString:@"https://touch.facebook.com/MyFBName"];
            [app openURL:safariURL];
            return;

        }
        case 2:
            //Email           
            [app openURL:[NSURL URLWithString:@"mailto://support@mywebsite.co.uk?subject=Important%20Email&body="]];
            return;

        case 3:
            //Visit The Website
            [app openURL:[NSURL URLWithString:@"http://www.mywebsite.co.uk"]];
            return;

        case 4:
            //Cancel
            return;

    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:09:15.673

只需一些额外的步骤即可解决您的问题，

您应该首先检查应用程序是否存在，然后启动它，否则在 safari 中打开链接。

```
NSString *filePath = @"/Applications/TweetBot.app";
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath])
{
   // launch app
}
else 
{
   // launch safari instead
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:31:22.990

请参阅第一篇文章中的编辑 2，这是完整的解决方案。

等离子体

# actionscript-3 - 使用 as3 获取 LAN 上所有设备的 IP 地址

> ID：10801405
> 
> 赞同：1
> 
> 时间：2012-05-29T14:42:32.867
> 
> 标签：actionscript-3, apache-flex, air

我想使用 Action Script 3 获取 LAN 上所有设备的 IP 地址。你能告诉我该怎么做吗？另外，如果可以的话，请给我一个用AS3编写的简单示例。

谢谢你。

# java - 外部资源的 JSF 视图

> ID：10801406
> 
> 赞同：1
> 
> 时间：2012-05-29T14:42:45.683
> 
> 标签：java, jsf, jsf-2

我有一个用于 Web 系统的多个 JSF 项目（模块），它们都共享一个核心。核心共享一些资源，其中之一是主页。主页在此路径中：

```
core/
     META-INF/
              faces-config.xhtml (blank)
              resources/
                        view/
                             principal.xhtml 
```

我希望能够做到这一点：

```
http://modulea/view/principal.jsf

http://moduleb/view/principal.jsf 
```

但我得到：请求的资源（/ModuleA/view/xhtml/principal.jsp）不可用。

我会很感激任何想法。

# c# - 在代码中使用 db 中定义的元数据

> ID：10801407
> 
> 赞同：0
> 
> 时间：2012-05-29T14:42:46.230
> 
> 标签：c#, architecture

我在要在代码中使用的数据库表中有元数据。元数据是用于报告花费时间的不同类型的时间类型。

数据可以是：NormalTime OverTime Vacation Illness 等

数据有一个 ID 和一个描述和一些其他的东西。

```
ID = 1
Name = "Regular time"
Description = "Normal work time" 
```

在我的代码中关联这些数据的好方法是什么？

例如，如果我想创建一个汇总所有 NormalTime 报告的方法（我有另一个表存储使用的时间，其中 NormalTime ID 和数量以及其他一些东西）我该怎么做？

我不想对 ID 进行硬编码：

```
Select * from xyz where TimeType = 1 
```

我想做的是：

```
Select * from xyz where TimeType = NormalTime. 
```

否则代码变得非常难以阅读。

在我当前的解决方案中，我有与 ID 相关的硬编码字符串常量。这样做的问题是，如果有人将 TimeType 的描述从 NormalTime 更改为硬编码字符串 const sai 是一回事，而 db 数据是另一回事。是的，发生这种情况是因为我无法控制数据库内容:(

那么，我如何以最好的可维护和可读的方式解决这个问题，其中数据库表中可能发生更改并且代码不会很难阅读。有人可以将 TimeTypes 添加到数据库中，然后我可以添加在代码中使用它们的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:48:31.587

一种方法是使用 Visual Studio 的 T4 文本生成模板。（实体框架使用这些来生成代码）

您可以创建一个模板文件，其中包含从数据库中提取带有元数据的表的代码，并在其中生成带有静态常量的类。

但是，只要数据库更改，它们就需要运行。但是我认为您可以设置它们，以便每次构建代码时它们都会重新生成。

[关于 T4 模板的问题](https://stackoverflow.com/questions/4395000/t4-template-to-generate-enums)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:16:56.490

您可以在 C# 端有一个枚举类型，该类型映射到数据库中的表。

[http://www.codeproject.com/Articles/41746/Mapping-NET-Enumerations-to-the-Database](http://www.codeproject.com/Articles/41746/Mapping-NET-Enumerations-to-the-Database)

# utf-8 - 如何使用 UTF-8 获取我的网站（PHP 网站）

> ID：10801411
> 
> 赞同：0
> 
> 时间：2012-05-29T14:43:01.780
> 
> 标签：utf-8

第一次发帖，希望能解决一个非常令人沮丧的问题。

在 Google chrome 中，我的 PHP 站点显示随机字符，例如 Â。但是，当我将编码切换为 UTF-8 时，所有随机字符都会清除。

我一直在其他地方阅读，我需要告诉我网站默认使用 UTF-8。我的主人说这已经在他们这边启用了。

我要添加什么代码以及在哪里解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:44:59.647

放：

```
<meta http-equiv='content-type' content='text/html; charset=utf-8'/> 
```

在`<head>`文档中，它应该强制页面正确呈现 utf-8 字符。

进一步描述：在您的 HTML 页面中，您的页面布局如下：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
        <meta http-equiv='content-type' content='text/html; charset=utf-8'/>
        <!--<link> tags for any CSS-->
        <!--<script> tags for any JS-->
        <!--Anything else in the head-->
    </head>
    <body>
        <!--Page contents-->
    </body>
</html> 
```

# objective-c - 如何同步动画 UIView 和 CALayer

> ID：10801414
> 
> 赞同：23
> 
> 时间：2012-05-29T14:43:06.443
> 
> 标签：objective-c, cocoa-touch, core-animation, uiviewanimation

*为了说明这个问题，我在 Github 上提供了一个非常小的 Xcode 项目（两个类，11kb 下载）。[看看这里的要点](https://gist.github.com/93982af3b65d2151672e)或使用**git clone git@gist.github.com:93982af3b65d2151672e.git***。

* * *

请考虑以下情况。我的一个自定义视图，称为[“容器视图”](https://gist.github.com/93982af3b65d2151672e#file_animated_layers/classes/container_view.m)，包含两个小方块。在此屏幕截图中说明：

![两个方块初始位置截图](../Images/aac8e9e8f515cfb20762e4f74f157890.png)

蓝色方块是 22x22 pt`UIView`实例，红色方块是 22x22 pt`CALayer`实例。出于这个问题的目的，我希望这两个正方形“粘”到外视图的右下角，同时我为该外视图的框架设置动画。

`UIView`我在 a的 class method中更改了容器视图的框架`animateWithDuration:delay:options:animations:completion:`，并使用了 type 的非默认缓动参数`UIViewAnimationCurveEaseOut`。

```
[UIView animateWithDuration:1.0 delay:0 
                    options:UIViewAnimationCurveEaseOut 
                 animations:^{ _containerView.frame = randomFrame; } 
                 completion:nil]; 
```

*注意：*蓝色 UIView 和红色 CALayer 的框架都是在容器视图的重写方法中设置的，但是如果我将蓝色 UIView 的属性设置为 UIView 灵活的左边距和上边距`setFrame:`，结果将是相同的。`autoresizingMask`

在生成的动画中，蓝色方块按照我的意图“粘”在角落，但红色方块完全忽略了动画的时间和缓动。我认为这是因为 Core Animation 的隐式动画特性，这个特性在很多场合都对我有帮助。

以下是动画序列中的一些屏幕截图，说明了两个方块的异步性：

![动画中间的三个屏幕截图，其中红色方块不在“正确”位置](../Images/af60fb5e9fd968ca9ca08fc3131898e4.png)

关于这个问题：**有没有办法同步两个帧的变化，使红色的 CALayer 和蓝色的 UIView 都以相同的动画持续时间和缓动曲线移动，就像它们是一个视图一样粘在一起？**

PS 当然，两个正方形粘在一起所需的视觉效果可以通过多种方式实现，例如让两个图层都变为`CALayer`s 或`UIView`s，但真正问题所在的项目有一个非常正当的原因一个是 CALayer，另一个是 UIView。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T14:53:09.220

我假设您的结束位置正确，并且在动画之后视图和图层对齐。这与动画无关，只是几何。

* * *

当您更改`CALayer` *不是视图层的 a*的属性时（例如在您的情况下），它将隐式动画为其新值。要自定义此动画，您可以使用显式动画，例如基本动画。更改基本动画中的帧看起来像这样。

```
CABasicAnimation *myAnimation = [CABasicAnimation animationWithKeyPath:@"frame"];
[myAnimation setToValue:[NSValue valueWithCGRect:myNewFrame]];
[myAnimation setFromValue:[NSValue valueWithCGRect:[myLayer frame]]];
[myAnimation setDuration:1.0];
[myAnimation setTimingFunction:[CAMediaTimingFuntion functionWithName: kCAMediaTimingFunctionEaseOut]];

[myLayer setFrame:myNewFrame];
[myLayer addAnimation:myAnimation forKey:@"someKeyForMyAnimation"]; 
```

如果两个动画的时间函数和持续时间相同，那么它们应该保持对齐。

另请注意，显式动画不会更改值，并且您必须同时添加动画并设置新值（如上面的示例）

* * *

是的，有很多方法可以达到相同的效果。一个示例是让视图和图层成为同一子视图的子视图（这又是外框的子视图）。

### 编辑

您不能轻松地将 UIView 动画与显式动画分组。您也不能使用动画组（因为您将它们应用到不同的图层），但您可以使用 CATransaction：

```
[CATransaction begin];
[CATransaction setAnimationDuration:1.0];
[CATransaction setAnimationTimingFunction:[CAMediaTimingFuntion functionWithName: kCAMediaTimingFunctionEaseOut]];

// Layer animation
CABasicAnimation *myAnimation = [CABasicAnimation animationWithKeyPath:@"frame"];
[myAnimation setToValue:[NSValue valueWithCGRect:myNewFrame]];
[myAnimation setFromValue:[NSValue valueWithCGRect:[myLayer frame]]];

[myLayer setFrame:myNewFrame];
[myLayer addAnimation:myAnimation forKey:@"someKeyForMyAnimation"];

// Outer animation
CABasicAnimation *outerAnimation = [CABasicAnimation animationWithKeyPath:@"frame"];
[outerAnimation setToValue:[NSValue valueWithCGRect:myNewOuterFrame]];
[outerAnimation setFromValue:[NSValue valueWithCGRect:[outerView frame]]];

[[outerView layer] setFrame:myNewOuterFrame];
[[outerView layer] addAnimation:outerAnimation forKey:@"someKeyForMyOuterAnimation"];

[CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-07T08:52:02.983

如果你想要 David Rönnqvist 在**Swift 3.0**中的片段，这里有：

```
 CATransaction.begin()
    CATransaction.setAnimationDuration(1.0)
    CATransaction.setAnimationTimingFunction(CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut))

    // Layer animation
    let myAnimation = CABasicAnimation(keyPath: "frame");
    myAnimation.toValue = NSValue(cgRect: myNewFrame)
    myAnimation.fromValue = NSValue(cgRect: myLayer.frame)

    myLayer.frame = myNewFrame
    myLayer.add(myAnimation, forKey: "someKeyForMyAnimation")

    // Outer animation
    let outerAnimation = CABasicAnimation(keyPath: "frame")
    outerAnimation.toValue = NSValue(cgRect: myNewOuterFrame)
    outerAnimation.fromValue = NSValue(cgRect: outerView.frame)

    outerView.layer.frame = myNewOuterFrame
    outerView.layer.add(outerAnimation, forKey: "someKeyForMyOuterAnimation")

    CATransaction.commit() 
```

# php - 拆分表单提交以加快传输时间

> ID：10801423
> 
> 赞同：0
> 
> 时间：2012-05-29T14:43:49.487
> 
> 标签：php, mysql, networking, cross-domain

我有一个简单的 CRM 系统，允许销售人员输入客户信息并上传适当的文件来创建项目。

该系统已经托管在云中。但是办公室的互联网上传速度是可怕的。一个文件可能需要 15 分钟或更长时间才能完成，从而导致销售流程出现瓶颈。

升级我们的办公室互联网不是一种选择；还有什么其他好的解决方案？

我建议将项目提交表分成两部分。项目信息字段直接发布到我们的云服务器 webapp 并存储在适当的 DB 表中，文件提交实际上将提交到具有简单 DB 和 api 的 LAN 服务器，这将允许云托管服务器 webapp 与之通信以检索如果再次需要该文件，请通过下载链接。需要为此设置制定详细信息。但总的来说，这是我想做的。

这是解决这个上传缓慢问题的好方法吗？我以前从来没有这样做过，所以这个实现是否也有任何障碍（跨域限制是我想到的，但我相信可以通过使用 iFrame 来解决）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:32:52.410

如果带宽是瓶颈，那么您需要一个不会占用所有带宽的解决方案。你提到你不能*升级*你的带宽 - 加入*第二个连接*怎么样？

如果没有，这些文件需要在 LAN 上停留更长时间。听起来您的计划是将文件永久保存在 LAN 上，但您可以先将它们存储在本地，然后再推送它们。

当您将文件复制到云端时，请务必压缩它们并设置速率限制（因此它们在工作时间可能占用您可用带宽的 10%）。

还要进行一些监控，以确保及时发送文件。

我希望没有人需要*下载*这些文件！:(

# java - JSF - 从 Java 代码重新加载页面（Java EE + RESTful）

> ID：10801424
> 
> 赞同：0
> 
> 时间：2012-05-29T14:43:53.137
> 
> 标签：java, jsf, post, web

我想通过我的 Java 代码在发布操作上刷新我的 JSF 页面：

```
 @POST @Consumes(MediaType.APPLICATION_JSON)
    public String handlePostRequest(String payload) { 
//some code

//here resfresh the JSF
     } 
```

你知道怎么做吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:47:56.643

在托管 bean 中添加一个方法。让它返回 null。用 . 调用该方法`<h:commandButton /> or <h:commandLink />`。这将刷新您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:50:00.013

这很简单，要创建 JSF 页面，您需要以下内容：

1.  `<h:form />`：包含您的页面代码
2.  `<h:commandButton />`: 将请求发布到服务器

现在刷新：
以下列方式声明您的按钮：

```
<h:commandButton action="#{myBean.refreshAction}" value="Refresh Action" /> 
```

当`MyBean#refreshAction`方法向服务器返回一个空字符串时，即触发命令按钮的事件时，页面将被刷新。

# jquery - jQuery 脚本有时会被假设值为 0 的变量破坏

> ID：10801427
> 
> 赞同：1
> 
> 时间：2012-05-29T14:43:58.867
> 
> 标签：jquery, html, css, ajax

我的问题是有时我的脚本不起作用。我知道问题，但我无法解决。下面，我的脚本。

```
$(document).ready(function(){
/* Cria UL e popula de LI de acordo com o HTML do controle da Vtex*/
$('.slider-nav').after('<ul class="slider-ul"></ul>');
/* clona elementos se tiver menos que 3 */
var tamArray = $('#slider .box-banner').length;
if (tamArray < 3) {
    for (ij=1; ij<=(3-tamArray); ij++){
        $('#slider .box-banner:last').clone().appendTo('#slider');
    }
}
$('#slider .box-banner').each(function(){
    href = $(this).find('a').attr('href');
    title = $(this).find('a').attr('title');
    src = $(this).find('img').attr('src');
    $('ul.slider-ul').append('<li><a href="'+href+'" title="'+title+'"><img src="'+src+'"/></a></li>');
});
$('.slider-ul').wrap('<div class="slider-ul-wrapper" />');
/* Calcula offset do left pra colocar um banner no meio */
var tamJanela = $(window).width();
var tamImagem = $('#slider .slider-ul:first img').width();
var leftOffset = tamImagem - (tamJanela-tamImagem)/2;
$('.slider-ul').css('left',-leftOffset);
/* Clique em #nav-dir */
$('#nav-dir').click(function(){
    $('.slider-ul li:last').clone().addClass('clone').insertBefore('.slider-ul li:first');
    var soma = -(leftOffset)-tamImagem;
    $('.slider-ul').css('left',soma);
    $('.slider-ul').animate({
        left: '+='+tamImagem+''
        //left: "'+="+tamImagem+"'"
    }, 1000, 'swing', function(){
        $('.slider-ul .clone').remove();
        $('.slider-ul li:last').insertBefore('.slider-ul li:first');
        $('.slider-ul').removeAttr('style');
        $('.slider-ul').css('left',-leftOffset);
    });
});
/* Clique em #nav-esq */
$('#nav-esq').click(function(){
    $('.slider-ul li:first').clone().addClass('clone').insertAfter('.slider-ul li:last');
    //var soma = -tamImagem;
    //$('.slider-ul').css('left',soma);
    $('.slider-ul').animate({
        left: '-='+tamImagem+''
        //left: "'+="+tamImagem+"'"
    }, 1000, 'swing', function(){
        $('.slider-ul .clone').remove();
        $('.slider-ul li:first').insertAfter('.slider-ul li:last');
        $('.slider-ul').removeAttr('style');
        $('.slider-ul').css('left',-leftOffset);
    });
});
}); 
```

以及相关的 HTML：

```
<div class="slider-ul-wrapper">
    <ul class="slider-ul" style="left: 671.5px">
        <li>
            <a href="undefined" title>
                <img src="...." />
            </a>
        </li>
        .
        .
        .
    </ul>
</div> 
```

`tamImagem`将元素宽度计算为 0时会出现问题`img`。然后它将错误的值传递给`leftOffset`value 并破坏表达式。有时，经过几次刷新后，它就可以工作了。有时它不会。问题是什么？它返回 0 是否是因为元素尚未准备好？但是为什么不准备好呢？

此外，我不太了解后台运行的某种 Ajax 请求。请求完成后，页面上的每个图像都会收到一个`complete`类。我应该等到`img`元素是`complete`吗？我怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:47:46.600

如果没有在 html 中明确给出图像的宽度（如`width="xx"`），则通常在文档完全加载之前不可用，即`$(window).load()`.

在`.ready()`所有标签都被读取和解析的时候，任何与元素维度有关的属性都可以被读取。如果此时尚未设置这些属性，则在从其源加载相应对象后，它们将变为可用。

如果您想在加载特定图像时直接收到通知（而不是等待`.load()`），您可以附加一个`.onload()`到它；但不能保证，因为那时图像加载已经开始，在某些情况下，你可能来不及捕捉它:)

# javascript - Jquery Slider Rotates但发生了一些奇怪的事情

> ID：10801432
> 
> 赞同：0
> 
> 时间：2012-05-29T14:44:11.530
> 
> 标签：javascript, jquery, html, css, orbit

我有一个小问题，我一直在研究这个基于[http://www.zurb.com/playground/orbit-jquery-image-slider](http://www.zurb.com/playground/orbit-jquery-image-slider) (Orbit Slider) 和 Carousel 插件的滑块。您可以在我的测试页面[http://www.unscspartanteamomega.com/localh0st#](http://www.unscspartanteamomega.com/localh0st#)上查看结果。如您所见，图像正在旋转，但出于某种奇怪的原因，这只适用于 Firefox。在 Chrome 中，图像在背景后面旋转，我不知道为什么，标题也没有旋转。以前有人发生过这种情况吗？如果有人知道可能的解决方案，请告诉我。

这是我用来调用插件的代码

```
$(window).load(function() {
     $('#carousel').orbit();
 }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:32:20.260

好的，这是我给你的建议。检查`js`您页面上的这些文件。

*   相机模组
*   jquery.easing.1.3
*   jquery.min
*   jquery.mobile.customized.min

他们有一些错误`unexpected tokens ('<')`，比如你的主 html 文件的脚本也包含一个错误`#object has no method`。试着先纠正这些。不是很严重的错误只需花一些时间在上面，使用 Web 开发人员工具仔细监控它们。快乐编码:)

# java - 如何构造布尔值并使用 java/oracle 存储过程访问它们

> ID：10801433
> 
> 赞同：5
> 
> 时间：2012-05-29T14:44:21.287
> 
> 标签：java, sql, oracle, jdbc, database

第一次使用Oracle，正常使用SQLServer，遇到了一个奇怪的问题。我正在为这个问题撕毁我的头发，并尝试随机的东西，并且碰巧起作用了。

所以最初，我只有两个参数，一切正常。然后我希望添加一个布尔值以允许在我的存储过程中使用多个路径。我在我的数据库环境中对其进行了测试，没有错误，我得到了我期望的数据。然后我在我的 java 代码中添加几行来提取这些数据，突然我得到“ `wrong number or types of parameters`”错误。

在尝试了几件事之后，我只是将 Oracle 中的类型从 Boolean 更改为 Int，让 java 代码仍然为“ `setBoolean(3, true)`”，一切正常。

所以我的问题是：

1) 我在 java 端用这个 setBoolean() 发送什么，Oracle 得到了什么？

2) 之前它是 " 类型时期望什么`Boolean`，为什么这与 " 不兼容`setBoolean()`？"

3) 为了提高速度，我应该将 Oracle 类型 int 与 java setBoolean() 或其他组合（如 Oracle Varchar 和 setString()）一起使用吗？

**爪哇：**

```
String jobquery =   "{call PKG_TEST.GET_PLAN_DATA(?,?,?)}";  
            CallableStatement callStmt = con.prepareCall(jobquery);

            callStmt.setString(1,"15105");
            callStmt.setString(2, "");
            callStmt.setBoolean(3, true); 
```

**Oracle SP（以前）：**

```
PROCEDURE GET_PLAN_DATA(
        NAME_N_IN IN VARCHAR2,
        TYPE_C_IN IN VARCHAR2 DEFAULT NULL,
        ONLY_RESTRICTIONS_IN IN BOOLEAN DEFAULT FALSE) 
```

**甲骨文改为：**

```
 PROCEDURE GET_PLAN_DATA(
            NAME_N_IN IN VARCHAR2,
            TYPE_C_IN IN VARCHAR2 DEFAULT NULL,
            ONLY_RESTRICTIONS_IN IN INT DEFAULT 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:02:40.143

*1) 我在 java 端用这个 setBoolean() 发送什么，Oracle 得到了什么？*

来自 Java[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/CallableStatement.html#setBoolean%28java.lang.String,%20boolean%29)：

`Sets the designated parameter to the given Java boolean value. The driver converts this to an SQL BIT value when it sends it to the database.`

所以`Boolean`值被转换成一个`BIT`值。

*2) 之前它的类型是什么`Boolean`，为什么它与 setBoolean() 不兼容？”*

如前所述，它将它转换为一个`BIT`值，所以它期待同样的事情。以前，oracle 也存在一个`Boolean`变量。但是正如您所说，*在尝试了几件事之后，我只是将 Oracle 中的类型从 Boolean 更改为 Int，而 Java 代码仍然为“setBoolean(3, true)”，一切正常。*，原因是，oracle 不再有布尔变量。为什么？阅读[本文](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:6263249199595)以深入讨论该问题。

*3) 为了提高速度，我应该将 Oracle 类型 int 与 java setBoolean() 或其他组合（如 Oracle Varchar 和 setString()）一起使用吗？*

我会说`varchar`和`setString()`。原因，`setString()`方法[将](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/CallableStatement.html#setString%28java.lang.String,%20java.lang.String%29)其转换为`varchar`. 因此，与从到到的`setBoolean()`和相比，您可以节省时间。`int``Boolean``BIT``int`

* * *

**编辑**

只是从上述链接之一复制粘贴的内容，以进一步澄清此事：

嗨汤姆，我有一个关于布尔数据类型的问题。

下面是我们的客户编写的 SP，我们需要将其与我们的应用程序集成。

```
PROCEDURE sp_xxxx_map (
                ic_opt_number       IN  VARCHAR2,
                in_cast_number    IN  NUMBER,
                in_tyre_amount          IN  NUMBER,
                ob_is_valid             OUT BOOLEAN,
                ob_is_obgr_obgt_valid   OUT BOOLEAN, 
```

--------------- 更多参数....

在整合上述内容时，除了布尔 OUT 参数之外，一切都很好。我认为（如果错了，请纠正我）java（JDBC 类）中没有 SQL 数据类型来捕获
“ob_is_valid”、“ob_is_obgr_obgt_valid”参数。怎么可能去解决这个问题。一个想法是：我可以编写另一个 SP（比如 SP1），它将调用上述 SP 并将布尔类型转换为 CHAR，例如“Y”代表真，“N”代表假。最后我让应用程序调用新创建的 SP1。

跟进 2003 年 2 月 5 日 - 上午 9 点中央时区：

只需准备并执行：

```
declare
   b1 boolean;
   b2 boolean;
   n1 number := 0;
   n2 number := 0; 
begin
   sp_xxxx_map( ?, ?, ?, b1, b2 );
   if (b1) then n1 := 1; end if;
   if (b2) then n2 := 1; end if;
   ? := n1;
   ? := n2;
end; 
```

从 jdbc 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-09T16:06:35.453

存储过程输入中不支持布尔值 这是 JDBC 驱动程序的已知限制

> JDBC 驱动程序不支持将 BOOLEAN 参数传递给 PL/SQL 存储过程。

[https://docs.oracle.com/cd/B28359_01/java.111/b31224/apxtblsh.htm#i1005380](https://docs.oracle.com/cd/B28359_01/java.111/b31224/apxtblsh.htm#i1005380)

# lookup - Dynamics AX 抑制两列替换键中的列

> ID：10801434
> 
> 赞同：0
> 
> 时间：2012-05-29T14:44:21.510
> 
> 标签：lookup, axapta, replace, dynamics-ax-2012

我正在使用替换键来清理带有外键的表单。单列替换效果很好。多列替换键工作正常，但如果该索引中的这些列之一不适合用户查看，则表示效果不佳。

有没有办法抑制多列替换键中一列或多列的显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:16:49.247

您是否尝试过使该字段不可见？

但是，如果用户不能输入所有字段，如何创建关系呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:14:50.643

最好和最简单的方法是转到表单上的参考组控件并选择要用于显示字段的 ReferenceFieldGroup。（选择您自己创建的仅包含所需字段的组。自动识别是此控件的默认设置）

另一种方法是使用自定义参考表查找，如以下链接的示例所示。

[在参考中显示过滤数据](http://yasirnedian.blogspot.com/2012/10/x-code-to-modifyset-properties-of-aot.html)

他们在那里构建了一个自定义查找来过滤事物，但是您可以使用它来指定要在查找中看到的字段。（如果您还需要特殊过滤器，建议使用此方法，...）

但请记住 Jan Kjeldsen 所说的！：如果他们没有所有字段，他们将如何创建关系...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T08:00:48.553

我有一个类似的案例。例如，如果您有三个表：

```
attribute 1
attribute 2
attribute 3 
```

`table 2`具有链接到的属性`attribute 1`和`table 3`链接到的属性`table 2`。所以你有了：

```
attribute 1 with rec id & code
attribute2 with recid code and attribute 1 recid
attribute2 with recid code and attribute 2 recid 
```

您为此创建了一个替换密钥，但以您不想看到的形式

```
attribute one: attribute1
attribute two: attribue 1 attribute 2
attribute three: attribute 1 attribue 2 attribute 3 
```

所以你想让“链接”字段不可见。我通过将自动识别组更改为 AutoPopulate “No” 并删除了所有我不想看到的字段来做到这一点。

# mysql - 如何从html页面中删除结果集

> ID：10801435
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:44:24.167
> 
> 标签：mysql, html, perl

我有一个 MySQL 数据库，以及一些用于生成网页的 perl 脚本。

在 Html 页面链接可用，

例如-

Customer_link =>（调用 customers.pl）查询已执行 - 从客户中选择 *。

现在还有一个链接说 Customer_in_mumbai => 它应该删除所有城市不是孟买的客户。

如何做到这一点？我是否需要使用 where 子句或任何其他方式再次执行查询，以便我可以简单地删除城市不是孟买的客户？

另外，如果我需要再次执行查询，是否需要再编写一个 perl 文件，如果不需要，我该如何使用同一个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:48:42.840

加载/显示后，您可以使用 Javascript 在客户端进行操作。在没有 Javascript 的情况下下载页面后，您无法在服务器端更改页面。

您的其余问题表明对动态网页的生成方式缺乏了解。您可以使用标准 HTTP 查询变量来修改脚本的操作方式，从而拥有一个页面来完成所有这些工作。例如

```
http://example.com/yourscript.pl?remove=mumbai 
```

然后让 Perl 检索该`remove`值并使用它来修改数据库查询的运行方式。但是向您展示这超出了本网站的范围 - 我们不是来教您的，只是帮助解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:49:57.893

从您的问题来看，您似乎只想为用户暂时从页面中删除它。您可以通过使用 Javascript 删除带有 mumbai 作为值的行来实现这一点。这应该可以节省您的服务器端处理。使用像 JQuery 这样的库来轻松实现它。

# c# - 使用自动完成和 Ajax 进行搜索

> ID：10801436
> 
> 赞同：2
> 
> 时间：2012-05-29T14:44:30.443
> 
> 标签：c#, asp.net, sql, ajax, autocomplete

我想像他们一样从谷歌搜索。

我已经做到了这一点，我可以使用网络服务在我的文本框中显示数据库中的所有数据。那是我的代码：

**Webform.aspx**

```
<%--**Start Search**--%>
<asp:ScriptManager ID="ScriptManager1" runat="server">
    <Services><asp:ServiceReference Path="~/WebService.asmx" /></Services>
</asp:ScriptManager>
<%--Search-Textbox--%>
<asp:TextBox runat="server" ID="txtSearchInput" Width="100%" />
<asp:Button ID="btnSearch" runat="server" Text="Suche" onclick="btnSearch_Click" />
<%--Autocomplete (Ajax)--%>
<asp:AutoCompleteExtender ID="AutoComplete1" runat="server" TargetControlID="txtSearchInput"
   ServiceMethod="GetNames" ServicePath="~/WebService.asmx" MinimumPrefixLength="1"  
   EnableCaching="true" CompletionInterval="1000" CompletionSetCount="20">
</asp:AutoCompleteExtender>
<%--**End Search**--%> 
```

**网络服务.asmx**

```
[WebMethod]
public string[] GetNames(string prefixText, int count)
{
    List<string> items = new List<string>(count);
    DataSet ds = new DataSet();

    string cs = ConfigurationManager.ConnectionStrings["CSLinker"].ConnectionString;

    using (SqlConnection connection = new SqlConnection(cs))
    {
        string sql = "SELECT Name FROM tabProjects WHERE Name LIKE '" + prefixText + "%' UNION all SELECT Name FROM tabLinks WHERE Name LIKE '" + prefixText + "%'";
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = new SqlCommand(sql, connection);
        adapter.Fill(ds);
    }

    foreach (DataRow dr in ds.Tables[0].Rows)
    {
        items.Add(dr["Name"].ToString());
    }
    return items.ToArray();
} 
```

我现在的问题是，我只有数据库中的名称。但是对于搜索，我还需要 ID。有人可以说我，我如何在不显示在文本表单中的情况下也可以查询 ID？我希望你能理解我的问题。我的英语不太好...

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:54:30.373

为什么不直接将项目名称作为参数而不是 probject ID 传递？如果您使用的是 Response.Redirect 我假设用户从选择列表中选择一个项目，并且后面的代码处理某种事件：

```
 public void onProjectSelected()
    {
        string cs = ConfigurationManager.ConnectionStrings["CSLinker"].ConnectionString;
        string projectName = txtSearchInput.Text;
        int projectID = 0;
        using (SqlConnection connection = new SqlConnection(cs))
        {
            using (SqlCommand command = new SqlCommand("SELECT ProjectID FROM TabProjects WHERE Name = @Name", connection))
            {
                command.Parameters.Add(new SqlParameter("@Name", SqlDbType.VarChar, 50)).Value = projectName;
                connection.Open();
                if (int.TryParse(command.ExecuteScalar().ToString(), out projectID))
                {
                    Response.Redirect(string.Format("?ProjectID={0}", projectID));
                }
                connection.Close();
            }
        }
        //Handle project not found events here
    } 
```

还要**使用参数化查询**，否则[SQL 注入](http://bobby-tables.com/)可能会毁了你的一天！

如果我在您的文本框中输入“这是一个测试”，您最终会得到一个无效的 SQL 语句，因为我使用的撇号将导致以下 SQL。

```
SELECT Name FROM tabProjects WHERE Name LIKE 'It's a test%' 
```

对于使用您网站的任何人来说，这显然不会运行并且不会是一个很好的用户体验。更严重的是，如果我在您页面上的文本框中键入内容，`'; DROP TABLE TabProjects --`您可能会发现，根据分配给 CSLinker 连接字符串的权限，您不再拥有 tabProjects 表，因为这是运行的 SQL：

```
SELECT Name FROM tabProjects WHERE Name LIKE ''; DROP TABLE tabProjects -- %' 
```

你应该为你的网络方法使用这样的东西：

```
 [WebMethod]
    public string[] GetNames(string prefixText, int count)
    {
        List<string> items = new List<string>();
        string cs = ConfigurationManager.ConnectionStrings["CSLinker"].ConnectionString;
        using (SqlConnection connection = new SqlConnection(cs))
        {
            using (SqlCommand command = new SqlCommand("SET ROWCOUNT @Count SELECT Name FROM TabProjects WHERE Name LIKE @Name + '%'", connection))
            {
                command.Parameters.Add(new SqlParameter("@Name", SqlDbType.VarChar, 50)).Value = prefixText;
                command.Parameters.Add(new SqlParameter("@Count", SqlDbType.Int, 8)).Value = count;
                connection.Open();
                using (SqlDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        items.Add(reader.GetString(0));
                    }
                }
                connection.Close();
            }
        }
        return items.ToArray();
    } 
```

# arrays - 确定2个对应集合的类型

> ID：10801437
> 
> 赞同：3
> 
> 时间：2012-05-29T14:44:36.183
> 
> 标签：arrays, list, types, ocaml

我已经声明了一个变量`al : 'a list`、一个函数`a_to_b : 'a -> 'b`和一个函数`score : 'b -> int`。然后`let bl = List.map a_to_b al in ...`在下面的代码中定义`bl : 'b list`.

```
let find_best (bl : 'b list) : 'b =
  let score_best, b_best = List.fold_left
    (fun (score_old, b_old) b_new ->
       let score_new = score b_new in
       if score_old < score_new then 
          (score_new, b_new) else 
          (score_old, b_old))
    (score (List.hd bl), List.hd bl) bl in
  b_best

let bl = List.map a_to_b al in
find_best bl 
```

这段代码找到了`b_best`它`score`最大的一个。但是我的一个需求是我也想知道，这是通过什么`a_best`生成的，没有办法。例如，如果是 中的第 4 个元素，我认为第4 个元素就是我想要得到的。`b_best``a_to_b``b_best``bl``al`

我不想在函数中添加更多参数`find_best`。我的问题是，是否有一种传统的方法来定义 and 的类型`al`，`bl`以便于追踪`a_best`，`b_best`例如，使用`array`而不是`list`？或转换为`array`然后转换`list`回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:56:20.990

你可以这样做：

```
let abl = List.combine bl al in (* ('b * 'a) list *)
let a_best = List.assoc b_best abl (* returns the value associated to b_best *) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:12:00.747

在许多情况下，我只是定义`b_best`获取一对列表并返回一对。它在对的第二个元素中是多态的：

```
let find_best (bl : ('b * 'a) list) : 'b * 'a =
  let score_best, ba_best = List.fold_left
    (fun (score_old, (b_old, a_old)) (b_new, a_new) ->
       let score_new = score b_new in
       if score_old < score_new then 
          (score_new, (b_new, a_new)) else 
          (score_old, (b_old, a_old)))
    (score (List.hd bl), List.hd bl) bl in
  ba_best 
```

（或者您可以将其定义为采用两个列表，但这似乎更不像您所要求的。）

在您声明的约束下，`find_best`无法访问`al`，因此您似乎必须返回一个索引，然后使用它`List.nth`来检索`al`. 如果您需要对长列表进行大量操作，`List.nth`可能会太慢，因此您可能希望使用数组来`al`.

# c# - DataGrid WPF 中的筛选器不起作用

> ID：10801440
> 
> 赞同：0
> 
> 时间：2012-05-29T14:44:56.067
> 
> 标签：c#, wpf, data-binding, datagrid, filtering

我的应用程序有一个过滤器功能，它使用复选框来过滤掉某些绑定到数据网格的可观察集合项。我根本没有收到错误，过滤器的功能不像我想要的那样。这是它的 xaml 代码：

```
<Window.Resources>
    <CollectionViewSource x:Key="jobItemViewSource" d:DesignSource="{d:DesignInstance my:JobItem, CreateList=True}"/>
</Window.Resources>

<!--
 Irrelevant Content
  -->

<CheckBox Content="Show Active Jobs" Name="actJobsCheckBox" Grid.Column="1" Grid.ColumnSpan="2"  Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" Checked="AddAFiltering" Unchecked="RemoveAFiltering" />
                <CheckBox Content="Show Completed Jobs" Name="compJobsCheckBox" Grid.Column="3" Grid.ColumnSpan="3"  Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" Checked="AddCFiltering" Unchecked="RemoveCFiltering"/>

                <DataGrid Grid.Row="4" Grid.ColumnSpan="6" LoadingRow="jobItemDataGrid_LoadingRow" ItemsSource="{Binding}" Name="jobItemDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" IsReadOnly="True" IsSynchronizedWithCurrentItem="True" AutoGenerateColumns="False" Grid.RowSpan="2">
                    <DataGrid.Columns>
                        <DataGridTextColumn x:Name="workOrderNoColumn" Binding="{Binding Path=WorkOrderNo}" Header="Work Order No." Width="75" />
                        <DataGridTextColumn x:Name="assigneeColumn" Binding="{Binding Path=PrimaryAssignee}" Header="Assignee" Width="80" />
                        <DataGridTextColumn x:Name="dateReceivedColumn" Binding="{Binding Path=DateReceived}" Header="Date Received" Width="90" />
                        <DataGridTextColumn x:Name="dueDateColumn" Binding="{Binding Path=DueDate}" Header="Due Date" Width="90" />
                        <DataGridTextColumn x:Name="statusColumn" Binding="{Binding Path=Status}" Header="Status" Width="70" />
                    </DataGrid.Columns>

                </DataGrid> 
```

然后这是我为后面的代码编写的内容：

```
public AdminView(Employee currEmployee)
    {
        this.Title = "Administrator View - " + currEmployee.Name;
        InitializeComponent();
        jobItemDataGrid.DataContext = JobItemList;
        jobItemViewSource = (CollectionViewSource)(this.Resources["jobItemViewSource"]);

        LoadDummies();

    }

private void AddAFiltering(object sender, RoutedEventArgs args)
    {
        jobItemViewSource.Filter += new FilterEventHandler(ActiveJobs_Filter);
    }

    private void RemoveAFiltering(object sender, RoutedEventArgs args)
    {
        jobItemViewSource.Filter -= new FilterEventHandler(ActiveJobs_Filter);
    }

    private void AddCFiltering(object sender, RoutedEventArgs args)
    {
        jobItemViewSource.Filter += new FilterEventHandler(CompletedJobs_Filter);
    }

    private void RemoveCFiltering(object sender, RoutedEventArgs args)
    {
        jobItemViewSource.Filter -= new FilterEventHandler(CompletedJobs_Filter);
    }

    private void ActiveJobs_Filter(object sender, FilterEventArgs e)
    {
        JobItem currJob = e.Item as JobItem;
        if (currJob != null)
        {
            if (!currJob.Status.Equals("Completed"))
            {
                e.Accepted = true;
            }
            else
            {
                e.Accepted = false;
            }
        }
    }

    private void CompletedJobs_Filter(object sender, FilterEventArgs e)
    {
        JobItem currJob = e.Item as JobItem;
        if (currJob != null)
        {
            if (currJob.Status.Equals("Completed"))
            {
                e.Accepted = true;
            }
            else
            {
                e.Accepted = false;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:24:17.887

我不确定如何使用您的方法修复它。但这里是我将如何完成这项任务。创建一个名为 FilteredJobItemList 的属性以绑定到而不是主列表。将您的复选框绑定到属性 IsActiveChecked/IsCompletedChecked。在这些设置器中，为您的 FilteredJobItemList 引发 propertychanged 事件。

```
public ObservableCollection<JobItem> FilteredJobItemList
{
   get
   {
      if ((IsActiveChecked) && (!IsCompletedChecked))
      {
          return JobItemList.Where(x => x.status != "Completed");
      }
      else if ((!IsActiveChecked) && (IsCompletedChecked))
      {
          return JobItemList.Where(x => x.status == "Completed");
      }
      else
      {
          return JobItemList;
      }
   }
}

public bool IsActiveChecked
{
   get
   {
      return _isActiveChecked;
   }
   set
   {
      if (value != _isActiveChecked)
      {
          _isActiveChecked = value;
          OnPropertyChanged("IsActiveChecked");
          OnPropertyChanged("FilteredJobItemList");
      }
   }
} 

public bool IsCompletedChecked
{
   get
   {
      return _isCompletedChecked;
   }
   set
   {
      if (value != _isCompletedChecked)
      {
          _isCompletedChecked = value;
          OnPropertyChanged("IsCompletedChecked");
          OnPropertyChanged("FilteredJobItemList");
      }
   }
} 
```

# c - 使用 exec、c 程序从另一个 .c 读取管道

> ID：10801447
> 
> 赞同：0
> 
> 时间：2012-05-29T14:45:13.703
> 
> 标签：c, exec, fork, pipe

我从另一个.c 通过 execl 创建的管道读取时遇到问题！我已经尝试了很多不同的方法，但我仍然找不到解决方案。如果您能帮助我，我将不胜感激！

这是第一个代码：

... for 循环之前的一些其他代码...

```
for (counter=0; counter<arithmos; counter++)
   {
       if (pipe(pinakas[counter]) == -1)
       {
           perror("pipe");
           exit(1);
       }
       sem_wait(&sima);
       strcpy(buffer,queueHead(q));
       write(fd[WRITE], buffer, strlen(buffer));
       queueRemove(&q);
       nodes--;
       sem_post(&sima);
       pid = fork();
       if (pid < 0)
       {
           perror("fork error");
           exit(1);
       }
       if (pid == 0)
       {
            execl("./paidi","paidi", (char*)pinakas[counter], (char*)NULL);
            exit(1);
       }
       if (pid > 0)
       {

          printf ("I am the parent with pid %d\n", getpid());
          wait(NULL);

       }
   } 
```

这就是我的孩子所做的...

包括等等等等...

```
int main(int argc, char **argv)
 {
    //char fd[2];
    int *fd = (int*) argv[1];
    int nbytes;
    char buffer[256];
    char *command;
    int i;

    for (i=0; i<256; i++)
    {
        buffer[i] = '\0';
    }

    printf("test2 %d\n",fd[READ]);
    //close(fd[WRITE]);
    printf("test3\n");
    read(fd[READ], buffer, 256);
    printf("test4\n");
    close(fd[READ]);
    printf("test5\n");
    printf("Received url : %s", buffer );
    printf("test6\n");
    //sprintf(command,"wget %zd", url);
    //system(command);
    printf("I am a child with pid %d\n", getpid());
    return 0;
} 
```

好像我在 execl 上做错了什么。我正在尝试将指针作为参数传递，并且我有一个管道：地址错误。我也用字符串尝试过，但什么都没有......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:02:00.470

[`execve(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)为加载的可执行文件创建一个全新的内存空间，您不能从以前的程序传递指针，它们在新的内存空间中没有任何意义。

这里经过验证的真正方法是将孩子的标准输入（文件描述符0）替换为在using[`pipe(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)之后[`fork(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)但之前的读端。[`execve(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)[`dup2(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/dup2.2.html)

# c# - IAutoMappingOverride.Override 未被调用

> ID：10801448
> 
> 赞同：0
> 
> 时间：2012-05-29T14:45:14.450
> 
> 标签：c#, nhibernate, fluent-nhibernate

我似乎无法运行 FluentNHibernate 覆盖。这是我的配置方法

```
private static void Configure()
{
    if (_configuration != null) return;

    _configuration = new Configuration();
    _configuration.Configure();
    _configuration
        .AddAssembly(typeof(IFoo).Assembly)
        .AddAssembly(OtherDataAssembly);
    var autoPersistenceModel = AutoMap
        .AssemblyOf<IFoo>()
        .AddEntityAssembly(OtherDataAssembly)
        .Conventions.AddAssembly(OtherDataAssembly)
        .Conventions.Add(DefaultCascade.None())
        .UseOverridesFromAssemblyOf<IFoo>()
        .UseOverridesFromAssembly(OtherDataAssembly)
        .OverrideAll(map => map.IgnoreProperty("IsIgnored"))
        .Where(IsTypeMatch);
    _sessionFactory = Fluently
        .Configure(Configuration)
        .Mappings(m => m.AutoMappings
            .Add(autoPersistenceModel))
        .BuildSessionFactory();
} 
```

这是我的覆盖类

```
public class FooOverride : IAutoMappingOverride<IFoo>
{
    public void Override(AutoMapping<IFoo> mapping)
    {
        mapping.Not.LazyLoad();
        mapping.HasManyToMany(x => x.Bar).Table("FooBar");
    }
} 
```

我在`Override()`方法中放置的断点在调试时永远不会被命中，即使在重新启动 IIS 时也是如此。我如何让它运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:25:05.337

覆盖仅在完全相同的类上运行，而不是可分配给 的泛型类型参数中的类的类`IAutoMappingOverride`。

更新：

我现在能想到的唯一其他选择是：

*   让 FooOverride 为每个实现 IFoo 的类实现几个 IAuotMappingOverride<>
*   使用反射自己添加覆盖。未测试：

    ```
    var overrideMethod = typeof(AutoPersistenceModel).GetMethod("Override");

    foreach (var type in typeof(IFoo).Assembly)
    {
        if (typeof(IFoo).IsAssignableFrom(type))
        {
            overrideMethod.MakeGenericMethod(type).Invoke(new Action<IFoo>(m => m.HasMayToMany(...)));
        }
    } 
    ```

# java - 如何使用 java Selenium WebDriver 下载文件？

> ID：10801453
> 
> 赞同：1
> 
> 时间：2012-05-29T14:45:23.293
> 
> 标签：java, selenium, webdriver

我在 Java 6 中使用 Selenium 2.21.0。如何使用 Selenium WebDriver API 下载网页上的文件？也就是说，有一个链接会导致 Excel 文件的下载开始。我想知道如何启动该下载，确定它何时完成，然后找出文件在我的本地系统上下载到的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-24T18:31:30.343

单击任何链接下载文件后，它取决于浏览器的行为，例如 Chrome 行为：默认情况下，只要用户单击任何文件的链接，它就会开始下载文件。IE 行为：IE 在窗口底部显示一个栏，并显示保存或取消文件下载的选项。FireFox 行为：这将显示一个对话框窗口并显示保存或取消文件下载的选项。 **所以这可以在 FireFox Profile 的帮助下实现。并且在下载任何文件之前，您必须将文件的 MIME 类型传递给 FireFox 配置文件。** 一些常用的 MIME 类型包括： 文本文件 (.txt) – 文本/纯 PDF 文件 (.pdf) – 应用程序/pdf CSV 文件 (.csv) – 文本/csv MS Excel 文件 (.xlsx) – 应用程序/vnd .openxmlformats-officedocument.spreadsheetml.sheet MS word 文件 (.docx) – application/vnd.openxmlformats-officedocument.wordprocessingml.document

**这是代码：**

```
 import org.openqa.selenium.By;
    import org.openqa.selenium.firefox.FirefoxDriver;
    import org.openqa.selenium.firefox.FirefoxProfile;

    public class DownloadFiles {

    public static void main(String[] args) throws InterruptedException {
    //Create FireFox Profile object
    FirefoxProfile p = new FirefoxProfile();

    //Set Location to store files after downloading.
    profile.setPreference("browser.download.folderList", 2);

   //Set preference not to file confirmation dialogue
    profile.setPreference("browser.helperApps.neverAsk.saveToDisk", 
        "application/vnd.openxmlformats-
        officedocument.spreadsheetml.sheet"); 

  // Specify the local system path where to download
     p.setPreference("browser.download.dir", "D:\\downloads");
  // Pass Profile parameters in Firefox browser
    FirefoxDriver driver = new FirefoxDriver(profile);  

    // Open APP to download application
    driver.get("http://url");

    // Click to download 
    driver.findElement(By.xpath("//html[@attribute='value']")).click();

    Thread.sleep(5000);

    driver.close(); 
```

希望它能解决您的疑问。快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-25T14:25:23.020

我特别关注 Firefox 浏览器，当访问者点击任何下载链接时，您可以使用下载选项附带弹出选项的地方。它显示了两个按钮和两个单选按钮，让我们可以选择保存并直接打开文件，而无需事后下载，如果我们发现文件有用，我们可以通过 Firefox 浏览器上方工具栏上的下载图标明确下载。所以你可以执行以下步骤

1) 点击下载链接

```
WebDriver driver = new FirefoxDriver();

driver.findElement(By.linkText(“somelink”)).click(); 
```

上面的代码可以帮助 WebDriver 识别对象并执行上面提到的动作

2) 单击下载链接后，Firefox 浏览器将弹出一个下载对话框，其中包含多个选项，例如保存单选按钮、打开单选按钮、确定按钮、取消按钮，您可以使用 Robot 类或WebDriver 喜欢

```
Robot r = new Robot();

r.KeyPress(KeyEvent.VK_TAB); 
```

您可以多次使用上述代码来按下选项卡按钮

```
r.KeyRelease(KeyEvent.VK_TAB); 
```

你必须释放按下的键

最后执行输入

```
r.KeyPress(KeyEvent.VK_ENTER); 
```

就是这样，当按下下载链接时，它将帮助您下载对象

希望对你有帮助

# php - jQuery ajax 不传递数据 JSON 值

> ID：10801461
> 
> 赞同：0
> 
> 时间：2012-05-29T14:46:09.357
> 
> 标签：php, javascript, jquery, json

我在使用 jQuery Ajax 函数和 PHP 时遇到了一些问题。

我正在使用以下代码检查 PHP`nav`中变量中键的存在：`$_REQUEST`

```
if ($_REQUEST['nav']) {
    // do something
} else {
    echo 'Please specify NAV.';
} 
```

然而，上面的表达式*永远不会*计算，因为`nav`它永远不会传递给它，并且总是输出“请指定 NAV”。

```
console.log('paramList: ' + paramList);

$.ajax({
    type: 'POST',
    url: '/admin/nav_builder/edit.php?act=save&nav_id=<?php echo $nav_id; ?>',
    data: {'nav':paramList},
    dataType: 'json',
    error: function(xhr, err) {                             
        loadLayout();
        hideLoader();
        hideLoaderPalette();
    },
    success: function(data){
        $('.errorMsg').html(data.html);
        hideLoader();
        hideLoaderPalette();
    }
}); 
```

使用 Firefox Firebug 插件，我可以看到`paramList`它确实有一个值，这是：

> 参数列表：{"section0":{"elem0":{"nav_palette":"text","nav_name":"fdgfdgdfg","nav_url":""},"elem1":{"nav_palette":"category", "c_id":"226"}}}

我一生都看不到为什么`nav`没有被传递给提供给 ajax 函数的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:03:36.143

如果“nav”参数有值，请先尝试打印。

```
echo $_REQUEST['nav']; 
```

另一种是您在一个请求中使用了两种方法。

只需尝试以下。

```
$.ajax({
    type: 'POST',
    url: '/admin/nav_builder/edit.php',
    data: {act:'save', nav_id:'<?php echo $nav_id; ?>', nav:paramList},
    dataType: 'json',
    error: function(xhr, err) {                             
        loadLayout();
        hideLoader();
        hideLoaderPalette();
    },
    success: function(data){
        $('.errorMsg').html(data.html);
        hideLoader();
        hideLoaderPalette();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:50:44.163

改用 $_POST。当您发布导航内容时。

# .net - 调试 Visual Studio 安装项目

> ID：10801463
> 
> 赞同：0
> 
> 时间：2012-05-29T14:46:11.713
> 
> 标签：.net, visual-studio-2010, debugging, deployment, setup-project

我花了几个月的时间来开发一款游戏，我决定发布一些东西供人们玩，这样我就可以获得一些反馈。但是我收到很多这样的报告：

> 我的设置有问题，在 95% 时突然变为 0% 并说安装已取消

这已在 Windows XP 和 Windows 7 上发生。

这是一个 Visual Studio 安装程序，包含游戏的主要输出和添加的所有内容。我确保所有引用的项目（除了系统和 XNA 项目）在游戏项目中都设置为“复制本地”。我已确保安装程序具有“Microsoft .net Framework 4 Client Profile (x86 and x64)”、“Microsoft XNA Framework Redistributable 4.0”作为先决条件。

什么可能导致这种情况？

如果有帮助，[这里](http://placeholder-software.co.uk/HeistGameSetup.zip)是安装程序，您可以自己尝试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:28:56.170

如果您在安装 MSI 时遇到困难，可以获取安装程序日志：

```
msiexec /i foo.msi /L*v foo.log 
```

日志文件非常冗长，有点难以阅读，但应该给你一些指导。

如果您没有直接运行 .msi（它是引导程序，或者来自 ConfigMgr 之类的推送部署），您可以打开全局 MSI 日志记录：http: [//support.microsoft.com/kb/314852](http://support.microsoft.com/kb/314852)（将其关闭当你完成时）。

# c++ - 使用 RasDial 建立 VPN 连接后不弹出网络位置向导？

> ID：10801468
> 
> 赞同：5
> 
> 时间：2012-05-29T14:46:26.680
> 
> 标签：c++, c, winapi, windows-7, vpn

我正在使用我的 VPN 建立连接

*   `RasSetEntryProperties`创建一个新的电话簿条目，
*   `RasSetCredentials`将凭据添加到该电话簿条目，
*   `RasGetEntryDialParams`获取 RasDial 的参数，
*   并`RasDial`最终建立新的连接。

经过一点麻烦，现在一切都像魅力一样。唯一的缺点是每次我像上面描述的那样连接到我的 VPN 时都会弹出讨厌的网络位置向导（至少在 Windows 7 上）。我怎样才能防止这种情况以编程方式发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:56:12.753

我有一个非最佳解决方案。该窗口仍会弹出一秒钟，但它几乎会立即关闭。使用以下[AutoIt](http://www.autoitscript.com)脚本：

```
WinWaitActive("Network Location Wizard")
WinClose ("Network Location Wizard") 
```

AutoIt 脚本可以很容易地编译成可执行文件，然后您可以在 C/C++ 代码之后添加以下行：

```
system("start Your_Autoit_script.exe"); 
```

这将在您的代码之后立即启动脚本，然后脚本将等待网络位置向导弹出（WinWaitActive），然后将其关闭。

使用这种方法有两个副作用：

1.  该窗口仍会显示很短的时间。
2.  托盘图标将出现很短的时间。

您的用户不需要安装 AutoIt，生成的可执行文件是独立的。

编辑：也看到[这个解决方案](https://stackoverflow.com/a/6589283/2347534)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T18:08:05.680

如果您从会话 0（即作为系统用户运行的 Windows 服务）调用这些函数，那么您将不会得到弹出窗口。这是因为会话 0 隔离。

如果您有足够的权限将代码作为服务运行，那么这将解决您的问题，如果没有，我认为 API 中没有任何东西可以帮助您。

# javascript - 如何管理使用 src 调用脚本的 GET 参数？

> ID：10801470
> 
> 赞同：0
> 
> 时间：2012-05-29T14:46:37.067
> 
> 标签：javascript, asp.net, ajax, get, widget

我看到许多允许这样做的小部件：

```
<script src="http://www.mywebsite.it/widget/widget.js?year=2000" type="text/javascript"></script> 
```

那一年我该如何管理？我的意思是`widget.js`，在加载时，会对`aspx`页面进行 ajax 调用。我想把它传递`year`给`aspx`页面。

我怎样才能从 .js 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:03:34.907

给你的脚本一个 id，比如“scr1”。

```
<script id="src1" src="http://www.mywebsite.it/widget/widget.js?year=2000" type="text/javascript"></script> 
```

然后你可以这样做：

```
var myScript = document.getElementById('scr1');
var src=myScript.src;
var p=/[?&]year=(\d+)/
var r=p.exec(src);
// r[1] contains the year 
```

高温高压

# asp.net-mvc - 将 .NET MVC Web 应用程序部署到 IIS 中的子目录

> ID：10801475
> 
> 赞同：2
> 
> 时间：2012-05-29T14:46:57.413
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-routing

我想在 IIS 中创建一个包含站点的 Web 应用程序，然后有一个子目录（虚拟目录或另一个 Web 应用程序），其中包含一个 .NET MVC 应用程序并根据需要配置路由。

由于我的 MVC 应用程序相当简单，我只需要一个控制器，所以我希望 URLS 像：

[http://mysite.com/mvcapp/](http://mysite.com/mvcapp/)

将映射到我的应用程序的 Home 控制器。这似乎应该很容易实现，但实际上设置它似乎会导致错误，例如：

```
HTTP Error 403.14 - Forbidden
The Web server is configured to not list the contents of this directory. 
```

如果有人对此类问题有任何经验，将非常感谢您的指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:55:20.013

听起来您没有将文件夹设置为运行正确版本的 asp.net 的应用程序。你将如何做到这一点，取决于 IIS 的版本，你是否有权访问 IIS 管理器，等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:40:38.667

我们遇到了同样的问题。该应用程序在开发机器上运行良好。它可以作为开发服务器上的默认应用程序正常工作。将应用程序移动到 IIS 服务器上的另一个站点，我们得到 403 错误。我们检查了权限 - 一切都很好。

我们在 _BaseLayout.cshtml 中添加了以下内容：

```
<script>
        var SitePath = '@Url.Content("~")';
</script> 
```

js 中的每个调用和每个锚点 href 都预先添加了 SitePath。

这使得代码工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:58:36.200

检查一些细节

*   是否使用正确的应用程序池配置到目标框架运行站点？（v4.0 猜的）

查看 iis 上框架的注册，有时需要注册（再次）

*   键入 cd C:\Windows\Microsoft.NET\Framework\v4.0.30319\ 类型

*   aspnet_regiis.exe -ir

记得以管理员身份运行 cmd

# multithreading - 如果线程 A 在同一进程中被杀死，线程 B 会发生什么？

> ID：10801480
> 
> 赞同：1
> 
> 时间：2012-05-29T14:47:18.550
> 
> 标签：multithreading, kernel, kill

> 假设一个进程产生了一个线程 A，而这个线程又产生了一个新的线程 B，现在假设线程 A 被杀死，那么线程 B 会发生什么。

我认为如果这些是 KLT，那么线程 B 被杀死肯定不会发生任何事情。对于 ULT，线程 B 也不应该发生任何事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:51:05.257

没有。在分叉过程中发生的情况是线程 B 通过获取对线程 A 的页表的引用（虚拟内存引用）开始。一旦从 A 或 B 对这些页表进行任何更改，就会创建一个副本（为每个页面）并提供给它们两者。在这种情况下，B 只会继承所有的页表并做自己的事情。

# jquery - JQuery 从重复的 html 结构中选择 3 个链接中的 2 个

> ID：10801484
> 
> 赞同：0
> 
> 时间：2012-05-29T14:47:32.767
> 
> 标签：jquery, css, jquery-selectors

我正在尝试从重复的 HTML 结构中选择 3 个现有`a`元素中的 2 个，并且在设计高效的 jquery 选择器时遇到了麻烦。

这是标记。我正在尝试选择`Link 1`, `Link 2`，但不是`Link 3`。请注意，整个 HTML 结构 ( `div.container`) 可能会出现多次。如果是这样，我需要所有`container`班级的链接 1 和链接 2。

**注意 1：我无法修改标记。**

**注意 2：我希望解决方案完全基于选择器（并避免调用`.find()`等，因为此选择器必须与此问题范围之外的另一个选择器结合使用。**

```
<div class="container">
    <h1>
        <a href="http://www.google.ca">Link 1</a>
    </h1>
    <div>
        <div class="left">
            <p>
                <a href="http://www.google.ca">Link 2</a>
            </p>
        </div>
        <div class="right">
            <a href="http://www.google.ca">Link 3</a>
        </div>
    </div>
</div> 
```

当出现单个`container`结构时，一个简单的选择器是：

```
$(".container a:lt(2)"); 
```

但是，如果`container`存在多个结构，则上面仅从第一个容器中选择 Link 1 和 Link 2。

以下适用于一个或多个`container`结构，但我不喜欢它。设置多个 css 路径选择器似乎效率低下。

```
$(".container h1 a, .container .left a"); 
```

用详细的语言，我想“选择class中不包含在 class 中的所有`a`标签。这可能吗？或者上面使用 2 个 CSS 路径的选择器是最佳选择。`container``right`

[测试小提琴。](http://jsfiddle.net/m2Tgr/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:49:14.730

尝试如下，

```
$(".container").find("a:lt(2)") 
```

[**演示**](http://jsfiddle.net/m2Tgr/1/)

> 在此问题范围之外有一个单独的选择器，然后将其与此问题的选择器结合使用。假设 $('.myOtherSelector, .selectorFromThisQuestion'); 所以我希望这个解决方案只是一个选择器。否则我可以使用 $('.container').find('a:lt(2)').add('.myOtherSelector') 来组合它们，但正如您所看到的，第一个选项要简单得多。正如我所说，如果无法完成，我肯定会使用您的解决方案/标记作为答案。我只是对是否可以使用直接选择器感兴趣。

或者，作为一种解决方法，如果您希望它在 1 行中，您可以尝试如下所示。请注意，这仅适用于呈现的标记。**任何标记更改都会破坏代码。**

```
$(".container :nth-child(1) a").css('background-color','red'); 
```

[**演示**](http://jsfiddle.net/m2Tgr/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:47:51.547

使用`:not`选择器，如下：

```
$(".container a:not('.right a')") 
```

# facebook - Facebook Like 按钮计数

> ID：10801489
> 
> 赞同：0
> 
> 时间：2012-05-29T14:47:55.573
> 
> 标签：facebook, count, facebook-like

假设您发布了一个指向公司 Facebook 粉丝页面的链接。您需要知道点击该公司 Facebook 粉丝页面链接的人是否点击了“Like”按钮。有什么办法知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:06:21.753

是的。一种方法是查询`page_fan`表。您需要以最低`read_stream`权限验证您的用户，然后使用您选择的 API 执行此查询。

```
SELECT uid FROM page_fan WHERE page_id="MY_PAGE_ID" AND uid = me() 
```

如果成功，此查询将返回您的用户的用户 ID，否则将返回一个空对象。

您也许可以编写一个页面应用程序来查询该`page_fan`表。我不确定是否有一个 API 调用会公开有关登录到 Facebook 的用户的足够信息，而不是您的应用程序以在不调用身份验证过程的情况下识别他们。

# html - 如何避免多次打印某些表格内容？

> ID：10801493
> 
> 赞同：0
> 
> 时间：2012-05-29T14:48:03.637
> 
> 标签：html, perl

我尝试通过在 Perl 脚本中硬编码 HTML 标记来创建 HTML 表格。我从文本文件中获取数据，然后按组件拆分它们并将它们打印到 HTML 表中。文本文件示例（作者、书名、书籍内容）：

```
Ronnie Smith, javabook, javaclasses
Ronnie Smith, javabook, javamethods
Ronnie Smith,  c-book, pointers
Carrlos Bater, htmlbook, htmltables 
```

如何只打印一次作者姓名而不是打印三次，并且与书名相同？只有一位作者，`Ronnie Smith`写了三本书，所以它应该属于一个类别。也例如`javaclasses`和`javamethods`来自同一本书`javabook`，所以我们应该只`javabook`打印一次。

我的脚本：

```
use strict;
use warnings;

my $Author;
my $bookName;
my $bookContent;
my $bookContentList = "List.txt";

open MYFILE, $bookContentList or die "could not open $bookContentList \n";

my @body = "";
push(@body, "<html> \n");
push(@body, "<head> \n");
push(@body, "<TABLE BORDER=\"0\"\n");
push(@body, " <TD>");
push(@body, "<div align=\"left\"><Table border=1 bordercolor= \"black\"> \n");
push(@body, "<tr bgcolor=\"white\"><TH><b>Author</b></TH><TH>Book Name     </TH><TH>bookContent</TH></TR>");
push(@body, "<br>\n");

while (<MYFILE>) {
    ($Author, $bookName, $bookContent) = split(",");
    push(
        @body, "<TR><td>$Author</TD>
         <td>$bookName</TD>
         <td>$bookContent</TD>"
    );
}
push(@body, "</div></Table>");

my $Joining = join('', @body);
push(@body, "</body></font>");
push(@body, "</html>");
my $htmlfile = "compliance.html";
open(HTML, ">$htmlfile") || warn("Can not create file");
print HTML "$Joining";
close HTML;
close MYFILE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:21:33.843

这是哈希表的经典案例：您想通过唯一标识符来识别作者和书籍：

```
my ( %author_books, @author_order );
while (<MYFILE>) {
    ($author, $bookName, $bookContent) = split(",");
    my $auth = $author_books{ $author };
    unless ( $auth ) { 
        push @author_order, $author;
        $author_books{ $author } = $auth = {};
    }
    my $books= $auth->{books}{ $bookName };
    unless ( $books) { 
        push @{ $auth->{order} }, $bookName;
        $auth->{books}{ $bookName } = $books= [];
    }
    push @$books, $bookContent;
}

foreach my $author ( @author_order ) { 
    my $auth  = $author_books{ $author };
    my $books = $auth->{order}; 
    push @body, qq{<tr><td rowspan="${\scalar @$books}">$author</td>\n};
    my $line = 0;
    foreach my $book ( @$books ) { 
        push @body, '<tr><td></td>' if ++$line;
        push @body
           , ( "<td>$book</td><td>"
             . join( "<br/>\n", @{ $auth->{books}{ $book } } )
             . "</td><tr>\n"
             );
    }
} 
```

我不推荐这种`push @body`方法。但如果你打算这样做，我会推荐[`File::Slurp`](http://search.cpan.org/perldoc?File%3a%3aSlurp#write_file)。

```
File::Slurp::write_file( $htmlfile, @body ); 
```

这样，您也可以`$Joining`像您一样跳过加入太早和未能写出页脚的错误。

# reporting-services - 在 SQL Reporting Services 中，是否可以根据同一行中多个其他列的值从数据集中检索某个值？

> ID：10801496
> 
> 赞同：2
> 
> 时间：2012-05-29T14:48:17.797
> 
> 标签：reporting-services

**在 SQL Reporting Services 中，是否可以根据同一行中多个**其他列的值从数据集中检索某个值？

所以，如果这是我的数据集：

```
Id    | Name      | Number | Score
1     | "John"    | 16     | 22
2     | "Jane"    | 64     | 24
3     | "John"    | 20     | 18 
```

我想要某种“where”子句，所以我可以检索所有/值 where`Name == 'John'`和`Number == 16`例如。这将返回`22`。

我试过 LookUpSet，但这只会比较另一个列值。我需要比较两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:26:07.877

实际上，查找函数的工作方式是使用表达式进行比较。因此，如果我正确理解您的问题，您可以执行以下操作：

=Lookup(Fields!Name.Value+"-"+CStr(Fields.Number.Value), Fields!Name.Value + "-" + CStr(Fields.Number.Value), Fields!Score.Value,"Dataset2")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:29:00.517

如果您基于 DataSet 创建新的 Tablix，则可以根据以下表达式添加一列：

```
Iif(Fields!Name.Value = "John" & Fields!Number.Value = Parameters!Number.Value, Fields!Score, 0) 
```

当 Name 列的值为“John”并且 Number 与您前面提到的隐藏参数匹配时，这将返回 Score 列的值，如果不匹配，则返回 0。您还可以将它与行上的**可见性**表达式结合起来，如下所示：

```
Iif(Fields!Name.Value = "John" & Fields!Number.Value = Parameters!Number.Value, false, true) 
```

这将隐藏与您想要的值不匹配的行。如果合适的话，您也可以很容易地将 Name 值作为参数传入。

或者，如果您确实想要过滤 DataSet 本身，您可以在**DataSet Properties** > **Filter**选项卡上指定这些表达式，而不是在 Tablix 级别 - 这取决于您是否需要在报表的其他地方重用 DataSet。

# mysql - 计算分组表中的 id

> ID：10801503
> 
> 赞同：0
> 
> 时间：2012-05-29T14:48:44.383
> 
> 标签：mysql

我在计算分组查询中的 id 时遇到问题。问题是这个查询是根据另一个变量分组的。例如，我需要计算发票内订购了多少产品，而这张发票是在制作多张发票的公司内部。我希望很清楚；无论如何，我希望用这个 SQL 一切都会更清楚：

```
SELECT C.FULLNAME,C.COMPANY_ID,SUM(I.GROSSTOTAL) AS TOTAL,
       SUM(I.OTHER_MONEY_VALUE/1.18) AS OTHER_TOTAL,
       COUNT(IR.PRODUCT_ID) AS NO_PRODUCTS
FROM COMPANY C
JOIN #DSN2_ALIAS#.INVOICE I      ON C.COMPANY_ID=I.COMPANY_ID
JOIN #DSN2_ALIAS#.INVOICE_ROW IR ON I.INVOICE_ID=IR.INVOICE_ID
JOIN #DSN3_ALIAS#.PRODUCT P      ON P.PRODUCT_ID=IR.PRODUCT_ID
JOIN #DSN3_ALIAS#.PRODUCT_CAT PC ON P.PRODUCT_CATID=PC.PRODUCT_CATID
WHERE P.PRODUCT_ID=<cfqueryparam value="#attributes.product_id#" cfsqltype="cf_sql_integer">
GROUP BY C.COMPANY_ID,C.FULLNAME
ORDER BY TOTAL DESC 
```

在我定义了产品 id 之后，查询在输出中列出了公司列表，以及它的总销售额，并且 NO_PRODUCTS 的值与发票数量相同，因为查询是按 company_id 和它的全名分组的，但是每张发票里面有多个产品，因此变量 no_products 定义错误:(

我怎样才能得到正确的计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:58:52.323

您可以尝试执行内部查询。使用发票检索您的产品数量。类似的东西。

```
SELECT C.FULLNAME,C.COMPANY_ID,SUM(I.GROSSTOTAL) AS TOTAL,
       SUM(I.OTHER_MONEY_VALUE/1.18) AS OTHER_TOTAL,NO_PRODUCTS
    FROM COMPANY C
    JOIN #DSN2_ALIAS#.INVOICE I ON C.COMPANY_ID=I.COMPANY_ID
    JOIN (select INVOICE_ID,count(PRODUCT_ID) as NO_PRODUCT from #DSN2_ALIAS#.INVOICE_ROW group by invoice_id) IR ON I.INVOICE_ID=IR.INVOICE_ID
    JOIN #DSN3_ALIAS#.PRODUCT P ON P.PRODUCT_ID=IR.PRODUCT_ID
    JOIN #DSN3_ALIAS#.PRODUCT_CAT PC ON P.PRODUCT_CATID=PC.PRODUCT_CATID
    WHERE 
    P.PRODUCT_ID=<cfqueryparam value="#attributes.product_id#" cfsqltype="cf_sql_integer">
    GROUP BY C.COMPANY_ID,C.FULLNAME
    ORDER BY TOTAL DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:03:02.737

我希望我明白你想要做什么，对不起，如果我没有

```
SELECT FULLNAME,COMPANY_ID
FROM (
SELECT SUM(I.GROSSTOTAL) AS TOTAL,
   SUM(I.OTHER_MONEY_VALUE/1.18) AS OTHER_TOTAL,
   COUNT(IR.PRODUCT_ID) AS NO_PRODUCTS
FROM COMPANY C
JOIN #DSN2_ALIAS#.INVOICE I      ON C.COMPANY_ID=I.COMPANY_ID
JOIN #DSN2_ALIAS#.INVOICE_ROW IR ON I.INVOICE_ID=IR.INVOICE_ID
JOIN #DSN3_ALIAS#.PRODUCT P      ON P.PRODUCT_ID=IR.PRODUCT_ID
JOIN #DSN3_ALIAS#.PRODUCT_CAT PC ON P.PRODUCT_CATID=PC.PRODUCT_CATID
WHERE P.PRODUCT_ID=<cfqueryparam value="#attributes.product_id#" cfsqltype="cf_sql_integer">
ORDER BY TOTAL DESC )
GROUP BY COMPANY_ID,FULLNAME 
```

# matlab - matlab中使用牛顿的方程

> ID：10801505
> 
> 赞同：0
> 
> 时间：2012-05-29T14:48:54.527
> 
> 标签：matlab

我有一个方程`f(β) = cosh β cos β + 1 = 0`，我需要使用 βi 根来找到一些频率。频率的公式是

```
fi = sqrt((βi^4 * E*I) / (4*pi*m*L^3) ); 
```

我收到此错误，我不知道问题出在哪里

```
??? Subscript indices must either be real positive integers or logicals.

Error in ==> C:\Documents and Settings\Laura Lupas\Desktop\subiect88\frecventa.m
On line 18  ==>     p= p0 - f(p0)/fd(p0); 
```

这是我的代码：

```
 function p = frecventa(f,fd,p_start,eps);

  p0=p_start;
  i=1;

  L = 0.9;    %lungimea grinzii in m
  b = 0.025;  %latimea grinzii in metri
  h = 0.0025;  %inaltimea in metrii
  dens = 7850; % kg/m cub
  v = b * h * L ; % volum
  m = dens * v;

  E =  2000e11; %modulul de elasti N/m patrat
  I= (b*h^2)/12;%mometul de inertie

  while(i <= 2)
     p= p0 - f(p0)/fd(p0);
     if abs(p-p0) < eps
        return
     end
      i = i + 1;
      p0=p;

      p = sqrt((p0^4 * E*I) / (4*pi*m*L^3) )
  end    

  % beta = 0:0.001:pi
  %f = cosh(beta).*cos(beta) + 1;
  %fd = sinh(beta).*cos(beta) - cosh(beta).*sin(beta); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:04:11.333

如果`f`和`fd`是您用作函数输入参数的向量，您可能会将更新的参数`p0=p`作为索引传递到这些向量中。您的代码显示您正在计算`p= p0 - f(p0)/fd(p0);`，稍后在循环中`p0`使用`p`. `p`（因此）的这种评估`p0`涉及除法步骤，因此不太可能产生 的整数值结果`p0`。因为这是索引索引的值`f`，`fd`它可以解释您收到的错误消息，很明显，您不能在矩阵或向量中使用非整数索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:53:07.503

难道只是这样

```
 % beta = 0:0.001:pi
  %f = cosh(beta).*cos(beta) + 1;
  %fd = sinh(beta).*cos(beta) - cosh(beta).*sin(beta); 
```

应该在你的代码的其余部分之上，并且没有注释吗？

所以试试这个：

```
 beta = 0:0.001:pi
  f = cosh(beta).*cos(beta) + 1;
  fd = sinh(beta).*cos(beta) - cosh(beta).*sin(beta);
  p0=p_start;
  i=1;

  L = 0.9;    %lungimea grinzii in m
  b = 0.025;  %latimea grinzii in metri
  h = 0.0025;  %inaltimea in metrii
  dens = 7850; % kg/m cub
  v = b * h * L ; % volum
  m = dens * v;

  E =  2000e11; %modulul de elasti N/m patrat
  I= (b*h^2)/12;%mometul de inertie

  while(i <= 2)
     p= p0 - f(p0)/fd(p0);
     if abs(p-p0) < eps
        return
     end
      i = i + 1;
      p0=p;

      p = sqrt((p0^4 * E*I) / (4*pi*m*L^3) )
  end 
```

# c# - 使用具有参考类型参数的方法更新线程安全全局数据集

> ID：10801507
> 
> 赞同：0
> 
> 时间：2012-05-29T14:48:55.053
> 
> 标签：c#, multithreading, static, dataset

我已经在这个问题的答案中给出的 Windows 控制台应用程序中实现了线程安全数据集更新操作。

[线程安全数据集](https://stackoverflow.com/questions/10337474/thread-safe-dataset)

我想仔细检查更新数据集行所遵循的方法。

每个线程都有 UpdateData 实例方法。此方法创建一个主键字符串数组，以查找数据表中的特定行和该行中要更新的数据字典。

```
private void UpdateData()
{

string[] key=new string(){"",""};
Dictionary<string,string> data=new Dictionary<string,string>();

key[0]="key1";
key[1]="key2";
data.Add("col1","value1");
data.Add("col2","value2");
MyDataSet.UpdateRecord(key,data);
} 
```

现在有这个共享方法用于更新全局 DataSet 中的 DataTable Row。

```
public sealed class MyDataSet
{

public static DataSet ds= new DataSet();

private static object _lock =new object();

public static UpdateRow(string[] key,Dictionary<string,string> data)
{
  lock(_lock){

    DataRow dr=ds.Tables[0].Rows.Find(key);
    dr.AcceptChanges();
    dr.BeginEdit();
    foreach(KeyValuePair<string,string> field in data)
     {
       dr[field.key]=field.value;
     }

    dr.EndEdit();
  }
}
} 
```

所以我的问题是，这种将引用类型的密钥和数据传递给静态共享方法的方法是否会给线程安全带来任何问题？密钥和数据都不共享，每个线程都创建自己的副本。如果两个线程进入 UpdateRow 方法，是否可以通过一个线程传递的键和另一个线程的数据以任何方式更新行（我知道这个问题听起来很愚蠢）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:53:16.647

如果 UpdateRow 方法由两个不同的线程调用，则会创建两个不同的堆栈，每个堆栈将保存对传入参数的引用。因此，在每个执行上下文中，您可以保证所有参数都是一致的。

因此，不，不可能使用来自一个堆栈的密钥和来自另一个堆栈的数据进行更新。

# php - PHP：存储文件直到会话到期

> ID：10801512
> 
> 赞同：1
> 
> 时间：2012-05-29T14:49:17.317
> 
> 标签：php, file-upload

对于一个客户，我正在 PHP5 中构建一个多步骤表单。在第一页之一上有多个文件上传。在用户完成表单之前，上传的文件必须存储在临时目录中。目前，所有表单数据都将临时保存在具有唯一编号的 Session 中。我想将文件存储在会话中，但这可能会导致错误，因为最大大小错误。

我想到的另一种方法是将文件存储在临时目录中（tmpname()）。但是这种方法的问题是临时文件夹可以随时被os清除。发生这种情况时，文件将丢失。

理想的解决方案是，当表单完成后，文件将移动到它们的永久目录（这并不难）。当会话由于不活动而过期时，文件将从其临时目录中删除（以减少未使用的空间）。

做这个的最好方法是什么？即是否有内置功能等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:59:17.390

那么，为什么不将会话中生成的名称 tempnam() 与预期的文件名一起存储呢？喜欢

```
$_SESSION['temp_files'] = array($truename => $tempname); 
```

在 session_close 中，您将手动取消链接文件并完成。为了防止过期会话中的临时文件堆积在您的临时目录中，您可以从目录中清除具有特定年龄的文件。

我忘了什么吗？

# jquery - jQuery 切换：隐藏第一个 div，显示另一个 div

> ID：10801518
> 
> 赞同：0
> 
> 时间：2012-05-29T14:49:51.747
> 
> 标签：jquery, toggle

我想要的是以下内容：我正在制作一个网站，我想在页面顶部放置一些文本并在页面中间放置一个按钮。如果用户单击它，按钮上方的内容（例如 Div A）将隐藏，而隐藏在其下方的内容（例如 Div B）将显示并且按钮消失。我需要什么样的 jQuery 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:53:33.793

由于评论中的观点而编辑：

```
<div id="divA">
    Contents
    <input type="button" onclick="$('#divA').hide();$('#divB').show();" />
</div>
<div id="divB">
    More Contents.
</div> 
```

当然，风格`#divB`是`display: hidden;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:54:20.823

编辑：我忘记了按钮。这是修改后的代码。

您创建一个*隐藏*类，然后使用方法*toggleClass*进行操作。

CSS：

```
.hidden { display: none; } 
```

JS：

```
$("#myButton").click(function() {
  $("#divA, #divB").toggleClass("hidden");
  $(this).addClass("hidden");
}); 
```

在这里，*this*关键字将引用您单击的按钮。

# actionscript-3 - AS3 程序在一台计算机上运行， 但不在其他计算机上

> ID：10801519
> 
> 赞同：0
> 
> 时间：2012-05-29T14:49:53.387
> 
> 标签：actionscript-3, apache-flex, sdk

我在 AS3 中有一个项目正在与 Dropbox 共享超过 2 台计算机。当我在装有 CS 5.5 的计算机上运行该程序时，它运行起来就像一个魅力。但是，每当我重新打开它并在具有 CS 4 的计算机上运行它时，它都会要求提供 Flex SDK 路径，然后我使用默认设置点击更新库路径。在此之后，程序出现空白并冻结 CS 4，迫使我关闭程序。

这是我认为导致问题的代码：

```
[Embed(source="sorted.txt",mimeType="application/octet-stream")]
private static const WordFile:Class;
private static var words:Array = new WordFile().toString().split(/\n/); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:25:55.047

我真的不认为这与您的代码有任何关系（看起来不错，而且绝对不会影响平台）。你描述它的方式，它听起来更像是一个编译/调试器错误。

我的猜测是两个不同的 CS 版本会导致问题。

我建议使用[FlashDevelop](http://www.flashdevelop.org/)或其他免费程序，因为 Flash CS（任何版本）对于程序员来说至少可以说是可怕的。并且有了更好的程序，如果所有程序员/PC 使用相同的版本（以及相同版本的 Flex SDK），一切都应该没问题:)

# java - 如何将 dateTime 类型转换为 gregorianCalendar

> ID：10801520
> 
> 赞同：3
> 
> 时间：2012-05-29T14:49:55.283
> 
> 标签：java, datetime, gregorian-calendar

我在字符串中获取时间，例如“2011-02-27T10:03:33.099-06:00”，它属于 xml dateTime 类型。我也有 TimeZone 类型的时区。我应该如何在该时区将 dateTime 转换为 GregorianCalendar java 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:16:51.623

```
sdf = new java.text.SimpleDateFormat ("yyyy-MM-dd'T'HH:mm:ss.S"); 
```

解析除尾随 TZ 之外的所有内容。

```
sdf.parse (sd);
res168: java.util.Date = Sun Feb 27 10:03:33 CET 2011 
```

从[api 文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)中，我希望

```
sdf = new java.text.SimpleDateFormat ("yyyy-MM-dd'T'HH:mm:ss.SSSz"); 
```

用于读取最后的-06:00。但我看到，要么有一个 0700 形式的偏移量，要么有一个 GMT 前缀，例如“GMT-04:00”。所以你必须自己插入那个 GMT-thingy：

```
sdf.parse (sd.replaceAll ("(......)$", "GMT$1")) 
```

SDF.parse(str) 返回一个 Date，它必须被转换成一个 GC：

```
GregorianCalendar calendar = new GregorianCalendar ();
calendar.setTime (date); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:59:55.373

Java 内置了解析 xml 日期时间的代码：使用[DatatypeConverter.parseDateTime()](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#parseDateTime%28java.lang.String%29)。这将在解析的 TimeZone 中返回一个日历。然后，您可以将 Calendar TimeZone 设置为所需的目标 TimeZone，以执行您接下来需要执行的任何操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-15T07:09:42.030

# windows - 在中央 Windows/IIS Web 服务器上创建新存储库

> ID：10801524
> 
> 赞同：0
> 
> 时间：2012-05-29T14:50:06.447
> 
> 标签：windows, mercurial, tortoisehg

我最近开始在我的团队中配置 Mercurial 作为概念证明。我们都使用 Windows 并开发基于 Visual Studio 和 SQL Server 的解决方案/项目等。

我已经在我和同事的机器上安装了 TortoiseHg，还使用 ​​IIS 配置了一个中央存储库 Web 服务器。我在 Web 服务器上创建了一个新的存储库，我的同事和我一直在经历这些动作，检查推送和拉取更改。

我的问题是这个。例如，我在本地创建了一个新的存储库，并且一直在签入代码，现在想将其移动到中央服务器。我的理解是，我必须首先在中央服务器上创建存储库，然后将我的本地代码推送到它。但是有哪些方法可用于创建远程存储库。

我可以 rdp 到服务器，创建一个目录，然后调用 hg init。我想我也可以用 powershell 远程处理做类似的事情。还有其他建议，可以通过 TortoiseHg 做到这一点吗？我也有兴趣从基于团队的开发最佳实践角度听取建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:19:32.360

这是我在 IIS 下创建的中央 Hg 网站中设置并工作的[管理工具（站点）。](https://bitbucket.org/joshjcarrier/phphgadmin/wiki/Home)

虽然我让它工作了（几个月前），但我们倾向于直接创建中央存储库。最后，我们发现我们使用基于 UNC 的文件共享比通过 Web 界面更多。我想这取决于你的团队是否是分布式的。如果它是分布式的，那么我会看看 Bitbucket 等人。提供您的中央回购设施，然后使用他们的管理工具来设置和控制回购。由于保险设置了一个定时脚本来命令行驱动 TortoiseHg 以定期将所有存储库拉下来以进行现场备份......

也一样，只是为了分享。看看 VisualHg 和我最喜欢的与 Visual Studio 集成的 HgScc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:15:21.430

[除了提到](https://stackoverflow.com/a/10802030/67988)的phpHgAdmin Keith 之外，还有其他一些选项。

[RhodeCode](http://packages.python.org/RhodeCode/)（用 Python 编写）具有比 phpMyAdmin 更多的功能。[SCM-Manager](https://bitbucket.org/sdorra/scm-manager/wiki/Home) (Java) 甚至支持 Git 和 Mercurial。两者都是开源的。

但是，您可能必须使用 IIS 以外的其他服务器来部署这些服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T15:56:43.157

我想你不太可能运行 sshd 服务器，因为你在 Windows 上，但如果你是，你可以通过 ssh 远程克隆和远程初始化存储库，如下所示：

```
hg clone mylocal ssh://host//absolute/path/to/repo 
```

或者

```
hg init ssh://host//absolute/path/to/repo 
```

# html - 为每个单独的表格列设置正确的宽度？

> ID：10801526
> 
> 赞同：1
> 
> 时间：2012-05-29T14:50:08.753
> 
> 标签：html, css

我在设置表格中每个单独列的宽度时遇到问题。我创建了一个[Jsfiddle](http://jsfiddle.net/wgGbt/)，它显示了表格及其每一列。我已经说明了我想要每列的宽度百分比，但是当你打开小提琴时你会看到，这些列的宽度与我为每列宽度设置的所需百分比不匹配。

我的代码中是否有任何可见的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:54:37.760

表格列将按内容调整大小（w），并且只会缩小到可能的最低宽度。我不确定是否有使用传统桌子的好方法。

您可能想尝试使用 div 来构建表格，这将使您能够使用溢出：滚动/隐藏属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:54:04.073

据我所知，浏览器试图使其尽可能接近您的百分比值。但是请记住，它总是使列宽足以显示其单元格内容 - 例如，即使您将其设置为仅 3%，它也将始终足够宽以保持单词“数字”可见。

# iphone - Apples Reachability 类是否有更复杂的替代方案？

> ID：10801527
> 
> 赞同：5
> 
> 时间：2012-05-29T14:50:09.627
> 
> 标签：iphone, ios, ipad, reachability, cfnetwork

Apple 已经创建了著名的 Reachability 类，但查看代码我不太信任它。格式和标题很乱。

它也没有帮助显示“你没有互联网！” 警报。

我只想做：

*   在某个时候下载一个 XML。

*   当没有互联网时，显示警报。

*   当下载 XML 时 Internet 断开连接时，显示警报。

在我的应用程序中，用户没有点击下载按钮，这一切都在后台自动发生。

就是这样。真的。我现在在可达性上花了 3 个小时，我的大脑只是拒绝它。

有人用干净的标题和干净的代码创造了一个聪明的替代方案吗？使用起来非常简单的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:09:09.167

我在 GitHub 上找到了一个： [https ://github.com/tonymillion/Reachability](https://github.com/tonymillion/Reachability)

注意：首先查找！= 一定是最好的查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:06:10.953

回复可能为时已晚，但正如我在这里回答的那样，以下答案可以帮助寻找解决同一问题的人。

[在 iOS 上检测 Internet 连接的最简单方法是什么？](https://stackoverflow.com/questions/8812459/easiest-way-to-detect-a-connection-on-ios/14870229#14870229)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-27T15:09:44.960

看看`Network`框架。它超级强大且灵活，允许直接访问 TLS、TCP 和 UDP 等协议，用于您的自定义应用程序协议。它是 Swift 就绪且易于使用的。

```
import Network
// To try a connection to a host
let connection = NWConnection(host: "www.google.com", port: .https, using: .tcp)
connection.stateUpdateHandler = { (newState) in
    switch(newState) {
    case .ready:
        print("Handle connection established")
    case .waiting(let error):
        print("Waiting for network", error.localizedDescription)
    case .failed(let error):
        print("Fatal connection error", error.localizedDescription)
    default:
        break
    }
}
connection.start(queue: .global(qos: .background))

// The code above will work even in Playground (and fire the stateUpdateHandler at least once). In real app stateUpdateHandler will be called every time the state changes. BTW, URLSession, is built upon this framework.

// To get general connection status:

let monitor = NWPathMonitor()

monitor.pathUpdateHandler = { path in
    if path.status != .satisfied {
        print("Not connected")
    }
    else if path.usesInterfaceType(.cellular) {
        print("Cellular 3/4/5g connection")
    }
    else if path.usesInterfaceType(.wifi) {
        print("Wi-Fi connection")
        print(path.status)
    }
    else if path.usesInterfaceType(.wiredEthernet) {
        print("Ethernet connection")
    }
}

monitor.start(queue: .global(qos: .background)) 
```

# php - PHP：从 XML 中提取信息以创建 JSON 的问题

> ID：10801534
> 
> 赞同：1
> 
> 时间：2012-05-29T14:50:29.453
> 
> 标签：php, xml, json

我需要从在线获取的 XML 中提取一些数据并从结果中创建 JSON。

这是我遇到的问题的简化版本：

```
$XML=simplexml_load_file("http://somewhere.on.the.net/my.xml");
$result = array();

$tmpp = $XML->S->S["time"];
echo $tmpp.'<br/>';;

$result['DATE'] = $tmpp;
echo json_encode($result); 
```

我得到：

```
2012-05-29
{"DATE":{"0":"2012-05-29"}} 
```

而且我要：

```
{"DATE":"2012-05-29"} 
```

我怎样才能做到这一点？谢谢。

**更新**

下面是 XML 的结构：

```
<g:e>
<S>
 <S time="2012-05-29">
   <S info1="a" info2="b"/>
   <S info1="d" info2="m"/>
   <S info1="q" info2="l"/>
   ...
 </S>
 <S time="2011-04-09">
   <S info1="a" info2="z"/>
   ...
   </S>
 </S>
 ...
</S>
</g:e> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:53:23.597

看起来您可能需要从 XML 节点获取字符串值：

```
// Cast the value to a string.
$tmpp = (string)$XML->S->S["time"]; 
```

它看起来像一个裸日期值`echo`，因为 SimpleXML`__toString()`在对象上实现了自定义，但如果您`var_dump($XML->S->S["time"])`会看到它不仅仅是日期字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:53:47.030

尝试使用 $tmpp 变量的第一个键。

```
$result['DATE'] = $tmpp[0]; 
```

# excel - “无法设置 Range 类的 NumberFormat 属性”

> ID：10801537
> 
> 赞同：3
> 
> 时间：2012-05-29T14:50:39.473
> 
> 标签：excel, vba

这段代码已经工作了很长时间。我想也许我不小心按下了一个键，但我似乎看不到它。我突然收到错误：

**无法设置 Range 类的 NumberFormat 属性**

在下面的代码中：

```
Worksheets("Sheet1").Cells(y + k, x + j).Select
TempValue = Worksheets("Sheet1").Cells(y + k, x + j).Value
Worksheets("Sheet1").Cells(y + k, x + j).NumberFormat = "#,##0" //ERROR HERE
Worksheets("Sheet1").Cells(y + k, x + j).Value = TempValue 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:35:38.640

Chat 中发现的问题是工作簿有超过 64,000 种格式，因此用户在 Excel 中收到“**太多不同的单元格格**式”错误消息

解决方案

**主题：您在 Excel 中收到“太多不同的单元格格式”错误消息**

**链接**： http: [//support.microsoft.com/kb/213904](http://support.microsoft.com/kb/213904)

**来自上述链接的报价**

> 在 Microsoft Excel 2007/2010 文件中可能会产生以下错误消息；
> 
> Excel 在文件中发现不可读的内容
> 
> 当工作簿在 Excel 2003 中包含超过大约 4,000 个不同的单元格格式组合或在 Excel 2007 及更高版本中包含 64,000 个以上时，就会出现此问题。

链接中提到的解决方案是下载并运行[XLStyesTool](http://sergeig888.wordpress.com/2011/03/21/net4-0-version-of-the-xlstylestool-is-now-available/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-07T14:15:07.943

我在 Office365ProPlus 中使用模糊查找插件遇到了这个问题。在我运行 FuzzyLookUp 之后，只生成了 10 行输出并且弹出了这条消息。

问题是由我的 Excel 本地设置引起的。

为了解决这个问题，我必须在常规 Excel 设置下将小数点分隔符从逗号更改为点。

在我这边，它完美地解决了这个问题。

# cocoa - NSDocument 宽变量

> ID：10801541
> 
> 赞同：1
> 
> 时间：2012-05-29T14:50:48.203
> 
> 标签：cocoa, backend, nsdocument

所以我需要一个带有后端实例的 NSDocument，所有视图都可以访问并且后端中的对象可以访问。目前我有一个共享实例，但这将文档限制为只有一个。代码就像这样：

```
static id sharedInstance = nil;

+(void)initialize {
    if (self == [ApricumBackend class]) {
        sharedInstance = [[self alloc] init];       
    }
}
+ (id)mainBackend {
    return sharedInstance;
} 
```

但这并不像我想要的那样工作。那么我怎样才能实现一个 NSDocument 有一个每个视图都可以访问的变量，我怎样才能让后端中的每个对象都能够访问后端呢？我做了一个小图表： ![很棒的图表](../Images/93f0dbcf3f0afdb71c7fb7945abf105c.png)

重要的是后端对象中的对象需要在“初始化”时访问后端对象

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:57:06.937

对于对象，您创建一个`NSObject`包含指定初始化程序的公共子类：

```
+ (id)initWithBackend:(Backend *)backend; 
```

也许叫它`BackendObject`。然后你的对象应该继承`BackendObject`并添加适当的初始化方法，例如：

```
+ (id)initWithSomething:(Something *)something backend:(Backend *)backend; 
```

`self`然后这些初始化方法可以调用超类初始化方法，并且后端对象（图中显示为拥有它们）在初始化它们时需要传递。

对于视图，您可以使用以下方法从`NSView`子类初始化程序中访问文档：

```
MyDocument *mydoc = [[[self window] windowController] document]; 
```

并提供一个访问器来访问后端，它可以作为实例变量保存：

```
Backend *backend = [mydoc backend]; 
```

# c - 使用 gcc 对 `__gxx_personality_v0' 的未定义引用

> ID：10801542
> 
> 赞同：1
> 
> 时间：2012-05-29T14:50:49.467
> 
> 标签：c, gcc, undefined-reference

> **可能重复：**
> [__gxx_personality_v0 是做什么用的？](https://stackoverflow.com/questions/329059/what-is-gxx-personality-v0-for)

我在编译 C++ 代码的上下文中看到了这个问题。但是，我要编译*纯*C 代码并继续收到此错误。我被禁止使用“-lstdc++”作为解决这个 gcc 问题的方法。如何更改我的代码以使其正常工作，为什么会弹出此错误？

我的简化代码：

```
//this is main.cpp
#include <stdio.h>
int main()
{
    char ch[3];
    ch[0] = getc(stdin);
    ch[1] = getc(stdin);
    ch[2] = '\0';
    printf("%s\n", ch);
    return 0;
} 
```

我的编译命令是：

```
gcc main.cpp 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T15:06:44.463

使用其中一个`g++`- 因为您的文件带有后缀`.cpp`，或者将文件重命名为`.c`并保持命令行不变。在 Debian 6.0.5 和`gcc`4.4.5 上测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:05:25.277

人 gcc 说：

> C++ 源文件通常使用后缀 .C、.cc、.cpp、.CPP、.c++、.cp 或 .cxx 之一；C++ 头文件通常使用 .hh、.hpp、.H 或（对于共享模板代码）.tcc；和预处理的 C++ 文件使用后缀 .ii。GCC 识别具有这些名称的文件并将它们编译为 C++ 程序，即使您调用编译器的方式与编译 C 程序的方式相同（通常使用名称 gcc）。

# linux - Eclipse 可以登录到系统日志吗？

> ID：10801547
> 
> 赞同：3
> 
> 时间：2012-05-29T14:50:57.780
> 
> 标签：linux, eclipse, syslog

Eclipse 的日志输出最终会出现在工作区、配置或有时控制台中的日志文件中。有没有办法让 Eclipse 将此信息发送到系统日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:56:02.813

没有测试过，但是怎么样...

./eclipse -consoleLog 2>&1 | 记录器

# paperjs - paper.js 隐藏/显示层？

> ID：10801554
> 
> 赞同：2
> 
> 时间：2012-05-29T14:51:24.300
> 
> 标签：paperjs

我有一个包含很多符号的图层，我想隐藏并显示包含他所有元素的整个图层。

隐藏我这样做，`myLayer.remove();`但显示它没有方法......
他们在他们的教程中说`project.activeLayer.addChild(myObject);`，但它似乎不适用于图层。（http://paperjs.org/tutorials/project-items/project-hierarchy/）

如果有人可以帮助我或告诉我是否需要以不同的方式做？

非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T02:20:50.503

当您调用 Layer.remove() 时，该 Layer 实例将从 project.layers 数组中删除。要重新显示已删除的图层（以及其中的任何对象），请将其推回 project.layers。

```
var blueSquare = Path.Rectangle(new Point(0, 0), new Size (50, 50));
blueSquare.fillColor = 'blue';

var newLayer = new Layer();
newLayer.activate();    // so that redCircle will be added to newLayer
var redCircle = Path.Circle(new Point(100, 100), 50);
redCircle.fillColor = 'red';

newLayer.remove();      // this prevents the redCircle from being drawn
project.layers.push(newLayer);  // now the redCircle is back 
```

或者，`newLayer.remove();`您可以使用`newLayer.visible = false;`or来代替`newLayer.opacity = 0;`newLayer 实际上从 project.layers 数组中删除，尽管使用这些方法，即使无法看到实际的项目，选定的项目仍会显示线框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-22T11:35:30.663

有一个属性称为图层的**可见性**。您可以将其设置为真/假。

```
paper.Layer.prototype.hide = function(){
   this.visibility = false
}

paper.Layer.prototype.show = function(){
   this.visibility = true
} 
```

现在，当您创建新图层时，您可以在对象上调用 show 或 hide 方法来更改可见性。

```
baseLayer = new Layer()

// hiding layer
baseLayer.hide()

//showing layer
baseLayer.show() 
```

> 但是，这并不会将该层从活动层中移除。您所做的任何更改都将在活动层中，即使它被隐藏。

为此，我制作了一层称为。**rootLayer**`rootLayer.activate()`并在它们被隐藏时将其设置为活动 ( )。它是一个黑客，但它完成了工作

# vb.net - “未为参数指定参数”，但已指定

> ID：10801557
> 
> 赞同：2
> 
> 时间：2012-05-29T14:51:38.157
> 
> 标签：vb.net, entity-framework, entity-framework-4, .net-4.0

我正在尝试将一些参数传递到数据注释中，它拒绝了我的命名参数。见下文：

![在此处输入图像描述](../Images/30116245ad0b0f3e1deaa62c97896c2b.png)

**[它与Microsoft 文档中 TableAttribute 的](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.tableattribute.aspx#Y1800)**完全相同的语法，除了在文档中它们有一个大写的 N，但是 VS 中参数的智能感知要求一个小写的 n。

**编辑：** 在得到 2 个好的答案后，我只想解释为什么我认为我可以首先做到这一点。看起来构造函数已更新，但工具提示并未更新，因为这是在您获得语法提示时显示的内容：

![在此处输入图像描述](../Images/7d731ea2a312bfb2067420fbe15b3ffb.png)

而且我需要能够指定架构。但现在我找到了另一种方法来做到这一点。

**编辑#2**：为什么我首先尝试命名参数；因为这行不通。

![在此处输入图像描述](../Images/bdebfd3c758825aa3c4b127df15e4cea.png)

**编辑#3：**显然我错过了尝试这种有效的语法。多亏了达米安才弄清楚。

![在此处输入图像描述](../Images/3071b5f0657fd5f3830ab690b6091f18.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:57:12.630

你看错了[`TableAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.tableattribute%28v=vs.110%29.aspx)。命名空间中的那个`DataAnnotations`需要一个[构造函数（未命名）`name`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.tableattribute.tableattribute%28v=vs.110%29.aspx)参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:55:45.467

Name 不是`TableAttribute`. 你根本不需要在它前面加上前缀`name:=`。只需键入：

```
<Table("SYSTEMSETTING")>
Public Class MyTableClass 
```

# c# - C# - 我想加入两个数据表。你能给我一个linq代码段吗？

> ID：10801558
> 
> 赞同：2
> 
> 时间：2012-05-29T14:51:54.570
> 
> 标签：c#, sql, linq, join, datatable

我正在做一个项目，其中包含两个到 dataTables 的 csv 文件，我想加入它们并将其分配给一个新的。只有 BIN 或 BBL 列是固定的，其他列会有所不同。我不太了解 linq，所以我需要这个帮助。解决方案如下：

```
 if radioButton1.checked{
    join all the columns in dt1; //dt1 = dt1 + dt2
    }
    else if radioButton2.checked{
    join all the columns in dt2; //dt2 = dt2 + dt1
    } 
```

现在，对于 radioButton1，如果 dt1 和 dt2 具有相同的列，例如 BBL，并且在 dt1 中有 4 行 BBL，并且在 dt2 中有 5 行，其中前 4 个匹配项存在于 dt1 但第 5 个匹配项是新的，那么它将添加dt1 中的这一行。对于 radioButton2，反之亦然。

我认为以下类型的 sql 查询可能会有所帮助，但不确定它是否能正确解决：

```
SELECT * FROM dt1,dt2 GROUP BY BBL 
```

我确信它会在 dt1 和 dt2 中添加常见的，但是如果 dt2 有一个额外的行，那么它是否可以工作，我不知道。

请帮帮我，我需要你们认真的关注。在过去的四天里，我一直被这个问题困扰，但没有解决方案。您的帮助将不胜感激。提前致谢。-萨凡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:33:43.957

看看这个

```
var ret = from x in dt1.AsEnumerable()
    join y in dt2.AsEnumerable() on x.Field<int>("ID") equals y.Field<int>("ID") into z
    from y in z.DefaultIfEmpty()
    select new
    {
        ID = x.Field<int>("ID"),
        VAL = x.Field<string>("VAL")
     }; 
```

# jquery - 来自php的$ .ajax（延迟）对象强制失败

> ID：10801559
> 
> 赞同：6
> 
> 时间：2012-05-29T14:52:00.623
> 
> 标签：jquery, ajax

我正在做一个小 ajax 乒乓球，想知道是否可以强制延迟的 ajax 对象从 PHP 进入失败状态。

```
$.ajax({
    url: 'example.com/post',
    dataType: 'json'
})
.done(function(data) {
    console.log(data);
})
.fail(function(data) {
    console.log(data);
}); 
```

并在 php

```
function post() {
if (false) {
    echo json_encode(array('all good'));
} else {
    ???
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T14:55:19.340

您可以返回错误标头：

```
header('HTTP/1.0 404 Not found');
exit; 
```

这将导致 jQuery 运行其错误处理程序，进而导致 Ajax 延迟失败。基本上像`4xx`和 5xx` 这样的状态码就可以解决问题。

# facebook - 是否可以在特定页面中获取用户对帖子的喜欢和评论？

> ID：10801560
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:52:00.627
> 
> 标签：facebook, actionscript-3, facebook-graph-api, facebook-like, facebook-php-sdk

我需要得到的是：

登录用户在特定页面上的所有评论和喜欢。

使用下面我只能在页面上获得喜欢。

```
FacebookMobile.api("/me/likes", facebookGetUserLikes, null, "GET");
function facebookGetUserLikes(success:Object,fail:Object):void{
    if(success!=null){
        for(var i:int = 0; i < success.length; i++){
            trace("like.id = ", success[i].id);
            trace("like.name = ", success[i].name);
            trace("like.category = ", success[i].category);
            trace("like.created_time = ", success[i].created_time);
        }
    }
    if(fail!=null)trace("--> facebookGetUserLikes fail = ", fail.toString());
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:37:30.153

我认为您应该为此使用 FQL，因为它是一个复杂的查询。这是我的尝试：

`SELECT user_id, object_id FROM like WHERE post_id IN (SELECT post_id FROM stream WHERE source_id = PAGEID) AND user_id = USERID`

我刚刚用一个我喜欢的页面对此进行了测试，它可以工作。

# php - 可写 Zend Mail Storage 消息的唯一标识符

> ID：10801561
> 
> 赞同：1
> 
> 时间：2012-05-29T14:52:04.260
> 
> 标签：php, zend-framework

我正在尝试在 PHP/Zend 中创建一个系统，该系统可以收集来自各种不同帐户（主要是 POP 和 IMAP）的电子邮件，并将它们全部组合到一个系统中，以便进行分析（电子邮件的内容等）

我的计划是从帐户中读取电子邮件并将它们移动到本地，因为如果用户需要查看它们，我正在设计的系统将被调用以原始格式显示电子邮件。我已经使用 Zend_Mail_Storage_Writable_Maildir 创建了一个本地 Maildir 结构，并且我正在添加从每个帐户返回的消息。

我能够连接到各种帐户并检索电子邮件，并将它们添加到我的本地 Maildir 帐户而不会出现问题。我的问题是我似乎无法找到一个唯一标识符来分隔添加到 Maildir 帐户的每条消息（我计划将每封电子邮件的一些电子邮件信息与唯一标识符一起存储在数据库中）。

有谁知道如何获取最近添加到 Zend_Mail_Storage_Writable_Maildir 实例中的消息的唯一标识符？

我的基本代码如下：

```
// Set config array for connecting to an email account (Hotmail, gMail etc.)
$config = array(
    'host'=> 'xxxx',
    'user' => 'xxxx',
    'password' => 'xxxx',
    'ssl' => 'SSL',
    'port' => 995);

// Connect to the account and get the messages
$mail = new Zend_Mail_Storage_Pop3($config);

// Connect to the local Mairdir instance so we can add new messages
$mailWrite = new Zend_Mail_Storage_Writable_Maildir(array('dirname' => '/xxxx/xxxx/'));

// Loop through the messages and add them        
foreach ($mail as $messageId => $message)
{
    // ADDING THE MESSAGE WORKS FINE, BUT HOW DO I GET THE UNIQUE 
    //  IDENTIFIER FOR THE MESSAGE I JUST ADDED?
    $mailWrite->appendMessage($message);

    // FYI: $messageId seems to be the message ID from the originating account; it
    //  starts at one and increments, so this can't be used :(
} 
```

感谢您提供的任何见解！

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:26:34.387

可以通过该`Zend_Mail_Storage_Writable_Maildir::getUniqueId()`方法获取添加消息的唯一ID。

如果您没有将 id 传递给函数，它将从邮件目录中返回一个包含所有消息唯一 ID 的数组。

这是一个例子：

```
foreach ($mail as $messageId => $message)
{
    // ADDING THE MESSAGE WORKS FINE, BUT HOW DO I GET THE UNIQUE 
    //  IDENTIFIER FOR THE MESSAGE I JUST ADDED?
    $mailWrite->appendMessage($message);

    $ids = $mailWrite->getUniqueId();
    $lastMessageId = $ids[sizeof($ids)];
} 
```

值得注意的是，返回数组 from`getUniqueId()`是基于 1 而不是基于 0，所以请注意这一点。

此外，我不确定这是错误还是设计使然，但为新添加的文件返回的唯一 ID 不包含文件名上的消息大小或信息字符串，但现有消息会。

这意味着，您的数组可能看起来像这样：

```
array(21) {
  [1]=>
  string(38) "1338311280.0773.1143.localhost.localdomain,S=34226"
  [2]=>
  string(38) "1338311278.5589.1143.localhost.localdomain,S=108985"
  [3]=>
  // ...
  [20]=>
  string(39) "1338311217.6442.18718.localhost.localdomain,S=2142"
  [21]=>
  string(31) "1338312073.7461.18715.localhost.localdomain"
} 
```

注意最后一条消息是如何没有大小的（刚才用 appendMessage 添加的）。

希望对您有所帮助。

# windows-phone-7 - 更新 Windows Phone 7 列表

> ID：10801563
> 
> 赞同：0
> 
> 时间：2012-05-29T14:52:13.753
> 
> 标签：windows-phone-7, listbox, contacts

我有以下列表，它是从远程 XML 填充的

```
 public class Archive
{
    public string fromsms { get; set; }
    public string sms { get; set; }
    public string tosms { get; set; }
    public string status { get; set; }
    public string date { get; set; }
}

<TextBlock Text="From: " TextAlignment="Left" FontSize="16" Foreground="White" FontWeight="Normal" Grid.Row="0" Grid.Column="0"  HorizontalAlignment="Left" VerticalAlignment="Center"/>
<TextBlock Text="{Binding fromsms}" TextWrapping="Wrap" FontSize="16" FontWeight="Bold"  Grid.Row="0" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Center"/>
<TextBlock Text="Date: " FontSize="16" TextWrapping="Wrap" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2" TextAlignment="Left" Margin="0" />
<TextBlock Text="{Binding date}" FontSize="16" TextAlignment="Left" Foreground="White" FontWeight="Bold" Grid.Row="0" Grid.Column="3" />
<TextBlock Text="To: " TextAlignment="Left" FontSize="16" Foreground="White" Margin="0" Grid.Row="1" Grid.Column="0"/>
<TextBlock Text="{Binding tosms}" TextWrapping="Wrap" FontSize="16" FontWeight="Bold" Grid.Row="1" Grid.Column="1"/>
<TextBlock Text="Status:" FontSize="16" TextWrapping="Wrap" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="2" Margin="0" />
<TextBlock Text="{Binding status}" FontSize="16" TextAlignment="Left" Foreground="White" FontWeight="Bold" Grid.Row="1" Grid.Column="3"/>
<TextBlock Text="{Binding sms}"  FontSize="20" TextWrapping="Wrap" Width="Auto"  Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4"/>

var xmlHistory = XElement.Parse(e.Result);
listbox1.ItemsSource = from history in xmlHistory .Descendants("archive")
select new Archive
{
    fromsms = history.Element("fromn").Value,
    tosms = history.Element("ton").Value,
    status = history.Element("smsstatus").Value,
    date = history.Element("time").Value,
    sms = history.Element("sms").Value,
};

listbox1.Visibility = Visibility.Visible;
PerformanceProgressBar.Visibility = Visibility.Collapsed; 
```

“fromn”和“ton”是我想搜索联系人的电话号码，如果找到的话，用联系人姓名替换列表中的号码。

有人可以给我一个示例代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:45:01.043

[在这里](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)您可以找到适用于 Windows Phone 平台的代码示例，其中包含有关以下`Contacts and Calendar Sample`项目和好的主题`Contacts API`：[如何：访问 Windows Phone 的联系人数据](http://msdn.microsoft.com/en-us/library/hh286416%28v=vs.92%29.aspx)

升级版：

```
 ObservableCollection<User> users = new ObservableCollection<User>()
            {
                new User() { phone = "345342645" },
                new User() { phone = "134523534" } ,
                new User() { phone = "345435432" } 
            };

            Contacts contacts = new Contacts();
            contacts.SearchCompleted += (s, e) =>
            {
                var u = (from Contact con in e.Results
                         from ContactPhoneNumber phones in con.PhoneNumbers
                         from user in users
                         where phones.PhoneNumber.Replace("+", "").Replace("(", "").Replace(")", "").Replace("-", "").Replace(" ", "").Equals(user.phone)
                         select new User() { name = con.DisplayName, phone = user.phone }).ToList();

                foreach (User user in u)
                {
                    Debug.WriteLine(user.name + " " + user.phone);
                }
            };
            contacts.SearchAsync(String.Empty, FilterKind.None, String.Empty); 
```

接下来是我的`User`实现：

```
public class User
{
    public string phone { get; set; }
    public string name { get; set; }
} 
```

# java - 是否可以从 Android sqlite 中的多个数据库中获取数据？或者有什么快速将数据插入数据库的方法？

> ID：10801567
> 
> 赞同：1
> 
> 时间：2012-05-29T14:52:24.917
> 
> 标签：java, android, sqlite

是否可以从 Android 中的多个数据库中获取数据`SQLite`？例如：`SELECT * FROM db1.tableA A, db2.tableB B WHERE A.id=B.id;`

`SQLiteOpenHelper`请帮忙，我在和`SQLiteDatabase`类中找不到任何相关的。谢谢

如果不可能。将大量记录插入数据库是否有任何快速方法？我有一个包含 3000 条记录的 XML 文件。插入它大约需要 3 到 4 分钟（这就是我将数据放入 db2 的方式）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T19:26:04.827

您可以像这样附加另一个 SQLite DB：

```
db.execSQL("attach database ? as userdb", new String[]{"/data/data/com.mycompany.myapp/databases/user.db"}); 
```

然后使用“userdb.table”从您的主数据库访问它。

[https://groups.google.com/forum/?fromgroups#!topic/android-developers/u3WYg-0FHZ0](https://groups.google.com/forum/?fromgroups#!topic/android-developers/u3WYg-0FHZ0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T15:00:14.943

很可能为单个 Android 应用程序使用多个数据库。有关类似问题，请参见[此处。](https://stackoverflow.com/questions/7848915/multiple-database-in-single-app-in-android)

如果您想避免使用我建议的多个数据库，那么有很多问题可以解决加快数据库访问时间的问题。我会看看这些资源：

[在 sqlite3 数据库中插入 1000000 行](https://stackoverflow.com/questions/10733023/inserting-1000000-rows-in-sqlite3-database/10733844#10733844) 链接到： [http ://tech.vg.no/2011/04/04/speeding-up-sqlite-insert-operations/](http://tech.vg.no/2011/04/04/speeding-up-sqlite-insert-operations/)

基本上，使用围绕整个插入语句的数据库事务（如上所述）。这通过为每个插入创建单独的事务来减少开销。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T15:07:45.593

一次查询可以同时查询两个不同的数据库，但您必须先使用 ATTACH 将它们放在一起。

SQLite ATTACH 关键字的文档在[这里](http://www.sqlite.org/lang_attach.html)

[这里](http://longweekendmobile.com/2010/05/29/how-to-attach-multiple-sqlite-databases-together/)有一个很好的示例，虽然它不在 java/android 代码中，但它显示了您完成所有操作所需的 SQL 命令。

[此页面](http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html)也涵盖了它（向下看大约 1/4）。

# jquery - jQuery跷跷板效应

> ID：10801568
> 
> 赞同：3
> 
> 时间：2012-05-29T14:52:28.563
> 
> 标签：jquery, css

我正在尝试用 Jquery 做一个海浪效果，但需要一些帮助来使用哪个插件。我希望酒吧上下移动，顶部的盒子也随之移动。这是我在 JsFiddler 上的代码：http: [//jsfiddle.net/semantic/LscQd/4/](http://jsfiddle.net/semantic/LscQd/4/)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:24:45.010

使用[jQuery Rotate 插件](http://code.google.com/p/jqueryrotate/)，我能够获得具有间隔和超时的跷跷板效果：

```
setInterval(function(){
    $(".bar").rotate({animateTo:15});
    $(".box").animate({left:284},1000);
    setTimeout(function(){
        $(".bar").rotate({animateTo:-15});
        $(".box").animate({left:0},1000);        
    }, 1000);
}, 2500);​ 
```

小提琴：http: [//jsfiddle.net/LscQd/10/](http://jsfiddle.net/LscQd/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:00:03.020

快速尝试，我知道不是很好，但应该作为一个有用的起点。使用 css 变换在 -30 到 30 度之间旋转跷跷板。希望能帮助到你

[http://jsfiddle.net/czAHU/1/](http://jsfiddle.net/czAHU/1/)

编辑：动画条看起来比整个包装要好得多。老实说，虽然我没想到它也会移动盒子，所以我可能会对此更加谨慎...... [http://jsfiddle.net/czAHU/2/](http://jsfiddle.net/czAHU/2/)

# ruby - Ruby 使用 each_slice.to_a

> ID：10801569
> 
> 赞同：6
> 
> 时间：2012-05-29T14:52:30.017
> 
> 标签：ruby, each

我正在尝试将数组细分为数组对。

例如：`["A","B","C","D"]`应该变成`[["A","B"],["C","D"]`.

我相信我已经成功了`arg.each_slice(2).to_a`。但是，如果我要`arg.length`在新数组上做，我仍然会得到 4。我希望得到 2（在上面的例子中）。

最后，我希望能够调用 to 的第一个元素，`arg`但`["A","B"]`目前，我仍然得到`"A"`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T14:57:31.003

```
array = ["A", "B", "C", "D"]

array
 => ["A", "B", "C", "D"]

array.each_slice(2).to_a
 => [["A", "B"], ["C", "D"]]

array.each_slice(2).to_a.length
 => 2 
```

也许你期望这`array.each_slice(2).to_a`会改变你原来的`array`，但在这里你会有新的`Array`对象，因为`each_slice`是非破坏性的方法，就像大多数红宝石一样。

```
new_array = array.each_slice(2).to_a
new_array
 => [["A", "B"], ["C", "D"]]
new_array[0]
 => ["A", "B"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:56:48.643

尝试

```
arg = arg.each_slice(2).to_a 
```

在改变那里实例状态的红宝石方法中，通常 `!`在最后。例如

```
hash1.merge!(hash2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:57:48.260

试试这个

```
1.9.2p180 :015 > ['A', 'B', 'C', 'D'].each_slice(2).to_a[0] 
```

=> [“A”，“B”]

工作正常

# php - 用于从电影创建屏幕截图的 PHP 函数/库

> ID：10801573
> 
> 赞同：3
> 
> 时间：2012-05-29T14:52:42.577
> 
> 标签：php, javascript, screenshot, movie

我有一个用户上传电影（MP4、FLV、OGV）的网站。

我需要一个 PHP 函数来从上传的电影中自动生成 JPG 格式的海报/屏幕截图。截图应该是电影的开场。

如果它是一个 javascript 实用程序（而不是 PHP），那也可以。

我什么也找不到。我应该去哪里看？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T14:58:15.340

看看[FFmpeg](http://ffmpeg.org)。这是一个非常强大的视频处理工具，可以从 PHP 和[`exec()`](http://php.net/exec). 例如，要从视频文件中提取第一帧，您可以使用：

```
ffmpeg -i video.flv -ss 0 -vframes 1 shot.png 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T14:58:06.250

[您可以使用ffmpeg-php](https://github.com/char0n/ffmpeg-php)轻松做到这一点。为此，您需要在服务器上安装 FFMPEG。

# php - mysql左连接回显最后一行

> ID：10801582
> 
> 赞同：0
> 
> 时间：2012-05-29T14:53:11.403
> 
> 标签：php, mysql

我有两张桌子`classifieds`和`state`.

分类广告 -`id, title, state_id`

状态 -`id, statename`

我正在尝试从州中呼出州名。我试过这个查询，但它只回显最后一行。

```
 <?php
    $query  = "SELECT * FROM classifieds ";
    $result = mysql_query($query) or die(mysql_query());
    while($row = mysql_fetch_array($result, MYSQL_ASSOC))
    {
   ?>

    <div>
   <span>Title: <?php echo $row['title'];?> </span>
    </div>

   <div>
   <span>Name: <?php echo $row['name'];?> </span>
    </div>

      $q = mysql_query("SELECT * FROM classifieds AS C
    LEFT JOIN  state AS S
    ON C.state_id = S.id");
    $z = array();

    while($state=mysql_fetch_array($q))
     {
      array_push($z,$state["statename"]);
     }

     ?>
    <div>
    <span>State: <?php foreach($z as $location) { echo $location; } ?></span>

    </div>

  <?php } // End of the first while loop ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:56:11.630

您需要在循环`echo`内移动您的命令。`while`否则，它只会在遍历所有行后才回显。

```
 <?php
 $q = mysql_query("SELECT * FROM classifieds AS C
LEFT JOIN  state AS S
ON C.state_id = S.state_id");
 while($state=mysql_fetch_array($q)){
    echo "Location: ".$state["statename"];
 }
 ?> 
```

**编辑：**使用您更新的代码，我可以看到您的问题是您首先获得所有 的列表`classifieds`，然后再次获得相同的列表并加入状态。您根本不需要进行第一次查询，只需第二个。

```
 <?php
 $q = mysql_query("SELECT C.*, S.statename 
       FROM classifieds AS C
       LEFT JOIN  state AS S
       ON C.state_id = S.state_id");
 while($row=mysql_fetch_array($q)){
    echo "Title: ".$row["title"]."<br />";
    echo "Name: ".$row["name"]."<br />";
    echo "Location: ".$state["statename"]."<br />";
 }
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:58:53.493

您正在覆盖`$z`每次循环迭代的值。如果它有来自数据库的多个结果，您还需要将 $z 设为一个数组，然后使用 array_push() 将 $state["statename"] 的值附加到 $z

```
<?php
$q = mysql_query("SELECT * FROM classifieds AS C
    LEFT JOIN  state AS S
    ON C.state_id = S.state_id");

$z = array();

while($state=mysql_fetch_array($q)){
    array_push($z,$state["statename"]);
}
?> 
```

然后在你的循环之后使用它来检查你的数组......

```
<?php print_r($z); ?> 
```

...这将循环遍历数组并执行您需要的格式

```
<?php
foreach($z as $location) {
    echo 'Location ' . $location . '<br/>';
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:56:45.100

您需要将 echo 语句放在 while 循环中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:57:06.627

尝试这个：

```
<?php
     $q = mysql_query("SELECT * FROM classifieds AS C LEFT JOIN  state AS S ON C.state_id = S.state_id");

      while($state=mysql_fetch_array($q))
      {
           $z =$state["statename"];
           echo "Location: " . $z . PHP_EOL;
      }
 ?> 
```

在您的原始代码中，循环外的 echo 语句只会执行一次，即只会显示最后一次`$z`分配的时间。将它放在循环中可确保它将为每一行数据执行。

# php - 避免 MySQL 存储空和空白数据

> ID：10801587
> 
> 赞同：-1
> 
> 时间：2012-05-29T14:53:21.230
> 
> 标签：php, mysql, database

如何避免 mysql 这样做（通过它自己或 php 脚本），即使一行中只有一个单元格是 null 或 whitspaced 像这样：`' '`。

我们使用常规方式插入数据：

```
 $sql = "INSERT INTO `rows` (`results1`, `results2`) VALUES ('$res1', '$res2')";
 $res = mysqli_query($dbc, $sql); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:56:16.857

1.  在发送数据之前在 PHP 中检查它。
2.  将表格的列标记为`NOT NULL`并在插入时使用该`TRIM()`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:27:43.150

试试下面的。// $res 是您作为用户输入或其他内容获得的值。

```
if(empty($res))
    {
    $error[] = "not able to send as value is null";
    } 
```

如果您有多个值，请使用数组。现在

```
 if(empty($error))
    {
$var = trim($res);
    // your insert code.
    } 
```

这肯定会帮助您避免空格和空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:55:56.060

在执行插入查询之前检查您的数据，并在查询中使用它们或使用占位符之前引用您的值，因为您容易受到 SQL 注入的攻击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:56:19.970

对于避免`NULL`s，您可以指定`NOT NULL`指令

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T16:10:38.710

```
$r1= trim($res1);
$r2= trim($res2);

if ($r1 ==''||$r2 ==''){

echo 'its null or whitespace';

} else {

 $sql = "INSERT INTO `rows` (`results1`, `results2`) VALUES ('$r1', '$r2')"; 
 $res = mysqli_query($dbc, $sql); 

} 
```

它的工作。

# css - Wordpress 联系表 7 可能是 IE8 中的 CSS 或 LESS 问题

> ID：10801594
> 
> 赞同：0
> 
> 时间：2012-05-29T14:53:37.583
> 
> 标签：css, wordpress, internet-explorer-8, less, contact-form-7

我的客户站点在 Wordpress 的 ContactForm7 插件提供的站点页脚中有一个联系表单。它在 Chrome、Firefox 和 IE9（以及几乎 IE7）中运行良好。我的主要问题出现在 IE 8 中，其中输入字段在物理上位于正确的位置 - 就在表单标签旁边 - 它们也是可点击的，您可以输入文本，但字段的表示方面出现在定义为的区域之外包含所有表单元素，因此给人的印象是文本输入区域不在它们应该在的位置。非常混乱。

这是问题的屏幕截图：

[http://www.fi-testing.co.uk/wpcf7-prob/image.jpg](http://www.fi-testing.co.uk/wpcf7-prob/image.jpg)

这是使用的标记，包括联系表单的简码：

```
<aside class="grid_4 omega cf" id="footer-contact-form">

            <h6>Send us a message...</h6>

        <?php echo do_shortcode('[contact-form-7 id="134" title="Footer"]'); ?>
    </aside> 
```

这是我在后端区域中设置的用于创建表单的标记：

```
<div class="cf">
   <label>Your Name*</label>[text* your-name] 
</div>

<div class="cf">
   <label>Your Email*</label>[email* your-email] 
</div>

<div class="cf">
   <label>Subject</label>[text your-subject] 
</div>

<div class="cf">
   <label>Your Message</label>[textarea your-message] 
</div>

<div class="cf">[submit class:submit "Send"]</div> 
```

这是相应的 CSS（采用 LESS 格式，但仍然很清晰）：

```
#footer-contact-form{

div.cf{
    width:100%;
    input, textarea{
        float:left;
        width:200px;
        padding:5px;
        background:#eeeeee;
        border:none;
        // .inner-shadow();
        &.submit{
        .blue-button();
        margin-left:80px;
    }
    }
    label{
        float:left;
        width:60px;
        margin-right:20px;
        color:@themeprimary;
        font-size:11px;
        font-size:1.1rem;
        font-style:italic;
    }

}
} 
```

我真的无法弄清楚问题可能是什么，因为只有 IE8 将表单的“视觉”方面抛到了右边。我猜这可能与我的标记生成的联系表格 7 代码有关，但我真的没有很多经验。

在 wordpress 或一般形式之前，有没有其他人遇到过这个问题？

任何帮助将不胜感激。

谢谢，

亚当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:49:36.470

在没有看到实际来源的情况下，我建议您添加`overflow: hidden;`到您的`.cf`课程中。您会这​​样做，因为您有 2 个元素浮动在父 div 中，并且从技术上讲，其中没有内容可供`.cf`类遵守。

我还建议稍微清理一下你的 CSS。

# asp.net - ASP.Net Web 应用程序可以上传到服务器吗

> ID：10801596
> 
> 赞同：0
> 
> 时间：2012-05-29T14:53:47.890
> 
> 标签：asp.net

我有一个 ASP.Net Web 应用程序。我想将它发布到 Windows 主机。但我不确定我是否能做到这一点。当我尝试发布一个**网站**时它是好的，但一个**Web 应用程序**？

如果我不能，有没有办法将 Web 应用程序转换为 Visual Studio 中的网站。因为当我尝试将 ASP.Net Web 应用程序的文件复制到 ASP.Net 网站时，我得到了太多我不理解的错误。

感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:05:49.277

您可以在 Visual Studio 中右键单击 Web 应用程序 -> 单击发布 -> 跟随 gui（我通常只是将其发布到我桌面上的文件夹中）。然后，您只需将生成目录中的文件上传到托管站点的站点根目录。您通常可以通过托管公司为您提供的 ftp 站点执行此操作。您确实要确保托管站点已为您正在使用的应用程序池安装并启用了正确版本的 .NET。这通常就是它的全部。

如果您收到有关缺少依赖项的错误，您将不得不与提供者联系。

# mvvm - 用户控件中的 MVVM 文本框绑定到不同的类型

> ID：10801598
> 
> 赞同：1
> 
> 时间：2012-05-29T14:54:00.827
> 
> 标签：mvvm, user-controls

我在网格内使用用户控件。此用户控件包含一个文本框，该文本框绑定了视图模型提供的对象的属性。我的问题是属性可以是字符串或整数。

我将依赖属性设置为字符串，因此它可以正常显示，但是如果用户在 int 字段中输入字符串，则视图模型不会引发验证错误，但我当然无法保存到数据库中。

用户控制 XAML

```
<UserControl x:Class="GenericFileTransferClient.Views.UserControlTextBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid Name="GridLayout">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="7*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Text="{Binding Path=LabelText}" VerticalAlignment="Center" Style="{StaticResource ResourceKey=TextBlockWrapping}" />
        <DockPanel Grid.Column="1">
            <Border DockPanel.Dock="Right"
                                ToolTip="" Style="{StaticResource BorderReportDetail}">
                <TextBlock Text="?" Style="{StaticResource TextBoxReportDetail}"></TextBlock>
            </Border>
            <TextBox Text="{Binding Path=TextBoxText}"/>
        </DockPanel>
    </Grid>
</UserControl> 
```

后面的用户控制代码

```
public partial class UserControlTextBox : UserControl
{
    public static DependencyProperty LabelTextProperty = DependencyProperty.Register("LabelText", typeof(String), typeof(UserControl));
    public static DependencyProperty TextBoxTextProperty = DependencyProperty.Register("TextBoxText", typeof(String), typeof(UserControl));

    public String LabelText
    {
        get { return (String)GetValue(LabelTextProperty); }
        set { SetValue(LabelTextProperty, value); }
    }

    public String TextBoxText
    {
        get { return (String)GetValue(TextBoxTextProperty); }
        set { SetValue(TextBoxTextProperty, value); }
    }

    public UserControlTextBox()
    {
        InitializeComponent();
        GridLayout.DataContext = this;
    }
    } 
```

在主网格中调用用户控件的示例

```
<views:UserControlTextBox LabelText="Report Name:" TextBoxText="{Binding Path=CurrentReport.ReportName}" Grid.Row="1" Grid.ColumnSpan="2"/>

            <TextBlock Text="Header:" Grid.Row="2"/>
            <CheckBox Grid.Column="1" Grid.Row="2" IsChecked="{Binding Path=CurrentReport.Header}" 
                      VerticalContentAlignment="Stretch" VerticalAlignment="Center" Name="HeaderCheckBox"/>

            <Grid Grid.Row="3" Grid.ColumnSpan="2" Visibility="{Binding IsChecked, ElementName=HeaderCheckBox, Converter={StaticResource BoolToVisConverter}}">

                <views:UserControlTextBox LabelText="# Row Header:" TextBoxText="{Binding Path=CurrentReport.HeaderRow}"/>
            </Grid> 
```

如您所见，CurrentReport.ReportName 是一个字符串，但 CurrentReport.HeaderRow 是一个 int。

有什么方法可以使依赖属性通用或基于传递给用户控件的参数。或者有什么方法可以在用户点击保存按钮之前进行验证？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:35:45.827

我会写一个简单的`IntToStringConverter`然后在你的`TextBoxText`绑定中使用它来将一个字符串传递给你的用户控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:50:29.360

我在这里写了很多时间。这种情况下最简单的方法是在您的视图模型中有一个字符串属性以绑定到您的视图。那么你只需要在你的 IDataErrorInfo 中验证这个属性是一个 int。如果成功，您可以在调用 save 命令之前将您的字符串转换为 int。

只要您的视图模型中有一个 int 属性，您就可以一直收到 BindingException 输入不可转换为 int。

ps：确保这一点的一种方法是使用数字文本框或仅允许数字的屏蔽行为。

# ios - IOS - 如何更新 presentModalViewController 中的视图？

> ID：10801599
> 
> 赞同：0
> 
> 时间：2012-05-29T14:54:02.260
> 
> 标签：ios, presentmodalviewcontroller

我是IOS开发的新手。在我的应用程序中，我想替换正在呈现的视图模型。我通过调用显示我的初始视图：presentModalViewController

当我替换视图时，我不希望整个动画运行。我只是想更改要更新的 presentModalViewController 底层视图。

当我设置：

```
self.presentModalViewController.view = myCustomViewController.view 
```

它第一次工作得很好，并且确实替换了视图但是当我再次尝试这样做并在我的应用程序的其他时间点替换视图的内容时，presentModalViewController 不会更新。

如何更新 presentModalViewController 中的视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:03:35.480

这实际上取决于您要达到的目标。

1 - 新视图是否具有全新的行为？也许使用新的`UIViewController`可能是一个解决方案。

2 - 如果您对第一个回答“**否**”，那么`UIView`XIB 内的第二个就可以解决问题。只要您可以使用`IBOUtlet`.

* * *

**编辑1：**

> 我通过调用显示我的初始视图：presentModalViewController

如果您正在展示它（这就是您所在的位置），那么您的行动方案应该在其中，而不是在外面。例如：

```
self.view = mySecondaryView; 
```

# sql - MS Query SQL - 追加数据

> ID：10801601
> 
> 赞同：0
> 
> 时间：2012-05-29T14:54:10.740
> 
> 标签：sql, excel

是否可以使用 MS Query 将行从一个 Excel 工作表附加到同一工作簿中的另一个？具体来说，SQL 是什么来完成它？

提供一些背景知识：我有一个连接到 SQL Server 数据库的工作表，我想将它返回的行附加到另一个工作表，从而创建一个审计跟踪。

希望这有某种意义！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:19:05.180

我在审计表中使用 UNION ALL 将 aduit 表与 SQL Server 表连接起来：

```
SELECT *
FROM Audit
UNION ALL
SELECT *
FROM SQLServer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:58:09.967

AFAIK MS Query 仅替换电子表格中的数据。一个选项是在更新查询以将任何记录复制到单独的审计工作表后创建一个您运行的宏。

另一种选择是在 sql server 中创建审计跟踪（这可能比您想要解决的要多一点）

# json - me/home JSON 回复中的“故事”和“消息”有什么区别

> ID：10801604
> 
> 赞同：5
> 
> 时间：2012-05-29T14:54:26.427
> 
> 标签：json, facebook-graph-api

我正在构建一个从多个社交媒体获取状态更新的应用程序。已经让 Twitter 像魅力一样工作了。但现在我必须使用 Facebook 的 Graph API，神秘的事情不断出现。就像帖子包含消息或故事一样（据我所知，不是两者都包含）。我还没有找到两者之间的区别。

我认为这可能与帖子的类型有关，但我没有发现类型链接、状态、照片和视频都可以包含消息或故事。然后是我只看到一条消息的 swf。

谁能告诉我这里有什么交易？一个是真正的状态更新而另一个只是“喜欢”或类似的东西的真正唯一区别是什么？

示例 JSON：

```
{
        "id" : "<<Some ID>>",
        "from" : {
            "name" : "<<A Friend>>",
            "id" : "<<Some ID>>"
        },
        "message" : "Maakt zich op voor ronde twee in de presentatiedienst bij #omropfryslan Zometeen tussen vier en zes live!",
        "icon" : "https://fbcdn-photos-a.akamaihd.net/photos-ak-snc7/v85006/23/<<Some ID>>/app_2_<<Some ID>>_7567.gif",
        "actions" : [{
                "name" : "Comment",
                "link" : "https://www.facebook.com/<<Some ID>>/posts/<<Some ID>>"
            }, {
                "name" : "Like",
                "link" : "https://www.facebook.com/<<Some ID>>/posts/<<Some ID>>"
            }, {
                "name" : "@<<A Friend>> on Twitter",
                "link" : "https://twitter.com/<<A Friend>>?utm_source=fb&utm_medium=fb&utm_campaign=<<A Friend>>&utm_content=<<Some ID>>"
            }
        ],
        "type" : "status",
        "application" : {
            "name" : "Twitter",
            "namespace" : "twitter",
            "id" : "<<Some ID>>"
        },
        "created_time" : "2012-05-29T13:51:01+0000",
        "updated_time" : "2012-05-29T13:51:01+0000",
        "comments" : {
            "count" : 0
        }
    }, 
```

上面有类型状态和一条消息。下面有类型状态和故事。

```
{
        "id" : "<<Some ID>>",
        "from" : {
            "name" : "<<A Friend>>",
            "id" : "<<Some ID>>"
        },
        "story" : "<<A Friend>> likes a photo.",
        "story_tags" : {
            "0" : [{
                    "id" : <<Some ID>>,
                    "name" : "<<A Friend>>",
                    "offset" : 0,
                    "length" : 14,
                    "type" : "user"
                }
            ]
        },
        "type" : "status",
        "created_time" : "2012-05-29T13:40:42+0000",
        "updated_time" : "2012-05-29T13:40:42+0000",
        "comments" : {
            "count" : 0
        }
    }, 
```

感谢您的回复，如果我显然是船长，我很抱歉！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:19:29.680

区别是非常基本的：

*   状态是用户自己编写和发布的内容
*   故事是由于用户采取的行动而代表用户发布的内容。

当然，某些应用程序可能会通过发布与故事相同的状态更新来混淆问题，这仅仅是因为状态更新几乎可以包含任何自由文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-20T15:32:57.970

如果有人想知道如何处理这个问题，在我的应用程序中，我基本上做了以下事情：

```
var newPost = ...data.message || ...data.story 
```

在我的应用程序中，我正在做类似的事情；在我的网站上显示社交媒体提要，但由于它们是故事而不是消息，其中一些返回为未定义。这样，如果消息未定义，它将回退到故事。

将 ... 替换为但是您的回复会返回给您；D

# jquery - jQuery：日期选择器开始在对话框中打开，仅在 IE 中

> ID：10801605
> 
> 赞同：3
> 
> 时间：2012-05-29T14:54:31.947
> 
> 标签：jquery, jquery-ui, internet-explorer-8, datepicker, jquery-dialog

我在使用 jQuery 对话框时发现了一个有趣的错误，其中对话框中的第一个字段是日期选择器。在 IE 中打开对话框时，第一个字段的日期选择器会自动打开。这在其他浏览器中不会发生。有谁知道如何防止这种情况在 IE 中发生？

我曾尝试将 a`.blur()`放入该`document.ready`部分，但没有奏效。有没有其他人看到这个问题？

我正在使用 MVC3 和 IE8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T16:22:51.893

@ManseUK 的解决方案实际上存在问题；当对话框打开时，用户点击日期选择器的文本框，它不会第一次打开。此解决方案应该适用于所有预期的情况。

我不确定作者是谁，但我在[CleanCode.co.nz上找到了解决方案](http://www.cleancode.co.nz/blog/247/jquery-datepicker-pops-dialog-open)

HTML

```
<input type="button" value="Show Popup" id="button"/>
<div id="popup">
    <div>
        Date: <input type="text" id="datePicker3" >
    </div>
    <div>
        Name: <input type="text" id="UserName">
    </div>
</div>​ 
```

jQuery

```
$(document).ready(function() {
    $("#popup").dialog({
        autoOpen: false,
        resizable: false,
        height: 300,
        width: 400,
        modal: true,
        open: function() {
            $('#datePicker3').removeAttr("disabled");
        },
        close: function () {
            $('#datePicker3').datepicker('hide');
        }
    });

    $("#datePicker3").datepicker();

    $("#button").click(function() {
        $('#datePicker3').attr("disabled", true);

        $("#popup").dialog("open");
    });
});​ 
```

[工作 JSFiddle](http://jsfiddle.net/PpAfN/1/)

*您需要启用jQuery UI，然后点击运行

# jquery - jquery ajax 从纯文本/文本中检索值

> ID：10801606
> 
> 赞同：0
> 
> 时间：2012-05-29T14:54:36.163
> 
> 标签：jquery, ajax

我遇到了以下问题。

页面请求用户和密码。如果用户和他的密码存在，则页面输出纯 1。否则输出 0。

如何使用 jquery ajax 检查并根据输出进一步处理它？

```
$(function () {

$("#checkCode").click(function () {

    var var_pCode = $("#ctl00_ContentPlaceHolder1_tbPartner").val();
    var var_cCode = $("#ctl00_ContentPlaceHolder1_tbCode").val();
    var myResult

    $.ajax({
        url: "codeValidator.aspx",
        dataType: "text",
        data: { pCode: var_pCode, cCode: var_cCode }
    }).done(function (msg) {
        //alert(msg);
        if (msg = "1") { alert('111'); }
        else {alert('000')}
    });

}); 
```

});

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:56:17.770

在 asp.net 我们必须做 msg.d 试试这个。其次，您在 url 中缺少 webmethod 名称。[这是一个很好的例子，你通过jquery ajax 和 asp.net](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)调用服务器端方法

```
$.ajax({
        url: "codeValidator.aspx/SomeStaticWebMethodOfServerSide",
        dataType: "text",
        data: { pCode: var_pCode, cCode: var_cCode }
    }).done(function (msg) {
        //alert(msg);
        if (msg.d == "1") { alert('111'); }
        else {alert('000')}
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:56:29.277

您正在 if 语句中进行分配。

它应该是

```
if ("1" == msg) {  } 
```

# linux-kernel - linux 内核 2.6.38.8 配置上的 APM 在哪里？

> ID：10801610
> 
> 赞同：0
> 
> 时间：2012-05-29T14:54:46.143
> 
> 标签：linux-kernel, xenomai

我关注[这个文档](http://www.blaess.fr/christophe/2011/12/28/xenomai-2-6-0-sur-ubuntu-11-10/)。

它说我应该关闭 linux 内核 2.6.38.8 上的 APM 模块。

但我在电源管理和 ACPI 选项下找不到它。

![在此处输入图像描述](../Images/cfc02cc2bfdcbf2c91afe535e6cc54d2.png)

如何关闭 APM？

APM 是否与运行时 PM 核心功能相同？

谢谢~

# netbeans - 带有 Netbeans 和 Glassfish 的 J2EE 应用程序（未找到 [EntityType]）

> ID：10801612
> 
> 赞同：2
> 
> 时间：2012-05-29T14:54:52.243
> 
> 标签：netbeans, glassfish, ejb-3.0

我正在使用 NetBeans IDE 7.0.1 和 Glassfish 3.0.1。

我正在使用 JPA + EJB3.0 + JSF2.0 构建一个 J2EE 应用程序，当我尝试部署我的项目时，我收到了这个错误：

```
Caused by: java.lang.IllegalArgumentException: No [EntityType] was found for the key class [objetmetier.Application] in the Metamodel - please verify that the [Entity] class was referenced in persistence.xml using a specific <class>objetmetier.Application</class> property or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element 
```

对我来说，这是 glassfish 服务器上的 EJB3.0 部署问题。但我不明白，因为当我查看 glassfish 管理控制台时，它们已部署在服务器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:58:38.370

我，我今年在学习期间已经解决了这个问题：你应该将你的 netbeans 更新到 7.1.0 版本。您的 glassfish 和 Netbeans 版本不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:11:13.680

事实上，问题在于 EJB 3.1 与 NetBeans 7.0.1 的管理。EJB 无法在 Glassfish 服务器上正确部署。

# javascript - 文本框的Javascript自动完成（不是文本字段）

> ID：10801613
> 
> 赞同：1
> 
> 时间：2012-05-29T14:54:53.737
> 
> 标签：javascript, jquery, autocomplete

我有一个实际的多行文本框，其中包含文本段落。我想要自动完成功能，该功能将由标记字符（例如“#”）激活。自动完成下拉菜单应该相对于正在完成的单词“就地”显示，而不是在框的底部。

当然，还有很多优秀的文本字段自动完成库，比如 vanilla jQuery 实现。但这些似乎都是针对单个值的，而不是用于在文字处理器上实现浏览器内拼写检查。

是否有文本框而不是文本字段的自动完成示例？

任何已知的图书馆？

# java - android从url打开文件

> ID：10801618
> 
> 赞同：0
> 
> 时间：2012-05-29T14:55:17.677
> 
> 标签：java, android, google-docs

我在打开几个文件时遇到了一些问题。我有关于文件（id、名称、类型等）的描述的数据库。这些文件最初保存在服务器上的另一个文件夹中。如果我只知道以下网址，是否可以打开它们： http:// ***** ** *** **** /resource/view.php?id=11 ？我设法使用 webview 打开一些文件，但我还需要打开 pdf 文件。顺便说一句，可以在谷歌视图上打开 doc 文件吗？因为我试过了，它没有打开它，但它在下次尝试时打开了 pdf 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T07:29:15.110

```
WebView urlWebView = (WebView)findViewById(R.id.containWebView);
urlWebView.setWebViewClient(new AppWebViewClients());
urlWebView.getSettings().setJavaScriptEnabled(true);
urlWebView.getSettings().setUseWideViewPort(true);
urlWebView.loadUrl("http://docs.google.com/gview?embedded=true&url="
            + "YOUR_DOC_URL_HERE"); 

public class AppWebViewClients extends WebViewClient {

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    // TODO Auto-generated method stub
    view.loadUrl(url);
    return true;
}

@Override
public void onPageFinished(WebView view, String url) {
    // TODO Auto-generated method stub
    super.onPageFinished(view, url);

} 
```

}

# c# - 便携式流编写器 c#

> ID：10801621
> 
> 赞同：1
> 
> 时间：2012-05-29T14:55:25.307
> 
> 标签：c#, portability, streamwriter

我目前正在制作一个需要打印到文本文件的应用程序，我无法将其移植到下面是我目前所拥有的

```
FileStream fs = new FileStream((@"|DataDirectory|\print" + fileName + ".txt"), FileMode.Create, FileAccess.Write);
            using (StreamWriter writer = new StreamWriter(fs))
            {
                    write.write("HelloWorld"
            } 
```

错误出现在第一行，说我使用了无效字符，我假设这是因为 |DataDirectory| 但除此之外，我不知道如何在用户的机器上使用它？

编辑：我不再需要检查项目，但@leppie 的评论听起来像是我的代码的问题。标记的答案作为替代方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:00:02.520

如果您正在开发桌面应用程序，请尝试以下操作：

```
string dir = Path.GetDirectory(Assembly.GetExecutingAssembly().Location);
string filename = Path.Combine(dir, "print", filename + ".txt");
FileStream fs = new FileStream(filename,....); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:07:32.953

将第一行修改为以下内容：

```
var fs=new FileStream(
       string.Format(@"{0}\print\{1}.txt",
       Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData),
       filename),FileMode.Create,FileAccess.Write); 
```

# asp.net - Asp.net WebApi HttpClient 强类型 PostAync

> ID：10801622
> 
> 赞同：6
> 
> 时间：2012-05-29T14:55:25.457
> 
> 标签：asp.net, asp.net-web-api, dotnet-httpclient

我正在尝试发布到 Asp.Net WebApi 发布方法：

```
 // POST /api/citycode
public HttpResponseMessage<CityCode> Post(CityCode citycode)
{
    try
    {
        Test.SelfTrackingEntities.BusinessLayer.BusinessManagers.CityCodeManager myCityCodeManager = new CityCodeManager(Utility.GetConnectionString());
        var id = myCityCodeManager.Create(citycode);

        var response = new HttpResponseMessage<Test.SelfTrackingEntities.BusinessLayer.BusinessEntities.CityCode>(citycode) { StatusCode = HttpStatusCode.Created };
        response.Headers.Location = new Uri(VirtualPathUtility.AppendTrailingSlash(Request.RequestUri.ToString()) + citycode.Name);
        return response;
    }
    catch (Exception e)
    {
        var response = new HttpResponseMessage(HttpStatusCode.Conflict);
        response.Content = new StringContent(e.Message);
        throw new HttpResponseException(response);
    }
} 
```

客户电话是：

```
var objectContent = CreateJsonObjectContent(citycode);
objectContent.Headers.ContentType = new System.Net.Http.Headers.MediaTypeHeaderValue("application/json");
var requestMessage = new HttpRequestMessage<CityCode>(citycode, jsonMediaType);
return httpClient.PostAsync(addressSuffix, objectContent).ContinueWith(task =>
{
    var responseMessage = task.Result;
    return responseMessage.Content.ReadAsAsync<CityCode>().ContinueWith(readTask =>
    {
        return readTask.Result;
    });
}).Unwrap(); 
```

但是服务器从不接听电话，我使用的是 JsonNetFormatter 而不是内置的格式化程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:15:25.683

您是否尝试过 HttpClient ( [http://msdn.microsoft.com/en-us/library/system.net.http.httpclient(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient(v=vs.110).aspx) )？

这是使用 MVC 4 Web Api 的优秀 HTTP 客户端。看看这个：

```
 var config = new HttpConfiguration();
        config.Routes.MapHttpRoute("default", "api/{controller}/{id}", new { id = RouteParameter.Optional });

        var server = new HttpServer(config);
        var client = new HttpClient(server);

        dynamic s = new ExpandoObject();
        s.comeValue = 1;

        var d = JsonConvert.SerializeObject(s);
        var content = new StringContent(d, Encoding.UTF8, "application/json");

        var postResult = client.PostAsync("http://localhost:29722/api/whatevercontroller", content).Result; 
```

# javascript - IE DOMContentLoaded documentElement.doScroll

> ID：10801625
> 
> 赞同：8
> 
> 时间：2012-05-29T14:55:41.040
> 
> 标签：javascript, javascript-events

有什么理由为什么只有当流行的 JS 库中的窗口不在 iframe 中时才实现[Diego Perini 的 IE DOMContentLoaded 技巧？](http://javascript.nwbox.com/IEContentLoaded/)

jQuery：

```
//If IE and not a frame continually check to see if the document is ready

  var toplevel = false;

  try {
    toplevel = window.frameElement == null;
  } catch(e) {}

  if ( document.documentElement.doScroll && toplevel ) {
    doScrollCheck();
  } 
```

原型：

```
document.observe('readystatechange', checkReadyState);
if (window == top)
  timer = pollDoScroll.defer(); 
```

它们都检查窗口是否等于顶部，如果是`document.documentElement.doScroll('left');`则用于检查就绪状态。但是为什么不什么时候用`window != top`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T15:16:03.963

[YUI 库的此错误报告](http://yuilibrary.com/projects/yui2/ticket/2008289)指出，框架文档中的 doScroll 与在顶层运行时的工作方式不同（当文档未准备好时不会引发错误）。

# sql - 在 oracle 中的视图上触发

> ID：10801631
> 
> 赞同：2
> 
> 时间：2012-05-29T14:56:00.777
> 
> 标签：sql, oracle, plsql, triggers

我有一个基本的疑问..我可以`trigger`将`insert`视图更改为新表吗？

例子

```
create or replace trigger iam_insert
  instead of insert on test123
  FOR EACH ROW

BEGIN

  if inserting then

.
.
.
  end if;

end; 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:56:43.953

是的，这就是`INSTEAD OF`视图的触发点。您可以将`INSERT`针对复杂视图的操作转换为对基表（或视图甚至不引用的表）上的任何类型的 DML 操作。

但是，一般来说，很少会遇到`INSTEAD OF`真正适合触发器的情况。它们当然存在，只是很少见。如果您尝试允许插入视图以将数据插入到视图的基表中，我将绝对确定您不能确保视图本身是保留键的，这将允许您对视图执行 DML无需定义触发器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T17:01:27.737

是的，INSTEAD OF 触发器就是为此而设计的。请注意，如果您在视图上定义 INSTEAD OF 触发器，然后在视图上执行数据操作（例如 INSERT），您的触发器将*代替*操作运行。Oracle 不会像没有触发器那样自动插入数据——这现在是您的责任。

# php - CakePHP 和 tinyint 作为布尔值

> ID：10801632
> 
> 赞同：8
> 
> 时间：2012-05-29T14:56:01.773
> 
> 标签：php, cakephp

如何强制 CakePHP 2.x 检索 tinyint 数据库列，而不是布尔值而是 tinyint？

MySQL：

```
Column        |    type
-------------------------------
...           |    ...
category_id   |    tinyint(1)
...           |    ... 
```

蛋糕PHP：

```
$this->request->data = $this->Question->read();
var_dump($this->request->data['Question']['category']); 
```

该值始终为 0（如果我作为类别 id 获取的问题 0）或 1（如果问题具有任何其他类别 id）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T15:07:43.527

改为使用`TINYINT(2)`。如果长度为 1，Cake 将其视为布尔值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-21T23:49:19.460

正确的方法（CakePHP3），如果有人仍然有这个问题

模型\UsersTable.php

```
protected function _initializeSchema( Schema  $schema)
{
    //this is a bigInt(20) field (other same type known Cakephp problem)
    $schema->columnType('OtherField'  , 'string');

    //this is a tinyint field
    $schema->columnType('Type'        , 'integer');

    return $schema;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-21T12:15:45.103

这里给 cakephp4 让路

```
use Cake\Database\Schema\TableSchema;

class UsersTable extends Table
{
    protected function _initializeSchema(TableSchema $schema)
    { 
        $schema->setColumnType('my_column', 'integer');

        return $schema;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-23T10:58:54.187

下面对我有用。

```
$result = $this->Question->find('first', array('conditions'=>array('id'=>$id),'fields'=>array('CAST(Question.category AS SIGNED) as category')));
echo $result[0]['category']; 
```

# jquery - 如何在具有图像的 div 上显示选中的 div

> ID：10801636
> 
> 赞同：1
> 
> 时间：2012-05-29T14:56:14.937
> 
> 标签：jquery

我目前正在为一个调查项目工作。我在一些调查中看到了图像问题。我想在我的项目中实现它。所以我有这样的想法。

这是我的代码。

```
<div  id="image1"    onclick="Imagecheckbox(this);">
    <img src="https://www.google.co.in/images/srpr/logo3w.png" alt="Image not found" />
</div>
<div  id="image2"    onclick="Imagecheckbox(this);">
   <img src="https://www.google.co.in/images/srpr/logo3w.png" alt="Image not found" />
</div>
 <div  id="image3"    onclick="Imagecheckbox(this);">
    <img src="https://www.google.co.in/images/srpr/logo3w.png" alt="Image not found" />
</div> 
```

所以当我点击任何图像时，我想展示这样的东西。 ![在此处输入图像描述](../Images/2bcd028ad4f0fc43f497d4d032501f38.png)

所以我正在动态创建一个 div 并附加到这个。但它不工作。这是我的代码。

```
 function Imagecheckbox(div) {
        var clickeddiv = $('#' + div.id);
        $("<div id='mydiv' style='background:yellow;z-index:1;height:100;width:100;align:right;vertical-align:bottom;etc...'></div>").appendTo($(clickeddiv)); 
    } 
```

我怎样才能做到这一点 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:01:26.847

首先，避免使用`onclick`属性。如果您已经在页面中包含了 jQuery，那么您不妨充分利用它。

为此，您需要添加包含图像的元素以及`position: relative;`包含刻度的元素。`div``position: absolute``div`

HTML

```
<div id="images">
    <div>
        <img src="https://www.google.co.in/images/srpr/logo3w.png" alt="Image not found" />
    </div>
    <div>
        <img src="https://www.google.co.in/images/srpr/logo3w.png" alt="Image not found" />
    </div>
    <div>
        <img src="https://www.google.co.in/images/srpr/logo3w.png" alt="Image not found" />
    </div>
</div> 
```

jQuery

```
var $tick = $("<div />").addClass("tick");
$("#images div").click(function() {
    if ($(this).find(".tick").length) {
        $(this).find(".tick").remove();
    }
    else {
        $(this).append($tick);
    }
}); 
```

CSS

```
#images div {
    position: relative;
}
#images div .tick {
    background-image: url('tick.gif');
    bottom: 0;
    right: 0;
    width: 25px; /* amend as needed */
    height: 25px; /* amend as needed */
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:01:02.487

尝试这个：

```
function Imagecheckbox(div) {
    var clickeddiv = $('#' + $(div).attr('id'));
    $("<div id='mydiv' style='background:yellow;z-index:1;height:100;width:100;align:right;vertical-align:bottom;etc...'></div>").appendTo($(clickeddiv)); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T15:04:38.933

无需在每次单击时使用 jQuery 创建和删除元素：您可以获得与伪元素样式相同的效果，例如

**HTML**

```
<div id="images">
    <div id="image1">
        <img src="https://www.google.co.in/images/srpr/logo3w.png">
    </div>
    <div id="image2">
        <img src="https://www.google.co.in/images/srpr/logo3w.png">
    </div>
    ...
</div> 
```

**jQuery**
（只是`toggleClass()`父元素上的事件委托，因此您将避免为每个附加处理程序`div`）

```
$('#images').on('click', 'div', function() {
  $(this).toggleClass('selected');
}); 
```

**CSS**

```
#images > div.selected {
   position  : relative;
   z-index   : 1;
}

#images > div.selected:after {
   content   : "";
   position  : absolute;
   right     : 0;
   bottom    : 0;
   width     : ...;
   height    : ...;
   background : url(selected-tick.gif) center center no-repeat;   
} 
```

伪元素适用于所有现代浏览器，甚至适用于`IE8+`

# java - 为什么我的输出为空？

> ID：10801643
> 
> 赞同：2
> 
> 时间：2012-05-29T14:56:28.860
> 
> 标签：java

所以我尝试在网上进行研究，我觉得它是我的 toString()，但它在某种程度上是正确的，我想不出任何其他方式。

我希望能够输出：Lexie-高度：2.6 英尺。出生日期：2009 年 11 月 5 日

我的代码如下所示：

```
import java.util.*; 
class Kid {  
    String name; 
    double height; 
    GregorianCalendar bDay; 
    public Kid () { 
        this.name = "HEAD";
        this.height = 1; 
        this.bDay = new GregorianCalendar(1111,1,1); 
    } 

    public Kid (String n, double h, String date) { 
        StringTokenizer st = new StringTokenizer(date, "/", true);
        n = this.name;
        h = this.height;
    } 
    /**
    public String toString() { 
        return (this.name + ", Height: " + this.height + "ft., Born: "
        + this.month + "/" + this.day + "/" + this.year);
    } 
    */
    public String toString() {
        Calendar currentDate = Calendar.getInstance();
        return (this.name + ", Height: " + this.height + "ft., Born: "
        + this.bDay);
    }
} //end class 
```

调用 Kid 类如下

```
class Driver { 
    public static void main (String[] args) { 
        Kid kid1 = new Kid("Lexie", 2.6, "11/5/2009");
        System.out.println(kid1.toString());
    } //end main method 
} //end class 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T14:58:50.630

您在构造函数中的表达式是错误的方式 - 你有`n = this.name`你应该有的地方`this.name = n`。同样对于`this.height`。此外，您当前根本没有设置该`bDay`字段。因此所有领域确实是`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:03:32.630

试试这个：

```
public Kid (String n, double h, String date) { 
        StringTokenizer st = new StringTokenizer(date, "/");
        this.name = n;
        this.height = h;
        this.bDay = new GregorianCalendar(Integer.parseInt(st.nextToken()), Integer.parseInt(st.nextToken()), Integer.parseInt(st.nextToken()));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T15:03:17.807

尝试修改您的构造函数和 bDay 的类型：

```
private static final String DATE_FORMAT = "dd/MM/yyyy";
String name; 
double height; 
Date bDay; 

public Kid () { 
    this.name = "HEAD";
    this.height = 1; 
    this.bDay = new Date(); 
} 

public Kid (String n, double h, String date) { 
    DateFormat df = new SimpleDateFormat(DATE_FORMAT);
    this.bDay = df.parse(date);
    this.name = n;
    this.height = h;
} 

public String toString() {
    DateFormat df = new SimpleDateFormat(DATE_FORMAT);
    return (this.name + ", Height: " + this.height + "ft., Born: "
    + df.format(this.bDay));
} 
```

# sql-server - 如何使用 SQL Server 未记录的 -P 开关？

> ID：10801648
> 
> 赞同：1
> 
> 时间：2012-05-29T14:57:00.433
> 
> 标签：sql-server, parallel-processing, switch-statement

我正在寻找语法。实际上，我需要通过并行性检查查询是否使用了多个处理器，但只有单处理器机器。我读了几个地方 -P 开关，但找不到如何使用它....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:16:46.773

[本文](http://blogs.solidq.com/fabianosqlserver/post.aspx?id=43&title=fooling%20statistics%20and%20number%20of%20cpus%20v1)对如何使用它进行了完整的演练。

只需添加`;-P16`到 SQL Server 配置管理器中启动参数列表的末尾并重新启动服务。

重新启动后`SELECT cpu_count FROM sys.dm_os_sys_info`应该表明 SQL Server 认为您有 16 个处理器。

你也可以考虑

```
DBCC OPTIMIZER_WHATIF(CPUs, 16) WITH NO_INFOMSGS; 
```

作为实现相同目的的一种侵入性较小（但同样未记录）的方式。[更多细节在这里。](http://sqlity.net/en/828/optimizer-what-if-i-had-more-cpus/)

# lua - Lua中的Lua缩进代码

> ID：10801649
> 
> 赞同：15
> 
> 时间：2012-05-29T14:57:01.363
> 
> 标签：lua, pretty-print

是否存在缩进 Lua 代码的 Lua 代码？

我有很多 lua 代码，缩进会有所帮助，而且它在纯 lua 环境中。

为我的问题辩护：对于你们中的一些人来说，这里的情况听起来是不可能的。这与请求 Emacs Lisp 代码格式化文本非常相似。这是一个真实的工作（公司内部）Lua 环境。这是一个纯lua环境。我正在寻找可以缩进 Lua 代码的 Lua 工具，而不是关于最佳编辑器的意见。Paul Kulchenko 提供了一个惊人的解决方案，Yusuf X 也是如此。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T17:29:08.950

我已经编写了一个[Lua 美化](http://notebook.kulchenko.com/programming/lua-beautifier-in-55-lines-of-perl)器，并将它应用到我的项目中，其中包含大量 Lua 文件（总共大约 8k 行）。美化器在 Perl 中（是的，我看到问题是关于它在 Lua 中），但是（1）它只有 55 行，它应该很容易翻译成 Lua（我只是没有时间这样做然而），以及（2）您可以在其他地方格式化您的文件并传输回您的环境（除非您需要定期进行这种重新格式化）。

这个美化器基于另一个基于[Lua 的](http://www.userpixel.com/486)美化器（截至 2013 年 3 月 11 日的 udead 链接；[网络存档副本](http://web.archive.org/web/20120830041232/http://www.userpixel.com/486)），但原来的美化器并没有处理我感兴趣的所有案例，所以我最终重写了它。不过，它可能仍然对您有用。

美化器不会改变行结构（这是要求之一），这使它易于检查，但会改变缩进和格式（并处理嵌入式匿名函数和其他类似事情的复杂情况）。该链接包括它的一些示例。您还可以查看我为我们的项目所做的大部分转换文件的长期提交：[https](https://github.com/pkulchenko/ZeroBraneStudio/commit/85be27559058ce085e95cef47de2c11185f9211a) ://github.com/pkulchenko/ZeroBraneStudio/commit/85be27559058ce085e95cef47de2c11185f9211a 。

如果您只是在寻找一种简单的方法来缩进您的文件（而不是将缩进逻辑集成到您的应用程序中），那么您可以使用[ZeroBrane Studio IDE](http://studio.zerobrane.com)（`Edit | Source | Correct Indentation`或`Ctrl-I`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:46:10.297

这是一个： http: [//lua-users.org/wiki/SourceCodeFormatter](http://lua-users.org/wiki/SourceCodeFormatter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-22T08:24:09.940

我尝试了其中的一些，但没有真正的成功。然后我找到了解决方案：基于 Eclipse 的 Lua 开发工具。

[http://eclipse.org/koneki/ldt/](http://eclipse.org/koneki/ldt/)

下载您需要的版本（如果您有 64 位 Windows，则 32 位版本不起作用）。运行 .exe（无需安装！），然后运行`ctrl+shift+f`，您的代码就打印好了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T22:44:45.880

试试这个用 Lua 编写的代码格式化程序，它有几个选项，如果你想在选项之外自定义它，你可以随时编辑它：

[http://lua-users.org/wiki/SourceCodeFormatter](http://lua-users.org/wiki/SourceCodeFormatter)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T20:40:41.033

听起来[Serpent](http://notebook.kulchenko.com/programming/serpent-lua-serializer-pretty-printer)可能就是您要找的东西。漂亮地打印带有缩进的 Lua 源代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-07T12:08:39.807

还有[https://github.com/LuaDist/luapretty](https://github.com/LuaDist/luapretty)

虽然它是基于 Lua 的，但它需要一些库。请参阅自述文件。

# objective-c - 我可以在Objective C中使用枚举作为属性吗

> ID：10801651
> 
> 赞同：30
> 
> 时间：2012-05-29T14:57:04.863
> 
> 标签：objective-c, ios, xcode, properties, enums

我看到习惯使用布尔属性作为标志。类似的东西：

```
@property (nonatomic) BOOL commaAlreadyIntroduced; 
```

我需要类似的东西，但至少有 3 或 4 个状态。

我可以使用枚举吗？

独立枚举应如下所示：

```
typedef enum stackState{
    empty, oneOperand, operandAndOperator, fullStack
}stackState; 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-29T14:58:49.787

是的，这不是问题：

```
@property (nonatomic, assign) stackState yourIvar; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-01T01:56:46.490

```
@property (nonatomic, assign) enum stackState stackStateVar; 
```

如果没有添加“枚举”，我的单元测试会一直显示错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-26T21:18:42.947

@property (nonatomic, assign) enum stackState yourIvar;

*（在我添加enum*之前一直出错）

# ruby - 如何按住 watir webdriver 中的控制键

> ID：10801661
> 
> 赞同：3
> 
> 时间：2012-05-29T14:57:31.777
> 
> 标签：ruby, watir, watir-webdriver, firewatir

我今天在我的项目中遇到了一个小问题，我需要按住 Control 键一会儿，然后选择 {n} 行。

下面是我的代码片段，非常感谢任何帮助。

!!!...我想按住控制键点击一行，然后点击另一行，最后松开控制键...！！！

而（enclosure_count_remove > 0）

```
 $browser.element(:xpath,"//table[@id ='selectConfiguration']/tbody/tr[0]").click(:control);
     $browser.element(:xpath,"//table[@id ='selectConfiguration']/tbody/tr[1]").click(:control);
     enclosure_count_remove -= 1; 
```

结尾

下面给出了我尝试的第二种方法

而（enclosure_count_remove > 0）

```
 $browser.send_keys :control
     $browser.element(:xpath,"//table[@id ='selectConfiguration']/tbody/tr[0]").click;
     $browser.element(:xpath,"//table[@id ='selectConfiguration']/tbody/tr[1]").click;
     enclosure_count_remove -= 1; 
```

结尾

两者都不适合我，每次我都能点击但未能按住并点击这两个实体。

谢谢！

阿迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:31:46.753

看了watir-webdriver Element.click() 方法后，我想你必须直接使用webdriver action builder。尝试这个：

```
action = $browser.driver.action
action.key_down(:control)
action.click $browser.element(:xpath,"//table[@id ='selectConfiguration']/tbody/tr[0]").wd
action.click $browser.element(:xpath,"//table[@id ='selectConfiguration']/tbody/tr[1]").wd
action.key_up(:control)
action.perform 
```

我没有网页来测试这个，所以我纯粹基于文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:15:41.417

click 方法采用修饰符参数。这应该允许您使用任意数量的“按住”键进行点击。有关详细信息，请参阅[单击方法上的 rdocs](http://rdoc.info/gems/watir-webdriver/Watir/Element#click-instance_method)您应该可以

```
browser.table(:id => 'selectConfiguration').row[0].click(:control) 
```

当然，这假定您确定要单击哪些行并且它们永远不会改变。通常我会根据一些匹配的一些独特的文本或其他内容来选择行，这更类似于人类可能如何选择要选择的行。

```
browser.table(:id => 'selectConfiguration').row(:text => /text_fragment/).click(:control) 
```

# java - 为多个应用程序修复 Windows 7 环境变量中的“PATH”

> ID：10801662
> 
> 赞同：15
> 
> 时间：2012-05-29T14:57:33.740
> 
> 标签：java, ruby, windows, environment-variables

使用 JDK 后，如果我使用 ruby​​，我必须在 Windows7 的环境变量中更改“PATH”。是否有一种解决方法，即使我使用多个应用程序也不必不断更改它？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-29T15:41:21.633

使用系统的路径分隔符分隔 Ruby 和 Java 的路径。

在 Windows 7 的情况下，它是

```
; 
```

你可以同时使用

这是具有众多应用程序的路径变量的示例。

```
C:\Program Files\TortoiseHg\;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\ 
```

# facebook - 如何获得对特定 Facebook 页面或应用程序的管理页面权限？

> ID：10801663
> 
> 赞同：7
> 
> 时间：2012-05-29T14:57:36.723
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

是否可以使用管理页面权限获得访问特定页面/应用程序的权限？

例如：第三方应用程序需要访问用户页面。使用“Manage_Pages”可以访问用户创建/安装的所有页面和应用程序。我怎样才能询问 Mange_Pages 特定页面的权限？

下面是在 SO 上找到的相关问题，但没有一个给出答案。

1.  [如何为特定的 facebook 页面设置 manage_pages 权限？](https://stackoverflow.com/questions/9769664/how-to-set-manage-pages-permission-to-a-particular-facebook-page)
2.  [Facebook api：显示用户选择页面的对话框窗口（manage_pages extendend perm）](https://stackoverflow.com/questions/3397716/facebook-api-show-dialog-window-for-the-user-select-page-manage-pages-extenden)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:22:29.213

这在 API 中是不可能的。您可以将更改的范围控制到仅一个页面客户端，但如果没有 manage_pages 权限，则无法获取页面列表。获得权限后，您可以使用页面访问令牌对各个页面进行更改。有关更多信息，请参阅`accounts`下面的连接[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)`Users`

# c# - 调试第三方应用程序

> ID：10801667
> 
> 赞同：0
> 
> 时间：2012-05-29T14:57:50.707
> 
> 标签：c#, c++, windows, com

第三方应用程序通过 IDispatch 接口使用我们的代码 (C# .NET 2.0)。偶尔退出后，第三方应用程序会崩溃，类型为`The instruction at "0x..." referenced memorty at "0x...". The memory could not be "read".`第三方应用程序仅在使用我们的 DLL 时才会崩溃，所以我开始的假设是我们的代码正在执行（或未执行）的某些事情导致了这种情况。调试我们的错误的最佳方法是什么？

谢谢

编辑：我使用此处提供的设置启用了用户模式应用程序转储

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181(v=vs.85).aspx)

这是转储摘要 - 我没有源代码，但我正在徘徊，是否可以从中确定任何有用的东西。

## 转储摘要

```
Last Write Time:    5/30/2012 9:25:50 AM
Process Architecture:   x86
Exception Code: 0xC0000005
Exception Information:  The thread tried to read from or write to a virtual address for which it does not have the appropriate access.
Heap Information:   Not Present 
```

## 系统信息

```
OS Version: 6.1.7601
CLR Version(s): 2.0.50727.5456 
```

## 模块

```
Module Name Module Path Module Version
----------- ----------- --------------
ThirdPartyApp   C:\Program Files\...
ntdll.dll   C:\Windows\System32\ntdll.dll   6.1.7601.17725
kernel32.dll    C:\Windows\System32\kernel32.dll    6.1.7601.17651
KERNELBASE.dll  C:\Windows\System32\KERNELBASE.dll  6.1.7601.17651
user32.dll  C:\Windows\System32\user32.dll  6.1.7601.17514
gdi32.dll   C:\Windows\System32\gdi32.dll   6.1.7601.17514
lpk.dll C:\Windows\System32\lpk.dll 6.1.7600.16385
usp10.dll   C:\Windows\System32\usp10.dll   1.626.7601.17514
msvcrt.dll  C:\Windows\System32\msvcrt.dll  7.0.7601.17744
advapi32.dll    C:\Windows\System32\advapi32.dll    6.1.7601.17514
sechost.dll C:\Windows\System32\sechost.dll 6.1.7600.16385
rpcrt4.dll  C:\Windows\System32\rpcrt4.dll  6.1.7601.17514
oleaut32.dll    C:\Windows\System32\oleaut32.dll    6.1.7601.17676
ole32.dll   C:\Windows\System32\ole32.dll   6.1.7601.17514
odbc32.dll  C:\Windows\System32\odbc32.dll  6.1.7601.17514
comctl32.dll    C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll 5.82.7601.17514
olepro32.dll    C:\Windows\System32\olepro32.dll    6.1.7601.17514
shell32.dll C:\Windows\System32\shell32.dll 6.1.7601.17755
shlwapi.dll C:\Windows\System32\shlwapi.dll 6.1.7601.17514
imm32.dll   C:\Windows\System32\imm32.dll   6.1.7601.17514
msctf.dll   C:\Windows\System32\msctf.dll   6.1.7600.16385
odbcint.dll C:\Windows\System32\odbcint.dll 6.1.7600.16385
CRYPTBASE.dll   C:\Windows\System32\CRYPTBASE.dll   6.1.7600.16385
uxtheme.dll C:\Windows\System32\uxtheme.dll 6.1.7600.16385
dwmapi.dll  C:\Windows\System32\dwmapi.dll  6.1.7600.16385
bcrypt.dll  C:\Windows\System32\bcrypt.dll  6.1.7600.16385
bcryptprimitives.dll    C:\Windows\System32\bcryptprimitives.dll    6.1.7600.16385
sqlsrv32.dll    C:\Windows\System32\sqlsrv32.dll    6.1.7601.17514
crypt32.dll C:\Windows\System32\crypt32.dll 6.1.7601.17514
msasn1.dll  C:\Windows\System32\msasn1.dll  6.1.7601.17514
netapi32.dll    C:\Windows\System32\netapi32.dll    6.1.7601.17514
netutils.dll    C:\Windows\System32\netutils.dll    6.1.7601.17514
srvcli.dll  C:\Windows\System32\srvcli.dll  6.1.7601.17514
wkscli.dll  C:\Windows\System32\wkscli.dll  6.1.7601.17514
version.dll C:\Windows\System32\version.dll 6.1.7600.16385
mtxdm.dll   C:\Windows\System32\mtxdm.dll   2001.12.8530.16385
clbcatq.dll C:\Windows\System32\clbcatq.dll 2001.12.8530.16385
comsvcs.dll C:\Windows\System32\comsvcs.dll 2001.12.8530.16385
atl.dll C:\Windows\System32\atl.dll 3.5.2284.0
cryptsp.dll C:\Windows\System32\cryptsp.dll 6.1.7600.16385
rsaenh.dll  C:\Windows\System32\rsaenh.dll  6.1.7600.16385
RpcRtRemote.dll C:\Windows\System32\RpcRtRemote.dll 6.1.7601.17514
sqlsrv32.rll    C:\Windows\System32\sqlsrv32.rll    6.1.7600.16385
sspicli.dll C:\Windows\System32\sspicli.dll 6.1.7601.17725
odbccp32.dll    C:\Windows\System32\odbccp32.dll    6.1.7601.17632
dbnetlib.dll    C:\Windows\System32\dbnetlib.dll    6.1.7600.16385
ws2_32.dll  C:\Windows\System32\ws2_32.dll  6.1.7601.17514
nsi.dll C:\Windows\System32\nsi.dll 6.1.7600.16385
security.dll    C:\Windows\System32\security.dll    6.1.7600.16385
secur32.dll C:\Windows\System32\secur32.dll 6.1.7601.17725
credssp.dll C:\Windows\System32\credssp.dll 6.1.7601.17514
msv1_0.dll  C:\Windows\System32\msv1_0.dll  6.1.7601.17514
cryptdll.dll    C:\Windows\System32\cryptdll.dll    6.1.7600.16385
ntdsapi.dll C:\Windows\System32\ntdsapi.dll 6.1.7600.16385
mswsock.dll C:\Windows\System32\mswsock.dll 6.1.7601.17514
WSHTCPIP.DLL    C:\Windows\System32\WSHTCPIP.DLL    6.1.7600.16385
wship6.dll  C:\Windows\System32\wship6.dll  6.1.7600.16385
dnsapi.dll  C:\Windows\System32\dnsapi.dll  6.1.7601.17570
IPHLPAPI.DLL    C:\Windows\System32\IPHLPAPI.DLL    6.1.7601.17514
winnsi.dll  C:\Windows\System32\winnsi.dll  6.1.7600.16385
rasadhlp.dll    C:\Windows\System32\rasadhlp.dll    6.1.7600.16385
FWPUCLNT.DLL    C:\Windows\System32\FWPUCLNT.DLL    6.1.7601.17514
schannel.dll    C:\Windows\System32\schannel.dll    6.1.7601.17725
ncrypt.dll  C:\Windows\System32\ncrypt.dll  6.1.7600.16385
comdlg32.dll    C:\Windows\System32\comdlg32.dll    6.1.7601.17514
CoCash111.ocx   C:\Program Files\OPOS\Epson2\CoCash111.ocx  1.11.0.1
COBase12.dll    C:\Program Files\OPOS\Epson2\COBase12.dll   1.0.0.2
OReg13.dll  C:\Program Files\OPOS\Epson2\OReg13.dll 1.0.0.7
mfc42.dll   C:\Windows\System32\mfc42.dll   6.6.8064.0
msiltcfg.dll    C:\Windows\System32\msiltcfg.dll    5.0.7600.16385
msi.dll C:\Windows\System32\msi.dll 5.0.7601.17514
DRWSO.dll   C:\OPOS\TEC\DRWSO.dll   1.2.0.7
sxs.dll C:\Windows\System32\sxs.dll 6.1.7601.17514
Coptr15.ocx C:\Program Files\OPOS\Epson2\Coptr15.ocx    1.5.0.1
COBase10.dll    C:\Program Files\OPOS\Epson2\COBase10.dll   1.0.0.1
OReg10.dll  C:\Program Files\OPOS\Epson2\OReg10.dll 1.0.0.1
mscoree.dll C:\Windows\System32\mscoree.dll 4.0.40305.0
mscoreei.dll    C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscoreei.dll  4.0.30319.237
mscorwks.dll    C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll  2.0.50727.5456
msvcr80.dll C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4940_none_d08cc06a442b34fc\msvcr80.dll  8.0.50727.4940
profapi.dll C:\Windows\System32\profapi.dll 6.1.7600.16385
mscorlib.ni.dll C:\Windows\assembly\NativeImages_v2.0.50727_32\mscorlib\acfc1391e45fedd2a359778ea57d914c\mscorlib.ni.dll    2.0.50727.5456
2.0.0.74
mscorjit.dll    C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorjit.dll  2.0.50727.5456
System.ni.dll   C:\Windows\assembly\NativeImages_v2.0.50727_32\System\ce9ff6baf9053ed2ed673d948179195c\System.ni.dll    2.0.50727.5456
mscorsec.dll    C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorsec.dll  2.0.50727.4927
wintrust.dll    C:\Windows\System32\wintrust.dll    6.1.7601.17787
imagehlp.dll    C:\Windows\System32\imagehlp.dll    6.1.7601.17787
userenv.dll C:\Windows\System32\userenv.dll 6.1.7601.17514
gpapi.dll   C:\Windows\System32\gpapi.dll   6.1.7600.16385
cryptnet.dll    C:\Windows\System32\cryptnet.dll    6.1.7600.16385
Wldap32.dll C:\Windows\System32\Wldap32.dll 6.1.7601.17514
SensApi.dll C:\Windows\System32\SensApi.dll 6.1.7600.16385
cabinet.dll C:\Windows\System32\cabinet.dll 6.1.7601.17514
devrtl.dll  C:\Windows\System32\devrtl.dll  6.1.7600.16385
    C:\Windows\assembly\NativeImages_v2.0.50727_32\System.Xml\ba3d70b651454c7d49b407b93663bfed\System.Xml.ni.dll    2.0.50727.5420
System.Configuration.ni.dll C:\Windows\assembly\NativeImages_v2.0.50727_32\System.Configuration\cfa9c506bfb9254c89dace7b83bc9f9d\System.Configuration.ni.dll    2.0.50727.5420
apphelp.dll C:\Windows\System32\apphelp.dll 6.1.7601.17514
SoPtr12.dll C:\Program Files\OPOS\Epson2\SoPtr12.dll    1.11.0.1
SOBase12.dll    C:\Program Files\OPOS\Epson2\SOBase12.dll   1.11.0.1
PortMg11.dll    C:\Program Files\OPOS\Epson2\PortMg11.dll   1.0.0.2
PT7015.dll  C:\Program Files\OPOS\Epson2\PT7015.dll 1.11.0.3
PComm20.dll C:\Program Files\OPOS\Epson2\PComm20.dll    1.11.0.1
PBase11.dll C:\Program Files\OPOS\Epson2\PBase11.dll    1.11.0.1
PUtil10.dll C:\Program Files\OPOS\Epson2\PUtil10.dll    1.11.0.1
PtrIO20.dll C:\Program Files\OPOS\Epson2\PtrIO20.dll    1.11.0.1
PState17.dll    C:\Program Files\OPOS\Epson2\PState17.dll   1.11.0.1
PData15.dll C:\Program Files\OPOS\Epson2\PData15.dll    1.11.0.3
EPSLOGO.dll C:\Program Files\OPOS\Epson2\EPSLOGO.dll    1.11.0.1
LblBcd01.dll    C:\Program Files\OPOS\Epson2\LblBcd01.dll   1.8.0.0
InfoSharing10.dll   C:\Program Files\OPOS\Epson2\InfoSharing10.dll  1.0.0.1
PDSS11.dll  C:\Program Files\OPOS\Epson2\PDSS11.dll 1.11.0.1
DevStat16.dll   C:\Program Files\OPOS\Epson2\DevStat16.dll  1.11.0.1
OPOSStat.dll    C:\Program Files\OPOS\Epson2\OPOSStat.dll   1.0.0.2
DeviceSharing10.dll C:\Program Files\OPOS\Epson2\DeviceSharing10.dll    1.11.0.2
PortUsb.dll C:\Program Files\OPOS\Epson2\PortUsb.dll    1.0.0.2
UpdtUSB.dll C:\Program Files\OPOS\Epson2\UpdtUSB.dll    1.0.0.3
cfgmgr32.dll    C:\Windows\System32\cfgmgr32.dll    6.1.7601.17514
msxml6.dll  C:\Windows\System32\msxml6.dll  6.30.7601.17514
comctl32.dll    C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\comctl32.dll  6.10.7601.17514
raslibc.dll C:\Windows\System32\raslibc.dll 1.2.0.4` 
```

# asp.net - 从 SQL 中的另一个表返回项目

> ID：10801671
> 
> 赞同：1
> 
> 时间：2012-05-29T14:58:13.867
> 
> 标签：asp.net, sql, tsql

我正在努力让这个工作！我知道它很简单...

我有一个完整的工作表和一个包含位置的表（以便可以动态添加新位置并填充下拉列表等。

我想做的是返回一个位置的所有工作（不是问题），它们被分配了一个位置 ID，该位置 ID 与每个位置的 ID 对应（包含 job_location_ID、job_Location_name、job_Location_Country）

```
sql = "SELECT  [job_ID],
        [job_ref],
        [job_title],
        [job_description],
        [job_location]
FROM    [Web_Xtr_HR]
WHERE   (
          ( [job_ext_int_both] = 1 )
          AND ( [job_location] = " + theIndex + " )
        )
ORDER BY [job_ID] DESC" 
```

这会读取所有项目，所以我需要做的是，每个结果包括关联的 job_Location_name，以及另一个表中的 job_Location_ID ([Web_Xtr_Job_Locations])

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:02:20.060

您需要的是*连接*这两个表，以便可以从这两个表中选择列。

```
SELECT  job_ID,
        job_title,
        job_Location_Name
FROM    Web_Xtr_HR
        INNER JOIN Web_Xtr_Job_Locations
            ON Web_Xtr_Hr.job_Location_ID = Web_Xtr_Job_Locations.job_LocationID
WHERE   job_ext_int_both = 1 -- Add more filters as needed. 
```

`INNER JOIN`将返回两个表中匹配的元素。要匹配的字段由`ON`行确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:02:55.670

```
"SELECT  [job_ID],
        [job_ref],
        [job_title],
        [job_description],
        [job_location]
FROM    [Web_Xtr_HR]
        INNER JOIN [Web_Xtr_Job_Locations]
            ON [Web_Xtr_HR].job.Location_ID = [Web_Xtr_HR]
WHERE   (
          ( [job_ext_int_both] = 1 )
          AND ( [job_location] = " + theIndex + " )
        )
ORDER BY [job_ID] DESC" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T15:05:06.790

像这样使用内部联接：

```
"SELECT  [Web_Xtr_Job_Locations].job_Location_name,
        [Web_Xtr_HR].[job_ID],
        [Web_Xtr_HR].[job_ref],
        [Web_Xtr_HR].[job_title],
        [Web_Xtr_HR].[job_description],
        [Web_Xtr_HR].[job_location]
FROM    [Web_Xtr_HR]
        INNER JOIN [Web_Xtr_Job_Locations]
            ON [Web_Xtr_HR].job_location_id = [Web_Xtr_Job_Locations].job_location_id
WHERE   (
          ( [Web_Xtr_HR].[job_ext_int_both] = 1 )
          AND ( [Web_Xtr_HR].[job_location] = " + theIndex + " )
        )
ORDER BY [job_ID] DESC" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T15:23:58.410

谢谢大家，经过一番捣碎后，我最终得到了：

```
SELECT 
[Web_Xtr_HR].[job_ID], 
[Web_Xtr_HR].[job_ref], 
[Web_Xtr_HR].[job_title], 
[Web_Xtr_HR].[job_description], 
[Web_Xtr_HR].[job_location], 
[Web_Xtr_Job_Locations].[job_location_name], 
[Web_Xtr_Job_Locations].[job_location_country] 
FROM 
[Web_Xtr_HR]
    INNER JOIN [Web_Xtr_Job_Locations]
    ON [Web_Xtr_HR].[job_Location] = [Web_Xtr_Job_Locations].[job_Location_ID]
WHERE   
(([Web_Xtr_HR].[job_ext_int_both] = 1 )
AND
([Web_Xtr_HR].[job_location] = " + theIndex + "))

ORDER BY [Web_Xtr_HR].[job_ID] DESC 
```

# java - Java 中的点对点电子表格应用程序

> ID：10801673
> 
> 赞同：0
> 
> 时间：2012-05-29T14:58:15.467
> 
> 标签：java, multithreading, sockets, p2p

我有一个大学项目，我需要扩展现有的电子表格应用程序（[CleanSheets](http://sourceforge.net/projects/csheets/) - 开源）。

现在，它只是一个简单的电子表格应用程序。我被要求实现的是一个允许用户共享工作表的菜单选项（即用户选择“共享工作表” - 这是当前的工作表 - 然后选择他们希望共享的区域：A1：A9，对于例子）。然后他们可以指定一个本地端口并创建共享。

希望连接到该共享的其他用户必须知道机器的 IP 和要连接的端口。一旦他们在名为“加入共享工作表”的菜单选项下输入该信息，那么该共享区域将出现在他们当前的工作表中，他们可以自由编辑和查看其他人在这些单元格中输入的内容。

每个人都有读/写访问权限 - 这必须由线程控制（因为我们可以让 1 个人共享和 3 个对等方连接到该工作表，所有人都查看更改并做出自己的更改）。必须保证多重排除（这可以通过信号量和/或可重入锁来完成）。

共享实现必须在对等架构中实现。

现在我的问题是：如何开始使用 Java 中的套接字进行开发？我已经阅读了一些 Java 文档，尤其是关于 JXTA 的文档，但这很可能不是我需要的。我不需要复杂的 P2P 应用程序，只需要那种共享能力。

我假设我需要使用 UDP（因为 TCP 主要是服务器 - 客户端，这里的任何人都可以是服务器或客户端）并且我不需要数据包控制。我已经知道 C 中的套接字。我应该在 Java 中使用哪些与套接字相关的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:37:00.167

java.io 和 java.net 有一些你可能想看看的有用的类。这是一个非常简化的示例，因为我忽略了捕获/投掷，但希望它能够展示您可以为 tx/rx 做什么。

写入字节应该能够接受一些可序列化的东西。

发送数据：

```
// create connection
Socket cs = new Socket(<dest-hostname>, <port-num>);
DataOutputStream ds = new DataOutputStream(cs.getOutputStream() );

// send stuff
ds.writeBytes("is this thing on?");

// close socket and stream
cs.close();
cs = null;
ds = null;

Receive data:
ServerSocket listenSocket;
Socket s = listenSocket.accept();
BufferedReader receivedThing = new BufferedReader( new InputStreamReader( s.getInputStream() ) );

//assuming its plaintext
String msg = receivedThing.readLine();

// close the socker/serversocket 
```

希望这可以帮助。

# javascript - 从 jquery UI 可调整大小的元素中删除句柄图像

> ID：10801676
> 
> 赞同：5
> 
> 时间：2012-05-29T14:58:27.327
> 
> 标签：javascript, jquery, jquery-ui

如何删除可调整大小元素的默认`southeast (se)`句柄**图像并添加我自己的图像？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T10:11:47.243

我总是在我的 .css 文件中这样做

```
.ui-dialog .ui-resizable-se {
    background-image: url("");
} 
```

它一直有效:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T15:05:47.853

你有两个选择：

1.  您可以覆盖`ui-resizable-handle`或在最底部[的 jQuery 站点](http://docs.jquery.com/UI/Resizable)`ui-resizable-se`上提到。
2.  您可以更改图像文件“ui-icons_222222_256x240.png”，其示例[由 Google 托管在此处](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-icons_222222_256x240.png)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-18T14:03:17.070

您还可以在 resizable() 中指定您想要的句柄，例如仅用于“e”句柄

```
$("#id").resizable({
    handles: "e"
}); 
```

[http://api.jqueryui.com/resizable/#option-handles](http://api.jqueryui.com/resizable/#option-handles)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-09T21:58:30.857

您也可以在“创建”选项中解决此问题：

```
$('#element').resizable({
   create: function(event, ui) {
     $('.ui-icon-gripsmall-diagonal-se').remove();
   }
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T15:04:56.627

在带有 class 的 div 中`ui-resizable`，您需要将 div 的背景图像替换为 class`ui-icon-gripsmall-diagonal-se`

您可以执行以下操作：

```
$(".ui-icon-gripsmall-diagonal-se").css("background-image", "url(someImage.png)") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-22T17:41:35.007

这篇文章中的说明对我有用：

[http://forum.jquery.com/topic/how-to-make-the-se-grip-handle-larger-for-a-jquery-ui-resizeable](http://forum.jquery.com/topic/how-to-make-the-se-grip-handle-larger-for-a-jquery-ui-resizeable)

使用这个 CSS：

```
.ui-widget-content .ui-icon.ui-icon-gripsmall-diagonal-se {
      width: 32px;
      height: 32px;
      background: url(<insert your image url here>) left top no-repeat;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-14T06:30:03.043

我希望这对你有用：

```
.ui-resizable-handle { 
    z-index: auto !important;
    background-image: url('');
 } 
```

如果您需要完全删除手柄图标，只需将背景图像设置为无。

```
.ui-resizable-handle { 
    background-image: none;
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-06T08:18:47.667

```
$('.ui-icon-gripsmall-diagonal-se').css("background-image", "url('')"); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-01-05T07:28:10.363

我删除了调整大小的句柄，像这样永久改变 css：

```
<style>
   .ui-icon, .ui-widget-content .ui-icon
   {
      background-image : none;
   }
</style> 
```

这个对我有用。

# c++ - C++中的引用和析构函数

> ID：10801679
> 
> 赞同：9
> 
> 时间：2012-05-29T14:58:36.957
> 
> 标签：c++, reference, destructor

我有以下课程：

```
class A
{
public:
   B& getB() {return b;}    
private:   
    B b;
};

class B
{
   ~B() {cout<<"destructor B is called";}
...

};

void func()
{
   A *a = new a;
   B b = a->getB();
   .....
} 
```

为什么退出函数func时会调用B类的析构函数？函数 getB 是否返回对对象 B 的引用？如果类 A 在函数 func 的末尾仍然存在，为什么要调用 B 的析构函数？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T15:00:48.477

```
 B b = a->getB(); 
```

将调用复制构造函数`B(const& B)`，因此您在堆栈上创建一个新对象，它是引用返回的对象的副本。改用：

```
 B& b = a->getB(); 
```

并且不会调用析构函数，因为您不会创建新的 B 对象

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T15:30:48.373

当你有：

```
B b = a->getB(); 
```

一个类型的新对象是从对( )`B`的现有实例的引用中创建的。它不是这里调用的，而是**复制构造函数**。`B``B&``B::operator=`

 **每个类都有一个复制构造函数（如果你不显式添加它，编译器会为你提供一个）。它接受一个参数，该参数是对同一类的引用。您没有在上面的代码中放置复制构造函数，所以我假设编译器已经为您生成了一个：

```
class B
{
public:
   B(B& other)
   {
      // memberwise copy (shallow copy) 
   };
}; 
```

所以`A::getB()`返回了对成员的引用，`A::b`并且这个引用作为参数传递给`B::B(B&)`.

```
void func()
{
   A *a = new A();  // Instance of A is created on the heap;
                    // (pointer a is a local variable and is on the stack though!)
                    // A::b is object of type B and it is on the heap as well  

   B b = a->getB(); // Instance of class B is created on the stack (local variable)
   .....
   delete a;        // deleting A from the heap: 
                    // A::~A is called which calls B::~B (of its member b)
} // a and b go out of the scope; b is an object => B::~B is called 
```**

# c# - 通过 HTTP Post 下载文件，我哪里出错了？

> ID：10801681
> 
> 赞同：0
> 
> 时间：2012-05-29T14:58:41.257
> 
> 标签：c#, post

我正在尝试使用[此页面](http://datacash.custhelp.com/cgi-bin/datacash.cfg/php/enduser/std_adp.php?p_faqid=237&p_created=1039686433)作为参考，通过 HTTP 帖子从 Datacash 下载报告，但我不知道哪里出错了。

我的方法如下：

```
private static void DownloadDatacashData(int howManyDays)
{
    string post, url, group, user, password, startDate, endDate, type, csvFile;

    url = "https://reporting.datacash.com/reporting2/csvlist?";

    group = "123456";
    user = "autoreport";
    password = "foobar";
    startDate = DateTime.Now.AddDays(howManyDays).ToString("yyyy-MM-dd");
    endDate = DateTime.Now.ToString("yyyy-MM-dd");
    type = "stl";

    post = String.Format(@"group={0}&user={1}&password={2}&start_date={3}&end_date={4}&type={5}", group, user, password, startDate, endDate, type);

    var request = (HttpWebRequest)WebRequest.Create(url);
    request.KeepAlive = false;
    request.ProtocolVersion = HttpVersion.Version11;
    request.Method = "POST";
    request.ContentLength = 0;

    var postBytes = Encoding.ASCII.GetBytes(post);

    request.ContentType = "application/x-www-form-urlencoded";
    request.ContentLength = postBytes.Length;
    var requestStream = request.GetRequestStream();

    requestStream.Write(postBytes, 0, postBytes.Length);
    requestStream.Close();

    var response = (HttpWebResponse)request.GetResponse();

    var sr = new StreamReader(response.GetResponseStream());
    csvFile = sr.ReadToEnd();
    sr.Close();

    var sw = new StreamWriter("C:\\foo\\bar.csv", false);
    sw.Write(csvFile);
    sw.Flush();
    sw.Close();
} 
```

首先，执行post。但我总是得到一个带有文本“错误：找不到报告类型”的文件。如果我更改 URL，我会收到一个错误，因此这个 URL 肯定是响应 HTTP 帖子。我试过这个有和没有？在初始 URL 中，有无 ? 在帖子字符串的开头。

我已经尝试联系 Datacash 的技术支持，但他们无法帮助我。我向他们发送了我正在使用的代码，我得到的只是他们没有任何问题。

凭据正确，密码是字母和数字的组合（无特殊字符）。

我知道你们中没有多少人会使用过 datacash，但是看看我的代码和[这里](http://datacash.custhelp.com/cgi-bin/datacash.cfg/php/enduser/std_adp.php?p_faqid=237&p_created=1039686433)的信息，我正在做的事情有什么明显的错误吗？我在兜圈子。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T15:04:19.333

对于这样的事情，您的代码似乎太复杂了。尝试简化：

```
private static void DownloadDatacashData(int howManyDays)
{
    var url = "https://reporting.datacash.com/reporting2/csvlist";
    using (var client = new WebClient())
    {
        var values = new NameValueCollection
        {
            { "group", "123456" },
            { "user", "autoreport" },
            { "password", "foobar" },
            { "start_date", DateTime.Now.AddDays(howManyDays).ToString("yyyy-MM-dd") },
            { "end_date", DateTime.Now.ToString("yyyy-MM-dd") },
            { "type", "stl" },
        };
        byte[] result = client.UploadValues(url, values);
        File.WriteAllBytes("C:\\foo\\bar.csv", result);
    }
} 
```

# pdf - 用于将 TIFF 批量转换为可索引 PDF 的命令行软件

> ID：10801682
> 
> 赞同：1
> 
> 时间：2012-05-29T14:58:46.803
> 
> 标签：pdf, indexing, ocr, tiff, document-conversion

我需要一个实用程序来将 TIFF 文件批量转换为可索引的 PDF。该软件需要在 linux 上运行，并且必须从命令行运行。该软件不需要是开源的。我已经尝试使用 tesseract 和 hocr2pdf 进行转换，但是它们会生成带有乱码文本的 PDF（注意：只有在 PDF 中“全选”文本时，文本才会出现乱码）。我找到了其他实用程序，但它们只能在 Windows 下运行，或者不能从命令行运行。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:05:20.633

这正是您正在寻找的：

[http://ocr4linux.com/en:开始](http://ocr4linux.com/en:start)

基于 ABBYY 市场上最好的 OCR 的 Linux 命令行 OCR 工具。（免责声明：我为 ABBYY 工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:09:36.387

Mogrify 应该能够帮助您：

[http://linux.die.net/man/1/mogrify](http://linux.die.net/man/1/mogrify)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:00:03.817

在尝试了几种工具（包括 Abbyy）后，我决定选择：[Vividata](http://www.vividata.com/index.html)。他们有不错的定价，在 Linux 下运行，并且没有每年一页的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T15:14:56.173

这个答案是倾斜的，只是部分的。如果它不适用于您，请忽略。

可能有这样的软件，但我不熟悉。如果您的需求足够强大以至于您将编写 2000 行左右的代码来满足它，那么有面向 Linux 的[Libpoppler，](http://packages.debian.org/squeeze/libpoppler-dev)它为您提供了编写程序的界面，以按照您的方式制作自己的自定义 PDF想要它。不幸的是，Libpoppler 虽然很有价值，但编写代码并不是特别愉快；不幸的是，如果您对其进行编码，那么您可能会发现自己正在阅读大量[的 PDF 标准。](http://www.adobe.com/devnet/pdf/pdf_reference.html)

如果您确实编写了此类软件，您可能会考虑将其作为开源发布。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-11T15:51:17.443

我编写了一个使用 Tesseract 3 或 Abbyy OCR 11 的 bash 脚本。它可以批量转换或在目录监视器模式下运行。

在你的情况下

```
pmocr.sh --batch --target=PDF /path/to/tiff/files 
```

在此处查看脚本： [https ://github.com/deajan/pmOCR](https://github.com/deajan/pmOCR)

# xcode - 节点构建失败

> ID：10801687
> 
> 赞同：2
> 
> 时间：2012-05-29T14:59:04.690
> 
> 标签：xcode, node.js, gcc, homebrew

我在 Mac OS X 10.6 上 - 我尝试通过自制软件安装节点，但失败并显示非描述性错误消息。我决定克隆节点存储库并在目录中构建它。运行 ./configure 命令后，输出为：

```
Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for program gcc or cc           : /usr/bin/gcc 
Checking for gcc                         : ok  
Checking for library dl                  : yes 
Checking for openssl                     : not found 
Checking for function SSL_library_init   : yes 
Checking for header openssl/crypto.h     : yes 
Checking for library util                : yes 
Checking for library rt                  : not found 
Checking for fdatasync(2) with c++       : no 
'configure' finished successfully (2.180s) 
```

运行 'make' 时，构建失败，我收到此错误：

```
System/Library/Frameworks/Carbon.framework/Headers/Carbon.h:70:35: error: SecurityHI/SecurityHI.h: No such file or directory
Waf: Leaving directory `/Users/topica/rails_projects/node/out'
Build failed:  -> task failed (err #1): 
    {task: cxx platform_darwin.cc -> platform_darwin_5.o}
make: *** [program] Error 1 
```

尽管 openssl 说“未找到”，但为了安全起见，我使用以下命令重新运行了 configure：./configure --openssl-includes=/opt/local/include 和 openssl 但仍然出现相同的错误。

前几天我确实安装了 gcc，gcc -v 的输出是：

```
Using built-in specs.
Target: i686-apple-darwin10
Configured with: /var/tmp/gcc/gcc-5666.3~123/src/configure --disable-checking --enable-       werror --prefix=/usr --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-   transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin10 -  -program-prefix=i686-apple-darwin10- --host=x86_64-apple-darwin10 --target=i686-apple-darwin10 --with-gxx-include-dir=/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Apple Inc. build 5666) (dot 3) 
```

也许我的 xcode 安装和 gcc 有一些冲突？或者完全是别的东西。我已经解决了几天，但无法找到任何答案。让我知道还需要什么其他信息

更新：这是运行 ./configure --openssl-includes=/opt/local/include 时的控制台输出

```
Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for program gcc or cc           : /usr/bin/gcc 
Checking for gcc                         : ok  
Checking for library dl                  : yes 
Checking for function SSL_library_init   : yes 
Checking for header openssl/crypto.h     : yes 
Checking for library util                : yes 
Checking for library rt                  : not found 
Checking for fdatasync(2) with c++       : no 
'configure' finished successfully (0.660s) 
```

# sql - 什么是两个日期之间查询的 ActiveRecord/SQL 性能

> ID：10801688
> 
> 赞同：1
> 
> 时间：2012-05-29T14:59:06.083
> 
> 标签：sql, ruby-on-rails-3, performance, activerecord

我知道有两种方法可以通过 AR 在 Rails 中获取结果，这里有两个示例查询，它们返回相同的结果但执行不同的 SQL 查询。

一种） `where("created_at < ? and created_at > ?", week1, week2)`

二） `where(:created_at => week1..week2)`

第二个（除了更好看，恕我直言）还创建了一个`BETWEEN`类型 SQL 查询，而第一个几乎是不言自明的。

哪一个表现更好，或者除了风格之外的任何其他原因更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:20:41.840

我认为 B 是大多数人会选择的，因为他们编写的代码更少，根本不需要考虑`SQL`查询。

对于性能，我认为应该是一样的。MySQL 只是提供了一种更好的方法来在范围值中执行 where 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:21:52.183

它会有点特定于 db ..因为 rails 会为它们生成这些查询

```
A) WHERE (created_at < '2012-05-29 13:14:50' and created_at > '2012-05-28 15:14:50')

B) WHERE (`questions`.`created_at` BETWEEN '2012-05-28 15:14:39' AND '2012-05-29 13:14:39') 
```

:) 你不应该太担心......只要你使用 ActiveRecord

看看[这个](https://stackoverflow.com/questions/4382892/whats-mysqls-between-performance-over)

# windows - 如何创建委托实例？

> ID：10801689
> 
> 赞同：0
> 
> 时间：2012-05-29T14:59:08.103
> 
> 标签：windows, multithreading, visual-c++, c++-cli

我有一个功能

```
void __stdcall TestThread( String^ a, String^ b)
{
 MessageBox::Show( a );
 MessageBox::Show( b );

 _endthread();
} 
```

我想创建一个这样的线程：
`_beginthread( &HWSW_GUI::Form1::TestThread , 0, NULL );`

不幸的是，我遇到了一个错误： `Error 2 error C3374: can't take address of 'HWSW_GUI::Form1::TestThread' unless creating delegate instance d:\testvs2008\hwsw_gui\hwsw_gui\Form1.h 5177`

有人能帮助我吗？它让我发疯，我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:38:34.400

使用托管线程而不是 _beginthread。

要将参数传递给线程，请使用 Thread(ParameterizedThreadStart) 构造函数：http: [//msdn.microsoft.com/en-us/library/1h2f2459.aspx](http://msdn.microsoft.com/en-us/library/1h2f2459.aspx)

一般来说，使用任何 .NET 语言，包括 C++/CLI，都避免使用非托管的东西（如 PInvoke 或在 C++/CLI 中混合托管/非托管代码），除非这是绝对必要的。大多数标准编程任务都可以使用纯托管代码来解决。

# visual-studio-2010 - 由于只读文件，Resharper 重构失败是否有解决方法来获取“用户取消”对话框？

> ID：10801692
> 
> 赞同：1
> 
> 时间：2012-05-29T14:59:19.970
> 
> 标签：visual-studio-2010, resharper, resharper-6.1

不幸的是，我使用了一个源代码控制工具，如果它们没有被签出，我的本地文件就保持只读状态。当我尝试使用 Resharper 6.1.1 应用重构（例如移动到另一个命名空间）时，它会出现对话框失败

![Resharper Recactoring 失败](../Images/652b9c5dab64b2af6f0069b89dbc048d.png)

因为解决方案中的其他文件当前是只读的。是否有解决方法或解决方法？如果没有，我会将其输入到他们的问题跟踪器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:44:24.310

作为一种解决方法，我会编写一个脚本来更改文件的只读属性。根据您使用的 IDE，您可能能够在特定事件中调用此类脚本，例如每次构建（Visual Studio 2010 支持）。

[从命令行窗口进行只读文件读写](https://superuser.com/questions/395865/make-read-only-file-read-write-from-commandline-windows)

# cygwin - Python 2.7.2，Cygwin，raw_input：为什么它只在我输入后才打印提示？

> ID：10801693
> 
> 赞同：3
> 
> 时间：2012-05-29T14:59:20.570
> 
> 标签：cygwin, python-2.7

我有这个 python 程序：

```
import board

theBoard = board.Board()
theBoard.setup_new_game()
theBoard.display()

inputStr = raw_input('Enter move \"x y\":')
print inputStr 
```

Board 是我写的一个类，它显示了一个黑白棋棋盘。当我运行这个程序时，它会立即停止并等待输入。当我输入内容并按回车键时，它会显示板并在其下方显示输入提示。

我是否需要使用诅咒和其他东西才能使其正常运行，还是我只是缺少一些基本的东西？据我所知，这应该打印板，打印提示，然后等待我提供输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T15:03:01.117

通常这是由于输出未正确刷新。有时，出于效率原因，输出驱动程序会等待实际打印文本，直到它认为需要这样做，但有时它会导致诸如此类的问题。我不知道使用您正在使用的 API 进行刷新的确切接口，但应该很容易找到。

# jquery - 新内容不匹配

> ID：10801699
> 
> 赞同：1
> 
> 时间：2012-05-29T14:59:54.097
> 
> 标签：jquery, mouseevent

我正在通过 AJAX 加载一些内容并尝试添加一些功能，我有这段代码来显示/隐藏一些内容：

```
$('.list li').hover(
            function() { $('.detail').show(); }, 
            function() { $('.detail').hide(); }
        ); 
```

这在第一次加载时工作正常，但在通过 AJAX 加载更多内容时不起作用。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:01:21.347

`$('.list')`仅构造当前存在的“.list”项目的列表。

您必须使用[on](http://api.jquery.com/on/)向尚不存在的元素添加事件处理程序。

你可以这样做 ：

```
$('body').on('mousenter', '.list li', function({ $('.detail').show()});
$('body').on('mouseleave', '.list li', function({ $('.detail').hide()}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:12:49.727

使用`.on`您可以将事件委托给`.list`元素，以便添加新`li`元素不会破坏预期的功能。

```
$(".list").on("mouseenter mouseleave", "li", function(e){
    $(".detail").toggle( e.type === "mouseenter" );
}); 
```

小提琴：http: [//jsfiddle.net/NGEfj/](http://jsfiddle.net/NGEfj/)

如果`.detail`元素在 中`li`，而不是在页面中的其他位置：

```
$(".list").on("mouseenter mouseleave", "li", function(e){
    $(".detail", this).toggle( e.type === "mouseenter" );
}); 
```

小提琴：http: [//jsfiddle.net/NGEfj/1/](http://jsfiddle.net/NGEfj/1/)

# jquery - 没有地图的地理编码

> ID：10801705
> 
> 赞同：2
> 
> 时间：2012-05-29T15:00:21.127
> 
> 标签：jquery, google-maps-api-3

我可以在没有地图的情况下使用 Google 地图地理编码 API 吗？我有一个带有自动完成 Google Maps API Place 的文本框，我希望在用户输入街道号码后，我得到邮政编码。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:52:22.183

自动完成是允许在没有地图的情况下使用 Google Maps API 服务的少数情况之一，但如果您确实将其与地图一起使用，则该地图必须是 Google 地图：

[https://developers.google.com/maps/documentation/javascript/places#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)

您不需要使用地理编码器来提取邮政编码。它在 place_changed 事件发生后（即一旦用户选择完成）由 Autocomplete 对象上的 getPlaces() 调用返回的 PlaceResult 对象中提供：

[https://developers.google.com/maps/documentation/javascript/places#getting_place_information](https://developers.google.com/maps/documentation/javascript/places#getting_place_information)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:04:22.290

我相信你可以。查看[地理编码 API](https://developers.google.com/maps/documentation/geocoding/)。它只是一组 Web 服务，您可以调用它来获取包含邮政编码等的地理编码结果。

# c# - Linq to Sql 插入冲突与“外键同表约束”错误

> ID：10801706
> 
> 赞同：0
> 
> 时间：2012-05-29T15:00:33.863
> 
> 标签：c#, asp.net, linq-to-sql

我正在使用 Linq 2 Sql 敲出一个快速定制的 CMS。

我有一个与自身关联的表，因此任何子菜单都映射到同一个表中的任何父菜单，但我在插入第一个父菜单时遇到问题。

该表看起来有点像这样：

```
CMSMenu
     CMSMenuID
     ParentCMSMenuID    
     Name
     Link 
```

与协会

```
CMSMenu.CMSMenuID -> CMSMenu.ParentCMSMenuID 
```

在以前版本的数据库/代码中，我只需添加一些代码，例如：

```
 itm = new CMSMenu();
  itm.ParentCMSMenuID = 0; 
  rep.CMSMenus.InsertOnSubmit(itm); 
```

但是由于该数据库是使用所有外键自动创建的，因此此代码会导致异常：

> INSERT 语句与 FOREIGN KEY SAME TABLE 约束“CMSMenu_CMSMenu”冲突。冲突发生在数据库“sp.ackahs”、表“dbo.CMSMenu”、列“CMSMenuID”中。该语句已终止。

如何插入顶级菜单（即没有父级）？

因为它没有父母所以我不能添加：

```
itm.MyParentCMSMenu=*existing cmsmenu item*; 
```

就像我可以使用子菜单一样，我也不能添加：

```
itm.MyParentCMSMenu=null; 
```

欢迎任何想法。

谢谢托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:05:58.443

通常使用特殊版本的 CMSMenu 项。它可能被命名为“null”并且 ID 为 0 或 1。它应该用作实际上没有父项的项的父项。它应该从所有查询中过滤掉。

这是关系数据库的弱点之一——您需要使用各种怪癖来存储像树这样的简单抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:15:50.640

尝试将 MyParentCMSMenu 设置为 SQL 中的可为空列。

# sql - 对 Group By 子句使用 case 语句

> ID：10801710
> 
> 赞同：0
> 
> 时间：2012-05-29T15:00:47.393
> 
> 标签：sql, sql-server-2008, group-by, case

我一直在尝试使用 Microsoft SQL Server 2008 R2 进行查询，按间隔对总和进行分组。但是，我无法让它工作。这是我的代码：

```
SELECT interval_total, COUNT(*) FROM(
SELECT clients.clientId, total.TotalPoints,
CASE
    WHEN TotalPuntos >=5000 THEN 5000
    WHEN TotalPuntos >= 1000 THEN 1000
    WHEN TotalPuntos >= 500 THEN 500
    WHEN TotalPuntos >= 100 THEN 100
    ELSE 0
END as interval_total
FROM
    [TotalSumOfPoints] total,
    [Client] clients
WHERE total.clientId = clients.clientId
AND clients.cardId LIKE '2001%')
GROUP BY interval_total 
```

出现此错误：

```
Msg 156, Level 15, State 1, Line 17
Incorrect syntax near the keyword 'GROUP'. 
```

我一直在阅读不同的帖子，并得出的结论是可以通过将 CASE 语句放在子查询中来执行这种查询（我在阅读[这篇](https://stackoverflow.com/questions/1208854/sql-group-by-case-statement-with-aggregate-function)文章时得出了这个结论）。显然我做错了什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:02:24.933

您的问题只是您需要为子查询提供别名，如下所示：

```
SELECT interval_total, COUNT(*) FROM(
SELECT clients.clientId, total.TotalPoints,
CASE
    WHEN TotalPuntos >=5000 THEN 5000
    WHEN TotalPuntos >= 1000 THEN 1000
    WHEN TotalPuntos >= 500 THEN 500
    WHEN TotalPuntos >= 100 THEN 100
    ELSE 0
END as interval_total
FROM
    [TotalPuntosPorCuenta] total,
    [SanRoque].[dbo].[Socio] clients
WHERE total.clientId = clients.clientId
AND clients.cardId LIKE '2001%') tbl /* <--- here */
GROUP BY interval_total 
```

# c# - QueryOver 上的 GroupBy SqlFunction

> ID：10801712
> 
> 赞同：6
> 
> 时间：2012-05-29T15:00:52.540
> 
> 标签：c#, sql, nhibernate, queryover

我有一个我使用获取的所有不同帐户名称前缀 (az) 的列表

```
var accounts = this.SessionManager.GetActiveSession().QueryOver<Account>();

var q = accounts.Select(Projections.Distinct(
        Projections.SqlFunction("substring", 
                                NHibernateUtil.String, 
                                Projections.Property("Name"),
                                Projections.Constant(1),
                                Projections.Constant(1)))); 
```

但是，我想要做的不是返回一个不同的列表，而是对前缀进行分组并返回以该前缀开头的帐户数，但我不确定如何通过使用查询来执行组，因为它不像标准那样简单林克

*我使用 QueryOver 而不是 Query 的原因是由于某种原因，子字符串函数在内存中而不是在数据库服务器上执行。*

**这就是我通常会这样做的方式**

```
var prefixes = (from acc in this.SessionManager.GetActiveSession().Query<Account>()
              group acc by acc.Name.Substring(0, 1)
              into grp
              select new
                       {
                         Prefix = grp.Key,
                         Count = grp.Count()
                       }); 
```

**编辑**这是我尝试过的，但我收到以下错误

*表达式 SqlFunction("substring", NHibernateUtil.String, new [] {Property("Name"), Constant(Convert(1)), Constant(Convert(1))}) 中无法识别的方法调用*

```
var accounts = this.SessionManager.GetActiveSession().QueryOver<Account>().Select(
            Projections.Group<string>(x => Projections.SqlFunction("substring", NHibernateUtil.String,
                                                       Projections.Property("Name"), Projections.Constant(1),
                                                       Projections.Constant(1))),
            Projections.Count<string>(x => Projections.SqlFunction("substring", NHibernateUtil.String,
                                                       Projections.Property("Name"), Projections.Constant(1),
                                                       Projections.Constant(1)))

          ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T12:29:53.700

如果一切都失败了，您可以使用 Projections.SqlGroupProjection 来做到这一点！

```
var accounts = _busDb.Session.QueryOver<QueueEntity>()
        .Select(
            Projections.SqlGroupProjection(
                "SUBSTRING({alias}.Name, 1) as FirstChar", 
                "SUBSTRING({alias}.Name, 1)",
                new[] {"FirstChar"},
                new[] {NHibernateUtil.String}),
            Projections.Count("id")); 
```

第一个参数是 select 中选择的内容，第二个参数是分组依据，第三个参数是所选列的名称，第四个参数是所选数据的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T17:18:01.100

你的名单有多大？如果小于 1000，我会从 sql server 收集项目列表，然后通过查询列表执行您的常规组

```
var sqlout= (from acc in this.SessionManager.GetActiveSession().Query<Account>()
          select new
                   {
                     Name = acc.Name,
                     col1= acc.col1
                   }).TolList(); 
```

接着

```
var prefixes = (from acc in sqlout
          group acc by acc.Name.Substring(0, 1)
          into grp
          select new
                   {
                     Prefix = grp.Key,
                     Count = grp.Count()
                   }); 
```

子字符串函数可以在这里工作，因为它在 c# list 上而不是在 sql server 上运行

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T12:42:28.997

您是否考虑过通过将名称的第一个字符存储在单独的列中来消除对子字符串查询的需要？

假设您使用的是 SQL Server，您可以将其设为持久计算列，以避免必须更新插入/更新表的代码。

添加包含此列的索引的能力也应该可以帮助您提高查询性能。

# web-config - 使用 web.config 转换有条件地更新元素

> ID：10801715
> 
> 赞同：4
> 
> 时间：2012-05-29T15:01:10.503
> 
> 标签：web-config, transformation

我正在尝试为 web.config 配置转换规则以创建或更新连接字符串。规则很简单：

1.  如果存在具有给定名称（“MyDatabase”）的连接字符串，则不应触摸它。

2.  如果没有给定名称的连接字符串，则应插入它。

但我不知道这是否可能。如果我只是在 web.config.transform 中指定“add”元素，它会插入 connectionString 元素，即使已经有一个具有这样名称的元素。但是如果我指定 xdt:Transform="Replace"，那么它将被替换。我找到了一篇关于这个主题的[好文章](http://vishaljoshi.blogspot.com/2009/03/web-deployment-webconfig-transformation_23.html)，它列出了替换、插入、删除的场景。但我需要“InsertIfNotExists”。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T12:37:01.897

博客[Custom web.config transforms and](http://blog.appharbor.com/2012/07/27/custom-web-config-transforms-and-merges) merges 描述了扩展 Merge 和 MergeBefore 转换，如果元素丢失，将插入该元素，但如果元素已经存在，则将其单独保留。

要使用自定义转换，您必须在转换 XML 中导入相关的命名空间：

```
<xdt:Import assembly="AppHarbor.TransformTester"
    namespace="AppHarbor.TransformTester.Transforms"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T18:48:16.093

另一种解决方案，如果您希望通过配置转换更新 web.config 中的元素并且该元素不存在，您可以简单地在 web.config 中添加一个空元素并配置您的 web.Release.config，如下所示：

网络配置：

```
<system.web>
<httpModules>
</httpModules>
... 
```

web.Release.config：

```
<system.web>
<httpModules>
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" xdt:Transform="Insert" />
  <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" xdt:Transform="Insert" />
</httpModules>
... 
```

这样，您可以在部署时将新属性合并到 Web 配置中！

# php - 在两台计算机之间建立连接，中间有一个网站

> ID：10801716
> 
> 赞同：0
> 
> 时间：2012-05-29T15:01:15.777
> 
> 标签：php, javascript, mysql, html

我正在制作一个 2 人绘图游戏（[触摸游戏](http://marcwent.no-ip.org/game/game.html)）。在左侧，您有一个画布，作为玩家可以在其中绘制，在它的右侧，您有一个图像，显示您的朋友或对手所绘制的内容。此时，您绘制的图像被上传到 SQL 数据库，并从该数据库下载其他玩家的图像。我想知道两件事。

1.  是否可以在没有数据库的情况下跟踪谁在线，或者是否有必要为此拥有数据库。（如果是这样，我可以这样做，但我认为不这样做更整洁）

2.  这些图像使用以下方式存储在数据库中：您的姓名 | 对手姓名 | Image DataURL 我想知道是否有可能在两个播放器之间建立一个连接桥，其中我的网站位于其中。它接收图像并将其发送给其他播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:09:41.910

如果您需要实时并且看起来确实如此，您可以尝试使用
[http://socket.io/ [WebSockets with a flash XMLsocket fallback]。](http://socket.io/)
或每 x 次向从数据库获取更改的脚本发送 Ajax 请求。

# django - 在非 django 应用程序中使用 django 模型的方法是什么？

> ID：10801717
> 
> 赞同：0
> 
> 时间：2012-05-29T15:01:15.963
> 
> 标签：django, model, import, external

我正在尝试将[webpython.codepoint.net](http://webpython.codepoint.net)作为一种在基本级别上学习 python web 编程的方法，并且我想在其中使用 django 模型，作为在非 django 应用程序中包含 django 模型的一种方式。

最好的方法是什么？如果我的应用程序是名为 projectA 的项目的一部分，并且应用程序目录名为 appDir，那么是否需要做类似的事情`from projectA/appDir import modelX`或者需要更多的事情。

我是 python 也是 django 新手，所以请耐心等待。

我也会对任何其他类似的基本或可能不那么基本的 Python Web 编程教程感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:09:01.343

至少您需要定义数据库的配置。这通常使用名为 DJANGO_SETTINGS_MODULE 的环境变量来处理，该变量指向您的 django 项目设置模型

但是，您也可以[在不设置 DJANGO_SETTINGS_MODULE 的情况下使用设置](https://docs.djangoproject.com/en/dev/topics/settings/#using-settings-without-setting-django-settings-module)

# objective-c - CGContextClipToMask returning blank image

> ID：10801723
> 
> 赞同：10
> 
> 时间：2012-05-29T15:01:55.800
> 
> 标签：objective-c, quartz-graphics, quartz-2d, masking, clipping

I'm new to Quartz. I have 2 images, a background, and a mask with cutout shape that I want to lay over the background in order to cut out a section. The resulting image should be the shape of the cutout. This is my mask (the shape in the middle is 0 alpha):

![image mask](../Images/9bc0582db708ccd0447a8bcbbeed49a4.png)

And this is my code:

```
UIView *canvas = [[[sender superview] subviews] objectAtIndex:0];

UIGraphicsBeginImageContext(canvas.bounds.size);
CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef cgContext = CGBitmapContextCreate(NULL, canvas.bounds.size.width, canvas.bounds.size.height, 8, 0, colourSpace, kCGImageAlphaPremultipliedLast);
CGColorSpaceRelease(colourSpace);

CGImageRef maskImage = [[UIImage imageNamed:@"Mask.png"] CGImage];
CGContextClipToMask(cgContext, CGRectMake(0, 0, canvas.frame.size.width, canvas.frame.size.height), maskImage);

CGImageRef maskedImageRef = CGBitmapContextCreateImage(cgContext);
CGContextRelease(cgContext);

UIImage *maskedImage = [UIImage imageWithCGImage:maskedImageRef];
UIGraphicsEndImageContext();

[button setBackgroundImage:maskedImage forState:UIControlStateNormal]; 
```

Except nothing appears... Any idea where I'm going wrong? Many thanks.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T18:13:38.513

After you clip context with mask you should actually draw something on that context.

Besides that:

*   you should use `UIGraphicsBeginImageContextWithOptions` to support scale factor.
*   you're creating two context, one with `UIGraphicsBeginImageContext` and the other with `CGBitmapContextCreate`. One is enough :)
*   you should "flip" alpha of your mask, because according to docs `The source samples of mask determine which points of the clipping area are changed`. The other words transparent will become transparent

Simple example code, where I clip image inside imageView and then set it back:

```
UIGraphicsBeginImageContextWithOptions(self.imageView.frame.size, NO, 0.0);
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextTranslateCTM(context, 0.0, self.imageView.frame.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

CGImageRef maskImage = [[UIImage imageNamed:@"mask.png"] CGImage];
CGContextClipToMask(context, self.imageView.bounds, maskImage); 

CGContextTranslateCTM(context, 0.0, self.imageView.frame.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

[[self.imageView image] drawInRect:self.imageView.bounds];

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

self.imageView.image = image; 
```

Example using `CGImageCreateWithMask`:

```
UIImage *image = [UIImage imageNamed:@"image"];

CGImageRef originalMask = [UIImage imageNamed:@"mask"].CGImage;
CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(originalMask),
                                    CGImageGetHeight(originalMask),
                                    CGImageGetBitsPerComponent(originalMask),
                                    CGImageGetBitsPerPixel(originalMask),
                                    CGImageGetBytesPerRow(originalMask),
                                    CGImageGetDataProvider(originalMask), nil, YES);

CGImageRef maskedImageRef = CGImageCreateWithMask(image.CGImage, mask);

UIImage *maskedImage = [UIImage imageWithCGImage:maskedImageRef scale:image.scale orientation:image.imageOrientation];

CGImageRelease(mask);
CGImageRelease(maskedImageRef); 
```

# passwords - cpanel密码修改

> ID：10801732
> 
> 赞同：1
> 
> 时间：2012-05-29T15:02:43.577
> 
> 标签：passwords, cpanel

我需要更改我的 Cpanel 密码（目前 Root 和标准用户密码相同，因此限制了访问）。

如果我更改密码并选中“允许 MySQL 密码更改”复选框，我是否需要以任何方式更改我的 Wordpress 配置，以便它可以继续访问和修改我的 MySQL 数据库。

干杯，

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T13:12:17.333

If you leave the 'Allow MySQL password change' checkbox ticked, you will also change the MySQL password for the main MySQL user (that has same username as you cPanel username).

Leaving this checkbox ticked will NOT change the MySQL password for the MySQL users you have created in the MySQL cPanel section.

If you haven't created MySQL user for your Wordpress database and if you used the main MySQL user instead, then yes, you will have to update your Wordpress configuration.

If you do not leave the checkbox ticked, then clicking PHPMyAdmin under cPanel will not log you in automatically and you will have to enter your cPanel username and your OLD password to access PHPMyAdmin or you can use some other MySQL username and password that you created using the MySQL cPanel section.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T18:57:56.547

想知道如何通过 3 个简单的步骤更改您的 cpanel 帐户用户名和密码，请访问： http: [//newsboundary.com/how-to-change-cpanel-username-and-password/](http://newsboundary.com/how-to-change-cpanel-username-and-password/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-22T15:38:54.227

似乎您对是否需要更新 wordpress 数据库用户的密码感到困惑，答案是否定的。虽然通过勾选“允许 MySQL 密码更改”更新 cPanel 密码不会影响之前在 cPanel 中创建的任何数据库用户，它只会更改主cpanel用户mysql账号密码。

# asp.net-mvc-3 - 根据列信息获取总计

> ID：10801733
> 
> 赞同：0
> 
> 时间：2012-05-29T15:02:47.273
> 
> 标签：asp.net-mvc-3, reporting

在我的报告查看器中，我有一个组（officeGroup），其中有一个按办公室活动分组的行中的表。我有一个列，我想添加总小时数，我将在其中检查案例列是否为 0/null。我想做类似以下的事情

```
Sum(Fields!Hours.Value) Where cases != 0 
```

我怎样才能正确地形成表达？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:57:48.987

我实际上意识到，为了解决这个问题，要为表（不仅仅是行）创建一个过滤器，并确保总计行包含在表中但不包含在组中。完成后，只需使用 Sum(Fields!Hours.Value) 即可。

# linux - Unix Bash 脚本空文件条件

> ID：10801734
> 
> 赞同：1
> 
> 时间：2012-05-29T15:02:48.373
> 
> 标签：linux, bash, unix

我有一个带有以下几行的 bash 脚本

```
for file in $diff_file_list
    do

        # replace any ? with $current_date and replace any % with $file
        formatted_output_filename=$(echo $output_filename | sed "s|?|$current_date|g" | sed "s|%|_$file|g")
        $pig_bin_dir/pig -param preceding=$hdfs_hadoop_pre_dir/$file -param current=$hdfs_hadoop_cur_dir/$file -param output_added=$hdfs_hadoop_delta_dir/${file}_added -param output_removed=$hdfs_hadoop_delta_dir/${file}_removed -param delimiter=$delimiter diff.pig
        [ $? -ne 0 ] && die "diff of data between $previous_date and $current_date using pig failed. exiting `basename $0` script"
        $hadoop_bin_dir/hadoop dfs -cat $hdfs_hadoop_delta_dir/${file}_added/* | gzip > $file_output_dir/${formatted_output_filename}_added.gz
        $hadoop_bin_dir/hadoop dfs -cat $hdfs_hadoop_delta_dir/${file}_removed/* | gzip > $file_output_dir/${formatted_output_filename}_removed.gz
        [ $? -ne 0 ] && die "there was a problem gzipping ${formatted_output_filename}. exiting `basename $0` script"
        [ $post_diff_script ] && ./$post_diff_script $source $previous_date $current_date

    done 
```

我只希望它在文件不为空时创建 _removed.gz 和 _added.gz 文件。我尝试在下面执行此操作，但我的脚本有问题吗？

```
 for file in $diff_file_list
    do

        # replace any ? with $current_date and replace any % with $file
        formatted_output_filename=$(echo $output_filename | sed "s|?|$current_date|g" | sed "s|%|_$file|g")
        $pig_bin_dir/pig -param preceding=$hdfs_hadoop_pre_dir/$file -param current=$hdfs_hadoop_cur_dir/$file -param output_added=$hdfs_hadoop_delta_dir/${file}_added -param output_removed=$hdfs_hadoop_delta_dir/${file}_removed -param delimiter=$delimiter diff.pig
        [ $? -ne 0 ] && die "diff of data between $previous_date and $current_date using pig failed. exiting `basename $0` script"
        if [[ -s $hdfs_hadoop_delta_dir/${file}_added/* ]] ; then
        echo "$hdfs_hadoop_delta_dir/${file}_added/* has data."
        $hadoop_bin_dir/hadoop dfs -cat $hdfs_hadoop_delta_dir/${file}_added/* | gzip > $file_output_dir/${formatted_output_filename}_added.gz
        $hadoop_bin_dir/hadoop dfs -cat $hdfs_hadoop_delta_dir/${file}_removed/* | gzip > $file_output_dir/${formatted_output_filename}_removed.gz
        else
        echo "$hdfs_hadoop_delta_dir/${file}_added/*is empty."
        fi ;
        [ $? -ne 0 ] && die "there was a problem gzipping ${formatted_output_filename}. exiting `basename $0` script"
        [ $post_diff_script ] && ./$post_diff_script $source $previous_date $current_date

    done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:14:20.247

```
if [[ -s file ]]
then
    do_file_creation
fi 
```

或者

```
for f in dir/*
do
    if [[ -s $f ]]
    then
        do_file_creation
    fi
done 
```

使用小写或混合大小写的变量名称。

使用`if`代替`[[ ]] &&`

使用缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:10:52.927

我试图找到一个不添加循环的解决方案。但是，它并不那么干净：

```
if [[ -s `ls -S $hdfs_hadoop_delta_dir/${file}_added/* 2>/dev/null | head -1` ]] ; then 
```

`ls -S`按文件大小对文件进行排序，`head -1`取最大的一个，然后通过`if [[ -s`.

不幸的是，必须处理没有文件的情况。我用过`2>/dev/null`。有人有更好的主意吗？

# php - 简单访问 PHP

> ID：10801738
> 
> 赞同：1
> 
> 时间：2012-05-29T15:02:55.173
> 
> 标签：php, ms-access-2007

如何从[access 数据库](http://office.microsoft.com/en-us/access/)(*.mdb) 读取数据并获取列数据类型？更具体地说，将[Access](http://php.net/manual/en/book.uodbc.php)中的数据插入MySQL 数据库？

这就是我的目标...

1.  通过身份验证连接到 Access (*.mdb)。
2.  获取 Access 的数据类型。
3.  在 MySQL 中创建相应的数据类型。
4.  插入数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:14:28.317

要从一个数据库迁移到另一个数据库，第一件事是要有相同的表结构。

然后，从 ACCESS 数据库中读取可以执行类似 ( [http://es.php.net/manual/es/function.odbc-exec.php#71615](http://es.php.net/manual/es/function.odbc-exec.php#71615) ) 的操作：

```
$emp_id = $_GET['emp_id'];
$stmt = odbc_prepare($db_conn, "SELECT pwd FROM employees WHERE emp_id=?");
$res = odbc_execute($stmt, array($emp_id)); 
```

然后，根据结果，您必须在 MySQL 数据库 ( [http://es.php.net/manual/es/function.mysql-query.php](http://es.php.net/manual/es/function.mysql-query.php) ) 上执行检查命令。例如。

```
mysql_query('INSERT INTO `'.$table.'` (`'.implode('`,`', $keys).'`) VALUES (\''.implode('\',\'', $values).'\')') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:19:02.290

使用 ODBC 格式在 MS Access 上导出数据库。

如果您使用 Xampp 单击开始 | 控制面板 | 管理工具 | 数据源 (ODBC) 并打开 ODBC 数据源管理器窗口，如图所示。

如果不安装 MySQL Connector/ODBC 驱动程序

Access 可以通过网络与 MySQL 服务器建立 ODBC 连接。您仍然可以通过 Access 使用表的内容，但表本身由 MySQL 服务器托管。

我只是简要介绍了该过程您可能会发现许多其他方法或如何在谷歌搜索中使用 ODBC。

谢谢你。

# ruby-on-rails - 为什么我在 bundle exec 中执行环境后 rake 中止

> ID：10801740
> 
> 赞同：1
> 
> 时间：2012-05-29T15:02:57.620
> 
> 标签：ruby-on-rails, ruby, linux, rake

当我尝试在 linux 上执行任务时遇到问题。在命令执行环境之后我有一个 rake 中止，但它适用于 Windows。这是一项由 cron 运行的任务，但它不起作用。

这是堆栈跟踪：

```
[railsdeploy@smtliapp017 20120528200624]$ bundle exec /usr/local/bin/rake    courriel:rappel RAILS_ENV=development --trace
(in /var/rails/gdl/releases/20120528200624)
** Invoke courriel:rappel (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
syntax error on line 31, col -1: `'
/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application/configuration.rb:88:in `database_configuration'
/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.0.7/lib/active_record/railtie.rb:58:in `block (2 levels) in <class:Railtie>'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/lazy_load_hooks.rb:26:in `on_load'
/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.0.7/lib/active_record/railtie.rb:57:in `block in <class:Railtie>'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:25:in `instance_exec'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:25:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:50:in `block in run_initializers'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:49:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:49:in `run_initializers'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:134:in `initialize!'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:77:in `method_missing'
/var/rails/gdl/releases/20120528200624/config/environment.rb:7:in `<top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `require'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in `block in require'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in `new_constants_in'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support    /dependencies.rb:225:in `load_dependency'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support    /dependencies.rb:239:in `require'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:103:in `require_environment!'
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:217:in `block in initialize_tasks'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:607:in `block in invoke_prerequisites'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:604:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:604:in `invoke_prerequisites'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:596:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/usr/local/bin/rake:31:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:08:25.217

您的数据库配置中似乎存在语法错误。

# asp.net - ASPX View MVC3 WebGrid 格式栏目

> ID：10801743
> 
> 赞同：1
> 
> 时间：2012-05-29T15:03:02.783
> 
> 标签：asp.net, asp.net-mvc-3, view, webgrid

```
<%{
     WebGrid studentGrid = new WebGrid(rowsPerPage: StudentController.PageSize);
     studentGrid.Bind(Model.Students, autoSortAndPage: false, rowCount: Model.RowCount);
     studentGrid.PageIndex = Model.CurrentPage;
}%>

<%=studentGrid.GetHtml(columns: new WebGridColumn[]{
    studentGrid.Column("StudentId", "Id"),
    studentGrid.Column("Name", "Name"),
 })%> 
```

不幸的是，我被迫在我的 MVC3 项目中使用 aspx 视图。

我希望有一列根据绑定到网格的列表项的某些条件显示文本“选择”或“删除”。

语法是如何做到这一点的

我必须像渲染 html

```
<span class="1" id=item.id>Select<span> 
```

显示的 html 将只是**Select**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:43:59.577

你绝对可以做到，`format`你只需要在 C# 中手工制作 HTML：

```
<%

    var list = new[]
                    {
                        new { StudentId = 1, Name = "Name1", Cond = true },
                        new { StudentId = 2, Name = "Name3", Cond = false },
                        new { StudentId = 2, Name = "Name3", Cond = true },
                    };
    WebGrid studentGrid = new WebGrid();
    studentGrid.Bind(list, autoSortAndPage: false, rowCount: 3); 

%>
<%= studentGrid.GetHtml(columns: 
    new WebGridColumn[]
        {
            studentGrid.Column("StudentId", "Id"),
            studentGrid.Column("Name", "Name"),
            studentGrid.Column(header: "Action",  
                format: item =>
                {
                    string span = "<span class=\"1\" id=\"{0}\">{1}<span>";
                    string action = item.Cond ? "Select" : "Remove";
                    return Html.Raw(string.Format(span, item.StudentId, action));
                })
        })
%> 
```

`<% %>`一般支持在 lambda 中使用 aspx 模板系统税（例如）（请参阅此[Telerik 演示](http://demos.telerik.com/aspnet-mvc/grid/templatesserverside)），但由于其`WebGrid`工作方式比 Telrik 不同，因此无法正常工作。

似乎`WebGrid`构建的方式只支持参数内的剃刀模板`format`......

# clojure - 如何解构向量以用作函数参数

> ID：10801744
> 
> 赞同：12
> 
> 时间：2012-05-29T15:03:02.623
> 
> 标签：clojure

在 Python 中，您可以将列表或元组传递给函数并让函数解包参数。我怎样才能在 Clojure 中做到这一点？这是一些示例 Python 代码：

```
def f (a, b, c, *d):
    print "a: ", a
    print "b: ", b
    print "c: ", c
    print "d: ", d

f (1, 2, 3, 4, 5, 6)

print
v = (4, 5, 6)
f(1, 2, 3, *v) 
```

结果：

```
a:  1
b:  2
c:  3
d:  (4, 5, 6)

a:  1
b:  2
c:  3
d:  (4, 5, 6) 
```

在我的clojure代码中：

```
(defn f [a b c & d]
  (println "a: " a)
  (println "b: " b)
  (println "c: " c)
  (println "d: " d))

(f 1 2 3 4 5 6)

(println)
(def v [4 5 6])
(f 1 2 3 v) 
```

结果：

```
a:  1
b:  2
c:  3
d:  (4 5 6)

a:  1
b:  2
c:  3
d:  ([4 5 6]) 
```

d 只有一个元素，我怎样才能让结果作为 python 代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T15:43:07.323

Clojure 不会像 Python 那样从具有语言特性的向量中解压缩参数。

最接近解包的是函数[apply](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/apply)。

在这种特殊情况下：

```
(def v [4 5 6])
(apply f (concat [1 2 3] v)) 
```

印刷：

```
a:  1
b:  2
c:  3
d:  (4 5 6) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T22:18:18.023

只是为了完整性。

假设您有一个将向量`[d1 d2 d3]`作为参数的函数

```
(defn f
  [a b c [d1 d2 d3]]
  (println "a: " a)
  (println "b: " b)
  (println "c: " c)
  (println "d1: " d1)
  (println "d2: " d2)
  (println "d3: " d3)) 
```

这样，我们可以从传递给函数的向量中获取前 3 项`f`作为`d1 d2 d3`. 调用上述函数会产生以下输出：

```
=> (f 1 2 3 [6 7 8 9])
a:  1
b:  2
c:  3
d1:  6
d2:  7
d3:  8 
```

请注意，即使向量包含 4 个项目，我们也只取前 3 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T22:43:46.820

对于 Clojure 中的任何参数，您可以通过使用顺序来确定参数是标量值还是序列？在下面的伪代码中，

```
(if (sequential? v)
   (do-something-because-it's-a-sequence v)
   (do-something-different-because-it's-not-a-sequence v)) 
```

因此，在 Clojure 中，您可以通过确定是否有序列来完成与 Python 示例中相同的任务。

# php - Wordpress Jetpack 共享按钮在自定义主题上显示有趣

> ID：10801745
> 
> 赞同：1
> 
> 时间：2012-05-29T15:03:07.320
> 
> 标签：php, html, css, wordpress

我目前在安装了 Jetpack 的 wordpress 上运行了一个自定义主题的博客。

我已启用共享，并将各种社交网站共享服务拖入“启用设置”部分（Facebook、Twitter、Google+、Digg 等）。

但是，在我的自定义博客上，共享按钮以列出的顺序显示，没有任何共享图标（只是文本）。

这意味着我的共享栏看起来像这样：

```
A Blog Post
DD/MM/YY

blah blah blah blah blah

> Facebook
> Twitter
> (This is empty, its supposed to be Google+ here)
> Digg
> Etc

Posted in Uncategorized 
```

有谁知道在 Jetpack 中显示这些共享图标的默认 CSS，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:41:03.830

是的，事实证明我遗漏了一行非常重要的代码来使插件能够工作。

```
<?php wp_footer(); ?> 
```

必须在标签之前立即包含`</body>`它才能使其工作。

我没有包含它，因此它破坏了插件系统，使我启用的任何插件都变得无用。

一旦你把它放在正确的地方，Jetpack 应该会清楚地显示出来，你只需要稍微调整（字体大小、边距等）就可以将它吸收到 Wordpress 中。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:16:12.140

例如（[http://css.maxdesign.com.au/listamatic/horizo​​ntal02.htm](http://css.maxdesign.com.au/listamatic/horizontal02.htm)）：

```
HTML

<div id="navcontainer">
<ul id="navlist">
<li id="active"><a href="#" id="current">Item one</a></li>
<li><a href="#">Item two</a></li>
<li><a href="#">Item three</a></li>
<li><a href="#">Item four</a></li>
<li><a href="#">Item five</a></li>
</ul>
</div>

CSS
ul#navlist
{
margin-left: 0;
padding-left: 0;
white-space: nowrap;
}

#navlist li
{
display: inline;
list-style-type: none;
}

#navlist a { padding: 3px 10px; }

#navlist a:link, #navlist a:visited
{
color: #fff;
background-color: #036;
text-decoration: none;
}

#navlist a:hover
{
color: #fff;
background-color: #369;
text-decoration: none;
} 
```

# java - Java中的属性文件与常量类

> ID：10801746
> 
> 赞同：26
> 
> 时间：2012-05-29T15:03:07.413
> 
> 标签：java

我对在 Java 中使用常量文件和属性文件有点困惑。

如何决定何时使用*Constants.java*以及何时使用*.properties*文件？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-29T15:06:16.727

*当您不希望*用户/部署人员/测试人员/测试更改它们时，请在 Java 代码中使用硬连线常量。

*如果您确实希望*这样做，请使用属性文件。

关键是更改应用程序源代码中的硬连线常量需要编辑源代码、重新构建和重新部署。相比之下，更改属性文件可能就像启动记事本一样简单。

* * *

你评论说：

> 正如您所说，更改属性文件很简单，而更改常量文件需要我们重新构建应用程序。那么，我们不应该总是更喜欢使用属性文件吗？

不，并非总是如此。 *例如*，如果您将应用程序分发给最终用户以安装在他们的机器上，并且它具有您不希望用户更改的常量，那么将它们放在属性文件中将是一个坏主意。

不可能将其简化为“始终偏爱 X”的建议。您需要了解自己的应用需求并自行决定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T20:20:30.867

我的清单

**属性文件：**

是否可以根据环境等进行配置？

消息、标签等

适用于特定情况（规则的状态列表等）。键值对。可由开发人员以外的其他人（即分析师、业务用户等）修改。

**持续的：**

是常数。不可配置。主要用于优化和重用。避免按键分散。

对于像 YES = "yes" 这样的常量。不是真正的关键价值。缓存键等

确保检索和设置使用相同键的常量，即使来自应用程序中的不同位置，EXAMPLE xyz.put(KeyConstants.SOME_KEY, "somevalue"); xyz.get(KeyConstants.SOME_KEY) 来自不同的类，当然 xyz 是共享的或单例的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T15:06:25.653

*   **常量**- 当您不介意每次更改值时重新编译应用程序时。这里有点讽刺。*如果它被称为常量*，你为什么要改变它:)

*   **属性文件**- 当您希望只更改值并可能重新启动应用程序以获取更改时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T15:07:03.833

通常，常量类中的任何内容都被认为是“硬编码”的；也就是说，您需要重新编译才能进行更改。

将`.properties`文件用于配置之类的事情，您不必为了进行更改而被迫重新编译。这样，您可以简单地更改属性文件并重新启动您的应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T15:07:34.280

当您要指定因部署而异或随时间变化的参数时，通常使用属性文件。

当参数不是动态的，因此不应该根据外部因素进行更改时，您可以使用常量。每次更改值时都必须重新编译该类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T15:07:47.920

有许多不同的方面需要考虑。最重要的是

*   您可以编辑属性文件并使用它而无需重新编译您的应用程序；
*   属性文件不包含任何代码，因此每个人都可以在没有任何 Java 知识的情况下更改它们。

这些方面使属性文件对于存储配置非常有用。

另一方面，常量类需要编译，但如果您不打算经常更改这些常量，则“更安全”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T15:11:14.157

常量在编译时是固定的。因此，如果您没有预见到值的任何变化，常量将是个好主意。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-29T15:12:34.680

属性具有可外化的优点。您可以将一个属性文件用于开发，另一个用于测试，另一个用于生产。但是，很多时候，很少更改的属性是软件工作的内部属性，它们被放入属性文件中，这使得它们难以管理。

OTOH 常量被编译，因此任何错误都将在编译时被捕获。

所以答案是，这取决于。如果属性中的值是您想要外部化的真正配置更改，则使用属性文件。否则将它们设为 Java 常量。不过，您最终可能会同时使用两者。

# javascript - 处理循环变量的重复声明警告

> ID：10801747
> 
> 赞同：50
> 
> 时间：2012-05-29T15:03:07.377
> 
> 标签：javascript, jslint

考虑以下代码：

```
for (var i=0; i<100; i++) {
    // your code here
}
// some other code here
for (var i=0; i<500; i++) {
    // custom code here
} 
```

任何像样的 lint 工具（jslint、jshint 或内置 IDE）都会发出警告 - `duplicate declaration of variable i`。这可以通过使用具有其他名称 ( `k`, `j`) 的变量或将声明移至顶部来解决：

```
var i; // iterator
for (i=0; i<100; i++) {}
for (i=0; i<500; i++) {} 
```

我不喜欢这两种变体 - 我通常不在顶部进行声明（即使我这样做了我也不希望看到辅助变量 - `i`, `j`, `k`）并且在这些示例中确实没有发生任何坏事来更改变量' 的名字。

虽然我确实想要一个巨大的警告，以防我写这样的东西：

```
for (var i=0; i<100; i++) {
    for (var i=0; i<500; i++) {} // now that's bad
} 
```

您对此类案件的处理方法是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-29T16:19:22.157

JavaScript 有许多看起来像其他计算机语言中众所周知的结构的结构。JavaScript像大多数其他计算机语言一样以*另一种*方式解释构造是很危险的。

如果对 JavaScript 不太了解的人（顺便说一下，常见的情况）看到这样的结构

```
for (var i=0; i<100; i++) {
    // your code here
} 
```

或在块中看到变量的声明

```
{
    var i;
    //some code
    {
        var j;
        // some code
    }
} 
```

那么大多数读者会认为*块级变量*会被定义。JavaScript 没有块级变量。所有变量都将被解释为函数级别定义。

因此，如果代码不仅仅是一些仅会编写 5 分钟的测试代码，那么我*永远不会在代码内部定义变量。*主要原因是**我不想编写代码和使用可能被误解的语言结构**。

顺便说一句，JSLint 发现块内的变量定义如此糟糕，以至于它停止了代码分析的处理。没有可以改变这种行为的 JSLint 选项。我发现 JSLint 的行为不好，但我同意在`for`循环内声明变量是不好的，因为大多数人会将其读取为带有*局部*循环变量的代码，这是不正确的。

如果你使用

```
for (var i=0; i<100; i++) {
    // your code here
}
// some other code here
for (var i=0; i<500; i++) {
    // custom code here
} 
```

*然后 JavaScript 会为你移动函数*开头的所有变量声明。所以代码将是

```
var i = undefined, i = undefined; // duplicate declaration which will be reduced
                                  // to one var i = undefined;

for (i=0; i<100; i++) {
    // your code here
}
// some other code here
for (i=0; i<500; i++) {
    // custom code here
} 
```

所以请考虑一下代码的其他读者。不要使用任何可能以错误方式解释的结构。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-28T02:49:56.937

`let`关键字是在 javascript 1.7 中引入的。[请在此处](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let)找到 MDN 文档

替换`var`到`let`inside`for loop`解决了这个问题，现在可以在循环范围内声明局部变量。在此处查看 stackoverlow 社区解释：[使用“let”和“var”声明变量有什么区别？](https://stackoverflow.com/questions/762011/javascript-let-keyword-vs-var-keyword)

未来的代码：

```
for (let i = 0; i < someVar.length; i++) {
    // do your thing here
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-20T05:24:49.410

我建议将你的循环包含在自执行函数中，这些函数的名称告诉你循环在做什么。这有效地为循环提供了块范围。例如：

```
var users = response['users']
;(function appendUsers(){
    for (var i = 0; i < users.length; i++) {
        var user      = users[i]
        var userEmail = user['email']
        var userId    = user['id']
        /* etc */ 
    }
})() // appendUsers 
```

如果你这样做：

```
var i
for (i = 0; i < someVar.length; i++) {
    for (i = 0; i < someOtherVar.length; i++) {
        // This is a bug that a validator will not notice.
    }
} 
```

另一方面：

```
for (var i = 0; i < someVar.length; i++) {
    for (var i = 0; i < someOtherVar.length; i++) {
        // This is a bug that a validator will warn you about.
    }
}
for (var i = 0; i < yetAnotherVar.length; i++) {
    // It will also warn you about this, but so what?
} 
```

您可以停止`i`用作迭代器：

```
for (var companyIndex = 0; companyIndex < companies.length; companyIndex++) {
    var company = companies[companyIndex]
} 
```

如果你仍然使用 jQuery，你可以使用它的[`jQuery.each()`](http://api.jquery.com/jquery.each/)方法：

```
$.each(someVar, function(i, value){
    // etc
}) 
```

[`Array.prototype.forEach()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)如果您希望 IE8 及更早版本工作，则不能使用，除非您添加[Polyfill 代码](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Polyfill)或类似代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-29T15:09:42.793

我倾向于使用数组内置函数，例如 map、filter 和 forEach，从而完全避免了这个问题。这也会自动为您提供范围循环体，这也非常有用。

如果使用这些与用例不匹配，我通常会求助于 top 声明，这样我就可以避免你提到的问题。

# java - 数组、列表、集合和映射是可迭代的。还有什么？

> ID：10801749
> 
> 赞同：6
> 
> 时间：2012-05-29T15:03:10.270
> 
> 标签：java, for-loop, foreach, iterator

即使只`List`实现`Set`接口`Iterable`，我相信数组、列表、集合和映射都是*可迭代*的对象，因为我们可以通过 foreach 循环使用它们：

```
for(String s : new String[0]);
for(String s : new ArrayList<String>());
for(String s : new HashSet<String>());
for(Entry<Integer, String> entry : new HashMap<Integer, String>().entrySet()); 
```

*的情况`Map`可能有点不同，但让我们将其视为键值列表（它实际上是什么）。*

从*可迭代的理解*开始，我是否缺少以下方法中的类型？

```
public boolean isIterable(Object o) {
    return o instanceof Object[] || o instanceof Iterable || o instanceof Map;
} 
```

换句话说，是否有任何其他类型可以通过 foreach 循环进行迭代？

附带但产生的问题：该类型列表是否详尽？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T15:04:05.417

任何实现`Iterable<T>`接口的东西都是可迭代的。[Iterable API](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)列出了许多执行此操作的核心 Java 类。请注意，这还包括您创建的实现接口的类。如果我的类包含 ArrayList 或其他可迭代对象并且我想方便地遍历它的内容，我有时会这样做。我只是将列表的 Iterator 对象作为 iterator() 方法的返回结果传递。

例如：

人.java

```
class Person {
   private String lastName;
   private String firstName;
   public Person(String lastName, String firstName) {
      this.lastName = lastName;
      this.firstName = firstName;
   }
   @Override
   public String toString() {
      return "Person [lastName=" + lastName + ", firstName=" + firstName + "]";
   }

} 
```

我的人.java

```
class MyPeople implements Iterable<Person> {
   List<Person> personList = new ArrayList<Person>();

   // ... other methods and constructor

   @Override
   public Iterator<Person> iterator() {
      return personList.iterator();
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T15:13:54.967

只有实现 Iterable 接口和数组的类是。Maps 不实现 Iterable，而是提供三种不同的可迭代视图（键集、值集合和条目集），您可以对其进行迭代。因此，更完整的检查将是：

```
return obj instanceof Iterable || obj.getClass().isArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T15:05:37.040

[Iterable](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)接口中的 JDK 1.7 文档列出了 JDK API 中实现 iterable 的所有内容，但没有任何内容阻止第三方库在任何类中实现 Iterable。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T15:09:51.457

除了 Iterables 之外，数组（不实现 Iterable 接口）也可以在增强的 for 循环中使用。

# r - lapply 和 do.call 有什么区别？

> ID：10801750
> 
> 赞同：173
> 
> 时间：2012-05-29T15:03:10.317
> 
> 标签：r, functional-programming

我最近在学习 R 并且对两个函数感到困惑：`lapply`和`do.call`. 看起来它们只是类似于`map`Lisp 中的函数。但是为什么会有两个名称如此不同的函数呢？为什么 R 不只使用一个名为 的函数`map`？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-05-29T15:11:00.050

有一个函数调用`Map`，可能类似于其他语言中的 map：

*   `lapply`返回一个与 X 长度相同的列表，其中每个元素是对 X 的相应元素应用 FUN 的结果。

*   `do.call`从名称或函数以及要传递给它的参数列表构造并执行函数调用。

*   `Map`将函数应用于给定向量的相应元素...`Map`是一个简单的包装器，`mapply`它不会尝试简化结果，类似于 Common Lisp 的 mapcar（但是，参数被回收）。未来的版本可能允许对结果类型进行一些控制。

* * *

1.  `Map`是一个包装器`mapply`
2.  `lapply`是一个特例`mapply`
3.  因此`Map`和`lapply`在许多情况下将是相似的。

例如，这里是`lapply`：

```
lapply(iris, class)
$Sepal.Length
[1] "numeric"

$Sepal.Width
[1] "numeric"

$Petal.Length
[1] "numeric"

$Petal.Width
[1] "numeric"

$Species
[1] "factor" 
```

同样使用`Map`：

```
Map(class, iris)
$Sepal.Length
[1] "numeric"

$Sepal.Width
[1] "numeric"

$Petal.Length
[1] "numeric"

$Petal.Width
[1] "numeric"

$Species
[1] "factor" 
```

* * *

`do.call`将一个函数作为输入，并将其其他参数传递给该函数。它被广泛使用，例如，将列表组装成更简单的结构（通常使用`rbind`or `cbind`）。

例如：

```
x <- lapply(iris, class)
do.call(c, x)
Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
   "numeric"    "numeric"    "numeric"    "numeric"     "factor" 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-05-29T15:11:51.637

`lapply`在列表上应用函数，`do.call`调用带有参数列表的函数。这对我来说似乎有很大的不同......

举一个列表的例子：

```
X <- list(1:3,4:6,7:9) 
```

使用 lapply 你可以得到列表中每个元素的平均值，如下所示：

```
> lapply(X,mean)
[[1]]
[1] 2

[[2]]
[1] 5

[[3]]
[1] 8 
```

`do.call`给出一个错误，因为 mean 期望参数“trim”为 1。

另一方面，`rbind`按行绑定所有参数。因此，要逐行绑定 X，您可以：

```
> do.call(rbind,X)
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9 
```

如果你使用`lapply`，R 将适用`rbind`于列表的每个元素，给你这个废话：

```
> lapply(X,rbind)
[[1]]
     [,1] [,2] [,3]
[1,]    1    2    3

[[2]]
     [,1] [,2] [,3]
[1,]    4    5    6

[[3]]
     [,1] [,2] [,3]
[1,]    7    8    9 
```

要拥有像 Map 这样的东西，你需要`?mapply`，这是完全不同的东西。要获得例如 X 中每个元素的平均值，但使用不同的修剪，您可以使用：

```
> mapply(mean,X,trim=c(0,0.5,0.1))
[1] 2 5 8 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-05-29T15:08:58.200

`lapply`类似于`map`，`do.call`不是。`lapply`将函数应用于列表的所有元素，`do.call`调用所有函数参数都在列表中的函数。所以对于一个`n`元素列表，`lapply`有`n`函数调用，并且`do.call`只有一个函数调用。所以`do.call`与`lapply`. 希望这能澄清你的问题。

代码示例：

```
do.call(sum, list(c(1, 2, 4, 1, 2), na.rm = TRUE)) 
```

和：

```
lapply(c(1, 2, 4, 1, 2), function(x) x + 1) 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2013-10-29T11:48:39.930

用最简单的话来说：

1.  ***lapply()***对列表中的每个元素应用一个给定的函数，因此会有多个函数调用。

2.  ***do.call()***将给定函数应用于整个列表，因此只有一个函数调用。

最好的学习方法是使用 R 文档中的函数示例。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2015-06-02T16:52:10.760

虽然已经有很多答案，但这里是我的例子供参考。假设我们有一个数据列表：

```
L=list(c(1,2,3), c(4,5,6)) 
```

函数 lapply 返回一个列表。

```
lapply(L, sum) 
```

上面的意思类似于下面。

```
list( sum( L[[1]]) , sum( L[[2]])) 
```

现在让我们为 do.call 做同样的事情

```
do.call(sum, L) 
```

它的意思是

```
sum( L[[1]], L[[2]]) 
```

在我们的示例中，它返回 21。简而言之，lapply 总是返回一个列表，而 do.call 的返回类型实际上取决于执行的函数。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-05-29T15:12:10.410

`lapply()`是一个类似地图的功能。`do.call()`是不同的。它用于将参数以列表形式传递给函数，而不是枚举它们。例如，

```
> do.call("+",list(4,5))
[1] 9 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-08-16T10:15:46.167

两者的区别是：

```
lapply(1:n,function,parameters) 
```

=> 这将 1，参数发送给函数 => 这将 2，参数发送给函数，依此类推

```
do.call 
```

只需将 1…n 作为向量和参数发送到函数

所以在 apply 你有 n 个函数调用，在 do.call 你只有一个

# android - 查看 getRootView 返回自身

> ID：10801753
> 
> 赞同：3
> 
> 时间：2012-05-29T15:03:25.947
> 
> 标签：android, android-layout

我制作了一个名为 ActionButton 的自定义按钮，我正在尝试引用并行视图层次结构中的另一个视图。我想过使用`findViewById(int id)`，但我一直在使用`NullPointerExceptions`，所以我尝试通过 RootView 获取引用`getRootView()`，并从那里获取视图`findViewById(int id)`。现在的问题是，它`getRootView`不是返回布局或 null，而是返回调用该方法的我的 ActionButton。

这是我的 ActionButton，我尝试在其中获取参考：

```
public class ActionButton extends Button {

    protected void onFinishInflate(){
        super.onFinishInflate();
        log(getRootView() == this)    //true, what I don't understand...
        ConnectionLayer connectionLayer = (ConnectionLayer) findViewById(R.id.connection_layer);  //Returns null...
    }
} 
```

以及我的 layout.xml 文件的概述：

```
<FrameLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >

  <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

      (much more xml elements)

      <com.cae.design.reaction.ui.ActionButton
            android:id="@+id/actionButton"
            android:layout_width="match_parent"
            android:layout_height="150dp"
            android:layout_gravity="center_vertical" />

   </LinearLayout>

   <com.cae.design.reaction.ui.ConnectionLayer
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/connection_layer"
      android:layout_width="match_parent"
      android:layout_height="match_parent" >
   </com.cae.design.reaction.ui.ConnectionLayer>

</FrameLayout> 
```

如果您能向我解释为什么`getRootView`返回视图本身，或者能给我一个提示，我将如何以其他方式引用它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:34:50.123

如果你看一下 getRootView 方法的源代码：

```
 public View getRootView() {
        if (mAttachInfo != null) {
            final View v = mAttachInfo.mRootView;
            if (v != null) {
                return v;
            }
        }

        View parent = this;

        while (parent.mParent != null && parent.mParent instanceof View) {
            parent = (View) parent.mParent;
        }

        return parent;
    } 
```

您会看到，此方法返回自身的唯一情况是视图尚未附加到视图层次结构（并且 mAttachInfo.mRootView 不为空）并且它没有父级或父级不是 View 实例的情况. 此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:10:31.653

getRootView() 返回自身，因为在 ActionButton 完成 iflating 时它的父级没有。我的意思是，当您调用 getRootView() 时，ActionButton 没有连接到 LinearLayout。当我需要根视图时，我会这样做：

```
new Thread(new Runnable() {

    @Override
    public void run()
    {
                    // wait until LinearLayout will finish inflating and this
                    // view will be connected to it
        while(getRootView() == this) {} 
        // do your buisness now
    }
}).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T15:41:21.583

尝试调用[getParent()](http://developer.android.com/reference/android/view/View.html#getParent%28%29)`ViewGroup` ，并在需要时将结果转换为。`getChildCount()`然后，您可以使用和访问其他子视图`getChildAt()`。

# python - 比较两个大文件

> ID：10801760
> 
> 赞同：4
> 
> 时间：2012-05-29T15:03:38.010
> 
> 标签：python, algorithm, bash, grep, large-files

我需要编写一个程序，将两个文件之间的差异写入文件。程序必须遍历一个超过 13.464.448 行的 600 MB 文件，检查 grep 是否在另一个文件上返回 true，然后将结果写入另一个文件。我用大约 1.000.000 条记录编写了一个快速测试，花了一个多小时，所以我猜这种方法可能需要 9 个多小时。

您对如何加快速度有什么建议吗？我应该使用任何特定的语言吗？我打算用 bash 或 python 来做。

提前非常感谢。

**[编辑 1]：**对不起，当我说两个文件之间的差异时，我并不是指差异。结果文件采用不同的格式。

逻辑有点像这样：

文件 A 有 297.599 行 文件 B 有超过 1300 万行

我选择从文件 A 读取的当前行，在文件 B 上对其进行 grep，如果文件 B 中存在该行，我会将其写入结果文件。顺便说一下，文件 A 和文件 B 具有不同的格式。结果文件将具有文件 A 的格式。

**[编辑 2]：**我在工作中被要求创建一个理想的 bash 解决方案，这样我们就不必在必须运行的所有机器上安装 python。

这是我目前的实现：

```
#!/bin/bash

LAST_TTP=`ls -ltr TTP_*.txt | tail -1 | awk '{ print $9 }'`
LAST_EXP=`ls -ltr *.SSMT | tail -1 | awk '{ print $9 }'`

while read -r line; do
   MATCH="$(grep $line $LAST_EXP)"
   echo "line: $line, match: $MATCH"

   # if not empty
   if [ ! -z "$MATCH" ]
   then
      echo $MATCH >> result
   fi

done < $LAST_TTP 
```

这种 bash 方法需要 10 多个小时才能完成。您对如何在 bash 中提高效率有什么建议吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T15:07:02.047

您可能正在查看列表而不是集合，从而导致 O(n²) 性能。尝试：

```
with open('b') as b:
  blines = set(b)
with open('a') as a:
  with open('result', 'w') as result:
    for line in a:
      if line not in blines:
        result.write(line) 
```

假设一致地长（而不是过长的行），这个实现的性能是`O(|A| + |B|)`（摊销的，由于[Python 的`set`速度非常快](http://wiki.python.org/moin/TimeComplexity#set)）。内存需求为`O(|B|)`，但系数显着大于 1。

如果输出中的行顺序无关紧要，您还可以对两个文件进行排序，然后逐行比较它们。这将有一个顺序的性能`O(|A| log |A| + B log |B|)`。内存需求将在`O(|A|+|B|)`，或更准确地说，`|A|`+ `|B|`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T15:16:44.330

对每个输入文件进行排序。现在从每个中读取一行。如果一行比较小于另一行，则将其作为差异输出并从该文件中读取下一行。如果两行比较相等，则从两个文件中读取下一行。如果你读到一个文件的末尾，另一个文件中的所有行都是不同的。

这是一个 O(n log n) 算法，而不是您开始使用的 O(n^2) 算法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T17:44:20.383

`grep`如果适合您的需要，您可以通过在找到第一个匹配项时停止脚本来稍微加快脚本速度。

如果您`grep`支持它，请使用`grep -m 1`.

您的问题是您生成`grep`了近 300,000 次，并且每次读取超过 13,000,000 行。

在第一场比赛中停下`grep`来会有所帮助，但所有这些高管的开销也是一个重要因素。Python 中的实现将消除此问题。

至于选择脚本中的文件，请参阅[BashFAQ/003](http://mywiki.wooledge.org/BashFAQ/003)和[Parsing`ls`](http://mywiki.wooledge.org/ParsingLs)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T15:22:10.277

您的实现似乎可以：

```
grep --fixed-strings --file=file_B file_A > result_file 
```

但是@phihag 和@mark Ronsam 的答案都是更好的解决方案。

此外，如果您希望使用重型武器，您的解决方案非常适合使用 map-reduce 框架，例如 hadoop。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T16:28:40.903

join 命令也可以执行您想要的操作。join 需要预先对两个文件进行排序。选项 -v 为每个不可配对的行打印一行。

所以你会想要类似的东西

加入 -v 1 sortedfile1 sortedfile2

（您需要根据您的文件格式设置连接选项，请参见连接手册页）

下面的示例使用第二个 resp 连接文件 test1.txt 和 test2.txt。连接的第一个字段。假设文件是​​使用 sort 命令预先排序的。-v 1 选项只输出 test1.txt 无法加入的行。

```
>猫 test1.txt
一个 1 2
乙 2 3

> 猫 test2.txt
1 个
4×

> 加入 -v 1 -1 2 -2 1 test1.txt test2.txt
2 b 3

> 加入 -v 1 -1 2 -2 1 -o 1.1 1.2 1.3 test1.txt test2.txt
乙 2 3

```

sort 和 join 都适用于大文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T16:32:53.870

我会考虑 comm 命令。它应该比 grep 更快，因为它可以处理已排序的数据，而 grep 将始终进行线性搜索

```
comm -2 -3 <(sort file1) <(sort file2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T23:57:06.677

您还可以使用 awk：

`awk 'NR==FNR { arrA[$0]; next } $0 in arrA' file_A file_B > result`

命令行中文件的顺序（... file_A file_B）非常重要。

# java - Projections.property() 中的嵌套属性路径

> ID：10801762
> 
> 赞同：2
> 
> 时间：2012-05-29T15:03:46.160
> 
> 标签：java, hibernate, hibernate-criteria

我有以下代码：

```
Session session = (Session) em.getDelegate();
Criteria c = session.createCriteria(Term.class);
c.setProjection(
        Projections.projectionList()
                .add(Projections.property("id"))
                .add(Projections.property("qualifier"))
                .add(Projections.property("preferred"))
                .add(Projections.property("terminology.definition"))
);
c.list(); 
```

但是 Hibernate`terminology.definition`出现异常 org.hibernate.QueryException: could not resolve property: terminology.definition of: net。** .*术语

尽管事实上有一个财产`Term`：

```
@OneToOne(mappedBy = "term")
public Terminology getTerminology() { return terminology; } 
```

并`Terminology`有一个`@Basic`名为`definition`. 我可以用一个看起来很愚蠢的别名来修复它：

```
session.createCriteria(Term.class).createAlias("terminology", "terminology") 
```

但这是不可取的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T15:33:53.790

由于选择的方式，这是非常标准的。
术语大多类似于通过 SQL 端的连接引入，但就查询而言，您必须定义别名才能访问连接表。

实际上，如果您查看 JavaDocs for `Criteria`class，甚至还有一个示例：

`createAlias()`您可以使用或导航关联`createCriteria()`。

```
 List cats = session.createCriteria(Cat.class)
     .createCriteria("kittens")
         .add( Restrictions.like("name", "Iz%") )
     .list();

 List cats = session.createCriteria(Cat.class)
     .createAlias("kittens", "kit")
     .add( Restrictions.like("kit.name", "Iz%") )
     .list(); 
```

您会注意到您可以使用别名和`.`表示法，也可以使用`createCriteria`直接的属性名称。

但是，此示例适用于 where 子句。不是 100% 的预测结果如何（即，如果您可以有预测的子标准）。我会坚持使用您已经拥有的别名方法。

# jquery - TagIt 渲染初始标签

> ID：10801763
> 
> 赞同：0
> 
> 时间：2012-05-29T15:03:59.683
> 
> 标签：jquery, tag-it

我正在使用带有自动完成功能的[tagit](http://aehlke.github.com/tag-it/)，我想在编辑项目时用当前标签填充我的标签列表。

我还将它配置为在选择时将标签的 ID 保存在隐藏的输入字段中，并且这个隐藏的输入当前填充了当前正在编辑的项目的标签 ID。

如何在标签编辑器上设置初始值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:35:48.897

为了解决这个问题，我更改为在隐藏输入字段中使用标准标签名称而不是 ID。

这意味着我必须在提交时从数据库中获取标签 ID，但这似乎不是一个巨大的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:54:22.313

**编辑：**再次阅读您的问题后，这可能对您不起作用，因为您使用 id 而不是标签填充输入。

我不确定存储 id 部分，但这是您加载具有初始值的页面的方式：

```
<input 
    id="tags_input" 
    type="hidden" 
    name="tags_input" 
    value="<!--put comma delimited tags in here-->">
<ul id="tags"></ul> 
```

我假设当您拥有的不仅仅是标签名称时，数据会以某种方式存储在输入框中。使用萤火虫查看里面放了什么，然后加载一个页面，其中输入有什么标签-它放在那里。

# php - jQuery 加载 AJAX 内容 与 $_GET

> ID：10801768
> 
> 赞同：0
> 
> 时间：2012-05-29T15:04:15.743
> 
> 标签：php, jquery, ajax, get, load

假设我列出了一个带有如下链接的行列表：

**内容.php**

```
/*DATABASE CONNECTION AND SQL STUFF*/

<div id='content'>

  <?php 

    $sql = mysql_query ("SELECT id, somedata FROM myTable");

    while ($row = mysql_fetch_assoc($sql)) {

    echo "<a href='?p=moreData&id=" . $row['id'] . "'>" . $somedata . "</a><br />\n";

    }

  ?>

</div> 
```

**更多数据.php**

```
<?php

  $id = $_GET['id'];

  /* SQL STUFF */

  echo "More information about" . " ". $somedata. " " . "wich has an id of" . " " . $id; 
```

如何使用在文件中`moreData.php`调用的新 div 中加载 $_GET 信息而不是加载新页面？`<div id='ajaxContent'>``content.php`

我已经阅读了一些关于 jQuery 加载的内容，但我对 jQuery 编码非常陌生，我自己无法弄清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:12:04.163

您需要使用要通过 GET 发送到 moreData.php 的 id 预设一个 javascript var rowId。我会将它设置为标签的 rel 属性，并在我处理点击事件时获取它。

```
echo "<a class='ajaxCall' rel='" . $row['id'] . "' href='?p=moreData&id=" . $row['id'] . "'>" . $somedata . "</a><br />\n"; 
```

然后点击事件

```
$('a.ajaxCall').click(function() {
  var rowId = $(this).attr('rel');
}); 
```

在同一事件中，ajax 调用

```
$.ajax({
  type: "get",
  url: '/moreData.php', // your uri to the moredata
  data: { id: rowId },
  success: function(data) { // data is the response of the ajax call
    $('#ajaxContent').html(data);
  }
}); 
```

你需要 jQuery 库。

# objective-c - 如何在nsstring中的'='符号后添加双引号？

> ID：10801772
> 
> 赞同：2
> 
> 时间：2012-05-29T15:04:25.343
> 
> 标签：objective-c, ios, nsstring

我有一个奇怪的问题，是否需要在 nsstring. 下面是示例

```
NSString *codes = [NSString stringWithFormat:@"%@",sessionToken];
NSString *slash = [NSString stringWithFormat:@"auth session_token=%@",codes]; << here I have to add the "". 
```

我试过

```
NSString *slash = [NSString stringWithFormat:@"auth session_token=\"%@\"",codes]; 
```

但它没有用，结果是这样显示的`\"value\"`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T15:10:20.647

`(\)`后跟引号的反斜杠`(")`会将引号插入到 NSString 中。

```
NSString *slash = [NSString stringWithFormat:@"auth session_token=\"%@\"",@"1233"];
NSLog(@"slash %@", slash); 
```

输出是

```
[23273:a0f] slash auth session_token="1233" 
```

[是否可以在 nsstring 中包含引号？](https://stackoverflow.com/questions/1934886/is-it-possible-to-include-a-quotation-mark-as-part-of-an-nsstring)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T15:11:44.110

尝试这个：

```
NSString *slash = [NSString stringWithFormat:@"auth session_token=""""""",codes]; 
```

我最近做了一些类似的事情，这似乎对我有用

# mysql - 如何规避 mySQL 中的最大密钥长度？

> ID：10801773
> 
> 赞同：0
> 
> 时间：2012-05-29T15:04:32.837
> 
> 标签：mysql, mysql-error-1071

我正在创建一个索引大量测量值的表，分布在各种文件中。在不同的表中，对于不同类型的数据，我使用数据文件的绝对路径作为唯一索引。这工作得很好。

但是，当我现在尝试在新表中重现该设置时，我得到

> mysql> alter table weights 改变列路径 path varchar(1000); ERROR 1071 (42000)：指定的密钥太长；最大密钥长度为 767 字节

这很奇怪，因为我的另一个表中的同一列的特征是：

```
| Field               | Type          | Null | Key | Default | Extra |
+---------------------+---------------+------+-----+---------+-------+
| path                | varchar(1000) | YES  | UNI | NULL    |       | 
```

那么，我上次是如何绕过这个限制的呢？我应该告诉我自从创建第一个表以来我已经重新安装了 linux (& mySQL)，所以很可能在我不知情的情况下更改了一些默认值。

当我启动 mySQL 时，欢迎消息是：

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 128
Server version: 5.5.22-0ubuntu1 (Ubuntu) 
```

当我搜索以前的答案时，一般的反应似乎是“嗯，就是这样”，但显然不是？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:13:45.163

检查主键的定义 - 您可能在第一个表上使用了部分前缀键索引。

总体而言，更好的解决方案是使用文件路径的哈希作为主键并将文件路径本身存储在另一列中。

# jquery - Isotope.js 没有像 Basic 示例中那样响应

> ID：10801774
> 
> 赞同：1
> 
> 时间：2012-05-29T15:04:34.623
> 
> 标签：jquery, jquery-isotope

[我在http://pressedweb.com/portfolio](http://pressedweb.com/portfolio)制作了一个我非常满意的作品集，但是当我调整窗口大小时，它不会像在此示例中那样重新组织容器项目：[http://isotope.metafizzy .co/demos/basic.html](http://isotope.metafizzy.co/demos/basic.html)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:23:42.693

这些项目不会在窗口调整大小时重新排列，因为容器的大小不会在窗口调整大小时改变。

在 Isotope 基本示例中，容器的宽度是“流动的”，它会响应窗口大小的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:54:51.427

尝试这个：

```
$(window).resize(function() {
    $('#container_here..').isotope({ sortBy : 'random' });
}); 
```

# excel - Excel在空白单元格后重新开始编号

> ID：10801777
> 
> 赞同：0
> 
> 时间：2012-05-29T15:04:41.790
> 
> 标签：excel, excel-formula

我有 3 列数据。B 列包含一些有关任务的数据，C 列包含有关谁在执行任务的数据。在 B 列中将有一个主要任务的标题，下面是子任务。

我想在 A 列中做的是查看 C1，它是空白的，在 A1 0 中。当我向下复制时，A2 会查看 C2，看到里面有东西，查看 A1，看到里面有 0，然后放A2 中的 1 个。

A3 将查看 C3，查看那里的数据，查看 A2 并查看它是否大于 0，然后将 A2 中的任何内容加 1，依此类推。

我已经尝试了很长时间使用不同的公式组合，但我无法做到正确。

以前有人做过吗？怎么做的？！

![屏幕截图和数据布局](../Images/bca191190c21eb6243feaa5b56db72f3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:17:02.833

关键是公式从 开始，`A2`而不是`A1`。在`A1`中，输入`0`。在`A2`中，输入以下公式并填写。

```
=IF(C2="",0,A1+1) 
```

编辑：

根据您的屏幕截图，这将为您提供您所拥有的一切。留空`A1`。然后`A2`输入以下内容并填写。

```
=IF(C2="","",IF(A1="",1,A1+1)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-12T08:39:03.777

`=IF(C2=" ",0,C1+1)`进入`A2`并向下拖动您的桌子。之后，复制和过去的值，然后找到并用空白替换零。

# php - 将数据从一个表移动到另一个表时出错

> ID：10801778
> 
> 赞同：0
> 
> 时间：2012-05-29T15:04:44.497
> 
> 标签：php, mysql, copy, move

```
$feedback_list = array( 
    array('date1', '87586cb8b79861edcc4e6a12104b87529c53050375904ff180'), 
    array('date2', 'abc1d08c3e42cffa7eaaa84eb4fe04b44c34be497ce7e8ea26') 
);

foreach($feedback_list as $feedback) {
    $result = mysql_query("INSERT INTO 'inactive_users' (token, username) 
       SELECT (token, username) FROM active_users WHERE token = '$feedback[1]'");
    if (!mysql_query($result,$con)) { die('Error: ' . mysql_error()); }
} 
```

.. 回显正确的值，该值也存在于`active_users`表中，但该值不会复制到第二个表中。错误是：

> 错误：查询为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:24:51.453

您永远不应该将 mysql_query 放在循环中。

INSERT 语句可以聚合成一个大字符串。

与我在开头所说的相反，您应该为您的选择语句使用循环，然后获取结果并连接您的插入查询；在循环之后执行它

一个例子

```
$feedback_list = array( 
array('date1', '87586cb8b79861edcc4e6a12104b87529c53050375904ff180'), 
array('date2', 'abc1d08c3e42cffa7eaaa84eb4fe04b44c34be497ce7e8ea26') 
);
$insert = null;
$select = "SELECT (token, username) FROM active_users WHERE token = '%s'";
foreach($feedback_list as $feedback) {
    $sql = print_f($select, $feedback[1]);
    $result = mysql_query($sql) or die("SQL:$sql<br />\n". mysql_error());
    $values = mysql_fetch_row($result);
    //$values['token'] => token
    //$values['username'] => username

    $insert .= "INSERT INTO 'inactive_users' (token, username) VALUES ('{$values['token']'}','{$values['username']}')\n";
}
 $theInsert = mysql_query($insert); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:26:38.280

你跑了`mysql_query`两次。尝试

```
foreach($feedback_list as $feedback) {
    $result = "INSERT INTO `inactive_users` (token, username) 
       SELECT token, username FROM active_users WHERE token = '{$feedback[1]}'";
    if (!mysql_query($result,$con)) { die('Error: ' . mysql_error()); }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T15:07:38.863

它应该是这样的：

```
foreach($feedback_list as $feedback) {
    $result = mysql_query("INSERT INTO inactive_users (token, username) SELECT token, username FROM active_users WHERE token = '{$feedback[1]}'");
} 
```

# jquery - 验证码：验证困难

> ID：10801779
> 
> 赞同：2
> 
> 时间：2012-05-29T15:04:54.620
> 
> 标签：jquery, ajax, captcha, recaptcha

我正在尝试实施recaptcha。我正在使用 jquery (ajax) 调用验证脚本 (http://www.google.com/recaptcha/api/verify)。这将数据类型限制为 JSONP，谷歌拒绝所有其他数据类型。

问题是谷歌验证返回字符串是这样的：真正的成功

或错误的“错误信息”

这会导致 jquery 端出现解析错误...有没有人知道我如何解决这种情况或最坏的情况，即使存在解析错误，也可以检索响应文本？

以下是我的ajax请求。我添加了用于测试的完整和错误功能。

```
$("#verifyCaptcha").click(function(){
    var chal = Recaptcha.get_challenge();
    var resp =  Recaptcha.get_response();                   
    $.ajax({
        url: "http://www.google.com/recaptcha/api/verify",  
        type: "GET",
        data: {
            privatekey: "MyKey",
            remoteip:  "172.29.129.133", 
            challenge:  chal,
            response: resp                          
        },
        //dataType: 'jsonp',
        success: function(output){  
            output = output.split('/n');
            console.log(output[0] + '**' + output[1]);
            if(output[0].toLowerCase() == 'true')
                $("#recaptcha_result").html('Succes: form will be sent.');
            else
                $("#recaptcha_result").html('Failed: form will NOT be sent.');
        },
        complete:function (xhr, status) {
            if (status === 'error' || !xhr.responseText) 
                console.log('an error occured');
            else 
                var data = xhr.responseText;
        },
        error: function(request, status, error)
        {
         if(request.responseText == 'success')
          $("#recaptcha_result").html('Succes: form will be sent.');
         else
          $("#recaptcha_result").html('Failed: form will NOT be sent.');       
          console.log(request.responseText + '**'+status + "**"+error);       
        }
    });                     

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:00:20.283

我认为由于请求的类型，它的 AJAX 和跨域请求是无效的。

在这里查看更多信息：

[使用 jQuery 验证 RECAPTCHA](https://stackoverflow.com/questions/540706/verifying-recaptcha-with-jquery)

# java - System.getProperty（“java.class.path”）在 Web 应用程序中不起作用

> ID：10801783
> 
> 赞同：0
> 
> 时间：2012-05-29T15:05:18.820
> 
> 标签：java, jakarta-ee

我正在尝试扫描我的 webapplication 类路径以查找所有隐含某些接口的类。

我当前的应用程序在独立版本中运行良好，但在网络环境中失败。

这是我的代码的一部分

```
public String[] getClassPathRoots() {
        String classPath;
          classPath = System.getProperty("java.class.path");
        }
        String[] pathElements = classPath.split(File.pathSeparator);
        return pathElements;
    } 
```

我不确定如何`java.class.path`在我的应用程序中使用，所以我应该能够获得类路径根目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T15:13:58.673

该属性设置为 JVM 在启动时使用的类路径。但是一个典型的 web 容器会动态地为每个 webapp 构建类路径（即类加载器层次结构），并且不会更新属性来反映这一点。（实际上不可能，因为一个 Web 容器可能运行多个 Web 应用程序，并且每个应用程序都有不同的类加载器层次结构。你将如何在 JVM 的全局系统属性对象中表示它？*）*

简而言之，您将需要找到另一种方法。

# perl - 在 Git 分支之间对 Perl 函数进行基准测试

> ID：10801789
> 
> 赞同：0
> 
> 时间：2012-05-29T15:05:40.850
> 
> 标签：perl, branch, benchmarking, git-branch

我目前正在对 Git 版本控制下的大型应用程序进行一些重构。我希望能够在我的主分支和我的不稳定分支之间对我修改过的函数进行基准测试。

目前我正在考虑做一个简单的脚本，如：

```
use Benchmark qw(:all) ;
use my_module ;

$count = -10

# Checkout my master code
system qw(git checkout <my_currently_in_production_version>) ;

timethis($count, sub {my_function()});

# Checkout my unstable code
system qw(git checkout <my_currently_unstable_version>) ;

something_to_reload_my_module();

timethis($count, sub {my_function()}); 
```

但这对我来说有点骇人听闻。Git 分支之间的基准函数是否有更清洁的解决方案？

谢谢你的帮助

编辑：我主要是在寻找像 Benchmark 模块这样的东西，但如果它存在，它支持分支更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:58:40.953

Well, you will need to checkout each version, but I wouldn't try to "unload" anything. That's just asking for trouble. That means two Perl interpreters need to be run: one for the old code and one for the new code.

What I would do is write a script that does the appropriate timings and saves the results to a file. Run it on both checkouts. Have a second script compare the results.

```
git checkout stable
../tools/time_test > stable
git checkout unstable
../tools/time_test > unstable
compare_times stable unstable 
```

(The first four lines could be done by `compare_times` via `system`.)

# types - 强类型是否意味着类型安全？

> ID：10801790
> 
> 赞同：1
> 
> 时间：2012-05-29T15:05:43.373
> 
> 标签：types, strong-typing

我正在查看编译器课程的讲义，其中一张幻灯片说：

> 强类型语言保证接受的程序是类型安全的

但是，我在其他地方找不到任何证据。

例如，维基百科将 c++ 列为强类型语言，但也将 c 列为类型不安全的语言。

那么有什么关系呢？幻灯片是错的，还是我错过了什么？

[维基百科的强类型示例](http://en.wikipedia.org/wiki/Strong_typing#Example)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:55:40.690

“强类型”不是一个定义非常明确的概念。最好将其解释为更准确的*内存安全*的同义词（即，程序永远不会通过未定义的行为破坏自己的内存）。

在类型论中，从不使用术语“强类型”。相反，有人谈到*健全*的类型系统。此外，任何不健全的打字规则通常根本不被认为是适当的类型系统。

在非正式用法中，“强类型”也适用于“动态类型”语言，从理论角度来看，这更没有意义。在类型论的术语中，这些语言甚至没有类型。

很久以前，Luca Cardelli 通过区分两个独立的维度引入了更连贯的语言安全分类：类型化/非类型化和安全/不安全。汇编是无类型且不安全的，C 是有类型但不安全的，JavaScript 是无类型但安全的，Java 或 ML 是有类型且安全的。参见例如[http://www.lucacardelli.name/Papers/TypeSystems.pdf](http://www.lucacardelli.name/Papers/TypeSystems.pdf)

# android - EditText 中的文本截断顶部

> ID：10801792
> 
> 赞同：2
> 
> 时间：2012-05-29T15:05:45.743
> 
> 标签：android, android-edittext

我在 RelativeLayout 中有一个 EditText，其中 EditText 中的文本顶部被截断。我尝试增加 EditText 的填充，但即使在 20dp 时，文本仍然会被剪裁。

我试图在这里发布一张图片，但显然我没有足够的 stackoverflow 声誉来允许我发布一张。想象一张横格纸，中间有一条水平虚线，就像你在小学时那样。对于虚线以上的任何内容，文本都会被剪裁。

这是我的 layout.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:orientation="vertical">
<RelativeLayout android:layout_width="fill_parent"
                android:layout_height="wrap_content">
    <TextView android:id="@+id/questionTextView"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginTop="0dp"
              android:layout_marginLeft="10dp"
              android:textSize="16dp"
              android:text="Audit Question"/>
    <RadioButton android:id="@+id/answerRadioButton"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_below="@id/questionTextView"
                 android:layout_alignLeft="@id/questionTextView"
                 android:layout_marginTop="5dp"
                 android:checked="true"
                 android:textSize="16dp"
                 android:text="audit answer"/>
    <EditText android:id="@+id/commentEditText"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:layout_below="@id/answerRadioButton"
              android:layout_marginLeft="20dp"
              android:layout_marginRight="20dp"
              android:layout_marginBottom="10dp"
              android:padding="20dp" />
</RelativeLayout> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:11:30.833

[视图的填充和边距之间的区别](https://stackoverflow.com/questions/4619899/difference-between-a-views-padding-and-margin)

`Padding`将为您的`EditText`视图的内容和自身的边界约束添加空间，这意味着它可能是您`EditText`被剪裁的问题 - 它在限制自己。尝试添加`android:layout_marginTop`到您的`EditText`而不是，在它和`RadioButton`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:19:29.327

我不清楚为什么会这样，但是当我在 EditText 小部件下方的底部添加一个 TextView 缓冲区时，文本不再被截断。

我添加了这个：

```
 <TextView android:layout_width="fill_parent"
          android:layout_height="5dp" /> 
```

EditText 中的文本现在看起来应该是这样了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-07T21:39:22.550

当我将 4 个子水平布局的垂直 LinearLayout 切换为均匀分布时，我发现了这一点。然后我发现 EditText 似乎在底部（至少）有非零填充和边距，这似乎弄乱了 Android 的间距。这是我的 4 个有效的水平视图之一。恼人的。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:layout_margin="8dp"
    android:orientation="horizontal">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="@string/type_label"/>

    <EditText
        android:id="@+id/division_type"
        android:inputType="textNoSuggestions|textCapSentences"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="5dp"
        android:layout_marginBottom="-4dp"
        android:hint="@string/divison_type_hint"/>

</LinearLayout> 
```

# iphone - UIScrollView 看不到 ScrollBars/Indicators。

> ID：10801794
> 
> 赞同：5
> 
> 时间：2012-05-29T15:05:49.247
> 
> 标签：iphone, objective-c, ios, ios4, uiscrollview

我以编程方式创建了一个 UISCrollView，但我看不到滚动条/指示器。

```
UIScrollView * contentScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(760, 70, 205, 320)];
contentScrollView.delegate = self;
contentScrollView.scrollEnabled = YES;
contentScrollView.pagingEnabled = YES;
contentScrollView.userInteractionEnabled=YES;
contentScrollView.scrollsToTop = YES;
contentScrollView.showsVerticalScrollIndicator = NO;
contentScrollView.showsVerticalScrollIndicator = YES;
contentScrollView.alwaysBounceVertical = NO;
contentScrollView.alwaysBounceHorizontal = NO;
contentScrollView.bounces = NO;
contentScrollView.hidden = NO;
[contentScrollView flashScrollIndicators];
UILabel *titleLable = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 205, 40)];
UILabel *subtitleLable = [[UILabel alloc] initWithFrame:CGRectMake(10, 60, 205, 50)];
UITextView * mainContent = [[UITextView alloc]initWithFrame:CGRectMake(10, 110, 205, 230)];

[titleLable setText:@"...."];
[subtitleLable setText:@"SUbtitle"];
[mainContent setText:@"Descritpon"];
[contentScrollView addSubview:mainContent];
[contentScrollView addSubview:titleLable];
[contentScrollView addSubview:subtitleLable]; 
```

我将这段代码添加到一个视图中，该视图再次附加到另一个更大的滚动视图。有谁知道为什么会这样？同样为简单起见，我将每个标签包含的文本减少为单词，但在程序中我的文本足以滚动

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:30:52.693

要让滚动视图滚动，滚动视图的内容大小必须大于其边界。请添加此行，然后检查：

```
contentScrollView.contentSize=CGSizeMake(320, 250); 
```

并设置`contentScrollView.bounces`to`YES`并删除该行`contentScrollView.showsVerticalScrollIndicator=YES`，因为您首先将值设置为`NO`然后`YES`。

这应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:14:38.410

```
contentScrollView.showsHorizontalScrollIndicator = YES;
contentScrollView.showsVerticalScrollIndicator = YES; 
```

# java - Spring Mobile - 拦截器未应用？设备为空

> ID：10801800
> 
> 赞同：3
> 
> 时间：2012-05-29T15:06:00.033
> 
> 标签：java, spring, spring-mvc, spring-mobile

我正在尝试使用 Spring Mobile，但我似乎无法让基本示例正常工作。我有一种感觉，我错过了一些非常简单的东西，但我不知道它是什么。这是我所拥有的......

在 web.xml 中

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
    </param-value>
</context-param> 
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>deviceResolverRequestFilter</filter-name>
    <filter-class>org.springframework.mobile.device.DeviceResolverRequestFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>deviceResolverRequestFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在 applicationContext.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
        xmlns:beans="http://www.springframework.org/schema/beans"
        xmlns:device="http://www.springframework.org/schema/mobile/device"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://www.springframework.org/schema/mvc 
                http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
                http://www.springframework.org/schema/beans 
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/mobile/device 
                http://www.springframework.org/schema/mobile/device/spring-mobile-device-1.0.xsd">

    <!-- Interceptors that execute common control logic across multiple requests -->
    <interceptors>
        <!-- Detects the client's Device -->
        <beans:bean class="org.springframework.mobile.device.DeviceResolverHandlerInterceptor" />
    </interceptors>

</beans:beans> 
```

在我的 Java 类中：

```
public class TestAction extends ActionSupport implements ServletRequestAware {

    // So that we can lookup the current Device 
    private HttpServletRequest request;

    public void setServletRequest(HttpServletRequest request) {
        this.request = request;
    }

    @Override
    public String execute() {
        Device currentDevice = DeviceUtils.getCurrentDevice(request);
        if (currentDevice.isMobile()) // <-- fails here with NPE 
```

**为什么设备未设置并导致为空？**

编辑：日志文件似乎表明设置拦截器有问题，但我仍然不确定我哪里出错了。

> 无法将“org.springframework.mobile.device.DeviceResolverHandlerInterceptor”类型的值转换为所需的“org.springframework.web.context.request.WebRequestInterceptor”类型；嵌套异常是 java.lang.IllegalStateException：无法将类型 [org.springframework.mobile.device.DeviceResolverHandlerInterceptor] 的值转换为所需类型 [org.springframework.web.context.request.WebRequestInterceptor]：找不到匹配的编辑器或转换策略

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T22:52:12.517

我已经看过这个并设法让它自己工作。所以我有几点意见。

1a）我认为不需要过滤器和拦截器。[我刚刚使用了过滤器，这就足够了](http://static.springsource.org/spring-mobile/docs/1.0.x/reference/html/device.html#spring-mobile-device-resolver-filter)。

1b) 拦截器（如果使用）[应在`DispatcherServlet`xml 配置文件](http://static.springsource.org/spring-mobile/docs/1.0.x/reference/html/device.html#spring-mobile-device-resolver-interceptor)中进行配置。您看起来像使用 Struts `ActionSupport`，这是正确的吗？如果是这样，您（可能）将没有 a `DispatcherServlet`，因此我认为此配置不会按预期工作。我认为这就是您获得堆栈跟踪的原因。

2）我会添加一个断点以`org.springframework.mobile.device.DeviceResolverRequestFilter.doFilterInternal`确保它正在执行。

3) 我会检查 Struts 没有`ServletRequest`对[.](https://github.com/SpringSource/spring-mobile/blob/61c768b09d1a36a154b17de772ab3e3090251449/spring-mobile-device/src/main/java/org/springframework/mobile/device/DeviceUtils.java#L32) 事实上，如果可能的话，我会将您的代码移植到 vanilla Spring。

4）也许你可以[`ServletActionContext.getRequest`](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.struts/struts2-core/2.2.3/org/apache/struts2/ServletActionContext.java#ServletActionContext.getRequest%28%29)在你的`execute`方法中使用，看看它是否有效，和/或将返回的请求与`setServletRequest`.

* * *

使用 Spring MVC，这对我有用。我的项目叫做 spring-mobile-test，“spring-mobile-test”是它的上下文根：

网页.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <filter>
        <filter-name>deviceResolverRequestFilter</filter-name>
        <filter-class>org.springframework.mobile.device.DeviceResolverRequestFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>deviceResolverRequestFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>mvc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>mvc</servlet-name>
        <url-pattern>/mvc/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

applicationContext.xml 为空。

mvc-servlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="temp" />

</beans> 
```

temp.TestController：

```
package temp;

import javax.servlet.http.HttpServletRequest;

import org.apache.log4j.Logger;
import org.springframework.mobile.device.Device;
import org.springframework.mobile.device.DeviceUtils;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class TestController {
    private static final Logger logger = Logger.getLogger(TestController.class);

    @RequestMapping("/")
    public @ResponseBody
    String home(HttpServletRequest req) {
        Device device = DeviceUtils.getCurrentDevice(req);
        String msg = "";
        if (device.isMobile()) {
            msg = "Hello mobile user!";
        } else {
            msg = "Hello desktop user!";
        }
        logger.info(msg);
        return msg;
    }
} 
```

当我浏览到 URL 时，浏览器会显示以下文本`http://localhost/spring-mobile-test/mvc/`：

> 桌面用户您好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T05:32:38.690

在 web.xml 中添加过滤器足以处理移动设备 etection。

1- 在 web.xml 文件中使用下面的配置。

```
<!--Device Resolver filter start here  -->
<filter>
       <filter-name>deviceResolverRequestFilter</filter-name>
       <filter-class>org.springframework.mobile.device.DeviceResolverRequestFilter     </filter-class>
</filter>
 <filter-mapping>
    <filter-name>deviceResolverRequestFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

2-添加下面的jar文件

```
 spring-mobile-device-1.x.x.RELEASE.jar 
```

3-代码检查设备

```
 Device device=DeviceUtils.getCurrentDevice(request);
        boolean isMobile = device.isMobile();
        boolean isTablet=device.isTablet(); 
```

# blackberry - 黑莓文件（网络工程）

> ID：10801801
> 
> 赞同：0
> 
> 时间：2012-05-29T15:06:02.580
> 
> 标签：blackberry, blackberry-webworks

我正在尝试（非常简单）使用 webworks 获取相机目录的文件列表。我正在尝试的代码如下：

```
function displayPhotos(id) {
try {
    var Dir, path, items;

    if ((window.blackberry === undefined) || (blackberry.io === undefined) || (blackberry.io.file === undefined)) {
        appendContent("photoDetails", "<p><i><b>blackberry.io.file</b> object not found (likely cause is WebWorks APIs are not supported by this user agent).</i></p>");
        debug.log("displayPhotos", "blackberry.io.file object is undefined.", debug.error);
        return false;
    }

    Dir = blackberry.io.dir;

    path = "";      
    path = "file:///Device/home/user/camera"";

    items = Dir.listFiles(path);

    console.log(items);

    //setContent(id, formatAsHTML(path, items));

}
catch(e) {
    console.log("displayPhotos", e, debug.exception);
}
} 
```

我得到的只是错误1004-我认为这是基于权限的，但我不相信我无法在相机上读取失败-有人知道吗？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:55:23.553

好吧，我想通了，希望这有助于任何人获得可怕的黑莓网络工作错误 1004。

您需要更改存储路径中的设备。就是这样。这个例子有效：

```
function displayPhotos(myFolder) {
    try {
        var Dir, path, items;       
        Dir = blackberry.io.dir;

    path = "";      
    if (myFolder != undefined){
        path = myFolder;
    } else {
        path = "file:///store/home/user/pictures";
        //file:///store/home/user/camera
    }

    items = Dir.listFiles(path);        
    return items;
}
catch(e) {
    console.log("displayPhotos", e, debug.exception);
}
}

function displayFiles(myFolder) {
try {
    console.log("displayFiles", "in " + myFolder);
    return displayPhotos(myFolder);
}
catch(e) {
    console.log("displayFiles", e, debug.exception);
}
} 
```

你可以这样称呼它：

```
 displayFiles(); 
```

或者像这样指定一个文件夹：

```
 displayFiles("file:///store/home/user/camera"); 
```

返回文件名数组。

希望这对某人有帮助！

# android - Android：从线程更新 UI

> ID：10801804
> 
> 赞同：1
> 
> 时间：2012-05-29T15:06:09.760
> 
> 标签：android

要更新搜索栏，我使用以下代码：我的问题是，只要调用 seekBar.setProgress()，UI 上的其他元素就会冻结，所以我希望有一个不同的线程来更新 main 中的 seekBar线。

如何进行 ？

```
 private Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        try {
            int pos;
            switch (msg.what) {
            case SHOW_PROGRESS:
                pos = setProgress();
                if (!mDragging && mBoundService.isPlaying()) {
                    msg = obtainMessage(SHOW_PROGRESS);
                    sendMessageDelayed(msg, 100 - (pos % 1000));
                }
                break;
            }
        } catch (Exception e) {

        }
    }
};

private int setProgress() {
    if (mBoundService == null || mDragging) {
        return 0;
    }
    int position = mBoundService.getCurrentPosition();
    int duration = mBoundService.getDuration();
    if (sliderSeekBar != null) {
        if (duration > 0) {
            // use long to avoid overflow
            long pos = 1000L * position / duration;
            sliderSeekBar.setProgress((int) pos);
        }
    }

    if (sliderTimerStop != null)
        sliderTimerStop.setText(stringForTime(duration));
    if (sliderTimerStart != null)
        sliderTimerStart.setText(stringForTime(position));

    return position;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:12:56.020

活动有一个[`runOnUiThread`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法允许单独的线程更新 UI 组件。你的`setProgress`方法最终看起来像：

```
private int setProgress() {

    if (mBoundService == null || mDragging) {
        return 0;
    }
    final int position = mBoundService.getCurrentPosition();
    final int duration = mBoundService.getDuration();

    runOnUiThread(new Runnable(){

        @Override
        public void run(){

            if (sliderSeekBar != null) {
                if (duration > 0) {
                    // use long to avoid overflow
                    long pos = 1000L * position / duration;

                    sliderSeekBar.setProgress((int) pos);
                }
            }

            if (sliderTimerStop != null)
                sliderTimerStop.setText(stringForTime(duration));
            if (sliderTimerStart != null)
                sliderTimerStart.setText(stringForTime(position));
        }
    });

    return position; 
```

}

# facebook - Facebook 粉丝页面应用程序将字符串传递给 app_data 并检索

> ID：10801807
> 
> 赞同：0
> 
> 时间：2012-05-29T15:06:21.613
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-apps, facebook-app-requests

嗨，我在 asp.net c# 中有一个多页 facebook 粉丝页面应用程序。我如何设置和检索该 app_data 查询字符串？这部分是签名请求还是粉丝页面的实际 url？在 safari 和 ie 中获得这个会有跨域问题吗？

我可以使用以下方法获取signed_request：

```
 if (!string.IsNullOrEmpty(signedRequest))
{
    dynamic SignedRequestData;
    var DecodedSignedRequest = FacebookWebContext.Current.SignedRequest.Data;
    SignedRequestData = DecodedSignedRequest 
```

所以基本上在第一页上，我想使用上面的方法获取 signed_reqeuest，然后将其附加到 app_data 查询字符串中的 url。在所有其他请求上，我可以得到这个并使用这些值来检查用户状态、喜欢、登录等。这样我认为它将停止 safari 中的跨域 cookie 问题。有人同意或不同意这一点吗？

有人做过吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:32:01.887

您可以设置`app_data`为：

`https://www.facebook.com/{page_id}?sk=app_{app_id}&app_data={"key1":"value1","key2":"value2"}`

您可以将多个值传递给`app_data`它，它将`signed_request`作为（POST 数据）返回到您的实际页面。

您真正应该做的是`signed_request`从 POST 获取第一页加载，并将其添加到应用程序的 URL 中`...?signed_request={signed_request_string}`。然后每个页面都应该在 URL 中传递它，以便您可以轻松地从任何子页面检查`like`和状态。`admin`你不需要为此使用`app_data`。在任何情况下，在您的应用中进行任何后续点击/重定向后，数据都会丢失。

# c++ - 仅使用 DLL *.h 头文件构建（compile.link）应用程序代码并在运行时加载 DLL 实现（显式链接）

> ID：10801812
> 
> 赞同：1
> 
> 时间：2012-05-29T15:06:29.210
> 
> 标签：c++, class, visual-c++, dll, dynamic-linking

我有一个应用程序代码，它调用具有显式链接（或运行时链接）的 DLL 库来访问导出的类。

DLL.h

```
#ifdef DLL_EXPORT
#define DLL_API __declspec(dllexport)
#else
#define DLL_API __declspec(dllimport)
#endif 
```

FooDLL.h

```
#include "DLL.h"

class DLL_API Foo
{
public:
    void doSomeThing();     
};

extern "C" DLL_API Foo* _getInstance() {
   return new Foo();
}

typedef Foo* (*getInstanceFactory)();

Foo* getInstance() {
    HINSTANCE dllHandle = LoadLibraryA("Foo.dll");
    getInstanceFactory factory_func = (getInstanceFactory)GetProcAddress(dllHandle, "_getInstance");
    return factory_func();
} 
```

FooDLL.cpp

```
#include "FooDLL.h"

Foo::doSomething() {
 // .......
} 
```

Application.cpp（调用 DLL）

```
#include "FooDLL.h"

Foo* obj = getInstance();
obj->doSomething(); // XXX this line can be compiled and linked only when DLL is already in path 
```

只有当 DLL 文件包含在 lib 路径中时，才能构建（例如编译和链接）上述代码。否则我得到*未解决的外部符号错误*。

```
error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall Foo::doSomething()" ..... 
```

是否可以在构建期间仅使用 DLL 头文件（即 FooDLL.h）而不使用 DLL/LIB 文件来构建应用程序代码？（ps 类实现必须在 cpp 文件中。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:05:28.897

带有虚函数。

```
class Foo
{
public:
    void virtual doSomeThing();     
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T01:18:09.817

对的，这是可能的。如果您没有导出类，则根本不需要头文件。我不确定你为什么在头文件中调用 LoadLibrary。由于您正在导出类，因此您必须让编译器知道类型。此外，您不必导出整个类，您可以只导出要公开的类的特定成员函数 **您的 dll 头**用于 dll 和 exe 项目，应包括以下内容（我使用了自己的名字）：

```
#ifdef WIN32DLL_EXPORTS
#define WIN32DLL_API __declspec(dllexport)
#else
#define WIN32DLL_API __declspec(dllimport)
#endif

class CWin32DLL 
{
public:
    CWin32DLL();
    int WIN32DLL_API GetInt();
}; 
```

**执行：**

```
#include "stdafx.h"
#include "Win32DLL.h"

extern "C" WIN32DLL_API CWin32DLL* _getInstance() 
{ 
    return new CWin32DLL(); 
} 

// This is the constructor of a class that has been exported.
// see Win32DLL.h for the class definition
CWin32DLL::CWin32DLL()
{
}

int CWin32DLL::GetInt()
{
    return 42;

} 
```

**您的 DLL 使用者：**

```
#include "Win32DLL.h"
#include "SomeOther.h"
typedef CWin32DLL* (*getInstanceFactory)();

HINSTANCE dllHandle = LoadLibrary(_T("Win32DLL.dll")); 

getInstanceFactory factory_func = (getInstanceFactory)GetProcAddress(dllHandle, "_getInstance"); 

CWin32DLL* pWin32 = factory_func();

int iRet = pWin32->GetInt(); 
```

不要忘记在项目属性、C++、预处理器、dll 的预处理器定义中定义 WIN32DLL_EXPORTS（或等效项）。

# c# - 结合三个查询

> ID：10801817
> 
> 赞同：1
> 
> 时间：2012-05-29T15:06:46.080
> 
> 标签：c#, linq

如何将这 3 个查询组合在一起并将它们作为数据表返回：

# 1：

```
var TDD = 0;
                var queryTDD = (from x in db.GetAll<WMINO>()
                                 join y in db.GetAll<WMCTM>()
                                 on x.PO_ID equals y.Contract_ID
                                 select new
                                 {
                                     TDD = x.Payable,
                                 }); 
```

# 2：

```
 Decimal TotalToDatePayable = 0;
            TotalToDatePayable = ((from ori in db.GetAll<WMPORI>()
                                      join ctm in db.GetAll<WMCTM>()
                                      on ori.CTMSysID equals ctm.CTMSysID
                                      select ori.ExB4Taxes).Sum()); 
```

# 3：

```
 var query = from ctm in db.GetAll<WMCTM>()
                        join vnm in db.GetAll<WMVNM>()
                        on ctm.VendSysID equals vnm.VendSysID
                        where ctm.WONOs == workOrder && ctm.TransType == "Purchase Order"

select new
                            {
                                ctm.CTMSysID,
                                ctm.Contract_ID,
                                ctm.VNM_ID};` 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:10:54.420

这是不可能的，因为每个查询都有不同的结果并使用不同的列和条件......

组合这些查询没有任何意义......

# rest - 寻找 RESTful 方法来更新具有相同字段集的多个资源

> ID：10801818
> 
> 赞同：8
> 
> 时间：2012-05-29T15:06:55.683
> 
> 标签：rest

任务：我有多个资源需要在一个 HTTP 调用中更新。

要更新的资源类型、字段和值对于所有资源都是相同的。

示例：通过 ID 设置了一组汽车，需要将所有汽车的“状态”更新为“已售出”。

经典 RESTFul 方法：使用请求 URL 之类的 **PUT /cars** 和 JSON 主体，例如 **[{id:1,status:sold},{id:2,status:sold},...]**

然而，这似乎是一个矫枉过正：太多次放置**状态：已售**

寻找一种 RESTful 方式（我的意思是尽可能接近“标准”休息协议的方式）发送**状态：**所有汽车只售一次以及要更新的汽车 ID 列表。这就是我要做的：

**PUT /cars** 使用 JSON **{ids=[1,2,...],status:sold}**但我不确定这是否是真正的 RESTful 方法。

有任何想法吗？

还有一个额外的好处：我希望能够通过简单地设置一个带有如下参数的 URL 来避免少量汽车的 JSON：

**PUT /cars?ids=1,2,3&status=sold**

这是否足够 RESTful？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:10:57.917

一个更简单的方法就是：

```
{sold:[1,2,...]} 
```

对于更大或更小数量的请求，无需使用多种方法 - 这会浪费开发时间，并且对性能或带宽没有显着影响。

就它是 RESTful 而言，只要它易于被接收者破译并包含您需要的所有信息，那么它就没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T13:21:39.357

据我了解，使用 put 不足以编写资源的单个属性。一种想法是简单地将属性公开为资源本身：

因此：PUT /car/carId/status 正文内容为“已售出”。

更新不止一辆汽车应该会导致多次放置，因为一个请求应该只针对一个资源。

另一个想法是公开某个协议，您可以在其中构建“批处理”资源。

POST /daily-deals-report/ 正文内容 {"sold" : [1, 2, 3, 4, 5]}

然后系统可以简单地确认正在进行的交易并更新汽车状态本身。通过这种方式，您可以创建一个全新的观点并启用比您实际预期的更像 REST 的 api。

此外，您应该考虑公开一个资源，列出所有可用并因此可以出售的汽车（因此没有出售，不需要维修或不出租）。

GET /cars/pricelist?city=* -> 准备出售的所有汽车的列表，包括汽车 ID 和价格。

这样一来，汽车就没有关于谁拥有汽车的状态。资源通常独立于其所有者（所有者是聚合汽车而不是它的组合）。

每当您难以将操作映射到资源时，您的模型往往会因面向对象的思维而存在缺陷。对于资源，许多关系（父属性）和状态属性往往会错位，因为设计资源比思考服务更抽象。

如果您需要操作许多类似的对象，您需要识别触发这些更改的业务流程，并通过描述其输入的单个资源公开该流程（就像每日交易报告一样）。

# php - 无法使用 cron 运行 php 脚本

> ID：10801823
> 
> 赞同：0
> 
> 时间：2012-05-29T15:07:19.120
> 
> 标签：php, cron, vpn

我有 2 个 php 脚本需要每隔几分钟运行一次，php 本身很好，因为我可以通过`http://myfakesite.com/myphpfile.php`在浏览器中键入来手动触发它。两者都可以正常工作。

我对 cron 没有太多经验，但我找到了 crontab 文件（我在 VPN 上使用 Parallels Power Panel），它已经有工作来运行 cron.hourly、每日、每周和每月的部件。我将我的电子邮件地址添加到 MAILTO 字段，并收到一条消息，告诉我 cron.hourly 不是目录——即使它是（尽管它目前是空的）。

我还在这个文件中添加了我自己的 2 个工作，如下所示：

```
*/1 * * * * wget http://myfakesite.com/script1.php
*/5 * * * * wget http://myfakesite.com/script2.php 
```

这些都没有被调用。在 php 脚本中，一旦调用脚本，我也有一行要给我发送电子邮件，这样我就知道它正在工作，并且从未通过 cronjob 收到过电子邮件。如果我 ssh 进入服务器并使用 wget，则 php 工作并通过电子邮件向我发送确认。

我也试过

```
*/1 * * * * php http://myfakesite.com/script1.php 
```

和

```
*/1 * * * * wget -O /dev/null http://myfakesite.com/script1.php>/dev/null 2>&1 
```

没有运气。crontab 文件中的 MAILTO 从未向我发送消息说运行脚本时出现问题，但显然它没有这样做。

任何人都可以提供帮助吗？我不知道接下来要尝试什么。

编辑：发现一些信息说“不是目录”错误可以归结为损坏的 crontab 文件。所以我下载了它，将信息复制到一个新文件并上传。“不是目录”错误消失了......完全。即使我告诉它查找我知道不存在的文件夹，例如 cron.myfakefolder，我也不会收到`Not a directory: /etc/cron.myfakefolder`电子邮件。用原始文件替换了我的新 crontab 文件，但我仍然没有从 cronjob 中得到任何反馈。

编辑 2：正如 dAm2K 和 prodigitalson 建议的那样，我尝试使用 wget 和 php 的绝对路径。两者都没有工作，我已经仔细检查了 usr/bin/wget 和 usr/bin/php 的位置，以确保它们确实在那里。我还检查了 var/log/cron 和 var/log/messages，两者都包含以下内容：

2002 无法执行“下载”操作：请求的文件“/var/log/cron”太大，需要立即发送。尝试以 512KB 为单位请求文件

不知道这是怎么回事。正如我在编辑 1 中提到的，即使我故意添加了错误的位置，我也不再收到错误电子邮件。这与日志文件中的错误有关吗？

另外，我检查了 crond 是否正在运行，并且根据“系统服务”和“系统进程”它正在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:11:44.470

尝试使用带有 cron 的可执行文件的绝对路径：例如

```
*/5 * * * * /usr/bin/wget 'http://myfakesite.com/script1.php' 
```

代替

```
*/5 * * * * wget http://myfakesite.com/script1.php 
```

仔细检查 /var/log/messages 或 /var/log/syslog 日志文件以获取有关 cron 执行的详细信息，以及系统一般会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:44:48.700

如果您的脚本在同一台服务器上，请尝试使用以下命令执行它`php -q`：

```
*/1 * * * * php -q pathToTheFile/script1.php 
```

# javascript - JQuery进度条实现

> ID：10801826
> 
> 赞同：0
> 
> 时间：2012-05-29T15:07:33.200
> 
> 标签：javascript, jquery

我找到了这个 Jquery 进度条功能，我想在我的网页加载时简单地使用它来显示进度条。由于我的页面加载速度有点慢，因此它可以提醒用户该页面尚未停止加载。下面是javascript和css部分。现在如何在 html 部分实现它？我在 html 正文中包含什么？

```
<script type="text/javascript" src="js/jquery.progressbar.js"></script>
    <script type="text/javascript">
        var progress_key = '<?= $uuid ?>';

        $(document).ready(function() {
            $("#pb1").progressBar();
            $("#pb2").progressBar({ barImage:  
           'images/progressbg_yellow.gif'} );
            $("#pb3").progressBar({ barImage: 
           'images/progressbg_orange.gif', showText: false} );
            $("#pb4").progressBar(65, { showText: false, barImage: 
           'images/progressbg_red.gif'} );
            $(".pb5").progressBar({ max: '2000', textFormat: 
             'fraction', callback: function(data) { if (data.running_value == 
               data.value) { 
            alert("Callback example: Target reached!"); } }} );
            $("#uploadprogressbar").progressBar();
        });

</script>
<style type="text/css">
        table tr { vertical-align: top; }
        table td { padding: 3px; }
        div.contentblock { padding-bottom: 25px; }  
        #uploadprogressbar { display: none; }
</style> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:14:03.643

根据您所引用的演示，您需要

```
<span class="progressBar" id="pb1"></span> 
```

id 为 pb1 .. pb4

[http://jsfiddle.net/RUBSx/1/](http://jsfiddle.net/RUBSx/1/)

# javascript - iPad ajax 问题

> ID：10801833
> 
> 赞同：9
> 
> 时间：2012-05-29T15:07:57.350
> 
> 标签：javascript, ajax, ipad, safari

长话短说：我必须创建一个似乎可以在除 iPad（可能还有 iPhone）之外的所有设备上运行的聊天功能。我们的客户使用他们的 iPad 聊天，所以我在过去的 7 个月里一直在尝试解决问题。

这就是我花了多长时间来确定问题所在。

问题显然出在 iPad 的浏览器上。我使用库 jQuery 运行 JSON Ajax 请求。请求很好，它们不包含错误。在某些时候，iPad 根本不运行 Ajax 请求。我不知道为什么，我找不到原因。每个 Ajax 请求都会被记录下来，但在某些时候服务器不会收到任何请求。我问了无数次，客户很肯定他们只是触摸 ipad 以防止它被锁定。

我已将请求率降低到每分钟大约 15 个请求，但这不起作用。

所以，我的问题是：**人们是否知道为什么 ipad 在 10-15 分钟后突然停止发送 Ajax 请求？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T11:23:43.603

把它放在这里，就像在评论中一样，没有任何语法突出显示。

我在这里做了一个超级最小的测试页面：http: [//www.focalstrategy.com/tests/ajax.php](http://www.focalstrategy.com/tests/ajax.php)

代码是：

```
<?

if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {

echo date("F j, Y, G:i:s a");
exit();

}

?>
<!doctype html>
<html>
<head>
    <title>AJAX test</title>
</head>
<body>
    <h1>Ajax Test</h1>
    <p>This page makes an AJAX request every 5 seconds and replaces the div below with the returned date.</p>

    <div><p id="date"><?= date("F j, Y, G:i:s a") ?></p></div>
    <div><p><span id="count">0</span> updates made.</p></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
    var count = 0;

    var getDate = function() {
        $.get('/tests/ajax.php', function(data) {
            $('#date').html(data);
            count = count + 1;
            $('#count').html(count);
        });
    }
    setInterval(getDate, 5000);
    </script>

</body>
</html> 
```

所以，我跑了一个小时，没有任何问题，iPad（完全更新）在整个过程中运行良好，没有遗漏任何东西。

我也在 Chrome 上运行了它并记录了它的行为。这看起来像这样：

![Chrome Profiler 视图，显示 DOM 节点、事件侦听器和内存使用情况的图表。](../Images/35337d1e20cbe150938509b162f4d81b.png)

（[全尺寸](https://i.stack.imgur.com/sLbIo.png)）

There's some weirdness here, in that at first the number of event listeners stays constant, then after a while goes mad,, increasing up to 56 listeners before dropping to 1 again. The DOM Node Count also repeatedly spikes, as high as 424\. Both have fairly odd behaviour bearing in mind the simplicity of this code.

Perhaps on your app the number of Dom Nodes being tracked, or the number of event listeners is reaching some value causing the iPad to lose track of what's happening, or something similar.

It's also worth noticing that the memory usage ramps up until garbage collection happens. That's what is meant to happen, though perhaps it's less efficient on the iPad.

编辑：我在一个干净的配置文件上再次对其进行了测试，许多事件侦听器是由于扩展造成的——发生了相同的行为，但程​​度不同，背景值也是 0-1 而不是 15-20

# function - Lua - 序列化没有加载字符串的函数？

> ID：10801842
> 
> 赞同：0
> 
> 时间：2012-05-29T15:08:39.757
> 
> 标签：function, serialization, lua, storage

在 lua 中，是否可以序列化函数（没有上值）并在**不使用 LOADSTRING**的情况下存储它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:44:23.053

`loadstring`您可以在完全不使用的情况下对它们进行序列化和存储`string.dump`。`loadstring`仅当您想将它们解除现实时才需要。

如果您以后需要它来重用实际函数（而不是出于其他简单目的，例如比较），您仍然需要访问至少字符串版本的`loadstring`，因为这是唯一允许您即时评估 Lua 源代码的工具.

如果你有它，你可以尝试： 1）如果你有访问权限，修改 Lua 引擎本身以将函数定义的源代码保存在某处。2）将Lua字节码写入Lua中的Lua源码转换器。使用 Lua 的简单 VM，它并不像听起来那么困难。

如果你完全无法访问`loadstring`，你可以尝试在 Lua 中编写 Lua VM。这比简单的转换器更难，但仍然很可行。

# ios - viewWillAppear 没有被触发

> ID：10801845
> 
> 赞同：2
> 
> 时间：2012-05-29T15:08:57.053
> 
> 标签：ios, cocoa-touch, ios5, uiview, uiviewcontroller

我已经设置了一个基本的测试应用程序，它显示一个包含标签的视图，不使用 IB。我想使用自定义 UIView 子类和自定义 UIViewController 子类。

这将按预期运行，但 MyViewController 的 viewWillAppear 和其他类似的委托不会触发。

我缺少什么来制造这些火？在以前的项目中（使用 IB），这些会很好。

这是完整的代码：

**AppDelegate** - 加载一个“MainVC”视图控制器并将其设置为根控制器

```
#import "AppDelegate.h"
#import "MainVC.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize mainVC = _mainVC;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.mainVC = [[MainVC alloc] init];
    self.window.rootViewController = self.mainVC;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**MainVC** - 创建一个分配“MyView”的“MyViewController”（它还传递应该用于视图的帧大小）

```
#import "MainVC.h"
#import "MyViewController.h"

@implementation MainVC

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        MyViewController *controller = [[MyViewController alloc] init];
        CGRect frame;
        frame.origin.x = 5;
        frame.origin.y = 5;
        frame.size.width = self.view.frame.size.width - (2 * 5);
        frame.size.height = self.view.frame.size.height - (2 * 5);
        controller.startingFrame = frame;
        [self.view addSubview:controller.view];
    }
    return self;
} 
```

**MyViewController** - 创建 MyView

```
#import "MyViewController.h"
#import "MyView.h"

@implementation MyViewController

@synthesize startingFrame;

- (void)loadView{
    self.view = [[MyView alloc] initWithFrame:startingFrame];
}

- (void)viewWillAppear:(BOOL)animated{
    NSLog(@"appearing"); //doesn't do anything
}

- (void)viewDidAppear:(BOOL)animated{
    NSLog(@"appeared"); //doesn't do anything
} 
```

**我的观点**

```
#import "MyView.h"

@implementation MyView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor whiteColor];
        label = [[UILabel alloc] initWithFrame:CGRectMake(20, 20, 150, 40)];
        [label setText:@"Label"];
        [self addSubview:label];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:26:01.680

**您的错误：**您正在设置一个根视图控制器，然后在其上添加另一个视图控制器视图。当第二个视图添加到视图层次结构中时，它的视图控制器以这种方式保持“未连接”。事实上，如果你检查 MainViewController 的 parentViewController，你会注意到它是`nil`.

**原因：**`presentModalViewController:animated:` viewWillAppear 方法将仅发送到根视图控制器或根视图控制器层次结构中的视图控制器（使用或呈现的那些`presentViewController:animated:completion:`）。

**解决方案：**要解决它，您有几个选择：

1.  使用您的视图控制器作为根视图控制器
2.  通过上述方法之一展示您的视图控制器
3.  保持您的代码原样并手动将这些事件连接到子视图控制器（但请注意这种方法，因为我相信您提到的事件会在 iOS 5 下自动转发 - 您可以轻松检查这一点）。
4.  如果我记得正确，使这些事件转发到您的视图控制器的另一种方法是将您的视图控制器的视图添加到窗口，而不是父视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:52:18.287

有许多非常基本的事情出错了：

*   您正在`initWithNibNamed:`为 MainViewController 进行整个设置，但您正在创建它只是调用`init`. 所以你的设置永远不会发生
*   您正在实现第二个 VC (MyViewController)，显然只是为了创建 myView，然后将其添加到您的 rootVCs 层次结构中。不好！只有一个 VC（在您的情况下为 MainViewController）应该负责创建和管理其层次结构中的视图
*   不要`loadView`像在 MyViewController 中那样设置 VC 控制器。在您的情况下，这是使事情正常进行的唯一方法，因为 MyVC 从未真正完全启动并运行，但方法是错误的 - 您基本上是在强制 View Controller 设置视图，尽管控制器本身从未在控制任何事物

还有一些东西，但这些是最重要的 - 看起来对您来说，再次阅读[模型 - 视图 - 控制器概念](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/Introduction/Introduction.html)的整个基本概念是一个好主意。接下来，您应该深入研究[UIViewController](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)和[UIView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)的类引用。

即使您最终会使用当前的方法获得您想要的结果，但从长远来看它对您没有帮助，因为您不会学会正确使用所涉及的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:08:06.973

方法不会在另一个视图控制器内的视图控制器上调用。如果仅针对**iOS 5**进行开发，请查看可用于解决此问题的**UIViewController Containment 。**如果您希望您的应用程序与以前的 iOS 版本兼容，您可以将方法调用转发到您的子视图控制器。就我个人而言，我更喜欢子类**化 SFContainerViewController**来自动处理这个问题：[https ://github.com/krzysztofzablocki/SFContainerViewController](https://github.com/krzysztofzablocki/SFContainerViewController)

# visual-c++ - Alpha Blending 去除图像中的接缝

> ID：10801851
> 
> 赞同：2
> 
> 时间：2012-05-29T15:09:09.803
> 
> 标签：visual-c++, image-processing, opencv, computer-vision

我已经缝合了两个图像，但在最终图像中有一个可见的接缝。我正在尝试使用**Alpha 混合**来去除该接缝。我知道使用该`cvAddweight()`函数应用 Alpha 混合，但在此函数参数是两个图像，**alpha**，**beta**，**gamma**和 desitination 。我正在服用`gamma=0`, `alpha=0.6`, `beta=0.4`. 作为我的代码的最后一部分，我的两个输入源图像和目标图像将是什么->

```
IplImage* WarpImg = cvCreateImage
(cvSize(T1Img->width*2, T1Img->height*2), T1Img->depth, T1Img- >nChannels); 
cvWarpPerspective(T1Img, WarpImg, &mxH);
cvSetImageROI(WarpImg, cvRect(0, 0, T2Img->width, T2Img->height));
cvCopy(T2Img, WarpImg);
cvResetImageROI(WarpImg);
cvNamedWindow("WarpImg Img",1);
cvShowImage("WarpImg Img", WarpImg);
cvSaveImage("save.jpg",WarpImg); 
```

我的最终图像是![在此处输入图像描述](../Images/644658a8c157a4f5a9b6fb0939b09d9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:50:49.927

金字塔/多波段混​​合应该为您的场景做得足够好。尝试 enblend：[http ://enblend.sourceforge.net](http://enblend.sourceforge.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:54:00.253

我不得不承认，我不认为 alpha blending 是你的答案。由于照明/曝光的差异，似乎存在。Alpha 混合是一种通过将两幅图像的颜色加权平均，本质上使一幅图像透过另一幅图像可见的方法。您的左右图像以黑色为背景。如果您只是简单地进行 alpha 混合，那么您实际上将使用黑色背景对图像进行加权。由此产生的效果将只是两个图像的变暗。

2 种潜在的其他方法可能是查看两幅图像的平均颜色，并将其中一个向上或向下调整亮度差异的 50%，将另一个调整为另一个 50%（一个上升，另一个下降，而 50% 使得整体亮度跳跃只有 50% 的差异）。

另一个可能会使用更复杂的图像直方图技术，您可以尝试将一侧图像的直方图扩大或缩小到另一侧并对齐它们，并通过新的直方图重新分配颜色（在这种情况下为灰度）。

# objective-c - 无法使用持久存储保存图像的 NSMutableArray

> ID：10801852
> 
> 赞同：1
> 
> 时间：2012-05-29T15:09:10.333
> 
> 标签：objective-c, uiimage, nsmutablearray, nsuserdefaults, persistent-storage

我正在尝试使用持久存储存储图像的 NSMutableArray，但它没有存储它

这是我的代码

```
[imagingList addObject:image ];  //image is of type UIImage
imagingHistory=[NSUserDefaults standardUserDefaults];
[imagingHistory        setObject:imagingList          forKey:@"imaging history"  ]; 
```

在我看来确实加载了我写的

```
 imagingList      = [[NSUserDefaults standardUserDefaults] mutableArrayValueForKey:@"imaging history"  ]; 
```

当我重新加载应用程序时，对象列表设置回零

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:15:32.717

您不能将 UIImage 直接保存在用户默认值中。您必须先将其转换为 NSData。偶然地，当我在寻找 NSUserDefaults 参考页面来回答这个问题时，发现[了一个关于如何做你想做的事情的教程](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:17:45.750

嗯，您真的不应该尝试将 UIImages 保存到 NSUserDefaults 中。看看这个资源[https://discussions.apple.com/thread/1729849?start=0&tstart=0](https://discussions.apple.com/thread/1729849?start=0&tstart=0)它解释了如何获取图像的 NSData 并将其写入文件。从那里您可以保存对应用程序文档目录中图像路径的引用（NSURL 或 NSString），然后可以使用 UIImage aImage = [UIImage imageWithData:[NSData datWithContentsOfURL:pathURL]] 之类的内容从那里加载它。

希望有帮助。

# c# - LINQ Group By multiple values 在 VB.NET 中运行不佳，但在 C# 中运行良好

> ID：10801859
> 
> 赞同：2
> 
> 时间：2012-05-29T15:09:38.550
> 
> 标签：c#, vb.net, linq, group-by

我发现当按多个值分组时不适用于 VB.NET，但它适用于 C#，这是我的代码，我的 VB.NET 代码有问题吗？

这是我的 VB.NET 代码：

```
Sub Main
  Dim empList As New List(Of Employee)()
    empList.Add(New Employee() With _
    {.ID = 1, .FName = "John", .Age = 23, .Sex = "M"c}) 
    empList.Add(New Employee() With _
    {.ID = 2, .FName = "Mary", .Age = 25, .Sex = "F"c})
    empList.Add(New Employee() With _
    {.ID = 3, .FName = "Amber", .Age = 23, .Sex = "M"c}) 
    empList.Add(New Employee() With _
    {.ID = 4, .FName = "Kathy", .Age = 25, .Sex = "F"c})
    empList.Add(New Employee() With _
    {.ID = 5, .FName = "Lena", .Age = 27, .Sex = "F"c}) 
    empList.Add(New Employee() With _
    {.ID = 6, .FName = "Bill", .Age = 28, .Sex = "M"c})
    empList.Add(New Employee() With _
    {.ID = 7, .FName = "Celina", .Age = 27, .Sex = "F"c}) 
    empList.Add(New Employee() With _
    {.ID = 8, .FName = "John", .Age = 28, .Sex = "M"c})

Dim query = empList.GroupBy(Function(x)  New With { .Age=x.Age, .Sex= x.Sex}) _
            .Select(Function(g) New With {g.Key, g.Count()}) 

For Each employee In query 
         Console.WriteLine(employee.Count)
Next employee 
End Sub

Public Class Employee 
    Private privateID As Integer
    Public Property ID() As Integer 

        Get 
            Return privateID
        End Get 

        Set(ByVal value As Integer) 
            privateID = value
        End Set 

    End Property 

    Private privateFName As String 
    Public Property FName() As String
        Get 
            Return privateFName
        End Get 

        Set(ByVal value As String) 
            privateFName = value
        End Set 
    End Property  

    Private privateAge As Integer 
    Public Property Age() As Integer
        Get 
            Return privateAge
        End Get 

        Set(ByVal value As Integer) 
            privateAge = value
        End Set 
    End Property  

    Private privateSex As Char 
    Public Property Sex() As Char
        Get 
            Return privateSex
        End Get 

        Set(ByVal value As Char) 
            privateSex = value
        End Set 
    End Property
End Class 
```

***employee.Count 的输出都是 1，这是错误的。我用C#试了一下，效果很好，结果是对的。***

```
//Here are my C# code:

void Main()
{
 var empList =new List<Employee>
 {
    new Employee {ID = 1, FName = "John", Age = 23, Sex = 'M'},
    new Employee {ID = 2, FName = "Mary", Age = 25, Sex = 'F'},
    new Employee {ID = 3, FName = "Amber", Age = 23, Sex = 'M'},
    new Employee {ID = 4, FName = "Kathy", Age = 25, Sex = 'F'},
    new Employee {ID = 5, FName = "Lena", Age = 27, Sex = 'F'},
    new Employee {ID = 6, FName = "Bill", Age = 28, Sex = 'M'},
    new Employee {ID = 7, FName = "Celina", Age = 27, Sex = 'F'},
    new Employee {ID = 8, FName = "John", Age = 28, Sex = 'M'} 
 };

var query = empList.GroupBy(x => new { x.Age,  x.Sex})
                   .Select(g=>new {g.Key, Count=g.Count()}); 

foreach (var employee in query )
   Console.WriteLine(employee.Count);

 }

public class Employee
{
  public int ID {get;set;}
  public string FName {get;set;}
  public int Age {get;set;}
  public char Sex {get;set;}
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:18:52.543

此查询应该有效：

```
Dim query =
    From el In empList
    Group el By Key = new with {key el.Age, key el.Sex} 
        Into Group
    Select New  With {.key = Key,
                      .count = Group.Count()} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T04:28:44.377

您错过了关键字**Key**

这是 lambda 表达式查询

```
Dim query = empList.GroupBy(Function(x)  New With { Key .Age=x.Age, Key .Sex= x.Sex}) _
                   .Select(Function(g) New With {.KeyName = g.Key, .Count = g.Count()}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T00:06:49.777

作为参考，在 VB.Net 中，您还可以编写如下查询：

```
Dim query = From e In empList
            Group e By e.Age, e.Sex Into Group.Count()
For Each item In query
    Console.WriteLine(e.Count)
Next 
```

其中 'item' 是具有 Age、Sex 和 Count 属性的匿名类型。

# c# - FluentMapping ComposedId 与 AutoInc

> ID：10801860
> 
> 赞同：2
> 
> 时间：2012-05-29T15:09:38.523
> 
> 标签：c#, nhibernate, fluent-nhibernate, auto-increment, composite-id

我正在为公司应用程序创建一个传输数据工具，将数据从旧版本移动到新版本，然后再返回。由于现在我们使用 NHibernate 和 FluentMapping，我将不得不映射所有旧表，并且一张具有组合主键的表存在问题。该表如下所示：

```
public class OldTable {
 public string KeyOne {get;set}
 public string KeyTwo {get;set}
 public string KeyN {get;set}
 public int Sequence {get;set}
 ...
} 
```

而且我需要将上述所有字段映射为复合键，唯一的问题是“序列”基于其他字段递增以避免重复键，其他字段是外键和简单字符串的混合。有没有办法做这个映射？如果需要创建表达式来计算序列，没问题。

好消息是新系统中的表只使用了一个整数 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T18:56:47.013

从[文档](http://nhforge.org/doc/nh/en/index.html#components-compositeid)中：

> 您不能使用 an`IIdentifierGenerator`来生成复合键。相反，应用程序必须分配自己的标识符。

您也可以在 HBM XML 模式中看到这一点。 `<id>`允许`<generator>`指定 a，但`<composite-id>`不允许。

这并不是说这个功能不能被添加到 NHibernate。如果这对您有用，请将您的功能请求提交给[NHibernate 问题跟踪器](https://nhibernate.jira.com/browse/NH)。如果此功能首先在 Hibernate 中实现，您的功能请求最有可能成功 - 如果是这样，移植它可能很简单。听起来它可能已经在 Hibernate 中实现了： [HHH-2060](https://hibernate.atlassian.net/browse/HHH-2060)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-29T15:46:54.260

是的，尝试为遗留数据库创建 NHibernate 映射是一件非常痛苦的事情。复合键是一个特别有趣的领域。

当您说需要将所有字段映射为主键时，我假设您的意思是复合键，因为表中最多只能有一个主键。在这种情况下，您的映射类中的以下内容是否不起作用？

```
CompositeId()
    .KeyProperty(x => x.KeyOne).KeyProperty(x => x.KeyTwo)
    .KeyProperty(x => x.KeyN).KeyProperty(x => x.Sequence) 
```

如果你只是想从遗留数据库中读取数据，你可能会有一些运气，但如果是我，在这种情况下，我可能会避免尝试将 NHibernate 映射到旧的遗留数据库，而只编写数据映射代码用手。以我的经验，它可能会更快、更容易、更少痛苦。

# django - 在 FormWizard (Django 1.4) 中修改表单字段

> ID：10801865
> 
> 赞同：1
> 
> 时间：2012-05-29T15:09:55.920
> 
> 标签：django, django-formwizard

考虑以下类：

模型.py：

```
class Data(models.Model):
    first_name = models.CharField()
    checkbox_1 = models.BooleanField()
    checkbox_2 = models.BooleanField() 
```

表格.py：

```
class Form1(ModelForm):
    class Meta:
        model = Data
        fields = ('first_name', 'checkbox_1',)

class Form2(ModelForm):
    class Meta:
        model = Data
        fields = ('checkbox_2',) 
```

`Form1`用于步骤 1 并`Form2`用于 a 的步骤 2 `SessionWizardView`。

`Form2.checkbox_2`如果用户在步骤 1 中签入，我如何在步骤 2 中禁用`Form2.checkbox_1`？

我试图通过覆盖`get_form()`但没有成功来实现这一点：

```
def get_form(self, step=None, data=None, files=None):
    form = super(MyWizard, self).get_form(step, data, files)
    if step == '1':
        form.fields['checkbox_2'].widget.attrs['disabled'] = 'disabled'
    return form 
```

请注意，我故意没有检查`Form2.checkbox_1`. 无论如何，我都尝试设置小部件的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:38:16.553

我通过覆盖 WizardView 的 get_form_kwargs 解决了这个问题。它通常只返回一个 get_form 填充的空字典，因此通过覆盖它以返回一个包含您需要预填充的数据的字典，您可以将 kwargs 传递给您的表单 init。

```
def get_form_kwargs(self, step=None):
    kwargs = {}
    if step == '1':
        your_data = self.get_cleaned_data_for_step('0')['your_data']
        kwargs.update({'your_data': your_data,})
    return kwargs 
```

然后，在您的表单**init**方法中，您可以在调用 super 之前弹出 kwarg：

```
self.your_data = kwargs.pop('your_data', None) 
```

并使用该值在表单上执行您需要的任何逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:12:38.327

[https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_form](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_form)

# algorithm - 有序的字符串数组 - 最坏的情况？

> ID：10801866
> 
> 赞同：-2
> 
> 时间：2012-05-29T15:10:00.633
> 
> 标签：algorithm, big-o

**O(log n)**是否会是限制在长度为 n 的有序字符串数组的最坏情况搜索时间？

我今天刚做了一个测试，我想知道我是对还是错，选择这些......

*   上）
*   O(log n)
*   O(n/2)
*   O(√n)

**编辑：**我编辑了这个问题以使事情更清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:24:57.023

[顺序搜索：](http://en.wikipedia.org/wiki/Linear_search)

最佳：O(n) 最差：O(n)

[二进制搜索：](http://en.wikipedia.org/wiki/Binary_search_algorithm)

最佳：O(1) 最差：O(log n)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:20:28.333

在*排序*的字符串数组中搜索字符串将是字符串`O(|S| * logn)`的`|S|`平均长度，并且`n`是字符串的数量，使用[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)，因为它具有`O(logn)`比较操作，并且每个比较都是`O(|S|)`（它必须读取字符串.. .)

如果您将字符串的长度视为常量 - 它是`O(logn)`. 在谈论字符串时，通常不会采用这种假设。

请注意，还有其他数据结构 - 例如[trie](http://en.wikipedia.org/wiki/Trie)，可以实现更好的复杂性。Trie 允许`O(|S|)`搜索集合中的每个字符串。

PS
从数学上讲，由于大 O 表示法是一个上限，而不是一个紧界 -对于二分搜索，**所有答案都是正确的**¹，它是`O(n)`, `O(n/2)`, `O(logn)`, `O(sqrt(n))`，因为它们都为二分搜索提供了渐近上限。

* * *

(1) 假设二分查找并且所有字符串都有长度限制，所以每个比较操作都是`O(1)`.

# php - 选择框选项列表出现在 Chrome 的页面之外

> ID：10801868
> 
> 赞同：1
> 
> 时间：2012-05-29T15:10:04.417
> 
> 标签：php, css, google-chrome, drop-down-menu

我`select`使用 PHP 创建了一个列表，当单击它以从下拉列表中选择一个选项时，选项列表会跳转到页面顶部，显示大约 3 个选项，其余选项不在页面上。

它只发生在 Chrome 中。有没有办法使用 CSS 来解决这个问题？

以下是相关代码：

### HTML

```
<tr>
    <td><label>Manufacturer</label></td>
    <td>
        <select id="prodManufacturer" class="validate[required]" name="prodManufacturer">
            <?php foreach($aAllManufacturer as $aManufacturer){ ?> 
                <option value="<?php echo $aManufacturer['prod_manufacturer_id']; ?>">
                    <?php echo $aManufacturer['prod_manufacturer_name']; ?></option>
            <?php } ?>
        </select>
    </td>
</tr> 
```

### CSS

```
#productFormContentWrapper select {
    margin: 0;
    padding: 0;
    color: #9d1116;
    font-size: 18px;
    padding: 3px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:36:13.270

根据 Mozilla 开发者网络：

> 如果控件显示为滚动列表框，则此属性表示列表中一次应可见的行数。**浏览器不需要将选择元素呈现为滚动列表框。**

只需省略该`size`属性或将其值设置为`0`（或者`1`，如果遵循 HTML5 规范，但这显然会导致遗留问题，因此暂时避免使用它）。

**[在 jsFiddle 上](http://jsfiddle.net/fuqAG/2/)**查看现场演示。

**参考：**

*   [`select`MDN 上的元素](https://developer.mozilla.org/en/HTML/Element/select)

# jquery - jQuery条件

> ID：10801869
> 
> 赞同：0
> 
> 时间：2012-05-29T15:10:06.113
> 
> 标签：jquery, conditional-statements

这是我的例子：http: [//jsfiddle.net/moolood/jLfxD/](http://jsfiddle.net/moolood/jLfxD/)

HTML：

```
<input type="text" id="child1" name="child1" value="" >
<input type="text" id="child2" name="child2" value="">
<input type="text" id="child3" name="child3" value="">

<button id="button">check</button> 
```

JS：

```
$('#button').click(function() {
    if ($('input[name^="child"]').val().length == 0) {
        alert('one or several fields are empty');
    }
    else {
        alert('good!!!');
    }
}); 
```

我想要做的是如果所有以“child”开头的输入的值> 0，则执行某些操作。

在我的示例中，我注意到如果 3 个输入值长度中只有一个大于 0，它会执行某些操作。

如何编写所有 3 个字段值长度必须大于 0 的代码？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:14:38.463

你可以使用`.is`一个函数：http: [//jsfiddle.net/jLfxD/1/](http://jsfiddle.net/jLfxD/1/)。

```
var isEmpty = function() {
    return $(this).val().length === 0;
};

$('#button').click(function() {
    if ($('input[name^="child"]').is(isEmpty)) {
        // if one or more are empty: `.is` returns true
        // as soon as one element satisfies the function
        alert('one or several fields are empty');
    }
    else {
        alert('good!!!');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:13:25.980

假设您只是检查长度，您可以尝试以下操作。

```
$('#button').click(function() {
    var accepted = true;
    $('input[name^="child"]').each(function(i) {
        accepted= $(this).val().length > 0 && accepted;
    });

    alert(accepted);

}); 
```

如果您需要检查大于 0 的数字值（您的问题很难判断），您可以尝试解析该值并进行检查。

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T15:13:29.093

它正在对第一个匹配的元素进行比较。您可以使用该[`.filter()`](http://api.jquery.com/filter/)函数对每个匹配的元素执行条件。

```
var children = $('input[name^="child"]').filter(function(index) {
  return $(this).val().length == 0;
});

if (children.length > 0)
{
    alert('one or several fields are empty')
} 
```

# c# - 有没有办法暂停所有 Threading.Timer 计时器？

> ID：10801870
> 
> 赞同：2
> 
> 时间：2012-05-29T15:10:08.150
> 
> 标签：c#, .net, multithreading, timer

我是 C# 新手，我正在开发一个需要多个计时器的程序。

我想知道当程序运行 CPU 密集型代码时，是否有办法同时暂停程序中的所有计时器？

目前，当前启用的计时器试图赶上在密集操作期间引发的所有计时器事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:13:30.887

我认为您可以创建这些计时器的列表（当您激活它们时）并手动禁用这些计时器（使用[Timer.Change](http://msdn.microsoft.com/en-us/library/system.threading.timer.change.aspx)方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:24:29.603

您将需要跟踪您在列表中创建的所有计时器，并在您不希望它们运行时调用 change 方法。

```
 List<System.Threading.Timer> TimerList = new List<System.Threading.Timer>();

  Timer stateTimer = new Timer(tcb, autoEvent, 1000, 250);
  Timer responseTimer = new Timer(tcb, autoEvent, 1000, 250);  

  TimerList.add(stateTimer);
  TimerList.add(responseTimer);

foreach (System.Threading.Timer t in TimerList)
{
  T.Change(TimeSpan(0), new(TimeSpan(0));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T15:22:23.530

.NET 框架中无法获取所有正在运行的 Threading.Timer 实例的列表。但是您可以创建自己的 Timer 包装器，将所有正在运行的计时器添加到列表中，当然当计时器完成时将它们删除。

如果您只想确保您的方法仅在 CPU 空闲时执行，您可以将计时器的线程优先级设置为较低的值。

# asp.net - 如何加密 ASP.NET 4.0 Web.Config？

> ID：10801875
> 
> 赞同：6
> 
> 时间：2012-05-29T15:10:32.697
> 
> 标签：asp.net, c#-4.0, .net-4.0, web-config, asp.net-4.0

我是 ASP.NET 的新手，我正在制作一个通过 ODBC 从数据库中获取数据的网站。

我在 Web.Config 中有连接字符串，但我不喜欢它。如果有人获得了 Web.Config，他们就可以访问数据库。

是否可以加密这些数据？

# javascript - 如何在不指向同一个对象的情况下复制变量？

> ID：10801878
> 
> 赞同：2
> 
> 时间：2012-05-29T15:10:44.170
> 
> 标签：javascript, object

> **可能重复：**
> [克隆 JavaScript 对象的最有效方法是什么？](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)（其中大多数使用外部库，或者不能完全工作。下面的博客文章是一个更好的资源）

这是在 scribd 开发者挑战的背景下。他们的 API 允许我调用 get_board 并获取电路板。但是，我想要做的是拥有我在 set_field 中修改的那个板的副本。但是，当我这样做时，它会弄乱他们自己的内部板对象并破坏他们的代码。所以，我需要（我认为）是调用 get_board 然后打破指向对象的指针并拥有我自己修改的板。我在下面用 mygame.board 尝试过这个，但我仍然得到同样的错误。

错误内容如下：`The type of an object is incompatible with the expected type of the parameter associated to the object`

```
function new_game()
{
    var board = get_board();
    var mygame={board: board}
    mygame.board = set_field(min_max_store, mygame.board)
}

function set_field(min_max_store, board)
{

  //loop x
   //loop y
    board[x][y] = -1;
return board
} 
```

如何阻止指针指向他们的对象并让我自己修改？

***编辑：***

这将适用于二维数组。

```
var one = [[1,2],[2,3],[3,4],[4,5]]
var two = one.slice(0)

for(var x = 0; x <= one.length - 1; x++)
{
  two[x] = one[x].slice(0)
}

one[1][1] = 10

console.log(one)
console.log(two) 
```

返回：

```
[[1, 2], [2, 10], [3, 4], [4, 5]]
[[1, 2], [2, 3], [3, 4], [4, 5]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:17:56.030

当您这样复制对象时，它将始终创建一个指针。但这不适用于原始类型。

您可以使用循环遍历对象并递归获取其所有参数的方法（用于深度）。另一种方法（草率，但它会起作用）是将对象编码为 JSON，然后将其解码回新变量。

例子：

```
var foo = 5;
// This is not a pointer, since it is a primitive type
var bar = foo;
// 'foo' will stay at 5
bar = 537;

var object_one = {
  var1: 3,
  var2: 5,
};

// This is just a pointer.
var object_two = object_one;

// This will change 'var1' of 'object_one' as well as 'object_two'
object_two.var1 = 5; 
```

使用 JSON 的示例：

```
var object_one = {
  var1: 'bar',
  var2: 5,
};
// A quick but dirty way to make a clone of the object without using a pointer 
var object_two = JSON.parse(JSON.stringify(object_one)); 
```

使用递归的示例：

```
function clone_object(p_obj) {
  var new_obj = new Object;
  if (typeof(p_obj) == 'object') {
    for (var i in p_obj) {
      new_obj[i] = clone_object(p_obj[i]);
    }
    return new_obj;
  } else {
    return p_obj;
  }
}

var object_one = {
  var1: 'bar',
  var2: 5,
};
var object_two = clone_object(object_one); 
```

[http://james.padolsey.com/javascript/deep-copying-of-objects-and-arrays/](http://james.padolsey.com/javascript/deep-copying-of-objects-and-arrays/)

# excel - 以给定值作为参数在 Excel 电子表格之间复制数据

> ID：10801885
> 
> 赞同：0
> 
> 时间：2012-05-29T15:11:04.623
> 
> 标签：excel, vba

假设我有两个电子表格。

其中一个电子表格有如下表格：

```
 **Sheet 1**
  A        B        C        D
1 Name     Age      Rank     Number

2 George   22       Master   12

3 Paul     21       Acolyte  22

4 Jimmy    32       Horse    33

5 Agnor    12       Cheetah  90 
```

另一个电子表格如下所示：

```
 **Sheet 2**
  A        B        C        D
1 Name     Age      Rank     Number

2 George   

3 Paul     21                22

4 Agnor 
```

我想将 Ages 从表 1 复制到表 2。所以我会复制 George、Paul 和 Agnor 的年龄，而忽略 Jimmy。我应该使用哪个函数来根据现有值复制数据？

有没有类似的东西：

```
foreach VAL in Sheet1
if(Sheet1.Name.EqualsIgnoreCase(Sheet2.Name))
{
    Sheet2.Age = Sheet1.Age;
} 
```

我查了一下，很多人都说要使用 VLookup，但我不知道这将如何应用。

**编辑**

我在这里找到了一个类似的已解决问题（不知道我是怎么错过的）：[Compare and copy data between worksheets](https://stackoverflow.com/questions/1692345/help-need-pls-excel-macro-compare-and-copy-between-worksheets)

但是，我对如何实现这一点仍然有些犹豫（我使用的是 Excel 2007）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:32:53.023

vlookup would be the easiest way to go.
I will use cell B2 in sheet2 as the reference to try to explain the function
`=VLOOKUP(A2,Sheet1!$A$2:$D$5,2,FALSE)`
The first parameter is the data you are using for a lookup - you may want to change that to `$A2` if you copy the formula around the sheet
The second parameter is where the data is that excel needs to find the value you referenced in the first parameter - use dollar signs. The data doesn't tend to move
The third parameter tells excel what info to return - the 2 means give me the 2nd piece of data
The last parameter tells excel if it can use a close match (`FALSE` for an exact match)

Now to follow Excel and see what it returns.....

First, it looks for `George` in the data (it knows it has to be an exact match from the fourth parameter)
Next, it finds the row `George -- 22 -- Master -- 12` and gives the function the second value (`22` in this case)

# c++ - 不能包括 标题

> ID：10801890
> 
> 赞同：3
> 
> 时间：2012-05-29T15:11:18.237
> 
> 标签：c++, include

我的程序中有以下内容`#include`，我试图将其从控制台应用程序更改为 GUI 应用程序。我必须手动编码。问题是我的程序无法导入字符串头。这是为什么？

```
#ifndef CATALOG_H_
#define CATALOG_H_
#include <string>

#include "StudentRepository.h"

#include "Student.h"

using namespace std;

class Catalog{
private:
    StudentRepository *studRepo;

public:
    Catalog(StudentRepository *stre):studRepo(stre){};
    ~Catalog();
    void addNewStudent(string name, int id, int group);
    void removeStudent(string name);
    void editStudent(string,int,int);
    Student seachStudent(string name);
    void printStudents();
          .
          .
          .

};

#endif /* CATALOG_H_ */ 
```

错误：

```
Description Resource    Path    Location    Type
Type 'string' could not be resolved Catalog.h   /L_6-8_GUI  line 25 Semantic Error 
```

PS：我使用带有 QT 插件的 Eclipse。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:39:12.643

写`std::string`，不只是`string`。

# c# - 使用索引选择 XML 元素

> ID：10801891
> 
> 赞同：1
> 
> 时间：2012-05-29T15:11:27.337
> 
> 标签：c#, xml, winforms, linq-to-xml

我有以下格式的 XML 文件；

```
<root>

<entry>
<details>
</entry>

<entry>
<details>
</entry>
...
</root> 
```

我没有任何属性，我在允许复制和删除项目的 ListBox 控件中显示详细信息字段。

因此，如果用户删除列表框中的第二个条目，则需要完全删除 xml 文件中的第二个条目。

有没有办法做到这一点 ？

目前，我正在使用 Linq-to-XML 来编写数据。

**编辑：**我忘了提到 ListBox 的选择模式——它是 MultiExtended。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T15:33:49.880

这是加载、删除索引条目然后保存文件的简单代码。

```
XElement root = XElement.Load(file);
root.Elements("entry").ElementAt(index).Remove();
root.Save(file); 
```

匹配多个：

```
int[] match = new int[] { 1, 10, 25, 33 };
var matches = root.Elements("entry").Where((x, i) => match.Contains(i));
foreach (var e in matches.ToList()) e.Remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:24:52.833

这是一个非常宽松的定义，但以下应该可以工作：

```
// untested
var entries = xDoc.Root.Elements("entry").ToList();
entries[selectedIndex].Remove();
xDoc.Save(...); 
```

# xml - 建立 http 连接以发送 xml 数据

> ID：10801892
> 
> 赞同：0
> 
> 时间：2012-05-29T15:11:28.133
> 
> 标签：xml, http, blackberry, java-me

> **可能重复：**
> [在 Java 中发送 HTTP POST 请求](https://stackoverflow.com/questions/3324717/sending-http-post-request-in-java)
> [BlackBerry 中的 Http POST](https://stackoverflow.com/questions/6184223/http-post-in-blackberry)

我正在尝试建立一个 HTTP 连接，我必须将一些数据发布到服务器我必须发送的数据是如下形式的 xml

```
<userdata>
  <emailId>
  <![CDATA[xyz@gmail.com]]>
  </emailId>
  <dateTimezones>
    <dateInfo>
      <date>MAY 30,2012</date>
      <timezone>Asia/Kolkatta</timezone>
    </dateInfo>
    <dateInfo>
      <date>MAY 31,2012</date>
      <timezone>GMT</timezone>
    </dateInfo>
  </dateTimezones>
</userdata> 
```

我不知道要在 java 中将此数据发送到服务器，我从未建立过 HTTP 连接，我已经搜索过但我没有得到/理解将其发送到服务器并从服务器接收相同的数据作为响应。

请举例说明。这里的客户端是黑莓设备。应用程序必须发送数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:17:05.420

如果是您要查找的客户端方法，请尝试在 Google 上搜索[HttpClient 。](http://www.google.com/?q=java%20httpclient%20tutorial)

# c++ - const 引用可以分配一个 int 吗？

> ID：10801894
> 
> 赞同：10
> 
> 时间：2012-05-29T15:11:30.943
> 
> 标签：c++, memory, reference, constants

我遇到了一个代码片段

```
const int& reference_to_const_int = 20;
cout<<"\n  reference_to_const_int = "<<reference_to_const_int<<endl; 
```

此代码编译并执行输出：-

```
reference_to_const_int = 20 
```

这对我来说很奇怪。据我所知，参考不占用内存，它们是其他变量的别名。因此我们不能说

```
int& reference_to_int = 30; 
```

上述语句不应编译给出错误：-

```
 error: invalid initialization of non-const reference of type ‘int&’ from an rvalue of type ‘int’ 
```

在“const int&”的情况下到底发生了什么？需要一个完整的解释。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T15:13:29.140

创建了一个临时对象，将`const`引用绑定到它是合法的，但将其绑定到非引用是非法的`const`。

就像：

```
const int& reference_to_const_int = int(20);  //LEGAL
      int& reference_to_const_int = int(20);  //ILLEGAL 
```

`const`引用延长了临时的生命，这就是为什么它有效。这只是语言的规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T15:39:58.177

当我们查看将引用绑定到临时对象时会发生什么时，这种行为更容易理解。如果我们写

```
const int& reference_to_const_int = 20; //A temporay object int(20) is created. 
```

编译器将上面的代码转换成这样的：

```
int temp = 20;
const int& reference_to_const_int = temp; 
```

如果reference_to_const_int 不是const，那么我们可以为reference_to_const_int 分配一个新值。这样做不会改变文字 20，而是会改变 temp，它是一个临时对象，因此无法访问。只允许 const 引用绑定到需要临时值的值可以完全避免问题，因为 const 引用是只读的。

**为什么 C++ 允许 const 引用接受临时对象或 RVALUES（如文字）？**

我们看到引用最常见的地方是作为函数参数或返回值。当引用用作函数参数时，对函数内部引用的任何修改都会导致函数外部参数的更改。

如果函数可以期望/接受临时对象或文字作为输入，并且如果函数尊重对象的 const 性，则将参数设置为 const 引用将允许在所有情况下使用该函数。

临时对象始终是 const，因此如果您不使用 const 引用，编译器将不会接受该参数。

```
void f(int&) {}
void g(const int&) {}
int main() 
{
    //f(1); //Error
    g(1); //OK 
} 
```

# mysql - 尝试输入多个表时丢失数据（讨论）

> ID：10801895
> 
> 赞同：1
> 
> 时间：2012-05-29T15:11:37.383
> 
> 标签：mysql, sql

**问题：** 您好，我已经为我的一个客户创建了一个 DBMS，其中具有将值从同一个表单输入拆分到四个不同表的功能（但是）有时会发生值输入到 table1 和 table2 而不是 table3和表 4，因此会导致数值计算出现错误。我对其进行了检查，发现此问题通常发生在连接缓慢或在线服务器关闭时。

**解决方案：**请让我知道如何使我的解决方案更加有效，以免导致数据丢失（只需要提示/逻辑）。我想到的一个解决方案是，如果我将插入到所有表中嵌入到一个 sql 查询中（当前每个表的插入查询是单独的），那么它可能会解决问题（你能给我一个提示我怎么能使用一个 SQL 查询插入多个表，我将非常感激）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:14:35.620

尝试使用事务来确保只有在插入所有表成功时才提交更改。

[MySQL 中的事务](http://www.databasejournal.com/features/mysql/article.php/3382171/Transactions-in-MySQL.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:15:28.150

您需要创建一个事务：[http ://dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

# windows - 如何安装新的硬件驱动，第一次插入时，windows会知道自动找到驱动

> ID：10801896
> 
> 赞同：0
> 
> 时间：2012-05-29T15:11:38.150
> 
> 标签：windows, hardware, drivers

我希望能够将项目部署给我的一些需要 USB 串行适配器的用户。困难的方法是给他们驱动程序并告诉他们插入适配器，当出现提示时，他们将不得不手动定位文件。我不想那样做。

大多数安装盾都知道如何自动执行此操作 - 您安装软件，插入新硬件，Windows 将自动安装正确的驱动程序。这是我想要的解决方案，只是没有安装屏蔽。我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:24:27.967

查看：

[常见问题解答：有关驱动程序安装框架工具的信息](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463086.aspx)

InstallShield 支持创建利用 DIFx（驱动程序安装框架）的安装程序。如果您不想购买/使用 InstallShield，您还可以查看 Windows Installer XML (WiX)。它还具有支持 DIFx 的扩展。

[使用 WiX 安装驱动程序](http://www.codeproject.com/Articles/44191/Drivers-Installation-With-WiX)

# ios - 在测试之间重置 iOS 模拟器

> ID：10801897
> 
> 赞同：7
> 
> 时间：2012-05-29T15:11:42.703
> 
> 标签：ios, ios-simulator, instruments, ios-ui-automation

我在仪器中设置了一组自动化测试用例，使用 tuneup.js 来测试应用程序。我决定使用 tuneup.js，因为它允许我将我的测试分成单独的测试用例并从一个单独的脚本运行整个集合，如果所有测试都运行正常，这很好，但是如果一个失败，所有测试都失败，因为模拟器处于未知状态（我已经编写了测试，所以它们都在同一个登录屏幕上开始和结束）有没有办法重置模拟器，或者在测试用例之间重新启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:15:49.400

Try to launch tests from the command line. UI Automation allows to execute only one test in one run. After the test will be completed (does not matter if it was failed or passed) - application will be kicked by the system (UIAutomation). At least it works with real devices.

Your command line launch script will work in the following manner: 1\. Reads configuration file (can be any file txt or xml) with path to your tests. At this point you will have an array with path to your tests and total tests count. 2\. Then using simple 'for' loop (from 1 to 'testcount') it will launch UIAutomation with required parameters. One of the parameters will be the path to your test script that was read from the configuration file.

You can also put the path to the 'configuration file' as a parameter for your command line launch script. This will allow you to run any test set simply calling the launch script with required configuration file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:11:52.340

我编写了一个脚本，它将重置 iOS 模拟器的所有版本和设备的内容和设置。它从菜单中获取设备名称和版本号，因此它将包括 Apple 为其发布模拟器的任何新设备或 iOS 版本。

它很容易手动运行或在构建脚本中使用。我建议在构建之前将其添加为 Pre-Action Run Script。

[https://github.com/michaelpatzer/ResetAllSimulators](https://github.com/michaelpatzer/ResetAllSimulators)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T14:04:50.910

测试失败会使您的应用程序处于未知状态是按原样使用 Apple 仪器工具的主要问题之一。我们在一个名为[Illuminator 的框架（在 GitHub 上，受 tuneup.js 启发）](https://github.com/paypal/Illuminator)以两种方式解决了这个问题。

首先，我们编写了一个[自动化桥](https://github.com/paypal/Illuminator/blob/master/docs/Bridge.md)——一个用于 RPC 与正在测试的应用程序的通道，它允许我们在每次测试之前重置我们的应用程序。

如果这还不够，Illuminator 测试运行器可以选择在模拟器的原始启动中重新运行每个失败的测试（例如，使用`--retest 1x,solo`）。

# python - 如何处理某些版本的python下不可用的鼻子扩展？

> ID：10801911
> 
> 赞同：2
> 
> 时间：2012-05-29T15:12:10.343
> 
> 标签：python, nosetests

我确实有几个使用nosetest 测试的python 包，并且正如预期的那样，其中一个步骤是使用多个版本的Python 运行测试。

主要问题是大多数鼻子扩展与所有版本的 python 不兼容，并且不安装它们会阻止您运行测试（如果鼻子`[nosetest]`从`setup.cfg`.

扩展示例：`yanc`, `xtraceback`, `machineout`,'nose_exclude`

我必须运行测试`Python 2.5, 2.6, 2.7, 3.2`

我不需要为所有版本的python运行所有这些，但我仍然应该如何重新配置​​测试的执行以免丢失它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:19:55.530

放弃鼻子测试，因为很难让它们在不同版本的 python 上工作并`tox`最终切换到`py.test`从`tox`.

# ajax - SelectOneRadio 设置选择时间

> ID：10801913
> 
> 赞同：0
> 
> 时间：2012-05-29T15:12:15.823
> 
> 标签：ajax, jsf-2, radiobuttonlist

我一直在绞尽脑汁想弄清楚这一点。我有一个非常简单的要求，结果证明这是一个非常有趣的问题。

要求是在用户选择单选按钮列表中的选项时更新时间戳。

所以我有一个单选按钮列表：

```
...
<h:selectOneRadio value="#{mybean.myvalue}" >
    <f:selectItem itemLabel="A" itemValue="A"/>
    <f:selectItem itemLabel="B" itemValue="B"/>
    <f:selectItem itemLabel="C" itemValue="C"/>
    <f:selectItem itemLabel="D" itemValue="D"/>
    <f:ajax render="timeBox" listener="#{measurements.captureTime('timeBox')}"/>
</h:selectOneRadio>
... 
```

页面下方有一个文本框：

```
...
<h:outputText id="timeBox" value='#{measurements.timeBox}'>
    <f:convertDateTime pattern="HH:mm:ss"/>
</h:outputText>
... 
```

然后在支持 bean 中我定义了监听器：

```
 ...
public void captureTime(String id){
       if(id.equals("timeBox"){
           timeBox = new Date(System.currentTimeMillis());
       }
}
    ... 
```

但是当我更改单选按钮时，值不会更新。我很确定这与 JSF 的各个阶段有关（即，由于这篇文章中的问题，它没有被更新：http: [//balusc.blogspot.ca/2012/03/reset-non-processed- input-components-on.html](http://balusc.blogspot.ca/2012/03/reset-non-processed-input-components-on.html)），但我不完全确定如何修复它。如果可能的话，我真的很想避免包含另一个库。

一如既往，如果您需要更多信息，请告诉我，我很乐意提供帮助。

谢谢！

**编辑** 这些组件的结构是：

```
<h:form>
<table>
  <tr>
    <td>
     <h:select.../>
    </td>
  </tr>
  <tr>
    <td>
     <h:output.../>
    </td>
  </tr>
</table>
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:56:48.893

给定的构造表明您复制了具有相同 ID 的组件。确保您实际上没有具有相同 ID 的重复组件。

# php - SSL 和会话劫持/固定

> ID：10801916
> 
> 赞同：2
> 
> 时间：2012-05-29T15:12:36.493
> 
> 标签：php, security, session, cookies, ssl

快速提问。SSL 是否完全防止会话劫持/固定？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:20:43.647

不可以。例如，在以下情况下可能会进行劫持：

*   被黑的 CA 根签署无效证书。该证书可用于进行中间人攻击。
*   被黑客入侵的域所有者电子邮件收件箱使黑客可以购买经过域验证的证书。
*   错误的密钥策略可能使攻击者有可能获得证书的私钥。
*   对客户端计算机的本地攻击可以查看系统中发生的情况，包括读取会话 cookie、拦截 SSL 流量、在系统钥匙串中注入虚假 CA 根证书等。
*   攻击者对服务器的入侵可以通过多种方式来拦截流量、重新路由数据包或读取重要的系统文件。
*   客户端库必须验证 SSL 证书并拒绝具有无效或过期证书的会话，否则拦截 HTTP 流量就像它在纯文本中一样微不足道。
*   XSS 攻击可能会泄露 cookie。Web 浏览器应该尝试防止这种情况，但您永远不知道所有组件是否按预期工作。

# java - 如何在java中移动超类中的嵌套类？

> ID：10801917
> 
> 赞同：-1
> 
> 时间：2012-05-29T15:12:36.920
> 
> 标签：java, class, nested, abstract, superclass

我需要重构类以提取抽象超类。例如

```
UpperClass {
NestedClass {
UpperClass.this.someMethod();
}
} 
```

喜欢：

```
AbstractUpperClass {
    NestedClass {
  ?????.this.someMethod();
  }
} 
```

在我计划在 2 个类 UpperClass1 和 UpperClass2 中继承 AbstractUpperClass 之后。但我不知道如何重构这个内部类，因为它调用了封闭类的方法。有可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:16:56.640

这里的诀窍是知道内部类是如何工作的。它本质上只是一个“普通”的静态类，但其构造函数隐式获取对封闭类的引用。所以这：

```
public class TopLevel {

    public void go() {
        new Inner().bar();
    }

    public void foo() { }

    public class Inner {
        public void bar() {
            TopLevel.this.foo();
        }        
    }
} 
```

相当于：

```
public class TopLevel {

    public void go() {
        new Inner(this).bar();          // explicitly passing in "this"
    }

    public void foo() { }

    public static class Inner {
        private final TopLevel parent;  // note that we have this new field

        public Inner(TopLevel parent) { // note this new constructor
            this.parent = parent;
        }

        public void bar() {             // we use the explicit reference instead
            parent.foo();               // of the implicit TopLevel.this
        }        
    }
} 
```

因此，综上所述，将内部类重构为顶级类的方法是添加一个引用`UpperClass`实例的显式字段，并将此引用传递给`NestedClass`构造函数。换句话说，就像第二个代码片段而不是第一个。

# asp.net-mvc - c#MVC利用AJAX的最佳方式

> ID：10801925
> 
> 赞同：0
> 
> 时间：2012-05-29T15:13:11.297
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在进行 AJAX 调用方面，我们使用了以下方法：

```
 $.ajax({
             type: "POST",
             async: false,
             url: '@Url.Action("CheckPhone", "Progg")',
             data: { input: WebPhoneNum
             },
             success: function (iReturn) {
                 if (iReturn == 0) {
                     alert(Phone Number must be in format (XXX) XXX-XXXX. Please Re-Enter');
                     submitval = false;
                 }
             },
             error: function (xhr, status, error) {
                 var err = eval("(" + xhr.responseText + ")"); // Boil the ASP.NET AJAX error down to JSON.                    
                 alert('Call to CheckPhone failed with error:  ' + err.Message); // display the error raised by the server
             }
         }); 
```

注意它如何调用控制器并返回一个值。我想知道是否有更好的方法来做到这一点。我知道 .NET MVC 内置了一些 ajax 调用，但找不到适合我在下面所做的。我知道 .NET MVC 有一个带有超链接的 ajax 调用构建，但这不是我需要的。我只需要调用返回一些值的控制器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:19:58.763

您只需要解决一件事：

```
async: false 
```

必须变成：

```
async: true 
```

因为否则你不是在做 AJAX。您正在向服务器发送同步请求，冻结客户端浏览器。

Other than that you seem to be doing some remote validation with this AJAX request. You probably might take a look at the [`[Remote]`](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx) attribute that's built in and which avoids you writing all this code. All you need to do is decorate the view model property that needs to be validated with this attribute and then enable unobtrusive client side validation by including the proper scripts.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:18:39.690

try to validate the format of a input with ajax? I recommend you learn about data annotations to validate that kind of details (please revalidate on server at submit form like a good practice)

here is a usefull tutorial [http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs)

# iis - HttpContext.RewritePath 破坏了内置 IIS gzip

> ID：10801926
> 
> 赞同：5
> 
> 时间：2012-05-29T15:13:22.530
> 
> 标签：iis, gzip, rewritepath

你好。

我`HttpContext.RewritePath`用来根据请求和主机将请求定向到内部站点文件夹。

问题：当我对 IIS 缓存和 GZIPped 的任何静态文件执行任何需要 RewritePath 的请求时，我得到的响应是带有标题的原始非压缩文件内容`Content-Encoding: gzip`，这导致“内容解码失败”错误。但是，当我执行相同的请求但使用完整的目录路径时（在这种情况下，我的代码中跳过了 RewritePath）我得到了正确的 gzip 压缩内容`Content-Encoding: gzip`。

例如：
出现错误的情况：
请求 url：`localhost/lib/ext_3.4.0/resources/css/ext-all.css`
使用 HttpContext.RewritePath 将请求路径重写为：`localhost/_sites/mainSite/lib/ext_3.4.0/resources/css/ext-all.css`

第一个响应不是压缩的——通常的 IIS 行为。当我按 ctrl+F5 时，出现“内容解码失败”错误。通过使用 Fiddler2，我可以看到响应内容未压缩，并且包含`Content-Encoding: gzip`标头。

没有错误的情况：
请求url：`localhost/_sites/mainSite/lib/ext_3.4.0/resources/css/ext-all.css`
请求路径没有被重写，因为它不需要。

第一个响应不会再次压缩。当我按 ctrl+F5 时，我得到正常的文件内容。通过使用 Fiddler2，我可以看到响应内容被压缩，大小减少了 5 倍，并且包含`Content-Encoding: gzip`标题。

我不能扔掉 RewritePath，我需要 IIS gzip。有没有办法让他们成为朋友？

# c# - 普遍接受的私有变量声明约定

> ID：10801927
> 
> 赞同：1
> 
> 时间：2012-05-29T15:13:24.897
> 
> 标签：c#, oop

我目前正在重构一些丑陋的代码，并将一个大型且过于复杂的 A 类拆分为具有子类 B 和 C 的超类 A。

我的问题是，如果我在拆分后仅与子类 B 相关的过于复杂的类中有私有变量，是否有一个普遍接受的约定来声明这些变量？

我的选择是：

```
protected variable in superclass A
pro: all variables located in central location
con: some variables in superclass unused by all subclasses

private variable in subclass B
pro: only shared variables present in superclass A (more "proper"?)
con: more complicated code management 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:21:03.430

> > **我的问题是，如果我在拆分后仅与子类 B 相关**的过于复杂的类中有私有变量，是否有一个普遍接受的约定来声明这些变量？

**如果它们仅与 B 类相关，则将它们放在 B 类中**。做任何其他事情，都会降低代码的可读性，并且会在未来造成混乱。

如果你想证明你对某人的回答是合理的，你可以指向[关注点分离 (SoC)](http://en.wikipedia.org/wiki/Separation_of_concerns)，它解决了你的拆分类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:24:33.820

@Ramhound 是对的：变量应该在需要它的类中

```
A - variables that are shared by both C and B
B - variables that belongs to B only
C - Variables that belongs to C only 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T15:25:07.687

绝对将它们放在子类 B 中，您应该将方法放在它们都继承自的类中的唯一原因是如果两者都将使用该方法，或者很可能在不久的将来会添加另一个类并将使用这些方法，属性，字段或在您的情况下变量

# php - PHP system("touch ...") - 没有这样的文件或目录

> ID：10801934
> 
> 赞同：-1
> 
> 时间：2012-05-29T15:13:41.100
> 
> 标签：php, linux, centos

我有一个这样的基本 PHP 脚本：

```
<?php
system("/bin/touch /root/testfile"); 
```

当我从命令行运行这个 PHP 脚本时：

```
# php myscript.php 
```

我明白了：

```
sh: /touch: No such file or directory 
```

此外，触摸在正确的位置：

```
# which touch
/bin/touch 
```

我需要在我的 PHP 脚本中设置有关路径的内容吗？因为它找不到触摸（尽管我专门用它的绝对路径来称呼它）。

**更新**

`/bin/touch /root/testfile`从命令行运行按预期正常工作。

此外，`touch`不工作，是的，但其他事情也不能正常工作，例如`sendmail`. 我只是`touch`在这个问题中作为一个例子来保持简单。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T15:17:50.520

PHP safe_mode 可能已启用。您必须在 /etc/php.ini 文件中将其关闭。

# android - android中的Sqite数据库插入

> ID：10801942
> 
> 赞同：-2
> 
> 时间：2012-05-29T15:14:15.647
> 
> 标签：android, android-contentprovider

我有一个 Sqlite 数据库插入功能

```
ContentValues values=new ContentValues();
values.put(CardTable.KEY_USERID, card_id);
values.put("id", some id);
values.put("namr", some name);
......
getContentResolver().insert(CardManagingProvider.CONTENT_URI_DETAIL, values); 
```

我的插入查询不起作用。是因为其中一个值`values`是长字符串（图像的 Base64 编码形式）吗？任何人都可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:22:14.183

[您可以在此处](http://www.sqlite.org/limits.html)查看 SQLite 的长度限制。

> SQLite 中字符串或 BLOB 中的最大字节数由预处理器宏 SQLITE_MAX_LENGTH 定义。该宏的默认值为 10 亿（1 亿或 1,000,000,000）。您可以使用如下命令行选项在编译时提高或降低此值：
> 
> -DSQLITE_MAX_LENGTH=123456789 当前的实现只支持长度为 231-1 或 2147483647 的字符串或 BLOB。一些内置函数，如 hex() 可能在此之前就失败了。在对安全敏感的应用程序中，最好不要尝试增加最大字符串和 blob 长度。事实上，如果可能的话，最好将最大字符串和 blob 长度降低到几百万的范围内。

您可以确定您的 Base64 是否超出了这些限制，但可能性不大。

但是，我建议不要将 Base64 字符串存储在数据库中。您的数据库越大，处理 SQL 语句所需的时间就越长。仅将图像的 URI 存储在数据库中，然后使用该 URI 从磁盘/网络定位/加载图像被认为是一种很好的做法。

# lua - 从 Corona OOP 类返回显示

> ID：10801944
> 
> 赞同：0
> 
> 时间：2012-05-29T15:14:24.233
> 
> 标签：lua, coronasdk

我是 Corona 的新手，正在尝试进行一些基本的 OOP。我有一个需要多个时间选择器小部件的应用程序，并且希望能够为每个实例重用一个“时间选择器”类。到目前为止，这是我的代码（简单的 - timepicker.lua）：

```
module(..., package.seeall)

local widget = require "widget"

picker = {}
picker.__index = picker

function picker.new()
    local picker_object = {}
    setmetatable(picker_object,picker)

    pickerGroup = display.newGroup()

    picker_object.theHour = 0
    picker_object.theMin = 0
    picker_object.am = true

    picker_object.increaseHrBtn = widget.newButton{
        default="gfx/up_regular.png",
        over="gfx/up_press.png",
        width=40, height=40,
        onRelease = picker.incHr
    }

    picker_object.decreaseHrBtn = widget.newButton{
        default="gfx/down_regular.png",
        over="gfx/down_press.png",
        width=40, height=40,
        onRelease = picker.decHr
    }

    picker_object.decreaseHrBtn.y = 100

    pickerGroup:insert(picker_object.increaseHrBtn.view)
    pickerGroup:insert(picker_object.decreaseHrBtn.view)

    return picker_object
end

function picker:incHr(event)
    print("inc")
end

function picker:decHr(event)
    print("dec")
end 
```

这是我实例化它的地方：

```
local TimePicker = require("timepicker")
local reminderPicker1 = TimePicker.picker.new() 
```

这给了我一个在屏幕上正常工作的时间选择器（或者其中的前两个按钮，无论如何）。但我想抓住这个选择器的显示对象并将它们放入屏幕上的滚动视图中。因为该类返回一个对象，所以不能将其插入到滚动视图中。我确定这是一件基本的事情，但我不知道接下来我需要做什么！任何人都可以帮忙吗？非常感激。

编辑

发布我的课程，这似乎几乎就在那里，除了在课堂内访问变量“theHour”和“theMin”时遇到问题......

```
module(..., package.seeall)

local widget = require "widget"

picker = {}
picker.__index = picker

function picker.new()
    local picker_object = {}
    setmetatable(picker_object,picker)

    picker_object.theHour = 12
    picker_object.theMin = 0
    picker_object.am = true

    picker_object.increaseHrBtn = widget.newButton{
        default="gfx/up_regular.png",
        over="gfx/up_press.png",
        width=40, height=40,
        onRelease = picker.incHr
    }

    picker_object.decreaseHrBtn = widget.newButton{
        default="gfx/down_regular.png",
        over="gfx/down_press.png",
        width=40, height=40,
        onRelease = picker.decHr
    }

    picker_object.decreaseHrBtn.y = 100

    picker_object.hrText = display.newText("12", 6, 41, native.systemFont, 24)
    picker_object.hrText:setTextColor(0, 0, 0)

    picker_object.dotsText = display.newText(":", 58, 39, native.systemFont, 24)
    picker_object.dotsText:setTextColor(0, 0, 0)

    picker_object.increaseMinBtn = widget.newButton{
        default="gfx/up_regular.png",
        over="gfx/up_press.png",
        width=40, height=40,
        onRelease = picker.incMin
    }

    picker_object.increaseMinBtn.x = 100

    picker_object.decreaseMinBtn = widget.newButton{
        default="gfx/down_regular.png",
        over="gfx/down_press.png",
        width=40, height=40,
        onRelease = picker.decMin
    }
    picker_object.decreaseMinBtn.y = 100
    picker_object.decreaseMinBtn.x = 100

    picker_object.minText = display.newText("00", 86, 41, native.systemFont, 24)
    picker_object.minText:setTextColor(0, 0, 0)

    picker_object.ampmBtn = widget.newButton{
        default="gfx/blank_normal.png",
        over="gfx/blank_press.png",
        label = "AM",
        font = "Korean Calligraphy",
        fontSize = 25,
        width=58, height=58,
        onRelease = picker.toggleAmPm
    }

    picker_object.ampmBtn.x = 160
    picker_object.ampmBtn.y = 58

    return picker_object
end

function picker:getHour()
    return self.theHour
end

function picker:getMin()
    return self.theMin
end

function picker:incHr(event)
    print("inc")
    if self.theHour < 12 then
        self.theHour = self.theHour + 1
    else 
        self.theHour = 1
    end

    if self.theHour < 10 then
        picker_object.hrText.text = "0"..self.theHour
    else
        picker_object.hrText.text = self.theHour
    end
end

function picker:decHr(event)
    print("dec")
    if self.theHour > 1 then
        self.theHour = self.theHour - 1
    else 
        self.theHour = 12
    end
    if self.theHour < 10 then
        picker_object.hrText.text = "0"..self.theHour
    else
        picker_object.hrText.text = self.theHour
    end
end

function picker:incMin(event)
    print("inc")
    if self.theMin < 59 then
        self.theMin = self.theMin + 1
    else 
        self.theMin = 0
    end

    if self.theMin < 10 then
        picker_object.minText.text = "0"..self.theMin
    else
        self.minText.text = self.theMin
    end
end

function picker:decMin(event)
    print("dec")
    if self.theMin > 0 then
        self.theMin = self.theMin - 1
    else 
        self.theMin = 59
    end
    if self.theMin < 10 then
        picker_object.minText.text = "0"..self.theMin
    else
        picker_object.minText.text = self.theMin
    end
end

function picker:toggleAmPm(event)
    if self.am == true then
        self.am = false
        picker_object.ampmBtn:setLabel( "PM" )
    else
        self.am = true
        picker_object.ampmBtn:setLabel( "AM" )
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:59:00.490

啊! 你在上一个问题中问对了。我忘了回答这个问题。

无论如何，您可以访问显示对象 `reminderPicker1.increaseHrBtn`，`reminderPicker1.decreaseHrBtn`等等。

在类方法中，您可以通过以下方式访问它们 `self.increaseHrBtn`，`self.decreaseHrBtn`

**编辑**

更改`onRelease = picker.toggleAmPm`为

```
onRelease = function() picker_object:toggleAmPm() end 
```

并更改`picker_object.ampmBtn:setLabel( "PM" )`为

```
self.ampmBtn:setLabel( "PM" ) 
```

对所有其他实例执行相同操作。你会没事的！

# vba - 根据匹配条件删除行

> ID：10801946
> 
> 赞同：-1
> 
> 时间：2012-05-29T15:14:29.523
> 
> 标签：vba, excel

我有一个过时的 CS 学位，所以我了解 VB 的基础知识，但我不经常编写宏并且需要帮助解决特定情况。（...但我了解函数和面向对象的编程）

假设如下： - A 列包含字母数字形式的参考 ID，按字母顺序排序。- B 列包含文本字符串或空格。

我正在尝试编写一个宏，该宏会根据 B 列中“注释”的内容自动删除每个唯一参考号的任何额外行。问题是，如果 A 列有多个唯一参考号实例，我需要确定哪一行包含 B 列中的某些内容。有一个问题：参考编号可能在 B 列中没有任何内容，应该保留。

为了进一步解释，在以下屏幕截图中，我需要：

*   保留黄色突出显示的行
*   删除剩余的行

我尝试使用右侧的括号并用红色标记显示报告如何显示数据的各种配置。很难解释我想要做什么，所以我想一张照片会更清楚地显示我需要什么。

![](../Images/beef81631f906b71e3ced837b579a1f1.png)

此任务使报告变得非常手动且耗时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:40:44.240

这很简单，您只需遍历行并检查是否需要删除该行，是否需要删除具有此 id 的较早行或什么都不会发生。在我的示例中，我标记了这些行并最终删除它们。

```
Sub foo()
Dim rngSelection As Range
Dim startingRow As Integer
Dim endRow As Integer
Dim idColumn As Integer
Dim noteColumn As Integer
Dim idValuableRow As New Dictionary
Dim deleteRows As New Collection

Set rngSelection = Selection
startingRow = rngSelection.Row
endRow = rngSelection.Rows.Count + startingRow - 1

idColumn = rngSelection.Column
noteColumn = idColumn + 1

For i = startingRow To endRow
    currentID = Cells(i, idColumn)
    If idValuableRow.Exists(currentID) Then
        If Trim(idValuableRow(currentID)("note")) <> "" And Trim(Cells(i, noteColumn)) = "" Then
            deleteRows.Add i
         ElseIf idValuableRow(currentID)("note") = "" And Trim(Cells(i, noteColumn)) <> "" Then
            deleteRows.Add idValuableRow(currentID)("row")
            idValuableRow(currentID)("row") = i
            idValuableRow(currentID)("note") = Cells(i, noteColumn)
        End If
    Else
        Dim arr(2) As Variant
        idValuableRow.Add currentID, New Dictionary
        idValuableRow(currentID).Add "row", i
        idValuableRow(currentID).Add "note", Cells(i, noteColumn)
    End If

Next i
deletedRows = 0
For Each element In deleteRows
    If element <> "" Then
        Rows(element - deletedRows & ":" & element - deletedRows).Select
        Selection.Delete Shift:=xlUp
        deletedRows = deletedRows + 1

        End If
    Next element

End Sub 
```

它可能看起来像这样。您唯一需要的是在工具/参考中添加 Microsoft 脚本运行时

# javascript - 从 IFRAME 页面初始化播放请求

> ID：10801947
> 
> 赞同：0
> 
> 时间：2012-05-29T15:14:34.670
> 
> 标签：javascript, iframe

我不是网页设计师专业人士，所以请温柔

**情况：** 我目前正在建立一个网站来分享我的 DJ 混音和工作室制作工作，可在[http://davidloran.com/test-03/index.html](http://davidloran.com/test-03/index.html)上获得预览。

该网站由以下部分组成：

*   index.html -> 包含：

1- 一个 css3 菜单（包括当前在播放器中正确播放的混音列表）

2- 一个 jquery 插件音频播放器 (http://codecanyon.net/item/fullwidth...-plugin/841563)

3- 其他页面加载到的 IFRAME

*   track.html -> 包含用户选择的制作曲目列表，然后（最终！）播放到放置在索引页面上的播放器中
*   facebook.html -> 包含 FB 评论框
*   背景.html

**发现问题：**

正如您可能从我上面的描述文本中注意到的那样，制作曲目无法在音频播放器中播放，因为它们被放置在另一个称为 IFRAME 的页面 (track.html) 中。

**问题：** 是否可以修改音频播放器 .js 代码（我将在接下来发布代码）以处理从 iframe 内的页面初始化的播放请求？

还有其他建议吗？（远程窗口？其他？）

谢谢！

**这就是我在 index.html 页面头上的内容：**

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Dj David Loran</title>
<link rel="stylesheet" type="text/css" href="css/jquery.fullwidthAudioPlayer.css">
<link href="css/styles.css" rel="stylesheet" type="text/css" />
<link href="css/nblack.css" rel="stylesheet" type="text/css" />
<link href="css/Iframe.css" rel="stylesheet" type="text/css" />
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/jquery-ui.js" type="text/javascript"></script>
<script src="js/soundmanager2-nodebug-jsmin.js" type="text/javascript"></script>
<script src="js/jquery.fullwidthAudioPlayer.js" type="text/javascript"></script>

<script type="text/javascript">
//set here the swf folder
soundManager.url = 'swf/';
//need to be flash player 9
soundManager.flashVersion = 9;
//prefer HTML5 audio rather than flash
soundManager.useHTML5Audio = true;

$(document).ready(function(){
$('#fap').fullwidthAudioPlayer({autoPlay: 'true', wrapperPosition:'bottom',          wrapperColor:'#3f3f3f'});

});

function changeContent() { 
document.getElementById('tracks').innerHTML=""; 
} 
</script>

</head> 
```

**在同一页面上，像这样的链接在播放器中正确播放：**

```
<ul class="fap-my-playlist">
      <li><a href="../Audio/Lounge session - Bar.mp3" title="Dj David Loran - Lounge     session - Bar" target="http://www.davidloran.com/">Lounge session - Bar</a></li> 
```

**问题是：如何从 IFRAME 中打开的不同页面中获得相同类型的链接？！？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:21:52.967

当使用 JavaScript 在另一帧中发生某些事情时，您确实可以在一个帧中发生某些事情。使用`parent`框架内的对象。在这里查看一些示例： http: [//www.pageresource.com/jscript/jframe1.htm](http://www.pageresource.com/jscript/jframe1.htm)

此外，您顺便提到您可能还想从另一个窗口执行此操作。这可以使用`window.opener`.

# accelerometer - 从 IMU 的原始加速度计数据中删除重力-> 请批准数学和算法

> ID：10801951
> 
> 赞同：4
> 
> 时间：2012-05-29T15:14:54.000
> 
> 标签：accelerometer, sensors, gravity

我正在使用这个设备 ( [http://www.sparkfun.com/products/10724](http://www.sparkfun.com/products/10724) ) 并且已经成功地实现了一个非常好的工作方向估计，该估计基于基于这个[http://www 的磁力计、加速度计和陀螺仪数据的融合。 x-io.co.uk/node/8#open_source_imu_and_ahrs_algorithms](http://www.x-io.co.uk/node/8#open_source_imu_and_ahrs_algorithms)实现。现在我想计算动态加速度（测量没有静态重力加速度的加速度）。为此，我想到了以下想法。

计算原始加速度计数据的运行平均值。如果原始加速度在一段时间内保持稳定（运行平均值和当前测量的原始数据之间的差异很小），我们假设设备没有移动并且我们正在测量原始重力。现在将重力矢量和当前方向保存为四元数。这种方法假设我们的设备在没有重力的情况下无法持续加速。

为了计算没有重力的加速度，我现在正在执行以下四元数计算：

* * *

```
RA = Quaternion with current x,y,z raw acceleration values
GA = Quaternion with x,y,z raw acceleration values of estimated gravity
CO = Quaternion of current orientation
GO = saved gravity orientation

DQ = GO^-1 * CO // difference of orientation between last gravity estimation and current orientation

DQ = DQ^-1 // get the inverse of the difference

SQ = DQ * GA * DQ^1  // rotate gravity vector

DA = RA - SQ // get the dynamic acceleration by subtracting the rotated gravity from the raw acceleration 
```

* * *

有人可以检查这是否正确吗？我不确定，因为在测试它时，我在旋转传感器板时获得了一些高加速度，但如果设备在不旋转的情况下移动，我可以获得一些加速度数据（但比旋转期间的加速度小得多）。

此外，我有一个问题，如果加速度计是否在原地旋转，它是否也在测量加速度！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-15T13:02:07.347

另一种方法是区分加速度以给出加加速度（使用有限差分，j = (a2 - a1) / dt）。通过衰减/泄漏函数运行 jerk（使用半衰期衰减计算值而不是简单的乘数）。然后整合 jerk（梯形规则，a = dt * (j1 + j2) * 0.5），它将消除 DC 偏移（重力）。再次通过衰减函数运行此信号。
衰减函数可避免值螺旋式下降，但会降低您看到的动态加速度值的幅度，并将对信号引入一些整形。因此，您将不再获得“准确”的 m/s/s 读数值。但它对于短时运动很有用。

当然，您可以只使用高通滤波器，但这通常需要固定的采样率，并且如果您使用卷积（有限脉冲响应滤波器），计算成本可能更高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:22:33.023

这比你想象的要容易。你可能想看看我的帖子： [http ://www.varesano.net/blog/fabio/simple-gravity-compensation-9-dom-imus](http://www.varesano.net/blog/fabio/simple-gravity-compensation-9-dom-imus)

# jquery - Jquery 多选插件 - 在 div 中选择打印

> ID：10801953
> 
> 赞同：2
> 
> 时间：2012-05-29T15:14:59.123
> 
> 标签：jquery, multi-select

我正在使用 jquery 多选插件，如果选择了一个选项，我希望它立即打印在选择框下方的 div 中。

[链接到插件站点](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

我在插件网站上看到了这个，但不知道如何实现它：

**检索所有选定的值？**

> 最简单的方法是在选择框上调用 val()：

```
var values = $("select").val(); 
```

> 使用多选 API 也可以完成相同的操作。调用 getChecked 方法并映射一个新数组：

```
var array_of_checked_values =
$("select").multiselect("getChecked").map(function(){    return
this.value;  }).get(); 
```

任何帮助/指导将不胜感激。提前致谢

我的代码：

```
echo '<select name="tutor[]" id="tutor" multiple="multiple" size="5" class="required" title="Select Staff">';
$staff = get_records("user", "deleted", "0", "lastname ASC", "id,firstname,lastname,idnumber");
$sdenrolments=array($entry->enrolments);
$enrolled_staff = explode(",", $entry->enrolments);

foreach($staff as $tutor){  
if($tutor->id>1){
echo '<option value="'.$tutor->id.'"';
if(in_array($tutor->id, $enrolled_staff)) {echo 'selected="selected"';}
echo '>'.$tutor->lastname.' '.$tutor->firstname.'</option>';
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:24:55.337

您可以使用`.multiselect("getChecked")`. 这将返回一个数组，然后您可以循环并从中提取各个值：

```
var output = [];

$.each( $("select").multiselect("getChecked"), function(){
    output.push( $(this).attr("title") );
});

$("#myDiv").html( output.join(', ') ); 
```

如果您希望它实时更新，您可以绑定到 click 事件：

```
$("select").multiselect({
   click: function() {
      var output = [];
      $.each( $("select").multiselect("getChecked"), function(){
         output.push( $(this).attr("title") );
      });
      $("#myDiv").html( output.join(', ') );
   }
}); 
```

# asp.net-mvc-3 - @Url.Content 不编码文本 - 带有 Razor 的 ASP.NET MVC

> ID：10801955
> 
> 赞同：2
> 
> 时间：2012-05-29T15:15:00.953
> 
> 标签：asp.net-mvc-3, razor, urlencode

我需要建立一个这样的网址：/products/myproductdescription/5; 除非产品描述包含“/”，否则它可以工作。我以这种方式建立与剃须刀的链接：

```
<a href="@Url.Content("/Products/" + @product.Description + "/" + @product.Id)">@product.Description</a> 
```

我认为使用@product.Description 会对描述进行编码，但如果描述中存在“/”，我会得到一个链接。我也尝试过这种方式：

```
<a href="@Url.Content("/Products/" + @Html.Encode(product.Description) + "/" + @product.Id)">@product.Description</a> 
```

但结果是一样的......有人可以告诉我为什么链接的那部分没有编码？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:27:42.113

您应该避免在 url 的路径部分使用特殊字符。您可以使用蛞蝓并替换所有危险角色。例如，这是[如何在 StackOverflow](https://stackoverflow.com/a/25486/29407)上使用 url 中的问题标题完成的。在这种情况下，为了能够唯一标识资源，请始终使用 id。该描述只能用于 SEO 目的。

# javascript - 使用字符串月份的 Javascript 日期格式

> ID：10801957
> 
> 赞同：0
> 
> 时间：2012-05-29T15:15:15.517
> 
> 标签：javascript

有关日期格式的所有其他主题都假定日期以整数形式输入。

我正在编写一个脚本（Linux），它要求月份是一个字符串（Jan、Feb、Mar 等）并且需要验证日期。

我写了一个笨重的例程来提取月份，确定月份编号，然后进行比较，但我希望那里可能有更整洁的东西来做到这一点？我以为我已经看到了有关使用“格式”方法的信息，但现在找不到了...

我已经尝试过了，但它失败了：

```
var checkDate1 = document.getElementById('fromDate').value;
var checkDate2 = document.getElementById('toDate').value;

tmpDate1 = new Date(checkDate1);
tmpDate2 = new Date(checkDate2);

if (tmpDate1 < tmpDate2) { 
```

例如，典型的字段条目将是“2012 年 5 月 12 日”。

注意：我无权在系统中添加任何花哨的、奇特的库，所以只能使用原版的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:18:31.287

在 JavaScript 中，要在构造函数中解析，字符串 Date 必须具有以下格式：D, d MYH:i:s

现在是：2012 年 5 月 29 日，星期二 15:22:59

如果您想继续使用字符串，则必须创建一个花哨的函数来解析您的值，并找出 2012 年 5 月 29 日是哪一天。

**另一种方法**（更简单）是创建一个新的日期，解析您的值并使用其他构造函数的 on

```
var today = '05-29-2012',
    aToday = today.split('-'),
    dToday = new Date(aToday[2], aToday[0], aToday[1], 0, 0, 0, 0),

    tomorrow = '05-30-2012',
    aTomorrow = tomorrow.split('-'),
    dTomorrow = new Date(aTomorrow[2], aTomorrow[0], aTomorrow[1], 0, 0, 0, 0);

if (dTomorrow.getTime() > dToday.getTime() ) {
    console.log('Tomorrow is tomorrow'); 
} else {
    console.log('Tomorrow is not tomorrow');
} 
```

# sftp - SFTP：监控远程文件夹并复制在 Windows 上使用 SFTP 添加的新文件

> ID：10801958
> 
> 赞同：0
> 
> 时间：2012-05-29T15:15:22.953
> 
> 标签：sftp

我需要监视远程服务器上的文件夹并将使用 SFTP 添加的新文件复制到 Windows 上的本地文件夹。是否有可以配置和计划的 SFTP 客户端来监控远程文件夹并自动复制文件？或者我是否必须使用某些第三方 SFTP 库编写 Windows 服务来完成此操作？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:48:43.790

文件可以通过两种方式从或复制到 SFTP 服务器

1.  创建自定义 .net 服务以监视 SFTP 服务器上的文件夹并使用第三方 SFTP 客户端库复制文件。以下是一些可用的库。

    一个。CodePlex 上的开源库 SSH.Net
    b。Rebex SFTP for .Net
    c。.Net 的终极 SSH 专家包

2.  安装能够监控文件夹和调度任务的第三方 SFTP 客户端。以下是一些似乎具有这些功能的客户端工具

    一个。粉碎FTP

    湾。JaSFtp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T23:38:40.220

完成此任务的最简单方法是编写一个客户端程序，该程序以编程方式连接到 SFTP 服务器并确定服务器上是否存在新文件。程序如何确定是否存在新文件可以通过使用文件名和可选的远程文件的时间戳来完成。

她的明显困难是您不想从服务器下载正在写入服务器机器本身磁盘的文件。（大文件可能会出现此问题，您最终可能会下载不完整的文件，从而导致数据损坏）。避免这种情况的一种方法是在一天中的特定时间运行 SFTP 客户端，您可以确定没有新文件被写入服务器上的远程目录。

要创建一个自运行客户端，您可以使用 .NET Framework 创建一个按您想要的计划运行的计时器。或者，您可以简单地在 C# 程序中编写检测远程文件的代码，而无需担心计时器，并且您可以使用 Windows 计划任务功能在特定时间间隔执行生成可执行文件。

由于您没有提到是否要使用 .NET Framework，您可以使用您选择的任何编程语言。我会推荐使用您选择的第 3 方库的 C# 或 Java。如果您正在寻找商业库，请考虑[.NET 的 Ssh Factory](http://www.jscape.com/products/components/net/ssh-factory-for-net/)或[Secure FTP Factory](http://www.jscape.com/products/components/java/secure-ftp-factory/)。可以在[此处](http://files.jscape.com/sshfactorydotnet/doc/userguide/html/index.html)和[此处](http://files.jscape.com/sftp/docs/html/)找到文档。

# java - 如何将日期时间嵌入 SQL 字符串

> ID：10801959
> 
> 赞同：1
> 
> 时间：2012-05-29T15:15:25.703
> 
> 标签：java, sql, datetime

我需要使用`Statement.executeUpdate()`将数据插入数据库。因此，每个参数都必须嵌入到 SQL 字符串中。在数据库中，两列的类型是日期时间： Date1 和 Date2 在客户端，如果我使用以下语句：

```
String SQLString = "INSERT INTO Position (" +
    ......
    "Date1, " +
    ......
    "Date2) " +
    "VALUES(" +
    ......
    //"2012-05-29 16:28:58.555" + ", " + // runtime error, always say error at 16
    //"2012-05-29" + ", " + // no runtime error, but lost time and result date is also not correct
    //"10-06-02" + ", " + // no runtime error, but it adds 2 days beginning at 1900-01-01 00:00:00.000
    ......
    null
    ")"; 
```

谁能告诉我如何正确地将日期时间嵌入到 SQL 字符串中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T15:18:54.247

您应该使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)并传递日期字段广告[Date](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Date.html) ...

```
String SQLString = "INSERT INTO Position (Date1) VALUES (?)";
PreparedStatement prest = con.prepareStatement(SQLString);
prest.setDate(1,new Date());
prest.executeUpdate() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:18:55.617

首先，您必须使用[`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html). 然后你可以做类似的事情：

```
statement.setDate(2, new Date()); 
```

# knockout.js - Knockout.js: ko.applyBindings(viewModel) -> applyBinding 有完整的事件吗？

> ID：10801965
> 
> 赞同：6
> 
> 时间：2012-05-29T15:15:39.160
> 
> 标签：knockout.js

我有几个 knockoutjs foreach 模板绑定，它们`<div class='item' />`在整个页面的不同位置创建了大约 100 个 - 除了我后续的 jQuery 调用不起作用之外，除非我在调试器中停止并在应用 jquery 绑定之前等待一秒钟，否则所有这些都可以正常工作：

```
ko.applyBindings(viewModel);

$(".item").draggable(); 
```

我正在寻找一个 dataBound 事件，我可以在绑定 viewModel 之后使用它来应用我的绑定，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:23:54.813

正如 Tyrsius 提到的，您可以使用 afterRender 处理程序，也可以使用 afterAdd 处理程序，具体取决于您是否要从列表中添加/删除项目。这些都包含在[foreach](http://knockoutjs.com/documentation/foreach-binding.html)和[模板](http://knockoutjs.com/documentation/template-binding.html)绑定文档中。

您也可以编写自己的自定义绑定来执行相同的操作，类似于[此示例](http://knockoutjs.com/examples/animatedTransitions.html)。我推荐它作为最可维护和可重用的选项，但它有时是矫枉过正的。

也就是说，如果你想使用 draggable，那么已经有一个[很棒的自定义绑定](http://www.knockmeout.net/2012/02/revisiting-dragging-dropping-and.html)，你也许可以适应它。

希望这可以帮助。

# java - ORMLite for Android 不使用 foreignAutoRefresh 自动刷新外来对象

> ID：10801970
> 
> 赞同：4
> 
> 时间：2012-05-29T15:15:53.813
> 
> 标签：java, android, foreign-keys, ormlite

这是我的问题：我有不同的实体链接到其他实体，嵌套深度为 3。我在每个对象中的所有外部字段都带有注释

```
@DatabaseField(foreign = true, foreignAutoRefresh = true) 
```

但只有嵌套深度为 2，我才能得到实际的 autoRefreshed 异物。

例如，如果我查询 A 实体，然后执行以下操作：

```
A.getB().getC().getD() 
```

对于实体 B 和 CI 已经拥有所有字段，而对于实体 DI 仅获取了 ID，我需要调用 dao.refresh() 方法才能获取所有 D 字段。这是一个限制吗？我在文档中找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T15:22:05.347

**编辑：**

因此，在创建了一些更好的单元测试并对其进行了更多研究之后，结果证明这是一个错误。 [ORMLite](http://ormlite.com/)错误地处理`maxForeignAutoRefreshLevel`了注释中的设置`@DatabaseField`。现在（正如您似乎已经想通了查看您的答案），您需要在对象中的字段和对象中的字段中添加一个`foreignAutoRefresh = true`和。那应该解决它。`maxForeignAutoRefreshLevel = 3``C``B``D``C`

我创建了以下错误报告：

> [https://sourceforge.net/tracker/?func=detail&aid=3530801&group_id=297653&atid=1255989](https://sourceforge.net/tracker/?func=detail&aid=3530801&group_id=297653&atid=1255989)

我已经解决了中继中的问题，并开始推出 4.41 版。自上次发布以来已经有一段时间了，这和任何时候一样好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T09:36:07.577

我通过在 C 实体上添加注释属性解决了这个问题，`maxForeignAutoRefreshLevel = 3`现在 D 得到了刷新。

奇怪的是我不需要在 A、B 或 D 中设置 maxForeignAutoRefreshLevel。

另一个细节是，如果我将 C 实体的级别设置为 2，则 D 不再刷新。似乎 get`maxForeignAutoRefreshLevel = 3`从 C 实体应用到“起始”实体，在我的情况下为 A。

# c# - 通过存储过程将上传的文件 (InputStream) 保存到 SQL Server

> ID：10801972
> 
> 赞同：2
> 
> 时间：2012-05-29T15:16:04.200
> 
> 标签：c#, sql-server, entity-framework

我有一个 ASP MVC 应用程序，它使用 HttpPostedFileBase 从 Razor 视图中获取上传的文件。这些被收集到模型中的列表中，然后传递到实体框架（v4.0.30319），我在其中调用存储过程将文件保存到数据库。

（我确信有更好的方法可以做到这一点，但我正在处理现有系统。）

在我的模型中：

```
public List<Attachment> Attachments { get; set; } 
```

附件对象如下所示：

```
public class Attachment
{
    public System.IO.Stream InputStream { get; set; }
    public String FileName { get; set; }
    public String ContentType { get; set; }
    public Int32 ContentLength { get; set; }
} 
```

当我保存附件时，我遍历列表并尝试调用存储的过程来保存输入流：

```
foreach(var file in ticket.Attachments)
    {
    if (file != null)
        {
        try
            {
            //create a byte array from the input file stream
            byte[] myData = new byte[file.ContentLength];
            file.InputStream.Read(myData, 0, file.ContentLength);

            ...

            var uploadResult = Database.ExecuteSqlCommand("EXEC mySP @file = {0}...", myData); 
```

问题似乎是存储过程需要一段文本

```
ALTER PROCEDURE [dbo].[mySP] 
    @file           AS TEXT,
    @tcFileExtension    VARCHAR(50),
    ... 
```

这导致了错误：

```
Operand type clash: varbinary is incompatible with text 
```

转换字节数组（或InputStream）以便我可以通过存储过程保存它的最佳方法是什么？

上传的文件可以是任何东西：xls、xlsx、pdf、tiff、doc 等

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:02:00.197

我相信在您的情况下，过程@file 参数类型应该是`image`，而不是文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:31:24.817

如果您确定数据是文本，则可以非常简单地使用[Encoding.GetString](http://msdn.microsoft.com/en-us/library/744y86tc.aspx)将所有文本读入字符串，然后将其与存储过程一起传递。

`var uploadResult = Database.ExecuteSqlCommand("EXEC mySP @file = {0}...", Encoding.GetString(myData);`

# ruby-on-rails - MongoDB 不会使用 Mongoid 连接到 MongoHQ

> ID：10801977
> 
> 赞同：4
> 
> 时间：2012-05-29T15:16:16.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, mongohq

我刚刚开始了一个全新的 Rails 项目，我要完成的第一个任务是创建一个对象并将其保存在我的数据库中。我通过自动生成对象的方式，在本例中为 URL 对象，如下所示：

```
rails generate scaffold Url domain:string 
```

我还测试了两个单独的 mongoid.yml 配置设置。第一个如下：

```
development:
  sessions:
    default:
      # Defines the name of the default database that Mongoid can connect to.
      # (required).
      uri: mongodb://[username]:[password]@flame.mongohq.com:27046/[database]

      options:
        consistency: :strong 
```

此配置的结果是，当发生查询时，我收到以下错误：

```
The operation: #<Moped::Protocol::Query
  @length=39
  @request_id=5
  @response_to=0
  @op_code=2004
  @flags=[]
  @full_collection_name=".urls"
  @skip=0
  @limit=0
  @selector={}
  @fields=nil>
 failed with error 13075: "db name can't be empty" 
```

我还使用以下配置进行了测试：

```
development:
  uri: mongodb://[username]:[password]@flame.mongohq.com:27046/[database] 
```

当代码到达 urls_controller 的 create 方法时，它在 @url.save 处失败，并出现以下错误：

```
mongoid (3.0.0.rc) lib/mongoid/sessions/factory.rb:100:in `parse'
mongoid (3.0.0.rc) lib/mongoid/sessions/factory.rb:61:in `create_session'
mongoid (3.0.0.rc) lib/mongoid/sessions/factory.rb:43:in `default'
mongoid (3.0.0.rc) lib/mongoid/sessions.rb:109:in `default'
mongoid (3.0.0.rc) lib/mongoid/sessions.rb:354:in `__session__'
mongoid (3.0.0.rc) lib/mongoid/sessions.rb:199:in `mongo_session'
mongoid (3.0.0.rc) lib/mongoid/sessions.rb:157:in `collection'
mongoid (3.0.0.rc) lib/mongoid/sessions.rb:25:in `collection'
mongoid (3.0.0.rc) lib/mongoid/persistence/operations.rb:26:in `collection'
mongoid (3.0.0.rc) lib/mongoid/persistence/operations/insert.rb:27:in `block in persist'
mongoid (3.0.0.rc) lib/mongoid/persistence/insertion.rb:25:in `block (2 levels) in  prepare'
activesupport (3.2.3) lib/active_support/callbacks.rb:403:in `_run__2492706777632263523__create__3276423133299307975__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_create_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
mongoid (3.0.0.rc) lib/mongoid/callbacks.rb:95:in `run_callbacks'
mongoid (3.0.0.rc) lib/mongoid/persistence/insertion.rb:24:in `block in prepare'
activesupport (3.2.3) lib/active_support/callbacks.rb:403:in  `_run__2492706777632263523__save__3276423133299307975__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
mongoid (3.0.0.rc) lib/mongoid/callbacks.rb:95:in `run_callbacks'
mongoid (3.0.0.rc) lib/mongoid/persistence/insertion.rb:23:in `prepare'
mongoid (3.0.0.rc) lib/mongoid/persistence/operations/insert.rb:26:in `persist'
mongoid (3.0.0.rc) lib/mongoid/persistence.rb:49:in `insert'
mongoid (3.0.0.rc) lib/mongoid/persistence.rb:188:in `upsert'
app/controllers/urls_controller.rb:46:in `block in create' 
```

我的假设是我的 mongoid.yml 文件不正确，但我不确定如何让它工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:37:23.310

这就是我的产品 mongoid.yml 的样子

```
<% if ENV['MONGOLAB_URI'] %>
  <% uri = URI.parse(ENV['MONGOLAB_URI']) %>
production:
  <<: *defaults
  sessions:
    default:
      <<: *default_session
      database: <%= uri.path.sub('/','') %>
      username: <%= uri.user %>
      password: <%= uri.password %>
      hosts:
        - <%= uri.host %>:<%= uri.port %>
<% end %> 
```

这对我有用

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T16:50:09.803

目前在 mongoid 中无法通过 URI 建立数据库连接。mongoid.yml 的格式如下：

```
environment:
  host: <%= ENV['MONGOID_HOST'] %>
  port: <%= ENV['MONGOID_PORT'] %>
  username: <%= ENV['MONGOID_USERNAME'] %>
  password: <%= ENV['MONGOID_PASSWORD'] %>
  database: <%= ENV['MONGOID_DATABASE'] %> 
```

您需要做的是将 MongoHQ 字符串解析为其组成部分以在 mongoid.yml 中提供

如果你愿意，有人在[这里为你编造了一个要点](https://gist.github.com/2588954)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:27:29.853

对于 MongoHQ 上的副本集/非副本集：

```
production:
  sessions:
    default:
      <% if ENV['MONGOHQ_HOST_LIST'] %>
      database: <%= ENV['MONGOHQ_DATABASE'] %>
      username: <%= ENV['MONGOHQ_USER'] %>
      password: <%= ENV['MONGOHQ_PASSWD'] %>
      hosts:
      <% YAML.parse(ENV['MONGOHQ_HOST_LIST']).value.each do |v| %>
        - <%= "#{v[0].value}:#{v[1].value}" %>
      <% end %>
      <% elsif ENV['MONGOHQ_URL'] %>
      uri: <%= ENV['MONGOHQ_URL'] %>
      <% end %>
      options:
        consistency: :eventual
        safe: true 
```

# .net - .NET 4 中的 permview.exe 等价物？

> ID：10801978
> 
> 赞同：1
> 
> 时间：2012-05-29T15:16:28.137
> 
> 标签：.net, security, .net-4.0

.NET 4 中是否有任何等效的[permview.exe ？](http://msdn.microsoft.com/en-us/library/06251f13%28v=vs.80%29.aspx)

[在 StackOverflow 上](https://stackoverflow.com/search?q=permview)搜索permview会得到 1 个结果，在 Google 上搜索[permview ".NET 4"](https://www.google.com.sg/#sclient=psy-ab&hl=en&safe=off&site=&source=hp&q=permview+%22.net+4%22&oq=permview+%22.net+4%22&aq=f&aqi=&aql=&gs_l=hp.3...341.3725.0.3963.17.16.0.1.1.0.122.1070.12j4.16.0...0.0.8APH-fL10Mk&pbx=1&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=3759d54e829f6878&biw=1366&bih=646)会得到... 9 个结果... 没有太大帮助，所以如果我想知道是否有人知道任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:20:41.487

也许[SecAnnotate](http://blogs.msdn.com/b/shawnfa/archive/2009/11/18/using-secannotate-to-analyze-your-assemblies-for-transparency-violations-an-example.aspx)是您需要的，因为[.NET 4 中已弃用 CAS 策略](http://blogs.msdn.com/b/shawnfa/archive/2010/02/24/so-is-cas-dead-in-net-4-or-what.aspx)？

# xaml - 使用 StrokeDashArray 的均匀间隔破折号

> ID：10801980
> 
> 赞同：5
> 
> 时间：2012-05-29T15:16:34.177
> 
> 标签：xaml, silverlight-4.0, windows-phone-7.1, expression-blend

我正在尝试使用 Expression Blend 4 为 WP7.1 Silverlight 4 应用程序创建一个像这里的扑克筹码：[http ://www.casinowholesalers.com/shop/product_info.php?cPath=57&products_id=379。](http://www.casinowholesalers.com/shop/product_info.php?cPath=57&products_id=379)

我正在尝试在芯片边缘创建六个白色“盒子”（暂时忽略骰子图像和内部虚线）。我这样做的方法是两个创建两个椭圆，一个没有描边，另一个大小完全相同，但描边为 24，颜色为白色，StrokeDashArray 为 1.8（这不是“1 8”，实际上是1.8，没有第二个值）。它看起来非常接近均匀的大小和间隔（但不完全）；我通过反复试验找到了它。XAML 如下。

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Ellipse Fill="#FFC83838" Margin="112,253,128,275" Grid.Row="1" Stroke="#FFC83838" StrokeThickness="3"/>
    <Ellipse Fill="#FFC83838" Margin="112,253,128,275" Grid.Row="1" Stroke="White" StrokeThickness="30" StrokeDashArray="1.79" StrokeDashOffset="6" RenderTransformOrigin="0.5,0.5"/>
</Grid> 
```

我想我有两个问题：

1.  除了使用两个椭圆之外，还有更好的方法来创建这个形状吗？
2.  如何在数学上确定 StrokeDashArray 值应该是什么，以便破折号均匀分布和调整大小，而不是使用反复试验？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T17:58:58.690

我将从第二点开始。

首先，[这里](http://msdn.microsoft.com/en-us/library/bb980148%28v=vs.95%29.aspx)`StrokeDashArray`解释一下 的内部逻辑。重要的一点是笔划虚线数组不是以像素表示的，它依赖于笔划粗细来获得数组中每个数字的最终像素值。

因此，对于数学部分，让我们定义一些变量：

1.  S - 笔画的可见部分（与链接中的相同）。
2.  G - 笔划的不可见部分（与链接中的相同）。
3.  r - 你的芯片的半径。它将是实际宽度的一半或实际高度的一半。
4.  n - 你想要的 S+G 的重复次数。整数。
5.  T——行程粗细
6.  p - 数学 pi (3.14...)

所以我们有：

```
2*p*r = n*(T*S+T*G) 
```

或者，

```
S+G = 2pr/nT 
```

在您的情况下，以及我从芯片图像中看到的，笔划的可见部分是正方形，因此 S=1，有六个白色正方形有六个间隙，因此 n=6，您决定厚度为 30px，因此 T= 30\. 这为您提供了 G 的值：

```
G = 2pr/180 - 1 
```

您可以从 blend 中获取 r 的值，实际宽度和高度将写在 Width 和 Height 框中的括号中 - 除以 2。根据您提供的详细信息，我猜半径是 102.55。最后的笔划破折号数组是：

```
StrokeDashArray="1,2.58" 
```

对于您的第一点，答案是：视情况而定。如果您的芯片在应用程序的整个生命周期中都是相同的 - 这是最好的方法。它为您在外部提供了轻微的曲率，以使“正方形”与芯片的外轮廓齐平，并且需要在设计时进行一次性计算。

即使您有不同尺寸的芯片，这也可能是实现芯片图形的最佳方式。前提是你可以把它设计成固定尺寸，然后把它粘成a `ViewBox`，它看起来还是不错的。

如果需要可变大小并且视图框路由不起作用 - 还有另一种实现方式（因为绑定到 ActualWidth\ActualHeight 属性时 Silverlight 失败） - 使用`Border`s 保存矩形。但它打开了一个全新的蠕虫罐头，这个答案已经足够长了。:)

# android - Android：更改活动时如何避免延迟？

> ID：10801981
> 
> 赞同：1
> 
> 时间：2012-05-29T15:16:37.277
> 
> 标签：android

我正在开发一个简单的 Android 游戏。在主要活动上有一个“播放”按钮。当用户点击那里时，“寻找其他玩家”活动应该会打开，其中列出了他将与之对抗的其他玩家。

该玩家列表是通过连接到中央服务器动态生成的，因此需要 2-3 秒。

一旦用户点击“播放”，我希望应用程序做的是打开“寻找玩家”活动的背景，然后在服务器响应时显示其他玩家的名字。

但是，发生的情况是，一旦您单击“播放”按钮，2-3 秒内没有任何反应（当应用程序从服务器获取数据时），然后它会打开新的活动窗口，其中所有数据都已经存在。

有没有办法强制新的活动背景先打开，然后开始收集数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:19:23.463

启动新的`Activity`并确保在后台线程上完成所有加载。如果主线程很忙，即使它没有，它也会看起来好像它被冻结了。

结帐`AsyncTask`这个，因为这正是它的用途:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:20:14.700

这就是他们创建 AsyncTask 的原因。看看[这个](http://developer.android.com/resources/articles/painless-threading.html)。

# html - 将网页转换为移动和平板电脑空间

> ID：10801991
> 
> 赞同：0
> 
> 时间：2012-05-29T15:16:57.557
> 
> 标签：html, css, mobile, tablet

我将在接下来的几周内将我的网页内容转换为移动版本和平板电脑版本。我对这种影响有几个问题：

1.  根据用户使用的设备/浏览器，将用户发送到正确站点的可接受方式是什么？（即我们是否在 PHP 中检查某种浏览器类型或其他东西）？我研究了在所有设备/分辨率上都显示出色的漂亮 CSS 网格 - 但此时我还没有准备好进行完全切换 - 所以我只想拥有我当前网站的简化版本（无论是它是通过重定向或其他方式）。

2.  我们如何考虑移动和平板电脑空间中的悬停/鼠标悬停效果？

谢谢大家。

**更新：** 我确实为 #1 找到了这个：[http](http://code.google.com/p/php-mobile-detect) ://code.google.com/p/php-mobile-detect - 看起来它实际上很完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:22:13.650

1.  您应该根据用户代理重定向用户，在 PHP 中您可以使用`$_SERVER['HTTP_USER_AGENT']`. 使用服务器端检测是迄今为止最可靠的重定向某人的方法。将来您可能会考虑使用响应式样式表来更改布局的显示方式（基于屏幕大小，从某种意义上说对于未来的设备更可靠）

2.  触摸设备没有悬停状态，这并不意味着你不能用一些 Javascript onTouch 事件来做到这一点，但是当你触摸锚点之类的东西时它要么打开要么关闭

# c# - Castle Windsor Typed Factory，绑定多个通用约束？

> ID：10801998
> 
> 赞同：1
> 
> 时间：2012-05-29T15:17:14.910
> 
> 标签：c#, generics, castle-windsor, typed-factory-facility

注意：在我开始之前，请注意这在 ICommandHandler 的定义被更改为包含多个通用约束之前完美运行，一个约束它工作正常。

但是，我似乎没有将多个约束传递到选择器的“参数”数组中。我错过了什么吗？

这被称为：

```
 var handler = _factory.GetHandlerForCommand<TCommand, TResult>(command); 
```

工厂界面：

```
 public interface ICommandHandlerFactory
    {
        ICommandHandler<TCommand, TResult> GetHandlerForCommand<TCommand, TResult>(ICommand command) 
            where TCommand : class, ICommand 
            where TResult : IDTOBase;
    } 
```

选择器类：

```
 public class HandlerSelector : DefaultTypedFactoryComponentSelector 
    {
        protected override Func<Castle.MicroKernel.IKernelInternal, Castle.MicroKernel.IReleasePolicy, object> BuildFactoryComponent(System.Reflection.MethodInfo method, string componentName, Type componentType, System.Collections.IDictionary additionalArguments)
        {
            return new HandlerResolver(componentName,
                                                    componentType,
                                                    additionalArguments,
                                                    FallbackToResolveByTypeIfNameNotFound,
                                                    GetType()).Resolve;
        }

        protected override string GetComponentName(System.Reflection.MethodInfo method, object[] arguments)
        {
            return null;
        }

        protected override Type GetComponentType(System.Reflection.MethodInfo method, object[] arguments)
        {
            var message = arguments[0];
            var handlerType = typeof (ICommandHandler<,>).MakeGenericType(message.GetType());
            return handlerType;
        }
    } 
```

Windsor 安装程序文件：

```
 container
                .Register(
                    Component
                        .For<HandlerSelector>()
                        .ImplementedBy<HandlerSelector>(),
                    AllTypes
                        .FromAssemblyContaining<ICommandHandlerFactory>()
                            .BasedOn(typeof(ICommandHandler<,>))
                            .WithService.Base()
                            .Configure(c => c.LifeStyle.Is(LifestyleType.PerWebRequest)),
                    Component
                        .For<ICommandHandlerFactory>()

                .AsFactory(c => c.SelectedWith<HandlerSelector>())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:37:33.993

通常情况下，以连贯的方式编写问题通常会导致答案。

将选择器代码更改为：

```
var genericArgs = method.GetGenericArguments();
var handlerType = typeof(ICommandHandler<,>).MakeGenericType(genericArgs[0], genericArgs[1]);
return handlerType; 
```

解决问题。