# StackOverflow 问答 10948000-10948999

# rubymotion - Rubymotion 如何在 Leopard 上创建桥元数据？

> ID：10948000
> 
> 赞同：0
> 
> 时间：2012-06-08T11:30:44.950
> 
> 标签：rubymotion, sparrow-framework

我在 Snow Leopard 上使用 1.8.24 的 gems 和 1.9 的 ruby​​motion 并尝试编译 SparrowInMotion 示例项目。

我在 Rakefile 中添加了 require 'rubygems'，但它仍然在 gen_bridge_data 的“无效选项：--no-64-bit”上崩溃。我以为这个错误是固定的？

无效选项：--no-64-bit 用法：gen_bridge_metadata [选项] 使用 `-h' 标志或咨询 gen_bridge_metadata(1) 寻求帮助。错误！生成桥元数据时出错：/usr/bin/gen_bridge_metadata --format complete --no-64-bit --cflags "-isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -miphoneos- version-min=5.0 -D__ENVIRONMENT_IPHONE_OS_VERSION_MIN_REQUIRED__=50000 -I.-I"/Volumes/osx big/jon/projects/SparrowInMotion/vendor/Pods/Headers/Sparrow-Framework""/Volumes/osx big/jon/projects/SparrowInMotion/供应商/Pods/Headers/Sparrow-Framework/SPALSound.h /Volumes/osx big/jon/projects/SparrowInMotion/vendor/Pods/Headers/Sparrow-Framework/SPALSoundChannel.h /Volumes/osx big/jon/projects/SparrowInMotion/供应商/Pods/Headers/Sparrow-Framework/SPAnimatable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:02:02.790

我遇到了同样的问题，这是因为我没有安装 Bridge Support。打开[MacRuby 文件目录，下载并安装 BridgeSupport Preview 3.zip](http://macruby.macosforge.org/files/)。

[我按照为 OS X Snow Leopard 设置 MacRuby](https://github.com/MacRuby/MacRuby/wiki/Setting-up-MacRuby)的说明弄清楚了这一点

# .net - WSA 启动失败

> ID：10948001
> 
> 赞同：0
> 
> 时间：2012-06-08T11:31:03.363
> 
> 标签：.net, sockets, windows-xp, wsastartup

嘿嘿，

我们的软件有一个奇怪的问题。我们有一个通过套接字进行通信的自定义中间件。它在 2003 和 2008 操作系统的 50 多台服务器、集群上成功运行。有时，根据使用我们中间件的开发人员的意愿，我们会在他们的工作站 (Microsoft XP) 上部署我们中间件的一个版本。

我们在一些工作站上收到以下错误：

> 应用程序尚未调用 WSAStartup 或 WSAStartup 失败

我认为大约有 1% 的工作站有这个问题 注意：每个人都有同一台机器，那台机器上的软件可以不同，其他工具，开发，......

你们中有人知道我们如何解决这个问题吗？或者我们如何才能得到我们得到这个错误的原因？我们不认为在我们的代码中使用套接字是错误的，因为我们的中间件组件已经在服务器（从未遇到过这个问题）和其他机器上运行了 5 年以上。

亲切的问候，

乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T16:19:21.583

对于后代：始终检查 WSAStartup 返回的内容。如果它不是 0，则适当地处理错误。

# excel - 当单元格值 = 0 时隐藏相应的行

> ID：10948004
> 
> 赞同：0
> 
> 时间：2012-06-08T11:31:07.433
> 
> 标签：excel, vba

当 E 列中的单元格值等于 0（零）时，我试图自动隐藏/取消隐藏相应的行。这些单元格中有公式，当另一个单元格中的一个单元格发生更改时，这些公式返回零。在进行该更改后，我希望代码执行其隐藏/取消隐藏魔术。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:46:33.230

这是使用 AutoFilter 的更快方法。您可以直接调用此代码或在`Worksheet_Calculate`事件中使用它。我假设单元格`E1`有标题。

**一键式**

```
Option Explicit

Sub Sample()
    Dim rRange  As Range, RngToHide As Range
    Dim lRow As Long

    '~~> Remove any filters
    ActiveSheet.AutoFilterMode = False

    With Sheets("Sheet1")
        lRow = .Range("E" & Rows.Count).End(xlUp).Row
        Set rRange = .Range("E1:E" & lRow)

        With rRange
          .AutoFilter Field:=1, Criteria1:="0"
          Set RngToHide = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow
        End With
    End With

    '~~> Remove any filters
    ActiveSheet.AutoFilterMode = False

    If Not RngToHide Is Nothing Then RngToHide.Hidden = True
End Sub 
```

**工作表计算事件 - 不推荐**

我不建议自动调用此代码，因为如果您想更改隐藏行中的某些内容，这不会让您取消隐藏行。要取消隐藏行，您必须注释掉`Worksheet_Calculate`事件中的整个代码，或者将连接单元格中的值更改为非零值（*前提是连接的单元格不在隐藏行中*）。

这将在 Col E 中的值更改为时隐藏该行`0`

```
Option Explicit

Private Sub Worksheet_Calculate()
    Dim rRange  As Range, RngToHide As Range
    Dim lRow As Long

    On Error GoTo Whoa

    Application.ScreenUpdating = False
    Application.EnableEvents = False

    '~~> Remove any filters
    ActiveSheet.AutoFilterMode = False

    With Sheets("Sheet1")
        lRow = .Range("E" & Rows.Count).End(xlUp).Row
        Set rRange = .Range("E1:E" & lRow)

        With rRange
          .AutoFilter Field:=1, Criteria1:="0"
          Set RngToHide = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow
        End With
    End With

    '~~> Remove any filters
    ActiveSheet.AutoFilterMode = False

    If Not RngToHide Is Nothing Then RngToHide.Hidden = True

LetsContinue:
    Application.ScreenUpdating = True
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:56:02.760

使用这个方法：

```
Sub HideRows()
Dim i As Integer
i = 1
Do While Not Cells(i, 5) = ""
    If Cells(i, 5).Value = 0 Then
        Rows(CStr(i) + ":" + CStr(i)).EntireRow.Hidden = True
    ElseIf Cells(i, 5).Value <> 0 And Rows(CStr(i) + ":" + CStr(i)).EntireRow.Hidden = True Then
        Rows(CStr(i) + ":" + CStr(i)).EntireRow.Hidden = False
    End If
i = i + 1
Loop
End Sub 
```

您可以添加一个按钮并通过事件调用此方法或将下一个方法添加到*Microsoft Excel 对象*`Button_Click`中的必要工作*表*

 *```
Private Sub Worksheet_Change()
    Module1.HideRows
End Sub 
```

`HideRow`当某些单元格更改时，此方法将调用方法。*

# java - netbeans 配置文件中的调用计数

> ID：10948007
> 
> 赞同：2
> 
> 时间：2012-06-08T11:31:13.627
> 
> 标签：java, netbeans, profiler, netbeans-7.1

*当我在NetBeans 7.1*中使用分析器时，我没有看到我的方法的预期调用编号。

为了测试这一点，我创建了一个简单的程序，它有 3 个方法，每个方法被调用一万次。

```
public class profilerTest {
    static int one;
    static int two;
    static int three;

    public static void main(String args[]) {
        for (int i = 0 ;i<= 10000; i++)one();
    }

    public static void one() {
        System.out.println("one:" + one++);
        two();
    }

    public static void two() {
        System.out.println("two:" + two++);
        three();
    }

    public static void three() {  
        System.out.println("three:" + three++);
    }
} 
```

我希望在我在分析结束时拍摄的分析器快照中看到每个方法 10000 次调用。但是，我得到的结果显着降低了每种方法的调用次数，并且三种方法中的每一种都不同。

我很好奇导致这种情况的原因，以及是否以及如何获得每种方法的实际调用计数。

这是结果的屏幕截图：

![在此处输入图像描述](../Images/439cf3673eec1a5a57f5108b7d568e53.png)

我做了更多的挖掘，发现了这个关于 Java 热点编译器中的内部方法和方法内联的[错误报告。](http://netbeans.org/bugzilla/show_bug.cgi?id=178384)建议的修复是对 jdk1.6 使用 -Xint 选项。然而，在 JDK 1.7 上，这不会改变我的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:10:01.910

如果您使用的是采样模式，这是预期的。分析器使用堆栈采样来估计每个方法的进入/退出数量以及该特定方法的持续时间。

由于采样，在某些情况下调用次数可能会完全关闭——比如在循环中多次运行非常短的方法。例如。当 5 个样本连续命中作为堆栈顶部的短方法时，它将被计为一次调用，因为从采样器的 POV 来看，短方法从未退出。

时间数据在采样中要精确得多——唯一的分隔符是采样频率。

如果您想要准确的调用计数，请切换到检测分析模式。否则，您需要对抽样调用持保留态度。

# .net - .net vb 9 Richboxtext 业务

> ID：10948008
> 
> 赞同：0
> 
> 时间：2012-06-08T11:31:13.780
> 
> 标签：.net, vb.net, click, richtextbox

我不太擅长.net，但我希望你能帮助我。提前致谢。假设下面将是我的富文本框。这是我到目前为止所拥有的：

[U]标题名称1[/U]
一些文字。还有一些文字。

[U]标题名称 2[/U]
一些文字。还有一些文字。

我现在愿意做的是：

1.  仅当您将鼠标悬停在带下划线的文本上时 - 鼠标光标才会变为“手”
2.  然后您可以单击它，消息框会出现带有下划线的文本。

我该怎么做这两件事？:|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:09:02.893

所以本质上你是想在你的 RTB 中超链接带下划线的文本？我一直在尝试这样做，但并没有真正找到任何效果很好的东西。我的建议是（如果您不需要滚动条）将 LinkLabels 放置在每个带下划线的标题上，并使这些事件指向您需要它们的位置。或者，如果您不希望显示 RTB 的边界，则只需对标题使用一系列 LinkLabels，对它们下方的文本使用标签。

不确定这是多么最新，但肯定值得一试：

[http://www.vbforums.com/showthread.php?t=355994](http://www.vbforums.com/showthread.php?t=355994)

# javascript - 无法从 JS 表单调用 servlet doPost 方法

> ID：10948016
> 
> 赞同：0
> 
> 时间：2012-06-08T11:31:33.437
> 
> 标签：javascript, jquery, servlets

我在从动态生成的 Javascript 表单调用 servlet doPost 方法时遇到问题。

```
var form = document.createElement("form");

    form.setAttribute("action", 'cisco-fetch-devices');
    form.setAttribute("method", 'POST');

    var hiddenField = document.createElement("input");
    hiddenField.setAttribute("type", "hidden");

    hiddenField.setAttribute("name", 'hiddeninputfield');
            hiddenField.setAttribute("value", data);

    form.appendChild(hiddenField);
    document.body.appendChild(form);

    form.submit(); 
```

但是，我可以从 jquery ajax 调用中调用相同的 servlet ''cisco-fetch-devices'：

```
 $.post("cisco-fetch-devices", { orderId : data},
    function(data) {
    alert("Data Loaded: " + data);
    }); 
```

JS 动态表单提交正在生成“找不到文件错误”

这是我的 doPost 方法：

```
 public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
        {

            response.setContentType("text/csv");
            response.setHeader ("Content-Disposition", "attachment;filename=\"tableincsv.csv\"");

             String orderId = request.getParameter("orderId").toString();
             java.io.PrintWriter out = response.getWriter();
             out.print("TEST DAta");

        } 
```

您能否让我知道 JS 的传统 POST 调用中可能存在什么问题？

谢谢，阿迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:40:22.790

您发送的数据将不一样——您的`hiddeninputfield`字段应命名为`orderId`，并使用订单 ID 进行初始化。或者，您可以解析`hiddeninputfield`请求参数，但这似乎有点愚蠢。

jQuery 调用正确地发送了一个`orderId`表单值。

`orderId`通过查看 servlet中`null`的内容和/或查看浏览器发送的实际请求以查看正在发送哪些参数以及如何发送来调试它会非常简单。

# c# - c#.net 中的动态运行时移动/调整矩形大小

> ID：10948018
> 
> 赞同：0
> 
> 时间：2012-06-08T11:31:39.940
> 
> 标签：c#, winforms

无论如何通过覆盖它们的属性来为矩形创建自定义/用户控件，以实现运行时重新调整大小和重新定位。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T11:36:13.963

您可以查看这些 CodeProject 文章：

*   [在运行时移动窗体上的控件](http://www.codeproject.com/Articles/31840/Move-controls-on-a-form-at-runtime)
*   [运行时可调整大小的控件](http://www.codeproject.com/Articles/13184/Runtime-resizable-controls)

# c# - 如何在 AxAcroPdf 中获取 pdf 文件的页数？

> ID：10948022
> 
> 赞同：2
> 
> 时间：2012-06-08T11:31:50.767
> 
> 标签：c#, winforms, axacropdf

我使用 AxAcroPdf 显示带有此代码的 PDF 文件：

```
AcroPdfViewer.src = FilePath;
AcroPdfViewer.setPageMode("none");
AcroPdfViewer.setZoom(100);
AcroPdfViewer.setShowToolbar(true); 
```

如何在 AxAcroPdf 中获取 PDF 文件的总页数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T13:11:38.900

我认为执行 pdf 页数的最佳方法如下：

```
public static int GetNoOfPagesPDF(string FileName)
    {
        int result = 0;
        FileStream fs = new FileStream(FileName, FileMode.Open, FileAccess.Read);
        StreamReader r = new StreamReader(fs);
        string pdfText = r.ReadToEnd();

        System.Text.RegularExpressions.Regex regx = new Regex(@"/Type\s*/Page[^s]");
        System.Text.RegularExpressions.MatchCollection matches = regx.Matches(pdfText);
        result = matches.Count;
        return result;

    } 
```

希望能帮助到你 ;）

资料来源： [计算 PDF 页面](http://www.devasp.net/net/articles/display/726.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:37:27.900

2018 年编辑：如下所述，原始答案引用了一个[不是 AxAcroPdf 方法的方法](https://help.adobe.com/livedocs/acrobat_sdk/9.1/Acrobat9_1_HTMLHelp/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Acrobat9_HTMLHelp&file=IAC_API_OLE_Objects.103.167.html)。但是无法删除已接受的答案，因此我必须将其留在这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T06:25:27.690

如果您只安装了 Acrobat Reader，则无法通过 AxAcroPDFLib.AxAcroPDF 获取页数。

至于第一个答案，使用 GetNumPages() 需要您安装 Acrobat SDK。另外，您需要有标准或专业的 Adob​​e Acrobat Reader（非免费）才能使用此 API。

就第二个答案而言，它在很多情况下都不起作用。并非所有 pdf 文档都有“/Type /Page”标签。

但是您可以尝试其他 API 来获取 PDF 页面的数量。[你可以看到这个问题。](https://stackoverflow.com/questions/320281/determine-number-of-pages-in-a-pdf-file)

# java - 在Java中，当它可能向自己提交额外的任务时如何关闭executorservice

> ID：10948024
> 
> 赞同：2
> 
> 时间：2012-06-08T11:32:02.677
> 
> 标签：java, executorservice, executor

我有一个任务管道（管道中的每个任务都有不同的并行度要求），每个任务都在不同的 ExecutorService 中工作。任务处理数据包，因此如果我们有 10 个数据包，那么将提交 10 个任务`service1`，每个数据包一个任务。一旦提交的任务`service1`实际调用，它可能会提交一个新任务以进一步处理数据包到`service2`或`service3`不。

以下代码工作正常，即：

*   `shutdown()``service1`在所有内容提交后调用`service1`
*   然后 awaitTermination() 不会返回，直到在 shutdown() 之前提交的所有任务都实际完成运行。--`shutdown()`然后调用 on`service2`但是因为所有提交的任务`service1`都已完成，并且所有任务都提交到`service2`from tasks 上的`service1`所有任务都已提交过`service2`才`shutdown()`调用 on `service2`。-- 以此类推`service3`

    ```
    ExecutorService[] services = {
            service1,
            service2,
            service3};

    int count = 0;
    for(ExecutorService service: services)
    {   
        service.shutdown();
        service.awaitTermination(1, TimeUnit.HOURS);
    } 
    ```

但是，我现在添加了一个案例，`service2`可以将数据包分解为较小的数据包并提交额外的任务`service2`，但代码现在失败了。问题是一旦所有任务完成后`shutdown()`就会调用它，但现在我们想从正在运行的任务提交额外的任务`service2``service1``service2``service2`

我的问题：

1.  `shutdown()`是在所有提交的任务完成运行后重新运行，还是立即返回但不停止已经提交的任务运行？**更新：在下面回答**
2.  如何解决我的新问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:40:05.253

“关闭”只是告诉池不要再接受任何工作。它什么也不做。所有现有提交的工作将正常执行。当队列耗尽时，池实际上会销毁它的所有线程并终止。

这里的问题是你说 service2 中的任务会将额外的任务提交给 service2 进行处理。似乎没有办法知道什么时候应该真正调用关机。但是，唉，还有另一种选择，假设这些较小的数据包不会进一步分解为服务。

```
List<Future<Void>> service2Futures = new ArrayList<Future<Void>>();

service2Futures.add(service2.submit(new Callable<Void>() {
  public Void call() throws Exception {
    // do your work, submit more stuff to service2
    // if you submit Callables, you could use Future.get() to wait on those
    // results.
    return null;
  }
}));

for (Future<Void> future : service2Futures) {
  future.get();
}

service2.shutdown();
... 
```

这里发生的事情是您正在为顶级提交的任务存储 Future 对象（您必须使用 Callable 而不是 Runnable）。您只需收集 Future 对象，而不是在提交后立即关闭池。然后，您通过循环遍历它们，并在每个对象上调用 get() 等到它们全部运行完毕。“get()”方法会阻塞，直到运行该任务的线程完成。

此时，所有顶级任务都已完成，他们将提交二级任务。您现在可以发出关机命令。这假设二级任务不会向 service2 提交更多内容。

综上所述，如果您使用的是 java 7，则应该考虑改用 ForkJoinPool 和 RecursiveTask。它可能对你正在做的事情更有意义。

```
ForkJoinPool forkJoinPool = new ForkJoinPool();
RecursiveAction action = new RecursiveAction() {
    protected void compute() {
         // break down here and build actions
         RecursiveAction smallerActions[] = ...; 
         invokeAll(smallerActions);
    }
};

Future<Void> future = forkJoinPool.submit(action); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:05:24.853

`ExecutorService#shutdown`让已经提交的任务完成他们正在做的任何事情 - [javadoc 提取](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)：

> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。如果已经关闭，调用没有额外的效果。
> 此方法不等待先前提交的任务完成执行。使用 awaitTermination 来做到这一点。

在实践中，您可以认为调用 to`shutdown`做了几件事：

1.  `ExecutorService`不能再接受新工作了
2.  现有线程一旦完成运行就会终止

所以回答你的问题：

*   `service1`如果您在调用之前已经提交了所有任务`service1.shutdown`（如果您在该调用之后提交任何内容，无论如何都会收到异常），那么您很好（即，如果这些任务向 service2 提交了某些内容并且 service2 没有关闭，它们将被执行） .
*   shutdown 立即返回，并且不保证已经提交的任务会停止（它们可以永远运行）。
*   您遇到的问题可能与您如何将任务从一项服务提交到另一项服务有关，仅凭您提供的信息似乎很难解决。

最好的方法是在您的问题中包含一个[SSCCE](http://sscce.org)，以复制您所看到的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:59:12.660

您应该跟踪任务本身，而不是关闭 ExecutorService。他们可以传递一个“工作状态”对象，用于跟踪未完成的工作，例如：

```
public class JobState {
  private int _runningJobs;

  public synchronized void start() {
    ++_runningJobs;
  }

  public synchronized void finish() {
    --_runningJobs;
    if(_runningJobs == 0) { notifyAll(); }
  }

  public synchronized void awaitTermination() {
    while(_runningJobs > 0) { wait() }
  }
}

public class SomeJob implements Runnable {
  private final JobState _jobState;

  public void run() {
    try {
      // ... do work here, possibly submitting new jobs, and pass along _jobState
    } finally {
      _jobState.finish();
    }
  }
}

// utility method to start a new job
public static void submitJob(ExecutorService executor, Runnable runnable, JobState jobState) {
  // call start _before_ submitting
  jobState.start();
  executor.submit(runnable);
}

// start main work
JobState state = new JobState();
Runnable firstJob = new SomeJob(state);
submitJob(executor, firstJob, state);
state.awaitTermination(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:26:26.760

当您调用关机时，它不会等待所有任务完成。像使用 awaitTermination 一样进行操作。

但是一旦调用了关机 - 新任务就会被阻止。您的执行器服务拒绝所有新任务。对于 RejectedExecutionHandler 中的 ThreadPoolExecutor 拒绝任务句柄。如果您指定自定义处理程序，您可以在关闭任务后处理拒绝。这是解决方法之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T14:10:13.193

Matts 的问题看起来可能很有效，但我担心它可能会导致新问题。

我想出了一个解决方案，它不需要对我的场景进行很多代码更改，虽然它看起来有点笨拙

我引入了一项新服务 (service2a)，它运行与 service2 相同的任务。当 service2 中的任务想要提交一个小数据包时，它会将其提交给 service2a 而不是 service2，因此所有子数据包都会在服务 2 关闭之前提交给 service2a。这对我有用，因为较小的数据包不需要分解为更多的子包，并且子包的想法仅适用于 service2(a) 而不是任何其他服务。

# python - 多处理：AttributeError：StdIn 实例没有属性“关闭”

> ID：10948025
> 
> 赞同：5
> 
> 时间：2012-06-08T11:32:08.443
> 
> 标签：python, multiprocessing

当循环一个简单的范围时，我在多处理中得到这个错误。

```
Process PoolWorker-37:
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 249, in _bootstrap
    sys.stdin.close()
AttributeError: StdIn instance has no attribute 'close' 
```

编码

```
pool = multiprocessing.Pool(processes=3)
pool.map(get_info, range(20000,20010), 1)
pool.close()
pool.join() 
```

## 更新

第一个问题是通过eclipse改变环境，但现在我得到了这个错误

```
PicklingError: Can't pickle <type 'cStringIO.StringO'>: attribute lookup cStringIO.StringO failed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-02T23:32:05.123

如果您在 PyCharm 控制台中运行，则会引发此错误。我使用了系统控制台，一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-21T10:39:47.607

在 PyCharm 4.5 中，我的解决方案是在 python 文件的服务器运行/调试配置中删除“之后显示命令行”复选框（PyCharm 手册中甚至没有记录）

# javascript - 在 HTML 中输出具有相同日期的项目

> ID：10948027
> 
> 赞同：-1
> 
> 时间：2012-06-08T11:32:12.487
> 
> 标签：javascript, xml

我有一个包含数据的 XML 文件，并希望将具有相同日期的项目放入其中，例如 DIV 标记。

我想要的是按日期对版本进行分类，并捆绑所有具有相同日期值的项目/版本。

这可能吗？

XML 代码：

```
<edition>
    <id>116853</id>
    <name>First Round - Summervibes Edition</name>
    <date>08-06-2012</date>
    <time>19:30</time>
    <location>
        Prins Alexanderlaan 37, Rotterdam, The Netherlands
    </location>
    <venue url="http://www.betribes.com/venues/club-eclipse" id="24079">Club Eclipse</venue>
    <lineup>Kleine Viezerik, Kid Kaio, DJ Goine</lineup>
    <entrance_fee>€11,–&lt;/entrance_fee>
    <music>Club House, House, R&B</music>
    <hot_party>false</hot_party>
    <website_link>http://club-eclipse.nl</website_link>
    <clubjudge_link depricated="true">
        http://www.betribes.com/editions/first-round-summervibes-edition
    </clubjudge_link>
    <edition_link>
        http://www.betribes.com/editions/first-round-summervibes-edition
    </edition_link>
    <image_flyer_front>
        http://s3-eu-west-1.amazonaws.com/btrb-prd-flyers/ye29ys93be98.jpg
    </image_flyer_front>
    <image_120x120>
        http://s3-eu-west-1.amazonaws.com/btrb-prd-flyers/ye29ys93be98-a_thumbnail-120x120.jpg
    </image_120x120>
    <excerpt/>
    <tickets>
        <ticket>
            <price>11.0</price>
            <name>Ticketscript</name>
            <url>
                https://shop.ticketscript.com/channel/web2/start-order/rid/DFEG5RE7/language/nl
            </url>
        </ticket>
    </tickets>
</edition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T15:47:27.147

请参阅我上面的评论。如果我已经解释了您要正确执行的操作，我认为这是解析您的 XML 的问题。这个答案将帮助您如何做到这一点：[XML parsing of a variable string in JavaScript](https://stackoverflow.com/questions/649614/xml-parsing-in-javascript/8412989#8412989)。

解析后，您需要创建一个函数，该函数可以遍历一组 edition 元素，查找那些 date 属性是您指定的元素，然后将您想要的属性值发送到例如表格的单元格中排。

# 建议重写你的问题

我编辑了你的问题，但我必须等待同行的反馈才能看到它。我会这样写：

我有一个 XML 文档，其中包含一个名为 edition 的元素的多个副本。我想将文档解析为 JavaScript 可以理解的格式，然后遍历所有版本元素并按日期对它们进行分组。

你会怎么做？

这是一个示例编辑元素（只有几个示例属性。真实数据更复杂）：

```
<edition>
    <id>116853</id>
    <name>First Round - Summervibes Edition</name>
    <date>08-06-2012</date>
</edition> 
```

# 链接到现有答案

编辑您的问题后，它变得更具可读性。问题是您可能仍然会被否决，因为已经有一个非常好的问题，我认为这与您的问题完全相同，并且在[XML 解析 JavaScript 中的变量字符串时](https://stackoverflow.com/questions/649614/xml-parsing-in-javascript/8412989#8412989)有很多出色的答案。

无论如何，这里有一些代码根据我上面链接到的问题中的建议给出了一般形式，更进一步地展示了您如何循环浏览版本集合。

在正文中，放置一个 div 元素来显示您的数据：

```
<div id="display"></div> 
```

然后**在下面**放置一个带有如下代码的脚本元素：

```
var xmlData = "<editions><edition><id>111</id><name>First</name><date>08-06-2012</date></edition>" +
    "<edition><id>222</id><name>Second</name><date>06-04-2012</date></edition>" +
    "<edition><id>333</id><name>Third</name><date>08-06-2012</date></edition>" +
    "<edition><id>333</id><name>Fourth</name><date>06-04-2012</date></edition></editions>",
    parseXml, xml, editions, display, i, edition, nameElement, name;
if (typeof window.DOMParser != "undefined") {
    parseXml = function(xmlStr) {
        return ( new window.DOMParser() ).parseFromString(xmlStr, "text/xml");
    };
} else if (typeof window.ActiveXObject != "undefined" &&
    new window.ActiveXObject("Microsoft.XMLDOM")) {
    parseXml = function(xmlStr) {
        var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = "false";
        xmlDoc.loadXML(xmlStr);
        return xmlDoc;
    };
} else {
    throw new Error("No XML parser found");
}
xml = parseXml(xmlData);
editions = xml.getElementsByTagName("edition");

display = document.getElementById("display");
for(var i = 0; i < editions.length; i++){
    edition = editions.item(i);
    nameElement = edition.getElementsByTagName("name");
    name = nameElement[0].childNodes[0];
    div = document.createElement("div");
    div.innerHTML = name.nodeValue;
    display.appendChild(div);
} 
```

# 2\. 下一步

我希望你可以从那里去实现你想要的分组。您将不得不遍历所有版本并构建一个关联的组数组，可能使用日期作为键。当您发布新版本时，您会

1.  检索日期
2.  尝试查找具有该日期的组并将版本添加到该组的版本数组中。
3.  如果该组不存在，则以日期为键创建一个新组，并将版本添加到该组中的版本数组中。
4.  最后通过组对象并在一个新的 div 中显示每个组，并在其中显示版本，比如一个 ul 元素

可能有一些聪明的方法可以优化这个过程，以便您可以随时显示项目，但我在 YUI 库博客上看到绘制元素非常耗时，因此最好构建一个包含所有这些的大 HTML 字符串`div`和`ul`和`li`元素，然后在最后绘制。与将新元素绘制到 DOM 中相比，JavaScript 处理往往非常快。

# 3\. 最后一点建议

1.  我认为只提供相关代码很重要。你的例子很长，充满了不相关的细节。
2.  就我个人而言，我发现解析 XML 并试图浏览生成的 XML 文档很痛苦。如果您有选择，请查看[JSON](http://www.json.org)。对于大多数用途，JSON 可能比 XML 更好。它是 JavaScript 的一个子集，因此它已经是 JavaScript 可以理解的格式（尽管通常仍然需要解析器）。

# sql - 将 SQL Server 错误消息更改为另一种语言

> ID：10948032
> 
> 赞同：0
> 
> 时间：2012-06-08T11:32:20.813
> 
> 标签：sql, sql-server, sql-server-2008-r2

如何将 SQL Server 错误消息更改为另一个 . 我正在将 SQL Server 2008 R2 与 Windows server 2008 r2 企业版一起使用，并希望将错误消息更改为 persion 语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:34:31.940

[设置语言](http://msdn.microsoft.com/en-us/library/ms174398.aspx)：

> 指定会话的语言环境。会话语言决定了日期时间格式和**系统消息**。

不过我不认为有波斯版，请参阅列表[`sys.syslanguages`](http://msdn.microsoft.com/en-us/library/ms190303.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:33:47.513

尝试像这样设置语言

```
SET LANGUAGE ENGLISH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-15T16:04:17.677

波斯语不是 SQL Server 2008 R2 支持的语言

要查看支持的语言，[请单击此处](https://docs.microsoft.com/en-us/sql/relational-databases/system-compatibility-views/sys-syslanguages-transact-sql)

您也可以通过使用找到它们

```
 SELECT name, alias 
 FROM sys.syslanguages 
```

如果您想将语言更改为意大利语，例如使用

```
SET LANGUAGE Italian 
```

更多信息在`SET LANGUAGE` [这里](https://docs.microsoft.com/en-us/sql/t-sql/statements/set-language-transact-sql)

# windows-phone-7 - 指南针 - 根据纬度和经度显示方向

> ID：10948033
> 
> 赞同：0
> 
> 时间：2012-06-08T11:32:37.683
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-7.1.1

在 WP7 中，是否可以根据给定的纬度和经度值显示指南针方向。（例如，如果我在印度并且如果给出了其他国家/地区某个地方的纬度和经度值）。如果是，请就如何实现这一目标提供一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:01:06.683

这就是所谓的[第二（逆）大地测量问题](http://en.wikipedia.org/wiki/Geodesy#Second_.28inverse.29_geodetic_problem)。

> “给定两个点，确定连接它们的线（直线、弧线或测地线）的方位角和长度。” 维基百科

[您可以使用System.Device.Location.GeoCoordinate.GetDistanceTo()](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate%28v=vs.92%29.aspx)获取距离。否则，请查看优秀的[C# Geodesy Library for GPS – Vincenty's Formulas](http://www.gavaghan.org/blog/free-source-code/geodesy-library-vincentys-formula/)。特别是大地曲线。

# c# - ASP .NET 中的 DataGrid 与其他回发事件的利益冲突

> ID：10948042
> 
> 赞同：1
> 
> 时间：2012-06-08T11:33:07.837
> 
> 标签：c#, asp.net, data-binding, datagrid, postback

我有一个绑定到通用集合的数据网格。在 Page_Load 事件中，我相应地检查`!this.IsPostback`并调用网格上的 DataBind。

然后，如果我尝试通过指定唯一名称和排序表达式来实现排序，即使页面是回发，它也希望我调用 DataBind。

这种情况通常如何处理？在 Page_Load 中调用无条件 DataBind 似乎不是一个好主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:47:05.160

在 SortCommand 事件中调用您的数据绑定代码：

```
void DataGrid1_SortCommand(Object sender, DataGridSortCommandEventArgs e)
    {
        // Retrieve the data source.
        DataTable dt = YOURDATA;

        // Create a DataView from the DataTable.
        DataView dv = new DataView(dt);

        // The DataView provides an easy way to sort. Simply set the
        // Sort property with the name of the field to sort by.
        dv.Sort = e.SortExpression;

        // Rebind the data source and specify that it should be sorted
        // by the field specified in the SortExpression property.
        DataGrid1.DataSource = dv;
        DataGrid1.DataBind();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:48:21.057

如果您更改排序，则始终需要重新加载，因为控件需要重新填充而不是更改。自从我完成任何 asp.net 以来已经有一段时间了，但我很确定无论您是否调用 databind，数据都绑定在每个回帖上，而您不必手动执行此操作的唯一原因是视图状态.

# java - 如何将 gae Key 字符串转换为 html id 属性字符串？

> ID：10948043
> 
> 赞同：1
> 
> 时间：2012-06-08T11:33:17.963
> 
> 标签：java, html, google-app-engine

我想直接使用为我的 java google webapp 中的 JDO 对象生成的密钥作为我呈现给我的用户的 html 文档中的 id 属性。

`[a-zA-Z]`html id 字符串不区分大小写，必须以`[A-Za-z0-9-_]`. 当使用 (Java) 将谷歌应用引擎密钥转换为字符串`KeyFactory.keyToString(key)`时，它会返回“网络安全字符串。例如，此字符串可以安全地用作嵌入 HTML 文档中的 URL 参数。”

java字符串中的websafe格式是否与html ID属性格式兼容？

如果不是，那么在两种字符串格式之间进行转换的最佳方法是什么？这样我就可以有两种类似的方法：

```
public static String htmlToGae(String htmlID){ ... }
public static String gaeToHTML(String gaeID){ ... }

if (gaeToHTML(htmlToGae(htmlID)) == htmlID)
  return "thank you! :)"; 
```

一个简单的“所有天鹅都是白色的”测试似乎表明 KeyFactory 返回的网络安全字符串与 html id 属性兼容：

```
for (int ii = 0; ii < 100; ii++) 
    out.println(KeyFactory.createKeyString("Document", "swan" + ii)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:13:47.740

是的，这完全可以用作 HTML id。

# javascript - 检测DIV是否有滚动条

> ID：10948044
> 
> 赞同：9
> 
> 时间：2012-06-08T11:33:23.567
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [使用 jQuery 检测 DIV 中是否存在滚动条？](https://stackoverflow.com/questions/2647761/detecting-presence-of-a-scroll-bar-in-a-div-using-jquery)

有如下标记，

```
<div class="content">Lorem</div>
<div class="content">Lorem Iorem Lorem Iorem Lorem Iorem Lorem Iorem Lorem IoremLorem Iorem Lorem Iorem Lorem Iorem</div>
<div class="content">Lorem</div>
<div class="content">Lorem</div> 
```

如果内容有滚动条，那么它应该向该 div 添加类，如“scroll-image”。

DIV 的高度可以不同。对此的任何 jQuery 解决方案。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-08T11:35:49.330

```
(function($) {
    $.fn.hasScrollBar = function() {
        return this.get(0).scrollHeight > this.height();
    }
})(jQuery);

$('#my_div1').hasScrollBar(); // returns true if there's a `vertical` scrollbar, false otherwise.. 
```

取自[如何检查滚动条是否可见？](https://stackoverflow.com/questions/4814398/jquery-check-if-scrollbar-visible-div-with-overflowauto)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T11:37:17.603

您需要`scrollHeight`与`height`这样的元素进行比较：

```
$('.content').each(function(){
  if ($(this)[0].scrollHeight > $(this).height()) {
    $(this).addClass('scroll-image');
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T11:36:28.930

正如 esailija 所说，重复：[使用 jQuery 检测 DIV 中是否存在滚动条？](https://stackoverflow.com/questions/2647761/detecting-presence-of-a-scroll-bar-in-a-div-using-jquery)

解决方案如下

```
var div= document.getElementById('something'); // need real DOM Node, not jQuery wrapper
var hasVerticalScrollbar= div.scrollHeight>div.clientHeight;
var hasHorizontalScrollbar= div.scrollWidth>div.clientWidth; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:35:50.040

```
(function($) {
$.fn.hasScrollBar = function() {
    return this.get(0).scrollHeight > this.height();
}
})(jQuery);

$('div').hasScrollBar(); //return true if it has one 
```

来源：[如何检查滚动条是否可见？](https://stackoverflow.com/questions/4814398/jquery-check-if-scrollbar-visible-div-with-overflowauto)

# android - 我如何使用条形码阅读器和二维码阅读器？（Titanium 2.0.2.GA）

> ID：10948045
> 
> 赞同：2
> 
> 时间：2012-06-08T11:33:32.020
> 
> 标签：android, iphone, titanium

我想用[这个](https://github.com/mwaylabs/titanium-barcode) [1](https://github.com/mwaylabs/titanium-barcode)来使用条形码或二维码扫描仪。我正在使用钛 2.0.2.GA。但我收到一条错误消息。这不支持 2.0.2.GA Titanium SDK。或者找不到这个模块。我如何消除这个问题？任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:56:38.693

您是在本地将模块安装到项目中还是作为全局 Titanium 模块？另外，您是否将模块包含在您的 tiapp.xml 文件中？如果不是，那可能就是问题所在。

# database - Filemaker 到 Filemaker 数据库导入表问题

> ID：10948051
> 
> 赞同：0
> 
> 时间：2012-06-08T11:33:57.620
> 
> 标签：database, import, filemaker

我有一个供我自己使用的 filemaker 数据库，我会定期从第二个 filemaker 数据库（每天都处于活动状态）进行更新。

我有一个简单的脚本，可以将活动数据库中的所有数据导入我自己的数据库。两个数据库是相同的 - 只是记录不同。

我遇到的问题是用作门户的表。此数据在导入时显示正确的行数，但仅显示为最后一行的副本。

这是我的导入脚本： http: [//farm9.staticflickr.com/8165/7351115686_d7efbac90e_b.jpg](http://farm9.staticflickr.com/8165/7351115686_d7efbac90e_b.jpg)

这是原始表（左）和导入后我的数据库中的表（右）： http: [//farm8.staticflickr.com/7229/7351115740_c6677dfee5_b.jpg](http://farm8.staticflickr.com/7229/7351115740_c6677dfee5_b.jpg)

完全把我扔了 - 我做错了什么？任何帮助将不胜感激，

最好的史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:02:00.970

看起来您是根据外键而不是主键进行匹配的。当您使用外部时，它会匹配，因为它会遍历这些行，最后一个是保留的那个。

# blackberry - 如何将图像对齐底部

> ID：10948052
> 
> 赞同：-3
> 
> 时间：2012-06-08T11:33:58.503
> 
> 标签：blackberry

我正在尝试以 img1 str img2 |img3 格式对齐屏幕底部的图像，我面临的问题是，如果 str 很小，图像会向左移动，否则图像会根据字符串长度向右移动。我想让图像总是在右边的角落，怎么做？

```
VerticalFieldManager test = new VerticalFieldManager();

    HorizontalFieldManager horizontalFieldManager = new HorizontalFieldManager(
                FIELD_BOTTOM | Manager.USE_ALL_WIDTH) {
            public void paint(Graphics graphics) {
                graphics.setBackgroundColor(0x316AC5);
                graphics.clear();
                super.paint(graphics);
            }
        };

        Bitmap fadeBitmap = Bitmap
                .getBitmapResource("icon_tz_faded_316AC5_35x39.png");
        Bitmap clockBitmap = Bitmap
                .getBitmapResource("icon_date_picker_white_316AC5_35x39.png");
        Bitmap tzBitmap = Bitmap
                .getBitmapResource("icon_tz_white_316AC5_35x39.png");

        final ImageButtonField unfocus = new ImageButtonField("",
                Field.FOCUSABLE | FIELD_LEFT, "icon_tz_faded_316AC5_35x39.png",
                "icon_tz_faded_316AC5_35x39.png", 0xFFFFFF);

        final ImageButtonField bitmapField = new ImageButtonField("",
                Field.FOCUSABLE | ImageButtonField.FIELD_RIGHT,
                "icon_date_picker_white_316AC5_35x39.png",
                "icon_date_picker_selected_35x39.png", 0xFFFFFF);

        final ImageButtonField bitmapField1 = new ImageButtonField("",
                Field.FOCUSABLE | ImageButtonField.FIELD_RIGHT,
                "icon_tz_white_316AC5_35x39.png", "icon_tz_selected_35x39.png",
                0xFFFFFF);

        int margin = ((Display.getWidth() - (fadeBitmap.getWidth()
                + clockBitmap.getWidth() + tzBitmap.getWidth() + timezoneTitle
                .getWidth())) / 4);

        unfocus.setMargin(0, 3, 0, 0);
        timezoneTitle.setMargin(0, 120, 0, 0);
        bitmapField1.setMargin(0, 0, 0, 0);

        horizontalFieldManager.add(unfocus);
        horizontalFieldManager.add(timezoneTitle);
        horizontalFieldManager.add(bitmapField);
    horizontalFieldManager.add(bitmapField1);
            test.add(horizontalFieldManager); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:32:00.120

创建另一个水平字段并将图像添加到该字段，然后使用 setPadding(top,left,bottom,right) 将图像按顺序排列。

# entity-framework-4.3 - 使用 Code First 在实体框架中定义一对一或零关系

> ID：10948053
> 
> 赞同：2
> 
> 时间：2012-06-08T11:33:59.117
> 
> 标签：entity-framework-4.3

我知道关于这个主题有很多问题，但我还没有找到一个真正解释如何解决我的特定问题的问题。我认为这意味着它可能无法解决（我认为这可能与 EF 的思维方式“倒退”），但我不得不问。

我有一个带有三个（缩写）POCO 的模型，如下所示：

```
[Table("People")]
public class Person {
    public int PersonID { get; set; }
    [Required]
    public string PersonName { get; set; }
}

public class Location {
    public int LocationID { get; set; }
    public int LocationTypeID { get; set; }
    public virtual LocationType LocationType { get; set; }
}

public class Van : Location {
    public int PartyID { get; set; }
    public virtual Party Party { get; set; }
} 
```

这些由（缩写的）数据库表支持（我们手工编写）：

```
CREATE TABLE People (
    PersonID INTEGER IDENTITY NOT NULL,
    PersonName VARCHAR(255) NOT NULL,
    PRIMARY KEY (PersonID)
)

CREATE TABLE Locations (
    LocationID INTEGER IDENTITY NOT NULL,
    LocationTypeID INTEGER NOT NULL,
    FOREIGN KEY (LocationTypeID) REFERENCES LocationTypes(LocationTypeID)
)

CREATE TABLE Vans (
    LocationID INTEGER NOT NULL,
    PersonID INTEGER NOT NULL,
    PRIMARY KEY (LocationID),
    FOREIGN KEY (LocationID) REFERENCES Locations(LocationID),
    FOREIGN KEY (PersonID) REFERENCES People(PersonID)
) 
```

你大概可以想象它的`LocationTypes`样子。

`Locations`是每个类型的表层次结构的根 - 也有检查约束来强制执行这一点。`Vans`是一种位置，就像其他不相关的东西一样`Warehouse`。

现在，a`Van`属于 a `Person`，因为我们向员工发放一辆面包车，他们有责任给它加满燃料，而不是把它撞坏，把它带到客户现场并在他们用完所有供应的东西时订购更多的东西螺钉、钻头和铠装直流电缆。然而，并不是每个`Person`人都有一辆面包车（其中一些在一辆面包车中成对工作），并且该`Person`表没有指向的外键`Van`- 它是相反的。这在某种意义上是一个历史事故，但它非常巧妙地模拟了这种情况，因为虽然 a`Person`不必有 a `Van`，但 a`Van`肯定必须有一个人。

所以我的问题是：我如何才能`Person`拥有一个包含它们的导航属性`Van`？

```
public virtual Van Van { get; set; } 
```

我在数据注释和流畅的 API 方面做了很多工作，我得到的最接近的是`OnModelCreating`：

```
modelBuilder.Entity<Van>()
    .HasRequired(v => v.Person)
    .WithOptional(p => p.Van); 
```

不幸的是，这试图`Van`用产生`Location`对象的代理填充属性。它甚至可能是正确的`Location`对象（我无法检查），但没有意识到它应该在寻找货车。但是，我确实怀疑它可能会在查找时尝试匹配`PersonID`-`LocationID`如果没有 Fluent API 映射，我根本就没有货车，这是我所期望的（所有`PersonID`值都低于最低`LocationID`值这对应于货车，所以不可能找到任何东西）。

`Person`如果对 有一个可以为空的外键，这无疑会很容易`Van`，但是我们在两个方向上都有外键，如果我们从中取出一个，`Van`那么我们就不会对 a`Van`具有 a的绝对必要约束进行建模`Person`.

所以，我想，`Van`拥有这种关系，并且`Van`属性 on`Person`是一个反向导航属性，但似乎 EF 并不擅长这种一对一的技巧，即使一端是可选的。有没有办法让它发挥作用，还是我必须接受妥协？

我们通常拒绝因为 Entity Framework 缺少的特性而破坏数据库模型。我真正需要的是一种方法告诉 EF可以通过加入 Vans 上的 Vans.PersonID = Person.PersonID 来填充 on 上的`Van`属性。`Person`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T10:10:12.890

问题是目前不支持此功能。您提到您没有找到任何问题可以解决您的问题。我想知道您是否发现任何提到 EF 不支持唯一约束/候选键的问题，这对于解决这种类型的一对一关系是绝对必要的。

在数据库中，只有依赖表中的 FK 是唯一的，才能实现一对一的关系。这可以通过两种方式完成：在依赖表中的 FK 列上放置唯一约束（索引）或使用依赖表中的 PK 作为主表的 FK。

EF 执行与数据库相同的参照完整性规则，但在一对一关系和缺乏对唯一约束的支持的情况下，它不支持前一种方式。EF 只能通过将依赖表的 PK 用作对主表的 FK 来对一对一关系进行建模。

您可以投票支持[Data UserVoice](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1050579-unique-constraint-i-e-candidate-key-support)上的唯一约束/候选键。

如何解决您的特定问题？通过欺骗EF。让 EF 认为您具有一对多关系并`PersonID`在`Van`表中放置唯一约束。比这样更新您的 Person ：

```
[Table("People")]
public class Person {
    public int PersonID { get; set; }
    [Required]
    public string PersonName { get; set; }

    public virtual ICollection<Van> Vans { get; set; }

    [NotMapped]
    public Van Van 
    {
        get { return Vans.FirstOrDefault(); }
        set
        {
             Vans.Clear();
             if (value != null)
             {
                 Vans.Add(value);
             }
        }
    }
} 
```

这是一个非常丑陋的解决方法，因为`Vans`收集仍然是公开的。您可以使用它的可见性，但要确保您了解一些事情：

*   一旦`Vans`不公开，您必须将其映射到`OnModelCreating`该上下文中，并且必须能够看到该属性，或者您必须提供执行该操作的映射配置。检查[这个](http://blog.cincura.net/232731-mapping-private-protected-properties-in-entity-framework-4-x-code-first/)和[这个](http://blog.oneunicorn.com/2012/03/26/code-first-data-annotations-on-non-public-properties/)以获得更多信息。
*   `Vans`属性不得破坏代理创建规则以支持延迟加载
*   急切加载必须使用`Vans`属性

# javascript - 这是否可以获得完整的客户端路径 按钮？

> ID：10948058
> 
> 赞同：0
> 
> 时间：2012-06-08T11:34:29.790
> 
> 标签：javascript, asp.net

我必须使用 Button 从客户端上传一个文件。我必须获取完整的客户端路径。例如，

假设，用户从这台本地机器“d:\my files\docs\test.xml”上传了一个文件。所以，现在我想获得相同的路径（“d:\my files\docs\test.xml”）继续前进。我如何得到它？

我使用过 FileUpload1.PostedFile.FileName ...但它在 IE 上运行良好，但在 Firefox 中却不行...

那么，你能帮我解决一下 Firefox 和 chrome 的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:46:56.383

好来源：

[http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx](http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)

查看底部附近的“文件上传控制”部分。引：

> 此外，Internet 区域的“上传文件时包括本地目录路径”URLAction 已设置为“禁用”。此更改可防止潜在敏感的本地文件系统信息泄露到 Internet。例如，Internet Explorer 8 现在将只提交文件名 image.png，而不是提交完整路径 C:\users\ericlaw\documents\secret\image.png。

这表明如果该站点是受信任的（在 IE 中）/较旧的浏览器，则它是可能的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:44:32.680

不，这是不可能的。由于安全限制，浏览器不允许这样做。

如果我可以从 javascript 中设置我想要的文件，黑客可能会从你的 PC 中获取大量文件。

因此，无论是 asp.net 还是其他方式，都无法在浏览器中获取完整的客户端路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:47:42.180

[http://www.ietf.org/rfc/rfc2184.txt](http://www.ietf.org/rfc/rfc2184.txt)和[http://www.ietf.org/rfc/rfc2388.txt](http://www.ietf.org/rfc/rfc2388.txt)似乎是讨论此问题的相关 RFC。它们很长，但归结为您确实获得了文件名而不是路径。

浏览器将遵循这些标准，因此无法通过标准浏览器界面获得您想要的信息。

这留下了其他技术，如 javascript、flash、silverlight 等。

Javascript 通过浏览器对象模型完成所有工作，因此默认情况下也无济于事。与使用文件系统有关的任何事情都被视为安全风险（您是否希望随机页面查看您的文件系统？）。

您可以创建自己的 flash 或 sliverlight 上传工具（或找到一个）来收集更丰富的信息，我对这些技术知之甚少。归根结底，尽管我希望他们遵循有关访问客户端计算机的类似规则。

因此，可能随处可见的 RFC 和精神说不，你不能这样做。

您可以随时向用户询问文本框中的路径，但如果它很重要，只需让他们将其复制...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:43:54.397

似乎有办法做到这一点，但同时它看起来只有在你的机器上才能工作。这是一个解释它的链接。

[http://www.codingforums.com/showthread.php?t=72288](http://www.codingforums.com/showthread.php?t=72288)

出现此问题是因为它被视为恶意脚本，试图访问不受其控制的信息，从而为用户提供提示。因此，除非这是针对您控制下的机器或信任您的用户，否则这不是最好的想法。大多数看到安全风险警报的用户总是会阻止它们。

# jquery - Ajax：运行 OnBegin 函数后表单未提交

> ID：10948060
> 
> 赞同：0
> 
> 时间：2012-06-08T11:34:39.400
> 
> 标签：jquery, ajax, asp.net-mvc-3, form-submit

在 asp.net web 应用程序中，我使用 AJAX 提交表单。我想在提交之前运行一个javascript代码。所以我这样做了：

```
@using (Ajax.BeginForm("SaveProductDetails", "Store", new AjaxOptions
{
HttpMethod = "Post",
LoadingElementId = "progress",
OnBegin = "BeforeSubmit()",
OnSuccess = "closeMe()",
OnFailure = "doAlert('An error occurred while trying to save your changes. Please contact your Administrator')"
})) 
```

但问题是，在运行 BeforeSubmit() 函数后，提交停止了。表单未提交。

BeforeSubmit() 函数没有问题。如果我不使用 OnBegin 做任何事情，表单会正确提交。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:40:03.920

您可以执行以下操作。

查看代码

```
 @using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post, new { @id = "frmId", @name = "frmId" }))
    {
            @*Your code*@
            @*You have to define input as a type button not as a sumit. *@            
            <input value="Submit" type="button" id="btnSubmit" onclick="ValidateUser()" />
    }

    <script type="text/javascript">

    function ValidateUser() {
    // Do your verification here.
    $("#frmId").submit();
    }

</script> 
```

# kernel - 系统调用是否完全在软件中断处理程序中执行？

> ID：10948065
> 
> 赞同：4
> 
> 时间：2012-06-08T11:35:03.487
> 
> 标签：kernel, system-calls, interrupt

系统调用是否完全在软件中断处理程序的上下文中执行？

我的意思是，像 read() 这样的一些系统调用可能需要很长时间才能返回，这违反了 ISR 的执行时间应该非常短的策略。系统调用是否已卸载到其他线程？这是如何运作的？

[对任何内核的引用都可以]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T08:54:44.427

系统*调用在**ISR*内的大多数内核上运行。快速浏览一下 Linux 的早期版本，您会注意到`int $Ox80`调用内核的方法。从内核开发的角度来看，这个可能是最简单的解决方案有一个很大的缺点：只要运行 ISR；中断被禁用。禁用中断太长时间很糟糕，因为很明显您的系统不会反应（它会延迟外部事件，它不会按时重新安排......）。

**正如 Adel 在他的[回答中解释的那样，](https://stackoverflow.com/a/10988735/1439701)**抢占**是一个聪明的解决方案。但是每当内核因为资源不可用而选择抢占线程时，它通常已经花费了大量时间来禁用中断。**

 **> 系统调用是否已卸载到其他线程？

你是对的。**[中断线程](http://en.wikipedia.org/wiki/Interrupt_handler#Interrupt_threads)**和/或**线程内核**是一个更智能的解决方案。像 Solaris 和 Mac OS X 这样的内核更喜欢有非常简单的 ISR，它只是唤醒高优先级的中断线程。因此，ISR 被减少到最少的处理，并且系统在中断禁用的情况下运行的时间大大减少。因为这些*中断线程*具有高优先级，所以它们很可能在 ISR 返回时运行。好的是中断将再次启用，因此更高优先级的工作不会被延迟。使用线程内核，例如最近发布的 Linux，可以在内核内部完成多项操作，尽管有一个块，其他进程仍然能够进入内核。

希望这有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T23:27:04.157

请阅读系统调用正常工作方式的引用文本：

> 当用户程序启动系统调用时，系统调用处理程序获得控制权。系统调用处理程序将保护域从调用者保护域用户更改为系统调用保护域内核，并切换到受保护的堆栈。
> 
> 然后系统调用处理程序调用支持系统调用的函数。加载器为此目的维护一个当前定义的系统调用表。
> 
> 系统调用在调用进程中运行，但比调用进程具有更多特权。这是因为保护域已从用户更改为内核。
> 
> 系统调用函数在执行完操作后返回到系统调用处理程序。然后系统调用处理程序恢复进程的状态并返回给用户程序。

现在，关于系统调用期间的上下文切换，有两种类型的内核。抢占式和非抢占式内核（粗略地说；因为这有时也适用于执行关键代码部分的线程/进程）。

前者在 RTOS（实时操作系统）中很常见，而后者在我们所知道的最常见的操作系统中很常见。
在抢占式内核中，调度程序可以选择退出执行系统调用的线程，以支持具有更高优先级的线程。后者不允许这种抢占，如；如果一个线程当前正在执行系统调用，所有其他线程都应该等到它完成其内核模式工作。

总结一下，通常在非 RT 系统中，如果一个线程执行系统调用，它应该在被调度之前完成它的工作。

现在注意一些事情，**一些系统调用可能会阻塞**！
这是什么意思？这意味着他们将停止直到发生中断，然后他们将重新执行直到他们完成他们的工作。
一个例子是 read()，它会阻塞直到用户请求的数据准备好；同时，可以安排其他线程运行，但是一旦中断到达该 read() 它将再次开始运行，并且没有人可以调度它（再次，仅在非抢占式环境中），直到它返回给用户登陆结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T10:35:17.310

首先，Linux 中使用的一些术语。在 Linux 中，内核可以在多种情况下运行：

*   进程上下文（用户上下文）：内核代表**用户**空间**进程**运行，它调用了系统调用，正在读取`/proc`文件，...
*   中断上下文：内核在响应某些中断时运行。
*   原子上下文：内核由于某种原因无法休眠（阻塞）：可能它在中断上下文中运行，或者某些自旋锁被锁定，...
*   非原子上下文：很明显，我希望。

系统调用在启用中断的情况下开始执行（或者因为它们被明确地重新启用（例如：当使用 x86 时`sysenter`），或者因为它们根本没有被禁用（例如：当使用 x86 的陷阱门时，Linux`int 0x80`会这样做））。因此，内核在执行系统调用时可能会被中断中断。

一些系统调用可能会休眠（阻塞），等待某些东西。在这种情况下，内核可以切换到另一个任务（进程/线程），休眠的任务稍后会被唤醒。

在非抢占式内核中，一个任务不能抢占另一个在进程上下文中正在运行（即实际工作，而不是休眠）的任务。在抢占式内核中，较高优先级的任务可以抢占在非原子进程上下文中运行的较低优先级的任务。这可以防止高上下文切换延迟，例如：音频程序可能需要非常频繁地调度，抢占式内核可以防止其他任务的繁重系统调用处理与此混淆（否则可能导致音频伪影、点击……）**

# sqlite - 无法更新 QSqlite 数据库 - 数据库锁定无法获取行

> ID：10948068
> 
> 赞同：2
> 
> 时间：2012-06-08T11:35:10.580
> 
> 标签：sqlite, qt4

我正在写一个通讯录应用程序。联系人存储在 qsqlite 数据库中，并使用 QSqlQueryModel 显示。

QueryModel 默认运行一个显示所有联系人的查询。可以编辑和删除联系人。

当用户在搜索字段中输入姓名时，SearchQuery 将运行，并且仅显示与搜索词匹配的联系人。问题是我无法编辑或删除这些联系人。我收到一条错误消息，指出数据库已锁定，无法获取行。

我不明白为什么会这样。如果我可以编辑/删除默认查询的结果，那么我应该能够编辑/删除搜索查询的结果。

下面是代码：

*   构造函数

*   搜索联系人

*   删除联系人

**构造函数（相关部分）**

```
 OpenDatabase();

    DefaultModelQuery.append("SELECT Id,FirstName||' '||LastName AS FullName,");
    DefaultModelQuery.append("FirstName,LastName,Email,HomeNumber,WorkNumber,MobileNumber,Address,City,Country,Birthdate FROM Contacts ");
    DefaultModelQuery.append("ORDER BY FirstName;");

    QSqlQuery Query(DefaultModelQuery);

    ActiveQuery = Query;
    Model = new QSqlQueryModel(this);
    Model->setQuery(ActiveQuery);

    ui->listView->setModel(Model);
    ui->listView->setModelColumn(1); 
```

**搜索联系人**

```
void Contacts::SearchContact()
{
    /*1\. Read Search Term
      2\. Decide Type
      3\. Generate Query
      4\. Execute Query.
      5\. If No results, return
      6\. If resutls, update Model, show first result.
      */

    //STEP 1: Read Search Term.
    QString SearchTerm = ui->SearchLineEdit->text();

    if(SearchTerm.isEmpty())
        return;

    /*STEP 2\. Decide Type
      Type n : Name
      Type e : Email
      Type p : Number
      */
    char QueryType;

    if(SearchTerm.contains(QRegExp("[A-za-z-]+")))
    {
        if(SearchTerm.contains("@"))
            QueryType = 'e';
        else
            QueryType = 'n';
    }else if(SearchTerm.contains(QRegExp("[0-9]+")))
        QueryType = 'p';
    else
        QueryType = 'n';

    //STEP 3: Generate Query
    QSqlQuery SearchQuery;

    switch(QueryType)
    {
    case 'n':
    {
        QStringList Names = SearchTerm.split(" ");
        if(Names.size()>=2)
        {
            qDebug()<<QString("Searching for %1 %2").arg(Names.first(),Names.last());
            SearchQuery.prepare("SELECT Id,FirstName||' '||LastName AS FullName,FirstName,LastName,Email,HomeNumber,MobileNumber,WorkNumber,Address,City,Country,Birthdate FROM CONTACTS WHERE FirstName=:f AND LastName=:l ORDER BY FirstName");
            SearchQuery.bindValue(":f",Names.first());
            SearchQuery.bindValue(":l",Names.last());
        }else
        {
            qDebug()<<QString("Searching for %1").arg(Names.first());
            SearchQuery.prepare("SELECT Id,FirstName||' '||LastName AS FullName,FirstName,LastName,Email,HomeNumber,MobileNumber,WorkNumber,Address,City,Country,Birthdate FROM CONTACTS WHERE FirstName=:f OR LastName=:l ORDER BY FirstName");
            SearchQuery.bindValue(":f",Names.first());
            SearchQuery.bindValue(":l",Names.first());
        }
        break;
    }

    case 'e':
    {
        QString Email = SearchTerm.trimmed();
        SearchQuery.prepare("SELECT Id,FirstName||' '||LastName AS FullName,FirstName,LastName,Email,HomeNumber,MobileNumber,WorkNumber,Address,City,Country,Birthdate FROM CONTACTS WHERE Email=:e ORDER BY FirstName");
        SearchQuery.bindValue(":e",Email);
        break;
    }

    case 'p':
    {
        QString Number = SearchTerm.trimmed();
        SearchQuery.prepare("SELECT Id,FirstName||' '||LastName AS FullName,FirstName,LastName,Email,HomeNumber,MobileNumber,WorkNumber,Address,City,Country,Birthdate FROM CONTACTS WHERE HomeNumber=:h OR WorkNumber=:w OR MobileNumber=:m ORDER BY FirstName");
        SearchQuery.bindValue(":h",Number);
        SearchQuery.bindValue(":m",Number);
        SearchQuery.bindValue(":w",Number);
        break;
    }
    }

    //STEP 4: Execute Query
    if(!SearchQuery.exec())
    {
        qDebug()<<QueryType<<": "<<SearchQuery.lastError().text();
        QMessageBox::information(this,
                                 tr("Search Error"),
                                 tr("The following error occured while trying to search contacts:\nError: %1").arg(SearchQuery.lastError().text()));
        return;
    }

    //STEP 5: If no results, return;

    /*Note:
    I used the QSqlQuery::first() method here to check if there are any result or not.
    I doubt this is efficient, because the function probably invovles unnecessary steps & resources.
    So the following code could be made more efficient.

    I can't use QSqlQuery::size() because it always returns -1.
      */

    if(!SearchQuery.first())
    {
        QMessageBox::information(this,
                                 tr("No Results Found"),
                                 tr("No results were found for \"%1\"").arg(SearchTerm));
        return;
    }

    //STEP 6: If results, update model, show first result.
    Model->setQuery(SearchQuery);

    QModelIndex index = Model->index(0,1);
    DisplayContact(index);
    ui->listView->scrollTo(index);

    SetView(Contacts::View_DisplaySearchResultsView);
} 
```

**删除联系人**

```
void Contacts::RemoveContact()
{
    if(SelectedRecordId!=-1)
    {
        if(QMessageBox::information(this,
                                 "Confirm Removal",
                                 "Are you sure you want to remove this contact from your list?",
                                 QMessageBox::Yes|QMessageBox::No)==QMessageBox::No)
            return;

        QSqlQuery DeleteQuery;
        DeleteQuery.prepare("DELETE FROM Contacts WHERE Id = :i;");
        DeleteQuery.bindValue(":i",SelectedRecordId);

        if(!DeleteQuery.exec())
        {
            qDebug()<<DeleteQuery.lastError().text();
            QMessageBox::warning(this,
                                 tr("Error Removing Contact"),
                                 tr("An error occured while trying to remove this contact."));
        }else
        {
            SelectedRecordId =-1;

            clear();
            SetView(Contacts::View_AddContactView);
            Model->setQuery(ActiveQuery);
            UpdateContactCount();
        }
    }else
        QMessageBox::warning(this,
                              tr("No Record Selected"),
                              tr("Unexpected Error: Remove Contact Operation is being attempted while no contact is selected."));
} 
```

我真的很感激这方面的任何帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:19:41.393

The only thing that comes to mind is the need to ensure that all of the results of the query have been fetched. An open query probably keeps the database lock. Maybe.

Beginning of STEP6 would thus look like the following:

```
//STEP 6: If results, update model, show first result.
Model->setQuery(SearchQuery);
while (Model->canFetchMore()) {
   Model->fetchMore();
} 
```

Doesn't hurt to try that, I guess.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:33:48.353

奇怪的是，去掉这行代码后代码运行良好：

```
 ui->listView->scrollTo(index); 
```

# objective-c - 为什么UI在主线程上绘制？

> ID：10948069
> 
> 赞同：2
> 
> 时间：2012-06-08T11:35:15.493
> 
> 标签：objective-c, ios, macos

所有 UIKit 绘图或 AppKit 绘图都在主线程上完成是否有原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:37:19.830

这是所有 GUI 绘图在单个线程上完成的主要模式，访问屏幕以添加元素和绘图不是多线程过程

想象一下，你有 10 个线程，每个线程都试图在屏幕上绘制和/或移动元素，这会产生不确定的错误和问题，这些问题很难处理和/或发现

还在这里阅读更多[为什么大多数 UI 框架都是单线程的？](https://stackoverflow.com/questions/5544447/why-are-most-ui-frameworks-single-threaded)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T14:43:56.583

“因为多线程绘图很快变得太复杂/令人困惑”只是答案的一半。

多线程 UI 管理的另一个主要障碍是事件处理。具体来说，将事件处理混合到并发绘图中。您必须以某种方式将绘图与猴子在屏幕/键盘/鼠标上的混乱混合在一起，同时有效地保持事务完整性的概念。

如果没有并发，这已经很难了。

# .net - 我可以从 HttpModule 实例中放弃 InProc ASP.NET 会话吗

> ID：10948077
> 
> 赞同：2
> 
> 时间：2012-06-08T11:35:56.313
> 
> 标签：.net, session, c#-3.0, session-state, session-cookies

我正在开发一项功能，我的应用程序将不允许来自同一用户的多次活动登录。当用户从新机器/浏览器登录时，之前的登录无效，用户被重定向到旧机器/浏览器上的登录页面。

我可以通过以下方式实现这一点：
1\. 在 HttpApplicationState 对象中存储登录用户的唯一 sessionid
2\. 每当用户登录时，此会话 id 都会在对象中更新，因此总是有最新的会话 id。
3\. 此会话 ID 也存储在客户端的 cookie 中
4\. 对于客户端发出的每个请求，我将此 cookie 值与应用程序值进行比较，如果不同，我将用户注销。
5\. 为了比较每个请求中的会话 ID，我为事件 OnAuthenticated 创建了一个 HttpModule 对象。

我的问题是，我可以以某种方式放弃我正在注销用户的会话吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:44:13.937

作为替代方案，您可以通过实现自定义逻辑来做同样的事情。

1.  维护当前登录用户的表。
2.  每当用户成功登录时，只需为该用户插入一个新行以及他的用户名/用户 ID 和会话 ID。
3.  检查此表中每个新登录的条目，如果存在，只需注销具有先前会话的用户并用新的 sessionId 替换旧条目，如果不存在，只需执行 #2 即创建新条目。
4.  每次用户注销时，只需从该表中删除他的条目，同时破坏他的会话。
5.  同时删除具有默认会话超时的用户的条目。

或者

*   您可以通过管理`user_login (user_id, login_status, session_id)`所有用户的永久条目的表来执行相同操作，只需更新其字段 ( `login_status (true/false) and session_id (String)`) 而不是插入/删除。

第一种方法会减少表中的行数，但会增加插入/删除操作，同样会非常频繁地增加表的唯一 ID。

第二种方法作为更新操作的第一个原因对 DB 的命中率相同，但行数将固定为等于应用程序用户数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:43:33.710

您可以在临时 HttpHandler 中实现 IRequireSessionState，这将为您提供当前会话。这是一个提供完整来源的 SO 问题/答案。

[我可以从 HTTPModule 访问会话状态吗？](https://stackoverflow.com/questions/276355/can-i-access-session-state-from-an-httpmodule)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:58:49.730

您可以使用[HttpContext.Current.Session](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.session.aspx)并从 HttpModule 调用 HttpContext.Current.Session.Abandon() ，假设您将在 Session 对象初始化之后调用的事件中使用 Session ，例如[HttpApplication.PreRequestHandlerExecute](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.prerequesthandlerexecute.aspx)。

# c++ - 模板类的方法使用全局范围的 typedef。编译器错误？

> ID：10948079
> 
> 赞同：2
> 
> 时间：2012-06-08T11:36:04.127
> 
> 标签：c++, templates, visual-c++

我在 VC2010 中有一个代码，我将其简化为一个小例子。

`Test.h:`

```
#pragma once

template <typename TPixel>
struct Image
  {
  typedef TPixel PixelType;
  };

template <typename TImageType>
struct Operation
  {
  void DoOperation()
    {
    ImageType::PixelType value = 0;   
// I've done a misprint here. It should be TImageType::PixelType
    }
  }; 
```

`Test.cpp:`

```
void Test()
  {
  typedef Image<char> ImageType;

  Operation<ImageType> op;
  op.DoOperation();
  } 
```

正如我所料，这会产生错误。

`test.h(14): error C2653: 'ImageType' : is not a class or namespace name`

现在，让我们`test.cpp`稍微改变一下。

```
typedef Image<char> ImageType;

void Test()
  {
  Operation<ImageType> op;
  op.DoOperation();
  } 
```

现在它编译了！令人惊讶的是，`ImageType`in`DoOperation()`现在与全局 typedef in 匹配`test.cpp`。

我的问题：为什么要编译？这是 Visual C++ 错误还是标准行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:42:12.757

我认为它`test.cpp`包含`test.h` *在*typedef 之前，所以它实际上是

```
#include "test.h"
typedef Image<char> ImageType;

void Test()
  {
  Operation<ImageType> op;
  op.DoOperation();
  } 
```

像这样完成，它确实是一个错误，或者关于两阶段查找的标准不合格行为。不依赖于模板参数的名称应该相对于模板的声明点进行解析。

[我想这是已知的行为](https://stackoverflow.com/questions/6273176/what-exactly-is-broken-with-microsoft-visual-cs-two-phase-template-instanti)。

# javascript - 在 iOS 的 ajax 响应中播放 html5 音频

> ID：10948081
> 
> 赞同：1
> 
> 时间：2012-06-08T11:36:05.633
> 
> 标签：javascript, ios, mobile-safari, html5-audio

经过大量的谷歌搜索和研究，我发现 iOS 阻止了 html5 音频和视频的自动播放。音频和视频只能作为对点击事件的响应来播放。

现在，我还有另一个问题。我经营一个音乐网站，里面有很多用户生成的播放列表。单击播放后，我发出 ajax 请求以获取曲目 URL，然后加载并播放它们。iOS 不将此视为播放音乐的同步单击事件，因此单击播放按钮时音乐不会开始播放。我必须单击播放器控件的暂停和播放按钮才能开始播放（基本上只使用 pause() 和 play()）。

我只是想不出该怎么办。在点击事件之前预先加载所有 MP3 URL 是不可行的。有没有其他方法可以完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:18:27.747

好的，经过一番胡闹和研究，我发现一键获取和播放播放列表的唯一方法是使用同步请求而不是 AJAX 请求。该页面将在请求加载时冻结，但这似乎是唯一的出路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-03T07:53:45.990

我知道这是一个古老的问题，但对于遇到这个问题的人来说，有一个简单的解决方案，即直接从点击处理程序播放短而无声的声音。理想情况下，这将是您已经获取并缓存的声音文件。

之后，您将能够从其他处理程序开始播放，即使是那些没有直接用户交互的处理程序。（例如您的 AJAX/XHR 响应）

# c# - 使用 LINQ 读取基于 where 子句的 CDATA 部分

> ID：10948084
> 
> 赞同：1
> 
> 时间：2012-06-08T11:36:15.093
> 
> 标签：c#, linq-to-xml, cdata

我正在尝试根据 where 子句读取 xml 节点的 CDATA 部分。

```
<Book>
  <BookItem ISBN="SKS84747"><![CDATA[20]]> </BookItem>
  <BookItem ISBN="LHKGOI84747"><![CDATA[50]]> </BookItem>
  <BookItem ISBN="PUOT84747"><![CDATA[20]]> </BookItem>
</Book> 
```

这段代码给了我所有的 CDATA 部分，

```
var value = from v in x.Descendants("BookItem").OfType<XCData>()
                                select (string)v.Value; 
```

如何根据 ISBN 放置 where 子句？如何使用 LINQ to XML 读取此 CDATA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:44:28.943

```
var value = x.DescendantNodes().OfType<XCData>()
                .Where(m => m.Parent.Name == "BookItem" && m.Parent.Attribute("ISBN").Value == "PUOT84747")
                .ToList(); 
```

或者

在 ToList() 之前

```
.Select(cdata => cdata.Value.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:52:29.263

```
var xml = Resource1.String1;
var doc = XDocument.Parse(xml);
var isbn = "SKS84747";
var query = string.Format("BookItem[@ISBN='{0}']", isbn);
var book = doc.Root.XPathSelectElement(query);

if (book != null)
    Console.WriteLine(book.Value); 
```

或者

```
var book =
    doc.Root.Descendants("BookItem").Where(
        x => x.Attribute("ISBN") != null && x.Attribute("ISBN").Value == isbn).Select(x => x.Value).
        FirstOrDefault(); 
```

或者

```
var book = (from item in doc.Root.Descendants("BookItem")
            where item.Attributes("ISBN").Any() && item.Attribute("ISBN").Value == isbn
            select item.Value).FirstOrDefault(); 
```

# selenium - Selenium Web Driver - 登录事件未启动

> ID：10948085
> 
> 赞同：0
> 
> 时间：2012-06-08T11:36:15.903
> 
> 标签：selenium, webdriver

我正在使用 Selenium Web 驱动程序进行测试，但无法通过登录页面。我正在使用的代码：

```
driver.Navigate().GoToUrl(baseURL + "URL");
driver.FindElement(By.Id("loginForm:username")).SendKeys("uName");
driver.FindElement(By.Id("loginForm:password")).SendKeys("pass");
driver.FindElement(By.Id("loginForm:login")).Click(); 
```

元素定位器是正确的并且正在发生登录点击，但之后我没有登录，但页面只是卡在那里 - 没有错误或其他东西。相同的代码在 IDE 中工作。

我正在使用 IE9，并且设置也有所更改：

```
 var options = new InternetExplorerOptions();
            options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
            driver = new InternetExplorerDriver(options); 
```

任何建议如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:41:55.123

这种情况经常发生在我身上，但不确定你是否也是同样的原因。

当您在本地运行测试时，所有操作（`sendkeys`等`click`）都会很快发生。该`loginForm:login`按钮可以保持禁用状态，直到用户在字段中输入文本`loginForm:username`和`loginForm:password`. 因此，单击该按钮`loginForm:login`时可能未处于活动状态。

因此，我建议`loginForm:login`在单击之前使用显式等待来检查元素 id 是否显示。 *这一步基本上没有用，但它所做的只是在“发送密钥”到密码文本框字段和单击提交之间浪费一些时间。*

此外，为了快速检查，您还可以在输入密码后和单击登录按钮之前执行类似于`sleep 2`（使脚本休眠 2 秒）的操作。

如果你最终打算在远程机器上运行它，你不需要做以上两个步骤中的任何一个，机器之间的通信造成的时间延迟足以让整个过程顺利进行。

（同样的问题出现在linkedin登录页面——除非输入用户名和密码，否则登录按钮被禁用，但是webdriver执行每一步的速度，登录按钮在被点击时是不活动的。）

# android - Android - 显示视图时需要回调

> ID：10948092
> 
> 赞同：10
> 
> 时间：2012-06-08T11:36:51.217
> 
> 标签：android, view

android 中的 View 类是否有等效于 Dialog.setOnShowListener() 的方法？

我需要它，因为当我在紧跟 someViewGroup.addView(foo) 的行中的视图（比如 foo）上调用 getLocationOnScreen 时，我得到 location = (0,0)。

我不能使用活动的任何生命周期方法，因为添加 foo 正在运行（按下按钮）。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-08T11:43:20.043

您应该使用 ViewTreeObserver：

```
someViewGroup.addView(foo)    

ViewTreeObserver vto = someViewGroup.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {

            ///getLocationOnScreen here

            ViewTreeObserver obs = someViewGroup.getViewTreeObserver();
            obs.removeGlobalOnLayoutListener(this);
        }
    }); 
```

# ios - 找到 UISlider 指向的方向

> ID：10948093
> 
> 赞同：1
> 
> 时间：2012-06-08T11:36:52.330
> 
> 标签：ios, xcode, cocoa-touch, uiview, uislider

我有一个`UIView`包含自定义的类`UISlider`。当它`UIView`被添加到 viewController 时，它使用随机旋转

```
newSlider.transform = CGAffineTransformRotate(newSlider.transform, degreesToRadians(random)); 
```

现在我想要做的是动画从`UISlider`滑块末端飞出的拇指图像。我面临的问题是获取滑块开始/结束的坐标，以便我可以计算出拇指图像的移动方式。

我试过使用`trackRectForBounds`，但它给了我完全相同的坐标，不管旋转应用于`UIView`

我在`UIView`课堂上尝试过这些：

```
CGRect trackRect = [customSlider trackRectForBounds:customSlider.bounds]; 
```

和

```
CGRect trackRect2 = [customSlider trackRectForBounds:self.window.bounds]; 
```

无论旋转如何，它都会给我 {{2, 1}, {288, 50}} 和 {{2, 215}, {316, 50}}。我认为它给了我来自`UIView`而不是屏幕的矩形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:20:33.107

获取滑块的端点可以这样完成：

![在此处输入图像描述](../Images/e1156abfd522aeabd900f04c043e42d5.png)

```
CGFloat rotation = [[newSlider.layer valueForKeyPath:@"transform.rotation.z"] floatValue];

CGFloat halfWidth = newSlider.bounds.size.width/2;
CGPoint sliderCenter = newSlider.center;
sliderCenter.y += newSlider.bounds.size.height/2; //this shouldn't be needed but it seems it is

CGFloat x1 = sliderCenter.x - halfWidth * cos(rotation);
CGFloat x2 = sliderCenter.x + halfWidth * cos(rotation);

CGFloat y1 = sliderCenter.y - halfWidth * sin(rotation);
CGFloat y2 = sliderCenter.y + halfWidth * sin(rotation);

CGPoint T1 = CGPointMake(x1, y1);
CGPoint T2 = CGPointMake(x2, y2); 
```

# javascript - 您知道 Google Docs Javascript 如何自动刷新间隔数据吗？

> ID：10948094
> 
> 赞同：4
> 
> 时间：2012-06-08T11:36:53.437
> 
> 标签：javascript, jquery, ajax, design-patterns

好吧，就这样吧：

我目前正在实现一个软件，该软件通过使用 AJAX 自动刷新/自动拉动/自动重新加载数据以保持屏幕实时。

这实际上是有效的，但我知道我使用了最简单的方法：

1.  设置间隔 (javascript)
2.  每 n 秒调用一次 Refresh 方法。
3.  读取 Json 数据，重建 HTML 并更新它。

这也可以通过调用 SetTimeOut (javascript) 并结束 AJAX 请求来完成。

在刷新方法中，我在内部检查它是否被同时调用，等等。

但是......这是最简单的方法，它可以工作，但是在慢速计算机、firefox 和 ie 中，我可以看到这个活动有时会冻结浏览器，我知道这可能不是必需的，因为*AJAX 调用*，但是“密集" 是整体的 javascript 操作......但是，在运行分析器之后，整体 javascript（顺便使用 jquery）似乎很好。此外，如果我禁用自动刷新，浏览器不会在慢速计算机中冻结几秒钟。

我决定研究几个主要的 AJAX 应用程序是如何工作的。

例如 Facebook .. 他们每 N 秒**都会**发出一个请求，解释 JSON 并更新屏幕，但是，谷歌文档...我似乎可以找到任何请求.. 这可能是因为：他们只是在告诉javascript 调试器引擎，他们不希望他们的请求被记录？？或者，他们是否使用另一种方法来解决刷新困境？

我在 stackoverflow 上阅读了另一个答案，即 Google Docs 保持开放连接。

这可以是答案吗？[http://ajaxpatterns.org/HTTP_Streaming](http://ajaxpatterns.org/HTTP_Streaming)

你们对此有什么了解？

顺便说一句，我正在开发的应用程序旨在同时被成千上万的用户访问，我知道 JavaScript 刷新例程只讲述了历史的一小部分，但服务器端应用程序和数据库是根据我使用数千个虚拟化站所做的压力测试，目前支持这样的负载。我只想知道您对**客户端**浏览器问题的具体看法。

问候，如果您仍在阅读本文。谢谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:40:46.253

我怀疑他们正在使用[WebSockets](http://en.wikipedia.org/wiki/WebSocket)。浏览器支持不稳定，因此您的里程可能会因这种方法而异。

您可能还想查看[APE](http://www.ape-project.org/)（ajax 推送引擎），它是使用客户端/服务器架构的长轮询的一个不错的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:40:37.057

您可以阅读[Long Polling](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)。但是你必须处理掉线等。

# delphi - 在应用程序加载时显示模态表单之前确保主窗体已最大化并完全重绘的正确方法

> ID：10948096
> 
> 赞同：12
> 
> 时间：2012-06-08T11:36:57.817
> 
> 标签：delphi, maximize

在应用程序首次加载时显示模式窗体之前，确保主窗体完全最大化并重绘所有控件的推荐方法是什么？

我需要在应用程序启动时显示一个模态对话框（不是登录屏幕），但如果我将表单设置为`wsMaximized`屏幕最大化，控件就没有机会重绘，你就会留下一个丑陋的烂摊子。

我目前使用以下内容显示模态屏幕：

```
procedure TForm1.FormActivate(Sender: TObject);
var
  frmOrderLookup:TfrmOrderLookup;
begin
  onactivate := nil;
  frmOrderLookup:=TfrmOrderLookup.Create(nil);
  try
    frmOrderLookup.showmodal;
  finally
    frmOrderLookup.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T12:24:09.323

我通常做的是将自定义消息发布回我的表单。这样，在表单的其他消息已经被处理之前，它不会被处理。在处理此消息时，您的表单应该已经完成​​重绘。

```
type
  TMyForm = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    procedure HandleLookupMessage(var Message: TMessage); message WM_USER + 1;
  end;

procedure TMyForm.HandleLookupMessage(var Message: TMessage);
var
  frmOrderLookup: TfrmOrderLookup;
begin
  frmOrderLookup := TfrmOrderLookup.Create(Application);
  try
    frmOrderLookup.ShowModal;
  finally
    frmOrderLookup.Release;
  end;
end;

procedure TMyForm.FormCreate(Sender: TObject);
begin
  // Maximise form here if needed
  PostMessage(Handle, WM_USER + 1, 0, 0);
end; 
```

如果您担心消息会以某种方式再次到达您的应用程序，您可以随时添加一个私有布尔变量来指示它已被处理过一次。

# file-upload - 如何在转换为.tmp时使用struts2应用程序读取excel文件

> ID：10948098
> 
> 赞同：0
> 
> 时间：2012-06-08T11:37:15.157
> 
> 标签：file-upload, struts2, jxl, import-from-excel

这是我的 JSP 页面...上传 EXCEL 文件...我需要上传 2 个不同的 excel 文件以执行不同的操作...我希望我的标签是不言自明的...

```
<body>
<s:actionerror />
<s:fielderror />
<s:form action="Admin" method="post" enctype="multipart/form-data" theme="simple">
<big>Import Batch and Tan Details</big>
<br>
<s:file name="uploadToBatch" label="Select a Excel File for Batch import" />
<s:submit action="ImportBatchAndTanDetailsAdmin" value="Import" />
<br>
<big>Allocate Batch</big>
<br>
<s:file name="uploadToAllocate" label="Select a Excel File for Allocation" />
<s:submit action="AllocateAdmin" value="Allocate" onclick=""/>
</s:form>
</body> 
```

接下来是我对这两个动作的 strut.xml 配置...

```
<action name="*Admin" method="{1}" class="controller.AdminAction">
            <interceptor-ref name="fileUpload">
                <param name="maximumSize">2572864</param>
                <param name="allowedTypes">application/ms-excel,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</param>
            </interceptor-ref> 
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="error">adminPage.jsp</result>
            <result name="input">adminPage.jsp</result>
            <result name="success">adminPage.jsp</result>
        </action> 
```

接下来是动作课……

```
package controller;

import java.io.File;
import jxl.Sheet;
import jxl.Workbook;
import com.opensymphony.xwork2.ActionSupport;

@SuppressWarnings("serial")
public class AdminAction extends ActionSupport {

    private File uploadToBatch;//The actual file
    private File uploadToAllocate;
    private String uploadContentType; //The content type of the file
    private String uploadFileName; //The uploaded file name
    AuthorIndexingDAO DAO = new AuthorIndexingDAO();

    //getters and setters... 
    public File getUploadToBatch() {
        return uploadToBatch;
    }
    public void setUploadToBatch(File uploadToBatch) {
        this.uploadToBatch = uploadToBatch;
    }
    public File getUploadToAllocate() {
        return uploadToAllocate;
    }
    public void setUploadToAllocate(File uploadToAllocate) {
        this.uploadToAllocate = uploadToAllocate;
    }
    public String getUploadContentType() {
        return uploadContentType;
    }
    public void setUploadContentType(String uploadContentType) {
        this.uploadContentType = uploadContentType;
    }
    public String getUploadFileName() {
        return uploadFileName;
    }
    public void setUploadFileName(String uploadFileName) {
        this.uploadFileName = uploadFileName;
    }

     //ececute method...

    public String execute (){
         return SUCCESS;
     }

     //other methods....
     public String ImportBatchAndTanDetails(){

         try {

                Workbook w;

                    w = Workbook.getWorkbook(uploadToBatch);
                    Sheet sheet = w.getSheet(0);
                    System.out.println(sheet.getName());

                    } catch (Exception e) {
                            e.printStackTrace();
                            System.out.println(e.getMessage());
                            addActionError(e.getMessage());

                    return ERROR;

                    }

         return SUCCESS;
     }

public String Allocate(){

         try {

             System.out.println(uploadFileName);
             System.out.println(uploadToAllocate.getName());

                Workbook w;

                    w = Workbook.getWorkbook(uploadToAllocate);
                    Sheet sheet = w.getSheet(0);
                    System.out.println(sheet.getName());

                    } catch (Exception e) {
                        e.printStackTrace();
                     return ERROR;

                    }

         return SUCCESS;
     }

} 
```

当我导入时，我在控制台中得到了这个......

```
null
upload__6e26fdaa_137cba00800__8000_00000001.tmp 
```

附近抛出的异常`w = Workbook.getWorkbook(uploadToAllocate);`是......

```
jxl.read.biff.BiffException: Unable to recognize OLE stream
    at jxl.read.biff.CompoundFile.<init>(CompoundFile.java:116)
    at jxl.read.biff.File.<init>(File.java:127)
    at jxl.Workbook.getWorkbook(Workbook.java:221)
    at jxl.Workbook.getWorkbook(Workbook.java:198)
    at controller.AdminAction.Allocate(AdminAction.java:154)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:314)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:142)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:166)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:314)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:485)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:07:18.197

我找到了原因。我导入的 excel 没有以正确的方式创建，当我复制内容并将其粘贴到新的 excel 中并保存时，似乎是这样。后来当我导入这个新的excel时它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T05:33:20.543

您使用过 jxl api，jxl 仅支持 .xls 扩展名和更旧的扩展名，它不支持更新的扩展名，例如 .xlsx 您应该使用不兼容的扩展名很可能是 .xlsx 这就是为什么
'jxl.read.biff.BiffException: Unable to identify抛出 OLE 流 ' 异常。只需尝试使用扩展名为 .xls 的文件，或者不使用 jxl api 使用 poi。

# .net - Visual Studio 2010：无法创建到 SQL Server Compact 4.0 的新连接

> ID：10948110
> 
> 赞同：1
> 
> 时间：2012-06-08T11:38:02.663
> 
> 标签：.net, visual-studio-2010, sql-server-ce

我刚刚在我的 Windows 7 机器上安装了[SQL Server Compact Edition](http://en.wikipedia.org/wiki/SQL_Server_Compact) 4.0。（请注意，我已经在机器上安装了 SQL Server Compact 3.5 SP2）。

但是，在我的 Visual Studio 2010 项目中，我无法创建与 SQL Server Compact Edition 4.0 数据库的新连接...即 - 通过执行以下操作：

*   在服务器资源管理器中，右键单击“数据连接”
*   “添加连接”
*   “更改数据源” - Microsoft SQL Server Compact 4.0 不是一个选项（仅限 3.5 版）

如何让 Visual Studio 2010 了解我已安装的 Microsoft SQL Server Compact 4.0 副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:42:10.190

看

*   [Visual Studio 2010 SP1 和 Visual Web Developer Express 2010 SP1 中的 SQL Server Compact 4.0 工具支持](http://blogs.msdn.com/b/sqlservercompact/archive/2011/03/15/sql-server-compact-4-0-tooling-support-in-visual-studio-2010-sp1-and-visual-web-developer-express-2010-sp1.aspx)

和

*   [发布了支持 SQL Server Compact 4.0 的 Visual Studio 2010 Service Pack 1](http://erikej.blogspot.ch/2011/03/visual-studio-2010-service-pack-1-with.html)

你有安装VS2010 SP1吗？

如果没有 -[从这里下载](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

# php - 如何检查时间戳中的小时数是否在特定的小时数范围内？

> ID：10948111
> 
> 赞同：-2
> 
> 时间：2012-06-08T11:38:03.657
> 
> 标签：php, datetime, timestamp

> **可能重复：**
> [如何将 Unix 时间戳转换为 hhmmss？](https://stackoverflow.com/questions/4578204/how-to-convert-unix-timestamp-to-hhmmss)

我的时间戳格式为：

```
1330559989 
```

如何检查时间戳中的小时数在 6 小时到 23 小时之间？

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:39:32.777

`date('H', 1330559989)`将以 24 小时格式为您提供带前导零的小时数，在此示例中：`23`.

还有一个用于时间戳小时的特定函数，[`getdate`](http://php.net/getdate)它为该信息提供了一个数组接口（[demo](http://codepad.viper-7.com/fo3S1o)）：

```
getdate(1330559989)['hours']; # 23 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:43:06.317

```
$hrs=date('H', 1330559989);
if ($hrs>= 6 && $hrs<= 23) {
  // your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:40:21.213

如果要检查从现在到给定时间戳之间的时间，则可以使用：

```
<?php
    echo date("H", strtotime(now)-1330559989); // Displays the difference from now.
    echo date("H", 1330559989); // Displays that time!
?> 
```

希望这可以帮助！:)

# javascript - 将 PHP preg_match 转换为 javascript

> ID：10948113
> 
> 赞同：1
> 
> 时间：2012-06-08T11:38:04.717
> 
> 标签：javascript, regex, preg-match, match

有人可以帮我转换一下吗

```
preg_match('/^(.*?)[#,\.0]+(.*?)$/',$patterns[0],$matches) 
```

成 Javascript 等价物？我试着做

```
matches = patterns[0].match('/^(.*?)[#,\.0]+(.*?)$/') 
```

但这导致空...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T11:43:16.830

从正则表达式中删除引号

```
matches = patterns[0].match(/^(.*?)[#,\.0]+(.*?)$/); 
```

# c# - ajaxtoolkit AutoCompleteExtender 不工作

> ID：10948115
> 
> 赞同：0
> 
> 时间：2012-06-08T11:38:08.057
> 
> 标签：c#, asp.net, autocomplete, textbox

试图让自动完成功能在文本框中工作，但似乎方法背后的代码永远不会触发。任何人都可以从下面看到问题吗？我尝试了各种示例/教程但没有效果。

```
<asp:ScriptManager ID="SM1" runat="server"></asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel" runat="server">
        <ContentTemplate>
            <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
            <ajaxToolkit:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" TargetControlID="txtUserName" ServiceMethod="GetCompletionList"
            MinimumPrefixLength="2" CompletionInterval="10" EnableCaching="true" CompletionSetCount="3" UseContextKey="True">
            </ajaxToolkit:AutoCompleteExtender>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

后面的代码：

```
[System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethod()]
public static string[] GetCompletionList(string prefixText, int count, string contextKey)
{
   string connectionString = ConfigurationManager.ConnectionStrings["WMSDatabase"].ConnectionString;
   SqlConnection conn = new SqlConnection(connectionString);
   // Try to use parameterized inline query/sp to protect sql injection
   SqlCommand cmd = new SqlCommand("SELECT TOP " + count + " Alias FROM dbo.Users WHERE Alias LIKE '" + prefixText + "%'", conn);
   SqlDataReader oReader;
   conn.Open();
   List<string> CompletionSet = new List<string>();
   oReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
   while (oReader.Read())
   CompletionSet.Add(oReader["Alias"].ToString());
   return CompletionSet.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:59:15.773

**尝试从您的代码中删除更新面板：**

```
<asp:ScriptManager ID="SM1" EnablePageMethods="true" runat="server"></asp:ScriptManager>
            <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
            <ajaxToolkit:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" TargetControlID="txtUserName" ServiceMethod="GetCompletionList"
            MinimumPrefixLength="2" CompletionInterval="10" EnableCaching="true" CompletionSetCount="3" UseContextKey="True">
            </ajaxToolkit:AutoCompleteExtender> 
```

# android - Android：真实背景中的形状

> ID：10948118
> 
> 赞同：0
> 
> 时间：2012-06-08T11:38:29.423
> 
> 标签：android, xml, background, styles, shape

我使用一个形状作为我活动的背景。看起来不错，但仅适用于〜90％，因为形状位于按钮或文本视图等某些元素上。

有些按钮显示正确，但有些按钮看起来像是在形状的背景中？！

问候

代码： http: [//pastie.org/private/xxrgz6gqjnk1ufjyc6ms6a](http://pastie.org/private/xxrgz6gqjnk1ufjyc6ms6a)

# matlab - 带注释的散点图 matlab/octave

> ID：10948119
> 
> 赞同：1
> 
> 时间：2012-06-08T11:38:29.533
> 
> 标签：matlab, graph, plot, octave

我有 25 对 (x,y) 坐标。这些对中的每一对都对应一个国家。我想在散点图上绘制 25 个点，并将每个点的国家名称直接放在散点图上的点旁边。我不知道如何在 MATLAB 或 Octave 中执行此操作（我同时拥有 MATLAB 和 Octave 并且不介意我使用哪个，这就是我询问两者的原因）。

假设我将 (x,y) 坐标和相应的国家/地区标签放在 25 行和 3 列的矩阵中，标签位于第一列。有谁知道我可以用于所需图表的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:31:46.390

字符串不能很好地与矩阵一起使用，所以我正在稍微调整你的存储格式。这是测试数据：一个 25x2 的坐标矩阵和一个 25x1 的字符串元胞数组。

```
p = rand(25,2);
names = repmat({'name'}, 25, 1) 
```

您将不得不稍微使用偏移量，但这是一个想法：

```
scatter(p(:,1), p(:,2))
%# Compute some offsets for the lower-left of the text box, based
%# on overall size of the plot
offset_x = diff(xlim) * .01;
offset_y = diff(ylim) * .01;
text(p(:,1)+offset_x, p(:,2)+offset_y, names) 
```

# opengl - 在 OpenSceneGraph 的运行时更新纹理

> ID：10948124
> 
> 赞同：2
> 
> 时间：2012-06-08T11:38:55.133
> 
> 标签：opengl, glsl, openscenegraph

我正在做一个项目，我需要从外部设备视频中捕获帧并在 openSceneGraph 节点上渲染它们。我也在使用 GLSL 着色器。但我不知道如何在运行时更新纹理。对于其他制服，我们需要进行回调，但我们是否还需要为 glsl 和 openSceneGraph 中的采样器进行回调？

我的代码看起来像这样。我现在得到的只是一个黑色的窗口。

```
osg::ref_ptr<osg::Geometry> pictureQuad = osg::createTexturedQuadGeometry(osg::Vec3(0.0f,0.0f,0.0f),
    osg::Vec3(_deviceNameToImageFrameMap[deviceName].frame->s(),0.0f,0.0f), osg::Vec3(0.0f,0.0f,_deviceNameToImageFrameMap[deviceName].frame->t()),
    0.0f, 1.0f,_deviceNameToImageFrameMap[deviceName].frame->s(), _deviceNameToImageFrameMap[deviceName].frame->t()); 

    //creating texture and setting up parameters for video frame
    osg::ref_ptr<osg::TextureRectangle> myTex= new osg::TextureRectangle(_deviceNameToImageFrameMap[deviceName].frame.get());
    myTex->setFilter(osg::Texture::MIN_FILTER,osg::Texture::LINEAR);
    myTex->setFilter(osg::Texture::MAG_FILTER,osg::Texture::LINEAR);
    myTex->setWrap(osg::Texture::WRAP_S, osg::Texture::CLAMP_TO_EDGE);
    myTex->setWrap(osg::Texture::WRAP_T, osg::Texture::CLAMP_TO_EDGE);

    _videoSourceNameToNodeMap[sourceName].geode = new osg::Geode();
    _videoSourceNameToNodeMap[sourceName].geode->setDataVariance(osg::Object::DYNAMIC);
    _videoSourceNameToNodeMap[sourceName].geode->addDrawable(pictureQuad.get());

    //apply texture to node
    _videoSourceNameToNodeMap[sourceName].geode->getOrCreateStateSet()->setTextureAttributeAndModes(0, myTex.get(), osg::StateAttribute::ON);
    _videoSourceNameToNodeMap[sourceName].geode->getOrCreateStateSet()->setMode(GL_DEPTH_TEST, osg::StateAttribute::OFF);
    _videoSourceNameToNodeMap[sourceName].geode->setDataVariance(osg::Object::DYNAMIC);

    //Set uniform sampler
    osg::Uniform* srcFrame   = new osg::Uniform( osg::Uniform::SAMPLER_2D, "srcFrame" );
    srcFrame->set(0);
    //Set Uniform Alpha
    osg::Uniform* alpha   = new osg::Uniform( osg::Uniform::FLOAT, "alpha" );
    alpha->set(.5f);
    alpha->setUpdateCallback(new ExampleCallback());

    //Enable blending
    _videoSourceNameToNodeMap[sourceName].geode->getOrCreateStateSet()->setMode( GL_BLEND, osg::StateAttribute::ON);
    //Adding blend function to node
    osg::BlendFunc *bf = new osg::BlendFunc();
    bf->setFunction(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    _videoSourceNameToNodeMap[sourceName].geode->getOrCreateStateSet()->setAttributeAndModes(bf);

    //apply shader to quad
    _videoSourceNameToNodeMap[sourceName].geode->getOrCreateStateSet()->setAttributeAndModes(program, osg::StateAttribute::ON);
    //add Uniform to shader
    _videoSourceNameToNodeMap[sourceName].geode->getOrCreateStateSet()->addUniform( srcFrame );
    _videoSourceNameToNodeMap[sourceName].geode->getOrCreateStateSet()->addUniform( alpha ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:19:31.717

只需调用`image->dirty()`，所有使用该图像的纹理都会自动更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T02:09:41.467

您不需要这样做，`bf->setFunction(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`因为这是默认功能。

# iphone - 获取几周的第一天和最后一天

> ID：10948128
> 
> 赞同：0
> 
> 时间：2012-06-08T11:39:15.077
> 
> 标签：iphone, objective-c

我需要制作一个日历，用户可以在其中滚动几周。一周的第一天和最后一天将显示为（例如）“6 月 4 日 - 6 月 10 日”。

现在我从一开始就知道我需要`NSDate`and `NSCalendar`，实际上我设法得到了这周的第一天和最后一天，但它看起来非常麻烦，我相信需要一个更简单的方法，因为我需要获取未来几周和过去几周的日期。这是我的代码，它给出了本周的第一天和最后一天的和`day`：`month`

```
 NSDate *today = [NSDate date];
    NSCalendar* cal = [NSCalendar currentCalendar];
    NSDateComponents* comp = [cal components:(NSWeekdayCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSYearCalendarUnit|NSDayCalendarUnit|NSHourCalendarUnit) fromDate:[NSDate date]];

    NSDate *beginOfWeek = [today dateByAddingTimeInterval: -1*([comp weekday]-2)*24*3600];
    NSDate *endOfWeek = [today dateByAddingTimeInterval:(7-[comp weekday]+2)*24*3600];

    NSLog(@"beginWeekDay=%d\n",[[cal components:(NSWeekdayCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSDayCalendarUnit) fromDate: beginOfWeek] day]);
    NSLog(@"endWeekDay=%d\n",[[cal components:(NSWeekdayCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSDayCalendarUnit) fromDate: endOfWeek] day]);
    NSLog(@"beginWeekmonth=%d\n",[[cal components:(NSWeekdayCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSDayCalendarUnit) fromDate: beginOfWeek] month]);
    NSLog(@"endWeekmonth=%d\n",[[cal components:(NSWeekdayCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSDayCalendarUnit) fromDate: endOfWeek] month]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:00:07.927

我发现了这个，可能对你有帮助：http: [//www.cocoanetics.com/2009/11/add-one-week-skip-weekend/](http://www.cocoanetics.com/2009/11/add-one-week-skip-weekend/)

```
- (NSDate *)addWeekToDateAndSkipWeekend:(NSDate *)now {
int daysToAdd = 6; // we'll add the 7th later

// set up date components
NSDateComponents *components = [[[NSDateComponents alloc] init] autorelease];
[components setDay:daysToAdd];

// create a calendar
NSCalendar *gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];

NSDate *newDate = [gregorian dateByAddingComponents:components toDate:now options:0];

[components setDay:1]; // reuse to skip single days
NSDateComponents *newDateComps; // new componets to get weekday

// do always executed once, so we add the 7th day here
do
{
    // add one day
    newDate = [gregorian dateByAddingComponents:components toDate:newDate options:0];
    newDateComps = [gregorian components:NSWeekdayCalendarUnit fromDate:newDate];

    // repeat if the date is Saturday (7) or Sunday (1)
    NSLog(@"weekday: %d", [newDateComps weekday]);
} while (([newDateComps weekday]==7)||([newDateComps weekday]==1));

return newDate;
} 
```

从理论上讲，您在带有 [NSDate date] 的 for 循环中运行它，您将获得`7th`返回的日期，然后您将通过此运行返回的`7th`日期并获得下一个......等等。

可能需要稍作改动，如果您不需要它，请删除周六+周日的检查。

希望这可以帮助 ！

# excel - 使用打开的 xml sdk 检索单元格值问题

> ID：10948129
> 
> 赞同：0
> 
> 时间：2012-06-08T11:39:19.713
> 
> 标签：excel, vsto, openxml-sdk, vba

我遇到了与名为“Libro1.xlsx”的 excel 2007 文件相关的以下问题。在这个文件中，我已经将第一张表中的单元格 A1 设置为“hello world”，id 为“rId1”，单元格 A2 设置为“500”。

在下面的代码中，您将看到我正在访问此工作表的每一行和单元格。我得到单元格 A2 = 500 的内容作为输出，但不是 A1 单元格的内容（我得到“0”作为值）。

这是我使用的代码：

```
' Open the document for editing.
        Dim ficheroexcel As SpreadsheetDocument = SpreadsheetDocument.Open(Server.MapPath("Libro1.xlsx"), True)
        Try
            Dim libroconhojas As WorkbookPart = ficheroexcel.GetPartsOfType(Of WorkbookPart).First()
            Dim hoja1 As WorksheetPart = libroconhojas.GetPartById("rId1")
            Dim hoja2 As WorksheetPart = libroconhojas.GetPartById("rId2")
            Dim hoja3 As WorksheetPart = libroconhojas.GetPartById("rId3")
            'hoja.SingleCellTablePart
            Dim hojadatos1 As SheetData = hoja1.Worksheet.GetFirstChild(Of SheetData)()
            Dim hojadatos2 As SheetData = hoja2.Worksheet.GetFirstChild(Of SheetData)()
            Dim hojadatos3 As SheetData = hoja3.Worksheet.GetFirstChild(Of SheetData)()

            Dim fila As Row
            Dim celda As Cell
            For Each fila In hojadatos1.Elements(Of Row)()
                For Each celda In fila.Elements(Of Cell)()
                    Response.Write("texto:" + celda.InnerText + "</br>")
                Next
            Next
            Dim algo = ""
        Catch ex As Exception

        Finally
            ficheroexcel.Close()
        End Try 
```

您是否知道为什么我没有在 A1 单元格上设置文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:54:40.627

Excel 使用[SharedStringTable](http://msdn.microsoft.com/en-us/library/gg278314.aspx)来存储非数值。检查示例方法

> 字符串 XLGetCellValue（Excel.Cell c，WorkbookPart wbPart）

[在这里](http://msdn.microsoft.com/en-us/library/ff519529.aspx)使用 ShareStringTable

# django - Django模型中的抽象继承，导致MAX递归深度错误

> ID：10948132
> 
> 赞同：9
> 
> 时间：2012-06-08T11:39:39.230
> 
> 标签：django, inheritance, recursion, depth

我正在尝试使用以下代码在 Django 中实现抽象继承，但它会产生 MAX 递归深度错误。我正在尝试覆盖模型的`save`方法。

```
class BaseModel(models.Model):
    class Meta:
        abstract = True

    def save(self, *args, **kwargs):
        #i'm doing something here

        #i think the problem is in the return statement specifically because of the
        #self.__class__ expression.
        return super(self.__class__, self).save(*args, **kwargs)

class MyModel(BaseModel):
    p = models.CharField(max_length=30) 
```

产生此错误（跟踪结束，很长）：

```
 File "/home/jultra/ap3w/jultra_01/mysite/testsite/models.py", line 10, in save
    return super(self.__class__, self).save(*args, **kwargs)
  File "/home/jultra/ap3w/jultra_01/mysite/testsite/models.py", line 10, in save
    return super(self.__class__, self).save(*args, **kwargs)
  File "/home/jultra/ap3w/jultra_01/mysite/testsite/models.py", line 10, in save
    return super(self.__class__, self).save(*args, **kwargs)
  File "/home/jultra/ap3w/jultra_01/mysite/testsite/models.py", line 10, in save
    return super(self.__class__, self).save(*args, **kwargs)
RuntimeError: maximum recursion depth exceeded 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T11:47:14.533

不要打电话！**_**`super` _ `self.__class__`在实际课程中调用它：

```
return super(BaseModel, self).save(*args, **kwargs) 
```

这是因为`self.__class__`总是指实例的实际具体类。所以如果你继承`MyModel`自`BaseModel`，当你得到`save`方法时`BaseModel` `self.__class__`仍然是`MyModel`。于是找到了MyModel的super，也就是BaseModel，于是在BaseModel中调用save，又找到了MyModel的super……

# .net - 在 .NET MessageBox 上设置最大高度

> ID：10948134
> 
> 赞同：1
> 
> 时间：2012-06-08T11:39:42.750
> 
> 标签：.net, window, messagebox

我将 MessageBox.Show() 与一条巨大的文本消息一起使用，因此消息窗口离开了屏幕。
有谁知道如何通过固定窗口的最大高度来避免这种丑陋的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:40:57.187

您应该创建一个自定义表单来显示自定义大小的 MessageBox。

我知道你有 WinForms，但我在我的 WPF 项目中做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:48:33.977

很确定 MessageBox 是固定大小的。可以将 Window.ShowDialog() 用于模式窗口。

# android - 导航选项卡

> ID：10948136
> 
> 赞同：0
> 
> 时间：2012-06-08T11:39:48.383
> 
> 标签：android, android-layout

我正在编写一个应用程序，我想在其中遵循最新的 android 设计指南。现在我想在 4.0 中使用 TABS，不再建议使用 TabWidgets，建议使用导航选项卡我检查了这个[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html) - 在导航选项卡

但我真的不明白我怎么能做到这一点。不知道在哪里包含这个 ActionBar.TabListener 等。有没有更详细的教程或者这里有没有人有任何详细的代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:51:12.283

这是使用操作栏的一个很好的例子：

[http://www.java2s.com/Code/Android/UI/Usingactionbartabsandhowtheyinteractwithotheractionbarfeatures.htm](http://www.java2s.com/Code/Android/UI/Usingactionbartabsandhowtheyinteractwithotheractionbarfeatures.htm)

这里还有一些很好的例子：

[Actionbarsherlock + 选项卡 + 多片段？](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:52:27.360

检查此[ActionBarSharelock和](http://actionbarsherlock.com/)[Github](https://github.com/JakeWharton/ActionBarSherlock)上的相同内容。

# c# - 为什么在列表上调用 Sort(IComparer) 时会出现 System.ArgumentException？

> ID：10948141
> 
> 赞同：6
> 
> 时间：2012-06-08T11:40:14.450
> 
> 标签：c#, list, sorting, exception

我使用自己的 IComparer 对列表进行排序，并且在运行应用程序（XNA 游戏）超过一个小时时效果很好。但是，突然之间，在使用自定义比较器调用排序方法时，有时会出现以下错误：

```
An unhandled exception of type 'System.ArgumentException' occured in mscorlib.dll
Additional Information: ArgumentException 
```

这是引发异常的行：

```
List<Continent> markets = new List<Continent>();
// filling the markets list ...
markets.Sort(new MarketCostCoverComparer(this)); 
```

这是我实现 IComparer 接口的类：

```
class MarketCostCoverComparer : IComparer<Continent> { 

    private Player player; 

    public MarketCostCoverComparer(Player player) { 
        this.player=player; 
    } 

    public int Compare(Continent c1, Continent c2) { 
        if(player.GetCostCovering(c1)<player.GetCostCovering(c2)) { 
            return +1; 
        } else if(player.GetCostCovering(c1)==player.GetCostCovering(c2)) { 
            return 0; 
        } else { 
            return -1; 
        } 
    } 

} 
```

这里有一些链接到比较器的方法......：

```
public float GetCostCovering(Continent continent) {
        // cover<1 => bad | cover>1 => good
        if(GetOilfieldTheoreticOutput(continent.Type, true)<continent.Economy.CurrentDemand) {
            return ((float)((GetOilfieldTheoreticOutput(continent.Type, true)*continent.Economy.CurrentPrice)))/(float)GetOilfieldCosts(continent.Type, true);
        } else {
            return ((float)((continent.Economy.CurrentDemand*continent.Economy.CurrentPrice)))/(float)GetOilfieldCosts(continent.Type, true);
        }
    }

public int GetOilfieldTheoreticOutput(ContinentType continent, bool drilled) {
        int total = 0;
        foreach(Oilfield oilfield in worldmap.Continents[(int)continent].Oilfields) {
            if(oilfield.Owner==this && oilfield.Drilled==drilled) {
                total+=oilfield.TheoreticOutput;
            }
        }
        return total;
    }

public int GetOilfieldCosts(ContinentType continent, bool drilled) {
        int total = 0;
        foreach(Oilfield oilfield in worldmap.Continents[(int)continent].Oilfields) {
            if(oilfield.Owner==this && oilfield.Drilled==drilled) {
                total+=oilfield.Costs;
            }
        }
        return total;
    } 
```

这是异常的屏幕截图：

![mscorlib.dll 中出现“System.ArgumentException”类型的未处理异常](../Images/2c98b637a25ad48a3932655902b9eef8.png)

这里仔细看看 Locals/Stack-Trace（这是一个旧的屏幕截图，但我会在接下来的几个小时内尝试重现这个异常，以便我可以展开跟踪）：

![在此处输入图像描述](../Images/61a74b49062c29a04e90254cc6fe94a4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T12:12:13.900

问题是您的 IComparer 的实现。它可以返回不一致的结果，所以排序函数会抛出异常。

也许看看[这个](https://stackoverflow.com/questions/1026044/list-sort-in-c-comparer-being-called-with-null-object)和[这个问题](https://stackoverflow.com/questions/384632/when-will-a-comparer-make-sort-throw-an-argumentexception)以获取更多信息。

问题：

特性`continent.Economy.CurrentDemand`和`continent.Economy.CurrentPrice`无副作用吗？

评论：

您的 IComparer 应该能够处理**null**。从[文档](http://msdn.microsoft.com/en-us/library/system.collections.icomparer.compare)：

> 允许将 null 与任何类型进行比较，并且在使用 IComparable 时不会生成异常。排序时，null 被认为小于任何其他对象。

也许这是一个浮点问题，但这只是一个疯狂的猜测。所以也许你应该使用`decimal`而不是`float`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:11:28.687

这是我从史蒂夫（来自 XNA 论坛）那里得到的另一个答案：

显然，当您不为两个相同的对象返回 0 时，可能会发生这种情况。当它们都引用同一个对象时，GetCostCovering(c1) 是否有可能在任何时候都不等于 GetCostCovering(c2)？

为了安全起见，试着把 if (c1 == c2) return 0; 在 Compare 方法的开头，看看效果如何。

非常感谢史蒂夫！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T11:54:52.103

如果我没记错的话，如果第一个参数小于第二个参数，IComparer.Compare 应该返回小于零。您在实现中似乎做了相反的事情，这可以解释异常。我无法解释为什么它在这次失败之前工作了很长时间......

# asp.net-mvc - Azure 上的 MVC4 部署问题

> ID：10948144
> 
> 赞同：5
> 
> 时间：2012-06-08T11:40:22.513
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure, asp.net-mvc-4

我在使用 Azure 时遇到了一个奇怪的问题！

我最近刚刚将我的 azure 部署站点从**MVC3 升级到 MVC4**。我通过创建一个全新的 MVC4 项目来做到这一点，它只使用 Nuget 包，所以应该是“可部署的”？我只复制了根目录和 Views 文件夹中 Web.config 的基本部分。

在本地一切正常，但在部署到 Azure 后，我发现该角色卡在“忙碌”状态，但网站可以正常工作！它还自发地回收实例（我猜测是因为它的忙碌状态）。

我在部署中添加了 Intellitrace，它抱怨这个引用不存在：

由于以下异常，无法加载角色入口点：

-- System.IO.FileLoadException: 无法加载文件或程序集 'System.Web.Mvc, Version=3.0.0.0'

我不知道它为什么要在 4 项目中加载 MVC 版本 3 引用。我在 Web.configs 中搜索了对 3.0.0.0 的任何引用，并且该项目的引用似乎很好。

请帮忙！我可以采取任何额外的调试步骤吗？

**谢谢！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T05:22:12.897

这似乎与[http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/9c2f6b62-185d-4a38-8bb5-eda1917604d9](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/9c2f6b62-185d-4a38-8bb5-eda1917604d9)是同一个问题。正如另一个线程中指出的那样：

您是否配置了程序集重定向？如果您使用 MVC 4 Web 角色（现在在 SDK 1.7 中支持）创建一个新的 Windows Azure 项目，您将看到以下重定向：

```
 <dependentAssembly>
     <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
     <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
   </dependentAssembly> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:03:30.453

我假设您已将 System.Web.Mvc 引用的复制本地设置为 true，因此它被复制到您的部署包中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:38:48.113

我有同样的问题将我的项目上传到 Azure，另外我分别做了你的推荐，

所以有必要为我的项目创建一个启动任务，然后我为这个启动任务生成脚本。检查您的托管服务，我的托管服务是 windows Server R2，所以我更改了我的 ServiceConfiguration.Cloud.cscfg 文件**。OsFamily**属性更改为“<strong>1”为“<strong>2”。

您可以在此链接中找到更多信息：[Windows Azure 启动任务](http://blogs.msdn.com/b/vitolo/archive/2013/01/03/windows-azure-startup-tasks.aspx)，它是用意大利语编写的，但您可以将其翻译成英语。

# coronasdk - 在 corona sdk 中创建不同的形状？

> ID：10948146
> 
> 赞同：-2
> 
> 时间：2012-06-08T11:40:29.723
> 
> 标签：coronasdk

在我的应用程序中，我必须为我的字体使用不同形状的曲线。如果可以创建不同的形状。像这样的曲线形状..我必须在电晕中制作涂鸦字体，例如：http://www.graffiticreator.net/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:06:47.140

看看文字糖果！ [http://www.x-pressive.com/TextCandy_Corona/](http://www.x-pressive.com/TextCandy_Corona/)

# wpf - DataTrigger 似乎没有触发

> ID：10948149
> 
> 赞同：1
> 
> 时间：2012-06-08T11:40:39.000
> 
> 标签：wpf, datatrigger, coloranimation

我想创建一个数据触发器，使我的页面闪烁（从透明到红色）。所以我创建了一个 DataTrigger 来监听我的视图模型中的一个布尔标志。该标志应指示何时需要提醒用户。在这种情况下，我的页面将从透明闪烁到红色。

我很确定我已经以正确的方式实现了数据触发器，但是我的应用程序什么也没做 - 没有错误，没有闪烁......所以我一定错过了一些东西。

```
<Style x:Key="ReminderPage" TargetType="{x:Type ViewTemplates:TpApplicationBarView}" BasedOn="{StaticResource TpApplicationBarViewStyle}">
    <Style.Triggers>

        <!-- Reminder animation, when the time comes to remind the user -->
        <DataTrigger Binding="{Binding IndicateReminderAnimation}" Value="True">
            <DataTrigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard x:Name="Blink">
                        <ColorAnimation Storyboard.TargetProperty="(Background).(SolidColorBrush.Color)" 
                                        AutoReverse="True" 
                                        From="Transparent" 
                                        To="Red" 
                                        Duration="0:0:1" 
                                        RepeatBehavior="Forever">
                        </ColorAnimation >
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
        </DataTrigger>

        <DataTrigger Binding="{Binding IndicateReminderAnimation}" Value="False">
            <DataTrigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard>
                        <ColorAnimation Storyboard.TargetProperty="(Background).(SolidColorBrush.Color)" 
                                        AutoReverse="False" 
                                        To="Transparent" 
                                        Duration="0:0:1">
                        </ColorAnimation >
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

那么，我做错了什么？

**更新：**我可以在输出窗口中看到以下消息：

```
System.Windows.Media.Animation Warning: 6 : Unable to perform action because 
the specified Storyboard was never applied to this object for interactive control.;        
Action='Stop'; Storyboard='System.Windows.Media.Animation.Storyboard'; 
Storyboard.HashCode='61356140'; Storyboard.Type='System.Windows.Media.Animation.Storyboard'; 
TargetElement='System.Windows.Media.Animation.Storyboard'; TargetElement.HashCode='61356140'; 
TargetElement.Type='System.Windows.Media.Animation.Storyboard' 
```

**Update2：**在谷歌搜索后，我发现这是 UI 线程的问题。因此，每当我设置绑定属性时，我都会进行调度程序调用。但即使有这个技巧，也没有彩色动画。但是输出窗口中的错误似乎消失了。因此，我正在寻找有关如何修复动画的更多想法。

**Update3：**设置页面的背景颜色似乎是一个普遍的问题。但这真的很奇怪。页面放置在 NavigationFrame 中。设置导航框架的背景颜色会改变应用程序的颜色，但是设置页面的背景颜色（即使没有任何动画）不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:18:17.663

我认为你将不得不设置动画目标，像这样 -

```
Storyboard.TargetName="yourWindowName" 
```

您可能已经检查了这一点，但请确保将正确的对象设置为您的 TpApplicationBarView 的 DataContext（具有 IndicateReminderAnimation 属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:25:41.107

我发现了这个错误 - 或者更好的是两个错误。

1.) 似乎无法更改放置在导航框架内的页面的背景颜色。

所以首先是将绑定和事件移动到 MainWindow 本身（wpf 窗口类）

2.) 包含数据触发器的样式不起作用。在谷歌搜索之后，我找到了我正在寻找的工作解决方案。

```
<Storyboard x:Key="RemindUser" >
    <ColorAnimation Storyboard.TargetProperty="(Background).(SolidColorBrush.Color)" 
                    AutoReverse="True" 
                    From="Transparent" 
                    To="{StaticResource WinAccentBackgroundColor}" 
                    Duration="0:0:1" 
                    RepeatBehavior="Forever">
    </ColorAnimation >
</Storyboard>

<Storyboard x:Key="StopRemindUser">
    <ColorAnimation Storyboard.TargetProperty="(Background).(SolidColorBrush.Color)" 
                    AutoReverse="True" 
                    To="Transparent" 
                    Duration="0:0:1">
    </ColorAnimation >
</Storyboard>

<Style x:Key="ReminderWindow" TargetType="{x:Type Metro:SnappedTransparentWindow}" BasedOn="{StaticResource TransparentWindow}">
    <Style.Triggers>

        <!-- Reminder animation, when the time comes to remind the user -->
        <DataTrigger Binding="{Binding IndicateReminderAnimation}" Value="True">
            <DataTrigger.EnterActions>
                <BeginStoryboard Storyboard="{StaticResource RemindUser}"/>
            </DataTrigger.EnterActions>
            <DataTrigger.ExitActions>
                <BeginStoryboard Storyboard="{StaticResource StopRemindUser}"/>
            </DataTrigger.ExitActions>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

关键是将装订和故事板分成不同的部分。

# mysql - MySQL查询缓存问题

> ID：10948150
> 
> 赞同：1
> 
> 时间：2012-06-08T11:40:40.090
> 
> 标签：mysql, query-cache

我对 MySQL 运行了以下 sql：

```
SHOW STATUS LIKE 'Qcache%'; 
```

这是我得到的：

```
Qcache_free_blocks  0
Qcache_free_memory  0
Qcache_hits 0
Qcache_inserts  0
Qcache_lowmem_prunes    0
Qcache_not_cached   0
Qcache_queries_in_cache 0
Qcache_total_blocks 0 
```

我不明白为什么会这样，因为我确实仔细检查了查询缓存是否已启用属性，如下所示：

```
SHOW VARIABLES LIKE 'have_query_cache';

Variable_name   Value
have_query_cache    YES 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:54:45.287

你读过[MySQL 查询缓存配置页面](http://dev.mysql.com/doc/refman/5.6/en/query-cache-configuration.html)吗？

例如

> 使用标准 MySQL 二进制文件时，此值始终为 YES，即使禁用查询缓存也是如此。

或者

> 要设置查询缓存的大小，请设置 query_cache_size 系统变量。将其设置为 0 将禁用查询缓存。默认大小为 0，因此默认禁用查询缓存。为了显着减少开销，如果您不使用查询缓存，还请使用 query_cache_type=0 启动服务器。

# google-maps - 获取许多坐标的高程

> ID：10948151
> 
> 赞同：2
> 
> 时间：2012-06-08T11:40:42.500
> 
> 标签：google-maps, coordinates, elevation

我有一个包含许多经纬度的文本文件，我正在尝试获取它们的高度。我找到了一个已经这样做的网站，但一次只需要 500 个，我有 100 万个点。有没有做这种事情的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:39:07.027

谷歌地图 API 海拔服务仅限于防止滥用。有公开的高程数据：

[http://www2.jpl.nasa.gov/srtm/](http://www2.jpl.nasa.gov/srtm/)

创建自己的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T15:24:21.420

您也可以使用 geonames.org。您可以购买商业帐户以获得更高的速率限制。geonames.org 提供的服务之一是来自 SRTM 数据的海拔。见[http://www.geonames.org/export/web-services.html](http://www.geonames.org/export/web-services.html)

# android - 如何将数据从 NextActivity 取回 CurrentActivity？

> ID：10948158
> 
> 赞同：1
> 
> 时间：2012-06-08T11:41:03.777
> 
> 标签：android

我有 2 个活动 FirstActivity，SecondActivity。MyActivity 扩展 Activity。在我的 FirstActivity 中，有一个包含子视图和组视图的 ExpandableListView。groupview 包含 3textviews 和 2 imageviews。onclick firstImage 我必须去 SecondActivity。在 secondActivity 中，我可以添加一些行，最后单击“完成”按钮，它应该连同在 SecondActivity 中添加的行数据一起返回到 FirstActivity，并且那些 SecondActivity 行应该添加到 FirstActivity 中的特定选定行。 ..

我该怎么做……？

有谁能帮帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:45:46.227

*   用于`startActivityForResult()`启动第二个 Activity。
*   您将在第一个活动中从第二个活动到第一个活动获得结果`onActivityResult()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:52:39.250

在第一个活动开始活动为

```
startActivityForResult(this,YourscondActivity.class); 
```

并在 fristActivity 中覆盖 menthod `onActivityResult()`。您在哪里获得第二个活动的数据。

在完成之前的第二个活动中设置结果并在那里添加数据，例如

```
Intent i=new Intent();
i.putExtra("key ","your data"); and then
setResult(i);
secondActivity.finish(); 
```

你在 firstActivity 中得到的这个意图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:53:33.540

使用[意图](http://developer.android.com/reference/android/content/Intent.html)。

从活动 A 到 B ::

```
Intent intent = new Intent(A.this, B.class);
startActivityForResult(intent, REQUESTCODE); 
```

从活动B，向A发送数据::

```
Intent intent = getIntent();
intent.putExtra(KEY1, DataTosend1);
intent.putExtra(KEY2, DataTOSend2);

 finish(); 
```

再次，`onActivityResult()`A班内部

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent intent)
{
     if(  requestCode == REQUESTCODE  )
     {
            ////////// use intent.get<Type>Extra(KEY) to receive data sent by B /////////

     }
} 
```

# c# - 如何在两台计算机之间建立 TCP 通信并使用套接字通过端口发送消息

> ID：10948159
> 
> 赞同：-3
> 
> 时间：2012-06-08T11:41:07.833
> 
> 标签：c#, sockets, tcp, communication

我必须使用 TCP 通信在两个系统之间进行通信，并使用 C# 中的 sokects 通过端口发送或接收数据

但在客户端系统上显示错误“现有连接被远程主机强制关闭”。

请帮我........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:46:18.847

因为你没有指定语言...

C： [http ://beej.us/guide/bgnet/output/html/singlepage/bgnet.html](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)

Python： [http ://www.tutorialspoint.com/python/python_networking.htm](http://www.tutorialspoint.com/python/python_networking.htm)

Perl： [http ://www.linuxjournal.com/article/3237](http://www.linuxjournal.com/article/3237)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:47:12.890

C#：[http](http://board.gulli.com/thread/1698283-c-peer-to-peer-chat/) ://board.gulli.com/thread/1698283-c-peer-to-peer-chat/这里有一个示例代码，如果你这样问，我们帮不了你更多

# php - php preg_replace € 用“欧元”符号

> ID：10948176
> 
> 赞同：0
> 
> 时间：2012-06-08T11:42:49.033
> 
> 标签：php, preg-replace, simplexml, special-characters, str-replace

在添加到 xml 文件之前，我想将 $XML_COMMENT 中的 € 符号替换为“欧元”。

€ 符号不是我从 simplexml 获得的 utf-8 字符和错误消息

```
Warning: SimpleXMLElement::addAttribute(): string is not in UTF-8 in ...
Warning: SimpleXMLElement::asXML(): output conversion failed due to conv error, bytes 0x82 0x26 0x61 0x6D in .... 
```

欧元符号在 MySQL (utf-8) 数据库中显示为“€”

但正确显示在网页的文本区域中。

我尝试使用这些不同的 str_replace

```
$XML_COMMENT=str_replace('€','euros',$XML_COMMENT)
$XML_COMMENT=str_replace('â‚¬','euros',$XML_COMMENT)
$XML_COMMENT=str_replace(chr(128),'euros',$XML_COMMENT)
$XML_COMMENT=str_replace(chr(0xE2).chr(0×82).chr(0xAC),'euros',$XML_COMMENT)
$XML_COMMENT=str_replace(chr(0x82).chr(0x26).chr(0x61).chr(0x6D),'euros',$XML_COMMENT) 
```

没有成功

仅供参考：我在任何地方都使用 utf-8（MySQL、网页和 XML）

这是我的代码

```
// ? : $XML_COMMENT= "bla bla bla â‚¬ bla bla bla";
// ? : $XML_COMMENT= "bla bla bla € bla bla bla";
// expected : $XML_COMMENT= "bla bla bla euros bla bla bla";

$ProductLog_XML = simplexml_load_file($file);
$ProductUpdate = $ProductLog_XML->order->product->addChild('update');
$ProductUpdate->addAttribute('comment',$XML_COMMENT);
$fp=fopen(file, "w");
fwrite($fp, $ProductLog_XML->asXML());
fclose($fp); 
```

有没有使用 regex / preg_replace 的替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:55:05.640

我遇到了同样的问题，以下对我有用，其中原始 HTML 页面采用 UTF-8 并使用 &euro，在使用 PHP 进行 cURL 处理后吐出为“â‚¬”

```
$nodeValue = str_replace(chr(0xE2).chr(0x82).chr(0xAC), "", $nodeValue) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T11:51:48.250

您可以尝试`htmlentities()`转换包括欧元符号在内的所有实体，使它们看起来像`&euro;`.

我会以下列方式使用它：`htmlentities($str, ENT_QUOTES|"ENT_HTML401", "UTF-8", true)`

您可以选择使用：`htmlentities($XML_COMMENT, ENT_QUOTES | ENT_IGNORE, "UTF-8", true)`。有关标志更改的完整说明，请访问下面的链接。根据 OP @baptme 的要求（见评论）。

来源：[php.net 参考](http://php.net/manual/en/function.htmlentities.php)

# javascript - jQuery：查找包含两个具有特定文本的单元格的表格行

> ID：10948182
> 
> 赞同：0
> 
> 时间：2012-06-08T11:43:11.913
> 
> 标签：javascript, jquery

我有一个包含两列代码的表格。我将它们命名`Main Code`为`Sub Code`. 当用户填写它们并按下键，更改包含和的行时，我有 2 个用于在表中**搜索**的文本框。我看到这个话题：`Enter``background-color``Main Code``Sub Code`

[查找包含包含特定文本的表格单元格的表格行](https://stackoverflow.com/questions/6135665/jquery-find-table-row-containing-table-cell-containing-specific-text)

但它不知道如何检查 2 个单元而不是一个单元。请帮助我

谢谢

**编辑 1)**

这是我的表的一个例子：

```
<table border="1" cellpadding="0" cellspacing="0" style="width: 400px; text-align: center;">
    <tr style="background-color:Aqua">
        <th style="width: 25%">
            Main Code</th>
        <th style="width: 25%">
            Sub Code</th>
        <th style="width: 25%">
            ID</th>
        <th style="width: 25%">
            Desc</th>
    </tr>
    <tr>
        <td style="width: 25%">
            10000</td>
        <td style="width: 25%">
            1</td>
        <td style="width: 25%">
            454</td>
        <td style="width: 25%">
            some Desc</td>
    </tr>
    <tr>
        <td style="width: 25%">
            10000</td>
        <td style="width: 25%">
            2</td>
        <td style="width: 25%">
            123</td>
        <td style="width: 25%">
            some</td>
    </tr>
    <tr>
        <td style="width: 25%">
            10001</td>
        <td style="width: 25%">
            1</td>
        <td style="width: 25%">
            454</td>
        <td style="width: 25%">
            some</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:58:54.537

```
 searchTerm1 = $('input.maincode').val();
    searchTerm2 = $('input.subcode').val();
    $("td:contains("+searchTerm1+")")
        .siblings()
        .filter(":contains("+searchTerm2+")").parent('tr').css('background','yellow'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:37:34.207

[http://jsfiddle.net/JrrDn/47/](http://jsfiddle.net/JrrDn/47/)

代码可能有点混乱，但这个概念是成立的。基本上，您想遍历每个 tr 并检查 nth-child(1) 和 nth-child(2) 是否是您要查找的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T12:13:47.960

为此使用jquery：

```
 $('table th:contains("Main Code")').parent().css('background-color', 'red'); 
 $('table th:contains("Sub Code")').parent().css('background-color', 'red'); 
```

# c# - 对文本文件的数据进行排序并将其写入c#中的另一个文本文件

> ID：10948189
> 
> 赞同：-2
> 
> 时间：2012-06-08T11:43:38.677
> 
> 标签：c#

我想对文本文件中的数据进行排序并将其保存到另一个文本文件中

这是我的文本文件“employee.txt”我想使用“员工代码”对数据进行排序

员工代码：107 名字：swapnil 姓氏：dehjhja 电话号码：6727672

* * *

员工代码：106 名字：fhsgbf 姓氏：dehjhja 电话号码：909888

* * *

员工代码：102 名字：xyz 姓氏：dehjhja 电话号码：098778

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:47:31.667

您需要将数据导入到可排序的实体中，在您的集合（即`List<T>`）上调用 sort 方法，然后将数据导出为您想要的任何格式。

对于导入/导出的东西，我推荐 FileHelpers lib [http://www.filehelpers.com/downloads.html](http://www.filehelpers.com/downloads.html)

对于排序的东西，`IComparable<>`在您的实体上实施。

ICompable 的示例：

```
using System;
using System.Collections;
public class Person : IComparable<Person>
{
    #region Private Members
    private string _firstname;
    private string _lastname;
    private int _age;
    #endregion
    #region Properties
    public string Firstname
    {
        get { return _firstname; }
        set { _firstname = value; }
    }
    public string Lastname
    {
        get { return _lastname; }
        set { _lastname = value; }
    }
    public int Age
    {
        get { return _age; }
        set { _age = value; }
    }
    #endregion
    #region Contructors
    public Person (string firstname, string lastname, int age)
    {
        _firstname = firstname;
        _lastname = lastname;
        _age = age;
    }
    #endregion
    public override string ToString()
    {
        return String.Format(“{0} {1}, Age = {2}“, _firstname,
             _lastname, _age.ToString());
    }
    #region IComparable Members
    public int CompareTo(Person obj)
    {
        return _firstname.CompareTo(p2.Firstname);
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:02:55.213

对于文件的读/写，您可以简单地使用[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)将行读入字符串数组，并[使用 File.WriteAllLines](http://msdn.microsoft.com/en-us/library/92e05ft3.aspx)将它们写回文件。这些函数将处理文件的所有打开/关闭，因此您不必这样做。

为了处理排序，我们可以使用 LINQ 中的[orderby 关键字](http://msdn.microsoft.com/en-us/library/92e05ft3.aspx)和静态辅助函数`GetEmployeeCode`来获取 EmployeeCode。我们可以如下定义我们的辅助函数：

```
public static int GetEmployeeCode(string line)
{
    // Get the substring starting after "Employee code:"
    // ... and stopping at the first space.
    string employeeCode = line.Substring(14).Split(' ')[0];
    int code;
    Int32.TryParse(employeeCode, out code);
    return code;
} 
```

然后，以下代码将按 EmployeeCode 对文件中的所有行进行升序排序，然后将它们写入新文件：

```
string[] lines = File.ReadAllLines(@"C:\original.txt");

// Sort the rows in lines by EmployeeCode
lines = (from line in lines
        orderby GetEmployeeCode(line) ascending
        select line).ToArray();

File.WriteAllLines(@"C:\sorted.txt", lines); 
```

# php - PHP：发送邮件后邮件正文不完整？

> ID：10948193
> 
> 赞同：0
> 
> 时间：2012-06-08T11:43:56.337
> 
> 标签：php, email

我正在使用此代码发送我的邮件：

```
public function sendMail($receiver, $subject, $message){

    $header = "Content-type: text/html";

    mail($receiver, $subject, $message, $header);
} 
```

邮件已发送，但稍后打开邮件时内容（$message）不完整。它的文字很长，但这可能是原因吗？为什么邮件会被截断？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:47:51.617

在标题条目的末尾使用换行符

```
$header = "From: ...\n";
$header .= "Content-type: text/html\n";
mail($receiver, $subject, $message, $header); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T23:40:59.813

我不知道你是怎么把它填满的，但是缺少一个基本参数，分配标题等。

请参阅此处的[功能](http://php.net/manual/en/function.mail.php)`mail()`说明。对于 HTML 的自动换行，如果您在一行中有 HTML 内容，请使用该功能 - 防止剪切消息。`wordwrap()`

示例代码：

```
$from   = "one@mail.com";
$mailto = "two@mail.com";
$reply  = "three@mail.com";

$subject = "Test";
$message = "<html><body><strong>TEST</strong><p>Bla bla bla</p></body></html>";

$headers  = "MIME-Version: 1.0\n";
$headers .= "Content-Type: text/html; charset=UTF-8\n";
$headers .= "Content-Transfer-Encoding: 7bit\n";
$headers .= "From: $from\nReply-To: $reply\n";

$check = mail($mailto, $subject, $message, $headers);

if ($check) { echo "OK"; } else { echo "ERROR"; } 
```

示例发送功能：

```
function sendmail($receiver, $subject, $message) {

  $from = "mail@mail.com"; // sender mail

  $headers  = "MIME-Version: 1.0\n";
  $headers .= "Content-Type: text/html; charset=UTF-8\n";
  $headers .= "Content-Transfer-Encoding: 7bit\n";
  $headers .= "From: $from\n";

  $check = mail($receiver, $subject, $message, $headers);

  if ($check) { return true; } else { return false; }  
} 
```

或扩展样本发送功能：

```
function sendmail($receiver, $subject, $message) {

  $from_mail = "mail@mail.com"; // sender mail
  $from_name = "Sender Mail"; // mail name

  $from = '=?UTF-8?B?'.base64_encode($from_name).'?= <'.$from_mail.'>';

  $headers  = "MIME-Version: 1.0\n";
  $headers .= "Content-Type: text/html; charset=UTF-8\n";
  $headers .= "Content-Transfer-Encoding: 7bit\n";
  $headers .= "From: $from\n";

  $check = mail($receiver, '=?UTF-8?B?'.base64_encode($subject).'?=', wordwrap($message,76,"\n"), $headers);

  if ($check) { return true; } else { return false; }  
} 
```

`base64_encode()`预防性转换输入字符，适用于扩展的 ASCII 代码或其他非标准字符（变音符号、语标等）。

`wordwrap()`发送前预防性拆分 HTML 内容，仅适用于单行的 HTML 内容。标准是每行 76 个字符（见[chunk_split](http://php.net/manual/en/function.chunk-split.php)），SMTP 服务器应该支持每行至少 1024 个字符，如果没有，应该自己设置。

# jquery - 重装超大！幻灯片过渡错误

> ID：10948194
> 
> 赞同：0
> 
> 时间：2012-06-08T11:43:56.993
> 
> 标签：jquery, supersized

我在使用 Supersized 时遇到问题！插件和替换图像。我遇到的问题是，当我重新加载幻灯片时，从幻灯片到幻灯片的转换速度会呈指数级增长。

要复制问题，请单击项目导航，然后单击子菜单项，然后它会加载下一个幻灯片放映，每次单击一个时，每次转换都会跳过更多幻灯片。

这是网站[http://www.liquidvision.co.uk/clients/wattsconstruction/](http://www.liquidvision.co.uk/clients/wattsconstruction/)

这是影响的主要代码：

我创建图像数组：

```
var homeImages = [  
                    {image : 'img/1.jpg', title : '', thumb : 'img/thumbs/1.jpg', url : ''},
                    {image : 'img/2.jpg', title : '', thumb : 'img/thumbs/2.jpg', url : ''},
                    {image : 'img/3.jpg', title : '', thumb : 'img/thumbs/3.jpg', url : ''},
                    ];

var home = $.makeArray(homeImages);

var secondImages = [    
                    {image : 'img/4.jpg', title : '', thumb : 'img/thumbs/4.jpg', url : ''},
                    {image : 'img/5.jpg', title : '', thumb : 'img/thumbs/5.jpg', url : ''},
                    {image : 'img/6.jpg', title : '', thumb : 'img/thumbs/6.jpg', url : ''},
                    ];

var second = $.makeArray(secondImages); 
```

然后设置主页超大幻灯片

```
$.supersized({

    // Functionality
    slideshow               :   1,          // Slideshow on/off
    autoplay                :   1,          // Slideshow starts playing automatically
    start_slide             :   0,          // Start slide (0 is random)
    stop_loop               :   0,          // Pauses slideshow on last slide
    random                  :   0,          // Randomize slide order (Ignores start slide)
    slide_interval          :   3000,       // Length between transitions
    transition              :   1,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
    transition_speed        :   500,        // Speed of transition
    new_window              :   1,          // Image links open in new window/tab
    pause_hover             :   0,          // Pause slideshow on hover
    keyboard_nav            :   1,          // Keyboard navigation on/off
    performance             :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
    image_protect           :   1,          // Disables image dragging and right click with Javascript

    // Size & Position                         
    min_width               :   0,          // Min width allowed (in pixels)
    min_height              :   0,          // Min height allowed (in pixels)
    vertical_center         :   1,          // Vertically center background
    horizontal_center       :   1,          // Horizontally center background
    fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
    fit_portrait            :   0,          // Portrait images will not exceed browser height
    fit_landscape           :   0,          // Landscape images will not exceed browser width

    // Components                           
    slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
    thumb_links             :   1,          // Individual thumb links for each slide
    thumbnail_navigation    :   0,          // Thumbnail navigation
    slides                  :   home        // Using the home Image array we created

}); 
```

然后创建 restSupersized 函数：

```
function resetSupersized(arr)
{   

    $("#play-button").empty().remove();
    $("#thumb-list").empty().remove();
    $("#thumb-back").empty().remove();
    $("#thumb-forward").empty().remove();

    $("#supersized").fadeOut('fast', function() 
    {

        $('#supersized-loader').empty().remove();
        $('#supersized').empty().remove();
        $('#hzDownscaled').empty().remove();
        $('body').append('<div id="supersized-loader"></div><ul id="supersized"></ul>');

        // Animation complete.
        $("#tray-button").fadeIn();
        $('#thumb-tray').html('<div id="thumb-back"></div><div id="thumb-forward"></div>');

        $.supersized({
           // Functionality
           slideshow            :   1,          // Slideshow on/off
           autoplay             :   1,          // Slideshow starts playing automatically
           start_slide          :   1,          // Start slide (0 is random)
           stop_loop            :   0,          // Pauses slideshow on last slide
           random               :   0,          // Randomize slide order (Ignores start slide)
           slide_interval       :   3000,       // Length between transitions
           transition           :   1,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
           transition_speed     :   500,        // Speed of transition
           new_window           :   1,          // Image links open in new window/tab
           pause_hover          :   0,          // Pause slideshow on hover
           keyboard_nav         :   1,          // Keyboard navigation on/off
           performance          :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
           image_protect        :   1,          // Disables image dragging and right click with Javascript

           // Size & Position                          
           min_width            :   0,          // Min width allowed (in pixels)
           min_height           :   0,          // Min height allowed (in pixels)
           vertical_center      :   1,          // Vertically center background
           horizontal_center    :   1,          // Horizontally center background
           fit_always           :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
           fit_portrait         :   0,          // Portrait images will not exceed browser height
           fit_landscape        :   0,          // Landscape images will not exceed browser width

           // Components                            
            slide_links         :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
            thumb_links         :   1,          // Individual thumb links for each slide
            thumbnail_navigation:   0,          // Thumbnail navigation
            slides              :   arr

        });     

    });

} 
```

然后用我要使用的数组调用函数...即 onClick();

```
resetSupersized(second); 
```

谢谢你的帮助 ;-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:23:02.897

不知道这个答案对你是否仍然有效。我一直在寻找这两个的解决方案，如果你在加载画廊之前和之后查看你的 html，它会变得非常简单。

这个画廊所做的是`<ul>`用你的图像填充一个元素......每次你重新加载你的画廊时，它都会向它添加更多图片而不是删除。

我想你的画廊第一次看起来还不错，当你淡出时，一定要清空你的画廊 div，像这样：

`$('#supersized').html('');`

# google-earth-plugin - 如何使用 google earth api 获取地标的名称？

> ID：10948200
> 
> 赞同：1
> 
> 时间：2012-06-08T11:44:09.623
> 
> 标签：google-earth-plugin

我正在尝试创建一个用户可以管理不同地标的网页。管理基于创建、拖放和删除地标。目前，我已经实现了创建多个地标并拖放它们，但我无法删除它，因为我无法单独识别它们。我正在使用 google earth api examples [1](http://code.google.com/apis/ajax/playground/?#creating_placemarks)，但我找不到这个功能。我想获得不同地标的名称，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:37:44.763

我不完全确定你在这里想要什么，但听起来你想穿过地标并得到它们的名字。为此，您可以使用 var kmlnodes = ge.getFeatures().getChildNodes(); 返回的功能列表遍历 Google 地球插件中的功能。

其中 ge 是您的谷歌地球实例。然后，您可以在列表中的每个节点上调用 getType 以确定哪些是地标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T20:43:59.167

您可以为每个地标分配一个 ID，然后稍后使用它来引用它：

`var placeMark = ge.createPlacemark('uniqueID');`

`getElementByUrl()`然后，如果地标是使用带有 API 的 KML 创建/导入的，或者是使用 API`getElementById()`创建的且未使用KML，则您可以稍后检索地标：

`var placeMark = ge.getElementByUrl('#' + uniqueID)`

`var placeMark = ge.getElementById(uniqueID)`

# c# - asp.net MVC中域和子域之间的会话传输

> ID：10948203
> 
> 赞同：0
> 
> 时间：2012-06-08T11:44:24.070
> 
> 标签：c#, asp.net-mvc, asp.net-membership, form-authentication

这里有一篇文章描述了如何在域和子域之间共享身份验证cookie：[ASP.NET MVC - 跨子域身份验证/成员资格](https://stackoverflow.com/questions/1181556/asp-net-mvc-cross-sub-domain-authentication-membership)

我想要的是在域之间切换用户。例如，两个域有两个 asp_membership 数据库。（子域将在虚拟目录中运行。）现在如果用户 A1 登录到主域，那么在浏览子域时，用户 A1 应该会自动进行身份验证。假设两个数据库中都存在同名用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:54:08.200

There are many solutions out there. But the easier solution is to use the same machine key for the two sites and same hashing algorithm for asp.net membership managements. That will do the trick.

# php - 带有特殊字符的 php preg_split

> ID：10948207
> 
> 赞同：1
> 
> 时间：2012-06-08T11:44:33.637
> 
> 标签：php, regex, preg-split

```
$tags = preg_split('@ @', 'Hello World 1 2  3 45   54', NULL, PREG_SPLIT_NO_EMPTY);
print_r($tags);
$tags = preg_split('/ /', 'Hello World 1 2  3 45   54', NULL, PREG_SPLIT_NO_EMPTY);
print_r($tags);

$tags = preg_split('@/@', '1/2//3', NULL, PREG_SPLIT_NO_EMPTY);
print_r($tags);
$tags = preg_split('/\//', '1/2//3', NULL, PREG_SPLIT_NO_EMPTY);
print_r($tags); 
```

为什么最后一个不起作用？，@与/用于构建php正则表达式的区别到底是什么？

谢谢澄清

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:36:04.240

您正在使用的工具[writecodeonline.com/php](http://writecodeonline.com/php)已损坏。如果您将默认代码更改为

```
echo 'Hello\ World'; 
```

它应该输出`Hello\ World`，而不是`Hello World`像它那样输出。

这解释了为什么`'/\//'`会中断：此工具将其视为`'///'`，这不是有效的正则表达式。但是，双反斜杠被正确解释：`'/\\//'`有效（但那是因为 PHP “看到” `'/\//'`，相当于`'/\\//'`）。

再检查一次：

```
echo strlen('///'), ' ', strlen('/\//'), ' ', strlen('/\\//'); 
```

应该打印`3 4 4`。在[writecodeonline.com/php](http://writecodeonline.com/php)上打印`3 3 4`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:49:58.920

最后一个在我的机器上运行良好（PHP 5.3.10，但应该可以在任何地方运行）：

```
thebod@dockmaster:~/Sites$ php
<?php
$tags = preg_split('/\//', '1/2//3', NULL, PREG_SPLIT_NO_EMPTY);
print_r($tags);
/////////////////
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
) 
```

@ 和 /、#、~ 和 : 之间也没有区别，它们也是用于分隔正则表达式和修饰符的常用字符。查看 php.net 了解更多信息：[http ://de.php.net/manual/en/regexp.reference.delimiters.php](http://de.php.net/manual/en/regexp.reference.delimiters.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:50:21.497

@ 和 / 基本上没有区别，因为您可以使用任何特殊字符进行预匹配。请注意以您使用的相同字符开始和结束

# android - 动画在android中无法正常工作

> ID：10948218
> 
> 赞同：0
> 
> 时间：2012-06-08T11:45:28.640
> 
> 标签：android, listview

我有一个 Veiw，我正在向上移动，它由 RelativeLayout 和 ListView 组成。当视图向上移动时，前一帧仍然存在，这在滚动列表视图时可以看到。我做错了什么请指导。

[http://www.youtube.com/watch?v=iXBR72-ivm0&feature=youtu.be](http://www.youtube.com/watch?v=iXBR72-ivm0&feature=youtu.be)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:06:03.300

尝试设置`android:fillViewport="true"`

# c# - 让 Linq to Sql 使用 ISNULL 而不是 COALESCE 生成 T-SQL

> ID：10948219
> 
> 赞同：12
> 
> 时间：2012-06-08T11:45:32.483
> 
> 标签：c#, linq, tsql, linq-to-sql

我有一个 linq to sql 查询，它返回一些余额非零的订单（实际上，查询有点复杂，但为简单起见，我省略了一些细节）。这个查询也应该返回没有 CardItems 的订单（两个子查询在 T-SQL 中都返回 NULL，比较两个 NULLS 给出 FALSE，所以我将子查询的 NULL 结果值转换为 0 进行比较）。

```
var q = (from o in db.Orders
         where db.Cards(p =>
             p.OrderId == o.Id 
             && p.Sum + (db.CardItems.Where(i => i.IncomeId == p.Id)
                        .Sum(i => (double?)i.Amount) ?? 0) 
                    != (db.CardItems.Where(i => i.DeductId == p.Id)
                        .Sum(i => (double?)i.Amount) ?? 0)
            ).Any()
         select o); 
```

**问题是**，转换表达式 Sum(i => (double?)i.Amount) ?? 0**产生 COALESCE**运算符，这比完全相同的 T-SQL 查询慢十倍，因为其中的子查询将 COALESCE 替换为**ISNULL 。**在这种情况下是否有可能生成 ISNULL ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:40:22.363

以我的经验，哄 linq 生成你想要的 SQL 充其量是一件麻烦事。如果您有一个比 linq 更好的查询实现（工作正常且性能良好），请继续使用它，即使只是针对这个查询。

最快的方法可能是使用`DataContext.ExecuteQuery<TResult>`. 它甚至会为您处理和处理返回的对象，就像 linq 自己生成查询一样。

[http://msdn.microsoft.com/en-us/library/bb361109.aspx](http://msdn.microsoft.com/en-us/library/bb361109.aspx)

许多人宁愿将此 SQL 放在存储过程中，尤其是在生产代码中。然后您只需将存储过程映射到您的 linq 对象中，它的工作方式相同。通常情况下，ScottGu 有一篇关于如何做到这一点的相当详细的帖子：

[http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:23:34.227

由于您假设没有金额的行被求和为零，那么您可以过滤掉没有金额的行，而不必担心 IsNull 或合并。

```
&& p.Sum + (db.CardItems.Where(i => i.IncomeId == p.Id)
                    .Where(i=> i.Amount > 0)
                    .Sum(i => (double?)i.Amount) ?? 0) 
                != (db.CardItems.Where(i => i.DeductId == p.Id)
                    .Where(i=> i.Amount > 0)
                    .Sum(i => (double?)i.Amount) ?? 0) 
```

由于我不知道您的对象，您甚至可以删除强制转换 (double?) 和默认 (??) 运算符

# wordpress - 从 ?param=value 到 /param/value 的 Wordpress 查询字符串格式

> ID：10948225
> 
> 赞同：1
> 
> 时间：2012-06-08T11:45:47.610
> 
> 标签：wordpress, mod-rewrite, url-rewriting, query-string

我已经[像这样](http://www.webopius.com/content/137/using-custom-url-parameters-in-wordpress)向 wordpress 添加了一个查询字符串 var ，现在我需要将符号从 ? 斜线，所以这些

```
http://example.com/myweb/page-1/?param=value
http://example.com/myweb/page-2/?param=value
http://example.com/myweb/page-3/?param2=value 
```

看起来像这样：

```
http://example.com/myweb/page-1/param/value
http://example.com/myweb/page-2/param/value
http://example.com/myweb/page-3/param2/value 
```

我在 .htaccess 中尝试但没有运气，看到[这篇文章解释了它，](http://www.rlmseo.com/blog/passing-get-query-string-parameters-in-wordpress-url/)但我无法使用它，我不擅长正则表达式，这个特定的例子很难调试，所以我很感激一些帮助。

这是我的代码：

```
function add_rewrite_rules($aRules)
{
    $aNewRules = array('page-1/([^/]+)/?$' => 'index.php?pagename=page-1&param=$matches[1]');
    //ALso tried $aNewRules = array('myweb/page-1/([^/]+)/?$' => 'myweb/index.php?pagename=page-1&param=$matches[1]');
    $aRules = $aNewRules + $aRules;
    return $aRules;
}

// hook add_rewrite_rules function into rewrite_rules_array
add_filter('rewrite_rules_array', 'add_rewrite_rules'); 
```

谢谢

# c# - 代码中的控制边界实体

> ID：10948226
> 
> 赞同：1
> 
> 时间：2012-06-08T11:45:56.397
> 
> 标签：c#, design-patterns, model-view-controller, uml, iconix

Boundary, Entity, Control class and ICONIX process and Robustness Diagrams有很多文字。但是没有实际的代码示例，我们如何在代码中实现控制类？这是我的代码示例，我想检测此代码中的控件类在哪里？

类：

Program_Boundary : 边界类

人：实体

人：实体（因为它有 CRUD 操作）

控制类在哪里？此示例是否有控制类：

```
class Program_Boundary // BoundaryClass
{
    static void Main(string[] args)
    {
        People people = new People();
        Person person;
        for (int i = 0; i < 5; i++)
        {
            Console.WriteLine("Enter name:");
            string name = Console.ReadLine();
            Console.WriteLine("Enter family:");
            string family = Console.ReadLine();
            person = new Person(name, family);
            people.Add(person);
        }
    }
}
class People //Entity Class
{
    List<Person> person_list = new List<Person>();
    public People()
    {

    }
    public void Add(Person person)
    {
        person_list.Add(person);
    }
    public void Delete(string name, string family)
    {
        for (int i = 0; i < person_list.Count; i++)
            if (person_list[i].name == name && person_list[i].family == family)
                person_list.Remove(person_list[i]);
    }
    public void Update(string name, string family, string new_name, string new_family)
    {
        for (int i = 0; i < person_list.Count; i++)
            if (person_list[i].name == name && person_list[i].family == family)
            {
                person_list[i].name = new_name;
                person_list[i].family = new_family;
            }
    }
}
class Person //Entity Class
{
    private string _name;
    private string _family;

    public Person(string n,string f)
    {
        _name = n;
        _family = f;
    }
    public string name { get { return _name; } set { _name = value; } }
    public string family { get { return _family; } set { _family = value; } }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:37:08.770

您的代码段中没有控制类。控制类将是负责执行与给定用例相对应的一组操作的类。例如，您可能有一个更新人员详细信息的用例。例如，它可以涉及以下操作：

> 1.  找到那个人。
> 2.  获取新数据。
> 3.  更新人员记录。

您可以创建一个控制对象，我们称之为它`UpdateController`，它将通过寻址相关实体和边界类来执行这 3 个操作以完成工作。控制器本身并不执行实际操作，而是将它们委托给相关模块。控制器是调用和同步所需操作的控制器。

另外，请参见此处：[在 UML 类图中，边界类、控制类和实体类是什么？](https://stackoverflow.com/q/683825/1756636)

# android - Android - 阻止某些应用程序

> ID：10948230
> 
> 赞同：0
> 
> 时间：2012-06-08T11:46:09.363
> 
> 标签：android, android-activity, block

我希望使用我的应用程序的用户能够阻止某些应用程序，例如 Gmail 应用程序、网络浏览器或他选择的任何其他应用程序。这意味着，无论何时启动选定的应用程序，它都会被我的应用程序自动杀死。

这是如何实现的？感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:48:34.550

您可以创建一个广播接收器，这些是隐含的意图，因此在匹配这些意图时您可以杀死它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:52:34.590

我认为这是可能的，因为有[类似](https://play.google.com/store/apps/details?id=autokiller.task.killer.mt&hl=de)的应用程序，它们会杀死任务，现在你应该做这样的事情，但用服务杀死它们

# jquery - JQuery，使用 GET 方法发送 JSON 对象

> ID：10948233
> 
> 赞同：30
> 
> 时间：2012-06-08T11:46:24.917
> 
> 标签：jquery, ajax, json

我正在尝试使用 GET 方法发送一个 json 对象。我的代码：

```
$.ajax({
           url: "/api/endpoint",
           type: "GET",
           data: {"sort":"date"},
           contentType: "application/json",
           dataType: "json",
           ... 
```

但是，收到的标头将“Content-Length”设置为零，因此我在服务器上的 json 解析器不会读取内容。

我已经尝试设置内容长度标头，但它仍然将服务器设为零：

```
$.ajax({
           url: "/api/endpoint",
           headers: {"CONTENT_LENGTH",JSON.stringify({"sort":"date"}).length},
           type: "GET",
           data: {"sort":"date"},
           contentType: "application/json",
           dataType: "json",
           ... 
```

知道如何让它工作吗？它必须是 GET 请求。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-08T11:55:48.000

GET 请求（[至少通常](https://stackoverflow.com/q/5216567/1048572)）没有消息体。如[文档中所述](http://api.jquery.com/jQuery.ajax/)，jQuery 将`data`GET 请求附加到 url 参数。您应该能够`sort`使用您的服务器应用程序从那里读取您的参数。

顺便说一句，没有用户代理允许您设置`Content-Length`标头-它将（并且必须）根据发送的数据自动完成。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-13T14:12:13.820

有几个地方你做错了。

*   它不是`CONTENT_LENGTH`，它的`Content-Length`。
*   不要设置`Content-Length`标题，浏览器会为你做。
*   获取请求的内容长度 = 0。

像下面这样的东西应该适合你：

```
$.ajax({
     url: "/api/endpoint?parameters="+encodeURIComponent(JSON.stringify({"sort":"date"})),
     type: "GET",
     ...
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-08T12:04:38.307

我认为您应该使用 JSON.stringify 作为 URL 中的 GET 参数，如下所示：

```
$.ajax({
           url: "/api/endpoint?parameters="+JSON.stringify({"sort":"date"}),
           type: "GET",
           contentType: "application/json",
           dataType: "json",
           ... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-13T14:03:25.017

正如Bergi 所说，数据被转换`jQuery.ajax()`为请求参数。从 jQuery 1.7.2 开始：

```
// Determine if request has content
s.hasContent = !rnoContent.test( s.type );    --> false when s.type == "GET' 
```

...

```
if ( !s.hasContent ) {
    // If data is available, append data to url
    if ( s.data ) {
        s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.data;
        // #9682: remove data so that it's not used in an eventual retry
        delete s.data;
    } 
```

# c - C中的UTF8处理

> ID：10948234
> 
> 赞同：7
> 
> 时间：2012-06-08T11:46:25.493
> 
> 标签：c, unicode, utf-8

我对 UTF8 有基本的了解：代码点具有可变长度，因此“字符”可以是 8 位、16 位甚至更长。

我想知道的是，是否有一些 C 语言中的示例代码、库等与 UTF8 字符串类似，例如 CEg 中的标准库，告诉字符串的长度等。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T02:06:27.757

GNU 确实有一个 Unicode 字符串库，称为[*libunistring*](http://www.gnu.org/software/libunistring/manual/)，但它处理任何事情的能力几乎不如[ICU](http://site.icu-project.org/)的。

例如，GNU 库甚至不让您访问排序规则，这是所有字符串比较的基础。相比之下，ICU确实如此。ICU 没有出现 GNU 的另一件事是 Unicode 正则表达式。为此，您可能想使用[Phil Hazel 的优秀 PCRE 库 C](http://www.pcre.org)，可以使用 UTF-8 支持进行编译。

但是，GNU 库可能足以满足您的需要。我不太喜欢它的 API。很乱。如果你喜欢 C 编程，你可以试试[Go 编程语言](http://golang.org)，它具有出色的 Unicode 支持。它是一种新语言，但小巧、干净且使用起来很有趣。

另一方面，主要的解释语言——Perl、Python 和 Ruby——都对 Unicode 提供了不同的支持，这比 C 语言中的更好。其中，Perl 的 Unicode 支持是最发达和最强大的。

请记住：支持更多字符是不够的。没有它们的规则，你就没有 Unicode。最多，您可能拥有 ISO 10646：一个大型字符库，但没有规则。我的口头禅是“Unicode 不仅仅是更多的字符；它是更多的字符***加上***一大堆处理它们的规则。”</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:58:27.303

处理 Unicode 的最重要的库是[IBM 的 ICU](http://www-01.ibm.com/software/globalization/icu/)。

但是，如果您需要做的只是确定 UTF-8 编码字符串中的代码点数，请计算值介于`\x01`and`\x7F`或介于`\xC2`and之间的字符数`\xFF`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-28T23:31:24.373

如果您对不分配内存并使用堆栈的库感兴趣，您可以尝试[utf8rewind](https://github.com/knight666/utf8rewind)。

# windows - 标题名称中的 taskkill 窗口空间

> ID：10948235
> 
> 赞同：31
> 
> 时间：2012-06-08T11:46:30.560
> 
> 标签：windows, batch-file, cmd

我正在尝试在标题中有空格的控制台窗口上运行 taskkill。如何将此窗口标题传递给 taskkill。我尝试了以下方法：

```
taskkill /fi "WINDOWTITLE eq Administrator: My Window Title" 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-14T11:51:48.047

我遇到过类似的问题，但发现更多。

## 问题

我一直在尝试关闭设置了自己的窗口标题的 CMD 窗口（以管理员身份运行）。因此，以管理员身份运行 CMD 并键入：

```
title CMD with custom title 
```

经过一番折腾，下面的命令告诉我设置窗口标题会在标题前面放置一个前导空格！（不知道为什么。）

```
c:\>tasklist /V /FI "WindowTitle eq Administrator*"

Image Name  PID Session Name Session# Mem Usage Status  User Name       CPU Time Window Title
========== ==== ============ ======== ========= ======= =============== ======== =====================================
cmd.exe    4304 Console             1   2,492 K Running MACHINE\My Name  0:00:00 Administrator:  CMD with custom title

(scroll )                                                                               extra space 
```

* * *

## 解决方案

所以要杀死进程：

```
taskkill /F /FI "WindowTitle eq  Administrator:  CMD with custom title" /T

                                             bingo 
```

*   `/F`- 使用武力。
*   `/T`- 杀死子进程。

如果您以类似的方式敲打您的头，我建议您`tasklist`在流程属性中四处寻找，以确保您的过滤器正确。Windows 8 为您带来的这个问题。

*注意：*如果标题包含引号，只需转义嵌套的：

```
title "CMD with custom title"

taskkill /F /FI "WindowTitle eq  Administrator:  \"CMD with custom title\"" /T 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-24T16:15:49.260

诀窍是命名 cmd 进程，然后通过调用您给定的名称来终止它：以下是启动 6 个并行进程，您可以终止任何一个选择。

```
start "cmd001" cmd.exe
start "cmd002" cmd.exe
start "cmd003" cmd.exe
start "cmd004" cmd.exe
start "cmd005" cmd.exe
start "cmd 006" cmd.exe 
```

:: 杀死你想要的进程，例如 cmd005

```
taskkill /F /FI "WINDOWTITLE eq cmd005" /T 
```

:: 杀死名称中有空格的进程，例如 cmd 006

```
taskkill /F /FI "WINDOWTITLE eq cmd 006" /T 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-17T11:24:30.333

我猜这个任务在你的 windows server 上运行。如果标题中包含“Administrator:”，则不能通过 WindowTitle 等方式杀死任务。

你应该使用这个：这是我的杀手.bat。SEARCH_PARAMETER = 你想杀死什么标题

```
@echo off
            for /f "tokens=2 delims=," %%a in ('
tasklist /fi "imagename eq cmd.exe" /v /fo:csv /nh 
^| findstr /r /c:".*SEARCH_PARAMETER[^,]*$" ') do taskkill /pid %%a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-11T09:52:38.920

taskkill /F /FI "WindowTitle eq Apache 8184"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-10T17:00:51.853

我正在使用 AutoIt 启动 cmd shell 窗口，关于使用任务列表的提示确实很有帮助。我已经尝试过双空格，但 AutoIt 的 Run() 命令以 tasklist/taskkill 无法看到窗口标题的方式创建了 cmd.exe shell。

如果我使用循环或 AutoIt 的 WinKill()/WinClose() 和 cmd 提示符的窗口标题，那么 AutoIt 本身可以关闭窗口，但我的 cmd 提示符 bat 文件只看到 c:\windows\system32\cmd 作为窗口标题。

在这种情况下，我能够使用 AutoIt 而不是从批处理脚本中杀死窗口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-24T17:35:39.313

迟到的答案（4yo），但是当您知道只有一部分进程名称使用*旧* [`WMIC`](https://www.cs.cmu.edu/~tgp/scsadmins/winadmin/WMIC_Queries.txt)的. 这是一个名为
的示例`find`和一个进程：`kill``"Administrator: My Window Title"`

```
WMIC PROCESS WHERE "NAME LIKE '%Administrator: My Window Title%'" CALL TERMINATE 
```

# javascript - 检查cookie是否普遍存在，而不是特定的cookie

> ID：10948236
> 
> 赞同：1
> 
> 时间：2012-06-08T11:46:34.540
> 
> 标签：javascript, jquery

在不检查大量单个 cookie 的情况下，我如何检测网站是否设置了一般 cookie。

我看了这个类似的问题：[Create a cookie if (and only if) it doesn't already exist](https://stackoverflow.com/questions/2824021/check-if-cookie-exists-if-not-create-it)。但是那里提供的解决方案会检查是否存在特定的 cookie，而不仅仅是一般的 cookie。

我试过了：

```
if($.cookie) {  
 //code   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:51:38.283

jQuery 真的不需要检查当前域是否在用户的浏览器中设置了 cookie，只需使用原始 JS：

```
if(document.cookie.length > 0) {
    // do stuff ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:01:28.193

检查cookie是否存在：

```
if (document.cookie === "") {
  // do something if no cookie exists
} 
```

我不会为此使用 jquery 来保护内存/处理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:52:22.653

您不需要为此使用 $.cookie 插件：

```
if (document.cookie) {
    // at least one cookie has been set...
} 
```

# java - 为什么列表视图不重复列表 在检票口？

> ID：10948245
> 
> 赞同：1
> 
> 时间：2012-06-08T11:47:07.163
> 
> 标签：java, wicket

当我调试列表时说，间接列表未实例化。但是我在 JPA 中偷懒了。它不在 Listview 中呈现，但它应该有节点。我错过了什么吗？

```
//.....code......
private ListView<String> reqs; // Requirements
private Label lblreqs;  //Label for repeat requirements
//...code...
    final LigaBaseball lbb = LigaBBServ.buscarPorID(Integer
            .parseInt(idLiga)); //Get Baseball league from database

    if (lbb == null || pageParameters == null
            || pageParameters.get("idLiga") == null)
        throw new RestartResponseException(VerLigas.class); //If null redirect.
//...code...

    add(reqs = new ListView<String>("reqs", new ListModel<String>(lbb.getRequisitos()))//LAZYly get List from LigaBaseball(BaseballLeague) {
        @Override
        protected void populateItem(ListItem<String> item) {
        /*When I debug item is null
*/
            item.add(lblreqs = new Label("lblreqs", (item.getModelObject())));
        }
    });

//...code... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:37:40.187

好吧...根据从您发布的代码创建的这个（相当简约的）UnitTest，确实如此，但也许我错过了重点......

```
package net.unbewaff;

public class DemoTestCase {

    private WicketTester tester = new WicketTester();
    private Panel panel = new MyPanel("panel");

    @Test
    public void testIt() {
        tester.startComponentInPage(panel);
        tester.assertComponent("panel", Panel.class);
        tester.assertComponent("panel:reqs", ListView.class);
        tester.assertComponent("panel:reqs:0", ListItem.class);
        tester.assertLabel("panel:reqs:0:lblreqs", "1");
        tester.assertComponent("panel:reqs:1", ListItem.class);
        tester.assertLabel("panel:reqs:1:lblreqs", "2");
        tester.assertComponent("panel:reqs:2", ListItem.class);
        tester.assertLabel("panel:reqs:2:lblreqs", "3");
        tester.assertComponent("panel:reqs:3", ListItem.class);
        tester.assertLabel("panel:reqs:3:lblreqs", "4");
    }

    private final class MyPanel extends Panel {

        private MyPanel(String id) {
            super(id);
        }

        public void onInitialize() {
            ListView<String> reqs;

            final LigaBaseball lbb = new LigaBaseball();

            reqs = new ListView<String>("reqs", new ListModel<String>(lbb.getRequisitos())) {

                protected void populateItem(ListItem<String> item) {
                    item.add(new Label("lblreqs", (item.getModelObject())));
                }
            };

            add(reqs);

            super.onInitialize();
        }
    }

    class LigaBaseball {

        public List<String> getRequisitos() {
            String[] a = { "1", "2", "3", "4" };
            return Arrays.asList(a);
        }
    }
} 
```

* * *

## 测试集：net.unbewaff.DemoTestCase

测试运行：1，失败：0，错误：0，跳过：0，经过时间：0.032 秒

# php - PHP 变量丢失 XML

> ID：10948248
> 
> 赞同：0
> 
> 时间：2012-06-08T11:47:23.410
> 
> 标签：php

我在变量中有以下 XML：

```
$xml = 'XML=<CktRequest><Agent Name="Computicket" Group="mobile"></Agent><Operation Type="New Session" NumNewReleases="3" NumPromotions="6"/></CktRequest>';
var_dump("xml:".$xml); 
```

var_dump 仅显示：

```
'XML=' 
```

所以在那之后它失去了一切......为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:50:12.277

浏览器将标签解释为...以及标签。查看源代码以查看其内容`$xml`或先对其进行转义：

```
var_dump("xml:" . htmlentities($xml)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:50:01.950

您可能会显示完整的内容，但通过浏览器查看它会尝试将其解析为 HTML。

尝试查看您页面的源代码。我敢打赌它就在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:54:21.170

最好让浏览器将内容显示为文本并放在代码的开头（在“< ?php”之后）：

```
header('Content-type: text/plain'); 
```

这也有助于换行；-)

# mysql - 链接到在线数据库后是否需要在 MS Access 中重新创建关系？

> ID：10948249
> 
> 赞同：1
> 
> 时间：2012-06-08T11:47:24.047
> 
> 标签：mysql, ms-access, ms-access-2007, relational-database

我有一个 Access 前端和一个 MySQL 后端。

链接 MySQL 表后，我注意到 MS Access 中的关系窗口是空的。是否有必要根据外键在 Access 中重新创建关系。如果是，有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:42:56.880

> 是否需要在 Access 中重新创建关系

否。关系窗口是空的，因为 Access 不对任何这些关系负责。如果 MySQL 后端存在外键引用，则所有这些约束都将由 MySQL 服务器强制执行。

# php - 检查用户名和密码

> ID：10948256
> 
> 赞同：1
> 
> 时间：2012-06-08T11:47:44.943
> 
> 标签：php, sql

我想检查我的数据库中是否存在用户名和密码，但是我的代码有问题，我找不到它。

```
$result=mysql_query("SELECT C_ID FROM customer WHERE C_NNAME ='".$_POST['username']."' AND C_PASS = '".$_POST['pass']."'");

if($result=='FALSE'){
    $word .= select_key('keyword', 'K_ID', 'password');
}
else 
{
    $word.= select_key('keyword', 'K_ID', 'Please Complete Feilds');    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:52:48.827

除了您的 SQL 注入问题之外，您还`$_POST`错误地使用了超全局数组（正如您所命名的那样`$post`）。

尝试使用正确的超全局变量名称 - 并使用 Google 进行 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:58:05.050

```
$name = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string($_POST['pass']);
$result = mysql_query("SELECT C_ID FROM customer WHERE C_NNAME ='$name' AND C_PASS = '$password'");

if(mysql_num_rows($result) > 0) {
   // There's a match
} else {
   // There's no match
} 
```

另外请不要使用 mysql_ 函数使用 mysqli_ 或存储程序。该代码对 sql 注入不安全，在公共网站上使用它不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:04:09.850

您需要使用`mysql_num_rows`来找出是否有任何结果。

# android - ListFragment 更新问题

> ID：10948261
> 
> 赞同：1
> 
> 时间：2012-06-08T11:47:56.817
> 
> 标签：android, performance, android-fragments, android-viewpager, android-listfragment

我在 ViewPager 中有一个带有自定义布局的 ListFragment。这个 ListFragment 和自定义布局执行一个 ListView 和一个调用 AsyncTask 的 Button。

工作完成后，此 AsyncTask 调用 onPostExecute 刷新方法（在 ListFragment 中创建）以更新适配器（代码如下）。当我按下此按钮时，**一切正常，直到发生方向变化**。

然后，如果我按下按钮，列表会更新，但**不会添加或删除任何行**。因此，即如果我只有一行并且在更新适配器后是空的，则不会对 List 进行任何更改。另一方面，如果应将某些行添加到列表中，我们只会注意到现有行已更改其内容。

如果在此“失败”更新之后发生方向更改，则列表显示正常。所以我们可以说这个**列表只在方向改变之后才能很好地更新适配器的内容**。

对主要活动的引用总是传递给 ListFragment 并且**适配器被正确更新**（我检查了它的日志）。

有人有什么想法吗？我会非常感激。

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:weightSum="10">

    <ListView android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="9" />

    <Button android:id="@+id/Refresh" 
        android:layout_width="wrap_content" 
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_gravity="center"
        android:text="Update" /> 

</LinearLayout> 
```

和代码：

```
 public class ResFragment extends ListFragment {
    View view = null;
    public static AdapterRes adapter; 

    public static ArrayList<NodeP> mItems = new ArrayList<NodeP>();
    public static MyAppActivity ref ;   

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        adapter = new AdapterRes(ref, ref.result);
        adapter.notifyDataSetChanged();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        view = inflater.inflate(R.layout.result,null);
        this.setListAdapter(adapter);

        Button refresh = (Button) view.findViewById(R.id.Refresh);
        refresh.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                ref.initDownloadTask();             
            }
        });

        return view; 
    }

    public void refresh(){ 
        mItems.clear();
        adapter = new AdapterRes(ref, ref.result);
        this.setListAdapter(adapter);
        adapter.notifyDataSetChanged();
    }

    class AdapterRes extends ArrayAdapter<NodeP> {

      Activity context = ref;
      AdapterRes(Activity context, List<NodeP> objects) {
          super(context, R.layout.row_res, objects); 
          this.context = ref;   
      }

      @Override
      public View getView( final int position, View convertView, ViewGroup parent) 
      {
          View item = convertView; 
          final ViewHolder holder;

          if(item == null)                                    
          {                                                  
              LayoutInflater inflater = context.getLayoutInflater();            
              item = inflater.inflate(R.layout.row_res, null);

              holder =  new ViewHolder();   

              holder.local = (TextView)item.findViewById(R.id.local);
              holder.resPartido = (TextView)item.findViewById(R.id.res);
              holder.foreign = (TextView)item.findViewById(R.id.foreign);

              item.setTag(holder); 
          }
          else                                        
          {                         
              holder = (ViewHolder)item.getTag(); 
          }
          holder.local.setText(ref.result.get(position).local);   
          holder.res.setText(ref.result.get(position).res);
          holder.foreign.setText(ref.result.get(position).foreign);
          return(item); 
      }

      public class ViewHolder {
          public TextView local;
          public TextView res;
          public TextView foreign;
      }

    }
} 
```

# java - 基于 AOP 的持久性、事务和消息传递示例

> ID：10948262
> 
> 赞同：2
> 
> 时间：2012-06-08T11:47:58.927
> 
> 标签：java, transactions, persistence, aop, message

我真的开始关注 AOP，并且非常喜欢抽象出横切关注点并将其从我的核心业务代码中删除的想法。到目前为止，我一直在阅读 AOP Alliance（我看到它是 Guice 和 Spring AOP 的主力）和 AspectJ。

不幸的是，当我们谈论比简单的方法拦截更高级的东西时，很难找到好的、有效的 Java AOP 代码示例。我一遍又一遍地阅读如何使用 AOP 实现主要的 Java EE 概念，例如持久性、事务处理和消息传递，但在我的一生中，我找不到任何这样的例子！

归根结底，AOP 归根结底就是方法拦截（除非我在这里遗漏了一些*重要*的东西）。因此，如果是这种情况，并给出方法拦截器的一般形式：

```
// Using AOP Alliance for this example
public class MyInterceptor implements MethodInterceptor {
    public Object invoke(MethodInvocation inv) {
        // Run this code before executing inv.
        preInvocation();

        Object result = inv.proceed();

        // Run this code after executing inv.
        postInvocation();
    }

    // ...
} 
```

鉴于此作为起点，有人可以提供**具体**的代码示例，说明如何通过方法拦截将这些 Java EE 概念中的每一个委托给 AOP：

*   持久性/ORM
*   事务处理
*   消息传递

我想我只是很难连接所有的点并通过“树木”看到“森林”。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:10:37.103

不知道持久性和消息传递，但对于事务，我可以解释。我将以 Spring 为例。

您可以配置 Spring bean（通常是服务层 bean），以便在这些 bean 上调用的每个方法都将被事务拦截器拦截。这个拦截器通常做以下事情：

*   查看事务是否已经绑定到当前线程
*   如果没有，则启动一个事务并将其绑定到当前线程
*   调用方法
*   如果事务是通过该方法拦截启动的，并且该方法没有抛出运行时异常，则提交该事务
*   如果事务是由该方法拦截启动的，并且该方法抛出了运行时异常，则回滚该事务
*   解除与当前线程的事务绑定

没有事务方面的事务方法将不得不做这样的事情：

```
try {
    userTransaction.begin();
    executeSomeBusinessCode();
    userTransaction.commit();
}
catch (RuntimeException e) {
    userTransaction.rollback();
} 
```

它很麻烦，容易出错，甚至不处理事务传播、新事务等。

使用 AOP，方法的主体变为：

```
executeSomeBusinessCode(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:42:55.063

不确定“消息传递”和“持久性”是什么意思——你想发送什么消息？你想坚持什么？

如果你想保持方法调用的结果非常简单，请实现一个 MethodInterceptor：

```
public Object invoke(MethodInvocation invocation) throws Throwable {
    Object result = invocation.proceed();
    myPersistenceMethod(invocation, result);
    return result;
} 
```

然后，您可以定义一个注释并为带注释的方法保留方法结果。例如在 Guice 模块中：

```
 bindInterceptor(Matchers.any(), Matchers.annotatedWith(MyPersistenceAnnotation.class),
            new MyPersistenceInterceptor()); 
```

主要问题是如何构建持久性“键” - 最明显的事情是调用方法和参数，但由于这都是基于反射的，因此如果您开始假设某些方法具有某些参数，则没有编译时检查.

这有什么帮助。

# apache-camel - 使用 AsyncProcessor 时预期的另一条消息

> ID：10948264
> 
> 赞同：0
> 
> 时间：2012-06-08T11:48:00.720
> 
> 标签：apache-camel

我尝试在测试场景中使用 AsyncProcessor，期望只有一条消息通过路由，但似乎有两条。

在日志中

```
Test0
Test1 
```

为什么有两条消息？

```
from("quartz:test?trigger.repeatCount=1&trigger.repeatInterval=100").setBody(simple("Test"))

            .process(new AsyncProcessor() {

                private volatile int i;

                public void process(Exchange exchange) throws Exception {
                    AsyncProcessorHelper.process(this, exchange);
                }

                public boolean process(final Exchange exchange, final AsyncCallback callback) {
                    new Thread(new Runnable() {

                        public void run() {
                            exchange.getOut().setBody(exchange.getIn().getBody(String.class) + (i++), String.class);
                            callback.done(false);
                        }
                    }).start();
                    return false;
                }
            })
                .process(new Processor() {

                public void process(Exchange exchange) throws Exception {
                    org.slf4j.LoggerFactory.getLogger(Tests.class).info(exchange.getIn().getBody(String.class));
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T03:44:28.540

如果您只希望它运行一次，则设置`trigger.repeatCount=0`

# objective-c - 如何使用objective-c分割或切割音频文件

> ID：10948265
> 
> 赞同：1
> 
> 时间：2012-06-08T11:48:10.257
> 
> 标签：objective-c, ios, audiotoolbox

我正在做一个录制音频文件的项目，现在我必须使用电子邮件发送这些文件以作为附件，我想剪切音频文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:07:58.650

看看这个[Technical Q&A](http://developer.apple.com/library/ios/#qa/qa1730/_index.html)，它涵盖了在时间范围内导出音频文件等内容。还包括音频结束的淡入淡出效果。它非常整洁。

# ruby-on-rails - RoR Hartl 教程第 9.3 章测试失败

> ID：10948267
> 
> 赞同：1
> 
> 时间：2012-06-08T11:48:10.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, rspec

我正在努力通过这个 Hartl 9.3 测试，但没有运气。

```
bundle exec rspec spec/requests/user_pages_spec.rb -e "edit page" 
```

终端返回

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/requests/user_pages_spec.rb -e "edit page"
/Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load': /Users/Lagaspi/rails_projects/sample_app/spec/requests/user_pages_spec.rb:111: syntax error, unexpected $end, expecting keyword_end (SyntaxError)
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

我认为问题可能出在这个文件中，`spec/requests/user_pages_spec.rb`：

```
require 'spec_helper'

describe "User pages" do
  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "signup" do
    before { visit signup_path }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button "Create my account" }.not_to change(User, :count)
      end

      describe "error messages" do
        before { click_button "Create my account" }

        it { should have_selector('title', text: 'Sign up') }
        it { should have_content('error') }
       end
     end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect do
          click_button "Create my account"
        end.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button "Create my account" }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end
    end
  end
end

describe "signup page" do
  before { visit signup_path }

  it { should have_selector('h1',    text: 'Sign up') }
  it { should have_selector('title', text: full_title('Sign up')) }
end

describe "signup" do
  before { visit signup_path }

  let(:submit) { "Create my account" }

  describe "with invalid information" do
    it "should not create a user" do
      expect { click_button submit }.not_to change(User, :count)
    end
  end

  describe "with valid information" do
    before do
      fill_in "Name",         with: "Example User"
      fill_in "Email",        with: "user@example.com"
      fill_in "Password",     with: "foobar"
      fill_in "Confirmation", with: "foobar"
    end

    it "should create a user" do
      expect { click_button submit }.to change(User, :count).by(1)
    end

    describe "edit" do
      let(:user) { FactoryGirl.create(:user) }
      before { visit edit_user_path(user) }

      describe "page" do
        it { should have_selector('h1',    text: "Update your profile") }
        it { should have_selector('title', text: "Edit user") }
        it { should have_link('change', href: 'http://gravatar.com/emails') }
      end

      describe "with invalid information" do
        before { click_button "Save changes" }

        it { should have_content('error') }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:55:14.447

您的代码中缺少结尾，您应该尝试正确格式化您的代码，它可能会帮助您更快地把事情做好：

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1', text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1', text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "signup" do

    before { visit signup_path }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button "Create my account" }.not_to change(User, :count)
      end

      describe "error messages" do
        before { click_button "Create my account" }

        it { should have_selector('title', text: 'Sign up') }
        it { should have_content('error') }
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name", with: "Example User"
        fill_in "Email", with: "user@example.com"
        fill_in "Password", with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect do
          click_button "Create my account"
        end.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button "Create my account" }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end
    end
  end
end

describe "signup page" do
  before { visit signup_path }

  it { should have_selector('h1', text: 'Sign up') }
  it { should have_selector('title', text: full_title('Sign up')) }
end

describe "signup" do

  before { visit signup_path }

  let(:submit) { "Create my account" }

  describe "with invalid information" do
    it "should not create a user" do
      expect { click_button submit }.not_to change(User, :count)
    end
  end

  describe "with valid information" do
    before do
      fill_in "Name", with: "Example User"
      fill_in "Email", with: "user@example.com"
      fill_in "Password", with: "foobar"
      fill_in "Confirmation", with: "foobar"
    end

    it "should create a user" do
      expect { click_button submit }.to change(User, :count).by(1)
    end
    describe "edit" do
      let(:user) { FactoryGirl.create(:user) }
      before { visit edit_user_path(user) }

      describe "page" do
        it { should have_selector('h1', text: "Update your profile") }
        it { should have_selector('title', text: "Edit user") }
        it { should have_link('change', href: 'http://gravatar.com/emails') }
      end

      describe "with invalid information" do
        before { click_button "Save changes" }

        it { should have_content('error') }
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:54:27.730

`end`我认为您在文件末尾缺少一个。有一个不匹配的 do 没有`end`. 尝试在`end`文件末尾添加（一两个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:33:14.283

请检查一下

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
      before { visit signup_path }

      it { should have_selector('h1',    text: 'Sign up') }
      it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "signup" do

      before { visit signup_path }

      describe "with invalid information" do
        it "should not create a user" do
          expect { click_button "Create my account" }.not_to change(User, :count)
        end

        describe "error messages" do
          before { click_button "Create my account" }

          it { should have_selector('title', text: 'Sign up') }
          it { should have_content('error') }
        end
      end

      describe "with valid information" do
        before do
          fill_in "Name",         with: "Example User"
          fill_in "Email",        with: "user@example.com"
          fill_in "Password",     with: "foobar"
          fill_in "Confirmation", with: "foobar"
        end

        it "should create a user" do
          expect do
            click_button "Create my account"
          end.to change(User, :count).by(1)
        end

        describe "after saving the user" do
          before { click_button "Create my account" }
          let(:user) { User.find_by_email('user@example.com') }

          it { should have_selector('title', text: user.name) }
          it { should have_selector('div.alert.alert-success', text: 'Welcome') }
          it { should have_link('Sign out') }
        end
      end
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end
      describe "edit" do
      let(:user) { FactoryGirl.create(:user) }
      before { visit edit_user_path(user) }

      describe "page" do
        it { should have_selector('h1',    text: "Update your profile") }
        it { should have_selector('title', text: "Edit user") }
        it { should have_link('change', href: 'http://gravatar.com/emails') }
      end

      describe "with invalid information" do
        before { click_button "Save changes" }

        it { should have_content('error') }
      end
    end
  end
end
end 
```

# javascript - 我们如何为网页实现可重用的焦点管理器

> ID：10948272
> 
> 赞同：4
> 
> 时间：2012-06-08T11:48:35.013
> 
> 标签：javascript, jquery, asp.net, focus

我正在处理一些用于进行大量输入的网页。界面控件较多，由于用户习惯，按键`focus`设置为下一个控件`Enter`

实际上我正在使用`jQuery`像这样实现的经典方法

```
 $('#txtInput1').keypress(
            function(event) {
               if (event.keyCode == 13) {
                      $('#txtInput2').focus();
               }
     });

    $('#txtInput2').keypress(
            function(event) {
               if (event.keyCode == 13) {
                   $.getJSON('Ajax/getSomeResult.aspx', 
                             {'param': $(this).val() }, function(data) {
                         if (data['msg'] != "")
                              $('#txtInput3').focus();
                         else 
                              $('#txtInput4').focus();
                    });
                }
    });

    $('#txtInput4').keypress(
            function(event) {
               if (event.keyCode == 13) {
                      $('#txtInput5').focus();
               }
     }); 
```

如您所见，每个输入控件都重复了相同的代码结构，除了其中一些在我们需要做额外工作才能确定下一个要跳转到的控件之前

我的问题是：我们如何重构这段代码，以便有一个可以适用于所有页面的解决方案，如果可能的话，很少或没有重复？

请记住，条件

```
 $.getJSON(
       'Ajax/getSomeResult.aspx', 
       {'param': $(this).val() }, 
       function(data) {
          if (data['msg'] != "")
              $('#txtInput3').focus();
          else 
              $('#txtInput4').focus();
  }); 
```

只是一个例子；它可以是任何可以让我们选择下一个需要`focus`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:00:08.887

使用“不引人注目”的方法。将您自己的属性添加到输入元素，例如`data-focus-next="txt2" data-post-url="/whatever"`，然后使用这些属性作为 jQuery 选择器在 documentReady 上添加事件。

添加更多属性来控制基于 JSON 响应的下一个控件，例如`data-post-success-focus="txt3" data-post-fail-focus="txt4"`.

对于每页自定义（如果需要），您甚至可以定义要作为属性调用的 JS 函数名称，例如`data-on-post="txt4OnPost"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:54:34.227

**无需重复**！以这种方式使用它：

```
$('input[id*="txtInput"]').keypress(
    function(event) {
       if (event.keyCode == 13) {
          next = $(this).attr('id').substr($(this).attr('id').length-1);
          $('#txtInput' + next).focus();
       }
   }
); 
```

如果您使用课程，请尝试以下操作：

```
$('input[class*="txtInput"]').keypress(
    function(event) {
       if (event.keyCode == 13) {
          if($(this).hasClass('theAjaxCondition'))
          {
              $.getJSON('Ajax/getSomeResult.aspx', 
                  {'param': $(this).val() }, function(data) {
                  if (data['msg'] != "")
                      $('.txtInput' + next).focus();
                  else 
                      $('.txtInput' + next + 1).focus();
              });
           } else {
               next = $(this).attr('class').substr($(this).attr('class').length-1);
               $('.txtInput' + next).focus();
           }
       }
   }
); 
```

在此输入的 HTML 中，您需要提供希望它有帮助！:)

# database - 在 PHPUnit 测试中从 SQL 文件加载模式

> ID：10948273
> 
> 赞同：3
> 
> 时间：2012-06-08T11:48:36.567
> 
> 标签：database, phpunit, yaml

我正在尝试构建一个使用 PHPUnit 的数据库扩展的测试用例。我已经关注了[官方文档](http://www.phpunit.de/manual/3.6/en/database.html)和Mike Lively 的[这篇文章](http://digitalsandwich.com/archives/63-PHPUnit-Database-Extension-DBUnit-Port.html)，但 PHPUnit 一直在抱怨：

```
1) ClearanceProfileTest::testFetchPrivileges
PHPUnit_Extensions_Database_Operation_Exception: COMPOSITE[TRUNCATE] operation failed on query:
            DELETE FROM "profile_privilege_mappings"
         using args: Array
(
)
[SQLSTATE[HY000]: General error: 1 no such table: profile_privilege_mappings] 
```

我相信这个错误是因为我的数据库模式没有设置，但我找不到加载它的方法。我尝试加载我的`.sql`文件内容，并将其作为 PDO 查询执行，但它什么也没做。

这是我的测试用例代码：

```
class ClearanceProfileTest extends PHPUnit_Extensions_Database_TestCase
{
  /**
   * @return PHPUnit_Extensions_Database_DB_IDatabaseConnection
   */
  public function getConnection() {
    $pdo = new PDO('sqlite::memory:');
    return $this->createDefaultDBConnection($pdo, ':memory:');
  }

  /**
   * @return PHPUnit_Extensions_Database_DataSet_IDataSet
   */
  protected function getDataSet() {
    $yaml = dirname(__FILE__) . "/ClearanceProfileTestDataset.yml";
    $dataset = new PHPUnit_Extensions_Database_DataSet_YamlDataSet($yaml);
    return $dataset;
  }
  public function testFetchPrivileges()  {
    $cp = ClearanceProfile::retrieve_one('id = ?', 1);
    $privileges = $cp->fetchPrivileges();
    $this->assertEquals(count($privileges), 1);
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T09:53:16.520

在默认实现中，数据库扩展将使用 getDataSet 返回的数据集对您的数据库执行“干净插入”操作。干净插入操作将截断数据集中的所有表（不是数据库中的所有表），然后将行插入数据集中。解决方案是在运行测试之前创建表。

此外，您可以通过覆盖`getSetUpOperation()`和`getTearDownOperation()`方法来修改默认功能

# xpages - 如何以编程方式构建控件？

> ID：10948275
> 
> 赞同：5
> 
> 时间：2012-06-08T11:48:55.570
> 
> 标签：xpages, lotus-domino

我有用 Java 编写的自定义控件。为了简单起见，我们假设它看起来像这样：

```
public class HelloworldControl extends UIComponentBase {
    @Override
    public void decode(FacesContext context) {
        String cid = this.getClientId(context);
        ...
        super.decode(context);
    }

    @Override
    public void encodeBegin(FacesContext context) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        writer.writeText("Hello world!", this);
        // I want a view!!
    }

    @Override
    public void encodeEnd(FacesContext context) throws IOException {
         ResponseWriter writer = context.getResponseWriter();
         ...
    }

    public void restoreState(FacesContext context, Object state) {
        Object values[] = (Object[]) state;
        ...
        super.restoreState(context, values[0]); 
    }

    public Object saveState(FacesContext context) {
        Object values[] = ...
    }
} 
```

我想以编程方式添加子控件。例如，我想要一个子视图控件在 Hellow 世界文本下呈现一个视图。

我怎样才能做到这一点？动态构建控件的标准程序是什么？

简而言之 - 我想以编程方式构建标准组件的层次结构，并且我想将它附加到我的控件上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T15:19:46.333

我认为您正在寻找的答案是实现 FacesComponent 接口 Keith Strickland 在他的博客上发布了详细说明：

[http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=82770C11FA7B9B21852579C100581766](http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=82770C11FA7B9B21852579C100581766)

它使用 initBeforeContents、buildContents 和 initAfterContents 方法允许您添加子项。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:19:33.933

您可以通过直接在您的*encodeBegin*方法中创建您的 UIComponent 来做到这一点：

```
public void encodeBegin(FacesContext context) throws IOException {
    ResponseWriter writer = context.getResponseWriter();

    writer.writeText("Hello world!", "");
    try{
        UIPassThroughText uiText= new UIPassThroughText();
        uiText.setText("Hello daddy!");
        uiText.encodeBegin(context);
        uiText.encodeChildren(context);
        uiText.encodeEnd(context);
    } 
```

但我不认为这样做是一个好主意，因为那样你的子组件不会添加到组件树中......

**编辑：** Toby Samples 的答案是更好的答案。我已取消删除此答案，因为它仍然有效，但我并不为此感到自豪。要将*uiText*添加到组件树中，您必须使用*this.getChildren().add(uiText)*方法。

最好使用自己的渲染器类，如下所述：[XPages Extensibility API > Creating a Java Control in an NSF](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_a_Java_Control_in_an_NSF)

# java - 在 swt/eclipse 树查看器中拖放

> ID：10948281
> 
> 赞同：0
> 
> 时间：2012-06-08T11:49:40.983
> 
> 标签：java, drag-and-drop, swt

我在 SWT 树查看器中应用了拖放选项，它工作得很好，但我想只允许 DND 到特定的子树类型。我通过适当的检查做到了。现在的问题是那些我没有应用DND的树节点是可拖动的，尽管由于我的检查它们无法被删除。我也想阻止它们被拖动。

请提出我看不到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:28:18.330

您可以覆盖该方法：

```
public void org.eclipse.swt.dnd.DragSourceAdapter.dragStart(final DragSourceEvent event) {
 if (... some condition) {
    event.doit = false; // this will cancel DnD operation
 }
} 
```

# facebook - 替代基于 Facebook FBML 的多朋友选择器

> ID：10948283
> 
> 赞同：-1
> 
> 时间：2012-06-08T11:49:42.983
> 
> 标签：facebook, fbml, invite

由于 Facebook 已弃用 FBML，多好友选择器现在无法使用。 [请求对话框](http://developers.facebook.com/docs/reference/dialogs/requests/)仅支持画布 URL，不支持网站。 [发送对话框](http://developers.facebook.com/docs/reference/dialogs/send/)是一种选择，但不提供与多朋友选择器相同的功能。外面还有一些其他的选择，但我更喜欢使用 Facebook stable 中的一些东西。

有人可以对此提出建议吗？我需要在基于 Java EE 的页面专用域而不是 Canvas 应用程序上实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T17:49:22.110

请求对话框，也可用于专用域，不仅是 Canvas 应用程序，请在此处的示例中
搜索： [https ://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)`redirect_uri`

我在这里回答了一个类似的问题： [替代默认好友选择器？](http://facebook.stackoverflow.com/questions/10725142/alternative-to-the-default-friend-picker/10726887#10726887)

# codeigniter - 我们的联系表格上的垃圾邮件问题（Codeigniter）

> ID：10948284
> 
> 赞同：0
> 
> 时间：2012-06-08T11:49:43.273
> 
> 标签：codeigniter, spam

任何人都可以建议在表单上对抗垃圾邮件的最佳方法 - 我们已经设置了验证码，但垃圾邮件似乎仍在进入。

是否可以执行以下操作...在表单上检查 POST 请求是否来自从该站点提交的表单（而不是使用相同操作的表单）。如果请求来自该站点，则接受否则不要&简单地忽略该请求。

另外 - 是否有可能在服务器端做一些事情来阻止 DDOS 风格的攻击 - 因为我们网站的垃圾邮件发送者似乎在很短的时间内发送了数千个请求。

任何人都可以为 Codeigniter (v2) 推荐任何其他不会过多妨碍用户的良好反垃圾邮件方法。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T12:11:45.997

> 任何人都可以建议在表单上对抗垃圾邮件的最佳方法 - 我们已经设置了验证码，但垃圾邮件似乎仍在进入。

我喜欢“蜜罐”技术。基本上在您的表单上放置一个隐藏字段，其值为空。验证字段作为表单提交的一部分。如果字段 != 空 - 那么它是一个机器人，所以提交失败。机器人往往只是自动填写表单上的所有字段。

> 是否可以执行以下操作...在表单上检查 POST 请求是否来自从该站点提交的表单（而不是使用相同操作的表单）。如果请求来自该站点，则接受否则不要&简单地忽略该请求。

是的——它叫做 CSRF——Codeigniter 内置了它。在你的配置文件中打开它，并在你的表单上使用 form_open()。就是这样

> 另外 - 是否有可能在服务器端做一些事情来阻止 DDOS 风格的攻击 - 因为我们网站的垃圾邮件发送者似乎在很短的时间内发送了数千个请求。

是的 - 在您的会话中为每个用户添加一个“最后提交”字段。或者IP。或者您想跟踪垃圾邮件发送者。在每次提交表单时，检查最后一次提交时间，如果它小于 X 秒（其中 X 是您觉得舒服的任何数字 - 说 5 秒） - 然后由于提交太频繁而导致表单失败。

另一种选择是记录表单何时“送达”给用户，并且如果在请求后 X 秒后也会失败（即普通人需要 30 秒来填写您的表单 - 所以 2 秒意味着机器人）。

ps 使用上述方法意味着您将能够删除验证码:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T12:22:27.090

好吧，我实际上已经通过一个非常简单的解决方案取得了很大的成功。

创建一个 CSS 类：

```
.magic /* Call it whatever you want
{
  display: none;
} 
```

在您的表单中插入类似这样的内容：

```
<form method="post" action="">
<p>
  <label>Name</label>
  <input type="text" name="name">
<p>
<!-- and the magic -->
<p class="magic">
  <input type="text" name="email"> <!-- spam bots LOVES 'email' fields ;) -->
</p>
<!-- /end magic -->

<p>
  <label>Real E-mail input field</label>
  <input type="text" name="some_email">
</p>
</form> 
```

在您的控制器中，您可以执行以下操作：

```
...
public function create_post()
{
   $this->form_validation... // If you use form validation
   [...]
   // If all regular validations are true, do the last bit

  if( $this->input->post('email') == "" ) //If something is in the 'email' field, it has propbably been filled by a bot, because regular users can't see the field.
  {
    $this->your_model->insert_the_post($data);
  }
  // otherwise, pretend like nothing.

} 
```

您的用户将永远不会看到这一点 - 这让我多年来一直没有垃圾邮件。简单 - 但有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:59:17.277

最有可能的是，您会在验证码中放置字典或一些产品词。我在使用 codeigniter 时遇到了同样的垃圾邮件问题。然后我放了一些强有力的词，比如字母数字和所有。它似乎对我有用。试试看。

# php - 服务器端无法识别 POST 变量

> ID：10948289
> 
> 赞同：0
> 
> 时间：2012-06-08T11:50:09.320
> 
> 标签：php, variables, post, server-side

我刚刚从共享主机转移到专用主机，突然 POST 无法正常工作。变量正在根据萤火虫发送

```
jquery....min.js (line 4)
HeadersPostResponseHTML
Parametersapplication/x-www-form-urlencoded
current_subtab_1    0
current_tab_1   0
delivery_options    Standard (5 working days)
new_copies  1500
p_binding   Portrait
p_colours_fs    Full Colour. (CMYK Process)
p_colours_fs_c  No Lamination
p_colours_t Full Colour. (CMYK Process)
p_copies    1000
p_cover Self Cover
p_cover_c   Silk
p_format    A4 (Portrait Only)
p_pages 8
p_paper 130 GSM, coated
p_paper_type    Silk
Source
current_tab_1=0&current_subtab_1=0&delivery_options=Standard+(5+working+days)&    p_copies=1000&p_paper=130+GSM%2C+coated&p_paper_type=Silk&p_colours_t=Full+Colour.+(CMYK+Process)&p_pages=8&p_binding=Portrait&p_format=A4+(Portrait+Only)&p_cover=Self+Cover 
```

但是当我在服务器端打开错误报告时，它说所有变量都是未定义的。是的，它们的定义正确，并且脚本之前运行良好......

```
<br />
<b>Notice</b>:  Undefined index:  current_tab_1 in <b>calculate.php</b> on line     <b>6</b><br />
<br />
<b>Notice</b>:  Undefined index:  current_tab_1 in <b>calculate.php</b> on line     <b>215</b><br />
<br />
<b>Notice</b>:  Undefined index:  current_subtab_1 in <b>calculate.php</b> on line     <b>216</b><br />
<br />
<b>Notice</b>:  Undefined index:  p_format in <b>calculate.php</b> on line <b>220</b><br /> 
```

ETC

那么它为什么要这样做呢？有什么我需要更改的（一个 php.ini，配置）设置吗？一定是PHP的东西

**更新：**

我做了一个`print_r($_POST);`看看是否有任何东西被发布，它返回了一个空数组

**编辑：**

客户端

```
if (current_tab == 0) {
    if (current_subtab == 0) {
        if ($("#saddle_brochure_copies").val() != "Please select...") {
            if ($("#saddle_brochure_copies").val().match('^(0|[1-9][0-9]*)$')) {

                if ($("#saddle_brochure_copies").val() != 25000) {
                    var new_copies = $('#saddle_brochure_copies option:selected').next().val(); //get next selected option for offer price
                }

                var p_copies = $("#saddle_brochure_copies"),
                    p_paper = $("#saddle_brochure_paper"),
                    p_paper_type = $("#saddle_brochure_paper_type"),
                    p_colours_t = $("#saddle_brochure_colours_t"),
                    p_pages = $("#saddle_brochure_pages"),
                    p_binding = $("#saddle_brochure_binding"),
                    p_format = $("#saddle_brochure_format"),
                    p_cover = $("#saddle_brochure_cover"),
                    p_cover_c = $("#saddle_brochure_cover_c"),
                    p_colours_fs = $("#saddle_brochure_colours_fs"),
                    p_colours_fs_c = $("#saddle_brochure_colours_fs_c"),
                    allFields = $([]).add(p_copies).add(p_paper).add(p_paper_type).add(p_colours_t).add(p_pages).
                                    add(p_binding).add(p_format).add(p_cover).add(p_cover_c).add(p_colours_fs).add(p_colours_fs_c),
                                    tips = $(".validateTips");

                $.post("order/calculate.php", {
                    current_tab_1: current_tab,
                    current_subtab_1: current_subtab,
                    delivery_options: delivery_options.val(),
                    p_copies: p_copies.val(),
                    p_paper: p_paper.val(),
                    p_paper_type: p_paper_type.val(),
                    p_colours_t: p_colours_t.val(),
                    p_pages: p_pages.val(),
                    p_binding: p_binding.val(),
                    p_format: p_format.val(),
                    p_cover: p_cover.val(),
                    p_cover_c: p_cover_c.val(),
                    p_colours_fs: p_colours_fs.val(),
                    p_colours_fs_c: p_colours_fs_c.val(),
                    new_copies: new_copies
                }, function (data) {
                    var resultArray = eval('(' + data + ')');
                    checkIfNull();
                    $(".value_2").append("&pound;");
                    if ($("#hf_quote").val() != null) {
                        $("#hf_quote").val(null);
                    }
                    $("#hf_quote").val(resultArray[0]);
                    if ($("#hf_vat").val() != null) {
                        $("#hf_vat").val(null);
                    }
                    $("#hf_vat").val(resultArray[1]);
                    cashFlow($('.value'), 0, resultArray[0], 1 * 1000, 0);
                    if (resultArray[1] != "No VAT on this product!") {
                        $("#quote_vat").append("&pound;", resultArray[1], " Inc. VAT");
                    } else {
                        $("#quote_vat").append(resultArray[1]);
                    }
                    if (resultArray[2]) {
                        if ($("#quote_offer").text() != null) {
                            $("#quote_offer").text("");
                        }
                        $("#quote_offer").append("Get ", new_copies, " copies for &pound;", resultArray[2]);
                    }
                }); 
```

print_r($_REQUEST); 回报 -

```
Array (
    [ppRemember] => 35iq0m8oi3ldr1f8603sifpv52 [__utma] => 201771013.995365705.1339148067.1339148067.1339155188.2 [__utmc] => 201771013 [__utmz] => 201771013.1339148067.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none) [__utmb] => 201771013.9.10.1339155188
) 
```

`print_r($_GET);`返回空数组

**有问题的服务器端代码**

```
if ($_POST['current_tab_1']==0) {
   if ($_POST['current_subtab_1']==0) {
    //for saddle stitched brochures
    //cost 1

    $format = strip_tags(substr($_POST['p_format'],0,100)); //format
    $B = strip_tags(substr($_POST['p_copies'],0,10)); //copies
    $C1 = strip_tags(substr($_POST['p_paper'],0,100)); //paper inner pages
    $C2 = strip_tags(substr($_POST['p_cover'],0,100));
    $lamination = strip_tags(substr($_POST['p_colours_fs_c'],0,100)); //lamination
    $P = strip_tags(substr($_POST['p_pages'],0,100));
    $new_copies = strip_tags(substr($_POST['new_copies'],0,100));

    }
} 
```

**更新：**

我试过 echo $_POST['current_tab_1']; 就在脚本的顶部，它返回了一个未定义的错误。

还注意到其中一个错误是......？

**致命错误：在第****975**行的**calculate.php**中调用未定义函数 json_encode()

 **这是一个内置功能..对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:31:34.253

找出为什么一切都不起作用。尝试使用 plesk 控制面板将我的服务器从 5.1.6 更新到 5.3，最终在安装过程中中断。当我终于让它再次工作时，我恢复到 5.1.6 并决定再次进行更新。我认为它搞砸了我的 php 安装，因为在我成功更新到 5.3 后，一切又开始工作了。**

# backbone.js - 如何在 Backbone 中绑定更改事件？

> ID：10948291
> 
> 赞同：20
> 
> 时间：2012-06-08T11:50:14.070
> 
> 标签：backbone.js

我正在尝试加载国家/地区列表并选择我只想调用警报的国家/地区，但不知何故我无法捕捉选择框的更改事件。

有人能帮帮我吗？

这是带有视图、模型和集合部分的代码以及 html 中的模板脚本

```
 <!DOCTYPE html>
<html>
<head>
    <title>Backbone</title>
</head>
<body>
    <script type="text/template" id="country_select_template">
        <select id="country-selector">
             <% _.each(countries, function(country) {%>
                <option value="<%= country.fipsCode %>"><%= country.countryName %></option>
            <% }); %>
        </select>
    </script>
    <div id="country_select_container">
        Loading country...
    </div>

    <!--div>
    <select id="state" disabled=true>
        <option value="NAN">Select State</option>                    
    </select>
    </div>
    <div>
    <select id="city" disabled=true>
        <option value="NAN">Select City</option>                    
    </select>
    </div-->
</div>
<ul id="names-list">
</ul>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
<script>

Country = Backbone.Model.extend();

CountryList = Backbone.Collection.extend({
    model : Country,
    url : "https://dl.dropbox.com/u/18190667/countryList.json",
    parse : function(response) {
        return response.geonames;
    }
});

Countries = new CountryList();

CountryView = Backbone.View.extend({
    events: {
        "change #country-selector": "countrySelected"
    },

    countrySelected: function(){
        alert("You can procceed!!!");
    },

    countrySelected  :function(){
        alert("Procceed");
    },

    initialize: function(){
        var countries = [];
        var self = this;
        Countries.fetch({
            success: function(){
                self.render();
            }
        });
    },

    render: function(){
        var self = this;
        var country_select_template = _.template($("#country_select_template").html(), {
            countries: Countries.toJSON(),
        });
        $('#country_select_container').html(country_select_template);
        return this;
    }
});
var view = new CountryView();
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-08T12:23:12.367

试试这样：

```
CountryView = Backbone.View.extend({
    el: $("#country_select_container"),
    template: _.template($("#country_select_template").html()),
    events: {
        "change #country-selector": "countrySelected"
    },

    countrySelected: function(){
        alert("You can procceed!!!");
    },

    initialize: function(){
        var self = this;
        Countries.fetch({
            success: function(){
                self.render();
            }
        });
    },

    render: function(){
        this.$el.html(
           this.template({countries: Countries.toJSON()})
        );
        return this;
    }
}); 
```

有关更多信息，请查看[此处](https://stackoverflow.com/questions/5125958/backbone-js-views-delegateevents-do-not-get-bound-sometimes)，希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:06:21.583

您必须将视图绑定到现有的 DOM 元素。试试这个：

```
CountryView = Backbone.View.extend({

    el:'#country-selector',

    events: {
        "change #country-selector": "countrySelected"
    },

... 
```

或者在您的情况下，您可以将`el`参数作为参数传递给构造函数：

`new CountryView({el:'#country-selector'});`

如果您不绑定`el`到现有的 DOM 元素，则默认情况下，主干会将其绑定到 div。因此，您的事件将被触发寻找`div > #country-selector`并且不会匹配，因为不存在这样的元素。

# sql - SQL查询的奇怪结果？

> ID：10948293
> 
> 赞同：0
> 
> 时间：2012-06-08T11:50:21.200
> 
> 标签：sql, sql-server, sql-server-2008

我有以下 SQL 查询。我已经删除了内部工作，但显示了结果的黑盒效果。

整个查询没有返回 {0,10,5,-2,10} 它应该返回，而是返回 {0,0,0,0,0} 我不明白为什么分区行会影响它？？？

如果我排除该`WHERE rn = 1`条件，则它可以正常工作。因此，由于某种原因，无法正确查看行号。

我认为无论出于何种原因，问题都是特定于值 {0,10,5,-2,10} 的，因为当我使用不同的参数调用此函数时，值返回正常。

```
SELECT  Col1, isnull(Col2,0) AS Col11, isnull(Col4,0) AS Col4, isnull(q.Col3,0) AS Col3, isnull(q.Col5,0) AS Col5
FROM    
(
    SELECT * , ROW_NUMBER() OVER (PARTITION BY Col1 ORDER BY Col5 ASC, Col3 ASC) rn
    FROM 

    (SELECT 0 AS  Col1, tab34.Col2, tab34.Col4, tab34.Col3, Col5 FROM
            (SELECT PST FROM Func2('x','y')) tab3
        LEFT JOIN

            (SELECT Col2, Col4,Col3,abs(tab33.Value + Col6) AS Value, Col7 AS Col5 FROM

                (SELECT tab11.Col2, tab11.Col4, tab11.Col3, Value FROM
                    (SELECT Col2, Col4, Col3 FROM Table2 WHERE Col8 = 'y' AND Col10 = 1) tab22
                JOIN
                    (SELECT Col2, sum(Value) AS Value, Col4, Col3 FROM Table1 WHERE Col9 = 'x' AND Col8 = 'y' GROUP BY Col2, Col4, Col3) tab11
                ON tab11.Col2 = tab22.Col2 AND tab11.Col4 = tab22.Col4 AND tab11.Col3 = tab22.Col3
                WHERE Value < 0) tab33

            JOIN
                (SELECT Col11, Col6, Col7 FROM dbo.Func1('x','y')) Shifts
            ON Shifts.Col11 = tab33.Col2) tab34 

        ON tab3.PST = tab34.Value
    ) VolData
) q
WHERE   rn = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:11:16.780

这可能是一个愚蠢的答案，如果是，请原谅。

行号是从零开始的吗？如果将 where 子句更改为：

```
WHERE rn = 0 
```

?

编辑：我还注意到该行中可能缺少“AS”：

```
SELECT * , ROW_NUMBER() OVER (PARTITION BY Col1 ORDER BY Col5 ASC, Col3 ASC) rn 
```

应该是：

```
SELECT * , ROW_NUMBER() OVER (PARTITION BY Col1 ORDER BY Col5 ASC, Col3 ASC) AS rn 
```

# android - 将多个 APK 部署到市场

> ID：10948300
> 
> 赞同：1
> 
> 时间：2012-06-08T11:50:51.680
> 
> 标签：android, resources, apk, packaging

我有一个适用于各种密度和屏幕尺寸的设备的 Adroid 应用程序，为了实现这一点，我在“res”文件夹中放置了多个资源，就像 Android 允许你做的那样。事实是，为他提供“低、中、高和 xhigh”分辨率的资源使我的 APK 在内存方面非常大（实用程序约 10 MB 太多了）。我已经压缩了图像等等。

所以我建议：只提供一种资源并为我需要的每个解决方案签署一个包是一种好习惯吗？例如，只用低分辨率文件夹打包应用程序，而不是删除它，再次用高分辨率文件夹包替换，然后发布许多 apk（就像Skype一样）？

如果是这样，有没有办法自动化这个过程？就像为您的项目、资源和密钥库提供工具或脚本一样？或者有没有更好的方法来打包在每台设备上运行的应用程序？

仅供参考：我正在使用 Appcelerator Titanium，因此该应用程序适用于 API 8 或更高版本，但大小问题不依赖于框架的使用，它“仅”增加了几 MB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T22:54:36.790

您可以尝试将 android studio 与 gradle 一起使用。Gradle 为多个构建提供了更好的支持。

# ios - Mixare 增强视图不会旋转回纵向

> ID：10948302
> 
> 赞同：2
> 
> 时间：2012-06-08T11:50:56.223
> 
> 标签：ios, cocoa-touch, augmented-reality

有人可以告诉我是否存在关于 AugmentedViewController 旋转的已知错误？

我看到标记在横向模式下有一个奇怪的行为，所以我检查了子视图旋转着色它以查看不同的层，我发现了下一个问题。

1）MixareViewController（mainViewController）旋转良好。2) AugviewController.view (overlayview) 具有相同的行为：

*   人像模式正常
*   旋转到横向模式时确定。
*   当我返回纵向模式时，覆盖视图保持横向模式，因此当标记位于屏幕的中低端时，它们就会消失。

有人有同样的问题并且知道如何解决吗？

提前感谢您提供的任何帮助。

# shell - 如何将 shell 脚本的输出存储到 Unix 中的变量中？

> ID：10948303
> 
> 赞同：47
> 
> 时间：2012-06-08T11:51:03.703
> 
> 标签：shell, unix

我有一个 shell 脚本“script.sh”，当我在 unix 窗口中执行时，它会输出“成功”或“失败”。现在我想将 script.sh 的输出存储到一个 unix 命令变量中。`say $a = {output of script.sh}`

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-06-08T11:53:50.100

捕获输出`pwd`命令的两个简单示例：

```
$ b=$(pwd)
$ echo $b
/home/user1 
```

或者

```
$ a=`pwd`
$ echo $a
/home/user1 
```

首选第一种方式。请注意，后面不能有任何空格`=`才能正常工作。

使用简短脚本的示例：

```
#!/bin/bash

echo "hi there" 
```

然后：

```
$ ./so.sh
hi there
$ a=$(so.sh)
$ echo $a
hi there 
```

一般来说，更灵活的方法是从命令返回退出值并将其用于进一步处理，尽管有时我们可能只想捕获命令的简单输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-03T09:47:49.267

假设您要存储 echo 命令的结果

```
echo hello   
x=$(echo hello)  
echo "$x",world! 
```

输出：

```
hello  
hello,world! 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T12:17:23.267

您可能应该重新编写脚本以返回一个值而不是输出它。代替：

```
a=$( script.sh ) # Now a is a string, either "success" or "Failed"
case "$a" in
   success) echo script succeeded;;
   Failed) echo script failed;;
esac 
```

你可以这样做：

```
if script.sh > /dev/null; then
    echo script succeeded
else
    echo script failed
fi 
```

如果其他程序不必解析输出，那么它们与您的脚本一起工作要简单得多。这是一个简单的改变。只是`exit 0`代替印刷`success`，而`exit 1`不是印刷`Failed`。当然，您也可以打印这些值以及以合理的返回值退出，以便包装脚本在如何使用脚本方面具有灵活性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-08T11:53:21.950

```
export a=$(script.sh) 
```

希望这可以帮助。请注意，变量和 = 之间没有空格。回显输出

```
echo $a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T11:55:08.370

您需要以前面的点开始脚本，这会将导出的变量放在当前环境中。

```
#!/bin/bash
...
export output="SUCCESS" 
```

然后像这样执行

```
chmod +x /tmp/test.sh
. /tmp/test.sh 
```

当您需要整个输出而不仅仅是单个值时，只需将输出放入变量中，就像其他答案所示

# java - 添加项目的正确弹簧配置

> ID：10948315
> 
> 赞同：0
> 
> 时间：2012-06-08T11:51:56.957
> 
> 标签：java, spring, hibernate

我有一个工作的 spring-hibernate 项目，我决定将这个项目的一部分转移到一个新的项目中，以拥有类似于基础项目的东西。这个新的基础项目包含一些用于休眠的 dao 类和大量的 spring 注释。所以我成功地创建了它并将它发布到我的存储库。之后，我将它添加到我的第一个项目中。我还添加了带有基本项目包的spring config。现在我有没有弹簧/休眠配置的基础项目。另一个依赖于基础的项目，另一个项目有 spring/hibernate 配置。

现在我收到很多运行时错误。1\. 我在基础项目中的服务类无法从基础项目中的另一个包中自动装配 DAO 类。在我把它放在一个包裹里之后，问题就解决了。但我不太喜欢它。2\. 我的 DAO 方法在运行时出现“没有绑定到线程的休眠会话，并且配置不允许在此处创建非事务性会话”。但以前，当我有一个项目时，他们工作得很好。

我需要基础项目中的弹簧配置吗？我怎样才能正确地做这些事情？

**更新**

现在春天事务管理器中的问题。在基础项目中，我有带有 dao 类的基础抽象控制器。在主类中，我有一个继承基控制器的控制器。当我在服务器上运行项目时，当基本 dao 调用 sessionFactory.getCurrentSession() 时，我收到“没有绑定到线程的休眠会话”。但在我拆分这个项目之前，一切都很好。如果我从 junit 运行 Dao 方法，它们也可以正常工作。

**Slove** 问题是在“context:component-scan”中添加了一些包。它给出了这种效果。谢谢你们的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:02:31.103

如果您在主项目（不是基础项目）中为您的 dao/services 使用 @Service 或 @Component 注释，则需要在 spring 上下文 xml 中指定扫描包。这应该有效。

使用休眠实体映射也可以完成同样的事情。在主项目中，使用 Spring LocalSessionFactoryBean 设置休眠实体扫描来自基础项目的包。这也应该对你有用，因为它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:02:49.317

Spring 配置文件可以在类路径中的任何地方（基础项目，主项目......）。您只需要将它们添加到 Web.xml 文件中的上下文中：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:/applicationContext-context1.xml         
        classpath:/applicationContext-context2.xml
        classpath:/applicationContext-context3.xml
        /WEB-INF/applicationContext-context4.xml 
    </param-value>
</context-param> 
```

我认为最好将它们全部放在你的主应用程序中（而不是在基础库中），就像你现在所做的那样。

# c++ - 抛出新的 std::exception 与抛出 std::exception

> ID：10948316
> 
> 赞同：127
> 
> 时间：2012-06-08T11:51:58.983
> 
> 标签：c++, exception

在查看一些代码时，我偶然发现：

```
throw /*-->*/new std::exception ("//... 
```

我一直认为你不需要/你不应该`new`在这里使用。
正确的方法是什么，都可以，如果可以，有什么区别吗？

顺便说一句，我在使用 PowerShell boost 库“grepping”时所看到的从不使用`throw new`.

PS 我还发现了一些使用`throw gcnew`. 那样可以么？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-06-09T20:44:23.153

抛出和捕获异常的常规方法是抛出一个异常对象并通过引用（通常是`const`引用）来捕获它。C++ 语言要求编译器生成适当的代码来构造异常对象，并在适当的时候对其进行适当的清理。

抛出指向动态分配对象的指针绝不是一个好主意。异常应该使您能够在面对错误条件时编写更健壮的代码。如果您以常规方式抛出异常对象，则可以确定它是否被命名正确类型的 catch 子句捕获，是否被 a 捕获，`catch (...)`然后是否重新抛出它，它将在适当的时间正确销毁。（唯一的例外是，如果它根本没有被捕获，但无论你怎么看，这都是不可恢复的情况。）

如果你抛出一个指向动态分配对象的指针，你必须确保无论调用堆栈在你想要抛出异常的时候是什么样的，都有一个 catch 块，它命名了正确的指针类型并具有适当的`delete`调用。`catch (...)`除非该块重新抛出异常，然后该异常被另一个正确处理异常的 catch 块捕获，否则您的异常决不能被捕获。

实际上，这意味着您已经采用了异常处理功能，该功能应该可以更轻松地编写健壮的代码，并且很难编写在所有情况下都正确的代码。这撇开了一个问题，即几乎不可能充当不期望此功能的客户端代码的库代码。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-08T11:53:54.430

`new`抛出异常时无需使用。

写吧：

```
throw yourexception(yourmessage); 
```

并捕捉为：

```
catch(yourexception const & e)
{
      //your code (probably logging related code)
} 
```

注意应该直接或间接`yourexception`派生。`std::exception`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-08T11:58:52.303

如果调用`new std::exception`站点期望捕获一个`std::exception*`. 但是没有人会期望捕获指向异常的指针。即使您记录了您的函数所做的事情并且人们阅读了文档，他们仍然很容易忘记并尝试捕获对`std::exception`对象的引用。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-08T12:04:34.097

C++ FAQ 对此进行了很好的讨论：

1.  [https://isocpp.org/wiki/faq/exceptions#what-to-catch](https://isocpp.org/wiki/faq/exceptions#what-to-catch)
2.  [https://isocpp.org/wiki/faq/exceptions#catch-by-ptr-in-mfc](https://isocpp.org/wiki/faq/exceptions#catch-by-ptr-in-mfc)

基本上“除非有充分的理由不这样做，否则按引用捕获。避免按值捕获，因为这会导致生成副本，并且副本的行为可能与抛出的行为不同。只有在非常特殊的情况下才应该通过指针捕获。 "

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-29T00:14:30.080

运算符 new 不能保证它永远不会引发异常。出于这个原因，使用它来引发“有效”（预期）异常会产生无法保证不会崩溃的代码。由于一次可能只有一个异常，并且您的程序试图在捕获其中任何一个之前抛出两个异常，因此实现可以做的最好的事情是立即中止您的程序，例如通过调用 std::terminate。

# c# - 为 SslStream 构造 GET 请求

> ID：10948317
> 
> 赞同：3
> 
> 时间：2012-06-08T11:52:00.530
> 
> 标签：c#, .net, sslstream

如果这有点暗，我深表歉意，但我想通过 sslstream 将这样的内容发送到我已获得安全套接字连接的服务器...

```
GET /F5Check/qpi/1 HTTP/1.1
Host: *****.com
Connection: keep-alive
Cache-Control: max-age=0
User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

我尝试使用字符串生成器

```
var sb = new StringBuilder();
sb.AppendLine("GET /F5Check/qpi/1 HTTP/1.1");
sb.AppendLine(string.Format("Host: {0}", host));
sb.AppendLine("Connection: keep-alive");
sb.AppendLine("User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5");
sb.AppendLine("Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
sb.AppendLine("Accept-Encoding: gzip,deflate,sdch");
sb.AppendLine("Accept-Language: en-US,en;q=0.8");
sb.AppendLine("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3"); 
```

然后这样做

```
//Translate the data.
byte[] sendBuffer = UTF8Encoding.UTF8.GetBytes(sb.ToString());

//Send the data.
requestStream.Write(sendBuffer); 
```

其中 sb 是 stringbuilder 对象！

当我尝试从流中读取数据时，我根本没有得到服务器的任何响应，所以很明显服务器无法理解我的愚蠢请求！

我知道我可以使用 webrequest 的变体来做同样的事情，但我尝试这样做是有特定原因的......

基本上我需要知道要对发送进行什么编码，以便我可以执行获取请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:02:10.963

我支持根据 HTTP 标准需要额外的换行符。简单地扩展蒂姆所拥有的，这里有一些源代码。我继续使用 SslStream 类进行连接，我假设这也是你所做的。我在 Google 的 HTTPS 站点上对此进行了测试，并得到了响应。希望这足以让您重回正轨。

注意：我更改了 UA 字符串，因为我们的代理出于某种原因讨厌那个。我不认为这是你的问题，但这对我来说是个问题。

```
static void Main(string[] args)
    {

        string host = "encrypted.google.com";

        // Connect socket
        TcpClient client = new TcpClient(host,443);
        NetworkStream stream = client.GetStream();

        // Wrap in SSL stream
        SslStream sslStream = new SslStream(stream);
        sslStream.AuthenticateAsClient(host);

        //Build request
        var sb = new StringBuilder();

        sb.AppendLine("GET / HTTP/1.1");
        sb.AppendLine(string.Format("Host: {0}", host));
        sb.AppendLine("Connection: keep-alive");
        sb.AppendLine("User-Agent: CSharp");
        sb.AppendLine("Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
        sb.AppendLine("Accept-Encoding: gzip,deflate,sdch");
        sb.AppendLine("Accept-Language: en-US,en;q=0.8");
        sb.AppendLine("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3");
        sb.AppendLine();

        //Go go go!
        byte[] headerBytes = Encoding.UTF8.GetBytes(sb.ToString());
        sslStream.Write(headerBytes, 0, headerBytes.Length);
        sslStream.Flush();

        //Get a place to put it
        byte[] buffer = new byte[2048];
        int bytes;

        //Answer
        do
        {
            bytes = sslStream.Read(buffer, 0, buffer.Length);
            Console.Write(Encoding.UTF8.GetString(buffer, 0, bytes));
        } while (bytes != 0);

        //And done
        client.Close();
        Console.ReadKey();

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:18:54.407

盲目猜测：

尝试将请求的标头设置`Connection`为“关闭”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T10:18:17.700

您似乎缺少的一件事是请求末尾的空白行。[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html)需要一个空行来将标头字段与消息正文分开，或者表示 GET 请求的结束。

就目前而言，服务器不知道您的请求已完成，因此它将等待下一行。添加一个额外的`sb.AppendLine()`应该可以解决这个问题。

# android - 在 Android 上使用 Esper 的 CEP？

> ID：10948318
> 
> 赞同：2
> 
> 时间：2012-06-08T11:52:00.850
> 
> 标签：android, esper, complex-event-processing

是否有任何针对 Android 设备上的 CEP 的库，例如适用于 Android 的 Esper 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:45:23.460

简单地说：它不会开箱即用。

看看这个[讨论](http://old.nabble.com/Esper-on-Android-td29756424.html)，它包含了关于 android 上的 Esper 的有价值的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-24T07:48:54.147

我们最近将 Esper 移植到 Android 上，如果有人试用它并向我们提供反馈，我们将不胜感激。

看看阿斯珀。 [https://github.com/plingpling/asper](https://github.com/plingpling/asper)

# vim - 在 vim 中设置 CTRL + / 用于注释和取消注释

> ID：10948321
> 
> 赞同：0
> 
> 时间：2012-06-08T11:52:10.653
> 
> 标签：vim

我是 Vim 的新手。刚开始使用它。vim 中似乎缺少一个易于注释和取消注释代码的功能。谁能告诉我如何将`Ctrl + /`键映射到 Vim 中的注释和取消注释代码。我正在使用 NERDCommenter 但我不确定如何将评论命令映射到`CTRL + /`

我想对单行和多行注释使用相同的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:46:50.467

由于键盘输入在内部处理的方式，各种组合键，尤其是与`Ctrl`，不幸的是，即使在 GVIM 中，今天也是不可能的。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

使用 NERD_commenter，可以使用以（默认情况下是`<Leader>c`where ）开头的默认映射，或者按照.`<Leader>``\``:help NERDComMappings`

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持这个的终端中的控制台 Vim），并提出了各种建议，cp。[http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

# android - 如何使用 AsyncTask 函数确保数据发送成功

> ID：10948324
> 
> 赞同：0
> 
> 时间：2012-06-08T11:52:13.353
> 
> 标签：android, android-asynctask

我对异步任务有一些问题...

我使用 asynctask 将一些 URL（*.aspx 和参数）发送到我的服务器并插入一些数据。我的问题是如何确保数据成功插入服务器。然后，如果它可以插入到我的服务器上，我将在手机上更新我的数据库以确保数据发送成功

这是我的网址：

```
 vURL = Routines.URL_SEND_SJ +"?sjnumber=SJ-" + Routines.getSJNumber(vContext) +
                                 "&orgid=" + Routines.getOrgId(vContext) +
                                 "&deviceid="  + Routines.getImei(vContext) +
                                 "&savedate=" + vDate +
                                 "&savetime=" + vTime +
                                 "&status=" + vStatusSJNumber +
                                 "&latitude=" + vLatitude + 
                                 "&longitude=" + vLongitude +
                                 "&phonetype=" + vPhoneType +
                                 "&km=" + vKM; 
```

AsyncTask 类通过 ASPX 类发送 URL

公共类 ASPX {

```
public static String submitASPXText(String vURL){       
    String vASPXText="";
    HttpClient vHttpClient = new DefaultHttpClient();

    HttpGet vHttpGet = new HttpGet(vURL);
    try{
        ResponseHandler<String> responseHandler=new BasicResponseHandler();
        vASPXText = vHttpClient.execute(vHttpGet, responseHandler);
        vASPXText = vASPXText.replace("<span id=\"Label1\">~", "");
        vASPXText = vASPXText.replace("`</span>", Routines.SEND); 
    }catch (Exception e){
        e.printStackTrace();
    }

    return vASPXText;
}

private class LocationAsyncTask extends AsyncTask<String, Void, String>{

    @Override
    protected String doInBackground(String... vURL) {
        String vASPXText = ASPX.submitASPXText(vURL[0]);
        return vASPXText;
    }

    @Override
    protected void onPostExecute(String vASPXResult) {
        super.onPostExecute(vASPXResult);
        Toast.makeText(getApplicationContext(), "insert sucess", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T00:37:16.917

为什么不让服务器返回一条 JSON 消息，然后让您的应用查看该消息以查看数据是否已保存。例如如果插入成功返回...

```
{
    "returnCode": 0,
    "returnMessage": "Data saved!"
} 
```

如果有错误返回

```
{
    "returnCode": 1,
    "returnMessage": "Database Error! Data was not saved!"
} 
```

在 Android 上，您可以使用内置的[JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)来读取 JSON 消息。例如 ...

```
JSONObject object = JSONObject(json);
int returnCode = object.getInt("returnCode");
if (returnCode == 0){
    //Data was saved
} else {
    //Data was saved
} 
```

# ruby-on-rails-3 - 如何在 HAML 中使用 rails-i18n

> ID：10948333
> 
> 赞同：7
> 
> 时间：2012-06-08T11:52:39.317
> 
> 标签：ruby-on-rails-3, haml

我浏览了[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)并设置了我的`en.yml`文件：

```
en:
  test:
    welcome: Welcome!!!
  registration:
    signup: Sign up for an invite!! 
```

但是，在我的`new.html.haml`文件中，如何引用`signup`？

本教程仅展示了如何使用 ERB，而不是 HAML。我试过这个，但没有奏效：

```
%h2 <%=t :registration.signup %> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T11:57:06.787

您可能应该阅读[HAML 参考](http://haml.info/docs/yardoc/file.REFERENCE.html)以了解 HAML 的工作原理。要添加代码以生成标签内容，请使用**=**，如下所示：

```
%h2= t('registration.signup') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-07T20:54:07.250

**应用程序/视图/注册/index.html.haml**

```
%h2
  =t('.signup') 
```

**en.yml:**

```
en:
  registration:
    index:
      signup: Sign up for an invite!! 
```

**注意：**

1.  视图的 Rails 路径必须与符号的 YAML 路径匹配
2.  前面有一个点`.signup`。阅读有关[惰性查找的更多信息](http://guides.rubyonrails.org/i18n.html#looking-up-translations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:18:23.817

一旦我这样做，它就起作用了：

更改en.yml

```
 registration:
    signup: "Sign up for an invite to join CorkLabs!!!" 
```

在 .haml 文件中

```
%h2= t 'registration.signup' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-14T22:44:24.847

此处的其他评论传达了您如何做到这一点。不过，对于它的价值，您还可以查看[haml-i18n-extractor](http://github.com/shaiguitar/haml-i18n-extractor#readme)。它是一种工具，可帮助您自动从模板中提取字符串插值，而无需手动操作。应该可以为您节省大量时间。

# jsf - JSF 项目中的错误：在 faces-config.xml 中出现错误

> ID：10948336
> 
> 赞同：1
> 
> 时间：2012-06-08T11:52:45.527
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces

我的 face-config.xml 文件出现错误

```
Cannot resolve the name 'javaee:descriptionGroup' to a(n) 'group' 
     component.
    -21 changed lines 
```

我不知道是怎么回事..之前一切都很好。我不知道我现在编辑了什么，我收到了这个错误。

这是我的 XML (faces-config.xml) 文件的内容：-

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <application>
        <!--Configuration for supporting i18N -->
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>fr</supported-locale>
        </locale-config>
        <resource-bundle>
            <base-name>messages</base-name>
            <var>messages</var>
        </resource-bundle>
    </application>
</faces-config> 
```

帮我解决这个问题..提前谢谢。

# javascript - 显示图像名称列表的 Javascript

> ID：10948338
> 
> 赞同：0
> 
> 时间：2012-06-08T11:53:03.633
> 
> 标签：javascript

我想创建一段 javascript，当单击按钮时，它会扫描页面并返回列表中的图像名称列表。例如 image1.png image2.jpg image3.png

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:01:16.320

采用

```
getElementsByTagNames('img'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:01:27.650

```
function getImgSources() {
    var i = 0, dil = document.images.length, a = [], src;
    for (; i < dil; i++) {
        src = document.images[i].src;
        a.push(src.substring(src.lastIndexOf("/") + 1));
    }
    return a;
} 
```

这是一个非常简单的解决方案。告诉我你是否需要更复杂的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:11:56.820

嗯，像这样的东西？

```
var getAllImages = function(){
  return Array.prototype.slice.call(document.images).map(function(x){return x.src});
} 
```

# javascript - 如何使用 Javascript 检测浏览器的 HTTP 请求？

> ID：10948342
> 
> 赞同：1
> 
> 时间：2012-06-08T11:53:22.983
> 
> 标签：javascript, jquery, asp.net-mvc-3, httpwebrequest, xmlhttprequest

我正在开发一个 ASP.NET MVC 3 Web 应用程序。我需要捕获来自我的 Web 界面的任何 Web 请求，并将一些值添加到其标题中。所以我正在搜索如何使用 Javascript 检测来自网络浏览器的 http 请求。我不知道这是否可能。

我尝试了这个 Ajax 请求并且它有效。

```
 function loadXMLDoc() {

        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            window.XmlHttpRequest = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            window.XmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }

          window.XmlHttpRequest.onreadystatechange = function () {
          alert(window.XmlHttpRequest.readyState + "  " + window.XmlHttpRequest.status);

          if (window.XmlHttpRequest.readyState == 4 && window.XmlHttpRequest.status == 200) {
             document.getElementById("myDiv").innerHTML = window.XmlHttpRequest.responseText;
          }
        };

        window.XmlHttpRequest.open("GET", "@Url.Action("TestActionForJScripts","User")", true);
        window.XmlHttpRequest.setRequestHeader("TestKey", "TestValue");
        window.XmlHttpRequest.send();
    } 
```

但我不需要创建请求对象。我正在尝试捕获从按钮、链接等生成的请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:00:17.170

```
window.XmlHttpRequest = new XMLHttpRequest(); 
```

`XmlHttpRequest`由于它的大写名称，它看起来像一个*构造函数。*你应该

*   将其重命名为小写，这样更容易混淆，或者至少使用类似`MyXhrInstance`...
*   使其成为该函数的局部变量，而不是`window`对象的全局属性

> 捕获来自我的 Web 界面的任何 Web 请求

你应该使用一个库函数，或者至少使用一些通用的东西作为你的`function loadXMLDoc()`无处不在。不需要到处都这样，遵循 DRY 原则。例如，使用该函数的参数使其具有适应性，而不是使用固定的 url。

> ...并在其标题中添加一些值

仅在常用功能中执行此操作。

# java - Java 是否有存储键值对的数据结构，相当于 C# 中的 IDictionary？

> ID：10948348
> 
> 赞同：4
> 
> 时间：2012-06-08T11:53:34.193
> 
> 标签：java, data-structures, dictionary

> **可能重复：**
> [什么将在 Java 中存储键值列表或在 Java 中存储 C# IDictionary 的替代品？](https://stackoverflow.com/questions/8061598/what-will-store-a-key-value-list-in-java-or-an-alternate-of-c-sharp-idictionary)

在 C# 中有一个名为[IDictionary](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)的数据结构，它存储键值对的集合。Java中有类似的数据结构吗？如果是这样，它叫什么，任何人都可以给我一个如何使用它的例子吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-08T11:54:56.567

最好的方法之一是 HashMap：

使用此示例：

```
HashMap<String, Integer> dicCodeToIndex;
dicCodeToIndex = new HashMap<String, Integer>();

// valuating
dicCodeToIndex.put("123", 1);
dicCodeToIndex.put("456", 2);

// retrieving
int index = dicCodeToIndex.get("123");
// index is 1 
```

看看这个链接：[http ://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T11:57:41.640

您可以使用 java.util.Map 的各种实现（参见[http://docs.oracle.com/javase/7/docs/api/java/util/Map.html](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)）。对于类字典映射，最常用的 Map 实现应该是 HashMap。

但是，根据具体的使用场景，另一种类型的地图可能会更好。

# python - python脚本作为Ubuntu上的服务

> ID：10948350
> 
> 赞同：2
> 
> 时间：2012-06-08T11:53:41.667
> 
> 标签：python, ubuntu, upstart

我面临以下问题。我想在 Ubuntu 11.10 系统上将 python 脚本作为服务运行（在以下链接中已经提到： [Python script as linux service/daemon](https://stackoverflow.com/questions/4705564/python-script-as-linux-service-daemon/10948190#10948190)）

我按照上述链接中提到的步骤进行操作，但在 syslog 中收到以下错误消息：

```
init: script main process (21826) terminated with status 1
Jun 8 16:59:55 bilbo kernel: [263012.984531] init: script main process ended, respawning
Jun 8 16:59:55 bilbo kernel: [263013.044099] init: script main process (21827) terminated with status 1 
```

以上两行一直在重复。

说`sudo start script`，我得到以下信息：

```
$ sudo start script
script start/running, process 21826 
```

以下是我`script.conf`放入的内容`/etc/init`：

```
description "Used to start python script as a service"
author "bilbo"
start on runlevel [2]
stop on runlevel [06]
exec python /home/bilbo/scripts/webserver.py
respawn 
```

请告诉我我做错了什么？我是否也必须更改我的 python 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:00:29.327

初始化脚本看起来不错，但脚本本身由于某种原因无法运行。您需要添加一些日志记录或至少将其标准和错误输出重定向到日志文件以查看它可能是什么。

*编辑：* Teemu Ikonen 在评论中注意到您正在运行没有完整路径的 python，并且在给定的上下文中它可能不在 $PATH 中。我会扩展它：它肯定不在你的 $PATH 中。您必须始终在初始化脚本中使用可执行文件的完整路径。

# sql - 是否可以更改 Sql Server 中的数据类型 Date

> ID：10948351
> 
> 赞同：2
> 
> 时间：2012-06-08T11:53:45.623
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我住在伊朗，我们在伊朗使用太阳日期而不是公历日期。是否可以将`Date`数据类型从公历日期更改为太阳日期。另外，我想在我的查询中使用日期函数，例如 DateAdd() 、 DateDiff() 、..。

编辑 ：

阳历月份说明：

```
1-  31 day
2-  31 day
3-  31 day
4-  31 day
5-  31 day
6-  31 day
7-  30 day
8-  30 day
9-  30 day
10- 30 day
11- 30 day
12- 29 day (in Leap year 30 day)
SUM-365 day in each year 
```

太阳日期的开始是每个公历日期的 23-3-...。

**编辑 1**

我在 SQL Server 中使用以下函数将公历日期转换为太阳日期：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[PersianDate]
(@MiladiDate DATE)
returns varchar(10)
AS
BEGIN
    Declare @days int
    Declare @year int
    set @year=Year(@MiladiDate) 
    Declare @month int  
    Set @days=DATEDIFF ( day ,  Convert(Date,cast(Year(@MiladiDate) as varchar)+'/1/1'), @MiladiDate)+1
    if @days>79  --یعنی یک فروردین ماه
    begin
        set @days=@days-79
        if @days<=186
        begin
            set @month=@days/31;
            if (@days%31=0)
                set @days=31
            else
            begin
                set @month=@month+1
                set @days=@days%31
            end
        end
        else
        begin
            set @days=@days-186
            set @month=6+@days/30;
            if (@days%30=0)
                set @days=30
            else
            begin
                set @month=@month+1
                set @days=@days%30
            end
        end
        set @year=@Year-621
    end
    else
    begin
        set @year=@year-1   
        if (((@Year % 100)<> 0 and (@Year % 4) = 0) or ((@Year % 100)= 0 and (@Year % 400) = 0))
            set @days=@days+11
        else
            set @days=@days+10
        set @month=@days/30+9
        if (@days%30=0)
            set @days=30
        else
        begin
            set @month=@month+1
            set @days=@days%30
        end
        set @year=@year-621
    end
    RETURN cast (@year as varchar)+'/'+ 
                                    case
                                    when @month<10 then '0'
                                    else ''
                                    END
                                    + cast (@month as varchar)+'/'+
                                    case 
                                    when @days<10 then '0'
                                    else ''
                                    END
                                    + cast (@days as varchar)
END 
```

**编辑 2**

要将太阳日期转换为公历日期，可以使用 CLR 函数：

[创建 CLR 函数](http://msdn.microsoft.com/en-us/library/w2kae45k%28v=vs.80%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:26:25.210

我建议您构建一个日历表，其中包含公历日期和阳历日期作为两列（以及其他列，例如星期几、月份编号、年份、月份名称）。您应该能够在 Excel 中轻松构建这样的表格，然后将其导入表格。

然后，您可以采用两种方法之一。第一种是将所有日期存储为公历日期，然后查找日期值以在输入和输出上进行转换。如果您想为日期使用大量内置功能，您可以这样做。

第二种方法是将日期存储为代表太阳日期的字符串。然后，当您想要进行内置操作时，可以使用该表转换为公历日期。但是，您可能会发现仅使用日历表就无需使用大多数内置功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:07:09.117

您需要使用 sp_configure 设置服务器的默认日期格式。 [http://support.microsoft.com/kb/173907](http://support.microsoft.com/kb/173907)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:41:06.130

您不能将日期数据类型日历从公历更改为太阳能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:58:15.783

我找到了我的问题的答案。我必须在 sql server 中使用公历日期数据类型并将我的应用程序中的日期列转换为太阳日期。我的应用程序使用 C# 编写，下面的链接有助于将数据从公历日期转换为太阳日期。 [以太阳日期格式显示 gregoriandate](https://stackoverflow.com/q/6807234/1407421)

谢谢大家。

# ios - 用于捕获 UIElements 通知的自定义 UITableViewCell 的最佳实践

> ID：10948352
> 
> 赞同：0
> 
> 时间：2012-06-08T11:53:47.143
> 
> 标签：ios, uitableview, uielement

我有一个带有表格视图的视图。我对 TableViewCells 进行了子类化，以表示我的模型的对象。这个自定义 UITableViewCell 有两个按钮来更改我的模型对象（它使 +1 -1 变为实例变量）。

所以我想我应该如何架构所有这些，我的选择是：

- 我在自定义 tableViewCell 中放置了一个指针，当我收到来自其中一个按钮的通知时，我可能会选择单元格和模型的对象（我不喜欢这个解决方案，因为视图正在改变我的模型，不利于重用细胞太差了）

-在单元类中创建`UICustomTableViewCellDelegate`协议和实例。`id<UICustomTableViewCellDelegate>`当我收到来自 UIElement 的消息时，我会打电话给我的代表。委托将指向通用视图的 UIViewController，它有一个包含我的对象的所有实例的数组，并在此处更改模型。在将单元格视图更改为之前。我认为重用还不错，但我将如何从 ViewController 数组中轻松识别和恢复我的对象？我认为方法应该是：

```
-(void)customTableCellViewButtonPlusPressed:(CustomTableViewCell*) cell; 
```

- 为 CustomTableViewCell 创建一个 viewController 并引用我的对象。他将收到来自单元格的 UIButtons 的消息并更改 cellView 和引用的模型的对象

最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:00:13.983

第三种解决方案是其中最mvc的

1.  您将拥有一个模型，使其尽可能重，并在模型本身上完成所有功能和计算
2.  控制器`UICustomTableViewCell`，这个类将读取模型并在视图上实现它，它还将从视图中获取事件并相应地更改模型
3.  视图将是`UICustomTableViewCell`xib 文件，它将包含单元格绘制和实现的信息

模型将包含在 UICustomTableViewCell 中的“**具有**”关系中 UICustomViewCell 类将能够将绘图功能发送到视图并从视图接收事件并相应地更改模型

# c++ - 命名空间“std”中没有名为“forward”的成员

> ID：10948355
> 
> 赞同：5
> 
> 时间：2012-06-08T11:53:53.273
> 
> 标签：c++, xcode, boost, compiler-errors

在 XCode 中，我最近制作并测试了一个使用 boost 的处理库。我刚刚在 IDE 中设置了一个基本项目，编码了，它构建得很好。

我现在想在另一个应用程序中使用该库。另一个应用程序的 xcode 项目是使用 3rd 方工具自动生成的。当我尝试在这个其他应用程序中包含我的基于 boost 的库时，我收到错误声明。. .

`No member named 'forward' in namespace 'std'`

还有，线。.

```
#include <tuple> 
```

给出预处理器错误

`'tuple' file not found`

看到原始库在我的机器上构建得很好，错误必须归结为构建设置的差异，但我看不到差异，也不知道比较两个不同项目的构建设置的好方法。谁能建议可能导致我出现问题的构建设置？

**编辑：**

在这两个项目中，设置为

*   C/C++/Objective-C 的编译器 = Apple LLVM 编译器 3.0

*   C++ 语言方言 = 编译器默认值

*   C++ 标准库 = 编译器默认值

**编辑 2 [已解决]：**

*   我仍然在目标设置中启用了 C++11 方言。多哈！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T12:06:26.700

您的项目编译为 C++11 并使用 C++11 标准库（std::forward 和标头是新的）。原始项目似乎使用 C++03 标准库编译为 C++03，因此这些新功能不可用。

# jquery - 更改其兄弟姐妹是标签的文本节点

> ID：10948356
> 
> 赞同：0
> 
> 时间：2012-06-08T11:53:53.787
> 
> 标签：jquery, html, css

这是我的html：

```
<div id="ref">
   <p>.....</p>
   <p>.....</p>
   abcd
</div> 
```

我想将“abcd”文本更改为其他一些文本，例如“wxyz”。我如何才能遍历该文本，尤其是在 jquery 中？

### 编辑1：

我是笼统地问这个问题，不一定总是“abcd”或“wxyz”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:57:47.283

```
$("#ref").contents().last()[0].nodeValue = "wyxz"; 
```

[http://jsfiddle.net/rWss5/](http://jsfiddle.net/rWss5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:59:06.757

```
​$(function(){
    var text = $('#ref').text();
    text = text.replace("abcd", "wxyz");
    $('#ref').text(text);
});​ 
```

[http://jsfiddle.net/t2saH/](http://jsfiddle.net/t2saH/)

# c# - 从 asp:textbox 获取文本

> ID：10948360
> 
> 赞同：6
> 
> 时间：2012-06-08T11:54:18.017
> 
> 标签：c#, asp.net, text, textbox

我正在用 C# 编写 ASP.NET 项目。

UpdateUserInfo.aspx 页面由文本框和按钮组成。在 pageLoad() 方法中，我为文本框设置了一些文本，当点击按钮时，我获取文本框的新值并将其写入 DB。

问题是即使我更改了文本框的值 textbox.Text() 方法返回文本框的旧值（“sometext”）并将其写入数据库。

这里的方法：

```
protected void Page_Load(object sender, EventArgs e)
{
    textbox.text = "sometext";
}

void Btn_Click(Object sender,EventArgs e)
{
    String textbox_text = textbox.text();// this is still equals "somevalue", even I change the textbox value
    writeToDB(textbox_text);
} 
```

那么，如何使文本框最初显示为 somevalue，但是当用户更改此值时，getText 方法返回新更改的值并将其写入 DB？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T11:55:36.270

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack)
    {
       textbox.text = "sometext";
    }
} 
```

回发将文本框文本属性设置回`"somevalue"`按钮单击时，您只需要像上面那样设置一次值。

回传解释：

> 在 ASP Web 开发的上下文中，回发是 HTTP POST 的另一个名称。在交互式网页中，表单的内容被发送到服务器以处理一些信息。之后，服务器将新页面发送回浏览器。
> 
> 这样做是为了验证登录密码、处理在线订单或其他客户端计算机无法自行完成的任务。这不应与浏览器上的按钮执行的刷新或返回操作相混淆。

[来源](http://en.wikipedia.org/wiki/Postback)

阅读[View State](http://msdn.microsoft.com/en-us/library/ms972976.aspx)也将有助于理解它们是如何组合在一起的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:01:19.643

试试这个：

```
If (!IsPostBack) 
{   
textbox.text = "sometext";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:57:52.377

实际上在页面加载时`textbox`重新初始化

```
 protected void Page_Load(object sender, EventArgs e)
    {
       if(!Page.IsPostBack)
        {
           textbox.text = "sometext";
        }
    }
    void Btn_Click(Object sender,EventArgs e)
    {
        String textbox_text = textbox.text;
        writeToDB(textbox_text);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T11:59:05.890

请检查页面加载事件中的页面回发......

# html - 图片库定位

> ID：10948365
> 
> 赞同：0
> 
> 时间：2012-06-08T11:54:31.127
> 
> 标签：html, css

我正在创建一个图片库，需要一些帮助 pn 定位。

我有html代码：

```
 <div id="gal">
        <h3 class="title">"Picture title."</h3>
            <a href="" title=""><img class="picture" src="" alt="" /></a>
            <p class="description">content...</p>
    </div>

    <div id="gal1">
        <h3 class="title">"Picture title."</h3>
            <a href="" title=""><img class="picture" src="" alt="" /></a>
            <p class="description">content...</p>
    </div> 
```

使用 css：

```
#main
{

    margin-top:42px;
    margin-left:auto;
    margin-right:auto;
    position:relative;
    background:rgba(16,16,17,0.70);
    width:90%;
    box-shadow: 3px 3px 2.5px #888888;
    border-radius:5px;
}   
div#gal
{
    position:absolute;
    display:inline;
/*Decorations*/
    background:rgba(16,16,17,0.70);
    border-style:solid;
    border-width:3px;
    border-color:#464646;
    border-radius:5px;
}   

div#gal1
{
    margin-left:155px;
    position:absolute;
    display:inline;
/*Decorations*/
    background:rgba(16,16,17,0.70);
    border-style:solid;
    border-width:3px;
    border-color:#464646;
    border-radius:5px;
} 
```

我的问题是我必须单独定位每个 div，是否有解决方法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:11:48.130

您可以将 CSS 更改为：

```
div.gal {
    float:left;

    /*Decorations*/
    background:rgba(16,16,17,0.70);
    border-style:solid;
    border-width:3px;
    border-color:#464646;
    border-radius:5px;
} 
```

您的 html 可以是：

```
 <div class="gal">
    ...
 </div>

 <div class="gal">
    ...
 </div> 
```

您可以在此处阅读有关使用花车的画廊的更多信息：http: [//css.maxdesign.com.au/floatutorial/tutorial0407.htm](http://css.maxdesign.com.au/floatutorial/tutorial0407.htm)

# c# - mapper层可以使用业务层吗？

> ID：10948366
> 
> 赞同：1
> 
> 时间：2012-06-08T11:54:31.933
> 
> 标签：c#, .net, n-tier-architecture

在我的 n 层架构中，我有一个映射器层来填充来自 DBlayer 的数据集/数据表的响应上下文。所以 DBlayer 调用 Mapperlayer 来完成这些事情。但在填充响应上下文之前，我需要做一些验证。为此，我应该从 mapperlayer 调用 businesslayer 吗？或者我应该将我从 DBlayer 获得的内容传递给 businesslayer，并要求 businesslayer 调用 mapperlayer。

在这里，我的业务层将使用业务实体进行自己的操作。请帮助我做出这个设计决定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:59:21.613

任何一个都可以“工作”，但我不喜欢将这些东西放在业务对象中。

让业务层调用映射器层会在包之间创建循环依赖关系。映射层已经*知道*业务层——这是它的核心职责。

但是为什么业务层要知道映射器呢？映射与业务逻辑无关。当然，坏处是，如果存在双向依赖，您将永远无法独立测试它们。

我会将其保留为单向依赖项。您可以通过这种方式独立于映射对象来测试业务对象。

我还将映射器保留在*持久*层内，而不是位于持久层和模型之间。让您的持久层返回业务对象，而不是结果集。如果可能的话，让它成为私有包。我的推理是一样的——最少的知识意味着最小的耦合。

有不同级别的验证。我会说数据应该在进入您的数据库之前很久就已经过验证。查询数据库时应该不需要验证，除了特定的业务规则。这些规则应该是服务层中业务事务的一部分，而不是持久层。

# c# - 更新配置文件而不重新启动应用程序

> ID：10948375
> 
> 赞同：0
> 
> 时间：2012-06-08T11:55:05.177
> 
> 标签：c#, web-services

我正在尝试在不关闭应用程序的情况下更新配置文件。问题是我仍在阅读缓存版本。我有一个不工作的 FileSystemWatcher。任何帮助表示赞赏

```
public partial class ChangeURL : Form
{

    Service ser = new Service();
    Configuration config =
        ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

    public ChangeURL()
    {
        InitializeComponent();
        textBox1.Text = ser.Url;
        start();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        changeSettings();
        this.Close();
    }
    public void changeSettings()
    {

        KeyValueConfigurationCollection settings = config.appSettings.Settings;

        try
        {
            ConfigurationManager.RefreshSection("appSettings");
            settings["client_postCodeRef_Service"].Value = textBox1.Text;
            ser.Url = settings["client_postCodeRef_Service"].Value;
            config.Save(ConfigurationSaveMode.Modified);

        }
        catch (ConfigurationErrorsException e)
        {
            MessageBox.Show("[Exception error: {0}]",
                e.ToString());
        }

     } // end change settings
                public void onChange(object source, FileSystemEventArgs e) 
                { 
                    ConfigurationManager.RefreshSection("appSettings"); 
                }
                public void start()
                {
                    FileSystemWatcher fileWatcher = new FileSystemWatcher();

                    if (fileWatcher == null)
                    {
                        string path = Path.GetDirectoryName(config.FilePath);
                        string filename = Path.GetFileName(config.FilePath);

                        fileWatcher = new FileSystemWatcher();
                        fileWatcher.Path = path;
                        fileWatcher.Filter = filename;
                        fileWatcher.NotifyFilter = (NotifyFilters.CreationTime | NotifyFilters.FileName);
                        fileWatcher.Changed += onChange;
                        fileWatcher.EnableRaisingEvents = true;

                    } // endif

                }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:00:55.557

只需在调用`ConfigurationManager.RefreshSection("appSettings");`之前调用`appConfig.AppSettings.Settings["myConfigData"].Value;`，这将强制应用程序读取新的和更改的设置。否则，ConfigurationManager 会固有地缓存所有值。

# reporting-services - 如何在 SSRS 中保持两行相邻？

> ID：10948378
> 
> 赞同：1
> 
> 时间：2012-06-08T11:55:19.020
> 
> 标签：reporting-services, rdlc

我的 .rdlc 文件中有一个 Tablix。![如下所示](../Images/15afcdc4c387635f1e86d5b32b71a992.png)

我以 pdf 格式打开我的报告文件。但有时“OtherInfoLabel”会出现在页面底部，而数据（OtherInfo）会进入下一页。

有没有办法将标签和文本保持在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:13:13.900

无法检查 tablix 的大小并决定是否中断。

你可以做的是：

*   在常规选项卡的分页选项下，选择以下选项之一： 在之前添加分页符。
*   如果要在表格前添加分页符，请选择此选项。之后添加分页符。
*   如果要在表格后添加分页符，请选择此选项。
*   如果可能，将表格放在一页上。如果您希望数据保留在一页上，请选择此选项。

参考：[Tablix 分页符](http://technet.microsoft.com/en-us/library/ms156434%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:40:06.623

首先取一个矩形，然后在该矩形内放置标签和文本。因此，它确保两件事都在同一条线上。

# .net - MSbuild - 在构建服务器上添加 3rd 方参考库的最佳实践是什么？

> ID：10948386
> 
> 赞同：3
> 
> 时间：2012-06-08T11:55:59.580
> 
> 标签：.net, visual-studio-2010, continuous-integration, jenkins

我正在学习使用 MSBuild 构建并在我新安装的 Jenkins CI 服务器上运行它们。

我遇到的问题是外部依赖项，例如 Automapper.dll，并且它们不在构建服务器上，因此我的构建失败并显示“无法找到程序集“AutoMapper””，这是可以理解的。

我根本不知道如何处理这个问题。我在 SO 和 Google 上搜索了过去两天，但最终变得更加困惑。我应该以某种方式将这些文件添加到我的 VS 解决方案中，还是应该在某个地方的 SVN 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:21:08.117

最基本和最常见的方法是`lib\`在源代码管理中创建一个文件夹，并使用相对路径从您的解决方案中引用这些文件夹。这样，构建服务器就可以像开发机器一样定位文件。

一种很好的方法是将[NuGet](http://nuget.org/)用于包依赖项。[JetBrains 的Team City](http://www.jetbrains.com/teamcity/)已经开箱即用地支持它。

[以下是有关 NuGet 的更多信息](http://jamesheppinstall.wordpress.com/2012/05/15/dependency-management-in-net-with-nuget-and-teamcity/)，它还展示了它在 Team City 中的工作方式：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:04:32.623

CI 机器需要能够从头开始构建项目。这包括第三方参考。根据我的经验，最简单的方法是在源代码控制结构中的某处创建“第三方”文件夹，然后从该文件夹中引用程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T14:13:59.943

我们使用 NuGet，它将所有内容都放在“包”文件夹下。只要他们都**在**一个地方，我想你会没事的。

# maven - 使用 DB 单元加载 DEMO 数据

> ID：10948388
> 
> 赞同：0
> 
> 时间：2012-06-08T11:56:10.330
> 
> 标签：maven, dbunit

我正在使用 Maven DBUnit 插件来加载单元测试的测试数据。我还想用它来将不同的数据集加载到不同的数据库以进行演示。dbunit 插件只允许单次执行。我应该只创建一个单独的 pom 还是有一些技巧可以做到这一点。（即，我想简单地做一些类似 mvn load-demo-data 的事情）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:58:39.480

如果您愿意，您可以[多次执行插件](http://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_executions_Tag)，这取决于您在 pom 中提供的配置：

```
 <plugin>
    <artifactId>maven-whatever-plugin</artifactId>
    <version>1.0</version>
    <executions>
      <execution>
        <id>execution1</id>
        <phase>test</phase>
        <configuration>
          ....
        </configuration>
        <goals>
          <goal>WhatEverGoalYouHave</goal>
        </goals>
        <phase>...</phase>
      </execution>
      <execution>
        <id>execution2</id>
        <configuration>
         ....
        </configuration>
        <goals>
          <goal>WhatEverGoalYouHave</goal>
        </goals>
        <phase>...</phase>
      </execution>
    </executions>
  </plugin> 
```

您还可以定义一个配置文件来控制执行，这可能是您的演示数据的正确选择。您描述的调用 mvn load-demo-data 在 maven 中是不可能的，因为 maven 只调用一个目标或生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T02:40:13.707

配置数据库凭据时使用属性

```
 <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>dbunit-maven-plugin</artifactId>
                    <version>${dbunit.plugin.version}</version>
                    <configuration>
                        <url>${db.url}</url>
                        <driver>${db.driver}</driver>
                        <username>${db.username}</username>
                        <password>${db.password}</password>
                     </configuration>
                     .. 
```

然后将配置文件部分添加到您的 POM，控制这些属性的设置：

```
<profiles>
    <profile>
        <id>db1</id>
        <properties>
           <db.url>jdbc:h2:target/db1;AUTO_SERVER=TRUE</db.url>
           <db.driver>org.h2.Driver</db.driver>
           <db.username>user</db.username>
           <db.password>pass</db.password>
        </properties>
    <profile>
    <profile>
        <id>db2</id>
        <properties>
           <db.url>jdbc:h2:target/db2;AUTO_SERVER=TRUE</db.url>
           <db.driver>org.h2.Driver</db.driver>
           <db.username>user</db.username>
           <db.password>pass</db.password>
        </properties>
    <profile>
    .. 
```

配置文件可以按如下方式激活以更新两个不同的数据库

```
mvn -Pdb1 clean test
mvn -Pdb2 clean test 
```

# mysql - 使用日期条件将多个 MySql 查询组合成一个查询

> ID：10948392
> 
> 赞同：1
> 
> 时间：2012-06-08T11:56:27.143
> 
> 标签：mysql, sql

我有一个名为 users 的表。

```
id   name date       cdate           c  a   b
1     rz  42121221  42121221         0  1   0
2     an  12122111  42121221         0  0   1
3     cb  22121221  42121221         1  1   1   
4     ss  3321221   42121221         1  0   0 
```

我必须选择两个日期之间的值，然后我必须使用这个语句找到计数。

```
 SELECT COALESCE(SUM(IF(c=1 AND a=0 AND b=1  ,  1, 0)),0) AS ACTIVE
   WHERE DATE BETWEEN 'DATE 1' AND 'DATE 2',
 COALESCE(SUM(IF(c=0 AND a=0 AND b=1  ,  1, 0)),0) AS INC
   WHERE cdate BETWEEN 'DATE 1' AND 'DATE 2'
 FROM users where dealer id='2' 
```

此查询不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:13:30.250

我会做这样的事情来满足您在一个查询中的需求：

试试看 ：

```
SELECT COALESCE(SUM(IF(u1.c=1 AND u1.a=0 AND u1.b=1, 1, 0)),0) AS ACTIVE,
COALESCE(SUM(IF(u2.c=0 AND u2.a=0 AND u2.b=1, 1, 0)),0) AS INC
from user u1
left outer join user u2 on u1.row_id = u2.row_id
where u1.DATE BETWEEN 'DATE 1' AND 'DATE 2' and
u2.cdate BETWEEN 'DATE 1' AND 'DATE 2' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:06:45.077

这是您的查询，格式正确。每个 SELECT 语句只能有一个 WHERE 子句，并且 FROM 子句位于 SELECT 子句之后和 WHERE 子句之前。

```
 SELECT SUM(IF(c=1 AND a=0 AND b=1 AND DATE BETWEEN 'DATE 1' AND 'DATE 2', 1, 0)) AS ACTIVE,
   SUM(IF(c=0 AND a=0 AND b=1 AND cdate BETWEEN 'DATE 1' AND 'DATE 2', 1, 0)) AS INC
 FROM users
 WHERE DATE BETWEEN 'DATE 1' AND 'DATE 2'
   OR cdate BETWEEN 'DATE 1' AND 'DATE 2' 
```

我将您的日期比较复制到 IF 语句中。

另外，我删除了 COALESCE 子句，因为在这种情况下它是多余的。SUM 总是返回一个值。

我将列放在一起，在 SELECT 子句之后用逗号分隔。

您现在可能希望删除 WHERE 子句，具体取决于您要执行的操作。

我也很怀疑`cdate BETWEEN 'DATE 1' AND 'DATE 2'`。如果 cdate 是 DATETIME 列，您需要在常量中输入格式正确的日期。如果 DATE 1 和 DATE 2 是列名，那么您需要反引号，而不是单引号，如下所示：

```
cdate BETWEEN `DATE 1` AND `DATE 2` 
```

您应该考虑阅读有关[SELECT 语法](http://dev.mysql.com/doc/refman/5.0/en/select.html)的文档。

# c# - 如何在具有键盘快捷键的按钮上显示提示？

> ID：10948394
> 
> 赞同：1
> 
> 时间：2012-06-08T11:56:33.713
> 
> 标签：c#, winforms, keyboard-shortcuts

我正在使用 Visual Studio 2008 中的 C# WinForm 应用程序。我已经通过覆盖 ProcessCmdKey 为一些按钮添加了键盘快捷键，这些按钮会触发按钮单击（CTRL + R、CTRL B 等...）。

当用户按住 CTRL 键时，我想在带有快捷方式文本（“CTRL + R”）的按钮旁边显示提示、工具提示或其他内容，以便用户可以看到哪些按钮具有快捷方式以及组合是什么.

有没有人对如何解决这个问题有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:59:37.647

`&`在 Caption中可以做到这一点。当用户按下`Alt`键时，`&`按钮标题中的字符变为下划线，当用户按下该下划线字符键时。按钮的点击事件被触发。

（抱歉忘记了这个术语）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:37:21.663

我通过创建一个看起来类似于标准工具提示（带有标签的小框）的 WPF 控件来解决这个问题。然后，我在表单上对 ProcessCmdKey 和 OnKeyUp 进行了覆盖，以收听 CTRL 键的按下和按下。

当用户按住 CTRL 键时，我会遍历所有具有快捷方式的控件，并在该控件之上创建一个 WPF 控件。对于每个 WPF 控件，我设置了相应的快捷方式文本。释放 CTRL 键后，我删除了 OnKeyUp 中的所有 WPF 控件。

# java - SmartGWT - 编辑 ListGrid 和 EditingNew 时的不同行为？

> ID：10948395
> 
> 赞同：0
> 
> 时间：2012-06-08T11:56:43.773
> 
> 标签：java, javascript, gwt, smartgwt

我有一个有 4 列的 ListGrid。当我编辑网格（在记录上使用 DoubleClick 事件）时，我希望用户**只能**编辑一列。

但是，我希望用户能够单击一个“添加”按钮，该按钮将调用 startEditingNew()，我希望他们在其中拥有所有列可供编辑。

这可以做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:13:19.613

我猜这两个要求不能同时应用，但它们都可以在两个不同的网格中实现。

否则，您也可以尝试首先使所有列都可编辑，然后通过处理 DoubleClickHandler，您可以通过列索引限制某些列的编辑。但这完全是实验性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:26:02.860

我会尝试在双击处理程序中添加一些使用 setCanEdit (false) 的代码到您不想触摸的 listGridField。在按钮单击处理程序中，您可以将所有字段设置为 true。

# visual-studio - TFS 2010 发布到特定位置

> ID：10948402
> 
> 赞同：1
> 
> 时间：2012-06-08T11:57:24.367
> 
> 标签：visual-studio, tfs, tfsbuild

在 TFS 构建方面需要帮助。

我的情况是我无法控制 IIS 框，并且开发/测试站点不会随着每次构建而改变。

有人可以介绍如何创建一个解决方案（sln）构建复制/删除已发布网站的 WF。我正在努力将drop放到没有所有子文件夹的UNC目录中，如何预编译/发布完全让我无法理解。

谢谢你

# asp.net-mvc-3 - 在 mvc3 中下载文件的问题

> ID：10948403
> 
> 赞同：0
> 
> 时间：2012-06-08T11:57:24.613
> 
> 标签：asp.net-mvc-3, jquery, download

在我看来，我需要从本地文件夹下载文件。

所以我写了一个 ajax 函数，如下所示

```
 <img  id="trailer" src="../../Images/icon.gif" alt="exists" title="Click on image to Download file"/>
<script type="text/javascript">
$(document).ready(function () {
    $('#trailer').click(function () {
        var cid = $('#CourseID').val();
        var fnm = $('#FileName').val();
        var url2 = "/Coursework/DownloadPrtfTrailor" + '?FileName=' + fnm + '&CourseID=' + cid;
        $.ajax({
            url: url2,
            cache: false,
            type: 'POST'
        });
    });
});

 </script> 
```

在控制器中，我编写了以下代码：

```
 [HttpPost]
    public ActionResult DownloadPrtfTrailor()
    {
        string fileName = string.Empty;
        string courseID = string.Empty;
        string filepath = string.Empty; 

        if (Request.QueryString != null && Request.QueryString.Count > 0)
        {
            if (!string.IsNullOrEmpty(Request.QueryString["FileName"]))
               fileName = Request.QueryString["FileName"];
            if (!string.IsNullOrEmpty(Request.QueryString["CourseID"]))
                courseID = Request.QueryString["CourseID"];
        }
        try
        {
            var fs = System.IO.File.OpenRead(Server.MapPath("/ePortfolio/" + courseID + "/" + "Icons" + "/" + fileName));
            string extn = "application/" + Path.GetExtension(fileName);
            return File(fs, extn, fileName);
        }
        catch
        {
            throw new HttpException(404, "Couldn't find " + fileName);
        }

    } 
```

通过这个我无法下载文件

但是当我通过如下的操作链接调用函数时

```
@Html.ActionLink("Download", "DownloadPrtfTrailor",
             new {CourseID=item.prtfMaster.CourseID, fileName1 = item.prtfMaster.IconFileName}) 
```

我可以成功下载文件我如何下载图片上的文件点击

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:14:26.133

您可以使用 window.open("url to file") 并下载文件。url 可以是控制器上的操作方法。

# c# - 将长字符串分成几行的正则表达式

> ID：10948405
> 
> 赞同：8
> 
> 时间：2012-06-08T11:57:33.480
> 
> 标签：c#, regex

我不是正则表达式方面的专家，今天在我的项目中，我需要将长字符串分成几行，以检查字符串文本是否适合页面高度。

我需要一个 C# 正则表达式来将长字符串分成几行`"\n"`， `"\r\n"`并且最多保持 150 个字符。如果字符 150 在一个单词的中间，整个单词应该移到下一行。

谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:34:55.737

这实际上是一个非常简单的问题。查找最多 150 个字符，后跟一个空格。由于正则表达式本质上是贪婪的，它会完全按照您的意愿行事。将其替换为 Match 加换行符：

```
.{0,150}(\s+|$) 
```

用。。。来代替

```
$0\r\n 
```

另见：[http ://regexhero.net/tester/?id=75645133-1de2-4d8d-a29d-90fff8b2bab5](http://regexhero.net/tester/?id=75645133-1de2-4d8d-a29d-90fff8b2bab5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:21:01.313

```
var regex = new Regex(@".{0,150}", RegexOptions.Multiline);
var strings = regex.Replace(sourceString, "$0\r\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:14:17.760

如果您只想将一个长字符串拆分为 150 个字符的行，那么我不确定您为什么需要正则表达式：

```
 private string stringSplitter(string inString)
    {
        int lineLength = 150;

        StringBuilder sb = new StringBuilder();

        while (inString.Length > 0)
        {
            var curLength = inString.Length >= lineLength ? lineLength : inString.Length;

            var lastGap = inString.Substring(0, curLength).LastIndexOfAny(new char[] {' ', '\n'});

            if (lastGap == -1)
            {
                sb.AppendLine(inString.Substring(0, curLength));
                inString = inString.Substring(curLength);
            }
            else
            {
                sb.AppendLine(inString.Substring(0, lastGap));
                inString = inString.Substring(lastGap + 1);
            }
        }

        return sb.ToString();
    } 
```

编辑以考虑断字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:05:13.177

干得好：

```
^.{1,150}\n 
```

这将匹配最长的初始字符串，如下所示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T12:31:45.690

这段代码应该可以帮助你。它将检查当前字符串的长度。如果在这种情况下它大于您的 maxLength （150），它将从第 150 个字符开始并（向后）找到第一个非单词字符*（如 OP 所述，这是一个非空格字符序列）* . 然后它将字符串存储到该字符并从剩余的字符串重新开始，重复直到我们最终得到一个小于 maxLength 个字符的子字符串。最后，将它们重新组合成最后的字符串。

```
string line = "This is a really long run-on sentence that should go for longer than 150 characters and will need to be split into two lines, but only at a word boundary.";

int maxLength = 150;
string delimiter = "\r\n";

List<string> lines = new List<string>();
// As long as we still have more than 'maxLength' characters, keep splitting
while (line.Length > maxLength)
{
    // Starting at this character and going backwards, if the character
    // is not part of a word or number, insert a newline here.
    for (int charIndex = (maxLength); charIndex > 0; charIndex--)
    {
        if (char.IsWhiteSpace(line[charIndex]))
        {
            // Split the line after this character 
            // and continue on with the remainder
            lines.Add(line.Substring(0, charIndex+1));
            line = line.Substring(charIndex+1);
            break;
        }
    }
}
lines.Add(line);
// Join the list back together with delimiter ("\r\n") between each line
string final = string.Join(delimiter , lines);

// Check the results
Console.WriteLine(final); 
```

**注意：**如果您在控制台应用程序中运行此代码，您可能希望将“maxLength”更改为较小的数字，以便控制台不会包裹您。

**注意：**此代码不会使任何制表符生效。如果还包括选项卡，您的情况会变得更加复杂。

**更新：**我修复了新行以空格开头的错误。

# sql-server - 服务代理和 WCF 互操作性

> ID：10948407
> 
> 赞同：5
> 
> 时间：2012-06-08T11:57:39.557
> 
> 标签：sql-server, wcf, service, interop, service-broker

SQL Server Service Broker 是否能够与 WCF 服务进行通信？我想创建一个 Service Broker 服务，它将一些 xml 消息发送到 WCF 服务进行处理。当然，SQL Server 实例和 WCF 服务部署在不同的机器上。是否有可能以某种方式配置 SB 服务来实现这样的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:01:16.140

不能。SSB 只能与另一个 SSB 实例通信。有一个[WCF SSB 通道](http://ssbwcf.codeplex.com/)，但它使用 SSB 作为 WCF 服务的传输通道，WCF 服务需要本地 SQL Server 才能使该通道工作（它可以是 SQL Express 实例）。

# android - 我在 listfragments 中传递了一个错误的构造函数

> ID：10948413
> 
> 赞同：0
> 
> 时间：2012-06-08T11:57:56.477
> 
> 标签：android, android-listview, baseadapter, android-listfragment

我对碎片比较陌生。
在`oncreate`方法中，我将此值传递给`Appetizerlist`.
但它显示一个错误。
如何清除错误？请帮我。

```
 public class MyListFragment1 extends ListFragment {

ImageView back;
String url = Main.url;
String Qrimage;
Bitmap bmp;
ListView list;

AppetiserFragment adapter;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.applistviewfragment, null);
    list = (ListView) view.findViewById(R.id.list);
    return view;

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    InputStream is = null;
    String result = "";
    JSONObject jArray = null;
    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url + "test.php3");
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        // TODO: handle exception
        Log.e("Log", "Error in Connection" + e.toString());

        // Intent intent = new Intent(ViewQRCode.this, PimCarder.class);

        // startActivity(intent);

    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        jArray = new JSONObject(result);
        JSONArray json = jArray.getJSONArray("appetiser");

        adapter = new AppetiserFragment(this, json);
        list.setAdapter(adapter);

    } catch (Exception e) {
        // TODO: handle exception
        Log.e("log", "Error in Passing data" + e.toString());
    }
}

   } 
```

AppetiserFragment.java

```
 public class AppetiserFragment extends BaseAdapter {

String url = Main.url;
public Context Context;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, price, desc, itemno;
String[] itemnames, checkeditems, itemnos;
String[] prices;
String[] descs;
HashMap<String, String> map = new HashMap<String, String>();

public AppetiserFragment(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =

    System.out.println(imageArrayJson);
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.prices = new String[imageArrayJson.length()];
    this.descs = new String[imageArrayJson.length()];
    this.itemnos = new String[imageArrayJson.length()];
    try {

        for (int i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);

            qrimage = image.getString("itemimage");
            itemname = image.getString("itemname");
            itemno = new Integer(i + 1).toString();
            price = image.getString("price");
            desc = image.getString("itemdesc");
            System.out.println(price);
            itemnames[i] = itemname;
            prices[i] = price;
            descs[i] = desc;
            itemnos[i] = itemno;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(map);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public AppetiserFragment() {
    // TODO Auto-generated constructor stub
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View view = convertView;
    final ViewHolder viewHolder;
    if (view == null) {
        view = inflater.inflate(R.layout.appetiserlistview, null);
        System.out.println("prakash");
        viewHolder = new ViewHolder();
        viewHolder.image = (ImageView) view
                .findViewById(R.id.appetiserimage);
        viewHolder.text = (TextView) view.findViewById(R.id.appetisertext);
        viewHolder.desc = (TextView) view.findViewById(R.id.appetiserdesc);
        viewHolder.price = (TextView) view
                .findViewById(R.id.appetiserprice);
        viewHolder.appitemnum = (TextView) view
                .findViewById(R.id.appitemno);
        // viewHolder.checkbox = (CheckBox) view.findViewById(R.id.bcheck);

        view.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) view.getTag();
    }
    viewHolder.image.setImageBitmap(bmps[position]);
    viewHolder.appitemnum.setText(itemnos[position]);
    viewHolder.price.setText(prices[position]);
    viewHolder.desc.setText(descs[position]);
    // viewHolder.checkbox.setTag(itemnames[position]);
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(itemnames[position]);

    return view;
}

static class ViewHolder {

    protected TextView text, price, desc, appitemnum;
    protected ImageView image;
    public static CheckBox checkbox = null;
} 
```

}

我给定整个代码我想要使用 listfragments 自定义列表视图

在此行的上述代码中，我在`adapter = new Appetizerlist(this, json);`
请告诉我如何解决问题时遇到错误。帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:08:10.613

在 onCreateView 之前调用 onCreate 所以列表将在 onCreate 中为空............

[http://developer.android.com/guide/topics/fundamentals/fragments.html](http://developer.android.com/guide/topics/fundamentals/fragments.html#Creating)

在 oncreate

```
 list.setAdapter(adapter); 
```

在 onCreateView 你初始化了

```
list = (ListView) view.findViewById(R.id.list); 
```

……

```
so move this line list.setAdapter(adapter); in onCreateView 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:08:13.377

**您在以下行中有错误。**

```
adapter = new Appetizerlist(this, json); 
```

将其更改为

```
adapter = new Appetizerlist(getActivity().getApplicationContext(), json); 
```

# java - Spring的验证

> ID：10948414
> 
> 赞同：0
> 
> 时间：2012-06-08T11:57:58.583
> 
> 标签：java, spring, validation, spring-mvc

我想在 spring 方面进行验证.. Spring 验证，但是当我试图在表单上传递错误时，**我得到了错误**：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'newProductType' available as request attribute
    org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
    org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    org.apache.jsp.jsp.admin_jsp._jspx_meth_form_005finput_005f0(admin_jsp.java:532)
    org.apache.jsp.jsp.admin_jsp._jspService(admin_jsp.java:143)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

这是我的代码：

**验证器：** 公共类 MetalTypeValidator 实现验证器 {

```
@Override
public boolean supports(Class<?> clazz) {
    return MetalTypeEntity.class.isAssignableFrom(clazz);
}

@Override
public void validate(Object target, Errors errors) {
    ValidationUtils.rejectIfEmptyOrWhitespace(errors, "value", "value.required");
} 
```

}

**在 spring 的 xml 中**声明验证器：****

 **```
<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />
<bean id="metalTypeValidator" class="com.javanix.xmetal.web.validator.MetalTypeValidator" /> 
```

**控制器：**

```
@Controller
@RequestMapping("/admin")
public class AdminController implements IConstants {
    @Autowired
    private MetalTypeValidator metalTypeValidator;

    @Autowired
    private MetalTypeServiceImpl metalTypeService;

    @RequestMapping
    public String getMainPageData(Map<String, Object> map) {
        map.put("newProductType", new MetalTypeEntity());
        map.put("productTypeList", metalTypeService.getList());
        return "admin";
    }

    @RequestMapping(value = "/add/product_type", method = RequestMethod.POST)
    public String addProductType(
            @Valid @ModelAttribute("newType") MetalTypeEntity entity,
            BindingResult result, SessionStatus status) {

        metalTypeValidator.validate(entity, result);
        if (result.hasErrors()) {
            // result.getModel().put("newProductType", new MetalTypeEntity());
            return "/admin";
        }
        metalTypeService.add(entity);
        return "redirect:/admin";
    }

} 
```

**瓷砖.xml**：

```
<definition name="admin" extends=".mainTemplate" >
    <put-attribute name="title" value="Admin page" type="string" />
    <put-attribute name="content" value="/jsp/admin.jsp" />
    <!-- here some other stuff -->
</definition> 
```

**admin.jsp（使用我的实体的块）：**

```
<div id="MetalType">
    <table class="data">
        <tr>
            <th><spring:message code="label.header.metal.name"/> **</th>
            <th>&nbsp;</th>
        </tr>
        <c:forEach items="${productTypeList}" var="productType">
            <tr>
                <td>${productType.value}</td>
                <td><a href = "<c:url value="admin/delete/product_type/${productType.id}" />" > <spring:message code="label.button.delete"/> </a> </td>
            </tr>
        </c:forEach>

        <form:form method="post" action="admin/add/product_type" commandName="newProductType">
            <tr>
                <td><form:input path="value"/></td>
                <td><input type="submit" value="<spring:message code="label.type.add"/>"/></td>
            </tr>
            <tr>
                <td><form:errors path="value" cssClass="errors"/></td>
                <td>&nbsp;</td>
            </tr>
        </form:form>

    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:01:36.813

将这样的内容添加到您的`Controller`课程中：

```
@ModelAttribute("newProductType")
public MetalTypeEntity createMetalTypeEntity() {
    return new MetalTypeEntity();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:27:51.857

这是 Spring CRUD 应用程序的一个很好的示例：

[http://www.javacodegeeks.com/2011/04/spring-mvc3-hibernate-crud-sample.html?m=1](http://www.javacodegeeks.com/2011/04/spring-mvc3-hibernate-crud-sample.html?m=1)

看一下

```
@RequestMapping(value="/updateContact", method=RequestMethod.POST)
 public String update(@ModelAttribute("editContact") Contact contact, BindingResult result, SessionStatus status)
 {
  validator.validate(contact, result);
  if (result.hasErrors()) {
   return "editContact";
  }
  contactsDAO.update(contact);
  status.setComplete();
  return "redirect:viewAllContacts.do";
 } 
```**

# linux - 如何从 linux 内核核心转储中找到“HZ”值？

> ID：10948422
> 
> 赞同：0
> 
> 时间：2012-06-08T11:58:30.017
> 
> 标签：linux, linux-kernel, kernel, clock, coredump

是否有可以读取的全局变量？从 2.6 内核开始，它是可配置的，所以我不能确定是否确实使用了默认值。我正在使用“崩溃”来调试内核核心转储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T02:02:27.530

它是在编译期间在内核的 .config 中配置的。检查您的 .config 文件；搜索 CONFIG_HZ_；在我的配置中 HZ 是 250（CONFIG_HZ_250=y）。通常，.config 文件存在于“/lib/modules/”目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:01:16.660

今天有几个 Linux 内核不使用静态频率，而是在运行时动态改变它，所以没有你可以读取的全局变量。

# javascript - slideToggle 在不同的 DIV 上切换不同的效果

> ID：10948423
> 
> 赞同：0
> 
> 时间：2012-06-08T11:58:30.027
> 
> 标签：javascript, jquery, jquery-ui, slidetoggle

当我点击第一个 DIV 时，slideToggle 效果正确完成。当我点击第二个时，它似乎没有应用效果，内容突然出现。

第三个元素和除第一个元素之外的任何其他元素也是如此。

这是怎么回事？（演示在这里工作：http: [//jsfiddle.net/SW5sc/6/](http://jsfiddle.net/SW5sc/6/)）

我有这个 HTML 结构：

```
<div class="subcategory">Option 1 </div>
<div class="subcategoryContent">

    <div class="subcategoryOption">
        <div class="image">
            <img src="vista/imgs/grupales.gif" alt="Clases grupales" />
        </div>

        <div class="text">
            TEXT
        </div>
    </div>

</div>

<div class="subcategory">Option 2</div>
<div class="subcategoryContent">
    <div class="subcategoryOption">
        <div class="image">
            <img src="vista/imgs/grupales.gif" alt="Clases grupales" />
        </div>

        <div class="text">
            TEXT
        </div>
    </div>
</div> 
```

这个jQuery代码：

```
$(".subcategory").click(function () {
                    $(this).next(".subcategoryContent").slideToggle(450).siblings(".subcategoryContent").slideUp(450);
                    return false;
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:27:06.973

从 CSS 中删除所有“float”-properties，它就可以正常工作了！:-) 花车毁了动画..

# .net - 使用凭据登录到 Web 服务

> ID：10948425
> 
> 赞同：-3
> 
> 时间：2012-06-08T11:58:43.720
> 
> 标签：.net, web-services

伙计们，

我有网络服务的网址`curl -u username:password domain/wservice/fire`以及用户名和密码。

如何使用我拥有的凭据调用 web 服务？代码示例会很棒..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:08:42.423

看看[这个页面](http://man.ddvip.com/web/bsaspnetapp/LiB0087.html)，我认为它很有用，这是你的答案吗？

# http - 访问仅限于 Heroku 的静态 IP 地址的 API 的好策略是什么？

> ID：10948434
> 
> 赞同：6
> 
> 时间：2012-06-08T11:59:27.373
> 
> 标签：http, heroku, nginx, amazon-ec2, ip-address

我需要我的应用程序能够访问基于单个静态 IP 地址限制访问的第三方 API。

由于 Heroku dynos 和路由网格的动态特性，这是不可能的 - 我需要具有固定 IP 地址的东西来充当代理。

美国东部 EC2 Linux/Nginx 实例似乎是明智的选择，但对于一些非常微不足道的事情来说，这些似乎需要大量工作/维护。有谁知道有什么服务可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:26:11.680

好的，经过一番研究，我发现目前执行此操作的最佳方法确实是使用运行某种代理的 AWS 美国东部 EC2 实例。我已经使用了 linux/nginx。

我还了解到目前处于 alpha 开发阶段的 Heroku 插件可以完全满足这一要求。如果您想测试它，请联系 Heroku 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:39:28.890

您还可以使用[Proximo 插件](https://addons.heroku.com/proximo)通过代理获取静态出站 IP 地址，而无需担心任何维护问题。

# .htaccess - 如何仅重定向 4 个文件夹级别的 URL 而不是 3 个级别的 URL

> ID：10948435
> 
> 赞同：0
> 
> 时间：2012-06-08T11:59:29.490
> 
> 标签：.htaccess, redirect

我的网站需要将具有四个子文件夹的所有内容重定向到不同的子域...

```
domain.com/1/2/3/4 
```

不得重定向

和

```
domain.com/1/2/3 
```

必须重定向到

```
newsub.domain.com/1/2/3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:26:26.270

如果你想重定向`domain.com/1/2/3/4`但不`domain.com/1/2/3`使用这个：

```
RewriteEngine on
RewriteBase /
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ http://sub.domain.com/$1/$2/$3/$4 [L] 
```

如果您想重定向`domain.com/1/2/3`但不是`domain.com/1/2/3/4`这应该可以帮助您：

```
RewriteEngine on
RewriteBase /
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ http://sub.domain.com/$1/$2/$3 [L] 
```

# windows-phone-7 - 如何在 wp7 中制作像 Office 应用一样的加载效果？

> ID：10948438
> 
> 赞同：1
> 
> 时间：2012-06-08T11:59:39.093
> 
> 标签：windows-phone-7, panorama-control

一旦打开 Office 应用程序，全景图的标题和元素就会“飞”到屏幕上。如何在我自己的应用程序中制作这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:06:12.927

您需要添加对[Silverlight 工具包](http://silverlight.codeplex.com/)的引用（也可通过 nuget 获得），然后只需添加一些样板代码即可添加转换：

添加程序集命名空间：

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

然后在`PhoneApplicationPage`元素下添加：

```
<toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardIn"/>
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardIn"/>
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardOut"/>
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardOut"/>
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

还有其他可用的转换，并且可以从 Toolkit 网站获得示例...

# python - Mongoengine 文档作为 EmbeddedDocument

> ID：10948451
> 
> 赞同：5
> 
> 时间：2012-06-08T12:00:39.387
> 
> 标签：python, mongodb, mongoengine

我有一个用户定义的 mongoengine.Document 子类。

```
class User(Document):
    meta = {'collection': 'users', 'allow_inheritance': False}
    _id = ObjectIdField()
    password = StringField(max_length=50)
    name = StringField(max_length=50, required 
```

现在我想将它用作带有自己集合的独立文档，但我也想将它用作 EmbeddedDocument 作为游戏记录的一部分：

```
class Game(Document):
    meta = {'collection': 'games', 'allow_inheritance': False}
    _id = ObjectIdField()
    name = StringField()
    owner = EmbeddedField(User) 
```

但有一个问题。Mongoengine 只允许嵌入 EmbeddedDocument 子类。有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:28:52.513

试试这样：

```
class User(Document, EmbeddedDocument):
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:33:32.713

你不应该使用a[`ReferenceField`](http://mongoengine-odm.readthedocs.org/en/latest/guide/defining-documents.html#reference-fields)吗？

否则，您将存储两个断开连接但逻辑相同的文档。

# android - 从jquery处理android中的后退按钮

> ID：10948457
> 
> 赞同：1
> 
> 时间：2012-06-08T12:01:08.830
> 
> 标签：android

我们在 jQuery 中开发了一个与 android 集成的应用程序（只有一个活动）。从这个活动中，我们正在加载一个 HTML 文件，在这个文件上我们显示和隐藏 div 内容。在查看此处提供的网页并按下 android 中提供的返回按钮时，应用程序退出。我们希望应用程序在单击后退按钮时转到上一页。

（点击 android 后退按钮时，我们需要显示隐藏的 div 内容，点击 div 内容页面中的 android 后退按钮，应用程序应该退出。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:05:28.910

在您的 HTML 页面中使用此代码来处理按下的后退按钮

```
document.addEventListener("backbutton", onBackKeyDown, false);

function onBackKeyDown() {
// Handle the back button
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:31:56.847

尝试这个：

```
function onDeviceReady() {
    // Add this line to the on onDeviceReady() function
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle back button hardware
function onBackKeyDown(e) {
    e.preventDefault(); // the default action of the event e should not be triggered. 
    history.back(1); // load the previous window.location
} 
```

# vim - 为什么我的 vimrc 无法识别

> ID：10948458
> 
> 赞同：0
> 
> 时间：2012-06-08T12:01:13.217
> 
> 标签：vim

vimrc 中的以下命令适用于我的 ubuntu 操作系统中的 vim，

```
:map 11 :tabnext 1<CR> 
```

，在我的 CentOS 系统中，我输入了“11”，它返回： ![在此处输入图像描述](../Images/d1a212ecabe700884a0300cd702035f5.png)

，我要删除`'<CR>'`，然后输入“ `Enter`”键跳转到tab 1；

vimrc 中的所有 ' `<CR>`' 都不起作用，vim 似乎无法将 ' `<BR>`' 识别为 " `Enter`" KEY，有人帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:15:14.310

尝试将 <CR> 替换为`Ctrl + V``Enter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:25:13.267

看起来你的 CentOS 系统以 Vi 兼容模式启动 Vim。确切地说，似乎设置了`<`标志。`'cpoptions'`

`vim -N`尝试通过或 放在`set cpo-=<`映射定义之前来启动 Vim 。如果这解决了问题，您可能希望永久禁用 Vi 兼容模式，方法是`set nocompatible`将`.vimrc`.

# java - 投射时 List 的新实例

> ID：10948463
> 
> 赞同：0
> 
> 时间：2012-06-08T12:01:25.323
> 
> 标签：java

这条线：

```
List params = (List) hashMap.get(key); 
```

创建一个新列表，或者只是将其附加到列表中？

这是我使用代码的方式：

```
ParameterCache cache = ParameterCache.getInstance();
        HashMap hashMap = cache.getAllParameters(ParameterCodeConstants.PARAMETER_DORF_REGION, false);
        ArrayList regionIdList=new ArrayList();
        Set keys = hashMap.keySet();
        Iterator it = keys.iterator();
        while (it.hasNext()) {
            BigDecimal key = (BigDecimal) it.next();
            List params = (List) hashMap.get(key);
            if (params != null && params.size() > 0) {
                ParameterDTO paramDTO = (ParameterDTO) params.get(0);

                String textValue = paramDTO.getParameterTextValue();
                if(textValue.equals(region_id)){
                    regionIdList.add(paramDTO.getRegion());
                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:04:36.367

诸如此类的表达式

```
(List) hashMap.get(key); 
```

不会*创建*新列表。它将返回存储在地图中的列表引用的副本。

（而且我没有看到任何调用，`add`所以我也看不到如何附加任何内容。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:05:26.400

> 此行是创建一个新列表还是只是附加到列表中
> 
> ```
> List params = (List) hashMap.get(key); 
> ```

这些都不是——这里只有一个任务。此映射中与 关联的值`key`应该是对现有`List`对象（或`null`）的引用，并且由`get`. 然后将此引用分配给`params`。

由于在`params`此声明之前局部变量不存在，因此无论如何都没有可附加任何内容的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:05:31.950

在该行`List params = (List) hashMap.get(key);`中，params 将是 hashmap.get(key) 的返回值。所以不，那里没有发生附加。

# mysql - 如何在mysql中加入三个或更多表

> ID：10948467
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:01:44.003
> 
> 标签：mysql

我有三个表，我想从中检索值，我使用下面的查询给我错误，谁能告诉我出了什么问题？

```
SELECT a.VISITOR_TEXT,a.COMPANY_TEXT,a.CONTACT,a.PERSON_TO_MEET,a.DEPARTMENT_TEXT,a.FLOOR,b.BELONGING_T
YPE,b.BELONGING_TEXT ,a.INTIME, c.EXIT_TIME FROM tm_visitor a  LEFT JOIN tm_belonging b , tm_exit c ON a.ID=b.
BID AND a.ID=c.ID; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:04:29.050

```
SELECT a.VISITOR_TEXT,a.COMPANY_TEXT,a.CONTACT,a.PERSON_TO_MEET,a.DEPARTMENT_TEXT,a.FLOOR,b.BELONGING_TYPE,b.BELONGING_TEXT ,a.INTIME, c.EXIT_TIME FROM tm_visitor a  
LEFT JOIN tm_belonging b ON a.ID=b.BID 
LEFT JOIN tm_exit c ON a.ID=c.ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:05:16.810

这就是您要查找的内容：

```
SELECT  a.VISITOR_TEXT,
        a.COMPANY_TEXT,
        a.CONTACT,
        a.PERSON_TO_MEET,
        a.DEPARTMENT_TEXT,
        a.FLOOR,
        b.BELONGING_TYPE,
        b.BELONGING_TEXT,
        a.INTIME,
        c.EXIT_TIME 
FROM    tm_visitor a  
        LEFT JOIN tm_belonging b ON b.BID = a.id
        LEFT JOIN tm_exit c ON c.ID = a.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:05:24.307

您不能使用`,`连接语法。仅在 from 语法中。采用

```
SELECT  a.VISITOR_TEXT, a.COMPANY_TEXT,a.CONTACT, a.PERSON_TO_MEET,a.DEPARTMENT_TEXT, a.FLOOR,b.BELONGING_TYPE,b.BELONGING_TEXT, a.INTIME, c.EXIT_TIME 
FROM tm_visitor a  
LEFT JOIN tm_belonging b  ON a.ID=b.BID
left join tm_exit c ON a.ID=c.ID 
```

# javascript - Web 解决方案中带有复选框和过滤器的组合框

> ID：10948468
> 
> 赞同：1
> 
> 时间：2012-06-08T12:01:52.467
> 
> 标签：javascript, jquery, asp.net

我想做一个组合框，但我的用户可以选择多个选项，所以，如果我用 Checkbox 做一个组合框会很有用。

但是这个带有复选框的组合框是从我的数据库中绑定的，所以我需要在带有复选框的组合框内放置一个过滤器。

如何通过 Jquery 或 ASP.NET/C# 做到这一点？

我试过[这个，](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)但我需要放一个过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:38:15.177

您可以`<asp:CheckBoxList`在她的 a 上使用 a with `TextBox`，然后使用作为过滤器在 TextBox 上键入的内容绑定复选框列表。

此外，如果您将 CheckBoxList 放在宽度/高度有限的 div 中，并启用滚动，您就有了您的要求。

菜单打开，是div的简单打开关闭，有一些延迟。

# sql - ACCESS 2010：如何从两个查询中选择值？

> ID：10948471
> 
> 赞同：1
> 
> 时间：2012-06-08T12:01:59.683
> 
> 标签：sql, ms-access-2010

我有两个选择查询，我想从两者中选择值并有一个新查询。我试图加入他们，但我没有得到我想要的信息。

我的第一个查询是以下查询：

```
 SELECT InWarehouse.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity, 
      NZ(SUM(InWarehouse.quantity),0) AS quant
 FROM drugs 
      LEFT JOIN (SELECT drug_id, 
                        expiry_date, 
                        SUM(in_quant - out_quant) AS quantity 
                FROM warehouse GROUP BY drug_id, expiry_date)  
 AS InWarehouse ON 
      InWarehouse.drug_id = drugs.id
      GROUP BY InWarehouse.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity; 
```

第二个是：

```
 SELECT InPharmacy.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity,
      NZ(SUM(InPharmacy.quantity), 0) as quant
 FROM (drugs
 LEFT JOIN (SELECT drug_id, expiry_date, SUM(in_quant - out_quant) as quantity
            FROM pharmacy
            GROUP BY drug_id, expiry_date) as InPharmacy
 ON InPharmacy.drug_id = drugs.id)

 GROUP BY  InPharmacy.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity; 
```

我想得到：

```
InWarehouse.expiry_date, 
drugs.active_substance, 
drugs.strength, 
drugs.strength_type, 
drugs.dosage_form, 
drugs.minimum_quantity,
InWarehouse.quantity + InPharmacy.quantity,
InPharmacy.expiry_date
GROUP BY InWarehouse.expiry_date = InPharmacy.expiry_date 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:07:17.073

您可以将这两个查询作为主查询的子查询：

```
SELECT InWarehouse.expiry_date, 
t1.active_substance, 
drugs.strength, 
drugs.strength_type, 
drugs.dosage_form, 
drugs.minimum_quantity,
InWarehouse.quantity + InPharmacy.quantity,
InPharmacy.expiry_date
FROM (SELECT InWarehouse.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity, 
      NZ(SUM(InWarehouse.quantity),0) AS quant
 FROM drugs 
      LEFT JOIN (SELECT drug_id, 
                        expiry_date, 
                        SUM(in_quant - out_quant) AS quantity 
                FROM warehouse GROUP BY drug_id, expiry_date)  
 AS InWarehouse ON 
      InWarehouse.drug_id = drugs.id
      GROUP BY InWarehouse.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity  
) t1
JOIN (  SELECT InPharmacy.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity,
      NZ(SUM(InPharmacy.quantity), 0) as quant
 FROM (drugs
 LEFT JOIN (SELECT drug_id, expiry_date, SUM(in_quant - out_quant) as quantity
            FROM pharmacy
            GROUP BY drug_id, expiry_date) as InPharmacy
 ON InPharmacy.drug_id = drugs.id)

 GROUP BY  InPharmacy.expiry_date, 
      drugs.active_substance, 
      drugs.strength, 
      drugs.strength_type, 
      drugs.dosage_form, 
      drugs.minimum_quantity ) t2
 ON t1.active_substance = t2.active_substance 
```

我已经使用`active_substance`字段作为键来连接两个表，如果不合适，您可以选择更合适的列集，但是技术是两个将两个 dinstinct 查询作为主查询的子查询并以正确的方式加入它们...

# messagebroker - Windows 服务“真正的小型消息代理”或“rsmb”

> ID：10948472
> 
> 赞同：0
> 
> 时间：2012-06-08T12:02:14.157
> 
> 标签：messagebroker, mqtt

[http://markallanson.net/wordpress/index.php/category/rsmb/](http://markallanson.net/wordpress/index.php/category/rsmb/)

我试图按照上面的链接将 mqtt 设置为 Windows 服务以在后台静默运行。但是，无法按照作者在步骤一和二中所说的话。也没有任何评论/问题的空间。

我想这样做，这样我就不需要每次启动远程机器时都输入用户名和密码。

如果您知道如何设置。在 Windows 中不插入密码的任何替代选项。或任何建议请分享。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T19:51:13.797

我无法回答您的具体问题，但我可以推荐 winsw“windows 服务包装器”包将任何可执行文件转换为服务： http: [//kenai.com/projects/winsw](http://kenai.com/projects/winsw)

我还可以告诉您，mosquitto mqtt 代理 ( [http://mosquitto.org/](http://mosquitto.org/) ) 的 Windows 安装会自动将自身安装为服务，因此这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:17:15.033

我很惊讶你不能在原帖上问这个问题——上面有一个评论表——http: [//markallanson.net/wordpress/index.php/2009/running-ibms-really-small-message -windows上的经纪人/](http://markallanson.net/wordpress/index.php/2009/running-ibms-really-small-message-broker-on-windows/)

您是否安装了 Windows Server 2003 资源工具包？您是否按照作者的描述解压缩了 RSMB？如果是这样，他列出的命令应该适合你。

正如 Roger 所说，另一种选择是使用类似于 RSMB 但不受许可证限制的 mosquitto。

# ajax - 如何将事件绑定到 ajax 生成的元素

> ID：10948475
> 
> 赞同：0
> 
> 时间：2012-06-08T12:02:25.267
> 
> 标签：ajax, yii, jquery

我正在使用`RenderPartial`生成`CListView`并且所有内容都正确生成并且良好的分页也可以正常工作。但是，当我将自定义 JS 添加到由`CListview`它生成的元素时，它对于第一页内容工作正常，但是当我使用分页并单击第 2 页时，JS 绑定失败。

有没有其他方法可以将自定义事件绑定到`CListview`我尝试使用 live 时在 YII 中生成的元素，而我的 js 文件对我来说毫无用处。

我想我必须在每次加载 ajax 时调用我的函数，但是如何在 yii 中实现

这是我用来通过按钮单击更新服务器上的评级的脚本，这是定义这些表单和按钮的元素由`CListview`yii生成

```
$(document).ready(function(){
    $('form[id^="rating_formup_"]').each(function() {
        $(this).live('click', function() {
            alert("hi");
            var profileid=  $(this).find('#profile_id').attr('value');
            var userid=  $(this).find('#user_id').attr('value');  
            console.log(userid);
            var data = new Object();
            data.profile_id=profileid;
            data.user_id=userid;
            data.liked="Liked";
            $.post('profile_rating_ajax.php', data, handleAjaxResponse);
            return false;     
       });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:18:24.263

您也可以尝试[CGridView.afterAjaxUpdate](http://www.yiiframework.com/doc/api/1.1/CGridView#afterAjaxUpdate-detail)：

```
'afterAjaxUpdate' => 'js:applyEventHandlers' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:06:46.680

$.each 方法将仅在现有元素上循环，因此活动活页夹永远不会看到 ajax 生成的内容。

你为什么不试试这样：

```
$(document).ready(function(){
  $('form[id^="rating_formup_"]').live('click', function() {
      alert("hi");
      var profileid=  $(this).find('#profile_id').attr('value');
      var userid=  $(this).find('#user_id').attr('value');  
      console.log(userid);
      var data = new Object();
      data.profile_id=profileid;
      data.user_id=userid;
      data.liked="Liked";
      $.post('profile_rating_ajax.php', data, handleAjaxResponse);
      return false;     
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:13:05.330

这个问题可以通过两种方式解决：

1.  对将要接收该事件的每个项目使用“onclick”html 定义，并在生成元素时，将 $data 的 id 传递给 js 函数。例如，在“查看”页面内：

    ```
    echo CHtml::htmlButton('click me', array('onclick'=>'myFunction('.$data->id.')'); 
    ```

2.  像框架一样将事件处理程序绑定到“body”。他们将在 ajax 更新后生存：

    ```
    $('body').on('click','#myUniqueId',funcion(){...}); 
    ```

# android - ZXing集成手册/帮助查找其他功能

> ID：10948479
> 
> 赞同：0
> 
> 时间：2012-06-08T12:02:45.620
> 
> 标签：android, zxing

ZXing 库集成有详细的手册吗？我已经成功地集成了应用意图.. 但我理解它的方式不是通过查看 ZXing 站点（wiki），坦率地说，我阅读了该手册页十几次，但我无法弄清楚如何工作。在搜索过程中，我发现了一个博客，其中有人提供了基本扫描仪的源代码。我终于明白了如何从那里调用 ZXing 应用程序：

```
Intent intent = new Intent(
                    "com.google.zxing.client.android.SCAN"); 
```

我使用以下方式从应用程序接收数据：

```
final String code = intent.getStringExtra("SCAN_RESULT");
final String format = intent.getStringExtra("SCAN_RESULT_FORMAT"); 
```

我的疑问：是否还有返回其他类型数据的调用。例如，在扫描之后，有一段文字说“找到纯文本”或“找到项目”之类的东西。我可以通过意图将此返回到我的应用程序吗？我在这方面搜索了很多，也搜索了 SE，但没有找到任何东西。我知道有一个 Wiki （但我没有找到像上面发布的代码那样的东西！：S）任何形式的帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:58:37.387

这就是您需要知道的全部内容：[http](http://code.google.com/p/zxing/wiki/ScanningViaIntent) ://code.google.com/p/zxing/wiki/ScanningViaIntent 我认为您已经找到了。你试过了吗——你不知道怎么做是什么意思？这是几行代码。

您正在尝试手动重新创建集成代码已经为您执行的操作。你不需要做你想要做的事情，这就是为什么官方文档没有告诉你这样做。这更容易。

您所要求的一切都已在该页面上解决。例如，请参阅该类的 javadoc：

[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentIntegrator.java)

[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentResult.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentResult.java)

# c++ - 关于c++中的括号

> ID：10948483
> 
> 赞同：1
> 
> 时间：2012-06-08T12:02:57.943
> 
> 标签：c++, c++11, parentheses

> **可能重复：**
> [decltype 和括号](https://stackoverflow.com/questions/3097779/decltype-and-parenthesis)

```
int i=6;
decltype((i)) var5 = i;      // int& 
```

我只是不明白为什么括号中的“i”被视为左值，现在，我知道括号的应用，直到我在 MSDN 中发现：内括号导致语句被评估为表达式而不是会员访问。（[http://msdn.microsoft.com/en-us/library/dd537655.aspx](http://msdn.microsoft.com/en-us/library/dd537655.aspx)），我也没有理解一个我很久没有理解的问题。

```
template<typename T>
class B
{
public:
    B(T t){printf("B\n");}

};
template <typename T >
void ft(T t)
{
    t.f();
}
int _tmain(int argc, _TCHAR* argv[])
{
    B<A> b1(A());   //one function declaration, A() is regarded as fun-ptr, and b1 is a function
    B<A> b2((A())); //A() is regarded as anonymous object.
    return 0;   
} 
```

为什么`A()`放在括号中时被视为匿名对象`(A())`。MSDN中关于decltype的内括号解释不适用于这种情况。有人可以告诉我，在 C++ 标准的这两种情况下，是否有关于括号函数的扩展。我该如何更好地理解这一点，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:23:54.377

这些是完全不同的情况。

```
B<A> b1(A()); 
```

这是一个函数声明，因为它遵循语法产生式“return-type identifier '(' parameter-declaration-list ')'”，其中 parameter-declaration-list 是以逗号分隔的参数声明列表。这种声明的产生是“type abstract-declarator[opt]”。一个抽象声明符可以是空的，或者是“'('abstract-declarator ')'”。因此，“A()”匹配类型 (A)，后跟括号形式的抽象声明符，其中包含空形式的抽象声明符。因此，代码在语法上是一个有效的函数声明，并被解析。

```
B<A> b1((A())); 
```

在这里，如果我们要走函数声明路线，我们需要将“（A（））”匹配到参数声明；但是，没有办法做到这一点。所以这不是函数声明，因此必须是带有直接初始化程序的变量声明。

另一种情况在语法上是明确的。decltype(i) 和 decltype((i)) 都是简单的 decltype 派生。在第一种情况下，语法树是 DeclType( DeclRefExpression("i") )，在第二种情况下，它是 DeclType( ParenExpression( DeclRefExpression("i") ) )。

这里的特殊部分是 decltype 的规则。decltype 规则如下：

1.  如果表达式是函数调用，则 decltype 的结果是该函数的声明类型。例如，给定“int foo()”，decltype(foo()) 是“int”。给定“int& foo()”，decltype(foo()) 是“int&”。
2.  如果表达式是声明引用表达式，则 decltype 的结果是该声明的声明类型。给定“int i”，decltype(i) 是“int”。给定“int& i”，decltype(i) 是“int&”。
3.  如果以上都不适用并且表达式是左值，则 decltype 的结果是对表达式类型的左值引用。如果表达式是 int 类型的左值，则结果为“int&”。
4.  如果上述规则均不适用，则 decltype 的结果是表达式的类型。如果表达式是 int 类型的右值，则结果为“int”。

在 decltype(i) 中，表达式是 i 的 declref。i 的类型是 int。因此，decltype(i) 是“int”。在 decltype((i)) 中，表达式是一个 parenexpr。括号包含什么并不重要——规则 1 和 2 都不能适用。但是，(i) 是左值，因此适用规则 3。(i) 的类型是 int，所以 decltype((i)) 是 "int&"。

# php - 用 PHP 和 MYSQL 构建数据库网站

> ID：10948487
> 
> 赞同：1
> 
> 时间：2012-06-08T12:03:19.417
> 
> 标签：php, javascript, mysql, html

有谁知道建立数据库驱动网站的任何好的教程？

我正在尝试建立一个站点，它将执行以下操作：

1.  我将数据上传到不同的表（类别）到 MYSQL 数据库中
2.  前端用户选择一个类别
3.  然后数据库打印出该类别中的所有数据

看起来很简单吧？但我从哪里开始！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:07:33.873

您总是可以开始使用 W3Schools 上的 PHP 教程 - [http://www.w3schools.com/php/default.asp](http://www.w3schools.com/php/default.asp)

在我提出建议之前，它们是一个好的开始，特别是如果您对 PHP 或 PHP 和 MySQL 还很陌生。

至于打印出来，我猜你的意思是在网页上显示它，教程也会涵盖这一点。

一旦熟悉了你在做什么，我强烈推荐 Lynda.com 上的教程 - [http://www.lynda.com/](http://www.lynda.com/)

它们真的很好地组合在一起，并带有视频演练，因此无论您的学习方式如何，您都可以得到覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:17:40.897

在我看来，从头开始学习 php 基础知识，了解你的变量以及它们的作用、if/else 语句、循环 n 函数等等等。以及它们的操作方式/原因。

一旦你掌握了基础知识，就可以像上面建议的那样做一些事情，比如 lynda.com（我用过它们很棒）和其他 tuts 在线/书籍等。

要做你想做的事，你不仅需要这个（我上面提到的基本概念），而且你还需要学习 SQL/MySql，这是另一种简单但容易搞砸的语言，尤其是起初取决于什么/您想从数据库中提取多少/多少，将其与 php 混合并在页面上打印，设置数据库/表等...

此外，为了组织和显示您的内容，您需要了解如何提取所述数据，从而学习基本的基础知识。

就 W3Schools 而言 - 基础知识很好。只是我的 .02 如果你做功课，并且可以有条不紊地处理你需要的东西，几天后你应该可以开始运行了。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:09:24.030

如果您使用**PHP**来构建您的网站，请在服务器的 PHPMYADMIN 上维护数据库。使用 mysql_connect 函数从您的 php 代码连接到 mysql..follow this link... [php_on_server](http://dalibor.dvorski.net/downloads/docs/InstallingConfiguringDevelopingWithXAMPP.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:07:15.327

您可以先查看此处的示例代码：http: [//www.willfitch.com/mysqli-tutorial.html](http://www.willfitch.com/mysqli-tutorial.html)

然后查看php文档： http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

注意不要与 mysql_ 和 mysqli_ 函数混淆。mysqli_ 是你想要的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T12:33:00.183

我使用了几个 For Dummies 系列来学习 PHP/MySQL/phpMyAdmin。我敢肯定纯粹主义者会不赞成:)

但是，我的一位熟人在 Google 工作，他在我耳边说 AJAX 站点是一种比 PHP 驱动的站点更好的处理方式。

所以我几乎重写了我所做的一切，以尽量减少页面重新加载的需要。所以我现在在服务器端使用 PHP，但客户端从来没有用 PHP 构建。它以纯 HTML 开始，然后使用 Javascript 进行调用。

我分享这个不是因为我有很好的专业知识，而是因为如果你从一开始就走 AJAX 之路，以后可能会为你省去一些心痛:)

# c# - 如何在结构中使用 linq

> ID：10948488
> 
> 赞同：1
> 
> 时间：2012-06-08T12:03:22.440
> 
> 标签：c#, silverlight, linq, struct, lambda

当我在 silverlight 项目的结构中使用 LINQ 时，会出现此错误。请帮忙看看为什么？

> 结构中的匿名方法、lambda 表达式和查询表达式无法访问“this”的实例成员。考虑将“this”复制到匿名方法、lambda 表达式或查询表达式之外的局部变量，并改用本地变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:09:56.837

我在 struct 中尝试使用 LINQ 时也遇到了同样的问题。struct 是值类型，因此不能在其中使用 LINQ。取而代之的是，创建一个单独的类，使用您的基于 LINQ 的东西在那里创建函数，并使用该类的对象访问这些函数。

# java - 通过 Maven 构建项目时如何解决一些依赖关系？

> ID：10948497
> 
> 赞同：3
> 
> 时间：2012-06-08T12:04:05.167
> 
> 标签：java, maven

我有一些 Java 项目，我正在尝试在 Windows 中使用 Maven 构建它。但是我在执行此操作时遇到了某些错误。我已将该命令用作

```
"mvn -Dmaven.test.skip=true install" 
```

详情如下：

```
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] OpenEMPI Application .............................. SUCCESS [1.610s]
[INFO] OpenEMPI - Core ................................... SUCCESS [1:39.281s]
[INFO] OpenEMPI - OpenPIXPDQ Adapter ..................... FAILURE [48.469s]
[INFO] OpenEMPI - EJB Interface .......................... SKIPPED
[INFO] OpenEMPI - Web (Struts 2) ......................... SKIPPED
[INFO] OpenEMPI - Web (Server Side) ...................... SKIPPED
[INFO] OpenEMPI - Web (Client Side) ...................... SKIPPED
[INFO] OpenEMPI - EAR .................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2:31.203s
[INFO] Finished at: Fri Jun 08 04:30:04 CDT 2012
[INFO] Final Memory: 11M/60M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project openempi-openpixpdq-adapter: Could not
 resolve dependencies for project org.openhie.openempi:openempi-openpixpdq-adapt
er:jar:2.0.5: Failed to collect dependencies for [javax.ejb:ejb-api:jar:3.0 (pro
vided), org.openhie.openempi:openempi-core:jar:2.0.5 (compile), org.openhealthex
change.openpixpdq:openpixpdq:jar:1.1 (compile), com.misys.braid:braid-base:jar:1
.2.2 (compile), com.misys.hieportal.sysmon:eventmonitoring:jar:1.0 (compile), ca
.uhn.hapi:hapi:jar:0.5.1 (compile), commons-dbcp:commons-dbcp:jar:1.2.1 (compile
), commons-beanutils:commons-beanutils:jar:1.8.0 (compile), commons-collections:
commons-collections:jar:3.2 (compile), commons-lang:commons-lang:jar:2.3 (compil
e), javax.mail:mail:jar:1.4 (compile), javax.persistence:persistence-api:jar:1.0
 (compile), net.sf.ehcache:ehcache:jar:1.4.1 (compile), org.aspectj:aspectjweave
r:jar:1.6.0 (compile), org.aspectj:aspectjrt:jar:1.6.0 (compile), org.codehaus.x
fire:xfire-java5:jar:1.2.6 (compile), org.codehaus.xfire:xfire-spring:jar:1.2.6
(compile), org.hibernate:hibernate:jar:3.2.6.ga (compile), org.hibernate:hiberna
te-annotations:jar:3.3.0.ga (compile), org.hibernate:hibernate-commons-annotatio
ns:jar:3.3.0.ga (compile), org.jmock:jmock:jar:2.4.0 (compile?), org.jmock:jmock
-junit4:jar:2.4.0 (compile?), org.springframework:spring-jdbc:jar:2.5.4 (compile
), org.springframework:spring-orm:jar:2.5.4 (compile), org.springframework:sprin
g-aop:jar:2.5.4 (compile), org.springframework:spring-aspects:jar:2.5.4 (compile
), org.springframework:spring-context-support:jar:2.5.4 (compile), org.jboss.cli
ent:jbossall-client:jar:4.2.3.GA (test), org.jboss:jnp-client:jar:4.2.2.GA (test
), org.subethamail:subethasmtp-wiser:jar:1.2 (test), velocity:velocity:jar:1.4 (
compile), postgresql:postgresql:jar:8.1-407.jdbc3 (compile), junit:junit:jar:4.4
 (compile?), log4j:log4j:jar:1.2.15 (compile), org.springframework:spring-test:j
ar:2.5.4 (compile?), org.springframework.security:spring-security-core-tiger:jar
:2.0.1 (compile), javax.annotation:jsr250-api:jar:1.0 (compile)]: Failed to read
 artifact descriptor for org.openhealthexchange.openpixpdq:openpixpdq:jar:1.1: C
ould not transfer artifact org.openhealthexchange.openpixpdq:openpixpdq:pom:1.1
from/to central (http://repo1.maven.org/maven2): Connection to http://repo1.mave
n.org refused: Connection timed out: connect -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyReso
lutionException
[ERROR]
[ERROR] After correcting the problems, you can resume the build with the command

[ERROR]   mvn <goals> -rf :openempi-openpixpdq-adapter 
```

如果我遇到某些问题，我只想问如何解决依赖关系。我对maven不太了解，因此遇到了这样的问题

请指教。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T12:07:25.400

您遇到此问题是因为您的本地计算机无法连接到此位置的主 maven 存储库： [http](http://repo1.maven.org/maven2) ://repo1.maven.org/maven2 。您可能需要配置您的 Maven 代理设置[http://maven.apache.org/guides/mini/guide-proxies.html](http://maven.apache.org/guides/mini/guide-proxies.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T13:07:32.117

此外，不要从 Central 下载工件，而是尝试设置自己的“企业存储库”。

*   这将减轻该服务器的负载
*   这将减轻您的企业互联网带宽的负载（我的非常有限；）
*   您将设法将您自己的工件放在上面。

这只需要......好吧，一个服务器（物理或虚拟）和一个tomcat。你应该阅读这本免费的书： http: [//www.sonatype.com/books/mvnref-book/reference/](http://www.sonatype.com/books/mvnref-book/reference/)

主要产品有：

*   神器：http://www.jfrog.com/products.php
*   连结：http : [//www.sonatype.org/nexus/](http://www.sonatype.org/nexus/) ...

这不是很困难，虽然当你认为你只需要安装 maven，制作你的 pom 并继续时，这似乎很烦人:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:57:35.503

```
xxx xxx .... from/to central (http://repo1.maven.org/maven2):
    Connection to http://repo1.maven.org refused: Connection timed out: connect -> 
```

似乎当 maven 尝试从其存储库下载依赖项时，它无法建立连接。几个选项..

1.  确保您的互联网连接可用
2.  在没有 -o 开关的情况下运行安装
3.  配置 maven 代理设置 ( [http://maven.apache.org/guides/mini/guide-proxies.html](http://maven.apache.org/guides/mini/guide-proxies.html) )
4.  有时需要从特定存储库下载一些依赖项（例如 - jboss 存储库中的 jboss 依赖项），因此可能需要将特定存储库添加到 pom

# android - setImageResource 导致动画不起作用

> ID：10948500
> 
> 赞同：2
> 
> 时间：2012-06-08T12:04:10.597
> 
> 标签：android, animation, imageview

我面临动画和设置图像资源的问题。

我想在 TranslateAnimation 完成后更改 ImageView 的图像，但是这样做会导致动画不再工作......

这是我的代码：

```
TranslateAnimation anim = new TranslateAnimation(0, infoBoxLeft - infoBoxOffset, 0, 0);
    anim.setInterpolator(new LinearInterpolator());
    anim.setDuration(millis);

    anim.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {

            arrowImage.setImageResource(R.drawable.arrow_left);

            infoBox.layout(infoBoxLeft - infoBoxOffset, infoBox.getTop(), (infoBoxLeft - infoBoxOffset)
                    + infoBoxWidth, infoBox.getTop() + infoBox.getHeight());

            infoBox.clearAnimation();

        }
    });

    infoBox.startAnimation(anim); 
```

如果我删除该行`arrowImage.setImageResource(R.drawable.arrow_left);`一切正常，动画不会运行。我已经尝试过使用`setImageDrawable`（因为文档说它没有在 UI-Thread 上运行），但没有区别。我还尝试`setImageResource`在回调之外调用 before/after `startAnimation`。

有任何想法吗？

先感谢您。

# php - 推送通知未在多台设备上接收 - 仅在一台设备上获取推送

> ID：10948505
> 
> 赞同：1
> 
> 时间：2012-06-08T12:04:30.180
> 
> 标签：php, ios, push-notification, push, apple-push-notifications

我的 PHP 代码有点问题。我没有让它工作，我发送的消息将在所有设备上收到，女巫保存在我的数据库中。

设备上的推送应用程序会在我的 MySQL 数据库中自动注册 deviceToken。这一切都很好。

最大的问题是，我只从数据库中将推送消息发送到第一个设备。另一台设备没有收到任何消息。

这是我的代码：

```
<?php

require_once('konfiguration.php');

$sql = "SELECT deviceToken FROM DeviceTokens";
$dbquery = mysql_query($sql);

// check checkboxes
$message = $_POST['alert'];
$badge = $_POST['badge'];
$sound = $_POST['sound'];
// Construct the notification payload
$body = array();
// anti-error variable
$nothing = true; 
// get user input
if ($message) { $alert=$_POST['message']; $nothing = false;
$body['aps']['alert'] = $alert; }
if ($badge) { $nothing = false;
if($_POST['number']) $number=(int)$_POST['number'];
else $number=1;
$body['aps']['badge'] = $number; }
if ($sound) { $nothing = false;
$body['aps']['sound'] = 'beep.wav'; }
// if input not correct, scream
if ($nothing || ($message && $alert=="")) { echo "Falscher Input!"; exit(); }
//make new stream context
$ctx = stream_context_create();
// set parameters
$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', 'w3workProd.pem');
//stream_context_set_option($streamContext, 'ssl', 'passphrase', 'nils');

$socketClient = stream_socket_client('ssl://gateway.push.apple.com:2195', $error,      
$errorString, 60, STREAM_CLIENT_CONNECT, $streamContext);

$payload = json_encode($body);

print "sending message :" . $payload . "\n";

while($row = mysql_fetch_array($dbquery)) {
$message = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceToken))   
.chr(0) . chr(strlen($payload)) . $payload;
$deviceToken = str_replace(' ', '', $row['deviceToken']);
$message = pack('CnH*', 0, 32, $deviceToken);
$message = $message . pack('n', strlen($payload));
$message = $message . $payload;

fwrite($socketClient, $message);
echo ($row['deviceToken']);
}

fclose($socketClient);
exit();
?> 
```

如果你能帮忙就好了。为什么它可以与一台设备一起使用......而不是与其他设备一起使用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:45:44.793

你有没有尝试过

> STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT

?

# java - java中一个主线程可以调用另一个主线程吗

> ID：10948510
> 
> 赞同：3
> 
> 时间：2012-06-08T12:04:45.323
> 
> 标签：java, multithreading

我正在寻找有关 java **main 方法** `public static void main(String[] args)`的更多知识。当 JVM 调用 main 方法时，它会创建主线程，并且整个程序在此主线程中执行，直到某个用户线程在其自己的堆栈中显式启动。

我的问题是可以`main`从其他`main`方法启动线程吗？

如果有人能给我一些关于主线程的参考，那就更好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:07:43.843

主**线程**只是一个概念，它是启动您的应用程序的线程的名称，该线程在任何方面都没有特殊（除了不是守护线程），因此您可以轻松创建也不是守护进程的新线程并调用他们的另一个主要方法。

作为主线程并没有什么特别之处，它只是第一个要启动的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:08:29.830

据我所知，主线程由JVM启动，用户启动的其他线程是该线程组中主线程的子线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:22:17.190

```
类 FirstApp {
    公共静态无效主要（字符串[]参数）{
        新线程（新可运行（）{
            @覆盖
            公共无效运行（）{
                SecondApp.main(args);
            }
        }）。开始（）;

```

启动一个新线程并调用另一个应用程序的 main 方法。工作正常。但它们都在**同一个进程中**运行。

但是，如果您想像从命令行（在**另一个**（单独的）**进程中**）执行它一样执行此操作，您也可以执行以下操作：

```
导入java.io.File；
导入 java.io.IOException；
导入 java.lang.management.ManagementFactory；

公共类主要{
    public static void main(String[] args) 抛出 IOException，InterruptedException {
        StringBuilder cmd = new StringBuilder();
        cmd.append(System.getProperty("java.home") + File.separator + "bin" + File.separator + "java");
        对于（字符串 jvmArg：ManagementFactory.getRuntimeMXBean().getInputArguments()）{
            cmd.append(jvmArg + " ");
        }
        cmd.append("-cp").append(ManagementFactory.getRuntimeMXBean().getClassPath()).append("");
        cmd.append(Main2.class.getName()).append(""); // Main2是第二个应用的主类
        对于（字符串参数：参数）{
            cmd.append(arg).append("");
        }
        Runtime.getRuntime().exec(cmd.toString());
       // 在此处继续您的正常应用程序代码
    }
}

```

我主要从[如何重新启动 Java 应用程序中获取第二个代码？](https://stackoverflow.com/questions/4159802/how-can-i-restart-a-java-application)

# php - 在多行上很好地分割文本（即标题）

> ID：10948513
> 
> 赞同：1
> 
> 时间：2012-06-08T12:05:09.073
> 
> 标签：php

我正在争取一种让文本很好地换行以适合设置的 div 框的方法。如果文本太长而无法容纳在预期的一行上，浏览器会自动换行，但这通常会导致看起来相当讨厌的演示文稿。

例如，这看起来不错：

```
This is the title 
```

但如果我有一个更长的标题，它可能最终会像这样包装：

```
This is a slightly longer
title 
```

如您所见，第二个看起来并不是很好，我的目标是这样的：

```
This is a nicer
wrapped title 
```

我知道包含的 DIV 会有多大，所以这不是一个有问题的变量，但我试图围绕所有可能的方法来实现格式良好的标题及其缺陷。所以问题是，这样做的最佳方法是什么？我可以想到几种方法，但如果它包含超过 2 行，它们就会开始变得更加复杂。

编辑：我目前正在使用这个 - [https://xnode.org/paste/19](https://xnode.org/paste/19) - 尝试平衡分割线，尽管我确信它远非完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:08:48.227

您可以删除换行符，然后使用[wordwrap](http://php.net/manual/en/function.wordwrap.php)功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:09:33.517

听起来像是 wordwrap 函数的工作[http://php.net/manual/en/function.wordwrap.php](http://php.net/manual/en/function.wordwrap.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:15:08.303

尝试使用`wordwrap`函数并将此 CSS 用于`DIV`：

```
div {
    text-align: justify;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T14:10:31.743

如果[http://fittextjs.com/](http://fittextjs.com/)不能解决问题，请尝试以下方法...

计算标题中的字符并决定是否需要 1 行、2 行 3 行等（将涉及一些试验和错误）

`&nbsp;`用（非换行空格）替换除您想要换行的所有空格，并让浏览器进行自动换行。

换句话说，在您的`This is a nicer wrapped title`示例中，有 29 个字母，因此您需要在中途或之后休息一下，因此将位置 14 或 15 之后的第一个不间断空格替换为常规空格，即在 'nicer' 和 'wrapped '，这应该可以完成工作。对于较长的行，三分之二或四分之二的情况相同。

抱歉没有代码，但从您上面给出的示例中，您应该可以提出自己的实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-09T12:46:43.197

我已经创建了这个 jQuery 插件，它可以满足你的需求

```
$.fn.prettyBreak = function () {

    return this.each(function () {

        var element = $(this);

        var elementLineHeight = element.css("line-height").replace("px", "");

        var elementContent = element.contents();

        element.wrapInner("<span style='white-space: nowrap'>");

        element.find("br").remove();

        var textWidth = element.find("span").width();

        element.html(elementContent);

        var elementText = $.trim(element.text());

        if (element.is(":visible") && textWidth > element.width() && element.height() < elementLineHeight * 2.1) {

            var middle = Math.floor(elementText.length / 2);
            var before = elementText.lastIndexOf(" ", middle);
            var after = elementText.indexOf(" ", middle + 1);

            if (middle - before < after - middle) {
                middle = before;
            } else {
                middle = after;
            }

            var s1 = elementText.substr(0, middle);
            var s2 = elementText.substr(middle + 1);

            element.html(s1 + "<br> " + s2); // note the space after the tag

        } else {
            element.html(elementText);
        }

        if (element.is(":visible")) {
            element.css("opacity", 1);
        }

    });
} 
```

用法：

```
$(document).on("ready", function () {
    $(".pretty-break:visible").prettyBreak();

    setInterval(function () {
        $(".pretty-break:visible").prettyBreak();
    }, 1000);
}); 
```

Github 链接：[https ://github.com/SumoSoft/PrettyBreak](https://github.com/SumoSoft/PrettyBreak)

# android - 在 android 共享意图上共享位置

> ID：10948515
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:05:16.030
> 
> 标签：android, android-intent, geolocation, location, share

我想分享一个附加到我的分享意图的位置。是否可以？

像这样，但添加位置信息：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, "The status update text");
startActivity(Intent.createChooser(intent, "Dialog title text")); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:30:13.543

您可以将您的位置数据作为消息文本的一部分放在`EXTRA_TEXT`.

或者，欢迎您发明一个新的附加功能（例如`EXTRA_LOCATION`），将位置数据放入其中，然后说服全世界的 Android 开发人员在实现响应`ACTION_SEND`.

但是，除了这两个选择之外，`ACTION_SEND`不支持与位置相关的任何其他内容。

# c# - WebService C# 和 HTML5

> ID：10948522
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:05:28.837
> 
> 标签：c#, web-services, html

我想使用 HTML5 实现一个界面并将其绑定到现有的 C# 应用程序。我看到要实现这个应用程序，我必须使用 WebService ，但我不知道如何在 c# 应用程序和 HTML5 中的页面之间进行通信。我的问题是：

1) 如何在Visual Studio 2010 Express Edition 中创建webservice，以及它必须保存在哪里

2）如何允许应用程序、Web服务和接口之间的通信

我已经安装并运行了 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:13:46.693

实际上，您需要创建服务并使用 Ajax/jquery 访问它。此页面将逐步解释您的步骤[http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue](http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:09:20.967

1.  只需在 WCF 或 Asp.net MVC 中制作 Restful 服务
2.  使用来自 jquery 的 Ajax 调用这些服务。

# iphone - 快速滚动 UIScrollView 时 UIImageView 停止调整大小

> ID：10948532
> 
> 赞同：0
> 
> 时间：2012-06-08T12:06:14.773
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiimageview

所以我在应该调整大小的 ScrollView 中有一个 imageView，它可以按我想要的方式工作（在这里看一个小视频：[https](https://dl.dropbox.com/u/80699/scroll.m4v) ://dl.dropbox.com/u/80699/scroll.m4v ）

我所做的是设置 UIScrollViewDelegate 并使用该`scrollViewDidScroll`方法根据滚动偏移量调整图像大小

```
- (void)scrollViewDidScroll:(UIScrollView *)aScrollView
{
    CGFloat scrollViewOffset = aScrollView.contentOffset.y;

    if(scrollViewOffset < 0.0f) {
        // postition top
        CGRect imageViewRect = self.imageView.frame;
        imageViewRect.origin.y = scrollViewOffset;

        if(scrollViewOffset < 0.0f && scrollViewOffset >= -50.0f) {
            CGFloat newBackdropHeight = kImageHeight - scrollViewOffset;
            imageViewRect.size.height = newBackdropHeight;
        }

        self.imageView.frame = imageViewRect;
    }
} 
```

这里基本上发生的是，如果用户在顶部时向上滚动（启用反弹），则 imageView 会随着滚动扩展直到一定的偏移量（此处为 60px）。

这样做的问题是，如果我滚动得非常快，图像会停止调整大小，但滚动视图的其余部分会像往常一样快速向下滚动。然后，当滚动视图回弹时，图像会立即展开，然后按比例缩小（参见此处的视频：[https](https://dl.dropbox.com/u/80699/scroll2.m4v) ://dl.dropbox.com/u/80699/scroll2.m4v ）。

使用这种行为，用户体验不是很好，用户会看到一个跳跃的图像。

有人知道我怎么解决这个问题吗？

如果您想自己查看行为，这是一个小示例项目：[https ://dl.dropbox.com/u/80699/scroll.zip](https://dl.dropbox.com/u/80699/scroll.zip)

感谢您的帮助！如果有任何不清楚的地方，请发表评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:47:51.147

我快速浏览了您的测试项目，我相信问题是当您快速滚动时，调用回调时 Y 偏移量大于 -50，因此图像视图不会调整大小。

我通过移除内部`if`条件并为背景设置最大高度来解决这个问题：

```
if(scrollViewOffset < 0.0f) {
    // postition top
    CGRect imageViewRect = self.imageView.frame;
    imageViewRect.origin.y = scrollViewOffset;

    CGFloat newBackdropHeight = kImageHeight - MAX(scrollViewOffset,-50.0);
    imageViewRect.size.height = newBackdropHeight;

    self.imageView.frame = imageViewRect;
} 
```

希望有帮助

# python - 使用线程时Django中的数据库错误

> ID：10948537
> 
> 赞同：16
> 
> 时间：2012-06-08T12:06:30.287
> 
> 标签：python, django, multithreading, postgresql

我正在一个需要查询 PostgreSQL 数据库的 Django Web 应用程序中工作。使用 Python[线程](http://docs.python.org/library/threading.html)接口实现并发时`DoesNotExist`，查询项出现错误。当然，按顺序执行查询时不会发生这些错误。

让我展示一个我编写的单元测试来演示意外行为：

```
class ThreadingTest(TestCase):
    fixtures = ['demo_city',]

    def test_sequential_requests(self):
        """
        A very simple request to database, made sequentially.

        A fixture for the cities has been loaded above. It is supposed to be
        six cities in the testing database now. We will made a request for
        each one of the cities sequentially.
        """
        for number in range(1, 7):
            c = City.objects.get(pk=number)
            self.assertEqual(c.pk, number)

    def test_threaded_requests(self):
        """
        Now, to test the threaded behavior, we will spawn a thread for
        retrieving each city from the database.
        """

        threads = []
        cities = []

        def do_requests(number):
            cities.append(City.objects.get(pk=number))

        [threads.append(threading.Thread(target=do_requests, args=(n,))) for n in range(1, 7)]

        [t.start() for t in threads]
        [t.join() for t in threads]

        self.assertNotEqual(cities, []) 
```

如您所见，第一个测试按顺序执行了一些数据库请求，这些请求确实没有问题。然而，第二个测试执行完全相同的请求，但每个请求都在一个线程中产生。这实际上是失败的，返回一个`DoesNotExist`异常。

这个单元测试的执行输出是这样的：

```
test_sequential_requests (cesta.core.tests.threadbase.ThreadingTest) ... ok
test_threaded_requests (cesta.core.tests.threadbase.ThreadingTest) ...

Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/jose/Work/cesta/trunk/src/cesta/core/tests/threadbase.py", line 45, in do_requests
    cities.append(City.objects.get(pk=number))
  File "/home/jose/Work/cesta/trunk/parts/django/django/db/models/manager.py", line 132, in get
    return self.get_query_set().get(*args, **kwargs)
  File "/home/jose/Work/cesta/trunk/parts/django/django/db/models/query.py", line 349, in get
    % self.model._meta.object_name)
DoesNotExist: City matching query does not exist. 
```

*...其他线程返回类似的输出...*

```
Exception in thread Thread-6:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/jose/Work/cesta/trunk/src/cesta/core/tests/threadbase.py", line 45, in do_requests
    cities.append(City.objects.get(pk=number))
  File "/home/jose/Work/cesta/trunk/parts/django/django/db/models/manager.py", line 132, in get
    return self.get_query_set().get(*args, **kwargs)
  File "/home/jose/Work/cesta/trunk/parts/django/django/db/models/query.py", line 349, in get
    % self.model._meta.object_name)
DoesNotExist: City matching query does not exist.

FAIL

======================================================================
FAIL: test_threaded_requests (cesta.core.tests.threadbase.ThreadingTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/jose/Work/cesta/trunk/src/cesta/core/tests/threadbase.py", line 52, in test_threaded_requests
    self.assertNotEqual(cities, [])
AssertionError: [] == []

----------------------------------------------------------------------
Ran 2 tests in 0.278s

FAILED (failures=1)
Destroying test database for alias 'default' ('test_cesta')... 
```

请记住，所有这些都发生在 PostgreSQL 数据库中，它应该是线程安全的，而不是 SQLite 或类似的。测试也是使用 PostgreSQL 运行的。

在这一点上，我完全不知道什么会失败。有什么想法或建议吗？

谢谢！

**编辑：**我写了一个小视图只是为了检查它是否在测试中有效。这是视图的代码：

```
def get_cities(request):
    queue = Queue.Queue()

    def get_async_cities(q, n):
        city = City.objects.get(pk=n)
        q.put(city)

    threads = [threading.Thread(target=get_async_cities, args=(queue, number)) for number in range(1, 5)]

    [t.start() for t in threads]
    [t.join() for t in threads]

    cities = list()

    while not queue.empty():
        cities.append(queue.get())

    return render_to_response('async/cities.html', {'cities': cities},
        context_instance=RequestContext(request)) 
```

（*请不要考虑在视图代码中编写应用程序逻辑的愚蠢行为。请记住，这只是概念验证，不会出现在实际应用程序中。*）

结果是代码运行良好，请求在线程中成功发出，视图在调用其 URL 后最终显示城市。

所以，我认为只有在需要测试代码时才使用线程进行查询。在生产中，它将毫无问题地工作。

有什么有用的建议可以成功测试这种代码吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T13:16:35.033

尝试使用 TransactionTestCase：

```
class ThreadingTest(TransactionTestCase): 
```

TestCase 将数据保存在内存中，并且不会向数据库发出 COMMIT。可能线程正在尝试直接连接到数据库，而数据尚未在那里提交。此处的说明： [https ://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#django.test.TransactionTestCase](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#django.test.TransactionTestCase)

> TransactionTestCase 和 TestCase 是相同的，除了将数据库重置为已知状态的方式以及测试代码测试提交和回滚效果的能力。TransactionTestCase 在测试运行之前通过截断所有表并重新加载初始数据来重置数据库。TransactionTestCase 可以调用 commit 和 rollback 并观察这些调用对数据库的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-22T07:13:43.230

从文档的这一部分变得更加清晰

```
class LiveServerTestCase(TransactionTestCase):
    """
    ...
    Note that it inherits from TransactionTestCase instead of TestCase because
    the threads do not share the same transactions (unless if using in-memory
    sqlite) and each thread needs to commit all their transactions so that the
    other thread can see the changes.
    """ 
```

现在，事务尚未在 TestCase 中提交，因此其他线程看不到更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T12:09:30.473

这听起来像是交易的问题。如果您在当前请求（或测试）中创建元素，则几乎可以肯定它们处于未提交的事务中，无法从另一个线程中的单独连接访问。您可能需要[手动管理您的交易](https://docs.djangoproject.com/en/dev/topics/db/transactions/)才能使其正常工作。

# java - spring 3.1.0 Release Hibernate 4.1.2 Final - 通过注释配置数据库如何设置属性

> ID：10948539
> 
> 赞同：1
> 
> 时间：2012-06-08T12:06:38.993
> 
> 标签：java, spring, hibernate, hibernate-annotations

我正在使用下面列出的代码中的配置。自动创建/删除功能接缝无法正常工作（它不会在数据库中创建/维护表（dataSource.setConnectionProperties(hibernateProperties());)）

（当表已经在数据库中创建时有效？我认为这里没有考虑属性？），

配置

```
package com.parisibw.persistance;

import java.util.Properties;

import javax.sql.DataSource;

import org.hibernate.SessionFactory;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.orm.hibernate4.HibernateTransactionManager;
import org.springframework.orm.hibernate4.LocalSessionFactoryBuilder;
import org.springframework.transaction.PlatformTransactionManager;
import org.springframework.transaction.annotation.EnableTransactionManagement;

import com.parisibw.forms.Contact;

@Configuration
@EnableTransactionManagement
public class HibernateConfig {

    @Bean
    public SessionFactory sessionFactory() {
     return new LocalSessionFactoryBuilder(datasource()).addAnnotatedClasses(Account.class, Contact.class).buildSessionFactory();
    }

    @Bean
    public PlatformTransactionManager transactionManager() {
        return new HibernateTransactionManager(sessionFactory());
    }

    @Bean
    public Properties hibernateProperties() {
        Properties properties = new Properties();
        properties.put("hibernate.dialect", "org.hibernate.dialect.MySQL5Dialect");
        properties.put("hibernate.show_sql", "true");       
        properties.put("hibernate.hbm2ddl.auto", "create");

        //properties.put("hibernate.connection.driver_class", "org.h2.Driver");
        //properties.put("hibernate.connection.url", "jdbc:h2:db/test;CIPHER=AES");
        //properties.put("hibernate.connection.username", "root");
        //properties.put("hibernate.connection.password", "root root");
        //properties.put("hibernate.connection.pool_size", "1");        
        //properties.put("hibernate.format_sql", "true");
        //properties.put("hibernate.use_sql_comments", "true");
        //properties.put("hibernate.c3p0.min_size", "5");
        //properties.put("hibernate.c3p0.max_size", "20");
        //properties.put("hibernate.c3p0.timeout", "300");
        //properties.put("hibernate.c3p0.max_statements", "50");
        //properties.put("hibernate.c3p0.idle_test_period", "3000");
        //properties.put("hibernate.cache.use_second_level_cache", "true");
        //properties.put("hibernate.cache.region.factory_class",
        //"org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory");
        //properties.put("hibernate.cache.use_query_cache", "true");
        //properties.put("hibernate.cache.use_minimal_puts", "true");
        //properties.put("hibernate.max_fetch_depth", "10");        

        return properties;
    }

    @Bean
    public DataSource datasource() {
        final DriverManagerDataSource dataSource = new DriverManagerDataSource();
            dataSource.setDriverClassName("com.mysql.jdbc.Driver");
            dataSource.setUrl("jdbc:mysql://dbpath");
            dataSource.setUsername("username");
            dataSource.setPassword("password");
            dataSource.setConnectionProperties(hibernateProperties());
            return dataSource;
    }

} 
```

帐户

```
@Entity @Table(name="T_ACCOUNT")
public class Account {

    @Id 
    private long id;
    @Column
    private double cashBalance;
    @Column
    private String name;

    public long getId() {
          return id;
    }
    public void setId(long id) {
          this.id = id;
    }
    public double getCashBalance() {
          return cashBalance;
    }
    public void setCashBalance(double cashBalance) {
        this.cashBalance = cashBalance;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return  "id: " + id + ", balance: " + cashBalance + ", name: " + name;

    } 
```

测试班

```
@RequestMapping(value = "/test", method = RequestMethod.GET)
public String homeTest(Model model) {
    Account account = new Account();

    try{    
        sessionFactory = new HibernateConfig().sessionFactory();
    Session session = sessionFactory.openSession();
    session.beginTransaction();
    //account.setId(2);
    account.setName("Marcin");
    account.setCashBalance(1200);
    session.save(account);
    session.getTransaction().commit();
    session.close();

    }catch (Exception e) {
        logger.info(e.toString());
    }

    model.addAttribute("serverTime" );
    return "test";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:53:05.417

您将休眠属性作为数据源的连接属性传递。相反，它们应该被传递给 sessionfactory。

```
@Bean
public SessionFactory sessionFactory() {
 return new LocalSessionFactoryBuilder(datasource())
   .addAnnotatedClasses(Account.class, Contact.class)
   .addProperties(hibernateProperties())
   .buildSessionFactory();
} 
```

请参阅[http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Configuration.html?is-external=true（LocalSessionFactoryBuilder](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Configuration.html?is-external=true)的父类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:19:08.283

我在这里看到的第一个问题是你明确地创建了一个新的 HibernateConfig 而不是让 spring 自动装配它。因此，在您的测试类中添加以下属性：

```
@Autowire
private SessionFactory sessionFactory; 
```

更深入地看，看起来您可能想阅读一些有关 Spring 和 IOC 的内容，因为您有点以一种奇怪的方式来做这件事，看起来您可能有点困惑。您尝试做的所有事情实际上都已经内置到 Spring 中，所以您有点重新发明轮子。简而言之，您正在创建事物的新实例，而不是从 spring 的上下文中获取它们，因此它现在可以为您将事物连接在一起。

看看这里是如何完成的（是的，它还有其他问题，但你应该能够得到大致的想法）：[Proper way to autowire a Hibernate Session in a Spring Transaction JUnit test](https://stackoverflow.com/questions/1500775/proper-way-to-autowire-a-hibernate-session-in-a-spring-transaction-junit-test)

# javascript - for (var x in array) 和 for (var x=0, y= array.length; x 之间的性能差异 当我想loop通过一个array并在每个后面添加一个字符串element时， 我可以 for(var x in array){ array[x] += "string"; } 问问题 user1282226 问问题 2012-06-08T12:06:52.440 4042 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 当我想loop通过一个array并在每个后面添加一个字符串element时， 我可以 for(var x in array){ array[x] += "string"; } 或者 for(var x, y = array.length; x <y; 1="" 2="" 3="" 4="" x++){="" array[x]="" +="string" ;="" }="" 但是这两者在性能方面有什么区别吗for="" loops？="" 通常，for...in速度较慢，因为它作为普通对象访问数组，而经典for循环不需要整理所有属性array来执行其任务。="" 请记住，现代浏览器对数组进行了特殊优化，但如果您将它们视为普通对象，则无法利用它们。="" javascriptperformancefor-loop="" 回答="" this="" answer="" is="" useful="" 建议您不要使用for="" ...="" in迭代数组。="" 即为什么在数组迭代中使用“for...in”是个坏主意？="" 您应该for="" in只使用迭代对象属性。="" 于="" 2012-06-08t12:16:52.077="" 2012-06-08t12:15:06.863="" related="" c#="" -="" 带有="" masterdetails="" 和="" togglebutton="" 的="" treeview="" ios="" 计算上传到="" facebook="" 或="" twitter="" 的图像数据量="" 阻止将手势传递给="" superview="" android="" 无法从="" emulator="" 访问="" internet="" php="" 如何检查一行中重复的列名并删除具有相同类名的第二行="" c++="" vector="" 中的="" 常量迭代器="" 如何镜像="" cgpoint="" groupjoin="" 和包括="" html="" 移动图标-像素="" 打开浏览器，自动完成表单组件并提交="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：10948544
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, performance, for-loop

当我想`loop`通过一个`array`并在每个后面添加一个字符串`element`时，

我可以

```
for(var x in array){
 array[x] += "string";  
} 
```

或者

```
for(var x, y = array.length; x<y; x++){
 array[x] += "string";  
} 
```

但是这两者在性能方面有**什么区别**吗`for loops`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:16:52.077

建议您不要使用`for ... in`迭代数组。

即[为什么在数组迭代中使用“for...in”是个坏主意？](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

您应该`for ... in`只使用迭代对象属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:15:06.863

通常，`for...in`速度较慢，因为它作为普通对象访问数组，而经典`for`循环不需要整理所有属性`array`来执行其任务。

请记住，现代浏览器对数组进行了特殊优化，但如果您将它们视为普通对象，则无法利用它们。</y;>

# ios - NSNotification addObserver/removeObserver 适当的方法来放置它们

> ID：10948559
> 
> 赞同：1
> 
> 时间：2012-06-08T12:07:41.503
> 
> 标签：ios, ios5, nsnotificationcenter

我见过`NSNotification`addObserver/removeObserver 放在`viewDidLoad`/ `viewDidUnload`，`viewDidAppear`/viewDidDisappear `,`dealloc`....

在这里使用什么正确的方法使事情变得整洁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:13:03.043

对于 viewControllers：
我会说 in`viewWillAppear:`和`viewDidDisappear:`. 原因是只要您的视图“在屏幕上”，您就会关心这些通知。`viewDidLoad`因为当您的视图不在屏幕上并且`viewDidUnload`是（取消）注册通知的错误位置时，不需要卸载视图。

注册非视图通知：在`designated initializer`和`dealloc`中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T12:16:36.137

那要看。您是否只想在视图控制器在屏幕上时接收通知（然后 viewWillAppear/Disappear 可能是一个不错的选择）或者当视图当前未处于活动状态时接收通知。在后一种情况下，init 方法可能比`viewDidLoad`（或者通知视图当前在内存中是否重要？）。

另请注意，`viewDidUnload`并非在所有情况下都调用它（仅当视图被卸载但视图控制器保留在内存中时 - 如果视图控制器在视图加载时被释放，则仅`dealloc`调用并且是取消注册的正确位置。

# python - 如何通过使用 Python2.7 将卡刷到读卡器上来捕获 RFID 卡的 UID？

> ID：10948563
> 
> 赞同：0
> 
> 时间：2012-06-08T12:07:52.453
> 
> 标签：python, python-2.7, smartcard, rfid, smartcard-reader

我有一个 RFID 项目，并希望系统检测读卡器上的卡，因为它在读取范围内并捕获 UID 并继续该过程。到目前为止，我已经放置了一个名为 ScanCard 的按钮，其中放置了读卡功能，它将返回卡片的 UID。我只使用两种类型的 ATR。想要摆脱扫描卡按钮并想要自动化扫描功能。我在 Windows 7 上使用 Python 2.7 和 HID Omnikey 读卡器

```
atr = "3B 8F 80 01 80 4F 0C A0 00 00 03 06 0A 00 18 00 00 00 00 7A"

cardtype = ATRCardType( toBytes( "%s" %(atr) ))

cardrequest = CardRequest( timeout=1, cardType=cardtype )

cardservice = cardrequest.waitforcard()

cardservice.connection.connect()

SELECT = [0xFF, 0xCA, 0x00, 0x00, 0x00]

apdu = SELECT

print 'sending ' + toHexString(apdu)

response, sw1, sw2 = cardservice.connection.transmit( apdu )

print 'response: ', response, ' status words: ', "%x %x" % (sw1, sw2)

tagid = toHexString(response).replace(' ','')

print "tagid ",tagid

id = tagid

print" UID is",id 
```

上面的代码是我现在正在关注的。我需要无限期地等待卡，什么是最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:37:42.290

也许可以尝试[官方的 pyscard 文档](http://pyscard.sourceforge.net/pyscard-usersguide.html#monitoringsmartcards)，例如我已链接到的监控部分。

# apache-flex - 如何访问变量或将元素（如 tabNavigator）的状态从一个 mxml 更改为另一个 mxml？

> ID：10948564
> 
> 赞同：0
> 
> 时间：2012-06-08T12:07:56.103
> 
> 标签：apache-flex, variables, air

如何在 FLEX 4.6 中访问变量或将元素（如 tabNavigator）的状态从一个 mxml 更改为另一个 mxml？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:15:45.447

每个单独的 MXML 文件都应该被视为一个类，因为它们就是这样。

在封装理论中；两个类不应直接访问/更改彼此的变量或状态。他们应该使用 MXML 类的开发者提供的 API。

如果 MXML 1 是 MXML 2 的父级；那么 MXML1 可以通过设置公共属性或调用公共方法将数据传递给 MXML2。

MXML2 可以通过调度事件将数据传递给 MXML1。

如果 MXML1 和 MXML2 不是父子关系；（AKA 同一个组件的两个孩子作为一个例子）他们不应该直接相互交流。他们应该调度共同父母应该处理的事件，并使用它来设置值或在它自己的孩子上执行方法。

从封装的角度来看，这就是应该如何使用 ActionScript / Flex 的内置工具来完成的。

作为构建应用程序的一部分，很多人所做的就是利用依赖注入。那是“应用程序全局”的值可以在多个组件之间共享。另一种方法是使用单例。第三种方法可能是在类上使用静态值。无需访问类的实例即可访问。

# javascript - 如何在索引视图中使用 Ruby on Rails 中的 JavaScript 切换项目的状态

> ID：10948571
> 
> 赞同：1
> 
> 时间：2012-06-08T12:08:16.147
> 
> 标签：javascript, ruby-on-rails

我在 Ruby on Rails (Rails 3) 中有一个具有“状态”值的模型。状态可以是开启或关闭。在这个模型的索引视图中，我显示了每个项目的状态（只是显示“开”或“关”的基本文本）。我希望用户能够单击每个项目的此状态字段，然后它必须切换，而不必重新呈现页面。所以它基本上就像一种开/关开关。

当我切换特定对象的开/关开关时，我需要调用控制器操作来执行一些操作。然后我还需要更新视图以将“on”更改为“off”或将“off”更改为“on”。

我想 JavaScript 将是要走的路。我不确定我是否也需要ajax。我一直在寻找有关如何将 JavaScript 添加到我的 Ruby on Rails 应用程序的非常基本的分步说明的教程。我是 RoR 中 JavaScript 的完全新手。我发现的大多数教程都假设有 JQuery/Protocol/Ajax/Javascript 的基本背景知识，否则就离题了。

有人可以推荐一个好的、基本的和整洁的教程来开始使用 Ruby on Rails 中的 JavaScript 和/或给出一个关于如何实现上述功能的基本大纲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:05:31.817

两种方式去。

**Rails 方式：**视图助手 form_for 有一个选项 :remote => true 将执行 ajax 请求。假设您的模型称为**Car**，而 @car 是现有对象的实例，您可以这样做：

```
= form_for @car, :remote => true do |f|
  = f.hidden_field :status, true
  = f.submit_tag "On"

= form_for @car, :remote => true do |f|
  = f.hidden_field :status, false
  = f.submit_tag "Off" 
```

这里的一切都是约定俗成的，所以它会转到您的 cars#update 操作，您将在其中返回 Javascript 以显示/隐藏您的表单。通过这种方式，您可以使用 jQuery show() 和 hide() 方法切换 On / Off 表单。 [http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)

**简单的 jQuery 方式：**使用相同的表单但没有 :remote => true 选项。控制器也是相同的，您将只返回 JSON（带有一个值说明更新是否成功）。在客户端上添加您自己的 javascript ($.ajax) 以更新对象并切换 html 表单。

我倾向于使用第二个选项，因为我讨厌从控制器返回 Javascript。我喜欢将所有与一个事件相关的 Javascript 放在同一个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:41:06.520

第一步。在您的控制器操作中，让该操作能够响应 ajax 之类的

```
class DocumentsController < ApplicationController
    respond_to :html, :js, :json
    def edit
        @document = current_user.documents.find(params[:id])
        respond_with @document, location: root_path
    end 
```

然后您将在您的适当视图控制器中创建一个 *.js.erb 文件，在这种情况下，在我的 app/views/documents 中，我称之为 edit.js.erb 现在在您的 js.erb 文件中，您将有一些查询这将操纵你想要的 dom 元素。就像我在视图中调用编辑操作时一样，无论是通过链接还是按钮或其他方式，它都会触发 js.erb 文件。

这是一种方式。另一种方法（rails 方式）是在你的 app/assets/javascript 文件夹中添加一些 jQuery 动作观察者。这些是静态的，被命名为 *.js.coffee 如果用户正在操作，这些 jQuery 操作可能是您想要使用的方式。只需为该 dom 元素添加 jQuery，它将被编译并加载到资产管道中。并且有很多教程可以学习如何做到这一点，我建议寻找最新的东西作为每 6 个月在 Rails 中进行所有这些更改的方法。

# php - 使用 PHP 自动发布到 Pinterest

> ID：10948577
> 
> 赞同：1
> 
> 时间：2012-06-08T12:08:33.433
> 
> 标签：php, javascript, pinterest

我目前有一个通过 php ImageMagick 生成用户创建图像的站点。当我们都在等待新的 Pinterest API 的到来时，有没有办法自动将这些用户创建的图像发布到我自己的 Pinterest 帐户？

我正在寻找一种方法，不仅可以自动填充 PinIt 按钮使用的表单元素，还可以自动将用户创建的图像提交到我的 Pinterest 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T01:35:11.770

也许你可以试试这个，它似乎可以完成这项工作：[https ://github.com/kellan/pinterest.api.php/blob/master/pinterest.api.php](https://github.com/kellan/pinterest.api.php/blob/master/pinterest.api.php)

# mysql - mysql线程未执行。仍处于休眠状态

> ID：10948585
> 
> 赞同：2
> 
> 时间：2012-06-08T12:09:08.850
> 
> 标签：mysql, linux, centos

我正在使用 mysqlslap 在 mysql 服务器中运行基准测试。但有时池中的最后一个线程没有执行并关闭连接。它保持睡眠状态。

```
mysql> show full processlist;
+-----+------+-----------------------+-----------+---------+------+-------+-----------------------+
| Id  | User | Host                  | db        | Command | Time | State | Info                  |
+-----+------+-----------------------+-----------+---------+------+-------+-----------------------+
|   2 | root | 122.178.231.xxx:15832 | mysqlslap | Sleep   |  740 |       | NULL                  |
| 106 | root | localhost             | NULL      | Query   |    0 | NULL  | show full processlist |
+-----+------+-----------------------+-----------+---------+------+-------+-----------------------+
2 rows in set (0.00 sec) 
```

任何想法？它经常发生:(

这是我执行的命令。

> mysqlslap -h IP_address -u root --auto-generate-sql --concurrency=100 -pPASSWORD -vvv --number-of-queries=2500

my.cnf 文件如下，

```
[mysqld]
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
skip-bdb
max_connections = 500
query_cache_type = 1
query_cache_size = 128M
sort_buffer_size = 64M
key_buffer_size = 425M
query_cache_limit = 1024M
thread_cache_size = 4M
innodb_buffer_pool_size = 1360M
innodb_log_file_size = 512M
long_query_time = 5
innodb_thread_concurrency = 8
innodb_lock_wait_timeout = 300
max_allowed_packet = 128M

net_read_timeout = 240
net_write_timeout = 240
table_lock_wait_timeout =240
connect_timeout = 30

log-warnings = 2
log = /var/log/mysqld.log
log-error = /var/log/mysqld.error.log
log-slow-queries = /var/log/mysql_slow_queries.log 
```

# c# - 使用 DLL 中的加载命令在主项目中加载纹理时出现 XNA ContentLoadException

> ID：10948588
> 
> 赞同：0
> 
> 时间：2012-06-08T12:09:28.300
> 
> 标签：c#, xna, xna-4.0

我刚刚开始尝试编写一个非常基本的游戏引擎，首先在 XNA 的 2d 世界中显示简单的图块。这是我第一次编写 DLL，一切都很顺利，直到我尝试为 ContentManager 编写 LoadAll 函数，这导致了我现在遇到的问题。我得到一个 ContentLoadException，即使文件显然存在，否则程序将无法进入内容加载阶段。

XNB 文件肯定存在，并且 Content.RootDirectory 已设置。我已经解决了这样的每一个问题，我可以在这里和其他网站上找到，但找不到任何解决方案。如果有人能帮忙，我将永远感激不尽。

```
 public static Dictionary<String, T> LoadAll<T>(this ContentManager Content, string directory)
    {
        DirectoryInfo dir = new DirectoryInfo(Content.RootDirectory + "/" + directory);
        if (!dir.Exists)
        {
            throw new DirectoryNotFoundException();
        }
        Dictionary<String, T> result = new Dictionary<string, T>();
        FileInfo[] files = dir.GetFiles();
        foreach (FileInfo file in files)
        {
            string key = Path.GetFileNameWithoutExtension(file.Name);
            result[key] = Content.Load<T>(dir.ToString() + "/" + key);
        }
        return result;
    } 
```

显然我在 Content.Load 方法中遇到了错误，我得到了

```
"Error loading "Content\Tiles\bricktile". File not found." 
```

[我在这里](http://danielsaidi.wordpress.com/2010/01/26/xna-load-all-content-files-in-a-folder/)找到了这段代码，但即使将其重写为列表形式，我也会遇到同样的错误。奇怪的部分是错误加载“文件路径”显示了绝对存在的 xnb 文件的正确路径。如果有人想要我的 DLL 的源代码，我可以轻松上传。

谢谢！

编辑：真的应该说我怎么称呼它：

```
textures = Content.LoadAll<Texture2D>(tilesFolder); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:26:11.953

您将错误的路径传递给 Content.Load<>() 方法。`dir.ToString()`将返回完整路径（包括内容的根目录）。但是你需要没有根目录的路径：

```
result[key] = Content.Load<T>(directory + "/" + key); 
```

# python - 使用 cv::inRange (OpenCV) 为颜色检测选择正确的 HSV 上下边界

> ID：10948589
> 
> 赞同：99
> 
> 时间：2012-06-08T12:09:30.067
> 
> 标签：python, opencv, computer-vision, hsv, color-detection

我有一张我想找到的带有橙色盖子位置的咖啡罐的图像。这是它![图片](../Images/5b4daa06a96e0b31e2ac9c5a049c1036.png)。

gcolor2 实用程序显示盖子中心的 HSV 为 (22, 59, 100)。问题是如何选择颜色的界限呢？我尝试了 min = (18, 40, 90) 和 max = (27, 255, 255)，但结果出乎意料![结果](../Images/86d579f160d3c742a0045938eb0e9f96.png)

这是Python代码：

```
import cv

in_image = 'kaffee.png'
out_image = 'kaffee_out.png'
out_image_thr = 'kaffee_thr.png'

ORANGE_MIN = cv.Scalar(18, 40, 90)
ORANGE_MAX = cv.Scalar(27, 255, 255)
COLOR_MIN = ORANGE_MIN
COLOR_MAX = ORANGE_MAX

def test1():
    frame = cv.LoadImage(in_image)
    frameHSV = cv.CreateImage(cv.GetSize(frame), 8, 3)
    cv.CvtColor(frame, frameHSV, cv.CV_RGB2HSV)
    frame_threshed = cv.CreateImage(cv.GetSize(frameHSV), 8, 1)
    cv.InRangeS(frameHSV, COLOR_MIN, COLOR_MAX, frame_threshed)
    cv.SaveImage(out_image_thr, frame_threshed)

if __name__ == '__main__':
    test1() 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-06-08T14:52:21.197

**问题 1：**不同的应用程序对 HSV 使用不同的尺度。例如 gimp 使用`H = 0-360, S = 0-100 and V = 0-100`. 但是 OpenCV 使用 `H: 0-179, S: 0-255, V: 0-255`. 在这里，我在 gimp 中得到了 22 的色调值。所以我拿了一半，11，并为此定义了范围。即`(5,50,50) - (15,255,255)`。

**问题 2：**此外，OpenCV 使用 BGR 格式，而不是 RGB。因此，更改将 RGB 转换为 HSV 的代码，如下所示：

```
cv.CvtColor(frame, frameHSV, cv.CV_BGR2HSV) 
```

现在运行它。我得到如下输出：

![在此处输入图像描述](../Images/80cfcd74c583c0102f75a1dfcf4c4475.png)

希望那是你想要的。有一些错误检测，但它们很小，因此您可以选择最大的轮廓，即您的盖子。

**编辑：**

正如**Karl Philip**在他的评论中所说，添加新代码会很好。但是只有一行的变化。因此，我想在新`cv2`模块中添加相同的代码，以便用户可以比较新`cv2`模块的易用性和灵活性。

```
import cv2
import numpy as np

img = cv2.imread('sof.jpg')

ORANGE_MIN = np.array([5, 50, 50],np.uint8)
ORANGE_MAX = np.array([15, 255, 255],np.uint8)

hsv_img = cv2.cvtColor(img,cv2.COLOR_BGR2HSV)

frame_threshed = cv2.inRange(hsv_img, ORANGE_MIN, ORANGE_MAX)
cv2.imwrite('output2.jpg', frame_threshed) 
```

它给出了与上面相同的结果。但是代码要简单得多。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2018-01-21T13:18:50.310

好的，在`HSV`空间中寻找颜色是一个古老但常见的问题。我做了一个`hsv-colormap`快速查找特殊颜色。这里是：

[![在此处输入图像描述](../Images/0b5a04f2e5d62373a079a648c7c25bf3.png)](https://i.stack.imgur.com/gyuw4.png)

x 轴表示`Hue`[0,180)，y轴 1 表示`Saturation`[0,255]，y 轴 2 表示`S = 255`，而 keep `V = 255`。

要查找颜色，通常只需查找 and 的范围`H`，`S`并将 v 设置在 range(20, 255) 中。

为了找到橙色，我们查找地图，并找到最佳范围：`H :[10, 25], S: [100, 255], and V: [20, 255]`。所以面具是`cv2.inRange(hsv,(10, 100, 20), (25, 255, 255) )`

然后我们使用找到的范围寻找橙色，结果如下：

[![在此处输入图像描述](../Images/19360e6f71562cecf28b485e0e90024b.png)](https://i.stack.imgur.com/dENWB.png)

* * *

该方法简单但常用：

```
#!/usr/bin/python3
# 2018.01.21 20:46:41 CST
import cv2

img = cv2.imread("test.jpg")
hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)
mask = cv2.inRange(hsv,(10, 100, 20), (25, 255, 255) )
cv2.imshow("orange", mask);cv2.waitKey();cv2.destroyAllWindows() 
```

类似的答案：

> 1.  [如何定义阈值以仅检测图像中的绿色对象：Opencv](https://stackoverflow.com/questions/47483951/how-to-define-a-threshold-value-to-detect-only-green-colour-objects-in-an-image/47483966#47483966)
>     
>     
> 2.  [使用 InRangeS 为 OpenCV 阈值选择正确的 HSV 值](https://stackoverflow.com/questions/10948589/choosing-correct-hsv-values-for-opencv-thresholding-with-inranges/48367205#48367205)

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2020-01-25T03:44:10.867

这是一个简单的 HSV 颜色阈值脚本，用于使用磁盘上任何图像的轨迹栏来确定下/上色范围。只需更改图像路径`cv2.imread()`

[![在此处输入图像描述](../Images/5dae3ef40287e44d4227e886ef0f0d88.png)](https://i.stack.imgur.com/gwWIb.png)

```
import cv2
import numpy as np

def nothing(x):
    pass

# Load image
image = cv2.imread('1.jpg')

# Create a window
cv2.namedWindow('image')

# Create trackbars for color change
# Hue is from 0-179 for Opencv
cv2.createTrackbar('HMin', 'image', 0, 179, nothing)
cv2.createTrackbar('SMin', 'image', 0, 255, nothing)
cv2.createTrackbar('VMin', 'image', 0, 255, nothing)
cv2.createTrackbar('HMax', 'image', 0, 179, nothing)
cv2.createTrackbar('SMax', 'image', 0, 255, nothing)
cv2.createTrackbar('VMax', 'image', 0, 255, nothing)

# Set default value for Max HSV trackbars
cv2.setTrackbarPos('HMax', 'image', 179)
cv2.setTrackbarPos('SMax', 'image', 255)
cv2.setTrackbarPos('VMax', 'image', 255)

# Initialize HSV min/max values
hMin = sMin = vMin = hMax = sMax = vMax = 0
phMin = psMin = pvMin = phMax = psMax = pvMax = 0

while(1):
    # Get current positions of all trackbars
    hMin = cv2.getTrackbarPos('HMin', 'image')
    sMin = cv2.getTrackbarPos('SMin', 'image')
    vMin = cv2.getTrackbarPos('VMin', 'image')
    hMax = cv2.getTrackbarPos('HMax', 'image')
    sMax = cv2.getTrackbarPos('SMax', 'image')
    vMax = cv2.getTrackbarPos('VMax', 'image')

    # Set minimum and maximum HSV values to display
    lower = np.array([hMin, sMin, vMin])
    upper = np.array([hMax, sMax, vMax])

    # Convert to HSV format and color threshold
    hsv = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)
    mask = cv2.inRange(hsv, lower, upper)
    result = cv2.bitwise_and(image, image, mask=mask)

    # Print if there is a change in HSV value
    if((phMin != hMin) | (psMin != sMin) | (pvMin != vMin) | (phMax != hMax) | (psMax != sMax) | (pvMax != vMax) ):
        print("(hMin = %d , sMin = %d, vMin = %d), (hMax = %d , sMax = %d, vMax = %d)" % (hMin , sMin , vMin, hMax, sMax , vMax))
        phMin = hMin
        psMin = sMin
        pvMin = vMin
        phMax = hMax
        psMax = sMax
        pvMax = vMax

    # Display result image
    cv2.imshow('image', result)
    if cv2.waitKey(10) & 0xFF == ord('q'):
        break

cv2.destroyAllWindows() 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2014-09-25T16:58:13.983

我创建了这个简单的程序来实时获取 HSV 代码

```
import cv2
import numpy as np

cap = cv2.VideoCapture(0)

def nothing(x):
    pass
# Creating a window for later use
cv2.namedWindow('result')

# Starting with 100's to prevent error while masking
h,s,v = 100,100,100

# Creating track bar
cv2.createTrackbar('h', 'result',0,179,nothing)
cv2.createTrackbar('s', 'result',0,255,nothing)
cv2.createTrackbar('v', 'result',0,255,nothing)

while(1):

    _, frame = cap.read()

    #converting to HSV
    hsv = cv2.cvtColor(frame,cv2.COLOR_BGR2HSV)

    # get info from track bar and appy to result
    h = cv2.getTrackbarPos('h','result')
    s = cv2.getTrackbarPos('s','result')
    v = cv2.getTrackbarPos('v','result')

    # Normal masking algorithm
    lower_blue = np.array([h,s,v])
    upper_blue = np.array([180,255,255])

    mask = cv2.inRange(hsv,lower_blue, upper_blue)

    result = cv2.bitwise_and(frame,frame,mask = mask)

    cv2.imshow('result',result)

    k = cv2.waitKey(5) & 0xFF
    if k == 27:
        break

cap.release()

cv2.destroyAllWindows() 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-03-01T00:27:55.303

OpenCV HSV 范围是： H：0 到 179 S：0 到 255 V：0 到 255

在 Gimp（或其他照片处理软件）上，色调范围从 0 到 360，由于 opencv 将颜色信息放在单个字节中，因此单个字节中的最大数值为 255，因此 openCV 色调值等于来自 gimp 的色调值除以 2 .

我在尝试基于 HSV 颜色空间进行对象检测时发现，5 的范围（opencv 范围）足以过滤掉特定的颜色。我建议您使用 HSV 色板来确定最适合您的应用的范围。

[![在 HSV 空间中进行颜色检测的 HSV 色板](../Images/93d2046f747251d1081f8fb36aac658e.png)](https://i.stack.imgur.com/31twW.png)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-10-10T14:09:56.370

为此，我使用 opencv-python 创建了一个简单（更合适）的工具。认为这对像我今年早些时候一样在这里偶然发现的人很有用

[![在此处输入图像描述](../Images/a1aea0caa3be70dc8b9847e007348008.png)](https://i.stack.imgur.com/yDej0.jpg)

由于该工具本身是使用 python cv2 编写的，因此可以保证使用相同的范围。还有一个滑块`erode`，`dilate`因为通常计算机视觉项目需要这两个功能

您可以从这里克隆工具[https://github.com/hariangr/HsvRangeTool](https://github.com/hariangr/HsvRangeTool)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-10-31T06:47:40.993

要查找 Green 的 HSV 值，请尝试在 Python 终端中执行以下命令

```
green = np.uint8([[[0,255,0 ]]])
hsv_green = cv2.cvtColor(green,cv2.COLOR_BGR2HSV)
print hsv_green
[[[ 60 255 255]]] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-07T10:19:57.683

您可以使用 GIMP 或 PaintDotNet 来获得 HSV 的确切范围。但问题是图形软件中的 HSV 范围与 OpenCV 中的相同范围不同，因此您需要一个函数来为您纠正这个问题。为此，您可以使用以下功能。

```
def fixHSVRange(h, s, v):
    # Normal H,S,V: (0-360,0-100%,0-100%)
    # OpenCV H,S,V: (0-180,0-255 ,0-255)
    return (180 * h / 360, 255 * s / 100, 255 * v / 100) 
```

[![在此处输入图像描述](../Images/901617904c34183ed979d8f055bdcddf.png)](https://i.stack.imgur.com/Tx4oN.jpg)

例如，您可以像这样使用它：

```
im=cv2.imread("image.jpg",1)
im_hsv = cv2.cvtColor(im, cv2.COLOR_BGR2HSV)
color1 = fixHSVRange(h=10, s=20, v=0)
color2 = fixHSVRange(h=30, s=70, v=100)
mask = cv2.inRange(im_hsv, color1, color2)
cv2.imwrite("mask.jpg",mask) 
```

[![在此处输入图像描述](../Images/80fa0c961b1d944e7184e267939aaed4.png)](https://i.stack.imgur.com/DmhdF.jpg)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-22T16:56:35.430

上面提到的大多数方法通常需要对特定颜色的颜色范围有一些了解，然后通过反复试验来获得正确的范围。但是 OpenCV 的官方文档提出了一种更好的方法来找到 HSV 下限和上限，即使对于不常见的颜色也是如此。

> ### 如何找到要跟踪的 HSV 值？
> 
> 这是在 stackoverflow.com 中发现的一个常见问题。它非常简单，您可以使用相同的函数 cv.cvtColor()。您只需传递所需的 BGR 值，而不是传递图像。例如，要查找 Green 的 HSV 值，请在 Python 终端中尝试以下命令：

您可以找到所需对象的确切像素值 (BGR) 并使用它们，例如绿色 (0, 255, 0)

```
green = np.uint8([[[0,255,0 ]]])
hsv_green = cv.cvtColor(green,cv.COLOR_BGR2HSV)
print(hsv_green) 
```

```
[[[60 255 255]]] 
```

> 现在您将**[H-10, 100,100]**和**[H+10, 255, 255]**分别作为下限和上限。除了这种方法，您可以使用任何图像编辑工具，如 GIMP 或任何在线转换器来查找这些值，但不要忘记调整 HSV 范围。

来源：
[OpenCV 颜色空间和对象跟踪](https://docs.opencv.org/3.4/df/d9d/tutorial_py_colorspaces.html)
[GIMP - 图像处理工具](https://www.gimp.org/)

# c# - 连接查询返回空结果

> ID：10948594
> 
> 赞同：0
> 
> 时间：2012-06-08T12:09:34.343
> 
> 标签：c#, .net, linq, linq-to-sql, join

我正在尝试将几个表与以下代码一起加入

```
 var result = (from n in db.tbl_NAWs
                join s in db.Status on n.Status equals s.StatusID
                join a in db.tbl_Afdelings on n.Afdeling equals a.ID_Afdeling
                join l in db.Locaties on n.Locatie equals l.LocatieID
                select new NAW_Dto()
                {
                    ClassNR = n.ClassNr,
                    Status = s.Beschrijving,
                    Client = n.Aanspreekvorm,
                    Locatie = l.Naam,
                    Afdeling = a.Afdeling,
                    KamerNr = n.Kamernummer
                }).ToList(); 
```

但它一直空着，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:13:29.767

运行 Sql Profiler，检查正在执行的实际 SQL 查询是什么，并查看您的数据。

无法在没有看到数据的情况下说出为什么结果集为空。您的外键是否按照您认为的方式设置？

尝试在删除一些连接的情况下执行此查询 - 您将能够以这种方式找到有问题的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:21:44.300

尝试这样的事情......

```
 var result = (from n in db.tbl_NAWs
                join s in db.Status on n.Status equals s.StatusID
                join a in db.tbl_Afdelings on n.Afdeling equals a.ID_Afdeling
                join l in db.Locaties on n.Locatie equals l.LocatieID
                select new 
                {
                    ClassNR = n.ClassNr,
                    Status = s.Beschrijving,
                    Client = n.Aanspreekvorm,
                    Locatie = l.Naam,
                    Afdeling = a.Afdeling,
                    KamerNr = n.Kamernummer
                }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:54:19.357

将其分解为 TSQL 并在 SSMS 中运行 一次删除一个注释，看看哪个不匹配

```
select n.ClassNr
-- , s.Beschrijving
-- , a.Afdeling
-- , l.Naam
from tbl_NAWs as n
-- join Status as s on n.Status equals s.StatusID
-- join tbl_Afdelings as a on n.Afdeling equals a.ID_Afdeling
-- join Locaties as l on n.Locatie equals l.LocatieID 
```

# java - 如何在java中解析文件名？

> ID：10948597
> 
> 赞同：3
> 
> 时间：2012-06-08T12:09:44.030
> 
> 标签：java

我有一个java文件路径

`/opt/test/myfolder/myinsidefolder/myfile.jar`

我想将文件路径替换为此处的根路径将保持不变，但想将文件名从更改`myfile.jar`为`Test.xml`

`/opt/test/myfolder/myinsidefolder/Test.xml`

我怎样才能在java中做到这一点有什么帮助？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T12:11:34.263

这是正确的方法：

```
File myfile = new File("/opt/.../myinsidefolder/myfile.jar");
File test = new File(myfile.getParent(), "Test.xml"); 
```

或者，如果您更喜欢仅使用字符串：

```
String f = "/opt/test/myfolder/myinsidefolder/myfile.jar";
f = new File(new File(f).getParent(), "Test.xml").getAbsolutePath();

System.out.println(f); // /opt/test/myfolder/myinsidefolder/Test.xml 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T12:11:26.430

查看[Java Commons IO](http://commons.apache.org/io/apidocs/overview-summary.html) [FilenameUtils](http://commons.apache.org/io/apidocs/org/apache/commons/io/FilenameUtils.html)类。

它有许多方法可以*可靠地*在不同平台上反汇编和操作文件名（对于许多其他有用的实用程序也值得一看）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T12:12:44.530

```
File f = new File("/opt/test/myfolder/myinsidefolder/myfile.jar");
File path = f.getParentFile();
File xml = new File(path, "Test.xml"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T13:02:57.120

仅使用 JRE 可用类[File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)的更直接方法：

```
String parentPath = new File("/opt/test/myfolder/myinsidefolder/myfile.jar").getParent();
new File(parentPath, "Test.xml"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-01T10:40:41.217

要重命名文件，您可以使用 java.nio.file.Files 中的 Files.move

```
File oldFile=new File("/opt/test/myfolder/myinsidefolder/myfile.jar");
File newFile=new File(oldFile.getParent+"/"+"Test.xml");
try
{
  Files.move(oldFile.toPath(),newFile.toPath());
}
catch (IOException ex)
{
  System.err.println("File was not renamed!");
} 
```

# trac - TRAC，根据权限隐藏可用项目页面中的项目

> ID：10948599
> 
> 赞同：0
> 
> 时间：2012-06-08T12:09:53.187
> 
> 标签：trac

我在 TRAC 有多个项目。我正在使用 mod_wsgi，并且我的 wsgi 脚本文件 TRAC_ENV_PARENT_DIR 变量指向包含所有这些项目的文件夹的文件夹。一些用户可以访问不同的项目。当用户访问 TRAC URL 时，她可以看到包含所有这些项目的列表，但无法访问其中的一些项目。有没有办法只向用户显示该用户有权访问的那些项目？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:38:40.520

*序言：我厌恶通过默默无闻的安全。您的请求可能会被解读为网站演示中的化妆品。不要以改进访问控制为目标，因为知道有效路径仍会根据其设置授予对每个 Trac 环境的访问权限。当然更好的导航是一个很好的理由。*

需要根据用户的权限隐藏文件夹意味着您需要在授予访问权限之前进行身份验证`TRAC_ENV_PARENT_DIR`。这可以通过您的 Web 服务器支持的标准机制来完成。这只是前提。

正如您所说，您的 Trac 环境文件夹集合中有一些非公共 Trac 实例。正确识别所有文件夹有多复杂，这取决于您希望在初始实施与维护上花费多少。

我应该是微不足道的，但容易出错，提供公共或私人目录的列表，当然是更容易维护的。零附加配置将需要打开每个 Trac 环境并查找用户权限。)** 这听起来相当麻烦，并且可能对具有大量用户群和频繁访问的应用程序造成性能损失。如果你走这条路，你至少会使用缓存列表。

您不能使用 Trac 自动生成的*可用项目列表，但您必须为经过身份验证/非特权以及经过身份验证**和*特权的用户提供至少两个版本的索引页面。

为了可维护性，您需要整合配置和权限。要访问每个 Trac 环境，您可以使用`trac.ini`继承和共享的 .htpasswd 文件。但是您不能继承权限，因为这些设置存储在 Trac db 中。你可以[试一试 TracUserSyncPlugin](http://trac-hacks.org/wiki/TracUserSyncPlugin)，但它似乎还不适合生产，或者至少缺乏所有快乐用户的反馈，如果他们存在的话。

)** 虽然我不知道有关此的专门文档，但实际上有几种可能性。由于权限存储在 Trac db 中，所有都涉及读取/查询`permission`db 表。它的结构与[Trac db schema 的](http://trac.edgewall.org/wiki/TracDev/DatabaseSchema)所有其他表一起记录。要阅读，您需要打开 Trac 环境，然后对表使用直接查询（请参阅 AccountManagerPlugin 变更集以获取[示例](http://trac-hacks.org/changeset/11127)）或构造和[查询 PermissionCache 对象](http://trac.edgewall.org/browser/tags/trac-0.11/trac/tests/perm.py#L129)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T16:37:41.583

这可能是一个老问题，但到目前为止，我发现答案相当复杂，没有必要。

我认为使用此处所述的信息[http://trac.edgewall.org/wiki/TracInterfaceCustomization#ProjectList](http://trac.edgewall.org/wiki/TracInterfaceCustomization#ProjectList)，可以构建一个模板来检查用户和权限，然后显示它应该显示的数据。

就我而言，我只需要将“TRAC_ENV_INDEX_TEMPLATE”变量指向空白 HTML，这对我来说就足够了。

# spring-batch - Spring Batch - 同时执行作业的多个实例

> ID：10948605
> 
> 赞同：6
> 
> 时间：2012-06-08T12:10:26.460
> 
> 标签：spring-batch

我有一个澄清。

我们是否可以同时运行多个作业实例。

目前，我们在任何给定时间都有一个作业实例。

如果可能的话，请让我知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-13T11:05:05.217

是的你可以。Spring Batch 根据 JobParameters 区分作业。因此，如果您总是将不同的 JobParameters 传递给同一个作业，那么您将运行同一个作业的多个实例。一个简单的方法就是在每个请求中添加一个 UUID 参数来启动一个作业。例子：

```
final JobParametersBuilder jobParametersBuilder = new JobParametersBuilder();
jobParametersBuilder.addString("instance_id", UUID.randomUUID().toString(), true);
jobLauncher.run(job,jobParametersBuilder.toJobParameters()); 
```

结束时的布尔值“true”向 Spring Batch 发出信号，以将该参数用作作业实例的“身份”的一部分，因此每次“运行”作业时都会获得新的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:07:07.047

是的，您可以非常多地并行运行任务，如此[处所述](http://static.springsource.org/spring-batch/reference/html/scalability.html#scalabilityParallelSteps)

但是有一些事情需要考虑

*   您的应用程序逻辑是否需要并行执行？因为如果您要并行运行步骤，则必须注意并构建应用程序逻辑，以便并行步骤完成的工作不会重叠（除非这是您的应用程序的意图）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:37:13.290

是的，一个作业的多个实例（或执行）完全有可能同时运行。

# jquery - 获取链接到数组

> ID：10948610
> 
> 赞同：0
> 
> 时间：2012-06-08T12:10:45.867
> 
> 标签：jquery, html, css

我一直在尝试将某个 div 中的所有链接拉到一个数组中，并在页面的其他地方使用它们。它适用于 MyBB 软件：

```
<div class="pm_alert" id="pm_notice">
    <div class="float_right"><a href="private.php?action=dismiss_notice&amp;my_post_key=d668d58abafb0f4ec8ab4c902e4eb460" title="Dismiss this notice" onclick="return MyBB.dismissPMNotice()"><img src="images/aesthetic/dismiss_notice.gif" alt="Dismiss this notice" title="[x]" /></a></div>
    <div><strong>You have one unread private message</strong> from <a href="http://localhost/mybb/member.php?action=profile&amp;uid=2">test account</a> titled <a href="private.php?action=read&amp;pmid=13" style="font-weight: bold;">take this</a></div>
</div> 
```

但是，链接是通过系统生成的，与名称相同。所以我想把它们全部拉出来，这样我就可以自定义消息而不必编辑 .lang 文件。这是我现在使用的代码，但它不起作用，警报给我未定义：

```
var link_split = [];
var link_split = $('.pm_link > a').map(function(){
    return this;
}).toArray();
alert(link_split['']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:13:31.050

也许错误在thomething之类的

```
.pm_link > a 
```

它应该是

```
.pm_alert a 
```

试试

```
alert($('.pm_link > a').length) 
```

# generics - 如何使用 FakeItEasy 伪造通用方法调用？

> ID：10948613
> 
> 赞同：4
> 
> 时间：2012-06-08T12:10:54.110
> 
> 标签：generics, dapper, fakeiteasy

我在伪造一个`IDbConnection`并且我想伪造对`QueryOne<T>()`（`Dapper`分机）的呼叫，但是这样做时我得到了一个`NullReferenceException`。

这是我的代码：

```
IDbConnection myConnection = A.Fake<IDbConnection>();

A.CallTo(() => myConnection.QueryOne<MyDto>(A<string>.Ignored,  <IDbConnection>.Ignored, A<IDbTransaction>.Ignored))
.Returns(new MyDto()); 
```

是否可以模拟通用方法调用，`FakeItEasy`或者为什么我会收到异常？

提前致谢...

基督教

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T18:34:35.770

由于 Dapper 使用扩展方法来提供其功能，并且扩展方法只是花哨的静态方法，我认为您无法让它工作。从我读到的（见这个[问题](https://stackoverflow.com/questions/5742425/fake-captcha-from-commonlibnet-with-fakeiteasy-and-fluentvalidation)）FakeItEasy 不能拦截静态方法。

# jsf - Primefaces多选数据表不显示数据

> ID：10948616
> 
> 赞同：0
> 
> 时间：2012-06-08T12:11:11.457
> 
> 标签：jsf, checkbox, datatable, primefaces, multi-select

[按照http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionRadioCheckbox.jsf](http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionRadioCheckbox.jsf)上的 Primefaces 数据表示例，我已经能够构建一个数据表，该数据表显示来自我的数据源的正确标题和行数。但是，没有数据显示；它显示空白单元格。

调试后，我发现问题出在我的 DataModel 中的以下代码部分：

```
@Override
public Resource getRowData(String rowKey) {
    List<Resource> resources = (List<Resource>) getWrappedData();

    for(Resource resource : resources) {
        if(resource.getResourceId().equals(rowKey))
            return resource;
    }
    return null;
} 
```

`if(resource.getResourceId().equals(rowKey))`条件评估为假，因此不返回任何对象`Resource`。

我似乎看不出我做错了什么。我的相关部分`bean`如下所示：

```
public class NewIncidentWizardBean implements Serializable {

private static final long serialVersionUID = 1L;

private static Logger logger =  Logger.getLogger(NewIncidentWizardBean.class.getName());

private static Resource[] tmpResources;

static {
    tmpResources = new Resource[12];

    tmpResources[0] = new Resource(new Long(1), ..., new Long(2));
    tmpResources[1] = new Resource(new Long(2), ..., new Long(4));
    tmpResources[2] = new Resource(new Long(3), ..., new Long(10));
    tmpResources[3] = new Resource(new Long(4), ..., new Long(10));
    tmpResources[4] = new Resource(new Long(5), ..., new Long(10));
    tmpResources[5] = new Resource(new Long(6), ..., new Long(10));
    tmpResources[6] = new Resource(new Long(7), ..., new Long(10));
    tmpResources[7] = new Resource(new Long(8), ..., new Long(10));
    tmpResources[8] = new Resource(new Long(9), ..., new Long(10));
    tmpResources[9] = new Resource(new Long(10), ..., new Long(10));
    tmpResources[10] = new Resource(new Long(11), ..., new Long(7));
    tmpResources[11] = new Resource(new Long(12), ..., new Long(90));
}

private List<Resource> resources;
private ResourceDataModel resourcesModel;
private Resource selectedResource;
private Resource[] selectedResources;

public NewIncidentWizardBean() {
    resources = new ArrayList<Resource>();
    for(int i = 0; i < tmpResources.length; i++)
        resources.add(tmpResources[i]);

    resourcesModel = new ResourceDataModel(resources);
}

public Resource getSelectedResource() {
    return selectedResource;
}

public void setSelectedResource(Resource selectedResource) {
    this.selectedResource = selectedResource;
}

public Resource[] getSelectedResources() {
    return selectedResources;
}

public void setSelectedResources(Resource[] selectedResources) {
    this.selectedResources = selectedResources;
}

public Resource getResource() {
    return resource;
}

public void setResource(Resource resource) {
    this.resource = resource;
}

public List<Resource> getResources() {
    return resources;
}

public void setResources(List<Resource> resources) {
    this.resources = resources;
}

public ResourceDataModel getResourcesModel() {
    return resourcesModel;
}
} 
```

在我看来，相关部分是：

```
<p:dataTable id="resources" var="resource" value="#{newDisasterWizardBean.resourcesModel}" paginator="true" rows="10"  
             selection="#{newDisasterWizardBean.selectedResources}">  

    <p:column selectionMode="multiple" style="width:18px" />  

    <p:column headerText="Resource Name">  
        #{resource.name}  
    </p:column>  

    <p:column headerText="Description">  
        #{resource.description}  
    </p:column>  

    <p:column headerText="Resource Type" >  
        #{resource.type}  
    </p:column>  

    <p:column headerText="Units Required">  
        #{resource.units}  
    </p:column>  

</p:dataTable> 
```

我还无法发现我可能做错了什么。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:03:50.307

你能留下一个说明你正在使用哪个PF版本吗？
从 3.3 开始，数据表的延迟加载处理发生了变化。试一试 3.2 然后你可以看到你的代码是否正常工作。
此外，我定义了 rowKey 标签。我想你应该定义它！为了触发选择/取消选择，您还应该定义这些 ajax 事件：

```
 <p:dataTable id="myid"
        value="#{myvalue}" var="valuevar"
        selection="#{value.valueSelected}"
        rowKey="#{valuevar.onevalue}">
        <p:ajax event="rowSelect"
            process="@this"
            update="@this" />
        <p:ajax event="rowUnselect"
            process="@this"
            update="@this" />
                    ...................
    </p:dataTable> 
```

我目前在 3.3.1 中也坚持使用 PrimeFaces issue [2993](http://code.google.com/p/primefaces/issues/detail?id=2993)中提到的 lazy=true 参数。

希望有帮助。

# air - 为与空中客户端同步的服务器应用程序选择哪种平台/编程语言

> ID：10948617
> 
> 赞同：-3
> 
> 时间：2012-06-08T12:11:26.040
> 
> 标签：air, synchronization, blazeds

**这是我的设置：**

*   大约 60 台电脑正在运行一个空中客户端应用程序，连接到 (w)lan
*   1 台充当服务器的电脑，也连接到 (w)lan

**场景：**
无论何时在服务器上进行更改（数据库和/或文件更改），此更改都需要同步到所有空中客户端。（服务器一一联系所有连接的空中客户端，启动同步过程）

**哪个平台？**
服务器应用程序应该是跨平台的并且易于安装，因此我的客户可以在没有任何指导的情况下安装服务器应用程序（最好使用安装向导）。

我想到的是为服务器使用 Java 应用程序，因为我认为空中应用程序不适合这种情况......（真正的线程，缺乏 dbms 驱动程序等）。

**哪种平台/语言最适合与本地网络中连接的空中客户进行通信和交换数据？**

*这是我的优先级列表：跨平台 > 轻松安装 > 有据可查/大社区 > 快速实施*

顺便说一句：初始同步传输大约需要 0.5 GB，之后更新大约需要 10 MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T02:55:56.147

Air 和 Java（后端代码） 跨平台 是 易于安装 是 有据可查/大社区 是 快速实施 是

# c# - 使用 linq 将资源集转换为字典

> ID：10948622
> 
> 赞同：13
> 
> 时间：2012-06-08T12:11:41.747
> 
> 标签：c#, linq

```
var rm = new ResourceManager(sometype);

var resourceSet = rm.GetResourceSet(CultureInfo.CurrentUICulture, true, true); 
```

我想将上述资源集转换为字典。目前我正在通过如下循环手动完成。

```
var resourceDictionary = new Dictionary<string, string>();

foreach (var r in resourceSet)
{
  var dicEntry = (DictionaryEntry)r;
  resourceDictionary.Add(dicEntry.Key.ToString(), dicEntry.Value.ToString());          
} 
```

如何使用 linq 轻松实现这一目标？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-08T12:14:42.917

尝试这个：

```
var resourceDictionary = resourceSet.Cast<DictionaryEntry>()
                                    .ToDictionary(r => r.Key.ToString(),
                                                  r => r.Value.ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:14:55.200

```
var resourceDictionary = resourceSet.Select(r => (DictionaryEntry) r)
                                     .ToDictionary(dicEntry => dicEntry.Key.ToString(),
                                                dicEntry => dicEntry.Value.ToString()); 
```

# c++ - 在单个分配中分配包含字符串的结构

> ID：10948624
> 
> 赞同：6
> 
> 时间：2012-06-08T12:11:47.753
> 
> 标签：c++, memory-management, stdstring

我正在开发一个程序，该程序将重要数据结构存储为带有程序定义分隔符的非结构化字符串（因此我们需要遍历字符串并提取我们需要的信息），我们想将其转换为更结构化的数据类型。

本质上，这将需要一个结构体，其中包含一个描述结构体包含的数据类型的字段以及另一个包含数据本身的字符串的字段。字符串的长度在分配时总是已知的。我们通过测试确定，将每种数据类型所需的分配数量翻倍是不可接受的成本。有没有办法在一次分配中为结构和结构中包含的 std::string 分配内存？如果我们使用 cstrings，我只需要在结构中添加一个 char *，并在为结构和字符串分配足够大的块后将其指向结构的末尾，但如果可能的话，我们更喜欢 std::string。

我的大部分经验都是使用 C，所以请原谅这里显示的任何 C++ 无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:15:52.913

如果您有如此严格的内存需求，那么您将不得不放弃`std::string`.

最好的替代方法是[找到](https://code.google.com/p/cxx1y-array-string-ref/)或编写[`basic_string_ref`(a proposal for the next C++ standard library)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3334.html)的实现，它实际上只是一个 char* 加上一个大小。但它具有 . 的所有（非变异）功能`std::basic_string`。然后你使用工厂函数来分配你需要的内存（你的结构体大小+字符串数据），然后使用placement new来初始化`basic_string_ref`.

当然，您还需要一个自定义删除功能，因为您不能只将指针传递给“删除”。

* * *

鉴于[先前链接到`basic_string_ref`](https://code.google.com/p/cxx1y-array-string-ref/)（及其关联的 typedef，`string_ref`）的实现，这里有一个工厂构造函数/析构函数，用于某些需要在其上具有字符串的类型 T：

```
template<typename T> T *Create(..., const char *theString, size_t lenstr)
{
  char *memory = new char[sizeof(T) + lenstr + 1];
  memcpy(memory + sizeof(T), theString, lenstr);

  try
  {
    return new(memory) T(..., string_ref(theString, lenstr);
  }
  catch(...)
  {
    delete[] memory;
    throw;
  }
}

template<typename T> T *Create(..., const std::string & theString)
{
  return Create(..., theString.c_str(), theString.length());
}

template<typename T> T *Create(..., const string_ref &theString)
{
  return Create(..., theString.data(), theString.length());
}

template<typename T> void Destroy(T *pValue)
{
  pValue->~T();

  char *memory = reinterpret_cast<char*>(pValue);
  delete[] memory;
} 
```

显然，您需要自己填写其他构造函数参数。并且您的类型的构造函数将需要采用`string_ref`引用字符串的 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:18:23.610

C 风格的字符串总是可以`std::string`根据需要转换为。事实上，您从分析中观察到的结果很有可能是由于数据的碎片化而不是简单的分配数量，并且`std::string`按需创建将是有效的。当然，不知道您的实际应用程序这只是一种猜测，并且实际上在经过测试之前无法知道这一点。我想象一个班级

```
class my_class {
    std::string data() const { return self._data; }
    const char* data_as_c_str() const // In case you really need it!
    { return self._data; }
private:
    int _type;
    char _data[1];
}; 
```

注意我使用了一个标准的聪明的 C 技巧来进行数据布局：`_data`只要你想要它，只要你的工厂函数为其分配额外的空间。IIRC，C99 甚至为它提供了一个特殊的语法：

```
struct my_struct {
    int type;
    char data[];
}; 
```

这很有可能与您的 C++ 编译器一起工作。（这是在 C++11 标准中吗？）

当然，如果你这样做了，你真的需要将所有的构造函数设为私有，并且将你的工厂函数设为友元，以确保工厂函数是实际实例化的唯一方法`my_class`——如果没有额外的内存，它就会被破坏大批。您肯定也需要将其设为`operator=`私有，或者以其他方式谨慎实施。

* * *

重新考虑您的数据类型可能是一个好主意。

例如，您可以做的一件事是，与其尝试将`char`数组放入结构化数据类型，不如使用智能引用。一个看起来像的类

```
class structured_data_reference {
public:
    structured_data_reference(const char *data):_data(data) {}
    std::string get_first_field() const {
        // Do something interesting with _data to get the first field
    }
private:
    const char *_data;
}; 
```

您也希望对其他构造函数和赋值运算符做正确的事情（可能禁用赋值，并实现一些合理的移动和复制）。`std::shared_ptr`而且您可能希望在整个代码中使用引用计数指针（例如），而不是裸指针。

* * *

另一种可能的技巧是只使用`std::string`，但将类型信息存储在第一个条目（或前几个）中。当然，这需要在您访问数据时考虑到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:44:23.790

看看[Variable Sized Struct C++](https://stackoverflow.com/questions/688471/variable-sized-struct-c) - 简短的回答是在 vanilla C++ 中没有办法做到这一点。

你真的需要在堆上分配容器结构吗？将它们放在堆栈上可能更有效，因此根本不需要分配它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T12:37:03.473

如果我对您的理解正确，您是说通过分析您已经确定您必须`string`在数据结构中分配一个和另一个数据成员这一事实给您的应用程序带来了不可接受的成本。

如果确实如此，我可以想到几个解决方案。

1.  您可以在程序启动之前预先分配所有这些结构。将它们保存在某种固定的集合中，这样它们就不会被复制构造，并且`reserve`在你的 s 中有足够的缓冲区`string`来保存你的数据。
2.  尽管看起来有争议，但您可以使用旧的 C 样式`char`数组。似乎您首先忽略了使用`string`s 的大部分原因，即内存管理。但是，在您的情况下，由于您在启动时知道所需的缓冲区大小，因此您可以自己处理。如果您喜欢`string`提供的其他设施，请记住，其中大部分在`<algorithm>`s 中仍然可用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T12:59:46.000

我不确定这是否完全解决了您的问题。您可以通过使用预分配缓冲区然后使用“放置新”运算符来优化 C++ 中的内存分配的一种方法。据我所知，我试图解决您的问题。

```
 unsigned char *myPool = new unsigned char[10000];
 struct myStruct
 {
    myStruct(char* aSource1, char* aSource2)
    {
        original = new (myPool) string(aSource1); //placement new
        data = new (myPool) string(aSource2); //placement new
    }
    ~myStruct()
    {
        original = NULL; //no deallocation needed
        data = NULL; //no deallocation needed
    }
    string* original;
    string* data;
};

int main()
{
    myStruct* aStruct = new (myPool) myStruct("h1", "h2");

    //  Use the struct

    aStruct = NULL; //  No need to deallocate
    delete [] myPool;

    return 0;
} 
```

[编辑] 之后，来自 NicolBolas 的评论，问题更清楚了。我决定再写一个答案，尽管实际上它并不比使用原始字符数组更有优势。但是，我仍然相信这完全在规定的限制范围内。想法是为此[SO question](https://stackoverflow.com/questions/1591591/can-one-leverage-stdbasic-string-to-implement-a-string-having-a-length-limitat)中指定的字符串类提供自定义分配器。在 allocate 方法的实现中，使用placement new as

```
pointer allocate(size_type n, void * = 0) 
{
    // fail if we try to allocate too much
    if((n * sizeof(T))> max_size()) { throw std::bad_alloc(); }

    //T* t = static_cast<T *>(::operator new(n * sizeof(T)));
    T* t = new (/* provide the address of the original character buffer*/) T[n];
    return t;
} 
```

约束是，要使新的放置工作，分配器在运行时应该知道原始字符串地址。这可以通过在创建新字符串成员之前的外部显式设置来实现。然而，这并不是那么优雅。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T13:21:44.200

事实上，两次分配似乎太高了。有两种方法可以减少它们：

*   做一次分配
*   做一个单一的动态分配

它可能看起来没有那么不同，所以让我解释一下。

*1.你可以`struct`在C++中使用hack*

*   是的，这不是典型的 C++
*   是的，这需要特别小心

从技术上讲，它需要：

*   禁用复制构造函数和赋值运算符
*   构造构造函数和析构函数`private`，并提供工厂方法来分配和释放对象

老实说，这是一条艰难的道路。

*2.可以避免`struct`动态分配外层*

很简单：

```
struct M {
    Kind _kind;
    std::string _data;
}; 
```

然后`M`在堆栈上传递实例。移动操作应保证`std::string`不被复制（您始终可以禁用复制以确保它）。

这个解决方案*要*简单得多。唯一的（轻微的）缺点是内存局部性......但另一方面，堆栈的顶部已经在 CPU 缓存中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-08T12:18:25.990

如果您使用`std::string`，则不能真正为结构和字符串进行一次分配，也不能将两者都分配为一个大块。如果您使用的是旧的 C 风格的字符串，那么它是可能的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-08T12:20:59.537

> 本质上，这将需要一个结构体，其中包含一个描述结构体包含的数据类型的字段以及另一个包含数据本身的字符串的字段。

我有一种感觉，您可能没有在这里充分利用 C++ 的类型系统。它的外观和感觉都非常 C-ish（我知道，这不是一个恰当的词）。我没有具体的例子可以在这里发布，因为我对您要解决的问题一无所知。

> 有没有办法在一次分配中为结构和结构中包含的 std::string 分配内存？

相信你是担心结构体分配后跟把字符串拷贝到结构体成员吗？理想情况下不应该发生这种情况（当然，这取决于您初始化成员的方式和时间）。C++11 支持移动构造。这应该会处理您担心的任何额外的字符串副本。

你真的应该发布一些代码来让这个讨论变得有价值:)

> 具有程序定义分隔符的非结构化字符串的重要数据结构

一个问题：这个字符串是可变的吗？如果没有，您可以使用稍微不同的数据结构。不要存储这个重要数据结构的部分副本，而是存储指向分隔符的该字符串的索引/迭代器。

```
 // assume that !, [, ], $, % etc. are your program defined delims
 const std::string vital = "!id[thisisdata]$[moredata]%[controlblock]%";

 // define a special struct
 enum Type { ... }; 
 struct Info {
     size_t start, end;
     Type type;
     // define appropriate ctors
 };

 // parse the string and return Info obejcts
 std::vector<Info> parse(const std::string& str) {
      std::vector<Info> v;
      // loop through the string looking for delims
      for (size_t b = 0, e = str.size(); b < e; ++b) {
            // on hitting one such delim create an Info
            switch( str[ b ] ) {
                case '%':
                  ... 
                case '$;:    
                // initializing the start and then move until
                // you get the appropriate end delim
            }
            // use push_back/emplace_back to insert this newly
            // created Info object back in the vector
            v.push_back( Info( start, end, kind ) );
      }
      return v;
 } 
```

# oracle-apex - PL/SQL 访问已保存的报告数据

> ID：10948628
> 
> 赞同：0
> 
> 时间：2012-06-08T12:12:04.153
> 
> 标签：oracle-apex

使用 4.1（最新版本）。

我的应用程序中有一个交互式报告页面。用户可以自由创建和保存公共和私人报告，设置他们选择的任何过滤条件。我需要做的是遍历这些报告并根据与过滤条件匹配的列值（类似于 EMPLOYEE_ID）“处理”一些数据。

我想做的是将此功能打包到使用 DBMS_SCHEDULER 调度的 PL/SQL 过程中。

除了试图从 APEX 视图对此进行逆向工程外，我被困住了。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:33:49.807

坏消息：没有内置的方法来获取交互式报告的查询。

（我希望你会编程PLSQL，否则你已经走到了死胡同。）

但是，我有一个包可以完成大部分工作，并且确实在处理 IR 的应用程序元数据。它可以处理列过滤器和行过滤器，也可以处理顶部有 lov 的列。它不处理计算或聚合。不过，您必须获取代码并对其进行一些调整，因为我的目标是通过 json 将一些数据返回到浏览器，但您不必再编写查询重建部分。我会向您[推荐我关于我的包裹以及我为什么制作它的博客文章](http://tpetrus.blogspot.com/2012/05/interactive-report-filtering-in-apex.html)，这样可能会为您清除一些它的用法。您可以获得 zip，并且需要 APEX_IR 包。（在撰写本文时，它仍然包含一个愚蠢的疏忽，因为它忽略了过滤器的禁用/启用状态）

# jsf - 必须关闭浏览器才能在 PostConstruct 方法中获取身份验证数据

> ID：10948631
> 
> 赞同：0
> 
> 时间：2012-06-08T12:12:20.223
> 
> 标签：jsf, jakarta-ee, jboss6.x

我正在尝试在 SessionScoped 托管 bean 中缓存身份验证信息。

当我第一次打开浏览器并登录服务器（浏览器要求我输入用户名/密码）时，它可以正常工作。

当我重新启动 webapp 或服务器（这是一个开发设置）时，问题就来了。然后，从我之前登录的浏览器之一访问 webapp，导致在我的`@PostConstruct`方法中`FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal()`返回 null（我检查它是否有效执行）。

另一方面，如果我只是从 中检查该值`getUser()`，则它可以正常工作。

AFAIK，我希望浏览器只是缓存凭据，并且当我在重新启动后重新进入应用程序时，唯一的区别是浏览器会自动发送凭据而不会再次提示我。我没想到它会对服务器产生任何影响。

代码如下（简化）

```
@ManagedBean
@SessionScoped
public class UserManager {

private Principal userPrincipal = null;

@PostConstruct
public void init() {
  this.userPrincipal = 
    FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal();
  System.out.println("EN POSTCONSTRUCT DE LDAP PRINCIPAL!! " + this.userPrincipal);
}

public String getUser() {
  return this.userPrincipal.getName();
}

} 
```

设置是带有 Mojarra 2.03、JDK 6 的 JBoss 6.1 Final。我已经用 IE7 和 Firefox 对其进行了测试。

更新：我发现了更多关于它的信息。如果我进入欢迎页面，那么 webapp 会按预期工作。当我尝试直接访问另一个页面 (*1) 时，它无法初始化用户信息。

*1：我不是在谈论*重新加载*页面，因为这总是失败，而是`http://myserver/mywebapp/page_that_is_not_welcome_one.xhtml`在 URL 栏中输入。

# html - 如何使用 HTML 和 CSS 在文本上制作斜线？

> ID：10948632
> 
> 赞同：1
> 
> 时间：2012-06-08T12:12:20.403
> 
> 标签：html, css, text

如何使用 HTML5 和 CSS3 在文本上制作斜线？

PS：我想使用`<canvas>`是获得解决方案的一种可能方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:15:40.097

您可以使用 CSS 并将 div 放置在彼此之上，然后旋转其中一个来做到这一点。

[http://jsfiddle.net/jonbrownm/QvDwj/](http://jsfiddle.net/jonbrownm/QvDwj/)

还有 * {text-decoration: line-through;} 声明，但不会是倾斜的。解决方案确实需要使用 HTML，但我不确定没有 CSS 的方法。

# python - Python：从开发服务器转移到生产服务器

> ID：10948636
> 
> 赞同：1
> 
> 时间：2012-06-08T12:12:52.233
> 
> 标签：python

我正在使用该`bottlepy`框架开发一个应用程序。我正在使用标准库`WSGIRefServer()`来运行开发服务器。它是一个单线程服务器。

现在投入生产时，我会想转移到多线程生产服务器上，有很多选择。假设我选择 CherryPy。

现在，在我的代码中，我正在初始化一个`wsgi`应用程序。除此之外，我还在初始化其他东西......

*   Memcached 连接
*   鲭鱼模板
*   MongoDB 连接

由于标准库`wsgiref`是一个单线程服务器，而且我只创建一个 wsgi 应用程序（wsgi 可调用），所以一切正常。

我想知道的是，当我移动到多线程服务器时，我的 wsgi 应用程序、初始化代码、与不同服务器的连接等将如何表现。

*   多线程服务器是否会为每个线程创建一个单独的 wsgi 应用程序实例。是否会为每个新请求生成一个新线程（这意味着每个请求都有一个新的 wsgi 应用程序）？

*   我与 memcached、mongoDB 等的连接是否会跨线程共享。线程之间还会共享什么

*   请解释线程服务器的请求-响应周期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:28:15.847

一般来说，您的应用程序使用的是 wsgi 兼容的框架，您不应该害怕多线程/单线程服务器端。它的目的是透明地工作，并且无论它是哪种服务器，只要它符合 wsgi 标准，它就必须以相同的方式做出反应。

之前的每个代码块`bottle.run()`将只运行一次。因此，每个连接（数据库、memcached）将只实例化一次并共享。

当你调用`bottle.run()`bottlepy 时会为你启动wsgi 服务器。对该服务器的每个请求都会在 Bottlepy 框架内触发一些可调用的 wsgi。你对它是单线程还是多线程环境并不感兴趣，只要你不做一些奇怪的事情。

奇怪的是，我的意思是例如通过全局变量同步某些东西。（这里的例外是全局`request`对象，bottlepy 确保它在适当的上下文中包含适当的请求）。

并回答列表中的第一个问题：请求可以在新生成的线程或线程池中的线程中计算（CherryPy 是线程池的）

# osgi - equinox + sample.http - tomcat 7 的问题

> ID：10948640
> 
> 赞同：0
> 
> 时间：2012-06-08T12:13:08.703
> 
> 标签：osgi, tomcat7, equinox

我正在将[http://www.eclipse.org/equinox/server/http_in_container.php](http://www.eclipse.org/equinox/server/http_in_container.php)中的 sample.http导入 eclipse ，使用 tomcat 7 作为服务器（Linux 平台）。它显示了几个问题，例如：

```
BundleActivator cannot be resolved to a type
No available bundle exports package 'javax.servlet.http' 
```

以及由于未导入插件依赖项而导致的几个此类错误。（如果我尝试使用 tomcat 6，它可以工作）。有人可以指出我应该做哪些改变以使依赖项与 tomcat 7 兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:53:25.520

问题是 org.eclipse.equinox.http.servletbridge jar。它导出 Servlet javax.servlet 2.3，但对于 Tomcat 7，您需要 javax.servlet 3.0

*也许*你可以打开 jar 文件并修复它，但是我在这个结构上浪费了相当长的时间，而且从来没有做对。它已经5岁了，这意味着麻烦。

对我来说，Felix 工作得更好，有一个更清晰、更一致的解释。

看看这里：[apache felix](http://felix.apache.org/site/apache-felix-http-service.html#ApacheFelixHTTPService-UsingtheServletBridge)

我*认为*通过这种设置，如果有必要，您仍然可以将 Equinox 与 FrameworkLauncher 一起使用

# vb.net - 在 vb.net 中的控件上获取删除的文本

> ID：10948654
> 
> 赞同：0
> 
> 时间：2012-06-08T12:14:05.543
> 
> 标签：vb.net, richtextbox

我在 VB.net 2008 中制作了一个文本编辑器，并为文本制作了一个拖放篮，它是一个类似于今天的下载器的拖放篮，但它将用于获取拖放的文本。我使用带有 Enable AutoDragAndDrop 的 rihtextbox 控件来获取放置的文本。它适用于网络浏览器，但是当我从任何文本编辑器（如 MS Word）中拖动文本时，从 MS Word 中删除了拖动的文本，是否有任何其他方法可以获取篮子中的文本？我的代码如下

```
Private Sub RichTextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)  Handles RichTextBox1.TextChanged
            frmeditor.New_TAB()
            If Check_rtb() = True Then
                return_rtb.text = RichTextBox1.Text
                RichTextBox1.Text = ""
                If frmeditor.NotifyIcon1.Visible = True Then
                return_rtb.Modified = True
            End If
        End Sub 
```

# sql - 如何使用 Hibernate SQL 查询更新单元格数据

> ID：10948655
> 
> 赞同：6
> 
> 时间：2012-06-08T12:14:08.080
> 
> 标签：sql, hibernate, hql

我有一个表“用户”，有很多列，其中两个是“用户名”和“密码”用户名是主键列

我想更新用户名的密码。这是我的代码，它工作正常（没有错误或异常）但没有更新密码。

我是 Hibernate 的新手，不太了解它的语法。请帮我

```
 String query = "UPDATE users SET Password = '"+ newPassword +"' WHERE Username = '"+ login.getUsername() + "'";

 session.createSQLQuery(query); 
```

login.getUsername() 正在正确获取所需的用户名

其余代码工作正常问题在上面的代码中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T12:19:28.087

您刚刚创建了一个查询，但尚未执行它：

```
SQLQuery sqlQuery = session.createSQLQuery(query);
sqlQuery.executeUpdate(); 
```

注意

*   您应该使用命名参数而不是连接参数。这将防止 SQL 注入攻击，或者当密码或用户名包含`'`
*   在 Hibernate 中，您通常使用以下方式执行这些简单的操作：

-

```
User u = session.get(User.class, userName);
u.setPassword(newPassword); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-03T13:24:47.310

您只是忘记了执行方法，它们：

```
String query = "UPDATE users SET Password = '"+ newPassword +"' WHERE Username = '"+            login.getUsername() + "'";
try {
    s.getTransaction().begin();
    s.createSQLQuery(query).executeUpdate();
    s.getTransaction().commit();
    s.close();
}
catch (HibernateException erro){
    s.getTransaction().rollback();
    s.close();
} 
```

我强烈建议您不要使用连接参数来防止 SQL 注入攻击，或者仅仅是取决于您的字符串的错误。看看[HQL](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch16.html)和[Criteria](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch17.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-05T17:24:47.490

希望这可以帮助像我这样的人

如果我们直接对一个字段进行更新，它会将所有其他字段设置为其默认值。

```
Session session = factory.openSession();
Transaction tx = session.beginTransaction();
User user = new User();
user.password("xxxxx");
session.update(user);
tx.commit();
session.close(); 
```

上面的代码将所有其他字段设置为默认值。所以为了避免这种情况，我们必须从表中获取对象，然后修改它并执行更新操作。

我们可以使用`session.load`或`session.get`获取对象并更新它。

**代码**：

```
User u = session.load(User.class, userName);
u.setPassword(newPassword); 
```

或者

```
User u = session.get(User.class, userName);
u.setPassword(newPassword); 
```

然后需要执行`session.update(user)`

完整代码：

```
 SessionFactory factory = hibernateUtils.getSessionFactory();
        Session session = factory.openSession();
        Transaction tx = session.beginTransaction();
        User user = session.load(User.class, username);
        user.setPassword("xxxxxx");
        session.update(user);
        tx.commit();
        session.close(); 
```

# php - 如何禁用单个复选框？

> ID：10948659
> 
> 赞同：1
> 
> 时间：2012-06-08T12:14:21.153
> 
> 标签：php, html, xhtml

我想使用 for显示数组值，后跟`checkbox`一个 html 内部：`table``loop`

```
<?php
    for ($j = 0; $j < $data['user']['droit']['cnt']; $j++)
    {
?>
        <table>
            <tr>
                <td><?php echo $data['user']['droit'][$j]['menu_titre']; ?></td>
                <?php
                    $checked = "";
                    if (is_array($data['user_droit']) && count($data['user_droit']) > 0 && in_array($data['user']['droit'][$j]['menu_code'], $data['user_droit']))
                        $checked = " checked ";
                ?>
                <td><input type="checkbox" name="<?php echo $data['user']['droit'][$j]['menu_code']; ?>" 
                           value="<?php echo $data['user']['droit'][$j]['menu_code']; ?>" <?php echo $checked ?> />
                </td>
            </tr>
        </table>
<?php
    }
?> 
```

`disabled`如果从循环中检查它，我不知道如何使单个复选框成为。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:19:35.970

或设置`$checked = " checked disabled ";`

```
 <?php
        for ($j = 0; $j < $data['user']['droit']['cnt']; $j++)
        {
    ?>
            <table>
                <tr>
                    <td><?php echo $data['user']['droit'][$j]['menu_titre']; ?></td>
                    <?php
                        $checked = "";
                        if (is_array($data['user_droit']) && count($data['user_droit']) > 0 && in_array($data['user']['droit'][$j]['menu_code'], $data['user_droit']))
                        {
                            $checked = " checked disabled ";
                        }
                    ?>
                    <td><input type="checkbox" name="<?php echo $data['user']['droit'][$j]['menu_code']; ?>" 
                               value="<?php echo $data['user']['droit'][$j]['menu_code']; ?>" <?php echo $checked ?> />
                    </td>
                </tr>
            </table>
    <?php
        }
    ?> 
```

# .net - 将日期格式从 m/d/yyyy 更改为 dd/mm/yyyy

> ID：10948663
> 
> 赞同：-3
> 
> 时间：2012-06-08T12:14:37.367
> 
> 标签：.net, vb.net, datetime, datetime-format

在一台服务器上[now.date()](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.dateandtime.now.aspx)给出像“08/06/2012 00:00:00”这样的日期，而在另一台服务器上给出“6/8/2012 12:00:00 AM”。我需要像'08/06/2012 00:00:00'这样的日期。我不能使用 now.date.tostring("dd/MM/yyyy") 因为它在太多地方。可以通过设置服务器日期时间格式来实现吗？如果是，那么如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:16:53.467

我建议在系统设置中将每个服务器的日期时间格式设置为相同。

要覆盖默认格式，您需要使用自定义日期时间格式创建自己的 CultureInfo，然后将其设置为`Thread.Current.CurrentCulture`.

# javascript - 为什么facebook“发送”按钮呈现空的空白窗口？

> ID：10948666
> 
> 赞同：1
> 
> 时间：2012-06-08T12:14:45.850
> 
> 标签：javascript, html, facebook

[我从facebook api](http://developers.facebook.com/docs/reference/plugins/like/)添加了代码，Like 按钮效果很好，但是当按下“发送”按钮时，它会呈现一个空白的空白窗口

![在此处输入图像描述](../Images/27ff6547f46b49678d675364f1899ace.png)

我根本无法让它工作......代码正是Facebook提供的，那么我的css问题是什么？我根本不这么认为，因为`<body>`这个空白 iframe 中的 html 是空的（添加在生成的 iframe 的 html 内容下方）：

```
 <html lang="ro" id="facebook" class=""><head><meta charset="utf-8"><script>function envFlush(a){function b(c){for(var d in a)c[d]=a[d];}if(window.requireLazy){requireLazy(['Env'],b);}else{Env=window.Env||{};b(Env);}}
    envFlush({"user":"100001239412598","locale":"ro_RO","method":"GET","svn_rev":570203,"tier":"","vip":"69.171.247.37","static_base":"http:\/\/static.ak.fbcdn.net\/","www_base":"http:\/\/www.facebook.com\/","rep_lag":2,"fb_dtsg":"AQBOKqPl","ajaxpipe_token":"AXhXQi8-oWUGGfAu","lhsh":"KAQFH3p9n","tracking_domain":"http:\/\/pixel.facebook.com","retry_ajax_on_network_error":"1","fbid_emoticons":"1"});</script><script>envFlush({"eagleEyeConfig":{"seed":"1kC9","sessionStorage":true}});CavalryLogger=false;window._script_path = "\/plugins\/send_button_form_shell.php";</script><noscript> &lt;meta http-equiv="refresh" content="0; URL=/plugins/send_button_form_shell.php?anchorTargetX=88&amp;amp;anchorTargetY=9.5&amp;amp;api_key=315447585207093&amp;amp;channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D6%23cb%3Df22a63973%26origin%3Dhttp%253A%252F%252Flocalhost%253A2263%252Ffec0b9f18%26domain%3Dlocalhost%26relation%3Dparent.parent&amp;amp;controllerID=u7jiqd_4&amp;amp;error&amp;amp;extended_social_context=false&amp;amp;locale=en_GB&amp;amp;nodeURL=http%3A%2F%2Fconvertmypdftoword.com%2F&amp;amp;offsetX=77&amp;amp;offsetY=20&amp;amp;sdk=joey&amp;amp;_fb_noscript=1" /&gt; </noscript>
    <meta name="robots" content="noodp, noydir"><meta name="description" content=" Facebook este o reţea socială care conectează oamenii cu prietenii lor şi cu alte persoane care lucrează, studiază şi trăiesc în preajma lor. Oamenii folosesc Facebook pentru a ţine legătura cu prietenii, pentru a încărca un număr nelimitat de fotografii, pentru a posta link-uri şi videoclipuri şi pentru a afla mai multe despre oamenii pe care îi întâlnesc."><link rel="alternate" media="handheld" href="http://www.facebook.com/plugins/send_button_form_shell.php?anchorTargetX=88&amp;anchorTargetY=9.5&amp;api_key=315447585207093&amp;channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D6%23cb%3Df22a63973%26origin%3Dhttp%253A%252F%252Flocalhost%253A2263%252Ffec0b9f18%26domain%3Dlocalhost%26relation%3Dparent.parent&amp;controllerID=u7jiqd_4&amp;error&amp;extended_social_context=false&amp;locale=en_GB&amp;nodeURL=http%3A%2F%2Fconvertmypdftoword.com%2F&amp;offsetX=77&amp;offsetY=20&amp;sdk=joey">
        <link rel="stylesheet" href="http://static.ak.fbcdn.net/rsrc.php/v2/yQ/r/6hVMLER2b2X.css">
        <link rel="stylesheet" href="http://static.ak.fbcdn.net/rsrc.php/v2/yy/r/jgXc1egys1V.css">

        <script src="http://static.ak.fbcdn.net/rsrc.php/v2/y5/r/_xZSy89IRtb.js"></script>
      <script>window.Bootloader && Bootloader.done(["Mw+jI"]);</script></head>
<body></body>
</html> 
```

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:41:36.717

在我为 facebook 添加元标记后它可以工作：

```
<meta property="og:title" content="your_content"/>

<meta property="og:image" content="your_logo"/>

<meta property="og:type" content="website"/>

<meta property="fb:app_id" content="your_app_id"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T16:51:49.550

如果您仍然有问题，请检查此工具： [https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

它会检查您的网站并告诉您缺少的内容，例如：

**应该修复的按钮警告**

```
Admins And App ID Missing - fb:admins and fb:app_id tags are missing. These tags are necessary for Facebook to render a News Feed story that generates a high click-through rate.

Like Button Tag Missing - og:title is missing. The og:title meta tag is necessary for Facebook to render a News Feed story that generates a high click-through rate.

Like Button Tag Missing - og:type is missing. The og:type meta tag is necessary for Facebook to render a News Feed story that generates a high click-through rate.

Like Button Tag Missing - og:image is missing. The og:image meta tag is necessary for Facebook to render a News Feed story that generates a high click-through rate. 
```

# javascript - 在 IE9 的新窗口中打开 pdf 不起作用

> ID：10948667
> 
> 赞同：0
> 
> 时间：2012-06-08T12:14:46.040
> 
> 标签：javascript, internet-explorer-9

我用了这段代码

```
<a href="javascript:window.open('../../files/registration/2013CRNNS_GuideforLicenceRenewalApplication.pdf','1','width=750,height=900')" > 
```

在新窗口中打开一个 pdf 可以在 chrome 中正常工作，但是当我在 IE9 中尝试它时，pdf 文件仍然打开，但是父窗口变成空白，`[object]`上面只有一个。

编辑：我刚刚发现即使我试图打开一个html页面而不是pdf，它仍然发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:16:46.353

这是因为浏览器将当前文档替换为表达式`javascript:...`的结果。在这种情况下，返回值是一个表示打开的窗口的对象，`[object Object]`当显示为文本时，它会变成（或类似的东西）。为了避免这种情况，您应该始终使用`void`运算符，它只是丢弃其操作数（从技术上讲，`void`运算符评估其操作数并返回`undefined`）：

```
<a href="javascript:void window.open(....)"> 
```

# mysql - mysql选择事件作为多条记录

> ID：10948668
> 
> 赞同：0
> 
> 时间：2012-06-08T12:14:50.363
> 
> 标签：mysql

如何在结果集中选择多条记录中的事件作为天数

例子：

```
id     |     event    |     dateFrom            |       dateTo
1           festival     2012-06-15 01:18:00        2012-06-17 01:18:00 
```

结果：

```
id    |  date
1       2012-06-15 
1       2012-06-16
1       2012-06-17 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:21:45.310

你不能。最好的方法是制作一个简单的表格，其中包含一年中的所有日期。我做了一个简单的存储过程：

```
CREATE DEFINER = 'root_extern'@'%' PROCEDURE fill_calendar 
(
  IN  start_date  date,
  IN  end_date    date
)
BEGIN
  DECLARE crt_date DATE;
  SET crt_date=start_date;
  WHILE crt_date < end_date DO
    INSERT INTO `calendar` (`date`) VALUES (crt_date);
    SET crt_date = ADDDATE(crt_date, INTERVAL 1 DAY);
  END WHILE;
END| 
```

您的查询将如下所示： `SELECT date FROM calendar WHERE date BETWEEN dateFrom AND dateTo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:19:40.513

使用这样的联合：

```
(SELECT id, dateFrom date FROM table) UNION (SELECT id, dateTo date FROM table) 
```

# c# - 根据 URL 验证 WCF 用户

> ID：10948670
> 
> 赞同：1
> 
> 时间：2012-06-08T12:14:55.760
> 
> 标签：c#, asp.net, wcf

如果我有一个 wcf 休息服务，例如[http://somedomain.com/service.svc/uniqueid/somemethod/parameter1](http://somedomain.com/service.svc/uniqueid/somemethod/parameter1) 那么有没有办法全局检查uniqueid是否对每个访问服务器的请求都有效。我可以检查每个操作合同，但我正在寻找一种不需要这样做的方法，以便每次访问服务时都会检查 uniqueid，如果无效则不会继续。

只是为了进一步了解我想要实现的目标...... WCF 服务是一个开放的 API。获取 uniqueid 也是开放的，不需要任何注册。我想使用 uniqueid，所以如果 API 被滥用，我可以轻松地获取 1 个 ID 的访问权限，而不会影响系统的任何其他用户。

更新：根据 Mike 的建议，我创建了一个 IParameterInspector

```
[AttributeUsage(AttributeTargets.Class)]
class IDParameterInspector : Attribute, IParameterInspector 
```

并将其附加到我的服务类

```
[IDParameterInspector]
public class MetaData : IMetaData 
```

我现在遇到的问题是 ApplyDispatchBehavior 永远不会运行。

```
public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcher channelDispatcher in serviceHostBase.ChannelDispatchers)
        {
            if (channelDispatcher == null)
            {
                continue;
            }

            foreach (var endPoint in channelDispatcher.Endpoints)
            {
                if (endPoint == null)
                {
                    continue;
                }

                foreach (var operation in endPoint.DispatchRuntime.Operations)
                {
                    operation.ParameterInspectors.Add(this);
                }
            }
        }
    } 
```

有人现在我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:59:50.233

这是如何通过属性使用参数检查器和自定义行为。不幸的是，您需要同时实现两者。

所以从接口中服务方法的装饰开始

```
[MyFirstCustomBehavior()]
string SayHello(string language); 
```

然后我们需要定义 MyFirstCustomBehavior 类。

```
internal sealed class MyFirstCustomBehavior : Attribute, System.ServiceModel.Description.IOperationBehavior
{

    #region IOperationBehavior Members

    public void AddBindingParameters(System.ServiceModel.Description.OperationDescription operationDescription, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
        //no special behaviour
    }

    public void ApplyClientBehavior(System.ServiceModel.Description.OperationDescription operationDescription, System.ServiceModel.Dispatcher.ClientOperation clientOperation)
    {
        throw new NotImplementedException();
    }

    public void ApplyDispatchBehavior(System.ServiceModel.Description.OperationDescription operationDescription, System.ServiceModel.Dispatcher.DispatchOperation dispatchOperation)
    {
        dispatchOperation.ParameterInspectors.Add(new MyFirstCustomParameterInspector());
    }

    public void Validate(System.ServiceModel.Description.OperationDescription operationDescription)
    {
        //no special behaviour
    }

    #endregion
} 
```

然后我们需要编写检查器。

```
internal sealed class MyFirstCustomParameterInspector : System.ServiceModel.Dispatcher.IParameterInspector
{
    #region IParameterInspector Members

    public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState)
    {
        ////do stuff here
    }

    public object BeforeCall(string operationName, object[] inputs)
    {
        ////or here
        return null;
    }

    #endregion
} 
```

然后你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:15:23.903

您可以尝试创建将影响所有传入请求的**自定义服务行为。**

[这](http://www.codeproject.com/Articles/37280/WCF-Service-Behavior-Example-IPFilter-Allow-Deny-A)是一个基于 IP 地址过滤请求的示例，您可以将其用作参考。如果我有时间我会发布一些代码。

# python - 在reportlab中创建具有不同高度行的表格

> ID：10948671
> 
> 赞同：6
> 
> 时间：2012-06-08T12:15:01.030
> 
> 标签：python, reportlab

我正在尝试使用 reportlab 创建发票模板。对于发票中的行项目，我使用的是表格。表格的第一行包含标题，随后的行将是实际的行项目。我基本上想要实现的是，如果表格只包含 1 行项目（加上一行标题），表格应该跨越整个页面。

怎么可能呢？我看不到任何单独指定行高的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-15T04:57:01.720

您可以在创建 Table 对象时指定每行高度：

```
rows = [["Header1", "Header2"], ["Data1", "Data2"]]
table = Table(rows, colWidths=(50*mm, 50*mm), rowHeights=(10*mm, 250*mm)) 
```

要控制表格单元格中的文本对齐方式，您可以使用 TableStyle。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T16:09:32.013

`TableStyles`您可以使用和`SPAN`命令来实现这一点。[您可以从ReportLab 用户手册](http://www.reportlab.com/docs/reportlab-userguide.pdf)的第 81 页开始阅读有关其工作原理的更多信息。这将使您可以让单元格跨越任意多的行和列。

您还可以使用`TableStyles`来调整每行和每列的宽度和高度等内容，但根据您的描述，这听起来不像您真正想要做的。

# java - 游戏找不到本机库 - jinput-linux64

> ID：10948673
> 
> 赞同：1
> 
> 时间：2012-06-08T12:15:06.427
> 
> 标签：java, netbeans, lwjgl, slick2d

我目前正在开发基于 Slick2D 的游戏，但遇到了问题。
当我尝试运行我的游戏时（无论是从 dist 还是 ide），我收到以下错误：

`java.lang.UnsatisfiedLinkError: no jinput-linux64 in java.library.path`

我的目录结构如下：
`./lib`包含所有 .jar 的库
`./natives`包含 .dll、.so 和 .jnilib

如果我去项目选项，并添加`-Djava.library.path=./natives`到 VM 选项，它工作正常。但在这种情况下，我需要将所有本机库都放在 dist 的根文件夹中。所以我想为所有本地人创建一个单独的文件夹，所以我的 main 中的第一行是这样的：

`System.setProperty("org.lwjgl.librarypath", System.getProperty("user.dir") + "/natives");`

但是由于某种原因，这并没有给出标准链接错误（例如 lwjgl not found），但由于某种原因 picks `jinput-linux64`，但 jinput 被添加为库并位于`natives`文件夹中。

我做错了什么还是有更好的方法来有效地整体分发我的游戏？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:01:04.643

在你的发行版中放置原生库有什么问题？你不能依赖你的听众来拥有你的应用程序需要的库。这是我如何分发我用 slick 制作的东西的方式：

```
MyFancyGame (Top directory)
-- libraries (mine and slick and lwjgl jars here)
   -- lwjgl 
      -- native (dlls and so files go in here) 
```

在顶层目录中，我包含一个 shell 脚本和一个包含一行的批处理文件：

```
java -ea -Djava.library.path="libraries/lwjgl/native/" -cp  "libraries/*" com.MyGame.Main 
```

这适用于我部署到的每台计算机，只要它们安装了 java。

# java - 查询中的 java.lang.NullPointerException 错误

> ID：10948678
> 
> 赞同：3
> 
> 时间：2012-06-08T12:15:11.063
> 
> 标签：java, android, sqlite

我已准备好为 android 开发我的第二个应用程序，并且我想使用该数据库。但是我被一个错误阻止了。

这是课程：

```
public class MyDatabase {  

    SQLiteDatabase mDb;
    DbHelper mDbHelper;
    Context mContext;
    private static final String DB_NAME="epsoftsms";//nome del db
    private static final int DB_VERSION=1; //numero di versione del nostro db

    public MyDatabase(Context ctx){
            mContext=ctx;
            mDbHelper=new DbHelper(ctx, DB_NAME, null, DB_VERSION);   //quando istanziamo questa classe, istanziamo anche l'helper (vedi sotto)    
    }

    public void open(){  //il database su cui agiamo è leggibile/scrivibile

        mDb=mDbHelper.getWritableDatabase();

    }

    public void close(){ //chiudiamo il database su cui agiamo
            mDb.close();
    }

    //i seguenti 2 metodi servono per la lettura/scrittura del db. aggiungete e modificate a discrezione
   // consiglio:si potrebbe creare una classe Prodotto, i quali oggetti verrebbero passati come parametri dei seguenti metodi, rispettivamente ritornati. Lacio a voi il divertimento

    public void inserimentoParametri(String parametro,String valore){ //metodo per inserire i dati
            ContentValues cv=new ContentValues();
            cv.put(ParametriMetaData.PARAMETRO, parametro);
            cv.put(ParametriMetaData.VALORE, valore);
            mDb.insert(ParametriMetaData.TAB_PARAMETRI, null, cv);
    }

    public Cursor listaParametri(){ //metodo per fare la query di tutti i dati

        return mDb.query(ParametriMetaData.TAB_PARAMETRI, null,null,null,null,null,null);

    }

    static class ParametriMetaData {  // i metadati della tabella, accessibili ovunque
            static final String TAB_PARAMETRI = "parametri";
            static final String PARAMETRO = "_parametro";
            static final String VALORE = "valore";

    }

    private static final String CREA_TAB_PARAMETRI = "CREATE TABLE IF NOT EXISTS "  //codice sql di creazione della tabella
                    + ParametriMetaData.TAB_PARAMETRI + " ("
                    + ParametriMetaData.PARAMETRO+ " text primary key, "
                    + ParametriMetaData.VALORE + " text not null);";

    private class DbHelper extends SQLiteOpenHelper { //classe che ci aiuta nella creazione del db

            public DbHelper(Context context, String name, CursorFactory factory,int version) {
                    super(context, name, factory, version);
            }

            public SQLiteDatabase getWritableDatabase() {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public void onCreate(SQLiteDatabase _db) { //solo quando il db viene creato, creiamo la tabella
                    _db.execSQL(CREA_TAB_PARAMETRI);
            }

            @Override
            public void onUpgrade(SQLiteDatabase _db, int oldVersion, int newVersion) {
                    //qui mettiamo eventuali modifiche al db, se nella nostra nuova versione della app, il db cambia numero di versione

            }

    }

} 
```

这是主要兴趣的一部分：

```
 final MyDatabase db=new MyDatabase(getApplicationContext());
    db.open();  //apriamo il db

    if (db.listaParametri().getCount()==0)
    {

   } 
```

当我启动应用程序时，它返回以下错误：

```
06-08 14:04:40.197: E/AndroidRuntime(1149): Uncaught handler: thread main exiting due to uncaught exception
06-08 14:04:40.207: E/AndroidRuntime(1149): java.lang.RuntimeException: Unable to start activity ComponentInfo{it.axiomatic.epsoft.sms/it.axiomatic.epsoft.sms.EpsoftSMSActivity}: java.lang.NullPointerException
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2268)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2284)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.app.ActivityThread.access$1800(ActivityThread.java:112)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1692)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.os.Looper.loop(Looper.java:123)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.app.ActivityThread.main(ActivityThread.java:3948)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invokeNative(Native Method)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at java.lang.reflect.Method.invoke(Method.java:521)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:782)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:540)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at dalvik.system.NativeStart.main(Native Method)
06-08 14:04:40.207: E/AndroidRuntime(1149): Caused by: java.lang.NullPointerException
06-08 14:04:40.207: E/AndroidRuntime(1149):     at it.axiomatic.epsoft.sms.MyDatabase.listaParametri(MyDatabase.java:50)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at it.axiomatic.epsoft.sms.EpsoftSMSActivity.onCreate(EpsoftSMSActivity.java:30)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)
06-08 14:04:40.207: E/AndroidRuntime(1149):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2231)
06-08 14:04:40.207: E/AndroidRuntime(1149):     ... 11 more 
```

有什么问题？Tnx 并原谅我的一些错误，这是我在 Stackoverflow 上的第一个请求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T12:33:39.243

这是你的问题：

```
 public SQLiteDatabase getWritableDatabase() { 
            // TODO Auto-generated method stub 
            return null; 
        } 
```

您正在覆盖 SQLiteDatabase 类`getWritableDatabase`方法并且在其中什么都不做（不打开数据库或任何东西）*并*返回 null，因此会导致 NPE。

删除该方法，您的 NPE 应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:21:34.607

使用您向我们展示的代码，唯一的可能性是`SQLiteDatabase mDb`当您调用 listaParametri 时它为空。您确定在调用 listaParametri 之前创建了对象吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:32:28.027

```
// open or close database with create statement
LD_ConstantData.db=openOrCreateDatabase(LD_ConstantData.dbName,SQLiteDatabase.CREATE_IF_NECESSARY,null);
LD_ConstantData.sql = new LD_MySqlOpenHelper(LD_Multi.this, LD_ConstantData.dbName, null, 1);
String sql="CREATE TABLE if not exists "+ LD_ConstantData.Table+"("+LD_ConstantData.colId+" INTEGER PRIMARY KEY AUTOINCREMENT,"+LD_ConstantData.coluserid+" TEXT NOT NULL,"+LD_ConstantData.colFirstName+" TEXT NOT NULL,"+LD_ConstantData.colLastName+" TEXT NOT NULL);";
LD_ConstantData.sql.create_table(sql);      
LD_ConstantData.db.close();
// for insert data
    LD_ConstantData.sql =  new LD_MySqlOpenHelper(context, database_name, null, database_version);
        LD_ConstantData.db = LD_ConstantData.sql.getReadableDatabase();
LD_ConstantData.db.execSQL("INSERT INTO "+LD_ConstantData.Table +" VALUES(NULL,'"+userid+"','"+userfirstname+"','"+userlastname+"');");
        LD_ConstantData.db.close(); 
```

# ios - 如何使用 UITextFields？

> ID：10948683
> 
> 赞同：1
> 
> 时间：2012-06-08T12:15:26.383
> 
> 标签：ios, uitextfield

我现在在我的应用程序中执行以下操作：

```
NSInteger myReell1 = 6;
NSInteger myReell2 = 7;
NSInteger myImag1  = -5;
NSInteger myImag2  = 3

+ (WSData *)scientificData 
{

float dataSet2D[2] = {0,myReell1 + myReell2};
float dataSet3D[2] = {0,myImag1 + myImag2};

return [WSData dataWithValues:[WSData arrayWithFloat:dataSet2D len:2]
                      valuesX:[WSData arrayWithFloat:dataSet3D len:2]];

} 
```

到目前为止，这对我来说效果很好。
以下是我想要更改的内容以及我想向您提出的要求：

我想使用 4`UITextFields`给用户提供个人输入的机会，而不是我现在使用的一致的整数 (myReell1, ... ,myImag2)。

您将如何`UITextfields`在上面的代码中实现这些（可能只是 1 个示例？）以使该`NSInteger`部分变得不必要。

请不要介意科学数据中的实际内容。;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:25:03.073

假设此代码位于视图控制器中，您可以：

1.  在类中创建您的 UITextField 成员变量。
2.  订阅 UITextFieldDelegate 类。
3.  在 Interface Builder 中连接您的文本字段（或以编程方式实例化它们并将它们添加到视图中）。
4.  实现 didFinishEditing 委托方法来处理实际输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:23:47.703

假设您制作了 4 个文本框，您可以通过 myReell1 = [textFieldOne.text intValue]; 获得整数

依此类推，你有一个可以不断使用的整数，没有硬编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:26:34.483

首先放置文本字段，然后当用户单击某个按钮时，只需将下面的代码放入您的按钮单击方法中...

```
NSInteger myReell1 = [textField1.text intValue];
NSInteger myReell2 = [textField2.text intValue];
NSInteger myImag1  = [textField3.text intValue];
NSInteger myImag2  = [textField4.text intValue]; 
```

:)

# hibernate - EhCache/休眠配置

> ID：10948686
> 
> 赞同：0
> 
> 时间：2012-06-08T12:15:54.420
> 
> 标签：hibernate, jpa, ehcache

我运行 JPA/Hibernate（hibernate-core-3.5.4、hibernate-entitymanager-3.4.0、ehcache 2.4.3），我意识到我已经使用旧值（3.3 之前）配置了 ehcache，如下所示（在我的持久性中.xml），这在生产中：

```
 <property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.SingletonEhCacheProvider"/> 
```

ehcache 还能用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:14:17.660

是的，它会，但你应该尽快切换到更新的风格......这将导致性能改进。

# facebook - facebook 元标签中的连接

> ID：10948689
> 
> 赞同：0
> 
> 时间：2012-06-08T12:16:06.150
> 
> 标签：facebook, facebook-graph-api, meta-tags

当我使用 facebook og:image 元标记时，当我放

```
 <meta property="og:image"   content="<?=$config['SITE_URL'].'Images/Items/Thumbnails/thumb_Item24.jpg'?>" /> 
```

对象调试器接受并找到图像，但是当我这样说时：

```
<meta property="og:image"   content="<?=$config['SITE_URL'].'Images/Items/Thumbnails/thumb_'.$itemImage?>"/> 
```

其中 $itemImage 是 Item24.jpg ，对象调试器无法识别它。为什么 ？连接有什么问题吗？

还有一件事。

我可以在 if 子句中放置元标记吗？喜欢

```
 <?if(case A) { 
       <meta property="og:image"   content="ImageA">
  }else{
       <meta property="og:image"   content="ImageB">
  } 
```

因为当我这样做时，尽管条件 A 为真，但它总是拍摄图像 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:24:28.367

更改元标记后，您是否正在清除 Facebook 的页面缓存？URL 的元标记不应经常更改，缓存仅每 24 小时左右清除一次，除非您使用[Facebook 的调试工具](https://developers.facebook.com/tools/debug)手动清除它

# mysql - 用于数据管理的 MySQL 程序编写

> ID：10948690
> 
> 赞同：1
> 
> 时间：2012-06-08T12:16:06.570
> 
> 标签：mysql, sql, stored-procedures

我在 MySQL 中有 db，有两个表，我需要像这样进行查询

```
SELECT a.*, b.* from db1.A a1 left join db2.A a2 using(id) where a1.email <> a2.email 
```

所以我想找到那些`email`在表格中有非空字段`db1.A`并且他们的电子邮件与来自的相同人的电子邮件不匹配的人`db2.A`，并写来自`db1.A`to 的电子邮件`db2.A`。

一开始我们有

```
db1.A          db2.A
email          email
www@ww.ww      NULL 
```

结果我想得到

```
db1.A          db2.A
email          email
www@ww.ww      www@ww.ww 
```

我可以使用任何脚本语言来完成它，但是只能在 SQL 的帮助下完成（此类任务）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:18:42.030

使用[ISNULL](http://msdn.microsoft.com/en-us/library/ms184325.aspx)表达式！当第一个参数是 时，它使用第二个参数`NULL`。

像这样的东西：

```
SELECT a.*, ISNULL(b.columnName, a.columnName) as 'columnName'
from db1.A a1
left join db2.A a2 using(id)
where a1.email <> a2.email 
```

* * *

您必须将 替换为`columnName`真实的列名，并为您想要的每一列执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:21:46.600

你想要一个更新声明。

Mysql 使用稍微不标准的语法进行更新（我倾向于忘记）。我认为正确的语法是：

```
update db2
    from db1
    set db2.email = db1.email
    where db1.id = db2.id and (db2.email is null or db2.email <> db1.email) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:18:44.893

您是否尝试过 is not null 条件？

```
SELECT a.*, b.* 
from db1.A a1 
left join db2.A a2 
using(id)
 where a1.email <> a2.email
and (a1.mail is not null and a2.mail is not) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:52:27.197

在我看来，它可以通过下一个查询轻松实现：

```
update db2.A a2, db1.A a1 set a2.email=a1.email where a1.id=a2.id and (db2.email is null or db2.email = '') and a1.email <> a2.email; 
```

谢谢大家。

# maven - Maven 版本不适用于分组 pom

> ID：10948695
> 
> 赞同：3
> 
> 时间：2012-06-08T12:16:28.940
> 
> 标签：maven, jenkins, maven-release-plugin

我想发布一个具有以下结构（简化）的项目：

parent
--module A（封装类型：pom）

--module B（类型 jar）

--module C（类型 jar，使用 A 和 B 作为依赖项）

我想在 Jenkins 的帮助下发布我的项目。构建工作正常。但是对于发布来说，reactor 中似乎不会有 pom 类型的项目的版本。构建失败，因为在我的 maven 存储库中找不到 pom 类型项目的版本。使用 jar 类型的依赖，一切正常。

有谁能够帮我？

在这里你可以看到控制台和我的测试 pom 文件：

```
 [INFO] [release:prepare {execution: default-cli}]
[INFO] Verifying that there are no local modifications...
[INFO] Executing: /bin/sh -c cd /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace && git status
[INFO] Working directory: /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace
[INFO] Checking dependencies and plugins for snapshots ...
[INFO] Transforming 'Unnamed - com.basfits.test:parentTest:pom:0.0.2-SNAPSHOT'...
[INFO] Transforming 'Unnamed - com.basfits.test:childTestSimplePom:pom:0.0.2-SNAPSHOT'...
[INFO] Transforming 'Unnamed - com.basfits.test:testjarDep:jar:0.0.2-SNAPSHOT'...
[INFO] Transforming 'Unnamed - com.basfits.test:testPomDep:jar:0.0.2-SNAPSHOT'...
[INFO] Updating testjarDep to 0.0.2
[INFO] Updating childTestSimplePom to 0.0.2
[INFO] Not generating release POMs
[INFO] Executing goals 'clean verify'...
[INFO] [INFO] Scanning for projects...
[INFO] [INFO] Reactor build order: 
[INFO] [INFO]   Unnamed - com.basfits.test:parentTest:pom:0.0.2
[INFO] [INFO]   Unnamed - com.basfits.test:childTestSimplePom:pom:0.0.2
[INFO] [INFO]   Unnamed - com.basfits.test:testjarDep:jar:0.0.2
[INFO] [INFO]   Unnamed - com.basfits.test:testPomDep:jar:0.0.2
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building Unnamed - com.basfits.test:parentTest:pom:0.0.2
[INFO] [INFO]    task-segment: [clean, verify]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] [clean:clean {execution: default-clean}]
[INFO] [INFO] [site:attach-descriptor {execution: default-attach-descriptor}]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building Unnamed - com.basfits.test:childTestSimplePom:pom:0.0.2
[INFO] [INFO]    task-segment: [clean, verify]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] [clean:clean {execution: default-clean}]
[INFO] [INFO] [site:attach-descriptor {execution: default-attach-descriptor}]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building Unnamed - com.basfits.test:testjarDep:jar:0.0.2
[INFO] [INFO]    task-segment: [clean, verify]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] [clean:clean {execution: default-clean}]
[INFO] [INFO] [resources:resources {execution: default-resources}]
[INFO] [WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] [INFO] skip non existing resourceDirectory /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace/testjarDep/src/main/resources
[INFO] [INFO] [compiler:compile {execution: default-compile}]
[INFO] [INFO] Compiling 1 source file to /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace/testjarDep/target/classes
[INFO] [INFO] [resources:testResources {execution: default-testResources}]
[INFO] [WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] [INFO] skip non existing resourceDirectory /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace/testjarDep/src/test/resources
[INFO] [INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] [INFO] No sources to compile
[INFO] [INFO] [surefire:test {execution: default-test}]
[INFO] [INFO] No tests to run.
[INFO] [INFO] [jar:jar {execution: default-jar}]
[INFO] [INFO] Building jar: /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace/testjarDep/target/testjarDep-0.0.2.jar
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building Unnamed - com.basfits.test:testPomDep:jar:0.0.2
[INFO] [INFO]    task-segment: [clean, verify]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] [clean:clean {execution: default-clean}]
[INFO] [INFO] Deleting directory /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace/testPomDep/target
[INFO] [INFO] [resources:resources {execution: default-resources}]
[INFO] [WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] [INFO] skip non existing resourceDirectory /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace/testPomDep/src/main/resources
[INFO] Downloading: http://maven.bcs.de/content/repositories/bis-releases/com/basfits/test/childTestSimplePom/0.0.2/childTestSimplePom-0.0.2.pom
[INFO] [INFO] Unable to find resource 'com.basfits.test:childTestSimplePom:pom:0.0.2' in repository bis-releases (http://maven.bcs.de/content/repositories/bis-releases)
[INFO] Downloading: http://maven.bcs.de/content/groups/public/com/basfits/test/childTestSimplePom/0.0.2/childTestSimplePom-0.0.2.pom
[INFO] [INFO] Unable to find resource 'com.basfits.test:childTestSimplePom:pom:0.0.2' in repository central (http://repo1.maven.org/maven2)
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [ERROR] BUILD ERROR
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Failed to resolve artifact.
[INFO] 
[INFO] Missing:
[INFO] ----------
[INFO] 1) com.basfits.test:childTestSimplePom:pom:0.0.2
[INFO]   Path to dependency: 
[INFO]      1) com.basfits.test:testPomDep:jar:0.0.2
[INFO]      2) com.basfits.test:childTestSimplePom:pom:0.0.2
[INFO] 
[INFO] ----------
[INFO] 1 required artifact is missing.
[INFO] 
[INFO] for artifact: 
[INFO]   com.basfits.test:testPomDep:jar:0.0.2
[INFO] 
[INFO] from the specified remote repositories:
[INFO]   nexus-central (http://maven.bcs.de/content/groups/public),
[INFO]   bis-releases (http://maven.bcs.de/content/repositories/bis-releases),
[INFO]   bis-snapshots (http://maven.bcs.de/content/repositories/bis-snapshots)
[INFO] 
[INFO] 
[INFO] 
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] For more information, run Maven with the -e switch
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Total time: 3 seconds
[INFO] [INFO] Finished at: Fri Jun 08 13:43:48 CEST 2012
[INFO] [INFO] Final Memory: 21M/271M
[INFO] [INFO] ------------------------------------------------------------------------
[JENKINS] Archiving /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/workspace/pom.xml to /CVS1/home/jenkins/.jenkins/jobs/PomDepstest/modules/com.basfits.test$parentTest/builds/2012-06-08_13-43-09/archive/com.basfits.test/parentTest/0.0.2-SNAPSHOT/parentTest-0.0.2-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR 
```

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.basfits.test</groupId>
<artifactId>parentTest</artifactId>
<version>0.0.2-SNAPSHOT</version>
<packaging>pom</packaging>
<build />
<scm>
    <connection>...</connection>
    <url>...</url>
    </scm>
<distributionManagement>
    <repository>
        <id>bis-releases</id>
        <name>BIS Releases</name>
        <url>...</url>
    </repository>
    <snapshotRepository>
        <id>bis-snapshots</id>
        <name>BIS Snapshots</name>
        <url>...</url>
    </snapshotRepository>
</distributionManagement>
<modules>
    <module>childTestSimplePom</module>
    <module>testPomDep</module>
    <module>testjarDep</module>
</modules> 
```

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>parentTest</artifactId>
        <groupId>com.basfits.test</groupId>
        <version>0.0.2-SNAPSHOT</version>
        <relativePath>..</relativePath>
    </parent>
    <artifactId>childTestSimplePom</artifactId>
    <packaging>pom</packaging>
    <build />

    <dependencies>
        <dependency>
            <groupId>com.mysema.querydsl</groupId>
            <artifactId>querydsl-apt</artifactId>
            <version>2.3.0</version>
        </dependency>
    </dependencies>
</project> 
```

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>parentTest</artifactId>
    <groupId>com.basfits.test</groupId>
    <version>0.0.2-SNAPSHOT</version>
    <relativePath>..</relativePath>
  </parent>
  <artifactId>testPomDep</artifactId>
  <build />

  <dependencies>
    <dependency>
        <artifactId>testjarDep</artifactId>
        <version>0.0.2-SNAPSHOT</version>       
        <groupId>com.basfits.test</groupId>     
    </dependency>
  <dependency>
        <artifactId>childTestSimplePom</artifactId>
        <version>0.0.2-SNAPSHOT</version>       
        <groupId>com.basfits.test</groupId>     
        <type>pom</type>
        <scope>compile</scope>
    </dependency>

  </dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T12:39:34.693

您可以将准备目标设置为`clean install`（默认为`clean verify`）。在你的分组pom中添加这个：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-release-plugin</artifactId>
            <configuration>
                <autoVersionSubmodules>true</autoVersionSubmodules>
                <preparationGoals>clean install</preparationGoals>
            </configuration>
        </plugin>
    <plugins>
<build> 
```

这会将发布的 pom.xml 安装到您的本地存储库中，以便您的子模块可以找到它。

# c# - 将 DLL 中的图像放到网页上

> ID：10948698
> 
> 赞同：0
> 
> 时间：2012-06-08T12:16:40.253
> 
> 标签：c#, image, dll, web

我被困在我认为很容易的事情上。我有一个返回 Image 对象的 DLL。我只是不知道如何在网页上显示该图像。

我尝试了几种方法，并在谷歌上搜索了一百万种不同的变体。

是否不能只将 Image 对象绑定到页面上的元素，如 HtmlImage 或简单的 img？

还是我需要将图像转换为流？还是位图？我真的被困住了！

任何帮助表示赞赏......

五

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:47:26.387

使用 Asp.Net WebForm，最简单的方法是创建自定义 ashx 文件。

在 Visual Studio 中，创建一个新的自定义处理程序（我不确定 Visual Studio 中模板的名称）。这将创建一个 .ashx 文件。

在这个处理程序的代码中，写类似（手下没有VS来测试语法）：

```
public void ProcessRequest(System.Web.HttpContext context)
{

   byte[] raw; 
   using(var ms = new MemoryStream()){
       Image myImage = GetFromDll();
       myImage.Save(ms, ImageFormat.Png);
       raw=ms.ToArray();
   }
   context.Response.ContentType = "image/png";
   context.Response.BinaryWrite(raw);
} 
```

然后，在您的浏览器中，导航到`http://yourserver/app/yourhandler.ashx.`

如果你想添加 url 参数，你可以从 Request.QueryString 集合中获取它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:39:02.120

它不像绑定那么简单。在客户端，图像作为单独的 GET 请求从 Web 服务器检索，这意味着您必须具有解析为图像的 URL。正如 Asif 建议的那样，另一种选择是将您的图像作为 Base64 字符串嵌入 HTML 中，这对于共享图像来说是一种不好的做法（请参阅 Steve B 的评论）。

您必须提供一个 URL（在 MVC 中返回图像*文件*的路由，或者具有适当内容类型和 WebForms 中的 Response.Write 的自定义页面），或者嵌入 html。

编辑：还有第三个选项涉及自定义 HTTP 处理程序。这些具有绕过应用程序框架并几乎直接从 Web 服务器提供内容的优势，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bb398986.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:20:07.963

将您的图像转换为 base64 字符串，然后将其设置在`<img/>`标签中。 `<img/>`可以用base64字符串显示图像。

或者，您可以保存图像并使用`<img/>`.

# jquery - 数据表行分组 - 如何展开以显示搜索匹配并添加重置搜索字段按钮

> ID：10948699
> 
> 赞同：0
> 
> 时间：2012-06-08T12:16:40.500
> 
> 标签：jquery, search, datatables, grouping

我正在使用 Datatables 可折叠/可扩展分组。

我已经对其进行了配置，以便所有组都在初始视图中折叠。感谢 ThulasiRam 的帮助，我集成了组行数和折叠/展开所有功能。 [数据表行分组 - 如何为每个组添加行数并展开/折叠所有](https://stackoverflow.com/questions/10460421/datatables-row-grouping-how-to-add-rowcount-per-group-and-expand-collapse-all)

我想将表搜索配置为自动扩展与搜索匹配的行的组，而不是唯一匹配的组。

我还想在表格搜索中添加一个重置按钮。我已经设法添加了“X”按钮，但我还没有找到正确设置点击功能的方法，以便它会重置表格搜索字段。

我已经设置了一个 jsfiddle 来展示我想要完成的事情：http: [//jsfiddle.net/lbriquet/SBdJd/9/](http://jsfiddle.net/lbriquet/SBdJd/9/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:02:42.600

好的，我知道您使用的是私有功能而不是公共功能，请参见[此处](http://datatables.net/docs/DataTables/1.9.0/DataTable.html#fnFilter)

另一个问题是您需要保留对数据表的引用才能使用其功能。这是[答案](http://jsfiddle.net/SBdJd/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T12:50:17.133

我喜欢全部折叠和全部展开按钮效果很好！

我不得不对其进行一些修改以支持最新版本的 jquery

```
var source = j$('div[id=myTable_filter]')[0];
var source2 = j$('div[id=myTable_filter]')[0].firstChild;
var divToadd = j$('<div>', {'id': 'dtsearch_filter'})
j$(source2).wrapAll(divToadd);
var htmlToadd = j$('<input />', {'type': 'button','class': 'expandedOrCollapsedGroup collapsed', 'value': 'Expand All' })
j$(htmlToadd).prependTo(source);

j$('.expandedOrCollapsedGroup').click(function() {
if (j$(this).hasClass('collapsed')) {
j$(this).addClass('expanded').removeClass('collapsed').val('Collapse All').parents('.dataTables_wrapper').find('.collapsed-group').trigger('click');
}
else {
j$(this).addClass('collapsed').removeClass('expanded').val('Collapse All').parents('.dataTables_wrapper').find('.expanded-group').trigger('click');     
}
}); 
```

加上这些样式设置 .expandedOrCollapsedGroup { width: 125px; 向左飘浮; } .dataTables_filter { 浮动：无；} .dtsearch_filter{ 浮动：对；}

# c++ - Mono 嵌入：如何在 C/C++ 中访问属性的类型

> ID：10948700
> 
> 赞同：0
> 
> 时间：2012-06-08T12:16:42.073
> 
> 标签：c++, c, mono, embed

我正在嵌入 Mono 以在我的应用程序中使用它来编写脚本。我想访问属性。为了确保我的应用程序期望的类型等同于某些属性的类型，我需要检查属性的类型。

我的问题是，我还没有找到访问属性类型的方法。

对于字段，只有一个功能，即`mono_field_get_type`. 我知道如何获取属性的 getter-/setter-method 的签名，但我找不到任何可以访问的函数，例如 getter-method 的返回类型。

你能告诉我如何检索属性的类型吗？

对于那些喜欢看一些代码的人：

```
MonoType* MonoScriptPropertyVariableSource::getType(MonoObject* instance, MonoProperty* prop)
{
    // MonoMethod* method = mono_property_get_get_method(prop);
    // MonoMethodSignature* sig = mono_method_get_signature(method, 0, 0);
    // and now? ...

    return ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:16:34.427

返回 mono_signature_get_return_type (sig);

MonoSignature 的其他访问器在 metadata.h 中。

# cakephp - 使用数组测试控制器 Cakephp 2 方法

> ID：10948704
> 
> 赞同：2
> 
> 时间：2012-06-08T12:17:03.403
> 
> 标签：cakephp, testing, phpunit, cakephp-2.1

嗨，我在控制器中有这个方法

```
 public function registeruser($data){
    var_dump($data);
    if(($data) && ($this->User->create($data))) {
      if($data['User']['password'] != Security::hash($data['User']['confirm_password'], null, true) ){
        $this->Session->setFlash('las contraseñas no coinciden');
        // unset($this->data['User']['password']);
        // unset($this->data['User']['confirm_password']);
        $this->redirect('index');
      }
      else if($this->User->save($data)) {
         $this->_subscribMailchimp($data);

      }else {
        $this->Session->setFlash('El mail no es valido o ya está registrado.');
        unset($data['User']['password']);
        unset($data['User']['confirm_password']);
        $this->redirect('index');
      }
    }else {
      $this->Session->setFlash('No se ha podido registrar.');
      $this->redirect('index');
    }
    return $this->User->getLastInsertID();
} 
```

我需要通过 $data 表单测试控制器

```
 $data = array('User' => array('name' => 'Luis jose',
                                  'address' => 'el quinto pino',
                                  'zip' => '28012',
                                  'city' => 'Madrid',
                                  'province' => '5',
                                  'email' => 'luis@hotmail.com',
                                  'password' => Security::hash(Configure::read('Security.salt') . '12345'),
                                  'confirm_password' => '12345'));
    $this->testAction('/users/registeruser', array('data' => $data, 'method' => 'get')); 
```

我试过这个数组（'data' => $data，'method' => 'get'）。控制器函数没有接收到数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:29:37.757

您的注册用户需要 1 个参数 ($data)，因此 URL 应如下所示：

/foo/registeruser/bar

这将用'bar'填充$data

您应该尝试 debug($this->request) 以查看使用 GET 或更好的方式传递数据的结果，使用 POST 并检查 $this->request->data (CakePHP 2) 或 $this->data ( CakePHP 1.3)

# jquery - 在 JSF 2 中发布渲染事件处理程序？

> ID：10948707
> 
> 赞同：3
> 
> 时间：2012-06-08T12:17:08.800
> 
> 标签：jquery, jsf-2

页面完全呈现后，JSF 2 中是否有任何事件处理机制？一旦用户到达我的应用程序的最后一页并且页面已完全呈现，我想使用户的会话无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:57:50.353

看看这里：[链接](http://docs.jboss.org/seam/3/faces/latest/reference/en-US/html/events.html#events.system.seam.listing)。也许您可以尝试在事件中使会话无效`PreRenderComponentEvent` （在呈现组件之后），尽管名称和描述似乎不一致。

如果它不起作用，您可以通过间接导航到目标页面来尝试解决方法。最初，您导航到某个虚拟 JSF 页面，这将使会话（构造后方法或系统事件侦听器）无效，然后触发重定向到您的目标 JSF 页面。[重定向帮助](https://stackoverflow.com/questions/1164964/jsf-navigation-redirect-to-previous-page)。如果您在多个地方需要这种行为，您还可以通过将目标页面作为参数传递来泛化中间 JSF。

编辑：您是否尝试过在 RequestScoped bean 中使用 @PreDestroy 注释的方法中使会话无效？如果它有效：我不确定 JSF 是否保证在发出新请求之前调用 predestroy 方法。

# c++ - 无法使用 CMake 生成 OpenCV 项目

> ID：10948708
> 
> 赞同：2
> 
> 时间：2012-06-08T12:17:12.933
> 
> 标签：c++, windows, visual-studio, opencv, cmake

每次我尝试构建时，都会收到错误消息：

CMake 错误：源目录“E:/Code/Test”似乎不包含 CMakeLists.txt。指定 --help 使用，或按 CMake GUI 上的帮助按钮。

这没有多大意义，因为我很清楚 CMakeLists.txt 包含在该目录中。我试图在互联网上寻找这个问题，但似乎我可能是唯一一个遇到这个问题的人。有没有人遇到过这个问题？

有没有更简单的方法来集成 OpenCV？我有一个 Visual Studio 的副本，但 OpenCV wiki 说它不再受支持。

我在 Windows 7 上，使用 CMake-GUI

我尝试开始使用的指南可以在这里找到：[http ://redkiing.wordpress.com/2010/10/03/opencv-and-visual-studio-2010-with-cmake/](http://redkiing.wordpress.com/2010/10/03/opencv-and-visual-studio-2010-with-cmake/)

**编辑**

我最终使用了 Windows 的预构建 OpenCV。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:59:21.970

如果您绝对可以在文本编辑器中打开 E:/Code/Test/CMakeLists.txt，那么我猜这是 CMake GUI 的错误。您可以尝试重新安装 CMake。如果仍然失败，您可以在[CMake 邮件列表中](http://www.cmake.org/cmake/help/mailing.html)询问和/或[提交错误报告](http://public.kitware.com/Bug/my_view_page.php)。

如果您想尝试不使用 CMake GUI，您可以打开 Visual Studio 命令提示符并从那里开始工作。

*   转到构建目录（在哪里构建二进制文件 - 如果需要，首先创建它）

    ```
    cd E:/Code/Test
    mkdir build
    cd E:/Code/Test/build 
    ```

*   使用适当的生成器调用 CMake。要查看生成器的完整列表，请运行`cmake -h`

    ```
    cmake .. -G"Visual Studio 10" 
    ```

*   显示选项

    ```
    cmake .. -L 
    ```

*   设置选项。例如要`BUILD_SHARED_LIBS`关闭，请执行以下操作：

    ```
    cmake .. -DBUILD_SHARED_LIBS:BOOL=OFF 
    ```

以这种方式设置的任何选项都会被缓存，并且对于任何进一步的 CMake 运行都将保持不变。如果您想查看每个缓存选项的帮助信息，请执行`cmake .. -LH`.

最终结果将是一个 VS 解决方案 E:/Code/Test/buildOpenCV.sln

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:28:56.850

您可以尝试使用 CMake-Gui，它应该位于 CMake/bin-Directory 中。使用此工具，您可以指定源位置和设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-01T14:37:28.320

我有问题，

我只是通过复制和过去重命名文件（CMakeLists.txt）。

它有效

# asp.net - Response.RedirectPermanent 的确切用法

> ID：10948713
> 
> 赞同：3
> 
> 时间：2012-06-08T12:17:39.603
> 
> 标签：asp.net

我阅读了很多博客，但我无法理解`Response.RedirectPermanent`. 它仅与 SEO 相关，还是对网站性能也有用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T12:29:08.413

据我了解，只有当我需要告诉 SEO 我删除了一个页面并且我得到了一个新页面时，我才能使用 RedirectPermanent。

假设我有一个名为“page1.aspx”的页面，谷歌在他的数据库搜索中缓存了它，现在如果我更改了 page1.aspx 或者我删除了它，那么我需要把 Response.RedirectPermanent("Page2.aspx ) 在Page1.aspx的页面加载中，这样google下次就知道Page1.aspx变成了Page2.aspx

它与网站性能无关

[这篇文章可能有助于让您了解用法](http://www.haiders.net/post/ResponseRedirectPermanent.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:29:54.927

`Response.RedirectPermanent`是 URL 重定向/转发。[您可以在http://en.wikipedia.org/wiki/URL_redirection](http://en.wikipedia.org/wiki/URL_redirection)获得正确的理由

# video - 将透明视频合并到另一个视频时出现黑色覆盖

> ID：10948714
> 
> 赞同：2
> 
> 时间：2012-06-08T12:17:49.937
> 
> 标签：video, ffmpeg, mencoder

这是我到目前为止所做的：

**创建透明PNG图像的命令：**

```
convert -size 640x480 -background transparent -fill blue \
-gravity South label:ROCK image1-0.png 
```

**创建透明视频的命令：**

```
ffmpeg -loop 1 -f image2 -i image1-0.png -r 20 -vframes 100 \
-vcodec png -pix_fmt bgra mov-1.mov 
```

（根据[这篇文章](http://ffmpeg-users.933282.n4.nabble.com/image-Overlay-tp4253142p4265267.html)） - 我希望这个视频是一个**透明的视频**。

**用另一个视频叠加视频的命令：**

```
ffmpeg -i final-video.mov -sameq -ar 44100 \
-vf "movie=mov-1.mov [logo];[in][logo] overlay=0:0 [out]" \
-strict experimental final-video.mov 
```

上面的命令完美无缺，我没有遇到任何问题，但我没有得到我期望的有点像水印效果，我希望 mov-1.mov 与 final-video.mov 是透明的。

**问题：**

1.  有什么方法可以验证生成的视频是否透明？除了合并？
2.  不知道为什么上面的 mov-1.mov 在与 final-video.mov 合并时不透明，解决这个问题的任何信息都会很棒。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:35:05.860

ImageMagick 并不总是以 FFmpeg 理解的方式生成透明 png。 ~~上次遇到这个问题时，我只能使用 GIMP 创建索引透明图像。~~ 没关系，回头看看[这个答案](https://stackoverflow.com/a/10507897/85950)，我发现我*显然*能够通过设置`png:color-type`. 您的转换命令将变为：

```
convert -size 640x480 -background transparent -fill blue \
-gravity South label:ROCK -define png:color-type=6 image1-0.png 
```

也就是说，您不需要将图像变成自己的电影。视频过滤器将`movie`接受一个透明的 png 作为输入。

# android - 如何使用 onTerminate() 方法，android？

> ID：10948718
> 
> 赞同：6
> 
> 时间：2012-06-08T12:18:13.750
> 
> 标签：android

我正在尝试使用`SharedPreferences`. 在我的`onCreate()`方法中，我使用 初始化我的变量`SharedPreferences`，并且我希望在应用程序结束时存储这些变量。我将此代码放在`onTerminate()`方法上，但从未存储变量。我认为该`onTerminate()`方法永远不会被调用，因为我还看到对此方法的评论说`// not guaranteed to be called`。那么如何在停止应用程序之前保存变量的状态呢？我知道怎么做，我只是不知道在哪里放置我的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:32:33.260

实际上，为了安全起见，您应该将内容保存在 onPause() 中，因为（至少在 3.0 之前）您的进程可以在调用 onPause() 后被操作系统杀死。这意味着 onStop() 和 onDestroy() 可能会或可能不会被调用。

在任何情况下，都不能保证 onDestroy() 会被调用。如果操作系统决定终止您的进程，它不会费心在任何活动上调用 onDestroy()。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T12:32:48.877

> 我想在应用程序结束时存储这些变量。

那是行不通的，因为当“应用程序结束”时您无法控制。

任何一个：

*   数据更改时保存数据，或

*   当用户告诉你时保存数据（例如，通过某种保存操作栏项目），或者

*   `onPause()`在调用您修改数据的活动时保存数据

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-19T20:21:38.107

你不应该使用这个功能。

> 此方法用于模拟过程环境。它永远不会在生产 Android 设备上调用，在这些设备上，只需杀死进程即可删除它们；这样做时不会执行任何用户代码（包括此回调）。

[资源](https://developer.android.com/reference/android/app/Application.html#onTerminate())

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:30:17.283

您也可以在 onPause() 中执行此操作，具体取决于您的需要。在这种情况下，它会在您的应用每次失去焦点时保存。

# rfid - 如何与韦根 RFID 读写器交互？

> ID：10948722
> 
> 赞同：3
> 
> 时间：2012-06-08T12:18:25.720
> 
> 标签：rfid

猜猜我们有一个可以读取卡号的 RFID 阅读器，这些阅读器可以使用 RS232 或 USB 电缆等连接到电脑。我如何与这个设备交互。在简单的情况下，我想在读卡器读取卡时读取卡号。

*   任何操作系统（但首选 Windows）

*   任何编程语言（但
    首选 c# 和其他 .net 语言）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-14T11:07:39.430

你的意思是：

1.  如何从返回的数据中获取卡号。看到这个[代码](http://www.markhagan.me/Samples/CreditCardSwipeMagneticStripProcessing)。
2.  如何与设备交互，如果 USB 设备看到此[代码](https://msdn.microsoft.com/en-us/library/windows/desktop/ff468895(v=vs.85).aspx)，或者串行设备使用 system.windows.IO.serial 端口类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:23:35.893

在 Wiegand 中编程非常容易。

使用 .Net 串行端口通信发送和接收数据。

找到可用的[数据表和命令集](http://www.datasheetarchive.com/Wiegand%20rfid-datasheet.html)。

# c# - 页面在右侧截断以使用 PdfSharp 修剪边距以横向显示

> ID：10948731
> 
> 赞同：4
> 
> 时间：2012-06-08T12:19:13.327
> 
> 标签：c#, asp.net, pdf, pdfsharp

我说的是 PdfSharp。纵向方向适用于有边距或没有边距。但是在横向的情况下，一旦我使用 TrimMargins 设置任何边距，页面就会在右侧截断。我在pdfSharp的示例代码上尝试过同样的事情并且遇到同样的问题！

看 pdf 为以下代码渲染得很好

```
page = document.AddPage();
page.Size = PdfSharp.PageSize.A4;
page.Orientation = PageOrientation.Landscape;
gfx = XGraphics.FromPdfPage(page);
gfx.DrawString("A4 (landscape)", font,XBrushes.DarkRed, new XRect(0, 0, page.Width, page.Height),XStringFormats.Center); 
```

但是对于以下代码 pdf 渲染不好，在右侧截断

```
page = document.AddPage();
page.TrimMargins.Top = 5;
page.TrimMargins.Right = 5;
page.TrimMargins.Bottom = 5;
page.TrimMargins.Left = 5;
page.Size = PdfSharp.PageSize.A4;
page.Orientation = PageOrientation.Landscape;
gfx = XGraphics.FromPdfPage(page);
gfx.DrawString("A4 (landscape)", font,XBrushes.DarkRed, new XRect(0, 0, page.Width, page.Height),XStringFormats.Center); 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T16:28:32.023

可能是 PDFsharp 中的错误。

作为一种解决方法，不要将方向设置为横向，而是在创建页面时交换宽度和高度。

```
page = document.AddPage();
//page.Size = PdfSharp.PageSize.A4;
XSize size = PageSizeConverter.ToSize(PdfSharp.PageSize.A4);
page.MediaBox = new PdfRectangle(new XPoint(0, 0), new XPoint(size.Height, size.Width)); // Magic: swap width and height
//page.Orientation = PageOrientation.Landscape; 
```

边距的默认单位是点。要获得例如毫米，您可以编写：

```
page.TrimMargins.Top = XUnit.FromMillimeter(5);
page.TrimMargins.Right = XUnit.FromMillimeter(5);
page.TrimMargins.Bottom = XUnit.FromMillimeter(5);
page.TrimMargins.Left = XUnit.FromMillimeter(5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T17:41:52.007

是的，这是 PdfSharp 的一个错误

我们可以像下面这样设置边距

```
page = document.AddPage();
//page.Size = PdfSharp.PageSize.A4;
XSize size = PageSizeConverter.ToSize(PdfSharp.PageSize.A4);
if(page.Orientation == PageOrientation.Landscape)
{
   page.Width  = size.Height;
   page.Height = size.Width;
}
else
{
   page.Width  = size.Width;
   page.Height = size.Height;
}

// default unit in points 1 inch = 72 points
page.TrimMargins.Top = 5;
page.TrimMargins.Right = 5;
page.TrimMargins.Bottom = 5;
page.TrimMargins.Left = 5; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-07-14T17:10:54.513

我有同样的问题——非常令人沮丧。对于顶级解决方案不起作用的任何人：试试这个！

由于 PDFSharp 只能在纵向页面上正确处理图形和转换，因此我在项目中的解决方法是在输入时将横向页面转换为纵向*页面*`.page.Rotate = 0`。请记住，这些文件现在是横向的，因此在应用图形和转换时请记住这一点。然后在保存文件之前，我将页面转换回横向`.page.Rotate = 90`。对我来说工作得很好！祝你们好运。

# javascript - 使用 highchart 创建图表时出错

> ID：10948739
> 
> 赞同：2
> 
> 时间：2012-06-08T12:19:39.647
> 
> 标签：javascript, highcharts

我需要使用 CSV 数据创建柱形图/条形图。这是数据的格式：

```
A 156600 154965  45679  184736 160819 42329
B 7271   4537    5379   245    0      1941
C 4347   19143   1075   397    6860   0
D 15     11283   1477   0      0      0
E 6323   537697  222430 21701  98725  3792
F 0      0       0      0      0      0
G 284356 744986  616369 0      0      106877
H 0      0       0      0      0      0
I 0      0       0      32962  0      0
J 0      12742   616    0      0      0
K 0      1215413 1420   0      0      0
L 0      0       0      0      0      0
M 24191  50166   18163  55282  48262  5862
N 0      0       0      0      0      20396 
```

在这里，我将手动添加 X 轴类别。所以，我想创建一个像 [这里看到的图表](http://www.highcharts.com/demo/column-basic)

我做的：

```
$(document).ready(function() {
    var options = {
        chart: {
            renderTo: 'container',
            defaultSeriesType: 'column'
        },
        title: {
            text: 'Total Transactions'
        },
        xAxis: {
           categories: [],labels : { y : 20, rotation: -45, align: 'right' }
        },
        yAxis: {
            title: {
                text: 'Units'
            }
        },
        series: []
    };

    $.get('data.csv', function(data) {
        // Split the lines
        var lines = data.split('\n');
                var series = { 
                    name: 'Transactions ',
                    data: []
                };
        $.each(lines, function(lineNo, line) {

            var items = line.split(',');
            if (lineNo != 0) {
                $.each(items, function(itemNo, item) {
                        if (itemNo == 0) {
                            options.xAxis.categories.push(item);
                        } else if (itemNo == 2){

                            series.data.push(parseFloat(item));
                        }
                });
            }

        });
        options.series.push(series);
        var chart = new Highcharts.Chart(options);
    });

}); 
```

但它采用按列计算的值意味着：

```
156600
7271    
4347    
15  
6323    
0   
284356
0   
0   
0   
0   
0   
24191   
0 
```

但我需要这个：

*   对于 A（如 Jan），该值应为

    ```
    156600 154965 45679 184736  160819  42329 
    ```

*   对于 B（如二月），另一列应具有以下值：

    ```
    7271 4537   5379    245 0   1941 
    ```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:51:27.000

按照现在的方式，您最终将得到 14 个系列，每个系列包含 6 个数据点。如果可以的话，您真正需要做的是更改 csv 文件，以便您的列代表月份，而行代表系列，如下所示： ![在此处输入图像描述](../Images/4faa9ab08124f468f7edf8ce2797bfb8.png)

然后，您可以为每一行创建一个数组并将该数组传递给 highchart。我认为您的代码应该适用于上述 csv 结构，因为您正在执行基于 \n 的拆分。

**编辑**

如果您无法更改 CSV 文件的格式，则以下修改后的代码应根据您的需要构建 6 系列。它假定列或行没有标题。它还忽略了超过一年中 12 个月的最后两行。

```
$.get('data.csv', function(data) {
  var lines = data.split('\n');
  var series1 = {name: 'India', data: []};
  var series2 = {name: 'China', data: []};
  var series3 = {name: 'Australia', data: []};
  var series4 = {name: 'Shreelanka', data: []};
  var series5 = {name: 'US', data: []};
  var series6 = {name: 'Cuba', data: []};

  $.each(lines, function(lineNo, line) {
    var items = line.split(',');
    //IGNORE THE LAST TWO ROWS
    if (lineNo < 12) {
      $.each(items, function(itemNo, item) {
        if (itemNo == 0) {
          series1.data.push(parseFloat(item)); 
        } else if (itemNo == 1){
          series2.data.push(parseFloat(item));
        } else if (itemNo == 2){
          series3.data.push(parseFloat(item));
        } else if (itemNo == 3){
          series4.data.push(parseFloat(item));
        } else if (itemNo == 4){
          series5.data.push(parseFloat(item));
        } else if (itemNo == 5){
          series6.data.push(parseFloat(item));
        }
      });
    }
  });
  options.series.push(series1);
  options.series.push(series2);
  options.series.push(series3);
  options.series.push(series4);
  options.series.push(series5);
  options.series.push(series6);
  var chart = new Highcharts.Chart(options);
}); 
```

# php - 如何仅在 MySQL 结果中获取关联数组？

> ID：10948743
> 
> 赞同：2
> 
> 时间：2012-06-08T12:19:49.267
> 
> 标签：php, mysql, arrays

问题：

```
$a = array("a" => "1", "b" => "2");
print_r($a); 
```

输出：

```
Array = ([0]=>'1'
         [a]=>'1'
         [1]=>'2'
         [b]=>'2') 
```

但我想要的是

```
Array = ( [a]=>'1'
          [b]=>'2') 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T12:21:56.363

应该：

```
$a=array('a'=> '1','b'=> '2'); 
```

或者，如果您的意思是要显示数组，那么

```
$a=array('a'=> '1','b'=> '2');
$data = print_r($a, true);
echo $data;
//would result in
Array ( [a] => 1 [b] => 2 ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T12:22:02.840

尝试

```
$a = array("a" => "1", "b" => "2"); 
```

而不是你所拥有的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T12:40:08.097

[从手册中](http://uk.php.net/manual/en/function.mysql-fetch-array.php)引用

> 通过使用 MYSQL_BOTH（默认），您将获得一个包含关联索引和数字索引的数组。使用 MYSQL_ASSOC，你只能得到关联索引（因为 mysql_fetch_assoc() 有效），使用 MYSQL_NUM，你只能得到数字索引（因为 mysql_fetch_row() 有效）。

除非您告诉 mysql_fetch_array 返回关联，否则它将返回每列的枚举和关联条目

指定 MYSQL_ASSOC 作为 mysql_fetch_array 的第二个参数来解决这个问题

从长远来看，我还建议放弃 mysql 并使用 mysqli 甚至 pdo

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T12:23:32.943

应该是： $a=array('a'=>'1','b'=> 2');

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T12:25:23.987

```
//do this
$a = array("a" => "1", "b" => "2");
//or do this
var_dump($a); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-25T03:05:08.960

`PDO:FETCH_ASSOC`相当于`MYSQL_ASSOC`那些使用 PDO 的人。

IE，

```
$sth = $dbh->query("SELECT...");
$a = $sth->fetch(PDO::FETCH_ASSOC); 
```

# javascript - 开发多租户应用程序，以便用户可以在同一浏览器中使用不同的选项卡在不同的组织中工作

> ID：10948747
> 
> 赞同：3
> 
> 时间：2012-06-08T12:20:04.997
> 
> 标签：javascript, asp.net-mvc-3, httpwebrequest, xmlhttprequest, multi-tenant

我正在使用 ASP.NET MVC3 开发一个多租户应用程序。那里的用户应该能够登录多个组织，并且他们应该能够使用同一浏览器的不同选项卡在这些组织中工作。

我无法使用会话对象来实现这一点，因为当会话由一个选项卡更新时，其他选项卡也引用该更新的组织。

所以有人可以告诉我一种方法，这会奏效。

提前致谢。

**编辑：**

*我认为这些信息也需要有人来回答这个问题。*

> 我有一个主页，显示特定用户正在工作的所有组织。因此，他可以通过在不同选项卡中打开链接进入这些组织页面。然后会话更新为新组织。即使是在旧选项卡中执行的任务，也会转到新选项卡中的组织。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:28:06.390

使用 DOM 的`window.name`属性来存储每个选项卡的数据，并使用您的 SSID 来相互同步这些数据。

您可以使用[Sessvars.js](http://www.thomasfrank.se/sessvars.js)作为帮助程序库。

请查看[此博客文章](http://www.thomasfrank.se/sessionvars.html)以获取更多信息。

# ruby-on-rails - 在 Rails 3.2 应用程序中带有资产管道的 HTML5 离线缓存清单文件？

> ID：10948748
> 
> 赞同：3
> 
> 时间：2012-06-08T12:20:06.053
> 
> 标签：ruby-on-rails, html, manifest, offline-browsing

我使用 Ruby on Rails 创建了我的第一个 Web 应用程序。现在，我想让它离线。

如何在 Rails 3.2 应用程序中创建 HTML5 离线缓存清单文件？

我读了一些问答和文章。它们似乎已经过时了。（例如[机架离线](https://github.com/wycats/rack-offline)？）

.note：例如 Rack-Offline 将输出 home.js 而不是 home-234201233453.js

为了利用资产管道，如果可能的话，我不想更改设置。（大多数文章建议禁用预编译）：-/

有什么建议和技巧吗？（创建控制器？erb？等）

ps 我是开发新手（仅学习 1 个月）。我了解 html5 清单机制，但我不确定如何在 rails 中创建它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:08:17.220

[Rack-offline](https://github.com/wycats/rack-offline)已更新，可与 Rails 3.1+ 中的资产管道一起使用。不幸的是，维护者没有升级 gem 版本，所以简单地安装 rack-offline gem 对你不起作用。在你的 Gemfile 中，指定最新版本的 git repo，你应该很好：

```
gem 'rack-offline', :git => 'https://github.com/wycats/rack-offline.git' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T20:07:24.890

gem 尚未更新，但有一个分支具有一个启用 Rails4 支持的提交：

[https://github.com/pascalw/rack-offline/tree/rails4-support](https://github.com/pascalw/rack-offline/tree/rails4-support)

`gem 'rack-offline', :github => 'pascalw/rack-offline'`

# javascript - 如何根据条件显示带有唯一项目符号的无序列表？

> ID：10948753
> 
> 赞同：1
> 
> 时间：2012-06-08T12:20:28.520
> 
> 标签：javascript, list

我正在从 sql server 生成一个列表，根据新旧记录对其进行过滤，并将它们显示在网页上各自的类别中。我想显示新旧记录的唯一列表项目符号。我目前得到的是每个类别的每条记录的混搭。列表项的图标来自一些 twitter bootstrap css，使用 glyphicons。新记录还有一个在悬停时显示的弹出框。列表生成代码

```
foreach($resultArray as $category_name => $items)
{
    echo '<h3>'. $category_name.'</h3><ul>';
foreach($items as $itemid => $itemDetails)
    {
    ?>
    <li class="<?php if(strtotime($itemDetails['posted']) > (strtotime('-30   days'))){echo 'icon-star';} else {echo '';} ?>" data-content="This item is new on Corkboard. Check it out!" data-original-title="New Item">
    <?php 
echo '<a href="newGenView.php?id='.$itemid.'">'.$itemDetails['name'].' - '.$itemDetails['description'].'</a>';
    ?>
    </li>
<?php
}//foreach
echo '</ul>';
}//foreach
?> 
```

而且，我有这些脚本标签：

```
<script type="text/javascript" src="assets/js/bootstrap-popover.js"></script> 
<script type="text/javascript">
$(document).ready(function() {
    $(this).popover(options);
});
</script> 
```

有什么想法或其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:21:12.633

*   不要忘记*bootstrap-tooltip.js*，它是popover 所[必需的](http://twitter.github.com/bootstrap/javascript.html#popovers)。
*   仅将`data-content`属性添加到*新* `<li>`的.
*   如果您不对其进行初始化， popover 的选择器应该用于`<li>`s 和 remove 参数。`options`
*   我会将图标移动到[bootstrap description](http://twitter.github.com/bootstrap/base-css.html#icons)`<i>`中的样子。
*   我添加了一些样式规则。

最终的 html 可能是：

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">
    <style type='text/css'>
        ul { list-style: none inside none; margin: 0; }
        li { display: inline; }
    </style>
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
    <script type='text/javascript' src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tooltip.js"></script>
    <script type='text/javascript' src="http://twitter.github.com/bootstrap/assets/js/bootstrap-popover.js"></script>
    <script type='text/javascript'>
        $(document).ready(function() { $('li').popover(); });
    </script>
</head>
<body>
    <h3>category_name</h3>
    <ul>
        <li>
            <i class="icon-minus"></i>
            <a href="newGenView.php?id=1">name1 - description1</a><br />
        </li>
        <li data-content="This item is new on Corkboard. Check it out!" data-original-title="New Item">
            <i class="icon-star"></i>
            <a href="newGenView.php?id=2">name2 - description2</a><br />
        </li>
    </ul>
</body>
</html> 
```

另请参阅[此示例](http://jsfiddle.net/cFzeA/)。

# asp.net-mvc - 在 MVC 中，部分视图和强类型视图有什么区别？

> ID：10948754
> 
> 赞同：3
> 
> 时间：2012-06-08T12:20:31.520
> 
> 标签：asp.net-mvc

问题就是标题本身。我是 MVC 的新手，现在我正在学习自学。请给我答案，这对于 MVC 的新手来说很清楚。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T12:22:09.587

部分视图只不过是 Html 的“片段”，您可以将其保存在一个单独的文件中，以便在其他视图中重复使用。有点像 ASP.NET WebForms 中的 UserControls。

强类型视图意味着它有一个与之关联的 ViewModel，控制器正在传递给它，并且该 View 中的所有元素都可以使用这些 ViewModel 属性

你也可以有强类型的部分。这意味着 Html 需要特定数据，因此您将其键入到某个 ViewModel

这是一个强类型视图的示例

```
@model SomeViewModel

...// all the html comes after 
```

非强类型视图没有`@model SomeViewModel`行

这是一个控制器操作的示例，它在没有 ViewModel 的情况下呈现普通视图

```
public ActionResult Index() {
    return View();
} 
```

这是一个呈现强类型视图的视图

```
public ActionResult Index() {
    var model = new SomeViewModel();
    return View(model);
} 
```

`@model SomeViewModel`并且视图通过在文件顶部使用该 ViewModel 。

所以现在视图有一个 ViewModel 我可以显示绑定到 ViewModel 的元素，比如

```
@Html.TextBoxFor(m => m.FirstName)
@Html.CheckBoxFor(m => m.IsAwesome) 
```

因此，输入这些字段的任何数据都绑定到 ViewModel。当用户单击提交按钮时，那些输入的值会被发送回服务器。

正如我之前所说，部分视图是可重用的 Html 片段。所以在同样的观点中，我可以添加我的部分。假设我有一个部分视图，其中包含我想在整个网站上重用的标准 Html，比如页脚

我可以创建一个 .cshtml 文件并将其放入其中

```
<div> footer text here</div> 
```

然后将它包含在任何视图中，不管它是否是强类型的，它只是可重用的 Html

```
@model SomeViewModel

@Html.TextBoxFor(m => m.FirstName)
@Html.CheckBoxFor(m => m.IsAwesome)

{@Html.RenderPartial("MyFooter")} 
```

# android - 如何移动自定义对话框？

> ID：10948756
> 
> 赞同：4
> 
> 时间：2012-06-08T12:20:35.367
> 
> 标签：android

我是android的初学者。我正在创建一个自定义对话框，它工作正常。但是这个对话框没有移动。如何移动此自定义对话框。例如在 windows 中包含记事本、画图等。当您单击此（记事本、画图等）标题栏时，您可以移动位置。如果可能，请发送信息如何移动对话框。否则，如果不可能发送原因。请回复您的答案和意见对我很有价值。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T12:41:29.297

Dialog 没有任何 Touch 事件侦听器，因此您可能会创建一个 Activity，在其上实现 onTouchListener，并在清单文件中

`<activity android:theme="@android:style/Theme.Dialog">`

现在您的 Activity 看起来像一个对话框，您可以实现视图`setOnTouchListener()`并在该侦听器中编写所需的代码。

# actionscript-3 - 将影片剪辑绘制到位图数据移动

> ID：10948763
> 
> 赞同：1
> 
> 时间：2012-06-08T12:21:11.117
> 
> 标签：actionscript-3, flash, apache-flex

我正在尝试将影片剪辑绘制到位图数据并让它看起来就像我刚刚将影片剪辑直接添加到舞台一样。然而结果发生了变化。我怀疑它与原点和边界有关，但无法弄清楚。

[http://megaswf.com/s/2441986](http://megaswf.com/s/2441986) （右边那个是问题）

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.display.MovieClip;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.geom.Matrix;
    import flash.geom.Rectangle;

    public class Main extends Sprite 
    {
        public var movieClip:MovieClip;
        public var bitmapData:BitmapData
        public var bitmap:Bitmap;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            addEventListener(Event.ENTER_FRAME, update);

            // for comparison, this is what I want the result to look like
            movieClip = new skeletonWalk();
            movieClip.x = 200;
            movieClip.y = 200;
            addChild(movieClip); 

            // and this it the problem child
            bitmap = new Bitmap();
            bitmap.x = 300;
            bitmap.y = 200;
            addChild(bitmap);
        }

        private function update(e:Event):void
        {
            var bounds:Rectangle = movieClip.getBounds(movieClip);
            bitmapData = new BitmapData(bounds.width, bounds.height, true, 0x0);
            bitmapData.draw(movieClip, new Matrix(1, 0, 0, 1, -bounds.x, -bounds.y));
            bitmap.bitmapData = bitmapData;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:34:05.313

您在位图的左上角绘制影片剪辑，因为当剑处于直立位置时剪辑会改变其高度，整个东西会向下移动。

尝试修复底部边缘，而不是顶部边缘。

```
bitmapData.draw(movieClip, new Matrix(1, 0, 0, 1, -bounds.x, maxMCheight - (bounds.y + bounds.height)));
//maxMCheight is the height of the clip while the sword is risen 
```

# batch-file - 使用 .bat 启动 powershell 脚本

> ID：10948767
> 
> 赞同：0
> 
> 时间：2012-06-08T12:21:33.950
> 
> 标签：batch-file, powershell-3.0

我可以在powershell中成功执行以下脚本，但是当我尝试从.bat运行脚本时我不成功。.bat文件是否有某种方式调用powershell脚本，因为它一直失败。我将如何创建一个 .bat 脚本来运行下面的 powershell 脚本。

```
cd 'Program Files (x86)\Citrix \XenApp \ServerConfig' .\XenAppConfigConsole.exe /ExecutionMode:Join /FarmName:xencity /OdbcUsername:chris /odbcPassword:Jahner0 /DsnFile:"C:\xencitylifeSQLDS.dsn" 
```

请大家帮忙 非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:03:58.120

您可以通过`powershell`在命令的开头放置

`powershell cd 'Program Files (x86)\Citrix \XenApp \ServerConfig' .\XenAppConfigConsole.exe /ExecutionMode:Join /FarmName:xencity /OdbcUsername:chris /odbcPassword:Jahner0 /DsnFile:"C:\xencitylifeSQLDS.dsn"`

这只是调用 powershell 并给它你的命令来运行，除了你在 cmd 中运行它。

# css - 更改 CSS 以兼容所有浏览器

> ID：10948773
> 
> 赞同：-7
> 
> 时间：2012-06-08T12:21:50.367
> 
> 标签：css

```
html, body {
        margin: 0px;
        padding: 0px;
        font: normal 14px/16px Helvetica, Sans-serif;
    }
    body {
        background: #cbd2d8;
        background-image: 
            -webkit-gradient(linear, left top, right top, 
                from(#c5ccd4), 
                color-stop(0.75, #c5ccd4), 
                color-stop(0.75, transparent), 
                to(transparent)); 
        -webkit-background-size: 5px 100%;
        background-size: 5px 100%;
        -webkit-user-select: none;
    }
    header.navigation-bar {
        position: relative;
        width: 10display: -webkit-box;
        -webkit-box-orient: horizontal;
        -webkit-box-pack:justify;
        -webkit-box-sizing: border-box;0%;

        height: 45px;
        padding: 6px 10px;
        background-image: 
            -webkit-gradient(linear, left top, left bottom, 
                from(#b2bbca), 
                color-stop(0.25, #a7b0c3),
                color-stop(0.5, #909cb3), 
                color-stop(0.5, #8593ac), 
                color-stop(0.75, #7c8ba5),
                to(#73839f)); 
        border-top: 1px solid #cdd5df;
        border-bottom: 1px solid #2d3642; 
    }
    header.navigation-bar.black {
        position: relative;
        width: 100%;
        display: -webkit-box;
        -webkit-box-orient: horizontal;
        -webkit-box-pack:justify;
        -webkit-box-sizing: border-box;
        height: 45px;
        padding: 6px 10px;
        background-image: 
            -webkit-gradient(linear, left top, left bottom, 
                from(#636363), 
                color-stop(0.25, #424242),
                color-stop(0.5, #202020), 
                color-stop(0.5, #000000)); 
        border-top: 1px solid #858585;
        border-bottom: 1px solid #858585; 
    }
    h1 {
        -webkit-box-flex: 1;
        text-align: center;
        margin: 0px;
        font: bold 20px/32px Helvetica, Sans-serif;
        letter-spacing: -1px;
        text-shadow: 0px -1px 0px rgba(0, 0, 0, 0.5);
        color: #fff;
    }

    h2 {
        font-size: 16px;
        line-height: 22px;
        text-shadow: 0 -1px 1px #fff;
        color: #666;
        text-align: center;
    }

    /* Bordered Button Styles */
    .button.bordered {
        -webkit-box-shadow: 0 1px 1px #9aa5bb, 0 -1px 1px #8e96a5; 
        border: solid 1px #54617d;
        border-color: #484e59 #54617d #4c5c7a #54617d; 
        display: inline-block;
        cursor: pointer;
        padding: 0px 10px;
        font-size: 12px;
        line-height: 28px;
        height: 30px;
        margin-top: 1px;
        -webkit-box-sizing: border-box;
        -webkit-border-radius: 5px;
        background-image: 
            -webkit-gradient(linear, left top, left bottom, 
                from(#92a1bf), 
                color-stop(0.25, #798aad),
                color-stop(0.5, #6276a0), 
                color-stop(0.5, #556a97), 
                color-stop(0.75, #566c98),
                to(#546993)); 
        color: #fff;
        -webkit-tap-highlight-color: transparent;
        -webkit-user-select: none;
    }
    .button.bordered:hover, .button.bordered.touched {
        background-image: 
            -webkit-gradient(linear, left top, left bottom, 
                from(#7d88a5), 
                color-stop(0.25, #58698c),
                color-stop(0.5, #3a4e78), 
                color-stop(0.5, #253c6a), 
                color-stop(0.75, #273f6d),
                to(#273f6d));
        -webkit-tap-highlight-color: transparent;
    }
    /* End Bordered Button Styles */

    /* Back Bordered Button Styles */
    .button.bordered.back {
        padding: 0px 7px 0px 3px;
        margin-left: 10px;
        position: relative;
    }
    .button.bordered.back > span {
        position: relative;
        z-index: 1;
    }
    .button.bordered.back > span.pointer {
        z-index: 0;
        background-image: 
            -webkit-gradient(linear, left top, right bottom, 
                from(#92a1bf), 
                color-stop(0.3, #798aad),
                color-stop(0.51, #6276a0), 
                color-stop(0.51, #556a97), 
                color-stop(0.75, #566c98),
                to(#546993)); 
        border-left: solid 1px #484e59;
        border-bottom: solid 1px #9aa5bb;
        -webkit-border-top-left-radius: 5px;
        -webkit-border-bottom-right-radius: 5px;
        -webkit-border-bottom-left-radius: 4px;
        height: 23.5px;
        width: 23.5px;
        display: inline-block;
        -webkit-transform: rotate(45deg);
        -webkit-mask-image: 
            -webkit-gradient(linear, left bottom, right top, 
                from(#000000), 
                color-stop(0.5,#000000), 
                color-stop(0.5, transparent), 
                to(transparent));
        position: absolute;
        left: -9px;
        top: 2.5px;
        -webkit-background-clip: content;
    }
    .button.bordered.back:hover > span.pointer, .button.bordered.back.touched > span.pointer {
        background-image: 
            -webkit-gradient(linear, left top, right bottom, 
                from(#7d88a5), 
                color-stop(0.3, #58698c),
                color-stop(0.51, #3a4e78), 
                color-stop(0.51, #253c6a), 
                color-stop(0.75, #273f6d),
                to(#273f6d)); 
    }

    /* End Back Bordered Button Styles */

    /* Next Bordered Button Styles */
    .button.bordered.next {
        padding: 0px 3px 0px 7px;
        margin-right: 10px;
        position: relative;
    }
    .button.bordered.next > span {
        position: relative;
        z-index: 1;
    }
    .button.bordered.next > span.pointer {
        z-index: 0;
        background-image: 
            -webkit-gradient(linear, left top, right bottom, 
                from(#92a1bf), 
                color-stop(0.3, #798aad),
                color-stop(0.51, #6276a0), 
                color-stop(0.51, #556a97), 
                color-stop(0.75, #566c98),
                to(#546993)); 
        border-right: solid 1px #9aa5bb;
        border-top: solid 1px #484e59;
        -webkit-border-top-left-radius: 5px;
        -webkit-border-bottom-right-radius: 5px;
        -webkit-border-top-right-radius: 4px;         
        height: 23.5px;
        width: 23.5px;
        display: inline-block;
        -webkit-transform: rotate(45deg);
        -webkit-mask-image: 
            -webkit-gradient(linear, right top, left bottom, 
                from(#000000), 
                color-stop(0.5,#000000), 
                color-stop(0.5, transparent), 
                to(transparent));
        position: absolute;
        right: -9px;
        top: 2.5px;
        -webkit-background-clip: content;
    }
    .button.bordered.next:hover > span.pointer, .button.bordered.next.touched > span.pointer {
        background-image: 
            -webkit-gradient(linear, left top, right bottom, 
                from(#7d88a5), 
                color-stop(0.3, #58698c),
                color-stop(0.51, #3a4e78), 
                color-stop(0.51, #253c6a), 
                color-stop(0.75, #273f6d),
                to(#273f6d)); 
    }
    /* End Next Bordered Button Styles */

    header.navigation-bar.black > .button.bordered {
        -webkit-box-shadow: 0 1px 1px #242424, 0 -1px 1px #323232; 
        border: solid 1px #54617d;
        border-color: #404040 #262626 #404040 #262626; 
        background-image: 
            -webkit-gradient(linear, left top, left bottom, 
                from(#838383), 
                color-stop(0.5, #444444), 
                color-stop(0.5, #303030), 
                to(#333333)); 
    }
    header.navigation-bar.black > .button.bordered.back > span.pointer {
        z-index: 0;
        background-image: 
            -webkit-gradient(linear, left top, right bottom, 
                color-stop(0.05, #838383), 
                color-stop(0.5, #444444), 
                color-stop(0.5, #303030), 
                color-stop(0.98, #333333)); 
        border-left: solid 1px #262626;
        border-bottom: solid 1px #404040;
        top: 2.35px;
    }

    header.navigation-bar.black > .button.bordered.next > span.pointer {
        z-index: 0;
        background-image: 
            -webkit-gradient(linear, left top, right bottom, 
                color-stop(0.05, #838383), 
                color-stop(0.5, #444444), 
                color-stop(0.5, #303030), 
                color-stop(0.98, #333333)); 
        border-right: solid 1px #404040;
        border-top: solid 1px #262626;
        top: 2.35px;
    }
    header.navigation-bar.black > .button.bordered:hover, header.navigation-bar.black > .button.bordered.touched {
        background-image: 
            -webkit-gradient(linear, left top, left bottom, 
                from(#4286f5), 
                color-stop(0.5, #4286f5),
                color-stop(0.5, #194fdb),
                to(#194fdb));
        -webkit-tap-highlight-color: transparent;
    }
    header.navigation-bar.black > .button.bordered.back:hover > span.pointer, header.navigation-bar.black > .button.back.touched > span.pointer, header.navigation-bar.black > .button.bordered.next:hover > span.pointer, header.navigation-bar.black > .button.next.touched > span.pointer {
        background-image: 
            -webkit-gradient(linear, left top, right bottom, 
                from(#4286f5), 
                color-stop(0.5, #4286f5),
                color-stop(0.5, #194fdb),
                to(#194fdb));
    } 
```

嗨，这是标题及其按钮的 css。它的样式类似于 iPhone 标题和按钮。但是，它仅适用于 chrome 或 safari（基于 webkit 的浏览器）。我希望将此代码转换为在 mozilla 和 IE 中也可以使用。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:26:53.363

基本上它只适用于 webkit，因为您只使用背景代码引用 webkit 浏览器：

```
-webkit-gradient 
```

您需要做的是使用以下方法解决其他浏览器：

```
-moz-linear-gradient
linear-gradient
etc etc.... 
```

**仅供参考，尝试这些以创建适当的渐变/CSS3 东西：**

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

[http://css3generator.com/](http://css3generator.com/)

* * *

**编辑：**不要忘记你还需要解决你的其他“-webkit”选择器，比如 -webkit-box-* 但老实说，我认为将 box-* 选择器用于简单菜单/导航项。更好地使用：

```
<ul id="navigation">
    <li>nav element 1...</li>
    <li>nav element 2...</li>
</ul> 
```

然后只需使用相关的 CSS 设置您的 html 样式（提示，查看“浮动”方法或内联块），因为这将节省大量 CSS 代码行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:11:16.403

Prefixr (http://prefixr.com/) 是一个免费工具，可将您的 CSS 转换为适当的跨浏览器 CSS。它并不完美，不会让你的 CSS 在每个浏览器中完美呈现，但它应该可以帮助你。

# php - PHP 生成的 ASCII txt 下载的行尾字符

> ID：10948776
> 
> 赞同：1
> 
> 时间：2012-06-08T12:21:58.123
> 
> 标签：php, html, download, http-headers, ascii

我想做一个用户选择的 SQL 数据的 ASCII 文本下载，可以立即在记事本中打开。数据库连接工作正常，启动下载的“标题”命令也是如此，但如果我能让行尾字符正确显示，我会被诅咒的。

标头通过以下方式静态定义：

```
$header = <<<EOD
  #Some header information
  #goes here on multiple
  #lines
  EOD; 
```

每行数据与选项卡连接：

```
$RS_SQL = $DBinterface->dbGetRecordSet($someQuery);
foreach($RS_SQL as $row) {
  $rowdata = '';
  foreach($row as $key=>$val) {
    if((!(int)$key) && $key!='0') {
      $rowdata[] = $row[$key];
    }
  }
  $dataOutput.=implode("\t",$rowdata)."\n";
}
header("Content-type: text/plain; charset=ISO-8859-1");
header("Content-Disposition: attachment; filename=SQLDataExport.txt");
echo $header."\n".$dataOutput; 
```

标题在记事本中显示得很好，并且所有制表符间距都完全按照设计...但是，任何通过 \r 或 \n 字符很好地格式化行的尝试都会导致单行包含未知字符（方框），其中换行符应该是。

我尝试将文件写入服务器，然后读取流并输出；尝试了标题信息的变体......有点明白通过二进制将页面下载到浏览器的方式有些奇怪，但是？

我错过了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:30:08.340

[为此，请使用PHP_EOL](http://php.net/manual/en/reserved.constants.php) ，而不是使用“\n”或“\r\n” 。它处理任何跨平台问题，并且非常适合编写要保存在服务器或客户端上的文件。

[这个问题](https://stackoverflow.com/questions/128560/when-do-i-use-the-php-constant-php-eol)有一些信息，可以被认为与你正在尝试做的事情有关。

你会像这样使用它：

```
$RS_SQL = $DBinterface->dbGetRecordSet($someQuery);
foreach($RS_SQL as $row) {
  $rowdata = '';
  foreach($row as $key=>$val) {
    if((!(int)$key) && $key!='0') {
      $rowdata[] = $row[$key];
    }
  }
  $dataOutput.=implode("\t",$rowdata).PHP_EOL;
}
header("Content-type: text/plain; charset=ISO-8859-1");
header("Content-Disposition: attachment; filename=SQLDataExport.txt");
echo $header."\n".$dataOutput; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:23:34.190

尝试将其添加`header`为 UTF-8：

```
header("Content-type: text/plain; charset=utf-8"); 
```

希望能帮助到你！:) 如果没有，请检查您的 PHP 代码是否有任何 UTF-8 `BOM`！

# ruby-on-rails - 预计定义。在模块内调用类时

> ID：10948779
> 
> 赞同：22
> 
> 时间：2012-06-08T12:22:15.970
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 新手。我在 lib 目录中有一个设置，如下所示：

```
lib/
   blog/
     core/
        search/
            base.rb 
```

base.rb 也定义了 Base 类：

```
module Blog
  module Core
    module Search
      class Base

        attr_accessor :properties

        def initialize(params)
          @properties = {}
        end
      end
    end
  end
end 
```

我的 application.rb 中有以下代码

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

当我将它包含在帖子控制器中时，我收到以下错误：

```
LoadError in PostsController#index

Expected /home/usr/code/blog/lib/blog/core/search/base.rb to define Base 
```

任何想法？我正在使用带有 RVM 的 rails 3.2.5。谢谢你的每一个建议。

**更新：**添加了我的完整堆栈：

```
Started GET "/admin/posts" for 127.0.0.1 at 2012-06-08 21:06:18 +0800

LoadError (Expected /home/usr/code/blog/lib/blog/core/search/base.rb to define Base):
  app/controllers/admin/base_controller.rb:5:in `<top (required)>'
  app/controllers/admin/posts_controller.rb:6:in `<top (required)>'

  Rendered /home/usr/.rvm/gems/ruby-1.9.3-p194@rails-3.2.5/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /home/usr/.rvm/gems/ruby-1.9.3-p194@rails-3.2.5/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.6ms)
  Rendered /home/usr/.rvm/gems/ruby-1.9.3-p194@rails-3.2.5/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.0ms) 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-12T16:43:23.083

我有同样的问题。它来自您尝试直接在**application.rb**中加载**/lib/blog/core/search/base.rb的事实****`/lib/**/`**

 ****我遇到的错误：**

```
Expected /[...]/myapp/lib/durative/base.rb to define Base (LoadError) 
```

**目录结构：**

```
lib/
 --durative/
   --base.rb 
```

**基础.rb：**

```
module Durative
  class Base
    def initialize(config)
       @config = {}
    end
    #...
  end
end 
```

**应用程序.rb：**

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

### 这是我为使其正常工作所做的更改

**目录结构：**

```
lib/
 --durative.rb **(added)**
 --durative/
   --base.rb 
```

**持续时间.rb：**

```
require 'durative/base' 
```

**base.rb**（没有变化）

**application.rb（已更改）：**

```
config.autoload_paths += Dir["#{config.root}/lib/"] 
```

告诉我们它是否也对您有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T12:17:15.053

我遇到过同样的问题。问题是因为我包含了子目录而没有包含它们的父 lib 目录：

```
# did not work
config.autoload_paths += %W(#{config.root}/lib/foo) 
```

和

```
# in lib/foo/my_class.rb
module Foo
  class MyClass
  end
end 
```

Foo::MyClass 将返回 Expected 以定义 MyClass

将 lib 目录添加到 config.autoload_paths 可以解决问题

```
# worked
config.autoload_paths += %W(#{config.root}/lib #{config.root}/lib/foo) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T11:13:37.673

只需添加： `require base.rb` 在您的 environment.rb 文件中。

来源：http: [//icebergist.com/posts/expected-xrb-to-define-x-loaderror](http://icebergist.com/posts/expected-xrb-to-define-x-loaderror)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-18T16:22:49.840

此外，要检查的一件事是您的控制器名称是否正确。

例如，确保您的 posts_controller.rb 在第一行看起来像这样

```
class PostsController < ApplicationController 
```

我在复制控制器并跟踪它以不更改控制器类名称时犯了错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T21:46:00.103

我的错误是我有

```
app/
  controllers/
      projects/
          some_controller.rb
      projects_controller.rb 
```

我试图让我的应用程序井井有条，并且在拥有命名空间时 - 正在拆分控制器。不幸的是，看起来 Rails 会在两者之间随机跳转，并且会有冲突导致 OP 中的错误。

解决方案：重命名您的子目录并调整任何路线。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T12:52:54.090

如果您有那个深深隐藏的类，请以这种方式访问​​它：

```
Blog::Core::Search::Base.new 'foo' 
```**

# android - 在android渲染中传递模型视图矩阵和投影矩阵值

> ID：10948784
> 
> 赞同：0
> 
> 时间：2012-06-08T12:22:46.020
> 
> 标签：android, opengl-es, rendering, qcar-sdk, rajawali

我正在尝试使用适用于 android 的 Min3d 或 Rajawali 渲染框架来渲染动画模型，但即使在从 QCAR 获取模型视图矩阵和投影矩阵之后，我也不知道如何将它们传递给这些框架，以便它们在现实世界坐标中渲染。任何人都知道如何传递模型视图矩阵和投影矩阵值？我尝试了很多东西，但没有找到解决方案，任何人都可以帮我解决这个问题。任何帮助都将受到欢迎,,, 在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:39:21.467

约吉先生。

github上的这个问题讨论帮助我解决了这个问题：[https ://github.com/MasDennis/Rajawali/issues/63](https://github.com/MasDennis/Rajawali/issues/63)

我知道，您已参与此主题，但我想发布答案，因为它对其他人有帮助。

# charts - 在 iReport 4.5.1 中获取分组计算结果

> ID：10948785
> 
> 赞同：0
> 
> 时间：2012-06-08T12:22:50.393
> 
> 标签：charts, jasper-reports, ireport

我在*iReport 4.5.1*中创建了一个报告，它在详细信息带中显示 jdbc 查询的结果，其中包含一些计算变量的组。我需要在图表中按值升序显示组计算结果和/或在摘要中列出结果以从那里绘制它们。它们在 x 轴上的位置并不重要，只要 y 值从左到右递增即可。

到目前为止，我已经尝试了以下方法：

1.  直接从组值创建了一个图表，但我无法按照我想要的方式对值进行排序。它们始终按照它们在报告中的显示顺序显示。

2.  将具有组计算的报表用作子报表，并尝试将值作为主报表详细信息带中的列表返回并从那里绘制图表。我只能生成一个值一次（组中的第一个或最后一个值），或者一个重复多次的值（基于主报告查询的行数）。

3.  将详细信息带和组带嵌套在另一个组中以列出外部组中的结果。同样，我只能返回一个结果。

我对*iReport*的体验很少，所以我希望我遗漏了一些简单的东西。任何人都可以提供解决方案或建议吗？

**编辑：我需要在图表中按值升序显示组计算结果和/或在摘要中列出结果以从那里绘制它们。我很想发布我的截图，但我没有代表。**

PS - jrxml 超过 1k 行。我应该发布一个特定的部分，还是只发布整个内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:47:20.573

您可以做到这一点的一种方法是在您的报告中放置一个子报告。如果您在报告中使用任何参数，您可以将它们传递给您的子报告。在子报告查询中，您可以按您需要的分组级别进行分组，并以您喜欢的任何方式对结果进行排序。您还可以执行所需的任何计算并创建图表。然后将此子报表放在您的摘要部分或组页脚中，您应该很高兴。

# database - Oracle 数据泵导出/导入

> ID：10948787
> 
> 赞同：4
> 
> 时间：2012-06-08T12:23:00.030
> 
> 标签：database, oracle, oracle10g

我正在尝试用两个数据库复制数据，并且都位于不同的服务器上。两者都是 Oracle 10g。

在我的电脑上，我通过 Toad 连接到实时数据库，并且我的电脑上安装了 10g 客户端。

通过 Toad 我试图导出数据转储文件，但在我的电脑上我找不到 expdp.exe 文件，我认为我的电脑上没有安装这个组件。

> 如何在我的电脑上安装 expdp.exe？
> 
> 我可以在我的电脑（网络）而不是服务器上导出数据转储文件吗？
> 
> 默认情况下，转储文件会复制到服务器上，但我可以将它们复制并粘贴到我的电脑上，然后使用这些文件通过 Toad 在不同的服务器上导入数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:34:18.063

Oracle 数据泵导出/导入的文件只能与 Oracle 数据库驻留在同一台服务器上。如果您的 PC 上安装了 Oracle 客户端，您应该有 expdp/impdp 实用程序。只需确保从命令行调用它们，而不是从 Toad。

所以，总结一下。要将数据从一台 Oracle 服务器传输到另一台：

*   从您的 PC 运行 expdp
*   将转储文件从服务器复制到您的 PC；当你在它的时候抓住生成的日志文件可能是明智的
*   将转储文件从您的 PC 复制到另一台服务器
*   从您的 PC 运行 impdp

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T17:12:48.890

正如其他人已经提到的那样，您 DataPump 不能使用数据库服务器之外的文件。

但是，您不需要在本地安装 expdp 和 impdp 实用程序。[您可以使用DBMS_DATAPUMP 包](https://docs.oracle.com/en/database/oracle/oracle-database/19/arpls/DBMS_DATAPUMP.html#GUID-AEA7ED80-DB4A-4A70-B199-592287206348)通过 SQL 启动 DataPump 作业

以下是有关如何使用该软件包的一些示例：

*   [http://www.orafaq.com/wiki/Datapump](http://www.orafaq.com/wiki/Datapump)
*   [http://psoug.org/reference/dbms_datapump.html](http://psoug.org/reference/dbms_datapump.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T12:44:54.750

与导入和导出转储文件相比，数据泵实用程序将在两个数据库之间移动模式和数据。Oracle 推荐它作为 imp 和 exp 的继承者。

*   验证目录 DATA_PUMP_DIR 是否存在或创建它。
*   在目标数据库上使用或创建对该目录具有读写权限和 DBA 权限的用户
*   验证或创建从目标到源的数据库链接
*   在目标数据库上删除您希望重新创建其架构和数据的用户
*   在目标数据库上运行这样的脚本

    SET NLS_LANG= 你的语言

    SET ORACLE_SID = 您的数据库名称

    impdp import_user/destination_database_name directory=DATA_PUMP_DIR network_link=link_name schemas= user1,user2 LOGFILE=Import.log TABLE_EXISTS_ACTION=REPLACE

这是 Windows 语法，对于 Linux 会有所不同。替换您的数据库名称、模式和链接名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T15:09:48.600

对于此处显示的情况，imp/exp 和 impdp/expdp 之间的唯一区别是 .dmp 文件的结束位置。如果您在 PC 上使用 exp，则该文件将在您的 PC 上，您不必将其从 Oracle 服务器中移动。在我们的商店中，只有 DBA 可以访问服务器，所以我使用的是 exp。

# c# - 如何最好地将字节数组从 C# 获取到 C++ WinRT 组件

> ID：10948791
> 
> 赞同：6
> 
> 时间：2012-06-08T12:23:20.230
> 
> 标签：c#, c++, windows-runtime

我们有一个带有业务逻辑的 WinRT 组件，该组件在内部处理 C++`unsigned char`缓冲区。我们现在想从 C# 中提供该缓冲区`byte[]`。完美的边界是什么样子的，*即*`SomeWinRTFunction`，下面函数的签名是什么？

```
void SomeWinRTFunction(something containing bytes from managed land)
{
    IVector<unsigned char> something using the bytes given from managed land;
} 
```

这种问题对于搜索引擎来说似乎还是太新了......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T18:39:16.267

在 C++ 部分，该方法应接受 uint8 的平台数组（相当于 C# 字节）。

```
public ref class Class1 sealed
{
public:
    Class1();
    //readonly array
    void TestArray(const Platform::Array<uint8>^ intArray)
    {

    }
    //writeonly array
    void TestOutArray(Platform::WriteOnlyArray<uint8>^ intOutArray)
    {

    }

}; 
```

在 C# 部分传递字节数组：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        Byte[] b = new Byte[2];
        b[0] = 1;
        var c = new Class1();
        c.TestArray(b);
        c.TestOutArray(b); 

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:44:54.200

在 WinRT IVector 中被投影为 IList，我不确定 byte -> unsigned char 但我怀疑也是。

C＃

```
byte[] array;
SomeWinRTFunction(array); 
```

C++

```
void SomeWinRTFunction(IVector<unsigned char> bytes) 
{ 
    IVector<unsigned char> something using the bytes given from managed land; 
} 
```

本[白皮书](http://download.microsoft.com/download/2/3/E/23E1E9BE-41AA-4716-A7B3-82040271394C/CLRandtheWindowsRuntime.docx)可能会提供更多信息。

# .net - 通过铸造异常

> ID：10948792
> 
> 赞同：0
> 
> 时间：2012-06-08T12:23:20.840
> 
> 标签：.net, exception

我想从网格视图内的文字中获取文本，我用于`databoundliteralconrtrol`投射。

但是当我运行程序时，异常通过

无法将 System.Web.UI.LiteralControl 类型的对象转换为 System.Web.UI.DataBoundLiteralControl 类型。 **.aspx 代码：**

```
 <Columns>
            <asp:TemplateField HeaderText="Selection">
            <ItemTemplate>
                <asp:CheckBox ID="check1" runat="server"/>

            </ItemTemplate>

            </asp:TemplateField>
             <asp:TemplateField HeaderText="ID" Visible="true">
        <ItemTemplate>
            <asp:Label ID="id7" runat="server" Text='<%#Eval("assessid") %>' ></asp:Label>

        </ItemTemplate>
        </asp:TemplateField>

    <asp:TemplateField HeaderText="Qno" Visible="true">
        <ItemTemplate>
         <asp:DropDownList  AppendDataBoundItems="true"  AutoPostBack="true"     ID="DropDownList1"  runat="server">
         <asp:ListItem ></asp:ListItem>

        </asp:DropDownList>

        </ItemTemplate>

        <EditItemTemplate>

         <asp:DropDownList    AutoPostBack="true"       ID="DropDownList2" runat="server">
        </asp:DropDownList>
        </EditItemTemplate>
        <FooterTemplate>

          <asp:TextBox ID="TextBox31"  runat="server" ></asp:TextBox>

     </FooterTemplate>
    </asp:TemplateField>

      <asp:TemplateField HeaderText="description" Visible="true">
        <ItemTemplate>

         <asp:Literal ID="id6" runat="server" Text='<%#Eval("description") %>' >
         </asp:Literal>
        </ItemTemplate>
         <EditItemTemplate>
             <asp:TextBox ID="TextBox1" Text='<%#Eval("description") %>' runat="server" ></asp:TextBox>

        </EditItemTemplate>
        <FooterTemplate>

        <asp:TextBox ID="TextBox3"  runat="server" ></asp:TextBox>

        </FooterTemplate>

    </asp:TemplateField>

     <asp:TemplateField HeaderText="Agree" Visible="true">
        <ItemTemplate>

         <asp:Literal ID="id5" runat="server" Text='<%#Eval("option1") %>' >
         </asp:Literal>
        </ItemTemplate>
         <EditItemTemplate>
             <asp:TextBox ID="TextBox11" Text='<%#Eval("option1") %>' runat="server" ></asp:TextBox>

        </EditItemTemplate>
        <FooterTemplate>

        <asp:TextBox ID="TextBox4"  runat="server" ></asp:TextBox>

        </FooterTemplate>

    </asp:TemplateField>
      <asp:TemplateField HeaderText="Disagree" Visible="true">
        <ItemTemplate>

         <asp:Literal ID="id4" runat="server" Text='<%#Eval("option2") %>' >
         </asp:Literal>
        </ItemTemplate>
         <EditItemTemplate>
             <asp:TextBox ID="TextBox5" Text='<%#Eval("option2") %>' runat="server" ></asp:TextBox>

        </EditItemTemplate>
        <FooterTemplate>

        <asp:TextBox ID="TextBox6"  runat="server" ></asp:TextBox>

        </FooterTemplate>

    </asp:TemplateField>

      <asp:TemplateField HeaderText="Strong Agree" Visible="true">

        <ItemTemplate>

         <asp:Literal ID="id3" runat="server" Text='<%#Eval("option3") %>' >
         </asp:Literal>
        </ItemTemplate>
         <EditItemTemplate>
             <asp:TextBox ID="TextBox7" Text='<%#Eval("option3") %>' runat="server" ></asp:TextBox>

        </EditItemTemplate>
        <FooterTemplate>

        <asp:TextBox ID="TextBox8"  runat="server" ></asp:TextBox>

        </FooterTemplate>
        </asp:TemplateField>
          <asp:TemplateField HeaderText="Strong Disagree" Visible="true">
        <ItemTemplate>

         <asp:Literal ID="id2" runat="server" Text='<%#Eval("option4") %>' >
         </asp:Literal>
        </ItemTemplate>
         <EditItemTemplate>
             <asp:TextBox ID="TextBox9" Text='<%#Eval("option4") %>' runat="server" ></asp:TextBox>

        </EditItemTemplate>
        <FooterTemplate>

        <asp:TextBox ID="TextBox10"  runat="server" ></asp:TextBox>

        </FooterTemplate>

    </asp:TemplateField> 
```

--%>

```
 <%--   <EditItemTemplate>
         <asp:Literal ID="id3" runat="server" Text='<%#Eval("option1") %>' >
            </asp:Literal>
       </EditItemTemplate>
    </asp:TemplateField>
     <asp:TemplateField HeaderText="disagree" Visible="true">
        <EditItemTemplate>
         <asp:Literal ID="id4" runat="server" Text='<%#Eval("option2") %>' >
            </asp:Literal>
        </EditItemTemplate>
    </asp:TemplateField>

     <asp:TemplateField HeaderText="strongagree" Visible="true">
        <EditItemTemplate>
         <asp:Literal ID="id5" runat="server" Text='<%#Eval("option3") %>' >
            </asp:Literal>
      </EditItemTemplate>
    </asp:TemplateField>

     <asp:TemplateField HeaderText="strongdisagree" Visible="true">
       <EditItemTemplate>
         <asp:Literal ID="id6" runat="server" Text='<%#Eval("option4") %>' >
            </asp:Literal>
       </EditItemTemplate>
    </asp:TemplateField>--%>

      <asp:TemplateField HeaderText="Action" Visible="true">

        <ItemTemplate>
            <asp:LinkButton ID="LinkButton5" Text="Edit" CommandName="edit" runat="server"></asp:LinkButton>
    </ItemTemplate>
    <EditItemTemplate>

       <asp:LinkButton ID="LinkButton1" Text="update" CommandName="update" runat="server"></asp:LinkButton>

       <asp:LinkButton ID="LinkButton3" Text="cancel" CommandName="cancel" runat="server"></asp:LinkButton>
    </EditItemTemplate>
    <FooterTemplate>

    <asp:LinkButton ID="LinkButton7" Text="DeleteAll"  CommandName="delete" runat="server"></asp:LinkButton>

    </FooterTemplate> 
```

```
 <asp:TemplateField HeaderText="" Visible="true">

        <ItemTemplate>

          <asp:LinkButton ID="LinkButton23" Text="delete" CommandName="delete" runat="server"></asp:LinkButton>

    </ItemTemplate>

    <FooterTemplate>
    <asp:Button ID="bdh" Text="insert " CommandName="insert" runat="server" />

    </FooterTemplate> 
```

```
</Columns>

            <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
            <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
            <SortedAscendingCellStyle BackColor="#FDF5AC" />
            <SortedAscendingHeaderStyle BackColor="#4D0000" />
            <SortedDescendingCellStyle BackColor="#FCF6C0" />
            <SortedDescendingHeaderStyle BackColor="#820000" />

        </asp:GridView> 
```

**后面的代码**

```
protected void RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
       string percentage = ((LiteralControl)e.Row.Cells[4].Controls[0]).Text;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:27:10.607

您应该尝试`LiteralControl`按照异常消息的建议强制转换为：

```
string percentage =   
    ((LiteralControl)e.Row.Cells[4].Controls[0]).Text; 
```

# capistrano - 使用 Capistrano 将应用程序部署到本地主机

> ID：10948793
> 
> 赞同：0
> 
> 时间：2012-06-08T12:23:26.080
> 
> 标签：capistrano

有人可以向我粘贴带有本地机器配置的“deploy.rb”文件吗？

每当我尝试使用时，`cap local deploy`我都会得到`onnection failed for: localhost (Errno::ECONNREFUSED: Connection refused - connect(2))`

配置：

```
set :branch, "master"
set :deploy_to, "path/#{application}"

set :domain, "localhost"
role :app, domain
role :web, domain
role :db, domain, :primary => true 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:30:45.367

Anwser 很简单... SSH 代理未启用。

# c# - 使用 jquery 从自动生成的选择中获取值

> ID：10948797
> 
> 赞同：0
> 
> 时间：2012-06-08T12:23:44.393
> 
> 标签：c#, jquery, json

我制作了一个数据树状列表，在这个树状列表中，我试图通过 JSON 发布到编辑操作来编辑存储在选择中的一些数据。为此，我需要使用 jquery 从这个选择中获取价值，我和一些大学尝试了一切，但我们无法让这个东西正常工作。

树列表是​​通过 foreach 生成的，当单击提交按钮时，将调用具有 ID 的函数，并且 jquery 应该获取选定的值。

```
function Edit_hpg(id) {
    var select = '#select1.1.' + id;
    select = $(select + "option:selected").each();
    $.getJSON('/PrijsCodeKoppeling/HoofdProductGroep', {
        id: (id),
        prijscode: $(select)
    }, function (data) {
    })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:50:50.997

您在 Ajax 调用中将 DOM 元素发送到服务器。

试试这个：

```
function Edit_hpg(id) {
    var select = '#select1.1.' + id;
    var selectedItems = new Array(); 
    $(select + " option:selected").each(function(index, elem){
          selectedItems.push($(elem).val());
    });
    $.getJSON('/PrijsCodeKoppeling/HoofdProductGroep', {
        id: (id),
        prijscode: selectedItems
    }, function (data) {
    })
} 
```

在服务器上，您将获得一个选定项目的数组。

# javascript - 动画没有用javascript绘制？

> ID：10948799
> 
> 赞同：0
> 
> 时间：2012-06-08T12:23:49.933
> 
> 标签：javascript, jquery

我知道 jQuery 中有一个 .animate() 函数，但是我想自己写一个！

我有这个脚本：

```
var ball = $("#ball");
var p = $("#ball").position();

for(;;){
    $("#ball").css("left", ++p.left);
    if ( p.left == 400 ){
        break;
    }
} 
```

使用这些元素：

```
#board { height:500px; width:500px; background-color: gray; position:relative;}
#ball{ height: 50px; width:50px; background-color: red; position:absolute;}

<div id="board">
    <div id="ball"></div>
</div> 
```

现在，当我打开浏览器时，我想看到的是小红框从左到右运行并停在 400 处。

但是，当我加载页面时，该框已为 400，因此它会跳过动画。

本质上，我需要浏览器来绘制左坐标的每个交互。

我如何强制浏览器重新绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:32:22.957

在 JS 执行完成之前，浏览器不会重绘页面。您需要使用`setTimeout()`（或[requestAnimationFrame()](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)）来绘制不同的帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:38:55.210

只需使用 setInterval 即可。

```
var ball = $("#ball");
var p = $("#ball").position();
var i = 1000;
for(;;){
    //setInterval(myFunction, i);
    setTimeout(myFunction, i);
    i+= 100;

    if ( i> 10000 ){
        break;
    }
}
function myFunction(){
    $("#ball").css("left", ++p.left);
} 
```

这是一段肮脏的代码，所以如果你想使用它，请优化它。

**更新**：我的意思是使用 setTimeout 而不是 setInterval

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:46:25.747

为您发布了一个示例，希望对您有所帮助。

[http://jsfiddle.net/ymutlu/J2cHn/1/](http://jsfiddle.net/ymutlu/J2cHn/1/)

```
var ball = $("#ball");
var p = $("#ball").position();

    //$("#ball").css("left", 10+p.left);

    function moveBallDest(){
       var p = $("#ball").position();
       $("#ball").css("left", 10+p.left);
        if ( p.left >= 400 ){
            return;
        }else{
            setTimeout(moveBallDest,1000);
        }
    }

    setTimeout(moveBallDest,1000); 
```

​</p>

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T12:40:25.100

尝试这个-

```
<style>
 #board { height:500px; width:500px; background-color: gray; position:relative;}
 #ball{ height: 50px; width:50px; background-color: red; position:absolute;}
</style>
<script>
 $(document).ready(function(){
   $("#ball").animate({left:"400px"},"slow");
 });
</script>
<div id="board">
  <div id="ball"></div>
</div> 
```

它会起作用的。

# c# - 无法从 ClickOnce 部署的程序中找到输出文件

> ID：10948801
> 
> 赞同：0
> 
> 时间：2012-06-08T12:23:56.063
> 
> 标签：c#, .net

我有一个基本上从数据库创建 CSV 文件的程序。下面是我使用的代码

```
public void ExportToCSV(string row, int rowNo)
{
  FileStream aFile;
  try
  {
    if (rowNo == 0)
      aFile = new FileStream(@"..\..\Check.txt", FileMode.Create);
    else
      aFile = new FileStream(@"..\..\Check.txt", FileMode.Append);

    StreamWriter sw = new StreamWriter(aFile);
    sw.WriteLine(row);
    sw.Close();
  }
  catch (IOException ex)
  {
    MessageBox.Show("An IO exception has been thrown!");
    MessageBox.Show(ex.ToString());
  }

} 
```

如果我从 VS2010 运行代码，它就可以正常工作。CSV 文件在程序文件夹下创建。现在我希望能够将此程序安装到其他 PC，所以我使用 ClickOnce。现在有了 ClickOnce，我不明白的是，我的程序似乎没有自己的文件夹，而只是我的开始菜单上的一个快捷方式，但程序运行正常。令人困惑的是我找不到输出文件的位置。在其中一个 XP 站中，我能够使用搜索找到它，但它位于某个随机文件夹中，但我在 Windows 7 中找不到它。谁能给我一个建议，我做错了什么？或者我如何更改程序以便轻松部署但我仍然可以找到文件的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:31:00.397

处理此问题的最佳方法是在 app.config 中预先配置路径。[此路径可能位于Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)枚举
中描述的众所周知的文件夹中

在运行时，您可以通过这种方式获得文件夹的完整路径

```
string myFolderName = Properties.Settings.Default.OutputFolder;
string documentsFolder = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
string finalPath = Path.Combine(documentsFolder, myFolderName);

if (rowNo == 0) 
   aFile = new FileStream(Path.Combine(finalPath, "Check.txt", FileMode.Create); 
else 
   aFile = new FileStream(Path.Combine(finalPath, "Check.txt", , FileMode.Append); 
```

[有关使用设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=VS.80%29.aspx)的参考资料，请参见此处

# php - PHP 替换标签中的链接，如 [LINK]

> ID：10948803
> 
> 赞同：0
> 
> 时间：2012-06-08T12:24:01.600
> 
> 标签：php, regex

在 PHP 中，我想这样做，如果用户键入：

`[LINK] url [/LINK]`

它将用锚标签替换它：

`<a href=url>url</a>`

我将如何展示这个？我不确定如何将其翻译成正则表达式...

我尝试了以下方法：

`[LINK][a-zA-Z0-9_-.]+[/LINK]`

但显然这是不对的:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:28:14.813

```
$str = '[LINK]http://google.com[/LINK]';
$str = preg_replace('/\[link\]([^\[\]]+)\[\/link\]/i', '<a href="$1">$1</a>', $str);

echo $str; // <a href="http://google.com">http://google.com</a> 
```

解释：

```
\[link\]    Match "[LINK]"
([^\[\]]+)  Match any character except "[" and "]"
\[\/link\]  Match "[/LINK]"
i           Make it case-insensitive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:45:01.150

捕获链接，但总是需要前导**http://**或**https://**否则 url 将是*example.com/google.com*你也应该使用[preg_replace_callback()](http://php.net/manual/en/function.preg-replace-callback.php)作为 xss 未经处理的输入。

**这里有些例子：**

```
<?php
//The callback function to pass matches as to protect from xss.
function xss_protect($value){
    if(isset($value[2])){
        return '<a rel="nofollow" href="'.htmlentities($value[1]).'">'.htmlentities($value[2]).'</a>';
    }else{
        return '<a rel="nofollow" href="'.htmlentities($value[1]).'">'.htmlentities($value[1]).'</a>';
    }
}

$link ='[LINK]http://google.com[/LINK]';
$link = preg_replace_callback("/\[LINK\](.*)\[\/LINK\]/Usi", "xss_protect", $link);
echo $link;
?>
<a rel="nofollow" href="http://google.com">google.com</a> 
```

或者从链接中剥离 http:// 和 https:// ，然后在输出时附加它。

```
<?php
$link ='[LINK]google.com[/LINK]';
$link = preg_replace_callback("/\[LINK\](.*)\[\/LINK\]/Usi", "xss_protect", str_replace(array('http://','https://'),'',$link));
echo $link;
?>
<a rel="nofollow" href="http://google.com">google.com</a> 
```

或者另一种方式有BB码链接，然后你可以从链接地址指定链接名称，回调函数可以处理多种类型的输出。

```
<?php
$link ='[LINK=google.com]Google[/LINK]';
$link = preg_replace("/\[LINK=(.*)\](.*)\[\/LINK\]/Usi", "xss_protect", str_replace(array('http://','https://'),'',$link));
echo $link;
?>
<a rel="nofollow" href="http://google.com">Google</a> 
```

# ios - NSOperationQueue 串行 FIFO 队列

> ID：10948804
> 
> 赞同：16
> 
> 时间：2012-06-08T12:24:06.287
> 
> 标签：ios, objective-c, nsoperationqueue, fifo, serial-processing

是否可以通过将`NSoperationQueue`对象设置为 1 将其用作串行 FIFO 队列`maxConcurrentOperationCount`？

我注意到[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)状态...

> 对于最大并发操作数设置为 1 的队列，这等同于串行队列。但是，您永远不应该依赖操作对象的串行执行。

这是否意味着无法保证 FIFO 执行？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-08T12:30:12.183

在大多数情况下，它将是 FIFO。但是，您可以设置 NSOperations 之间的依赖关系，以便提前提交的操作将让其他操作在队列中通过它，直到满足其依赖关系。

这种依赖管理是文档指出不能保证 FIFO 的原因。但是，如果您不使用依赖项，那么依赖它应该没问题。

**更新**： NSOperation 也有一个`queuePriority`属性，它也可以导致操作以非 FIFO 顺序执行。没有挂起依赖项的最高优先级操作将始终首先执行。

NSOperation 子类也可能会覆盖`-isReady`，这可能会导致它移回队列中。

因此，您的队列上的执行保证是*串行*的，因为在此队列中一次不会运行一个以上的操作。但苹果不能保证先进先出；这取决于你对你投入的操作所做的事情。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-21T18:01:58.523

队列不是文档中提到的 FIFO。如果您确保任何新操作都依赖于添加到队列中的最后一个操作并且一次只能运行一个操作，则可以使其严格 FIFO。Omar 解决方案是正确的，但更一般地说，您可以执行以下操作：

```
NSOperationQueue* queue = [[ NSOperationQueue alloc ] init];
queue.maxConcurrentOperationCount = 1;

NSOperation* someOperation = [ NSBlockOperation blockOperationWithBlock:^(void) { NSLog(@"Done.");} ];

if ( queue.operations.count != 0 )
    [ someOperation addDependency: queue.operations.lastObject ]; 
```

这是有效的，因为 queue.operations 是一个数组：无论你添加什么都不会重新排序（例如，它不是 NSSet）。您也可以简单地向您的 NSOperationQueue 添加一个类别：

```
@interface NSOperationQueue (FIFOQueue)
- (void) addOperationAfterLast:(NSOperation *)op;
@end

@implementation NSOperationQueue (FIFOQueue)

- (void) addOperationAfterLast:(NSOperation *)op
{
    if ( self.maxConcurrentOperationCount != 1)
        self.maxConcurrentOperationCount = 1;

    NSOperation* lastOp = self.operations.lastObject;
    if ( lastOp != nil )
        [ op addDependency: lastOp ];

    [ self addOperation:op];
}

@end 
```

并使用 [queue addOperationAfterLast:myOperation]。queuePriority 与 FIFO 无关，它与作业调度有关。

编辑：在下面的评论之后，如果检查计数也不够，则暂停队列。我相信这种形式很好（经过测试，这不会产生竞争条件并且不会崩溃）。

一些信息：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/#//apple_ref/occ/instp/NSOperationQueue/suspended](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/#//apple_ref/occ/instp/NSOperationQueue/suspended)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-08T12:31:43.277

使用 nsInvocationopration 创建一个简单的 FIFO 您需要将一个操作设置为依赖于另一个操作使用 addDependency: 方法

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
NSInvocationOperation *oper1 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(doSth:) object:@"1"];

NSInvocationOperation *oper2 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(doSth:) object:@"2"];
NSInvocationOperation *oper3 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(doSth:) object:@"3"];

[oper2 addDependency:oper1];
[oper3 addDependency:oper2];
//oper3 depends on oper2 wich depends on oper1
//order of execution will ber oper1->oper2->oper3

//Changing the oreder will not change the result
[queue addOperation:oper2];
[queue addOperation:oper3];
[queue addOperation:oper1];

- (void) doSth:(NSString*)str
{
    NSLog(str); //log will be 1 2 3
    //When you remove the addDependency calls, the logging result that i got where
    //different between consecutive runs i got the following
    //NSLog(str); //log will be 2 1 3
    //NSLog(str); //log will be 3 1 2
} 
```

**注意**：如果您正在使用，`NSInvocationOperation`则将其设置`maxConcurrentOperationCount`为 1 很可能对您有用，因为您无法编辑 isReady

但是`maxConcurrentOperationCount`，如果您打算创建自己的子类， = 1 将不是一个好的解决方案`NSOperation`

由于在 NSOperation 派生类中，您可以覆盖该`isReady`函数并返回 no，（想象一些需要等待来自服务器的一些数据才能正常运行的操作）在这些情况下，您将返回`isReady no`，直到您真正准备好在这些情况下，您将需要`dependencies`在`operations`队列内部添加

从苹果文档来看**，这相当于一个串行队列。但是，您永远不应该依赖操作对象的串行执行。操作准备情况的变化可能会改变生成的执行顺序**

# iphone - 将部署 iOS 从 5.0 更改为 4.0 - 现在无法在我的 iPhone 上运行，但可以在模拟器上运行

> ID：10948808
> 
> 赞同：1
> 
> 时间：2012-06-08T12:24:41.770
> 
> 标签：iphone, objective-c, ios, build, xcode4.2

我有一个应用程序已完成并在设置为在 iOS 5.0 上部署时工作。从那以后，我不得不更改部署设置以使其支持到 iOS 4.0。代码方面的一切都很好 - 我只需要更改一些仅适用于 5.0 的 UIActivityIndi​​catorView 内容。它将在模拟器上编译并运行良好 - 4.3 和 5.0。但它将不再在我的本地设备上运行，即带有 iOS 5.0 的 iPhone 4。我收到有关建设的消息：

错误：没有指定名称或路径的SDK /（我的项目的路径）/多个

我尝试更改构建架构，以便支持 armv6 和 armv7。我不确定我还做错了什么。基础 SDK 设置为 5.0；部署设置为 4.0。任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:14:16.030

基本 SDK 应始终设置为“最新 iOS”。您可能只有导致问题的设备 SDK 5.1。

# java - 程序有问题。如何纠正它？

> ID：10948812
> 
> 赞同：-2
> 
> 时间：2012-06-08T12:25:07.600
> 
> 标签：java, swing, jfreechart, actionlistener, jfilechooser

下面的程序用于从文本文件中输入整数并绘制 XY 图。我使用 JFileChooser 来选择文件。我正在尝试获取文件的完整路径。我为按钮创建了一个 ActionListener 方法。当我运行它时，我收到以下消息：

```
Exception in thread "main" java.lang.NullPointerException
at java.io.File.<init>(Unknown Source)
at pia.main(pia.java:34) 
```

```
import java.awt.event.ActionEvent;
import java.awt.event.*;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JPanel;
import org.jfree.chart.*;
import org.jfree.chart.plot.*;
import org.jfree.data.xy.*;

public class Pio {

    public static void main(String[] args) throws IOException {
        JButton but = new JButton("Open file");
        String URL = null;
        but.addActionListener(new ActionListerner()                         

    {

            public void actionPerformed(ActionEvent e) {

           JFileChooser chooser = new JFileChooser();

            int ret = chooser.showDialog(null, "Open file");

            if (ret == JFileChooser.APPROVE_OPTION) {

              File file = chooser.getSelectedFile();

             String URL = file.getPath();

          }

     });

        File f = new File(URL);
        FileReader inputF = new FileReader(f);
        BufferedReader in = new BufferedReader(inputF);

        int[] a = new int[100];
        int[] b = new int[100];
        String s = in.readLine();

        int i = 0;

        while (s != null && i < 100) { // your arrays can only hold 1000 ints
            String pair[] = s.split(" ");

            a[i] = Integer.parseInt(pair[0]);
            b[i] = Integer.parseInt(pair[1]);
            i++; // don't forget to increment

            s = in.readLine();
        }

        in.close();
        System.out.println("the output of the file is " + f);

        XYSeries data = new XYSeries("Line Graph");
        int n = a.length;

        for (int j = 0; j < n; j++) {
            data.add(a[j], b[j]);
        }

        XYDataset xY = new XYSeriesCollection(data);
        JFreeChart chart = ChartFactory.createXYLineChart("line graph", "Cycles", "Temperature", xY, PlotOrientation.VERTICAL, true, true, true);
        ChartFrame frame = new ChartFrame("Example", chart);

        JPanel panel = new JPanel();
        panel.add(but);
        frame.add(panel);
        frame.setSize(1000, 500);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:31:26.473

定义一个类字段，以便范围将跨越整个类，例如：

```
private String filePath;

// ...

public void actionPerformed(ActionEvent e)
{
    JFileChooser chooser=new JFileChooser();
    int ret = chooser.showDialog(null, "Open file");
    if(ret == JFileChooser.APPROVE_OPTION)
    {
        File file = chooser.getSelectedFile();
        filePath = file.getPath();
    }
} 
```

现在，您可以像这样使用它：

```
if(filePath != null) System.out.println("The file path: " + filePath);
else System.out.println("The file path is not set yet!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:29:49.807

您需要`String URL`在`ActionListener`.

# haskell - 在 Yesod 中不显示表单标签的标准方法？

> ID：10948813
> 
> 赞同：4
> 
> 时间：2012-06-08T12:25:08.870
> 
> 标签：haskell, yesod

有没有一种标准方法可以在 Yesod 表单中没有字段标签？我的表格清楚地表明了该领域的内容，我不需要标签。到目前为止，我已经通过复制和修改 renderDivs 编写了自己的代码：

```
renderDivsNoLabel aform fragment = do
    (res, views') <- aFormToForm aform
    let views = views' []
    let widget = [whamlet|
\#{fragment}
$forall view <- views
    <div :fvRequired view:.required :not $ fvRequired view:.optional>
        $maybe tt <- fvTooltip view
            <div .tooltip>#{tt}
        ^{fvInput view}
        $maybe err <- fvErrors view
            <div .errors>#{err}
 |]
return (res, widget) 
```

有更简单的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T03:50:00.570

我认为“更简单的方法”是将您的渲染功能版本包含在 yesod-form 本身中。想要发送拉取请求？

# php - 为什么这个正则表达式不起作用？

> ID：10948816
> 
> 赞同：-4
> 
> 时间：2012-06-08T12:25:21.343
> 
> 标签：php, regex

我有这个正则表达式：

```
preg_match_all("/<\s*?img\s[^>]*?src=([\"']??)([^\"' >]*?)\1[^>]*?>/si", $content, $m); 
```

这个想法是在一段 HTML 中找到所有图像链接。鉴于此内容：

```
<p>
    <img alt="" src="/emailimg/interdigital_old.jpg" style="width: 377px; height: 245px; " />Some text here.</p><a href="site.html">test</a> 
```

执行正则表达式后，$m 是一个包含 3 个空数组的数组，但如果我用[这个站点](http://www.spaweditor.com/scripts/regex/index.php)测试它，结果是：

```
Array
(
    [0] => Array
        (
            [0] => <img alt="" src="/emailimg/interdigital_old.jpg" style="width: 377px; height: 245px; " />
        )

    [1] => Array
        (
            [0] => "
        )

    [2] => Array
        (
            [0] => /emailimg/interdigital_old.jpg
        )

) 
```

有什么问题？是配置问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:43:07.770

[DOM](http://php.net/manual/en/book.dom.php) / [XPath](http://www.php.net/manual/en/class.domxpath.php)（即正确）方式：

```
<?php

  $html = '
<p>
    <img alt="" src="/emailimg/interdigital_old.jpg" style="width: 377px; height: 245px; " />Some text here.</p><a href="site.html">test</a>
';

  $dom = new DOMDocument('1.0');
  $dom->loadHTML($html);

  $xpath = new DOMXPath($dom);

  $links = array();
  foreach ($xpath->query('//img/@src') as $img) $links[] = $img->value;
  print_r($links); 
```

[测试和工作](http://codepad.org/39i9fhhF)。

**编辑**

您的正则表达式不起作用的原因有两个：

1.  您已经使用双引号字符串声明了您的正则表达式。这通常会导致您意想不到且不完全明显的事情，因为双引号字符串会在传递给 PCRE*之前自行插入某些转义序列。*这在您的情况下导致的问题`\1`是被解释为八进制字符定义（如此[处](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)定义），因此您的表达式中有一个文字`0x01`（标题开头）字符，而不是`\1`您希望 PCRE 用作的字符串反向参考。

    我发现当我遇到这样的问题时，一个好的起点是简单`echo`地筛选表达式以查看 PHP 如何插入您在脚本中声明的字符串。[这里](http://codepad.org/S2oSb66r)是该特定问题的演示。

2.  `([\"']??)`- 第二个问号是打破它。我实际上不确定你想用这个来完成什么，它只是一个错误的类型吗？我很难弄清楚 PCRE 是如何解释这一点的，以及它究竟为什么会破坏它，但我只想说它确实如此，并且第二个问号需要去掉。FTR，它的作用是表达式仍然匹配`<img>`标签，但是下面的捕获组（你真正想要的数据）是空的。

现在让我们分解正则表达式，看看如何改进它：

*   `<\s*?img`- 这里的非贪婪`*`是没有意义的，因为`\s`只匹配空白，下一个序列将是 alpha，`<\s*img`就足够了。我实际上不确定 HTML 标记是否允许在开头`<`和标记名称之间有前导空格，但我想允许它不会有任何害处，因为适当的解析器可能会这样做。
*   `\s[^>]*?src=(["']??)`- 如前所述`??`，捕获组中的 正在破坏表达式，我不确定您首先要尝试使用它做什么。另外，我再次认为非贪婪`*`是没有意义的，因为标签将以 结尾`>`，如果我们最后还没有找到`src`它，那么它无论如何都不是匹配的。另外，如果我们在不应该出现但解析器可能允许的地方允许空格，我们可能应该在`=`. 我会将其重写为`\s[^>]*src\s*=\s*(["']?)`.
*   `([^"' >]*?)\1`- 假设您担心能够处理未引用的属性，这里没有抱怨。当然，如果您*确实*知道属性将始终被引用，您可以简单地使用并从前面我们确定使用的引用类型的捕获组中`([^\1]*?)\1`删除。`?`
*   `[^>]*?>`- 这里没有抱怨。
*   `/si`-修饰符没有意义，因为表达式中的任何地方`s`都没有s。`.`它没有任何害处，但也没有帮助，所以它是多余的。

因此，将所有这些放在一起，这就是我编写正则表达式的方式：

```
/<\s*img\s[^>]*src\s*=\s*(["']?)([^"' >]*?)\1[^>]*>/i 
```

...当转换为带有正确转义引号的 PHP 字符串声明时，如下所示：

```
$expr = '/<\s*img\s[^>]*src\s*=\s*(["\']?)([^"\' >]*?)\1[^>]*>/i'; 
```

...顺便说一句，[效果很好](http://codepad.viper-7.com/sHXY1u)。

现在，即使考虑到额外的代码，我仍然认为 DOM 方法更好，因为它可能会捕获我的 regex Skillz 忘记的边缘情况。虽然诚然 regex 似乎确实[有点快](http://codepad.viper-7.com/ZF4PXb)。

# sql - SQL 语句返回 4 年前 4 月 4 日

> ID：10948818
> 
> 赞同：2
> 
> 时间：2012-06-08T12:25:25.503
> 
> 标签：sql, sql-server-2008

我如何回到去年的 4 月 4 日（从今天开始），减去 4 年，然后返回那个日期？

我可以先检查今天的日期是在今年 4 月 4 日之前还是之后，然后从那里开始，但我很想看看解决这个问题的不同方法。

这将是更大的 select 语句的一部分，因此自包含的 SELECT 或函数将是最佳解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:42:38.423

我找不到任何更整洁的方法来做到这一点 - 我通常会依靠我尝试过的真实`DATEADD/DATEDIFF`配对来进行日期计算，但我想不出一种方法来考虑我们一年中的整洁程度 - 所以我们也得到一个`CASE`表达式：

```
select DATEADD(year,
DATEDIFF(year,'20010101',CURRENT_TIMESTAMP)
- CASE WHEN DATEPART(month,CURRENT_TIMESTAMP) IN (1,2,3) THEN 1
    WHEN DATEPART(month,CURRENT_TIMESTAMP) = 4 AND
        DATEPART(day,CURRENT_TIMESTAMP) < 4 THEN 1
    ELSE 0 END
,'19970404') 
```

用于测试特定日期以检查边缘条件：

```
declare @dt datetime
set @dt = '20120403'
select DATEADD(year,
DATEDIFF(year,'20010101',@dt)
- CASE WHEN DATEPART(month,@dt) IN (1,2,3) THEN 1
    WHEN DATEPART(month,@dt) = 4 AND
        DATEPART(day,@dt) < 4 THEN 1
    ELSE 0 END
,'19970404') 
```

* * *

如果您只需要今年前四年的当年 4 月 4 日，那么

```
DATEADD(year, DATEDIFF(year, '20010101', @dt), '19970404') 
```

就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:43:10.953

我会使用类似的东西：

```
SELECT CASE
         WHEN SIGN(DATEDIFF(DAYOFYEAR, GETDATE(), STR(DATEPART(YY, GETDATE())) + '-04-04')) = 1
           THEN DATEADD(YY, -4, STR(DATEPART(YY, GETDATE()) - 1) + '-04-04')
         ELSE DATEADD(YY, -4, STR(DATEPART(YY, GETDATE())) + '-04-04')
       END; 
```

编辑：
这将检查 4 月 4 日和今天之间的差异是正数（'4/4 将在今年晚些时候'）还是零/负数（'4/4 是今天或今天之前'）并根据返回日期那张支票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:42:38.697

这样的事情怎么样

```
declare @date datetime = getdate()

select dateadd(day, 3, dateadd(month, 3, dateadd(year, datediff(year, 0, @date)-4, 0))) 
```

# ios - Azure、AWS、同步服务、数据库和 iOS

> ID：10948819
> 
> 赞同：4
> 
> 时间：2012-06-08T12:25:32.540
> 
> 标签：ios, google-app-engine, azure, amazon-web-services, sync

我正在开始开发一个新的 iPhone 应用程序，该应用程序将要求该应用程序将其数据模型与 Web 应用程序同步。这是我第一次尝试这样的任务。

内部数据模型相当简单——少数实体具有一对多映射。

我一直在寻找处理服务器端的各种选项，但是我对 Windows Azure 和同步服务框架的调查让我抓狂。我希望有人可以帮助我解决问题。

1) 是否可以创建一个可扩展的 Web 应用程序，托管在 Windows Azure 上，集成 Microsoft 的同步服务？我对 Azure 可以提供的服务与您必须在自己的服务器上安装的服务感到困惑。谁能指出我正确的页面？目前我能找到的唯一同步服务需要我在 Windows 机器上安装同步服务，所以我很困惑。

2) 是否有 iOS SDK + 示例可以让我在 Azure 上设置 Web 服务并同步基本数据库（Core Data、SQLite 或其他）。

3) 假设上述情况是可能的，那么我需要做些什么来托管一个可以访问这些数据的 Web 应用程序。

最后，AWS 是否提供类似的服务。我发现了 SimpleDB 产品和示例 iOS 应用程序，但 SimpleDB 的未来看起来很模糊，我不想围绕它开发我的应用程序。

我还查看了 Google App Engine，但找不到任何同步框架来提供起点。作为一名独立开发者，我无法投入大量时间来扮演自己的角色。

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:44:04.017

我最近使用 Windows Azure 和多平台客户端实现了一个同步系统：

*   客户端是 WP7、iOS 和 Android
*   数据存储在[Windows Azure 表存储中](http://msdn.microsoft.com/en-us/library/windowsazure/dd179423.aspx)
*   使用[ASP.NET Web API](http://www.asp.net/web-api)，我们公开了一个用于同步的通用 API（上传和下载更改、请求完全重置、身份验证……）
*   所有客户端都使用 SQLite 进行本地持久性并使用 JSON 与 ASP.NET Web API 交互

我们决定不使用 Sync 框架，因为它似乎限制了我们同步系统的灵活性。因为我们支持数以百万计的设备，所以我们决定使用表存储的强大功能（例如每个用户的分区）进行自定义同步实现。

无论如何，随着 SDK 的新更新，创建 API（无论是使用 .NET 还是任何其他语言）并以可靠的执行方式（无论是表存储、MongoDB ......）保存您的数据都将变得很容易.

要回答你的第二个问题，我不知道是否有一个完整的例子可以做到这一点，但这可能会让你开始：

1.  iOS 上的 SQLite：[http ://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_4_iPhone_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_4_iPhone_Application)
2.  iOS 中的 JSON：http: [//stig.github.com/json-framework/](http://stig.github.com/json-framework/)
3.  ASP.NET Web API 和 iOS：[http ://www.youtube.com/watch?v=_m9kEI3s3-k](http://www.youtube.com/watch?v=_m9kEI3s3-k)
4.  表存储教程：[https ://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)

要托管所有这些，您需要订阅 Windows Azure：

*   您可以从一个简单的网站（目前免费）开始托管您的 API：[https](https://www.windowsazure.com/en-us/home/scenarios/web-sites/) ://www.windowsazure.com/en-us/home/scenarios/web-sites/ （一旦您的服务变得流行，您将需要升级到 Web/Worker 角色）。
*   一个[存储帐户](http://msdn.microsoft.com/en-us/library/windowsazure/gg433066.aspx)（您只需为使用的内容付费，尝试试用，为您提供 90 天的有限免费存储空间）。

如果您决定使用非 ASP.NET Web API 实现，您甚至可以在 Mac 上完成所有操作，这要归功于新功能：http: [//blogs.msdn.com/b/interoperability/archive/2012/06/07 /windows-azure-command-line-tool-for-mac-and-linux.aspx](http://blogs.msdn.com/b/interoperability/archive/2012/06/07/windows-azure-command-line-tool-for-mac-and-linux.aspx)

# ruby-on-rails - Rspec 和 Factory Girl 的 Rails 问题

> ID：10948821
> 
> 赞同：2
> 
> 时间：2012-06-08T12:25:42.530
> 
> 标签：ruby-on-rails, rspec, factory-bot

我正在尝试使用 Rails。这是我的第一个 Rails 应用程序，我正在对我们未来项目的评估过程中对其进行测试。我一直关注 railstutorial.org 到第 9 章，然后尝试自己继续。

使用 Rails 3.2.3、Ruby 1.9.3、Factory Girl 1.4.0 和 rspec 2.10.0。

我遇到的麻烦是客户--[has_many]-->用户关系。

运行测试时我无法通过的错误：

```
1) User 
     Failure/Error: let(:client) { FactoryGirl.create(:client) }
     NoMethodError:
       undefined method `user' for #<Client:0x000000045cbfa8> 
```

规格/工厂.rb

```
FactoryGirl.define do
  factory :client do
    sequence(:company_name)  { |n| "Company #{n}" }
    sequence(:address) { |n| "#{n} Example Street"}   
    phone "0-123-456-7890"
  end

  factory :user do
    sequence(:name)  { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"}   
    password "foobar"
    password_confirmation "foobar"
    client

    factory :admin do
      admin true
    end
  end 
```

规格/模型/user_spec.rb

```
require 'spec_helper'

describe User do

  let(:client) { FactoryGirl.create(:client) }
  before { @user = client.users.build(name: "Example User", 
                        email: "user@example.com", 
                        password: "foobar", 
                        password_confirmation: "foobar") }

  subject { @user }

  it { should respond_to(:name) }
end 
```

应用程序/控制器/clients_controller.rb

```
class ClientsController < ApplicationController
  def show
    @client = Client.find(params[:id])
  end

  def new
    @client = Client.new
    @client.users.build # Initializes an empty user to be used on new form
  end

  def create
    @client = Client.new(params[:client])
    if @client.save
      flash[:success] = "Welcome!"
      redirect_to @client
    else
      render 'new'
    end
  end
end 
```

应用程序/控制器/users_controller.rb

```
class UsersController < ApplicationController
  .
  .
  .

  def new
     @user = User.new
  end

  .
  .
  .
end 
```

应用程序/模型/user.rb

```
class User < ActiveRecord::Base
  belongs_to :client

  .
  .
  .
end 
```

应用程序/模型/client.rb

```
class Client < ActiveRecord::Base 
  has_many :users, dependent: :destroy
  .
  .
  .

end 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:51:35.597

在您调用的 user_spec 中`client.users`，但它出现在其他地方，客户端属于用户（单数）。如果是这样，请尝试以下操作：

```
FactoryGirl.define do
  factory :client do
    ...
    association :user
  end
end

describe User do
   let(:user) { FactoryGirl( ... ) }
   let(:client) { FactoryGirl(:client, :user => user) }
   subject { user }
   it { should respond_to(:name) }
end 
```

# batch-file - echo 与管道一起使用时会增加空间

> ID：10948824
> 
> 赞同：9
> 
> 时间：2012-06-08T12:25:48.153
> 
> 标签：batch-file

在回答[这个](https://stackoverflow.com/questions/10943099/how-to-sort-the-arguments-dropped-to-a-batch-file/10943824#10943824)问题时，我发现了一些我无法解释的奇怪行为

```
for /f "delims=" %a in ('(for /l %z in (1,1,10^) do @echo %z^)') do @echo %a0 
```

您将看到数字 10..100，现在只需添加管道，例如添加到`sort`或`more`，无论：

```
for /f "delims=" %a in ('(for /l %z in (1,1,10^) do @echo %z^)^|sort') do @echo %a0 
```

`%a`和之间会有空格`0`！看起来通过管道回显某些内容会添加尾随空格，可以很容易地看到：

```
>_tempfile echo no space here
>_tempfile echo and here's a space|more 
```

乃至

```
>_tempfile <nul set /p =also a space|sort 
```

（可能使用 echo 打印提示）

当没有输出重定向（无论是文件还是命令）时，这不会发生。这是一个错误还是我错过了什么？我如何摆脱空间？（除了用 剥离最后一个字符的肮脏技巧`var:~0,-1`）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T14:36:44.387

优秀而有趣的问题（+1）

该空间是由 CMD 解析器的管道机制引入的，而不是由 SORT 引入的。

当您使用 FOR /F 执行命令时，该命令将在其自己的 CMD shell 中执行。此外，管道的每一侧都在其自己的 CMD shell 中执行。请参阅[为什么在管道代码块中延迟扩展失败？](https://stackoverflow.com/q/8192318/1012053)了解更多信息。

因此，您的命令实际上实例化了 3 个 CMD 外壳，一个用于 FOR /F 命令，而后者又为管道的每一侧创建 2 个。

您可以使用 %CMDCMDLINE% 动态变量查看命令是如何被解析并输入到 CMD shell 中的。因为我们是从命令行执行命令，所以我们需要对变量名中的至少一个字符进行两次转义，以便在到达最里面的 CMD shell 之前它不会被扩展。

这是带有结果的命令（前导`>`是我的命令提示符）：

```
>for /f "delims=" %a in ('(echo %^^^cmdcmdline%^&for /l %z in (1,1,10^) do @echo %z^)^|sort') do @echo %a0
1 0
10 0
2 0
3 0
4 0
5 0
6 0
7 0
8 0
9 0
C:\Windows\system32\cmd.exe  /S /D /c" ( echo %cmdcmdline% & FOR /L %z in (1 1 10) do @ echo %z )" 0 
```

输出的最后一行是用于管道左侧的命令行。您可以看到解析器如何在许多地方添加空格。

您可以通过使用简单的批处理脚本来回显值而不是 ECHO 命令来规避该问题。

**echoArgs.bat**

```
@echo(%* 
```

现在，当您运行此命令时，您将获得所需的结果

```
>for /f "delims=" %a in ('(for /l %z in (1,1,10^) do @echoArgs %z^)^|sort') do @echo %a0
10
100
20
30
40
50
60
70
80
90 
```

另一种规避该问题的方法是使用 ECHO 命令创建一个变量并适当地转义该变量的扩展。

```
>set cmd=@(echo %z)

>for /f "delims=" %a in ('(for /l %z in (1,1,10^) do %^^^cmd%^)^|sort') do @echo %a0
10
100
20
30
40
50
60
70
80
90 
```

* * *

***编辑***

这个`>_tempfile echo and here's a space|more`例子也很有趣。输出文件末尾有一个额外的空间。但是 Chad Nouis 是正确的，因为左侧的重定向，什么都没有被排序。任何命令都可以在右侧使用，结果是一样的。

问题的根源仍然是解析器，但是解析器重组命令的方式很有趣。

```
>>_tempfile echo %^cmdcmdline%|rem

>type _tempfile
C:\Windows\system32\cmd.exe  /S /D /c" echo %cmdcmdline% 1>_tempfile" 
```

注意重定向是如何从命令的开头移动到结尾的，并且`1`显式添加了文件句柄。您当然可以看到额外空间的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:23:26.063

重定向运算符适用于它们最接近的命令，而不是整行。

在您的三个测试用例中，您将`echo`and`set`命令的标准输出重定向到一个文件。通过重定向标准输出，没有任何东西可以通过管道传输到`more`or `sort`。

在您的嵌套 for 循环示例中，我认为有一些不需要的括号会引起头痛。试试这个：

```
for /f "delims=" %a in ('for /l %z in (1,1,10^) do @echo %z^|sort') do @echo %a0 
```

# perl - perl libSqliteIcu.so 整理 icu

> ID：10948825
> 
> 赞同：0
> 
> 时间：2012-06-08T12:25:50.150
> 
> 标签：perl, sqlite, icu, collate

libSqliteIcu在**sqlite3 终端****中**工作正常：

 **```
sqlite3
...
.load './libSqliteIcu.so'
SELECT icu_load_collation('pl_PL', 'POLISH');
SELECT DISTINCT miasto FROM tab ORDER BY miasto COLLATE POLISH; 
```

如何将上面的序列编码到**perl**中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:03:01.147

未经测试：

```
use DBI qw();
my $dbh = DBI->connect('DBI:SQLite:thedatabase.sqlite');
$dbh->sqlite_enable_load_extension(1);
$dbh->do(q{SELECT load_extension('./libSqliteIcu.so')});
$dbh->do(q{SELECT icu_load_collation('pl_PL', 'POLISH')};
my $miasto = $dbh->selectall_arrayref(q{SELECT DISTINCT miasto FROM tab ORDER BY miasto COLLATE POLISH}); 
```

* * *

* * *

或者，在 Perl 中排序：

```
use utf8;
my @tongue_twister = qw(Król Karol kupił królowej Karolinie korale koloru koralowego); 
```

* * *

```
use Unicode::ICU::Collator qw();    # ICU C library, fast
my $c = Unicode::ICU::Collator->new('pl_PL'); 
```

* * *

```
use Unicode::Collate qw();          # pure-perl, slow
my $c = Unicode::Collate->new(locale => 'pl_PL'); 
```

* * *

```
my @sorted = $c->sort(@tongue_twister);
# (
#     'Karol',
#     'Karolinie',
#     'koloru',
#     'korale',
#     'koralowego',
#     'Król',
#     'królowej',
#     'kupił'
# ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T20:31:00.997

一种简单*但不完美*的解决方案是使用`pl_PL.UTF8`语言环境。

在**sqlite3**我们准备：

```
create table A(idA);
...
insert into A values('ź');
insert into A values('Ż');
insert into A values('ź');
insert into A values('Š');
...
insert into A values('ś');
... 
```

现在：

```
select * from A; 
```

给出：**Z ź Ż ź z ś ż S Š z**。

所以我们加载：

```
.load './libSqliteIcu.so'
SELECT icu_load_collation('pl_PL', 'POLISH');
select idA from A order by idA collate POLISH; 
```

我们有：**S Š ś zz Z ź ź ż Ż**。

所以现在在**perl**中我们可以输入：

```
SELECT idA FROM A ORDER BY idA 
```

并得到*不正确的*顺序：**SZ zz ś Š ź ź Ż ż**

现在，使用**perllocale**我们输入**perl**：

```
SELECT idA FROM A ORDER BY idA COLLATE perllocale 
```

并得到*订单*：**S Š ś zz Z ź ź ż Ż**。

在我的情况下`$dbh->do(q{SELECT load_extension('./libSqliteIcu.so')});`不起作用；它会出错：

> DBD::SQLite::db do failed: 由于初始化期间活动语句错误，无法删除/修改用户函数**

# c# - 在编程中实现数学方程时遇到问题

> ID：10948829
> 
> 赞同：11
> 
> 时间：2012-06-08T12:26:16.203
> 
> 标签：c#, algorithm, math, integral

我正在为学校实施一种算法，但在理解编程中如何表示定积分时遇到了问题。例如，我知道求和方程可以实现为以下示例：
![在此处输入图像描述](../Images/35640ba585657e6756b5856dc1f991a3.png)

假设 y=f(x)

```
if(x==0){
    y=x+1;
}else{
    for(int i = 0; i < n; i++){
        y = y + (x - 1);
    }
} 
```

那么我将如何表示一个数值积分，例如：
![在此处输入图像描述](../Images/8dbd228d4eaf3ee2753bbb968b465023.png)
这里种植的方程可能没有数学意义，但我的目标是在 c# 中为我必须执行的学校编程项目实现类似的方程，在该项目中我必须实现包含的算法积分。我一直在读到有数值方法可以解决定积分，例如辛普森规则；我是否必须使用这样的方法来实现方程，或者积分可以在编程中表示，例如循环或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:53:16.357

数值积分的主题很大并且可能会变得非常复杂，所以我不会在这个答案中涵盖所有内容。

辛普森规则是一种对频谱的简单和近似（而不是复杂、准确或两者兼有）端进行数值积分的方法。开始研究该主题对您来说不是一个糟糕的选择，因为它非常易于理解和编程。我毫不怀疑你可以用你最喜欢的编程语言直接实现[Wikipedia 上提供的公式。](http://en.wikipedia.org/wiki/Simpson%27s_rule)

现在，将循环和辛普森规则联系在一起：随着积分限制（在您的示例中为 3 和 20）越来越接近，辛普森规则对积分真实值的近似精度得到提高。因此，您可以采取的一种方法是编写一个循环来计算从 3 到 4、从 4 到 5 的积分，然后将它们全部加起来。集成产生区域，将区域相加会产生（通常）另一个更大的区域。

对于数值积分领域的所有其他专家，是的，我知道还有其他方法，并且许多其他方法“更好”（在许多不同的意义上），而且我知道辛普森规则会遇到一些问题（很多) 功能，但它不是一个糟糕的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:55:33.087

这取决于你想要做什么。如果这是一个特定的实现，您可以简单地整合公式`x-1`，`(x^2)/2 - x`然后返回最大值减去最小值。

或者，它可以作为为 dx 选择适当步长的估计来实现。

```
decimal dx=0.1;

if(x==0){  
    y=x+1;  // could just return y=1
}else{  
    decimal tempY=0;
    for(decimal i = 3; i <= 20; i+=dx){  
        tempY += (i - 1);  
    }  
    // Either return tempY as decimal or
    y= Convert.ToInt32(tempY);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:49:32.463

也许我不明白，但你想知道如何计算积分吗？

如果是这样，有很多方法。有关简短介绍，请查看：[http ://en.wikipedia.org/wiki/Numerical_integration](http://en.wikipedia.org/wiki/Numerical_integration)

从您的示例中，您可以简单地执行以下操作：

```
int f(int x) {
    if(x == 0) {
       y = x + 1;
    }else{ 
      y = computeIntegral()
    }
    return y
} 
```

`computeIntegral()`为了计算积分，您必须编写的函数在哪里。

但是我认为您的函数 f(x) 存在问题，因为如果 x 不为零，则 f(x) 仅作为一个值。也许积分边界应该取决于 x ？

最后的评论。如果 x 是浮点数`x == 0`，则不建议使用，因为浮点数由于舍入截断而没有唯一的二进制表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:49:38.110

您不能简单地用循环来表示积分，因为积分是无限和。您必须使用近似方法或修改方程以删除积分符号。第二个方程中的积分应该很容易去除。

# symfony - ManyToMany，只保留关系的一部分

> ID：10948830
> 
> 赞同：0
> 
> 时间：2012-06-08T12:26:24.157
> 
> 标签：symfony, many-to-many

我面临一个恼人的问题。

我有一个实体用户和一个实体作业。我在它们之间有一个 ManyToMany 关系，但是 Table Jobs 已经被填满了。

我的用户拥有一系列作业，但是当我保留这个用户时，我不想保留这个作业。我只想保存链接。

你有想法吗 ？谢谢。

# validation - 验证期间 UIInput#getValue() 和 getLocalValue() 之间的区别

> ID：10948831
> 
> 赞同：8
> 
> 时间：2012-06-08T12:26:24.320
> 
> 标签：validation, jsf, jsf-2, lifecycle

我想对[组件](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)在执行多字段验证方面的区别`getValue()`和`getLocalValue()`方法有一个说明性的解释： [jsf validate two fields in one time](https://stackoverflow.com/questions/3478133/jsf-validate-two-fields-in-one-time)。[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)

如果字段已经过验证，使用此方法有什么区别？[`ValueHolder`API 文档](http://docs.oracle.com/javaee/6/api/javax/faces/component/ValueHolder.html)对回答这个问题不是很有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T13:57:49.920

如果`UIInput`组件已预先验证并标记为无效（即`isValid()`方法返回`false`），则`getLocalValue()`返回`null`，但`getValue()`返回旧模型值（如果有）。如果它被标记为有效，则两者都返回相同的值，即提交、转换和验证的值。

您想`isValid()`预先添加一个检查。[您可能会发现OmniFaces](http://omnifaces.org)多字段验证器的源代码示例很有帮助。请参阅展示页面[`ValidateMultipleFields`](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/component/validator/ValidateMultipleFields.java)底部的源代码链接。[`<o:validateEqual>`](http://showcase.omnifaces.org/validators/validateEqual)

### 也可以看看：

*   [JSF 不支持跨字段验证，有解决方法吗？](https://stackoverflow.com/questions/6282466/jsf2-0-doesnt-support-cross-field-validation-is-there-a-workaround)

# drupal-7 - 关联两个 Drupal 7 视图过滤器

> ID：10948838
> 
> 赞同：2
> 
> 时间：2012-06-08T12:27:02.050
> 
> 标签：drupal-7, views, drupal-exposed-filter

假设有两个 Drupal 7 视图暴露了过滤器，一个称为 People，另一个称为 City。如果我从 City 过滤器中选择一个城市，那么 People 过滤器中的人应该只包含居住在所选城市的人。

这在 SQL 中非常简单：

```
select * 
from People
left join City
on People.city_id = City.id
where City.id=xxx; 
```

如何在 Drupal 7 视图中使用暴露的过滤器来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:48:30.467

我认为[分层选择](http://drupal.org/project/hierarchical_select)可以解决问题。您可以指定字段依赖项。

# c# - c# externalinterface flash

> ID：10948841
> 
> 赞同：1
> 
> 时间：2012-06-08T12:27:33.390
> 
> 标签：c#, flash

有谁知道一种无需绘制就可以通过外部接口与 Flash swf 交互的方法吗？我想播放的闪光灯只与外部应用程序通信，不显示任何内容。

没有 Windows.Forms 有没有办法做到这一点？

谢谢佩德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T01:11:38.623

一种方法可能是在投影仪模式下启动您的 swf，并另外使用其他软件将其作为服务启动或只是使其不可见。这假设您的通信正常，但您不想看到窗口本身。

[https://superuser.com/questions/262163/how-to-run-a-program-invisibly](https://superuser.com/questions/262163/how-to-run-a-program-invisibly)

# authentication - FBAsyncInit 自动脚本加载

> ID：10948842
> 
> 赞同：0
> 
> 时间：2012-06-08T12:27:33.710
> 
> 标签：authentication, facebook-javascript-sdk

在某些文档中，FbAsyncInit 以：

```
(function() { 
    var e = document.createElement('script'); 
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js'; 
    e.async = true; 
    document.getElementById('fb-root').appendChild(e); 
 }()); 
```

而在其他一些文档中，它的结尾是这样的：

```
 (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
  } (document)); 
```

其中哪一个是正确使用的？还是它们可以互换？

还，

我注意到有时文档希望您添加 html 标头：

```
xmlns:fb="http://ogp.me/ns/fb#" 
```

在其他地方，他们将其称为：

```
xmlns:fb="http://www.facebook.com/2008/fbml" 
```

其中哪一项是正确的？
哪个更快？

似乎文档的不同页面是由不同的团队编写的......

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:03:01.070

> 其中哪一个是正确使用的？还是它们可以互换？

它们是可以互换的；只是做基本相同的事情的两种略有不同的方法。我更喜欢第二个版本——它的主要优点是它在脚本元素上设置了一个 id，因此如果函数碰巧在同一页面中放置两次，则不会加载它两次。

> 其中哪一项是正确的？

两者都是。HTML 元素上的命名空间是 XFBML 在旧版 IE 中工作所必需的——它实际上“指向”的地方并不重要。

> 哪个更快？

它们对“速度”没有任何影响，因为给出的 URL 只是命名空间的标识符，它实际上并没有被浏览器获取。如果你喜欢的话，你也可以把 http;//example.com/my-own-fancy-namespace 放在那里……</p>

# hadoop - Hadoop MapReduce：一行中的两个键，但是如何？

> ID：10948845
> 
> 赞同：0
> 
> 时间：2012-06-08T12:27:41.893
> 
> 标签：hadoop, mapreduce, aggregate, aggregation

我有包含用分号分隔的记录的 csv 文件。每行是一个记录。每条线都包含图的边缘信息。这意味着一行如下所示：

> 节点_X;节点_Y;5

它被解释为权重为 5 的节点 x 和 y 之间的边或链接。我的映射器得到这个输入。现在我想要实现的是使用节点聚合信息。

以下示例说明了我的场景：

> 节点_X;节点_Y;5
> 
> 节点_X;节点_Z;10
> 
> 节点_X;节点_A;60
> 
> 节点_Y;节点_A;20

那么节点的结果应该是：

> 节点_X;75; 节点_Y;25; 节点_A;80

我想收集所有不同的节点，并将它们与其他节点的权重之和作为权重。

在我的映射器中，我可以读取边缘信息：

> 节点_X;节点_A;60

但是我怎样才能从这条线上为我的减速器制作两个键呢？它应该是这样的

```
context.write(Node_X,60);

context.write(Node_A,60); 
```

我怎样才能做到这一点？

谢谢！

PS：边缘是无向的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:51:47.407

> 它应该是这样的
> 
> context.write(Node_X,60);
> 
> context.write(Node_A,60);

假设您在询问之前没有尝试过，那将起作用。

# algorithm - 后缀树和最长重复子串问题

> ID：10948847
> 
> 赞同：1
> 
> 时间：2012-06-08T12:28:10.077
> 
> 标签：algorithm, suffix-tree

当在字符串 ' `AEKEAAEKEAAEKEA$`' 上运行算法以寻找至少出现 3 次的最长子字符串时，后缀树中的所有节点最多有 2 个分支，这怎么可能？

正确的结果应该是子字符串 ' `AEKEA`'。

您可以在 [在线后缀树生成器中轻松查看树](http://www.allisons.org/ll/AlgDS/Tree/Suffix/)

我只是按照维基百科的描述：

> “找到至少出现k次的最长子串的问题，可以通过首先对树进行预处理来计算每个内部节点的叶子后代的数量，然后找到至少有k个后代的最深节点”

我在这里想念什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:05:31.867

我不认为那个网站是正确的。当我通过[后缀树](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/SuffixTree.java)运行 'AEKEAEKEAAEKEA' 时，我得到以下树。

```
└── (0)
    ├── (27) $
    ├── (6) A
    │   ├── (26) $
    │   ├── (16) AEKEA
    │   │   ├── (17) $
    │   │   └── (7) AEKEA$
    │   └── (18) EKEA
    │       ├── (19) $
    │       └── (8) AEKEA
    │           ├── (9) $
    │           └── (1) AEKEA$
    ├── (4) E
    │   ├── (24) A
    │   │   ├── (25) $
    │   │   └── (14) AEKEA
    │   │       ├── (15) $
    │   │       └── (5) AEKEA$
    │   └── (20) KEA
    │       ├── (21) $
    │       └── (10) AEKEA
    │           ├── (11) $
    │           └── (2) AEKEA$
    └── (22) KEA
        ├── (23) $
        └── (12) AEKEA
            ├── (13) $
            └── (3) AEKEA$ 
```

正如你从这个分支中看到的，你已经找到了最长的子串，出现了 3 次。

```
└── (0)
    ├── (27) $
    ├── (6) A
    │   ├── (26) $
    │   ├── (16) AEKEA
    │   │   ├── (17) $
    │   │   └── (7) AEKEA$
    │   └── (18) EKEA
    │       ├── (19) $
    │       └── (8) AEKEA
    │           ├── (9) $
    │           └── (1) AEKEA$ 
```

# bash - 带有来自命令的多行输出的 Bash for 循环

> ID：10948849
> 
> 赞同：2
> 
> 时间：2012-06-08T12:28:17.487
> 
> 标签：bash, for-loop, mysqldump, multiline

我必须为我们的数据库编写一个小的多线程 mysqldump 脚本，但由于一个包含空格的表，我遇到了一些问题。

我的第一次尝试很简单：

```
for TABLE in `mysql -u user -ppassword -e 'show tables;' dbname`  
do
    while [ 1 ]
    do
        if [ `jobs -r | wc -l` -lt $MAXTHREADS ]
        then
            break
        else
            sleep 1
        fi
    done

    mysqldump -u user -ppassword dbname $TABLE
done 
```

不幸的是，有一张桌子，里面有一个空格。我在谷歌上搜索了一下，使用 for 循环和命令的多行输出，更改 $IFS 变量是一个常见的解决方案。所以我把它改成了 \n\b（当我只使用 \n 时，不知何故 $IFS 是空的）但这是一个坏主意，因为它导致 mysql 命令不再工作。

我认为当我事先获取表格并在每次在 for 循环中使用 mysqldump 时将 $IFS 更改回来时，这应该不是问题。但我又错了，因为我现在只有一行所有表格。
我当前的代码：

```
TABLES=$(mysql -u user -ppassword -e "show tables" dbname | tail -n +2)

OIFS="$IFS"
AIFS=$(echo -en "\n\b")
IFS="$AIFS"

for TABLE in "$TABLES"
do
    IFS="$OIFS"
    while [ 1 ]
    do
        if [ `jobs -r | wc -l` -lt $MAXTHREADS ]
        then
            break
        else
            sleep 1
        fi
    done

    mysqldump -u user -ppassword dbname $TABLE
    IFS="$AIFS"

done
IFS="$OIFS" 
```

当我尝试回显 $TABLES 变量时，我每行得到一个表，但 for 循环只运行一次，其中 $TABLE 变量包含所有表。

在此先感
谢基罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T15:14:10.740

使用 while 循环代替 for：

```
mysql -u user -ppassword -e "show tables" dbname | tail -n +2 | while read TABLE
do
    ...
done 
```

...除非您需要在循环内设置任何变量并在循环退出后使它们可用。由于这使得 while 循环成为管道的一部分，因此它在子 shell 中运行，并且变量等不会转移到主 shell。如果您需要循环在主 shell 中运行，您可以使用 bash 的进程替换功能而不是标准管道：

```
while read TABLE
do
    ...
done < <(mysql -u user -ppassword -e "show tables" dbname | tail -n +2) 
```

# c# - 如何检测显着峰？

> ID：10948853
> 
> 赞同：2
> 
> 时间：2012-06-08T12:28:21.090
> 
> 标签：c#, .net

我有一张带有**坐标点的表格 (X,Y-shown as a Chart-Series)**。现在我检查了如何检测峰值。对于每个**点 (P)**，我必须检查**(PY > P-1.Y && PY > P+1.Y) 是否**。如果是，那一定是峰。

但是，如果我只想获得整个图表中真正重要的峰值怎么办？我的猜测是，我需要某种**阈值**。这个阈值可能是什么，或者我应该如何改变峰值的条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:16:15.113

我想到的最简单的事情：

```
public bool IsPeak(Point prev, Point aPoint, Point next, float threshold)
    {
        return aPoint.Y - prev.Y > threshold && aPoint.Y - next.Y;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:33:51.423

阈值是距您检查的每个点的距离，以查看它是否低于当前点。在您的第一种情况下，您检查一个点，所以我们可以说您的阈值是 1。

# perl - Perl：如何拆分文件？

> ID：10948854
> 
> 赞同：3
> 
> 时间：2012-06-08T12:28:32.167
> 
> 标签：perl

我需要将文件拆分为不同的文件。

示例（原始文件）：

```
*****3123123*****RAW
text1
text2
*****2312354***RAW
text3 
```

期望的输出：

[文件1.txt]

```
*****3123123*****RAW    
text1
text2 
```

[文件2.txt]

```
*****312312354***RAW
text3 
```

我尝试使用拆分，但我总是在数组中添加一些额外的白色字符

```
open FILE, "<file";
@file= <FILE>;
close FILE;
@lines = split (/(RAW\n)/, "@file");
foreach $value (@lines) {
  if ($value =~ /[a-z]|[A-Z]|[1-9]/)  {
    print ("$value\n");
  }
} 
```

输出：

```
*****3123123*****RAW

 text1
 text2

*****312312354***RAW

 text3 
```

编辑：如果我使用 print ("$value") 而不是 print ("$value\n") 这是输出（注意值前的 1 个额外空格：

```
*****3123123*****RAW
 text1
 text2

 *****12354***RAW
 text3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:17:09.543

该程序从`RAW`行中提取十进制数并使用它来命名输出文件。它期望输入文件名作为命令行上的参数。

```
use strict;
use warnings;

@ARGV or die "Input file required as command-line parameter\n";

my $out;

while (<>) {
  if ( /(\d+)\*+RAW$/ ) {
    open $out, '>', "$1.out" or die $!;
    select $out;
  }
  print $_ if $out;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T13:08:00.893

使用 line-wise IO 可能会做得更好：

```
my $id = 0;
my $FILE = undef;

while (<>) {
    if (/RAW/) {
        close $FILE if defined $FILE;
        $id++;
        my $path = "File$id.txt";
        open $FILE, '>', $path or die "Could not open $path: $!";
    }
    print $FILE $_ if defined $FILE;
}
close $FILE if defined $FILE; 
```

复制并改编自我的一个脚本，该脚本将邮箱文件拆分为每封邮件一个文件。如果第一行不匹配，您将不得不调整脚本`/RAW/`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T13:22:20.450

```
use strictures;
use File::Slurp qw(read_file write_file);
my $raw = read_file('raw.txt', binmode => ':raw');
my $header = qr/^ (?= [*]+ [0-9]+ [*]+ RAW\n)/msx;
my @chunks = split $header, $raw;
# (
#     "*****3123123*****RAW\ntext1\ntext2\n",
#     "*****2312354***RAW\ntext3"
# )
for my $i (1..@chunks) {
    write_file("File$i.txt", {binmode => ':raw'}, $chunks[$i-1]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:14:44.073

这就是我想出的。我不禁觉得这是在重新发明轮子。

```
#!usr/bin/perl
my $fi, $fi2;
my $line;
my $i;
my @lines;
my @filenameparts;
my $filename = "file_1.txt";

open($fi, "< original.txt");
@lines = <$fi>;
open ($fi2, " > $filename");

foreach (@lines)
{
if (($i > 0) and $_ =~ /RAW/)
{
    @filenameparts = split("_", $filename);
    foreach (@filenameparts)
    {
        print "Woooo".$_;
    }
    @filenameparts[1] = substr(@filenameparts[1], 0, @filenameparts[1].length() - 5);
    @filenameparts[1] = ($filenameparts[1] + 1);
    $filename = @filenameparts[0]."_".@filenameparts[1].".txt";
    print $filename;
    close($fi2);
    open ($fi2, " > $filename");
    $i = 0;
    print $fi2 $_;

}
else
{
    print $fi2 $_;
}
$i++;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T13:30:24.527

如果您想保留您制作的代码，那么只需将您的行替换`print ("$value\n");`为`print ("$value");`您就可以了......

或者在`print`删除`\n`并`chomp($value);`保留输出之前`print ("$value\n");`。

# .net - 在什么情况下调试器的协议与被调试者不兼容

> ID：10948857
> 
> 赞同：5
> 
> 时间：2012-06-08T12:28:53.557
> 
> 标签：.net, winforms, visual-studio, debugging

在某些情况下，当我尝试在 C# 项目设置中的“调试”选项卡上设置“启动外部程序”并按 F5 时，我看到错误“调试器的协议与被调试对象不兼容”。在什么情况下会发生？

如果 dll 的代码在 vs2008 项目中，而应用程序代码在 vs2010 项目中，我可以通过“启动外部程序”选项调试运行应用程序的库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:07:07.760

.NET 版本 4 中更改了托管调试器接口。您无法使用 VS2008 调试器调试 .NET 4 程序。

请改用 VS2010 调试器。在针对早期 .NET 版本构建的 DLL 中设置断点不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T16:31:15.423

如果您在 VS2008 中调试 C++ DLL，您可以在您尝试调试的项目属性对话框中将 Debugger Type = "Native Only" 设置为调试首选项（当然，如果您尝试调试已加载的本地库由可执行文件）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-19T08:27:02.970

删除所有 *.user ， *.exe.config 文件，并搜索包含“supportedRuntime version="v4.0" 的文件并将它们也删除。

# python - 使用 Python 从单个请求中获取 html 和标头

> ID：10948861
> 
> 赞同：0
> 
> 时间：2012-06-08T12:29:15.357
> 
> 标签：python, urllib2, httpconnection

我正在研究使用 python 发出单个 http 请求以检索 html 和 http 标头信息的可能性，而不必进行 2 个单独的调用。

有谁知道有什么好的方法吗？

此外，发出这些请求的不同方法之间的性能差异是什么，例如 urllib2 和 httpconnection 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:05:30.433

只需使用`urllib2.urlopen()`. 可以通过调用`read()`返回对象的方法来检索 HTML，并且标题在`headers`属性中可用。

```
import urllib2
f = urllib2.urlopen('http://www.google.com')

>>> print f.headers
Date: Fri, 08 Jun 2012 12:57:25 GMT
Expires: -1
Cache-Control: private, max-age=0
Content-Type: text/html; charset=ISO-8859-1
Server: gws
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
Connection: close

>>> print f.read()
<!doctype html><html itemscope itemtype="http://schema.org/WebPage"><head><meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
... etc ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:32:40.103

如果您使用[HTTPResponse](http://docs.python.org/release/2.5.2/lib/httpresponse-objects.html)，您可以使用两个函数调用来获取标头和内容，但它不会两次访问服务器。

# c# - 在运行时更改数据集表适配器连接字符串

> ID：10948862
> 
> 赞同：1
> 
> 时间：2012-06-08T12:29:15.570
> 
> 标签：c#, asp.net, app-config

我想在运行时更改数据集表适配器连接字符串。现在我有一个代码来更改该连接字符串，但它只更改服务器名称而不更改数据库名称、用户名和密码。请帮我解决这个错误..

这是我的部分代码：

```
 Properties.Settings.Default["testConnectionString"] = String.Format("server={0};Port={1}; database={2};User Id={3};password={4}", "172.23.2.32", "3306", "hrm", "root", "test123"); 
```

上面的代码只改变了ip地址和插入数据库的数据。但是现在改变数据库名称意味着数据插入“hrm”数据库。请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:27:15.477

我对属性进行了实验，并且能够很好地更改**用户设置。**

## 设置文件

![在此处输入图像描述](../Images/4b5f79a6d0f3b088fecad031ed6e38a1.png)

请注意，这两个值之间的差异在 Scope 中。**用户设置可以**在运行时更改。**应用程序设置不能**在运行时更改。

## 代码

```
class Program
{
    static void Main(string[] args)
    {
        //Application Properties can not change. They are read only
        //Properties.Settings.Default.testConnectionStringApplication 
        //    = String.Format("server={0};Port={1}; database={2};User Id={3};password={4}", "172.23.2.32", "3306", "hrm", "root", "test123");

        //User Properties can change
        Properties.Settings.Default.testConnectionStringUser
            = String.Format("server={0};Port={1}; database={2};User Id={3};password={4}", "172.23.2.32", "3306", "hrm", "root", "test123");

        //Call Save to persist the settings. 
        Properties.Settings.Default.Save();

        Console.WriteLine(Properties.Settings.Default.testConnectionStringUser);
        Console.ReadLine(); 
    }
} 
```

## 输出

![在此处输入图像描述](../Images/80854b614d21bdffadc97cedc6e6e634.png)

## 来源

[如何：使用 C# 在运行时编写用户设置](http://msdn.microsoft.com/en-us/library/bb397755.aspx)

# javascript - 为什么由 setTimeout 拆分的工作负载仍然会冻结浏览器？

> ID：10948865
> 
> 赞同：1
> 
> 时间：2012-06-08T12:29:45.777
> 
> 标签：javascript, v8

[http://jsfiddle.net/Codemonkey/ye5qv/2/](http://jsfiddle.net/Codemonkey/ye5qv/2/)

我正在尝试使用 setInterval 编写大型工作负载以重复使用，以便浏览器可以在每次工作迭代之间呼吸。在上面的示例中，我在每个斐波那契计算间隔之间为浏览器提供 100 毫秒的休息时间，但是从`fib()`调用到回调调用的那一刻，浏览器仍然处于冻结状态。*注意：在我的示例中，fibo 函数在文档加载后一秒之前不会被调用，因此您可以清楚地看到它冻结了几秒钟*

究竟为什么这种方法不起作用，我怎样才能使它起作用？或者，还有哪些其他方法可以达到相同的目标结果？重申一下，使用 setInterval 拆分工作的目标是浏览器在此过程中***永远不应该冻结或停止。***

*我正在使用 chrome，我主要关心 V8 引擎，但与 x 浏览器兼容的解决方案是一个奖励*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:34:44.107

`setInterval`不幸的是，JavaScript`setTimeout`并不是真正的异步，所以一切仍将在单个线程中运行。这意味着当您的`setInterval`回调被调用时，它会在主线程中运行并阻止其他所有内容的执行。

这是 John Resig 的一篇很棒的文章，详细讨论了这一点：[JavaScript 计时器的工作原理](http://ejohn.org/blog/how-javascript-timers-work/)。

如果你想要真正的异步 JavaScript，你必须使用[Web Workers 之](https://developer.mozilla.org/En/Using_web_workers)类的东西。

* * *

正如其他人在这里指出的那样，在您的特定情况下，您实际上在这条线上有一个无限循环：

```
for(var i = start; i < i+workload; i++) 
```

这导致您的代码：

```
setTimeout(function() {
    processor(start + workload);
}, 100); 
```

永远不会被召唤。有关更多信息，请参阅[Guffa 的出色答案](https://stackoverflow.com/a/10949025/830125)。

不过，我的其余答案仍然适用 - 如果您尝试做的不仅仅是简单的操作并`.gif`同时为 a 设置动画，那么在不使用 Web Workers 之类的东西的情况下，您可能仍然会出现冻结或口吃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T12:40:03.570

`setTimeout`问题是您的代码永远不会到达它调用以将控制权交还给浏览器的地步。

改变这个：

```
for(var i = start; i < i+workload; i++) 
```

到：

```
for(var i = start; i < start+workload; i++) 
```

因为`workload`是正数，`i < i + workload`永远不会是假的，所以你有一个无限循环。

* * *

将控制权交还给浏览器时不必等待 100 毫秒，只需调用`setTimout`即可使浏览器处理事件，因此可以使用时间 0：

```
setTimeout(function() {
  processor(start + workload);
}, 0); 
```

演示：http: [//jsfiddle.net/Guffa/ye5qv/3/](http://jsfiddle.net/Guffa/ye5qv/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:39:42.680

我注意到在您的代码`setInterval`中实际上从未调用过，因为在这一行中

```
for(var i = start; i < i+workload; i++) 
```

条件始终为真，因为`i`它总是小于`i+workload`，所以它永远不会脱离循环。从循环内的函数返回的好事。

# asp.net-mvc - 实体框架代码首先使用用非本机类型定义的模型

> ID：10948869
> 
> 赞同：0
> 
> 时间：2012-06-08T12:29:57.273
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我有一个关于使用 MVC 的 EF Code First 的问题。目前我知道如何创建控制器并查看一个模型，该模型具有所有属性作为本机类型，例如（int、string 等）。

如果我有一个模型，它的一个属性是在我的项目的另一个模型中定义的类型怎么办？

就像是

```
public class Partido
    {
        public int ID { get; set; }
        public Seleccion Local { get; set; }
        public Seleccion Visitante { get; set; }
        public Resultado Marcador { get; set; }
    } 
```

其中`Seleccion`和`Resultado`在项目的同一模型命名空间中分别定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:12:03.887

用属性装饰`Seleccion`和`Resultado`分类。`ComplexType`例子：

```
public class Partido
{
    public int ID { get; set; }
    public Seleccion Local { get; set; }
    public Seleccion Visitante { get; set; }
    public Resultado Marcador { get; set; }
}

[ComplexType]
public class Seleccion {} 

[ComplexType]
public class Resultado {} 
```

实体框架将在“Partido”表中生成`Seleccion`与`Resultado`类属性相对应的适当列。

您可以在此处了解更多信息：[Code First Data Annotations](http://msdn.microsoft.com/en-us/data/gg193958.aspx)

# sql - 如何使用 XQuery 从 XML 中提取值列表到行中？

> ID：10948870
> 
> 赞同：2
> 
> 时间：2012-06-08T12:30:01.750
> 
> 标签：sql, sql-server-2008

我有一个 XQuery 如下

```
DECLARE @x XML
SELECT @x = '<PartnerEmails>
<Email>a@xxxx.com</Email>
<Email>b@xxxx.com</Email>
</PartnerEmails>'
SELECT @x.query('data(PartnerEmails/Email)').value('.','varchar(100)') AS Val 
```

**实际输出：**

```
Val
a@xxxx.com b@xxxx.com 
```

**预期产出**

```
a@xxxx.com
b@xxxx.com 
```

即在两个不同的行中。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:53:13.293

用这个：

```
SELECT 
    node.value('.','varchar(100)') AS Val
FROM
    @x.nodes('/PartnerEmails/Email') AS PE(Node) 
```

由于内部有多个节点`<PartnerEmails>`，因此您需要使用该`.nodes()`函数创建 XML 片段的“内联”表 - 该表中的每个“行”都包含一个`<Email>`节点，然后您可以在该节点上进行查询（并提取 XML 节点的内容） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:04:57.577

```
DECLARE @x XML
SELECT @x = '<PartnerEmails>
<Email>a@xxxx.com</Email>
<Email>b@xxxx.com</Email>
</PartnerEmails>'

SELECT   ColumnValue.value('.','varchar(1000)')  as Val            
FROM @x.nodes('/PartnerEmails/Email') as Table1(ColumnValue) 
```

# image-processing - 计算从一张图像到另一张图像的四边形变换

> ID：10948872
> 
> 赞同：0
> 
> 时间：2012-06-08T12:30:10.337
> 
> 标签：image-processing, opencv

假设我有 2 个图像，第一个是未应用变换的图像：（A1）[http://tinypic.com/r/qsunaw/6](http://tinypic.com/r/qsunaw/6) 第二个是应用了倾斜变换：（A2）[http://tinypic .com/r/90adk0/6](http://tinypic.com/r/90adk0/6)

是否有一种算法可以让我知道从第一张图像到第二张图像（反之亦然）所需的必要四边形转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:46:43.577

这是计算机视觉的经典“逆问题”。有很多算法，但选择正确的算法完全取决于您的应用程序，特别是适用于输入图像和预期结果的约束（如果有）。问题可能是不适定的（可能没有解决方案，如果有一些解决方案，它们可能是不稳定的，或者可能有无限的解决方案）。

对于您提供的文本倾斜图像的简单示例，我可能首先尝试使用简单的模板匹配。假设比例不变，并且相对于图像角之一并沿一个方向应用倾斜，则只有一个未知数（该方向上的倾斜量），并且您可能具有其值的上限和下限提前知道的。因此，您可以量化允许的间隔，然后进行详尽的搜索 - 可能需要多次通过（收紧解决方案的界限，在那里进行更精细的量化，迭代）。

对于一般（即自然）图像，以及更一般的允许转换，事情会很快变得复杂。假设您只对平面变换感兴趣（否则很可能由于遮挡而没有解决方案），最新的方法将尝试检测和匹配图像中的“兴趣点”，然后使用稳健的最小估计变换 -正方形。

如果您对计算机视觉的这个子领域感兴趣，可以学习 Hartley 和 Zisserman 的[圣经](http://www.robots.ox.ac.uk/~vgg/hzbook/hzbook1.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T16:04:07.140

如果您有 4 个对应点，则可以计算图像之间的 2D 单应性。关于该主题的信息没有尽头，例如[http://www.cs.utoronto.ca/~strider/vis-notes/tutHomography04.pdf](http://www.cs.utoronto.ca/~strider/vis-notes/tutHomography04.pdf)提供了如何计算转换矩阵的介绍和详细信息，您可以将其反转逆变换。

# search - Solr 分组：我可以更改缺失字段的行为吗？

> ID：10948876
> 
> 赞同：0
> 
> 时间：2012-06-08T12:30:20.743
> 
> 标签：search, solr

我正在寻找的是一种可以“部分折叠”我的结果的操作，以便对*具有*特定字段的文档进行分组，删除可能被视为接近重复的内容，但所有缺少此字段的文档都不受字段折叠的影响。

（具体来说，有问题的文档是讨论论坛中的各个帖子，而这些帖子又按主题组织。由于论坛每页显示一个完整主题，因此就用户而言，同一主题中的多次点击本质上是重复的，并且随着线程变长，如果用户坚持主题，这是不可避免的。但是，还有许多其他类型的文档，这种折叠根本没有任何意义。）

使用 Solr 3.5，我得到的最接近的是

```
...&group=true&group.main=true&group.field=threadid&group.limit=3 
```

但似乎 Solr 将“缺失”视为一个值，并将其他所有内容折叠为 3 个命中 - 我希望它将缺失值视为“唯一”。

可以这样做还是我应该考虑修改架构设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:23:58.550

我认为这不能直接使用 solr 中的现有查询参数。

您有两个可能可行的选择：

*   确保每个帖子都有一个`threadid`这样的一次性帖子有一个唯一的 threadid 与“正常”不冲突`threadid`。在此字段上分组时，这些帖子将显示在自己的组中。

*   运行两个查询，一个启用了分组，但一个`fq`参数过滤掉没有`threadid`（例如`fq=threadid:[* TO *]`）的帖子，然后另一个查询仅用于非线程帖子的反向`fq`（`fq=-threadid:[* TO *]`），然后将这些结果合并到您自己的代码中。

# android - Android，检查互联网连接

> ID：10948877
> 
> 赞同：3
> 
> 时间：2012-06-08T12:30:21.110
> 
> 标签：android, android-wifi, connectivity

我已经进行了很好的搜索并尝试了我看到的各种答案，但它们似乎都不适用于我的情况。我正在寻找一个强大的解决方案，所以，事不宜迟；

我有一个不寻常的情况，我的应用程序需要连接到没有互联网连接的 wifi 网络来执行某些任务（本地网络），一旦完成，它需要断开连接并重新连接到备用网络，无论是移动设备，或具有互联网连接的替代 wifi 热点，以便我可以进行通信。

我遇到的问题是我的通讯队列需要确保它在即将开始通讯时实际上有一条通往互联网的路由（这是在连接更改时触发的）

我在 ConnectivityManager 上尝试过各种调用，例如；

```
isConnected();
isAvailable(); 
```

但即使连接到我的非互联网网络，这些也会返回 true。

我需要一种方法来确保当连接到我的非 Internet 网络（或任何其他非 Internet 网络，如 BT Openzone，例如，当未注册和登录时）我可以被告知没有路由到互联网，然后当我确实有路线时，我可以返回一个 true。

我考虑的一种可能性是 ping，但如果可能的话，我更喜欢更整洁的东西。

我尝试了 requestRouteToHost() 但这并没有达到我的预期，实际上试图改变连接，这不是我想要的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:36:43.207

从[检查意图互联网连接](https://stackoverflow.com/questions/3767591/check-intent-internet-connection)

```
<receiver android:name=".YOURRECEIVER">
   <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
</receiver>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

public class NetworkStateReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
     super.onReceive(context, intent);
     Log.d("app","Network connectivity change");
     if(intent.getExtras()!=null) {
        NetworkInfo ni=(NetworkInfo) intent.getExtras().get(ConnectivityManager.EXTRA_NETWORK_INFO);
        if(ni!=null && ni.getState()==NetworkInfo.State.CONNECTED) {
            Log.i("app","Network "+ni.getTypeName()+" connected");
        }
     }
     if(intent.getExtras().getBoolean(ConnectivityManager.EXTRA_NO_CONNECTIVITY,Boolean.FALSE)) {
            XLog.d("app","There's no network connectivity");
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:37:10.103

这是我使用的方法：

```
public static boolean isNetworkAvailable(final Context context)  {
    return ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo() != null;
} 
```

以下是该方法的使用方法：

```
if (isNetworkAvailable(context)) {
    // code here
} else {
    // code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-04T16:49:54.393

[https://gist.github.com/allco/d50fc10f523293d22fc3d85efe4aaff2](https://gist.github.com/allco/d50fc10f523293d22fc3d85efe4aaff2)

那是我的 ConnectivityReporter 的 Rx 版本。它对 API 级别 >=24 和 <23 使用不同的实现。它只检查与*任何*网络的连接。例如，如果有没有互联网的 wifi，它会报告`true`但没关系，因为对于大多数用户来说这已经足够了，否则检查可能会非常复杂，因为术语`online`具有相当广泛的含义。

用法：

```
ConnectivityReporter(context)
        .statesStream()
        .subscribe(
            { connected -> Timber.d("connectivity state: $connected") },
            { err -> Timber.d(err, "error") }
        ) 
```

# django - 使用 django 跟踪用户登录

> ID：10948879
> 
> 赞同：0
> 
> 时间：2012-06-08T12:30:34.233
> 
> 标签：django, django-registration

我正在使用内置登录模块在我的网站中执行登录

`url(r'^login/$', 'django.contrib.auth.views.login', {'extra_context': {'page_name': 'login'}),`

这是我登录表单的下一步操作

`<input type="hidden" name="next" value="/redirect/">`

在注册期间，我为用户创建了一个小的跟踪代码，如下所示：

```
host = request.META.get('HTTP_X_FORWARDED_FOR','') or request.META.get('REMOTE_ADDR')
if tid == '0':
    import os, binascii
    tid = binascii.hexlify(os.urandom(6))
ut = UserTracking.objects.create(user=user, username=username, tracking_id=tid, remote_host=host, action='register')
ut.save()
variables = RequestContext(request, {'username': form.cleaned_data['username'], 'email': form.cleaned_data['email'], 'message': message, 'tid': tid})
return render_to_response('registration/register_success.html', variables) 
```

在`register_success.html`我使用 jquery 插件将我的跟踪代码保存到用户的电脑中，如下所示：

`$.jStorage.set('tid', '{{ tid }}');`

如何将此代码添加到我的登录表单并使用用户名和密码发送到我的`views.py`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:51:23.680

您可能需要自定义登录视图。

1.  添加您的登录视图：

    url(r'^login/$', 'myapp.account.views.login', {'extra_context': {'page_name': 'login'})

然后在你的 myapp/account/views.py 中，添加：

```
def login(request, template_name='logintemplate.html'):

    if (request.POST):
        username = request.POST.get('username', None)
        password = request.POST.get('password', None)
        tracking_code = request.POST.get('tracking_code', None)
        user = authenticate(username=username, password=password)
......
    if user:
        # your custom code here
...... 
```

并在 logintemplate.html 中将跟踪代码添加到登录表单中。

# linux - 如何在 Linux 上运行的 MATLAB 中使用 Invisible figure 进行 imshow

> ID：10948881
> 
> 赞同：3
> 
> 时间：2012-06-08T12:30:42.293
> 
> 标签：linux, matlab, matlab-figure

我的目标是：

1.  创建一个看不见的图
2.  使用子图，在其上绘制图像，然后
3.  无需打开即可保存。

因此，我正在运行以下代码：

```
f = figure('Visible', 'off');
subplot(2, 2, 1), imshow(image1);
subplot(2, 2, 2), imshow(image2);
subplot(2, 2, 3), imshow(image3);
subplot(2, 2, 4), imshow(image4);
saveas(f, 'filename'); 
```

但我得到了错误：

```
Error using imshow (line xxx)
IMSHOW unable to display image. 
```

这意味着 imshow 正在尝试显示图像。有没有办法`imshow`在隐形图中显示图像而不尝试弹出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T08:01:09.453

这会奏效，

```
f = figure('Visible', 'off');
subplot(2, 2, 1), image(image1);
subplot(2, 2, 2), image(image2);
subplot(2, 2, 3), image(image3);
subplot(2, 2, 4), image(image4);
saveas(f, 'filename');

In case of gray scale images

f = figure('Visible', 'off');
subplot(2, 2, 1), image(image1),colormap(gray);
subplot(2, 2, 2), image(image2),colormap(gray);
subplot(2, 2, 3), image(image3),colormap(gray);
subplot(2, 2, 4), image(image4),colormap(gray);
saveas(f, 'filename'); 
```

imagesc() 也可以用来代替 image() 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T11:00:57.487

当我在 nodisplay 模式下运行 Matlab 时，我得到了同样的错误。我的解决方法是使用图像作为纹理映射绘制表面网格：

```
function varargout = imshow_nodisp(im)
% An IMSHOW implementation that works even when Matlab runs -nodisplay.
%
% Only we don't scale the figure window to reflect the image size. Consequently
% the ugly pixel interpolation is directly apparent. IMSHOW has it too, but it
% tries to hide it by scaling the figure window at once.
%
% Input arguments:
%  IM  HxWxD image.
%
% Output arguments:
%  HND  Handle to the drawn image (optional).
%
  [h,w,~] = size(im);

  x = [0 w; 0 w] + 0.5;
  y = [0 0; h h] + 0.5;
  z = [0 0; 0 0];

  hnd = surf(x, y, z, flipud(im), 'FaceColor','texturemap', 'EdgeColor','none');

  view(2);
  axis equal tight off;

  if nargout > 0
    varargout = hnd;
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-31T13:52:58.840

对于任何在这里登陆的人。在为此苦苦挣扎之后，我设法从 mathworks 获得了对此的支持。解决方案很简单。您还需要将轴可见性设置为关闭。

例如

```
f = figure('Visible', 'off');
a = axes('Visible','off');  ### <-- added this line of code
subplot(2, 2, 1), imshow(image1);
subplot(2, 2, 2), imshow(image2);
subplot(2, 2, 3), imshow(image3);
subplot(2, 2, 4), imshow(image4);
saveas(f, 'filename'); 
```

# json - Knockout.js 映射 JSON 对象 - 仅第一个数组

> ID：10948884
> 
> 赞同：1
> 
> 时间：2012-06-08T12:31:01.567
> 
> 标签：json, knockout.js, knockout-mapping-plugin

这是我从我的服务收到的 JSON 它将包含“第一个”-Array 和一个 ResponseStatus 数组。

```
{"Customers":[{"Id":1,"Name":"Thomas","LastName":"Deutsch"},    {"Id":2,"Name":"Julia","LastName":"Baumeistör"}],"ResponseStatus":{}} 
```

这个第一个 JSON 数组是用 ko.mapping 映射的

```
$.getJSON(self.Url, function (data) {
    ko.mapping.fromJS(data.Customers, {}, self.Items);
}); 
```

它工作得很好。但这里是

**问题**：我不能使用“data.Customers”，因为服务器也可以在第一个位置返回一个“Companies”JSON 数组。

**问题**：是否可以进行映射，即仅解析“FIRST”数组？我被困住了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:54:03.527

这可能适用于您正在尝试做的事情

```
$.getJSON(self.Url, function (data) {
    $.each(data, function(i, item){

        var customers = getPersonnel(item.Customers);
        var companies = getPersonnel(item.Companies);
        var response = getPersonnel(item.ResponseStatus);

        if(customers != null){
            // Parse JSON here...
        }

        if(companies != null){
            // Parse JSON here...
        }

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:37:34.117

您可以定义映射插件的行为。

请参阅[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)（**“高级用法”**部分）

# powershell - 使用 Powershell 将 csv 导入 SharePoint 列表

> ID：10948890
> 
> 赞同：2
> 
> 时间：2012-06-08T12:31:52.473
> 
> 标签：powershell, csv, sharepoint-2010

我想将数据从 CSV 导入 SharePoint 列表，我从脚本中得到的只是空白行。这是我的代码：

```
# CSV path/File name
$contents = Import-Csv ".\Input.csv"

# Web URL
$web = Get-SPWeb -Identity "http://Zaxiyn/" 

# SPList name
$list = $web.Lists["Technical Profile List"] 

# Iterate for each list column

foreach ($row in $csv) {
    $item = $list.Items.Add();
    $item["Computer"] = $row.Computer;
    $item["ItemOrder"] = $row.ItemOrder;
    $item["Category"] = $row.Category;
    $item["ItemName"] = $row.ItemName;
    $item["ItemValue"] = $row.ItemValue;
    $item.Update();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:39:30.130

看起来你指的是一个不存在的变量。csv 文件内容保存在 $contents 中，您的 foreach 语句使用 $csv，试试这个：

```
foreach ($row in $contents) { ... } 
```

# java - 管理数组

> ID：10948892
> 
> 赞同：0
> 
> 时间：2012-06-08T12:32:03.483
> 
> 标签：java, android

我想将一些保存在一个数组中，然后使用它。但问题是这是一个大数据，我不确定这是否是个好主意，甚至是否可以将所有这些数据保存到一个数组中。可能我应该有一些机制，比如从顶部删除数组项？

这是一个安卓应用程序，它是实时的，所以速度真的很重要。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:41:02.290

如果该数组是您想要显示的可能很大的项目列表的支持，那么我猜您将想要实现分页 - 一次按需获取一屏数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:06:04.300

就您提到的数据量而言，仍有两种可能性。如果您希望您的数据被持久存储 - 选择 SQLite，不要再三思而后行了。如果您不想要持久存储 - 那么`ArrayList`将是比使用数组更好的方法，因为执行操作`ArrayList`会更容易和更快（在某些情况下），而且您也不必不断更改数组手动调整大小。

# php - 高级 javascript 图像滑块

> ID：10948893
> 
> 赞同：-4
> 
> 时间：2012-06-08T12:32:17.387
> 
> 标签：php, javascript, jquery, css, image

我已经在谷歌上搜索了一段时间，并意识到我需要帮助。

我正在为我的一个朋友用 PHP 开发一些东西，但他想要在他的网站上（对我来说）一个非常难以编程的图像滑块。我是荷兰人，我要向您展示的示例是荷兰网站：[http](http://www.iboma.com/index.asp) ://www.iboma.com/index.asp 。我正在尝试制作类似的动画，但使用的是 javascript/jQuery。

我只需要淡入图像和相应的链接，而不是显示样品木材。文本可能是额外的。这不是必需的。

标准滑块不够好，所以我需要自定义代码。没有花哨的动画，交叉淡入淡出将是理想的。图像淡入后，我需要一个图像+链接淡入覆盖背景图像，同时保持示例网站上也显示的覆盖徽标。

我想使用 JSON 数组或预加载在网站上（可能对搜索引擎更友好）从 PHP 提供图像滑块图像。

```
var photos = [  { image: "http://localhost/foobar.png", logo: "http://localhost/foobar.png", link: "http://www.stackoverflow.com/" }, 
{ image: "http://localhost/foobar.png", logo: "http://localhost/foobar.png", link: "http://www.google.com/" },
{ image: "http://localhost/foobar.png", logo: "http://localhost/foobar.png", link: "http://www.yahoo.com/" }]; 
```

你们能帮我开发这样的动画吗？

出发：

我试图弄清楚如何有一个有效的无限循环堆叠我必须触发的各种事件来为事物设置动画。

首先，我是使用普通的 javascript 还是在负载和速度方面使用 jQuery 更好？

其次，这种无限循环代码的好的实现是什么？

第三，如何在不破坏动画流程的情况下触发各种事件。

第四，当动画背景图像发生变化时，我如何确保覆盖的标志不会在动画后面消失？这是我的主要问题之一。使用 fadeIn 和 fadeOut 标志消失在我的图像后面。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:08:36.250

> 我已经在谷歌上搜索了一段时间，我开始意识到我真的需要一些帮助。

上面的行对我来说没有意义。

我在谷歌中输入了“图像滑块”，这是第一个结果。

[http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)

这看起来非常像你问的。

有一个图像滑块的免费代码，它带有链接、文本，几乎所有你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:15:40.793

好的，据您所知，没有人会为您编写它；）我可以向您推荐幻灯片，它可以简单地做到这一点 - [http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

```
$('#slideshow').cycle({ 
   fx: 'fade', 
   after:   onAfter 
});

function onAfter(curr, next, opts, fwd) { 
     //here you make animation with text and small image
}; 
```

它是如此简单，你所要做的就是用所有的动画来取笑。试试看。无需为此编写您自己的幻灯片代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:44:51.613

终于得到了我需要的东西。

Sófka 你在我的路上帮助了我。谢谢。这是我需要的。哦，我为此使用了 Orbit 图像滑块。

以下代码适用于我：

```
(function($) {
        $(document).ready(function() {
            $('#featured').orbit({
                animation: 'fade',                  // fade, horizontal-slide, vertical-slide, horizontal-push
                animationSpeed: 500,                // how fast animtions are
                timer: true,                        // true or false to have the timer
                advanceSpeed: 6000,                 // if timer is enabled, time between transitions
                pauseOnHover: true,                 // if you hover pauses the slider
                startClockOnMouseOut: true,         // if clock should start on MouseOut
                startClockOnMouseOutAfter: 0,       // how long after MouseOut should the timer start again
                directionalNav: false,              // manual advancing directional navs
                captions: false,                    // do you want captions?
                captionAnimation: 'fade',           // fade, slideOpen, none
                captionAnimationSpeed: 800,         // if so how quickly should they animate in
                bullets: false,                     // true or false to activate the bullet navigation
                bulletThumbs: false,                // thumbnails for the bullets
                bulletThumbLocation: '',            // location from this file where thumbs will be
                beforeSlideChange: function() {
                    $('#featured a, #featured span').fadeOut(400, function() {
                        $('#featured a, #featured span').remove();
                    });

                    $('#featured img').each(function(index) {
                        if ($('#featured img').eq(index).css("z-index") == 3) {
                            var className = $('#featured img').eq(index).attr("class");
                            $('#featured img')
                                .eq($('#featured img').index(this))
                                .after($('#featured-images .' + className)
                                    .clone()
                                    .css("z-index","4")
                                );
                            $('#featured a.' + className)
                                .css("top",$("#featured img." + className).height() - $("#featured img." + className).next("a").height() - 50)
                                .css("left",$("#featured img." + className).width() - $("#featured img." + className).next("a").width() - 50)
                                .fadeIn(1000, function() {
                                    $('#featured a.' + className + ' img').fadeIn(1500);
                                    $('#featured img')
                                        .eq($('#featured img').index(this))
                                        .after($('#featured-text .' + className)
                                            .clone()
                                            .css({"z-index":"4",
                                            "top":"0px",
                                            "display":"block",
                                            "opacity":0,
                                            "position":"absolute",
                                            "left":$("#featured img." + className).width() - $("#featured img." + className).next("a").width() - 70 - $('#featured-text .' + className).width()})
                                        );
                                    $('#featured span.' + className).animate({
                                        opacity: 1,
                                        top: $("#featured img." + className).height() - $("#featured img." + className).next("a").height() - 25
                                    }, 1000);
                                });

                        }
                    });
                }
            });
        });
    }(jQuery)); 
```

需要自己向代码库添加一些事件挂钩，但这并不太难。

HTML：

```
<div id="featured">
                <img src="http://localhost/foo/images/bar.png" class="image-1" width="924" height="317" alt="" />
                <img src="http://img265.imageshack.us/img265/3355/62320763.jpg" class="image-2" width="924" height="317" alt="" />
                <img src="http://img411.imageshack.us/img411/1237/75707805.jpg" class="image-3" width="924" height="317" alt="" />
            </div>
            <div id="featured-images">
                <a href="" class="image-1" style="width:100px;height:50px;border:1px solid #FFF;"><img src="http://localhost/foo/images/foobar.png" width="100" height="50" alt="" style="display:none" /></a>
            </div>
            <div id="featured-text">
                <span class="image-1" style="display:none;font-size:30px;color:#FFF;">Dit is een test</span>
            </div> 
```

# codeigniter - Codeigniter：多种方法，多个表，一页

> ID：10948898
> 
> 赞同：0
> 
> 时间：2012-06-08T12:32:32.747
> 
> 标签：codeigniter, methods, controllers

我是一个 CI 新手，我正在转换一个我在程序上开发的网站，我希望尽可能“正确”......我有我的默认控制器，它有一个类，其中有一个方法每个页面，每个页面加载不同的内容视图，具体取决于正在访问的页面。

很简单......但是假设在persons 页面上，在persons 表中，有一些字段包含来自不同表的每个人的详细信息（即最喜欢的啤酒、最近购买的东西、最喜欢的颜色等......）。所以也许我应该有一个“人”类和调用不同模型的不同方法？我想遵守规则，但要尽快到达那里。提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:00:45.340

是的，你应该有这个“人”类，这是你的模型。在那里实现所有功能并在您的控制器中使用它

# android - 如果用户在android中清除了ram，则自动启动服务

> ID：10948904
> 
> 赞同：1
> 
> 时间：2012-06-08T12:32:38.057
> 
> 标签：android, android-service

如果用户在 android 中清除了 Ram，如何自动启动服务我已经创建了一个 broadcastReciever 并启动了服务对不起，如果我不是很清楚..有时它正在工作意味着如果用户清除 ram，那么服务仍在运行，但有时它已停止并且未重新启动。如何解决这个问题呢

2）我使用过警报管理器，但应用程序经常挂起，所以我退出警报管理器我的代码片段是

```
public class RecieverToRestartService extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        try 
{

            Intent  _restartServiceIntent = new Intent(context,InvendisGpsLoggerActivity.class);
            _restartServiceIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startService(_restartServiceIntent);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

并在 android 清单文件中

```
<receiver   android:name="com.i.I.RecieverToRestartService">
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_REPLACED"/>
                <action android:name="android.intent.action.PACKAGE_RESTARTED"/>     
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:41:36.343

在您的情况下，我尚未测试，但是...当您返回`START_STICKY`时，[`public int onStartCommand (Intent intent, int flags, int startId)`](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)如果您的手机由于内存不足而将其杀死，则一段时间后将自动重新启动该服务。

# jquery - jQuery自动完成结果的顺序

> ID：10948911
> 
> 赞同：12
> 
> 时间：2012-06-08T12:33:01.657
> 
> 标签：jquery, jquery-autocomplete

我正在使用[jQuery-autocomplete 插件](http://jqueryui.com/demos/autocomplete/)来获取使用 AJAX 调用服务器来完成输入字符串的建议。此外，服务器会按照我希望它们出现的顺序返回结果，但自动完成以不同的顺序显示它们。

如何配置 jQuery 自动完成以不重新排序输出？我不需要在客户端进行任何类型的处理，因为数据已经根据需要进行了排名/排序。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T12:35:48.670

只需在将服务器结果发送到自动完成之前对其进行排序即可。

所以在你`echo json_encode($return_arr);`使用该`[sort()](http://ca.php.net/sort)`功能之前`$return_arr`

**你也可以尝试这样的事情：**

逻辑是建立一个以该词开头的匹配数​​组，然后将其与包含该词但不以该词开头的匹配连接起来。

```
$(document).ready(function () {
    var source = ['Adam', 'Benjamin', 'Matt', 'Michael', 'Sam', 'Tim'];
    $("input").autocomplete({
        source: function (request, response) {
            var term = $.ui.autocomplete.escapeRegex(request.term)
                , startsWithMatcher = new RegExp("^" + term, "i")
                , startsWith = $.grep(source, function(value) {
                    return startsWithMatcher.test(value.label || value.value || value);
                })
                , containsMatcher = new RegExp(term, "i")
                , contains = $.grep(source, function (value) {
                    return $.inArray(value, startsWith) < 0 &&
                        containsMatcher.test(value.label || value.value || value);
                });

            response(startsWith.concat(contains));
        }
    });
}); 
```

**示例：http:** [//jsfiddle.net/zkVrs/](http://jsfiddle.net/zkVrs/)

**来源：** [https ://stackoverflow.com/a/8302996/973155](https://stackoverflow.com/a/8302996/973155)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-08T14:16:09.377

好吧，事实证明它比我想象的要简单。我决定阅读插件的代码并通过注释掉对我的输出进行排序的代码来修改它。

那是我在默认值中发现一个变量“sortResults:true”的时候。所以，我只需要将该变量设置为 false。我在文档中没有找到这个。

`$('#search').autocomplete ( { url: "index.php", sortResults: false } )`

现在输出是我需要的确切顺序。

我有了阅读代码以从这里查找/解决问题的想法：[jQuery“自动完成”插件弄乱了我的数据顺序](https://stackoverflow.com/questions/2594297/jquery-autocomplete-plugin-is-messing-up-the-order-of-my-data) （这不是同一个插件）

谢谢。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T14:30:52.737

由于在当前版本的 jQuery Autocomplete 插件中没有 sortResults 选项，我不得不搜索另一个解决方案来解决这个问题，并发现插件对结果进行排序的唯一原因是服务器响应每次都被规范化，因为它不是带有对象的纯数组 {label ： ...， 价值： ...}。

将 PHP 视为您使用的语言，**json_encode(array_values($your_array));** 应该做的伎俩。

# java - 比较数组内容精度算法

> ID：10948912
> 
> 赞同：0
> 
> 时间：2012-06-08T12:33:05.913
> 
> 标签：java, android

我在数组中有 voiceResults 来搜索联系人：

```
Ben McDonald
Ben MacDonald
Ken McDonald
Ken MacDonald 
```

我已经在另一个数组中建立了 potentialMatches （示例）：

```
Ben McDonald
Benjamin MacDonald
Donna McBlead //anagram
Ben Mad
abcdelmno //occurrences in alphabetical order
onmledcba //occurrences in reverse alphabetical order
completely Random
a cannon
BK Lounge 
```

**我的目标是确定哪个是用户想要查看的最有可能的联系人。**

在循环两个数组时，我想使用与游戏[Mastermind](http://en.wikipedia.org/wiki/Mastermind_%28board_game%29)类似的逻辑，我可以在其中查看一个字母是“正确但在错误的地方”还是“正确且在正确的地方”。然后我可以将它与元素的 .length() 进行比较，并获得字母匹配和精确位置匹配的浮动百分比。

为此，我不仅需要在数组元素之间循环，还需要按元素的字母分解元素并比较这些单个元素的字母。要建立[Mastermind](http://normankosmal.com/wordpress/?p=23) / [anagram](https://stackoverflow.com/questions/4236906/finding-if-two-words-are-anagrams-of-each-other)逻辑，我需要删除匹配的字母，直到剩下不匹配的字母，然后再次将该数量与原始长度进行比较以获得百分比。

查看上面的示例数组数据，我还需要反向执行此操作并吐出名字和姓氏。

对于每个数组，我从以下内容开始：

```
 ArrayList<String> voiceResults = new ArrayList<String>();
    ListIterator<String> itr = voiceResults .listIterator();
    Arrays.asList(voiceResults.toArray());

    while (itr.hasNext()) {
    sid = itr.nextIndex();
    element = itr.next();

    sidpass = sid.toString();
    rawpass = element.toString().toLowerCase();
    rawpass.trim();

    hcs = rawpass.split("\\s");
    hnc = hcs.length;

    if (hnc == 2) {
    fn = hcs[0]; //first name
    ln = hcs[1]; //last name
    fn = fn.replaceAll("[^a-z]", ""); //remove punctuation
    ln = ln.replaceAll("[^a-z]", "");

    } 
```

我发布了上述内容，但我确定这不是正确的启动方法。

阅读许多字谜检查和算法的例子，它们变化很大，并使用 for 和 while 循环、哈希图、哈希表、直方图、浮点值等。

我举起双手，我完全不知道最初执行这些循环、内部循环、内部元素循环的最佳/最快/最实用的方法......

如果我能就如何开始构建循环提出一些建议，将不胜感激。

字母比较和反向迭代的进一步建议/示例/链接会很棒。希望那时我能把所有东西拼凑起来。

最后，我应该如何存储这些与元素相关的百分比？

我提前谢谢你。

请注意：尽管示例数据可能另有说明，但我已经使用了循环和 .contains() .matches() 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:38:59.280

有许多不同的拼写算法，但过去我使用过[Levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance)或[Soundex](http://en.wikipedia.org/wiki/Soundex)（各有优缺点）。Soundex 可能对您更有效，因为您是从人声中获得的。

您可能还想查看：

[获取最接近的字符串匹配](https://stackoverflow.com/questions/5859561/getting-the-closest-string-match)

和

[什么算法在拼写检查器中给出建议？](https://stackoverflow.com/questions/2294915/what-algorithm-gives-suggestions-in-a-spell-checker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:59:35.173

你也可以使用这个库； [http://code.google.com/p/string-similarity/](http://code.google.com/p/string-similarity/)

实施干净，易于根据您的需要进行定制。

例如让我们使用 JaroStrategy 进行字符串比较

```
 double similarity = 0.0;
    // Calculates the similarity score of objects, whereas 
    // 0.0 implies absolutely no similarity 
    // 1.0 implies absolute similarity.   
    SimilarityStrategy strategy = new JaroStrategy();
    StringSimilarityService service = new StringSimilarityServiceImpl(strategy);

similarity = service.score("Ben McDonald", "Ken MacDonald"); 
```

# facebook - 无法创建新应用？

> ID：10948916
> 
> 赞同：0
> 
> 时间：2012-06-08T12:33:19.327
> 
> 标签：facebook

我无法创建新应用程序，我按照创建新应用程序的所有说明进行操作，但它对我不起作用。

> 首先访问开发者应用程序。如果您之前没有创建应用程序，系统会提示您添加开发人员应用程序。

因此，当我单击 Developers app 时，什么也没有发生；它只需要我或加载到我的页面。没有什么促使我添加开发人员应用程序，即使指令说

> 系统将提示您添加开发人员应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:24:19.613

我遇到了同样的问题，似乎您需要使用真实用户的 Facebook 帐户登录，而不是您为企业创建的页面。只有真正的用户才能创建应用程序。

# android - Linux 和 Mac 上的 Android

> ID：10948919
> 
> 赞同：2
> 
> 时间：2012-06-08T12:33:35.830
> 
> 标签：android

我可以从他们的网站上为 Linux 和 Mac 安装 Android SDK。在 Linux 中安装后，他们要求我下载 Platforms and Other Packages

![在此处输入图像描述](../Images/e9f76764d61269386abe81b1c05b11a9.png)

我已经在我的 Linux 机器上下载了。现在我有一台 Mac，所以我下载了他们提供的 SDK。我的问题是我可以使用我已经为 mac 下载的平台和其他软件包吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:41:20.297

这`platform-tools/`是特定于平台的，因此您肯定需要为每个操作系统单独下载它们。

大多数其他组件应该是平台中立的。但是，我没有尝试在操作系统之间复制该材料，因此我不能确定它是否能正常工作。我建议你重新下载这些东西。

# python - python 的 sorted() 使用什么算法？

> ID：10948920
> 
> 赞同：128
> 
> 时间：2012-06-08T12:33:36.783
> 
> 标签：python, sorting

> **可能重复：**
> [关于 python 的内置 sort() 方法](https://stackoverflow.com/questions/1517347/about-pythons-built-in-sort-method)

名字说明了一切。

我试图向某人解释为什么他们应该使用 Python 的内置 sorted() 函数而不是自己滚动，我意识到我不知道它使用什么算法。

如果重要的话，我们说的是python 2.7

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-06-08T12:35:20.693

Python 使用一种称为[Timsort](http://en.wikipedia.org/wiki/Timsort)的算法：

> Timsort 是一种混合排序算法，源自合并排序和插入排序，旨在在多种现实世界数据上表现良好。它是由 Tim Peters 于 2002 年发明的，用于 Python 编程语言。该算法找到已经排序的数据子集，并使用这些子集更有效地对数据进行排序。这是通过将已识别的子集（称为运行）与现有运行合并来完成的，直到满足某些标准。Timsort 自 2.3 版以来一直是 Python 的标准排序算法。它现在还用于在 Java SE 7 和 Android 平台上对数组进行排序。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-08T12:35:58.903

排序算法称为 Timsort。见[timsort](http://wiki.python.org/moin/HowTo/Sorting)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-08T12:37:52.183

从 2.3 Python 开始使用 timsort。

更多信息：[http ://bugs.python.org/file4451/timsort.txt](http://bugs.python.org/file4451/timsort.txt)

# android - Admob 自定义

> ID：10948923
> 
> 赞同：0
> 
> 时间：2012-06-08T12:33:42.873
> 
> 标签：android, admob

我是在游戏中使用 admob 的新手。它显示在左上角，但我想显示在中心。这是我的代码。谢谢你提前。

```
 Window window = getWindow();
    RelativeLayout adsLayout = new RelativeLayout(this);
    RelativeLayout.LayoutParams Param = new RelativeLayout.LayoutParams(            RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);
    Param.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);
    AdView adView = new AdView(this, AdSize.BANNER, "a14******");
    AdRequest adRequest = new AdRequest();
    adView.loadAd(adRequest);
    adsLayout.addView(adView,Param);
    window.addContentView(adsLayout,Param); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:48:58.937

也许你应该给你的 adsLayout 一个尺寸，比如 fill_parent

# maven-2 - Maven 中同一项目的 maven-jaxb2-plugin 插曲，可能吗？

> ID：10948926
> 
> 赞同：3
> 
> 时间：2012-06-08T12:33:57.933
> 
> 标签：maven-2, jaxb, jaxb2, maven-jaxb2-plugin, jaxb-episode

我有一个`basic.xsd`和两个其他的`A.xsd`和`B.xsd`。`A.xsd`并`B.xsd`转换为两个不同的 java 包，因此我需要两个 Maven 执行相同的插件。

两个 XSD 都引用`basic.xsd`了一些共享类。如果来自不同的项目，我可以通过使用防止重复类`basic.xsd`很好地解决这个问题。`episodes`

但是我怎么能引用当前的项目呢？

我对插件的第一次执行是只从`basic.xsd`它自己的 java 命名空间中生成类。之后， executios`A.xsd`应该`B.xsd`知道从`basic.xsd`.

我可以以某种方式指向生成的剧集`basic.xsd`吗？

有点像

`<episodes><episodeFile>basicXSD.episode</episodeFile</episodes>`会很好，但据我所知，我只能添加依赖项...... :-(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:23:47.010

```
<plugin>
  <groupId>org.jvnet.jaxb2.maven2</groupId>
  <artifactId>maven-jaxb2-plugin</artifactId>
  <version>0.8.1</version>
  <executions>
    <execution>
      <id>first</id>
      ...
      <configuration>
        <episodeFile>${some.path}/first.episode</episodeFile>
      </configuration>
    </execution>
    <execution>
      <id>second</id>
      ...
      <configuration>
        <args>
          <arg>-b</arg>
          <arg>${some.path}/first.episode</arg>
        </args>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

[http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html) [http://weblogs.java.net/blog/kohsuke/archive/2006/09/separate_compil.html](http://weblogs.java.net/blog/kohsuke/archive/2006/09/separate_compil.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:55:05.797

您可以像这样简单地定义同一个插件的两个执行：

```
 <plugin>
    <artifactId>maven-whatever-plugin</artifactId>
    <version>1.0</version>
    <executions>
      <execution>
        <id>execution1</id>
        <phase>test</phase>
        <configuration>
         ....
        </configuration>
        <goals>
          <goal>TheGoalYouNeed</goal>
        </goals>
        <phase>process-sources</phase>
      </execution>
      <execution>
        <id>execution2</id>
        <configuration>
           ...
        </configuration>
        <goals>
          <goal>TheGoalYouNeed</goal>
        </goals>
        <phase>process-sources</phase>
      </execution>
    </executions>
  </plugin> 
```

# memory-management - 每当我们有分段错误时，是否会发生页面错误？

> ID：10948930
> 
> 赞同：1
> 
> 时间：2012-06-08T12:34:16.773
> 
> 标签：memory-management, operating-system

每当发生分段错误时，我们总是有页面错误吗？

任何有Linux内核代码经验的人都可以在这里指出代码吗？

我已经看到了：[分段错误与页面错误](https://stackoverflow.com/questions/6950549/segmentation-fault-vs-page-fault)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T13:14:10.997

**Pagefault**（又名#PF）是段错误的常见原因（在不存在的页面上处理一些数据，试图在没有相应权限级别的情况下从受保护的页面读取或写入数据，从非执行页面获取代码，. ..)。

但是由于其他一些罕见的原因，可能会发生段错误。例如，如果您尝试在没有请求的*当前特权级别*(CPL) 的情况下执行特权指令。检查此示例：

```
% cat segfault.c && gcc segfault.c -o segfault
int     main(void)
{
  __asm__("invd");

  return 0;
}

% ./segfault
Segmentation fault 
```

在此示例中，段错误与**内存**无关。该`invd`指令是特权指令（仅在 CPL 为*ring0*时可执行）。因此，您无法从*用户空间*执行它。执行此指令时，会发生*一般保护错误*（又名#GP）异常。内核捕获异常并将终止信号发送给故障程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:37:07.643

**在以下情况下也可能发生分段错误：**

a) 一个有缺陷的程序/命令，只能通过应用补丁来修复。

b) 当您尝试在 C 编程下访问超出数组末尾的数组时，它也会出现。

c) 在 chrooted jail 中，当关键共享库、配置文件或 /dev/ 条目丢失时，可能会发生这种情况。

d) 有时硬件或内存或驱动程序故障也会产生问题。

e) 维护所有计算机设备的建议环境（过热也会产生此问题）。

**为什么会出现页面错误：**

a) 试图访问一个虚拟内存地址

b)指令操作数/指令地址

c) 读数据/写数据，或取指令

d）也许页面“不存在”

e) 可能页面“不可读”</p>

f）也许页面是“不可写”</p>

g) 可能页面“不可见”</p>

# css - 我无法在 IE9 中调试的简单问题（我认为是 CSS）

> ID：10948933
> 
> 赞同：0
> 
> 时间：2012-06-08T12:34:26.623
> 
> 标签：css, internet-explorer-9, pseudo-class

我遇到了一堆垃圾浏览器 IE 的问题，它阻止我使用任何插件来调试问题。

如果有人可以好心地看看并让我知道问题，那将是王牌。

请查看这个站点（它只是测试域，所以我知道上面还有很多其他问题）- 009rep.clubnetdev.com。

将鼠标悬停在顶部导航菜单中的“销售”项目上（在 IE9 中）和第二列中，似乎有一条垂直线（边框）随机浮动在那里（见下面的截图）。我最初认为这与此下拉列表中定义的 CSS 伪类 first-child 和 last-child 有关，但如果有人可以查看并确认问题所在，我将不胜感激 - 谢谢。

[截图 http://img221.imageshack.us/img221/7606/pick.png](http://img221.imageshack.us/img221/7606/pick.png)

在所有其他非 IE 浏览器中显示良好（如预期的那样）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:47:36.193

menurep.css，第 176 行

`.col_1 {width:145px; border-right: 1px solid #888;}`

宽度 145px 是造成这种情况的原因，因为在其他下拉菜单中，您将其用于左侧的文本链接。

我会给这个实例一个不同的类，所以它根本不会应用正确的边框。

您可以这样做的一种方法是通过其父列定位此特定列：

`.dropdown_1column .col_1 { border:0 }`

我还注意到，您的所有`.col_*`类都具有`display:inline`并`float:left;`应用了相互冲突的语句，因为浮动无论如何都会使元素块。

如果您无法轻松更改上述任何内容，您可能想在此特定实例上尝试 z-index ，但我认为这可能会导致其他问题。

# shell - 用于登录网站的 Shell 脚本

> ID：10948934
> 
> 赞同：4
> 
> 时间：2012-06-08T12:34:27.240
> 
> 标签：shell, unix, scripting

我想使用 shell 脚本登录网站，同时我想自动获取用户 ID 和密码。

请建议如何使用shell脚本完成。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T12:42:02.120

如果您想做的是使用 HTTP Basic 身份验证从网站检索内容，那么您可以使用 wget 或 curl 从命令行实现此目的：

```
wget --http-user=user --http-password=password 

curl http://username:password@website.com/url 
```

如果使用基于 cookie 的身份验证，您也可以使用 wget，具体取决于它的设置方式。例如，如果您可以 HTTP POST 到登录页面

```
wget --save-cookies cookies.txt --post-data \
'user=myusername&password=mypassword' http://url/loginpage

wget --load-cookies cookies.txt -p http://url/thecontentIwant 
```

--save-cookies 和 --load-cookies 允许基于 cookie 的身份验证令牌在请求之间持续存在。

如果所使用的身份验证形式更复杂，那么答案将完全不同 - 因此，说明您想到的网站会有所帮助。此外，许多网站都有您应该使用的 API...

一般来说，如果你能稍微澄清一下这个问题会有所帮助——我发现这一点“同时我想自动获取用户 ID 和密码”有点令人困惑。如果您想在 bash 中进行交互式会话（即让用户在 bash 脚本中输入用户名和密码），那么您会发现

```
read -e -p 
```

非常有用（例如 read -e -p "My prompt:" varname; echo $varname）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:42:45.057

这取决于网站的设置方式。如果它使用基本的 HTTP 身份验证，您可以使用 wget 或 curl 并通过命令行参数提供用户名和密码。如果登录信息是通过表单提交的，您可以将其附加到 URL 或将其添加到发布数据中。

如果登录是更深奥的东西，你可能不得不用 Selenium 之类的东西编写浏览器会话脚本。这完全取决于网站的认证系统如何。

# mysql - 给定查询中的错误是什么

> ID：10948940
> 
> 赞同：1
> 
> 时间：2012-06-08T12:34:46.600
> 
> 标签：mysql

在执行查询时

```
SELECT TIMESTAMPDIFF(SECOND, NOW(), 'select lastLoginTime from requests where id = 2 ') 
```

它返回 NULL。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:57:09.793

```
mysql> SELECT TIMESTAMPDIFF(SECOND, NOW(), 'select last_update from t1 where actor_id = 2 ');
+--------------------------------------------------------------------------------+
| TIMESTAMPDIFF(SECOND, NOW(), 'select last_update from t1 where actor_id = 2 ') |
+--------------------------------------------------------------------------------+
|                                                                           NULL |
+--------------------------------------------------------------------------------+
1 row in set, 1 warning (0.00 sec) 
```

删除 ' 并添加 ()

```
mysql> SELECT TIMESTAMPDIFF(SECOND, NOW(), (select last_update from t1 where actor_id = 2));
+-------------------------------------------------------------------------------+
| TIMESTAMPDIFF(SECOND, NOW(), (select last_update from t1 where actor_id = 2)) |
+-------------------------------------------------------------------------------+
|                                                                    -199167725 |
+-------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

# mysql - 在 Varchar 列中选择大于特定值的值

> ID：10948941
> 
> 赞同：1
> 
> 时间：2012-06-08T12:34:48.427
> 
> 标签：mysql

我在 Varchar 列中有一些文本，它总是以一些数字结尾，例如：

```
abc12
xy2
asdf876
qwerty32 
```

我需要选择这些数字大于某个数字 x 的值，例如如果`x = 20`，结果应该是：

```
asdf876
qwerty32 
```

我可以在 MySQL 中执行此操作吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:51:06.520

谷歌搜索后，我发现有人用一个函数解决了这个问题：

```
mysql> DELIMITER |
mysql> CREATE FUNCTION digits( str CHAR(32) ) RETURNS CHAR(32)
    -> BEGIN
    ->   DECLARE i, len SMALLINT DEFAULT 1;
    ->   DECLARE ret CHAR(32) DEFAULT '';
    ->   DECLARE c CHAR(1);
    ->   SET len = CHAR_LENGTH( str );
    ->   REPEAT
    ->     BEGIN
    ->       SET c = MID( str, i, 1 );
    ->       IF c BETWEEN '0' AND '9' THEN 
    ->         SET ret=CONCAT(ret,c);
    ->       END IF;
    ->       SET i = i + 1;
    ->     END;
    ->   UNTIL i > len END REPEAT;
    ->   RETURN ret;
    -> END |
Query OK, 0 rows affected (0.00 sec)

mysql> DELIMITER ; 
```

并使用它：

```
mysql> select * from t1 where actor_id > digits('ABCDefg199');
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|      206 | a          | b         | 0000-00-00 00:00:00 |
|      200 | THORA      | TEMPLE    | 2012-05-22 15:12:26 |
+----------+------------+-----------+---------------------+
2 rows in set (0.12 sec) 
```

来源：[http ://www.artfulsoftware.com/infotree/queries.php?&bw=1280#815](http://www.artfulsoftware.com/infotree/queries.php?&bw=1280#815)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:42:21.090

首先 - 这种操作的需要表明数据库结构从一开始就是错误的。

您可以编写一个函数，从字符串中提取数字序列，将其转换为数字，然后进行所需的操作。

例如 - 使用正则表达式（使用附加库的 mysql 已经解决了这个问题）。

如果添加库太难 - 您可以编写一个函数，从该位置到末尾找到字符串和 substr 中第一次出现的数字。

# java - 数千个主题的高性能 DefaultMessageListenerContainer 配置

> ID：10948943
> 
> 赞同：5
> 
> 时间：2012-06-08T12:35:05.587
> 
> 标签：java, spring, jms, activemq, spring-jms

对于我当前的项目，我需要使用来自许多目的地（从数百到 20 或 30k）的消息，所有目的地都是主题。目前（对于初始负载测试）所有消息都是在同一台服务器上本地创建的，在线程池中。

我当前的 spring 配置在代理网络（用于集群）和 DefaultMessageListenerContainers (DMLCs) 中使用嵌入式 activemq，并带有一个通用的 TaskExecutor。虽然目的地的数量非常多，但每个目的地的吞吐量相对较低。

我唯一的要求是尽快消费所有消息。

我的配置：

```
<bean id="connectionfactory" class="org.springframework.jms.connection.CachingConnectionFactory" destroy-method="destroy">
    <property name="targetConnectionFactory">
        <ref bean="amqConnectionFactory" />
    </property>
</bean>
<bean id="amqConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="vm://localhost:61616?async=false&amp;jms.dispatchAsync=false" />
    <property name="userName" value="admin" />
    <property name="password" value="admin" />
</bean>
<bean id="listenerThreadPoolTaskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
    <property name="corePoolSize" value="70" />
    <property name="maxPoolSize" value="70" />
    <property name="daemon" value="true" />
    <property name="keepAliveSeconds" value="60" />
</bean>

<!-- Message Listener Container Template for Topics -->
<bean id="topiccontainertemplate" class="org.springframework.jms.listener.DefaultMessageListenerContainer" scope="prototype"
    destroy-method="destroy">
    <property name="autoStartup" value="false" />
    <property name="connectionFactory" ref="connectionfactory" />
    <property name="pubSubDomain" value="true" />
    <property name="cacheLevelName" value="CACHE_CONSUMER" />
    <property name="destinationName" value="default" />
    <property name="maxMessagesPerTask" value="1" />
    <property name="receiveTimeout" value="1" />
    <property name="taskExecutor" ref="listenerThreadPoolTaskExecutor" />
</bean> 
```

我的代码使用应用程序上下文作为 DMLC-Factory 并设置容器的最终配置：

```
 AbstractMessageListenerContainer container = context.getBean("simpletopiccontainertemplate", AbstractMessageListenerContainer.class);
    container.setDestinationName(localEntity.getId().getDestination());
    container.setMessageListener(mylistener);
    container.start(); 
```

虽然我们在此配置中不会丢失消息，但单个消息的转换时间可能会很长。

**Q1：**有没有更有效的方式来收听大量目的地？

**Q2：**我的监听器配置有可能改进吗？

**Q3：**除了 DMLC，我还尝试了 SimpleMessageListenerContainer，但我无法让它工作。我的配置有问题吗？

```
<bean id="simpletopiccontainertemplate" class="org.springframework.jms.listener.SimpleMessageListenerContainer" scope="prototype"
    destroy-method="destroy">
    <property name="autoStartup" value="false" />
    <property name="connectionFactory" ref="connectionfactory" />
    <property name="destinationName" value="default" />
    <property name="concurrency" value="1" />
    <property name="pubSubDomain" value="true" />
    <property name="taskExecutor" ref="listenerThreadPoolTaskExecutor" />
</bean> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T19:25:20.730

我是否正确理解您正在手动创建 20-30,000 个`SimpleMessageListenerContainer`s，每个都在听不同的主题？我很惊讶它甚至可以工作，因为默认情况下每个侦听器都会创建一个线程，并且在一个 JVM 中并发运行的 20-30 万个线程令人印象深刻（而且令人恐惧）。

我看到有两种方法可以提高你的表现：

*   手动阅读消息，例如[`JmsTemplate.receive()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jms/core/JmsTemplate.html#receive%28%29)使用方便的方法。请记住使用非常低的超时时间。通过在更少的线程（10？100？）中迭代检查每个主题，您会遇到一些延迟，但更少的线程意味着更少的上下文切换时间浪费。

    老实说，我认为该解决方案不会扩展并为您提供更好的性能，但请尝试检查不同数量的线程和超时。

*   簇！恐怕用一个应用程序听 20-30k 主题永远不会奏效（足够快）。但是，您似乎可以轻松扩展此任务。投入十个或一百个服务器，让每个服务器相应地监听两千或两百个主题。这将线性扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:46:18.857

我从 搬到`DefaultMessageListenerContainer`了`SimpleMessageListenerContainer`。简单容器使用推送消息。这样（并且通过适当的配置，嵌入式代理将消息推送到侦听器而不是轮询目标。

# java - 从格式化字符串派生语言环境

> ID：10948944
> 
> 赞同：3
> 
> 时间：2012-06-08T12:35:11.653
> 
> 标签：java

我面临以下问题：从外部服务中，我得到格式化的数字数据，可以使用不同的语言环境进行格式化：

```
1.234,00 (de_DE)
1,234.12 (en_US) 
```

以编程方式派生用于格式化字符串的语言环境的最佳方法是什么，以便我可以将值解析为其原始类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:54:39.890

避免抛出 NumberFormatExceptions 的一种可能性是使用正则表达式来检测语言环境。从你的例子：

```
String sDE = "1.234,00"; // (de_DE)
String sEN = "1,234.12"; // (en_US)

Pattern patternEN = Pattern.compile("[0-9],[0-9].[0-9]");
Pattern patternDE = Pattern.compile("[0-9].[0-9],[0-9]");

System.out.println(" DE - EN : " + patternEN.matcher(sDE).find());
System.out.println(" EN - EN : " + patternEN.matcher(sEN).find());
System.out.println(" DE - DE : " + patternDE.matcher(sDE).find());
System.out.println(" EN - DE : " + patternDE.matcher(sEN).find()); 
```

给出以下结果：

```
 DE - EN : false
 EN - EN : true
 DE - DE : true
 EN - DE : false 
```

您可能需要优化正则表达式以获得完整的工作环境。

# android - Android：使用 JSON-Object 和 HttpClient 将数据从 Android 发送到服务器

> ID：10948945
> 
> 赞同：0
> 
> 时间：2012-06-08T12:35:13.323
> 
> 标签：android, json, httpclient, gsoap

我正在尝试使用 android 4.0.3 使用 JSON 对象将数据发送到 Gsoap 服务器。我的 android 应用程序遇到了 NetworkOnMainThread 异常。然后我在 AsyncTask 中使用了网络访问，所以无论如何我都看不到这个异常的意义。但现在我得到了 Nullpointer 异常。我已经发布了带有错误 logcat 的代码。我已经 google dint 得到了正确的解决方案。所以请任何人告诉我我哪里出错了。我第一次尝试使用 JSON 发送数据.. 我可以不使用 JSON 将数据发送到服务器.. 但需要使用 JSON 发送..

它在这一行崩溃**doInBack = (DownloadWebPageTask) doInBack.execute(new String[] { "192.168.1.40" });**

这是我的代码.. MainAcitivty 即 AndroidJSONParsingActivity

```
 public class AndroidJSONParsingActivity extends ListActivity {

// url to make request
// private static String url = "http://192.168.1.40";

// JSON Node names
private static final String TAG_CONTACTS = "contacts";
private static final String TAG_ID = "id";
private static final String TAG_NAME = "name";
private static final String TAG_EMAIL = "email";
private static final String TAG_ADDRESS = "address";
private static final String TAG_GENDER = "gender";
private static final String TAG_PHONE = "phone";
private static final String TAG_PHONE_MOBILE = "mobile";
private static final String TAG_PHONE_HOME = "home";
private static final String TAG_PHONE_OFFICE = "office";

// contacts JSONArray
JSONArray contacts = null;

private AsyncTask<String, Void, String> doInBack;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    doInBack = (DownloadWebPageTask) doInBack
            .execute(new String[] { "http://192.168.1.40" });
    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(doInBack);

    try {
        // Getting Array of Contacts
        contacts = json.getJSONArray(TAG_CONTACTS);

        // looping through All Contacts
        for (int i = 0; i < contacts.length(); i++) {
            JSONObject c = contacts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);
            String email = c.getString(TAG_EMAIL);
            String address = c.getString(TAG_ADDRESS);
            String gender = c.getString(TAG_GENDER);

            // Phone number is agin JSON Object
            JSONObject phone = c.getJSONObject(TAG_PHONE);
            String mobile = phone.getString(TAG_PHONE_MOBILE);
            String home = phone.getString(TAG_PHONE_HOME);
            String office = phone.getString(TAG_PHONE_OFFICE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_EMAIL, email);
            map.put(TAG_PHONE_MOBILE, mobile);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
        System.out.println("JsonException--- " + e.getMessage());
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item, new String[] { TAG_NAME, TAG_EMAIL,
                    TAG_PHONE_MOBILE }, new int[] { R.id.name, R.id.email,
                    R.id.mobile });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name))
                    .getText().toString();
            String cost = ((TextView) view.findViewById(R.id.email))
                    .getText().toString();
            String description = ((TextView) view.findViewById(R.id.mobile))
                    .getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    SingleMenuItemActivity.class);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_EMAIL, cost);
            in.putExtra(TAG_PHONE_MOBILE, description);
            startActivity(in);

        }
    });

}

private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        String response = "";
        for (String url : urls) {
            DefaultHttpClient client = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            try {
                HttpResponse execute = client.execute(httppost);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(
                        new InputStreamReader(content));
                String s = "";
                while ((s = buffer.readLine()) != null) {
                    response += s;
                }

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result) {

    }
}

} 
```

JsonParser.java 类

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}

public JSONObject getJSONFromUrl(AsyncTask<String, Void, String> doInBack) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

SingleMenuItemActivity.java 类

```
public class SingleMenuItemActivity  extends Activity {

// JSON node keys
private static final String TAG_NAME = "name";
private static final String TAG_EMAIL = "email";
private static final String TAG_PHONE_MOBILE = "mobile";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get JSON values from previous intent
    String name = in.getStringExtra(TAG_NAME);
    String cost = in.getStringExtra(TAG_EMAIL);
    String description = in.getStringExtra(TAG_PHONE_MOBILE);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);

    lblName.setText(name);
    lblCost.setText(cost);
    lblDesc.setText(description);
}
} 
```

我的 logcat 错误报告

```
 06-08 17:46:55.459: E/AndroidRuntime(2542): java.lang.RuntimeException: Unable to start activity           ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.AndroidJSONParsingAct ivity}: java.lang.NullPointerException
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.os.Handler.dispatchMessage(Handler.java:99)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.os.Looper.loop(Looper.java:137)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.ActivityThread.main(ActivityThread.java:4424)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at java.lang.reflect.Method.invokeNative(Native Method)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at java.lang.reflect.Method.invoke(Method.java:511)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at dalvik.system.NativeStart.main(Native Method)
 06-08 17:46:55.459: E/AndroidRuntime(2542): Caused by: java.lang.NullPointerException
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at com.androidhive.jsonparsing.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:62)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.Activity.performCreate(Activity.java:4465)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
 06-08 17:46:55.459: E/AndroidRuntime(2542):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:47:14.583

检查 JsonObject "c" 是否真的包含这些字段。您可能会在下面的一行中得到 NullPointerException。

```
 // Storing each json item in variable
        String id = c.getString(TAG_ID);
        String name = c.getString(TAG_NAME);
        String email = c.getString(TAG_EMAIL);
        String address = c.getString(TAG_ADDRESS);
        String gender = c.getString(TAG_GENDER);

        // Phone number is agin JSON Object
        JSONObject phone = c.getJSONObject(TAG_PHONE);
        String mobile = phone.getString(TAG_PHONE_MOBILE);
        String home = phone.getString(TAG_PHONE_HOME);
        String office = phone.getString(TAG_PHONE_OFFICE); 
```

您可以通过以下代码检查 jsonobject 是否具有特定名称的映射

```
if(jsonObject.has(TAG_NAME)) {
    String name = c.getString(TAG_NAME);
} 
```

或者您可以检查 json 是否具有名称映射但其值为 null

```
if(!jsonObject.isNull(TAG_NAME)) {
    String name = c.getString(TAG_NAME);
} 
```

此外，如果没有映射或名称为空值，您可以获得一个空字符串

```
if(jsonObject.optString(TAG_NAME)) {
    String name = c.getString(TAG_NAME);
} 
```

**编辑：** 你不创建你的 asyncTask 对象。在调用其执行方法之前创建它。

```
doInBack = new DownloadWebPageTask();
doInBack.execute(...) 
```

# java - java.lang.ClassNotFoundException: org.jboss.logging.Logger

> ID：10948948
> 
> 赞同：7
> 
> 时间：2012-06-08T12:35:29.323
> 
> 标签：java, eclipse, classpath

我有一个奇怪的问题。我在 JBoss 中配置了一个[JMS](https://en.wiktionary.org/wiki/JMS)客户端应用程序和一个[MDB](https://en.wikipedia.org/wiki/Enterprise_JavaBeans#Message_driven_beans)`jboss-5.1.0.GA`。早些时候，我通过“配置构建路径”→“添加外部 JAR”添加了 JAR，一切正常。

现在，我将所有 JAR 移动到我的项目下的 lib 文件夹并使用“配置构建路径”→“添加 JAR”。

现在，我在执行客户端程序时遇到以下异常:(

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jboss/logging/Logger
at org.jnp.interfaces.NamingContext.<clinit>(NamingContext.java:160)
at org.jnp.interfaces.NamingContextFactory.getInitialContext(NamingContextFactory.java:56)
at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
at javax.naming.InitialContext.init(Unknown Source)
at javax.naming.InitialContext.<init>(Unknown Source)
at com.dcat2.messaging.sendreceive.MessageReceiver_test.sendMessage(MessageReceiver_test.java:68)
at com.dcat2.messaging.sendreceive.MessageReceiver_test.main(MessageReceiver_test.java:57)
`Caused by: java.lang.ClassNotFoundException: org.jboss.logging.Logger
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 8 more 
```

我`jndi.properties`在类路径和以下 JAR 中：

```
jbossall-client.jar
commons-logging.jar
concurrent.jar
javax.ejb.jar
jms.jar
jnp-client-4.2.2.GA.jar
log4j-1.2.16.jar
sqljdbc4.jar 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T08:26:44.443

你需要`jboss-logging-3.1.0.GA`，它随 Hibernate 发行版一起提供，或者可以单独下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T06:15:00.573

这是 JBoss 记录器与从 1.7 开始升级的 JDK 兼容的问题。JDK 1.7 不允许自定义级别。请使用与 JDK 1.7 (Hit and Try) 兼容的库。也许，`lib doc`可以帮助它。

否则，请自行更改问题 JAR（不推荐）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T10:00:07.160

真正的问题是`jbossall-client.jar`包含对其他 JAR 的引用。因此，我们需要从`JBOSS_HOME`. 这就是为什么当我复制到我的`lib`目录时它不起作用的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T16:35:16.493

看起来他们可能缺少`lib/`类路径中的文件夹。您是否更新了类路径以指向 lib 文件夹？如果您有清单文件，请确保它引用了 jar 的 lib 文件夹。当你的程序运行时打印出你的类路径，然后你可以看看它是否指向那些罐子。eclipse 设置只有在 eclipse 中才有用，所以如果你超出这个范围，你必须注意类路径。

# ruby-on-rails - 有条件地设置方法选项？

> ID：10948949
> 
> 赞同：0
> 
> 时间：2012-06-08T12:35:32.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有办法有条件地为方法设置选项？

就像是...

```
article_url(@article, :host => 'myblog.com' if @user.custom_domain?) 
```

所以在那种情况下......只有`host`在用户为其帐户设置了某个选项时才设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:39:58.173

```
opts = @user.custom_domain? ? {:host => 'myblog.com'} : {}
article_url @article, opts 
```

或者一个班轮：

```
article_url @article, @user.custom_domain? ? {:host => 'myblog.com'} : {} 
```

# ruby-on-rails - 在 Ruby on Rails 中传递的查询字符串

> ID：10948960
> 
> 赞同：0
> 
> 时间：2012-06-08T12:36:09.420
> 
> 标签：ruby-on-rails

当我按下链接时，我想传递 id=1 。

```
**link**
**view/index.html.erb**

<%=link_to "Questions " ,:action=>"index" %> 
```

我想将此 id 值传递给控制器**​​ app/post_controller.rb**

请告诉如何访问该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:45:01.800

你可以这样做：

```
<%= link_to "Questions", :action => "index", :id => 1 %> 
```

还有一个更易读的版本：

```
<%= link_to "Questions", questions_path, id: 1 %> 
```

但是，对于您想要实现的目标，可能有更好的方法。如果你想链接到某个问题，你应该这样做：首先你在你的控制器中检索问题对象，如下所示：

```
@question = Question.find(2) # or params[:id] 
```

然后在您看来，您只需这样做：

```
<%= link_to "Question", @question %> 
```

# javascript - javascript中phonegap的facebook登录应用程序

> ID：10948963
> 
> 赞同：-2
> 
> 时间：2012-06-08T12:36:13.490
> 
> 标签：javascript, facebook

我是 Facebook 应用程序的新手。

1）实现Facebook应用程序的程序是什么。

2) 我想要一个使用 phonegap 的 java 脚本中的示例登录应用程序。

能否请您发送回复。

提前致谢。斯瓦蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:39:50.430

[我使用此连接器](https://github.com/davejohnson/phonegap-plugin-facebook-connect)并遵循基本 phonegap 教程做了类似于您所要求的事情，您这样做应该没有问题。
如果您想为您完成代码，那么您来错地方了，请在询问之前表现出一些努力，社区会帮助您。

# wordpress - 我想向 cforms 插件添加条件逻辑功能

> ID：10948964
> 
> 赞同：0
> 
> 时间：2012-06-08T12:36:14.917
> 
> 标签：wordpress

我想向 cforms 插件添加条件逻辑功能。现有的联系表格需要以下附加功能：用户从表格的下拉列表中选择他们拥有的产品类型。根据他们做出的选择，会向他们发送一封独特的自动回复电子邮件。将有 10 种不同的自动回复，具体取决于他们在表单中选择的 10 个下拉选项中的哪一个。所有的自动回复都需要在 cforms 中易于访问和编辑。

任何人都可以知道如何做到这一点。cforms 提供这个吗？有哪些可能的方法？

是否有提供此功能的替代插件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:02:48.417

在使用了 Contact Form 7、cForms... 一段时间后，我终于硬着头皮买了[Gravity Forms](http://www.gravityforms.com/)。它比 cforms 更精致，更容易更新。它将执行条件逻辑。

# jquery - jquery.min.js 在 socialengine4 框架中是否存在冲突？

> ID：10948965
> 
> 赞同：0
> 
> 时间：2012-06-08T12:36:22.930
> 
> 标签：jquery, socialengine

我正在尝试在 socialengine 框架中使用 jquery.min.js。

它工作正常，但会影响管理面板**布局编辑器**

我的事情有冲突，任何人都可以帮助我解决它。

我正在使用在活动模块**Bootstrap.php**中加载 jquery.min.js，如下所示

> $headScript = new Zend_View_Helper_HeadScript();

$headScript->appendFile('application/modules/Activity/externals/scripts/core.js');

$headScript->appendFile('application/modules/Activity/externals/scripts/jquery.min.js');

> $headScript->appendFile('application/modules/Activity/externals/scripts/jquery.hovercard.min.js');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:28:06.210

这可以通过包括以下内容来解决：

```
<script>
jQuery.noConflict();
</script> 
```

在您的代码中并分配您所有的“$”。用“jQuery”。

# layout - 黑莓滚动视图

> ID：10948966
> 
> 赞同：0
> 
> 时间：2012-06-08T12:36:23.040
> 
> 标签：layout, blackberry, blackberry-jde, choicefield

我通过使用子布局定位每个组件并告诉相对 X、Y 位置来创建屏幕布局。

问题是，当从 中选择选项`ObjectChoiceField`或以编程方式添加新文本字段时，整个布局会再次绘制，这会导致`Scrollview`从用户先前交互的位置跳转到顶部，从而给他带来痛苦。

使用 sublayout 进行定位有问题吗？如果是这样，如何在没有子布局的情况下在 BlackBerry 中创建复杂的布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:20:53.023

您还没有发布代码，因此很难确定问题所在。每当您修改 VFM 包含的字段集时，听起来您的垂直滚动位置将变为 0。您可以在修改子字段之前读取当前滚动位置，然后在执行布局逻辑后显式设置它。

# html - 如何通过sencha touch中的动态创建按钮处理特定事件

> ID：10948967
> 
> 赞同：2
> 
> 时间：2012-06-08T12:36:29.243
> 
> 标签：html, extjs, sencha-touch-2

我已经使用初始化函数动态创建了六个按钮，我还为每个按钮动态分配了不同的 ID，我想为每个按钮处理事件，当我单击每个不同的按钮时，我会收到第六个按钮 ID 的警报消息，如何处理特定的按钮事件。谢谢

```
Ext.define("DynamicButton.view.Main", {
extend: 'Ext.Panel',
initialize: function () {
var me = this;
me.names = ['Button1', 'Button2', 'Button3', 'Button4', 'Button5', 'Button6'];
var toolBar = Ext.create('Ext.Toolbar', {
docked: "bottom"
});
this.add(toolBar);

for (var i = 0; i < me.names.length; i++) {
var name = me.names[i];
var button = Ext.create('Ext.Button', {
id: 'Btn' + name,
html: name,
handler: function() {
alert(button.id);
},
scope: this
});
toolBar.add(button);
}
},
config: {
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T16:05:15.627

您还可以通过处理函数的参数访问按钮：

```
handler: function (button, event) { 
    console.log(button.id);
} 
```

如果您想更改范围，我可能会很有用。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T15:56:42.677

这是因为范围。在这种情况下，“按钮”不是您认为的那样。

在这种情况下，您可能想尝试：

`this.id`

此实例中的“this”是指被单击的按钮的实例。

# c# - winform中多个UI实例

> ID：10948973
> 
> 赞同：0
> 
> 时间：2012-06-08T12:36:47.303
> 
> 标签：c#, winforms, user-interface, components

我有一个 winform 应用程序，默认情况下，它包含一个带有大约十二个标准组件的 ui。每组组件代表应用程序与之通信的硬件设备。我需要能够复制或复制这组控件的多个实例，以便主窗体包含此 UI 的 1、10 或 100 个实例，使用选项卡界面来保存每组 10 个“控件界面”。我正在寻找有关如何最好地处理和管理此问题的建议。换句话说，如何最好地创建和管理通常可能是单个用户界面的多个实例。我想我可以轻松地创建一个对象列表，每个对象都是所有组件的容器，这些组件构成正在与之通信的硬件的单一表示。

虽然我使用设计器创建了界面，但我认为使用设计器创建所有附加“组件集”可能不切实际，这将在安装时确定。我想基本上我需要每个接口实例的“this.components”对象容器的列表或数组。任何有关如何处理和解决此类问题的建议将不胜感激。

谢谢，

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:47:37.383

我在 DockPanelSuite 上取得了巨大成功

[http://sourceforge.net/projects/dockpanelsuite/](http://sourceforge.net/projects/dockpanelsuite/)

我可能会发布一些示例代码来帮助您入门，但这非常简单！

# asp.net - 最小和最大字符的正则表达式，没有空格

> ID：10948974
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:36:54.583
> 
> 标签：asp.net, .net, regex, passwords

我需要验证一个字符串是否包含最少 6 个字符和最多 8 个字符，且不包含空格。字符串中可以使用任何字母数字字符。

我将 asp.net 与 C3 一起使用，为此我将使用正则表达式验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:41:21.433

正则表达式`^\w{6,8}$`应该做的工作：

*   `^`- 字符串的开始
*   `\w`- 单词字符
    *   `{6,8}`- 6 到 8 次
*   `$`- 字符串结束

* * *

正如 Ianzz 在评论中所说，您真的不应该限制用户可以用作密码的内容：

> 不要限制密码中允许的字符或最大长度；只检查最小长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:48:09.803

这实际上是一个非常简单的匹配表达式。如果您的正则表达式引擎不支持间隔，您可能需要稍微调整一下。

```
/(?x)
  ^            # start of string
  [[:alnum:]]  # POSIX alphanumeric class
  {6,8}        # minimum 6 matches, maximum 8
  $            # end of string
/ 
```

这在 Ruby REPL 中对我有用。您的正则表达式引擎的语法可能会有所不同，但这应该会让您指向正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:43:41.043

由于您还没有展示任何已完成的工作，我将把这些部分给您，但您可以自己弄清楚它们是如何组合在一起的。

字母数字字符可以表示`[a-zA-Z0-9]`或通常也表示`\w` （编辑此部分，因为下面的正确评论，mea culpa）

句首用 ^ 标记，结尾用 $

6-8 的数量限定词在需要被明显数字替换的地方`{[min],[max]}`表示为这样`[min]``[max]`

根据正则表达式的类型，您可能还需要用边界将其括起来，约定通常有利于`/`您的正则表达式 `/[regexp here]/`

有了这些，您可以将您的表情拼凑在一起。玩得开心。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T12:42:51.357

您没有指定您使用的是哪种语言，但在这种情况下应该无关紧要。

我假设 Javascript，所以那将是：

```
/^[a-z0-9]{6,8}$/i 
```

//i 是忽略大小写。您还可以使用：

```
/^[a-zA-Z0-9]{6,8}$/ 
```

# javascript - XUL 菜单列表，以编程方式打开

> ID：10948976
> 
> 赞同：1
> 
> 时间：2012-06-08T12:37:02.257
> 
> 标签：javascript, xul

我想在 menulist XUL 项中模拟自动完成的行为（原始的自动完成组件对我来说太不切实际了，所以实际上使用它然后创建一个完整的 XPCOM 组件更容易）。

然而，有问题的部分是导致它打开它的下拉部分，它以编程方式显示选项。即我不想按下箭头按钮来打开它，我希望它在我输入时打开（或者如果没有匹配的选项则关闭）。由于我可以处理输入文本，我想在同一个处理程序中打开/关闭下拉部分，有没有办法做到这一点？

**编辑**

下面是我用于组件的 XUL 文件的简化示例：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>
<dialog id="whatever" title="Select a tab to open"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        buttons="accept,cancel"
        buttonlabelcancel="Cancel"
        buttonlabelaccept="Save"
        ondialogaccept="return doOK();"
        ondialogcancel="return doCancel();">
  <dialogheader title="Select tab"/>
  <menulist id="search-box" editable="true"
            oncommand="commandHandler(event)"
            onkeyup="keyUpHandler(event)"/>
  <script>
    var a = window.arguments[0];
    var opener = window.arguments[1];
    var menu = document.getElementById('search-box');

    function doOK()
    {
        opener.selectTabAtIndex(a.indexOf(menu.value));
        return true;
    }

    function doCancel(){ return true; }

    function commandHandler(event)
    {
        doOK();
        window.close();
    }

    function keyUpHandler(event)
    {
        var v = menu.value;
        menu.removeAllItems();
        populate(a.filter(function (x, i)
        {
            if (x == v) opener.selectTabAtIndex(i);
            return x.indexOf(v) > -1;
        }));
    }

    function populate(choices)
    {
        for (var i = choices.length - 1, s; i >= 0; i--)
        {
            s = choices[i];
            menu.appendItem(s, s);
        }
    }
    menu.focus();
    menu.select();
    populate(a);
    menu.open = true;
  </script>

</dialog> 
```

如您所见， menu.open = true 对此没有影响。

**编辑 2**

我也试过：

```
var e = document.createEvent("KeyboardEvent");
e.initEvent("keydown", true, false, menu, false, false, false, false, 0, 40);
menu.dispatchEvent(e); 
```

以及 keydown / keyup / keypress 和切换 keycode 和 charcode 和 yada-yada 的变化，都没有效果。

*顺便说一句，我喜欢 API，想起了旧的好 WinAPI，但还没有足够的无用参数*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:38:32.650

这实际上很简单，您使用以下[`open`属性](https://developer.mozilla.org/en/XUL/menulist#p-open)：

```
menulist.open = true; 
```

您的问题可能是人们不希望此属性是读/写的，而是寻找一种方法 - 但更改属性确实是打开下拉列表的正确方法。

# javascript - 如何正确显示由 Redactor JQuery 编辑器编辑的数据

> ID：10948978
> 
> 赞同：0
> 
> 时间：2012-06-08T12:37:06.797
> 
> 标签：javascript, jquery, html, escaping

我正在使用[Redactor](http://redactorjs.com/)在我的页面中进行编辑，它工作得很好而且很酷。完成编辑后，我将内容存储在数据库中。问题是当我从数据库中获取内容时，我怎样才能像在 Redactor 中一样显示它？发现内容中包含一些HTML格式的标签，like`<p>, <b>,`等。`<p>blahblah</p>`天气我是否逃避它，它会在浏览器中打印字符串喜欢。

我如何在编辑时像在 Redactor 中一样显示内容？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T12:50:06.160

您可以允许或拒绝标签：

```
$('#redactor').redactor({
    allowedTags: ['p', 'h1', 'h2', 'pre']
}); 
```

和

```
$('#redactor').redactor({
    deniedTags: ['blockquote', 'div']
}); 
```

设置您希望编辑器保留的内容或您希望从可编辑内容中删除的内容。

> 来源：http: [//imperavi.com/redactor/docs/settings/](http://imperavi.com/redactor/docs/settings/)

# java - 来自 WSDL 的 Axis 1.4 Web 服务

> ID：10948981
> 
> 赞同：0
> 
> 时间：2012-06-08T12:37:15.953
> 
> 标签：java, axis, wsdl2java

我需要从另一家公司的 WSDL 文件创建一个 Web 服务（服务器应用程序，而不是客户端）。我已经从 WSDL 创建了客户端应用程序，但从未创建过服务器应用程序。没有其他公司提供的文件，但我在网上找到[了这个](http://tinyurl.com/78xcgap)（第 64 页）；它是从 2008 年开始的，但他们告诉我信息仍然有效（尽管链接无效）。[我从这个zip 文件](http://www.ercot.com/content/services/mdt/xsds/nodal/External+Web+Services+XSD+V1.19R.zip)中得到了 Notification.wsdl 和 Notification.XSD 。

我在这个命令行中使用了 WSDL2Java：

```
java org.apache.axis.wsdl.WSDL2Java --server-side Notification.wsdl 
```

并创建了几个 java 源文件和 deploy/undeploy.wsdd 文件。但是 deploy.wsdd 看起来不像我预期的那样基于 Axis 文档。它只包含：

```
<deployment
    xmlns="http://xml.apache.org/axis/wsdd/"
    xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
</deployment> 
```

至少不应该有一个`<service>`条目，还是我需要手动创建？我希望它是自动创建的。WSDL 文件中是否缺少某些内容？还是我在某个地方错过了一步？

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:44:23.173

If you are using Axis 1.4 command WSDL2Java does not create you a proper `.wsdd` file. You always need to edit it.

I am using ANT to generated axis server side classes:

```
 <target name="build-server-jar">
        <mkdir dir="${build}/libs_gen"/>
        <axis-generate serverside="true"
                       srcDir="${ant.dirs.wsdl}"
                       destDir="${build.ws.dir}/${project.name}-server"
                       wsdl="${project.wsdl}"
                       nspkg="${project.nspkg}"/>
        <javac srcdir="${build.ws.dir}/${project.name}-server"
               destdir="${build.ws.dir}/${project.name}-server"
               classpathref="classpath.build"
               includeantruntime="no"/>
        <jar destfile="${build}/libs_gen/my-axis-ws.jar"
             basedir="${build.ws.dir}/${project.name}-server"
             includes="**/*.class"/>
        <copy todir="${lib}" overwrite="true">
            <fileset dir="${build}/libs_gen" includes="my-axis-ws.jar"/>
        </copy>
    </target> 
```

The generated `deploy.wsdd` file looks like this:

```
<deployment
    xmlns="http://xml.apache.org/axis/wsdd/"
    xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">

  <service name="MyAxis" provider="java:RPC" style="wrapped" use="literal">
      <parameter name="wsdlTargetNamespace" value="http://example.com/ws/myaxis"/>
      <parameter name="wsdlServiceElement" value="MyAxis"/>
      <parameter name="schemaUnqualified" value="http://example.com/ws/myaxis/types"/>
      <parameter name="wsdlServicePort" value="MyAxis"/>
      <parameter name="className" value="com.example.ws.myaxis.MyAxisPortBindingImpl"/>
      <parameter name="wsdlPortType" value="MyAxisService"/>
      <parameter name="typeMappingVersion" value="1.2"/>

      //Generated operations

      //Generated type mappings.

  </service>
</deployment> 
```

Then I have to edit it to look like this:

```
<deployment
        xmlns="http://xml.apache.org/axis/wsdd/"
        xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">

    <globalConfiguration>
        <parameter name="disablePrettyXML" value="false"/>
        <parameter name="sendXsiTypes" value="true"/>
        <parameter name="sendMultiRefs" value="true"/>
        <parameter name="sendXMLDeclaration" value="true"/>
    </globalConfiguration>

    <handler name="LocalResponder" type="java:org.apache.axis.transport.local.LocalResponder"/>
    <handler name="URLMapper" type="java:org.apache.axis.handlers.http.URLMapper"/>
    <handler name="Authenticate" type="java:org.apache.axis.handlers.SimpleAuthenticationHandler"/>

    <service name="MyAxis" provider="java:SPRING" style="wrapped" use="literal">
        <parameter name="springBeanId" value="mySpringBean"/>
        <parameter name="wsdlTargetNamespace" value="http://example.com/ws/myaxis"/>
        <parameter name="wsdlServiceElement" value="MyAxis"/>
        <parameter name="schemaUnqualified" value="http://example.com/ws/myaxis/types"/>
        <parameter name="wsdlServicePort" value="MyAxis"/>
        <parameter name="className" value="com.example.ws.myaxis.MyAxisImpl"/>
        <parameter name="wsdlPortType" value="MyAxisService"/>
        <parameter name="typeMappingVersion" value="1.2"/>

        //Generated operations

        //Generated type mappings

        <wsdlFile>WEB-INF/wsdl/MyAxis.wsdl</wsdlFile>
    </service>

    <transport name="http">
        <requestFlow>
            <handler type="URLMapper"/>
            <handler type="java:org.apache.axis.handlers.http.HTTPAuthHandler"/>
        </requestFlow>
    </transport>

</deployment> 
```

Why your WSDL2Java command does not generate service, operations and type mappings my guess is it depends on version you are using.

I am using axis-1.4 and axis-ant-1.4\. It generates me everything, but I still need to make some changes. So I suggest you try ANT and use those version and at least service, operations and type mappings will be generated.

# java - System.out.print() 不会向 Eclipse 控制台发送任何输出。为什么？

> ID：10948983
> 
> 赞同：20
> 
> 时间：2012-06-08T12:37:20.683
> 
> 标签：java, eclipse, string

我有下一个java类：

```
public class Test {

    public static void main(String args[]) {

        for (int i = 0; i < 1448; i++) {
            System.out.print(i);
        }

    }
} 
```

当我在 Eclipse IDE 中运行 tis 代码时 - 我在 Eclipse 控制台中看不到任何输出。

但是，如果我更改值**1448**并设置例如**1447**或更少，我会在控制台中看到输出 (12345678...)

那么，也许 Eclipse IDE 对控制台中的字符串长度有限制？

你怎么看待这件事？

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-08T12:49:19.623

右键单击控制台 -> `Preferences...`-> 检查`Fixed width console`。现在你有了自动换行，一切正常。似乎 Eclipse 控制台对一行中显示的字符数有限制。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-08T12:45:08.800

据此[，](http://geekbridage.wordpress.com/2009/02/24/increase-console-buffer-in-eclipse/) Eclipse 确实限制了其输出缓冲区的大小。

当然，您可以更改此行为：

> 转到*Window > Preferences > Run/Debug > Console*并取消选中*Limit console output*；或者您可以提供 1000 到 1000000 之间的任意数量的字符。

编辑：它似乎并没有解决你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T12:43:11.873

我在我的 Eclipse Helio IDE 副本中测试了您的代码。根据您的说法，它适用于较小的数字。但如果数字较大，它实际上是在控制台中打印，但输出不显示。如果您尝试将其复制并粘贴到编码编辑器或记事本等其他编辑器中，您可以看到它。

如果您使用**println()**它将显示输出。相反，您也可以使用**print(i+ "\t")**查看输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-30T19:25:28.157

如何将 System.out.println 输出到控制台：右键单击您的 glassfish（服务器选项卡）并转到查看日志文件

![在此处输入图像描述](../Images/f2816089afa594772b68114c19407d37.png)

确保控制台设置指向您的 server.log 文件： ![在此处输入图像描述](../Images/caf932cc2ec511c7572dee9c138909bc.png)

# c# - 如何使用 Silverlight 中的度数绘制数学三角形？

> ID：10948986
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:37:35.190
> 
> 标签：c#, silverlight, polygon

如何在silverlight中使用一些度数绘制数学三角形，如不等边三角形、等腰三角形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:40:46.550

除了数学（我假设您可以计算或搜索）之外，您还可以使用几个 API。

*   [WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)可以让您轻松地在位图上绘制线条。
*   您还可以在 XAML 或 C# 代码中使用内置 Silverlight 几何路径：http: [//msdn.microsoft.com/en-us/library/cc189068%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc189068%28VS.95%29.aspx)

需要注意的一件事是，Silverlight 中的坐标系将 Y 轴从大多数几何数学描述中翻转过来。

# vb.net - 如何声明一个全局列表对象

> ID：10948989
> 
> 赞同：-1
> 
> 时间：2012-06-08T12:37:45.130
> 
> 标签：vb.net, list

我想在 Sub 过程上方声明一个列表并能够添加/修改它。

我想要这样的东西：

```
Public lisst As List(Of Decimal)
Private Sub angajati_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
         lisst.Add(1)
         lisst.Add(2)
End Sub 
```

当我运行上面的示例时，我收到如下错误：

```
 Object reference not set to an instance of an object. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:39:44.647

您尚未初始化列表（注意[`New`](http://msdn.microsoft.com/en-us/library/77s47661.aspx)）：

```
Public lisst As New List(Of Decimal)
Private Sub angajati_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
         lisst.Add(1)
         lisst.Add(2)
End Sub 
```

# java - Wicket - 使用 RestartResponseAtInterceptPageException 重定向

> ID：10948993
> 
> 赞同：0
> 
> 时间：2012-06-08T12:38:00.090
> 
> 标签：java, wicket

我再次带着检票口问题返回。

在 wicket 中实现页面之间重定向的常用方法是通过 RestartResponse...Excepion。

我的应用程序没有登录页面，并且登录是由 singleSignOn 另一个门户网站进行的。我的登录页面有 2 个构造函数：

```
//bad login if used a direct url to login page that is bookmarkable
public LoginPage() {
   super("Login");
   throw new RestartResponseAtInterceptPageException(new EmptyPage("Login on SMURFS PORTAL is necessary"));
}
    //good login from portal
public LoginPage(PageParameters parameters) {
    super("Login");
       ...
} 
```

EMpty Page 是一个非常简单的页面，带有一个带有 wicket:id = "message" 的 LABEL。

```
public EmptyPage(String message) {
   super("Alert");
   add(new Label("message", message));
} 
```

Wicket 正确重定向到空白页面，但即使页面标题为“警报”，也不会打印空白页面的代码。应该附加“子”元素的部分是空的，就像 EmptyPage 没有任何标记一样。

你有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:45:46.317

我的怀疑是`this.message`指的是尚未初始化的字段。

# c# - .NET 包含的哪些散列算法适用于密码散列？

> ID：10948994
> 
> 赞同：13
> 
> 时间：2012-06-08T12:38:04.990
> 
> 标签：c#, .net, security, hash

LinkedIn的[密码泄露](https://www.f-secure.com/weblog/archives/00002379.html "Redux：你确定 SHA-1+salt 就足够密码了吗？")证明了安全地散列密码的重要性。但是，即使使用“普通”哈希算法（例如 MD5 和 SHA 系列）对密码进行哈希处理也不安全，因为它们针对速度进行了优化，允许黑客每秒计算 23 亿次哈希（蛮力）。

有些哈希算法使用起来更安全，因为它们的计算量更大，例如[PBKDF2](https://en.wikipedia.org/wiki/PBKDF2)、[Bcrypt](http://www.openwall.com/crypt/)、 PBMAC 和[scrypt](https://www.tarsnap.com/scrypt.html)。然而，这些散列算法似乎并未包含在 .NET 框架中。

那么，.NET 框架中包含哪些性能密集型哈希算法？

**回答：** PBKDF2 包含在框架中，[本网站展示了如何正确使用它](https://www.owasp.org/index.php/Using_Rfc2898DeriveBytes_for_PBKDF2)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T12:43:21.770

我认为这不是一个真正有意义的类名，但我确实认为它包含在 .NET 框架中。根据多个消息来源，[Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)实际上是一个 PBKDF2 实现。MSDN 也是这么说的。

请参阅 [为什么我需要使用 Rfc2898DeriveBytes 类（在 .NET 中）而不是直接使用密码作为密钥或 IV？](https://stackoverflow.com/questions/2659214/why-do-i-need-to-use-the-rfc2898derivebytes-class-in-net-instead-of-directly) 和 [PBKDF2 在 C# 中使用 Rfc2898DeriveBytes 实现](https://stackoverflow.com/questions/1046599/pbkdf2-implementation-in-c-sharp-with-rfc2898derivebytes)

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T15:15:51.387

还有：

[http://bcrypt.codeplex.com/](http://bcrypt.codeplex.com/) (bcrypt)

[http://www.zer7.com/software.php?page=cryptsharp（scrypt](http://www.zer7.com/software.php?page=cryptsharp)等）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T13:24:47.970

没有 100% 安全的散列算法。LinkedIn hack 更多是由于基础设施/代码安全而不是散列算法。可以计算任何散列，散列算法越复杂，它需要的时间越长。在更复杂的散列上完成某些攻击（例如碰撞攻击）实际上并不会慢很多。

我总是确保我散列密码（从不只是加密），限制对服务器的访问。所有为我工作的开发人员都至少了解安全性的基础知识（sql 注入、溢出等），并且我工作的任何知名网站都经过了笔测试。

# c# - Enum.GetName() 用于位域？

> ID：10948997
> 
> 赞同：6
> 
> 时间：2012-06-08T12:38:23.773
> 
> 标签：c#, parsing, enums, bit-fields

如果枚举已经用属性装饰，它看起来`Enum.GetName()`不起作用。`[Flags]`

该**[文档](http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx)**未指定与此限制相关的任何内容。

我注意到调试器能够显示类似**Tree | 水果**。有没有办法检索描述组合标志的文本字符串？

* * *

以下代码显示`Red`。

```
public enum FavoriteColor
{
    Red,
    Blue,
    WeirdBrownish,
    YouDoNotEvenWantToKnow,
}

var color = FavoriteColor.Red;
Console.WriteLine(Enum.GetName(typeof(FavoriteColor), color));   // => "Red" 
```

而这个不输出任何东西....

```
[Flags]
public enum ACherryIsA
{
    Tree = 1,
    Fruit = 2,
    SorryWhatWasTheQuestionAgain = 4,
}

var twoOfThree = ACherryIsA.Fruit | ACherryIsA.Tree;
Console.WriteLine(Enum.GetName(typeof(ACherryIsA), twoOfThree));   // => "" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T12:40:47.403

```
string s = twoOfThree.ToString(); 
```

或者：

```
Console.WriteLine(twoOfThree); 
```

如果您想手动执行此操作，请将值拆分为位，并测试您需要添加哪些标志来制作该标志。有点编码，但不多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T12:43:35.763

为什么不`twoOfThree.ToString()`呢？

twoOfThree 等于 3，并且 ACherryIsA 没有与此值相关的枚举成员...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-08T00:40:01.020

如果标志是互斥的，您可以获得如下名称：

```
((ACherryIsA[])Enum.GetValues(typeof(ACherryIsA)))
.Where(e => twoOfThree.HasFlag(e)) 
```

演示：

```
var twoOfThree = ACherryIsA.Fruit | ACherryIsA.Tree;
Console.WriteLine(
    "Name: " + String.Join(
        ",", 
        ((ACherryIsA[])Enum.GetValues(typeof(ACherryIsA)))
        .Where(e => twoOfThree.HasFlag(e))
    )
);   // => Name: Tree,Fruit 
```

但是，如果标志重叠，这会表现得很奇怪：

```
[Flags]
public enum ACherryIsA
{
    Tree = 1,
    Fruit = 2,
    SorryWhatWasTheQuestionAgain = 4,
    FruitTree = Tree | Fruit,
}

public static void Main()
{
    var twoOfThree = ACherryIsA.Fruit | ACherryIsA.Tree;
    Console.WriteLine(
        "Name: " + String.Join(
            ",", 
            ((ACherryIsA[])Enum.GetValues(typeof(ACherryIsA)))
            .Where(e => twoOfThree.HasFlag(e))
        )
    );   // => Name: Tree,Fruit,FruitTree
} 
```

# jfreechart - JFreechart X轴数据重叠

> ID：10948998
> 
> 赞同：0
> 
> 时间：2012-06-08T12:38:29.903
> 
> 标签：jfreechart

我正在使用 jfreechart 但问题是 x 轴值重叠。有什么办法可以摆脱它？这是我图表的输出

![在此处输入图像描述](../Images/400fec39fea8518f34cc3e74b7638111.png)