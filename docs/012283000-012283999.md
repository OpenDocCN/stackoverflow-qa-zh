# StackOverflow 问答 12283000-12283999

# sql - How to get Row count by dynamically passing the table name

> ID：12283001
> 
> 赞同：3
> 
> 时间：2012-09-05T13:49:54.380
> 
> 标签：sql, sql-server, tsql, count, row

```
create procedure qa_cc
@tablename varchar(500)

AS 

BEGIN
    -- Create two integer values
DECLARE @tableOneCount varchar(50), @tableTwoCount varchar(50)

-- Get the number of rows from the first table
SELECT @tableOneCount = 'SELECT COUNT(*) FROM'  + @tablename; 
    exec (@tableOneCount);           

select      @tableOneCount  ; 

END

exec qa_cc @tablename=table1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:03:41.487

```
SELECT SUM(pa.rows) RowCnt
 FROM sys.tables ta
 INNER JOIN sys.partitions pa
 ON pa.OBJECT_ID = ta.OBJECT_ID
 WHERE ta.is_ms_shipped = 0 AND pa.index_id IN (1,0)
 and ta.name=@tablename
 GROUP BY ta.name 
```

请参阅[http://blog.sqlauthority.com/2010/09/08/sql-server-find-row-count-in-table-find-largest-table-in-database-part-2/](http://blog.sqlauthority.com/2010/09/08/sql-server-find-row-count-in-table-find-largest-table-in-database-part-2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:52:27.647

您可以使用`sp_executesql`，例如：

```
declare @sql nvarchar(max);
set @sql = N'select @cnt = count(*) from ' + @tablename;
declare @cnt int;
exec sp_executesql @sql, N'@cnt int output', @cnt = @cnt output;
select @cnt; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T13:52:30.540

看起来你在 FROM 关键字后面缺少一个空格，它正在阅读`FROMTABLE`而不是`FROM Table`

```
DECLARE @TABLE NVARCHAR(100)
SET @TABLE = 'CLIENT' -- YOUR TABLE NAME

EXEC('SELECT COUNT(*) FROM ' + @TABLE) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-15T22:09:01.050

```
CREATE PROCEDURE [dbo].[TableRowCount]
@tableName text
AS
EXEC ('SELECT COUNT(*) FROM ' + @tableName)
RETURN @@ROWCOUNT 
```

我希望这会有所帮助。谢谢你。

# mysql - 选择查询以获取每个 post_id 的标签

> ID：12283007
> 
> 赞同：0
> 
> 时间：2012-09-05T13:50:15.680
> 
> 标签：mysql, select, join, group-by

我正在尝试进行简单的 mysql 选择查询，我有 3 个表

```
post: post_id...
tags: tag_id, tag_name
post_tag: id_post, id_tag 
```

我写了这个查询：

```
$sql=mysql_query("select * from post 
LEFT JOIN post_tag 
ON post_tag.id_post = post.post_id
LEFT JOIN tags
ON post_tag.id_tag = tags.tag_id    
GROUP BY post_id
ORDER BY post_id 
DESC LIMIT 5"); 
```

但是即使有更多具有相同post_id的标签，每个帖子我也只能获得一个标签？

```
while($row=mysql_fetch_array($sql)) 
{
  $post_id =$row['post_id '];           
  $tag_name=$row['tag_name'];

  echo $post_id $tag_name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:56:03.647

你可以使用类似的东西：

```
SELECT post_id, GROUP_CONCAT(tag_name) AS tag_name FROM post 
LEFT JOIN post_tag 
ON post_tag.id_post = post.post_id
LEFT JOIN tags
ON post_tag.id_tag = tags.tag_id    
GROUP BY post_id
ORDER BY post_id 
DESC LIMIT 5 
```

这将为每个帖子提供一条记录，其中包含链接到该帖子的每个标记名的逗号分隔列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:56:20.847

您的查询按 post_id 分组。在其他数据库中，这会导致错误。在 MySQL 中，这被认为是一种称为隐藏列的功能。

不能保证您获得的值来自同一行（尽管实际上认为它们确实如此）。你可能想要这样的东西：

```
select *
from post LEFT JOIN
     post_tag 
     ON post_tag.id_post = post.post_id LEFT JOIN
     tags
     ON post_tag.id_tag = tags.tag_id    
ORDER BY post_id 
DESC LIMIT 5 
```

但是，如果您只想在帖子中添加标签，则可以考虑使用 gruop_concat：

```
select post_id, group_concat(tag.tag_name separator ',') as tags
from post LEFT JOIN
     post_tag 
     ON post_tag.id_post = post.post_id LEFT JOIN
     tags
     ON post_tag.id_tag = tags.tag_id
group by post_id 
```

# java - tomcat 请求 servlet

> ID：12283009
> 
> 赞同：0
> 
> 时间：2012-09-05T13:50:20.823
> 
> 标签：java, tomcat, servlets

如何将 url 映射到 tomcat 中的 HttpServlet 类。

示例我希望请求 /calc 由 Calc.java 处理

所以请求`127.0.0.1:800/calc`会调用：

```
public class Calc extends HttpServlet {
    /* ... */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:55:07.927

如果您使用的是 tomcat7，则只需添加注释即可：

```
@WebServlet(urlPatterns="/calc")
public class Calc extends HttpServlet {
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:51:27.163

我认为这个配置应该`web.xml`在你的`war`文件中，而不是在 tomcat 中。

如果您使用的是 Servlet3.0，那么您也可以使用注解。

```
@WebServlet(urlPatterns="/yoururl") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:52:42.010

[我认为你会从阅读Tomcat 手册中的“你的第一个 webapp”部分](http://tomcat.apache.org/tomcat-7.0-doc/appdev/index.html)受益匪浅，其中涵盖了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:53:45.847

在您的 web.xml 中添加以下配置

```
 <servlet>
    <servlet-name>calcServlet</servlet-name>
    <servlet-class>packagename.Calc</servlet-class> <!-- change the name of package according to your class -->
  </servlet>
  <servlet-mapping>
    <servlet-name>calcServlet</servlet-name>
    <url-pattern>/calc</url-pattern>
  </servlet-mapping> 
```

# ruby-on-rails - Rails - datetime_select - change order of time and date

> ID：12283012
> 
> 赞同：2
> 
> 时间：2012-09-05T13:50:24.473
> 
> 标签：ruby-on-rails, datetime

I use **datetime_select** in my application and i want to use such order of time and date:

```
HH MM - DD MM YYYY 
```

But i can't get how to do that. `:order` option allow only array that containing `:day, :month and :year`. Is there any solution to solve that?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-26T15:40:58.997

```
:order => [:hour, :minute, :day, :month, :year]. 
```

那应该这样做。

# perl - perl 关闭一个套接字

> ID：12283016
> 
> 赞同：10
> 
> 时间：2012-09-05T13:50:37.333
> 
> 标签：perl, sockets

有没有区别

```
shutdown($socket, 0) if $socket;
shutdown($socket, 2) if $socket;
close($socket) if $socket; 
```

和

```
shutdown($socket, 2) if $socket;
close($socket) if $socket; 
```

也有区别

```
shutdown($socket, 1) if $socket;
shutdown($socket, 2) if $socket;
close($socket) if $socket; 
```

和

```
shutdown($socket, 2) if $socket;
close($socket) if $socket; 
```

最后是`close`需要的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T14:07:20.320

[`shutdown`](http://www.kernel.org/doc/man-pages/online/pages/man2/shutdown.2.html)导致 TCP 连接的一侧停止读取 ( `0`) 或写入 ( `1`) 或两者 ( `2`)。所以前两个片段具有相同的效果，接下来的两个片段也是如此。

`shutdown`不释放文件描述符，所以[`close`](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html)仍然需要。

`close`single和 one之间的区别在于`shutdown( fd, 2 )`，在第二种情况下，TCP 不会尝试将未完成的数据传递到远程端（请参阅 参考资料[`SO_LINGER`](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)）。

# r - 1:10 和 0.1:1.0 之间的差异

> ID：12283022
> 
> 赞同：1
> 
> 时间：2012-09-05T13:50:59.777
> 
> 标签：r, numeric

我想知道为什么 R 将`(1:10)`向量视为从 1 到 10 和`(0.1:1.0)`0.1 的向量？

我应该自己定义从 0.05 开始的步骤吗？或者有什么技巧可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T13:53:39.497

冒号构成从第一个数字到最后一个数字的序列，步长为`1`。因为`0.1:1`那不到一个步骤，它只返回第一个数字。我想你在找`seq(0.1,1,length=10)`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:57:21.400

试试`0.1 * (1:10)`。它（恕我直言）比 seq 语法更容易阅读和记住，虽然它可能涉及更多的处理，但对于日常来说是可以的。

# iphone - How to display custom Emoji's that are not in the Unicode character table in an iOS App?

> ID：12283023
> 
> 赞同：8
> 
> 时间：2012-09-05T13:50:58.903
> 
> 标签：iphone, ios5, graphics, unicode-string, emoji

After searching the web for a couple of hours, I didn't get any solution to the following problem:

I am creating a new iOS app which is able to display [existing Emoji](http://arashnorouzi.wordpress.com/2011/08/31/adding-graphics-and-emoji-characters-to-apple-push-notifications/) in the Unicode character table. Now I also want to be able to create and display custom Emoji characters, but how should I map this using Unicode?

Is it even possible to use and display custom Emoji in iOS apps using Unicode? How should I go about this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:19:15.563

maybe this url will help you [http://punchdrunker.github.com/iOSEmoji/table_html/index.html](http://punchdrunker.github.com/iOSEmoji/table_html/index.html)

# c# - 在没有 MIME 的情况下以正确的格式下载文档

> ID：12283025
> 
> 赞同：1
> 
> 时间：2012-09-05T13:51:01.517
> 
> 标签：c#, asp.net, file, http-headers

我有这个 WebService，它允许上传/下载任何文档（主要是 .docx、.doc、.pdf），它返回的只是`byte[]`在查询下载时。

我写了这段代码

```
 string ContractGUID = dtContract.Rows[0]["ContractGUID"].ToString();

 //Get Bytes from WebService
 byte[] fileData = BLL.Contract.GetDocument(new Guid(ContractGUID));
 Response.Clear();
 Response.BinaryWrite(fileData);
 Response.AddHeader("Content-Disposition", "Attachment");
 Response.Flush(); 
```

WebService 公开的其他方法是`GetDocumentName`和`GetDocumentLen`

是否可以确定 Mime-Type 或强制浏览器以正确的格式下载它？目前它正在像`.htm`Chrome 中一样下载，打开时，我看到了有趣的字符。有更好的建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:59:57.887

我认为，浏览器是通过文件名来完成的。

例如：

```
response.Clear();
response.AddHeader("Content-Disposition", "attachment; filename=" + dbFile.filename.Replace(" ", "_"));
response.AddHeader("Content-Length", dbFile.data.Length.ToString());
response.ContentType = "application/octet-stream";
response.OutputStream.Write(dbFile.data, 0, dbFile.data.Length);
response.End(); 
```

dbFile.filename 是一个字符串

dbFile.data 是一个字节[]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:03:00.037

不，如果您不通过 Content-Type 标头告诉它，就不可能强制浏览器以正确的格式下载。

```
Response.ContentType = "application/pdf"; //or whatever appropriate 
```

如果 Web 服务公开了一个`GetDocumentName()`方法，您可能可以通过查看名称推断出适当的格式，假设该名称具有文件扩展名。这显然不是防弹的，因为您可以将文件的扩展名更改为您想要的任何内容。

另一种选择是通过查看第一个字节来尝试猜测文件格式。例如，如果文件的前 4 个字节是，`25 50 44 46`那么很可能这是一个 PDF 文件。[在这个网站上，](http://www.garykessler.net/library/file_sigs.html)他们有一个相当广泛的列表。

这是[可能的内容类型标头](http://msdn.microsoft.com/en-us/library/ms775147.aspx)列表。

# css - CSS：很清楚在不同级别的div中都需要

> ID：12283027
> 
> 赞同：0
> 
> 时间：2012-09-05T13:51:02.590
> 
> 标签：css, css-float

我有这个`CSS`代码：

```
#header {
    width: 100%;
    background: yellow;
}

#content {
    width: 100%;
}

#col1 {
    width: 200px;
    float: left;
    background: red;
}

#col2 {
    width: 600px;
    background: yellow;
    margin: 0px 0px 0px 200px;
}

#col3 {
    width: 200px;
    float: right;
    background: blue;
}

#footer {
    width: 100%;
    height: 90px;
    background: black;
    clear: both; **<~ This**
} 
```

`HTML`代码：

```
<div id="header"></div>
<div id="content">
    <div id="col1"></div>
    <div id="col2"></div>
    <div id="col3"></div>
</div>
<div id="footer"></div> 
```

问题：在与（col1，col2，col3）不同级别的情况下是否`clear: both`需要属性？`footer``footer``colx`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:54:32.977

如果您在页脚内浮动元素，则可能需要 clear:both。如果您没有在页脚内浮动元素，那么您可以将 clear:both 取出。

处理浮动元素的另一种方法是使用如下结构：

```
<div class="con">
    <div class="lft">lft</div>
    <div class="rgt">rgt</div>
</div>

.con { overflow:hidden; }
.lft { width:100px; float:left; }
.rgt { width:100px; float:left; } 
```

# java - 无法在 Eclipse IDE 中使用 java 建立与 SQL Server 2008 的数据库连接

> ID：12283034
> 
> 赞同：3
> 
> 时间：2012-09-05T13:51:23.183
> 
> 标签：java, eclipse, sql-server-2008

我正在尝试使用 Eclipse IDE 中的 Java 代码连接到 HP Operations Manager 数据库。我能够通过 Microsoft SQL Server Management Studio 2008 成功连接，但通过代码失败。我已经安装了“Microsoft JDBC Driver 4.0 for SQL Server”

代码：

```
import java.sql.*;

public class ConnectDatabase {

    Connection dbConnection = null;

    String dbName = "openview";
    String serverip="10.105.219.102";
    String serverport="1433";
    String url = "jdbc:sqlserver://"+serverip+"\\OVOPS;databaseName="+dbName+"";
    String userName = "HPOM-QA-WIN\\Administrator"; 
    String password = "Nbv12345";
    final String driverName = "com.microsoft.sqlserver.jdbc.SQLServerDriver";
    Statement statement = null;
    ResultSet rs = null;
    int updateQuery = 0;

    public Connection getConnection() {

        System.out.println(url);
        try{
             Class.forName(driverName).newInstance();

             dbConnection = DriverManager.getConnection(url,userName,password);
             System.out.println(DriverManager.getDrivers());

             statement = dbConnection.createStatement();

             String QueryString = "select Id from openview.dbo.OV_MS_Message where OriginalServiceId like '{FaultDn[1]}'";

             updateQuery = statement.executeUpdate(QueryString);

             if(updateQuery!=0){
                System.out.println("success" + updateQuery);
             }
             statement.close();
             dbConnection.close();
          }catch (Exception e){
              e.printStackTrace();
         }
         return dbConnection;

     }

     public static void main(String[] args) {

        ConnectDatabase cDB = new  ConnectDatabase();
        cDB.getConnection();

    }

 } 
```

执行此代码时出现以下错误：

```
jdbc:sqlserver://10.105.219.102\OVOPS;databaseName=openview com.microsoft.sqlserver.jdbc.SQLServerException: The connection to the host 10.105.219.102, named instance ovops failed. Error: "java.net.SocketTimeoutException: Receive timed out". Verify the server and instance names and check that no firewall is blocking UDP traffic to port 1434\.  For SQL Server 2005 or later, verify that the SQL Server Browser Service is running on the host.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.getInstancePort(SQLServerConnection.java:3589)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.primaryPermissionCheck(SQLServerConnection.java:1225)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:972)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.ucs.test.ConnectDatabase.getConnection(ConnectDatabase.java:27)
    at com.ucs.test.ConnectDatabase.main(ConnectDatabase.java:51) 
```

当我将网址更改为

```
String url = "jdbc:sqlserver://"+serverip+"\\OVOPS:"+serverport+";databaseName="+dbName+""; 
```

我收到以下错误：

```
jdbc:sqlserver://10.105.219.102\OVOPS:1433;databaseName=openview com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user 'HPOM-QA-WIN\Administrator'. ClientConnectionId:f1d323b7-9998-418c-b2a2-f2a7bd7b9b04
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)
    at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:254)
    at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:84)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:2908)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:2234)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$000(SQLServerConnection.java:41)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:2220)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1326)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.ucs.test.ConnectDatabase.getConnection(ConnectDatabase.java:27)
    at com.ucs.test.ConnectDatabase.main(ConnectDatabase.java:51) 
```

我在 Windows 防火墙中明确添加了一个入站规则，以允许 1434 端口上的 UPD 流量，然后禁用防火墙。但我仍然得到这个错误。此处提供的凭据用于使用 Microsoft SQL Server Management Studio 进行连接，并且运行良好。但它通过代码失败了。

我不确定我哪里出错了。我无法通过代码建立成功的连接。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T05:53:12.957

嘿，谢谢大家的回复。最后我能够解决这个问题。问题出在 url 和 auth dll 上。将网址更改为

```
"jdbc:sqlserver://10.105.219.102:1433;instance=OVOPS;DatabaseName=openview;integratedSecurity=true" 
```

并在 java.library.path 中添加了“sqljdbc_auth.dll”的位置。有效！

再次感谢您为帮助我所做的努力:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T20:14:56.767

我花了一些时间来解决这个问题，但你必须进入 SQL Server 配置管理器应用程序。加载后，展开 [SQL Native Client 11.0 配置] > 客户端协议。

启用所有三个（共享内存、TCP/IP 和命名管道）（如果尚未启用）。然后单击 TCP/IP 并确保默认端口为 1433。

如果您安装了 32 位系统或 SQL Server 版本，请在 SQL Native Client 11.0 配置 (32it) 菜单中执行相同操作，启用共享内存、TCP/IP 和命名管道并将默认端口设置为 1433。

然后单击打开[SQL Server 网络配置] 或（32 位，如果适用），并选择[Protocols for "YOURSERVERNAME"]。再次确保共享内存、TCP/IP 和命名管道都已启用。

然后单击 [TCP/IP] 协议名称，然后选择新弹出窗口顶部的 [IP 地址] 选项卡。对于 IP1，确保 Active 为 YES；Enabled 为 YES（默认为 No，即使是 Active）；并将 TCP 端口设置为 1433（我不知道您是否必须执行此步骤，但我做了并且成功了！！）；我的 TCP 动态端口设置为 0，我没有更改任何 IP 地址；

我对 IP10 做了同样的事情，它的 IP：127.0.0.1，它是本地机器。我还向下滚动到页面底部，并将 IPAll TCP Ports 设置为 1433（动态端口为 49163）。然后您需要应用所有更改，关闭属性窗口，然后单击 SQL Server 配置管理器中的 SQL Server 服务，然后重新启动所有正在运行的服务器。这应该这样做：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:04:50.690

捕获示例：

```
 String url = "jdbc:sqlserver://localhost:1433/databaseName";
    String username = "user";
    String password = "pass";

Connection connection = DriverManager.getConnection(url, username, password); 
```

1433 是默认端口。不要在 url 中使用 '\'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:06:37.230

这可能不是您问题的答案，但我希望这会对您有所帮助。这是如何正确返回连接（mysql）的方法：

```
import java.sql.*;

public class ConnectToDatabase{

    public Connection getConn(){

        final String DBPATH="jdbc:mysql://localhost:3306/mydb";
        final String DBUSER="root";
        final  String DBPASS="";
        Connection conn=null;
        try {
             conn = DriverManager.getConnection(DBPATH,DBUSER,DBPASS);

        } catch (SQLException e) {

            e.printStackTrace();
        }
    return conn;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-07T03:42:42.410

尝试更改您的数据库用户密码。确保新密码没有特殊字符。我遇到了同样的问题，更改数据库密码后问题得到解决。我的解决方法步骤：

> > 我收到 sqlserverexception.java 190 错误，说明无法连接到主机端口：4500 这是我的本地主机端口。打开 Sql Server 配置管理器 -> SQL Server 网络配置 -> MSSQLSERVER 的协议 -> 启用 TCP/IP。检查 TCP 端口号。它是 1433。所以我在注册表文件中将 4500 更改为 1433。

执行上述步骤后，这次我的数据库用户（sql-test）的起始密码不正确，我得到了一个不同的错误。我将密码更改为 sqltest123 并且有效。

# sql - 更新查询 MS Access 加入

> ID：12283036
> 
> 赞同：2
> 
> 时间：2012-09-05T13:51:30.407
> 
> 标签：sql, ms-access, sql-update

我有一个拉回 50 行的查询（这是正确的）：

```
select * from [Review Results], [Specialist Name Table]   
where [Authorizer Manager Name] = 5 
and [Specialist Name Table].[Penson Analyst] = TRUE
and [Review Results].[Authorizer Name] = [Specialist Name Table].[ID] 
```

我正在尝试从上述内容中进行更新查询，但我似乎无法做到这一点。这是我正在使用的查询，但是它想要更新 461 行而不是 50 行：

```
update
[Review Results] e
INNER JOIN [Specialist Name Table] s ON  e.[Authorizer Name] = s.[ID]
set e.[Authorizer Manager Name] = 5
where s.[Penson Analyst] = TRUE 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:00:05.963

请注意，您的选择查询在 where 子句中有一个过滤器：

```
where [Authorizer Manager Name] = 5 
```

这将返回集限制为“授权管理器名称”为 5 的行。在您的更新查询中，此过滤器不存在。相反，您的更新查询是说“当 Pension Analyst 字段为 TRUE 时，将 Authorizer Manager Name 设置为 5”。所以基本上，您的更新查询正在处理您的选择查询的超集。

简而言之，您的选择查询将返回 Pension Analyst 为 TRUE**且 Authorizer Manager Name 已为 5**的行，并且您的更新仅返回 Pension Analyst 为 TRUE 的行。

# memcached - 使用 Memcached 缓存 Model::find() 的结果

> ID：12283039
> 
> 赞同：4
> 
> 时间：2012-09-05T13:51:51.060
> 
> 标签：memcached, lithium

我想将从 Model::find() 返回的 DocumentSet 存储在 memcached 中。但是，当我从缓存中检索结果后尝试处理结果时，我得到了下面的 MongoException。具体来说，使用foreach时，在`if ($this->_resource->hasNext())`\data\source\mongo_db\Result.php的第63行调用时抛出异常

**蒙哥异常**

> MongoCursor 对象尚未被其构造函数正确初始化

我能理解为什么会这样。

我的问题是，是否有预填充 Model::find() 或创建我自己的 DocumentSet 以便我可以处理数据？通常，我只是将其转换为数组并将其存储在缓存中。但是，我需要访问我编写的一些模型方法（例如：Customer::fullName()）

***更新***：我发现了一些可以但不是很好的*解决方法。*我将 Model::find() 结果保存为 cache 中的数组`$result->to('array')`。然后，在检索时，我遍历 $results 并`Model::create($result, array("exists" => true)`为每个 $result; 填充一个新数组；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T05:08:09.493

A`DocumentSet`返回的`Model::find`包含一个 Mongo db 游标。在迭代项目之前，它不会从数据库中加载所有数据。在迭代每个项目时，`Document`会创建 a 并将其缓存在内存中的 DocumentSet 对象中。内置的 php 函数`iterator_to_array()`可用于将 DocumentSet 转换为可以缓存的文档数组。

正如您在更新中提到的那样，您还可以使用它`->to('array')`来准备缓存，然后`Model::create()`将其构建备份。该方法的一个警告：当您使用`->to('array')`它时，它还会将 MongoId 和 MongoDate 对象分别转换为字符串和整数。如果您`$_schema`为模型定义了 a 并设置了`'id'`和`'date'`类型，它们将被转换回由`Model::create()`. 如果您没有所有字段的架构，则可能会出现问题。我[最近有一个拉取请求](https://github.com/rmarscher/lithium/commit/ded7bb37c2e7978dddea474468287a96a94caa56)，试图使`->to('array')`不强制转换本机 mongo 对象成为可能（还解决了在子文档数组中总是强制转换 mongo 对象的问题）。

FWIW，我实际上更喜欢仅将数据保存在缓存中，因为它比序列化整个 php 对象的空间更小，并且避免了从缓存中提取项目时未定义类或未初始化其他项目的潜在问题。

我没有尝试过这个......但我认为你可以制作一个缓存策略类，它会为你透明地处理这个问题。另一个让 Lithium 成为一个非常灵活和强大的框架的非常谨慎的例子。 [http://li3.me/docs/lithium/storage/cache/strategy](http://li3.me/docs/lithium/storage/cache/strategy)

# html - 谷歌地图得到抵消

> ID：12283040
> 
> 赞同：0
> 
> 时间：2012-09-05T13:51:58.107
> 
> 标签：html, jquery-ui, google-maps, google-maps-api-3

嘿，每个人都曾在 jquery 选项卡系统中尝试过类似的事件，它可以单独工作或在网站上的任何其他地方工作，但是当在选项卡内时，它会以某种奇怪的方式获得这个偏移量！

如果您尝试过或有解决方案，请发布

![谷歌地图偏移](../Images/d21e42429a919529c99e79507dc48348.png)

```
<% if (RentalCaseMap.Any()) { %>
<div id="Kort" class="tab-content">
   <div id="rental_map_canvas" style="width:656px; height:270px"></div>
   <script type="text/javascript" src="/scripts/rentalmap.js"></script>
</div>
<% } %>
....

<input type="hidden" id="HiddenGeoLat" value="<%=CurrentContent.GeoLat %>" />
<input type="hidden" id="HiddenGeoLng" value="<%=CurrentContent.GeoLng %>" /> 
```

然后脚本文件

```
$(window).load(function () {
initialize();
});
function initialize() {
    var jeudanStyles = [{ featureType: "all", elementType: "all", stylers: [{ saturation: -99}]}];

var jeudanMapType = new google.maps.StyledMapType(jeudanStyles,
        { name: "Jeudan" });

var myOptions = {
    zoom: 16,
    disableDefaultUI: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
        position: google.maps.ControlPosition.BOTTOM_CENTER
    },
    panControl: true,
    panControlOptions: {
        position: google.maps.ControlPosition.TOP_RIGHT
    },
    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
        position: google.maps.ControlPosition.LEFT_CENTER
    },
    scaleControl: false,
    scaleControlOptions: {
        position: google.maps.ControlPosition.BOTTOM_CENTER
    },
    streetViewControl: true,
    streetViewControlOptions: {
        position: google.maps.ControlPosition.BOTTOM_CENTER
    }
};
if (document.getElementById("rental_map_canvas") != null) {
    var map = new google.maps.Map(document.getElementById("rental_map_canvas"), myOptions);

    map.mapTypes.set('jeudan_map', jeudanMapType);
    map.setMapTypeId('jeudan_map');

    var locations = [
                { lat: 55.680884, lng: 12.581577, content: '<div class="jeudanparkering">Addresse: Gammel M&oslash;nt 1 - 3<br />Mandag - l&oslash;rdag 06.30-21.00.<br /><a href="../priser-og-aabningstider/">Mere info...</a></div>' }
            ];
    var marker, i;

    var image = new google.maps.MarkerImage('/images/maps-logo-small.png', new google.maps.Size(35, 40), new google.maps.Point(0, 0), new google.maps.Point(35, 40));
    var shadow = new google.maps.MarkerImage('/images/maps-logo-shadow-small.png', new google.maps.Size(74, 37), new google.maps.Point(0, 0), new google.maps.Point(34, 37));
    var shape = {
        coord: [1, 1, 1, 40, 35, 40, 35, 1],
        type: 'poly'
    };

    var infowindow = new google.maps.InfoWindow();

    for (i = 0; i < locations.length; i++) {

        marker = new google.maps.Marker({
            position: new google.maps.LatLng($("#HiddenGeoLat").val(), $("#HiddenGeoLng").val()), /*new google.maps.LatLng(locations[i].lat, locations[i].lng),*/
            map: map,
            shadow: shadow,
            icon: image,
            animation: google.maps.Animation.DROP,
            shape: shape
        });

        marker.content = locations[i].content;

        google.maps.event.addListener(marker, 'click', function () {
            infowindow.setContent(this.content);
            infowindow.open(map, this);
        });
        map.setCenter(marker.position);
    }
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:27:07.253

You need to call `google.maps.event.trigger(map, 'resize');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:51:10.250

```
$("#liKort").click(function () {
        google.maps.event.trigger(map, 'resize');
        map.setCenter(marker.position);
    }); 
```

# html - 在 Gitweb 中查看 html

> ID：12283042
> 
> 赞同：8
> 
> 时间：2012-09-05T13:52:08.863
> 
> 标签：html, git, browser, tree, gitweb

通过它的**树形**视图，Gitweb 是一个在文件系统级别浏览存储库内容的好工具。如果存储库中有文件，则可以轻松地使用浏览器查看/打开它们 - 只需单击它们。问题是，如果这些是引用其他资源（图片、javascript 等）的“html”文件，浏览器无法找到它们，因为尽管它们在存储库中可用，并且也可以通过 Gitweb 的“树”视图访问——但它们不是(Git) web 服务器在预期的位置提供服务。

愚蠢的问题：如果 html 文件本身和所有引用的内容都存在，是否有可能将 Gitweb 配置为执行某种魔术 URL 重写或其他任何能够完全查看 html 文件及其所有引用的内容？

我其实不这么认为。

当前的解决方法：目前我只是`clone/check-out`将 git 存储库放入由 Web 服务器提供服务的目录中。可以，但是每当有人想查看较旧的提交级别时，我都必须签出另一个`commit-id`. 仅浏览文件和提交级别的灵活性消失了。另外，想要使用此解决方法的人必须能够使用 git。人们还必须知道另一个 URL 才能真正看到存储库中的内容。

问题：有没有人看到更灵活的解决方法？

# c# - 在 TouchDown 事件上动态创建上下文菜单

> ID：12283044
> 
> 赞同：1
> 
> 时间：2012-09-05T13:52:22.760
> 
> 标签：c#, wpf, xaml

我正在创建一个在地图上显示图标的触摸应用程序。我的要求是在触摸图标上显示一些选项（如移动、删除）。实现这一目标的最佳方法是什么？

我非常接近完成这个应用程序所以任何帮助将不胜感激。

# c# - 从代码创建应用程序并从 xaml 加载资源字典

> ID：12283050
> 
> 赞同：1
> 
> 时间：2012-09-05T13:52:46.343
> 
> 标签：c#, .net, wpf, xaml, resourcedictionary

这可能是一个非常愚蠢的问题，但我现在根本无法理解这个问题。

我有一个定义应用程序级资源的 App.xaml 文件：

```
<Application x:Class="WpfMPManager.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"             
         StartupUri="MainWindow.xaml">
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="MyDictionnary.xaml"/>                   
    </ResourceDictionary>
</Application.Resources> 
```

由于各种原因，我通过这样的 .cs 文件启动此应用程序（实际上，此文件中还有很多内容）。

```
 [STAThread]
    static void Main(params string[] args)
    {
        App myApp = new App();
        MainWindow myWindow = new MainWindow();
        myApp.Run(myWindow);
     } 
```

但是，当我以这种方式启动应用程序时，我的应用程序资源字典是空的（如果我通过 App.xml 启动应用程序，它们确实会被填满）。

我应该调用 Application 对象上的特定方法来强制它加载 .xaml 文件中定义的资源字典吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:58:58.653

回答我自己的问题，以防有人偶然发现

似乎调用`myApp.InitializeComponent()`默认构造函数未调用的就足够了。本来可以更快地想出来的。

# actionscript-3 - 事件监听器可以从另一个函数内部调用一个函数吗？

> ID：12283052
> 
> 赞同：0
> 
> 时间：2012-09-05T13:52:50.483
> 
> 标签：actionscript-3, flash

这个可以吗？？

```
stage.addEventListener(TouchEvent.TOUCH_END, finish);

private function new(e:TouchEvent):void {

     function finish(e:TouchEvent):void {

     }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:15:52.723

首先，strille 是对的，您的 finish() 函数应该位于 new() 函数之外。您要传输的变量可以存储在对象的属性中，然后在您的 finish() 函数中引用它们。另外，我不敢将您的函数命名为“新”，因为它在 Actionscript 3 中已经有意义。

```
private function newTouch(e:TouchEvent):void {
    touchedAtX=e.localX;
    touchedAtY=e.localY;
    // store more if you want to
}

private function finish(e:TouchEvent):void {
    // here you can use your touchedAtX and touchedAtY stored values, 
    // as well as anything else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:56:57.623

不，内部 finish() 函数在外部 new() 函数之外不可用/不可见。问题是为什么finish() 需要在new() 中定义，并且不能驻留在它之外？

```
private function new(e:TouchEvent):void {
   finish(e);
}

private function finish(e:TouchEvent):void {

} 
```

# c# - 在桌面上绘制的矩形在 C# 中不是持久的

> ID：12283057
> 
> 赞同：1
> 
> 时间：2012-09-05T13:53:06.350
> 
> 标签：c#

> **可能重复：**
> [如何在 C# 中有效地在桌面上绘图？](https://stackoverflow.com/questions/2905783/how-to-effectively-draw-on-desktop-in-c)

我正在尝试使用以下代码在桌面上绘制一个矩形，但是在刷新屏幕或打开任何其他窗口时，正在绘制的矩形会被擦除。我遵循以下代码：

```
class Program {

    [DllImport("User32.dll")]
    static extern IntPtr GetDC(IntPtr hwnd);

    [DllImport("User32.dll")]
    static extern void ReleaseDC(IntPtr dc);

    static void Main(string[] args) {
        IntPtr desktop = GetDC(IntPtr.Zero);
        using (Graphics g = Graphics.FromHdc(desktop)) {
            g.FillRectangle(Brushes.Red, 0, 0, 100, 100);
        }
        ReleaseDC(desktop);
    }
} 
```

有什么方法可以解决我的问题，以便绘制的矩形会持续存在？...有人，请告诉我解决方法。提前致谢。

# algorithm - 如何获得二叉树（不是二叉搜索树）的后序遍历，仅给出其中序遍历

> ID：12283058
> 
> 赞同：0
> 
> 时间：2012-09-05T13:53:15.950
> 
> 标签：algorithm, binary-tree, inorder, postorder

我给出了**二叉树**（不是*二叉搜索树）***的有序遍历**的结果：

 *****E、D、B、A、G、F、H、C**

现在我必须找出给定有序遍历的同一棵树的**后序***遍历*结果。

任何人都可以为此建议我任何算法吗？

PS：有没有办法从*有序*结果中勾勒出树本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:01:23.197

你不能那样做。您的示例可能代表多棵树，例如：

```
E                       D
 \                     / \
  D                   E   B
   \                       \
    B                       A
     \                       \
      A                       G                          ...
       \                       \
        G                       F
         \                       \
          F                       G
           \                       \
            H                       C
             \
              C 
```

重建树至少需要两个命令，只有当你手头有树时才能下命令。***

# xml - cXML 文件的 XSD

> ID：12283059
> 
> 赞同：1
> 
> 时间：2012-09-05T13:53:18.423
> 
> 标签：xml, xsd, e-commerce

我想知道是否有人可以帮助我找到 cXML 文件的 XSD（用于 ariba 打孔电子商务交易）。

最好的问候， 史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:58:55.347

cXML 有 DTD，但没有定义 XSD。cXML DTD 可以从[http://www.sagehill.net/livedtd/cxml/cXML.dtd.html下载](http://www.sagehill.net/livedtd/cxml/cXML.dtd.html)

取自他们的用户指南

基本 cXML 文档 - [http://xml.cXML.org/schemas/cXML/](http://xml.cXML.org/schemas/cXML/) /cXML.dtd

确认和发货通知 - [http://xml.cXML.org/schemas/cXML/](http://xml.cXML.org/schemas/cXML/) /Fulfill.dtd

发票 - [http://xml.cXML.org/schemas/cXML/](http://xml.cXML.org/schemas/cXML/) /InvoiceDetail.dtd

类型定义 - [http://xml.cXML.org/schemas/cXML/](http://xml.cXML.org/schemas/cXML/) /Catalog.dtd

付款汇款 - [http://xml.cXML.org/schemas/cXML/](http://xml.cXML.org/schemas/cXML/) /PaymentRemittance.dtd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:59:07.250

您可以使用[XMLPad](http://www.wmhelp.com/)等工具自己将 cXML DTD 转换为模式。我发现它是最准确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T09:53:45.780

不幸的是，我知道的任何 dtd2xsd 转换器都无法正确进行此转换（cxml.dtd 到 cxml.xsd）。如果有人能做到 - 写下如何。我需要 xsf 文件来生成 java 类（xjc 不能从已发布的 dtd 文件中完成）。

# silverlight - 一个 IIS 网站上的 Silverlight 项目

> ID：12283061
> 
> 赞同：0
> 
> 时间：2012-09-05T13:53:35.227
> 
> 标签：silverlight, xap

我有 silverlight 项目，这个项目正在 IIS 中部署。但在解决方案中，我使用 .Web 项目创建了另外两个 SL 项目。我无法在网站（IIS）中部署这些项目的问题。我怎么能做到这一点？我怎么能做到这个 xaps 和 dll 对项目是可见的？在这两个项目中，我也有 wcf 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:38:06.523

如果您有多个网页并且每个网页都有自己的 silverlight xap，您可以在 IIS 中设置要查看的默认网页，然后在网页中放置某种导航（链接或重定向），以便您查看其他网页。

# android - java.lang.IndexOutOfBoundsException：索引 0 无效，大小为 0

> ID：12283063
> 
> 赞同：0
> 
> 时间：2012-09-05T13:53:38.083
> 
> 标签：android, sqlite, cursor, android-asynctask

我有一个大问题，我正在尝试从列表中的数据库获取数据，这是我的代码：

```
private class LoadData extends AsyncTask<Void, Void, Void> { 
    private ProgressDialog progressDialog;  
    @Override

    protected void onPreExecute() {

    CharSequence contentTitle = getString(R.string.loading);
    this.progressDialog = ProgressDialog.show(TabFreeBooksActivity.this,"",contentTitle);   
    }
    @Override
    protected void onPostExecute(final Void unused) {  
        this.progressDialog.dismiss();  
        showoffreebooks();

    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub  
        // HTTP post
        sharedPreference3 = getSharedPreferences(downnplace, 0);
        downoptionplace = sharedPreference3.getString("downloadflagplace","internal");
        Cursor bokgids = ggp.gids();
        do{

            allgids.add(bokgids.getString(0));

        }
        while(bokgids.moveToNext());
        for(int o=0;o<allgids.size();o++)
        {

        ggp.unupdatduplicate(allgids.get(o));   
        System.out.println("allgids2: "+allgids.get(o));
        System.out.println("ggg: "+ggp.unupdatduplicate(allgids.get(o)));
        }

        getoffrecentbooks();        

        return null;

    }

} 
```

AsyncTask 的调用是：

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.demo);
    frboks= new DAOfreeboks(this);
    ggp= new DAOgroup(this);
    sharedPreference3 = getSharedPreferences(downnplace, 0);
    downoptionplace = sharedPreference3.getString("downloadflagplace","internal");
    Cursor bokgids = ggp.gids();
    do{
        allgids.add(bokgids.getString(0));
    }
    while(bokgids.moveToNext());

    for(int o=0;o<allgids.size();o++)
    {       
        ggp.unupdatduplicate(allgids.get(o));   
    }
    if(isNetworkConnected(this))
    {
        connection=true;
    }else 
    {
        connection=false;
    }

    new LoadData().execute();

} 
```

这是 showoffreebooks() 函数的实现：

```
public void showoffreebooks()
{
     undelFREEBNME.clear();
     undelFREEAUTHNME.clear();
     undelFREEBCOVNME.clear();
     undelFREEbokprice.clear();
     undelFREEbokabout.clear();
     undelFREEbokpth.clear();
     undelFREEbokid.clear();
     undelFREEbokdel.clear();
     undelFREEbokgrp.clear();

     for(int  i=0;i<allFREEbokdel.size();i++)
    {
        ////////////////check my books if it's marked as deleted//////////////
        if(allFREEbokdel.get(i).equalsIgnoreCase("false"))
        {
            undelFREEBNME.add(allFREEBNME.get(i));
            undelFREEbokid.add(allFREEbokid.get(i));
            undelFREEAUTHNME.add(allFREEAUTHNME.get(i));
            undelFREEBCOVNME.add(allFREEBCOVNME.get(i));
            undelFREEbokpth .add(allFREEbokpth.get(i));
            undelFREEbokgrp.add(allFREEbokgrp.get(i));

        }
    }

     System.out.println("undelFREEBNME.size: "+undelFREEBNME.size());
     System.out.println("undelFREEBNME.size2: "+undelFREEBNME);

 for(int i=0;i<undelFREEBNME.size();i++)
    {
        /////////////check if it's in a group of books or not////////////
        if(undelFREEbokgrp.get(i).equalsIgnoreCase("0"))
        { 

            GETFREEBNME.add(undelFREEBNME.get(i));
            GETFREEbokid.add(undelFREEbokid.get(i));
            GETFREEBCOVNME.add(undelFREEBCOVNME.get(i));
            GETFREEbokgrp.add(undelFREEbokgrp.get(i));
            GETFREEbokpth .add(undelFREEbokpth.get(i));
            GETFREEAUTHNME.add(undelFREEAUTHNME.get(i));

        }
        else
        {
            offlinegetgroupboks(undelFREEbokgrp.get(i));

            if(offfrgdbct.get(i).equals("false"))  // it tells me the Exception is here 
            {
                GETFREEBCOVNME.add(offfrgcov.get(0));
                GETFREEbokid.add(offfrgid.get(0));
                GETFREEBNME.add(offfrgnme.get(0));
                GETFREEbokgrp.add(undelFREEbokgrp.get(i));
                GETFREEbokpth .add(undelFREEbokpth.get(i));
                GETFREEAUTHNME.add(undelFREEAUTHNME.get(i));

                updatedublicate(undelFREEbokgrp.get(i));
            }

        }
    } 
```

offlinegetgroupboks(String id)函数的实现：

```
 public void offlinegetgroupboks(String id) {

        try{
            offfrgcov.clear();
            offfrgnme.clear();
            offfrgid.clear();
            offfrgdbct.clear();
            Cursor bookslist = ggp.fetchAlldata(id);

            if( bookslist != null ){

            do{
                offfrgcov.add(bookslist.getString(0));
                offfrgnme.add(bookslist.getString(1));
                offfrgid.add(bookslist.getString(2));
                offfrgdbct.add(bookslist.getString(3));

            }
            while(bookslist.moveToNext());
            }

        }catch(Exception e){
            e.printStackTrace();    
        }

    } 
```

但它给了我以下例外：

```
09-05 22:34:12.554: E/AndroidRuntime(733): FATAL EXCEPTION: main
09-05 22:34:12.554: E/AndroidRuntime(733): java.lang.IndexOutOfBoundsException: Invalid index 2, size is 1
09-05 22:34:12.554: E/AndroidRuntime(733):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
09-05 22:34:12.554: E/AndroidRuntime(733):  at java.util.ArrayList.get(ArrayList.java:311)
09-05 22:34:12.554: E/AndroidRuntime(733):  at cx.hell.android.pdfview.TabFreeBooksActivity.showoffreebooks(TabFreeBooksActivity.java:382)
09-05 22:34:12.554: E/AndroidRuntime(733):  at cx.hell.android.pdfview.TabFreeBooksActivity$LoadData.onPostExecute(TabFreeBooksActivity.java:191)
09-05 22:34:12.554: E/AndroidRuntime(733):  at cx.hell.android.pdfview.TabFreeBooksActivity$LoadData.onPostExecute(TabFreeBooksActivity.java:1)
09-05 22:34:12.554: E/AndroidRuntime(733):  at android.os.AsyncTask.finish(AsyncTask.java:417)
09-05 22:34:12.554: E/AndroidRuntime(733):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
09-05 22:34:12.554: E/AndroidRuntime(733):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
09-05 22:34:12.554: E/AndroidRuntime(733):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 22:34:12.554: E/AndroidRuntime(733):  at android.os.Looper.loop(Looper.java:123)
09-05 22:34:12.554: E/AndroidRuntime(733):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-05 22:34:12.554: E/AndroidRuntime(733):  at java.lang.reflect.Method.invokeNative(Native Method)
09-05 22:34:12.554: E/AndroidRuntime(733):  at java.lang.reflect.Method.invoke(Method.java:521)
09-05 22:34:12.554: E/AndroidRuntime(733):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-05 22:34:12.554: E/AndroidRuntime(733):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-05 22:34:12.554: E/AndroidRuntime(733):  at dalvik.system.NativeStart.main(Native Method) 
```

有人可以帮忙吗？先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:03:01.783

由于行号不存在，因此很难准确说出您失败的位置：您应该显示精确的第 382 行。但是，您在以下代码块中有这段代码`showoffreebooks`：

```
 undelFREEBNME.add(allFREEBNME.get(i));
            undelFREEbokid.add(allFREEbokid.get(i));
            undelFREEAUTHNME.add(allFREEAUTHNME.get(i));
            undelFREEBCOVNME.add(allFREEBCOVNME.get(i));
            undelFREEbokpth .add(allFREEbokpth.get(i));
            undelFREEbokgrp.add(allFREEbokgrp.get(i)); 
```

您假设 , `allFREEBNME`, `allFREEbokid`, `allFREEAUTHNME`,`allFREEBCOVNME`和`allFREEbokpth`的`allFREEbokgrp`大小都与 完全相同`allFREEbokdel`。显然，事实并非如此。在调用之前检查这些变量的大小`get`。

# c# - 将小数序列化为 JSON，如何四舍五入？

> ID：12283070
> 
> 赞同：28
> 
> 时间：2012-09-05T13:53:54.817
> 
> 标签：c#, json, javascriptserializer

我有一堂课

```
public class Money
{
    public string Currency { get; set; }
    public decimal Amount { get; set; }
} 
```

并希望将其序列化为 JSON。如果我使用`JavaScriptSerializer`我得到

```
{"Currency":"USD","Amount":100.31000} 
```

由于 API 我必须符合需要最多两位小数的 JSON 数量，我觉得应该可以以某种方式改变`JavaScriptSerializer`序列化小数字段的方式，但我不知道如何。您可以在构造函数中传递[SimpleTypeResolver](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.simpletyperesolver.aspx)，但据我所知，它仅适用于类型。您可以通过 RegisterConverters(...) 添加的[JavaScriptConverter](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptconverter.aspx)似乎是为`Dictionary`.

我想得到

```
{"Currency":"USD","Amount":100.31} 
```

在我序列化之后。此外，更改为 double 是不可能的。我可能需要做一些四舍五入（100.311 应该变成 100.31）。

有谁知道如何做到这一点？是否有替代方法`JavaScriptSerializer`可以让您更详细地控制序列化？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-23T15:26:46.503

到目前为止，我对实现这一目标的所有技术并不完全满意。JsonConverterAttribute 似乎是最有前途的，但我无法忍受硬编码的参数和每个选项组合的转换器类的激增。

所以，我提交了一个[PR](https://github.com/JamesNK/Newtonsoft.Json/pull/377)，增加了将各种参数传递给 JsonConverter 和 JsonProperty 的能力。它已被上游接受，我预计将在下一个版本中发布（无论是 6.0.5 之后的下一个版本）

然后你可以这样做：

```
public class Measurements
{
    [JsonProperty(ItemConverterType = typeof(RoundingJsonConverter))]
    public List<double> Positions { get; set; }

    [JsonProperty(ItemConverterType = typeof(RoundingJsonConverter), ItemConverterParameters = new object[] { 0, MidpointRounding.ToEven })]
    public List<double> Loads { get; set; }

    [JsonConverter(typeof(RoundingJsonConverter), 4)]
    public double Gain { get; set; }
} 
```

有关示例，请参阅[CustomDoubleRounding()测试。](https://github.com/JamesNK/Newtonsoft.Json/blob/12c33e70d25370f68e02f78317a4e71b47e3ae49/Src/Newtonsoft.Json.Tests/JsonConvertTest.cs#L1137)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-12T08:51:19.727

为了将来参考，这可以通过创建自定义在 Json.net 中非常优雅地实现[`JsonConverter`](http://james.newtonking.com/json/help/html/T_Newtonsoft_Json_JsonConverter.htm)

```
public class DecimalFormatJsonConverter : JsonConverter
{
    private readonly int _numberOfDecimals;

    public DecimalFormatJsonConverter(int numberOfDecimals)
    {
        _numberOfDecimals = numberOfDecimals;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var d = (decimal) value;
        var rounded = Math.Round(d, _numberOfDecimals);
        writer.WriteValue((decimal)rounded);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue,
        JsonSerializer serializer)
    {
        throw new NotImplementedException("Unnecessary because CanRead is false. The type will skip the converter.");
    }

    public override bool CanRead
    {
        get { return false; }
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(decimal);
    }
} 
```

如果您在代码中显式使用构造函数创建序列化程序，这将正常工作，但我认为用 装饰相关属性会更好[`JsonConverterAttribute`](http://james.newtonking.com/json/help/html/T_Newtonsoft_Json_JsonConverterAttribute.htm)，在这种情况下，类必须有一个公共的、无参数的构造函数。我通过创建一个特定于我想要的格式的子类来解决这个问题。

```
public class SomePropertyDecimalFormatConverter : DecimalFormatJsonConverter
{
    public SomePropertyDecimalFormatConverter() : base(3)
    {
    }
}

public class Poco 
{
    [JsonConverter(typeof(SomePropertyDecimalFormatConverter))]
    public decimal SomeProperty { get;set; }
} 
```

自定义转换器源自[Json.NET 文档](http://james.newtonking.com/json/help/index.html?topic=html/CustomJsonConverter.htm)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-06T12:47:05.110

我刚刚遇到了同样的麻烦，因为我用 1.00 序列化了一些小数，而用 1.0000 序列化了一些小数。这是我的改变：

创建一个可以将值四舍五入为小数点后四位的 JsonTextWriter。然后每个小数将四舍五入为 4 位小数：1.0 变为 1.0000，1.0000000 也变为 1.0000

```
private class JsonTextWriterOptimized : JsonTextWriter
{
    public JsonTextWriterOptimized(TextWriter textWriter)
        : base(textWriter)
    {
    }
    public override void WriteValue(decimal value)
    {
        // we really really really want the value to be serialized as "0.0000" not "0.00" or "0.0000"!
        value = Math.Round(value, 4);
        // divide first to force the appearance of 4 decimals
        value = Math.Round((((value+0.00001M)/10000)*10000)-0.00001M, 4); 
        base.WriteValue(value);
    }
} 
```

使用您自己的作家而不是标准作家：

```
var jsonSerializer = Newtonsoft.Json.JsonSerializer.Create();
var sb = new StringBuilder(256);
var sw = new StringWriter(sb, CultureInfo.InvariantCulture);
using (var jsonWriter = new JsonTextWriterOptimized(sw))
{
    jsonWriter.Formatting = Formatting.None;
    jsonSerializer.Serialize(jsonWriter, instance);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-05T14:36:04.447

在第一种情况下`000`没有害处，该值仍然是相同的，并将被反序列化为完全相同的值。

在第二种情况下，JavascriptSerializer 不会帮助你。`JavacriptSerializer`不应该更改数据，因为它将数据序列化为众所周知的格式，它不提供成员级别的数据转换（但它提供自定义对象转换器）。您想要的是转换+序列化，这是一个两阶段的任务。

两个建议：

1）使用`DataContractJsonSerializer`：添加另一个对值进行四舍五入的属性：

```
public class Money
{
    public string Currency { get; set; }

    [IgnoreDataMember]
    public decimal Amount { get; set; }

    [DataMember(Name = "Amount")]
    public decimal RoundedAmount { get{ return Math.Round(Amount, 2); } }
} 
```

2）克隆对象四舍五入的值：

```
public class Money 
{
    public string Currency { get; set; }

    public decimal Amount { get; set; }

    public Money CloneRounding() {
       var obj = (Money)this.MemberwiseClone();
       obj.Amount = Math.Round(obj.Amount, 2);
       return obj;
    }
}

var roundMoney = money.CloneRounding(); 
```

我猜[json.net](http://james.newtonking.com/projects/json-net.aspx)也不能​​做到这一点，但我不是 100% 确定。

# django - Django-registration - 不完整的东西

> ID：12283071
> 
> 赞同：0
> 
> 时间：2012-09-05T13:53:58.063
> 
> 标签：django, django-registration, django-profiles

我正在使用 django-registration 和 django-profiles 并在确认注册后，当我尝试访问该页面时遇到 404 `http://example.com/profiles/fox/`-

我在 debug_toolbar 中看到了所有已进行的查询，并在我在设置中定义的表上看到了一个`AUTH_PROFILE_MODULE = 'tglr.UserProfile'`- 此模型上的查询返回......什么也没有。

看起来注册确认没有完成它的工作。

我想念什么？

感谢您的帮助

问候

**编辑**：如果我在 UserProfile 表中添加丢失的记录一切顺利 - 这似乎确实证实了我遇到的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:41:28.907

这听起来像在您注册用户时没有创建 UserProfile 记录。 Django 手册中[有关用户配置文件的页面](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)`post_save`详细说明了信号如何在创建用户时自动插入 UserProfile 记录。具体来说，尝试在你的用户模型附近添加这个：

```
# FROM THE ABOVE LINK: 
# in models.py
from django.db.models.signals import post_save

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

# android - Galaxy Tab 2 上的 Android ViewPager 性能

> ID：12283074
> 
> 赞同：4
> 
> 时间：2012-09-05T13:54:08.697
> 
> 标签：android, performance, tabs, android-viewpager, galaxy

我有一个使用 Android ViewPager 的应用程序（7 个视图，图像和动画非常复杂）。这个应用程序在我的 Asus Eee Pad 上运行得非常好。这真是太棒了。

我还有一个 Galaxy Tab 2 10.1，它几乎无法运行该应用程序……尽管它是全新的，理论上比我的 EEE Pad 更强大。我想提一下两个终端都运行 Android 4.0.3 并且它们的屏幕尺寸相同（1280x800）。应用程序以横向模式运行。

该应用程序不使用 sql 或 Internet 访问，只是不同视图上的动画和 ViewPager 的滑动效果。

我检查了我认为的一切，从堆，从 lint，从基本上所有可用的分析工具，但似乎没有任何东西可以提高我在 Galaxy Tab 2 上的 UI 性能......我想知道最终硬件是否没有区别，华硕将使用 GPU 渲染 UI，而 Galaxy Tab 2 将使用其 CPU……

最后我想知道，如果你们中的任何人在比较多个目标上的应用行为时注意到 Galaxy Tab 或其他平板电脑上的一些类似问题......

干杯! 保罗

**--- 9 月 6 日添加 ---**

好吧，看起来，尽管 Galaxy 平板电脑应该使用硬件加速，但它没有。当我用`android:layerType="hardware"`and强制每个 xml 布局时

```
v.setLayerType(View.LAYER_TYPE_HARDWARE, null);
     ObjectAnimator oaAlpha = ObjectAnimator.ofFloat(v, "alpha",0f, 1f); 
```

它终于工作得更好了......即使它不像华硕那样流畅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T22:27:43.820

最后，我发现——这真的很奇怪——性能问题是由字体大小太高造成的！？！

这是一次悲伤的经历……但由于某些愚蠢的原因，Galaxy Tab 2.0 在渲染用大号字母书写的文本时遇到了重大问题。它与 Galaxy Tabs 相关（所以我想是硬件），因为我尝试过使用较小的字体重新设计您的应用程序，并且不要忘记向三星投诉。

# php - 在 Guzzle 中以编程方式构建查询字符串？

> ID：12283075
> 
> 赞同：12
> 
> 时间：2012-09-05T13:54:09.050
> 
> 标签：php, guzzle

在我的 PHP [Guzzle](http://guzzlephp.org)客户端代码中，我有类似的东西

```
$c = new Client('http://test.com/api/1.0/function');

$request = $c->get('?f=4&l=2&p=3&u=5'); 
```

但相反，我想要类似的东西：

```
$request->set('f', 4);
$request->set('l', 2);
$request->set('p', 3);
$request->set('u', 5); 
```

在 Guzzle 中可以吗？从文档和随机谷歌搜索来看，似乎是这样，但我找不到确切的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T13:59:22.580

你可以：

```
$c = new Client('http://test.com/api/1.0/function');

$request = $c->get();

$q = $request->getQuery();

$q->set('f', 4);
$q->set('l', 2);
$q->set('p', 3);
$q->set('u', 5); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-12T10:16:25.730

Guzzle 6 - 您可以使用查询选项参数

```
// Send a GET request to /get?foo=bar
$client->request('GET', '/get', ['query' => ['foo' => 'bar']]); 
```

[http://docs.guzzlephp.org/en/stable/request-options.html#query](http://docs.guzzlephp.org/en/stable/request-options.html#query)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-11-26T11:41:11.507

看看 Guzzle 文档[https://docs.guzzlephp.org/en/stable/request-options.html](https://docs.guzzlephp.org/en/stable/request-options.html) 如您所见，它具有 RequestOptions。RequestOptions 是常量。它们在 GuzzleHttp\RequestOptions 中定义。您可以查看类源代码并在此处查看所有这些源代码。因此，为了保持良好和专业的编程风格，您可以在下面编写以下源代码，例如

```
use GuzzleHttp\Client;
use GuzzleHttp\RequestOptions;

class DataClass extends BaseClass
{
    const DEFAULT_ACCEPT_HEADER = 'application/json';
    const DEFAULT_CACHE_HEADER = 'no-cache';
    const HOST = 'http://test.com/';
    const ENDPOINT = 'api/1.0/function';
    const TIMEOUT = 2.0;

    private function getData()
    {

        $client = new Client([
                'base_uri' => self::HTTP_HOST,
                'timeout' => self::TIMEOUT
            ]
        );

        $response = $client->request('GET', self::ENDPOINT,
            [
                RequestOptions::HEADERS => [
                    'Accept' => self::DEFAULT_ACCEPT_HEADER,
                    'Cache-Control' => self::DEFAULT_CACHE_HEADER,
                ],
                RequestOptions::QUERY => [
                        'f' => 4,
                        'l' => 2,
                        'p' => 3,
                        'u' => 5
                ]
            ]
        );

        return json_decode($response->getBody(), JSON_OBJECT_AS_ARRAY);
    } 
```

# regex - 使用正则表达式读取文本文件并存储到结构中

> ID：12283078
> 
> 赞同：1
> 
> 时间：2012-09-05T13:54:13.173
> 
> 标签：regex, matlab, struct, io

我大家，

我正在尝试将文本文件解析为 matlab：它由几个块（START_BLOCK/END_BLOCK）组成，其中分配了字符串（变量）和值（与先前的变量相关联）。

一个例子是这样的：

```
START_BLOCK_EXTREMEWIND
velocity_v1 29.7

velocity_v50    44.8

velocity_vred1  32.67
velocity_vred50 49.28

velocity_ve1    37.9

velocity_ve50   57

velocity_vref   50

END_BLOCK_EXTREMEWIND 
```

目前，我的代码是：

```
fid = fopen('test_struct.txt','rt');
C = textscan(fid,'%s %f32 %*[^\n]','CollectOutput',true);
C{1} = reshape(C{1},1,numel(C{1}));
C{2} = reshape(C{2},1,numel(C{2}));

startIdx = find(~cellfun(@isempty, regexp(C{1}, 'START_BLOCK_', 'match')));
endIdx = find(~cellfun(@isempty, regexp(C{1}, 'END_BLOCK_', 'match')));
assert(all(size(startIdx) == size(endIdx)))
extract_parameters = @(n)({C{1}{startIdx(n)+1:endIdx(n) - 1}});
parameters = arrayfun(extract_parameters, 1:numel(startIdx), 'UniformOutput', false);

s = cell2struct(cell(size(parameters{1})),parameters{1}(1:numel(parameters{1})),2);

s.velocity_v1 = C{2}(2);
s.velocity_v50 = C{2}(3);
s.velocity_vred1 = C{2}(4);
s.velocity_vred50 = C{2}(5);
s.velocity_ve1 = C{2}(6);
s.velocity_ve50 = C{2}(7);
s.velocity_vref = C{2}(8); 
```

它有效，但它绝对是静态的。我宁愿有一个代码能够：

```
1\. check the existence of blocks --> as already implemented;
2\. the strings are to be taken as fields of the structure;
3\. the numbers are meant to be the attributes of each field. 
```

最后，如果有多个块，则应该对这些块进行迭代以获得整个结构。这是我第一次接触结构编码，所以请耐心等待。

我提前感谢大家。

最亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:44:42.507

听起来您会想要使用动态字段名称。如果您有一个 struct `s`，一个存储字段名称的字符串`fieldName`，并`fieldVal`保存您要为该字段设置的值，那么您可以使用以下语法来执行分配：

```
s.(fieldName) = fieldVal; 
```

此 MATLAB[文档](http://www.mathworks.com/help/techdoc/matlab_prog/br1v5cc-1.html)提供了更多信息。

考虑到这一点，我采用了一种稍微不同的方法来解析文本。我用 for 循环遍历了文本。尽管在 MATLAB 中 for 循环有时不受欢迎（因为 MATLAB 针对矢量化操作进行了优化），但我认为在这种情况下它有助于使代码更简洁。此外，我的理解是，如果您必须使用`arrayfun`，那么用 for 循环替换它可能不会真正对性能造成太大影响。

以下代码将文本中的每个块转换为具有指定字段和值的结构。然后将这些生成的“块”结构添加到更高级别的“结果”结构。

```
fid = fopen('test_struct.txt','rt');
C = textscan(fid,'%s %f32 %*[^\n]','CollectOutput',true);
fclose(fid);

paramNames = C{1};
paramVals = C{2};

curBlockName = [];
inBlock = 0;
blockCount = 0;

%// Iterate through all of the entries in "paramNames".  Each block will be a
%// new struct that is then added to a high-level "result" struct.
for i=1:length(paramNames)
    curParamName = paramNames{i};
    isStart = ~isempty(regexp(curParamName, 'START_BLOCK_', 'match'));
    isEnd = ~isempty(regexp(curParamName, 'END_BLOCK_', 'match'));

    %// If at the start of a new block, create a new struct with a single
    %// field - the BlockName (as specified by the text after "START_BLOCK_"
    if(isStart)
        assert(inBlock == 0);
        curBlockName = curParamName(length('START_BLOCK_') + 1:end);
        inBlock = 1;
        blockCount = blockCount + 1;
        s = struct('BlockName', curBlockName);          

    %// If at the end of a block, add the struct that we've just populated to
    %// our high-level "result" struct.
    elseif(isEnd)
        assert(inBlock == 1);
        inBlock = 0;
        %// EDIT - storing result in "structure of structures"
        %//  rather than array of structs
        %// s_array(blockCount) = s;
        result.(curBlockName) = s;

    %// Otherwise, assume that we are inside of a block, so add the current
    %// parameter to the struct.
    else
        assert(inBlock == 1);
        s.(curParamName) = paramVals(i);
    end
end

%// Results stored in "result" structure 
```

希望这能回答你的问题......或者至少提供一些有用的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:19:25.107

我今天编辑了我的代码，现在它几乎可以正常工作：

```
clc, clear all, close all

%Find all row headers
fid = fopen('test_struct.txt','r');
row_headers = textscan(fid,'%s %*[^\n]','CommentStyle','%','CollectOutput',1);
row_headers = row_headers{1};
fclose(fid);

%Find all attributes
fid1 = fopen('test_struct.txt','r');
attributes = textscan(fid1,'%*s %s','CommentStyle','%','CollectOutput',1);
attributes = attributes{1};
fclose(fid1);

%Collect row headers and attributes in a single cell
parameters = [row_headers,attributes];

%Find all the blocks
startIdx = find(~cellfun(@isempty, regexp(parameters, 'BLOCK_START_', 'match')));
endIdx = find(~cellfun(@isempty, regexp(parameters, 'BLOCK_END_', 'match')));
assert(all(size(startIdx) == size(endIdx)))

%Extract fields between BLOCK_START_ and BLOCK_END_
extract_fields = @(n)(parameters(startIdx(n)+1:endIdx(n)-1,1));
struct_fields = arrayfun(extract_fields, 1:numel(startIdx), 'UniformOutput', false);

%Extract attributes between BLOCK_START_ and BLOCK_END_
extract_attributes = @(n)(parameters(startIdx(n)+1:endIdx(n)-1,2));
struct_attributes = arrayfun(extract_attributes, 1:numel(startIdx), 'UniformOutput', false);

for i = 1:numel(struct_attributes)
    s{i} = cell2struct(struct_attributes{i},struct_fields{i},1);
end 
```

现在，最后，我得到了一个可以满足我要求的结构单元。我想改进的唯一一点是：

```
- Give each structure the name of the respective block. 
```

有人有有价值的提示吗？

谢谢大家对我的支持。

问候，弗朗切斯科

# c# - How to make event: when definite tabpage in tabcontrol is chosen - treeview control become disable?

> ID：12283081
> 
> 赞同：0
> 
> 时间：2012-09-05T13:54:15.113
> 
> 标签：c#, .net, winforms, treeview, tabcontrol

像这样的东西：

```
private void secondTabPageInTabControl_Click(object sender, System.EventArgs e)
        {
           this.myTreeView.Enable = false; 
        } //then I chose other tabpages and it becomes enable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:20:07.167

请改用 TabControl 的 SelectedIndexChanged 事件。它会告诉您何时选择了新选项卡。使用与此类似的代码：

```
 private void tabControl1_SelectedIndexChanged(object sender, EventArgs e) {
        this.myTreeView.Enable = tabControl1.SelectedTab != tabPage2;
    } 
```

或按索引，可读性较差：

```
 private void tabControl1_SelectedIndexChanged(object sender, EventArgs e) {
        this.myTreeView.Enable = tabControl1.SelectedIndex != 1;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:27:32.840

另一种解决方案，但请注意，如果您使用太多标签页，这可能会变得臃肿：

```
 private void tabControl1_Selecting(object sender, TabControlCancelEventArgs e)
    {
        UpdateUI(e.TabPageIndex);    
    }

    public void UpdateUI(int index)
    {
        switch (index)
        { 
            case 0:
                treeView1.Enabled = true;
                break;
            case 1:
                treeView1.Enabled = false;
                break;
            case 2:
                treeView1.Enabled = false;
                break;
            default:
                treeView1.Enabled = false;
                break;
        }
    } 
```

# windows-runtime - 使用 RxUI 可以订阅 KeyDown 事件并根据条件阻止输入吗？

> ID：12283084
> 
> 赞同：0
> 
> 时间：2012-09-05T13:54:38.373
> 
> 标签：windows-runtime, system.reactive, reactiveui

我在 WinRt 项目中尝试使用 RxUI，只是看看我是否可以得到一些工作，我怀疑我正在做的不是一个有效的用例，但我想我会要求确定。

我有一个绑定到属性的文本框，我想订阅 keydown 事件并防止用户输入不适当的字符（在这种情况下，任何不是数字的字符）。由于使用 MVVM，我无法访问文本框本身，只能访问绑定值。

这还能做吗？- 订阅更改的属性然后撤消其输入似乎有点奇怪，如果它是不可取的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:33:52.860

这似乎是一个基于 UI 的问题，因此更松散耦合的方法是编写一个行为类（基本上是一个绑定事件的附加属性），并将其附加到相关的文本框。

通过这种方式，您可以主动过滤输入，并且没有特定于该文本框的代码隐藏。

可能的表示：

```
 <TextBox Text="{Binding...}"> 
               <Interaction:Interaction.Behaviors> 
                 <NumericTextBoxBehavior /> 
               </Interaction:Interaction.Behaviors> 
             </TextBox> 
```

看一下：

*   [行为模式](http://blogs.msdn.com/b/johngossman/archive/2008/05/07/the-attached-behavior-pattern.aspx)
*   [基于正则表达式过滤的文本框行为代码](http://wpfbehaviorlibrary.codeplex.com/SourceControl/changeset/view/07774e9acae5#WPFBehaviorLibrary/RegexTextBox/NumericTextBoxBehavior.cs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T19:53:36.260

仅仅因为您使用的是 MVVM，并不意味着您不能将代码放在 View Code-Behind 中。在这种情况下，我只会做最简单的事情：

```
theTextBox.PreviewKeyUp += (o,e) => {
    if (!IsValidKey(e.Key))  e.Handled = true;
}; 
```

如果你不关心，你也可以事后在 ViewModel 中过滤它，这可能会导致插入符号问题但更可测试：

```
this.WhenAny(x => x.SomeProp, x => x.Value)
    .Select(x => new { Filtered = FilterAllInvalidChars(x), Original = x} )
    .Where(x => x.Filtered != x.Original)
    .Subscribe(x => SomeProp = x.Filtered); 
```

# c - 无符号减去 32 位和 64 位之间的无符号差异

> ID：12283088
> 
> 赞同：12
> 
> 时间：2012-09-05T13:54:49.627
> 
> 标签：c, gcc, 32bit-64bit, unsigned

**情况：**
我有一段代码在编译为 32 位时有效，但在使用 gcc 4.6 编译为 64 位时失败。在确定问题并阅读标准后，我无法真正理解为什么它适用于 32 位。我希望有人能解释发生了什么。

**代码（稍微简化并减少到有趣的部分）：**

```
// tbl: unsigned short *, can be indexed with positive and negative values
// v: unsigned int
// p: unsigned char *
tmp = tbl[(v >> 8) - p[0]]; // Gives segfault when not compiled with -m32 
```

当使用`-m32`代码编译时。`-m32`在没有它的情况下编译时会出现段错误。段错误的原因是`(v >> 8) - p[0]`被解释为`unsigned int`当编译为 64 位时，“负”结果将是很远的。

根据[这个](https://stackoverflow.com/q/8026694/713554)问题，C99 标准规定如下：
6.2.5c9：`A computation involving unsigned operands can never overflow, because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting type.`

由此看来，`unsigned`减号`unsigned`总是会产生`unsigned`与 64 位情况下发生的情况一致的输出。这似乎不会发生在 32 位的情况下，这让我觉得非常奇怪。

谁能解释在 32 位的情况下发生了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T14:00:06.390

在这两种情况下，你都会得到一个非常大的数字，因为`unsigned int`环绕，但在 32 位的情况下，指针算法*也会*环绕，所以它抵消了。

为了进行指针运算，编译器将数组索引提升为与指针相同的宽度。因此，对于`unsigned`32 位指针，您会得到与`int`32 位指针相同的结果。

例如，

```
char *p = (char *) 0x1000;

// always points to 0x0c00
// in 32-bit, the index is 0xfffffc00
// in 64-bit, the index is 0xfffffffffffffc00
int r = p[(int) -0x400]; 

// depends on architecture
// in 32-bit, the index is 0xfffffc00 (same as int)
// in 64-bit, the index is 0x00000000fffffc00 (different from int)
int r = p[(unsigned) -0x400]; 
```

# cordova - PhoneGap 2.0.0 中的下载问题（出现文件传输错误）

> ID：12283095
> 
> 赞同：0
> 
> 时间：2012-09-05T13:55:09.840
> 
> 标签：cordova, phonegap-plugins

我已经从 Phonegap 1.5.0 更新到 2.0.0，面临下载问题。

这是我的下载功能：

```
function download(){
var ecodedurl = "http://finance.yahoo.com/d/quotes.csv?s=^NSEI+^NSEBANK&f=pl1";
      var remoteFile = encodeURI(ecodedurl);
      var localFileName = "temp.txt";
      var attachmentFileName = localFileName;
      window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
      fileSystem.root.getDirectory("Temp", {create: true, exclusive: false}, function(directoryEntry) {
       directoryEntry.getFile(localFileName, {create: true, exclusive: false}, function(fileEntry) {
        var localPath = fileEntry.fullPath;
       if (device.platform === "Android" && localPath.indexOf("file://") === 0) {
         localPath = localPath.substring(7);
                  }
                       var ft = new FileTransfer();
                     ft.download(remoteFile,
              localPath, function(entry) {
                           attachmentFileEntry = entry;
                 loadFileData(attachmentFileEntry);
                                                                                               }, fail);
                                                                                   }, fail);
                                                            }, fail);
                               }, fail);
      function fail(error) {
          //console.log(error.code);
          //alert("Error occured while downloading the attachment");
          navigator.notification.alert('Error occured while downloading the attachment. Please try again', alertConfirm);
      }

  }

  }

function loadFileData(allText) {
    console.log("loadFileData method:"+allText);
    console.log("allText URL:"+allText.toURL());
    var fileURL = allText.toURL().substring(7);
    console.log("URL:"+fileURL);
    $.ajax({
           type: "GET",
           url: fileURL,
           dataType: "text",
           success: function(data) {
           console.log("file loaded");
           processData(data);}
           }); 
```

获取文件传输错误：源 URL 不在白名单中：http: [//finance.yahoo.com/d/quotes.csv?](http://finance.yahoo.com/d/quotes.csv?s=) s= ^NSEI+^NSEBANK&f=pl1

已尝试将其包含在 phonegap.xml 文件中...它可以正常工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:30:41.173

如果是用于 iPhone 应用程序，则需要编辑 Cordova.plist，它在 xcode 中位于 Resources 下。编辑它（最好通过 xcode xml 编辑器 - 即只需单击它）。在 Extenrnal Hosts 下添加字符串项。在值上，设置您的站点，或 * 用于任何外部站点。

# javascript - 枚举附加到文档的 HTML 对象的所有事件

> ID：12283098
> 
> 赞同：3
> 
> 时间：2012-09-05T13:55:15.160
> 
> 标签：javascript, html, dom, dom-events, enumeration

经过大量的谷歌搜索后，我在这里询问是否可以枚举附加到 DOM 中的 HTML 元素的所有事件。

例如：假设我的文档是

```
<body onscroll=docScrolled()>
    <span onmouseover=doSomethingElse()> Span is here </span>
    <div id="container">

    <script>
        $("#container").bind("click", doSomething);
</body> 
```

在我的文档被加载并执行了所有 javascript 代码之后，我想提供一个单击按钮，该按钮显示所有 HTML 元素和附加到它们的事件。

输出

```
<body onscroll=docScrolled()> ------ onscroll
<span onmouseover=doSomethingElse()> Span is here </span> -----onmouseover
<div id="container"> ------onclick 
```

所以最终的问题是如何枚举所有 HTML 元素并找出附加到它们的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:03:13.660

[这](http://james.padolsey.com/javascript/things-you-may-not-know-about-jquery/)是一个可能有帮助的页面。

此外，这段代码在您正在搜索的内容中做了一些事情：

```
// List bound events:
console.dir( $('#elem').data('events') );

// Log ALL handlers for ALL events:
$.each($('#elem').data('events'), function(i, event){
    $.each(event, function(i, handler){
        console.log( handler.toString() );
    });
}); 
```

**更新：** [https](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference) ://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference显示了 DOM 元素的事件列表。您应该创建一个函数来检查是否为任何事件分配了函数。

它会是这样的：

```
var events = ["onchange","onkeydown",...]

function hasEventsAssigned(elem) {
    for (var i = events.length; i > 0; i--) {
       if (elem[events.i]) {
           /* do something */
       }
    }
} 
```

# android - 多重选择时共享通过崩溃

> ID：12283102
> 
> 赞同：0
> 
> 时间：2012-09-05T13:55:36.283
> 
> 标签：android, android-gallery, multi-select, imageurl

我的应用程序可以通过 Gallery 的“剪切通过”选项来启动。在 Galaxy S2 4.03 上运行时，选择了一个以上的图像时，应用程序在尝试获取图像 url 时崩溃 -

```
uri = (Uri) bundle.get("android.intent.extra.STREAM"); 
```

如何解决？谢谢，埃亚尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:09:09.547

从[http://developer.android.com/training/sharing/receive.html](http://developer.android.com/training/sharing/receive.html)，您可能需要这样解析它：

```
ArrayList<Uri> imageUris = intent.getParcelableArrayListExtra(Intent.EXTRA_STREAM); 
```

# matlab - matlab和opencv灰度图像值不同

> ID：12283103
> 
> 赞同：1
> 
> 时间：2012-09-05T13:55:38.983
> 
> 标签：matlab, opencv

> **可能重复：**
> [同一图像的 OpenCV 和 MATLAB 灰度值不同](https://stackoverflow.com/questions/12282421/opencv-and-matlab-gray-scale-values-differ-for-the-same-image)

在matlab中，我读取了一个彩色视频，提取了某个帧并使用rgb2gray函数将其转换为灰度图像。但是当将相同的视频加载到openCV2.3.1并提取相同的帧然后转换为灰度时，它不会给出与matlab相同的灰度值？？？为什么??.这是带有openCV2.3.1 VideoCapture cap(0)的C++代码；cap.open("人类精子评估_0.avi"); 垫子图像；垫灰色（480,640，CV_8U）；

```
for(int i=0;i<513;i++)
{ 
   cap >> image; 
   cvtColor(image,gray,CV_RGB2GRAY);
} 

for(int i=0;i<20;i++)
{ 
    for(int j=0;j<20;j++) 
    { 
        cout<<(int)gray.at(i,j) << ' '; 
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T07:51:59.910

1.  OpenCV 默认使用 BGR 颜色格式。在这种情况下，您应该使用 CV_BGR2GRAY 模式。确保在使用 CV_RGB2GRAY 时确实有 RGB。

2.  从 RGB 转换为灰色可能因一种实现而异。图像处理软件存在一个常见错误，即在将通道与某些系数相加之前不补偿当前 RGB 颜色空间的伽马校正。如果您在 OpenCV 和 Matlab 结果中存在细微差别，这可能是问题所在。

# sql - 由于未知原因，由于 fk 约束而出现 sql 异常

> ID：12283104
> 
> 赞同：0
> 
> 时间：2012-09-05T13:55:41.157
> 
> 标签：sql, vb.net, tsql, stored-procedures

所以我得到的确切错误消息是：

> INSERT 语句与 FOREIGN KEY 约束“FK_featuredtype_featured”冲突。冲突发生在数据库“docphin”、表“dbo.featured”、列“featuredID”中。该语句已终止。”

我调用具有插入语句的 sp 的 vb 代码部分是：

```
If isChanged1.Checked Then
    lq.admin_RemoveFeatured(isChanged.featuredID1)
    lq.admin_AddFeatured(title1.Text, text1.Text, imageURL1.Text, login1.Checked, index1.Checked, mobile1.Checked, Integer.Parse(priority1.Text))

End If

If isChanged2.Checked Then
    lq.admin_RemoveFeatured(isChanged.featuredID2)
    lq.admin_AddFeatured(title2.Text, text2.Text, imageURL2.Text, login2.Checked, index2.Checked, mobile2.Checked, Integer.Parse(priority2.Text))

End If 
```

现在奇怪的是，当我在 sql server 中执行 admin_AddFeatured 时它工作正常。

admin_Remove精选：

```
CREATE PROCEDURE [dbo].[admin_RemoveFeatured] 
    -- Add the parameters for the stored procedure here
    @featuredID int
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    delete from featuredtype where featuredID= @featuredID
    delete from featured where featuredID= @featuredID

END

GO 
```

admin_Add精选：

```
CREATE PROCEDURE [dbo].[admin_AddFeatured] 
    -- Add the parameters for the stored procedure here
    @title varchar(500) , 
    @text varchar(MAX),
    @imageURL varchar(200),
    @loginPage bit,
    @indexPage bit,
    @mobilePage bit,
    @priority int
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

         -- Insert statements for procedure here
        insert into featured
        (title,text,imageURL, priority )
        values
        (@title,@text,@imageURL, @priority)

        insert into featuredtype
        (loginPage, indexPage, mobilePage)
        values
        (@loginPage, @indexPage, @mobilePage)

END

GO 
```

我一直在测试不同的解决方案，但我似乎无法理解这里可能出了什么问题。我唯一的想法是 ic 可能与我如何获取我插入删除的每个“功能”项目的 ID 字段有关。为此，我制作了一个模块：

```
Public Module isChanged
    Public featuredID1 As Integer
    Public featuredID2 As Integer
    Public featuredID3 As Integer
    Public featuredID4 As Integer
    Public featuredID5 As Integer
    Public featuredID6 As Integer
End Module 
```

然后，在页面加载 sub 中，我使用 sp 并读取 ID，例如：

```
 Dim lq2 As New lqDFDataContext
        Dim var = lq2.admin_GetFeatured().ToList()
        Dim i As Integer = 1

        For Each f In var
            If i = 1 Then
                isChanged.featuredID1 = f.featuredID
                title1.Text = f.title
                text1.Text = f.text
                imageURL1.Text = f.imageURL
                login1.Checked = f.loginPage
                index1.Checked = f.indexPage
                mobile1.Checked = f.mobilePage
                priority1.Text = Str(f.priority)
            End If

etc... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:01:10.367

你没有`featuredID`在`featuredType`表中设置

尝试这个

```
 select @featuredID = Scope_Identity()

   insert into featuredtype 
        (loginPage, indexPage, mobilePage,featuredID) 
        values 
        (@loginPage, @indexPage, @mobilePage, @featuredID) 
```

# c++ - 派生类中的模板存在问题

> ID：12283107
> 
> 赞同：1
> 
> 时间：2012-09-05T13:55:46.837
> 
> 标签：c++, qt, templates

我有一组用于为序列化准备数据的类。所有这些都是从基类派生的`cBase`，它不包含与问题相关的任何内容。

在派生类中有：

```
class cValue: public cBase
{
public:
    cValue(){}
    template< class T > void set( const T & value ){ data_ = value; }

protected:
    QVariant data_;
}; 
```

这是用于保存简单值（如字符串或数字）的类。这是一个表示对象的类（基本上可以包含“名称-值”对的东西：

```
class cObject: public cBase
{
public:
    cObject(){}

    void addAttribure( const QString & name, cBase * value )
    {
        if( attributes_.contains( name ) )
            delete attributes_[name];
        attributes_[name] = value;
    }

    template< class T > void addAttribure( const QString & name, const T & value )
    {
        cValue * tmp = new cValue();
        tmp->set( value );
        addAttribure( name, tmp );
    }
protected:
    QMap< QString, cBase * > attributes_;
}; 
```

这样做的目的是能够为已创建的对象`addAttribute(someName, someObject);`和原始值添加属性：`addAttribute("name", 42);`

现在，就这样，这段代码编译了。但是，如果我尝试创建这样的对象：

```
cValue *tmp = new cValue();
tmp->set( 42 );
cObject obj;
obj.addAttribure("The Answer", tmp); 
```

我收到以下错误：

```
/usr/include/qt4/QtCore/qvariant.h:429:12: error: 'QVariant::QVariant(void*)' is private
../../source/private/../include/MyClasses.h:36:51: error: within this context 
```

错误出现在声明函数`cValue`的行上。`set()`现在，如果我删除 的模板版本`addAttribute()`，并将该函数中完全相同的代码放入我的 main 中：

```
cObject obj;
cValue * tmp = new cValue();
tmp->set( 42 );
obj.addAttribure( "The Answer", tmp ); 
```

它工作正常。`addAttribute()`我认为这与 和函数都是模板化的事实有关`set()`，但我不明白如何解决这个问题，或者至少不明白如何解决这个问题。

*注意*：如果可能的话，我*不想*让类本身模板化，只有函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:18:26.353

问题以及使用强制转换进行修复的原因在于，编译器仅在您使用其签名的参数类型调用它时才选择非模板化函数。在这种情况下，您使用的不是 a `cBase*`，而是 a `cObject*`。确实，后者可以自动转换为前者，但编译器看到它可以实例化模板来创建一个与参数完全匹配的函数，所以它选择了它。

你可以和你的演员一起去：

```
addAttribure( name, static_cast<cBase *>(tmp) ); 
```

或者您可以直接使用基类指针来避免强制转换：

```
cBase* pBase = tmp;
addAttribure( name, pBase ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:26:28.487

可能是类型识别有问题。我在 QT 上遇到过类似的问题，但前段时间。也许你应该试试

```
template< class T > void set( const T & value )
{   
  data_ = QVariant::fromValue( value ); 
  // or data_.setValue( value )
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:50:56.950

这可能与此有关：

[http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/keyword_template_qualifier.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/keyword_template_qualifier.htm)

我隐约记得我自己的成员模板函数在我明确限定它们之前没有编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:04:45.347

问题是您期望编译器`addAttribure(const QString& name, cBase* value)`在使用时调用`cValue`，因为`cValue`它是从`cBase`. 但由于它们不是完全匹配，编译器`addAttribure<cValue*>(const QString& name, const cValue* value)`改为调用。

这就是为什么（如您的评论中所述）调用`addAttribure(name, static_cast<cBase*>(tmp))`有效的原因。

# c# - 架构考虑、WCF、EF(STE)

> ID：12283109
> 
> 赞同：0
> 
> 时间：2012-09-05T13:55:51.173
> 
> 标签：c#, wcf, entity-framework, architecture, wcf-data-services

我有从 EF 公开 STE 的 WCF 服务。

```
[OperationContract, FaultContract(typeof(WarningFault)),  FaultContract(typeof(ErrorFault))]
    MyEntity GetMyEntityByID(int id);

    [OperationContract, FaultContract(typeof(WarningFault)), FaultContract(typeof(ErrorFault))]
    MyEntity SaveMyEntity(MyEntity myEntity); 
```

场景如下所示：

1.  客户端从 WCF(GetMyEntityByID) 获取实体
2.  客户对此实体进行一些更改
3.  客户端调用 SaveMyEntity
4.  在 WCF 服务中，此特定实体附加到上下文并保存到 db。（并且在保存之前还有一些自定义验证工作。）

由于STE，这工作得很好..

但我注意到，这不是很好的模式。（在 EF 5.0 中，STE 标记为**不推荐）**

我应该用什么方法来代替这个？如果我理解正确，WCF 数据服务不适合这种工作，因为它们只公开实体。保存、验证等在客户端进行管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:18:32.613

我建议您使用分离的实体。通过主键从数据库重新加载您的对象，并且仅复制您的客户端能够修改的字段。不要在服务之外公开数据库上下文

# python - 从子列表打印项目

> ID：12283113
> 
> 赞同：0
> 
> 时间：2012-09-05T13:55:57.937
> 
> 标签：python, list, sublist

```
data = [['a','b'], ['a','c']]
print data[0[0]]
>>> 0 
```

当我尝试这个时，我得到一个错误。如何打印第一个列表中的第一个项目？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T13:56:58.817

你应该试试这个：

```
print data[0][0] 
```

这是有效的，因为`data[0]`是 list `['a', 'b']`，所以`data[0][0]`is `['a', 'b'][0]`just `'a'`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T13:57:01.703

您只需要切换括号的位置：

```
print data[0][0] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T13:57:17.080

你以错误的方式访问它，试试这个

```
print data[0][0] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T13:57:23.303

我想你正在尝试写

```
print data[0][0] 
```

`data[0]`选择第一个列表，然后最后的附加`[0]`项从第一个列表中选择第一个元素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T13:57:16.453

使用`data[0][0]`：

```
>>> data = [['a','b'], ['a','c']]
>>> print data[0][0]
a 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-05T13:57:19.810

通过 data[0] 获取第一个列表，然后通过 [0] 获取该列表的第一个元素，如下所示：

```
data[0][0] 
```

# plot - 谷歌融合表不显示散点图中的所有行

> ID：12283116
> 
> 赞同：0
> 
> 时间：2012-09-05T13:56:01.820
> 
> 标签：plot, google-fusion-tables

我正在构建一个简单的 web 应用程序，它将显示有关收入和健康之间关系的不同图表。我正在尝试使用 Google Fusion Tables 生成图表，但遇到了障碍。我在图表中有 807 行，并试图在两列之间制作散点图。

它表示正在显示所有行，但图表显然没有所有数据点。我怎样才能让所有的点都显示出来？

![问题截图](../Images/41836d5310bb9578f0528cb935d781f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:25:48.477

Fusion Tables 中的图表限制为 500 个数据点。当计数超过该值时，散点图使用采样算法将数据修剪到该限制。这应该在图表上注明；我已经为此提交了一个错误。

# java - Java中的泛型+可选参数不能组合

> ID：12283119
> 
> 赞同：4
> 
> 时间：2012-09-05T13:56:08.897
> 
> 标签：java, generics

我正在为以下问题寻找一个优雅的解决方案：

```
//one interface
public interface MyInterface () {
}
//two implementations
public class ImplA implements MyInterface (){ 
}
public class ImplB implements MyInterface () {
} 
```

在另一个班级：

```
//one generic method
public void myMethod(Class<MyInterface>... myTypes) {
  for (Class<MyInterface> myType : myTypes) {
     System.err.println("my Type:" +myType);
  }
} 
```

问题是您不能简单地使用以下方法调用此方法：

```
myMethod(ImplA.class, ImplB.class); 
```

这只是不被接受。可选参数和泛型不能结合是真的吗？我找不到任何例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:59:47.877

我会尝试

```
public void myMethod(Class<? extends MyInterface>... myTypes) { 
```

`Class<MyInterface>`必须`MyInterface.class`不是子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:59:05.100

使用`? extends`通配符使其工作。

```
public void myMethod(Class<? extends MyInterface>... myTypes) {
    for (Class<? extends MyInterface> myType : myTypes) {
        System.err.println("my Type:" +myType);
    }
} 
```

您最初执行此操作的方式要求每个实现者的*引用*类型为`MyInterface`. 使用我建议的方式，您可以将您的推荐人`MyInterface`或任何孩子（孙子等）作为`MyInterface`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:00:01.757

您必须使参数类型协变（定义上限）。只有一种类型有签名`Class<X>`，那就是`X.class`。子类型是 type `Class<? extends X>`。所以：

```
@SafeVarargs 
public void myMethod(Class<? extends MyInterface>... myTypes) {
  // do stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:02:48.967

你可以尝试这样的事情：

```
public  void  myMethod(Class<? extends MyInterface>... myTypes) {
      for (Class<?> myType : myTypes) {
         System.err.println("my Type:" +myType);
      }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T14:03:13.303

您应该使用有界通配符来声明您的泛型类型 -`Class<? extends MyInterface>`

```
public void myMethod(Class<? extends MyInterface>... myTypes) {
  for (Class<? extends MyInterface> myType : myTypes) {
     System.err.println("my Type:" +myType);
  }
} 
```

# windows - 在 powershell 中使用不同的分隔符和引号导入 csv

> ID：12283123
> 
> 赞同：2
> 
> 时间：2012-09-05T13:56:25.043
> 
> 标签：windows, powershell, csv

我有一个 CSV 文件，它使用不同的引号和文本分隔符，而不是默认值。我知道分隔符有一个不同分隔符的选项，但我不知道如何摆脱引号字符。

```
Import-Csv 'C:\test.txt' -Delimiter "(character U+0014 is used here, won't show here)" 
```

但是引号字符是 U+00FE，我也需要删除它，这样我才能得到没有任何特殊字符的文本。我不想把它写到一个新文件中。我想将 csv 导入一个变量，以便对其进行一些分析。例如查看字段是否为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:09:57.963

分隔符实际上不是问题，因为您可以使用

```
-Delimiter "$([char]0x14)" 
```

至于报价，您可以使用预处理步骤，然后使用`ConvertFrom-`而不是`Import-CSV`：

```
Get-Content test.txt |
    ForEach-Object { $_ -replace ([char]0xFE) } | # to remove the “quotes”
    ConvertFrom-CSV -Delimiter "$([char]0x14)" 
```

如果您的行包含嵌入的引号，那么它需要更多的工作，并且可能更容易强制引用每个字段：

```
$14 = "$([char]0x14)"
$_ -replace ([char]0xFE) -replace '"', '""' -replace "(?<=^|$14)|(?=`$|$14)", '"' 
```

# c# - 在 Linq 中查找正则表达式匹配的索引

> ID：12283126
> 
> 赞同：3
> 
> 时间：2012-09-05T13:56:31.297
> 
> 标签：c#, regex, linq, dictionary, indexing

我有一个定义为的字典`Dictionary<int, Regex>`。其中有许多已编译的 Regex 对象。这是使用 C# .NET 4 完成的。

我正在尝试使用 Linq 语句来解析字典并返回一个对象，该对象包含所有字典键和在指定文本中找到每个正则表达式的位置的索引。

ID 返回正常，但我不确定如何获取找到文本的位置。有人可以帮我吗？

```
var results = MyDictionary
    .Where(x => x.Value.IsMatch(text))
    .Select(y => new MyReturnObject()
        {
            ID = y.Key,
            Index = ???
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:00:00.837

使用类的[`Index`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture.index.aspx)属性[`Match`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)而不是简单的[`IsMatch`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.ismatch.aspx)。

* * *

**例子：**

```
void Main()
{
    var MyDictionary = new Dictionary<int, Regex>() 
    {
        {1, new Regex("Bar")},
        {2, new Regex("nothing")},
        {3, new Regex("r")}
    };
    var text = "FooBar";

    var results = from kvp in MyDictionary
                  let match = kvp.Value.Match(text)
                  where match.Success
                  select new 
                  {
                        ID = kvp.Key,
                        Index = match.Index
                  };

    results.Dump(); 
} 
```

* * *

**结果**

![在此处输入图像描述](../Images/607d185685c59fafd521379c69b40627.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:04:51.110

您可以根据[`List<T>.IndexOf`](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)方法尝试使用此代码。

```
.Select(y => new MyReturnObject()
        {
            ID = y.Key,
            Index = YourDictionary.Keys.IndexOf(y.Key)
        }); 
```

# javascript - jquerymobile中的动画按钮css属性

> ID：12283127
> 
> 赞同：1
> 
> 时间：2012-09-05T13:56:33.403
> 
> 标签：javascript, css, button, jquery-mobile, jquery-animate

我正在尝试制作一个 jquerymobile (v1.1.1) 按钮动画，就好像它在闪烁一样。我已经做到了这一点：

```
myButton = $('<div data-role="button" data-theme="reset" data-inline="true" >save</div>').appendTo(this.myNode);

setInterval(
    function(){

        myButton.animate ({

             opacity: 0.5

    }, 400, function(){

                myButton.animate ({

                     opacity:1,

            },400);
         });},1000); 
```

这里的问题是：

1.  只有`data-theme="reset"`这样我才能看到按钮外观的一些修改。
2.  不透明度似乎是唯一可以修改的属性。

理想情况下，我希望能够为按钮的背景颜色或文本颜色设置动画，无论它可能具有什么数据主题。有什么建议么？

编辑：如果有帮助，jquerymobile为按钮生成的html如下：

```
<div data-role="button" data-theme="reset" data-corners="true" data-shadow="true" 
 data-iconshadow="true" data-wrapperels="span" 
 class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-reset">
      <span class="ui-btn-inner ui-btn-corner-all">
          <span class="ui-btn-text">save</span>
      </span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:22:25.500

您可以使用 CSS3 过渡（大多数移动浏览器都支持，[http://caniuse.com/#feat=css-transitions](http://caniuse.com/#feat=css-transitions)）来创建颜色动画。

JS-

```
$(function () {

    //save current color so we can go between two colors
    var currentColor = "red";

    //set an interval
    setInterval(function () {
        var $this = $('a');

        //swap colors (background and text)
        if (currentColor === "red") {
            currentColor = "blue";
            $this.css({
                backgroundColor : "blue",
                color           : "white"
            });
        } else {
            currentColor = "red";
            $this.css({
                backgroundColor : "red",
                color           : "black"
            });
        }
    }, 2500);
});​ 
```

CSS-

```
.ui-page .ui-btn {
    background-image   : none;

    -webkit-transition : background-color 2s linear, color 2s linear;
    -moz-transition    : background-color 2s linear, color 2s linear;
    -ms-transition     : background-color 2s linear, color 2s linear;
    -o-transition      : background-color 2s linear, color 2s linear;
    transition         : background-color 2s linear, color 2s linear;
}​ 
```

这是一个演示：http: [//jsfiddle.net/yLuCt/](http://jsfiddle.net/yLuCt/)

上面的 CSS 从按钮中删除了渐变背景图像，因此将使用它们的纯色背景（可以通过 CSS 设置动画）。然后`transition`声明只是定义在什么属性上使用什么类型的动画以及动画应该持续多长时间。我已将动画设置为比间隔稍短，因此元素不会一直在动画。

过渡文档：[https ://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions?redirectlocale=en-US&redirectslug=CSS%2FCSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions?redirectlocale=en-US&redirectslug=CSS%2FCSS_transitions)

浏览器支持转场：[http ://caniuse.com/#feat=css-transitions](http://caniuse.com/#feat=css-transitions)

# google-maps - 谷歌地图：我们可以添加一个链接来获取当前位置的路线吗？

> ID：12283128
> 
> 赞同：0
> 
> 时间：2012-09-05T13:56:33.163
> 
> 标签：google-maps

这是我想做的： [http](http://www.google.com/maps?start=geolocalize_me&destination=some) ://www.google.com/maps?start=geolocalize_me&destination=这里的一些地址

谷歌会知道关键字“geolocalize_me”意味着它应该对人进行地理定位并在之后添加方向。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:58:49.477

您可能希望使用[Google Maps API](https://developers.google.com/maps/documentation/javascript/)和[方向服务](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)，以及[HTML5 地理定位](http://www.html5rocks.com/en/tutorials/geolocation/trip_meter/)。您不应尝试直接链接到 maps.google.com 中的路线，因为参数未记录在案并且可能会更改。

这是一个使用地理位置来查找用户当前位置的[示例。](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-geolocation)

# c#-4.0 - 通过这个调用一个重载的构造函数？

> ID：12283129
> 
> 赞同：0
> 
> 时间：2012-09-05T13:56:39.270
> 
> 标签：c#-4.0, c#-3.0

我无法理解这一段，我不知道，编程中的术语 INVOKE 是什么意思？

在使用重载的构造函数时，一个构造函数调用另一个构造函数有时很有用。在 C# 中，这是通过使用另一种形式的 this 关键字来实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:15:22.143

在这种情况下，invoke 等同于 call。在 C# 中，调用通常是指以线程安全的方式调用方法。对于 GUI 开发非常有用，基本上在其他任何地方也非常有用。

# c#-4.0 - 从组合框中删除项目的更好方法 - c#

> ID：12283130
> 
> 赞同：0
> 
> 时间：2012-09-05T13:56:40.173
> 
> 标签：c#-4.0

我正在使用 c# 4.0 有以下代码行：

```
comboBox.Items.AddRange(all);
comboBox.Items.Remove("abc"); 
```

有没有更好的方法来写这个？像这样可以写成一行吗？这样即使在添加 abc comboBox 之前也可以检查这一点并且不首先添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:05:26.590

使用 Linq：

```
comboBox.Items.AddRange(all.Where(x => x != "abc").ToArray()); 
```

# mongodb - Mongodb检查并添加参考值

> ID：12283134
> 
> 赞同：1
> 
> 时间：2012-09-05T13:56:57.867
> 
> 标签：mongodb, mongodb-java, mongodb-query

我有两个系列。

```
checkone
{"_id":1,"name":"alex"},
{"_id":2,"name":"sandy"}

checktwo
{"_id":11,"password":"alex",tenant_id:{$ref:"checkone","$id":1}}
{"_id":12,"password":"suman",tenant_id:{$ref:"checkone","$id":2}} 
```

Checktwo tenant_id 引用 checkone id 的值。

但是当我尝试在 checktwo 中插入另一个文档时

```
 {"_id":13,"password":"shan",tenant_id:{$ref:"checkone","$id":6}} 
```

它被插入。它不检查在 checkone id 值中是否存在tenant_id 值 6 并将其添加。在这种情况下，id 值 6 在 checkone 中不存在，但它被插入到 checktwo 租户 ID 值中。

实际上它必须检查并插入它吗？

我很困惑 $ref 在这里是什么意思？

这个功能在 mongodb 中是否不可用？如果我错了，谁能指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:25:25.187

我认为您对 MongoDB 犯了一个典型的错误，即认为它具有任何关系能力。

DBRef 没有关系，并且在任何情况下都不支持服务器端。它不被视为一个完整的外键或连接到其他表的约束。

拥有一个自我描述的 ID 只是一种驾驶员方面的能力，它以一种标准化的方式来懒惰地使用类似`getConnected()`.

JOIN 和约束的功能在 MongoDB 中不存在，您必须在您的客户端代码中手动检查是否`6`存在。

我想您可能会争辩说这种行为应该存在于 DBRef 类中，并且当设置为以前未设置的值时，它应该检查其他行的存在。然而，目前还没有。

# dojo - IE7 和 dojo onchange 的单选按钮触发太晚了？

> ID：12283136
> 
> 赞同：0
> 
> 时间：2012-09-05T13:56:59.067
> 
> 标签：dojo, internet-explorer-7, dom-events

我有一个页面，它有一个表单并说 3 个输入单选按钮，我想在其中任何一个发生更改时运行一些代码，所以我的代码看起来像这样

```
dojo.query("#ze_form > input:radio").onchange(function () {
    alert("onchange fired!");
} 
```

这在普通网络浏览器中工作正常，但在 IE7 中，只有在单击单选按钮后才会显示警报，*然后单击外部*某处！当它失去焦点时它会触发它出现！

注意：在控制台和以前做警报和东西的时候，我可以看到我的查询选择器实际上选择了正确的单选按钮。

这是什么奇怪的现象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:08:51.007

`onChange`在单选按钮失去焦点之前，IE7 不会触发该事件。您的替代方法是连接到该`onClick`事件。

# c# - 从 SaveFileDialog 创建、写入和打开文本文件

> ID：12283145
> 
> 赞同：3
> 
> 时间：2012-09-05T13:57:22.943
> 
> 标签：c#, winforms, savefiledialog

我正在显示一个 SaveFileDialog，当单击 OK 时，我正在创建新文件，向其中写入一些默认内容，然后尝试通过 SaveFileDialog 的 OpenFile() 方法打开它。但是，当我调用 OpenFile() 时，文件的内容就会被删除。

```
SaveFileDialog saveFileDialog = new SaveFileDialog();
saveFileDialog.Filter = "XML files (*.xml)|*.xml";
saveFileDialog.RestoreDirectory = true;

if (saveFileDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    // First Event Creates file and writes default content to it - works ok 
    NewFileCreated( this, new FileCreatedEventArgs() { Template = Template.BBMF, FilePath = saveFileDialog.FileName } );
    // Second Event clears file content as soon as saveFileDialog.OpenFile() called
    FileLoaded( this, new FileLoadedEventArgs() { FileStream = saveFileDialog.OpenFile() } );
} 
```

有人可以解释为什么会发生这种情况以及我需要做什么才能成功打开新创建的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:02:52.457

根据[MSDN，SaveFileDialog.OpenFile()](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.openfile.aspx)

> **警告**
> 
> 出于安全考虑，此方法使用选定的名称创建一个新文件，并以读/写权限打开它。如果您选择要保存到的现有文件，这可能会导致意外丢失数据。要在保留现有数据的同时将数据保存到现有文件，请使用 File 类使用 FileName 属性中返回的文件名打开文件。

# javascript - 从输入框读取 onblur

> ID：12283147
> 
> 赞同：-1
> 
> 时间：2012-09-05T13:57:32.150
> 
> 标签：javascript, html, login, onblur

我正在尝试建立一个登录页面。我想从用户名文本框中读取信息，以便在带有 onblur 事件的 javascript 中使用。所以理想情况下，当有人在输入姓名后点击或点击离开时，页面将读取姓名，并在脚本中使用它来显示有关该人的信息。所有这些都将在输入密码之前发生。有人知道以这种方式从输入框中读取信息的方法吗？这是我到目前为止所拥有的。

```
//This will display the content
function createDiv()
{
var divTag = document.createElement("div");
divTag.style.position = "absolute";
divTag.style.top = "95px";
divTag.style.left = "426px";
divTag.style.zIndex = "20";
divTag.innerHTML = "MSS";
document.getElementById('card').appendChild(divTag);
}
</script>
</head>

<body onload='init();'>

<div id="card" style="width:800px; z-index:10; height:600px; position:relative; margin-left:auto; margin-right:auto; text-align:center; margin-top:0px; background-image:url('customLoginBG.png'); background-repeat:no-repeat;">
<form method='post' action='/login'>
<ul style="list-style-type:none;">
<li> <input type='hidden' id='token' name='token' /> </li>

<!-- After tabbing away from here, I display content. -->
<li style="position:absolute; top:270px; left:260px;"> <input type='text' onblur="createDiv()" id='username' style="width:188px; height:26px; outline: none; border: none; border-color:transparent; background-image:url('inputBar.png'); " /> </li>

<li style="position:absolute; top:310px; left:260px;"> <input type='password' id='password' style="width:188px; height:26px; outline: none; border: none; border-color:transparent; background-image:url('inputBar.png'); " /> </li>
<li style="position:absolute; top:290px; left:455px;"> <input type='image' src="loginButton.png" value="Login" onclick='doLogin();' /> </li>      

</ul>  
</form>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:00:38.657

使用 jquery（1.7 或更高版本），您只需执行

```
$("#inputboxname").on("blur", function () {
    var value = $(this).val();
    // Do stuff with value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:00:32.370

`$('input').blur(function() { console.log($(this).val()); }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:01:31.053

您可以将[`onblur`](https://developer.mozilla.org/en-US/docs/DOM/element.onblur)事件处理程序分配给输入：

```
<input id="username" type="text" />

​document.getElementById("username").onblur = function () {
  var name = this.value;
  // do something with it
};​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:02:27.187

```
document.getElementById('txtbox1').onblur = function(){
     alert(this.value);
}​​​​​​ 
```

但是，如果你要做很多 javascript 的东西，我会学习使用 jQuery 库，让很多事情变得简单得多。但是必须了解标准 javascript 的基础知识。

# svn - (405 Method Not Allowed) 响应 MKACTIVITY during Committing on Google Code

> ID：12283150
> 
> 赞同：11
> 
> 时间：2012-09-05T13:57:45.097
> 
> 标签：svn, google-code

我已将我的代码上传到 code.google 并成功提交了两次，但现在每当我尝试提交我的代码时，它总是给出

```
Server sent unexpected return value (405 Method Not Allowed) in response to MKACTIVITY 
```

我仍然可以成功签出我的项目，但是当我对文件进行很少的更改而不是尝试提交它时，它现在总是给出同样的错误。我正在尝试 SVNTrotoise 我什至清除了 /user/AppData/SVN 中的临时数据......但仍然是同样的问题。我试图从 MAC 终端提交我的项目，但仍然是同样的错误。

在互联网上我搜索了这个错误，他们说它是你试图添加的文件夹的露水并且已经存在但在我的情况下，我什至试图在签出并在单个文件中进行一些更改后立即提交我的项目

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T07:19:09.150

经过大量搜索之后，当我签出我的项目时，我在谷歌代码本身上找到了答案，我用[http://repUrl.com](http://repUrl.com)签出它，而不是当我尝试提交它时，它给出了那个错误。如果你想在结帐后提交一个项目，你必须使用[https://repoUrl.com](https://repoUrl.com)而不是[http://repoUrl.com来结帐](http://repoUrl.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T10:11:04.597

code.google.com 的解决方案是将 svn 本地副本重新定位到 https url。

然后尝试再次提交。为我工作。

# android - TouchEvent 导致应用程序崩溃

> ID：12283153
> 
> 赞同：-2
> 
> 时间：2012-09-05T13:57:54.443
> 
> 标签：android, touch

当我触摸一个按钮时，我遇到了一个问题，导致我的应用程序崩溃，阅读 LogCat 我发现错误来自 TouchEvent。我没发现问题！这是我的代码：

```
final Button Dec = (Button)findViewById(R.id.Dec);    

Dec.setOnTouchListener(new OnTouchListener () {
          public boolean onTouch(View view, MotionEvent event) {
                if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {
                  SendCmd(Server.getText().toString(), "keydec.down");
                } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                  SendCmd(Server.getText().toString(), "keydec.up");
                }
          return true;
              }

      }); 
```

以下是 LogCat 中所写的内容：

```
09-05 16:47:05.626: E/AndroidRuntime(11880): FATAL EXCEPTION: main
09-05 16:47:05.626: E/AndroidRuntime(11880): java.lang.NullPointerException
09-05 16:47:05.626: E/AndroidRuntime(11880):    at net.shape.remote.RacingPad$1.onTouch(RacingPad.java:46)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.view.View.dispatchTouchEvent(View.java:3762)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1731)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1120)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1715)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1787)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.os.Looper.loop(Looper.java:123)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at android.app.ActivityThread.main(ActivityThread.java:4633)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at java.lang.reflect.Method.invokeNative(Native Method)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at java.lang.reflect.Method.invoke(Method.java:521)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-05 16:47:05.626: E/AndroidRuntime(11880):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:05:19.287

要么`Server`为空，要么`Server.getText()`返回空。如果你想有点容错，你应该使用`String.valueOf(Server.getText())`：它仍然会给你null，但它不会崩溃。

# javascript - 用 jQuery.on 替换 jQuery.bind

> ID：12283160
> 
> 赞同：0
> 
> 时间：2012-09-05T13:58:33.427
> 
> 标签：javascript, jquery, events, binding

我编写了一个程序，其中包含用户与之交互的表单。因为有很多事件绑定到不同的按钮，所以我编写了一个循环来解析一些包含表单输入信息的 JS。以下是一些示例数据：

```
var value = 0,
forms = {
    place_controls : {
        attrs : {
            'class' : 'place-form'
        },
        input : {
            place_x : {
                attrs : {
                    type : 'text',
                },
                events : {
                    change : function () {
                        value = 10;
                    }
                }
            },
            place_y : {
                attrs : {
                    type : 'text',
                },
                events : {
                    change : function () {
                        value = 50
                    }
                }
            }
        }
    }
} 
```

然后通过以下方式解析数据：

```
 $.each(forms, function (form_index, form) {

    var $form_markup = $('<form>').attr(form.attrs);
    // Next: loop through each input element of the form we've reached
    $.each(form.input, function (element_index, element) {

        var $elem = $('<input>').attr(element.attrs);
        $elem.appendTo($form_markup);

        if (element.events !== undefined) {

            $.each(element.events, function (event_index, event) {

                $elem.bind(event_index, event);
                //$form_markup.on(event_index, $elem, event);
            });
        }
    });

    $form_markup.appendTo($form_goes_here);
}); 
```

如您所见，我`.bind()`目前正在使用，但是我想使用`.on()`. 不幸的是，当我这样做时，表单中的所有项目都绑定到函数解析的最后一个事件。当我使用`.bind()`一切按计划工作时 - 即单击“place_x”将值设置为 10，单击“place_y”将值设置为 50。

使用 时`.on()`，无论我更改哪个值，都会将值设置为 50，我假设这是因为最后一个函数绑定到每个事件。

谁能看到我做错了什么？

更新：有很多不同的方法可以做到这一点，我随后改变了我的代码的工作方式，但是这个问题与为什么`.bind()`工作和为什么`.on()`不工作有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:02:26.827

```
//$elem.bind(event_index, event);

//It looks like you should just be using .on() like this
$elem.on(event_index, event); 
```

您尝试使用的方式看起来像是`.on()`在实时冒泡事件中，看起来只有您创建的最后一个事件是固定的，为什么每个值都设置为 50。

```
//$form_markup.on(event_index, $elem, event); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:02:18.700

您可以通过一个简单的调用创建具有包含处理函数的属性映射的元素：

```
var $elem = $('<input/>', properties); 
```

“属性”对象可以包含事件处理程序：

```
var $elem = $('<input/>', {
  type: 'text',
  name: 'somethingUseful',
  click: function(ev) { /* click handler */ },
  change: function(ev) { /* change handler */ },
  css: { color: "red" }
}); 
```

# html - CSS相对定位问题

> ID：12283161
> 
> 赞同：-3
> 
> 时间：2012-09-05T13:58:36.657
> 
> 标签：html, css

要将图像的位置移动到我网站的某个部分，我将图像放在 div 标签中并使用相对位置将其移至我想要的位置。这适用于我想要放置图像的位置，但是有一个缺点，它会在以前使用的位置留下空白区域，并且在该空间中没有任何内容被占用，并且使网站看起来很丑陋。有没有办法删除它留下的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:08:07.040

请改用绝对定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:53:06.440

如上所述，您应该将元素定位为绝对。当相对定位时，元素仍然在文档流中，因此占据了它在文档中的原始位置。绝对定位将从流中删除元素并为其他元素提供空间。

# javascript - 简单游戏的 Canvas vs SVG

> ID：12283168
> 
> 赞同：32
> 
> 时间：2012-09-05T13:58:57.297
> 
> 标签：javascript, html, svg, html5-canvas

如果我想构建一个简单的游戏（蛇、跳棋、吃豆人或其他），那么更好的方法是什么——SVG 或 Canvas？

我感兴趣的事情：

1.  易于实施（Canvas 与 SVG 的学习曲线）。例如，如果 SVG 的教程和社区支持显着减少，这对我来说至关重要。

2.  性能（对我来说不是关键，但仍然很重要）

而且，在游戏领域，有没有比 Canvas 更适合 SVG 的特定游戏（反之亦然？）

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-06T02:18:52.677

需要大量鼠标交互且不需要太多连续动画的游戏（例如跳棋或国际象棋，或任何与此相关的棋盘游戏）更适合 SVG，因为您使用 dom 元素。考虑一个简单的按钮悬停，在 SVG 中，您可以添加事件侦听器，甚至只是放置`g.button:hover path {fill: blue;}`在您的 CSS 中，它就会起作用。另一方面，Canvas 需要跟踪命中区域并用 Javascript 绘制所有内容。

Snake 和 Pacman 更适合画布，你可以用键盘控制一切，画到画布上比在 SVG 中移动元素更便宜。有优秀的画布游戏库，[impact.js](http://impactjs.com/)就是其中之一。

解决你的观点：

**易用性：**如果您熟悉纯 javascript DOM 操作，SVG 是轻而易举的事。如果你是白板，我会说画布更容易掌握，因为你只是在上面画画。

**社区支持：**游戏画布胜出。有一个强大的 SVG 社区，但在游戏领域却没有。

**表现：**混合。如果您不采取一些技巧，canvas 和 SVG 都可能会很慢。例如，如果您在每一帧上重新绘制整个屏幕，则在画布中从左向右移动一个正方形可能会很不稳定。如果您只是重新绘制更改的区域，那么它是平滑的。SVG 可以毫不费力地处理这种情况。但另一方面，如果您想一次为数千个矩形设置动画，如果您不将矩形包装在一个组中并移动该组，那么 canvas 会顺利处理它，而 SVG 会陷入困境。

总而言之，如果您想在 javascript 中探索游戏，也许 Canvas 是一个更好的选择。我已经在 SVG 中完成了三款游戏，最新的一款是[http://color.method.ac](http://color.method.ac)，但我涉足了画布，我认为它更适合游戏。

# objective-c - 在 Objective-C 中，我是否需要导入每个 h 文件才能查看我的对象层次结构？

> ID：12283171
> 
> 赞同：1
> 
> 时间：2012-09-05T13:58:58.470
> 
> 标签：objective-c, ios, import

我创建了 3 个对象，并将它们链接在一起：

*   问卷对象 - 其中包含一个
*   NextQuestion 对象 - 包含一个
*   答案对象 - 具有文本属性。

在 ViewController 中，我希望能够调用：

```
NSString *thisAnswerText = Questionnaire.nextQuestion.answer.text; 
```

但是，为此，我必须将所有三个文件都导入到我的 .m 文件中

```
#import "Questionnaire.h"
#import "Question.h"
#import "Answer.h" 
```

是否有必要导入我在每个 .m 文件中使用的每个对象？或者有什么我可以做的，这意味着我只需要导入顶级项目并且它的所有子项目都会被自动引用？

注意。我知道我可以将所有三个添加到 Prefix.pch 文件中，但我想知道我是否错过了 Objective-C 的一些技巧，它允许我声明一个项目并且它的子对象会自动导入？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:02:06.073

导入 .h 文件时，也可以使用 .h 文件中的任何导入。您可能需要清理和重建，但它们应该可用。因此，在您的情况下，您应该能够摆脱`Questionaire.h`唯一的导入。

此外，如果您的应用程序依赖于这些自定义类并且它们将在所有地方使用，那么将它们导入您的 .pch 文件可能是一个好主意，它们将为您的所有类进行预编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:20:51.863

> 是否有必要导入我在每个 .m 文件中使用的每个对象？

并非在所有情况下，但是如果您向一个对象发送消息，您应该确保编译器看到它的声明——因为 ObjC 是一种非常动态的语言。

> 或者有什么我可以做的，这意味着我只需要导入顶级项目并且它的所有子项目都会被自动引用？

是的，您*可以*在任何标题中添加一个`#import`（当然，必须与翻译兼容）。然而，添加`#import`s 应该被最小化，因为`#import`ing the world 会增加你的构建时间并引入一堆依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:29:58.127

在你的接口的公共头文件中，你应该尽可能多地前向声明，并且只声明`#import`真正需要的。这将有助于缩短构建时间。在你的实现文件中，你可以导入任何你需要的东西。

有时为了可用性，您可以将多个标题收集到一个“MyFramework.h”文件中，这样您就不必在每次使用类时添加 5 个导入。但是，您应该小心这一点，因为如果在许多地方导入标头，它会增加构建时间。

You may also want to think about adding common imports to your prefix header (.pch) which can be precompiled by Xcode to improve build times a little.

# c - 如何将指针传递给C中的指针数组

> ID：12283173
> 
> 赞同：1
> 
> 时间：2012-09-05T13:59:01.813
> 
> 标签：c, arrays, function, pointers

我有以下有效的 C 代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <malloc.h>

int pw = sizeof(char*);     // width of pointer (to char)

int num;
int first = 1;
int size = 0;
int incr = 10;

char *(*arr)[];     // pointer to array of pointers to char */

test(char* s, int i)
{

  int j;
  char *(*newarr)[];        // pointer to array of pointers to char

  if (first) {          // first time
    arr = malloc(pw*incr);  // malloc array
    first = 0;          // skip from now on
    size = incr;        // save the size
  }

  if (i >= size) {          // out of space
    newarr = malloc(pw*(size+incr));    // get incr bigger space
    for (j=0; j<size; j++)      // copy the elements from the old
      (*newarr)[j] = (*arr)[j];     // array to new array
    free(arr);                  // free the old array space
    arr = newarr;           // point old array to new array
    size = size+incr;

  };

  int len = strlen(s);      // length of s
  (*arr)[i] = malloc(len+1);    // assign pointer to pointer array element
  strcpy((*arr)[i], s);     // copy s to array
                    // both arguments must be pointers

  printf("%d\t%s\n", i, (*arr)[i]);
};

main() 
{

  char* s = "this is a string";

  for (num=0; num<30; num++)    // add 30 pointers to s to *arr
    test(s, num);

  for (num=0; num<30; num++)
    printf("%d\t%s\n", num, (*arr)[num]); // print out what they point to
}; 
```

它从 0 到 29 两次打印出 'i\tthis is a string' for 'i'。我想要做的是从文件顶部传递'arr'作为'test'的参数。我想这样做的原因是因为我想传递几个不同的数组，所有这些数组都以相同的方式声明。如果我做出最小的改变，我会得到：

```
0   this is a string
Segmentation fault (core dumped) 
```

这是 diff 命令的输出，显示了最小的更改：

```
 13c13
< char *(*arr)[];       // pointer to array of pointers to char */
---
> char *(*jarr)[];      // pointer to array of pointers to char */
15c15
< test(char* s, int i)
---
> test(char* s, int i, char *(*arr)[])
52c52
<     test(s, num);
---
>     test(s, num, jarr);
54,55d53
<   for (num=0; num<30; num++)
<     printf("%d\t%s\n", num, (*arr)[num]); // print out what they point to 
```

换句话说，除了将“arr”重命名为“jarr”并将其传递给“test”之外，一切都是一样的。

在此先感谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:29:58.313

调用时出现问题：

```
test(s, num, jarr); 
```

你是`jarr`按价值传递的。在函数内部，您正在重新分配（困难的方式 - 为什么不使用`realloc()`为您进行复制？）数组，但该更改不会影响`jarr`'in `main()`' 的值，因为它是按值传递的。第二次通过循环时，您仍然将一个空指针传递给该函数，但随后您将取消引用该空指针，这是个坏消息。

怎么修？

公平的问题......我不确定旧的“好吧，如果我想到达那里，我不会从这里开始”的恶作剧是否通过召集。

“最简单”的更改是修改调用：

```
jarr = test(s, num, jarr); 
```

然后“只是”修改函数，使其返回指向字符指针数组的指针。这是一个非常深奥的功能。我的大脑还没醒（咖啡因不足），所以我使用了一个中间体`typedef`来解决如何编写函数声明和定义的问题：

```
typedef char *(ArrayString[]);

ArrayString *test3(char *s, int i, char *(*arr)[]);

ArrayString *test3(char *s, int i, char *(*arr)[]) { (*arr)[i] = s; return arr; } 
```

它编译时没有警告；这并不能保证它是正确的。

主要的替代方法是将指针传递给指向函数的 char 指针数组的指针，这更加深奥。

* * *

但是，这两个都是“从这里开始”的解决方案。总的来说，你最好设计一种不同的处理方式。指向数组的指针当然是 C 的一部分，但它们位于 C 的外部边缘，您通常应该假设如果您的设计需要使用它们，那么您的设计可能不是最好的。您应该使用更简单的`char **`（或者，打消这个念头，`char ***`最好避免三重间接，但这并不总是可能的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:37:11.160

您似乎误解了数组和指针的工作原理。假设您想要一个动态的字符串数组，它基本上是一个指向以下指针的指针`char`：

```
char **arr = NULL; 
```

为此分配内存，例如

```
arr = malloc(sizeof(char *) * current_size); 
```

现在你有了一个字符指针的“数组”。假设您希望这些中的每一个都是特定的字符串`str`：

```
for (int i = 0; i < current_size; i++)
{
    arr[i] = strdup(str);
} 
```

哦，现在你需要增加字符串的数量，全部初始化为和之前一样的字符串：

```
size_t new_size = current_size + 10;
arr = realloc(arr, sizeof(char *) * new_size);

for (int i = current_size; i < new_size)
{
    arr[i] = strdup(str);
} 
```

* * *

现在的问题是您想在一个单独的函数中完成上述所有操作。首先，您必须添加另一个间接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:37:17.923

我认为您可以在 test(s, 0, jarr) 和 test(s, 0, jarr) 中对分配给 jarr 的第一个 malloc 值进行仔细检查；由于您在按值传递中更改了指针值，因此 jarr 分配不成功。

# java - JOptionPane 焦点隐藏

> ID：12283176
> 
> 赞同：3
> 
> 时间：2012-09-05T13:59:08.060
> 
> 标签：java, swing, joptionpane

```
Object[] options = {"questions", "list"};

Object selection = JOptionPane.showOptionDialog(Main.mWindow, "newDocText", "newDoc",
JOptionPane.OK_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, options[0]); 
```

我使用上面的代码来创建一个`JOptionPane`.

焦点画在主要选定的选项上，但我想完全隐藏它。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:47:21.530

而不是使用`options[0]`use `null`：

```
Object[] options = {"questions", "list"};

Object selection = JOptionPane.showOptionDialog(Main.mWindow, "newDocText", "newDoc",
JOptionPane.OK_OPTION, JOptionPane.QUESTION_MESSAGE, null, options,null); 
```

根据[java文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showOptionDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int,%20int,%20javax.swing.Icon,%20java.lang.Object%5B%5D,%20java.lang.Object%29)

**显示选项对话框**

```
public static int showOptionDialog(Component parentComponent,
                                   Object message,
                                   String title,
                                   int optionType,
                                   int messageType,
                                   Icon icon,
                                   Object[] options,
                                   Object initialValue) 
```

> *initialValue* - 表示对话框默认选择的对象；只有在使用 options 时才有意义；可以为空

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T15:16:55.730

对我来说，David Kroukamp 的回答仍然导致第一个按钮聚焦，可能是因为必须始终有一个具有焦点的组件。以下代码明确地将焦点放在 JLabel 上：

```
 JLabel message = new JLabel("newDocText");
    final JOptionPane pane = new JOptionPane(message, JOptionPane.QUESTION_MESSAGE, JOptionPane.OK_OPTION, null, options);
    JDialog dialog = pane.createDialog(f, "newDoc");
    message.requestFocus();
    dialog.setVisible(true);
    Object selection = pane.getValue(); 
```

编辑：如果只有焦点的*绘制*是一个问题，您可以在对它们调用 setFocusPainted(false) 之后将 JButtons 传递给 JOptionPane。你可以这样做：

```
 JButton questionsButton = new JButton("questions");
    JButton listButton = new JButton("list");
    questionsButton.setFocusPainted(false);
    listButton.setFocusPainted(false);
    Object[] options = {questionsButton, listButton}; 
```

但在这种情况下，您需要自己设置对话框的关闭。我认为这是更复杂的解决方案。

# z3 - 两个 boolexpr 是否相等

> ID：12283181
> 
> 赞同：0
> 
> 时间：2012-09-05T13:59:26.930
> 
> 标签：z3

给定两个 boolexpr b1,b2 说

```
b1=x1>=4&&x2>=5
b2=x2>=5&&x1>=4 
```

我们可以使用 Z3 的 .net API 来了解 b1 和 b2 是否实际上是相同的约束？)（意思是b1和b2允许的x1和x2的值是一样的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:27:26.470

是的。你想证明 b1 等于 b2，你可以通过证明 b1 == b2 的否定是不可满足的。这是一个示例，展示了如何在 Z3Py 中执行此操作，您可以在 .NET API 中使用基本相同的步骤：[http ://rise4fun.com/Z3Py/M4R1](http://rise4fun.com/Z3Py/M4R1)

```
x1, x2 = Reals('x1 x2')

b1=And(x1>=4, x2>=5)
b2=And(x2>=5, x1>=4)

s = Solver()
proposition = b1 == b2 # assertion is whether b1 and b2 are equal
s.add(Not(proposition))
# proposition proved if negation of proposition is unsat
print s.check() # unsat 

b1=And(x1>=3, x2>=5) # note difference
b2=And(x2>=5, x1>=4)
s = Solver()
proposition = b1 == b2
s.add(Not(proposition))
print s.check() # sat 
```

# mysql - 获取mysql中数字列的大小

> ID：12283182
> 
> 赞同：1
> 
> 时间：2012-09-05T13:59:27.560
> 
> 标签：mysql, sql

我想要的是`x`：`mynumber INT(x)`通过类似的东西：

```
select NUMBER_SIZE 
FROM information_schema.columns 
```

但这似乎没有什么可做的`information_schema`。

感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:01:21.570

我认为您需要该`NUMERIC_PRECISION`信息的专栏。

编辑; 我已经查过了，我实际上认为该值不在任何地方，您将不得不使用该`COLUMN_TYPE`列。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-05T14:09:40.127

> ```
> SELECT COLUMN_TYPE
> FROM information_schema.columns
> WHERE column_name = '...'
>   AND table_name = '...'
>   AND table_schema = '...' 
> ```

似乎`NUMERIC_PRECISION`并非对所有数据类型都准确。

`columns`以下是表中的其他列`information_schema`：

```
表目录
TABLE_SCHEMA
TABLE_NAME
COLUMN_NAME
ORDINAL_POSITION
COLUMN_DEFAULT
IS_NULLABLE
数据类型
CHARACTER_MAXIMUM_LENGTH
CHARACTER_OCTET_LENGTH
NUMERIC_PRECISION
NUMERIC_SCALE
CHARACTER_SET_NAME
COLLATION_NAME
COLUMN_TYPE
COLUMN_KEY
额外的
特权
COLUMN_COMMENT
```

[资源](http://forums.mysql.com/read.php?98,185565,185625#msg-185625)

# drag-and-drop - 嵌入式 SVG 中的拖放事件？

> ID：12283183
> 
> 赞同：12
> 
> 时间：2012-09-05T13:59:32.083
> 
> 标签：drag-and-drop, svg, google-closure, clojurescript

是否有可能从网页中的 SVG 元素接收拖放事件？

我尝试了 Google Closure 库，但无济于事。

具体来说，假设我的页面包含

```
<ul id = "list">
  <li class="item" id="item1">foo</li>
  <li class="item">bar</li>
  <li class="item">baz</li>
</ul> 
```

我的脚本包含（Clojurescript/C2）

```
(let [items (select-all ".item")
      lst (select "#list")
      target (fx/DragDrop. lst nil)]
  (dorun (map
    (fn [item]
      (let [source (fx/DragDrop. item nil)]
        (. source (addTarget target))
        (. source (init))))
    items))
  (. target (init))) 
```

然后我*确实*得到了一个拖动图像（幽灵），虽然我没有设法接收拖动事件，例如通过做

```
(on-raw "#item1" :dragstart (fn [e] (.log js/console (str "dragstart " e)))) 
```

对 SVG 元素使用类似的代码，我什至没有得到一个幽灵......

有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-05T19:10:30.760

SVG 元素不支持拖动事件：http: [//www.w3.org/TR/SVG/svgdom.html#RelationshipWithDOM2Events](http://www.w3.org/TR/SVG/svgdom.html#RelationshipWithDOM2Events)。

您可以使用鼠标事件伪造拖动事件，请参阅[http://svg-whiz.com/svg/DragAndDrop.svg](http://svg-whiz.com/svg/DragAndDrop.svg)（查看源代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-29T05:46:19.920

你总是可以实现它。基本上，您必须在拖动时检查元素是否与另一个元素接触：

```
this.isTouching = function(element){
        if(this.x <= element.x && element.x <= (this.x + this.width) && 
           this.y <= element.y && element.y <= (this.y + this.height)){
           return true;
        }else{
            return false;
        }
    }; 
```

它适用于所有浏览器。希望能帮助到你 ：）

# python - 弹性网是如何使用的？

> ID：12283184
> 
> 赞同：27
> 
> 时间：2012-09-05T13:59:32.897
> 
> 标签：python, statistics, machine-learning, regression, scikit-learn

这是关于回归正则化的初学者问题。大多数关于 Elastic Net 和 Lasso Regression 的在线信息都复制了 Wikipedia 中的信息或 Zou 和 Hastie 的 2005 年原始论文（Regularization and variable selection via the elastic net）。

***简单理论的资源？***对于那些没有统计倾向的人来说，是否有一个简单易懂的解释来说明它的作用、何时以及为什么需要再瓜化，以及如何使用它？我知道如果您能理解原始论文是理想的来源，但是否有更简单的问题和解决方案？

***如何在sklearn中使用？***有没有一步一步的例子说明为什么选择弹性网（在山脊、套索或简单的 OLS 上）以及如何计算参数？[sklearn 上](http://scikit-learn.org/0.11/auto_examples/index.html)的许多只是将 alpha 和 rho 参数直接包含在预测模型中，[例如](http://scikit-learn.org/0.11/auto_examples/linear_model/plot_lasso_and_elasticnet.html)：

```
from sklearn.linear_model import ElasticNet
alpha = 0.1
enet = ElasticNet(alpha=alpha, rho=0.7)
y_pred_enet = enet.fit(X_train, y_train).predict(X_test) 
```

但是，他们没有解释这些是如何计算的。你如何计算套索或网络的参数？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-06T07:13:37.857

缺乏文档。我创建了一个新[问题](https://github.com/scikit-learn/scikit-learn/issues/1118)来改进它。正如 Andreas 所说，最好的资源可能是以 PDF 格式免费在线获得的[ESL II 。](http://www-stat.stanford.edu/~tibs/ElemStatLearn/)

要自动调整 alpha 的值，确实可以使用[ElasticNetCV](http://scikit-learn.org/dev/modules/generated/sklearn.linear_model.ElasticNetCV.html#sklearn.linear_model.ElasticNetCV)，这将节省冗余计算，就像在类中使用[GridSearchCV](http://scikit-learn.org/dev/modules/grid_search.html)`ElasticNet`进行调整 一样`alpha`。作为补充，您可以使用正则`GridSearchCV`来找到 的最佳值`rho`。有关详细信息，请参阅[ElasticNetCV的文档字符串。](http://scikit-learn.org/dev/modules/generated/sklearn.linear_model.ElasticNetCV.html#sklearn.linear_model.ElasticNetCV)

至于 Lasso 与 ElasticNet，ElasticNet 将倾向于选择更多变量，从而导致更大的模型（训练成本也更高），但总体上也更准确。特别是 Lasso 对特征之间的相关性非常敏感，可能会从 2 个非常相关的信息特征中随机选择一个，而 ElasticNet 更有可能同时选择这两个特征，这将导致模型更稳定（就泛化能力而言，新样本）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-03T20:59:59.187

我会把你指向这篇博文：[http](http://www.datarobot.com/blog/regularized-linear-regression-with-scikit-learn/) ://www.datarobot.com/blog/regularized-linear-regression-with-scikit-learn/ 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-26T09:30:11.027

我将尝试帮助您解决“什么是 ElasticNet？”这个问题。

Elastic-Net 是一种正则化回归方法，它线性地结合了 Lasso 和 Ridge 回归方法的惩罚（即）L1 和 L2。当有多个相关特征时，它很有用。Lass 和 Elastic-Net 之间的区别在于 Lasso 可能会随机选择其中一个特征，而 elastic-net 可能会同时选择这两个特征。

下面列出的两个链接对 ElasticNet 有很好的解释。

1.  [ElasticNet- TutorialsPoint](https://www.tutorialspoint.com/scikit_learn/scikit_learn_elastic_net.htm)
2.  [Lasso、Ridge 和弹性网络正则化](https://medium.com/@jayeshbahire/lasso-ridge-and-elastic-net-regularization-4807897cb722)

# objective-c - 如何解决 UIDocumentStateSavingError 和 UIDocumentStateClosed

> ID：12283188
> 
> 赞同：0
> 
> 时间：2012-09-05T13:59:48.353
> 
> 标签：objective-c, ios, icloud

我有一个 iPhone-iCloud 应用程序。现在一个文档具有状态`UIDocumentStateSavingError`和`UIDocumentStateClosed`. 我可以在developers.icloud.com 上看到状态为“文件上传待处理”的文件。但我不知道现在该怎么办

当我尝试使用代码删除文件时：

```
NSFileCoordinator* fileCoordinator = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
[fileCoordinator coordinateWritingItemAtURL:fileURL options:NSFileCoordinatorWritingForDeleting error:nil byAccessor:^(NSURL* writingURL) {
    NSFileManager* fileManager = [[NSFileManager alloc] init];
    [fileManager removeItemAtURL:writingURL error:nil];
}]; 
```

该文件仍然存在。我试图删除所有设备上的应用程序，但没有任何改变。如何删除此文件或解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:03:05.260

很久以前但仍未得到答复，因此如果您的问题仍然存在：

对我来说，它可以在文件上添加 [fileManager removeItemAtURL:...] 和 [fileManager setUbiquitous:NO...]，然后让 fileManager 删除本地副本。

注意使用文件管理器操作的 NSError 和布尔结果处理，以确保它确实有效。因此，如果您返回一个 NSError，您可以看到它失败的原因。这总是很好的做法。

我偶然发现了您的问题，因为在重新创建此类已删除的文件后，即使删除和创建之间有几个小时，我也会收到消息“文件上传正在等待”。

# vba - 如何根据附件文件名将邮件移动到文件夹？

> ID：12283189
> 
> 赞同：2
> 
> 时间：2012-09-05T13:59:50.660
> 
> 标签：vba, outlook, attachment, outlook-2010

我需要一个规则（或者很可能是一个 VBA 宏）来对我的邮件进行排序。如果我在新收到的邮件附件的文件名中说“报告”，而不是我想将该邮件移动到不同的文件夹，可以说“报告”文件夹。

我怎样才能做到这一点？

我已经在邮件标题上设置了规则，但这似乎并没有解决问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:34:42.737

使用来自[http://www.outlookcode.com/article.aspx?id=62](http://www.outlookcode.com/article.aspx?id=62)和[http://blog.saieva.com/2010/03/27/move-messages-to-folders-with-outlook-vba的代码/](http://blog.saieva.com/2010/03/27/move-messages-to-folders-with-outlook-vba/)

```
'code goes in "ThisOutlookSession" module
Private Sub Application_NewMailEx(ByVal EntryIDCollection As String)
    Dim arr() As String
    Dim i As Integer
    Dim ns As Outlook.NameSpace
    Dim itm As MailItem
    Dim m As Outlook.MailItem
    Dim att As Outlook.Attachment

    On Error Resume Next
    Set ns = Application.Session
    arr = Split(EntryIDCollection, ",")
    For i = 0 To UBound(arr)
        Set itm = ns.GetItemFromID(arr(i))
        If itm.Class = olMail Then
            Set m = itm
            If m.Attachments.Count > 0 Then
                For Each att In m.Attachments
                    If UCase(att.FileName) Like "*REPORT*" Then
                        MoveToFolder m, "MoveTest"
                        Exit For
                    End If
                Next att
            End If
        End If
    Next
    Set ns = Nothing
    Set itm = Nothing
    Set m = Nothing
End Sub

Sub MoveToFolder(mItem As MailItem, folderName)

 '###you need to edit this for your account name###
 Const mailboxNameString As String = "Mailbox - firstname lastname"

 Dim olApp As New Outlook.Application
 Dim olNameSpace As Outlook.NameSpace
 Dim olDestFolder As Outlook.MAPIFolder

 Set olNameSpace = olApp.GetNamespace("MAPI")
 Set olDestFolder = olNameSpace.Folders(mailboxNameString).Folders(folderName)

 Debug.Print "[" & Date & " " & Time & "] " & _
                ": folder = " & folderName & _
                "; subject = " & mItem.Subject & "..."

 mItem.Move olDestFolder

End Sub 
```

# mysql - Django mysql 查询

> ID：12283191
> 
> 赞同：1
> 
> 时间：2012-09-05T13:59:58.173
> 
> 标签：mysql, django, django-models

我是 django 新手，我很难构建 django 查询。谁能帮我把这个查询构造成 django 查询？

```
SELECT DISTINCT mt.ID_Number 
FROM measurement_test mt 
WHERE mt.Start_Date IN('2012-02-15','2012-06-14') 
AND mt.ID_Number != '' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:07:49.823

假设“measurement_test”是相关表的模型对象。

```
measurement_test.objects.values_list(ID_Number).filter(Start_Date__in=('2012-02-15','2012-06-14')).exclude(ID_Number='').distinct() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:05:38.443

您可以使用以下内容，

```
measurement_test.objects.filter(~Q(ID_Number=''), Start_Date__in=['2012-02-15','2012-06-14']).values('ID_Number').distinct() 
```

# android - 如何通过aidl和IPC在android中的两个不同应用程序之间进行通信？

> ID：12283197
> 
> 赞同：0
> 
> 时间：2012-09-05T14:00:06.077
> 
> 标签：android

我想在一些不同的应用程序中建立通信。所有应用程序仅由我开发。那么是否可以同时使用 AIDL 和 IPC。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:46:10.577

这是一个非常好的[使用 AIDL 创建后台服务的](http://mindtherobot.com/blog/37/android-architecture-tutorial-developing-an-app-with-a-background-service-using-ipc/)教程。您可以做的是将您的 AIDL 文件放入服务应用程序并开发您的服务功能。然后将那些没有服务实现的 AIDL 文件复制到其他应用程序。现在，第二个应用程序可以连接到您的服务（由其他应用程序部署）。

# c - 为什么 getppid 返回相同的值，即使对于孙进程也是如此？

> ID：12283200
> 
> 赞同：0
> 
> 时间：2012-09-05T14:00:18.430
> 
> 标签：c, linux, fork, parent

这是我的代码，为了执行我运行的这个程序`./2c 10 5`——10 代表参数 1，5 代表参数 2。该程序将运行 10 个子进程，第 5 个子进程将生成另一个子进程，但在这种情况下，我的 ppid 始终相同。它永远不会改变。所以对于每个孩子，我都有相同的 ppid，

我得到的输出是：

```
pid：1 ppid：6
pid：2 ppid：6
pid: 3 ppid: 6
pid: 4 ppid: 6
pid: 5 ppid: 6``
pid: 6 ppid: 6
pid: 7 ppid: 6
pid: 8 ppid: 6
pid: 9 ppid: 6
pid：10 ppid：6

```

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/wait.h>
int main(int argc, char *argv[],char *envp[])
{
  int i,a;

  a=getpid();
  int pid;
  int child,child2;
  child=atoi(argv[1]);
  child2=atoi(argv[2]);

  if(atoi(argv[2])>atoi(argv[1]))
  {
    printf("arg2 is bigger than arg1!");
    exit(1);
  }

  for(i=1;i<=child;i++)
  {
    pid=fork();
    if(i=child2 && pid==0)
    {
      pid=fork();
      break;
    }
    if(pid==0)
      break;
  }

  if(getpid()!=a)
    if(getppid()==a)
    {
      printf("PID: %d   PPID: %d\n",getpid(),getppid());

      sleep(5);
      exit(0);
    }

  for(i=1;i<=child+1;i++)
    wait(0);

  return 0; 
} 
```

* * *

这是我的代码，有人可以对此进行测试并在此站点上发送输出...所以我可以比较..编译我使用 gcc test.c -o test 并运行 ./test 10 5 ...

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/wait.h>

int main(int argc, char *argv[], char *envp[])
{
int i,a;
a=getpid();
pid_t pid;
int child,child2;
child=atoi(argv[1]);
child2=atoi(argv[2]);

if(atoi(argv[2])>atoi(argv[1]))
{
    printf("2nd argumentet is bigger than 1st");
    exit(1);
}
for(i=1;i<=child;i++)
{
    pid=fork();
    if(i==child2 && pid==0)
    {
        pid=fork();
        break;
    }
if(pid==0)
    break;
}
if(getpid()!=child2)
{
    printf("PID: %d  PPID: %d\n",getpid(),getppid());
    sleep(5);   
    exit(0);
}
for(i=0;i<=child+1;i++)
wait(0);
return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:11:15.190

您的代码没有证明您声称正在发生的事情。您*只*打印子项的输出，而不是孙子项的输出，因为您专门使用以下行检查子项：

```
if(getppid()==a) 
```

在该行中，`a`保存程序原始实例的 pid。这不会改变，因为当你打电话时`fork`，你已经通过了分配的线路`a`。所有直接孩子的父 pid 总是相同的，因为这就是*parent*的意思。

删除我在上面突出显示的行，您应该会看到预期的结果。

# r - 有关如何调试此 FF 错误的任何想法？

> ID：12283203
> 
> 赞同：0
> 
> 时间：2012-09-05T14:00:34.613
> 
> 标签：r, csv

我正在尝试使用 FF 读取 R 中的大型 CSV 文件。

我首先使用 csv.read 阅读了代码的前 10 行，以确保我没有做任何愚蠢的事情：

```
trainFileName = "./TrainingSet/SplitFiles/7_train_data.csv"
trainSet <- read.csv(trainFileName, header=TRUE, nrows=10)
length(trainSet[1,])
length(trainSet[,1]) 
```

这告诉我：

```
> trainFileName = "./TrainingSet/SplitFiles/7_train_data.csv"
> trainSet <- read.csv(trainFileName, header=TRUE, nrows=10)
> length(trainSet[1,])
[1] 4505
> length(trainSet[,1])
[1] 10 
```

到目前为止，一切都很好。现在我尝试用 FF 重复这个壮举：

```
trainSet <- read.csv.ffdf(file = trainFileName, header = TRUE, nrows = 10, VERBOSE = TRUE) 
```

在这里我们失败了：

```
read.table.ffdf 1..10 (10)  csv-read=0.552sec
Error in if (dfile ==         getOption("fftempdir")) finalizer <- "delete" else finalizer <- "close" : argument is of length zero
Error in setwd(cwd) : character argument expected 
```

我在任何地方都找不到有关此错误的更多信息，而且我看不到如何做更简单的事情，所以在深入研究 FF 源代码之前，有人有什么想法吗？

我尝试加载整个文件而不是前 10 行，指定列数据类型并且总是出现相同的错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:57:25.480

是的，你有太多的列。在ff中，每一列都是一个文件。您打开的文件数量不能超过文件系统同时打开的数量

如果您打开的文件太多，要查看 ff 将失败的位置，请运行以下命令：

```
require(ff)
x <- list()
for(i in 1:100000){
  print(i)
  x[[i]] <- ff(rnorm(10))
  open(x[[i]] )
} 
```

对我来说，这在 1022 个打开的文件中失败了，但我还有其他一些打开的文件。

# c++ - A 类需要 B 类，B 类需要 A 类及其所有成员

> ID：12283204
> 
> 赞同：2
> 
> 时间：2012-09-05T14:00:37.763
> 
> 标签：c++, class, recursion, include, members

我绝对处于绝望的境地......使用 C++，我已经定义了这两个类：

```
// Console.hpp
#ifndef CLASS_Console
#define CLASS_Console
#include <iostream>
#include "Window.hpp"

class Console
{
public:
    Window *Win;
    Console(Windows *Win); // Which then does "this->Win = Win;"
    void AppendText(std::string);
    // And some more dozens functions
};
#endif

// Window.hpp
#ifndef CLASS_Window
#define CLASS_Window
#include <iostream>
#include "Size.hpp"

class Window
{
private:
    Console *m_Console;

public:
    Window(); // Which then does "m_Console = new Console(this); m_Console->AppendText("YEAH");"
    Console *getConsole(); // For use by another classes
    Size getSize();
    // And some more Tens and Tens of functions
};
#endif 
```

一开始，有人会说：“使用前向声明！”

但是鉴于我需要访问这几十个函数中的一些（以一种方式和另一种方式），有什么方法可以避免使用前向声明？

感谢您的（未来）答案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:02:53.890

> 但是鉴于我需要访问这几十个函数中的一些（以一种方式和另一种方式），有什么方法可以避免使用前向声明？

我不确定您是否理解前向声明的作用。您只需在for中提供*一个*前向声明，然后包含from 。`window.hpp``Console``console.hpp``window.cpp`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:01:41.253

不，没有办法避免（至少）前向声明。

> 但是鉴于我需要访问其中的几十个功能

为什么这很重要？表现？你测量过什么吗？如果没有，你就不能谈论性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:16:29.540

正常的结构是：

1.  声明第一类：`class Console;`
2.  定义第二类：`class Window { Console *c; ...};`
3.  定义第一类： `class Console { Window *w; ... };`
4.  定义成员函数`Console::Console() { ... } ...`

第一个类声明足以让您编写另一个类的定义（没有成员函数的定义）。

然后在定义了两个类之后，声明了成员函数，所以成员函数的代码可以根据需要使用其他类的成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:07:15.440

如果设计中只需要从“外部”访问这些类中的一个，则可以考虑将 Console 嵌套在 Window 内（或相反）

# java - 无法与 Tomcat 中的 jmxmp 连接

> ID：12283207
> 
> 赞同：0
> 
> 时间：2012-09-05T14:00:39.713
> 
> 标签：java, spring, tomcat, jmx

在我的 spring + tomcat 解决方案中，我遇到了 jmxmp 连接问题。

我在 tomcat 中启用了 jmx + 添加了 jmxremote_optional.jar

这是 manager.log

> 信息：JMXProxy：获取属性 java.lang 时出错：type=MemoryPool，name=Code Cache CollectionUsageThreshold
> 
> javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException：CollectionUsage 阈值不受支持
> 
> 05.09.2012 16:33:13 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=Code Cache CollectionUsageThresholdCount javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException：不支持 CollectionUsage 阈值
> 
> 05.09.2012 16:33:13 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=Code Cache CollectionUsageThresholdExceeded javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException：不支持 CollectionUsage 阈值
> 
> 05.09.2012 16:33:13 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性 Catalina 时出错：type=Resource，resourcetype=Global，class=org.apache.catalina.UserDatabase，name="UserDatabase" modelerType javax.management.AttributeNotFoundException：找不到属性 modelerType
> 
> 05.09.2012 16:33:13 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=PS Eden Space UsageThreshold javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException : 不支持使用阈值
> 
> 05.09.2012 16:33:14 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=PS Eden Space UsageThresholdCount javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException : 不支持使用阈值
> 
> 05.09.2012 16:33:14 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=PS Eden Space UsageThresholdExceeded javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException : 不支持使用阈值
> 
> 05.09.2012 16:33:14 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=PS Survivor Space UsageThreshold javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException : 不支持使用阈值
> 
> 05.09.2012 16:33:14 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=PS Survivor Space UsageThresholdCount javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException : 不支持使用阈值
> 
> 05.09.2012 16:33:14 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=PS Survivor Space UsageThresholdExceeded javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException : 不支持使用阈值
> 
> 05.09.2012 16:33:50 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性时出错 java.lang:type=MemoryPool,name=Code Cache CollectionUsageThreshold javax.management.RuntimeMBeanException：java.lang.UnsupportedOperationException：不支持 CollectionUsage 阈值 05.09.2012 16:33:50 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性 java.lang:type=MemoryPool 时出错，name=Code Cache CollectionUsageThresholdCount javax.management.RuntimeMBeanException：java .lang.UnsupportedOperationException：CollectionUsage 阈值不受支持 05.09.2012 16:33:50 org.apache.catalina.core.ApplicationContext 日志信息：JMXProxy：获取属性 java.lang:type=MemoryPool,name=Code Cache Collecti 时出错

这是spring con.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd"
    default-lazy-init="true">
    <bean id="test" class="test.Test" />
    <!-- <bean class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true" />
    </bean> -->
    <bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean"/>
    <bean class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.MethodNameBasedMBeanInfoAssembler"            >
                <property name="managedMethods">
                    <list>
                        <value>getVal</value>
                        <value>setVal</value>
                    </list>
                </property>
            </bean>
        </property>
        <property name="beans">
            <map>
                <entry key="bean:name=Test" value-ref="test"/>
            </map>
        </property>
    </bean>
</beans> 
```

这是java bean

```
public class Test {
    private String val = "";
    public String getVal() {
        return val;
    }
    public void setVal(String v) {
        val = v;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:50:59.977

我会回答我自己的问题:)。

问题是，另一个服务使用了端口 9875（jmxmp 的默认端口）。希望它可以帮助其他人并节省他的时间

# jquery - 使用jquery为附加的html表赋值

> ID：12283210
> 
> 赞同：0
> 
> 时间：2012-09-05T14:00:46.233
> 
> 标签：jquery, html, cakephp

嗨，我每次单击按钮时都会向表格添加一个标签和一个文本字段，但我也试图为每个标签赋予一个递增的值，但我不断收到意外的标识符错误。代码如下：

```
var counter = 2;

$('.addButton').click(function()
{
    $('#existingRow').after($('<tr><td><?php $cou = 2; echo $this->Form->label('Option' + $cou + ':');  $cou++ ?></td><td><?php echo $this->Form->input('name', array('label' => '', 'style' => 'height: 10px; width: 150px;')); ?></td></tr>'));
    counter++;
}); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:08:14.573

您得到的错误是因为您在 $() 选择器中使用这些行作为标识符。即$(' `<tr><td><?php echo $this->Form->label('Option '+ counter + ':'); ?></td><td><?php echo $this->Form->input('name', array('label' => '', 'style' => 'height: 10px; width: 150px;')); ?></td></tr>`')。灰色的代码作为标识符。

我的建议是使用 document.createElement 创建表格行的元素。这是完整的代码。

在 html 文件中你应该有一个表

```
<table id="my-table"></table> 
```

在你的 javascript 文件中

```
var counter = 2;
$('.addButton').click(function()
{
    tr = document.createElement('tr');
    tr.innerHTML = "<td><?php echo $this->Form->label('Option '+ counter + ':'); ?></td><td><?php echo $this->Form->input('name', array('label' => '', 'style' => 'height: 10px; width: 150px;')); ?></td>";
    $('#my-table').append(tr);
    counter++;
}); 
```

它肯定会成功的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:13:56.187

您不能在 PHP 代码块中使用 JS 变量计数器。尝试：

```
var counter = 2;

$('.addButton').click(function()
{
   $('#existingRow').append('<tr><td>labelname' +  counter + ':'</td><td><?php echo $this->Form->input('name', array('label' => '', 'style' => 'height: 10px; width: 150px;')); ?></td></tr>');
   counter++;
}); 
```

如果它有效，那么您可以在此处插入使用生成的任何内容，而不是 labelname

```
 echo $this->Form->label('Option 2:'); 
```

然后用JS中的计数器更改2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:37:57.933

这是任何人的答案：

```
 var counter = 2;

$('.addButton').click(function()
{
    $('#existingRow').before($('<tr><td><label for="VariableOption">Option' + counter + ':</label></td><td><?php echo $this->Form->input('name', array('label' => '', 'style' => 'height: 10px; width: 150px;')); ?></td></tr>'));
    counter++;
}); 
```

感谢@grzegorz_motyl

# java - 超级越野车 Netbeans 问题

> ID：12283212
> 
> 赞同：2
> 
> 时间：2012-09-05T14:01:00.183
> 
> 标签：java, netbeans, ide

因此，我在工作中使用 NetBeans 已有几个月了。还有一些非常令人震惊的错误，我简直不敢相信大多数人的版本中都存在。

我的产品版本：NetBeans IDE 7.0.1（内部版本 201107282000）

所以基本上每天都有两个大错误让我烦恼。第一，每当我在项目选项卡中关闭项目时。项目选项卡本身关闭，我必须重新打开它...第二，每当我从项目中打开文件时。它在与我的项目、服务和文件选项卡相同的选项卡组中打开。然后，我必须将它拖到我认为是编辑器的空间中才能真正有效地编辑它。

有没有其他人遇到过这样的问题？就像我说的，我怀疑这是 NetBeans 本身的问题......因为我只是不明白流行的 IDE 怎么会有这么大的问题......我怀疑它与某处的某些设置有关......

哦，我还应该注意，我不是这个 Windows 安装的第一个用户，所以可能会发生我不知道的软件冲突......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T06:04:40.953

您使用 Window-projects，它位于源代码页的左侧。右上角有一个选项（方形按钮），关闭按钮的左侧，是一个“pin”选项。它将永久附加项目选项卡与源。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-24T10:02:20.163

请获取 NetBeans IDE 7.2 版本。它简直太棒了！它几乎解决了旧版本中存在的所有问题。特别是使用数据库和项目选项卡。

# node.js - 我的 Node 脚本如何检测它是否被 `require` 调用？

> ID：12283213
> 
> 赞同：1
> 
> 时间：2012-09-05T14:01:04.130
> 
> 标签：node.js, reflection

如果您的代码检测到它是由 调用的`require`，您可能希望它相应地分支，在每种情况下做或不做某些事情。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T04:05:01.670

当然，只需检查`module.parent`is not `null`or `undefined`。如果它是用一个对象设置的，那么你的模块是用`require`.

# android - 我们可以通过 GOOGLE APIs 模拟器测试应用内购买 android 应用吗

> ID：12283221
> 
> 赞同：3
> 
> 时间：2012-09-05T14:01:27.517
> 
> 标签：android, in-app-purchase, in-app-billing

我有一个问题，我们可以用不同的 api 级别在 Google Apis 模拟器中测试应用内购买应用程序吗？

任何有关此的信息都将受到欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:10:43.883

您无法在模拟器上测试应用计费和 LVL 等服务，因为它们缺少 Google Play，后者充当您的应用之间的中间人，然后启动 Google 服务器。此外，您可以在模拟器上配置的帐户功能有限。

有关测试的详细信息，请参阅[此](http://developer.android.com/guide/google/play/billing/billing_testing.html)内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:05:05.470

不，你不能。有一种方法可以测试您的应用内计费，但​​您必须将其安装在真实设备上，而不是模拟器上：

[http://developer.android.com/guide/google/play/billing/billing_testing.html](http://developer.android.com/guide/google/play/billing/billing_testing.html)

“要在应用程序中测试应用内计费，您必须将应用程序安装在 Android 驱动的设备上。您不能使用 Android 模拟器来测试应用内计费。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:10:52.270

[我知道这个名为android-test-billing](http://code.google.com/p/android-test-billing/)的开源库项目，它显然可以让您通过重新创建 Google Play 计费服务来在模拟器中测试 IAB。

不过我自己没试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T14:05:18.153

是的，你可以测试。使用谷歌账户登录谷歌游戏。现在购买应用内产品。

# c# - SharePoint 2010 自定义 Web 服务问题

> ID：12283225
> 
> 赞同：0
> 
> 时间：2012-09-05T14:01:33.337
> 
> 标签：c#, web-services, sharepoint, sharepoint-2010

有人可以把它移到 Sharepoint.Stackexchange 吗？

我创建了一个自定义 Web 服务。我可以访问 WSDL 文件，我可以访问服务并通过浏览器单击方法。非常简单的 Hello world web 服务没有什么了不起的只是简单！请参阅下面的代码。

```
[WebServiceBinding( ConformsTo = WsiProfiles.BasicProfile1_1), WebService(Namespace = "SImpleWebService")]
    class SimpleWebService : System.Web.Services.WebService
    {
        [WebMethod(EnableSession = true, Description = "Typical web method")]
        public string[] HelloWorld()
        {
            List<string> pow = new List<string>();
            pow.Add("Hello World");
            pow.Add("Hi");
            return pow.ToArray();
        }
    } 
```

Web 服务部署到 _layouts 和 _vti_bin 并且都给了我同样的错误。

当我使用提琴手时，我可以看到请求是从我的 ajaxToolkit:AutoCompleteExtender 发送的，我收到了一个错误！

这是一个 401 未经授权的错误。

环回已禁用。

我错过了什么？！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:59:11.510

分别指定它们

[WebService(Namespace = "SImpleWebService")] [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

# perl - 为什么这会损坏我的 yaml 文件？

> ID：12283227
> 
> 赞同：0
> 
> 时间：2012-09-05T14:01:38.157
> 
> 标签：perl, yaml

当我运行以下脚本时，我得到一个损坏的 yaml 文件，如下所示

```
--- 
1: 
  name1: abc
  name2: abc
---
me3: abc
--- 
```

**问题**

谁能看到我做错了？

```
#!/usr/bin/perl

use strict;
use YAML::Syck;
use Fcntl ':flock', 'SEEK_SET';
use warnings;
use Data::Dumper;

my $acc;
my $acc_fh;

$acc->{1}{name1} = "abc";

unlink 'test.yaml';

# write initial
open F, '>', 'test.yaml';
print F YAML::Syck::Dump($acc);
close F;

($acc, $acc_fh) = read_yaml_with_lock('test.yaml');
$acc->{1}{name2} = "abc";
$acc->{1}{name3} = "abc";
write_yaml_with_lock($acc, $acc_fh);

($acc, $acc_fh) = read_yaml_with_lock('test.yaml');
delete $acc->{1}{name3};
write_yaml_with_lock($acc, $acc_fh);

sub read_yaml_with_lock {
    my ($file) = @_;

    open my $fh, '+<', $file or die $!;
    flock($fh, LOCK_EX) or die $!;

    my $obj = YAML::Syck::LoadFile($fh); # this dies on failure
    return ($obj, $fh);
}

sub write_yaml_with_lock {
    my ($obj, $fh) = @_;

    my $yaml = YAML::Syck::Dump($obj);
    $YAML::Syck::ImplicitUnicode = 1;
    seek $fh, 0, SEEK_SET;   # seek back to the beginning of file

    print $fh $yaml . "---\n";
    close $fh;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:08:32.443

您两次写入同一个文件。第二次编写的 YAML 代码比第一次短，因为您在调用之间删除了该哈希键。但是，您既不`unlink`是第一次之后的文件，也不`truncate`是第二次写入文件后的文件。所以你看到的损坏是第一次写入但第二次没有被覆盖的文件部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:11:51.303

该`"me3"`部分是剩下的`" name3"`部分，它被`"---\n"`（4 个字符）部分覆盖。当你第一次写的时候，你有更多的数据。然后你倒回文件句柄位置并写一个较短的数据，这不会覆盖所有旧的。

我认为你的解决方案“应该”是跳过这个传递文件句柄并倒带它，而是`open`为每个子例程使用适当的。例如：

```
sub read_yaml {
    my $file = shift;
    open my $fh, '<', $file or die $!;
    ...
    close $fh;
}

sub write_yaml {
    my ($file, $obj) = @_;
    open my $fh, '>', $file or die $!;
    ...
    close $fh;
} 
```

在操作之间保持文件句柄打开并不是那么有用或高效，并且会带来一些困难。

# java - android中的正则表达式用于不带空格的密码

> ID：12283231
> 
> 赞同：0
> 
> 时间：2012-09-05T14:01:51.130
> 
> 标签：java, android

我在 android 中有一个 EditText 字段。密码应包含最少 4 个字符，最多 20 个字符，开头或中间不带空格。示例 blankspaceRaghu 和 RaghublankspaceRaghu 不应被允许。

```
Pass= password.getText().toString();    

Pattern p= Pattern.compile("[^\\S]+[a-z,A-Z]+");

Matcher m = p.matcher(Pass); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:31:00.660

```
Pass= mEditTextPassword.getText().toString();
Pattern p = Pattern.compile("^[A-Za-z0-9]{4,20}$"); 
Matcher m = p.matcher(Pass); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:31:43.673

更新 - 最后允许空格....

```
Pass= password.getText().toString();    
Pattern p= Pattern.compile("((?!\\s)\\A)(\\s|(?<!\\s)\\S){4,20}\\Z");
Matcher m = p.matcher(Pass); 
```

这匹配

*   匹配字符串的开头，只要它后面没有空格
*   匹配 4 到 20 次出现的空格或非空格，前提是它没有以空格为前缀
*   匹配字符串结尾

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:25:44.963

我认为您想与`\\A\\S{4,20}\\Z`. 那是任何非空白字符，长度在 4 到 20 之间，匹配整个字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T14:24:25.920

试试这个模式：

```
"\\A\\w{4,20}\\z" 
```

`\\A`代表“输入的开始”。

`\\w`是任何字母数字（az、AZ、0-9）字符。当您不允许使用数字时，将其替换为`[a-zA-Z]`

`{4,20}`表示连续 4 到 20 次之前的事情。

`\\z`是字符串的结尾。您没有提到密码字符串后是否允许空格。如果您想允许这样做，请`\\s*`在`\\z`.

有关正则表达式语法的更多信息可以在[java.util.regex.Pattern的文档中找到](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T14:21:21.457

你可以尝试否定匹配——这样你就不必对否定字符类大惊小怪了。

将密码与`/\s/`. 如果匹配，则其中某处有空格，应该被拒绝。如果没有，你可以自由离开。

# c# - 使用 .bat 文件运行多个控制台应用程序实例

> ID：12283233
> 
> 赞同：0
> 
> 时间：2012-09-05T14:01:58.717
> 
> 标签：c#, batch-file

我有一个批处理文件，它运行一个用 C# 编写的控制台应用程序。

此应用程序会将一些文件从一个文件夹移动到另一个应用程序，并在数据库中创建一个条目。

批处理文件计划每 10 分钟运行一次。

如果一个 .exe 运行并在 10 分钟后启动相同 .exe 的另一个实例，会不会有任何问题？

如果 .exe 的另一个实例在 10 分钟后启动并且之前的 .exe 实例仍在运行，会发生什么情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:12:51.043

我建议强制您的可执行文件只允许一个实例。

有一个关于[如何在 C# 中使用互斥锁运行单个实例的问题，](https://stackoverflow.com/q/19147/1443717)[答案](https://stackoverflow.com/a/522874/1443717)中提供 的[链接](http://sanity-free.org/143/csharp_dotnet_single_instance_application.html)显示了一个很好的示例。

单个实例将坚决防止任何数据库/文件访问异常。如果它每十分钟运行一次，我认为在另一个实例已经在运行时取消它不是一个坏主意，如果不是，你总是可以提前几分钟安排一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:13:14.927

你可以尝试各种各样的事情。

或许，查询正在运行的进程并在前一个实例正在运行时退出。

或者，您可以检查文件是否正在文件复制程序中使用（文件观察程序中使用的典型方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:19:08.167

我有一个类似的问题，我所做的是编写一个快速控制台应用程序作为应用程序的界面。

在主循环中，我编写了代码来获取计算机上运行的进程，并检查实例是否已经启动。如果不是，我启动了我的可执行文件。

```
Process[] iProcesslist = Process.GetProcesses();
foreach (Process process in iProcesslist)
{
    if (process.ProcessName == "programName")
    {
        Log.Debug("ProgramName is currently running. Please wait for it to exit before launching again");
        return 0;
    } 
    else
    {
        using (var p = new Process())
        {
            try
            {
                p.StartInfo.FileName = @"C:\Users\username\Documents\Programming_Projects\programName\ProgramName\bin\Debug\programName.exe";
                p.Start();
                p.WaitForExit();
            }
            catch (Exception ex)
            {
                Log.Debug(ex.Message);
            }
        }
    } 
} 
```

可能不是最好的解决方案，但它很快并且可以满足我的需求。

# c++ - 忽略 C++ 中自签名证书的“证书验证”

> ID：12283237
> 
> 赞同：1
> 
> 时间：2012-09-05T14:02:15.377
> 
> 标签：c++, apache, ssl, cgi, xml-rpc

我正在使用 xml-rpc 库在 C++ 中运行 CGI 脚本。服务器代码位于由 Apache 运行的 /var/www/cgi-bin/ 目录中。Apache 还配置为允许运行 cgi 的权限。现在的问题是，由于我系统上的 Apache 有一个自签名证书，当我运行客户端访问这个地址时：“https://localhost/cgi-bin/xmlrpcserver”

它给了我这个错误：客户端抛出错误：无法将 XML 传输到服务器并返回 XML 响应。libcurl 执行 HTTP POST 事务失败，说明：SSL 证书问题，验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

目前，如何绕过检查证书验证来运行和测试我的应用程序。我想要 SSL 连接（加密整个通信），而我想忽略证书验证并使用当前的自签名证书。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:22:41.220

在 xmlrpc_c 库中使用复杂客户端模式，并在 curl 传输 true 中设置 no_ssl_verifyhost 和 no_ssl_verifypeer 选项：

```
#include <string>
#include <iostream>
#include <xmlrpc-c/client.hpp>

int main()
{
  std::string const serverUrl("https://localhost/cgi-bin/xmlrpcserver");
  std::string const methodName("sample.add");

  xmlrpc_c::clientXmlTransport_curl myTransport
    (xmlrpc_c::clientXmlTransport_curl::constrOpt()
     .no_ssl_verifyhost(true)
     .no_ssl_verifypeer(true)
     );
  xmlrpc_c::client_xml myClient(&myTransport);

  xmlrpc_c::paramList sampleAddParms;
  sampleAddParms.add(xmlrpc_c::value_int(5));
  sampleAddParms.add(xmlrpc_c::value_int(7));

  xmlrpc_c::rpcPtr myRpcP(methodName, sampleAddParms);

  xmlrpc_c::carriageParm_curl0 myCarriageParm(serverUrl);
  myRpcP->call(&myClient, &myCarriageParm);

  int const sum((xmlrpc_c::value_int(myRpcP->getResult())));
  std::cout << sum << std::endl;
} 
```

# android - Listview 下载列表末尾的内容

> ID：12283239
> 
> 赞同：1
> 
> 时间：2012-09-05T14:02:19.993
> 
> 标签：android, android-listview

我有一个带有自定义适配器的填充 ListView，我的目标是在用户滚动到末尾时下载新内容？如何实现呢？我认为这应该是这里的东西：

```
 mListView.setOnScrollListener(new OnScrollListener() {
        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        // TODO Auto-generated method stub

        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }
    }); 
```

但我不知道到底该放什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:08:26.447

先看看[这里](https://stackoverflow.com/questions/6358428/implementation-of-onscrolllistener-to-detect-the-end-of-scrolling-in-a-listview)。我建议将其放入您的 onScroll ：

```
if (++firstVisibleItem + visibleItemCount > totalItemCount) {
    // do whatever you want here

} 
```

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:12:01.570

你检查过 CommonsWare 的 Endless Adapter 吗？看看[这个](https://github.com/commonsguy/cwac-endless)。它可能会解决您的问题。

# ruby-on-rails - 在 Ruby on Rails 模型中，为什么在关联上验证存在但在外键上验证唯一性

> ID：12283240
> 
> 赞同：1
> 
> 时间：2012-09-05T14:02:20.880
> 
> 标签：ruby-on-rails, validation, activerecord, model

我有一个带有外键的模型。即使有一个数据库约束阻止重复`user_id`进入`SomeClass`'s 表，我在模型中重复（实际上是先发制人）该验证，以便更优雅地处理它。所以我的模型看起来像这样：

```
class SomeClass < ActiveRecord::Base
  belongs_to :user
  validates_presence_of :user
  validates_uniqueness_of :user_id
  ...
end 
```

我花了一段时间才意识到这是需要做的。在我看来，ActiveRecord 应该期望您在存在性和唯一性验证中使用其中之一`user`或始终使用。`user_id`这将使：

```
validates :user, :presence => true, :uniqueness => true 
```

或者：

```
validates :user_id, :presence => true, :uniqueness => true 
```

可能，这对于代码可维护性是最佳的，因为它将所有`user`约束组合在一起。那么为什么相反呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:29:26.630

`user_id`我相信原因在于和之间的差异`user`。

的存在`user`不仅确保存在`user_id`，而且还确保实际用户的存在。

由于检查 user_id 和 user 的唯一性，AFAIK 它们可能具有相同的效果，检查 user_id 就足以确保它是唯一的。

# c# - SSH 到服务器，然后 telnet 到设备

> ID：12283241
> 
> 赞同：2
> 
> 时间：2012-09-05T14:02:21.970
> 
> 标签：c#, ssh, telnet

我需要 ssh 到 debian 服务器，然后从这个服务器 telnet 到其他（cisco）设备，运行一些命令并读取响应。

我已经开始编写 C# 应用程序以连接到 ssh 服务器（使用[SSH.NET 库](http://sshnet.codeplex.com/)），但是我应该如何继续从该服务器远程登录？

我应该编写可以远程登录到设备并远程执行该程序的 C 或 Perl 程序吗？没有像bash脚本这样更简单的方法吗？或者也许异步 ssh 连接允许我在 debian 服务器上执行 telnet 程序并远程控制它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:11:26.560

由于 SSH 允许[隧道](http://en.wikipedia.org/wiki/Tunneling_protocol#Secure_shell_tunneling)，也许您可​​以启动 SSH 会话，为 telnet 部分创建一个隧道，然后您可以从同一个 C# 程序通过隧道向 Cisco 设备发出 telnet 命令。

如果您决定采用这种方法，[这个关于 .Net Telnet 库](https://stackoverflow.com/questions/390188/c-sharp-telnet-library)的问题可能会很有用

# sql - 没有为所需参数指定值

> ID：12283242
> 
> 赞同：2
> 
> 时间：2012-09-05T14:02:23.643
> 
> 标签：sql, ms-access

我正在尝试针对访问数据库运行下面的 qry，但出现错误 No value Given for the required parameter?

```
SELECT        ID, DateColumn, Less90, Between90180, Between180365, GreaterThan365, SUM(Less90) + SUM(Between90180) + SUM(Between180365) + SUM(GreaterThan365) 
                     AS Total, SUM(Between180365) / Total AS Expr1,
                         (SELECT        SUM(Between180365) / (SUM(Less90) + SUM(Between90180) + SUM(Between180365) + SUM(GreaterThan365))
                           FROM            tblHandpieceFaliuresAge T2
                           WHERE        T2.ID <= tblHandpieceFaliuresAge.ID) AS RunningSum
FROM            tblHandpieceFaliuresAge
GROUP BY ID, DateColumn, Less90, Between90180, Between180365, GreaterThan365 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T14:05:55.283

您输入的列之一不正确，Access 认为您正在尝试传递参数。

再次检查您的字段名称，并确保它们都已正确输入。

我相信问题可能是这样的：

```
SUM(Less90) + SUM(Between90180) + SUM(Between180365) + SUM(GreaterThan365) 
                 AS Total 
```

然后您稍后将其称为`Total`此处：

```
SUM(Between180365) / Total 
```

Access 不能获取别名并在查询中重新使用它，你需要这个：

```
SUM(Between180365) / 
    (SUM(Less90) + SUM(Between90180) + SUM(Between180365) + SUM(GreaterThan365)) 
```

还要确保你处理分母，这样你就不会被零除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:06:20.930

造成这种情况的通常原因是您拼错了一个字段名称，因此 Access 认为它​​是一个参数（未指定）。

有两种方法可以解决此问题：

*   手动检查每个字段名称，以确保拼写正确或
*   开始从查询中删除字段，直到问题消失。删除的最后一个字段是罪魁祸首。

# .net - TCP/IP 侦听器 Web 应用程序 .net

> ID：12283246
> 
> 赞同：0
> 
> 时间：2012-09-05T14:02:32.033
> 
> 标签：.net, web-services, web-applications, tcp-ip

参考链接- [http://www.codeproject.com/KB/vb/winsock_revanped.aspx](http://www.codeproject.com/KB/vb/winsock_revamped.aspx)

我们开发了VB.Net应用程序或windows应用程序，它通过TCP/IP监听器接收客户端连接请求，使用VB6编程语言开发的客户端应用程序。windows 聊天服务器是基于上面链接的示例代码开发的。

我的应用程序是从 VB6 应用程序接受订单的酒店数据库。由于我们现有的 VB6 应用程序具有所有功能、数据库等。此外，VB6 PC 使用 TCPIP 侦听器为 LAN 中的节点获取数据。现在我们计划将节点更改为网站。服务器（本地 PC 上运行的 VB6 应用程序），我不想更改，只是我们要转移到 Web 的节点。

客户端和服务器之间的通信工作正常，没有问题，但我正在尝试开发一个 Web 应用程序。所以我的问题是 Web 应用程序或任何等价物支持 TCP 侦听器吗？，或者在Web应用程序的情况下使用Web服务进行通信更好？

Web 应用程序 ASP.net(VB/C# .net 3.5) 将在专用服务器 windows 2003 R2 上运行。到目前为止，我们可以创建一个 Windows 应用程序，并尝试在 Web 服务器上安装它。我为测试创建的聊天服务器应用程序在我的 LAN 上运行良好，我不确定它是否也可以在 Web 服务器上运行。在局域网的情况下，我使用局域网 IP，对于互联网，我将不得不使用互联网 IP。如果这可行，它是否会有安全问题或问题。用于 TCP/IP 通信的所需端口在 Web 服务器上保持打开状态。

框架 3.5，用于 TCP/IP 侦听器 Web 应用程序的 VS2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:55:24.000

从本质上讲，您的 Web 服务器实际上只是一个大型 TcpListener，针对并发使用进行了高度优化。所以考虑到这一点，我看不出在会话请求中打开另一个 TcpListener 只是为了发送聊天消息的意义。

更好的方法是使用 Web 请求和 Ajax 来做这种事情。我敢肯定，有很多“网络聊天服务器”示例项目可供演示。

# c# - C#：发送没有 UTF-8 编码的 HTTP GET 请求

> ID：12283255
> 
> 赞同：1
> 
> 时间：2012-09-05T14:02:59.460
> 
> 标签：c#, asp.net, utf-8, httpwebrequest

我需要将 HTTP GET 请求从 C# 发送到 CLASSIC ASP 服务。该服务的构建方式是使用 Windows-1255 编码而不是标准的 UTF-8 对来自 QueryString 的数据进行解码。

似乎 HttpWebRequest 类总是用 UTF-8 编码 GET 数据，它对我不起作用。有没有办法从 C# 发送 HTTP GET 请求，而 GET 数据的编码不同于 UTF-8 编码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:07:32.643

您需要在获取请求上设置标头：

内容类型：文本/xml；字符集=windows-1255

```
HttpRequest r = new HttpRequest(.....);    
r.Headers.Add("Content-Type", "text/xml; Charset=windows-1255"); 
```

也许这篇文章也会有一些用处：

[从 http get 请求中读取非英文字符](https://stackoverflow.com/questions/9430982/read-non-english-characters-from-http-get-request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:23:40.543

好的，我终于得到了答案。

首先，在标头中指定 ContentType 不起作用。如果目标 URL 包含非英文字母，则 HttpWebRequest 将始终使用 UTF-8 + URLEncode 来构建请求发送到的最终 URI。

要使用不同于 UTF-8 的编码，我需要自己对 URL 值进行编码（而不是像我预期的那样为 HttpWebRequest 提供必要的编码）。

以下函数构建 HTTP GET URL，而值使用任何请求的编码（而不是默认的 UTF-8）进行编码：

```
 string BuildData(NameValueCollection getData, Encoding enc)
    {
        StringBuilder urldata = new StringBuilder();
        for (int i = 0; i < getData.Count; i++)
        {
            if (i > 0) urldata.Append("&");
            urldata.Append(getData.Keys[i] + "=" + HttpUtility.UrlEncode(enc.GetBytes(getData[i])));
        }
        return urldata.ToString();
    } 
```

HttpWebRequest 可以与类似的东西一起使用

```
"http://get-destination.com/submit?" + BuildData(keysAndValues, Encoding.GetEncoding(1255)); 
```

在这种情况下，HttpWebRequest 获取已编码的 URL，该 URL 不包含非英文字母，并保持原样。

# java - 获取步行路线 - Android

> ID：12283256
> 
> 赞同：1
> 
> 时间：2012-09-05T14:02:58.777
> 
> 标签：java, android, google-maps

我使用该链接上使用的方法来显示两个 GeoPoints 之间的路线：

[为什么使用 KML 数据检索适用于 Android 的 Google 路线不再有效？](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)

我想知道是否有办法获得步行路线而不是驾车路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:18:43.157

您需要在 URL 中使用 mode 参数值。

[在这里](https://developers.google.com/maps/documentation/directions/#RequestParameters)查看，可以附加到 URL 的不同参数。

为了在 URL 中提供 Mode 值，您只支持 4 种模式。

1.  驾驶（默认）
2.  步行
3.  骑自行车
4.  过境

[此处记录了](https://developers.google.com/maps/documentation/directions/#TravelModes)支持的模式值。

> 示例网址：
> 
> [http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal&sensor=false&mode=walking](http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal&sensor=false&mode=walking)

# javascript - chrome 扩展 - 按需内容脚本

> ID：12283259
> 
> 赞同：0
> 
> 时间：2012-09-05T14:03:06.213
> 
> 标签：javascript, google-chrome, content-script

我为 Chrome 编写了我的小扩展，它在网页的上下文中工作。

一切都很好，除了每次访问内容脚本匹配中 manifest.json 中定义的 URL 时都会执行代码。

我想要的是在点击 url 栏旁边的扩展图标后手动启动它 - “按需”。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:40:32.697

是的，有可能。我把它从：http: [//developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

相关部分是：“...要将代码插入页面，您的扩展程序必须具有页面的跨域权限。它还必须能够使用 chrome.tabs 模块。您可以使用清单文件的权限字段。一旦您设置了权限，您就可以通过调用 executeScript() 将 JavaScript 注入页面..."

```
/* in background.html */
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(null,
    {code:"document.body.bgColor='red'"});
}); 
```

# html - webkit浏览器的自定义css滚动条问题

> ID：12283261
> 
> 赞同：0
> 
> 时间：2012-09-05T14:03:07.867
> 
> 标签：html, css, webkit

我创建了一个自定义滚动条，它似乎在 Firefox 上运行良好，但是我的滚动条出现在 webkit 浏览器的屏幕上时遇到了问题。[点击这里](http://iamnatesmithen.com/bodyworks/product-details.php)

```
 #product-desc{
        top: 270px;
        left: 20px;
        right: 20px;
        bottom: 20px;
        height: 90px;
        max-width: 350px;
        overflow-x: hidden;
        overflow-y: scroll;
    }

    #product-desc :: -webkit-scrollbar{
        width: 12px;
    }

    #product-desc :: -webkit-scrollbar-track{
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
    }

    #product-desc :: -webkit-scrollbar-thumb{
        border-radius: 10px;
         -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
         color: #000;
        } 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:25:21.707

这些是伪元素本身。滚动条的实际部分。

```
::-webkit-scrollbar              { /* 1 */ }
::-webkit-scrollbar-button       { /* 2 */ }
::-webkit-scrollbar-track        { /* 3 */ }
::-webkit-scrollbar-track-piece  { /* 4 */ }
::-webkit-scrollbar-thumb        { /* 5 */ }
::-webkit-scrollbar-corner       { /* 6 */ }
::-webkit-resizer                { /* 7 */ } 
```

你可以看看**[WebKit 中的自定义滚动条](http://css-tricks.com/custom-scrollbars-in-webkit/)**

您也可以通过**[Webkit 方式来使用样式滚动条 - CSS3](http://www.css3.info/styling-scrollbars-the-webkit-way/)**

# java - 从属性中删除元素

> ID：12283267
> 
> 赞同：1
> 
> 时间：2012-09-05T14:03:29.367
> 
> 标签：java, properties

为了避免[ConcurrentModificationException](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ConcurrentModificationException.html)，我采取以下措施：

```
 List<String> tobeRemoved = new ArrayList<String>();

        for (Object propertyKey : suppliedContent.keySet()) {
            key = (String) propertyKey;

            if (EqualityUtils.isMatching(rgx, key)) {
                tobeRemoved.add(key);
            }
        }

        for (String o : tobeRemoved) {
            suppliedContent.remove(o);
        } 
```

有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:04:26.127

我认为在匹配时使用和调用会做同样的事情`iterator`。`remove()``iterator`

```
Iterator<String> supplieIter  = suppliedContent.keySet().iterator();

    while(supplieIter.hasNext()){
        key = supplieIter.next();

        if (EqualityUtils.isMatching(rgx, key)) {
           supplieIter.remove()
        }
    } 
```

编辑：手写代码。可能存在语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:07:46.563

您可以使用 Iterator.remove() 之类的

```
Properties suppliedContent = ...
for (Iterator iter = suppliedContent.keySet().iterator(); iter.hasNext(); ) 
    if (EqualityUtils.isMatching(rgx, (String) iter.next())) 
        iter.remove(); 
```

# javascript - 将数据从身份验证 cookie 传递到 javascript

> ID：12283268
> 
> 赞同：0
> 
> 时间：2012-09-05T14:03:35.223
> 
> 标签：javascript, asp.net

我正在使用在同一域上的网站之间传递的身份验证 cookie。cookie 包含一些用户信息和页面信息（登录号）。设计目标是让用户单击引用网站上的按钮，它将启动第二个网站，基于 cookie 进行身份验证，并使用登录号做一些有用的事情。我构建了大部分内容，包括通过身份验证并在接收系统上正确解析。

我遇到的问题是我无法将 cookie 中的数据放入页面上的 javascript 中。似乎当我从 website1 启动 website2 时，在 page_load 事件（处理 cookie 解析）之后不会触发 $(document).ready() 。我也尝试使用文字来发布 javascript 代码，它从未被触发（似乎它在客户端的东西被执行之后放置它。

我真正想做的是使用这些数据调用 javascript 函数 getResults(accnum)。

我在 page_load 事件上有这段代码：

```
 if (userdata != null)
        {
            accnum = userdata[4];
        }
        if (accnum != String.Empty)
        {
            //HttpCookie accnumcookie = new HttpCookie("accnum", accnum);
            //this.Context.Response.Cookies.Set(accnumcookie);
        }
    } 
```

当我运行 .Set 函数时，我不太确定内部结构和细节，但长话短说，cookie 已设置但什么也没做。

这是文档。准备好了。

```
$(document).ready(function () {
    var accnum = new String();
    accnum = GetCookie('accnum');
    if (accnum != null) {
        document.cookie = 'test=testz';
        var srch = document.getElementById('crit'); 
        srch.style.display = 'none';

        getResults('', 'accnum', accnum);
     } 
```

# image - VBA 的资源图像文件？

> ID：12283270
> 
> 赞同：2
> 
> 时间：2012-09-05T14:03:39.973
> 
> 标签：image, vba, excel, ms-word

我有一个word doc，我一直在为它编写一些VBA，在其中我经常使用它：

```
LoadPicture(ThisDocument.Path & "image_name") 
```

但是，为此，我需要用户在同一目录中有一个“图像”文件夹，这非常不方便。

有没有更好的方法在 VBA 项目中包含资源？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-06T05:02:03.407

我使用 Word 中的 QuickParts 来存储它们。创建一个新的文档模板，将图像粘贴到页面上并选择它。然后转到 QuickParts 并将其添加到库中并保存您的模板。对要添加的每个项目重复此操作。然后使用 VBA 代码将模板应用到文档，您的 QuickPart 将从模板中提取。然后使用第二个宏从 QuickPart 中提取图像。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-17T03:27:21.070

为什么不在文档打开时检查该文件夹是否存在，如果不存在则创建该文件夹？

```
Private Sub Document_Open()
    Dim imagesFolder As String

    imagesFolder = ThisDocument.Path & "\images\"
    If Len(Dir(imagesFolder, vbDirectory)) = 0 Then MkDir imagesFolder

End Sub 
```

# ruby-on-rails - 可以让思考狮身人面像优先考虑更大的 n-gram 匹配吗？

> ID：12283272
> 
> 赞同：1
> 
> 时间：2012-09-05T14:03:44.067
> 
> 标签：ruby-on-rails, ruby, search, thinking-sphinx, n-gram

我正在使用thinking-sphinx 2.0.1 gem 和rails 2.3.8 和ruby 1.8.7。

我正在尝试提高我网站上的搜索质量，并且我希望能够优先考虑二元组和三元组匹配而不是不连续的多字匹配。

如果我的术语有误，这里有一个例子：对于查询“绿色番茄”，我希望“油炸绿色番茄三明治”被识别为比“绿豆和番茄沙拉”更好的匹配。

理想情况下，我想控制这种效果的强度，也许能够连续评估组成词的接近度（即匹配的词相距越远，整体匹配越弱）。

# php - 从 exec() Windows 2008 Server 使用 rsh

> ID：12283274
> 
> 赞同：0
> 
> 时间：2012-09-05T14:03:45.627
> 
> 标签：php, windows-server-2008-r2, rsh

似乎很多人对此有类似的问题，但没有一个符合我正在做的事情的答案。

我目前在 Windows 2008 R2 服务器上运行 apache 和 php。从那里我试图运行一个 rsh 命令。这是一个例子：

```
exec('rsh compname -l username "perl /mypath/server_info.pl"', $output, $status); 
```

`$output`始终为空，并且`$status`始终为 0。

在这台 2008 服务器上进行设置之前，我让它在具有相同配置的 Windows XP 机器上运行。它使用相同的用户名连接同一台服务器并运行相同的 pl 脚本。我什至可以在浏览器中并排打开它们，它可以在 XP 机器上运行，而不能在 2008 服务器上运行。

即使我`ls`通过 rsh 运行一个简单的命令，我也没有得到任何输出。而且它似乎不是一个 php 问题，因为如果我只是运行

```
exec('ping servername',$output, $status); 
```

我得到了预期的输出。

有没有人看到过这样的问题，或者知道为什么 rsh 具体没有发送它的输出？

# jquery - 使缩略图不移动（jquery 隐藏/显示，预览 div 下的缩略图）

> ID：12283278
> 
> 赞同：0
> 
> 时间：2012-09-05T14:04:07.697
> 
> 标签：jquery, html, css

所以基本上我给了我一行小缩略图（在一个 div 中），就在另一个包含隐藏较大图像的 div 下方，当我点击一个拇指时，当前图像从 jquery 获取 .hide()，我点击的是.show()'n，非常简单且有效。唯一的问题 - 图像消失了一秒钟，在下一个出现之前，预览 div 变空，所有缩略图一直移动到 div 的位置！我该如何预防？

这是脚本： $(document).ready(function() {

```
var current = '#s0';
var last = '#s0';

$(current).show();

$(".thumb").click(function(){
    last = current;
    current = '#s'+$(this).attr('id');
    $(last).hide(1000);
    $(current).show(1000);
    //$('#tmp').text(current+' / '+last);
});

}); 
```

这页纸：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js">        </script>
<script src="scripts/scripts.js"></script>
<link rel='stylesheet' href='styles/default.css' type='text/css'>

<html>
<title>Playground</title>
<head>
    <h2>this is a test...</h2>
</head>
<body>
    <?php
    $i = 0;
    $images = glob("./images/*.jpg");

    echo '<div width=600 height=600 class=\'preview\' id=\'slides\'>';
    foreach($images as $image)
    {
    echo '<img class=\'slide\' id=\'s'.$i.'\' src=\''.$image.'\' width=600 height=600 />';
    $i++;
    }
    echo '</div>';

    $i = 0;
    echo '<div class=\'thumbs\' id=\'thumbs\'>';
    foreach($images as $image)
    {
    echo '<img class=\'thumb\' id=\''.$i.'\' src=\''.$image.'\' width=100      height=100 />&nbsp';
    $i++;
    }
    echo '</div>';
    echo '<div id=\'tmp\'/>';
    ?>
</body>

</html> 
```

和CSS：

```
.slide{
display: none;
}

body {
 color: black;
 background-color: #DCDCDC;
 font-family: sans-serif;
 font-style: italic;
 font-size: xx-small;
 }

h2{
  text-align: center;
 }

 div{
  text-align: center;
 } 
```

由于某种原因，我无法在此处正确粘贴代码，所以这里是 jfiddle 地址，非常感谢！ [http://jsfiddle.net/EbDvk/](http://jsfiddle.net/EbDvk/)

# ruby-on-rails-3 - Rails 使用虚拟变量保存记录草稿

> ID：12283280
> 
> 赞同：0
> 
> 时间：2012-09-05T14:04:15.480
> 
> 标签：ruby-on-rails-3, associations

所以我需要更多的只是建议而不是实际代码，但这是我的情况：

我有一个需要两个关联的模型——一个作者和一个用户。但是，我希望作者可以创建该记录，并且以后创建的用户可能会“声明”该记录。

我想出的最佳解决方案是在这些情况下使用某种“虚拟用户”关联，但感觉很笨拙。

有更好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:00:42.570

如何使关联*不再*是必需的？关联是否通过验证强制执行？如何放松验证呢？因此，在声明它之前不会存在任何用户关联。

# php - 解析 csv 的第一行并在数据库中创建一个表

> ID：12283282
> 
> 赞同：0
> 
> 时间：2012-09-05T14:04:16.970
> 
> 标签：php, mysql

我每晚使用 PHP 的 cron 作业下载新的 csv。每个 csv 通常大致相同，可能一个月内的一个晚上，一个字段是新的。我需要获取新字段并将其附加到数据库中。我不知道如何获取新字段的类型。我看到其他人对 gettype() 的问题，但我不确定这是否可行，因为数据在 csv 中，所以当一些需要浮点数或整数时，它们不都是字符串吗？我将如何检查类型？

第二个问题，有没有办法检查表中是否没有名称？例如，如果他们添加了一个名为 foo52 的新字段，并且我的数据库中有 foo1 到 foo51，是否有一种快速的方法来搜索不存在的字段，或者我必须为每个字段使用一个 select 语句并且当它为假时附加它？

我使用 MySQL 作为我的数据库。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:07:50.567

我发现[parsecsv-for-php](http://code.google.com/p/parsecsv-for-php/)库对于 [re|de] 构建 CSV 数据非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:11:07.653

关于获取类型的第一个问题是简单地尝试转换数据本身，然后通过比较查看数据是否等效`==`。

所以，

```
some,data,is,123 
```

读入数据后，您可以尝试转换为各种类型，例如字符串、整数等……然后您就可以确定数据的类型。

对于第二个问题，您可以通过以下方式获取列名：

```
show columns from db.table_name 
```

然后你可以做一个简单`in_array`的测试新的列名是否已经在数据库中。

编辑：

使用`array_diff`可以简化从 CSV 中查找缺失/新列名的过程。

```
csv_names = get_csv_column_names();
sql_names = get_sql_column_names();

new_names = array_diff( csv_names, sql_names ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:17:20.367

对于第一个问题：您可以使用 is_numeric() 测试它是否为数字。如果没有，则存储为字符串。如果是，请在数据库中将该字段创建为数字。如果需要，您可以使用正则表达式来检查它是否是日期或您认为需要正确存储的其他数据类型（即不是默认文本）

对于第二个问题：在 Postgres 中获取表的字段名是通过以下查询完成的

```
$sql = "SELECT attname FROM pg_catalog.pg_attribute
                    WHERE attrelid =
                        (SELECT c.oid FROM pg_catalog.pg_class c LEFT JOIN pg_namespace n  ON n.oid = c.relnamespace
                            WHERE c.relname = '$this->tableName' AND n.nspname = 'public')
                        AND attnum > 0
                        AND NOT attisdropped"; 
```

对于 MySQL，它应该可以通过“显示来自 db.table_name 的列”来实现。

获得字段后，使用 in_array() 检查它是否已经存在...

请注意：您可能需要检查 CSV 中的所有列（如果它们已经存在）。如果没有：为其添加一个新列。如果是，请保持原样...

# wso2 - wso2 API Manager 和 BAM - 如何控制 API 调用？

> ID：12283285
> 
> 赞同：1
> 
> 时间：2012-09-05T14:04:25.387
> 
> 标签：wso2, esb, wso2-am, wso2carbon, wso2bam

如何检索 API 调用的数量？我知道数据必须在某个地方，因为 wso2 BAM 显示具有相似数据的饼图......

我想在中介序列中获得该数字；那可能吗？这可以通过数据库查找来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:36:07.993

WSO2 API Manager 中的 API 使用监控的工作方式是，有一个*API 处理程序*( **org.wso2.carbon.apimgt.usage.publisher.APIUsageHandler** ) 为通过 API 网关的每个请求和响应调用。在此处理程序中，与 API 使用有关的所有相关信息都将发布到 WSO2 BAM 服务器。WSO2 BAM 服务器将此数据保存在随附的 Cassandra 数据库中。然后是一个 BAM 工具箱，它与使用 Apache Hive 编写的所需分析脚本打包在一起，可以安装在 BAM 服务器上。这些脚本会定期汇总数据并将汇总的数据保存到 sql 数据库中。所以*API Publisher中显示的图形和图表*Web 应用程序是使用 sql 数据库中的汇总数据创建的。

现在，如果您需要从这些汇总的 sql 表中提取出来，那么我想这个过程非常简单。您可以为此使用 DBLookup 中介。但是如果你需要的数据的某个维度由于汇总而丢失了，那么你将需要做更多的工作。

你有两个选择。

1.  完全不涉及编码的最简单方法是编写适合您要求的自定义 Hive 脚本并将数据汇总到 sql 表中。然后，就像之前使用 DBLookup 中介来读取数据一样。您可以查看产品随附的现有 Hive 脚本以了解其编写方式。
2.  如果您不希望图片中出现 BAM，您仍然可以使用最少的编码来完成，如下所示。执行发布的实现类是**org.wso2.carbon.apimgt.usage.publisher.APIMgtUsageDataBridgeDataPublisher**。此类实现接口**org.wso2.carbon.apimgt.usage.publisher.APIMgtUsageDataPublisher**。该接口具有如下三个实例方法。

    公共无效初始化（）

    公共无效发布事件（RequestPublisherDTO requestPublisherDTO）

    公共无效发布事件（ResponsePublisherDTO responsePublisherDTO）

init() 方法在服务器启动期间只运行一次。您可以在此处添加引导类所需的所有逻辑。publishEvent(RequestPublisherDTO) 是您发布请求事件的地方，而 publishEvent(ResponsePublisherDTO) 是您发布响应事件的地方。DTO 对象分别是请求和响应数据的封装表示。

您需要做的是为此接口编写一个新实现，并将其配置为**api-manager.xml中****DataPublisherImpl**属性的值。为了使事情更容易，您可以简单地扩展现有的**org.wso2.carbon.apimgt.usage.publisher.APIMgtUsageDataBridgeDataPublisher**，编写必要的逻辑以将使用数据保存到 init()、publishEvent(RequestPublisherDTO) 和 publishEvent(ResponsePublisherDTO) 中的 sql 数据库) 并在每个方法的末尾调用其各自的超类方法。例如，最重要的 init() 将调用 super().init()。这样，您只需为您的需求添加必要的代码，并将 BAM 统计数据收集需求留给超类。

# android - 在列表视图适配器膨胀中使用过滤器

> ID：12283289
> 
> 赞同：0
> 
> 时间：2012-09-05T14:04:48.290
> 
> 标签：android, listview, inflate, baseadapter, textwatcher

我有问题，我无法在我的列表视图上进行搜索！

我尝试使用 inflate 实现 listview 并进行搜索，但不幸的是我不能...... logcat 中没有出现错误并尝试调试但不幸的是显然没问题......只需在 listview filtar 开始时不在 textview 中写入。 ..

下面是我的代码

FriendRequestListener.class

```
/*
 * callback after friends are fetched via me/friends.
 * 
 */
public class FriendsRequestListener extends BaseRequestListener {

    @Override
    public void onComplete(final String response, final Object state) {
        dialog.dismiss();

        try{
            arrayName = new ArrayList<String>();
            jsonArray = new JSONObject(response).getJSONArray("data");
            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject json_data = jsonArray.getJSONObject(i);
                if(json_data.has("name")){
                    String getFriendName = json_data.getString("name");

                    arrayName.add(getFriendName);
                }else{
                    String getFriendName = null;
                    arrayName.add(getFriendName);
                }
            }
        }catch(JSONException e){
            Log.d(TAG, e.getMessage());
            return;
        }

        stringName = new String[arrayName.size()];
        stringName = arrayName.toArray(stringName);

        EscolhaAmigosFacebook.this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            adapter = new FriendListAdapter(EscolhaAmigosFacebook.this, stringName, arrayName);
            friendsListView.setTextFilterEnabled(true);
            friendsListView.setAdapter(adapter);
        }
        });
    } 
```

FriendAapter.class

```
/**
 * Definition of the list adapter
 */
public class FriendListAdapter extends BaseAdapter implements Filterable {

    String[] fetFriendName;

    List<String> arrayList;
    List<String> mOriginalValues;

    LayoutInflater mInflater = null;
    EscolhaAmigosFacebook friendsList;

    FriendListAdapter(EscolhaAmigosFacebook friendsList, String[] stringName, ArrayList<String> arrayName) {
        this.friendsList = friendsList;
        if (Utility.model == null) {
            Utility.model = new FriendsGetProfilePics();
        }
        Utility.model.setListener(this);

        fetFriendName = stringName;

        arrayList = new ArrayList<String>();
        mOriginalValues = arrayName;

        mInflater = LayoutInflater.from(friendsList.getBaseContext());

    }

    @Override
    public int getCount() {
        return mOriginalValues.size();
    }

    @Override
    public Object getItem(int position) {
        return mOriginalValues.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        JSONObject jsonObject = null;
        final ViewHolder holder;
        View vi = convertView;

        try {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        if (vi == null) {

            vi = mInflater.inflate(R.layout.friend_item, null);
            holder = new ViewHolder();
            holder.profile_pic = (ImageView) vi.findViewById(R.id.profile_pic);

            TextView txtFriendsName = (TextView)vi.findViewById(R.id.name);
            txtFriendsName.setText(fetFriendName[position]);
            vi.setTag(holder);
        }else{
            holder = (ViewHolder) vi.getTag();
        }

        try {
                 holder.profile_pic.setImageBitmap(Utility.model.getImage(
                 jsonObject.getString("id"), jsonObject.getString("picture")));
            } catch (JSONException e) {
                holder.name.setText("");
            }   
        return vi;
       }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter(){

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                arrayList = (List<String>) results.values;
                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                FilterResults results = new FilterResults();
                List<String> FilteredArrList = new ArrayList<String>();

                if (constraint == null || constraint.length() == 0) {
                    results.count = mOriginalValues.size();
                    results.values = mOriginalValues;
                } else {
                    constraint = constraint.toString();

                    for (int i = 0; i < mOriginalValues.size(); i++) {
                        String data = mOriginalValues.get(i);

                        if (data.toLowerCase().startsWith(constraint.toString()))   {
                            FilteredArrList.add(data);
                        }
                    }

                    results.count = FilteredArrList.size();
                    results.values = FilteredArrList;
                }

                return results;
            }

        };
        return filter;
    }

} 
```

完成方法

```
 et_search = (EditText) findViewById(R.id.et_Search);
    et_search.addTextChangedListener(filterTextWatcher);

}

private TextWatcher filterTextWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        adapter.getFilter().filter(s.toString());
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }
}; 
```

我知道它看起来很棒，但如果有人有耐心帮助我，请！我试过看各种帖子，但一无所获！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:20:04.200

我还没有在适配器上使用过滤器，但是我已经使用了很多适配器，从过滤后我可以看出你将结果放在 arraylist 上，但你没有在 getCount、getItem、getView 上使用 arrayList，因此不使用您在数据上创建的过滤器，而是使用完整的项目列表。

# javascript - 如何使用 JavaScript 跳转到放置在页面底部的特定 div？

> ID：12283293
> 
> 赞同：7
> 
> 时间：2012-09-05T14:04:51.130
> 
> 标签：javascript, html, internet-explorer, web-applications, web

我有一个位于页面底部的 div：

```
<div id="myDiv"></div> 
```

我想在执行完我的 JS 函数后转到这个 div。换句话说，我想让我的 url 变成`myurl#myDiv`并转到我的 div。但无需重新加载页面。如何使用 JavaScript 做到这一点？不幸的是，我还没有找到解决这个问题的有效解决方案。我没有使用任何 JS 库和框架。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T14:07:12.200

要滚动到特定元素，请使用IE6+ 和真实浏览器支持的[scrollIntoView](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)：

```
document.getElementById('myDiv').scrollIntoView(); 
```

检查`window.location.hash`DOMReady，查看 URL 中是否有与文档中的任何元素匹配的哈希。

如果文档中有`#myDiv`链接，您需要向`onclick`它们添加侦听器，手动执行滚动，按照上面的代码，并`return false`避免跟随链接到`#myDiv`.

[演示](http://jsfiddle.net/Y3n4n/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-05T14:07:47.153

尝试将窗口的位置设置为 ID 的位置。然后浏览器将滚动到该元素。

```
window.location.hash = '#myDiv'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T14:12:13.277

scrollIntoView **(true)**方法还接受一个参数，指定是对齐到顶部 (true) 还是底部 (false)。

# image - visualworks - 如何重绘图像？

> ID：12283295
> 
> 赞同：0
> 
> 时间：2012-09-05T14:05:08.747
> 
> 标签：image, visualworks

我有显示图像的 GUI，但是当我最小化或移动应用程序窗口时，图像被删除....如何将其回调，或如何防止它？以某种方式重绘一个小部件会破坏它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:23:19.287

you could press the middle mouse-key in order to open a menu where you can click on refresh. This should refresh your window and redraw everything in there. You can use it to debug when your image is drawn and maybe find out why you don't see anything. But in general a little more information would be neat.

# oracle - 在 PL/SQL 块中调用 SQL*Plus 命令

> ID：12283296
> 
> 赞同：2
> 
> 时间：2012-09-05T14:05:11.477
> 
> 标签：oracle, oracle11g

有没有办法使用 pl/sql 程序/包设置服务器输出开/关。我想在 SQL*PLUS 屏幕上显示我的数据时做一些更改。就像[我以前的帖子一样](https://stackoverflow.com/questions/12278889/change-oracle-display-message)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:22:20.753

您不能从 PL/SQL（仅在服务器上运行）调用 SQL*Plus 命令（仅在客户端上运行）。

但是，在您只想启用和禁用消息输出的特定情况下，您可以调用 PL/SQL 过程[`dbms_output.disable`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_output.htm#i999434)和[`dbms_output.enable`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_output.htm#i999293).

但是，如果您依赖写入的数据`dbms_output`显示给人类用户，那么您几乎可以肯定做错了什么。生产过程应该将重要数据写入其他位置（即某处的表），而不是写入`dbms_output`并希望客户端应用程序恰好配置为显示数据。

# c# - 保存用户名但在 c# 中显示名称

> ID：12283300
> 
> 赞同：1
> 
> 时间：2012-09-05T14:05:27.793
> 
> 标签：c#, session, session-variables

我正在使用c#，在vs 2008，框架3.5中，我需要保存用户名，当用户登录时，它会显示他/她的名字和姓氏，此时可以保存它，这就是我想要的但需要向用户显示他/她的用户名而不是他/她的名字和姓氏。这是我的代码，在此先感谢。

```
//code in the login
ClPersona login = new ClPersona();
bool isAuthenticated = login.sqlLogin1((txtUsuario.Text), (txtPassword.Text));
if (isAuthenticated)
{
Session["sesionicontrol"] = login.NombreUsuario;
Response.Redirect("../MENU/menu1.aspx");
}

//code in the form where shows the username but I want the first and last name

public partial class menu2 : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
lblNombreUsuario.Text = (string)Session["sesionicontrol"]; 
if (!IsPostBack)

//ClPersona class

public Boolean sqlLogin1(string nombreUsuario, string password)
{
string stSql = "select * from usuarios where usuario='" + nombreUsuario + "' and
pass='" + password + "'and id_rol='1'";
Bd miBd = new Bd();
DataTable dt = miBd.sqlSelect(stSql);
DataSet ds = new DataSet();
ds.Tables.Add(dt);
//return ds;
if (dt.Rows.Count > 0)
{
return true;
}
else
{
return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:17:04.907

修改两段

第一的

```
if (isAuthenticated)
{
Session["YouObject"] = login;//<--

Session["sesionicontrol"] = login.NombreUsuario;
Response.Redirect("../MENU/menu1.aspx");
} 
```

第二

```
protected void Page_Load(object sender, EventArgs e)
{
   if(Session["YouObject"] != null)
   { 
     ClPersona obj = (ClPersona )Session["YouObject"];
     lblNombreUsuario.Text = string.Format("{0}-{1}", obj.FirstName, obj.LastName ) 

   }

      lblNombreUsuario.Text = (string)Session["sesionicontrol"];
     ....
} 
```

# c++ - std::set::iterator 和 std::set::const_iterator 之间是否存在操作差异？

> ID：12283302
> 
> 赞同：10
> 
> 时间：2012-09-05T14:05:37.730
> 
> 标签：c++, c++11, iterator, set, containers

对于大多数容器，`iterator`类型提供对容器中值的读写访问，而`const_iterator`类型提供只读访问。但是，对于`std::set<T>`，迭代器类型不能提供读写访问，因为修改集合中的值（可能）会破坏容器不变量。因此，在`std::set<T>`、`iterator`和中都`const_iterator`提供只读访问。

这引出了我的问题：你可以用 a 做`std::set<T>::iterator`的事情和你可以用 a 做的事情之间有什么区别`std::set<T>::const_iterator`吗？

请注意，在 C++11 中，容器的操作方法（例如`erase`）可以带`const_iterator`参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T14:10:27.507

不，它们之间没有太大的功能差异。当然，在 C++03 中*曾经*`set<T>::iterator`有过，当时没有返回`const T&`. 但是一旦他们改变了它，他们就被两种不同类型的迭代器困住了，它们都做同样的事情。

实际上，标准非常清楚它们具有相同的功能（以至于它们*可以*是相同的类型，但不是必须的）。从 23.2.4，p。6：

> `iterator`关联容器属于双向迭代器类别。对于值类型与键类型相同的关联容器，两者`iterator`都是`const_iterator`常量迭代器。未指定`iterator`和`const_iterator`是否为同一类型。[*注：* `iterator` and`const_iterator`在这种情况下具有相同的语义，并且`iterator`可以转换为`const_iterator`. 用户可以通过始终`const_iterator`在其函数参数列表中使用来避免违反单一定义规则。——<em>尾注]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:11:25.880

当我们（Err I）将我们的大型应用程序移植到 VC 10.0 时，这条规则生效了。它破坏了人们通过在迭代器上调用非 const 方法来操纵迭代器的各种旧代码。

这导致了我发现的最大区别：您只能在 const 迭代器上调用 const 方法。在旧标准中，您可以随意调用非常量方法并弄乱您的集合。在某些情况下，我最终用地图替换了一些集合，我发现代码绝对需要修改存储在容器中的项目。

希望有帮助。

# jquery - jquery扩展div父innerhtml高度

> ID：12283305
> 
> 赞同：1
> 
> 时间：2012-09-05T14:05:38.233
> 
> 标签：jquery

工作原型：http: [//jsfiddle.net/ad5qa/K5fdZ/28/](http://jsfiddle.net/ad5qa/K5fdZ/28/)

出于某种原因，当单击更多按钮时，parentsUntil 正在抓取页面中的所有 div。我只想获取 div.htmlbox 并自动设置高度，这样我就可以看到全部内容。然后单击 less 将其缩小到 50px 高度。任何帮助将不胜感激。

```
$('.morebox a').toggle(function() {
   var $this = $(this);
   var $parent =$this.parentsUntil('.htmlbox');

   $parent.height('auto')
   $this.text('less')
   $parent.css('border', '2px solid magenta')
   $this.css('border', '2px solid red')
}, function() {
   $parent.height('50px')
   $this.text('more')
});​

<h3>Description</h3>
<div class="htmlbox">
 This is a samle description that goes here with short or long content in this panel. If the text is higher than 50px then it should be hidden by the box. You must click expand to view the remaining content in the html box div. The float box is used to cut off the overflow of the content. 
<div class="fade-overlay"></div>
</div>
<div class="morebox">
    <img align="absmiddle" alt="more-less grabber" src="http://goo.gl/ho277">
    <a href="#" style="line-height: 10px">more</a>
    <img align="absmiddle" alt="more-less grabber" src="http://goo.gl/ho277">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:11:27.373

如果你只想要那个元素，那么你不会使用`parentsUntil`，你会使用`closest`. **但是**，`.htmlbox`根本不是你的祖先`a`。你需要做一些更复杂的事情。此外，您需要使用`this`而不是选择所有`a`s。

```
$this.closest(".morebox").prev(); 
```

请注意，这高度依赖于您当前的 html。如果您更改结构，则需要对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:26:11.943

考虑将每个`.htmlbox`和包装`.morebox`在 a 中`div`，并使用 jQuery $.closest() 和 $.find() 来遍历 DOM，如下所示：

**HTML**

```
<div class="boxcontent">
    <h3>Description</h3>
    <div class="htmlbox">
        ...
    </div>
    <div class="morebox">
        ...
        <a href="#" style="line-height: 10px">more</a>
        ...
    </div>            
</div> 
```

**JS**

```
$('.morebox a').toggle(function() {
    var $el = $(this);
    var $parent = $el.closest('.boxcontent').find('.htmlbox');

    $parent.height('50px')
    $el.text('more')
}, function() {
    var $el = $(this);
    var $parent = $el.closest('.boxcontent').find('.htmlbox');

    $parent.height('auto');
    $el.text('less')
}).trigger('click');​ 
```

[在这里更新了 JSFiddle](http://jsfiddle.net/K5fdZ/49/)。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:15:49.167

在 div 中包含每个段落 + 更多按钮，然后使用以下代码选择更多按钮：

[http://jsfiddle.net/K5fdZ/44/](http://jsfiddle.net/K5fdZ/44/)

```
<div class="section">    
    <div class="htmlbox">
       MY_TEXT
       <div class="fade-overlay"></div>
    </div>
    <div class="morebox">
       <img align="absmiddle" alt="more-less grabber" src="http://goo.gl/ho277">
       <a href="#" style="line-height: 10px">more</a>
       <img align="absmiddle" alt="more-less grabber" src="http://goo.gl/ho277">
    </div>
</div> 

var $parent = $('.morebox a').parent().find('.htmlbox'); 
```

# java - 为什么 getStamp() 返回相同的值？

> ID：12283306
> 
> 赞同：1
> 
> 时间：2012-09-05T14:05:39.477
> 
> 标签：java, time

我在 Thinking in Java 中阅读了这段代码并感到困惑：

```
 package generics;

    //: generics/Mixins.java
    import java.util.*;

    interface TimeStamped { long getStamp(); }

    class TimeStampedImp implements TimeStamped {
      private final long timeStamp;
      public TimeStampedImp() {
        timeStamp = new Date().getTime();
      }
      public long getStamp() { return timeStamp; }
    }

    interface SerialNumbered { long getSerialNumber(); }

    class SerialNumberedImp implements SerialNumbered {
      private static long counter = 1;
      private final long serialNumber = counter++;
      public long getSerialNumber() { return serialNumber; }
    }

    interface Basic {
      public void set(String val);
      public String get();
    }

    class BasicImp implements Basic {
      private String value;
      public void set(String val) { value = val; }
      public String get() { return value; }
    }

    class Mixin extends BasicImp
    implements TimeStamped, SerialNumbered {
      private TimeStamped timeStamp = new TimeStampedImp();
      private SerialNumbered serialNumber =
        new SerialNumberedImp();
      public long getStamp() { return timeStamp.getStamp(); }
      public long getSerialNumber() {
        return serialNumber.getSerialNumber();
      }
    }

    public class Mixins {
      public static void main(String[] args) {
        Mixin mixin1 = new Mixin(), mixin2 = new Mixin();
        mixin1.set("test string 1");
        mixin2.set("test string 2");
        System.out.println(mixin1.get() + " " +
          mixin1.getStamp() +  " " + mixin1.getSerialNumber());
        System.out.println(mixin2.get() + " " +
          mixin2.getStamp() +  " " + mixin2.getSerialNumber());
        while(true)System.out.println(new Date().getTime());
      }
    } /* Output: (Sample)
    test string 1 1132437151359 1
    test string 2 1132437151359 2
    *///:~ 
```

为什么 getStamp() 返回的值是一样的？（1132437151359 == 1132437151359）？创建了两个对象，它们在不同的时间创建了不同的属性，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:07:51.430

将时间用于序列号并不是一个好主意。您得到相同时间的原因可能是因为代码运行得相当快，并且在第一个对象和第二个对象的实例化之间没有经过足够的时间。时间戳以毫秒为单位返回，因此如果两个对象的实例化在 1 毫秒内，您将看不到差异。

如果您增加系统负载，您可能会看到差异，或者如果您使用`Thread.sleep(5)`它会导致程序暂停。这两种方法都不是很好。

不要将时间用于唯一 ID，而是使用[`UUID`](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:10:34.673

该表达式`new Date().getTime()`是一种缓慢的执行方式，`System.currentTimeMillis()`最小分辨率为一毫秒（但在某些操作系统上可能高达 16 毫秒）

这意味着如果调用该方法的时间间隔小于一毫秒，则它可以给出相同的结果。

更好的选择是使用 AtomicLong.getAndIncrement() 作为 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:09:54.877

尝试这样的事情：

```
Mixin mixin1 = new Mixin();
Thread.sleep(10);
Mixin mixin2 = new Mixin(); 
```

现在，您在创建这 2 个对象的过程中暂停了 10 毫秒。

您的课程很简单，并且您的计算机速度很快，因此两个实例之间的时间距离非常小，Java 看不到它。

# css - 如何在任何分辨率的 CSS 中适应网站的内容

> ID：12283307
> 
> 赞同：-2
> 
> 时间：2012-09-05T14:05:42.830
> 
> 标签：css, css-tables

我在这里有我的 login.css：

```
#contentContainer{

margin-top: 10%;

} 
```

这是我的PHP文件的一部分：

```
 <div align="center" id="contentContainer">
        <div id="Login_Cont"></div>
        <div class="login_logo"></div>

  </div> 
```

我将网站的内容放在一个大 div 中，我称之为 contentContainer。现在，我怎样才能以任何分辨率适应我的网站内容，我已经尝试过媒体屏幕技巧/css 技巧，但它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:17:26.907

所以你想让 contentContainer 漂浮在屏幕中间吗？

你追求的是这样的吗：

```
#contentContainer {
background-color: #ccc;
height: 300px;
left: 50%;
margin-left: -150px;
margin-top: -150px;
position:absolute;
top: 50%;
width: 300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:10:26.873

您可以按百分比给出该容器宽度，例如

```
#contentContainer{
   width:100%;//likewise
   margin:auto;//to center your div
} 
```

或最好使用媒体查询

```
@media screen and (max-device-width : 320px)
{

}//likewise define for each screen resolution 
```

# android - 使用 maven 时，有没有更快的方法在 Android 上启动 Activity？

> ID：12283315
> 
> 赞同：1
> 
> 时间：2012-09-05T14:06:08.367
> 
> 标签：android, eclipse, m2eclipse, m2e

在 Eclipse 中，当我运行“mvn install android:deploy”时，一切都运行良好……但是，这需要大约 18 秒才能完成。有没有更快的方法来启动我的 android 应用程序。当我尝试通过“Android 应用程序”运行我的主 Activity 时，我得到一个巨大的堆栈跟踪：

```
 09-05 14:03:09.915: E/AndroidRuntime(689): FATAL EXCEPTION: main
09-05 14:03:09.915: E/AndroidRuntime(689): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.soraapps.android.purseprideapp/com.soraapps.android.purseprideapp.PursePrideActivity}: java.lang.ClassNotFoundException: com.soraapps.android.purseprideapp.PursePrideActivity in loader dalvik.system.PathClassLoader[/data/app/com.soraapps.android.purseprideapp-2.apk]
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.os.Looper.loop(Looper.java:123)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-05 14:03:09.915: E/AndroidRuntime(689):  at java.lang.reflect.Method.invokeNative(Native Method)
09-05 14:03:09.915: E/AndroidRuntime(689):  at java.lang.reflect.Method.invoke(Method.java:507)
09-05 14:03:09.915: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-05 14:03:09.915: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-05 14:03:09.915: E/AndroidRuntime(689):  at dalvik.system.NativeStart.main(Native Method)
09-05 14:03:09.915: E/AndroidRuntime(689): Caused by: java.lang.ClassNotFoundException: com.soraapps.android.purseprideapp.PursePrideActivity in loader dalvik.system.PathClassLoader[/data/app/com.soraapps.android.purseprideapp-2.apk]
09-05 14:03:09.915: E/AndroidRuntime(689):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
09-05 14:03:09.915: E/AndroidRuntime(689):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
09-05 14:03:09.915: E/AndroidRuntime(689):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
09-05 14:03:09.915: E/AndroidRuntime(689):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
09-05 14:03:09.915: E/AndroidRuntime(689):  ... 11 more 
```

这是我的 pom.xml： [https ://gist.github.com/3656482](https://gist.github.com/3656482)

这是我尝试构建和运行项目后文件的样子。（见 gen 和 bin 文件夹） [http://cl.ly/image/3Q0x052S2Z3Q](http://cl.ly/image/3Q0x052S2Z3Q)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:36:47.960

假设您使用的是 m2e-android，看起来您的项目配置不正确。我猜我会说是因为您在 Android maven 插件声明中使用了变量 ('${android-maven-plugin-version}')。这是一个已知的问题：

[https://github.com/rgladwell/m2e-android/issues/114](https://github.com/rgladwell/m2e-android/issues/114)

解决方法：删除 ${android-maven-plugin-version} 变量。您可能应该删除仅引用它们一次的 Maven 属性变量，因为它会使 POM 不可读。

# java - 适用于 ListView 的自定义适配器是否也适用于 Spinner？

> ID：12283322
> 
> 赞同：-1
> 
> 时间：2012-09-05T14:06:27.683
> 
> 标签：java, android, spinner, adapter

我有一个适用于 ListView 的类 Area 的适配器，但是当我想将此适配器用于微调器时，我得到一个错误。当我使用微调器进行活动时，它会显示列表的第一项，但是当我单击箭头以显示其他项目时，我也会收到错误消息。有人可以告诉我我做错了什么吗？

适配器类：

```
public class AreaAdapter extends ArrayAdapter<Area> {

    List<Area> areaList;

    public AreaAdapter(Context context, int textViewResouceId,
            List<Area> objects) {
        super(context, textViewResouceId, objects);
        areaList = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            Context c = getContext();
            LayoutInflater inflater = (LayoutInflater) c
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(
                    R.layout.activity_choose_area_adapter, null);
        }

        Area area = areaList.get(position);

        if (area != null) {
            TextView v = null;

            v = (TextView) convertView.findViewById(R.id.tareaname);
            v.setText(area.getAreaName());
        }

        return convertView;
    }
} 
```

适配器的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="0.72"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tareaname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout>

</LinearLayout> 
```

包含微调器的活动：

```
public class ExtrasAddItemActivity extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_extras_add_item);

        ActivitiesObjects ao = (ActivitiesObjects) this.getApplication();
        List<Area> listOfAreas = ao.getListOfAreas();

        Spinner spinnerArea = (Spinner)findViewById(R.id.spinnerExtraArea);
        AreaAdapter areaAdapter = new AreaAdapter(this,R.layout.activity_choose_area_adapter, listOfAreas);
        spinnerArea.setAdapter(areaAdapter);
    }
} 
```

带有微调器的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    // other widgets ...

    <Spinner
        android:id="@+id/spinnerExtraArea"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

错误日志：

```
09-05 13:36:05.347: D/dalvikvm(274): GC_EXTERNAL_ALLOC freed 813 objects / 59328 bytes in 54ms
09-05 13:36:10.487: W/KeyCharacterMap(274): No keyboard for id 0
09-05 13:36:10.487: W/KeyCharacterMap(274): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-05 13:36:13.058: E/ArrayAdapter(274): You must supply a resource ID for a TextView
09-05 13:36:13.058: D/AndroidRuntime(274): Shutting down VM
09-05 13:36:13.068: W/dalvikvm(274): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-05 13:36:13.101: E/AndroidRuntime(274): FATAL EXCEPTION: main
09-05 13:36:13.101: E/AndroidRuntime(274): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:376)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:329)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:325)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.ListView.onMeasure(ListView.java:1109)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.View.measure(View.java:8171)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.View.measure(View.java:8171)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
09-05 13:36:13.101: E/AndroidRuntime(274):  at com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.View.measure(View.java:8171)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.View.measure(View.java:8171)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.View.measure(View.java:8171)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.os.Looper.loop(Looper.java:123)
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-05 13:36:13.101: E/AndroidRuntime(274):  at java.lang.reflect.Method.invokeNative(Native Method)
09-05 13:36:13.101: E/AndroidRuntime(274):  at java.lang.reflect.Method.invoke(Method.java:521)
09-05 13:36:13.101: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-05 13:36:13.101: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-05 13:36:13.101: E/AndroidRuntime(274):  at dalvik.system.NativeStart.main(Native Method)
09-05 13:36:13.101: E/AndroidRuntime(274): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
09-05 13:36:13.101: E/AndroidRuntime(274):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
09-05 13:36:13.101: E/AndroidRuntime(274):  ... 34 more 
```

提前致谢， 亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:16:58.230

问题在于 XML for`R.layout.activity_choose_area_adapter`不是文本视图：适配器很好，但 Spinner 明确要求它是文本视图，而不是复杂视图。如果你想要一个复杂的视图，你必须自己复制 Spinner 的行为。换成`R.layout.activity_choose_area_adapter`类似的东西`android.R.layout.simple_list_item_1`，你应该没问题。

```
Spinner spinnerArea = (Spinner)findViewById(R.id.spinnerExtraArea);
AreaAdapter areaAdapter = new AreaAdapter(this,android.R.layout.simple_list_item_1, listOfAreas);
spinnerArea.setAdapter(areaAdapter); 
```

您可能还需要修改`Adapter`以使用传递的资源，而不是硬连线它。

# ruby-on-rails - 呈现默认应用程序布局

> ID：12283325
> 
> 赞同：2
> 
> 时间：2012-09-05T14:06:36.297
> 
> 标签：ruby-on-rails

Rails 似乎不会呈现我的默认应用程序布局，所以我每次从控制器调用时都必须指定它。

```
render :layout => 'application' 
```

为什么会这样？

# python - 'disqus_tags' 不是 Django 中的有效标签库错误

> ID：12283330
> 
> 赞同：0
> 
> 时间：2012-09-05T14:06:52.910
> 
> 标签：python, django, disqus

无论我尝试什么，我都会收到此错误：

```
TemplateSyntaxError

'disqus_tags' is not a valid tag library: Template library disqus_tags not found

In template /home/myproject/zinnia/templates/zinnia/entry_detail.html,error at line3

1   {% extends "base.html" %}
2   {% load i18n comments zinnia_tags  thumbnail %}
3   {% load disqus_tags  %}
4 
```

我正在尝试的代码在服务器和另一台计算机上运行良好。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:29:10.983

上面你已经说明你已经安装了`disqus`和`django-disqus`包。我高度怀疑它们都提供了一个`disqus`python 模块。取出`disqus==0.0.4`包装，一切都应该正常。`django-disqus`没有任何额外的要求。

# r - 在 R 中使用“外来”包

> ID：12283336
> 
> 赞同：1
> 
> 时间：2012-09-05T14:07:12.957
> 
> 标签：r, import, stata

我需要将一个 STATA 数据集导入到 R 中，并且我已经下载了“外国”包。您能否告诉我将包“加载”到 R 中的步骤以及导入 STATA 数据集的步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T22:09:39.943

R helplist 风格的答案：RTFM！

国家主义风格的答案：像往常一样保存你的 Stata 文件。在 R 中，键入

```
 help(package="foreign") 
```

找出命令是什么。与 Stata 相关的文件将包含`.dta`在其中，`.dta`Stata 数据文件扩展名也是如此。`read.dta(file="path/name.dta")`应该在大多数情况下工作。如果没有，请尝试将您的文件从 Stata 保存为旧版本 ( `saveold filename.dta, replace`)。

顺便说一句，它是Stata，而不是STATA。它不是首字母缩略词，不像 SAS 或 SPSS……所以你不必大喊大叫。

PS正如DWin正确[指出的那样](https://stackoverflow.com/a/12290829/874882)，您需要加载包：

```
 library(foreign) 
```

我认为既然你似乎知道 R，记住这不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T22:47:18.547

这取决于您所说的“下载”是什么意思。您不需要下载任何内容，因为标准 R 安装中包含“foreign”以及“base”、“stats”、“utils”、“Matrix”以及其他一些“grDevices”。无论您是否已经使用 GUI 命令之一（不必要地）安装了“外部”包，您需要做的就是：

```
library(foreign) 
?read.dta   # and run the example 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T13:41:11.693

I just had to deal with the same issue therefore the code:

```
library(foreign)
setwd(your working directory) 
```

Please note that you have to set the working directory so that R knows where to look for your Stata dta dataset

And last the code:

```
read.dta("name of the dataset .dta") 
```

A video for that topic: [https://www.youtube.com/watch?v=tCkCz4cu918](https://www.youtube.com/watch?v=tCkCz4cu918)

# rally - 获取下一个迭代

> ID：12283349
> 
> 赞同：1
> 
> 时间：2012-09-05T14:07:42.927
> 
> 标签：rally

使用 API 2.0，我正在制作一个超级看板，在渲染卡片时，我想要一个按钮，将故事移动到下一个 sprint。

我从添加迭代组合开始，但这太过分了。我可以添加按钮和代码，但有没有办法获得下一次迭代？

我没有看到任何东西，以为在开始编码之前我会在这里问。

看板板是特定于迭代的，所以我可以向上移动一两个冲刺，但仍然想推动它向前推进，所以我必须抓住当前的迭代并以某种方式获得下一个迭代......

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:41:43.963

您可以查询开始日期在今天之后的迭代，按开始日期排序。这应该会给你记录[0]中的下一次迭代......

```
Ext.create('Rally.data.WsapiDataStore', {
    model: 'Iteration',
    fetch: ['Name', 'StartDate', 'EndDate'],
    autoLoad: true,
    sorters: [
        {
            property: 'StartDate'
            direction: 'ASC'
        }
    ],
    filters: [
        {
            property: 'StartDate',
            operator: '>',
            value: Rally.util.DateTime.toIsoString(new Date()) 
        }
    ],
    listeners: {
        load: function(store, records) {
            var nextIteration = records[0];
        }
    }
}); 
```

# php - PHP数组作为数组键

> ID：12283357
> 
> 赞同：16
> 
> 时间：2012-09-05T14:07:53.437
> 
> 标签：php, arrays

php中是否可以将数组也设为数组键？

例子：

```
array(
   array('sample', 'abc') => 'sample value'
); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T14:18:16.263

不，如果您阅读[手册](http://php.net/manual/en/language.types.array.php)

> PHP 中的数组实际上是一个有序映射。映射是将值与键相关联的类型。这种类型针对几种不同的用途进行了优化；它可以被视为数组、列表（向量）、哈希表（映射的实现）、字典、集合、堆栈、队列等等。由于数组值可以是其他数组，因此树和多维数组也是可能的。

和 ：

> 键可以是**整数**或**字符串**。该值可以是任何类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T14:14:43.190

这是不可能的——数组键**必须** [是字符串或整数](http://php.net/manual/en/language.types.array.php)。

你可以做的是使用[serialize](http://php.net/manual/en/function.serialize.php)：

```
$myArr = array( serialize(array('sample', 'abc')) => 'sample value'); 
```

这将与以下内容相同：

```
$myArr = array( 'a:2:{i:0;s:6:"sample";i:1;s:3:"abc";}' => 'sample value'); 
```

并且可以像这样访问：

```
echo $myArr[serialize(array('sample', 'abc'))]; 
```

但请注意，作为数组项的唯一标识符的序列化字符串显然相当复杂，几乎不可能手动输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:16:20.587

PHP 数组可以包含整数和字符串键，因为 PHP 不区分索引数组和关联数组。找php手册[php手册](http://www.php.net/manual/en/language.types.array.php)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-05T14:12:46.347

怎么了

```
array(
    'sample value' => array('sample', 'abc')
); 
```

你可以这样做

```
foreach($array as $string => $child){
...
} 
```

并将其`$child`用于任何目的

# c# - 调用 WorkflowInvoker.Invoke 时出现 AccessViolationException

> ID：12283360
> 
> 赞同：3
> 
> 时间：2012-09-05T14:08:00.073
> 
> 标签：c#, .net, workflow-foundation-4, parallel.foreach

我正在尝试运行具有 32 个线程的并行 foreach 循环。

这个 foreach 循环正在调用：

```
WorkflowInvoker.Invoke(new MyWorkflow(), myInputDictionary) 
```

并行 foreach 循环由大约 65000 个项目的列表组成。

在某些时候，在大约 6000 - 6700 个项目处，调用 WorkflowInvoker.Invoke(new MyWorkflow(), myInputDictionary) 会引发 AccessViolationException 并显示以下消息：“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”

我尝试了不同的方法，例如创建 WorkflowInvoker 的实例并将 MyWorkflow 的实例直接传递给新创建的 WorkflowInvoker，然后在类上调用 Invoke 方法。也只是将 WorkflowInvoker.Invoke 作为静态方法调用，但这并没有什么不同。应用程序每次都在同一点崩溃。由于线程的原因，很难调试和查明导致问题的确切原因。

当然，如果我在正常的 foreach 循环中进行调用，则不会出现问题。

起初我们认为虚拟机内存不足，因为应用程序开始消耗所有可用内存，直到达到总内存 (4GB) 的 85% 的限制，然后它似乎崩溃了。所以我们将内存大小更改为 1GB，看看我们是否可以在循环的早期引发异常，但是 Windows 开始进行垃圾收集，所以最后异常仍然发生在大约 6000 - 6700 个项目的同一点。

非常感谢任何关于我下一步应该采取什么行动的建议；-)

-- 编辑 - 添加了完整的堆栈跟踪 --

```
at System.Reflection.Emit.ModuleBuilder.nCreateISymWriterForDynamicModule(Module module, String filename)
at System.Reflection.Emit.AssemblyBuilder.DefineDynamicModuleInternalNoLock(String name, Boolean emitSymbolInfo, StackCrawlMark& stackMark)
at System.Reflection.Emit.AssemblyBuilder.DefineDynamicModuleInternal(String name, Boolean emitSymbolInfo, StackCrawlMark& stackMark)
at System.Reflection.Emit.AssemblyBuilder.DefineDynamicModule(String name, Boolean emitSymbolInfo)
at System.Activities.Debugger.StateManager.InitDynamicModule(String asmName)
at System.Activities.Debugger.StateManager..ctor(Properties properties, Boolean debugStartedAtRoot)
at System.Activities.Debugger.DebugManager..ctor(Activity root, String moduleNamePrefix, String typeNamePrefix, String auxiliaryThreadName, Boolean breakOnStartup, WorkflowInstance host, Boolean debugStartedAtRoot)
at System.Activities.Debugger.DebugController.EnsureActivityInstrumented(ActivityInstance instance, Boolean primeCurrentInstance)
at System.Activities.Debugger.DebugController.ActivityStarted(ActivityInstance activityInstance)
at System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation)
at System.Activities.Runtime.ActivityExecutor.ExecuteRootWorkItem.Execute(ActivityExecutor executor, BookmarkManager bookmarkManager)
at System.Activities.Runtime.ActivityExecutor.OnExecuteWorkItem(WorkItem workItem)
at System.Activities.Runtime.Scheduler.Callbacks.ExecuteWorkItem(WorkItem workItem)
at System.Activities.Runtime.Scheduler.OnScheduledWork(Object state)
at System.Runtime.Fx.SendOrPostThunk.UnhandledExceptionFrame(Object state)
at System.Activities.WorkflowApplication.PumpBasedSynchronizationContext.WorkItem.Invoke()
at System.Activities.WorkflowApplication.PumpBasedSynchronizationContext.DoPump()
at System.Activities.WorkflowApplication.Invoke(Activity activity, IDictionary`2 inputs, WorkflowInstanceExtensionManager extensions, TimeSpan timeout)
at System.Activities.WorkflowInvoker.Invoke(Activity workflow, IDictionary`2 inputs, TimeSpan timeout, WorkflowInstanceExtensionManager extensions)
at System.Activities.WorkflowInvoker.Invoke(IDictionary`2 inputs) 
```

-- 额外的编辑 - 添加了有问题的方法 - 对其进行了一些混淆以删除业务逻辑名称 -

```
public MyOutputData InvokeMyWorkflow(MyInputData input) 
{
      IDictionary<string, object> wfInput = new Dictionary<string, object>
       {
        { "ArgData", input }
       };
  MyWorkflow myWorkflow = new MyWorkflow();
  try
  {
       WorkflowInvoker invoker = new WorkflowInvoker(myWorkflow);
       IDictionary<string, object> output = invoker.Invoke(wfInput);
       return output["ArgData"] == null ? null : (MyOutputData)output["ArgData"];
  }
  catch (Exception ace)
  {
           Log.Error(ace.StackTrace);
       return null;
  }
 } 
```

# java - 使用复合键（长，日期）选择最新的对象的休眠查询

> ID：12283366
> 
> 赞同：0
> 
> 时间：2012-09-05T14:08:27.177
> 
> 标签：java, sql, hibernate, orm

假设我的数据库中有这样的东西（抽象）

```
MyTable {
  Long ID Primary Key NOT NULL,
  Date ValidFrom Primary Key NOT NULL,
  Date ValidTo
} 
```

基本上是一个在 ID 和 ValidFrom 上具有复合主键的实体。现在我有一些日期范围，例如 2012-09-01 -> 2012-09-30。

我的问题是：我可以进行智能休眠查询，它在重复的 ID 上，但不同的 ValidFrom 键，返回这个最新日期？

例如数据：

```
Row 1 {
  Long ID = 1,
  Date ValidFrom 2012-09-01,
  Date ValidTo 2012-09-15 
}

Row2 {
  Long ID = 2,
  Date ValidFrom 2012-09-01,
  Date ValidTo 2012-09-15 
}

Row3 {
  Long ID = 1,
  Date ValidFrom 2012-09-16,
  Date ValidTo null
} 
```

选择给定日期 (2012-09-01 -> 2012-09-30) 之间的那些行将仅返回 Row2 和 Row3（因为 Row1 和 Row3 具有相同的 ID，所以我们得到最新的）。

是否有任何查询（标准 API？）或者我是否需要获取所有条目然后使用某种方法进行过滤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:59:23.397

我以提出请求结束它是行，然后采取最新的

```
Collections.max(...) 
```

带日期比较器

# javascript - 如何将Å，Ä和Ö放入javascript数组中，然后与html文本进行比较？

> ID：12283369
> 
> 赞同：1
> 
> 时间：2012-09-05T14:08:34.790
> 
> 标签：javascript, jquery, special-characters

我想输入 Å、Ä 和 Ö。然后使用 html 文本比较它们。例如文本有这些字符，我想使用 javascript 数组比较我的文本。我正在尝试使用以下代码行制作 javascript 数组：

```
 var array = ['Å', 'Ä', 'Ö']; 
```

我什至试过ÅÄ和Ö。这些代码适用于 html，但不适用于 javascript。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:18:27.263

与其在数组中存储字符串文字，不如存储它们的 unicode 表示：

```
var myArray = ['\u197', '\u196', '\u214']; 
```

我使用[这个网站](http://www.mikezilla.com/exp0012.html)将您的 ASCII 符号转换为 unicode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:10:38.660

如果您的 Javascript 代码位于与 HTML 不同的文件中，您需要确保所有文件都使用相同的字符编码（例如 utf-8）。如果您使用这样的文字，您将不得不强制您的编辑器使用正确的编码。

你用的是什么编辑器？

# sql - 如何获取表的重命名、删除和添加列？

> ID：12283370
> 
> 赞同：0
> 
> 时间：2012-09-05T14:08:43.193
> 
> 标签：sql, sql-server

假设我在包含三列的数据库 (TblExample) 中有一个表：

*   姓名
*   年龄
*   城市

一段时间后，有人添加了一个额外的列（**Country**）或删除了一个列（**City**）或重命名了一个列（**Name**为**FirstName**）。

现在，如何确定表的添加、删除或重命名列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:19:16.310

从我看到您正在使用 SQL 的标签中，您可以查看 DDL 触发器：

[http://sqlserverpedia.com/blog/sql-server-security/csidba-finding-out-who-made-schema-changes/](http://sqlserverpedia.com/blog/sql-server-security/csidba-finding-out-who-made-schema-changes/)

# javascript - java脚本网站最佳实践

> ID：12283372
> 
> 赞同：0
> 
> 时间：2012-09-05T14:08:48.713
> 
> 标签：javascript, web

我正在使用下面的堆栈构建一个网站。对于这个问题，我认为软件堆栈应该无关紧要。我更想知道我做这个项目的方式是一个好主意还是遵循最佳实践。

```
- Twitter Bootstrap for the UI 
- CherryPy
- jQuery 
```

所以我处理这个项目的方式如下

```
- Use the Twitter Bootstrap to create the basic layout
- I have one js file and one css file for my project
- Based upon the requirement, let say for this button I need to do something like ajax call
    - go to the js file and write like $("#id").click() and do the necessary stuff
    - write the necessary action code in python
    - Test 
```

所以基本上，我在做什么，修改 html 文件，在我的单个 js 文件中添加我需要的必要代码并执行 python 代码。看到所有这些 java 脚本框架，如backbone.js，require.js 让我觉得也许我没有遵循最好的方法来做到这一点。

从某种意义上说，我想知道的是，假设您有一个页面很少且没有大量用户交互的网站，您会怎么做？我接近它的方式有什么问题吗？最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:04:57.623

Backbone、Angular 和 Ember 等客户端框架旨在帮助为重型 javascript 应用程序带来结构。不要混淆像 javascript 这样的客户端语言（尽管现在它可以用作服务器端语言）和像 C#、Python Php 等服务器端语言。

大多数单页应用程序都使用 REST API。因此，您的所有功能都将在客户端。您的服务器的主要职责是将数据推送到您的客户端，以便用户可以与之交互。将您的客户端（用 js 编写）和服务器（用 python 编写）视为两个完全独立的实体/应用程序。

如果您的应用程序不是大量的 javascript，我不会使用单页应用程序并使用您当前列出的技术堆栈。我总是建议保持你的 javascript 结构化，但你不需要一个框架。只需遵循您觉得最舒服的 js 模式之一，可以在[此处](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)列出。

# c++ - 如何为大量选项创建策略模式

> ID：12283374
> 
> 赞同：2
> 
> 时间：2012-09-05T14:08:50.273
> 
> 标签：c++, strategy-pattern

首先我展示一些代码：

1）在过程1中：

```
if (current_job == IT_jobs) // accept;
else if (current_job == art_job) // next check... 
```

2）在过程2中：

```
if (current_person == asian_group) // ...
else // ... 
```

所以，有两种不同的过程，不同之处在于它们的目的不同，但它们使用相同的方法，比较变量，`IT_jobs`并且`asian_group`是包含值的变量。

我想做的就是把这些东西放在一个好的地方，比如`if (entry.strategy)`，让它们更标准化，我把这些变量放在一个数据库里，当我需要做比较的时候，我就阅读它们。可能吗？如何实现这种策略模式。非常感谢！

# shared-libraries - 原生 rsync 库？

> ID：12283375
> 
> 赞同：4
> 
> 时间：2012-09-05T14:08:51.367
> 
> 标签：shared-libraries, rsync

是否存在任何好的 rsync 库来实现：

1.  rsync 算法和
2.  rsync 协议

这样可以使用该库来构建`rsync`工具本身吗？（我希望我的应用程序与普通的 rsync 服务器或通过 ssh 的普通 rsync 兼容。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:45:39.303

对于 rsync 算法：- rsync 使用 zlib 作为其源代码的一部分。在它内部是 adler-32 算法和充气和放气算法（压缩 - 解压缩）实现。

还要检查一下，我自己没有使用过：- [http://librsync.sourceforge.net/](http://librsync.sourceforge.net/)

对于 rsync 协议：-

但是，我非常怀疑是否存在 rsync 协议库（意味着没有 rsync 协议库）。

# python - 与 IOError 相关的 Python 错误编号是否稳定？

> ID：12283377
> 
> 赞同：5
> 
> 时间：2012-09-05T14:08:54.107
> 
> 标签：python, api, exception, error-handling, errno

我想移动一个文件，但如果找不到它，我应该忽略它。在所有其他情况下，应传播异常。我有以下一段 Python 代码：

```
try:
    shutil.move(old_path, new_path)
except IOError as e:
    if e.errno != 2: raise e 
```

errno == 2 是具有“没有这样的文件或目录”描述的那个。我想知道这在 Python 版本和平台等方面是否稳定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T14:11:58.470

最好使用[errno](http://docs.python.org/library/errno.html#module-errno)模块中的值，而不是硬编码值`2`：

```
try:
    shutil.move(old_path, new_path)
except IOError as e:
    if e.errno != errno.ENOENT: raise e 
```

这使得您的代码不太可能在整数错误值更改时中断（尽管这不太可能发生）。

# eclipse - 使用 Xtext 或 XTend 为现有的 EMF 模型构建代码生成器

> ID：12283378
> 
> 赞同：4
> 
> 时间：2012-09-05T14:09:01.110
> 
> 标签：eclipse, code-generation, xtext, xtend, eclipse-m2t-jet

我有一个模型转换序列，最终输出一个 EMF 模型，一些 EMF 元模型的实例（我自己定义的元模型）。

我正在寻找一种从中生成代码的好方法。当然，还有 XPand，我曾经在其他项目中使用它，但我想知道 XText 或 XTend 是否是合适的替代品（因为它是如此积极地开发）。

换句话说，我有一个 EMF 模型，不需要它的编辑器（所以不需要 XText 来达到这个目的），但我确实需要构建一个代码生成器。我可以只对那部分使用 XText 吗？

是否建议使用 XPand 或 Acceleo？

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T20:14:35.297

我试图在这些工具之间进行公平的比较，但这真的很难。

Xtext 与代码生成无关——它用于创建编辑器和解析器。

Xtend2 被设计为具有相似语法的 Xpand 的继任者 - 但是，它不是专门为代码生成量身定制的，而是作为一种通用语言，也可以很好地用于代码生成。其他生成引擎的主要区别在于您在源代码级别工作（基本上，Xtend2 转换为 Java），并且您必须提供自己的引擎来驱动生成 - 尽管当然可以使用建模工作流引擎这个原因 - 就像 Xpand 的情况一样。

Acceleo 更适合简单的代码生成。它的语法基于代码生成的 OMG 规范，并为开发代码生成提供了一个功能齐全的 IDE。但是，如果您在代码生成过程中需要复杂的控制结构，它可能不是最好的解决方案。

~~关于 M2T-JET，正如 Chris 所建议的，我会投反对票，除非有非常具体的需求。它的开发支持要弱得多（例如它的编辑器），并且更多地基于具有单个输出模板的想法，而不是 Xpand/Xtend/Acceleo 的更高级别、基于规则的方法。这会在代码生成期间带来更好的性能，但是，它通常会导致更难理解模板。~~忽略这一段，因为它太消极了。

总之，如果您只使用 EMF 模型，Acceleo 和 Xtend 都是代码生成的不错选择，您应该根据您（或您的团队）的专业知识和更具体的需求在它们之间进行选择。如果您需要同时支持 EMF 模型和其他数据源，那么 Acceleo 不是最佳选择；但是，JET 和 Xtend 都不是基于您的输入是 EMF 模型这一事实，而是提供了调用任何可用 Java 代码的简便方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T16:59:13.110

我推荐 M2T-JET。这是一个基于文本模板的转换，它使用多个模板从单个输入模型生成项目、文件夹和文件。模型可以是 EMF，模板让您可以浏览和迭代模型，以生成您想要的 Eclipse 资源。

# java - cron 中看不到的环境变量

> ID：12283379
> 
> 赞同：0
> 
> 时间：2012-09-05T14:09:01.927
> 
> 标签：java, linux, cron

所以我遇到了一个问题。我的工作场所在它的机器上使用环境变量，我们最近将我们的开发/生产服务器切换到基于 unix 的解决方案（RHEL 6），我们正试图让我们的一些旧程序使用 cron 运行。envir 变量在盒子本身上运行（例如：Server1=dev-server.intranet.net 或类似的东西），但我们遇到了 cron 到位的问题。

例子。

```
java -jar MyProgram.jar -- Works fine 
```

MyProg.sh - 工作正常

```
JAVA_HOME=/usr/data/java/current
PATH=$JAVA_HOME/bin

export JAVA_HOME
export PATH

java -jar /usr/data/apps/MyProg/MyProg.jar 
```

从 cron 调用 MyProg.sh 时，它不起作用，因为它根本看不到环境变量。

有人可以提供一些有关如何使用 cron 进行这项工作的见解吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:21:20.080

JAVA_HOME 和 PATH 不需要设置

你能试一下吗

```
/usr/data/java/current/java -jar /usr/data/apps/MyProg/MyProg.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:00:03.347

我最终通过做一个来解决这个问题

源 /etc/profile.d/MyVars.sh

这让我的环境变量恢复原状。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-02T13:42:19.700

Cron 总是在一个几乎空的环境中运行。HOME、LOGNAME 和 SHELL 已设置；和一个非常有限的路径。

为了使所有环境变量可用，我们需要在运行给定命令之前加载 ~/.profile 文件。

就我而言，我使用了以下命令。

```
40 11 * * * . $HOME/.profile; /shellPath/bin/execute-job.sh START 5 >> /home/sampleuser/cron.log 2>&1 
```

执行-job.sh

```
nohup java -Dlog4j.configuration=file:/shellPath/conf/log4j.properties -cp /shellPath/libs/scheduler-0.1.jar  com.scheduler.Scheduler $1 $2 > /dev/null 2>&1 & 
```

# android - 在运行时更改输入类型

> ID：12283381
> 
> 赞同：1
> 
> 时间：2012-09-05T14:09:12.547
> 
> 标签：android, input

我正在使用一个应用程序，在用户单击按钮后，会创建一个警报，要求用户输入电子邮件地址。此警报包含一个 EditText 和两个按钮。我想将此 EditText 的输入类型更改为在运行时键入电子邮件，但它没有改变。代码可以在下面找到。

编辑：setRawInputType 更改为 setInputType。这现在将我的输入类型更改为电子邮件地址，但我的键盘实际上并没有随之改变。我是否错过了有关其工作方式的某些信息？

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Title");
    alert.setMessage("Email Address:");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    input.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
      String value = input.getText().toString();;
      Intent i = new Intent(Intent.ACTION_SEND);
      i.setType("message/rfc822");
      i.putExtra(Intent.EXTRA_EMAIL  , value);
      i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
      i.putExtra(Intent.EXTRA_TEXT   , "body of email");
      try {
          startActivity(Intent.createChooser(i, "Send mail..."));
      } catch (android.content.ActivityNotFoundException ex) {
          Toast.makeText(getBaseContext(), "Please enter a valid number",
                    Toast.LENGTH_LONG).show();
      }
      }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
      }
    });

    alert.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:40:02.603

在搞砸了很多之后，我自己弄清楚了这一点。为了实际更改输入类型，我必须使用以下内容：

```
input.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:13:24.983

尝试使用`setInputType`而不是`setRawInputType`

[在此处](http://developer.android.com/reference/android/widget/TextView.html#setInputType%28int%29)查看文档

*使用为 inputType 定义的常量设置内容的类型。这将通过调用 setKeyListener(KeyListener) 来处理更改键侦听器*

而 raw 没有

# c# - 更新现有 Outlook 日历约会

> ID：12283382
> 
> 赞同：2
> 
> 时间：2012-09-05T14:09:13.590
> 
> 标签：c#, outlook, icalendar, vcalendar

我正在实现一个管理会议的应用程序。作为其中一项功能，它可以向 Outlook 发送会议请求。

问题是，当会议更新时，发送的消息不会更新 Outlook 日历。我正在使用 MS Outlook 2003。

有谁知道我做错了什么。

我根据[send-meeting-requests](http://kobikobi.wordpress.com/2009/01/03/sending-meeting-requests-to-outlook-via-aspnet-mail-message/)实现了会议请求 。

[发送请求时，我根据rfc2446](http://www.ietf.org/rfc/rfc2446.txt)的要求更改了一些字段。

下面是两条消息的组合。

1.  仅在会议创建中出现的行
2.  仅在会议更新中出现的行 - 这不起作用。

两条消息中都会出现其他行。

```
BEGIN:VCALENDAR
VERSION:2.0
METHOD:REQUEST
PRODID:-//ddaysoftware.com//NONSGML DDay.iCal 1.0//EN
BEGIN:VEVENT
ATTENDEE;CN=Attendee One;RSVP=TRUE:MAILTO:komerciala@email.eu
ATTENDEE;CN=User Super;RSVP=TRUE;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION
 ;CUTYPE=ORGANIZER;ORGANIZER=:MAILTO:master@email.com
CLASS:PUBLIC
COMMENT:
1\. CREATED:20120905T151819
2\. CREATED:20120905T151945
DESCRIPTION:
1\. DTEND:20120905T163000
2\. DTEND:20120906T163000
1\. DTSTAMP:20120905T151819
2\. DTSTAMP:20120905T151945
1\. DTSTART:20120905T160000
2\. DTSTART:20120906T160000
1\. LAST-MODIFIED:20120905T151819
2\. LAST-MODIFIED:20120905T151945
LOCATION:LJUBLJANA\, CESTA V MESTNI LOG   55
ORGANIZER;CN=User Super:MAILTO:master@email.com
PRIORITY:5
1\. SEQUENCE:0
2\. SEQUENCE:1
SUMMARY:kioliko
UID:5c6beaaf-1479-4028-b813-b9a66a2e3640
BEGIN:VALARM
ACTION:Display
TRIGGER:-P1D
END:VALARM
END:VEVENT
END:VCALENDAR 
```

谢谢！

# java - 如何在 java 中实例化泛型数组类型？

> ID：12283384
> 
> 赞同：5
> 
> 时间：2012-09-05T14:09:16.250
> 
> 标签：java, arrays, generics, multidimensional-array, instantiation

我在实例化泛型类型数组时遇到问题，这是我的代码：

```
public final class MatrixOperations<T extends Number>
{
    /**
 * <p>This method gets the transpose of any matrix passed in to it as argument</p>
 * @param matrix This is the matrix to be transposed
 * @param rows  The number of rows in this matrix
 * @param cols  The number of columns in this matrix
 * @return The transpose of the matrix
 */
public T[][] getTranspose(T[][] matrix, int rows, int cols)
{
    T[][] transpose = new T[rows][cols];//Error: generic array creation
    for(int x = 0; x < cols; x++)
    {
        for(int y = 0; y < rows; y++)
        {
            transpose[x][y] = matrix[y][x];
        }
    }
    return transpose;
}
} 
```

我只希望这个方法能够转置一个矩阵，它的类是 Number 的子类型，并返回指定类型的矩阵的转置。任何人的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:15:13.733

类型在运行时是不知道的，所以你不能这样使用它。相反，您需要类似的东西。

```
Class type = matrix.getClass().getComponentType().getComponentType();
T[][] transpose = (T[][]) Array.newInstance(type, rows, cols); 
```

注意：泛型不能是原语，因此您将无法使用`double[][]`

感谢@newacct 建议您一步完成分配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T14:16:59.333

您可以使用`java.lang.reflect.Array`动态实例化给定类型的 Array。您只需传入所需类型的 Class 对象，如下所示：

```
public T[][] getTranspose(Class<T> arrayType, T[][] matrix, int rows, int cols)
{

    T[][] transpose = (T[][]) Array.newInstance(arrayType, rows,cols);
    for (int x = 0; x < cols; x++)
    {
        for (int y = 0; y < rows; y++)
        {
            transpose[x][y] = matrix[y][x];
        }
    }
    return transpose;
}

public static void main(String args[]) {
    MatrixOperations<Integer> mo = new MatrixOperations<>();
    Integer[][] i = mo.getTranspose(Integer.class, new Integer[2][2], 2, 2);
    i[1][1] = new Integer(13);  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T14:20:12.860

您可以使用它一次创建两个维度：

```
 // this is really a Class<? extends T> but the compiler can't verify that ...
    final Class<?> tClass = matrix.getClass().getComponentType().getComponentType();
    // ... so this contains an unchecked cast.
    @SuppressWarnings("unchecked")
    T[][] transpose = (T[][]) Array.newInstance(tClass, cols, rows); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:14:17.953

请参阅[我可以创建一个组件类型为通配符参数化类型的数组吗？](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#Can%20I%20create%20an%20array%20whose%20component%20type%20is%20a%20wildcard%20instantiation%20of%20a%20parameterized%20type?)[我可以创建一个组件类型为具体参数化类型的数组吗](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#Can%20I%20create%20an%20array%20whose%20component%20type%20is%20a%20concrete%20instantiation%20of%20a%20parameterized%20type?)？ 从泛型常见问题解答中获取有关您为什么不能这样做的详细说明。

# ruby-on-rails - Rails 3.2 中连接表的正确结构

> ID：12283387
> 
> 赞同：0
> 
> 时间：2012-09-05T14:09:20.557
> 
> 标签：ruby-on-rails

我正在重写 Rails 中基于 PHP 的支持票证系统，但遇到了障碍。我创建了用户表并创建了票证表

```
create_table "tickets", :force => true do |t|
  t.integer  "user_id",       :null => false
  t.integer  "department_id", :null => false
  t.integer  "upload_id",     :null => false
  t.string   "subject",       :null => false
  t.text     "body",          :null => false
  t.string   "status_id",     :null => false
  t.text     "url",           :null => false
  t.datetime "created_at",    :null => false
  t.datetime "updated_at",    :null => false
end

create_table "users", :force => true do |t|
  t.string   "fName",      :null => false
  t.string   "lName",      :null => false
  t.string   "seKey",      :null => false
  t.boolean  "isAdmin"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
  t.string   "auth_token"
end 
```

一切都很好，我可以创建票证等...现在我需要为票证分配 1 个或多个管理员，但不确定我应该使用 has_and_belongs_to_many 关系还是 has_many :through 关系。

目前在 PHP 中设置的方式只是使用一个将用户 ID 与票证 ID 匹配的连接表。我认为我不需要任何其他与这种关系相关的数据，所以 has_and_belongs_to_many 是最好的选择吗？

此外，由于工单已经与用户表（原始创建者）中的记录相关联，这是否会导致问题？基本上一张票将与用户表有多个连接，一个是提交它的人，其余的是被分配处理它的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:59:19.440

两者都有效；但是，就我个人而言，我更喜欢 has_many :through 关系。原因是您可以访问连接表。为此，请生成一个`ticket_user`名为`user_id`and的模型`ticket_id`。然后在模型中添加

```
belongs_to :user
belongs_to :ticket 
```

然后你可以添加到票模型

```
has_many :ticket_users
has_many :users :through ticket_user 
```

这给用户模型

```
has_many :ticket_users
has_many :ticket :through ticket_user 
```

然后检索所有用户票

```
user.tickets 
```

获得所有门票用户做

```
ticket.users 
```

有关更多信息，请查看本[指南](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:21:05.640

在你的情况下 has_and_belongs_to_many 是额外的关系。

```
has_and_belongs_to_many :members, :class_name => "User", :join_table => "members_tickets" 
```

您可能必须创建一个表 members_users，其中包含 ticket_id 和 member_id 作为字段，如[http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many中所示](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)

现在您可以获得如下分配成员的列表

```
@ticket.members # list of members
@ticket.members << @user # add new member 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:30:26.357

这可能有效 - 在用户和工单之间创建两个关系，工单belongs_to creator，：class_name用户和工单has_manyassigned_users，class_name用户和用户模型has_many created_tickets和has_manyassigned_tickets

# ajax - Grails remoteField - 我可以调用渲染/重定向吗？

> ID：12283390
> 
> 赞同：0
> 
> 时间：2012-09-05T14:09:27.050
> 
> 标签：ajax, grails

我不是在寻找 div 更新。我正在寻找整页“刷新”

所以我有一个标签：

```
<g:remoteField controller="person" action="updatePerson" id="${personInstance.id}" paramName="search" name="updatePerson" value="${personInstance?.favoriteBreed}" /> 
```

在我附加的方法中，我想执行更新域对象的操作，然后刷新整个页面。我已经尝试过渲染和重定向到应用程序中的简单操作，但没有调用任何内容。所以我认为这对于 remoteField 标签是不可能的。

这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:20:18.760

`<g:remoteField />``onSuccess`有可以用来做你想做的事情的事件。[您可以在此处](http://www.grails.org/doc/latest/ref/Tags/remoteField.html)查看更多选项。

尝试（未测试）：

```
<g:remoteField controller="person" action="updatePerson" 
    id="${personInstance.id}" paramName="search" name="updatePerson"    
    value="${personInstance?.favoriteBreed}" onSuccess="reloadPage()" /> 
```

您将需要创建 javascript 函数：

```
function reloadPage() {
  window.location.reload();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:09:10.257

为什么要通过 AJAX 重新实现页面的正常行为？为什么不在被调用控制器的末尾调用重定向到正确的操作？

假设您在 showPerson 操作产生的视图中。在这个视图中，用简单的方式调用 updatePerson （不要关心 params 属性，这只是一个示例）：

```
<g:Link controller="person" action="updatePerson" id="${personInstance.id}" params="${name: 'search'}">click me</g:link> 
```

并在控制器中执行以下操作：

```
def updatePerson = {
  // your own updating stuff

  redirect(action: "show", id: person.id)
} 
```

不是更容易吗？:)

# javascript - 如何在页面加载时使用特定的 javascript 函数创建一个 url

> ID：12283403
> 
> 赞同：1
> 
> 时间：2012-09-05T14:10:02.253
> 
> 标签：javascript, function, url

我想知道我是否可以制作这样的网址：

```
http://www.google.com/index.php?id=mycustomsearch,javascript:onload=initfunction1(); 
```

为了让自己清楚，我会解释一下。我想修改链接以进行 javascript 操作。为了能够提供相同的确切页面，但每次触发另一个基于链接的功能。

我写 [,] 只是为了演示。我不知道是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:15:24.783

好的，不要通过 URL 中的查询字符串来解决问题。这将使您的网站受到 XSS 攻击。 [http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

如果您想在页面加载后运行 JavaScript 函数，请使用`JavaScript`或`jQuery`执行以下操作：

```
$(document).ready(function() {
   YourFunction();
 });

function YourFunction() {
   alert('Your function logic');
} 
```

当然，您可以通过查询字符串过滤函数名称，但不要将 JavaScript 嵌入到 URL 中。

```
http://www.yoursite.com/?function=YourFunction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:16:14.160

如果不使用安装在您的机器上的油脂猴之类的东西，不，您不能（也不应该）这样做。如果 URL 在您的某个域中，您可以将脚本嵌入到您的页面中，如果它是其他人的……不。

# c# - 获取已安装程序的 DisplayIcon

> ID：12283405
> 
> 赞同：3
> 
> 时间：2012-09-05T14:10:17.647
> 
> 标签：c#, windows

我正在尝试获取计算机上已安装软件的图标。

安装的软件列表从此注册表路径填充： HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall

根据 DisplayName 排除重复项。

现在我尝试从键 DisplayIcon 中获取图标。如果它存在。DisplayIcon 中的值因软件而异。一些例子是休闲：

*   D:\Program Files\FileZilla FTP 客户端\FileZilla.exe
*   C:\Program Files\Common Files\Microsoft Shared\OFFICE12\Office Setup Controller\OSETUP.DLL,1
*   D:\Program Files\Fiddler2\IE_Toolbar.ico
*   dfshim.dll,2
*   D:\Program Files\Winamp\winamp.exe,0
*   等\git.ico

对于所有这些示例，我都可以使用图标。如果 InstallLocation + DisplayIcon 不是真正的来源，我可以在 InstallLocation 中搜索 DisplayIcon 名称（例如：GetDataBackFor* 的 DisplayIcon 是 gdbnt.exe，所以我搜索这个，如果找到我就拿他的图标）

问题是其他应用程序（如 revo 或 windows 卸载程序）如何获取没有 DisplayIcon 键的应用程序图标。他们只有根目录的 InstallLocation。他们在那个位置搜索ico或exe？如果它们是多个可执行文件并且该可执行文件的名称看起来不像 DisplayName，该怎么办？如果注册表中没有此类信息，他们如何从主可执行文件中汇集图标？此类应用程序的示例包括 Google 地球、Apple 软件更新等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T10:51:19.453

我们可以从以下位置找到有关已安装产品图标的信息 此信息与卸载一起存储在注册表中的 Installer\product key 中 -

密钥名称 - HKEY_CLASSES_ROOT\Installer\Products{productID}

价值 - ProductIcon

从这里我们可以得到已安装应用程序的图标。有关更多详细信息[http://newapputil.blogspot.in/2015/06/extract-icons-of-installed-windows_17.html](http://newapputil.blogspot.in/2015/06/extract-icons-of-installed-windows_17.html)

# regex - awk 扩展模式匹配（在已匹配字符串的操作中嵌入模式匹配）

> ID：12283412
> 
> 赞同：3
> 
> 时间：2012-09-05T14:10:32.880
> 
> 标签：regex, awk, pattern-matching, gawk

我想处理形式的字符串：

```
PREFIX_TYPE_N,DATA 
```

那么，*awk (gawk, mawk, nawk) 是否支持在已匹配字符串的操作中包含模式匹配？像这样的东西（当然，对我不起作用）：

```
*awk 'BEGIN { FS="," }
     /PREFIX/ {
                /TYPE_1/  {printf "[TYPE1] [DATA: $2]"}    // <-- included pattern 
                /TYPE_2/  {printf "[TYPE2] [DATA: $2]"}    // <-- another included pattern
                ...                                        // <-- some more included patterns
              }' "filename" 
```

还是我还需要 if/else 或 switch/case？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:24:03.387

不完全那样，但非常接近，因为有一个正则表达式匹配运算符 (~)：

```
BEGIN { FS="," }
/PREFIX/ {
            if ($1 ~ "TYPE_1") {printf "[TYPE1] [DATA: $2]"}    // <-- included pattern 
            if ($1 ~ "TYPE_2") {printf "[TYPE2] [DATA: $2]"}    // <-- another included pattern
            ...                                        // <-- some more included patterns
          } 
```

请注意，因为第一个模式匹配已经进入它的块并且只处理了一行，所以在块中只有 ifs 很好。

如果你真的想要模式的易读性，你可以这样做：

```
BEGIN { FS="," }
/PREFIX/ { //stuff to do for all prefixes, before specific handling
          data = $2 }
/PREFIX_TYPE_1/ { type = "TYPE_1"; }
/PREFIX_TYPE_2/ { type = "TYPE_2"; }
/PREFIX/ { //stuff to do for all prefixes, after specific handling 
          printf("[%s] [DATA: $2]", type, data)
          } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:30:50.777

你可以在 gawk 中这样做：

```
awk 'BEGIN { FS="," }
     /PREFIX/ {
                if (/TYPE_1/)  {printf "[TYPE1] [DATA: $2]"}    // <-- included pattern 
                if (/TYPE_2/)  {printf "[TYPE2] [DATA: $2]"}    // <-- another included pattern
                ...                                        // <-- some more included patterns
              }' "filename" 
```

这里`/TYPE_1/`相当于`$0 ~ /TYPE_1/`. [在文档](http://www.gnu.org/software/gawk/manual/gawk.html#Expressions)中查找详细信息（第 6.1.2 部分）。

# eclipse - Eclipse：如何从 CVS 存储库中删除目录树？

> ID：12283416
> 
> 赞同：1
> 
> 时间：2012-09-05T14:10:37.810
> 
> 标签：eclipse, directory, cvs, delete-file

我正在使用 Eclipse 开发的项目处于 CVS 版本控制之下，并且我已成功使用“团队 -> 添加到版本控制”功能将整个目录树添加到存储库中。但是，Eclipse 中似乎没有办法从存储库中删除文件……这是真的吗？“团队”选项卡不包括任何删除功能，简单地删除文件不会将它们从 CVS 中删除。

我知道如何使用`cvs remove`命令行从 CVS 存储库中删除文件和文件夹，但是让 Eclipse 为我完成所有递归删除会非常方便......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:59:27.737

在 Eclipse 中，只需使用常规的**删除**功能；当您同步或提交到您的存储库时，您删除的文件将被删除。像大多数 cvs 操作一样，这是一个多步骤过程：您在本地进行更改，然后将其提交到 repo。使用删除（和添加），实际上有 3 个步骤：

1.  从本地文件系统中删除本地副本。
2.  发出`cvs remove`命令。
3.  [稍后] 提交对 repo 的更改（包括您在步骤 2 中所做的删除）。

Eclipse 只是通过提交或同步功能为您整合了#2 和#3。

见[http://docs.freebsd.org/info/cvs/cvs.info.Removing_files.html](http://docs.freebsd.org/info/cvs/cvs.info.Removing_files.html)

# ios - 在 Xcode4 中使用外部构建的静态库

> ID：12283417
> 
> 赞同：0
> 
> 时间：2012-09-05T14:10:42.753
> 
> 标签：ios, xcode4, autotools

我有一个要移植到 iOS 的大型（数千个文件）产品。我有一个现有的构建结构，它构建了大约 50 个静态库，然后可以由特定于平台的 [G] UI 使用。一些库是 zip、ICU 和 Xerces 等第三方工具。可移植的构建过程由 GNU autotools 管理，我创建了一些 shell 脚本来构建 i386（模拟器）、armv6 和 armv7 的代码。所有这些都是在 Apple 的 Lion 上使用 5.1 iOS SDK 和 Xcode4 完成的。

我遇到的问题是将这些库带入 Xcode4 项目很痛苦。拖放库很乏味。我一直拒绝为 Xcode 中的库创建“项目”，因为我已经有一个可以工作的跨平台构建系统。我想要一种“简单”的方式来输入库列表及其位置；我在这里的搜索显示了 Xcode3 的解决方案，但它们似乎不适用于 Xcode4。

我能够构建一个使用这些库的 iOS 应用程序，但我的问题的重点是：我如何避免所有的拖放并保留我的便携式构建结构，以便其他使用我的库的人不会撕毁他们的头发？如果这是一个仅限 iOS 的应用程序，我当然会使用 Xcode4 来处理所有事情。但由于它是多平台和“便携”的，我真的想保持过程简单，其中“简单”适用于包装的维护和使用我的库的用户/开发人员。

另一个问题可能是：我是否有一种安全的方法来生成 Xcode4 元文件，以便我的 autotools-driven-build 的最终结果看起来像一个原生 Xcode4 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:56:19.200

两个想法：

1) 过去 Xcode 很好地支持 AppleScript 的情况是——我过去常常用 AppleScripts 来完成这样的任务。不过，Xcode 4 的早期版本非常缺乏这种支持。不确定您是否可以使用 4.4 执行此操作 - 您可能会在 Apple 的 listserv 组的 AppleScript 实现者列表中询问。

2）如果你把所有的库（或者链接）放在一个文件夹中，然后在 Xcode 中点击 Target，BuildPhase，Link Binary with Libraries，点击 + 键，导航到你的文件夹，然后选择所有库并点击 OK，你完成了。[好吧，几乎，然后在左侧的 GUI 窗格中，您需要再次选择它们并将它们移动到 Frameworks 文件夹中，由于这个烦人的错误，我将其保留在我的项目的顶部。]

# c# - 在 Metro 中使用 WPF 样式属性设置器时，枚举依赖属性设置为 null

> ID：12283421
> 
> 赞同：0
> 
> 时间：2012-09-05T14:10:53.440
> 
> 标签：c#, wpf, xaml, microsoft-metro, dependency-properties

在我们的 Metro 应用程序中，我有一个`enum`类型的附加属性。

将元素上的属性直接设置为 XAML 属性时，该值设置得很好，但是当`Setter`在样式中使用元素时，尽管设置了该属性，但它被设置为一个`null`值（即，`e.NewValue`在下面的代码中为 null）

为什么是这样？它引起了问题，显然不能转换为枚举类型。谢谢。

以下是相关代码：

```
 public static readonly DependencyProperty KeyboardScrollRestrictionStyleProperty =
        DependencyProperty.RegisterAttached("KeyboardScrollRestrictionStyle", typeof(KeyboardScrollRestrictionStyle), typeof(FlipViewScrollBehaviour),
            new PropertyMetadata(KeyboardScrollRestrictionStyle.TextBox, OnKeyboardScrollRestrictionStyleChanged));

    static void OnKeyboardScrollRestrictionStyleChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    { 
       //I check e.NewValue at breakpoint
    } 
```

这有效（e.NewValue 是 TextBox）：

```
<TemplatedControls:WatermarkTextBox       
Behaviours:FlipViewScrollBehaviour.KeyboardScrollRestrictionStyle="TextBox"
/> 
```

这不是（e.NewValue 为空）：

```
<Style x:Key="TimesheetLineListViewItemTextBox" TargetType="TextBox">
    <Setter Property="Behaviours:FlipViewScrollBehaviour.KeyboardScrollRestrictionStyle" Value="TextBox" />
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:30:48.047

如果您在本地设置 textBox 中的附加属性，然后尝试用您的样式中的 Setter 覆盖它，这是我能猜到的唯一情况，这将阻止它工作。例如 -

```
<TemplatedControls:WatermarkTextBox    
Behaviours:FlipViewScrollBehaviour.KeyboardScrollRestrictionStyle="TextBox"
Style ="{StaticResource TimesheetLineListViewItemTextBox}"/> 
```

在这里，您在本地设置它，如果尝试在样式设置器中设置，它将不起作用。请参阅此链接 -[依赖属性优先顺序](http://msdn.microsoft.com/en-us/library/ms743230.aspx "依赖属性优先顺序")

# layout - 选项卡 (JTabbedPane) 的高度不变

> ID：12283424
> 
> 赞同：0
> 
> 时间：2012-09-05T14:11:03.783
> 
> 标签：layout, tabs, size, height, jtabbedpane

正如标题所说，我的标签的高度没有增加，我的代码如下所示：

```
 JTabbedPane jtp = new JTabbedPane();
    JLabel iconInTab = new JLabel(new ImageIcon("myImage.png"));
    iconInTab.setPreferredSize(new Dimension(100,80)); // is the size of my Image, I've also try to do this using getSize
    jtp.addTab(null,new JPanel());
    jtp.setTabComponentAt(0,iconInTab); 
```

我也尝试过使用 html 但它也不起作用：

```
 jtp.addTab("<html><p><p><p></html>",new ImageIcon("myImage.png"),new JPanel()); 
```

使用第一个代码问题不是水平大小的变化（宽度正确更改），问题仅在于高度，使用第二个代码，如果我在 html 代码中添加多行，文本显示不完整（只是显示中间线）（宽度也符合预期，问题是高度）。. .

为什么会这样？或者我怎么能做到这一点？

**注意：**所以：Mac OS X 10.8.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:51:49.677

解决了！！！问题是MAC OS X（com.apple.laf.AquaTabbedPaneContrastUI）上的默认UI，您只需将其更改为basicTabbedPaneUI（或您的偏好之一），在我的特殊情况下，我需要扩展此类（***很痛苦，因为我想要的真的很复杂）以获得我所期待的外观和感觉，如果您遇到同样的麻烦，请在添加标签之前执行此操作：

```
 myTabbedPane.setUI(new BasicTabbedPaneUI()); 
```

**注意：**检查 TabbedPane 的默认 UI，可能会解决许多不同的问题。

# xslt - 使用节点的完整内容作为测试表达式

> ID：12283433
> 
> 赞同：0
> 
> 时间：2012-09-05T14:11:22.740
> 
> 标签：xslt, expression

我有一个类似这样结构的xml：

```
<data>
  <cond>5 &lt; 10</cond>
</data> 
```

是否可以像这样通过 xsl 评估某些东西？：

```
<xsl:when test="data/cond">
  <!-- do something if 5 is smaller than 10 -->
</xsl:when> 
```

问候凯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:25:03.023

有一些处理器提供扩展功能，例如 Saxon 与[http://www.saxonica.com/documentation/extensions/functions/evaluate.xml](http://www.saxonica.com/documentation/extensions/functions/evaluate.xml)分别为[http://www.saxonica.com/documentation/extensions/functions/evaluate-](http://www.saxonica.com/documentation/extensions/functions/evaluate-node.xml)您可以将其用作例如[node.xml](http://www.saxonica.com/documentation/extensions/functions/evaluate-node.xml)`<xsl:when test="saxon:evaluate-node(data/cond)">...</xsl:when>`。但是 XSLT 1.0 或 2.0 都没有内置这样的特性。

# android - 轻松的 NFC 网址共享

> ID：12283436
> 
> 赞同：1
> 
> 时间：2012-09-05T14:11:31.853
> 
> 标签：android, url, share, nfc, ndef

我正在开发一个维基百科阅读器，我希望用户能够使用 NFC 将他正在阅读的文章分享给朋友。我不想打开这些意图或任何类似的东西，只允许朋友在他选择的浏览器中打开 url。我正在使用网络视图，因此获取网址并不难。

我一直在互联网上搜索某种如此简单的示例，但我还没有找到足够简单的东西。你们中有人对教程或示例有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:40:18.823

这真的很容易。要通过 Android Beam 分享内容，您必须创建一个所谓的 NDEF 消息。一个 NDEF 消息包含一个或多个记录，这些记录具有特定类型（例如 URI、文本、MIME 类型等）并包含您要共享的数据。

在 Activity 中的某处添加这段代码，显示您要共享的 URL，并确保在 URL 更改时调用它：

```
NfcAdapter nfc = NfcAdapter.getDefaultAdapter(this);// (only need to do this once)
if (nfc != null) { // in case there is no NFC
  // create an NDEF message containing the current URL:
  NdefRecord rec = NdefRecord.createUri(url); // url: current URL (String or Uri)
  NdefMessage ndef = new NdefMessage(rec);
  // make it available via Android Beam:
  nfc.setNdefPushMessage(ndef);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T19:02:05.310

您应该查看 UriRecord 或 AbsoluteUriRecord，或者如果您能找到启动浏览器的应用程序记录（？），您甚至可以尝试使用 Android 应用程序记录。而且您应该查看梁 -[此处](http://code.google.com/p/nfc-eclipse-plugin/)的下载部分中有一个项目样板（无耻插件）:-) 您可能想先尝试使用标签获得所需的效果。

# visual-studio - 需要时合并对话框在哪里？

> ID：12283437
> 
> 赞同：4
> 
> 时间：2012-09-05T14:11:32.417
> 
> 标签：visual-studio, tfs, merge

我检查了一些文件以编写一些代码。当我完成后，我在办理登机手续之前做了最新的工作。

获取最新信息时存在冲突，但是，我没有像在以前的工作场所那样获得合并对话框。

这次我只在输出中收到一条消息：

> 警告 - 无法刷新 {file}，因为您有一个待处理的编辑。

是否有我缺少的设置或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:09:04.707

合并在 Pending Changes 窗口的 Conflicts 选项卡上可用。

# ios - 是否可以通过 ajax 加载 URL，然后在新选项卡/窗口中打开结果？

> ID：12283438
> 
> 赞同：0
> 
> 时间：2012-09-05T14:11:32.753
> 
> 标签：ios, ajax, cordova

在你因为这违背了 ajax 的目的而恨我之前，这是我的推理：

我有一个 HTML5 PhoneGap 应用程序，它使用表单身份验证对 asp.NET MVC Web 服务进行数据访问。我想链接到返回 PDF 文件的操作，然后在移动 Safari 中显示该文件。问题是，如果我执行 a `target="_blank"`，则请求来自 safari，它没有存储在应用程序中的表单身份验证 auth cookie，因此请求未经过身份验证。如果我不使用`target="_blank"`，则请求已正确验证，并加载到整个 web 视图（PhoneGap）中，我无权访问 Safari 提供的“在 iBooks 中打开”或“在..中打开”按钮。

我希望能够通过在新选项卡中打开 ajax 加载 PDF，然后在 safari 中显示结果。这可能吗？

编辑：我现在正在尝试这个：

```
$.ajax({
    url: downloadURL,
    type: 'GET',
    xhrFields: {
        withCredentials: true
    },
    success: function(data, textStatus, jqXHR) {
        //console.log(data);
        window.location = 'data:application/pdf;'+data;
    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log('Error retrieving data: ' + errorThrown + '\n' + jqXHR);
    },
    complete: function(jqXHR, textStatus) {
    }
}); 
```

但这会导致 pdf 下载无效。知道如何解决吗？

# c# - 未找到新签名的程序集（停止部署）

> ID：12283440
> 
> 赞同：0
> 
> 时间：2012-09-05T14:11:37.170
> 
> 标签：c#, deployment, sharepoint-2010, .net-assembly, strongname

这是一个非常紧急的问题 - 我的解决方案无法构建，因为引用的程序集（另一个项目）需要使用强名称密钥进行签名。我签署了它，现在尝试部署时“系统找不到指定的文件”！？我检查了 windows\assembly，但它不在那里。

注意：这是我尝试将依赖项目/功能部署到 SharePoint 的时候。它构建良好，但在“激活功能”上失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:28:42.260

现在排序；我会发布答案，以防其他人遇到同样的问题。

对于我正在部署的 wsp 也部署项目依赖项 - 它需要包含在项目清单中。您可以通过双击Package（在正在部署的主项目中）>底部的高级选项卡>然后从项目输出中添加程序集来实现这一点。

# jquery - jQuery 循环延迟加载

> ID：12283442
> 
> 赞同：5
> 
> 时间：2012-09-05T14:11:40.530
> 
> 标签：jquery, cycle

我有一个包含大约 48 张幻灯片的 jQuery 循环演示页面。问题是所有资产的初始加载需要一段时间，因此页面看起来扭曲了大约 1-5 秒。有没有办法仅在调用幻灯片或已知幻灯片是上一张或下一张幻灯片时才延迟加载每张幻灯片所需的资产？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T01:41:58.717

jquery cycle2 插件允许渐进式加载：http: [//jquery.malsup.com/cycle2/demo/progressive.php](http://jquery.malsup.com/cycle2/demo/progressive.php)

```
<div class="cycle-slideshow auto" 
    data-cycle-fx="scrollHorz"
    data-cycle-timeout="2000"
    data-cycle-caption=".caption1"
    data-cycle-caption-template="{{slideNum}} / 9"
    data-cycle-loader="true"
    data-cycle-progressive="#images"
    >
    <!-- only one image declared in markup -->
    <img src="http://jquery.malsup.com/cycle2/images/beach1.jpg">

    <!-- 
        JSON array of slides to be loaded progressively,
        nested inside a script block.  The script block does not need
        to be inslide the slideshow container, it can be anywhere on the
        page.  Note the type on the script tag.
    -->
    <script id="images" type="text/cycle">
[
    "<img src='http://jquery.malsup.com/cycle2/images/beach2.jpg'>",
    "<img src='http://jquery.malsup.com/cycle2/images/beach3.jpg'>",
    ...
    "<img src='http://jquery.malsup.com/cycle2/images/beach9.jpg'>"
]
</script>
</div>
<div class="center caption1"></div> 
```

# email - SpamAssassin MISSING_MIMEOLE 规则

> ID：12283443
> 
> 赞同：1
> 
> 时间：2012-09-05T14:11:41.163
> 
> 标签：email, spam, php, spamassassin

我发送 spamassasin 非常苛刻的邮件 - 它给出的最大缺点之一是：

```
 0.0 HTML_IMAGE_RATIO_06    BODY: HTML has a low ratio of text to image area
 -1.9 BAYES_00               BODY: Bayes spam probability is 0 to 1% [score: 0.0000]
  1.6 HTML_IMAGE_ONLY_24     BODY: HTML: images with 2000-2400 bytes of words
  0.0 HTML_MESSAGE           BODY: HTML included in message
  0.8 RDNS_NONE              Delivered to internal network by a host with no rDNS
**1.9 MISSING_MIMEOLE        Message has X-MSMail-Priority, but no X-MimeOLE 
```

我查了一下，上面写着：

> SpamAssassin 规则：MISSING_MIMEOLE
> 
> 标准描述：邮件有 X-MSMail-Priority，但没有 X-MimeOLE
> 
> 解释
> 
> 该邮件假装由使用扩展标头 X-MSMail-Priority 的 Microsoft 电子邮件程序生成，但缺少 Microsoft 电子邮件特有的扩展标头 X-MimeOLE。
> 
> 这表明发件人正在使用编写错误的邮件发送软件，而不是正版 Microsoft 电子邮件程序。

我在 ubuntu 上的 apache 服务器上使用 htmlmimemail5 - 我不想使用该死的 microsoft mailsendout 软件 - 我如何避免获得那些 1.9 分？（我需要低于 2 分才能进入垃圾邮件过滤器）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:18:33.673

两者都不要放`X-MSMail-Priority:`，你就可以回家了。

更一般地说，不要复制/粘贴电子邮件标题；只放入您知道需要并且您知道其目的的标题。垃圾邮件发送者不会，如果你表现得像垃圾邮件发送者，你会得到你应得的（或者，至少，你被认为是可接受的附带损害）。

# jquery - 在条件jQuery上执行setInterval

> ID：12283444
> 
> 赞同：0
> 
> 时间：2012-09-05T14:11:45.177
> 
> 标签：jquery

在我的母版页加载`checkNotification();`函数每 1 分钟调用一次。在母版页上有一个下拉列表。`cmbTicketStatus`如果下拉值为 4，则不要运行 setInterval 函数。

尝试了一些代码：-

```
function masterPageLoad() {
    setInterval(function() { 
         if($('#cmbTicketStatus').val != '4')
         {
         checkNotification();
         } }, 60000);
         } 
```

我的项目就像例如当我在下拉菜单中选择“ONE”时单击 SHOW 我在我的页面中看到了 50 行，并且在这 50 行上调用 setInterval 函数很有效，因为该函数在其中接受了 somw 行数据。但是，如果我在下拉菜单中选择“四”，请单击 SHOW，我的页面中有 15000 行。在这里我不想运行 setInterval 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:14:14.857

你应该使用`$('#cmbTicketStatus').val()`. `val`是函数而不是属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:17:24.080

```
var id;
$('#cmbTicketStatus').change(function(){
 if(this.val()!=4)
 {
  if(!id){
   id = setInterval(function(){/*your function*/},6000);
  }
 }
 else
 {
  clearInterval(id);
  id=null;
 }
}); 
```

# java - 每个应用程序使用 sdcard 的 Android 存储限制

> ID：12283445
> 
> 赞同：0
> 
> 时间：2012-09-05T14:11:47.527
> 
> 标签：java, android, android-sdcard, android-permissions

我需要知道每个应用程序使用 sdcard 是否有任何限制？我正在尝试在相机应用程序录制时将视频部分写入 scdard，并且在 50mb 之后（大约没有经过良好测试）我收到错误：“没有剩余空间”。虽然 sdcard 还剩 1.4 GB 可用空间。如果有限制，我该如何更改或删除它？

谢谢

编辑：完整的错误信息：

```
FileNotFoundException: /sdcard /20120905_180841_VIDEO_PART89.bin (No space left on device) 
```

这是我的写作方法：

```
private void write(byte[] DataByteArray, String DestinationFileName)
{

    OutputStream output = null;

    try {
        output = new BufferedOutputStream(new FileOutputStream(DestinationFileName)); //exception occurs here
        output.write( DataByteArray );        
    }
    catch(FileNotFoundException ex){
        Log.e(Helper.LOG_TAG, "FileNotFoundException: " + ex.getMessage());
    }
    catch(IOException ex){
        Log.e(Helper.LOG_TAG, "IOException" +  ex.getMessage() + " " + ex.getClass());
    }
    finally {
        try {
            if(output != null)
                output.close();
        } catch (IOException e) {
            Log.e(Helper.LOG_TAG, "IOException while closing output " + e.getMessage() + " " + e.getClass());
        } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:18:41.673

> 每个应用程序使用 sdcard 是否有任何限制？

不。

> 我正在尝试在相机应用程序录制时将视频部分写入 scdard，并且在 50mb 之后（大约没有经过良好测试）我收到错误：“没有剩余空间”。

确保您正在写入外部存储。

# java - 在 Appfog 上部署简单的 Java Web 应用程序

> ID：12283448
> 
> 赞同：6
> 
> 时间：2012-09-05T14:11:52.430
> 
> 标签：java, web, paas, appfog

我开始使用 appfog ( [http://www.appfog.com/](http://www.appfog.com/) )，但没有找到任何解释如何部署简单 Java Web 应用程序的资源。我尝试提取我拥有的 .war 文件，然后更新应用程序，但我没有运气。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T19:06:38.560

看到示例后，在 AppFog 上部署 Java Web 应用程序非常简单。这是一些文档：[https ://docs.appfog.com/languages/java](https://docs.appfog.com/languages/java)

步骤1）构建一个war文件并cd到里面有war文件的目录（通常是cd target）

步骤 2) 自动推送

您不想提取war文件，只需与war文件位于同一目录中即可。

希望这可以帮助！祝你好运！google 组中还有一个很棒且充满活力的 AppFog Java 用户社区：[https ://groups.google.com/forum/#!forum/appfog-users](https://groups.google.com/forum/#!forum/appfog-users)

# highcharts - 计算高图中 yAxis 的第 85 个百分位数

> ID：12283453
> 
> 赞同：1
> 
> 时间：2012-09-05T14:12:03.113
> 
> 标签：highcharts, percentile

我有一个包含多个系列的图表，我有一个将 yAxis 重置为特定数量的按钮。我想将此特定数量设置为 yAxis 值的第 85 个百分位。有没有办法计算这个？jsfiddle 示例：http: [//jsfiddle.net/inadcod/TynwP/](http://jsfiddle.net/inadcod/TynwP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:16:20.633

很奇怪，您希望在客户端上执行此操作，您可以非常轻松地排序并获取服务器上实际发送数据的第 85 个百分位的值，并将其用作 y 轴的最大值。

无论如何，您可以使用`series.points`对象数组访问数据值，它包含给定系列的所有点，它有许多`point.y`您感兴趣的属性。循环遍历所有这些并将它们存储在另一个数组中以方便使用并对这个新数组进行排序。将数组的长度乘以您希望的倍数（0.85），这是元素的索引，也就是第 85 个百分位数。使用此值设置给定 yAxis 的最小值

```
var yData = [];
$.each(chart.series[0].points, function() {
    yData.push(this.y);
});
var sortedY = sort(yData);
var eightyFifthPercentile = sortedY[Math.floor(sortedY.length * 0.85)];

alert(eightyFifthPercentile); 
```

[http://jsfiddle.net/jugal/HkS2Y/](http://jsfiddle.net/jugal/HkS2Y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:01:08.173

你可以这样做：

```
var yAxis = chart.yAxis[0];
var extremes = yAxis.getExtremes();
yAxis.setExtremes(extremes.min, extremes.dataMax * 0.85); 
```

在此处查看演示：http: [//jsfiddle.net/gyavJ/](http://jsfiddle.net/gyavJ/)

# android - 从 Android 中的服务获取电池状态

> ID：12283454
> 
> 赞同：1
> 
> 时间：2012-09-05T14:12:09.733
> 
> 标签：android, service, status, battery

我正在开发一个应用程序，我需要为此监视服务的剩余电池百分比。谁能告诉我该怎么做？我发现一些示例代码从活动中获取电池状态，而不是从服务中获取。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T12:16:14.843

使用 ACTION_BATTERY_CHANGED。每次电池值变化时都会调用它。请参阅下面的代码以了解它是如何完成的：

```
public void onCreate()
{

this.registerReceiver(this.mBatInfoReceiver, 
        new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
}

private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context arg0, Intent intent) {

    int level = intent.getIntExtra("level", 0);
    Log.e("test", String.valueOf(level) + "%");

     }
};

public void onDestroy(){

    // unregister receiver
    this.unregisterReceiver(this.mBatInfoReceiver);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T14:39:46.527

有什么不同 ？您应该能够在服务中注册电池事件的接收器，就像您注册活动一样。例如：

```
private final BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context arg0, Intent intent) {
        int rawLevel = intent.getIntExtra("level", -1);
        int scale = intent.getIntExtra("scale", -1);
        int status = intent.getIntExtra("status", -1);
        // Do something
    }
};

public void onCreate() {
    registerReceiver(this.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
}

public void onDestroy() {
     unregisterReceiver(this.mBatInfoReceiver);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-04T11:06:03.527

我认为你必须使用 ACTION_BATTERY_CHANGED。请注意，这是一个*粘性*意图，因此您不需要直接在广播接收器中监视它。您可以直接从 Activity 获取引用。

来自安卓文档：

*因为它是一个粘性意图，所以您不需要注册 BroadcastReceiver — 只需调用 registerReceiver 并传入 null 作为接收器，如下一个片段所示，返回当前电池状态意图。*

[http://developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:21:06.867

这是您通过 BroadcastReceiver 需要的：http: [//developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

# sql - SQL 条件求和

> ID：12283459
> 
> 赞同：1
> 
> 时间：2012-09-05T14:12:19.617
> 
> 标签：sql, ms-access-2010, calculated-columns

我试图在 Access 中编写一个计算，该计算涉及某些值的 SUM 加上 IF 语句的结果。

这是我正在处理的数据类型表（来自'CostBaseQuery）

```
CompanyName Year    AssetName  DatapointID  Datapointname                DatapointValue
CompanyA    2011    AssetA     4025         Active operated wells           129
CompanyA    2011    AssetA     4058         API gravity of oil              38.5563255
CompanyA    2011    AssetA     4032         Number of gas lift wells        70
CompanyA    2011    AssetA     4033         Number of wells with ESPs       0
CompanyA    2011    AssetA     4036         Wells with CO2 production       25
CompanyA    2011    AssetA     4035         Wells with H2S production       9
CompanyA    2011    AssetA     4038         Wells with high pressure        0
CompanyA    2011    AssetA     4037         Wells with high temperature     0
CompanyA    2011    AssetA     4034         Wells with scale production     42
CompanyA    2011    AssetA     4039         Wells with wax                  0 
```

计算需要**SUM(DatapointValue)** WHERE DatapointID IN (4032,4033,4035,4036,4037,4038,4039)

**加上从 IF 语句返回的值**

IF（API 油重 <=5 或 >20，使用 ActiveOperatedWells 的值，否则为 0）

我尝试使用以下方法对计算进行编码，但它在 SUM 的每次迭代中输出数据，而不是执行 SUM 计算，然后执行 IF 语句。

```
SELECT qb1.CompanyName, qb1.AssetName, qb1.Year, 
(SUM(qb1.DatapointValue) 
+ IIF(qb2.DatapointValue>=5, 
       IIF(qb2.DatapointValue<20, qb3.DatapointValue, 0), 0)) 
AS NumberOfWellCompletions

FROM (CostBaseQuery AS qb1 
     INNER JOIN CostBaseQuery AS qb2 
          ON qb1.CompanyYearAssetID=qb2.CompanyYearAssetID) 
     INNER JOIN CostBaseQuery AS qb3 
          ON qb1.CompanyYearAssetID=qb3.CompanyYearAssetID

WHERE qb1.DatapointID IN (4032,4033,3036,4035,4038,4037,4034,4039)
AND qb2.DatapointID=4058 AND qb3.DatapointID=4025

GROUP BY qb1.CompanyName, qb1.AssetName, qb1.Year, 
qb1.DatapointValue, qb2.DatapointValue, qb3.DatapointValue 
```

任何帮助将不胜感激，我希望这比我之前的漫无边际更有意义！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:16:35.823

我认为您不想分组`DatapointValue`，因为这些是单独的值，而您正在寻找总和。

尝试更改`GROUP BY`为：

```
GROUP BY qb1.CompanyName, qb1.AssetName, qb1.Year 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:17:05.480

```
SUM(qb1.DatapointValue + IIF(ab2.DatapointValue <=5 AND qb2.DatapointValue > 20, qb3.DatapointValue, 0)) as NumberOfWellCompletions
...

GROUP BY qb1.CompanyName, qb1.AssetName, qb1.Year 
```

您可以简化您的 SUM（好吧，不清楚您想要总结什么，但您可能会遇到括号问题）

您必须清楚是否需要检查`<= 5`或`>=5`（问题中的文本和代码之间的差异）

您必须更改您的 GROUP BY

# android - 在 Ubuntu 12.04 上编译 Android 源代码无法继续，因为 JDK 版本不好

> ID：12283462
> 
> 赞同：1
> 
> 时间：2012-09-05T14:12:45.567
> 
> 标签：android, oracle, compilation, jdk1.6, openjdk

我整天都在尝试在我的 Ubuntu 12.04 64 位操作系统上编译 Android 源代码。

出于某种原因，我被困在安装 Sun/Oracle JDK 1.6 版本的阶段。我一直在尝试许多命令（当然还有官方链接），但最终我要么一无所有，要么拥有 JDK 1.7 或 OpenJDK，要么没有 jdk-tools。

使用 JDK 成功编译代码（或部分代码）的具体步骤是什么？我被困在[这个链接](http://source.android.com/source/building.html)上的“make j4”阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:06:33.587

为android安装正确的java版本（1.6）执行以下操作

1）安装JDK

由于 Sun JDK 不再在 Ubuntu 的主软件包存储库中，我们必须从 oracle 网站手动将其安装在 ubuntu 12.04 中

请转到以下链接并下载JDK

[http://www.oracle.com/technetwork/java/javase/downloads/jdk6-downloads-1637591.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk6-downloads-1637591.html)

按照以下步骤安装java并配置它以供使用

```
$ chmod +x jdk-6u33-linux-x64.bin

$ sudo ./jdk-6u33-linux-x64.bin
$ sudo mv jdk1.6.0_33 /usr/lib/jvm/

$ sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk1.6.0_33/bin/java 1
$ sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/jdk1.6.0_33/bin/javac 1
$ sudo update-alternatives --install /usr/bin/javaws javaws /usr/lib/jvm/jdk1.6.0_33/bin/javaws 1

$ sudo update-alternatives --config java
$ sudo update-alternatives --config javac
$ sudo update-alternatives --config javaws 
```

要验证安装是否正确，请执行以下步骤。现在应该显示运行的是 Sun JDK 而不是 IcedTea

```
$ java -version

java version "1.6.0_33"

Java(TM) SE Runtime Environment (build 1.6.0_33-b04)

Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03, mixed mode) 
```

要在 ubuntu 12.04 上编译 android 并安装正确的 java 版本，请访问[http://www.embeddedcircle.com/android-compilation-in-ubuntu-12-04-lts-precise-for-pandaboard/](http://www.embeddedcircle.com/android-compilation-in-ubuntu-12-04-lts-precise-for-pandaboard/)

谢谢迪诺

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:31:18.450

我遇到了同样的问题。有些人甚至报告 JDK SE 都会看到错误。另一种解决方法是修改两行源代码，请参见此处：

![差异变化](../Images/23f576da6f4f9ce1e6c00dbae7ff8b97.png)

[https://github.com/CyanogenMod/android_external_guava/commit/c8b97210aa31c9b80b5fd136d8617ebe4e731e09](https://github.com/CyanogenMod/android_external_guava/commit/c8b97210aa31c9b80b5fd136d8617ebe4e731e09)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:21:32.417

在 Ubuntu 中，当您下载 jdk（32 位版本，如果它用于 android 编程，我认为 tar.gz 比 .rpm 更好）时，“安装”和使用您的命令导出很重要如果我没记错的话，可以在 Oracle 的页面中看到。您还需要转到您的编辑器（Eclipse、Netbeans 还是哪个？）并添加新的 Java 平台以确保您使用的是您想要的 JDK 版本。导出意味着您可以在需要时编译项目要。如果没有，您必须转到 java 目录并在 /bin 文件夹中执行命令（可能在开头使用 sudo）来编译您的项目。

[PS：你可以在这里](http://www.cyberciti.biz/faq/howto-ubuntu-linux-install-configure-jdk-jre/)找到如何导出

# string - 在bash中，如何将N个参数连接在一起作为空格分隔的字符串

> ID：12283463
> 
> 赞同：15
> 
> 时间：2012-09-05T14:12:47.080
> 
> 标签：string, bash, arguments

我正在尝试编写一个函数，它接受*n 个*参数并将它们连接成一个字符串。

在 Perl 中它会是

```
my $string = join(' ', @ARGV); 
```

但在bash中我不知道该怎么做

```
function()
{
    ??
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-05T14:17:33.660

检查`bash`手册页的特殊参数下的“*”条目。

```
join () {
    echo "$*"
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-05T14:23:53.420

对于最直接的问题，[chepner 的答案](https://stackoverflow.com/a/12283551/900873)( `"$*"`) 是最简单的，但作为如何依次访问每个参数的示例：

```
func(){
    str=
    for i in "$@"; do 
        str="$str $i"
    done
    echo ${str# }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-05T14:36:18.067

这个行为类似于 Perl `join`：

```
#!/bin/bash

sticker() {
  delim=$1      # join delimiter
  shift
  oldIFS=$IFS   # save IFS, the field separator
  IFS=$delim
  result="$*"
  IFS=$oldIFS   # restore IFS
  echo $result
}

sticker , a b c d efg 
```

上述输出：

```
a,b,c,d,efg 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-05T00:17:49.153

类似于 perreal 的答案，但有一个子外壳：

```
function strjoin () (IFS=$1; shift; echo "$*");
strjoin : 1 '2 3' 4
1:2 3:4 
```

Perl 的连接可以用多个字符分隔，并且可以足够快地从 bash 中使用（直接或使用别名或函数包装器）

```
perl -E 'say join(shift, @ARGV)'  ', '   1 '2 3' 4
1, 2 3, 4 
```

# c++ - 禁止 Python 打印输出

> ID：12283465
> 
> 赞同：1
> 
> 时间：2012-09-05T14:12:53.320
> 
> 标签：c++, python

我将 Python 嵌入到 C++ 应用程序中（使用 Python C API），并且我希望抛出的 Python 异常由已经在 C++ 中设置的异常处理程序机制处理。这种异常处理机制将打印出异常本身，因此我不希望嵌入式 Python 解释器将其打印到屏幕上。我可以设置嵌入式 Python 解释器以某种方式抑制控制台输出吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:14:55.263

您可以将 Stub-Streamhandler 插入 python 中的`standard out`和`standard error`通道。

这是一个示例（包括取消两个通道）：

```
import sys
import cStringIO

print("Silencing stdout and stderr")
_stdout = sys.stdout
_stderr = sys.stderr
sys.stdout = cStringIO.StringIO()
sys.stderr = cStringIO.StringIO()

print("This should not be printed out")

sys.stdout = _stdout
sys.stderr = _stderr

print("Revoiced stdout and stderr") 
```

运行此示例应产生以下输出：

```
Silencing stdout and stderr
Revoiced stdout and stderr 
```

**[更新]**

这里是发送到的节省内存的变体`devnull`：

```
import os, sys
with open(os.devnull, 'w') as devnull:
    sys.stdout = devnull
    sys.stderr = devnull
    # ... here your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:56:06.430

你是如何执行代码的？如果异常没有被python直接捕获和打印（有人直接在python中安装了处理程序），它将被设置为异常处理，然后可以使用C检查异常（参见参考手册中的异常处理部分）。

如果您从 C 代码调用 python 脚本，调用函数将返回 NULL 或 -1（发生异常），现在您可以使用上述 API 读取异常（例如 PyErr_Occurred(),...）。

但是如果这些事情是由 python 代码本身完成的（如果有人在它的代码中安装了一个钩子或其他东西并直接打印它），那么你没有任何改变可以轻松地捕捉事情。也许你可以自己添加一个钩子，调用你的代码。这可以通过 sys.excepthook(type, value, traceback) 完成，一种解决方案是找到位置并将其从代码中删除，或者查看其他方法来规避它。

这个网站提供了很多关于它的信息：[Python API/include files](http://docs.python.org/c-api/intro.html#include-files)

编辑：对于重定向标准输出或标准错误，您可以使用 C-Api 函数：

```
FILE* sto = fopen("out.txt", "w+");
FILE* ste = fopen("outErr.txt", "w+");
PySys_SetObject("stdout", PyFile_FromFile(sto, "out.txt","wb", fclose)); 
PySys_SetObject("stderr", PyFile_FromFile(ste, "outErr.txt","wb", fclose)); 
```

在调用任何其他 python 代码之前。我认为 PyFile_FromFile 也可能被其他东西取代，但到目前为止我还没有使用过这个。

# javascript - 创建新对象时，为什么要更新旧对象？

> ID：12283469
> 
> 赞同：0
> 
> 时间：2012-09-05T14:13:24.537
> 
> 标签：javascript, object, scoping

当我从现有对象创建一个新对象，然后附加一个新属性时，为什么它会更新较早的属性？

他们的解决方案是否不需要过多更改我的代码？

[这是我的示例 jsfiddle](http://jsfiddle.net/qS4XZ/1/)。

```
var data = [
  {
    "id" : 1,
    "name" : "carrot",
    "price" : 0.10,
    "stock" : 12,
    "bgLocation" : "-1px -54px"
  },
  {
    "id" : 2,
    "name" : "fennel",
    "price" : 1.20,
    "stock" : 6,
    "bgLocation" : "-146px -52px"    
  }
]

var item = data[0];
item.added = 4;

//data[0] should not contain the added attribute.
$('body').append(JSON.stringify(data[0])); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:18:42.753

变量**item**和**data**只是指向同一个对象的引用。通过调用。

```
var item = data[0]; 
```

您不是在复制对象，而是在使用**data[0]**寻址的对象上创建一个新引用。所以

```
item.added = 4; 
```

将更改机器人变量指向的对象。

这里

[如何正确克隆 JavaScript 对象？](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)

是有关如何在 javascript 中复制对象的一些详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:20:10.880

因为你得到的只是对原始对象的*引用，**而不是*副本。因此，如果您更新此引用，您将隐式更新原始对象。

您可以使用以下命令轻松创建副本[`$.extend()`](http://api.jquery.com/jQuery.extend/)：

```
var item = $.extend({}, data[0]); 
```

**[演示](http://jsfiddle.net/qS4XZ/2/)**。

# java - JPL/SWI Prolog 配置失败

> ID：12283471
> 
> 赞同：2
> 
> 时间：2012-09-05T14:13:29.790
> 
> 标签：java, ffi, swi-prolog, jpl

我现在正在配置 JPL，并想使用 java 与 swi-prolog 一起工作。

我下载了最新的稳定版SWI-Prolog，6.2.0，安装在D:\swipl

首先，我在 PATH virable 中添加了以下路径：D:\swipl\bin，它应该包含所有需要的 dll 文件。

然后，我在 CLASSPATH virable 中添加了以下路径：D:swipl\lib\jpl.jar，这应该是需要的 jar 文件。

当我尝试运行提供的版本示例时，出现以下错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: jpl.fli.Prolog.thread_self()I
    at jpl.fli.Prolog.thread_self(Native Method)
    at jpl.Query.open(Query.java:286)
    at jpl.Util.textToTerm(Util.java:162)
    at jpl.Query.Query1(Query.java:183)
    at jpl.Query.<init>(Query.java:176)
    at Versions.main(Versions.java:11) 
```

在网上搜索后，我发现很多人只是`java.lang.UnsatisfiedLinkError: no jpl in java.library.path`因为`PATH`变量的设置而得到，而不是我在这里得到的错误：（`java.lang.UnsatisfiedLinkError: jpl.fli.Prolog.thread_self()I`是的，行尾有一个“I”）。

以前有没有人收到过这个错误？我已经尝试了几个以前版本的 SWI-Prolog，但也遇到了其他类型的错误。我正在使用 Eclipse IDE 进行 Java 开发——我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T22:52:51.200

我已经把问题发到了swi-prolog.org提供的官方邮件列表（swi-prolog@lists.iai.uni-bonn.de），幸好有人帮我证明6.2版本有问题.0\. 然后我们都尝试了 6.0.2 版本，它运行良好。他提到（我注意到）6.2.0 版的 bin 文件夹中没有 swipl.dll，这可能会导致问题。

我已经通过电子邮件向工作人员报告了这个问题，至少目前，我建议想要配置 JPL 的人应该下载 6.0.2 版本。要记住三件事：

1.  在环境变量的系统变量下添加一个新变量SWI_HOME_DIR，并将路径设置为你安装SWI-Prolog的地方（我的是D:\swipl）；

2.  将路径 %SWI_HOME_DIR%\bin 添加到 PATH 变量中，而不是使用“D:\swipl\bin”之类的内容。（否则会出现【致命错误：找不到系统资源】）

3.  将路径 %SWI_HOME_DIR%\lib\jpl.jar 添加到您的 PATH 变量中，而不是使用“D:\swipl\lib\jpl.jar”之类的内容。（否则会出现【致命错误：找不到系统资源】）

如果您使用 Eclipse 进行 Java 开发，那么您似乎不需要在 IDE 中进行配置。只要按照上面的3个步骤，把正确的jar文件添加为外部库，应该没问题。

我不确定临时解决方案是否适用于所有人，但绝对有问题的每个人都应该先尝试这种方法。只要解决了6.2.0版本的问题，我就在这里补充一些意见。

顺便说一句，据我所知，到目前为止，有问题的人使用的是 32 位 Windows。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:56:59.063

尝试通过 Run > Run Configuration > [project name] 将路径添加到 java.library.path 并在“VM Arguments”选项卡下添加以下内容。

```
-Djava.library.path="D:\swipl\bin;." 
```

此外，在“环境”选项卡下，添加以下内容：

```
VARIABLE: PATH
VALUE: D:\swipl\bin;${env_var:PATH} 
```

之后，转到 Project > Properties > Java Build Path，选择“Libraries”选项卡。单击“添加外部 JARS..”并找到您的`jpl.jar`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T10:30:31.513

Great Great Great，第二个答案是解决方案

1.  创建 SWI_HOME_DIR 变量以设置 swi prolog 安装目录 SWI_HOME_DIR -------- C:\Program Files\swipl
2.  将 PATH 设置为指向库和 bin，如下所示 PATH ------ %SWI_HOME_DIR%\bin;%SWI_HOME_DIR%\lib\jpl.jar

这解决了我的问题“线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 窗口中没有 jpl”它有点罕见，但它可以找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T12:31:29.670

我有同样的问题。除了设置 PATH 之外，您还需要验证安装的 SWI 程序是否与您的 JVM 具有相同的架构（32 或 64）。

# networking - 为什么 RIP（路由信息协议）使用 15 跳的跳数？

> ID：12283473
> 
> 赞同：-1
> 
> 时间：2012-09-05T14:13:37.063
> 
> 标签：networking

我正在阅读距离矢量协议 RIP 之一，并知道它使用的最大跳数是 15 跳，但我怀疑为什么 15 用作最大跳数，为什么不使用其他数字 10,12 或可能是 8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:15:34.923

我的猜测是，`15`或者`16 - 1`换`2^4 - 1`一种说法：在 4 位信息中保存的最大无符号值。

但是，该[`metric`](http://www.networksorcery.com/enp/protocol/rip.htm#Metric)字段的长度为 4 个字节。该值`16`表示*无穷大*。

我只能猜测，但我会说它允许使用简单的位掩码操作进行快速检查，以确定是否`metric`为*无穷大*。

现在真正的问题可能是：“为什么`metric`字段长度为 4 字节，而显然只使用了 5 位？” 为此，我没有答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:22:37.383

协议经常做出任意决定。RIP 是一个非常基本的（而且相当古老的协议）。在阅读相关内容时，您应该牢记这一点。如上所述，最大跳数将是一个 4 字节的字段，其中 16 相当于无穷大。10 不是 2 的幂。8 可能被认为太小而无法到达所有路由器。

保持最大跳数较低的基本原理是计数无穷大问题。更高的最大跳数将导致更高的收敛时间。（我会把你留给维基百科计数到无穷大的问题）。某些版本的 RIP 使用水平分割来解决这个问题）。

# javascript - 如何获取将应用于 ExtJs 中给定类列表的样式

> ID：12283475
> 
> 赞同：0
> 
> 时间：2012-09-05T14:13:36.483
> 
> 标签：javascript, css, dom, extjs

我已经尝试过`Ext.DomHelper.createDom`，但它创建了一个对象而不应用`document styles`它。`Ext.util.CSS.getRules`可以获得所有规则，但我必须手动确定哪些样式将被覆盖以及哪些样式将被应用。

有没有一种简单的方法来获取给定类列表的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:52:30.447

Ext JS 没有提供获取元素所有样式的方法，但是您可以在将元素附加到`dom`:

```
Ext.onReady(function() {

    var el = Ext.DomHelper.append(document.body, {
        tag: 'div',
        cls: 'foo'
    }),
    styles;

    if (window.getComputedStyle) {
        // use getComputedStyle if supported
        styles = window.getComputedStyle(el);
    } else {
        // fall back to currentStyle for IE8 and below
        styles = el.currentStyle;
    }

    // get a style
    alert(styles.fontSize);

}); 
```

当然如果你只是需要一个特定的样式，我推荐使用的`getStyle()`方法，`Ext.Element`因为它可以为你处理浏览器的差异。

# gdb - 通过以太网在 Mac 之间进行两机 GDB 调试 - 事务超时

> ID：12283476
> 
> 赞同：0
> 
> 时间：2012-09-05T14:13:44.987
> 
> 标签：gdb, driver, kernel-extension

我正在尝试使用运行 gdb 的远程计算机调试一个设备驱动程序，该驱动程序正在使 Mac 上的内核崩溃（尝试按照[此处](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KEXTConcept/KEXTConceptDebugger/debug_tutorial.html)的说明进行操作）。两台机器通过以太网连接到同一个网络（甚至同一个路由器，都可以访问网络）。我也设置`nvram boot-args="debug=0x144"`了目标并重新启动。

然后我像往常一样在目标上加载内核扩展。在主机上，我像这样启动 gdb：

```
$ gdb -arch i386 /Volumes/KernelDebugKit/mach_kernel 
```

进入 gdb 后，我加载内核宏并设置远程连接

```
(gdb) source /Volumes/KernelDebugKit/kgmacros
(gdb) target remote-kdp
(gdb) kdp-reattach 11.22.33.44 
```

但是，最后一个命令没有建立连接，我得到了一个无穷无尽的线轴

```
kdp_reply_wait: error from kdp_receive: receive timeout exceeded
kdp_transaction (remote_connect): transaction timed out
kdp_transaction (remote_connect): re-sending transaction 
```

将 gdb 连接到目标机器的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:09:02.770

有多种方法可以突破目标，包括：

*   内核恐慌，如您在上面的回答中所述。
*   不可屏蔽中断，由 cmd-option-ctrl-shift-esc 组合键触发。
*   使用在 pexpert/pexpert.h 中声明的 PE_enter_debugger() 在内核扩展中编写中断代码
*   通过在 NVRAM 引导参数值中设置 DB_HALT (0x01) 来停止引导。

此外，您可能需要设置一个持久的 ARP 表条目，因为目标在调试器中停止时无法响应 ARP 请求。我在调试器启动 shell 脚本中使用以下内容来设置 ARP 条目（如果它尚不存在）：

```
if !(arp -a -n -i en0 | grep '10\.211\.55\.10[)] at 0:1c:42:d7:29:47 on en0 permanent' > /dev/null) ; then
    echo "Adding arp entry"
    sudo arp -s 10.211.55.10 00:1c:42:d7:29:47
fi 
```

更专业的人可能会改进我的 shell 脚本。

以上所有内容都记录在 [http://developer.apple.com/library/mac/documentation/Darwin/Conceptual/KernelProgramming/KernelProgramming.pdf](http://developer.apple.com/library/mac/documentation/Darwin/Conceptual/KernelProgramming/KernelProgramming.pdf)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:55:22.450

答案只是在您尝试从主机附加 gdb*之前*确保目标有内核崩溃。

# android - 蓝牙连接丢失时如何返回上一屏幕？

> ID：12283478
> 
> 赞同：0
> 
> 时间：2012-09-05T14:13:46.597
> 
> 标签：android, bluetooth

首先，我的 android 设备会扫描蓝牙设备，然后将它们显示在列表视图中。我选择其中一个，然后出现一个新屏幕。断开连接时如何返回主屏幕。以下是所选设备屏幕的代码。

```
public class devicefound extends Activity implements OnClickListener {

private BluetoothAdapter mBluetoothAdapter = null;
private BluetoothSocket btSocket = null;
private OutputStream outStream = null;
Button b1;
private static final UUID MY_UUID = 
        UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
public static String address;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    findViewById(R.id.b1).setOnClickListener(this);
    b1 = (Button) findViewById(R.id.b1);
}

@Override
public void onStart() {
    super.onStart();

    String address = getIntent().getStringExtra("address");
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);

    try {
        btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) { }

    run();

}

public void run(){
    try {
        btSocket.connect();

    } catch (IOException e) {
        try {
            btSocket.close();
        } catch (IOException e2) {  }
        return;
    }
}

public void onClick(View v){
    String message1 = "1";

    byte[] msgBuffer1 = message1.getBytes();
    try{
    outStream = btSocket.getOutputStream();
    } catch (IOException e){ }
         try {
            outStream.write(msgBuffer1);
        } catch (IOException e) {
        }
    }

}           

@Override
public void onPause() {
    super.onPause();
    if (outStream != null) {
        try {
            outStream.flush();
        } catch (IOException e) { }
    }

}

@Override
public void onStop() {
    super.onStop();

}

@Override
public void onDestroy() {
    super.onDestroy();

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:21:48.107

如果你想返回上一个屏幕，那么你可以调用你的 devicefound 类从 Activity 继承的[finish方法。](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:19:36.403

据我所知，您应该在这种情况下使用 BroadcastReceiver。像这样[http://android-er.blogspot.com/2011/05/start-bluetooth-discoverable-and.html](http://android-er.blogspot.com/2011/05/start-bluetooth-discoverable-and.html)

# java - 是否可以在构建的特定阶段包含依赖项？

> ID：12283483
> 
> 赞同：0
> 
> 时间：2012-09-05T14:13:55.093
> 
> 标签：java, maven, jar, maven-3

我目前正在使用 maven-jar-plugin 从一个特定的类文件夹构建一个 JAR，我已将其作为提供的范围依赖项包含在内。我现在需要将此 JAR 作为依赖项包含在我的最终构建中。

那么，是否可以在构建的特定阶段包含依赖项？

**注意：依赖项是在构建过程中构建的，因此它仅在编译阶段可用。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:32:45.020

解决这个问题的最简单方法是将使用 maven-jar-plugin 构建的代码分离到一个单独的 Maven 项目中，并在主 Maven 项目中将其称为正常依赖项。

这样一来，您就不必费心让一个 Maven 构建产生两个不同的工件（您正在生成的 JAR，然后是主输出减去该 JAR 的类），同时在第二个中引用第一个的输出。

或者，假设您的主项目的包类型设置为`jar`，您可以将“特定类文件夹”类添加到项目的`<resources>`元素中，然后配置/覆盖`maven-jar-plugin`在该`package`阶段运行的执行[以排除这些类](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#excludes)，`<excludes>`元素位于`<configuration>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:19:27.343

您可以配置[生成的 jar 中包含的文件](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.4</version>
    <configuration>
      <includes>
        <include>relative_path_to_your_jar</include>
        <include>**/**</include> 
      </includes>
    </configuration>
  </plugin> 
```

[http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#includes](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#includes)

# button - 在 Twitter Bootstrap 中更改 btn-group .active 样式

> ID：12283486
> 
> 赞同：17
> 
> 时间：2012-09-05T14:14:13.190
> 
> 标签：button, twitter-bootstrap, less

我正在使用 Bootstrap .btn-group 并将按下的按钮切换到活动状态，就像单选按钮一样。我发现按钮上没有足够的对比度来告诉它在设置为 .active 状态时被选中。我浏览了 Less 文件，看起来 .active 删除了渐变背景并添加了一个盒子阴影。谁能告诉我一种简单（不太侵入性）的方法来使 Bootstrap 中 .btn-group 中的 .btn 的 .active 状态变暗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-05T14:36:29.540

`.btn.active {background-color}`在 button.less 第 50 行定义，但是自定义它的“不太侵入”的方式是添加以下规则到你的 CSS 并且不要触及原始的 Less。

```
.btn.active, .btn:active {
    background-color: #XXXXXX;
} 
```

# c# - NServiceBus 警告“找不到消息类型的处理程序”

> ID：12283490
> 
> 赞同：7
> 
> 时间：2012-09-05T14:14:20.040
> 
> 标签：c#, nservicebus

我是 NServiceBus 的新手，我正在尝试开发一个发布者和单独的订阅者（我使用的是 v3.2.0.0），到目前为止，它工作正常——发布者和订阅者都在 NServiceBus 主机中运行。我的消息都发布正常，但间歇性地它们没有被订阅者接收，发布者显示以下错误：

```
2012-09-05 14:27:37,491 [Worker.6] WARN  NServiceBus.Unicast.UnicastBus [(null)]  <(null)> - No handlers could be found for message type: MyNamespace.MyMessage 
```

但是，并非所有消息都出现此警告，因此如果我在消息后继续发布消息，我可能会看到其中一半显示消息，因此不会被订阅者接收，尽管所有消息都出现在 MSMQ 队列中。

我承认我正在努力解决这个问题，所以到目前为止我的一些代码很可能是完全垃圾！

我按如下方式向 NSB 发布消息，消息输入是我定义的几种不同类型之一：

```
private void Publish<T>(T message)
{
    var myBus = Configure.Instance.Builder.Build<IBus>();
    myBus.Publish(message);
} 
```

发布者的EndpointConfig如下：

```
[EndpointName("MyQueue")]
public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher, IWantCustomInitialization
{
    /// <summary>
    /// Initialisation for NServiceBus.
    /// </summary>
    public void Init()
    {
        Configure.With()
            .DefaultBuilder()
            .MsmqSubscriptionStorage()
            .DisableTimeoutManager()
            .DefiningEventsAs(t => t.Namespace != null && t.Namespace.StartsWith("MyNamespace"));
    }
} 
```

在订阅者方面，我有以下 EndpointConfig：

```
[EndpointName("MyQueue")]
public class EndPointConfig : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
{
    public void Init()
    {
        Configure.With()
            .DefiningEventsAs(t => t.Namespace != null && t.Namespace.StartsWith("MyNamespace"));
    }
} 
```

使用 EventMessageHandler 如下：

```
public class EventMessageHandler : IEvent, IHandleMessages<IMyMessage>
{
    public void Handle(IMyMessage message)
    {
        Console.WriteLine(string.Format("Subscriber 1 received EventMessage with Id {0}.", message.Id));
    }
} 
```

订阅者的 app.config 是：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
    <section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
  </configSections>

  <MessageForwardingInCaseOfFaultConfig ErrorQueue="error"/>

  <UnicastBusConfig>
    <MessageEndpointMappings>
      <add Messages="MyNamespace" Endpoint="MyQueue" />
    </MessageEndpointMappings>
  </UnicastBusConfig>
</configuration> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T17:47:58.133

看起来您为发布者和订阅者使用相同的端点名称。NServiceBus 使用端点名称来生成队列名称，这意味着两个进程最终使用同一个队列。

因此，实际上您的发布者正在发布消息，但随后发布者和订阅者正在争夺谁来处理它们。

当订阅者获胜时，您会看到您的预期行为。

当发布者获胜时，该消息没有处理程序，因此 NServiceBus 显示警告。这并不总是一个问题。在某些情况下，您希望接收并简单地忽略一条消息，但是此警告至少可以让您知道它正在发生，并且在您的情况下，它表示该消息没有被预期的应用程序处理。

所以要修复它，只需更改端点名称。MySubscriber 和 MyPublisher，或类似的东西。

您甚至不需要使用该属性，您只需命名实现的类，`IConfigureThisEndpoint`NServiceBus 将基于此构造端点名称。您甚至可以使用下划线，例如`MyProject_MyPublisher : IConfigureThisEndpoint`NServiceBus 会将下划线转换为点，因此您将获得“MyProject.MyPublisher”的输入队列，当您有许多端点运行时，这对于命名空间非常有用。

# arrays - 转换视觉 C++ 数组 长

> ID：12283491
> 
> 赞同：0
> 
> 时间：2012-09-05T14:14:26.653
> 
> 标签：arrays, c++-cli

我想从文件中读取 8 个字节。

```
StreamReader^ sr = gcnew StreamReader( "ReadMe.txt" );
long convert = 0;
array<Char>^c = nullptr;

while ( sr->Peek() >= 0 )
{    
   c = gcnew array<Char>(8);

   sr->Read( c, 0, c->Length );

   convert = (long) c; //<- the problem

   Console::WriteLine( c );
   Console::WriteLine( convert ); 
} 
```

但我得到这个输出：

EA00A10C <- 与文件相同

37745844 <- 错误（即使将 dec 转换为 hex）

注意：atoi 不带数组类型，我没有找到array.ToInt 函数...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:18:45.860

您可能正在寻找

```
System::Int32::Parse(c, NumberStyles::HexNumber) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:31:53.337

您尝试通过强制转换将指针转换为 long。但是，您需要将字符数组（数字的文本表示）转换为数值。

Ben Voigt的`System::Int32::Parse(c, NumberStyles::HexNumber)`作品就可以了。

基本上，这与

```
convert = strtol(&c[0], &c[7], 16); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:25:35.970

也许这个？（：

[http://msdn.microsoft.com/en-us/library/c36yw7x9(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/c36yw7x9(v=vs.80).aspx)

例子：

浮动 f = 3.3; int n = static_cast(f);

# java - 在 Bean 中仅实例化一次值

> ID：12283493
> 
> 赞同：0
> 
> 时间：2012-09-05T14:14:47.250
> 
> 标签：java, jakarta-ee

我是使用 Servlet 的新手，所以如果我使用了不正确的术语，请原谅我。我在 JSF Bean 类“检测器”中有一个名为“Provider”的对象，它需要实例化一次，然后可以用于所有其他请求。我做了一些搜索，发现[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)接口似乎可以满足我的需求。我已经在我的 web.xml 文件中提到了它，如下所示：

```
<listener>
    <listener-class>
        p1.ContextListener
    </listener-class>
</listener> 
```

这个类看起来像这样：

```
package p1;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class ContextListener implements ServletContextListener{

   @Override
   public void contextInitialized(ServletContextEvent sce) {
      Detector.startProvider();
   }

   @Override
   public void contextDestroyed(ServletContextEvent sce) {
     Provider.dispose();
   }  
} 
```

这是我的检测器类：

```
package p1;

import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;
import javax.servlet.http.HttpServletRequest;

@ManagedBean
public class Detector{

    private static Provider p;
    FacesContext context;
    String userAgent;

    public Detector() {
        context = FacesContext.getCurrentInstance();
    }

    public String getValue() {
        return p.getValue();
    }

    public String getUserAgent() {
        return ((HttpServletRequest) context.getExternalContext().getRequest()).getHeader("User-Agent");
    }

    public static void startProvider(){
        p = Creater.create();
    }
} 
```

我的代码一切正常，但对我来说似乎正确的唯一方法是将提供者对象作为静态对象，但这在用于不同请求的 Bean 中似乎是个坏主意。我的问题是将提供者对象作为静态对象是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:25:07.800

使用“静态”是一个坏主意。如果您希望 servlet 中的一个对象在此 servlet 处理的所有 HTTP 请求之间共享，那么只需将其设置为您的 servlet 类的一个字段。初始化该字段变量的最佳位置是`init()`方法。

```
public class MyServlet extends HttpServlet {
    private MyProdiver provider;

    public void init() throws ServletException {
        this.provider = new MyProdiver();
        // do init
    }
} 
```

除非您的 servlet 类实现，否则`SingleThreadModel`部署描述符 (web.xml) 中的每个 servlet 声明只有一个 servlet 实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:50:24.483

[我在JSF initialize application-scope bean when context initialized](https://stackoverflow.com/questions/315073/jsf-initialize-application-scope-bean-when-context-initialized)这个问题上找到了我需要的答案。我在我的“ContextListener”中将 Provider 对象设置为 ServletContextEvent 的一个属性，并在我的 Detector 类中从我的 FacesContext 对象“context”中检索它。（这在所提供链接的接受答案中有更详细的说明）

# php - 在 Apache 上使用 PHP 绑定到 Active Directory 的问题

> ID：12283494
> 
> 赞同：0
> 
> 时间：2012-09-05T14:14:48.043
> 
> 标签：php, apache, active-directory, ldap

我在 apache 服务器上有一个 PHP 脚本，每次我尝试运行它时，它都会告诉我：

```
unable to bind to the AD 
```

不过连接很好。我把它从 apache 服务器上取下来，从我的机器上本地运行它，它能够很好地绑定。我假设我的 apache 配置有问题。

我正在使用[adLDAP](http://adldap.sourceforge.net/) API，这是我正在尝试运行的以下脚本。它基本上是一个测试，看看我是否能够成功绑定并检查输入的凭据是否在 Active Directory 中。

```
$username = $_POST["username"];
$password = $_POST["password"];
$formage =  $_POST["formage"];

if ($_POST["oldform"]) { //prevent null bind

    if ($username != NULL && $password != NULL){
        //include the class and create a connection
        include (dirname(__FILE__) . "/../src/adLDAP.php");
        try {
            $adldap = new adLDAP();
        }
        catch (adLDAPException $e) {
            echo $e;
            exit();
        }

        //authenticate the user
        if ($adldap->authenticate($username, $password)){
            //establish your session and redirect
            session_start();
            $_SESSION["username"] = $username;
            $_SESSION["userinfo"] = $adldap->user()->info($username);
            $redir = "Location: https://" . $_SERVER['HTTP_HOST'] .
                dirname($_SERVER['PHP_SELF']) . "/menu.php";
            header($redir);
            exit;
        }
    }
    $failed = 1;
} 
```

为什么我会收到此错误：`unable to bind to the AD`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:36:56.833

我弄清楚了这个问题。

显然 SELinux 阻止了我需要连接的端口，所以我基本上只是告诉 SELinux 可以连接到该端口。现在一切都像一个魅力。以下是我允许 Apache 访问端口的方式：

```
grep httpd /var/log/audit/audit.log | audit2allow -M mypol
semodule -i mypol.pp 
```

# boost - Boost状态图，不同FSM之间的通信

> ID：12283496
> 
> 赞同：0
> 
> 时间：2012-09-05T14:14:52.897
> 
> 标签：boost, statechart, boost-statechart

假设我创建了几个从状态图继承的独立 FSM 类。然后，我实例化这些对象，我希望它们能够相互触发事件；例如，第一个 FSM 将进入“ON”状态并在第二个 FSM 中触发一个事件（如 process_event(EvSomething()) ）。

最好的方法是什么？

非常感谢，

法布里齐奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:41:15.057

[异步状态机](http://www.boost.org/doc/libs/1_51_0/libs/statechart/doc/tutorial.html#AsynchronousStateMachines)的主要动机正是您描述的场景。因此，我建议您将机器转换为异步机器。有关示例，请参见[此处。](http://www.boost.org/doc/libs/1_51_0/libs/statechart/example/PingPong/PingPong.cpp)

# computer-vision - 如何计算一台摄像机相对于第二台摄像机的外参？

> ID：12283501
> 
> 赞同：8
> 
> 时间：2012-09-05T14:15:17.547
> 
> 标签：computer-vision, camera-calibration, calibration, rotational-matrices, extrinsic-parameters

我已经针对某个世界坐标系校准了 2 个相机。我知道它们每个相对于世界框架的旋转矩阵和平移向量。从这些矩阵如何计算一个相机相对于另一个相机的旋转矩阵和平移向量？

请提供任何帮助或建议。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T03:51:41.643

这是一个更简单的解决方案，因为您已经有了 3x3 旋转矩阵 R1 和 R2，以及 3x1 平移向量 t1 和 t2。

这些表示从世界坐标系到每个摄像机的运动，即，如果 p 是在世界坐标系中表示的一个点，那么在摄像机 1 帧中表示的同一点是 p1 = R1 * p + t1。

那么，从摄像机 1 到 2 的运动就是（a）从摄像机 1 到世界坐标系的运动和（b）从世界坐标系到摄像机 2 的运动的简单组合。您可以轻松地计算此组合，如下所示：

1.  形成 4x4 旋转平移矩阵 Qw1 = [R1 t1] 和 Qw2 = [ R2 t2 ]，第 4 行都等于 [0 0 0 1]。这些矩阵分别完全表达了从世界坐标系到相机 1 和 2 的旋转平移。
2.  从摄像机 1 到世界坐标系的运动就是 Q1w = inv(Qw1)。这里 inv() 是代数逆矩阵，即对于每个非奇异矩阵 X，inv(X) * X = X * inv(X) = IdentityMatrix。
3.  从摄像机 1 到 2 的旋转平移是 Q12 = Q1w * Qw2，反之亦然，从摄像机 2 到 1 的旋转平移是 Q21 = Q2w * Qw1 = inv(Qw2) * Qw1。

拥有 Q12 后，您可以根据需要分别从其上部 3x3 子矩阵和右侧 3x1 子列中提取旋转和平移部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:13:31.320

首先将您的旋转矩阵转换为旋转向量。现在每个相机都有 2 个 3d 矢量，称为 A1、A2、B1、B2。关于某个起源 O，您拥有所有 4 个。您需要的规则是

```
A relative to B = (A relative to O)- (B relative to O) 
```

将该规则应用于您的 2 个向量，您将拥有彼此相对的姿势。

可以在[此处](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CE8QFjAF&url=http%3A%2F%2Fwww.soi.city.ac.uk%2F~sbbh653%2Fpublications%2Feuler.pdf&ei=27NHUNLjI8PqiwKb8YDQAQ&usg=AFQjCNE1l4MiTDbVywhNBKxGPnnlYr7G8g&sig2=g38lkjlGX47BdJag_jwnxA)以及许多其他地方找到有关从旋转矩阵转换为欧拉角的一些文档。如果您使用的是 openCV，则可以使用[Rodrigues](http://opencv.willowgarage.com/documentation/cpp/calib3d_camera_calibration_and_3d_reconstruction.html#Rodrigues)。 [这](https://groups.google.com/forum/?fromgroups=#!topic/mathtools/q25a5WoG6Eo)是我找到的一些 matlab/octave 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-15T20:40:27.317

这是非常简单易行的解决方案。我想你的第一台摄像机有 R1 和 T1，第二台摄像机有 R2 和 T2 旋转矩阵和根据公共参考点的平移向量。

从第一个到第二个相机的平移，从第一个到第二个相机的旋转可以通过以下两行matlab代码计算；

```
R=R2*R1';
T=T2-R*T1; 
```

但请注意，如果每台相机只有一个 R 和 T，那就是真的。（我的意思是一个独特的世界参考的旋转和平移）。如果您有更多的参考平移和旋转，您应该为每个参考点计算 R,T。他们可能会非常接近彼此。但这些可能略有不同。然后您可以计算平移向量的平均值并将所有找到的旋转矩阵转换为旋转向量，计算其平均值，然后将它们转换为旋转矩阵。

# ubuntu - EC2 VPC 上的 Openswan

> ID：12283505
> 
> 赞同：2
> 
> 时间：2012-09-05T14:15:30.150
> 
> 标签：ubuntu, amazon-ec2, vpn, ipsec, vpc

我正在努力在亚马逊上的 VPC 和客户端网络之间建立 VPN 隧道，客户端在其防火墙后面使用公共 IP 地址，并要求我们在 VPC 中的服务器也使用公共 IP。

连接的目的是让我们的应用服务器和他们的应用服务器能够通信。

拓扑如下所示：

107.xxx <--> 107.yyy <--> AWS InternetGateway <--> Internet <--> 213.aaa <-->213.bbb

在哪里：

```
107.x.x.x: Our Application server (internal ip 10.0.0.10)
107.y.y.y: Our Openswan server (internal ip 10.0.0.11)
213.a.a.a: The costumer VPN endpoint ip 
213.b.b.b: The customer Application Server 
```

我们设法启动了隧道，但是每当我们尝试 ping 213.bbb 时，我们都会得到**Destination Host Unreachable**

这是 ipsec.conf：

```
left=10.0.0.10
leftsubnet=107.x.x.x/32
leftid=107.y.y.y
leftsourceip=107.y.y.y
right=213.a.a.a
rightid=10.9.5.34
rightsubnet=213.b.b.b/32
authby=secret
keyingtries=3
rekey=no
keyexchange=ike
ikelifetime=86400s
phase2alg=3DES-MD5;modp1024
forceencaps=yes
pfs=no 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:41:04.767

您可能需要“源路由”ping。尝试 ping -I {LAN IP of sender} 213.bbb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T09:46:39.137

确保您的 openswan 服务器已禁用 src/dest 检查（使用 EC2 控制台完成此操作），并且您的 VPC 的路由表包含通过“openswan 服务器”的以下路由线路目标 213.bbb 路由（除了默认的 0.0\. 0.0/0 通过互联网网关）

# c# - 直到运行时才知道值的名称时如何设置值？

> ID：12283514
> 
> 赞同：0
> 
> 时间：2012-09-05T14:15:55.547
> 
> 标签：c#, .net, reflection

我正在尝试将一个对象的属性设置为与另一个对象的属性相同。到目前为止的代码：

```
private T SetObjectAttributes<T> (dynamic fromO, T toO)
{
    foreach (var prop in fromO.GetType().GetProperties())
    {
        toO[prop] = fromO[prop];
    }
    return toO;
} 
```

这里的语法不正确：

```
toDbObject[prop] = fromObject[prop]; 
```

基本上，我正在尝试设置一个属性，但直到运行时才知道属性名称。所以我的问题是如何在运行时分配属性的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:22:09.770

您必须`GetValue( object sourceObject)`分别使用`SetValue( object target, object value )`属性的 PropertyInfo 实例的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:23:39.480

您想使用[PropertyInfo.SetValue](http://msdn.microsoft.com/en-us/library/yc9sss5d)来实际设置值。另外，我希望您正在缓存那些 PropertyInfo 实例 - 因为否则它会非常慢。

您还应该查看[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)或其他一些选项。

你到底想做什么？也许有一个更好的方法。

# database - 如何使用 VARCHAR2 在非 unicode Oracle 数据库中保存 unicode 列？

> ID：12283517
> 
> 赞同：0
> 
> 时间：2012-09-05T14:16:10.400
> 
> 标签：database, oracle, unicode, non-unicode

如何在非 unicode 字符集中配置的 Oracle 数据库中保存 unicode 字符（此配置无法更改）？

文本将保存在 VARCHAR2 列中（不能是 NVARCHAR2）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:32:41.800

您可以通过多种方式在`VARCHAR2`字段中存储任意数据（在本例中为 UTF 编码）：

*   您可以将 Unicode 字符转换为它们的[`U+XXXX`形式](http://en.wikipedia.org/wiki/List_of_Unicode_characters)或它们的`&#YYYY`形式。只有一些字符需要转换。
*   您可以存储二进制数据[`rawtohex`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions131.htm)编码。
*   您还可以使用标准功能，例如[`UTL_ENCODE.mimeheader_encode`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_encode.htm#i999461)：

    ```
    /* needs to be checked on a non-unicode db */ 
    SQL> declare
      2     l nvarchar2(200);
      3     p nvarchar2(200);
      4  begin
      5     l := UTL_ENCODE.MIMEHEADER_ENCODE (
      6        buf            => nchr(352),--'Š',
      7        encode_charset => 'UTF8',
      8        encoding       => UTL_ENCODE.QUOTED_PRINTABLE
      9     );
     10     dbms_output.put_line('encoded string: ' || l);
     11     p := utl_encode.mimeheader_decode (
     12        buf => l
     13     );
     14     dbms_output.put_line('decoded string: ' || p);
     15  end;
     16  /

    encoded string: =?UTF8?Q?=C5=A0?=
    decoded string: Š

    Statement processed. 
    ```

# php - BST 导致日历日期的噩梦

> ID：12283520
> 
> 赞同：0
> 
> 时间：2012-09-05T14:16:20.020
> 
> 标签：php

我正在整理一个每周视图日历，但到 10 月 28 日时我遇到了问题，这是时钟前进的时间。日历跳过一天

到目前为止我的代码...

```
//get viewed date from form and add either a week to it or take a week away
        if(isset($_POST['add_week'])){
                $last_week_ts = strtotime($_POST['last_week']);
                $display_week_ts = $last_week_ts + (3600 * 24 * 7);
        } else if (isset($_POST['back_week'])) {
                $last_week_ts = strtotime($_POST['last_week']);
                $display_week_ts = $last_week_ts - (3600 * 24 * 7);
        } else {
                //sets the current day as the first day of the week so no good
                /*$display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24;*/

                //Does't account for british summer time so days are out after 28th October
                $display_week_ts = strtotime("Monday noon");
        }

              $week_start = new DateTime(date("Y-m-d", $display_week_ts));

           for ($i = 0; $i < 7; $i++)  
       {
            echo '<td class="day">';
            $current_day_ts = $display_week_ts + ($i * 3600 *24);
            $daily_date = date('d-m-Y', $current_day_ts);
            $StartDate =  date('d', $current_day_ts);
            $MonthName = date('m', $current_day_ts);
            $Year = date('Y', $current_day_ts);
                            echo $daily_date;
                            echo '</td>';
        } 
```

$week_start 包含日历中当前视图中的一周开始的值。首次打开时会显示当前周。如果按下下周按钮，则将一周添加到 $week_start 值。目前保存在表格的隐藏字段中，并在提交时回发。我还尝试将 $week_start 作为 TimeDate() 对象存储在会话中

```
 $week_start = new DateTime(date("Y-m-d", $display_week_ts));
        $S_SESSION['week_start'] = $week_start; 
```

但是当我尝试回调会话并使用它时，向前移动一周

```
 $week_start = $S_SESSION['week_start'];
        $week_start->modify('+1 week'); 
```

我收到错误“警告：DateTime::modify() [datetime.modify]：DateTime 对象未由其构造函数正确初始化”。在做了一些挖掘之后，我发现 DateTime 似乎直到 5.3 才支持会话，而我正在使用 5.2.17

如果有人可以帮助我锻炼一种方法，使变量 $week_start 成为由 $display_week_ts 表示的一周的第一天，我将非常感激，这样 BST 不会引起问题。我已经在这方面扎实工作了 3 天了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:20:51.427

采用`date_default_timezone_set('UTC');`

或者 `$week_start->setTimezone(new DateTimeZone('UTC'));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:28:10.290

这就是问题：

```
$display_week_ts = $last_week_ts + (3600 * 24 * 7); 
```

由于您正在经历 DST 更改，因此一周**不是**提前 3600*24*7 秒，实际上是 3600*24*7 - 3600。您从 DST 班次中损失了一个小时，所以您实际上是在向前跳跃8天。同样适用于您前一周的计算 - 它会损失一个小时并且只能返回 6 天。

为了使此类计算安全，您应该使用 DateTime 对象，并为此类计算使用适当的 DateIntervals。它会为您考虑 DST 更改。

例如

```
$now = new DateTime();
$now->setTimeZone(new DateTimeZone('Whatever/Wherever'));

$oneweek = new DateInterval('P7D');
$nextweek = $now->add($oneweek);
$lastweek = $now->sub($oneweek); 
```

# c# - ListView 中的 WrapPanel (Metro)

> ID：12283522
> 
> 赞同：1
> 
> 时间：2012-09-05T14:16:27.263
> 
> 标签：c#, listview, windows-runtime, windows-store-apps, winrt-xaml

我在 Metro 应用程序中有以下代码。listview 绑定到一个对象列表。我的问题是 WrapGrid 为它们分配了相等的宽度。但是有些标题比其他标题长，所以宽度应该设置为自动。但这不起作用..有人知道吗？

```
<ListView>
  <ListView.ItemTemplate>
      <DataTemplate>
      <StackPanel Orientation="Horizontal" >
              <TextBlock Text="{Binding Title}"/>
          </StackPanel>
      </DataTemplate>
  </ListView.ItemTemplate>
  <ListView.ItemsPanel>
      <ItemsPanelTemplate>
          <WrapGrid Orientation="Horizontal" />
      </ItemsPanelTemplate>
  </ListView.ItemsPanel>
</ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:25:17.263

这对我有用：

```
<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapGrid ItemWidth="250" ItemHeight="80" MaximumRowsOrColumns="7" VerticalAlignment="Center" HorizontalAlignment="Center" />
    </ItemsPanelTemplate>
</ListView.ItemsPanel> 
```

这里的关键点是 MaximumRowsOrColumns 属性。玩得开心 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T04:07:59.103

我认为这不是 WrapGrid，而是 ListView 本身通过 ListViewItem/ItemContainerStyle 使它们具有相同的大小。我不认为真的有解决方法。您可以使用自己的 ItemsControl 和自定义面板或计算每个项目的所需大小并基于此 - 将项目放在 VariableSizedWrapGrid 之类的东西中，适当地设置 RowSpan/ColumnSpan 以匹配所需的大小。除此之外 - 您可以使所有项目足够宽以适合所有内容，或者只需剪辑内容并在用户单击项目后在详细视图中显示完整字符串。

# c# - 双重的asp.net MVC数据模型验证

> ID：12283526
> 
> 赞同：1
> 
> 时间：2012-09-05T14:16:32.943
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, validation

我在我的 asp.net MVC 网站上使用数据模型验证，但遇到了错误。

我的模型如下所示：

```
public class MyModel{
  public String Name{get;set;}
  public double? Value {get;set;}
} 
```

在大多数情况下它工作得很好，但如果我在“值”字段中有一个十进制值，比如“5.5”，我会收到一个验证错误。

该网站在“Fr-FR”语言环境下运行。我尝试了“5.5”或“5,5”，它们都不起作用，但我得到了不同的信息：

```
La valeur '5.5' n'est pas valide pour Value. 
```

这应该意味着`"The value '5.5' isn't valide for Value"`

和

```
Le champ Value doit être un nombre. 
```

意思是`"The field Value has to be a number"`

我在代码中的唯一“逻辑是我在`ModelState.IsValid`更新之前使用”。

为什么这不起作用，我应该怎么做才能纠正这个问题？

**重要编辑** 通过调试，我看到我的模型字段在有小数时出现“NULL”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:17:57.930

事实上，问题在于客户端验证似乎适用于 EN 文化，而服务器则适用于 fr-FR 验证。

所以我写了一个简单的modelBinder，它是文化不变的：

```
public class NullableDoubleModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        ModelState modelState = new ModelState { Value = valueResult };
        object actualValue = null;
        if (valueResult.AttemptedValue != null)
        {
            try
            {
                actualValue = Convert.ToDouble(valueResult.AttemptedValue, CultureInfo.InvariantCulture);
            }
            catch (FormatException e)
            {
                modelState.Errors.Add(e);
            }
        }

        bindingContext.ModelState.Add(bindingContext.ModelName, modelState);
        return actualValue;
    }
} 
```

我在 Global.asax 文件中注册它：

```
protected void Application_Start()
{
   //Other stuff
   ModelBinders.Binders.Add(typeof(double?), new NullableDoubleModelBinder());
} 
```

现在它可以工作了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:53:38.823

为了模仿你的错误，我的模型看起来像

```
public class MyModel{
  public String Name{ get; set; }
  public int? Value { get; set; }
} 
```

请检查您的代码并可能进行编辑，因为**当 int 更改为 double 时**，5.5 将正常工作，除非您的控制器或模型中包含导致此验证的其他代码。

# javascript - 如何用正则表达式替换特定的 JavaScript 注释？

> ID：12283528
> 
> 赞同：2
> 
> 时间：2012-09-05T14:16:38.933
> 
> 标签：javascript, regex, ant

我有一个任务，我必须打开许多文件，搜索`//@public object`模式，如果它没有匹配项，请删除该文件中`//@public doc`之前没有的所有 JavaScript 注释。

例如，可能有类似的东西：

```
//@public doc
    /**
     * @function
     * checks for specific conditions
     * specific variables
     */ 
```

并且保持原样。但是需要删除所有其他 JavaScript 注释。

它的正则表达式是什么，以及如何实现？

先感谢您。

同时，我想出了以下解决方案

```
 <fileset id="jsmvcdoc.fileset" dir="${doctempfolder}" includes="**/*.js">
        <not>
         <contains text="//@public object" casesensitive="no"/>
        </not>
    </fileset>

   <!-- JS Comments -->
   <replaceregexp match="(?!doc. +)/\*.+?\*/" replace="" flags="gs" byline="false">
        <fileset refid="jsmvcdoc.fileset"/>
   </replaceregexp> 
```

哪个过滤文件集仅包括那些不包含 //@public 对象的文件，但我不知道如何制作正则表达式，它将去除除 //@public doc 行之前的所有注释之外的所有注释

以这种方式解决它：

```
<!-- strip out js comments not preceeded by //@public doc -->
  <replaceregexp match="(?&lt;!//@public doc\x0D\x0A    )/\*.+?\*/" replace="" flags="gs" byline="false">
        <fileset refid="jsmvcdoc.fileset"/>
  </replaceregexp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:21:02.120

I would break it down in this way:

1.  Select files which contain the pattern.
2.  Run replace task on the specific regex.

Something like

```
<replaceregexp byline="true">
  <regexp pattern="/\*[\d\D]*?\*/"/>
    <substitution expression=""/>
       <fileset dir="${JSfiles.path}" includes="**/*.js">
          <contains text="//@public object" casesensitive="no"/>
       </fileset>
</replaceregexp> 
```

I have not tested it , so you might need to tweak the regex a bit.

# css - 带圆角的 Div 边框

> ID：12283529
> 
> 赞同：0
> 
> 时间：2012-09-05T14:16:54.450
> 
> 标签：css, styles, stylesheet

我怎样才能绕过 Div 的角落？我尝试使用以下代码，但它不起作用：

```
border: 2px solid black;
border-radius: 6px; 
```

我使用的是 IE6/7，所以上面的代码应该不是问题，它现在仍然可以工作。

还有其他解决方法吗？

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:18:01.070

`border-radius`IE6/7 不支持 CSS 属性 您需要使用 .htc 文件在 IE 中实现该效果。

这是 .htc 文件链接：[http ://code.google.com/p/curved-corner/downloads/detail?name=border-radius.htc](http://code.google.com/p/curved-corner/downloads/detail?name=border-radius.htc)

您需要将文件上传到您网站上的 /css/ 文件夹。以下是您在代码中使用它的方式：

```
.rounded-corners {
    behavior: url(/css/border-radius.htc);
    border-radius: 20px;
} 
```

本教程详细解释：http: [//jonraasch.com/blog/css-rounded-corners-in-all-browsers](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:21:46.960

正如刚才提到的 cassi.lup ， IE6,7,8 不支持圆角。

[但是你可以用CSS3 Pie](http://css3pie.com/)解决这个问题

# java - 背景音乐自动停止

> ID：12283534
> 
> 赞同：0
> 
> 时间：2012-09-05T14:17:03.827
> 
> 标签：java, android

我已经使用 Splash Music 进行了申请。但是每当我进入应用程序的偏好时，音乐就会自动停止，然后在我重新启动应用程序之前永远不会播放。当我打开一个活动时也是如此，它告诉手机是处于“正常”还是“静音”模式。

*   这种奇怪行为的原因是什么？这是我检查是否播放音乐的 Splash 音乐代码。

    公共类 SplashScreen 扩展 Activity{

    ```
    MediaPlayer mp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splashscreen);

        mp= MediaPlayer.create(SplashScreen.this, R.raw.got);
        SharedPreferences pref= PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    ;
    if(pref.getBoolean("music", true))
    {
        mp.start();
    }
    if(pref.getBoolean("loop", true))
    {
        mp.setLooping(true);
    }
    Thread timer= new Thread()
    {
        public void run()
        {
        try
        {
            sleep(5000);
            Class ourclass = Class.forName("com.umer.practice2.Menu");
            Intent myintent= new Intent(SplashScreen.this,ourclass);
            startActivity(myintent);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        }
          };
        timer.start();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    } 
    ```

    }

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:15:35.020

这是因为您正在主线程上创建和播放媒体播放器对象。当您的活动暂停时，您正在完成停止媒体播放器的活动。如果您想让您的音乐独立于活动，请将其外包给服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:15:20.110

在服务中运行应该对您有所帮助。

# opencl - OpenCL：使用 CL_MEM_USE_HOST_PTR 传递给内核的变量的设备/主机内存一致性

> ID：12283537
> 
> 赞同：7
> 
> 时间：2012-09-05T14:17:09.323
> 
> 标签：opencl

如果使用 CL_MEM_USE_HOST_PTR 将变量传递给内核，是否意味着对设备中变量的任何更改也会显示在主机内存中？

我处于使用 CPU 作为设备而不是 GPU 的场景中，因此传递给内核的所有内容都将标记为 CL_MEM_USE_HOST_PTR。

如果这是真的，那么我不再需要将所有内容都读回主机，这非常方便。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T17:39:58.803

您的理解是正确的，除了一个可能的陷阱：[文档](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateBuffer.html)指出

> `host_ptr`OpenCL 实现允许缓存设备内存中指向的缓冲区内容。当内核在设备上执行时，可以使用此缓存副本。

这意味着内核对数据执行的更改可能不会立即反映在`host_ptr`. 事实上，`host_ptr`当它用于缓冲区时，并不能保证包含有效数据。

为了获得有效和最新的数据，您必须强制同步。官方文档对这一刻有点含糊，但[缓冲区映射/取消映射](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clEnqueueMapBuffer.html)确实有效：

> 如果缓冲区对象是使用`CL_MEM_USE_HOST_PTR`set in 创建的`mem_flags`，则`host_ptr`指定的 in保证在命令完成`clCreateBuffer`时包含正在映射的区域中的最新位 ；`clEnqueueMapBuffer`并且返回的指针值`clEnqueueMapBuffer`将派生自`host_ptr` 创建缓冲区对象时指定的值。

这是一个改编自[Khronos 论坛帖子](https://www.khronos.org/message_boards/viewtopic.php?p=14184#p14184)的示例：

```
cl_mem device_output = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_USE_HOST_PTR, size, original_output, NULL);
// run the kernel
void* pointer = clEnqueueMapBuffer(queue, device_output, CL_TRUE, CL_MAP_READ, size, 0, 0, NULL, NULL, NULL);
// work with 'original_output'
clEnqueueUnmapMemObject(queue, device_output, pointer, 0, NULL, NULL);
clReleaseMemObject(device_output); 
```

# emacs - Emacs 缓冲区本地字体

> ID：12283538
> 
> 赞同：7
> 
> 时间：2012-09-05T14:17:10.397
> 
> 标签：emacs, fonts

对于我的所有任务，我在 Emacs 中使用 URW Chancery L 字体。但是对于某些任务，比如 org-mode 表、shell 或 sun-commander，我想设置单宽字体。所以，我的问题，我该怎么做？我发现的只是`set-default-font`，这不是我想要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T20:29:17.417

Faces（即用于指定文本外观的对象，例如字体、颜色等）在 Emacs 中大部分是全局的，尽管它们也可以基于框架进行设置，因此您可以通过创建单独的框架和更改在该框架中使用的“默认”面。这就是说，Emacs 现在还可以通过*face-* remapping 更改特定缓冲区的面部外观。例如

```
(face-remap-add-relative 'default '(:family "Monospace")) 
```

应该使当前缓冲区使用等宽。因此，添加上述内容`org-mode-hook`可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:04:53.117

此片段仅在 C 模式下设置“Arial”字体系列：

```
(defun set-my-font ()
  (overlay-put (make-overlay (point-min) (point-max) nil nil t)
               'face '(:family "Monospace")))

(add-hook 'org-mode-hook 'set-my-font) 
```

替换`org-mode-hook`为所需的模式，它应该也可以工作。

此解决方案通过在整个缓冲区上设置覆盖的字体系列属性来创建缓冲区本地字体。叠加层的`face`属性只指定了字体系列 ( `Monospace`)，而 Emacs redisplay 足够聪明，可以将它与其他文本属性合并，例如 指定的颜色`font-lock`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T15:59:01.630

您是否尝试自定义`org-table`？

你可以修改它`org-menu > Customize > Customize > org-table`

或使用命令行

`M-x set-face-font RET org-table RET -PfEd-DejaVu Sans Mono-normal-normal-normal-*-*-*-*-*-m-0-iso10646-1`

使用选项卡自动完成并查看其他可用字体

最后你也可以直接修改你的 init.el 有类似的东西

```
(custom-set-faces
 '(org-table ((t (:foreground "LightSkyBlue" :family "DejaVu Sans Mono"))))) 
```

# javascript - 如何在Javascript中创建可排序，拖放多级列表

> ID：12283539
> 
> 赞同：6
> 
> 时间：2012-09-05T14:17:11.613
> 
> 标签：javascript, jquery-plugins, drag-and-drop

我正在尝试创建一个可通过拖放进行排序的多级列表。用户可以抓取一个元素并在树上上下移动它，或者将它放到其他元素中并让它成为一个子元素。

有现成的 JS 解决方案吗？jQuery sortable/draggable 在单级列表中工作得很好，但在嵌套解决方案中则不然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-19T10:52:35.620

您也可以尝试[https://github.com/dbushell/Nestable](https://github.com/dbushell/Nestable)（演示：[http](http://dbushell.github.io/Nestable/) ://dbushell.github.io/Nestable/ ）。

适用于鼠标和触摸，此插件与 jQuery 和 Zepto 兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T17:52:47.200

我正在使用 johnny 的 jquery-sortable 插件，可以在这里找到[http://johnny.github.io/jquery-sortable](http://johnny.github.io/jquery-sortable)。

它似乎工作得很好。

我还试图让它通过 AJAX 发回列表的排序结构。如果您想查看我的工作解决方案，请参阅[此主题](https://stackoverflow.com/questions/16462952/how-to-use-serialized-and-send-ajax-johnny-sortable-plugin)，因为有关序列化的官方文档似乎有点不令人满意（至少对于嵌套列表）。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-28T06:12:37.520

所以虽然你可以使用[https://github.com/dbushell/Nestable](https://github.com/dbushell/Nestable)或[http://johnny.github.io/jquery-sortable](http://johnny.github.io/jquery-sortable)

这些天你可能想转移到像 React 这样的东西，所以你可以使用这样的包：[https ://www.npmjs.com/package/react-drag-sortable](https://www.npmjs.com/package/react-drag-sortable)

尽量不要再将 jQuery 用于此类事情。当您拥有拖放界面时，您就拥有了 web 应用程序，而不是网页，并且您走错了方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-07T10:56:50.833

我看到了一个名为 react-nestable 的包，它可以创建嵌套的拖放。我在下面放了那个包的链接[——react-nestable npm](https://www.npmjs.com/package/react-nestable)

# java - 将 HTTP 标头添加到 index.html 的响应中

> ID：12283543
> 
> 赞同：3
> 
> 时间：2012-09-05T14:17:20.773
> 
> 标签：java, jakarta-ee, http-headers

在 JavaEE 应用程序中。
我在 web.xml 中有 index.html 页面作为“欢迎文件”

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

**我想将 Http Header 添加到 index.html 的响应中**

一种方法是使用 index.jsp 而不是 index.html 并在 scriptlet 中添加：

```
<% response.addHeader("X-Frame-Options", "DENY");  %> 
```

还有其他方法吗？是否有可能添加某种过滤器
例如：

```
WelcomeFileFilter {
  void filter(HttpServletResponse response) {
    response.addHeader("X-Frame-Options", "DENY");
  }
} 
```

因为我不想使用 index.jsp 而不是 index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:22:56.090

你绝对可以添加一个过滤器，

尝试 - [responseheaderfilter](http://code.google.com/p/responseheaderfilter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:23:50.440

您可以要求您的 Web 服务器/servlet 容器为您添加这些标头。它将在服务器配置文件中配置，而不是在 web.xml 中。

或者，您可以创建一个过滤器来为您添加标题。您必须在 web.xml 中配置过滤器。

这个[stackoverflow 答案](https://stackoverflow.com/questions/3009631/setting-http-headers-with-jetty/12125253#12125253)向您展示了如何配置码头以添加标头。这个另一个[stackoverflow 答案](https://stackoverflow.com/a/3013315/3673)向您展示了如何编写添加标题的过滤器。

# .net - 为 VS2008 构建 ironruby

> ID：12283545
> 
> 赞同：0
> 
> 时间：2012-09-05T14:17:22.740
> 
> 标签：.net, ruby, compact-framework, ironruby

我正在尝试为 VS 2008 构建 Ironruby，但项目文件需要 VS 2010 和 .net 4.0。不幸的是，我不能使用它，因为我们正在构建一个使用 VS 2008/.net 3.5 的 windows Compact Embedded 7 应用程序。

据我了解，单声道实现只需要.net 2.0（这对我们来说就足够了）。但是我不想使用 Mono，那么我该如何针对 .net 3.5 进行构建呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:06:52.727

如果我理解正确的话，我发现的最好的事情是在 VS 2008 中启动一个新项目，为 VS 2010 项目中的每个表单创建一个表单，然后开始将代码从一侧复制到另一侧——包括设计师。

有时，您可以将 VS 2010 文件夹中的文件物理复制到 VS 2008 文件夹中，但 VS 2010 存在 VS 2008 并不总是能理解的差异。

如果你走这条路，你会遇到很多错误，但它们通常很容易修复，因为你有原始的 VS 2010 代码可以比较。

可能有一些工具可以从 2010 年转换到 2008 年，但我发现最好的办法就是将数据从一侧复制到另一侧。

# algorithm - FInd overlapping appointments in O(n) time?

> ID：12283559
> 
> 赞同：22
> 
> 时间：2012-09-05T14:18:03.643
> 
> 标签：algorithm, data-structures, computational-geometry

I was recently asked this question in an interview. Even though I was able to come up the *O*(*n*²) solution, the interviewer was obsessed with an *O*(*n*) solution. I also checked few other solutions of *O*(*n* log*n*) which I understood, but *O*(*n*) solution is still not my cup of tea which assumes appointments sorted by start-time.

Can anyone explain this?

**Problem Statement:** You are given *n* appointments. Each appointment contains a start time and an end time. You have to retun all conflicting appointments efficiently.

> Person: 1,2, 3, 4, 5
> App Start: 2, 4, 29, 10, 22
> App End: 5, 7, 34, 11, 36
> 
> Answer: 2x1 5x3

***O*(*n* log*n*) algorithm:** separate start and end point like this:

> 2s, 4s, 29s, 10s, 22s, 5e, 7e, 34e, 11e, 36e

then sort all of this points (for simplicity let's assume each point is unique):

> 2s, 4s, 5e, 7e, 10s, 11e, 22s, 29s, 34e, 36e

if we have consecutive starts without ends then it is overlapping: 2s, 4s are adjacent so overlapping is there

We will keep a count of "s" and each time we encounter it will +1, and when e is encountered we decrease count by 1.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T03:54:00.310

The general solution to this problem is **not possible** in *O*(*n*).

At a minimum you need to sort by appointment start time, which requires *O*(*n* log *n*).

There is an *O*(*n*) solution **if the list is already sorted**. The algorithm basically involves checking whether the next appointment is overlapped by any previous ones. There is a bit of subtlety to this one as you actually need two pointers into the list as you run through it:

*   The current appointment being checked
*   The appointment with the latest end time encountered so far (which might not be the previous appointment)

*O*(*n*) solutions for the unsorted case could **only exist if you have other constraints**, e.g. a fixed number of appointment timeslots. If this was the case, then you can use HashSets to determine which appointment(s) cover each timeslot, algorithm roughly as follows:

*   Create a HashSet for each timeslot - *O*(1) since timeslot number is a fixed constant
*   For each appointment, store its ID number in HashSets of slot(s) that it covers - *O*(*n*) since updating a constant number of timeslots is *O*(1) for each appointment
*   Run through the slots, checking for overlaps - *O*(1) (or *O*(*n*) if you want to iterate over the overlapping appointments to return them as results)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T14:42:48.527

Assuming you have some constraint on the start and end times, and on the resolution at which you do the scheduling, it seems like it would be fairly easy to turn each appointment into a bitmap of times it does/doesn't use, then do a counting sort (aka bucket sort) on the in-use slots. Since both of those are linear, the result should be linear (though if I'm thinking correctly, it should be linear on the number of time slots rather than the number of appointments).

At least if I asked this as an interview question, the main thing I'd be hoping for is the candidate to ask about those constraints (i.e., whether those constraints are allowed). Given the degree to which it's unrealistic to schedule appointments for 1000 years from now, or schedule to a precision of even a minute (not to mention something like a nanosecond), they strike me as reasonable constraints, but you should ask before assuming them.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T20:40:19.883

A naive approach might be to build two parallel trees, one ordered by the beginning point, and one ordered by the ending point of each interval. This allows discarding half of each tree in O(log n) time, but the results must be merged, requiring O(n) time. This gives us queries in O(n + log n) = O(n).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T15:47:10.990

This is the best I can think of, in horrible pseudocode. I attempted to reduce the problem as much as possible. This is only less than On^2 (I think).

Note that the output at the end will not show every appointment that a given appointment will conflict with on that appointment's specific output line...but at some point every conflict is displayed.

Also note that I renamed the appointments numerically in order of starting time.

```
output would be something like the following:

Appointment 1 conflicts with 2
Appointment 2 conflicts with
Appointment 3 conflicts with
Appointment 4 conflicts with 5
Appointment 5 conflicts with 
```

```
appt{1},appt{2},appt{3} ,appt{4} ,appt{5}
  2      4       10       22      29
  5      7       11       36      34 
```

pseudocode

```
list=(1,2,3,4,5)
for (i=1,i<=5,i++)
    list.shift()   **removes first element
    appt{i}.conflictswith()=list

for (i=1,i<=n,i++)
{   number=n
    done=false
    while(done=false)
        {if (number>i)
            {if (appt(i).endtime() < appt(number).startime())
                {appt{i}.conflictswith().pop()}
             else
                {done=true}
             number--
             }
        else
            {done=true}
        }
}
for (i=1,i<=n,i++)
    print "Appointment ",i," conflicts with:",appt{i}.conflictswith() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T19:04:18.163

I came across a Data Structure called Interval tree, with the help of which we can find intervals in less than O(n log (n)) time, depending upon the data provided

# xml - 如何检查 XSLT 错误

> ID：12283562
> 
> 赞同：2
> 
> 时间：2012-09-05T14:18:13.630
> 
> 标签：xml, xslt-1.0, detection

我有`XSLT`文件`XMl`要处理。

我需要知道如何检测大型 XSLT 文件中的以下错误（按优先级顺序列出）：

1.  Xpath 错误
2.  标记错误
3.  语法错误

有没有一种工具可以在 Windows 平台上完成所有这些工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:16:41.183

任何 XSLT 处理器都会这样做。撒克逊人的诊断可能比大多数人都好，尽管我自己这么说。诸如 Oxygen 或 Stylus Studio 之类的 IDE 很有用（两者都有 Saxon），因为错误消息会将您直接带到有问题的代码。您没有说您想要 XSLT 1.0 还是 XSLT 2.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:20:56.220

您可以使用 altova xml 间谍。它是共享软件而不是免费软件。但是，您可以将其用作试用版。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:22:48.457

[xsltproc](http://xmlsoft.org/XSLT/xsltproc2.html) ? 当然，这取决于您的 xml/xsl 的大小。

```
xsltproc --noout input.xsl input.xml 
```

# machine-learning - 使用 MATLAB 提高神经网络结果的准确性

> ID：12283567
> 
> 赞同：0
> 
> 时间：2012-09-05T14:18:36.090
> 
> 标签：machine-learning, matlab, neural-network

我尝试使用神经网络来预测一些数据。我使用了 MATLAB 神经网络拟合工具箱，我可以预测一些测试。但问题是准确性对我的结果来说不够好。我试图改变神经元数量以改变准确性，但效果不佳。

我想更改教练功能，但我没有找到任何东西。比如我想命令MATLAB的工具箱去尝试训练，直到准确率小于0.1。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:01:01.787

您可以设置`net.trainParam.goal`以设置性能目标或增加`net.trainParam.epochs`以增加要训练的最大时期数。

# iphone - 如何将 Tapku 与 CalDAV 服务集成？

> ID：12283572
> 
> 赞同：8
> 
> 时间：2012-09-05T14:18:44.610
> 
> 标签：iphone, ipad, calendar, caldav, tapku

我正在使用 Tapku 库开发日历应用程序。我需要将 Tapku 日历与 CalDAV 服务器连接。

有谁知道如何使用 CalDAV 服务或任何其他我可以与 CalDAV 服务器连接的 iOS 日历库配置 Tapku 日历？

至少有人知道如何实现 CalDav iOS 日历吗？因为有一些应用程序连接到日历服务器。我也不能使用默认的 iOS 日历，因为我的要求是在我的应用程序中显示所有日历数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:06:32.777

我觉得您可以使用下面链接中提到的 C 或 C++ 或 Objective C 库之一。

[http://caldav.calconnect.org/implementations/librariestools.html](http://caldav.calconnect.org/implementations/librariestools.html)

据我猜测，以下链接中的库应该是一个不错的选择。您可能需要做一些工作才能使其在 iOS 上运行。我没有使用过这个库，但我看到这个库支持标准 CalDav 格式并且正在其他项目中使用。因此，这是您最好的选择。

[http://sope.opengroupware.org/en/sope_ical/index.html](http://sope.opengroupware.org/en/sope_ical/index.html)

*免责声明：我没有使用过这个库。*

# lua - 如何在lua中为闭包提供参数

> ID：12283574
> 
> 赞同：0
> 
> 时间：2012-09-05T14:18:45.387
> 
> 标签：lua, closures

我有以下代码：

```
{

    identifier = "hand:" .. card.name,
    area = { x, y, 100, 100 },
    on_click = function()
        -- Code goes here
    end

} 
```

我想使用 card 变量和对放置此代码的对象的引用来修改具有变量值的类的`card`变量。

那么，如何将本地上下文中的参数提供给将在其他代码段中调用的函数？

我希望`on_click`在事件管理循环中启动该功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:33:27.307

如果我正确理解了这个问题，您希望能够从 on_click 处理程序中引用该`on_click`处理程序所属的对象。为此，您需要拆分您拥有的语句：

```
local card = { name = "my card" }
local object = {
  identifier = "hand:" .. card.name,
  area = { x, y, 100, 100 },
}
object.on_click = function()
  -- Code goes here
  -- you can reference card and object here (they are upvalues in this context)
  print(card.name, object.area[3])
end
object.click() 
```

您也可以`on_click`稍微不同地定义；在这种情况下，您将获得`object`隐式声明的`self`变量（请注意，您对它的称呼也有所不同）：

```
function object:on_click()
  -- Code goes here
  -- you can reference card and object here
  print(card.name, self.area[3])
end
object:click() -- this is the same as object.click(object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:26:31.297

分配功能时保存它，像这样

```
{
    identifier = "hand:" .. card.name,
    area = { x, y, 100, 100 },
    on_click = function()
        local a_card = card
        print(a_card.name)
    end
} 
```

# javascript - ASP.NET IIS 应用程序中的客户端脚本缓存

> ID：12283580
> 
> 赞同：1
> 
> 时间：2012-09-05T14:19:19.353
> 
> 标签：javascript, asp.net, caching, iis

随着开发的进行，我目前正在测试一个网站，几乎每次更新客户端脚本时，我都需要清除浏览器缓存以在客户端上使用新功能，因为浏览器会下载新的.js 文件的编译。

如果在生产中推出新版本的脚本怎么办？如何让客户端浏览器在上传到服务器后立即获取它？

我正在使用 ASP.NET MVC 4 站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:22:09.973

最简单的方法是将版本号添加到脚本文件（比如 script_1.6.js 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:21:32.360

重命名文件以创建版本控制：

所以

```
<script src="myscript.js"></script> 
```

变成

```
<script src="myscript-9-5-2012.js"></script> 
```

同样根据[https://developers.google.com/speed/docs/best-practices/caching#LeverageProxyCaching](https://developers.google.com/speed/docs/best-practices/caching#LeverageProxyCaching)

不建议使用查询字符串进行版本控制（即。`myscript.js?v=1.1.0`），因为特别是

> 大多数代理，尤其是 3.0 版的 Squid，不缓存带有“？”的资源。在他们的网址中...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:23:51.890

阻止脚本缓存的最佳方法是在每行的末尾添加一个随机查询字符串值。例如

```
 <script src="/path-to-your-script/script.js?v=0b1"></script> 
```

这在开发中非常有用，因为您的脚本永远不会被缓存，尽管在生产中您确实希望浏览器缓存脚本以加快速度。

因此，对于生产，您可能希望引入一些版本控制，例如 jquery，`jquery-1.8.0.js`

# git - 默认情况下，我可以阻止 git 将主分支推送到所有遥控器吗？

> ID：12283581
> 
> 赞同：0
> 
> 时间：2012-09-05T14:19:25.173
> 
> 标签：git, git-push

我有一个带有两个遥控器的本地 git 存储库（“origin”用于内部开发，“other”用于外部承包商使用）。我本地存储库中的 master 分支跟踪“origin”中的 master，这是正确的。我还有一个“外部”分支，它跟踪“其他”中的主人。我现在遇到的问题是我的主分支也想在“其他”中推送给主，这是一个问题。有什么办法可以指定本地主机不应该推送到其他/主机？

我已经尝试更新我的 .git/config 文件以包括：

```
[branch "master"]
    remote = origin
    merge = refs/heads/master
[branch "external"]
    remote = other
    merge = refs/heads/master
[push]
     default = upstream 
```

但`remote show`仍然表明我的主人正在向两个遥控器推送：

```
toko:engine cmlacy$ git remote show origin
Password: 
* remote origin
  Fetch URL: <REPO LOCATION>
  Push  URL: <REPO LOCATION>
  HEAD branch: master
  Remote branches:
    master              tracked
    refresh-hook        tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (up to date) 
```

这些都是正确的。

```
toko:engine cmlacy$ git remote show other
Password: 
* remote other
  Fetch URL: <REPO LOCATION>
  Push  URL: <REPO LOCATION>
  HEAD branch: master
  Remote branch:
    master tracked
  Local branch configured for 'git pull':
    external merges with remote master
  Local ref configured for 'git push':
    master pushes to master (local out of date) 
```

最后一节是问题所在。'external' 应该与 other/master 合并，但 master 永远不应该推送给 other/master。它永远不会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:36:28.677

在该部分下`.git/config`添加一个参数。`push = external:master``[remote "other"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:31:14.117

是的，您可以指定推送的位置，例如：

```
git push <remote> <local branch name>:<remote branch name> 
```

顺便说一句，这样做`git help push`会给你这个答案。

编辑：要自动执行此操作，您可能想要设置跟踪，请查看：[https](https://mislav.net/2010/07/git-tips/) ://mislav.net/2010/07/git-tips/并将您设置`push.default`为`tracking`（您可能会查看[配置本地分支也推送到特定的分支](https://stackoverflow.com/questions/4109136/configure-a-local-branch-for-push-to-specific-branch)）

我希望能解决它:)

# php - 如何在使用 symfony2（和 fosUserBundle）登录时动态添加用户角色？

> ID：12283583
> 
> 赞同：3
> 
> 时间：2012-09-05T14:19:29.350
> 
> 标签：php, symfony, fosuserbundle

在我的应用程序中，用户可以随着时间的推移在免费用户和高级用户之间切换，当他们的订阅到期时，他们不再拥有高级权限。

我想我可以偷工减料，不在数据库中存储高级用户角色，只存储他们支付的日期，从而无需 cron 作业添加 och 从我的用户中删除角色高级。

我想到的解决方案是在用户实体上执行此操作：

```
public function __construct()
{
    if ( $this->hasPlus() )
    {       
        $this->addRole('ROLE_PLUSUSER');
    }
} 
```

其中 hasPlus 是将当前日期与支付日期进行比较的函数，如果用户仍然支付，则返回 true。

现在，这不起作用，所以我在想也许有人可以为我阐明这一点 - 我知道角色是在登录时添加的，如果我在登录后添加角色，我需要注销并重新登录才能使用效果，但在这里我试图在构造我的用户对象时添加角色，但它仍然不起作用......

根据下面的优秀答案添加了 eventListener ，仍然无法将角色添加到用户：

```
<?php

namespace Hemekonomi\UserBundle\EventListener;

use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;
use Symfony\Component\Security\Core\SecurityContext;
use Symfony\Component\HttpFoundation\Session;

class SecurityListener
{
    protected $security;
    protected $session;

/**
* Constructs a new instance of SecurityListener.
*
* @param SecurityContext $security The security context
* @param Session $session The session
*/
    public function __construct(SecurityContext $security, Session $session)
    {
        //You can bring whatever you need here, but for a start this should be useful to you
        $this->security = $security;
        $this->session = $session;
    }

/**
* Invoked after a successful login.
*
* @param InteractiveLoginEvent $event The event
*/
    public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
    {
         //Your logic needs to go here
         //You can addRole 
         //Even persist if you want but bring the right tools to your constructor
         $security = $this->security; 

         if ($security->getToken()->getUser()->hasPlus()) {       
            $security->getToken()->getUser()->addRole('ROLE_PLUSUSER');    
         }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:25:46.833

您的逻辑不适用于`user`实体...

如果您想在登录时实现，请使用`Event Listeners`，这就是它们如此有用的原因:-)

您需要创建一个对事件做出反应的侦听器，`InteractiveLoginEvent`如下所示：

## 1/ 创建一个监听器

```
<?php

namespace Acme\YourBundle\EventListener;

use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;
use Symfony\Component\Security\Core\SecurityContext;
use Symfony\Component\HttpFoundation\Session\Session;

class SecurityListener
{
    protected $security;
    protected $session;

/**
* Constructs a new instance of SecurityListener.
*
* @param SecurityContext $security The security context
* @param Session $session The session
*/
    public function __construct(SecurityContext $security, Session $session)
    {
        //You can bring whatever you need here, but for a start this should be useful to you
        $this->security = $security;
        $this->session = $session;
    }

/**
* Invoked after a successful login.
*
* @param InteractiveLoginEvent $event The event
*/
    public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
    {
         //Your logic needs to go here
         //You can addRole 
         //Even persist if you want but bring the right tools to your constructor
    }
} 
```

请记住，在 Symfony 中已经默认创建了**InteractiveLoginEvent**（正如您在`use`声明中看到的那样），因此现在几乎没有什么可做的：

## 2/ 将此侦听器声明为服务：

```
services:
    acme_your_bundle.listener.login:
        class: Acme\YourBundle\EventListener\SecurityListener
        arguments: [@security.context, @session]
        tags:
            - { name: kernel.event_listener, event: security.interactive_login, method: onSecurityInteractiveLogin } 
```

## 3/ 如果需要，请查看文档

[事件调度程序组件](http://symfony.com/doc/master/components/event_dispatcher/introduction.html)

[如何创建事件监听器](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)

[Dustin Dobervich 的登录重定向](http://www.dobervich.com/2011/10/13/login-redirection-revisited/)：这篇文章将为您提供一个很好的示例，说明监听器如何工作以及如何在登录时简单地实现它们。

# objective-c - 如何检查float是否只有2位小数不等于0

> ID：12283587
> 
> 赞同：0
> 
> 时间：2012-09-05T14:19:48.183
> 
> 标签：objective-c, slider, decimal

我有 NSSlider，我对它的变化进行了调整。但是我希望我的操作只有在滑块的浮点值是例如`2.230000`或时才起作用`3.410000`。

```
if (floatValue is y.xx0000) {
    doSomething;
} 
```

我的意思是，只有当我的浮点数只有 2 位不等于 0 时，我才想做一些动作。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:23:23.793

*只有*两个非零小数位的浮点值是 n.00、n.25、n.50 或 n.75 形式的数字。所有其他值都有两个以上的非零小数位。例如，您的示例 3.41 并不是真正的“3.41”。相反，它是：

```
3.410000000000000142108547152020037174224853515625 
```

而“2.23”实际上是：

```
2.229999999999999982236431605997495353221893310546875 
```

那么你真正想要做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-19T15:40:04.583

我玩这个游戏有点晚了，但是我在寻找类似的东西时发现了这个问题。在我看来，您要做的是将滑块设置的值四舍五入到小数点后 2 位。这样，您尝试使用滑块配置的事物和/或计算将始终有效，就好像它仅适用于精确的 2 个十进制值一样。

或者，您可以检查浮点值与四舍五入到小数点后 2 位之间的距离。然后设置一个例如 0.005 的阈值来表示它何时远离。

# performance - 在每个给定区域上查找最小值的有效方法

> ID：12283590
> 
> 赞同：6
> 
> 时间：2012-09-05T14:19:54.687
> 
> 标签：performance, algorithm, optimization, hash, matrix

给定 a ![在此处输入图像描述](../Images/70df499738536039d0d701b1bf9767b0.png) 我们首先定义两个实值函数![在此处输入图像描述](../Images/c0d10c1d5478da13a2b928993c14387f.png)，![在此处输入图像描述](../Images/a0ca75b0a27a6f2655f905d21f2bc438.png)如下所示：

![在此处输入图像描述](../Images/2cd4224e57cd68f146d19034c7499502.png)
![在此处输入图像描述](../Images/1a0a8f1c3ea8ef8f9cedfaccbd3d670b.png)

我们还`m(X)`为每个矩阵定义了一个值，`X`如下所示：

![在此处输入图像描述](../Images/7891855437a58dee1bbcbf0f033a1abc.png)

现在给定一个![在此处输入图像描述](../Images/3d1f329ae17105369fb47a431f9d4e61.png)，我们有很多 的区域`G`，表示为![在此处输入图像描述](../Images/73d5ce6daed7a1f99c1baf873352f238.png)。这里， 的区域由从 的某些列和某些行中随机选择`G`的子矩阵形成。我们的问题是计算尽可能少的操作。是否有任何方法，例如构建哈希表或排序以更快地获得结果？谢谢！`G``G`![在此处输入图像描述](../Images/08144f68b655c875c17c9d8327f34a36.png)

=========================

例如，如果`G={{1,2,3},{4,5,6},{7,8,9}}`，那么

```
G_1 could be {{1,2},{7,8}}
G_2 could be {{1,3},{4,6},{7,9}}
G_3 could be {{5,6},{8,9}} 
```

========================

目前，对于每个`G_i`我们需要 mxn 比较来计算`m(G_i)`。因此，`m(G_1),...,m(G_r)`应该有 rxmxn 比较。但是，我可以注意到这一点`G_i`并且`G_j`可能重叠，因此会有一些其他更有效的方法。任何关注将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:47:10.403

根据需要最小/最大类型数据的次数，您可以考虑在矩阵值之间（即值之间的间隙）保存最小/最大信息的矩阵。因此，对于您的示例 G={{1 ,2,3},{4,5,6},{7,8,9}} 我们将定义一个关系矩阵 R 大小为 ((mxn),(mxn),(mxn)) 并具有来自集合 C 的值= {-1 = 小于，0 = 等于，1 = 大于}。

R 将有九个关系对 (n,1)、(n,2) 到 (n,9)，其中每个值都是 C 的成员。注意 (n,n 已定义并且等于 0)。因此，R[4,,) = (1,1,1,0,-1,-1,-1,-1,-1)。现在考虑您的任何子集 G_1 ...，了解子集成员的位置关系将为您提供到 R 的偏移量，这将解析为每个 R(N,,) 的索引，这将直接返回所需的关系信息而无需比较。

当然，您必须确定构建 R 的空间和计算开销是否超过了每次需要时计算所需内容的成本。某些优化包括实现 R 矩阵沿主对角线反射并且您可以声明“等于”被调用，例如，小于（意味着 C 只有两个值）是可用的。根据原始矩阵 G，如果知道行或列已排序，则可以进行其他优化。

并且由于某些计算机（大型机、超级计算机等）以列优先顺序将数据存储到 RAM 中，因此请存储您的数据集，以便它填充转置的行和列，从而允许列到列类型的操作（向量计算）实际上支持列。检查您的架构。

# object - 获取对象的所有字段

> ID：12283592
> 
> 赞同：4
> 
> 时间：2012-09-05T14:19:58.497
> 
> 标签：object, field, racket

是否可以在球拍中同时获取对象的所有字段？

我基本上想将一个对象转换为一个哈希表，其中字段名作为键，字段值作为值。

我找到了一个函数（field-names obj），但后来我不知道如何使用返回的字段名从 obj 中获取值。该函数`get-field`可用于获取字段的值，但我不知道如何将其与值一起使用：

```
> (define x% (class object% (init-field x y) (super-new)))
> (define obj (make-object x% 1 2))
> (get-field x obj)
1
> (field-names obj)
'(y x)
> (define field-name (second (field-names obj)))
> field-name
'x
> (get-field field-name obj)
get-field: given object does not have the requested field
  field name: field-name
  object: (object:x% ...)
  errortrace...:
  context...:
    /usr/lib/racket/collects/racket/private/class-internal.rkt:4906:0: obj-error29
    /usr/lib/racket/collects/racket/private/misc.rkt:87:7 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T16:23:11.913

这是一些帮助您入门的代码

```
#lang racket

> (define x% (class object% (inspect #f) (init-field x y) (super-new)))
> (define obj (make-object x% 1 2))
> (let-values (((name field-cnt field-name-list field-accessor field-mutator super-class skipped) 
               (class-info x%)))
    (for/hash ((name field-name-list)
               (idx field-cnt))
      (values name (field-accessor obj idx))))
'#hash((x . -1) (y . 0)) 
```

您可能希望将检查器从 #f 更改为不那么容易受到攻击的东西，但对您的需要足够开放。阅读一般的班级信息和检查员。

# java - java字符串重复字母

> ID：12283596
> 
> 赞同：-3
> 
> 时间：2012-09-05T14:20:08.213
> 
> 标签：java, string

我是一个 java 菜鸟，我有特别的问题。让我们考虑一个字符串，其中包含多个重复的字母：

```
String a="AAABBBAACCBBDD" 
```

`for`我已经用and多次尝试过这个`charAt`。预期输出：

```
"ABCD" 
```

此操作是否有任何内置函数以及获得输出的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:23:31.173

您可以遍历字符串的字符以构建一组唯一字符：

```
String a = "AAABBBAACCBBDD";
Set<Character> charSet = new HashSet<String>();
for (char c : a.toCharArray())
{
    charSet.add(c);
} 
```

然后您可以将集合转换为列表并对其进行排序以用于显示/`toString()`目的：

```
List<Character> uniqueCharList = new ArrayList<Character>(charSet);
Collections.sort(uniqueCharList);

// Convert List<Character> to char[]
// see http://stackoverflow.com/q/6649100/139010 for a more concise library call
char[] uniqueCharArray = new char[uniqueCharList.size()];
for (int i=0; i<uniqueCharArray.length; i++)
{
    uniqueCharArray[i] = uniqueCharList.get(i);
}

String result = new String(uniqueCharArray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:24:48.800

我会做类似的事情

```
public static String dedup(String text) {
    Set<Character> seen = new LinkedHashSet<Character>();
    StringBuilder sb = new StringBuilder();
    for (char c : text.toCharArray())
        if (seen.add(c))
            sb.append(c);
    return sb.toString();
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-05T14:27:41.340

您不需要列表或设置为此。只是 String 来存储一切。我希望这没有错误。

```
String result = "";
for(int i = 0; i < a.length(); i++) 
    if(!result.contains(a[i])) {
           result += a[i];          
    } 
```

# android - 使用 Android 的 SoundPool 类播放音频文件序列

> ID：12283604
> 
> 赞同：2
> 
> 时间：2012-09-05T14:20:30.880
> 
> 标签：android, soundpool

我在 raw 文件夹中有三个声音文件。我想一个接一个地播放它们，它们之间没有延迟。我试着让他们玩下面的代码，但所有三个文件都在一起玩，而不是一个接一个。所有三个文件都小于 50 kb。我也想改变他们的播放速率，这就是我使用 SoundPool 而不是 MediaPlayer 的原因。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mSoundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 0); 
     mSoundPoolMap = new HashMap<Integer, Integer>(); 
     mAudioManager = (AudioManager)this.getSystemService(Context.AUDIO_SERVICE);
     final int streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC); 

     mSoundPoolMap.put(1, mSoundPool.load(this, R.raw.nancy, 1));
     mSoundPoolMap.put(2, mSoundPool.load(this, R.raw.cymbal, 1));
     mSoundPoolMap.put(3, mSoundPool.load(this, R.raw.njs, 1));

    Button SoundButton = (Button)findViewById(R.id.Button);
    SoundButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            mSoundPool.play(mSoundPoolMap.get(1), streamVolume, streamVolume, 1, 0, 1f);
            mSoundPool.play(mSoundPoolMap.get(2), streamVolume, streamVolume, 1, 0, 1f);
            mSoundPool.play(mSoundPoolMap.get(3), streamVolume, streamVolume, 1, 0, 1f);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:41:14.420

为了做你想做的事，你可能必须创建你自己的自定义 AsyncTask ，它接受一组 SoundPool 对象（或者可能是一个 HashMap），实现如下：

```
private class SoundPoolTask extends AsyncTask <Soundpool, String, String>
{
    @Override
    protected String doInBackground(SoundPool... params) {
        try {               
            //For each SoundPool object
               // int soundLength = however long the SoundPool object is
               // Play the sound
               // Thread.sleep(soundLength);        
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(String... values) {}

    @Override
    protected void onPostExecute(String result) {
      //Clean up your class objects
    }
} 
```

您可能需要对声音的原始长度和播放速率进行某种计算，以确定每个声音的长度。我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T06:59:22.683

我遇到了同样的问题，所以我创建了自己的逻辑。她是：-

我的原始文件夹中有三个音频文件。我想依次运行这三个文件。为此，我遵循以下流程：-

步骤 1：- 单击按钮时将生成一个线程。

Step2:- 线程将启动一个 20 毫秒的计时器。

第 3 步：- 在计时器中，它会检查媒体播放器是否没有播放。如果媒体播放器没有播放，它将调用一个函数来启动媒体播放器。

Step4:- 在将启动媒体播放器的功能中，具有开关逻辑，它将决定打开哪个音频文件（借助变量 v）。

这是我的代码：-

```
public class MainActivity extends Activity {
int v=0;
TimerTask time;

MediaPlayer mp ;
Button btn;
void playmp(int a)
{

    switch (a)
    {
        case 0: 
        {
            mp = MediaPlayer.create(this,R.raw.a);
            mp.start();
            v++;
            break;

        }

   case 1: 
   {
    mp = MediaPlayer.create(this,R.raw.b);
    mp.start();
    v++;
    break;

   }
   case 2: 
   {
    mp = MediaPlayer.create(this,R.raw.c);
    mp.start();
    v++;
    break;

   }
    }
   }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btn= (Button) findViewById(R.id.button1);
        mp = MediaPlayer.create(this,R.raw.a);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                //Creating Thread

                Thread thread = new Thread()
                {
                    @Override
                    public void run() {
                        try {

                                sleep(1);

                                // Body Of Timer
                                time = new TimerTask() {
                                    @Override
                                    public void run() {

                                        //Perform background work here
                                    if(!mp.isPlaying())
                                    {

                                    playmp(v);  

                                    }

                                    }
                                };
                                 //Starting Timer
                                Timer timer = new Timer();
                                timer.schedule(time, 10, 20);

                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                };

                thread.start();

            }
        });
    } 
```

其中“a”、“b”和“c”是我的音频文件名。如果您想在完成所有三个后重复音频，请替换：-

```
case 2: 
       {
        mp = MediaPlayer.create(this,R.raw.c);
        mp.start();
        v++;
        break;

       } 
```

这样

```
case 2: 
       {
        mp = MediaPlayer.create(this,R.raw.c);
        mp.start();
        v=0;
        break;

       } 
```

# javascript - 鼠标悬停时的 CSS 过渡

> ID：12283605
> 
> 赞同：0
> 
> 时间：2012-09-05T14:20:34.200
> 
> 标签：javascript, jquery, css

我的横幅中的下拉菜单有以下 CSS：

```
#nav-menu li a
{
    background-image:url('../images/menu_background.png');  
    background-repeat:repeat-x;
    background-position: left top;
    height: 35px;
}

#nav-menu li a:hover
{
    background-image:url('../images/menu_background_hover.png');  
    background-repeat:repeat-x;
    background-position: left top;
    height: 35px;

} 
```

它工作正常，除了当我将鼠标悬停在`<li>`标签上时我想要一些动画效果。`<li>`目前，当我将鼠标悬停在它上面时，它只是替换了背景颜色。

我尝试了下面的示例代码，该代码更改了 li 标签的左边距，但我不知道如何在悬停时为 css 过渡设置动画：

```
$j(document).ready(function () {

    //When mouse rolls over
    $j("#nav-menu li").hover(function () {

        $j(this).filter(':not(:animated)').animate({
            marginLeft: '9px'
        }, 'slow');
    },

    function () {
        $j(this).animate({
            marginLeft: '0px'
        }, 'slow');
    });

}); 
```

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:32:12.430

[这篇文章](https://stackoverflow.com/questions/2983957/animate-background-image-change-with-jquery)的引述，

> Blockquote 我想你必须通过不使用真正的背景图像来解决这个问题，而是使用包含图像的 div 元素，使用 position: absolute （或固定）和 z-index 进行堆叠。然后，您将为这些 div 设置动画。块引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:37:10.307

我通过删除变量名中的`j`后面来实现这一点。`$`

小提琴：http: [//jsfiddle.net/XjxBj/](http://jsfiddle.net/XjxBj/)

```
$(document).ready(function () {
    //When mouse rolls over
    $("#nav-menu li").hover(function () {
        $(this).filter(':not(:animated)').animate({
            marginLeft: '9px'
        }, 'slow');
    },

    function () {
        $(this).animate({
            marginLeft: '0px'
        }, 'slow');
    });
});​ 
```

# python - 在 Python 中使用函数

> ID：12283615
> 
> 赞同：0
> 
> 时间：2012-09-05T14:21:08.140
> 
> 标签：python, function, readfile

我需要创建一个程序来读取文本文件并计算行数、单词数和字符数。如果单独分开，我可以在下面完成所有工作，但我想将其转换为使用函数，以便它可以读取一次文件，但我不断得到不同的答案并且不确定我做错了什么。

*字码*

```
print ' '
fname = "question2.txt"
infile = open ( fname, 'r' )
fcontents = infile.read()

words = fcontents.split()
cwords = len(words)

print "Words: ",cwords 
```

*字符代码*

```
fname = "question2.txt"
infile = open ( fname, 'r' )
fcontents = infile.read()

char = len(fcontents)

print "Characters: ", char 
```

*行代码*

```
fname = "question2.txt"
infile = open ( fname, 'r' )
fcontents = infile.readlines()

lines = len(fcontents)

print "Lines: ", lines 
```

*正确的结果*

> 字数：87 字数：
> 559
> 行数：12

这是我在尝试使用函数时想到的，但就是不知道出了什么问题。

```
def filereader():
    fname = 'question2.txt'
    infile = open ( fname, 'r' )
    fcontents = infile.read()
    fcontents2 = infile.readlines()

    return fname, infile, fcontents, fcontents2

def wordcount(fcontents):
    words = fcontents.split(fcontents)
    cwords = len(words)
    return cwords

def charcount(fcontents):
    char = len(fcontents)
    return char

def linecount(fcontents2):
    lines = len(fcontents2)
    return lines

def main():

    print "Words: ", wordcount ('cwords')
    print "Character: ", charcount ('char')
    print "Lines: ", linecount ('lines')

main() 
```

*错误的结果*

> 字数：2 字数：
> 4
> 行数：5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:22:40.243

```
 infile = open ( fname, 'r' )
    fcontents = infile.read()
    fcontents2 = infile.readlines() 
```

您不能从文件中读取两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:24:20.473

您需要`filereader`使用`main`：

```
def main():
    fname, infile, fcontents, fcontents2 = filereader()
    print "Words: ", wordcount (fcontents)
    print "Character: ", charcount (fcontents)
    print "Lines: ", linecount (fcontents2) 
```

否则，您将如何获取值`fcontents`并`fcontents2`传递给其他函数？您还需要修复`filereader`以确保它会读取一次文件：

```
def filereader():
    fname = 'question2.txt'
    infile = open ( fname, 'r' )
    fcontents = infile.read()
    fcontents2 = fcontents.splitlines(True)
    return fname, infile, fcontents, fcontents2 
```

请注意，for 行`fcontents2`已修改为`fcontents`在换行符处拆分（请参阅 参考资料[`str.splitlines`](http://docs.python.org/library/stdtypes.html#str.splitlines)）。这也将为您提供一个字符串列表`.readlines()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:25:59.253

从文件中读取时，文件句柄会记住它在文件中的位置。因此，在您调用后`infile.read()`，`infile`将被放置在文件的末尾。然后当您调用`infile.readlines()`时，它将尝试读取其当前位置和文件末尾之间的所有字符，因此返回一个空列表。

您可以使用 将文件倒回到其初始位置`infile.seek(0)`。因此：

```
>>> fcontents = infile.read()
>>> infile.seek(0)
>>> flines = infile.readlines() 
```

将工作。

或者，将文件读入字符串`fcontents`后，您可以使用以下命令将字符串拆分为行`splitlines`：

```
>>> fcontents = infile.read()
>>> flines = fcontents.splitlines() 
```

# html - 如何删除这个空间？

> ID：12283620
> 
> 赞同：0
> 
> 时间：2012-09-05T14:21:20.163
> 
> 标签：html, html-table

在这张图片中：

![在此处输入图像描述](../Images/5d32923a90b5716688d8ed2b60255686.png)

此页面的代码是：

```
<table width="100%" border="0" cellspacing="2" cellpadding="2">
  <tr >
    <td align="center">
        <form method='post' name='recherche' id='formulaire' class="formulaire" >
            <article class='module width_2_quarter_no_height'>
                <table width="100%" border="0" cellspacing="2" cellpadding="2">
                  <tr>
                    <td>
                        <header><h3><?php echo _getText("main.accueil.onglet.evenement.critere.titre"); ?></h3></header>
                    </td>
                  </tr>
                  <tr>
                    <td>
                        <table width="100%" border="0" cellspacing="2" cellpadding="2">
                            <tr>
                                <td class="labelstyle">
                                    <?php echo _getText('main.accueil.tableau_bord.Titre'); ?>
                                </td>
                                <td>
                                    <input class="inputlong" type="text" name="event_titre" id="event_titre" />
                                </td>
                            </tr>
                            <tr>
                                <td class="labelstyle">
                                    <?php echo _getText('main.accueil.onglet.evenement.critere.type'); ?>
                                </td>
                                <td>
                                    <select id="event_type" class="selectnormal">
                                        <option><?php echo _getText('main.accueil.onglet.evenement.critere.type.select'); ?></option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="labelstyle">
                                    <?php echo _getText('main.accueil.onglet.evenement.critere.redacteur'); ?>
                                </td>
                                <td>
                                    <select id="event_redacteur" class="selectnormal">
                                        <option><?php echo _getText('main.accueil.onglet.evenement.critere.redacteur.select'); ?></option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="labelstyle"><?php echo _getText('main.accueil.onglet.evenement.critere.datedebut'); ?></td>
                                <td>
                                    <table width="250px" cellpadding="0" cellspacing="0" border="0">
                                        <tr>
                                            <td><input class="inputcourt" type="text" name="event_date_deb" id="event_date_deb" /></td>
                                            <td align="center" class="labelstyle"><?php echo _getText('main.accueil.onglet.evenement.critere.datefin'); ?></td>
                                            <td><input class="inputcourt" type="text" name="event_date_fin" id="event_date_fin" /></td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>
                   </tr>
                   <tr>
                    <td>
                        <table width="90%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td>
                                    <fieldset>
                                        <legend>&nbsp;<em><span class="labelstyle"><?php echo _getText('main.accueil.onglet.evenement.critere.tache'); ?></span></em></legend>
                                        <table border="0" cellspacing="2" cellpadding="2">
                                            <tr>
                                                <td class="labelstyle"><?php echo _getText('main.accueil.onglet.evenement.critere.type'); ?></td>
                                                <td class="labelstyle"><input type="radio" id="rb_tous" name="type_tache" value="0" /><?php echo _getText('main.accueil.onglet.evenement.filtre.tous'); ?></td>
                                                <td class="labelstyle"><input type="radio" id="rb_param" name="type_tache" value="1" checked /><?php echo _getText('main.accueil.onglet.evenement.critere.parametrage'); ?></td>
                                                <td class="labelstyle"><input type="radio" id="rb_redac" name="type_tache" value="2" /><?php echo _getText('main.accueil.onglet.evenement.critere.redaction'); ?></td>
                                            </tr>
                                        </table>
                                        <table border="0" cellspacing="2" cellpadding="2" width="100%">
                                            <tr>
                                                <td width="5%">
                                                    <span class="labelstyle"><?php echo _getText('main.accueil.onglet.evenement.critere.intitule'); ?></span>
                                                </td>
                                                <td>
                                                    <select id="tache_intitule" class="selectnormalLong">
                                                        <option><?php echo _getText('main.accueil.onglet.evenement.critere.tache.select'); ?></option>
                                                    </select>
                                                </td>
                                            </tr>
                                        </table>
                                    </fieldset>
                                </td>
                            </tr>
                        </table>
                    </td>
                  </tr>
                  <tr>
                    <td align="center">
                        <input type="button" name="btnValider" id="btnValider" value="<?php echo _getText('Bouton.valider'); ?>" class="boutonstyle"  />
                        <input type="reset" name="btnReset" id="btnReset" value="<?php echo _getText('main.bouton.effacer'); ?>" class="boutonstyle" />
                    </td>
                  </tr>
                </table>
            </article>
        </form>
    </td>
  </tr>
</table> 
```

那么如何删除我圈成红色的空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:29:14.680

你总是可以使用css。在你的

```
<fieldset style="margin-top: -20px">... 
```

我猜某处的css可能会影响它。如果不能看到你所有的 css，就很难说清楚。

请注意，我并不是在提倡内联样式属性……这只是一种快速的方式来表明可能是您的 css 导致了空间存在。

# mysql - 延迟加载缓存机制

> ID：12283623
> 
> 赞同：0
> 
> 时间：2012-09-05T14:21:30.563
> 
> 标签：mysql, zend-framework, redis

我正在尝试为我的项目构建“智能”缓存机制。项目简介：它是社交网络，主要是阅读密集型，此外还有与 nodejs 的 websocket 连接，用于一些实时的事情 - 例如聊天。

这是构建这样的缓存机制的好方法吗？使用这种方法有什么好处和坏处？

```
function loadUser($id) {
   $user_key = 'user_'.$id;

   if( $user = Zend_Registry::get($user_key)) ) {
      return $user;
   }
   elseif( $user = loadFromRedis($user_key) ) {
      Zend_Registry::set($user_key, $user);
   }
   else {
      $user = loadFromMysql($user_key)
      setToRedis($user_key, $user);
      setKeyExpire(30);
      Zend_Registry::set($user_key, $user);
   }

   return $user; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:49:47.140

我认为这不是最好的方法，因为 Zend 增加了很多开销（如果你正在缓存是因为你想提升你的应用程序）。

在这个站点中，有许多基准解释了 Zend 开销（以及与其他框架的比较）：[http ://www.ruilog.com/blog/view/b6f0e42cf705.html](http://www.ruilog.com/blog/view/b6f0e42cf705.html)

在我的代码中，我倾向于使用我自己的通用模型类，使用与其连接器相关的模型（MysqlModel、MongoModel、CassandraModel ...）对其进行扩展，并使用与实体直接相关的类（UserModel、ArticleModel、.. .) 并在 Model 类中编写缓存处理代码，以便在整个模型集中重新使用它。

基本方法：readCache、writeCache、deleteCache。您可以将远程缓存（如 memcached 或 redis）与本地缓存（如 xcache 或 apc）结合起来，以减少网络开销。但我建议仅当某个标志为真时才使用本地缓存，而不是默认情况下。

# javascript - JavaScript (Underscore.js) 扩展功能

> ID：12283625
> 
> 赞同：5
> 
> 时间：2012-09-05T14:21:41.863
> 
> 标签：javascript, underscore.js

免责声明：（1）我的背景是 Java/C#，我上周才开始深入研究 JavaScript。(2) 我知道 _.mixin() 方法。

这不是项目关键，而是我无法理解 Javascript 中的对象继承。

例如，尝试使用 _.keyFilter 函数来增加 underscore.js（我意识到我可以使用 map 来实现类似的功能）以返回满足评估函数的键列表。我可以使用 _.mixin() 方法实现结果：

除了将函数直接放入源代码之外，_.mixin()

```
 _.mixin({ filterKey : function(obj, iterator, context) {
    var results = [];
    if (obj == null) return results;
    _.each(obj, function(value, index, list) {
        if (iterator.call(context, value, index, list)){
            results[results.length] = index;
        }
    });
    return results;
}}); 
```

但是，我不确定我是否理解为什么我不能简单地在我的脚本文件中使用以下内容来增加下划线：

```
_.keyFilter = function(obj, iterator, context) {
        var results = [];
        if (obj == null) return results;
        each(obj, function(value, index, list) {
            if (iterator.call(context, value, index, list)) results[results.length] = index;
        });
        return results;
}; 
```

这样做，然后尝试使用以下命令调用它：

```
_.chain(myList).keyFilter(evalFunction); 
```

我得到以下异常：

```
'Uncaught TypeError: Object [object Object] has no method 'keyFilter' 
```

请注意，当我将上述方法放入 underscore.js 的源代码中时，它确实有效。

然后我尝试在我的脚本文件中使用原型（我仍然没有完全掌握）：

```
var keyFilter = _.prototype.keyFilter = function(obj, iterator, context) {
        var results = [];
        if (obj == null) return results;
        each(obj, function(value, index, list) {
            if (iterator.call(context, value, index, list)) results[results.length] = index;
        });
        return results;
}; 
```

但这引发了同样的异常。（我认为下面的 var 被提升到脚本的顶部，这就是为什么我也尝试使用和不使用上面的传递赋值）。

解释将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:25:20.540

这与其说是关于 JavaScript 的问题，不如说是关于 Underscore 的问题，后者倾向于以自己的方式做事。

*   仅通过将方法`_`添加为属性（即`_.keyFilter = ...`）来添加方法类似于将静态方法添加到 Java 中的类。您正在将方法添加到`_`对象中，但它与`_`. 这是添加新实用程序方法的合理方法，但如果您想使用 Underscore 的包装和链接功能，则不是。

*   Using`.mixin()`允许您连接到 Underscore 的包装和链接架构。这是 Underscore 特有的——它不是 JavaScript 的一部分。除了编辑源代码之外，这是我知道利用这些 Underscore 功能的唯一方法，这些功能在很大程度上依赖于 Underscore 库中的私有方法和变量。

*   虽然 JS 支持原型继承，并且每个对象都有一个`prototype`属性，但许多开发人员使用其他方法或其他类型的继承。除非您知道其背后的代码，否则通常不安全地假设将方法添加到`prototype`看起来像构造函数的东西实际上会起作用。Underscore*确实*对其包装的对象使用原型继承，但是以一种扭曲的、有点神奇的方式，我不认为向`prototype`wil 添加方法会产生预期的效果 - 一方面，即使它有效，原型也仅在 Underscore 中使用对于*包裹*的物体，所以`_.keyFilter(...)`绝对行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:01:15.757

我认为这是因为（如前所述）“_.keyFilter =”向 _ 对象添加了一个方法，但使用 _(myList) 创建了一个 undescore 对象——这就是链所做的——这是一个不同的对象。

# pdf - 使用VBS从记事本复制到Word

> ID：12283631
> 
> 赞同：1
> 
> 时间：2012-09-05T14:21:51.493
> 
> 标签：pdf, vbscript, ms-word, copy-paste

我正在尝试创建一个脚本来将 PDF 转换为纯文本，然后将纯文本复制到 Word 中。（我们在我工作的地方从头开始重新格式化损坏的文档。）我有一个运行良好的脚本，除了一件事：粘贴到 Word 时，它不会粘贴整个文件。对于较长的文件，我只能得到部分文本。

```
'string to hold file path
Dim strDMM
strDMM = "[path]"

'make this directory if it doesn't exits
On Error Resume Next
MkDir strDMM
On Error GoTo 0

'get the file name to process
Dim TheFile
TheFile = InputBox("What is the file name?" & chr(13) & chr(13) & "(Example: [name].pdf)", "Name of File")

'declare some acrobat variables
Dim AcroXApp
Dim AcroXAVDoc
Dim AcroXPDDoc

'open acrobat
Set AcroXApp = CreateObject("AcroExch.App")
AcroXApp.Hide

'open the document we want
Set AcroXAVDoc = CreateObject("AcroExch.AVDoc")
AcroXAVDoc.Open "[path to desktop]" & TheFile, "Acrobat" 'users are instructed to save to the Desktop for ease of access here

'make sure the acrobat window is active
AcroXAVDoc.BringToFront

'I don't know what this does. I copied it from code online.
Set AcroXPDDoc = AcroXAVDoc.GetPDDoc

'activate JavaScript commands w/Acrobat
Dim jsObj
Set jsObj = AcroXPDDoc.GetJSObject

'save the file as plain text
jsObj.SaveAs strDMM & "pdf-plain-text.txt", "com.adobe.acrobat.plain-text"

'close the file and exit acrobat
AcroXAVDoc.Close False
AcroXApp.Hide
AcroXApp.Exit

'declare constants for manipulating the text files
Const ForReading = 1
Const ForWriting = 2

'Create a File System Object
Dim objFSO
Set objFSO = CreateObject("Scripting.FileSystemObject")

'read file and get text
dim objFile
set objFile=objFSO.OpenTextFile( strDMM & TheFile, ForReading)

Dim strText
strText=objFile.ReadAll

'Create a Word Object
Dim objWord
set objWord = CreateObject("Word.Application")

'make Word visible
With objWord
    .Visible = True
End With

'Add method used to create a blank document
Dim objDoc
Set objDoc=objWord.Documents.Add()

'create a shorter variable to pass commands to Word
Dim objSelection
set objSelection=objWord.Selection

'type the read text into Word; this is the part that's failing
objSelection.TypeText strText

objFile.Close 
```

我已经尝试了多个具有相同结果的文件。有趣的是，它每次都从文件 A 粘贴相同的材料，但是从文件 B 复制时，它会粘贴不同数量的材料。换句话说，如果 A 在第一次运行时给了我 60 页的 8 页，那么我每次都会得到相同的 8 页。文件 B 可能会给我 14 页，共 60 页，然后每次都给我相同的 14 页。仅当我从 .txt 文件中删除材料时，这才会改变。如果我从 A 中删除几个段落，然后运行脚本，我可能会得到 12 页。然后我每次都得到相同的12个。但是没有模式（我可以辨别）来预测它在哪里切断。

我找不到任何 EOF 字符，当我从记事本读取并写入记事本时，整个内容被完美复制。问题出在转移到 Word 的某个地方。

有什么我想念的吗？Word 可以使用 TypeText 写入的字符串的大小是否有限制？（我认为如果是这样的话，我不会得到不同长度的文档，对吧？如果这是限制，它们不应该都停在 n 个字符处吗？）

我已经阅读了让 VBS 与剪贴板一起工作的其他库，但我是一个完全的菜鸟，不知道这是否是一个更优雅的解决方案或如何使它工作。我也不确定在我的工作计算机上我是否有必要的访问权限来安装这些库。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:51:42.273

无需将文件读入Word，您可以从磁盘插入文本文件

```
Dim objWord
'Dim objDoc
Set objWord = CreateObject("Word.Application")

'make Word visible
With objWord
   .Visible = True

   'Add method used to create a blank document
   .Documents.Add
   .Selection.InsertFile FileNameAndPath
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:52:41.000

您暗示的基本问题是*String*数据类型限制为[65,400 个字符](http://bytes.com/topic/access/insights/601315-vba-data-types)。对于未知的文件长度，最好一次读取一行并将其写入 Word。这里有一个很好的讨论类似的[东西](https://stackoverflow.com/questions/1376756/superfast-way-to-read-large-files-line-by-line-in-vba-please-critique)。以下代码应该可以帮助您到达目的地：

```
'read file and get text
dim objFile
set objFile=objFSO.OpenTextFile( strDMM & TheFile, ForReading)

'Don't do this!
'Dim strText
'strText=objFile.ReadAll

'Create a Word Object
Dim objWord
set objWord = CreateObject("Word.Application")

'make Word visible
With objWord
   .Visible = True
End With

'Add method used to create a blank document
Dim objDoc
Set objDoc=objWord.Documents.Add()

'create a shorter variable to pass commands to Word
Dim objSelection
set objSelection=objWord.Selection

'Read one line at a time from the text file and
'type that line into Word until the end of the file is reached
Dim strLine
Do Until objFile.AtEndOfStream
   strLine = objFile.ReadLine
   objSelection.TypeText strLine
Loop

objFile.Close 
```

希望有帮助！

# json - 无法从 web 服务获取数据到 sencha 触摸列表视图

> ID：12283636
> 
> 赞同：0
> 
> 时间：2012-09-05T14:22:08.353
> 
> 标签：json, web-services, sencha-touch, extjs

我有一张叫做雇员的桌子。empid 和 empname 是 2 个字段。我想通过 Web 服务从该表中获取数据到 sencha 触摸列表视图。我的网络服务正在返回 json 数据；我的意思是我将输出转换为json。我的javascript代码如下

```
 Ext.data.JsonStore({
       proxy: new Ext.data.HttpProxy({
       url: 'http://localhost:58984/Service1.asmx/GetListData',  // werservicename.asmx/webMethodName
       headers: {
                   'content-type': 'application/json'
                }
       }),
       root: 'd',
       idProperty: 'empid',   // provide the unique id of the row
       fields: [empname]   // specify the array of fields
    });

    itemTpl: '{empname}' 
```

但我收到 2 个错误：

1.  `empname`没有定义
2.  即使文件已加载，也不会声明以下类：*'Acsellerate.view.Main'。请检查其对应文件的源代码是否存在拼写错误：'app/view/Main.js*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:46:26.000

如果您准确指出错误发生的位置会很好，但对于 nr1 问题可能`fields: [empname]`应该是`fields: ['empname']`.

不确定 nr1 和 nr2 是否相关，但如果修复第一个错误不能解决您的问题，您确实需要向我们展示您的 Main.js

希望这可以帮助

# java - 从锁定屏幕控制 android 媒体播放器？

> ID：12283639
> 
> 赞同：3
> 
> 时间：2012-09-05T14:22:14.393
> 
> 标签：java, android, android-mediaplayer

当媒体播放器正在播放时；暂停、上一个和前进按钮出现在锁定屏幕上。我怎样才能让我的媒体播放器听这些按钮？（我使用的是安卓 2.3.7）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:28:11.727

据我所知，除非您编写自己的锁屏，否则您无法做到这一点

# c# - 从一个 XElement 中获取不在另一个 XElement 中的元素

> ID：12283640
> 
> 赞同：1
> 
> 时间：2012-09-05T14:22:19.013
> 
> 标签：c#, linq, linq-to-xml

我从两个不同的文件中加载了两个 XElement。一个是默认文件，另一个是实时 XML。基本上我需要知道如何比较两个 XElement 并获取所有元素的集合，这些元素在实时文件中而不是在默认文件中。

我不关心检查值我只关心实时文件中是否存在不在默认文件中的元素。

基本上我正在比较两个 Web.config 文件，当用户升级我们的产品时，我需要检查他们的 web.config 以找到他们添加的任何不在我们模板中的元素，并在我放下之前将它们添加到我们的模板中并覆盖他们的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:27:27.083

试试这个：

```
var addedNames = new HashSet<string>(
    liveXml.Elements().Select(e => e.Name).Except(
        defXml.Elements().Select(e => e.Name)
    )
);
var addedElements = liveXml
    .Elements()
    .Where(e => addedNames.Contains(e.Name))
    .ToList(); 
```

这种方法构造一个`liveXml`不存在于 中的元素名称列表`defXml`，将它们放入一个集合中，然后使用该集合来过滤`liveXml`的元素。

对于已移除的元素，将传递给`Except`和 filter的操作数的顺序颠倒过来`defXml`：

```
var droppedNames = new HashSet<string>(
    defXml.Elements().Select(e => e.Name).Except(
        liveXml.Elements().Select(e => e.Name)
    )
);
var droppedElements = defXml
    .Elements()
    .Where(e => addedNames.Contains(e.Name))
    .ToList(); 
```

# postgresql - 如何替换？列？从子查询输出

> ID：12283651
> 
> 赞同：0
> 
> 时间：2012-09-05T14:23:00.177
> 
> 标签：postgresql, select, subquery

如何将名称放在子查询的输出上，而不是`?column?`?

的`SELECT`输出是：

```
._______.__________.__________.
|__id___|_?column?_|_?column?_|
|_31886_|____12____|____13____| 
```

我想要的是：

```
._______.__________.__________.
|__id___|___ages___|_validate_|
|_31886_|____12____|____13____| 
```

我的`SELECT`样子：

```
SELECT g.id,
(select dt from pcdhidro where nomepcd=31886 order by datahora asc limit 1),
(select dt from pcdhidro_2003_96 where nomepcd=31886)
FROM gestpcd_2 g
WHERE g.tipo = 'HIDRO' and g.id = 31886 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:28:14.860

```
(Select X from Y) AS alias 
```

所以在你的情况下：

```
SELECT g.id,
(select dt from pcdhidro where nomepcd=31886 order by datahora asc limit 1) as ages,
(select dt from pcdhidro_2003_96 where nomepcd=31886) as validate
FROM gestpcd_2 g
WHERE g.tipo = 'HIDRO' and g.id = 31886 
```

# postgresql - 添加实体不会刷新父集合

> ID：12283654
> 
> 赞同：0
> 
> 时间：2012-09-05T14:23:23.450
> 
> 标签：postgresql, jpa, jpa-2.0, eclipselink

问题和问题非常简单，虽然很烦人，我正在寻找一个全局解决方案，因为它对我们来说是应用程序范围的问题。

**下面的代码真的很不有趣，但我将其发布为澄清！**

我们使用带有 JPA 2.0 的 PostgreSQL 数据库，我们生成了所有的外观和实体，当然我们做了一些编辑，但实际上并没有太多。

问题是每个实体都包含其子元素的集合，但是（仅对我们而言？）在创建子元素**后不会更新。**对象**被写入数据库**，您可以轻松选择它们，但我们真正希望看到的是父对象中刷新的子对象集合。

为什么会这样？如果我们（手动）刷新父实体，`em.refresh(parent)`它就可以解决问题，但我猜这对我们来说意味着在 Facades 中的大量工作。但也许没有别的办法？

感谢您的支持！

/* 编辑 */

我想它必须是一些注释问题或缓存或其他东西，但我已经尝试过

```
@OneToMany(mappedBy = "idquestion", orphanRemoval=true, fetch= FetchType.EAGER) 
```

和

```
@Cacheable(false) 
```

没有正常工作。

/* 编辑 */

一些示例代码以供理解。

数据库级别：

```
CREATE TABLE Question (
        idQuestion SERIAL,
        questionContent VARCHAR,    
    CONSTRAINT Question_idQuestion_PK PRIMARY KEY (idQuestion)
);

CREATE TABLE Answer (
        idAnswer SERIAL,
        answerContent VARCHAR,
        idQuestion INTEGER,
    CONSTRAINT Answer_idAnswer_PK PRIMARY KEY (idAnswer),
    CONSTRAINT Answer_idQuestion_FK FOREIGN KEY (idQuestion) REFERENCES Question(idQuestion)
); 
```

我们在 Netbeans 7.1 中生成了一些实体，它们看起来都类似于：

```
@Entity
@Table(name = "question", catalog = "jobfairdb", schema = "public")
@XmlRootElement
@NamedQueries({ BLAH BLAH BLAH...})
public class Question implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @GeneratedValue(strategy= GenerationType.IDENTITY)
    @Column(name = "idquestion", nullable = false)
    private Integer idquestion;
    @Size(max = 2147483647)
    @Column(name = "questioncontent", length = 2147483647)
    private String questioncontent;
    @OneToMany(mappedBy = "idquestion", orphanRemoval=true) 
    private Collection<Answer> answerCollection;

Getters... setters... 
```

我们（再次）为它们使用生成的外观，所有实现`AbstractFacade`如下：

```
public abstract class CCAbstractFacade<T> {
    private Class<T> entityClass;

    public CCAbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
    }

    protected abstract EntityManager getEntityManager();

    public void create(T entity) {
        getEntityManager().persist(entity);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:48:54.107

如果您使用[容器管理的事务](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html) **并**在事务完成后获取集合，父实体会自动更新。否则，您必须更新自己的集合。

本文详细解释了这种行为：[JPA 实现模式：双向关联](http://blog.xebia.com/2009/03/16/jpa-implementation-patterns-bidirectional-assocations/)

编辑：

使用 Container Managed Transactions 最简单的方法是拥有`transaction-type="JTA"`并`persistence.xml`使用[Container-Managed Entity Managers](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html#bnbqz)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:41:19.357

您似乎设置了 ManyToOne 方面，但没有添加到 OneToMany，您必须两者都做。

在 JPA 和一般 Java 中，您必须更新双向关系的双方，否则对象的状态将不同步。不这样做，在任何 Java 代码中都是错误的，而不仅仅是 JPA。

JPA 中没有任何魔法可以为您做到这一点。EclipseLink 确实为此提供了一个神奇的选项，您可以通过定制器 (mapping.setRelationshipPartnerAttributeName()) 进行设置，但不建议这样做，将代码修复为正确是最好的解决方案。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)

# jquery - 如果语句不起作用（左像素）jQuery

> ID：12283656
> 
> 赞同：-4
> 
> 时间：2012-09-05T14:23:23.307
> 
> 标签：jquery, jquery-animate

我正在开发一个相当简单的 jQuery 滑块。但我遇到了一个障碍（好几个）。我尽量保持简单。我有一个 jsFiddle：http: [//jsfiddle.net/dXYCP/](http://jsfiddle.net/dXYCP/)

在 jsFiddle 我有一个 if 语句，当 de div #slider_ul 左侧​​条件为 0 或更少 px 时，它应该隐藏箭头按钮。但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:28:01.800

尝试使用[`position()`](http://api.jquery.com/position/)（或[`offset()`](http://api.jquery.com/offset/)，取决于标记）：

```
if ($('#slider_ul').position().left > 0) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:04:28.797

我认为您需要一个滑块，如此演示链接[http://jsfiddle.net/dXYCP/7/](http://jsfiddle.net/dXYCP/7/)

**JS：**

```
 $(function() {

    slider();

    $('.arrow_left').click(function() {
       $('#slider_ul').animate({
            'left': '+=470px'
        }, slider);
    });

    $('.arrow_right').click(function() {        
        $('#slider_ul').animate({
            'left': '-=470px'
        }, slider);
    });

    function slider (){        
        var sliderPos = parseInt($('#slider_ul').css('left'), 10);
        if (sliderPos < 0) {
            $('.arrow_left').css('visibility', 'visible');
        } else {
            $('.arrow_left').css('visibility', 'hidden');
        }

        if (sliderPos < (-470*2)) {
            $('.arrow_right').css('visibility', 'hidden');
        } else {
            $('.arrow_right').css('visibility', 'visible');
        }
    };

}); 
```

**CSS：**

```
.arrow_left{
    margin-top:40px;
    float:left;
    margin-right:50px;
    cursor: pointer;
}

.arrow_right{
    margin-top:40px;
    float:right;
    margin-left:20px;
    cursor: pointer;
}

#slider{
    padding-top:15px;
    float:left;
    width: 470px;
    overflow: hidden;
} 
```

# spree - 一起设置狂欢和炼油厂时的“未初始化的常量用户”

> ID：12283658
> 
> 赞同：2
> 
> 时间：2012-09-05T14:23:26.703
> 
> 标签：spree, refinerycms

我一直在尝试建立狂欢和炼油厂，其目的如下： **对两者使用相同的身份验证系统**。

根据 github 项目和随后拉入 spree master 分支......这应该会顺利进行（链接在第一个答案的评论中可用）

我努力尝试，但我无法摆脱“未初始化的常量用户”错误。我将尝试描述能够复制错误的所有必要步骤。

首先，环境：

```
gem install rails
rails new spreefinery
cd spreefinery

# resolve a dependency on which bundler fails
sed "s/'jquery-rails'/'jquery-rails', '~>2.0.0'/g" -i Gemfile 

echo "# adding custom gems for both spree and refinery
gem 'spree', :git => 'git://github.com/spree/spree.git', :branch => '1-2-stable'
gem 'spree_usa_epay'
gem 'spree_skrill'
gem 'refinerycms', :git => 'git://github.com/refinery/refinerycms.git', :branch => '2-0-stable'" >> Gemfile

bundle install 
```

其次，按照[指南中的说明安装炼油厂](http://refinerycms.com/guides/with-an-existing-rails-app)

```
rails generate refinery:cms --fresh-installation 
```

带有分页补丁

```
echo "#Refinery uses the will_paginate gem for pagination, 
# while Spree uses Kaminari.... This fix makes both happy

if defined?(WillPaginate)
  module WillPaginate
    module ActiveRecord
      module RelationMethods
        alias_method :per, :per_page
        alias_method :num_pages, :total_pages
      end
    end 
  end
end" > config/initializers/spreefinery.rb 
```

最终，安装 spree（无需身份验证）

```
bundle exec spree install --git=git://github.com/spree/spree.git --branch=1-2-stable

# use default config except for authentification :
  Would you like to install the default gateways? (yes/no) [yes] 
  Would you like to install the default authentication system? (yes/no) [yes] no
  What is the name of the class representing users within your application? [User] 
  Would you like to run the migrations? (yes/no) [yes] 
  Would you like to load the seed data? (yes/no) [yes] 
  Would you like to load the sample data? (yes/no) [yes] 
```

最后一个命令运行为：

```
 gemfile  spree
 gemfile  spree_usa_epay
 gemfile  spree_skrill
     run  bundle install from "."
  create  config/initializers/spree.rb
  create  config/spree.yml
  remove  public/index.html
  append  public/robots.txt
  create  app/assets/javascripts/store
  create  app/assets/javascripts/admin
  create  app/assets/stylesheets/store
  create  app/assets/stylesheets/admin
  create  app/assets/images/store
  create  app/assets/images/admin
  create  app/assets/javascripts/store/all.js
  create  app/assets/javascripts/admin/all.js
  create  app/assets/stylesheets/store/all.css
  create  app/assets/stylesheets/admin/all.css
  create  app/overrides
  append  config/environment.rb
  append  db/seeds.rb
 copying  migrations
creating  database
 running  migrations
 loading  seed data
    rake  db:seed 
rake aborted!
uninitialized constant User

Tasks: TOP => db:abort_if_pending_migrations => environment
(See full trace by running task with --trace)
     loading  sample data
      insert  config/routes.rb
**************************************************
We added the following line to your application's config/routes.rb file:

mount Spree::Core::Engine, :at => '/'
**************************************************
Spree has been installed successfully. You're all ready to go!

Enjoy! 
```

您可以在 db:seed 步骤中看到错误。

Rails 服务器或 rake db:migrate 再次出现相同的错误。这是完整的回溯：

```
rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
uninitialized constant User
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/activesupport-3.2.8/lib/active_support/core_ext/string/inflections.rb:54:in `constantize'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bundler/gems/spree-dbb0c56a60a9/core/lib/spree/core.rb:52:in `user_class'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bundler/gems/spree-dbb0c56a60a9/promo/app/models/spree/promotion/rules/user.rb:7:in `<class:User>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bundler/gems/spree-dbb0c56a60a9/promo/app/models/spree/promotion/rules/user.rb:4:in `<module:Rules>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bundler/gems/spree-dbb0c56a60a9/promo/app/models/spree/promotion/rules/user.rb:3:in `<class:Promotion>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bundler/gems/spree-dbb0c56a60a9/promo/app/models/spree/promotion/rules/user.rb:2:in `<module:Spree>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bundler/gems/spree-dbb0c56a60a9/promo/app/models/spree/promotion/rules/user.rb:1:in `<top (required)>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bundler/gems/spree-dbb0c56a60a9/promo/lib/spree/promo/engine.rb:44:in `block in <class:Engine>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/emb/Documents/envs/spreefinery/config/environment.rb:5:in `<top (required)>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/application.rb:103:in `require_environment!'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/gems/railties-3.2.8/lib/rails/application.rb:295:in `block (2 levels) in initialize_tasks'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/emb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/emb/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bin/ruby_noexec_wrapper:14:in `eval'
/Users/emb/.rvm/gems/ruby-1.9.3-p194@spreefinery/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate => environment 
```

在这一点上，我需要一些帮助。我发现一些关于这个错误的帖子说明模型用户可能不存在......但是炼油厂明确声明了一个[用户类](https://github.com/refinery/refinerycms/blob/master/authentication/app/models/refinery/user.rb)......所以我有点困惑。

谢谢你的帮助 ！马努

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:55:21.907

终于明白了，看起来很简单.... mmmfff

所以我只需要为关于用户的问题指定**“Refinery::User”**（而不仅仅是“User”）。

```
Would you like to install the default gateways? (yes/no) [yes] 
Would you like to install the default authentication system? (yes/no) [yes] no
What is the name of the class representing users ...? [User] **Refinery::User**
Would you like to run the migrations? (yes/no) [yes] 
Would you like to load the seed data? (yes/no) [yes] 
Would you like to load the sample data? (yes/no) [yes] 
```

如此合乎逻辑:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:47:40.817

您正在尝试安装 spree 并运行标准迁移，但我可以从您的条目中看到，您已明确声明不要安装 spree 附带的默认身份验证系统（就像炼油厂一样基于设计）。因此，在用户模型上运行的一些迁移失败了。

```
> bundle exec spree install --git=git://github.com/spree/spree.git
> --branch=1-2-stable
> 
    > use default config except for authentification :   Would you like to install the default gateways? (yes/no) [yes]    Would you like to
    > install the default authentication system? (yes/no) [yes] no   What is
    > the name of the class representing users within your application?
    > [User]    Would you like to run the migrations? (yes/no) [yes]   
    > Would you like to load the seed data? (yes/no) [yes]    Would you like
    > to load the sample data? (yes/no) [yes] 
```

如果您尝试再次安装，但这次对“您要安装默认身份验证系统吗？”说“是”。那么它应该可以工作。本周我一直在研究一个类似的系统，并且运行良好。您将在您的数据库中获得两个命名空间的用户数据库表，但如果您希望两个系统共享一个身份验证系统，那么我认为您正在进行一些工作并且标准安装程序将不适用。

# reverse-engineering - 我需要通过检查原始内容来识别二进制文件

> ID：12283659
> 
> 赞同：1
> 
> 时间：2012-09-05T14:23:27.130
> 
> 标签：reverse-engineering, binary-data, file-type

我遇到过这个文件 - 并且非常了解它的结构......

512 字节标头（包含字段定义记录的“计数器”。）

768 字节字段定义记录 - 多个实例。显然，后续数据记录中的每个字段都有一个。

数据 - 在 FIXED-LENGTH 记录中（数据记录长度也在标题中。）

我检查了来自同一来源的几个文件——每个文件的前几个字节是不同的——彼此不同。

在我的示例中有一串相同的十六进制字符 - 但这些十六进制字符不代表可读字符串：Š¾ŽY#dË@=qÒã¼dÐ

标头中没有人类可读的字符串。

任何人都知道我在这里有什么样的文件？

**编辑** 昨晚，我能够到达源机器 - 并注意到 - 对于这个文件，至少还有其他三个具有相同基本名称的文件 - 扩展名为：.blb、.blk 和 .idx。

我还没有这些附加文件的副本...

这有帮助吗 - 任何人都知道这是什么类型的“数据库”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:34:17.223

在 GNU/Linux 系统上，我会尝试[`file`](http://en.wikipedia.org/wiki/File_%28command%29)使用下面的命令`libmagic`来识别一堆文件类型。

在 Windows 上，您可以尝试[GnuWin 项目](http://gnuwin32.sourceforge.net/)中的[win32 端口`file`](http://gnuwin32.sourceforge.net/packages/file.htm)（其诊断将与 Linux 版本相同，因为它是同一个库）。

我只记得我们试图从游戏二进制文件中获取资源的美好时光：如果二进制文件包含一些已知的文件类型，那么[资源开膛手](http://www.multiextractor.com/)可能会产生一些结果。

另一方面，如果数据被压缩，则识别压缩方法要困难得多（除了众所周知的`PK`zip 标头）。在这种情况下，您可以通过尝试 Windows 版本的[7zip](http://www.7-zip.org/)存档管理器找到一些东西（安装后，尝试右键单击/打开存档）。它有一些令人惊讶的结果（例如，它甚至可以显示一些安装程序文件的内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:32:45.333

**德比萨姆！！**

当我们最终到达 ACTUAL 服务器时，我们发现数据库引擎正在运行——它清楚地声明了正在使用的数据库类型。

# sql - 再次运行总计。没有 over 子句，没有游标，但增加顺序

> ID：12283661
> 
> 赞同：1
> 
> 时间：2012-09-05T14:23:31.440
> 
> 标签：sql

我仍然无法根据值的递增顺序创建运行总计。Row id 没有实际意义，它只是PK。我的服务器不支持OVER。

```
Row Value
1 3
2 7
3 1
4 2 
```

结果：

```
Row Value
3 1
4 3
1 6
2 13 
```

我已经尝试过自我连接和交叉连接，我指定第二个数量的值（被总结的那个）小于第一个的当前值。我也尝试过使用 having 子句来执行此操作，但是当我以这种方式尝试时总是会引发错误。有人可以解释为什么以这种方式使用它是错误的以及我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:25:40.340

以下是计算总和的一种方法：

```
select row, value,
       (select sum(value) from t t2 where t2.value <= t.value) as runningTotal
from t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:33:25.367

如果你的平台支持递归查询（IIRC 你应该省略微软东西的 RECURSIVE 关键字）。因为 CTE 需要估计“链”的开始/结束，不幸的是，元组需要以某种方式排序（我使用“行”字段；内部 tuple-id 非常适合此目的）：

```
WITH RECURSIVE sums AS (
    -- Terminal part
    SELECT  d0.row
    , d0.value AS value
    , d0.value AS runsum
    FROM data d0
    WHERE NOT EXISTS (
        SELECT * FROM data nx
        WHERE nx.row < d0.row
        )
    UNION
    -- Recursive part
    SELECT  t1.row AS row
    , t1.value AS value
    , t0.runsum + t1.value AS runsum
    FROM data t1
    , sums t0
    WHERE t1.row > t0.row
    AND NOT EXISTS (
        SELECT * FROM data nx
        WHERE nx.row > t0.row
        AND nx.row < t1.row
        )
    )
SELECT * FROM sums
    ; 
```

结果：

```
 row | value | runsum 
-----+-------+--------
   1 |     3 |      3
   2 |     7 |     10
   3 |     1 |     11
   4 |     2 |     13
(4 rows) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:33:29.210

如果你有 sql server 2008，你可以使用 with rollup 命令。

```
select sum(value) from t t2 where t2.value <= t.value with rollup 
```

# soap - mblox soap api - php soap 付款请求不起作用

> ID：12283662
> 
> 赞同：0
> 
> 时间：2012-09-05T14:23:33.950
> 
> 标签：soap, soap-client, php, soapfault

mblox soap api - php soap 付款请求不起作用并给出错误。

我在 subscribe.php 文件中使用如下代码...

```
$client = new SoapClient("https://ngp.us.mblox.com/client-gateway/services?wsdl", array('trace' => 1,  'encoding' => 'UTF-8', 'soap_version' => SOAP_1_2));

$array = array(
'SecurityContext'=>array('userId'=>'aaaaaaaa','password'=>'bbbbbbbb'),
'ClientDetails'=>array('shortcode'=>'234242', 'brandName'=>'aaaaaaaaaa.com', 'programSponsor'=>'aaaaaaaaaa',  'originatingUrl'=>'www.aaaaaaaaaa.com', 'minPageUrl'=>'www.aaaaaaaaaa.com', 'successUrl'=>'www.aaaaaaaaaa.com/subscribConfirm.php', 'cancelUrl'=>'www.aaaaaaaaaa.com', 'tcUrl'=>'www.aaaaaaaaaa.com/terms.html', 'postBackUrl'=>'http://aaaaaaaaaa/subscribe.php'),
'paymentDetails'=>array('paymentType'=>'PSMS', 'amount'=>'9.99', 'currency'=>'USD', 'billingFrequency'=>'MONTHLY'),
'msisdn'=>'243233232',
'serviceId'=>'332',
'operatorId'=>'33343',
'productDescription'=>'Text test',
'optInBody'=>'aaaaaaaaaa',
'browserSessionId'=>'123456',
);

$result = $client->initiatePayment($array); 
```

它在最后一行显示如下错误=>`$result = $client->initiatePayment($array);`

> 致命错误：未捕获的 SoapFault 异常：/aaaaaaaa/Source/developement/PHP/ver1/subscribe.php:97 中的 [(null)] 堆栈跟踪：0 /aaaaaaaa/Source/developement/PHP/ver1/subscribe.php(97) : SoapClient->__call('initiatePayment', Array) #1 /aaaaaaaa/Source/developement/PHP/ver1/subscribe.php(97): SoapClient->initiatePayment(Array) #2 {main} throw in /aaaaaaaa/Source /developement/PHP/ver1/subscribe.php 第 97 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:16:18.560

我使用 curl 让事情正常工作，

我用[这个](https://stackoverflow.com/questions/7120586/soap-request-in-php)

作为参考和代码工作。

谢谢

# ubuntu - 构建面貌失败并出现“不支持正则表达式匹配”

> ID：12283672
> 
> 赞同：6
> 
> 时间：2012-09-05T14:24:03.370
> 
> 标签：ubuntu, ant, build, visage

`visage`从源代码构建时`ant-1.7`使用`ubuntu`它失败并显示消息

```
build.xml:52: No supported regular expression matcher found: java.lang.ClassNotFoundException: org.apache.tools.ant.util.regexp.Jdk14RegexpRegexp 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T14:24:03.370

正则表达式匹配器位于`ant-optional`for 包中`Ubuntu`，安装它可以解决问题。

`sudo apt-get install ant-optional`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-08T00:22:00.687

仅供参考，Centos 中的包名是 ant-apache-regexp

```
yum install ant-apache-regexp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T08:49:53.330

对于 suse 11，它有点长

1.你的蚂蚁确切版本是什么？就我而言，它是 1.7.0

1.  下载 rpm：在我的例子中，包名是 ant-apache-regexp-1.7.0-200.2.noarch.rpm
2.  执行以下

    rpm -i ant-apache-regexp-1.7.0-200.2.noarch.rpm

# android - flash/flex 是否具有用于 Android 图像缩放的“矩阵”？

> ID：12283674
> 
> 赞同：0
> 
> 时间：2012-09-05T14:24:07.613
> 
> 标签：android, flash, apache-flex, matrix

我编写了一个 Android 应用程序，用于`android.graphics.Matrix`缩放/旋转/移动图像。最重要的是 9 个值`matrix`：

> MSCALE_X, MSKEW_X, MTRANS_X, MSKEW_Y, MSCALE_Y, MTRANS_Y, MPERSP_0, MPERSP_1, MPERSP_2

现在我想在 flash/flex 中开发一个相同的应用程序。我想知道 flash/flex 是否与`matrix`Android 相同？如果我从 Android 的矩阵中得到 9 个值，我可以直接在 flash/flex 中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:32:26.720

是的，它确实有一个矩阵类。

[矩阵](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)类 的 ASDocs 。

还有一个[Matrix3D 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix3D.html)

我不知道这在功能方面与 Android 类有何关系。

# opencv - 带有 OpenCV 的增强现实 SDK

> ID：12283675
> 
> 赞同：95
> 
> 时间：2012-09-05T14:24:09.480
> 
> 标签：opencv, augmented-reality

我正在 OpenCV 上开发增强现实 SDK。我在查找有关该主题的教程时遇到了一些问题，包括要遵循的步骤、可能的算法、快速高效的实时性能编码等。

到目前为止，我已经收集了下一个信息和有用的链接。

# OpenCV 安装

下载[最新发布版本](http://opencv.org/downloads.html)。

[您可以在此处](http://docs.opencv.org/doc/tutorials/introduction/table_of_content_introduction/table_of_content_introduction.html)找到安装指南（平台：linux、mac、windows、java、android、iOS）。

在线[文档](http://opencv.org/documentation.html)。

# 增强现实

对于初学者来说[，这里](http://dsynflo.blogspot.com.es/2010/06/simplar-augmented-reality-for-opencv.html)是 OpenCV 中的一个简单的增强现实代码。这是一个好的开始。

对于任何寻找设计良好的最先进 SDK 的人，我发现了一些通用步骤，每个基于标记跟踪的增强现实都应该具备，考虑到 OpenCV 功能。

1.  主程序：创建所有类，初始化，从视频中[捕获](https://stackoverflow.com/a/10697379/744859)帧。

2.  AR_Engine 类：控制增强现实应用程序的各个部分。应该有2个主要状态：

    *   **检测**：尝试检测场景中的标记
    *   **跟踪**：一旦检测到，使用较低的计算技术来跟踪即将到来的帧中的标记。

还应该有一些算法可以在每一帧中找到相机的位置和方向。这是通过检测场景中检测到的标记与我们离线处理的标记的 2D 图像之间的单应变换来实现的。[此处](http://cvlab.epfl.ch/~lepetit/papers/lepetit_ftcgv05.pdf)对此方法的说明（第 18 页）。姿势估计的主要步骤是：

1.  **加载相机内在参数**。之前通过校准离线提取。 ![内在参数](../Images/8dbeada5f5767b866acfd0262de9c69f.png)

2.  **加载要跟踪的图案**（标记）：这是我们要跟踪的平面标记的图像。有必要为此模式提取特征并生成描述符（[关键点](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#keypoint)），以便稍后我们可以与场景中的特征进行比较。此任务的算法：

    *   [筛](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#sift)
    *   [快速地](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#fast)
    *   [冲浪](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#surf)
3.  对于每帧更新，运行检测算法以**从场景中提取特征**并生成描述符。同样，我们有几个选择。

    *   筛
    *   快速地
    *   冲浪
    *   [FREAK](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#freak)：一种新方法（2012 年）被认为是最快的。
    *   [宝珠](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#orb)
4.  查找模式和场景描述符之间的**匹配。**

    *   [FLANN 匹配器](http://docs.opencv.org/modules/flann/doc/flann_fast_approximate_nearest_neighbor_search.html#flann-index)
5.  从这些匹配中找到[Homography](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#findhomography)矩阵。RANSAC 之前可用于查找匹配集中的异常值/异常值。

6.  从单应性中提取**相机姿势。**

    *   [来自 Homography](https://stackoverflow.com/a/10781165/744859)的 Pose 示例代码。
    *   [来自 Pose](https://stackoverflow.com/a/10750648/744859)的 Homography 示例代码。

# 完整示例：

*   [阿鲁科](http://sourceforge.net/projects/aruco/)
*   [掌握 OpenCV 示例](https://github.com/MasteringOpenCV/code)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-05T15:19:21.670

由于 AR 应用程序通常在移动设备上运行，您还可以考虑其他功能检测器/描述符：

*   [怪物](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#freak)
*   [宝珠](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#orb)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-05T16:04:55.193

通常，如果您可以选择标记，您首先使用边缘检测器检测方形目标，然后使用霍夫或简单的轮廓 - 然后从内部设计中识别特定标记。而不是使用一般的点匹配器。

查看[Aruco](http://www.uco.es/investiga/grupos/ava/node/26)以获得编写良好的示例代码。

# r - 在图的顶部和右侧叠加直方图

> ID：12283676
> 
> 赞同：1
> 
> 时间：2012-09-05T14:24:19.060
> 
> 标签：r, plot, overlay, histogram

我正在尝试创建一个类似于此处询问的图： [Rotate histogram in R or overlay a density in a barplot](https://stackoverflow.com/questions/11022675/rotate-histogram-in-r-or-overlay-a-density-in-a-barplot)

我用热图替换散点图，保持其他一切不变，没有任何运气。我试图修改不同的参数，但它没有帮助。

```
scatterBarNorm <- function(x, dcol="blue", lhist=20, num.dnorm=5*lhist, ...){
  ## check input
  stopifnot(ncol(x)==2)
  ## set up layout and graphical parameters
  layMat <- matrix(c(2,0,1,3), ncol=2, byrow=TRUE)
  layout(layMat, widths=c(5/7, 2/7), heights=c(2/7, 5/7))
  ospc <- 0.5 # outer space
  pext <- 4 # par extension down and to the left
  bspc <- 1 # space between scatter plot and bar plots
  par. <- par(mar=c(pext, pext, bspc, bspc),
              oma=rep(ospc, 4)) # plot parameters

  ## scatter plot (removed this)
  #plot(x, xlim=range(x[,1]), ylim=range(x[,2]), ...)
  ##added this
  heatmap(x, Rowv=NA, Colv=NA)

  ## 3) determine barplot and height parameter
  ## histogram (for barplot-ting the density)
  xhist <- hist(x[,1], plot=FALSE, breaks=seq(from=min(x[,1]), to=max(x[,1]),
                                              length.out=lhist))
  yhist <- hist(x[,2], plot=FALSE, breaks=seq(from=min(x[,2]), to=max(x[,2]),
                                              length.out=lhist)) # note: this uses probability=TRUE
  ## determine the plot range and all the things needed for the barplots and lines
  xx <- seq(min(x[,1]), max(x[,1]), length.out=num.dnorm) # evaluation points for the overlaid density
  xy <- dnorm(xx, mean=mean(x[,1]), sd=sd(x[,1])) # density points
  yx <- seq(min(x[,2]), max(x[,2]), length.out=num.dnorm)
  yy <- dnorm(yx, mean=mean(x[,2]), sd=sd(x[,2]))
  ## barplot and line for x (top)
  par(mar=c(0, pext, 0, 0))
  barplot(xhist$density, axes=FALSE, ylim=c(0, max(xhist$density, xy)),
          space=0) # barplot
  lines(seq(from=0, to=lhist-1, length.out=num.dnorm), xy, col=dcol) # line
  ## barplot and line for y (right)
  par(mar=c(pext, 0, 0, 0))
  barplot(yhist$density, axes=FALSE, xlim=c(0, max(yhist$density, yy)),
          space=0, horiz=TRUE) # barplot
  lines(yy, seq(from=0, to=lhist-1, length.out=num.dnorm), col=dcol) # line
  ## restore parameters
  par(par.)
}

require(mvtnorm)
X <- abs(rmvnorm(1000, c(0,0), matrix(c(1, 0.8, 0.8, 1), 2, 2)))
scatterBarNorm(X, xlab=expression(italic(X[1])), ylab=expression(italic(X[2]))) 
```

# ms-access - 强制 zip 打开解压缩到特定位置

> ID：12283680
> 
> 赞同：0
> 
> 时间：2012-09-05T14:24:37.203
> 
> 标签：ms-access, vba, unzip, winzip

我正在使用 excel（用于批量数据输入）和 Access（用于存放数据）制作一个非常基本的数据输入和数据库系统应用程序。我玩以将其作为 zip 文件分发。为了让它工作，我需要文件结构保持不变并解压缩到 c:/ 驱动器。无论如何强制zip文件解压缩到特定位置？

我需要这个的原因是自动上传输入的数据。据我所知，在 Access VBA 中，您必须在 VBA 中指定完整的文件路径才能导入数据。

***更新

感谢 Remou 让我走出困境。只是为了后代的缘故，这就是我解决它的方法。不是最漂亮的代码，但它可以完成工作。首先是导入功能，然后是导出功能。

导入时，上传的文件仍然需要命名约定，但它们可以来自任何地方。该文件名与它们将存储在其中的表相关。在 excel 表的后端，数据输入表分为两部分（Rec 和 Occ）

代码如下：

函数 importData_Click(Optional varDirectory As String, _ Optional varTitleForDialog As String) As String

```
Dim strFilter As String
Dim lngFlags As Long
Dim varFileName As String
Dim strFileName As String
Dim strTableName As String
Dim strColumnName As String
Dim The_Year As Long
Dim occNumber As Long

'Get combobox value and assign relavent values to occNumber
The_Year = Forms![Upload Data]!Year_Combo.value

'Ask the to check value
If MsgBox("Uploading " & The_Year & " data" & vbCrLf & "Continue?", VbMsgBoxStyle.vbYesNo) = 7 Then
    Exit Function
End If

If The_Year = 2012 Then
    occNumber = 1000
    ElseIf The_Year = 2013 Then
    occNumber = 2000
End If

' Specify that the chosen file must already exist,
' don't change directories when you're done
' Also, don't bother displaying
' the read-only box. It'll only confuse people.
lngFlags = ahtOFN_FILEMUSTEXIST Or _
            ahtOFN_HIDEREADONLY Or ahtOFN_NOCHANGEDIR
If IsMissing(varDirectory) Then
    varDirectory = ""
End If
If IsMissing(varTitleForDialog) Then
    varTitleForDialog = ""
End If

strFilter = ahtAddFilterItem("Excel Files (*.xlsx)", "*.xlsx")

varFileName = ahtCommonFileOpenSave( _
                                openFile:=True, _
                                InitialDir:=varDirectory, _
                                Filter:=strFilter, _
                                Flags:=lngFlags, _
                                DialogTitle:=varTitleForDialog)
If Not IsNull(varFileName) Then
    varFileName = TrimNull(varFileName)

End If
importData_Click = varFileName

'Sets filename
strFileName = Dir(varFileName)

'Sets TableName
strTableName = Left(strFileName, 4)

If IsNull(strFileName) Then
    MsgBox "Upload cancelled"
    Exit Function
End If

    'Checks naming convetions of filenames

    If strTableName Like "*MN" Or strTableName Like "*OP" Or strTableName Like "*DA" Or strTableName Like "*TR" Then

            'Checks if data is Opportunistic
            If strTableName Like "*OP" Then

            strColumnName = "Year_" & strTableName

                        'Checks to see if that year's data already exists
                        If DLookup(strColumnName, strTableName & "_Rec", "" & strColumnName & " = " & The_Year & "") Then

                        MsgBox "2012 data is already present"

                        ElseIf DLookup(strColumnName, strTableName & "_Rec", "" & strColumnName & " = " & The_Year & "") Then

                        MsgBox "2013 data is already present"

                        Else

                        'Uploads data to relevant table
                        DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel12Xml, strTableName & "_Rec", varFileName, True, "Rec_Prep$"

                        MsgBox "Upload successful"

                        End If

            Exit Function

            Else

            strColumnName = "Occasion_" & strTableName

                        'Checks Occasions to see if that year exists
                        If DLookup(strColumnName, strTableName & "_Rec", "" & strColumnName & " = " & occNumber & "") Then

                        MsgBox "2012 data is already present"

                        ElseIf DLookup(strColumnName, strTableName & "_Rec", "" & strColumnName & " = " & occNumber & "") Then

                        MsgBox "2013 data is already present"

                        Else
                        'Uploads to Records table and Occasion table
                        DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel12Xml, strTableName & "_Occ", varFileName, True, "Occ_Prep$"

                        DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel12Xml, strTableName & "_Rec", varFileName, True, "Rec_Prep$"

                        MsgBox "Upload successful"

                        End If

            End If

    Else

    MsgBox "Your file is named incorrectly! & vbCrLf & Please refer to the Data Dictionary & vbCrLf & for correct naming conventions"

    Exit Function

    End If

'DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, "BaMN_AllData", strSaveFileName

End Function

Private Function TrimNull(ByVal strItem As String) As String
Dim intPos As Integer

intPos = InStr(strItem, vbNullChar)
If intPos > 0 Then
    TrimNull = Left(strItem, intPos - 1)
Else
    TrimNull = strItem
End If
End Function 
```

然后导出使用命令按钮的名称（匹配表名称）导出到用户想要的任何位置：

```
 Dim queryYear As Variant

'Function to export data to location of users choice.  Query name is automatically     detected from the control button used
'Year is derived from the combobox value on [Extract Data] form, null value defaults to all years.
 Function exportData_Click()

Dim strFilter As String
Dim strSaveFileName As String
Dim The_Year As Variant

Dim ctlCurrentControl As Control
Dim queryName As String

'Get the name of the control button clicked (corresponds to query name to be run)
Set ctlCurrentControl = Screen.ActiveControl
queryName = ctlCurrentControl.Name

'Get combobox value and assign relavent values to The_Year
The_Year = Forms![Extract Data]!Extract_Year.value

'Change the year from a variant to what we need in the SQL

If The_Year Like "20*" Then
    The_Year = CInt(The_Year)
    MsgBox The_Year & "Data Type = " & VarType(The_Year)
Else: The_Year = "*"
MsgBox The_Year & "Data Type = " & VarType(The_Year)
End If

'Set queryYear variable
setYear (The_Year)

'Check the variable is correct
'MsgBox getYear()

'Open the Save as Dialog to choose location of query save

strFilter = ahtAddFilterItem("Excel Files (*.xlsx)", "*.xlsx")

strSaveFileName = ahtCommonFileOpenSave( _
                                openFile:=False, _
                                Filter:=strFilter, _
                Flags:=ahtOFN_OVERWRITEPROMPT Or ahtOFN_READONLY)

DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, queryName, strSaveFileName

End Function
 'Function to set queryYear used in data extraction queries
Public Function setYear(The_Year As Variant)

 queryYear = The_Year

End Function

 'Function to get queryYear used in data extraction queries
 Function getYear()

  getYear = queryYear

 End Function 
```

需要注意的是，文件保存和文件打开代码部分不是我的。它们来自 Ken Getz，整个代码可以在这里找到：

[http://access.mvps.org/access/api/api0001.htm](http://access.mvps.org/access/api/api0001.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:27:41.263

最好使用应用程序路径（例如 currentproject.Path ）或要求用户指定数据存储的位置，而不是尝试在用户可能无法使用的位置强制安装。根本不需要硬编码路径。在 Access 中，您可以将与项目相关的信息存储在表中，包括数据路径。您可以从 Excel 中查找 MS Access。

# c - 创建 C 子字符串：使用赋值运算符 VS strncopy 循环，哪个更好？

> ID：12283681
> 
> 赞同：4
> 
> 时间：2012-09-05T14:24:43.950
> 
> 标签：c, substring, assignment-operator, strncpy

这可能有点毫无意义，但我很好奇你们对此有何看法。我正在使用指针迭代一个字符串，并希望从中提取一个短子字符串（将子字符串放入预先分配的临时数组中）。是否有任何理由在 strncopy 上使用赋值，反之亦然？IE

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{   char orig[]  = "Hello. I am looking for Molly.";

    /* Strings to store the copies
     * Pretend that strings had some prior value, ensure null-termination */
    char cpy1[4] = "huh\0";
    char cpy2[4] = "huh\0";

    /* Pointer to simulate iteration over a string */
    char *startptr = orig + 2;
    int length = 3;
    int i;

    /* Using strncopy */
    strncpy(cpy1, startptr, length);

    /* Using assignment operator */
    for (i = 0; i < length; i++)
    {   cpy2[i] = *(startptr + i); 
    }   

    /* Display Results */
    printf("strncpy result:\n");
    printf("%s\n\n", cpy1);
    printf("loop result:\n");
    printf("%s\n", cpy2);
} 
```

在我看来， strncopy 的输入更少而且更容易阅读，但我看到人们提倡使用循环。有区别吗？这还重要吗？假设这是针对 i (0 < i < 5) 的小值，并且保证了空终止。

参考：[c 中的字符串](https://stackoverflow.com/questions/2114377/strings-in-c-how-to-get-substring)，如何获取子字符串，[如何获取 C 中的子字符串，](https://stackoverflow.com/questions/6679204/how-to-get-substring-in-c) strncpy [和 memcpy 之间的区别？](https://stackoverflow.com/questions/4593907/difference-between-strncpy-and-memcpy)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:24:06.277

`strncpy(char * dst, char *src, size_t len)`有两个特殊的性质：

*   if `(strlen(src) >= len)`: 结果字符串不会以 nul 结尾。
*   if `(strlen(src) < len)`: 字符串的末尾将用 '\0' 填充/填充。

第一个属性将迫使您实际检查是否`(strlen(src) >= len)`并采取适当的行动。（或将最终字符粗暴地设置为 nul `dst[len-1] = '\0';`，就像上面的@Gilles 所做的那样）另一个属性并不是特别危险，但可能会溢出很多循环。想象：

```
char buff[10000];
strncpy(buff, "Hello!", sizeof buff); 
```

它触及 10000 个字节，其中只需要触及 7 个字节。

我的建议：

*   A：如果你知道尺寸，就做`memcpy(dst,src,len); dst[len] = 0;`
*   B：如果您不知道大小，请以某种方式获取它们（使用 strlen 和/或 sizeof 和/或为动态分配的内存分配的大小）。然后：转到上面的 A。

由于为了安全操作 strncpy() 版本已经需要知道大小（以及对它们的检查！），所以 memcpy() 版本并不比 strncpy() 版本更复杂或更危险。（从技术上讲，它甚至更快；因为 memcpy() 不必检查 '\0' 字节）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:29:06.950

虽然这似乎违反直觉，但复制字符串的方法比在循环中使用赋值运算符更优化。例如，IA-32 为字符串处理提供了,等`REP`前缀`MOVS`，这些前缀比一次复制一个字符的循环要快得多。实现或者可以选择使用这样的硬件优化代码来获得更好的性能。`STOS``CMPS``strncpy``strcpy`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:29:05.800

只要您知道您的长度在“范围内”并且所有内容都正确地以 nul 终止，那就`strncpy`更好了。

如果您需要在那里进行长度检查等，循环可能会更方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:38:19.310

带有分配的循环是一个坏主意，因为您正在重新发明轮子。您可能会犯错误，并且您的代码可能比标准库中的代码效率低（某些处理器已针对内存副本优化指令，并且优化的实现通常至少在可能的情况下逐字复制）。

但是，请注意，这`strncpy`不是一个全面的轮子。特别是，如果字符串太长，它不会将空字节附加到目标。BSD 功能[`strlcpy`](http://www.openbsd.org/cgi-bin/man.cgi?query=strlcpy&sektion=3)设计得更好，但并非随处可用。Even`strlcpy` [不是灵丹妙药](https://stackoverflow.com/questions/2114896/why-is-strlcpy-and-strlcat-considered-to-be-insecure)：您需要正确设置缓冲区大小，并注意它可能会截断字符串。

复制字符串的一种可移植方法（如果字符串太长则截断）是调用`strncpy`并始终添加终止空字节。如果缓冲区是一个数组：

```
char buffer[BUFFER_SIZE];
strncpy(buffer, source, sizeof(buffer)-1);
buf[sizeof(buffer)-1] = 0; 
```

如果缓冲区由指针和大小给出：

```
strncpy(buf, source, buffer_size-1);
buf[buffer_size-1] = 0; 
```

# ios - 已知的类型名称未知？

> ID：12283685
> 
> 赞同：4
> 
> 时间：2012-09-05T14:24:51.127
> 
> 标签：ios, xcode

Xcode 突然出现了这个错误：“未知类型名称”

我将解释：我的 StoriesViewController.h：

```
#import <UIKit/UIKit.h>
#import "Stories.h"

@interface StoriesViewController : UIViewController <UITextViewDelegate>

@property (strong) Stories *story; //Here it goes- "Unknown type name `Stories`"
@property (weak) IBOutlet UITextView *storyView;
@end 
```

在我的 Stories.h 中：

```
#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface Stories : UIDocument

@property (strong) NSString * storyContent;

@end 
```

再次，出乎意料。

提前致谢。

编辑：

在我的 ViewController.h 中：

```
#import <UIKit/UIKit.h>
#import "Stories.h"
#import "StoriesViewController.h"
#import "StoriesPickerViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController : UIViewController <UITextFieldDelegate,  UIAlertViewDelegate> {

}

@end 
```

NB @class 引发大量 ARC 问题。

我删除了对 ViewController.h 的无用引用，工作正常。解决了！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T14:47:51.760

你有一个[循环引用](http://en.wikipedia.org/wiki/Circular_reference)问题。

发生的事情是，当您加载它时`ViewController`，它会通过它的导入，它会加载`Stories.h`，它会加载它的导入并返回到`ViewController.h`，因此您会陷入无限循环。

删除其中一个冲突的导入，或使用[前向类声明](http://www-subatech.in2p3.fr/~photons/subatech/soft/carnac/CPP-INC-1.shtml)（该示例适用于 C++，请参见[此处](https://stackoverflow.com/questions/4862717/can-anyone-give-example-of-forward-declaration-in-objective-c-for-a-normal-class)以获取 Objective-C 的示例）

# php - 使用 PHP CURL 登录 HP ALM REST API

> ID：12283687
> 
> 赞同：4
> 
> 时间：2012-09-05T14:24:57.463
> 
> 标签：php, rest, hp-quality-center

我是 REST 新手，我正在尝试开发一个 Web 应用程序，该应用程序将从一个 sid（已经涵盖）连接到 JIRA，从另一侧连接到 HP 的 ALM。

我现在尝试完成的是使用 PHP 对 ALM 进行基本身份验证，但似乎无法取得进展。
这是我的代码：

```
$handle=curl_init('http://192.168.1.7:8081');
$headers = array(
    'Accept: application/xml',
    'Content-Type: application/xml',
    'Authorization: Basic YWRtaW46MTIzNA==',
);

$username='admin';
$password='1234';

$url = 'http://192.168.1.7:8081/qcbin/authentication-point/login.jsp';

curl_setopt_array(
$handle,
array(
CURLOPT_URL=>'http://192.168.1.7:8081/qcbin/rest/domains/default/projects/Ticomsoft/defects?login-form-required=y',
//CURLOPT_COOKIEFILE=>$ckfile,
CURLOPT_POST=>true,
//CURLOPT_HTTPGET =>true,
CURLOPT_COOKIEJAR=>$ckfile,
CURLOPT_VERBOSE=>1,
//CURLOPT_POSTFIELDS=>,
//CURLOPT_GETFIELDS=>'j_username=admin&j_password=1234&redirect-url=http://192.168.1.7:8081/myUiResource.jsps',
CURLOPT_SSL_VERIFYHOST=> 0,
CURLOPT_SSL_VERIFYPEER=> 0,
CURLOPT_RETURNTRANSFER=>true,
CURLOPT_FOLLOWLOCATION=>true,
CURLOPT_HEADER=>false,
CURLOPT_HTTPHEADER=> $headers,
CURLOPT_AUTOREFERER=>true
//CURLOPT_COOKIE=>
//CURLOPT_USERPWD=>"admin:yahala"
//CURLOPT_CUSTOMREQUEST=>"POST"
)

);
$result=curl_exec($handle);
$ch_error = curl_error($handle);
$response = curl_getinfo($handle);

print_r($response);
if ($ch_error) {
    echo "cURL Error: $ch_error";
} else {
    //var_dump(json_decode($result, true));
    echo $result;   
}

curl_close($handle);

?> 
```

正如你所看到的，随着我的反复试验，有很多垃圾。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T12:54:16.407

开始了。我按照 QC Rest API 文档研究了 QC 期望发出请求的顺序。我已经针对 ALM11 对其进行了测试。我也是 cURL 的新手，但这应该让你进入并开始工作......

```
<?php

//create a new cURL resource
$qc = curl_init();
//create a cookie file
$ckfile = tempnam ("/tmp", "CURLCOOKIE");

//set URL and other appropriate options
curl_setopt($qc, CURLOPT_URL, "http://qualityCenter:8080/qcbin/rest/is-authenticated");
curl_setopt($qc, CURLOPT_HEADER, 0);
curl_setopt($qc, CURLOPT_HTTPGET, 1);
curl_setopt($qc, CURLOPT_RETURNTRANSFER, 1);

//grab the URL and pass it to the browser
$result = curl_exec($qc);
$response = curl_getinfo($qc);

//401 Not authenticated (as expected)
//We need to pass the Authorization: Basic headers to authenticate url with the 
//Correct credentials.
//Store the returned cookfile into $ckfile
//Then use the cookie when we need it......
if($response[http_code] == '401')
{

        $url = "http://qualityCenter:8080/qcbin/authentication-point/authenticate";
        $credentials = "qc_username:qc_password";
        $headers = array("GET /HTTP/1.1","Authorization: Basic ". base64_encode($credentials));

    curl_setopt($qc, CURLOPT_URL, $url);
    curl_setopt($qc, CURLOPT_HTTPGET,1); //Not sure we need these again as set above?
    curl_setopt($qc, CURLOPT_HTTPHEADER, $headers);
    //Set the cookie
        curl_setopt($qc, CURLOPT_COOKIEJAR, $ckfile);
        curl_setopt($qc, CURLOPT_RETURNTRANSFER, true);

        $result = curl_exec($qc);
        $response = curl_getinfo($qc);

       //The response will be 200   
       if($response[http_code] == '200')
       {
        //Use the cookie for subsequent calls...
        curl_setopt($qc, CURLOPT_COOKIEFILE, $ckfile);
        curl_setopt($qc, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($qc, CURLOPT_URL, "http://qualityCenter:8080/qcbin/rest/domains/Your_Domain/projects/Your_Project/defects");

    //In this example we are retrieving the xml so...
        $xml = simplexml_load_string(curl_exec($qc));
        print_r($xml);

    //Call Logout
        logout($qc,"http://qualityCenter:8080/qcbin/authentication-point/logout");

       }
       else
       {
        echo "Authentication failed";
       }

    }
else
{
        echo "Not sure what happened?!";
}

//Close cURL resource, and free up system resources
curl_close($qc);

function logout($qc, $url)
{
    curl_setopt($qc, CURLOPT_URL, $url);
        curl_setopt($qc, CURLOPT_HEADER, 0);
        curl_setopt($qc, CURLOPT_HTTPGET,1);
        curl_setopt($qc, CURLOPT_RETURNTRANSFER, 1);

    //grab the URL and pass it to the browser
    $result = curl_exec($qc);
}

?> 
```

让我知道它是否有效！

谢谢，

富有的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-27T17:45:58.143

要记住的重要事项之一是在进行身份验证后，您必须 使用**cookie** LWSSO执行以下**POST /qcbin/rest/site-session**

 **这将返回 执行任何操作所需的**QCSession**和**XSRF-TOKEN**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:29:06.993

这是我在 Perl 中针对此问题的解决方案：首先执行身份验证步骤，为下一个 libcurl 请求设置 cookie，然后可以毫无问题地执行。这是后台作业的版本。对于对话应用程序，凭据可以从用户的输入中传递。此外，我必须使用 https 而不是 http 来执行此操作。Perl 程序还展示了如何为 https 指示 curl（在[http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https上有一个非常好的方法-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)）。

```
#!/usr/bin/perl 

# This script accesses, as a proxy, the REST API of the HP quality center
# Running it without query parameter, the complete list of defects is returned
# A query parameter, e.g. 'query={id[2283]}' will be passed as is to the HP QC API

# We are using the libcurl wrapper WWW::Curl::Easy
# The access is https, so a certificate has to be passed to libcurl
# The main point for using curl, however, is the authentication procedure:
# HP requires a preparative call to a special authentication service
# The authentication ticket will then be passed back as a cookie
# Only with this ticket, the real GET request on the defects can be performed

use WWW::Curl::Easy;

use strict;
use warnings;

use constant {
  URL_QC_DEFECTS   => "https://[QC DOMAIN]/qcbin/rest/domains/[DOMAIN]/projects/[PROJECT]/defects/",
  URL_QC_AUTH      => "https://[QC DOMAIN]/qcbin/authentication-point/authenticate",
  PATH_CERT        => "[PATH TO CREDENTIALS]"  # contains certificate and credentials, see below
  };

doRequest( URL_QC_DEFECTS . "?" . $ENV{QUERY_STRING} );
return 0;

sub doRequest {
  my ($url,$cookies,$response) = (shift,"","");
  eval {
    my $curl = get_curl_instance(\$cookies,\$response);
    authenticate( $curl );
    get( $curl, $url );
    if ($response =~ /.*?(<\?xml\b.*)/s) {
      print "Content-Type:text/xml\n\n";
      print $1;
      }
    else {
      die "The response from HP QC is not in XML format";
      }
    };
  if ($@) {
    print "Content-Type:text/plain\n\n$@";
    }
  }

sub get_curl_instance {

  my ($cookie,$response) = @_;

  my $curl = WWW::Curl::Easy->new( );  

  open( my $cookiefile, ">", $cookie) or die "$!";
  $curl->setopt( CURLOPT_COOKIEFILE, $cookiefile );  
  open( my $responsefile, ">", $response) or die "$!";  
  $curl->setopt( CURLOPT_WRITEDATA, $responsefile );  
  $curl->setopt( CURLOPT_SSL_VERIFYPEER, 1);
  $curl->setopt( CURLOPT_SSL_VERIFYHOST, 2);
  $curl->setopt( CURLOPT_CAINFO, cert() );  
  $curl->setopt( CURLOPT_FOLLOWLOCATION, 1 );
  return $curl;
  }

sub authenticate {
  my $curl = shift;
  my ($rc,$status);
  $curl->setopt( CURLOPT_URL, URL_QC_AUTH );
  $curl->setopt( CURLOPT_USERPWD, cred( ) );  
  if (($rc = $curl->perform( )) != 0) {
    die "Error Code $rc in curl->perform( ) on URL " . URL_QC_AUTH;
    }
  if (($status=$curl->getinfo(CURLINFO_HTTP_CODE))!="200") {
    die "HTTP-Statuscode $status from authentication call";
    }   
  }

sub  get {
  my ($curl,$url) = @_;
  my ($rc,$status);
  $curl->setopt( CURLOPT_URL, $url );
  $curl->setopt( CURLOPT_HEADER, { Accept => "text/xml" } );
  if (($rc = $curl->perform( )) != 0) {
    die "Error Code $rc from defects request";
    }
  if (($status=$curl->getinfo(CURLINFO_HTTP_CODE))!="200") {
    die "HTTP Statuscode $status from defects request";
    }   
  }

sub cred {
  open CRED, PATH_CERT . '/.cred_qc' or die "Can't open credentials file: $!";
  chomp( my $cred = <CRED>); 
  close CRED;
  return $cred;
  }

sub cert {
  return PATH_CERT . '/qc.migros.net.crt';
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T18:19:05.793

作为 Sohaib 关于在身份验证后需要 POST 到 /qcbin/rest/site-session 的答案的替代方法，您可以通过 POST 到 /qcbin/api/authentication/sign-in 一步完成，如下所示：

“有四个 cookie 返回，并且在 ALM 12.53 中，身份验证点已更改（但文档未更改，因此会将您发送到错误的位置！）

所以，发送一个带有 BASIC 身份验证的 POST 请求，base64 编码的用户名/密码到 /qcbin/api/authentication/sign-in，你会得到

*   LWSSO_COOKIE_KEY
*   质量控制会议
*   ALM_USER
*   XSRF_TOKEN

将这些包含在您所有后续的GETS和PUTS中，您应该没问题。”

（此答案取自[https://community.microfocus.com/t5/ALM-QC-User-Discussions/Authentication-fails-when-trying-to-pull-data-from-ALM-server/td-p/ 940921](https://community.microfocus.com/t5/ALM-QC-User-Discussions/Authentication-fails-when-trying-to-pull-data-from-ALM-server/td-p/940921)，并在类似的情况下为我工作）。**

# .net - [XmlText] 序列化可以为空吗？

> ID：12283692
> 
> 赞同：7
> 
> 时间：2012-09-05T14:25:05.913
> 
> 标签：.net, xmlserializer

我有一个包含我希望用**XmlSerializer**序列化的数组的类：

```
[XmlArray("properties")]
[XmlArrayItem("property", IsNullable = true)]
public List<Property> Properties { get; set; } 
```

`Property`是一个包含一个属性和一些的类`XmlText`：

```
[XmlAttribute("name")]
public string Name { get; set; }

[XmlText]
public string Value { get; set; } 
```

问题是当`Value`为空时，它序列化为一个空字符串：

```
<property name="foo" /> 
```

而不是*null*。我正在寻找要完全省略的值，或者看起来像这样：

```
<property name="foo" xsi:nil="true" /> 
```

是否可以根据其`XmlText`值将列表中的元素清空？我真的想避免自定义序列化，但在这种情况下，也许其他一些序列化框架会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T07:08:40.847

[在XmlArrayItemAttribute](http://msdn.microsoft.com/en-us/library/ck99b660)类中使用[IsNullable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlarrayitemattribute.isnullable) =true 。举个例子。

```
[XmlRoot("Root")]
public class Root
{
    [XmlArrayItem("Element", IsNullable = true)]
    public string[] Elements { get; set; }
} 
```

Visual Studion 2012 和 .Net 4.5 中的一些示例代码：

```
using System.Xml.Serialization;

...

// Test object
Root root;
root = new Root();
root.Elements = new string[] { null, "abc" };

using(MemoryStream stream = new MemoryStream())
{
    XmlSerializer xmlSerializer = new XmlSerializer(typeof(Root));
    xmlSerializer.Serialize(stream, root);

    Console.WriteLine(new string(Encoding.UTF8.GetChars(stream.GetBuffer())));
} 
```

输出是（为清楚起见添加了换行符）：

```
<?xml version="1.0"?>
<Root 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Element>
    <string xsi:nil="true" />
    <string>abc</string>
  </Element>
</Root> 
```

并且具有复杂类型（也在 Visual Studio 2012 上的 .Net 4.5 中）：

```
 public class MyProperty
    {
        public string Foo { get; set; }
    }

    [XmlRoot("Root")]
    public class Root
    {
        [XmlArrayItem("Element", IsNullable = true)]
        public MyProperty[] Elements { get; set; }
    }

    ,,,

    Root root;
    root = new Root();
    root.Elements = new MyProperty[] { null, new MyProperty{ Foo = "bar" } };

    // Other code is as above 
```

使用上面相同的代码会产生：

```
<?xml version="1.0"?>
<Root 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Elements>
    <Element xsi:nil="true" />
    <Element>
      <Foo>bar</Foo>
    </Element>
  </Elements>
</Root> 
```

还要记住，类型必须是引用类型（例如，不是结构）才能写出`xsi:nil=true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T04:27:18.923

一个想法 - 您可以使用“NameSpecified”，但在 get 中检查“Value”的值。意思是，如果 Value 为 null，则 Name 也不会输出。

不幸的是，您仍然会有一个 null 属性 xml 元素；我希望这更能被接受...

```
class Program
{
    static void Main(string[] args)
    {
        ObjectWithProperties obj = new ObjectWithProperties()
        {
            Properties = new List<Property>()
        };

        Property p = new Property();
        p.Name = "This WILL Show Up";
        p.Value = "I'm here";
        obj.Properties.Add(p);

        Property p1 = new Property();
        p1.Name = "This Will NOT Show Up";
        obj.Properties.Add(p1);

        Console.WriteLine(ToXmlString(obj));
        Console.ReadLine();
    }

    public static string ToXmlString(object value)
    {
        if (value == null) return string.Empty;
        XmlSerializer ser = new XmlSerializer(value.GetType());
        MemoryStream ms = new MemoryStream();
        ser.Serialize(ms, value);
        return Encoding.UTF8.GetString(ms.ToArray());
    }

}
public class ObjectWithProperties
{
    [XmlArray("properties")]
    [XmlArrayItem("property", IsNullable = true)]
    public List<Property> Properties { get; set; }
}

public class Property
{
    [XmlAttribute("name")]
    public string Name { get; set; }

    [XmlIgnore]
    public bool NameSpecified
    {
        get { return !string.IsNullOrEmpty(Value); }
    }

    [XmlText]
    public string Value { get; set; }

} 
```

# reporting-services - SSRS 2012 报告呈现问题

> ID：12283695
> 
> 赞同：0
> 
> 时间：2012-09-05T14:25:13.687
> 
> 标签：reporting-services, rendering, subscription, mhtml

我正在通过电子邮件发送设置关于 SSRS 2012 的报告。

我希望报告显示在电子邮件正文中，所以我使用 MHTML 呈现。当我在服务器上预览报告时，它看起来不错；但是当我设置电子邮件传递并在 Outlook 中查看报告时，它没有正确呈现。表格中的文本有不同的字体和格式，这是报告的一部分。当我尝试使用 HTML 呈现它并将其作为电子邮件附件发送时，它看起来很好。

我应该提到这个确切的报告是在 SSRS 2008 上运行的，并且一切正常。

你知道问题可能是什么吗？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:19:35.747

我没有评论的声誉，所以我会发布作为答案。

问题似乎与 Outlook 有关，因为即使您从 Excel 粘贴一个简单的表格，该表格也会出现渲染问题。我建议你扩大单元格宽度并测试电子邮件正文中的 HTML，直到它没问题。

# linux - 如何使用 bash 命令列出进程使用的管道

> ID：12283698
> 
> 赞同：8
> 
> 时间：2012-09-05T14:25:32.920
> 
> 标签：linux, pipe, named-pipes, diagnostics

有没有办法列出正在运行的 linux 进程使用的管道（例如，给定它的 pid 或进程名称）并确定它们的使用容量？

就像是：

```
lspipes -l -p pid 
```

导致类似：

```
[rw]  descriptor  size  name 
```

其中 rw 是管端类型，size 是其使用容量

或类似的东西

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T17:50:19.017

1)`ls -l /proc/pid/fd`

这将列出管道

```
lr-x------ 1 prabagaran prabagaran 64 Sep  5 23:01 14 -> pipe:[57729]
l-wx------ 1 prabagaran prabagaran 64 Sep  5 23:01 15 -> pipe:[57728]
lr-x------ 1 prabagaran prabagaran 64 Sep  5 23:01 16 -> pipe:[57731]
lr-x------ 1 prabagaran prabagaran 64 Sep  5 23:01 17 -> pipe:[57730] 
```

2)`lsof | grep 57731`

```
wineserve 3641 prabagaran   76w     FIFO        0,8       0t0   57731 pipe
winedevic 3651 prabagaran   16r     FIFO        0,8       0t0   57731 pipe 
```

这些是与给定进程 ID 相关的管道信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:55:13.123

我真的不认为有这样的命令。您可以尝试以下方法：

`lsof -p PID | grep FIFO`

其中 PID 代表进程 ID，而 FIFO 代表……什么都没有。你必须准确地写“FIFO”。可能有一个`lsof`开关可以只选择管道并避免使用`grep`，但我现在无法在手册页中找到它。

它应该给你一些接近你正在寻找的东西。

# deployment - 如何创建 MSBuild 目标文件来部署文件？

> ID：12283701
> 
> 赞同：2
> 
> 时间：2012-09-05T14:25:42.807
> 
> 标签：deployment, msbuild, publish

鉴于我有一个生成文件的后期构建过程，`\bin\out`我如何使用 MSBuild 目标文件来声明该目录中的所有文件（递归）应该在 Web 部署期间发布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:28:23.657

让我们把它分成两部分：

首先，构建 web 项目：

```
<Target Name="BuildWeb">
    <MSBuild Projects="WebExtranet\WebExtranet.csproj"
             Properties="Configuration=$(Environment);DeployOnBuild=True;CreatePackageOnPublish=True;BaseIntermediateOutputPath=..\$(DistDir)\Web\" />
</Target> 
```

然后使用它发布到本地 IIS（您可能需要调整 msdeploy 命令以满足您的需要）

```
<Target Name="DeployWeb">
    <ItemGroup>
        <PackageSourceDir Include='$(DistDir)\Web\$(Environment)\Package\WebExtranet.zip' />
    </ItemGroup>

    <Message Text="Package path: %(PackageSourceDir.FullPath)" />

    <Exec Command="&quot;c:\Program Files\IIS\Microsoft Web Deploy V3\msdeploy.exe&quot; -verb:sync -allowUntrusted -source:package=&quot;%(PackageSourceDir.FullPath)&quot; -setParam:'IIS Web Application Name'='My Web App' -dest:auto"/>
</Target> 
```

常见的陷阱：

*   msbuild 版本很重要。我正在使用V3。
*   您必须已经在 IIS 上创建了 Web 应用程序。只需要做一次。

请注意，$(Environment) 变量是构建配置。我有几个，但运行第一个目标并检查创建的文件夹结构。然后调整脚本。

# c# - 无法从挂钩程序调用创建日志文件

> ID：12283703
> 
> 赞同：1
> 
> 时间：2012-09-05T14:25:49.720
> 
> 标签：c#, .net, svn

我的钩子提交后模板调用我的 postcommitlog.exe 来创建一个 MyFile_LOG.txt 并向其写入 3 个参数。存储库和事务是从 postcommit 模板传递的。

问题是，在 TurtoiseSVN 中提交文件后，没有创建日志。看起来我没有在存储库上创建文件的权限，或者我的代码中有错误。

我的代码在本地工作，当我调试它并向它传递随机参数时，会在我的本地机器上创建一个日志文件。但它不适用于 SVN 钩子。

**模板**

```
\\myserver\e$\Repositories\CONRAD\hooks\postcommitlog.exe %1 %2 
```

**我的计划**

```
using System;
using System.IO;

namespace postcommitlog
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            string repositories = args[0];
            string transaction = args[1];

            const string LOG_PATH = @"\\myserver\e$\Repositories\CONRAD\hooks\MyFile_LOG.txt";

            FileInfo fileInfo = new FileInfo(LOG_PATH);

            File.AppendAllText(LOG_PATH, "Repositories " + args[0]
                + "\t Transaction " + args[1] + "\t Date " + DateTime.Now.ToString("MMM ddd d HH:mm yyyy") + Environment.NewLine);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:46:25.190

错误是我应该从模板创建一个 BAT 文件，而不是使用模板。模板什么也不做，它就是它：一个模板。BAT 文件由 SVN 运行，然后运行脚本。

更多信息在这里：

[http://svnbook.red-bean.com/en/1.5/svn.reposadmin.create.html#svn.reposadmin.create.hooks](http://svnbook.red-bean.com/en/1.5/svn.reposadmin.create.html#svn.reposadmin.create.hooks)

# jquery - 日期选择器不在 IE9 中显示

> ID：12283704
> 
> 赞同：0
> 
> 时间：2012-09-05T14:25:50.887
> 
> 标签：jquery, internet-explorer, datepicker, internet-explorer-9

一位客户想要为他的公司创建一个内部表单并使用 IE9。问题是日期选择器没有出现在 IE9 中。我唯一得到的是日期选择器 UI 的顶部（高度约为 5px）。

截屏：

![](../Images/e9c00abe588e371bf0a4023003ededa6.png)

代码片段：

```
<script type="text/javascript">
    $(function() { 
    $('input.datepicker').datepicker({
    dateFormat: 'dd-mm-yy',
    changeMonth: true, 
    changeYear: true,
    showOn: 'focus',
    beforeShowDay: function(date)
    { return [(date.getDay() == 2 || date.getDay() == 4), ""]; }
    },
    $.datepicker.regional['nl']);
    });
</script> 
```

和

```
<li>
<label for="datum">Datum</label><br/>
    <input type="text" id="datum" value="" class="datepicker" name="datum" placeholder="Datum" class="required"/>
</li> 
```

有人知道为什么 datepicker UI 不显示吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:52:56.453

在您[提供](http://pastebin.com/raw.php?i=WQsnMmNG)的源代码中包含[jquery.cookie.js 。](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)该错误发生在[control.js](http://pastebin.com/raw.php?i=Gb0Gzqw0)中。

编辑：

添加适当的依赖项：

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script> 
```

消除：

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.3/themes/base/jquery-ui.css"/>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="http://jquery-ui.googlecode.com/svn/trunk/ui/jquery.ui.core.js" type="text/javascript"></script>
<script src="http://jquery-ui.googlecode.com/svn/trunk/ui/jquery.ui.datepicker.js" type="text/javascript"></script> 
```

# matlab - Matlab 与 ANSYS 和 COMSOL 等仿真产品对比

> ID：12283707
> 
> 赞同：2
> 
> 时间：2012-09-05T14:26:07.223
> 
> 标签：matlab, simulation

这可能是问这个问题的错误地方，但我在 SE 网络上找不到更好的地方。我曾短暂地使用过 Matlab 和 Ansys，根据我所学/可以收集的信息，Matlab 是一个编程环境，具有执行常见数学、可视化和分析操作的功能。您主要以文本方式（.m 文件）编写程序或使用 Simulink 生成流程图（基于模型的开发）。另一方面，Ansys 是一个主要的仿真环境，可以通过 GUI 完成很多工作（3D 模型、物理域、配置、显示设置），您可以在仿真引擎的各个点添加方程以修改模拟流程。

我所了解的都是粗略的，仅作为概述。谁能给我一个 Matlab 和 Ansys（或任何其他仿真产品，如 COMSOL）之间合适的真实世界比较，让我们了解何时使用哪个，以及每个系统的弱点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T05:38:47.540

我没用过Ansys，但Ansys经常被拿来和Comsol比较，我用过Comsol和Matlab多年。

MATLAB：

*   运行它的编程语言和环境。这意味着它可以做任何事情（任何其他编程语言都可以做）。与其他语言相比，它的亮点是什么？

    *   数百个与矩阵一起使用的内置函数。例如，在一个项目中，我需要做简单的矩阵代数（加法、乘法、缩放矩阵），还需要奇异值分解。SVD 不是你可以用 50 行代码编写的东西，所以我需要一个现成的库。当时我使用了一个 Java 库，并编写了自己的代码来表示矩阵并对其进行矩阵代数。那是几百行代码。如果我使用 Matlab，它会是大约十行代码，因为它都在那里。我只需要打字`help svd`就可以了解如何使用它。但是，如果您不需要任何这些，请不惜一切代价远离 Matlab！有更好的免费语言。

    *   非常适合用作始终在桌面上打开的计算器，并且可以进行粗略式计算。

    *   **绘制图表**。许多学者推荐 Matlab 作为制作出版质量图形的首选工具。这些可以导出为 PDF 并导入 Inkscape 进行进一步编辑。最好的一点是可以将绘制图形的命令放入脚本文件中，之后可以根据需要更改其中的部分内容，这与手动绘制图形相比可以节省大量工作（假设您要更改用于表示数据点的轴或符号）。

    *   就个人而言，我也将它用于曲线拟合。它有许多工具箱，其中一个是一个简洁的工具，可以让我找到对一组数据点进行建模的方程。

康索尔：

*   使用有限元法 (FEM) 在复杂域上求解偏微分方程 (PDE) 的专用工具。这可能听起来晦涩难懂，但许多现实世界的工程需求减少了这一点。比如：

    1.  在具有复杂现实世界几何形状的土木工程结构中寻找载荷、应力和应变（当阵风吹到建筑物或桥梁上时会发生什么？）

    2.  电流如何在特定的导电物体中流动？

    3.  各种工业反应器中的化学反应。

    4.  发电机（线圈中旋转的磁铁）设计的功率效率是多少？

    5.  如何在不平凡的房间内放置冷气出风口，以达到良好的温度分布和良好的效率？

    6.  Comsol 与任何其他可以处理任意方程的 FEM 工具一样，可以进行多物理场计算，这意味着，例如，可以求解电池的化学成分、温度和压力，以及它们如何反馈到化学物质中反应（加速或减速）。与需要提供方程的工具相比，在 Comsol 中，解决大多数问题所需的大部分东西都已经存在，只需要选择并应用于同样内置于 Comsol 内部的几何图形。此外，可以引入任意描述的方程。

*   这些物理物质如何表现的物理描述称为偏微分方程。

*   一旦 Comsol 解决了一个问题，就可以将数据导出到 Matlab 中进行后处理，Matlab 具有更通用的工具来处理数据和制作各种绘图。

# jquery - 如何访问从其他域（FTP）加载的 iframe 元素

> ID：12283712
> 
> 赞同：0
> 
> 时间：2012-09-05T14:26:15.023
> 
> 标签：jquery, html, iframe

我正在尝试使用以下代码从不同域加载 html 页面，

```
 var str = "http://***_Images/";
  $('body').append('<iframe id="iframe" style="position:fixed;' +
  + 'top:0px;left:0px;width:100%;height:100%" src="' 
  + str +   
  $('#htmNum').val() + '.html"></iframe>'); 
```

但是当我尝试使用下面的代码访问该 iframe 中的元素时，我无法访问

```
 $('#iframe').contents().find('img').length // Returns me nothing 
```

我怎样才能做到这一点。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:27:32.090

[由于同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)施加的安全限制，您不能这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:29:03.930

仅当其他域的服务器通过设置[访问控制标头](https://developer.mozilla.org/en-US/docs/HTTP_access_control)将您的域置于白名单或允许从任何域的跨域访问来进行合作时，您才能执行此操作。

另一种解决方案涉及一个中间服务器（您的服务器将是最简单的）充当代理查询其他域服务器以让浏览器只看到一个域。

请注意，其他域服务器所有者可能认为第二种解决方案不正确（或合法）。你应该检查这一点。

# asp.net-mvc-3 - 使用 ASP.NET 成员资格提供程序的 MVC3 站点的 TNS oracle 连接失败

> ID：12283713
> 
> 赞同：2
> 
> 时间：2012-09-05T14:26:19.060
> 
> 标签：asp.net-mvc-3, oracle, asp.net-membership, connection-string, tnsnames

我们有一个 MVC3 站点，它使用带有表单身份验证的 ASP.NET 成员资格提供程序来让用户访问该站点。我们背后有一个 Oracle 数据库。

这一切都在内部开发机器、测试机器和部署机器上工作。

但是在客户端 - 他们收到错误“ORA-12154：TNS：无法解析指定的连接标识符”。

我们认为这将是一个错误配置条目的简单案例，但一切似乎都是正确的。他们还对同一个 TNS 别名运行了 tnsping 并且它可以工作。通过 SQL*Plus 的连接也有效。我们甚至让他们下载了一个 .NET 连接字符串测试器应用程序，该应用程序使用与 MVC3 站点 web.config 完全相同的连接字符串进行连接。只有网站返回此错误。（注意：所有测试都是在网站所在的同一台机器上完成的）

有没有人以前见过这个并提供一些关于如何解决的指导？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:48:28.423

根据经验，可能的原因是运行应用程序的帐户`TNSNAMES.ORA`由于文件/文件夹权限或网络访问权限而无法读取/访问文件。

# dojo - 动态更改选择时避免组合框上的 onChange

> ID：12283723
> 
> 赞同：0
> 
> 时间：2012-09-05T14:26:55.307
> 
> 标签：dojo

我有一个组合框，我验证了选择的更改应在满足条件时恢复。

我已经检测到了这种情况，但是当我更改组合框的值和显示值时，与组合框关联的 onChange 会被触发。以下是我用来更改选择的代码：

```
dijit.byId('scheduleName').set('value',val,false);
dijit.byId('scheduleName').set('displayedValue',displayVal,false); 
```

我还尝试在触发上述代码之前将 onChange 设置为空白，然后重新附加 onChange 代码，如下所示：

```
dojo.connect(dijit.byId('scheduleName'),'onChange','');
dijit.byId('scheduleName').set('value',scheduleNameVal,false);
dijit.byId('scheduleName').set('displayedValue',trim(String(scheduleNameName)),false);
dojo.connect(dijit.byId('scheduleName'),'onChange', "hideGrid"); 
```

hideGrid 是一个 JavaScript 函数。我正在使用 Dojo 1.8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:39:17.240

只设置*值*，不*显示值*

```
myComboBox.set("value", value, false); 
```

那么只有`watch`回调被触发，而不是`dojo/on`or `onChange`。

检查此 jsFiddle 以查看差异：http: [//jsfiddle.net/phusick/d7ymY/](http://jsfiddle.net/phusick/d7ymY/)

注意：如果您需要`trim()` *显示值*，请考虑自定义[`setter`](http://livedocs.dojotoolkit.org/dojo/Stateful#custom-accessors)或`dojo/aspect::before`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:47:21.140

你应该使用`dojo.disconnect`而不是

```
dojo.connect(dijit.byId('scheduleName'),'onChange',''); 
```

例子：

```
var hndl, sched = dijit.byId('scheduleName');
var fnWireOnChange = function(){
  hndl = dojo.connect(sched,'onChange', 'hideGrid');
};

dojo.disconnect(hndl);
sched.set('value',scheduleNameVal,false);
sched.set('displayedValue',trim(String(scheduleNameName)),false);
fnWireOnChange(); 
```

作为旁注，`connect/disconnect`已被弃用，取而代之的是`dojo/on`

[https://dojotoolkit.org/reference-guide/1.8/dojo/on.html#dojo-on](https://dojotoolkit.org/reference-guide/1.8/dojo/on.html#dojo-on)

# asp.net-mvc-3 - Kendo UI MVC 在网格上的单行中进行多个分组

> ID：12283725
> 
> 赞同：2
> 
> 时间：2012-09-05T14:27:07.370
> 
> 标签：asp.net-mvc-3, telerik-grid, telerik-mvc, kendo-ui

我想知道将所有内容分组只是一行有多复杂。

比方说

```
 .Group(g => g.Add(c => c.GradeCode))
                             .Group(g => g.Add(c => c.SizeLength))
                             .Group(g => g.Add(c => c.SizeWidth))
                             .Group(g => g.Add(c => c.SizeThick)) 
```

将不是在**(GradeCode > SizeLength > SizeWidth > SizeThick)**深度 4 中进行分组，而是对深度 1 进行分组**((GradeCode AND SizeLength AND SizeWidth AND SizeThick) >)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:58:35.340

Kendo Grid 不支持请求的行为。多个组相互嵌套。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T13:34:35.267

连接新字段中的所有字段，并按其分组。

# javascript - 书签：转到嵌入 YouTube 页面

> ID：12283726
> 
> 赞同：3
> 
> 时间：2012-09-05T14:27:09.467
> 
> 标签：javascript, youtube, embed, switch-statement, bookmarklet

有没有办法为谷歌浏览器制作一个 JavaScript 书签，点击时切换当前页面：

```
www.youtube.com/watch?v=VIDEOID 
```

*或者*

```
www.youtube.com/watch?v=VIDEOID&feature=related 
```

*或任何其他类型的 YouTube 网址*

**至**

```
www.youtube.com/embed/VIDEOID 
```

我花了将近一个小时尝试（和发现）。

提前感谢您的慷慨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:47:30.267

```
document.location = 'http://www.youtube.com/embed/' + document.location.href.match(/[&?]v=([^&#]*)/i)[1] 
```

作为书签

```
javascript:document.location%20%3D%20'http%3A%2F%2Fwww.youtube.com%2Fembed%2F'%20%2B%20document.location.href.match(%2F%5B%26%3F%5Dv%3D(%5B%5E%26%23%5D*)%2Fi)%5B1%5D%0A%0A 
```

# c# - OpenGL/TK 修改改变图像的单个像素

> ID：12283728
> 
> 赞同：0
> 
> 时间：2012-09-05T14:27:26.080
> 
> 标签：c#, opengl, textures, opentk

我想更改绑定纹理的单个像素。

我知道我可以有一个 1x1 位图，并获取它的位图数据，然后将其传入：

```
GL.TexSubImage2D(TextureTarget.Texture2D, 0, pixel.X, pixels.Y, 1, 1, OpenTK.Graphics.OpenGL.PixelFormat.Bgra, PixelType.UnsignedByte, bmpData.scan0); 
```

然而，对于修改一个像素这样简单的任务来说，这似乎非常复杂。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:36:20.873

> 有没有更简单的方法来做到这一点？

不，至少，就 OpenGL 而言。

一般来说，人们不想改变*一个*纹素。如果他们正在上传，那是因为他们想要更新整个纹理数据区域。CPU->GPU DMA 操作就是围绕这一事实设计的。

至于 OpenTK 部分（创建位图、锁定等），您不必创建位图。您可以使用[TexSubImage2D 重载](http://www.opentk.com/files/doc/class_open_t_k_1_1_graphics_1_1_open_g_l_1_1_g_l.html#ad5f917127cfe97f6f3176939623cd66b)之一来传递 C# 数组。

# jquery - 选择 TD 元素，这些父 TR 中的元素除外

> ID：12283730
> 
> 赞同：0
> 
> 时间：2012-09-05T14:27:29.017
> 
> 标签：jquery, html-table, jquery-selectors

我希望它忽略`<td>`具有 class 父级的那个`.ignore`。这是我现在所拥有的，但它对每个`<td>`.

```
<script>
$('td:nth-child(2)').css('background-color', 'rgb(255, 248, 231)');
</script>

<table>
    <tr>
        <td> </td>
        <td>select</td>
        <td> </td>
    </tr>
    <tr class="ignore">
        <td> </td>
        <td>don't select</td>
        <td> </td>
    </tr>
    <tr>
        <td> </td>
        <td>select</td>
        <td> </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:30:32.120

```
$('tr:not(.ignore) td').css('background-color', 'rgb(255, 248, 231)'); 
```

[**演示**](http://jsfiddle.net/dbZxw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:32:52.787

```
$('td:nth-child(2)').not('tr.ignore td').css('background-color', 'rgb(255, 248, 231)');​ 
```

[http://jsfiddle.net/3TrxJ/](http://jsfiddle.net/3TrxJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:34:39.197

你可以这样做：

```
$('td:nth-child(2)').each(function(){
    if ($(this).closest('tr').hasClass('ignore') === false){
        $(this).css('background-color', 'rgb(255, 248, 231)');
    }
}); 
```

[在这里演示](http://jsfiddle.net/2vx3u/1/)

# jquery - AJAX - JQuery GET 回调不起作用，但 JSON 文件访问正常

> ID：12283732
> 
> 赞同：9
> 
> 时间：2012-09-05T14:27:29.953
> 
> 标签：jquery, ajax, json, get

我的代码如下所示：

```
$.get('http://files.mysite.com/data.json', function(data) {
    console.log(data);
}, "jsonp"); 
```

当我查看`Network`Firebug 的菜单时，我可以看到对我的文件的有效调用`JSON`，当我打开它时，它包含了所有信息。

但`Console`依然沉默。没有来电的迹象，`AJAX`也没有我的`data`.

我的电话与我的文件`AJAX`不在同一个域中。`JSON`这就是我使用的原因`jsonp`

有任何想法吗？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T14:38:38.803

我不完全确定您的问题是什么，如果您得到结果但控制台保持安静，您可能会遇到 JSON 本身的问题...尝试[JSONLint](https://jsonlint.com/)来查找问题。

另外我建议你不要使用 getJson 等。

```
$.ajax({
    url: http://files.mysite.com/data.json,
    dataType: 'jsonp',
    cache: false,

    beforeSend: function () {
        console.log("Loading");
    },

    error: function (jqXHR, textStatus, errorThrown) {
        console.log(jqXHR);
        console.log(textStatus);
        console.log(errorThrown);
    },

    success: function (data) {
        console.log('Success');
        console.log(data);
    },

    complete: function () {
        console.log('Finished all tasks');
    }
}); 
```

这样您可以获得一些错误处理和其他不错的小功能，您可以通过 beforeSend 添加加载微调器，并通过 complete 将其删除:)

编辑：用下面的函数替换错误函数，这应该让我们更好地了解问题所在:)

```
error: function (jqXHR, textStatus, errorThrown) {
  console.log(jqXHR);
  console.log(textStatus);
  console.log(errorThrown);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:36:22.473

如果您知道响应将是 json，则最好使用 $.getJSON 而不是 get。控制台现在应该可以工作了

```
$.getJSON('http://files.mysite.com/data.json', function(data) {
 console.log(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:37:20.640

**不支持**jsonp见**[这里](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)，只有*xml, json, script, html* 所以如果你没有跨域策略问题，请改用**json****

 **```
$.get('http://files.mysite.com/data.json', function(data) {
    console.log(data);
}, "json"); 
```**

# ios - iOS 本地通知和自动丢弃 the-not-the-soonest-firing-64

> ID：12283736
> 
> 赞同：1
> 
> 时间：2012-09-05T14:27:37.737
> 
> 标签：ios, uilocalnotification

因此，使用 iOS 本地通知，您将拥有：

```
Each application on a device is limited to the soonest-firing 64 scheduled local
notifications. The operating system discards notifications that exceed this limit. It 
considers a recurring notification to be a single notification. 
```

是否有一种简单的方法可以确定何时添加通知，当另一个通知被推出最快 64 范围时，被“丢弃”？是否需要手动遍历所有通知，并“猜测”最后一个触发的通知，以确定哪个将被删除？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:50:26.667

以我的经验，本地通知是在一个由 fireDate 排序的 NSArray 中返回的，所以你只需要抓住最后一个。

```
NSArray *array = [[UIApplication sharedApplication] scheduledLocalNotifications];

UILocalNotification *willBeRemoved = [array lastObject]; 
```

希望有帮助:)

# entity-framework - 如何强制回滚事务实体框架

> ID：12283738
> 
> 赞同：1
> 
> 时间：2012-09-05T14:27:39.480
> 
> 标签：entity-framework, integration-testing

即使成功，我如何强制回滚 SaveChanges() 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:47:21.783

您需要将其包装到[事务范围](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)中，然后在不完成范围的情况下将其处理掉。

```
using (var scope = new TransactionScope( TransactionScopeOption.Required, System.TimeSpan.MaxValue ))
{
  /* your code goes here */
} 
```

如果您想实际保存更改调用`scope.Complete()`

有关详细信息，请参阅此[MSDN 帖子](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.dispose.aspx)。

# iphone - 在 NSDocumentDirectory 中打开 .UMD、.Mobi 文件

> ID：12283741
> 
> 赞同：1
> 
> 时间：2012-09-05T14:27:40.983
> 
> 标签：iphone

如何在 iphone 中从 NSDocumentDirectory 打开/读取 .umd、.mobi 文件......就像我们在 QLPreviewController 中打开 pdf 文件一样

提前致谢！

# twig - Using a Twig Extension

> ID：12283742
> 
> 赞同：2
> 
> 时间：2012-09-05T14:27:45.733
> 
> 标签：twig, template-engine

I am trying to use teh Twig i18n Extension.

As far as I can tell the file I need is here:

[https://github.com/fabpot/Twig-extensions/blob/master/lib/Twig/Extensions/Extension/I18n.php](https://github.com/fabpot/Twig-extensions/blob/master/lib/Twig/Extensions/Extension/I18n.php)

Now I am not quite sure where to save this file

I have Twig in a folder called includes/lib (/includes/lib/Twig). I see a folder Extension under Twig. Do I save it here?

After I save it, do I need to do a "require_once" to the file or will Twig_Autoloader do the job for me?

I am not using Symfony2

Thanks Craig

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:08:18.137

Here is the complete answer that worked for me:

1.  Copy the file in Twig-Verzeichnis (extract i18n.zip in Twig). For the I18n extension it would be Twig/Extensions/Extension/I18n.php
2.  Eventually add other files requred by I18n. You will see what these are by the error messages that come. I had to add "Twig/Extensions/Node/Trans.php" and "Twig/Extensions/TokenParser/Trans.php".
3.  In your config file add the following:

    ```
    // Set language to German
    putenv('LC_ALL=de_DE'); 
    setlocale(LC_ALL, 'de_DE'); 
    // Specify location of translation tables
    bindtextdomain("project_de_DE", "./locale"); 
    // Choose domain 
    textdomain("projectl_de_DE"); 
    ```

4.  Register the Twig Extension

    ```
    $twig->addExtension(new Twig_Extensions_Extension_I18n()); 
    ```

5.  Create the directory locale/de_DE/LC_MESSAGES

6.  Create the PO file (the easisest is to have a sample file to start from)
7.  Open the file in a normal text editor (be sure to use utf-8 encoding) and start translating
8.  Open the PO-Datei with PoEdit (www.poedit.net/)
9.  Save to locale/de_DE/LC_MESSAGES (a MO-Datei will be created).
10.  Add the translation to the appropriate places in the Twig-Template with

    ```
    {% trans 'Text in the original language' %}` 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:03:50.717

You need to register this extension with Twig:

```
$twig->addExtension(new Twig_Extensions_Extension_I18n()); 
```

If your installation is configured correctly, the autoloader should do the job of including the file. If not, you could include the file manually or make the installation with [composer](http://getcomposer.org).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T18:23:07.507

It seems the "proper" way to install these extensions without Composer is as follows:

1.  Download a release from [https://github.com/fabpot/Twig-extensions/releases](https://github.com/fabpot/Twig-extensions/releases)
2.  Copy the contents of the `lib/` directory somewhere to your project
3.  include the file `.../Twig/Extensions/Autoloader.php`
4.  Register autoloader: `Twig_Extensions_Autoloader::register();`
5.  Continue as explained in the doc: [http://twig.sensiolabs.org/doc/extensions/i18n.html](http://twig.sensiolabs.org/doc/extensions/i18n.html)

# php - PHP PDO 简单插入或更新函数

> ID：12283747
> 
> 赞同：9
> 
> 时间：2012-09-05T14:28:08.420
> 
> 标签：php, pdo, insert-update

在尝试创建一个简单的 PHP PDO 更新函数，如果找不到该字段将插入它，我创建了这个小片段。

```
function updateorcreate($table,$name,$value){
    global $sodb;
    $pro = $sodb->prepare("UPDATE `$table` SET value = :value WHERE field = :name");
    if(!$pro){
        $pro = $sodb->prepare("INSERT INTO `$table` (field,value) VALUES (:name,:value)");
    }
    $pro->execute(array(':name'=>$name,':value'=>$value));
} 
```

它不会检测到更新功能是否可以与`if(!$pro);`我们如何使这个功能一起工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-05T14:31:30.833

您正在分配`$pro`给准备，而不是执行语句。

话虽如此，如果您使用的是 mysql，则可以使用`insert... on duplicate key update`语法。

```
insert into $table (field, value) values (:name, :value) on duplicate key update value=:value2 
```

您不能两次使用相同的绑定参数，但可以将两个绑定参数设置为相同的值。

编辑：这个 mysql 语法*只*适用于存在键（主键或另一个唯一键）的情况，并且会导致插入失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:34:06.970

如果它是 mysql-only 你可以尝试 INSERT INTO ... ON DUPLICATE KEY UPDATE

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:31:03.337

您首先需要执行它。

除此之外，这是一种狡猾的做法。最好先启动一个事务，执行一个 SELECT，然后确定要做什么（INSERT 或 UPDATE）。仅仅检查 UPDATE 查询是否成功是不够的，当没有找到任何行时它也会成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:36:48.790

尝试，

```
 PDO::exec() 
```

如果插入则返回 1。2 如果行已更新。

对于准备好的陈述，

```
 PDOStatement::execute() 
```

你可以试试，

```
 PDOStement::rowCount() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-13T07:46:30.390

以下是 PHP`PDO`帮助函数`INSERT`和`UPDATE`

`INSERT`功能：

```
function basicInsertQuery($tableName,$values = array()){

/*
//
USAGE INSERT FUNCTİON
    $values = [
        "column" => $value,               
    ];
    $result =  basicInsertQuery("bulk_operations",$values);
*/

try {
    global $pdo;

    foreach ($values as $field => $v)
        $vals[] = ':' . $field;

    $ins = implode(',', $vals);
    $fields = implode(',', array_keys($values));
    $sql = "INSERT INTO $tableName ($fields) VALUES ($vals)";

    $rows = $pdo->prepare($sql);
    foreach ($values as $k => $vl)
    {
        $rows->bindValue(':' . $k, $l);
    }
    $result = $rows->execute();
    return $result;
} catch (\Throwable $th) {
   return $th;
}    
} 
```

`UPDATE`功能：

```
function basicUpdateQuery($tableName,  $values = array(), $where = array()) {

/*
*USAGE UPDATE FUNCTİON

    $valueArr = [ column => "value",  ];
    $whereArr = [ column => "value",  ];
    $result = basicUpdateQuery("bulk_operations",$valueArr, $whereArr);
*/
try {        
    global $pdo;

    //set value
    foreach ($values as $field => $v)
        $ins[] = $field. '= :' . $field;
    $ins = implode(',', $ins);

    //where value
    foreach ($where as $fieldw => $vw)
        $inswhere[] = $fieldw. '= :' . $fieldw;
    $inswhere = implode(' && ', $inswhere);

    $sql = "UPDATE  $tableName SET $ins WHERE $inswhere";    
    $rows = $pdo->prepare($sql);
    foreach ($values as $f => $v){
        $rows->bindValue(':' . $f, $v);
    }
    foreach ($where as $k => $l){
        $rows->bindValue(':' . $k, $l);
    }
    $result = $rows->execute();

    return $result;
} catch (\Throwable $th) {
    return $th;
}

} 
```

# ios - 如何从数组中选择特定项目以在 UITableView 中显示？

> ID：12283750
> 
> 赞同：1
> 
> 时间：2012-09-05T14:28:10.843
> 
> 标签：ios, uitableview, nsmutablearray

我是 iOS 编程的新手，我正在编写我的第一个应用程序。我有一个包含项目的 NSMutableArray。这些对象具有标题、ID 等和最喜欢的属性。最喜欢的属性是一个布尔值，它告诉用户是否将项目添加到收藏夹中。现在我的问题是：在 UITableView 中，我只希望所有最喜欢 = YES 的项目都显示在“表格”中。我怎么做 ？在我使用方法 cellForRowAtIndexPath 之前，我是否必须遍历数组并将这些项目保存在一个新数组中？就像在 viewDidLoad 中一样？因为我尝试在方法 cellForRowAtIndexPath 方法中设置条件，但随后只显示了一堆空单元格 + 我最喜欢的项目。帮助请！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:38:29.777

我将在数组中循环使用 for-in 语句，并创建一个新的 *favoriteArray ，其中包含您希望在 tableView 中显示的所有项目。所以像：

```
 NSMutableArray *favoriteArray = [NSMutableArray new];
for (Item *item in self.mutableArray) {
    if (item.favorite) {
        [favoriteArray addObject:item];
    }
} 
```

# c - 如何抑制库函数的输出

> ID：12283752
> 
> 赞同：3
> 
> 时间：2012-09-05T14:28:19.203
> 
> 标签：c

我希望抑制函数**smbc_opendir()**的默认输出，并且只使用 printf 打印。

gcc 文件名.c -lsmbclient

```
#include <libsmbclient.h>
#include <stdio.h>

void auth_fn()
{

}

int main(int argc,char* argv[])   
{ 
  int dirHandle;
  if(smbc_init(auth_fn,  10)) /* Initialize things */
  {
     return 0;
  }
  dirHandle= smbc_opendir(argv[1]);    /* Argument is smb://<ip-address>/ */
  /* Just display value of dirHandle in output and nothing else */
  printf("%d",dirHandle);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:45:10.983

尝试调试级别 0，它应该只记录严重错误：`smbc_init(auth_fn, 0)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:40:03.797

您可以使用以下内容重定向标准输出或标准错误：

```
stderr = freopen("/dev/null", "w", stderr ); 
```

然后你调用 smbc_opendir。

# php - 如何重置包含任何验证错误的表单？

> ID：12283755
> 
> 赞同：1
> 
> 时间：2012-09-05T14:28:30.763
> 
> 标签：php, jquery, yii, jquery-validate

我正在尝试在我的 Yii 项目中重置表单

```
$form.reset(); 
```

这样我只能设法重置字段值，但仍然显示现有的验证错误。我怎样才能清除验证错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:48:49.050

Yii 为这个功能安装了钩子，但它不方便地暴露它们。要完全重置表单，您需要执行以下操作：

```
$form.reset().trigger('reset'); 
```

# java - 地图条目出现在 HashMap.entrySet() 但不出现在内部 HashMap.table

> ID：12283758
> 
> 赞同：2
> 
> 时间：2012-09-05T14:28:37.707
> 
> 标签：java, data-structures, collections, hashmap

我有一个在程序中填充的 Java HashHap。出于某种原因，地图中的 entrySet 包含我所期望的内容，但是当我查看内部条目表时，它缺少一个值。由于缺少该值，我得到一个空值，它破坏了一切。也许我不像我想的那样理解 HashMaps，但表是否应该包含 entrySet 中的所有条目？谢谢。

在谈论 entrySet 和 table 时，我确实在谈论调试时 HashMap 的内部结构。这是我的“entrySet”的样子：

```
[IS_DELETED=0, COLLECTION_SET_NAME=D-EIUCFOE-SET, MAP_ID=Ic65fd5ffb7c311e09fc6842b2ba7e81a, PRODUCT_ID=1, USER_ID=U0158703, WM_DIFFVER=DiffBase, DISTRICT_CODE=TX_N_DIS, WM_CODE=NC, MODIFIED_DATE=2012-09-04 10:13:08.973] 
```

这是我的桌子的样子：

```
[IS_DELETED=0, COLLECTION_SET_NAME=D-EIUCFOE-SET, null, null, PRODUCT_ID=1, null, null, null, WM_DIFFVER=DiffBase, null, DISTRICT_CODE=TX_N_DIS, WM_CODE=NC, MODIFIED_DATE=2012-09-04 10:13:08.973, null, null, null] 
```

因此，当我的代码在创建此 HashMap 后查找 MAP_ID 时，它会出现 null 并且它会爆炸。

```
table   HashMap$Entry<K,V>[16]  (id=248)    
    [0] HashMap$Entry<K,V>  (id=270)    
        hash    -1013369904 
        key "IS_DELETED" (id=883)   
        next    null    
        value   BigDecimal  (id=884)    
    [1] HashMap$Entry<K,V>  (id=271)    
        hash    449814449   
        key "COLLECTION_SET_NAME" (id=896)  
        next    HashMap$Entry<K,V>  (id=898)    
        value   "D-EIUCFOE-SET" (id=899)    
    [2] null    
    [3] null    
    [4] HashMap$Entry<K,V>  (id=275)    
        hash    -1942791868 
        key "PRODUCT_ID" (id=900)   
        next    HashMap$Entry<K,V>  (id=901)    
        value   BigDecimal  (id=902)    
    [5] null    
    [6] null    
    [7] null    
    [8] HashMap$Entry<K,V>  (id=276)    
        hash    -1109968520 
        key "WM_DIFFVER" (id=904)   
        next    null    
        value   "DiffBase" (id=905) 
    [9] null    
    [10]    HashMap$Entry<K,V>  (id=278)    
        hash    -1920690854 
        key "DISTRICT_CODE" (id=906)    
        next    null    
        value   "TX_N_DIS" (id=907) 
    [11]    HashMap$Entry<K,V>  (id=279)    
        hash    -1948303941 
        key "WM_CODE" (id=909)  
        next    null    
        value   "NC" (id=910)   
    [12]    HashMap$Entry<K,V>  (id=280)    
        hash    1002278668  
        key "MODIFIED_DATE" (id=912)    
        next    null    
        value   TIMESTAMP  (id=913) 
    [13]    null    
    [14]    null    
    [15]    null 
```

我无法获取 MAP_ID 条目，但它作为字符串从数据库返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:16:27.913

让我们澄清一些事情。

1.  `Map.Entry`是地图中的逻辑“条目”。让我们将其称为“地图条目”
2.  `HashMap.table`是实现的内部数组，存储具有冲突模值`HashMap` `Map`的“映射条目”列表。`hashCode`请注意，这样一个“hashmap table entry”（也称为“bucket”）中包含几个“map entry”

例如，看看这个“哈希表条目”：

```
[4] HashMap$Entry<K,V>  (id=275)    
    hash    -1942791868 
    key "PRODUCT_ID" (id=900)   
    next    HashMap$Entry<K,V>  (id=901)    
    value   BigDecimal  (id=902) 
```

请注意，它链接到`id=901`，这是相同哈希值（或更准确地说，`hash % 16 == 4`）的“下一个”“映射条目”。基本思想是这样的：

```
// "HashMap table" has 16 "hashmap table entries" (at first, before growing)
[0] with   1 "hashmap entry"
[1] with > 1 "hashmap entry"
[2] empty
[3] empty
... 
```

当 a`HashMap`增长时，它可能会选择扩大其内部的“hashmap 表”，以优化“map 条目”在其“hashmap 表”中的分布。例如，如果“hashmap table”的大小为 256，则应用于`hashCode()`值的模数也将是 256，从而降低了`hashCode()`碰撞风险

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:15:14.543

我认为问题可能来自这样一个事实，即 Java 将东西​​存储在存储桶中，而存储桶本身就是列表的实现。这是一篇有趣的文章：

[http://javarevisited.blogspot.co.uk/2011/02/how-hashmap-works-in-java.html](http://javarevisited.blogspot.co.uk/2011/02/how-hashmap-works-in-java.html)

您能给我们提供一些代码，以便我们提供一些真正的帮助吗？

# java - Java 和 If 语句

> ID：12283762
> 
> 赞同：0
> 
> 时间：2012-09-05T14:28:42.980
> 
> 标签：java, if-statement

谁能告诉我我做错了什么？

```
public class Jafntekkijafnt
{
    public static void main(String[] args)
    {
        int a = Integer.parseInt(args[0]);
        int b = Integer.parseInt(args[1]);
        int c = Integer.parseInt(args[2]);
        if (a == b) (b == c) (c == a)   System.out.println("equal");
        else                            System.out.println("not equal");
    }
} 
```

这是java编程
我正在尝试创建一个包含三个整数的程序，如果全部相等则打印相等，如果不相等则打印不相等。

我知道它是第 8 行，但不知道如何正确。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T14:29:58.623

而不是`if (a==b)(b==c)(c==a)`使用

```
if (a==b && b==c) 
```

注意不需要写`c==a`if`a==b`和`b==c`hold

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:30:29.517

你的“if”语法有问题。它应该是

```
if (a == b && b == c && c == a) {
//...
} 
```

请注意，您在这里使用的是原语而不是对象。如果您使用 Integer 而不是 int 那么 == 将检查对象是否相同，而不是值是否相同。在这种情况下，您需要使用

```
if (a.equals(b) && b.equals(c) && c.equals(a)) {
//...
} 
```

&& 表示逻辑和，[在这里解释](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:30:34.827

您的括号有点错误，您需要使用 AND (&&) 运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:12:00.057

尝试这个：

```
if(a == b && a == c && b == a && b == c && c == a && c == b){
...
} 
```

快捷方便。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T14:33:18.577

您需要`&&`在括号之间使用`()`：

```
(a==b) && (b==c) && (c==a) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T15:02:51.457

并不是说在单行情况下它是绝对必要的，但是您还应该在“if”和“else”语句周围加上括号。不使用它们是不好的做法，因为它会导致一些意想不到的行为。我个人知道我过去曾因这个问题而被烧毁。此外，它使您的代码更易于阅读，这是非常宝贵的。

我的代码如下：

```
public class ThreeIntTest {
public static void main(String[] args) {
    int a = Integer.parseInt(args[0]);
    int b = Integer.parseInt(args[1]);
    int c = Integer.parseInt(args[2]);
    if ((a == b) && (b == c)) {
        System.out.println("The three integers are equal.");
    } else {
        System.out.println("The three integers are not equal.");
    }
} } 
```

逻辑运算符将`&&`告诉“if 语句”，如果两个`a==b`AND都`b==c`评估为真，如果一个或两个都不为真，则该语句为假，您直接转到“else 语句”。

这里使用的是关系的传递性。这表示如果 a = b 且 b = c，那么它遵循 a = c。这是我能想到的比较三个整数的最有效方法。

# qt - QGridLayout 问题

> ID：12283763
> 
> 赞同：1
> 
> 时间：2012-09-05T14:28:49.547
> 
> 标签：qt, layout, widget

使用 QGridLayout 设置我的中央小部件时出现问题。我的中央小部件中有三个小部件。一个是顶部的一个栏，覆盖了中央小部件的所有水平长度，另外两个是两个框架，一个在左侧，另一个在右侧。

我的目的是顶部栏不会垂直变化，左侧方形可以垂直和水平扩展，右侧保持不扩展，始终位于中央小部件的右上角，为左侧提供一个扩展空间。

问题是在设置正确的大小策略时。如果我把固定的左边一个会占用所有的空间。

我不知道你是否明白这个想法。对不起，这是我能解释的最好的了。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:53:36.180

我为正确的小部件设置了最大和最小长度，它起作用了。

# php - 原则 2：连接两个表 ManyToOne

> ID：12283764
> 
> 赞同：1
> 
> 时间：2012-09-05T14:28:54.040
> 
> 标签：php, doctrine-orm

我在尝试使用 Doctrine 2 连接两个表时遇到了一些问题。当我尝试向表中添加新项目时，我收到错误消息：

通过未配置为级联持久操作的关系找到新实体：@。显式持久化新实体或在关系上配置级联持久化操作。

当我尝试更新表中的一行时，出现错误：

给定的实体没有身份。

我正在尝试将获胜者实体事件 id 加入事件的 id，以便我可以收集有关事件的数据以供查看。我挑衅地从更新表单中返回了一个 id，但它似乎不允许我更新它。

**更新：** 所以玩了一些东西，当我添加 cascade="{persist}" 选项时，我得到一个类未找到错误，删除它并添加完整的命名空间导致它声称实体不存在......

```
<?php

namespace ZC\Entity;

/**
 * ZC\Entity\Winner
 *
 * @Table(name="winner")
 * @Entity(repositoryClass="ZC\Entity\Repository\Winner")
 */

class Winner
{

    /**
     * @var integer $id
     *
     * @Column(name="id", type="integer", nullable=false, unique=false, precision=0, scale=0)
     * @Id
     * @GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var string $copy
     *
     * @Column(name="copy", type="text", length="", unique=false, nullable=true, precision=0, scale=0)
     */
    protected $copy;

    /**
     * @var string $url
     *
     * @Column(name="url", type="string", length="255", unique=false, nullable=true, precision=0, scale=0)
     */
    protected $url;

    /**
     *
     * @ManyToOne(targetEntity="Events")
     * @JoinColumns=({
     *  @JoinColumn(name="event", referencedColumnName="id")
     * })
     *
     */
    protected $event;

    /**
     * __get function.
     * 
     * @access protected
     * @param mixed $property
     * @return void
     */
    public function __get($property) {
        return $this->$property;
    }

    /**
     * __set function.
     * 
     * @access protected
     * @param mixed $property
     * @param mixed $value
     * @return void
     */
    public function __set($property, $value) {
        $this->$property = $value;
    } 

}

<?php

namespace ZC\Entity;

/**
 * ZC\Entity\Events
 *
 * @Table(name="events")
 * @Entity(repositoryClass="ZC\Entity\Repository\Events")
 */

class Events
{

    /**
     * @var integer $id
     *
     * @Column(name="id", type="integer", nullable=false, unique=false, precision=0, scale=0)
     * @Id
     * @GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var string $title
     *
     * @Column(name="title", type="string", length="255", unique=false, nullable=false, precision=0, scale=0)
     */
    protected $title;

    /**
     * @var string $description
     *
     * @Column(name="description", type="text", length="", unique=false, nullable=true, precision=0, scale=0)
     */
    protected $description;

    /**
     * @var string $status
     *
     * @Column(name="status", type="smallint", length="1", unique=false, nullable=false, precision=0, scale=0)
     */
    protected $status = 0;

    /**
     * @var string $date
     *
     * @Column(name="date", type="string", length="255", unique=false, nullable=false, precision=0, scale=0)
     */
    protected $date;

    /**
     * @var string $lang
     *
     * @Column(name="lang", type="string", length="255", unique=false, nullable=false, precision=0, scale=0)
     */
    protected $lang;

    /**
     * __get function.
     * 
     * @access protected
     * @param mixed $property
     * @return void
     */
    public function __get($property) {
        return $this->$property;
    }

    /**
     * __set function.
     * 
     * @access protected
     * @param mixed $property
     * @param mixed $value
     * @return void
     */
    public function __set($property, $value) {
        $this->$property = $value;
    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:34:33.690

使用`cascade={"persist"}`：

```
/**
 *
 * @ManyToOne(targetEntity="Acme\Bundle\AcmeBundle\Entity\Events", cascade={"persist"})
 * @JoinColumns=({
 *  @JoinColumn(name="event", referencedColumnName="id")
 * })
 *
 */
protected $event; 
```

# javascript - 防止损坏的图像框

> ID：12283775
> 
> 赞同：0
> 
> 时间：2012-09-05T14:29:31.527
> 
> 标签：javascript, html

我编写了这个简单的 HTML/JavaScript 代码来以更好的方式在显示器上查看一些 IP 摄像机；当图片不可用时，我希望有前一张图片或至少只有黑色背景，而不是“损坏的图片链接”框。

```
<body style="margin:0; background-color:black;">
<div style="height:100%; background-color:black; position:fixed;">
    <img height="50%" name="Camera1"/>
    <img height="50%" name="Camera2"/>
    <br>
    <img height="50%" name="Camera3"/>
    <img height="50%" name="Camera4"/>
</div>
</body>

<script language="JavaScript">
//<!--
function reloadImage()
{
    var now = new Date();
    var Camera1 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=0&animation=0&name=aa&password=11&time=1346851800&pic_size=2'
    var Camera2 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=1&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851972719.719'
    var Camera3 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=2&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851974247.247'
    var Camera4 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=3&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851975678.678'

    if (document.images)
    {
        document.images.Camera1.src = Camera1 + '?' + now.getTime();
        document.images.Camera2.src = Camera2 + '?' + now.getTime();
        document.images.Camera3.src = Camera3 + '?' + now.getTime();
        document.images.Camera4.src = Camera4 + '?' + now.getTime();
    }
    setTimeout('reloadImage()',1000);
}

setTimeout('reloadImage()',1000);
//--></script> 
```

会是这样吗？（我写了它，但我不太擅长 JavaScript，所以不知道为什么它不起作用：

```
//...(inside the if(document.images)...
var image = new Image;  
image.onerror = function () { blank(this); }    
image.src = Camera1 + '?' + now.getTime();  
document.images.Camera1 = image 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:49:08.350

解决了！

这是代码：

```
<body style="margin:0; background-color:black;">
<div style="height:100%; background-color:black; position:fixed;">
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera1"/>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera2"/>
    <br>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera3"/>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera4"/>
</div>
</body>

<script language="JavaScript">
//<!--

function reloadImage()
{
    var now = new Date();
    var Camera = new Array()
    var Camera1 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=0&animation=0&name=aa&password=11&time=1346851800&pic_size=2'
    var Camera2 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=1&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851972719.719'
    var Camera3 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=2&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851974247.247'
    var Camera4 = 'http://xxxxxx/cgi-bin/wappaint?camera_no=3&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851975678.678'

    if (document.images)
    {
        var image1 = new Image;
        var image2 = new Image;
        var image3 = new Image;
        var image4 = new Image;

        image1.onload = function () { document.images.Camera1.src = image1.src; }
        image2.onload = function () { document.images.Camera2.src = image2.src; }
        image3.onload = function () { document.images.Camera3.src = image3.src; }
        image4.onload = function () { document.images.Camera4.src = image4.src; }

        image1.src = Camera1 + '?' + now.getTime();
        image2.src = Camera2 + '?' + now.getTime();
        image3.src = Camera3 + '?' + now.getTime();
        image4.src = Camera4 + '?' + now.getTime();
    }
    setTimeout('reloadImage()',1000);
}

setTimeout('reloadImage()',1000);
//-->
</script> 
```

# php - 保护会员区的图片等

> ID：12283777
> 
> 赞同：-1
> 
> 时间：2012-09-05T14:29:32.760
> 
> 标签：php, web, security

我创建了一个简单的 PHP 网站，其中包含两个区域 - 一个公共区域和一个会员区域。一切都很好。登录工作和网页都受到非会员用户的保护。但是，我似乎无法保护会员专用图片的直接访问权限。通过直接输入图片的完整 URL，我可以在不登录的情况下完整查看它 - 即[http://www.mysite.com/members/gregs_funny_cat.jpg](http://www.mysite.com/members/gregs_funny_cat.jpg)。

有没有办法通过脚本来禁止这种访问？该网站位于 webhotel 上，我无法访问 .httpaccess。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:33:07.667

如果您有权访问这样的目录，请将您的图像放在 apache 目录之外。那可能是它的父目录或子目录......编写一个PHP脚本从那里打开文件，并在检查用户是否登录后将它们发送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:32:20.083

您可以使用 PHP 读取图像文件，并仅将其回显给具有适当标题的登录用户。就像是

```
if($userLoggedIn)
{ 
    $f = file_get_contents("path/to/jpeg/file.jpg");

    header('Content-Type: image/jpeg');
    echo $f;
} 
```

正如[@Lex 评论](https://stackoverflow.com/questions/12283777/protecting-images-and-such-in-a-member-area/12283833#comment16475469_12283777)所建议的那样，您应该将它们放在 webroot 文件夹之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:42:56.337

如果您有文件，我会将文件放在根文件夹之外。然后通过 php 包装器调用文件，即`<img src="files/file.php?id=01341" />`如果用户有权查看文件，则在 file.php 中输出带有图像标题的文件。在表中，您拥有与您的`01341`令牌相对应的真实图像 URI，这就是 file.php 加载并作为图像输出给请求者的内容。这样，您的服务器文件的真实 URi 将保持隐藏状态，您可以检查每个图像加载的访问权限。

# c# - 为什么 HttpWebRequest.BeginGetResponse() 同步完成？

> ID：12283779
> 
> 赞同：5
> 
> 时间：2012-09-05T14:29:41.507
> 
> 标签：c#, asp.net, .net, performance, c#-4.0

我正在高负载下测试 ASP.NET (.NET 4) Web 应用程序，发现在某些情况下`HttpWebRequest.BeginGetResponse()`同步完成而不会引发任何异常。

在高负载下在多个 ASP.NET 线程中运行以下代码后，我发现“WEBR​​EQUEST COMPLETED SYNC！” 日志中的消息。

```
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
var result = webRequest.BeginGetResponse(internalCallback, userState);
if (result.CompletedSynchronously)
{
    Trace.Error("WEBREQUEST COMPLETED SYNC!");
} 
```

请注意：

1.  如果达到线程池容量，则抛出 InvalidOperationException
2.  如果连接过程中发生错误，则抛出相应的异常

就我而言，没有例外！

我对 System.Net 程序集进行了反编译，发现在某些条件下确实可行。但我不明白这些条件是什么意思（`System.Net.Connection.SubmitRequest(HttpWebRequest request, bool forcedsubmit)`）：

```
if (this.m_Free && this.m_WriteDone && !forcedsubmit && (this.m_WriteList.Count == 0 || request.Pipelined && !request.HasEntityBody && (this.m_CanPipeline && this.m_Pipelining) && !this.m_IsPipelinePaused))
{
  this.m_Free = false;
  needReConnect = this.StartRequest(request, true);
  if (needReConnect == TriState.Unspecified)
  {
    flag = true;
    this.PrepareCloseConnectionSocket(ref returnResult);
    this.Close(0);
  }
} 
```

何时以及为什么这可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:40:46.303

found this for `CompletedSynchronously`property
***使用此属性确定异步操作是否同步完成。例如，如果 I/O 请求很小，则此属性可以为异步 I/O 操作返回 true。***
[这里](http://msdn.microsoft.com/en-us/library/system.iasyncresult.completedsynchronously.aspx)

**编辑：-**我怀疑响应可能会被缓存。因此尝试通过使用停止缓存响应`request.CachePolicy = new HttpRequestCachePolicy(/*caching type*/);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:36:52.190

我的理解是异步方法在 3 种情况下同步完成：

该操作可以很快完成 - 因此同步执行以避免管理异步操作的开销。

在这种情况下，底层实现（或操作系统）不支持异步编程模型 (APM)。

该操作受 CPU 限制，可以在不阻塞的情况下完成。

（简而言之，J.Albahari 和 B.Albahari 取自 c# 的原因）。

# javascript - 使用 jquery 从 json 中删除特定行

> ID：12283780
> 
> 赞同：0
> 
> 时间：2012-09-05T14:29:45.927
> 
> 标签：javascript, jquery, arrays, json

我有这个数组：

```
var array = [{"a":"1","b":"2"},{"a":"3","b":"1"},{"a":"5","b":"4"}] 
```

现在我想删除这条线，比如说，a=5。所以之后数组看起来像这样：

```
var array = [{"a":"1","b":"2"},{"a":"3","b":"1"}] 
```

我如何以最简单和最快的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:32:24.130

您可以使用[`jQuery.map`](http://api.jquery.com/jQuery.map/)which 允许您为要删除的元素返回 null 。

例如：

```
var array = [{"a":"1","b":"2"},{"a":"3","b":"1"},{"a":"5","b":"4"}]
var newArray = $.map(array, function(e){
   return (e.a == "5") ? null : e;
});
// newArray contains [{"a":"1","b":"2"},{"a":"3","b":"1"}] 
```

现场示例（观看控制台）：http: [//jsfiddle.net/2Yz7f/](http://jsfiddle.net/2Yz7f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:51:26.393

Javascript（非 jQuery）方法：http: [//jsfiddle.net/VYKBc/](http://jsfiddle.net/VYKBc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T03:58:00.970

也许这就是你的答案

```
array.splice(2,1); 
```

# iphone - iphone - 我应该使用 NSOperationQueue 和 NSOperation 而不是 NSThread 吗？

> ID：12283787
> 
> 赞同：7
> 
> 时间：2012-09-05T14:30:07.783
> 
> 标签：iphone, objective-c, nsthread, nsoperation, nsoperationqueue

我正面临我的应用程序的设计问题。

* * *

基本上，以下是我将在我的应用程序中执行的操作。

单个任务是这样的：

1.  从底层 CoreData 数据库中读取自定义对象
2.  从 url 下载 json
3.  解析 json 以更新自定义对象或创建一个新对象（解析可能需要 1 - 3 秒，大数据）
4.  分析自定义对象（会涉及一些计算，可能需要 1 - 5 秒）
5.  将自定义对象保存到 CoreData 数据库中。

可能有许多任务同时执行。

一项任务中的步骤显然是`ordered`（即，没有第 2 步下载 json，第 3 步无法继续），但它们也可以是`discrete`. 我的意思是，例如，task2 的第 4 步可以在 task1 的第 3 步之前执行（如果 task2 的下载速度可能比 task1 的快）

任务有优先级。用户可以启动具有更高优先级的任务，因此将尝试在所有其他步骤之前执行该任务的所有步骤。

* * *

我希望 UI 可以尽可能地响应。

所以我打算创建一个优先级最低的 NSThread。

我在该线程中放置了一个自定义优先级事件队列。任务的每一步都成为一个事件（工作单元）。因此，例如，第 1 步下载 json 成为一个事件。下载后，该事件为第 3 步生成另一个事件并放入队列中。每个事件都有自己的优先级设置。

* * *

现在我看到这篇文章：[并发和应用程序设计](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ConcurrencyandApplicationDesign/ConcurrencyandApplicationDesign.html)。苹果建议我们`Move Away from Threads`使用`GCD`or `NSOperation`。

我发现这`NSOperation`非常符合我的草稿设计。但我有以下问题：

*   考虑到 iPhone/iPad cpu 核心，我应该只使用一个 NSOperationQueue 还是创建多个？
*   NSOperationQueue 或 NSOperation 会以最低的线程优先级执行吗？执行是否会影响 UI 响应（我关心，因为这些步骤涉及计算）？
*   我可以从另一个生成一个 NSOperation 并将其放入队列吗？我在 NSOperation 中没有看到队列属性，我怎么知道队列？
*   如何将 NSOperationQueue 与 CoreData 合作？每次访问 CoreData 时，我应该创建一个新的上下文吗？那会贵吗？
*   一个任务的每一步都变成了一个NSOperation，这样的设计对吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:51:14.393

> 考虑到 iPhone/iPad cpu 核心，我应该只使用一个 NSOperationQueue 还是创建多个？

在大多数情况下，两个（CPU、网络+I/O）或三个（CPU、网络、I/O）*串行*队列应该可以很好地工作，以保持应用程序响应并且您的程序流式处理按照它们绑定的内容工作。当然，您可能会发现另一种组合/公式适用于您的特定工作分配。

> NSOperationQueue 或 NSOperation 会以最低的线程优先级执行吗？执行是否会影响 UI 响应（我关心，因为这些步骤涉及计算）？

默认情况下不是。看看`-[NSOperation setThreadPriority:]`是否要降低优先级。

> 我可以从另一个生成一个 NSOperation 并将其放入队列吗？我在 NSOperation 中没有看到队列属性，我怎么知道队列？

当然。如果您使用我概述的串行方法，则很容易找到正确的队列——或者您可以使用 ivar。

> 如何将 NSOperationQueue 与 CoreData 合作？每次访问 CoreData 时，我应该创建一个新的上下文吗？那会贵吗？

（没有意见）

> 一个任务的每一步都变成了一个NSOperation，这样的设计对吗？

是的 - 将您的队列划分为它所绑定的资源是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:48:19.820

*   从外观上看，NSOperationQueue 就是您所追求的。您可以设置同时运行的并发操作数。如果使用多个 NSOperation，它们将同时运行……除非您自己处理队列，这与使用 NSOperationQueue 相同

*   线程优先级……我不太清楚你的意思，但是在iOS中，UI绘制、事件和用户交互都是在主线程上运行的。如果您在后台线程上运行，无论您运行的操作多么复杂或占用大量 CPU 资源，界面仍然会响应

*   您应该在主线程上生成和处理操作，因为它不会花费任何时间，您只需在后台线程中运行它们，这样您的主线程就不会被锁定

*   CoreData，我并没有专门使用它，但是到目前为止，每个Core~我都使用它在后台线程上完美运行，所以它应该不是问题

*   就设计而言，这只是一个观点......至于我，我会为每个任务设置一个 NSOperation，并让它处理所有步骤。如果您想提供一些反馈或继续其他下载或其他内容，可能会在步骤完成时编写回调

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:53:55.370

多线程时计算的影响不会因为您使用 NSThread 而不是 NSOperation 而有所不同。但是请记住，当前的 iOS 设备必须使用双核处理器。

你的一些问题不是很具体。你可能想也可能不想使用多个 NSOperationQueue。这完全取决于你想如何处理它。如果你有不同的 NSOperation 子类或不同的 NSBlockOperations，你可以通过使用优先级来管理执行顺序，或者你可能希望为不同类型的操作使用不同的队列（尤其是在使用串行队列时）。我个人更喜欢在处理相同类型的操作时使用 1 个操作队列，当操作不相关/不可靠时使用不同的操作队列。这使我可以灵活地根据发生的事情（网络中断、应用程序进入后台）取消和停止队列中的操作。

我从来没有找到一个很好的理由来根据当前操作执行期间发生的事情添加操作。如果你需要这样做，你可以使用 NSOperationQueue 的类方法 currentQueue，它会给你当前操作正在运行的操作队列。

如果您正在使用 NSOperation 进行核心数据工作，我建议为每个特定操作创建一个上下文。确保在 main 方法中初始化上下文，因为这是您在 NSOperation 后台执行的正确线程上的位置。

您不一定需要为每个任务拥有一个 NSOperation 对象。您可以下载数据并在 NSOperation 中对其进行解析。您还可以抽象地进行数据下载，并使用 NSOperation 的完成块属性对下载的内容进行数据操作。这将允许您使用相同的对象来获取数据，但有不同的数据操作。

我的建议是阅读 NSOperation、NSBlockOperation 和 NSOperationQueue 的文档。检查您当前的设计，了解如何使这些类适应您当前的项目。我强烈建议你走 NSOperation 家族而不是 NSThread 家族的路线。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:51:05.730

只是添加到@justin的答案

> 如何将 NSOperationQueue 与 CoreData 合作？每次访问 CoreData 时，我应该创建一个新的上下文吗？那会贵吗？

`NSOperation`与 Core Data 一起使用时应该非常小心。
您**必须始终**记住的是，如果您想在单独的线程上运行 CoreData 操作，您必须`NSManagedObjectContext`为该线程创建一个新线程，并共享主线程的托管对象上下文持久存储协调器（“主”MOC 是应用程序委托）。

此外，该线程的新托管对象上下文是**从该线程**创建的，这一点**非常重要**。因此，如果您打算使用 Core Data，请确保在 NSOperation 的方法中初始化新的 MOC，而不是.**`NSOperation``main``init`**

 **[这](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)是一篇关于核心数据和线程的非常好的文章

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T15:34:48.163

使用 GCD - 它是一个比 NS* 更好的框架

将所有 CoreData 访问权保留在一个队列上，并在例程结束时使用 dispatch_async 以保存回 CoreData 数据库。

如果您有开发者帐户，请查看此 WWDC 视频：[https ://developer.apple.com/videos/wwdc/2012/?id=712](https://developer.apple.com/videos/wwdc/2012/?id=712)**

# java - Java Web Launch 兑现第二个 JNLP 文件运行

> ID：12283788
> 
> 赞同：4
> 
> 时间：2012-09-05T14:30:11.870
> 
> 标签：java, java-web-start

我最近从 Java 6 update 34 更新到 Java 7 update 7。从那以后，我无法启动我的 Web 启动应用程序。单击 jnlp 文件的第二次您会看到崩溃“Java(TM) Web Start Stop working”，这是崩溃的详细信息。

```
 Problem Event Name:    BEX
  Application Name: javaws.exe
  Application Version:  10.7.2.10
  Application Timestamp:    503d8a47
  Fault Module Name:    javaws.exe
  Fault Module Version: 10.7.2.10
  Fault Module Timestamp:   503d8a47
  Exception Offset: 00011d9c
  Exception Code:   c0000417
  Exception Data:   00000000
  OS Version:   6.1.7601.2.1.0.768.3
  Locale ID:    1033
  Additional Information 1: 79a7
  Additional Information 2: 79a788ef5b208f5db755fb6fe2ead642
  Additional Information 3: 6ba7
  Additional Information 4: 6ba7cf2c928ae3198a287be9ff3f435 
```

现在，在我更新之前，网络启动正在运行。所以我不确定现在出了什么问题。我已经完成并确保我的缓存已被清除。我已经卸载了java并重新安装了它。我还注意到，在研究这一点时，自 java 7 以来，jnlp url 必须是 SSL。我希望我知道一种方法来改变这一点，因为一旦我完成应用程序，该站点将需要客户端 SSL。

我的主要开发计算机是 Windows 7 64 位，安装的 jre 也是 64 位。

这是我的 JNLP 文件，知道是什么原因造成的吗？

```
<?xml version="1.0" encoding="utf-8"?>
    <jnlp
    spec="1.0+"
    codebase="https://192.168.1.1/java/"
    href="webstart.jnlp?k=29&d=Z4UNLF1uzy%2F1MBX99P6dEFdUul%2BKYXds5kyFZ3YJL6RpHy78tKq1vcH67hppjxVqOeeUsOvTDLxDbAFwMUu4dQ%3D%3D">
    <information>
        <title>My App Name</title>
        <vendor>My Company Name</vendor>
        <description>Description</description>
        <description kind="short">Description</description>
    </information>
    <update check="always" policy="always" />
    <resources>
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se" />
        <property name="sun.awt.disableMixing" value="false"/>
        <property name="jnlp.concurrentDownloads" value="15"/>
        <property name="sun.java2d.opengl" value="true"/>
        <property name="jnlp.packEnabled" value="false"/>
        <jar href="core/Utilities.jar" />
        <jar href="core/DPFP.jar" />
        <jar href="core/SigPad.jar" />
        <jar href="core/Service.jar" />
        <jar href="core/TimeServer.jar" />
        <jar href="core/Marketing.jar" />
        <jar href="core/App.jar" />
        <jar href="core/ElementTest.jar" />
        <jar href="universal/ekitspell.jar" />
        <jar href="universal/DJNativeSwing.jar" />
        <jar href="universal/DJNativeSwing-SWT.jar" />
        <jar href="universal/SigPlus2_57.jar" />
        <jar href="universal/japura.jar" />
        <jar href="universal/ekit.jar" />
        <jar href="universal/RXTXcomm.jar" />
        <jar href="universal/json_simple-1.1.jar" />
    </resources>
    <resources os="Linux">
        <jar href="linux/dpfpenrollment.jar" />
        <jar href="linux/dpfpverification.jar" />
        <jar href="linux/dpotapi.jar" />
        <jar href="linux/dpotjni.jar" />
    </resources>
    <resources os="Mac OS">
        <jar href="mac/OS/swt_mac.jar" />
    </resources>
    <resources os="Mac OS X">
        <jar href="mac/OSX/swt_mac.jar" />
    </resources>
    <resources os="Windows 2000" arch="x86">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86/swt_windows_x86.jar" />
    </resources>
    <resources os="Windows 2000" arch="x86_64">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86_64/swt_windows_x86_64.jar" />
    </resources>
    <resources os="Windows XP" arch="x86">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86/swt_windows_x86.jar" />
    </resources>
    <resources os="Windows XP" arch="x86_64">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86_64/swt_windows_x86_64.jar" />
    </resources>
    <resources os="Windows Vista" arch="x86">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86/swt_windows_x86.jar" />
    </resources>
    <resources os="Windows Vista" arch="x86_64">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86_64/swt_windows_x86_64.jar" />
    </resources>
    <resources os="Windows 2003" arch="x86">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86/swt_windows_x86.jar" />
    </resources>
    <resources os="Windows 2003" arch="x86_64">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86_64/swt_windows_x86_64.jar" />
    </resources>
    <resources os="Windows 7">
        <jar href="windows/dpfpenrollment.jar" />
        <jar href="windows/dpfpverification.jar" />
        <jar href="windows/dpotapi.jar" />
        <jar href="windows/dpotjni.jar" />
        <jar href="windows/x86/swt_windows_x86.jar" />
    </resources>
    <application-desc main-class="com.myapp.Main">
        <argument>k=29</argument>
        <argument>d=Z4UNLF1uzy/1MBX99P6dEFdUul+KYXds5kyFZ3YJL6RpHy78tKq1vcH67hppjxVqOeeUsOvTDLxDbAFwMUu4dQ==</argument>
    </application-desc>
    <security>
        <all-permissions/>
    </security>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:06:22.023

我想答案就在这里： [http ://docs.i9technologies.com/pages/viewpage.action?pageId=3113436](http://docs.i9technologies.com/pages/viewpage.action?pageId=3113436)

# qt - 如何自定义 QToolBar 中动作的外观？

> ID：12283789
> 
> 赞同：1
> 
> 时间：2012-09-05T14:30:18.587
> 
> 标签：qt, qt4, qtoolbar

我刚刚将一些工具栏从 Q3ToolBars（明确添加了 QToolButtons）更改为 Q4 工具栏（直接添加了操作。）

旧的工具按钮周围有一个很好的轮廓，但在新版本中没有显示；Q4 工具栏中的 QActions 看起来就像一行图标。有没有办法改变新版本中的“按钮”样式（假设这些动作可以被认为是这样）并给它们轮廓？我查看了 QToolBar 参考，但 toolButtonStyle() 函数似乎只适用于您是否要显示图标、文本等。

...或者我是否只需要制作实际的工具按钮和/或 QPushButtons 并使用 addWidget()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-12T18:13:37.313

与给定操作关联的小部件可通过[`QToolBar::widgetForAction`](http://doc.qt.io/qt-5/qtoolbar.html#widgetForAction)（从 Qt 4.2 开始）访问。因此，您可以将您的操作传递给此方法，获取`QWidget`它返回的 s ，将它们转换为`QToolBar`，然后像往常一样处理它们（代码未测试）：

```
// ...

auto toolButton =
    static_cast<QToolButton *>(
        m_ui.toolbar->widgetForAction(m_ui.my_Action));

// Will make the toolButton always appear raised:
toolButton->setAutoRaise(false);

// ... 
```

就我一直在测试的情况而言，有些方法可能不起作用（即，`QWidget::hide`），所以请自己进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:51:52.157

是的，当然你可以用两种不同的方式编辑 QToolButtons 的外观：

1.  [您可以使用void QWidget::setStyleSheet(const QString &)](http://doc.qt.nokia.com/4.7-snapshot/qwidget.html#styleSheet-prop)设置它的样式表
2.  [您可以使用新的paintEvent](http://doc.qt.nokia.com/4.7-snapshot/qtoolbutton.html#paintEvent)函数重新实现 QToolButtons 类，您可以在其中准确设置按钮的外观。

# python - 根据给定索引计算列表中剩余项目的数量

> ID：12283790
> 
> 赞同：1
> 
> 时间：2012-09-05T14:30:19.087
> 
> 标签：python

我赞成这样一个新问题，但是....

如果我有一个清单：

```
my_list = [1,2,3,4,5,6,7] 
```

我想知道在给定索引之后还剩下多少项目，这样做最pythonic的方式是什么？我能想到的最好的是

```
remainder = len(my_list[index:])-1 
```

甚至更糟：

```
remainder = (len(my_list) - index) -1 
```

在第一个示例中，我必须添加幻数 1，因为切片是包容性的，在第二个示例中，我必须使用幻数 1 来纠正索引从零开始而长度不是的事实！我确信有一种更简单、更 Pythonic 的方法可以做到这一点，同样当我看到它时我会踢自己！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:32:16.250

我认为最 Pythonic 的选项是：

```
len(my_list[index+1:]) 
```

因为这描绘了您要计算的正确*含义。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:34:51.977

我想第二个很好：

```
>>> my_list = [1,2,3,4,5,6,7]
>>> length=len(my_list)
>>> index=2
>>> length-(index+1)  #remaining elements are [4,5,6,7]
4
>>> index=4
>>> length-(index+1)  #remaining elements are [6,7]
2 
```

`Timeit`结果，证明第二个比第一个切片更快：

```
import random
def func1():
    lis=list(xrange(100))
    for i in xrange(100):
        index=random.randrange(0,100)
        remainder = len(lis[index:])-1
def func2():
    lis=list(xrange(100))
    for i in xrange(100):
        index=random.randrange(0,100)
        remainder = (len(lis) - index) -1

if __name__ == '__main__':
    from timeit import Timer
    t = Timer("func2()", "from __main__ import func2")
    print t.timeit()    
    t = Timer("func1()", "from __main__ import func1")
    print t.timeit() 
```

**输出：**

```
47.001240015
52.2959749699 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:43:26.617

`range`切片是对（`xrange`在 Python 2 中）的补充：

```
len(range(index + 1, len(my_list))) 
```

给你的长度`my_list[index + 1:]`。

更准确地说（允许例如负结束索引），您可以使用：

```
len(range(*slice(index + 1, None).indices(len(my_list)))) 
```

NumPy 有一个优雅的`s_`对象来将切片索引转换为切片对象：

```
import numpy as np
len(range(*np.s_[index + 1:].indices(len(my_list)))) 
```

# java - 确定一周中特定日期的日期

> ID：12283794
> 
> 赞同：0
> 
> 时间：2012-09-05T14:30:26.613
> 
> 标签：java, date, dayofweek

Java Q：在任何一天，我都想确定（比如说）上周五是哪一天。示例：如果我今天运行我的程序（即 2012 年 9 月 5 日，星期三），我应该得到“上周五是 12 年 8 月 31 日”的结果。如果我在 2012 年 9 月 8 日星期六运行它，结果应该是 12 年 9 月 7 日，依此类推（不过，日期格式在这里并不是严格的问题）

是否有任何可用的api，或者我是否需要根据当天编写一个详细的程序，等等？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:36:54.057

这个怎么样：

```
Calendar cal = Calendar.getInstance();
int day = cal.get(Calendar.DAY_OF_WEEK);
cal.add(Calendar.DAY_OF_MONTH, -((day + 1) % 7));
Date lastFriday = cal.getTime(); 
```

我们总是可以通过减去当前日期的 Calendar.DAY_OF_WEEK 值加上 1 来返回上一个星期五。例如，如果当前日期是星期一（值 = 2）并且我们减去 (2 + 1)，我们会返回 3几天到星期五。如果我们在星期二做同样的事情，我们会返回 (3 + 1) 天 - 也是星期五。

如果当前日期是星期五或星期六，我们需要确保我们只返回 0 或 1 天，所以我们只`(day + 1)`取值的 mod 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:27:26.330

```
int day = cal.get(Calendar.DAY_OF_WEEK);  
int dayDiff = (day+1)%7;  
if(dayDiff == 0)  
  dayDiff = 7;  
cal.add(Calendar.DAY_OF_MONTH, - dayDiff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-29T20:16:35.043

我最近开发了专门为此用例设计的[Lamma Date ：](http://lamma.io)

```
new Date(2014, 7, 1).previous(DayOfWeek.FRIDAY); // 2014-06-27
new Date(2014, 7, 2).previous(DayOfWeek.FRIDAY); // 2014-06-27
new Date(2014, 7, 3).previous(DayOfWeek.FRIDAY); // 2014-06-27
new Date(2014, 7, 4).previous(DayOfWeek.FRIDAY); // 2014-06-27
new Date(2014, 7, 5).previous(DayOfWeek.FRIDAY); // 2014-07-04
new Date(2014, 7, 6).previous(DayOfWeek.FRIDAY); // 2014-07-04
new Date(2014, 7, 7).previous(DayOfWeek.FRIDAY); // 2014-07-04 
```

# ios - iOS：在通用应用程序每次启动时播放视频

> ID：12283797
> 
> 赞同：1
> 
> 时间：2012-09-05T14:30:33.003
> 
> 标签：ios, mpmovieplayercontroller, startup, ios-universal-app

我正在开发一个通用的 iOS 应用程序。在启动时应该显示一个简短的介绍视频，但我无法弄清楚如何正确处理这两种设备类型。它是一个主从应用程序。那么我应该何时何地加载我的视频以在启动时查看它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:41:40.847

如果您只想在初始启动时使用它，请将播放代码放入

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

或者，如果您想在每次应用激活时播放

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

# c++ - 将指向自定义对象的指针向量存储到文件中

> ID：12283800
> 
> 赞同：1
> 
> 时间：2012-09-05T14:30:44.693
> 
> 标签：c++, boost, boost-serialization

我正在使用 boost 示例代码将对象指针向量存储在文件中。我的向量是：

```
class VOMC{
public:
    vector<State*> vomc;
...
...
private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & vomc;
    }
} 
```

这给了我以下错误（还有更多）：

```
/usr/local/include/boost/serialization/access.hpp:118:9: error: ‘class State’ has no member named ‘serialize’ 
```

错误可能告诉我我还应该使我的*State*对象可序列化（不确定那个）。此外，我很困惑，因为存储指针（内存地址）不存储实际数据，这些数据将在程序终止时释放。有没有针对上述情况的解决方法？即使没有升压。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:34:53.207

你需要`serialize`为你的`State`班级提供方法。

[http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)

> 数组 stop 的每个成员都将被序列化。但请记住，每个成员都是一个指针——那么这到底意味着什么？这种序列化的整个目标是允许在另一个地点和时间重建原始数据结构。**为了使用指针完成此操作，仅保存指针的值是不够的，必须保存它指向的对象。稍后加载该成员时，必须创建一个新对象，并且必须将一个新指针加载到类成员**中。

另外我认为您应该阅读有关[指针序列化的信息](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/serialization.html#pointeroperators)

# ios - iOS - 仅当 Table 为空时如何增加 UITableView 第一行的高度？

> ID：12283805
> 
> 赞同：0
> 
> 时间：2012-09-05T14:30:49.950
> 
> 标签：ios, uitableview

我是 iOS 开发的新手。

我想检查我的桌子是否是空的。如果是，我想：

* * *

增加第一行的高度并显示`"No new messages!"`

**或者**

摆脱表格，只显示`"No new messages"`在页面的中心。

* * *

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:37:40.810

（假设您有一个要从中填充表格视图的数组。这是填充表格视图的一种非常标准的方法。我们称之为理论数组`dataArr`。）

在您的数据源中：

```
- (NSUInteger)tableView:(UITableView *)tv numberOfRowsInSection:(NSUInteger)section
{
    if ([dataArr count] == 0) {
        // empty table
        return 1;
    }
    return [dataArr count];
}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)ip
{
    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:@"someCellID"];
    if (cell == nil)
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"someCellID"] autorelease];

    if ([dataArr count] == 0) {
        // empty table
        cell.textLabel.text = @"No new messages";
    } else {
        // configure as normally
    }
    return cell;
} 
```

在您的代表中：

```
- (CGFloat)tableView:(UITableView *)tv heightForRowAtIndexPath:(NSIndexPath *)ip
{
    if ([dataArr count] == 0) {
        // empty table
        return 88.0f; // 2 times the normal height
    }
    // else return the normal height:
    return 44.0f;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:33:25.803

这应该有助于：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([tableView numberOfRowsInSection:1] == 0) {
        return 200;//some other height
    }else{
        return 44;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:36:32.740

我想您有一系列要显示的消息

您可以使用该功能为单元格定义自定义高度

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

       if (messages.count == 0)
           return 80;
       else
           return 44;
 } 
```

然后，当您创建单元格时：（确保“无新消息”单元格的单元格标识符与常规单元格不同，这样您的单元格重复使用不会搞砸）

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (messages.count == 0) {
        // create the "No New Messages" cell
    }
    else {
        // create regular cells
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:34:48.643

基本上你想检查你的数据源，看看你是否在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`和`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

例如：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([data count] == 0) return 100;
    else return 44;
} 
```

# ruby-on-rails - 为什么 PostgreSQL 中文本字段的字符限制为 255 会出错？

> ID：12283806
> 
> 赞同：3
> 
> 时间：2012-09-05T14:30:55.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku

在找到 2 个与字符串与文本字段相关的 SO 问题后，我发现链接字段***已经是***文本：

```
create_table "answers", :force => true do |t|
  t.string   "text"
  t.text     "link" 
```

为什么 Postgres 会抛出以下错误：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  value too long for type character varying(255) 
```

我尝试了迁移`change_column :answers, :link, :text, :limit => nil`，但我认为这没有任何作用。

编辑：所以，问题是架构说该字段是文本，但实际上它是字符串：

```
Answer.new.column_for_attribute('link').type
=> :string 
```

修复它的最佳方法是什么？通过从模式重建数据库？通过将其更改为字符串然后返回文本？

Rails 3.2.2、Postgres 9、Heroku。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:32:49.830

不太确定它是如何发生的，但有以下情况之一：

1.  我在运行迁移后检查了架构，所以实际上它是同步的。
2.  我进行了迁移以将类型更改为字符串，从而使架构同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:14:24.190

使用发送到 Postgres 的原始 SQL 语句编写迁移。只需调用`execute`您在 psql 控制台中直接运行的任何内容。这是准确了解您的数据库将处于何种状态的最佳方式。通常，这比让 Rails 为您定义架构更好。您真的应该定期查看您的架构，尤其是在运行迁移之后。

# apache - 为什么不同域中的浏览器根本不响应 mod_auth_kerb 发送的“WWW Authenticate : Negotiate”标头？

> ID：12283808
> 
> 赞同：5
> 
> 时间：2012-09-05T14:31:00.980
> 
> 标签：apache, single-sign-on, kerberos, spnego, gssapi

我已经在我们的 apache-active 目录环境中通过 mod_auth_kerb 实现了 SSO，它按预期工作。然而，以下知识困扰着我：

我从两台客户端机器请求了一个受 Kerberos 保护的页面，一个用户属于 Kerberos-setup 域，另一个用户属于其他某个域。然后我比较了两台机器上的 HTTP 数据包。在两台机器上，发送对 Kerberos 保护页面的请求后，服务器会使用以下 HTTP 数据包进行响应：

*HTTP/1.1 401 Authorization Required Date: Wed, 05 Sep 2012 14:25:20 GMT 服务器：Apache WWW-Authenticate : 协商 WWW-Authenticate: Basic realm="Kerberos Login" Content-Length: 60 Connection: close Content-Type: text/html; 字符集=iso-8859-1*

但是，在来自服务器的上述响应之后，属于 Kerberos-setup 域的客户端计算机浏览器以*WWW-Authenticate : Negotiate 'token'*响应，而其他客户端浏览器（属于其他某个域的用户）根本不响应.

现在我的理解是，属于另一个域的客户端也应该用它自己的 TGT+Session 密钥令牌进行响应，活动目录应该拒绝它。但是为什么这个客户端根本不响应服务器的*WWW-Authenticate : Negotiate*挑战超出了我的逻辑。更令人困惑的是，服务器的 HTTP 响应（如上所示）不包含有关它链接到的域的任何信息。

那么，属于正确域的客户端浏览器基于什么决定它必须响应服务器的*WWW-Authenticate : Negotiate* challenge，以及属于某个其他域的客户端基于什么决定不响应相同的请求？

注意：两台客户端机器都有 Windows 7，活动目录是 Windows 2008 服务器。

我正在尝试了解 mod_auth_kerb 的 SSO 实现，而这一特定知识是其中的关键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:31:27.337

The module has the option `KrbMethodK5Passwd` turned on. It sends a Basic header to collect you Kerberos credentials. This is pointless for a non-domain client. Disable this option.

There is a hierarchy of strengths of auth mechanisms, the browser is obliged to choose the best. This is: Negotiate, Digest, NTLM, Basic.

# javascript - 这个 javascript 单例是如何工作的？

> ID：12283811
> 
> 赞同：0
> 
> 时间：2012-09-05T14:31:05.653
> 
> 标签：javascript, singleton

阅读单例函数的定义，我可以看到它是如何成为单例的。

**但是用法让我感到困惑，您不必调用getInstance吗？**

```
var mySingleton = (function () {

  // Instance stores a reference to the Singleton
  var instance;

  function init() {

    // Singleton

    // Private methods and variables
    function privateMethod(){
        console.log( "I am private" );
    }

    var privateVariable = "Im also private";

    return {

      // Public methods and variables
      publicMethod: function () {
        console.log( "The public can see me!" );
      },

      publicProperty: "I am also public"
    };

  };

  return {

    // Get the Singleton instance if one exists
    // or create one if it doesn't
    getInstance: function () {

      if ( !instance ) {
        instance = init();
      }

      return instance;
    }

  };

})();

// Usage:

var singleA = mySingleton;
var singleB = mySingleton;
console.log( singleA === singleB ); // true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:38:04.913

正如 Yoshi 所说，使用线是错误的。

它应该是

```
var singleA = mySingleton.getInstance();
var singleB = mySingleton.getInstance();
console.log( singleA === singleB ); // true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:59:42.377

Jerry 的最后三行可能应该在您的示例中，但我认为您需要更多地了解此代码中发生的情况，以了解为什么 Jarry 提供的示例和您的原始代码都评估为 true。

以原始示例中的这行代码为例：

```
var singleA = mySingleton; 
```

你在这里说的是singleA等于对mySingleton的引用，然后当你将mySingleton分配给singleB时，你只是给singleB同样的对mySingleton的引用（在mySingleton中没有调用任何代码，你只是在设置一个引用）。因此，您正在比较与自身相同的精确引用：对 mySingleton 的引用。

以下是 Jarry 的代码的工作原理，换行：

```
var singleA = mySingleton.getInstance(); 
```

这会导致 mySingleton 对象在其中实际调用一个创建单例对象的函数。在第一次调用此函数时，它会在代码中创建一个新对象，并且在随后的每次调用中，它将返回创建的相同对象（这是基于 init() 中的代码）。

这意味着当您使用 mySingleton.getInstance 时，您正在创建一个新对象并将 singleA 设置为对该对象的引用。然后，当您为“var singleB = mySingleton.getInstance()”调用“mySingleton.getInstance()”时，它会返回上一行创建的同一对象的引用并将其分配给 singleB。所以当你说完了，比较 singleA === singleB 是正确的，因为你正在比较对自身的相同精确引用：对 mySingleton 创建的对象的引用。

# sql-server-2005 - @@nestlevel = 1 的调用存储过程的名称

> ID：12283812
> 
> 赞同：1
> 
> 时间：2012-09-05T14:31:06.800
> 
> 标签：sql-server-2005

我有一个嵌套在其他几个存储过程中的存储过程。有没有办法告诉（在内部存储过程中）哪个是调用者？

```
CREATE PROC int_proc 
AS

SELECT int_name = OBJECT_NAME(@@PROCID)
      ,ext_name = 'How can I tell which is the ext_proc name?'
      ,nestlevel = @@NESTLEVEL

GO
CREATE PROC ext_proc1
AS
SELECT ext_name = OBJECT_NAME(@@PROCID),nestlevel = @@NESTLEVEL
EXECUTE int_proc

GO
CREATE PROC ext_proc2
AS
SELECT ext_name = OBJECT_NAME(@@PROCID),nestlevel = @@NESTLEVEL
EXECUTE int_proc

GO

EXEC ext_proc1
EXEC ext_proc2 
```

我正在使用 SQL-Server 2005

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:34:00.073

不，没有。“堆栈”对我们不可用

你为什么需要这个？仅供参考，我将@@PROCID 传递给一个常见的错误记录存储过程。所以这有一些用途。但在 SQL 中没有本机

# c++ - 如何使用 Qt Designer 创建模板小部件类？

> ID：12283814
> 
> 赞同：0
> 
> 时间：2012-09-05T14:31:11.433
> 
> 标签：c++, qt, templates, widget, qt-designer

我的目标是创建两个小部件来编辑直方图（一维和二维）。它们都由几个标准小部件（滑块、旋转框、按钮等）和实际的绘图小部件组成。除了绘图小部件之外，它们完全相同。我认为最好使用绘图小部件类作为模板参数创建一个模板类，以避免代码重复。

现在的问题是：我希望能够使用 Qt Designer 构建/修改这个编辑器小部件。但我想不出一种方法来实现这一点。

你知道这是否可能吗？

我宁愿不必把这个小部件放在纯 C++ 代码中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:35:04.763

首先也是最重要的 - Q_OBJECT 和模板不混合。至少你绝对不能在同一个类中使用模板参数和 Q_OBJECT 宏。

至于您的问题 - 我通常在父布局上放置一个占位符小部件，并在运行时将可互换小部件放置在其上。当然，这不是“在设计器中编辑”，但这对我来说非常有效。

# html - 嵌套在表格中时使用 css 调整图像大小

> ID：12283818
> 
> 赞同：1
> 
> 时间：2012-09-05T14:31:14.813
> 
> 标签：html, css

我正在尝试创建一个动态站点，该站点将在整个页面的各个区域显示指定的个人资料图像。

因此，我希望只有一个文件，并调整它的大小以适应每个区域，就像 Facebook 对其用户组和个人资料图片所做的那样。

在我尝试将图像放入表格之前，我这样做没有问题：

HTML

```
<table width='600px'>
    <tr>
        <td rowspan="3" width="75px" height="75px">
            <div id="cp_image" class="hidden rborder">
                <img class="cp_img_resize" src="<?php echo $profile[0]['cp_img_loc'] ?>"/>
            </div>
        </td>
        <td>    
            <strong><?php echo $profile[0]['name'] ?></strong>
        </td>
    </tr>
        <tr>
        <td>            
            <em><?php echo $profile[0]['description']?></em>
        </td>
    </tr>
    <tr>
        <td><?php echo $popular ?></td>
    </tr>
</table> 
```

我的 CSS

```
#cp_image {
    width: 100px;
    height: 100px;
}

#cp_name {
    height: 35px;
    min-width: 200px;
}

.cp_img_resize {
    width:100px;
    height: auto;
} 
```

有什么我想念的吗？图像没有调整大小的任何原因？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:35:37.560

您正在将图像 TD inline 的宽度设置为较小的 px：

```
<td rowspan="3" width="75px" height="75px"> 
```

TD 的宽度会覆盖您为 IMG 声明的宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:45:16.417

见[http://jsfiddle.net/DmnV7/2/](http://jsfiddle.net/DmnV7/2/)

CSS：

```
.table{
    width:600px;
}
.cp_img{
    height:75px;
    width:75px;
}

.cp_img>img {
    max-height:75px;
    max-width:75px;
    display:block;
    margin:0 auto;
} 
```

HTML：

```
<table class="table">
    <tr>
        <td rowspan="3" class="cp_img">
            <img src="[image]" />
        </td>
        <td>    
            <strong>Name</strong>
        </td>
    </tr>
        <tr>
        <td>            
            <em>Description</em>
        </td>
    </tr>
    <tr>
        <td>Popular</td>
    </tr>
</table> 
```

# javascript - 在进行选择更改时更改动态 div 内的文本 jquery

> ID：12283819
> 
> 赞同：0
> 
> 时间：2012-09-05T14:31:15.403
> 
> 标签：javascript, jquery

我有一个动态给定的下拉标题，我目前可以在页面加载时更改它。但是一旦我从下拉列表中选择了一个项目，它就会变回来。我正在寻找一个简单的 jquery js 解决方案，可以在选择项目时帮助保留名称。

我需要更改以下文本：#shippingStateSpan from Destination State -> Destination Province，即使在选择某些内容后也要离开。

这是我的html：

```
<div class="shippingStateDiv">
    <span id="shippingStateSpan">Destination State<br />
    </span>
    <select name="shippingState" id="shippingState" class="shippingDropDown"
         onchange="ApplyTaxRate(this.value,4040828,1,1,0);">
             <option value="-1" selected="selected">Please Select</option>
             <option value="129654">AB</option>
             <option value="129653">BC</option>
             <option value="129652">MB</option>
             <option value="129647">NB</option>
    </select>
</div> 
```

这是我最初用来进行更改的 js（但在我选择某些内容后它会变回来）我认为 jquery .on 函数可能是可能的，但我不知道该怎么做。谢谢您的帮助。

```
<script type="text/javascript">
     $("#shippingStateSpan").text("Destination Province");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:38:59.193

尝试这个：

```
$(document).ready(function(){

  var $select = $('#shippingState'),
      $span = $('#shippingStateSpan');

  $select.on('change', function(){

    $span.html('Destination Province');

  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:12:30.747

尝试这个

```
​$(function() {

    $('#shippingState').on('change', function() {

        $('#shippingStateSpan').text('Destination Province')
    });

});​ 
```

在这里查看工作示例[http://jsfiddle.net/sushanth009/zp7bA/](http://jsfiddle.net/sushanth009/zp7bA/)

# android - AndEngine 壁纸旋转屏幕错误

> ID：12283824
> 
> 赞同：0
> 
> 时间：2012-09-05T14:31:36.050
> 
> 标签：android, andengine, live-wallpaper

我正在 AndEngine 框架上开发 Android 动态壁纸。在我在模拟器壁纸中更改屏幕方向的那一刻，由于错误而崩溃：

```
09-05 14:25:32.003: E/AndroidRuntime(1310): FATAL EXCEPTION: GLThread 154
09-05 14:25:32.003: E/AndroidRuntime(1310): java.lang.OutOfMemoryError
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.opengl.util.GLHelper.getPixelsARGB_8888(GLHelper.java:165)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.opengl.util.GLHelper.getPixels(GLHelper.java:41)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.opengl.util.GLState.glTexImage2D(GLState.java:637)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.opengl.texture.bitmap.BitmapTexture.writeTextureToHardware(BitmapTexture.java:120)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.opengl.texture.Texture.loadToHardware(Texture.java:137)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.opengl.texture.TextureManager.updateTextures(TextureManager.java:254)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.engine.Engine.onDrawFrame(Engine.java:613)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.opengl.view.EngineRenderer.onDrawFrame(EngineRenderer.java:105)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.extension.opengl.GLThread.guardedRun(GLThread.java:219)
09-05 14:25:32.003: E/AndroidRuntime(1310):     at org.andengine.extension.opengl.GLThread.run(GLThread.java:95) 
```

只有在壁纸中有许多动画精灵时才会出现错误。任何人都可以帮助我吗？抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:24:50.940

显然，该错误意味着您没有足够的内存。显然，当方向改变时，应用程序将精灵重新加载到内存中，而无需先卸载旧的精灵。您可以尝试`System.gc()`在方向更改时调用以释放现在无用精灵占用的内存。您也可以尝试手动卸载它们，因为那里可能存在内存泄漏。

看这个讲座，它可以帮助你： [http ://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

# android - 通话时需要知道手机离用户耳朵远还是近

> ID：12283827
> 
> 赞同：1
> 
> 时间：2012-09-05T14:31:51.947
> 
> 标签：android, sensors, proximity

我想在用户通话时跟踪手机的位置。**我不想为它注册接近传感器，因为它是多余的，我不想计算我身上**的传感器电池消耗，系统在通话开始时无论如何都会使用接近传感器。

我的问题是如何获得手机相对于用户耳朵的位置（Android 日志术语中的“远”/“近”）？

谢谢布什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:36:32.830

据我所知，接近传感器是检查与用户面部距离的最佳方式。

但是，如果您愿意提出一些好的算法，您可以尝试使用加速度计和麦克风。但是，两个应用程序可能无法同时使用麦克风。

如果用户的设备正在触摸他们的脸，那么从一个方向到另一个方向变化的加速度计运动将会减少。但是，如果手机被拿开，就会有些晃动。如果加速度计读数完全没有变化，则很可能是躺在桌子上，而用户正在使用扬声器或耳机通话。

# java - 插入查询中的preparedStatement问题

> ID：12283837
> 
> 赞同：0
> 
> 时间：2012-09-05T14:32:27.953
> 
> 标签：java, mysql, sql, prepared-statement

我在 MySQL 数据库中有一个 13 列的表，第一个是自动递增的，其余的都是正常的，我有这个：

```
 SQL="INSERT INTO cuentas (id_proveedor_cloud,id_esquema_asociado,id_tipo_cuenta,n_cuenta,nombre_cuenta,cod_cliente"+ 
            "descuento,f_creacion,borrado,f_borrado,id_cuenta_ccis,logo)"+
            " VALUES("+             
            "?,?,?,?,?,?,?,?,?,?,?,?);";

            this.pstm = this.conexion.prepareStatement(SQL);
            this.pstm.setInt(1, proveedor);
            this.pstm.setInt(2, esquema);
            this.pstm.setInt(3, cuenta.getNivel());
            this.pstm.setString(4,num_c);
            this.pstm.setString(5, cuenta.getNombre_cuenta());
            this.pstm.setString(6, "");
            this.pstm.setDouble(7, cuenta.getDescuento());
            this.pstm.setString(8,dateFormat.format(cal.getTime()).toString());
            this.pstm.setBoolean(9, cuenta.isBorrado());
            if(cuenta.isBorrado()==false){
               this.pstm.setString(10,null);
            }else{
                this.pstm.setString(10, dateFormat.format(cal.getTime()).toString());
            }
            this.pstm.setInt(11, cuenta.getId_cuenta_padre());
           this.pstm.setBytes(12, cuenta.getLogo());
int ejecutado =  this.pstm.executeUpdate(); 
```

我有下一个错误：`java.sql.SQLException: Column count doesn't match value count at row 1`，为什么？

自动递增的列显然不在这里，所以没有它，它们是 12 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:35:38.580

您发布的错误非常清楚，您列出的列名与子句中列出的值不匹配`VALUES`，这可能是因为您错过了`,`第一行末尾的 ，请尝试以下操作：

```
 You missed this , here------
                                                                      |
INSERT INTO cuentas (id_proveedor_cloud,id_esquema_asociado,         \|/
                     id_tipo_cuenta,n_cuenta,nombre_cuenta,cod_cliente, 
            descuento,f_creacion,borrado,f_borrado,id_cuenta_ccis,logo
VALUES("+             
            "?,?,?,?,?,?,?,?,?,?,?,?);"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:35:12.317

您的姓名中有 11 个字段，但有 12 个问号。

您可能`,`在第一行的末尾缺少 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:35:28.653

您只有 11 个字段

```
cuentas (id_proveedor_cloud,
id_esquema_asociado,
id_tipo_cuenta,
n_cuenta,
nombre_cuenta,
cod_clientedescuento,
f_creacion,
borrado,
f_borrado,
id_cuenta_
ccis,logo) 
```

# php - codeigniter $this->post->input 没有发布全部价值

> ID：12283838
> 
> 赞同：0
> 
> 时间：2012-09-05T14:32:28.657
> 
> 标签：php, codeigniter

我有一个用于上传嵌入代码的文本区域。当我发布嵌入代码时，它没有发布完整代码。这是我的嵌入代码

```
<iframe frameborder="0" width="480" height="308" src="http://www.dailymotion.com/embed/video/xt7dgo?autoplay=0&logo=0&hideInfos=1&start=0&syndication=108944&foreground=%23F7FFFD&highlight=%23FFC300&background=%23171D1B"></iframe> 
```

这是我得到这个的 php 代码。

```
public function embeded(){
    $this->form_validation->set_rules('video_heading', 'Video heading', 'required|trim|xss_clean');
    $this->form_validation->set_rules('embeded', 'Embeded code', 'required|trim|xss_clean');
    $this->load->model('videos');
    $error['error']="";
    if ($this->form_validation->run() == FALSE)
    {
        $error['error']= validation_errors();
        $this->load->view('sidebar');
        $this->load->view('addvideo', $error);
        $this->load->view('footer');
    }else{
        //<iframe width="420" height="315" src="http://www.youtube.com/embed/Niiyh3sxwYk" frameborder="0" allowfullscreen></iframe>
        $plink=$this->videos->processlink($this->input->post('embeded'));
        $info = array('heading'=>$this->input->post('video_heading'),
        'status'=>$this->input->post('status'),'video'=>$plink,
        'comment'=>$this->input->post('comment'),'category'=>$this->input->post('category'));   
        $this->load->model('videos');
        $obj= (object)$info;
        echo "opsted_link".str_replace("syndication","syndicate", $_POST['embeded']);
        if(isset($_POST['embeded']))
         {
              echo $_POST['embeded'];exit;
         }
        //$this->videos->addembededvideo($obj);
    }

} 
```

当我使用它时，我得到部分像这样的 i 框架代码。

```
<iframe frameborder="0" width="480" height="308" src="http://www.dailymotion.com/embed/video/xt7dgo?autoplay=0&logo=0&hideInfos=1&start=0&syndicati></iframe> 
```

我将 src 中的参数 syndication=108944 更改为 syndicator=108944。

现在我得到了完整的网址！

“联合”是任何保留字吗？为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:06:29.650

我做了这样的事情。

这是我的控制器中的方法：

```
function framex()
{
    $this->load->helper('form');
    if(isset($_POST['frame']))
    {
        echo $_POST['frame'];exit;
    }
    $this->load->view('deneme');
} 
```

这是查看页面：

```
<?php
    echo form_open('deneme/framex');
?>

<textarea name="frame"></textarea>

<?php 
    echo form_submit('submit','Submit');
    echo form_close();
?> 
```

有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:59:24.350

您的输入有可能被 XSS 过滤器捕获。这正是 XSS 过滤器的设计目的；保护您的站点免受跨站点脚本攻击。尝试删除`xss_clean`规则进行测试，但**请注意**，不要将其投入生产。

我对您的建议是仅通过 HTTP（以您的形式）发送视频 ID。在这个特定的dailymotion视频中，您可以找到ID `xt7dgo`：。`<iframe>`它确实是标签中唯一重要的信息。

其余的属性是自动播放、标志（开或关）、隐藏信息（开或关）、开始...等。所有这些属性都可以在服务器上重新创建。使用服务器回显`<iframe>`标签 + 提交的 id + 所有其他属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:38:28.180

它在这里，在函数中`line 607`或函数中，存在错误。正在调用它。`2nd line``_remove_evil_attributes``System/core/Security.php``xss_clean`

```
$evil_attributes = array('on\w*', 'style', 'xmlns', 'formaction'); 
```

我什至不知道这是否是一个错误。他们基本上是试图提供安全性

```
// All javascript event handlers (e.g. onload, onclick, onmouseover), style, and xmlns 
```

所以，我猜你必须与它有关。或者，您可以将“syndication”更改为“syndicator”（就像您现在正在做的那样），然后再将其转换回`xss_clean`syndication。

# rest - 对服务使用的 DTO 中的可编辑列表进行建模

> ID：12283839
> 
> 赞同：1
> 
> 时间：2012-09-05T14:32:35.863
> 
> 标签：rest, servicestack

假设您有以下联系 DTO。Address/PhoneNumber/EmailAddress/WebSiteAddress 类也是简单的 DTO（只是数据没有行为）

```
public class Contact
{
    public Address[] Addresses { get; set; }
    public PhoneNumber[] PhoneNumbers { get; set; }
    public EmailAddress[] EmailAddresses { get; set; }
    public WebSiteAddress[] WebSiteAddresses { get; set; }
} 
```

我应该如何对 DTO 建模以允许实现以下行为？

客户端可以提交一个请求，该请求将

*   添加一个电话号码，更新两个电话号码并删除两个添加两个
*   添加两个电子邮件地址，更新一个电子邮件地址并删除三个
*   添加三个网址，更新两个网址，删除两个。你明白了。

    一种选择是为每个地址/电话号码/电子邮件地址/网站地址添加一个操作属性。

那么更新地址的代码如下所示：

```
 var addressesToUpdate = serviceContact.Addresses.Where(x =>  x.AddressAction.ToUpper() == "UPDATE");
        var addressesToAdd = serviceContact.Addresses.Where(x => x.AddressAction.ToUpper() == "ADD");
        var addressesToDelete = serviceContact.Addresses.Where(x => x.AddressAction.ToUpper() == "DELETE").Select(x => x.AddressId); 
```

对所有其他列表重复此操作可能会产生重复。

我的问题是：

我应该如何使用可更新列表对服务 DTO 建模，同时避免重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:49:10.810

一般来说，我会尽量保持我的写入是[幂等](http://en.wikipedia.org/wiki/Idempotence)的，这意味着当您没有记录或所有记录（即存储或更新）时调用它应该具有相同的副作用（即最终结果）。

基本上这意味着客户端发送**完整的状态**：即

*   哪些条目不存在 => 被创建，
*   已经存在的实体 => 得到更新，
*   虽然不在请求 DTO => 中的实体被删除。

[OrmLite 的](https://github.com/ServiceStack/ServiceStack.OrmLite) `db.Save()`命令对此有很好的支持，它检测记录是否已经存在并发出更新，否则将插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:22:32.320

您可以将[ETag](http://en.wikipedia.org/wiki/HTTP_ETag)用于条件请求，而不是提供完整状态。使用 ETag 作为列表的版本，并在每次列表更改时更改它。在客户端，使用 ETag 使用 If-None-Match http 标头请求更新，如果在发送请求时列表发生更改，则准备接收 402 Precondition Failed 状态。

# ruby-on-rails - 如何计算 ActiveRecord .group 查询的结果？链接 .count 返回一个哈希

> ID：12283847
> 
> 赞同：17
> 
> 时间：2012-09-05T14:33:10.417
> 
> 标签：ruby-on-rails, activerecord

我可以使用以下内容：

```
User.where("zip_code = '48104'").group('users.id').count 
```

要获得像这样的哈希：

```
{195=>1, 106=>1, 120=>1, 227=>1, 247=>1, 264=>1, 410=>1} 
```

有没有办法可以计算这些哈希值，只返回**7**，而不是上面的结果？

我知道这在上述情况下没有意义，我可以通过不使用**group**子句来做到这一点。但是我正在处理一个更复杂的查询，我需要在其中实现它。提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-05T14:37:43.250

尝试：

```
User.where("zip_code = '48104'").group('users.id').count.length 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-09T21:41:45.243

接受的答案不可扩展。对具有 25,000 个匹配用户的查询使用@robbrit 的方法会将 25,000 个结果（即具有 25,000 个元素的数组）拉入内存，然后计算元素数组。这是一种无需提取所有数据即可执行此操作的方法：

```
def count_query(query)
  query = "SELECT count(*) AS count_all FROM (#{query.to_sql}) x"
  ActiveRecord::Base.connection.execute(query).first.try(:[], 0).to_i
end 
```

它是这样使用的：

```
query = User.where("zip_code = '48104'").group('users.id')
count = count_query(query) 
```

这适用于我使用mysql，顺便说一句。

它的灵感来自这个人：[https ://github.com/mrbrdo/active_record_group_count/blob/master/lib/active_record_group_count/scope.rb](https://github.com/mrbrdo/active_record_group_count/blob/master/lib/active_record_group_count/scope.rb)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T14:41:31.893

如果要将哈希值相加，则：

```
{key1: 1, key2: 2}.values.inject(:+) # => 3 
```

如果您只想要键的数量，那么：

```
{key1: 1, key2: 2}.length # => 2 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-28T20:40:33.107

正如*orourkedd*之前所说，在处理大量记录时，接受的答案并不是很好。我最近也遇到了这个问题，并且有我绝对不想加载到内存中的大表。所以这对我有用。

```
users=User.where("zip_code = '48104'").group('users.id')
user_count=User.where(id: users.select(:id)).count 
```

Rails 将像处理子查询一样处理 users.select 部分。这适用于**Rails 4**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-05T14:44:32.970

由于第一个 count() 返回一个哈希值，所以可以使用任何你希望的 Ruby 可枚举操作。例子：

```
User.where("zip_code = '48104'").group('users.id').count.count 
```

也可以看看：

*   [http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html#M000292](http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html#M000292)
*   [http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-count](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-count)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-11T13:56:20.420

另一种方法，如果值可以大于 1，则很有用。

```
User.where("zip_code = '48104'").group('users.id').count.values.sum 
```

# c# - 是否有 C# 控件可让您创建像 Excel 一样可排序的网格？

> ID：12283848
> 
> 赞同：0
> 
> 时间：2012-09-05T14:33:16.773
> 
> 标签：c#, visual-studio-2010

我正在使用 2010 Express 并且我有一个数组 arrStudents，其中每个元素都包含学生的姓名 (arrStudents(0).Name) 和年龄 (arrStudents(0).Age)。我想展示我的数组的内容，以便用户可以在 2 列乘 100 行的网格中看到它，就像在 Excel 中一样，其中名称显示在 A 列中，年龄显示在 B 列中。

然后，用户可以双击某处，以便按字母顺序对 A 列进行排序，或按年龄升序对 B 进行排序。然后，如果再次双击，它会反向并按字母顺序对 A 列按降序排序，B 列按年龄按降序排序。在 C# 中尽可能接近这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:47:47.600

看`sort`方法`DataGridView`。您将其传递给要排序的列，以及升序或降序。

要将数据绑定到`DataGridView`，请将控件的数据源设置为数组：

```
myDataGridView.DataSource = myArray; 
```

[此链接](http://msdn.microsoft.com/en-us/library/0868ft3z.aspx)显示如何对`DataGridView`绑定到数据源的数据进行排序。

# java - 使用java代码将MySQL数据库导出到excel

> ID：12283850
> 
> 赞同：1
> 
> 时间：2012-09-05T14:33:17.980
> 
> 标签：java, mysql, jexcelapi

我想将我的 MySQL 数据库导出为 .xls 或 .txt 格式。我怎么能在java中做到这一点。我想要做的是在我的应用程序中有一个按钮，按下它，我的数据库导出到 excel 文件。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:37:59.540

对 MySQL 进行系统调用：

```
mysql -e'SELECT * FROM table'>file.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:40:26.157

您可以使用[BIRT](http://www.eclipse.org/birt/phoenix/)并将数据库生成为您想要的任何格式。如果您使用的是 struts2，您可以将`datagrid`其导出为 CSV 或 Excel。

您可能会发现它很有帮助：

```
SELECT ....... INTO OUTFILE '/tmp/result.text' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY '\n' FROM table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:38:28.867

导出整个数据库的最简单方法是使用本机数据库工具。看看这篇文章：[http ://www.electrictoolbox.com/mysql-export-data-csv/](http://www.electrictoolbox.com/mysql-export-data-csv/)

或者，您可以使用连接到 DB 的 JDBC 或 ORM 实现代码，读取数据并使用您想要的任何格式写入数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:44:49.180

您可以使用[Mysql-JDBC 驱动程序](http://dev.mysql.com/downloads/connector/j/)和[Apache POI](http://poi.apache.org/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-14T04:59:13.600

使用此代码

它适用于 .xls 文件

```
package com.demo.export;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;

import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;

public class dataExportService {
    public void getDefendants(Connection con , String db) throws Exception  { 
        @SuppressWarnings("unused")
        Workbook readWorkbook = WorkbookFactory.create(new FileInputStream("C:\\Users\\CEPL\\Desktop\\test.xls") );
        @SuppressWarnings("resource")
        Workbook writeWorkbook = new HSSFWorkbook();
        Sheet desSheet = writeWorkbook.createSheet("new sheet");

        Statement stmt = null;
        ResultSet rs = null;
        try{
            String query ="SELECT * FROM "+db;

            stmt = con.createStatement();
            rs = stmt.executeQuery(query);
            ResultSetMetaData rsmd = rs.getMetaData();
            int columnsNumber = rsmd.getColumnCount();

            Row desRow1 = desSheet.createRow(0);
            for(int col=0 ;col < columnsNumber;col++) {
                Cell newpath = desRow1.createCell(col);
                newpath.setCellValue(rsmd.getColumnLabel(col+1));
            }
            while(rs.next()) {
                System.out.println("Row number" + rs.getRow() );
                Row desRow = desSheet.createRow(rs.getRow());
                for(int col=0 ;col < columnsNumber;col++) {
                    Cell newpath = desRow.createCell(col);
                    newpath.setCellValue(rs.getString(col+1));  
                }
                FileOutputStream fileOut = new FileOutputStream("C:\\Users\\CEPL\\Desktop\\test.xls");
                writeWorkbook.write(fileOut);
                fileOut.close();
            }
        }
        catch (SQLException e) {
            System.out.println("Failed to get data from database");
        }
    }

} 
```

# c# - NpgsqlCommandBuilder GetUpdateCommand 抛出异常

> ID：12283853
> 
> 赞同：1
> 
> 时间：2012-09-05T14:33:38.440
> 
> 标签：c#, npgsql

我正在尝试使用 NpgsqlCommandBuilder 自动生成 SQL 命令以对数据集执行插入/更新/删除操作。数据集将绑定到数据网格（我真的不知道该怎么做）。所以我不会手动编辑数据集。尝试自动生成sql命令时，调用NpgsqlDataAdaptor.Update()时会抛出异常

这是 db 表的架构：

```
tblFee
{
    character(4) dest,
    character(4) id,
    character(2) indicator,
    double fee
}
the primary key is (dest, id, indicator) 
```

这是我的代码：

```
string m_strConnection = "Server=192.168.253.20;Port=5432;User Id=alex;Password=asdf;Database=mydb;";
DataSet m_ds = new DataSet("EcnFeeData");
NpgsqlConnection m_conn = new NpgsqlConnection(m_strConnection);
NpgsqlDataAdapter m_dAdapter = new NpgsqlDataAdapter();
m_dAdapter.SelectCommand = new NpgsqlCommand("SELECT * FROM \"tblFee\"", m_conn);
NpgsqlCommandBuilder builder = new NpgsqlCommandBuilder(m_dAdapter);

m_conn.Open();

m_dAdapter.Fill(m_ds, "tblFee");

m_ds.Tables[0].Rows[0]["fee"] = 1;

builder.GetUpdateCommand();

m_dAdapter.Update(m_ds, "tblFee"); 
```

在执行最后一行时会抛出此异常：

```
A first chance exception of type 'System.InvalidOperationException' occurred in System.Data.dll

Additional information: Update requires a valid UpdateCommand when passed DataRow collection with modified rows. 
```

尝试插入行时也会发生同样的事情，只是异常消息不同：

```
Additional information: Update requires a valid InsertCommand when passed DataRow collection with new rows. 
```

最后一个代码示例尝试使用 NpgsqlCommandBuilder，就像在 .NET 4.0 文档提供的示例中使用 SqlCommandBuilder 一样。Npgsql 文档没有提供这样做的示例。NpgsqlCommandBuilder 不支持此功能吗？我希望 NpgsqlCommandBuilder 自动生成 sql 命令，但如果它不起作用，那么我将不得不手动创建它们。

在按照 Npgsql 文档中手动生成 InsertCommand 的示例之后，我能够让它工作，但我不知道如何为 UpdateCommand 执行此操作。这是我用来创建 InsertCommand 的代码：

```
m_dAdapter.InsertCommand = new NpgsqlCommand("insert into \"tblFee\" (dest, id, indicator, fee) values (:a, :b, :c, :d)", m_conn);
m_dAdapter.InsertCommand.Parameters.Add(new NpgsqlParameter("a", DbType.AnsiStringFixedLength));
m_dAdapter.InsertCommand.Parameters.Add(new NpgsqlParameter("b", DbType.AnsiStringFixedLength));
m_dAdapter.InsertCommand.Parameters.Add(new NpgsqlParameter("c", DbType.AnsiStringFixedLength));
m_dAdapter.InsertCommand.Parameters.Add(new NpgsqlParameter("d", DbType.Double));

m_dAdapter.InsertCommand.Parameters[0].Direction = ParameterDirection.Input;
m_dAdapter.InsertCommand.Parameters[1].Direction = ParameterDirection.Input;
m_dAdapter.InsertCommand.Parameters[2].Direction = ParameterDirection.Input;
m_dAdapter.InsertCommand.Parameters[3].Direction = ParameterDirection.Input;

m_dAdapter.InsertCommand.Parameters[0].SourceColumn = "dest";
m_dAdapter.InsertCommand.Parameters[1].SourceColumn = "id";
m_dAdapter.InsertCommand.Parameters[2].SourceColumn = "indicator";
m_dAdapter.InsertCommand.Parameters[3].SourceColumn = "fee";
m_dAdapter.InsertCommand.Connection = m_conn; 
```

这是我尝试执行 UpdateCommand，但它不起作用：

```
m_dAdapter.UpdateCommand = new NpgsqlCommand("update \"tblFee\" set dest = :a, id = :b, indicator = :c, fee = :d where dest = :e and id = :f and indicator = :g");
m_dAdapter.UpdateCommand.Parameters.Add(new NpgsqlParameter("a", DbType.AnsiStringFixedLength));
m_dAdapter.UpdateCommand.Parameters.Add(new NpgsqlParameter("b", DbType.AnsiStringFixedLength));
m_dAdapter.UpdateCommand.Parameters.Add(new NpgsqlParameter("c", DbType.AnsiStringFixedLength));
m_dAdapter.UpdateCommand.Parameters.Add(new NpgsqlParameter("d", DbType.Double)); 
m_dAdapter.UpdateCommand.Parameters.Add(new NpgsqlParameter("e", DbType.AnsiStringFixedLength));
m_dAdapter.UpdateCommand.Parameters.Add(new NpgsqlParameter("f", DbType.AnsiStringFixedLength));
m_dAdapter.UpdateCommand.Parameters.Add(new NpgsqlParameter("g", DbType.AnsiStringFixedLength));

m_dAdapter.UpdateCommand.Parameters[0].Direction = ParameterDirection.Input;
m_dAdapter.UpdateCommand.Parameters[1].Direction = ParameterDirection.Input;
m_dAdapter.UpdateCommand.Parameters[2].Direction = ParameterDirection.Input;
m_dAdapter.UpdateCommand.Parameters[3].Direction = ParameterDirection.Input;
m_dAdapter.UpdateCommand.Parameters[4].Direction = ParameterDirection.Input;
m_dAdapter.UpdateCommand.Parameters[5].Direction = ParameterDirection.Input;
m_dAdapter.UpdateCommand.Parameters[6].Direction = ParameterDirection.Input;

m_dAdapter.UpdateCommand.Parameters[0].SourceColumn = "dest";
m_dAdapter.UpdateCommand.Parameters[1].SourceColumn = "id";
m_dAdapter.UpdateCommand.Parameters[2].SourceColumn = "indicator";
m_dAdapter.UpdateCommand.Parameters[3].SourceColumn = "fee";
m_dAdapter.UpdateCommand.Parameters[4].SourceColumn = "dest_orig";
m_dAdapter.UpdateCommand.Parameters[5].SourceColumn = "id_orig";
m_dAdapter.UpdateCommand.Parameters[6].SourceColumn = "indicator_orig";
m_dAdapter.UpdateCommand.Connection = m_conn; 
```

任何帮助将非常感激。

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:46:58.110

您可以像上面那样设置和操作`NpgsqlDataAdapter`'s 。`UpdateCommand``InsertCommand`

以及[http://npgsql.projects.postgresql.org/docs/api/Npgsql.NpgsqlDataAdapterMembers.html](http://npgsql.projects.postgresql.org/docs/api/Npgsql.NpgsqlDataAdapterMembers.html)上的文档，它的工作原理类似于 SqlDataAdapter，因此[http://msdn.microsoft.com/en-us上的示例/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx)值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:20:47.200

要使用 NpgsqlCommandBuilder，您需要：

```
m_dAdapter.InsertCommand = builder.GetInsertCommand(m_ds.Tables[0].Rows[0]);
m_dAdapter.UpdateCommand = builder.GetUpdateCommand(m_ds.Tables[0].Rows[0]);
m_dAdapter.DeleteCommand = builder.GetDeleteCommand(m_ds.Tables[0].Rows[0]); 
```

试试看，让我们知道它是否适合您。实际上，如果您不指示与哪个适配器关联命令，我不知道为什么 SqlCommandBuilder 对您有用。

# javascript - Javascript 和 IE9 的问题

> ID：12283855
> 
> 赞同：0
> 
> 时间：2012-09-05T14:33:45.487
> 
> 标签：javascript, extjs, internet-explorer-9

我有这个 javascript 代码来显示启动网站的消息：

```
Ext.onReady(function(){
    Ext.MessageBox.show({
        title:'Welcome to Site',
        msg:'Welcome to this website!.',
        buttons:Ext.MessageBox.OK,
        icon:Ext.MessageBox.INFO
    });
}); 
```

它在 Firefox 和 Chrome 中运行良好，但在 Internet Explorer 9 中显示不佳。有关如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:28:41.200

该问题可能是由于需要对 Ext.js 进行版本升级引起的。

3.4 之前的版本存在浏览器版本嗅探问题或时间错误，导致`Ext.onReady`无法正确确定该事件何时发生。

Internet Explorer 9 抛出的一个特定错误是传递了 null 或未定义的对象：

> SCRIPT5007：无法获取属性“addClass”的值：对象为空或未定义

从如下代码片段：

```
<script type="text/javascript">
//<![CDATA[
    Ext.onReady(function() {
        var tabs = new Ext.ux.Tabs('tabs',
            activeTab: 'tab-description'
        });
    });
//]]>
</script> 
```

这是一个非常简单的选项卡面板，适用于除 IE 9 之外的所有内容，但由于它抱怨`'tabs'`无法在 Ext 代码中传递给以下代码而失败：

```
constructor : function(element, config) {
    Ext.apply(this, config);
    Ext.ux.Tabs.superclass.constructor.call(this);

    this.addEvents(
        'beforetabchange',
        'tabchange'
    );

    this.el = Ext.get(element);
    this.init();
},

init : function() {
    var me = this;

    this.el.addClass('ux-tabs-container'); 
```

因此`this.el = Ext.get(element);`未能找到确定为`tabs`和导致`this.el.addClass('ux-tabs-container');`死亡的元素。

如果有人有临时获得旧版本以解决此问题的拐杖，请随时发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:31:17.143

您的代码片段似乎在 Chrome 和 IE9 中产生了相同的结果。检查下面

[![试验结果](../Images/4077536ae45506c95105e6e8db7156a6.png)](https://i.stack.imgur.com/wK5md.png)

你能上传一张你正在观察的照片吗？

# asp.net-mvc - Kendo UI MVC 网格弹出位置

> ID：12283858
> 
> 赞同：0
> 
> 时间：2012-09-05T14:33:57.453
> 
> 标签：asp.net-mvc, asp.net-mvc-3, kendo-ui

如何更改弹出窗口的位置以创建新记录？我可以通过使用 javascript 并设置 e.container.width(1300) 来更改宽度。这会导致弹出窗口位于左侧：740。我尝试通过将 DIV.k-window 设置为 150px 来覆盖它，并且内联样式会覆盖它。有谁知道如何强制弹出的位置？TIA布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:46:25.247

我能够使用 Stackoverflow 的这个答案解决问题[我可以覆盖内联！重要吗？](https://stackoverflow.com/questions/11150684/can-i-override-inline-important) 谢谢布鲁斯

# android - How to support all screens?

> ID：12283860
> 
> 赞同：1
> 
> 时间：2012-09-05T14:34:02.663
> 
> 标签：android, layout, screens

I made an application for Android and and I'm trying to make it work on every possible device.

For this, I created different layouts (small, normal, large, xlarge) with different densities (ldpi, mdpi, hdpi, xhdpi), but when I load the emulator with the range of `layout-normal-xhdpi`, the application doesn't start and make an exit exception (force close). For all other layouts, it works perfectly.

What should it be?

I'm using `minSDK = "8"`, but I tried also with higher APIs and still not working. I also tested with the APIS below level 4 and it works perfectly (the problem of these APIs don't support all resolutions).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:49:15.613

You can provide alternative resources (drawables) and layouts (and languages for regional support). Please refer the android developer guide on supporting multiple screens, especially the section on how android selects the resources provided [here](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources).

Also an explanation is provided [here](https://stackoverflow.com/a/8428487/328947), just scroll through the page to get a clear view on the subject.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:42:00.843

just put these lines of code in your Manifest file :

```
<supports-screens android:largeScreens="true"
android:normalScreens="true" android:smallScreens="true"
android:anyDensity="true" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:14:37.663

Here are some select lines from your log that tell you what's going on:

> 09-05 15:10:34.941: E/dalvikvm-heap(453): 9523200-byte external allocation too large for this process.

and:

> 09-05 15:10:35.112: E/AndroidRuntime(453): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget

Your bitmaps are extremely large (one in particular is ~9MB) and you are running out of memory. Use some smaller bitmaps.

# java - 为什么 Gson 将 1 反序列化为 1.0？

> ID：12283863
> 
> 赞同：5
> 
> 时间：2012-09-05T14:34:13.903
> 
> 标签：java, json, gson

```
Gson gson = new Gson();
System.out.println(gson.fromJson("1", Object.class));    //output:1.0
System.out.println(gson.fromJson("1", String.class));    //output:1
System.out.println(gson.fromJson("1", Integer.class));   //output:1 
```

我正在尝试自定义一个反序列化器来修复它，但仍然无法正常工作：

```
Gson gson = new GsonBuilder().registerTypeAdapter(Object.class,new JsonDeserializer<Object>() {
    @Override
    public Object deserialize(JsonElement json, Type typeOfT,JsonDeserializationContext context)throws JsonParseException {
        return json.getAsInt();
    }
}).create();
System.out.println(gson.fromJson("1", Object.class));   //still 1.0 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:35:57.387

JSON 中没有整数。1.0 和 1 是一回事，除了 1.0 是显式的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-06T02:04:10.433

如果您的目标类有 int 成员，它将反序列化为 int。否则，如果您使用 fromJson 不带参数，只需将其转换为 (int) 即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:05:53.223

> 我在这里做错了吗？

你正在做一些你最可能不需要的事情。此外，它确实是错误的，因为它会破坏除数字之外的所有内容。

IIRC，某些内置类型（包括`Object`）的 Gson 反序列化器不起作用。

每当您使用类似的东西`List<Integer>`时，json 都会被读取为 int，所以一切都很好。

在某些情况下，您可能会使用`Something<Object>`并想要获得`Integer`而不是`Double`在那里，但是我怀疑这样的代码是否有意义。如果确实如此，请为那里编写一个反序列化程序`Something`并解决问题。

# spring - Grails 2.1：从自定义 Spring 配置设置 sessionFactory 和 dataSource

> ID：12283868
> 
> 赞同：6
> 
> 时间：2012-09-05T14:34:33.270
> 
> 标签：spring, grails, groovy, grails-orm, grails-2.0

我**在 Spring 中有一个复杂的、自定义配置的 Hibernate 设置**（包括 JPA 实体、会话工厂和数据源定义），我想在 Grails 2.1.0 中使用它。正因为如此，我想给 Grails 一个我已经拥有的`sessionFactory`和的参考。`dataSource`所以，我不想（事实上，不能）使用`hibernate.cfg.xml`放置在里面的东西`conf/`——我也不想使用`DataSource.groovy`，因为所有复杂的配置都已经由我们已经拥有的经过测试和工作的代码处理了，并且都是基于 Spring 的.

所以，我已经设法让我的自定义 Spring 配置加载`grails run-app`（通过`importBeans()`in `resources.groovy`。）在日志中，我可以看到 db 连接、Spring 配置和 Hibernate 启动得很好，所以在运行时`sessionFactory`创建`dataSource`了. **现在，我如何配置 Grails 以使用它们而不是尝试创建自己的？**

理想情况下，某处之类的东西`dataSource = ref('myDataSource')`会很棒-与相同`sessionFactory = ref('sessionFactory')`或相似。我见过一些人把它放在resources.groovy 中，但它不起作用。

我也看过这个：

```
eventDao(com.JavaClassRequiringDataSource) { dataSource = ref('dataSource') } 
```

但它也不起作用（不确定它是否曾经起作用。）

任何帮助都将不胜感激……我在过去的 10 个小时里试图让这个工作无济于事。我不介意我会丢失一些 Grails 功能，只要它可以工作。近期目标是让 GORM 看到我们已经拥有的（~200）个实体并做一些脚手架:)

我也知道 Grails 看不到这些实体，因为我在 BootStrap.groovy 中添加了以下内容：

```
// ...
def grailsApplication
def init = { servletContext -> 
  println grailsApplication.domainClasses
}
// ... 
```

它打印[]。

如果需要补丁，请告诉我从哪里开始，我会看一下……我只是想让它工作。

谢谢！

**更新1：**

我已经尝试了 resources.groovy 文件的几种咒语，目前它看起来像这样：

```
beans = {
    importBeans('main-spring-file-for-the-rest.xml')
    dataSource = ref('dataSource')
} 
```

但是当试图搭建脚手架时，我仍然得到：

```
Error 2012-09-06 00:02:00,768 [Thread-9] ERROR plugins.DefaultGrailsPlugin  - Cannot generate controller logic for scaffolded class x.y.z.Class. It is not a domain class! 
```

（日志行已编辑：用 替换了类的实际名称`x.y.z.Class`。）正如我之前所展示的，实体列表是空的，我看不到设置 Hibernate 的方法`sessionFactory`- 例如

```
sessionFactory = ref('sessionFactory') 
```

不工作。

**更新 2：**

从 spring 加载 bean 和实体但 GORM 没有使用或查看，我能够使用 Grails 中内置的实用程序和一个新 bean 强制转换实体，配置`resources.groovy`如下：

```
public class TestFix implements ApplicationContextAware {
    SessionFactory sessionFactory
    ApplicationContext applicationContext
    GrailsApplication grailsApplication

    def init() {
        GrailsHibernateUtil.configureHibernateDomainClasses(sessionFactory, "sessionFactory", grailsApplication)

    }
}

beans = {
    importBeans('main-spring-file-for-the-rest.xml')

    myBean(TestFix) { bean ->
        sessionFactory = ref('sessionFactory')
        grailsApplication = ref(GrailsApplication.APPLICATION_ID)
        bean.initMethod = 'init'
    }
} 
```

现在 Grails 可以看到实体，但脚手架不起作用，因为增强的域对象似乎缺少 GORM 方法（.list() 等。）您希望`GrailsHibernateUtil.configureHibernateDomainClasses()`在创建所有`GrailsHibernateDomainClass`类时添加这些方法，但要么它默默地失败了，或者我错过了一些东西（也许跑得不够早？不确定。）非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:05:58.443

Have you tried the other way around by using the db-reverse-engineer plugin? We had great success on migrating a fairly complex Spring application to grails (approx. 90 Entities).

# ruby-on-rails - 在 Ruby on Rails 中搜索子模型

> ID：12283878
> 
> 赞同：1
> 
> 时间：2012-09-05T14:34:59.613
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

一个公司模型有很多标签并且有一个 country_id 字段。我想找到：

1.  所有公司，位于某个县
2.  所有位于某个县并具有特定标签`if params[:tag]`的公司都存在。

第一个查询很简单

```
 Company.where(:country_id => params[:country_id]) 
```

至于第二个，我尝试了一些查询，但没有任何效果

```
companies = Company.where(:country_id => params[:country_id])
companies = Company.tags.where(:name=> params[:tag])
undefined method `tags' for #<Class:0x000000055dfb60> 
```

如果我把

```
Company.tags.where(:name=> params[:tag]) 
```

那么错误是一样的

```
undefined method `tags' for #<Class:0x000000055dfb60> 
```

在 Rails 控制台中，命令`Company.first.tags`会按原样接收所有标签。

**更新**：这有效

```
Company.joins(:tags).where("tags.name = ?", query_hash[:tag]) 
```

但我还不明白如何做这样的事情

```
 my_conditions = get_search_conditions
 if query_hash[:tag].present?
    companies = Company.all(:conditions => my_conditions).joins(:tags).where("tags.name = ?", query_hash[:tag]) 
 else
    companies = Company.all(:conditions => conditions) 
 end 
```

错误是

```
undefined method `all' for #<Array:0x007fbec8063e00> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:42:40.423

> 错误是`undefined method all for #<Array:0x007fbec8063e00>`

如果您替换为，它应该可以`Company.all`工作`Company.where`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:46:41.037

检查这是否有效 - Company.joins(:tags).where("tags.name",params[:tag])

# java-me - 更新位于二进制包中的 J2ME 中的 .txt 文件

> ID：12283879
> 
> 赞同：2
> 
> 时间：2012-09-05T14:35:10.337
> 
> 标签：java-me

我开发了 J2ME 应用程序，它使用以下代码从位于二进制包中的**product.txt文件中读取数据**

```
InputStream is = getClass().getResourceAsStream("/product.txt"); 
int size = is.available();
byte bytes[] = new byte[size];
is.read(bytes, 0, size);
str = new String(bytes, 0, size); 
```

现在我想使用 J2ME 代码更新位于二进制包中的**product.txt文件。**

我试过以下代码来获取**product.txt的相对路径**

```
String path=getClass().getResource("/product.txt").getPath(); 
```

但它不适用于 J2ME 平台。

如何获取位于二进制包中的**product.txt文件的相对路径？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:39:09.540

您不能更改烘焙到 jar 中的文件。您会注意到，没有任何等价物`getResourceAsStream()`提供`OutputStream`.

# css - 通过 css 为 Kendo UI Chart 系列设置光标是否有效？

> ID：12283889
> 
> 赞同：1
> 
> 时间：2012-09-05T14:35:40.383
> 
> 标签：css, svg, kendo-ui

我目前有一个 KendoUI 图表的 CSS 规则（在剃刀视图中定义）：

```
/* use :not(:last-child) to ignore legend */
#idOfMyChart g:not(:last-child) path
{
    cursor: pointer;
} 
```

这将设置图表中正确 svg 元素的光标规则。但是，将鼠标悬停在该系列上似乎会重新绘制图表（以显示工具提示）并根据 css 规则阻止光标显示。

有没有办法让这些 svg 元素将光标显示为指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-14T19:53:10.633

以下解决了在甜甜圈剑道图中获取所有系列的指针光标的问题。在控件所在的页面中创建以下 css 样式。

```
 #Graphdonut > svg > g > g {
        cursor: pointer;
    } 
```

其中 Grapdonut 是图表的名称

因为这是 hack in code 可以在其他版本的 kendo 中更改，在 kendo 2014 中进行了测试

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:29:27.583

感谢[剑道论坛](http://www.kendoui.com/forums/dataviz/chart/how-can-i-get-css-cursor-to-work-for-chart-series.aspx)上的 Nohinn 。

用于图表系列的正确选择器是`path[data-model-id]`：

```
/* use presence of [data-model-id] attribute to select series in chart */
#idOfMyChart path[data-model-id]
{
    cursor: pointer;
} 
```

# performance - 在小于 O(n^2) 时间的 2D 平面中找到距离最短的一组给定点中的两个点

> ID：12283890
> 
> 赞同：1
> 
> 时间：2012-09-05T14:35:46.810
> 
> 标签：performance, algorithm, data-structures, time-complexity

我在雅虎被问到机器学习简介这个问题。给定一组点 (x,y) 坐标，我被要求在 O(n) 或 O(log n ) 时间内找到距离最短的点。显然，我能够想出 O(n^2) 时间，但离获得更好的算法还差得很远。尽管问题陈述是分而治之，但我还是想不出合并步骤的理由。我还在互联网上搜索了这个问题，发现它实际上很受欢迎，但我仍然无法掌握合并步骤的推理。

谁能帮我解决这个问题？

输入：(x1,y1),(x2,y2),(x3,y3),(x4,y4),(x5,y5)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:02:27.630

可以使用递归分治法在 O(n log n) 时间内解决该问题，例如，如下所示：

1.根据x坐标对点进行排序。

2\. 用一条垂直线 x=xmid 将一组点分成两个大小相等的子集。

3.在左右子集中递归求解。这分别产生左侧和右侧最小距离 dLmin 和 dRmin。

4.求一对点之间的最小距离dLRmin，其中一个点位于分界线的左侧，第二个点位于右侧。

5.最终答案是dLmin、dRmin和dLRmin中的最小值。

[http://en.wikipedia.org/wiki/Closest_pair_of_points](http://en.wikipedia.org/wiki/Closest_pair_of_points)

# android - 片段内的 TabHost

> ID：12283894
> 
> 赞同：0
> 
> 时间：2012-09-05T14:36:04.203
> 
> 标签：android, android-fragments

我正在尝试在 Fragment 中添加 TabHost 布局：

```
public class FriendsTabFregment extends Fragment {

    private TabHost tab;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.activity_friends, container, false);
        tab = (TabHost) view.findViewById(R.activity_friends.tab);
        return view;
    }
}
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);             
        addNewTab("Friends", BasicFragment.class, savedInstanceState);  //Chat Tab
        setTabHeight(50);       
    } 
```

出于某种原因，我将选项卡设为空。这是我的 XML：

```
<TabHost android:id="@+activity_friends/tab"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="4">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost>

</LinearLayout> 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:53:10.380

将您`TabHost`的 id 定义为

```
android:id="@+id/activity_friends_tab" 
```

并像这样找到它：

```
tab = (TabHost) view.findViewById(R.id.activity_friends_tab); 
```

看看这篇文章以进一步了解`"@+id/"`

[“@+id”是什么意思？](https://stackoverflow.com/q/4293192/593709)

[安卓文档源](http://developer.android.com/guide/topics/ui/declaring-layout.html#id)

# visual-studio-2012 - Visual Studio 2012 中的 Ctrl-Tab 行为

> ID：12283906
> 
> 赞同：3
> 
> 时间：2012-09-05T14:36:33.417
> 
> 标签：visual-studio-2012

问题：有没有办法让 VS2012**中的“ctrl + tab”行为与以前在 VS2010**中的行为相同？

具体来说，我注意到当您按住控件并点击几次选项卡时，屏幕上的列表现在**还**包括您通常不关心的窗口（更不用说将焦点切换到），例如：“查找结果 1” 、“错误列表”和“输出”。

这些是通常位于 Visual Studio 环境底部的标准窗口。之前，在 VS2010 中，这些类型的项目不会包含在列表中。使用 Ctrl-Tab 来仅显示您打开的文档非常简单。我经常使用此功能*以便*在打开的文件中快速导航。

但是现在在 VS2012 中，当您按下 Ctrl-Tab 时，突然您的焦点在错误列表中……就像……他们在想什么？你必须再次点击标签才能摆脱这些无用的选择，这只会让我慢下来。如果有人知道关闭这个可怕的新“功能”的方法，请告诉我！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:39:44.893

这通常不会发生。
您可能将这些窗口停靠为文档而不是工具窗口。

要检查这是否属实，请尝试将常规文档窗口停靠在一边；如果你不能，那意味着你有一个垂直的文档拆分。

要修复它，请取消停靠这些窗口，然后使用最低箭头重新停靠它们。

# javascript - 仅选择父级

> ID：12283907
> 
> 赞同：0
> 
> 时间：2012-09-05T14:36:37.917
> 
> 标签：javascript, jquery

我正在尝试在单击 div 本身时切换父 div。但我想防止子 div 或元素触发该功能。我怎样才能做到这一点？

```
//javascript (jquery enabled)
function toggle(parent_id) {
  $('.'+parent_id).toggle();
}
<!-- html -->
<div class="parent parent1" onclick="toggle('parent1')">
  <div class="child1"></div>
  <div class="child2"></div>
</div>

<div class="parent parent2" onclick="toggle('parent2')">
  <div class="child1"></div>
  <div class="child2"></div>
</div> 
```

谢谢！

更新：我正在尝试切换特定的 div，因此使用函数来传递特定的父 ID。

IE。如果我单击 parent1，则 parent1 切换；如果我单击 parent2，则 parent2 切换

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:38:21.787

以下应该做的工作：

```
$(".parent").click(function(e) {
    if (e.target == this) {
        $(this).toggle();
    }
}); 
```

**演示：http:** [//jsfiddle.net/Md4U5/](http://jsfiddle.net/Md4U5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:48:56.573

这很容易，只需扩展@VisioN 的答案，确保所有这些`div`s 都有一个类`parent`：

```
$("[class~=parent]").click(function(e) {
    if (e.target == this) {
        $(this).toggle();
    }
}); 
```

# java - 如何在不同时间后执行任务

> ID：12283908
> 
> 赞同：3
> 
> 时间：2012-09-05T14:36:38.930
> 
> 标签：java, multithreading

```
Class A 
{
 long x;
 method1()
  {
   x = current time in millisecs;
  }
 task()//want to run this after (x+30) time
} 
```

我需要在 (x+30) 之后运行 task() 。x 可能会有所不同。如果调用 method1，则任务计划在当前时间 30 秒后运行，但在 30 时间段内，如果再次调用 method1，则我想取消上一个任务调用，并希望在当前时间 30 秒后安排对任务的新调用时间。我应该如何创建这种类型的调度程序或任务？

通过 schedulethreadpoolexecutor API 但没有找到这种类型的调度程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:56:58.273

你问了2个问题：

*1\. 如何安排任意延迟的任务？*

您可以在[java.util.concurrent.ScheduledThreadPoolExecutor上使用其中一种](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)[调度](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#schedule%28java.util.concurrent.Callable,%20long,%20java.util.concurrent.TimeUnit%29) [方法](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#schedule%28java.lang.Runnable,%20long,%20java.util.concurrent.TimeUnit%29)

```
int delay = System.currentTimeMillis + 30;
myScheduledExecutor.schedule(myTask, delay, TimeUnit.MILLISECONDS); 
```

*2\. 如何取消已经运行的任务？*

您可以通过调用从您调用的方法返回的[Future](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future)上的[cancel](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)来取消任务。`schedule`

```
if (!future.isDone()){
    future.cancel(true);
}
future = myScheduledExecutor.schedule(myTask, delay, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:37:34.043

使用`java.util.Timer`并将回调传递给`TimerTask`以安排下一次运行。`cancel`如果需要，可以使用方法取消 TimerTask 。例如

```
package test;

import java.util.Timer;
import java.util.TimerTask;

public class TimerTaskDemo {
    private Timer timer = new Timer();
    private MyTimerTask nextTask = null;

    private interface Callback {
        public void scheduleNext(long delay);
    }

    Callback callback = new Callback() {
        @Override
        public void scheduleNext(long delay) {
            nextTask = new MyTimerTask(this);
            timer.schedule(nextTask, delay);
        }
    };

    public static class MyTimerTask extends TimerTask {
        Callback callback;

        public MyTimerTask(Callback callback) {
            this.callback = callback;
        }

        @Override
        public void run() {
            // You task code
            int delay = 1000;
            callback.scheduleNext(delay);
        };
    }

    public void start() {
        nextTask = new MyTimerTask(callback);
        timer.schedule(nextTask, 1000);
    }

    public static void main(String[] args) {
        new TimerTaskDemo().start();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:43:55.407

我会记录调用 method1 的时间，并且我会每秒检查一次该方法是否在 30 秒前被调用。这样它只会在 30 秒内没有呼叫时执行任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:46:07.900

[为什么不使用 JDK 的Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)类对您的需求进行建模。根据您的要求，您将根据需要在计时器中安排任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T15:03:28.983

我认为做你需要的最简单的方法是以下。类`B`是调用类。

```
class A {

    public void runAfterDelay(long timeToWait) throws InterruptedException {
        Thread.sleep(timeToWait);

        task();
    }
}

class B {
    public static void main(String[] args) throws InterruptedException {
        A a = new A();
        // run after 30 seconds
        a.runAfterDelay(30000);
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-05T14:48:01.713

```
Class A 
{
 $x;
 function method1()
  {
   $time = microtime(true);
  }
 sleep($time + 30);
 task()//want to run this after (x+30) time
} 
```

# php - PHP Unix 时间戳

> ID：12283910
> 
> 赞同：2
> 
> 时间：2012-09-05T14:36:47.343
> 
> 标签：php, date, timestamp

我有一个代码，但找不到错误在哪里。我有即将发生的事件和当前时间。如果我将我的事件转换为时间戳，它会小于当前时间戳。也许你能帮助我。

我的代码如下：

```
<?php

date_default_timezone_set('Etc/GMT');

$upcoming       = "2012.09.05 23:50";
$current        = time();

echo "Upcoming: " . $upcoming . " | Timestamp:" .  mktime(23, 50, 0, 09, 05, intval(date("Y")));
echo "<br>Current: " . time();
echo "<br>Current SIM: " .  mktime(date("H"), date("i"), date("s"), date("m"), date("d"), date("Y"));

?> 
```

将输出：

```
Upcoming: 2012.09.05 23:50 | Timestamp:1323129000
Current: 1346855221
Current SIM: 1346855220 
```

当前 > 即将到来的时间戳。（？？？） 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T14:41:46.900

因为你有 09（前面有 0）这个数字被解释为一个八进制数，所以它被转换为 0。使用：`mktime(23, 50, 0, 9, 5, intval(date("Y")));`

您可以稍微探索一下这个“功能”；

```
var_dump(9);   // int 9
var_dump(09);  // int 0
var_dump(07);  // int 7
var_dump(17);  // int 17
var_dump(017); // int 15 
```

编辑;

`date('n');`返回不带前导零的月份。并返回不带前导零的日期和小时`date('j');`。`date('G');`所以你可以`mktime(date("H"), date("i"), date("s"), date("m"), date("d"), date("Y"));`改为`mktime(date("G"), date("i"), date("s"), date("n"), date("j"), date("Y"));`

没有前导零就无法获得分钟和秒数，`date()`因此您可能需要为此找到另一个函数。

编辑：

要转换`2012.09.05 23:50`为时间戳，您可以将其更改`.`为`/`并将其提供给`strtotime()`：

```
$str = '2012.09.05 23:50';
$str = str_replace(".", "/", $str);
$timestamp = strtotime($str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:43:07.123

去掉不必要的零，这应该可以解决问题。

mktime(23, 50, 0, 9, 5, intval(date("Y")));

# sql - SQL-查询-选择最佳车号

> ID：12283916
> 
> 赞同：2
> 
> 时间：2012-09-05T14:36:54.863
> 
> 标签：sql, oracle

假设您有以下表格：

```
TABLE Car
car_id
num

TABLE Car_description
dsc_id
car_id
model

TABLE Result
res_id
car_id
race_num
result 
```

任务是为我们拥有超过 2 辆汽车和 Car.num、Car_description.model 的比赛选择最高、平均分数以获得最佳汽车。我写了以下查询

```
SELECT 
race_num,
MAX(result),
AVG(result),
STDDEV(result)
FROM Result r, Car c, Car_description d
WHERE c.car_id = r.car_id AND d.car_id = c.car_id
HAVING COUNT(result) > 2
GROUP BY r.race_num 
```

但我不明白 - 如何为每场比赛选择最好的车号和型号？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:44:49.723

我假设 car_id 是从 car 到 car_description 的 1-1 映射。

下面的查询使用 row_number() 根据分数获取排名靠前的汽车。此信息可能已经存在于“结果”中。

```
select r.race_num,
       MAX(score) as MaxScore,
       AVG(score) as AvgScore,
       MAX(case when seqnum = 1 then c.carnum end) as TopCarNum,
       MAX(case when seqnum = 1 then cd.model end) as TopCarModel
from (select r.*,
             ROW_NUMBER() over (partition by race_num order by score desc) as seqnum
      from Result r
     ) r left outer join
     Car c
     on c.car_id = r.car_id left outer join
     Car_Description cd
     on c.car_id = d.car_id
group by r.race_num
having COUNT(*) > 2 
```

关键是分组，有条件地选择有关顶级汽车的信息。

# objective-c - 使用 nsinvocation 调用 alert 方法

> ID：12283917
> 
> 赞同：0
> 
> 时间：2012-09-05T14:37:03.387
> 
> 标签：objective-c, ios, cocoa

我试图从 myMethod 调用 showUIAlertView 但得到一个异常：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+ [NSInvocation invocationWithMethodSignature:]：方法签名参数不能为 nil”另外，请告知要写什么作为 setTarget 的参数在“[invocation setTarget:self];”行中，我写了 self，因为这两种方法都在同一个文件中。谢谢！！

```
- (void)showUIAlertView:(NSString*)title:(NSString*)message
{
    UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title
                                                      message:message
                                                      delegate:nil 
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];
    [alertView show];
}

- (void)myMethod:(NSString*)someData
{
    //some lines of code
    SEL selector = @selector(showUIAlertView:title:);
    NSMethodSignature *signature = [[self class] instanceMethodSignatureForSelector:selector];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
    [invocation setSelector:selector];
     NSString *str1 = @"Status Message";
     NSString *str2 = @"You are not a member yet.";
     [invocation setTarget:self];
     [invocation setArgument:&str1 atIndex:2];
     [invocation setArgument:&str2 atIndex:3];
    [NSTimer scheduledTimerWithTimeInterval:0.1 invocation:invocation repeats:NO]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:45:25.277

根据错误消息跟踪问题：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[NSInvocation invocationWithMethodSignature:]: method signature argument cannot be nil' 
```

这意味着为选择器`[[self class] instanceMethodSignatureForSelector:selector];`返回。为什么？因为您的类根本没有实现与选择器相对应的消息 - 您在方法声明中混淆了标签和参数名称：`nil``showUIAlertView:title:`

```
- (void)showUIAlertView:(NSString*)title:(NSString*)message; 
```

实际上应该是

```
- (void)showUIAlertView:(NSString*)title title:(NSString*)message; 
```

此外，将目标设置`self`为很好 -`target`是您要调用选择器/调用的对象。

# python - matplotlib 规范直方图

> ID：12283921
> 
> 赞同：6
> 
> 时间：2012-09-05T14:37:16.917
> 
> 标签：python, matplotlib, histogram

我正在尝试使用 matplotlib 绘制直方图的一部分。

我不想绘制具有大量异常值和较大值的整个直方图，而是只关注一小部分。原始直方图如下所示：

```
hist(data, bins=arange(data.min(), data.max(), 1000), normed=1, cumulative=False)
plt.ylabel("PDF") 
```

![在此处输入图像描述](../Images/ee586c033858b863631dc6d888573e17.png)

聚焦后它看起来像这样：

```
hist(data, bins=arange(0, 121, 1), normed=1, cumulative=False)
plt.ylabel("PDF") 
```

![在此处输入图像描述](../Images/c16063c7e55e079cca59ceeaaafe8085.png)

请注意，最后一个 bin 被拉伸，所有 Y 刻度中最差的一个被缩放，因此总和正好为 1（因此根本不考虑当前范围之外的点）

我知道我可以通过在整个可能范围内绘制直方图然后将轴限制到我感兴趣的部分来实现我想要的，但是这会浪费大量时间来计算我不会使用/看到的 bin .

```
hist(btsd-40, bins=arange(btsd.min(), btsd.max(), 1), normed=1, cumulative=False)
axis([0,120,0,0.0025]) 
```

![在此处输入图像描述](../Images/0c686f1a55e46bb3c5493ab5fd8597d7.png)

是否有一种快速简便的方法来仅绘制聚焦区域但仍使 Y 比例正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T15:34:36.723

我认为，您可以使用给定的权重标准化您的数据。（`repeat`是一个 numpy 函数）。

`hist(data, bins=arange(0, 121, 1), weights=repeat(1.0/len(data), len(data)))`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T14:50:24.117

为了绘制直方图的子集，我认为您无法计算整个直方图。

您是否尝试过计算直方图，`numpy.histogram`然后使用`pylab.plot`或其他方法绘制区域？IE

```
import numpy as np
import pylab as plt

data = np.random.normal(size=10000)*10000

plt.figure(0)
plt.hist(data, bins=np.arange(data.min(), data.max(), 1000))

plt.figure(1)
hist1 = np.histogram(data, bins=np.arange(data.min(), data.max(), 1000))
plt.bar(hist1[1][:-1], hist1[0], width=1000)

plt.figure(2)
hist2 = np.histogram(data, bins=np.arange(data.min(), data.max(), 200))
mask = (hist2[1][:-1] < 20000) * (hist2[1][:-1] > 0)
plt.bar(hist2[1][mask], hist2[0][mask], width=200) 
```

**原始直方图：** ![原始直方图](../Images/c7344d58fef7002a454854f5fe3f04ed.png)

**手动计算的直方图：** ![手动计算的直方图](../Images/520a70aad2a00473f5c9a1bebc6c1f58.png)

**手动计算的直方图，裁剪：（** ![手动计算的直方图，裁剪](../Images/6e565104a71d650588f296f9ef9c3ef5.png) 注意：值更小，因为 bin 更窄）

# ruby-on-rails - Ruby Rails 哈希问题

> ID：12283923
> 
> 赞同：0
> 
> 时间：2012-09-05T14:37:18.690
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, hash

所以我一直在为一个问题苦苦挣扎一段时间，似乎无处可去......

当我在第 3 级左右循环遍历哈希时，问题就存在了。

所以我的代码看起来有点像：

```
request[:items][:location_item].each do |locaton_item|
  pp location_item[:name]
  location_item[:items][:sub_area_option_item].each do |sub_area_option_item|
    pp sub_area_option_item[:name]
    sub_area_option_item[:items][:option_item].each do |option_item|
      option_item[:name] <- THIS IS WHERE MY CODE BREAKS
    end
  end
end 
```

失败的原因是因为循环的这个特定部分有 2 个不同的变体，一个有无限数量的“option_item”，一个只有一个“option_item”。它不是将单个“option_item”发回给我，而是通过这个“option_item”循环而不是找到这个特定的字段。当只找到一个对象仍将其作为数组返回时如何强制它的任何想法？

更新(05/092012)

TypeError - 符号作为数组索引

如果我从哈希中删除单个“option_item”，甚至使用条件语句对其进行过滤，则不会出现此错误。

作为之前作为示例的另一个更新，这里是代码：

```
request[:items][:house_option_item][:items][:location_option_item].each do |location_option_item|
  pp location_option_item.try(:[], :location).try(:[], :name)
  # pp location_option_item[:location][:name]

  location_option_item[:items][:sub_area_option_item].each do |sub_area_option_item|
    pp "--" + sub_area_option_item[:sub_area][:name] + "--" + sub_area_option_item[:sub_area][:id]
    count = 0

    # pp sub_area_option_item[:items].length
    # pp "+++++++++++++++++"

    # if sub_area_option_item[:sub_area][:name] != "Conservatory"
      [sub_area_option_item[:items][:option_item]].each do |option_item_key_info|

        pp "----"
        pp option_item_key_info[:usage_name]

      end
    # end

  end
end 
```

示例数据（略）：

```
{:"@xmlns:i"=>"http://www.w3.org/2001/XMLSchema-instance",
 :"@xmlns:a"=>"http://schemas.datacontract.org/2004/07/RXTypes",
 :items=>
  {:house_option_item=>
    {:design=>
      {:house_style=>nil,
       :sales_name=>nil,
       :sq_ft=>"0",
       :"@xmlns:b"=>"http://schemas.datacontract.org/2004/07/",
       :arch_ref=>"D3H102.1",
       :marketing_name=>"Warwick",
       :num_beds=>"0"},
     :items=>
      {:location_option_item=>
        [{:location=>{:sort_order=>"0", :name=>"Eat", :id=>"1"},
          :items=>
           {:sub_area_option_item=>
             [{:sub_area=>
                {:location_id=>"7",
                 :sort_order=>"0",
                 :name=>"Conservatory",
                 :id=>"31"},
               :items=>
                {:option_item=>
                  {:lead_days=>"0",
                   :collection_code=>"NEWHE01",
                   :usage_name=>"Conservatory",
                   :max_qty=>"1",
                   :is_a_bundle=>false,
                   :only_order_bundle=>false,
                   :sub_area=>"Conservatory",
                   :key_info=>
                    {:specification=>
                      "PVC-U 'Edwardian' style Conservatory in white with high performance toughened glass double glazed windows and 600mm (approx) dwarf base wall internally and externally. Conservatory to include fan and light, electric heater, double power point and ceramc floor tiling selected from tile choice . Size of Conservatory to be as follows: 3.2 x 3.1 metre (Availabil
ity will be subject to ground levels/conditions)",
                     :description=>"Conservatory",
                     :image_url=>"/2012/8/10/334_web.jpg",
                     :item_id=>"3",
                     :thumbnail_url=>"/2012/8/10/334_thumb.jpg"},
                   :build_stage_id=>"0",
                   :location=>"Building",
                   :option_flag=>"67",
                   :bundle_items=>nil,
                   :price=>"8950",
                   :choice_items=>nil,
                   :spec_level=>"85"}}},
              {:sub_area=>
                {:location_id=>"7",
                 :sort_order=>"0",
                 :name=>"Doors",
                 :id=>"32"},
               :items=>
                {:option_item=>
                  [{:lead_days=>"0",
                    :collection_code=>"NEWHE01",
                    :usage_name=>"Front Door",
                    :max_qty=>"0",
                    :is_a_bundle=>false,
                    :only_order_bundle=>false,
                    :sub_area=>"Doors",
                    :key_info=>
                     {:specification=>
                       "GRP pre-finished door with patterned glass manufactured by IG. Style of door to be all as indicated on house plan, finished in solid colour externally & white finish internally. Frame to be UPVC. Please refer to the External Finishing schedule to confirm the external finish selected for each property. The paint finish to be one of the New Heritage Colours - Camouflage beige
 - BS381 389, Dk camouflage desert sand - BS381 420, Wine Red - RAL 3005, Braemar - BS4800 - 14C35, Deep Brunswick Green - BS381 227 and White. Door complete with lever handle furniture, multi point lock system, sleeved letterplate, viewer and door chain in black japanned finish externally & chrome lever handle furniture internally.",
                      :description=>"GRP Front door",
                      :image_url=>nil,
                      :item_id=>"4",
                      :thumbnail_url=>nil},
                    :build_stage_id=>"0",
                    :location=>"Building",
                    :option_flag=>"88",
                    :bundle_items=>nil,
                    :price=>"0",
                    :choice_items=>
                     {:option_item_key_info=>
                       [{:specification=>nil,
                         :description=>"NG42 Diamond",
                         :image_url=>"/2012/8/21/485_web.jpg",
                         :item_id=>"211",
                         :thumbnail_url=>"/2012/8/21/485_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG21 Square",
                         :image_url=>"/2012/8/21/486_web.jpg",
                         :item_id=>"212",
                         :thumbnail_url=>"/2012/8/21/486_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG51 Square",
                         :image_url=>"/2012/8/21/487_web.jpg",
                         :item_id=>"213",
                         :thumbnail_url=>"/2012/8/21/487_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG42 Rectangle",
                         :image_url=>"/2012/8/21/488_web.jpg",
                         :item_id=>"214",
                         :thumbnail_url=>"/2012/8/21/488_thumb.jpg"}]},
                    :spec_level=>"83"},
                   {:lead_days=>"0",
                    :collection_code=>"NEWHE01",
                    :usage_name=>"Front Door",
                    :max_qty=>"0",
                    :is_a_bundle=>false,
                    :only_order_bundle=>false,
                    :sub_area=>"Doors",
                    :key_info=>
                     {:specification=>
                       "GRP pre-finished door with patterned glass manufactured by IG. Style of door to be all as indicated on house plan, finished in solid colour externally & white finish internally. Frame to be UPVC. Please refer to the External Finishing schedule to confirm the external finish selected for each property. The paint finish to be one of the New Heritage Colours - Camouflage beige
 - BS381 389, Dk camouflage desert sand - BS381 420, Wine Red - RAL 3005, Braemar - BS4800 - 14C35, Deep Brunswick Green - BS381 227 and White. Door complete with lever handle furniture, multi point lock system, sleeved letterplate, viewer and door chain in black japanned finish externally & chrome lever handle furniture internally.",
                      :description=>"GRP Front door",
                      :image_url=>nil,
                      :item_id=>"4",
                      :thumbnail_url=>nil},
                    :build_stage_id=>"0",
                    :location=>"Building",
                    :option_flag=>"88",
                    :bundle_items=>nil,
                    :price=>"0",
                    :choice_items=>
                     {:option_item_key_info=>
                       [{:specification=>nil,
                         :description=>"NG42 Diamond",
                         :image_url=>"/2012/8/21/485_web.jpg",
                         :item_id=>"211",
                         :thumbnail_url=>"/2012/8/21/485_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG21 Square",
                         :image_url=>"/2012/8/21/486_web.jpg",
                         :item_id=>"212",
                         :thumbnail_url=>"/2012/8/21/486_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG51 Square",
                         :image_url=>"/2012/8/21/487_web.jpg",
                         :item_id=>"213",
                         :thumbnail_url=>"/2012/8/21/487_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG42 Rectangle",
                         :image_url=>"/2012/8/21/488_web.jpg",
                         :item_id=>"214",
                         :thumbnail_url=>"/2012/8/21/488_thumb.jpg"}]},
                    :spec_level=>"83"},
                   {:lead_days=>"0",
                    :collection_code=>"NEWHE01",
                    :usage_name=>"Front Door",
                    :max_qty=>"0",
                    :is_a_bundle=>false,
                    :only_order_bundle=>false,
                    :sub_area=>"Doors",
                    :key_info=>
                     {:specification=>
                       "GRP pre-finished door with patterned glass manufactured by IG. Style of door to be all as indicated on house plan, finished in solid colour externally & white finish internally. Frame to be UPVC. Please refer to the External Finishing schedule to confirm the external finish selected for each property. The paint finish to be one of the New Heritage Colours - Camouflage beige
 - BS381 389, Dk camouflage desert sand - BS381 420, Wine Red - RAL 3005, Braemar - BS4800 - 14C35, Deep Brunswick Green - BS381 227 and White. Door complete with lever handle furniture, multi point lock system, sleeved letterplate, viewer and door chain in black japanned finish externally & chrome lever handle furniture internally.",
                      :description=>"GRP Front door",
                      :image_url=>nil,
                      :item_id=>"4",
                      :thumbnail_url=>nil},
                    :build_stage_id=>"0",
                    :location=>"Building",
                    :option_flag=>"88",
                    :bundle_items=>nil,
                    :price=>"0",
                    :choice_items=>
                     {:option_item_key_info=>
                       [{:specification=>nil,
                         :description=>"NG42 Diamond",
                         :image_url=>"/2012/8/21/485_web.jpg",
                         :item_id=>"211",
                         :thumbnail_url=>"/2012/8/21/485_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG21 Square",
                         :image_url=>"/2012/8/21/486_web.jpg",
                         :item_id=>"212",
                         :thumbnail_url=>"/2012/8/21/486_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG51 Square",
                         :image_url=>"/2012/8/21/487_web.jpg",
                         :item_id=>"213",
                         :thumbnail_url=>"/2012/8/21/487_thumb.jpg"},
                        {:specification=>nil,
                         :description=>"NG42 Rectangle",
                         :image_url=>"/2012/8/21/488_web.jpg",
                         :item_id=>"214",
                         :thumbnail_url=>"/2012/8/21/488_thumb.jpg"}]},
                    :spec_level=>"83"}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:44:59.587

据我所知，循环的第二部分应该是问题所在 - 给定您的源代码和示例数据

```
01: request[:items][:house_option_item][:items][:location_option_item].each do |location_option_item|

02:   location_option_item[:items][:sub_area_option_item].each do |sub_area_option_item|
03:      count = 0
04:      # if sub_area_option_item[:sub_area][:name] != "Conservatory"
05:      [sub_area_option_item[:items][:option_item]].each do |option_item_key_info|
06:          pp option_item_key_info[:usage_name]
07:      end
08:      # end

09:   end
10: end 
```

请注意，第 01 行最终会访问`location_option_item`上面示例中的 which 是：

```
:location_option_item=>
    [{:location=>{:sort_order=>"0", :name=>"Eat", :id=>"1"},
      :items=>
       {:sub_area_option_item=>
         [{:sub_area=>
            {:location_id=>"7",
             :sort_order=>"0",
             :name=>"Conservatory",
             :id=>"31"},
           :items=>
            {:option_item=>
              {:lead_days=>"0",
               :collection_code=>"NEWHE01",
               ........ etc ....... 
```

请注意，这`location_option_item`是键，它的值是一个数组。

因此，我的猜测是这条线是问题（02）：`location_option_item[:items]`

由于 location_option_item 是一个数组，因此您无法从中访问`:items`符号。

如果你想得到`items`它会更像：

```
location_option_item[1][:items] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T04:21:08.843

如果只有一个 option_item， Krista 的示例将有效，但如果有更多则无效*。*我会添加 flatten 并将其调整为：

```
[sub_area_option_item[:items][:option_item]].flatten.each do |option_item|
  option_item[:name]
end 
```

它周围的 [] 确保它是一个数组。flatten 确保如果它已经是一个数组，则删除 [] 的额外层，例如：

```
['a'].flatten
=> ["a"]
[['a','b','c',]].flatten
=> ["a", "b", "c"] 
```

# razor - 使用剃刀将 Html 转换为纯文本

> ID：12283931
> 
> 赞同：1
> 
> 时间：2012-09-05T14:37:42.207
> 
> 标签：razor, html-encode

我有这个富文本存储在数据库中

```
<p>   <em><strong>strong</strong> and <em>em tag</em> normal text <u> 
```

它存储为带有标签的字符串。

现在我想把这个文本放在`<a>`标签的标题中而不显示所有的 html 代码。

我试过了

```
<a name="modal" title="@HttpUtility.HtmlDecode(MyVariable).ToString()"> link </a> 
```

但它仍然显示所有标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:41:13.927

您可以使用正则表达式删除标签：

```
string plainText = Regex.Replace(MyVariable, "<.*?>", string.Empty); 
```

# c++ - 特征 3 并根据模板参数重载新运算符以确保正确对齐

> ID：12283953
> 
> 赞同：1
> 
> 时间：2012-09-05T14:38:35.747
> 
> 标签：c++, templates, new-operator, eigen

我正在使用 Eigen 3.1.1 库和 MS Visual C++ 2010。我想实现一个简单的并发缓冲区来控制对泛型类型 T 元素的访问。

当我使用 Eigen 类型时，如果使用固定大小的可矢量化 Eigen 类型实例化缓冲区，则必须重载并发缓冲区的 new 运算符。另请参阅： [具有特征成员的结构](http://eigen.tuxfamily.org/dox/TopicStructHavingEigenMembers.html)。

```
#include <boost/thread.hpp>
#include <Eigen/Geometry>   // required for the eigen macro

// abstract base class for all buffers
template <class T>
class ConcurrentBuffer
{
public:
    // virtual destructor to allow subclassing
    virtual ~ConcurrentBuffer(){}

    //virtual void get(T& elem) = 0;
    //virtual void put(const T& elem) = 0;
};

template<class T>
class SingleElementStorage : public ConcurrentBuffer<T>
{
public:
    // For fixed-size vect. Eigen types:
    typedef T Elem_type;
    enum { NeedsToAlign = (sizeof(Elem_type)%16)==0 };
    EIGEN_MAKE_ALIGNED_OPERATOR_NEW_IF(NeedsToAlign)

    SingleElementStorage() {}
    ~SingleElementStorage() {}

    //void get(T& elem);
    //void put(const T& elem);

private:
    T elem_;
    boost::shared_mutex mutex_;
}; 
```

这段代码用 MSVC++ 编译得很好。我的问题是这是否是实现这种缓冲区的最佳方式。实际上，如果仅使用 EIGEN_MAKE_ALIGNED_OPERATOR_NEW 并删除 typedef 和 enum，则此代码也可以编译。

那么为什么我不应该简单地将 EIGEN_MAKE_ALIGNED_OPERATOR_NEW 放在我项目的每个结构/类中呢？

另一个相关问题：是否有可能将宏放入抽象基类“ConcurrentBuffer”中，以便所有派生类都不需要添加特定于特征的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:19:30.627

我看了一眼宏定义，似乎你不需要在你身边做 NeedsToAlign 部分。Eigen 已经为您做到了。在 Eigen 文档中也说明了仅使用宏（那么为什么这不是一个好的解决方案？）。

关于你的第二个问题：操作员 new 将在没有虚拟的情况下声明，所以我想（！）它不会工作。

# java - Java中算法的混淆器

> ID：12283955
> 
> 赞同：1
> 
> 时间：2012-09-05T14:38:41.010
> 
> 标签：java, algorithm, obfuscation

我想保护一些算法，以免被逆向工程。我知道总是有风险，但我想让工作尽可能复杂。我知道在 Java 中有 ProGuard 和其他混淆器。但最了解的不是应用程序的结构，而是算法的数值细节。阅读它，让我对算法的保护产生了怀疑。

简单地重命名一些变量，不会使逆向工程算法变得足够困难。也许你可以告诉我，哪些方法更适合算法，哪些混淆器可能在算法上做得最好。

目前我正在考虑一些手工并将其与工具结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:10:42.360

假设您的算法应该在任意 JVM 上作为 Java 字节码执行。然后人们可以破解他们的 JVM 以将字节码转储到某个地方，无论您对类加载过程进行了多少混淆。一旦有了字节码，就可以进行控制流分析，即决定哪些信息从哪里传递到哪里。

您可以混淆各个指令的顺序，但这不会改变计算。对于只想在未修改的情况下运行您的算法的人来说，这不会改变任何事情。重新排序会在多大程度上阻止人们修改您的算法，这在很大程度上取决于算法和控制流的复杂性。

您可能能够以某种模糊的方式使用反射来混淆控制流，或者通过实现自己的解释器并使用它来运行算法。但是这两种方法都可能会对算法的性能造成严重影响。

在其他语言（如本机 x86 代码）中，您可能会通过引入关于如何将字节拆分为指令的歧义来混淆反汇编程序，在一种情况下使用某些字节作为指令的尾部部分，但在另一种情况下作为不同的指令案例。但是在Java中没有这样的选项，字节码的含义定义得太清楚了。

您*可能*能够在某种程度上混淆事物的一种方法是将算法与程序的其他步骤紧密混合。对于直线程序，这可能会使事情变得更难跟踪，特别是如果您通过不可见的 GUI 对象或类似的奇怪东西传递数字。但是一旦你需要循环或类似的东西，让循环边界排列起来似乎非常困难，所以我怀疑这种方法也有很大的潜力。而且我怀疑是否有一个现成的混淆器可以解决这个问题，所以你必须手动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:17:37.177

在我的经验中，您可以使用 .so 文件，即本机实现和 java 实现，使用模糊代码很难跟踪，但唯一的缺点是您必须为此使用 JNI。

# css - 等高嵌套 div

> ID：12283956
> 
> 赞同：0
> 
> 时间：2012-09-05T14:38:43.253
> 
> 标签：css, nested, equal-heights

左右列都有 2 个嵌套的 div，高度不同。
这些 div 形成一个类似框架的形状。请参阅[http://jsfiddle.net/5fA3q/](http://jsfiddle.net/5fA3q/)。

我尝试了不同的 css 等高技巧，它们可以工作但不是在这种情况下，并且几乎可以使用
`padding-bottom:999999px;`
`margin-bottom:-999999px;`
并`absolute`定位*较短*的内部 div。

但很可惜，`padding-bottom`它已经消失了。见[http://jsfiddle.net/5fA3q/11/](http://jsfiddle.net/5fA3q/11/)

我希望有人知道解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:11:17.290

您可以使用`display:table-cell`，但请注意它不适用于旧浏览器。

HTML：

```
<div class="wrapper">
    <div class="left">
         <p>Left</p>
         <p>Left</p>
         <p>Left</p>
         <p>Left</p>
         <p>Left</p>           
    </div>
    <div class="separator"></div>
    <div class="right">
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
        <p>Right</p>
    </div>
</div>
<div class="footer"></div> 
```

CSS：

```
.wrapper{
    width: 500px;
    display:table;
}
.wrapper>div{display:table-cell;}
.left{
    border:10px solid #0188ed;
    margin-right:10px;
    background: #0150e1;
    width: 180px;   
}
.right{
    width:270px;
    border:10px solid #0188ed;
    background: #0150e1;
}
.footer{
    background:#0181ec;
    height: 50px;
    width: 500px;
    border-top: 10px solid #ffffff;
} 
```

[**演示**：http://jsfiddle.net/5fA3q/12/](http://jsfiddle.net/5fA3q/12/)

# matlab - Matlab中使用fft和相同长度输出的两个向量的线性卷积和互相关

> ID：12283959
> 
> 赞同：1
> 
> 时间：2012-09-05T14:38:52.697
> 
> 标签：matlab, numerical-methods, convolution, cross-correlation

我正在实现一个算法，我需要计算两个一维向量之间的线性卷积和互相关`a`并`b`使用 FFT。如果`a`is`m`的长度和 的长度`b`是`n`，那么得到的卷积的总长度将为`m + n - 1`。

但是，该算法要求卷积的输出与输入的长度相同。由于`m = n`，输入向量的长度相同。

在 Matlab 中，假设两个向量都被零填充到 length `m + n - 1`，卷积计算为：

`ifft(fft(a).*fft(b))`

或者，两个向量之间的互相关计算如下：

`fftshift(ifft(fft(a).*conj(fft(b))))`

输出是长度`m + n - 1`。我需要对向量进行零填充，以确保在使用 FFT 时不会发生循环卷积。

但是，我希望输出长度与输入长度相同。一个相关的问题（[也在 stackoverflow 上](https://stackoverflow.com/questions/12253984/linear-convolution-of-two-images-in-matlab-using-fft2)）显示了如何修剪两个图像的相关性。

如何修剪一维输出向量，使其与输入向量的长度相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:13:31.467

在 MATLAB 中，`conv(a, b, 'same')`返回与 a 大小相同的卷积的中心部分。对于互相关，您可以使用`xcorr`，这将为您提供互相关结果。我想您需要自己裁剪结果以获得与输入相同的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:57:19.273

有公式：

```
c = a conv b; 
```

其中，a、b、c在时域；转换到频域后，公式变为

```
C = A * B; 
```

where, A, B and C are fft result of a, b, and c respectively, and all of them are in frequency domain; so c = ifft(C);

# python - Django Celery 和本地化问题

> ID：12283961
> 
> 赞同：0
> 
> 时间：2012-09-05T14:38:59.570
> 
> 标签：python, django, localization, celery, django-celery

我对 celery 有点问题，我不知道为什么它使用不同的本地化而不是我的 django 项目。这是错误：

```
 [2012-09-05 16:15:02,945: ERROR/MainProcess] Task kan.mailing.tasks.resend_task[91430f30-893e-4a75-8cf9-47c4b7ac8f04] raised exception: ImproperlyConfigured("MenuPositionAdmin.list_display[1], 'title_en_us' is not a callable or an attribute of 'MenuPositionAdmin' or found in the model 'MenuPosition'.",)
Traceback (most recent call last):
  File "/home/necromac/work/kan/lib/python2.7/site-packages/celery/task/trace.py", line 224, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/necromac/work/kan/src/kan/mailing/tasks.py", line 44, in resend_task
    result=my_mail_send(t, c, subject=mailing_ob.subject, to=[mail_list_entry_ob.email.email] ,from_email=mailing_ob.reply_to )
  File "/home/necromac/work/kan/src/kan/utils/helpers.py", line 291, in my_mail_send
    text_content = template.render(context) 
```

Project Langueges 就是这个，所以我不知道 celery 从哪里得到 _en_us 表。

```
LANGUAGES = (('pl', _('pl')),
             ('en', _('en')),
             ('de', _('de')),
             ('ru', _('ru')),
             ('fr', _('fr')),
             ('es', _('es')))

LANGUAGES_AVAILABLE = ('pl','en', 'de') 
```

这是问题的根源

```
html_content = template.render(context) 
```

# java - 发布后更改 WSDL

> ID：12283962
> 
> 赞同：1
> 
> 时间：2012-09-05T14:39:01.910
> 
> 标签：java, xsd, jaxb, wsdl

当我发布从 WSDL 创建的 Web 服务时，发布后创建的 WSDL 与原始的不同。不同之处在于发布后创建的 WSDL/XSD 具有包含所有根元素的附加元素 (ARG0)。

由于上述原因，我无法将原始 WSDL/XSD 共享给客户端开发人员，因为原始 WSDL 和发布后创建的不一样。

我使用 Java 作为编程语言和 JAX-WS。

使用 API javax.xml.ws.Endpoint 发布 Web 服务，无需任何应用程序服务器。

Endpoint.publish(url,webserviceinstance)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:01:17.463

由于问题是不必要的包装问题，我专注于包装注释。最终我发现这个问题有一个相关的注释。在 Class 开头添加以下注释语句后，问题已解决。

```
@SOAPBinding(parameterStyle=SOAPBinding.ParameterStyle.BARE)
public class WebServiceHandler implements WebService {
//....
} 
```

从现在开始，我可以成功地从原始 WSDL 创建到已部署机器的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:14:13.443

如果您发布 wsdl，则可以进行更好的评估。鉴于您看到了一个意想不到的包装器，我的猜测是 jax-ws 对原始 wsdl 的解释与您的预期不同。此处的页面 ( [http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/) ) 讨论了不同的 wsdl 配置。我的建议是您遵循使用文档/文字/包装约定的说明，因为它或多或少是基于肥皂的服务的主流。

生成的已发布 wsdl 在服务名称、端口名称或命名空间方面仍可能略有不同，除非您使用 @Webservice 注释属性将这些属性强制为特定值，但它们将保持一致，以便您可以将已发布的 wsdl 提供给您的客户并期待成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:15:43.263

此类问题的最常见原因是实现 Web 服务的类没有具有正确属性的`@WebService`注释。`endpointInterface`事实上，仅仅实现从 WSDL 生成的端点接口是不够的。

# php - 阻止 HTML 表单在 IE 中跳转到屏幕顶部

> ID：12283964
> 
> 赞同：0
> 
> 时间：2012-09-05T14:39:07.973
> 
> 标签：php, jquery, html, internet-explorer

你能建议我做得对吗？

情况是我有一个 HTML 表单，每次单击表单边界内的任意位置时，即使是在控件之间的空白处，屏幕也会跳到表单的顶部。再一次，它只发生在 IE 上。

起初我认为它与一些 JQuery 侦听器有关，但是当我删除所有指向 JQuery 的链接时，它仍然继续发生。

所以我所做的是添加`onclick="return false"`到表单属性中。它停止了上面提到的屏幕跳转，所有的 JQuery/PHP 函数都可以正常工作。

我想问的是我解决这个问题的方式是否有负面反映？

提前致谢，

EP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:42:30.180

即使您的解决方案显然解决了问题，但问题很可能仍然只是隐藏的。

尝试识别归因于您的`<body>`或`<form>`元素的任何 onclick 事件，禁用它们，然后重试。

你很可能会在以后遇到这个解决方案，它会引起头痛，你可以通过现在做更多的挖掘来避免。

**更新：**尝试验证您的代码[http://validator.w3.org/](http://validator.w3.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:45:30.740

通过放置`onclick="return false"`在`<form />`元素上，您将禁用提交按钮。

[在这里演示](http://jsfiddle.net/9JSdF/1/)

# android - Android ffmpeg 简单的 JNI 包装器

> ID：12283967
> 
> 赞同：4
> 
> 时间：2012-09-05T14:39:22.830
> 
> 标签：android, ffmpeg, java-native-interface

我一直在尝试使用命令行访问的 ffmpeg 二进制文件有一段时间了，但一无所获（使用 runtime.exec） 看起来我能够让它工作的唯一方法是使用 C 中的包装器使用 JNI 访问已构建的 ffmpeg 库...主要问题：我已经有超过一个半年没有编写 C 代码了，也不知道从哪里开始...

我只需要 3 次操作，我需要将音频添加到视频文件中，我需要连接两个视频文件，如果可能的话，我需要将剪辑旋转 90 度（但我可以不这样做）......

有没有人有任何可以为我工作的示例代码，或者一些好的起点（我已经用尽了各种谷歌结果的第一页，但无济于事）......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:39:33.430

有很多开源项目可用，但为了简单起见，你可以从[这里开始](https://github.com/churnlabs/android-ffmpeg-sample)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T15:53:16.470

我相信这就是你要找的东西： [https ://github.com/hoary/JavaAV](https://github.com/hoary/JavaAV)

支持多个平台，因此您的代码将更具可移植性。

# yii - yii-user-management 安装 404 错误

> ID：12283968
> 
> 赞同：1
> 
> 时间：2012-09-05T14:39:30.600
> 
> 标签：yii

我正在使用带有 yii-1.1.12 的 MAMP pro。我正在尝试安装最新版本的 yii-user-management。

我的 webapp 路线是 /Users/myname/Sites/yii-1.1.12/htdocs

我创建了“模块”文件夹并将 yii-user-management 复制到其中：

htdocs > protected > modules（模块和子文件夹设置为重写）

配置/main.php

```
'modules'=>array(

    'gii'=>array(
        'class'=>'system.gii.GiiModule',
        'password'=>'password',
        // If removed, Gii defaults to localhost only. Edit carefully to taste.
        'ipFilters'=>array('127.0.0.1','::1'),
    ),

            'modules' => array(
                'user' => array(
                        'debug' => true,
                 )
      ),

),

'components'=>array(
    'user'=>array(
        // enable cookie-based authentication
        'class' => 'application.modules.user.components.YumWebUser',
                    'allowAutoLogin'=>true,
                    'loginUrl' => array('//user/user/login'),
    ),
   'import'=>array(
             'application.modules.user.models.*',
           ),
etc... 
```

我已按照信中的说明进行操作，但是当我在浏览器中调用用户/安装时，我收到 404 错误。 [http://yii.dev:8888/index.php/user/install](http://yii.dev:8888/index.php/user/install)

我的页面工作正常[http://yii.dev:8888/index.php/login](http://yii.dev:8888/index.php/login)（有或没有 index.php）

非常令人沮丧。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:24:40.690

我刚刚意识到您的 config/main.php 有问题...

您在模块中列出了模块：

```
'modules'=>array(
  'gii'=>array(//...gii configuration...),
  'modules' => array(
    'user' => array(
    'debug' => true,
  )
), 
```

它应该只是：

```
'modules'=>array(
  'gii'=>array(//...gii configuration...),
  'user' => array(
    'debug' => true,
  )
), 
```

# java - android字典int，Imageview

> ID：12283970
> 
> 赞同：1
> 
> 时间：2012-09-05T14:39:38.067
> 
> 标签：java, android, dictionary

我无法将对象放入字典并获取它们，我想将 imageViews 与 int 相对，但失败且没有任何错误

字典声明为：

```
 Dictionary<Integer, ImageView> dictPlayerAll = new Dictionary<Integer, ImageView>(){

        @Override
        public int size() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public ImageView remove(Object key) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public ImageView put(Integer key, ImageView value) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public Enumeration<Integer> keys() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public boolean isEmpty() {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public ImageView get(Object key) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public Enumeration<ImageView> elements() {
            // TODO Auto-generated method stub
            return null;
        }
    };; 
```

这里将值放入字典

```
 int mTag = iv.getTag();//its my imageview
    dictPlayerAll.put(mTag, iv); 
```

但它显示零大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:08:10.247

您的更新更有意义，但 Dictionary 类仍然过时。从[文档中](http://developer.android.com/reference/java/util/Dictionary.html)：

> **java.util Class Dictionary**
> ...
> 注意：不要使用此类，因为它已过时。

由于您要创建一个由 Integers ( `new Dictionary<Integer, ImageView>()`) 索引的表，我们应该使用 SparseArray。

此外，当您使用时，`setTag()`您将 Integer 转换为 Object，并且每次使用时，`getTag()`您都将 Integer 从 Object 转换回。这行得通，但如果你可以使用`getId()`它会更快。

我推荐这个：

```
SparseArray<ImageView> allPlayers = new SparseArray<ImageView>();
...

allPlayers.put(iv.getId(), iv); 
```

# python - 比较numpy数组中的多列

> ID：12283973
> 
> 赞同：4
> 
> 时间：2012-09-05T14:39:43.617
> 
> 标签：python, numpy, compare

我有一个 2D numpy 数组，大约有 12 列和 1000+ 行，每个单元格包含一个从 1 到 5 的数字。我正在根据我的点系统搜索最佳的六元组，其中 1 和 2 生成 -1 点和 4 5 给出 +1。

例如，如果某个六元组中的一行包含 [1, 4, 5, 3, 4, 3]，则该行的点应该是 +2，因为 3*1 + 1*(-1) = 2。行可能是 [1, 2, 2, 3, 3, 3] 并且应该是 -3 点。

起初，我尝试了一个海峡正向循环解决方案，但我意识到有 665 280 个可能的列组合要比较，当我还需要搜索最佳的五元组、四元组等时，循环将永远持续下去。

是否有更聪明的 numpy 方式来解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:18:33.627

```
import numpy as np
import itertools

N_rows = 10
arr = np.random.random_integers(5, size=(N_rows,12))
x = np.array([0,-1,-1,0,1,1])
y = x[arr]

print(y)

score, best_sextuple = max((y[:,cols].sum(), cols)
                           for cols in itertools.combinations(range(12),6))
print('''\
score: {s}
sextuple: {c}
'''.format(s = score, c = best_sextuple)) 
```

产量，例如，

```
score: 6
sextuple: (0, 1, 5, 8, 10, 11) 
```

* * *

**说明**：

首先，让我们生成一个随机示例，有 12 列和 10 行：

```
N_rows = 10
arr = np.random.random_integers(5, size=(N_rows,12)) 
```

现在我们可以使用 numpy 索引将`arr`1,2,...,5 中的数字转换为值 -1,0,1（根据您的评分系统）：

```
x = np.array([0,-1,-1,0,1,1])
y = x[arr] 
```

接下来，让我们使用`itertools.combinations`来生成 6 列的所有可能组合：

```
for cols in itertools.combinations(range(12),6) 
```

和

```
y[:,cols].sum() 
```

然后给出 的分数`cols`，一个列的选择（六元组）。

最后，用于`max`挑选得分最高的六元组：

```
score, best_sextuple = max((y[:,cols].sum(), cols)
                           for cols in itertools.combinations(range(12),6)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:47:58.370

```
import numpy

A = numpy.random.randint(1, 6, size=(1000, 12))
points = -1*(A == 1) + -1*(A == 2) + 1*(A == 4) + 1*(A == 5)
columnsums = numpy.sum(points, 0)

def best6(row):
    return numpy.argsort(row)[-6:]

bestcolumns = best6(columnsums)
allbestcolumns = map(best6, points) 
```

`bestcolumns`现在将包含按升序排列的最佳 6 列。通过类似的逻辑，`allbestcolumns`每行将包含最好的六列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:25:54.497

扩展上面 unutbu 更长的答案，可以自动生成掩码的分数数组。由于您的值分数在每次循环中都是一致的，因此每个值的分数只需要计算一次。这是在应用分数之前和之后在示例 6x10 数组上执行此操作的稍微不优雅的方法。

```
>>> import numpy
>>> values = numpy.random.randint(6, size=(6,10))
>>> values
array([[4, 5, 1, 2, 1, 4, 0, 1, 0, 4],
       [2, 5, 2, 2, 3, 1, 3, 5, 3, 1],
       [3, 3, 5, 4, 2, 1, 4, 0, 0, 1],
       [2, 4, 0, 0, 4, 1, 4, 0, 1, 0],
       [0, 4, 1, 2, 0, 3, 3, 5, 0, 1],
       [2, 3, 3, 4, 0, 1, 1, 1, 3, 2]])
>>> b = values.copy()
>>> b[ b<3 ] = -1

>>> b[ b==3 ] = 0
>>> b[ b>3 ] = 1
>>> b
array([[ 1,  1, -1, -1, -1,  1, -1, -1, -1,  1],
       [-1,  1, -1, -1,  0, -1,  0,  1,  0, -1],
       [ 0,  0,  1,  1, -1, -1,  1, -1, -1, -1],
       [-1,  1, -1, -1,  1, -1,  1, -1, -1, -1],
       [-1,  1, -1, -1, -1,  0,  0,  1, -1, -1],
       [-1,  0,  0,  1, -1, -1, -1, -1,  0, -1]]) 
```

顺便说一句，[这个](https://stackoverflow.com/questions/1208118/using-numpy-to-build-an-array-of-all-combinations-of-two-arrays)线程声称直接在 numpy 中创建组合将产生比 itertools 快 5 倍的性能，尽管可能会牺牲一些可读性。

# regex - Perl 正则表达式搜索和替换不匹配

> ID：12283977
> 
> 赞同：0
> 
> 时间：2012-09-05T14:39:49.600
> 
> 标签：regex, perl, search

我正在尝试使用 perl 来搜索和替换一些过时的 MySQL 命令

```
perl -i -pe 'BEGIN{undef $/;} s/if @RequestID.*@NextValue=@TableNameID output/if @RequestID is not NULL\n                begin\n                        select @TableNameID = @TableNameID + 1/smgi' $file1 
```

然而，目前该文件在暗示正则表达式不匹配之前和之后保持完全相同？

我`smgi`打开了标志，因此`.*`也匹配了从[Multiline search 中获取建议的新行替换为 Perl](https://stackoverflow.com/questions/1030787/multiline-search-replace-with-perl)

这是我要匹配的文件的片段

```
 if ( @@rowcount = 0 )
                return 1

        update Sequence set CurrentValue = @TableNameID where Code = 'TableName'
end

/* TableNames - Approval Request ID */
if @RequestID is not NULL
begin
        exec spGetNextSequence @Name='TableName', @NextValue=@TableNameID output

        insert into TableName        /* RequestID */
        (
                TableNameID,
                TxnVrsnID,
                FldNmCod, 
```

如果您在[http://regexpal.com/](http://regexpal.com/)（或任何类似的正则表达式测试器）`smi`上测试模式 - 它匹配正常吗？

图案：`if @ApprovalRequestID.*@NextValue=@TxnDecoratorID output`

* * *

这是 perl 稍微分开的，所以你可以看到发生了什么

```
perl -i -pe 'BEGIN{undef $/;} s/
if @RequestID.*@NextValue=@TableNameID output/
if @RequestID is not NULL\n
                begin\n
                        select @TableNameID = @TableNameID + 1
/smgi' $file1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:45:03.620

`@name`被内插为正则表达式模式中的命名 Perl 数组。转义`@`字符：

```
perl -i -pe 'BEGIN{undef $/;} s/
if \@RequestID.*\@NextValue=\@TableNameID output/
if \@RequestID is not NULL\n
                begin\n
                        select \@TableNameID = \@TableNameID + 1
/smgi' $file1 
```

# java - 空指针异常读取属性文件

> ID：12283979
> 
> 赞同：1
> 
> 时间：2012-09-05T14:39:49.870
> 
> 标签：java, netbeans

我真的不知道还能做什么。我通常将我的属性文件放在我的源文件夹中（顺便说一下，我使用 Netbeans），当我阅读它时，一切正常。

今天，我在源文件夹中创建了一个新的属性文件并尝试读取它，但我不断收到空指针异常，这意味着源文件夹中不存在该文件。然而，在所述源文件夹中还有另一个属性文件，我能够很好地阅读该文件。我删除了这两个属性文件并重新开始，但这次我似乎什么也看不到。

我的代码很好：

```
Properties pp = new Properties();                
pp.load(getClass().getResourceAsStream("/errors.properties")); 
```

然后我为我的项目进行了清理和构建，现在其中一个类可以读取 errors.properties 文件（相同的代码，没有任何更改），但我现在也为我的第二类获取 java.lang.NoClassDefFoundError我尝试运行它。

哇！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:12:59.977

尝试这个：

```
Properties pp = new Properties();
InputStream is = getClass().getClassLoader().getResourceAsStream("errors.properties");
pp.load(is); 
```

顺便提一句。这**不是**NetBeans 中的错误。

如果你使用`getClass().getResourceAsStream("errors.properties")`你的`error.properties`必须是你上课的地方。

*注意：我使用`InputStream is`只是因为否则线会变得太长。当然，您可以将两条线合二为一。*

# android - 在android上解析Json

> ID：12283981
> 
> 赞同：0
> 
> 时间：2012-09-05T14:39:56.647
> 
> 标签：android, json, google-maps

这是我的代码

```
{ public class MainActivity extends MapActivity {

private MapView mapView;
//test start
private static String url = "http://localhost/test/json_parser.php";
private static final String TAG_PLACE="place";
private static final String TAG_ID="id";
private static final String TAG_NAME_PLACE="name_place";
private static final String TAG_LATITUDE="latitude";
private static final String TAG_LONGITUDE="longitude";
private static final String TAG_PERSON="person";
private static final String TAG_DATE="date";
private static final String TAG_TIME="time";
JSONArray place = null;
String[] p_lat=null;
String[] p_lon=null;
String id;
String name_place;
String latitude;
String longitude;
String person;
String date;
String time;
//test end
    @Override
    public void onCreate(Bundle savedInstanceState) {           
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

mapView=(MapView)findViewById(R.id.mapview);
    Drawable marker=getResources().getDrawable(R.drawable.marker);
    marker.setBounds((int)(-marker.getIntrinsicWidth()/2),-marker.getIntrinsicHeight(),    (int)(marker.getIntrinsicWidth()/2),0);
    InterestingLocations funPlaces=new InterestingLocations(marker);
    mapView.getOverlays().add(funPlaces);

    GeoPoint pt=funPlaces.getCenterPt();
    int latSpan=funPlaces.getLatSpanE6();
    int lonSpan=funPlaces.getLonSpanE6();
     Log.v("Overlays","Lat span is" + latSpan);
    Log.v("Overlays","Lon span is" + lonSpan);
     MapController mc=mapView.getController();
     mc.setCenter(pt);
     mc.zoomToSpan((int)(latSpan*1.5),(int)(lonSpan*1.5));
     //test start
    JSONParser jParser = new JSONParser();
    JSONObject json = jParser.getJSONFromUrl(url);
  //System.out.println("Testingggg..." + json.length());
    //test end
//test start
/*
try{
    place = json.getJSONArray(TAG_PLACE);
    for(int i=0;i<place.length();i++){
        JSONObject c = place.getJSONObject(i);
        id = c.getString(TAG_ID);
        name_place = c.getString(TAG_NAME_PLACE);
        latitude = c.getString(TAG_LATITUDE);
        //p_lat[i]=latitude;
        longitude = c.getString(TAG_LONGITUDE);
        //p_lon[i]=longitude;
        person = c.getString(TAG_PERSON);
        date = c.getString(TAG_DATE);
        time = c.getString(TAG_TIME);
    }
}catch(JSONException e){
    e.printStackTrace();
}/*
System.out.print(p_lat[0]);
System.out.print(p_lon[0]);
*/
//test end
    }

    public void myClickHandler(View target){
    switch(target.getId()){
    case R.id.zoomin:
        mapView.getController().zoomIn();
        break;
    case R.id.zoomout:
        mapView.getController().zoomOut();
        break;
    case R.id.sat:
        mapView.setSatellite(true);
        break;
    case R.id.street:
        mapView.setStreetView(true);
        break;
    case R.id.traffic:
        mapView.setTraffic(true);
        break;
    case R.id.normal:
        mapView.setSatellite(false);
        mapView.setStreetView(false);
        mapView.setTraffic(false);
        break;
    }
    mapView.postInvalidateDelayed(2000);
    }

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

   }
   } 
```

当我删除评论时遇到问题

```
 //System.out.println("Testingggg..." + json.length()); 
```

当我删除评论时

```
 /*
  try{
   place = json.getJSONArray(TAG_PLACE);
   for(int i=0;i<place.length();i++){
    JSONObject c = place.getJSONObject(i); ..... 
```

我尝试了很多我没有成功的问题是解析json并感谢每一个人

这是我的 json 文件

```
 {"place":    [{"id":"1","name_place":"Jedeida","latitude":"36.502234","longitude":"9.561264","person":"ahmed","date":"2012-08-01","time":"07:45:50"},
{"id":"2","name_place":"jedeida","latitude":"36.502234","longitude":"9.561109","person":"ahmed","date":"2012-08-01","time":"07:46:30"},{"id":"3","name_place":"jedeida","latitude":"36.501676","longitude":"9.562135","person":"ahmed","date":"2012-08-01","time":"07:48:03"},{"id":"4","name_place":"jedeida","latitude":"36.50083","longitude":"9.563069","person":"ahmed","date":"2012-08-01","time":"07:50:05"},{"id":"5","name_place":"Tebourba","latitude":"36.51029","longitude":"9.553043","person":"ali","date":"2012-08-02","time":"06:05:41"},{"id":"6","name_place":"jedeida","latitude":"36.504886","longitude":"9.553918","person":"ali","date":"2012-08-02","time":"06:07:04"},{"id":"7","name_place":"jedeida","latitude":"36.503503","longitude":"9.555477","person":"ali","date":"2012-08-02","time":"06:09:23"},{"id":"8","name_place":"jedeida","latitude":"36.50211","longitude":"9.561287","person":"ali","date":"2012-08-02","time":"06:11:40"},{"id":"9","name_place":"jedeida","latitude":"36.501208","longitude":"9.562281","person":"ali","date":"2012-08-02","time":"06:13:26"},{"id":"10","name_place":"jedeida","latitude":"36.500477","longitude":"9.563136","person":"ali","date":"2012-08-02","time":"06:15:01"}]} 
```

这是 logcat 文件的 [链接 在此处输入链接描述](https://docs.google.com/document/d/1dFaAnG3kKE0juThDenSx5koAeSRfrdvtKJnqrWI4Scg/edit?pli=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:05:53.553

您将字符串数组**p_lat**和**p_lon 声明**为**null**，这就是您的应用程序被强制关闭的原因。您的 JSON 解析代码运行良好。

您必须初始化具有特定大小的字符串数组，如下所示。

```
String[] p_lat= new String[10];
String[] p_lon= new String[10]; 
```

您也可以使用**ArrayList**以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:24:21.147

我正在使用 wampserver，看来我必须改变

```
private static String url = "http://localhost/test/json_parser.php"; 
```

至

```
private static String url = "http://10.0.2.2/test/json_parser.php"; 
```

问题似乎是由不正确的地址引起的，这就是为什么当您遇到问题时不要忘记使用`log.d("","");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:48:58.103

```
JSONObject c = place.getJSONObject(i); 
```

您确定每个索引 (i) 都是 jsonobject 而不是其他值/字符串吗？

```
System.out.println("Testingggg..." + json.length()); 
```

尝试 Integer.toString(json.length())

# c# - 如果 datagridviewcell(textbox) 中的长内容显示正确的字符

> ID：12283983
> 
> 赞同：0
> 
> 时间：2012-09-05T14:40:12.490
> 
> 标签：c#, winforms, datagridview

在我的 Datagridview 文本单元中，右侧字符比左侧字符更重要。但是，如果单元格对于孔文本来说太小，它只会显示一些从左侧开始的字符。但我想要正确的角色。

是否有可能让右侧字符比左侧字符具有更高的显示优先级？

# sql - SQL Server 2008 脚本删除具有系统生成名称的 PK 约束

> ID：12283990
> 
> 赞同：5
> 
> 时间：2012-09-05T14:40:53.450
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试将聚集索引添加到 SQL Server 2008 中的现有表中，并且它需要是一个自动化脚本，因为该表存在于多个服务器的多个数据库中。

为了添加聚集索引，我需要删除表上的 PK 约束，然后将其重新添加为非聚集索引。问题是 PK 约束的名称是自动生成的，并且末尾附加了一个 guid，所以它就像“PK_ *[Table]* _D9F9203400”。

所有数据库的名称都不同，我不确定如何编写一个自动化脚本，在我不知道约束名称的表上删除 PK 约束。任何帮助表示赞赏！

更新：

下面的答案是我用的。完整脚本：

```
Declare @Val varchar(100)
Declare @Cmd varchar(1000)

Set @Val = (
    select name
    from sysobjects
    where xtype = 'PK'
    and parent_obj = (object_id('[Schema].[Table]'))
)
Set @Cmd = 'ALTER TABLE [Table] DROP CONSTRAINT ' + @Val
Exec (@Cmd)
GO

ALTER TABLE [Table] ADD CONSTRAINT PK_Table
    PRIMARY KEY NONCLUSTERED (TableId)
GO

CREATE UNIQUE CLUSTERED INDEX IX_Table_Column
    ON Table (Column)
GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:46:11.740

您可以查找约束的名称并编写一些动态 SQL 来处理丢弃。

```
SELECT name 
    FROM sys.key_constraints 
    WHERE parent_object_id = object_id('YourSchemaName.YourTableName')
        AND type = 'PK'; 
```

# asp.net-mvc-3 - 如何在 MVC3 中的 drop dwon selected index change 上选中复选框？

> ID：12283995
> 
> 赞同：1
> 
> 时间：2012-09-05T14:41:17.280
> 
> 标签：asp.net-mvc-3, checkbox, html-select

大家好，我有一个应用程序..管理员将 Projetcs 分配给员工，所以我的屏幕看起来像这样我有三个名为 [Projects]、[Employees]、[AssignedWork] 的 Db 表 ..我在做什么是我将所有项目绑定到 DropDwon 并将所有员工名称动态绑定到 CheckBox 这就是我的做法

```
 <div ><a >Project Name : </a><%:Html.DropDownList("Projects")%></div>   

     <div  class="scrool_main" >         
      <% foreach (var item in Model)
         { %>  
             <br />
              <%:Html.CheckBox("EmployeId", new { value = item.EmployeeID, @class = "employeeCheckBox" })%>
              <%:Html.LabelForModel(item.EmployeeName)%>                 
      <%} %> 
       </div>            
        <% if (TempData["notice"] != null) { %>
      <p><label id="msgtext" >Inserted Successfully !!!!</label></p>
      <% } %>        
       </div> 
```

这就是我在下拉更改时调用我的控制器方法的方式

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#Projects").change(function () {
            alert(1);
            var project = document.getElementById("Projects");
            var SelProj = project.options[project.selectedIndex].value;
            alert(SelProj);
            if (SelProj != "") {
                alert("hi");
                var PorjectId;
                $.ajax({
                    type: "POST",
                    url: '<%= Url.Action("GetAssignedWork","Project") %>',
                    enctype: 'multipart/form-data',
                    data: {ProjectId:SelProj}
                })
            }
        });
    });
</script> 
```

这是我的控制器动作

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult GetAssignedWork(string ProjectId)
    {
        ViewBag.Projects = new SelectList(GetProjects(), "ProjectId", "ProjectName");
        var EmployeeList = new List<ResourceModel>();
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            SqlCommand dCmd = new SqlCommand("select EmployeID from AssignedWork where ProjectID='" + ProjectId + "'", conn);
            SqlDataAdapter da = new SqlDataAdapter(dCmd);
            DataSet ds = new DataSet();
            da.Fill(ds);
            conn.Close();
            for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {
               //need help here for getting the checkbox checked
            }                
            return View("AssignWork",EmployeeList);
        }
    } 
```

所以我想要的是，如果管理员从所选索引的下拉列表中选择项目，则应该检查以前分配给该项目的员工。我的意思是应该检查已经分配给该项目的员工……所以我应该怎么做这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:43:18.583

> 用于 MVC 的空版本和“入门”版本的 Visual Studio 模板提供了一个包含 jQuery 的 Scripts 目录。- [参考](http://www.asp.net/ajaxlibrary/jquery_in_mvc.ashx)

包括它 -

```
<script src="../../Scripts/jquery-1.4.1.min.js" type="text/javascript"></script> 

$(function(){
    $('#Projects').change(function(){
      var isChecked = $('#EmployeId').is(':checked');
    });
}); 
```

# javascript - 是否可以 /manipulate/ 函数因为它是字符串？

> ID：12283996
> 
> 赞同：0
> 
> 时间：2012-09-05T14:41:24.360
> 
> 标签：javascript, function, semantics

```
var myString = '';
myString += 'foo';
myString += 'bar';
myString = myString.replace(/oba/, 'qux');

console.log(myString) // produces "foquxr" 
```

有没有办法同样修补功能，比如转动`function(a) { a += 'b'; return a; }`info `function(a) { a += 'b'; console.log(a); return a + 'c'; }`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:45:26.480

您可以这样[编写](http://en.wikipedia.org/wiki/Function_composition)函数

```
// (compose(f, g))(x, y, ...) is the same as f(g(x, y, ...)) 
function compose(f, g) {
  return function (var_args) {
    return f.call(this, g.apply(this, arguments));
  };
} 
```

所以

```
var f = compose(
  function (x) { console.log(x); return x + 'c'; },
  function (a) { a += 'b'; return a; }); 
```

让你结合两个小函数来获得一个行为像的函数

> ```
> function(a) { a += 'b'; console.log(a); return a + 'c'; } 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:28:05.223

`eval`您可以通过从其声明中获取函数的主体，根据需要对其进行操作，并通过`Function()`构造函数重新定义它来实现这一点（不使用）：

```
function myFunction(a) { a += 'b'; return a; }

function changeFunction(){
    var func = window['myFunction'].toString();
    var body = func.substring(func.indexOf("{")+1, func.lastIndexOf("}"));
    body = body.replace("return a;", "console.log(a); return a + 'c';");
    window.myFunction = Function("a", body);
}​ 
```

这是一个[JSFiddle](http://jsfiddle.net/NCBuG/)