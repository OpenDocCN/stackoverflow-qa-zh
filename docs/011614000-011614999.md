# StackOverflow 问答 11614000-11614999

# iphone - 如何以编程方式在视图之间切换？

> ID：11614004
> 
> 赞同：0
> 
> 时间：2012-07-23T13:57:48.413
> 
> 标签：iphone, objective-c, uiviewcontroller

我有以下问题。我想从一个视图转到另一个视图，不是使用按钮，而是编写代码。我有一个视图，其中有一些按钮。当我按下其中一个时，运行 if - else。从其他地方我想去另一个观点。

我试过这个

```
GameOverViewController *gOver = [[GameOverViewController alloc]initWithNibName:@"GameOverViewController" bundle:nil];

[self.view removeFromSuperview];
gOver.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:gOver animated:YES]; 
```

这个

```
GameOverViewController *gOver = [[GameOverViewController alloc]initWithNibName:@"GameOverViewController" bundle:nil];

[self.view removeFromSuperview];
[self.view insertSubview:gOver.view atIndex:0]; 
```

和这个

```
GameOverViewController *gOver = [[GameOverViewController alloc]initWithNibName:@"GameOverViewController" bundle:nil];

[self.view removeFromSuperview];
[self.view addSubview:gOver.view]; 
```

但没有任何效果。有任何想法吗 ？

我也试过这个

```
GameOverViewController *gOver = [[GameOverViewController alloc]initWithNibName:@"GameOverViewController" bundle:nil];

[self.view setHidden:YES];
[self.navigationController pushViewController:gOver animated:NO]; 
```

抛出异常

```
[self presentModalViewController:gOver animated:YES];

[self.view insertSubview:gOver.view atIndex:0];

[self.view addSubview:gOver.view]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:11:28.820

不要调用`[self.view removeFromSuperview];`这可能会导致您的 viewController 被释放，当使用`presentModalViewController`它覆盖您的视图时：

```
GameOverViewController *gOver = [[GameOverViewController alloc]initWithNibName:@"GameOverViewController" bundle:nil];

// gOver.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:gOver animated:YES]; 
```

如果您需要隐藏当前视图，请使用：`[self.view setHidden: YES];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:52:58.297

“我想从一个视图转到另一个视图，不是通过按钮，而是编写代码。” - 你是指这个推入故事板还是你的意思是你不希望它出现在按钮动作中？

上面的代码工作正常：

```
-(IBAction)buttonAction:(id)sender
{
GameViewController *game = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
game.modalTransitionStyle = UIModalTransitionStylePartialCurl ;
[self presentModalViewController:game animated:YES];
} 
```

并希望你做 n iPhone 应用程序而不是 iPad 应用程序，在这种情况下你需要使用 popOver 而不是 modalView

# regex - Haskell 正则表达式和将字符串读取为整数

> ID：11614005
> 
> 赞同：0
> 
> 时间：2012-07-23T13:57:53.797
> 
> 标签：regex, haskell

假设我想考虑表单的输入

```
[int_1, int_2, ..., int_n]
[int_1, int_2, ..., int_m]
... 
```

从文本文件中读取输入。我的目标是获得此列表的最大大小。目前我有一个识别这种模式的正则表达式：

```
let input = "[1,2,3] [1,2,3,4,5]"
let p = input =~ "(\\[([0-9],)*[0-9]\\])" :: [[String]] 
```

输出：

```
[["[1,2,3]","[1,2,3]","2,"],["[1,2,3,4,5]","[1,2,3,4,5]","4,"]] 
```

所以我追求的是第三个索引+ 1的最大值。但是，我被困的地方是试图将此索引视为一个整数。例如，我可以很好地引用元素：

```
(p !! 0) !! 2
> "2," 
```

但我无法将其转换为 int，我试过了

```
read( (p !! 0) !! 2) 
```

然而，这不起作用，尽管事实上

```
:t (p !! 0) !! 2
> (p !! 0) !! 2 :: String 
```

似乎是一个字符串。任何关于为什么我不能将其作为 int 阅读的建议将不胜感激。

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:32:18.773

我不完全确定您的方法是我推荐的方法，但我正在努力解决目标，所以我将回答这个问题。

问题是`read "2,"`不能只产生一个 Int，因为有一个剩余的逗号。你可以用`reads`它来解决这个问题。`reads`产生一个可能的解析列表和剩下的字符串，所以：

```
 Prelude> (reads "2,") :: [(Int,String)]
 [(2,",")] 
```

在这种情况下，它是明确的，所以你得到一个解析，然后你可以从中拉出 int，尽管考虑到你未来的自尊心建议是防御性的，而不是假设总会有一个有效的解析（安全模块适用于之类的东西）。

或者，您可以修改您的正则表达式以不在匹配组中包含逗号。

# java - 试图创建一个片段类

> ID：11614006
> 
> 赞同：1
> 
> 时间：2012-07-23T13:57:57.477
> 
> 标签：java, android, class, android-fragments

我正在尝试从以下创建一个片段类[：](http://developer.android.com/guide/components/fragments.html)

他们给你一个片段类的代码，但我得到了

ExampleFragments.java

```
package com.example.learn.fragments;

public static class ExampleFragments extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.blue_pill_frag, container, false);
    }
} 
```

但是我在第 9 行遇到了一个错误，在那里我声明了类的名称。

```
Illegal modifier for the class ExampleFragments; only public, abstract & final are permitted 
```

我确定这是我不理解的基本内容，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:59:11.283

你不能拥有`static`顶级课程。改变

```
public static class ExampleFragments extends Fragment { 
```

至

```
public class ExampleFragments extends Fragment { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:03:25.537

在您下面的示例中，使用了 static 修饰符，因为 Fragment 是一个嵌套类。

要消除错误，您可以将该片段包含到现有类中，或删除静态修饰符。

# ruby-on-rails - 从父项创建子项的最佳休息方式？

> ID：11614008
> 
> 赞同：1
> 
> 时间：2012-07-23T13:57:59.377
> 
> 标签：ruby-on-rails

作为一个新手，我一直在寻找在显示父项时创建子项的最佳实践。我发现了很多解释，相当不完整，对我来说并不明显。有人可以描述最佳实践的完整实施吗？我创建`parent_item`和`child_item`建模包括`has_many`和`belongs_to`声明。我可以在“显示”视图中列出链接`child_items`（手动创建） 。`parent_item`

现在我想`<%= link_to 'New Child Item', new_child_item_path %>`在 URL 中创建一个传递父母的 id 作为参数。现在该走哪条路？

*   修改路线？
*   向控制器添加参数`child_item.new`？
*   在 child_item 表单中有一个隐藏字段来存储`parent_item.id`值？

我很乐意给最好的解释一个拥抱！

谢谢 ！

弗雷德

* * *

你好，谢谢你的帮助。当我发现这个嵌套资源功能时，我尝试成功地应用它：从父级创建子级时，表单显示为带有已传递给它的 parent_id。

这是我的代码更新：（游乐场是父母，风景是孩子）

**路线**

```
resources :playgrounds do
  resources :landscapes, :only=>[:new, :create]
end 
```

**SHOW**（来自游乐场家长）

```
 <%= link_to 'Add landscape', new_playground_landscape_path(@playground) %> 
```

**LANDSCAPE_CONTROLLER**

```
def new
  @landscape = Landscape.new
  @landscape.playground_id = params[:playground_id] 
```

**FORM**（来自景观）-我不需要参考@playground，因为我只有这种形式的景观字段（我是对的吗？）

```
<%= form_for [@landscape] do |f| %>
...
  <div class="field">
    <%= f.label :playground_id %><br />
    <%=f.text_field :playground_id%>
  </div> 
```

太好了，效果很好。但是playground_id 字段不应该出现在表单中，并且在landscape.rb 模型中被定义为不可访问属性。这些要求是否兼容？我应该隐藏这个字段，让它可以访问吗？

谢谢你的帮助 ！

弗雷德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:33:18.870

这听起来像是嵌套资源的明确案例。在那里，您将把您的父资源传递给生成的路径助手。

```
resources :parents do 
  resources :children
end 
```

在这种情况下，您最终会得到一个看起来像

```
new_parent_child_path(@parent) 
```

在您的子控制器中，父对象将在参数中为`:parent_id`

```
def show
  @parent = Parent.find(params[:parent_id])
  @child = Child.find(params[:id])
end 
```

您还将使用这两种资源创建表单

```
form_for [@parent, @child] do 
```

# c++ - 如何在 C/C++ 中使用源级多线程？

> ID：11614011
> 
> 赞同：-2
> 
> 时间：2012-07-23T13:58:02.900
> 
> 标签：c++, c, multithreading, cpu, multicore

我需要通过在 MS Windows 上使用 2 个硬件 CPU 来获得性能。我写了以下代码：

```
#include "windows.h"

int main1(int argc, CHAR* argv[])
{
    // ...
}

int main2(int argc, CHAR* argv[])
{
    // ...
} 
```

编写两个主要函数 - 每个 CPU 一个。编译器告诉我：

```
D:/MinGW/x86_64-w64-mingw32/lib/../lib/libmingw32.a(lib64_libmingw32_a-crt0_c.o):crt0_c.c:(.text+0x3d): undefined reference to `WinMain'
collect2.exe: error: ld returned 1 exit status 
```

我究竟做错了什么？我如何编写两个电源以使它们在两个不同的 CPU 上运行？`_tmain1, _tmain2`也无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:00:49.770

一个进程中只能有一个`main`功能。从该函数，您可以启动多个线程。这是一个非常简短的示例：

```
#include <iostream>
#include <Windows.h>
#include <process.h>

void thread_func(void* v)
{
   std::cout << "Hello: " << *(int*)v << std::endl;
}

int main()
{
   int i = 1;
   ::_beginthread(thread_func, 0, &i);

   int i2 = 2;
   _beginthread(thread_func, 0, &i2);

   Sleep(1000);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T14:02:16.847

您创建一个主线程，并启动另一个您为其设置处理器关联的线程。

伪代码：

```
int main1(){...}
int main2(){...}

int main()
{
  main2_thread = StartThreed( main2 );
  SetProcessorAffinity( this_thread, 0 );
  SetProcessorAffinity( main2_thread, 1 );
  main1();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T14:01:56.457

要么只做一个主线程，然后从那里启动多个线程。或者一个主要的，您可以在其中分叉多个进程。

# windows-phone-7 - 必应地图控制中国

> ID：11614016
> 
> 赞同：1
> 
> 时间：2012-07-23T13:58:15.200
> 
> 标签：windows-phone-7, submit, bing-maps, app-hub

我试图将我的 wp7 应用程序上传到市场，但它失败了，并带有以下评论：

“您的应用程序使用适用于 Windows Phone 的 Bing 地图 Silverlight 控件。目前第 1 组国家/地区不支持 Bing 地图。您可以重新提交申请并取消选择第 1 组国家/地区。”

第 1 组：中国。

我不想取消选择中国，是否可以使用某种其他控件以便我可以在那里发布我的应用程序？

或者任何其他解决方案都会很好！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:07:04.953

看看这篇文章。 [http://damianblog.com/2012/06/20/windowsphone-different-builds-different-markets/](http://damianblog.com/2012/06/20/windowsphone-different-builds-different-markets/)

我遇到过很多有这个问题的人.. 看起来像这里的市场政策问题

# magento - Magento：从前端表单添加产品

> ID：11614017
> 
> 赞同：0
> 
> 时间：2012-07-23T13:58:17.277
> 
> 标签：magento, add, frontend

我有 magento 演示商店，例如，我希望注册用户可以从前端发布产品？谁能给我一些代码来展示如何制作它？在magento中甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T05:08:19.803

是的，亲爱的，这是可能的，您必须为此创建一个模块，我认为您在前面的客户帐户页面中提供链接/选项卡。在帐户页面中，您提供添加新产品的形式。您还提供了所有选项，例如magento 后端。但需要一些定制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:35:03.547

这当然是可能的。其实应该没*那么*难。您将创建一个模块，以编程方式创建一个订单，并从某个地方链接此页面。您应该能够使用以下资源破解一个：

*   [以编程方式创建订单 - Inchoo](http://inchoo.net/ecommerce/magento/programmatically-create-order-in-magento/)
*   [创建自定义模块第 1-8 部分](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento/)

# c# - 选择所有鼠标光标类型（一一）

> ID：11614019
> 
> 赞同：1
> 
> 时间：2012-07-23T13:58:24.497
> 
> 标签：c#, wpf, cursor

我正在用 C# 开发一个 WPF 应用程序，我想知道是否有任何方法可以测试所有鼠标光标类型。为了更改光标的类型，我这样做：

```
Mouse.OverrideCursor = Cursors.Cross; 
```

我建立了一个像下面这样的计时器：

```
 DispatcherTimer dt = new DispatcherTimer();
 dt.Interval = new TimeSpan(0, 0, 0, 0, 300);
 dt.Tick += new EventHandler(dt_Tick);
 dt.Start(); 
```

这是我的问题：

```
Cursor c = Cursors.AppStarting;
void dt_Tick(object sender, EventArgs e)
{
   Mouse.OverrideCursor = c++; //this doesn't work. 
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:05:27.833

尝试以下操作：

```
int current = 0;
PropertyInfo[] cursors;
void dt_Tick(object sender, EventArgs e) {
    if(cursors == null)
        cursors = typeof(Cursors).GetProperties();
    Mouse.OverrideCursor = 
        (Cursor)cursors[(current++) % cursors.Length].GetValue(null, 
                                                               new object[] { });
} 
```

# eclipse - Eclipse Plugin - 根据文件路径更改编辑器选项卡颜色

> ID：11614020
> 
> 赞同：1
> 
> 时间：2012-07-23T13:58:25.893
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在尝试根据文件路径更改编辑器选项卡的颜色。

因为我正在研究 mvc 基础架构，而且我们经常在 3 个不同的文件夹中获得相同的文件名。

![列表 - 列表 - 列表](../Images/99d079dadf9809f26488d7837ab7b551.png)（Liste 是 List 的法语）

好吧，我想知道是否可以更改标签颜色？我没有在 Google + Eclipse API 上找到我想要的东西，所以我在这里发帖。

无论如何，对此的帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:49:27.190

我认为这是不可能的，因为没有办法改变`CTabItem`. 但是，您可以更改`CTabItem`或 图标的字体。您需要创建自定义`MultiPageEditorPart`并覆盖`addPage()`方法并处理`CTabItems`

# python - Python 的 MEX 等效项（C 包装函数）

> ID：11614021
> 
> 赞同：2
> 
> 时间：2012-07-23T13:58:28.797
> 
> 标签：python, swig, ctypes, cython, mex

来自 MATLAB，我正在寻找某种方法来在 Python 中创建从包装 C 函数派生的函数。我遇到了 Cython、ctypes、SWIG。我的意图不是通过任何因素来提高速度（尽管它肯定会有所帮助）。

有人可以为此目的推荐一个体面的解决方案。编辑：做这项工作最受欢迎/采用的方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:35:50.487

我发现[weave](http://www.scipy.org/Weave)对于较短的功能非常有效，并且界面非常简单。

为了让您了解界面的简单程度，这里有一个示例（取自[PerformancePython 网站](http://www.scipy.org/PerformancePython/)）。请注意转换器（在本例中为 Blitz）如何为您处理多维数组转换。

```
from scipy.weave import converters

def inlineTimeStep(self, dt=0.0):
    """Takes a time step using inlined C code -- this version uses
    blitz arrays."""
    g = self.grid
    nx, ny = g.u.shape
    dx2, dy2 = g.dx**2, g.dy**2
    dnr_inv = 0.5/(dx2 + dy2)
    u = g.u

    code = """
           #line 120 "laplace.py" (This is only useful for debugging)
           double tmp, err, diff;
           err = 0.0;
           for (int i=1; i<nx-1; ++i) {
               for (int j=1; j<ny-1; ++j) {
                   tmp = u(i,j);
                   u(i,j) = ((u(i-1,j) + u(i+1,j))*dy2 +
                             (u(i,j-1) + u(i,j+1))*dx2)*dnr_inv;
                   diff = u(i,j) - tmp;
                   err += diff*diff;
               }
           }
           return_val = sqrt(err);
           """
    # compiler keyword only needed on windows with MSVC installed
    err = weave.inline(code,
                       ['u', 'dx2', 'dy2', 'dnr_inv', 'nx', 'ny'],
                       type_converters=converters.blitz,
                       compiler = 'gcc')
    return err 
```

# java - 使多播套接字可从另一个线程访问

> ID：11614027
> 
> 赞同：2
> 
> 时间：2012-07-23T13:58:52.447
> 
> 标签：java, multithreading, multicast

现在我有一个设备向多播组发送 UDP 消息。我编写了一个小型 Java 程序，它可以通过加入组并查找正确的端口来检测这些数据包。我用`MulticastSocket.receive(packet);`命令。为此，我将继续编写带有 GUI 的程序。我希望用户能够指定一段时间，并让我的程序在这段时间内查找数据包。我做了很多研究，发现最好的方法是在阻塞端口时切断接收命令，过早关闭端口。为了做到这一点，我让我的程序打开另一个线程，并在我的主线程休眠指定的时间时使用新线程来监视 UDP 数据包。它检测数据包就好了。但是，我似乎无法从主线程访问它来关闭端口。这是我的代码：

```
import java.io.*;

import java.net.*;

import java.util.*;

import javax.swing.*;

public class MulticastClient_v2 extends Thread
    {

    public volatile MulticastSocket socket; 

    public void run()
    {
        try {
            //Declare the port and IGMP Group IP
            MulticastSocket socket2 = new MulticastSocket(5000);
            InetAddress address = InetAddress.getByName("224.0.1.2");

            //Display connection information
            System.out.println("Joining 224.0.1.2 on port 5000");

            //Join the Multicast Group
            socket.joinGroup(address);

            //Declaring a DatagramPacket
            DatagramPacket packet;

            //Starting an infinite loop
            //while (true)
            //{
                System.out.println("Waiting on packets..");
                byte[] buf = new byte[1024];
                packet = new DatagramPacket(buf, buf.length); //Declaring an internal DatagramPacket
                socket.receive(packet); //Receiving a Packet

                String received = new String(packet.getData(), 0, packet.getLength());
                InetAddress senderAddress = packet.getAddress(); //Get the InetAddress object
                String forFun = senderAddress.getHostAddress(); //Extract the IP address of sender in text format
                if (received.indexOf("Product1") >= 0) //Searching the raw data for "Product1"
                {
                    //If found, display the IP and device type
                    System.out.println("Product1 found at " + senderAddress);

                }
                if (received.indexOf("Product2") >= 0) //Searching the raw data for "Product2"
                {
                    //If found, display the IP and device type
                    System.out.println("Product2 found at " + senderAddress);
                }

            //}
        }
        catch(IOException ex)
        {
            System.out.println (ex.toString());
        }
    }

    public static void main(String[] args)
    {   
        MulticastClient_v2 thread = new MulticastClient_v2();
        thread.start();
        try {
        Thread.sleep( 3000 );
        thread.socket2.close();
        }
        catch(InterruptedException in)
        {
            System.out.println("Interrupted Exception!");
        }
        System.out.println("Done.");
    }
} 
```

因此，当我尝试编译时，出现以下错误：

```
MulticastClient_v2.java:63: error: cannot find symbol
    thread.socket2.close();
          ^
symbol:   variable socket2 
```

在我看来，主要方法无法使用另一种方法看到 socket2。我的问题是如何让它可以看到？我尝试了一下

```
public volatile MulticastSocket socket; 
```

并且main方法可以访问它，但是我在run方法时无法连接到某个端口。我能找到的唯一可以做到这一点的是bind()。但是 bind() 需要 IP 和端口，而当我第一次声明多播套接字时，我可以像这样声明端口：

```
MulticastSocket socket2 = new MulticastSocket(5000); 
```

任何帮助将不胜感激！我已经坚持了一段时间了。

编辑：我得到了一些建议。首先，我应该在类级别声明和初始化，这给了我以下 IO 错误：

```
MulticastClient_v2.java:8: error: unreported exception IOException; must be caught
or declared to be thrown
public volatile MulticastSocket socket = new MulticastSocket(5000); 
                                         ^ 
```

所以接下来，我试着把它放在类级别的 try..catch 块中，我得到了这个：

```
MulticastClient_v2.java:8: error: illegal start of type
try{
^ 
```

所以我想我真正需要做的是在类级别初始化多播端口，然后将它放在方法内的 try 块中，正如 JTMon 建议的那样。但是我想不出一种方法来选择它的端口而不在初始化期间这样做。

编辑2：我仍然有困难。如果我尝试在类级别像这样初始化它：

```
public volatile MulticastSocket socket; 
```

以后如何在 run() 方法中编辑其端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:20:13.770

我将尝试在这里放一些代码来解释我的确切意思。在类级别声明变量 socket2。

MulticastClient_v2 类应具有以下类型的公共构造函数：

```
public MulticastClient_v2(int portNumber){
    try{
        socket2 = new MulticastSocket(portNumber);
    }catch(IOException e){
        //Do something with exception here
    }
} 
```

如果端口号没有改变，您可以对其进行硬编码，但这种方式更灵活。在 run 方法中，您现在可以使用已初始化的套接字，并且您仍然可以从类外部访问它。只是为了记录，虽然我希望您通过线程上的另一种方法进行访问，但这可能是另一个线程的讨论；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:06:31.110

`socket2`是一个局部变量，所以它的作用域就是`try`定义它的块。使用`MulticastClient_v2`实例，您只能访问该类的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:07:39.047

socket2 不是在 run 方法中声明为局部变量吗？从该方法之外的任何地方都无法访问它。尝试先在类级别声明它，看看会发生什么。

# wpf - 获取DataTemplate中的DataItem

> ID：11614030
> 
> 赞同：3
> 
> 时间：2012-07-23T13:59:08.680
> 
> 标签：wpf, xaml, binding, datatemplate, dataitem

有没有办法获取 DataTemplate 的实际 DataItem。更具体地说，我有一个在数据模板中使用的自定义按钮：

```
<DataTemplate x:Key="SampleDataTemplate1">
    <custom:SampleButton />
</DataTemplate> 
```

我在列表视图中使用它来绑定到集合。我想传递对正在绑定的实际 DataItem 的引用。像这样的东西：

```
<DataTemplate x:Key="SampleDataTemplate1">
    <custom:SampleButton BoundItem="{Binding DataItem}" />
</DataTemplate> 
```

这可能吗？如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:07:30.000

您可以绑定到数据模板中使用的数据。这是一个例子：

```
<DataTemplate x:Key="SampleDataTemplate1">
     <custom:SampleButton BoundItem="{Binding}" />
</DataTemplate> 
```

此处的更多详细信息（请参阅指定值的路径部分）：

[http://msdn.microsoft.com/en-us/library/ms752347.aspx#creating_a_binding](http://msdn.microsoft.com/en-us/library/ms752347.aspx#creating_a_binding)

这个想法是在数据模板内部，其 DataContext 中的所有元素都引用数据模板绑定到的项目。并且没有 Path 的 {Binding} 构造只是绑定到 DataContext。

# asp.net - 为什么 IIS7.5 不显示带有 URL 重写的默认文档？

> ID：11614032
> 
> 赞同：0
> 
> 时间：2012-07-23T13:59:20.287
> 
> 标签：asp.net, iis, iis-7.5

我正在使用 IIS7.5。我有一个简单的 ASP.NET 网络表单站点，它在 global.asax 中使用基本的 URL 重写，拦截对 .aspx 页面的请求并将它们传递给各种模板页面。

例如，您可以请求[http://www.mysite.com/default.aspx](http://www.mysite.com/default.aspx)。在 global.asax 中，我首先检查它是否作为“真实”页面存在。如果没有，我会去数据存储获取详细信息并重定向到 template.aspx?page=default（或类似的东西）。

这一切都很好。但是，有一个问题。如果我浏览到[http://www.mysite.com/default.aspx](http://www.mysite.com/default.aspx)我会得到我期望的页面。如果我在 web.config 或 IIS 中将默认文档设置为 default.aspx，然后浏览到[http://www.mysite.com/](http://www.mysite.com/)我会收到有关不允许浏览目录的错误。

在这种情况下，为什么 IIS 会忽略默认文档？这似乎是因为文件“default.aspx”不存在。如果是这种情况，是否有解决该问题的方法？

## 编辑

澄清一下，我无法控制 IIS 系统，它位于非常基本的主机上，尽管我可以请求一些更改，所以我不能使用任何 URL 重写模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:05:48.653

针对您的情况的解决方法：将 Index.aspx 创建为默认文档作为物理文件，并将用户重定向到 Default.aspx URL。因此，当用户访问 mysite.com/ 时，index.aspx 将启动并强制重定向到 default.aspx，然后它可以处理您的模板重定向逻辑。

# php - 更新mysql的脚本不起作用

> ID：11614036
> 
> 赞同：0
> 
> 时间：2012-07-23T13:59:38.050
> 
> 标签：php

好的，所以我有一个 PHP 脚本，如果投票足够高，它可以让用户成为艺术家。脚本的第一部分有效（进行投票的部分）。但是，使用户成为艺术家的脚本的第二部分没有。它以前在本地主机上工作，但由于某种原因不能在实时服务器上工作。脚本已更改，我没有注意到它，或者我的服务器配置有问题。

我知道我应该使用 mysqli，但请不要提及我正在研究它。

为了解释系统是如何工作的，投票页面上的一个表格被发布到这个脚本中，它都从那里运行。

错误日志中没有错误。如果投票足够高，则更新表格 //make an artist 是行不通的。

这是脚本：

```
<?php
session_start();
include("../database.php");
 $username = $_SESSION["username"];
$artistname = htmlspecialchars(mysql_real_escape_string($_POST['artistname']));
$trackname = htmlspecialchars(mysql_real_escape_string($_POST['trackname']));
$trackurl = htmlspecialchars(mysql_real_escape_string($_POST['trackurl']));

$flag = 0; // Safety net, if this gets to 1 at any point in the process, we don't upload.
if(isset($_POST['yes'])){

//code runs if vote is yes

//check if user hasnt already voted on track

 $result = mysql_query("SELECT username FROM voted WHERE voted='$artistname' AND trackname='$trackname' AND username='$username'")or die(mysql_error());
 $check2 = mysql_num_rows($result);

 if ($check2 != 0) {

    echo('<t1>Sorry, you have already voted on this track. <b>Click next track.</b>     </t1>');
   $flag = $flag + 1;
}

//code runs if everything is okay  
if($flag == 0){
mysql_query("UPDATE members SET vote = vote+1 WHERE artistname='$artistname'
");

echo '<t1><b>You liked the track "'.$trackname.'" by "'.$artistname.'"</t1></b>';

 mysql_query("INSERT INTO voted  (username, voted,trackname, yesno)

        VALUES ('".$username."','".$artistname."','".$trackname."', 'yes')")

or die(mysql_error()); 

//make an artist if vote high enough
$vote = mysql_query("SELECT vote FROM members WHERE artistname='$artistname'")or die(mysql_error());

 if ($vote > 50) {
 $artisturl = htmlspecialchars(mysql_real_escape_string(str_replace(' ', '',$_POST['artistname'])));

mysql_query("UPDATE members SET artist='Y', image1='../files/noprofile.jpg', artisturl='$artisturl' WHERE artistname='$artistname'
 ")or die(mysql_error());

 mysql_query("UPDATE tracks SET artist='Y', artisturl='$artisturl' WHERE artistname='$artistname'
")or die(mysql_error());

//email user that has just been made artist
$result = mysql_query("SELECT * FROM members WHERE artistname= '$artistname'");
while($row = mysql_fetch_array($result)){
function spamcheck($field)
{
//filter_var() sanitizes the e-mail
//address using FILTER_SANITIZE_EMAIL
 $field=filter_var($row['email'], FILTER_SANITIZE_EMAIL);

 //filter_var() validates the e-mail
 //address using FILTER_VALIDATE_EMAIL
  if(filter_var($row['email'], FILTER_VALIDATE_EMAIL))
   {
  return TRUE;
  }
  else
 {
  return FALSE;
 }
 }
 {//send email
 $to = $row['email'];
 $subject = "Congratulations! You're now an NBS artist";
 $message = "Hi ".$row['artistname'].",
 //message removed for condensed code
 $from = "";
 $headers = 'From:' . "\r\n" .
'Reply-To: ' . "\r\n";
mail($to,$subject,$message,$headers);   
 }
 }
 echo '<br><t1>You just made "'.$artistname.'" an artist! <a href="'.$artisturl.'"><b>Click here</b></a> to see their profile.</t1>';
 }
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:14:57.353

我会朝这个扔飞镖。

```
$vote = mysql_query("SELECT vote FROM members WHERE artistname='$artistname'")or die(mysql_error());

 if ($vote > 50) { 
```

我不相信您将 mysql_query 结果转换为有用的变量。也许您使用的是[mysql_fetch_assoc](http://us3.php.net/manual/en/function.mysql-fetch-assoc.php)或[mysql_num_rows](http://php.net/manual/en/function.mysql-num-rows.php)？如果您对每张选票都有单独的记录，则 Num rows 更有意义。如果你总结它们，那么你可以使用类似的东西

```
$output = mysql_fetch_assoc(mysql_query("SELECT vote FROM members WHERE artistname='$artistname'")or die(mysql_error());
$vote = $output['vote']; 
```

还有一点需要指出的是，您没有在输入中使用[mysql_real_escape_string](http://us3.php.net/manual/en/function.mysql-real-escape-string.php)。这是非常危险的，如果您面对公共互联网，强烈建议您使用此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:23:10.640

您缺少两行将返回的资源转换`mysql_query()`为整数以与 进行比较`50`。

```
$vote = mysql_query("SELECT vote FROM members WHERE artistname='$artistname'")or die(mysql_error());

// Add these two lines
$vote = mysql_fetch_assoc($vote);
$vote = $vote['vote'];

if ($vote > 50) { 
```

...但是，可以重写所有该部分以使用 2 个查询而不是 4 个：

```
//make an artist if vote high enough
$artisturl = mysql_real_escape_string(htmlspecialchars(str_replace(' ', '',$_POST['artistname'])));

// This effectively combines the first SELECT and the two UPDATEs into one query
$result = mysql_query("
  UPDATE members m
  LEFT JOIN tracks t ON m.artistname = t.artistname
  SET
    m.artist = 'Y',
    t.artist = 'Y',
    m.image1 = '../files/noprofile.jpg',
    m.artisturl = '$artisturl',
    t.artisturl = '$artisturl'
  WHERE m.artistname = '$artistname' AND m.vote > 50
") or die(mysql_error());

// If this affected more than 0 rows, the user was made an artist
if (mysql_affected_rows($result) > 0) {

  //email user that has just been made artist
  $result = mysql_query("SELECT * FROM members WHERE artistname= '$artistname'");

  // ...and so on 
```

另请注意，您应该将数据`mysql_real_escape_string()`作为最后一个操作传递。所以它应该去`mysql_real_escape_string(htmlspecialchars($data))`而不是相反。

# google-app-engine - 从 AppEngine 提供的 mp3 文件不会“倒带”

> ID：11614037
> 
> 赞同：2
> 
> 时间：2012-07-23T13:59:39.727
> 
> 标签：google-app-engine, http-headers, mp3

我使用 response.out 从我的应用程序提供 mp3 文件，它似乎可以工作，但是如果该文件在 html5 脚本中使用或只是在带有插件的 Web 浏览器中播放，则 mp3 文件第一次可以正常播放，但如果我试着倒带再玩一遍，它不再起作用了。

如果我将相同的文件作为静态文件，那么一切正常。

这是我从 response.out 提供的文件的 url（它只播放第一次，没有倒带）

[http://traki.eledit.net/media/ps/101_4.mp3](http://traki.eledit.net/media/ps/101_4.mp3)

这是用作静态页面的同一文件的 url（这总是有效的）

[http://traki.eledit.net/static/test2.mp3](http://traki.eledit.net/static/test2.mp3)

下载两个文件时，它们是相同的。

当我检查两个文件的 http 标头时，我也得到几乎相同的结果：

[http://www.webconfs.com/http-header-check.php?url=http://traki.eledit.net/media/ps/101_4.mp3&submit=submit](http://www.webconfs.com/http-header-check.php?url=http://traki.eledit.net/media/ps/101_4.mp3&submit=submit)

[http://www.webconfs.com/http-header-check.php?url=http://traki.eledit.net/static/test2.mp3&submit=submit](http://www.webconfs.com/http-header-check.php?url=http://traki.eledit.net/static/test2.mp3&submit=submit)

有谁知道为什么这两个文件的行为不同？我还应该怎么做才能使使用 response.out 服务的文件的行为方式与作为静态页面的文件相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:37:07.090

当您倒带或搜索时，您的浏览器似乎正在尝试向您的应用发送范围请求，而您的脚本并不是为处理此问题而构建的。通过检查请求日志、在每个请求中记录请求标头和/或使用浏览器的开发工具进行检查来验证这一点。

如果是这种情况，您应该检查并遵循浏览器的字节范围标头并仅返回文件的请求部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:01:28.880

尝试更改标题以匹配静态 mp3 文件的`Content-Type`标题。

```
self.response.headers['Content-Type'] = 'audio/mpeg'
self.respone.out.write(mp3_file) 
```

# c# - 如何解析 JSON 对象并在表格中显示？

> ID：11614040
> 
> 赞同：-8
> 
> 时间：2012-07-23T13:59:53.930
> 
> 标签：c#, xml, string, xpath, xml-parsing

我通过访问 web 方法从 JSON 对象获取公司股票信息。JSON 对象如下所示。

```
<StockQuotes>
         <Stock>
            <Symbol>CAT</Symbol>
            <Last>80.95</Last>
            <Date>7/20/2012</Date>
            <Time>4:01pm</Time>
            <Change>0.00</Change>
            <Open>N/A</Open>
            <High>N/A</High>
            <Low>N/A</Low>
            <Volume>0</Volume>
            <MktCap>52.807B</MktCap>
            <PreviousClose>80.95</PreviousClose>
            <PercentageChange>0.00%</PercentageChange>
            <AnnRange>67.54 - 116.95</AnnRange>
            <Earns>7.932</Earns>
            <P-E>10.21</P-E>
            <Name>Caterpillar</Name>
        </Stock>
    </StockQuotes> 
```

我将如何解析上述 JSON 对象以在表中显示数据，如下所示？

```
Symbol:CAT
Last: 80.95
Date: 7-20-2012
Time: 4:01PM
Change:0.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:03:40.540

使用 XML 解析器，[而不是正则表达式](https://stackoverflow.com/a/1732454/1048572)！每种语言都有很多可用的。

如果字符串始终具有相同的格式，您还可以使用字符串方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:36:13.437

您可以使用 XPath 从特定节点中提取文本。以下是提取所需详细信息所需的 Xpath 表达式

```
/StockQuotes/Stock[1]/Symbol[1]
/StockQuotes/Stock[1]/Last[1]
/StockQuotes/Stock[1]/Date[1]
/StockQuotes/Stock[1]/Time[1]
/StockQuotes/Stock[1]/Change[1] 
```

**注意：** IE5及以后已经实现[0]应该是第一个节点，但是根据W3C标准应该是[1]！！

# cross-browser - 我可以强制 IE9 进入 Internet Explorer 9 标准模式吗

> ID：11614041
> 
> 赞同：0
> 
> 时间：2012-07-23T13:59:55.897
> 
> 标签：cross-browser, internet-explorer-9, quirks-mode, strict

当我浏览一个站点时，我的 IE9 设置为 Quirks 模式：

我把我的标题的网站`http-equiv="X-UA-Compatible" content="IE=edge,chrome=1`，但没有任何改变。

我的文档类型是“严格”。

请帮帮我 ：（

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:06:51.590

只是为了覆盖我们的基地，你有没有添加

```
<!DOCTYPE html> 
```

到您文件的开头？

根据[MSDN](http://msdn.microsoft.com/en-us/library/gg699338%28v=vs.85%29.aspx)，这应该是将 IE9 置于标准模式的唯一必要更改。如果您没有 !Doctype 指令，那么 IE9 将进入 IE5 模式！（怪癖）.. 所以请确保您拥有它！

# xcode - 使用 Xcode 4.x 对 Objective-C++ 框架进行单元测试

> ID：11614042
> 
> 赞同：0
> 
> 时间：2012-07-23T13:59:56.457
> 
> 标签：xcode, unit-testing, objective-c++, sentestingkit, octest

我正在使用 Objective C++ 编写一个框架，但在为其设置单元测试时遇到了麻烦。

仅编译框架目标可以正常工作。

但是当我告诉 Xcode 编译并运行测试包时，我得到：

```
Ld ~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Products/Debug/TestFrameworkTests.octest/Contents/MacOS/TestFrameworkTests normal x86_64
    cd "~/Projects/TestFramework"
    setenv MACOSX_DEPLOYMENT_TARGET 10.7
    "/Applications/Xcode 4.5.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++" -arch x86_64 -bundle -isysroot "/Applications/Xcode 4.5.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk" -L~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Products/Debug -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/lib -F~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Products/Debug "-F/Applications/Xcode 4.5.app/Contents/Developer/Library/Frameworks" -filelist ~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Intermediates/TestFramework.build/Debug/TestFrameworkTests.build/Objects-normal/x86_64/TestFrameworkTests.LinkFileList -mmacosx-version-min=10.7 -v -fobjc-arc -fobjc-link-runtime -fprofile-arcs -stdlib=libc++ -framework SenTestingKit -framework Cocoa -framework TestFramework -o ~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Products/Debug/TestFrameworkTests.octest/Contents/MacOS/TestFrameworkTests

Apple clang version 4.0 (tags/Apple/clang-421.10.48) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix
 "/Applications/Xcode 4.5.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld" -demangle -dynamic -arch x86_64 -bundle -macosx_version_min 10.7.0 -syslibroot "/Applications/Xcode 4.5.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk" -o ~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Products/Debug/TestFrameworkTests.octest/Contents/MacOS/TestFrameworkTests -L~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Products/Debug -L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/lib -filelist ~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Intermediates/TestFramework.build/Debug/TestFrameworkTests.build/Objects-normal/x86_64/TestFrameworkTests.LinkFileList -framework SenTestingKit -framework Cocoa -framework TestFramework -force_load "/Applications/Xcode 4.5.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_macosx.a" -framework Foundation -lobjc -lc++ "/Applications/Xcode 4.5.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.0/lib/darwin/libclang_rt.profile_osx.a" -lSystem "/Applications/Xcode 4.5.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.0/lib/darwin/libclang_rt.osx.a" -F~/Library/Developer/Xcode/DerivedData/TestFramework-axdefcbatoubjbbfqiyxildilobl/Build/Products/Debug "-F/Applications/Xcode 4.5.app/Contents/Developer/Library/Frameworks"
Undefined symbols for architecture x86_64:
  "Foo::Bar::Bar()", referenced from:
      -[FooBar_Tests testBaz] in FooBar_Tests.o
  "Foo::Bar::baz() const", referenced from:
      -[FooBar_Tests testBaz] in FooBar_Tests.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我有：

```
C++ Language Dialect: c++11
C++ Standard Library: libc++ 
```

在**两个**构建目标（框架和测试包）上设置。
我当然会在我的测试包目标中链接框架。
此外，所有框架头文件都标记为公共的。
我还尝试将框架文件添加到测试包的目标中并将它们排除在外。这些都没有解决问题。

我现在有点不明白这里出了什么问题。有任何想法吗？

* * *

这就是我的 C++ 类的样子（有点）：

```
//FooBar.hh
namespace Foo {
    class Bar {
    public:
        bool baz() const;
    }
}

//FooBar.mm
#import "FooBar.hh"
namespace Foo {
    bool Bar::baz() const {
        return true;
    }
} 
```

这是我的测试用例：

```
//FooBar_Tests.hh
#import <SenTestingKit/SenTestingKit.h>

@interface FooBar_Tests : SenTestCase

@end

//FooBar_Tests.mm
#import "FooBar_Tests.hh"
#import <TestFramework/FooBar.hh>
//this one fails as well (compiles fine, fails one linkage):
//#import "FooBar.hh"

@implementation FooBar_Tests

- (void)testBaz {
    Foo::Bar bar();
    STAssertEquals(bar.baz(), true, nil);
} 
```

**编辑**：将代码拆分为`.hh`&`.mm`文件。虽然仍然得到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:56:48.633

一个可能的问题是您的单元测试在头文件中。头文件在 OCUnit 中没有多大作用。您甚至可以摆脱头文件并将所有测试用例代码放入实现文件中。将一个 Objective-C 单元测试类添加到您的项目中，为其提供扩展名 .mm，然后将您的测试用例代码移到那里。这能解决问题吗？

当我使用 OCUnit 对 C++ 代码进行单元测试时，我发现我必须将我的应用程序中的 C++ 文件添加到单元测试目标中以避免链接错误。我不确定它是否适用于 Objective-C++ 代码，但值得研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:46:01.210

我最终在我的项目中添加了一个新的单元测试目标，启用了 C++11 并尝试编译/运行它。成功。
不知何故，我最初的单元测试目标在 C++11 方面一定是坏了。之前编译过就好了。

现在是时候将我的测试用例迁移到新的测试包了，我猜。

……我以为我要疯了。哦，好吧……</p>

# json - Spring 3 MVC ContentNegotiatingViewResolver 示例

> ID：11614043
> 
> 赞同：0
> 
> 时间：2012-07-23T13:59:59.077
> 
> 标签：json, spring-mvc, jaxb, marshalling, unmarshalling

org.springframework.oxm.jaxb.Jaxb2Marshaller 从 MyKong 运行此示例时未发现错误

[http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/)

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:12:00.097

将此添加到您的`pom.xml`：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-oxm</artifactId>
    <version>${spring.version}</version>
</dependency> 
```

您`${spring.version}`正在使用的 spring 框架版本在哪里

# objective-c - 是什么让钥匙串项目独一无二（在 iOS 中）？

> ID：11614047
> 
> 赞同：116
> 
> 时间：2012-07-23T14:00:14.523
> 
> 标签：objective-c, ios, macos, keychain

我的问题涉及 iOS 中的钥匙串（iPhone、iPad、...）。我认为（但不确定）在 Mac OS X 下实现钥匙串会引发相同的问题和相同的答案。

* * *

iOS 提供了五种类型（类）的钥匙串项。您必须为键选择这五个值之一`kSecClass`来确定类型：

```
kSecClassGenericPassword  used to store a generic password
kSecClassInternetPassword used to store an internet password
kSecClassCertificate      used to store a certificate
kSecClassKey              used to store a kryptographic key
kSecClassIdentity         used to store an identity (certificate + private key) 
```

经过长时间阅读苹果文档、博客和论坛条目后，我发现 keychain 类型的项`kSecClassGenericPassword`从属性中获取其唯一性`kSecAttrAccessGroup`，`kSecAttrAccount`并且`kSecAttrService`.

如果请求 1 中的这三个属性与请求 2 中的相同，那么无论任何其他属性如何，您都会收到相同的通用密码钥匙串项。如果此属性中的一个（或两个或全部）更改其值，那么您将获得不同的项目。

但`kSecAttrService`仅适用于 type 的项目`kSecClassGenericPassword`，因此它不能成为任何其他类型项目的“唯一键”的一部分，并且似乎没有文档清楚地指出哪些属性唯一地确定了钥匙串项目。

“GenericKeychain”的“KeychainItemWrapper”类中的示例代码使用该属性`kSecAttrGeneric`使项目唯一，但这是一个错误。此示例中的两个条目仅存储为两个不同的条目，因为它们`kSecAttrAccessGroup`是不同的（一个设置了访问组，另一个让它自由）。如果您尝试在没有访问组的情况下添加第二个密码，使用 Apple 的`KeychainItemWrapper`，您将失败。

**所以，请回答我的问题：**

*   是真的吗`kSecAttrAccessGroup`，`kSecAttrAccount`和的组合`kSecAttrService`是 kSecClass 的钥匙串项的“唯一键”`kSecClassGenericPassword`吗？
*   `kSecClass`如果不是，哪些属性使钥匙串项目唯一`kSecClassGenericPassword`？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-07-26T15:00:14.953

主键如下（源自 Apple 的开源文件，参见[Schema.m4](http://www.opensource.apple.com/source/libsecurity_cdsa_utilities/libsecurity_cdsa_utilities-55006/lib/Schema.m4)、[KeySchema.m4](http://www.opensource.apple.com/source/libsecurity_cdsa_utilities/libsecurity_cdsa_utilities-55006/lib/KeySchema.m4)和[SecItem.cpp](http://opensource.apple.com/source/libsecurity_keychain/libsecurity_keychain-55050.2/lib/SecItem.cpp)）：

*   对于类的钥匙串项`kSecClassGenericPassword`，主键是 和 的 `kSecAttrAccount`组合`kSecAttrService`。
*   对于类的钥匙串项`kSecClassInternetPassword`，主键是`kSecAttrAccount`, `kSecAttrSecurityDomain`, `kSecAttrServer`, `kSecAttrProtocol`, `kSecAttrAuthenticationType`,`kSecAttrPort`和的组合`kSecAttrPath`。
*   对于类的钥匙串项，`kSecClassCertificate`主键是 和 的组合。`kSecAttrCertificateType``kSecAttrIssuer``kSecAttrSerialNumber`
*   对于 类 的钥匙串项`kSecClassKey`，主键是`kSecAttrApplicationLabel`, `kSecAttrApplicationTag`, `kSecAttrKeyType`, `kSecAttrKeySizeInBits`,`kSecAttrEffectiveKeySize`和创建者、开始日期和结束日期的组合，这些组合还没有被 SecItem 公开。
*   对于类的钥匙串项，`kSecClassIdentity`我没有在开源文件中找到有关主键字段的信息，但由于身份是私钥和证书的组合，我假设主键是主键的组合`kSecClassKey`和的字段`kSecClassCertificate`。

由于每个钥匙串项都属于一个钥匙串访问组，所以感觉钥匙串访问组（字段`kSecAttrAccessGroup`）是所有这些主键的附加字段。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-11T02:25:54.817

前几天我遇到了一个与这个问题相关的错误（在 iOS 7.1 上）。我`SecItemCopyMatching`用来读取一个`kSecClassGenericPassword`项目并且它一直返回`errSecItemNotFound`（-25300）`kSecAttrAccessGroup`，`kSecAttrAccount`并且`kSecAttrService`都与钥匙串中的项目匹配。

最终我发现这`kSecAttrAccessible`不匹配。钥匙串中的值持有 pdmn = dk ( `kSecAttrAccessibleAlways`)，但我使用的是`kSecAttrAccessibleWhenUnlocked`.

当然，这个值一开始就不需要`SecItemCopyMatching`，但`OSStatus`不是`errSecParam`也不是`errSecBadReq`，只是`errSecItemNotFound`(-25300) 这使得找到它有点棘手。

因为`SecItemUpdate`我遇到过同样的问题，但在这种方法中，即使在参数中使用相同`kSecAttrAccessible`的`query`参数也不起作用。只有完全删除此属性才能修复它。

我希望这条评论能为你们中的一些人节省一些宝贵的调试时间。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-04T12:20:08.907

@Tammo Freese 给出的答案似乎是正确的（但没有提到所有主键）。我在文档中寻找一些证据。终于找到了：

**[Apple 文档提到了每类机密的主键（引用如下）：](https://developer.apple.com/documentation/security/errsecduplicateitem)**

> 当该钥匙串已经具有具有同一组复合主键的同一类的项目时，系统认为该项目是给定钥匙串的副本。每个类的钥匙串项都有一组不同的主键，尽管**所有类都使用了一些共同的属性。特别是，在适用的情况下， kSecAttrSynchronizable 和 kSecAttrAccessGroup 是主键集的一部分**。下面列出了额外的每类主键：
> 
> *   对于通用密码，主键**包括 kSecAttrAccount 和 kSecAttrService。**
> *   对于 Internet 密码，主键**包括 kSecAttrAccount、kSecAttrSecurityDomain、kSecAttrServer、kSecAttrProtocol、kSecAttrAuthenticationType、kSecAttrPort 和 kSecAttrPath。**
> *   对于证书，主键**包括 kSecAttrCertificateType、kSecAttrIssuer 和 kSecAttrSerialNumber。**
> *   对于关键项，主键**包括kSecAttrKeyClass、kSecAttrKeyType、kSecAttrApplicationLabel、kSecAttrApplicationTag、kSecAttrKeySizeInBits和kSecAttrEffectiveKeySize。**
> *   对于身份项，即证书和私钥捆绑在一起，主密钥**与证书相同。**因为私钥可能被多次认证，证书的唯一性决定了身份的唯一性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-03-18T15:33:58.380

这是有关钥匙串项目唯一性的另一条有用信息，可在[此 Apple 文档页面](https://developer.apple.com/documentation/security/keychain_services/keychain_items/adding_a_password_to_the_keychain?language=objc)的“确保可搜索性”部分中找到。

> 为了以后能够找到该项目，您将使用您对其属性的了解。在此示例中，服务器和帐户是项目的区别特征。对于常量属性（此处为服务器），在查找期间使用相同的值。相反，帐户属性是动态的，因为它保存用户在运行时提供的值。**只要您的应用从不添加具有不同属性的相似项目（例如同一服务器上不同帐户的密码），您就可以忽略这些动态属性作为搜索参数，而是将它们与项目一起检索。结果，当你查找密码时，你也得到了相应的用户名。**
> 
> 如果您的应用确实添加了具有不同动态属性的项目，那么您需要在检索期间在它们之间进行选择。一种选择是以另一种方式记录有关项目的信息。例如，如果您在 Core Data 模型中保存用户记录，则在使用钥匙串服务存储密码字段后将用户名存储在那里。稍后，您使用从数据模型中提取的用户名来作为密码搜索的条件。
> 
> 在其他情况下，通过添加更多属性来进一步表征项目可能是有意义的。例如，您可以[`kSecAttrLabel`](https://developer.apple.com/documentation/security/ksecattrlabel?language=objc)在原始添加查询中包含该属性，提供一个字符串来标记用于特定目的的项目。然后，您以后就可以使用此属性来缩小搜索范围。

示例中使用了类项`kSecClassInternetPassword`，但有一条注释说：

> 钥匙串服务还提供相关的 kSecClassGenericPassword 项目类。通用密码在大多数方面与 Internet 密码相似，但它们缺少特定于远程访问的某些属性（例如，它们没有 kSecAttrServer 属性）。当您不需要这些额外属性时，请改用通用密码。

# javascript - 如何使 contentEditable 在 iOS 5/iOS 6 下工作

> ID：11614049
> 
> 赞同：13
> 
> 时间：2012-07-23T14:00:21.017
> 
> 标签：javascript, html, ios5, ios6, mobile-safari

我目前正在开发一个 contenteditable iframe，到目前为止，它可以在除移动 Safari 之外的所有浏览器下完美运行。我正在使用 iOS 5.1.1。该问题在任何支持 contentEditable 的 iOS 版本中都可以重现。

问题如下：当您点击内容时，内容正确聚焦，您可以移动光标和所有内容，但是一旦对其应用操作，就会发生以下情况：焦点仍在 iframe 中，您可以看到光标，但是它不像以前那样响应 keydown 。即使我移动光标并仍然尝试在其中键入任何内容，也没有任何反应。

下面是一个例子： [http ://www.quirksmode.org/dom/execCommand/](http://www.quirksmode.org/dom/execCommand/)

如果您将 iframe 集中在内容内的任何位置并说您应用 text-align right。内容正确地向右对齐，但是如果您尝试输入任何其他字符，您会看到 ui 锁定，但光标所在的位置内没有出现新字符。如果您尝试应用不同的命令，它仍然可以工作。

有谁知道我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T11:30:34.490

您可以简单地使用 iframe 设计模式而不是 contenteditable 属性来使任何 HTML 元素可编辑。

使 iframe 中的元素可编辑的 javascript 代码是：

```
var iframe = document.getElementById ('the iframe Id ') ;
var doc = iframe.contentDocument || iframe.contentWindow.document;
doc.designMode = "on"; 
```

当我阅读此方法中未发现跨浏览器问题时

如需完整参考，请参见[此处](http://help.dottoro.com/ljvqvntb.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:39:48.260

是否可以选择升级您的 iOS 版本？我刚刚使用 iOS 6.1 测试了您描述的所有条件，没有出现任何问题。

由于 iOS5 是第一个支持内容可编辑的 iOS Safari 版本，因此该实现很可能包含错误。似乎已经成熟了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T12:38:51.913

iOS 5.1.1 支持的 HTML5 功能非常少。将其更新到 iOS 7 后，它将完全正常工作。

# c - 我可以在声明后初始化字符串吗？

> ID：11614050
> 
> 赞同：5
> 
> 时间：2012-07-23T14:00:24.590
> 
> 标签：c

我可以在声明后初始化字符串吗？

```
char *s;
s = "test"; 
```

代替

```
char *s = "test"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:02:35.973

您可以，但请记住，使用该语句，您将存储在`s`指向其他地方分配的只读字符串的指针中。任何修改它的尝试都会导致未定义的行为（即，在某些编译器上它可能会工作，但通常会崩溃）。这就是为什么你通常使用 a`const char *`来做那件事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T14:02:51.543

是的你可以。

```
#include <stdio.h>

int 
main(void)
{
    // `s' is a pointer to `const char' because `s' may point to a string which
    // is in read-only memory.
    char const *s;
    s = "hello";
    puts(s);
    return 0;
} 
```

注意：它不适用于数组。

```
#include <stdio.h>

int 
main(void)
{
    char s[32];
    s = "hello"; // Syntax error.
    puts(s);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:56:26.983

对于指针（如上所述）是正确的，因为引号内的字符串是在编译时从编译器分配的，因此您可以指向此内存地址。当您尝试更改其内容或当您有一个固定大小的数组想要指向那里时，就会出现问题

# redirect - Struts2 在新选项卡中重定向

> ID：11614051
> 
> 赞同：2
> 
> 时间：2012-07-23T14:00:28.373
> 
> 标签：redirect, struts2

我正在开发一个 struts2 项目。在我的`struts.xml`中，我有一个重定向到一个动态页面`http://myurl.de/2012-07-20.html` ，如下所述：[How to do dynamic URL redirects in Struts 2?](https://stackoverflow.com/questions/173846/struts2-how-to-do-dynamic-url-redirects) .

但我希望新页面显示在新选项卡中。有没有办法在`struts.xml`文件中做到这一点？

我找到了一些 JavaScript 解决方案，但我更愿意在`struts.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:43:28.700

当您调用应该重定向到新弹出窗口的 url 时，通过`window.open()`在 javaScript 中使用。或者通过`target="_blank"`在表单标签中指定，这将在新的弹出窗口中打开重定向页面。关于新标签，您无法控制`target="_blank"`将在新弹出窗口或新标签中打开，因为这是由您使用的浏览器决定的，无论是 IE、FF 还是 chrome。

您可以将浏览器配置为在新选项卡而不是新窗口中打开。通过浏览器选项

# mysql - SQL 查询以查看差异值

> ID：11614062
> 
> 赞同：1
> 
> 时间：2012-07-23T14:01:03.290
> 
> 标签：mysql, sql

我每天凌晨 4 点拍摄用户登录日志（登录或未登录）的快照，按每个区域和每日用户总数进行分类。但是，我想创建一个 SQL 查询来查看前一天的差异值（可能是百分比），这样我就可以看到哪个区域的用户增加或减少了。我知道我可以对此进行硬编码，但是在相当简单的 SQL 查询中是否有任何优雅的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:14:58.310

```
There are two ways to do this:
First Way:
1\. Create a table in your database
    CREATE TABLE user_logs (id int(11) AUTO_INCREMENT, daily_number varchar(1000), current_percentage varchar(30), date datetime)
2\. Run the script to get the number of users for that day
    INSERT INTO user_logs (daily_number) VALUES ($daily_value)
3\. Create function to compare the latest two DB rows, then insert percentage into (numberOfRows-1)

Second Way:
1\. Create a log of the user records in a txt file
2\. In the log, append each number seperated by comma
3\. Create function to compare the last two values in log and take the average of the two 
```

# ios - Facebook 应用类型：为移动和网络选择哪一个？

> ID：11614064
> 
> 赞同：18
> 
> 时间：2012-07-23T14:01:15.100
> 
> 标签：ios, facebook, facebook-apps, facebook-authentication, facebook-access-token

在 Facebook 应用程序设置☞ 高级☞ 身份验证中，我可以选择“Web”或“Native/Desktop”作为应用程序类型。信息泡泡说：

> 如果您是原生 iOS 或 Android 应用程序、设备或桌面应用程序，请仅选择 Native/Desktop

实际上我不是这些，但我的应用程序是原生 iOS 应用程序以及 Facebook 页面选项卡。
**问题：**我应该选择哪种应用类型？

* * *

我做了一些研究，并在[Facebook Android 教程](https://developers.facebook.com/docs/mobile/android/build/#shoot)（在疑难解答下）中发现了以下内容：

> *   **应用程序类型 Web 与本机/桌面。有关系吗？**: 不，没关系。但是，建议您为您的应用使用“Native/Desktop”类型。

*没关系*是什么意思？这对我来说没有意义。那我为什么要选择呢？

我对 SO 进行了更多研究，发现[@Igy](https://stackoverflow.com/users/21062/igy)（Facebook的开发支持工程师）发表了[以下声明：](https://stackoverflow.com/a/11073040/601466)

> 如果应用程序的类型设置为“本机/桌面”，则假定您使用二进制文件分发了应用程序的密钥，因此应用程序访问令牌不受信任（并且 PHP SDK 中的“getAccessToken”仅在真实用户登录时才有效中，它不能回退到应用令牌）

最后我在[Facebook 文档](https://developers.facebook.com/docs/reference/api/application/)中找到了这个：

> **注意**：配置为本地/桌面应用程序的应用程序将无法进行需要应用程序的 API 调用`access_token`。

我确实需要进行需要来自我的页面选项卡应用程序的访问令牌的 API 调用，因此我的结论是选择“Web”作为应用程序类型，尽管我有一个使用与页面选项卡相同的应用程序 ID 的本机 iOS 应用程序应用程序。但这会对 iOS 应用程序有任何缺点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T14:06:57.590

TL；DR：除非您将应用程序机密放入 iOS / Android 二进制文件中，否则请使用“网络”

主要区别（以及它说“没关系”同时还给出建议的原因）是，如果您选择“本机/桌面”模式，则假定您分发的应用程序二进制文件嵌入了应用程序机密，并且应用程序机密被视为不受信任。

在此配置中，使用应用程序机密的 API 调用（例如创建测试用户、代表应用程序本身进行 API 调用，如更改应用程序设置、发布成就等）将不起作用。

如果您的应用程序不需要使用应用程序密钥/应用程序访问令牌，则将其设置为本机/桌面会在一定程度上提高安全性，因为您的应用程序的攻击向量更少。

如果您使用您的代码分发应用程序密码，您必须使用该选项，否则用户可以轻松确定应用程序密码并劫持应用程序本身。

# java - 关于 servlet 的日志配置

> ID：11614065
> 
> 赞同：0
> 
> 时间：2012-07-23T14:01:17.453
> 
> 标签：java, jakarta-ee, tomcat, servlets, log4j

我正在开发一个应用程序，我想配置 log4j，因为我还想为我的项目进行单独的日志记录，以便创建一个单独的日志文件。下面是我的项目的图片，请单击 url 来查看它。 .[项目结构的快照](http://imageshack.us/photo/my-images/402/11979537.jpg/) 现在这里是 servlet

```
package com.saral;

import java.io.IOException;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class First
 */
//@WebServlet("/First")
public class MyServlet extends HttpServlet
{
    private static final long serialVersionUID = 1L;
    static final Logger logger = Logger.getLogger(MyServlet.class);

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PropertyConfigurator.configure("log4j.properties");
        logger.info("before---->");

        // TODO Auto-generated method stub
        String name=request.getParameter("txtName");
        response.setContentType("text/html");
        PrintWriter out=response.getWriter();
        out.println("Hello,"+name);
        out.println("<br> this output is generated by a simple servlet.");
        out.println("Total Number of users logged in--->"+request.getSession().getServletContext().getAttribute("sessionCount"));
        out.close();
}} 
```

web.xml 的结构是

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>FirstDemo</display-name>

  <servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>com.saral.MyServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/helloServlet</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>home.html</welcome-file>
  </welcome-file-list>

  <listener>
  <listener-class>com.saral.SessionCounter</listener-class>
</listener>

</web-app> 
```

但是在tomcat上运行应用程序时显示以下错误..

```
 INFO: Server startup in 888 ms
log4j:ERROR Could not read configuration file [log4j.properties].
java.io.FileNotFoundException: log4j.properties (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:306)
    at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:324)
    at com.saral.MyServlet.doGet(MyServlet.java:29)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
log4j:ERROR Ignoring configuration file [log4j.properties]. 
```

请告知如何生成单独的日志，请告知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:11:28.923

这意味着 log4j.properties 文件不在您的类路径中。您需要将其放在“src”文件夹下并将应用程序重新部署到tomcat。

# java - 这两条 java 行中的 jvm 有什么不同：

> ID：11614070
> 
> 赞同：1
> 
> 时间：2012-07-23T14:01:36.487
> 
> 标签：java, if-statement, core

查看旧代码的更改，我看到了一个非常有趣的更改。有区别：

```
if(retValue.equals("") || retValue == null){

if(retValue == null || retValue.equals("")){ 
```

有什么建议么？与jvm有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:02:45.600

当然。有明显的区别。例如，在 retValue 为 null 的情况下，第一个将导致 NullPointerException。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T14:05:26.053

`||`and运算符是“惰性的`&&`”：JVM 将在确定结果后立即停止对表达式的求值。

*   在 的情况下`||`，一旦其中一个操作数为真 ==> 整个表达式为真，它将立即停止。
*   在 的情况下`&&`，一旦其中一个操作数为假 ==> 整个表达式为假，它将立即停止。

引自[JLS #15.24](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.24)（强调我的）：

> 条件或运算符运算`||`符类似于`|`（§15.22.2），但**仅当其左侧操作数的值为 false 时才评估其右侧操作数**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:05:52.493

如果任一语句为真，OR 返回真。这意味着 if 只会检查第一条语句（例如，在第二行代码中）

```
retValue == null 
```

如果第一个为真，则不会检查第二个。这意味着如果 retValue 为 null，第一行代码可能意味着 NullPointerException，但对于相同的输入，第二行不会有 NullPointerException。

# c++ - 迭代 Base 类型的向量和/或从 base 派生的类型

> ID：11614077
> 
> 赞同：1
> 
> 时间：2012-07-23T14:01:57.550
> 
> 标签：c++, c++11, iterator

我需要存储 Base 类型的对象，以及派生类型 BaseDerivedA 和 BaseDerivedB 的对象。这些对象需要在内存中对齐。我想提供一个迭代所有对象的迭代器。我想避免存储 Base 指针向量的内存开销。

为此，我构建了以下容器

```
struct Container {
    std::vector<Base> bases;
    std::vector<BaseDerivedA> derivedAs;
    std::vector<BaseDerivedB> derivedBs;

    // Iterator over the three vectors
    all_iterator<Base> all_begin(){ return all_iterator(bases[0],this); }
    all_iterator<Base> end_begin(){ return all_iterator(nullptr,this); }

    // Where all_iterator is defined as
    template < class T >
    struct all_iterator
    : public boost::iterator_facade< all_iterator<T>,
                                     T, boost::forward_traversal_tag>
    {
        all_iterator() : it_(0) {}
        explicit all_iterator(T* p, Container* c) // THIS JUST FEELS WRONG
        : it_(p), c_(c) { }

    private:
        friend class boost::iterator_core_access;
        T* it_;
        Container* c_;
        void increment() {
            if (it_ == static_cast<T*>(&(c_->bases[c_->bases.size()-1]))) {
                it_ = static_cast<T*>(&(c_->derivedAs[0]));
            } else if (it_ == static_cast<T*>(&(c_->derivedAs[ds_->derivedAs.size()-1]))) {
                it_ = static_cast<T*>(&(c_->derivedBs[0]));
            } else if (it_ == static_cast<T*>(&(c_->derivedBs[ds_->derivedBs.size()-1]))) {
                it_ = nullptr; // THIS DOES ALSO FEEL WRONG
            } else {
                ++it_;
            }
        }
        bool equal(all_iterator const& other) const {
            return this->it_ == static_cast<T*>(other.it_);
        }
        T& dereference() const { return *it_; }
    }; 
```

我使用 nullptr 作为过去的迭代器以及很多演员。我还向我的迭代器传递了一个指向数据结构的指针。

是否有更好的方法来迭代三个包含 Base 类型或从 base 派生的类型的向量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:23:25.997

首先，我们应该注意，如果`bases`为空或调用任何大小的`derivedBs`if ，您的代码具有未定义的行为`end_begin`。

您是否有理由不能`BaseType*`在单个容器中拥有或智能变体的更明显和正常的方法，并使用抽象接口而不是`dynamic_cast`/`static_cast`链来访问它？然后问题就完全消失了。

编辑：如果您出于某种原因需要每种类型的内存是连续的，并且您不`insert`经常将单个 s 放入容器中，只需创建一个`BaseType`指针容器，该容器指向派生对象容器内的每个对象。但我想请你退后一步，回顾一下*为什么*你需要这些对象是连续的（很可能有正当的理由）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:43:26.373

我假设 BaseType 是 DerivedA 和 DerivedB 的公共基础，并且您希望拥有一个包含 DerivedA 和 DerivedB 实例的容器，并让您能够迭代所有 DerivedA 实例、所有 DerivedB 实例以及所有实例BaseType（即 DerivedA 和 DerivedB 的并集）。你可以这样做：

```
class BaseType
{
public:
  virtual void doit() const = 0;

  virtual ~BaseType() { }
};

class DerivedA : public BaseType
{
public:
  void doit() const { std::cout << "DerivedA::doit()" << std::endl; }

  void a() const { std::cout << "DerivedA::a()" << std::endl; }
};

class DerivedB : public BaseType
{
public:
  void doit() const { std::cout << "DerivedB::doit()" << std::endl; }

  void b() const { std::cout << "DerivedB::b()" << std::endl; }
};

class Container
{
public:
  void insert(DerivedA const & a)
  {
    m_as.push_back(a);
    m_base.push_back(&m_as.back());
  }

  void insert(DerivedB const & b)
  {
    m_bs.push_back(b);
    m_base.push_back(&m_bs.back());
  }

  std::vector<DerivedA>::iterator begin_a() { return m_as.begin(); }
  std::vector<DerivedA>::iterator end_a() { return m_as.end(); }
  std::vector<DerivedB>::iterator begin_b() { return m_bs.begin(); }
  std::vector<DerivedB>::iterator end_b() { return m_bs.end(); }
  std::vector<BaseType *>::iterator begin_all() { return m_base.begin(); }
  std::vector<BaseType *>::iterator end_all() { return m_base.end(); }

protected:
private:
  std::vector<DerivedA> m_as;
  std::vector<DerivedB> m_bs;
  std::vector<BaseType *> m_base;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:19:55.267

为了使您的迭代器正确，您必须知道当前正在遍历哪个向量，以便正确比较它。您可以通过枚举告诉您哪个是当前的来做到这一点：

```
void all_iterator::increment()
{
  switch (current_member) {
    case BasesMember:
      ++bases_iter;
      if (bases_iter==bases.end()) {
        current_member = DerivedAsMember;
      }
      return;
    case DerivedAsMember:
      ++derived_as_iter;
      if (derived_as_iter==derivedAs.end()) {
        current_member = DerivedBsMember;
      }
      return;
    case DerivedBsMember:
      ++derived_bs_iter;
      if (derived_bs_iter==derivedBs.end()) {
        current_member = EndMember;
      }
      return;
    case EndMember:
      assert(current_member!=EndMember);
      break;
  }
} 

bool all_iterator::equal(all_iterator const &other) const
{
  if (current_member!=other.current_member) return false;
  switch (current_member) {
    case BasesMember:
      return bases_iter==other.bases_iter;
      break;
    case DerivedAsMember:
      return derived_as_iter==other.derived_as_iter;
      break;
    case DerivedBsMember:
      return derived_bs_iter==other.derived_bs_iter;
      break;
    case EndMember:
      return true
  }
}

Base& all_iterator::dereference() const
{
  switch (current_member) {
    case BasesMember:     return *bases_iter;
    case DerivedAsMember: return *derived_as_iter;
    case DerivedBsMember: return *derived_bs_iter;
    case EndMember:
      assert(current_member!=EndMember);
      break;
  }
  return *bases_iter;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:10:52.720

为什么重要的是什么`derivedAs.end()`？您永远不会通过`derivedAs`. 所以你根本不需要那个假设。

典型的代码是

```
for(auto it = derivedAs.begin(); it != derivedAs.end(); ++it) {
    *it = // do whatever, will never do *derivedAs.end()
} 
```

# git - 为什么 git pull 不恢复我从工作目录中删除的文件？

> ID：11614079
> 
> 赞同：2
> 
> 时间：2012-07-23T14:02:00.730
> 
> 标签：git

我的 git 有问题 我的问题如下，当我拉动时：

```
git pull origin example 
```

直到完美！！，然后我做一个

```
rm -Rf rootdirectory 
```

然后

```
git commit -am "Delete files" 
```

然后我再次拉动，因为我需要这些文件

```
git pull origin example 
```

但它不会再次获得根目录

这是一条消息：

```
Already up-to-date. 
```

我该如何再次使用 git pull 获取文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T14:14:18.433

git pull 没有改变任何东西的原因是您没有从远程存储库中提取**数据，而是在提取****更改**。并且 git 没有任何变化！

Git 不是数据存储。这是一个*版本控制系统*

但是，如果您想*检查*以前的状态，您可以轻松地做到这一点：

```
git checkout HEAD~1 
```

这意味着您正在将工作副本重置为最新提交之前的状态。

但是，如果您想完全删除删除文件的提交，您也可以这样做：

```
git reset --hard HEAD~1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T14:15:11.020

我是否认为您已经习惯了 Subversion，如果您删除文件，然后执行 a `svn update`，文件将被重新填充？我也是。

在 git 中，您必须`git checkout`将文件从 repo 中取出。您也可以使用`git reset --hard`来更新文件，但这样做会清除工作目录中的任何更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T14:31:07.420

这就是 git 的工作方式。在拉取`origin/example`并提交您的更改（“删除文件”）之后，您的本地存储库将领先于`origin/master`该 1 次提交：

```
A---B---C  origin/master
         \
          D  master 
```

`D`你的`Delete files`承诺在哪里。另一个`git pull`给你`Already up-to-date`是因为没有新的提交`origin/master`可以被拉入你的本地仓库。

要“再次获取文件”，您可以撤消上次提交：

```
git checkout HEAD~1 
```

或者您可以*重置*本地存储库以匹配远程存储库：

```
git reset --hard origin/master 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-27T14:43:09.353

转到文件被删除的目录，确保你在你想要的分支上，然后输入“git checkout”。这将带回您在当前分支上删除的文件。

# ms-access - 在 Access 的参数化交叉表查询中使用 IN 语句

> ID：11614080
> 
> 赞同：1
> 
> 时间：2012-07-23T14:02:03.747
> 
> 标签：ms-access, parameters, crosstab

我有一个交叉表查询，它查询一堆位置并获取它们的测量读数。我以测量读数为中心，所以我得到一个表格，其中包含每行上位置/日期组合的所有测量值。这适用于获取所有数据。它也适用于过滤每个字段的一个值。即`WHERE LocationID = ? AND MeasureID = ?`，但我真正需要的是拥有类似`WHERE LocationID IN (?) AND MeasureID IN (?)`where 的东西？是一个数组（或任何可以完成的工作。这可能吗？

在我的表单上，我使用 DAO.QueryDef 对象来构建我的记录集。如果可能的话，我想避免在 VBA 中构建整个查询字符串，主要是因为这个特定的查询很长，我宁愿它存在于视图中而不是代码模块中。话虽如此，我*可以*在 VBA 中构建它，但这不是所需的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:05:51.350

您始终可以使用替换。

```
sSQL = "SELECT lots of sql WHERE LocationID IN (qqlocidqq)"
sSQLWithLoc = Replace (sSQL, "qqlocidqq", "1,2,3,4")

Dim qdf As QueryDef

'A query that exists
Set qdf= CurrentDB.QueryDefs("MyJunkQuery")
'Permanently change the sql of that query
qdf.SQL = sSQLWithLoc 
```

进一步研究一下，它可能适合您使用 Instr，如下所示：

```
SELECT Table1.LocationID
FROM Table1
WHERE InStr([@List],[LocationID])>0 
```

像这样测试：

```
PARAMETERS Number_List Text(50);
TRANSFORM Count(Table1.AKey) AS CountOfAKey
SELECT Table1.AText
FROM Table1
WHERE InStr([Number_List],[ANumber])>0
GROUP BY Table1.AText
PIVOT Table1.ANumber; 
```

其中 Table1 由字段 AKey、AText 和 ANumber 组成。Number_List 是由参数提供的以逗号分隔的数字列表。Instr 检查提供的参数中是否存在来自 Table1 的 ANumber。

重叠 1,2,12 存在问题，但创造性地使用逗号可能适合：

```
WHERE InStr("," & [Number_List] & "," , "," & [ANumber] & ",")>0 
```

当然，分隔符不必是逗号，| 经常有用。

# java - 在 JSP 中将 PDF 上传到数据库和存储系统（文件夹）

> ID：11614085
> 
> 赞同：1
> 
> 时间：2012-07-23T14:02:22.827
> 
> 标签：java, jsp, pdf, servlets, file-upload

就像标题一样，我想问一下，如何将带有上传表单的 pdf 文件添加到我的存储文件夹（例如：uploadData），然后在 JSP 中将其作为文件添加到数据库中。

如果不可能，可以作为文本添加到数据库中。

如果可能作为文件，该pdf的表格是什么类型的？斑点？还是文字？

我接受与我的问题相关的博客链接/其他链接

抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:06:21.953

**Servlet 3.0**容器对多部分数据具有标准支持。它还支持写入本地文件系统。首先，您应该编写一个 HTML 页面，该页面接受文件输入以及其他输入参数。

```
<form action="uploadservlet" method="post" enctype="multipart/form-data">
    <input type="text" name="name" />
    <input type="text" name="age" />
    <input type="file" name="photo" />
    <input type="submit" />
</form> 
```

现在编写一个使用 Servlet 3.0 Upload API 的 UploadServlet。这是演示 API 用法的代码。首先，处理多部分数据的 servlet 应该使用以下两种方法中的任何一种来定义 MultiPartConfig：

*   Servlet 类上的 @MultiPartConfig 注释
*   在 web.xml 中，通过在定义中添加条目。

这是 UploadServlet，

```
@MultipartConfig
public class UploadServlet extends HttpServlet
{
  protected void service(HttpServletRequest request, 
   HttpServletResponse responst) throws ServletException, IOException
  {
  Collection<Part> parts = request.getParts();
  if (parts.size() != 3) {
     //can write error page saying all details are not entered
   }

   Part filePart = httpServletRequest.getPart("photo");
   InputStream imageInputStream = filePart.getInputStream();
   //read imageInputStream
   filePart.write("somefiepath");
   //can also write the photo to local storage

   //Read Name, String Type 
   Part namePart = request.getPart("name");
   if(namePart.getSize() > 20){
       //write name cannot exceed 20 chars
   }
   //use nameInputStream if required        
   InputStream nameInputStream = namePart.getInputStream();
   //name , String type can also obtained using Request parameter 
   String nameParameter = request.getParameter("name");

   //Similialrly can read age properties
   Part agePart = request.getPart("age");
   int ageParameter = Integer.parseInt(request.getParameter("age"));

}

} 
```

**如果您没有使用 Sevlet 3.0 Container**，您应该使用 Apache Commons File Upload。以下是使用 Apache Commons File Upload 的链接：

*   [使用 Apache Commons 文件上传](http://commons.apache.org/fileupload/using.html)
*   [Apache Commons 文件上传示例](http://www.kodejava.org/browse/55.html)

**参考：**

*   [使用 Servlet 3.0 上传文件](http://rameshpvk.blogspot.in/2012/06/fileuplod-using-servlet-30.html)
*   [Servlet 3.0 javax.servlet.http.HttpServletRequest API](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)
*   [Servlet 3.0 javax.servlet.http.Part API](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html)
*   [使用 Servlet 3.0 上传文件](http://srikanthtechnologies.com/blog/java/uploadfile.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:07:13.040

我所知道的处理文件上传的最简单方法是使用[Commons FileUpload](http://commons.apache.org/fileupload/)。该[文档](http://commons.apache.org/fileupload/using.html)为您逐步概述了如何接受上传的文件，包括如何轻松地将它们复制到文件中。

如果您决定将 PDF 放入数据库（我不会这样做），BLOB 是您的最佳选择，PDF 文件不是文本。

但是，我建议*不要*将所有这些逻辑都塞进 JSP 中，而是塞进 servlet 中。

# javascript - jQuery在页面重新加载时淡出

> ID：11614087
> 
> 赞同：2
> 
> 时间：2012-07-23T14:02:30.357
> 
> 标签：javascript, jquery, fadein, fadeout

我想知道是否有人可以帮助我。

下面的脚本摘录使用户能够从链接到 mySQL 数据库的表中删除记录。

```
<script type="text/javascript">
    $(document).ready(function(){
        $('form.delete').submit(function(e){ 

            e.preventDefault();
            var elem = $(this).closest('.delete');
            var lid = $(this).serialize();
            $.confirm({
                 'title'    : 'Delete Confirmation',
            'message'   : 'If you delete this Location, all associated Find records will also be deleted. <br /><br />They cannot be restored at a later time! Do you wish to continue?',
                'buttons'   : {
                    'Yes'   : {
                'class' : 'blue',
                'action': function(){
                //elem.slideUp();
                              $.ajax({ 
                            url: 'deletelocation.php', 
                            type: 'POST', 
                            data: lid, 
                            success: function(response) { 
                            console.log('success', response); 
                                    setTimeout(function() { 
                                    $('body').fadeOut(400, function(){
                                    location.reload();
                                    setTimeout(function(){
                                    $('body').fadeIn(400);
                                     }, 500);
                                     window.scrollTo(x-coord, y-coord);
                                 });
                            }, 2000);
                            }, 
                            error: function() { 
                            console.log('error') 
                            } 
                            }); 
                    }
                },
                'No'    : {
                    'class' : 'gray',
                                        'action': function(){}  // Nothing to do in this case. You can as well omit the action property.

                }
            }
        });

    });

    })
</script> 
```

我可以设法使“删除确认”消息正常工作并实际删除记录，但是在删除发生时添加“淡出”然后在页面重新加载时添加“淡入”有点困难.

我已经阅读了许多帖子，并从这些帖子中提出了以下内容，这些内容已集成到上述内容中：

```
setTimeout(function() { 
$('body').fadeOut(400, function(){
location.reload();
setTimeout(function(){
$('body').fadeIn(400);
}, 500);
window.scrollTo(x-coord, y-coord);
});
}, 2000); 
```

但是这不起作用，我不知道为什么。我只是想知道哪里有人可以看看这个，让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:28:39.303

首先非常感谢您的帮助。然而，我已经意识到我的问题出在哪里。`body`我在页面部分之后有 JavaScript 。我现在已经把它移到了表单之前的脚本开头，它工作正常。亲切的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:12:16.520

location.reload() 之后的脚本没有执行，因为页面正在重新加载。

您可以在您的 url (#reload) 中添加一个标志，并且在页面加载开始时，如果找到该标志，您可以执行 $('body').hide().fadeIn() 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:16:28.513

您不能在 location.reload() 之后设置 javascript 操作。

location.reload() 将重新加载页面，并且在重新加载页面时留在 JS 堆栈中的任何内容都将丢失。

您可能需要将 body fadeIn 作为函数添加到页面本身，也许如果有特定的 url 参数？因此，您无需重新加载页面，而是导航到同一页面，加上指定的查询字符串，例如 ?reload=true，或特定的锚点，例如 #myAnchor

# c# - 不支持 Single() 方法

> ID：11614089
> 
> 赞同：0
> 
> 时间：2012-07-23T14:02:32.057
> 
> 标签：c#, asp.net-mvc-3

我正在 Windows azure 项目中实现表存储。我的代码：

```
 /// //// Method of _Table class 

    public CloudTableQuery<Html> AccessEntites()
    {
        CloudTableQuery<Html> entries =
            (from e in ServiceContext.CreateQuery<Html>(TableName)
             select e).AsTableServiceQuery();

        return entries;
    }
 /// //                          

 /// Controller code

    private _Table db = new _Table("table-name");

    public ViewResult Details(string id)
    {
        Html htmlfile = db.AccessEntites().Single(h => h.RowKey == id); <=========           
        return View(htmlfile);
    }
 ////// 
```

这里的问题是我得到了 Exception `Single method not supported`。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:10:42.503

显然，用于 azure 表存储的 LINQ 提供程序不支持该`Single`方法，即它无法在运行时将其转换为适当的查询。

改用`FirstOrDefault`- [https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#retrieve-single-entity](https://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#retrieve-single-entity)

# objective-c - 如何在iOS中将数字显示为持续时间一小时？

> ID：11614092
> 
> 赞同：2
> 
> 时间：2012-07-23T14:02:35.383
> 
> 标签：objective-c, ios, c, nsstring

有没有办法将一个数字显示为一个小时的持续时间？例如，我有一个 NSTimeInterval 值，其中包含`127`并且我想显示`02:07`.

有什么更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T14:07:12.270

享受！:)

```
NSTimeInterval _timeInterval = 127.f;

NSInteger _hours = _timeInterval / 60;
NSInteger _minutes = (NSInteger)_timeInterval % 60; 

NSLog(@"%02d:%02d", _hours, _minutes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:06:51.183

```
value = (int) othervalue;    
NSString *str = [NSString stringWithFormat:@"%2d:%2d",value/60,value%60]; 
```

*   对`value/60`数字进行整数除法，这会抛出任何 < 0 的值。所以 127 / 60 给你 2。
*   %（模）给出除法的余数：127 % 60 给出 7。

强制转换`int`可防止您从浮点数或双精度值中获取错误（感谢评论holex）。

并`%2d`为您提供 2 位格式（感谢 Rene Jennrich 的其他评论）。

# three.js - 我可以在三个平面上绘制 2D 形状吗？

> ID：11614095
> 
> 赞同：0
> 
> 时间：2012-07-23T14:02:42.297
> 
> 标签：three.js

我想尝试测试一张 3D 地图。最简单的是，一个平面窗格，上面绘制了地图线等，平面的（就像我在 HTML 画布上绘制一样）。但我希望该窗格可以在 3D 空间中移动。

我知道我可以非常简单地在 three.js 中制作一个平面窗格，但是是否可以实现某种“自定义纹理”，让我以编程方式在该窗格上绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:59:44.883

它在 webGL 中称为渲染到纹理。

Three.js 提供了 WebGLRenderTarget 可以用作进一步纹理的图像源。您将场景渲染到 WebGLRenderTarget 而不是主 WebGL 屏幕。然后使用这个 WebGLRenderTarget 作为纹理的图像源。

很多 2D 后处理都是这样工作的。他们将世界渲染为 2D 纹理，然后使用片段着色器来应用每个像素的后处理代码，例如模糊。

例如，参见[http://mrdoob.github.com/three.js/examples/webgl_postprocessing.html](http://mrdoob.github.com/three.js/examples/webgl_postprocessing.html)

它为 2D 后处理渲染场景，但原理是一样的。

这是 WebGLRenderTarget 设置代码：

[https://github.com/mrdoob/three.js/blob/master/examples/js/postprocessing/EffectComposer.js#L14](https://github.com/mrdoob/three.js/blob/master/examples/js/postprocessing/EffectComposer.js#L14)

# entity-framework - 如何为实体框架 5 定制多元化

> ID：11614098
> 
> 赞同：9
> 
> 时间：2012-07-23T14:02:45.770
> 
> 标签：entity-framework, entity-framework-4, poco, entity-framework-5, pluralize

由于我的数据库是使用德语表名和列名设计的，因此实体框架的默认复数功能对我不起作用。

我找到了一些讨论这个问题的资源，但它们似乎都不起作用。

我发现了什么：有 PluralisationService 我可以在其中添加映射：

```
PluralizationService pluralizer =
      PluralizationService.CreateService(CultureInfo.GetCultureInfo("en-us"));
ICustomPluralizationMapping mapping = ps as ICustomPluralizationMapping;
mapping.AddWord("Tabelle", "Tabellen"); 
```

但接下来是什么？我试图：

```
EntityModelSchemaGenerator generator = new EntityModelSchemaGenerator(container);
generator.PluralizationService = pluralizer;
generator.GenerateMetadata(); 
```

并将它们都放入我的 POCO T4 模板中。但它抛出了以下异常：

> EntityContainer 'ContainerName' 不是商店 EntityContainer。参数名称：StoreEntityContainer
> at System.Data.Entity.Design.EntityModelSchemaGenerator.Initialize(...)
> at Microsoft.VisualStudio.TextTemplating...GeneratedTextTransformation.TransformText()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:18:33.063

我也在寻找同样的东西。也许[这](http://visualstudiogallery.msdn.microsoft.com/a0dcf911-8ac1-46d9-84be-e6b999c7141b)会有所帮助。我只是不愿意为这样的基本功能付费。

编辑：

您发布的代码将与[EdmGen2](http://archive.msdn.microsoft.com/EdmGen2)一起使用，它将根据您的班级为您提供 CSDL、SSDL 或 MSL 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:22:57.673

要完全自定义 EF Code First 中的表名，可以使用该`Table`属性显式指定与类关联的表名：

```
[Table("InternalBlogs")]
public class Blog
{
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T06:28:23.333

一个非常古老的问题，但如果有人仍在寻找可能的工作流程/解决方案：

我有一个类似的问题，我想从数据库中自定义模式导入 (CSDL)。解决方案/工作流程如下：

1.  将数据库架构（我使用 Visual Studio Database Project VS 201x）部署到本地数据库
2.  使用 EDMGEN 导入数据库模型以创建 CSDL、SSDL 和 MSDL 文件 [http://msdn.microsoft.com/en-us/library/vstudio/bb387165(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb387165(v=vs.110).aspx)
3.  修改了 EDMGEN2，我对如何使用自定义规则处理复数和命名进行了更改，并创建了 EDMX 文件
4.  运行 T4 模板（根据需要进行额外的自定义）以创建输出。

# c++ - 使用 SOCI 从 PostgreSQL 数据库获取数据时出现错误转换

> ID：11614105
> 
> 赞同：1
> 
> 时间：2012-07-23T14:03:07.033
> 
> 标签：c++, postgresql, postgresql-9.1, soci

我在 PostgreSQL 中有一个数据库。而且我有 sql 查询（顺便说一句，它在 PostgreSQL 中工作得很好，**所以 sql 代码没有错**）：

```
SELECT COUNT(*) as size, creation_date FROM item INNER JOIN raf_item USING (id) INNER JOIN item_detail USING (id) GROUP BY creation_date; 
```

其中创建日期在 PostgreSQL 中定义`creation_date Date;`。查询返回，例如（取决于我的数据库中的内容）：

```
size | creation_date
21   | 12-31-2012
18   | 04-03-2002 
```

我正在使用 SOCI + C++ 从这个查询中获取数据。我的整个 C++ 代码：

```
#include <iostream>
#include <cstdlib>
#include <soci.h>
#include <string>
#include <postgresql/soci-postgresql.h>
using namespace std;

bool connectToDatabase(soci::session &sql, string databaseName, string user, string password)
{
    try
    {
        sql.open(soci::postgresql, "dbname=" +databaseName + " user="+user + " password="+password);
    }
    catch (soci::postgresql_soci_error const & e)
    {
        cerr << "PostgreSQL error: " << e.sqlstate() << " " << e.what() << std::endl;
        return false;
    }
    catch (std::exception const & e)
    {
        cerr << "Some other error: " << e.what() << std::endl;
        return false;
    }
    return true;
}

void getDataFromDatabase(soci::session &sql)
{
    soci::row r;
    sql << "select count(*) as size, creation_date from item inner join raf_item using (id) inner join item_detail using (id) group by creation_date;", soci::into(r);
    for(std::size_t i = 0; i != r.size(); ++i)
    {
        cout << r.get<int>(i);
        tm when = r.get<tm>(i);
        cout << asctime(&when);
    }
}

int main(int argc, char **argv)
{
    soci::session sql;
    bool success = connectToDatabase(sql, "testdb", "testuser", "pass");
    if (success)
    {
        cout << "Connected.\n";
        getDataFromDatabase(sql);
    }

    else
        cout << "Not connected.\n";
    return 0;
} 
```

但是当我尝试运行应用程序时出现此错误（编译很好）：

> 在抛出 'std::bad_cast'
> what() 的实例后调用终止：std::bad_cast 中断（核心转储）

请帮忙，当编译很好时，我真的不知道如何解决这个问题。

**也许问题是 creation_date 是 DATE 并且 tm 也保持时间......？如果是这样，如何解决这个问题？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:55:19.917

虽然您确实解决了您的问题，但您发布的代码更像是一种解决方法，而不是问题的真正解决方案。

您的问题是， COUNT(*) 返回 bigint（或 int8）类型的值，如此处所述[，](http://www.postgresql.org/docs/9.1/static/functions-aggregate.html)而 soci 将 bigint 转换为`long long int`类型，[如此图表](http://soci.sourceforge.net/doc/backends/postgresql.html#support)中所述。如果类型不完全匹配，则会抛出 bad_cast 异常。

因此，您问题中的代码应该是`cout << r.get<long long>(i);`避免 bad_cast 异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:37:42.787

好的，我自己解决了！:)

这是实际工作正常的代码（我只`getDataFromDatabase`在下面使用此代码）：

```
void getDataFromDatabase(soci::session &sql)
{
    long size;
    string date;

    soci::row r;
    sql << "select count(*) as size, creation from item inner join raf_item using (id) inner join item_detail using (id) group by creation;", soci::into(r);
    for(std::size_t i = 0; i != r.size(); ++i)
    {
        const soci::column_properties & props = r.get_properties(i);

    cout << '<' << props.get_name() << '>';

    switch(props.get_data_type())
    {
    case soci::dt_string:
        cout << r.get<std::string>(i);
        break;
    case soci::dt_double:
        cout << r.get<double>(i);
        break;
    case soci::dt_integer:
        cout << r.get<int>(i);
        break;
    case soci::dt_unsigned_long:
        cout << r.get<unsigned long>(i);
        break;
    case soci::dt_long_long:
        cout << r.get<long long>(i);
        size = r.get<long long>(i);
        break;
    case soci::dt_date:
        std::tm when = r.get<std::tm>(i);
        cout << asctime(&when);
        date = asctime(&when);
        break;
    }

    cout << "\n" << size << "\n";
    cout << "\n" << date << "\n";
} 
```

# c++ - gcc std::unordered_map 实现速度慢吗？如果是这样 - 为什么？

> ID：11614106
> 
> 赞同：102
> 
> 时间：2012-07-23T14:03:06.253
> 
> 标签：c++, stl, c++11, hashmap, concurrenthashmap

我们正在用 C++ 开发一个高性能的关键软件。我们需要一个并发哈希映射并实现一个。因此，我们编写了一个基准来确定我们的并发哈希映射与`std::unordered_map`.

但是，`std::unordered_map`似乎非常慢......所以这是我们的微基准（对于并发映射，我们产生了一个新线程以确保锁定不会被优化，并注意我从不插入 0，因为我也用`google::dense_hash_map`,需要一个空值）：

```
boost::random::mt19937 rng;
boost::random::uniform_int_distribution<> dist(std::numeric_limits<uint64_t>::min(), std::numeric_limits<uint64_t>::max());
std::vector<uint64_t> vec(SIZE);
for (int i = 0; i < SIZE; ++i) {
    uint64_t val = 0;
    while (val == 0) {
        val = dist(rng);
    }
    vec[i] = val;
}
std::unordered_map<int, long double> map;
auto begin = std::chrono::high_resolution_clock::now();
for (int i = 0; i < SIZE; ++i) {
    map[vec[i]] = 0.0;
}
auto end = std::chrono::high_resolution_clock::now();
auto elapsed = std::chrono::duration_cast<std::chrono::milliseconds>(end - begin);
std::cout << "inserts: " << elapsed.count() << std::endl;
std::random_shuffle(vec.begin(), vec.end());
begin = std::chrono::high_resolution_clock::now();
long double val;
for (int i = 0; i < SIZE; ++i) {
    val = map[vec[i]];
}
end = std::chrono::high_resolution_clock::now();
elapsed = std::chrono::duration_cast<std::chrono::milliseconds>(end - begin);
std::cout << "get: " << elapsed.count() << std::endl; 
```

（编辑：整个源代码可以在这里找到：http: [//pastebin.com/vPqf7eya](http://pastebin.com/vPqf7eya)）

结果`std::unordered_map`是：

```
inserts: 35126
get    : 2959 
```

对于`google::dense_map`：

```
inserts: 3653
get    : 816 
```

对于我们手动支持的并发映射（它会锁定，尽管基准是单线程的 - 但在单独的生成线程中）：

```
inserts: 5213
get    : 2594 
```

如果我在没有 pthread 支持的情况下编译基准程序并在主线程中运行所有内容，我会为我们的手动支持并发映射得到以下结果：

```
inserts: 4441
get    : 1180 
```

我使用以下命令进行编译：

```
g++-4.7 -O3 -DNDEBUG -I/tmp/benchmap/sparsehash-2.0.2/src/ -std=c++11 -pthread main.cc 
```

因此，特别是插入`std::unordered_map`似乎非常昂贵 - 35 秒与其他地图的 3-5 秒。查找时间似乎也很长。

我的问题：为什么会这样？我在stackoverflow上阅读了另一个问题，有人问，为什么`std::tr1::unordered_map`比他自己的实现慢。有最高评价的答案状态，`std::tr1::unordered_map`需要实现更复杂的接口。但是我看不到这个论点：我们在 concurrent_map 中`std::unordered_map`使用存储桶方法，也使用存储桶方法（`google::dense_hash_map`没有，但至少`std::unordered_map`应该比我们手动支持的并发安全版本一样快？）。除此之外，我在界面中看不到任何强制使哈希映射表现不佳的功能...

所以我的问题是：`std::unordered_map`看起来很慢是真的吗？如果不是：有什么问题？如果是：那是什么原因。

而我的主要问题是：为什么将一个值插入到`std::unordered_map`如此可怕的代价中（即使我们一开始就保留了足够的空间，它的性能也不会好很多——所以重新散列似乎不是问题）？

# 编辑：

首先：是的，提供的基准并不是完美无缺的——这是因为我们用它玩了很多，它只是一个 hack（例如`uint64`，生成整数的分布实际上不是一个好主意，在循环中排除 0有点愚蠢等等......）。

目前大多数评论都解释说，我可以通过为 unordered_map 预先分配足够的空间来使其更快。在我们的应用程序中这是不可能的：我们正在开发一个数据库管理系统，并且需要一个哈希映射来存储事务期间的一些数据（例如锁定信息）。因此，此映射可以是从 1（用户只需进行一次插入和提交）到数十亿个条目（如果发生全表扫描）的所有内容。在这里预先分配足够的空间是不可能的（刚开始分配很多会消耗太多的内存）。

此外，我很抱歉，我没有足够清楚地说明我的问题：我对快速制作 unordered_map 并不感兴趣（使用谷歌的密集哈希图对我们来说很好），我只是不明白这种巨大的性能差异来自哪里. 它不能只是预分配（即使有足够的预分配内存，密集映射比 unordered_map 快一个数量级，我们的手动支持并发映射从大小为 64 的数组开始 - 所以比 unordered_map 小）。

那么造成这种不良表现的原因是`std::unordered_map`什么呢？或者换一种方式问：是否可以编写一个`std::unordered_map`符合标准并且（几乎）与谷歌密集哈希图一样快的接口实现？或者标准中是否有一些东西强制实施者选择一种低效的方式来实施它？

# 编辑2：

通过分析，我看到大量时间用于整数除法。`std::unordered_map`使用素数作为数组大小，而其他实现使用 2 的幂。为什么要`std::unordered_map`使用素数？如果散列不好，性能更好？对于良好的哈希值，恕我直言没有任何区别。

# 编辑 3：

这些是 的数字`std::map`：

```
inserts: 16462
get    : 16978 
```

Sooooooo：为什么插入`std::map`比插入更快`std::unordered_map`...我的意思是WAT？`std::map`具有更差的局部性（树 vs 数组），需要进行更多分配（每次插入 vs 每次重新哈希 + 每次冲突加上 ~1），最重要的是：具有另一个算法复杂性（O（logn） vs O（1））！

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-24T15:54:16.847

找到原因了：是gcc-4.7的问题！！

使用**gcc-4.7**

```
inserts: 37728
get    : 2985 
```

使用**gcc-4.6**

```
inserts: 2531
get    : 1565 
```

所以`std::unordered_map`在 gcc-4.7 中被破坏（或者我的安装，这是在 Ubuntu 上安装 gcc-4.7.0 - 另一个安装是在 debian 测试中安装 gcc 4.7.1）。

我将提交一个错误报告.. 在那之前：不要`std::unordered_map`与 gcc 4.7 一起使用！

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-23T15:12:44.340

`unordered_map`正如 Ylisar 所建议的那样，我猜你的. 当链在 中增长太长时`unordered_map`，g++ 实现会自动重新散列到更大的哈希表，这将对性能造成很大的拖累。如果我没记错的话，`unordered_map`默认为 (smallest prime greater than) `100`。

我的系统上没有`chrono`，所以我用`times()`.

```
template <typename TEST>
void time_test (TEST t, const char *m) {
    struct tms start;
    struct tms finish;
    long ticks_per_second;

    times(&start);
    t();
    times(&finish);
    ticks_per_second = sysconf(_SC_CLK_TCK);
    std::cout << "elapsed: "
              << ((finish.tms_utime - start.tms_utime
                   + finish.tms_stime - start.tms_stime)
                  / (1.0 * ticks_per_second))
              << " " << m << std::endl;
} 
```

我使用了`SIZE`of `10000000`，并且不得不为我的`boost`. 另请注意，我预先设置了哈希表的大小以匹配`SIZE/DEPTH`，其中`DEPTH`是由于哈希冲突导致的桶链长度的估计。

**编辑：**霍华德在评论中向我指出，最大负载系数`unordered_map`为`1`. 因此，`DEPTH`控制代码将重新散列多少次。

```
#define SIZE 10000000
#define DEPTH 3
std::vector<uint64_t> vec(SIZE);
boost::mt19937 rng;
boost::uniform_int<uint64_t> dist(std::numeric_limits<uint64_t>::min(),
                                  std::numeric_limits<uint64_t>::max());
std::unordered_map<int, long double> map(SIZE/DEPTH);

void
test_insert () {
    for (int i = 0; i < SIZE; ++i) {
        map[vec[i]] = 0.0;
    }
}

void
test_get () {
    long double val;
    for (int i = 0; i < SIZE; ++i) {
        val = map[vec[i]];
    }
}

int main () {
    for (int i = 0; i < SIZE; ++i) {
        uint64_t val = 0;
        while (val == 0) {
            val = dist(rng);
        }
        vec[i] = val;
    }
    time_test(test_insert, "inserts");
    std::random_shuffle(vec.begin(), vec.end());
    time_test(test_insert, "get");
} 
```

**编辑：**

我修改了代码，以便`DEPTH`更轻松地进行更改。

```
#ifndef DEPTH
#define DEPTH 10000000
#endif 
```

因此，默认情况下，会选择哈希表的最差大小。

```
elapsed: 7.12 inserts, elapsed: 2.32 get, -DDEPTH=10000000
elapsed: 6.99 inserts, elapsed: 2.58 get, -DDEPTH=1000000
elapsed: 8.94 inserts, elapsed: 2.18 get, -DDEPTH=100000
elapsed: 5.23 inserts, elapsed: 2.41 get, -DDEPTH=10000
elapsed: 5.35 inserts, elapsed: 2.55 get, -DDEPTH=1000
elapsed: 6.29 inserts, elapsed: 2.05 get, -DDEPTH=100
elapsed: 6.76 inserts, elapsed: 2.03 get, -DDEPTH=10
elapsed: 2.86 inserts, elapsed: 2.29 get, -DDEPTH=1 
```

我的结论是，对于任何初始哈希表大小，除了使其等于整个预期的唯一插入数之外，没有太大的性能差异。此外，我没有看到您观察到的数量级性能差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T22:54:41.150

我使用**64 位 / AMD / 4 核 (2.1GHz) 计算机**运行了您的代码，它给了我以下结果：

**MinGW-W64 4.9.2：**

使用**std::unordered_map：**

```
inserts: 9280 
get: 3302 
```

使用**std::map：**

```
inserts: 23946
get: 24824 
```

**VC 2015 带有我知道的所有优化标志：**

使用**std::unordered_map：**

```
inserts: 7289
get: 1908 
```

使用**std::map：**

```
inserts: 19222 
get: 19711 
```

我没有使用 GCC 测试过代码，但我认为它可能与 VC 的性能相当，所以如果这是真的，那么 GCC 4.9 **std::unordered_map**它仍然是坏的。

**[编辑]**

所以是的，正如有人在评论中所说，没有理由认为 GCC 4.9.x 的性能可以与 VC 性能相媲美。当我进行更改时，我将在 GCC 上测试代码。

我的答案只是为其他答案建立某种知识库。

# android - 确定是新安装还是更新

> ID：11614109
> 
> 赞同：0
> 
> 时间：2012-07-23T14:03:18.063
> 
> 标签：android

这是一个艰难的问题：假设某个应用程序中包含一个 SDK。这个应用程序在市场上已经有很长一段时间了，但是从最新版本开始就集成了 SDK。因此，客户可以通过两种方式访问​​包含 SDK 的应用程序：

1.  此人之前没有该应用程序并下载最新版本
2.  该人已经在没有 SDK 的旧版本中安装了应用程序，并使用 SDK 更新到新版本

现在当应用程序第一次打开时，SDK 如何判断应用程序是安装还是更新？

我想到了一些事情，但没有成功：

*   人们可以搜索在安装应用程序时创建的文件，并且从那时起从未更改过。只需查看上次修改的字段，您就知道应用程序的安装时间。我在 data/data/ 中找到了 lib 文件，但每次更新应用程序时它都会更新，所以没有用。编辑：导入文件从未被更改过的原因是无法访问文件创建时间，因此我们必须确保 last-modified == 创建时间

*   sdk 应该与 Android 1.6 兼容，因此它是 < API 9，我无法访问 PackageInfo.firstInstallTime 字段。

*   我认为我无法访问数据/应用程序来查看 apk 本身，但即使我可以，每次更新应用程序时都会替换 apk，所以 last-modified 会给我上次更新的时间，不是安装。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:28:30.177

我想到了几件事：

在共享首选项中存储版本号。调用它第一次安装，如果没有设置值，则设置当前版本号（这只会在第一次安装时发生，可能在 Application 类中）。稍后您可以检查首选项并将其与当前版本进行比较。更新时，您仍将拥有第一个版本代码并将其与当前版本代码进行比较，因为您需要在发布应用更新时增加版本代码。

如果 SDCard 不存在，则在 SDCard 上创建一个文件（最好在 mnt/sdcard/Android/data/com.my.package.name/ 中）。用版本代码或其他东西命名它。然后，您将获得版本代码和创建的时间，以备不时之需。该文件夹的好处是它在更新您的应用程序时仍然存在，但在卸载它时会被删除（缺点：我认为该功能可从 API 级别 8 及更高级别获得，您必须检查）

与文件相同，但在手机内存上的 data/data/com.package.name 文件夹中（数据库也保存在那里，您的应用程序是唯一可以访问它的应用程序 - 除非 root）更新时卸载并保留。

使用数据库助手将版本代码和时间戳存储在里面。DB 助手有一种跟踪数据库版本的方法。

# html - IE7 - 修复单元格有填充时的列宽问题

> ID：11614110
> 
> 赞同：1
> 
> 时间：2012-07-23T14:03:19.503
> 
> 标签：html, css, browser, internet-explorer-7, html4

我在使用固定布局和固定列大小的 IE7 和表格时遇到了一些问题。大多数浏览器使用列宽来设置单元格的大小，包括填充但 IE7 似乎将其设置为不包括填充，因此存在悬垂。

我已经搜索，搜索并再次搜索解决方案，但除了将“box-sizing:border-box”应用于其他所有内容之外，我找不到任何像样的东西，这是不可能的。删除“table-layout：fixed”也可以，但太多其他代码依赖于此。

如何获得跨浏览器的一致性？

```
<!-- DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd" -->
<html>
  <head>
    <style type="text/css">
      div {
        width: 200px;
        height: 10px;
        background-color: blue;
      }
      table {
        width: 200px;
        border-collapse: collapse;
        table-layout: fixed;
      }
      .first {
        width: 50px;
        background-color: green;
      }
      .second {
        width: 150px;
        background-color: red;
      }
      .alt {
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div></div>
    <table>
      <colgroup>
        <col class="first" />
        <col class="second" />
      </colgroup>
      <tr>
        <td>Foo</td>
        <td class="alt">bar</td>
      </tr>
    </table>
  </body>
</html> 
```

类似的问题：[<col> 宽度和填充 - IE7](https://stackoverflow.com/questions/7641872/col-width-and-padding-ie7)

IE7 不锈钢 ![IE7截图](../Images/85ec26f285ed2fb1f46db641a3d112b4.png)

IE9 不锈钢 ![IE9 不锈钢](../Images/bb44c465d574fce18ce35694e965c6ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:53:29.280

IE 不支持表格填充。您需要将焊盘应用于表格数据单元格。

# java - 将类文件作为与 java 代码分开的进程运行

> ID：11614112
> 
> 赞同：1
> 
> 时间：2012-07-23T14:03:21.890
> 
> 标签：java, class, process, runtime.exec

```
public static void main(String args[]) throws IOException
{
    Process p = Runtime.getRuntime().exec("java E:/workspace/JNIProgram/src/JNIProgram.class");
} 
```

所以我有这段代码，我正在尝试运行 JNIProgram.class 文件，但是程序在没有完成它的工作的情况下立即终止（即创建一个新的 txt 文件并写入它）

所以我做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:06:19.580

该`java`命令需要 Java**类名**，而不是文件名。

所以命令`java E:/workspace/JNIProgram/src/JNIProgram.class`是错误的。如果您从命令提示符窗口手动尝试此操作，您将收到一条错误消息。

命令应该是这样的：

```
java -cp E:\workspace\JNIProgram\src JNIProgram 
```

注意：`-cp`选项之后是类路径，之后是完全限定的类名（`JNIProgram`如果类不在包中，则为 ）。

首先确保您可以从命令行手动运行该命令，然后再使其从另一个 Java 程序运行。

# javascript - javascript动态原型

> ID：11614113
> 
> 赞同：3
> 
> 时间：2012-07-23T14:03:24.850
> 
> 标签：javascript

我想在创建其他传递参数的对象时扩展一个新的 JS 对象。这段代码不起作用，因为我只能扩展没有动态参数的对象。

```
otherObject = function(id1){
    this.id = id1;
};

otherObject.prototype.test =function(){
    alert(this.id);
};

testObject = function(id2) {
    this.id=id2;
};

testObject.prototype = new otherObject("id2");/* id2 should be testObject this.id */

var a = new testObject("variable");
a.test(); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:10:24.577

除了明显的语法错误之外，正确的 JavaScript 继承方式是这样的：

```
// constructors are named uppercase by convention
function OtherObject(id1) {
    this.id = id1;
};
OtherObject.prototype.test = function() {
    alert(this.id);
};

function TestObject(id2) {
    // call "super" constructor on this object:
    OtherObject.call(this, id2);
};
// create a prototype object inheriting from the other one
TestObject.prototype = Object.create(OtherObject.prototype);
// if you want them to be equal (share all methods), you can simply use
TestObject.prototype = OtherObject.prototype;

var a = new TestObject("variable");
a.test(); // alerts "variable" 
```

你会在网上找到很多关于这个的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:11:37.597

```
testObject = function(id2) {
    otherObject.call(this, id2); // run the parent object constructor with id2 parameter
    this.id=id2;
};

testObject.prototype = new otherObject(); // no id2 parameter here, it doesn't make sense 
```

请注意，在创建 的实例时，会调用`testObject`的构造函数两次——一次用于创建原型，一次用于初始化对象。`otherObject`

为了防止重复初始化，我们可以在仅使用它来创建原型时立即停止构造函数。

```
otherObject = function(id1){
    if (typeof id1 == 'undefined') {
        /* as there is no parameter, this must be the call used to create
         * the prototype. No initialisation needed here, we'll just return.
         */
        return;
    }
    this.id = id1;
}; 
```

PS 请使用大写的驼峰箱来装物品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:06:20.243

我不明白你到底想要什么，但是

```
otherObject.prototype.test = function () { 
    alert(this.id); 
}; 
```

会是正确的。

和这个

testObject.prototype = new otherObject(id2);

除非之前设置了 id2，否则将无法正常工作。

尝试以下

```
 var OtherObject = function () {
   }
   OtherObject.prototype.test = function () {
       alert (this.id);
   }

   var TestObject = function (id) {
       this.id = id;
   }
   TestObject.prototype = new OtherObject ();

   var a = new TestObject("variable");
   a.test (); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:06:46.273

修复了你的代码

```
otherObject = function(id1){
    this.id = id1;
};

otherObject.prototype.test =function(){
    alert(this.id);
};

testObject = function(id2) {
    this.id=id2;
};

testObject.prototype = new otherObject("id2");/* id2 should be testObject this.id */

var a = new testObject("variable");
a.test(); 
```

# cocoa - 在核心数据中，MOC 中是否只有一个托管对象？

> ID：11614114
> 
> 赞同：1
> 
> 时间：2012-07-23T14:03:24.853
> 
> 标签：cocoa, core-data, nsmanagedobject, nsmanagedobjectcontext

这是一个基本的核心数据问题：**在核心数据中，MOC 中是否只有一个托管对象？**

该文档包含一个漂亮的图形，[here](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650-207483-BCIEHJBA)，不幸的是，这让我感到困惑（进一步）。在 中`NSManagedObjectContext`，似乎有多个对象（Employees 和 Departments），并且每个对象都有多个实例（“Jo”、“Sales”等）。然而，在关于“托管对象”的部分中，[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html)说：“*在给定的上下文中，对于持久存储中的给定记录，只能有一个对应的托管对象*”。

有人可以解释托管对象、托管对象上下文和数据记录之间的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:21:38.967

一个托管对象上下文中可以有多个托管对象。您可以将托管对象上下文想象为事务。

文本的第二位是说每个托管对象都映射到持久存储（磁盘表示）中的单个记录。所以你可以有多个托管对象上下文，每个都有一个托管对象上下文的副本，但它们都会映射到磁盘上的同一记录。

# python - python bottle framework - 如何将字典传递给嵌套模板？

> ID：11614116
> 
> 赞同：2
> 
> 时间：2012-07-23T14:03:36.320
> 
> 标签：python, templates, bottle

我正在使用python的瓶子框架来开发一个简单的网页。我无法理解如何将字典传递给子模板。示例代码：

神话：

```
{
message: "Hello World",
...other template vars ... 
} 
```

路由器.py

```
@route('/index.html')
@view('index.tpl')
def index():
    return mydictionary 
```

意见/index.tpl

```
<body>
%include subpage1 ......  <-- need to pass mydictionary here
...other stuff ...
</body> 
```

视图/subpage1.tpl

```
<div>This is a test: {{message}}</div> 
```

[文档页面](http://bottlepy.org/docs/dev/stpl.html)指出：

> *%include 语句：您可以使用 %include sub_template [kwargs] 语句包含其他模板。sub_template 参数指定要包含的模板的名称或路径。该行的其余部分被解释为一个逗号分隔的 key=statement 对列表，类似于函数调用中的关键字参数。它们被传递给子模板，类似于 SimpleTemplate.render() 调用。也允许传递 dict 的 **kwargs 语法*：

但是，没有给出如何将带有此 **kwargs 的字典传递给子模板的示例。有人做过吗？如果我只是说 %include subpage1 mydictionary，bottle 会抱怨 mydictionary 未定义（即使 mydictionary 是全局字典 [在 Router.py 中定义]）。

问候GA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:21:38.657

我通过在模板文件中执行以下操作解决了这个问题：

意见/index.tpl

```
<body>
%from mydictfile import * <-- importing mydict here
%include subpage1 mydict  
...other stuff ...
</body> 
```

我的字典文件：

```
mydict = {
message: "Hello World",
...other template vars ... 
} 
```

这似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:07:16.263

您需要关键字参数。尝试：

```
%include subpage1 mydict=mydict ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T00:53:54.283

作为@GA's [answer](https://stackoverflow.com/a/11624600)的变体，我访问了模板中主程序中定义的变量：

```
% from __main__ import app
blah blah {{app.config.my_config}} blah 
```

编辑：在 Python 2.6 下我不得不使用（从 mybottleapp.py 导入）：

```
% from mybottleapp import app 
```

我还不够 Python 专家来理解为什么会这样。

# jquery - jQuery在屏幕上滚动动画div并返回

> ID：11614119
> 
> 赞同：2
> 
> 时间：2012-07-23T14:03:42.853
> 
> 标签：jquery, scroll, jquery-animate

我正在尝试重新创建我在另一个网站 Ben the Bodyguard 上看到的东西，我只是想知道它是如何完成的，我知道这是某种循环，但我不确定如何去做。

基本上，这是火车穿过屏幕的部分。

[http://benthebodyguard.com/index.php](http://benthebodyguard.com/index.php)

如果你看看我做了什么，它只是到了某个点然后又回来了，我怎么能得到它让它沿着屏幕走然后又回来..？

[http://jsfiddle.net/VWqyw/2/](http://jsfiddle.net/VWqyw/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:33:02.757

你可以这样做：

[http://jsfiddle.net/pGvgc/2/](http://jsfiddle.net/pGvgc/2/)

```
$(document).ready(function(){

    var windowWidth = $(window).width();    
    $("#block").css({ "left": windowWidth}); 

    $(window).scroll(function(){       
        $("#block").css({ "left":  windowWidth  - $(window).scrollTop()});
    });
});​ 
```

基本上只是使用垂直滚动位置来调整块的水平位置。

顺便说一句，如果您计划在页面上制作大量动画，则可能值得考虑使用像[KineticJS](http://www.kineticjs.com/)这样的 javascript 库，这样的东西可以让您相对轻松地做一些很棒的事情......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:33:15.790

我相信你正在寻找这样的东西：

```
$(document).ready(function(){

    $(window).scroll(function(){
        if($(window).scrollTop() > 480 && $(window).scrollTop() < 900){
             $("#block").css({ "left": $(window).scrollTop() - 480 });
        };      
    });
});​ 
```

这将元素相对于页面的滚动位置定位在给定范围内

# python - 来自字符串和for循环的python列表

> ID：11614120
> 
> 赞同：0
> 
> 时间：2012-07-23T14:03:52.693
> 
> 标签：python, list, for-loop

有没有一种方法可以同时使用字符串和生成器（for 循环）来创建列表。

list() 只接受一个参数。到目前为止，我能看到的唯一方法是：

```
row = ['string1','string2']+list((t.string3[-7:]) for t in tobject) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:07:02.567

您只需要在一行中完成吗？`chain()`有效，但对我来说看起来如此难以理解。以下可能不太优雅，但我认为它更具可读性：

```
row = ['string1', 'string2']
row.extend(t.string3[-7:] for t in tobject) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:05:45.617

```
import itertools
list(itertools.chain(('string1','string2'), (t.string3[-7:] for t in tobject))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:06:33.273

不，您必须连接两个列表。

您可能更喜欢[`chain`](http://docs.python.org/library/itertools.html#itertools.chain)可迭代对象，然后调用`list`它们一次。

# iphone - iOS 中不同项目的应用程序的 DataModel 合并

> ID：11614123
> 
> 赞同：0
> 
> 时间：2012-07-23T14:04:04.613
> 
> 标签：iphone, ios, core-data, xcdatamodel

客户在 appstore 上有 iPhone 应用程序。这个应用程序的第二个版本是从一开始就开发的。应用程序具有完全不同的数据模型，当我们尝试使用新版本更新应用程序时，它会在使用核心数据时崩溃。在正常情况下我会合并模型，但是如果我的项目中没有源模型该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:24:56.373

如果您的新模型完全改变了，我会说只留下旧模型并开始使用新模型。

只要您不使用旧模型，就不必合并，并且新模型不能使用相同的名称。

# c# - 如果检查了所有子节点，则检查父节点 C# asp.net

> ID：11614126
> 
> 赞同：3
> 
> 时间：2012-07-23T14:04:22.600
> 
> 标签：c#, asp.net, treeview

我有一个从 asp.net 树视图控件继承的自定义树视图。具有第 n 级父子关系。根据一些计算，我检查了子节点。如果检查了所有子节点，我希望应该检查父节点。因为我正在根据一些计算检查子节点，所以我不能在检查事件后使用。有人可以为我提供 C# 代码吗？

```
 private TreeNode _parentNode;
private void CheckedParent(TreeNodeCollection nodeCollection)
        {
            foreach (TreeNode node in nodeCollection)
            {
                if (node.ChildNodes.Count > 0)
                {
                    _parentNode = node;
                    CheckedParent(node.ChildNodes);
                }
                else
                {
                    bool allChildChecked = true
                    foreach (TreeNode childNode in nodeCollection)
                    {
                        if (!childNode.Checked)
                        {
                            allChildChecked = false;
                        }
                    }

                }
            }
            if (allChildChecked )
            {
                _parentNode.Checked = true;
                _isAllChildChecked = false;
            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:00:35.133

This method will return `true` if all child nodes are checked; otherwise it will return `false`

```
 private bool AllChildChecked(TreeNode currentNode)
    {
        bool res = true;

        foreach (TreeNode node in currentNode.ChildNodes)
        {
            res = node.Checked;
            if (!res) break;

            res = this.AllChildChecked(node);
            if (!res) break;
        }

        return res;
    } 
```

# sharepoint - 我认为我的 xslt 格式可能不正确

> ID：11614131
> 
> 赞同：0
> 
> 时间：2012-07-23T14:04:32.540
> 
> 标签：sharepoint, xslt, search, sharepoint-2010

我正在尝试更改 searchResult.aspx 页面上“链接到文档”的图标。我在结果的 xslt 中添加了以下内容，但结果 webpart 永远不会呈现，这意味着代码已损坏。我尝试关注 SP2007 文章（http://msdn.microsoft.com/en-us/library/cc789805(v=office.12).aspx），但我的环境是 SP 2010。请提出建议。

```
<div class="srch-Icon" id="{concat($currentId,'_Icon')}"> 
<xsl:if test="contenttype='LegalLinkedDocument'">  
    <img align="absmiddle" src="_layouts/images/legalLinkedIcon.gif" border="0" alt="{imageurl/@imageurldescription}" />
</xsl:if>
    <img align="absmiddle" src="{imageurl}" border="0" alt="{imageurl/@imageurldescription}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:14:30.360

我相信有一个错误会阻止使用 ContentType 元数据属性（请参阅[http://social.msdn.microsoft.com/Forums/en/sharepoint2010general/thread/cd059e1c-7af6-454c-8568-a22e7755ce8c](http://social.msdn.microsoft.com/Forums/en/sharepoint2010general/thread/cd059e1c-7af6-454c-8568-a22e7755ce8c)）

您需要创建一个新的托管元数据属性并将其映射到 ows_ContentType 已爬网属性（我称为我的 CType），然后进行完全爬网（您可能需要先删除索引）以使该属性在搜索索引中可用。

然后编辑搜索核心结果 web 部件并添加

```
 <Column Name="CType"/> 
```

到 Fetched Properties（在 Display Properties 下）之后`<columns>`

然后将您的 xml 更新为以下内容

```
<xsl:choose>
    <xsl:when test="ctype = 'LegalLinkedDocument'">
        <img align="absmiddle" src="_layouts/images/LegalLinkedDocument.gif" border="0" alt="{imageurl/@imageurldescription}" />
    </xsl:when> 
    <xsl:otherwise>
        <img align="absmiddle" src="{imageurl}" border="0" alt="{imageurl/@imageurldescription}" />
    </xsl:otherwise>
</xsl:choose> 
```

# java - 如何通过单击列标题对表格进行排序？

> ID：11614137
> 
> 赞同：1
> 
> 时间：2012-07-23T14:05:11.913
> 
> 标签：java, jsp, sorting

我是开发环境的新手。我正在`Struts`为我的项目使用框架。在这里，我查询`DataBase`并将结果表存储在`ArrayList`. 我`Arraylist`在`JSP`. 现在我需要通过单击表格列标题进行排序。排序应该在服务器端完成。我必须为此做些什么？（希望你给我一个好的答案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:17:39.857

您的列标题需要是一个链接，该链接映射到一个操作，该列作为 url 参数排序，排序方向作为另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T11:48:52.310

As @Thor84no said : You can use `JavaScript`

[http://www.brainjar.com/dhtml/tablesort/demo.html](http://www.brainjar.com/dhtml/tablesort/demo.html)

View Source code of that page.

```
<script type="text/javascript">//<![CDATA[

//-----------------------------------------------------------------------------
// sortTable(id, col, rev)
//
//  id  - ID of the TABLE, TBODY, THEAD or TFOOT element to be sorted.
//  col - Index of the column to sort, 0 = first column, 1 = second column,
//        etc.
//  rev - If true, the column is sorted in reverse (descending) order
//        initially.
//
// Note: the team name column (index 1) is used as a secondary sort column and
// always sorted in ascending order.
//-----------------------------------------------------------------------------

function sortTable(id, col, rev) {

  // Get the table or table section to sort.
  var tblEl = document.getElementById(id);

  // The first time this function is called for a given table, set up an
  // array of reverse sort flags.
  if (tblEl.reverseSort == null) {
    tblEl.reverseSort = new Array();
    // Also, assume the team name column is initially sorted.
    tblEl.lastColumn = 1;
  }

  // If this column has not been sorted before, set the initial sort direction.
  if (tblEl.reverseSort[col] == null)
    tblEl.reverseSort[col] = rev;

  // If this column was the last one sorted, reverse its sort direction.
  if (col == tblEl.lastColumn)
    tblEl.reverseSort[col] = !tblEl.reverseSort[col];

  // Remember this column as the last one sorted.
  tblEl.lastColumn = col;

  // Set the table display style to "none" - necessary for Netscape 6 
  // browsers.
  var oldDsply = tblEl.style.display;
  tblEl.style.display = "none";

  // Sort the rows based on the content of the specified column using a
  // selection sort.

  var tmpEl;
  var i, j;
  var minVal, minIdx;
  var testVal;
  var cmp;

  for (i = 0; i < tblEl.rows.length - 1; i++) {

    // Assume the current row has the minimum value.
    minIdx = i;
    minVal = getTextValue(tblEl.rows[i].cells[col]);

    // Search the rows that follow the current one for a smaller value.
    for (j = i + 1; j < tblEl.rows.length; j++) {
      testVal = getTextValue(tblEl.rows[j].cells[col]);
      cmp = compareValues(minVal, testVal);
      // Negate the comparison result if the reverse sort flag is set.
      if (tblEl.reverseSort[col])
        cmp = -cmp;
      // Sort by the second column (team name) if those values are equal.
      if (cmp == 0 && col != 1)
        cmp = compareValues(getTextValue(tblEl.rows[minIdx].cells[1]),
                            getTextValue(tblEl.rows[j].cells[1]));
      // If this row has a smaller value than the current minimum, remember its
      // position and update the current minimum value.
      if (cmp > 0) {
        minIdx = j;
        minVal = testVal;
      }
    }

    // By now, we have the row with the smallest value. Remove it from the
    // table and insert it before the current row.
    if (minIdx > i) {
      tmpEl = tblEl.removeChild(tblEl.rows[minIdx]);
      tblEl.insertBefore(tmpEl, tblEl.rows[i]);
    }
  }

  // Make it look pretty.
  makePretty(tblEl, col);

  // Set team rankings.
  setRanks(tblEl, col, rev);

  // Restore the table's display style.
  tblEl.style.display = oldDsply;

  return false;
}

//-----------------------------------------------------------------------------
// Functions to get and compare values during a sort.
//-----------------------------------------------------------------------------

// This code is necessary for browsers that don't reflect the DOM constants
// (like IE).
if (document.ELEMENT_NODE == null) {
  document.ELEMENT_NODE = 1;
  document.TEXT_NODE = 3;
}

function getTextValue(el) {

  var i;
  var s;

  // Find and concatenate the values of all text nodes contained within the
  // element.
  s = "";
  for (i = 0; i < el.childNodes.length; i++)
    if (el.childNodes[i].nodeType == document.TEXT_NODE)
      s += el.childNodes[i].nodeValue;
    else if (el.childNodes[i].nodeType == document.ELEMENT_NODE &&
             el.childNodes[i].tagName == "BR")
      s += " ";
    else
      // Use recursion to get text within sub-elements.
      s += getTextValue(el.childNodes[i]);

  return normalizeString(s);
}

function compareValues(v1, v2) {

  var f1, f2;

  // If the values are numeric, convert them to floats.

  f1 = parseFloat(v1);
  f2 = parseFloat(v2);
  if (!isNaN(f1) && !isNaN(f2)) {
    v1 = f1;
    v2 = f2;
  }

  // Compare the two values.
  if (v1 == v2)
    return 0;
  if (v1 > v2)
    return 1
  return -1;
}

// Regular expressions for normalizing white space.
var whtSpEnds = new RegExp("^\\s*|\\s*$", "g");
var whtSpMult = new RegExp("\\s\\s+", "g");

function normalizeString(s) {

  s = s.replace(whtSpMult, " ");  // Collapse any multiple whites space.
  s = s.replace(whtSpEnds, "");   // Remove leading or trailing white space.

  return s;
}

//-----------------------------------------------------------------------------
// Functions to update the table appearance after a sort.
//-----------------------------------------------------------------------------

// Style class names.
var rowClsNm = "alternateRow";
var colClsNm = "sortedColumn";

// Regular expressions for setting class names.
var rowTest = new RegExp(rowClsNm, "gi");
var colTest = new RegExp(colClsNm, "gi");

function makePretty(tblEl, col) {

  var i, j;
  var rowEl, cellEl;

  // Set style classes on each row to alternate their appearance.
  for (i = 0; i < tblEl.rows.length; i++) {
   rowEl = tblEl.rows[i];
   rowEl.className = rowEl.className.replace(rowTest, "");
    if (i % 2 != 0)
      rowEl.className += " " + rowClsNm;
    rowEl.className = normalizeString(rowEl.className);
    // Set style classes on each column (other than the name column) to
    // highlight the one that was sorted.
    for (j = 2; j < tblEl.rows[i].cells.length; j++) {
      cellEl = rowEl.cells[j];
      cellEl.className = cellEl.className.replace(colTest, "");
      if (j == col)
        cellEl.className += " " + colClsNm;
      cellEl.className = normalizeString(cellEl.className);
    }
  }

  // Find the table header and highlight the column that was sorted.
  var el = tblEl.parentNode.tHead;
  rowEl = el.rows[el.rows.length - 1];
  // Set style classes for each column as above.
  for (i = 2; i < rowEl.cells.length; i++) {
    cellEl = rowEl.cells[i];
    cellEl.className = cellEl.className.replace(colTest, "");
    // Highlight the header of the sorted column.
    if (i == col)
      cellEl.className += " " + colClsNm;
      cellEl.className = normalizeString(cellEl.className);
  }
}

function setRanks(tblEl, col, rev) {

  // Determine whether to start at the top row of the table and go down or
  // at the bottom row and work up. This is based on the current sort
  // direction of the column and its reversed flag.

  var i    = 0;
  var incr = 1;
  if (tblEl.reverseSort[col])
    rev = !rev;
  if (rev) {
    incr = -1;
    i = tblEl.rows.length - 1;
  }

  // Now go through each row in that direction and assign it a rank by
  // counting 1, 2, 3...

  var count   = 1;
  var rank    = count;
  var curVal;
  var lastVal = null;

  // Note that this loop is skipped if the table was sorted on the name
  // column.
  while (col > 1 && i >= 0 && i < tblEl.rows.length) {

    // Get the value of the sort column in this row.
    curVal = getTextValue(tblEl.rows[i].cells[col]);

    // On rows after the first, compare the sort value of this row to the
    // previous one. If they differ, update the rank to match the current row
    // count. (If they are the same, this row will get the same rank as the
    // previous one.)
    if (lastVal != null && compareValues(curVal, lastVal) != 0)
        rank = count;
    // Set the rank for this row.
    tblEl.rows[i].rank = rank;

    // Save the sort value of the current row for the next time around and bump
    // the row counter and index.
    lastVal = curVal;
    count++;
    i += incr;
  }

  // Now go through each row (from top to bottom) and display its rank. Note
  // that when two or more rows are tied, the rank is shown on the first of
  // those rows only.

  var rowEl, cellEl;
  var lastRank = 0;

  // Go through the rows from top to bottom.
  for (i = 0; i < tblEl.rows.length; i++) {
    rowEl = tblEl.rows[i];
    cellEl = rowEl.cells[0];
    // Delete anything currently in the rank column.
    while (cellEl.lastChild != null)
      cellEl.removeChild(cellEl.lastChild);
    // If this row's rank is different from the previous one, Insert a new text
    // node with that rank.
    if (col > 1 && rowEl.rank != lastRank) {
      cellEl.appendChild(document.createTextNode(rowEl.rank));
      lastRank = rowEl.rank;
    }
  }
}

//]]></script> 
```

# c - C 如何将静态函数的使用限制在其文件中？

> ID：11614138
> 
> 赞同：8
> 
> 时间：2012-07-23T14:05:18.043
> 
> 标签：c, assembly

我知道 C 中的静态函数只允许在该文件的范围内调用该特定函数。我感兴趣的是这是如何发生的。它是被放置到内存的特定部分还是编译器对该函数应用特定操作。可以将相同的过程应用于汇编中的函数调用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T14:11:59.207

声明一个函数`static`并不能真正阻止它被其他翻译单元*调用*。

`static`它的作用是防止该功能被其他翻译单元按名称*引用*（*链接*）。这将消除*直接*调用该函数的可能性，即“按名称”调用。为此，编译器只需从从翻译单元导出的外部名称表中排除函数名称。除此之外，静态函数绝对没有什么特别之处。

您仍然可以通过其他方式从其他翻译单元*调用*该函数。例如，如果您以某种方式获得了指向`static`其他翻译单元中的函数的指针，则可以通过该指针调用它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-23T14:06:56.193

它不会进入对象的名称表，这会阻止它链接到其他东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-23T14:07:56.310

函数和其他名称作为*符号*导出到目标文件中。链接器使用这些符号在链接时解析各种悬空引用（例如，调用另一个文件中定义的函数）。当您声明它时`static`，它不会作为符号导出。因此它不会被任何其他文件拾取。如果你有一个指向它的函数指针，你仍然可以从另一个文件中调用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T14:07:59.853

事实上恰恰相反。当一个函数*不是*静态的时，它的名字写在目标文件的某个地方，链接器可以使用它来链接使用这个函数的其他目标文件，到那个函数的地址。

当函数被声明`static`时，编译器根本不会把名字放在那里。

# c# - 如何使用 VLC 插件在 c# 中获取缓冲视频的状态并修复视频播放器中的自定义徽标

> ID：11614139
> 
> 赞同：3
> 
> 时间：2012-07-23T14:05:17.517
> 
> 标签：c#, video, rtsp, vlc, buffering

我正在为基于 Window 的计算机开发一个视频播放器，它可以播放来自任何地址的在线流媒体视频，例如 rtsp://live.example.com/live/mystream

为此，我正在使用来自 VLC 的插件。

我有 2 个问题： 1\. 如何获取视频播放器是否开始缓冲的状态。如果是，则将缓冲显示为进度。

1.  当没有视频播放时，VLC 插件会在视频播放器屏幕中间显示 VLC 的徽标。如何用我的自定义徽标替换该徽标：

以下是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.NetworkInformation;
using SikhPlayer;
using System.Windows;

namespace SikhPlayer
{
    public partial class Form1 : Form
    {
        public Form1()
        {

            InitializeComponent();
                   }

        public void Form1_Load(object sender, EventArgs e)
        {

            InitializeComponent();
            System.Threading.Thread.Sleep(500);

            //axVLCPlugin21.BringToFront();
            axVLCPlugin21.video.logo.file("http://localhost/logo.png");
            axVLCPlugin21.video.logo.opacity = 50;
            axVLCPlugin21.video.logo.Position = "center";
            axVLCPlugin21.video.logo.enable();

                axVLCPlugin21.AutoPlay = false;

        }

            private void button1_Click(object sender, EventArgs e)
        {
           axVLCPlugin21.playlist.playItem(@"rtsp://ip.example.com:1935/live/mystream);

             axVLCPlugin21.Focus();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            axVLCPlugin21.playlist.stop();
        }
    }
} 
```

如果您对我的问题有答案，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T06:27:01.270

1.  要获取缓冲状态，请添加事件名称`axVLCPlugin21_MediaPlayerBuffering`

    它有 2 个参数：`object sender`,`AxAXVLC.DVLCEvents_MediaPlayerBufferingEvent e`

    您可以使用值`e.cache`来获取缓冲状态。它的值范围从 0 到 100。它就像缓冲的视频百分比。

2.  如果我没有错，我想你不能。但是，您可以添加`picturebox`视频插件并使用缓冲状态（如上所述）或其他事件（如`MediaPlayerPlaying`等）来使`picturebox visible`或不可见。

# css - 意外的盒子阴影行为

> ID：11614144
> 
> 赞同：1
> 
> 时间：2012-07-23T14:05:35.473
> 
> 标签：css

我试图在 CSS 中绘制一个小三角形（作为矩形聊天气泡的尾部）。我设法做到了，但后来我想在尾部和盒子上应用一个盒子阴影。所以，我有以下 CSS 用于尾部：

```
#bubble::after {
    content: "";
    display: block;
    position: absolute;
    bottom: -22px;
    left: 10px;
    border-width: 22px 0 0 20px;
    border-style: solid;
    border-color: #fff transparent;
    -webkit-box-shadow:  5px 5px 5px 0px rgba(0, 0, 0, .6);
    box-shadow:  5px 5px 5px 0px rgba(0, 0, 0, .6);
} 
```

这使得这个（~~对不起; 由于变焦，背景有点模糊~~):

![在 Chrome 中渲染的尾巴](../Images/08e7a7766fbbcfb7fb040867a33f6b49.png)

注意 box-shadow 没有在气泡尾部的对角线部分渲染。

我想要达到的效果是：

![在此处输入图像描述](../Images/5789f2c87659cb73a228eb342132c614.png)

这是 Photoshop 内部的截图，所以它看起来可能与浏览器端口视图的部分截图有点不同（阴影应该更大，我忘了在缩放路径后更新图层样式）。

我将如何实现这一目标？

谢谢！

* * *

PS：我对使用光栅图像或 SVG 的想法持开放态度，尽管如果我不需要，我更愿意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:42:13.817

我认为您正在尝试做的与 SA 上的这篇文章有关：[CSS 绘制箭头的 CSS 阴影](https://stackoverflow.com/questions/5549594/css-drop-shadow-for-css-drawn-arrow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:20:51.283

恐怕仅使用 CSS 是不可能的。`box-shadow`适用于元素的盒子，图像仍然是一个矩形:)

请参阅[http://lineandpixel.com/blog/png-shadow](http://lineandpixel.com/blog/png-shadow)以获取另一位沮丧的用户的文章。

您必须硬着头皮使用光栅图像或 SVG。

# java - SPARQL 在 Java 中同时查询？

> ID：11614145
> 
> 赞同：3
> 
> 时间：2012-07-23T14:05:42.650
> 
> 标签：java, sparql, jena

我正在编写一个 JUnit 测试来检查大约一百个 SPARQL 查询的结果。

```
for(String query: queries)
{
 QueryEngineHTTP qe = new QueryEngineHTTP(endpoint, query);
 ResultSet rs = qe.execSelect();
 while(rs.hasNext()) {...}
} 
```

为了优化性能，我想并行执行一些查询，但不是一次全部执行。Jena 或其他库中是否有这种机制？我可以使用线程池，但我想优化的解决方案会更好，因为它可以：

*   最小化开销
*   如果存在这样的协议，通过一次向服务器提供所有查询来最小化延迟
*   *指定每个端点*的最大并发查询数量，这样如果我有 50 个 DBpedia 查询和 50 个 LinkedGeoData 查询，它将一次运行 5 个
*   近似查询的运行时间，以便它可以首先启动更快的查询
*   确定最适合 SPARQL 端点缓存的查询顺序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:15:15.157

您可能想看看我在工作中开发的一个开源工具，我的公司在 BSD 许可下发布，非常简单地称为[SPARQL Query Benchmarker](http://sourceforge.net/projects/sparql-query-bm/)

它没有您正在寻找的所有功能，但它使用 Jena 并且具有利用 Java 并发框架进行并发查询的一些能力，因此应该为您提供一些有用的代码来帮助您入门。

# css - django 将样式表添加到站点

> ID：11614146
> 
> 赞同：0
> 
> 时间：2012-07-23T14:05:43.370
> 
> 标签：css, django

学习如何将样式表添加到 django 站点。添加了我认为我需要的代码，但该站点完全忽略了它。这是我的文件；

网址.py

```
import os.path
from django.conf.urls.defaults import *
from users.views import *

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

stylesheets = os.path.join(os.path.dirname(__file__), 'stylesheets')

urlpatterns = patterns('',
  (r'^$', main_page),
  (r'^stylesheets/(?P<path>.*)$',
    'django.views.static.serve',
    { 'document_root': stylesheets }),
    # Examples:
    # url(r'^$', 'chapter6.views.home', name='home'),
    # url(r'^chapter6/', include('chapter6.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

main_page.html 文件

```
<html>
  <head>
    <title>The users application</title>
  <link rel="stylesheet"
    href="/var/chapter6/stylesheets/style.css"
    type="text/css" />
  </head>
  <body>
    <h1>The users application</h1>
    Here are the users:
    <p>{{ username1 }} </p>
    <p>{{ username2 }} </p>
    <p>{{ username3 }} </p>
  </body>
</html> 
```

最后，这里是样式表。

```
body {
  font-size: 12pt;
  background-color: pink;
}

h1 {
  color: red;
}

p {
  font-size: 20pt;
} 
```

我已经检查了所有代码十几次，找不到任何错误。我正在从“django：视觉快速专业指南”一书中学习 django。所有的代码看起来都是正确的。不过我在书中发现了一些错误。任何帮助将不胜感激。

谢谢，鲍比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:58:10.153

您的 URLconf 映射“/stylesheets/”，但您的 HTML 正在查看“/var/chapter6/stylesheets”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:52:54.667

那本书是 2009 年出版的（反正没有很好的评论）。自 2009 年以来，Django 发生了*很多*变化，所以如果我是你，我会寻找另一个起点。不幸的是，没有多少在印的 Django 书籍是最新的。

不过，最好的起点是[在线 Django 书籍](http://www.djangobook.com/)。它与印刷版*的 Django 权威指南*相同，但随着 Django 本身的变化不断在线更新。

也就是说，我假设您是否刚开始使用最新版本的 Django（当时为 1.4）。如果没有，请立即升级。在 Django 1.3+ 中，处理静态文件很简单，只需要以下设置：

```
STATIC_ROOT = os.path.join(os.path.dirname(__file__), 'static')
STATIC_URL = '/static/'
MEDIA_ROOT = os.path.join(os.path.dirname(__file__), 'media')
MEDIA_URL = '/media/' 
```

添加`django.contrib.staticfiles`到`INSTALLED_APPS`，您*可能*需要将以下行添加到您的`urls.py`：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

在开发中，Django 将在每个应用程序的`static`目录下提供任何内容`STATIC_URL`。如果您需要项目范围的资源，请将它们放在另一个目录中，例如“assets”，然后将该目录添加到`STATICFILES_DIRS`：

```
STATICFILES_DIRS = (
    os.path.join(os.path.dirname(__file__), 'assets'),
) 
```

当您投入生产时，`STATIC_ROOT`将由`MEDIA_ROOT`您的网络服务器而不是 Django 提供服务。出于静态文件的目的，您需要运行：

```
python manage.py collectstatic 
```

让 Django 将所有内容复制到`STATIC_ROOT`. 这仅用于生产。该目录甚至不应该存在于开发中。

也可以看看：

*   [https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)
*   [https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)

# python - 在 python 与 bash 中限制 glob

> ID：11614148
> 
> 赞同：0
> 
> 时间：2012-07-23T14:05:46.583
> 
> 标签：python, linux, bash, glob

我的程序读取 *ABC* 之类的字段并尝试将其转换为 glob 语句。我在尝试限制数据时遇到问题。
Glob 在 linux bash 与 python glob 库中的工作方式不同：

来自 bash：

```
bash_level$ ls *FOO*V7*
baz_FOO_V7.txt  baz_FOO_V777.txt 
bash_level$ ls *FOO*V7[![:digit:]]* 
baz_FOO_V7.txt 
```

来自 ipython：

```
In [1]: import glob
In [2]: glob.glob("*FOO*V7*.txt")
Out[2]: ['baz_FOO_V7.txt', 'baz_FOO_V777.txt']
In [3]: glob.glob("*FOO*V7[![:digit:]]*.txt")
Out[3]: [] 
```

底线：
Out[3] 没有相同的预期输出。
我该如何克服这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:13:43.260

您可以将 glob 表达式转换为正则表达式：

```
import re
regex=re.compile(r'.*FOO.*V7[^\d].*\.txt')
print filter(lambda x: regex.match(x), glob.glob("*")) 
```

当然，此时您不再需要`glob`，因为您可以使用它`os.listdir()`来代替。

**编辑**

阅读`glob`和[fnmatch](http://docs.python.org/library/fnmatch.html#fnmatch.fnmatch)的文档（这是 glob 用来进行匹配的），您的匹配似乎可以写成：

```
glob.glob('*FOO*V7[!0123456789]*') 
```

也是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:28:02.773

查看在`fnmatch.translate`的实现中使用的的输出`glob.glob`，我认为 glob 被转换为不正确的正则表达式：

```
>>> fnmatch.translate("*FOO*V7[![:digit:]]*")
'.*FOO.*V7[^[:digit:]\\].*\\Z(?ms)' 
```

Python 正则表达式不处理`[[:class:]]`语法；看来`fnmatch.translate`只能翻译在 glob 模式中。

# mysql - MYSQL: UPDATE tblUser SET userName = 'MD5 hash 生成的用户名版本' WHERE userID IN (...)?

> ID：11614149
> 
> 赞同：1
> 
> 时间：2012-07-23T14:05:49.853
> 
> 标签：mysql

我试图将我的数据库中的用户名字段更新为该人用户名的 MD5 哈希生成版本。我必须对很多用户这样做，所以我想知道是否有人有一个快速的 mysql 更新查询来处理这个问题，或者我是否应该编写一个函数来处理它。

沿着这些思路：

UPDATE tblUser SET userName = 'MD5 哈希生成的用户名版本' WHERE userID IN (...)

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:07:02.493

使用该[`MD5()`](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_md5)功能。

```
UPDATE tblUser
SET userName = MD5(userName)
WHERE userID IN (...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:08:03.523

使用mysql内置的md5()

```
UPDATE tblUser SET userName = md5(userName) WHERE userID IN (…) 
```

# encoding - 我应该使用哪种数据结构进行位填充？

> ID：11614152
> 
> 赞同：4
> 
> 时间：2012-07-23T14:05:55.710
> 
> 标签：encoding, bit-manipulation, bit-fields, bitstuffing

我正在尝试为我正在从事的项目实施 bitstuffing，即一个简单的软件 AFSK 调制解调器。简化的协议如下所示：

```
0111 1110    # burst sequence
0111 1110    # 16 times 0b0111_1110
   ...
0111 1110
   ...
   ...       # 80 bit header (CRC, frame counter, etc.)
   ...
0111 1110    # header delimiter
   ...
   ...       # data
   ...
0111 1110    # end-of-frame sequence 
```

现在我需要`0111 1110`在接收到的数据中找到保留的序列，因此必须确保头部和数据都不包含六个连续`1`的 s。这可以通过位填充来完成，例如在每个五个`1`s 的序列之后插入一个零：

```
11111111 
```

转换为

```
111110111 
```

和

```
11111000 
```

转换为

```
111110000 
```

如果我想有效地实现这一点，我想我不应该使用`1`s 和`0`s 的数组，我必须将数据字节转换为`1`s 和`0`s，然后填充一个数组等，但静态大小的位域似乎也不适合，因为由于位填充，内容的长度是可变的。

我可以使用哪种数据结构来更有效地进行位填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:39:16.003

我现在才看到这个问题，看到它没有回答也没有被删除，我会继续回答。它可能会帮助其他看到这个问题并提供关闭的人。

位填充：这里的最大连续序列`1's`是`5`。在那些之后`5` `1's`应该有一个`0`附加的`5` `1's`。

这是执行此操作的 C 程序：

```
#include <stdio.h>
typedef unsigned long long int ulli;

int main()
{
    ulli buf = 0x0fffff01, // data to be stuffed
         temp2= 1ull << ((sizeof(ulli)*8)-1), // mask to stuff data
         temp3 = 0; // temporary  

    int count = 0; // continuous 1s indicator

    while(temp2)
    {
        if((buf & temp2) && count <= 5) // enter the loop if the bit is `1` and if count <= 5
        {
            count++;
            if(count == 5)
            {
                temp3 = buf & (~(temp2 - 1ull)); // make MS bits all 1s
                temp3 <<= 1ull; // shift 1 bit to accomodeate the `0`
                temp3 |= buf & ((temp2) - 1); // add back the LS bits or original producing stuffed data
                buf = temp3;
                count = 0; // reset count
                printf("%llx\n",temp3); // debug only               
            }           
        }
        else
        {
            count = 0; // this was what took 95% of my debug time. i had not put this else clause :-)
        }
        temp2 >>=1; // move on to next bit.
    }
    printf("ans = %llx",buf); // finally
} 
```

这样做的问题是，如果连续 5 个 1 中有 10 个以上，那么它可能会溢出。最好先分割然后再填充并重复。

# javascript - node.js - 按时附加事件处理程序

> ID：11614161
> 
> 赞同：7
> 
> 时间：2012-07-23T14:06:25.913
> 
> 标签：javascript, node.js, dom-events

我正在研究 node.js 并在 node.js 手册中遇到了这个例子：

```
...
var req = http.request(options);
req.end();

req.on('upgrade', function(res, socket, upgradeHead) {
  console.log('got upgraded!');
  socket.end();
  process.exit(0);
});
... 
```

我在这个例子中看到的是附加到 HTTP 请求事件的处理程序，*在*创建请求之后，甚至*在它（预定）发送之后*。更糟糕的是，手册说：

> 如果未侦听此事件，则接收升级标头的客户端将关闭其连接。

在有机会附加处理程序**之前** ，事件是否可能发生？`req.on(...`我怀疑我不了解节点的异步模型中的某些内容。还是节点手册中的这段代码旨在希望网络请求比执行下一行代码花费更长的时间？！

另一个例子：

```
http.get("http://www.google.com/index.html", function(res) {
  console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
  console.log("Got error: " + e.message);
}); 
```

在这里，HTTP 请求将在对象创建后立即启动，并且我们仅在之后附加一个错误处理程序。同样，（1）它是仅由于网络延迟而起作用的代码，（2）我没有得到有关 node.js 概念的信息，或者（2b）事件将“等待”直到我将处理程序附加到它？

**编辑**：更好的例子，也来自手册。*下面的好*例子和*坏*例子是不同的，只是因为在好的例子中，我们足够快地附加事件，因此丢失数据**的机会很低**，或者**永远不可能以**这种方式丢失数据（为什么？！）

```
// Good
request.on('response', function (response) {
  response.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

// Bad - misses all or part of the body
request.on('response', function (response) {
  setTimeout(function () {
    response.on('data', function (chunk) {
      console.log('BODY: ' + chunk);
    });
  }, 10);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:36:08.490

你错过的是 JavaScript 根本不是异步的！我的意思是 JavaScript 是单线程的，异步操作实际上不是异步的。有一个非常奇特的队列模型，它给人一种 JavaScript 是异步的错觉（不要误会我的意思：它仍然**是**最有效的模型）。

那么这是什么意思呢？这意味着一旦同步代码运行，其他代码**就不可能**并行运行。所以例如在这段代码中

```
var req = http.request(options);
req.end();
req.on(...); 
```

请求已调度，但主线程（即操作）尚未在`req.end()`. 只要主要操作还没有完成，异步代码就不能在两者之间触发。特别是处理程序**总是**在实际事件有机会发生之前设置。

再举一个例子，让它更清楚一点。考虑这段代码：

```
var http = require('http');
http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
    while(true) { } // <------ infinite loop doing nothing
}).listen(1337, '127.0.0.1'); 
```

请注意，第一个请求将成功完成。但是任何其他请求都**不会**得到响应。这是因为循环永远不会完成操作，因此 JavaScript**无法**跳转到另一个事件。此代码使应用程序永久崩溃，超出任何希望。所以要小心使用 Node.js 的同步代码。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T14:43:19.773

要理解的关键是只有一个事件循环，并且当您调用异步函数时，控件只会离开事件循环的当前“滴答”。通常，当您执行 I/O（每几行代码很常见）或调用`setTimeout`/`setInterval`（相当罕见）。因此，只要您的所有事件处理程序都在事件循环的同一滴答声中注册，您就永远不会丢失任何数据。此外，在事件循环的那个滴答声中，附加处理程序的顺序无关紧要，因为在那个滴答声期间，您的代码实际上是节点正在执行的唯一事情，因此没有其他代码可以接收 I/O 或调用任何事件处理程序，直到当前事件循环滴答完成。这与等待“足够长”或网络延迟或类似的东西无关。单个事件循环的简单性保证了事件处理函数的可预测操作。

# ios - 气泡效果中的 iOS 图像

> ID：11614162
> 
> 赞同：3
> 
> 时间：2012-07-23T14:06:26.427
> 
> 标签：ios, uiimage, image-manipulation

我有一些我想“放入气泡中”的图像。气泡在屏幕周围漂浮，这些图像被困在其中。

最好的方法是将内部图像与气泡图像结合起来，并以某种方式扭曲内部图像，使其看起来像是反映在气泡内部。

有谁知道如何在不使用纹理和网格的情况下实现这种效果？也许有人记得一个旧项目或做过类似事情的事情？

这是我的意思的一个例子：

![在此处输入图像描述](../Images/1c493209de68eb23e30f91d8c88ddba0.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T14:51:49.103

您可以使用我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中的 GPUImageSphereRefractionFilter 执行此操作：

![球面折射示例](../Images/d1c3ef3e507a009c945ce9256148a32b.png)

[我在this answer](https://stackoverflow.com/a/11387757/19679) to an question about an similar effects on Android中详细描述了它是如何工作的。基本上，我使用片段着色器来折射穿过假想球体的光，然后使用它来查找包含源图像的纹理。使用简单的高斯模糊来模糊背景。

~~如果您想获得您显示的图像的确切外观，您可能需要调整此片段着色器以向球体添加一些掠角颜色，但这应该让您相当接近。~~

为了好玩，我决定尝试更接近地复制上面的玻璃球。我在球体上添加了掠射角光照和镜面光照反射，以及不反转折射纹理坐标，导致了以下结果：

![放牧角照明球](../Images/5d6cbf92c5708440ceee74ad78d30bc0.png)

我为这个较新的版本使用了以下片段着色器：

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D inputImageTexture;

 uniform highp vec2 center;
 uniform highp float radius;
 uniform highp float aspectRatio;
 uniform highp float refractiveIndex;
// uniform vec3 lightPosition;
 const highp vec3 lightPosition = vec3(-0.5, 0.5, 1.0);
 const highp vec3 ambientLightPosition = vec3(0.0, 0.0, 1.0);

 void main()
 {
     highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio));
     highp float distanceFromCenter = distance(center, textureCoordinateToUse);
     lowp float checkForPresenceWithinSphere = step(distanceFromCenter, radius);

     distanceFromCenter = distanceFromCenter / radius;

     highp float normalizedDepth = radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter);
     highp vec3 sphereNormal = normalize(vec3(textureCoordinateToUse - center, normalizedDepth));

     highp vec3 refractedVector = 2.0 * refract(vec3(0.0, 0.0, -1.0), sphereNormal, refractiveIndex);
     refractedVector.xy = -refractedVector.xy;

     highp vec3 finalSphereColor = texture2D(inputImageTexture, (refractedVector.xy + 1.0) * 0.5).rgb;

     // Grazing angle lighting
     highp float lightingIntensity = 2.5 * (1.0 - pow(clamp(dot(ambientLightPosition, sphereNormal), 0.0, 1.0), 0.25));
     finalSphereColor += lightingIntensity;

     // Specular lighting
     lightingIntensity  = clamp(dot(normalize(lightPosition), sphereNormal), 0.0, 1.0);
     lightingIntensity  = pow(lightingIntensity, 15.0);
     finalSphereColor += vec3(0.8, 0.8, 0.8) * lightingIntensity;

     gl_FragColor = vec4(finalSphereColor, 1.0) * checkForPresenceWithinSphere;
 } 
```

这个过滤器可以使用 GPUImageGlassSphereFilter 运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:00:00.927

作为记录，我最终使用了@BradLarson 建议的 GPUImage，但我必须编写一个自定义过滤器，如下所示。该滤镜采用“内部”图像和气泡纹理并将两者混合，同时还执行折射计算但不反转图像坐标。效果：

![在此处输入图像描述](../Images/32ca515a7060abdaad58b1ffec8a2506.png)

**。H**

```
@interface GPUImageBubbleFilter : GPUImageTwoInputFilter

@property (readwrite, nonatomic) CGFloat refractiveIndex;   
@property (readwrite, nonatomic) CGFloat radius;            

@end 
```

**.m**

```
#import "GPUImageBubbleFilter.h"

NSString *const kGPUImageBubbleShaderString = SHADER_STRING
(
 varying highp vec2 textureCoordinate;
 varying highp vec2 textureCoordinate2;

 uniform sampler2D inputImageTexture;
 uniform sampler2D inputImageTexture2;

 uniform highp vec2 center;
 uniform highp float radius;
 uniform highp float aspectRatio;
 uniform highp float refractiveIndex;

 void main()
 {
     highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio));
     highp float distanceFromCenter = distance(center, textureCoordinateToUse);
     lowp float checkForPresenceWithinSphere = step(distanceFromCenter, radius);

     distanceFromCenter = distanceFromCenter / radius;

     highp float normalizedDepth = radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter);
     highp vec3 sphereNormal = normalize(vec3(textureCoordinateToUse - center, normalizedDepth));

     highp vec3 refractedVector = refract(vec3(0.0, 0.0, -1.0), sphereNormal, refractiveIndex);

     lowp vec4 textureColor = texture2D(inputImageTexture, (refractedVector.xy + 1.0) * 0.5) * checkForPresenceWithinSphere; 
     lowp vec4 textureColor2 = texture2D(inputImageTexture2, textureCoordinate2) * checkForPresenceWithinSphere;

     gl_FragColor = mix(textureColor, textureColor2, textureColor2.a);    
 }

 );

@interface GPUImageBubbleFilter () {
    GLint radiusUniform, centerUniform, aspectRatioUniform, refractiveIndexUniform;
}

@property (readwrite, nonatomic) CGFloat aspectRatio;

@end

@implementation GPUImageBubbleFilter
@synthesize radius = _radius, refractiveIndex = _refractiveIndex, aspectRatio = _aspectRatio;

- (id) init {
    self = [super initWithFragmentShaderFromString: kGPUImageBubbleShaderString];
    if( self ) {
        radiusUniform = [filterProgram uniformIndex: @"radius"];
        aspectRatioUniform = [filterProgram uniformIndex: @"aspectRatio"];
        centerUniform = [filterProgram uniformIndex: @"center"];
        refractiveIndexUniform = [filterProgram uniformIndex: @"refractiveIndex"];

        self.radius = 0.5;
        self.refractiveIndex = 0.5;
        self.aspectRatio = 1.0;

        GLfloat center[2] = {0.5, 0.5};
        [GPUImageOpenGLESContext useImageProcessingContext];
        [filterProgram use];
        glUniform2fv(centerUniform, 1, center);

        [self setBackgroundColorRed: 0 green: 0 blue: 0 alpha: 0];
    }

    return self;
}

#pragma mark - Accessors
- (void) setRadius:(CGFloat)radius {
    _radius = radius;

    [GPUImageOpenGLESContext useImageProcessingContext];
    [filterProgram use];
    glUniform1f(radiusUniform, _radius);
}

- (void) setAspectRatio:(CGFloat)aspectRatio {
    _aspectRatio = aspectRatio;

    [GPUImageOpenGLESContext useImageProcessingContext];
    [filterProgram use];
    glUniform1f(aspectRatioUniform, _aspectRatio);
}

- (void)setRefractiveIndex:(CGFloat)newValue;
{
    _refractiveIndex = newValue;

    [GPUImageOpenGLESContext useImageProcessingContext];
    [filterProgram use];
    glUniform1f(refractiveIndexUniform, _refractiveIndex);
} 
```

# jboss - 在 jboss 部署 jboss sar 作为 7 错误

> ID：11614167
> 
> 赞同：1
> 
> 时间：2012-07-23T14:06:37.800
> 
> 标签：jboss, sar

您好，我尝试在 jboss 上部署 jboss sar 文件。我的问题是他可以识别结束 jboss-sar。

```
 <plugin>
                <groupId>org.jboss.as.plugins</groupId>
                <artifactId>jboss-as-maven-plugin</artifactId>
                <version>7.0.2.Final</version>
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>deploy</goal>
                        </goals>        
                    </execution>
                </executions>
            </plugin> 
```

使用此部署插件，我收到此错误

```
[INFO] Could not execute goal deploy on dts.jboss-sar. Reason: D:\Workspace Liferay\DTS_TRUNK\code\dts\dts-sar\target\dts.jboss-sar (The system cannot find the file specified) 
```

问题是我怎么能告诉他看 dts.sar 而不是 dts.jboss-sar 因为这个文件 dts.sar 在那里但他看不到它。

好的，我在某处找到了解决方案并更改了插件

```
 <plugin>
                <groupId>org.jboss.as.plugins</groupId>
                <artifactId>jboss-as-maven-plugin</artifactId>
                <version>7.0.2.Final</version>
                 <configuration>
                    <filename>dts.sar</filename>
                <artifactTypeMappings>
                <artifactTypeMapping type="jboss-sar" mapping="sar"/>
                </artifactTypeMappings>
                </configuration>
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>deploy</goal>
                        </goals>

                    </execution>
                </executions>   
            </plugin> 
```

现在看起来它正在工作，但还有其他问题：

```
16:50:14,298 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-6) MSC00001: Failed to start service jboss.deployment.unit."dts.sar".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."dts.sar".PARSE: Failed to process phase PARSE of deployment "dts.sar"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_15]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_15]
    at java.lang.Thread.run(Thread.java:619) [:1.6.0_15]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: Failed to parse service xml ["/D:/liferay-portal-6.1.0-ce-ga1/jboss-7.0.2/bin/content/dts.sar/META-INF/jboss-service.xml"]
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:94)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    ... 5 more
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[2,1]
Message: Unexpected element 'server'
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:98) [staxmapper-1.0.0.Final.jar:1.0.0.Final]
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:59) [staxmapper-1.0.0.Final.jar:1.0.0.Final]
    at org.jboss.as.service.ServiceDeploymentParsingProcessor.deploy(ServiceDeploymentParsingProcessor.java:87)
    ... 6 more

16:50:14,301 INFO  [org.jboss.as.server.controller] (pool-1-thread-3) Deployment of "dts.sar" was rolled back with failure message {"Failed services" => {"jboss.deployment.unit.\"dts.sar\".PARSE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"dts.sar\".PARSE: Failed to process phase PARSE of deployment \"dts.sar\""}}
16:50:14,304 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) Stopped deployment dts.sar in 3ms 
```

当我尝试部署其他战争文件时，我遇到了类似的问题，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:14:19.710

从 jboss-service.xml 中删除 Mbean 很容易

# python - Python 打包的当前未来是否发生了变化？

> ID：11614172
> 
> 赞同：3
> 
> 时间：2012-07-23T14:06:47.403
> 
> 标签：python, packaging, pip

在阅读了 Hitchhiker Guide to Packaging 和其他一些博客文章之后，我被说服了 distutils2 来拯救并让 Python 打包世界更加清晰的想法。然而，自 2010 年以来，邮件列表已失效，并且 pip 包安装的内容与其自己的网站不匹配。

我知道它将包含在 Python 3.3 中，但我在网络上并没有看到太多关于它的大惊小怪。除了这里所说的，还有什么变化吗？

[http://guide.python-distribute.org/future.html](http://guide.python-distribute.org/future.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:11:36.480

python-distribute 的包含实际上已被推迟到 Python 3.4 - 例如参见[Nick Coghlan 的这封邮件](https://groups.google.com/d/msg/python-ideas/WgTcHUwtEoU/y_bj-bxWM9EJ)。

# jsf-2 - 对象未正确传递给托管 bean - primefaces 子表中的 commandButton 操作参数

> ID：11614179
> 
> 赞同：1
> 
> 时间：2012-07-23T14:06:57.537
> 
> 标签：jsf-2, primefaces, java-ee-6, managed-bean

我使用的是 primefaces 3.3.1、mojarra 2.1.3、netbeans 7.0.1。

```
<p:dataTable id="approvalchainstable" var="department" value="#{viewApprovalChain.wfdepartments}">
   <p:columnGroup type="header">  
       <p:row>
          <p:column colspan="4" headerText="#{bundle.DepartmentNameFieldLabel}" />  
       </p:row>
       <p:row>  
          <p:column headerText="#{bundle.PostNameFieldLabel}"/>  
          <p:column headerText="#{bundle.ItemCountLabel} #{bundle.ApprovalLevelNameFieldLabel}"/>
          <p:column headerText="#{bundle.ViewLabel}"/>  
          <p:column headerText="#{bundle.LabelDelete}"/>    
       </p:row>  
   </p:columnGroup>  
   <p:subTable var="approvalchain" value="#{department.wfApprovalchainCollection}">  
       <f:facet name="header">  
          #{department.wfDepartmentName}   
       </f:facet>  
       <p:column>  
          #{approvalchain.idWfPost.wfPostName}  
       </p:column> 
       <p:column>  
          #{approvalchain.wfApprovalchainLevel}  
       </p:column> 
       <p:column>  
          <h:link outcome="/viewApprovalChainDetails" value="#{bundle.ViewLabel}">
            <f:param name="idWfApprovalChain" value="#{approvalchain.idWfApprovalchain}"/>
          </h:link>
       </p:column> 
       <p:column>  
          <p:commandButton value="#{bundle.LabelDelete}" 
                           title="Delete"
                           icon="ui-icon-trash"
                           action="#{viewApprovalChain.removeOneApprovalchain(approvalchain)}">
          </p:commandButton>
       </p:column> 
   </p:subTable>     
</p:dataTable> 
```

这是 ViewScoped 托管 bean 方法 -> 从上面的操作调用传递的参数解析为托管 bean 中的 null。因此我得到了 NullPointerException 错误。

```
 public String removeOneApprovalchain(WfApprovalchain wfapprovalchaintoremove) {
    try {
        LogController.log.info("Removing approval chain flow for application " +
                wfapprovalchaintoremove.getIdWfApplication().getWfApplicationName() +
                " applicable for " + wfapprovalchaintoremove.getIdWfPost().getWfPostName() +
                " in " + wfapprovalchaintoremove.getIdWfDepartment().getWfDepartmentName());
        wfApprovalchainFacade.remove(wfapprovalchaintoremove);
        LogController.log.info("Reloading department names for the select one box");
        wfdepartments = wfDepartmentFacade.selectAll();            
    } catch (Exception ex) {
        LogController.log.fatal(ex.toString());
    } finally {
        return null;
    }
} 
```

我很自信我做对了。但是为什么 wfapprovalchaintoremove 对象参数总是解析为 null 呢？为什么在 primefaces 子表中没有正确传递参数？我在没有子表的数据表中尝试了它，它工作正常。请帮助，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:25:13.677

那么你所做的是好的，它应该可以工作，我做了一个测试并且参数是从`p:subtable`. 也许你的`p:dataTable`建筑有问题？

# r - 如何将时间序列数据中的 y%m%d%H 格式转换为“%Y%m%d %H:%M:%S”

> ID：11614180
> 
> 赞同：-3
> 
> 时间：2012-07-23T14:06:58.097
> 
> 标签：r, time-series

如何将`y%m%d%H`格式转换为`"%Y%m%d %H:%M:%S"`. 我的日期从 1970 年到 2010 年。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T15:21:05.920

部分来自评论（如果您可以相应地修改问题会很好），这似乎不是格式化（`%y`vs`%Y`或间距/分隔符）的情况，而是`strptime`/`POSIX*t`自动设置格式以跳过小时/分钟/seconds 当指定“午夜”时间时。（这是我目前基于以下示例的猜测，但我可能遗漏了一些东西。）

，`%y`非午夜时间：

```
> str(strptime("00020304",format="%y%m%d%H"))
 POSIXlt[1:1], format: "2000-02-03 04:00:00" 
```

同上，午夜时间：

```
> str(strptime("00020300",format="%y%m%d%H"))
 POSIXlt[1:1], format: "2000-02-03" 
```

午夜时间（带空格）

```
> str(strptime("00 02 03 00",format="%y %m %d %H"))
 POSIXlt[1:1], format: "2000-02-03" 
```

具有一个午夜和一个非午夜时间的向量：

```
> str(strptime(c("00020300","00020304"),format="%y%m%d%H"))
 POSIXlt[1:2], format: "2000-02-03 00:00:00" "2000-02-03 04:00:00" 
```

所以看起来德克的答案是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:24:05.010

尝试这个：

```
R> Sys.Date()
[1] "2012-07-23"
R> format(Sys.Date())
[1] "2012-07-23"
R> format(Sys.Date(), "%Y-%m-%d %H:%M:%S")
[1] "2012-07-23 00:00:00"
R> 
```

因为您可能有一种`Date`类型，根据定义，它没有小时/分钟/秒信息 -`POSIXct`用于此。查看`help(DateTimeClasses)`详细信息，并在此处以及带有工作示例的各种邮件列表上发布大量帖子。

# html - 为什么我应该使用 content_tag 而不是“常规”html？

> ID：11614181
> 
> 赞同：12
> 
> 时间：2012-07-23T14:06:59.277
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

我知道有一个选项可以在 ruby​​-on-rails 中使用 content_tag 函数，它有助于生成 html 标记。与我共事的公司中的一些 Rails 开发人员告诉我，这是“方便且正确”的方式，例如，我不应该编写“本机” html 来生成 div……这是真的吗？它是一种导轨标准吗？它与性能问题或渲染速度有关吗？

我附上了我以前的代码的代码：

```
<div class="alert alert-<%= key %>"><%= value %></div> 
```

和rails函数的使用

```
<%= content_tag(:div, value, class: "alert alert-#{key}") %> 
```

第一个在我看来很漂亮，可以理解和直观 - 比第二个代码更多。你怎么看？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T14:27:31.090

当您在 ruby​​ 代码中以编程方式生成 HTML 时，能够使用 content_tag 会有所帮助，例如：助手和演示者。

在我看来，我通常不会在项目的布局和模板中使用 content_tags——我认为它不会帮助编码可读性。我在这里看不到生产力或性能的任何收益。

但是：忠告：如果这是您的团队的标准 - 与团队一起去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T06:10:39.123

除了 Project 和 Rails 标准之外，安全性是必须使用 content_tag 的另一个原因。

我觉得 content_tag 更好的两个快速原因

1.  Rails 的视图文件是在嵌入式 Ruby（意思是）从 Ruby 生成的 HTML 页面中。因此，像 content_tag 这样的帮助方法的目的是帮助您从 ERB 生成 HTML。

2.  当直接使用 HTML（原生样式）进行硬编码时，很容易受到跨站点脚本攻击 (XSS)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:42:34.863

这是一种帮助您简化 HTML 生成的方法。你传入你想要使用的东西，它会为它吐出 HTML。它基本上是为你构建的，虽然我从不使用它们，但我宁愿自己写，因为它只需要输入辅助方法调用 :) @Jesse 很好的调用，如果这是你的团队正在使用的，坚持与公约

# jquery-mobile - jquery mobile - 日期框在左侧出现太多

> ID：11614185
> 
> 赞同：1
> 
> 时间：2012-07-23T14:07:03.473
> 
> 标签：jquery-mobile, datebox

我正在使用 jQuery 1.7.2 和 jqm-datebox 'stable'。

代码：

```
<label class="ui-input-text ui-hidden-accessible" for="date">Date</label>
<input jql id="date" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" type="text" value="" name="date" data-role="datebox" data-options='{"mode": "calbox", "calStartDay": 1}'></input> 
```

但是，当我单击小图标时，日历框出现在左侧太多，如图所示。这在移动设备上尤为明显。

如果我减小窗口的宽度，它会更靠左。（`element.style`尤其是`left`属性）似乎是动态计算的，具体取决于宽度，但我无法找到在哪里，无论是在 css 中，还是在 js 中。我看到了[这个问题](https://stackoverflow.com/questions/8115541/jquery-mobile-datebox-custom-alignment)，有点像我的问题，但我发现它不适用于我的情况。

我应该怎么去让盒子完整地展示出来？

![日历框超出页面](../Images/76e93384a34bb518ea7814f53ade1126.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:07:08.550

从文档：

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode":"calbox", "centerHoriz": true}'> 
```

centerHoriz 选项将为您提供您想要的。

# javascript - 使用绑定原型更改“this”的范围

> ID：11614187
> 
> 赞同：2
> 
> 时间：2012-07-23T14:07:06.393
> 
> 标签：javascript, jquery, scope, this, bind

我正在使用 bind 来更改“this”的范围，以便能够在 click 函数中使用“this”引用我的 generateContent 函数。不幸的是，这意味着 this.id 不再有效，因为“this”的范围发生了变化。

在这种情况下，获取单击按钮的 id 的最佳方法是什么：

```
function help( doc ) {

    buttons: function() {

        $('.add-btn').click( function() {

        this.generateContent( this.id ) );

        }.bind(this));

    },

    generateContent: function ( id ){

    }

}

// This function binds a function to an object's scope.
Function.prototype.bind = function(scope) {
    var _function = this;
    return function() {
        return _function.apply(scope, arguments);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:09:53.003

你没有标记 jQuery，但你的代码像 jQuery 一样嘎嘎叫，所以我假设 jQuery。

jQuery 提供[`event.currentTarget`](http://api.jquery.com/event.currentTarget/)：

```
$('.add-btn').click( function(e) {
     this.generateContent( e.currentTarget.id ) ;
}.bind(this)); 
```

顺便说一句`Function.prototype.bind`，本机存在，您不想在本机版本可用的情况下覆盖它。jQuery 也提供了`$.proxy`，所以你在任何情况下都不需要它。

[看演示](http://jsfiddle.net/HeT5S/)

# selenium - 使用 Selenium WebDriver 在两个浏览器窗口之间切换

> ID：11614188
> 
> 赞同：9
> 
> 时间：2012-07-23T14:07:08.433
> 
> 标签：selenium, webdriver

我使用 Firefox 驱动程序打开了两个 URL。每当我调用驱动程序时，都会打开新的 firefox 窗口。我必须在这两个窗口之间切换。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T14:33:03.240

您可以使用以下代码根据窗口标题在窗口之间切换

```
 private void handleMultipleWindows(String windowTitle) {
            Set<String> windows = driver.getWindowHandles();

            for (String window : windows) {
                driver.switchTo().window(window);
                if (driver.getTitle().contains(windowTitle)) {
                    return;
                }
            }
        } 
```

同样，您可以使用 URL 或其他一些标准来切换窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-11T06:01:27.833

我还添加了切换回 mainWindowHandle 的范围。

如果您正在处理具有不同标题的窗口，您可以尝试使用以下功能。

```
private String mainWindowsHandle; // Stores current window handle
 public static boolean swithToWindow(WebDriver driver,String title){
  mainWindowsHandle = driver.getWindowHandle();
  Set<String> handles = driver.getWindowHandles(); // Gets all the available windows
  for(String handle : handles)
  {
    driver.switchTo().window(handle); // switching back to each window in loop
    if(driver.getTitle().equals(title)) // Compare title and if title matches stop loop and return true
     return true; // We switched to window, so stop the loop and come out of funcation with positive response
  }
  driver.switchTo().window(mainWindowsHandle); // Switch back to original window handle
  return false; // Return false as failed to find window with given title.
 } 
```

# postgresql - 迁移失败时使用 Postgres 的 Flyway

> ID：11614192
> 
> 赞同：0
> 
> 时间：2012-07-23T14:07:18.307
> 
> 标签：postgresql, flyway

我考虑将 Flyway 与 postgresql 一起使用。

当迁移失败时，我是否需要手动回滚它或者它是否可以与 postgres 一起使用 ootb？在失败后是否继续运行以下迁移？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:35:00.790

Flyway 使用 PostgreSQL 对 DDL 事务的支持。

迁移被回滚并且迁移过程停止。

# c# - 设置 Live Tile 背面图像问题

> ID：11614194
> 
> 赞同：0
> 
> 时间：2012-07-23T14:07:27.160
> 
> 标签：c#, windows-phone-7, live-tile

我正在尝试在我的应用程序中实现动态磁贴。这是我在网上找到的更简单的过程。但我得到了一个 Uri 异常。

这是代码：

```
 private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        InternetIsAvailable(); GetDataFeed(); BackTile();
    }

    public void BackTile()
    {
        StandardTileData backData = new StandardTileData
        {
            BackBackgroundImage = new Uri(@"https://dl.dropbox.com/u/27136243/AchivementHunters/Images/LatestTile.png", UriKind.Absolute),
        };
        ShellTile tile = ShellTile.ActiveTiles.First();
        tile.Update(backData);
    } 
```

我想通过替换图像来更新背面图块。我看到很多包含服务器的教程，但我对服务器一无所知。

如果我在解决方案中包含文件并使用它：

```
 BackBackgroundImage = new Uri(@"LatestTile.png", UriKind.Absolute), 
```

它工作正常。

如何从 URL 下载图像并将其保存为背面图像所需的特定路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:28:47.433

[StandardTileData](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.standardtiledata.backbackgroundimage%28v=vs.92%29.aspx)的文档指出*“只能使用本地图像资源创建辅助瓷砖”*

您将需要使用 WebClient[下载图像并将其保存到 IsolatedStorage](https://stackoverflow.com/questions/5870282/save-a-remote-image-in-to-isolated-storage)，然后指定要使用的活动磁贴的[isostore URI](http://dotnet.dzone.com/articles/new-uri-schemes-windows-phone)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:06:01.980

```
BackgroundImage = new Uri("https://dl.dropbox.com/u/27136243/AchivementHunters/Images/LatestTile.png", UriKind.RelativeOrAbsolute) 
```

您的代码是正确的，只需删除 '@' 并使用 'RelativeOrAbsolute'

看起来从安全站点（即使用 URL https）获取图像是不可能的。

# sql - T-SQL 查询错误

> ID：11614210
> 
> 赞同：0
> 
> 时间：2012-07-23T14:08:27.613
> 
> 标签：sql, sql-server-2008-r2

以下查询不起作用，因为列名 RowN 无效。有没有一种优雅的方法可以让它正常工作？

```
select 
    *,
    ROW_NUMBER() over(PARTITION BY matricola order by esercizio desc, cod_valutazione, valutaz_sintetica, matricola, FigureOrder) AS RowN
from 
    (
select distinct
    '' as pdf,  
    Vm.NomeManager + ' ' + Vm.CognomeManager as valutatore, 
    vpd.ESERCIZIO as esercizio, 
    vpd.cod_valutazione, 
    Vm.NomeValutato +' ' + Vm.CognomeValutato as valutato,  
    vpd.matricola,  
    valutaz_sintetica,  
    vpd.COD_STATO as stato_scheda, 
    vpd.VALUTAZIONE_RANKING_SINTETICA,  
    vvv.COD_FIGURA,
    case
        when COD_FIGURA = 'OWNG' then 0
        when COD_FIGURA = 'VAL1' then 1
        when COD_FIGURA = 'OWN' then 2
    end as FigureOrder
from    
    View_SchedePerDistribuzione vpd     
    inner join RL_VALUTAZIONE_VALUTATI_VALUTATORI vvv ON vpd.COD_VALUTAZIONE = vvv.COD_VALUTAZIONE AND vpd.MATRICOLA = vvv.MATRICOLA_VALUTATO   
    inner join ValutatiManager  Vm ON vpd.MATRICOLA = Vm.MatricolaVAlutato and vpd.COD_VALUTAZIONE = Vm.COD_VALUTAZIONE 
where 
    vpd.cod_valutazione='PA_DPO_11-12' and 
    chiusa = 0 AND 
    VVV.COD_FIGURA IN ('VAL1', 'OWN', 'OWNG') AND 
    VVV.Matricola = '30000027') as tab
where 
    RowN = 1
order by esercizio desc, cod_valutazione, valutaz_sintetica, matricola, FigureOrder 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:14:08.897

只需将其嵌入子查询或 CTE 中：

```
with t as (<your query minus the WEHRE and ORDER BY>)
select *
from t
where RowN = 1
order by esercizio desc, cod_valutazione, valutaz_sintetica, matricola, FigureOrder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:13:52.167

你不就用吗

```
select top 1 * from (...) 
```

# php - PDO 查询不起作用

> ID：11614215
> 
> 赞同：0
> 
> 时间：2012-07-23T14:08:53.963
> 
> 标签：php, pdo

我一生都无法弄清楚为什么这不起作用。我有一个网站的不同区域，它使用几乎完全相同的代码，它工作得很好。我敢肯定这是显而易见的，但我对这些东西很陌生。没有错误或任何东西；它什么也不做。$name 变量工作正常（我已经测试过了），并且数据库是最新的。

```
try {
     $db = new PDO($dbhost, $dbuser, $dbpassword);
     $statement = $db->prepare("select first, last from users where email = $name");
     $result = $statement->fetch();
     $first = $result[first];
     $last = $result[last];
}catch(PDOException $e) {
     echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:11:30.200

你必须使用 execute()

```
try {
$db = new PDO($dbhost, $dbuser, $dbpassword);
$statement = $db->prepare("select first, last from users where email = ?");
$statement->execute(array($name));
$result = $statement->fetch();
$first = $result[first];
$last = $result[last];}

catch(PDOException $e) {echo $e->getMessage();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:11:43.897

在实际执行查询之前，您无法获取行；您只准备了查询。最终的问题是您缺少对`$statement->execute()`. 正确的 PDO 习语是这样的：

```
$statement = $db->prepare("select first, last from users where email = ?");
if (!$statement->execute(array($name))) {
    // Handle error
}
$result = $statement->fetch();
$statement->closeCursor(); 
```

`closeCursor()`完成获取行后不要忘记调用。在一些不支持同一客户端并发查询的数据库系统上，不调用该函数可能会导致下一个查询执行失败。

# java - 通过 I/O 流接收一定数量的字节

> ID：11614222
> 
> 赞同：1
> 
> 时间：2012-07-23T14:09:20.600
> 
> 标签：java, android, io, bluetooth, palm

我正在创建一个 Android 应用程序，它通过蓝牙将我的设备连接到嵌入式芯片。我正在根据 Palm Pilot 上已经存在的程序（用 C 编写）对我的设计进行建模。我正在使用蓝牙聊天示例来运行我的代码，但已经卡住了。我对整个编码世界仍然很陌生，并且让自己有些困惑。

我想将以下代码从 C 转换为 Java....

```
SrmReceive(portId,&c,1,(t*5L*Sec)/1000L,&err) 
```

我在这里遇到的唯一真正问题是第三个参数。`1`代表，如`number of bytes to receive`手掌文档中所述，类型为`UInt32`。

蓝牙聊天示例中的代码具有以下读取数据的功能...

```
 public void run() {
                Log.i( TAG, "BEGIN mConnectedThread" );
                buffer = new byte[1024];
                int bytes;

                // Keep listening to the InputStream while connected
                while( true ) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read( buffer );

                    // Send the obtained bytes to the UI Activity
                    mHandler.obtainMessage( BtHelperHandler.MessageType.READ, bytes, buffer).sendToTarget();
                } catch ( IOException e ) {
                    Log.e( TAG, "disconnected", e );
                    sendErrorMessage( 1 );
                    break;
                }
            }
        } 
```

我想将`run()`方法​​更改为具有要读取的特定字节数的参数。我对该怎么做有点困惑。我刚在想...

```
public void run( int size ) {
    buffer = new byte[size];
    ...
} 
```

但这对我来说似乎不对，我觉得我混淆了我对字节的定义。听起来可能很愚蠢，但我对这些信息还不够自信。将 a 转换为 java 让我感到困惑`UInt32`，因为 java 没有等效类型。如果有人知道，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:23:50.420

没有理由感到困惑，您所做的是正确的。假设**mmInStream**是**InputStream**的一个实例；

```
byte[] buffer = new byte[1024];
int bytes = mmInStream.read(buffer); 
```

将读取最多 1024 个字节的可用内容，并返回它读取的任何字节数。这是数据流的一种低级方法，这很好，它只是意味着你必须知道如何处理这个字节数组，因为你已经有了它。

如果你经常阅读原语，你可能想看看**DataInputStream**，像这样使用它；

```
DataInputStream dat = new DataInputStream(mmInStream);
int x = dat.readInt(); 
```

将从您的流中读取 32 位数据（4 个字节），并将它们排列成 java int 原语。需要注意的是[字节顺序](http://en.wikipedia.org/wiki/Endianness)和有符号/无符号合并。如果遇到问题，可以使用 << 运算符将字节读入 32 位 int，依次添加每个字节，然后左移 8 位。

在您的情况下，我要做的就是在读取后查看**缓冲区**中的值，并弄清楚到底发送了什么，由于我上面给出的两个原因，目测流可能很重要。

# ruby-on-rails - rspec - 我怎样才能获得“待定”来获得我的文字，而不仅仅是“没有给出理由”

> ID：11614224
> 
> 赞同：5
> 
> 时间：2012-07-23T14:09:25.483
> 
> 标签：ruby-on-rails, ruby, testing, rspec, capybara

我有这个代码：

```
context "Visiting the users #index page." do
  before(:each) { visit users_path }
  subject { page }
  pending('iii') { should have_no_css('table#users') }      
  pending { should have content('You have reached this page due to a permiss 
```

离子错误') }

它会导致几个待处理，例如

```
Managing Users Given a practitioner logged in. Visiting the users #index page.
# No reason given
# ./spec/requests/role_users_spec.rb:78
Managing Users Given a practitioner logged in. Visiting the users #index page. 
# No reason given
# ./spec/requests/role_users_spec.rb:79 
```

我怎样才能让那些未决的有文字而不是“没有给出理由”

我已经尝试在单词pending 之后和块之前放置一些文本，但这没有帮助 - 它出现在行尾 - 但我仍然有所有“没有给出理由”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T14:22:30.107

`pending`本身就是一个方法，正常的用例是这样的：

```
 it "should say yo" do
    pending "that's right, yo"
    subject.yo!.should eq("yo!")
  end 
```

那将输出

```
Pending:
  Yo should say yo
    # that's right, yo
    # ./yo.rb:8 
```

所以，当你想使用简写形式时，比如

```
its(:yo!) {should eq("yo!") } 
```

然后标记为待处理你有几个选项：

```
xits(:you!) {should eq("yo!") }
pending(:you!) {should eq("yo!")} 
```

但是要通过消息获得待处理，您应该执行以下操作：

```
its(:yo!) {pending "waiting on client"; should eq("yo!") } 
```

这会给你输出

```
 Yo yo! 
    # waiting for client
    # ./yo.rb:16 
```

# android - Android UnsatisfiedLinkError 与 OpenCV 2.4.2

> ID：11614227
> 
> 赞同：14
> 
> 时间：2012-07-23T14:09:36.497
> 
> 标签：android, opencv, unsatisfiedlinkerror

只是想做一个简单的openCV android程序。[按照此处的说明](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html)下载并安装 OpenCV for Android ，并将 OpenCV 库 2.4.2 添加为我自己的 android 项目的库项目，如说明状态。

但是，当我编译标准的“Hello World Program”时，如下所示，如果我包含该`Mat mat = new Mat();`行，它会失败，否则会成功。

```
package com.example;

import org.opencv.core.Mat;

import android.app.Activity;
import android.os.Bundle;

public class HelloAndroidActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Mat mat = new Mat();
    }
} 
```

这是它打印出来的堆栈跟踪：

```
 07-23 09:59:43.835: E/AndroidRuntime(8222): FATAL EXCEPTION: main
07-23 09:59:43.835: E/AndroidRuntime(8222): java.lang.UnsatisfiedLinkError: n_Mat
07-23 09:59:43.835: E/AndroidRuntime(8222):     at org.opencv.core.Mat.n_Mat(Native Method)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at org.opencv.core.Mat.<init>(Mat.java:181)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at com.example.HelloAndroidActivity.onCreate(HelloAndroidActivity.java:15)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.app.Activity.performCreate(Activity.java:4538)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.os.Looper.loop(Looper.java:154)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at android.app.ActivityThread.main(ActivityThread.java:4977)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at java.lang.reflect.Method.invokeNative(Native Method)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at java.lang.reflect.Method.invoke(Method.java:511)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-23 09:59:43.835: E/AndroidRuntime(8222):     at dalvik.system.NativeStart.main(Native Method) 
```

需要注意的两件事：我没有直接在这段代码中使用任何本机内容（就像这里的其他一些问题一样），旧的 OpenCV 2.3.x 库在使用相同的方法之前工作得很好。两个 Android 项目具有相同的目标和受支持的 API 设置。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-23T14:26:10.077

弄清楚了。没有静态链接库。如果您改用此代码，它可以工作。

```
package com.example;

import org.opencv.android.BaseLoaderCallback;
import org.opencv.android.LoaderCallbackInterface;
import org.opencv.android.OpenCVLoader;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class HelloAndroidActivity extends Activity
{

    final String TAG = "Hello World";

private BaseLoaderCallback mOpenCVCallBack = new BaseLoaderCallback(this) {
@Override
public void onManagerConnected(int status) {
   switch (status) {
       case LoaderCallbackInterface.SUCCESS:
       {
      Log.i(TAG, "OpenCV loaded successfully");
      // Create and set View
      setContentView(R.layout.main);
       } break;
       default:
       {
      super.onManagerConnected(status);
       } break;
   }
    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    Log.i(TAG, "onCreate");
    super.onCreate(savedInstanceState);

    Log.i(TAG, "Trying to load OpenCV library");
    if (!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack))
    {
      Log.e(TAG, "Cannot connect to OpenCV Manager");
    }
}
} 
```

不过，不太喜欢这种“OpenCV Manager”的想法。使得用户必须在应用程序运行之前手动安装几个包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T14:28:40.893

解决方案是要么像@Jason 回答中那样使用 OpenCV 管理器。[这里的官方文档](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/android_dev_intro.html)也有详细的解释。

但就像@Jason 所说，“这样做是为了让用户必须在应用程序运行之前手动安装多个包”。虽然这是真的，但**OpenCV Manager**有一些优点，例如：

*   如果 OpenCV 更新，用户只需要更新管理器/库。使用管理器的应用程序可以保持不变。

*   您的应用 apk 大小会小很多：

    *   一个简单的 opencv 应用程序大约为每个应用程序约 400KB **+** OpenCV Manager 约 800KB **+**为您的设备架构编译的 OpenCV 库约 12MB。
    *   使用传统的静态链接，您设备中的**每个**opencv 应用程序将至少约为 25MB。
    *   当然，这些大小取决于您在应用程序中放置的东西的数量......

即便如此，如果您希望以传统方式（**静态链接**）部署您的应用程序，[您可以阅读此处的说明](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html?highlight=static%20initialization#application-development-with-static-initialization)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-27T15:18:16.903

```
 static{System.loadLibrary("opencv_java3"); } //the name of the .so file, without the 'lib' prefix 
```

您可以在活动的任何地方静态加载打开的 cv 库。在 jniLibs 文件夹中搜索 .so 文件并将其复制/粘贴为“loadLibrary”方法的参数，不带 lib 前缀。

# c++ - 如何在 XAML UI 的屏幕上呈现 IWICBitmap 和 C++ 中的代码？

> ID：11614230
> 
> 赞同：1
> 
> 时间：2012-07-23T14:09:43.393
> 
> 标签：c++, windows-8, microsoft-metro, imaging

我正在用 C++ 为 Windows 8 编写 Metro 风格的应用程序。在那，我正在从我的代码中的图像文件创建一个 IWICBitmap 实例。我将自己处理这个 IWICBitmap 上的像素。

现在如何在矩形等 XAML 元素上显示此图像？代码片段将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:46:17.257

我找到了解决方案...

1.  创建一个相同大小的 WriteableBitmap。
2.  从 IWICBitmap 获取像素缓冲区指针。
3.  将像素从 IWICBitmap 复制到 WriteableBitmap。

不过，您需要注意像素格式。每次修改 IWICBitmap 中的内容时，都必须将内容复制到 WriteableBitmap。我想 SurfaceImage 会更好用。

# c++ - 如何修复我的 C++ 包含的 QtonPi？

> ID：11614236
> 
> 赞同：1
> 
> 时间：2012-07-23T14:10:01.270
> 
> 标签：c++, linux, qt, qt5, qtonpi

我正在尝试将我的 windows/mac/linux 应用程序交叉编译到 Qt On Pi 0.2，为此我有一个构建环境设置，并试图通过它的配置以我的方式工作。

但是我在哪里：

```
#include <QApplication>
#include <QDebug> 
```

它告诉我它找不到它，除非我将其更改为：

```
#include <QtWidgets/QApplication>
#include <QtCore/QDebug> 
```

我真的不想改变我所有的包含，因为这是一个很大的应用程序。我在我的环境设置中缺少什么来解决这个问题？

这是一个 ubuntu 12.04 32 位设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:26:47.573

好的，Qt On Pi 邮件列表中的某个人指出我需要包括：

```
QT += widgets 
```

在我的 qmake 项目文件中。

# blackberry - 黑莓的 Phonegap-plugin-facebook-connect

> ID：11614248
> 
> 赞同：0
> 
> 时间：2012-07-23T14:10:44.233
> 
> 标签：blackberry, phonegap-plugins

是否有任何用于黑莓的 facebook-connect 的 phonegap-plugin 或任何其他可以使用 Phonegap 在黑莓中完成 facebook 共享的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T04:06:28.997

您需要为黑莓获取本机 facebook jar，可在 developer.facebook 上获得。获取应用程序 ID 后，您将在 javascript 中处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T06:40:48.653

目前没有可用的 Fb 插件 bor blkbery 检查可用插件[链接](https://github.com/phonegap/phonegap-plugins/tree/master/BlackBerry)。 **但是您可以**使用 inAppBrowser 实现 fb 共享，只需在 childBrowser (InappBrowser) 上打开 facebook 共享 url，您就可以在 facebook 上共享。
例如：`http://www.facebook.com/sharer.php?u=URL or anything`尝试在子浏览器上打开此网址，然后用户可以登录并进行分享。

# c# - 所有文本完全丢失或呈现为框

> ID：11614250
> 
> 赞同：3
> 
> 时间：2012-07-23T14:10:51.497
> 
> 标签：c#, wpf

我有一个非常简单的 WPF 应用程序，用于将输入格式化为通用格式。它仅由一堆文本框和几个按钮组成。在几乎所有运行该应用程序的系统上，它们都没有问题。但随着时间的推移，他们中的一些人遇到了一些奇怪的事情。

在一台机器上，所有文本都消失了。没有标签，键入时什么也没有显示，选项卡和按钮没有文本（并且都是最小宽度，就好像它们根本没有内容一样。）没有多少卸载/重新安装或其他任何东西似乎可以解决这个问题系统。

在另一个出现问题的系统上，每个字符都显示为一个小方块。卸载/重新安装似乎可以解决此问题。

关于可能导致这种情况的任何想法？正如我所说，我并没有对这个程序做任何花哨的事情。我没有调整渲染甚至控件的模板。这都是 WPF 101 简单的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:48:49.463

这确实是某种字体缓存损坏。由于字体缓存喜欢隐藏，因此解决起来有点棘手。解决方案如下：

1.  开始>运行>services.msc。停止服务 Windows Presentation Foundation Font Cache 3.0.0.0。

2.  手动进入`C:\Documents and Settings\LocalService\Local Settings\Application Data`Windows XP 或`C:\Windows\ServiceProfiles\LocalService\AppData\Local`Windows 7 或更高版本（即使显示隐藏项目，此文件夹也不会显示在资源管理器中，因此必须手动完成。）

3.  删除 FontCache3.0.0.0 并重启服务。重新启动 WPF 应用程序，它运行良好。

# amazon-ec2 - 从私有 EBS AMI 启动实例后“服务器拒绝我们的密钥”

> ID：11614254
> 
> 赞同：21
> 
> 时间：2012-07-23T14:11:10.233
> 
> 标签：amazon-ec2, amazon-web-services, centos, amazon-ami, key-pair

我创建了自己的 EBS AMI，与另一个 AWS 账户共享，使用新密钥对基于此映像启动了新实例，现在当我尝试连接到这个新实例时出现错误：“服务器拒绝我们的密钥” .

这就是我所做的（一步一步）：

1.  在我的个人帐户中配置了新的 CentOS 6.3 服务器（使用我的个人密钥对）
2.  已创建该服务器的 EBS AMI 映像
3.  与我客户的帐户分享了这张图片
4.  基于此共享图像 + 新密钥对在我的客户帐户中启动了新实例
5.  新启动的实例不想采用新的密钥对。经过一些测试，我认为它接受了我的个人密钥对。

如何从我的图像中创建新实例以接受新的密钥对？我什至尝试在原始图像中删除“.ssh/authorized_keys”文件，在没有公钥的情况下基于该图像启动新实例，但仍然没有成功。

请告知如何创建不会附加到旧密钥对的图像

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-08T16:40:40.780

我对该错误消息有类似的问题，这就是我修复它的方法。希望这对您或其他被卡住并在这里找到方式的人有所帮助：

1.  在 AWS 控制台中确保您的实例健康且正在运行
2.  检查您是否使用了正确的公有 DNS 地址，在您单击实例时列出
3.  从左侧选择安全组，然后单击要使用的安全组
4.  单击入站选项卡
5.  从 Create a new rule: 对话框中选择 SSH
6.  在源中输入您的 IP 地址和 CIDR 值。如果只是您的网络上没有 NAT，只需使用 32 作为您的 CIDR（例如 ?.?.?.?/32）
7.  单击添加规则
8.  单击应用规则更改
9.  右键单击您的实例并选择创建映像 (EBS AMI)
10.  在创建映像向导中为其指定一个映像名称，然后单击创建
11.  片刻之后，从 AWS 控制台的左侧导航栏中选择 AMI
12.  右键单击新的 AMI，然后单击启动实例
13.  在请求实例向导上单击继续，直到您必须创建密钥对
14.  选择一个密钥对并记下它（注意：如果您还没有此密钥对的 .pem 文件，则需要通过选择左侧导航栏上的密钥对、创建密钥对等来生成一个新文件。获取 .pem 文件）
15.  使用您为 IP 地址创建的规则选择安全组（CIDR 为 32 - 无子网掩码）
16.  单击继续，然后在下一个屏幕上单击启动
17.  返回 Instances 视图并等待您的 Instance 完全初始化并运行良好
18.  打开 PuttyGEN
19.  点击工具栏中的转换，然后导入密钥
20.  在文件浏览器中导航到您的 .pem 密钥并打开它
21.  从参数框中选择 SSH-1 (RSA)
22.  将您的密钥对名称放在密钥注释框中（仅用于良好的内务管理）
23.  单击保存私钥并将 .ppk 文件保存在文件系统的某个位置
24.  打开腻子
25.  在主机名框中输入您的 EC2 实例的公有 DNS
26.  输入端口 22
27.  从 Connection Type 框中勾选 SSH 单选按钮
28.  从左侧导航栏中的连接树中单击 SSH
29.  点击授权
30.  单击身份验证参数框中的浏览，然后打开您的 .ppk 文件
31.  单击左侧导航栏中的会话
32.  在 Saved Sessions 文本框中输入此连接的名称，然后单击 Save（这样您就不必每次都通过 putty 连接设置，只需双击您保存的连接 - 对于那些不知道的人）
33.  点击打开
34.  当提示输入登录名时，您可能会使用“ec2-user”或“ubuntu”（提示：使用“root”，您可能会收到一条消息，告诉您应该使用哪个用户名！）
35.  无需密码，.ppk 文件将对您进行身份验证
36.  希望您现在已连接到 EC-2 实例并且一切顺利！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-09T17:17:01.990

我在使用新的 SUSE 实例时遇到了这个问题。我终于能够使用用户“root”进行连接。它一直拒绝 ec2-user。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-03-07T19:28:01.547

这意味着您没有使用正确的用户名登录您的 ec2 实例。这是您可以在 putty 中用于连接到 ec2 实例的用户列表 对于 Amazon Linux AMI，用户名为**ec2-user**。对于 RHEL5 AMI，用户名是 root 或**ec2-user**。对于 Ubuntu AMI，用户名为**ubuntu**。对于 Fedora AMI，用户名是**fedora**或**ec2-user**。对于 SUSE Linux，用户名是**root**或**ec2-user**。否则，如果 ec2-user 和 root 不起作用，请咨询 AMI 提供商。

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html#TroubleshootingInstancesConnectingPuTTY](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html#TroubleshootingInstancesConnectingPuTTY)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T17:51:32.797

由于您的 AMI 源自社区 AMI 而不是官方公共 AMI，因此可能尚未设置为在实例启动时复制 ssh 密钥，或者它使用不同的机制来执行此操作。

我的理解是，要在启动时复制 ssh 密钥，必须在实例本身内部运行一些 shell 脚本，如此处简要描述[的](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/building-shared-amis.html#public-amis-install-credentials)。

[AMI 描述页面](https://aws.amazon.com/amis/centos-6-3-ebs-backed)提到它已经“启用了 cloud-init”，所以也许有一种方法可以通过 CloudInit 来实现。[请参阅此处](https://help.ubuntu.com/community/CloudInit)的文档。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-27T09:35:29.880

我遇到了这个问题，结果我输入的是 ec2_user，而它本来应该是 ec2-user

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-08T10:06:00.737

默认情况下，亚马逊会将新密钥附加到现有密钥中。我们可以通过在其他活动实例上安装驱动器来解决它，并从文件 .ssh/authorized_keys 中删除内容并添加新密钥的 pem 密钥文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-25T17:02:53.900

在我的情况下，我使用的是 Elastic Beanstalk，并且在启动它之前没有将我的密钥对分配给我的配置。要解决这个问题：

1.  在弹性豆茎中转到您的应用程序
2.  导航到配置
3.  滚动到安全并选择编辑
4.  将您的密钥对添加到实例
5.  单击保存并在应用配置后再次尝试连接

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-16T11:46:48.613

我通过选择用户作为 AWS ubuntu machin 的 ubuntu 解决了我的问题。因此，请验证正确的用户帐户和机器类型。

请参阅以下链接： [https ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-28T11:20:02.227

我也只是在更新我的案例作为答案。我曾经使用主机名`ec2-38-239-22-12.us-east-2.compute.amazonaws.com`（公共 IPv4 DNS）与腻子中保存的部分进行连接。昨天，在今天早上启动实例（aws）之后，我停止了实例并在今天早上尝试连接时开始面临这个问题。

**解决方案：** 公共 IPv4 DNS 记录 ( `ec2-38-239-22-12.us-east-2.compute.amazonaws.com`) 在重新启动后更改。登录到 AWS 控制台并使用新记录更新腻子部分。这解决了问题！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-24T09:03:30.950

**显示Server Refused our key**可能只是一个原因。

那就是：服务器的**密钥对**和**用户名**组合不正确，我遇到过很多次。

# sql-server - 子字符串中的 SQL Server 更新

> ID：11614258
> 
> 赞同：0
> 
> 时间：2012-07-23T14:11:29.717
> 
> 标签：sql-server

我`varbinary`在数据库中有一个列。包含十六进制数据的长范围数据。

我`substring`用来选择和显示数据。

```
SELECT TOP 100
    CHAR_KEY AS charid,
    USER_KEY AS userid,
    CONVERT(VARCHAR,substring(char_data, 9, 16)) AS name,
    CONVERT(INT,cast(reverse(substring(char_data, 7, 2)) as BINARY(2))) AS level,
    CONVERT(INT,substring(char_data, 25, 1)) AS type,
    CONVERT(INT, substring(char_data, 261, 1)) AS permission,
    guild_data.guild_name
FROM CHAR_DATA0
    inner join guild_data 
    on guild_key = 
        CONVERT(INT, 
                cast(reverse(substring(char_data, 33, 4)) as BINARY(4)))
WHERE CONVERT(INT, substring(char_data, 261, 1))=0x00 
ORDER BY level DESC 
```

现在我想`UPDATE`，有什么想法吗？非常感谢。我是新来的。我试图寻找`substring`更新，但没有在网上找到任何工作示例。

谢谢。

- - -编辑 - - -

我试过这个：

```
UPDATE
CHAR_TDATA0
SET char_data = stuff(cast(char_data as BINARY(2000)), 9, 16, CONVERT(BINARY(16), 'testnamezs'))
WHERE CHAR_KEY=4 
```

但没有运气。有一些语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T11:29:40.653

尝试先将内容保存在 SQL Server 变量中，然后计算然后更新。
希望这可以帮助。

```
DECLARE @lc_char_data as varchar(max)
SET @lc_char_data = stuff(cast(char_data as BINARY(2000)), 9, 16, CONVERT(BINARY(16), 'testnamezs'))
UPDATE
CHAR_TDATA0
SET char_data = @lc_char_data
WHERE CHAR_KEY=4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:43:58.170

我无法理解为什么要以这种方式保存数据，而不是在数据库中为各种数据使用单独的列。

无论如何，我认为您不能以这种方式更新部分数据。我认为您需要做的是选择一行的所有数据，更新您要更改的部分，然后将更新的十六进制数据字符串作为一个整体重新插入。

就像是：

```
UPDATE
CHAR_TDATA0
SET char_data = "your already hex-encoded string of data here..."
WHERE CHAR_KEY=4 
```

# if-statement - if else 施工

> ID：11614264
> 
> 赞同：5
> 
> 时间：2012-07-23T14:11:39.330
> 
> 标签：if-statement, scheme

我正在尝试解决一个基本功能。但是我的第二个 if 语句和 else.Ff 出现错误，你可以给我帮助这里是代码。

```
(define (equation x)
  (if(> x 2) (+(-(* x x) x) 4) ) 
  (if (and (> x 1 ) (= x 1))  (and (< x 2) (= x 2)) (/ 1 x))
  (else 0)
  ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:35:29.387

您的代码中有几个错误。并且您应该`cond`在处理多个条件时使用 a（将其视为一系列 IF/ELSE IF/.../ELSE 语句）。

请注意，表达式`(and (> x 1) (= x 1))`永远*不会*为真，因为`x`大于或等于`1`，两个条件*永远不会*同时为真。您可能的意思是`(or (> x 1) (= x 1))`，但即使这样，表达式也可以更简洁地写成`(>= x 1)`. 相同的考虑适用于条件`(and (< x 2) (= x 2))`。

我相信这就是您的目标：

```
(define (equation x)
  (cond ((> x 2)
         (+ (- (* x x) x) 4))
        ((and (>= x 1) (<= x 2))
         (/ 1 x))
        (else 0))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T17:10:26.247

if 条件的格式为`(if (condition) (consequent) (alternate))`. `else`不能与 一起使用`if`。这是不使用 cond/else 的相同代码

```
(define (equation x)
  (if (> x 2) 
      (+ (- (* x x) x) 4)
      (if (and (or (> x 1) (= x 1)) (or (< x 2) (= x 2)))
          (/ 1 x)
          0))) 
```

或者，

```
(define (equation2 x)
  (if (< x 1) 
      0
      (if (> x 2)
          (+ (- (* x x) x) 4)
          (/ 1 x)))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:15:34.513

和 (> x 1 ) (= x 1) 总是假的

并且 (< x 2) (= x 2) 总是错误的

没有操作员将工作与第二个 if 连接起来

# java - 请求跟踪记录器

> ID：11614268
> 
> 赞同：3
> 
> 时间：2012-07-23T14:11:44.420
> 
> 标签：java, logging, log4j, mdc

我被困在跟踪请求上。获取组件名称和时间很容易（使用面向方面的编程）但我没有请求的ID（requestID）

我需要这样的日志：

RequestID 组件名称 时间

*   Add547 C4 5s
*   搜索547 C1 5s
*   搜索778 C1 2s
*   Add547 C1 15s
*   搜索778 C4 20s
*   搜索547 C5 10s
*   搜索547 C3 2s
*   搜索547 C2 1s
*   搜索778 C2 12s
*   搜索547 C6 55s
*   搜索778 C6 1s
*   Add547 C2 6s
*   Add547 C3 46s

为了轻松接收这样的文件，这正是我正在寻找的：

RequestID 组件名称 时间

*   搜索547 C1 5s
*   搜索547 C5 10s
*   搜索547 C3 2s
*   搜索547 C2 1s
*   搜索547 C6 55s

RequestID 组件名称 时间

*   搜索778 C1 2s
*   搜索778 C4 20s
*   搜索778 C2 12s
*   搜索778 C6 1s

RequestID 组件名称 时间

*   Add547 C4 5s
*   Add547 C1 15s
*   Add547 C2 6s
*   Add547 C3 46s

我所有的研究都引导我将 log4j 与 MDC 和 SiftingAppender 一起使用，但我不确定它是否可以在整个请求中提供唯一 ID，因为它经过了很多类、子系统和线程。

你能告诉我是否可以在不改变原始系统的情况下完成？（它应该是一个外部组件）。你知道有什么教程可以说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T14:44:19.573

“MDC 是按线程管理的。” [http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html)

因此 MDC 将自动跨类和子系统工作，但您需要手动跨线程复制它。

# openid - LightOpenID 在默认设置下给出错误，并在有效登录时返回 false

> ID：11614269
> 
> 赞同：0
> 
> 时间：2012-07-23T14:11:49.327
> 
> 标签：openid, lightopenid

使用[LightOpenID](http://gitorious.org/lightopenid)类，我试图将 Google 的登录信息与我的网站集成。我正在使用默认代码：

```
<?php
require 'includes/openid.php';

try {
    if(!isset($_GET['openid_mode'])) {
        if(isset($_GET['login'])) {
            $openid = new LightOpenID;
            $openid->identity = 'https://www.google.com/accounts/o8/id';
            header('Location: ' . $openid->authUrl());
        }
?>
<form action="?login" method="post">
    <button>Login with Google</button>
</form>
<?php
    } elseif($_GET['openid_mode'] == 'cancel') {
        echo 'User has canceled authentication!';
    } else {
        $openid = new LightOpenID;
        echo 'User ' . ($openid->validate() ? $openid->identity . ' has ' : 'has not ') . 'logged in.';
    }
} catch(ErrorException $e) {
    echo $e->getMessage();
}
echo '<pre>'.print_r($openid,true).'</pre>';
?> 
```

最初，这告诉我我缺少构造方法的参数 1，迫使我将该`new LightOpenID`方法称为`new LightOpenID($host)`. 但是由于我已经更改了它并尝试登录，所以当我恢复代码时它没有给出那个错误只是去抓住错误......

无论如何，撇开这一点不谈，在我添加主机后，我被带到了谷歌页面，它询问我是否想用我的谷歌帐户登录该网站。我按下了登录按钮，然后被收回，却被告知我没有登录。

```
User has not logged in.

LightOpenID Object
(
    [returnUrl] => myReturnURL
    [required] => Array
        (
        )

    [optional] => Array
        (
        )

    [verify_peer] => 
    [capath] => 
    [cainfo] => 
    [data] => Array
        (
            [login] => 
            [openid_ns] => http://specs.openid.net/auth/2.0
            [openid_mode] => id_res
            [openid_op_endpoint] => https://www.google.com/accounts/o8/ud
            [openid_response_nonce] => 2012-07-23T14:06:24ZQwlS1zWFRdvg6A
            [openid_return_to] => myReturnURL
            [openid_assoc_handle] => AMlYA9WMwp_rTkH3swNLEF5UASFvhyOR-kqVSXGe7cvXe7ws5z8HHWUu
            [openid_signed] => op_endpoint,claimed_id,identity,return_to,response_nonce,assoc_handle
            [openid_sig] => NtOEY8dUM1Hpt2tTR9x0RdN5o1c=
            [openid_identity] => https://www.google.com/accounts/o8/id?id=AItOawkXNCi5qq-3Vj_esgSQAwmEN_nVIC8BHAQ
            [openid_claimed_id] => https://www.google.com/accounts/o8/id?id=AItOawkXNCi5qq-3Vj_esgSQAwmEN_nVIC8BHAQ
        )

    [identity:LightOpenID:private] => 
    [claimed_id:LightOpenID:private] => https://www.google.com/accounts/o8/id?id=AItOawkXNCi5qq-3Vj_esgSQAwmEN_nVIC8BHAQ
    [server:protected] => https://www.google.com/accounts/o8/ud
    [version:protected] => 2
    [trustRoot:protected] => mySite
    [aliases:protected] => 
    [identifier_select:protected] => 
    [ax:protected] => 1
    [sreg:protected] => 
    [setup_url:protected] => 
    [headers:protected] => Array
        (
            [cache-control] => no-cache, no-store, max-age=0, must-revalidate
            [pragma] => no-cache
            [expires] => Fri, 01 Jan 1990 00:00:00 GMT
            [date] => Mon, 23 Jul 2012 14:06:26 GMT
            [content-type] => text/plain; charset=UTF-8
            [x-content-type-options] => nosniff
            [x-frame-options] => SAMEORIGIN
            [x-xss-protection] => 1; mode=block
            [server] => GSE
        )

) 
```

我已经登录了谷歌，所以谷歌页面没有要求我登录，只是为了验证我想使用我的谷歌帐户登录我自己的网站。有没有人看到它没有说我已登录的原因？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:11:50.113

使用[最新版本](https://gitorious.org/lightopenid/lightopenid/blobs/master/openid.php)，它应该可以工作。

请记住，较新版本的库在构造函数中需要一个参数：

```
$openid = new LightOpenId('www.domain.com'); 
```

# ms-access - 将 COM dll 安装到 GAC 时 WIX 安装失败

> ID：11614270
> 
> 赞同：0
> 
> 时间：2012-07-23T14:11:50.137
> 
> 标签：ms-access, com, wix

我正在创建一个安装程序，它将为我们的 Access 应用程序使用 .NET COM 组件。当我将 COM dll 安装到 INSTALLDIR 时，它工作正常。我把它留给 WIX 通过运行 heat 来获取 dll 和 tlb 来进行 COM 注册。但是现在我们想将dll安装到GAC，而INSTALLDIR中只会安装tlb文件。我们的目标是我们的不同版本的软件（可以安装在同一台机器上）可以使用相同的COM版本，卸载一个版本的软件后，其他版本的软件仍然可以使用（我们无法实现）将dll安装到INSTALLDIR中，对吗？如果我的方法不对，请纠正我）。

问题来了：为了将它安装到 GAC 中，我想我应该在 dll 文件声明中添加一个 Assembly=".net" 。但是，在安装过程中，我收到此错误：“错误处理程序中遇到问题：自动化错误系统找不到指定的文件。” 当我在提交阶段调用一个 COM 方法（我们创建的访问引用）时，即在 COM 注册之后。显然我的 COM 没有成功注册。但我真的不知道为什么会这样。正如我所提到的，我所做的唯一更改是添加了这个 Assembly=".net"。在此之前，COM注册是OK的，我调用成功了。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:44:09.183

这将不起作用，因为 GAC 用于基于 .net 的 dll，并且不接受 COM dll。要亲自查看，尝试将 dll 放入文件夹 C:\Windows\assembly，您将收到一条错误消息，指出它没有程序集清单。

您应该做的是使该特定 COM dll 的所有安装程序版本的组件 GUID 保持相同。这样，Windows 安装程序将记录哪些应用程序正在使用它，并且只有在删除最后一个应用程序后才卸载它。我也会把它放到它自己的安装文件夹中，否则当你卸载第一个安装的版本时，你会得到一个应用程序安装文件夹。

另一种选择是将其分离到自己的安装程序中，并使用引导程序将它们安装在一起。

# .net - 压缩电子邮件附件的 MemoryStream

> ID：11614271
> 
> 赞同：3
> 
> 时间：2012-07-23T14:11:51.720
> 
> 标签：.net, zip, attachment, deflatestream

我正在尝试压缩 XML 树并将其用作电子邮件附件。发送带有附件的电子邮件成功，但创建的 zip 文件总是损坏 - 它不是有效的 zip 文件，但包含二进制数据。

问题重现如下，具体见`BuildAttachment()`：

```
static void Main(string[] args)
{
    try
    {
        var report = new XElement("Report",
            new XElement("Product",
                new XElement("ID", "10000001"),
                new XElement("Name", "abcdefghijklm"),
                new XElement("Group", "nopqrstuvwxyz")
            )
        );
        var mailMessage = BuildMessage(report);
        EmailMessage(mailMessage);
        Thread.Sleep(10000);
    }
    catch (Exception e) { Console.WriteLine(e.Message); }
}
static MailMessage BuildMessage(XElement report)
{
    string from = "email1@address.com";
    string to = "email2@address.com";
    var message = new MailMessage(from, to, "Subject text", "Body text");

    var attachment = BuildAttachment(report);
    message.Attachments.Add(attachment);

    return message;
}
static Attachment BuildAttachment(XElement report)
{
    var inStream = new MemoryStream();
    report.Save(inStream);
    inStream.Position = 0;

    var outStream = new MemoryStream();
    var compress = new DeflateStream(outStream, CompressionMode.Compress);
    inStream.CopyTo(compress);

    outStream.Position = 0;
    return new Attachment(outStream, "report.zip", "application/zip");
}
static void EmailMessage(MailMessage message)
{
    var smtpClient = new SmtpClient("127.0.0.1");
    smtpClient.SendCompleted += SendCompletedCallback;
    smtpClient.SendAsync(message, null);
}
static void SendCompletedCallback(object sender, AsyncCompletedEventArgs e)
{
    if (e.Error != null)
        Console.WriteLine(e.Error.ToString());
} 
```

将问题放在上下文中：它是 Windows 服务应用程序的一部分，所以我不想在磁盘上创建文件，并且电子邮件还包含 xslt 转换的 xml 树的备用视图，所以我不想要完全不同解决方案。

任何建议为什么 zip 文件已损坏？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-03T13:46:12.517

我知道这是一个老问题，但是当我搜索相同的问题时它出现了。

这是我使用[System.IO.Compression.ZipArchive 添加压缩（zip）附件的解决方案（需要 .NET 4.5 或更高版本）](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive(v=vs.110).aspx) [基于 acraig5075 的答案]：

```
byte[] report = GetSomeReportAsByteArray();
string fileName = "file.txt";

using (MemoryStream memoryStream = new MemoryStream())
{
    using (ZipArchive zipArchive = new ZipArchive(memoryStream, ZipArchiveMode.Update))
    {
        ZipArchiveEntry zipArchiveEntry = zipArchive.CreateEntry(fileName);
        using (StreamWriter streamWriter = new StreamWriter(zipArchiveEntry.Open()))
        {
            streamWriter.Write(Encoding.Default.GetString(report));
        }
    }

    MemoryStream attachmentStream = new MemoryStream(memoryStream.ToArray());

    Attachment attachment = new Attachment(attachmentStream, fileName + ".zip", MediaTypeNames.Application.Zip);
    mail.Attachments.Add(attachment);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:48:35.847

为了将来参考，`GZipStream`在接受的答案中建议的替代方法是通过如下更改上述代码来生成 .gz 存档。

```
static Attachment BuildAttachment(XElement report)
{
    var inStream = new MemoryStream();
    report.Save(inStream);
    inStream.Position = 0;

    var outStream = new MemoryStream();
    using (var compress = new GZipStream(outStream, CompressionMode.Compress))
    {
        inStream.CopyTo(compress);
        compress.Close();
    }

    var ms = new MemoryStream(outStream.ToArray());
    Attachment attachment = new Attachment(ms, "report.xml.gz", "application/gzip");
    return attachment;
} 
```

`using`块和`ToArray()`调用是必需的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T14:17:02.810

您没有创建有效的 zip 文件，您只是创建了一个压缩流并将其写入具有`*.zip`扩展名的文件。您应该使用 .NET zip 库而不是`DeflateStream`.

您可以使用[DotNetZip Library 之](http://dotnetzip.codeplex.com/)类的东西：

> DotNetZip 是一个易于使用、快速、免费的类库和工具集，用于处理 zip 文件或文件夹。压缩和解压缩很容易：使用 DotNetZip，用 VB、C#（任何 .NET 语言）编写的 .NET 应用程序可以轻松创建、读取、提取或更新 zip 文件。对于 Mono 或 MS .NET。

如果您有限制并且无法使用外部库，您可以尝试使用`GZipStream`并添加带有扩展名的附件，该扩展`*.gz`名将由常见的压缩工具支持。

作为未来参考的有用信息，.NET 4.5*最终*[`ZipArchive`](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive%28VS.110%29.aspx)将通过该类引入对 zip 归档的本机支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-06T09:31:41.007

感谢“Neils.R”的回答，我创建了一个静态 C# 函数来管理附件并在大于 1Mb 时将它们压缩。希望这对任何人都有帮助。

```
public static Attachment CreateAttachment(string fileNameAndPath, bool zipIfTooLarge = true, int bytes = 1 << 20)
{
    if (!zipIfTooLarge)
    {
        return new Attachment(fileNameAndPath);
    }

    var fileInfo = new FileInfo(fileNameAndPath);
    // Less than 1Mb just attach as is.
    if (fileInfo.Length < bytes)
    {
        var attachment = new Attachment(fileNameAndPath);

        return attachment;
    }

    byte[] fileBytes = File.ReadAllBytes(fileNameAndPath);

    using (var memoryStream = new MemoryStream())
    {
        string fileName = Path.GetFileName(fileNameAndPath);

        using (var zipArchive = new ZipArchive(memoryStream, ZipArchiveMode.Create))
        {
            ZipArchiveEntry zipArchiveEntry = zipArchive.CreateEntry(fileName, CompressionLevel.Optimal);

            using (var streamWriter = new StreamWriter(zipArchiveEntry.Open()))
            {
                streamWriter.Write(Encoding.Default.GetString(fileBytes));
            }
        }

        var attachmentStream = new MemoryStream(memoryStream.ToArray());
        string zipname = $"{Path.GetFileNameWithoutExtension(fileName)}.zip";
        var attachment = new Attachment(attachmentStream, zipname, MediaTypeNames.Application.Zip);

        return attachment;
    }
} 
```

# php - 在 php 执行之前加载 JQUery Mobile

> ID：11614274
> 
> 赞同：0
> 
> 时间：2012-07-23T14:11:59.957
> 
> 标签：php, jquery, jquery-mobile

我正在开发一个 JQuery 移动网络应用程序，执行 $('#someId').replaceWith(php var); 后我遇到了一些格式问题

我认为，问题在于，由于这是在加载 JQuery Mobile 库之前执行的，所以当我替换时，我得到了一个糟糕的格式。

任何人都可以考虑一些可以提供帮助的东西吗？

非常感谢你！

更新：

我对 PHP 很陌生。我想要做的是在 div html 代码中有几个变量，当我单击任何按钮时，我不必刷新页面，只需刷新 div。这些数据来自外部数据库，所以我需要用 php 来做......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:15:05.573

在执行服务器端代码 (PHP) 之前，您将永远无法加载客户端库 (jQuery mobile)。给我们一些关于你想要做什么的代码，我相信我们可以更好地帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:21:28.787

简单地说，您的所有浏览器代码都是由服务器端脚本构建的，并在服务器端脚本完成后立即进行解释。要做你想做的事，你需要利用一些 ajax 动作......

# iphone - 使用 UIWebView 拨打电话在 iOS6 中不起作用

> ID：11614278
> 
> 赞同：2
> 
> 时间：2012-07-23T14:12:16.060
> 
> 标签：iphone, objective-c, ipad, uiwebview, ios6

在**iOS6 中**，我无法从`UIWebView`.

我使用`UIWebView`是因为我的应用程序需要在用户关闭呼叫后返回，这是不可能使用`UIApplication`方法的。

这是原始代码：

```
NSURL *telURL = [NSURL URLWithString:@"tel://%@", escapedPhoneNumber];
_PhoneCallWebView = [[UIWebView alloc] init];
[_PhoneCallWebView loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

为什么iOS不会开始通话？

### 注意：在所有其他 iOS 中，从**3.1**到**<6**都可以正常工作。

使用`[UIApplication sharedApplication] openURL:telURL]`它可以工作，但应用程序在通话后仍然关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:18:35.473

你确定你应该通过一个路由电话`UIWebView`吗？

我对这类事情没有经验，但也许您可以尝试使用该`NSURLConnection`课程？它有一个实例方法`-initWithRequest:delegate:startImmediately:`可能适用于您的情况。

# ios - 从头开始重写 iOS 应用程序“无法更改应用程序的可执行权限。”

> ID：11614285
> 
> 赞同：10
> 
> 时间：2012-07-23T14:12:51.590
> 
> 标签：ios, xcode

我在商店中有一个应用程序，我想开始“从头开始”重写整个应用程序。当我尝试在已包含旧应用程序的设备（iPhone 4）上构建和执行新应用程序时，我收到错误消息：“无法更改应用程序的可执行权限。”

如果我在模拟器上运行新的可执行文件或删除设备上的当前应用程序并重新安装，则新的可执行文件可以正常工作。我担心的是人们无法升级到这个最新版本的应用程序。

您如何处理这种情况？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T18:36:30.030

我相信这个问题与应用程序的配置有关。

您设备上从 App Store 下载的应用程序版本已使用分发配置文件进行签名。当您从 Xcode 构建并尝试安装它时，您正在使用开发配置文件并尝试附加调试器。

根据我的经验，如果您使用开发配置文件从 Xcode 构建并尝试通过 App Store 应用程序安装，则无法覆盖使用分发配置文件签名的 App Store 应用程序。

尝试使用分发配置文件从 Xcode 构建并且不附加调试器。

此外，人们在 App Store 中升级他们的应用程序时永远不会遇到这种错误，因为两个配置文件都必须是分发配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T23:05:45.480

我也遇到了这个问题。我做错的是将 Xcode PROJECT 文件命名为与旧文件不同的名称。将其命名为与旧项目相同的名称修复了错误并且一切正常。我还保持 bundleID 和显示名称相同。为我修复错误的关键是 .xcodeproj 名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:09:22.720

检查捆绑标识符，旧应用程序和新应用程序应具有相同的标识符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T19:38:22.307

对于通过 App Store 模拟升级，请执行以下练习

1.  使用与旧代码相同的凭据准备新代码的代码签名二进制 (.ipa)（相同的包 ID、开发配置文件、版本号可以不同）

2.  现在通过 iTunes 在您的设备中同步加载二进制文件。它将在现有应用程序之上升级。

3.  如果一切顺利，那么您的应用程序应该是好的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:02:57.620

清理项目，并从设备中删除以前的构建

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T19:08:25.490

观看此视频，您必须先从测试设备上卸载该应用程序
[http://www.youtube.com/watch?v=Q-zrXdSEvJc](http://www.youtube.com/watch?v=Q-zrXdSEvJc)

# c# - 关闭所有浏览器窗口？

> ID：11614292
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:21.237
> 
> 标签：c#, windows, browser

我正在开发一个 C# 应用程序（自动机器人）来打开许多 Internet Explorer 窗口并同时访问不同的站点。

它过去几乎每 10 秒打开一个窗口，所以，几分钟后，我只有数百个窗口，当然，这会大大降低我的电脑速度......

所以，我很想知道是否有某种方法可以直接从我的应用程序中关闭所有活动窗口，以便我可以每隔几分钟在线程或类似的东西中运行该代码。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:50:23.910

使用该`InternetExplorer`对象打开每个窗口并在完成后[调用该`Quit`方法](http://msdn.microsoft.com/library/aa752127.aspx)。这具有仅关闭您打开的窗口的额外好处（这样用户或其他应用程序打开的窗口不受影响）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:21:05.473

我建议使用像[WatiN](http://watin.org/)这样的库来执行自动化，这将允许您自动化任何主流浏览器（包括 IE）。

使用 Watin，您可以像这样打开和关闭窗口（非常简单的示例）：

```
screen = new Screen("http://www.google.com")
screen.ie.ForceClose(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T14:26:05.233

正如@cdhowie 提到的，您可以循环浏览[正在运行的进程列表，](http://www.howtogeek.com/howto/programming/get-a-list-of-running-processes-in-c/)检查 iexplore 并在计时器内终止该进程。如果您想更深入地研究哪些网站正在被终止（也许您想创建一个日志以供以后使用），您可以在终止过程中[检索网站信息。](https://stackoverflow.com/questions/5317642/retrieve-current-url-from-c-sharp-windows-form)

# linux - 如何同时设置友好度和过程亲和力？

> ID：11614294
> 
> 赞同：8
> 
> 时间：2012-07-23T14:13:27.873
> 
> 标签：linux, bash, process, linux-kernel, cpu-usage

有没有办法同时设置进程的nice值和它的亲和力？例如：

```
 taskset -c 0,1 nice -20 proc 
```

更新：它是这样工作的。我想它一定是我更复杂的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:28:51.993

### 使用基于 PID 的调度工具

许多 CPU 调度工具需要 PID 而不是命令。以下*似乎*适用于我的系统：

```
# Using shell expansion to reliably use correct PID.
sudo nice -n18 schedtool -a 0,1 $(sleep 30 & echo $!) & 
```

通过使用 shell 扩展来获取最后一个后台进程的 PID，但这似乎很骇人听闻。恕我直言，以下内容似乎更清晰，但您的里程（显然您正在使用的调度工具的细节）可能会有所不同。

```
# Cleaner example with less hacking around.
nice -n18 sleep 30 &
sudo schedtool -a 0,1 $! 
```

### 接受命令的标志

如果支持，-e 标志似乎通过允许命令而不是 PID 来完成所需的操作。例如：

```
sudo schedtool -a 0,1 -e nice -n18 sleep 30 & 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:18:45.907

有什么问题`taskset -c 0,1 && nice -20 proc`？如果 taskset 成功，那么 nice 将被调用。

# android - 尝试使用 Android 访问本地 Web 服务时连接被拒绝

> ID：11614295
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:29.640
> 
> 标签：android, web-services, android-wifi

我正在创建一个内置于 Visual Basic 2010 的服务器，该程序可以插入/更新/删除到我使用的数据库。我创建了一个本地 Web 服务，用于将服务器上的数据库与 Android 中的数据库同步。

我使用以下 Android 代码：

```
package com.zelacroix.bukumenu;

import java.io.IOException;
import java.io.InputStream;

import org.apache.http.*;
import org.apache.http.client.*;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.conn.ConnectTimeoutException;
import org.apache.http.params.*;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class Sinc extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sinc);
        Toast.makeText(getApplicationContext(), getKategori(), 5).show();
    }

    public String getKategori(){
        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, 60000);
        HttpConnectionParams.setSoTimeout(httpParameters, 60000);
        HttpClient client=new DefaultHttpClient(httpParameters);
        HttpPost httpPost = new HttpPost("http://192.168.1.2:1924/TugasAkhir/Service.asmx/getKategori");
        HttpResponse response;
        String result="";
        try
        {
            response=client.execute(httpPost);
            HttpEntity entity= response.getEntity();
            DataHandler dataHandler = new DataHandler();
            if (entity!=null)
            {
                InputStream instream = entity.getContent();
                result = dataHandler.convertStreamToString(instream);
                instream.close();
            }
        } catch (ConnectTimeoutException e) {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), e.toString(), 100).show();
        } catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), e.toString(), 100).show();
        }
        return result;
    }

} 
```

我收到一个错误： `org.apache.http.conn.httphostconnectexception connection to ``http://192.168.1.2:1924..... refused`

供您参考.. 当我使用模拟器并将 IP 地址更改为 10.0.2.2 时，此代码运行成功。

当我访问托管的在线 Web 服务时，此代码也会成功运行。只有当我以本地方式运行 Web 服务并尝试使用笔记本电脑的 IP (192.168.1.2) 使用 Android 设备访问它时，它才会失败。

我正在使用WIFI。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:18:54.417

尝试添加：

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:27:48.657

检查您的笔记本电脑 IP 和设备 IP。

> 它应该在同一个子网掩码中

笔记本电脑和移动（安卓）设备的 ip 必须是**192.168.XX**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:17:03.273

终于解决了..问题是Visual Studio 2010在设置IIS时太复杂了，然后我尝试在Visual Studio 2008上开发我的Web服务并且IIS工作正常！Android可以访问Web服务而不会拒绝连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T02:05:12.623

遇到了这个问题，但解决方案是一些熟悉的东西。

让你的`<uses-permission android:name="android.permission.INTERNET"/>`在你的清单上。

# c# - 如何在 Response.Filter.Write 方法中读取完整的 html？

> ID：11614296
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:31.050
> 
> 标签：c#, asp.net, asp.net-mvc

我正在使用 Response.Filter。我正在重写 Write 方法。但是我观察到 Write 方法执行了很多次，并且 Write 方法中的响应 html 进入了分块。如何在 Write 方法中读取（然后过滤）完整的 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:32:09.023

您应该避免这样做，因为它可能会对您的网站产生性能影响。过滤器是流，它们是低级的，用于直接处理响应字节，因此非常适合执行 Gzip 压缩等操作。

理想情况下，您应该尝试分块进行过滤操作。如果你真的不能，你可以写一个基于`MemoryStream`. 请记住，您将创建一个内存缓冲区，因此请确保您的响应相对较短。

```
public class ReadAllIntoMemoryFilter : MemoryStream
{
    private readonly Stream _baseFilter;

    public ReadAllIntoMemoryFilter(Stream baseFilter)
    {
        _baseFilter = baseFilter;
    }

    public override void Close()
    {
        var bytes = GetBuffer();

        // do your work here

        _baseFilter.Write(bytes, 0, bytes.Length);
        _baseFilter.Close();
        base.Close();
    }
} 
```

# php - simple_html_dom 通过输入匹配获取 td

> ID：11614297
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:32.057
> 
> 标签：php, html, dom

使用 simple_html_dom 我正在尝试使用内部文本值“使用”来获取所有 td。我试过做以下没有运气。

**php**

```
if($input = $row->find('td[value^=used]',10)){                      
    echo $input;
} 
```

**html**

```
<table>
   <tr>
      <td>status</td>
      <td>condition</td>
      <td>new</td>
      <td>used</td>
      <td>used</td>
      <td>new</td>
      <td>used</td>
      <td>new</td>
      <td>used</td>
   </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:28:24.350

您无法使用属性选择器获取 TD 值，因为内部文本不是属性。

试试这个：

```
$str = 'YOUR HTML HERE';
$html = str_get_html($str);
foreach($html->find('td') as $row)
{
   if(strpos($row->innertext, 'used') !== false)
   {
      echo $row->innertext;
   }
} 
```

# azure - Azure Web 应用程序的建议

> ID：11614298
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:32.750
> 
> 标签：azure, enterprise-library

我正在为 Windows Azure 云开发一个新的 Web 应用程序，但对所有可用的指南、最佳实践、存储可能性、缓存和安全性感到困惑。我看过大量视频，阅读大量文档，但我阅读的越多，决策层就越混乱。这就是我想要的：

1 - 开发一个 Web 应用程序，用户可以在其中使用电子邮件/密码组合登录。登录时，用户将有一个包含 UserID+CustomerID 组合的会话。UserID+CustomerID 将用于显示该用户的特定数据。该应用程序是针对律师事务所的，因此安全性必须非常严格。该应用程序将拥有 10000 多个用户，并且可能同时有大约 200-500 个用户。我已阅读 ASP.NET 会话应存储在共享缓存服务中，以便在节点升级/故障节点的情况下不会重置会话。据我了解，128 mb 缓存每秒有 100 个事务限制 - 我不确定这是否有效 - 如果我从缓存中获取会话数据，这是否算作一个事务？

在一个旧应用程序中，我正在使用这样的代码（这种方法是否适合 Azure，或者我应该开发一些自定义会话管理系统来处理？任何代码示例？）：

```
 protected void CustomValidatorLogin_ServerValidate(object source, ServerValidateEventArgs args)    
    {
        string result = String.Empty;
        if (DataAccess.User_Logon(this.txtEmail.Text, this.txtPassword.Text, Request.UserHostAddress, Request.UserAgent, ref result)
        {
           args.IsValid = true;
           FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,    this.txtEmail.Text, DateTime.Now, DateTime.Now.AddMinutes(Constants.sessionExpires), false, result);
           HttpCookie cookie = null;
           if (cbRemember.Checked)                
           {
              FormsAuthenticationTicket sticket = new FormsAuthenticationTicket(1, result, DateTime.Now, DateTime.Now.AddMinutes(Constants.sessionExpires), false, result);
              cookie = new HttpCookie(FormsAuthentication.FormsCookieName + Constants.cookiePrefix, FormsAuthentication.Encrypt(sticket));
              cookie.Expires = DateTime.Now.AddYears(1);
           }
           else
           {
            cookie = new HttpCookie(FormsAuthentication.FormsCookieName + Constants.cookiePrefix, string.Empty);
            cookie.Expires = DateTime.Now.AddYears(-1);
        }
            Response.AppendCookie(cookie);
            FormsAuthentication.SetAuthCookie(result, false);
        }
        else
        {
            args.IsValid = false;
        }
    } 
```

2 - 类似，根据这个 [http://www.windowsazure.com/en-us/develop/net/best-practices/security/](http://www.windowsazure.com/en-us/develop/net/best-practices/security/) 有很多我应该注意的安全注意事项。任何人都可以推荐一些关于如何创建登录功能的代码示例，并采用这些最佳实践吗？

3 - 系统将允许用户保存数据（上传文件），以后可以下载、删除、更新。这些文件既是用户特定的 (UserID)，也是客户特定的 (CustomerID)。例如，用户可以上传一个只有他有权访问的文件（UserID），但他也可以上传一个基于 CustomerID 可供整个组织（律师事务所）使用的文件。我很困惑是选择 BLOB 还是 Tables 以及为什么。此外，实现此类功能的最佳实践是什么。

4 - 我正在考虑使用 Enterprise Library for Data Access Layer - 有人知道适用于 Azure 新手的好的视频演练吗？

这是我知道的很多问题，但仍然希望得到一些专家的建议。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:48:05.403

听起来您正在为生产应用程序做出一些关键的设计决策，所以我强烈建议您与专家一起工作，而不是仅仅依靠论坛的建议来做这个基本的事情。

关于第 1 项（安全），您引用的安全最佳实践文章是一篇不错的文章，但它不会为您做出决定。正如它所指出的，处理身份的方法有很多种，而 Windows Azure 并没有让您以某种方式去做。处理身份的最现代方式称为基于声明的安全性。如果您使用基于声明的安全性，您将需要确定您的身份提供者 (IP) 是谁。这可以是域（通过 Active Directory）、社交网络网络提供商（例如 Google、Yahoo 或 Facebook），或者您自己的由凭证数据库支持的自定义安全令牌服务。如果您想支持多个身份提供者（以便用户可以选择他们登录的方式），您可能希望利用 Windows Azure 的访问控制服务作为中介。

[关于第 2 项（安全示例），我建议尝试Windows Identity Developer Training Kit](http://www.microsoft.com/en-us/download/details.aspx?id=14347)中的动手实验。这将使您对基于声明的安全性有一个很好的了解。

关于第 3 项（保存和检索面向文件的数据），blob 存储将是要使用的逻辑服务。您需要提供访问层和用户界面，以提供您描述的安全和共享功能。

关于第 4 项（在 Windows Azure 上使用企业库进行数据访问），[这篇文章](http://windowsazurecat.com/2011/02/enterprise-library-on-windows-azure-key-learnings-from-customer-project)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:55:06.930

您需要将其分解为具体问题。

1.  如果您希望应用程序管理用户 ID 密码，则 MembershipServices 是一个选项。如果您想信任第三方进行身份验证，那么 ACS。为什么登录和会话是同一个问题。

2.  更多关于安全性。从需求开始

3.  表有行大小限制。你只有小文件？
    共享访问签名将减轻网站的负担

4.  只能通过视频学习？来吧，那里有很多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:32:57.253

你的方法很好，除了我会放弃“FormsAuthentication.SetAuthCookie(result, false);” 线。在 Azure 中，您似乎会丢失 UserData 字段值，或者 userData 字段的外观不包含它的值。实际上，您的 SetAuthCookie 将创建您已建立票证的第二个版本。我想如果您需要将票证实例生成到其他进程，这可能会派上用场。在大多数应用程序中，您只需要一个版本即可为单个 Web 角色运行云作品。此外，我采用了这种方法并利用 azure 存储表来存储我需要的其他数据，我很高兴我做到了。Azure 中会出现一些奇怪的情况，会话变量（包括这种方法）有时会返回 null。这就像流式传输 UDP 与 TCP。互联网正在流媒体。一个字节消失了，会话似乎在下一次刷新时又消失了，这就是我使用 Azure 的表存储添加更多保证的原因。我正在那里创建会话事务。到目前为止，这么好的和很少的表交易等于安心。

# iphone - 如何在 iPhone 中刷新 NSLocale？

> ID：11614299
> 
> 赞同：3
> 
> 时间：2012-07-23T14:13:36.683
> 
> 标签：iphone, ios, refresh, currency, nslocale

我目前在 iPhone 应用程序中工作，使用 NSLocale 使当前货币符号正常工作，但是当我按下主页按钮时，应用程序进入后台进程并更改货币（设置>>国际>>区域格式>>像美国，印度等...）以这种方式，然后从后台打开该应用程序，货币符号未更改，但我导航到另一个屏幕，然后进入前一个屏幕，仅更改货币，但我想要从后台打开应用程序，然后是货币符号自动更改。如何解决这个问题？我需要你的帮助

谢谢

我在这里尝试了代码：

```
NSLocale *theLocale = [NSLocale currentLocale];
Getdollarsymbol = [theLocale objectForKey:NSLocaleCurrencySymbol];
NSString *Code = [theLocale objectForKey:NSLocaleCurrencyCode]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T14:45:22.720

请尝试此代码。让我知道这是否有效，

在`-viewDidLoad:`添加行中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshCurrencySymbol) name:NSCurrentLocaleDidChangeNotification object:nil]; 
```

然后：

```
-(void) refreshCurrencySymbol
{ 
    NSLocale *theLocale = [NSLocale currentLocale];
    NSString *symbol = [theLocale objectForKey:NSLocaleCurrencySymbol];
    NSLog(@"Symbol : %@",symbol);
    NSString *code = [theLocale objectForKey:NSLocaleCurrencyCode];
    NSLog(@"Code : %@",code);
} 
```

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:18:52.557

以下情况如何：

```
[NSLocale autoupdatingCurrentLocale] 
```

[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)提到

> 该对象始终反映当前用户区域设置的当前状态。

# servlets - 使用 servlet 填充表单输入元素的值

> ID：11614300
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:41.363
> 
> 标签：servlets, user-interface, rendering

我需要填充列表框、文本框的值。几乎所有来自我的 servlet 的表单输入元素。因为将对象发送到 JSP 页面并在那里填充输入元素的值（使用任何标记库 JSTL）我发现它很困难。

无论如何设置servlet本身的所有输入元素值？例如，如果我需要为 textfield 设置值，那么在我的 servlet

```
TextFieldBean tf = new TextFieldBean("userName");
tf.setValue("Test"); 
```

在我的jsp页面中

```
<input type="text" name="userName"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:06:42.227

这就是所有 MVC 框架（我所知道的）都允许做的事情。这是条纹的示例：

```
// in the Stripes action:
public Resolution displayForm() {
    this.userName = "Test";
    return new ForwardResolution("/displayForm.jsp");
}

// in the JSP
<s:form beanClass="com.foo.bar.SubmitFormAction" method="post">
    User Name : <s:text name="userName"/>
</s:form> 
```

MVC 框架有自己的学习曲线，但它们提供了巨大的服务（数据绑定就是其中之一）。选择一个并学习：Stripes、Spring MVC、Play，……有几十种。我喜欢 Stripes 的简洁和良好的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:04:44.110

如果出于某种原因不想使用 MVC 框架，请使用[Apache Commons BeanUtils](http://commons.apache.org/beanutils)。

```
BeanUtils.populate(bean, request.getParameterMap()); 
```

就是这样。您只需要确保 bean 属性名称与请求参数名称完全匹配。

然而，MVC 框架在应用请求参数之后提供了更多其他优势，例如转换、验证、事件侦听、执行操作、动态呈现等。因此，与其将几个单独的库拼凑在一起以使生活更轻松，不如只使用一个多合一的 MVC 框架。除了 JB Nizet 提到的基于请求的 MVC 框架之外，还有一些基于组件的 MVC 框架，它们更加抽象（如消除 HTML/CSS/JS 编译器），例如[JSF](https://stackoverflow.com/tags/jsf/info)。

# apache-flex - 动态组合 ImageSnapshot 源

> ID：11614306
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:55.143
> 
> 标签：apache-flex, flex4, flex-spark, image-capture

我想创建一个快照，它以不同于向用户显示的方式组成多个组件。

假设屏幕上的布局如下所示：

```
<s:VGroup>
    <s:HGroup id="dynamicPopulatedGroup" />
    <mx:TabNavigator id="tabs">
        <s:NavigatorContent> <mx:LineChart id="chart1"/> </s:NavigatorContent>
        <s:NavigatorContent> <mx:LineChart id="chart2"/> </s:NavigatorContent>  
    </mx:TabNavigator>
    <mx:Legend id="legend" />
    <s:Button id="bSnapshot" />
</s:VGroup> 
```

但是“屏幕截图”应该像这样布置：

```
<s:VGroup>
    <s:Label>Some Title Text</s:Label>
    <mx:LineChart>The currently selected tab's chart</mx:LineChart>
    <s:HGroup>
        <s:HGroup id="dynamicPopulatedGroup" /> 
        <mx:Legend id="legend" />
    </s:HGroup>
</s:VGroup> 
```

这是一个简化的示例，但它说明了我要解决的主要问题，即如何在沙箱中操作可视元素而不影响屏幕上的元素本身。

我试图通过创建一个新`Group`组件并在代码中添加各种组件，然后截取屏幕截图来做到这一点。然而，这实际上从可视树中的原始位置删除了组件。一旦完成运行，整个组件就会损坏。 *是不是我需要先创建这些组件的副本？*

```
var g:VGroup = new VGroup();
// label
var l:Label = new Label(); l.text = "some title"; 
g.addElement(l);
// chart
g.addElement(NavigatorContent(tabs.selectedChild).getElementAt(0)); // chart
// legend, etc.
var hgrp:HGroup = new HGroup(); hgrp.addElement(dynamicPopulatedGroup); hgrp.addElement(legend);
g.addElement(hgrp);

ImageSnapshot.captureBitmapData(g);
// then do stuff with bitmap... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:19:42.720

A`DisplayObject`只能有一个父级。因此，当您将图表（和其他 UI 元素）添加到 new`VGroup`时，它们会从它们最初所在的任何容器中删除。

制作这些对象的副本可以解决您的问题，但似乎有点多。

您可以重新设计您的 UI/UX，以便当用户需要制作屏幕截图时，您实际上会切换到新的视图状态并实际渲染具有所需外观的组件，然后将它们还原回来。与许多网站显示页面“可打印”版本的方式相同。

如果这不可接受，也许您可​​以尝试一种混合方法，您可以为每个 UI 元素拍摄单独的快照并将它们拼接在一起。我会想象拼接工作类似于下面未经测试的代码：

```
var combinedImage:Sprite = new Sprite();
var g:Graphics = combinedImage.graphics;
var bitmaps = [bitmap1, bitmap2, bitmap3];
for (var i:int = 0; i < bitmaps.length; i++)
{
    g.beginBitmapFill(bitmaps[i]);
    g.drawRect(xCoordinate,yCoordinate,bitmapWidth,bitmapHeight);
    g.endFill();
    // increment x,y,width,height - leaving this exercise for you :)
} 
```

# jsf - jsf 命令按钮在包含 Jsp 中不起作用

> ID：11614307
> 
> 赞同：0
> 
> 时间：2012-07-23T14:13:55.150
> 
> 标签：jsf

我有一个具有动态包含的 jsp 页面。每个动态包括调用它自己的支持 bean，并与 dataTables 和从支持 bean 读取数据一起工作，但我遇到了命令按钮的问题。当我单击命令按钮时，控件没有被转移到 bean 并且它没有导航到下一页，因为它没有点击 onclick 方法。

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:32:35.797

您需要确保`<jsp:include page>`在表单提交期间与显示带有表单的页面期间的动态bean属性的值完全相同。因此，如果它是从请求范围的 bean 中获取的，那么您需要确保在其（后）构造期间设置该属性，以及基于您可以设置为托管属性或从`ExternalContext#getRequestParameterMap()`. 另一种方法是将 bean 放在会话范围内，但是当最终用户在同一会话中的多个浏览器窗口/选项卡中打开同一页面时，这不会很好地工作。

# blackberry - 黑莓主屏幕滚动不流畅

> ID：11614312
> 
> 赞同：1
> 
> 时间：2012-07-23T14:14:10.380
> 
> 标签：blackberry, scroll, focus

这只发生在非触摸式 BB 设备上，例如 Bold

我有一个 MainScreen 并添加了一个带有很长文本的 LabelField（不适合显示器的高度）。下面我添加一个ButtonField。

现在，当我尝试滚动时，它不会滚动，而是跳转到 ButtonField。所以不可能阅读LabelField中的整个文本。

我无法拆分 LabelField 中的文本，因为我是动态获取的，它可能是没有换行符的一段。即使没有句号（德语句子可能很长）。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:57:57.473

尝试使用字段样式`FOCUSABLE`。如果没有帮助，请尝试使用`RichTextField`.

# exception - 以编程方式获取用户声明价值

> ID：11614345
> 
> 赞同：2
> 
> 时间：2012-07-23T14:16:05.220
> 
> 标签：exception, wso2, axis2, wso2is, claims

我正在尝试以编程方式为特定用户获取 wso2 身份服务器声明值。但是，当我每次遇到异常时都尝试访问它时，我设法以编程方式添加了声明

```
org.apache.axis2.databinding.ADBException: Unexpected subelement {http://api.user.carbon.wso2.org/xsd}claimUri 
```

我使用的代码是：

```
 UserRealm realm = WSRealmBuilder.createWSRealm(
                        Constants.SERVER_URL, getCookie(),
                        Constants.CONFIG_CONTEXT);
                STORE_MANAGER = realm.getUserStoreManager();
    STORE_MANAGER.getUserClaimValues(username, "default"); 
```

什么会导致此异常，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:03:00.590

更新：我自己也遇到了这个问题。[我在https://wso2.org/jira/browse/CARBON-13809](https://wso2.org/jira/browse/CARBON-13809)找到了答案。看来这是一个应该在 IS 4.0 版本中修复的错误

下面的原始答案：

以下代码来自 wso2 Identity Server 3.2 中的 org.wso2.carbon.identity.user.profile.ui\3.2.0\src\main\resources\web\userprofile 和文件 edit-finish.jsp

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib uri="http://wso2.org/projects/carbon/taglibs/carbontags.jar"
prefix="carbon"%>
<%@page import="org.wso2.carbon.utils.ServerConstants"%>
<%@page import="org.wso2.carbon.ui.CarbonUIUtil"%>
<%@page import="org.apache.axis2.context.ConfigurationContext"%>
<%@page import="org.wso2.carbon.CarbonConstants"%>
<%@page import="org.wso2.carbon.identity.user.profile.ui.client.UserProfileCient"%>
<%@page import="java.util.Map"%>
<%@page import="java.util.Iterator"%>
<%@page import="java.lang.Exception"%>
<%@page import="java.util.ResourceBundle"%>
<%@page import="org.wso2.carbon.ui.util.CharacterEncoder"%><script type="text/   javascript" src="extensions/js/vui.js"></script>
<script type="text/javascript" src="../extensions/core/js/vui.js"></script>
<script type="text/javascript" src="../admin/js/main.js"></script>

<jsp:include page="../dialog/display_messages.jsp" />
<%@ page import="org.wso2.carbon.ui.CarbonUIMessage"%>
<%@ page import="org.wso2.carbon.identity.user.profile.stub.types.UserFieldDTO" %>
<%@ page import="org.wso2.carbon.identity.user.profile.stub.types.UserProfileDTO" %>
<%@ page import="java.text.MessageFormat" %>

<%
String profile = CharacterEncoder.getSafeText(request.getParameter("profile"));
String username = CharacterEncoder.getSafeText(request.getParameter("username"));
String profileConfiguration = request.getParameter("profileConfiguration");
UserFieldDTO[] fieldDTOs = null;
String forwardTo = null;
String BUNDLE = "org.wso2.carbon.identity.user.profile.ui.i18n.Resources";
ResourceBundle resourceBundle = ResourceBundle.getBundle(BUNDLE, request.getLocale());
String fromUserMgt = (String) request.getParameter("fromUserMgt");

try {
    String cookie = (String) session.getAttribute(ServerConstants.ADMIN_SERVICE_COOKIE);
    String backendServerURL = CarbonUIUtil.getServerURL(config.getServletContext(), session);
    ConfigurationContext configContext =
            (ConfigurationContext) config.getServletContext().getAttribute(CarbonConstants.CONFIGURATION_CONTEXT);
    UserProfileCient client = new UserProfileCient(cookie, backendServerURL, configContext);        

    fieldDTOs = client.getProfileFieldsForInternalStore().getFieldValues();

    if (fieldDTOs!=null)
    {
      for (UserFieldDTO field : fieldDTOs) {
        String value = request.getParameter(field.getClaimUri());
        field.setFieldValue(value);   
      }
    }

    UserProfileDTO userprofile= new UserProfileDTO();
    userprofile.setProfileName(profile);
    userprofile.setFieldValues(fieldDTOs);      
    userprofile.setProfileConifuration(profileConfiguration);
    client.setUserProfile(username, userprofile);
    String message = resourceBundle.getString("user.profile.updated.successfully");
    CarbonUIMessage.sendCarbonUIMessage(message,CarbonUIMessage.INFO, request);
    if ("true".equals(fromUserMgt)) {
        forwardTo ="index.jsp?username="+username+"&fromUserMgt=true";
    }else{
        forwardTo ="index.jsp?region=region5&item=userprofiles_menu&ordinal=0";         
    }

} catch (Exception e) {
    String message = MessageFormat.format(resourceBundle.getString(
            "error.while.updating.user.profile"), username, e.getMessage());
    CarbonUIMessage.sendCarbonUIMessage(message, CarbonUIMessage.ERROR, request);
    forwardTo = "edit.jsp?username=" + username + "&profile=" + profile + "&fromUserMgt=true";
}
%>

<script type="text/javascript">
    function forward() {
    location.href ="<%=forwardTo%>";
    }
</script>

<script type="text/javascript">
    forward();
</script> 
```

注意这段代码

```
 if (fieldDTOs!=null)
    {
      for (UserFieldDTO field : fieldDTOs) {
        String value = request.getParameter(field.getClaimUri());
        field.setFieldValue(value);   
      }
    } 
```

希望您可以使用它来帮助您。

# c#-4.0 - LINQ to XML - 修改

> ID：11614356
> 
> 赞同：0
> 
> 时间：2012-07-23T14:16:58.440
> 
> 标签：c#-4.0, linq-to-xml

这让我整天发疯。我有一个 xdocument，只是想更改一个值。

xml 看起来如下

```
<session>
  <immediate>
<pivot name="test">
  <axes>
    <axis position="SLICERS">
      <attribute name="Book">
        <selection value="Book_Name" type="Book" />
      </attribute>
      <attribute name="Result Namespace">
        <selection value="blah blah" />
      </attribute>
      <attribute name="Date">
        <selection value="2012-05-16" />
      </attribute>
      <attribute name="Measure">
        <selection value="123" />
      </attribute>
    </axis>
    <axis position="SIDE">
      <attribute name="ttx" mode="ALL"></attribute>
    </axis>
    <axis position="TOP">
      <attribute name="hhy" mode="ALL"></attribute>
    </axis>
  </axes>
  <source name="risk" />
  <aggregate expression="SUM(Money Value)" />
  <grid-processor name="errors" />
</pivot>
  </immediate>
</session> 
```

我想做的只是改变

```
<attribute name="Book">
        <selection value="Book_Name" type="Book" />
</attribute> 
```

至

```
<attribute name="Book">
    <selection value="CorrectBookName" type="Book" />
</attribute> 
```

我想使用 LINQ 并尝试过 XElement - 我可以获取块但无法更新

```
 XElement amend = xdoc.Descendants("attribute").First(el => (String)el.Attribute("selection") == "value"); 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:15:15.817

您需要使用 XElement.SetAttributeValue() 方法。只需选择要更改其属性的元素并在其上调用 SetAttributeValue() 即可。如果没有与您提供的名称相同的属性，将创建一个新属性，否则现有属性的值将被新属性替换。查看 msdn 以获取更多示例和更多详细信息：http: [//msdn.microsoft.com/en-us/library/system.xml.linq.xelement.setattributevalue.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.setattributevalue.aspx)

# jakarta-ee - @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) 何时提交？

> ID：11614364
> 
> 赞同：37
> 
> 时间：2012-07-23T14:17:16.560
> 
> 标签：jakarta-ee, ejb, jta, container-managed

一个名为的 EJB 方法`Aby`调用另一个名为的 EJB 方法`Bob`

`Bob`标有`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`

### 事务何时`bob`提交？：

a)`bob`调用结束时

b)`aby`调用结束时

c) 其他。什么时候？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-23T14:32:23.373

我认为A是对的。当方法 Bob 被调用时，它会为它创建新的事务，并且方法 Aby 会被挂起，直到 Bob 事务被提交。

另请注意，它必须是来自其他 bean 的方法才能使其具有事务性，从同一个 bean 调用的方法不充当业务方法。

请参阅这篇很棒的[文章](http://entjavastuff.blogspot.cz/search/label/EJB3)以获得进一步的解释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T10:20:34.123

实际上，我认为替代 a 是正确的。看：

[EJB 3.0 - 嵌套事务！= 需要新的？](https://stackoverflow.com/questions/10817838/ejb-3-0-nested-transaction-requires-new)

我还进行了一些研究并查看了数据库（Hyper Sonic）日志以实际查看它何时在数据库中提交，并且在 REQUIRES_NEW 方法完成时提交。但是由于由容器来处理事务，所以它可能会根据容器而改变。我在调试时使用了 JBoss。还有 Hibernate（值得一提，因为我已经通过检查数据库日志对此进行了测试）。自从您询问事务以来，我认为涉及数据库写入。

我的想法与之前的答案不同，所以被说服会很有趣。

# php - Mysql - php 上传数据 - 错误 - 1366 字符串值不正确

> ID：11614366
> 
> 赞同：1
> 
> 时间：2012-07-23T14:17:19.897
> 
> 标签：php, mysql

我有一个需要上传到数据库的 .csv 文件。已经有一个现有的 PHP 脚本，它解析该数据并将其插入到几个数据库表中，并且运行良好。最新的 csv 文件给了我错误。

我不能让自己解决这个问题。这是没有特殊字符的简单英文文本，但我在某些行上不断出错。

这是一个这样的行的示例

```
这是一种旨在平衡风险和回报的投资策略

```

这是我上传时遇到的错误

```
ERROR=1366 - 不正确的字符串值：第 1 行的列 'question' 的 '\xA0strat...'

```

表字符集为 UTF-8，列 question 为 TEXT 类型

我在 Windows 命令提示符下运行 PHP 脚本 - 我感觉它与此有关。但在以前的所有情况下，对于其他 CSV 文件 - php 脚本都在 Windows 本身上运行。

现在，当我在记事本中键入上述英文文本并将其插入 CSV 文件时 - 它工作正常 - 但我有超过 500 行出现此错误，我无法继续在记事本中输入每一行，然后将其粘贴到 CSV 中。

***********编辑******* *** ** *** ***** 这是产生错误的代码*****

 *****```
foreach($question_array 作为 $question)
{
   //插入问题表
   mysql_query("INSERT INTO adl_question (question) VALUES ('".$question."')",$con);
   echo 'ERROR='.mysql_errno($con).'-'.mysql_error($con);
   $question_id = mysql_insert_id();
}

```

任何见解谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:21:51.873

我最近在进行数据转换时遇到了这个问题。您需要做的是使用 iconv 将其显式读取为 WINDOWS-1250（或任何编码“坏”文本的字符），然后转换回 UTF-8。

```
<?php 
$string = iconv('windows-1250', 'utf-8', $badString);
?> 
```

有关详细信息，请参阅[http://us3.php.net/manual/en/function.iconv.php](http://us3.php.net/manual/en/function.iconv.php)。

如果您需要对整个文件执行此操作，可以使用此函数（我没有编写）：

```
<?php 
function utf8_fopen_read($fileName) {
    $fc = iconv('windows-1250', 'utf-8', file_get_contents($fileName));
    $handle=fopen("php://memory", "rw");
    fwrite($handle, $fc);
    fseek($handle, 0);
    return $handle;
}
?> 
```

然后像这样实现它：

```
<?php 
if (($handle = utf8_fopen_read("mycsv.csv")) !== FALSE) {

    while($file = fgetcsv($handle)) {
        $csv[] = $file;
    }

    foreach($csv as $row) {
        // run insert here
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:22:22.960

错误字符串表明文本中有非 ascii 字符。例如，char \xA0 在大多数编辑器中将显示为空白，但超出了 ascii 范围。在您的示例中，在“策略”一词之前必须有这些字符之一。

一个好的十六进制编辑器会告诉你字符串中的实际字符是什么。我使用notepad++查看麻烦的文本，你必须启用特殊的字符查看。*****

# python - 从 Python 中的下拉框表单中查找信息

> ID：11614371
> 
> 赞同：1
> 
> 时间：2012-07-23T14:17:43.153
> 
> 标签：python

```
<p>
<select name='type'>
<option>Only Names</option>
<option>Only Numbers</option>
</select>
</p> 
```

如果我要制作一个 Python 脚本，并在选择 Only Names 的情况下搜索名称，我将如何去做呢？就像我会在我的 python 脚本中输入什么？我现在脑海中的例子：

```
if form == Only Names:
   print stuff 
```

应评论要求添加更多信息：

```
 import cgi
form = cgi.FieldStorage()
from file import *

f = File("lists.data")

if f.exists() == True:
    f.startRead()
    list = f.read()
    f.close()

    print "<h1>Catalog</h1>"
    print "<ul>"

    sequel2 = variables.find ("2")
    sequel3 = variables.find ("3")
    superheroMan = variables.find ("man")
    superheroWoman = variables.find ("woman")
    superheroBoy = variables.find ("person")

    for variable in list:
        if NEED TO KNOW THIS PART

        print "<li>" + variable + "</li>"

    print "</ul>" 

else:
    print "<p>Error: No saved data found.</p>" 
```

这是我的表格：

```
 <p>Lists to display:</p>
                <div>
                    <select name='type'>
                        <option>Only Names</option>
                        <option>Only Numbers</option>
                    </select>
                </div>  

                <p><input type='submit' value='Display'></p>
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:30:31.103

要制作这样的 Python 脚本，您需要找到一种将表单连接到 Python 代码的方法。由于代码应该引用表单的状态，它需要知道在浏览器中打开的文件的状态。

您的问题有两种解决方案：

1.  使用 HTTP 将请求传输到在后台运行的 python 服务器。我会推荐[flask](http://flask.pocoo.org/)或[cherrypy](http://www.cherrypy.org/)来完成这项任务。
2.  让代码在浏览器中运行 - 但这需要代码是 javascript，而不是 python。Javascript 非常容易学习，您可能也需要考虑这一点。

# php - .htaccess 重写多个文件夹

> ID：11614372
> 
> 赞同：1
> 
> 时间：2012-07-23T14:17:48.857
> 
> 标签：php, .htaccess, mod-rewrite

我不知道如何命名它，经过大量研究后，我没有找到我需要的东西。希望我能很好地解释这一点！

我的 URL 结构由 处理`index.php`，它获取整个 URL，分解 / 并将它们组织成一个数组，以查看将用户转发到哪里。作为一个例子[在这里](http://www.mysite.com/?cat1/subcat1/subcat2/page1)。

现在大多数指南的问题`htaccess`是，他们给出的示例基于使用已知的查询字符串而不是预设的查询字符串，我正在获取 URL 并将其分解，因此它可以无限长。作为[另一个例子](http://www.mysite.com/?cat1/subcat1/subcat2/subcat3/subcat4/page1)，我们可以在上面添加新的子猫。

这仍然会正确转发（基本上脚本会自动接受第一项来拉模板，然后是最后一项用作文章 id 拉。中间的任何东西也可以有自己的模板，如果没有，使用显示其子类别中所有项目的通用项目）。

我正在尝试使用`htaccess`之后的所有内容`mysite.com/`并将其作为单个查询拉入以传递给索引。前任。（使用上述）：

**网址输入**：`www.mysite.com/?cat1/subcat1/subcat2/subcat3/subcat4/page1`

**查询传递给 index.php**：`cat1/subcat1/subcat2/subcat3/subcat4/page1`

现在的目标是最终删除“？” 在`mysite.com/`清理 URL 之后，它更像是`mysite.com/cat1/subcat1`.

至于我的研究，我只能根据已知的查询字符串（例如`?cat1=&subcat1=`）找到东西，但我需要它是动态的，因为不同的东西会有不同的深度。这是我的索引方面的用武之地，但我不知道如何`htaccess`将整个查询作为一个字符串转发以进行分析。

任何帮助将不胜感激，并希望这足够清楚，可以理解。如果有任何问题，请随时提问。

提前致谢！

**更新**

我已经让它有点工作了。这是我现在使用的代码：

```
RewriteRule  ([^/]+) index.php?%{REQUEST_URI}%{QUERY_STRING} [nc] 
```

这在大多数情况下都有效，但它总是按如下方式设置数组项：

0 => 空
1 => index.php

2 =>（查询的第一部分，例如“cat1”）

我已经尝试以多种方式更改上面的代码，但我想我缺乏知识使我无法正确设置它（或多或少，数组空间 3 中的内容应该在空间 0 中，而当前的 0 /1 (empty/index.php) 应该被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:45:41.680

怎么样
`RewriteRule (.+) index.php?url=$1 [nc]`

比在您的 index.php 中，您将拥有

```
<?php    echo $_GET['url']; ?>
    output: cat1/subcat1/subcat2/subcat3/subcat4/page1 
```

并且应该手动拆分您的类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:24:16.193

我真的不知道如何解决您的问题，但您正在谈论的问题称为 url 重写。

这是在 PHP 和内容管理系统中组织事物的常用方法。一个框架。该框架称为 MVC 或模型视图控件。

我知道在cake-php这个特定的framework/csm中，完全可以关闭url重写。虽然如果你这样做，我认为它会恶化搜索引擎优化。

# php - 两密钥加密算法

> ID：11614373
> 
> 赞同：0
> 
> 时间：2012-07-23T14:18:03.220
> 
> 标签：php, encryption

有什么安全的加密算法可以让我以这种方式使用吗？

```
<?php

   $message="Hi there!";

   $key1="ablablabla";

   $key2="fooboomoohoo";

   $tmp=encrypt($message,$key1);

   $tmp=encrypt($tmp,$key2);

   $tmp=decrypt($tmp,$key1);

   $result=decrypt($tmp,$key2);

   echo "\"".$message."\" is the same as \"".$result."\"";

?> 
```

它应该像这样工作：

1.  用户想向服务器发送加密消息，所以他用他的密钥对其进行加密

2.  服务器收到一条加密消息，所以他用自己的密钥再次加密并发送回来

3.  用户用他的密钥解密消息并将其发回

4.  最后，服务器对消息进行解码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:34:54.413

您似乎在询问是否有带有交换密钥的加密方案。例如，参见[这个 stackoverflow question](https://stackoverflow.com/q/6389849/469210)。

当然有这样的交换系统。一个简单的例子是[凯撒密码](http://en.wikipedia.org/wiki/Caesar_cipher)（即把字母表中的字母移动*n 个*位置，其中*n*是键）。就*安全*方案而言——这里的安全是相当主观的——密钥的交换属性确实存在于更复杂的层面。这样的例子可以在[这里](http://www.antifraudlabs.com/presentations/pages/security_comm_RSA.aspx)看到，它讨论了为什么 RSA*对公共 n*是可交换的。（注意：common n 不常见。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:01:51.240

像 RC4 这样的流密码呢？

加密和解密涉及与 PRNG 输出的异或。（其实解密和加密是一样的。）

```
$tmp=encrypt($message,$key1); // tmp = P ^ A
$tmp=encrypt($tmp,$key2);     // tmp = p ^ A ^ B
$tmp=decrypt($tmp,$key1);     // tmp = p ^ A ^ B ^ A = p ^ B
$result=decrypt($tmp,$key2);  // result = p ^ B ^ B = p 
```

# actionscript-3 - 如何让 AS3 类影响主 .swf 文件？

> ID：11614375
> 
> 赞同：0
> 
> 时间：2012-07-23T14:18:08.703
> 
> 标签：actionscript-3, flash

我对 AS3 非常陌生，并且我已经被这个问题困扰了好几个星期。我试过问别人，但他们认为我只是在拖钓。我试图让这段代码做一些事情：

```
package source.map{

    import flash.display.MovieClip;
    import flash.display.Stage;
    import source.map.dbox;

    public class BlockPlace extends MovieClip{

        public function BlockPlace() {
            var blah:MovieClip = new dbox();
            stage.addChild(blah);
            db.x = stage.stageWidth / 2;
            db.y = stage.stageHeight / 2;
        }

    }

} 
```

“dbox”是我想要添加到舞台上的。我已经设置了链接设置并确保该类位于正确的位置，但由于某种原因，即使在函数中进行跟踪也无法正常工作。我习惯于将代码直接放在时间轴中，而且我最近才开始使用类。我有多本关于 AS3 的书，我真的在尽我最大的努力去理解这门语言背后的核心概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:41:31.053

只需按照我在评论中提出的分步教程，来自活动的 tuts：[快速提示如何在 Flash 中使用文档类](http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-use-a-document-class-in-flash/)。

它适合用于将代码放置在时间轴中的初学者和程序员。我认为它很好地涵盖了您的问题，并且应该不难理解。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:28:43.317

确保您的库资产的链接类引用完整的类路径：source.map.BlockPlace

还要确保您的项目知道要查找您的 AS3 代码。转到文件/操作脚本设置 > 源路径，并确保您的“源”文件夹包含在该列表中。

# c# - VSTO 速度问题

> ID：11614380
> 
> 赞同：1
> 
> 时间：2012-07-23T14:18:31.657
> 
> 标签：c#, vsto

我编写了一个 VSTO DLL 来对用户指定的单元格范围执行转换。我正在通过以下方式执行此操作：

```
Globals.ThisAddIn.Application.EnableEvents = false;

int totRows=inputRange.Rows.Count;
int totCols=inputRange.Columns.Count;

for (int i = 1; i <= totRows; i++) {
  for (int j = 1; j <= totCols; j++) {
    if (((Range)inputRange.Cells[i, j]).Value2 != null) {
      ((Range)outputSheet.Cells[i, j]).Value2 = MyTransform(((Range)inputRange.Cells[i, j]).Value2);
    }
  }
}

Globals.ThisAddIn.Application.EnableEvents = true; 
```

这种方法允许我每小时修改大约 150 万个单元（我没有计算 MyTransform() 消耗的时间），这在我看来非常慢。

是否有更有效的方法来读取/写入 VSTO 中的单元格？

如果没有，将其转换为 XLL（可能使用 Excel-DNA）会更快吗？猜猜多少钱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:46:40.993

您正在为正在读取和设置的每个单元格进行多次 COM 调用。一次将整个范围作为数组处理会更有效。

这个问题对选项进行了广泛的讨论：[Fastest way to interface between live (unsaved) Excel data and C# objects](https://stackoverflow.com/questions/3840270/fastest-way-to-interface-between-live-unsaved-excel-data-and-c-sharp-objects)

使用[Excel-DNA](http://exceldna.codeplex.com)和 Excel C API，您可以每秒读取和写入一百万个单元格，但我猜测即使通过 COM，如果您以大数组的形式读取和写入，性能也会非常好。

# javascript - javascript初学者：在javascript中添加动态样式？

> ID：11614382
> 
> 赞同：5
> 
> 时间：2012-07-23T14:18:36.543
> 
> 标签：javascript, css

> **可能重复：**
> [如何使用 Javascript 创建 <style> 标记](https://stackoverflow.com/questions/524696/how-to-create-a-style-tag-with-javascript)

我使用 java 脚本编写了一个动态表单。我想在 java-script 本身中添加样式。我写了一些代码来添加样式。但它不起作用。这是我在我的项目中编写的代码。

```
var sheet = document.createElement('style');
sheet.type="text/css";
sheet.innerHTML = "body{color:red;}";
document.body.appendChild(sheet); 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:21:58.890

你的代码很好。但我认为你没有在正确的时间调用它，所以当你的身体标签被加载时调用它

```
 window.addEventListener('DOMContentLoaded',function(){
    var sheet = document.createElement('style'); 
    sheet.type="text/css"; 
    sheet.innerHTML = "body{color:red;}"; 
    document.body.appendChild(sheet);
    }, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:23:14.600

为什么不直接通过类添加样式？

```
.blue {
   background-color: blue;   
}​

document.body.className = 'blue';​ 
```

[http://jsfiddle.net/kf8Nd/](http://jsfiddle.net/kf8Nd/)

如果您真的需要一个完整的样式表，只需将其添加到您的标题中即可。

```
var sheet = document.createElement('style');
sheet.type="text/css";
sheet.innerHTML = "body{color:red;}";
document.head.appendChild(sheet); // head, not body 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:25:22.683

[在这里](http://dev.opera.com/articles/view/dynamic-style-css-javascript/)，您可以获得更多资源来增加您的知识。我相信一个例子会非常有用！有一些 SO 问题也可以帮助您喜欢[THIS](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript/196038)。*——学分[Peter Boughton](https://stackoverflow.com/users/9360/peter-boughton)*

这在 IE、FF 和 Opera 中进行了测试：

```
var css = 'h1 { background: red; }',
    head = document.getElementsByTagName('head')[0],
    style = document.createElement('style');

style.type = 'text/css';
if(style.styleSheet){
    style.styleSheet.cssText = css;
}else{
    style.appendChild(document.createTextNode(css));
}
head.appendChild(style); 
```

将类添加到元素：

```
document.getElementById("MyElement").className += " MyClass"; 
```

从元素中删除一个类：

```
document.getElementById("MyElement").className = 
   document.getElementById("MyElement").className.replace
      ( /(?:^|\s)MyClass(?!\S)/ , '' )
/* code wrapped for readability - above is all one statement */ 
```

要在 onclick 事件中执行此操作：

```
<script type="text/javascript">
    function changeClass()
    {
        // code examples from above
    }
</script>
...
<button onclick="changeClass()">My Button</button> 
```

更好的是，使用允许您执行以下操作的框架（在此示例中为 jQuery）：

```
$j('#MyElement').addClass('MyClass');

$j('#MyElement').removeClass('MyClass');

$j('#MyElement').toggleClass('MyClass'); 
```

并且：

```
<script type="text/javascript">
    function changeClass()
    {
        // code examples from above
    }

    $j(':button:contains(My Button)').click(changeClass);
</script>
...
<button>My Button</button> 
```

这是将 HTML 标记与您的 JS 交互逻辑分开，这可以使维护变得更加容易，尤其是在大型/复杂的应用程序上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:24:18.857

将样式添加到头部元素而不是正文

```
var sheet = document.createElement('style');
sheet.type="text/css";
sheet.innerHTML = "body{color:red;}";
document.head.appendChild(sheet); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:24:55.957

```
var style = document.createElement('style');
style.type = 'text/css';
style.innerHTML = 'body{color:red;}';
document.getElementsByTagName('head')[0].appendChild(style); 
```

# android - 按下返回时恢复片段视图

> ID：11614383
> 
> 赞同：1
> 
> 时间：2012-07-23T14:18:39.067
> 
> 标签：android, android-fragments

我在屏幕上有两个片段和一个按钮。当我按下按钮时，其中一个片段会隐藏，而另一个片段会稍微改变它的 UI（隐藏了一个文本视图）。

我将此事务存储在后台堆栈中，因此当用户按回时，隐藏的片段会再次显示。但是我不知道如何告诉另一个片段（一直可见的片段）再次显示 textview，因为此更改不是事务的一部分。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:58:53.417

以类似的方式覆盖`onBackPressed()`您的：`FragmentActivity`

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    if (mTextView.getVisibility() == View.GONE) {
        mTextView.setVisibility(View.VISIBLE);
    }
} 
```

或者使用一些你可以在按下按钮时设置的标志。

# ruby-on-rails - 省略 YARD 文档中的魔术注释

> ID：11614386
> 
> 赞同：0
> 
> 时间：2012-07-23T14:18:45.940
> 
> 标签：ruby-on-rails, yard

`# -*- encoding : utf-8 -*-`我的Rails 应用程序中每个 ruby​​ 文件的顶部都有魔术注释。问题是，它显示在我的 YARD 文档中每个类定义的概述部分中：

```
Overview

-*- encoding : utf-8 -*- The Book model contains a number of   #etc 
```

有没有办法可以省略它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:21:49.820

如果您删除此魔术注释并将文件格式化为`UTF-8`怎么办？

# wix - 如何在主安装目录之外创建一个文件夹？

> ID：11614387
> 
> 赞同：0
> 
> 时间：2012-07-23T14:18:49.440
> 
> 标签：wix

我正在编写一个小型安装程序，`D:`除了主安装文件夹位于分区之外，我想在分区上创建一个目录`C:`。我怎样才能做到这一点？

# jquery - 部分页面刷新后手动更新jquery分页插件

> ID：11614391
> 
> 赞同：0
> 
> 时间：2012-07-23T14:19:13.810
> 
> 标签：jquery, asp.net-mvc-3, jquery-plugins

我有一个 asp.net-MVC 项目，我已经使用[这个](http://beneverard.github.com/jqPagination/)插件实现了分页机制。

在第一页上，我有产品和一个调用控制器方法返回下一页产品的寻呼机。这一切都很好。问题是，我还可以选择通过同一页面上的按钮更新产品。如果我使用按钮而不是使用寻呼机链接更新产品，则产品会更新，但寻呼机插件不会。

当不使用分页插件时更新页面时，我需要手动更新分页器并将 updateRecentBooks 中的 max_page 编号和“null”更改为另一个值。

```
$().ready(function () { 
 $('.pagination').jqPagination({
        max_page: @Model.NumberOfPages,
        paged: function(page) {
            updateRecentBooks(page, null);
        }
    });
});

 $("#button").live("click", function () {
        ...
        // Calls the updateRecentBooks with the proper value

        updateRecentBooks(1, properValue);

    }); 
```

点击事件发生后，NumberOfPages 属性被更新，我需要更新寻呼机以反映更改，如下所示：

```
 $('.pagination').jqPagination({
        max_page: @Model.NumberOfPages, // Now contains new values.
        paged: function(page) {
            updateRecentBooks(page, propervalue); // Now contains proper value.
        }
    }); 
```

我应该如何解决这个问题？感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:23:56.183

不知道我是否理解你的意思......但为什么不在那里加载另一个服务器端变量呢？

```
updateRecentBooks(page, @Model.CurrentPage || null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:04:02.903

我可以让它发生的唯一方法，因为插件中似乎没有公共函数来正确执行它，是在 ajax 请求返回后使用我想要的新默认选项重新初始化 jqPagination() ..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T09:27:11.250

通过在我使用 ajax 更新的面板内移动分页控件来解决问题。这样，每次我更新局部视图时，分页控件都会重新绑定新值。

# c# - 在不冻结 GUI 的情况下向/从大型数据绑定 ObservableCollection 添加/删除许多项目

> ID：11614396
> 
> 赞同：4
> 
> 时间：2012-07-23T14:19:42.017
> 
> 标签：c#, wpf, infragistics

我和我的团队正在开发一个显示多个并发 XamDataChart 控件的 WPF 应用程序（由 Infragistics 提供）。每个图表都绑定到一个不同的 ObservableCollection，最多可以包含 200 万个点。对于每个图表，DispatcherTimer 会定期检索要附加到集合的新项目（每 100 毫秒最多 1000 个）。每次新项目出现时，它们都会被添加到集合的“尾部”中，并且从“头部”中移除相同的数量，因此集合中的项目数量随着时间的推移保持不变。

我们面临的问题是添加/删除操作冻结了 GUI，因为集合只能由主线程修改。我们尝试了许多方法（BackgroundWorker、Application.Current.Dispatcher 和 DispatcherPriority.Background、Task.Factory 等），但似乎都没有解决问题，并且 GUI 一直冻结。

您能否就处理大量绑定数据同时保持 GUI 响应的最佳方法向我们提供建议？

**更新**：

1) 正如我在下面的评论中所指出的，我们已经尝试在抑制 OnCollectionChanged 的​​同时添加和删除项目。即使它似乎对少量数据有效果，但在我们的场景中，这种解决方案的优势实际上是无法观察到的。

2) 数据在单独的线程中准备和收集。这是一个长时间运行的操作，但没有明显的缓慢或无响应。当数据传递到图表组件进行渲染时，应用程序会冻结。

3) 以下是生成数据（在单独的线程中）并在 UI 上显示数据的方法：

```
private void GenerateDataButtonClick(object sender, RoutedEventArgs e)
{
   Task<List<RealTimeDataPoint>> task = Task.Factory.StartNew(() =>           this.RealTimeDataPointGenerator.GenerateData(2000000));
   Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(() =>  {                                                                                                    this.DataPoints.Clear();
                                                                                            this.DataPoints.AddRange(task.Result);
                                                                                                 if (!this.StartDataFeedButton.IsEnabled)
                                                                                                     this.StartDataFeedButton.IsEnabled = true;
                                                                                             }));
}

public void DispatcherTimerTick(object sender, EventArgs e)
{
   Task<List<RealTimeDataPoint>> task = Task.Factory.StartNew(() => this.RealTimeDataPointGenerator.GenerateData(1000));
   Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(() => {                                                                                                  this.DataPoints.RemoveRange(0, task.Result.Count);                                                                                                  this.DataPoints.AddRange(task.Result);                                                                                              }));
} 
```

提前致谢， 詹卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:49:03.730

如果不了解您的场景，很难知道正确的建议，所以我建议您在 Infragistics 论坛上发布一个示例并寻求帮助，如果您还没有这样做，如果您有，请回复链接到帖子，我去看看。

如果您将许多点作为单独的操作一次更新，那么让您的集合只引发一个事件而不是每个单独的事件会很有帮助。例如，如果您通过重复调用 Add 来更新集合的全部内容，最好发送一个 Reset 事件，而不是发送所有单个事件。但似乎您已经在调用 AddRange，我相信它只会向图表发送一个通知。

如果您只有两个系列并且每 100 毫秒只更新一次，我认为这不会导致 UI 冻结，但是如果您有许多单独的系列，您正在通过单独的调度程序交互单独更新数据，您实际上会导致图表的更新次数可能超出了您的预期。

该图表将批量修改并限制刷新次数，但它使用调度程序执行此操作，因此如果您有 15 个不同的系列，您在不同的时间间隔更新，并且所有这些都是单独的调度程序 thunk，那么您将导致更多与通过在同一个调度程序 thunk 中更新多个系列数据源来限制更新次数相比，更新图表。

此外，如果您在上面的代码中使用 CategoryDateTimeXAxis，您可能会遇到它当前在修改时对日期列进行排序的限制，这将扼杀您在该规模上的表现。在这种情况下，我建议为该轴类型提交功能请求以支持预先排序的数据。

如果您的数据项支持 INotifyPropertyChanged，但您没有使用它来通知图表值更改，那么使用不实现 INotifyPropertyChanged 的​​项类型会好得多。如果您提交实现此接口的项目，图表假定它需要订阅此接口才能收到更改通知（您可能永远不会打算进行更改）。这听起来可能不是问题，但如果您有 200 万条记录在高频更新，那么就会无缘无故地进行大量事件订阅。

据我所知，该图表从属性绑定中检索值比字符串索引器快得多，因此请确保它是一个简单的属性，而不是 MemberPath 中的点属性路径。

希望这些信息对您有用。但是使用可运行的样本来诊断问题会容易得多，该样本提供了可能导致问题的所有上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:31:22.877

我也遇到过这个问题，我获取数据的代码通常需要一段时间，并且尽管使用`DispatcherPriority.Background`，它会在加载时冻结 UI，而且我无法使用后台线程，因为 WPF 无法修改对象在没有创建对象的线程上。

我最终做的实际上是使用两种方法：一个后台线程去获取数据，以及`Dispatcher`将项目添加到`ObservableCollection`at`DispatcherPriority.Background`优先级。

我的代码通常如下所示：

```
Task<List<MyClass>> task = Task.Factory.StartNew(() => GetData());
App.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, 
    new Action(delegate() 
    {
        MyObservableCollection.AddRange(task.Result);
    })); 
```

我过去使用的另一个选项是`await`/来自[Async CTP Refresh](http://msdn.microsoft.com/en-US/vstudio/async)`async`的关键字

```
async void SomeMethod()
{

    Task<List<MyClass>> task = Task.Factory.StartNew(() => GetData());
    MyObservableCollection.AddRange(await task);
} 
```

**注意**：该`AddRange()`方法是扩展的自定义类的一部分`ObservableCollection`，尽管您也可以将其构建为扩展方法。

```
public void AddRange(IEnumerable<T> collection)
{
    foreach (var i in collection)
        Items.Add(i);

    OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
} 
```

您可以为添加的`CollectionChanged`每个项目添加一个调用，而不是最后的单个 Reset 调用，但这可能会导致您添加的数据量出现性能问题。

# php - 使用 PHP 将 HTML+PDF 转为 PDF 输出

> ID：11614398
> 
> 赞同：4
> 
> 时间：2012-07-23T14:19:45.067
> 
> 标签：php, html, pdf

我已经设法将 HTML 页面转换为 PDF 文档数据。现在，我正在为要包含在此文档数据中的 PDF 添加上传。我正在寻找最好的方法来做到这一点，但还没有找到任何合适的方法。以下是具体情况：

*   HTML 占页面的一半，上传的 PDF 必须从该页面开始附加。
*   如果附加的 PDF 超过半页，则继续到第二页（HTML 内容和 PDF 内容之间没有分页符。
*   完全包含多页 PDF（一旦我有一个好的解决方案，我就可以弄清楚这部分）。

我尝试了几种不同的方法，每种方法都有自己的缺点：

*   将 PDF 转换为 HTML 并与原始 HTML 相结合。大量的格式问题。如果客户端保持格式简单，这不是问题（但我们都知道这不会发生）。
*   只需将 PDF 附加到 PDF 输出。在第 2 页而不是第 1 页开始追加。
*   将 PDF 转储到图像中并在 HTML 中放置图像标记。最漂亮的结果，但需要裁剪空白并将任何超过半页的内容推到第二页。

我正在使用 DOMPDF 进行 HTML 到 PDF 的转换。因为我尝试过 PDFLib、FPDI 和 ImageMagick/GhostScript（图像转换）。也许这是在黑暗中拍摄，但有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:27:23.670

我是 PrinceXML 的忠实粉丝，但它不是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:54:19.077

[IBM 在此处](http://www.ibm.com/developerworks/opensource/library/x-buildpdfphp/index.html)的开发人员作品文章中推荐 FPDF 。你可以在这里找到图书馆：[http ://www.fpdf.org/](http://www.fpdf.org/)

# android - 使用zxing库程序crash

> ID：11614400
> 
> 赞同：0
> 
> 时间：2012-07-23T14:19:47.743
> 
> 标签：android, zxing

我在使用 zxing 库时遇到问题。我按照[这个](https://stackoverflow.com/questions/4782543/integration-zxing-library-directly-into-my-android-application)答案做所有事情。然后为了使用库，我使用[了本](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)教程。所以我在我的应用程序中添加了 core.jar 和一个库 zxing。我尝试将此代码与它一起使用

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
startActivityForResult(intent, 0); 
```

当我编译并启动我的应用程序并按下调用此代码的按钮时，我收到意外错误，一切都刚刚关闭。如果我在我的设备上安装了条形码扫描仪，并且我不使用这个库，它就可以正常工作。但是我必须在没有互联网连接的手机上使用该应用程序，所以我必须让这个库正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:05:26.687

例外是`ActivityNotFoundException`。您没有检查是否安装了条形码扫描仪。不，您不需要修改您的清单。

您应该做的是使用提供的说明进行 Intent 集成，而不是尝试自己动手。使用`IntentIntegrator`：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# facebook - 未经授权显示 Facebook 应用程序

> ID：11614401
> 
> 赞同：-2
> 
> 时间：2012-07-23T14:19:54.183
> 
> 标签：facebook, oauth

我试图做一个不需要重定向授权的应用程序。

我想做的是一个应用程序，它可以检测它是否喜欢显示某些内容的页面，或者不喜欢显示另一种内容的页面。

我能怎么做 ？

感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:32:56.860

您可以使用 PHP SDK（或类似工具）来执行此操作。您所要做的就是将应用程序放在粉丝页面上并解码`signed_request`参数并查看用户是否喜欢该页面（`liked =>`1.

您可以通过调用来解码signed_request：`$facebook->getSignedRequest();`然后`var_dump`查看它返回的数据。

# java - 尝试计算 Oracle 中的行数时出现 java.sql.SQLException

> ID：11614403
> 
> 赞同：0
> 
> 时间：2012-07-23T14:19:55.153
> 
> 标签：java, sql, jsf, jsf-2, oracle11g

我在 Java 托管 bean 中遇到了一个我找不到的问题。

```
 import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/*
 * include SQL Packages
 */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.bean.ViewScoped;
// or import javax.faces.bean.ManagedBean;   

import org.glassfish.osgicdi.OSGiService;

import org.primefaces.model.chart.CartesianChartModel;
import org.primefaces.model.chart.ChartSeries;

@Named("DashboardController")
@SessionScoped
public class Dashboard implements Serializable
{

    /*
     * Call the Oracle JDBC Connection driver
     */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    private CartesianChartModel categoryModel;

    public Dashboard() throws SQLException
    {
        createCategoryModel();
    }

    public CartesianChartModel getCategoryModel()
    {
        return categoryModel;
    }

    private void createCategoryModel() throws SQLException
    {
        categoryModel = new CartesianChartModel();

        // Active Accounts

        ChartSeries ActiveAccounts = new ChartSeries();
        ActiveAccounts.setLabel("Active Accounts");

        ActiveAccounts.set("Active Accounts", CheckDataDB("USERS","USERSTATUS","Active"));

        categoryModel.addSeries(ActiveAccounts);

        // Blocked Accounts

        ChartSeries BlockedAccounts = new ChartSeries();
        BlockedAccounts.setLabel("Blocked Accounts");

        BlockedAccounts.set("Blocked Accounts", CheckDataDB("USERS","USERSTATUS","Blocked"));

        categoryModel.addSeries(BlockedAccounts);

        // Active Groups

        ChartSeries ActiveGroups = new ChartSeries();
        ActiveGroups.setLabel("Active Groups");

        ActiveGroups.set("Active Groups", CheckDataDB("GROUPS","GROUPSTATUS","Active"));

        categoryModel.addSeries(ActiveGroups);

        // Blocked Groups

        ChartSeries BlockedGroups = new ChartSeries();
        BlockedGroups.setLabel("Blocked Groups");

        BlockedGroups.set("Blocked Groups", CheckDataDB("GROUPS","GROUPSTATUS","Blocked"));

        categoryModel.addSeries(BlockedGroups);

    }

    // Database data

    public int CheckDataDB(String DBtablename, String DBStatus, String DBArgument) throws SQLException {

        int count = 0;
        String SQLStatement = null;

        if (ds == null) {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null) {
            throw new SQLException();
        }

        PreparedStatement ps = null;

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            try {
                SQLStatement = "SELECT count(*) FROM ? WHERE ? = ?";

                ps = conn.prepareStatement(SQLStatement);
                ps.setString(1, DBtablename);
                ps.setString(2, DBStatus);                
                ps.setString(3, DBArgument);

                ResultSet result = ps.executeQuery();

                if (result.next()) {
                    count = result.getInt(1);
                }

                conn.commit();
                committed = true;
            } finally {
                if (!committed) {
                    conn.rollback();
                }
            }
        } finally {
            /* Release the resources */
            ps.close();
            conn.close();
        }

        return count;
    }
} 
```

当我尝试运行代码时，我得到了这个错误堆栈：

```
com.sun.faces.mgbean.ManagedBeanCreationException: Cant instantiate class: com.DX_57.AC_57.Dashboard.
    at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:193)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at org.primefaces.component.chart.UIChart.getValue(UIChart.java:75)
    at org.primefaces.component.chart.bar.BarChartRenderer.encodeOptions(BarChartRenderer.java:62)
    at org.primefaces.component.chart.bar.BarChartRenderer.encodeScript(BarChartRenderer.java:51)
    at org.primefaces.component.chart.bar.BarChartRenderer.encodeEnd(BarChartRenderer.java:36)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.sql.SQLException
    at com.DX_57.AC_57.Dashboard.CheckDataDB(Dashboard.java:116)
    at com.DX_57.AC_57.Dashboard.createCategoryModel(Dashboard.java:73)
    at com.DX_57.AC_57.Dashboard.<init>(Dashboard.java:56)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at java.lang.Class.newInstance0(Class.java:372)
    at java.lang.Class.newInstance(Class.java:325)
    at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
    ... 53 more 
```

你能帮我解决问题吗？我想使用一种 Java 方法来计算行数，使代码更紧凑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:55:48.777

在以下代码中将表名和列名设置为 PreparedStatement 的当前方法永远不会奏效：

```
String SQLStatement = null;
...
SQLStatement = "SELECT count(*) FROM ? WHERE ? = ?";
ps = conn.prepareStatement(SQLStatement);
ps.setString(1, DBtablename);
ps.setString(2, DBStatus);                
ps.setString(3, DBArgument); 
```

原因是准备好的语句应该使用语法正确的 SQL（通常是参数）构造，然后应该设置参数的值。`setString(int, String)`不是将 SQL 语句粘合在一起的通用工具，它用于设置参数的值。

将起作用的内容类似于以下内容（作为此代码的快速修复，而不是作为良好风格的任何示例）：

```
//first we construct reasonable SQL statement with one parameter
SQLStatement = "SELECT count(*) FROM "+DBtablename+ " WHERE "+DBStatus+"=?";
//then we set value for parameter
ps.setString(1, DBArgument); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:22:20.043

你没有 SQLException 这个问题发生得更早：

```
com.sun.faces.mgbean.ManagedBeanCreationException: Cant instantiate class: com.DX_57.AC_57.Dashboard. 
```

那是您要搜索的例外。

# mysql - 所有记录未插入 Mysql 表

> ID：11614406
> 
> 赞同：1
> 
> 时间：2012-07-23T14:20:03.040
> 
> 标签：mysql

mysql对可以插入表中的记录数量有限制吗？

我通过运行 php 脚本将记录从 Oracle DB/Staff 表提取到 MySql 数据库/Staff 表。脚本运行后 Oracle DB/Staff 表中的总记录 = 3602，它仅将 3319 条记录插入到 MySql/Staff 表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:24:52.760

您的表可能有一些约束，如 PRIMARY KEY 或 UNIQUE KEY 导致某些插入失败。

执行 INSERT 后，使用以下查询检查警告：

```
SHOW WARNINGS; 
```

您可以在创建表时指定 MAX_ROWS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:26:13.973

查看 Oracle 中的第 3320 行数据。如果由于特殊字符与 MySQL 不兼容，则可能会发生错误。

# java - 不知道密码时如何重置密钥库？

> ID：11614407
> 
> 赞同：9
> 
> 时间：2012-07-23T14:20:06.390
> 
> 标签：java, keytool, android-keystore

出于某种原因，我收到了这条消息：

`keytool error: java.io.IOException: Keystore was tampered with, or password was incorrect`

我知道我无法“修复”密钥库，但我想重置密钥库，但不知道该怎么做，尤其是因为我不知道默认密钥库的位置。

注意：我只想要“空白”它们，所以我从默认值重新启动。仍然我什至无法检测到他们的位置。

如何使用 keytool 或类似工具列出默认密钥库及其位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T15:01:14.577

Just remove `~/.keystore` file, which is the default keystore location.

# redis - 带有redis的评论系统 - 使用列表？

> ID：11614408
> 
> 赞同：2
> 
> 时间：2012-07-23T14:20:13.050
> 
> 标签：redis

我正在使用列表在我的网站上制作一个*非常*简单的评论系统；

发布是通过 LPUSH 使用评论项目的 id 完成的。检索通过 LRANGE 完成，然后通过结果数组循环。

我想知道这是否是处理评论的最佳方式？在性能水平上这是一个好主意吗？

另外，我将如何进行适度？这似乎不是从列表中删除特定项目的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:16:10.183

如果您希望能够基于索引而不是使用[LREM](http://redis.io/commands/lrem)（根据列表项值查找和删除）删除评论，您可以使用集合和哈希。

为每个帖子保留一个简单的集合，并带有该帖子的评论 ID：

```
SADD Comments:post:1 1
SADD Comments:post:1 2 
```

（这将标记帖子 ID 1 具有评论 ID 1 和 2）

然后为每个评论设置一个哈希键：

```
HSET Comments:1 1 "This will be a comment for post 1"
HSET Comments:1 2 "A second comment for the same post" 
```

`Comments:1`然后您可以查询所有评论的哈希值，例如帖子 ID 1：

```
HGETALL Comments:1 
```

可以像这样删除单个评论：

```
SREM Comments:post:1 1
HDEL Comments:1 1 
```

（这里删除第一条评论）。

# c++ - Qt QMetaData 类名实现

> ID：11614411
> 
> 赞同：0
> 
> 时间：2012-07-23T14:20:29.800
> 
> 标签：c++, qt, class, classname

我一直在寻找调用 className() 的 QMetaData 和 QObject。我想在我自己的课堂上复制它，但我不知道 QT 是如何做到的。我的意思是，我执行以下操作，但它没有输出正确的类（忽略任何语法错误）：

```
#include <iostream>

#define CLASS(name)              \
    std::string className() {    \
        return #name;            \     
    }                           

class A {
public:
   CLASS(A) 

   A(){}
   ~A(){}  

   void output() {
       std::cout << className() << std::endl;
   }
};

class B: public A{
public:
   CLASS(B)
   B(){}
   ~B(){}
};

int main() {
   B b;
   b.output();    // This obviously outputs "A" but I would
                  // like it to output "B" from the base class
                  // function
   return 0;
} 
```

Qt 的特点是您不必再添加任何代码，只需添加 Q_OBJECT 宏，即使基类具有输出函数，您也可以从基类获取派生类的类名（在 Qt 中，我指的是 QObject::调试对象树（））。Qt 如何在不向派生类（可能是宏除外）添加任何额外代码的情况下实现这一效果，基类可以输出其派生类的类名？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:41:58.107

为此，您需要[动态调度](http://en.wikipedia.org/wiki/Dynamic_dispatch#C.2B.2B_Implementation)（即 C++ 中的虚函数）。

只需在宏中 添加`virtual`之前：`std::string className()`

```
#define CLASS(name)              \
virtual std::string className() {    \
    return #name;            \     
} 
```

[http://ideone.com/Kr0Sc](http://ideone.com/Kr0Sc)

# java - JTextArea 正则表达式和有序列表

> ID：11614412
> 
> 赞同：0
> 
> 时间：2012-07-23T14:20:32.857
> 
> 标签：java, regex, swing, list, jtextarea

我尝试在我的`JTextArea`. 我正在尝试编写一个正则表达式，它将忽略任何有序列表并将文本区域内容打印到控制台。这些列表的结构遵循以下约定：

*   从新的一行开始。
*   以数字开头。
*   随后是句号。
*   后跟空格或制表符。

到目前为止，这是我正在使用的代码：

```
String content = txt.getText();
String removeOrderdList = content.replaceAll("^(\\d+).[ \t]+", ""); 
```

它适用于文本区域内容的第一行，但不适用于其他行。我可以删除“^”，但这会影响有句子的正常行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:35:46.553

**用这个**

```
String content = txt.getText();
String removeOrderdList = content.replaceAll("(?m)^\\d+\.[ \t]+", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:28:27.960

您可以使用 Multiline 标志`(?m)`来执行此操作。这使得`^`匹配每一行的开始：

```
String content = "1\. rgwfdfs \nnormal text \n3\. fdhjsdf\nmore normal text";
System.out.println(content.replaceAll("(?m)^(\\d+)\\.[ \t]+.*\\n", "")); 
```

印刷

```
normal text 
more normal text 
```

另请注意，您需要使用`\\.`确保匹配句号而不是任何字符。

**[编辑]**

我刚刚意识到您并没有试图忽略列表，而只是忽略了列表的第一部分。所以，要做到这一点，只需使用：

```
String content = "1\. rgwfdfs \nnormal text \n3\. fdhjsdf\nmore normal text";
System.out.println(content.replaceAll("(?m)^(\\d+).[ \t]+", "")); 
```

这打印：

```
rgwfdfs 
normal text 
fdhjsdf
more normal text 
```

# php - Puppet：指定要安装的包的版本

> ID：11614413
> 
> 赞同：31
> 
> 时间：2012-07-23T14:20:35.337
> 
> 标签：php, packages, puppet, vagrant

显然这是不可能的，但我不敢相信我是唯一需要它的人。

我想指定要安装的 php 版本，因为我正在处理一个需要 php 5.2 的旧项目。

实际上我的虚拟机是基于 Oneiric 和 php 5.3

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-23T16:17:05.193

您可以指定一个版本：

```
package { 'php' :
  ensure => '5.2' ,
} 
```

但是，如果该版本的 PHP RPM/Deb/package 在您的上游存储库中不可用，那么您需要：

1.  查找具有该软件包的备用存储库，并将其添加到您的存储库列表中
2.  使用包设置您自己的仓库
3.  通过提供包的路径，从您的文件系统安装：

    ```
    package { 'php' :
      ensure => '5.2' ,
      source => '/some/path/to/php-5.2.rpm' ,
    } 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T08:22:37.820

这与我在 puppet 中使用自定义 apt 存储库及其 gpg 密钥的方式非常接近

```
# put downloaded pgp keys into modulename/files/pgp/
# this will copy them all into /tmp
file { '/tmp/pgp-keys':
        ensure  => directory,
        recurse => true,
        source  => 'puppet:///modules/modulename/pgp',
}

# add any keys that you need
exec { 'apt-key add':
        command     => '/usr/bin/apt-key add /tmp/pgp-keys/number1.gpg.key &&/
                        /usr/bin/apt-key add /tmp/pgp-keys/number2.gpg.key',
        subscribe   => File['/tmp/pgp-keys'],
        refreshonly => true,
}

# make sure you add your custom apt repository
file { 'cassandra.sources.list':
        ensure  => 'present',
        path    => '/etc/apt/sources.list.d/cassandra.sources.list',
        source  => 'puppet:///modules/modulename/cassandra.sources.list',
        require => Exec['apt-key add'],
}

# update your package list
exec { 'apt-get update':
        command => '/usr/bin/apt-get update',
        require => File['cassandra.sources.list'],
}

# Install your specific package - I haven't actually used this yet, 
# based on answer by opsmason
package { 'cassandra':
        ensure  => '1.2.0',
        require => Exec['apt-get update'],
} 
```

# linux - 编译器标志的首选项

> ID：11614415
> 
> 赞同：0
> 
> 时间：2012-07-23T14:20:43.210
> 
> 标签：linux, gcc

如果我通过 LDFLAGS，额外的 ld 标志和库存在于 /lib、/usr/lib 中，将从 LDFLAGS 或额外的 ld 标志或 /lib 和 /usr/lib 从哪个位置选择库？

另外，如果我通过`LDFLAGS='-L/path1 -L/path2 -L/path3'` 将首先检查哪个路径， path3 还是 path1 ？

# grails - 如何提取grails对象中的第一个值

> ID：11614417
> 
> 赞同：2
> 
> 时间：2012-07-23T14:20:48.733
> 
> 标签：grails

我有一个 grails 对象，我想提取其中的第一个值。我是 grails 的新手，还没有完全理解这种语言。我之前使用循环来提取它们，但这次我只需要第一个值而不需要其他任何东西。我试着用

```
<div id="blaa">${items}[0].value"</div> 
```

这引发了一个错误。

下面通常是我如何遍历对象。

```
 <g:each in="${items}" var="item" status="i">
                    <li><a href="#">${item.value}</a></li>
                </g:each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:31:59.290

虽然@Gregg 的答案是正确的，并且可以让您获得第一个元素，但有一种更简单的方法，它与您尝试的方法非常接近：

```
<div id="blaa">${items[0].value}"</div> 
```

问题是您需要在结构中包含*所有*“代码”片段`${...}`。除此之外的所有内容都被视为字符串。

只要`items`是有序的`Collection`（所以，a `List`、a`Map`或 a `Range`，但不是 a `Set`），您就可以像 Groovy 中的数组一样访问它（Grails 是内置的语言）。@Gregg 的答案`items`首先显式转换为数组，然后像数组一样访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:47:30.183

在这里做一些假设，因为你没有显示很多代码，你也没有告诉我们错误：

默认情况下，Grails 中的集合是 Set。要获得集合中的第一个值，您可以执行以下操作：

```
${item.toArray()[0]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:02:42.807

您可以使用`${items.head().value}`获取第一个值

# android - 在父活动的列表视图项目中显示（“子”活动的）已检查项目的数量

> ID：11614419
> 
> 赞同：0
> 
> 时间：2012-07-23T14:21:00.037
> 
> 标签：android, listview

这是针对安卓的。

首先，我想到的一个例子：

![野营旅行计划示例](../Images/eece1cbcfcf59007c961add515aac743.png)

我怎样才能达到这种效果？此列表视图的项目显示当您单击父列表视图的项目之一时打开的子列表视图中未选中项目的数量。我应该为子活动使用静态类吗？或者与第一个列表视图中的行一样多的实例？有人可以给我一个例子吗？非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:46:56.423

I'm assuming you have a model called something like Tasks.

Make an abstract class called something like ProgressCounter. Setup two static values :

```
 public static int totalNumberOfTasks;
 public static int taskProgress; 
```

Then you make a static method and iterate over it :

```
public static void countProgress(ArrayList<Tasks> allTasks){
 ProgressCounter.totalNumberOfTasks = allTask.size();
 int taskProgress = 0;
   for(Task task : allTasks){
   if(task.isCompleted());
   taskProgress++;
 }
 ProgressCounter.taskProgress = taskProgress;
 } 
```

I hope this can point you in the right direction :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:34:48.817

Slickelito，感谢您的回答，我学到了一些关于抽象类的东西，但最后我找到了自己的解决方案：

我制作了自己的光标适配器和这种方法-

```
public int getChildCount(long lvPhase) {
    String phase = Long.toString(lvPhase);
    String[] projection = { FlightBundleDatabase.ID };
    String[] selectionArgs = { Long.toString(mAircraft), phase };
    int count = 0;

    CursorLoader cursorLoader = new CursorLoader(mContext, FlightBundleProvider.CONTENT_URI_CHECKLISTS, projection, "aircraft_id = ? AND phase = ?", selectionArgs, null);
    Cursor cursor = cursorLoader.loadInBackground();
    int cCount = cursor.getCount();
    if (cursor.moveToFirst()) { 
        for (int i = 0; i < cCount; i++) {
            long currentItem = cursor.getLong(cursor.getColumnIndexOrThrow(FlightBundleDatabase.ID));
            if (mSettingsActivity.contains(phase + currentItem)) {
                count++;
                }
            cursor.moveToNext();
        }
    }
    cursor.close();
    return count;
} 
```

然后我将计数器 TextView 文本绑定到此方法的返回值。它似乎工作，虽然我不完全确定效率。

# c# - 我可以使用方括号从类中提取值吗

> ID：11614423
> 
> 赞同：5
> 
> 时间：2012-07-23T14:21:15.387
> 
> 标签：c#

我有一个具有变量“Magic”的类。这是一个 4 字符的字符串。我可以在 C# 中做这样的事情吗？

```
string offset = chunkList["_blf"].offset; 
```

*假设“chunkList”是“chunk”对象的 IList/List。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T14:22:28.137

是的，你可以在你的类上创建一个[索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)：

```
public string this[string s]
{
    get
    {
        // retrieve value
    }
    set
    {
        // set value
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T14:24:19.203

你可以使用这样的东西：

```
string offset = chunkList.Find(x => x.Magic == "_blf").offset; 
```

更好的是检查 Find 是否返回 null：

```
Chunk chunk = chunkList.Find(x => x.Magic == "_blf");
if (chunk != null)
    offset = chunk.offset; 
```

# c# - 获取我的数据库的表名及其列名

> ID：11614425
> 
> 赞同：0
> 
> 时间：2012-07-23T14:21:26.077
> 
> 标签：c#, entity-framework

我必须获取数据库的所有表名，并且必须获取它们的列名。请帮我 ：）

编辑：我必须使用实体框架中的“实体到 SQL”。我也可以使用实体 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:31:40.370

您可以为此使用信息架构和本机 SQL 选择语句：

对于表：

```
SELECT * FROM INFORMATION_SCHEMA.TABLES 
```

对于列：

```
SELECT * FROM INFORMATION_SCHEMA.COLUMNS
   ORDER BY table_catalog,table_schema,table_name,ordinal_position 
```

如果列是标识列，如果您还需要信息，请尝试以下操作：

```
SELECT *,columnproperty(object_id(quotename(TABLE_SCHEMA)+'.'+quotename(TABLE_NAME)),
   COLUMN_NAME, 'IsIdentity') AS IS_IDENTITY FROM INFORMATION_SCHEMA.COLUMNS
   ORDER BY table_catalog,table_schema,table_name,ordinal_position 
```

# javascript - 如何获取节点之前的 HTML 文本？

> ID：11614429
> 
> 赞同：0
> 
> 时间：2012-07-23T14:21:34.443
> 
> 标签：javascript, jquery

更新：
有人问：*我这样做的目的是什么？*
我正在尝试获取所选节点服务器端的字符串索引，并且由于我必须考虑小选择/节点的重复，我认为在客户端的所选节点之前获取所有 html 将有助于成为最获取索引的准确方法。

假设我有这样的html：

```
<tag>
   <child>
      <subchild>
      </subchild>
   </child>
</tag> 
```

我“选择”子孩子。我想在该节点之前将所有前面的 HTML 作为文本** .. 所以，在这种情况下，这将是：

```
<tag>
   <child> 
```

有没有一种巧妙、简单的方法来做到这一点？

** 我指定“作为文本”，因为使用 jQuery / 现代浏览器，不完整的标签会变得有效，因为 jQuery 试图确保事情不会中断。因为我不会使用这些信息进行 DOM 操作，所以我不需要有效的 HTML 语法。

# php - 基于先前输入的表格

> ID：11614431
> 
> 赞同：0
> 
> 时间：2012-07-23T14:21:44.520
> 
> 标签：php, html, sql, forms

我是使用 PHP 的新手，遇到了一个我似乎找不到答案的问题。

我必须创建一个分布在多个页面上的事件创建表单。在一个页面上，有一个表格，该表格在垂直方向上将仅列出在前一页上选择的票证类型，而在水平方向上，还有一个基于前一页的“部分”列。然后，该表格将允许用户输入价格，然后根据不同的部分将其分配给票证类型。

我的问题是，是否可以单独使用 html/PHP 来做到这一点？我正在使用 POST 方法在表单的页面之间移动，然后在最后将其全部添加到数据库中，但是我应该以不同的方式来实现这一点吗？

我希望这个问题是有道理的，但我来自一个非行话的立场。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:26:51.840

您可以做的（不一定*应该*，这是您自己的判断调用）是将所有`POST`ed 数据保存为会话变量。这可以帮助您清理代码混乱，否则您将不得不`POST`从所有表单到所有表单的所有数据，以便通过所有页面导航维护信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:27:40.200

只要第一页有一个带有 POST 的表单方法，就可以做到这一点。以下是步骤：

1.  在第一页，用户将通过 POST 方法提交数据。
2.  在第二页上，将数据保存在一个临时变量中： $temp_var = $_POST['data'];
3.  使用基于第一页的数据创建第二页。
4.  （提交时）将新数据与旧数据一起保存到数据库中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:28:25.000

这听起来像是一个很好的[会话](http://us.php.net/manual/en/features.sessions.php)案例！

在您的第一页上，您的表单可以使用 POST 提交，然后您可以将数据存储在用户的会话中：

```
session_start();
$_SESSION['form_submission'] = $_POST; 
```

然后，在第 #2 页（或任何其他页面）上，您可以通过以下方式访问它：

```
session_start();
$form_variable = $_SESSION['form_submission']['field_name']; 
```

您可以更一般地存储/检索它们以使其更具可读性：

```
$_SESSION['field1'] = $_POST['field1'];
$field1 = $_SESSION['field1']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:30:58.537

PHP 和 HTML 可以很好地管理您心目中的系统。

为了让你开始：

PHP 使用会话来管理从一个页面到下一个页面的数据，创建如下流程：

1.  用户填写第一个表格
2.  使用数据向 Web 服务器发送 POST 请求
3.  PHP 脚本解释数据并在页面上创建新视图或重定向到另一个页面。

在您使用的每个页面顶部的 PHP 脚本中：

```
session_start(); 
```

您现在可以将数据保存到会话：

```
$_SESSION['mySessionVar'] = 'This is my session variable'; 
```

每当您需要从会话中检索时，请确保 a)`session_start()`已被调用并且 b) 像这样检索它：

```
$myVariable = $_SESSION['mySessionVar']; 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:25:54.600

有几种方法可以采取：

1.  按照您的描述使用 POST 方法。
2.  使用会话变量跨页面存储数据。
3.  使用 jQuery/javascript 在一个页面上隐藏/显示不同的表单（无需多次 POST 或在会话中存储数据）。

# .net - VB.Net 嵌入字体在 Windows XP 中不起作用

> ID：11614432
> 
> 赞同：1
> 
> 时间：2012-07-23T14:21:46.367
> 
> 标签：.net, vb.net, fonts, embedded-resource

我希望在应用程序的某些按钮上显示特定字体，因此选择将其作为资源包含在项目中。

然后，我通过 Marshal 命名空间将 .addMemoryFont 添加到新的 PrivateFontCollection，然后将字体设置为我的新字体系列。

这适用于 Windows Vista、Windows7 和 Windows 8（预览版），但不适用于我的应用程序必须支持的 Windows XP。

XP上没有错误..字体只是不显示。

我还尝试将字体嵌入为文件并通过流对象加载它-Assembly.GetExecutingAssembly().GetManifestResourceStream(resource)

这再次适用于除 XP 之外的所有设备，有什么想法吗？谢谢

这是我加载资源的函数： 对于这个测试，我添加了 AVP.TTF（广泛可用，非商业）作为称为 AVP 的资源。

我在客户端使用 button.Font = LoadFontResource(9.75, FontStyle.Regular) 。

```
Public Function LoadFontResource(ByVal Size As Single, ByVal style As FontStyle) As Font
    _fontsResource = New PrivateFontCollection
    Dim fontMemPointer As IntPtr = Marshal.AllocCoTaskMem(My.Resources.AVP.Length)
    Marshal.Copy(My.Resources.AVP, 0, fontMemPointer, My.Resources.AVP.Length)
    _fontsResource.AddMemoryFont(fontMemPointer, My.Resources.AVP.Length)
    Marshal.FreeCoTaskMem(fontMemPointer)
    Return New Font(_fontsResource.Families(0), Size, style)
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:37:00.280

将嵌入字体写入临时文件，然后使用 .AddFontFile 可以在 XP 中获得更稳定的性能。感谢 Hans 为我指出了旧的 GDI+ 路线。

# vba - 使用 OpenText 避免以科学计数法保存

> ID：11614435
> 
> 赞同：0
> 
> 时间：2012-07-23T14:21:53.020
> 
> 标签：vba, excel, notation

我试图在一个看起来像这样的文件上使用[这篇文章](https://stackoverflow.com/questions/11141951/how-to-convert-the-scientific-numbers-to-general)`OpenText`中描述的方法：

> Ref,AccNum,SCode,RollNum
> 999,15697668,404040,4921817045040610

当我运行此代码时，第四列仍以科学记数法出现：

```
Workbooks.OpenText FileName:="H:\DataFile.csv", Origin:=3, StartRow:=1, _
        DataType:=1, TextQualifier:=1, ConsecutiveDelimiter:=False, _
        Tab:=False, Semicolon:=False, Comma:=True, Space:=False, _
        Other:=False, FieldInfo:=Array(Array(4, 2)), _
        TrailingMinusNumbers:=True 
```

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:09:28.427

这有效：

`FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 2))`

似乎您无法删除`Array()`您不感兴趣的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:16:47.080

Excel 会自动对大数字进行这些转换，但您可以通过以文本格式显示数字来解决它。
此示例显示语法：

```
ThisWorkbook.Sheets(1).Columns(4).NumberFormat = "@" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T12:36:31.150

另一种方法是逐行读取 csv，将其加载到多维数组中，并在字符串前添加撇号。
我已经对此进行了测试，并且我很肯定它有效。

```
Sub ReadLines()

Dim oFSO                As FileSystemObject
Dim sLine               As String
Dim vArray()            As String
Dim vArray_Final        As Variant
Dim oTS                 As TextStream
Dim iCols               As Integer
Dim iRows               As Integer

Dim lCnt                As Long
Dim lCnt_X              As Long
Dim lCnt_Y              As Long

Set oFSO = New FileSystemObject
Set oTS = oFSO.OpenTextFile("U:\DataFile.csv")

lCnt_X = 1
lCnt_Y = 1

iCols = 4

Do Until oTS.AtEndOfStream
    sLine = oTS.ReadLine
    iRows = iRows + 1
Loop
Set oTS = Nothing

Set oTS = oFSO.OpenTextFile("U:\DataFile.csv")
ReDim vArray_Final(1 To iRows, 1 To iCols)

Do Until oTS.AtEndOfStream

    lCnt = lCnt + 1
    lCnt_X = 1
    lCnt_Y = 1

    sLine = oTS.ReadLine
    vArray = Split(sLine, ",")

    For lCnt_Y = 1 To iCols
        vArray_Final(lCnt, lCnt_Y) = vArray(lCnt_Y - 1)
    Next lCnt_Y

Loop

Set oTS = Nothing
Set oFSO = Nothing

For lCnt_X = 1 To iRows
    For lCnt_Y = 1 To iCols
        If lCnt_Y = iCols Then
            ThisWorkbook.Sheets(3).Cells(lCnt_X, lCnt_Y).Value = "'" & vArray_Final(lCnt_X, lCnt_Y)
        Else
            ThisWorkbook.Sheets(3).Cells(lCnt_X, lCnt_Y).Value = vArray_Final(lCnt_X, lCnt_Y)
        End If
    Next lCnt_Y
Next lCnt_X

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-27T22:43:57.820

使用 FieldInfo 参数指定文本有效，除非它是 .csv，在这种情况下，您只需将扩展名更改为 .txt。出于某种原因，CSV 文件会忽略此类信息。但是该数组必须涵盖所有字段，而不仅仅是您要导入的字段（跳过是选项之一。）

# sql - 有哪些在线网站可以编译和运行 PL/SQL？

> ID：11614436
> 
> 赞同：31
> 
> 时间：2012-07-23T14:21:54.760
> 
> 标签：sql, plsql, oracle11g, saas

我想在线执行PL/SQL程序进行练习。任何人都可以建议我任何可以编译和运行代码并显示结果的网站吗？谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T21:17:32.597

[SQL小提琴](http://sqlfiddle.com)

这是一个简单的使用示例：

[http://sqlfiddle.com/#!4/8cf15/5](http://sqlfiddle.com/#!4/8cf15/5)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-06T17:06:59.387

以下是一些可以帮助执行 Oracle SQL 查询和 PL/SQL 代码的在线网站 -

*   [Oracle Live Sql](https://livesql.oracle.com/) - 可以保存所有 PL/SQL 脚本

*   [Sql Fiddle](http://sqlfiddle.com) - 轻松创建模式和查询并与他人共享。

*   [Oracle Apex](http://apex.oracle.com) - 测试 Apex，它还允许您创建对象和运行脚本。

*   [Sql Zoo](http://sqlzoo.net/wiki/Main_Page) - 交互式 SQL 教程。PL/SQL 编码基础——创建对象和运行脚本

*   [教程点](http://www.tutorialspoint.com/oracle_terminal_online.php)- 创建对象和运行脚本

    在编码场，您可以使用以下步骤执行 .sql 脚本。

    1.点击新建项目。

    2.单击“+”符号。`-- A new .sql file will be created (Newfile.sql)`

    3.以@filename .sql 的形式执行**.sql** (Ex : `@Newfile.sql`)

# c# - 删除另一个进程使用的文件并获取其信息

> ID：11614437
> 
> 赞同：0
> 
> 时间：2012-07-23T14:21:55.353
> 
> 标签：c#, process, pinvoke

我正在编写一个程序来搜索一些文件并删除它们。我希望实现两件事（可能使用 PInvoke）： - 找到所有使用“找到的文件”的进程，将其杀死并删除文件， - 获取有关该进程的信息（它的名称应该没问题 - 用于日志）。你知道任何有用的 PInvoke 方法吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:36:54.327

看：

*   [MSDN 上的进程和线程函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684847%28v=vs.85%29.aspx)
*   [MSDN 上的文件管理功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364232%28v=vs.85%29.aspx)

*具体来说，可能会派上用场的功能是：*

*   [MoveFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240%28v=vs.85%29.aspx)
*   [开放式进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)
*   [NtQueryInformationProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684280%28v=vs.85%29.aspx)现在被[GetProcessInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448381%28v=vs.85%29.aspx)取代。

另外，请记住，在开发对文件和进程进行操作的程序时，您需要具备良好的 C++ 知识。我在开发反恶意软件工具时很难学到这一点。

# android - 用于 android 和未知重定位的 Hello world 内核模块：insmod 时为 27

> ID：11614441
> 
> 赞同：13
> 
> 时间：2012-07-23T14:22:09.697
> 
> 标签：android, module, linux-kernel, kernel, kernel-module

我正在尝试创建一个简单的内核模块。我正在尝试将消息打印到 dmesg 但我不断收到

insmod：android 中的 init_module 'hello.ko' 失败（执行格式错误）

之后：dmesg：未知重定位：27

```
#include <linux/module.h>
#include <linux/kdb.h>
int init_module(void)
{
    printk(KERN_ALERT "Hello world!\n");
    return 1;
}

void cleanup_module(void)
{
    printk(KERN_INFO "Goodbye world 1.\n");
}
MODULE_AUTHOR("Robert P. J. Day");
MODULE_LICENSE("Dual BSD/GPL");
MODULE_VERSION("2:1.0") ;
MODULE_DESCRIPTION("You have to start somewhere."); 
```

制作文件

```
 obj-m +=hello.o

KERNELDIR ?= ~/android/kernel/common
#KERNELDIR ?= /lib/modules/$(shell uname -r)/build
PWD := $(shell pwd)
CROSS_COMPILE=~/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-

ARCH=arm
default:
$(MAKE) -C $(KERNELDIR) M=$(PWD) ARCH=arm CROSS_COMPILE=$(CROSS_COMPILE) modules

clean:
$(MAKE) -C $(KERNELDIR) M=$(PWD) clean
rm *.symvers 
```

有谁知道为什么？以及如何让它工作？

我在做了一个 readelf 之后发现，当它被编译时，重定位部分指向了错误的方向。

```
Offset     Info    Type            Sym.Value  Sym. Name
00000008  0000171b R_ARM_PLT32       00000000   printk 
```

实际上它应该是：

```
Offset     Info    Type            Sym.Value  Sym. Name
00000008  0000171c R_ARM_CALL       00000000   printk 
```

有人能猜出/知道这可能是什么吗？感谢@Chris Stratton 到目前为止帮助我。

* * *

我在做了一个 readelf 之后发现，当它被编译时，重定位部分指向了错误的方向。

```
Offset     Info    Type            Sym.Value  Sym. Name
00000008  0000171b R_ARM_PLT32       00000000   printk 
```

实际上它应该是：

```
Offset     Info    Type            Sym.Value  Sym. Name
00000008  0000171c R_ARM_CALL       00000000   printk 
```

有人能猜出/知道这可能是什么吗？感谢@Chris Stratton 到目前为止帮助我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T15:12:12.620

事实证明我不得不使用

```
make CFLAGS_MODULE=-fno-pic 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:51:59.870

谢谢，-fno-pic 也让我的 dlkm 工作了。开始“真正的”工作......

顺便说一句，您可以在 shell 中导出 ARCH、SUBARCH、CROSS_COMPILE、KERNELDIR，因此 Makefile 变得非常简单。这还允许通过正确设置 KERNELDIR 更轻松地为本机或目标平台构建 dlkm（本机不需要 ARCH、SUBARCH 或 CROSS_COMPILE 变量。）

obj-m += hello.o

全部：制作 -C $(KERNELDIR) M=$(PWD) 模块

# forms - 嵌入drupal 7节点表单

> ID：11614444
> 
> 赞同：2
> 
> 时间：2012-07-23T14:22:16.413
> 
> 标签：forms, drupal, drupal-7, embed

我想知道是否可以在页面中插入节点。我使用 Drupal 7，但我找不到如何做到这一点。

有人有想法吗？我试图这样做：

```
 function test(){

       if (!function_exists('node_add')) {
        module_load_include('inc', 'node', 'node.pages');
       }

       print drupal_render(node_add('node_example'));

    } 
```

我的表格显示但效果不佳。这是我的主题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:01:20.007

I hope I am understanding your question correctly. The answer to my comment did help! If it *is* a node form that you're trying to add to the menu, this is typically done with a hook_menu() function in Drupal. Here is some sample code to get you started

```
function YOURMODULE_menu() {

 // Here, substitute in the URL of your page.  It can be mymodule/add_content or whatever else you'd like
 $items['YOUR_PAGE_URL'] = array(
    'type' => MENU_CALLBACK,
    'title' => t('YOUR PAGE TITLE'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('your_node_function'),      // Here, you should put in the function that creates your node form
    'access arguments' => array('Administer content'),  // This is optional, you can require a user to have certain permissions set to access your page/form
 );

 return($items);

} 
```

Remember to clear your cache before you test it!

Sample code in your function that is creating the form:

```
function your_node_function($form, &$form_state)
{
  $form['field_1'] = array(
   '#type' => 'textfield',
   '#title' => t('Field label'),
   '#description' => t('Help user understand what to input here'),
   '#required' => TRUE,
  );

  return $form;
} 
```

See if you can see this tiny one-field form to get you started. This doesn't explain how to actually save the user data, etc because that is outside the scope of what a single answer here can provide, but this should help you get started on a form that's hooked up to the menu system....

I hope this helped!!!!

=================== EDIT ===================

Here is online documentation for the different types of form elements you can add to forms in Drupal: [http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7)

# javascript - 将确认 javascript 添加到 asp.net 生成的链接

> ID：11614446
> 
> 赞同：0
> 
> 时间：2012-07-23T14:22:26.927
> 
> 标签：javascript, asp.net

我在服务器上生成了许多按钮，每个按钮都是唯一的。

我希望能够有一个弹出窗口询问用户是否确实想要点击，然后让它继续回发。

生成的按钮代码为：

```
<a id="ctl00_ContentPlaceHolder1_btnID9994"
   href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$btnID9994','')">
    <img src="mt_locked.gif"/>
</a>

<a id="ctl00_ContentPlaceHolder1_btnID9995"
   href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$btnID9995','')">
    <img src="mt_locked.gif"/>
</a> 
```

使用此方法生成按钮：

```
 objBtn.ID = "btnID" & room_id.ToString
 objBtn.CommandArgument = "Unblock"
 AddHandler objBtn.Click, AddressOf btnClicked 
```

无论如何我可以在生成上面的按钮时添加确认 javascript 代码，所以它将在这里的某个地方呈现：

```
href="javascript:***confirm code here somewhere - if ok then continue to:... __doPostBack('ctl00 
```

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:29:11.237

我有点困惑，因为您说的是按钮，但结果是`<a>`. 为什么不只使用 ASP.NET 图像按钮。

**HTML**：

```
<asp:ImageButton runat="server" ID="btn_YourButton" ImageUrl="pathToImage" OnClick="btn_YourButton_Click" /> 
```

**服务器端**：

```
btn_YourButton.Attributes.Add("onclick", string.Format(@"javascript:; if(!confirm('Are you sure you want to delete the user ""{0}""?'))return false;", username)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:29:38.717

您可以在生成按钮时执行以下操作：

```
objBtn.Attributes.Add("onclick", " return confirm('confirmation message');"); 
```

或者在客户端，使用 jQuery

```
$(function(){
   $("a[id=*btnID]").click(function(){
      return confirm('confirmation message');
   });
}); 
```

# c++ - 将 hDC 转换为 4bpp 位图

> ID：11614448
> 
> 赞同：0
> 
> 时间：2012-07-23T14:22:28.503
> 
> 标签：c++, windows, visual-studio, gdi+

我正在开发一个应用程序，该应用程序对 HDC 中选择的 HBITMAP 进行一些 GDI+ 绘图。绘制完成后，我需要：

1.  从hDC获取位图
2.  将该位图转换为 4bpp 位图
3.  将 4bpp 位图的原始位发送到其他方法。

我真的迷路了，我对 GDI+ 和句柄真的很陌生。谁能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:37:42.450

[GetDIBits](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144879%28v=vs.85%29.aspx)是用于转换和检索原始位的函数，即 (2) 和 (3)。

如果您还没有 BITMAP 的句柄，则必须使用[CreateCompatibleDC](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183489%28v=vs.85%29.aspx)创建一个新的 DC ，在其上创建一个兼容的位图，然后从源 DC 到目标 DC 执行 BitBlt。然后在目标 DC 和位图上执行 GetDIBits 以检索您需要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:43:42.160

首先，您绘制到 HDC，而不是 HBITMAP。HBITMAP 获取通过 HDC 绘制的数据。您需要创建一个新的位图来获取 4bpp 数据。然而，这样的颜色深度太低（仅限 16 色）。它是基于调色板的吗？转换（减少颜色深度）可能不是很好，或者可能无法按照您想要的方式工作。我建议从 32 位位图中读取 RGB 值，然后使用您自己的代码将它们转换为 4bpp。否则，您将需要一个图像库，它将根据需要执行转换。

# linux - 为什么可以在没有事先分配内存的情况下使用堆栈？

> ID：11614451
> 
> 赞同：1
> 
> 时间：2012-07-23T14:22:45.480
> 
> 标签：linux, memory, stack

进程的虚拟地址空间以进程的`text`、`data`和`bss`段开始。放置此堆分配后，堆会向更大的内存地址增长。但是，在使用堆的一部分之前，必须分配内存块（`valloc`等等），否则`segfault`会发生（或应该发生）。

堆栈从虚拟地址空间中的初始大地址向更小的值增长。据我所知，这无需虚拟内存分配即可工作。如果在堆的情况下这是不可能的，如何在没有事先分配内存的情况下使用堆栈？（它是相同的线性虚拟地址空间。）

据 ai 所知`alloca`，它的实现方式与`sub esp, <size>`. 但是堆栈使用的虚拟地址空间区域必须在此之前以某种方式分配，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:55:26.520

在某种程度上，它*确实存在段错误。*这是一种“惰性”优化。操作系统尽可能多地作弊，只要差异不可从外部观察到。

但是，陷阱不会像正常的段错误那样导致生成信号（默认情况下会终止进程）。相反，操作系统会验​​证允许的线程大小尚未超过，然后从零池中拉出一个新页面。

在 Windows 下，该机制被称为“保护页面”，我不知道在 Linux 下有类似的命名。无论哪种方式，从技术上讲，保护页面只不过是一个写保护页面（或不存在的页面），操作系统将其记住为“特殊”，因此当它被触摸时可能会发生一些特定的动作。

`malloc`这也与动态分配（调用`sbrk`）的工作方式非常相似。当您分配内存时，只要您不访问分配的内存，就不会发生太多事情。唯一发生的事情是操作系统“记住”您增加了数据段。
如果现在发生故障，操作系统将创建页面，或者分别从零池中拉取它，并假装它一直在那里。你永远不知道它以前不存在。

# sql-server - 如何从表格中选择最新的每日数据？

> ID：11614453
> 
> 赞同：0
> 
> 时间：2012-07-23T14:22:48.137
> 
> 标签：sql-server, windows, tsql

我有一个记录表。在此表中有一个列类型 datetime。如何选择最新的每日记录？有人可以帮我吗？

谢谢！

**更新！** 在此表中有以下列：InventoryNr、SerialNr、Oldusername、OlduserId、oldcostcenter、newusername、newuserid、newcostcenter、changedby、changedate。

此处将自动插入设备。因此，如果在计算机上检测到监视器，它将记录在此表中。但是，如果我将显示器移动到另一台电脑上，它将再次被记录。但在某些情况下，监视器可以在两台 PC 之间“跳转”。和 PC 一样。如果 PC 的所有者已更改，那么它将自动插入此处等。因此，如果我运行此查询，我只需要设备中的最新行，从当天开始。希望你现在能明白我的意思。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:26:53.610

无论何时发生，要获取最后 20 行：

```
SELECT TOP (20) cols FROM dbo.LoggingTable ORDER BY EventDate DESC; 
```

要获取今天发生的所有行，按降序排列：

```
SELECT cols FROM dbo.LoggingTable
  WHERE EventDate >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP))
  ORDER BY EventDate DESC; 
```

只获取最后 20 行，只要它们发生在今天（这意味着您可以获得 < 20 行）：

```
SELECT TOP (20) cols FROM dbo.LoggingTable
  WHERE EventDate >= DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP))
  ORDER BY EventDate DESC; 
```

我强烈建议不要将任何公式应用于列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:28:33.563

如果使用 SQL 2008，您可以：

`SELECT * FROM Table WHERE TimeStamp > CAST(GETDATE() AS DATE) ORDER BY TimeStamp DESC`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:25:20.600

尝试这个：

```
select yourFields from yourTable
group by yourFieldDate,yourOtherFields
having yourFieldDate= MAX(yourFieldDate) 
```

# facebook - Facebook 点赞计数器和 FQL total_count

> ID：11614454
> 
> 赞同：1
> 
> 时间：2012-07-23T14:22:48.990
> 
> 标签：facebook, facebook-graph-api, facebook-like

我想知道是否可以检索点赞按钮计数器中显示的点赞总数。

FB 文档说：

显示的数字是以下各项的总和：

此 URL 的点赞数 此 URL 的分享数（包括复制/粘贴回 Facebook 的链接） Facebook 上有关此 URL 的故事的点赞数和评论数 包含此 URL 作为附件的收件箱消息数.

所以我认为使用 FQL 获取 total_count 应该如下：

SELECT total_count FROM link_stat WHERE url = "myurl"

在某些情况下，这似乎是正确的，但有时在图形对象中返回了共享（包含在 total_count 中），但这些不会出现在点赞按钮计数器上。

对此我能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:32:11.737

在我的博客上，它显示了 55 个总份额。如果你进入博客，并且将每个帖子的分享数计算为55的几倍。请问你能找到什么问题吗？[http://farik.us](http://farik.us)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:21:46.713

如果您知道对象的 ID 或 URL，则可以对 Graph API 进行简单调用以获取此计数：

`https://graph.facebook.com/{object_id}`或者`https://graph.facebook.com/{encoded_url}`

返回 JSON 中的`shares`应该与 Like 按钮上的数字匹配。

# java - 如何将变量从 Android Activity 提交到网站 url？

> ID：11614456
> 
> 赞同：2
> 
> 时间：2012-07-23T14:23:04.117
> 
> 标签：java, android, http-post, httpurlconnection

我有一个像表单一样工作的应用程序，它需要四个字段并验证信息以确保没有输入无效字符。这四个字段存储在变量中：

*   电话
*   姓名
*   电子邮件
*   评论

    现在我想将表单数据（在这四个字段中输入并存储到变量中的任何内容）提交到一个 url（将使用[http://www.test.com](http://www.test.com)），但我不知道该怎么做. 我想我正在寻找一种叫做 HttpURLConnection 的东西，但我不确定如何指定发送哪个变量。下面的代码是我从网站[http://developer.android.com/reference/java/net/HttpURLConnection.html找到的](http://developer.android.com/reference/java/net/HttpURLConnection.html)

    ```
    private class UploadFilesTask extends AsyncTask<URL, Integer, Long>{
    protected Long doInBackground(URL... urls) {

        try {
            HttpClient http = new DefaultHttpClient();
            HttpPost post = new HttpPost("http://www.test.com");

            List<NameValuePair> data = new ArrayList<NameValuePair>();
            data.add(new BasicNameValuePair("phone", "value"));
            data.add(new BasicNameValuePair("name", "value"));
            data.add(new BasicNameValuePair("email", "value"));
            data.add(new BasicNameValuePair("comments", "value"));
            post.setEntity(new UrlEncodedFormEntity(data));

            HttpResponse response = http.execute(post);
            // do something with the response
        }
        catch (ClientProtocolException e) {
            // do something
            finish();
        }
        catch (IOException e) {
            // do something
            finish();
        } 
    ```

    }

    }

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:27:52.330

将表单数据发送到服务器的最简单方法是使用 HttpClient 和 HttpPost。

尝试这样的事情：

```
try {
    HttpClient http = new DefaultHttpClient();
    HttpPost   post = new HttpPost("http://www.example.com/process");

    List<NameValuePair> data = new ArrayList<NameValuePair>();
    data.add(new BasicNameValuePair("phone", "value");
    data.add(new BasicNameValuePair("name", "value");
    data.add(new BasicNameValuePair("email", "value");
    data.add(new BasicNameValuePair("comments", "value");
    post.setEntity(new UrlEncodedFormEntity(data));

    HttpResponse response = http.execute(post);
    // do something with the response
}
catch (ClientProtocolException e) {
    // do something
}
catch (IOException e) {
    // do something
} 
```

请注意，您需要在 AsyncTask 中执行此操作，这样您就不会锁定等待网络操作完成的 UI 线程。

**编辑**

这是一个简单的快速示例，说明它在 AsyncTask 中的外观。

```
public class SendTask extends AsyncTask<Void, Void, Boolean> {

    String responseString;

    @Override
    protected Boolean doInBackground(Void... params) {
        try {

            HttpClient http = new DefaultHttpClient();
            HttpPost post = new HttpPost("http://www.test.com");

            List<NameValuePair> data = new ArrayList<NameValuePair>();
            data.add(new BasicNameValuePair("phone", "value"));
            data.add(new BasicNameValuePair("name", "value"));
            data.add(new BasicNameValuePair("email", "value"));
            data.add(new BasicNameValuePair("comments", "value"));
            post.setEntity(new UrlEncodedFormEntity(data));

            HttpResponse response = http.execute(post);
            responseString = new BasicResponseHandler().
                                 handleResponse(response); // Basic handler
            return true;
        }
        catch (ClientProtocolException e) {
            // do something useful to recover from the exception
            // Note: there may not be anything useful to do here
        }
        catch (IOException e) {
            // do something useful to recover from the exception
            // Note: there may not be anything useful to do here
        }           
        return false;
    }
    @Override
    protected void onPostExecute(Boolean success) {
        // TODO: Do something more useful here
        if (success) {
            Toast.makeText(MainActivity.this, "Success: " + responseString, Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(MainActivity.this, "Failed", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:26:57.813

将字段作为参数添加到 url。

```
String phone="phone=234432";
String name="name=John Smith";
String email="email=test@email.com"; 

Url = new URL("http://www.test.com?"+phone+"&"+name+"&"+email); 
```

未经测试，但它应该在 GET Http 请求中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:41:03.507

//使用xml请求

```
String url="http://www.test.com";
String xmlRequest="<message xmlns=\"http://test.com/schemas/ma\"><header></header>"+
"<body><phone>9944556622</phone><name>Mytest name</name><email>mytest@email.com</email>"+"<comments>hay this seems nice</comments></body></message>"

HttpPost httppost = new HttpPost(url);
    StringEntity se = new StringEntity(xmlRequest,HTTP.UTF_8);

httppost.setHeader("Content-Type","application/xml");
httppost.setHeader("Accept","application/xml");

httppost.setEntity(se);

BasicHttpResponse httpResponse = (BasicHttpResponse) httpclient.execute(httppost);

   StatusLine statusLine = httpResponse.getStatusLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T15:25:50.563

```
 HttpClient httpClient = new DefaultHttpClient();
                    Log.i("sampath","line 139");
                    HttpPost httpPost = new HttpPost(url);

                    BasicNameValuePair usernameBasicNameValuePair = new BasicNameValuePair("textMessage", msg);

                    List<NameValuePair> nameValuePairList = new ArrayList<NameValuePair>();
                    nameValuePairList.add(usernameBasicNameValuePair);

                    try {

                        UrlEncodedFormEntity urlEncodedFormEntity = new UrlEncodedFormEntity(nameValuePairList);

                        httpPost.setEntity(urlEncodedFormEntity);

                        try {

                            HttpResponse httpResponse = httpClient.execute(httpPost);

                            InputStream inputStream = httpResponse.getEntity().getContent();

                            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);

                            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

                            StringBuilder stringBuilder = new StringBuilder();

                            String bufferedStrChunk = null;

                            while((bufferedStrChunk = bufferedReader.readLine()) != null){
                                stringBuilder.append(bufferedStrChunk);
                            }

                            return stringBuilder.toString();

                        } catch (ClientProtocolException cpe) {
                            System.out.println("Firstption caz of HttpResponese :" + cpe);
                            cpe.printStackTrace();
                        } catch (IOException ioe) {
                            System.out.println("Secondption caz of HttpResponse :" + ioe);
                            ioe.printStackTrace();
                        }

                    } catch (UnsupportedEncodingException uee) {
                        System.out.println("Anption given because of UrlEncodedFormEntity argument :" + uee);
                        uee.printStackTrace();
                    }

//---------------------------------------------------------------------------
Here is the php file

<?php
$message = $_POST['textMessage'];
echo 'working fine'.$message;
$filename="androidmessages.html";
file_put_contents($filename,"Entered Text is:".$message."<br />",FILE_APPEND);
?> 
```

# c# - 将触发器绑定到父集合中的元素

> ID：11614464
> 
> 赞同：4
> 
> 时间：2012-07-23T14:23:40.290
> 
> 标签：c#, .net, wpf, collections, triggers

我有一个控件，它的依赖属性“IsLightOnVal”是这样定义的：

```
// List of available states for this control
private ObservableCollection<CtlStateBool> m_IsLightOnVal;

[Category("Properties")]
public System.Collections.ObjectModel.ObservableCollection<CtlStateBool> IsLightOnVal
{
    get
    {
        if (m_IsLightOnVal == null)
            m_IsLightOnVal = new System.Collections.ObjectModel.ObservableCollection<CtlStateBool>();
        return m_IsLightOnVal;
    }
    set
    {
        if (m_IsLightOnVal != value)
        {
            m_IsLightOnVal = value;
            OnPropertyChanged("IsLightOnVal");
        }
    }
}

// IsLightOnVal dependency property.
public static readonly DependencyProperty IsLightOnValProperty =
        DependencyProperty.Register("IsLightOnVal", typeof(System.Collections.ObjectModel.ObservableCollection<CtlStateBool>), typeof(ButtonSimple), new UIPropertyMetadata(new System.Collections.ObjectModel.ObservableCollection<CtlStateBool>())); 
```

在我的集合中，每个元素都包含一个字符串（状态）和一个布尔值（值）

我的控件样式在 ControlTemplate 中定义。

我想添加一个触发器，例如，当我的集合中的第一个元素为真时，然后做一些事情。

我试过这个：

```
<Style x:Key="Btn_RADIO_VHF" TargetType="{x:Type ButtonSimple}">
   <Setter Property="Template">
      <Setter.Value>
         <ControlTemplate TargetType="{x:Type ButtonSimple}">
            <Canvas .../>
            <ControlTemplate.Triggers>
               <DataTrigger Value="True" Binding="{Binding IsLightOnVal[0].Value, RelativeSource={RelativeSource TemplatedParent}}">
                  <Setter Property="Fill" TargetName="pShowTouch" Value="{DynamicResource ShowTouch}"/>
               </DataTrigger>
            </ControlTemplate.Triggers> 
```

我也尝试使用简单的触发器而不是 DataTrigger，但它似乎不支持绑定......

有人能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:38:29.700

现在你的触发器永远不会被触发，因为`ObservableCollection`不支持包含元素的属性更改通知。

您可以尝试实现`ObservableCollection`支持 ChangeNotification 的专业化，如此处所示，例如[Extending ObservableCollection](http://www.sieena.com/blog/archive/2011/01/25/extending-observablecollection-lt-t-gt-to-notify-when-an-item-has-changed-.aspx)

`ObservableCollection`但是，将您的第一个值存储在 ViewModel/Code 后面并将其设置为触发器的目标可能更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T17:12:34.327

你那里有很多问题。首先，您使用的是**TemplatedParent的****RelativeSource** ，但这不是应用于模板中元素的绑定，因此您应该使用**Self**。因此可以相对容易地修复：

 ****```
<DataTrigger Value="True" Binding="{Binding Path=IsLightOnVal[0].Value, RelativeSource={RelativeSource Self}}"> 
```

其次，您已将此属性定义为 CLR 属性（具有自己的后备存储）和 DependencyProperty。如果属性被定义为 DP，那么框架将期望您使用 DP 来存储值。在您的代码中，您永远不会使用 SetValue 方法将集合实例实际存储在 DependencyObject 的后备存储中。所以有很多方法可以解决这个问题：

1) 卸下 DP：

```
//public static readonly DependencyProperty IsLightOnValProperty =
//        DependencyProperty.Register( "IsLightOnVal", typeof( System.Collections.ObjectModel.ObservableCollection<CtlStateBool> ), typeof( ButtonSimple ), new UIPropertyMetadata( new System.Collections.ObjectModel.ObservableCollection<CtlStateBool>() ) ); 
```

由于它不是 DP，尽管您无法在 setter 中设置它，将其绑定到 VM 上的某些属性等，因此这可能不是最佳选择。

2）将值存储在 DP 以及您的局部变量中：

```
public System.Collections.ObjectModel.ObservableCollection<CtlStateBool> IsLightOnVal
{
    get
    {
        if ( m_IsLightOnVal == null )
            this.SetValue(IsLightOnValProperty, m_IsLightOnVal = new System.Collections.ObjectModel.ObservableCollection<CtlStateBool>());
        return m_IsLightOnVal;
    }
    set
    {
        if ( m_IsLightOnVal != value )
        {
            this.SetValue( IsLightOnValProperty, m_IsLightOnVal = value );
            OnPropertyChanged( "IsLightOnVal" );
        }
    }
} 
```

我个人不喜欢这个选项。或者更具体地说，我认为在吸气剂中懒惰地分配自己的财产是不好的做法。这将在对象上设置一个本地值，如果有人实际上将其设置为较低的优先级，则该值可能会覆盖实际值（例如，在模板中定义了 this 的实例并且在那里设置/绑定了属性）。如果您计划设计时支持，这可能会搞砸设计师。如果你确实走这条路，那么你真的应该在你的 DP 定义中添加一个 PropertyChangedHandler 并确保在那里设置你的 m_IsLightOnVal 成员变量，否则如果通过 DP 设置值（例如某人 - 包括WPF 框架 - 使用 SetValue 设置属性的值）。

3) 只使用 GetValue/SetValue

```
public System.Collections.ObjectModel.ObservableCollection<CtlStateBool> IsLightOnVal
{
    get { return (System.Collections.ObjectModel.ObservableCollection<CtlStateBool>)this.GetValue(IsLightOnValProperty); }
    set { this.SetValue( IsLightOnValProperty, value ); }
} 
```

我会推荐这种方法。是的，这意味着任何希望设置属性的人都必须定义集合的实例，但我认为这比设置自己的 DP 值可能遇到的问题更可取。请注意，如果您采用这条路线，那么您可能想要定义一个派生自 ObservableCollection 的非泛型集合类，以便有人可以在 xaml 中定义集合类的实例，尽管如果您希望它只是绑定到那么 this可能不是问题。从对其他回复的评论中，虽然听起来它可能是在 xaml 中设置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:01:23.543

找到了：

```
<DataTrigger Binding="{Binding MyCollection[index].Value, RelativeSource={RelativeSource Self}}" Value="True">
    <Setter .../>
</DataTrigger> 
```****

# c# - 如何在类似 Space Invaders 的游戏中执行子弹/敌人矩形碰撞检测？

> ID：11614471
> 
> 赞同：4
> 
> 时间：2012-07-23T14:24:06.620
> 
> 标签：c#, xna, 2d, collision-detection

我最近发布了一个关于发射子弹的问题，我（当然在帮助下）设法弄清楚了。我现在有一个新问题，我无法弄清楚子弹和我的敌人之间的碰撞检测。我不想一次发布我所有的代码，所以这里是我的类列表，我将根据您的要求在其中发布代码：

*   cButton（这只是一个“播放”按钮，不需要帮助）。
*   子弹
*   游戏1
*   敌人

PS这只是我的第二个帖子，对我放轻松；） **注意：**玩家只会左右移动，而敌人会从上到下在一条直线上移动（如果这有帮助的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:31:57.620

这是我以前使用过的一种非常简单的方法。在子弹周围设置一个矩形：

```
Rectangle bulletRect = new Rectangle(bulletPosition.X, bulletPosition.Y, bulletText.Width, bulletText.Height); 
```

对敌人也一样：

```
Rectangle enemyRect = new Rectangle(enemyPosition.X, enemyPosition.Y, enemyText.Width, enemyText.Height); 
```

然后在测试碰撞时，您可以使用：

```
if(bulletRect.Intersects(enemyRect))
{
   //We have a collision
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:31:00.107

我假设您必须检查子弹是否进入了一艘船当前占用的街区，如果是，则将其摧毁并取出子弹。如果您发布相关代码可能会有所帮助。:)

# r - 将字符类型转换为逻辑类型

> ID：11614473
> 
> 赞同：12
> 
> 时间：2012-07-23T14:24:14.260
> 
> 标签：r

我正在尝试创建一些对不熟悉 R 的人来说非常用户友好的代码。代码的设计使得可以根据用户正在寻找的内容轻松操纵逻辑标准。因此，与其强迫用户在 if 语句中工作，我只想在代码顶部创建一个包含逻辑语句的字符变量（即`x <- "a > 2"`）。

然后我想使用包含逻辑运算符的字符变量来评估 if 语句。这是基本思想：

```
a <- 3
x <- "a > 2"
if(x)TRUE 
```

这显然会返回参数不可解释为逻辑的错误，因为它将 x 视为字符串“a > 2”。

我知道我可以简单地做：

```
a <- 3
x <- as.logical(a > 2)
if(x)TRUE 
```

但是，就我正在处理的事情而言，最好将这些逻辑语句最初存储为字符。而且 as.logical() 似乎无法转换字符（即`as.logical("a > 2")`）不起作用。

我的问题：是否有一些函数可以让 x 让 R 不将其视为一个字符，而是将其视为一个逻辑语句？换句话说，我怎样才能去掉引号，以便逻辑语句可以在 if 语句中工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T14:30:58.670

您可以使用`eval(parse(...))`.

```
a <- 3
x <- "a > 2"

eval(parse(text=x))
[1] TRUE

x2 <- "a==3"
eval(parse(text=x))
[1] TRUE 
```

* * *

**这里是龙**。

参见，例如：

*   [R: eval(parse(...)) 通常不是最理想的](https://stackoverflow.com/questions/11025031/r-evalparse-is-often-suboptimal)
*   [评估作为字符串给出的表达式](https://stackoverflow.com/questions/1743698/r-eval-expression)
*   [在循环中分配和删除对象： eval(parse(paste(](https://stackoverflow.com/q/3710978/602276)
*   [R：eval（parse（））错误消息：即使在解析中指定了“text =”，也无法打开文件](https://stackoverflow.com/questions/10611209/r-evalparse-error-message-cannot-open-file-even-though-text-is-specifie)

# javascript - 使用 javascript 显示内容

> ID：11614480
> 
> 赞同：-2
> 
> 时间：2012-07-23T14:24:34.523
> 
> 标签：javascript, xmlhttprequest

快速提问，为什么这不起作用？

```
if ( xmlhttp.responseText )
{
    location.href = "result.php"
    document.getElementById( 'page-result' ).innerHTML = xmlhttp.responseText;      
} 
```

我想要做的是将搜索结果放在另一个页面上的 div 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:30:26.813

通过在查询字符串中传递消息来重定向到下一页，例如...

```
if ( xmlhttp.responseText )
{
    location.href = "result.php?responseText=" + encodeURIComponent(xmlhttp.responseText);
} 
```

在 result.php 中，将参数“responseText”的内容输出到任何你想要的地方。

前任。在 php 中：`<?php echo $_GET["responseText"]; ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:30:45.167

每个 HTML 页面都是独立的；浏览器从每个页面的全新页面开始，因此您不能像这样从上一页操作下一页的 DOM。您必须使用 GET 或 POST（或 cookie 或 session 或...）将信息传递到下一页，并在那里单独处理信息。

# php - Datepicker 适用于 Firefox 或 Chrome 中的 IE 错误

> ID：11614482
> 
> 赞同：0
> 
> 时间：2012-07-23T14:24:41.333
> 
> 标签：php, javascript

带有日期选择器的 Web 表单，其中一个字段是 cdate ，我使用 jsdatepick 作为该字段。

```
<script type="text/javascript">
    window.onload = function(){
        new JsDatePick({
            useMode:2,
            target:"cdate",
            dateFormat:"%d-%M-%Y"

    };
</script>

<form method="POST" action="insert_record.php">

<tr>
 <td style="width: 143px">Call Date:
 </td>
<td style="width: 472px">
<input type=text id="cdate" name="cdate"  size=40 style="color: black;background-color:#FFFF66; width: 270px;">
</td> 
```

表单提交 php 是

```
<?
$cdate=$_POST['cdate'];
$db="call";
$link = mysql_connect("localhost", "sql", "sql");
//$link = mysql_connect("localhost",$_POST['username'],$_POST['password']);
if (! $link)
die("Couldn't connect to MySQL");
mysql_select_db($db , $link) or die("Select Error: ".mysql_error());
$result=mysql_query("INSERT INTO data (cdate) VALUES ('$cdate')")or die("Insert Error: ".mysql_error());
mysql_close($link);
print "Record added\n";
?> 
```

但是，一旦提交，我会收到消息说::

> 注意：未定义索引：第 4 行 d:\web\apache\htdocs\callz\submit_record.php 中的 cdate

此消息仅出现在 Firefox 或 Chrome 中，在任何版本的 IE 中都可以正常工作有什么想法吗？请注意，除了 cdate 之外还有其他变量，所有这些变量都可以毫无问题地进入表中，似乎只是 datepick 之一。我已经尝试了另一个 datepick，但这并没有发生，只有 jsdatepick，但 jsdatepick 更合适。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:31:09.740

你**从来没有**关闭你的表单标签。

所以基本上 Chrome 和 FF 会为你关闭表单标签，你会得到这个：

```
<form method="POST" action="insert_record.php"> </form> << NOTHING HERE!

<tr>
 <td style="width: 143px">Call Date:
 </td>
<td style="width: 472px">
<input type=text id="cdate" name="cdate"  size=40 style="color: black;background-color:#FFFF66; width: 270px;">
</td> 
```

也**请不要使用`mysql_*`函数**

尝试使用带有 PDO 或 mysqli 的准备好的函数（[参见这个**大红框**](http://php.net/manual/en/function.mysql-connect.php#function.mysql-connect-soft-deprecation-notice)）。

你所拥有的很容易出现**巨大的** [鲍比桌](http://bobby-tables.com/)问题......

# php - 将数组从 PHP 传递到 JavaScript，而不是 JSON

> ID：11614483
> 
> 赞同：0
> 
> 时间：2012-07-23T14:24:47.830
> 
> 标签：php, javascript, ajax

我的工作主机有一个旧版本的 PHP，它不支持 json_encode()，所以我需要另一种方法将字符串数组从 PHP 传递到 JavaScript，不知道如何......请帮忙。

这是我当前需要“降级”的工作代码：

PHP：

```
$arr = array($first_name,$last_name, $phone, $email, $number);
echo json_encode($arr); 
```

JAVASCRIPT（忽略缺少的括号）：

```
function get_repeat_request_details(request_id){
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            var arr = JSON.parse(xmlhttp.responseText);
            document.getElementById("tb_f_name").value = arr[0];
            document.getElementById("tb_l_name").value = arr[1];
            document.getElementById("tb_phone").value = arr[2];
            document.getElementById("tb_email").value = arr[3];
            document.getElementById("tb_number").value = arr[4]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:39:26.307

如何使用：[http ://www.dzone.com/snippets/jsonencode-alternative-php-4](http://www.dzone.com/snippets/jsonencode-alternative-php-4)

它将检测是否`json_encode`已经存在，但如果不存在，则提供替代方案。

# asp.net-mvc-3 - 如何在不同的超表中使用同一个子表定义一个MVC数据库结构

> ID：11614484
> 
> 赞同：0
> 
> 时间：2012-07-23T14:24:49.050
> 
> 标签：asp.net-mvc-3, entity-framework, ef-code-first

我正在使用 MVC 的 Code First 方法制作小时日历。这是自下而上的数据结构：

所有类都包含表元素 ID。
DaySpec 包含一天的开始和结束时间。
WeekSpec 包含一个 DaySpecs 数组，其中包含一些普通的布尔值。
一个 ExceptionHoursSet 定义了一般小时模式的例外时间，它包含一个整数 RepCount 和一个对象 HoursSet；RepCount 指定异常重复的次数，HoursSet 是 DaySpec 或 WeekSpec。
Schedule 包含一个字符串 Name、一个 WeekSpec 指定每周的一般模式，以及一个 ExceptionHoursSets 的 IEnumerable。

正确的。

所以我的问题是，在 Schedule 和 ExceptionHoursSet 中都使用 WeekSpec 类，我可以在数据库结构中的两者之间共享它吗？我将如何设置 EF 关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:06:55.407

他们当然可以！

如果您使用 Entity Framework 的 Code First 方法执行此操作，您只需将外键关系作为类型包含在类中：

```
public class DaySpec
{
    public int DaySpecId { get; set; }

    public DateTime Open { get; set; }

    public DateTime Close { get; set; }
}

public class WeekSpec
{
    public int WeekSpecId { get; set; }

    public bool booleanOne { get; set; }

    public DaySpec[] DaySpecs { get; set; }
}

public class ExceptionHoursSet
{
    public int ExceptionHoursSetId { get; set; }

    public int RepCount { get; set; }

    public int WeekSpecId { get; set; } // set which WeekSpec you are referencing below (for lazy-loading)

    public virtual WeekSpec HoursSet { get; set; }

    // etc . . .
}

public class Schedule
{
    public int ScheduleId { get; set; }

    public string Name { get; set; }

    public int WeekSpecId { get; set; } // set which WeekSpec you are referencing below (for lazy-loading)

    public virtual WeekSpec WeekSpec { get; set; }

    public IEnumerable<ExceptionHoursSet> ExceptionHoursSets { get; set; } 
} 
```

我可能遗漏了一些属性，但你明白了（在必要时填写）。有不同的方法可以处理这种情况（延迟加载等），这完全取决于您需要对数据做什么。

# jquery - jQuery淡入淡出持续时间无效

> ID：11614487
> 
> 赞同：2
> 
> 时间：2012-07-23T14:24:55.347
> 
> 标签：jquery, fadein

我正在尝试在我的网络应用程序中使用 jQuery fadIn 函数，但持续时间/速度参数没有任何效果。这是HTML代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Web App Test Bench</title>
    <meta name="viewport" content="user-scalable=yes,width=device-width" />
    <meta charset="ISO-8859-1"/>
    <link rel="icon" type="image/png" href="mj_logo.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0 /jquery.mobile-1.1.0.min.css" />

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

<script type="text/javascript" src="test.js"></script>
<body>
    <section id="page1" data-role="page">

    <div data-role="content" class="content">

    <img id="logo" src="welcomeLogo.jpg" alt="Welcome Logo"/>

    </div>

</section>

</body>
</html> 
```

而javascript是：

```
$(document).ready(function()
{
    $("#logo").hide().fadeIn("8000",function()
    {
        console.log("The animation is done");
    }
    ).fadeOut("8000");

}) 
```

无论我选择哪个值，无论大小，动画都是在瞬间完成的。关于可能是什么问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:28:08.063

它应该是一个数字而不是一个字符串。

```
$(document).ready(function()
{
    $("#logo").hide().fadeIn("8000",function()
    {
        console.log("The animation is done");
    }
    ).fadeOut(8000);

})​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:32:29.690

您需要将速度作为整数而不是字符串值传递，从而使您的代码：

```
$(document).ready(function()
{
    $("#logo").hide().fadeIn(8000,function()
    {
        console.log("The animation is done");
    }
    ).fadeOut(8000);   
}) 
```

如果您确实想使用字符串值，可以使用“fast”和“slow”分别表示 200 和 600 毫秒的持续时间。

# javascript - Google Hangouts 扩展程序如何创建面板窗口？

> ID：11614493
> 
> 赞同：7
> 
> 时间：2012-07-23T14:25:14.077
> 
> 标签：javascript, google-chrome-extension

[Doc](http://code.google.com/chrome/extensions/windows.html)说如果你想创建一个面板窗口，你应该使用

```
chrome.windows.create({...,type:"panel"}, function callback) 
```

同时，它说“指定要创建的浏览器窗口类型。'panel' 类型会创建一个弹出窗口，除非设置了 '--enable-panels' 标志。”

所以你应该去“chrome://flags”手动更改它。但是[Google Hangouts](https://chrome.google.com/webstore/detail/chat-for-google/nckgahadagoaajjgafhacjanaoiihapd)可以在不这样做的情况下创建面板。它是如何做到的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-23T14:31:03.127

[Google Hangouts 扩展程序](https://chrome.google.com/webstore/detail/chat-for-google/nckgahadagoaajjgafhacjanaoiihapd)（以前称为“ Chat for Google”）[在源代码](https://code.google.com/p/chromium/codesearch#chromium/src/chrome/browser/ui/panels/panel_manager.cc&q=file:panel_manager.cc%20nckgahadagoaajjgafhacjanaoiihapd&sq=package:chromium&type=cs&l=138)中明确列入白名单，即使`--enable-panels`未设置标志，它也可以使用面板功能：

```
bool PanelManager::ShouldUsePanels(const std::string& extension_id) {
 ...
    return CommandLine::ForCurrentProcess()->HasSwitch(
        switches::kEnablePanels) ||
        extension_id == std::string("nckgahadagoaajjgafhacjanaoiihapd") ||
 ... 
```

# wix - 设置 Bootstrapper 的输出（.exe）文件在 windows7 上运行但在 windows Xp 上不起作用

> ID：11614494
> 
> 赞同：2
> 
> 时间：2012-07-23T14:25:15.897
> 
> 标签：wix, wix3.6

这是我用来获取输出设置（.exe）的 wix Bundle.wxs 代码。输出 setup.exe 在 windows7 上运行良好，但在 windows Xp 中不显示任何消息或进度。它什么也不做。有什么帮助吗？

```
<?xml version="1.0" encoding="UTF-8"?>
 <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">
   <Bundle Name="A" Version="4.0.0.0" Manufacturer="ABC, Inc." UpgradeCode="1EB9EC76-9E5F-4471-B522-314A62518A80">
    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
      <bal:WixStandardBootstrapperApplication LicenseFile="LicenseFilePath" LogoFile="logo.ico" />
    </BootstrapperApplicationRef>
    <Chain>
      <PackageGroupRef Id="NetFx40ClientWeb" />
      <MsiPackage Compressed="yes" SourceFile="sourceMsiPath" Vital="yes" />
     </Chain>
   </Bundle>
</Wix> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:00:01.420

WixStandardBootstrapperApplication 无法加载 ico 文件，因为它需要在 XP 上使用 GDI+。

```
LogoFile="logo.ico" 
```

将其更改为

```
LogoFile="logo.png" 
```

它应该可以工作。

# ruby-on-rails - 在 ActiveSupport 日期范围内迭代的 rake 任务中的无限循环

> ID：11614500
> 
> 赞同：2
> 
> 时间：2012-07-23T14:25:42.637
> 
> 标签：ruby-on-rails, rake, activesupport

我的 rake 任务挂在无限循环中时遇到问题。到目前为止，我已经能够将问题隔离为一段将日期范围转换为数组的代码。即使我直接调用它：

```
(1.month.ago.beginning_of_month..1.month.ago.end_of_month).to_a.each {|d| p d} 
```

该任务永远挂起迭代相同的元素：

```
"2012-06-01 00:40:41 UTC"
"2012-06-01 00:40:41 UTC"
"2012-06-01 00:40:41 UTC"
"2012-06-01 00:40:41 UTC"
"2012-05-31 20:40:41 UTC"
"2012-05-31 20:40:41 UTC"
"2012-06-01 00:40:42 UTC"
"2012-06-01 00:40:42 UTC"
"2012-06-01 00:40:42 UTC"
"2012-06-01 00:40:42 UTC"
"2012-05-31 20:40:42 UTC"
"2012-05-31 20:40:42 UTC"
... 
```

如果相反我使用这个

```
(Date.new(2012,6,1)..Date.new(2012,6,30)).to_a.each {|d| p d} 
```

一切正常，因此必须专门针对日期/时间使用 ActiveSupport 扩展。有没有其他人看过这个？

这发生在带有 Rails 3.1 和 Ruby 1.9.3 的 Windows 机器上的开发环境中，如果这很重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:41:54.433

您正在创建一个`Time`以 1 秒为增量和约 250 万个条目的一个月范围：

```
(1.month.ago.beginning_of_month..1.month.ago.end_of_month)
# => Fri, 01 Jun 2012 00:00:00 CEST +02:00..Sat, 30 Jun 2012 23:59:59 CEST +02:00
1.month.ago.beginning_of_month.succ
# => Fri, 01 Jun 2012 00:00:01 CEST +02:00 
```

要创建`Date`范围，请使用：

```
(1.month.ago.beginning_of_month.to_date..1.month.ago.end_of_month.to_date)
# => Fri, 01 Jun 2012..Sat, 30 Jun 2012
1.month.ago.beginning_of_month.to_date.succ
# => Sat, 02 Jun 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:41:13.980

用于`to_date`转换`ActiveSupport::TimeWithZone`为`Date`.

```
(1.month.ago.beginning_of_month.to_date..1.month.ago.end_of_month.to_date).
  each do |day| 
    p day
  end 
```

这将在过去一个月中迭代数天。

看来问题在于使用发出警告的`succ`方法。`ActiveSupport::TimeWithZone``Time#succ is obsolete`

# android - 可绘制 ldpi / mdpi / hdpi / xhdpi 文件夹的最佳位图大小是多少？

> ID：11614504
> 
> 赞同：5
> 
> 时间：2012-07-23T14:25:53.650
> 
> 标签：android, bitmap, resolution

我想缩放图像，使它们最适合屏幕尺寸，并且不会消耗比所需更多的内存。

目前我把为 640 x 960 屏幕制作的图像放在 hdpi 文件夹中，它看起来不错，但它消耗的内存比需要的多得多。例如，一个 480 x 800 的设备是 hdpi 并将加载这些位图。

由于我知道的大多数 hdpi 设备都是 480 x 800，我的第一个想法是缩小 hdpi 中的所有图像以适应 480 x 800 屏幕。但我不确定，因为 hdpi 不仅仅指分辨率，还指密度。

这很令人困惑，因为文件夹指的是密度，但位图只是像素，我不知道如何在那里分配它们......

任何帮助是极大的赞赏。

提供更多上下文：问题是我有一个位图动画，每个位图超过 20 个 640 x 588 像素。因此，在某些设备上，仅此一项就会耗尽内存。每个位图占用 640 x 588 的内存为 1.43 mb！。如果我缩小到 480 x 441，我会得到 0.80 mb，这是一个巨大的进步。由于在 480 x 800 设备中我不会丢失细节，因此我会缩小所有图块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:30:12.627

在我看来，适合全屏大小的图像*对于一般的 Android 来说并不是一个好主意*。就是说，如果这是您需要做的，我不会担心内存使用情况，而是选择您认为特定密度所需的最大尺寸，然后让操作系统从那里缩小以适应屏幕尺寸的微小差异. 不要忘记，`drawable-large-hdpi`如果您需要更具体，您也可以按屏幕尺寸指定可绘制对象（例如）。

根据图像的不同，如果可以使背景的任何部分可拉伸，我建议将其设置为 9-patch，并调整其大小以适合该密度桶中*最小*的屏幕，并以这种方式适合屏幕。

# java - 使用 TCP 时如何知道客户端收到文件

> ID：11614506
> 
> 赞同：0
> 
> 时间：2012-07-23T14:25:55.007
> 
> 标签：java, sockets

这里我使用Java语言的socket知识。我使用客户端连接服务器并接收我需要的文件。问题是我怎么知道客户端接收的文件已经完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:28:59.193

在客户端和服务器之间建立一些协议。如果客户端完成后将已知的完成值写回套接字，则服务器将知道客户端的状态。有很多方法可以解决这个问题，其中一种是“哨兵价值”策略。

[http://en.wikipedia.org/wiki/Sentinel_value](http://en.wikipedia.org/wiki/Sentinel_value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:28:56.463

通过通过控制连接发送某种“我完成信号”（FTP 像这样工作），或者通过断开套接字，这也表示“传输结束”。在这种情况下，另一端套接字上的“ReadByte()”将返回“0”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:29:15.497

当您传输了正确数量的字节后，文件就会被发送。这个“正确的数字”可以通过各种方式获得，具体取决于协议。

如果您通过没有协议但 TCP/IP 的套接字发送内容，则客户端只会读取流直到它看到 0 字节（这意味着服务器关闭了它的连接端）。注意，这意味着服务器发送文件然后立即关闭套接字。（不是“关闭”，至少不是立即。只是“关闭”。）每个连接一个文件。您为不使用某种文件传输协议而付出的部分代价。

如果你想验证，我想你可以想象你可以让客户端计算文件内容的哈希值，并根据你最终计算的结果仔细检查它。但我不知道这样做的常用协议。

# java - 我将端口更改为 9009，但 Tomcat 仍然在 8084 上启动。这是为什么呢？

> ID：11614508
> 
> 赞同：0
> 
> 时间：2012-07-23T14:26:00.607
> 
> 标签：java, tomcat, tomcat6, tomcat7, server.xml

我编辑了`server.xml`tomcat（V：7）的文件并将端口更改为`9009`：

```
 <Connector port="9009" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443" /> 
```

但是当我启动服务器时，它仍然在`8084`. 这是为什么 ？我编辑错了吗？

让我通知一下，之前端口值是 = `8080`!。所以事情可能会有所不同。

但是我安装了另一个版本的tomcat（V：6）。我将文件编辑为：

```
<Connector port="7172" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443" /> 
```

在这种情况下，服务器在端口：7172 上运行。在这种情况下，它似乎没问题。

前一个案子是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:46:49.233

杀死您的服务器，然后运行 ​​netstat 或等效的，以检查您需要的端口是否未使用，然后再将其分配给 tomcat。

# php - 在 MySQL 中按时间范围分组

> ID：11614510
> 
> 赞同：0
> 
> 时间：2012-07-23T14:26:03.440
> 
> 标签：php, mysql, group-by

基础知识：我有一个统计访问者的脚本。一些有用的信息存储在 MySQL 数据库中。现在一年多后，我有超过 180'000 条数据记录，读取实际访问者的脚本非常慢。

我有这个脚本来计算访问者并检查它是同一访问者还是新访问者。为此，我有一个 3 小时的时间范围，只有在这个范围之后，访问才会计算另一个时间。

脚本：

```
$besucher_query = mysql_query('SELECT `time`, `agent` FROM `besucher` ORDER BY `ip` ASC');
while($besucher = mysql_fetch_array($besucher_query)) {
    $newtime = $besucher['time'];
    $newagent = $besucher['agent'];
    $limit = 3 /*std*/ * 60 /*min*/ * 60 /*sek*/; // three hours before same visitor counts again
    $diff = $newtime - $limit;

    if($oldtime <= $diff or ($oldtime > $diff and $newagent != $oldagent))
        $besucherzahl++;

    $oldtime = $besucher['time'];
    $oldagent = $besucher['agent'];
        }
$anzahl_besucher = $besucherzahl;
echo $anzahl_besucher; 
```

几年前我创建了这个脚本，我知道这是最丑陋的方法。时间以 UNIX Timestamp 格式存储。

现在我的问题是：如何直接在 MySQL 中将其与上述条件（3 小时规则）“分组”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:33:48.327

您可以直接从您的 PHP 脚本执行以下查询，以获取过去 3 小时内的唯一身份访问者总数：

```
SELECT COUNT(DISTINCT `agent`) AS visitor_count
FROM `besucher`
WHERE `time` >= DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 3 HOUR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:50:46.150

```
GROUP BY 10800*FLOOR(`time`/10800) 
```

但是，如果您在 2:59 和 3:01 有记录（例如），这些记录将在输出中报告为 2 个单独的记录。如果您想测量连续运行，那么您需要执行与当前代码类似的操作 - 但是您可以将结果存储在数据库中以免再次计算它们 - 只需添加一个引用指定为的行的新列会议开始：

```
ALTER TABLE besucher ADD COLUMN session_start INTEGER; 
```

然后....

```
$limit = 3 /*std*/ * 60 /*min*/ * 60 /*sek*/;

$since=(integer)(file_get_contents('lastrun'))-$limit;
$besucher_query = mysql_query('SELECT 
      ip, `time`, `agent` FROM `besucher`
      WHERE `time`>$since 
      ORDER BY agent, ip, `time` ASC');
while($besucher = mysql_fetch_array($besucher_query)) {
   $newtime = $besucher['time'];
   $newagent = $besucher['agent'];
   $newip = $besucher['ip'];

   if ($newagent!=$oldagent 
       || $newip <> $oldip 
       || $newtime>$oldtime+$limit 
       || $newtime<$oldtime) {
     $sessionstart=$newtime;
   }
   $newagent=mysql_real_escape_string($newagent);
   mysql_query(
      "UPDATE besucher SET session_start=$sessionstart
       WHERE time=$newtime AND ip=$newip AND agent='$newagent'"
   );
   $oldtime = $besucher['time'];
   $oldagent = $besucher['agent'];
}
file_put_contents('lastrun', $oldtime); 
```

然后，您可以从（例如）...获取会话数。

```
SELECT COUNT(*)
FROM 
(SELECT DISTINCT ip, agent, session_start
  FROM bessucher
  WHERE time BETWEEN $a AND $b) ilv 
```

一个更简单的解决方案是在您的代码中使用会话管理并立即填充它。

# android - 蓝牙 SPP 和其他蓝牙服务

> ID：11614516
> 
> 赞同：1
> 
> 时间：2012-07-23T14:26:19.057
> 
> 标签：android, bluetooth

我是 Android 开发的新手，除了无线连接两个设备之外，我对蓝牙的真正工作原理一无所知。我一直在使用 BluetoothChat 示例，以及我购买的 Android 书籍中的示例。他们看起来非常相似，但我很困惑。

澄清一下，我正在开发的 Android 应用程序将我的 Android 设备连接到嵌入式蓝牙芯片。据我所知，蓝牙芯片是这对的服务器。

无论如何，在示例中它指出

```
Currently this only does Bluetooth SPP. This can be generalized to other services. 
```

我已经研究了 SPP 的含义，但仍然没有完全理解它，并且还没有弄清楚该示例所讨论的替代“服务”。

谁能简化 SPP，解释可以使用哪些替代服务，以及为什么要使用它们？如果可能，请尝试解释哪种服务最适合我的情况，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:20:13.317

SPP 代表`Serial Port Profile`. 它本质上只是一个无线串行端口连接，如 RS 232 连接。这种类型的连接用于基本数据流。有许多用于不同事物的蓝牙配置文件。看看这里的列表：

[http://en.wikipedia.org/wiki/Bluetooth_profile](http://en.wikipedia.org/wiki/Bluetooth_profile)

在我的应用程序以及 BluetoothChat 应用程序中，`Serial Port Profile`用于建立`Socket`连接。每个配置文件都针对其设计任务进行了优化。

# java - 如何使用 InputStream 转换或初始化 ImageInputStream？

> ID：11614517
> 
> 赞同：10
> 
> 时间：2012-07-23T14:26:18.597
> 
> 标签：java, image, inputstream

我正在开发一个图像抓取应用程序。我正在获取网址

```
URL imageUrl = new URL(imageSource); 
```

然后我用这个 URL 创建一个 InputStream：

```
InputStream is = new URL(imageUrl.toString()).openStream(); 
```

在此之后，我想创建一个 ImageInputStream 来确定 ImageIO 阅读器。

```
ImageInputStream iis = ?????? 
```

但我无法初始化它。我可以为 ImageInputStream 实现 URL 或 InputStream 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T14:39:32.263

这就是你要找的：

```
ImageInputStream iis = ImageIO.createImageInputStream(is); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:38:37.997

更好的方法是使用`ImageIO.read(url)`该回报`BufferedReader`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-12T16:11:54.757

```
URL imageUrl = new URL(imageSource);
InputStream is = new URL(imageUrl.toString()).openStream();
ImageInputStream iis = ImageIO.createImageInputStream(is);
Iterator<ImageReader> iter = ImageIO.getImageReaders(iis);

if(!iter.hasNext())
    throw new RuntimeException("No readers found");
ImageReader reader = iter.next(); 
```

这就是你获得读者的方式，或者是获得读者的方式之一。希望能帮助到你。

# android - 应用程序停止时如何接收来自 GCM 的通知

> ID：11614521
> 
> 赞同：10
> 
> 时间：2012-07-23T14:26:41.393
> 
> 标签：android, push-notification, google-cloud-messaging

如果应用程序未运行，GCMIntentService（扩展 GCMBaseIntentService）不会收到通知。

来自：http: [//developer.android.com/about/versions/android-3.1.html](http://developer.android.com/about/versions/android-3.1.html)

在停止的应用程序上启动控件请注意，系统将 FLAG_EXCLUDE_STOPPED_PACKAGES 添加到所有广播意图。这样做是为了防止来自后台服务的广播无意或不必要地启动已停止应用程序的组件。后台服务或应用程序可以通过将 FLAG_INCLUDE_STOPPED_PACKAGES 标志添加到应该允许激活停止的应用程序的广播意图来覆盖此行为。

有没有办法绕过这个设置？谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-23T15:04:09.607

> 如果应用程序未运行，GCMIntentService（扩展 GCMBaseIntentService）不会收到通知。

是的，它会。*但是，您的问题的其余部分与应用程序是否正在运行*无关，而是与用户之前是否已运行过有关。您引用的段落中的“停止”一词的含义不是“未运行”，而是表示应用程序所处的状态：

*   首次安装时，在手动调用组件之前（例如，用户启动活动）

*   在用户强制停止应用程序之后，直到手动调用某个组件（例如，用户启动一个活动）

（我真的很希望他们能想出一个比“停止”更独特的形容词......）

> 有没有办法绕过这个设置？

否。如果用户强制停止您的应用程序，他们表示他们不希望您的应用程序再次运行，无论出于何种原因，直到他们再次手动启动它。您的目标是让用户没有理由强制停止您的应用程序。请注意，我的意思是“强制停止”（即，按“设置”中的“强制停止”按钮）——普通的任务管理器，或者从 Android 4.x 中的“最近任务”列表中滑动，没有这种效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T22:27:00.733

根据 Francesco Nerieri 在[这个 android-gcm 线程](https://groups.google.com/group/android-gcm/tree/browse_frm/month/2012-08/7e74aab31da818e1?rnum=11&lnk=nl&pli=1)中的说法：

> 因此，如果您强制停止应用程序，ICS 的预期行为是应用程序不会收到消息。在 JB 中，这意味着 GCM 也会取消注册应用程序，这是一种不幸的行为，我们正在努力改变这一点（JB 中的取消注册部分）。

# jquery - Jquery：使用 .substring 截断元素内容

> ID：11614522
> 
> 赞同：0
> 
> 时间：2012-07-23T14:26:42.377
> 
> 标签：jquery, substring, truncate

我正在尝试使用 jQuery 获取元素的内容，按字符长度截断它，然后在新元素中显示输出。我查看了许多类似的论坛帖子，但没有任何工作！我在这里做错了什么？（这是众多尝试之一）

```
$('dd.event_time').each(function(){
    var time = $(this).text(); //Get text content from element
    var timeTrim = time.substring(0, 6);  //Truncate content after 6th character

    $(this).parent().append('<dd class="event-time-header">' + timeTrim + '</dd>'); //Wrap output in new element
}); 
```

获取元素内容有效，最后一步也是如此。这只是`.substring`我遇到问题的部分。顺便说一句，我对 jQuery 还很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:33:56.123

`substr`这就是和之间的区别`substring`

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)

> string.substr（开始[，长度]）

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)

> string.substring(indexA[, indexB])

# php - Google Analytics 跟踪自定义属性

> ID：11614523
> 
> 赞同：4
> 
> 时间：2012-07-23T14:26:44.357
> 
> 标签：php, google-analytics-api

如何跟踪我网站上每个页面的自定义属性？例如，除了跟踪给定页面的页面浏览量、跳出率等之外，我还希望能够跟踪自定义属性（特别是，某人点击特定页面上特定链接的次数）。

下面是我希望能够看到的模型（在谷歌分析仪表板上或通过 GAPI）：

![在此处输入图像描述](../Images/e84adaa14a82ee37f0dd86e2a6a7c88f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:55:44.500

您可以通过事件跟踪来做到这一点。有关更多信息，请参阅谷歌指南： [https ://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

例子：

```
<head>
...
<script>
var _gaq=[['_setAccount','UA-XXXX-X'],['_setDomainName', 'example.com'],['_trackPageview']];
...
</head>
<body>
...
<a href="#" onClick="_gaq.push(['_trackEvent', 'Custom Clicks Category', 'Custom Link Clicks Action', 'Custom Label', 1]);">Click me</a>
...
<script>
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script> 
```

我没有使用的最后一个参数是`non-interaction`参数，它的使用取决于您的特定情况以及您希望如何影响跳出率。阅读[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#non-interaction](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#non-interaction)

# c# - 如何使用附加文件和脚本计算页面的总大小

> ID：11614526
> 
> 赞同：1
> 
> 时间：2012-07-23T14:26:52.613
> 
> 标签：c#, asp.net

我想问是否可以在 C# 中以编程方式获取特定的站点内容大小。我的意思是：网站的完整大小，包括头部或正文中引用的所有图像和脚本等。例如，如果我们有一个网站[http://www.google.com](http://www.google.com)，我想获得它的总大小，包括徽标、引用的脚本等等，因为它将呈现给用户，而不仅仅是主页。

这是我的意思的图片：（点击查看完整尺寸）

[![](../Images/eea80a9528cf57d8106ceffb6c8e8bc3.png)](https://i.stack.imgur.com/5LPe9.png)

如果我们在 IE 9 中使用 IE Developer tool，并开始捕获网络会话上的流量，然后我们点击 google.com，它会显示加载的文件总数（.js、.png 等）和加载时间（以毫秒为单位） .

我尝试使用 webrequest 做类似的事情，但我只得到 43kb 而不是 IE 开发工具得到的 101。

这是代码：

```
WebRequest request = WebRequest.Create(textBox2.Text.ToString());     
request.Credentials = CredentialCache.DefaultCredentials;           
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream dataStream = response.GetResponseStream();      
StreamReader reader = new StreamReader(dataStream);          
string responseFromServer = reader.ReadToEnd();         
byte[] bytes = Encoding.ASCII.GetBytes(responseFromServer);
MessageBox.Show(ConvertSize(responseFromServer.Length) + "  -  " + responseFromServer.Length.ToString());
reader.Close();
dataStream.Close();
response.Close(); 
```

如何获取站点的总大小，包括该特定页面中使用/引用的所有图像、js 和其他文件？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:35:05.580

您的 WebRequest 只是获取 HTML。它不会解析以获取任何引用的文件（图像、CSS、javascript 包括等）。控件之类的`WebBrowser`控件可以让您自动化浏览器

# php - SQLSRV 驱动程序与带有 MS SQL Server 的 PHP 的 PDO 驱动程序

> ID：11614536
> 
> 赞同：18
> 
> 时间：2012-07-23T14:27:38.353
> 
> 标签：php, sql-server, pdo, driver

在 SQLSRV 驱动程序与 PDO 驱动程序（对于带有 MS SQL 服务器的 PHP）之间进行选择时，我应该考虑哪些因素？

我看到了这篇以前的 Stackoverflow 帖子（[在 Windows 上使用 PHP 时，什么是更好的（1）SQL Server 的本机驱动程序或（2）PDO 驱动程序？](https://stackoverflow.com/questions/8378106/when-using-php-on-windows-what-is-better-1-the-native-driver-for-sql-server-o)），但答案似乎有点缺乏，并没有提到所有的好处使用[本文](http://blogs.msdn.com/b/brian_swan/archive/2010/04/20/comparing-the-sqlsrv-and-pdo-apis.aspx)中提到的 SQLSRV 驱动程序。

我正在寻找一个全面的和最新的（例如，SQLSRV 驱动程序仍然只适用于 Windows 的情况吗？）程序员可以将其作为资源引用的答案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-07T03:59:47.147

SQLSRV 和 PDO_SQLSRV 是[Microsoft 提供的两个当前一代 php 驱动程序](http://sqlsrvphp.codeplex.com/)，但两者都使用相同的代码：SQL Server Native Client 11。（这就是为什么没有 Mac 或 Linux 版本的 php 驱动程序：它们只是包装器。）两个驱动程序应该相似；这只是您喜欢哪个 API 的问题。

在大多数情况下，出于跨平台的考虑，人们会使用 PDO_SQLSRV 驱动程序。但是，在查看了一个新（小型）项目的两个驱动程序之后，我选择了 SQLSRV 驱动程序，因为它将数据作为基础 SQL Server 数据类型的 [a map] 返回，而 PDO_SQLSRV 将所有内容作为字符串返回。

所以如果你的sql是：

```
SELECT 1234 as integer, Cast(123.456 as float) as float, 
       getdate() as date, '1234' as string1,'123.456' as string2; 
```

然后来自 PDO_SQLSRV 的行的 var_dump 给出：

```
 array(1) {
    [0] =>
    array(5) {
      'integer' =>
      string(4) "1234"
      'float' =>
      string(7) "123.456"
      'date' =>
      string(23) "2012-12-06 22:35:05.373"
      'string1' =>
      string(4) "1234"
      'string2' =>
      string(7) "123.456"
    }
  } 
```

而 SQLSRV 驱动程序给出：

```
array(1) {
    [0] =>
    array(5) {
      'integer' =>
      int(1234)
      'float' =>
      double(123.456)
      'date' =>
      class DateTime#1 (3) {
        ...
      }
      'string1' =>
      string(4) "1234"
      'string2' =>
      string(7) "123.456"
    }
  } 
```

无论我是否愿意，PDO_SQLSRV 都将我的所有数据转换为一个字符串，这让我发疯了，所以我使用了 SQLSRV。（我不得不承认我设置`ReturnDatesAsStrings=true`是因为我懒得处理日期类。）

我也更喜欢语法，但这只是我。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-23T16:19:15.503

PDO 允许您编写代码以合理地与 DB 无关。

如果你想要真正的 DB-neutral，你会想要使用像[NotORM](http://www.notorm.com/)这样的完整 DB 抽象层——使用普通 PDO，你仍然需要注意 SQL 语法差异，但至少你的基本 PHP 代码是 DB -中性的。

与 DB 无关现在似乎并不重要——如果你使用的是 SQL Server，那么你可能已经被告知这是必需的，没有别的——但你无法预测未来事情会如何变化，所以如果在 DB 中性驱动程序和 DB 特定驱动程序之间进行选择，并且您没有任何其他偏好的理由，那么选择中性驱动程序....如果您的公司被接管，新老板想使用 Oracle 作为数据库！

此外，由于它是 DB 中立的，因此 PDO 在 PHP 社区中更加标准和知名。与使用 MSSQL 驱动程序相比，您将从在线站点（例如这个站点）获得更多关于 PDO 的帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-30T03:36:18.337

微软终于投入了一些资源来定制他们的原生驱动程序以与 PHP 一起工作。我目前正在对 Apache 2.4 64 位进行 beta 测试。

[测试版 PHP 7 SQL_SRV 64 位驱动程序](https://github.com/Azure/msphpsql/releases)

# c++ - 我如何从文件 C++ 中读取并输出它

> ID：11614542
> 
> 赞同：1
> 
> 时间：2012-07-23T14:27:47.783
> 
> 标签：c++, linux

我尝试使用 getline

但它给了我一些错误

注意：__ssize_t getline(char**, size_t*, FILE*)

我的线是这样的

```
ofstream myfile;

myfile.open("file.txt");
while(!myfile.eof())
{
    getline(myfile,sline);
    cout << sline;
 } 
```

我如何让我的 C++ 读取 file.txt

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:30:21.287

确保你有`#include <string>`, where[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)被定义，那`sline`是一个`std::string`.

将循环结构更改为：

```
while (std::getline(myfile, sline))
{
    std::cout << sline << "\n";
} 
```

以避免处理失败的读取。

[`std::ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)用来阅读，不像卡罗利`std::ofstream`在评论中指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:31:52.147

看起来你`#include`d`<stdio.h>`或`<cstdio>`因此正在尝试使用 C 的`getline`函数。改变：

```
getline(myfile,sline); 
```

到：

```
std::getline(myfile,sline); 
```

以确保您使用的是 C++ `getline`。

# jquery - 一个固定 div 向下推另一个固定 div，两者都在顶部：0

> ID：11614544
> 
> 赞同：0
> 
> 时间：2012-07-23T14:27:51.973
> 
> 标签：jquery, html, css

所以我有一个带有更多按钮的工具栏。单击时，用 jquery 购买了一个大面板。唯一的问题是工具栏和大面板都必须固定在顶部。因此面板在打开时不会向下推工具栏。单击时，面板应位于顶部，工具栏上方，工具栏应被按下。滚动时两者都应该贴在页面顶部，因此需要 position:fixed 。

这是一个简化的[jsfiddle](http://jsfiddle.net/FAgpk/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:39:22.660

通过动画成员栏的顶部以及子菜单的 slideDown。像这样：

[小提琴](http://jsfiddle.net/albertjan/FAgpk/5/)

```
$('#more').toggle(function() {
    //show its submenu
    $('.large').slideDown(500);
    $('.membersbar').animate({ top: '+=150' }, 500);
}, function() {
    //hide its submenu
    $('.large').slideUp(500);
    $('.membersbar').animate({ top: '-=150' }, 500);
});​ 
```

# java - XSL 转换，然后是结果节点上的 XPath 表达式

> ID：11614548
> 
> 赞同：1
> 
> 时间：2012-07-23T14:28:03.540
> 
> 标签：java, xml, xslt, xpath

我正在对输入 XML 进行 XSL 转换，然后我需要在结果文档上使用 XPath 提取一些值。但是在使用 XSL 结果节点时，XPath 表达式可能总是返回 null。但是如果我将 XSL 生成的文档存储在一个文件中，然后重新加载它。XPath 表达式返回相应的节点。

这是我的代码（为了方便起见，实用程序已被删除）：

```
public class XmlTest {
@Test
public void testWithNativeJavaApi() throws Exception {
    InputStream instream = resolveClasspathFile("xslt/xslt-test-transform-2.xsl");
    StreamSource xsltSource = new StreamSource(instream);
    DOMSource domSource = loadXmlFromClasspathFile("xslt/xslt-test-input-2.xml");
    prettyPrint(domSource.getNode());

    Transformer transformer = TransformerFactory.newInstance().newTransformer(xsltSource);
    DOMResult domResult = new DOMResult();
    transformer.transform(domSource, domResult);
    Node node = domResult.getNode();

    // Store then reload the file
    // Uncommenting those 3 lines will make the test pass
    // File xslOutputfile = new File("target", "xsl-ouput.xml");
    // prettyPrint(node, new FileOutputStream(xslOutputfile));
    // node = loadXmlFromInputStream(new FileInputStream(xslOutputfile)).getNode();

    XPath xPathProcessor = XPathFactory.newInstance().newXPath();
    XPathExpression xpathExpression = xPathProcessor.compile("/Message/Out/Personne/CodeCivilite");
    System.out.println();
    Node resultNode = (Node) xpathExpression.evaluate(node, XPathConstants.NODE);

    if (resultNode != null) {
        System.out.println(resultNode.getNodeName() + "=" + resultNode.getTextContent());
    } else {
        System.out.println("Node is null");
    }

    assertNotNull("XPath expression returned null node", resultNode);
    assertEquals("CodeCivilite", resultNode.getNodeName());
    assertEquals("M.", resultNode.getTextContent());

}
} 
```

只需注释或删除“// Store 然后重新加载文件”下面的 3 行，测试将不再通过。

我完全陷入困境，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:58:48.460

DocumentBuilderFactory 默认不使用命名空间，除非使用 dbf.setNamespaceAware(true)。另一方面，XSL 和 TransformerFactory 大量使用命名空间，因此转换的结果文档使用命名空间进行限定。

因此，在 XSL 转换旁边调用 XPathExpression 时应该使用名称空间。

```
XPath xPathProcessor = XPathFactory.newInstance().newXPath();
xPathProcessor.setNamespaceContext(new NamespaceContext() {
  @Override
  public String getNamespaceURI(String prefix) {
    if(prefix.equals("t")) {
      return "http://www.example.org/test";
    } else {
      return null;  
    }
  }
  @Override public String getPrefix(String namespaceURI) {
    return null; // not used
  }
  @Override
  public Iterator<?> getPrefixes(String namespaceURI) {
    return null; // not used
  }
});
XPathExpression xpathExpression = xPathProcessor.compile("/t:Message/t:Out/t:Personne/t:CodeCivilite");
System.out.println();
Node resultNode = (Node) xpathExpression.evaluate(node, XPathConstants.NODE); 
```

引入一个临时文件，使用默认 DocumentBuilderFactory（不知道命名空间）重新加载，使非限定 XPATH 表达式（没有命名空间）工作。

希望这很清楚:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:51:58.400

我想知道解析文件是否会给你一个更短的树。尝试使用 xpath 表达式

```
//Message/Out/Personne/CodeCivilite 
```

（前面的双斜线）没有文件 i/o 以查看是否有没有文件 i/o 的额外节点层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:59:52.000

节点 = loadXmlFromInputStream(new FileInputStream(xslOutputfile))。`getDocumentElement`();

是 getDocumentElement() 吗？

你能打印重新加载的节点，看看你是否有你所期望的吗？

# c# - Jquery Hide with asp.net postback

> ID：11614555
> 
> 赞同：0
> 
> 时间：2012-07-23T14:28:23.657
> 
> 标签：c#, javascript, jquery, asp.net, .net

我有以下代码......

```
<head>
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="Scripts/hidepanel.js" type="text/javascript"></script>
</head>
<body>
    <div id="outboundForm">
    <p>
        <asp:Button ID="btnSubmit" ClientIDMode="Inherit" runat="server" TabIndex="17" CssClass="btnSubmit"
            OnClick="btnSubmit_Click" meta:resourcekey="btnSubmitResource1" />
        <asp:Button ID="btnReset" runat="server" CssClass="btnReset" OnClick="btnReset_Click"
            meta:resourcekey="btnResetResource1" />
    </p>
</div>
<div id="MailPreviewDiv">
    <asp:Label ID="lblPreview" runat="server" Visible="false" Text="" />
</div> 
```

我的 hidepanel.js 看起来像这样....

```
$(document).ready(function () {
    d = new Date();
    d = d.getTime();
    if ($('#reloadValue').val().length == 0) {
        $('#reloadValue').val(d);
        $('#MailPreviewDiv').
    } else {
        $('#reloadValue').val('');
    }

    $('#MainContent_btnSubmit').click(function () {
        $('#outboundForm').hide("slow");
        $('#MailPreviewDiv').show("slow");
    });
}); 
```

现在，默认情况下，我希望`MailPreviewDiv`隐藏，并且只有当我单击时`btn_submit`，我才希望`MailPreviewDiv`看到。这适用于传统的 HTML，但是一旦我将它添加到 .NET，就会发生疯狂的事情。当我单击提交时，我可以看到转换发生，但是我留下了两个 div 仍然显示并且`outboundForm`div 仍然可见。

我观察到的是 javascript 甚至被触发，然后在我的 .net 鼠标点击甚至被触发之后，我可以看到一个转换并且两个 div 都可见。有人可以提供一些建议吗...

这可能与部分回发有关，但我不确定....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:55:25.990

您的页面正在执行回发，因此所有 html 元素都会立即失去 jquery 效果。您需要在回发后使用 RegisterStartupScript [http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx在服务器端注册 js 代码](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:45:24.210

也许尝试将 outboundForm 设置为 runat="server" 并在服务器端设置中将其可见性设置为 false。

```
<div runat="server" id="outboundForm" > 
```

代码隐藏

```
outboundForm.Visible = false; 
```

似乎 JS 运行良好，但服务器正在重新加载回发时隐藏的 div。

您的 JS 有语法错误 $('#MailPreviewDiv')。<-- 不完整

但我认为那是因为您正在简化此处发布的内容。

# php - html表单后端

> ID：11614557
> 
> 赞同：0
> 
> 时间：2012-07-23T14:28:24.810
> 
> 标签：php, forms

我在我的 html 表单的后端需要帮助。我想要做的当然是获取用户在包含实际表单的 html 页面上输入的信息。该页面正在解释 php 中的数据，我希望它向自己发送一封包含收集到的信息的电子邮件。我已经采取了所有安全措施，据我所知，它应该可以工作。但由于某种原因，它不是......它在第 20 行给了我一个语法错误。我将提供收集用户信息的 php 文件的完整代码。我认为我不需要发布实际的 html 表单，但如果需要，我也会发布。谢谢您的帮助。

```
 <?php
  require_once('recaptchalib.php');
  $privatekey = "aFakePrivateKey";
  $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

  if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The CAPTCHA wasn't entered correctly. Go back and try it again.");
  } else {

if(isset($_POST['eadrr'])) {

    $email_to = "blank@blank.com";
    $email_subject = "Customer Support";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['inquire']) ||
        !isset($_POST['eadrr']) ||
        !isset($_POST['mess'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $type = $_POST['inquire']; // required
    $email_from = $_POST['eadrr']; // required
    $comments = $_POST['mess']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 5) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Type of Inquiry: ".clean_string($type)."\n";
    $email_message .= "Message: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  

echo 'Thank you for your message. Based on the type of inquiry we may respond within a week.';

}

  }
?> 
```

错误信息：

> 解析错误：语法错误，第 20 行 /home/a6675286/public_html/verify.php 中的意外 T_VARIABLE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:12:56.743

尝试更改此行：

```
died('We are sorry, but ... 
```

tp这个：

```
die('We are sorry, but you cannot spell 
```

当然，除非您实际上编写了一个名为 dead() 的函数...

# c# - 如何使用 XML 序列化抑制命名空间的输出？

> ID：11614569
> 
> 赞同：2
> 
> 时间：2012-07-23T14:29:10.090
> 
> 标签：c#, xml-serialization

我已经使用 XmlSerializer 序列化了一个对象，并且在我的输出中收到了不需要的命名空间属性。如何防止它在 XML 中打印这些命名空间？

```
// write and close the bar
XmlSerializer serializer = new XmlSerializer(typeof( DecisionBar));

serializer.Serialize(writer, decision);

public class DecisionBar
{
    public DateTime bartime { get; set; }
    public string frequency { get; set; }
    public bool HH7 { get; set; }
    public bool crossover { get; set; }
    public double mfe { get; set; }
    public double mae { get; set; }
    public double entryPointLong { get; set; }
    public double entryPointShort { get; set; }
} 
```

输出：

```
<DecisionBar xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <bartime>2012-07-23T07:22:00</bartime>
  <frequency>1 MINUTES</frequency>
  <HH7>true</HH7>
  <crossover>false</crossover>
  <mfe>0</mfe>
  <mae>0</mae>
  <entryPointLong>1.2139</entryPointLong>
  <entryPointShort>1.212</entryPointShort>
</DecisionBar> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:31:46.403

```
var ns = new XmlSerializerNamespaces();
ns.Add("", "");
serializer.Serialize(writer, decision, ns); 
```

# python - 带有 Google 应用引擎的 webapp2 装饰器路由

> ID：11614572
> 
> 赞同：2
> 
> 时间：2012-07-23T14:29:18.227
> 
> 标签：python, google-app-engine, webapp2

我想通过装饰我的 RequestHandler 对象来定义路由，而不是在创建应用程序时为其提供列表。

我的 WSGIApplication 定义如下：

```
class WSGIApplication(webapp2.WSGIApplication):
    def __init__(self, *args, **kwargs):
        super(WSGIApplication, self).__init__(*args, **kwargs)
        self.router.set_dispatcher(self.__class__.custom_dispatcher)

    @staticmethod
    def custom_dispatcher(router, request, response):
        rv = router.default_dispatcher(request, response)
        if isinstance(rv, basestring):
            rv = webapp2.Response(rv)
        elif isinstance(rv, tuple):
            rv = webapp2.Response(*rv)

        return rv

    def route(self, url, name):
        def outer_wrapped(cls):
            logging.info("Adding route %s to class %s with name %s"
                         % (url, cls, name))
            self.router.add(RedirectRoute(url, cls,
                                          name=name,
                                          strict_slash=True))
            return cls
        return outer_wrapped 
```

在`package.utils`

我的应用程序定义在`package.application`

app.yaml 有

```
application: theapplication
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: .*
  script: package.main.application
  secure: always 
```

`package.main`如下：

```
from package.application import application
from package.pages import pages 
```

`package.application`如下（使用散列的密钥）：

```
from package import utils

conf = {}
conf['webapp2_extras.sessions'] = {'secret_key':
    """##############################################"""}

application = utils.WSGIApplication([], config=conf) 
```

这里有几个处理程序来自`package.pages`：

```
from package.application import application as app

@app.route('/conversations', 'view_messages')
class Messages(BaseHandler):
    @users.require_login
    def get(self):
        conversations = self.current_user.get_user_conversations()
        return self.render('conversations.slim', conversations=conversations)

@app.route('/', 'index')
class Index(BaseHandler):
    def get(self):
        return self.render('index.slim') 
```

索引页面工作正常，其他一切都是 404，日志简单地说：

```
INFO     2012-07-23 14:23:46,258 __init__.py:26] /notifications
INFO     2012-07-23 14:23:46,272 dev_appserver.py:2952] "GET /notifications HTTP/1.1" 404 - 
```

~~我认为这在某种程度上是由于 appengine 的导入缓存阻止了装饰器运行并将它们自己添加到应用程序中造成的。~~

当然，我陷入了假设我对导致问题的原因有任何线索的陷阱。在尝试每次调度之前，我添加了更多日志语句以输出路由列表，我发现所有路由都在路由器中，正如人们所期望的那样：

```
 ...
    def custom_dispatcher(router, request, response):
        logging.info(router.match_routes)
        logging.info(router.build_routes)
        rv = router.default_dispatcher(request, response)
    ... 
```

在将我的浏览器指向 /conversations 时，使用以下日志输出：

```
INFO     2012-08-04 13:16:40,513 utils.py:13] [<Route('/friendship', <class 'package.pages.pages.Friendship'>, name='friendship', defaults={}, build_only=False)>, <Route('/friendship/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/friendship', <class 'package.pages.pages.Friendship'>, name='friendship', defaults={}, build_only=False)>>, '_name': 'friendship'}, build_only=False)>, <Route('/signup', <class 'package.pages.pages.Signup'>, name='signup', defaults={}, build_only=False)>, <Route('/signup/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/signup', <class 'package.pages.pages.Signup'>, name='signup', defaults={}, build_only=False)>>, '_name': 'signup'}, build_only=False)>, <Route('/preferences', <class 'package.pages.pages.UserPage'>, name='user_prefs', defaults={}, build_only=False)>, <Route('/preferences/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/preferences', <class 'package.pages.pages.UserPage'>, name='user_prefs', defaults={}, build_only=False)>>, '_name': 'user_prefs'}, build_only=False)>, <Route('/<username:[a-zA-Z]+>', <class 'package.pages.pages.UserPage'>, name='user_page', defaults={}, build_only=False)>, <Route('/<username:[a-zA-Z]+>/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/<username:[a-zA-Z]+>', <class 'package.pages.pages.UserPage'>, name='user_page', defaults={}, build_only=False)>>, '_name': 'user_page'}, build_only=False)>, <Route('/message', <class 'package.pages.pages.SendMessagePage'>, name='send_message', defaults={}, build_only=False)>, <Route('/message/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/message', <class 'package.pages.pages.SendMessagePage'>, name='send_message', defaults={}, build_only=False)>>, '_name': 'send_message'}, build_only=False)>, <Route('/conversations', <class 'package.pages.pages.Messages'>, name='view_messages', defaults={}, build_only=False)>, <Route('/conversations/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/conversations', <class 'package.pages.pages.Messages'>, name='view_messages', defaults={}, build_only=False)>>, '_name': 'view_messages'}, build_only=False)>, <Route('/conversation/<conversation_id>', <class 'package.pages.pages.ConversationPage'>, name='conversation', defaults={}, build_only=False)>, <Route('/conversation/<conversation_id>/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/conversation/<conversation_id>', <class 'package.pages.pages.ConversationPage'>, name='conversation', defaults={}, build_only=False)>>, '_name': 'conversation'}, build_only=False)>, <Route('/boards', <class 'package.pages.pages.Boards'>, name='view_boards', defaults={}, build_only=False)>, <Route('/boards/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/boards', <class 'package.pages.pages.Boards'>, name='view_boards', defaults={}, build_only=False)>>, '_name': 'view_boards'}, build_only=False)>, <Route('/boards/<board>', <class 'package.pages.pages.BoardPage'>, name='view_board', defaults={}, build_only=False)>, <Route('/boards/<board>/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/boards/<board>', <class 'package.pages.pages.BoardPage'>, name='view_board', defaults={}, build_only=False)>>, '_name': 'view_board'}, build_only=False)>, <Route('/boards/<board>/new_thread', <class 'package.pages.pages.NewThreadPage'>, name='new_thread', defaults={}, build_only=False)>, <Route('/boards/<board>/new_thread/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/boards/<board>/new_thread', <class 'package.pages.pages.NewThreadPage'>, name='new_thread', defaults={}, build_only=False)>>, '_name': 'new_thread'}, build_only=False)>, <Route('/notifications', <class 'package.pages.pages.Notifications'>, name='notifications', defaults={}, build_only=False)>, <Route('/notifications/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/notifications', <class 'package.pages.pages.Notifications'>, name='notifications', defaults={}, build_only=False)>>, '_name': 'notifications'}, build_only=False)>, <Route('/img/<blob_key>', <class 'package.pages.pages.DisplayImagePage'>, name='display_image', defaults={}, build_only=False)>, <Route('/img/<blob_key>/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/img/<blob_key>', <class 'package.pages.pages.DisplayImagePage'>, name='display_image', defaults={}, build_only=False)>>, '_name': 'display_image'}, build_only=False)>, <Route('/', <class 'package.pages.pages.Index'>, name='index', defaults={}, build_only=False)>, <Route('/', <class 'webapp2.RedirectHandler'>, name=None, defaults={'_uri': <bound method RedirectRoute._redirect of <Route('/', <class 'package.pages.pages.Index'>, name='index', defaults={}, build_only=False)>>, '_name': 'index'}, build_only=False)>]
INFO     2012-08-04 13:16:40,513 utils.py:14] {'index': <Route('/', <class 'package.pages.pages.Index'>, name='index', defaults={}, build_only=False)>, 'view_boards': <Route('/boards', <class 'package.pages.pages.Boards'>, name='view_boards', defaults={}, build_only=False)>, 'notifications': <Route('/notifications', <class 'package.pages.pages.Notifications'>, name='notifications', defaults={}, build_only=False)>, 'friendship': <Route('/friendship', <class 'package.pages.pages.Friendship'>, name='friendship', defaults={}, build_only=False)>, 'signup': <Route('/signup', <class 'package.pages.pages.Signup'>, name='signup', defaults={}, build_only=False)>, 'view_messages': <Route('/conversations', <class 'package.pages.pages.Messages'>, name='view_messages', defaults={}, build_only=False)>, 'conversation': <Route('/conversation/<conversation_id>', <class 'package.pages.pages.ConversationPage'>, name='conversation', defaults={}, build_only=False)>, 'send_message': <Route('/message', <class 'package.pages.pages.SendMessagePage'>, name='send_message', defaults={}, build_only=False)>, 'new_thread': <Route('/boards/<board>/new_thread', <class 'package.pages.pages.NewThreadPage'>, name='new_thread', defaults={}, build_only=False)>, 'view_board': <Route('/boards/<board>', <class 'package.pages.pages.BoardPage'>, name='view_board', defaults={}, build_only=False)>, 'display_image': <Route('/img/<blob_key>', <class 'package.pages.pages.DisplayImagePage'>, name='display_image', defaults={}, build_only=False)>, 'user_prefs': <Route('/preferences', <class 'package.pages.pages.UserPage'>, name='user_prefs', defaults={}, build_only=False)>, 'user_page': <Route('/<username:[a-zA-Z]+>', <class 'package.pages.pages.UserPage'>, name='user_page', defaults={}, build_only=False)>}
INFO     2012-08-04 13:16:40,515 __init__.py:26] /conversations
INFO     2012-08-04 13:16:40,533 dev_appserver.py:2952] "GET /conversations HTTP/1.1" 404 -
INFO     2012-08-04 13:16:40,626 dev_appserver.py:2952] "GET /favicon.ico HTTP/1.1" 200 - 
```

我到底没有注意到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:25:51.457

我有一条路线覆盖了所有其他路线，但在它们上引发了 404（/username 导致用户页面；没有名为“对话”的用户）。我忘记了在切换到装饰器路由方法时让这条路由的优先级最低。

我通过首先使用相同的路由方法构建一个最小的应用程序来解决这个问题，看看它在应用引擎上运行得很好。然后我在处理程序中捕获了 HTTPNotFound 异常，并在它们发生时打印了堆栈跟踪；这清楚地表明这是我的用户页面类的 get 方法中的一行故意抛出 404，那么问题就相当明显了。

# javascript - Facebook Graph API Post with_tags 选项

> ID：11614574
> 
> 赞同：3
> 
> 时间：2012-07-23T14:29:20.747
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我遇到了[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)的问题。即，名为“with_tags”的选项。

```
options = {
    "message": "Test123", 
    "with_tags": {
        "data":[
            {"id": 100001686722916, "name": "Aret Aret"}
        ]
    }
};
FB.api('/me/feed', 'post', options, function(response) {
    if (!response || response.error) {
        alert('Error occured');
        console.log(response);
    } else {
        console.log(response);
    }
}); 
```

结果，我只收到一条消息“Test123”，但我的帖子中没有“with”标签。我在“with”部分使用的用户在我的朋友列表中，也是该应用程序的开发人员。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T14:48:33.133

我实际上认为“with_tags”选项仅在返回提要对象时才被读取。这不是您可以发布[https://developers.facebook.com/docs/reference/dialogs/feed/#graphapicall](https://developers.facebook.com/docs/reference/dialogs/feed/#graphapicall)的选项。我认为您想要使用的只是“标签”，它应该只包含此处指定的 id [https://developers.facebook.com/docs/reference/dialogs/feed/#graphapicall ://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)

**请注意，如果不指定地点，您将无法执行此操作

编辑**** Facebook 现已发布提及标记，这可能是您需要的解决方案 [https://developers.facebook.com/docs/opengraph/mention_tagging/](https://developers.facebook.com/docs/opengraph/mention_tagging/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-09T12:24:53.523

这是一个关于如何在标记一些朋友时发布到用户提要的示例：

```
FB.api(
    "/me/feed",
    "POST",
    {
        "message": "This is a test message",
        "place": "link",
        "tags": "friend_id1,friend_id2"
    },
    function (response) {
      if (response && !response.error) {
        console.log(response); /* post id will be returned */
      }
    }
); 
```

来自：[https ://developers.facebook.com/docs/graph-api/reference/v2.5/user/feed](https://developers.facebook.com/docs/graph-api/reference/v2.5/user/feed)

# ruby-on-rails - rjs - page.alert 内的 ruby 循环

> ID：11614578
> 
> 赞同：0
> 
> 时间：2012-07-23T14:29:39.087
> 
> 标签：ruby-on-rails, rjs

我的 rjs 文件中有以下代码：

```
if @books_by_author.count != 0
page.alert("The following books reference the author you want to delete: \n

     # here i want to list all the books referencing the author
");

end 
```

如何遍历@books_by_author 并在 page.alert 中显示他们的名字？

感谢您的宝贵帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:33:47.017

使用`Array.join`：

```
page.alert("The following books reference the author you want to delete: \n
            #{@books_by_author.join(', /n')} "); 
```

Ultimation 的建议：如果数组包含模型，而不是字符串，则需要将它们映射到标题：

```
page.alert("The following books reference the author you want to delete: \n
            #{@books_by_author.map(&:title).join(', /n')} "); 
```

# r - 栅格化多个 SpatialPolygonsDataframe 属性

> ID：11614579
> 
> 赞同：0
> 
> 时间：2012-07-23T14:29:45.027
> 
> 标签：r

我需要“光栅化” a 的多个属性`SpatialPolygonsDataframe`。然后，我将每个栅格图层中的值乘以给定向量的值（例如“gp”）。我`wrld_simpl`从`maptools`一开始就使用数据集。wrld_simpl 有一个名为 POP2005 的属性，我将添加更多与年份 (2010:2100) 的人口估计相对应的属性。我正在尝试编写一个循环或函数，这样我就不必手动栅格化每个属性，然后独立计算它们的新值，然后一次又一次地重复所有这些步骤。

```
data(wrld_simpl)  
gp <- seq(1,246)  

myraster <- raster(nrow = 572, ncol = 1440, xmn = -180, xmx = 180, ymn= -58, ymx = 85) 
```

因为 rasterize() 函数不允许我从 spatialPolygonsDataframe 中选择特定属性，所以我使用 raster:::.polygonsToRaster() 代替（完全相同）将我的属性转换为栅格图层。

```
rastergp <- raster:::.polygonsToRaster(wrld_simpl, myraster, field = wrld_simpl$POP2005)  
stackraster <- stack(rastergp, gp)  
estimation <- calc(stackraster, fun = function(x) x[1]*x[2]) 
```

有人对如何进行有任何建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:41:50.753

嗯，您应该将您的脚本缩减到最低限度，以说明您正在尝试做什么。里面有一些不相关的东西，会分散注意力，妨碍我们弄清楚。

我*认为*您正在尝试做的事情（当您使用未记录的隐藏函数 raster:::.polygonsToRaster 时很难说）是在位置网格中获取多边形属性的值？您可以通过在多边形上覆盖点网格（而不是栅格）来做到这一点。

我将在这里为较小的网格进行此操作 - 您的分辨率将花费 100 倍的时间：

```
 > myraster <- raster(nrow = 57, ncol = 144, xmn = -180, xmx = 180, ymn= -58, ymx = 85)
 > pts = SpatialPoints(xyFromCell(myraster,1:prod(dim(myraster))),proj4string=CRS(proj4string(wrld_simpl)))
 > overGrid = pts %over% wrld_simpl 
```

现在 overGrid 只是一个标准数据框，其中所有网格点的值都来自 wlrd_simpl。它的顺序与您的栅格相同。因此：

```
> POP2010 = myraster
> POP2010[] = overGrid$POP2010
> plot(POP2010) 
```

将映射 POP2010 栅格。相比：

```
> spplot(wrld_simpl,"POP2010") 
```

这样就完成了所有的覆盖业务。然后，您可以从 overGrid 的列中创建一个堆栈。

# javascript - 使用 handlebars.js 在模板中赋值

> ID：11614580
> 
> 赞同：4
> 
> 时间：2012-07-23T14:29:53.967
> 
> 标签：javascript, html, handlebars.js, templating

**嘿大家！**

我已经问过是否可以通过 handlebars.js 中的局部变量传递一些变量。这是问题：[通过车把部分传递变量](https://stackoverflow.com/questions/11523331/passing-variables-through-handlebars-partial)。

由于没有解决方案，我构建了一个小解决方法，您可以在此处看到：[Rendering templates inside helpers in handlebars](https://stackoverflow.com/questions/11610513/rendering-templates-within-helpers-in-handlebars)。

为了让这一切正常工作，我需要一种方法来使用把手为模板中的特定变量分配值。

这个想法是做这样的事情：

```
// Within a template
{{ var a = { foo: 'bar'}; }}

// And then using it like this
{{myHelper a}} 
```

那么，有没有办法在模板中分配值，以便我可以将它们用于后期处理？

# 更新：

找到了一个小解决方法。我现在使用这种方法来使用注册的助手渲染模板并将助手传递一个可选的哈希值。这是测试规范：[https ://github.com/wycats/handlebars.js/blob/master/spec/qunit_spec.js#L932-945](https://github.com/wycats/handlebars.js/blob/master/spec/qunit_spec.js#L932-945)

# c# - 通过 HttpPost 传递十进制

> ID：11614585
> 
> 赞同：1
> 
> 时间：2012-07-23T14:30:12.657
> 
> 标签：c#, .net, asp.net-mvc-3, razor

我正在将一个对象加载到视图中`HttpGet`并填充`@Html.EditorFor`数据，我正在显示数据，我将制作它，以便用户可以编辑他想要的内容并通过 HttpPost 将更改的对象提交给控制器。

代码如下：

```
<div class="editor-label">
    @Html.Label("Taxa IVA normal")
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.taxaIVAnormal)
</div>

<div class="editor-label">
    @Html.Label("Taxa IVA intermédio")
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.taxaIVAintermedio)
</div>

//more code 
```

这些字段都是小数，但它们显示为`","`而不是`"."`，所以我无法将其发布回控制器中。

```
[HttpGet]
public ActionResult alteraTaxas()
{
    return View(TaxasRepository.getTaxas().SingleOrDefault());
}

[HttpPost]
public ActionResult alteraTaxas(Taxas tx)
{         
    TaxasRepository.AlteraTaxa(tx);
    return View();
} 
```

有没有办法（在视图中），所以当我使用`","`单独的十进制情况时，我没有得到验证“它不是一个数字”。我试过这个：

```
@Html.EditorFor(model => (double)model.taxaIVAnormal) 
```

但是 id 似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:02:25.490

I'm assuming that this is a Spanish site and model.taxaIVAnormal is string. The easiest way to get things working maybe to set the globalization parameter in web.config file:

```
<globalization uiCulture="es" culture="es-MX" /> 
```

See [http://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.71).aspx) for more info.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:53:05.313

这与您似乎遇到的问题相同。可能想尝试一下，看看它是否对您有用，因为它对其他用户有用。

[在视图模型中解析十进制](https://stackoverflow.com/questions/6994308/mvc-3-parse-decimal-in-view-model)

# javascript - 将回复表单从一个 div 移动到另一个 div javascript

> ID：11614586
> 
> 赞同：1
> 
> 时间：2012-07-23T14:30:15.800
> 
> 标签：javascript, dom

我正在尝试根据按下回复按钮的位置将我的回复表单从一个评论块移动到另一个评论块。

例如我有这个代码。

```
<ul class="comments-list"> 
    <li class="comment" id="'.$comComment->CommentID.'">
        <div>Comment Content</div>
        <a class="comment-reply-link"></a>
        <ul>
            <li>
                <div>Comment Content</div>
                <a class="comment-reply-link"></a>
            </li>
        </ul>
    </li>
    <li>
        <div>Comment Content</div>
        <a class="comment-reply-link"></a>
    </li>
</ul> 
```

然后回复表格：

```
<div id="comment-reply">And Form HEre</div> 
```

我知道如何使用显示块来做到这一点，但我想避免在每个评论块中制作回复表单并将其隐藏。是否可以使用类似的东西来做到这一点`parentNode.insertBefore`，`parentNode.removeChild.`或者是否有更好的方法来做到这一点。将不胜感激任何帮助或相关链接。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:54:48.237

以下是使用 jQuery 的方法：

[http://jsfiddle.net/Cd4Xk/](http://jsfiddle.net/Cd4Xk/)

```
$('a.comment-reply-link').click(function(){

    $(this).after($('#comment-reply'));

}); 
```

如果没有 jQuery，那就更难了。这个问题让我找到了最终的解决方案：[如何在不使用库的情况下在 JavaScript 中插入 After()？](https://stackoverflow.com/questions/4793604/how-to-do-insert-after-in-javascript-without-using-a-library)

我还发现此链接有助于解决此问题： [http ://snipplr.com/view/2107/insertafter-function-for-the-dom/](http://snipplr.com/view/2107/insertafter-function-for-the-dom/)

这是一个可行的解决方案：http: [//jsfiddle.net/Cd4Xk/1/](http://jsfiddle.net/Cd4Xk/1/)

这是该解决方案的代码：

```
function replyForm(me){
    var commentForm = document.getElementById('comment-reply')
    insertAfter(commentForm, me);

}

function insertAfter(newElement,targetElement) {
    //target is what you want it to go after. Look for this elements parent.
    var parent = targetElement.parentNode;

    //if the parents lastchild is the targetElement...
    if(parent.lastchild == targetElement) {
    //add the newElement after the target element.
    parent.appendChild(newElement);
    } 
    else {
    // else the target has siblings, insert the new element between the target and    it's next sibling.
     parent.insertBefore(newElement, targetElement.nextSibling);
    }
} 
```

当然，您需要添加`onclick="javascript:replyForm(this)"` 到您的链接。

希望有帮助。

# apache - 用于 HTTP 响应的 TTFB 和 gzip 压缩

> ID：11614588
> 
> 赞同：2
> 
> 时间：2012-07-23T14:30:18.993
> 
> 标签：apache, http, gzip

对 Time-to-first-byte (TTFB) 启用 gzip 压缩有什么影响？

我的假设是 apache 服务器在处理请求时无法开始部分流式传输响应，因为 gzip 需要完整响应才能为压缩做好准备。这是否意味着启用 gzip 压缩会增加 TTFB？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:17:25.080

您可以使用 php flush(); 函数首先发送页面标题（浏览器将更快地开始页面渲染）。

Gzip 压缩确实需要一些时间，但通常大约需要 10-40 毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-17T00:49:42.217

我同意[Julian Reschke](https://stackoverflow.com/users/50543/julian-reschke)的评论，即 gzip 支持流式传输。这意味着在压缩开始之前不需要完全响应。在存在 gzip 压缩的情况下，第一个字节将延迟压缩数据的第一个滑动窗口字节所需的时间。

# javascript - 对 google feed api 使用匿名函数

> ID：11614595
> 
> 赞同：0
> 
> 时间：2012-07-23T14:30:29.437
> 
> 标签：javascript, jquery, google-api

我看到了与此类似的帖子，因此我尝试遵循该问题的答案，但没有用。我的错误在哪里？我认为它应该显示“我的函数可以在这里运行:)”。但是 RSS 提要和此警报都不会出现。

```
 google.load("feeds", "1");
function initialize(callback) {
  var feed = new google.feeds.Feed("http://www.ntvmsnbc.com/id/24927681/device/rss/rss.xml");
  feed.setNumEntries(6);

  feed.load(function(result) {}){
    if (!result.error) {
      var container = document.getElementById("feed");
      var html = '';
      for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        var a= " ";
        a += entry.title;
        info[i] = a;
        callback();
       html += '<p>' + entry.publishedDate + '&nbsp' + entry.title;
      }
      container.innerHTML = html;
    }
  });
}
google.setOnLoadCallback(function(){

//Run the Initialize Function
initialize(function(){
     //Run anything else here like
     alert("My function can run here :)")  
});
}); 
```

好的，我正在更新我的问题 =)。我可以将 entry.title 添加到此函数的数组中，而不是此警报吗？如果是，我应该在那里写什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:33:26.580

看起来你混淆了一些语法：

```
feed.load(function(result) {}){ 
```

应该

```
feed.load(function(result){ 
```

# jquery - 字符串内的jQuery变量，引号内的引号

> ID：11614599
> 
> 赞同：5
> 
> 时间：2012-07-23T14:30:57.627
> 
> 标签：jquery

我有以下 jQuery 代码：

```
$(".container").append("<a href='javascript:void(0)'onClick='showField('"+data.name+"','"+data.text+"');'>Edit</a>"); 
```

哪个正在输出（注意之前`4`和之前的报价问题`>edit`：

```
<a href="javascript:void(0)" onclick="showField("4','school_type');'>Edit</a> 
```

什么时候应该输出：

```
<a href="javascript:void(0)" onclick="showField('4','school_type');">Edit</a> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T14:38:37.957

尝试`\"`而不是`'`in `onClick`：

```
$(".container").append("<a href='javascript:void(0)' onClick=\"showField('"+data.name+"','"+data.text+"');\">Edit</a>"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T14:32:38.583

你需要逃避你`"`的 s`\`

```
$(".container").append("<a href='javascript:void(0)' onClick='showField(\""+data.name+"\",\""+data.text+"\");'>Edit</a>"); 
```

[现场演示](http://jsfiddle.net/yFf55/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T13:46:17.923

虽然这个回复是在很晚的时候来的，但是你也可以使用这样的东西来实现你想要的：

```
 var element = '<p class = ' + '"capitals"' + '> This is a new paragraph</p>'
    $(".container").append(element); 
```

如果将上述代码打印到调试控制台，将打印以下输出：

```
 <p class = "capitals">This is a new paragraph</p> 
```

您可以像这样使用双引号和单引号组合`'""'`来打印出双引号。另一个例子：

```
 var doublequotedtext = '"Hello"'; 
        debug.print(doublequotedtext); 
```

因此将上述内容应用于您的代码：

```
 var element = '<a href = ' + '"javascript:void(0)"' + 'onClick = ' + '"showField(data.name,data.text);"' + '>Edit</a>'
       $(".container").append(element); 
```

# backup - TFS2010 仅从备份进行灾难恢复

> ID：11614602
> 
> 赞同：0
> 
> 时间：2012-07-23T14:30:58.357
> 
> 标签：backup, disaster-recovery

我看过很多关于如何移动TFS2010、应用层和数据库层的讨论。我们将数据库与 App Tier 放在同一台服务器上。我将测试在灾难性故障中恢复 TFS2010 数据库的过程。因此，我将拥有：

1.  所有 TFS 和 WSS 数据库的 SQL 备份
2.  我将拥有所有应用程序的安装软件（TFS 等）

是否有文档可用于概述安装 TFS2010 应用层的过程并使其准备好接受我的 SQL TFS2010 的备份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:06:13.107

[恢复应用层服务器](http://msdn.microsoft.com/en-us/library/dd793167.aspx)

[将数据恢复到同一位置](http://msdn.microsoft.com/en-us/library/ms252458.aspx)

[将数据恢复到不同的服务器](http://msdn.microsoft.com/en-us/library/ms252516.aspx)

# java - App Engine 部署错误 500

> ID：11614604
> 
> 赞同：1
> 
> 时间：2012-07-23T14:31:00.283
> 
> 标签：java, google-app-engine

我有一个问题，我不知道该怎么办。所以，我使用 Java(JSP-Servlet) 和 App Engine API 创建了一个小 Web 应用程序它在语言环境中工作，但是当我部署它时，它给了我这个错误：

```
Error: Server Error

The server encountered an error and could not complete your request.

If the problem persists, please report your problem and mention this error message and the query that caused it. 
```

并且，在管理页面的日志中

```
java.lang.UnsupportedClassVersionError: persiste/EmployeServlet : Unsupported major.minor version 51.0
    at com.google.appengine.runtime.Request.process-50f1863c6e652dbb(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

当我更改 java ( 从 java 7 到 java 6 ) 并执行应用程序时，我得到这个错误：

7 août 2012 13:02:52 com.google.apphosting.utils.jetty.JettyLogger 警告注意：Testv2 失败：java.lang.UnsupportedClassVersionError：test/Testv2Servlet：不支持的major.minor 版本51.0

7 août 2012 13:02:52 com.google.apphosting.utils.jetty.JettyLogger 警告注意：com.google.appengine.tools.development.DevAppEngineWebAppContext@1522de2 失败，D:\Etudes\Stage Dirham Express\workspace\ testv2\war}：java.lang.UnsupportedClassVersionError：test/Testv2Servlet：不支持的major.minor 51.0版

7 août 2012 13:02:52 com.google.apphosting.utils.jetty.JettyLogger 警告注意：JettyContainerService$ApiProxyHandler@15f4a7f 失败：java.lang.UnsupportedClassVersionError：test/Testv2Servlet：不支持的 major.minor 版本 51.0

7 août 2012 13:02:52 com.google.apphosting.utils.jetty.JettyLogger 警告注意：异常 java.lang.UnsupportedClassVersionError：test/Testv2Servlet：不支持的 major.minor 版本 51.0

```
at java.lang.ClassLoader.defineClass1(Native Method)

at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)

at java.lang.ClassLoader.defineClass(ClassLoader.java:615)

at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)

at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)

at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)

at java.security.AccessController.doPrivileged(Native Method)

at java.net.URLClassLoader.findClass(URLClassLoader.java:190)

at java.lang.ClassLoader.loadClass(ClassLoader.java:306)

at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:190)

at java.lang.ClassLoader.loadClass(ClassLoader.java:247)

at org.mortbay.util.Loader.loadClass(Loader.java:91)

at org.mortbay.util.Loader.loadClass(Loader.java:71)

at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)

at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)

at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)

at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)

at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)

at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)

at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)

at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)

at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)

at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)

at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)

at 
```

com.google.appengine.tools.development.JettyContainerService.reloadWebApp(JettyContainerService.java:315)

```
at com.google.appengine.tools.development.JettyContainerService$ScannerListener.fileChanged(JettyContainerService.java:259)

at org.mortbay.util.Scanner.reportChange(Scanner.java:464)

at org.mortbay.util.Scanner.reportDifferences(Scanner.java:330)

at org.mortbay.util.Scanner.scan(Scanner.java:280)

at org.mortbay.util.Scanner$1.run(Scanner.java:232)

at java.util.TimerThread.mainLoop(Timer.java:512)

at java.util.TimerThread.run(Timer.java:462) 
```

7 août 2012 13:02:52 com.google.apphosting.utils.jetty.JettyLogger 警告注意：com.google.appengine.tools.development.JettyContainerService$ScannerListener@113e9fd 在 'D:\Etudes\Stage Dirham Express\workspace 上失败\testv2\war\WEB-INF\appengine-web.xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:24:08.403

当您在一个版本的 Java SDK 下编译 jar 并尝试在不同版本上运行它们时，会发生此错误。App Engine 生产环境支持 Java 6（又名 v1.6），因此在编译代码时，您还应该在本地计算机上使用 Java 6。

如果您的计算机上安装了多个 Java 版本，请确保在编译代码时使用正确的版本。

如果您使用的是 Eclipse，请确保它也配置为使用 Java 6。更改版本后，您还应该“清理”您的项目以删除过时的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:21:40.400

版本号为 51.0。应用引擎不支持点。

# javascript - js 表单验证中的 docment.forms["myForm"]["Element"].value 命令

> ID：11614607
> 
> 赞同：-1
> 
> 时间：2012-07-23T14:31:08.257
> 
> 标签：javascript, forms, validation

我正在做一个简单的 Javascript 表单验证，但无法访问表单中的元素。似乎命令：

```
document.forms["myForm"]["un"].value; 
```

适用于资源管理器，但不适用于 Firefox。我正在处理的表格是：

```
 <form name = "myForm" onsubmit="check()" method="POST">
            User Name:<br><input type="text" name = "un"><br/>
    Password:<br><input type="password" name = "pw"><br/>
    Confirm Password:<br><input type="password" name = "cpw"><br/>
            Email:<br><input type = "text" name = "em"><br/>
    <input type = "submit" id = "sub" value="submit"> 
```

让 js 验证为：

```
<script type = "text/javascript">
var user = document.forms["myForm"]["un"].value;
alert(user);
</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T14:36:15.020

尝试这个，

```
var user = document.myForm.un.value; 
```

我不确定您是否已经听说过 JQuery，但我建议您使用它。看看这个[http://jquery.com/](http://jquery.com/)。

# c# - 如何使用和保存视图模型

> ID：11614609
> 
> 赞同：3
> 
> 时间：2012-07-23T14:31:12.633
> 
> 标签：c#, asp.net-mvc-3

**查看模型：**

```
namespace AESSmart.ViewModels
{
    public class HomeIndexViewModel
    {
        public power_weatherstationhistory WeatherStationHistory {get;set;}
        public DateTime startingDate {get;set;}
        public DateTime endingDate {get;set;}
        public DateTime utcStartingDate {get;set;}
        public DateTime utcEndingDate {get;set;}
        public double LifeTimeGeneration {get;set;}
        public double CO2Offset {get;set;}
        public double GallonsOfGasolineOffset {get;set;}
        public double BarrelsOfOilOffset {get;set;}
        public string Message {get;set;}
    }
} 
```

**控制器：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Mvc;
using AESSmart.Models;
using AESSmart.ViewModels;

namespace AESSmart.Controllers
{
    public class HomeController : Controller
    {
        private readonly AESSmartEntities db = new AESSmartEntities();

        public ActionResult Index()
        {
            HomeIndexViewModel IndexViewModel = new HomeIndexViewModel();

        if (Convert.ToString(IndexViewModel.startingDate) == 
                                      "1/1/0001 12:00:00 AM" ||
            Convert.ToString(IndexViewModel.endingDate) == 
                                      "1/1/0001 12:00:00 AM") 
            {
                IndexViewModel.startingDate = 
                     new DateTime(DateTime.Now.Year, 
                                  DateTime.Now.Month, 
                                  DateTime.Now.Day, 
                                  0, 
                                  0, 
                                  0);
                IndexViewModel.endingDate = 
                     new DateTime(DateTime.Now.Year, 
                                  DateTime.Now.Month, 
                                  DateTime.Now.Day, 
                                  23,
                                  59, 
                                  59);
            }

            // There is a bunch of code here to gather all of the
            // data need and modify the values of IndexViewModel 

            return View(IndexViewModel);
        }
    }
} 
```

我的索引页面使用以下内容：`@model AESSmart.ViewModels.HomeIndexViewModel`然后我使用`@Model.Something`在视图中呈现每一块。

视图中使用了一堆只需要显示的数据。用户可以修改的唯一数据是`startingDate`和`EndingDate`。一旦他们修改了其中任何一个，我希望他们`Index` `ActionResult`使用`HomeController`这些新日期来提取正确的信息。现在它只是默认回到同一个日期（那个日期就是今天的日期）。我在这里做错了什么？

此外，`Index` `ActionResult`收集天气信息。我希望将收集到的任何信息实际保存到数据库中。如何保存中包含的信息`WeatherStationHistory`？

以下是用户看到的示例：

![在此处输入图像描述](../Images/9019329a1fc629411686087cee996f55.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:05:37.927

我将大部分代码移至视图模型。为了保存我添加`WeatherStationHistory`到数据库上下文中的更改并保存了更改。现在一切都按预期工作。这是我的代码现在的样子：

**查看型号：**

```
namespace AESSmart.ViewModels
{
  public class HomeIndexViewModel
  {
    public power_weatherstationhistory WeatherStationHistory {get;set;}
    public DateTime startingDate {get;set;}
    public DateTime endingDate {get;set;}
    public DateTime utcStartingDate {get;set;}
    public DateTime utcEndingDate {get;set;}
    public double LifeTimeGeneration {get;set;}
    public double CO2Offset {get;set;}
    public double GallonsOfGasolineOffset {get;set;}
    public double BarrelsOfOilOffset {get;set;}
    public string Message {get;set;}

    public void setUTCDatesTimes()
    {
      //Contains code to convert dates to the UTC equivalent 
    }

    public void setOffsetsAndPowerGenerated()
    {
      /*
       * CONTAINS A BUNCH OF CODE TO GATHER THE GENERATED POWER READINGS
       * FOR THE SPECIFIED DATETIME AND STORES RESULT IN LifeTimeGeneration.  
       * ALSO, PERFORMS CALCULATIONS TO GET AND STORE VALUES FOR CO2Offset, 
       * GallonsOfGasolineOffset, AND BarrelsOfOilOffset
       */
    }

    public void saveWeather()
    {
      AESSmartEntities db = new AESSmartEntities();
      db.PowerWeatherStationHistorys.Add(WeatherStationHistory);
      db.SaveChanges();
    }

    public void setWeather()
    {
      AESSmartEntities db = new AESSmartEntities();
      DateTime tempDate = (DateTime.UtcNow).AddMinutes(-5);

      var myQuery = (from s in db.PowerWeatherStationHistorys
                     where s.recordTime >= tempDate
                     orderby s.recordTime descending
                     select s).Take(1);

      if(myQuery.Count() > 0) 
      {
        /*
         * IF A WEATHER RECORD EXISTS IN THE THE DATABASE NO OLDER 
         * THAN 5 MINUTES THEN USE THAT INFORMATION
         */
      }
      else
      {
        /*
         * IF A RECORD DOES NOT EXIST IN THE THE DATABASE NO OLDER 
         * THAN 5 MINUTES THEN GET WEATHER INFORMATION FROM WUNDERGRAOUND API 
         * THEN SAVE IN DATABASE
         */

        saveWeather();
      }
    }
  }
} 
```

**控制器：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Mvc;
using AESSmart.ViewModels;

namespace AESSmart.Controllers
{
  public class HomeController : Controller
  {
    public ActionResult Index()
    {
      HomeIndexViewModel IndexViewModel = new HomeIndexViewModel();

      IndexViewModel.startingDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 0, 0, 0);
      IndexViewModel.endingDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 23, 59, 59);
      IndexViewModel.setUTCDatesTimes();
      IndexViewModel.setWeather();
      IndexViewModel.setOffsetsAndPowerGenerated();
      IndexViewModel.Message = "Welcome to the Amptech Energy Systems Solar PV Monitoring System";

      return View(IndexViewModel);
    }

    [HttpPost]
    public ActionResult Index(HomeIndexViewModel IndexViewModel)
    {
      if (Convert.ToString(IndexViewModel.startingDate) == "1/1/0001 12:00:00 AM" || 
          Convert.ToString(IndexViewModel.endingDate) == "1/1/0001 12:00:00 AM")  
      {
        return RedirectToAction("Index");
      }

      IndexViewModel.setUTCDatesTimes();
      IndexViewModel.setWeather();
      IndexViewModel.setOffsetsAndPowerGenerated();
      IndexViewModel.Message = "Welcome to the Solar PV Monitoring System";

      return View(IndexViewModel);
    }     
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:58:33.880

您是否尝试为索引添加 [HTTPPost] 方法？

```
[HttpPost]
public ActionResult Index(HomeIndexViewModel viewModel) 
        { 

    if (Convert.ToString(viewModel.startingDate) == 
                             "1/1/0001 12:00:00 AM" || 
        Convert.ToString(viewModel.endingDate) == 
                             "1/1/0001 12:00:00 AM")  
        { 
            viewModel.startingDate = new DateTime(DateTime.Now.Year, 
                                                  DateTime.Now.Month, 
                                                  DateTime.Now.Day,  
                                                  0,  
                                                  0,  
                                                  0); 
            viewModel.endingDate = new DateTime(DateTime.Now.Year,  
                                                DateTime.Now.Month,  
                                                DateTime.Now.Day,  
                                                23,  
                                                59,  
                                                59); 
        } 

        // There is a bunch of code here to gather all of the 
        // data need and modify the values of IndexViewModel  

        return View(viewModel); 
    } 
```

# sql-server-2008 - SQL查询性能优化如何做到完美

> ID：11614612
> 
> 赞同：1
> 
> 时间：2012-07-23T14:31:39.170
> 
> 标签：sql-server-2008, tsql

我正在尝试编写一个 SQL 脚本来获取特定日期范围的数据。在下面显示的示例中，我仅尝试提取 1 天（日期时间）的数据。

但是完成查询执行只需要 3 多分钟。

我不太确定是否缺少要在`Datetime`列上创建的任何索引。如果是的话，有人可以建议我如何使这个 SQL 查询快速执行吗？

另请参阅查询执行计划和统计 IO 附加的快照。

非常感谢您的帮助。

**SQL 查询**

```
set Statistics IO on
declare @StartDate datetime,@EndDate datetime
set @StartDate = '2012-07-19 00:00:00.000'
set @EndDate = '2012-07-20 23:59:00.000'
select * from Admin_Letters A with (nolock)
Where A.Date_Linked > @StartDate and A.Date_Linked < @EndDate 
```

**执行计划快照**

## **1.**

![在此处输入图像描述](../Images/0f9a0db238efac0c76093bb1c0954730.png)

## **2.**

![在此处输入图像描述](../Images/7ee4da1f6e7a7c87ab47bc1219db6361.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:38:44.280

在`SELECT *`你的查询中，你不会有太多的运气来尝试优化任何东西......因为你从表中请求**所有列**，SQL Server 的查询优化器通常会进行表扫描，因为这样更快。

另外：`table scan`意味着您的表上没有任何聚簇索引-> 非常糟糕的选择。您应该在每个真实表上都有一个**良好的聚簇索引！**

一旦你有了它（例如在一个`INT IDENTITY`列上），那么你需要从那个表中决定你真正需要**哪些列。**在 上放置一个非聚集索引`Date_Linked`，并包含您真正需要的所有列 - 例如：

```
CREATE NONCLUSTERED INDEX IX01_Admin_Letters
ON dbo.Admin_Letters(Date_Linked)
INCLUDE (Col1, Col2, ..., ColN)   -- as **few** columns as possible! 
```

然后一个

```
SELECT Date_Linked, Col1, Col2, ...ColN 
FROM dbo.Admin_Letters A
WHERE A.Date_Linked > @StartDate AND A.Date_Linked < @EndDate 
```

**真的会飞！**（因为现在，SQL Server 的查询优化器可以选择只从索引中选择几行 - 甚至对几列的索引扫描也会比表扫描快得多）

# javascript - 我是否需要将 2 个模型传递到此视图中？

> ID：11614613
> 
> 赞同：0
> 
> 时间：2012-07-23T14:31:39.800
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个页面，其中显示了许多照片，每张照片都由 View 呈现`PhotoListItemView`。单击照片时，会出现一个模态视图，其中包含一组`ModalAddToSetView`列表`SetListView`。单击其中一个 Set 时`SetView`，我需要将`photo_id`and发送`set_id`到后端。

**问题：**在 Set 的点击处理程序中，我可以`set_id`通过使用`this.model.get('id')`. 传统的获取方式是`photo_id`什么？

**照片视图**

*`photo_id`在传递给这个视图的模型中*

```
PhotoListItemView = Backbone.View.extend({

    events: {
        'click #add.photo_btn' : 'add'
    },

    add: function(event) {
        event.stopImmediatePropagation();

        // Show modal
        $('#modal_addit').modal();
        modalAddToSetView = new ModalAddToSetView({ model: this.model });
    }

}); 
```

**模态视图**

```
ModalAddToSetView = Backbone.View.extend({

    initialize: function() {
        this.render();
        this.renderSets();
    },

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
        return this;
    },

    renderSets: function() {
        this.setList = new SetCollection();
        this.setListView = new SetListView({ collection: this.setList });
        this.setList.fetch({
            data: {user_id: $('#user_id').val()},
            processData: true
        });
    }
}); 
```

**集合视图**

```
SetListView = Backbone.View.extend({

    initialize: function() {
        this.collection.on('reset', this.render, this);
    },

    render: function() {
        this.collection.each(function(set, index) {
            $(this.el).append( new SetView({ model: set }).render().el );
        }, this);
    }
});

SetView = Backbone.View.extend({

    template: _.template( $('#tpl_modal_addit_set').html() ),

    events: {
        'click': 'addToSet'
    }

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
        return this;
    },

    addToSet: function() {
        $.post('api/add_to_set', {
            photo_id: ,         // HOW DO I PASS THE PHOTO_ID?
            set_id: this.model.get('id')
        })
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:52:32.357

我没有看到将`photo_id`参数传递给`SetListView`构造函数并将其再次传递给构造函数的任何问题`SetView`：

```
// code simplified and no tested
SetListView = Backbone.View.extend({
  initialize: function( opts ) {
    this.photo_id = opts.photo_id;
    this.collection.on('reset', this.render, this);
  },

  render: function() {
    this.collection.each(function(set, index) {
      $(this.el).append( new SetView({ model: set, photo_id: this.photo_id }).render().el );
    }, this);
  }
});

SetView = Backbone.View.extend({
  initialize: function( opts ) {
    this.photo_id = opts.photo_id;
  },

  addToSet: function() {
    $.post('api/add_to_set', {
      photo_id: this.photo_id,
      set_id: this.model.get('id')
    })
  }
}); 
```

# objective-c - 如何在标签栏中向上移动文本？

> ID：11614615
> 
> 赞同：0
> 
> 时间：2012-07-23T14:31:40.167
> 
> 标签：objective-c, xcode

我在应用程序底部有标签栏，每个标签栏项目都有标题。

我怎样才能向上或向下移动这个标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:51:50.283

解决方案：

```
 UITabBar *tabBar = self.tabBarController.tabBar;

 UITabBarItem *item0 = [tabBar.items objectAtIndex:0];

 item0.titlePositionAdjustment = UIOffsetMake(10, 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:39:15.873

你不能（除非它的 iOS5 或更高版本）。你必须定制。

# mysql - MySQL MyISAM - 在不锁定的情况下进行插入

> ID：11614616
> 
> 赞同：1
> 
> 时间：2012-07-23T14:31:42.883
> 
> 标签：mysql, insert, locking, myisam

如何在不锁定表的情况下始终插入 MySQL MyISAM 数据库？

当我加载 100,000 条记录时，我的其他进程似乎被锁定。

基本上，即使表中有孔，我是否可以强制使用 concurrent_inserts=2 ，因此在插入期间没有表锁定？

可以为会话动态设置 concurrent_inserts 吗？见[http://dev.mysql.com/doc/refman/5.0/en/concurrent-inserts.html](http://dev.mysql.com/doc/refman/5.0/en/concurrent-inserts.html)

非锁定插入还有哪些其他方法？
“插入延迟”会在插入期间防止表锁定吗？见[http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:57:03.027

如果您以小批量执行插入，则使用 INSERT DELAYED 将使从表中选择的客户端基本上获得第一优先级，因此它们不会阻塞。如果您一次插入数千行，您可能会锁定表一段时间。可以帮助加快插入速度的另一件事是暂时告诉数据库跳过唯一检查。这将阻止对任何唯一键的持续分析，但不会阻止锁定表。您必须确定您插入的内容是独一无二的。

在进行多次插入时，InnoDB 通常是更好的选择，因为它会锁定行而不是表。您的插入将花费更长的时间，但您的客户会看到更好的并发性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T13:10:24.103

我有同样的问题。我试图将 2,500,000 条记录插入到 MyISAM 表中。这是一张独立的桌子，所以锁并不让我担心。但是插入过程只是冻结了整个数据库服务器。

所以我做了什么：

*   删除所有 INDEX-es（在过程结束时添加这些）
*   每次插入 2500 行
*   使用 INSERT DELAYED INTO

而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:57:11.357

IIRC MyISAM 在任何插入发生时锁定表.. 只需重新阅读并确认：

> 为了实现非常高的锁定速度，MySQL 对除 InnoDB、BDB 和 NDBCLUSTER 之外的所有存储引擎使用表锁定（而不是页、行或列锁定）

取自：[http ://dev.mysql.com/doc/refman/5.0/en/table-locking.html](http://dev.mysql.com/doc/refman/5.0/en/table-locking.html)

如果您确实知道任何非锁定 MyISAM 插入，请告诉我 - 因为这是我每天都面临的问题（我不喜欢 InnoDB 空间消耗和速度）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T18:34:57.460

MySQL 确实支持 MyISAM 表在同一个表中的并行插入。

**MyISAM**

MySQL 对 MyISAM、MEMORY 和 MERGE 表使用表级锁定，一次只允许一个会话更新这些表，使其更适合只读、多读或单用户应用程序。

但是，上面提到的 MyISAM 表的行为可以通过[concurrent_insert](https://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_concurrent_insert)系统变量来改变，以实现并发写入。您可以将属性的值设置为`1`或`2`，具体取决于您的要求。详情请参阅链接。

因此，事实上，MySQL 确实支持 InnoDB 和 MyISAM 存储引擎的并发插入。

# php - 使用 MAMP 安装 Zend 调试器

> ID：11614623
> 
> 赞同：1
> 
> 时间：2012-07-23T14:31:56.713
> 
> 标签：php, mamp, zend-studio

我正在使用**MAMP 的免费版本**。我正在使用最新版本的 MAMP 2.1.1 和 PHP 版本 5.4.4。

我正在尝试安装 Zend Debugger，所以我从 Zend 网站下载了它，将其复制到以下路径

```
/Applications/MAMP/bin/php/php5.4.4/lib/php/extensions/no-debug-non-zts-20100525 
```

然后我配置 php.ini 并编写以下行：

```
[ZendDebugger]
zend_extension= "/Applications/MAMP/bin/php/php5.4.4/lib/php/extensions/no-debug-non-zts-20100525/ZendDebugger.so"
zend_debugger.allow_hosts= 127.0.0.1
zend_debugger.expose_remotely= always 
```

我确实退出了 MAMP 然后重新启动它，但它不起作用！

那么我应该怎么做才能正确配置它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T14:00:02.017

如果您只使用调试器，这应该可以解决**问题**。

```
[Zend]
zend_extension=/Applications/MAMP/bin/php/php5.5.10/lib/php/extensions/no-debug-non-zts-20121212/ZendDebugger.so
zend_debugger.allow_hosts=127.0.0.1/32,192.168.1.1/16
zend_debugger.expose_remotely=always
zend_debugger.allow_tunnel=127.0.0.1/32 
```

当然使用**ZendDebugger.so的适当路径**

**您至少需要 Zend Debugger v6.0.0**才能使其工作。如果您从 Zend 下载页面下载调试器，它将失败。这是一个过时的调试器版本。

Zend Studio 应用程序中提供了最新的 Zend 调试器，例如：

```
/Applications/ZendStudio.app/Contents/Resources/Java/plugins/com.zend.php.debug.debugger.macosx_10.6.0.v20140128-2127/resources/php55/ZendDebugger.so 
```

只需从 Zend Studio 应用程序中获取最新的调试器并将其复制到 MAMP 中的适当位置。

MAMP、Zend Studio 和 Zend Debugger 是非常强大的调试工具，可以提高代码的性能。

请注意，您的 Web 根目录上还需要 dummy.php 文件。

你可以自己做：

```
<?php
@ini_set('zend_monitor.enable', 0);
if(@function_exists('output_cache_disable')) {
    @output_cache_disable();
}
if(isset($_GET['debugger_connect']) && $_GET['debugger_connect'] == 1) {
    if(function_exists('debugger_connect'))  {
        debugger_connect();
        exit();
    } else {
        echo "No connector is installed.";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T18:30:20.993

对于遇到 zend 调试器 ini 设置问题的任何人。在我将下面的最后一行添加到 php.ini 的 Zend 部分之后，我终于让它工作了

```
[Zend]
zend_extension="/Applications/MAMP/bin/php/php5.2.17/lib/php/extensions/Zend/ZendDebugger.so"
zend_debugger.allow_hosts=127.0.0.1/32,192.168.1.1/16
zend_debugger.expose_remotely=always
zend_debugger.allow_tunnel=127.0.0.1/32 
```

# html - $_POST 变量仅返回某些字段的值，但不是全部

> ID：11614625
> 
> 赞同：0
> 
> 时间：2012-07-23T14:31:59.457
> 
> 标签：html, forms, post, textinput

因我的愚蠢而编辑：

我有一个简单的 html 表单，带有基本的选择、文本和文本区域输入。提交后，表单会返回某些字段的空白，但不是全部。下面是表格：

```
<form action='?action=createDigitalJob' method='post'>
    <table width='100%'>
        <tr>
            <th align='left'>Job Type</th>
            <td>
                <select id='jobTypeID' name='jobType' style='width:250px;' onchange=\"digitalJobToggle('jobTypeID')\">
                    <option value='0'>Count Type&nbsp;&nbsp;</option>
                    <option value='wu'>Web Update&nbsp;&nbsp;</option>
                    <option value='purl'>PURL&nbsp;&nbsp;</option>
                    <option value='furl'>FURL&nbsp;&nbsp;</option>
                    <option value='gurl'>GURL&nbsp;&nbsp;</option>
                    <option value='domain'>Domain Purchase&nbsp;&nbsp;</option>
                    <option value='eblast'>E-Blast&nbsp;&nbsp;</option>
                    <option value='tdm'>TDM&nbsp;&nbsp;</option>
                    <option value='crm'>ORM&nbsp;&nbsp;</option>
                </select>
            </td>
        </tr>
        <tr>
            <th align='left'>Urgent</th>
            <td>
                <select name='isUrgent'>
                    <option value='No'>No&nbsp;&nbsp;</option>
                    <option value='Yes'>Yes&nbsp;&nbsp;</option>
                </select>
            </td>
        </tr>
        <tr id='wu' style='display:none'>
            <td colspan='2'>
                <table class='plain'>
                    <tr>
                        <td>Webpage Address</td>
                        <td><input type=\"text\" name=\"webpageAddress\" /></td>
                    </tr>
                    <tr>
                        <td valign='top'>Current Text</td>
                        <td><textarea name='currentText' style='width:500px; height:250px;' placeholder='Current Text' ></textarea></td>
                    </tr>
                    <tr>
                        <td valign='top'>New Text</td>
                        <td><textarea name='newText' style='width:500px; height:250px;' placeholder='New Text Text' ></textarea></td>
                    </tr>
                    <tr>
                        <td>Copy Proofed?</td>
                        <td>
                            <select name='copyProofed'>
                                <option value='No'>No&nbsp;&nbsp;</option>
                                <option value='Yes'>Yes&nbsp;&nbsp;</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr id='submitRow' style='display:none'>
            <td colspan='2'>
                <input type='hidden' name='step' value='2' />
                <input type='submit' name='submit' value='Submit' />&nbsp;&nbsp;
                <input type='button' value='Cancel' onclick='javascript:history.go(-1);' />
            </td>
        </tr>
    </table>
</form> 
```

提交表单后，我可以执行 print_r($_POST) 并收到以下信息：

> 数组 ( [jobType] => wu [isUrgent] => 是 [webpageAddress] => [currentText] => 1 [newText] => [copyProofed] => 否 [creativeComplete] => 否 [jobNumber] => [phoneVerified] => 没有 [leadEmail] => [变量] => [pincodes] => 没有 [webpageAddress2] => [eblastType] => 数字 [subjectLine] => [copyApproved] => 没有 [dueDate_Month] => 1 [dueDate_Day] => 1 [dueDate_Year] => 2012 [notes] => 41 [step] => 2 [submit] => Submit )

如果我是 var_dump($_POST)，我会得到：

> array 'jobType' => string 'wu' (length=2) 'isUrgent' => string 'Yes' (length=3) 'webpageAddress' => string '' (length=0) 'currentText' => string '1 ' (length=1) 'newText' => string '' (length=0) 'copyProofed' => string 'No' (length=2) 'creativeComplete' => string 'No' (length=2) 'jobNumber' => string '' (length=0) 'phoneVerified' => string 'No' (length=2) 'leadEmail' => string '' (length=0) 'variables' => string '' (length=0) 'pincodes' => string 'No' (length=2) 'webpageAddress2' => string '' (length=0) 'eblastType' => string'数字'（长度=7）'subjectLine'=>字符串''（长度=0）'copyApproved'=>字符串'否'（长度=2）'dueDate_Month'=>字符串'1'（长度=1）'dueDate_Day ' => 字符串 '1' (length=1) 'dueDate_Year' => 字符串 '2012' (length=4) 'notes' => 字符串 '41' (length=2) 'step' => 字符串 '2' (长度=1) '提交' => 字符串'提交' (长度=6)notes' => string '41' (length=2) 'step' => string '2' (length=1) 'submit' => string 'Submit' (length=6)notes' => string '41' (length=2) 'step' => string '2' (length=1) 'submit' => string 'Submit' (length=6)

即使我在点击提交之前为它们输入了数据，两种类型的 $_POST 转储都显示为 pagesAddress 和 newText 的空值。有人知道为什么我输入的数据在 $_POST 转储中不可用吗？

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:34:54.060

`[currentText] => 1`（从 输出`print_r`）

和

`'currentText' => string '1' (length=1)`（从 输出`var_dump`）

相同.. 即`1`..的值`var_dump`显示字段的类型（`string`在这种情况下），其中 as`print_r`不...来自手册：

`print_r`

> 以人类可读的方式显示有关变量的信息

然而`var_dump`

> 显示有关一个或多个表达式的结构化信息，包括其类型和值。使用缩进显示结构的值递归地探索数组和对象。

在没有`print_r`显示此值的地方：

`[webpageAddress] =>`

并将`var_dump`显示这个

`'webpageAddress' => string '' (length=0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:50:00.383

输出中的一些变量没有出现在 html 代码 (webpageAddress2, eblastType, subjectLine) 中。在“webpageAddress”的情况下，您是否尝试删除转义字符？如果从引号 ( " ) 中删除转义符 ( \ ) 会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:55:37.893

问题是表中的表。我永远不会使用表格构建表格。使用 CSS 调整大小和位置的 Div 或列表是一个更易于管理和调试的系统。

也为了避免逃避每个“与\”的头痛尝试保存这样的表格

```
$form = <<<EOT
<form html here>
EOT; 
```

# xslt - 如何在 xsl:text 元素中引用变量？

> ID：11614626
> 
> 赞同：9
> 
> 时间：2012-07-23T14:31:59.083
> 
> 标签：xslt

我有一个样式表，我希望在 xsl 文本元素中插入预定义的字符串变量，但在搜索网络时找不到任何指针。

例如：

```
<xsl:variable name="var" select="node()/ref/text()"/>
...
<xsl:text>Some text where I want to append $var variable desperately</xsl:text>
... 
```

我试过 $var, ($var), {$var}...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T14:40:18.120

```
Some text where I want to include the value of <xsl:value-of select='$var'/>. 
```

请注意，`<xsl:text>`仅需要控制空格的行为。大多数情况下，您可以简单地键入文本并在结果不是您预期的情况下包含此元素——`<xsl:text>`不过，我想知道何时使用的规则并没有什么坏处。:)（而且它并不复杂：`<xsl:text>`否则使用，您的文本节点将只有空白，或者如果它们包含您希望在任一端避免的额外空白。）

编辑：请注意，变量中的空格在使用时不需要`xsl:text`保护，这仅适用于 XSL 解析步骤：

```
<xsl:variable name="newline"><!-- can be global -->
<xsl:text>
</xsl:text>
</xsl:variable>

<xsl:when test="starts-with(., $newline)">
  ...
</xsl:when>

Here's some text<xsl:value-of select='$newline' />with formatting. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-02T22:03:27.280

这是另一种方式：

```
<xsl:value-of select="concat(
    'Some text where I want to append ', 
    $var, 
    ' variable desperately')" /> 
```

虽然它有点难看，但这让您可以完全控制文本和变量文本之间的空白。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-23T20:45:18.703

`xsl:text`仅用于输出固定文本，不能包含嵌套指令。输出变量文本的指令是`xsl:value-of`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T14:53:31.583

我做了这样的事情来创建一个带有字符串的变量和另一个变量

```
<xsl:variable name="imgsrc">http://mirrors.creativecommons.org/presskit/buttons/<xsl:value-of select='$iconSize' />/<xsl:value-of select="substring-before($licenceTypeAndText, '|')" /></xsl:variable> 
```

这将产生一个像这样的值的变量

```
http://mirrors.creativecommons.org/presskit/buttons/80x15/png/by.png 
```

# git - 如何在 Github 中查看我的公有和私有 SSH 密钥？

> ID：11614629
> 
> 赞同：4
> 
> 时间：2012-07-23T14:32:11.120
> 
> 标签：git, github, ssh-keys

我是 Github 的新手。我已经生成了 SSH 密钥，现在可以在**SSH Keys**中看到它。是公钥还是私钥？

**我已将 SSH 密钥（我在SSH Keys**下看到）发送给我的客户端。他问是否公开？他想要我的私钥。

是否需要私有 SSH 密钥？如果是这样，我该如何找回它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:49:55.867

### TL;博士

*您无法从 GitHub帐户*检索私钥，但如果您将密钥文件显式添加到已发布的存储库，则可以。GitHub 还限制您查看附加到帐户的公钥[指纹；](https://github.com/settings/ssh)据我所知，您也无法在 GitHub 上*查看*帐户的公钥。

### 私钥与公钥

SSH 公钥存储在一行中，并以密钥类型字段开头，例如`ssh-rsa`or `ecdsa-sha2-nistp256`。私钥具有多行，以及标识密钥块的标头。例如：

> -----开始 RSA 私钥-----

### GitHub 只接受公钥

无论如何，您实际上无法将有效的私钥添加到 GitHub 帐户。目前，GitHub 仅为此目的接受 RSA 和 DSA 公钥。如果您尝试添加不同的密钥类型或任何类型的无效公钥，您会收到如下错误：

> 密钥无效。它必须以“ssh-rsa”或“ssh-dss”开头。检查您是否正在复制密钥的公共部分

### 私钥不存储在 GitHub 帐户中的服务器端

*所有这一切的结果是——除了你永远不*应该在服务器端存储你的私钥这一事实之外——*不可能*将私钥附加到 GitHub 帐户。因此，无法从 GitHub 帐户中检索密钥对的私有部分。

当然，虽然您不能将 SSH 私钥添加到 GitHub 帐户，但您*可以*将它们添加到已发布的存储库中。作为一个例子，[Vagrant](http://vagrantup.com/)项目[发布了一个完整的密钥对](https://github.com/mitchellh/vagrant/tree/master/keys)，但这是一个特例。

*发布您的密钥本质上是不安全的。除非您了解其中的含义，否则不要这样做。*

# sql - 如何在 sql server 中的组的总和集中创建一行？

> ID：11614631
> 
> 赞同：1
> 
> 时间：2012-07-23T14:32:16.260
> 
> 标签：sql, sql-server-2008, tsql

假设我有表**Tab** ( `id,, DeptName, Total, ...`)

有 4 个可能的值`Deptname`：`Dept1, Dept2, Dept3, Dept4`。

然后我可以发出 SQL 进行这样的分组：

```
Select DeptName, Totaol = Sum(total) 
from Tab 
group by DeptName 
```

通常，根据 的值，结果将有 4 行`DeptName`：

```
DeptName Total
Dept1    1234.09
Dept2    234.80
Dept3    34.34
Dept4    614.48 
```

如果 没有数据`Dept2`，则结果将只有 3 行：

```
Dept1    1234.09
Dept3    34.34
Dept4    614.48 
```

我想要的是结果总是有 4 行。如果没有数据`Dept2`，我希望得到如下结果：

```
Dept1    1234.09
Dept2    0
Dept3    34.34
Dept4    614.48 
```

如何实现这个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:18:12.343

这似乎是正确的[SQL Fiddle](http://sqlfiddle.com/#!3/52158/11/0)：

```
SELECT t2.DeptName, Total = COALESCE(Sum(total),0)
FROM Tab t1
RIGHT OUTER JOIN (SELECT 'Dept1' as DeptName UNION ALL
                  SELECT 'Dept2' UNION ALL
                  SELECT 'Dept3' UNION ALL
                  SELECT 'Dept4') t2 ON t2.DeptName = t1.DeptName
GROUP BY t2.DeptName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:38:29.707

试试这个：

```
select b.DeptName,b.Total from(
select 'Dept1' as Dept union all
select 'Dept2' as Dept union all
select 'Dept3' as Dept union all
select 'Dept4' as Dept )a left outer join
(
Select DeptName, case when b.DeptName IS null then 0 else SUM(total) end as Total
from Tab 
group by DeptName)b
on b.DeptName=a.Dept 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:51:49.767

使用 "union all" 将每一行分成多行：

```
select dept, sum(val) as sumval
from ((select 'dept1' as dept, t.dept1 as val from tab t) union all
      (select 'dept2', t.dept2 as val from tab t) union all
      (select 'dept3', t.dept3 as val from tab t) union all
      (select 'dept4', t.dept4 as val from tab t)
     ) t
group by dept
order by 1 
```

如果您有大量数据，以下可能会更有效：

```
 (select 'dept1' as dept, sum(t.dept1) as val from tab t) union all
      (select 'dept2', sum(t.dept2) as val from tab t) union all
      (select 'dept3', sum(t.dept3) as val from tab t) union all
      (select 'dept4', sum(t.dept4) as val from tab t) 
```

# c# - 工具提示编码问题

> ID：11614632
> 
> 赞同：4
> 
> 时间：2012-07-23T14:32:17.340
> 
> 标签：c#, asp.net, encoding, .net-4.0

```
<asp:HyperLink ID="TestHyperLink" runat="server"></asp:HyperLink> 
```

我有上面的超链接。我只是用下面的代码设置文本：

```
string textFromUser = "This is test's.";
string encodedText=HttpUtility.HtmlEncode(textFromUser);
TestHyperLink.Text = encodedText;
TestHyperLink.ToolTip = encodedText; 
```

问题是超链接文本正确，但工具提示显示编码字符。 ![在此处输入图像描述](../Images/9c0780ff405eefad466acde0145e5b45.png)

如何使工具提示以与文本相同的方式出现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T14:52:48.853

您会看到这个问题，因为属性值被编码了两次。

1.  字符被`'`编码为`&#39;`;
2.  字符被`&`编码为`&amp;`.

最后将输出作为`title="This is test&amp;quot;s."`. 由于默认情况下已经对属性值进行了编码，因此您可以安全地将`Tooltip`属性设置为原始文本并仅对`Text`属性的文本进行编码。

**注意：**在这种情况下，默认执行属性编码，但`HtmlEncode`在 .NET 4.0 之前的版本中没有对`'`字符进行编码。请参阅[HtmlEncode 和 UrlEncode 现在对单引号进行编码](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770143)。

**更新**：我做了一些谷歌搜索，发现了这个有趣的参考（[which ASP.NET Controls Automatically Encodes？](http://blogs.msdn.com/b/sfaust/archive/2008/09/02/which-asp-net-controls-automatically-encodes.aspx)），它可能已经过时了，但至少对于这种特定情况，记录的行为是你得到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T14:36:04.080

如前所述，ASP.NET 控件的 ToolTip 属性将在输出/呈现时自动编码值。

这意味着将工具提示设置为纯文本是*安全的，因为页面将在呈现时清理文本。*

```
Label1.ToolTip = "Some encoded text < Tag >" 
```

将 HTML 输出呈现为：

```
<span title="Some encoded text &lt; Tag >"></span> 
```

* * *

如果您需要使用已经编码的文本，您可以设置 title 属性：

```
Label1.Attributes("title") = "Some encoded text &lt; Tag &gt;" 
```

将 HTML 输出呈现为：

```
<span title="Some encoded text &lt; Tag &gt;"></span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:37:35.453

看起来工具提示不需要像文本那样编码。

尝试直接使用`textFromUser`而不是设置工具提示`encodedText`。

# ruby - 在 Capybara 中将定位器转换为 xpath

> ID：11614635
> 
> 赞同：0
> 
> 时间：2012-07-23T14:32:22.660
> 
> 标签：ruby, cucumber, capybara

我正在使用 Capybara 并且我正在尝试查找页面上可能存在或不存在的一些 xpath。我希望能够使用我自己创建的选择器 (:tab_is_selected)，这样我就可以搜索如下 xpath：

page.should have_xpath(:tab_is_selected, selectable) 其中 selectable 是某个选项卡的名称。

如果我使用 find，它就会失败，因为 xpath 并不总是存在。

有谁知道 Capybara 中是否有一些图书馆可以让我这样做？否则我将不得不编写自己的模块。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:05:25.197

我一直在使用：

```
page.has_selector?(:xpath, selectable).should == false 
```

和

```
page.has_css?(selectable).should == true 
```

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers)

# sql-server - 我可以删除基于多列的数据库重复项吗？

> ID：11614637
> 
> 赞同：12
> 
> 时间：2012-07-23T14:32:24.080
> 
> 标签：sql-server, database

不久前我[问了这个问题，](https://stackoverflow.com/questions/4952250/how-to-delete-duplicates-from-a-database-table-based-on-a-certain-field)以删除基于列的重复记录。答案很有效：

```
delete from tbl
where id NOT in
(
select  min(id)
from tbl
group by sourceid
) 
```

我现在有一个类似的情况，但是重复记录的定义是基于多列的。如何更改上述 SQL 以识别重复记录，其中唯一记录定义为从 Col1 + Col2 + Col3 连接。我会做这样的事情吗？

```
delete from tbl
where id NOT in
(
select  min(id)
from tbl
group by col1, col2, col3
) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-23T14:46:06.047

这显示了您要保留的行：

```
;WITH x AS 
(
  SELECT col1, col2, col3, rn = ROW_NUMBER() OVER 
      (PARTITION BY col1, col2, col3 ORDER BY id)
  FROM dbo.tbl
)
SELECT col1, col2, col3 FROM x WHERE rn = 1; 
```

这显示了您要删除的行：

```
;WITH x AS 
(
  SELECT col1, col2, col3, rn = ROW_NUMBER() OVER 
      (PARTITION BY col1, col2, col3 ORDER BY id)
  FROM dbo.tbl
)
SELECT col1, col2, col3 FROM x WHERE rn > 1; 
```

一旦您对上述两组正确感到满意，以下内容将实际删除它们：

```
;WITH x AS 
(
  SELECT col1, col2, col3, rn = ROW_NUMBER() OVER 
      (PARTITION BY col1, col2, col3 ORDER BY id)
  FROM dbo.tbl
)
DELETE x WHERE rn > 1; 
```

请注意，在所有三个查询中，前 6 行是相同的，只有 CTE 之后的后续查询发生了变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T08:40:24.443

试试这个。我创建了一个包含三列的表**tblA 。**

```
CREATE TABLE tblA
(
id int IDENTITY(1, 1),
colA int, 
colB int, 
colC int
) 
```

并添加了一些重复值。

```
INSERT INTO tblA VALUES (1, 2, 3)
INSERT INTO tblA VALUES (1, 2, 3)
INSERT INTO tblA VALUES (4, 5, 6)
INSERT INTO tblA VALUES (7, 8, 9)
INSERT INTO tblA VALUES (7, 8, 9) 
```

如果您在下面的语句中将选择替换为删除，您的多列删除将起作用。

```
SELECT MIN(Id) as id
FROM
(
SELECT COUNT(*) as aantal, a.colA, a.colB, a.colC
FROM tblA       a
INNER JOIN tblA b   ON b.ColA = a.ColA
                    AND b.ColB = a.ColB
                    AND b.ColC = a.ColC
GROUP BY a.id, a.colA, a.colB, a.colC
HAVING COUNT(*) > 1
) c
INNER JOIN tblA d ON d.ColA = c.ColA
                    AND d.ColB = c.ColB
                    AND d.ColC = c.ColC
GROUP BY d.colA, d.colB, d.colC 
```

# android - 当应用程序处于停止状态时接收 Android GCM 通知

> ID：11614638
> 
> 赞同：6
> 
> 时间：2012-07-23T14:32:23.890
> 
> 标签：android, android-intent, android-c2dm, google-cloud-messaging

在我们使用 GCM 的应用程序之一上，我们一直收到报告称，当应用程序被杀死时，应用程序停止接收通知。再次启动应用程序时，通知会正常显示。

经过调查，我们发现这是由于Android 3.1上的这个变化：

> 请注意，系统将 FLAG_EXCLUDE_STOPPED_PACKAGES 添加到所有广播意图。这样做是为了防止来自后台服务的广播无意或不必要地启动已停止应用程序的组件。后台服务或应用程序可以通过将 FLAG_INCLUDE_STOPPED_PACKAGES 标志添加到应该允许激活停止的应用程序的广播意图来覆盖此行为。（[Android 3.1 变化](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)）

当收到通知时，我检查了 GCM 触发的意图，我注意到确实设置了 FLAG_EXCLUDE_STOPPED_PACKAGES。

这意味着所有在 Android 3.1+ 上运行我们的应用程序的用户在他们终止他们的应用程序后将停止接收通知，直到他们自己重新启动它。（Android 3.1 之前的版本运行良好）。

由于意图是由 GCM 框架本身触发的，因此我们无法更改在其上设置的标志，因此我们正在寻找另一种解决方法。

所有的想法都受到赞赏。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-09-02T15:22:36.947

您应该从 menifist 文件中注册 gcm 广播接收器，这样即使应用程序关闭，接收器也会收到通知。

# sql - SQL Server - 搜索不适用于方括号

> ID：11614640
> 
> 赞同：1
> 
> 时间：2012-07-23T14:32:34.740
> 
> 标签：sql, sql-server

我有一个表`tblEmpl`，其中有一列`employeename`。在该员工姓名列中，我有一个值为 的行，`John [Smith]`因此我有一个查询来搜索该行，但它没有选择任何行。

```
select * from tblEmpl 
where EmployeeName like '%John [Smith]%' 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:40:25.157

```
WHERE EmployeeName LIKE '%John \[Smith\]%' ESCAPE '\'; 
```

或者

```
WHERE EmployeeName LIKE '%John [[]Smith]%'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:35:46.433

尝试这个 ：

```
select * from tblEmpl where EmployeeName like '%John [[]Smith]%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:41:46.450

尝试这个

```
select * from tblEmpl where EmployeeName like '%John [[Smith]%' 
```

只需替换`[`为`[[`.

# javascript - event.preventDefault() 不工作（jQuery live）

> ID：11614645
> 
> 赞同：1
> 
> 时间：2012-07-23T14:32:50.117
> 
> 标签：javascript, jquery, javascript-events

编辑：

**目标是在单击链接时不让屏幕移动到页面顶部。我只想让它隐藏简短的描述并显示完整的描述。**

```
jQuery("#more_info a").live('click', function(event)
{
    event.preventDefault();
    jQuery('#food_desc').hide();
    jQuery('#food_desc_full').show();
}); 
```

上面的代码除了阻止默认事件（转到页面顶部）发生外，其他代码都有效。是因为 live() 事件吗？

编辑：

我什至试过这个：

```
if (data.body_summary)
{
    jQuery("#food_desc").append('<p id="more_info"><a href="#">MORE &raquo;</a></p>');
    jQuery("#more_info a").click(function(event)
    {
        event.preventDefault();
        jQuery('#food_desc').hide();
        jQuery('#food_desc_full').show();
        return false;
    });

} 
```

仍然进入页面顶部...

我也试过这个：

```
jQuery("body").delegate("#more_info a", "click", function(event) 
{
    event.stopPropagation();
    event.preventDefault();
    jQuery('#food_desc').hide();
    jQuery('#food_desc_full').show();
    return false;
}); 
```

它会显示/隐藏长/短描述，但不会阻止页面进入顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:13:00.447

你我需要在标签的 onclick 事件中返回 false。查看这个 SO 问题[event.preventDefault() 与 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:48:19.223

这不是因为`#`在`href`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T18:36:54.353

你需要`return false;`为生活做委托，你`e.stopPropagation();`没用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:45:36.127

从[文档](http://api.jquery.com/live/)：

> 调用`event.stopPropagation()`事件处理程序在停止附加在文档下方的事件处理程序方面是无效的；该事件已经传播到文档。

您应该[`.on()`](http://api.jquery.com/on/)改用，或者[`.delegate()`](http://api.jquery.com/delegate/)如果您还没有使用 1.7+。

# jquery - 比较运算符在ie7 jquery中不起作用

> ID：11614648
> 
> 赞同：-1
> 
> 时间：2012-07-23T14:32:56.837
> 
> 标签：jquery, internet-explorer-7

我在 ie7 中遇到了这个 JQuery 的问题，它在 chrome、firefox 和 ie8/9 中完美运行。我搜索了互联网无济于事。它只是不想更改 src 属性，这让我相信它在 if 测试中失败了。

```
var active = '/wp-content/uploads/2012/07/active.png';
var inactive = '/wp-content/uploads/2012/07/inactive.png';
if ($(this).attr('src') == inactive) {
    $(this).attr('src', active);
    $('.navbutton').not(this).attr('src', inactive);
} 
```

下面的行在 ie7 中工作，在 if 测试之外，所以我不确定问题是什么。有谁知道发生了什么？

```
$('#navbutton0').attr('src', active); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:41:24.457

尝试`$(this).attr('src').indexOf(inactive) >= 0`改为使用 if 测试条件。我想我注意到 IE7 有时会在 src 中添加额外的内容，例如完整路径。

# javascript - 键码在 chrome 中不起作用

> ID：11614649
> 
> 赞同：3
> 
> 时间：2012-07-23T14:32:57.397
> 
> 标签：javascript

当用户按下“enter”或“tab”键时，我正在尝试执行一些 js 代码。当我警告键码然后显示正确时，但是当按下“输入或制表符”键时没有显示任何响应。我尝试了以下代码。

```
<input id="to" onkeypress="checkemail(event);">

function checkemail(evt)
{
    var keycode =  evt.keyCode? evt.keyCode : evt.charCode;
    //alert(keycode);
    if(keycode=='13'|| keycode=='9')
    {
          //MyCode
        }

} 
```

此代码在 FireFox 中正常运行，但在 Google Chrome 中未显示任何结果。如果有，请告诉我任何解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:45:00.240

```
<html>

<body>

<input type = "text" id = "to" onkeydown="check(event)">

<script type = text/javascript>

function check(evt)
{
var keycode = evt.keyCode;
alert(keycode);
}

</script>

</body>

</html> 
```

它适用于铬:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:10:03.867

```
function checkemail(evt)
{
    var evt=evt||window.event;
    alert(evt.keyCode);
    if(evt.keyCode==13||evt.keyCode==9)
    {
        //your code
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:39:36.467

我推荐使用 jquery 的 keydown。它将为您处理这样的跨浏览器问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-10-19T08:13:23.913

它适用于 chrome 您需要键入 event.keycode/event.key 而不是 evt.keycode/evt.keycode.also 按键不适用于您正在使用的这些键

# ruby-on-rails - rails capybara - 如何检测js点击li（不是链接或按钮）

> ID：11614656
> 
> 赞同：4
> 
> 时间：2012-07-23T14:33:25.103
> 
> 标签：ruby-on-rails, ruby, testing, rspec, capybara

我有一个 js 提交按钮，它是一个 li 中的输入元素。所以它不是一个链接或一个按钮，大概这就是为什么`click_on`它不能正常工作 - 我明白了

```
Failure/Error: click_on 'user_submit_action'  
Capybara::ElementNotFound:
   no link or button 'user_submit_action' found 
```

代码...

```
</fieldset>
      <fieldset class="actions"><ol>
       <li class="action input_action" id="user_submit_action"><input class="a1" name="commit" type="submit" value="Create User" /></li>
</ol></fieldset></form>  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T14:37:46.067

像这样 ？

```
find("#user_submit_action").find("input").click 
```

您可以查看文档：[http](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders) ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders 。

# c# - ObjectListView 中的可重新排序项目

> ID：11614658
> 
> 赞同：2
> 
> 时间：2012-07-23T14:33:30.517
> 
> 标签：c#, drag-and-drop, objectlistview

我正在尝试对 ObjectListView 实现重新排序的拖放功能。考虑以下类：

```
public class MyClass
{
    public string Name { get; set; }
    public MyClass(string name)
    {
        Name = name;
    }
} 
```

我得到了重新排序工作（但是它非常非常难看），但我似乎无法找出我应该如何重新排序我`List<MyClass>`的 OLV 显示的内容？我尝试在 OLV 选定索引的位置删除 MyClass 对象，并在新位置插入，但这不起作用。

如果你需要它，这里是我用来让视图拖放工作的代码：

```
 private void objectListView1_ItemDrag(object sender, ItemDragEventArgs e)
    {
        DoDragDrop(((OLVListItem)e.Item).RowObject, DragDropEffects.Move);
    }

    private void objectListView1_DragEnter(object sender, DragEventArgs e)
    {
        e.Effect = e.Data.GetDataPresent("Cheeseburger.MyClass") ? DragDropEffects.Move : DragDropEffects.None;
    }

    private void objectListView1_DragOver(object sender, DragEventArgs e)
    {
        e.Effect = DragDropEffects.Move;
        var olv = (sender as ObjectListView);
        if(e.Data.GetDataPresent("Cheeseburger.MyClass"))
        {
            var pt = olv.PointToClient(new Point(e.X, e.Y));

            var index = olv.InsertionMark.NearestIndex(pt);
            // Debugging
            Text = index.ToString();
            var node = olv.GetItem(index);

            if (node != null && index != -1)
            {
                node.EnsureVisible();
            }
        }
    }

    private void objectListView1_DragDrop(object sender, DragEventArgs e)
    {
        e.Effect = DragDropEffects.Move;
        var olv = (sender as ObjectListView);
        if (e.Data.GetDataPresent("Cheeseburger.MyClass"))
        {
            var draggedObject = e.Data.GetData("Cheeseburger.MyClass") as MyClass;
            var pt = olv.PointToClient(new Point(e.X, e.Y));

            var index = olv.InsertionMark.NearestIndex(pt);
            var node = olv.GetItem(index);

            if (node != null && index != -1)
            {
                var models = new List<MyClass>() { draggedObject };
                olv.MoveObjects(index + 1, models);
            }
        }
    } 
```

如果我的问题缺少任何信息，请告诉我 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:55:15.693

再一次，当问题被提出时，答案是显而易见的！

问题是这一行：

```
olv.MoveObjects(index + 1, models); 
```

正如我所说，我尝试在对象列表上使用插入和删除，但这没有用 - 那是因为我忘记`+ 1`了`Insert`方法中的索引（只有当索引不为 0 时，否则在第一个删除时它会搞砸列表中的项目）！

这是该部分的修改代码：

```
 var selIndex = olv.SelectedIndex;
                var models = new List<MyClass>() { draggedObject };
                if (index != 0) index++;
                olv.MoveObjects(index, models);
                MyClasses.Insert(index,draggedObject);
                MyClasses.RemoveAt(selIndex); 
```

# python - 迭代器对象、PyCapsules 和内存性能

> ID：11614667
> 
> 赞同：3
> 
> 时间：2012-07-23T14:33:52.743
> 
> 标签：python, memory-leaks, pyqt, python-2.7

我正在开发一个 PyQt4 应用程序，我几乎完成了，除了似乎存在内存泄漏。整个东西的代码相当长，所以我不会在这里发布所有内容。我一直在使用一个名为 Python Memory Validator 的工具来跟踪我的应用程序的内存分配。我注意到在程序初始化后实例数量继续增加的类是迭代器，特别`dictionary-keyiterator`是 、`listiterator`和`tupleiterator`. 除了这些之外，实例数量继续增加的唯一其他类是`PyCapsule`和`method-wrapper`。

我调查了分配迭代器的位置，似乎每次使用该`zip()`函数时至少实例化了 tupleiterators 并且从未删除过。这是正常行为还是这些迭代器可能是内存泄漏的原因？如果是这样，是否有解决方法？

我还调查了 PyCapsules 和方法包装器在哪里被实例化，它们似乎都是从使用以下代码的方法创建的，并且从未被删除。

```
def importXml(self, fh):
    error = None
    try:
        handler = SaxSensorDataHandler(self)
        parser = QXmlSimpleReader()
        parser.setContentHandler(handler)
        parser.setErrorHandler(handler)
        input_ = QXmlInputSource(fh)
        self.new = True
        if not parser.parse(input_):
            if handler.errorLine == 4:
                self.new = False
            else:
                raise ValueError
    except (IOError, OSError, ValueError), e:
        error = "Failed to import file: %s" % e
    finally:
        if fh is not None:
            fh.close()
        if error is not None:
            return False, error
        if len(self.__sensors) == 0:
            return False, "Discovered no sensors connected to %s. Please check sensor connections and try again." % fh.url().host()
        self.__dirty = True
        return True, 'Discovered %d sensors connected to %s. Please press "Start" to begin taking measurements.' %(len(self.__sensors), fh.url().host()) 
```

这主要包括实例化和使用`SaxSensorDataHandler`作为重新实现的股票 PyQt 类`QXmlDefaultHandler`，并且唯一重新实现的方法是在读取 XML 标记时由 XML 处理程序调用的方法。我对这些方法所做的只是将检索到的信息分配给变量并调用另一个方法来更新容器中的相应变量，因此这不应该导致内存泄漏。那么内存泄漏是否可能是由 PyQt4 的 Xml 处理程序类的任何已知问题引起的？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:52:15.803

尝试使用[gc 模块](http://docs.python.org/library/gc.html)。要调试泄漏的程序调用`gc.set_debug(gc.DEBUG_LEAK)`，您将在`sys.stderr`.

# vba - Microsoft Word 文本字段引用

> ID：11614669
> 
> 赞同：0
> 
> 时间：2012-07-23T14:33:57.123
> 
> 标签：vba, ms-word

我想使用 Microsoft Word 2010 引用文本字段。我正在编写条款和条件表格，所以我的第一页是这样的：

```
company name: [textfield]
contact person: xxx
phone: xxx 
```

所以我想使用我在下一页更新的第一页上输入的详细信息，例如，第二页包含：

```
I [company_name] accept terms and conditions etc...

[contact_person]
[phone] 
```

例如，这里是文本

所以我想输入公司名称1次，所以它应该出现在下一个文本表单中。

所以最终的结果应该是这样的：

```
Company: test

I test accept terms and conditions above. 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:47:27.330

尝试以下操作：

*   将书签添加到您保存的 Word 模板中；
*   应用以下代码：

```
    将 sSave_Path 变暗为字符串  
    将 sSave_File 调暗为字符串  
    将 sFile_Template 调暗为字符串  

    将 oWord_App 调暗为 Word.Application  
    将 oWord_Doc 调暗为 Word.Document

    sFile_Template = "" '定义模板文件  
    sSave_Path = "" '定义保存路径  
    sSave_File = "" '定义保存文件名  

    设置 oWord_App = New Word.Application  
    设置 oWord_Doc = oWord_App.Documents.Add(sFile_Template)  
    oWord_App.Visible = True
    oWord_App.Activate

    oWord_Doc.Bookmarks("TEST").Range.Text = "TEST"
    oWord_Doc.SaveAs sSave_Path & "\" & sSave_File & ".doc"
    oWord_Doc.关闭
    oWord_App.Quit

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:57:07.917

如果您提供更多信息或您尝试过的代码，则可以给出更好的答案。有几种方法可以解决这个问题，但其中一种很简单：插入|QuickParts|Field|DocProperty|Company。这会将 Word 保存的文档属性的值插入到文件|信息|属性（显示所有属性）中。

# c - select() 似乎是段错误/杀死

> ID：11614670
> 
> 赞同：1
> 
> 时间：2012-07-23T14:34:16.547
> 
> 标签：c, select, embedded, segmentation-fault

我正在尝试调试使用 select() 来实现通信超时的嵌入式应用程序。它是使用 pthreads 的多线程。

我遇到的问题是应用程序似乎在 select() 调用上崩溃了，出现了分段错误或“Killed”。我尝试在呼叫周围放置一个互斥锁，但无济于事。

什么可能导致 select() 使应用程序崩溃？还是我的方向完全错误？

对 select() 的调用如下所示：

```
fd_set rfds;
struct timeval tv;
int retval, timeout, timeout_usec = 0;

FD_ZERO(&rfds);
FD_SET(fd_port, &rfds);

if (use_timeout) {
    timeout = settings_get_int("rs485_timeout", "3");
} else {
    timeout = 0;
    timeout_usec = 100000;
    }

// timeout wait for reply 1000ms
tv.tv_sec = timeout;
tv.tv_usec = timeout_usec; //1000000;

retval = select((int)fd_port+1, &rfds, NULL, NULL, &tv); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:45:17.617

由于崩溃的时间和地点的随机性，我怀疑是多线程问题。我删除了所有多线程代码，问题似乎已经停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:39:56.097

如果您的程序实际上是空闲的，那么`select`如果崩溃实际上是由某个外部实体（如进程监视器）引起的，那么崩溃并不是特别罕见。软件看门狗，或臭名昭著的 Linux Out of Memory Killer (OOM Killer)。检查您的系统日志文件，看看您是否可以找到某些外部函数触发了终止操作的迹象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:57:23.607

select 有一个限制，它只能检查 sockfds 直到数字 1024。请注意，1024 是 sockfd 的最大值，而不是 sockfds 的数量。使用 poll 代替，它没有这样的限制

有关更详细的说明，请参阅 [http://www.moythreads.com/wordpress/2009/12/22/select-system-call-limitation/ 。](http://www.moythreads.com/wordpress/2009/12/22/select-system-call-limitation/)

# php - 使用 facebook auth 进行带有 php 后端的 flash 游戏

> ID：11614672
> 
> 赞同：0
> 
> 时间：2012-07-23T14:34:24.590
> 
> 标签：php, facebook, actionscript-3

我正在创建一个 Flash 游戏，我希望用户能够使用 Facebook 登录。到目前为止，我已经使用 facebook-actionscript API 成功创建了一个允许用户“登录”到我的 Flash 游戏的 .swf 文件。从这里，我可以访问他们的信息，例如他们的 Facebook ID 和姓名。

我从这里建议的方法（可能相当幼稚）是使用 Facebook ID 作为用户的唯一标识符。然后我会在调用 php 后端时包含这个 id。

例如，如果用户想要检索他们的项目列表。我会向 php 发送一个“获取项目”请求，其中包含他们的 Facebook id。在我的数据库中，我将存储每个用户的 Facebook ID，从而能够返回正确的项目。

我只是想知道这种事情是否有不同/更好的方法。如果我要继续我的计划，我想我需要某种形式的加密。有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:53:16.633

可以继续使用`User ID`，但 Facebook 宁愿将用户 ID 转换为 Facebook 用户无法直接识别的内容。您必须使用函数将用户 ID 映射到您的内部用户 ID。

简单的功能：`md5( $user_id )`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:56:11.963

*作为对您评论的回答*

数据包嗅探和发送假数据包总是可以在游戏中完成，无论它是带有 facebook 的网络服务器后端，没有 facebook 的套接字服务器等。我不是专家，但我认为游戏通常会以某种方式找出该请求是否真实。服务器端作弊检测基本上。

作为额外的保护，您还可以将 id 绑定到您使用密钥加密的每个请求，并且当服务器收到它时检查它是否是新的。这样黑客就无法重新发送假数据包。但这当然可以逆向工程。

可能有关于这方面的书，我只是在猜测你能做什么。

# c++ - 回调中的全局标志

> ID：11614673
> 
> 赞同：0
> 
> 时间：2012-07-23T14:34:27.293
> 
> 标签：c++, c

我有一个与系统中的外部硬件通信的代码。根据外部硬件发送的事件，我的 C 源代码中的状态将会改变。在系统启动过程中发生了一些握手，需要根据握手将一些信息发送到其他模块。我在回调中设置了一些全局变量，但观察到外部硬件两次发送一些事件，这使得一些回调被调用两次。这会破坏全局变量中的信息。

```
 int global_value = 0;
 int eventcb()
 {
    if (some condition)
          global_value = 1;
    else if (some condition)
          global_value = 2;
    else
          global_value = 0;
 } 
```

第一次调用上述代码时 global_value = 1 让我们说；下次调用回调时，条件将不存在，因此 global_value 将变为 0。我不想使用另一个全局变量来跟踪调用此回调的次数，甚至是基于文件的方法（创建文件系统中的文件）。有什么最佳方法来处理这种情况吗？我无法控制外部硬件使其仅发送一次事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:40:08.863

你可以实现一个队列。对于每个回调，可以创建一个回调数据，该数据具有 global_value 和一些其他参数（例如，回调 id 等以标识回调）。global_value 的当前使用者可以从队列中挑选数据并使用它并从队列中删除该项目。我假设您有某种消费者正在从 global_value 对象中读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:44:07.547

```
int global_value = -1;
 int eventcb()
 {
    if (some condition && (global_value != -1) )
          global_value = 1;
    else if (some condition && (global_value != -1) )
          global_value = 2;
    else
          global_value = 0;
 } 
```

**基本上，仅**当全局处于其初始状态时才进行状态转换更改。

当然，您可以在`if`语句中添加更多条件，以确保正确覆盖所有状态转换。

# wix - WIX：如何设置在安装 UI 序列中 FindRelatedProducts 之后找到的版本

> ID：11614675
> 
> 赞同：0
> 
> 时间：2012-07-23T14:34:30.097
> 
> 标签：wix, upgrade

我正在创建一个具有升级功能的 WIX 安装程序。这是我们的目标：我们希望安装程序通过在安装程序 UI 中输出找到的产品的版本号来通知用户它找到了相关产品。只有在用户确认此升级后，安装才会继续。但是，我不知道如何设置要在对话框 UI 中显示的属性（或变量）。目前我已经添加了一个确认对话框，其条件是“未安装和升级”。我只需要将版本号字符串放入此对话框。谁能告诉我该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:16:07.683

您在这里有两个选择。您可以使用[FileSearch](http://wix.sourceforge.net/manual-wix3/check_the_version_number.htm)元素获取存储在应用程序主二进制文件中的版本，也可以使用安装时的[记住属性模式](http://robmensching.com/blog/posts/2010/5/2/The-WiX-toolsets-Remember-Property-pattern)将版本存储在注册表中，然后在升级时重新读取。

# tridion - Tridion 用户界面 2012 - 401 未经授权

> ID：11614676
> 
> 赞同：10
> 
> 时间：2012-07-23T14:34:32.023
> 
> 标签：tridion, tridion-2011

我正在设置 Tridion 用户界面 2012 并遇到了问题。

我很确定我一定错过了安装步骤，但不知道是什么。

我在一个测试网站出版物中创建了一个非常简单的页面模板，上面只有一个组件演示。

当我查看已发布页面的源代码时，我可以看到我期望的 JSON 和 JS，例如

```
<!-- Start Component Presentation: {"ComponentID" : "tcm:24-5001", "ComponentModified" : "2011-12-07T09:34:48", "ComponentTemplateID" : "tcm:24-294-32", "ComponentTemplateModified" : "2012-07-23T06:11:14", "IsRepositoryPublished" : false } -->
<h1><span><!-- Start Component Field: {"XPath":"tcm:Content/custom:Content/custom:title[1]"} -->Artwork</span></h1> 
```

并且还在结束`</body>`标记之前的页面下方：

```
<!-- Page Settings: {"PageID":"tcm:24-9412-64","PageModified":"2012-07-23T07:16:30","PageTemplateID":"tcm:24-9411-128","PageTemplateModified":"2012-07-23T07:13:12"} -->
<script type="text/javascript" language="javascript" defer="defer" src="http://<cme-hostname>/WebUI/Editors/SiteEdit/Views/Bootstrap/Bootstrap.aspx?mode=js" id="tridion.siteedit"></script> 
```

`<cme-hostname>`我的 CMS 地址在哪里。

使用 Chrome 开发人员工具，我可以看到何时请求以下 url 我收到 401 未经授权的错误。

```
http://<cme-hostname>/WebUI/Editors/SiteEdit/Views/Bootstrap/Bootstrap.aspx?mode=js 
```

有谁知道我可能做错了什么？（Tridion 2011 SP1-1）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T15:47:30.757

401 未经授权的消息可能表示 IIS 中的身份验证设置不正确。您应该将“查看”文件夹 (WebUI\Editors\SiteEdit\Views) 从匿名更改为 Windows 身份验证，如下图示例所示。 ![UI 2012 身份验证设置](../Images/42801ee2e06dbc598667b634621af49a.png)

# android - 无法从 SQLite（Android）中的选择查询游标中提取表

> ID：11614684
> 
> 赞同：0
> 
> 时间：2012-07-23T14:35:06.470
> 
> 标签：android, sqlite

我有一个表，我必须从中获取具有 KEY_DATE = dat 的行。

然后我将这些行保存为对象并返回这些对象的列表。

问题是，如果我的表中有 4 个条目，那么我不是得到所有 4 行，而是得到最后一行 4 次。

这是我的代码...

```
while(!l.isEmpty())
    {
        hd = l.get(0);
        l.remove(0);
        map = new HashMap<String, String>();
        Log.w("myapp",hd._name+hd._price+hd._qty);

        map.put("item", hd._name);
        map.put("price", Double.toString(hd._price));
        map.put("qty", Integer.toString(hd._qty));
        map.put("total", Double.toString(hd._price*hd._qty));
        mylist.add(n++,map);
    }

    SimpleAdapter mSchedule = new SimpleAdapter(getActivity(), mylist, R.layout.details_item_list, new String[] {"item", "price", "qty" , "total"}, new int[] {R.id.col1, R.id.col2, R.id.col3, R.id.col4});
    list.setAdapter(mSchedule); 
```

这些项目正在检索，但我的列表视图显示的最后一项仅与我的 sql 表中的项目数相乘。我是否在循环中正确使用了 map.put() 和 add() 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:40:20.307

那是因为您只有一个 的实例`HistoryDetails`，您在 List 中添加了 4 次，并在每次迭代时对其进行修改。您需要放入`hd = new HistoryDetails();`循环中，例如

```
hd = new HistoryDetails();

hd._qty = Integer.parseInt(cursor.getString(3));
hd._name = c.getString(1);
hd._price = Double.parseDouble(c.getString(2));

l.add(hd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:40:59.230

```
 .....
    Cursor cursor = .......   
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {

        hd = new HistoryDetails();  // IMPORTANT !!!!

        hd._qty = Integer.parseInt(cursor.getString(3));
        hd._name = cursor.getString(1);
        hd._price = Double.parseDouble(cursor.getString(2));

        l.add(hd);

        cursor.moveToNext();
    }
    cursor.close();
    ....... 
```

# c# - 'CreateUserWizard1_CreatedUser' 没有重载匹配委托 'System.EventHandler'

> ID：11614685
> 
> 赞同：0
> 
> 时间：2012-07-23T14:35:10.850
> 
> 标签：c#, asp.net, .net, compiler-errors

源错误：

```
Line 62:         <asp:CreateUserWizard ID="CreateUserWizard1"  // error appeared here 
Line 63:             runat="server" 
Line 64:             OnCreatedUser="CreateUserWizard1_CreatedUser" 
```

我有一个 createuserwizard。如果用户在步骤 2 中输入错误，则该事件将被取消。我使用 e.cancel = true 来做到这一点。但它导致了这个错误。

> 'CreateUserWizard1_CreatedUser' 没有重载匹配委托 'System.EventHandler'

后面的代码：

```
protected void CreateUserWizard1_CreatedUser(object sender, System.Web.UI.WebControls.LoginCancelEventArgs e)
{    
   MSCaptcha.CaptchaControl Captcha1 = (CreateUserWizardStep1.ContentTemplateContainer.FindControl("Captcha1") as MSCaptcha.CaptchaControl);

   TextBox txtCaptcha = (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("txtCaptcha");
   Label Captchalbl = (Label)CreateUserWizardStep1.ContentTemplateContainer.FindControl("Captchalbl");

   Response.Write(txtCaptcha.Text); 

   Captcha1.ValidateCaptcha(txtCaptcha.Text.Trim()); 

   if (!Captcha1.UserValidated)
   {               
       Captchalbl.Text = "InValid";
       Response.Write(Captchalbl.Text); 
       // Captchalbl.ForeColor = System.Drawing.Color.Red;
       e.Cancel = true;
   } 
   else
   {
       Captchalbl.Text = "Valid";
       Response.Write(Captchalbl.Text); 
       TextBox UserNameTextBox = (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("UserName");
       SqlDataSource dataSource = (SqlDataSource)CreateUserWizardStep1.ContentTemplateContainer.FindControl("InsertExtraInfo");
       MembershipUser user = Membership.GetUser(UserNameTextBox.Text);  
       dataSource.InsertParameters.Add("UserId", user.ProviderUserKey.ToString());  
       dataSource.Insert();                   
   }
} 
```

这是代码：

```
<asp:CreateUserWizard ID="CreateUserWizard1"   //here is line 62 
        runat="server" 
        OnCreatedUser="CreateUserWizard1_CreatedUser"
        InvalidPasswordErrorMessage="Password length must be more than 8 characters." 
        ContinueDestinationPageUrl="~/Home.aspx" 
        DisplayCancelButton = "True" 
        CancelDestinationPageUrl="~/Home.aspx" 
        DisableCreatedUser="True" 
        OnSendingMail="CreateUserWizard1_SendingMail"
> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:40:24.440

您需要使用 OnCreatingUser 事件。

```
 <asp:CreateUserWizard ID="CreateUserWizard1"   //here is line 62 
        runat="server" 
        OnCreatingUser="CreateUserWizard1_CreatedUser"
... 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.oncreatinguser](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.createuserwizard.oncreatinguser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:44:48.273

标记：

```
OnCreatingUser="CreateUserWizard1_CreatingUser"
OnCreatedUser="CreateUserWizard1_CreatedUser" 
```

代码隐藏：

```
protected void CreateUserWizard1_CreatingUser(object sender, LoginCancelEventArgs e)
{
    // Occurs before the membership provider is called to create the new Web site user account
}

protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
{
    // Occurs after the membership provider has created the new Web site user account
} 
```

# c - C中语句的最大长度

> ID：11614687
> 
> 赞同：5
> 
> 时间：2012-07-23T14:35:16.413
> 
> 标签：c, gcc

C 中定义的语句是否有最大长度？

编译器是 gcc

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T14:40:47.500

该标准规定了最低翻译限制：

> [c11](/questions/tagged/c11 "显示标记为“c11”的问题")
> 
> ### 5.2.4.1 翻译限制
> 
> 1 实现应能够翻译和执行至少一个程序，该程序至少包含以下每个限制的一个实例：
> 
> [...]
> 
> — 逻辑源行中的 4095 个字符

然而，该标准建议“*实现应尽可能避免施加固定的翻译限制*”。

逻辑源行是反斜杠换行符拼接的结果（5.1.1.2:1.2），因此这并不直接涵盖语句中字符数的最小限制。

但是，因为另一个翻译限制要求是：

> — 字符串文字中的 4095 个字符（连接后）

并且由于字符串文字只能出现在语句中，因此实现必须接受至少一个 4095 字符的语句。

忽略文字，我们还看到：

> — 一个函数调用中有 127 个参数

并且作为函数调用，每个参数必须包含至少 2 个字符，加上调用 ( `f(0,0,...);`) 的 4 个字符，我们得出的最小行长度限制为 260。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T14:46:56.940

C 标准规定了编译器必须接受的语言复杂性的各种下限，但对语句本身的长度没有限制。

> ### §5.2.4.1 翻译限制
> 
> 实现应能够翻译和执行至少一个程序，该程序包含以下每个限制的至少一个实例：^(18）)
> 
> *   127个嵌套级别的块
> *   63 个嵌套级别的条件包含
> *   12 个指针、数组和函数声明符（任意组合），用于修改声明中的算术、结构、联合或 void 类型
> *   一个完整的声明符内有 63 个嵌套级别的括号声明符
> *   完整表达式中的 63 个括号表达式嵌套级别
> *   内部标识符或宏名称中的 63 个有效初始字符（每个通用字符名称或扩展源字符都被视为单个字符）
> *   外部标识符中的 31 个有效初始字符（每个指定短标识符为 0000FFFF 或更少的通用字符名称被视为 6 个字符，每个指定短标识符为 00010000 或更大的通用字符名称被视为 10 个字符，每个扩展源字符被视为与相应的通用字符名称相同的字符数，如果有的话）^(19）)
> *   一个翻译单元中有 4095 个外部标识符
> *   在一个块中声明了 511 个具有块范围的标识符
> *   在一个预处理翻译单元中同时定义 4095 个宏标识符
> *   1 个函数定义中的 127 个参数
> *   一个函数调用中有 127 个参数
> *   一个宏定义127个参数
> *   一次宏调用中有 127 个参数
> *   逻辑源代码行中有 4095 个字符
> *   字符串文字中的 4095 个字符（连接后）
> *   对象中的 65535 字节（仅在托管环境中）
> *   #included 文件的 15 个嵌套级别
> *   switch 语句的 1023 个 case 标签（不包括任何嵌套 switch 语句的标签）
> *   1023 个成员在一个单一的结构或工会中
> *   单个枚举中有 1023 个枚举常量
> *   单个 struct-declaration-list 中的 63 级嵌套结构或联合定义
> 
> ^(18))实施应尽可能避免施加固定的翻译限制。
> 
> ^(19))见“未来语言方向”(6.11.3)。
> 
> ### §6.11.3 外部名称
> 
> 将外部名称的重要性限制为少于 255 个字符（将每个通用字符名称或扩展源字符视为单个字符）是一个过时的功能，它是对现有实现的让步。

正如你所看到的，脚注 18 会阻止施加这样的限制。

说了这么多，我不想看到一个侵犯限制的声明。它最好是机器生成的，而不是人工编写的。

# android - 哪种方法更适合在 android 应用程序中使用 Websocket：异步 i/o 或与线程同步 i/o？

> ID：11614695
> 
> 赞同：1
> 
> 时间：2012-07-23T14:35:33.080
> 
> 标签：android, websocket, asyncsocket

我正在编写一个 android 客户端，它每 20-30 秒推送一次数据，并且还异步接收来自服务器的更新。因为我还有其他 UI 组件，所以我不能阻塞主线程。

使用的优点和缺点是什么（性能、复杂性、可维护性、易于使用的 API 等）：

1.  将 i/o 与异步任务/线程同步，用于将数据推送到服务器并从服务器接收事件
2.  基于异步 nio lib 的 i/o

还建议是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:07:38.240

对于 Android 和 UI 应用程序，您不仅不应该阻塞 UI 线程，而且对于较新版本的 Android，您根本不允许在 UI 线程上进行任何联网。

因此，即使是基于 NIO 的 UI 线程网络通常也不是一种可行的方法。

对于 WebSocket，您可能需要查看：[https ://github.com/tavendo/AutobahnAndroid](https://github.com/tavendo/AutobahnAndroid)

这是 NIO，但在 2 个后台线程上供读写器使用。值得注意的是，它不会在 UI 线程上进行任何联网 .. 包括连接建立。

我们可能会在不久的将来重写它以在后台线程上执行老式 IO，因为：

a) NIO 在这种情况下不会买太多 b) 在 NIO 上实施 TLS 是一个 PITA

免责声明：我是 Autobahn 的作者，为 Tavendo 工作。

# android - 3d 光线拾取精度

> ID：11614698
> 
> 赞同：0
> 
> 时间：2012-07-23T14:35:43.660
> 
> 标签：android, opengl-es, glu, picking

我已经实现了 3d 光线拾取并且在准确性方面存在一些问题。在屏幕底部或中心进行选择时 - 一切正常，但在屏幕顶部的坐标似乎移动了一点。因此，当我在屏幕顶部附近选择对象时，我通常不会选择我正在点击的对象，而是选择较低的对象。

这是截图[http://img838.imageshack.us/img838/9192/device20120723171612.png](http://img838.imageshack.us/img838/9192/device20120723171612.png)

我认为这个问题可能出在矩阵中，所以我是这样定义它们的：

模型视图

```
GLU.gluLookAt(gl, 
        camera.position.x, camera.position.y, camera.position.z,
        camera.target.x,   camera.target.y,   camera.target.z,
        camera.upAxis.x,   camera.upAxis.y,   camera.upAxis.z); 
```

投影

```
horizontalCenter = 0f;
verticalCenter = 0f;
shortSideLength = 1.0f;
zNear = 1f;
zFar = 200.0f;
surfaceAspectRatio = (float) w / (float) h;
float n = shortSideLength / 2f;
gl.glFrustumf(horizontalCenter - surfaceAspectRatio*n, 
              horizontalCenter + surfaceAspectRatio*n, 
              verticalCenter - n, verticalCenter + n, zNear, zFar); 
```

我的选择代码：

```
public static Point3d pickSquare(int size, float step, float tapX, float tapY, float[] modelView, float[] projection)
{

    float[] near = new float[4];
    GLU.gluUnProject(tapX, raypickingViewport[3] - tapY, 0f, modelView, 0, projection, 0, raypickingViewport, 0, near, 0);
    if (near[3] != 0)
    {
        near[0] = near[0] / near[3];
        near[1] = near[1] / near[3];
        near[2] = near[2] / near[3];
    }
    Point3d near3 = new Point3d(near[0], near[1], near[2]);

    float[] far = new float[4];
    GLU.gluUnProject(tapX, raypickingViewport[3] - tapY, 1f, modelView, 0, projection, 0, raypickingViewport, 0, far, 0);
    if (far[3] != 0)
    {
        far[0] = far[0] / far[3];
        far[1] = far[1] / far[3];
        far[2] = far[2] / far[3];
    }
    Point3d far3 = new Point3d(far[0], far[1], far[2]);

    // here I'm searching for intersection with x0z plane using equation 
    // (x-x1)/(x2-x1) = (y-y1)/(y2-y1) = (z-z1)/(z2-z1)
    // My y is 0 so I can find x and y coords.

    float intersectY = (-near3.y) / (far3.y - near3.y);
    float pickX = intersectY * (far3.x - near3.x) + near3.x;
    float pickZ = intersectY * (far3.z - near3.z) + near3.z;
    return  new Point3d(pickX, 0f, pickZ);   
} 
```

感谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:19:24.170

问题出在android状态栏中。在 480x800 屏幕上，它的高度是 38 像素，所以我在选取方法中添加了这一行：

```
tapY-=38; 
```

现在一切都很好

# c# - 使用 ValueConverter 绑定到另一个窗口中的对象

> ID：11614701
> 
> 赞同：0
> 
> 时间：2012-07-23T14:36:00.767
> 
> 标签：c#, wpf, binding, visibility, ivalueconverter

我有一个主程序窗口，底部有一排快捷按钮。我试图`Visibility`通过一个单独的`Settings`窗口使用 来选择这些`CheckBoxes`，然后将该状态存储在`UserSettings`程序的 中，这样当它再次打开时，将记住以前的设置。我已经找到并使用 an`IValueConverter`来实现它，并且我知道它`Setting`被保存，因为它`CheckBox`本身保留了它的价值。

问题是点击`CheckBox`不影响`Visibility`按钮的。它在`Settings`窗口本身内工作，但我似乎无法弄清楚如何让它在不同的窗口之间工作。

我尝试同时实现`UpdateSourceTrigger`&`NotifyOnSourceUpdated`标志无济于事。任何人都可以看到问题吗？

**主窗口 XAML**

```
<WrapPanel.Resources>
            <main:BooleanToHiddenVisibility x:Key="boolToVis" />
</WrapPanel.Resources>
<ToggleButton Name="alwaysOnTop" Checked="alwaysOnTop_Checked"
    Style="{StaticResource ShortcutToggleStyle}" Unchecked="alwaysOnTop_Unchecked"
    Visibility="{Binding Source=main:Properties.Settings.Default, Path=pinShow, Converter={StaticResource boolToVis}, Mode=TwoWay}" >
        <Image SnapsToDevicePixels="True" Source="Images/pushpin.png"
             ToolTip="Always on Top" />
</ToggleButton> 
```

**设置窗口 XAML**

```
<CheckBox Name="pinDisable" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Center"
    IsChecked="{Binding Source={x:Static main:Properties.Settings.Default}, Path=pinShow, Mode=TwoWay}"
    Checked="pinDisable_Checked" Unchecked="pinDisable_Unchecked"/> 
```

**转换代码隐藏**

```
public class BooleanToHiddenVisibility : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        Visibility rv = Visibility.Visible;
        try
        {
            var x = bool.Parse(value.ToString());
            if (x)
            {
                rv = Visibility.Visible;
            }
            else
            {
                rv = Visibility.Collapsed;
            }
        }
        catch (Exception)
        {

        }
        return rv;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }
} 
```

# agsxmpp - agsxmpp 事件顺序

> ID：11614709
> 
> 赞同：0
> 
> 时间：2012-07-23T14:36:23.497
> 
> 标签：agsxmpp

agsXMPP 有问题。我想做的是以“User1”身份连接到openfire服务器（例如），检查我名册中的哪些用户在线并返回在线用户名集合。问题是，OnPresence 事件是最后一个事件（根据我的研究），它发生在每个在线用户身上。但是我怎么知道它什么时候完成了对所有在线用户的检查，所以我终于可以退回我的在线收藏了？有类似 OnPresenceEnd 事件吗？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:51:40.733

不，没有那样的东西。xmpp 服务器在其自己的节中发送每个存在。XMPP 协议中没有任何内容可以告诉您现在已收到所有初始存在。

XMPP 是一种异步协议。尽可能保持您的代码异步并在每个 OnPresence 事件之后更新状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:53:58.300

xcc.OnRosterItem += 新 agsXMPP.XmppClientConnection.RosterHandler(method_name1); xcc.OnRosterEnd += new ObjectHandler(method_name2); <---**这就是你需要的**

# github - 来自 github 的 git clone 得到错误的 repo

> ID：11614710
> 
> 赞同：0
> 
> 时间：2012-07-23T14:36:37.390
> 
> 标签：github, clone, git-clone

当我尝试从 github 克隆一个 repo 时，我得到了另一个我的 repos 内容。

我在 github 上有多个存储库。我刚刚分叉了一个朋友的项目，我试图将它克隆到我的本地机器上：

```
 git clone https://github.com/username/projectname.git 
```

在终端上看起来一切正常，但`projectname`目录的实际内容包含来自我另一个项目的文件。我想我有一个全局设置使该项目成为我的默认设置，但我不知道在哪里/如何更改它。

# eclipse - Netbeans 在 Web 服务开发方面是否优于 Eclipse？

> ID：11614715
> 
> 赞同：0
> 
> 时间：2012-07-23T14:36:52.970
> 
> 标签：eclipse, web-services, netbeans, axis2

我刚刚在 5 小时前开始使用 Web 服务。我有一些背景，但现在我正在研究它。我尝试了 Eclipse（使用 Axis 2）和 Netbeans。乍一看，Netbeans 在 Web 服务方面的使用似乎远没有那么复杂。当 Netbeans 没有这个时，我不明白为什么需要在 Eclipse 中生成存根和处理程序（一个简单的 Web 服务的 1000 行代码）？我想使用 Eclipse（因为我将它用于其他所有事情），但是当我看到 Netbeans 在开发 Web 服务方面的巨大差异时，它让我发疯了。

如果我使用 Axis 是不是我做错了什么？你知道其他一些框架可以让事情变得更简单吗？使用 netbeans，我遵循[了这个](http://netbeans.org/kb/docs/websvc/jax-ws.html)简单的教程，一切都很简单。请向我推荐一些框架、教程或任何对 Eclipse 更好的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:17:44.590

Axis 2 只是 Web 服务运行时，您也可以尝试 Apache CXF。谈到 Web 服务开发，Eclipse 是一个非常好的和复杂的工具，我在很多项目中都使用过它。Web 服务开发的另一个必备工具是 SoapUI。祝你好运！

# mysql - MySQL - [1045] SQLSTATE 拒绝用户访问

> ID：11614717
> 
> 赞同：0
> 
> 时间：2012-07-23T14:36:56.740
> 
> 标签：mysql, symfony, doctrine, localhost

看到很多类似的问题，但仍然无法找到线索。

我的新 Symfony2 项目使用这种配置

```
[parameters]
    database_driver   = pdo_mysql
    database_host     = localhost
    database_port     =
    database_name     = my_db
    database_user     = my_user
    database_password = my_password 
```

我能够连接命令行客户端

```
$ mysql -u my_user -p
Enter password:
mysql> 
```

但试图填充我的数据库

```
$ php app/console doctrine:database:create 
```

给我

> 无法为名为 my_db
> SQLSTATE [28000] [1045] 的连接创建数据库 'my_user'@'localhost' 的访问被拒绝（使用密码：是）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:41:43.090

my_password 包含字符`@`或`&`显然阻止我与 PDO 连接

# c# - C++ DLL 将 Mat 返回到 C#

> ID：11614718
> 
> 赞同：2
> 
> 时间：2012-07-23T14:37:02.817
> 
> 标签：c#, c++, opencv

我有一个用 C++ 构建的 DLL，并将返回 Mat 对象。该图片信息为 384*384*24 色。

C# 代码

```
Bitmap a = new Bitmap(384, 384, 3 * 384, PixelFormat.Format24bppRgb, test1());
pictureBox0.Image = a; 
```

C++ 代码

```
uchar*  DLL_EXPORT test1(void)
{
    Mat OriginalImg = imread("c:\\20100812133.jpg", 1 );

    return OriginalImg.data;
} 
```

代码没问题，但我想看灰色的图片。我会做一些图像处理（例如：Threshod），然后转换为颜色，然后返回 C# 并显示它！

C++ 代码

```
uchar*  DLL_EXPORT test0(void)
{
    Mat OriginalImg = imread("c:\\20100812133.jpg", 0 );
    threshold(OriginalImg,OriginalImg,0,255,THRESH_OTSU);
    cvtColor(OriginalImg,OriginalImg,CV_GRAY2BGR);
    return OriginalImg.data;
} 
```

c++代码失败，你能帮忙吗？

* * *

更新 数据[http://ppt.cc/h2SI](http://ppt.cc/h2SI)图片失败，我认为原因是内存。我将 c# 代码将第三个参数 3*384 修复为 2*384。C# 运行正常，但图片像这样中断[http://ppt.cc/IRfd](http://ppt.cc/IRfd)

-- 更新数据

```
Bitmap a = new Bitmap(384, 384, 1 * 384, PixelFormat.Format24bppRgb, test0());
Bitmap a = new Bitmap(384, 384, 2 * 384, PixelFormat.Format24bppRgb, test0());
Bitmap a = new Bitmap(384, 384, 3 * 384, PixelFormat.Format24bppRgb, test0());

Bitmap a = new Bitmap(384, 384, 2 * 384, PixelFormat.Format32bppRgb, test0());
Bitmap a = new Bitmap(384, 384, 3 * 384, PixelFormat.Format32bppRgb, test0());
Bitmap a = new Bitmap(384, 384, 4 * 384, PixelFormat.Format32bppRgb, test0()); 
```

我试了六次，跑步还可以，但是画面坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:36:02.180

您正在返回一个指向已被释放的局部变量的指针，该变量永远不会可靠。

您需要安排`Mat`对象的生存时间足够长，以便`Bitmap`构造函数复制其内容。最简单的方法是使用 C++/CLI，然后您可以从 C++ 返回一个 .NET 位图：

```
Bitmap^ MyImageProcessor::test0(void)
{
    Mat OriginalImg = imread("c:\\20100812133.jpg", 0 );
    threshold(OriginalImg,OriginalImg,0,255,THRESH_OTSU);
    cvtColor(OriginalImg,OriginalImg,CV_GRAY2BGR);
    return gcnew Bitmap(384,
                        384,
                        3 * 384,
                        PixelFormat.Format24bppRgb,
                        IntPtr(OriginalImg.data)
                       );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:47:38.810

你检查imread成功了吗？

```
Mat OriginalImg = imread("c:\\20100812133.jpg", 0 );
if(OriginalImg.empty())
    return NULL; 
```

而在 C# 中（注意我写的代码不一定正确，但你明白了）

```
char* imgData = test1;

if(imgData == Null)
{
 // do something smart
}

Bitmap a = new Bitmap(384, 384, 3 * 384, PixelFormat.Format24bppRgb, imgData);
pictureBox0.Image = a; 
```

这是您在编程中最常犯的错误之一 - 也是最烦人的错误之一

# iphone - CLGeocoder 地理编码非常不准确

> ID：11614721
> 
> 赞同：15
> 
> 时间：2012-07-23T14:37:14.253
> 
> 标签：iphone, ios5, geocoding, core-location

我有一个应用程序可以进行转发地理编码（获取给定地址的坐标）以在`MKMapView`. 该应用程序在 iOS 支持使用前向地理编码之前就已经开发好了[`CLGeocoder`](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)（首先在 iOS 5 中可用）。因此，我的应用程序使用[Google Maps Geocoding API](https://developers.google.com/maps/documentation/geocoding/?hl=en)，这通常非常准确。给定一个带有门牌号的完整地址，它通常会在几米内为您提供该地址的确切位置。

我正在对我的应用程序进行一些更新以支持 iOS 6，并决定从使用 Google API 切换到使用`CLGeocoder`在 iOS 5 或更高版本上运行的应用程序。然而，在我的测试中（所有地址都在我居住的葡萄牙），它是如此不准确，以至于完全无法使用。

我正在使用[`– geocodeAddressString:completionHandler:`](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/instm/CLGeocoder/geocodeAddressString%3acompletionHandler%3a)，例如，给定地址“Avenida da Liberdade 195, Lisboa, Portugal”，它给了我辛特拉市的“Avenida da Liberdade”，而不是里斯本（里斯本）。距离真实地址大约15公里。Avenida da Liberdade 是里斯本最大、最著名的大道之一。相当于纽约市的第五大道。这不是一条不起眼的小街。

为了获得如此可怕的准确性，我做错了什么吗？其他人是否有类似的准确性问题，尤其是美国以外的地址？

目前看来我必须坚持使用 Google Maps API。顺便说一句，我一直在使用 iOS 6 模拟器，结果也好不到哪里去。将相同的搜索字符串放入 iOS 6 地图应用程序的搜索框中会得到同样完全不准确的结果。

**编辑：**添加`CLGeocoder`代码：

```
 CLGeocoder *fgeo = [[[CLGeocoder alloc] init] autorelease];
    NSLog(@"Geocoding for Address: %@\n", address);
    [fgeo geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {
        if (!error) {
            // do stuff with the placemarks

            for (CLPlacemark *placemark in placemarks) {
                NSLog(@"%@\n %.2f,%.2f",[placemark description], placemark.location.horizontalAccuracy, placemark.location.verticalAccuracy);
            }
        } else {
            NSLog(@"Geocoding error: %@", [error localizedDescription]);
        }
    }]; 
```

**编辑 2**：我发现，如果我使用[`– geocodeAddressDictionary:completionHandler:`](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/instm/CLGeocoder/geocodeAddressDictionary%3acompletionHandler%3a)并传入带有街道地址、邮政编码（邮政编码）和尽可能多的详细信息的地址字典，它会为我提供相当准确的坐标，但仍然具有准确性半径超过400m，这是不可接受的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T14:17:54.773

好吧，看起来是的，Apple 的`CLGeocoder`正向地理编码（地址-> 坐标）并不像 Google Maps Geocoding API 那样准确，尤其是在美国以外的地区。使用尽可能完整地填写所有字段的地址字典比简单的地址字符串要好得多，但它仍然远远不够好。谷歌（通常）会在街道编号的 5-10m 范围内为您提供坐标，如果幸运的话，Apple 会在正确街道的某处为您提供坐标。

编辑：找到 Apple Developer [Technical Note TN2289](http://developer.apple.com/library/ios/#technotes/tn2289/_index.html)，其中详细说明了`CLGeocoder`. 葡萄牙似乎在其[部分支持的地区](http://developer.apple.com/library/ios/technotes/tn2289/_index.html#//apple_ref/doc/uid/DTS40011305-CH1-TNTAG3)列表中，它描述为：

> 以下是不完全支持的地区，因为覆盖范围更有限或其他原因。例如，一个位置可能只能被地理编码到道路级别，而不是该道路上的特定地址点。

这与我`CLGeocoder`在葡萄牙的结果相符。我想我只需要等待改进的覆盖范围。

# mysql - 将行恢复为默认列值mysql

> ID：11614722
> 
> 赞同：9
> 
> 时间：2012-07-23T14:37:15.860
> 
> 标签：mysql, default

我正在使用 MySQL 社区服务器 5.1。有没有办法通过一个查询将所有行设置回它们的默认列值？

我刚刚添加了很多行。我为大多数指定的列设置了默认值，但由于某种原因，所有列的值都设置为 = 0。我想知道是否有一个查询可以将所有列值设置为其默认值，我也需要一个`where`子句的能力。

例如这样的事情：

```
update table set values = values(default) where id > 300; 
```

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-23T14:47:55.270

在 INSERT 和 UPDATE 查询中有一个 DEFAULT 关键字可用，您可以使用它来代替任何实际的列值：

```
update my_table set my_column = DEFAULT where id > 300; 
```

如[MySQL 手册中所述](http://dev.mysql.com/doc/refman/5.1/en/update.html)

请注意，还有一个[DEFAULT() 函数](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_default)，如上一个答案中所述；您可以使用它选择任何列的默认值以供使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T14:39:01.600

你应该试试：

```
UPDATE table_name SET col = DEFAULT(col) WHERE id > 300; 
```

# java - Java中的OWL函数式语法解析

> ID：11614725
> 
> 赞同：2
> 
> 时间：2012-07-23T14:37:28.857
> 
> 标签：java, parsing, owl

我需要在我的 Java 程序中解析 OWL 函数语法，但我不想将其转换为 XML/RDF。是否有任何开源解析器或其他 api（OWL 除外）可以用来解析它？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:24:21.240

[OWL-API](http://owlapi.sourceforge.net/)提供对解析 OWL 函数式语法的支持，顾名思义，它是一个用于处理 OWL 的便捷 API。

# raphael - 输入不显示

> ID：11614731
> 
> 赞同：1
> 
> 时间：2012-07-23T14:37:52.190
> 
> 标签：raphael

我有一个输入字段。当用户单击它时，一些 javascript 将文本转换为 Raphael JS 库变量。我想将每个字母放入一个名为字符串的 Raphael 变量中，后跟一个 \n。当用户单击按钮时，什么都不会显示。有人可以帮我解决这个问题吗？...

```
 <html> 
    <head> 
    <script src="raphael.js"></script> 
    <script src="jquery-1.7.2.js"></script>  
    <script type="text/javascript">   
    var string = "";
    function animate() {  

    var txt = document.getElementById("words").value;
    var splittxt = txt.split("");

        var i;
        for (i = 0; i < splittxt.length; i++) {
        var string = splittxt[i] + "\n\n";

        }
        }      

        </script>
        <style type="text/css">
        #letters
        {
        text-align:center;
        margin-left:10px;
        width:25px;
        float:left;
        text-shadow:10px 5px 1px #4D4D4D;
        filter:DropShadow(Color=#4D4D4D, OffX=10, OffY=5);
        font-weight:bold;
        }

        </style>

        </head> 

        <body>  

        Text: <input type="text" id="words"  /> 
        <input type="button" value="Animate" onclick="animate()" /> 
        <div id='letters'></div>
        <div id="draw-here-raphael" style="height: 200px; width: 400px; margin-top:0px; background-color:blue;"> 
        </div> 
        <div id="elps" style="ma

rgin-left:100px;"/>  

    <script type="text/javascript"> //all your javascript goes here  
    var r = new Raphael("draw-here-raphael");  
    var string = r.text(50,50, string);
    </script>

    </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:47:04.847

你实际上并没有显示任何东西。这一行：

```
document.getElementById("letters").innerHTML + splittxt[i] + "<br>"; 
```

需要是这样的：

```
document.getElementById("letters").innerHTML += splittxt[i] + "<br>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:00:51.417

您不想设置变量字符串，而是要添加到它。此外，我对您的摘录还做了很多其他更新……

将变量设置为保留字也会导致很多问题。

[http://jsfiddle.net/fN9Me/](http://jsfiddle.net/fN9Me/)

```
<html> 
    <head> 
    <script src="raphael.js"></script> 
    <script src="jquery-1.7.2.js"></script>  
    <script type="text/javascript">   
        var alpha = "";
        var something = "";
        var r = "";
        var txt = "";
        var splittxt = "";

        $(function() {
            r = new Raphael("draw-here-raphael");

            $("#animate").click(function() {
                txt = $("#words").val();
                splittxt = txt.split("");

                var i;
                for (i = 0; i < splittxt.length; i++) {
                    something += splittxt[i] + "\n\n";
                }
                alpha = r.text(50, 50, something);
            });

        });
    </script>
    <style type="text/css">
    #letters
    {
    text-align:center;
    margin-left:10px;
    width:25px;
    float:left;
    text-shadow:10px 5px 1px #4D4D4D;
    filter:DropShadow(Color=#4D4D4D, OffX=10, OffY=5);
    font-weight:bold;
    }

    </style>

    </head> 

    <body>  
       Text: <input type="text" id="words" value="" />
        <input id="animate" type="button" value="Animate" />
        <div id='letters'></div>
        <div id="draw-here-raphael" style="height: 200px; width: 400px; margin-top:0px; background-color:blue;">
        </div>
        <div id="elps" style="margin-left:100px;"/>  
    </body> 
</html> 
```

**更新：**

要删除前面的文本，只需利用 Raphael`remove`函数即可。我们还必须重置变量`something`

```
if (alpha) alpha.remove(); 
```

[http://jsfiddle.net/fN9Me/1/](http://jsfiddle.net/fN9Me/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:02:33.960

当您调用 split 方法时`value`，输入的为`words`空白 => ，因此语句的主体永远不会执行。`var splittxt = txt.split("");``splittxt``length == 0``for`

# html - 表单标签的 CSS 样式

> ID：11614732
> 
> 赞同：11
> 
> 时间：2012-07-23T14:38:06.440
> 
> 标签：html, css, web, styling

据我所知，`<form></form>`标签作为网页的一部分应该是不可见的，并且在设计表单时，应该使用 div 标签（或等效标签）来表示物理表单结构。

`<form></form>`将 CSS 应用于标签是否可以接受（根据 W3C 标准） ？谁能指出我在这个问题上的正确文学方向？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T14:42:29.150

> 据我所知，`<form></form>`标签应该作为网页的一部分不可见

它应该代表一种形式。那绝对是可见的东西

> 并且在设计表单时，应该使用 div 标签（或等效的）来表示物理表单结构。

`<div>`是不得已而为之的标签。当不存在更合适的东西（如`<form>`or ）时使用它。`<fieldset>`

> `<form></form>`将 CSS 应用于标签是否可以接受（根据 W3C 标准） ？

排除浏览器中的错误，可以为文档中的任何元素设置样式。

> 谁能指出我在这个问题上的正确文学方向？

由于该元素没有什么特别之处，因此不需要特定的文档。

我能想到的最接近的是[来自 CSS 2.1 规范的警告](http://www.w3.org/TR/CSS21/selector.html#class-html)：

> 笔记。CSS 赋予“类”属性如此强大的功能，以至于作者可以想象设计自己的“文档语言”基于几乎没有相关表示的元素（例如 HTML 中的 DIV 和 SPAN）并通过“类”属性分配样式信息. 作者应该避免这种做法，因为文档语言的结构元素通常具有公认和接受的含义，而作者定义的类可能没有。

…但是与问题相关的是一个延伸，因为您建议使用语义标记，但添加不必要的 div 纯粹是为了样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T14:41:30.530

表单只是页面的另一个元素（将其视为可以包含输入/其他元素的 div）。您可以像任何其他元素一样使用 CSS 对其进行样式设置 - 这一切都是完全有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:47:45.177

一个`form`元素可以像任何其他元素一样设置样式，并且它在浏览器默认样式表中有一些默认样式，请参阅CSS 2.1 规范[中 HTML 4 的默认样式表。](http://www.w3.org/TR/CSS2/sample.html)最重要的特性是，默认情况下，一个`form`元素被渲染为一个块，其顶部和底部边距对应于一个空行。（不过，在某些情况下，浏览器实际上会抑制这些边距。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T16:12:14.713

在某些情况下设置表单标签的样式可能很有用。只要确保你让表单标签的行为就像它是一个层一样。没必要做 `<div id="myform"><form></form></div>`

只需执行表单 {display:block;} 它就好像它是一个 div。

关于语义，因为您要求正确执行：一个常见的错误是使用 div 作为标签，然后失去可用性。

将 HTML 用于它的设计目的！例如，根据标准，这是 HTML 中基本表单的外观。

```
<form method="post" action="http://www.someurl.com/formHandler.php">
    <fieldset>
        <legend>Personal info</legend>
        <label for="name">Name:</label>
        <input type="text" id="name" class="text" />
        <label for="email">Email</label>
        <input type="text" id="email" class="text" />
    </fieldset>
    <fieldset>
        <legend>Optional</legend>
        <label for="info">Comments?</label>
        <textarea id="info"></textarea>
        <input type="submit" value="submit" class="submit" />
    </fieldset>
</form> 
```

像这样使用 HTML 允许用户单击标签或按 Tab 键以获得对所需字段的关注。

对此进行样式设置可能会很棘手，但是如果您知道自己在做什么，则不需要很多代码。

```
form { display:block; background-color: #9e9e9e; padding: 20px; width: 540px; /*200 + 300 + (20 * 2)*/ }
legend { font-weight: bold; }
label { display: inline-block; width: 200px; float: left; clear: left; }
input.text { display: block; width: 300px; float: left; }
input.submit { margin:20px 0 0 200px; width: auto; } 
```

例如：http: [//jsfiddle.net/tive/BB85w/](http://jsfiddle.net/tive/BB85w/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:45:08.280

我会说是的，您可以像设置任何其他标签一样设置表单样式。我宁愿设置表单元素的样式，也不愿添加额外的 div，因为我试图保持我的 HTML 最小化。

此外，SitePoint 有[一篇关于样式化表单的相对较新的文章](http://www.sitepoint.com/style-web-forms-css/)，它从样式化表单标签本身开始。

# c++ - 识别图像补丁 - 需要建议

> ID：11614733
> 
> 赞同：0
> 
> 时间：2012-07-23T14:38:09.197
> 
> 标签：c++, image, computer-vision, processing

我正在寻找可以让我识别手的图像块的算法的建议。因此，给定一张图像，我想提取属于手的补丁（那些将是正补丁）。其他一切都是负面补丁。

我的目标应用程序是通过能够识别补丁是否属于手来区分手（任何手形）与其他对象而不使用颜色。

下图描绘了我的想法， ![在此处输入图像描述](../Images/6673e457b02a5aeddba6506261841a73.png)

手的唯一问题是它可以采取任何形状。是否有任何建议或算法来执行上述操作？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:21:39.710

这是一个非常广泛的研究主题，因此您不太可能找到任何可用的好的示例软件，但您可能会找到该领域的许多研究论文，如果幸运的话，您可能会找到一些作者发布代码的地方。

你给了一张猫的照片，所以以此为灵感，我快速搜索并找到了牛津大学 Andrew Zisserman 小组的[这篇论文。](http://www.robots.ox.ac.uk/~vgg/publications/2012/parkhi12a/parkhi12a.pdf)另一个需要研究的小组是加州大学伯克利分校的 Jitendra Malik，他对结合使用图像分割和特征检测的[这一领域感兴趣。](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/grouping/)

根据您的动机，搜索词可能包括：可变形形状模型、皮肤分割（尽管您说您不想使用颜色 - 为什么不呢？）、对象检测。可能性很多，它们都是许多计算机视觉社区的当前研究主题。

# jquery - 如何将jquery blockUI消息位向上移动

> ID：11614734
> 
> 赞同：1
> 
> 时间：2012-07-23T14:38:15.093
> 
> 标签：jquery, jquery-blockui

我正在使用 jquery blockUI。始终处理位于中心的文本。我试图改变它的位置，但我失败了。我试过用css喜欢

```
 $('div#SearchResult').block({ message: '<table cellspacing="5" style="margin-left:auto;margin-right:auto;margin-top: 6px;"><tr><td style="width:30px" align="right" valign="middle"><img  src="../images/ajx-loader.gif" border="0"/></td><td style="width:100px" align="left" valign="middle"><h3>Processing...</h3></td></tr></table>',
            css: {
                border: '10px solid #CCCCCC', height: '50px', top: '200px'
            }
        }); 
```

在这里我提到消息 div top will 200px 但即使我尝试像普通 css 那样它也不会生效作为示例

```
.blockUI 
{
    top: 200px;
} 
```

但没有任何效果。所以请任何人告诉我如何通过css将消息框div移动到位。谢谢

最后我可以弄清楚如何解决它

* * *

```
 $(document).ready(function () {
        $('#block').click(function () {
            $('#mydv').block({
                message: 'Processing...', centerY: false,
                css:
                { 
                    //background-color: 'white',
                    border: '3px solid #a00',
                    top: '110px',
                    position:'fixed',
                    width:'100px'
                    //, height: '40px'
                }
            });
            return false;
        });
    }); 
```

# android - ActionBarSherlock 在下拉导航微调器上显示错误的颜色和单选按钮

> ID：11614743
> 
> 赞同：5
> 
> 时间：2012-07-23T14:38:47.983
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock 来实现 ActionBar 的兼容性。

除了导航下拉微调器之外，一切都很好。

在 Android 2.3 及更低版本上使用模拟器进行测试，我在微调器上得到一个单选按钮，并且文本颜色为黑色。

它在 Android 4+ 上运行良好。

如何删除按钮并设置正确的颜色？谢谢。

示例图片：

![Android 2.33 模拟器上的 ActionBarSherlock](../Images/68ba3abc080fc62ecc3bbe0e4bf4599b.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T14:51:20.010

找到了。我应该使用`R.layout.sherlock_spinner_dropdown_item`微调器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T14:51:34.877

您是否设置了正确的下拉项？：

```
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
navigationItems = Arrays.asList(getResources().getStringArray(R.array.navigation_array));
setupNavigationStrings();
navigationAdapter = new ArrayAdapter<String>(context, com.actionbarsherlock.R.layout.sherlock_spinner_item, navigationItems);
navigationAdapter.setDropDownViewResource(com.actionbarsherlock.R.layout.sherlock_spinner_dropdown_item);
getSupportActionBar().setListNavigationCallbacks(navigationAdapter, this); 
```

# css - 造型 twitter bootstrap ..不知何故忽略了我的代码？

> ID：11614744
> 
> 赞同：0
> 
> 时间：2012-07-23T14:38:52.263
> 
> 标签：css, twitter-bootstrap

我下载了 twitter 引导程序，然后使用以下非常基本的代码自定义了 starter-template.html 文件：

```
<body>
<div class="container">
    <div class="row">
        <div class="span8 outsidecontainer"> ... </div>
        <div class="span4 outsidecontainer"> ... </div>
    </div>
</div>
</body> 
```

到目前为止，一切都很好。它显示得很好，宽度也可以。如您所见，我尝试在最底部的 bootstrap.css 中添加“outsidecontainer”样式，即：

```
.outsidecontainer{
    padding:5px;
    background:#f2f2f2;
    border-color:#cfcfcf;
    border-width:0px;
    border-style:solid;
    border-radius: 5px;
} 
```

出于某种原因，这种样式并没有出现。我究竟做错了什么？有些东西告诉我这是在代码级别，而不是 CSS，因为甚至背景颜色都没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:50:54.783

您添加了额外的填充，这将导致 spanX div 不再适合该行。

试试这个...

```
<body>
<div class="container">
  <div class="row">
    <div class="span8"><div class="outsidecontainer">...</div></div>
    <div class="span4"><div class="outsidecontainer">...</div></div>
  </div>
</div>
</body> 
```

# javascript - 为什么 (true > null) 在 JavaScript 中总是返回 true？

> ID：11614746
> 
> 赞同：12
> 
> 时间：2012-07-23T14:38:58.947
> 
> 标签：javascript

有人能告诉我为什么以下代码在 JavaScript 中返回 true 吗？

```
console.log(true > null); //returns true 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T14:44:21.013

`null`就像`false`在这种情况下，它是`0`一个数字。`true`是`1`一个数字。

`1`( `>`) 大于`0`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T14:44:51.067

它们被转换为数字，`null`给予`0`和`true`给予`1`

[http://ecma-international.org/ecma-262/5.1/#sec-11.8.5](http://ecma-international.org/ecma-262/5.1/#sec-11.8.5)

> 如果 Type( *px* ) 不是 String 且 Type( *py* ) 不是 String 的情况，则
> 
> 1.  令*nx*为调用 ToNumber( *px* ) 的结果。因为*px*和*py* 是原始值，所以评估顺序并不重要。
> 2.  令*ny*为调用 ToNumber( *py* ) 的结果。

```
Number(null) //0
Number(true) //1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T14:44:41.417

可能是因为`true = 1`在哪里`null = 0`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T14:45:54.383

JavaScript 在后台做了很多类型强制，你会发现很多结果都没有用（参见[http://wtfjs.com/](http://wtfjs.com/)）。

在这种情况下，被强制为 1 的 true 大于被强制为 0 的 null。由于 1 大于 0，因此结果为 true。

> 如果其中一个操作数是布尔值，则布尔操作数如果为真则转换为 1，如果为假则转换为 +0。

来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T14:49:15.690

背后发生的是关系运算符（`>`在这种情况下）在进行比较之前执行类型强制。执行时`ToPrimitive`，true 被强制为 1，而 null 被强制为 0。您可以在此处查看运算符实际如何工作的详细信息[。](http://bclary.com/2004/11/07/#a-11.8.2)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T14:48:52.163

比较运算符“>”强制将其左侧和右侧都转换为数字。Number(true) 为 1，Number(null) 为 0，所以括号中的内容被视为“1>0”，结果始终为 true。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T14:45:35.013

代码不正确，你需要这样做：

```
console.log(true > typeof null); 
```

# iphone - ABPeoplePicker：重置自定义导航栏外观

> ID：11614748
> 
> 赞同：1
> 
> 时间：2012-07-23T14:39:03.450
> 
> 标签：iphone, reset, abpeoplepickerview, uiappearance

我正在使用 UINavigationBar、UIBarBattunItems 和 BackButton 的自定义外观。此外，我正在使用 Apple 的 ABPeoplePicker 让用户从一些联系人中进行选择。我的问题是我想将外观重置为默认外观，但前提是人员选择器以模态方式呈现。

有谁知道如何实现这一目标？

我以以下方式展示我的人员选择器。

```
//showing people picker do identify owner of the certificate
ABPeoplePickerNavigationController* picker = [[ABPeoplePickerNavigationController alloc] init];
picker.peoplePickerDelegate = self;
[self presentModalViewController:picker animated:YES]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T05:02:34.233

尝试在当前选择器之前添加以下代码。

```
picker.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
picker.modalPresentationStyle = UIModalPresentationOverCurrentContext; 
```

# tridion - 需要获取已发布的组件版本的 XML

> ID：11614756
> 
> 赞同：-1
> 
> 时间：2012-07-23T14:39:34.043
> 
> 标签：tridion, tridion-2011

我们在 Tridion 2011 的文件夹中迭代组件，并根据组件的发布状态创建自定义 XML 以在 CDS 上使用。我给出下面的例子来让你理解这个问题。

1.  假设我们在一个文件夹中有 10 个组件都已发布，并且我们发布了我们的 XML，然后为 10 个项目生成 XML。
2.  现在我们对其中一个组件进行更改并且不发布它。
3.  组件修改后，我们再次发布 XML。然后 XML 也会针对修改后的组件进行更新。因此，它会在该组件的已发布版本与我们的 XML 中的版本之间产生差异。

所以我想以这样一种方式发布自定义 XML，它应该只包含与已发布版本的组件同步的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:18:01.160

所以你想：

1.  确定上次发布的组件的 XML
2.  确定该 XML 与组件的当前 XML 之间的更改
3.  仅发布更改

Tridion 不跟踪已发布的版本（至少在内容管理器上）。因此，您可以做的最接近的事情是找出组件***上次***发布的时间并检索该时间的 XML。[这个问题](https://stackoverflow.com/questions/10092156/how-to-get-the-published-timestamp-of-a-page-or-component-using-sdl-tridion-tom)是了解有关该方法的更多信息的一个很好的起点。然后基于该 XML，您可以执行上面的步骤 2 和 3。

或者，您可以在呈现组件时保留您在“某处”（例如在应用程序数据中）发布的 XML 的快照。然后，当下次发布组件时，您可以检索该 XML 并执行上面的步骤 2 和 3。

请注意，对于这些解决方案中的任何一个，您都应该真正想知道是否应该从一开始就实施它。您正在覆盖 Tridion 的一些默认渲染行为并规避其架构的一部分（内容管理和内容交付之间的明确、明确的脱节，前者对后者“一无所知”）并且您所做的任何事情都会回来困扰您时间。在这个用例中，您必须想知道当 CDS 和 TCM 不同步时会发生什么。突然重新发布内容已经不够好，因为您的代码将在那里决定“自上次发布以来没有任何变化，所以我们什么都不会发布”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:55:19.700

如果我妄下结论，请原谅我，但我强烈认为这个问题源于对 Tridion 缺乏了解。在 Tridion 中发布不仅仅是举起一个标志来表明该项目已“发布”，换句话说，它已准备好向外界展示。我知道这就是一些（许多）内容管理系统的运作方式（这可以解释你为什么问这个问题）。然而，在 Tridion 中，发布意味着项目实际上（物理上）从内容管理环境转移到内容交付环境。此环境始终包含您的内容版本，这些版本代表项目上次发布时的状态 - 仅仅是因为正是发布行为创建了它们。

在我看来，您真正要问的是如何重建此发布功能。这从来都不是一个好主意。相反，您应该认真对待 Bart 的评论并查看 Tridion 提供的内容交付 API 之一（代理 API 或 OData Web 服务）。或者，您可能想要查看 DD4T，它构建在代理之上并公开了完整的 Tridion 数据模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:14:30.870

那么你的解决方案是

1.  在 Publish Transaction Save 事件上编写事件处理程序
2.  它将发布信息（版本数据）保存到已发布组件的应用程序数据中

我提到了 Publish Transaction Save 事件，因为从那里您可以确保仅在事务成功时才保存发布信息。

另请注意，当事件处理程序无法执行时，此发布信息可能会不同步，并且在移动到另一个环境时可能会丢失所有应用程序数据。

因此，当这些信息绝对重要时，我会将其保存到单独的数据库中，而不是应用程序数据中。

# c++ - 特殊排序算法和通用签名

> ID：11614758
> 
> 赞同：2
> 
> 时间：2012-07-23T14:39:43.433
> 
> 标签：c++, algorithm, sorting, stl

我有一个强大的用例来定义我自己的排序算法，它比 stl 中最快的算法要快，并且通过利用基础数据的一些不错的属性，我基本上可以在`O(n)`.

到目前为止一切顺利，现在的问题是我想提供一个通用接口，它可以适合任何类型的容器，例如`T*`等`std::vector<T>`，只要应用几个关键概念，例如

*   有一个有效的运算符 [] 可用于访问集合的元素
*   该系列的元素支持“小于”可比概念。

为了获得想法，我去了头文件`<std_algo.h>`并找到了下面的函数接口，除了一个细节之外，它与我正在寻找的完全匹配，我看不到`_RandomAccessIterator`编译器如何自动矢量化底层循环而忽略容器输入，这是我的问题......有没有办法让我拥有这一切？自动矢量化+通用接口忽略底层集合类型？

`while (__last - __first > int(_S_threshold))`我认为由于“非规范”循环模式和类似条件，下面的代码不会自动矢量化，`if (__depth_limit == 0)`但我的算法中不需要最后一个。所以我看到非规范类型的循环会阻止自动矢量化。

```
template<typename _RandomAccessIterator, typename _Compare> 
inline void sort(_RandomAccessIterator __first, _RandomAccessIterator __last, _Compare __comp)
{
    typedef typename iterator_traits<_RandomAccessIterator>::value_type
    _ValueType;

    // concept requirements
    __glibcxx_function_requires(_Mutable_RandomAccessIteratorConcept<
    _RandomAccessIterator>)
    __glibcxx_function_requires(_BinaryPredicateConcept<_Compare, _ValueType,
    _ValueType>)
    __glibcxx_requires_valid_range(__first, __last);

    if (__first != __last)
    {
        std::__introsort_loop(__first, __last,
        std::__lg(__last - __first) * 2, __comp);
        std::__final_insertion_sort(__first, __last, __comp);
    }
} 
```

有问题的循环如下所示：

```
// This is a helper function for the sort routine.
template<typename _RandomAccessIterator, typename _Size, typename _Compare> 
void __introsort_loop(_RandomAccessIterator __first, _RandomAccessIterator __last, _Size __depth_limit, _Compare __comp)
{
    while (__last - __first > int(_S_threshold))
    {
        if (__depth_limit == 0)
        {
            _GLIBCXX_STD_A::partial_sort(__first, __last, __last, __comp);
            return;
        }
        --__depth_limit;
        _RandomAccessIterator __cut =
        std::__unguarded_partition_pivot(__first, __last, __comp);
        std::__introsort_loop(__cut, __last, __depth_limit, __comp);
        __last = __cut;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:49:52.740

标准 C++ 库在标准算法中使用迭代器，例如 sort()。这允许算法实现忽略底层容器的确切细节。此外，这种方法不允许使用`operator[]()`.

考虑到这一点，我有两个建议供您考虑：

1）修改您的专业排序以使用迭代器，而不是`operator[]()`访问容器中的元素。如果可以保持所需的 O(n) 速度，那么这可能是最理想的灵活性方法。

2) 使用模板化的容器类实现您的排序。就像是

```
template <class Container, class Compare>
void sort(Container cont, Compare comp); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:39:48.480

模板的美妙之处在于，它们在模板类型被填写之前不会被完全编译，因此编译器可以根据最终代码应用优化。指针满足随机访问迭代器的`T*`所有必需属性，并且可以在任何需要它们的模板代码中轻松使用。

```
vector<float> v;
// load v
sort(&v[0], &v[v.size()]); // same as sort(v.begin(), v.end()) but possibly optimized better 
```

# visual-c++ - 使用在任何 PC 上运行的 Visual Studio 2010 开发 Cuda DLL

> ID：11614761
> 
> 赞同：0
> 
> 时间：2012-07-23T14:40:02.373
> 
> 标签：visual-c++, dll, cuda, nvidia

我有以下问题：我已经编译了一个 Cuda DLL - 例如一个非常简单的 - 使用 Visual C++，然后我将它导入到 Vb.NET 程序中。

**出口方式：**

```
extern "C" int __declspec(dllexport) __stdcall MySum(int a, int b) {...} 
```

**通过以下方式在 VB.NET 中导入：**

```
<DllImport("MyDllName.dll")> Public Shared Function MySum(ByVal a as integer, ByVal b as integer ) As Integer 

End Function 
```

在我的电脑上一切正常：软件运行和 Cuda 功能的结果是正确的。在具有不同 Nvidia 板的不同 pc 上安装软件，它继续工作，但 Cuda 函数返回错误结果。（例如，如果我尝试将两个数字相加，结果总是相同的。）

在 Visual C++ 上是否有一些配置可以导出与任何 Nvidia 驱动程序一起使用的 Cuda DLL？我该如何解决这个问题？

# android - 从 Int 到 Byte (Java) 的转换问题

> ID：11614766
> 
> 赞同：0
> 
> 时间：2012-07-23T14:40:17.410
> 
> 标签：android, arrays, int, byte, rijndael

我正在为 Android 开发一个应用程序。在这个应用程序中，您必须使用 Rijndael 加密/解密算法。

要使用此算法，我需要安装 IV。在这种情况下是一个字节数组。到目前为止，一切都很好。

问题是我必须使用来自用 C# 编写的 Web 服务的相同 IV。

C#是这样的：

```
byte[] bytIV = { 121, 241, 10, 1, 132, 74, 11, 39, 255, 91, 45, 78, 14, 211, 22, 62 }; 
```

当我尝试在 Java 中做同样的事情时，会发生错误，我建议添加几个数字。是什么让代码这样：

```
byte[] bytIV = { 121, (byte) 241, 10, 1, (byte) 132, 74, 11, 39, (byte) 255, 91, 45, 78, 14, (byte) 211, 22, 62 }; 
```

仍然没有工作。

有人对我的工作有什么建议吗？

谢谢！

* * *

在我在这里使用的示例中，我使用了 (cast) 而不是 (byte)。示例已更正。注意：我的代码中有（演员）。在代码中是（字节）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:54:13.463

在 Java 中，一个字节的范围可以在 -128 到 127 之间。任何大于 128 或小于 -127 的数字都不能放入字节中，这就是它要求强制转换的原因。在 Java 中，您添加这样的转换 (int) 或 (double) 会将数字分别转换为 int 或 double。要解决您的问题，您必须将数组更改为 short 或 int 数组而不是字节数组。然后删除声明中的演员表。下面的任何一个都应该适合你。

```
int[] bytIV = { 121, 241, 10, 1, 132, 74, 11, 39, 255, 
                             91, 45, 78, 14, 211, 22, 62 }; 
```

或者

```
short[] bytIV = { 121, 241, 10, 1, 132, 74, 11, 39, 255, 
                             91, 45, 78, 14, 211, 22, 62 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:48:36.097

字节是 8 位有符号的，从 -128 到 127。因此，转换 241 将给出 -15，这与 C# 中无符号字节的 241 位相同。我没有看到问题。但是转换为 byte 是 with `(byte)241`，而不是`(cast)241`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:44:47.560

字节是 8 位有符号的。您正在设置大于该值的数组值。以 241 为例。这就是为什么您需要添加演员表，并且进行简单测试的结果是：

```
byte b2 = (byte) 241;           
System.out.println("" + b2); 
```

输出 = -15

因此你的问题

# jira - 每个用户故事的 Jira 错误摘要

> ID：11614768
> 
> 赞同：4
> 
> 时间：2012-07-23T14:40:23.143
> 
> 标签：jira, summary, user-stories

我正在寻找如何提高 Jira+GreenHopper 中用户故事进度的可见性的想法。

**我们现在的工作**方式：我们将所有用户故事放入 Jira，将它们分解为开发的子任务，然后我们的测试人员将 Jira 中的错误链接到适当的用户故事。在我们的项目仪表板上，我们有一个过滤器，例如“显示名称、状态、完成百分比，其中 fixVersion = current_sprint order by priority desc”。

**我们的问题**：为了了解标记为 100% 完成的用户故事是否真的可以向我们的客户展示，我们需要确保它是否没有严重错误并且不超过 N 个低优先级错误。但是现在我们需要手动逐个检查每个用户故事来计算这些数字。

**问题**：如果可以在当前 sprint 的用户故事列表中显示每个优先级的错误计数，有什么想法吗？为简单起见，我们会考虑：

*   高：未解决 Blocker + Critical 优先级的错误；
*   中：未解决主要+中优先级的错误；
*   低：未解决 Minor + Trivial 优先级的 bug；

所以，这样的列表看起来像

```
US name | US completion % | High-pri bugs # | Med-pri bugs # | Low-pri bugs # 
```

最简单方法的想法？任何基于标准 Jira 小工具/查询的东西？或您可能知道用于此的任何自定义插件？或者即使应该开发什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-23T23:35:22.147

创建一个新的问题类型，可以称之为“Sub-Bug”。仅当用户尝试在故事下创建子任务时，此问题类型才可用。

当 QA 验证故事并发现问题时，要求他们在故事下创建子任务并选择“子错误”作为问题类型。

现在，您可以轻松地跟踪所有子任务（包括实际子任务和 su-bug）在您将故事移动到“完成”状态之前已完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T13:17:17.557

您可以使用（只读）自定义字段来存储所有链接问题的数量。此自定义字段可以显示在您的搜索结果中。也许这适合你：[JIRA Misc Custom Fields](https://marketplace.atlassian.com/plugins/com.innovalog.jmcf.jira-misc-custom-fields)

*这个自定义字段可以很容易地在过滤器中使用。问题计数可以显示在例如融合页面中。您可以向客户展示的融合页面。*

# asp.net - ASP.Net Button1 onclick 在服务器上不起作用

> ID：11614773
> 
> 赞同：0
> 
> 时间：2012-07-23T14:40:38.717
> 
> 标签：asp.net, button

我的 button1 onclick 事件有问题，

它在我的本地计算机上运行良好，但是，当我发布到服务器时它显示错误：

```
>     Compilation Error
>     Description: An error occurred during the compilation of a resource required to service this request. Please review the following
> specific error details and modify your source code appropriately.
>     
>     Compiler Error Message: CS1061: 'ASP.resourcecenter_default_aspx' does not contain a definition for 'Button1_Click' and no extension
> method 'Button1_Click' accepting a first argument of type
> 'ASP.resourcecenter_default_aspx' could be found (are you missing a
> using directive or an assembly reference?)
>     
>     Source Error:
>     
>     
>     Line 66:         <tr>
>     Line 67:         <td class="style1">
>     Line 68:         <asp:Button ID="Button1" runat="server" Text="Search" onclick="Button1_Click" />
>     Line 69:
>     Line 70:         </td> 
```

这是我的代码：

aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

......

<tr>
        <td class="style1">
        <asp:Button ID="Button1" runat="server" Text="Search" onclick="Button1_Click" />

</td> 
```

C＃：

```
 public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            string sqlcode = null;
            string request = TextBox2.Text.ToString();
.....} 
```

谁能帮我弄清楚发生了什么？我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:57:53.367

您可以尝试将 _Default 类封装在一个唯一的命名空间中，或者更改类名，以防它与您网站中在其后面的代码中具有相同类名 (_Default) 的另一个页面发生冲突。

# ruby-on-rails - `load': 没有要加载的文件

> ID：11614774
> 
> 赞同：0
> 
> 时间：2012-07-23T14:40:39.557
> 
> 标签：ruby-on-rails, testing, rspec, rspec-rails

我是*ruby​​ on rails*的新手，我正在尝试在*ruby​​ on rails*上测试我的控制器。它以前工作过，但现在我不知道发生了什么，但是当我进行测试时，我收到了下一条错误消息：

```
/Library/Ruby/Gems/1.8/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load': no such file to load -- /Users/armandodejesussantoyareales/Documents/project_newbie/Estaciones/estaciones/spec/controllers/user_controller_spec.rb (LoadError) 
```

这是我的规格文件：

```
require 'spec_helper'

describe UserController do

it "create new user" do
    get :create, :user => { :email => 'foo@example.com', :name => 'userexample'     }
    flash[:notice] = 'new user was successfully created.'
end
  describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
end

describe "with valid information" do
  before do
    fill_in "Name",         with: "Example User"
    fill_in "Email",        with: "user@example.com"
    fill_in "Password",     with: "foobar"
    fill_in "Confirmation", with: "foobar"
  end

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end
end
  end
end 
```

这是我的`Usercontroller`

```
class UserController < ApplicationController
def new
     @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        redirect_to user_session_path
    else
    redirect_to new_user_session_path
end

def show
    @user = User.find(params[:id])
    #redirect_to @user
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:07:19.340

```
/Users/armandodejesussantoyareales/Documents/project_newbie/Estaciones/estaciones/spec/controllers/user_controller_spec.rb 
```

你确定那是正确的道路吗？在终端中，当您输入以下内容时会发生什么：

```
ls /Users/armandodejesussantoyareales/Documents/project_newbie/Estaciones/estaciones/spec/controllers/user_controller_spec.rb 
```

如果您收到错误消息`No such file or directory`，则该路径不存在。如果它只是回响路径，那很好。

或者，您可以手动查找此文件并验证路径。但无论哪种方式，我的猜测是您只是错误地输入了您的规范文件的路径。

# android - 由于不同的 Android 签名而丢失数据

> ID：11614779
> 
> 赞同：1
> 
> 时间：2012-07-23T14:41:03.257
> 
> 标签：android

我已经使用我的应用程序一段时间了，并在其中生成了大量数据。现在是升级它的时候了，但问题是我买了一台新笔记本电脑，由于另一个 IDE 使用的签名不同，我无法升级应用程序。现在不可能保存数据，对吧？

**更新：**我没有故意使用任何 .keystore，我只是从 Eclipse 安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:43:55.267

签署应用程序时使用相同的 .keystore 并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:46:44.233

您需要使用密钥库和相同的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:56:32.390

所以你是说你上传了没有任何`signing`证书的应用程序，基本上是`.apk`从`/bin`文件夹中复制的？据我所知，这是不可能的。

如果您确实将其与`.debug`证书一起上传，那么恐怕您将无法更新您的应用程序，因为正如您所注意到的，每次安装都会在每台机器上`Android ADT`创建不同的`.debug`证书。

# c++ - 调用类成员对象的构造函数

> ID：11614780
> 
> 赞同：2
> 
> 时间：2012-07-23T14:41:08.030
> 
> 标签：c++, constructor

我有两个类 L1 和 L2，L2 的定义包括 L1 作为成员对象。L1 和 L2 中的每一个都有自己的构造函数。显然，在实例化 L2 时，它的构造函数必须调用 L1 的构造函数。但是，我不知道该怎么做。这是一个（失败的）尝试以及伴随的编译器错误。

```
class L1
{
public:
  L1(int n)
      { arr1 = new int[n] ; 
        arr2 = new int[n];   }
private:
  int* arr1 ;
  int* arr2 ;  
};

class L2
{
public:
  L2(int m)  
    { in  =  L1(m) ; 
      out =  L1(m) ; }

private:
  L1 in ; 
  L1 out;

};

int main(int argc, char *argv[])
{
  L2 myL2(5) ;

  return 0;
} 
```

编译错误是：

```
[~/Desktop]$ g++ -g -Wall test.cpp             (07-23 10:34)
test.cpp: In constructor ‘L2::L2(int)’:
test.cpp:21:5: error: no matching function for call to ‘L1::L1()’
test.cpp:8:3: note: candidates are: L1::L1(int)
test.cpp:6:1: note:                 L1::L1(const L1&)
test.cpp:21:5: error: no matching function for call to ‘L1::L1()’
test.cpp:8:3: note: candidates are: L1::L1(int)
test.cpp:6:1: note:                 L1::L1(const L1&) 
```

我该如何修复此代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T14:42:23.537

使用初始化列表：

```
class L2
{
public:
  L2(int m) : in(m), out(m) //add this  
  {
  }

private:
  L1 in ; 
  L1 out;

}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:43:16.157

使用构造函数初始化列表，例如：

```
L2(int m) : in(m), out(m) { } 
```

*当您应该使用初始化时，*切勿使用赋值。**

# java - 致命信号 11（和引擎项目）

> ID：11614786
> 
> 赞同：0
> 
> 时间：2012-07-23T14:41:19.823
> 
> 标签：java, android, mobile, box2d, andengine

我正在创建由 andengine 框架驱动的 android 游戏 box2d 扩展
我得到“致命信号 11”，这似乎是突然发生的（我想你可以随机调用它）

没有线索（至少，我不知道有任何线索可以帮助我解决这个问题）

我的猜测是：
1）我正在使用 TimerTask 类创建游戏实体
2）也许它与并发有关？

你怎么看？
谢谢，
插座

![在此处输入图像描述](../Images/f113bce43874bec246e2d44db28439d4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:56:54.237

您仍然可以使用 TimerTask，您只需要确保在 AndEngine 更新线程上调用与 AndEngine 相关的任何内容（创建或删除精灵等） - 您可以使用

```
runOnUpdateThread(new Runnable() {
@Override
public void run() {
// TODO Auto-generated method stub
// do your stuff in here
}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:02:00.787

我遇到了同样的问题，并通过将 TimerTask 排除在外来解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:23:09.527

它说touchEvent ...也许您将FixtureDef的密度值设置得太高....尝试将密度值设置为<= 1000，如下所示：

FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(1000, 0.0f, 1.0f);

身体 mGoundBody=PhysicsFactory.createBoxBody(this.mPhysicsWorld, ground, BodyType.StaticBody, wallFixtureDef);

希望这些信息可以帮助你...

# events - 在chrome中附加事件处理程序不起作用

> ID：11614791
> 
> 赞同：0
> 
> 时间：2012-07-23T14:41:32.850
> 
> 标签：events, google-chrome, datepicker, handler

这段代码：

```
function attachDateNavEventHandler() {
    $('.ui-datepicker-title option').each(function () {
    $(this).mouseup(setFlag);
}); 
```

在 FF 中很好地附加了事件，但在 IE 8 或 Chrome 中没有。我正在使用 jQuery datepicker，如果用户使用月份或年份下拉菜单导航，我想设置一个标志。我似乎无法附加到选择的 onchange 事件。我认为这些事件必须存在内部障碍。我在使用简单的单击时也遇到了麻烦任何建议mooooooost 欢迎:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:09:28.953

尝试：

```
$(this).on('mouseup', setFlag); 
```

尽管这与您拥有的基本相同。

我有一种感觉，选项本身可能有有趣的事情。选项不能完成典型 HTML 元素所能做的所有事情，但我不确定对哪些浏览器的限制。

如何在整个选择本身上设置 on change 而不是尝试侦听每个单独选项的 mouseup 事件。

```
 $('.ui-datepicker-title').change( 
```

# c# - 将数组添加到数组中 - 一个接一个

> ID：11614794
> 
> 赞同：1
> 
> 时间：2012-07-23T14:41:34.870
> 
> 标签：c#, .net, arrays, string, list

我想将数组添加到列表或多维数组（不是一次全部...）。但我真的不明白为什么这应该那么难。

可以说我有这个：

```
 string[] a = { "h", "b"};
    string[] b = { "c", "a", "i" };
    string[] c = { "out", "in", "file", "test" };

    ArrayList x = null;

    x.Add(a); //error: Object reference not set to an instance of an object.
    x.Add(b);
    x.Add(c); 
```

我可以使用而不是 ArrayList 也许

```
string[,] x = null; 
```

但是没有选项 .Add

假设我有一个未知数量的大小未知的字符串 [] - 如何将它们添加到列表/多维数组中？再说一遍：我想一一添加这些字符串[]。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:43:37.410

你得到一个[`NullReferenceException`](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception.aspx)因为你的列表没有初始化：

```
string[] a = { "h", "b"};
string[] b = { "c", "a", "i" };
string[] c = { "out", "in", "file", "test" };

IList<string[]> x = new List<string[]>;

x.Add(a);
x.Add(b);
x.Add(c); 
```

这假设您正在构建一个二维结构。如果您想将数组“展平”为单个字符串列表，请创建一个列表，然后改用它的`List.AddRange`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:06:40.190

你缺少`new`ArrayList 所以你应该这样做：

```
ArrayList x = new ArrayList();
    x.AddRange(a);
    x.AddRange(b);
    x.AddRange(c); 
```

你不能在`Add`方法中使用数组，你不会得到任何编译错误，但是当你访问对象时，你只会得到`ToString`类型，这意味着如果你说：

```
string[] a = { "h", "b"};
    x.Add(a); 
```

然后尝试遍历以下元素：

```
foreach (var item in x)
     {
    Console.WriteLine(item);
     } 
```

你会得到结果：`System.String[]`我希望你不想要这样，所以你需要使用`AddRange`带有 type 参数的方法`ICollection`，所以你说：

`x.AddRange(a);`

如果您在数组列表上执行循环，例如：

```
 foreach (var item in x)
         {
             Console.WriteLine(item);
         } 
```

你会得到输出，

```
h 
b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:47:12.830

您还没有创建要存储字符串数组的 ArrayList 实例。尝试添加

```
ArrayList x = new ArrayList();
x.Add(a);
...
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T14:47:14.347

> ```
> ArrayList x = null;
> x.Add(a); 
> ```

如果：

1.  您创建一个实例`ArrayList`：

    ```
    ArrayList x = new ArrayList(); 
    ```

    你所做的只是声明一个局部变量。

2.  你小心`ArrayList.Add`分开`ArrayList.AddRange`。前者添加了一个对象。在您的情况下，第一个元素（在 first 之后`Add`）本身就是一个数组。要访问“h”，需要`x[0][0]`. `AddRange`获取每个通过的集合元素，并将其添加到集合中。因此得到“h”将是`x[0]`，“b”将是`x[1]`。

我想你想要：

```
string[] a = { "h", "b"};
string[] b = { "c", "a", "i" };
string[] c = { "out", "in", "file", "test" };

ArrayList x = new ArrayList();

x.AddRange(a);
x.AddRange(b);
x.AddRange(c); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T14:48:04.270

关键字`null`本质上的意思是“没有对象”。因此，当您编写时，`x.Add(a)`您试图在`Add`不存在的东西上调用该方法。

您需要先*初始化*您的列表，这会将一些内容放入标记为 的框中`x`：

```
ArrayList x = new ArrayList(); 
```

您现在可以调用`x.add(a)`，您的代码将按预期工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T14:48:45.403

一种方法是：

```
List<List<string>> list = new List<List<string>>();

    list.Add(new List<string>(){
        "str1", "str2", "..."
    }); 
```

一定要包括：使用 System.Collections.Generic；

# asp.net-mvc - 带有路由名称的 mvc 4 beginform

> ID：11614797
> 
> 赞同：6
> 
> 时间：2012-07-23T14:41:52.900
> 
> 标签：asp.net-mvc

我正在使用 MVC 中生成一个表单`@Html.BeginForm()`，但我的表单必须发布到我的确认操作，这将呈现确认视图。

确认操作很容易到达，但用户也会被重定向到那里，我的映射路线如下所示：

```
 routes.MapRoute(
        name: "RegisterConfirmationRoute",
        url: "register/confirmation",
        defaults: new { controller = "Account", action = "ConfirmRegistration" }
    ); 
```

我会以错误的方式解决这个问题吗？我看不到如何`@Html.BeginForm`使用 routeName 来呈现表单的 action 属性？

问候， 雅克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T14:46:30.043

你想要`Html.BeginRouteForm("RegisterConfirmationRoute")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:49:01.323

你试过了吗：

```
Html.BeginForm("ConfirmRegistration", "Account") 
```

我误解了你的问题吗？

# internet-explorer - 如何在 IE 之外更改 IE 的起始页？

> ID：11614800
> 
> 赞同：0
> 
> 时间：2012-07-23T14:42:02.513
> 
> 标签：internet-explorer, url

我下载了一些软件，这些软件显然将我的“主页 URL”（术语？）从谷歌更改为其他一些乱七八糟的搜索网站。当我进入工具 | 无论在 IE 中（我现在无法运行 IE）将它改回来，我不小心输入了“http:/www.google.com”（错过了一个斜杠）。所以现在 IE 根本不会运行 - 任何尝试使用它都会导致永无止境的错误消息说“找不到 'http:/www.google.com'

有没有办法在IE之外解决这个问题？我想我应该切换到 Firefox，但我所有的书签都在 IE 中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:51:43.363

也许您可以尝试使用如下命令行启动 IE

explorer.exe [http://www.google.com](http://www.google.com)

它将使用此地址而不是起始页打开一个新的资源管理器

否则，我认为起始页信息保存在注册表中（只需搜索“http:/www.google.com”，您可能会点击一个或多个具有明确名称的键

# crystal-reports - 如何在水晶报表中查找字符串的出现？

> ID：11614802
> 
> 赞同：0
> 
> 时间：2012-07-23T14:42:08.533
> 
> 标签：crystal-reports, count, find-occurrences

*我正在尝试计算（第一列已关闭）已关闭*记录的总数。但我得到像 1.00 和 0.00 这样的结果。

期望的结果：

![数数](../Images/c8dba4cecdae5c1bed7734b4d13946aa.png)

代码：

```
Local NumberVar str := 0; 
Local NumberVar strLen := count({@Status}); 
Local NumberVar i; 

For i := 1 To strLen Do ( 
  If instr(i, {@Status}, "Closed") <> 0 Then 
    str := str + 1; 
); 

If(str > 0 ) Then str 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:57:10.140

你有两个明显的选择：

1）使用评估表达式运行总计：`instr({@Status}, "Closed") <> 0`设置为计数 2）创建一个新公式`if instr({@Status}, "Closed") <> 0 then 1 else 0`，然后您可以对其进行总结（在公式中或使用“总结”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:56:20.950

你的公式应该是：

```
// formula's result might not always be 'Closed'
IIf( InStr({@Status}, "Closed") > 0, 1, 0 ) 
```

或者

```
// formula's result is clean
IIf( {@Status}="Closed", 1, 0 ) 
```

** 编辑 **

插入引用此公式的汇总字段。顺便说一句，这个公式不需要添加到画布中才能正常工作。

# scala - 优雅的AST模型

> ID：11614804
> 
> 赞同：11
> 
> 时间：2012-07-23T14:42:21.257
> 
> 标签：scala, compiler-construction, abstract-syntax-tree

我正在用 scala 编写一个玩具编译器。目标语言本身看起来像 scala，但它是一个开放的实验领域。

经过几次大型重构后，我找不到一个很好的方法来为我的抽象语法树建模。我想使用 scala 的模式匹配工具，问题是树在编译过程中携带移动信息（如类型、符号）。

我可以看到几个解决方案，我都不喜欢：

*   具有可变字段的案例类（我相信 scala 编译器会这样做）：问题是这些字段在编译的每个阶段都不存在，因此必须为空（或 Option'd）并且调试/写代码。此外，例如，如果我在输入阶段之后找到了一个 null 类型的节点，我很难找到错误的原因。

*   巨大的 trait/case 类层次结构：像 Node、NodeWithSymbol、NodeWithType 之类的东西……似乎很难编写和使用

*   用提取器完全手工制作的东西

我也不确定使用完全不可变的 AST 是否是一种好习惯，尤其是在没有隐式共享的 scala 中（因为编译器不知道不可变性），并且一直复制树可能会损害性能.

你能想出一个优雅的模式来使用 scala 强大的类型系统来模拟我的树吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T15:22:25.940

TL;DR 我更喜欢保持 AST 不可变，并在单独的结构（例如 Map）中携带类型信息之类的东西，可以由存储在 AST 中的 ID 引用。但没有完美的答案。

你绝不是第一个为这个问题而苦苦挣扎的人。让我列出一些选项：

1) 在每个阶段更新的可变结构。你提到的所有优点和缺点。

2）特征/蛋糕图案。可行，但昂贵（没有共享）而且有点丑陋。

3) 每个阶段都有一个新的树类型。在某些方面，这是理论上最干净的。每个阶段只能处理前一阶段为其生成的结构。加上同样的方法从前端一直到后端。例如，您可能在某个时候“脱糖”，并且拥有新的树类型意味着下游阶段甚至不必考虑通过脱糖消除的节点类型的可能性。此外，低级优化通常需要比原始 AST 低得多的 IR。但这也是很多代码，因为几乎所有内容都必须在每一步重新创建。这种方法也可能很慢，因为阶段之间几乎没有数据共享。

4) 用 ID 标记 AST 中的每个节点，并使用该 ID 来引用其他数据结构（地图和向量等）中的信息，这些数据结构包含为每个阶段计算的信息。在很多方面，这是我最喜欢的。它保持不变性，最大化共享并最小化您必须编写的“多余”代码。但是您仍然必须处理可能难以调试的“丢失”信息。它也没有 mutable 选项快，但比任何需要在每个阶段生成新树的选项都快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T15:16:09.890

我最近开始为一种小型语言编写一个玩具验证器，并且我正在使用[Kiama](http://code.google.com/p/kiama/)库进行解析器、解析器和类型检查器阶段。

> Kiama 是一个用于语言处理的 Scala 库。它可以方便地分析和转换结构化数据。该库支持的编程风格基于众所周知的形式语言处理范例，包括[属性语法](https://code.google.com/p/kiama/wiki/Attribution)、[树重写](https://code.google.com/p/kiama/wiki/Rewriting)、[抽象状态机](https://code.google.com/p/kiama/wiki/Machines)和[漂亮的打印](https://code.google.com/p/kiama/wiki/PrettyPrinting)。

我将尝试总结我的（相当有限的）经验：

*   [+] Kiama 提供了几个示例，主要贡献者通常会快速回复邮件列表中提出的问题

*   [+] 属性文法范式允许将节点的“不可变组件”（例如名称和子节点）和“可变组件”（例如类型信息）很好地分离

*   [+] 该库带有一个通用的重写系统，到目前为止，它涵盖了我所有的用例

*   [+] 该库，例如漂亮的打印机，为 DSL 和各种功能模式/方法/想法提供了很好的示例

*   [-] 学习曲线绝对陡峭，即使有示例和手头的邮件列表

*   [-] 以“纯功能”风格（参见[我的问题](https://groups.google.com/d/topic/kiama/85zhrefh91I/discussion)）实现解析阶段似乎很棘手，但混合方法（我还没有尝试过）似乎是可能的

*   [-] 属性语法范式和由此产生的关注点分离并没有使如何记录节点最终具有的属性变得明显（参见[我的问题](https://groups.google.com/d/topic/kiama/9wIdLfURPXs/discussion)）

*   [-] 有传言说，属性语法范式不会产生最快的实现

总结一下我的总结，我非常喜欢使用 Kiama，我强烈建议您尝试一下，或者至少看看示例。

（PS.我不隶属于Kiama）

# java - 从一个 jsp 页面到另一个页面执行 href 时会创建一个新会话，并且会话变量返回为 null

> ID：11614806
> 
> 赞同：2
> 
> 时间：2012-07-23T14:42:27.080
> 
> 标签：java, jsp, session-variables

在我的第一个 jsp 页面上 -

```
<%@ page language="java" %>
<%@ page import="java.io.*,java.util.*" %>
<html>
<head>
<style type="text/css">
body {
    font-family:verdana,arial,sans-serif;
    font-size:10pt;
    margin:10px;
    background-color:#ff9900;
    }
</style>

<%
   session.setAttribute( "theName", "abc" );
%>
<li><a href="http://localhost:8080/auto/second.jsp" target="content">click here!!</a></li><br />
</body>
</html> 
```

在 second.jsp 上，我有，

```
<%@ page language="java" %>
<%@ page import="java.io.*,java.util.*" %>
<html>
 <head>
Hello, <%out.print(session.getAttribute( "theName" )); %>
</table>
</body>
</html> 
```

但是这里会话变量“ `theName`”的值返回为空。我还在`<% out.print( session.getId()); %>`第一页和第二页上都做了一个，问题是返回了两个不同的会话 ID，例如 - `230EC6DA6ECD25BC96268942D0ACE5EB`（在第一页上） `C2399D151F0D6D6002D16A126EDDC9FB`（在第二页上）

这似乎是会话变量未成功传递的原因。我也试过把

```
<%@ page session="false" %> 
```

这样就不会在 second.jsp 中创建新会话。但是如果我`<%@ page session="false" %>`在 second.jsp 中使用，那么它会抛出 jasper 异常 -

```
Jul 23, 2012 5:23:47 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 32
<%out.print(session.getAttribute( "theName" ));
at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:93)
    at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
    at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:451)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:328)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:307)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:295)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:565)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:311)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:843)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:679)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1303) 
```

请建议我如何将会话变量从一个 jsp 页面传递到另一个页面。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:13:59.463

在我看来，无论出于何种原因，您的 JSP/servlet 引擎都希望对会话 ID 使用 URL 重写而不是使用 cookie。如果您使用[`encodeURL`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#encodeURL%28java.lang.String%29)输出到`second.jsp`页面的链接，例如：

```
<a href="<%=response.encodeURL("second.jsp")%>">second page</a> 
```

...您应该会发现它最终成为`second.jsp;jsessionid=longstringhere`.

现在，你可以`encodeURL`在任何地方使用，但我猜你宁愿使用 cookie。您需要检查 JSP/servlet 引擎的配置。在 Tomcat 中，[默认使用 cookie](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html)，但您可以检查您的`Context`元素以确保它没有`cookies="false"`上面或其他东西......

# java - 我的电磁 Java 应用程序的明智 OO 设计？（有点数学）

> ID：11614809
> 
> 赞同：0
> 
> 时间：2012-07-23T14:42:31.863
> 
> 标签：java, oop, inheritance

对于那些不知道这种事情的人。它基本上是我在这里搞乱的3D矢量关系......

我正在做一个小项目来进行有用的电磁计算，但我不知道如何设计它来为未来的使用和其他应用做准备。

最终我将有一些图形输出并制作一个 gui，但目前我只希望它是一个基于终端的程序。

目前我正在考虑开设一个名为

```
RadialForm 
```

这是用于身份的，并且该类中的任何内容都不会是组件形式。然后我会有另一堂课叫做

```
ComponentForm 
```

它将使用主要方法进行坐标转换的所有计算

```
setRectangular(i j k)
setCylindrical(i j k) 
setSpherical(i j k)
computeCurl(i j k) //not sure if these last two should be in another class so I gave them arguments 
computeDiv(i j k) 
```

稍后，我希望能够在 RadialFrom 和 ComponentForm 类上使用 Gauss 的 Stokes 和 Greens 理论，所以我认为这也应该是另一个类。我有一个想法，应该有某种继承结构，但我不确定决定什么去哪里。

此外，这两个类都将使用“发散”运算符进行操作，以从身份中获取卷曲和结果，并执行许多其他重要的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:11:24.627

这里的关键词是**分解**：不要试图将所有内容都放在一个（或在你的情况下 - 只是 2 个）类中，将每个单独的功能都放在单独的类中。这意味着您需要针对向量（点）以及可能针对每种算法的不同类。为了使您的设计更具可重用性，请考虑为类似任务（例如，算法）引入接口。

**OOP 在域区域对象**及其关系的建模方面也很强大。因此，请尝试放下您可能需要的域中的所有对象。但是请注意，有时（尤其是在科学程序中）您可能需要额外的类来操作现有的。这是你`ComponentForm`的好例子。

关于继承，一般规则是：如果你*不确定*，*就不要使用*它。在大多数情况下，接口或委托（取决于您的需要）是更好的选择。

# php - 需要帮助未定义的偏移错误

> ID：11614811
> 
> 赞同：-1
> 
> 时间：2012-07-23T14:42:39.713
> 
> 标签：php, wordpress

想知道是否有人可以帮助我。我一直在到处寻找答案，但似乎找不到答案。

我是 PHP 的新手，我对 WordPress 非常熟悉。我在默认的 211 主题中添加了三个新布局。我设想这项工作的方式是，如果有人选择了特定的布局，则会出现一个额外的侧边栏。所以我想出了以下内容（是的，我知道这可能不正确，但我自己做了它并且它有效......哈哈）

```
 $options = themeawesome_get_theme_options();
            $classes = $options['three-column' || 'three-column-left' || 'three-column-right'];
            if ( 'content' != $classes ) {
            get_sidebar('alt');
            } 
```

就像说它工作得很好，如果在主题选项面板中选择了这些选项中的任何一个，它就会显示 alt 侧边栏。

唯一的事情是我收到以下错误：

> 未定义的偏移量：第 8 行 1

第 8 行是上面的第二行代码。

谁能帮我消除这个错误。非常感谢您的任何帮助，并在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:47:17.993

您不能在数组中使用多个索引，就像您尝试使用的那样：

```
$classes = $options['three-column' || 'three-column-left' || 'three-column-right']; 
```

我不确定您要实现什么目标，因此对于如何解决它，我有多个答案。

首先，声明可用主题列表：

```
$themes = array('three-column', 'three-column-left', 'three-column-right'); 
```

如果你想要一个数组，`$classes`每个类，请尝试：

```
$classes = array();
foreach ($themes as $theme) {
    if (isset($options[$theme])) {
        $classes = $options[$theme]; 
    }
} 
```

如果您想获得“第一个可用主题”，请尝试：

```
$classes = '';
foreach ($themes as $theme) {
    if (isset($options[$theme])) {
        $classes = $options[$theme];
        break;
    }
} 
```

因为您遵循 if-statement ( `if ('content' != $classes)`) 正在检查单个字符串，所以我的第二个示例可能适合您的需要。

# python - 安全的原子文件复制操作

> ID：11614815
> 
> 赞同：17
> 
> 时间：2012-07-23T14:43:12.693
> 
> 标签：python, concurrency

我需要将一个文件从一个位置复制到另一个位置，如果该文件已经存在于目的地（没有覆盖），我需要抛出一个异常（或至少以某种方式识别）。

我可以先用 os.path.exists() 检查，但在检查和复制之间的短时间内不能创建文件是非常重要的。

有没有一种内置的方法可以做到这一点，或者有没有办法将一个动作定义为原子的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-22T14:13:46.550

事实上，**只要所有参与者都以相同的方式***执行*此操作，就可以自动安全地执行此操作。[它是对无锁打鼹鼠算法](http://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-697.pdf#page=66)的改编，而且并非完全无关紧要，因此请随意选择“否”作为一般答案；）

 **# 该怎么办

1.  检查文件是否已经存在。如果有就停止。
2.  [生成唯一 ID](https://docs.python.org/2/library/uuid.html#uuid.uuid4)
3.  使用临时名称将源文件复制到目标文件夹，例如`<target>.<UUID>.tmp`.
4.  重命名^(†</sup> 副本`<target>-<UUID>.mole.tmp`。)
5.  [查找与该模式匹配的任何其他文件](https://docs.python.org/2/library/glob.html) `<target>-*.mole.tmp`。
    *   如果他们的 UUID 比你的大，[尝试删除它](https://docs.python.org/2/library/os.html#os.remove)。（如果它消失了，请不要担心。）
    *   如果他们的 UUID 比你的少，尝试删除你自己的。（同样，如果它消失了，请不要担心。）从现在开始，将他们的 UUID 视为您自己的。
6.  再次检查目标文件是否已存在。如果是这样，请尝试删除您的临时文件。（如果它消失了，请不要担心。请记住，您的 UUID 可能在第 5 步中已更改。）
7.  如果您尚未尝试在步骤 6 中将其删除，请尝试将临时文件重命名为其最终名称`<target>`. （如果它消失了，请不要担心，只需跳回第 5 步。）

你完成了！

# 这个怎么运作

想象一下每个候选源文件都是一个从洞里出来的鼹鼠。到一半时，它会停下来，将所有竞争的鼹鼠打回地面，然后检查是否没有其他鼹鼠完全出现。如果你在脑海中思考这个问题，你应该会发现只有一颗痣会完全摆脱它。为了防止这个系统[活锁](https://en.wikipedia.org/wiki/Deadlock#Livelock)，我们添加了一个总排序，哪个鼹鼠可以敲哪个。砰！~~ 博士论文 ~~ 无[锁算法](https://en.wikipedia.org/wiki/Non-blocking_algorithm#Lock-freedom)。

^(†</sup> 第 4 步可能看起来没有必要——为什么不首先使用该名称？但是，另一个进程可能会在第 5 步中“采用”您的~~ 摩尔 ~~文件，并使其在第 7 步中胜出，因此您不要仍然写出内容，这一点非常重要！同一文件系统上的重命名是原子的，因此第 4 步是安全的。)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-23T14:46:04.717

没有办法做到这一点；文件复制操作永远不是原子的，也没有办法制作它们。

但是您可以使用随机的临时名称编写文件，然后*重命名*它。重命名操作必须是原子的。~~如果文件已经存在，重命名将失败，您将收到错误消息。~~

**[EDIT2]** `rename()`只有在同一个文件系统中执行时才是原子的。安全的方法是在与目标相同的文件夹中创建新文件。

**[编辑]**重命名是否总是原子的以及关于覆盖行为的讨论很多。所以我挖了一些资源。

在 Linux 上，如果目标存在并且源和目标都是文件，那么目标会被静默覆盖（[​​手册页](http://linux.die.net/man/2/rename)）。所以我错了。

但是`rename(2)`如果出现问题，仍然保证原始文件或新文件仍然有效，因此操作是原子的，因为它不会损坏数据。从某种意义上说，它不是原子的，它可以防止两个进程同时进行相同的重命名，并且您可以预测结果。一个会赢，但你不知道哪个。

在 Windows 上，如果另一个进程当前正在写入文件，如果您尝试打开它进行写入，则会出现错误，因此这里是 Windows 的一个优势。

如果您的计算机在将操作写入磁盘时崩溃，文件系统的实现将决定有多少数据被损坏。应用程序对此无能为力**。**所以停止抱怨了:-)

也没有其他方法可以更好地工作，甚至与此方法一样好。

您可以改用文件锁定。但这只会使一切变得更加复杂并且不会产生额外的优势（除了更复杂，有些人出于某种原因确实认为这是一个巨大的优势）。当您的文件位于网络驱动器上时，您会添加很多不错的角落案例。

如果文件已经存在，您可以使用会使函数失败`open(2)`的模式。`O_CREAT`但这不会阻止第二个过程删除文件并编写自己的副本。

或者您可以创建一个锁定目录，因为创建目录也必须是原子的。但这也不会让你买太多。您必须自己编写锁定代码，并且绝对 100% 确保您真的，真的总是在发生灾难时删除锁定目录 - 这是您做不到的。**

# ios - iPhone app UI自动化测试设计

> ID：11614822
> 
> 赞同：2
> 
> 时间：2012-07-23T14:43:25.847
> 
> 标签：ios, automation, ui-automation, ios-ui-automation

嗨自动化/iOS专家，

我们最近推出了一个新的 iPhone 应用程序项目，并希望使用 Apple 的 UIAutomation Instruments 自动化一些基本的验收测试。现在我们有一个非常基本的框架来完成这项任务。该框架简单地将Apple提供的底层JS函数封装在Java中（提供一些调试能力），并通过Junit驱动测试。测试在 iPhone 模拟器中运行。

所以背景是 Instruments + Eclipse + Java + Junit + iPhone Simulator。

在编写测试时，我发现测试受应用程序“状态”的影响很大。例如，该应用程序在首次运行时会显示某种“使用条款”页面，但在 iPhone 模拟器重置之前不会再次显示。用户接受“使用条款”后，将被带到“主页”页面，她可以在其中输入一些搜索条件并点击“搜索”并进入搜索结果页面。然后她可以被带到“查看详细信息”页面。

TOU -> 首页 -> 搜索结果 -> 查看详情。

请记住，这只是我真实应用程序的一个非常简化的版本。

现在问题来了：为了自动测试视图细节功能，我的测试是否应该通过前面的所有步骤（假设应用程序总是重新启动而没有保存任何状态）？或者我的测试应该假设一些先决条件（比如假设我的应用程序位于“搜索结果”中的“查看详细信息”测试）？

请说出你的理由。对不起，如果我的英语不是我的母语，很难理解。

谢谢！

文斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:12:38.473

"Pre-conditions" / "known baseline" / "known state" are golden for automation. Even more so for UI testing since they have more variations that can cause test failures for issues unrelated to what your test was doing.

So from an automation perspective - go directly to the 'View Detail' test. The majority of your automated test scripts will be in those types of functional areas. TOU, etc. are one-time per reset/install. So two options:

1.  First run an automated script to clear the TOU and exit, followed by all other tests that deal with home page, searching, etc. Or...
2.  Clear the TOU *manually*, followed by all other tests.
3.  Bonus option: you could also test that the TOU *doesn't appear more than once* per reset, since it shouldn't. That could be first and second test you always run each time. Then run the remaining tests.

If your automated always rely on the TOU appearing, then after the first test, the others will fail since the TOU won't appear until the next reset/test cycle. You could put a 'handler' at the start of all your automated tests to conditionally manage the TOU page. In this situation, I would go with option #1 above.

# wpf - 获取数据网格中的所有单元格

> ID：11614833
> 
> 赞同：2
> 
> 时间：2012-07-23T14:44:09.627
> 
> 标签：wpf, wpfdatagrid

有没有办法获取 DataGrid 中所有单元格的可迭代集合，无论它们是否被选中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:33:48.803

如果您的意思是`DataGridCell`s，您可以使用 Vincent Sibals 辅助函数来遍历所有行`DataGrid.Items`和列`DataGrid.Columns`。

```
public DataGridCell GetCell(int row, int column)
{
    DataGridRow rowContainer = GetRow(row);

    if (rowContainer != null)
    {
        DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(rowContainer);

        // try to get the cell but it may possibly be virtualized
        DataGridCell cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
        if (cell == null)
        {
            // now try to bring into view and retreive the cell
            DataGrid_Standard.ScrollIntoView(rowContainer, DataGrid_Standard.Columns[column]);
            cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
        }
        return cell;
    }
    return null;
}

public DataGridRow GetRow(int index)
{
    DataGridRow row = (DataGridRow)DataGrid_Standard.ItemContainerGenerator.ContainerFromIndex(index);
    if (row == null)
    {
        // may be virtualized, bring into view and try again
        DataGrid_Standard.ScrollIntoView(DataGrid_Standard.Items[index]);
        row = (DataGridRow)DataGrid_Standard.ItemContainerGenerator.ContainerFromIndex(index);
    }
    return row;
} 
```

**编辑**

如果 grid 是您的 DataGrid，您将获得所有 DataGridCells 的列表，如下所示：

```
List<DataGridCell> allCellList = new List<DataGridCell>();

for (int i = 0; i < grid.Items.Count; i++)
{
    for (int j = 0; j < grid.Columns.Count; j++)
    {
        allCellList.Add(grid.GetCell(i, j));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:30:07.717

为了方便（不一定是性能），您可以将**DataGrid**中的数据（包括所有列和行的所有单元格）填充到单个**DataTable**中，它提供了帮助操作数据的功能，例如迭代、过滤、排序等.

```
// Populate a DataGrid to a DataTable
DataTable dt; 
DataView dv = (DataView) myDataGrid.DataSource;
dt = dv.Table.DataSet.Tables[0]; 
```

随后，您可以在短短一行代码中使用泛型将任何特定列转换为集合或列表。请参阅[how-do-you-convert-a-datatable-into-a-generic-list](https://stackoverflow.com/questions/208532/how-do-you-convert-a-datatable-into-a-generic-list)：

```
List<DataRow> myList = dt.Rows.Cast<DataRow>().ToList(); 
```

它使您免于编写循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-19T16:14:14.083

要修复该行引发的错误...

```
 DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter> 
        (rowContainer); 
```

添加此例程：

```
private T GetVisualChild<T>(DataGridRow rowContainer)
    {
        throw new NotImplementedException();
    } 
```

# asp.net - 从视图中的 TempData 中提取数据

> ID：11614838
> 
> 赞同：0
> 
> 时间：2012-07-23T14:44:43.740
> 
> 标签：asp.net, asp.net-mvc

我正在尝试从 TempData 中提取视图中的 id 并将其放置在 Html.Hidden 中。当我使用 Debug 查看 TempData 的信息时，它确实显示了所有值，但 Html.Hidden 为我的 id 返回一个空值。

```
 @Html.Hidden("idMatch", @TempData["leMatch,idMatch"]) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:48:02.523

你不需要`@`之前的`TempData`。

```
@Html.Hidden("idMatch", TempData["leMatch,idMatch"]) 
```

编辑：即使在`@`前面`TempData`，它也不会显示任何错误，并且会正确呈现隐藏元素。

TempData 的生命周期很短，您应该只在当前和后续请求期间使用它。`Session`对象是对象的后备存储，`TempData`它比常规会话更快地被销毁，即在后续请求之后立即销毁。

我猜你`TempData`的情况是空的。这就是它在隐藏字段中呈现为空值的原因。

我强烈建议您使用强类型**ViewModels**而不是 this **`magical`(dynamically typed)** `TempData/Viewdata`。然后您可以使用`HiddenFor`HTML 辅助方法

```
@model CustomerViewModel

@using(Html.BeginForm()){
  @Html.HiddenFor(x => x.CustomerID)

} 
```

# python - 需要在没有 python 的环境中运行 python 脚本

> ID：11614850
> 
> 赞同：1
> 
> 时间：2012-07-23T14:45:29.263
> 
> 标签：python, unix, executable

我需要在没有 python 的环境中运行 python。是否可以在 Unix 环境中将 python 作为可执行文件执行，如 HP-UX、IBM-AIX、Solaris、Linux 等......

现在的目标操作系统是 AIX ......因为它不支持 python 并且安装很困难......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:52:39.230

我使用[http://www.pyinstaller.org/](http://www.pyinstaller.org/) 在 ubuntu 中创建了一个可执行文件。看看他们的[手册](http://www.pyinstaller.org/export/d3398dd79b68901ae1edd761f3fe0f4ff19cfb1a/project/doc/Manual.html?format=raw#linux)，它还有一个很酷的功能，就是输出一个文件`--onefile`。我的第一选择是，`freeze`但是当我使用一些外部模块时可执行文件无法运行 - 我无法解决它，我发现 pyinstaller 非常适合我。

# java - 休眠查询：新的 DTO 子句不起作用

> ID：11614854
> 
> 赞同：0
> 
> 时间：2012-07-23T14:45:37.477
> 
> 标签：java, hibernate, dto

**用户实体**

```
class User{
int id;
@OneToMany
Set<Role> roles;
} 
```

：用户类有很多我没有写的其他细节。

**DTO**

```
class DTO{
int id;
Set<Role> roles;
DTO(int id, Set<Role> roles){
  this.id = id;
  this.roles= roles;
 }
} 
```

**询问**

```
hibernateTemplate.find("select new DTO(u.id, r ) from "+User.class.getName()+ " u inner join u.roles as r"); 
```

**问题**：抛出找不到有效的构造函数。

**通过以下构造函数修改，上述查询有效：**

```
DTO(int id, Role role){
      this.id = id;
     } 
```

**问题**：但现在它为同一用户提供了多个 DTO 记录，等于该用户拥有的角色数量。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:52:22.273

由于您需要多行来创建单个 DTO 实例，因此您不能在查询中使用 new 运算符。相反，您必须自己创建 DTO。这样的事情应该做：

```
Map<Long, DTO> dtosById = new LinkedHashMap<Long, DTO>();
List<Object[]> rows = hibernateTemplate.find("select u.id, r from User u inner join u.roles as r");
for (Object[] row : rows) {
    Long id = (Long) row[0];
    Role role = (Role) row[1];
    DTO dto = dtosById.get(id);
    if (dto == null) {
        dto = new DTO(id);
        dtosById.put(id, dto);
    }
    dto.addRole(role);
}
List<DTO> dtos = new ArrayList<DTO>(dtosById.values()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-19T18:39:09.220

如果你想让事情变得更简单，你会喜欢我为那个用例创建的[Blaze-Persistence Entity-Views 。](https://github.com/Blazebit/blaze-persistence#entity-view-usage)您基本上将 JPA 实体的 DTO 定义为接口并将它们应用于查询。它支持映射嵌套的 DTO、集合等，基本上是您所期望的一切，最重要的是，它将提高您的查询性能，因为它会生成仅获取 DTO 实际需要的数据的查询。

您的示例的实体视图可能如下所示

```
@EntityView(User.class)
interface UserDto {
  @IdMapping Integer getId();
  List<RoleDto> getRoles();
}
@EntityView(Role.class)
interface RoleDto {
  @IdMapping Integer getId();
  String getName();
} 
```

查询可能看起来像这样

```
List<UserDto> dtos = entityViewManager.applySetting(
  EntityViewSetting.create(UserDto.class),
  criteriaBuilderFactory.create(em, User.class)
).getResultList(); 
```

# sql-server - 发生了什么弄乱了我的 GROUP BY 查询？

> ID：11614857
> 
> 赞同：0
> 
> 时间：2012-07-23T14:45:46.433
> 
> 标签：sql-server, query-optimization

这是我的查询：

```
select top 60 * from ABC_Sessions (nolock)   
where EntryDate > '06-22-2012 23:59:59'
GROUP BY TargetedID 
```

然后它给了我这个错误：

> 消息 8120，级别 16，状态 1，行 1 列“BI_Sessions.SessionID”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:48:11.783

查询中的`*`扩展到表中的所有列。

```
select top 60 TargetedID, SessionID, ...
from ABC_Sessions (nolock)
where EntryDate > '06-22-2012 23:59:59'
GROUP BY TargetedID 
```

`SessionID`正如错误消息所述，选择没有聚合函数（例如）是无效的`MAX`。

这会起作用：

```
select top 60 TargetedID, MAX(SessionID) AS MaxSessionID
from ABC_Sessions (nolock)
where EntryDate > '06-22-2012 23:59:59'
GROUP BY TargetedID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:48:27.763

您使用了星号`*`，但没有按表格中的列分组`abc_sessions`。在没有任何聚合函数的情况下使用`GROUP BY`对我来说看起来很奇怪。

你想看见什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:53:54.443

这是一个理论上的问题：正如错误所说，你不能选择你没有的东西。因此，当您使用简单的 SELECT / FROM / WHERE 查询时，您的 FROM 表中的所有内容都可以供您选择。

但是，如果您使用 GROUP BY，则您的视野会缩小：您在 GROUP BY 中未使用的任何内容都将被丢弃（三思而后行，当您明确要求对这些行进行分组时，从多行中选择数据是没有意义的）。

也许你混淆了[GROUP BY](http://www.devguru.com/technologies/t-sql/7080.asp)和[ORDER BY](http://www.devguru.com/technologies/t-sql/7082.asp)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:07:52.363

您收到此错误的原因是您没有在您的 select 语句中使用 sum/average/count/max/min 或任何类似函数。一旦您使用其中任何一个，您将不会收到此错误。例如：
从 ABC_Sessions (nolock) 中选择前 60 个 TargetedID, MAX(EntryDate) where EntryDate > '06-22-2012 23:59:59' GROUP BY TargetedID

# php - MySQL 服务器版本

> ID：11614862
> 
> 赞同：1
> 
> 时间：2012-07-23T14:46:04.110
> 
> 标签：php, mysql, insert

我有这个问题，在我的网站上我尝试在个人资料页面上发表评论，但是当我点击提交时，它说

```
You have an error in your SQL syntax; check the manual that corresponds to 
your MySQL server version for the right syntax to use near 'to, msg, author,time)
VALUES ('52', Test','Sakaio911', NOW())' at line 1 
```

我所做的只是将评论插入到数据库中，您可以看到哪些列。是导致它的 NOW() 吗，因为我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:48:37.493

错误消息将您指向“to”列名。根据文档，该名称被保留为关键字。您可能想要重命名该 col，或者您必须做一些体操才能使用该表。

[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:54:22.333

当您不想重命名列名时，必须在上下文中通过**`对其进行转义**

```
 ... `to`, msg, author, time) VALUES ('52', 'Test','Sakaio911', NOW()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:49:52.220

确保你有一个分号用于 sql 查询和 php 代码行本身。一个分号在 " " 标记内，另一个分号在外面以终止代码行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:50:44.800

用反引号包裹字段名称......例如`to`，`msg`等。这应该可以解决该特定问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:54:20.983

> ('52', 测试','Sakaio911', NOW())'

insert 语句使用逗号作为字段名称及其值的分隔符。您似乎在**'52'**和**Test'**之间遗漏了一些东西。您是在**Test'**之前缩短单引号还是应该像这样将整个字符串放在双引号中？**“这个”**。

# c# - 从 for 循环更新进度条

> ID：11614865
> 
> 赞同：0
> 
> 时间：2012-07-23T14:46:17.797
> 
> 标签：c#, winforms

我有一个进度条，我想更新 for 循环中的值，我怎样才能有相等的数据更新？

例如，如果循环的计数为 10 或计数为 1000，我该如何自动执行此操作？

仅供参考，进度条的最小值为 0，最大值为 100

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:48:40.603

您可以调整进度条的最大值以匹配您的数据大小，也可以相应地缩放：

```
for (int i = 0; i < count; i++) {
  // do something
  progressBar1.Value = i * progressBar1.Maximum / count;
  Application.DoEvents();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:49:44.303

将当前值（我们称之为 x）除以最大值，然后将结果乘以 100。

```
double progress = (x / max) * 100; 
```

但是要小心，如果 x 和 max 是整数，那么您最终将进行整数除法而不是浮点除法。在这种情况下，您可能需要将一个或两个转换为 double 或 float。

# c# - 从视图模型调用 UIElement 函数

> ID：11614872
> 
> 赞同：1
> 
> 时间：2012-07-23T14:46:52.333
> 
> 标签：c#, xaml, mvvm, windows-8, uielement

我正在开发一个使用媒体组件的 MVVM C#​​ Metro 应用程序，特别是利用播放功能。

通常，您似乎会绑定属性，但是我需要进行诸如此类的调用`MediaElement.Play(source);`。到目前为止，我想出的最佳解决方案是从视图模型中触发一个事件，该事件由后面的代码处理。

这实际上是最佳实践，还是有更复杂的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:26:08.690

有一系列有用的文章`MSDN`可能会帮助您以更有效的方式做到这一点：

*   [多媒体概述](http://msdn.microsoft.com/en-us/library/aa970915)
*   [音频和视频操作方法主题](http://msdn.microsoft.com/en-us/library/ms754187)

*注意：*这些仍然是 .Net 4 示例，但我敢打赌，在 Windows 8 及其所有增强功能上运行它不需要太多努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:43:08.017

我曾经尝试过使用 MVVM 方式在 WPF 中制作媒体播放器，根据我的经验，我觉得以 MVVM 方式制作它会很痛苦。如果它比始终坚持使用 MVVM 更简单和更快，我建议在后面编写代码，如果您希望它看起来更干净，您可以稍后使用一些依赖属性将它作为用户控件分开。无论如何，关于媒体播放，您可以“也”做的是在您的视图模型中保留一个媒体播放器（[媒体播放器](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer.aspx)）并创建一个指向该媒体播放器的视频画笔并使用它在视图中显示您的视频。可以使用矩形或您为其设置绘图笔刷的任何其他元素。由于您的媒体播放器是视图模型，现在您可以播放、停止、搜索等

像这样的东西，

```
 var player = new MediaPlayer();
        var myVideo = new VideoDrawing { Rect = new Rect(0, 0, 1, 1), Player = player  };
        var dBrush = new DrawingBrush(myVideo);

        // Use drawing brush to fill a rectangle

        rectangle.Fill = dBrush; 
```

# python - iBrowser - 下载 ibrowser.php 而不是弹出窗口

> ID：11614874
> 
> 赞同：1
> 
> 时间：2012-07-23T14:46:54.300
> 
> 标签：python, django, apache, tinymce

首先我需要说，我对所有那些有点高级的编程和网络事物都很陌生。

好的，我从老板那里收到了一项任务，即在我们的一个客户网站上的 TinyMCE（在 Django 中使用）中放置一些简单的图像工具。

我尝试了一些插件（如 Filebrowser），但它们都没有正常工作（也许这里的 Django 版本不兼容......哦，没关系）。

**[问题]**
所以我把 iBrowser 放到 TinyMCE 中，我在 TinyMCE 中有正确的图标，但是当我点击它时 - 起初一些新窗口正在加载，但随后窗口关闭，Firefox 询问我是否更喜欢查看或下载“ibrowser.php”文件...
**[/问题]**

我搜索了一下，发现问题可能出在 Apache 中，我应该在那里配置一些东西。但是...我真的不知道在哪里以及如何...

我已经找到了这两个问题，这可能会对我有所帮助：

[问题1](https://stackoverflow.com/questions/5591650/browser-downloads-php-file-from-apache-web-server)

[问题2](https://stackoverflow.com/questions/6245895/apache2-on-ubuntu-php-files-downloading)

但是在我的项目文件夹中没有像“php5.conf”甚至“*.conf”这样的文件。

所以……请帮忙？

我当然可以把我的代码中的一些行放在这里，告诉我你想要什么:)

# c# - T 不包含 RowKey 的定义

> ID：11614875
> 
> 赞同：5
> 
> 时间：2012-07-23T14:46:54.567
> 
> 标签：c#, .net, generics, compiler-errors

我正在尝试创建一个通用类：

```
public class ClassName<T>
{
    public T AccessEntity(string id)
    {
        return (from e in ServiceContext.CreateQuery<T>(TableName)
                where e.RowKey == id // error here!
                select e).FirstOrDefault();
    }
} 
```

在此代码中，我收到以下错误：

> T 不包含 RowKey 的定义

但是在运行时将替换 T 的参数具有 RowKey 的定义。可能是因为编译器在编译时没有在 T 中获得 RowKey 的定义，这就是我收到此错误的原因。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T14:50:23.397

为此，您需要一个接口约束：

```
interface IHazRowKey {
     string RowKey { get; } 
} 
```

并指定此限制：

```
public class classname<T> where T : IHazRowKey {...} 
```

并`: IHazRowKey`在每个实现上指定：

```
public class Foo : IHazRowKey {....} 
```

现有`RowKey`成员应该匹配它（假设它是一个属性，而不是一个字段），因此您不需要添加任何其他额外代码。如果它实际上是一个字段（它不应该是，IMO），那么：

```
public class Foo : IHazRowKey {
    string HazRowKey.RowKey { get { return this.RowKey; } }
    ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-23T14:50:14.410

C++ 模板和 C# 泛型之间有一个主要区别：传递什么类来实例化泛型并不重要，如果编译器`T`在编译泛型类或方法时不知道某个方法，它会给你一个错误。这是因为 C# 需要能够将通用代码与其实例化位置分开编译（请记住，C# 中没有标头）。

您可以定义一个接口，并对其进行限制`T`，以便在泛型中使用属性和方法。添加`RowKey`到您的界面，并添加`where T : myinterface`到您的通用声明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T14:49:43.827

您需要定义[约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)来解决这个问题：

```
public interface IHasRowKey
{
   string RowKey {get;}
}

public class classname<T> where T : IHasRowKey
{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T14:49:07.943

```
class YourClass // or extract an interface
{
    public string RowKey { get; set; }
}

class YourGeneric<T> where T : YourClass
{
    // now T is strongly-typed class containing the property requested
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-25T01:56:09.827

我的案例不能使用接口来包含 RowKey，因为我有两个具有不同属性和方法的类。我不能只是将它们合并并将这些属性和方法放入一个包装器接口或类中，因为它失去了使用泛型类的目的。我的解决方案是使用泛型类的反射。例如：

```
public class ClassName<T> {
    private T _genericType;
    public ClassName(T t) {
        _genericType = t;
    }

    public void UseGenericType() {
        // Code below allows you to get RowKey property from your generic 
        // class type param T, cause you can't directly call _genericType.RowKey
        PropertyInfo rowKeyProp = _genericType.GetType().GetProperty("RowKey");
        if(rowKeyProp != null) { // if T has RowKey property, my case different T has different properties and methods
            string rowKey = rowKeyProp.GetValue(_genericType).ToString();
            // Set RowKey property to new value
            rowKeyProp.setValue(_genericType, "new row key");
        }
    }
} 
```

这是对 PropertyInfo 类的引用[http://msdn.microsoft.com/en-us/library/System.Reflection.PropertyInfo_methods(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/System.Reflection.PropertyInfo_methods(v=vs.110).aspx)

# iphone - indexPath.row 在 didSelectRowAtIndexPath 中返回随机单元格 TextLabel

> ID：11614879
> 
> 赞同：0
> 
> 时间：2012-07-23T14:47:09.167
> 
> 标签：iphone, sqlite, uitableview, nspredicate, didselectrowatindexpath

我有一个由 SQLite 数据库填充的 UITableView。我添加了基于截面的分组，使用sectionIndextitlesforeview View委托方法，现在选择单元格时，IndexPath的字符串与所选单元格中的文本不同。

我的代码是这样工作的。

1.  我创建了一个数组来保存 SQLite 数据库中的业务。
2.  我按字母顺序对该数组进行排序。
3.  我只使用数据库中企业以字母开头的字母创建一个字母数组。
4.  我使用该 Array 和 NSPredicate 来提供 Grouped Header 视图，这些视图按业务的首字母按字母顺序进行分组。
5.  Selected Row 被写入 NSUserDefaults 文件，并推送一个 View Controller (iPhone)，或者为该键添加一个 Observer (iPad)。

不幸的是，由于添加了标题视图，indexPath.row 现在返回的字符串与所选单元格的 TextLabel 的字符串完全不同，因此显示了不同的业务信息。

以下是主数组的重要代码块。

```
- (void)viewDidLoad
{
 // Lots of code...
 arrayName = [[NSMutableArray alloc] init];
 NameSet = [[NSMutableSet alloc] init];
 sortedArray = [arrayName sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

 alphabet = [[NSMutableArray alloc] init];
 [alphabet addObject:@"{search}"];
 for (int i=0; i<[sortedArray count]-1; i++)
 {
  char alphabetUni = [[sortedArray objectAtIndex:i] characterAtIndex:0];
  NSString *uniChar = [NSString stringwithFormat:@"%c", alphabetUni];
  if (![alphabet containsObject:uniChar])
  {
    [alphabet addObject:uniChar];
  }
 }
 }

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
  return [alphabet count];
 }

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
 NSInteger rows = 0;

 NSString *alpha = [alphabet objectAtIndex:section];

 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alpha];
 businesses = [sortedArray filteredArrayUsingPredicate:predicate];

 if ([tableView isEqual:self.searchDisplayController.searchResultsTableView]){
    rows = [self.searchResults count];
 }
 else {
    rows = [businesses count];
 }

  return rows;
 }

 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection (NSInteger)section
 {
  return [alphabet objectAtIndex:section];
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
  NSString *CellIdentifier = @"Cell";
  cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc]
             initWithStyle:UITableViewCellStyleDefault
             reuseIdentifier:CellIdentifier];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
  }

  NSString *alpha = [alphabet objectAtIndex:indexPath.section];
  NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alpha];
  businesses = [sortedArray filteredArrayUsingPredicate:predicate];

  if ([tableView isEqual:self.searchDisplayController.searchResultsTableView]){
    cell.textLabel.text =
    [self.searchResults objectAtIndex:indexPath.row];
  }
  else{
        NSString *cellValue = [businesses objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;
  }
  return cell;

  }

  - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
 NSString *selected = nil;

 if (tableView == self.tableView)
 {
    selected = [businesses objectAtIndex:indexPath.row];
 }
 else if (tableView == searchDis.searchResultsTableView)
 {
    selected = [filteredData objectAtIndex:indexPath.row];
 }

 [def setObject:selected forKey:@"NameChoiceDetail"];

 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
 {
    [self performSegueWithIdentifier:@"NameDetailPush" sender:self];

 }
 } 
```

// 请原谅我写得很糟糕的代码。我只使用了 Objective-C 4 个月，而编程大约 8 个月。任何建议/优化都会被适当记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:57:15.530

您的表视图使用部分，但您的实现`tableView:didSelectRowAtIndexPath:`不评估索引路径的部分。所以代码缺少一些东西。

此外，我发现您对`businesses`变量（它可能是一个实例变量）的使用非常奇怪。它被分配了一个值，`tableView:cellForRowAtIndexPath:`但没有被分配，`tableView:didSelectRowAtIndexPath:`即使它在那里使用。因此，后者的结果取决于最后显示的表格单元格，因此它取决于滚动用户交互。这可能是结果看起来相当随机的原因。

# objective-c - CoreData 和 NSTreeController

> ID：11614880
> 
> 赞同：2
> 
> 时间：2012-07-23T14:47:10.853
> 
> 标签：objective-c, cocoa, core-data, nstreecontroller

目前，我坚持使用作为核心数据后端的 nstreecontroller。我的问题是，如果我编辑字段或添加新行，则不会触发重新排列。

结构：

*   NSTreeController 配置为开启准备内容并使用延迟获取。控制器绑定到 appDelegate.managedObjectContext 和 appDelegate.mySortDescriptor（这是一个返回数组的函数，其中包含 nssortdescriptor）。
*   Outlineview 将其列绑定到 treecontroller.arrangedObjects.name。Outlineview 也处于 SourceList 模式。
*   一个名为“Item”的实体，它与 Item 具有一对多关系（子级）和与 Item 的一对一关系（父级）。当然，还有一个名为“name”的字段保存显示值。
*   两个存储。一个只保存在内存中，一个是默认的。临时存储用于设置根实体（我不希望它们被存储，因为它们只是“视觉”）

直到这里一切都很好，除了：

*   在启动时 sortdescriptor 被读入但未执行（我称自己为重新排列函数）
*   核心数据无修改触发重排方法

我已经尝试通过以下结果自行解决问题：

*   删除“使用延迟提取”将解决问题 o_O 但谁想要呢？！
*   在 outlineView:setObjectValue:forTableColumn:byItem: (outlineview 数据源) 中调用重新排列将解决问题。但我真的不明白为什么会调用它（我正在使用 coredata，所以它不应该被调用？）。另一方面，调用重新排列经常会再次弄乱排序（例如，如果您保存一个未更改其值的单元格）

这就是为什么我告诉自己你必须面对你做错事的事实:)

我真正想要的是以下内容：

*   核心数据后端
*   Outlineview 总是排序的（用户不能改变它）
*   跳过根对象的保存
*   减少工作总是受欢迎的

非常感谢和最好的问候，马蒂厄里奥洛

PS：提示也很受欢迎

# java - 为什么 JSP out.print() 函数不能正常工作

> ID：11614886
> 
> 赞同：0
> 
> 时间：2012-07-23T14:47:25.643
> 
> 标签：java, html, jsp, printing

我一直在使用 JSP+Java+Html，并且在 for 循环中遇到了 out.print() 函数的问题。我的函数`getGeneAvailableTaxonomies()`返回一个整数列表（类型为`List<Integer>`），我想在界面中打印这些数字。

这是我的代码：

```
 for(Integer i : ApplicationExtender.getApplicationExtender(application).getGeneAvailableTaxonomies()) 
        {
          out.print(String.format("<option value=\"%1$d\">%2$s</option>", i, TaxonId.getOrganismFromId(i)));
        } 
```

doce`%1$d`应该代表第 i 个整数值，而`%2$s`应该代表另一个参数，即分类 id 值作为字符串。

但是，不幸的是，这就是出现的情况：

![在此处输入图像描述](../Images/2308ed1d670ea66b907748c059e92168.png)

虽然我想看到类似的东西：

![在此处输入图像描述](../Images/a7a16d8f7d6f9edaa082a1f7922356ed.png)

我的 out.print() 函数调用肯定有错误……但是出了什么问题？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:02:20.077

您不需要格式字符串中的“$”。您可能知道，使用 scriptlet 并不是进行 Java Web 开发的好方法。我认为使用 JSTL 要好得多，因为您不会在 JSP 中将 Java 代码与标记混合在一起。

**编辑：**正如我之前所说，printf 方法不存在于**out对象中，因为它是一个 JspWriter 并且 JspWriter 不继承自 PrintWriter（具有 printf）。**对不起。所以，试试这个（它对我有用）。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <select>
            <%
                String[] strings = new String[]{ "aaa", "bbb", "ccc", "ddd" };

                for ( int i = 0; i < strings.length; i++ ) {
                    out.print( String.format( "<option value='%d'>%s</option>", i, strings[i] ) );
                }
            %>
        </select>
    </body>
</html> 
```

如果您想像在 Servlets 中一样使用 PrintWriter，那么这将起作用：

```
<%@page import="java.io.PrintWriter"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <select>
            <%
                PrintWriter writer = new PrintWriter( out );
                String[] strings = new String[]{ "aaa", "bbb", "ccc", "ddd" };

                for ( int i = 0; i < strings.length; i++ ) {
                    writer.printf( "<option value='%d'>%s</option>", i, strings[i] );
                }
            %>
        </select>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:55:35.547

尽我所能尝试这个：

```
 String option = "<option value=\""+d+"\">"+s+"</option>";    
        out.print(option); 
```

使用`String.format`

```
out.print(String.format("<option value=\"%d\">%s</option>", i, TaxonId.getOrganismFromId(i))); 
```

**`TaxonID.getOrganismFromId(i)`正如您在返回 的评论中提到的那样进行了**更新**，因此您的原始代码中`int`只有一个更改就是这样......`%2$s``%2$d`**

 **```
out.print(String.format("<option value=\"%1$d\">%2$d</option>", i, TaxonId.getOrganismFromId(i))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:02:22.760

[当我在http://ideone.com/u8fDT](http://ideone.com/u8fDT)上运行它时，您的`print`/`format`代码似乎还可以。您可能只需要重新编译 JSP（可能会自动发生，但有时可能需要重新启动服务器）。

此外，像这样混合 HTML 和 Java 代码是一种非常痛苦的工作方式。JSTL 或 FreeMarker 之类的模板系统会让您的生活更轻松。**

# perl - 我该如何处理“不是 HASH 引用”错误？

> ID：11614895
> 
> 赞同：2
> 
> 时间：2012-07-23T14:47:40.537
> 
> 标签：perl, cpan, strawberry-perl

我正在尝试执行用户创建的 Perl 脚本，

```
usage: my.pl <type> <stats> [-map <map>] <session1> [session2] 
Produces statistics about the session from a Wireshark .pcap file where:
<type> is the type of data in the pcap file (wlan, ethernet or ip)
<stats> is the output file to write notable information
<session> is the pcap input file or a folder containing pcaps (recursive) 
```

但它失败并出现以下错误。

```
 $perl my.pl ethernet pa.xls google.pcap
        Processing pcap trace (TCP):
        Not a HASH reference at folder/httpTrace.pm line 654. 
```

这是调试控制台 -

```
 Not a HASH reference at folder/httpTrace.pm line 654\. at folder/httpTrace.pm line 654
        folder::httpTrace.pm::readHttp('HASH(0x2306d38)', undef) called at my.pl line 56
        main::__processSession('google.pcap') called at my.pl line 35 Debugged program terminated. 
```

httpTrace.pm: 最后一行# 654

```
 sub readHttp($@)
    {
        my ($conntable, $map) = @_;
        my $http_req_id = 0;
        my $pipelining = 0;

        my $mapc;
        my @allReq;
        my @allRep;
        if( defined( $map ) ) {
            $mapc = $map->clone();
        }
    foreach my $connect ( sort { $pa->{'id'} <=> $pb->{'id'} } values( %{ $conntable } ) ) { 
```

my.pl 中的第 56 行：

```
 my $stats = Pcapstats::HTTP::readHttp( \%tcp_stream, $map ); 
```

my.pl 中还有 map.pm 和用法

```
 my $map;
    if( $ARGV[0] eq '-map' ) {
        shift( @ARGV );
        $map = Pcapstats::Map->new( shift( @ARGV ) );
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:27:10.990

在您的文件`httpTrace.pm`中，您有这一行

```
foreach my $connect ( sort { $pa->{'id'} <=> $pb->{'id'} } values( %{ $conntable } ) ) { 
```

我想知道什么`$pa`和`$pb`是？除非您将它们设置为其他地方，否则它们将是未定义的，并且会给您*使用未初始化的值*错误。无论哪种方式，您都不会进行排序。

但这并不能解释*Not a HASH reference*错误，这很可能是因为`$conntable`不是您认为的那样。如果未定义它不会导致错误，因为 autovivication 会自动创建一个空哈希，因此它可能是一个简单的字符串或数字，或者可能是一个数组引用。

如果您想显示设置的代码，`$conntable`那么我们可能会提供进一步的帮助。

# xml - 使用 xslt 2.0 将字符串模式转换为 XML

> ID：11614897
> 
> 赞同：1
> 
> 时间：2012-07-23T14:47:42.603
> 
> 标签：xml, xslt, xpath

```
MSH.1:MSH.2:MSH.3:PID.1:PID.2:ORC.1:ORC.3 
```

上面的字符串模式我想转换成下面的 XML 格式

```
<filters>
<element group="MSH">
  <location path="MSH.1"/>
  <location path="MSH.2"/>
  <location path="MSH.3"/>
</element>
<element group="PID">
  <location path="PID.1"/>
  <location path="PID.2"/>
</element>
<element group="ORC">
  <location path="ORC.1"/>
  <location path-"ORC.3"/>
</elment>
</filters> 
```

我可以有示例 XSLT 来实现上述场景吗

注意：我正在使用 XSLT 2.0 ans saxon 转换器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:41:41.810

假设您在撒克逊语中使用参数开始转换

```
-it:main in=MSH.1:MSH.2:MSH.3:PID.1:PID.2:ORC.1:ORC.3 
```

尝试

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="in"/>

<xsl:template name="main">
<filters>
  <xsl:variable name="tokens" select="tokenize($in, ':')"/>
  <xsl:for-each-group select="$tokens" group-by="substring-before(., '.')"/>
   <element group="{current-grouping-key()}">
     <xsl:for-each select="current-group()">
       <location path="{.}"/>
     </xsl:for-each>
   </element>
  </xsl:for-each-group>
</filters>
<xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T15:05:52.030

您可以使用 XSLT 2.0 中的 unparsed-text() 函数将文档加载为字符串变量。

然后，您可能会使用 xsl:analyze-string 指令来拆分字符串，首先在`":"`字符上，然后可能在句点字符上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:57:30.090

XSLT 旨在操纵 XML（变成其他东西）。因此，您必须首先将您的字符串 XML 化，至少

```
<xmlize>MSH.1:MSH.2:MSH.3:PID.1:PID.2:ORC.1:ORC.3</xmlize> 
```

然后，您可以在根元素上进行 XSLT 匹配，并且可以使用 `tokenize()' 来处理您的字符串。看到这个[讨论](https://stackoverflow.com/questions/136500/does-xslt-have-a-split-function)

用 XSLT 做这件事有点奇怪。你不能使用另一种具有字符串操作函数和正则表达式拆分的脚本/语言吗？

注意：当你“xmlize”时，不要忘记转义 '<' '>' 和 '&' 如果合适

# javascript - 获取对象的复杂属性值

> ID：11614902
> 
> 赞同：0
> 
> 时间：2012-07-23T14:48:03.960
> 
> 标签：javascript, jquery

给定这样的json：

```
{ "rss": {
   "page": 1,
   "results": [{
      "type": "text",
      "$": 10
   }],
   "text": [{
      "content": "Lorem ipsum dolor sit amet.",
      "author": {
         "name": "Cesar",
         "email": "cesar@evoria.com"
      },
   },
   {
      "content": "Tema Tis rolod muspi merol.",
      "author": {
         "name": "Cleopatre",
         "email": "cleopatre@pyramid.com"
      },
   }]
} 
```

在 javascript 中，我可以像这样检索值：

```
var json = JSON.parse(datajson);
$.each(json.text, function(key, val) {
    // this one is ok
    var content = val['content'];
    // this one does not work
    var authorname = val['author.name'];
}); 
```

这是一种方式，给定字符串格式的属性名称，检索复杂对象的值，例如`json.text[0].author.name`？

**编辑** 我想将所需的属性存储在另一个对象中，例如：

```
[
    { dt: "Text content", dd: "content" },
    { dt: "Author name", dd: "author.name"}
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:12:17.493

您可以按“段”拆分“索引”`.`并循环遍历“段”，在每次迭代时按级别递减。

```
var obj = {
   author : {
      name : "AuthorName"
   }
}

function get_deep_index(obj, index) {   
   var segments = index.split('.')
   var segments_len = segments.length
   var currently_at = obj
   for(var idx = 0; idx < segments_len; idx++) {
      currently_at = currently_at[segments[idx]]
   }
   return currently_at
}

console.log(get_deep_index(obj, 'author.name')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:51:16.797

以下应该可以解决问题。

```
var authorname = val['author']['name']; 
```

您还可以将对象本身存储为：

```
var author = val['author']; 
```

然后稍后您可以从中索引属性。

```
console.log(author.name, author.email) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-23T15:02:44.820

Yent 用 eval 函数在评论中给出了很好的提示。我用这种代码解决了我的需要：

```
var json = JSON.parse(myjsonasastring);

var descriptiontobeadded = [
    { dt: "Text content", dd: "content" },
    { dt: "Author name", dd: "author.name" }
];

$.each(descriptiontobeadded, function(key, val) {
    var dt = '<dt>' + val.dt + '</dt>';
    description.append(dt);
    var dl = '<dd>' + eval('json.' + val.dd) + '</dd>';
    description.append(dl);
}); 
```

# c# - c#将文本框的内容复制到浏览器SharePoint中的剪贴板

> ID：11614904
> 
> 赞同：0
> 
> 时间：2012-07-23T14:48:14.193
> 
> 标签：c#, javascript, sharepoint, copy, clipboard

我有一个“复制”按钮，它应该将之前生成的文本复制到剪贴板。

我的 SharePoint-WebPart-Application 中有以下代码：

```
public void CopyToClipboard_Click(object sender, EventArgs e)
    {
        string text = TextBox1.Text;
        ScriptManager.RegisterStartupScript(CopyButton, CopyButton.GetType(), "Copy", "clipboardData.setData('text', '" + text + "');", true);
    } 
```

奇怪的是，当我在 TextBox1 中插入自己的文本并按下 CopyButton 时，文本将被复制，但如果我想将生成的文本复制到剪贴板，则没有任何反应。

* * *

好的，问题并没有真正解决。复制到剪贴板的功能已完成，但通过删除转义序列，文本未格式化：没有新行，文本在一行中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:05:15.293

我会忘记回发，并在文本框失去焦点时添加一个事件处理程序，然后使用 javascript 将内容复制到剪贴板（请记住，有些用户可以防止这种情况发生）。

有关通过 javascript 复制到剪贴板的代码的答案，请参阅[此 SO 问题。](https://stackoverflow.com/questions/7713182/copy-to-clipboard-for-all-browsers-using-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:56:34.340

I fixed the problem by removing the escape sequences in the generated text with `text.Replace("/n", "")`.

# svn - TortoiseSVN 切换、分支和处理分支

> ID：11614907
> 
> 赞同：1
> 
> 时间：2012-07-23T14:48:23.710
> 
> 标签：svn, version-control, tortoisesvn, branching-and-merging, svn-switch

*我在这里问哪些可能是一些基本的东西，但仍然想继续我的帖子以追求学习。*

我最近进入了 SVN，有些问题困扰着我。我有一个存储库，其中有一个*/trunk*，所有当前的开发过程都在其中进行。我在 repo 中创建了一个包含主干内容的分支并更新了我的分支文件夹（在我的本地计算机上），以便将存储库分支的所有内容复制到我的本地分支。我`svn switch`在本地机器上使用了从主干切换到分支的选项。

有人可以回答以下问题：

1.  在分支上工作后，我需要到`svn update`我的本地分支来 repo 分支，以便在 repo 中进行更改，对吗？

2.  如何找到我对本地分支机构所做的更改？例如，让我说主要开发发生的仓库的 URL（即*/trunk*）可以访问，`dev.mobile42.com`并且我将本地分支更新为仓库分支，我怎样才能使仓库分支以相同的 URL 反映我的更改`dev.mobile42.com`，是否足以在我的本地计算机上进行切换以反映更改或我在这里错了。一些我需要如何查看我在我的分支上工作的结果。我怎样才能做到这一点！

PS因为我从事网络开发工作，所以在将分支合并到主干之前有必要通过测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:55:41.353

1.  是的，但这只有在您的分支上进行了其他修改时才有效，例如，其他人。

2.  您在这里缺少一些步骤。要使主干反映分支更改，您必须将分支**重新**集成到主干中，然后提交主干。

在重新集成之前，建议您**将 A Range Of Revisions**从主干合并到您的分支中，然后使用主干修改测试您的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:33:14.697

1.  你必须了解[SVN 书](http://svnbook.red-bean.com/en/1.7/)
2.  检查手册

现在你看不到和理解基本的东西

*   Subversion 中没有“本地分支”之类的东西。是*唯一的* **Repository**和一个或多个（对您来说是本地的）**Working Copies**，它们是存储库的某个子树的某个历史点的切片
*   SVN 中的工作周期是“checkout-edit-commit-edit-commit ...”，中间有更新，用于在同一代码库上获取（可能的）第三方并行更改 - 对于**任何**工作副本（链接到 trunk/branch/不管什么）：即 WC 中的更改必须存储在 Repo 中（在*相关部分*）并提交
*   合并子树之间传输（复制）的数据
*   对于 httpd-served 存储库，可以使用普通浏览器访问存储库的任何部分`<some URL>`，但没有任何活动内容在存储库中处于活动状态，您必须具有构建部署阶段。在这种情况下，这是您的构建器的任务 -*从*和*到*以及部署*什么*

# jquery - jquery .text 作为条件

> ID：11614909
> 
> 赞同：3
> 
> 时间：2012-07-23T14:48:24.643
> 
> 标签：jquery, text

我有这个代码：（jquery）

```
 alert($('#feedback').text());
    if ($('#feedback').text() == "") {
        alert("has content");
    } else {
        alert("no content");
    } 
```

我用它来测试任何计划文本内容的#feedback div。然而，无论我如何格式化条件，else 语句总是会触发，无论我是否有内容。

我在哪里错了？

html:

```
<div id="feedback" class="hide feedback">
    <p>generated message</p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:58:33.783

基于 HTML 示例，我假设当 div 应该为空时，您有类似的情况：

```
<div id="feedback" class="hide feedback">
    <p></p>
</div> 
```

在那种情况下`.text()`， div 的不是`""`，而是`"\n\n"`（两个换行符）。您需要使用 删除换行符`$.trim()`。`<p>`（如果有换行符，即使没有标签也是如此。）

```
if( $.trim( $( '#feedback' ).text() ) == "" ) {
    alert( "no content" );
} else {
    alert( "has content" );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:52:53.787

*只是为了检查！*

检查您的 :`$('#feedback').length`值

```
if ($('#feedback').length>0  && $.trim($('#feedback').text()) != "") {
    alert("has content");
} else {
    alert("no content"); // or no element
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:52:36.717

不应该是：

```
if ($('#feedback').text() != "") {
    alert("has content");
} else {
    alert("no content");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T15:08:02.950

另外的选择：

```
if ($('#feedback p:empty').length) {
    alert("empty");
} else {
    alert("has content");
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-23T14:52:31.343

它被还原了...

```
alert($('#feedback').text());
if ($('#feedback').text() == "") {
    alert("no content");
} else {
    alert("has content");
} 
```

它现在修复了:)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-23T14:59:13.677

您可以使用：

```
if($('#feedback').is(':empty')) {
   alert("no content");
} else {
   alert("has content");
} 
```

# android - 使用图像启动 ACTION_EDIT 并返回图像的教程/参考

> ID：11614912
> 
> 赞同：5
> 
> 时间：2012-07-23T14:48:29.927
> 
> 标签：android, android-intent

我正在编写一个使用相机的应用程序。我想发布一个允许用户用线条和文本注释结果图像的意图，并且我想为用户提供他们可以使用的适当图像编辑应用程序的列表，但我遇到了这些问题：1。当我执行此代码时，并非所有图像编辑应用程序都出现在列表中：

```
editIntent = new Intent();
editIntent.setAction(Intent.ACTION_EDIT);
Uri imageToEditUri = selectedPhotoLocation;  // Uri of existing photo
String imageToEditMimeType = "image/*";
editIntent.setDataAndType(imageToEditUri, imageToEditMimeType);
startActivityForResult(Intent.createChooser(editIntent,"Edit Image"), IMPLICIT_EDIT_IMAGE);

Is there a way to get a list of apps that will respond to Intent.ACTION_EDIT? 
```

2\. PS Express 是我发现的唯一一个在 data.getDate() 中返回编辑图像的 Uri 的应用程序 Uri 返回到 OnActivityResult()，其他应用程序用户被迫保存、记住位置并重新选择编辑后的图像。

```
Is there a way to know what apps return the Uri of the image to OnActivityResult() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:35:53.243

> 执行此代码时，并非所有图像编辑应用程序都出现在列表中

仅仅因为应用程序实现了图像编辑并不一定意味着它被设置为允许第三方链接到他们的图像编辑活动。

> 有没有办法获取将响应 Intent.ACTION_EDIT 的应用程序列表？

如果您的意思是要在运行时以编程方式执行此操作，请参阅 Jedil 的回答。

> 有没有办法知道哪些应用程序将图像的 Uri 返回到 OnActivityResult()

不，除了那些有关于开发人员应该如何与它们集成的文档的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T15:32:22.377

第一个问题答案：
试试[queryIntentActivities](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)

```
Intent editIntent = new Intent(android.content.Intent.ACTION_EDIT);
List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(editIntent, 0); 
```

# java - 在 SVN 中重命名 Java 包是过时的循环噩梦，并且不存在错误

> ID：11614914
> 
> 赞同：3
> 
> 时间：2012-07-23T14:48:31.643
> 
> 标签：java, svn, sts-springsourcetoolsuite

我正在尝试重命名在 SVN 中跟踪的 Java 包。这一切似乎都奏效了。它将代码移动到新包等。然而，噩梦开始时，乐趣开始取决于你的观点。摆脱旧包装很难。

我陷入了“过时”或“不存在”消息的循环战争。

我尝试删除、清理、同步、覆盖和提交、更新、覆盖和更新，我能想到的所有该死的东西都可以摆脱旧包。

所以，我的问题是：显然有一个正确的方法和一个错误的方法来重命名一个包。

如果这很重要，我正在使用 SpringSource ToolSuite。

每隔一段时间，我可以在 15 或 20 次尝试中完成它，其他时候，我只是放弃整个事情。

为什么重命名软件包对于 SVN 来说是个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-11T14:49:16.750

我知道这是一个旧帖子，但我最近自己又遇到了它。我最终创建了一个全新的包，并将我的课程从旧包移到了新包。然后我能够提交那个新包和移动的类。在那之后，我不得不删除底层的旧包，即com.xyz.foo.bar，其中bar是底层，然后我终于可以提交到SVN，首先从底层开始。这是使用 Eclipse Mars 和颠覆团队提供者 1.10。绝对痛苦的过程。

# c++ - char 数组 - 处理内存

> ID：11614916
> 
> 赞同：-3
> 
> 时间：2012-07-23T14:48:33.787
> 
> 标签：c++, c, arrays, c-strings

> **可能重复：**
> [为什么我不能在 char* 中编辑 char？](https://stackoverflow.com/questions/7480597/why-cant-i-edit-a-char-in-a-char)

```
char *k ;

void ffill()
{
    char *d="ddddd";    
    *k=*d; //expecting to copy "ddddd" to *k
    cout<<k<<"\n";
    *d[1]=5; // trying to change array element
    cout<<k<<"\n";
}

int _tmain(int argc, _TCHAR* argv[])
{
    ffill();
    cout<<k<<"\n";
} 
```

过程填充在局部变量的帮助下初始化字符数组 k。我不确定它复制`"ddddd"`变量指针（这是错误的，因为在自动销毁 d 内存后不安全）或者它复制值并在此之后`*k`正确初始化。

如何获得`*d`数组元素？编译器不高兴`*d[1]=5;`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T15:20:16.357

（免责声明：此答案仅涵盖 C++。不建议同时要求 C 和 C++，因为两种语言完全不同）

## 序幕

```
char *k ; 
```

这声明了一个指向字符的指针。

```
"ddddd" 
```

这个表达式的类型`char const[6]`是 ，即一个由六个常量字符组成的数组。这种类型的表达式可以隐式转换为指向数组第一个元素的指针。该指针的类型是`char const*`，即指向常量字符的指针。A`char const*`不能转换为 a `char*`，因为`char*`它允许修改它指向的字符，而`char const*`不允许修改。

```
char *d="ddddd"; 
```

由于上述规则，这种说法是不正确的。您应该打开编译器上的警告，它会警告您不要这样做（理想情况下它实际上是一个错误，而不仅仅是一个警告）。`char const* d = "ddddd";`如果你真的想要一个指针或者`char d[] = "ddddd";`你想要一个数组，它应该是。第二种形式不需要`const`，因为它会制作副本，因此不会冒更改原始数据的风险，即`const`.

```
*d 
```

这个表达式涉及到上面提到的隐式转换`char const*`，然后`*`对它应用间接运算符（the），从而产生一个类型为 的表达式`char const&`，即对常量字符的引用。

```
*k 
```

与 类似`*d`，这对指针执行间接操作。在这种情况下，`k`是 type `char*`，所以结果表达式是 type `char&`。

```
*k=*d; //expecting to copy "ddddd" to *k 
```

赋值分配*单个*字符，因为它是从对*常量*字符的引用到*对*字符的引用的赋值。它最终将字符串的第一个字符分配给 指向的字符`k`，即……等等。

`k`指向哪里？它从未初始化！这注定以悲剧收场。

## 第1章

那么，我们如何`k`指向某个地方呢？我们如何将整个字符串从该空间复制`d`到该空间中？

要将`d`数组的六个字符复制到中`k`，我们需要六个字符的空间。最简单的方法是创建一个包含六个字符的数组。

```
char k[6]; 
```

现在，如何复制这六个元素？我们可以使用 C 库函数`strcpy`，它复制以空字符结尾的字符串。使用此功能需要非常小心，因为：

1.  它要求源有一个 null ( `'\0'`) 字符标记结束；如果源没有这样的字符，则行为未定义，任何事情都可能发生。这就是字符串`"ddddd"`有六个字符而不是 5 个的原因：`\0`编译器会在末尾为您插入一个隐式字符。

2.  *它要求目标有足够的空间容纳包括* 空终止符在内的整个源字符串。如果目的地没有足够的空间，则行为也未定义，任何事情都可能发生。

这就是如何使用此函数来制作字符串的副本：

```
std::strcpy(k, d); 
```

未能满足第 1 点或第 2 点可能会导致任何事情，从程序看似正常工作（如果你不走运），到以奇怪的方式随机运行，再到简单地崩溃（如果你幸运的话）。

## 结语

伙计，这是很多信息。C++ 程序员必须一直关心这些问题吗？那一定很烦人。

好吧，C++ 程序员可以使用`std::string`字符数组来代替字符数组，这样就少了很多麻烦：我们可以使用赋值运算符进行复制，我们不需要跟踪正确的大小，我们不需要关心是否有 null终止符到位，我们不需要在编译时*限制*大小，还有很多其他优点。

```
std::string k;

void ffill()
{
    std::string d="ddddd";    
    k = d;
    cout<<k<<"\n";
    d[1]=5;
    cout<<k<<"\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:52:08.327

使用 C 编程语言，您应该使用数组而不是指针（因为它可能指向只读字符串）。例如 ：

```
char *k;

void 
fill(void)
{
   char d[] = "ddddd";
   k = d;
   d[1] = '5'; // Did you mean '5' ? 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:54:58.933

就像 Martinho Fernandes 已经说过的那样：您似乎正在尝试使用 'std:string'，而不是 char 数组。

```
char k[20] ; //*k doesn't allocate any memory for you to use.

void ffill()
{
    char *d="ddddd";    //This works, since it points to the constant character string in your code. But it can not be altered in any way. (It's a 'const char *')
    strcpy(k, d);       //This standard function copies the content of one pointer to another.
    cout<<k<<"\n";      //Not too sure, but it should work,
    k[1]=5;             //k is the 'changeable memory, not 'd'.
    cout<<k<<"\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T15:03:43.770

您需要注意这里发生的几件事。让我试着解释一下：

```
char *k ; 
```

这一行声明了一个名为的变量`k`，它是一个字符的指针。但是，它没有初始化为指向任何东西。尝试使用未初始化的指针将导致未定义的行为。

```
void ffill() 
{ 
    char *d="ddddd"; 
```

这一行声明了一个名为的变量`d`，它也是一个字符的指针。同时，将指针初始化为指向一个常量字符数组（也称为 c 字符串），该数组包含 5 个 'd' 字符和一个终止 NULL 字符（因此该数组有 6 个元素）。

```
 *k=*d; //expecting to copy "ddddd" to *k 
```

此行使用取消引用运算符 (*)。该运算符复制 所指向的字符`d`并将其放置在 所指向的地址处`k`。正如我上面提到的，这将导致未定义的行为，因为指针中的地址`k`尚未初始化。

```
 cout<<k<<"\n";
    *d[1]=5; // trying to change array element 
```

首先，您正在尝试将 int 分配给 char。C 和 C++ 都允许这样做，但您可能不会得到您期望的结果。在这种情况下，您试图用字符代码 5 替换第二个 'd' 字符。在 ASCII 中，这是一个非打印字符。

此外，由于`d`指向 c 字符串常量，因此尝试更改其元素会导致未定义的行为。

```
 cout<<k<<"\n";
}

int _tmain(int argc, _TCHAR* argv[])
{
    ffill();
    cout<<k<<"\n";
} 
```

将一个 c-string 复制到另一个 c-string 还有一些其他问题，但这是我将在这里讨论的所有细节。正如其他人提到的，使用 std::string 更简单。但是，我也相信学习如何使用 c-strings 很有教育意义，可以提高你的编码技能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:53:38.533

您需要声明`d`为数组而不是指针。：

```
char d[]
d[1] = '5';   // d is a char array, so did you mean the character '5'? 
```

并更改 `*k=*d;`为`k = d; //This will copy the value of the pointer`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T14:55:21.850

让我们来看看：

```
*k=*d; //expecting to copy "ddddd" to *k 
```

这不会复制“字符串”，只会尝试将指向的内存设置`k`为`d`. 如果它没有被初始化，那么它将严重失败。

```
*d[1]=5; // trying to change array element 
```

这也会失败。首先，这是一个双重间接。会`d[1] = 5;`被打赌，但这也会失败，因为字符串很可能存储在只读内存中。

改用字符串。

# xcode - Git拉取后Xcode看不到项目中的文件

> ID：11614919
> 
> 赞同：4
> 
> 时间：2012-07-23T14:48:37.343
> 
> 标签：xcode, git

我和一个合作伙伴正在通过 Git 管理一个 Xcode 项目。他最近对该项目进行了“本地化”，为项目添加了一个德语目录（“de.lproj”），其中包含许多文件。在我将这些更改拉到我的项目副本后，Xcode 现在无法编译，抱怨此目录中的两个文件不存在。这些文件存在于文件系统中，但在 Xcode 侧边栏中显示为红色（缺失）。

有没有办法强制 Xcode 重建它的内部文件目录，以便它可以“重新发现”这些文件确实存在？

请注意，我也尝试过这个 Git 项目的全新“克隆”，结果相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-16T05:47:31.507

我找到了一个解决方案，而无需从 Xcode 中删除文件-

1.  在 中`Project Navigator`，找到文件（红色表示未找到）并突出显示它。
2.  显示`File Inspector`
3.  在`Location`更改`Absolute Path`为`Relative to group`or下`Relative to project`，
4.  然后在路径旁边，有一个白色的小图标，单击它并选择文件的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T15:52:12.103

事实证明，这是 Xcode 在 project.pbxproj 文件中存储的绝对路径与组路径的情况。由于我不明白的原因，当我的合作伙伴本地化我们的项目时，一些文件使用绝对路径添加到 Xcode。当我提取该版本的项目时，我的 Xcode 副本找不到这些文件，因为绝对路径与我的绝对路径不匹配。即使文件在项目中并由 Git 正确传输，Xcode 也找不到它们。

我的解决方案是使用 Xcode 删除这些文件。由于这些是本地化文件，我实际上不得不删除本地化文件的“父”版本。我告诉 Xcode 只删除对文件的引用。然后我将文件从 Finder 拖回 Xcode。这次 Xcode 将它们插入为“相对于组”，一切都很好。

我提交并将这些更改推送回我们的远程 Git 存储库。我的搭档能够将这些内容拉到他的副本中，并且也都为他工作。

我们俩都不明白为什么首先将文件作为绝对引用插入，但至少我们能够使用这种变通方法使项目再次可移植。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-19T13:20:10.433

我遇到了这个问题，我只是通过退出 xcode 并重新打开它来解决它。所有丢失的文件都神奇地重新出现了。希望这会对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-23T07:06:41.867

检查项目文件夹路径。如果路径中的任何文件夹名称包含“空格”，则将其删除并再次打开项目。我在 Xcode 9 中遇到了这个问题。

# maven - MQ jar 兼容 Maven for IVY

> ID：11614926
> 
> 赞同：4
> 
> 时间：2012-07-23T14:48:50.520
> 
> 标签：maven, ivy, ibm-mq

我目前在公司的任务是实现 IVY 依赖管理。现在我点击了以下在通常的 Maven 存储库中找不到的库，例如[http://mvnrepository.com](http://mvnrepository.com)：

com.ibm.mq.jar

com.ibm.mq.pcf.jar ...

等等（它们都带有前缀：com.ibm.mq）。

我可以在一个单独的网站上找到它们：[http](http://www.java2s.com/) ://www.java2s.com/ 但它与 Maven 不兼容。

那么，我在哪里可以找到这些？克服这个问题的最佳解决方案是什么？

我在想，手动将它们上传到团队关系。但在这种情况下，这是通常的程序吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T15:08:38.303

找到这些的最佳位置是直接来自 IBM。有关可用的 WMQ Java/JMS 客户端的不同版本，请参阅[此答案。](https://stackoverflow.com/questions/10957612/what-is-the-latest-websphere-mq-client-version/10957643#10957643)

至于打包这些的最佳方式，请注意，如果您希望 IBM 支持它们，您需要安装客户端代码，而不仅仅是捆绑在 jar 文件中。如果要在生产环境中安装应用程序，IBM 不愿支持非标准安装的原因也应该引起您的关注。完整的客户端包括相当多的附加功能，例如诊断、跟踪功能、加密库、JSSE 等。此外，它是唯一可以应用 IBM 维护的安装。

如果您从第三方站点（例如上面链接的站点）安装 jar，您甚至知道它们是什么版本吗？是否应用了任何维护？是否应用了最新的补丁？由于 IBM 仅分发完整的客户端，并且 OEM 无权分发 jar 文件，除非作为其应用程序的一部分，因此任何提供 WMQ jar 文件的站点都被定义为盗版它们。

我意识到，当您习惯于只抓一些 jars 就可以走了时，要求您进行完整的客户端安装被认为是繁重的。另一方面，如果您不需要支持，那么您可以将 WMQ 客户端安装在某个 VM 上，使其保持最新并从那里获取 jar 文件。这样，您就有了一组已知良好的文件，这些文件全部同步并且您可以对其[应用维护](http://www-01.ibm.com/support/docview.wss?rs=171&uid=swg27006037)。

如果您想向 IBM 建议他们需要一个更轻量级的 Java 解决方案，请随时在[IBM Request For Enhancement (RFE) 社区](http://ibm.co/P5TVP3)提出要求（如果已经存在，则对其进行投票） 。

# sql - 用随机值填充“查找表”

> ID：11614928
> 
> 赞同：1
> 
> 时间：2012-07-23T14:48:59.170
> 
> 标签：sql, sql-server

我有三张桌子，`A` `B`并且`C`。对于 in 中的每个条目`A x B`（其中 x 是笛卡尔积或交叉连接），在 中都有一个条目`C`。

换句话说，如果有 2 个条目 for和 3 个 for ，表格 for`C`可能如下所示：`A``B`

```
| A_ID | B_ID | C_Val |
----------------------|
|  1   |  1   |  100  |
|  1   |  2   |  56   |
|  1   |  3   |  19   |
|  2   |  1   |  67   |   
|  2   |  2   |  0    |
|  2   |  3   |  99   | 
```

`A`因此，对于和的任何组合`B`，都有一个要在 中查找的值`C`。我希望这一切都有意义。

在实践中，数据库的大小`A x B`可能相对较小，但对于手动填充测试数据来说太大了。因此，我想随机填充`C`表中可能已经存在的任何数据`A`和`B`。

我的 SQL 知识相当基础。到目前为止，我已经确定我可以做的是将该笛卡尔积作为内部查询，如下所示：

```
(SELECT B.B_ID, C.C_ID
 FROM B CROSS JOIN C) 
```

然后我想说如下：

```
INSERT INTO A(B_ID, C_ID, A_Val) VALUES
    (SELECT B.B_ID, C.C_ID, FLOOR(RAND() * 100)
     FROM B CROSS JOIN C) 
```

毫不奇怪，这不起作用。我认为它不是像那样动态生成列的有效语法，也不是尝试将整个表作为值插入。

我怎样才能基本上将这个正常的编程伪代码转换为正确的 SQL？

```
foreach(A_ID in A){
    foreach(B_ID in B){
        C.insert(A_ID, B_ID, Rand(100));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:55:13.493

语法问题是因为：

```
INSERT INTO A(B_ID, C_ID, A_Val) VALUES
  (SELECT B.B_ID, C.C_ID, FLOOR(RAND() * 100)
   FROM B CROSS JOIN C) 
```

应该：

```
INSERT INTO A(B_ID, C_ID, A_Val) 
  SELECT B.B_ID, C.C_ID, FLOOR(RAND() * 100)
   FROM B CROSS JOIN C; 
```

（你不使用`VALUES`with `INSERT/SELECT`。）

但是，您仍然会遇到`RAND()`未针对每一行进行评估的问题；它对每一行都有相同的值。假设 B_ID 和 C_ID 的组合是唯一的，您可以使用如下内容：

```
INSERT INTO A(B_ID, C_ID, A_Val) 
  SELECT B.B_ID, C.C_ID, ABS(CHEKSUM(RAND(B.B_ID*C.C_ID))) % 100
   FROM B CROSS JOIN C; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:56:54.813

```
select A_id,B_Id, abs(checksum(newid()))%101 as C_val from A cross join B 
```

这将为您提供 0 到 100 范围内的不同值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:55:53.717

使用 CTE

```
 With cte as
  (SELECT B.B_ID, C.C_ID, ABS(CAST(CAST(NEWID() AS VARBINARY) AS INT)) as A_Val
    FROM B CROSS JOIN C) 
  Insert into Table(B_ID, C_ID, A_Val)
  Select B_ID,C_ID,A_Val from cte 
```

由于 rand 生成相同的数字，您可以使用 NEWID 。[来源](http://www.sql-server-helper.com/tips/generate-random-numbers.aspx)

# windows-phone-7 - 如何在 C# 中动态地将图像提供给图钉

> ID：11614939
> 
> 赞同：0
> 
> 时间：2012-07-23T14:49:30.790
> 
> 标签：windows-phone-7, xaml, bing-maps, pushpin

我有一个场景，我希望用户在 wp7 应用程序中查看 Bing 地图中的多个图钉。我使用 maplayer 制作图钉集群，但我无法在 cs 文件本身中动态地将图像添加到该图钉。顺便说一句，我没有在xaml中使用过图钉控件。我只是在循环时将图钉对象添加到地图播放器。

这是我的代码：

```
maplayer layer = new maplayer();

watcher.start();

for (int i = 0; i < lst.count; i++)

           {                  
                    Pushpin mypin = new Pushpin();
                    watcher.Position.Location.Latitude = Convert.ToDouble(lst[i].Latitude);
                    watcher.Position.Location.Longitude=Convert.ToDouble(lst[i].Longitude);

                }

                GeoCoordinate geo = new GeoCoordinate(watcher.Position.Location.Latitude, watcher.Position.Location.Longitude);
                mypin.Location = geo;

                mypin.Background = new SolidColorBrush(Colors.Gray);
                mypin.Foreground = new SolidColorBrush(Colors.White);
                mypin.Content = "My location";
                layer.AddChild(mypin, mypin.Location);
            }
            map1.SetView(watcher.Position.Location, Status == true ? 5.0 : 3.0);
            map1.Children.Add(layer);

watcher.stop(); 
```

我还尝试使用图像画笔属性为图钉提供图像源，但图钉本身不可见。

像这样：

```
ImageBrush ib = new ImageBrush();

ib.ImageSource = new System.Windows.Media.Imaging.BitmapImage(new Uri(@"Images/push.png", UriKind.Relative));

mypin.Background = ib; 
```

请帮助我。我需要在不从 xaml 端更改/添加数据模板到图钉的情况下完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:40:49.493

这个问题在 MSDN 中，在[Working With Pushpins](http://msdn.microsoft.com/en-us/library/gg588383%28v=vs.92%29.aspx)页面上进行了介绍。这是给出的示例，其中图像直接添加到地图上的图层：

```
namespace WindowsPhoneApplication1
{
    public partial class MainPage : PhoneApplicationPage
    {
        MapLayer imageLayer;

        public MainPage()
        {
            InitializeComponent();

            //Create a layer to contain the pushpin images.
            imageLayer = new MapLayer();
            map1.Children.Add(imageLayer);
        }

        private GeoCoordinate mapCenter;

        private void button1_Click(object sender, RoutedEventArgs e)
        {

            // Retrieve the center of the current map view.
            mapCenter = map1.Center;

            // Define the image to use as the pushpin icon.
            Image pinImage = new Image();

            //Define the URI location of the image.
            pinImage.Source = new System.Windows.Media.Imaging.BitmapImage(new Uri("bluepushpin.png", UriKind.Relative));

            //Define the image display properties.
            pinImage.Opacity = 0.8;
            pinImage.Stretch = System.Windows.Media.Stretch.None;

            // Put the image at the center of the view.
            PositionOrigin position = PositionOrigin.Center;
            imageLayer.AddChild(pinImage, mapCenter, position);

        }
    }
} 
```

# javascript - 在考虑背景的情况下将 RGBA 转换为 RGB

> ID：11614940
> 
> 赞同：6
> 
> 时间：2012-07-23T14:49:32.897
> 
> 标签：javascript, rgb, rgba

> **可能重复：**
> [将 RGBA 颜色转换为 RGB](https://stackoverflow.com/questions/2049230/convert-rgba-color-to-rgb)

我正在尝试将具有 alpha < 1 的 RGBA 颜色转换为纯 RGB 表示，同时考虑到背景颜色。

使用[这个问题](https://stackoverflow.com/questions/2049230/convert-rgba-color-to-rgb)提供的算法，我设法正确转换为纯 RGB 颜色 - 但仅当 alpha = 0.5 时。

这是我的测试代码：

```
<!DOCTYPE html>
<html>
<head></head>
<body>
    <script type="text/javascript">
    // Basic RGB(A) to CSS property value
    function _toString(obj) {
        var type = 'rgb', out = obj.red + ', ' + obj.green + ', ' + obj.blue;

        if (obj.alpha !== undefined) {
            type += 'a';
            out += ', ' + obj.alpha;
        }

        return type + '(' + out + ')';
    }

    // Background color, assume this is always RGB
    var bg = {red: 255, green: 51, blue: 0};
    // RGBA color
    var RGBA = {red: 0, green: 102, blue: 204, alpha: 0};
    // Output RGB
    var RGB = {red: null, green: null, blue: null};
    // Just a cache...
    var alpha;

    while (RGBA.alpha < 1) {
        alpha = 1 - RGBA.alpha;
        RGB.red = Math.round((alpha * (RGBA.red / 255) + ((1 - RGBA.alpha) * (bg.red / 255))) * 255);
        RGB.green = Math.round((alpha * (RGBA.green / 255) + ((1 - RGBA.alpha) * (bg.green / 255))) * 255);
        RGB.blue = Math.round((alpha * (RGBA.blue / 255) + ((1 - RGBA.alpha) * (bg.blue / 255))) * 255);

        document.write('<div style="display: block; width: 150px; height: 100px; background-color: ' + _toString(bg) + '">\
            <div style="color: #fff; width: 50px; height: 50px; background-color: ' + _toString(RGBA) + '"><small>RGBA<br>' + RGBA.alpha + '</small></div>\
            <div style="color: #fff; width: 50px; height: 50px; background-color: ' + _toString(RGB) + '"><small>RGB<br>' + RGBA.alpha + '</small></div>\
        </div>');

        // Increment alpha
        RGBA.alpha += 0.25;
    }
    </script>
</body>
</html> 
```

在 alpha 为 0.5 时，在 Chrome 和 Firefox 中运行上述结果会导致成功的 RGBA->RGB，任何偏离 0.5 的结果都会导致不匹配，如果偏差非常小（即当 alpha 为 0.55 时可能会注意到问题） ）。

我已经多次重写逻辑，将逻辑完全扩展到其最基本的部分，但我未能成功。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T14:59:20.337

看起来您正在尝试使用通用方法进行混合，但增量循环让我失望。从 OpenGL 常见问题解答中提取：

“上述[用于混合]的典型用途通过其关联的 alpha 值修改传入颜色，并将目标颜色修改为 1 减去传入的 alpha 值。然后将这两种颜色的总和写回帧缓冲区。”

因此，不要使用 while 循环，而是使用：

```
alpha = 1 - RGBA.alpha;
RGB.red = Math.round((RGBA.alpha * (RGBA.red / 255) + (alpha * (bg.red / 255))) * 255);
RGB.green = Math.round((RGBA.alpha * (RGBA.green / 255) + (alpha * (bg.green / 255))) * 255);
RGB.blue = Math.round((RGBA.alpha * (RGBA.blue / 255) + (alpha * (bg.blue / 255))) * 255); 
```

# android - 从您的 Android 资产文件夹中的 ZIP 文件中读取文件

> ID：11614949
> 
> 赞同：13
> 
> 时间：2012-07-23T14:49:55.447
> 
> 标签：android, zip, assets

我正在使用 : 从位于我的 Android 资产文件夹中的 ZIP 文件中读取文件`ZipInputStream`：它可以工作，但它真的很慢，因为它必须使用顺序读取它`getNextEntry()`，并且有很多文件。

如果我将ZIP文件复制到SD卡上，使用时读取速度确实很快`ZipFile.getEntry`，但是我没有找到`ZipFile`与资产文件一起使用的方法！

有什么方法可以快速访问资产文件夹中的 ZIP？还是我真的必须将 ZIP 复制到 SD 卡？

（顺便说一句，如果有人想知道我为什么这样做：该应用程序大于 50 MB，所以为了在 Play 商店中获得它，我必须使用扩展 APK；但是，因为这个应用程序也应该放入Amazon App Store，我必须为此使用另一个版本，因为 Amazon 不支持扩展 APK，自然......我认为在两个不同的位置访问 ZIP 文件将是处理这个问题的简单方法，但是唉...... .)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-01T10:23:49.150

这对我有用：

```
private void loadzip(String folder, InputStream inputStream) throws IOException
{
    ZipInputStream zipIs = new ZipInputStream(inputStream); 
    ZipEntry ze = null;

            while ((ze = zipIs.getNextEntry()) != null) {

                FileOutputStream fout = new FileOutputStream(folder +"/"+ ze.getName());

                byte[] buffer = new byte[1024];
                int length = 0;

                while ((length = zipIs.read(buffer))>0) {
                fout.write(buffer, 0, length);
                }
                zipIs.closeEntry();
                fout.close();
            }
            zipIs.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-11T07:27:26.537

您可以将未压缩的文件直接存储在 assets 中（即将 zip 解压到 assets/ 文件夹中）。这样，您可以直接访问这些文件，并且在您构建 APK 时无论如何它们都会被压缩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T15:00:44.953

You can create a ZipInputStream in the following way :

```
ZipInputStream zipIs = new ZipInputStream(context.getResources().openRawResource(your.package.com.R.raw.filename)); 
ZipEntry ze = null;

        while ((ze = zipIs.getNextEntry()) != null) {

            FileOutputStream fout = new FileOutputStream(FOLDER_NAME +"/"+ ze.getName());

            byte[] buffer = new byte[1024];
            int length = 0;

            while ((length = zipIs.read(buffer))>0) {
            fout.write(buffer, 0, length);
            }
            zipIs .closeEntry();
            fout.close();
        }
        zipIs .close(); 
```

# python - tkinter spinbox 双零

> ID：11614953
> 
> 赞同：1
> 
> 时间：2012-07-23T14:50:23.210
> 
> 标签：python, tkinter

我有一个需要有双零的旋转框，比如时钟。无论我尝试什么，我都只得到 1。是否有可能让 spinbox 显示双零？

```
# all give same options: 0 - 15 - 30 - 45
Spinbox(root, from_=00, to=45, increment=15)
Spinbox(root, values=('00', '15', '30', '45')) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T15:03:59.203

完全有可能！使用该`format=`选项。

```
Spinbox(root, from_=00, to=45, increment=15, format="%02.0f") 
```

那应该给你你需要的东西。查看[格式文档以获取更多信息。](http://www.tcl.tk/man/tcl8.4/TclCmd/format.htm#M23)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-22T22:42:53.693

现在你需要使用[format()](https://www.programiz.com/python-programming/methods/string/format)之前

*3.7 中的示例：*

```
var = IntVar(root)
var.set("{:02d}".format(time.localtime().tm_sec))
spinbox = ttk.Spinbox(root, textvariable=var, from_=0, to=23, width = 2, format="%02.0f") 
```

# google-apps-script - 用户错误：“您无权执行该操作。” 谷歌应用脚 本

> ID：11614957
> 
> 赞同：0
> 
> 时间：2012-07-23T14:50:32.710
> 
> 标签：google-apps-script

我目前正在从电子表格中运行一些 GAS。他们最终将转移到已发布的服务，但是，需要首先解决当前问题。

我遇到了一个问题，即我编写的​​脚本和其他用户过去使用过的脚本正在接收主题错误消息。

我可以运行（但其他人不能）的新脚本已被简化为单个测试功能

```
function hello()
{ Browser.msg("Hello There") } 
```

这仍然会生成**“您无权执行该操作”。**

我的旧脚本没有任何脚本更改，现在用户收到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:31:46.917

我没有更新脚本上的共享设置。也许这就是简所指的......

谢谢简！

# ruby-on-rails - 在 Tomcat 中运行 jRuby + Rails

> ID：11614959
> 
> 赞同：0
> 
> 时间：2012-07-23T14:50:41.080
> 
> 标签：ruby-on-rails, debugging, tomcat, jruby

我目前正在使用一个平台，其中多个 Web 应用程序必须在框架集中相互交互。这组 Web 应用程序和框架集托管在 Tomcat 上。

现在我们正在开发的应用程序是使用 jRuby 和 Rails 开发的。无论如何我可以在Tomcat中运行我的开发环境，就像只运行`jRuby -S Rails Server`命令一样，我可以有效地调试？

我发现的唯一方法是使用 warble 生成战争，*然后*修改爆炸的战争，这看起来真的很hacky。有什么想法吗？

编辑：我认为我最好的选择是生成一场战争，将其消化，使用符号链接并找出我需要从战争生成过程中复制哪些 gems/libs。这是我能想到的最好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:06:05.563

探索的一个选项：将一个小 servlet 部署到 Tomcat 并返回

```
HTTP/1.1 301 Moved Permanently
Location: http://localhost:3000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T18:38:25.693

转到`webapps`部署了war文件的tomcat中的文件夹，然后`web.xml`在扩展的war文件中找到该文件

这个文件的路径一般是`/var/lib/tomcat7/webapps/your-project-here/WEB-INF/web.xml`在这个文件里面你应该找到

改变这是一种方法。

```
 <context-param>
    <param-name>rails.env</param-name>
    <param-value>production</param-value>
  </context-param> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:25:19.287

到目前为止，我发现的最佳解决方案是使用 Tomcat 设置反向代理并将其指向 Rails 开发服务器。这允许它按预期在客户端运行，同时仍然给我调试控制。

当我有机会进行更多测试时，我将编辑我的答案以包含更多信息。

# python - NotImplementedError：字体模块不可用

> ID：11614965
> 
> 赞同：1
> 
> 时间：2012-07-23T14:50:49.230
> 
> 标签：python, fonts, pygame, py2exe

我在安装文件中编写了以下代码，并在默认文件夹中包含了 sdl_ttf.dll"、"SDL.dll。但是，它显示一条错误消息：

```
NotImplementedError:font module not available
<Import error: DLL load failed:can't find assigned module> 
```

编码

```
from distutils.core import setup

import py2exe,sys,os
import pygame

setup(console=['blackjack.py'])

origIsSystemDLL = py2exe.build_exe.isSystemDLL
def isSystemDLL(pathname):
       if os.path.basename(pathname).lower() in ["sdl_ttf.dll", "SDL.dll"]:
               return 0
       return origIsSystemDLL(pathname)
py2exe.build_exe.isSystemDLL = isSystemDLL

pygamedir = os.path.split(pygame.base.__file__)[0]
os.path.join(pygamedir, pygame.font.get_default_font()),
os.path.join(pygamedir, 'SDL.dll'),
os.path.join(pygamedir, 'SDL_ttf.dll') 
```

有什么不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:35:49.227

你的支票

```
if os.path.basename(pathname).lower() in ["sdl_ttf.dll", "SDL.dll"]: 
```

将不起作用，因为您正在调用`lower()`文件名，但使用`SDL.dll`而不是`sdl.dll`，因此 py2exe 将不包含 sdl 库。

您也可以尝试使用pygame wiki 中的[此](http://www.pygame.org/wiki/Pygame2exe)脚本。

# mysql - MySQL - 针对一系列列选择不同的值

> ID：11614966
> 
> 赞同：0
> 
> 时间：2012-07-23T14:50:49.140
> 
> 标签：mysql, distinct

下表将存储一段时间内各种货币之间的汇率：

```
CREATE TABLE `currency_exchange` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `currency_from` int(11) DEFAULT NULL,
 `currency_to` int(11) DEFAULT NULL,
 `rate_in` decimal(12,4) DEFAULT NULL,
 `rate_out` decimal(12,4) DEFAULT NULL,
 `exchange_date` datetime DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

我将如何查询它以获取最新汇率列表？

它本质上是将合并的**currency_from**和**currency_to**列标识为不同的汇率，然后找到具有最近日期的汇率。

例如，假设我的数据如下：

```
INSERT INTO currency_exchange (id, currency_from, currency_to, rate_in, rate_out, exchange_date) VALUES
(1, 1, 2, 0.234, 1.789, '2012-07-23 09:24:34'),
(2, 2, 1, 0.234, 1.789, '2012-07-24 09:24:34'),
(3, 2, 1, 0.234, 1.789, '2012-07-24 09:24:35'),
(4, 1, 3, 0.234, 1.789, '2012-07-24 09:24:34'); 
```

我希望它选择行 ID：

*   1 - 作为货币 1 和 2 之间的最新汇率
*   3 - 作为货币 2 和 1 之间的最新汇率
*   4 - 作为货币 1 和 3 之间的最新汇率

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:55:49.350

以下查询应该有效：

```
SELECT ce.*
FROM currency_exhcnage ce
LEFT JOIN currency_exchange newer
    ON (newer.currency_from = ce.currency_from
    AND newer.currency_to = ce.currency_to
    AND newer.exchange_date > ce.exchange_date)
WHERE newer.id IS NULL 
```

进行 self- 的技巧`LEFT JOIN`是避免使用子查询，如果您有大型数据集，这可能会非常昂贵。它本质上是在寻找不存在“较新”记录的记录。

或者，您可以选择更简单的（尽管它可能（或可能不会，如评论中所述）更慢）：

```
SELECT *
FROM currency_exchange ce
NATURAL JOIN (
    SELECT currency_from, currency_to, MAX(exchange_date) AS exchange_date
    FROM currency_exchange
    GROUP BY currency_from, currency_to
) AS most_recent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:56:48.040

在动态查询中插入 $currency_from 和 $currency_to 的值。下面的查询将返回与当前时间最近的行

```
SELECT id FROM currency_exchange WHERE currency_from='$currency_from' AND currency_to='$currency_to' ORDER BY ABS( DATEDIFF( exchange_date, now() ) ) LIMIT 1 
```

# android - 夏洛克动作栏视图

> ID：11614967
> 
> 赞同：0
> 
> 时间：2012-07-23T14:50:50.487
> 
> 标签：android, actionbarsherlock

我正在制作一个带有 2 个菜单项的夏洛克操作栏。但是在操作栏的视图中，这两个项目都存在于最左侧的位置。我想在操作栏的最左侧添加 1 个菜单项以及一个文本在操作栏的中心。这是代码：

```
package naseeb.bar;

import android.app.AlertDialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;

public class NaseebactionbarActivity extends SherlockActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newlayout);
        ActionBar actionbar = getSupportActionBar();
        actionbar.setDisplayShowTitleEnabled(false);
        actionbar.setDisplayShowHomeEnabled(false);
        actionbar.show();  

        }

    public void newclickhandler(View view)
    {
        Toast.makeText(NaseebactionbarActivity.this, "press the button to choose the time limit for the timer", Toast.LENGTH_LONG).show();
        Intent intent = new Intent(NaseebactionbarActivity.this,controltransfer.class);
        startActivity(intent);

    }

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu ) {
        com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item){
        // same as using a normal menu
        switch(item.getItemId()) {
        case R.id.menu1:

           LayoutInflater inflater=getLayoutInflater();
          View view = inflater.inflate(R.layout.main,null);
           view.setMinimumWidth(200);
            view.setMinimumHeight(200);

            AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
            alertDialog.setView(view);
            alertDialog.show();

            break;
        case R.id.menu2:
            Intent intent = new Intent(NaseebactionbarActivity.this,controltransfer.class);
            startActivity(intent);
            break;
        }

        return true;
    }

    public void makeToast(String message) {

        Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
    }   

} 
```

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T22:01:57.800

您需要使用自定义操作布局将项目添加到菜单

menu_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/mb_search_text"
        android:title="@null"
        android:actionLayout="@layout/menu_item_layout"
        android:showAsAction="always"/>

</menu> 
```

menu_item_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="Button Left" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button2"
        android:layout_alignBottom="@+id/button2"
        android:layout_centerHorizontal="true"
        android:text="Title" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Button Right" />

</RelativeLayout> 
```

并在 SherlockActivity 中充气：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        super.onCreateOptionsMenu(menu);
        getSupportMenuInflater().inflate(R.menu.menu_layout, menu);
        return true;
    } 
```

# protobuf-net - 异常序列化自定义集合

> ID：11614968
> 
> 赞同：1
> 
> 时间：2012-07-23T14:50:52.983
> 
> 标签：protobuf-net

感谢伟大的图书馆 Marc 以及关于 SO 的所有答案。

我在[http://code.google.com/p/protobuf-net/downloads/list](http://code.google.com/p/protobuf-net/downloads/list)的 .NET 4.0.zip 上使用 protobuf-net r480.zip 。这是最新的稳定版本吗？

我在序列化自定义集合时遇到问题。

```
public static void TestSerialization() {
    using (var stream = new MemoryStream()) {
        var b1 = new B1 { 1 };
        // Throws System.ArgumentException: Repeated data (a list, collection, etc) has inbuilt behaviour and cannot be subclassed
        Serializer.Serialize(stream, b1);
    }

    using (var stream = new MemoryStream()) {
        var b2 = new B2 { 2 };
        Serializer.Serialize(stream, b2);
        stream.Position = 0;
        var b2Deserialized = Serializer.Deserialize<B2>(stream);

        // This fails because b2Deserialized.Count is 0.
        Assert.AreEqual(1, b2Deserialized.Count);
    }

    using (var stream = new MemoryStream()) {
        RuntimeTypeModel.Default[typeof(A2<int>)].AddSubType(1000, typeof(B2));
        var b2 = new B2 { 2 };
        // Throws System.ArgumentException: Repeated data (a list, collection, etc) has inbuilt behaviour and cannot be subclassed
        Serializer.Serialize(stream, b2);
    }
}

[ProtoContract]
[ProtoInclude(1000, typeof(B1))]
public class A1<T> : List<T> { }

[ProtoContract]
public class B1 : A1<int> { }

[ProtoContract]
public class A2<T> : List<T> { }

[ProtoContract]
public class B2 : A2<int> { } 
```

感谢 Anser Marc，如果仅使用列表，删除 Proto 属性效果很好。不幸的是，实际代码更复杂 - 派生集合包含其他值（在实际代码中，模板参数的类型为 Entity 而不是 int，并且集合中的成员是对集合中元素的父级的引用）。这是一个更好的表示。

```
 public static void TestSerialization() {
        using (var stream = new MemoryStream()) {
            var b = new B { 23 };
            b.SomeValue = "abc";
            Serializer.Serialize(stream, b);

            stream.Position = 0;
            var deserialized = Serializer.Deserialize<B>(stream);
            Assert.AreEqual(1, deserialized.Count);
            Assert.AreEqual(b[0], deserialized[0]);

            // This fails because deserialized.SomeValue == null
            Assert.AreEqual(b.SomeValue, deserialized.SomeValue);
        }
    }

    public class A<T> : List<T> { }

    public class B : A<int>
    {
        [ProtoMember(1)]
        public string SomeValue;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:01:43.307

IMO 错误消息非常清楚：列表不支持继承。这是因为列表没有占位符，所以没有地方可以存储这些信息。在 XML 术语中（注意 protobuf 与 XML 完全不同），它类似于（如果您熟悉 XmlSerializer）的输出：

```
[XmlElement("item")]
public List<Foo> Items { get; set; } 
```

仅输出：

```
<item>...</item>
<item>...</item>
<item>...</item> 
```

（但没有“项目”节点 - 没有任何地方可以说关于列表本身的任何内容）

我试图理解你试图用这种继承来代表什么。坦率地说，我没有看到任何有用的东西——因为列表具有内在的行为，你根本不需要为这些定义*合同*；只需将它们用作列表。

在一般意义上，通常最好*封装*列表，而不是*继承*它们。

# html5-canvas - Three.js 的 Canvas 渲染器中的阴影？

> ID：11614971
> 
> 赞同：0
> 
> 时间：2012-07-23T14:50:56.920
> 
> 标签：html5-canvas, three.js

从 r49 开始，[Three.js](http://mrdoob.github.com/three.js/)不支持 Canvas 渲染器中的阴影，对吧？

我需要的是一个物体正下方的阴影，就像光源是无限的`y`（大约是中午的太阳）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:30:06.310

您可以复制对象，将其设置`scale.y`为`0.001`并使用黑色作为材料:)

# blogs - 如何将我的 Tumblr 索引页面移动到不同的页面？

> ID：11614973
> 
> 赞同：0
> 
> 时间：2012-07-23T14:50:59.473
> 
> 标签：blogs, tumblr, portfolio

我的 tumblr 已全部设置好，并且运行良好。然而，我现在手头拮据，买不起域名，所以我想我会用我在 tumblr 上的索引页作为我投资组合的登录页面。因此，当我访问 name.tumblr.com 时，并没有看到博客条目列表，它看起来就像一个普通的网站。我已经完成了，而且效果也很好。（它不是太专业，但我认为 name.tumblr.com 之类的东西看起来比 name.freehosting.com 好一点。）

当我将以前的 tumblr 索引页面直接复制并粘贴到新的 tumbr 页面（即 name.tumblr.com/blog-page）时，问题就出现了。现在，当我访问 name.tumblr.com/blog-page 时，我的帖子无法加载。我的样式表和所有图形都加载了，但帖子没有。

我想知道是否有办法使这项工作，使用 tumblr 中的子页面作为我的博客，而不是让它显示在索引页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:33:34.270

不，没有办法做你想做的事。

还有其他方法可以解决您的情况：

*   在您购买域名之前，将您的所有帖子设为私有；
*   在您购买域名之前，使用特殊元标记使您的博客不被索引；
*   使用子域。

# php - php 表单文件上传无名文件

> ID：11614975
> 
> 赞同：0
> 
> 时间：2012-07-23T14:51:12.077
> 
> 标签：php

嗨，我有这段代码：

```
 <?php
$name = $_POST['name']; 
$email = $_POST['email'];
$phone = $_POST['phone'];
$company = $_POST['company'];
$phone = $_POST['phone'];
$address = $_POST['address'];
$address2 = $_POST['address1'];
$zip = $_POST['zip'];
$delivery = $_POST['delivery'];
$represents = $_POST['represent'];
$npairs = $_POST['npairs'];
$cuff = $_POST['cuff'];
$notes = $_POST['Text'];

    // Headers
        $headers = "From: $email";

        // create a boundary string. It must be unique
          $semi_rand = md5(time());
          $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

          // Add the headers for a file attachment
          $headers .= "\nMIME-Version: 1.0\n" .
                      "Content-Type: multipart/mixed;\n" .
                      " boundary=\"{$mime_boundary}\"";

        $fileatt      = $_FILES['artwork1']['tmp_name'];
        $fileatt_type = $_FILES['artwork1']['type'];
        $fileatt_name = $_FILES['artwork1']['name'];

$todayis = date("l, F j, Y, g:i a") ;

$attn = $attn ; 
$subject = $attn; 

$notes = stripcslashes($notes);
$interested = stripcslashes($interested);

$message = " $todayis [EST] \n
From: $name \n
e-mail: $email \n
Phone: $phone \n
Company: $company \n
Phone: $phone\n
Address: $Address\n
State / Providence:  $address2\n 
Zip code: $zip
Country: $delivery

Represents: $represents
Number of pairs: $npairs
Style of Socks: $cuff

Message: $notes \n 
";

        if (is_uploaded_file($fileatt)) {
          // Read the file to be attached ('rb' = read binary)
          $file = fopen($fileatt,'rb');
          $data = fread($file,filesize($fileatt));
          fclose($file);

          // Base64 encode the file data
          $data = chunk_split(base64_encode($data));

          // Add file attachment to the message
          $message .= "--{$mime_boundary}\n" .
                      "Content-Type: {$fileatt_type};\n" .
                      " name=\"{$fileatt_name}\"\n" .
                      //"Content-Disposition: attachment;\n" .
                      //" filename=\"{$fileatt_name}\"\n" .
                      "Content-Transfer-Encoding: base64\n\n" .
                      $data . "\n\n" .
                      "--{$mime_boundary}--\n";
        }

 );

mail("my@mail.com", 'My tittle', $message,$headers);

?> 
```

但是由于某种原因，当我在邮件中收到附件时，没有任何信息，我收到“无名”。没有扩展或任何东西..有人知道我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:15:32.120

```
 $message = " {$todayis} [EST] \n
From: {$name} \n
e-mail: {$email} \n
Phone: {$phone} \n
Company: {$company} \n
Phone: {$phone}\n
Address: {$Address}\n
State / Providence:  {$address2}\n 
Zip code: {$zip}
Country: {$delivery}

Represents: {$represents}
Number of pairs: {$npairs}
Style of Socks: {$cuff}

Message: {$notes} \n 
"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:02:40.443

在 $message 部分将变量放入 {} 括号？由于需要将它们放入字符串中，您还可以将字符串与变量连接起来。

# iphone - Objective-C中的子类化和继承

> ID：11614980
> 
> 赞同：3
> 
> 时间：2012-07-23T14:51:22.020
> 
> 标签：iphone, objective-c, ios

我有一个名为 的类`AbstractBook`，它有一个属性：

```
@property(strong) AbstractPage *page; 
```

现在说我有一个`AbstractBook`被调用`WhiteBook`的子类和一个被调用的子`AbstractPage`类`WhitePage`。我希望`WhiteBook`类继承`page`对象，但在这个类中，我希望它是特定`WhitePage`类而不是`AbstractPage`.

因此，在 中`WhiteBook`，我只是将属性重新声明为`WhitePage`：

```
@property(strong) WhitePage *page; 
```

但是，我收到一个警告：`WhitePage is incompatible with AbstractPage inherited from AbstractBook.`实现我的目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:11:39.463

你想做的事情基本上是不可能的。不要忘记这一点：

```
@property(strong) AbstractPage *page; 
```

声明一个 getter**和一个 setter**。

一般来说（这通常是针对 OO 编程，而不仅仅是 Objective-C），重写 getter 返回超类实现的返回类型的子类是没有问题的，因为这不会破坏 API 契约。在你的情况下，一个实例`WhitePage`也是一个`AbstractPage`.

但是，setter 不同。您不能限制参数的类型，因为您的子类必须在使用 an`AbstractBook`的任何地方都可用，因此在它认为是 an 的东西上调用 setter 的代码`AbstractBook`有权传入**任何子** `AbstractPage`类的实例，因为这就是API说。

我想我会做的是添加一个方法来`AbstractBook`调用类似的东西

```
-(bool) isLegalPage: (AbstractPage) aPage; 
```

始终在基类中返回 true，但仅在`WhiteBook`. 然后我将手动实现设置器，如下所示：

```
-(void) setPage: (AbstractPage*) aPage
{
    if (![self isLegalPage: aPage])
    {
        // throw an exception or do other error notification
    }
    else
    {
        Do the assignment according to reference count/ARC/GC model
    }
} 
```

记录如果页面不合法，setter 将抛出异常，并且人们应该使用该`isLegalPage:`方法进行测试。

替代 id 具有只读属性并在基类和子类中使用不同的设置器，或者在基类中根本没有设置器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T15:20:36.833

Objective C中没有属性类型[*协方差*](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)，所以如果你想要一个属性返回 的子类`AbstractPage`，你需要`whitePage`在你的`WhiteBook`子类中定义一个单独的属性，比如 。`page`您也可以从您的财产中返回相同的值，并且它会起作用。此外，如果您的用户在 上调用方法`AbstractPage*`，他们甚至不需要将其强制转换为`WhitePage*`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T15:22:43.313

请记住对接口而不是实现进行编程。

=======================

# 选项1

如果您的 Whitebook 确实是 AbstractBook 的后代，您不需要让 WhiteBook 有一个名为“page”的新属性，因为您的 AbstractBook 已经声明它是您的 WhiteBook 免费获得的。

只要您的 WhitePage 从 AbstractPage 继承，您就应该能够将您的页面对象转换为 WhitePage。然后您将获得 AbstractPage 的所有原始功能，以及 WhitePage 的所有功能。

因此，您不需要在 Whitebook 中重新声明页面。如果您转到 Whitebook.h 文件并删除此行

```
@property(strong) WhitePage *page; 
```

然后进入你的 Whitebook.m 文件并输入 self.page 你不应该得到任何编译警告。然后你可以将页面转换为 WhitePage，你应该很高兴。

警告：这意味着您需要在任何使用它的地方将页面转换为 WhitePage，这并不理想。

=======================

# 选项：2

您也可以尝试将代码保留原样，但请确保在 WhiteBook 中再次合成“页面”道具。

=======================

# 选项：3

您也可以尝试保留现有代码，但请确保在 WhiteBook 中将 @dynamic 用于“页面”属性。然后自己实现 getter 并返回 WhitePage 而不是 AbstractPage。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T15:05:23.857

[如何用更具体的类型覆盖超类的属性？](https://stackoverflow.com/questions/5896085/how-to-override-a-superclass-property-with-more-specific-types)

通常，如果您在`@synthesize`您的`AbstractBook`班级和班级中使用，它应该可以正常工作（当然，除非您使用综合方法来分配非to ）。`@dynamic``WhiteBook``AbstractPage``WhitePage``page`

# php - 在 Symfony 2 中使用 Composer 和 git 在不同项目中重用包的正确方法是什么？

> ID：11614981
> 
> 赞同：2
> 
> 时间：2012-07-23T14:51:25.130
> 
> 标签：php, symfony

我想重用一个包，例如：Company/CommonBundle

所以我需要知道的是如何将使用“php app/console generate:bundle”创建的包转换为供应商包，可通过 Composer 安装，并使用 git 进行版本控制。

供应商名称似乎有一个约定，例如：'monolog/monolog/src/Monolog'。有这方面的指南吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:09:43.027

您可以为此使用[满足](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md)。我自己从未使用过它，但 Stof（他自己！）告诉我，如果您想拥有某种私人作曲家存储库，那么这是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:47:33.620

好吧，我想通了

1) 卸载新创建的包并将其移动到其他地方
2) 为其创建一个 git 或 hg 存储库，提交并推送
3) 在 composer.json 中将依赖项添加到您的项目
4) 运行“composer update nothing”

就是这样。Composer 下载了存储库，因此您可以根据需要对其进行修改、提交/推送并按照 3) 和 4) 使其可用于所有其他项目。如果捆绑包已经安装，您可以像这样更新它：'composer update mybundle'。享受。

现在我需要弄清楚的是如何将包自动添加到 AppKernel.php 等。如果你找到了如何做到这一点，请分享。

# jqplot - Jq-Plot x 轴间距

> ID：11614989
> 
> 赞同：1
> 
> 时间：2012-07-23T14:51:46.393
> 
> 标签：jqplot

我在使用折线图将 x 轴中的计算标签正确间隔时遇到问题。如果我想有 5 个数据点缺失一些（例如 [1,50.1]、[2,49.2]、[5,20.4]、[6,17]、[7,23.3]），x 轴将显示 1，然后显示 2，然后显示 3 和 4 应该是 5、6 和 7 的空间。我想要的是将第 5 个数据点放在第 2 个数据点旁边（理想情况下，在第 3 个数据点的位置）。基本上我试图隐藏一个数据点，但将 x 轴值保留在网格中。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:13:20.550

试试这个：

```
<script type="text/javascript">
$(document).ready(function () {
    var plot2 = $.jqplot('chart2', [[[1,50],[2,49],[5,20],[6,17],[7,23]]], {
        title: 'Plot',
        axesDefaults: {
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
        },
        axes: {
            xaxis: {
                label: "X Axis",
                pad: 0,
                ticks:[1,2,5,6,7] //you can create this dynamically
            },
            yaxis: {
                label: "Y Axis"
            }
        }
    });
}); 
```

更新：

```
<script type="text/javascript">
$(document).ready(function () {
    var producciones = [];
    for (var i = 0; i < 2000; i++) { producciones.push(new Number(i),new Number(i)) }
    var plot2 = $.jqplot('chart2', [producciones], {
        title: 'Plot',
        axesDefaults: {
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer
        },
        axes: {
            xaxis: {
                label: "X Axis",
                pad: 0,
                numberTicks: 100
            },
            yaxis: {
                label: "Y Axis"
            }
        }
    });
}); 
```

# javascript - 方向为 rtl 时的 jQuery.scrollLeft() - 不同浏览器中的不同值

> ID：11614994
> 
> 赞同：6
> 
> 时间：2012-07-23T14:51:54.620
> 
> 标签：javascript, jquery, cross-browser, right-to-left

当 body 方向为 rtl 时，div 的 scrollLeft 属性在不同的浏览器中似乎返回不同的值。

可以在这里看到一个例子 - [http://jsfiddle.net/auVLZ/2/](http://jsfiddle.net/auVLZ/2/)

```
body { direction: rtl; }
div.Container { border: 5px solid #F00; width: 500px; height: 400px; overflow: auto; }    
div.Content { background-color: #00F; width: 900px; height: 380px; }​

<div id="divContainer" class="Container">
    <div class="Content"></div>
</div>
<br />
<input id="showScrollLeft" type="button" value="Show ScrollLeft" />​

$(document).ready(function()
{
    $("#showScrollLeft").click(function(e)
    {
        alert($("div.Container").scrollLeft());
    });
});​ 
```

**Chrome** - 初始值为 400，当滚动条向左移动时为 0。

**IE8** - 0 和 400。

**火狐**- 0 和 -400。

是什么导致了这种差异，如何处理？

**编辑**：请注意，“常规” scrollLeft 也会发生这种情况 -`document.getElementById("divContainer").scrollLeft`返回相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:50:59.377

尽管我希望避免这种情况，但我最终还是使用了浏览器检测：

```
function GetScrollLeft(elem)
{
    var scrollLeft = elem.scrollLeft();
    if ($("body").css("direction").toLowerCase() == "rtl")
    {
        // Absolute value - gets IE and FF to return the same values
        var scrollLeft = Math.abs(scrollLeft);

        // Get Chrome and Safari to return the same value as well
        if ($.browser.webkit)
        {
            scrollLeft = elem[0].scrollWidth - elem[0].clientWidth - scrollLeft;
        }
    }
    return scrollLeft;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:15:11.163

浏览器不兼容。试试[这个](https://github.com/google/closure-library/blob/master/closure/goog/style/bidi.js#L34)

# backbone.js - Backbone.js 事件处理程序触发多次

> ID：11614995
> 
> 赞同：2
> 
> 时间：2012-07-23T14:51:56.347
> 
> 标签：backbone.js, backbone-events, backbone-views

我有一个名为 Form 的视图，它呈现一个表单以编辑列表，或者呈现列表本身，具体取决于传递给呈现的参数。我添加了事件处理程序，以便可以切换显示/编辑模式。为了简单起见，我从下面的代码中删除了它，但这只是为 View 在上下文中所做的事情提供了一些上下文。

我可以在另一个需要表单或要呈现的列表的视图中将此表单视图实例化为子视图，我已在 New 视图中将其呈现为表单。

当我需要保存时，我调用 form:save 事件，它会在 Form 视图中触发一个保存表单的例程，我刚刚在此处调用了一个 console.log 来显示它的工作原理。在我的代码中，我通过 $('a#submit').click 绑定调用 form:save 绑定，该绑定绑定到 ApplicationView 插入的导航按钮（但我认为这对于这个问题的目的并不重要。）

假设我离开了新视图，并且多次返回。当我点击保存时，该方法会运行我实例化并呈现新表单视图的次数。

至今：

我已经尝试在 New 视图的 Form 视图上的 close 方法中执行 unbind() 和 remove() ，但没有成功。

我想我可能在范围界定方面有问题，但我不确定。

我知道这与我的导航绑定无关。

我认为这可能与僵尸视图有关。

任何让它只运行一次的指针？

```
App.Views.New = Support.CompositeView.extend
initialize: (options) ->
    _.bindAll this, 'render'
    @model = new App.Models.Item()

render: ->
    self = this

    form = new App.Views.Form model: @model, collection: @collection

    @$el.append form.render().el

    setTimeout (->
        $('a#submit').click (e) ->
            e.preventDefault()
            App.eventHandler.trigger 'form:save'
    ), 0
    this

App.Views.Form = Support.CompositeView.extend
initialize: ->
    _.bindAll this, 'render', 'save'

    App.eventHandler.on 'form:save', @save

render: ->
    self = this
    # RENDER TEMPLATE HERE
    this

save: ->
    console.log 'form saved' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:56:55.703

我相信您的问题是您每次要呈现表单时都在创建一个新视图，但您并没有摆脱旧视图。您可以做的是销毁旧视图或保留对它的引用，而不是每次都创建新视图，只需将模型传递给现有视图并刷新/重新渲染显示

# iphone - iPhone iOS5 iCloud 是否必须打开两个应用程序才能接收彼此的 iCloud 更新？

> ID：11614997
> 
> 赞同：0
> 
> 时间：2012-07-23T14:52:08.047
> 
> 标签：iphone, ios5, core-data, icloud

我正在测试一个启用了 iCloud 的基于库的 iPhone 应用程序。使用这样的应用程序，对核心数据持久存储的更改会在多个设备上传播。

我感兴趣的是：**当需要更新的应用程序关闭时，iCloud“文档和数据”更改是否会跨设备传播？** 场景：设备A进行更改，设备B的应用程序关闭。一旦用户在一段时间后重新启动设备 B，更改就已经存在。

**或者**

**应用程序是否必须在其他设备上打开才能请求数据模型更新？** 场景：设备 A 对基于 iCloud 的核心数据堆栈进行了更改。设备 B 的应用程序上线，检查是否有更改，请求下载更改。

谢谢你的澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:35:28.530

前一个选项更接近现实，但您的两个选项都不能正确描述情况。

关键是，如果您将 CoreData 与 iCloud 一起使用，更新将随时到来

1.  您的应用正在运行
2.  并且操作系统决定现在是告诉应用程序的正确时间。

然后，您的应用程序会被动地响应操作系统告诉您的内容，就像在任何事件驱动的应用程序开发中一样。阅读Apple开发者网站上再次提供的 Apple[文档和/或相关 WWDC 幻灯片。](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/_index.html)

此外，Drew McCormack 有一系列关于这个主题的精彩博客文章，名为“Under the sheet with iCloud and CoreData”，从[这里](http://mentalfaculty.tumblr.com/post/23231176783/under-the-sheets-with-icloud-and-core-data-how-it)开始。

# java - 当对象不再使用但仍被内存占用时，我们可以称它为 Object 吗？

> ID：11614998
> 
> 赞同：-5
> 
> 时间：2012-07-23T14:52:16.237
> 
> 标签：java, oop, memory, memory-management, garbage-collection

考虑本准则

```
String variable = "";
variable = "3";
variable = "4"; 
```

由于字符串是不可变的，因此将创建三个对象。但只有最后一个赋值给“4”的对象是有效的。

根据定义，前几行中使用的对象（变量=“3”和变量=“”）仍在内存中。

我的问题是，当一个对象不再被引用时，我还能称它为对象还是只是一个**不可用的内存位置**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:54:38.697

对象永远是对象。如果它是可达的，则在下一个 GC 周期没有资格进行 GC。否则有资格获得 GC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:57:10.577

对于初学者，不会在一般堆中创建字符串对象，它们宁愿驻留在字符串池中。因此，即使“”和“3”没有被任何变量引用，它们仍然会留在池中，等待将来使用（或销毁）。所以不，它们不在不可用的内存位置。

为了回答您的问题，它们仍将被称为对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:54:48.673

我认为您仍然可以将其称为对象，因为您可以将其与 this.variable="3"; 一起使用 也许

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:57:58.093

它们不再被代码引用，实际上只是内存中某个位置的字节模式，但它们仍然是对象。GC 必须获得对象的句柄，以便最终确定它。所以它们仍然作为对象“起作用”......

请参阅：[Java 中何时调用 finalize() 方法？](https://stackoverflow.com/questions/2506488/java-finalize-method-call)