# StackOverflow 问答 10226000-10226999

# php - 在 PHP 中循环插入查询

> ID：10226000
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:16:48.820
> 
> 标签：php, mysql, html, sql

我无法通过 PHP 脚本在 SQL 中插入相同的值 N 次。我有这个vslue？

```
Table Info  column (ID,Name, LastName,)
Valus ('',Alain,Alian); 
```

我想要做的是在同一个表中插入这个值 10 次使用 EG 的 While 循环或类似的任何想法？

```
<?php
    $i=1;
    While ($i<= 5)      
    {
       $sql="INSERT INTO arivage
          (ID_Ship,Date_ariv,Date_achat,prov_id,Sph,cyl,Prod_type,Pord_color)
          VALUES
          ('','$date','$date1','$prov_id','$sph','$cyl','$Prod_type','$Pord_color')";
       $i++;
    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:23:20.777

你有一些错误吗？

你需要的是可行的

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
  die('Could not connect: ' . mysql_error());
}

for($i = 0; $i<10; $i++) {
    $sql="INSERT INTO arivage (ID_Ship,Date_ariv,Date_achat,prov_id,Sph,cyl,Prod_type,Pord_color) VALUES ('','$date','$date1','$prov_id','$sph','$cyl','$Prod_type','$Pord_color')";
    $result = mysql_query($sql);
    if (!$result) {
     die('Invalid query: ' . mysql_error());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:22:49.407

我假设你有一个到数据库的连接（通过使用 mysql_connect() + mysql_select_db()），并且在编写它之后也执行你的查询（通过 mysql_query($sql)）。

我需要知道列**ID_Ship**的数据类型是什么？这是**PRIMARY KEY**和**auto_increment**吗？如果是，那么您需要将查询更改为：

```
INSERT INTO arivage (ID_Ship,Date_ariv,Date_achat,prov_id,Sph,cyl,Prod_type,Pord_color) 
VALUES ('','$date','$date1','$prov_id','$sph','$cyl','$Prod_type','$Pord_color') 
```

到：

```
INSERT INTO arivage (Date_ariv,Date_achat,prov_id,Sph,cyl,Prod_type,Pord_color) 
VALUES ('$date','$date1','$prov_id','$sph','$cyl','$Prod_type','$Pord_color'); 
```

注意：ID_ship 被移除，'' 也被移除。

此删除是为了防止为第二、第三等记录插入相同的主键。请记住，主键必须是唯一的。不指定它将让 MySQL 插入生成的值（因为它是 auto_increment）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-19T20:47:34.567

如果你需要在这里绑定参数是另一种方式。

```
public function insert($rows) 
    {
        $setValues = null;

        foreach($rows as $column => $value) 
        {
          $setValues .= "{$column}=:{$column},";
        }

        $setValues = rtrim($setValues, ',');

        $query = "INSERT INTO {$this->_table} SET {$setValues}";

        $stmt = $this->_conn->prepare($query);

        foreach($rows as $col => $val) 
        {
            $stmt->bindParam(":{$col}", $val);
        }

        $stmt->execute();
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T10:22:47.447

试试这个..这可能有效

```
$sql= "INSERT INTO TABLE_NAME(field1,field2) VALUES( ";
    for($i=0;$i<10;$i++)
    {
       $sql.="('value1', 'value2'), "
    }
    $sql.=" )"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-19T10:24:44.603

你应该添加

```
mysql_query($sql); 
```

到您的代码，以便在周期之间执行查询。

```
$i=1;
While ($i<= 5)      
{
 $sql="INSERT INTO arivage
 (ID_Ship,Date_ariv,Date_achat,prov_id,Sph,cyl,Prod_type,Pord_color)
 VALUES('','$date','$date1','$prov_id','$sph','$cyl','$Prod_type','$Pord_color')";

 mysql_query($sql);

    $i++;
} 
```

# java - 如何在android中获得2次之间的差异

> ID：10226002
> 
> 赞同：1
> 
> 时间：2012-04-19T10:16:54.857
> 
> 标签：java, android, calendar

我想找出当前系统时间和插入的数据&时间之间的差异`String`。我试过这个：

```
 try {

            String strFileDate = "2012-04-19 15:15:00";
            DateFormat formatter2 = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss");
            Date date = formatter2.parse(strFileDate);
            long difference = date.getTime() - System.currentTimeMillis();
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(difference);
            Toast.makeText(getBaseContext(),
                    formatter2.format(calendar.getTime()), Toast.LENGTH_LONG)
                    .show();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

但它并没有给我正确的结果。我做对了吗？

## **更新**

我尝试关注::

```
String strFileDate = "2012-04-19 15:15:00";
            DateFormat formatter2 = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss");
            Date date = formatter2.parse(strFileDate);
            long diffInMs = date.getTime()
                    - new Date(System.currentTimeMillis()).getTime();

            long diffInSec = TimeUnit.MILLISECONDS.toSeconds(diffInMs);

            long hour = diffInSec / (1000 * 60 * 60);
            double minutes = diffInSec / (1000 * 60);
            // long diffInHour = TimeUnit.to(diffInMs);

            Toast.makeText(getBaseContext(),
                    "left time is :: " + hour + ":" + minutes,
                    Toast.LENGTH_LONG).show(); 
```

**输出::** **剩余时间是:: -2 : -131.0**

## **更新(20/4/2012)**

```
try {
            Date dt = new Date();
            String strFileDate = "2012-04-20 13:10:00";
            DateFormat formatter2 = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss");
            Date date = formatter2.parse(strFileDate);
            String s = getTimeDiff(dt, date);
            Log.i("Date is :: >>> ", s);
        } catch (Exception e) {
            e.printStackTrace();
        }
 public String getTimeDiff(Date dateOne, Date dateTwo) {
        String diff = "";
        long timeDiff = Math.abs(dateOne.getTime() - dateTwo.getTime());
        diff = String.format("%d hour(s) %d min(s)", TimeUnit.MILLISECONDS.toHours(timeDiff),
                TimeUnit.MILLISECONDS.toMinutes(timeDiff) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(timeDiff)));
        return diff; 
```

}

**输出::** 04-20 12:48:06.629: INFO/Date is :: >>>(1295): 2183 hours(s) 38 min(s)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:23:08.053

```
String strFileDate = "2012-04-19 15:15:00";
DateFormat formatter2 = new SimpleDateFormat("yyyy-mm-dd hh:mm:ss");
Date date = formatter2.parse(strFileDate);
long diffInMs = date.getTime() - new Date(System.currentTimeMillis()).getTime();

long diffInSec = TimeUnit.MILLISECONDS.toSeconds(diffInMis);

long diffInHour = TimeUnit.MILLISECONDS.toHours(diffInMis); 
```

使用 TimeUnit 获取秒数。 [http://developer.android.com/reference/java/util/concurrent/TimeUnit.html](http://developer.android.com/reference/java/util/concurrent/TimeUnit.html)

编辑：

在此处获取[TIMEUNIT 代码](http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/TimeUnit.java/?v=source&disposition=attachment)

```
public String getTimeDiff(Date dateOne, Date dateTwo) {
        String diff = "";
        long timeDiff = Math.abs(dateOne.getTime() - dateTwo.getTime());
        diff = String.format("%d hour(s) %d min(s)", TimeUnit.MILLISECONDS.toHours(timeDiff),
                TimeUnit.MILLISECONDS.toMinutes(timeDiff) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(timeDiff)));
        return diff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:20:25.293

使用 JodaTime 计算周期（时差）。[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:26:06.977

```
 Calendar calendar = Calendar.getInstance();
calendar.setTime(date.getYear(),date.getMonth(),date.getDay(),date.getHourOFday(),date.getMinutes(),date.getSeconds); // not syntactically right..
long difference = System.currentTimeMillis()-calendar.getTimeInMillis(); 
```

并获得小时差异

```
double hour = difference/(1000*60*60);
double minutes = difference/(1000*60); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:20:16.857

*   你得到什么输出？
*   你期望什么输出？

如果您需要以秒为单位的时间，请参阅[#3960661 。](https://stackoverflow.com/questions/3960661/android-difference-between-two-dates-in-seconds)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-28T22:16:27.760

# validation - 如何验证（格式 000.0）WP7 中的文本框

> ID：10226003
> 
> 赞同：1
> 
> 时间：2012-04-19T10:16:57.683
> 
> 标签：validation, windows-phone-7, textbox, decimal

我想检查数字格式，因为用户以以下格式输入每个数字，小数点前三位，点后一位（如果有）

用户输入 3 位数字的那一刻，我试图添加小数点。用户输入数字时是否会触发任何事件？

TextInput 和 TextInputStart 事件未按预期工作。当我尝试输入 332 时，它显示为 233。在 TextInputStart 事件上调用以下函数。

```
private void TestFunction(object sender, TextCompositionEventArgs e)
    {
        TextBox txtbox = e.OriginalSource as TextBox;
        string r = txtbox.Text;

        if(r.Contains('.'))
        {
            for (int i = 0; i < r.Length; i++)
            {
                if (r.Substring(i, 1) == ".")
                {
                    txtbox.Text = r.Substring(0, i + 2);

                }
            }
        }

        if (r.Length == 2 && r[2] != '.')
        {
            r += ".";
            txtbox.Text = r;
        }

    } 
```

在调试时我注意到，TextInputStart 被触发并且文本框有前一个字符串，而不是最后输入的字符串。

有什么出路吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:35:20.857

您可以使用 OnKeyDown 事件，测量文本的长度，如果是 3，则添加小数。您还可以使用正则表达式检查实际输入的值，或者仅在 TextBox 上设置 InputScope 属性以仅为该特定 TextBox 提供数字键盘。

如果您决定自己添加小数点，那么您可能需要查看[此页面](http://msdn.microsoft.com/en-us/library/ms752349.aspx)，该页面描述了如何将光标移动到文本末尾：

```
tbPositionCursor.Select(tbPositionCursor.Text.Length, 0); 
```

以下是您可能希望如何处理 OnKeyDown 事件：

```
private void TextBox1_OnKeyDown(object sender, KeyEventArgs e)
    {
        TextBox t = sender as TextBox;;
        if (e.Key == ... 
```

因此，您不是在检查 TextBox 的 Text 属性，而是检查 KeyEventArgs 的 Key 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:42:32.273

TextInputStart 事件在 TextBox 更新之前触发，这就是它仍然包含旧文本的原因。不要阅读 txtbox.Text，而是使用 e.Text。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:30:23.350

我不太确定这是否也适用于 WP7，但由于它看起来像 C#，所以我会试一试。在 .NET 中，您还有一个 MaskedTextBox，您可以在其中应用带有 0.00 的 Mask。好处：您的用户只能输入给定格式的数字，而您无需编写任何代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:36:07.347

我使用正则表达式检查小数点前三位和小数点后一位。在文本框的按键事件上调用以下函数。节省大量时间，并且可以避免不必要的使用messagebox。如果有人在寻找答案，这是我的。

```
 private void ValidateValue(object sender, KeyEventArgs e)
    {
        string sInput, sPattern;

        TextBox txtbox = e.OriginalSource as TextBox;
        sInput = txtbox.Text;

        sPattern = @"^([0-9]{0,3})?(\.([0-9]{1})?)?$";
        Regex reg = new Regex(sPattern);

        if (reg.IsMatch(sInput))
        {
            if (sInput != "" && (sInput[0] == '.' || sInput[0] == '0'))
            {
                txtbox.Text = "";
                return;
            }

            txtbox.Text = sInput;
        }
        else
        {
            txtbox.Text = sInput.Substring(0, sInput.Length - 1);
            txtbox.Select(txtbox.Text.Length, 0);
        }
    } 
```

# javascript - 是否可以在 JavaScript 中获取 AS3 电影剪辑的时间？

> ID：10226009
> 
> 赞同：0
> 
> 时间：2012-04-19T10:17:20.740
> 
> 标签：javascript, actionscript-3

只是一个快速的可行性问题。我们正在讨论一个定制的 AS3 电影播放器​​，它将在一个非 Flash 页面上，根据视频的时间显示不同的信息。

如果我要研究通过 AJAX 或其他方式从 JS 中的 flash 剪辑中获取信息，我会从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:38:02.570

您从 ActionScript 到 JavaScript 的通信开始。AS3 中有一个东西 - [ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)提供了这个功能。

然后你应该做的是通过将它从AS发布到网页来在AS中创建一个JS可访问的EventHandler

```
ExternalInterface.addCallback("addEventListener", yourEventDispatcher.addEventListerener); 
```

然后，当播放电影时，您只需将事件分派给 yourEventDispatcher ，后者作为回报将它们传递给 JS

```
ExternalInterface.call(JSFunctionName_from_addEvenet_Listener_call, EventData); 
```

希望，你明白了；这真的很简单。

# java - 尝试在 WebView 中加载时“使用完成操作”

> ID：10226015
> 
> 赞同：11
> 
> 时间：2012-04-19T10:17:52.017
> 
> 标签：java, android, android-webview

我正在测试 Android 应用程序中的内置 WebView。我的问题是以下代码

```
WebView webView = (WebView) findViewById(R.id.webView1);
webView.loadUrl("http://google.com"); 
```

触发一个意图（建议安装的浏览器打开网络），而不是在内置的 WebView 中打开它。我应该怎么做才能避免这种情况？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-19T10:24:41.907

```
WebView mWebView= (WebView) findViewById(R.id.webView1);
mWebView.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    });

mWebView.loadUrl("http://google.com"); 
```

这不会打开其他浏览器。从[DEVELOPER's SITE](http://developer.android.com/resources/tutorials/views/hello-webview.html)获得参考。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T10:21:51.550

如果要在应用程序中打开 URL，则需要实现[WebViewClient 。](http://developer.android.com/reference/android/webkit/WebViewClient.html)

检查[此链接](http://developer.android.com/guide/webapps/webview.html)并找到WebViewClient 示例的**处理页面导航**。

# jquery - 如何正确查看手机中的纺车

> ID：10226016
> 
> 赞同：2
> 
> 时间：2012-04-19T10:17:52.183
> 
> 标签：jquery, mobile

我正在做一个从移动设备查看的网站。我在里面做了一个纺车。我的问题是我已经按百分比完成了该网站，但我无法按百分比完成该网站`spinning wheel`。现在纺车的部分看起来像坏了。我该如何解决这个问题。

我从网站上得到了纺车：

> [http://iroylabs.blogspot.in/2011/06/latest-jquery-plugin.html](http://iroylabs.blogspot.in/2011/06/latest-jquery-plugin.html)

我已经上传了纺车：

> [http://rapidsurfing.net/mivotv/spin-wheel/spin-wheel.html](http://rapidsurfing.net/mivotv/spin-wheel/spin-wheel.html)

请有人帮助任何帮助将被appeciate。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:33:57.397

您可以执行一些 JS 代码来根据设备屏幕调整旋转轮的大小，如下所示：

```
var size = screen.width - 20px;
$('.canvas').css({
  width: size,
  height: size
}); 
```

# sftp - 复制时重命名文件

> ID：10226017
> 
> 赞同：2
> 
> 时间：2012-04-19T10:18:00.920
> 
> 标签：sftp, scp, file-rename

在我们的 unix 服务器中，“myfolder”包含许多按日期附加的存档文件夹

```
archive.2012-04-10
archive.2012-04-11 
```

每个存档文件夹都包含一个压缩文件，如下所示

```
my_transaction.log-20120410.gz 
```

我知道下面的一个命令将复制 my_transaction.log-20120410.gz、my_transaction.log-20120411.gz 和 my_transaction.log-20120412.gz 并将其放在“serverip”服务器下的 /tmp 文件夹下。

```
scp /myfolder/archive.2012-04-1[0-2]/my_transaction* username@serverip:/tmp 
```

我的问题有两个部分

1）如果我想将 my_transaction.log-20120409.gz 与上述内容一起复制，那么单行命令是什么？

2）复制和重命名 /tmp 文件夹下的复制文件的命令是什么。也就是说，它应该在 /tmp 下复制如下。我想在复制到“serverip”/tmp 文件夹时添加一个带有事务的 _1。

```
my_transaction_1.log-20120409.gz
my_transaction_1.log-20120410.gz
my_transaction_1.log-20120411.gz
my_transaction_1.log-20120412.gz 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:28:06.117

对于第一点，尝试[扩展通配符](http://www.linuxjournal.com/content/bash-extended-globbing)：（未经测试）

```
# This could go in your ~/.bashrc
shopt -s extglob
scp /myfolder/archive.2012-04-@(09|1[0-2])/my_transaction* username@serverip:/tmp 
```

对于第二点，我认为您不能一次 scp 和重命名所有文件。不过，你可以在一个循环中完成它们。例如（也未经测试）

```
for file in /myfolder/archive.2012-04-@(09|1[0-2])/my_transaction*; do
    newfile=$( echo $file | sed -e "s/my_transaction/my_transaction_1/")
    # Take out the "echo" if the command looks OK
    echo scp $newfile username@serverip:/tmp
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T13:23:21.210

我确实为同一问题找到了一种解决方案，请参阅：

```
scp -v localhost:/home/myuser/test/arquivo* .  2>&1| grep -i modes|awk '{print $6}' 
```

这将获得由 scp 传输的文件名，因为您拥有每个名称，您可以通过这种方式或多或少地在每个文件之后使用 awk 进行重命名：

```
scp -v localhost:/home/myuser/test/arquivo* .  2>&1| grep -i modes|awk '{print "mv "$6" "$6".renamed"}'|sh -x 
```

我希望这对你也有帮助。对我来说工作得很好。

# java - JBoss 编码 utf 8

> ID：10226018
> 
> 赞同：5
> 
> 时间：2012-04-19T10:18:03.593
> 
> 标签：java, gwt, utf-8, jboss

我的列表网格没有正确显示变音符号时遇到问题，我发现当我从 java 插入数据库时​​，值已经被窃听了。

此处的帖子有所帮助，我更改了项目属性-> 文本编码-> 其他-> UTF-8，这解决了我的问题。问题是这只在本地解决了我的问题。

我需要做的是在我的 Jboss 服务器上也以某种方式设置编码。我只能访问此面板，因为我无法直接访问配置文件。我可以从这里做吗？

![在此处输入图像描述](../Images/55e3205107c7d28280e07cf61d960332.png)

对于这个愚蠢的问题，任何建议都表示赞赏和抱歉，但我尝试了我能想到的一切，但没有成功。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T15:41:40.150

这可能会对您有所帮助[https://community.jboss.org/message/643825#643825](https://community.jboss.org/message/643825#643825)

```
<system-properties>
    <property name="org.apache.catalina.connector.URI_ENCODING" value="UTF-8"/>
    <property name="org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING" value="true"/>
</system-properties> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:57:33.327

可以肯定的是，你有这样的 pageEncoding 吗？

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>
<f:loadBundle basename="i18n.messages" var="msg"/>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T16:11:32.610

您可以创建一个过滤器来拦截应用程序中的每个请求，因此您可以在此过滤器中设置字符编码。[developer.jboss](https://developer.jboss.org/thread/222755)有一个线程。过滤器可以如下：

```
 @WebFilter(filterName = "CharacterEncodingF", urlPatterns = {"/*"})
    public class CharacterEncodingF implements Filter {

   public CharacterEncodingF() {
   }   

   /**
    *
    * @param request The servlet request we are processing
    * @param response The servlet response we are creating
    * @param chain The filter chain we are processing
    *
    * @exception IOException if an input/output error occurs
    * @exception ServletException if a servlet error occurs
    */
   public void doFilter(ServletRequest request, ServletResponse response,
           FilterChain chain)
           throws IOException, ServletException {

         request.setCharacterEncoding("UTF-8");
         chain.doFilter(request, response);

   }

   @Override
   public void init(FilterConfig filterConfig) throws ServletException {
   }

   @Override
   public void destroy() {
   }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-30T01:08:56.530

也许这对某人有用：

`Window > Preferences > General > Workspace > Text file encoding`

# php - 如何在 php 中动态添加正文标签

> ID：10226019
> 
> 赞同：0
> 
> 时间：2012-04-19T10:18:04.000
> 
> 标签：php

我在服务器上有很多文件需要通过 php 脚本进行修改。我想在文件内容之前和之后添加 html 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:49:37.480

你的问题不清楚。基本上，你可以这样做：

```
$file_name = 'something';
$old_content = file_get_contents($file_name);

$html_before = '<html>... something before the old content';
$html_after = '</html>... something after the old content';

$result = $html_before . $old_content . $html_after;

file_put_contents($file_name, $result); // overwrite the original file. make sure you have backup for that. 
```

如果要对目录中的所有文件执行此操作，可以尝试：

```
$dir_path = '/path/to/your/dir';

$dir = dir($dir_path);
if ($dir !== false) {
    while (($item = $dir->read()) !== false) {
        if ($item == '.' || $item == '..') continue; // skip . and ..
        $path = $dir->path . '/' . $item;
        if (is_dir($path)) continue; // skip directory

        $old_content = file_get_contents($path);

        $html_before = '<html>... something before the old content';
        $html_after = '</html>... something after the old content';

        $result = $html_before . $old_content . $html_after;

        file_put_contents($path, $result); // overwrite the original file!
    }
    $dir->close();
} 
```

# c# - 覆盖另一个项目的方法

> ID：10226021
> 
> 赞同：1
> 
> 时间：2012-04-19T10:18:09.883
> 
> 标签：c#, asp.net

我的解决方案中有一个网站，并且一个数据类项目
数据类现在引用到网站
我想要从数据类到网站的覆盖方法
我认为这是可能的，因为编译后数据类是网站中的 dll

我的数据类：

```
public partial class forInherit
{
    public virtual int getUserID()
    {
        return 0;
    }
}

public partial class logFunctions : forInherit
{
} 
```

和我的网站：

```
public partial class logFunctions
{
    public override int getUserID()
    {
    }
} 
```

但我的错误是

**找不到合适的方法来覆盖**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:21:33.197

如果部分类定义的命名空间相同并且它们在同一个程序集中定义，则部分类定义仅定义相同的类。
您的情况不符合这两个标准。

如果我正确理解您的意图，您希望让数据类的使用者能够`getUserID()`在仍然使用`logFunctions`数据类项目中的类的同时更改方法的行为。

您可以通过多种方式实现这一点，一种非常简单的方法是提供`logFunctions`一个在调用时`getUserID()`调用的委托。另一种可能性是引入一个传递给`logFunctions`.

第一个选项的示例：

在您的数据项目中：

```
public class forInherit
{
    public virtual int getUserID()
    {
        return 0;
    }
}

public class logFunctions : forInherit
{
    public Func<int> GetUserIDDelegate { get; set; }

    public override int getUserID()
    {
        if(GetUserIDDelegate == null)
            return 0;
        return GetUserIDDelegate();
    }
} 
```

在您的网络项目中：

```
logFunctionsInstance.GetUserIDDelegate = () => { return 1; }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:23:33.517

`logFunction`您网站中的类需要继承您`forInherit`数据类项目中的类。

虽然您的两个`logFunction`类都`partial`位于不同的项目中，并且可能位于命名空间（您没有指定）。因此，两者仅按名称相关，而不与编译器相关。

# ruby-on-rails - Rails 2.3.11 -> 3.2.3 带有正则表达式的简单 gsub 不起作用

> ID：10226023
> 
> 赞同：2
> 
> 时间：2012-04-19T10:18:14.307
> 
> 标签：ruby-on-rails, regex, gsub

我尝试将我的 Rails 2.3.11 应用程序升级到 Rails 3.2.3，但是 ApplicationHelper 中的这个功能在浏览器中不再正常工作（在 Rails 控制台中一切都很好）：

```
def basic_markup(text)
  if text
    text.gsub!(/(\A|\s|\[|\()_(.+?)_/iu, '\1<em>\2</em>')
    text.gsub!(/(\A|\s|\[|\()#(.+?)([^&])#/iu, '\1<del>\2\3</del>')
    text.gsub!('->', '→')
    text.gsub!('<-', '←')
  end
  text
end

text = '#strikeout# normal _italic_'
puts basic_markup(text)
# Rails 2.3.11
# => "<del>strikeout</del> normal <em>italic</em>"
# Rails 3.2.3
# => "#strikeout# normal <em>italic</em>" 
```

Rails 2.3.11 示例：http: [//moly.hu/karcok/150362](http://moly.hu/karcok/150362)

在 Rails 3.2.3 上也是如此： http://moly.hu:3000/karcok/ [150362](http://moly.hu:3000/karcok/150362)

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T07:13:17.733

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

[Frost](https://stackoverflow.com/users/746882/frost)建议升级：

> 更新我上面的评论：我刚刚尝试创建一个新的 rails 3.2.3 项目，将该方法放入`application_helper`并从具有相同文本的视图中调用它，并且工作正常。我认为您在其他地方遗漏了一些东西。

[纳吉·本斯](https://stackoverflow.com/users/1343619/nagy-bence)证实：

> 问题解决了，也许 Rails 的 simple_format 在 2.3.11 和 3.2.3 之间发生了变化，但现在它可以正常运行了。感谢您的评论！

# facebook - 更改事件的事件所有者

> ID：10226028
> 
> 赞同：0
> 
> 时间：2012-04-19T10:18:37.597
> 
> 标签：facebook, events, owner

我们在这里有一个关于事件所有权的小问题。是否可以在两个粉丝页面之间转移所有权？管理面板中似乎没有选项，因此也许可以通过图形 api 快速执行此操作。

有任何想法吗？！帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:24:52.330

无法将事件的所有权转让给其他页面/用户。

# ios - 使用 NSDictionary 获取 TableView

> ID：10226029
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:18:40.383
> 
> 标签：ios, xcode

我认为这很简单，但我不能让它工作..

我有一个文本字段，我在其中输入一个字符串......然后我将它发送到一个网络服务。

我得到 JSON 并解析它。

```
- (void)requestFinished:(ASIHTTPRequest *)request

// some code ::::::

NSLog(@"OkRequest || %@ ", jsonDictionary);

for (NSDictionary *ville in jsonDictionary)
{
    NSString *title = [ville objectForKey:@"label"];
    NSLog(@"%@", title);

} 
```

我制作了 NSDictionary，但是当我想将其设置为表格视图时......我不知道如何将该字典发送到另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:05:11.283

声明一个类成员`NSDictionary *_jsonDict;`

在`requestFinished:`方法中，将值分配给类成员并保留它。然后将表格视图重新加载为`[self.tableView reloadData];`

在您的`cellForRowAtIndexPath:`方法中，从字典中获取值并将其设置为标签。

更新：

```
- (void)requestFinished:(ASIHTTPRequest *)request
{
      ... some code
     _jsonDict = [jsonDictionary retain];
     [self.tableView reloadData];
} 
```

# ios - 如何让两个 AIR IOS 应用程序通信？

> ID：10226036
> 
> 赞同：0
> 
> 时间：2012-04-19T10:19:14.357
> 
> 标签：ios, air

一种可能的解决方案是使用自定义 URL：

我遵循[以下教程](http://www.saumitrabhave.com/2011/10/facebook-single-sign-on-for-air-ios.html)，然后进一步探索 IOS 中两个 AIR 应用程序的通信。- 第一个应用程序使用您在第一步中描述的自定义 URI“fbMY_APP_ID”，它可以被 Safari 调用。- 第二个应用程序使用带有自定义 URI 的 URLRequest 与第一个应用程序通信。

我收到错误消息：“SecurityError：错误 #2193：违反安全沙箱：navigateToURL:app:/secondApp.swf 无法访问 tfbMY_APP_ID://test”。

1.  我在这种方法中遗漏了什么吗？有没有办法摆脱这个问题？
2.  除了使用自定义 URL 还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:03:13.753

根据 Adob​​e AIR 强加的安全沙箱，navigateURL 仅限于众所周知的协议，例如 http:、https:、sms:、tel:、mailto:、file:、app:、app-storage:、vipaccess: 和 connectpro： . [您可以通过此处](http://help.adobe.com/en_US/air/html/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7cba.html)和[此处](http://help.adobe.com/en_US/air/reference/html/flash/net/package.html)找到更多信息。

一种解决方法是利用 html 页面作为中间页面，该页面将在其中中继调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T08:35:55.700

您可以像这样从应用程序清单文件中添加自定义协议（您可以添加多个协议）

```
<iPhone>
...
    <InfoAdditions>
        <![CDATA[
            ...
            <key>CFBundleURLSchemes</key>
            <array>
                <string>thisIsSomeCustomAppProtocol</string>
            </array>
            ...
            ]]>
    </InfoAdditions>
    ...
</iPhone> 
```

你这样调用自定义协议：

```
<a href="thisIsSomeCustomAppProtocol://SomeCustomDataString_goes_here&use_url_encoded_strings:">This will call the App with some parameters included (if need be)</a> 
```

或者像这样使用 navigateToURL(...) ：

```
var _customURL_str:String       = "thisIsSomeCustomAppProtocol://SomeCustomDataString_goes_here&use_url_encoded_strings";
var _isProtocolAvailable:Boolean= URLUtils.instance.canOpenUrl(_customURL_str);
//
if(_isProtocolAvailable)
{
    navigateToURL(new URLRequest(_customURL_str));
} 
```

要侦听呼叫并实际处理正在传递的数据，请执行以下操作：

```
NativeApplication.nativeApplication.addEventListener(InvokeEvent.INVOKE,_invokeHandler); 
```

事件处理程序将像这样处理数据：

```
private function onInvoke(e:InvokeEvent):void
{
    //...
    var _queryString:String = e.arguments[0] ? e.arguments[0] : "";
    //
    if(_queryString.length > 0){
        //handle the incomming data string
    }else{
        //no extra data string was sent
    }
    //...
} 
```

希望有帮助

干杯：

-缺口

# c# - 无法更改附加到游戏对象的脚本上的公共变量。值在播放时恢复

> ID：10226044
> 
> 赞同：5
> 
> 时间：2012-04-19T10:19:53.690
> 
> 标签：c#, unity3d, gameobject

这是我的第一个问题。一直没能找到关于这个话题的任何东西。

我想创建一个编辑器脚本来更改附加到游戏对象的脚本中的许多公共布尔值。

我将此脚本附加到游戏对象。GameObject 是一个预制件：

```
using UnityEngine;
using System.Collections;

public class ScriptWithPublicBools : MonoBehaviour {

    public bool b1;
    public bool b2;
} 
```

这是我的编辑器脚本：

```
using UnityEngine;
using System.Collections;
using UnityEditor;

public class EditorHelper : ScriptableObject
{
    [MenuItem("Trace/Trace")]
    public static void trace()
    {
        foreach (GameObject g in Selection.gameObjects)
        {
            ScriptWithPublicBools tb = g.GetComponent<ScriptWithPublicBools>();

            if (tb)
            {
                tb.b1 = false;
                tb.b2 = true;
            }
        }
    }
} 
```

脚本工作正常，游戏对象上的布尔值在编辑器中正确设置。但是当我按下 PLAY 按钮时，两个 bool 的值会切换回它们在应用脚本之前的值。

预制件的值是什么并不重要，这些值只是在应用编辑器脚本之前恢复到值。

我做错了什么还是一个错误？

如果我应用编辑器脚本，将场景另存为新场景，然后打开新创建的场景，值也是错误的。

但是，如果 GameObject 不是预制件，一切都可以完美运行，并且即使在启动播放模式之后，这些值也会保持编辑器脚本给出的值。

所以问题只存在于使用预制件时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T08:23:53.723

您需要`EditorUtility.SetDirty (tb);`在所有更改完成后调用，有关此的更多信息，请参阅[EditorUtility.SetDirty](http://unity3d.com/support/documentation/ScriptReference/EditorUtility.SetDirty.html)。

如果您需要更改预制件本身，请查看[PrefabUtility](http://unity3d.com/support/documentation/ScriptReference/PrefabUtility.html)

# java - Java - 将图像转换为 Base64

> ID：10226046
> 
> 赞同：24
> 
> 时间：2012-04-19T10:19:55.037
> 
> 标签：java, image, base64

我在将 gif 图像转换为 base 64 字符串时遇到问题。

当我转换它时，代码加了我 100,000 AAAAAA，而图像真的很小！

这是我的代码：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.util.ArrayList;

public class Main
{

    public static void main(String[] args)
    {
        try
        {
            FileWriter fstream = new FileWriter("./out.txt");
            BufferedWriter out = new BufferedWriter(fstream);

            File folder = new File("./flags/");
            File[] listOfFiles = folder.listFiles();

            for (int i = 0; i < listOfFiles.length; i++)
            {
                if (listOfFiles[i].isFile())
                {
                    Main.readFile(out, listOfFiles[i]);
                }
            }

            out.close();
            System.out.println("Done");
        }
        catch (Exception e) {}
    }

    public static void readFile(BufferedWriter out, File file)
    {
        try
        {
            byte[] byteArray = new byte[102400];
            FileInputStream fis = new FileInputStream(file);
            String base64String;
            int bytesRead = 0;
            while ((bytesRead = fis.read(byteArray)) != -1)
            {
                new String(byteArray, 0, bytesRead);
                base64String = Base64.encode(byteArray);
                out.write("public static ImageIcon getFlag" + file.getName() + "()");
                out.newLine();
                out.write("{");
                out.newLine();
                ArrayList<String> array = Main.cut(base64String);
                out.write("return Utils.toImage(\"" + array.get(0) + "\"");
                for (int i=1; i<array.size()-1; i++)
                {
                    out.write("<tab>+\"" + array.get(i) + "\"");
                }
                out.write("<tab>\"" + array.get(array.size() - 1) + "\");");
                out.newLine();
                out.write("}");
                out.newLine();
                out.newLine();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    public static ArrayList<String> cut(String in)
    {
        ArrayList<String> array = new ArrayList<String>();
        while (in.length() > 76)
        {
            array.add( in.substring(0, 77) );
            in = in.substring(77);
        }
        return array;
    }
} 
```

基本上，它在一个文本文件中写入`out.txt`了一堆 java 方法，其中包含 base 64 代码。

这是输出的（小）部分：

```
return Utils.toImage("R0lGODlhEAALANUAANPTAPZva/n5AfLySPz8iYqY3O01NgoksbGZa+kYGOskJKi05vb2XZ+r4+05O"<tab>+"Pv7eO3tKPv7bZak4dSvebC76tC2iPNISPX1UMkAAMm6U/NWTeYAAF5y1LqlevNaWpSh3e7uQ+1CQt"<tab>+"gAAKOv5Vds1C1IvpGf37a/7OnTYZ6q6NGkamd71/LyPusvLvFiTEFbx9rPb/HuaczATd7eAPAAAH2"<tab>+"N2vE+PMqiYuXQUsKufJqn4jlRxUlhy+CpelFnz/PxbyH5BAAAAAAALAAAAAAQAAsAAAaQwBVnSBIY"<tab>+"jzTaZsk5OSmEKOHxCAQ8nk1zMUo9Ir8Y42Kx2Dyi5qihi1QqkxzZZtCISBS2JNILoFQDdC0WIj4UO"<tab>+"hImDBMoLjcsBi0KISI8C4kFMB0uOAgykgkOGC8LJgUFFx0IqxAKCQkGGDsjpzUDLBkZEBCvCS0YJW"<tab>+"wfBQxjAyAgDpG/OwfOBzPRANMY1dVBADsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab>+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"<tab> 
```

谢谢。

编辑：我正在使用这个问题的base64代码：[https ://stackoverflow.com/a/4265472/1295422](https://stackoverflow.com/a/4265472/1295422)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-19T10:24:57.073

```
 byte[] byteArray = new byte[102400];
 base64String = Base64.encode(byteArray); 
```

无论您在数组中实际使用多少数据，该代码都将编码 102400 个字节。

```
while ((bytesRead = fis.read(byteArray)) != -1) 
```

您需要在某处使用 bytesRead 的值。

此外，这可能不会一次性将整个文件读入数组（它只读取 I/O 缓冲区中的内容），因此您的循环可能无法正常工作，您最终可能会在数组中得到一半的图像.

我会在这里使用 Apache Commons IOUtils：

```
 Base64.encode(FileUtils.readFileToByteArray(file)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T10:23:42.953

首先，这行代码：

```
while ((bytesRead = fis.read(byteArray)) != -1) 
```

相当于

```
while ((bytesRead = fis.read(byteArray, 0, byteArray.length)) != -1) 
```

所以它是从偏移量 0 写入 byteArray，而不是从您之前写入的位置。

你需要这样的东西：

```
int offset = 0;
int bytesRead = 0;

while ((bytesRead = fis.read(byteArray, offset, byteArray.length - offset) != -1) {
    offset += bytesRead;
} 
```

读取数据（字节）后，您可以将其转换为 Base64。

但是还有更大的问题 - 您使用的是固定大小的数组，因此太大的文件将无法正确转换，并且代码也因此而变得更加棘手。

我会放弃字节数组并使用以下内容：

```
ByteArrayOutputStream buffer = new ByteArrayOutputStream();
// commons-io IOUtils
IOUtils.copy(fis, buffer);
byte [] data = buffer.toByteArray();
Base64.encode(data); 
```

或者像 Thilo 使用 FileUtils 那样进一步压缩它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T10:24:12.797

线

```
base64String = Base64.encode(byteArray); 
```

将整个数组（102400 字节）转换为 Base64，而不仅仅是您读取的字节数。您需要将字节数传递给它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T10:24:33.223

`new String(byteArray, 0, bytesRead);`不修改数组。您需要使用`System.arrayCopy`将数组修剪为实际数据大小。否则，您将处理所有 102400 字节，其中大部分是零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-07T03:01:22.667

Late GraveDig ...只需将您的字节数组限制为文件大小。

```
FileInputStream fis = new FileInputStream( file );
byte[] byteArray= new byte[(int) file.length()]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-04T05:44:33.767

您可以使用文件对象来获取文件的长度来初始化您的数组：

```
int length = Long.valueOf(file.length()).intValue();
byte[] byteArray = new byte[length]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-08T03:55:49.550

您可以创建一个大数组，然后使用 System.arrayCopy 将其复制到一个新数组

```
 int contentLength = 100000000;
        byte[] byteArray = new byte[contentLength];

        BufferedInputStream inputStream = new BufferedInputStream(connection.getInputStream());
        while ((bytesRead = inputStream.read()) != -1)
        {
            byteArray[count++] = (byte)bytesRead;
        }

        byte[] destArray = new byte[count];
        System.arraycopy(byteArray, 0, destArray , 0, count); 
```

destArray 将包含您想要的信息

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-17T01:49:18.297

我意识到这是一个老问题，但也许有人会发现我的代码示例很有用。此代码在 Base64 中对文件进行编码，然后对其进行解码并将其保存在新位置。

```
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.Arrays;

import org.apache.commons.codec.binary.Base64;

public class Base64Example {

    public static void main(String[] args) {

        Base64Example tempObject = new Base64Example();

        // convert file to regular byte array
        byte[] codedFile = tempObject.convertFileToByteArray("your_input_file_path");

        // encoded file in Base64
        byte[] encodedFile = Base64.encodeBase64(codedFile);

        // print out the byte array
        System.out.println(Arrays.toString(encodedFile));

        // print the encoded String
        System.out.println(encodedFile);

        // decode file back to regular byte array
        byte[] decodedByteArray = Base64.decodeBase64(encodedFile);

        // save decoded byte array to a file
        boolean success = tempObject.saveFileFromByteArray("your_output_file_path", decodedByteArray);

        // print out success
        System.out.println("success : " + success);
    }

    public byte[] convertFileToByteArray(String filePath) {

        Path path = Paths.get(filePath);

        byte[] codedFile = null;

        try {
            codedFile = Files.readAllBytes(path);
        } catch (IOException e) {
            e.printStackTrace();
        }

        return codedFile;
    }

    public boolean saveFileFromByteArray(String filePath, byte[] decodedByteArray) {

        boolean success = false;

        Path path = Paths.get(filePath);

        try {
            Files.write(path, decodedByteArray);
            success = true;
        } catch (Exception e) {
            e.printStackTrace();
        }

        return success;
    }
} 
```

# java - GWT Google Maps API V3 - 检测点击地点

> ID：10226048
> 
> 赞同：0
> 
> 时间：2012-04-19T10:19:59.677
> 
> 标签：java, javascript, gwt, google-maps-api-3

如何检测何时在地图上点击了某个地点，以及如何阅读该地点的所有详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:41:46.050

这是代码的一部分：

该怎么办 ：

```
private MouseEventCallback onRightClick = new MouseEventCallback() {
    @Override
    public void callback(HasMouseEvent mouse) {
        Window.alert("here :" + mouse.getLatLng().toUrlValue() ) ;
    }
}; 
```

而你所说的方式必须被称为

```
Event.addListener( mapWidget.getMap(), MapEvent.rightclick.name(), onRightClick ) ; 
```

# javascript - Tumblr jQuery Like（从 rel 抓取）

> ID：10226052
> 
> 赞同：0
> 
> 时间：2012-04-19T10:20:04.670
> 
> 标签：javascript, jquery, button, iframe, tumblr

我用砖石和无限滚动编写了一个 HTML5（样板）主题，到目前为止效果很好。现在我想在每篇文章中加入转发和点赞按钮。我试图添加它，但由于某种原因，like 按钮不起作用。

主题网址：http: [//inspiration.patrikarvidsson.com/](http://inspiration.patrikarvidsson.com/)

在我的 script.js 的底部，我添加了这个类似代码。

```
$('a.like').click(function() {
    var post = $(this).closest('.post');
    var id = post.attr('id');
    var oath = post.attr('rel').slice(-8);
    var like = 'http://www.tumblr.com/like/'+oath+'?id='+id;
    $('#likeit').attr('src', like);
    $(this).toggleClass( 'liked' );
}); 
```

完整的 scripts.js 可以在这里找到： [http ://static.tumblr.com/e8lbmds/WB5m2q1it/scripts.js](http://static.tumblr.com/e8lbmds/WB5m2q1it/scripts.js)

如果需要，这里是 plugins.js：[http ://static.tumblr.com/e8lbmds/NDPm14qu6/plugins.js](http://static.tumblr.com/e8lbmds/NDPm14qu6/plugins.js)

上面代码的最后一行使链接变为红色；我想这表明脚本会响应。但是不会产生类似的东西。在初始化正文标记之后，我有以下代码：

```
<iframe id="likeit"></iframe> 
```

相关的 CSS 如下：

```
#likeit { display: none; }
.liked, .like:hover { color: red !important; } 
```

任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:35:41.913

想通了，一旦我分析了 jQuery 生成的代码，这是一个非常简单的修复。

```
 <article{block:Date} id="post-{PostID}"{/block:Date} class="post type-post {PostType} hentry entry" rel="{ReblogURL}"> 
```

这在 iframe src 中生成了以下链接

[http://www.tumblr.com/like/O0TzjAHv?id=post-21555443705](http://www.tumblr.com/like/O0TzjAHv?id=post-21555443705)

因此，显然删除上面代码中的**post-**使得最终结果链接正确；并且喜欢现在有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:12:22.567

看起来你已经让它工作了，但对于未来的读者，我已经简化了我的喜欢按钮代码，以消除大多数人对它的混淆（帖子 ID），使其成为简单的剪切和粘贴。它可以在[http://like-button.tumblr.com](http://like-button.tumblr.com)获得。

之后立即将其粘贴到您的`{block:Posts}{/block:Posts}`块中`{block:Posts}`：

```
<script>
if ( !document.getElementById( 'my-like-frame' ) ) {

var styles =
      '<style>'
    + '.my-like {'
    + 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAABH0lEQVQ4y62T30vCUBiGv/9YuhBLkCA08FdogRFFYFEUhhZNCCQoSESiIOii68pl5qV6s8Eb7+SMHXNs6S7ejZ3zvA+ccT4BICofvS88dJ7w8vqG8WQC754K17lPjrx3z3l8D4YoVaqIrWbcJNbzaHefNZjfXPdy5b0jsO/IRqMxUpmSBnhz2bx1QL79GPbpEePmzhdSyW8fBDL0SK68HwiGCT2S3NiKREaPzP7QRRNPZSHpwm4kMnqkYbQikdEjZv8HK2ubS4nY75mD6WU8qzeXkrHvToBlWSjuHC4kYo99V8bwBnM0/iMiz542myq2bSPskcmR/zPos7lvP8Lv/nGd+/N6c2Xq2KcXhiY6qV1rxwotU3n/NHF8fgW+g9hfsHJlJUYljcgAAAAASUVORK5CYII=) !important;'
    + 'height:17px;'
    + 'width:19px;'
    + 'cursor:pointer;'
    + 'display:inline-block;'
    + 'vertical-align:top;'
    + '}'
    + '.my-liked, .my-like:hover {'
    + 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAABSklEQVQ4y2P4//8/Awy/O3fu/905c/4/2779/69Pn/4jy8Hwz/fv/z/buvX/vfnz/7+/eBFFDZj4cOXK/8O+Pv+36+rA8W4zs/8Ply1DUXx/4cL/u0yMUdQdCQ76/+nWLbA6hq+PH//fbW6OogAZ3+zvByu81t6OU80ea6v/P16//s9wqboKpyIYPhYeTlDN1abG/wz7HR0JKiQGH3Bz+8+ww0CfKobtMjb6z0ANg+CGgQKPKt50dfnPcL6wkCqGXaoo/8/w5tgxyg3T0wUnYHBiPJuZSZFhF8pK/8NzACjrgKKWHINAOef3168Iw0D429OnGFmKEAZlJVDKR8mbMAyy4XRqClEGnc3J+f/nxw/MjI6OQflxh6EBzvR0Z9o0rCUKVsNA+MuD+/9PJiSgGHQmPf0/KDhw6cFpGAy/OnAAbOibEyf+E1ILAFBjDrchm7KrAAAAAElFTkSuQmCC) !important;'
    + 'height:17px;'
    + 'width:19px;'
    + 'cursor:pointer;'
    + 'display:inline-block;'
    + 'vertical-align:top;'
    + '}'
    + '</style>';
document.head.insertAdjacentHTML( 'beforeEnd', styles );
document.body.insertAdjacentHTML( 'beforeEnd', '<iframe id="my-like-frame" style="display:none;"></iframe>' );
document.addEventListener( 'click', function ( event ) {
    var myLikeLink = event.target;
    if( myLikeLink.className.indexOf( 'my-like' ) > -1 ) {
        var myLikeFrame = document.getElementById( 'my-like-frame' ),
            liked = ( myLikeLink.className == 'my-liked' ),
            command = liked ? 'unlike' : 'like',
            reblog = myLikeLink.getAttribute( 'data-reblog' ),
            postId = myLikeLink.getAttribute( 'data-id' ),
            oauth = reblog.slice( -8 ),
            likeUrl = 'http://www.tumblr.com/' + command + '/' + oauth + '?id=' + postId;
        myLikeFrame.src = likeUrl;
        liked ? myLikeLink.className = 'my-like'
            : myLikeLink.className = 'my-liked';
    };
}, false );

};
</script> 
```

并将其粘贴到`{block:Posts}{/block:Posts}`您想要喜欢按钮的块中：

```
<div class="my-like" data-reblog="{ReblogURL}" data-id="{PostID}"></div> 
```

# javascript - JavaScript 等价于 PHP __call

> ID：10226064
> 
> 赞同：33
> 
> 时间：2012-04-19T10:20:43.453
> 
> 标签：javascript

`__call`在 PHP 中，您可以使用“魔术”函数检测方法何时被调用，即使该方法不存在。

```
public function __call($methodName, $args)
{
    // do something
} 
```

您可以调用任何方法，并将名称和参数传递给这个神奇的包罗万象。

JavaScript 中是否有类似的技术允许调用任何方法，即使它实际上不存在于对象上？

```
var foo = (function () {
    return {
         __call: function (name, args) { // NOT REAL CODE
             alert(name); // "nonExistent"
         }
    }
}());

foo.nonExistent(); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-22T14:42:18.497

可以**使用**ES6[代理 API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)：

```
var myObj = {};
var myProxy = new Proxy(myObj, {
  get: function get(target, name) {
    return function wrapper() {
      var args = Array.prototype.slice.call(arguments);
      console.log(args[0]);
      return "returns: " + args[0];
    }
  }
});
console.log(myProxy.foo('bar'));
```

[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy#Browser_compatibility)上提供了浏览器兼容性。截至 2017 年 8 月，除 Internet Explorer 之外的所有浏览器（包括 Microsoft Edge）都支持它。

请参阅[此答案](https://stackoverflow.com/a/3757676/1559840)以更完整地了解代理。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-19T10:28:03.263

**[自 Gecko 43 (Firefox 43 / Thunderbird 43 / SeaMonkey 2.40) 以来已过时](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/noSuchMethod)**

您可以[`__noSuchMethod__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/NoSuchMethod)在 Firefox 中使用。不幸的是，它是非标准的......

相关问题：[是否有与 __noSuchMethod__ 特性等效的属性，或者在 JS 中实现它的方法？](https://stackoverflow.com/questions/2266789/is-there-an-equivalent-of-the-nosuchmethod-feature-for-properties-or-a-way)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-15T17:28:18.370

*以@amirnissim 的回答为基础。*

正如我们大多数人可能已经知道的那样，[ES6 引入了代理 API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)，它允许我们创建一个对象（代理对象）来捕获对该对象的调用，从而我们有机会“路由”用户调用的属性我们可能希望的任何对象。

### 模仿 PHP 的魔法方法

不幸的是，没有办法使用 Proxy 对象扩展一个类，但我们可以做的是设置一个中间步骤，将一个对象变成一个代理，并将任何传入的方法调用路由到对象本身可用的方法：

```
class MyProxy
{
    constructor ()
    {
        return this.asProxy()
    }

    /**
     * Return as a proxy with this object as its target.
     */
    asProxy ()
    {
        let handler = {
            /**
             * This function is called whenever any property on the Proxy 
             * is called.
             * 
             * @param target the "parent" object; the object the proxy 
             *        virtualizes
             * @param prop the property called on the Proxy
             */
            get: function (target, prop)
            {
                /* This will return the property on the "parent" object
                 */
                if (typeof target[prop] !== 'undefined')
                    return target[prop]

                // TODO: implement custom logic
            }
        }

        return new Proxy(this, handler)
    }
} 
```

这实质上同时为您提供了与 PHP 的魔术`__get`方法和`__call`方法相同的功能。至于`__call`版本，我们只是返回一个函数供用户输入参数。

### 证明上述

为了使用它，让我们首先在`TODO: implement custom logic`驻留的地方添加一些自定义逻辑：

```
if (prop === 'helloWorld')
    return function () { console.log("Hello, world!") }
else
    return function () { console.log("Where art thou, hello world?") } 
```

如果我们继续创建`MyProxy`该类的新实例，我们可以触发我们实现的自定义逻辑：

```
let myProxy = new MyProxy()

myProxy.test()
myProxy.hello()
myProxy.helloWorld() 
```

上面的示例输出：

> `Where art thou, hello world?`
> `Where art thou, hello world?`
> `Hello, world!`

当然，也可以从`get`函数返回任何其他类型的值，我们也可以返回字符串或整数。

### 便于使用; 通过继承使用

为了使其更易于使用，我是否建议将该`asProxy`方法包装到另一个类中，然后简单地使用包含该方法的类扩展任何需要“魔术方法”功能的类`asProxy`？通过简单地`asProxy`从构造函数返回方法，您基本上获得了与 PHP 和 JavaScript 中相同的功能。

当然，它也需要在某种程度上`get method`是可编辑的，以便仍然可以从子类处理自定义逻辑。也许通过将闭包发送到然后从函数本身`return this.asProxy(() => {})`调用的那个？`get`或者甚至可能将`get`函数路由到对象`get`上存在的方法`target`？

但是请记住，这仅适用于 ES6。[像 Babel 这样的编译](https://babeljs.io/)器不能，[我引用](http://babeljs.io/learn-es2015/#proxies)：

> 由于 ES5 的限制，不能对代理进行转译或 polyfill。

但是，只要满足此条件，上述解决方案确实可以正常工作。例如，它是[Node.js](https://nodejs.org/en/)中一个完全可行的选项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T10:27:13.767

不。由于 JavaScript 的工作方式，等效项类似于 Python 的`__getattr__`/ `__getitem__`，而不是 PHP 的`__call`，因为它需要在检索属性时而不是在调用它时处理。

然后，您可以查看类似[Python 的 __getattr__ in Javascript 之](https://stackoverflow.com/questions/1441005/pythons-getattr-in-javascript)类的问题，它以这种方式回答它。

另请参阅以下问题：

*   [JavaScript 等价于 PHP 的 __get() 魔术方法](https://stackoverflow.com/questions/3959187/javascripts-equivalent-to-phps-get-magic-method)
*   [所有属性的 JavaScript getter](https://stackoverflow.com/questions/994143/javascript-getter-for-all-properties)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T15:13:16.220

虽然这不是一种优雅的方式，因为我们已经推断出 JavaScript 没有`__call`, `method_missing`，`__getattr__`但可以创建属性组合以创建中继到单个方法的具体函数，并传递用于创建它的属性。

一个例子是[Myriad.js](https://github.com/Wildhoney/Myriad.js)。

# javascript - JQuery检索文本而不是选择列表的值

> ID：10226065
> 
> 赞同：11
> 
> 时间：2012-04-19T10:20:43.797
> 
> 标签：javascript, jquery

我需要从选择列表中获取值，但 JQuery 正在返回选择选项中的文本。

我有以下简单的代码。

```
<select id="myselect">
   <option selected="selected">All</option>
   <option value="1">One</option>
   <option value="2">Two</option>
</select> 
```

然后我使用下面的 JQuery，我认为这会给我带来价值

```
var myOption = $('#myselect').val() 
```

但是当我查看时，`myOption`我会看到“一”或“二”的文字？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T10:31:36.250

更新：添加 val()。

```
console.log($('#myselect').val());

// all option's value
$('#myselect').find('option').each(function(){
    console.log($(this).text());
    console.log($(this).val());
});

// change event
$('#myselect').change(function(){
    console.log($(this).find(':selected').text());
    console.log($(this).find(':selected').val());
}); 
```

​ 演示：http: [//jsfiddle.net/yLj4k/3/](http://jsfiddle.net/yLj4k/3/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-26T09:52:05.537

我遇到了这个问题，因为 jQuery`Val()`函数在我的脑海中，我实际上将选项定义为`<option val='xx'>`而不是`<option value='xx'>`. 这就是造成问题的原因。请参阅此更新[的 jsfiddle](http://jsfiddle.net/xmvFS/23/)。

```
<select id="myselect">
   <option value="1">One</option>
   <option value="2">Two</option>
</select>

<select id="myselect2">
   <option val="1">One</option>
   <option val="2">Two</option>
</select>

<script>
$('select').change(function() {
    alert($(this).val());
});
</script> 
```

第一个`select`将警告“1”或“2”，第二个`select`将警告“一”或“二”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-19T10:23:24.873

获取文本值最简单的方法是

对于选定的选项 Text ：

```
$("#myselect option:selected").text(); 
```

对于选定的选项值：

```
$("select#myselect").val(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T10:36:26.190

[演示](http://jsfiddle.net/n6VzA/1/)

```
$("#myselect").change(function() {
    alert(this.options[this.selectedIndex].value);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:22:11.190

**编辑**

嗨呀

在这里工作演示：使用文本[http://jsfiddle.net/QtjTq/3/](http://jsfiddle.net/QtjTq/3/) && 在此处使用 val [http://jsfiddle.net/QtjTq/4/](http://jsfiddle.net/QtjTq/4/)

像这样访问 text() - `var myOption = $('#myselect option:selected').text()` 访问值 - `var myOption = $('#myselect option:selected').val()`

详细说明：

**如果您想访问`value=`属性**，则为值**`.val()`使用；**

 ****对于文本**，如果您想获取文本，即使用api的`one or two`选定选项。`... option:selected``.text()`

如果您想进一步阅读[http://forum.jquery.com/topic/jquery-using-val-vs-text](http://forum.jquery.com/topic/jquery-using-val-vs-text)

希望这会有所帮助:) 干杯

```
var myOption = $('#myselect option:selected').text() //**or whatever suit you** 
var myOption = $('#myselect option:selected').val()

<select id="myselect">
   <option value="1">One</option>
   <option value="2">Two</option>
</select> 
```**

# php - 如何使用 PHP 将 mysql 转换为 SQLite

> ID：10226067
> 
> 赞同：0
> 
> 时间：2012-04-19T10:21:01.767
> 
> 标签：php, database, sqlite

我在 mysql 服务器上有一个数据库。我想在不使用 shell 或 perl 脚本的情况下将其转换为 sqlite3 数据库。我需要一些帮助使用 PHP 转换相同的内容。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:32:51.850

根据数据库，您应该轻松创建一个 mysql 转储（以 SQL 创建和插入的形式），然后在 sqlite 中运行它。您可能需要更改表创建语句，因为每个引擎使用不同的列数据类型。

# c# - Windows 窗体：是否可以在运行时插入 .cs 文件？

> ID：10226081
> 
> 赞同：1
> 
> 时间：2012-04-19T10:21:33.773
> 
> 标签：c#, .net, winforms, artificial-intelligence

我们组织了人工智能竞赛，人们可以为我们用 C# Windows 窗体编写的游戏引擎编写人工智能。竞争对手为我们的游戏编写 AI 代码，我们手动将这些代码插入到我们的游戏中，但这需要付出努力，我认为有一种方法可以让人们在运行时插入他们的 .cs 文件。我们如何设计这种架构，请有人帮助我们。在此先感谢并为我的英语感到抱歉。

注意：.cs 文件包含人工智能逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:27:27.710

也许使用策略模式。让参赛者通过接口实现入口点。然后，您的游戏外壳可以扫描给定文件夹中的所有程序集文件，并找到实现入口点接口的所有类型。

**更新：**

为了让你开始，我在这里做了类似的事情（见方法`ScanAssembliesForHostTypes`）：[http ://shuttle.codeplex.com/SourceControl/changeset/view/ba9750ca1f7a#Shuttle.Core%2fsource%2fShuttle.Core.Host%2fHostFactory.cs](http://shuttle.codeplex.com/SourceControl/changeset/view/ba9750ca1f7a#Shuttle.Core%2fsource%2fShuttle.Core.Host%2fHostFactory.cs)

# maven - 使用本机库的 Surefire JUnit 测试

> ID：10226082
> 
> 赞同：9
> 
> 时间：2012-04-19T10:21:35.463
> 
> 标签：maven, maven-surefire-plugin

我们在 Hudson 中使用 Maven 来运行我们的 Java 构建过程，并使用 Surefire 插件来执行 JUnit 测试，但是我在一个需要本机 dll 的项目的单元测试中遇到了问题。

我们看到的错误是：

> 测试错误：TestFormRegistrationServiceConnection(com.#productidentifierremoved#.test.RegistrationServiceTest): no Authenticator in java.library.path

其中 Authenticator 是我们需要的 dll 的名称。我发现[这个 SO post](https://stackoverflow.com/questions/6195234/pick-up-native-jni-files-in-maven-test-lwjgl "这个 SO 帖子")表明设置它的唯一方法是通过 argLine。我们将配置修改为：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-report-plugin</artifactId>
        <version>2.10</version>
        <configuration>
            <forkMode>once</forkMode>
            <argLine>-Djava.library.path=${basedir}\src\main\native\Authenticator\Release</argLine>
        </configuration>
    </plugin> 
```

但是，如果我们包含 System.out.println(System.getProperty("java.library.path")); 我们可以看到这没有被添加到路径中。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T10:32:56.847

要将系统属性添加到 JUnit 测试，请配置[Maven Surefire 插件](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#systemPropertyVariables)，如下所示：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <configuration>
        <systemPropertyVariables>
          <java.library.path>${project.basedir}/src/main/native/Authenticator/Release</java.library.path>
        </systemPropertyVariables>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

更新：

好的，看来这个属性必须在带有 JUnit 测试的 JVM 开始之前设置。所以我猜你的反斜杠有问题。Java 属性值中的反斜杠用于转义特殊字符，如`\t`(tabulator) 或`\r\n`(windows new-line)。因此，请尝试使用它而不是您的解决方案：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <configuration>
        <forkMode>once</forkMode>
        <argLine>-Djava.library.path=${project.basedir}/src/main/native/Authenticator/Release</argLine>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

# c# - 在主线程中创建对象并在另一个线程中使用它们。怎么做？

> ID：10226084
> 
> 赞同：1
> 
> 时间：2012-04-19T10:21:41.777
> 
> 标签：c#, multithreading, object

现在，它输出 00，而不是 54。我正在学习线程，我卡在这里，我不知道现在该怎么办

```
namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        Point[] array = new Point[20];
        public Form1()
        {
            for (int i = 0; i < 20; i++)
            {
                array[i] = new Point(); // I'm creating objects here
            }
            InitializeComponent();
        }

        void function1()
        {
            array[0].x = 5;
            array[0].y = 4;
        }

        void function2()
        {
            label1.Text = array[0].ToString();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Thread thread1 = new Thread(function1);
            thread1.Start();
            Thread.Sleep(500);
            function2();
        }
    }

    class Point
    {
        public int x;
        public int y;
        public override string ToString()
        {
            return x.ToString() + y.ToString();
        }
    }  
} 
```

当我这样做时（没有另一个线程）

```
private void Form1_Load(object sender, EventArgs e)
{
    function1();
    function2();
} 
```

它工作正常，输出为 54 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:28:15.307

你在做什么没有多大意义。您正在启动一个线程，然后休眠 500 毫秒，然后调用使用该线程结果的函数。

这意味着您的两个操作是顺序相关的，不能并行执行。在这里使用线程是没有意义的。

您没有看到更改的原因可能是因为`thread1`在睡眠结束并被调用之前没有足够的时间来启动和执行其代码`function2`。尝试`thread1.Join()`改用，但就像我说的，这根本没有意义！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:07:30.520

实际上，您的程序按预期在我的计算机上运行。那么为什么它不能在您的计算机上工作（或仅在某些时候工作）？这是因为您的程序中存在**竞争条件**。这意味着您的程序假定第二个线程（执行 function1）将在不到 500 毫秒的时间内为数组分配新值。永远不要对另一个线程完成它的任务需要多长时间做出任何假设。操作系统可以自由选择单个线程执行的时间、频率和时长，以及何时暂停它们。相反，使用同步原语（例如[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)）来确保第二个线程已经完成了它的任务。

此代码显示，如何更改程序正确执行线程同步：

```
 ManualResetEvent MRE = new ManualResetEvent(false);//Add this field to Form1

    void function1()
    {
        array[0].x = 5;
        array[0].y = 4;
        MRE.Set();//This notifies first thread, that values are set.
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Thread thread1 = new Thread(function1);
        thread1.Start();
        MRE.WaitOne();//This makes this thread wait until the second thread calls MRE.Set()
        function2();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:50:40.410

如果`function2`取决于完成，`function1`那么您需要确保在开始之前`function1` *确实*完成`function2`。由于线程如何调度和执行的不可预测性，使用`Thread.Sleep`该作业并不总是有效。

另一个问题`Thread.Sleep`是它阻塞了 UI 线程。在基于 UI 的应用程序中使用多线程时的第一条规则是**永远不要阻塞 UI 线程**。这适用于任何类型的阻塞调用，包括`Thread.Sleep`, `ManualResetEvent`,`Thread.Join`等。

我解决这个问题的方法是将`Task`类与`ContinueWith`方法一起使用。这将在调用之前等待`function1`完成，`function2`而不会阻塞 UI 线程。

```
private void Form1_Load(object sender, EventArgs e)
{
  TaskScheduler ui = TaskScheduler.FromCurrentSynchronizationContext();

  Task.Factory.StartNew(() =>
  {
    function1();
  }).ContinueWith((task =>
  {
    function2();
  }, ui);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:27:37.670

由于缺少“；”，您提供的代码将无法编译 在 Sleep(500) 调用之后。

当语法固定时，它在我的盒子上“工作”。

您没有安全的方式来表明它已经完成。您正在学习，第一课 - 不要等待带有 sleep() 调用的线程。

BackgroundWorker 组件会更容易使用 - 您不必担心显式信号会返回结果。

如果您想坚持使用 Thread 实例，请查看 autoResetEvent 类或 Thread.Join()。

![在此处输入图像描述](../Images/a51ada65fc4a28bed4bbdffe184abe0e.png)

# c# - RestSharp 简单完整示例

> ID：10226089
> 
> 赞同：105
> 
> 时间：2012-04-19T10:21:56.043
> 
> 标签：c#, rest, restsharp

我一直在尝试创建一个使用 RestSharp 调用 Rest API 的简单原型 Web 应用程序。

我一直找不到一个很好的例子。有人可以分享并指导我找到正确的资源吗？我已经看过以下内容，但没有提供我正在寻找的内容，即功能齐全的示例：

[http://restsharp.org/](http://restsharp.org/)（没有完整的示例应用程序）

[http://www.stum.de/2009/12/22/using-restsharp-to-consume-restful-web-services/](http://www.stum.de/2009/12/22/using-restsharp-to-consume-restful-web-services/)（好像老了）

在进行原型设计时，我收到以下代码错误：

```
RestResponse response = client.Execute(request);

*Cannot implicitly convert type 'IRestResponse' to 'RestResponse'. An explicit conversion exists (are you missing a cast?)  * 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-06-18T14:58:00.237

[Pawel Sawicz .NET 博客](http://pawel.sawicz.eu/restsharp/)有很好的解释和示例代码，解释了如何调用库；

得到：

```
var client = new RestClient("192.168.0.1");
var request = new RestRequest("api/item/", Method.GET);
var queryResult = client.Execute<List<Items>>(request).Data; 
```

邮政：

```
var client = new RestClient("http://192.168.0.1");
var request = new RestRequest("api/item/", Method.POST);
request.RequestFormat = DataFormat.Json;
request.AddBody(new Item
{
   ItemName = someName,
   Price = 19.99
});
client.Execute(request); 
```

删除：

```
var item = new Item(){//body};
var client = new RestClient("http://192.168.0.1");
var request = new RestRequest("api/item/{id}", Method.DELETE);
request.AddParameter("id", idItem);

client.Execute(request) 
```

[RestSharp GitHub 页面](https://github.com/restsharp/RestSharp)在页面中间有一个非常详尽的示例。要开始在您的项目中安装 RestSharp NuGet 包，然后在您的代码中包含必要的命名空间引用，那么上面的代码应该可以工作（可能不需要完整的示例应用程序）。

![NuGet RestSharp](../Images/7553291c92e2a1a1a8e90ed651f0a260.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-27T08:51:36.760

改变

```
RestResponse response = client.Execute(request); 
```

到

```
IRestResponse response = client.Execute(request); 
```

为我工作。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-04-19T10:31:49.640

我设法找到了一篇关于这个主题的博客文章，它链接到一个实现 RestSharp 的开源项目。希望对您有所帮助。

[http://dkdevelopment.net/2010/05/18/dropbox-api-and-restsharp-for-ac-developer/](http://dkdevelopment.net/2010/05/18/dropbox-api-and-restsharp-for-a-c-developer/) 博文是2部分，项目在这里： [https ://github.com/ dkarzon/DropNet](https://github.com/dkarzon/DropNet)

如果你有一个完整的例子来说明什么不起作用，它可能会有所帮助。如果您不提供代码，则很难获得有关如何设置客户端的上下文。

# c++ - 可变参数扩展可以用作逗号运算符调用链吗？

> ID：10226090
> 
> 赞同：5
> 
> 时间：2012-04-19T10:21:57.220
> 
> 标签：c++, c++11, comma, variadic

我在看“[如何正确使用可变参数模板](https://stackoverflow.com/questions/2616082/how-to-properly-use-references-with-variadic-templates)的引用”，想知道逗号扩展能走多远。

这是答案的变体：

```
inline void inc() { }

template<typename T,typename ...Args>
inline void inc(T& t, Args& ...args) { ++t; inc(args...); } 
```

由于可变参数被扩展为其元素的*逗号*分隔列表，这些逗号在**语义上**是否等同于模板/函数参数分隔符，或者它们是否**按词法**插入，使其适合任何（后预处理器）使用，包括逗号运算符?

这适用于我的 GCC-4.6：

```
// Use the same zero-argument "inc"

template<typename T,typename ...Args>
inline void inc(T& t, Args& ...args) { ++t, inc(args...); } 
```

但是当我尝试时：

```
// Use the same zero-argument "inc"

template<typename T,typename ...Args>
inline void inc(T& t, Args& ...args) { ++t, ++args...; } 
```

我不断收到解析错误，期待“;” 在“...”之前，并且“args”不会扩展其包。为什么它不起作用？是因为如果“args”为空，我们会得到一个无效的标点符号？合法吗，我的编译器不够好？

（我已经尝试在括号中包含“args”，和/或使用后增量；都没有成功。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:06:45.927

仅在某些情况下才允许解包，并且逗号分隔的语句不属于它们。用你的话：扩展是语义上的而不是词汇上的。但是，这并不重要，因为还有其他几种方法可以做到这一点。已经有某种模式/习惯用法来编写简单的可变参数函数。一种方法：

使用一个辅助模板函数，它什么都不做：

```
template <typename ...Args>
void pass(Args&&...) { } 
```

不使用逗号运算符，而是将表达式传递给此函数：

```
template <typename ...Args>
void inc(Args&&... args)
{
    pass(++std::forward<Args>(args)...);
} 
```

如果表达式必须更复杂，您可以在扩展中使用逗号运算符。`operator++`如果有些返回类型，这可能对您有用`void`：

```
 pass((++std::forward<Args>(args), 0)...); 
```

# mysql - Mysql：如何配置 mysql 代理以进行故障转移处理

> ID：10226091
> 
> 赞同：0
> 
> 时间：2012-04-19T10:22:02.140
> 
> 标签：mysql, configuration, proxy

我们有一个主从复制，单主单从。我们应该使用 mysql 代理来处理从主服务器到从服务器的故障转移吗？

如果是，请说明应该如何配置。我无法找到更好的文档。而且我是这个代理的新手。

问候， 乌代

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:24:14.440

MySQL Proxy 是一个简单的程序，位于您的客户端和 MySQL 服务器之间，可以监控、分析或转换它们的通信。它的灵活性允许无限使用；常见的包括：负载均衡；故障转移；查询分析；查询过滤和修改；还有很多。

MySQL Proxy 的两个相当常见的使用场景是：

1) 跨 MySQL slave 的负载均衡

2) 拆分读写，读取到从数据库服务器，写入到主数据库服务器

当然，您不需要 MySQL Proxy 来实现这些目标。对于从属负载平衡，您可以在从属之前使用常规负载平衡器。对于读写分离，您可以让您的应用程序使用不同的数据库服务器进行读取和写入......但这可能需要对您的应用程序进行重大更改。

如果您想通过将读取发送到从属数据库服务器池来提高读取性能，同时仍将写入发送到主数据库，并且在不修改应用程序的情况下完成所有这些操作，那么 MySQL 代理可能只是你。

有关更多信息，请参阅： [http ://www.cyberciti.biz/tips/mysql-proxy-howto.html](http://www.cyberciti.biz/tips/mysql-proxy-howto.html)

MySQL代理的简单配置如下：

> ```
>  D:\mysql-proxy\mysql-proxy-0.8.1-win32-x86\bin>mysql-proxy.exe --proxy-backend-addresses=<serverIP>:3306 --proxy-address=<proxyIP>:4040 --admin-username=ro
>     ot --admin-password=root --admin-lua-script=<LUA acript> --proxy-lua-script=<same as mentioned in --admin-lua-script> 
> ```

**此配置设置适用于 MySQL-proxy v0.8.1**

# android - 如何在 Open GL 中创建连续重复的滚动背景图像？

> ID：10226092
> 
> 赞同：4
> 
> 时间：2012-04-19T10:22:08.803
> 
> 标签：android, opengl-es, graphic

我有一张图片：background.png。如何使用 android OpenGL ES 或 AndEngine 库或您知道的其他技术创建连续重复的滚动背景图像？

例子：
![移动的云](../Images/e44b7dcca469f810941ee3563c5b8d5b.png)

目前，我使用两个相邻图像技术。我两次加载图像（background.png）并将它们相邻放置，然后移动它们。所以它看起来只是一个连续滚动的图像。

但是，不知何故，我认为仅使用一个图像实例可能会有更好的解决方案。任何人都可以分享吗？

**更新**：
对于好奇的人，这是两个相邻的图像代码（使用 AndEngine 库）：

```
movingBackgroundSprite.registerEntityModifier(new LoopEntityModifier(
    new MoveYModifier(10, -CAMERA_HEIGHT, 0)));     
movingBackgroundSprite2.registerEntityModifier(new LoopEntityModifier(
    new MoveYModifier(10, 0, CAMERA_HEIGHT))); 
```

上面的代码是关于重复制作背景图像并从上到下垂直滚动。

注意：
*movingBackgroundSprite 是一个加载 background.png 图像的 Sprite 类。您可以看到背景 Sprite 有两个实例。
* registerEntityModifier -> 为 Sprite 应用修改器/行为
* LoopEntityModifier -> 循环行为
* MoveYModifier -> 通过 y 位置移动行为。第一个参数是持续时间（你可以忽略它，因为它与问题无关），第二个参数是 Source-Y 位置，第三个参数是 Destination-Y 位置。
* CAMERA_HEIGHT -> 定义背景图像高度的常量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:12:34.903

如果您已经设置`glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT)`（我认为这是默认设置），您可以绘制一个全屏四边形并`s`以小步长增加纹理坐标（如果您愿意，它也可以垂直工作）。

大于 1.0 的值将包裹在纹理的左侧，不需要额外的东西。而且，不需要两次绘制调用。

你没有说你是 ES 1.0 还是 2.0，但如果它是 2.0，你可以将偏移作为统一传递，并将其添加到着色器中的纹理坐标，这比每次更改顶点数据 (texcoord) 更有效框架。虽然是每帧一次的东西，但它可能无论如何都无关紧要，它可能只是一样的。

**编辑：**
我不了解 AndEngine，可能有更简单、更方便的命令来绘制带纹理的全屏四边形......但是给定“OpenGL ES 1.0”，使用立即模式并假设默认 MVP 矩阵，这可能看起来像这样作为一个非常粗略的例子：

```
glBindTexture(GL_TEXTURE_2D, cloudy_sky_texture);
glTexImage(...);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
...
float offset = 0.0f;
while(!quit)
{
    offset += 1.0f/texture_size;

    glBindTexture(GL_TEXTURE_2D, cloudy_sky_texture);

    glBegin(GL_QUADS);
        glVertex2f(-1.0f, -1.0f);
        glTexCoord2f(0.0f + offset, 0.0f);
        ...
        glVertex2f(1.0f,  1.0);
        glTexCoord2f(1.0f + offset, 1.0f);
    glEnd();

    DrawForegroundStuff();
} 
```

为简洁省略了一些行，立即模式不好，还有很大的优化空间，但原理应该清楚。您实际上只需要绘制一个四边形并增加`s`纹理坐标的分量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T08:21:56.877

您可能已经找到了答案，但以防万一其他 Andengine 游戏开发人员在使背景可滚动时感到困惑，我建议使用**AutoParallaxBackground**，因为它易于使用且高效。

要实现 AutoParallaxBackground，请执行以下步骤：

1）声明并初始化BitmapTextureAtlas和TextureRegion。

```
private BitmapTextureAtlas mAutoParallaxBackgroundTexture;
private TextureRegion background_region;
mAutoParallaxBackgroundTexture = new BitmapTextureAtlas(1024, 1024,TextureOptions.DEFAULT);
background_region= BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mAutoParallaxBackgroundTexture, this,"backgroundImg.png", 0, 0); 
```

2）声明并初始化背景精灵和AutoParallaxBackground。

```
final AutoParallaxBackground auto_background = new AutoParallaxBackground(0, 0, 0, 5);         
final Sprite background_sprite = new Sprite(0,0, this.background_region,vbom); 
```

3) 将 background_sprite 作为视差实体添加到 AutoParallaxBackground 对象。

```
auto_background.attachParallaxEntity(new ParallaxEntity(1.7f,background_sprite)); 
```

4）最后，将 AutoParallaxBackground 对象设置为您的场景背景。

```
your_scene.setBackground(auto_background); 
```

希望这会在以后对某人有所帮助。

# c# - C# Outlook AddIn Appointment 事件“ItemSend”未正确取消

> ID：10226095
> 
> 赞同：2
> 
> 时间：2012-04-19T10:22:19.863
> 
> 标签：c#, outlook, add-in

我正在使用 C# 开发一个小的 Outlook 插件，但我无法让这个插件正确地取消 ItemSend 过程。我特此考虑以下情况：考虑这个小插件：

```
 private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        ((Outlook.ApplicationEvents_Event)this.Application).ItemSend += new ApplicationEvents_ItemSendEventHandler(ThisAddIn_ItemSend);
    }

    void ThisAddIn_ItemSend(object Item, ref bool Cancel)
    {
        System.Windows.Forms.MessageBox.Show("You can't save it, it's in the past!");
        Cancel = true;
        return;
    } 
```

现在，当我尝试更改现有约会项目时，我会在约会窗口中打开它时更改它的一些值，例如位置等。点击约会窗口中的“发送”按钮时，文本框中的消息会按预期显示. 但问题是 Outlook 会忽略此取消并已保存更改。唯一发生的事情是约会窗口没有关闭。但是当简单地关闭窗口而不明确保存时，您可以看到 Outlook 已经接受了您对约会项目所做的更改。

这是预期的行为吗？即使“取消”参数已更改为“true”，是否可以阻止 Outlook 保存更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:04:25.817

您还可以使用[`Application.Inspectors.NewInspector`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.inspectorsevents_event.newinspector.aspx)事件并锁定[`AppointmentItem.Send`](http://msdn.microsoft.com/en-us/library/ff865990.aspx)事件。

根据`AppointmentItem.Send`MSDN 文档 - 预期的行为是发送不会发生`Cancel = true`，检查器窗口保持打开状态并且更改仍然保存 - 只是没有发送给与会者。

如果您想取消保存 - 您需要在发送之前锁定[`AppointmentItem.Write`](http://msdn.microsoft.com/en-us/library/ff865085.aspx)事件以取消保存。

# wpf - 画布上的图形数据集

> ID：10226098
> 
> 赞同：0
> 
> 时间：2012-04-19T10:22:46.060
> 
> 标签：wpf, data-binding, wpf-controls, observablecollection, mousemove

observablecollection1 + observablecollection2 <---数据绑定--->画布：

是否有一个允许移动形状并具有可观察集合的数据的画布。

示例：您有一个 ObservableCollection BaseCamp (camp,x,y,otherproperity)，这些营地通过 ObservableCollection 道路 (camp1,camp2,colors) 连接。我想在画布上查看我的数据并移动营地、添加道路等等。

它，我认为是经典用途，但我没有看到这样的画布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:13:16.790

您必须自己创建动画。

基本上，您每 X 秒调用一次函数：

*   清除画布
*   *使用BaseCamp*的属性绘制形状

 *更多信息请访问[http://www.html5canvastutorials.com/advanced/html5-canvas-linear-motion-animation/](http://www.html5canvastutorials.com/advanced/html5-canvas-linear-motion-animation/)

请注意，设置超时的正确方法是

```
window.requestAnimFrame = (function(callback){
return window.requestAnimationFrame ||
window.webkitRequestAnimationFrame ||
window.mozRequestAnimationFrame ||
window.oRequestAnimationFrame ||
window.msRequestAnimationFrame ||
function(callback){
    window.setTimeout(callback, 1000 / 60);
}; 
```

})();*

# tfs - TFS 文件夹差异 -> 查看目标错误？

> ID：10226105
> 
> 赞同：0
> 
> 时间：2012-04-19T10:23:18.030
> 
> 标签：tfs

这是 TFS 2010 中的错误吗？有没有其他人遇到过这个？难道我做错了什么？

重现步骤：

1.  右键单击源代码管理资源管理器中的文件夹，然后选择查看历史记录。
2.  右键单击变更集并选择比较...</li>
3.  对于目标路径，选择另一个（更新的）变更集，然后按 OK。
4.  在结果文件夹差异窗口中，右键单击有差异的文件并选择比较文件。请注意差异，并将比较工具保持打开状态以供将来参考。
5.  返回“文件夹差异”窗口，右键单击同一文件并选择“查看”。选择源并确认您确实查看了源版本。（使用第 4 步中打开的比较工具进行交叉检查。）
6.  返回“文件夹差异”窗口，右键单击同一文件并选择“查看”。选择目标。

预期结果：查看文件的目标版本。

实际结果：我再次获得了文件的源版本。

有其他人得到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:01:17.180

是的，这是 VS 2010 中的一个错误，我可以使用 RTM 和 SP1 版本重现它。我还可以确认这已在目前处于测试阶段的 VS 2012 中得到修复。作为一种解决方法，当您右键单击该项目时，选择查看历史记录。这将向您显示文件的历史记录，您可以从那里右键单击您感兴趣的版本并选择“查看”。

很抱歉给您带来不便。

-Taylor，TFS 版本控制开发主管

# c# - 获取项目索引（rownum）

> ID：10226118
> 
> 赞同：2
> 
> 时间：2012-04-19T10:24:17.273
> 
> 标签：c#, linq, oracle, nhibernate, linq-to-nhibernate

我有 10 000 个元素的表。

```
 IQuerable<IEntity> query = dataRep.Get<IEntity>()
                                   .Query(); 
```

我需要在`obj`不获取所有表项的情况下获取 selected 的索引（rownum）

```
 var obj = query.Where( x => x.Name == "testName")
                .FirstOrDefault(); 
```

简单的 sql 工作正常：

```
 select name, id, r from 
 (
     select name, id, rownum r from collections order by id
 ) where name = 'testName'; 
```

如何在 Linq to NHibernate 中做到这一点？

**编辑：**

我尝试添加到`IEntity`类属性`RowNumber`并将其映射`hbm`为

```
 <property name="RowNumber" formula="rownum" /> 
```

但是之后

```
 var index = query.Where( x => x.Name == "testName")
                   .Select( x => x.RowNumber)
                   .FirstOrDefault(); 
```

始终获得`1`价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:27:44.330

你不能直接过滤查询吗？

```
IQuerable<IEntity> query = dataRep.Get<IEntity>()
                                  .Query()
                                  .FirstOrDefault(x => x.Name == "testName"); 
```

编辑：

要获取项目，您可以将项目投影为匿名类型：

```
var query = (from data in dataRep.Get<IEntity>().Query()
             where Name == "testName"
             select new
             {
                 id = data.id,
                 rowNumber = data.rowNumber
             }).FirstOrDefault(); 
```

# iphone - xcode UIScrollview 滚动不顺畅

> ID：10226119
> 
> 赞同：0
> 
> 时间：2012-04-19T10:24:25.243
> 
> 标签：iphone, xcode, uiscrollview

我想显示一系列缩略图，您可以在其中看到下一个的一部分，类似于应用商店的工作方式。

我的问题是滚动到下一张图片不流畅。如果您向左滑动太慢，它会弹回同一页面，但如果您滚动太快，它会滚动太远，然后弹回下一张幻灯片。我怎样才能使这个平滑类似于应用商店。我认为函数 scrollViewDidScroll 可能会起作用，但无法让它工作，所以到目前为止我的代码如下：

```
 ```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {

   int page = scrollView.contentOffset.x / scrollView.frame.size.width;

   pageControl.currentPage = page;
   CGRect frame = scroller.frame;

   if (page == 0) {
     frame.origin.x = 0
   }
    else if (page == 1) {
     frame.origin.x = 195;
   }   

   else if (page == 2) {
     frame.origin.x = 410;
   } 

   else if (page == 3) {
     frame.origin.x = 630;
   } 

   frame.origin.y = 0;

    [scroller scrollRectToVisible:frame animated:Yes];

}
- (void)viewDidLoad
 {
   [super viewDidLoad];
    for (int i=1; i < 5; i++) {
     if (i == 1) {
       imagen.frame = CGRectMake(30, 0, 217, 317);
     }
     else {
       imagen.frame = CGRectMake((i-1)*217 + 30, 0, 217, 317);
     }

     [scroller addSubView:imagen];

    }

  scroller.delegate = self;
  scroller.contentSize = CSizeMake(320*4, 317);
  scroller.pagingEnabled = YES;

  pageControl.numberOfPages=4;
  pagecontrol.currentPage=0; 
``` 
```

`任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:53:59.580

卷轴在哪里分配？

只需将分页启用设置为 false。`

# c# - C#：System.Windows.Controls.UserControl 作为列表框

> ID：10226121
> 
> 赞同：2
> 
> 时间：2012-04-19T10:24:31.033
> 
> 标签：c#, .net, xaml

我是一名 Java 开发人员，他从另一个团队继承了一个 Web 项目，该团队的唯一开发人员升级并退出。该项目的大部分内容是用 Spring、JSP 和 jQuery 编写的，但是有一个组件是 Silverlight XAP。

当然，该项目刚刚交给我，我们已经遇到了生产问题。我以前从来没有写过一点 C#，现在我正争先恐后地尝试尽快解决这个问题。

这是一个 Microsoft VS 2010 (Pro Edition) C# 解决方案项目，具有由 XAML 和 CS 文件组成的表示层。需要修复的组件是一个文件上传器，它允许用户从他们的机器中选择 1+ 个文件并将它们放在“队列”（列表框）中。然后，只需单击一个按钮，所有“排队”的文件都会上传到我们的服务器。

我需要能够判断列表框何时为空（当有 0 个文件排队/填充它时）。此功能在代码中由名为`ListItemControl.xaml`和的 XAML/CS 文件对表示`ListItemControl.xaml.cs`。

这是 CS 文件的开头：

```
namespace silv.Uploader
{
    public partial class ListItemControl : UserControl
    {
        private UserFile UserFile { get { return (UserFile)this.DataContext; } }

        public ListItemControl()
        {
            InitializeComponent();

            ... 
```

将 Java 概念应用于它的 C# 表亲（正如我被告知的那样），这看起来像是我`ListItemControl`的内部类，扩展了 Microsoft 内置类型的`System.Windows.Controls.UserControl`. 此外，它有一个`UserFile`属性（我假设它是另一种本土类型），表示需要上传的一个文件或一组文件。

所以首先，作为一个健全的检查：**有人可以确认上面的假设吗？！？**

首先，在 Java/Swing-land 中，您将实例化或子类化一个`JList`（列表框）类型，该类型具有内置方法/模型来确定在任何给定时间填充它的项目数。

**C#-land 中的 ListItemControl/UserControl 等价物是什么？**

在这个 CS 文件中，我没有看到任何确定数据大小/长度/计数的方法。当 I F12 (Go to Definition) 时相同`UserControl`。

本质上，我在这里问：如何查询此列表框组件以获取填充的项目数？在此先感谢您在正确方向上的任何推动...

**编辑**：下面是我*认为*负责初始化此列表框的 XAML 片段：

```
<ScrollViewer Grid.Row="1" x:Name="svFiles" IsEnabled="True"     ScrollViewer.VerticalScrollBarVisibility="Visible" Margin="0,1,18,252">
    <StackPanel x:Name="stkMain" Orientation="Vertical" VerticalAlignment="Stretch">
        <ItemsControl  x:Name="icFiles" KeyUp="ScrollViewer_KeyUp" >
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <local:ListItemControl ScrollViewer.VerticalScrollBarVisibility="Visible" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:48:32.407

更新后的代码段似乎是 XAML 的正确部分 - 您拥有`ItemsControl`，这是一个用于呈现项目集合的通用转发器控件。我仍然没有看到添加项目的位置，但这可能在代码中的其他地方。

但是，由于`ItemsControl`给定了一个名称，因此您可以访问它：

```
ItemCollection items = icFiles.Items;
int count = items.Count; 
```

您究竟在哪里尝试访问队列长度？这需要在`ItemsControl`定义的窗口的代码隐藏中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:32:32.027

通常，`List<Something>`控件将实现或继承自实现[IEnumerable](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)接口的控件。

您没有提供完整的标记，但我希望下面有更多代码公开一些属性，例如`.Length`or`.Items.Count`会告诉您数组、字典等中的元素数量。

我在这里必须笼统，因为确切的属性名称将取决于它在我们看不到的代码中的实现方式。

# grails - Grails：改变当前环境

> ID：10226125
> 
> 赞同：0
> 
> 时间：2012-04-19T10:24:41.270
> 
> 标签：grails, datasource, environment

是否可以在运行时更改当前的工作环境？？我想要做的是在特定环境中加载我的应用程序，并在代码中的某个位置更改它，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:56:18.340

在合理范围内没有。这可能会极大地混淆框架，因此不推荐。

# iphone - 在 iphone 的全屏模式下画线触摸事件无法正常工作

> ID：10226130
> 
> 赞同：0
> 
> 时间：2012-04-19T10:24:50.400
> 
> 标签：iphone, ios

我正在创建应用程序以在 iphone 上成功绘制。但是，它的工作设置状态栏最初是隐藏的 = 在 myapp-info.plist.else 中没有，如果，设置状态栏最初是隐藏的=是的，不能完美地工作。我的视图控制器代码在下面：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    drawImage = [[UIImageView alloc] initWithImage:nil];
    drawImage.frame = self.view.frame;
    drawImage.backgroundColor=[UIColor blackColor];
    [self.view addSubview:drawImage];
    mouseMoved = 0;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        drawImage.image = nil;
        return;
    }

    lastPoint = [touch locationInView:self.view];
    //lastPoint.y -= 20;

}

-(void)viewDidAppear:(BOOL)animated
{
 // [UIApplication sharedApplication].statusBarHidden = NO;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    mouseSwiped = YES;
    UITouch *touch = [touches anyObject];   
    CGPoint currentPoint = [touch locationInView:self.view];
    currentPoint.y -= 20; // only for 'kCGLineCapRound'
    UIGraphicsBeginImageContext(self.view.frame.size);
    //Albert Renshaw - Apps4Life
    [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)]; //originally self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); //kCGLineCapSquare, kCGLineCapButt, kCGLineCapRound
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0); // for size
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 1.0, 0.0, 1.0); //values for R, G, B, and Alpha
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;

    mouseMoved++;

    if (mouseMoved == 10) {
        mouseMoved = 0;
    }

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        drawImage.image = nil;
        return;
    }
    if(!mouseSwiped) {
        //if color == green
        UIGraphicsBeginImageContext(self.view.frame.size);
        [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)]; //originally self.frame.size.width, self.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); //kCGLineCapSquare, kCGLineCapButt, kCGLineCapRound
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 1.0, 0.0, 1.0);
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        CGContextFlush(UIGraphicsGetCurrentContext());
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    [self setDrawImage:nil];
    [self setMy_view:nil];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [my_view release];
    [drawImage release];
    [super dealloc];
} 
```

此代码在没有全屏模式的情况下完美运行。否则，无法像下面的输出一样工作：

![在此处输入图像描述](../Images/1cba66ed98e881434b7e5da4d6f3cec1.png)

请任何人帮助我提供任何代码或示例......！

谢谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:41:06.610

`drawImage.frame = self.view.frame;`从
`- (void)viewDidLoad`方法移动
到
`-(void)viewWillAppear:(BOOL)animated`
任何几何调整都应在 viewWillAppear 或 viewDidAppear 中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:53:13.917

最后我在我的控制器类下面得到了解决方案：

```
- (void)viewDidLoad {
    [super viewDidLoad];

}

-(void)viewWillAppear:(BOOL)animated
{
    drawImage = [[UIImageView alloc] initWithImage:nil];
    drawImage.frame = self.view.frame;
    drawImage.backgroundColor=[UIColor blackColor];
    drawImage.center=self.view.center;
    [self.view addSubview:drawImage];
    mouseMoved = 0;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        drawImage.image = nil;
        return;
    }

    lastPoint = [touch locationInView:self.view];
    lastPoint.y -= 0;

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    mouseSwiped = YES;
    UITouch *touch = [touches anyObject];   
    CGPoint currentPoint = [touch locationInView:self.view];
    //currentPoint.y += 20; // only for 'kCGLineCapRound'
    UIGraphicsBeginImageContext(self.view.frame.size);
    //Albert Renshaw - Apps4Life
    [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)]; //originally self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); //kCGLineCapSquare, kCGLineCapButt, kCGLineCapRound
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0); // for size
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 1.0, 0.0, 1.0); //values for R, G, B, and Alpha
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;

    mouseMoved++;

    if (mouseMoved == 10) {
        mouseMoved = 0;
    }

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 2) {
        drawImage.image = nil;
        return;
    }
    if(!mouseSwiped) {
        //if color == green
        UIGraphicsBeginImageContext(self.view.frame.size);
        [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)]; //originally self.frame.size.width, self.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); //kCGLineCapSquare, kCGLineCapButt, kCGLineCapRound
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 1.0, 0.0, 1.0);
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        CGContextFlush(UIGraphicsGetCurrentContext());
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }
}
- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    [self setDrawImage:nil];
    [self setMy_view:nil];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [my_view release];
    [drawImage release];
    [super dealloc];
} 
```

# .net - .NET 的 WebORB - webconfig.xml 中无法识别的配置部分 system.serviceModel

> ID：10226137
> 
> 赞同：0
> 
> 时间：2012-04-19T10:25:37.260
> 
> 标签：.net, windows, iis, weborb

我在尝试安装 WebORB 4.5 并运行其管理控制台时遇到问题。

由于使用 exe 安装根本不起作用，我执行[zip 安装过程](http://www.themidnightcoders.com/fileadmin/docs/dotnet/v4/guide/index.html)。当我想访问控制台（第 3 步）时，我收到很多错误弹出窗口“发送失败...”

运行诊断告诉我存在配置错误：

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Unrecognized configuration section system.serviceModel.

Source Error: 
Line 121:  </system.webServer>
Line 122:    
Line 123:  <system.serviceModel>                
Line 124:    
Line 125:    <services>        

Source File: C:\Program Files\WebORB for .NET\4.5.0.31\web.config    Line: 123 
```

我目前的配置：

*   操作系统：Windows 2000 服务器
*   .Net：2.0.50727 SP2
*   WebORB：4.5.0.31

我还不能在其他论坛上找到准确的答案，但我认为这不仅仅是一个 WebORB 问题。我已经看到*system.serviceModel* [在 .Net 3.0 之前不受支持，](https://stackoverflow.com/a/2100825/1179879)但由于 WebORB 4.5 提供了在安装过程中使用 .Net 2.0 版本的机会，我想知道该怎么做......如果我删除了*system.serviceModel*，它不会也不行。

需要帮忙！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:33:44.507

我在别处找到了答案，所以我把它放在这里，它可能会对某人有所帮助:) 我必须感谢[Mark Miller (Weborb)](http://www.themidnightcoders.com/forum/Default.aspx?g=posts&m=14513#14513)的这个技巧。

我的理解是，当无法使用 EXE 自动安装时，您必须处理 ZIP 安装。

这样做，Weborb 安装文件夹 [WEBORB DIR] 将包含这两个重要文件**\bin\weborb.dll**和**\Web.config**。

如果默认情况下，它们未配置为适用于您的 .NET 版本（我认为默认为 3.5），您将不得不进行一些更改。

如果像我一样，您必须将它安装在运行 .NET 2.0 的服务器上，在您的 WebORB 安装中，您将在以下位置找到 2.0 的程序集 (dll)：

```
[WEBORB DIR]\weborbassets\weborbbuilds\.NET2.0\bin 
```

还有 web.config 位于：

```
[WEBORB DIR]\weborbassets\weborbbuilds\.NET2.0\ 
```

然后，您必须将这个正确**的 weborb.dll**复制到 [WEBORB DIR]\bin 并将**web.config**复制到 [WEBORB DIR]\

这样做，我终于能够毫无错误地加载 Weborb 控制台！

# php - 变量中的文本将被识别但不会显示

> ID：10226147
> 
> 赞同：1
> 
> 时间：2012-04-19T10:26:12.763
> 
> 标签：php, mysql, html, variables

我有一些奇怪的现象。我有一个变量是一些文本：

```
rename something;
mkdir a folder;
$msg = "this text should be displayed";
$mail to... 
```

在html中我有：

```
<?php if (!isset($msg)):?>
some inputfileds
<?php endif; ?> 
```

现象是一切正常，除了`$msg`不会显示。对此感到好奇的是，它以前曾在另一页上工作过。该变量将被识别为它，因为输入字段将在按下 submit 和 后隐藏`$errors == 0`。还有重命名功能、mkdir 和邮件。如果我`$msg =`换成`echo`它，它会回显出它应该怎么做的信息。所以我真的不知道这可能有什么问题？

如果有人能告诉我该怎么做来解决这个问题，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:33:04.970

我不知道我是否正确理解了您的查询，但是如果您想在 html 中显示 $msg 的值，那么您必须将它放在您的 html 中，例如

```
<?php if (isset($msg)):?>
  <p><?php echo $msg; ?></p>
  <!-- some inputfileds -->
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:33:19.703

不用这样写吗？

```
<?php echo(isset($msg))?$msg:""; ?> 
```

# iphone - 如何根据 left 和 top 值指定图像位置

> ID：10226148
> 
> 赞同：-2
> 
> 时间：2012-04-19T10:26:18.950
> 
> 标签：iphone

我正在开发一个应用程序，其中我有一个图像，我需要在图像中指定位置。但我只有图像的左值和上值。但是我们需要 x,y,width 和 height 值。然后如何从中找出值。所以请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:31:49.853

left 和 top 值是 x - y 位置。您的图像需要覆盖视图的空间量（帧大小）是宽度和高度。例如，如果您的图像必须覆盖 iPhone 的全屏，则应将 frame 指定为：

```
 image.frame = CGRectMake(0, 0, 320, 480); 
```

# lua - 使用 string.gsub 替换字符串，但只能替换整个单词

> ID：10226150
> 
> 赞同：6
> 
> 时间：2012-04-19T10:26:27.663
> 
> 标签：lua

我有一个用于替换字符串的搜索替换脚本。它已经具有执行不区分大小写搜索和“转义”匹配的选项（例如，允许在搜索中搜索 % （等）。

现在我被要求只匹配整个单词，我尝试在每一端添加 %s ，但这与字符串末尾的单词不匹配，然后我无法弄清楚如何捕获白色-在更换过程中发现的空间项目保持原样。

我是否需要使用 string.find 重做脚本并添加用于单词检查的逻辑，或者这可能与模式一起使用。

我用于不区分大小写和转义项的两个函数如下，它们都返回要搜索的模式。

```
 --   Build Pattern from String for case insensitive search
function nocase (s)
      s = string.gsub(s, "%a", function (c)
            return string.format("[%s%s]", string.lower(c),
                                           string.upper(c))
          end)
      return s
    end
function strPlainText(strText)
    -- Prefix every non-alphanumeric character (%W) with a % escape character, where %% is the % escape, and %1 is original character
    return strText:gsub("(%W)","%%%1")
end 
```

我现在有一种方法可以做我想做的事，但这并不优雅。有没有更好的办法？

```
 local strToString = ''
     local strSearchFor = strSearchi
    local strReplaceWith = strReplace
    bSkip = false
    if fhGetDataClass(ptr) == 'longtext' then
        strBoxType = 'm'
    end
   if pWhole == 1 then
    strSearchFor = '(%s+)('..strSearchi..')(%s+)'
    strReplaceWith = '%1'..strReplace..'%3'
    end
    local strToString = string.gsub(strFromString,strSearchFor,strReplaceWith)
    if pWhole == 1 then
    -- Special Case search for last word and first word
        local strSearchFor3 = '(%s+)('..strSearchi..')$'
        local strReplaceWith3 = '%1'..strReplace
        strToString = string.gsub(strToString,strSearchFor3,strReplaceWith3)
        local strSearchFor3 = '^('..strSearchi..')(%s+)'
        local strReplaceWith3 = strReplace..'%2'
        strToString = string.gsub(strToString,strSearchFor3,strReplaceWith3)
    end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T16:12:58.930

> 有办法做我现在想做的事，但它不优雅。有没有更好的办法？

Lua 的模式匹配库中有一个未记录的特性，称为[Frontier Pattern](http://lua-users.org/wiki/FrontierPattern)，它可以让你编写如下内容：

```
function replacetext(source, find, replace, wholeword)
  if wholeword then
    find = '%f[%a]'..find..'%f[%A]'
  end
  return (source:gsub(find,replace))
end

local source  = 'test testing this test of testicular footest testimation test'
local find    = 'test'
local replace = 'XXX'
print(replacetext(source, find, replace, false))  --> XXX XXXing this XXX of XXXicular fooXXX XXXimation XXX    
print(replacetext(source, find, replace, true ))   --> XXX testing this XXX of testicular footest testimation XXX 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:16:42.703

你的意思是如果你通过 nocase() foo，你想要 [fooFOO] 而不是 [fF][oO][oO]？如果是这样，你可以试试这个？

```
function nocase (s)
      s = string.gsub(s, "(%a+)", function (c)
            return string.format("[%s%s]", string.lower(c),
                                           string.upper(c))
          end)
      return s
end 
```

如果您想要一种简单的方法将句子拆分为单词，您可以使用以下方法：

```
function split(strText)
    local words = {}
    string.gsub(strText, "(%a+)", function(w)
                                    table.insert(words, w)
                                  end)
    return words
end 
```

一旦你得到了单词的拆分，就很容易遍历表中的单词并对每个单词进行完整的比较。

# c++ - 使用预处理器宏取消定义函数

> ID：10226151
> 
> 赞同：1
> 
> 时间：2012-04-19T10:26:33.050
> 
> 标签：c++, c-preprocessor

我有一个用 C++ 编写的日志系统，上面写着这种类型的函数：

```
 void processMessages();
    void DEBUG_MSG(const std::string& appender,const char* msg, ...);
    void INFO_MSG(const std::string& appender,const char* msg, ...);
    void WARNING_MSG(const std::string& appender, const char* msg, ...);
    void ERROR_MSG(const std::string& appender, const char* msg, ...);
    void FATAL_MSG(const std::string& appender, const char* msg, ...); 
```

我想通过 C++ 中的宏禁用。我读过这个帖子：[Disable functions using MACROS](https://stackoverflow.com/a/7711704/444423) but

```
#ifdef GLOG_SILENCE
        #define processMessages     (void)sizeof
        #define DEBUG_MSG           (void)sizeof
        #define INFO_MSG            (void)sizeof
        #define WARNING_MSG         (void)sizeof
        #define ERROR_MSG           (void)sizeof
        #define FATAL_MSG           (void)sizeof
#else //GLOG_SILENCE
        void processMessages();
        void DEBUG_MSG(const std::string& appender,const char* msg, ...);
        void INFO_MSG(const std::string& appender,const char* msg, ...);
        void WARNING_MSG(const std::string& appender, const char* msg, ...);
        void ERROR_MSG(const std::string& appender, const char* msg, ...);
        void FATAL_MSG(const std::string& appender, const char* msg, ...);
#endif //GLOG_SILENCE 
```

不能正常工作。我不断收到以下错误：

> 在 ../src/test_core.cpp:2 包含的文件中：
> 
> ```
> ../src/test_Log.h: In member function ‘virtual void LogTestFixtureTest_defining_SILENCE_macro_avoids_write_and_processing_activity_from_log_Test::TestBody()’:
> ../src/test_Log.h:63: error: expected unqualified-id before ‘(’ token
> ../src/test_Log.h:63: error: expected primary-expression before ‘void’
> ../src/test_Log.h:63: error: expected ‘;’ before ‘sizeof’
> ../src/test_Log.h:64: error: expected unqualified-id before ‘(’ token
> ../src/test_Log.h:64: error: expected primary-expression before ‘void’
> ../src/test_Log.h:64: error: expected ‘;’ before ‘sizeof’ 
> ```

我怀疑这个问题与 Log 是一个类的事实有关，但我不知道该怎么做。一些帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:33:09.570

事实上，如果这些是成员函数，那么“静默”版本将扩展为无稽之谈：

```
log.(void)sizeof(stuff); 
```

你可以定义一个什么都不做的成员函数，以及吞下它们的参数的宏：

```
void nothing() {}

#define processMessages(...) nothing() 
```

然后使用“静默”版本将提供应该编译为空的有效代码：

```
log.nothing(); 
```

这样做的缺点是（a）您依赖编译器来内联空函数，而不是生成函数调用；(b) 在静默模式下编译时不检查参数的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:36:45.880

如果您的编译器支持[可变参数宏](http://en.wikipedia.org/wiki/Variadic_macro)，您可以简单地定义带有空替换的宏：

```
#ifdef GLOG_SILENCE
        #define processMessages(_1, _2, ...)
        #define DEBUG_MSG(_1, _2, ...)
        #define INFO_MSG(_1, _2, ...)
        #define WARNING_MSG(_1, _2, ...)
        #define ERROR_MSG(_1, _2, ...)
        #define FATAL_MSG(_1, _2, ...)
#else //GLOG_SILENCE
        void processMessages();
        void DEBUG_MSG(const std::string& appender,const char* msg, ...);
        void INFO_MSG(const std::string& appender,const char* msg, ...);
        void WARNING_MSG(const std::string& appender, const char* msg, ...);
        void ERROR_MSG(const std::string& appender, const char* msg, ...);
        void FATAL_MSG(const std::string& appender, const char* msg, ...);
#endif //GLOG_SILENCE 
```

但是，这仅在函数**不是**类或命名空间的成员，而是真正的全局函数时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:50:01.473

我想建议你以不同的方式工作。只需声明接口 ILogger 之后在不同的记录器中实现它，比如

```
class ILogger{
 public:
        virtual void DEBUG_MSG(const std::string& appender,const char* msg, ...);
        virtual  void INFO_MSG(const std::string& appender,const char* msg, ...);
        virtual  void WARNING_MSG(const std::string& appender, const char* msg, ...);
        virtual  void ERROR_MSG(const std::string& appender, const char* msg, ...);
        virtual  void FATAL_MSG(const std::string& appender, const char* msg, ...);
        virtual ~ILogger(){}
}; 
```

对于文件记录器

```
class FileLogger : public ILogger{
 public:
        void DEBUG_MSG(const std::string& appender,const char* msg, ...){....}
        void INFO_MSG(const std::string& appender,const char* msg, ...){....}
        void WARNING_MSG(const std::string& appender, const char* msg, ...){....}
        void ERROR_MSG(const std::string& appender, const char* msg, ...){....}
        void FATAL_MSG(const std::string& appender, const char* msg, ...){....}
        virtual ~EmptyLogger(){}
};

and the empty logger like: 
```

对于空记录器

```
class EmptyLogger : public ILogger{
 public:
        void DEBUG_MSG(const std::string& appender,const char* msg, ...){do nothing here}
        void INFO_MSG(const std::string& appender,const char* msg, ...){do nothing here}
        void WARNING_MSG(const std::string& appender, const char* msg, ...){do nothing here}
        void ERROR_MSG(const std::string& appender, const char* msg, ...){do nothing here}
        void FATAL_MSG(const std::string& appender, const char* msg, ...){do nothing here}
        virtual ~FileLogger(){}
}; 
```

之后，在您创建记录器的地方可能是工厂制作宏以生成不同类型的记录器。

```
class LoggerFactory{
public:
 static ILogger* getLogger(/*loggertype as argument*/){
   #ifdef GLOG_SILENCE
    /* create a normal logger*/
   #else
     return new EmptyLogger();
   #endif
 }
}; 
```

# c# - WPF C# 静音/取消静音所有 I/O 音频设备

> ID：10226157
> 
> 赞同：1
> 
> 时间：2012-04-19T10:26:49.377
> 
> 标签：c#, .net, wpf, audio, windows-7

> **可能重复：**
> [静音/取消静音，使用 C# 在 Windows 7 x64 中更改主音量](https://stackoverflow.com/questions/2986007/mute-unmute-change-master-volume-in-windows-7-x64-with-c-sharp)

我是 WPF 的新手，并试图找到一种解决方案，只需单击一下按钮即可将系统上的所有麦克风和所有扬声器静音/取消静音。这是一个个人（在家）应用程序，我使用的是 Windows 7 64 位操作系统。我可以使用核心音频 API 找到静音/取消静音麦克风的代码。但我必须静音/取消静音所有 I/O 设备。

静音主音量可以完成这项工作吗？如果是这样，任何人都可以建议一种在 WPF 中执行此操作的方法吗？

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:34:28.687

这个问题似乎回答了你的问题-

[静音/取消静音，使用 C# 在 Windows 7 x64 中更改主音量](https://stackoverflow.com/questions/2986007/mute-unmute-change-master-volume-in-windows-7-x64-with-c-sharp)

也看看这个问题 -

[使用 C# 使 Windows 音量静音](https://stackoverflow.com/questions/154089/mute-windows-volume-using-c-sharp)

这是关于 WinForms 但我认为该解决方案对您有用

# playframework - 玩！1.2.4 - 服务器启动时未收到数据

> ID：10226158
> 
> 赞同：3
> 
> 时间：2012-04-19T10:26:54.573
> 
> 标签：playframework, playframework-1.x

我有戏！1.2.4 应用不好玩。我可以在我的计算机上运行另一个播放应用程序，但是当我尝试运行它时，它会启动服务器，但似乎没有在第一个请求时初始化。

我启用了 TRACE 日志记录，这就是发生的情况：

```
11:21:29,894 INFO  ~ Listening for HTTP at /127.0.0.1:8998 (Waiting a first request to   start) ...
11:21:33,135 TRACE ~ messageReceived: begin
11:21:33,135 TRACE ~ parseRequest: begin
11:21:33,135 TRACE ~ parseRequest: URI = /
11:21:33,140 TRACE ~ parseRequest: end 
```

我不知道为什么会发生这种情况，因为同一个应用程序在另一台计算机上运行良好，而且我以前也运行过它。

有谁知道为什么会发生这种情况？

附加信息：

```
Java: version "1.6.0_30" 64bit
Play: version "1.2.4" 
```

编辑：

我认为这可能与 Java 版本有关。此应用程序在 Java 1.7 中运行，而我的另一个 Play 应用程序仅在 1.6 中运行。这是否与创建应用程序时使用的 Java 版本有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:10:52.350

我实际上找到了解决方案。

我`play clean-all`在应用程序上运行，然后一切正常。

我认为这是由于切换了 java 版本，当它在一个 java 版本中编译并且您尝试在另一个 java 版本中运行它时，它似乎会导致这个问题。清理项目将强制在当前版本中重新编译所有内容，并且一切运行良好！

# css - 下拉菜单在 IE9 中不起作用

> ID：10226159
> 
> 赞同：1
> 
> 时间：2012-04-19T10:26:56.523
> 
> 标签：css, menu, internet-explorer-9, drop-down-menu

[http://www.streetstyles4all.co.uk/test4.html](http://www.streetstyles4all.co.uk/test4.html)

任何人都可以请建议。我现在已经完成了我的菜单，它可以在除 IE9 之外的大多数浏览器中使用。菜单本身有效，但下拉菜单无效。GENERAL 和 SHOP 菜单项应下拉并显示许多其他子菜单项。只是不在 IE9 中 :-(

任何人都可以帮忙吗？

有问题的页面是[http://www.streetstyles4all.co.uk/test4.html](http://www.streetstyles4all.co.uk/test4.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:40:40.450

如果您`filter`从以下规则中删除该属性：

```
#menu
#menu li:hover 
```

然后显示固定为IE9。

[https://stackoverflow.com/a/6901105/637889](https://stackoverflow.com/a/6901105/637889)解释说您可能应该使用`-ms-filter`IE8+（尽管`filter`在 IE9 中显然仍然支持渐变工作）。另请参阅[http://blogs.msdn.com/b/ie/archive/2008/09/08/microsoft-css-vendor-extensions.aspx](http://blogs.msdn.com/b/ie/archive/2008/09/08/microsoft-css-vendor-extensions.aspx)了解较新的语法（因为属性值需要引用）。

作为替代方案，您可能希望[使用 -ms 探索 IE9 Gradient](https://stackoverflow.com/questions/9691235/ie9-gradient-using-ms)上的答案，以获得更多跨浏览器渐变解决方案，如果您还没有看到它的话。

最后，我还可以推荐[Paul Irish 的方法](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)，使用[条件注释](http://en.wikipedia.org/wiki/Conditional_comments)来包含*有问题*（即 IE）浏览器的 CSS 规则，而不会使问题*较少*的浏览器混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:41:51.557

我在你的 css 样式表中删除 z-index 两个认为

```
1\.  #menu li:hover (Remove z-index this )

2\. #menu (remove z-index this ) 
```

* * *

```
#menu li:hover {
    z-index: 5;}

#menu {
    z-index: 11;
} 
```

现在检查您在 IE 中的布局

# php - 从换行符中清除 mysql 文本

> ID：10226166
> 
> 赞同：3
> 
> 时间：2012-04-19T10:27:17.387
> 
> 标签：php

您将如何删除额外的换行符，例如：

```
text text text

text text 
```

我希望它是这样的

```
text text
text 
```

我已经在使用 nl2br($desc) 为了让换行符出现在所有现在我如何将它们限制为 1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T10:33:22.507

在使用`nl2br()`单个换行符替换所有回车符或换行符序列之前：

```
$result = preg_replace('/[\r\n]+/', "\n", $desc); 
```

在线查看它：[ideone](http://ideone.com/zn2oA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:31:11.143

之后`nl2br()`：

```
$desc = preg_replace('#(<br[ ]?[\/]?>[\r\n]*)+#','<br/>',$desc); 
```

# objective-c - 如何使用 NSMethodSignature 修复回调中的错误访问错误？

> ID：10226170
> 
> 赞同：2
> 
> 时间：2012-04-19T10:27:43.747
> 
> 标签：objective-c, callback, cocos2d-iphone

我正在创建一个自定义模式层。这个想法是用户看到一个城市，点击该城市并接受或拒绝该位置。

我`NSMethodSignature`用来处理回调，所以我知道用户是点击了模态层中的`Tick`（接受）还是`Cross`（拒绝）按钮。

但是，由于某种原因，应用程序在调用回调后会崩溃，并在从模式返回时给我一个错误的访问错误。

```
0x000d584e  <+0174>  mov    %eax,0x4(%esp)
0x000d5852  <+0178>  call   0xd6006 <dyld_stub_objc_msgSend>
0x000d5857  <+0183>  mov    -0x8(%ebp),%eax  Thread 1: Program received signal: EXC_BAD_ACCESS 
```

我不明白为什么会发生这种情况，因为城市对象是在类中定义的。

例如，我的 .h 文件有：

```
@interface MapMenuLayer : CCLayer
{
    CCArray *listOfCities;
    City *city;
}

@property (nonatomic, retain) CCArray *listOfCities;
@property (nonatomic, retain) City *city; 
```

我的 .m 文件有：

```
@synthesize listOfCities, city; 
```

稍后我将页面上每个城市的显示定义为可点击`CCMenu`项目。当用户点击一个城市时，它会调用：

```
-(void) onMenuItem:(id)sender
{
    NSLog(@"sender = %d", [sender tag]);

    self.city = [self.listOfCities objectAtIndex:[sender tag]];    
    NSString *cityName = self.city.name;
    NSLog(@"cityName = %@", cityName);

    // Launch the modal layer
    CityModalLayer *cityModalLayer = [[[CityModalLayer alloc] initWithCity:self.city target:self selector:@selector(onDialogButton:)] autorelease];
    [cityModalLayer show:self];

}

// This is called when the modal is closed or actioned upon
- (void) onDialogButton:(NSInteger)buttonIndex
{
    NSLog(@"onDialogButton:buttonIndex: %d", buttonIndex);

    NSString *cityName = self.city.name;
    NSLog(@"You selected: cityName = %@", cityName);

} 
```

当应用程序流从模态层返回并启动`onDialogButton`方法时发生错误访问错误。

它输出日志很好，但是当它碰到城市对象时它会崩溃。我不知道为什么会发生这种情况，它不应该为空或导致任何形式错误。

好的，所以模态层有点复杂，但为了这个问题，我把它删掉了：

```
-(id) initWithCity:(City *)cityObj target:(id)target selector:(SEL)selector
{
    if((self=[super init])) 
    {
        [self initWithColor:ccc4(0, 0, 0, 255)];
        [self setOpacity:80];
        [self setIsTouchEnabled:YES];

        self.city = cityObj;

        // Setup the signature class
    NSMethodSignature *sig = [[target class] instanceMethodSignatureForSelector:selector];
    callback = [NSInvocation invocationWithMethodSignature:sig];
    [callback setTarget:target];
    [callback setSelector:selector];
    [callback retain];

        // -----

        // MENU

// The frames are not in this code, but they do exist

        // Add modal menu
        // Modal Menu (Tick/Cross)
        CCMenu *modalMenu = [CCMenu menuWithItems:nil];    

        CCSprite *closeButtonOff = [CCSprite spriteWithSpriteFrameName:@"closeButton_Off.png"];
        CCSprite *closeButtonOn = [CCSprite spriteWithSpriteFrameName:@"closeButton_On.png"];
        CCSprite *tickButtonOff = [CCSprite spriteWithSpriteFrameName:@"tickButton_Off.png"];
        CCSprite *tickButtonOn  = [CCSprite spriteWithSpriteFrameName:@"tickButton_On.png"];

        // Tick button
        CCMenuItemSprite *tickBtnItem = [CCMenuItemSprite itemFromNormalSprite:tickButtonOff selectedSprite:tickButtonOn target:self selector:@selector(onButtonPressed:)];
        [tickBtnItem setTag:1];
        [tickBtnItem setPosition:CGPointMake(130, -95)];
        [tickBtnItem setIsEnabled:YES];

        // Close button
        CCMenuItemSprite *closeBtnItem = [CCMenuItemSprite itemFromNormalSprite:closeButtonOff selectedSprite:closeButtonOn target:self selector:@selector(onButtonPressed:)];
        [closeBtnItem setTag:0];
        [closeBtnItem setPosition:CGPointMake(-130, -95)];
        [closeBtnItem setIsEnabled:YES];

        // Add stuff to modal
        [modalMenu addChild:closeBtnItem];
        [modalMenu addChild:tickBtnItem]; 

        // Add menu to the modalFrame
        [modalFrame addChild:modalMenu z:2];

        // --

        // Add modalFrame to modalLayer
        [self addChild:modalFrame];    

    } // end if
    return self;

}

// This invokes the action
-(void) onButtonPressed:(id) sender
{
    NSInteger buttonIndex = [sender tag];

    NSLog(@"onButtonPressed: %d", buttonIndex);

    [callback setArgument:&buttonIndex atIndex:1];
    [callback invoke];
    [self removeFromParentAndCleanup:YES];
}

-(void) dealloc
{
    [callback release];
    [super dealloc];
} 
```

我已将问题跟踪到调用回调的时间，但是我不明白为什么它会崩溃或给我错误。它应该仍然在内存中有城市对象吗？

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T02:19:20.243

我现在已经做到了。这是自动释放。我已经删除了

为了防止在模态下单击，或者有人非常快速地多次按下按钮，我`CoverLayer`在我的 ModalLayer.m 文件中放置了一个

```
// class that implements a black colored layer that will cover the whole screen 
// and eats all touches except within the dialog box child
@interface CoverLayer : CCLayerColor {
}

@end
@implementation CoverLayer
- (id)init {
    self = [super init];
    if (self) {        
        [self initWithColor:ccc4(0,0,0,0) 
                      width:[CCDirector sharedDirector].winSize.width 
                     height:[CCDirector sharedDirector].winSize.height];
        self.isTouchEnabled = YES;
    }
    return self;
}

- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    CGPoint touchLocation = [self convertTouchToNodeSpace: touch];
    CCNode *dialogBox = [self getChildByTag: kDialogTag];

    // eat all touches outside of dialog box
    return !CGRectContainsPoint(dialogBox.boundingBox, touchLocation);
}

- (void) registerWithTouchDispatcher {
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:INT_MIN+1 swallowsTouches:YES];
}

@end 
```

然后我可以使用我的`ModalLayer`实现来初始化它，然后用一个小动画关闭模式，即，

```
-(void) onButtonPressed:(id) sender
{
    NSInteger buttonIndex = [sender tag];
    [callback setArgument:&buttonIndex atIndex:2];
    [callback invoke];

    id fadeOut    = [CCFadeTo actionWithDuration:0.2f opacity:0];
    id remove = [CCCallFuncND actionWithTarget:self selector:@selector(removeFromParentAndCleanup:) data:(void*)NO];        

    [self.coverLayer runAction:
     [CCSequence actions:
      fadeOut, remove,
      nil]];
} 
```

无论如何，我相信我解决了这个问题，因为它似乎与自动释放有关

# javascript - 如何模拟输入禁用？

> ID：10226173
> 
> 赞同：4
> 
> 时间：2012-04-19T10:27:48.973
> 
> 标签：javascript, jquery, html, css

我想模拟输入禁用。我希望输入中没有更改值，但是这个值应该通过带有 FORM 的 POST 发送。

```
<input class="dis" type="text" disabled="disabled" value="111">
<input class="no" type="text">
<input class="dis" type="text" disabled="disabled" value="333"> 
```

[​http://jsfiddle.net/hC4WP/](http://jsfiddle.net/hC4WP/)

我也可以使用 CSS 和 jQuery，但是如何使用呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T10:29:49.877

使用`readonly`代替`disabled`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-19T10:31:44.400

使用`readonly`属性而不是`disabled`.

但是，这不会导致该字段变灰。为此，请使用以下 CSS：

```
input[readonly] { color: #aaa; } 
```

（您可能需要稍微更改颜色以使其看起来更像原来的禁用颜色）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T16:05:15.393

使用 tabindex 的解决方案。

创建一个 .disabled 类。

CSS：

```
.disabled {
    pointer-events:none; /* No cursor */
    background-color: #eee; /* Gray background */
} 
```

JS：

```
$(".disabled").attr("tabindex", "-1"); 
```

HTML：

```
<input type="text" class="disabled" /> 
```

# jquery - jquery fancybox 拇指 - 没有拇指 - 没有幻灯片

> ID：10226177
> 
> 赞同：0
> 
> 时间：2012-04-19T10:28:05.897
> 
> 标签：jquery, fancybox

我正在尝试让fancybox thumbs 正常工作。

我已经导入了所有的 js / css 文件，但它只显示了我点击的图片（没有拇指和幻灯片）。我希望同一页面中的每张图片都加载到fancybox（带拇指）和“alt”属性作为每张图片的标题。

HTML：

```
 .....
<a class="fancybox-thumb" rel="fancybox-thumb" href="/test.jpg">
   <img src="test.jpg" alt="text showing">
</a> 
 .....
 ......
<a class="fancybox-thumb" rel="fancybox-thumb" href="/awesome.jpg">
   <img src="awesome.jpg" alt="Awesome">
</a> 
```

Javascript

```
$('.fancybox-thumb').each(function () {
$(this).attr('rel', 'fancybox-thumb').fancybox({
    helpers: {
        type: 'image',
        openEffect : 'none',
        closeEffect : 'none',
        title : {
            type: 'inside'
        },
        overlay : {
            opacity: 0.8,
            css: {
                'background-color' : '#000'
            }
        },
        thumbs : {
            width: 50,
            height: 50
        }
    },
    beforeLoad: function () {
        this.title = $(this.element).find('img').attr('alt');
        this.href = $(this.element).find('img').attr('src').replace('_thumb', '');
    }
});
}); 
```

**解决方案**

```
$('.fancybox-thumb').fancybox({
prevEffect: 'none',
nextEffect: 'none',
closeBtn: true,
arrows: true,
nextClick: false,
helpers: {
    thumbs: {
        width: 50,
        height: 50
    },
    title : {
        type: 'inside'
    }
},
beforeLoad: function () {
    this.title = $(this.element).find('img').attr('alt');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:01:17.007

```
$('.fancybox-thumb').fancybox({
prevEffect: 'none',
nextEffect: 'none',
closeBtn: true,
arrows: true,
nextClick: false,
helpers: {
    thumbs: {
        width: 50,
        height: 50
    },
    title : {
        type: 'inside'
    }
},
beforeLoad: function () {
    this.title = $(this.element).find('img').attr('alt');
}
}); 
```

# android - 包含拼音字母的 CSV 文件尝试在 Android/Java 中使用 UTF-8 进行编码

> ID：10226182
> 
> 赞同：1
> 
> 时间：2012-04-19T10:28:36.383
> 
> 标签：android, encoding, csv, utf-8

我有我的应用程序的 Android 和 iPhone 版本。在 iOS 中，我可以告诉 CSV-Parser 使用 UTF-8 对字符串进行编码。显然，当我在打开 CSV 文件时使用 InputStreamReader 时，这在 Android 中也是可能的。

```
isr = new InputStreamReader(getAssets().open(
                    "english.csv"), "UTF-8"); 
```

当我检查编码时

```
System.out.println(isr.getEncoding()); 
```

它返回 UTF8。

现在奇怪的是，那一些拼音词！！显示完全正确，而它们中的大多数显示包含方形符号的拼音词。尽管换句话说，完全相同的字母正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:10:09.840

好了朋友们，

显然它只适用于应用另一种字体。因为编码确实有效。只有 Android 标准字体在显示拼音字母时存在问题。

我遵循了这个人的解决方案：

[我不在我的 android-textview 中使用 unicode 字符。我该怎么做？](https://stackoverflow.com/questions/9108876/i-dont-use-unicode-characters-in-my-android-textview-how-can-i-do-this)

并使用了另一种名为 Constructium 的字体。只需将其导入您的资产文件夹并通过 XML 布局文件或直接在您的代码中使用它，就像这个人所做的那样：

[如何更改 TextView 上的字体？](https://stackoverflow.com/questions/2888508/how-to-change-the-font-on-the-text-view-in-android)

# java - 网格视图图像链接到活动

> ID：10226184
> 
> 赞同：1
> 
> 时间：2012-04-19T10:29:03.517
> 
> 标签：java, android

我碰到了一堵砖墙，我遵循的教程只是在点击时放大了图像。

我想做的是为每个图像打开一个不同的活动。

例如，代数图像打开代数活动，点击十进制图像打开十进制活动等。

这可能很简单，但目前对我来说并不是很明显。

这里是主要活动。

```
import android.app.Activity; 
import android.content.Intent; 
import android.os.Bundle; 
import android.view.View; 
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener; 
import android.widget.GridView;  
public class MathsSubjectsActivity extends Activity {

    // Keep all Images in array
    public Integer[] mThumbIds = {
        R.drawable.algebraicon,R.drawable.coordsicon,
        R.drawable.decimalsicon,R.drawable.fractionsicon,
        R.drawable.algebraicon,R.drawable.algebraicon,
        R.drawable.powersicon,R.drawable.algebraicon,
        R.drawable.coordsicon,R.drawable.algebraicon,
    }; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.subjects);
        GridView gridView = (GridView) findViewById(R.id.grid_view); 
        // Instance of ImageAdapter Class 
        gridView.setAdapter(new ImageAdapter(this,mThumbIds)); 
 /**      * On Click event for Single Gridview Item      * */  
        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                switch(position)
                {
                    case 0:
                        Intent login = new Intent(getApplicationContext(), MathsAlgebraActivity.class);
                        login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(login);
                        break;
                    case 1:
                        Intent coords = new Intent(getApplicationContext(), MathsMultiActivity.class);
                        coords.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(coords);
                        break;
                    case 2:
                        Intent decim = new Intent(getApplicationContext(), MathsMultiActivity.class);
                        decim.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(decim);
                        break;
                    //and so on for other activities.
                    default:
                        break;
                }
            }
        }); 
    }
} 
```

下面是处理图像的图像适配器。

```
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

private Context mContext;
private Integer[] resIds; 

//Constructor 
public ImageAdapter(Context c,Integer[] resIds){ 
    mContext = c;
    this.resIds=resIds;
}
@Override
public int getCount() {  
    return resIds.length;
}
@Override
public Object getItem(int position) {
    return resIds[position];
}
@Override
public long getItemId(int position) {
    return 0;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext); 
    imageView.setImageResource(resIds[position]);  
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);   
    imageView.setLayoutParams(new GridView.LayoutParams(70, 70)); 
    return imageView;
}
} 
```

可以运行 case 0 但不能运行 case 1 或 2。

日志中的错误：

```
 Thread [<1> main] (Suspended (exception ActivityNotFoundException)) 
Instrumentation.checkStartActivityResult(int, Object) line: 1405    
Instrumentation.execStartActivity(Context, IBinder, IBinder, Activity, Intent, int) line: 1379  
MathsSubjectsActivity(Activity).startActivityForResult(Intent, int) line: 2827  
MathsSubjectsActivity(Activity).startActivity(Intent) line: 2933    
MathsSubjectsActivity$1.onItemClick(AdapterView, View, int, long) line: 51  
GridView(AdapterView).performItemClick(View, int, long) line: 284   
AbsListView$PerformClick.run() line: 1812   
ViewRoot(Handler).handleCallback(Message) line: 587 
ViewRoot(Handler).dispatchMessage(Message) line: 92 
Looper.loop() line: 130 
ActivityThread.main(String[]) line: 3683    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line:     not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 839  
ZygoteInit.main(String[]) line: 597 
NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:41:57.093

尝试类似下面的代码

```
gridView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {

         switch(position)
         {
             case 0:
             startActivity(context, FirstActivity.class);
             break;
             case 1:
             startActivity(context, SecondActivity.class);
             break;
             .....
             ...
         }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:59:25.370

编辑1

```
 import android.app.Activity; 
        import android.content.Intent; 
        import android.os.Bundle; 
        import android.view.View; 
        import android.widget.AdapterView;
        import android.widget.AdapterView.OnItemClickListener; 
        import android.widget.GridView;  
        public class MathsSubjectsActivity extends Activity {   

        // Keep all Images in array
        public Integer[] mThumbIds = {        
        R.drawable.algebraicon,R.drawable.coordsicon,         
        R.drawable.decimalsicon,R.drawable.fractionsicon,  
        R.drawable.algebraicon,R.drawable.algebraicon,
        R.drawable.powersicon,R.drawable.algebraicon,        
        R.drawable.coordsicon,R.drawable.algebraicon, 
        }; 

         @Override    
         public void onCreate(Bundle savedInstanceState) {     
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.subjects);  
        GridView gridView = (GridView) findViewById(R.id.grid_view); 
             // Instance of ImageAdapter Class    
        gridView.setAdapter(new ImageAdapter(this,mThumbIds)); 
             /**      * On Click event for Single Gridview Item      * */  
        gridView.setOnItemClickListener(new OnItemClickListener() {  

        @Override         
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {            
         switch(position)             
               {   
                case 0:                 
                   startActivity(this, AlgebraActivity.class);            
                        break;                    
                case 1:                   
                 startActivity(this, CoordsActivity.class);  
                                  break;    

                case 2: 
                startActivity(this,DecimalsActivity.class);
                break;
               //and so on for other activities.  
                default:
                break;                             

 } 

        }     
    }); 
    }   

} 
```

适配器看起来像：

```
import android.content.Context;   
import android.view.View; 
import android.view.ViewGroup;  
import android.widget.BaseAdapter; 
import android.widget.GridView;  
import android.widget.ImageView;       
 public class ImageAdapter extends BaseAdapter {    
private Context mContext;      
private Integer[] resIds; 
//Constructor 
 public ImageAdapter(Context c,Integer[] resIds){ 
mContext = c;    
this.resIds=resIds
}    
@Override                    
 public int getCount() {  
 return mThumbIds.length;                  
   }         
 @Override                   
public Object getItem(int position) {   
                      return mThumbIds[position];                     }     
  @Override                  
   public long getItemId(int position) {    
                     return 0;                  
   }                                    

      @Override            
         public View getView(int position, View convertView, ViewGroup parent) {                                
  ImageView imageView = new ImageView(mContext); 
 imageView.setImageResource(mThumbIds[position]);  
 imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);   
 imageView.setLayoutParams(new GridView.LayoutParams(70, 70)); 
 return imageView;                    
 }                                 
  } 
```

编辑2：

根据日志，它看起来在 manfest 文件中没有活动条目。为您的 androidmanifest.xml 中的活动执行以下条目

```
<activity android:name="com.example.project.YourActivity"
                  . . . >
            . . .
        </activity> 
```

# java - java 消息传递 - 如何创建一个 ad-hoc 网络

> ID：10226185
> 
> 赞同：0
> 
> 时间：2012-04-19T10:29:07.887
> 
> 标签：java, jms, spring-jms

我有3个客户。我想创建一个应用程序，显示每个客户端何时在线以及何时不基于 JMS - java 消息传递和 tomcat 服务器。到目前为止，我成功地使用 JMS (queue1) 创建了发送和接收消息。

我不知道从哪里开始才能使我的应用程序活跃起来。

谢谢你。需要帮忙。欣赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:52:16.137

首先，JMS 是一种实现这种行为的重量级方法。[使用MulticastSocket](http://docs.oracle.com/javase/6/docs/api/java/net/MulticastSocket.html)会好得多。

但是，无论您采取哪种方式，基本原则都是相同的：

1.  每个客户端以预定义的时间间隔发送一个心跳消息来标识自己，直到它关闭或死亡。
2.  监控应用程序侦听这些心跳消息，跟踪在心跳消息中标识自己的客户端，并在给定客户端的心跳消息停止时假定客户端已死。

使用 JMS，这些消息将被发送到单个队列，使用[MulticastSocket](http://docs.oracle.com/javase/6/docs/api/java/net/MulticastSocket.html)，您可以将[DatagramPacket](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramPacket.html)发送到组。

# javascript - 如何在 EaselJS 中查找 DisplayObject 的宽度和高度

> ID：10226195
> 
> 赞同：5
> 
> 时间：2012-04-19T10:29:50.187
> 
> 标签：javascript, html, canvas, easeljs

```
var tf = new Text(letter, font, color);
var tfContainer = new Container();
tfContainer.addChild(tf); 
```

如何找出“tfContainer”的尺寸？

我知道我可以使用 tf.getMeasuredWidth() 和 tf.getMeasuredLineHeight() 但我宁愿使用更通用的方法。除此之外，它不会返回准确的测量值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T21:44:09.493

@Akonsu 是正确的，不支持宽度和高度，主要是因为计算它非常昂贵，尤其是在对儿童进行转换的向量和组中。我们正在考虑，但还没有具体的计划。

-兰尼（gskinner.com）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T03:53:17.997

在easel.js 中没有这样的功能。我在某处读到他们计划添加它，但据我所知还没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T09:48:56.390

是的，必须为 DisplayObject 添加宽度和高度。可能有方法 calculateSize()，并且只有当您尝试获取大小时，才会调用，如果大小无效并需要重新计算。

# sql-server - 如何从数据库中读取俄语字符？

> ID：10226199
> 
> 赞同：0
> 
> 时间：2012-04-19T10:30:08.143
> 
> 标签：sql-server, delphi, character-encoding, delphi-7, ado

我在 SQL Server 中有一个数据库。

我有一个表格`Demo`，我在其中将俄语文本插入到类型的列中`Nvarchar`

现在我想将俄语文本读入我的 Delphi 应用程序，我想将它存储到一个字符串中。

我是否必须设置 ADO 查询等的任何 Charset 属性？

欢迎任何其他想法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:48:13.743

由于没有答案，我将自己回答。使用 `SetThreadLocale(<language id>)`i 能够将线程的语言 ID 设置为 1033（英语）。由于我的数据库被设置为 1033 id，显示的文本现在可以正确显示。我希望它可以帮助其他人。

要将 Unicode 字符正确输入到数据库，请使用要输入 Unicode`N`字符串的列的前缀。更多详情，请看[这里](http://databases.aspfaq.com/general/why-do-some-sql-strings-have-an-n-prefix.html)

# c# - 当网格高度为零时，DataGridView SelectionChanged 事件未触发

> ID：10226200
> 
> 赞同：1
> 
> 时间：2012-04-19T10:30:18.537
> 
> 标签：c#, .net, vb.net, winforms, datagridview

我有一个`DataGridView`我正在以编程方式添加行。

通常，当我添加第一行数据时，`SelectionChanged`事件会触发

但是我的 Grid 锚定在表单的顶部和底部，当我使表单变小以使 Grid 的高度为零`SelectionChanged`时，添加第一行时不会触发事件。

这是设计使然吗？这对我来说似乎不合逻辑。

```
 With DataGridView1
        .Rows.Clear()
        .Columns.Clear()
        .Columns.Add("Col1", "Col1")
        .Columns.Add("Col2", "Col2")
        'uncomment the following line and the SelectionChanged event does not fire
        '.Height = 0
        .Rows.Add("foo", "bar")
    End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:48:01.450

每次选择未选择的行时都会触发此事件，**无论****是**网格不可见还是其高度为零

 **When a row is selected and you try to select it again at that time event not fired If you need to fire every time this event than first unselect that row and than select the same row in the case this event occure 2 time 1st for unselect and第二行选择

```
dataGridView2.Rows[index].Selected = false;
dataGridView2.Rows[index].Selected = true; 
```**

# ruby-on-rails - 在设计 2.0 上跳过对 omniauth-twitter 的电子邮件验证

> ID：10226203
> 
> 赞同：18
> 
> 时间：2012-04-19T10:30:21.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

我正在使用设计 2.0 和 gem [omniauth-twitter](https://github.com/arunagw/omniauth-twitter)

问题是 twitter 没有发送电子邮件作为响应，所以我的应用程序的模型用户验证有一封电子邮件，我在回调中收到以下错误：

```
Email can't be blank 
```

我的**user.rb**模型中有这个：

```
#config omniauth twitter
def self.find_for_twitter_oauth(access_token, signed_in_resource = nil)
    data = access_token.extra.raw_info
    if user = User.where(:username => data.screen_name).first
        user
    else
        User.create!(:username => data.screen_name, :password => Devise.friendly_token)
    end
end 
```

我的**omniauth_callbacks_controller.rb中有这个**

```
 def twitter
    @user = User.find_for_twitter_oauth(request.env["omniauth.auth"], current_user)
    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Twitter"
      sign_in_and_redirect @user, :event => :authentication
    else
      # http://stackoverflow.com/questions/7117200/devise-for-twitter-cookie-overflow-error
      session["devise.twitter_data"] = request.env["omniauth.auth"].except('extra')
      redirect_to new_user_registration_url
    end
   end 
```

我想强制用户提供用于发送时事通讯、广告商...等的电子邮件地址

**我该如何解决这个问题？**

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-12T20:55:25.943

将此添加到您的用户模型中：

```
def email_required?
  super && provider.blank?
end 
```

您可以对密码使用等效方法：

```
def password_required?
  super && provider.blank?
end 
```

使用 Omniauth 提供程序时，这应该覆盖字段要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:49:42.773

我面临同样的问题，Twitter 不会通过 oauth 给你电子邮件，你必须以另一种方式来获取电子邮件。我想出的唯一解决方案是覆盖回调并使用 twitter 数据自动完成表单，让用户有机会自己完成邮件，然后注册并将用户保存在数据库中。

看下面的问题：

[有没有办法在使用 OAuth 验证他/她的 Twitter 身份后获取用户的电子邮件 ID？](https://stackoverflow.com/questions/3599621/is-there-a-way-to-get-an-users-email-id-after-verifying-her-twitter-identity-us)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T15:19:37.540

在这里彻底解释了一个解决方案：http: [//asciicasts.com/episodes/236-omniauth-part-2](http://asciicasts.com/episodes/236-omniauth-part-2)

并在 GitHub 上： [https ://github.com/fertapric/rails3-mongoid-devise-omniauth/wiki/How-To:-Retrieve-email-information-(middle-step)-from-providers-like-Twitter-or -领英](https://github.com/fertapric/rails3-mongoid-devise-omniauth/wiki/How-To:-Retrieve-email-information-(middle-step)-from-providers-like-Twitter-or-LinkedIn)

出于某种原因，这个问题在 Google 的排名中比这些链接更高，所以我想我会将它们添加到答案中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T06:14:25.600

您需要删除电子邮件字段的存在验证。关注[这篇文章](http://jessewolgamott.com/blog/2011/12/08/the-one-where-devise-validations-are-customized/)，看看是否有效。抱歉回复晚了，希望对您有所帮助。

# ruby-on-rails - Rails 3项目中未定义的方法“用户消息路径”

> ID：10226205
> 
> 赞同：0
> 
> 时间：2012-04-19T10:30:27.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nomethoderror

我正在尝试向我的帖子>索引页面添加一个链接，该页面允许人们向帖子的创建者发送直接消息（使用简单私人消息）。

目前我有一个指向 /messages/new 的链接来执行此操作，但这不起作用 - 当我尝试访问 /messages/new 时，我的应用程序中出现以下错误。

我想用更好的东西替换 /messages/new 的链接（在下面的 POSTS>INDEX 文件中）。如果您有任何想法，请告诉我！！

```
**NoMethodError in Messages#new**

Showing /Users/fkhalid2008/loand/app/views/messages/new.html.erb where line #1 raised:

undefined method `user_messages_path' for #<#<Class:0x12a77f198>:0x12a76dce0>

Extracted source (around line #1):

1: <% form_for @message, :url => user_messages_path(@user) do |f| %>
2:   <p>
3:     To:<br />
4:      <%= f.text_field :to %> 
```

附加信息：应用程序本身就像 Gumtree.com，用户来这里创建帖子（例如卖我的车），人们会回复我向他们发送消息（通过 Simple Pvt Messages 插件）。

谢谢！

费萨尔

**消息>新视图**

```
<% form_for @message, :url => user_messages_path(@user) do |f| %>
<p>
To:<br />
    <%= f.text_field :to %>
    <%= error_message_on @message, :to %>
</p>
<p>
Subject:<br />
<%= f.text_field :subject %>
<%= error_message_on @message, :subject %>
</p>
<p>
  Message<br />
  <%= f.text_area :body %>
        <%= error_message_on @message, :body %>
</p>
<p>
  <%= submit_tag "Send" %>
</p>
<% end %> 
```

**消息模型**

```
class Message < ActiveRecord::Base

is_private_message

attr_accessor :to

end 
```

**路线.RB**

```
Mysalary::Application.routes.draw do

resources :messages do
   collection do
     post :delete_selected
     end
   end

resources :users
resources :profiles
resources :pages
resources :posts

get "pages/home"
get "pages/about"
get "pages/legal"
get "pages/feedback"

root :to => 'posts#new'

end 
```

**消息控制器**

```
class MessagesController < ApplicationController

before_filter :set_user

def index
if params[:mailbox] == "sent"
  @messages = @user.sent_messages
else
  @messages = @user.received_messages
end
end

def show
@message = Message.read_message(params[:id], current_user)
end

def new
@message = Message.new

if params[:reply_to]
  @reply_to = @user.received_messages.find(params[:reply_to])
  unless @reply_to.nil?
    @message.to = @reply_to.sender.login
    @message.subject = "Re: #{@reply_to.subject}"
    @message.body = "\n\n*Original message*\n\n #{@reply_to.body}"
  end
end
end

def create
@message = Message.new(params[:message])
@message.sender = @user
@message.recipient = User.find_by_login(params[:message][:to])

if @message.save
  flash[:notice] = "Message sent"
  redirect_to user_messages_path(@user)
else
  render :action => :new
end
end

def delete_selected
if request.post?
  if params[:delete]
    params[:delete].each { |id|
      @message = Message.find(:first, :conditions => ["messages.id = ? AND (sender_id = ? OR recipient_id = ?)", id, @user, @user])
      @message.mark_deleted(@user) unless @message.nil?
    }
    flash[:notice] = "Messages deleted"
  end
  redirect_to :back
end
end

private
def set_user
 @user = User.first
end
end 
```

**帖子>索引视图**

```
<table class="table table-striped">
<tbody>
<% @posts.each do |post| %>
<tr>
<td>I am a <%= post.title %> getting married in <%= post.job %> in <%= post.location %>, and looking for a <%= post.salary %>. My budget is <%= post.salary %>.</td>
<td> <button class="btn" data-toggle="button" onClick="javascript:location.href = '/messages/new';" />Contact</button></td>
<td><%= time_ago_in_words(post.created_at) %> ago.</td>
<!--/. 
<td><%= link_to 'Show', post %></td>
<td><%= link_to 'Edit', edit_post_path(post) %></td>
<td><%= link_to 'Destroy', post, :confirm => 'Are you sure?', :method => :delete %></td>
-->
</tr>
<% end %>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:37:10.577

你 routes.rb 没有定义路径`user_messages_path`，很简单:)

如果你想要嵌套的宁静路线，你需要类似的东西

```
resources :users do
  resources :messages
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:02:09.953

只需使用

```
<% form_for @message do |f| %>
<% end %> 
```

# java - 在我手动刷新xml所在的文件夹之前，Jsp页面不显示修改后的xml文件的内容

> ID：10226208
> 
> 赞同：0
> 
> 时间：2012-04-19T10:30:45.070
> 
> 标签：java, xml, jsp, jakarta-ee

我正在开发一个 Web 项目，在该项目中我调用一个更新 XML 文件的 Java 类，然后将请求重定向到一个 JSP，该 JSP 显示更新的 XML 文件的内容。但是在我手动刷新包含该 XML 文件的文件夹之前，不会显示更新的 XML 值。

我的代码模板是..

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    String instanceName=request.getParameter("instanceName");
    int no_of_days=Integer.parseInt(request.getParameter("days"));

               CopyOfUpdateXmlLicenses obj2=new CopyOfUpdateXmlLicenses(instanceName,     new_free_lic);
    obj2.updateXML_Licesnes();
               long time=new Date().getTime();
    response.sendRedirect("Licenses.jsp?ms="+time); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:14:57.090

你犯了一个重大的设计错误。webapp 不应在运行时写入 deploy 文件夹，原因如下：

*   每当您重新部署 WAR 或重新启动服务器时，所有更改都会丢失。仅仅是因为这些更改不包含在（原始）WAR 中。

*   有些服务器不会在磁盘上展开 WAR，而是在内存中展开。然后`getRealPath()`将返回`null`，使您无法向其写入文件。

您的具体问题是由于您正在通过 IDE 部署和运行 webapp 而引起的。IDE 不会立即发现项目文件夹结构中的任何外部更改。但是您应该意识到 IDE 不是服务器，也不能在生产环境中运行。IDE 只是一个开发工具。

您需要将文件写入部署文件夹之外的固定路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:45:55.933

我会制作一个名为 Licenses.java 的 servlet，然后将页面重定向到具有新时间的许可证，或者只是让 servlet 在加载时生成新时间以将其与旧时间进行比较。然后让 servlet 执行逻辑，然后将页面转发到 licenses.jsp。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T10:12:32.980

谢谢大家花时间在我的问题上。我找到了上述问题的根本原因。

代码没有问题，而 Eclipse IDE 则没有问题。IDE 需要一些时间来刷新工作区的内容。因此，与此同时，如果我们的程序尝试读取工作区中文件的内容，则更改可能不会立即反映出来。因此，尝试通过将 Web 应用程序部署到 tomcat 来检查它。

如果您想在 Eclipse IDE 中执行它，请转到**窗口-> 首选项-> 常规-> 工作区**并选择“**自动刷新**”选项。

# javascript - 检测用户当前位置，在 Sencha Touch V2 中添加标记到该位置

> ID：10226209
> 
> 赞同：1
> 
> 时间：2012-04-19T10:30:46.367
> 
> 标签：javascript, google-maps, sencha-touch-2, dom-events

下面的代码有助于显示地图，并从 JSON 文件中的数据添加标记。从一个标记到另一个标记的 getDirections 也得到了促进。

需要：检测用户当前位置，在该位置添加一个标记，并将该位置应用于下面代码中给出的起始变量，以便可以绘制从该当前位置到已被点击的标记的方向。

```
Ext.define('Navigator.view.mapcard', {
    extend: 'Ext.Map',
    xtype: 'mapcard',

    config: {
        title: 'Mappa',
        iconCls: 'maps',
       // useCurrentLocation: true,

        mapOptions: {
            center: new google.maps.LatLng('24.859622', '18.84089'),
            zoom: 4,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            navigationControl: true,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.DEFAULT
            }
        },

        listeners: {
            maprender: function (comp, map) {

                var data = Ext.getStore('Contacts'),
                    marker = [], infowindow = [],
                    dist = [];

                data.on('load', function () {
                    data.each(function (rec, idx, cnt) {
                        var latLng = new google.maps.LatLng(rec.get('latitude'), rec.get('longitude'));

                        marker[idx] = new google.maps.Marker({
                            map: map,
                            position: latLng
                        }),
                        infowindow[idx] = new google.maps.InfoWindow({
                            content: rec.get('title')
                        });

                        google.maps.event.addListener(marker[idx], 'click', function () {
                            infowindow[idx].open(map, marker[idx]);

                            if (dist.length === 0) {
                                dist.push(rec.get('title'));
                            } else if (dist.length === 1) {
                                dist.push(rec.get('title'));
                            } else if (dist.length > 1) {
                                // need reload map
                                dist = [];
                                dist.push(rec.get('title'));
                            }

                            if (dist.length === 2) {
                                var start = dist[0],
                                    end = dist[1],
                                    request = {
                                        origin: start,
                                        destination: end,
                                        travelMode: google.maps.DirectionsTravelMode.DRIVING
                                    };

                                var directionsDisplay = new google.maps.DirectionsRenderer(),
                                    directionsService = new google.maps.DirectionsService();

                                directionsDisplay.setMap(map);

                                directionsService.route(request, function (response, status) {
                                    if (status == google.maps.DirectionsStatus.OK) {
                                        directionsDisplay.setDirections(response);
                                    }
                                });
                            }
                        });

                        //setTimeout(function () { map.panTo(latLng) }, 1000);
                    });
                });

            }
        }

    }
}); 
```

# delphi - 透明 TMemo - 文本在未选中时似乎保持选中状态

> ID：10226211
> 
> 赞同：2
> 
> 时间：2012-04-19T10:30:57.980
> 
> 标签：delphi, winapi, transparency, delphi-7

我希望对 Delphi 7 中的透明 TMemo 控件有所帮助。我在网上找到了一些运行良好的代码，在某种程度上，刷新率有点垃圾，但我可以忍受。主要问题是未选择的文本看起来好像它实际上已被选中。

这是使用 SelectAll() 选择所有文本的地方； ![这是使用 SelectAll() 选择所有文本的地方；](../Images/08e36f9059a1a6fab363b36e9be96500.png)

这里实际上没有选择文本，但之前已经选择了，请注意浮线表示输入将发生在改进中的“p”之后。 ![这里实际上没有选择文本，但之前已经选择了，请注意浮线表示输入将发生在改进中的“p”之后。](../Images/6c690900ea69bc7a8f1c7a9da26b689b.png)

最后是一张显示差异的图像。 ![最后是一张显示差异的图像。](../Images/c6122ccf5b483d5aab22b15fc3778e99.png)

我觉得很奇怪的是，例如，如果我按箭头键，错误的突出显示就会消失，但使用鼠标时却不会。

这个自定义 TMemo 的代码如下：

```
unit TrMemo;

interface

uses
 Messages, Controls, StdCtrls, classes;

const TMWM__SpecialInvalidate=WM_USER+1111;

type
  TTransparentMemo = class(TMemo)
  private
   procedure SpecialInvalidate(var Message:TMessage); message TMWM__SpecialInvalidate;
   procedure WMHScroll(var Message: TWMHScroll); message WM_HSCROLL;
   procedure WMVScroll(var Message: TWMVScroll); message WM_VSCROLL;
   procedure WMSetText(var Message:TWMSetText); message WM_SETTEXT;
   procedure CNCTLCOLOREDIT(var Message:TWMCTLCOLOREDIT); message CN_CTLCOLOREDIT;
   procedure WMKeyDown(var Message: TWMKeyDown); message WM_KEYDOWN;
   procedure WMEraseBkgnd(var Message: TWMEraseBkgnd); message WM_ERASEBKGND;
  protected
   procedure CreateParams(var Params: TCreateParams); override;
  public
   constructor Create(AOwner: TComponent); override;
  end;

procedure Register;

implementation

uses Windows;

{ TTransparentMemo }

procedure TTransparentMemo.WMHScroll(var Message: TWMHScroll);
begin
 inherited;
 PostMessage(Handle,TMWM__SpecialInvalidate,0,0);
end;

procedure TTransparentMemo.WMVScroll(var Message: TWMVScroll);
begin
 SendMessage(Handle,TMWM__SpecialInvalidate,0,0);
 inherited;
 PostMessage(Handle,TMWM__SpecialInvalidate,0,0);
end;

procedure TTransparentMemo.CNCTLCOLOREDIT(var Message:TWMCTLCOLOREDIT);
begin
 with Message do
 begin
  SetBkMode(ChildDC,TRANSPARENT);
  Result:=GetStockObject(HOLLOW_BRUSH)
 end
end;

procedure TTransparentMemo.WMSetText(var Message:TWMSetText);
begin
 inherited;
 if not (csDesigning in ComponentState) then PostMessage(Handle,TMWM__SpecialInvalidate,0,0)
end;

procedure TTransparentMemo.SpecialInvalidate(var Message:TMessage);
var
 r:TRect;
begin
 if (Parent <> nil) then
 begin
  r:=ClientRect;
  r.TopLeft:=Parent.ScreenToClient(ClientToScreen(r.TopLeft));
  r.BottomRight:=Parent.ScreenToClient(ClientToScreen(r.BottomRight));
  InvalidateRect(Parent.Handle,@r,true);
  RedrawWindow(Handle,nil,0,RDW_FRAME+RDW_INVALIDATE);
 end;
end;

procedure TTransparentMemo.WMKeyDown(var Message: TWMKeyDown);
begin
 SendMessage(Handle,TMWM__SpecialInvalidate,0,0);
 inherited;
 PostMessage(Handle,TMWM__SpecialInvalidate,0,0);
end;

procedure TTransparentMemo.WMEraseBkgnd(var Message: TWMEraseBkgnd);
begin
 Message.Result:=1
end;

constructor TTransparentMemo.Create(AOwner: TComponent);
begin
 inherited;
 ControlStyle:=[csCaptureMouse, csDesignInteractive, csClickEvents,  csSetCaption, csOpaque, csDoubleClicks, csReplicatable, csNoStdEvents];
end;

procedure TTransparentMemo.CreateParams(var Params: TCreateParams);
begin
 inherited CreateParams(Params);
 with Params do
 begin
  ExStyle:=ExStyle or WS_EX_TRANSPARENT and not WS_EX_WINDOWEDGE
   and not WS_EX_STATICEDGE and not WS_EX_DLGMODALFRAME and not
   WS_EX_CLIENTEDGE;
 end;
end;

procedure Register;
begin
 RegisterComponents('Samples', [tTransparentMemo]);
end;

end. 
```

任何提示/提示/答案将不胜感激！提前干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:13:45.490

这不是一个完整的修复，但你可以，例如，做类似的事情

```
protected
  procedure Click; override;

procedure TTransparentMemo.Click;
begin
  PostMessage(Handle,TMWM__SpecialInvalidate,0,0);
  inherited;
end; 
```

等等。也许有更好的地方可以做到这一点。查看您的 VCL 源代码 (StdCtrls.pas)，您可能会在其中找到一些内容，`TCustomEdit`或者`TCustomMemo`哪些是更好的覆盖选项。

# sql-server-2008 - 在从先前创建的表中选择第一行的同时创建两个表

> ID：10226212
> 
> 赞同：0
> 
> 时间：2012-04-19T10:31:09.353
> 
> 标签：sql-server-2008, insert

我想了解更多关于在创建第一个表后立即插入一个值的信息，

**场景**：

我有两张作为 PK 的表，以及`Patient`作为PK和作为 FK 的.`PID``PatientRecord``RID``PID``Patient`

我想要做的是在成功创建它后将最新`PID`的插入到右边。`PatientRecord`

初始 SQL：

```
INSERT INTO record (@PID,@NID,@DID)
values((SELECT TOP (1) PERCENT 'PID' FROM patient),2,1) 
```

*值 2 和 1 确实已经存在于`Doctor`和`Nurse`表中。*

我意识到我在使用该查询时犯了一个巨大的错误，但是通过一些关于我哪里出错的解释和/或直接指导将有很大帮助。

代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:52:09.623

我建议您对患者表中的主键使用标识字段。然后你可以使用类似的东西..

`insert into Patient values ('some patient values')`

`insert into PatientRecord values (ident_current('Patient'), 'some patient record values')`

# list - (list 'quote '5) = ''5 而不是 '(quote 5) 或 '(''5) 的值如何？

> ID：10226219
> 
> 赞同：1
> 
> 时间：2012-04-19T10:31:30.483
> 
> 标签：list, lisp, quote

似乎 Common Lisp 确实`(list 'quote 'x)`以一种特殊的方式对待。例如， 的值为`(list 'oddp '5)`is`'(oddp 5)`而 的`(list 'quote '5)`值为`''5`。换句话说，由于前面的引用，即使它应该处于数据模式，quote 函数似乎也被评估了。

比较以下表达式的值：

```
 1\. (list 'quote '5) = (list 'quote 5) = (quote '5) = ''5
    2\. (list '' '5) = '(''5)
    3\. (list ' 5) = (list 5) = '(5)
    4\. (list 'oddp '5) != (oddp 5) 
```

评价似乎非常奇特。但我想我可能会很困惑。

有人可以帮助我更好地理解这里的模式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T12:13:33.203

*=*是什么意思？您可以将它用于两种不同的事情：读取后相等和评估后相等。顺便说一句，在 Lisp 本身中，该函数会`=`比较数字。

**第一步是阅读**：

`(list 'quote '5)` 阅读 >`(LIST (QUOTE QUOTE) (QUOTE 5))`

`(list '' '5)` 阅读 >`(LIST (QUOTE (QUOTE (QUOTE 5))))`

`(list ' 5)` 阅读 > `(LIST (QUOTE 5))`

`(list 'oddp '5)` 阅读 > `(LIST (QUOTE ODDP) (QUOTE 5))`

现在`'`是一个读取宏。它转换下一个文本形式。 `'someform`只是读作`(QUOTE SOMEFORM)`. 打印时打印机可能会重新转换它。请注意它如何与漂亮的打印交互。以下示例在 LispWorks 中：

```
CL-USER 50 > '(QUOTE SOMEFORM)
(QUOTE SOMEFORM)

CL-USER 51 > (setf *print-pretty* t)
T

CL-USER 52 > '(QUOTE SOMEFORM)
'SOMEFORM 
```

另请注意，引号 readmacro 字符`'`读取空格。

`'5`读法与 example 相同`' 5`。

但是将引号直接放在下一个表达式之前是一种很好的风格，没有空格。

**第二步是评估**：

`(LIST (QUOTE QUOTE) (QUOTE 5))` 评估 > `(QUOTE 5)` 漂亮打印 >`'5`

`(LIST (QUOTE (QUOTE (QUOTE 5))))` 评估 >`((QUOTE (QUOTE 5)))`漂亮打印 >`(''5)`

`(LIST (QUOTE 5))` 评估 >`(5)`

`(LIST (QUOTE ODDP) (QUOTE 5))` 评估 >`(ODDP 5)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T10:58:25.083

`'X`并且`(quote X)`是等效的，第一个只是第二个的简写，打印机在序列化它时将使用该简写。但是在您的示例中没有发生实际评估。（评估`(quote X)`会给你`X`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:26:30.210

回复：*例如，`(list 'oddp '5)`值为`'(oddp 5)`*

不，不是。的值`(list 'oddp '5)`只是`(oddp 5)`。没有报价。这是一个恰好与表达式的值相似的对象`'(oddp 5)`。两者比较`equal`：

```
(equal '(oddp 5) (list 'oddp 5)) -> T 
```

回复：*虽然 的`(list 'quote '5)`值为`''5`。*

这也是不对的。的值是表示为`(list 'quote '5)`的对象。该表达式将产生一个类似的对象。`(quote 5)``'5``''5`

产生相同或相似对象的两个表达式并不总是相同的东西。`4`，`(+ 2 2)`并且`(* 2 2)`都是不同的对象，但是当这些数据被视为代码并进行评估时，它们会产生相同的值。

# internet-explorer - 旧版本的 IE 可以在较新的文档模式下运行吗？（例如在文档模式 IE9 中的 IE7 渲染）

> ID：10226220
> 
> 赞同：0
> 
> 时间：2012-04-19T10:31:32.497
> 
> 标签：internet-explorer, internet-explorer-7

我正在构建一个网页，并正在使用 IE 开发人员工具对其进行测试，以查看它在旧版本的 IE 中的外观。

如果我在浏览器模式下测试：IE7，我是否也必须将文档模式设置为 IE7？我问是因为如果我将文档模式保持为 IE9 标准，我的页面显示正常。但如果我将其更改为文档模式：IE7。一团糟。

**我想知道IE7（原始浏览器）是否可以使用IE9文档模式。** 这对某些人来说可能是显而易见的，但为什么微软会允许您在 IE7 浏览器模式下使用 IE9 文档模式查看页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:43:13.363

您可以使用[Modernizr](http://modernizr.com/)之类的工具来帮助解决其中的一些不兼容问题，但就其呈现方式而言，您不能让 IE7 表现得像 IE9 或 IE8。

浏览器需要对文档类型的变化具有相当的弹性，微软已经确保 IE 能够很好地容忍各种不良 html。我不太清楚你在最后一句中的意思，但允许你在 IE7 中查看页面只是从 MS 提供某种形式的向后兼容性的一种方式。看看[这里](http://blogs.msdn.com/b/ie/archive/2011/03/24/ie9-s-document-modes-and-javascript.aspx)。

# android - 以下代码是否适用于 sencha touch 2.0

> ID：10226222
> 
> 赞同：0
> 
> 时间：2012-04-19T10:31:35.353
> 
> 标签：android, search, sencha-touch-2

你好朋友我正在 sencha touch 2.0 中创建一个应用程序，其中我在工具栏中添加了一个搜索按钮。现在我想打开一个具有透明背景的搜索字段，如下图所示。

![在此处输入图像描述](../Images/5c7b295f3fb9bfe5e0ee6ea117c47fc2.png)

当我运行我的项目时，logcat 指示我控制器文件中存在错误。下面我正在添加我的控制器类。

```
Ext.define('MyApp.controller.search',{
    extend: 'Ext.app.Controller',
    config: {
        refs: {
            groupList: "groupList"
        },
        control: {
            groupList: {
                        searchField: "searchField"            
            }
        }
    },
    searchField: function(){
      //  console.log("SearchField Tapped");
        if ( ! this.searchView)
        {
            this.searchView = this.render({
                xtype: 'searchView',
            });

            var cancelSearchBtn = this.searchView.query('#'+cancelSearchBtn)[0];

            cancelSearchBtn.setHandler(function(){
                this.searchView.hide();
            }, this);
        }

        this.searchView.show({
            type: 'slide',
            direction: 'up',
            duration: 500,
        });
    },
    launch: function(){
        alert('Hello search');
    },
}); 
```

我在 logcat 中收到以下错误：-

```
TypeError: Result of expression 'this.render' [undefined] is not a function. at
file:///android_asset/www/app/controller/SearchController.js:18 
```

帮助我摆脱这个问题。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:09:33.927

控制器内部没有`render`方法。您需要创建该组件的一个实例，然后将其添加到您希望它在其中可见的容器（通常称为 Main）。

# sql - MySql Workbench 内存

> ID：10226233
> 
> 赞同：0
> 
> 时间：2012-04-19T10:32:20.307
> 
> 标签：sql, xml, memory, mysql-workbench

我有一个包含 24.000 行的大型 sql 表，我想将其所有字段导出到 XML 文件。我正在使用 MySQL Workbench，但 select * 查询使其内存不足。我可以将结果限制在 3-4 千行左右并合并文件，但我不想在合并时丢失一条记录。

有没有办法给 MySQLWorkbench 更多的内存，或者有没有人有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:23:08.137

What you are looking for is [mysqldbexport](http://dev.mysql.com/doc/workbench/en/mysql-utils-man-mysqldbexport.html) which is part of MySQL Utilities that are part of MySQL Workbench. Please read de documentation in that link.

# sql - 如何计算 1 个月后的日期 currentDate

> ID：10226236
> 
> 赞同：10
> 
> 时间：2012-04-19T10:32:31.903
> 
> 标签：sql, sql-server-2008, date

如何计算当前日期一个月后的日期。

例如，如果我有 19/04/2012 我想得到 19/05/2012。sql上是否有任何允许这样做的函数？

我需要在 2012 年 4 月 19 日和 2013 年 4 月 19 日一样的一年内做同样的事情

干杯

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T10:34:50.087

您可以使用 DATEADD (datepart , number , date )

[在这里](http://msdn.microsoft.com/en-us/library/ms186819.aspx)指定

示例（感谢 DarrenDavis）

月份：

```
 select dateadd(m, 1, getdate()) 
```

年份：

```
 select dateadd(YY, 1, getdate()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:35:41.667

使用[dateadd()](http://msdn.microsoft.com/en-us/library/ms186819.aspx)函数

```
SELECT dateadd(mm, 1, '19-Apr-2012') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:38:01.977

要将 1 个月添加到当前日期：

```
SELECT DATEADD(m, 1, GETDATE()) 
```

要将 1 年添加到当前日期：

```
SELECT DATEADD(YY, 1, GETDATE()) 
```

有关其他参数，请参阅：

[http://msdn.microsoft.com/en-us/library/ms186819.aspx](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:36:39.937

您可以使用 DateAdd：

```
select dateadd(m, 1, getdate())
select dateadd(yy, 1, getdate()) 
```

在线搜索其他时段指标，如小时、分钟等！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:36:43.320

像这样的东西应该可以完成这项工作

SELECT DATEADD(月, 1, '2012-04-19')

一年

SELECT DATEADD(年, 1, '2012-04-19')

[http://msdn.microsoft.com/en-us/library/ms186819.aspx](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T11:10:37.173

您可以将此查询用于提前 1 个月的日期。此查询在 oracle 中运行良好。

```
select add_months(trunc(sysdate),1) from dual; 
```

对于提前 1 年的日期，请使用此查询

```
select add_months(trunc(sysdate),12) from dual; 
```

# java - 在 Android、Eclipse 中打印字符串数组

> ID：10226240
> 
> 赞同：0
> 
> 时间：2012-04-19T10:32:42.353
> 
> 标签：java, android, arrays, string

下面是我的数组。只需要知道如何使用 canvas.drawText 将它们打印出来。任何帮助，将不胜感激。

```
String [] Words = {
    "apple",
    "orange",
    "pear",
    "red",
    "green",
    "blue",
}; 
```

** 已编辑。抱歉，我每次只需要打印 1 个字符串。我没有早点这么说是我的错误。

**编辑：**

我试过这样的事情：

```
canvas.drawText(Words[wordGenerator(m)], 100, 100, null); 
```

具有以下功能：

```
private int wordGenerator(int length) {
    // TODO Auto-generated method stub
    length = (int)(Math.random()*6);
    return length;
} 
```

它在 logCat 上崩溃并出现以下错误：

*   E/AndroidRuntime(447)：致命异常：线程 8
*   E/AndroidRuntime(447): java.lang.NullPointerException
*   E/AndroidRuntime(447): 在 android.graphics.Canvas.drawText(Native Method)
*   E/AndroidRuntime(447): 在 java.lang.Thread.run(Thread.java:1096)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:38:22.743

使用 TextUtils.join 或 TextUtils.concat

## 编辑

就像桑迪在评论中指出的那样，

```
canvas.drawText(words[rand.nextInt(words.length()]); 
```

应该做

## 编辑（再次）

根据您上次的编辑，这应该是要走的路

```
canvas.drawText(words[wordGenerator(words.length()); 
```

# css - css ie7在行之间添加额外的空间

> ID：10226242
> 
> 赞同：0
> 
> 时间：2012-04-19T10:32:49.633
> 
> 标签：css, internet-explorer-7

我刚刚部署了一个站点并提出了一些我想我应该预料到的 ie7 css 问题。我在 IE7 的虚拟版本中调试时遇到问题，我已经安装了 debugBar 和 IETester，但是我无法像使用 Chrome 或 Firebug 那样直观地看到元素上的填充或边距......

所以我的问题的第一部分 - 它们是我可以在 IE7 中使用的有助于调试 css 的工具吗？

第二部分涉及在两个不同页面上出现的元素。该元素是一个 UL，它在元素内呈现额外的空间，在另一个页面上它正确呈现。

html是：

```
 <div id="nextSevenEvents">
  <ul id="nextSevenEventseventList">
    <li>
      <div class="dateEntry last span-6 last borderTop">  
        <div class="whatsOnDate last span-2 "> Fri 20 Apr</div>
        <div class="whatsOnTitle span-4 last">Ladies v Royal (Away) FR</div>
      </div>
    </li>
    <li>
      <div class="dateEntry last span-6 last ">  
        <div class="whatsOnDate last span-2 "> &nbsp;</div>
        <div class="whatsOnTitle span-4 last">Terry on hols</div>
      </div>
     </li>
    </ul>
  </div> 
```

这些的CSS是：

```
 #div-whatson ul {
     list-style: none;
     padding: 5px 0 0;
     margin: 0;
   }
   .dateEntry {
     padding: 5px 0 0 0;
   }
   .whatsOnDate {
     font-size: 0.8em;
     line-height: 1em;
   }
     .whatsOnTitle {
     font-size: 0.9em;
     line-height: 1em;
   } 
```

我在这里想念什么？

我的网站基于蓝图

谢谢

更新：#div=whatson 是一个父元素，其中包含一些其他元素（将其省略，否则我的代码会一直持续下去

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:47:43.377

您是否有一个包含 id 'div-whatson' 的父元素来包装列表？您是否为 body font-size 设置了明确的大小，因为继承可能会出现问题。

调试 IE 版本时非常方便的一个工具是 IE9 中的内置开发人员工具（F12 调出它）。从这里您可以更改 IE 的版本。我不会指望这是 100% 准确的，但它是一个有用的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:57:05.743

尝试将其添加到您的 CSS 中：

```
#div-whatson ul li {
    padding: 0;
    margin: 0;
} 
```

# php - 如何修复 302 Found CURL？

> ID：10226247
> 
> 赞同：0
> 
> 时间：2012-04-19T10:33:04.620
> 
> 标签：php, xml, curl, http-status-code-302

我正在尝试使用 PHP 脚本中的 HTTP POST 通过 CURL 发送 XML 数据。我在执行时收到以下消息。

**找到** 文档已移至[此处](http://www.example.com/1.1/home/)。

这是我的代码。

```
<?php
$url = "https://usm.channelonline.com/REQUEST";

$post_string = '<export_documents_request schemaVersion="4.0">
  <options>
    <onlyUnexported>false</onlyUnexported>
    <eventInRange>
      <eventType>modified</eventType>
      <after>2005-01-01T10:00:00Z</after>
    </eventInRange>
  </options>
</export_documents_request>';

$header  = "POST HTTP/1.1 \r\n";
$header .= "Content-type: text/xml \r\n";
$header .= "Content-length: ".strlen($post_string)." \r\n";
$header .= "Content-transfer-encoding: text \r\n";
$header .= "Connection: close \r\n\r\n"; 
$header .= $post_string;

$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
curl_setopt($ch,CURLOPT_FOLLOWLOCATION,TRUE);
curl_setopt($ch,CURLOPT_MAXREDIRS,10);
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 4);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $header);

$data = curl_exec($ch); 

if(curl_errno($ch))
    print curl_error($ch);
else
    echo $data;
    curl_close($ch);

?> 
```

这是执行的屏幕视图。

![在此处输入图像描述](../Images/7ec048fd1c08eaeefcbdf9c7d7456732.png)

我擅长 PHP，但只熟悉 CURL。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:49:17.240

就像 MrCode 指出的那样，服务器并没有真正响应 301/302 或者您的 PHP 正在安全模式下运行，这不允许使用`CURLOPT_FOLLOWLOCATION`.

# algorithm - 如何在有向图中和线性时间中找到两个顶点之间不同最短路径的数量？

> ID：10226251
> 
> 赞同：28
> 
> 时间：2012-04-19T10:33:13.743
> 
> 标签：algorithm, data-structures, graph, breadth-first-search

这是练习：

> 设 v 和 w 是有向图 G = (V, E) 中的两个顶点。设计一个线性时间算法来找出 v 和 w 之间的不同最短路径（不一定是顶点不相交）的数量。注意：G 中的边未加权

* * *

对于这个消费税，我总结如下：

1.  它是一个有向图
2.  它询问**不同最短路径的数量**。首先，路径应该是最短的，然后可能有多个这样的最短路径长度相同。
3.  在 v 和 w 之间，所以从 v 到 w 和从 w 到 v 都应该计算在内。
4.  线性时间。
5.  该图没有加权。

* * *

综合以上几点，我有以下想法：

1.  我不需要使用[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra's_algorithm)，因为该图没有加权，我们试图找到所有最短路径，而不仅仅是单个路径。
2.  我维护`count`最短路径的数量
3.  我想先从 v 使用 BFS 并维护一个`global level`信息
4.  我`global level`每次增加一，然后 BFS 达到一个新的水平
5.  我还维护`shortest level`到 w 的最短路径的信息
6.  第一次在旅行中遇到 w 时，我将 分配`global level`给`shortest level`and `count++`;
7.  只要`global level`等于`shortest level`，我`count`每次再次遇到 w 时都会增加。
8.  如果`global level`变得大于`shortest level`，我终止旅行，因为我正在寻找最短路径而不是路径。
9.  然后我再次为 w 做 2 - 8 到 v

* * *

我的算法正确吗？如果我对 w 做 v，然后对 v 做 w，那仍然被认为是线性时间吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-19T13:51:11.093

以下是对此的一些想法。

*   从 v->w 到节点 x 只能有多个最短路径，如果有多个路径通过同一顶点进入 x，或者如果在同一 DFS 级别多次遇到 x。

证明：如果有多条路径`x`通过同一个顶点，显然有多种方式通过`x`。这很简单。现在让我们假设只有一种方式`x`通过每个顶点进入`x`（最多）。

如果之前遇到过 x，则当前路径中没有一条可以促成另一条最短路径。由于之前遇到过 x，所有可以遵循的路径都将至少比之前的最短路径长一个。因此，这些路径都不能对总和做出贡献。

这意味着我们最多遇到每个节点一次并且完成。所以正常的 BFS 就可以了。

*   我们甚至不需要知道级别，而是一旦遇到最终节点就可以得到最终数字。

这可以编译成一个很简单的算法，主要就是BFS。

```
 - Mark nodes as visited as usual with BFS.
 - Instead of adding just nodes to the queue in the DFS add nodes plus number of incoming paths.
 - If a node that has been visited should be added ignore it.
 - If you find a node again, which is currently in the queue, do not add it again, instead add the counts together.
 - Propagate the counts on the queue when adding new nodes.
 - when you encounter the final, the number that is stored with it, is the number of possible paths. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-19T12:13:56.437

您的算法在图表上中断，例如

```
 *   *   *   1
 / \ / \ / \ / \
v   *   *   *   w
 \ / \ / \ / \ /
  *   *   *   2 
```

所有边缘从左到右。它计算了两条路径，一条通过`1`，另一条通过`2`，但两者都`1`可以`2`通过`v`8 条不同的最短路径到达，总共 16 条。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T13:05:36.183

正如 qrqrq 所示，您的算法在某些图表上失败，但 BFS 的想法很好。相反，维护一个初始化为零`z`的大小数组；保持到距离小于in`|V|`的已发现顶点的最短路径数。还要维护一个大小数组，如果该距离小于，则该数组是从到顶点的距离。初始化为 0、0和1（从to有一条长度为 0 的路径），并设置to和to的所有其他条目。`i``level``z[i]``d``|V|``d[i]``v``i``level``level``d[v]``z[v]``v``v``d``-1``z``0`

现在，每当您在 BFS 中遇到从`i`to的边缘时，然后：`j`

*   如果`d[j] = -1`，则设置`d[j] := level`和`z[j] := z[i]`。
*   如果`d[j] = level`，则设置`z[j] := z[j] + z[i]`。
*   否则，什么也不做。

原因是对于每条从到的最短路径，都有一条从`v`到的`i`最短路径。这将给出从线性时间到每个顶点的最短路径数。现在再次执行相同操作，但从.`v``j``v``w`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T11:09:04.497

这个算法对我来说看起来是正确的。

如您所知，BFS 是`O(N)`一个`T`线性时间(`T = C + a * N``N``C``a`

在您的情况下，执行两次搜索 - 首先是 from `v`to `w`，然后是 from `w`to `v`- 是（最坏的情况）`2T`或，如果您定义一个 new和一个 new `2C + 2a * N`，这也满足线性时间要求，因为两者和也是固定常数.`O(N)``C' = 2C``a' = 2a``C'``a'`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-13T03:17:02.507

```
int edgeCb( graphPT g, int x, int y )
{
    if ( dist[ y ] > dist[ x ] + 1 ) {
        dist[ y ] = dist[ x ] + 1; // New way
        ways[ y ] = ways[ x ]; // As many ways as it's parent can be reached
    } else if ( dist[ y ] == dist[ x ] + 1 ) {
        ways[ y ] += ways[ x ]; // Another way
    } else {
        // We already found a way and that is the best
        assert( dist[ y ] < g->nv );
    }
    return 1;
} 
```

上面的代码为我在这篇文章中提到的所有类型的图表提供了正确的结果。基本上它是 BFS 遍历的边缘回调。

距离 [ 开始 ] = 0; 方式[开始] = 1；

其余所有顶点 dist[ x ] = numberOfVertices; // 这超出了最大可能距离

BFS（克，开始）；

如果ways[end] 不为零，则表示路径数，dist[end] 表示最短距离。

Incaseways[ end ] == 0 意味着 end 不能从 start 到达。

请让我知道这是否有任何循环漏洞。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-27T07:20:56.857

**通过更改 BFS 最简单的解决方案：**

count(v) = 0，count(s) = 1。对于 v 的每个邻居 u，如果 (d(v) + 1 == d(u))，则 count(u) += count(v)。现在重置所有内容并从末端顶点执行相同操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-17T17:55:10.663

我可以这样做吗

1.  我使用 BFS 遍历，直到到达目标顶点并保持水平
2.  到达目标级别后，我使用级别表如下

从级别表中，我开始遍历计算路径中顶点的父节点数量（第一次它将是目标顶点）。
在每一步，我都会将在该特定级别找到的不同父节点的数量乘以到目标顶点的最短路径。
我向上移动级别，只考虑落入我的路径的节点，并将在每个级别找到的**不同父**级的数量相乘，直到达到级别 0。

这行得通吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-13T20:55:18.867

只需检查此处给出的良好解释：

[https://www.geeksforgeeks.org/number-shortest-paths-unweighted-directed-graph/](https://www.geeksforgeeks.org/number-shortest-paths-unweighted-directed-graph/)

简而言之，我们可以修改任何最短路径算法，当更新步骤到来时，当当前路径提议与直到那一刻发现的最短路径长度相同时，增加一个计数器，用于计算先前发现的最短路径的数量。

在特定情况下，当它是未加权的图或所有边的权重恒定时，最简单的方法是修改 BFS。

# asp.net - 当页面路径以反斜杠结尾时 ResolveClientUrl

> ID：10226252
> 
> 赞同：0
> 
> 时间：2012-04-19T10:33:14.990
> 
> 标签：asp.net

我注意到当 Page.ResolveClientUrl 使用的页面的 URL 以反斜杠结尾时，它解析为不正确的路径。例如：

```
http://localhost/Default.aspx
-> Page.ResolveClientUrl("~/Styles/style.css") returns "Styles/style.css" (correct)

http://localhost/Default.aspx\
-> Page.ResolveClientUrl("~/Styles/style.css") returns "../Styles/style.css" (incorrect) 
```

为什么会发生这种情况，如何防止返回不正确的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:38:17.610

您可以使用`ResolveUrl`. `ResolveClientUrl`返回相对于当前页面`ResolveUrl`的路径，并返回相对于站点根目录的路径。

```
Page.ResolveUrl("~/layout/images/andornotLogo.gif")

"/layout/images/andornotLogo.gif"

Page.ResolveClientUrl("~/layout/images/andornotLogo.gif")

"../layout/images/andornotLogo.gif" 
```

# iphone - iPhone：以毫秒为单位从当前日期添加 60 天时出现问题

> ID：10226253
> 
> 赞同：0
> 
> 时间：2012-04-19T10:33:16.983
> 
> 标签：iphone

我正在尝试以毫秒为单位从当前日期添加 60 天。我尝试了下面的代码，我能够正确获取当前日期毫秒，但是在将 60 天毫秒添加到当前日期之后，它没有给我预期的毫秒。请帮助纠正我在这里做错的事情。

```
double currDateInMilliSecs = [NSDate timeIntervalSinceReferenceDate] * 1000;    
NSLog(@"currDateInMilliSecs: %f", currDateInMilliSecs);

double sixtydaysvalue = 60 * 24 * 3600 * 1000;
NSLog(@"sixtydaysvalue: %f", sixtydaysvalue);

double sixtyDaysMilliSecsFromCurrDate = currDateInMilliSecs + sixtydaysvalue;
NSLog(@"sixtyDaysMilliSecsFromCurrDate: %f", sixtyDaysMilliSecsFromCurrDate); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:40:13.880

你会试试这个

```
 NSTimeInterval sixtydaysvalue = 60 * 24 * 3600 * 1000.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:42:24.910

尝试

```
double sixtydaysvalue = 60.0 * 24.0 * 3600.0 * 1000.0; 
```

该值超过了最大 32 位 int，因此需要在`double`类型中执行计算。

# java - 在java中将String转换为long

> ID：10226262
> 
> 赞同：1
> 
> 时间：2012-04-19T10:34:02.037
> 
> 标签：java

我无法将 a 转换`String s="45,333"`为 long 或 double 之类的数字。谁能帮我解决这个问题..我添加了模型片段，当我尝试运行它显示的代码时`NumberFormatException`..

```
public static void main(String args[])
{
long a=85200;
NumberFormat numberFormat=NumberFormat.getNumberInstance();
String s=numberFormat.format(a);
Long l=Long.parseLong(s.toString());
System.out.println("The value:"+s);
System.out.println("The value of long:"+l);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T10:39:23.303

考虑`NumberFormat.parse()`方法而不是`Long.parseLong()`.

`Long.parseLong()`期望`String`里面没有任何格式符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T10:40:09.560

混和不是一个好主意`NumberFormat`。`Long.parseLong()`

`NumberFormat`可以感知区域设置（在您的示例中，它使用您计算机的默认区域设置）或者您可以显式指定格式模式，而子类的`parseXXX()`方法`Number`仅读取“普通”数字（可选减号+数字）。

如果你用 格式化它`NumberFormat`，你应该用`NumberFormat.parse()`它来解析它。但是，您不应该依赖默认语言环境，而是尝试指定一个（或`DecimalFormat`与模式一起使用）。否则，您可能会遇到一些令人讨厌且难以检测的错误。

如果您不关心格式，请考虑使用`Long.toString()`将长值转换为字符串并将`Long.parseLong()`其转换回来。它更易于使用、线程安全（与 不同`NumberFormat`）并且在任何地方都一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T10:43:07.513

正如所指出的，您可以`NumberFormat.parse()`像这样使用：

```
public static void main(String args[]) {
    long a=85200;
    NumberFormat numberFormat=NumberFormat.getNumberInstance();
    String s=numberFormat.format(a);
    Long l;
    try {
        l = numberFormat.parse(s.toString()).longValue();
    } catch (ParseException ex) {
        l = 0L;
        // Handle exception
    }
    System.out.println("The value:"+s);
    System.out.println("The value of long:"+l);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-14T14:18:06.157

```
long l = Long.valueOf(s);
System.out.println("The value of long:"+l); 
```

# memory - 如何在黑莓中获取当前的 cpu 使用情况和内存使用情况？

> ID：10226263
> 
> 赞同：0
> 
> 时间：2012-04-19T10:34:12.257
> 
> 标签：memory, blackberry, cpu-usage

我正在黑莓中制作应用程序，在这里我想知道当前的 cpu 使用情况和内存使用情况。怎么找到那个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:39:16.063

请参阅此链接[内存](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/system/Memory.html)

```
Memory.getRAMStats().getFree();
Memory.getRAMStats().getAllocated()); 
```

# mysql - sql - 连接 2 个表 10 次

> ID：10226265
> 
> 赞同：0
> 
> 时间：2012-04-19T10:34:20.593
> 
> 标签：mysql, sql, database, sqlite

我有 2 个表结构如下：

```
People
----------
>ID, Name, Surname

Projects
----------
>ID, Assistant#1,  Assistant#2,  Assistant#3,  Assistant#4, 
> Assistant#5,  Assistant#6,  Assistant#7,  Assistant#8,  Assistant#9, 
> Assistant#10, lot of other columns..... (every assistant column
> contains an integer, the people ID) 
```

现在，我想查询我的数据库并从 Project 表中获取一行（假设 ID=3 的行），其中包含项目表的所有列，特别是将每个助手替换为正确的姓名和姓氏。我已经设法做到了这一点（有很多连接），但是以我的小 sql 经验，我的代码看起来非常庞大，我确信有更好的方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T10:43:33.757

```
SELECT p.Name, p.Surname
FROM People p
CROSS JOIN Project j ON (p.PeopleID = j.Assistant1 OR
p.PeopleID = j.Assistant2 OR
p.PeopleID = j.Assistant3 OR
.. etc)
AND j.ProjectID = 3 
```

你的表现会很糟糕，但这就是你为拥有一个设计糟糕的数据库所付出的代价。更好的解决方案是通过分解来映射项目和人员：

```
CREATE TABLE proj_people
People_ID INT
Project_ID INT 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T10:41:23.647

你的结构我不清楚。我建议您为项目创建一个离合器。

表：

`Peoples` people_id、people_name、people_surname

`Projects` 项目 ID，项目名称

`Clutch` project_id, people_id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:43:13.700

未测试:)

```
Select * from project pr
left join people pe1 on pe1.peopleid = pr.astint1
left join people pe2 on pe2.peopleid = pr.astint2
left join people pe3 on pe3.peopleid = pr.astint3
left join people pe4 on pe4.peopleid = pr.astint4
left join people pe5 on pe5.peopleid = pr.astint5 
left join people pe6 on pe6.peopleid = pr.astint6
left join people pe7 on pe7.peopleid = pr.astint7
left join people pe8 on pe8.peopleid = pr.astint8
left join people pe9 on pe9.peopleid = pr.astint9
left join people pe10 on pe10.peopleid = pr.astint10
where pr.projectid = 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:44:42.630

也许更清洁的设计是：

人员表：

```
People ID, Name, Surname 
```

项目助理表：

```
Project ID, Assistant Person ID 
```

项目表：

```
Project ID, lots of other columns (but no Assistant columns) 
```

然后，SQL 变成这样：

```
SELECT pr.*, p.* 
FROM Projects pr 
JOIN ProjectAssistants p_a ON pr.ProjectID = p_a ProjectID 
JOIN People p ON p_a.AssistantPersonID = p.PeopleID 
WHERE ProjectID = X 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:45:21.000

您的问题是您正在尝试在数据库级别解决数据表示问题，这很少是一个好主意。您应该有一个仅包含 projectid 和 assistantid 的表，将两列的组合作为表的主键。这将只允许您将此表连接到助手表和项目表一次，并获得您需要的所有结果。这也将具有允许您在未来支持更多项目助理的好处，而无需更改您的查询以添加更多连接。

总之，您应该有 3 个表：

```
Project
Assistant
ProjectAssistant (projectid,assistantid) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T10:45:29.510

你想重组你的表。我讨厌多次看到具有多个列的表用于基本相同的事情。如果您重组为拥有 3 个表：

人

```
PeopleID | Name | Surname 
```

项目

```
ProjectID | ...other columns except Assistant 
```

项目_人

```
ProjectID | PersonID 
```

这样您就可以将多个助手分配给同一个项目，而无需多个助手列。然后你可以使用这样的东西来获得所需的结果：

```
SELECT proj.ProjectID, pers.Name, pers.Surname
FROM Person pers
INNER JOIN Project_Person pp ON pp.PersonID = pers.PersonID
INNER JOIN Project proj ON proj.ProjectID = pp.ProjectID 
```

这不会返回单行，但这不是 SQL 设计的工作方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-19T10:47:21.510

如果您不想/不能更改表结构，那么也许使用用户定义的函数？

`CREATE FUNCTION GET_ASS_NAME (n1 ASS_NO) RETURNS VARCHAR(50) DETERMINISTIC BEGIN DECLARE fullname VARCHAR(50); SELECT fullname = CONCAT(NAME, ' ', SURNAME) FROM PEOPLE WHERE ID = n1; RETURN fullname; END|`

然后

`select GET_ASS_NAME(1), GET_ASS_NAME(2), GET_ASS_NAME(3), ... from PROJECTS where ID = 3`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-19T10:50:31.590

因为您将（可能的）助手数量设置为 10，这表明您将不得不编写代码来容纳这 10 个助手。这可以通过几种方式完成：（尚未测试）

```
select * from projects proj
left join people p1 on proj.assistant1 = p1.peopleid
left join people p2 on proj.assistant2 = p2.peopleid
left join people p3 on proj.assistant3 = p3.peopleid
left join people p4 on proj.assistant4 = p4.peopleid
left join people p5 on proj.assistant5 = p5.peopleid
left join people p6 on proj.assistant6 = p6.peopleid
left join people p7 on proj.assistant7 = p7.peopleid
left join people p8 on proj.assistant8 = p8.peopleid
left join people p9 on proj.assistant9 = p9.peopleid
left join people p10 on proj.assistant10 = p10.peopleid 
```

否则你可以做一些诡计

```
select proj.projectID, 
(select * from people where peopleID = proj.assistant1),
(select * from people where peopleID = proj.assistant2),
(select * from people where peopleID = proj.assistant3),
(select * from people where peopleID = proj.assistant4),
(select * from people where peopleID = proj.assistant5),
(select * from people where peopleID = proj.assistant6),
(select * from people where peopleID = proj.assistant7),
(select * from people where peopleID = proj.assistant8),
(select * from people where peopleID = proj.assistant9),
(select * from people where peopleID = proj.assistant10)
from projects proj 
```

如果可能，最好重新构建数据表的结构，并将单个助手映射到单个 projectID：

```
PeopleID, Name, Surname

ProjectID, PeopleID 
```

因此，您可以只进行一次内连接，然后为每个助手返回一行：

```
select * from projects proj 
inner join people p 
on p.peopleID = proj.peopleid
where proj.projectID = PROJECTID 
```

# jquery - 需要一种将功能添加到不断变化的 html (ul) 列表的方法

> ID：10226266
> 
> 赞同：0
> 
> 时间：2012-04-19T10:34:22.090
> 
> 标签：jquery, html

`<ul>`我一直在考虑如何在 a自己的 s上向 '.click()' 事件添加一个函数`<li>`。第一件事很简单（它是近似的，我显然不是 jquery 专业人士）。

```
$(document).ready(
    function () {
        $('.prodli').each().click( //prodli is my class I set on every <li>
            function () {
                //blabla
            }
        );
    }
); 
```

但！因为总有一个但在某处......事情是这些`<li>`可以通过另一个jquery脚本添加。

因此，如果我在此列表中应用我在上面编写的先前脚本：

```
<ul>
    <li productId="1" class="prodli">Product 1</li>
    <li productId="2" class="prodli">Product 2</li>
    <li productId="3" class="prodli">Product 3</li>
    <li productId="4" class="prodli">Product 4</li>
    <li productId="5" class="prodli">Product 5</li>
    <li productId="6" class="prodli">Product 6</li>
</ul> 
```

我想如果使用其他一些脚本我将列表更新为类似

```
<ul>
    <li productId="455" class="prodli">Product 455</li>
    <li productId="48" class="prodli">Product 48</li>
    <li productId="7" class="prodli">Product 7</li>
</ul> 
```

我应该重新调用我的第一个脚本来将`click()`函数应用于这些新的`<li>`，对吗？

有没有办法以更全球化的方式做到这一点？我的意思是“每次单击具有类“prodli”的元素时，应用此功能”？或者像`<li>`这个特定`<ul>`列表中的每一个？

非常感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:36:01.263

您可以将 click 事件委托给父`ul`元素（或任何其他祖先）。由于 DOM 事件倾向于在树中冒泡，因此对后代元素的任何点击都将到达`ul`并可以在那里处理。

jQuery 提供了[`on`](http://api.jquery.com/on/)执行此操作的方法（如果您使用的是旧版本的 jQuery，则需要[`delegate`](http://api.jquery.com/delegate/)代替`on`）：

```
$("ul").on("click", ".prodli", function() {
    //Do stuff
}); 
```

这意味着`ul`可以随心所欲地改变孩子。这不会有什么不同。任何点击任何后代`ul`都会冒泡到`ul`. jQuery 检查单击是否源自与选择器匹配的元素（在本例中为任何`.prodli`元素），如果是，则执行事件处理程序。

# c# - 访问调用程序集中的资源

> ID：10226271
> 
> 赞同：1
> 
> 时间：2012-04-19T10:34:31.403
> 
> 标签：c#, asp.net, resource-files

我正在将一些代码从应用程序移动到辅助类项目。此应用程序使用包含文本及其翻译的资源文件。

有没有办法仍然从该新帮助项目中的应用程序访问资源文件？这将非常有帮助，因为这样我就不必将这些资源文件的一半移动到那个新项目中。

程序集 A（包含资源文件）-> 在程序集 B 上调用方法，此方法需要程序集 A 的资源文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T17:22:12.380

您可以在 dll 中使用**Assembly.GetEntryAssembly().GetFile()**方法从应用程序程序集中获取文件并使用 ResourceManager 类加载它。或者可能使用**Assembly.GetEntryAssembly().GetExportedTypes()**来获取强类型资源类。但是，您应该考虑从库中引用应用程序中的资源是否是正确的方法。我建议要么将所有资源移动到库程序集并从应用程序中引用它们，要么（可能是最好的） - 仅为资源创建单独的程序集并从应用程序和 dll 中使用它。

# hibernate - Hibernate JPA 数据持久化和映射外键

> ID：10226272
> 
> 赞同：1
> 
> 时间：2012-04-19T10:34:33.307
> 
> 标签：hibernate, persistence

我想问几个关于 Hibernate/jpa 数据持久性的问题。所以这是我的两个主要问题：

1）我使用hibernate使用通用用户类型和tuplizer来持久化枚举，这是我的示例代码：

* * *

## 通用枚举持久性类型：

```
import javax.persistence.Cacheable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;

import lombok.AccessLevel;
import lombok.AllArgsConstructor;
import lombok.Getter;

import org.hibernate.annotations.Cache;
import org.hibernate.annotations.CacheConcurrencyStrategy;
import org.hibernate.annotations.Tuplizer;

import com.jimmy.htf.util.GenericEnumTuplizer;

@Entity
@Cacheable
@Tuplizer(impl = GenericEnumTuplizer.class)
@AllArgsConstructor(access = AccessLevel.PRIVATE)
@Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
public enum Language  {

    ARABIC(1, "language.arabic"), BULGARIAN(2, "language.bulgarian"), CATALAN(3, "language.catalan"), CHINESE(4, "language.chinese"), CROATIAN(5, "language.croatian"), CZECH(6, "language.czech"),
    DANISH(7, "language.danish"), DUTCH(8, "language.dutch"), ENGLISH(9, "language.english"), FINNISH(10, "language.finnish"), FRENCH(11, "language.french"), GERMAN(12, "language.german"),
    GREEK (13, "language.greek"), HEBREW(14, "language.hebrew"), HUNGARIAN(15, "language.hungarian"), INDONESIAN(16, "language.indonesian"), ITALIAN(17, "language.italian"), 
    JAPANESE(18, "language.japanese"), KOREAN(19, "language.korean"), LITHUANIAN(20, "language.lithuanian"), NORWEGIAN(21, "language.norwegian"), PERSIAN(22, "language.persian"), 
    POLISH(23, "language.polish"), PORTUGUESE(24, "language.portuguese"), ROMANIAN(25, "language.romanian"), RUSSIAN(26, "language.russian"), SERBIAN(27, "language.serbian"), 
    SLOVAK(28, "language.slovak"), SLOVENIAN(29, "language.slovenian"), SPANISH(30, "language.spanish"), SWEDISH(31, "language.swedish"), TURKISH(32, "language.turkish"),
    THAI(33, "language.thai"), UKRAINIAN(34, "language.ukrainian"), VIETNAMESE(35, "language.vietnamese"), OTHER(36, "language.other");

    @Id
    @Getter
    private Integer codeValue;

    @Getter
    @Column(length = 64)
    private String  I18nGlobalMessage;

    public static Language fromValue(Integer value) {
        switch (value) {
            case 1: return ARABIC; 
            case 2: return BULGARIAN;
            case 3: return CATALAN;
            case 4: return CHINESE;
            case 5: return CROATIAN;
            case 6: return CZECH;
            case 7: return DANISH;
            case 8: return DUTCH;
            case 9: return ENGLISH;
            case 10: return FINNISH;
            case 11: return FRENCH;
            case 12: return GERMAN;
            case 13: return GREEK;
            case 14: return HEBREW;
            case 15: return HUNGARIAN;
            case 16: return INDONESIAN;
            case 17: return ITALIAN;
            case 18: return JAPANESE;
            case 19: return KOREAN;
            case 20: return LITHUANIAN;
            case 21: return NORWEGIAN;
            case 22: return PERSIAN;
            case 23: return POLISH;
            case 24: return PORTUGUESE;
            case 25: return ROMANIAN;
            case 26: return RUSSIAN;
            case 27: return SERBIAN;
            case 28: return SLOVAK;
            case 29: return SLOVENIAN;
            case 30: return SPANISH;
            case 31: return SWEDISH;
            case 32: return TURKISH;
            case 33: return THAI;
            case 34: return UKRAINIAN;
            case 35: return VIETNAMESE;
            case 36: return OTHER;
            default: return null;
        }
    }
} 
```

* * *

## 通用枚举元组器

```
import java.io.Serializable;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

import org.hibernate.mapping.PersistentClass;
import org.hibernate.tuple.Instantiator;
import org.hibernate.tuple.entity.EntityMetamodel;
import org.hibernate.tuple.entity.PojoEntityTuplizer;

public class GenericEnumTuplizer extends PojoEntityTuplizer {

    public GenericEnumTuplizer(EntityMetamodel entityMetamodel, PersistentClass mappedEntity) {
        super(entityMetamodel, mappedEntity);
    }

    @Override
    @SuppressWarnings(value = { "unchecked", "rawtypes"})
    protected Instantiator buildInstantiator(final PersistentClass persistentClass) {
        return new Instantiator() {
            @Override
            public Object instantiate(Serializable id) {
                try {
                    Class enumClass = getMappedClass();
                    String identifierMethodName = GenericEnumPersistenceType.DEFAULT_CODE_VALUE_METHOD_NAME;
                    Method codeValueMethod = enumClass.getMethod(identifierMethodName, new Class[0]);
                    Class<?> codeValueType = codeValueMethod.getReturnType();
                    String valueOfMethodName = GenericEnumPersistenceType.DEFAULT_FROM_VALUE_METHOD_NAME;
                    Method fromValueMethod = enumClass.getMethod(valueOfMethodName, new Class[] { codeValueType });
                    return fromValueMethod.invoke(enumClass, id); 
                } catch (NoSuchMethodException | SecurityException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) {
                    throw new AssertionError(e);
                }
            }

            @Override
            public Object instantiate() {
                throw new UnsupportedOperationException();
            }

            @Override
            public boolean isInstance(Object object) {
                throw new UnsupportedOperationException();
            }
        };
    }
} 
```

* * *

## 通用枚举持久性类型

```
import java.io.Serializable;
import java.lang.reflect.Method;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;
import java.util.Properties;

import org.apache.commons.lang.ObjectUtils;
import org.hibernate.HibernateException;
import org.hibernate.engine.spi.SessionImplementor;
import org.hibernate.type.IntegerType;
import org.hibernate.usertype.ParameterizedType;
import org.hibernate.usertype.UserType;

public class GenericEnumPersistenceType<E> implements UserType, ParameterizedType {
    public static final String DEFAULT_CODE_VALUE_METHOD_NAME = "getCodeValue";
    public static final String DEFAULT_FROM_VALUE_METHOD_NAME = "fromValue";
    private Method codeValueMethod;
    private Method fromValueMethod;
    private Class<?> codeValueType;
    private Class<E> enumClass; 

    public GenericEnumPersistenceType(){}

    @Override
    @SuppressWarnings("unchecked")
    public void setParameterValues(Properties parameters) {
        String enumClassName = parameters.getProperty("enumClass");
        try {
            enumClass =  (Class<E>) Class.forName(enumClassName).asSubclass(Enum.class);
        } catch (ClassNotFoundException e) {
            throw new HibernateException("Enum class not found", e);
        }
        String identifierMethodName = parameters.getProperty("codeValueMethod", DEFAULT_CODE_VALUE_METHOD_NAME);
        try {
            codeValueMethod = enumClass.getMethod(identifierMethodName, new Class[0]);
            codeValueType = codeValueMethod.getReturnType();
        } catch (Exception e) {
            throw new HibernateException("Failed to obtain codeValue method. Setting default method name", e);
        }
        String valueOfMethodName = parameters.getProperty("fromValueMethod", DEFAULT_FROM_VALUE_METHOD_NAME);
        try {
            fromValueMethod = enumClass.getMethod(valueOfMethodName, new Class[] { codeValueType });
        } catch (Exception e) {
            throw new HibernateException("Failed to obtain fromValue method. Setting default method name", e);
        }
    }

    @Override
    public Object nullSafeGet(ResultSet resultSet, String[] names, SessionImplementor session, Object owner) throws HibernateException, SQLException {
        try {
            String propertyValue = resultSet.getString(names[0]);
            Integer propertyNumericValue;
            try {
                propertyNumericValue = Integer.valueOf(propertyValue);
            } catch (NumberFormatException e) {
                return null;
            }
            return fromValueMethod.invoke(enumClass, propertyNumericValue); 
        } catch (Exception e) {
            e.printStackTrace();
            throw new HibernateException("Exception while invoking valueOf method '" + fromValueMethod.getName() + "' of " + "enumeration class '" + enumClass + "'", e);
        }
    }

    @Override
    public void nullSafeSet(PreparedStatement preparedStatement, Object value, int index, SessionImplementor session) throws HibernateException, SQLException {
        try {
            if (null == value) {
                preparedStatement.setNull(index, Types.INTEGER);
            } else {
                Object identifier = codeValueMethod.invoke(value, new Object[0]);
                preparedStatement.setInt(index, (Integer) identifier);
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw new HibernateException("Exception while invoking identifier method '" + codeValueMethod.getName() + "' of " + "enumeration class '" + enumClass + "'", e);
        }

    }

    @Override
    public Class<E> returnedClass() {
        return enumClass;
    }

    @Override
    public int[] sqlTypes() {
         return new int[] { IntegerType.INSTANCE.sqlType() };
    }

    @Override
    public boolean isMutable() {
        return false;
    }

    @Override
    public boolean equals(Object x, Object y) throws HibernateException {
        return ObjectUtils.equals(x, y);
    }

    @Override
    public int hashCode(Object x) throws HibernateException {
        assert (x != null);
        return x.hashCode();
    }

    @Override
    public Object deepCopy(Object value) throws HibernateException {
        return value;
    }

    @Override
    public Object replace(Object original, Object target, Object owner) throws HibernateException {
        return original;
    }

    @Override
    public Serializable disassemble(Object value) throws HibernateException {
        return (Serializable) value;
    }

    @Override
    public Object assemble(Serializable cached, Object owner) throws HibernateException {
        return cached;
    }

} 
```

* * *

现在好了，这门课一切正常。我需要做一些改进：

因为我的枚举和数据库表中也有我的语言：

----> 语言[] 语言 = Language.values(); （语言是上面枚举的名称）

我想直接从我的枚举中使用对象，而不从数据库中检索实体：换句话说，我想这样做：

设置 speakLanguages = new HashSet(); 口语语言.add（语言.英语）；订阅

r.setSpokenLanguages(speaknLanguages);

而不是这样做：

设置 speakLanguages = new HashSet(); speakLanguages.add(languageService.getLanguageById(Language.ENGLISH.getCodeValue())); 订阅

r.setSpokenLanguages(speaknLanguages);

我想绕过 dao 使用和数据库访问，但每次我这样做时都会出现异常，因为元素已插入 DB 并且 id 显然已经存在。

即使 Id 不是自动生成的，如果它没有从 DB 中检索，Hibernate 仍然会插入元素。所以我想知道是否有办法处理这种情况，或者是否有一个解决方案可以像一个类一样在启动时初始化整个应用程序并从 DB 而不是从 Enum 加载语言列表。

2)

我正在使用 JPA 2.0 映射。使用 hibernate-jpa-2.0 和 hibernate 4.1.0.final

我的两个班级之间有@ManyToOne 关系：EventPicture --> Event

```
 @ManyToOne
@JoinColumn(name = "event")
@ForeignKey(name = "event_foreign_Key")
private Event event; 
```

event 是 eventPicture 中的私有属性，用于映射拥有事件，我收到了我不明白的消息，我做了一些研究，但没有发现任何相关信息；

```
 Foreign key "{0}" not found in the table "{1}" 
```

任何帮助，将不胜感激。谢谢

# c++ - 如何将变量存储在特定偏移量

> ID：10226275
> 
> 赞同：1
> 
> 时间：2012-04-19T10:34:54.270
> 
> 标签：c++, variables, offset, portable-executable

有没有办法在 PE 文件的特定偏移量处存储变量（在 C++ 中）？类似的问题：我可以定义存储在数据部分中的变量的特定顺序吗？

我听说有些程序可以将设置存储在其可执行文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:09:58.120

“最简单”的方法是使用资源部分。您不需要偏移量：`LoadString`取而代之的是一个 ID，它在重建过程中是稳定的。但是，顾名思义，这只是加载部分。Windows 在执行时会锁定您的可执行文件，这使得该`SaveString`部分变得*更加*困难。

并不是说锁并不重要，因为您的程序可能存储在`\Program Files\`其中并且用户无论如何都无法在那里编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T20:27:49.083

根据数据的大小，您可以使用 PE 映像的已弃用（未使用）区域（如 MS-DOS 存根）来存储变量。许多这些未使用区域的偏移量是众所周知的（因为它们是由 PE 格式定义的）。

# javascript - 如何在单击时删除元素

> ID：10226277
> 
> 赞同：0
> 
> 时间：2012-04-19T10:34:57.747
> 
> 标签：javascript, jquery, html

当SelectBox Val == 0时，我需要删除现有的HTML。这是我的HTML，

```
<div class="info-cont">
    <ul class="map-list">
        <li>
            <span class="left">
                <label>Name 1</label>
            </span>
            <span class="right">
                <select class="combo">
                    <option selected="selected" value="0"></option>
                    <option value="1">F name</option>
                    <option value="2">M name</option>
                    <option value="3">L name</option>
                </select>
            </span>
        </li>
    </ul>
</div> 
```

注意：我的页面中大约有 10 个选择框，如上，

上面的jquery是，

```
$(document).ready(function () {
    $('#save').click(function () {
        var comboLength = $('.combo').length;
        var selectedLength = $('.combo option:selected[value!=0]').length;
        if (comboLength == selectedLength) {
            alert('Thanks all the fields are selected');
            return false;
        }
        if ($('.combo option:selected[value==0]')) {
            $("div.info-cont ul.map-list li span.right").append("<br>Please select an appropriate value").addClass('validerror');
        } else {
            $("div.info-cont ul.map-list li span.right").html("");
            $("div.info-cont ul.map-list li span.right").removeClass('validerror');
        }
        return false;
    })
}); 
```

在 else 条件下我需要做什么？（我的 else 部分没有功能）。此外，当我第二次单击提交按钮时，我不应该附加我在第一次单击时已经收到的 html。有什么帮助吗？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:39:10.073

更改`if`为

```
if($('.combo option:selected').val() === '0'){ 
```

* * *

所有问题都可以通过

```
$(document).ready(function(){
    $('#save').click(function(){
        var combo = $('.combo'), // get all combo elements
            selected = $('.combo').filter(function(){
                return $(this).find('option[value!="0"]:selected').length;
            }), // get all valid combo elements
           unselected = combo.not(selected); // get all non-valid combo elements

        // clear previous error messages
        combo
            .closest('.right') // find containing .right element
            .removeClass('validerror') // remove error class
            .find('.errormessage') // find error message
            .remove(); // remove error message

        // chech if all combos are valid
        if (combo.length === selected.length) {
            alert('Thanks all the fields are selected');
            return false;
        }

        // highlight non-valid elements
        unselected
            .closest('.right')
            .addClass('validerror')
            .append('<div class="errormessage">Please select an appropriate value</div>');

        return false;
    });
}); 
```

演示在[http://jsfiddle.net/gaby/Y3RrH/](http://jsfiddle.net/gaby/Y3RrH/)

# jquery - jquery 单击并附加 . 在追加中也单击并追加

> ID：10226280
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:35:03.817
> 
> 标签：jquery

单击时，我会附加一个链接，例如`"<a href='#'>Add Fields</a>"`.

之后，当单击该特定链接时，仅在单击链接后才会附加额外的字段，但是当我添加四个文本字段并且四个字段前面的所有字段都有一个链接时。当单击第二个链接然后在第四个错误之后附加文本字段时，它可以附加在第二个文本字段之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:41:34.573

代替

```
$('a').live('click', function() {
    $(this).parent().append("<a href='#'>Add Fields</a>");
}); 
```

利用

```
$('a').on('click', function() {
    $(this).after("<a href='#'>Add Fields</a>");
}); 
```

`append()`适合在元素末尾插入内容，但`after()`用于在选定元素之后插入 HTML 内容。

# android - 安装 android 时 android sdk 管理器日志中的错误

> ID：10226281
> 
> 赞同：0
> 
> 时间：2012-04-19T10:35:17.707
> 
> 标签：android, android-emulator

安装时我收到一条消息“停止 ADB 服务器失败（代码 -1）。” 每次都在 Android sdk manager 日志中。这是我无法在eclipse中安装adt插件的原因吗？我正在重新做一遍。我已将我的电脑格式化为仅用于 this.plz 帮助。

日志的全部信息在这里：

找到 XOOM，Android API 11，修订版 2 获取 URL：http: [//innovator.samsungmobile.com/android/repository/repository.xml](http://innovator.samsungmobile.com/android/repository/repository.xml) 验证 XML：http: [//innovator.samsungmobile.com/android/repository/repository.xml](http://innovator.samsungmobile.com/android/repository/repository.xml) 解析XML：
找到 GALAXY 选项卡，Android API 8，修订版 1 获取 URL：验证 XML：解析 XML：
找到 EDK 2.0，Android API 10，修订版 2 完成加载包。准备安装档案下载 Android SDK 平台工具，修订版 11`enter code here` 安装 Android SDK 平台工具，修订版 11 停止 ADB 服务器失败（代码 -1）。已安装 Android SDK 平台工具，修订版 11 下载 SDK 平台 Android 2.3.3，API 10，修订版 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:43:22.217

您使用的是哪个操作系统....？？？

系统要求 - 目前支持以下操作系统：

1.  Windows XP 或 Vista
2.  Mac OS X 10.4.8 或更高版本（仅限 x86）
3.  Linux（在 Linux Ubuntu Dapper Drake 上测试）

# linux - 为什么加载后大部分内核映像在 RAM 中只有约 1.5MB？

> ID：10226283
> 
> 赞同：3
> 
> 时间：2012-04-19T10:35:25.483
> 
> 标签：linux, kernel

根据[内核启动过程](http://duartes.org/gustavo/blog/post/kernel-boot-process)中的这张图片： ![引导加载程序完成后的 RAM 内容](../Images/11d6e0e904b91c5fba948147a406970e.png)

大部分内核映像只有 ~1.5MB。我认为内核映像应该是一个巨大的二进制映像文件，以支持硬件（或者这个内核模块？）和各种内核功能，因为源代码非常大。还有，在哪里`initrd`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:39:09.200

首先内核被压缩。然后在大多数桌面环境中，内核是用一组最小的静态链接模块构建的。initrd 映像是从硬盘驱动器的 /boot 文件夹（请参阅您的 grub 配置）加载的，用于检测您的桌面硬件以加载适当的模块，以便能够安装根文件系统。initrd 映像包含这组模块。想象一下引导加载程序无法识别的 RAID、LVM 或外来文件系统。这就是为什么引导分区大部分时间都在 ext2/3/(4?) 中的原因。然后，当加载了正确的模块时，根文件系统会从 initrd 映像与硬盘驱动器 (pivot_root) 上的映像交换。然后其余的硬件模块从“none initrd”文件系统加载，主要是在 udev 的帮助下。

希望这可以帮助！

**PS**如果我错了请纠正我！

# php - 为动态加载的内容添加独特的类似 fb 的按钮

> ID：10226286
> 
> 赞同：1
> 
> 时间：2012-04-19T10:35:57.940
> 
> 标签：php, jquery, facebook, dynamic, facebook-like

我需要从 php cp 菜单向菜单项添加一个类似 facebook 的按钮 -

我正在考虑从每个菜单 div 中提取信息并在将其发送到 facebook 之前填充元数据

```
<div class="menu_content_cell">
<span class="menu_title"><?php echo $menuItem['item_name']?></span>
<?php if($menuItem['item_desc']) {?>                                                    <br />
<span class="menu_description"><?php echo $menuItem['item_desc']?></span><?php } ?>
</div> 
```

填写

```
 <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
    <title>Sample</title>
    <meta property="og:title" content="Site Name <?php echo $menuItem['item_name']?>"/>
    <meta property="og:type" content="food"/>

    <meta property="og:site_name" content="Site Name"/>
    <meta property="og:description"
          content="<?php echo $menuItem['item_desc']?>"/>

    <meta http-equiv="refresh" content="0;url=http://www.sample.com/menu.php"/>
  </head>

<body>
</body>
</html> 
```

这是可能的，还是我叫错了树？

我该怎么做？也许如果我能为每个菜单项获得一个唯一的 id - 我相信这是可能的，但我正在努力将拼图的各个部分拼凑在一起

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:41:36.800

Facebook 通过 url 索引对象，不同的 url 表示其图中的不同对象。

例如，这些页面将被视为不同：

*   [http://www.sample.com/menu.php](http://www.sample.com/menu.php)
*   [http://www.sample.com/menu.php?item=3](http://www.sample.com/menu.php?item=3)
*   [http://www.sample.com/menu.php?category=43](http://www.sample.com/menu.php?category=43)

因此，您应该通过 url 区分您希望用户喜欢的页面，并根据动态部分（使用查询字符串或漂亮的 url）在服务器端输出不同的 og 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T07:42:32.163

使用 fb 打开图形元标记 og:type 并将其设置为动态页面 html 标题的“文章”

```
<meta property="og:type" content="article"/> 
```

其他 fb opengraph 元标记

```
<meta property="og:title" content="your dynamic title">
<meta property="og:image" content="your dynamic image url">
<meta property="og:url" content="your dynamic page url">
<meta property="og:description" content="your dynamic content"> 
```

# eclipse - 詹金斯、Git 和 Eclipse

> ID：10226287
> 
> 赞同：0
> 
> 时间：2012-04-19T10:35:58.867
> 
> 标签：eclipse, git, jenkins

我是詹金斯的新手，目前正在试验。我使用 Eclipse 并使用 Git 插件从 Eclipse 中运行 Git，该插件描述如下：“Eclipse Git 是基于 JGit 的 Eclipse Team 提供程序，它是 Git 版本控制系统的纯 Java 实现”。

我已经为 Jenkins 安装了 Git 插件，但是当我去配置它时，Jenkins 抱怨它找不到 Git 可执行文件。这是有道理的，显而易见的解决方案是安装它（在我的情况下，使用 Ubuntu 存储库 - *sudo apt-get install git-core*）。我担心的是在机器上安装两个 Git 会引起问题 - 还是我过于谨慎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:59:26.927

两者都可以——因为 EGit 是纯 Java，它与安装的（本机代码）版本的 Git 无关。

如果未来版本的 Git 发生重大更改，可能会出现问题，但通过更新两个安装应该很容易修复。

# linux - Linux 套接字调用 read 后会发生什么

> ID：10226294
> 
> 赞同：2
> 
> 时间：2012-04-19T10:36:21.980
> 
> 标签：linux, sockets, networking

调用 read 后实际发生的情况：

```
n = read(fd, buf, try_read_size); 
```

这里 fd 是一个 TCP 套接字描述符。buf 是缓冲区。try_read_size 是程序尝试读取的字节数。

我想这最终可能会调用内核的系统调用。但是谁能提供一些细节？说glibc或内核源代码中的源代码实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T10:58:41.243

从高层次的角度来看，会发生以下情况：

*   调用 glibc 提供的包装函数
*   包装函数将堆栈上传递的参数放入寄存器中，并在专用于该目的的寄存器中设置系统调用号（例如 x86 上的 EAX）
*   包装函数执行陷阱或等效指令（例如 SYSENTER）
*   CPU 切换到 ring0，并调用陷阱处理程序
*   陷阱处理程序检查系统调用号的有效性并在跳转表中查找内核函数
*   相应的内核函数检查参数是否有效（例如，引用可访问内存页的范围`buf`实际上`buf+try_read_size`是`fd`一个文件描述符）。如果出现问题，则会生成一个负错误代码（例如 -EFAULT），cpu 会切换回用户模式，并且调用会返回到包装器。
*   根据文件描述符的类型调用另一个函数（在您的情况下是套接字，但可以从块设备或`proc`条目或更奇特的东西中读取）
*   检查套接字的输入缓冲区：
    *   如果缓冲区中有一些数据，`min(available, try_read_size)`则复制到`buf`，将数量写入返回代码寄存器（x86 上的 EAX），cpu 切换回用户模式，调用返回到包装器。
    *   如果输入缓冲区为空
        *   如果连接已关闭，则将零写入返回码寄存器，cpu 切换回用户模式，调用返回到包装器
        *   如果连接*尚未*关闭
            *   如果套接字是非阻塞的，则将一个负错误代码 ( `-EAGAIN`) 写入返回代码寄存器，cpu 切换回用户模式并且调用返回到包装器。
            *   如果套接字*不是*非阻塞的，则进程被挂起
*   包装函数检查返回值是否为负（错误）。
    *   如果为正数或零，则返回该值。
    *   如果为负，则将 errno 设置为负值（报告*正*错误）并返回 -1

# hbase - 合适的 HBase 表模型

> ID：10226296
> 
> 赞同：4
> 
> 时间：2012-04-19T10:36:27.347
> 
> 标签：hbase

我在为以下要求建模 HBase 表时发现困难。

我有一个表“商店”，它存储商店详细信息（必胜客）。

我有一个表“订单”，其中包含交易摘要（总交易金额等......）。

我有另一个表“Order_Item”，其中存储了交易中的每个订购项目（这有项目 ID、项目名称、项目计数、税等。）

1.  要求是，给定时间范围，计算来自特定商店的特定订单项目的总收入。

示例：日期范围 - 上周，商店 - 披萨 A，项目 - A，总收入 - 120 美元

1.  另一个要求是，给定时间范围，计算来自商店的特定订单商品占总收入的百分比。

示例：日期范围 - 上周，商店 - 披萨 A，项目 - A，百分比收入 - 23%

我真的很纠结如何为 hbase 表建模，最后期限让我很紧张。

请有人可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:52:28.383

在 HBase 中，您希望确保围绕典型查询设计表。如果您根据一些任意的“有意义”来设计表格，您将看到性能不佳。

由于主要要求是按日期范围/商店/项目查询，因此您希望这是您的关键。如果这是您的关键，那么您的查询将会很快。

我建议您将您的密钥设置为日期范围 + 商店 + 项目以及一些分隔符的串联，例如：

```
20110103-PIZZAHUT-MEATLOVERS
20110103-PIZZAHUT-VEGETABLE
20110104-PIZZAHUT-MEATLOVERS
20110105-DOMINOS-HAWAIIAN 
```

然后，将每个出售的商品存储到第一个列族中作为 (ID:profit)。这里的 ID 类似于唯一的时间戳、UUID、收据 ID 或其他东西。

对于第一个查询，您所做的只是在 DATE-STORE-ITEM 上进行键查找，然后对您检索到的所有值求和。

对于第二个查询，从`20110107-PIZZAHUT-!`to进行范围扫描`20110206-PIZZAHUT-~`。总结您正在寻找的项目以及您不是的所有项目。最后，计算百分比。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T13:52:53.477

orangeoctopus 建议的方法是每天、每家商店、每件商品存储一行，每笔交易都有一列。这是一个很好的；另一种方法是将每个事务存储在自己的行中，使用相同的键字段加上唯一 ID 作为键的一部分。然后在单个列族中有一个列，用于金额。

```
20110103-PIZZAHUT-MEATLOVERS-857283394
20110103-PIZZAHUT-MEATLOVERS-857283395
20110103-PIZZAHUT-MEATLOVERS-857283396
20110103-PIZZAHUT-VEGETABLE-859238494
20110103-PIZZAHUT-VEGETABLE-859238494 
```

等等

同样的逻辑也适用于这个设计；您的查询既扫描特定日期范围并以这种方式获取他们需要的数据（并且，如果您想限制为单个商店或商店产品组合，您可以这样做）。唯一的区别是现在您正在扫描一堆行，而不是每个日期/商店/项目组合在一行中的许多列。

这是 HBase 中的两个关键设计技术：实体作为行，或实体作为嵌套在父实体行中的列。后者的优点是行中的所有列都可以事务更新；缺点是检索它的代码稍微复杂一些（并且，如果您具有高并发性，您会为这种事务性付出一点代价）。

仅供参考，您*无法*使用此行键有效地执行的查询不会按顺序以您的行键的部分开头。因此，例如，如果您一直想要销售必胜客，则必须在服务器端扫描表中的每一行（这可能是不可取的 b/c 可能您在此表中有很多数据，否则你不会使用 HBase ... :)

# ruby-on-rails - Rails - 链接到控制器视图内的静态文件

> ID：10226299
> 
> 赞同：0
> 
> 时间：2012-04-19T10:36:35.287
> 
> 标签：ruby-on-rails, erb, ruby-on-rails-3.2

我有一些静态 JS 文件，我想包含在 rails 控制器视图中，不幸的是，只需将它们放在适当的视图文件夹中，我就会得到 404 响应。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:48:57.807

如果你想在你的视图文件中使用 javascript

```
<script type="text/javascript"> 
  //code goes here
</script> 
```

或者

如果要加载 JS 文件，则需要将它们放在 app/assets/javascripts 目录中。

如果你有一个文件 your-js-file.js 然后把它放在 app/assets/javascripts 目录下

并在您的 application.js 中添加以下行

```
//= require your-js-file 
```

Rails 会自动加载

# javascript - 在 Windows 7 x64 下构建 contextify（用于 NodeJS jQuery）

> ID：10226301
> 
> 赞同：15
> 
> 时间：2012-04-19T10:36:42.913
> 
> 标签：javascript, node.js, jsdom

我尝试让**node-jquery**工作。**contextify**是依赖项之一（**jsdom**需要）。

**contextify**需要以某种方式使用 Python 构建。但这似乎不适用于 Windows 7 x64。至少一台我的电脑:)

经过一些阅读（[#10](https://github.com/brianmcd/contextify/issues/10)，[#12](https://github.com/brianmcd/contextify/issues/12)，[#17](https://github.com/brianmcd/contextify/pull/17)）并尝试了这个[fork](https://github.com/Benvie/contextify)和这个提供[的](https://github.com/springmeyer/contextify)一些二进制文件，我可以让它工作......

我从 ( )`node-gyp configure`或从`node-gyp rebuild`( `npm install jquery`) 得到相同的错误：

```
info it worked if it ends with ok
info downloading: http://nodejs.org/dist/v0.6.14/node-v0.6.14.tar.gz
info downloading: http://nodejs.org/dist/v0.6.14/x64/node.lib
info downloading: http://nodejs.org/dist/v0.6.14/node.lib
spawn python [ 'D:\\Users\\ngryman\\.node-gyp\\0.6.14\\tools\\gyp_addon',
  'binding.gyp',
  '-ID:\\Users\\ngryman\\build\\config.gypi',
  '-f',
  'msvs',
  '-G',
  'msvs_version=2010' ]
  File "D:\Users\ngryman\.node-gyp\0.6.14\tools\gyp_addon", line 40
    print 'Error running GYP'
                        ^
SyntaxError: invalid syntax
ERR! Error: `gyp_addon` failed with exit code: 1
  at ChildProcess.onCpExit (D:\Users\ngryman\AppData\Roaming\npm\node_modules
node-gyp\lib\configure.js:226:16)
  at ChildProcess.emit (events.js:70:17)
  at maybeExit (child_process.js:360:16)
  at Process.onexit (child_process.js:396:5)
ERR! not ok 
```

似乎有一个语法错误......我对 Python 不是很满意。

这是我的版本：

*   蟒蛇：3.2.3
*   节点JS：0.6.14

有人有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T19:58:03.760

我设法建造了它，但我可以说它真的很痛苦。事实上，它是如此痛苦以至于它导致了暂时的健忘症，我忘记了我是怎么做到的。

除了 python，你还需要 Visual Studio。

无论如何，我有二进制文件，我只是将它们上传到 gihub：
[https ://github.com/mihaifm/jsdom_binaries](https://github.com/mihaifm/jsdom_binaries)

只需克隆该存储库，将里面的内容复制`node_modules`到您的项目中，您就可以开始了！

**更新（2013 年 3 月）**

不再需要这些二进制文件（至少对于安装了 VS2010 的 Win7 不需要）。`jsdom`现在`contextify`可以安装`npm`：

```
npm install jsdom
npm install contextify 
```

（您仍然需要 python 和 MS C++ 编译器，如[node-gyp](https://github.com/TooTallNate/node-gyp)的要求中所述）

我也更新了 repo，以防万一有人仍然无法安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:13:23.177

我能够使用节点 0.8.11(x64) 和 Python 2.7.3 在 Windows 7(x64) 上成功构建 node-jquery。这是我的 jquery 结构的样子：

```
┬ jquery@1.7.3
├── htmlparser@1.7.6
├─┬ jsdom@0.2.19
│ ├─┬ contextify@0.1.3
│ │ └── bindings@1.0.0
│ ├── cssom@0.2.5
│ ├── cssstyle@0.2.3
│ └─┬ request@2.11.4
│   ├─┬ form-data@0.0.4
│   │ ├── async@0.1.22
│   │ └─┬ combined-stream@0.0.3
│   │   └── delayed-stream@0.0.5
│   └── mime@1.2.7
├── location@0.0.1
├── navigator@1.0.1
└── xmlhttprequest@1.4.2 
```

根据 node-gyp 的作者 [https://github.com/TooTallNate/node-gyp/issues/155](https://github.com/TooTallNate/node-gyp/issues/155)

> 是的，Python 3 和 Python 2 不兼容，但是 gyp 需要 Python 2。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T06:51:49.767

如果您不需要 Contextify 的完整功能集，那么 Cheerio**在**Windows上安装*起来更快*、更容易，并提供您将在服务器端使用的大部分 jQuery 功能。

[http://matthewmueller.github.com/cheerio/](http://matthewmueller.github.com/cheerio/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T22:25:23.887

我用

*   Windows 8 x64 DP
*   Python 2.7（在 PATH 上）
*   节点 0.8.11 x86（在 PATH 上）
*   Visual Studio 2010（需要安装“Visual C++”功能）

contextify 0.1.3 二进制文件（可能仅适用于 32 位 Node 版本）可以在[我的 GitHub 存储库](https://github.com/AndiDog/contextify-binaries)中找到。它们与 jsdom 0.2.18（截至 2012-10-13 的当前版本）一起工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-16T14:58:20.520

来自 jsdom readme.md：

### 视窗

*   [Node.js for Windows]的*x86*版本的最新副本，*而不是*x64 版本。
*   [Visual C++ 2010 Express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)的副本。
*   [Python 2.7] 的副本，安装在`C:\Python27`.

我确实做到了这一点，并且效果很好，除了对我来说 x64 版本也可以。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-14T14:28:29.630

最简单的方法是安装`windows-build-tools`软件包。这拥有构建 contextify 所需的一切。从以管理员权限运行的 power shell 提示符运行该命令。

```
npm install --global --production windows-build-tools 
```

[https://www.npmjs.com/package/windows-build-tools](https://www.npmjs.com/package/windows-build-tools)

> 这些工具是编译流行的本机模块所必需的。它还将安装**Python 2.7**，适当地配置您的机器和 npm。
> 
> **内容**
> 
> *   Visual C++ 编译器（针对 x86、X64 和 ARM）
> *   Visual C++ 编译器（针对 x86、X64 和 ARM）
> *   Visual C++ 头文件和库（CRT 和 STL）
> *   Visual C++ 构建脚本（针对 Windows 桌面）
> *   微软构建工具 2015 (MSBuild)
> *   Windows SDK 8.1（可选，默认开启）
> *   Windows SDK 10（可选，默认关闭）
> *   ATL 和 MFC（可选，默认关闭）
> *   C++ 构建工具特定的命令提示符

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T20:17:11.390

我必须确保我使用的是 Python 2.7.3 并以管理员身份运行 cmd 行（右键单击以管理员身份运行）。

`> python --version`

我用

*   视窗 7 x64
*   Python 2.7.3
*   节点 0.8.17
*   视觉工作室 10

# google-chrome - Chrome 中更多输入标签的加载速度很慢

> ID：10226309
> 
> 赞同：0
> 
> 时间：2012-04-19T10:37:12.160
> 
> 标签：google-chrome, input, tags, loading

在我的网页中，我有大约 10000 个输入（隐藏和文本）字段，所以当我尝试在文本框中输入值时，在 chrome 浏览器中接受字符需要更多时间。如何解决这个加载问题。提前致谢。

# r - R和RGtk2中的unicode问题

> ID：10226312
> 
> 赞同：0
> 
> 时间：2012-04-19T10:37:15.723
> 
> 标签：r, unicode, gtk, locale

我正在使用 R 和 RGtk2 包为英文和非 ACSII 字符串（大部分是中文）的数据输入创建 GUI，数据将存储为数据框。我建立了一个原型并尝试了，但发现了一些有趣的东西：

*   当我使用 head(df) 查看数据帧时，它在 R 控制台 (Rgui) 和 RStudio 的控制台中被打乱
*   当使用 View(df) 查看数据框时，对于 RStudio 来说是正常的，但在 R 控制台中再次打乱
*   我使用 write.table(df,"foo.txt") 导出数据帧，它在记事本++中正常显示
*   我可以在gtkTextEntry对象中正常输入中文，但是保存并加载到同一个gtkTextEntry对象后，文本被打乱

我想知道是什么导致了问题：R 语言环境设置；我win7的区域设置；GTK+ 运行时，或 RGtk2 本身，我听说过 GTK+ 中的 g_convert 之类的东西，我想知道它是否有帮助，如果可以，如何在 R 中使用它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:45:43.320

我修好了它：

```
Encoding(df[,"col"]) <- "UTF-8" 
```

这将转换`df[,"col"]`列。

# c# - 捕获“用户取消操作”异常的最佳方法是什么

> ID：10226314
> 
> 赞同：14
> 
> 时间：2012-04-19T10:37:19.233
> 
> 标签：c#, ado.net

我有以下代码和平：

```
IAsyncResult beginExecuteReader = command.BeginExecuteNonQuery();

while (!beginExecuteReader.IsCompleted)
{
    if (controllerTask.CancellationTokenSource.IsCancellationRequested)
    {
        command.Cancel();
    }

    Thread.Sleep(100);
}

try
{
    result = command.EndExecuteNonQuery(beginExecuteReader);
}
catch (SqlException exception)
{
    if (exception.ErrorCode == OperationCanceled)
    {
        throw new OperationCanceledException();
    }

    throw;
} 
```

我如何识别捕获的异常是由操作取消引起的。在这种情况下，ExecuteNonQuery 会抛出错误代码为 0x80131904 的异常，但这是非常普遍的异常，可能由多种原因引起。错误消息如下所示：{“当前命令发生严重错误。结果（如果有）应被丢弃。\r\n操作已被用户取消。”}

除了解析错误消息外，我没有看到任何选项......有什么想法吗？

谢谢

PS。是的，我知道取消异步操作的命令可能不是最好的主意，因为对于 .NET 2.0，MSDN 上有警告，但对于 .NET 4.0，此警告已被删除。当从另一个线程调用取消方法时，我也不喜欢其他实现，因为对我来说它使代码更加困难

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-08-09T22:44:48.823

似乎没有一种语言环境不敏感的机制来捕获这个错误。HResult [0x80131904 只是`COR_E_SqlException`](https://www.magnumdb.com/search?q=0x80131904). 该错误在[TdsParser.cs:2332](https://referencesource.microsoft.com/#System.Data/System/Data/SqlClient/TdsParser.cs,2332)处启动，没有任何唯一属性。[它与:2759 - Unknown Error](https://referencesource.microsoft.com/#System.Data/System/Data/SqlClient/TdsParser.cs,2759)和[:3850 - Unexpected Collat](https://referencesource.microsoft.com/#System.Data/System/Data/SqlClient/TdsParser.cs,3850) ​​ion的代码几乎完全相同。

以下是我提出的不好的解决方案：

**选项 1：**打破“不要使逻辑语言环境敏感”的好建议

```
using (var con = new SqlConnection("Server=(local);Integrated Security=True;"))
{
    con.Open();

    try
    {
        var sqc = new SqlCommand("WAITFOR DELAY '1:00:00'", con);
        var readThread = Task.Run(() => sqc.ExecuteNonQuery());

        // cancel after 5 seconds
        Thread.Sleep(5000);
        sqc.Cancel();

        // this should throw
        await readThread;

        // unreachable
        Console.WriteLine("Succeeded");
    }
    catch (SqlException ex) when (ex.Number == 0 && ex.State == 0 && ex.Class == 11 
        && ex.Message.Contains("Operation cancelled by user."))
    {
        Console.WriteLine("Cancelled");
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error");
    }
} 
```

**选项 2：**假设在发出取消后没有其他严重的本地生成错误重要

```
using (var con = new SqlConnection("Server=(local);Integrated Security=True;"))
{
    con.Open();

    bool isCancelled = false;
    try
    {
        var sqc = new SqlCommand("WAITFOR DELAY '1:00:00'", con);
        var readThread = Task.Run(() => sqc.ExecuteNonQuery());

        // cancel after 5 seconds
        Thread.Sleep(5000);
        isCancelled = true;
        sqc.Cancel();

        // this should throw
        await readThread;

        // unreachable
        Console.WriteLine("Succeeded");
    }
    catch (SqlException ex) when (isCancelled && ex.Number == 0 && ex.State == 0 && ex.Class == 11)
    {
        Console.WriteLine("Cancelled");
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error");
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-19T11:22:15.017

所以恕我直言，您接下来应该做的是：

1.  创建一个您将使用 ado 的线程（阅读此[线程示例](http://msdn.microsoft.com/en-us/library/system.threading.thread%28v=vs.71%29.aspx)）
2.  删除 Thread.Sleep(100); //恕我直言，从不使用它
3.  添加到你的类 static bool muststop=false;
4.  添加到您的类公共静态函数以更改“必须停止”
5.  如果 muststop==true 则更改线程的功能以停止它

我希望这对你有帮助

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-07-10T07:34:07.130

您可以检查 catch 块中的异常消息以查找用户取消了哪个操作：

```
try
{
   //your code
}
catch (SqlException ex)
{
  if (ex.Message.Contain("Operation cancelled by user"))
   {
       //Do something here
   }
} 
```

# arrays - Haskell 中的非整体数组

> ID：10226315
> 
> 赞同：2
> 
> 时间：2012-04-19T10:37:38.403
> 
> 标签：arrays, haskell

我已经接受了以下问题的答案，但似乎我误解了 haskell 中的数组是如何工作的。我以为他们只是加强了名单。阅读下面的问题时请记住这一点。

* * *

我发现在将它们用于更大的数组时，haskell 中的单片数组效率很低。

我无法在 haskell 中找到数组的非整体实现。我需要的是 O(1) 时间查找多维数组。

是否有支持这一点的数组实现？

编辑：我似乎误解了单体这个词。问题在于，haskell 中的数组似乎将数组视为列表。不过我可能是错的。

EDIT2：低效代码的简短示例：

```
fibArray n = a where
  bnds = (0,n)
  a = array bnds [ (i, f i) | i <- range bnds ]
  f 0 = 0
  f 1 = 1
  f i = a!(i-1) + a!(i-2) 
```

这是一个长度数组，`n+1`其中第 i 个字段包含第 i 个斐波那契数。但是由于 haskell 中的数组具有 O(n) 时间查找，因此需要 O(n²) 时间来计算。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T11:55:11.670

您将 Haskell 中的链表与数组混淆了。

链表是使用以下语法的数据类型：

```
[1,2,3,5] 
```

定义为：

```
data [a] = [] | a : [a] 
```

这些是经典的递归数据类型，支持 O(n) 索引和 O(1) 前置。

如果您正在寻找具有 O(1) 查找的多维数据，则应使用真正的数组或矩阵数据结构。好的候选人是：

*   [Repa](http://hackage.haskell.org/package/repa) - 快速、并行、多维数组——（[教程](http://www.haskell.org/haskellwiki/Numeric_Haskell:_A_Repa_Tutorial)）
*   [Vector](http://hackage.haskell.org/package/vector) - Int 索引数组（可变和不可变）的有效实现，具有强大的循环优化框架。（[教程](http://www.haskell.org/haskellwiki/Numeric_Haskell:_A_Vector_Tutorial)）
*   [HMatrix](http://hackage.haskell.org/package/hmatrix) - 基本线性代数和其他数值计算的纯功能接口，内部使用 GSL、BLAS 和 LAPACK 实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T14:09:56.290

数组有 O(1) 索引。问题是每个元素都是惰性计算的。所以当你在 ghci 中运行它时会发生这种情况：

```
*Main> :set +s
*Main> let t = 100000
(0.00 secs, 556576 bytes)
*Main> let a = fibArray t
Loading package array-0.4.0.0 ... linking ... done.
(0.01 secs, 1033640 bytes)
*Main> a!t  -- result omitted
(1.51 secs, 570473504 bytes)
*Main> a!t  -- result omitted
(0.17 secs, 17954296 bytes)
*Main> 
```

请注意，在已经查找过一次**之后，查找速度非常快。**该`array`函数创建一个指向 thunk 的指针数组，这些指针最终将被计算以产生一个值。第一次评估价值时，您需要支付此成本。以下是用于评估的 thunk 的前几个扩展`a!t`：

```
a!t -> a!(t-1)+a!(t-2)-> a!(t-2)+a!(t-3)+a!(t-2) -> a!(t-3)+a!(t-4)+a!(t-3)+a!(t-2) 
```

昂贵的不是计算*本身*的成本，而是需要创建和遍历这个非常大的 thunk。

我尝试对传递给的列表中的值进行严格限制`array`，但这似乎导致了无限循环。

解决此问题的一种常见方法是使用可变数组，例如 STArray。元素可以在数组创建期间可用时更新，最终结果被冻结并返回。在 vector 包中，`create`和`constructN`函数提供了简单的方法来做到这一点。

```
-- constructN :: Unbox a => Int -> (Vector a -> a) -> Vector a

import qualified Data.Vector.Unboxed as V
import Data.Int

fibVec :: Int -> V.Vector Int64
fibVec n = V.constructN (n+1) c
 where
  c v | V.length v == 0 = 0 
  c v | V.length v == 1 = 1 
  c v | V.length v == 2 = 1
  c v = let len = V.length v
        in v V.! (len-1) + v V.! (len-2) 
```

**但是**，该`fibVec`函数仅适用于未装箱的向量。正则向量（和数组）不够严格，导致回到您已经发现的相同问题。不幸的是，没有 Unboxed 实例`Integer`，因此如果您需要无界整数类型（这`fibVec`在此测试中已经溢出），您将不得不在其中创建一个可变数组`IO`或`ST`启用必要的严格性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T01:09:14.707

具体参考您的`fibArray`示例，试试这个，看看它是否加快了速度：

```
-- gradually calculate m-th item in steps of k
--     to prevent STACK OVERFLOW , etc
gradualth m k arr                         
    | m <= v = pre `seq` arr!m   
  where                                   
    pre = foldl1 (\a b-> a `seq` arr!b) [u,u+k..m]
    (u,v) = bounds arr 
```

对我来说，for`let a=fibArray 50000`的`gradualth 50000 10 a`运行时间为 0.65 运行时间，只需`a!50000`立即调用。

# iphone - 如何使用 IOS 按内部数组排序

> ID：10226320
> 
> 赞同：1
> 
> 时间：2012-04-19T10:38:07.580
> 
> 标签：iphone, ios, cocoa

我有一个 NSArray，在数组中每个项目都有一个名为“venue”的内部数组，然后在另一个名为“location”的数组中。我想按每个“位置”数组中的“距离”值对数组进行排序。

有人能指出我正确的方向吗，这是数组。

```
{
    venue =         {
        beenHere =             {
            count = 0;
            marked = 0;
        };
        location =             {
            address = "845 Market St.";
            city = "San Francisco";
            country = "United States";
            crossStreet = "Westfield Food Emporium";
            distance = 137;
            lat = "37.78459765160777";
            lng = "-122.40650538423186";
            postalCode = 94103;
            state = CA;
        };
    };
},{
    venue =         {
        beenHere =             {
            count = 0;
            marked = 0;
        };
        location =             {
            address = "845 Market St.";
            city = "San Francisco";
            country = "United States";
            crossStreet = "Westfield Food Emporium";
            distance = 137;
            lat = "37.78459765160777";
            lng = "-122.40650538423186";
            postalCode = 94103;
            state = CA;
        };
    };
}, 
```

目前我正在使用以下内容，但似乎没有任何效果。

```
NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey:@"distance" ascending: YES];

                self.venueObject = [venueObject sortedArrayUsingDescriptors: [NSArray arrayWithObject: sortOrder]]; 
```

谢谢

奥利弗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:14:54.613

如果我正确理解您的问题，那么您有一系列字典，并且想要在这些字典子键中排序购买一些值。

您需要使用`sortedArrayUsingComparator`: 方法。

像这样的东西应该适合你：

```
NSArray * sortedVenues = [venues sortedArrayUsingComparator:^NSComparisonResult(NSDictionary * venue1, NSDictionary * venue2) {
    float distance1 = [[venue1 valueForKeyPath: @"location.distance"] floatValue];
    float distance2 = [[venue2 valueForKeyPath: @"location.distance"] floatValue];

    if (distance1 > distance2) {
        return NSOrderedDescending;
    } else if (distance1 < distance2) {
        return NSOrderedAscending;
    } else {
        return NSOrderedSame;
    }
}]; 
```

# python - 如何在命令行中的任务计划程序中设置 python 脚本的位置（开始）？

> ID：10226328
> 
> 赞同：0
> 
> 时间：2012-04-19T10:38:35.020
> 
> 标签：python, scheduled-tasks, windows-task-scheduler

它在任务调度程序 GUI 中似乎是“\”。我使用了该命令，并且我希望脚本在不使用绝对路径的情况下打开同一路径中的文件。

我使用以下命令安排了任务：

```
schtasks /Create /SC HOURLY /TN PythonTask /TR "PATH_TO_PYTHON_EXE PATH_TO_PYTHON_SCRIPT" 
```

并且该脚本不会在 Glen 在[Schedule Python Script - Windows 7中为其编写答案的同一文件夹中打开数据库](https://stackoverflow.com/questions/2725754/schedule-python-script-windows-7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:50:00.560

我认为最好将调用 Python 脚本包装到批处理`.bat`文件中。在该文件中，您可以更改目录、设置`PYTHONPATH`等

然后通过以下方式执行此类批处理：

```
schtasks /Create /SC HOURLY /TN PythonTask /TR "my_scheduled_task.bat" 
```

你可以在`my_scheduled_task.bat`任何你想要的目录中调用你的 Python 脚本。

这样的批次可以是：

```
c:
cd \my\dest\dir
c:\python32\python.exe c:\my\superscripts\dbsynchronizator.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:26:44.393

`os.chdir(path)`: "将当前工作目录更改为指定路径。"

# android - Android Html.fromHtml() 如果以 标签

> ID：10226330
> 
> 赞同：2
> 
> 时间：2012-04-19T10:38:48.047
> 
> 标签：android, android-xml, android-pullparser

我调用一个 Web 服务，它返回一些包含在 XML 信封中的 HTML ......类似于：

```
<xml version="1.0" cache="false">
    <text color="white">
        <p> Some text <br /> <p>
    </text>
</xml> 
```

我使用 XmlPullParser 来解析这个 XML/HTML。获取文本**元素，我执行以下操作：**

 **```
case XmlPullParser.START_TAG:

    xmlNodeName = parser.getName();

    if (xmlNodeName.equalsIgnoreCase("text")) {
        String color = parser.getAttributeValue(null, "color");
        String text = parser.nextText();

        if (color.equalsIgnoreCase("white")) {

            detail.setDetail(Html.fromHtml(text).toString());

        }
    }
break; 
```

这很好用，可以获取文本或 html**元素，即使它包含一些 html 标签。**

 **问题出现时**元素的数据以*<p>*标记开头，如上例所示。在这种情况下，数据丢失并且*文本*为空。**

 **我该如何解决这个问题？

**编辑**

感谢[Nik](https://stackoverflow.com/users/750613/nik) & [rajesh](https://stackoverflow.com/users/1321873/rajesh)指出我的服务响应实际上不是有效的 XML & 未正确关闭的元素。但我无法控制服务，所以我无法编辑返回的内容。我想知道是否有类似[HTML Agility](http://htmlagilitypack.codeplex.com/)的东西可以解析任何类型的格式错误的 HTML，或者至少可以获取 html 标签中的内容.. 就像我的情况中的*<text> ... </text>*内部一样？那也不错。

或者任何我可以用来解析我从服务中得到的东西的东西都会很好，只要它可以很好地实现。

对不起我的英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:54:11.487

您看到这种行为是因为`<text>...</text>`标签内的不是文本元素，而是 XML 节点元素。您应该将内容包含在 CDATA 部分中。

**编辑：**在评论中为我的建议提供代码段。它确实适用于您提供的示例 XML。

```
 StringBuffer html = new StringBuffer();
         int eventType = parser.getEventType();
         while (eventType != XmlPullParser.END_DOCUMENT) {
          if(eventType == XmlPullParser.START_TAG) {
              String name = parser.getName();
              if(name.equalsIgnoreCase("text")){
                  isText = true;
              }else if(isText){
                  html.append("<");
                  html.append(name);
                  html.append(">");
              }
          } else if(eventType == XmlPullParser.END_TAG) {
              String name = parser.getName();
              if(name.equalsIgnoreCase("text")){
                  isText = false;
              }else if(isText){
                  html.append("</");
                  html.append(name);
                  html.append(">");                   
              }
          } else if(eventType == XmlPullParser.TEXT) {
              if(isText){
                  html.append(parser.getText());
              }
          }
          eventType = parser.next();
         } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:52:20.613

因为上面的代码你没有关闭`"</p>"`TAG。

```
<p> Some text <br /> </p> 
```

用过这条线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T10:38:52.383

# 解决方案

受[Martin](https://stackoverflow.com/a/10105174/847872)将接收到的数据首先转换为字符串的方法的启发，我以一种混合方法处理了我的问题。

将接收到的 InputStream 的值转换为字符串，并将错误的标签替换为“”（或任何你想要的）：如下

```
InputStreamReader isr = new InputStreamReader(serviceReturnedStream);
BufferedReader br = new BufferedReader(isr);
StringBuilder xmlAsString = new StringBuilder(512);
String line;
try {
    while ((line = br.readLine()) != null) {
        xmlAsString.append(line.replace("<p>", "").replace("</p>", ""));
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

现在我有一个包含正确 XML 数据的字符串（就我而言），所以只需使用普通的 XmlPullParser 来解析它，而不是自己手动解析它：

```
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
factory.setNamespaceAware(false);
XmlPullParser parser = factory.newPullParser();
parser.setInput(new StringReader(xmlAsString.toString())); 
```

希望这对某人有帮助！******

# android - 在一个项目中使用 Robotium 进行多个测试/测试用例

> ID：10226331
> 
> 赞同：1
> 
> 时间：2012-04-19T10:38:56.770
> 
> 标签：android, robotium, ui-testing

我正在为我的 Android 应用程序编写许多测试，这意味着大约有 15 个测试用例。我怎样才能实现它们？我试图在同一个项目中为每个测试用例创建几个 .java 文件，但它只运行第一个。然后我做了一个测试，java并在里面写了几个方法。喜欢`public void test1() throws Exception{...} public void test2() throws Exception{...}`。但它也只运行了第一个测试用例。在运行配置中，我选择了在所选项目中运行所有测试，运行时我可以在屏幕左侧的 JUnit 窗口下看到它们，它成功运行了第一个，显示下一个正在进行中但它什么也没做（（ ((

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:40:00.303

请记住在您的 tearDown() 中使用 solo.finishOpenedActivities()。然后执行将不会挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:24:43.593

如果您使用 robotsium 执行黑盒测试，您的类应该是这样的：

```
public class TestAPK extends ActivityInstrumentationTestCase2 {

private static final String TARGET_PACKAGE_ID="com.android.example";//your package name
private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME="com.android.example.MainActivity"; //your main activity full class name

private static Class launcherActivityClass;
static{
    try{
        launcherActivityClass=Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
    }catch(ClassNotFoundException e){
        throw new RuntimeException(e);
    }
}

public TestAPK() throws ClassNotFoundException{
    super(TARGET_PACKAGE_ID,launcherActivityClass);
}
private Solo solo;

protected void setUp() throws Exception{
    solo=new Solo(getInstrumentation(),getActivity());
}
public void test1() throws Exception{...} 
public void test2() throws Exception{...}
} 
```

# jquery - 使用 jQuery 进行 Ajax 身份验证

> ID：10226333
> 
> 赞同：6
> 
> 时间：2012-04-19T10:39:02.593
> 
> 标签：jquery, ajax

我能够收到请求的xml

```
curl -X GET -u username:password url 
```

但不与

```
$.get('url',
        {username:"username",password:"password"},
        function (data) {

        }); 
```

没有 javascript 错误，没有跨域策略问题。这可能是一个语法错误，但我还没有找到一个像样的教程。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-19T10:44:54.567

我认为你需要简单的格式：

```
$.ajax({
    type: 'GET',
    url: 'url',
    dataType: 'json',
    //whatever you need
    beforeSend: function (xhr) {
        xhr.setRequestHeader('Authorization', make_base_auth(user, password));
    },
    success: function () {});
});

function make_base_auth(user, password) {
    var tok = user + ':' + password;
    var hash = btoa(tok);
    return 'Basic ' + hash;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-30T02:27:36.640

作为替代方案，`beforeSend`您可以使用该`headers`属性来添加`authorization`标题。

```
$.ajax({
    type: 'GET',
    url: 'url',
    dataType: 'json',
    headers: {
        "Authorization": make_base_auth(user, password)
    }
    success: function () {});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:46:00.350

正如其他答案中所指出的，您应该使用 Jquery Ajax 的 beforeSend 函数来添加授权标头

```
function setAuthHeader(xhr){
            var creds = username + ':' + password;
            var basicScheme = btoa(creds);
            var hashStr = "Basic "+basicScheme;
            xhr.setRequestHeader('Authorization', hashStr);
    }

  $.get('url',
         beforeSend: setAuthHeader,
        function (data) {

     }); 
```

# iphone - SQLite 数据库下载

> ID：10226337
> 
> 赞同：1
> 
> 时间：2012-04-19T10:39:32.850
> 
> 标签：iphone, ios

我正在尝试下载必须在应用程序中使用的数据库（SQLite）。在保存下载的数据（以 NSData 形式提供）之前，我想检查下载的数据是否是 SQLite 数据库。我该如何检查。

例如：

数据库的正确 URLl 是[http://example.com/mydatabase.db](http://example.com/mydatabase.db)

如果以某种方式将 URL 键入为[http://example.com/mydatabase.bdx](http://example.com/mydatabase.bdx)，但它不存在，我仍然会在 NSData 中收到一些数据。

```
NSData *dbfile = [NSData dataWithContentsOfURL:[NSURL URLWithString: @"http://example.com/mydatabase.db"]]; 
```

我当然可以在保存文件并尝试打开后检查，如果它无法打开它有一些问题。但是如果没有下载正确的数据，我想签入 NSData 而无需保存文件。

如何在不保存的情况下进行检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:58:53.593

翻阅[sqlite3 接口文档](http://www.sqlite.org/c3ref/intro.html)，我只能找到[`sqlite3_open()`](http://www.sqlite.org/c3ref/open.html)和朋友，它们都采用文件名，而不是数据块。

因此，除了提供您自己的自定义 sqlite3 库之外，我认为您将不得不`NSData`按照您的描述保存下载的 - 将其转储到临时位置，然后尝试打开它（可能使用`sqlite3_open()`，但希望您使用的是[FMDB](https://github.com/ccgus/fmdb)或类似），如果失败，则得出数据无效的结论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:49:30.900

下面的代码将帮助您检查扩展。

```
NSString *url = @"http://example.com/mydatabase.bdx";
if([url hasSuffix:@".db"])
NSData *dbfile = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]]; 
```

# python - 如何在不丢失任何数据的情况下处理 UnicodeDecodeError？

> ID：10226342
> 
> 赞同：2
> 
> 时间：2012-04-19T10:40:04.317
> 
> 标签：python, web-scraping, lxml

我正在使用 Python & lxml 并遇到错误

**我的代码**

```
>>>import urllib
>>>from lxml import html

>>>response = urllib.urlopen('http://www.edmunds.com/dealerships/Texas/Grapevine/GrapevineFordLincoln_1/fullservice-505318162.html').read()
>>>dom = html.fromstring(response)

>>>dom.xpath("//div[@class='description item vcard']")[0].xpath(".//p[@class='service-review-paragraph loose-spacing']")[0].text_content() 
```

**追溯**

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/lxml/html/__init__.py", line 249, in text_content
return _collect_string_content(self)
File "xpath.pxi", line 466, in lxml.etree.XPath.__call__ (src/lxml/lxml.etree.c:119105)
File "xpath.pxi", line 242, in lxml.etree._XPathEvaluatorBase._handle_result (src/lxml/lxml.etree.c:116936)
File "extensions.pxi", line 552, in lxml.etree._unwrapXPathObject (src/lxml/lxml.etree.c:112473)
File "apihelpers.pxi", line 1344, in lxml.etree.funicode (src/lxml/lxml.etree.c:21864)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x93 in position 477: invalid start byte 
```

问题是我正在获取的 div 中存在的特殊字符。如何在不丢失任何数据的情况下对文本进行编码/解码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:02:45.477

解析器假定这是一个 utf-8 文件，但事实并非如此。最简单的做法是先将其转换为 unicode，通过了解页面的编码

```
>>> url =  urllib.urlopen('http://www.edmunds.com/dealerships/Texas/Grapevine/GrapevineFordLincoln_1/fullservice-505318162.html')
>>> url.headers.get('content-type')
'text/html; charset=ISO-8859-1'

>>> response = url.read()
#let's convert to unicode first
>>> response_unicode = codecs.decode(response, 'ISO-8859-1')
>>> dom = html.fromstring(response_unicode)
#and now...
>>> dom.xpath("//div[@class='description item vcard']")[0].xpath(".//p[@class='service-review-paragraph loose-spacing']")[0].text_content()
u'\n                  On December 5th, my vehicle completely shut down.\nI had it towed to Grapevine Ford where they told me that the intak..... 
```

多田！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:55:54.613

所以看起来页面已损坏。它指定了 UTF-8 编码，但在该编码中无效。

`urlopen(...).read()`返回一个字节串 ( `str`)。当您将其提供给 时`lxml`，它会尝试使用 UTF-8 对其进行解码并失败。

这可能不是最好的方法，但我们可以手动指定不同的编码，例如 Latin-1：

```
response = urllib.urlopen(...).read() .decode(' *latin-1* ')
```

现在`response`是一个文本字符串 ( `unicode`)，这正是 LXML 想要处理的。

# php - 如何向我的表单添加验证？

> ID：10226344
> 
> 赞同：0
> 
> 时间：2012-04-19T10:40:06.010
> 
> 标签：php, forms, validation

我有一个向我的 sql 数据库添加信息的 php 表单，我需要它只接受文本框中的数字。

这是我的 php 表单

```
<form id="MakeBid" action="MakeBid.php" method="POST">
    <input type="hidden" name="propertyID" value="1" />
    <div>Bid Now
        <input type="text" name="pricesoldfor" />
    </div>
    <input id="submit" input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:54:14.290

```
$num = 123456;
if(!filter_var($num, FILTER_VALIDATE_INT))
 {
 echo("Not number");
 }
else
 {
 echo("Number");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:49:39.230

您可以使用 javascript 进行客户端验证。这不是很安全，但它速度很快，可用于提供响应式用户体验，但应始终通过服务器端验证进行备份。

您可以混合使用正则表达式和 if/else 或 case/switch 来查看输入了哪些字符。

```
if (!preg_match("/^[0-9]", $textfield)) 
// display error message 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T10:47:07.063

客户端无需加载即可获得反馈，您可以执行以下操作

```
<form [...] onsubmit="if( !this.pricesoldfor.match(/\d+/) ) { 
     alert('Please enter only numbers for the price!'); return false; 
}"> 
```

（我已经在内联编写了这个示例 - 因为您的表单可能会更大，我建议您不要使用属性 onsubmit 而是附加适当的事件处理程序。看看[preventDefault()](https://developer.mozilla.org/en/DOM/event.preventDefault)以及这通常是一个更好的替代`return false`。）

您真正需要做的是在您的*PHP*（服务器端）中验证它是否只是数字，然后再将其保存到数据库中。例如像这样：

```
if((string)(int)$input === $input) { /*was a number*/ } else { /*was not a number*/ } 
```

请记住，这两个都只允许完整的数字（整数），所以没有“35.43”或类似的。看看[is_numeric()](http://php.net/manual/en/function.is-numeric.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:43:14.330

访问所有类型的验证

[http://www.position-relative.net/creation/formValidator/](http://www.position-relative.net/creation/formValidator/)

演示如下

[http://www.position-relative.net/creation/formValidator/demos/demoValidators.html](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)

# c# - 如何在同一个 ListView 中拖放？

> ID：10226347
> 
> 赞同：0
> 
> 时间：2012-04-19T10:40:17.063
> 
> 标签：c#, winforms, listview, drag-and-drop

我有一个小型文件浏览器应用程序 [WINFORMS]，我使用 ListView 控件来浏览项目。
因此 listView 显示当前地址 [From local Computer] 中的文件和文件夹。
我需要启用拖放功能以让文件/文件夹轻松移动/复制到同一地址中的另一个文件夹。每个项目都有一些特点：

*   **(item.Text/item.Name)** 具有文件/文件夹**Name**。*   **item.ToolTipText** 具有文件/文件夹**Path**。*   **item.SubItems[ 1 ].Text**对于文件，它将代表文件大小`"13.45 MB"`，对于文件夹，它将是`string.Empty` *[但是，有几种方法可以知道它是文件还是文件夹]。*

    我看过很多关于如何在 listview 中使用拖放的教程，但这就像从 Windows 文件资源管理器到 ListView，或者从 ListView 到另一个，但在我的情况下，我需要知道如何**在同一个 ListView 中拖放**。

    我已启用 ListView 的 AllowDrop 属性。并且还激活了以下功能：

    ```
     private void listView1_DragDrop(object sender, DragEventArgs e)
        {
        }

        private void listView1_DragEnter(object sender, DragEventArgs e)
        {
        }

        private void listView1_ItemDrag(object sender, ItemDragEventArgs e)
        {
        } 
    ```

    ![在此处输入图像描述](../Images/c2e1c0ab296e76bbbff2d68ed0badcc8.png)

    # 更新：

    我试着用这个：

    ```
    private void listView1_DragDrop(object sender, DragEventArgs e)
        {
            ListViewItem item = (ListViewItem)e.Data.GetData(typeof(ListViewItem)); //this should be the target item (FOLDER)
            StringBuilder s = new StringBuilder();
            foreach (ListViewItem i in listView1.SelectedItems)
            {
                s.AppendLine(i.Text);
            }
            MessageBox.Show("DRAGGED ITEM : " + s.ToString() + "TARGET ITEM : " + item.Text);
        }
        private void listView1_DragEnter(object sender, DragEventArgs e)
        {
            e.Effect = DragDropEffects.Copy;
        }
        private void listView1_MouseDown(object sender, MouseEventArgs e)
        {
            var item = listView1.GetItemAt(e.X, e.Y);
            if (item != null)
            {
                listView1.DoDragDrop(item, DragDropEffects.Copy);
            }
        } 
    ```

    在`listView1_MouseDown`我得到鼠标指向的项目，但它在我放下拖动的项目之前给了我项目，所以如果我将一个名为“SWImg”的文件夹拖到文件夹“ODDFiles”，消息框显示`"SWImg - SWImg"`

    然后我替换`listView1_MouseDown`为`listView1_ItemDrag`：

    ```
    private void listView1_ItemDrag(object sender, ItemDragEventArgs e)
        {
            if (e.Item != null)
            {
                listView1.DoDragDrop(e.Item, DragDropEffects.Copy);
            }
        } 
    ```

    同样的结果：S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:00:30.053

我已经想通了。

```
private void listView1_DragDrop(object sender, DragEventArgs e)
    {
        if (listView1.SelectedItems.Count == 0) { return; }
        Point p = listView1.PointToClient(MousePosition);
        ListViewItem item = listView1.GetItemAt(p.X, p.Y);
        if (item == null) { return; }
        List<ListViewItem> collection = new List<ListViewItem>();
        foreach (ListViewItem i in listView1.SelectedItems)
        {
            collection.Add((ListViewItem)i.Clone());
        }
        if ((e.Effect & DragDropEffects.Move) == DragDropEffects.Move)
        {
            Thread thMove = new Thread(unused => PasteFromMove(item.ToolTipText, collection));
            thMove.Start();
        }
        else
        {
            Thread thCopy = new Thread(unused => PasteFromCopy(item.ToolTipText, collection));
            thCopy.Start();
        }

    }

    private void listView1_DragOver(object sender, DragEventArgs e)
    {
        if ((e.KeyState & 8) == 8)
            e.Effect = DragDropEffects.Copy;
        else
            e.Effect = DragDropEffects.Move;
    }

    private void listView1_ItemDrag(object sender, ItemDragEventArgs e)
    {
        listView1.DoDragDrop(e.Item,DragDropEffects.All);
    } 
```

# google-maps - 打开按钮上的信息框单击“外部”地图（谷歌地图 v3）

> ID：10226352
> 
> 赞同：2
> 
> 时间：2012-04-19T10:40:51.243
> 
> 标签：google-maps, google-maps-api-3

我有多个标记。

使用此代码单击每个标记时，我成功地打开了信息框（是的，它在设置标记的循环中）

```
for (var i = 0; i < markers.length; i++) {
....
....
....
 google.maps.event.addListener(marker, "click", function () {
            //alert(this.html);
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
} 
```

上面的代码工作得很好。

但现在我希望每个标记的信息框在地图外单击的按钮上打开。我在同一个循环中尝试了这个。

```
for (var i = 0; i < markers.length; i++) {
....
....
....
 var chandu = document.getElementById(i);
         google.maps.event.addDomListener(chandu, "click", function(){
            infowindow.setContent(this.html);
            infowindow.open(map, this);
            //alert("Yo");
         });
} 
```

我有 html 按钮可以像这样点击

```
 <a href="#" id="0">0</a>
    <a href="#" id="1">1</a>
    <a href="#" id="2">2</a>
    <a href="#" id="3">3</a>
    <a href="#" id="4">4</a>
    <a href="#" id="5">5</a> 
```

但是这个 html 链接部分的点击不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T04:16:09.763

The working solution I have now looks something like this

```
var chandu = document.getElementById(i);
chandu.onclick = generateTriggerCallback(marker,"click"); 
```

And there is a function out of the for loop

```
function generateTriggerCallback(object, eventType) {
            return function() {
                google.maps.event.trigger(object, eventType);
            };
        } 
```

Credit: I come up with this answer after looking into the source code of this sample [http://gmaps-samples-v3.googlecode.com/svn/trunk/sidebar/random-markers.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/sidebar/random-markers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:39:57.317

问题是您在处理超链接点击的代码中重用了“this”：

```
var chandu = document.getElementById(i);
         google.maps.event.addDomListener(chandu, "click", function(){
            infowindow.setContent(this.html);
            infowindow.open(map, this);
            //alert("Yo");
         });
} 
```

第一个“this”是正确的 - this.html 是超链接的 HTML（不是标记）。infowindow.open(map, this) 中的第二个“this”不正确。在您的工作代码中， this 引用了标记。在您的非工作代码中， this 引用了超链接。this 对象在两行之间没有变化。您需要 infowindow.open(map, this.id) 而不是 infowindow.open(map, this)，因为您的 a 标签的 id 值与标记数组中的索引相同。

但是请注意，这是不正确的 HTML，因为 id 属性不能以数字开头，它必须以字母开头。如果您要尝试验证您的 HTMl，它不会。您需要在 id 值上加上一个字母前缀，也许是一个“m”。然后，当您需要获取 id 值的子字符串时，剥离您拥有的“m”。

# ruby-on-rails - f.collection_select 不显示所选值

> ID：10226357
> 
> 赞同：10
> 
> 时间：2012-04-19T10:41:15.970
> 
> 标签：ruby-on-rails, ruby

谷歌上的搜索结果很多，甚至在 SO 上也有人问过——但到目前为止讨论的解决方案对我没有帮助。问题是：我有一个`form_for @company |f|`并且我正在使用`f.collection_select`-`company_status_id`但是当表单加载时，我希望选择实际的公司状态（如果已设置）。通过我知道的调试器，它已被设置，但我在那里显示了一个默认值。这是代码：

```
= puts @company.company_status_id
= f.collection_select :company_status_id, ListCache.company_statuses, :id, :name, {:prompt => @select_value} 
```

这是生成的html

```
<select id="company_company_status_id" prompt="-Select-" name="company[company_status_id]">
<option value="1">-Not Available-</option>
<option value="2">Active</option>
<option value="3">Bankrupt</option>
<option value="4">Acquired</option>
</select> 
```

即使我这样做，条件也保持不变：

```
f.collection_select :company_status_id, ListCache.company_statuses, :id, :name, {:prompt => @select_value, :selected => :selected => @company.company_status} 
```

或者

```
f.collection_select :company_status_id, ListCache.company_statuses, :id, :name, {:prompt => @select_value, :selected => @company.company_status} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T04:49:42.747

这就是我最终所做的：

```
f.collection_select :company_status_id, ListCache.company_statuses, :id, :name, {:prompt => @select_value, :selected => @company.company_status_id.to_i} 
```

我阅读了一个类似问题的答案，collection_select通过比较传递的内容与集合的属性来*自动选择选定的值。*显然它们的类型有所不同，并且将 CompanyStatus 的 int 与 @company.company_status_id.to_i 的 int 进行了比较。虽然 @company.company_status_id 也应该是 int 。我可以在数据库中看到。无论如何，这行代码有效。

如果有人可以解释，我将非常感谢！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-11T13:57:08.253

如果你使用 collection_select 助手，语法很简单：

```
<%= f.collection_select :category_id, Category.all, :id, :name,
                       prompt: true, selected: @product.category_id %> 
```

我希望这有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T13:24:18.563

```
<% form_for(@company) do |f| %>
   <%= f.select(:company_status_id, ListCache.all.map {|lc| [lc.name, lc.id]} ) %>
<% end %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-31T04:18:25.780

有时您只需要转到浏览器地址栏并按回车即可。单击刷新按钮正常重新加载页面无济于事。我的问题就这样解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T10:48:27.307

改用 select_tag

```
 <%= form_for(@product, :html => {:multipart => true}) do |f| %>

     <%= select_tag("product[category_id]", options_for_select(@categories.map { |cat| [cat.name, cat.id] })) %>

     <%end%> 
```

希望这对你有帮助......

# java - 如何在 Java 中将 16 位 .tiff 图像转换为 8 位 .tiff 图像？

> ID：10226360
> 
> 赞同：0
> 
> 时间：2012-04-19T10:41:26.580
> 
> 标签：java, image-processing

我使用 Java SE for Dentist 在 Netbeans Platform 中制作应用程序。在我的应用程序中，我使用 X 射线枪捕获图像，然后对其进行图像处理。首先，我想将 16 位图像转换为 8 位图像。那么，如何我将 16 位图像转换为 8 位图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:58:43.870

假设“bi”是您的 16 位灰度 BufferedImage（由 ImageIO.read(...) 获得）；

```
 BufferedImage dest = new BufferedImage(bi.getWidth(),bi.getHeight(),BufferedImage.TYPE_BYTE_GRAY);
    Graphics2D g2 = dest.createGraphics();
    g2.drawImage(bi, 0, 0, null); 
```

# path - 路径 SVG 的 LinearGradient

> ID：10226365
> 
> 赞同：0
> 
> 时间：2012-04-19T10:41:51.460
> 
> 标签：path, svg, linear-gradients

我需要填写使用 javascript 动态创建的路径。我为此创建了一个渐变并用它来填充我的路径，但什么也没发生。我的代码有什么问题？

```
$('svg').prepend('<defs id="gradient"></defs>');
$('#gradient').append('<linearGradient id="yellow" x1="0%" y1="0%" x2="100%" y2="0%">  </linearGradient>');
$('#yellow').append('<stop offset="0%" style="stop-color:rgb(255,255,0);stop-opacity:1" /> <stop offset="100%" style="stop-color:rgb(255,0,0);stop-opacity:1" />');
$('g:nth-child(2n+1) path').attr('fill','url(#gradient)');` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:04:56.897

您的填充指向 defs 元素而不是线性渐变。id="gradient" 应该在 linearGradient 元素上 - 或者使填充 url(#yellow)

# ant - 如何从 apache ant build.xml 文件目标启动和停止 jboss

> ID：10226377
> 
> 赞同：2
> 
> 时间：2012-04-19T10:43:31.720
> 
> 标签：ant, jboss

我有 make build.xml make master build.xml 并制作 jar war ear 文件

现在我想使用 apache ant 从主 build.xml 文件停止和启动 jboss 服务器

然后复制所有战争和耳朵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:15:26.087

这很简单

```
<!-- Start Jboss -->
<target name="start-jboss" description="Starts back-end EJB container" depends="prepare">
    <exec executable="${jboss.bin.dir}/run.bat" spawn="false">
    </exec>
    <copy todir="destination of where you want the file to go" overwrite="true">
       <fileset file="myfile.war" />
       <fileset file="myfile.ear" />
    </copy>
    <echo>+-----------------------------+</echo>
    <echo>| J B O S S   S T A R T E D   |</echo>
    <echo>+-----------------------------+</echo>
</target>

<!-- Stop Jboss -->
<target name="stop-jboss" description="Stops back-end EJB container" depends="prepare">
    <exec executable="${jboss.bin.dir}/shutdown.bat" spawn="false">
        <arg line="-S" />
    </exec>
            <copy todir="destination to where you want the file to go" overwrite="true">
            <fileset file="myfile.war" />
            <fileset file="myfile.ear" />
            </copy>
    <echo>+-----------------------------+</echo>
    <echo>| J B O S S   S T O P P E D   |</echo>
    <echo>+-----------------------------+</echo>

</target> 
```

希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:50:23.870

您可以从命令行远程停止 jboss（我假设这是您想要的），如此处所示[本地](http://goo.gl/mUytc) ，也就是说，如果您在运行 jboss 的同一台机器上运行构建文件，您可以使用 ants`exec`命令轻松完成此操作

# cakephp - Cakephp 2.1 表单错误

> ID：10226378
> 
> 赞同：0
> 
> 时间：2012-04-19T10:43:32.037
> 
> 标签：cakephp, cakephp-2.1

我刚刚开始使用 cakePHP 2.1。提交表格后。如果有验证错误如何检查参数是否有错误？

在我们曾经做过类似的事情之前

```
$this->data['params']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:49:47.437

例如，如果您在表单提交中保存数据并且您在该模型上定义了验证，则仅当调用`Model->save()`返回 true 时才会保存数据。在这种情况下，您很可能有验证错误。您可以具体检查的方法是检查模型的 validationErrors 属性。

在您的控制器中

```
 if(!$this->Model->save($data)) {
         if(!empty($this->Model->validationErrors)) {
             //save failed due to validation errors
             debug($this->Model->validationErrors);
         }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:46:49.393

Andrew Perk 在 Youtube 上为 CakePHP 发布了一些优秀的视频。您可以观看其中一个解释如何使用 CakePHP 和 jQuery 进行 AJAX 验证。

请观看[Cakephp Ajax 教程 - 使用 Cakephp 的 Js Helper 和 jQuery](http://www.youtube.com/watch?v=dQ71psonQx0)
可能对你有所帮助。

# c++ - 不匹配调用 '(std::vector ) (std::vector ::迭代器&)'

> ID：10226379
> 
> 赞同：0
> 
> 时间：2012-04-19T10:43:33.223
> 
> 标签：c++, vector, iterator

我有一个类 foo，并使用此代码为它创建了一个向量

```
std::vector<foo> fooVector; 
```

我也有一个使用此代码的迭代器

```
std::vector<foo>::iterator locator; 
```

现在我收到了这个错误

```
foo.cpp:29:25: error: no match for call to ‘(std::vector<foo>) (std::vector<foo>::iterator&)’ 
```

对应的行是

```
if(fooVector(locator).getBoo() + (insertBar.geBoo()) < 4000) 
```

据我所知，我正确使用了迭代器？

我不确定我的使用方式有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:50:50.450

如果`locator`迭代器在使用之前已正确初始化，那么您应该将代码更改为

```
if(locator->getBoo() + (insertBar.geBoo()) < 4000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:48:09.577

`fooVector(locator)`你想用这个来表达什么？

`fooVector`是变量不是函数。

# python - NameError：未定义全局名称“reduce”

> ID：10226381
> 
> 赞同：30
> 
> 时间：2012-04-19T10:43:53.303
> 
> 标签：python, reduce

我是 Python 新手。你能告诉我下面的代码有什么问题吗？当我运行它时，我收到一条错误消息“NameError：未定义全局名称'reduce'”。我问过古尔格，但没用。:(

```
def main():
    def add(x,y): return x+y
    reduce(add, range(1, 11))

if __name__=='__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-19T10:46:55.233

我会猜测：

1.  您正在使用 Python 3，并且
2.  您正在学习专为 Python 2 设计的教程。

该`reduce`函数由于不常用，已从 Python 3 的内置函数中删除。它仍然在`functools`模块中可用，因此您可以执行以下操作：

```
import functools

def main():
    def add(x,y): return x+y
    functools.reduce(add, range(1, 11)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-02-28T09:11:10.377

还

```
# Import reduce from functools
from functools import reduce 
```

允许您像使用`reduce`内置函数一样使用它。

```
def main():
    def add(x,y): return x+y
    reduce(add, range(1, 11)) 
```

# php - 基本 PHP 脚本在执行时输出 ";?>

> ID：10226382
> 
> 赞同：1
> 
> 时间：2012-04-19T10:44:11.963
> 
> 标签：php, eclipse, tomcat7

我刚开始php。写了一个简单的文件：

```
<html>
<head>
    <title>Hello World</title>
</head>
<body>test

    <?php
    echo "<h1>Hello World!</h1>";
    ?>

</body>
</html> 
```

现在我希望这会显示：

> 测试你好世界！

但相反，我得到：

> 测试你好世界！"; ?>

这似乎很基本，但我就是不明白。
我正在使用 Apache Tomcat 7.0.26。
当我用 Eclipse 运行它时，我只会得到“*测试*”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:52:54.407

Tomcat 不解析 PHP 标签。您需要一个 PHP 服务器才能运行此脚本。我建议在 mac 上运行 xampp（它是便携式的，因此不需要安装）或 wamp（在 Windows 上）或 mamp。

其中任何一个都包括基本 PHP/Apache/Mysql Web 开发所需的所有软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:52:02.917

基本故障排除提示：

1.  在您试用代码之前，请确保 PHP 已安装并且可以正常工作。
2.  使用浏览器的“查看源代码”功能来检查 PHP 脚本的实际输出。
3.  确保在开发框中启用完整的错误报告。找到你的`php.ini`文件并设置：
    *   `display_errors = On`
    *   `error_reporting = E_ALL`
4.  学习使用[phpinfo()](http://php.net/phpinfo)和[var_dump()](http://php.net/var_dump)。

# playframework - Playframework 1.2.4 进化不起作用

> ID：10226385
> 
> 赞同：1
> 
> 时间：2012-04-19T10:44:17.907
> 
> 标签：playframework, playframework-1.x

我无法生成 1.sql：

play evolutions 或 play evolutions 给出相同的输出

```
~        _            _ 
~  _ __ | | __ _ _  _| |
~ | '_ \| |/ _' | || |_|
~ |  __/|_|\____|\__ (_)
~ |_|            |__/   
~
~ play! master-4877ea8, http://www.playframework.org
~
~ Connected to jdbc:mysql://localhost/artoodb2?useUnicode=yes&characterEncoding=UTF-8&connectionCollation=utf8_general_ci
~ Application revision is 0 [da39a3e] and Database revision is 0 [da39a3e]
~
~ Your database is up to date
~ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:18:35.377

然后保持不变并在 2.sql 中创建所需的演变

# database - 当您希望对原始表的更改自动传播到汇总表时的最佳数据库设计/架构

> ID：10226386
> 
> 赞同：2
> 
> 时间：2012-04-19T10:44:19.370
> 
> 标签：database, architecture, nosql

我正在尝试为需要更改原始“较低级别”表的系统找出最佳的数据库/数据架构方法，理想情况下，自动传播基于基础数据存储视图的各种不同表。

让我举一个简化的例子。

想象一下，我有以下表格：

1.  不同超市的各种食品配料表和价格表
    *   例如。一张包含 {番茄酱：1.19，黄油：0.99} 的 Safeway 餐桌，以及一张带有 {鸡蛋：1.99，黄油：0.79} 的沃尔玛餐桌
2.  存储每种成分的最便宜位置的表
    *   例如。{黄油=>沃尔玛：0.79}
3.  一张表，其中存储具有最便宜的配方价格的配方（由表 2 中最便宜的成分价格组成。
    *   例如。{ "番茄酱-鸡蛋-早餐 => 总计：3.97，配料 => 黄油：0.79，鸡蛋：1.99，番茄酱：1.19
4.  一张表，其中存储了几种替代食谱中最便宜的早餐食谱。

现在想象一下，我有工人外出并每小时更新表 (1) 的值。是否有数据库设计或架构会强制更新表 2 中依赖于表 1 中更改的内容的任何条目，并且类似地将更改传播到表 3 和表 4。我想这可以通过代码实现一系列级联工作，但我想知道是否有一种不那么复杂和更优雅的方式来做到这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:25:38.137

Looks like a well fit for the [CQRS pattern](http://martinfowler.com/bliki/CQRS.html). You should have just one data source when storing items.

From the linked article:

> CQRS stands for Command Query Responsibility Segregation. It's a pattern that I first heard described by Greg Young. At its heart is a simple notion that you can use a different model to update information than the model you use to read information.

CQRS helps you take in one kind of information (Update model) and then transform it into something which you can query (Read/query model).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:29:45.420

我认为“优雅的方式”是正确规范您的表格。

例如，您不会有一张用于 Safeway 的桌子，而另一张用于 Walmart 等的桌子 - 相反，您将有一张用于“零售商”的桌子，其中列出了 Safeway 和沃尔玛，然后有一张用于“产品”的桌子，用于列出鸡蛋、番茄酱等然后是第三个，说'retail_item'，列出了retailer_id、product_id、价格等。

那么您可以简单地查询您提出的所有问题...

# c# - 用户登录后登录视图不更新？

> ID：10226388
> 
> 赞同：2
> 
> 时间：2012-04-19T10:44:25.050
> 
> 标签：c#, asp.net

我的 site.master 设计中有以下 loginview 代码

```
<asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="Log.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                </LoggedInTemplate>
            </asp:LoginView> 
```

log.aspx.cs 文件具有以下代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Master.FindControl("CAMenu").Visible = false;
    }

    protected void btnLogin_Click(object sender, EventArgs e)
    {
        if (txtUsername.Text == "admin" && txtPassword.Text == "1234")
        {
            Response.Redirect("NewEvent.aspx");
        }
    } 
```

但是登录视图没有更新为欢迎“用户名”..这里有什么错误。我应该改变什么吗？？？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:19:23.207

In Login.Aspx i made the following changes..

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            Master.FindControl("CAMenu").Visible = false;
            Master.FindControl("loginStatus").Visible = false;
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.Login.btnLogin_Click(object sender, EventArgs e)", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    }
    protected void LoadMessageBox(string MessageID)
    {
        try
        {
            messages = new GUIMessages();
            popupExtend = new ModalPopupExtender();
            lbMessage = (Label)Master.FindControl("label5");
            lbMessage.Text = messages.GetGUIMessage(GUIModule.Login, MessageID);
            popupExtend = (ModalPopupExtender)Master.FindControl("popupExtender");
            popupExtend.Show();
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.Login.LoadMessageBox(string MessageID)", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    }

    protected void btnLogin_Click(object sender, EventArgs e)
    {
        try
        {
            string userName = txtUsername.Text;
            string password = txtPassword.Text;

            if (userName == string.Empty && password == string.Empty)
            {
                LoadMessageBox("5");
                txtUsername.Focus();

                return;
            }
            if (userName == string.Empty)
            {
                LoadMessageBox("1");
                txtUsername.Focus();
                return;
            }
            else if (password == string.Empty)
            {
                LoadMessageBox("3");

                txtPassword.Focus();
                return;
            }

            User user = new User(userName);
            DataTable tab = new DataTable();
            tab = user.GetUserDetails(userName);
            string firstName = string.Empty;
            string userPassword = string.Empty;
            string RoleID = string.Empty;
            string userID = string.Empty;
            Session["UserName"] = userName;
            if (tab.Rows.Count == 0)
            {
                LoadMessageBox("6");
                txtPassword.Text = string.Empty;
                txtUsername.Text = string.Empty;
                txtUsername.Focus();
                return;
            }

            if (tab.Rows.Count == 1)
            {
                userID = tab.Rows[0][0].ToString();
                firstName = tab.Rows[0][1].ToString();
                userPassword = tab.Rows[0][2].ToString();
                RoleID = tab.Rows[0][3].ToString();
                Session["UserID"] = userID;
            }

                if (userPassword == password)
                {
                    Response.Redirect("~/Default.aspx");
                }
                else
                {
                    LoadMessageBox("4");
                    txtPassword.Focus();
                    return;
                }

        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.Login.btnLogin_Click(object sender, EventArgs e)", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    } 
```

And in Site.Master:-

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            Page.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            if (Page.Title != "Login")
            {
                if (Session.Count == 0 || Session["Username"] == null)
                    Response.Redirect("~/Login.aspx", true);
                CheckRole();

            }
            lblDateTime.Text = "";
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.SiteMaster.Page_Load()(object sender, EventArgs e)", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
      }

    public void CheckRole()
    {
        try
        {
            if (System.Web.HttpContext.Current.Session.Count > 0)
            {
                string firstName = string.Empty;
                // string userPassword = string.Empty;
                string RoleID = string.Empty;
                Common common = new Common();
                DataTable tab = new DataTable();
                string userName = (string)Session["UserName"];
                User user = new User(userName);
                tab = user.GetUserDetails(userName);

                if (tab.Rows.Count == 1)
                {
                    firstName = tab.Rows[0][1].ToString();
                    RoleID = tab.Rows[0][3].ToString();
                }

                if (RoleID != "1")
                {
                    int count = CAMenu.Items.Count;
                    if (count == 5)
                    {
                        for (int menuCount = 3; menuCount > 0; menuCount--)
                        {
                            string text = CAMenu.Items[menuCount - 1].Text;
                            CAMenu.Items.RemoveAt(menuCount - 1);
                        }
                    }
                    lbLoginMessage.Text = "Welcome," + " " + firstName;
                    loginStatus.Visible = true;
                }
                else
                {
                    lbLoginMessage.Text = "Welcome," + " " + firstName;
                    loginStatus.Visible = true;
                }

            }
            else
            {
                Session.Abandon();
                Response.Redirect("~/Login.aspx", true);
            }
        }
        catch (Exception ex)
        {
            new Logger().Log("ShortCom.SiteMaster.CheckRole()", ex.Message);
            Response.Redirect("~/Error.aspx");
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:52:23.827

使用登录控件 onauthenticate 事件：

```
protected void OnAuthenticate(object sender, AuthenticateEventArgs e)
    {
 if (txtUsername.Text == "admin" && txtPassword.Text == "1234")
        {
            e.Authenticated = true;
        }
        else {
            e.Authenticated = false;
        }    

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T13:55:46.987

尝试这个...

将此添加到您的登录控件验证事件处理程序...（***请在 VB***中）

```
If Membership.ValidateUser(login2.UserName, login2.Password) Then

            If Not Request.QueryString("ReturnUrl") Then

                FormsAuthentication.RedirectFromLoginPage(login2.UserName, False)

            Else

                FormsAuthentication.SetAuthCookie(login2.UserName, False)
            End If

        Else
            Response.Write("Invalid UserID and Password")
        End If 
```

用于发布事件处理的新控件必须覆盖登录控件身份验证事件的默认事件处理。希望它有效..谢谢。

# node.js - node.js 邮件模板中的新行

> ID：10226390
> 
> 赞同：2
> 
> 时间：2012-04-19T10:44:37.357
> 
> 标签：node.js, mailer

我正在使用 node.js 邮件模块从节点服务器发送电子邮件。我为此使用了模板文件，但是在发送消息时我修剪了所有空格。我试图在模板的最后一行添加 '\n' 但它也不起作用。以下是模板文件的示例：

```
Hi {{username}},\\n

Thanks for creating an account with us 
```

我试过 \n 和 \n ，一切都不起作用。有什么帮助吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-08-20T01:37:59.890

`nodemailer`支持两种类型的模板，`text`即`html (or templateFn() - case of loopback)`.

该选项`text`用于不支持 HTML 呈现的电子邮件客户端，因此`\n`应在此选项中用于新行。

相反，您应该在选项中交换`\n`与。`<br>``html`

希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:13:56.307

这是一种已知行为，mustache 用于 HTML 模板，在 HTML 中，新行将仅收缩为一个空格。

您可以尝试做类似的事情，`{{new_line}}`而不是您的`\\n`, 并`new_line: "\n\xA0"`在您的数据中定义。`\xA0`是不可破坏的空间，如果你想创建两个新行，它可以分隔行。

另一种解决方案是不使用模板，而只是将文件的内容作为文本获取，`fs.readFileSync(filename)`并使用正则表达式替换`{{xxx}}`为对象内容。

# jquery - addClass removeClass 错误 jQuery

> ID：10226392
> 
> 赞同：0
> 
> 时间：2012-04-19T10:44:43.720
> 
> 标签：jquery

我正在尝试编写一个 jQuery 代码，它只是在单击时切换类，所以我有两个元素，一个带有一个视频类，另一个视频在中间，点击它们切换类，这在火灾错误中工作，类切换和它们的位置（与类有关），但是当我第二次单击时，jQuery 的行为就好像类没有改变......下面是代码：

```
$('.video-left').click(function(){
   $('.video-middle').addClass('video-left');
   $('.video-middle').removeClass('video-middle');
   $(this).addClass('video-middle');
   $(this).removeClass('video-left');
});
$('.video-middle').click(function(){alert('middle');}); 
```

所以如果我先点击左，那么现在剩下的会触发警报。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:48:46.823

当您执行诸如`$( '.video-left' ).click()`单击事件之类的操作时，它会附加到*元素*上，而不是附加到*类*上。也就是说，如果元素的类发生更改，则单击事件不会更改，因为该事件附加到元素本身。

在这种情况下，当您想将事件附加到一个*类*时，您应该使用[`.on()`](http://api.jquery.com/on/)每次用户单击元素时单独检查选择器的类。

```
$( document ).on( 'click', '.video-left', function(e) {
   // ...
}); 
```

（您也可以使用视频元素的任何父级而不是`document`，前提是它们在任何时候都不会改变。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:51:53.900

将类 video-left 添加到两个元素中，并将类“video-middle”（以及“video-left”添加到您希望默认为“video-middle”的元素中。

```
<div class='video-left'></div>
<div class='video-left video-middle'></div> <!--default video middle --> 
```

然后

```
$('.video-left').click(function(){
    $('.video-middle').removeClass('video-middle');
    $(this).addClass('video-middle');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:49:37.667

你做错了

您所做的是将事件附加到元素，而不是像您想象的那样将元素附加到类

每次单击元素时， .video-left 都会执行第一次 click() 中的函数。一样的

您应该做的是将“视频”类添加到所有元素并附加常见事件

```
$('.video').click(function(){
if($(this).hasClass('.video-left')) {do_something1();return} 
if($(this).hasClass('.video-middle')) {do_something2();return}
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:55:09.110

通过使用“单击”事件，您没有持久选择器，因此当您删除`video-left`类而不重新绑定时，它将不再处理该事件。

```
$('.video-left').on('click', function(event) {
  $('.video-middle').addClass('video-left').removeClass('video-middle')
  $(this).addClass('video-middle').removeClass('video-left')
})

$('.video-middle').on('click', function(){ alert('middle'); }) 
```

# javascript - 删除音轨未在 soundcloud 帐户中删除

> ID：10226393
> 
> 赞同：0
> 
> 时间：2012-04-19T10:44:46.303
> 
> 标签：javascript, soundcloud

我正在尝试使用删除功能从用户的 soundcloud 帐户中删除曲目，同时也从我的数据库中删除曲目。它成功地从我的数据库中删除了信息，但没有从 soundcloud 的数据库中删除，我真的不明白为什么！直到最后都没有出现错误，只是不会从 soundcloud 中删除曲目。

这是我正在使用的代码：

```
$(".deleteTrack").live("click", function () {
        if (SC.isConnected) {
            var scTid = $(this).attr('id');
            var path = "/tracks/" + scTid;
            var con = confirm("Are you sure you want to delete this track?");
            if (con) {
                 $.ajax({
                        type: "POST",
                        contentType: "application/json",
                        url: "JamWithInI.aspx/GetTrackInfo",
                        data: "{'scTid':'" + scTid + "'}",
                        dataType: "json",
                        success: function(str){
                            inst = str.d["1"];
                            SC.delete(path, function(){
                $.ajax({
                        type: "POST",
                        contentType: "application/json",
                        url: "JamWithInI.aspx/DeleteTrack",
                        data: "{'scTid':'" + scTid + "'}",
                        dataType: "json",
                        success: function(){
                            alert("Your track has been deleted");
                            $("#openInstruments").trigger('click').trigger('click');
                            $(".instrument").trigger('click').bind('click').trigger('click');
                            inst = null;
                        },
                        error: function () {
                            alert("Track did not delete succesfully");
                        }
                    });

            });
                        },
                        error: function () {
                            alert("An error occurred");
                        }
                    });
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T00:12:34.050

SC.delete() 方法使用响应对象和错误（如果有）调用您的回调。添加类似以下内容以查看是否正常工作：

```
SC.delete(path, function(response, error) {
    alert(response.status);
    if (error) {
        alert(error);
    }
}); 
```

如果您的删除请求成功，您应该会收到一个带有文本“200 - OK”的警报。如果不是，则错误消息将提供信息。

# php - 从 Facebook PHP SDK 获取用户的电子邮件 ID

> ID：10226394
> 
> 赞同：1
> 
> 时间：2012-04-19T10:44:50.340
> 
> 标签：php, facebook, facebook-php-sdk

从 Facebook PHP SDK 获取用户的电子邮件 ID

我尝试使用以下代码

第一的

```
$user_profile = $facebook->api('/me');  // or $facebook->api('/me?fields=email')
print_r($user_profile); 
```

第二

```
$user = $facebook->getUser();
$url = "https://api.facebook.com/method/fql.query";
    $url .= "?access_token=" . $access_token;
    $url .= "&query=SELECT email FROM user WHERE uid={$user}";
    $userData = simplexml_load_file($url);
    $userEmail = $userData->user->email;
    print_r($userEmail); 
```

第三

```
 $user = $facebook->getUser();
$fql    =   "select name, hometown_location, sex, pic_square, email from user where uid='$user'";
        $param  =   array(
           'method'     => 'fql.query',
            'query'     => $fql,
            'access_token' =>$access_token ,
          'callback'    => ''
        );

        $fqlResult2   =   $facebook->api($param);

    print_r($fqlResult2); 
```

这些都不会获得登录用户的电子邮件 ID。如何找回它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:55:24.433

**FBML**（这将很快成为[历史](http://developers.facebook.com/docs/reference/fbml)）

```
<fb:login-button autologoutlink="true" perms="email"></fb:login-button> 
```

**PHP**

```
$loginUrl = $facebook->getLoginUrl(
  array(
    'scope' => 'email'
  )
); 
```

**JS**

```
FB.login(function(response) {
    if (response.authResponse) {
       // conosle.log('User logged in');
    } else {
       // console.log('User cancelled login or did not fully authorize.');
    }
}, {
    scope: 'email'
});​ 
```

开始`email`使用图形 api

```
FB.api('/me', function(user) {
    if (user) {
        User.email = user.email;
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:51:20.647

您需要有权访问用户的电子邮件地址。因此，您的应用程序必须请求**“电子邮件”** [权限](https://developers.facebook.com/docs/authentication/permissions/)。

[这个网站](https://developers.facebook.com/docs/authentication/)有一些指南如何从用户那里获得这些权限（或者更确切地说是要求他们）。

根据[JS SDK 文档](http://developers.facebook.com/docs/reference/javascript/FB.login/)，您需要执行以下操作：

```
FB.login(function(response) {
   // handle the response
}, {scope: 'email,user_likes,...'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T09:57:48.753

更改您的代码，如下所示：

```
$facebook->api('/me?locale=en_US&fields=name,email' );

getLoginUrl( array(
    'scope' => 'email'
)); 
```

# python - 需要可见元素的 xpath 定位器

> ID：10226398
> 
> 赞同：4
> 
> 时间：2012-04-19T10:45:13.607
> 
> 标签：python, xpath, selenium, webdriver, selenium-webdriver

我正在尝试对我的网站进行测试。在某些用户表单上遇到问题。诀窍是，表单中文本字段的数量因用户选项而异（代码中存在禁用的字段，但有一个样式 < `displayed: none;`> 标签），所以我试图找到比定位每个元素更灵活的方法一对一并用 try/except 块填写表格。

我正在使用 xpath 定位器

`text_fields = driver.find_elements_by_xpath("//div[@class='form-line']/div[@class='form-inputs']/input[@type='text' and not(ancestor::div[@style='display: none;'])]")`

问题是萤火虫只定位需要的元素，但是当我使用它时我的硒脚本，打印列表`text_fields`给了我所有的元素，即使没有 < `displayed: none;`> 标签

我怎样才能只获得可见元素？

PS对不起我的英语不好^_^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T11:45:05.397

您可以按照通常的方式获取所有表单元素，然后在列表上进行迭代并删除那些不返回 true on 的元素[`is_displayed()`](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:48:39.133

试试`contains()`方法：

```
text_fields = driver.find_elements_by_xpath(
  "//div[@class='form-line']/div[@class='form-inputs']/input[@type='text' and 
  not(ancestor::div[contains(@style, 'display: none;')])]") 
```

重要的部分是：

```
div[contains(@style, 'display: none;')] 
```

请注意，如果样式包含字符串`display:none;`or `display:none`，则选择器将不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T17:57:51.303

我使用以下内容，效果很好。

```
self.assertTrue(driver.find_element_by_xpath("//div[@id='game_icons']/div/div[2]/div/a/img")) 
```

这当然适用于 Selenium 和 Python。

# winforms - Winforms DataGridView SQL 紧凑型 CRUD 示例

> ID：10226400
> 
> 赞同：0
> 
> 时间：2012-04-19T10:45:24.803
> 
> 标签：winforms, datagridview, sql-server-ce

我有一个非常简单的表，其中有两个标记为唯一的字符串列。谁能告诉我如何连接 datagridview 以允许最基本的 crud 操作。我打算只使用网格而不使用其他控件。这意味着有一个用于删除操作的链接列。

我已经尝试过一百万次迭代，包括数据表、绑定源、数据适配器、命令构建器……

非常感谢。

```
void dataGridView1_DataError(object sender, DataGridViewDataErrorEventArgs e)
{

}

private void bindingSource_PositionChanged(object sender, EventArgs e)
{
        // if the user moves to a new row, check if the 
        // last row was changed
        BindingSource thisBindingSource =
          (BindingSource)sender;

        DataRow ThisDataRow =
          ((DataRowView)thisBindingSource.Current).Row;
        if (ThisDataRow == _lastDataRow)
        {
            // we need to avoid to write a datarow to the 
            // database when it is still processed. Otherwise
            // we get a problem with the event handling of 
            //the DataTable.
            throw new InvalidOperationException("It seems the" +
              " PositionChanged event was fired twice for" +
              " the same row");
        }

        UpdateRowToDatabase();
        // track the current row for next 
        // PositionChanged event
        _lastDataRow = ThisDataRow;
    }

    private void UpdateRowToDatabase()
    {   
        if (_lastDataRow != null)
        {
            if (_lastDataRow.RowState == DataRowState.Modified
                || _lastDataRow.RowState == DataRowState.Added
                || _lastDataRow.RowState == DataRowState.Deleted)
            {
                DataRow[] rows = new DataRow[1];
                rows[0] = _lastDataRow;
                _dataAdapter.Update(rows);
            }
        }
    }        

void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        Debug.WriteLine(string.Format("Click Col: {0} Row:{1}", e.ColumnIndex, e.RowIndex));

        if (!_edit && e.ColumnIndex == 0)
        {
            if (e.RowIndex < _dataTable.Rows.Count)
            {
                DataRow[] rows = new DataRow[1];
                rows[0] = _dataTable.Rows[e.RowIndex];
                _bindingSource.RemoveCurrent();
                _dataAdapter.Update(rows);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:04:28.923

在此处查看 CodePlex 项目中的 ResultSetGrid 类：http: [//sqlcetoolbox.codeplex.com/SourceControl/changeset/view/77500#1210725](http://sqlcetoolbox.codeplex.com/SourceControl/changeset/view/77500#1210725)

# image-processing - 物体与 Kinect 光轴的夹角

> ID：10226408
> 
> 赞同：2
> 
> 时间：2012-04-19T10:45:59.710
> 
> 标签：image-processing, opencv, computer-vision, kinect, openni

**这是我的设置：** Kinect 安装在执行器上以进行水平移动。这是我在做什么的简短演示。[http://www.youtube.com/watch?v=X1aSMvDQhDM](http://www.youtube.com/watch?v=X1aSMvDQhDM)

**这是我的场景：**

![在此处输入图像描述](../Images/0b58ce0c61ce07a73121c9279a2c163c.png)

请参考上图。假设Actuator中心'M'与Kinect光轴中心'C'的距离为'dx'（毫米），则从Kinect得到的深度信息'D'（毫米）是相对的到光轴。由于我现在在 Kinect 的中心上安装了一个执行器，因此物体和 Kinect 之间的实际深度是“Z”。

X 是光轴与物体之间的距离，以像素为单位。Theta2 是光轴和物体之间的角度。'dy' 可以忽略。

**这是我的问题。** 要获得 Z，我可以简单地使用图 2 中的距离方程。但是我不知道 X 的真实世界值（以 mm 为单位）。如果我有物体和光轴“theta2”之间的角度，我可以使用 Dsin(theta2) 来获得以 mm 为单位的 X。然而 theta2 也是未知的。因为如果 X（以 mm 为单位）已知，我可以得到 theta2，如果 theta2 已知，我可以得到 X。那么我应该如何获得以 mm 为单位的 X 值或光轴与对象 P 之间的角度？

这是我尝试过的：因为我知道 Kinect 的最大视野是 57 度，而 Kinect 的最大水平分辨率是 640 像素，我可以说 kinect 的 1 度覆盖 11.228 (640/57) 像素。但是，通过实验我发现这会导致至少 2 度的误差。我怀疑这是由于 Kinect 上的镜头失真造成的。但我不知道如何补偿/标准化它。

非常感谢任何想法/帮助。

# php - 使用 Slim 框架演示测试 PHP REST 服务的 Jquery 脚本

> ID：10226411
> 
> 赞同：0
> 
> 时间：2012-04-19T10:46:05.133
> 
> 标签：php, jquery, json, slim

我使用 Slim PHP 框架创建了一个简单的 REST 服务。您可以检索 JSON 格式的玛雅日历：

示例：[https](https://snap.apigee.com/HUN6NV) ://snap.apigee.com/HUN6NV或

[http://almanac.alwaysdata.net/openalmanac/getMayanCalendar/](http://almanac.alwaysdata.net/openalmanac/getMayanCalendar/)

现在我想用最新的 JQuery 框架来调用它。

我写了一个非常简单的 HTML 助手：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Example!</title>

    <link rel="stylesheet" href="../../css/base.css" type="text/css" media="screen" charset="utf-8"/>

    <script src="http://code.jquery.com/jquery-1.7.2.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="script2.js"></script>
</head>
<body> etc etc.... 
```

我在一个调用此函数的非常简单的 HTML 示例中使用[http://code.jquery.com/jquery-1.7.2.js ：](http://code.jquery.com/jquery-1.7.2.js)

```
$(document).ready(function(){ 
 $.getJSON('http://almanac.alwaysdata.net/openalmanac/getMayanCalendar/',
    function(data) {
      alert('Fetched ' + data.length + ' items!');
    });
}); 
```

但不起作用！我很伤心，我不明白这是什么问题！！

你能帮我...用一个非常简单的代码工作吗？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:42:28.227

我看到的错误只是将 .lenght 与“数据”变量一起使用，这是不合适的，其余的是“按书本”。看到这个工作：

```
$(document).ready(function()
{
    $.getJSON('http://192.168.41.94/Admin/Open/JSON/data.php', '',
        function(data)
        {
            // NOPE: alert('Fetched ' + data.length + ' items!');
            $.each(data, function(key, val) { alert(key + ' is ' + val); });
        }
    );
}); 
```

# unit-testing - 单元测试的过程

> ID：10226412
> 
> 赞同：2
> 
> 时间：2012-04-19T10:46:08.137
> 
> 标签：unit-testing

好的，我知道什么是单元测试，但我在某些项目中使用它，而不是在其他项目中使用它……有些客户不知道它是如何完成的，并遵循一个约定……等等。

所以我在这里问，单元测试过程是如何创建的？我听说并读到，您首先编写测试，然后编写功能并为该功能编写测试，并且还使用代码覆盖率来识别没有对尚未覆盖的代码进行测试的任何“失误”。

所以，让我们用一个简单的例子：

要求：“应用程序必须返回 2 个数字组合的结果。”

你我都知道我们会有一个类，比如“Addition”和一个返回整数的方法“Add”，如下所示：

```
public class Addition
{
   public int Add(int num1, int num2)
   {
      return num1 + num2;
   }
} 
```

但即使在写这门课之前，你如何先写测试？你的流程是什么？你做什么工作？当您拥有该规范文档并进入开发阶段时，流程是什么？

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:42:11.370

您所指的过程称为[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)。想法很简单，和你描述的很接近；给定功能，您可以通过为此功能编写测试来开始编写代码。在您的添加示例中，**在**编写任何工作代码之前，您应该有一个简单的测试 - 一个失败的测试。

## 未通过测试

```
[Test]
public void TestAdd()
{
     var testedClass = new Addition();

     var result = testedClass.Add(1, 2);

     Assert.AreEqual(result, 3);
} 
```

这是对您的方法的一个简单测试`.Add`，说明您对即将发布的代码的期望。由于您还没有任何代码，因此该测试自然会失败（正如它应该的那样 - 这很好）。

## 通过测试

下一步是编写使测试通过的最基本的代码（**当然***，最基本的代码是`return 3;`，但对于这个简单的例子，这个级别的细节是不必要的*）：

```
public int Add(int num1, int num2)
{
    return num1 + num2;
} 
```

这有效并且测试通过。您此时所拥有的基本证明，您的方法按照您在假设/期望（测试）中陈述的方式起作用。

但是，您可能会注意到这个测试不是一个好的测试。它只测试许多简单的输入数据。更不用说，在某些情况下，一个测试可能还不够，即使您有最初的需求，测试也可能表明还需要更多（例如参数验证或日志记录）。这是您返回审查需求和编写测试的部分，这导致我们...

## 重构

此时，您应该[重构](http://en.wikipedia.org/wiki/Code_refactoring)刚刚编写的代码。我说**的是**单元测试方法代码和测试实现。由于`Add`方法相当简单，并且在添加两个数字方面没有太多可以改进的地方，因此您可以专注于使测试更好。例如：

*   添加更多测试用例（或考虑数据驱动测试）
*   使测试名称更具描述性
*   改进变量命名
*   将幻数提取为常量

像这样：

```
[TestCase(0, 0, 0)]
[TestCase(1, 2, 3)]
[TestCase(1, 99, 100)]
public void Add_ReturnsSumOfTwoNumbers(int first, int second, int expectedSum)
{
     var testedClass = new Addition();

     var actualSum = testedClass.Add(first, second);

     Assert.That(actualSum, Is.EqualTo(expectedSum));
} 
```

重构是值得一书的主题（而且有很多），所以我不会详细介绍。我们刚刚经历的过程通常被称为***Red-Green-Refactor***（红色表示测试失败，绿色 - 通过），它是 TDD 的一部分。请记住再次重新运行测试，以确保重构不会意外破坏任何内容。

这就是基本循环的方式。您从需求开始，为其编写失败的测试，编写代码以使测试通过，重构**代码和测试**，审查需求，继续下一个任务。

## 然后去哪儿？

一旦您了解了 TDD 背后的想法（即使从本文中提供的如此简短的解释中），很少有有用的资源可以很好地自然跟进：

*   [示例测试驱动开发-](https://rads.stackoverflow.com/amzn/click/com/0321146530) [Kent Beck](http://en.wikipedia.org/wiki/Kent_Beck)本人介绍 TDD
*   [Microsoft.NET 中的测试驱动开发](https://rads.stackoverflow.com/amzn/click/com/0735619484)——这本书是很好的演练，特别是如果您是 TDD 新手。它很好地解释了概念，并包含使用 TDD 进行应用程序开发的综合示例（包括数据访问、Web 服务等）
*   [Roy Osherove 的 TDD Kata](http://osherove.com/tdd-kata-1/) - 包含人们使用 TDD 开发简单计算器 API 的视频；许多不同的语言，许多不同的框架（绝对值得一看）

# html - 在 HTML 中，是否可以插入自动换行提示？

> ID：10226416
> 
> 赞同：31
> 
> 时间：2012-04-19T10:46:29.230
> 
> 标签：html, word-wrap, soft-hyphen, wbr

想象一下，我在 DIV 中有一个长的、多字的文本行：

> 您好，亲爱的顾客。请查看我们的报价。

DIV 具有动态宽度。我想把上面的文字换行。目前，换行发生在最大化第一行长度的单词边界上：

```
|-DIV WIDTH------------------------------------|
Hello there, dear customer. Please have a look
at our offer. 
```

我希望包装发生在句子边界上。但是，如果不需要包装，我希望这条线保持原样。

为了说明我的观点，请查看各种 DIV 宽度以及我希望我的文本如何换行：

```
|-DIV WIDTH--------------------------------------------------------|
Hello there, dear customer. Please have a look at our offer.
|-DIV WIDTH-----------------------------------|
Hello there, dear customer. 
Please have a look at our offer.
|-DIV WIDTH--------|
Hello there, dear 
customer. 
Please have a look
at our offer. 
```

对于单词，您可以使用软连字符，以便在建议的音节边界上自动换行。如果不需要包装，则`&shy;`仍然是不可见的。如果需要包装，那`&shy;`就是它发生的地方：

```
magnifi&shy;cently 
```

是否有类似的方法来提示 HTML 中的自动换行？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-19T10:54:31.810

`&shy;`在单词中或单词之间使用[`<wbr>`](https://developer.mozilla.org/en/HTML/Element/wbr)，因为`<wbr>`不会引入连字符。

也可以看看：

*   [quirksmode：`<wbr>`兼容列表](http://www.quirksmode.org/oddsandends/wbr.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-19T10:54:00.047

不完全准确，但很接近：http: [//jsfiddle.net/uW4h8/1/](http://jsfiddle.net/uW4h8/1/)。

简而言之，您应该`white-space: nowrap;`为您设置文本容器并`<wbr>`根据需要在单词之间插入中断。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-04T22:41:55.583

这些元素经常起作用，但并非总是如此`<wbr>`。`&nbsp;`当设计一个静态登录页面时，它们尤其成问题，该页面 (a) 必须在各种屏幕和浏览器上工作，并且 (b) 必须看起来不错。

在这种情况下，我想控制各种不同屏幕分辨率的换行提示。为此，我使用`<br>`标签和 css。如果它变得复杂，它可能会变得一团糟，但我发现它在一定程度上起作用。例如：

```
<p class='break-hints'>
Hello there, dear customer. <br class='break-big'>
Please have a look <br class='break-small'> at our offer.
</p> 
```

然后，我将 CSS 与媒体查询一起使用，以指示何时应触发各种中断。

```
p.break-hints br {
  display: none;
}

@media only screen and (max-width: 300px) { 
  p.break-hints br.break-small {
    display: inline;
  }
}

p.break-hints br.break-big {
  display: inline;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-19T12:58:39.900

当不允许换行时，在单词之间使用不间断空格 U+00A0（或者`&nbsp;`如果您没有方便的方式输入字符），否则使用普通空格。

当单词包含连字符“-”时，这将不起作用，并且一些其他字符（例如括号）也可能导致问题，因为某些浏览器将它们视为允许在它们之后换行。请参阅[http://www.cs.tut.fi/~jkorpela/html/nobr.html](http://www.cs.tut.fi/~jkorpela/html/nobr.html)以获得冗长的论文，包括应对问题的各种技术。但是，如果您的单词只有正常的标点符号而没有连字符，那么简单的方法应该没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-10T14:48:18.907

我只是有同样的问题。我有如下文字：

```
<div>Assistant Something / Anything Pabulum Nautical</div> 
```

在`/`字符之后打破它真的有助于可读性。

`inline flow-root`就我而言，我通过用 inline-block （现在显然）元素包装所需的“较低的换行优先级”块来解决它：

```
<div><span class="inline">Assistant Something</span> / <span class="inline">Anything Pabulum Nautical</span></div> 
```

结果见片段。

```
.d {
  margin: 1em;
}

#b span {
  display: inline-block;
}
```

```
<div class="d" id="a">Assistant Something / Anything Pabulum Nautical</div>

<div class="d" id="b"><span>Assistant Something</span> / <span>Anything Pabulum Nautical</span></div>
```

# image - 缩略图淡入淡出随机

> ID：10226419
> 
> 赞同：0
> 
> 时间：2012-04-19T10:46:42.887
> 
> 标签：image, for-loop, opacity, fade

我是新来的，面临困难。

这是我的问题：

我想像下面的链接一样随机加载多个图像。

[http://priyasriartgallery.com/_test/index.html](http://priyasriartgallery.com/_test/index.html)

加载所有图像缩略图后应保持淡化。如果你看到有图像不透明度是 50%。它应该是 100% 的不透明度，但是是随机的。

任何人都可以制作更好的代码？

感谢所有大师。

/* 下面是我的代码 */

// JQuery Init* ***** ** *** ** *** ** *** ** *** *****

$(文档).ready(函数(){

```
 $(".box").hide();

   var speed = 10; //speed in ms

    $(window).load(function() {

        timer= setInterval(function fadeInDiv(){

             $notLoaded = $(".box").not(".loaded");
             $notLoaded.eq(Math.floor(Math.random()*$notLoaded.length))

                    .fadeIn()
                    .addClass("loaded");

             if ($notLoaded.length == 0) {

                setTimeout(function(){
                $notLoaded.eq(Math.floor(Math.random()*$notLoaded.length))
                $('.box > p > img').fadeTo("slow", 1).delay(10000).fadeTo("slow", 0.5)
                $('.box > img').fadeTo("slow", 0.5).delay(2000).fadeTo("slow", 1)

                });

             }

       }

        , speed);

        }); 

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:03:36.117

随机选择图像以“rand_img_X”格式添加一个类并获取/设置不透明度 css 属性.. 属性不透明度采用浮点值 0.5 是您的 50%

# javascript - 带有主题选项的纯 HTML 网站

> ID：10226422
> 
> 赞同：1
> 
> 时间：2012-04-19T10:46:58.877
> 
> 标签：javascript, jquery, html, css, themes

我正在创建一个应该有多个主题的纯 html（无服务器端代码）网站，

其中用户可以选择/更改主题以查看网站。

您能否提出一些有关如何执行此操作的概念，或者至少为我指出一些有用的文章。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:48:40.660

最常见的方法是使用不同的外部 CSS 样式表，这些样式表将根据所选主题进行切换。您还需要明智地构建 DOM，以允许主题提供不同的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:03:59.310

可能有点矫枉过正......但这是我使用 Google Font API 和我不久前编写的[Document Fragment Builder脚本提出的字体选择器示例。](http://rlemon.github.com/FragBuilder.js/)

```
var FragBuilder = (function() {
    var applyStyles = function(element, style_object) {
        for (var prop in style_object) {
            element.style[prop] = style_object[prop];
        }
    };
    var generateFragmentFromJSON = function(json) {
        var tree = document.createDocumentFragment();
        json.forEach(function(obj) {
            if (!('tagName' in obj) && 'textContent' in obj) {
                tree.appendChild(document.createTextNode(obj['textContent']));
            } else if ('tagName' in obj) {
                var el = document.createElement(obj.tagName);
                delete obj.tagName;
                for (part in obj) {
                    var val = obj[part];
                    switch (part) {
                    case ('textContent'):
                        el.appendChild(document.createTextNode(val));
                        break;
                    case ('style'):
                        applyStyles(el, val);
                        break;
                    case ('childNodes'):
                        el.appendChild(generateFragmentFromJSON(val));
                        break;
                    default:
                        if (part in el) {
                            el[part] = val;
                        }
                        break;
                    }
                }
                tree.appendChild(el);
            } else {
                throw "Error: Malformed JSON Fragment";
            }
        });
        return tree;
    };
    var generateFragmentFromString = function(HTMLstring) {
        var div = document.createElement("div"),
            tree = document.createDocumentFragment();
        div.innerHTML = HTMLstring;
        while (div.hasChildNodes()) {
            tree.appendChild(div.firstChild);
        }
        return tree;
    };
    return function(fragment) {
        if (typeof fragment === 'string') {
            return generateFragmentFromString(fragment);
        } else {
            return generateFragmentFromJSON(fragment);
        }
    };
}());

function jsonp(url) {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;
    document.getElementsByTagName('body')[0].appendChild(script);
}

function replacestyle(url) {
    if (!document.getElementById('style_tag')) {
        var style_tag = document.createElement('link');
        style_tag.rel = 'stylesheet';
        style_tag.id = 'style_tag';
        style_tag.type = 'text/css';
        document.getElementsByTagName('head')[0].appendChild(style_tag);
        replacestyle(url);
    }
    document.getElementById('style_tag').href = url;
}

function loadFonts(json) {
    var select_frag = [
        {
        'tagName': 'select',
        'id': 'font-selection',
        'childNodes': [
            {
            'tagName': 'option',
            'value': 'default',
            'textContent': 'Default'}
        ]}
    ];
    json['items'].forEach(function(item) {
        var family_name = item.family,
            value = family_name.replace(/ /g, '+');

        if (item.variants.length > 0) {
            item.variants.forEach(function(variant) {
                value += ':' + variant;
            });
        }

        select_frag[0].childNodes.push({
            'tagName': 'option',
            'value': value,
            'textContent': family_name
        });
    });

    document.getElementById('container').appendChild(FragBuilder(select_frag));
    document.getElementById('font-selection').onchange = function(e) {
        var font = this.options[this.selectedIndex].value,
            name = this.options[this.selectedIndex].textContent;
        if (font === 'default') {
            document.getElementById('sink').style.fontFamily = 'inherit';
        } else {
            document.getElementById('sink').style.fontFamily = name;
            replacestyle('https://fonts.googleapis.com/css?family=' + font);
        }
    };
}

jsonp("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDBzzPRqWl2eU_pBMDr_8mo1TbJgDkgst4&sort=trending&callback=loadFonts");​ 
```

这是[厨房水槽](http://jsfiddle.net/rlemon/ENpWt/)示例...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:52:22.737

您可以使用 jQuery 样式切换器。查看下面的链接，其中还包含有关如何操作的分步教程：

[http://www.net-kit.com/10-practical-jquery-style-switchers/](http://www.net-kit.com/10-practical-jquery-style-switchers/)

这里还有一篇关于如何做到这一点的文章：

[http://net.tutsplus.com/tutorials/javascript-ajax/jquery-style-switcher/](http://net.tutsplus.com/tutorials/javascript-ajax/jquery-style-switcher/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:39:17.830

Cudos 已经回答了这个问题，但无论如何我都会发布这个。

您可以修改 Cudos 发布的本教程 (http://net.tutsplus.com/tutorials/javascript-ajax/jquery-style-switcher/)，使其仅包含对`index.php`文件进行这些修改的客户端代码。

删除 PHP 块并添加此功能。

```
<script language="javascript" type="text/javascript">
  function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');

  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
 return null;
}

var js_style = readCookie(style);
</script> 
```

并用这个替换 PHP 样式切换器。

```
<script language="javascript" type="text/javascript">
  if (typeof js_style == 'undefined') { js_style = 'day'; }
  document.write('<link id="stylesheet" type="text/css" href="css/' + js_style + '.css" rel="stylesheet" />');
</script> 
```

为我工作...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T12:52:04.630

正如 Alexander Pavlov 在他的回答中所写，使用不同的外部样式表。为了使用户能够持久地选择一个主题（即，当移动到站点的另一个页面或第二天返回站点时保留该主题），请使用 HTTP cookie 或 HTML5 样式的 localStorage。它们允许您将信息本地存储在用户的计算机中，而无需任何服务器端代码。

关于 localStorage（也称为 HTML 存储或 Web 存储）的教程很多，很难找到任何特定的。它们比 cookie 更灵活，可以用来存储大量数据，甚至是用户定制的样式表。localStorage 的主要问题是缺乏对 IE 7 及更早版本的支持。您可能会认为使用它们的人不会获得可定制性。或者，您可以使用 cookier、userData (IE)、dojox.storage 或其他工具在古董浏览器上模拟 localStorage。

# c# - 注册两个 FreeDrag 手势

> ID：10226432
> 
> 赞同：1
> 
> 时间：2012-04-19T10:47:50.040
> 
> 标签：c#, windows-phone-7, xna, gestures

你怎么能同时读两个手势。我目前正在开发一个游戏，其中两个玩家应该使用 FreeDrag 手势。

现在发生的事情是：

当玩家 A 开始时，他正在拖动它完美地工作。如果玩家 B 也开始了它的 FreeDrag 手势，`TouchPanel.ReadGesture();`则在玩家 A 的手势完成之前不会注册它。

我使用以下代码：

在`Initialize()`

`TouchPanel.EnabledGestures = GestureType.FreeDrag;`

在`Update()`

```
if (TouchPanel.IsGestureAvailable)
{
    GestureSample touch = TouchPanel.ReadGesture();

    if (touch.GestureType == GestureType.FreeDrag)
    {
        if (touch.Position.Y > GraphicsDevice.Viewport.Height/2)
        {
            //logic Player A here
        }
        else
        {
            //logic Player B there
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:55:16.917

您在 MSDN 文档中有一个示例：

[http://msdn.microsoft.com/en-us/library/ff827740.aspx](http://msdn.microsoft.com/en-us/library/ff827740.aspx)

```
// get any gestures that are ready.
while (TouchPanel.IsGestureAvailable)
{
    GestureSample gs = TouchPanel.ReadGesture();
    switch (gs.GestureType)
    {
        case GestureType.VerticalDrag:
            // move the poem screen vertically by the drag delta
            // amount.
            poem.offset.Y -= gs.Delta.Y;
            break;

        case GestureType.Flick:
            // add velocity to the poem screen (only interested in
            // changes to Y velocity).
            poem.velocity.Y += gs.Delta.Y;
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T02:11:56.997

你不能，`FreeDrag`不是多点触控手势，你应该尝试使用`TouchLocation`它`TouchCollection`可以让你检测到多点触控。不幸的是，你不能使用你在`TouchPanel.EnabledGestures`.

# oracle - Toad for Oracle：使用脚本调试器调试匿名块

> ID：10226435
> 
> 赞同：0
> 
> 时间：2012-04-19T10:48:14.033
> 
> 标签：oracle, plsql, toad

它根本行不通。我无法设置断点并且 SHIFT + F7 运行到最后。

是否可以调试它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:05:10.170

我怀疑这类似于 PL/SQL Developer 中无法在测试窗口中设置断点的问题。如果您深入研究 DBMS_DEBUG，您会发现要设置断点，调用者需要提供命名空间、名称（程序单元的）、所有者、数据库链接 (!) 和行号。因此，似乎未编译到数据库中的代码不能在其上设置断点。我的解决方案是将要调试的匿名块放入一个过程中，然后从测试窗口调用该过程。

分享和享受。

# c# - 绑定不是通过 VS 添加服务参考生成的

> ID：10226438
> 
> 赞同：0
> 
> 时间：2012-04-19T10:48:29.347
> 
> 标签：c#, wcf, service, configuration

我在服务器端有以下绑定。

```
 <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="customBinding1">
          <security authenticationMode="UserNameForCertificate" requireDerivedKeys="true" messageProtectionOrder="SignBeforeEncryptAndEncryptSignature" requireSecurityContextCancellation="false" requireSignatureConfirmation="false">
            <secureConversationBootstrap />
          </security>
          <httpTransport />
        </binding>
      </customBinding>
<wsFederationHttpBinding>
        <binding name="FederatedClientProxy"  maxReceivedMessageSize="2147483647" >
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
          <security>
            <message issuedTokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1" negotiateServiceCredential="false">
              <issuer address="http://localhost:16041/MySTS/SecurityTokenService" binding="customBinding" bindingConfiguration="customBinding1">
                <identity>
                  <certificateReference x509FindType="FindBySubjectName" findValue="localhost" />
                </identity>
              </issuer>
            </message>
          </security>
        </binding>
      </wsFederationHttpBinding> 
```

和服务部分如下

```
<service name="MyService.Hello">
        <endpoint binding="wsFederationHttpBinding"
                 bindingConfiguration="FederatedClientProxy"
                 contract="MyService.IHello">
        </endpoint>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/MyService.Hello" />
          </baseAddresses>
        </host>
</service> 
```

当我为上面的配置添加服务引用时，它在 app.config 下面生成，其中不包括 customBinding1

```
<bindings>
                <wsFederationHttpBinding>
                <binding name="WSFederationHttpBinding_IHelloService"
                    closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
                    sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false"
                    hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288"
                    maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <message algorithmSuite="Default" issuedKeyType="SymmetricKey"
                            issuedTokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1"
                            negotiateServiceCredential="false">
                            <issuer address="http://localhost:16041/MySTS/SecurityTokenService">
                                <identity>
                                    <certificate encodedValue="AwAAA" />
                                </identity>
                            </issuer>
                        </message>
                    </security>
                </binding>
            </wsFederationHttpBinding>
</bindings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:14:49.240

它不会生成，因为您的服务中没有端点正在使用该绑定。

顺便提一句。您的自定义绑定还需要一些消息编码元素 - 很可能`textMessageEncoding`为`messageVersion`您的场景设置为适当的 SOAP 版本。

# ios - 无法模态推送包含核心数据数据的 tableView

> ID：10226447
> 
> 赞同：0
> 
> 时间：2012-04-19T10:48:54.093
> 
> 标签：ios, core-data, storyboard, nsmanagedobjectcontext

我设法在 NavigationController 中创建了一个 tableViewController（使用斯坦福大学的 CoreDataTableViewController），并通过 Core-Data 加载数据。用户可以检查一些参数，设置默认值等。它工作得很好，用户还可以将参数保存到数据库等等。

然而，这只是我正在构建的应用程序的一小部分。该应用程序以 TabBar 控制器开始。第一个选项卡包含一个 UIViewController，在这个视图中，我希望能够模态地对包含所有核心数据内容的 tableViewControllers 进行 segue。

我相信我在设置 AppDelegate、managedObjectContext 和其他所有内容时都非常小心。但是，显然我遗漏了一些东西，因为在尝试显示模态视图时出现以下错误：

```
[UINavigationController setManagedObjectContext:]: unrecognized selector sent to instance... 
```

我一直在搜索，这表明 managedObjectContext 没有被传递。

applicationDidFinishLaunching 上的代码是这样的：

```
 UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;

      RotationVC *rotation=[[tabBarController viewControllers] objectAtIndex:0];
      rotation.managedObjectContext=self.managedObjectContext; 
```

并且第一个选项卡中包含的视图上的 prepareForSegue 是这样的：

```
if ([segue.identifier isEqualToString:@"SetCameraFromRotationSegue"])
    {

        CameraMakerTVC *cameraMaker = segue.destinationViewController;
        cameraMaker.managedObjectContext=self.managedObjectContext;

    } 
```

它构建正常并且没有给出错误或警告。

任何人都可以帮我解决这个问题吗？我真的很感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:56:03.557

问题可能出在此处：segue 中的“destinationViewController”不是 CameraMakerTVC（我猜它是表视图控制器），而是包含它的 UINavigationController。因此，当您尝试这样做时：

```
cameraMaker.managedObjectContext=self.managedObjectContext
```

事实上，您不是在尝试在 CameraMakerTVC 控制器上而是在 UINavigationController 上调用 setter。你应该尝试这样做：

```
UINavigationController *nc = segue.destinationViewController;
CameraMakerTVC *cameraMaker = [nc.viewControllers objectAtIndex:0];
cameraMaker.managedObjectContext=self.managedObjectContext; 
```

# php - 使用不可见的 div 检测 IFrame 内部的点击

> ID：10226448
> 
> 赞同：4
> 
> 时间：2012-04-19T10:48:53.807
> 
> 标签：php, javascript, jquery, iframe

我浏览了这篇文章。 [使用 JavaScript 检测点击进入 iframe](https://stackoverflow.com/questions/2381336/detect-click-into-iframe-using-javascript)

但是，我仍然看到人们做过类似的事情。请告诉我该怎么做。

一位开发人员告诉我：

> 您可以在 IFRAME 顶部放置一个透明的 DIV。您将该 DIV 调整为与 IFRAME 相同或更大的大小。并具有更高的 z-index CSS 属性。
> 
> 然后，当您单击 IFRAME 时，DIV 会收到该事件。
> 
> 但是由于世界并不完美，现在您失去了在 IFRAME 内单击的能力。

但我不太擅长 div 并希望学习如何做到这一点。谢谢

PS 它是关于跨域或外星域 iframe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:57:48.993

如果我明白你在这里问什么：

## *[jsFiddle](http://jsfiddle.net/Y8cVD/)*

```
// PLACE OVERLAY OVER EACH IFRAME
var W=0, H=0, X=0, Y=0;
$(".iframe").each(function(i,el){
   W = $(el).width();
   H = $(el).height();
   X = $(el).position().left;
   Y = $(el).position().top;
   $(this).after('<div class="overlay" />');
    $(this).next('.overlay').css({
        width: W,
        height: H,
        left: X,
        top: Y        
    });
});

// TRACK MOUSE POSITIONS (the overlay will prevent clicks on iframe page)
var mx = 0, my = 0;
$('.overlay').on('mousemove click',function(e){
    mx = e.clientX - $(this).position().left;
    my = e.clientY - $(this).position().top;

    if(e.type==='click'){
        alert('clicked at: X='+mx+' Y='+my)
    }        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:55:23.110

我认为透明 div 不起作用，因为它会捕获所有点击事件，而不是将其传播到 iframe。

因此，我知道跟踪 iframe 上的点击的唯一解决方法是使用 blur 事件。您可以使用[iframeTracker jQuery 插件](https://github.com/finalclap/iframeTracker-jquery)轻松地做到这一点：

```
jQuery(document).ready(function($){
    $('.iframe_wrap iframe').iframeTracker({
        blurCallback: function(){
            // Do something when iframe is clicked (like firing an XHR request)
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:55:55.693

Check out Jquery's .live method.

It can attach an event handler to a selector now and in the future, such as when content is loaded into a div.

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# xml - Openerp 中的 xml 编码

> ID：10226450
> 
> 赞同：0
> 
> 时间：2012-04-19T10:48:58.530
> 
> 标签：xml, openerp

我对 openerp xml 编码有疑问。以下功能是否适用于 openerp6.0 中的 onetomany 字段。

```
attrs="{'invisible':[('x_form_type','==','service_bill')]}" 
```

我已经在 account_invoice_view.xml 中添加了这段代码，但没有工作。当我搜索时，我发现有人报告说这不适用于 openerp 5.0 中的 onetomany

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:23:29.320

```
This should Work for o2m field.
Provided that , "x_form_type" field must be there on the defined view.
If you Don't want to display that field , then make it invisible="1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:36:39.603

当然，该功能也适用于 onetomany 领域。

# marmalade - 如何在 Marmalade 中使用带有 EDK 的 UI 组件？

> ID：10226453
> 
> 赞同：0
> 
> 时间：2012-04-19T10:49:19.037
> 
> 标签：marmalade

我需要为 UI 组件扩展 Marmalade。在下面找到我的要求：

我需要在我的 iPad 应用程序中使用 iOS 的 WebView 组件或 TextView 组件。我想知道如何使用 EDK 来实现这一点？我需要在我的应用程序的特定位置显示特定的 UI 组件，还需要检索数据（在 TextView 或 TextField 的情况下）。

让我知道是否可以使用 EDK 实现上述功能。如果可能，请给我相同的步骤和代码模板。

让我知道需要进一步的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T18:10:30.727

在for和for`Marmalade`等中有内置的 UI 组件。您可以查看每个版本的 marmalade SDK 附带的官方文档，了解更多此类 UI 组件。`s3eWebView``WebView``IwUITextView``TextView`

您也可以使用 EDK 代替使用 Objective C (iOS) 或 Java (Android) 的 iOS 或 Android 原生 UI 组件。如果你想学习 EDK 的使用，你可以在官方 Marmalade Youtube 频道观看视频[教程](http://www.youtube.com/watch?v=HYYEvGCiwTo&list=PLB9ADC502477E4B44&index=1&feature=plpp_video)。

# javascript - JSF f:ajax onevent 未读取 bean 值

> ID：10226455
> 
> 赞同：1
> 
> 时间：2012-04-19T10:49:36.670
> 
> 标签：javascript, jsf, javabeans

我有一个 AdminBean，它有一个 loggedIn 布尔值，它是在来自 onclick 的查询之后设置的：

```
 <h:commandButton rendered="#{!adminBean.loggedIn}" styleClass="moreButtonAsText" id="adminLoginAsText" value="Login" action="#{adminBean.logIn}">
      <f:ajax render="detailsBox adminForm" execute="@form" onevent="onevent"/>
    </h:commandButton>

  </h:form>
</div>

<script type="text/javascript">
  function onevent(e){
    if(e.status=='success') {
      alert(#{adminBean.loggedIn});
    } 
    if(e.status=='complete') {
      alert(#{adminBean.loggedIn});
    } 
  }
</script> 
```

我需要这个，因为我想根据用户是否成功登录来做不同的 javascript 事情。首先单击命令按钮（显然），然后将登录设置为 true。我在我的 AdminBean 类中有这个明确的：

```
public boolean isLoggedIn() {
    System.out.println(loggedIn);
    return loggedIn;
} 
```

最初我将 onevent 全部嵌套为 like `onevent="#{adminBean.loggedIn} ? yesFunction : noFunction`，但这不起作用。所以我四处阅读，发现 [http://fyhao.com/2010/05/computer-and-it/java/java-server-faces/jsf-2-fajax-why-execute-onevent-three-times/](http://fyhao.com/2010/05/computer-and-it/java/java-server-faces/jsf-2-fajax-why-execute-onevent-three-times/) 所以我决定将其拆分为内联函数，但这仍然不起作用。
然后我决定继续我上面发布的内容，除了关于 JavaScript 认为值是什么的明确警告声明（以及我的打印行，看看他们是否同意......）

Java 控制台通过第一个警报（即`e.status=='complete'`），首先打印出很多错误，然后打印出很多正确。
JavaScript 警报错误。

然后我清除控制台并在警报上单击确定。控制台然后打印*nothing*，并调用第二个警报，仍然是错误的。所以我的 JavaScript 失败了。

现在我注意到另一件奇怪的事情...... AdminBean 是会话范围的。当我再次在地址栏中按 Enter 键时，无论我做什么，JavaScript 都会警告 true... 即使渲染仍然正常工作（即使 JavaScript 警告，也不会显示仅应在登录时渲染的内容`true`）。

到底他妈发生了什么？

如果您需要更多信息/代码，请询问。

**编辑＃1：**

上面说我试过了`onevent="#{adminBean.loggedIn} ? yesFunction : noFunction`，我也试过了`onevent="#{adminBean.loggedIn} ? yesFunction : noFunction`。我意识到我可能在这些函数上缺少引号/撇号，但在解决该问题之前，我想修复 adminBean.loggedIn 问题。

**编辑#2：**

查看所选答案；我正在研究这个解决方案，然后答案基本上证实了我的结果。

```
<h:form id="javascriptHack">
  <h:form id="hiddenJS" rendered="#{adminBean.loggedIn}" >
    <script type="text/javascript">
      $(function() {
        (#{adminBean.loggedIn}) ? slowCloseAdminPanel() : adminPanelLeftOpen();
      });
    </script>
  </h:form>
</h:form> 
```

这可能是一种骇人听闻的方式，但它确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:19:04.393

这是因为您的 ajax 请求不会更新脚本。它仍将保持初始值。你可以把脚本放在里面`<h:form>`。这应该有效。

# java - PrimeFaces 3.0 和/或 jsf 2.0 是否支持 SDK 1.4？

> ID：10226460
> 
> 赞同：0
> 
> 时间：2012-04-19T10:49:46.393
> 
> 标签：java, jsf, primefaces

你们能告诉我 primefaces 3.0 和/或 jsf 2.0 是否支持 JDK 1.4 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:03:50.803

从 Primefaces 3.0 文档：

> PrimeFaces 仅需要 JAVA 5+ 运行时和 JSF 2.x 实现作为强制依赖项。

单独 JSF 2.0 至少需要 Java EE5，JSF 2.1 Java EE6

# nhibernate - 具有隐式事务的休眠二级缓存

> ID：10226461
> 
> 赞同：1
> 
> 时间：2012-04-19T10:49:55.983
> 
> 标签：nhibernate, transactions, second-level-cache

我读到我们不能使用二级缓存，直到我们使用（显式）事务 - 但是，我们使用的是 Informix 系统 - 由于目前我们无法控制的原因；一个会计系统——在我们迁移到 SQL 服务器之前，我们不能使用事务。

二级缓存可以通过缓存不经常更改的数据来极大地提高我们的性能 - 有没有办法将它与隐式事务一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:57:47.767

不，NH 不会在没有事务的情况下使用缓存。但我真的很想知道为什么你不能使用事务，这不仅是 NHibernate 的好习惯，而且对于关系数据库的任何使用都是一个好习惯。

# xml - XSLT 删除一些属性

> ID：10226463
> 
> 赞同：4
> 
> 时间：2012-04-19T10:49:59.657
> 
> 标签：xml, xslt

我有以下 XML 可以在我的 XML 文档中以任何一种形式出现：

`<Message xsi:schemaLocation="http://www.location.com StructureFile.xsd" xmlns=http://www.thenamespace.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">`

或者

`<Message xmlns="http://www.thenamespace.com">`

我需要输出为：

`<Message xmlns="http://www.theNEWnamespace.com">`

我目前有这个模板来处理两种 xml 可能性的较短版本：

```
<xsl:template match="*">
  <xsl:element name="{name()}" namespace="http://www.theNEWnamespace.com">
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates/>
  </xsl:element>
</xsl:template> 
```

但是，如果它们存在，这不会删除 xml 的 SchemeLocation 或 xmlns:xsi 部分。

我将如何调整上述内容以处理这两种可能性。

干杯，

编辑：XML结构：

```
<?xml version="1.0" encoding="utf-8"?>
<Message xsi:schemaLocation="http://www.location.com StructureFile.xsd" xmlns="http://www.thenamespace.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Header>
    <Info></Info>
  </Header>
</Message> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T12:10:51.443

**这是产生所需结果的完整转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="http://www.thenamespace.com">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="x:Message">
  <xsl:element name="{name()}" namespace="http://www.theNEWnamespace.com">
    <xsl:copy-of select="@*[not(name() = 'xsi:SchemaLocation')]"/>
    <xsl:apply-templates/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（未提供！）：

```
<t>
  <Message
  xsi:SchemaLocation="http://www.location.com StructureFile.xsd"
  xmlns="http://www.thenamespace.com"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
</t> 
```

**产生了想要的正确结果：**

```
<Message xmlns="http://www.theNEWnamespace.com"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:16:41.443

首先，在 XSLT/XPath 数据模型中只有`xsi:schemaLocation`是一个属性。如果您根本不想复制该属性或任何属性，那么请不要这样做，`<xsl:copy-of select="@*"/>`因为您明确复制了所有属性。或者，如果您想有选择地指定不复制哪些属性而不是`<xsl:copy-of select="@*"/>`put in `<xsl:apply-templates select="@*"/>`，则编写一个用于复制属性的模板，然后为您不想复制的那些属性编写模板，例如

```
<xsl:template match="@*">
  <xsl:copy/>
</xsl:template>

<xsl:template match="@xsi:schemaLocation"/> 
```

至于`xmlns:xsi`，这是一个命名空间声明，在 XSLT/XPath 数据模型中不是属性。如果您为元素节点所做的只是您显示的模板，那么我看不出应该如何将该命名空间复制到输出。

但是，如果您也在样式表中定义命名空间，那么您需要`exclude-result-prefixes="xsi"`在`xsl:stylesheet`元素上。

# javascript - 画布擦除不起作用

> ID：10226467
> 
> 赞同：0
> 
> 时间：2012-04-19T10:50:15.373
> 
> 标签：javascript, html, canvas

我正在使用画布开发绘图应用程序。我想实现一个擦除功能，但不是一个简单的擦除，它是一支简单的白笔，一个真正的橡胶。

事实上，我在应用程序上添加了一个透明画布，我想，当我绘制时，我可以擦除我绘制的内容，即将 opacity 设置为 0 ！

我已经在 Google 和 stackoverflow 上搜索过，我发现：

代码 : JavaScript - Sélectionner

```
context.globalCompositeOperation = "destination-out"; 
context.strokeStyle = "rgba(0,0,0,0)"; 
```

但它不起作用......同样，我尝试了[MDN](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)`globalCompositeOperation`上显示的不同模式，但没有区别。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:59:42.053

它不起作用，因为您在要擦除的内容上画了一条透明线……所以它什么也不做。

当您有白色背景时，它很容易擦除，您只需绘制白色即可。但这不是你想要的。

这里的技巧是使用 clearRect 删除画布上的内容，而不是在其他形状上绘制。

```
context.clearRect(cursorX, cursorY, brushWidth, brushHeight); 
```

它会显示为小方块，但我看不到另一种方法，除了像素操作。

# java - 从 XSOM 中的 XSElementDecl 检索 minOccurs 和 maxOccurs

> ID：10226472
> 
> 赞同：0
> 
> 时间：2012-04-19T10:50:28.307
> 
> 标签：java, xml, schema, xsom

我已经阅读了关于此事的类似主题：

[使用 XSOM 从元素获取 minOccurs 属性](https://stackoverflow.com/questions/2095294/getting-the-minoccurs-attribute-using-xsom-from-an-element)

但答案似乎有点不理想，尤其是当一个 xsd 文件中有数百个元素时。这真的是唯一的方法吗，还是有更简单的方法？

如果可能的话，我想从 XSElementDecl 中检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:41:26.127

你不能。它不是元素声明的属性，而是元素粒子的属性，它是元素声明和使用它的内容模型之间的关系。

现在，如果元素声明是本地声明，那么它确实只能在一个内容模型中使用，因此声明和粒子是一对一的，并且在 XSD 1.1 中定义的 SCM 中，如果 { variety} 是本地的，那么你可以让 {parent} 找到包含的模型组，然后返回这个模型组的粒子。但是 XSOM 似乎没有反映 {parent} 属性，这并不奇怪，因为它在 XSD 1.0 中不存在，而且似乎也没有任何与 {scope} 属性对应的东西。

因此，API 似乎不允许从 Element 声明导航到使用该声明的粒子。但是，如果不是通过粒子，您是如何找到 Element 声明的呢？

# json - Facebook评论：获得更多喜欢的评论

> ID：10226477
> 
> 赞同：0
> 
> 时间：2012-04-19T10:50:57.923
> 
> 标签：json, facebook, comments, facebook-like

我不会得到页面的最佳评论

1.  *   更像
2.  *   更老

来自：https://graph.facebook.com/comments/?ids=[你的页面]

我得到这个结果：

{“[您的页面]”：{

```
 "comments": {
     "data": [
        {
           "id": "10150129443959608_15887865",
           "from": {
              "name": "Trent Seed",
              "id": "614130500"
           },
           "message": "that house is huge!!",
           "created_time": "2011-04-13T10:00:44+0000"
        },
        {
           "id": "10150129443959608_15902791",
           "from": {
              "name": "Mitch Seed",
              "id": "688036079"
           },
           "message": "wtf this is ridiculous! I cant believe this is actually right by us.",
           "created_time": "2011-04-14T02:17:18+0000",
           "comments": {
              "data": [
                 {
                    "id": "10150155952624608",
                    "from": {
                       "name": "Ethan Ming",
                       "id": "592969356"
                    },
                    "message": "where does all that flat land come from in los altos HILLS? oh i guess that $100 million also went to removing a small mountain too",
                    "created_time": "2011-04-14T02:43:57+0000"
                 },
                 {
                    "id": "10150155954519608",
                    "from": {
                       "name": "Mitch Seed",
                       "id": "688036079"
                    },
                    "message": "yeah haha thats just straight ridiculous i have ran all through los altos hills i dont remember any land like this haha",
                    "created_time": "2011-04-14T02:46:40+0000"
                 },
                 {
                    "id": "10150155969784608",
                    "from": {
                       "name": "Leila Marie",
                       "id": "1044030343"
                    },
                    "message": "jus copied you haha this is crazy",
                    "created_time": "2011-04-14T03:13:07+0000"
                 }
              ],
              "count": 3
           }
        },
        {
           "id": "10150129443959608_15932966",
           "from": {
              "name": "Arthur Lozinski",
              "id": "1044030063"
           },
           "message": "digital sky technologies. remember that name :-D",
           "created_time": "2011-04-15T15:42:23+0000"
        },
        {
           "id": "10150129443959608_15962947",
           "from": {
              "name": "Brian Sator",
              "id": "513517991"
           },
           "message": "I feel like I would get lost in that place.",
           "created_time": "2011-04-17T08:03:24+0000",
           "likes": 1
        },
        {
           "id": "10150129443959608_16282803",
           "from": {
              "name": "Jordan McDaniel",
              "id": "506352386"
           },
           "message": "holy shit",
           "created_time": "2011-05-04T04:29:27+0000",
           "comments": {
              "data": [
                 {
                    "id": "10150172606879608",
                    "from": {
                       "name": "Davey Nicholas",
                       "id": "1346961549"
                    },
                    "message": "\"no plans to move into the mansion\" whos' tryina squat",
                    "created_time": "2011-05-04T04:35:16+0000"
                 }
              ],
              "count": 1
           }
        }
     ],
     "paging": {
        "next": "[link]"
     }
  } 
```

} }

我不会获得 json 文件的最佳信息（或者可能以其他方式？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:17:54.010

试试fql

> SELECT id,text,likes FROM comment WHERE object_id=[page_id] order by likes desc

带图表

> https://graph.facebook.com/fql=SELECT+id,text,likes+FROM+comment+WHERE+object_id=[page_id]+order+by+likes+desc

[查看更多关于 fql](https://developers.facebook.com/docs/reference/fql/comment/)

# dojo - Dojo tabContainer.selectChild 在 IE 中不起作用

> ID：10226490
> 
> 赞同：1
> 
> 时间：2012-04-19T10:51:26.790
> 
> 标签：dojo, tabcontainer

我的**HTML**页面上有类似的内容。

```
 <html>
 <body>
      <div dojoType="dijit.layout.TabContainer" id="allTabContainer" style="width: 1150px; height: 490px" tabPosition="left-h" persist="true">
          <div dojoType="dijit.layout.ContentPane" id="firstTab_id" title="firstTab" >Content 1</div>
          <div dojoType="dijit.layout.ContentPane" id="secondTab_id" title="secondTab" >Content 2</div>
          <div dojoType="dijit.layout.ContentPane" id="thirdTab_id" title="thirdTab" ><jsp:include flush="true" page="thirdTab_page.jsp"></jsp:include></div>
      </div>
 </body>
 </html> 
```

我在***thirdTab_page.jsp***上有 3 个按钮，单击它们会调用下面的**selectTab** javascript 函数。请检查相同的代码。

```
 <html>
    <body>

    <div dojoType="dijit.layout.BorderContainer" style="padding:10px; width: 50%;" id="borderCont">
                                      <button dojoType="dijit.form.Button" type="submit" id="firstTab" onclick="selectTab(this.id);">Tab1</button>
       <button dojoType="dijit.form.Button" type="submit" id="secondTab" onclick="selectTab(this.id);">Tab2</button>
       <button dojoType="dijit.form.Button" type="submit" id="thirdTab" onclick="selectTab(this.id);">Tab3</button>

    </div>
    </body>
    </html> 
```

然后我有这样的**javascript函数**。

```
 <script type="text/javascript"> 
    dojo.require("dijit.layout.TabContainer"); 
    function selectTab(tabId){
    var correctTabId = tabId+"_id";
    dijit.byId("allTabContainer").selectChild(correctTabId);
    }
    </script> 
```

tabContainer.selectChild 似乎在 IE 中不起作用，但在 Firefox 中完美。如果我错过了什么，请提出建议。提前致谢。

# android - Crash In TapJoy Interstitial Ad

> ID：10226491
> 
> 赞同：2
> 
> 时间：2012-04-19T10:51:26.980
> 
> 标签：android, mobclix, tapjoy

When I had integrated TapJoy Interstitial ad it was working fine. But now, I have a mechanism that if Tapjoy fails to gives ad, I rollover to some other ad network like adMob, Mobclix, etc. The problem is that the rolling over mechanism is working fine with all the ad networks, except Tapjoy. In the case of Tapjoy, whenever it is getting failed and rollover is happening to admob, mobclix or Inmobi, the app is crashing. Crash Logs:

```
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
    at android.os.Handler.<init>(Handler.java:121)
    at com.mobclix.android.sdk.MobclixFullScreenAdView$AdResponseHandler.<init>(MobclixFullScreenAdView.java:392)
    at com.mobclix.android.sdk.MobclixFullScreenAdView$AdResponseHandler.<init>(MobclixFullScreenAdView.java:392)
    at com.mobclix.android.sdk.MobclixFullScreenAdView.<init>(MobclixFullScreenAdView.java:104)
    at com.apostek.library.AdLibrary.loadInterstial(AdLibrary.java:1091)
    at com.apostek.library.AdLibrary.rollOverInterstial(AdLibrary.java:1450)
    at com.apostek.library.AdLibrary.access$0(AdLibrary.java:1447)
    at com.apostek.library.AdLibrary$9.getFeaturedAppResponseFailed(AdLibrary.java:1408)
    at com.tapjoy.TapjoyFeaturedApp$1.run(TapjoyFeaturedApp.java:98)
    at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:04:28.560

The Tapjoy `getFeaturedApp()` method is spawning a new thread and it sounds like your adMob library is expected to run on the main thread. Try using [runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29) for your adMob code to run on the main thread.

# scala - Scala Lift - Mongodb 更新多条记录

> ID：10226493
> 
> 赞同：1
> 
> 时间：2012-04-19T10:51:42.143
> 
> 标签：scala, mongodb, lift

我有以下

```
Document.update(

    ("room" -> "test") ~ ("module" -> "item"), 
    ("$set" -> 

        ("active" -> 0)

    )

 ) 
```

但是只更新了一项，如何更新所有匹配的记录？

在此先感谢您的帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:43:08.060

默认情况下，mongo 只更新它找到的第一行，要让它更新多个匹配的行，你需要传递“multi”更新选项。在 scala 中，我相信它看起来像这样：

`Document.update( ("room" -> "test") ~ ("module" -> "item"), ("$set" -> ("active" -> 0)), Multi )`

# android - ICS 中未出现软菜单按钮

> ID：10226498
> 
> 赞同：2
> 
> 时间：2012-04-19T10:51:48.267
> 
> 标签：android

当我使用其硬件“菜单”按钮时，我的活动有一个菜单会在我的模拟器上膨胀，但是当我在我的实际手机（带有 4.0.1 的 Galaxy Nexus）上运行该应用程序时，我无法找到制作“3 点”的方法" 样式菜单按钮的显示方式与某些应用程序中的一样。我实现菜单的方式是：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.wcoptions, menu);
    return (super.onCreateOptionsMenu(menu));
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.ooptions:
        // open preferences activity
        startActivity(new Intent(this, WorkCalcPreferenceActivity.class));
        break;
    case R.id.oquit:
        finish();
        break;

    }
    return super.onOptionsItemSelected(item);
} 
```

同样在我的清单文件中，我将 minSDK 设置为 8，将 targetSDK 设置为 15。这是我的第一个应用程序，我仍在学习如何实现所有这些东西，因此将不胜感激：)

编辑：这里是 menu.wcoptions

```
<item
    android:id="@+id/ooptions"
    android:icon="@drawable/ic_menu_settings"
    android:title="Options"/>
<item
    android:id="@+id/oquit"
    android:icon="@drawable/ic_menu_exit"
    android:title="Quit"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:03:37.413

如果您以 Honeycomb 或更高版本为目标，您将无法获得菜单按钮。菜单按钮仅用于遗留用途，您应该使用操作栏或其他方式来调出菜单。

# c++ - 在编辑器中打开后，Ubuntu Linux 上的 Eclipse 构建错误

> ID：10226503
> 
> 赞同：1
> 
> 时间：2012-04-19T10:52:04.790
> 
> 标签：c++, linux, eclipse, ubuntu, include

我在 Ubuntu 12.04 上的 Eclipse CDT Indigo 版本 20120216-1857 中检查了一个 C++ 项目。当我尝试立即构建或运行它而不打开项目中的任何文件时，它构建得很好并且运行得恰到好处。

但是，当我在编辑器中打开其中一个 .h 或 .cpp 文件时，我会遇到越来越简单的包含错误，例如`Function 'assert' could not be resolved`or `Type 'string' could not be resolved`。

我无法通过禁用自动构建或清理项目来修复这些错误。重新启动 Eclipse 将解决构建问题，但在打开文件后，错误再次出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:37:48.310

添加断言库。会好的

```
#include <assert.h> 
```

# php - 无法使用“foreach”命令加载图库图像

> ID：10226504
> 
> 赞同：5
> 
> 时间：2012-04-19T10:52:07.143
> 
> 标签：php, session-variables

我整理了以下脚本，允许用户在保存的原始文件夹结构中查看他们上传的图像。

**更新代码**

```
 <?php session_start(); 

$_SESSION['username']=$_POST['username'];
$_SESSION['locationid']=$_POST['locationid'];

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<?php 
  //This variable specifies relative path to the folder, where the gallery with uploaded files is located.
  $galleryPath = 'UploadedFiles/' . $_SESSION['username'] . '/' . $_SESSION['locationid'] . '/';

  //let's DEBUG the above assignment 
  if (!is_dir($galleryPath)) { die("No folder exists at $galleryPath!"); } 

  $absGalleryPath = realpath($galleryPath); 

  //let's DEBUG this one too 
  if (!is_dir($absGalleryPath)) { die("No folder exists at $absGalleryPath!"); } 

  $descriptions = new DOMDocument('1.0');

   // DEBUG: let's check for the XML while we're at it 
  //if (!file_exists($absGalleryPath.'files.xml')) { die("No XML found at $absGalleryPath"."files.xml"); } 
  $descriptions->load($absGalleryPath . '/' . 'files.xml'); 

  $items = array();

  for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) {
    $xmlFile = $descriptions->documentElement->childNodes->item($i);
    $path = $xmlFile->getAttribute('name');
    $path = explode('/', $path);

    $t = &$items;
    for ($j = 0; $j < count($path); $j++) {
      if (empty($t[$path[$j]])) {
        $t[$path[$j]] = array();
      }
      $t = &$t[$path[$j]];
    }
    $t['/src/'] = $xmlFile->getAttribute('source');
    $t['description'] = $xmlFile->getAttribute('description');
    $t['size'] = $xmlFile->getAttribute('size');
  }

  $basePath = empty($_GET['path']) ? '' : $_GET['path'];
  if ($basePath) {
    $basePath = explode('/', $basePath);
    for ($j = 0; $j < count($basePath); $j++) {
      $items = &$items[$basePath[$j]];
    }
  }

  $files = array();
  $dirs = array();

  function urlpartencode(&$item, $index) {
    $item = rawurlencode($item);
  }

  foreach ($items as $key => $value) {
    if (isset($value['/src/'])) {
      $value['/src/'] = explode('/', $value['/src/']);
      array_walk($value['/src/'], 'urlpartencode');
      $value['/src/'] = implode('/', $value['/src/']);
      $files[] = array(
        'name' => $key,
        'src' => $value['/src/'],
        'description' => htmlentities($value['description'], ENT_COMPAT, 'UTF-8'),
        'size' => htmlentities($value['size'], ENT_COMPAT, 'UTF-8')
      ); 
    } else {
      $dirs[] = $key;
    }
  }

  $basePath = empty($_GET['path']) ? '' : $_GET['path'];
  $up = dirname($basePath);
  if ($up == '.') {
    $up = '';
  }

  sort($files);
  sort($dirs);
?>
<head>
  <title>View Image Folders</title> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link href="Styles/style.css" rel="stylesheet" type="text/css" />
  <script src="Libraries/jquery/jquery-1.4.3.min.js" type="text/javascript"></script>
   <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-top: 5px;
    margin-right: -50px;
}

-->
  </style>
<body style="font-family: Calibri; color:  #505050; margin-right: 160px; margin-left: -180px;">
<div align="right" class="style1"> <a href = "index.php" /> Add Images <a/> &rarr; <a href = "javascript:document.imagefolders.submit()"> View All Images </a> </div>
<form id="imagefolders" name="imagefolders" class="page" action="gallery.php" method="post" enctype="application/x-www-form-urlencoded">  
   <div id="container">
  </div>
    <div id="center">
      <div class="aB">
        <div class="aB-B">
          <?php if ('Uploaded files' != $current['title']) :?>
          <?php endif;?>
          <div class="demo">
          <input name="username" type="hidden" id="username" value="IRHM73" />
          <input name="locationid" type="hidden" id="locationid" value="1" /> 
            <div class="inner">
              <div class="container">
                <div class="gallery">
                  <table class="gallery-link-table" cellpadding="0" cellspacing="0">
                    <thead>
                      <tr class="head">
                        <th class="col-name">
                          Name
                        </th>
                        <th class="col-size">
                          Size
                        </th>
                        <th class="col-description">
                          Description
                        </th>
                      </tr>
                    </thead>

                    <tbody>
                      <tr class="directory odd">
                        <td class="col-name">
                          <a href="?path=<?php echo rawurlencode($up); ?>">..</a>
                        </td>
                        <td class="col-size">
                        </td>
                        <td class="col-description">
                        </td>
                      </tr>
                      <?php $i = 1; ?>

                      <?php foreach ($dirs as $dir) : ?>
                      <tr class="directory <?php $i++; echo ($i % 2 == 0 ? 'even' : 'odd'); ?>">
                        <td><a href="?path=<?php echo rawurlencode(($basePath ? $basePath . '/' : '') . $dir); ?>"><?php echo htmlentities($dir, ENT_COMPAT, 'UTF-8'); ?></a></td>
                        <td>Folder</td>
                        <td></td>
                      </tr>
                      <?php endforeach; ?>

                      <?php foreach ($files as $file) : ?>
                      <tr class="<?php $i++; echo ($i % 2 == 0 ? 'even' : 'odd'); ?>">
                        <td><a target="_blank" href="<?php echo $galleryPath . $file['src']; ?>"><?php echo htmlentities($file['name'], ENT_COMPAT, 'UTF-8'); ?></a></td>
                        <td><?php echo htmlentities($file['size'], ENT_COMPAT, 'UTF-8'); ?></td>
                        <td><?php echo htmlentities($file['description'], ENT_COMPAT, 'UTF-8'); ?></td>
                      </tr>
                      <?php endforeach; ?>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>
        </div>
      </div>
    </div>
</form>
</body>
</html> 
```

我可以正确显示文件夹，但是当我单击文件夹以深入查看单个图像时，我收到以下错误：

`Warning: DOMDocument::load() [domdocument.load]: I/O warning : failed to load external entity "/homepages/2/d333603417/htdocs/development/UploadedFiles/files.xml" in /homepages/2/d333603417/htdocs/development/imagefolders.php on line 25 Warning: Invalid argument supplied for foreach() in /homepages/2/d333603417/htdocs/development/imagefolders.php on line 65`

第 25 行是这一行`$descriptions->load($absGalleryPath . '/' . 'files.xml'); and line 65 is this:`foreach ($items as $key => $value) {`

我的初始脚本没有使用会话变量，也没有任何问题。但是我现在需要包括这些，所以我确信这些和`foreach`命令之间存在冲突。我做了很多研究，看看其他人是否有类似的问题，但找不到任何东西。

我只是想知道是否有人可以看到这个并让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:53:41.077

## 错误 1

```
Warning: DOMDocument::load() [domdocument.load]: I/O warning : failed to load external entity "/homepages/2/d333603417/htdocs/development/UploadedFiles/files.xml" 
```

问题的根源是`$descriptions->load($absGalleryPath . '/' . 'files.xml');`

尝试加载不确定文件是否存在或可读的文件是不好的做法

像这样的东西更好，并确保你捕捉到异常

```
$file = $absGalleryPath . '/' . 'files.xml' ;
if(!is_readable($file) || !file_exists($file))
{
 throw new Exception("Missing XML File");
} 
```

## 错误 2

```
Warning: Invalid argument supplied for foreach() in /homepages/2/d333603417/htdocs/development/imagefolders.php on line 65 
```

A. 由于您无法加载第一个`xml`文档...尝试继续该过程会导致此错误

B.`foreach ($items as $key => $value) {`所以它会在有无填充的地方独立运行

C. 引用过多会使您的代码更难理解和调试...

## 结论

我认为您应该发布内容，`files.xml` 您会惊讶于人们会想出创新的解决方案和有效的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:23:44.347

我想`Invalid argument supplied for foreach()`是关于你的`foreach ($items as $key => $value)`。所以放在`var_dump($items);`那个 foreach 之前可以看到`items`变量的完整转储。似乎它甚至不是一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T03:27:31.757

1.  你的 foreach 循环没有像你愿意做的那样得到正确的`var_dump`数据。请用来检查你得到的数据。
2.  查看您的`XML`.

# javascript - Javascript - 打开链接

> ID：10226507
> 
> 赞同：1
> 
> 时间：2012-04-19T10:52:10.040
> 
> 标签：javascript, html, hyperlink, href

我的 Javascript 没有达到标准，并且我在使链接在同一个窗口中打开而不是在新的弹出窗口中打开时遇到了问题。

在我的 html 中，我有以下链接

```
<a href="javascript:go_registerParamList('<%=appendStr%>');">Open An Account</a> 
```

'go_registerParamList' 的 Javascript 是：

```
function go_registerParamList(paramList) {
    if (self.opener == null) {
        var base_window = self;
    } else {
        var base_window = self.opener;
    }
    if (paramList == '') {
        var link = 'https://${accountUrl}?action=go_register_popup&area=SK&button=openregbutton&promo=new_regbutton_en&crea=img&bus_channel=SK';
    } else {
        var link = 'https://${accountUrl}?action=go_register_popup&area=SK&button=openregbutton&promo=new_regbutton_en&crea=img' + '&' + paramList;
    }

    base_window.open(link, "pp_registration", "width=642, height=620, scrollbars=no,  menubar=no, status=no, scrollbars=no, resizable=yes,screenX=5, screenY=5, left=5, top=5");
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:54:31.407

JavaScript 函数：

```
function openInSameWindow(evt) {
    window.location=evt;
} 
```

在同一窗口中打开的 HTML 超链接：

```
<a onclick="openInSameWindow('http://google.com')">Click to open in same window</a> 
```

您可以调用该函数`openInSameWindow`在同一窗口中打开链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:56:14.977

该`.open()`方法打开一个新窗口。

相反，您可以这样做：

```
window.location = link; 
```

所以：

```
function go_registerParamList(paramList)
{
    var link;
    if(paramList == '')
    {
        link = 'https://${accountUrl}?action=go_register_popup&area=SK&button=openregbutton&promo=new_regbutton_en&crea=img&bus_channel=SK';
    }
    else
    {
        link = 'https://${accountUrl}?action=go_register_popup&area=SK&button=openregbutton&promo=new_regbutton_en&crea=img&' + paramList;
    }
    window.location = link; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:56:34.203

使用 window.open(URL,name,specs,replace) 名称作为“_self”

```
 window.open(link, "_self" , "width=642, height=620, scrollbars=no,  menubar=no, status=no, scrollbars=no, resizable=yes,screenX=5, screenY=5, left=5, top=5"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T10:59:41.300

您可以使用 将新文档加载到当前窗口中`window.location.assign(link)`。

见[http://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T11:01:10.720

```
Before you call the base_window.open() method try to alert the link variable. If its 
okay then you may not have problem with that.

Thanks. 
```

# c++ - 用于 std::reverse() 的 C++11 便利包装器

> ID：10226508
> 
> 赞同：1
> 
> 时间：2012-04-19T10:52:10.147
> 
> 标签：c++, algorithm, stl, c++11, wrapper

这是使用 C++11 右值引用和移动语义来实现便利包装的正确方法`std::reverse()`吗？

```
template <class BIDirContainer> inline BIDirContainer&& reverse(BIDirContainer a) {
    std::reverse(begin(a), end(a));
    return std::move(a); 
} 
```

该代码在我的测试用例中有效，但我不确定它的性能：我应该`&&`在这里使用还是不必要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T12:17:06.107

如果您通过（右值）引用返回，那么您将获得一个悬空引用，因为`a`它是一个本地对象。按值返回，一切都应该“正常工作”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:21:30.243

我想说正确的方法是从你的函数中按值返回：

```
template <class BIDirContainer> inline BIDirContainer reverse(BIDirContainer a) {
    std::reverse(begin(a), end(a));
    return a; 
} 
```

如果没有，则给出`BIDirContainer`一个*移动构造函数。*那么这种表达方式：

```
BIDirContainer x = ...;
BIDirContainer backwards{reverse(x)}; 
```

应该将临时函数`a`中的内容移动到.`reverse``backwards`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:31:02.650

所以如果要修改参数...

```
template <class BIDirContainer>
inline BIDirContainer& reverse(BIDirContainer& a)
{
    std::reverse(begin(a), end(a));
    return a;
} 
```

如果要制作反向副本，则：

```
template <class BIDirContainer>
inline BIDirContainer reverse(BIDirContainer a)
{
    std::reverse(begin(a), end(a));
    return a;
} 
```

函数的返回值已经是一个右值（特别是“xvalue”）。如果将它传递给具有移动语义的函数，它将被移动 - 但是由于`result`上面的命名返回值优化 (NRVO) 甚至可以就地构造（比移动语义更好）。

# android - 无法验证 google api 密钥-仅显示网格-android

> ID：10226510
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:52:13.867
> 
> 标签：android, google-maps

我想使用googleAPI。我尝试了以下方法： 1）我使用 keytool 和 debug.keystore 生成了一个 googleAPI 密钥。2) 我还使用 Myactivity.keystore 生成了另一个密钥。

按照这些说明，从 fere 和其他位置：您必须执行以下操作才能使其正常工作：

您必须生成应用程序调试密钥的 MD5 散列 您必须在注册地图密钥时向 Google 提供该 MD5 散列，然后 Google 将为您提供一个可以放入 mapview 的密钥 这将按以下步骤工作：

```
Locate the android debug key in your system. it is found on the following locations depending on your operating system (This path will be useful):
Windows XP: C:\Documents and Settings\<user>\.android\debug.keystore
Mac OS X and Linux : ~/.android/debug.keystore (where ~ is the path of your home directory.
In a terminal, use the following keytool command to generate the MD5 Hash:
keytool -list -alias androiddebugkey -keystore <path_to_debug_keystore>.keystore -storepass android -keypass android
Copy the generated hash
Go to : code.google. com/android/maps-api-signup.html (you maybe required to login with your Google account)
Paste the above generated MD5 hash there, accept the Terms and Conditions and click on Generate button
You'll get the API key for your map. paste this in your
When you plan to release the app, generate a release key and repeat the same procedure with the release keys.

Although, all the above steps are exactly what the links contain, but this is a summary. 
```

我已经尝试过它们，但它们似乎都不起作用。我在我得到的 logcat 中只看到网格蚂蚁，`Couldn't get connection factory client`并且通过我所做的所有搜索，这是我的 api 密钥的问题。我怎么知道我的 api 密钥是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:03:14.283

试试这个以获得正确的 API 密钥：-

那是确切的路径——

```
keytool -list -keystore "C:\Users\XYZ\.android\debug.keystore" 
```

cmd 提示获取 GoogleMap API 密钥的 MD5 指纹的总路径* ******

```
D:\eclipse\jre\bin>keytool -list -keystore "C:\Users\XYZ\.android\debug.keystore" 
```

MD5 指纹将如下所示——

```
3E:F4:D6:E6:93:4D:BB:B8:62:3A:A6:0F:E0:FC:4C:65 
```

当您获得指纹号码之后获取 API 密钥时，请使用此链接---

```
http://code.google.com/android/add-ons/google-apis/maps-api-signup.html 
```

然后您将获得您系统的 API 密钥，并可以轻松获取 Map....

# windows-phone-7 - 允许在 Windows Phone 中录制固定长度的视频

> ID：10226511
> 
> 赞同：0
> 
> 时间：2012-04-19T10:52:14.990
> 
> 标签：windows-phone-7, video-capture

我想允许用户在 Windows Phone 7 中录制固定长度的视频。

例如，当用户录制视频时，如果录制时间超过 3 分钟。它应该会弹出一条消息并停止录制。

所以我的问题是如何检查视频长度（时间）。

我想我会创建一个计时器来计算/检查用户启动视频时的经过时间。如果经过的时间超过了录制限制，则以编程方式停止录制。

如果有人有更好的想法，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:20:59.213

拥有自己的计时器来跟踪记录的时间是这里的**最佳**解决方案，因为您不想不断地读取文件长度并执行媒体结构操作来确定长度。

# javascript - Android 和 iPhone 拖动（touchmove、sweep）

> ID：10226519
> 
> 赞同：0
> 
> 时间：2012-04-19T10:52:27.867
> 
> 标签：javascript, android, iphone, ios, mobile

我正在为 Android 和 iOS 开发 HTML5 应用程序。我所需要的只是通过向右扫来滑动​​隐藏菜单并用左扫将其隐藏起来。

我可以为动画使用 CSS3 过渡，所以我正在寻找的是非常简单的框架，它提供了 javascript 事件或者如果有人有经验。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:09:27.563

如果您在任何意义上都熟悉 jQuery，那么[zepto.js](http://zeptojs.com/)就足以解决您的问题（并且是轻量级的）。

# php - 我们如何通过 facebook Api 使用 sendRequestViaMultiFriendSelector 限制发送请求

> ID：10226527
> 
> 赞同：0
> 
> 时间：2012-04-19T10:53:34.623
> 
> 标签：php, facebook, facebook-graph-api

请看这个链接，[http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)，我用它通过对话框sendRequestViaMultiFriendSelector使用facebook api发送请求，现在我只想限制最多4个我们最多可以发送 4 人的请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:14:49.340

在您在问题中链接的同一页面中，底部有一个可用于此特定对话框的可能参数表。其中一个参数是 *max_recipients* 参数，它说：

> 一个整数，指定用户可以在朋友选择器中选择的最大朋友数。移动设备不支持此参数。

所以基本上：

```
FB.ui({
    method: "apprequests",
    message: "Hey, come see this app",
    max_recipients: 4
}, requestCallback); 
```

# android - 清除Android设置中的数据会删除哪些数据？

> ID：10226530
> 
> 赞同：2
> 
> 时间：2012-04-19T10:54:03.313
> 
> 标签：android, setting

有没有人知道我清除设置中的设置数据时会删除哪些数据？目前，我在 WallPaperManager 中发现了一个错误。清除设置数据后，我的pad无法切换到其他壁纸。我跟踪了一些代码，发现可能删除了一些观察者/听众。所以，我想知道什么样的会被删除！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:58:38.037

内部存储中的数据您`Database,SharedPreference....`已删除但未删除外部存储（在 sdcard 中）数据...请参阅此 [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# iphone - 生成预览后ARC转换错误

> ID：10226531
> 
> 赞同：1
> 
> 时间：2012-04-19T10:54:05.240
> 
> 标签：iphone, ios, ipad, xcode4.2, automatic-ref-counting

我正在尝试将我的应用程序转换为自动引用计数，但是当 Xcode 生成预览时出现此错误：

```
/Users/alessandro/Library/Developer/Xcode/DerivedData/CroMAR-gwraklradkfapbguekcdgjignatm/Build/PrecompiledHeaders/CroMAR-Prefix-dlennltvfqdqsxbbvypkwlbqyvtn/CroMAR-Prefix.pch' file not found 
```

我尝试清理项目，关闭 Xcode，删除派生数据，将 .pch 文件添加到该目录，但错误仍然存​​在，我无法迁移到 ARC。有任何想法吗？

谢谢麦芽酒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:02:35.587

您的 .pch 文件是否位于构建设置中指定的正确位置？

![在此处输入图像描述](../Images/c8c94a6e8c229dd6b503d6271be53998.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:43:16.143

我认为您在代码中留下的任何引用都可能是指向文件的任何变量，而他没有得到它。只是检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:18:22.747

嗨以这种方式解决了问题。我注意到上述问题与此讨论中报告的问题类型有关[Convert to ARC - LLVM compiler 3.0 Error](https://stackoverflow.com/questions/7972960/convert-to-arc-llvm-compiler-3-0-error)因此解决问题的方法是在迁移到 ARC 期间选择 iOS 模拟器作为目标。

# c++ - 知道为什么 std::move 在这里失败了吗？

> ID：10226534
> 
> 赞同：2
> 
> 时间：2012-04-19T10:54:12.510
> 
> 标签：c++, visual-c++, c++11

```
#include <thread>
#include <cassert>
#include <iostream>
#include <string>
#include <future>
#include <utility>

void ThFun(std::promise<std::string>&& prms)
{
    std::string hello = "Hello From Future!\n";
    prms.set_value(hello);
}

int main()
{
    std::promise<std::string> prms;
    auto ftr = prms.get_future();
    std::thread th(&ThFun, std::move(prms));
    std::cout << "Hello from Main\n";
    std::string str = ftr.get();
    std::cout << str << std::endl;
    th.join();

    return 0;
} 
```

我得到这个构建错误。

```
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(1140):     error C2664: 'void (std::promise<_Ty> &&)' : cannot convert parameter 1 from 'std::promise<_Ty>' to 'std::promise<_Ty> &&'
1>          with
1>          [
1>              _Ty=std::string
1>          ]
1>          You cannot bind an lvalue to an rvalue reference
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional(1140) : while compiling class template member function 'void std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>::operator ()(void)'
1>          with
1>          [
1>              _Forced=true,
1>              _Ret=void,
1>              _Fun=void (__cdecl *const )(std::promise<std::string> &&),
1>              _V0_t=std::promise<std::string>,
1>              _V1_t=std::_Nil,
1>              _V2_t=std::_Nil,
1>              _V3_t=std::_Nil,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\thread(50) : see reference to class template instantiation 'std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>' being compiled
1>          with
1>          [
1>              _Forced=true,
1>              _Ret=void,
1>              _Fun=void (__cdecl *const )(std::promise<std::string> &&),
1>              _V0_t=std::promise<std::string>,
1>              _V1_t=std::_Nil,
1>              _V2_t=std::_Nil,
1>              _V3_t=std::_Nil,
1>              _V4_t=std::_Nil,
1>              _V5_t=std::_Nil,
1>              <unnamed-symbol>=std::_Nil
1>          ]
1>          c:\users\jim\documents\visual studio 11\projects\promisesandfutures    \promisesandfutures\main.cpp(18) : see reference to function template instantiation 'std::thread::thread<void(__cdecl *)(std::promise<_Ty> &&),std::promise<_Ty>>(_Fn,_V0_t &&)' being compiled
1>          with
1>          [
1>              _Ty=std::string,
1>              _Fn=void (__cdecl *)(std::promise<std::string> &&),
1>              _V0_t=std::promise<std::string>
1>          ] 
```

我正在使用VC11。错误说不能绑定左值，但我正在使用 std::move 使其成为右值。

谢谢。

**编辑** std::ref 工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T12:15:31.333

从错误消息看来，VC11 犯了与 gcc 4.7 之前的 gcc 相同的错误：`std::bind`在`std::thread`. `std::bind`要求参数是可复制的，但`std::thread`不是。这意味着只能移动类型，例如`std::promise`不能作为参数传递给线程。

事实上，您的示例适用于 gcc 4.7，或 MSVC 2010 和我[的 C++11 线程库的 just::thread 实现](http://www.stdthread.co.uk)，但在使用其本机库时失败并出现与 gcc 4.6 类似的错误消息（gcc 4.6 也适用于仅使用::thread)。

# python - 如何让 python 将所有错误写入特定的日志文件？

> ID：10226538
> 
> 赞同：0
> 
> 时间：2012-04-19T10:54:35.417
> 
> 标签：python

这是我的代码

```
import sys
import logging
import traceback
import MySQLdb

def log_except_hook(*exc_info):
        text = "".join(traceback.format_exception(*exc_info))
        logging.error("Unhandled exception: %s", text)

sys.excepthook = log_except_hook

db = MySQLdb.connect("sdfgdfgsdgd.nl","1","1","1" )
cursor = db.cursor() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:59:05.900

您需要设置一个将写入文件的记录器。有关如何执行此操作的示例，请参阅[Python 文档。](http://docs.python.org/howto/logging.html#logging-to-a-file)

# ruby - RUBY/WATIR/RASTA：将值从 excel/rasta 传递到 Ruby 中的数组？

> ID：10226539
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:54:37.440
> 
> 标签：ruby, arrays, excel, watir

如何将用逗号分隔的值从 excel/rasta 传递到 Ruby 中的数组。

html看起来像这样，....

```
<li><input type="checkbox" name="order:1"  />Burger</li>
<li><input type="checkbox" name="order:2"  />Pasta</li>
<li><input type="checkbox" name="order:3"  />Fries</li> 
```

...

EXCEL看起来像这样...

**订单**

汉堡、意大利面

* * *

此代码不起作用

```
attr_accessor :orders

order = [@orders]
order.each do |i|

.......

........ 
```

* * *

它应该在红宝石中看起来像这样......

```
attr_accessor :orders

orders = [ 'burger','pasta '] *#should pass data from excel in the array "**orders**"

orders.each do |i|
@browser.checkbox(:text => i).click
@browser.button(:name => 'save').click
end 
```

那么我将如何将excel中的值传递给数组呢？

抱歉，我还在学习 Ruby :|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:38:20.503

有一个受欢迎的图书馆叫做[roo](http://roo.rubyforge.org)。在链接页面中，它将告诉您如何安装该库，然后使用它从 excel 中获取值。

```
require 'rubygems'
require 'roo'

HOURLY_RATE = 123.45

oo = Openoffice.new("simple_spreadsheet.ods")
oo.default_sheet = oo.sheets.first
oo.first_row.upto(oo.last_row) do |line|
  @browser.check(:value => oo.cell(line,'A'))
  @browser.button(:name => 'save').click
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:02:14.447

查找一些关于 Ruby 的在线教程，或者购买一本像 Everyday Scripting With Ruby 这样的书并按照自己的方式学习。

每个人都必须从某个地方开始，但目前，您似乎了解得太少，并且超出了您的能力范围，以至于试图帮助您的人几乎无法理解您的问题或您正在尝试的事情去做。

接下来，循序渐进地工作，这样您就可以分辨出什么是有效的，什么是失败的，并逐步按照自己的方式进行操作。

例如，在您的情况下，安装 Roo gem，并弄清楚如何使用它来读取电子表格并在屏幕上打印内容。

一旦你能做到这一点，然后尝试将信息读入一个数组，并将数组打印到屏幕上（这样你就知道东西已经到了你需要它去的地方）

现在，使用具有硬编码值的 Watir 编写代码以单击事物等并填写您正在处理的表单等。

一旦你知道这是有效的，就将它与你的代码结合起来，将电子表格读入一个数组，然后用你从电子表格制作的数组中提取的东西替换硬编码的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T01:14:56.967

我可以在 excel 中获取值，但我不知道如何将它们作为 Ruby 中的数组删除

我的代码看起来像这样..但它不起作用

```
......
if array 

 arrayLabel = [:array]

    arrayLabel.each do |i|
    @browser.checkbox(:text => i).click 
    @browser.button(:name => 'save').set
            end

end 
.............. 
```

* * *

:array ，是我获取要在 ruby​​ 中传递的值的列名

还有如果在checkbos选项列表中找不到数组中的数据怎么办？

# python - 使用 unittest 从主线程将对象传递给我的测试用例

> ID：10226540
> 
> 赞同：1
> 
> 时间：2012-04-19T10:54:40.850
> 
> 标签：python, unit-testing, testing

我是 python 新手，刚刚开始开发 linux 应用程序自动化。

我正在尝试的场景是

thread.py --- 将调用所有主要设备线程并从测试用例加载测试

admincase.py --- 保存我的案例测试..

我无法做的是我想在加载测试时将某些对象从 thread.py 传递给 admincase.py。我怎么做..

我试图传递的对象是（**EppQueue**）

thread.py 代码

```
import threading
import sys
import time
import logging
import os
import Queue
from EPP import EPP
import ldtp
import ldtputils
from functions import functions
from admincases import admincases
import unittest

#logging.basicConfig(level=logging.DEBUG,
#                    format='(%(threadName)-10s) %(message)s',
#                    )
class inittest(unittest.TestCase):
    global fun
    global EppQueue
    global window_name

    def cleanup(epp_port):
        if os.path.exists(epp_port):
            os.unlink(epp_port)

    def start_threads(EppQueue,server_ip,epp_port):
        epp = EPP
        EPP1 = threading.Thread(name='EPP', target=epp, args=(server_ip,54321,epp_port,EppQueue,))
        EPP1.setDaemon(True)
        EPP1.start()
        return epp 
    fun = functions()
    EppQueue = Queue.Queue(1)
    server_ip ='192.168.10.125'
    epp_port='/dev/ttyS17'
    print "Starting"
    cleanup(epp_port)
    print "Clean up Over"
    epp = start_threads(EppQueue,server_ip,epp_port)
    raw_input("###### Please Start the main appilcation in the ATM and hit a KEY to continue ############")
    check = 0
    while check == 0:
        window_name = fun.start_up_verify('atm_main_app')
        if any(window_name):
            check = 1
        else:
            check = 0
    if not any(window_name):
        print "Please start the application and run the test"
        sys.exit(0) 
    else:
        print window_name
        print "SYSTEM IS READY TO PERFORM TEST"
        raw_input("###### HIT ANY KEY TO START UNIT TEST ############")
        raw_input("kkk")    
        test = unittest.defaultTestLoader.loadTestsFromName("admincases")
        unittest.TextTestRunner(verbosity=2).run(test)
    raw_input("keyy")
    print "final" 
```

admincase.py 代码

```
import unittest
from functions import functions
import time
import Queue

class admincases(unittest.TestCase):
    global fun
    global EppQueue
    global window_name

    def test_case_1(self):
        print "test case 1"
        window_name = 'frmatm_main_app'
        fun.send_queue(self.EppQueue,"send_keys,&&&&&")
        fun.verify_screen(window_name,"ico0") 
        fun.send_queue(self.EppQueue,"send_keys,C")
        fun.verify_screen(window_name,"ManagementFunctions") 
        fun.send_queue(self.EppQueue,"send_keys,001234")
        fun.verify_screen(window_name,"MainMenu")
        fun.send_queue(self.EppQueue,"send_keys,1")
        fun.verify_screen(window_name,"Diagnostics")
        fun.send_queue(self.EppQueue,"send_keys,1")
        fun.verify_screen(window_name,"TerminalStatus")
        fun.send_queue(self.EppQueue,"send_keys,2")
        time.sleep(10)
        fun.send_queue(self.EppQueue,"send_keys,####****")

    fun = functions()
    #EppQueue = Queue.Queue(1) 
```

在这方面需要一些帮助...

# java - 其他人是否可以在 src 中实现“假”Java 对象？

> ID：10226541
> 
> 赞同：0
> 
> 时间：2012-04-19T10:54:47.743
> 
> 标签：java, security

我有一个读取 java Serial 对象的 Java 程序，如果接收到，程序将运行一些业务逻辑。假设我没有 Java 程序源代码，我也没有任何关于 Serial 对象如何实现的文档。这是否可以制作一个`fake`可以让程序执行的客户端？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:59:16.697

假客户端必须知道预期类的名称，当找不到时，可以从异常消息中发现它；它的 serialVersionUID 同上；以及它的可序列化字段，这些字段同上是*不可发现的。*理论上可以从序列化流中发现这一点，但鉴于任何类都可以有自己的 writeObject() 或 writeExternalizable() 方法，它可以任意快速地变得任意复杂。

所以我不会因为这个偶然的风险而失去太多的睡眠。

您还可以在 JAR 上签名并密封相关包裹，这样可以消除特定风险。

OTOH，如果您对应用程序安全有真正的需求，那么您找错地方了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:09:02.557

我不完全按照你的想法。

您不能通过让应用程序反序列化对象来将新代码注入应用程序。为了让一个对象在程序中被 / 成功反序列化，该程序必须在类路径上有对象的类。如果没有，反序列化将失败。

另一方面，如果您以某种方式知道该程序已经使用了具有特定安全漏洞的特定类，并且您可以欺骗它以可以利用该漏洞的方式反序列化该类的实例，那么将会有一个忧虑。（我隐约记得这种方法已用于某些易受攻击的类，尽管我不记得任何细节。）

* * *

底线是具有安全意识的应用程序不应尝试反序列化可能来自不受信任的来源或可能在传输过程中被修改的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:20:46.130

假设 Java 序列化。

从理论上讲，您应该能够查看串行流并查看预期的类和字段。然后您可以及时构建一个类（如果`ObjectInputStream`用于解析流，您可能需要每次重新开始读取流（不确定））。在自定义方法之后`defaultWriteObject`/中写入的任何数据都无法可靠地解释。`putFields``writeObject`

在实践中，人们（包括 Java 库的作者）有时会有点调皮，会错过`defaultWriteObject`/ `putFields`。这意味着流实际上不是正确的格式。由于向后兼容性，现在修复它可能有点晚了。

# php - 如何使用 PHP 控制令人反感的评论？

> ID：10226542
> 
> 赞同：-1
> 
> 时间：2012-04-19T10:54:53.823
> 
> 标签：php, comments, controls

我现在正在做我网站的管理控制部分，并想添加一个功能，允许管理员控制评论，即粗话。是否可以仅针对行政检查显示令人反感的评论？有没有适合这个的PHP函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:16:13.173

我有机会为 cricket.yahoo.com 上的聊天小部件开发了一个幼稚的亵渎过滤器（您可以想象球迷在比赛进行时在聊天中互相诅咒，这对雅虎的声誉来说是非常不可接受的）。

想法非常简单，只要您有一个要过滤的单词列表。我有一份来自各种口语的大约 10 万个亵渎词的列表。想法是有一个 O(1) 查找来检查一个单词是否是亵渎的。

即使亵渎单词列表仅包含“fuck”，也可以捕获诸如“fuuuucccckkkk”之类的情况，可以使用[soundex](http://php.net/manual/en/function.soundex.php)（和相关）类算法。这是通过预先构建和缓存特定数据结构（在memcache中）来完成的。

收到评论后，以下过程如下：

1.  从 memcache 加载预先计算的数据结构
2.  对评论中的每个单词执行查找
3.  在数据结构中查找一个词（相似词）是 O(1)

缓存数据结构是 soundex、[djb2](http://www.cse.yorku.ca/~oz/hash.html)和其他一些算法的混合体

# sql - 使用VB6从数据库中确定平均值

> ID：10226544
> 
> 赞同：-4
> 
> 时间：2012-04-19T10:55:06.323
> 
> 标签：sql, database, vb6

我正在尝试使用“循环”方法从数据库文件中计算出平均成绩；我完全不知道如何开始它。有没有人有任何提示或能够帮助我？问候，杰克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:02:08.037

不是在 vb 中循环，而是在 SQL 中计算平均值。

例如，

```
select StudentID, avg(Grade) as AverageGrade
from StudentGrade
group by StudentID 
```

# android - 在android中控制webview缩小100%

> ID：10226548
> 
> 赞同：1
> 
> 时间：2012-04-19T10:55:19.953
> 
> 标签：android, webview, zooming

在我的应用程序中，我正在获取图像的 url，并将其加载到 webview 中。这是如果我在初始阶段缩小（如 100%）它不应该缩小。但是一旦发生放大，那么它应该缩小，并且当它到达第一个位置意味着（100％）时也不应该缩小。

我怎样才能做到这一点。谁能帮我。

# python - 什么是计算数字列表百分比变化的最pythonic方法

> ID：10226551
> 
> 赞同：6
> 
> 时间：2012-04-19T10:55:28.173
> 
> 标签：python

我有一个浮点数列表，我想从我的第一个列表中生成另一个周期回报列表。

这是工厂实施的运行（未经测试 - 显然没有错误检查/处理）：

```
a = [100,105,100,95,100]

def calc_period_returns(values, period):
    output = []
    startpos, endpos = (period, len(values)-1)

    while True:
        current = values[startpos]
        previous = values[startpos-period]
        ret = 100*((current-previous)/(1.0*previous))
        output.append(ret)
        startpos += period
        if startpos > endpos:
            break
    return output

calc_period_returns(a,1)

# Expected output:
# [5.0, -4.7619047619047619, -5.0, 5.2631578947368416] 
```

有没有更 Pythonic 的方式来做到这一点 - 也许使用列表理解和地图？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T11:19:53.417

我不知道你的数字列表会有多大，但如果你要处理大量的数字，你应该看看 numpy. 副作用是计算看起来要简单得多。

使用 numpy，您可以为数据创建一个数组

```
>>> import numpy as np
>>> a = np.array([100,105,100,95,100], dtype=float) 
```

并像使用简单数字一样处理数组

```
>>> np.diff(a) / a[:-1] * 100.
[ 5\.         -4.76190476 -5\.          5.26315789] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-19T11:04:31.827

干得好：

```
>>> [100.0 * a1 / a2 - 100 for a1, a2 in zip(a[1:], a)]
[5.0, -4.7619047619047592, -5.0, 5.2631578947368354] 
```

由于您想比较列表的相邻元素，您最好创建一个您感兴趣的对列表，如下所示：

```
>>> a = range(5)
>>> a
[0, 1, 2, 3, 4]
>>> zip(a, a[1:])
[(0, 1), (1, 2), (2, 3), (3, 4)] 
```

之后，从一对数字中提取百分比变化只是一个简单的数学运算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-05T23:23:55.507

谢谢你们的回答！如果有人只想复制粘贴（如我），我根据您的回答实现了一个功能：

```
def pct_change(nparray):
    pct=np.zeros_like(nparray)
    pct[1:]=np.diff(nparray) / np.abs(nparray[:-1])
    #TODO zero divisionerror
    return pct 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T19:17:21.207

你也可以这样做：

```
>>> a = [100,105,100,95,100]
>>> [(a[i]-a[i-1])/a[i-1] for i in range(1, len(a))]
[0.05, -0.047619047619047616, -0.05, 0.05263157894736842] 
```

# shell - 尝试从 Unix 脚本加载数据时出错

> ID：10226553
> 
> 赞同：2
> 
> 时间：2012-04-19T10:55:48.007
> 
> 标签：shell, unix, oracle10g

当我试图从 Unix 服务器执行 SQL 脚本时，它显示错误，但我从 sql navigator 运行的相同 SQL 工作正常..请帮助我..

```
INSERT INTO t_csocstudent_course_local
(SELECT   tsct.student_id,
          tsct.object_lookup_id,
          tsct.course_id,
          tsct.xcourse_id,
          clt.NAME,
          tsct.course_type,
          FROM   temp_stud_course tsct join course_local clt
   on tsct.COURSE_ID = clt.COURSE_ID

  WHERE   TO_CHAR (sc_timestamp, 'YYYYMMDDHH24MISS') >
              (SELECT   TO_CHAR (MAX (sc_timestamp), 'YYYYMMDDHH24MISS')
                 FROM   t_student_course_local)
          AND tsct.xcourse_id IN
                     ('EX1','EX2')); 
```

错误 ：

```
Error in loading main table
Enter password:
SP2-0734: unknown command beginning "WHERE   TO..." - rest of line ignored.
              AND tsct.xcourse_id IN
              *
ERROR at line 3:
ORA-00933: SQL command not properly ended 
```

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:00:07.290

我不记得 Oracle 命令行客户端是否允许额外的空格换行符。`WHERE`删除子句前的额外换行符。

### 更新

[从文档](http://ss64.com/ora/syntax-sqlplus-set.html)中，空行在 SQLplus 中默认终止 SQL 语句。

```
SQLT[ERMINATOR] {;|c|OFF|ON}| 
   Set the char used to end and execute SQL commands to c. 
   OFF disables the command terminator - use an empty line instead.
   ON resets the terminator to the default semicolon (;). 
```

您可以更改行为以使用分号而不是空行：

```
SET SQLTERMINATOR ON 
```

# java - Java Servlet 文件上传错误

> ID：10226558
> 
> 赞同：0
> 
> 时间：2012-04-19T10:56:01.920
> 
> 标签：java, tomcat, servlets, file-upload

我正在学习 java servlet 编程，我写了一个程序来上传文件，我的程序有一个奇怪的问题。当它说它完成上传文件时，当我单击链接查看它时，我收到 404 错误，当我检查目录（应该保存文件的位置）时，它是空的。我检查了日志，没有错误消息。我从一本用来学习 servlet 和 jsp 的书中得到代码。

这是我的java代码

```
import java.io.*;
import java.util.*;

import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletInputStream;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class FileUpload
 */
@WebServlet("/FileUpload")
public class FileUpload extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public FileUpload() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        out.println("<html>");
        out.print("File upload success. <a href=\"/Project_One/files");
        out.print("\">Click here to browse through all uploaded ");
        out.println("files.</a><br>");

        ServletInputStream sis = request.getInputStream();
        StringWriter sw = new StringWriter();
        int i = sis.read();
        for(;i!=-1 && i!= '\r';i=sis.read())
            {
                sw.write(i);
            }
        sis.read(); //ditch \'n'
        String delimiter = sw.toString();

        while(true)
            {
                StringWriter h = new StringWriter();
                int[] temp = new int[4];
                temp[0] = (byte)sis.read();
                temp[1] = (byte)sis.read();
                temp[2] = (byte)sis.read();
                h.write(temp[0]);
                h.write(temp[1]);
                h.write(temp[2]);

                //read header
                for(temp[3]=sis.read();temp[3]!=-1;temp[3]=sis.read())
                    {
                        if(temp[0] == '\r' &&
                           temp[1] == '\n' &&
                           temp[2] == 'r'  &&
                           temp[3] == '\n')
                            {
                                break;
                            }

                        h.write(temp[3]);
                        temp[0]= temp[1];
                        temp[1]= temp[2];
                        temp[2]= temp[3];   
                    }
                String header = h.toString();

                int StartName = header.indexOf("name=\"");
                int endName = header.indexOf("\"",StartName+6);
                if(StartName == -1|| endName == -1)
                    {
                        break;
                    }
                String name = header.substring(StartName+6,endName);
                if(name.equals("file"))
                    {
                        StartName = header.indexOf("filename=\"");
                        endName = header.indexOf("\"",StartName+10);
                        String filename = header.substring(StartName+10,endName);
                        ServletConfig config = getServletConfig();
                        ServletContext sc = config.getServletContext();

                        //File file = new File(sc.getRealPath("/files"));
                        //file.mkdirs();
                        FileOutputStream fos = new FileOutputStream(sc.getRealPath("/")+"/"+filename);

                        //write the file to disk 
                        int length = delimiter.length();
                        //delimiter ="\r\n"+delimiter;
                        byte[] body = new byte[delimiter.length()];
                        for(int j=0;j<body.length-1;j++)
                            {
                                body[j]=(byte)sis.read();
                                fos.write(body[j]);
                            }

                        //check it wasn't a 0 length file
                        //if(!delimiter.equals(new String (body)))
                            //{
                                int e = body.length-1;
                                i=sis.read();
                                for(;i!=-1;i=sis.read())
                                    {
                                        body[e]=(byte)i;
                                        /*fos.write(body[0]);
                                        for(int l=0;l<body.length-1;l++)
                                            {
                                                body[l]=body[l+1];
                                            }*/
                                        //body[e]=(byte)i;

                                        if(delimiter.equals(new String (body)))
                                            {
                                                break;
                                            }
                                        //length++;
                                        fos.write(body[e]);
                                        for(int k=0;k<body.length-1;k++)
                                            {
                                                body[k]=body[k+1];

                                            }
                                        length++;
                                    }

                        fos.flush();
                        fos.close();
                        out.println("<p><b>Saved File:</b>"+filename+"</p>");
                        out.println("<p><b>Length:</b>"+ length+"</p>");
                    }
                if(sis.read() == '-' && sis.read()=='-')
                    {
                        break;
                    }

                    }
        out.println("</html>");

            }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        doPost(request,response);
    }

} 
```

代码中几乎没有更改，更改在书中给出。这是我的 HTML 代码

```
<html>
    <head>
        <title>Test HTML Form</title>
    </head>
    <body>
    <p>Select a file to upload or <a href="/Project_One/files/">browse currently uploaded files.</a></p>
    <form action="http://127.0.0.1/Project_One/FileUpload"
          method="post" enctype="multipart/form-data">
          File:<input type="file" name:"file"><br>
          <input value="Upload File" type="submit">
    </form>
    </body>
</html> 
```

我正在为此使用 TomCat 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:29:57.553

好吧，我认为这段代码读起来有点复杂，但有几点可能是错误的，首先是这部分：

```
 out.println("<html>");
    out.print("File upload success. <a href=\"/Project_One/files");
    out.print("\">Click here to browse through all uploaded ");
    out.println("files.</a><br>"); 
```

在这部分中，您的链接指向 Project_One/files 但是当您编写文件时：

```
 FileOutputStream fos = new FileOutputStream(sc.getRealPath("/")+"/"+filename); 
```

您直接在 Project_One 文件夹中写入文件（而不是在您的 html 指向的文件夹中），因此您可以尝试查看文件是否写入工作区的主文件夹中。

无论如何，我认为您可以更好地理解这样的代码：

```
 MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) req;
  MultipartFile multipartFile = multipartRequest.getFile("file");
  byte[] content =multipartFile.getBytes();
  File archivoParaGuardar= new File("/your_directory/"+multipartFile.getOriginalFilename());
  try {
    baos.write(content);
    FileOutputStream fos = new FileOutputStream(archivoParaGuardar);
    baos.writeTo(fos);
    fos.close();
  } catch (Exception e) {
   logger.error("Error saving file ", e);
  } 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:07:21.643

你从哪里得到这个代码？来自十年前的 servlet 教程/书？这一切都不必要地过于复杂。请确保您正在阅读不超过一年的最新教程/书籍。

以下是使用标准 servlet 3.0 API 完成文件上传的方法：

```
@MultipartConfig
@WebServlet("/FileUpload")
public class FileUpload extends HttpServlet {

    private static final long serialVersionUID = 1L;

    @Override    
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Part filePart = request.getPart("file"); // Retrieves <input type="file" name="file">
        String filename = getFilename(filePart);
        InputStream filecontent = filePart.getInputStream();
        // ... (do your job here)
    }

    private static String getFilename(Part part) {
        for (String cd : part.getHeader("content-disposition").split(";")) {
            if (cd.trim().startsWith("filename")) {
                String filename = cd.substring(cd.indexOf('=') + 1).trim().replace("\"", "");
                return filename.substring(filename.lastIndexOf('/') + 1).substring(filename.lastIndexOf('\\') + 1); // MSIE fix.
            }
        }
        return null;
    }

} 
```

就这样。它还考虑到返回正确的文件名。某些浏览器（例如 MSIE）错误地在文件名中包含完整的客户端路径。这可能是您的问题的原因。

此外，还有两个不直接相关的其他问题：

1.  您不应将上传的文件存储在部署文件夹中。每当您重新部署 web 应用程序时，它都会丢失。将文件存储在部署文件夹之外的某个固定路径中。另请参阅[如何在 java webapp 中的服务器上保存和检索图像](https://stackoverflow.com/questions/8516387/how-i-save-and-retrieve-an-image-on-my-server/8521981#8521981)。

2.  您应该将生成 HTML 的工作委托给 JSP。最后`doPost()`，将请求转发到 JSP：

    ```
    request.getRequestDispatcher("/WEB-INF/uploadresult.jsp").forward(request, response); 
    ```

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含如何正确使用 servlet 的 hello world 示例
*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

# iphone - 将 gmail 联系人导入 iOS 应用程序

> ID：10226561
> 
> 赞同：0
> 
> 时间：2012-04-19T10:56:11.530
> 
> 标签：iphone, objective-c, ios, google-api

是否有任何示例代码可将 gmail 联系人导入 iOS 应用程序？我已经使用 API 浏览了示例代码，但我没有找到任何可以导入联系人的东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:23:17.053

不确定 SDK，但您需要实施 google oAuth 协议才能从用户的 gmail 帐户导入联系人。

检查这个[好的oAuth库](http://maniacdev.com/2010/09/new-open-source-oauth-library-for-easy-authentication-on-ios-devices-from-google/)

# c++ - 我可以在没有任何额外程序或安装的情况下在 c++ 文件执行中编译 c++ 文件吗？

> ID：10226562
> 
> 赞同：2
> 
> 时间：2012-04-19T10:56:12.763
> 
> 标签：c++, compilation, interpreter, clang

我正在阅读 Clang 和 Ch（c++ 解释器），但我不清楚，是否可以在没有任何安装的情况下运行新生成的 .cpp 文件？因为我需要在任何电脑上运行最终程序...

附言。如果是的话，有没有人有一个很好的例子，在 C++ 代码中执行 .cpp 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:03:00.000

这可能是不可能的，或者至少非常困难。你必须在你的程序中包含整个编译器（包括链接器、汇编器、优化器、预处理器……），这会使它*变得非常*大。

一种方法是使用 Clang（正如您已经指出的那样），源代码中甚至还有一个名为“Clang 解释器”的演示项目：http: [//llvm.org/viewvc/llvm-project/cfe/trunk/examples/铿锵翻译/](http://llvm.org/viewvc/llvm-project/cfe/trunk/examples/clang-interpreter/)

但是，我曾经尝试将这个“野兽”编译到我的程序中并中途放弃，因为结果二进制文件（或带有外部库的二进制文件）的文件大小达到了几十兆字节（甚至可能是一百）。

我的建议是生成一个可以轻松解释的不同脚本（例如 bash/sh 脚本，您可以在任何 unix 机器上执行该脚本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-29T16:39:39.293

据我所知，这是不可能的，因为一个CPP文件的编译过程是这样的——

1.  预处理：预处理器获取一个 C++ 源代码文件并处理`#include`s、`#define`s 和其他预处理器指令。此步骤的输出是没有预处理器指令的“纯”C++ 文件。

2.  编译：编译器获取预处理器的输出并从中生成一个目标文件。

3.  链接：链接器获取编译器生成的目标文件并生成库或可执行文件。

所以，应该有中间文件和可执行文件。

更多可以在这里找到-

[https://stackoverflow.com/a/6264256/7725220](https://stackoverflow.com/a/6264256/7725220)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:58:52.293

有点取决于你所说的“安装”是什么意思。

是的，您可以使用完整的编译器分发您的程序，编译源代码，然后执行最终结果（全部来自原始 exe）。

# c# - 在实体框架中交换具有唯一约束的值

> ID：10226565
> 
> 赞同：14
> 
> 时间：2012-04-19T10:56:25.740
> 
> 标签：c#, entity-framework

`Navigations`我对表的列有一个唯一约束，称为`Index`. 我有两个`Navigation`实体，我想交换它们的`Index`值。

当我调用`db.SaveChanges`它时会抛出一个异常，表明违反了唯一约束。似乎 EF 正在更新一个值，然后是另一个值，因此违反了约束。

它不应该在事务中更新它们，然后在整理出值并且不违反约束后尝试提交吗？

有没有办法在不使用临时值的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T11:05:48.210

这不是 EF 的问题，而是 SQL 数据库的问题，因为更新命令是按顺序执行的。事务与此无关 - 所有约束都是按命令而不是按事务验证的。如果您想交换唯一值，您需要更多步骤，您将使用额外的虚拟值来避免这种情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T11:12:44.560

您可以运行自定义 SQL 查询来交换值，如下所示：

```
update Navigation
set valuecolumn = 
        case 
            when id=1 then 'value2' 
            when id=2 then 'value1'
        end
where id in (1,2) 
```

但是，实体框架不能这样做，因为它超出了 ORM 的范围。`update`它只是为每个更改的实体执行顺序语句，就像 Ladislav 在他的回答中描述的那样。

另一种可能性是删除`UNIQUE`数据库中的约束并依靠应用程序正确执行此约束。在这种情况下，EF 可以很好地保存更改，但根据您的情况，这可能是不可能的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-30T11:53:13.867

有几种方法。其中一些包含在其他答案和评论中，但为了完整起见，我将在此处列出它们（请注意，这只是我集思广益的列表，可能并不那么“完整”）。

1.  在单个命令中执行所有更新。有关此示例，请参阅[W0lf 的答案。](https://stackoverflow.com/a/10226819/81595)
2.  进行两组更新 - 一组将所有值交换为预期值的负值，然后将它们从负值交换为正值。这是在假设负值不会被其他约束阻止并且它们不是除了处于瞬态状态的记录之外的记录将具有的值。
3.  添加一个额外的列 - 例如 IsUpdating - 在更改值的第一组更新中将其设置为 true，然后在第二组更新中将其设置回 false。将唯一约束交换为过滤的唯一索引，该索引忽略 IsUpdating 为 true 的记录。
4.  删除约束并处理重复值。

# windows-phone-7 - RestSharp - WP7 - 无法将 XML 反序列化为列表

> ID：10226572
> 
> 赞同：6
> 
> 时间：2012-04-19T10:57:02.997
> 
> 标签：windows-phone-7, c#-4.0, deserialization, restsharp

我在我的 Windows Phone 7.1 项目中使用 RestSharp。

我在这里有 XML 格式的回复： [https ://skydrive.live.com/redir.aspx?cid=0b39f4fbbb0489dd&resid=B39F4FBBB0489DD!139&parid=B39F4FBBB0489DD!103&authkey=!AOdT-FiS6Mw8v5Y](https://skydrive.live.com/redir.aspx?cid=0b39f4fbbb0489dd&resid=B39F4FBBB0489DD!139&parid=B39F4FBBB0489DD!103&authkey=!AOdT-FiS6Mw8v5Y)

我试图反序列化对该类的响应：

```
public class fullWall
{
    public _user user { get; set; }
    public int numberOfFriend { get; set; }
    public int numberOfPhoto { get; set; }
    public List<timhotPhotos> timhotPhotos { get; set; }
    public fullWall()
    {
        timhotPhotos = new List<timhotPhotos>();
    }
} 
```

除`timhotPhotos`列表外，所有属性都可以，如您在此处看到的：

![](../Images/04e84f3f2ee5dae65accd49e1b2fe41a.png)

timhotPhotos 类：

```
public class timhotPhotos
{
    public string id { get; set; }
    public string title { get; set; }
    public string description { get; set; }
    public string url { get; set; }
    public double width { get; set; }
    public double height { get; set; }
    public DateTime createdDate { get; set; }
    public _user user { get; set; }
    public int numOfComment { get; set; }
    public int numOfRate { get; set; }
    public int numOfView { get; set; }
    public bool rated { get; set; }
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:58:12.893

您必须将默认 XML 反序列化器更改为`DotNetXmlDeserializer`，如下所示：

```
RestClient client;

client.AddHandler("application/xml", new DotNetXmlDeserializer()); 
```

然后，将`XmlElement`属性添加到属性中，`List<timhotPhotos> timhotPhotos`如下所示：

```
public class fullWall
{
    public _user user { get; set; }
    public int numberOfFriend { get; set; }
    public int numberOfPhoto { get; set; }
    [System.Xml.Serialization.XmlElement()]
    public List<timhotPhotos> timhotPhotos { get; set; }
    public fullWall()
    {
        timhotPhotos = new List<timhotPhotos>();
    }
} 
```

现在它应该可以正常工作了！

# c# - 任何可用于检查进程的工具都以 64 位或 32 位运行

> ID：10226574
> 
> 赞同：0
> 
> 时间：2012-04-19T10:57:18.050
> 
> 标签：c#, .net

它是 .net/C# 应用程序，提供了一个 exe，操作系统是 64 位，我想知道该进程是在 64 位还是 32 位下运行。

是否有任何工具可以告诉进程以 64 位或 32 位模式运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:58:33.247

```
Environment.Is64BitProcess ( fw 4)......... 
```

也请注意这一点：

```
Environment.Is64BitOperatingSystem 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:20:49.993

附加 Royi 的答案，你也可以试试这个：

```
Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:27:43.703

答案是关于如何编写一个可以为您检查它的应用程序。如果我正确理解您的问题，您只需要查看进程是 32 位还是 64 位。如果这是真的，你只需要一个 Windows 内置的任务管理器。以 32 位模式运行的所有进程都`*32`在“进程”选项卡中标记为 。

# c++ - 如何导出类函数，而不是 DLL 中的整个类

> ID：10226580
> 
> 赞同：6
> 
> 时间：2012-04-19T10:57:29.060
> 
> 标签：c++, dll, c++-cli

我开发了一个 Win32 DLL，提供了下面的详细信息，并希望为函数 Connnect 和 LogOut 创建一个 CLI/C++ 包装器。

我知道整个类和函数都可以从 DLL 中导出。

```
class CClientLib
{
 public:
CClientLib (void);
// TODO: add your methods here.
__declspec(dllexport) bool Connect(char* strAccountUID,char* strAccountPWD);
__declspec(dllexport) void LogOut();

 private :

    Account::Ref UserAccount ;
void set_ActiveAccount(Account::Ref act)
{
   // Set the active account
}

Account::Ref get_ActiveAccount()
{
  return UserAccount;
    }

}; 
```

我想让类作为导出函数，Connect 和 LogOut，使用函数 set/get。

是否可以只导出函数 Connect 和 LogOut，而不是整个类。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T12:24:33.247

我建议声明一个将被导出的接口，然后由您的内部类实现它。

```
class __declspec(dllexport) IClientLib {
 public:
    virtual bool Connect(char* strAccountUID,char* strAccountPWD) = 0;
    virtual void LogOut() = 0;
};

class CClientLib: public IClientLib {
...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:56:21.223

考虑一下您要问的内容...`Connect`和`Logout`都是非静态成员函数，这意味着您需要在以下类型的实例上调用它们：`intense.Connect()`。现在，如果您不导出类本身，您将无法创建`instance`，并且是否导出`Connect`和`Logout`没有区别，它们将无法使用。

另一种方法是不导出它们中的任何一个，并提供具有相同功能的导出的自由函数，这些函数适用于在 DLL 之外不*可见的类的某些实例。*或者，提供第三个函数，在库中创建*句柄*，其中*句柄*可以是`void*`指向动态分配的类型实例的不透明 () 指针，然后将*句柄*作为额外参数传递给`Connect`and的自由函数版本`Logout`。您还需要添加第四个函数来释放该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:01:55.433

您可以通过简单地创建两个函数来调用所需的类方法来完成导出它们。IE

```
CCLientLib g_clientLib;

__declspec(dllexport) void CClientLib_LogOut()
{
    g_clientLib.LogOut();
} 
```

但我不明白你为什么需要这个，因为它足以标记你不想使用“私人”修饰符访问的方法（如你的示例中所做的那样）。

# jquery - jQuery 验证 onfocusout

> ID：10226583
> 
> 赞同：1
> 
> 时间：2012-04-19T10:57:38.313
> 
> 标签：jquery

我正在尝试验证位于此处的此表单：http: [//jsfiddle.net/PEmFH/8/](http://jsfiddle.net/PEmFH/8/) 我想在 onfocusout 上进行验证（每次用户离开现场时验证）。由于某种原因它不起作用。

请在此处找到更新的小提琴：http: [//jsfiddle.net/PEmFH/11/](http://jsfiddle.net/PEmFH/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T22:48:47.623

如果元素有效或无效，您应该使用返回 true 或 false 的“元素”方法 [http://jqueryvalidation.org/Validator.element/](http://jqueryvalidation.org/Validator.element/)

这是我解决的方法：

```
$.each($('#form input[type="text"], #form textarea'), function(index, control) {
    $(control).focusout(function() {
        if ($('#form').validate().element(this)) {
           //Code for show a valid message or remove a invalid message                     
        } else {
           //Code for show a invalid message
        }
    });                
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T04:46:31.510

它也可能有帮助

```
//This is used to validate the Length Exceeded to Account number text box.
    $('#AccountName').focusout(function () {
        var currentVal = $.trim($('#AccountName').val()).toLocaleLowerCase().length;
        if (currentVal > 50) {
            alert("Length Exceeded");
            return false;
        }
    }); 
```

# objective-c - 表格视图不显示自定义单元格

> ID：10226584
> 
> 赞同：0
> 
> 时间：2012-04-19T10:57:39.300
> 
> 标签：objective-c, ios

我有一个视图控制器，当单击按钮时会显示一个表视图控制器。表格视图委托一切正常，表格视图显示正常，但在 ellForRowAtIndexPath: 委托方法中，单元格被实例化并返回，但未正确显示。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"alrededor";

    alrededorCell *cell = [tableView 
                           dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[alrededorCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *categoria = [[NSDictionary alloc] initWithDictionary: [_categoriasArray objectAtIndex:indexPath.row]];

    NSLog(@"categoria %@", categoria);

    cell.title.text = [categoria valueForKey:@"title"];

    return cell;

} 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:01:48.263

你为什么要这样创建你的细胞？

```
if (cell == nil) {
    cell = [[alrededorCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:CellIdentifier];
} 
```

如果是您自己的自定义单元格，为什么要使用 UITableViewCellStyleDefault ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:52:08.380

如果您正在加载的单元格是 UITableViewCell 的子类，并且您已经使用界面构建器来构建单元格，那么您必须做几件事。

在 nib 文件中删除创建时存在的视图，添加 UITableViewCell 并将其类更改为 alrededorCell。更改单元格类而不是文件的所有者。当您链接按钮、标签等时。确保将它们链接到单元格而不是文件所有者。还将单元格 uniqueIdentifier 设置为 alrededor。

在 cellForRowAtIndexPath 中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"alrededor";

    alrededorCell *cell = [tableView 
                       dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *xib = [[NSBundle mainBundle] loadNibNamed:@"nibName" owner:nil options:nil];
        for (alrededorCell *view in xib) {
            if ([view isKindOfClass:[alrededorCell class]]) {
                cell = view;
            }
        }
    }

    NSDictionary *categoria = [[NSDictionary alloc] initWithDictionary: [_categoriasArray objectAtIndex:indexPath.row]];

    NSLog(@"categoria %@", categoria);

    cell.title.text = [categoria valueForKey:@"title"];

    return cell;

} 
```

# git - 通过 Git 共享未完成的工作（未提交和新文件）

> ID：10226586
> 
> 赞同：5
> 
> 时间：2012-04-19T10:57:45.947
> 
> 标签：git

我在三个不同的工作站上工作。我希望能够在编码会话中间离开工作站，稍后在另一个工作站上恢复这项工作。鉴于代码是通过远程 git repo 共享的，我想使用 git 来共享这个未完成的工作。

实际上，*未完成的工作*意味着

*   有更改的文件，
*   有新的未跟踪文件，
*   有被删除的文件。

大多数情况下，这些更改是临时的：并非所有更改和大多数未跟踪的文件都会在最终提交中完成。未跟踪文件的一个示例是复制了 20 处略有不同的修改以用于测试目的的测试文件；我只在处理某个问题时才关心所有这些文件，并且我不想在切换到另一个工作站时浪费时间重新生成它们。

我见过其他使用分支来推动这些更改的问题和解决方案：虽然我对此很满意，但问题是这些分支每次都会被重写，需要`git push --force`（我不太喜欢`--force`）或允许它们成为随着时间的推移非常混乱。

**我想要的**是一个简单的命令或 git 别名，它允许我存储工作目录的当前状态，而不会“过多地”弄乱 git 历史记录。必须有一个配套的简单命令或 git 别名，允许我从其他工作站下载这些临时更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-11T23:29:07.053

使用 git stash 将更改保存到文件中。

```
git stash
git stash show -p > myPatchFile 
```

在另一台计算机上应用它们

```
git apply myPatchFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:21:59.380

1.  您可以使用`git add -A`删除已删除的文件并添加新文件。然后将其提交到名为 say 的分支`my_current_work`中。使用 . 通过远程仓库交换它`--force`。您可以共享一个新的遥控器，该遥控器仅供您使主仓库更清洁。或者，如果您在工作站之间有网络链接，您可以直接在它们之间推送/拉取更改。在将您的工作合并到主分支之前，您`rebase -i`需要清理提交历史记录。

2.  作为远程 repo 交换的替代方法，您可以通过电子邮件 ( `git-send-email`) 发送补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:05:43.653

您可能可以使用 stash，但我不确定它是否适合。

一种选择是创建一个提交，该提交将添加所有需要的文件，并在需要时挑选它，并在推送到公共 repo 之前使用交互式 rebase 将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T12:00:06.567

保留个人功能分支（最好在个人存储库中），提交所有内容，不要重写历史记录，用于`git commit --fixup=<commit>`更改提交引入的不需要的更改，当您的日常工作或功能完成时，只需`git rebase -i`将此分支放入主功能分支或主分支。

# android - Android进程在后台后死机

> ID：10226587
> 
> 赞同：0
> 
> 时间：2012-04-19T10:57:50.580
> 
> 标签：android

我有一个聊天应用程序，它使用一个线程作为套接字。我的问题是：在我进入后台后，有时应用程序会被我手机中的启动器杀死。

在平板电脑上，每个后台/前台操作都有一个“应用程序死亡，被启动器杀死”

我该如何解决这个问题？

**更新：**

```
 <activity android:name=".ChatStart"
              android:label="@string/app_name" 
              android:launchMode="singleTop"
              android:configChanges="orientation|keyboardHidden"
              android:screenOrientation="landscape" 
              android:windowSoftInputMode="stateHidden|adjustPan"

              android:theme="@android:style/Theme.NoTitleBar" 
              >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

**如何将其重写为服务？仅在清单中这样做是一种简单的方法吗？**

谢谢，莱斯利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:34:06.393

当您的应用程序处于后台时，Android 可能会在它认为合适的任何时候终止它。这通常发生在需要内存时，即启动其他程序时。

为了防止 Android 自动终止您的应用程序，您需要一个[服务](http://developer.android.com/guide/topics/fundamentals/services.html)。使用服务使 Android 在需要内存时杀死您的进程的可能性大大降低（但并非不可能）。

# c# - 调用 javascript:void(0) 时 WebBrowser 控件未完成加载

> ID：10226589
> 
> 赞同：1
> 
> 时间：2012-04-19T10:57:54.853
> 
> 标签：c#, javascript, .net, winforms, webbrowser-control

我有一个使用`WebBrowser`控件的 C# 应用程序。

在一个页面上，用户可以单击一个按钮来处理一些信息并导航到一个新页面。问题是，当用户单击此按钮时，`WebBrowser`似乎就停止了。

我在我的代码中处理`Navigating`,`Navigated`和`DocumentCompleted`事件，我看到了该`Navigating`事件，但没有别的。

这是被点击按钮的 HTML：

```
<div class="right button-wrapper">
    <div class="clearfix right">
        <span id="nextbutton" 
              class="button-link button-link btn-reg btn-blue-reg">
            <span class="hasHover"><a id="btnPay" 
                href="javascript:void(0);" class="buttons">Next:Pay and Print</a>
            </span>
         </span>
    </div>
</div> 
```

可以毫无问题地单击其他页面上的按钮。

我假设它与`href="javascript:void(0);"`HTML 的部分有关，但不知道为什么。在 IE 或 Firefox 等浏览器中，单击此按钮时会出现进度条之类的内容，并说“处理中”几秒钟，然后加载下一页。

**编辑**：我应该提到导航处理程序触发两次，然后页面冻结。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T21:43:54.263

这显然是由 IE7+ 的“[脚本 URL 缓解](http://msdn.microsoft.com/en-us/library/ee330735%28v=vs.85%29.aspx#url_mitigate)”功能引起的，可以通过禁用 FEATURE_SCRIPTURL_MITIGATION 为您的应用程序修复。

# c++ - 任何 C++ 98 标准容器操作都可以抛出 std::bad_alloc 吗？

> ID：10226591
> 
> 赞同：3
> 
> 时间：2012-04-19T10:58:08.060
> 
> 标签：c++, stl

我试图确定以下代码中是否需要 try catch：

```
std::vector<int> values;
// ignore that this can throw std::bad_alloc
values.push_back(1);
try {
    for (std::vector<int>::iterator iter = values.begin();
         iter != values.end(); ++iter) {
         ++(*iter);
    }
} catch (const std::bad_alloc&) { 
    // Is this needed?
} 
```

查看 C++ 1998 标准，我唯一能找到的提示是第 23.1 节“容器要求”项目符号点 8，其中包含以下句子：

> 此参数的副本用于在每个容器对象的生命周期内由这些构造函数和所有成员函数执行的任何内存分配。

我对此的解释是容器中的任何成员函数都可以调用分配器，因此任何成员函数都可以抛出 std::bad_alloc。我是不是过于偏执了，还是真的是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:15:30.953

如果您继续阅读，您会发现 23.1/10，它给出了容器关于何时可以抛出异常的要求，特别是：

*   否`erase()`，`pop_back()`或`pop_front()`函数抛出异常。
*   返回的迭代器的任何复制构造函数或赋值运算符都不会引发异常。

如果你真的很偏执，那么你应该考虑`begin()`and的可能性`end()`，甚至迭代器增量，抛出；但是他们不需要在标准容器的任何理智实现中做任何复杂的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T10:59:56.797

理论上是的，任何标准库容器成员函数都可以抛出`bad_alloc`.

大多数标准容器本身不会抛出除 ( `std::vector::at()`) 之外的任何异常，但它们可以抛出内存分配失败或用户定义操作异常的异常。

我假设您的恐惧是`push_back()`在您的示例案例中引发，如果不是，那么是的，您是偏执狂。`begin()`尽管如此，它是一个实现细节在实践中，如果您只是获取迭代器（ ， ），几乎没有一个实现会尝试分配`end()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:11:52.330

我没有在标准中找到更具体的内容，因此在没有证据的情况下，我们必须得出结论，从技术上讲，任何容器方法都可以抛出`bad_alloc`.

就容器本身而言，我不会担心`begin`和抛出，但还有另一个麻烦点：迭代器实现。`end`如果迭代器是类类型，那么理论上此类实例的构造（或分配）很可能会抛出。因此，虽然我认为任何随机选择的标准库实现都不可能抛出，但您不能真正排除它。

# jsf-1.2 - 验证中的自定义错误未显示在 h:message 中

> ID：10226597
> 
> 赞同：0
> 
> 时间：2012-04-19T10:58:36.883
> 
> 标签：jsf-1.2

当用户为 Double 值插入错误输入时，我想显示一条自定义消息，但是当我测试我的应用程序时，我总是看到默认错误消息。

那是我的自定义messages.properties：

```
`javax.faces.convert.DoubleConverter.CONVERSION=My Conversion Error(Double)
javax.faces.convert.DoubleConverter.CONVERSION_detail=My Conversion Error(Double)
javax.faces.component.UIInput.CONVERSION=My Conversion Error
javax.faces.component.UIInput.CONVERSION_detail=My Conversion Error(Double)
javax.faces.validator.NOT_IN_RANGE=My Validation Error
javax.faces.validator.NOT_IN_RANGE_detail=My Validation Error
javax.faces.validator.DoubleRangeValidator.LIMIT=Validation Limit Double
javax.faces.validator.DoubleRangeValidator.LIMIT_detail=Validation Limit Double
javax.faces.validator.DoubleRangeValidator.TYPE=Error Type Double
javax.faces.validator.DoubleRangeValidator.TYPE_detail = Error Type Double
javax.faces.component.UIInput.REQUIRED=Requested!!
` 
```

在这里我的 faces.config

```
`<application>
<message-bundle>it.exaple.messages.MyMsg</message-bundle>
</application>` 
```

这是我的页面：

```
`<td>
<h:inputText id="Value" value="#{user.value}" required="true">
<f:validateDoubleRange minimum="0.0" maximum="200.0"/></h:inputText>
<h:message for="username" showDetail="true" showSummary="true" style="color:red"/>
</td>` 
```

这真的很奇怪，因为当我使用空值测试我的应用程序时，我可以读取我的自定义消息，但是当我尝试插入一个字符串时，我看到了默认错误消息！当我将 a 设置为过高或过低的值时，也会发生同样的事情！

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:44:32.127

我希望您必须覆盖这些默认消息以验证双精度范围。我希望您已`user.value`在托管 bean 中定义为 double。

```
javax.faces.validator.DoubleRangeValidator.MAXIMUM
javax.faces.validator.DoubleRangeValidator.MINIMUM
javax.faces.validator.DoubleRangeValidator.NOT_IN_RANGE 
```

# java - 从.html页面java中解析文本

> ID：10226602
> 
> 赞同：0
> 
> 时间：2012-04-19T10:58:49.783
> 
> 标签：java, html

我想从网站中解析出这个字符串并识别并将颜色存储在一个变量中（假设它的绿色分配值为 0，或者是否为其他 1）。

```
<tr><td class="mapbuttons" align=right>
<a href="http://www...."><font color=green>TEXT <font color=#ff8000>(2)</font>3/14</font></a> 
```

我找到了这个演示代码：

```
import java.net.*;
import java.io.*;
public class WebSiteReader {
  public static void main(String args[]){
       String nextLine;
       URL url = null;
       URLConnection urlConn = null;
       InputStreamReader  inStream = null;
       BufferedReader buff = null;
       try{
          // Create the URL obect that points
          // at the default file index.html
          url  = new URL("http://www.yahoo.com" );
          urlConn = url.openConnection();
         inStream = new InputStreamReader( 
                           urlConn.getInputStream());
           buff= new BufferedReader(inStream);

       // get the values I want here

     } catch(MalformedURLException e){
       System.out.println("Please check the URL:" + 
                                           e.toString() );
     } catch(IOException  e1){
      System.out.println("Can't read  from the Internet: "+ 
                                          e1.toString() ); 
  }
 }
} 
```

1) 正确吗？我的意思是我只需要用我想要的代码替换注释，对吧？2）你能帮我写代码吗，因为我是java新手以及如何“玩”文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:02:08.270

使用[JSoup](http://jsoup.org/)完成繁重的工作（为您解析 HTML）。解析 HTML 真的很困难，因为那里的很多东西都是损坏的 HTML。

类似于下面的东西（丝毫没有测试应该选择第一个字体元素并提取颜色属性的值。

```
Document doc = Jsoup.connect("http://www.yahoo.com").get();
Element fontTag = doc.select("font").first();
string theColor = fontsTag.attr("color"); 
```

# java - 比较java中的两个音频文件

> ID：10226609
> 
> 赞同：2
> 
> 时间：2012-04-19T10:59:06.273
> 
> 标签：java, fft, frequency, jmf, pitch

我想做一个项目，我将在其中录制用户的声音，然后将其与存储的声音进行比较。我搜索了它，并提出了 MFCC 和 FTT 算法。但我真的不明白它们是如何工作的。我在互联网上找到的只有理论，没有任何实践知识。我没有电气背景，所以对波和信号知之甚少。

我发现声音有一些特征，比如 -pitch -amplitude -frequency -energy

有没有办法通过编码来计算所有这些。我的项目在java中。如果有人对此有一些信息，请帮助我。

# c# - 如何根据登录成功在新窗口/选项卡或同一窗口/选项卡中打开页面？

> ID：10226614
> 
> 赞同：2
> 
> 时间：2012-04-19T10:59:41.110
> 
> 标签：c#, javascript, asp.net, forms, iframe

我有登录页面，它是 IFrame。如果用户成功登录，我想用他的个人内容打开新页面，如果不是，我想在同一个 iFrame 中显示错误消息。

这是我的代码：

```
<form class="register-form" runat="server" id='form1' target="_blank">
      <div class="input username">
        <asp:TextBox ID="tbUsername" runat="server" type="text" value="Username"></asp:TextBox>
      </div>
        <div class="input password">
          <asp:TextBox ID="tbPassword" runat="server" value="Password" type="text"></asp:TextBox>
        </div>
      <div class="submit">
        <asp:Button runat="server" ID="btnSignIn" type="button" OnClick="btnSignIn_Click">
        </asp:Button>
      </div>
</form> 
```

如您所见，我最初将表单目标属性设置为“_blank”，并计划动态更改它。

这是我在后面代码中的 onclick 事件：

```
protected void btnSignIn_Click(object sender, EventArgs e)
    {
        if (Membership.Providers["CmsMembershipProvider"].ValidateUser(tbUsername.Text, tbPassword.Text))
        {
            Session["Username"] = tbUsername.Text.ToString();
            FormsAuthentication.SetAuthCookie(tbUsername.Text, true);         
            Response.Redirect("../Pages/MyProjects.aspx");
        }
        else {
            btnSignIn.OnClientClick = "openInSameWindow()";
            Msg.Text = "Login failed. Please check your user name and password and try again.";
        }
    } 
```

这是简单的js函数：

```
 <script type="text/javascript">

        function openInSameWindow() {
            var myForm = document.getElementById('form1');
            myForm.target = '_self';
        }
</script> 
```

页面始终在新选项卡/窗口中打开。在我从后面的代码中将目标设置为“_self”之前，我发现该表单已经在新页面中打开了。

这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:25:42.680

> 页面始终在新选项卡/窗口中打开。在我从后面的代码中将目标设置为“_self”之前，我发现该表单已经在新页面中打开了。

你说的对。ASP.net 代码在 target="_blank" 用于表单之后执行。所以你的 target="_self" 设置是错误的。

您遇到的问题的一种解决方案是使用弹出窗口显示“../Pages/MyProjects.aspx”页面。

否则，如果您可以在 IFRAME 外部的同一窗口中显示“../Pages/MyProjects.aspx”，我会更喜欢它。否则，让用户在 iframe 中显示适当的消息。

对于第一种方法，您必须在用户提交表单即`form.onsubmit`处理程序时打开弹出窗口。成功登录后，将 POPUP 的位置设置为“Pages/MyProjects.aspx”，否则关闭 POPUP。当然不要设置 target="_blank"

对于第二种方法，也不要设置目标（即它应该是_self）和成功登录设置位置，如下所示。

```
window.top.location = "Pages/MyProjects.aspx" 
```

这样你的早期功能就变成了

```
function openInSameWindow() {
  window.top.location = 'Pages/MyProjects.aspx';
} 
```

当出现错误时，它们将仅显示在 iframe 中。

# javascript - javaScript 中的这种模式是什么，我在哪里可以阅读更多关于它的信息

> ID：10226617
> 
> 赞同：5
> 
> 时间：2012-04-19T10:59:48.380
> 
> 标签：javascript, jquery

我有类似于以下的代码：

```
 (function(MyHelper, $, undefined){

var selectedClass = "selected";

MyHelper.setImageSelector = function(selector) {
    var container = $(selector);

    setSelected(container, container.find("input:radio:checked"));
    container.find("input:radio").hide().click(function() {
        setSelected(container, $(this));
    });
};

MyHelper.enableIeFix = function(selector) { 
    var container = $(selector);
    container.find("img").click(function() {
        $("#" + $(this).parents("label").attr("for")).click();
    });
};

function setSelected(container, selected) {
    container.find("label").removeClass(selectedClass);
    selected.siblings("label").addClass(selectedClass);
}

 }( window.MyHelper = window.MyHelper || {}, $)) 
```

我是 JS 的新手，我想知道这是否是 javascript 编程中的特定模式。我特别想知道最后一行的含义是什么：

```
 }( window.MyHelper = window.MyHelper || {}, $)) 
```

是模块模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:19:08.150

是的，这基本上是一个模块模式。

如何使用模块模式创建模块的总结是：

*   创建模块范围，通常使用立即调用的函数表达式 (IIFE) 创建闭包。这将为您的模块创建“私人空间”，避免全局污染并保持代码模块化和隔离。

*   有一个命名空间来附加您的公共方法。开发人员有不同的方法来执行这个“附件”过程。一些开发人员将对象“提交”到模块，而其他开发人员“返回”要存储在变量中的对象。不管怎样，都是一样的。

在这种情况下，它是模块模式的“hand-in”版本

```
(function(MyHelper, $, undefined){

    var selectedClass = "selected";

    MyHelper.setImageSelector = function(selector) {};

    function setSelected(container, selected) {}

}(window.MyHelper = window.MyHelper || {}, $)) 
```

* * *

在最后一行，它立即调用你的函数并发送这些参数

```
(window.MyHelper = window.MyHelper || {}, $) 
```

它类似于这样做，但不使用函数名：

```
function anonymous(MyHelper, $, undefined){...}
anonymous(window.MyHelper = window.MyHelper || {}, $); 
```

*   第一个参数，`window.MyHelper = window.MyHelper || {}`是操作的组合。无论该操作返回什么，都会`MyHelper`在模块中提供参数。

    *   这`||`是一个“默认”操作。如果左边的值`||`是“假的”，那么表达式“默认”假定的值是右边的值。因此，在您的代码中，如果`window.MyHelper`不存在，则默认为 object `{}`。

    *   使用“默认”操作，`window.MyHelper`将分配一个现有的`window.MyHelper`或如果不存在，则分配一个新的 Object 实例`{}`

    *   JavaScript 中的赋值操作确实会返回值。赋值操作返回的值是赋给变量的值。这也使得整个操作为模块提供价值成为可能。

*   第二个参数是什么`$`（我假设是 jQuery？）

*   第三个参数没有传递，从内部看，它是未定义的。这样做是因为据我所知，它`undefined`是可变的。所以有一个纯粹的 undefined `undefined`，我们什么都不发送，因此变量`undefined`是`undefined`。

* * *

这段代码的作用：

```
MyHelper.setImageSelector = function(selector) {}; 
```

已添加到`MyHelper`该方法中`setImageSelector`，并且由于您`MyHelper`来自外部，因此现在使用它的任何人都拥有该`MyHelper.setImageSelector()`方法。

IFFE 中未扩充的其他函数和变量`MyHelper`是您所谓的“私有”成员。JavaScript 有一个函数作用域，这意味着它会为每个函数声明创建一个新作用域。简单来说，里面可以看到外面，外面看不到里面。这也是不使用大量函数和变量污染全局范围的一种方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:03:08.740

这是一个 JavaScript 类。你可以在这里阅读更多关于它们的信息：

[http://javascript.about.com/library/bltut35.htm](http://javascript.about.com/library/bltut35.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:07:31.747

它在存在时扩展全局 MyHelper 对象，否则创建一个新对象。传递了 Jquery 全局并将 undefined 声明为参数，因此可以使用 js 最小化器对其进行压缩。

对我来说看起来很像模块模式。另请参阅： [http ://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjquery](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:23:20.390

匿名函数在其定义后立即被调用/调用

```
(
 function(arg1,arg2){
 }
)(xarg1,xarg2); 
```

最后一行调用定义的匿名函数。您的匿名函数的参数是

1.  **窗口.MyHelper = 窗口.MyHelper || {}** /*MyHelper 全局对象，如果未定义则为空对象 */
2.  **$** /* jQuery 或原型对象。使用 jquery 它通常是“jQuery”全局对象，以避免与其他库发生冲突 */

匿名函数的第三个参数“**未定义**”确保没有人覆盖或隐藏实际未定义。

这在 javascript 中定义了一个安全的自调用函数。

# python - 你如何定义 Fabric 推送到 GitHub 的主机？

> ID：10226618
> 
> 赞同：2
> 
> 时间：2012-04-19T10:59:49.300
> 
> 标签：python, github, fabric, gitpython

### 原始问题

我有一些 python 脚本，它们一直在使用 Amazon S3 上传脚本中 Selenium 测试后拍摄的屏幕截图。

现在我们正在从 S3 转移到使用 GitHub，所以我找到了 GitPython，但看不到您如何使用它来实际提交到本地 repo 并推送到服务器。

我的脚本构建了一个类似于`\images\228M\View_Use_Case\1.png`工作区中的目录结构，当上传到 S3 时，这是一个简单的过程；

```
for root, dirs, files in os.walk(imagesPath):
    for name in files:
        filename = os.path.join(root, name)
        k = bucket.new_key('{0}/{1}/{2}'.format(revisionNumber, images_process, name)) # returns a new key object
        k.set_contents_from_filename(filename, policy='public-read') # opens local file buffers to key on S3
        k.set_metadata('Content-Type', 'image/png') 
```

是否有类似的东西，或者`git add images`我完全错过了 GitPython 中的 bash 类型命令这样简单的东西？

## 用织物更新

因此，我根据 kracekumar 的建议安装了 Fabric，但找不到有关如何定义（GitHub）主机的文档。我的脚本非常简单，只需尝试上传即可；

```
from __future__ import with_statement
from fabric.api import *
from fabric.contrib.console import confirm
import os

def git_server():
    env.hosts = ['github.com']
    env.user = 'git'
    env.passowrd = 'password'

def test():
    process = 'View Employee'
    os.chdir('\Work\BPTRTI\main\employer_toolkit')
    with cd('\Work\BPTRTI\main\employer_toolkit'):
        result = local('ant viewEmployee_git')
    if result.failed and not confirm("Tests failed. Continue anyway?"):
        abort("Aborting at user request.")

def deploy():
    process = "View Employee"
    os.chdir('\Documents and Settings\markw\GitTest')
    with cd('\Documents and Settings\markw\GitTest'):
        local('git add images')
        local('git commit -m "Latest Selenium screenshots for %s"' % (process))
        local('git push -u origin master')

def viewEmployee():
    #test()
    deploy() 
```

它有效 \o/ 万岁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:12:54.837

你应该看看面料。[http://docs.fabfile.org/en/1.4.1/index.html](http://docs.fabfile.org/en/1.4.1/index.html)。自动化服务器部署工具。我已经使用了一段时间，它工作得很好。

这是我使用它的应用程序之一，[https://github.com/kracekumar/sachintweets/blob/master/fabfile.py](https://github.com/kracekumar/sachintweets/blob/master/fabfile.py)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:37:57.663

看起来你可以这样做：

```
index = repo.index
index.add(['images'])
new_commit = index.commit("my commit message") 
```

然后，假设您将 origin 作为默认遥控器：

```
origin = repo.remotes.origin
origin.push() 
```

# java - 私人课程和 uml

> ID：10226620
> 
> 赞同：5
> 
> 时间：2012-04-19T10:59:58.403
> 
> 标签：java, uml

我有一些内部私有类，我不确定将它们放在我的类图中的哪个位置。他们应该在外部班级还是自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:08:01.937

您可以在外部类的一侧使用`containment`带有标志的外部表示它们。`+`你可以在[这里](http://www.holub.com/goodies/uml/index.html)找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T04:01:59.253

UML 语言和您使用的任何建模工具之间总是存在差异，因此实现某事的最佳方式取决于工具。

在 UML 中，类具有可见性/范围，就像类成员一样。换句话说，UML 允许私有类，但这并不意味着您的工具可以显示该类的“私有性”。

UML 还允许类包含其他类。换句话说，类可以充当包。同样，该工具的显示方式各不相同。

从纯粹的 UML 角度来看，我建议将内部类包含在外部类中，并标记为私有。

在图表中，如果您的工具未显示命名空间，您可以调整外部类的大小并将内部类放在其中。如果您的工具允许调整大小，那就是。

最后，除非您总共只有八个或十个类，否则我建议您在单独的图中显示内部类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:05:48.983

UML 用于设计或描述复杂的体系结构。我认为在 UML 类图中提及内部类并不重要。如果您在接口级别设计您的系统，那么您的实现和私有类以及所有私有方法都是失焦的。您的图表应该只包含公共方法 = 接口方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:15:07.180

我认为您不能在 UML 类图中的另一个类中拥有一个类。您在 UML 中呈现它们的方式应该反映它们与父类的结构关系。如果它们是为了方便而在内部创建的，您可以将它们连接起来。如果它们具有包含或聚合关系，则 UML 具有适当的语法。在任何情况下，内部类都是特定于语言的，因此 UML 对它们有任何明确的支持会很奇怪（而且确实是错误的设计）。

可能相关的外部讨论： http: [//www.coderanch.com/t/99318/patterns/Inner-Class-UML](http://www.coderanch.com/t/99318/patterns/Inner-Class-UML)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-26T15:37:05.510

这是我找到的解决方案![在此处输入图像描述](../Images/75ec0f56e75bed76b5a3d69d6a19495b.png)

来源[http://www.informit.com/articles/article.aspx?p=336264&seqNum=3](http://www.informit.com/articles/article.aspx?p=336264&seqNum=3)

# git - 将分支合并到 Git 中的多个分支

> ID：10226622
> 
> 赞同：2
> 
> 时间：2012-04-19T11:00:10.360
> 
> 标签：git, merge, branch, branching-and-merging

假设，我有多个分支：`feature_1`，从`HEAD`of分支`master`，然后`feature_2`从`HEAD`of分支`feature_1`，从of`feature_3`分支。`HEAD``feature_2`

然后我发现`feature_1`. `feature_2`我修复它并提交，现在`feature_3`仍然包含这个错误。解决此问题的一种方法是合并`feature_1`到`feature_2`and上`feature_3`。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:54:50.883

当然，合并是一种可能的解决方案。但是，如果您可以忍受的话，这会创建合并提交。但是，如果您想避免这些合并提交，一种更简洁的方法是重新设置 feature_2 和 feature_3 分支。

我会避免使用cherry-pick，因为它会在多个分支上创建具有相同内容的新提交。如果我在例如 feature_1 上修复了一个严重的错误，但也希望在 master 上修复它，我只会使用cherry-pick，而不必将完整的功能分支合并到 master 中以获得该修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:01:35.663

樱桃采摘主要用于您所描述的内容。

[http://linux.die.net/man/1/git-cherry-pick](http://linux.die.net/man/1/git-cherry-pick)

# ruby-on-rails - 与在 Heroku 上工作的 Faye 服务器的连接如何？

> ID：10226623
> 
> 赞同：1
> 
> 时间：2012-04-19T11:00:10.713
> 
> 标签：ruby-on-rails, heroku, faye

我知道 Heroku 不提供对 websockets 的支持，仍然可以运行 Faye 服务器，并在客户端有实时通知。

这是如何工作的，更具体地说是从客户端浏览器的角度来看？所有主流浏览器都支持它吗？它是否退回到与 websocket 不同的另一种“协议”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:11:12.370

您可以通过以下方式禁用 Faye 的 websocket 支持客户端：

```
client.disable('websocket'); 
```

正如他们的文档中所讨论的：http: [//faye.jcoglan.com/browser.html](http://faye.jcoglan.com/browser.html)在这种情况下，它会退回到长轮询作为协议。

这是一种常见的回退方法，并被其他实时消息传递库（例如[Socket.io）使用](http://socket.io/)。

希望有帮助！

# linux - 将 IP 数据包从一个 IP 地址路由到另一个

> ID：10226624
> 
> 赞同：3
> 
> 时间：2012-04-19T11:00:16.337
> 
> 标签：linux, networking, routing

有人可以告诉我在linux系统中路由数据包的方式是什么。我的 linux 系统上有一个外部和内部网络接口。我想将到达我的外部网络的数据包转发到内部网络。

我没有iptables。其他方法是什么？本机 linux 提供了哪些命令。是否应该为此始终启用 Netfilter？我的内核没有附带 Netfilter。

所以请建议。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:02:22.950

假设您谈论的是*真正的*路由，而不是任何形式的网络地址转换 (NAT)，您只需要启用 IP 转发，并将相关路由放入您的路由表中：

```
echo 1 > /proc/sys/net/ipv4/ip_forward 
```

配置 NAT 确实需要 iptables。

# php - 如何仅在 PHP 中显示日期？

> ID：10226627
> 
> 赞同：2
> 
> 时间：2012-04-19T11:01:09.423
> 
> 标签：php, datetime

如何以表格返回日期的格式（Y：m：d）仅显示日期（无时间）？当我在sql中选择日期时，它会显示为图片1（例如：2012-04-10），保存并显示回来后它会显示为图片2（例如：2012年4月10日12:00:00）。我想如何在表返回日期中显示为（例如：2012-04-10）而不是显示为（例如：2012 年 4 月 10 日 12:00:00）。谢谢

图片1

![在此处输入图像描述](../Images/9e8ddcd48afdd4c0d7690d40755b26bc.png)

图二

![在此处输入图像描述](../Images/b4180871412bc6d51b0704d24cb05026.png)

在 Result.php 下

```
$query = "SELECT ....BE.[batch_id],BED.[ReturnDate] 
FROM .... as BE 
INNER JOIN .... as BED
ON BE.[batch_exception_id] = BED.[batch_exception_id]
WHERE BE.[process_date_time] between '$date1' and '$date2'"; 

while ($row = mssql_fetch_assoc($result)) {   
$rDate = $row['ReturnDate'];
$beID = $row['batch_exception_id'];                         
$proc_dt = $row['process_date_time'];
$batchid = $row['batch_id'];
echo "<tr>";
echo "<td>" . $beID . "<input type='hidden' name='beID[$i]' value='$beID'/></td>";
echo "<td>" . $batchid . "<input type='hidden' name='batchid[$i]' value='$batchid'/></td>";
echo "<td>" . $proc_dt . "<input type='hidden' name='procDT[$i]' value='$proc_dt'/></td>";

echo "<td>";
$date="date[".$i."]"; 
echo "<input type='text' name='date[$i]' id='$date' value='$rDate' onclick=\"fPopCalendar('".$date."')\">";
$i++;
echo "</td>";
echo "</tr>";   
} 
```

在 Save.php 下

```
//Select database
$selected = mssql_select_db($myDB, $link)or die("Couldn't open database $myDB");

for ($i=0; $i<$tot_rec;$i++) {
$ret_date=trim($arrretDate[$i]);
ECHO "$ret_date<br>";
if (strlen($ret_date)>0) {
$query = "UPDATE .....
SET [ReturnDate] = '$ret_date'
WHERE [batch_exception_id]= '$arrbeID[$i]'";

$result = mssql_query($query);}
}
//execute the SQL query                     
if ($result){   
header("Location:....");}
else{   
echo "Error Save";   
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-19T11:04:59.173

你可以试试这个 `date('Y:m:d', strtotime($date));`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T11:09:16.813

您可以使用：`strftime("%Y-%m-%d",$date);`. 另请检查[此](http://www.php.net/manual/en/function.strftime.php)链接。

文档内容：

> **strftime** — 根据区域设置格式化本地时间/日期
> 
> **说明：**字符串 strftime ( string $format [, int $timestamp = time() ] )

```
%Y  Four digit representation for the year  Example: 2038
%m  Two digit representation of the month   01 (for January) through 12 (for December)
%d  Two-digit day of the month (with leading zeros) 01 to 31 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:17:46.217

尝试这个..

```
SELECT DATE( ReturnDate ) as dat FROM Batch 
```

返回日期：2012年9月12日12:24:12

日期：2012 年 9 月 12 日

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:06:33.743

您可以使用[date()](http://php.net/manual/en/function.date.php)函数以任何格式显示日期。

# html - HTML/CSS IE7 z-index 错误

> ID：10226629
> 
> 赞同：1
> 
> 时间：2012-04-19T11:01:14.963
> 
> 标签：html, css, internet-explorer, cross-browser

两个问题，一大一小。

我有一个可爱的下拉菜单，它在除 IE7 之外的任何其他浏览器中都不会让我感到悲伤。在 IE7 中，它似乎忽略了`z-index`下拉列表包含的值，`ul`并将其放在内容后面，如下所示：

![IE7与Firefox的比较](../Images/8f2b2760cec08be7fe96520cb552b752.png)

第二个问题是（您必须尝试菜单才能看到这个）当`ul`您将鼠标悬停在菜单项上后第一个出现时，它的宽度很小并且它有点突然出现大小。（仅在 IE7 中再次）

您可以在此处查看该页面：[http ://rcnhca.org.uk/sites/first_steps/](http://rcnhca.org.uk/sites/first_steps/)

**这是相关的 HTML 标记**（注意我使用的是 960 网格系统）：

```
 <div id="header">
        <div class="container_16">
            <div class="grid_16" id="breadcrumbs">
                <a href="http://rcnhca.org.uk/sites/first_steps" id="home" class="grid_1 alpha"></a>

                <ul id="parent" class="grid_15 omega">
                <li><a href="http://rcnhca.org.uk/sites/first_steps/">Select a topic</a><ul class="child"><li><a href="http://rcnhca.org.uk/sites/first_steps/getting-started/">Getting started</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/communication/">Communication</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/health-safety-and-security/">Health, Safety and Security</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/">Personal and people development </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/quality/">Quality</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/equality-diversity-and-rights/">Equality, diversity and rights </a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/clinical-skills/">Clinical skills</a></li><li><a href="http://rcnhca.org.uk/sites/first_steps/additional-material/">Additional material</a></li></ul></li>                  </ul>
            </div>
            <div id="supplements" class="grid_16">

                <div id="competency_checklist"><a href="#">Competency checklist</a></div>
            </div>
        </div>
    </div> 
```

**它伴随着 CSS**

```
/* =============================================================================
   Header
   ========================================================================== */

#header {
    width: 100%;
    background: #44a9c4;
}

#supplements {
    height: 45px;
    background: #44a9c4;
    z-index: 1; /* ie7 bug fix */
}

#logobar {
    width: 100%;
    height: 45px;
    background: #3393b5;
    z-index: 1; /* ie7 bug fix */
}

#competency_checklist {
    display: block;
    float: left;
    margin-top: 5px;
    right: 0px;
    height: 31px;
    line-height: 31px;
    padding: 0 10px 0 36px;
    background-image: url(library/images/book-icon-white.png);
    background-position: 5px center;
    background-repeat: no-repeat;
    line-height: 31px;
}

#competency_checklist a{
    font-size: 0.938em;
    text-decoration: underline;
    color: #ffffff;
}

#competency_checklist a:hover{
    text-decoration: none;
}

/* =============================================================================
   Breadcrumb navigation
   ========================================================================== */

#breadcrumbs {
    display: block;
    position: relative;
    height: 39px;
    padding-bottom: 3px;
    background: #ffffff;
    border: 0px solid;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    behavior: url("<?php echo get_template_directory_uri();?>/PIE.php");
}

#breadcrumbs ul {
    list-style: none; 
    list-style-image: none; 
    margin: 0;
}

#breadcrumbs #home{
    display: block;
    height: 39px;
    background-image: url(library/images/home_icon.png);
    background-repeat: no-repeat;
    background-position: 19px center;   
    text-indent: -999em;
}

#breadcrumbs ul#parent {
    display: block;
    height: 39px;
    float: right;
    right: 3px;
    position: relative;
    background: #f38630;
    -webkit-box-shadow: inset 0px -2px 0px 0px #cf7229;
    -moz-box-shadow: inset 0px -2px 0px 0px #cf7229;
    box-shadow: inset 0px -2px 0px 0px #cf7229;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs ul#parent li {
    position: relative;
    height: 39px;
    float: left;
    min-width: 1px; /* required to fix Opera bug */
    padding: 0 47px 0 15px;
    background-image: url(library/images/breadcrumb_seperator.png);
    background-repeat: no-repeat;
    background-position: right;
    line-height: 39px;
    zoom: 1;
}

#breadcrumbs ul#parent li a {
    display: block;
    height: 42px;
    position: relative;
    font-size: 0.938em;
    font-weight:900;
    color: #ffffff;
    text-decoration: none;
    text-shadow: 0px 2px 0px #cf7229;
}

#breadcrumbs ul li a:visited {
    color: #ffffff;
}
#breadcrumbs ul#parent li:first-child ul {
    left: -5px;
}
#breadcrumbs ul#parent li ul {
    position: absolute;
    z-index: 9998;
    left: -28px;
    top: 42px;
    background: #ffffff;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
    padding: 0 3px 0 3px;
    list-style-position: outside;
    min-width: 200px;
    width: auto;
}

.js #breadcrumbs ul#parent li ul {
    display:none;
}

.no-js #breadcrumbs ul#parent li ul {
    left: -999em;
}

#breadcrumbs ul#parent li ul li {
    float: none;
    display: block;
    position: relative;
    height: 26px;
    margin-bottom: 3px;
    padding: 0 15px;
    background-image: url(library/images/star-icon.png);
    background-position: -25px 50%;
    background-repeat: no-repeat;
    background-color: #738793;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    line-height: 26px;
    white-space: nowrap;
    zoom: 1;
}

#breadcrumbs ul#parent li ul li a{
    display: block;
    width: auto;
    color: #ffffff;
    text-decoration: none;
    text-shadow: none;
    font-weight: 100;
}

#breadcrumbs ul#parent li ul li:hover{
    background-color: #3393b5;
}

.no-js #breadcrumbs ul#parent li ul li:hover{
    background-position: 0px 50%;
    text-indent: 10px;
}

.no-js #breadcrumbs ul#parent li:hover ul {
    left: -5px;
}

/* =============================================================================
   Logo bar
   ========================================================================== */

h1#logo {
    display: block;
    position: relative;
    height: 45px;
    background-image: url(library/images/logo.png);
    background-position: left 9px;
    background-repeat: no-repeat;
    text-indent: -999em;
} 
```

**如果**您知道如何使菜单项占据 100% 的`ul`宽度，而无需在其上硬编码宽度，则可以加分。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:05:20.077

**z-index**仅适用于 position `relative`, `absolute`& `fixed`。像这样写：

```
#breadcrumbs {
    position:relative;
    z-index: 4;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:36:34.723

从#supplements（不是整个 .grid_16 类）、#logobar、#logo（也继承自 .grid_7）中删除 position:relative。

在这种情况下，这将修复 IE7。除此之外，我认为您使用的样式太多了；通常你使用的越少越好..但这需要更彻底的检修..这么多默认定位，显示：块，浮动，从另一个继承，只能在我的书中出错..

# postgresql-9.1 - pgpool2 不能重新加入失败的 master 作为新的 slave

> ID：10226633
> 
> 赞同：0
> 
> 时间：2012-04-19T11:01:20.110
> 
> 标签：postgresql-9.1, pgpool

我有一个 pgpool2 3.1.3 安装了 2 个 postgresql 9.1.3 后端，配置为具有流复制的主/从。
如果 master 失败一切正常，slave 接管并成为新的 master。问题是，如果我想重新加入集群中的旧主服务器，这也被添加为主服务器而不是从服务器。
我使用 pgpooladmin 版本 3.1.1。
任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T09:25:21.917

如果你已经成功连接了老主人，那么分离新主人不会导致老主人再次升职吗？

[http://www.pgpool.net/docs/latest/pgpool-en.html#pcp_detach_node](http://www.pgpool.net/docs/latest/pgpool-en.html#pcp_detach_node)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:37:46.240

我发现了问题。当我第一次创建流复制时，我像在流复制教程中一样配置了 postgresql。这里从属和主控在配置文件中激活了不同的设置，这就是问题所在。
在我再次阅读 pgpool2 多服务器教程后，我发现在第一阶段，两台服务器具有相同的设置，并且从服务器将通过 pgpool 启动。
在我纠正后一切正常。

# iphone - 如何获取 Facebook 好友大图？

> ID：10226634
> 
> 赞同：0
> 
> 时间：2012-04-19T11:01:21.217
> 
> 标签：iphone, objective-c, facebook-graph-api

我用这种方法得到的图像非常小

```
[facebook requestWithGraphPath:@"me/friends" 
                     andParams:[ NSDictionary dictionaryWithObjectsAndKeys:@"picture,id,name,link,gender,last_name,first_name",@"fields",nil]
                           andDelegate:self]; 
```

如何用相同的方法获取朋友的大图？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T15:56:15.463

每个图像的 URL 作为字符串返回。您可以通过将文件名中的最后一个字母从“q”更改为“n”来修改字符串，在从 facebook 加载它之后并以任何其他方式使用它之前。

```
small image:         370412_xxxxxxxx_1715222999_q.jpg
medium/square image: 370412_xxxxxxxx_1715222999_s.jpg
large image:         370412_xxxxxxxx_1715222999_n.jpg 
```

看起来像这样：

```
pictureUrl = [pictureUrl stringByReplacingOccurrencesOfString:@"_q.jpg"
                                     withString:@"_n.jpg"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:31:30.373

使用`albums`，`photos`权限（大小取决于上传时间）

请参阅此链接[http://developers.facebook.com/docs/reference/api/album/](http://developers.facebook.com/docs/reference/api/album/)

# java - 将获取的数据转换为字符串，字符串数组映射

> ID：10226635
> 
> 赞同：0
> 
> 时间：2012-04-19T11:01:35.180
> 
> 标签：java, android, collections, hashmap

我正在从 android 中的 sqlite 获取数据，如下所示

```
 URL                     PHONE
---------------------------------
/test/img1.png          98989898
/test/img1.png          61216121
/test/img2.png          75757575
/test/img2.png          40404040
/test/img3.png          36363636 
```

现在我想创建一个这样的地图来存储数据如下

```
 /test/img1.png          [98989898 , 61216121 ]
   /test/img2.png          [75757575 , 40404040 ]
   /test/img3.png          [36363636] 
```

这样我就可以将整个地图传递给函数，该函数最终在后台获取图像 url 并将数据发送到列出的电话号码的数组。那么如何将获取的数据转换为字符串数组样式的键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:05:32.630

我会创建一个`Map<String, List<String>>`（又名“多地图”）。如果您使用`List<String>`. 如果您选择阵列路线，情况并非如此。

```
Map<String, List<String>> results = new HashMap<String, List<String>>();
while (rs.next()) {
    String url = rs.getString(1);
    String phone = rs.getString(2);
    List<String> phones = (results.contains(url) ? results.get(url) : new ArrayList<String>());
    phones.add(phone);
    results.put(url, phones);
} 
```

谷歌收藏有一个多地图，你可以开箱即用，但我想你会同意这已经足够了。

如果您想存储更多项目（例如名称），您应该开始考虑将所有项目封装在一起成为一个连贯事物的对象。Java 是一种面向对象的语言。你听起来好像因为你的想法太低而感到内疚。字符串、原语和数据结构是对象的构建块。也许你在这里需要一个人：

```
package model;

public class Person {
    private String name;
    private Map<String, List<String>> contacts;

    // need constructors and other methods.  This one is key
    public void addPhone(String url, String phone) {
        List<String> phones = (this.contacts.contains(url) ? this.contacts.get(url) : new ArrayList<String>());
        phones.add(phone);
        this.contacts.put(url, phones);
    }
} 
```

我会把剩下的留给你。

如果采用这种方式，则需要将结果集映射到 Person。但是您应该从我发布的代码中看到这个想法。

# objective-c - 关闭编辑模式后不重新加载表格视图

> ID：10226638
> 
> 赞同：0
> 
> 时间：2012-04-19T11:01:42.717
> 
> 标签：objective-c, uitableview, sqlite

我正在尝试使用编辑模式向 TableView 添加新行。使用[了本教程](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)。但是在关闭我的编辑模式视图后，我的表格视图没有重新加载。我的 addItem: 方法

```
- (IBAction)addItem:(id)sender {

    BIDAppDelegate *appDelegate = (BIDAppDelegate *)[[UIApplication sharedApplication] delegate];

    sqlite3 *database;
    NSString *databaseName;
    NSString *databasePath;

    databaseName = @"TestProjectDatabase.sqlite";
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    BOOL success = [fileManager fileExistsAtPath:databasePath];

    if(!success) {
        databasePath = [[NSBundle mainBundle] pathForResource:databaseName ofType:nil];
    }

    if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)
    {

        NSString *insertSQL = [NSString stringWithFormat:@"insert into \"MyItems\" ( \"MyItemName\", \"MyItemDescription\") values ( '%@', '%@');", _nameTextField.text, _descriptionTextField.text];
        const char *insert_stmt = [insertSQL UTF8String];
        sqlite3_stmt *compiledStatement;

        if(sqlite3_prepare_v2(database, insert_stmt, -1, &compiledStatement, NULL) != SQLITE_OK)
        {
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database)); 
        }else{
            if (sqlite3_step(compiledStatement) == SQLITE_DONE)
            {
                //   NSLog(@"All ok");
            } else {
                //   NSLog(@"FAIL");
            }
        }
        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);

    MyItems *itemsToDatabase = [[MyItems alloc] initWithItemName:_nameTextField.text andItemDescription:_descriptionTextField.text];
    [appDelegate.myItems addObject:itemsToDatabase];
    [self dismissModalViewControllerAnimated:YES];
} 
```

SQL插入没问题，因为重新启动我的项目后新行在哪里。任何建议如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:13:30.150

假设表数据源从 appDelegate.myItems 读取，您只需要重新加载表本身`[tableView reloadData];`。

# facebook - Facebook 请求 ID 检索和删除

> ID：10226640
> 
> 赞同：1
> 
> 时间：2012-04-19T11:01:44.167
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

所以我正在开发一个小型网络应用程序，它实现了`Requests Dialog(User-to-User)`.

我能够发送邀请并成功将数据保存为请求 ID 和用户 ID。但是，当用户被重定向到我的应用程序时，在单击请求后，我无法检索请求 ID，如下所示：[https](https://developers.facebook.com/docs/requests/#deleting) ://developers.facebook.com/docs/requests/#deleting然后将其删除。

但我在浏览器的地址栏中看到请求 ID，它看起来像这样：[http](http://apps.facebook.com/myownapp/?fb_source=request&request_ids=210655195715938) ://apps.facebook.com/myownapp/?fb_source=request&request_ids=210655195715938 和 REQUEST_URI 是：/halten/?fb_source=request&request_ids=210655195715938

我试过用javascript：

```
function getMultipleRequests(requestIds) {
    FB.api('', {
        "ids": requestIds
    }, function(response) {
        console.log(response);
    });
}​ 
```

或使用 php：

```
if(isset($_REQUEST['request_ids'])) {
    $requestIDs = explode(',' , $_REQUEST['request_ids']);
    foreach($requestIDs as $requestID) {
      try {
        $delete_success = $facebook->api('/' . $requestID, 'DELETE');
      } catch(FacebookAPIException $e) {
        error_log($e);
      }
    } 
```

但 request_ids 始终为空，但我的浏览器显示 request_id

那么问题是如何处理这个问题？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:20:17.763

A`User to User Request`实际上是分4级通知给用户的。

1) 宝石通知

![在此处输入图像描述](../Images/55a26d3be8f10386e0d3eb5c4e43c620.png)

2) 书签计数器

![在此处输入图像描述](../Images/fa67ae81c9d75efabfe089522e7c68f6.png)

3) 右上方柜台

![在此处输入图像描述](../Images/f430a8cb951bde4dfd4555eef0427fe7.png)

4）应用内奇怪的位置通知（我不知道这叫什么对不起）

![在此处输入图像描述](../Images/0ac484ab7495b449660bd8fb01f7a6e1.png)

所有这些请求都会将用户带到应用程序，但不幸的是，Jewel 通知（#1）请求 url 将包含`all`请求 ID，其余的将仅包含一个请求 ID。

假设您发送 4 个请求`(1,2,3,4)`

`#1`在 url 中会有`1&2&3&4`

`#2,#3,#4`将`one of those`取决于您响应的通知

希望这是有道理的并回答了这个问题。

# jquery - 用jquery attr animate淡入图像？

> ID：10226643
> 
> 赞同：1
> 
> 时间：2012-04-19T11:01:48.347
> 
> 标签：jquery, attr

当我点击一个链接时，我设置了一个图像 src 来显示一个图像：

```
$('img').attr("src",(myPlaylist.playlist[myPlaylist.current].poster)); 
```

它可以正常工作，但是我想为图像设置动画以使其淡入，我该怎么做？我已经用动画和不透明度进行了测试，但是在某个地方我出错了，我无法让它工作。

因此，任何输入表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:04:42.153

尝试这个？

首先隐藏它：

```
$('img').css("display", "none"); 
```

然后设置你的源代码：

```
$('img').attr("src",(myPlaylist.playlist[myPlaylist.current].poster)); 
```

然后淡入：

```
$('img').fadeIn(500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:05:53.293

尝试这个

```
$('img').fadeIn(100,function(){
    $(this).attr("src",(myPlaylist.playlist[myPlaylist.current].poster));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:05:01.470

预先加载图像（可能在上面分层的 div 中）并隐藏它。然后用fadeIn()对其进行动画显示

# php - 当 PHP 脚本完成时调用对象方法

> ID：10226652
> 
> 赞同：1
> 
> 时间：2012-04-19T11:02:23.230
> 
> 标签：php, object

如果我实例化了一个对象，是否有可能在 php 关闭之前触发一个方法？例子

```
class foo{
   public function sayBye(){
       echo 'bye';
   }
}
$obj = new foo();
$obj2 = new foo();
die(); 
```

有没有办法可以自动触发 sayBye 功能？（换句话说，该代码将输出“byebye”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:05:02.120

查看[register_shutdown_function](http://php.net/register_shutdown_function)函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:04:32.997

`sayBye()`在析构函数中调用 to怎么样？

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:05:55.277

> 如果我实例化了一个对象，是否有可能在 php 关闭之前触发一个方法？例子

有。查看[__destruct()](http://nl.php.net/manual/en/language.oop5.decon.php)了解更多信息。但是请注意，这是*不*可靠的：如果您的脚本包含`die()`、未捕获的异常、致命错误，`__destruct()`则*不会*调用 。

您可以使用它，但要明智地使用它；）

**编辑**：当你打电话时，它似乎`__destruct( )`会被调用`exit;`。尽管如此，警告仍然适用于其他情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:07:58.343

我能看到的最简单的方法是向你的类添加一个析构函数。

```
class foo{
   public function sayBye(){
       echo 'bye';
   }

   public function __destruct(){
       $this->sayBye();
   }
} 
```

这会做什么？当脚本执行完成或调用 unset($object) 时，您将执行 __destruct() 中的代码。它可能不适用于 die()，因为这会在脚本完成之前匆忙停止脚本。

# android - 以编程方式处理活动

> ID：10226655
> 
> 赞同：0
> 
> 时间：2012-04-19T11:02:33.550
> 
> 标签：android, android-activity

我有一个类 MyApp extends Application 应该处理活动。开始活动后：

```
Intent dialogIntent = new Intent(getBaseContext(), ControlActivity.class);
dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(dialogIntent); 
```

如何关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:28:38.577

你不能，对不起。您没有从 Activity 获取对象`startActivity()`。最好的办法是打开另一个带有清除正在运行活动的标志的活动。

# jquery - jQuery Mobile 选择框闪烁

> ID：10226659
> 
> 赞同：3
> 
> 时间：2012-04-19T11:02:48.380
> 
> 标签：jquery, jquery-mobile, cordova

我正在使用 Android 2.3.4 操作系统三星 S5570 POP 设备...

我正在使用 PhoneGap 和 jQueryMobile 1.0.1 开发一个应用程序......

我的应用程序中有 2 个选择框，每个选择框的选项大约是 7 到 10 ...

单击选择框时，选项可以正常打开，但是如果我尝试关闭选择框或从选择框中选择一个选项，则选择框会闪烁...

关闭或从选择框中选择一个选项会关闭选项弹出窗口......再次打开弹出窗口，然后它最终关闭......

然后我想通过在选择框中提及 data-native-menu="true" 或 data-role="none" 来尝试原生选择框...

他们都没有工作......所以我无法实现本机选择框......我在网上搜索......我没有得到解决方案......

所以请大家帮忙实现一个原生选择框或实现一个不闪烁的jquery移动选择框......我已经在下面的css......

```
/* For smoother page transitions*/
.ui-page {
    -webkit-transform-style: flat;
    -webkit-backface-visibility: hidden;
    -webkit-perspective: 800;
    -webkit-transform:translate3d(0,0,0);
}
/* End smoother page transitions*/ 
```

我还尝试了以下用于原生选择框的 css ......但没有运气......

```
.ui-page {
    -webkit-backface-visibility: visible;
} 
```

请帮帮我......提前谢谢......！！！

# c# - 同时使用多个 ExecuteReader

> ID：10226666
> 
> 赞同：0
> 
> 时间：2012-04-19T11:03:40.873
> 
> 标签：c#, performance, sqlite, ado.net, system.data.sqlite

我正在使用 ExecuteReader() 命令读取包含一些表的数据库。根据我在两个不同表中读取的第一个 Read() 结果的结果，因为我需要在第一个查询中返回的 ID 来运行第二个查询。

问题是这个搜索非常慢。

```
tuCommand.CommandText = "SELECT * FROM tblTranslationUnit WHERE DocumentId = " + doc.DocumentId;
var tuReader = tuCommand.ExecuteReader();
while (tuReader.Read())
{
    var tu = new TranslationUnit
     {
         TranslationUnitId = tuReader.GetInt64(0),
         DocumentId = tuReader.GetInt64(1),
         Raw = tuReader.GetString(2),
         IsSegmented = tuReader.GetBoolean(3),
         Reader = this, // Ryan: Fixed so that it sets the reader to itself
     };

    using (var propCommand = _dbConn.CreateCommand())
    {
        propCommand.CommandText = "SELECT * FROM tblTranslationUnitProperties WHERE TranslationUnitId = " + tu.TranslationUnitId;
        var propReader = propCommand.ExecuteReader();
        while (propReader.Read()) tu.Properties.Add(GetProperty(propReader));
    }
    yield return tu;
} 
```

如果我删除第二个 ExecuteReader() 查询真的很快

我还尝试使用新连接和新事务放置第二个 ExecuteReader() 但结果几乎相同

任何想法或线索？我该如何进行这种搜索？有没有更好的方法？（我想是的）。

* * *

更多细节数据库结构是：

```
 - Document
      - properties
      - errors
    -TranslationUnits
        - properties
        - errors
      - Segments
          - properties
          - errors 
```

所以在代码的某些部分我们会有这样的结构

```
 foreach (document in db)
      foreach (property in document)
      foreach (error in document)
    foreach (translationunit in document)
        foreach (property in translationunit)
        foreach (error in translationunit)
      foreach (segment in translationunit)
          foreach (property in segment)
          foreach (error in segment) 
```

基于此，如果问题只是 SQLite 配置问题，那么使用连接返回所有内容并不是一个好主意。我的意思是，如果可以添加任何参数或类似参数来告诉系统我们将使用多个指针

现在我们正在转向数据表解决方案：

1.  打开连接
2.  读取表的 1000 个条目
3.  关闭连接
4.  打开一个新的连接
5.  读取子表的 1000 个条目
6.  关闭新连接
7.  ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:21:49.027

听起来您有可伸缩性问题。SQLite 中包含“Lite”一词是有原因的。它缺乏某些东西，例如高并发性、细粒度的访问控制、丰富的内置函数集、存储过程、深奥的 SQL 语言特性、XML 和/或 Java 扩展、TB 或 PB 可伸缩性等等。我建议为初学者更改数据库。

我也不清楚您的问题，为什么您需要一次在内存中保存 1000 个*文档*，尤其是 1000 个包含 1000 个部分和 1000 个以上部分的文档，全部都在内存中。我不知道你的 UI 要求，但在我 15 年多的编程生涯中，我不记得在没有某种分页机制的情况下，我必须在单个网页或表单上显示 1000 个内容，所以你真的需要得到一次从数据库中获取 1000 * 1000 * 1000 个实体？

我认为您需要重新审视 UI、当前模型和数据层，以寻找在不牺牲大量性能的情况下交付尽可能少的内容的方法。考虑使用延迟加载、预读缓冲区、缓存、分页、搜索方法、共享静态数据等模式来降低前期成本。

考虑买房。我们大多数人都没有钱预先支付房子，所以我们得到了抵押贷款。抵押贷款是随着时间的推移分摊前期成本的方式。所有抵押贷款都会产生负面影响，称为利息。现在，我的总成本不是 100,000，而是 250,000，但因为我能负担当前的付款，我并没有真正注意到额外的 150,000，因为随着时间的推移，额外的成本会以小幅增量被吸收。另请注意，如果我在 5 年内卖掉我的房子，而不是在贷款的期限内留下来，我什至可能无法偿还全部 250,000。

这里的要点是，您可以分摊建立额外连接以检索较小记录集的成本，并且仍然为用户提供他们现在需要的东西。这将减少总体的前期成本，但会增加正在检索的单个记录集的额外成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T22:37:19.780

嗨，我将在此添加我的发现（我正在和大卫一起工作）

我修改了我们使用 david 描述的缓冲区从数据库读取表的方式，因此没有同时连接或读取器同时执行。它似乎有点快，但非常明显。这里有一些数字。

我在 2.5 秒内用 5000 个翻译单元填充数据库（所有表）。然后，当我遍历 TranslationUnit 表（大约 5000 行）时，阅读时间非常惊人：0.07 秒。代码如下：

```
foreach (var tu in document)
{
   ... do something ...
} 
```

如果我像这样阅读每个翻译单元的片段：

```
foreach (var tu in document)
{
    foreach (var seg in tu)
    {
        ... do something ...
    }
} 
```

阅读时间开始变得难看：大约 10 秒。请注意，每个翻译单元恰好有 2 个段（尽管我们在设计中不限制这一点）

对于 10000 个翻译单元，填充数据库大约需要 6 秒，读取数据库大约需要 2 分钟。（如果只有 1 个 foreach 阅读翻译单元，几乎是即时的）

对于 50000 个翻译单元，填充大约需要 32 秒，在等待阅读完成 1 小时后我放弃了。（如果只有 1 个 foreach 阅读翻译单元，几乎是即时的）

所以我的猜测是阅读时间成本呈指数增长。是否有理由认为这是因为它必须将数据库指针更改为不同的表？（在翻译单元和段表之间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:16:01.383

一次读取第一个查询的所有结果，关闭`DataReader`然后枚举内存中的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:12:39.620

首先，您可以编写 select with join 并通过一个查询获取所有内容

```
SELECT * FROM tblTranslationUnit join tblTranslationUnitProperties on
tblTranslationUnitProperties.TranslationUnitId = tblTranslationUnit.id 
WHERE DocumentId = @docID //<= use parameter 
```

如果它没有帮助，也许你需要索引你的表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T11:09:59.373

您尝试过简单的“JOIN”吗？还是我在您的问题中遗漏了什么？

```
SELECT tbl2.* 
    FROM tblTranslationUnit tbl1 
    JOIN tblTranslationUnitProperties tbl2 ON tbl2.TranslationUnitId = tbl1.TranslationUnitId 
```

# iphone - iOS 短信字符数限制

> ID：10226669
> 
> 赞同：0
> 
> 时间：2012-04-19T11:03:54.023
> 
> 标签：iphone, sms, limit

我想通过短信在我的应用程序中发送大约 2000 个字符的大量信息。我只是想知道 iOS 短信中的字符限制。有人知道这件事吗？Hwo iOS 会处理这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:07:25.077

SMS 内容通常被提供商限制为 1120 位（= 最常见的编码为 160 个字符）。对于较长的短信，内容一般分为几条短信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:09:04.333

SMS 限制不是由操作系统决定的，而是由提供商决定的。UTF8 消息通常为 70 个字符，GSM 7 位限制为 140/160 取决于提供商。较长的消息被分成几部分。

# date - SQL Server 2008 Express - 拆分日期和时间/更改日期/将新日期与原始时间连接起来

> ID：10226671
> 
> 赞同：0
> 
> 时间：2012-04-19T11:04:17.957
> 
> 标签：date, time, concatenation, sql-server-2008-express

我对 SQL 比较陌生，需要执行以下操作

*   拆分日期和时间
*   更改日期
*   将新日期与原始时间连接起来

对此的任何帮助将不胜感激，因为谷歌搜索还没有找到我任何东西！

谢谢保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:05:50.793

[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)如果要更改现有 DATETIME 值的一部分，只需使用该函数。

> 返回指定的日期，并将指定的数字间隔（有符号整数）添加到该日期的指定日期部分。

例如，如果您想在现有日期上添加一个月：

```
DATEADD(mm, 1, mydate) 
```

# shell - 通过 id 从 Mongo 旧文档中删除

> ID：10226672
> 
> 赞同：5
> 
> 时间：2012-04-19T11:04:19.827
> 
> 标签：shell, mongodb

在我当前的项目中，我们使用 Mongo 来存储大量文档（大约 1000 亿）。 **如何使用字段 _id 删除一半最旧的文档**，因为如果我使用索引字段“时间戳”，此操作将以当前速度在大约 3 年后完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T19:23:25.617

这是 MongoDB-User Google Groups 帖子的链接，该帖子讨论了基于时间戳生成 ObjectId： [http ://groups.google.com/group/mongodb-user/browse_thread/thread/262223bb0bd52a83/3fd9b01d0ad2c41b](http://groups.google.com/group/mongodb-user/browse_thread/thread/262223bb0bd52a83/3fd9b01d0ad2c41b)

来自帖子：从 Mongo ObjectIds 中提取时间戳在 Mongo 文档“优化对象 ID” [http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Extractinsertiontimesfromidratherthanhaveaseparatetimestampfield](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Extractinsertiontimesfromidratherthanhavingaseparatetimestampfield)中进行了说明。

取自帖子中的示例，ObjectIds 可以从 Unix 时间中的时间（以秒为单位）创建：

```
> now = new Date()
ISODate("2012-04-19T19:01:58.841Z")
> ms = now.getTime()
1334862118841
> sec = Math.floor(ms/1000)
1334862118
> hex = sec.toString(16)
4f906126
> id_string = hex + "0000000000000000"
4f9061260000000000000000
> my_id = ObjectId(id_string)
ObjectId("4f9061260000000000000000") 
```

使用上面的公式，您可以从任何日期创建一个 ObjectID，并查询具有较少 ObjectId 的文档。

展望未来，如果您的应用程序将基于时间保存数据并在数据达到一定年龄后删除数据，您可能会发现将文档存储在单独的集合中更好；每天、每周或任何对您的应用程序最有意义的时间范围。删除整个集合所需的开销比删除单个文档要少得多，因为它可以通过单个操作完成。 `db.<collection>.remove({query})`将为返回的每个文档执行写入操作，正如您所观察到的，对于大量文档来说，这可能会非常慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-10T00:52:45.197

只需找到中间的**_id**并删除所有旧条目：

蒙哥壳：

```
// get total documents count / 2
var c = Math.floor( db.collection.stats()['count'] / 2 )

// find middle id
var mid_id = db.collection.find().skip(c).limit(1)[0]._id

// remove all ids older than the middle one
db.collection.remove({_id:{$lt:mid_id}}) 
```

# php - 为什么 Symfony 没有默认的 URL 映射？

> ID：10226678
> 
> 赞同：2
> 
> 时间：2012-04-19T11:04:42.090
> 
> 标签：php, symfony, frameworks, routing

我从 Symfony2 开始，我对 Codeigniter 和 Zend 有一些经验。我的问题是为什么在 Symfony 中没有像 /(module)/controller/action -> 这样的默认路由映射到像其他框架一样的类/方法？据我所知，在 Symfony 中，我们必须在外部配置文件（如 routing.yml）中定义新路由才能使其正常工作。它的原因/好处是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:28:20.067

它迫使您在定义 URL 布局时打开您的大脑。

通过使用诸如使用模块/控制器名称（其他框架）或文件名（普通 php）之类的自动化，您可能会得到丑陋的 url 或选择糟糕的控制器名称来保持 url 好。

# asp.net-mvc-3 - jqgrid subgrid hide +- 符号未显示

> ID：10226686
> 
> 赞同：1
> 
> 时间：2012-04-19T11:05:06.803
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery-plugins, jqgrid

![在此处输入图像描述](../Images/0a15a50c199f06acb259c17ffb17bfe6.png)jqgrid subgrid hide +- 符号未显示。单击该行会展开，但符号不会出现。我已包含以下文件

jquery-ui-1.8.16.custom.min.js jquery.jqGrid.min.js

jquery-ui-1.8.16.custom.css ui.jqgrid.css

请帮忙

在图像中，您可以看到 + & - 符号没有出现，即使该行已展开

# c - 在 *NIX 系统上使用 C 获取存储给定文件的设备的 UUID

> ID：10226690
> 
> 赞同：0
> 
> 时间：2012-04-19T11:05:15.963
> 
> 标签：c, unix, device, uuid

给定：UNIX 文件系统上文件的路径

如何以在类 UNIX 系统（包括 OS X）中最便携的方式获取存储它的设备的 UUID，可能通过 C 的库调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:31:08.933

您可以调用**int stat(const char *path, struct stat *buf)**并且 buf->st_dev 将为您提供设备的 ID。stat() 是 POSIX.1。

# sql-server - 使用 sp_addlinkedserver 添加服务器

> ID：10226692
> 
> 赞同：52
> 
> 时间：2012-04-19T11:05:17.553
> 
> 标签：sql-server, tsql

我试图将值从一台服务器插入到另一台服务器，但出现错误：

> 消息 7202，级别 11，状态 2，第 1 行在 sysservers 中找不到服务器“SNRJDI\SLAMANAGEMENT”。执行 sp_addlinkedserver 将服务器添加到 sysservers。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-04-19T12:19:18.933

我知道了。它工作得很好

谢谢您的帮助：

```
EXEC sp_addlinkedserver @server='Servername'

EXEC sp_addlinkedsrvlogin 'Servername', 'false', NULL, 'username', 'password@123' 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-19T11:08:03.513

首先添加链接服务器

```
exec sp_addlinkedserver
@server = 'SNRJDI\SLAMANAGEMENT',
@srvproduct=N'',
@provider=N'SQLNCLI' 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms190479.aspx](http://msdn.microsoft.com/en-us/library/ms190479.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-05-03T09:53:28.497

*我在将 SQL_server 2008 连接到远程服务器中托管的 SQL_server 2016 时遇到了同样的问题。@Domnic 的回答对我来说并不简单。我在这里写了我的调整解决方案，因为我认为它可能对其他人有用。*

远程 IP 数据库连接的扩展答案：

**第 1 步：链接服务器**

```
EXEC sp_addlinkedserver @server='SRV_NAME',
   @srvproduct=N'',
   @provider=N'SQLNCLI',   
   @datasrc=N'aaa.bbb.ccc.ddd';

EXEC sp_addlinkedsrvlogin 'SRV_NAME', 'false', NULL, 'your_remote_db_login_user', 'your_remote_db_login_password' 
```

......`SRV_NAME`一个发明的名字在哪里。我们将使用它来从我们的查询中引用远程服务器。`aaa.bbb.ccc.ddd`是托管 SQLserver DB 的远程服务器的 IP 地址。

**第 2 步：运行查询** 例如：

```
SELECT * FROM [SRV_NAME].your_remote_db_name.dbo.your_table 
```

……就是这样！

语法详细信息：[sp_addlinkedserver](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql?view=sql-server-2017)和[sp_addlinkedsrvlogin](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-addlinkedsrvlogin-transact-sql?view=sql-server-2017)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-16T14:56:23.240

-- 检查服务器是否存在于表 sys.server 中

```
select * from sys.servers 
```

-- 设置数据库安全

```
 EXEC sp_configure 'show advanced options', 1
    RECONFIGURE
    GO

    EXEC sp_configure 'ad hoc distributed queries', 1
    RECONFIGURE
    GO 
```

-- 添加外部数据库服务器

```
EXEC sp_addlinkedserver @server='#servername#' 
```

-- 在外部服务器上添加登录

```
EXEC sp_addlinkedsrvlogin '#Servername#', 'false', NULL, '#username#', '#password@123"' 
```

-- 远程表的控制查询

```
select top (1000) * from [#server#].[#database#].[#schema#].[#table#] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-19T06:50:04.607

用于 SQL 服务器

```
EXEC sp_addlinkedserver @server='servername' 
```

无需指定其他参数。你可以通过这篇[文章](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql)。

# php - Magento 网站复制到新服务器，重定向到旧服务器

> ID：10226694
> 
> 赞同：0
> 
> 时间：2012-04-19T11:05:28.473
> 
> 标签：php, magento, webserver

我已经在新服务器上复制了整个 magento 站点（应用程序和数据库转储），我们使用新地址。但是当我在浏览器中按下新地址时，它会重定向到旧站点。

我已将新服务器上 core_config_data 中的安全和不安全 url 更改为指向新地址。我已经手动从缓存中删除了所有内容。

如果我评论 index.php 不要运行 Mage::run($mageRunCode, $mageRunType); 只是回显一些东西，它会在浏览器中正确显示。但是如果我取消注释 Mage::run ，它就会重定向到旧地址。

此外，它根本不会从这个新位置读取 local.xml，因为如果我只是在其中放入一些随机数据，我不会收到任何错误，它仍然会重定向到新地址。

有谁知道可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:08:50.930

我进行了`core_config_data`更新并刷新了缓存和索引，管理面板工作正常，但主站点`index.php`在新旧站点之间来回重定向。

现在有一个重定向循环。它最终给出，“ `This webpage has a redirect loop`。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T23:32:53.930

您可以先尝试对新服务器的 MySQL 数据库运行以下查询：

```
UPDATE `core_config_data` SET `value`='http://new.websiteurl.com/' WHERE `value`='http://old.websiteurl.com/' LIMIT 2; 
```

如果您有 HTTPS 网址：

```
UPDATE `core_config_data` SET `value`='https://new.websiteurl.com/' WHERE `value`='https://old.websiteurl.com/' LIMIT 1; 
```

然后重新索引（系统>索引管理）并刷新magento缓存存储（系统>缓存管理）。

# codeigniter - 在 codeigniter 视图中放置 css

> ID：10226706
> 
> 赞同：4
> 
> 时间：2012-04-19T11:05:54.633
> 
> 标签：codeigniter, views

我是codeigniter的新手。我制作了一个简单的控制器来加载三个视图：页眉、正文和页脚。我的标题包含指向几个具有相对路径的 javascript 和 CSS 的链接。我将所有 css 和 js 相对于文件保存在 views 文件夹中。

问题是控制器正确加载了所有内容，但没有加载图像、js 和 css。

这是我的观点的层次结构：

CSS（视图中的子目录） JS（视图中的子目录）

header（页眉视图文件） body（正文视图文件） footer（页脚视图文件）

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T23:16:31.437

将所有内容都放在视图文件中并不是一个好主意，因为这些文件夹应该清理东西，将它们放在视图中会使它们再次变得混乱。

假设这是您的目录：

本地主机

*   应用
    *   控制器
    *   意见
    *   ETC..
*   系统
*   资产
    *   Javascript
    *   CSS

要包含任何 javascript，路径将是：

```
localhost/Assets/Javascripts/your_script.js 
```

显然CSS是

```
localhost/Assets/CSS/your_stylesheet.css 
```

为了确保您的实施无处不在，

```
<script src="<?=base_url('path/to/your/js/foo.js')>" type="text/javascript"></script> 
```

将是最安全的方式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T12:53:23.190

您需要将文件放在基本目录中，例如包含应用程序和系统文件夹的目录。

尝试使用名为assets 的文件夹。

还要确保您使用的是前导斜杠，例如

```
href="/assets/css/style.css" 
```

请注意，这将从基本 URI 加载

例如 example.local/assets/css/style.css

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T11:53:51.797

我建议您不要将 js/images/css 文件保留在视图文件夹中。

请参考这个过去的问题。 [我在 Codeigniter 中将图像文件、css、js 等放在哪里？](https://stackoverflow.com/questions/6630770/where-do-i-put-image-files-css-etc-in-code-igniter)

至于回答你的问题，就像戴尔说的那样。

首先，您需要检查您的 .htaccess，并注意您的基本目录在哪里。

然后，您必须提供适合您的 js/css 文件夹的路径链接。如果您将它们保存在您的视图文件夹中，那么您似乎必须执行此 url

```
http://localhost/codeigniter/index.php/application/views/css/text.css 
```

如果我没记错的话，你目前在

`"http://localhost/codeigniter/index.php/admin"`

试图加载css文件。如果您使用 href="something"，它只会添加到您当前的 URL。它将提供“ [http://localhost/codeigniter/index.php/admin/something](http://localhost/codeigniter/index.php/admin/something) ”，而 IMO 不是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T22:18:28.077

链接到 css 文件的最佳方式是这样的

```
echo link_tag('css/reset.css'); 
```

注意链接标签不使用 / 而下面的 hs 文件使用

你的css和js需要在根目录下

JS文件

```
<script defer src="/media/javascripts/scrips.js"></script> 
```

也在根中。当然，您的目录会有所不同

您不能链接到同一视图目录中的 css 文件

[http://codeigniter.com/user_guide/helpers/html_helper.html](http://codeigniter.com/user_guide/helpers/html_helper.html)

# java - 如何从加载的 Java 代码创建 UML 图？

> ID：10226712
> 
> 赞同：1
> 
> 时间：2012-04-19T11:06:34.053
> 
> 标签：java, parsing, uml

我对我的程序有疑问。我的程序应该能够从 Java 代码创建 UML 图，但我不知道如何设计方法，它将检索（加载）Java 关键字、对象等。注意：我不能使用自动化程序来创建 UML 图。这是我的论文。

我的想法是使用 Java 关键字创建枚举类，这些关键字在 UML 图中可以看到，并使用此枚举检查所有加载的代码。但是有几个问题我无法解决，尤其是空间。下一个问题如下：

例如我有代码：

```
[space][space]public[space]class[space][space][space]SomeClass[space]{
[empty line]
private int something;
public BufferedReader br;
private ArrayList<File> al;
} 
```

此代码的注释：

*   [空格] 代表代码中的经典间隙。
*   我故意强调了这些差距，因为它在语法上是正确的。
*   我不知道如何将所有 Java 类加载为 BufferedReader、ArrayList 等或其他对象。

感谢您的任何回复。我想有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:18:30.007

您应该考虑使用一个为您解析 Java 代码的库。当然我不能告诉你一个，试试谷歌一个。

这是我将遵循的方法。首先阅读这篇关于 Eclipse[抽象语法树](http://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)的文章。使用 Eclipse AST 意味着您将工具设计为 Eclipse 插件。如果您不想这样做，那么本文将为您提供一些关于如何解析源代码树的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:29:52.857

如果您可以使用已编译的代码，那就太好了。在 java 中，您无需初始化即可加载类，并使用**java.lang.reflect**检查其结构。当然，例如，参数名称将丢失。

有关更多详细信息，还有其他类解析库，如 ASM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T15:26:51.017

添加之前的两个答案和您的评论，尤其是关于。'纯Java代码'。

假设我正确理解您的问题，您要做的第一件事就是将 java 源代码（即文本文件）转换为一些数据结构。从那里您可以为数据结构生成 UML 图。

假设这是一个很常见的模式。将文本转换为数据结构通常有两种方法：

*   解析文本（由@user714965 建议）
*   使用反射（由@Joop Eggen 建议）

手写解析器不是一件小事。您关于创建枚举类等的评论表明这就是您的想法。然而，手工编码的解析器仅在极少数情况下是推荐的解决方案。有一整套理论和实践致力于解析算法和技术。我真的不确定您是否想为您的项目参与其中。

大多数人会使用解析器生成器（例如[antlr](http://www.antlr.org/)）从语法定义生成解析器。鉴于 java 的流行， antlr[至少有一种](http://www.antlr.org/grammar/list)现有的 java 语法。我不太确定“纯 Java 代码”约束是什么意思。Antlr 会生成一个纯 java 代码解析器，这样就可以了。如果你的意思是你需要从头开始编写所有代码，那么使用解析器生成器就不行了。但这似乎是一个非常奇怪的约束......

反正。您的另一个选择是使用反射。这实际上使用了 JVM 中的解析器，并为您提供 API 访问权限来查询和导航代码本身。java.lang.reflect 也是（显然）纯java - 所以你的代码调用它也是。

Eclipse/Netbeans API 将为您提供另一种可能的途径。实际上，它们只是另一个“解析器”，它提供了一组代表您的 java 代码的数据结构。

我强烈推荐这三种方法中的一种，而不是手动编写自己的解析器。

我不确定这是否有帮助。也许您可以多解释一下“纯 Java 代码”约束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T07:52:27.897

只需选择像 JavaCC 这样的解析器生成器（您的任务 1）。使用已完成的 Java 语法（或构建自己的语法）。生成 Lexer (2) 并将您自己的 Parser 内容写入语法 (3)。从解析器中保存树和/或先修改它以获得 XML/XMI 表示。对于 5）你真的应该选择一个现有的工具，因为编写自己的工具可以是一个完整的附加论文......

# asp.net - 在 ASP.NET 中设计身份验证系统？

> ID：10226714
> 
> 赞同：1
> 
> 时间：2012-04-19T11:06:37.207
> 
> 标签：asp.net, authentication, login

好的，所以我正在为我的网站构建一个登录页面和注册页面。我有两个选项可以使用内置的 ASP.NET 登录控件或我自己的自定义控件。我在 stackoverflow 上的某处阅读过不要构建自己的自定义登录控件，因为您永远不会正确。我不知道为什么？那么在构建登录/注册/密码重置页面、系统时有哪些设计注意事项和陷阱呢？如果我不应该使用自己的自定义，而是使用内置，那为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:40:26.153

玩得开心建立自己的登录页面。我怀疑您阅读的文章与编写自己的身份验证/授权框架有关——这可能很棘手。除非你有充分的理由放弃内置的 asp.net 会员系统（比如不喜欢 ID 的 GUID），否则我会坚持使用它，因为它是一个久经考验的解决方案。

在构建您自己的登录/密码重置页面方面 - 去吧 - 它只是一个表单帖子：只需记住使登录页面为 SSL，否则您的用户将从客户端发送未加密的密码到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:49:31.140

如果您可以选择，不要手动实现与安全相关的框架被广泛认为是明智的。要正确处理这些是非常困难的，错误处理会使您的应用程序容易受到黑客攻击。

如果这只是登录 UI（而不是底层身份验证机制）的问题，那么这不是一个大问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:56:29.717

我想我在评论中回答了你关于是否使用 Visual Studio 附带的内置登录控件的问题。

有关设计和注意事项，请在此处查看[FormsAuthentication](http://msdn.microsoft.com/en-us/library/9wff0kyh.aspx)和[WindowsAuthentication](http://msdn.microsoft.com/en-us/library/907hb5w9.aspx)。如果您的身份验证是直截了当的，请坚持使用内置的会员提供程序，例如[这里](http://odetocode.com/articles/427.aspx)

# javascript - 循环后的Javascript未定义变量

> ID：10226715
> 
> 赞同：0
> 
> 时间：2012-04-19T11:06:39.427
> 
> 标签：javascript, html, variables, loops

我有一个重定向到文件的倒计时脚本。它有一个循环，并且当它运行一次时变量会变得未定义。

我怎样才能让 url 变量保持它的值？

```
 <a id="" onClick="doTimer('http://www.domain.com/downloadfile.php?photo=foo.jpg')" href="#"><button id="download">Download this photo</button></a>

        var timer_is_on=0;
        var countdownfrom=5
        var currentsecond=document.getElementById('countdown').innerHTML=countdownfrom+1 

        function countredirect(url)
        { 
            if (currentsecond!=1)
            {
                currentsecond-=1 
                document.getElementById('countdown').innerHTML = currentsecond;
            } 
            else
            { 
                window.location=url 
                return 
            } 
            setTimeout("countredirect()",1000) 
        }
        function doTimer(url)
        {
            if(!timer_is_on)
            {
                document.getElementById('download').innerHTML="Your download starts in <span id=\"countdown\"></span>seconds";
                timer_is_on=1;
                countredirect(url) 
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:10:11.150

```
setTimeout("countredirect()",1000) 
```

您没有将任何参数传递给您的`countredirect`函数。

将字符串传递给`setTimeout`and`setInterval`通常是一个坏主意（给您带来各种范围问题）。而是传递一个函数：

```
setTimeout(function() {
    countredirect(url);
}, 1000); 
```

在较新的浏览器（或使用 shim）中，您还可以使用[`.bind()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)（`bind`返回一个新函数）：

```
setTimeout(countredirect.bind(null, url), 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:11:46.397

重新安排函数的另一种方法：

```
setTimeout(countredirect.bind(null, url), 1000); 
```

# c++ - 并发事件处理问题

> ID：10226716
> 
> 赞同：1
> 
> 时间：2012-04-19T11:06:44.853
> 
> 标签：c++, multithreading, c++11, sfml

我刚开始学习一般的多线程，我知道示例应用程序 - 我正在研究 - 在使用线程时甚至可能会降低性能。使用的编译器是*GCC4.7*，带有以下标志： *-std=c++0x -g -O3 -Wall*

因此，我正在使用 C++11 并使用 std::thread 实现。一般来说，我尝试开发跨平台，所以我在大学计算机上的 Windows 上使用 GCC4.7 以及在我的家用机器上开发 Ubuntu/Mac OSX。为了能够跨平台处理窗口创建，我使用了 SFML 库（2.0）。

这里简化了 CApp 类和相关函数：

```
class CApp
{
public:
    //! Constructor.
    CApp(void);
    //! Deconstructor.
    ~CApp(void);

    /* Public Functions: */
    //! Initializer function, needs to be called before Run-Function to allocate everything and set everything up.
    bool Initialize(unsigned int width, unsigned int height, char* title, bool vsync, CState* startState);
    void Run(void); //!< Starts the game-loop
private:
    void ProcessEvent(sf::Event event);

    sf::RenderWindow*   m_pWindow;      //!< window instance
    std::vector<std::thread> m_threads;
}; 
```

一般来说，我的应用程序是一个小型的 OpenGL 演示场景，它应该是多线程的，以便能够对多线程适合和不适合的地方进行基准测试和比较。

相关功能的实现：

```
void CApp::Run(void)
{
    while (m_pWindow->IsOpen())
    {
        sf::Event event;
        while (m_pWindow->PollEvent(event))
        {
            m_threads.push_back(std::thread(&CApp::ProcessEvent, this, event)); 
        } 
        // ...
        m_threads.clear();
    }
}

void CApp::ProcessEvent(sf::Event event)
{
    if (event.Type == sf::Event::Closed)
        m_pWindow->Close();
    if (event.Type == sf::Event::KeyPressed) 
    {
        if (event.Key.Code == sf::Keyboard::Escape)
            m_pWindow->Close();
    }
} 
```

我得到的运行时错误只是一个 Abort trap: 6 on the first frame: _"terminate called without an active exception - Program received signal SIGABRT, Aborted. 0x00007fff8fdf4ce2 in __pthread_kill ()"_

如果我评论线程创建并在当前线程中调用 ProcessEvent ，则不会出现问题，因此问题必须与线程相关。

SFML 并不是所有线程安全的，所以我认为问题出在 m_pWindow-Pointer 或事件作为函数参数本身，但我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:32:15.943

在清除向量并删除所有线程之前，您绝对应该等待所有线程完成：

```
void CApp::Run(void)
{
    while (m_pWindow->IsOpen())
    {
        sf::Event event;
        while (m_pWindow->PollEvent(event))
        {
            m_threads.push_back(std::thread(&CApp::ProcessEvent, this, event)); 
        } 

    for(auto& i : m_threads)
      i.join();

    m_threads.clear();
   }
} 
```

此外，当您使用 GCC 时，我建议您使用该`-pthread`选项进行编译。

# vba - 如何获取当前在vb6中运行的进程的文件名

> ID：10226718
> 
> 赞同：0
> 
> 时间：2012-04-19T11:06:48.343
> 
> 标签：vba, vb6

有没有办法从 Excel 或 Word 进程等中找到当前打开的文件？我想获取 Windows 中所有正在运行的进程的列表以及它们当前打开的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:54:56.733

如何使用 VBA 列出正在运行的进程

```
Function getProcessInfo()
''On Error Resume Next
Dim objProcess, process, strNameOfUser
ComputerName = "."
Set objProcess = GetObject("winmgmts:{impersonationLevel=impersonate}\\" _
      & ComputerName & "\root\cimv2").ExecQuery("Select * From Win32_Process")
For Each process In objProcess
    If process.Name <> "System Idle Process" And process.Name <> "System" Then
        ''Debug.Print process.Name
        Debug.Print process.Name & "," & process.executablepath _
            & "," & process.Priority & "," & process.sessionid _
            & "," & strNameOfUser & "," & process.handlecount _
            & "," & process.ThreadCount
    End If
Next

Set objProcess = Nothing
End Function 
```

修改自： http: [//www.windowsadminscripts.com/coding/networking/processes/](http://www.windowsadminscripts.com/coding/networking/processes/)

也许打开的窗口列表可能更有用：

```
Private Const GW_HWNDNEXT = 2
Private Declare Function GetWindow Lib "user32" (ByVal hWnd As Long, ByVal wCmd As Long) As Long
Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long
Private Declare Function GetClassName Lib "user32" Alias "GetClassNameA" (ByVal hWnd As Long, ByVal lpClassName As String, ByVal nMaxCount As Long) As Long
Private Declare Function GetWindowText Lib "user32" Alias "GetWindowTextA" (ByVal hWnd As Long, ByVal lpString As String, ByVal cch As Long) As Long

Sub ListWins(Optional Title = "*", Optional Class = "*")
    Dim hWndThis As Long
    hWndThis = FindWindow(vbNullString, vbNullString)
    While hWndThis
        Dim sTitle As String, sClass As String
        sTitle = Space$(255)
        sTitle = Left$(sTitle, GetWindowText(hWndThis, sTitle, Len(sTitle)))
        sClass = Space$(255)
        sClass = Left$(sClass, GetClassName(hWndThis, sClass, Len(sClass)))
        If sTitle Like Title And sClass Like Class Then
            Debug.Print sTitle, sClass
        End If
        hWndThis = GetWindow(hWndThis, GW_HWNDNEXT)
    Wend
End Sub 
```

像这样使用它：

```
ListWins "*.doc*" 
```

这将列出所有标题包含*.doc的 Word 窗口*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:08:33.077

有什么原因，为什么你使用vb6？

编辑：我不知道，如果这对你有帮助，但这里有一个链接，其中有一些示例如何在 VB6 中获取进程列表：[http ://wiki.robotz.com/index.php/Process_List_and_Locate_VB6](http://wiki.robotz.com/index.php/Process_List_and_Locate_VB6)

# java - 掌握java并发编程

> ID：10226719
> 
> 赞同：2
> 
> 时间：2012-04-19T11:06:55.413
> 
> 标签：java, concurrent-programming

我想掌握并发编程。
我听说 Doug Lea 有一些关于 Java 并发编程的好书

*   [Java™ 中的并发编程：设计原则和模式（第 2 版）](https://rads.stackoverflow.com/amzn/click/com/0201310090)
*   [Java 并发实践](https://rads.stackoverflow.com/amzn/click/com/0321349601)

我应该先读哪本书？有没有其他书。如果有人能告诉我也指导我如何练习这个话题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:11:13.157

*Java Concurrency in Practice*是两者中较新的，所以我建议这样做。它涵盖了很多东西，包括另一个没有的新并发实用程序。但是，CPiJ 还包含一些仍然相关且在 JCiP 中未重复的内容，因此您可能也想稍后再检查一下。

# java - 自动添加/同步联系人

> ID：10226722
> 
> 赞同：5
> 
> 时间：2012-04-19T11:06:58.040
> 
> 标签：java, android, xmpp, whatsapp

我正在开发一个 android 聊天应用程序，并希望在用户安装应用程序时以及在添加或删除新联系人时自动添加/同步联系人，就像 whatsapp 所做的那样。我打算为应用程序使用 xmpp 或 java 库。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T12:53:10.693

如果您的联系人同步要与您的聊天应用程序分开运行，您应该使用`SyncAdapter`. 它作为 Android 运行`service`，因此即使您的聊天应用程序未运行，它也可以使联系人与服务器保持同步。请参阅 Google 提供的以下 URL，该 URL`SampleSyncAdapter`提供了构建您自己的源代码和信息`SyncAdapter`... [http://developer.android.com/resources/samples/SampleSyncAdapter/index.html](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)

如果您只想在应用程序运行时同步联系人，那么您实际上不需要任何类型的同步机制，您只需将联系人添加到您的设备。

对于这两种方法，您都可以通过创建`ContactsContract`对象来添加联系人，并将它们写入 Android 联系人数据库。`ContactsContract`根据您要存储的数据类型，有许多变体- 例如，`ContactsContract.CommonDataKinds.Email`用于存储联系人的电子邮件地址。有关`ContactsContract`...的信息，请参阅此 URL。 [http://developer.android.com/reference/android/provider/ContactsContract.html](http://developer.android.com/reference/android/provider/ContactsContract.html)

我建议您一定要通读`SampleSyncAdapter` [http://developer.android.com/resources/samples/SampleSyncAdapter/index.html](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)的源代码，因为它提供了从 Android 联系人数据库读取和写入联系人所需的所有代码，它展示了如何构建`ContactsContract`用于存储联系信息的方法，并提供了一个示例来说明`SyncAdapter`您是否选择使用它。

# java - Spring MVC + 会话管理

> ID：10226739
> 
> 赞同：0
> 
> 时间：2012-04-19T11:08:12.930
> 
> 标签：java, spring, session, spring-mvc

我正在开发一个使用 spring 框架和 Hibernate 作为 ORM 的 Web 应用程序。我想创建一个注册和登录页面。登录时，应为特定用户创建会话（如发送 cookie 等）。由于我是春天的新手，我不知道如何完成这项工作。有人可以给我一个很好的教程吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T11:39:38.267

HTTP 会话与 Hibernate 无关，与 Spring MVC 无关。它是标准 Servlet API 的一部分。

只要您调用`request.getSession()`, (`request`是`HttpServletRequest`) 或 JSP 执行后，会话就会立即启动（除非您已专门配置它以避免使其启动会话）。

你只需要假设会话在那里。当您从请求中获取它时，它会自动启动（如果它尚不存在）。

用户通过身份验证后，您可以在会话中存储一些用户信息。但未经身份验证的用户也有一个会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T15:10:47.997

看看这个，它几乎描述了你应该如何使用 Spring 管理安全性

[http://www.springsource.org/spring-security/](http://www.springsource.org/spring-security/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:35:20.330

您可以使用 @SessionAttributes({"form"}) 来保留表单数据，或者您可以在控制器签名中使用 HttpSession 变量，spring 将为您提供 servlet 会话对象。检查[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html)（第15.3.2.3节）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:36:56.343

正如已经指出的，这与 Hibernate 无关，请查看Spring Security的[入门文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-getting-started)

# android - 从另一个xml Android获取linearLayout

> ID：10226740
> 
> 赞同：4
> 
> 时间：2012-04-19T11:08:12.977
> 
> 标签：android, xml, android-linearlayout

需要获得一个不在主 xml 文件中的 LinearLayout（我在 setContentView() 中设置的那个）。所以写下这段代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LinearLayout main = (LinearLayout) findViewById(R.id.main1);

    LinearLayout oggetto = (LinearLayout) findViewById(R.id.element1);

    main.addView(oggetto);
} 
```

写入 element1 的 xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/element1"
            android:layout_width="fill_parent"
            android:orientation="horizontal" 
            android:layout_height="90px"
            android:background="#000000">

            <LinearLayout
                android:id="@+id/linearLayoutLeftBar"
                android:layout_width="10px"
                android:layout_height="fill_parent"
                android:orientation="horizontal"
                android:background="#7FFF00" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayoutRightContent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:background="#EEEEEE" >

                <LinearLayout
                    android:id="@+id/linearLayout1"
                    android:layout_width="fill_parent"
                    android:layout_height="45px"
                    android:orientation="horizontal"
                    android:background="#EEEEEE" >

                    <LinearLayout
                        android:id="@+id/linearLayoutTxtView1"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:background="#EEEEEE"
                        android:layout_gravity="right" >

                        <TextView
                            android:id="@+id/textView1"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:text="TextBox1"
                            android:layout_marginLeft="5px"
                            android:textColor="#000000"
                            android:gravity="center" />

                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/linearLayoutImgView"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:gravity="right|center" >

                        <ImageView
                            android:id="@+id/imageView1"
                            android:layout_width="16px"
                            android:layout_height="16px"
                            android:layout_marginRight="16px"
                            android:src="@drawable/ic_launcher"
                            android:background="#FF0000"/>

                    </LinearLayout>

                </LinearLayout>

                <LinearLayout
                    android:id="@+id/linearLayout2"
                    android:layout_width="fill_parent"
                    android:layout_height="45px"
                    android:orientation="horizontal"
                    android:background="#EEEEEE" >

                    <LinearLayout
                        android:id="@+id/linearLayoutTxtView1"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:background="#EEEEEE"
                        android:layout_gravity="right" >

                        <TextView
                            android:id="@+id/textView2"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:text="TextBox2"
                            android:layout_marginLeft="5px"
                            android:textColor="#000000"
                            android:gravity="center" />

                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/linearLayoutImgView"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:gravity="right|center" >

                        <TextView
                            android:id="@+id/textView3"
                            android:layout_width="wrap_content"
                            android:layout_height="fill_parent"
                            android:layout_marginRight="16px"
                            android:text="TextBox3"
                            android:textColor="#000000"
                            android:gravity="center|right" />

                    </LinearLayout>

                </LinearLayout>

            </LinearLayout>
        </LinearLayout> 
```

问题是我在启动应用程序时收到错误：无法启动活动 ComponentInfo{com.chiamata/com.chiamata.ChiamataActivity}: java.lang.NullPointerException 这是因为 element1 为空。如果我在将 if(element1 != null) 添加到主 Linearlayout 之前放置一切正常，但 element1 显然没有添加。我需要以编程方式添加它，所以我不能将所有内容都放在一个 xml 文件中。我能怎么做？谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T11:26:16.420

如果我正确理解您的问题，您可以使用

```
LayoutInflater inflater;
inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);              

LinearLayout layout = (LinearLayout) inflater.inflate(R.layout.Your_layout_file_with_element1 , null); 
```

然后您可以使用`main.addView(layout );`添加外部布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:22:49.307

你可以说

```
LinearLayout element1 = (LinearLayout) findViewById(R.id.element1);

main.addView(element1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:30:17.087

Why you can't put it in one XML and then toggle visibility attribute from GONE to VISIBLE?

# php - 来自php的屏幕截图

> ID：10226741
> 
> 赞同：-1
> 
> 时间：2012-04-19T11:08:22.760
> 
> 标签：php, screenshot

> **可能重复：**
> [使用 javascript 截取网页的屏幕截图？](https://stackoverflow.com/questions/60455/take-a-screenshot-of-a-webpage-with-javascript)
> [使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

我需要通过 php 获取屏幕截图，而无需手动操作。在这个 php 中，我想编写一个屏幕参数来自定义我的屏幕截图图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:58:56.023

你需要一些东西来呈现页面：例如[PhantomJS 。](http://phantomjs.org/)对于纯 PHP，您必须使用像[Browshot](https://browshot.com/api/libraries/php)这样的服务，该服务提供 API 来请求使用 PHP 的屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:10:35.113

PHP 是一种服务器端语言，因此从客户端机器上截屏需要其他技术。

看[PHP的GD库，](http://www.php.net/manual/en/image.examples-png.php)投资图片和PHP的可能性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:59:42.583

如果您可以从 PHP 脚本调用二进制文件，则可以使用 WkHTML。它可以很好地处理 PDF 和图像转换。我正在使用它来呈现片段（如表格），但它适用于整个页面。它甚至可以等待 AJAX 加载和其他 Javascript sturr。 [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)是链接​​。

# android - Android WebView 上的输入文件

> ID：10226742
> 
> 赞同：2
> 
> 时间：2012-04-19T11:08:23.883
> 
> 标签：android, html, cordova, webview

如果有人单击 WebView 中的输入 [type=file]，是否有任何方法可以简单地打开默认文件资源管理器来选择文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:49:10.390

由于 Android 中没有“默认文件资源管理器”，因此无论浏览器的实现者做了什么，您都只能任其摆布。在 的情况下`WebView`，我不确定默认情况下它会做什么，也许什么都没有。

我不是 DOM/JS 专家，但我认为您可以修改一些内容，以便`onClick`上的事件`<input type="file">`会调用您通过注入的 Java 代码，`addJavascriptInterface()`此时您可以调出您想要的任何类型的“文件资源管理器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:36:23.933

据我所知不是。我很想看到一个利用PhoneGap File API 的对话框，它允许您以图形方式选择一个文件，但据我所知没有人这样做过。

# android - Android：如何通过 XML 中的按钮更改背景图像

> ID：10226743
> 
> 赞同：0
> 
> 时间：2012-04-19T11:08:25.310
> 
> 标签：android, xml, layout

我得到了一个菜单，其中的图像相互叠加作为背景图像。我还有一些按钮可以带我进入下一个菜单，最终进入游戏本身。

我想知道的是如何使用按钮更改我拥有的其中一个图像作为布局的背景图像？按钮本身是透明的。

有什么办法可以做到吗？还是我必须使用按钮来保存按下时会改变的图像。例如，我希望播放按钮在我按下它时变大，然后再释放（已经获得图像）它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:30:46.657

您可以使用 buttonSelector.xml 它将根据该按钮上的事件更改背景

选择器 xml 的示例如下所示。您需要将其放入drawables文件夹中...

`<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" android:drawable="@drawable/add_folder_clicked" /> <!-- pressed --> <item android:state_focused="true"
android:drawable="@drawable/add_folder_hover" /> <!-- focused --> <item android:drawable="@drawable/add_folder" /> <!-- default --> </selector>`

# php - 循环遍历 MYSQL 表并对行和上一行字段 PHP 执行操作

> ID：10226745
> 
> 赞同：0
> 
> 时间：2012-04-19T11:08:30.797
> 
> 标签：php, mysql, loops

我想遍历一个 MySQL 表，并根据循环所在的当前行和前一个循环执行计算。

假设我的表有 2 列 -`Film_id`并且`FilmRelease`，我将如何循环并回显当前`FilmRelease`和前一行的列值的计算？

多谢你们

我已经到了这个阶段，但由于某种原因它没有打印出任何东西

```
<?php
 mysql_connect("localhost", "****", "*****") or die(mysql_error()); 
 mysql_select_db("*****") or die(mysql_error()); 

 $sql = mysql_query("SELECT FilmRelease FROM Films_Info") 
 or die(mysql_error()); 

 $last_value = null;

while ($row = mysql_fetch_assoc($sql)) {

  if (!is_null($last_value)) {

    print date_diff($row['FilmRelease'], $last_value) . "<BR>";
  }

  $last_value = $row['FilmRelease'];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:10:53.693

像这样：

```
$last_value = null;

while ($row = mysql_fetch_assoc($sql)) {

  if (!is_null($last_value)) {
    $interval = date_diff(new DateTime($row['FilmRelease']), new DateTime($last_value));
    echo $interval->format('Y-m-d');
  }

  $last_value = $row['FilmRelease'];
} 
```

# ssis - 如何通过 SSIS 创建/删除多维数据集分区

> ID：10226747
> 
> 赞同：3
> 
> 时间：2012-04-19T11:08:34.460
> 
> 标签：ssis, ssas, cube

我找不到任何可以告诉我如何通过 SSIS 任务创建/删除多维数据集分区的好的教程。

这是我第一次这样做，事实上，我也是 SSAS 的新手。所以，我发现的教程是

[使用脚本任务创建多维数据集分区](http://consultingblogs.emc.com/jamiethomson/archive/2008/09/15/ssis-create-analysis-services-partitions-from-a-ssis-package.aspx)

[分析服务执行 DDL 任务](http://www.bidn.com/articles/ssas-administration/88/using-ssis-to-automate-the-creation-of-cube-partitions)

我也看过**分析服务处理任务**，但我不确定它是否可以执行相同的任务。

我需要每个月运行我的包来创建基于变量的多维数据集的新分区。

哪种方法最好并推荐通过 SSIS 进行多维数据集分区？

我想创建一个新分区并根据条件删除旧分区。

**PS**：我之前是一名 .NET 开发人员，所以脚本任务是最好的选择，然后我可以去做。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:55:41.730

一种方法是为多维数据集的每个度量值组创建一个模板分区。使用 SSIS 脚本任务，您可以通过 AMO（分析管理对象）访问模板分区，克隆它，在必要时对其进行修改（例如，源查询）并将其保存到您的数据库中。

示例：[http ://consultingblogs.emc.com/jamiethomson/archive/2008/09/15/ssis-create-analysis-services-partitions-from-a-ssis-package.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2008/09/15/ssis-create-analysis-services-partitions-from-a-ssis-package.aspx)

# android - Android 上下文对象，意图

> ID：10226749
> 
> 赞同：1
> 
> 时间：2012-04-19T11:08:41.747
> 
> 标签：android, android-intent

为什么`Context`创建对象时需要对象引用`Intent`？

```
Intent i = new Intent(context,Target.class); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:10:09.217

`Context is reffred as object of Activity class so its necessary to start Another Activity from this(Context) Activity`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:11:41.383

可能是因为要保持您的数据链接.. Intent 保留信息并在 Context 将整个应用程序保持在一起的情况下共享它...

在程序员看来..上下文具有意图创建对象所需的方法/字段..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:23:41.910

`Context`包含有关应用程序当前运行时状态的信息，对 s 的处理至关重要`Intent`。例如，它跟踪应用程序的权限以确保允许应用程序执行请求的操作。

# hibernate - 在 Criteria 查询中检索匹配的属性（如结果说明）

> ID：10226755
> 
> 赞同：0
> 
> 时间：2012-04-19T11:09:17.477
> 
> 标签：hibernate

我在一个项目中使用 Hibernate，我必须通过插入一些约束来搜索数据库中的对象。我希望搜索过程返回包含对象 id 的行、有关子实体的一些信息，以及最重要的是描述结果中出现该行的原因，例如一对列表（匹配的实体、匹配的属性）包括匹配的孩子。我已经用普通的 sql 做了，而且很乏味。我想我也可以使用hibernate hql来做到这一点，但听起来我正在重写同样的东西，只是用一种稍微不同的语言。我的问题是：有一种方法可以干净地做到这一点，使用标准，尽可能少的 sql 查询？我知道这个问题非常广泛，所以请注意，我在这里寻找建议、技巧、最佳实践，而不是完整的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:04:21.930

有示例查询，您可以在其中为休眠提供它应该查找的实体的示例。也许您可以将结果与示例进行比较。

```
Example example = Example.create(exampleobj)...; // add configs how to work with the example
Criteria crit = currentSession.createCriteria(Mitarbeiter.class).add(example); 
```

# javascript - 在表中使用函数 $(this) 和 next() 等

> ID：10226760
> 
> 赞同：2
> 
> 时间：2012-04-19T11:09:30.513
> 
> 标签：javascript, jquery, html

```
<table>
    <tr>
        <td class="one"><input type="text"></td><td class="two"><input type="text" value="12"></td><td class="three"><input type="text"></td>
    </tr>
    <tr>
        <td class="one"><input type="text"></td><td class="two"><input type="text" value="22"></td><td class="three"><input type="text"></td>
    </tr>
    <tr>
        <td class="one"><input type="text"></td><td class="two"><input type="text" value="14"></td><td class="three"><input type="text"></td>
    </tr>
</table>

$(".one input").change(function(){
   ???
}) 
```

直播：http : [//jsfiddle.net/34Vtk/](http://jsfiddle.net/34Vtk/)

如果我将值填充到第一列 ( `.one`)，则该值应乘以`.two input.val()`，结果应显示在`.three.input.val()`.

我可以用 ID 做这个，但我不能使用函数`$(this)`和`next()`:( 这些输入很多，我必须使用这个`$(this)`和`next()`，而不是 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:13:01.977

您需要同时使用父元素`$(this)`和父`tr`元素作为上下文。

尝试这个：

```
$(".one input, .two input").change(function() {
    var $row = $(this).closest("tr");
    var $one = $(".one input", $row);
    var $two = $(".two input", $row);

    var val1 = $one.val();
    var val2 = $two.val();
    var val3 = val1 * val2;

    $(".three input", $row).val(val3);
}); 
```

[**示例小提琴**](http://jsfiddle.net/34Vtk/5/)

您很可能还需要将其附加到该`.two input`元素上，以便在该元素也更改时更新图形，并且还需要某种形式的验证以确保输入有效数字。

这段代码可以缩短，我只是让它更详细一点，以尽可能清楚地说明发生了什么。

# c++ - 用于 Windows 结构的 C++

> ID：10226762
> 
> 赞同：1
> 
> 时间：2012-04-19T11:09:34.180
> 
> 标签：c++, windows, visual-c++, struct

我是使用 C++ for Windows 开发的新手。

我正在尝试生成一个具有指向其他结构的指针的结构...

这怎么可能？

```
struct InitialNode {  
     Node * nextNode; 
     Node * lowerNode;
} InitialNode;

struct Node {  
     Node * nextNode; 
     Node * lowerNode;
     int value;
} Node; 
```

在 Node * nextNode; 的 InitialNode 结构中突出显示了一个错误；和 Node * lowerNode 是..

有任何想法吗？

提前非常感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:11:35.253

有几个错误：

首先，我很确定你想要一个`typedef`. 此外，您需要在`Node`之前声明`InitialNode`：

```
struct Node;
typedef struct InitialNode {  
     Node * nextNode; 
     Node * lowerNode;
} InitialNode;

typedef struct Node {  
     Node * nextNode; 
     Node * lowerNode;
     int value;
} Node; 
```

你的语法

```
struct A
{
} A; 
```

尝试创建`A`名为的类型的对象`A`。请注意，这`typedef struct`是 C 风格的声明，在 C++ 中不需要。你可以很好地写：

```
struct Node;
struct InitialNode {  
     Node * nextNode; 
     Node * lowerNode;
};
struct Node {  
     Node * nextNode; 
     Node * lowerNode;
     int value;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T11:11:52.070

在 c++ 中，标识符只能在声明之后使用。试试这个：

```
struct Node {  
     Node * nextNode; 
     Node * lowerNode;
     int value;
};

struct InitialNode {  
     Node * nextNode; 
     Node * lowerNode;
} InitialNode; 
```

定义`Node`之前`InitialNode`应该可以解决您的问题

# sql-server - sp_executesql 期望语句...好吧，我给它

> ID：10226763
> 
> 赞同：1
> 
> 时间：2012-04-19T11:09:35.723
> 
> 标签：sql-server

我对这个程序有疑问。这是代码

```
declare @sql nvarchar(4000)
set @sql =  N'SELECT @resp2 = count(*) from '+ @NameTable + ' where datum = ''1'' or datum = ''2''    '
    EXEC sp_executesql
    @query = @sql,
    @params = N'@resp2 INT OUTPUT', 
    @resp2 = @resp2 OUTPUT 
```

> “程序需要‘ntext/nchar/nvarchar’类型的参数‘@statement’。”

我不是在发表声明吗？(@sql)

我要做的就是在执行中为@resp2 设置一个值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:11:49.307

根据[手册](http://msdn.microsoft.com/en-us/library/ms188001(v=sql.105).aspx "sp_executesql (Transact-SQL)")，您应该为调用的参数提供一个值**`@statement`**，但您将其提供为`@query`.

所以应该是：

```
declare @sql nvarchar(4000)
set @sql =  N'SELECT @resp2 = count(*) from '+ @NameTable + ' where datum = ''1'' or datum = ''2''    '
EXEC sp_executesql
**@statement** = @sql,
@params = N'@resp2 INT OUTPUT', 
@resp2 = @resp2 OUTPUT 
```

只要按照说明书，你就没事了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:56:53.620

您的代码在 SQL2008 R2 上对我来说可以正常工作。你在运行什么版本？您可以尝试将最后一行替换为：

```
exec (@sql) 
```

# iphone - 相机视图上的水印图像偏移

> ID：10226764
> 
> 赞同：3
> 
> 时间：2012-04-19T11:09:35.940
> 
> 标签：iphone, objective-c, xcode, ipad

我创建了一个覆盖图像用作水印，但图像被偏移。我在下面放了代码，该代码基于 Ivan Karpan 的这篇文章：[iPhone 中相机视图上实时水印图像](https://stackoverflow.com/questions/2076456/watermark-image-on-real-time-on-camera-view-in-iphone/2078700#2078700)

```
- (void)btCamera_TouchUpInside:(UIButton *)button
{
    // Create the image picker controller
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;
    imagePicker.cameraViewTransform = CGAffineTransformScale(imagePicker.cameraViewTransform, 1.24299, 1.24299);
    imagePicker.allowsImageEditing = NO;
    imagePicker.delegate = self;

    UIImageView * ivWatermark = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Watermark.png"]];
    ivWatermark.alpha = WATERMARK_ALPHA;
    ivWatermark.contentMode = UIViewContentModeTopLeft;
    ivWatermark.frame = self.view.frame;
    imagePicker.cameraOverlayView = ivWatermark;
    [ivWatermark release];

    // Show the image picker
    [self presentModalViewController:imagePicker animated:YES]; 
}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIGraphicsBeginImageContext(CGSizeMake(320, 480));
    [(UIImage *)[info objectForKey:UIImagePickerControllerOriginalImage] drawInRect:CGRectMake(0, 0, 320, 480)];
    [[UIImage imageNamed:@"Watermark.png"] drawAtPoint:CGPointMake(0, 0) blendMode:kCGBlendModeNormal alpha:WATERMARK_ALPHA];
    UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
    imageView.image = image;
    UIGraphicsEndImageContext();

    [picker dismissModalViewControllerAnimated:YES];
    UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

    [picker release];
} 
```

我首先创建 imagePicker，然后将水印添加到该相机图像中，但图像是偏移的。根据此处找到的另一篇文章，我还对缩放进行了愚弄：[在 iPad/iPhone 上使用带有叠加层的相机](https://stackoverflow.com/questions/9777375/using-the-camera-on-the-ipad-iphone-with-an-overlay)

此外，我还阅读了其他有关向相机图片添加叠加图像的文章，但它们似乎都存在相同的问题。

任何帮助都会很棒？

谢谢

# grails - 在 grails 丰富的 ui 的 dateChooser 中设置默认时间

> ID：10226766
> 
> 赞同：1
> 
> 时间：2012-04-19T11:09:43.593
> 
> 标签：grails, plugins, default-value, rich-ui

我想在 grails 丰富的 ui 插件的 dateChooser 功能中设置默认时间。

richui:dateChooser name="fromdate" value="${old?.fromdate}" format="dd.MM.yyyy" time="true"/>

我将默认时间设置为 00.00，如果需要，如何设置默认时间和日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:49:23.297

dateChooser 现在没有时间的默认设置。

您可以修改插件或添加一些 javascript 以放入默认时间

# java - Java - ascii 检查

> ID：10226769
> 
> 赞同：-1
> 
> 时间：2012-04-19T11:10:04.230
> 
> 标签：java, ascii

我有下一个代码：

```
 t= (int)(Math.random()*8+1)+96; //ascii table
        if (t!= 96){
                choose[(int)(t-97)] = 1;
                r[0] = (char)t;}
    } 
```

我尝试在 中`r[0]`，只有从`b`to的字符`h`（`'a'`不允许）。当我运行它时，我看到有时`r[0]`包含`'a'`. 可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:13:51.300

'a' 是[ASCII 97](http://www.manpagez.com/man/7/ascii/)，你并没有阻止它。

为什么不首先从 98 ('b') 到 104 ('h') 中选择一个值，而不是允许选择 'a' 然后拒绝它？

（我还建议使用`Random.nextInt`代替`Math.random`, 和字符文字而不是幻数，但是......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:17:36.047

钥匙

```
a= 97 //asCII 
```

但是您在计算后也有 96 键的 if 条件，您没有验证最后一个键值。见[ASCII 表](http://www.asciitable.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:19:28.590

如果 Math.random() 返回的值小于 0.1249，它将被打印出来。然后整数值变为 97，因此打印“a”。a 的 ASCII 值为 97。您正在检查它是否仅是 96。

# c# - 如何暂停 MSI 安装程序并继续安装？

> ID：10226774
> 
> 赞同：1
> 
> 时间：2012-04-19T11:10:15.637
> 
> 标签：c#, installation, windows-installer

我正在用 C# 编码，目前我正在尝试通过代码安装 MSI 安装程序。这适用于 MsiInstallProduct。此外，我有一个 InstallUiHandlerRecord 回调函数，我可以在其中获取进度等信息。

现在我遇到了一个问题：如果我使用由 WIX 或 Wise 构建的安装程序，并且在安装时我单击取消，安装将停止，如果您真的想取消并且不想取消，则会出现一个消息框安装继续。

我的问题是，是否可以通过我可以说暂停安装并在交互后说继续安装的代码来构建这种行为。

提前感谢您的帮助。

# php - 使补贴和回发跟踪工作

> ID：10226778
> 
> 赞同：4
> 
> 时间：2012-04-19T11:10:24.670
> 
> 标签：php, javascript, jquery

我正在用 PHP 编写赏金脚本。（奖励脚本），使用来自 Prosper202 的开源代码。尝试使用 Subids 和 Postbacks 跟踪潜在客户。我无法让这些东西正常工作。例子。

我想在 url 末尾附加唯一 id。喜欢`http://google.com/c3={unique_id}`

这里Unique id需要随机生成，至少有效期15分钟，需要存入Mysql数据库。

当成功的第三方服务器以格式发送回发时。

```
http://watever.com/c3={unique_id} 
```

然后我们需要实时比较两者。（这需要尽可能快，以避免对最终用户造成延迟。）

在这种情况下我们应该使用什么？

用于 Postback 或 php 的 JavaScript？

以及如何在 php 脚本中操作回发。

如我所说。这个脚本 Prosper202 也具有跟踪回发的相同功能。但我无法从中提取有用的代码。

**资源：-**

```
http://prosper.tracking202.com/apps/
http://prosper.tracking202.com/forum/6/21/tracking-subids#7848 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:47:09.447

这是您需要做的：

1）在 MySQL 中创建一个包含这些字段的事务表：

```
TRANSACTIONS
############
id - INT, AUTO-INCREMENT, UNSIGNED, NOT NULL
transaction_id - VARCHAR(8)
created_on - TIMESTAMP, DEFAULT CURRENT_TIMESTAMP() 
```

2) 在 MySQL 中创建一个包含这些字段的转换表：

```
CONVERSIONS
###########
id - INT, AUTO-INCREMENT, UNSIGNED, NOT NULL
transaction_id - VARCHAR(8)
created_on - TIMESTAMP, DEFAULT CURRENT_TIMESTAMP() 
```

3) 在您的代码中，在将它们发送到 URL 之前，您需要生成并附加一个唯一的交易 ID（也称为子 ID）：

```
/**
* Generates [$length] character transaction ID's. Verifies transaction ID is not
* currently in use. If it is, function recursively attempts to generate
* a unique one. After 10 attempts, it fails and returns false.
*
* @param PDO    Database connection via dependency injection
* @param Int    Length of string to generate
*/
function generateTransactionId($db, $length = 8)
{
// Don't let this function get stuck in endless recursion.
static $recursion_count = 0;
$recursion_count++;
if($recursion_count > 10) 
{
    $recursion_count = 0; 
    return false; 
}

// Create transaction ID
$transaction_id = substr(md5(uniqid(mt_rand(), true)), 0, $length);

// Check to make sure it is unique
$query = "SELECT id FROM myDb.transactions WHERE transaction_id = ?";
$stmt = $db->prepare($query);
$stmt->execute(array($transaction_id));
$row = $stmt->fetch(PDO::FETCH_OBJ);
$stmt = null;

// If nothing found, we have a unique ID. Otherwise recursively find a unique one.
if(!is_object($row) || $row == false)
{
    // Reset recursion counter
    $recursion_count = 0;

    // Found unique ID
    return $transaction_id;
}
else
{
    // Recursively generate unique transaction ID
    return generateTransactionId($db);
}
}

$url = "http://www.google.com/";
$transaction_id = generateTransactionId($myPDOConnection);

// Add to URL
$url = $url . "?c3=" . $transaction_id;

// Do redirect to URL
header('Location: ' . $url); 
```

4) 在另一个用于接收回发的脚本中，您需要通过 GET（或 POST，如果您愿意的话）获取 Sub ID/Transaction ID 并标记转换：

```
$transaction_id = isset($_GET['c3']) ? trim($_GET['c3']) : false;

if($transaction_id)
{
   // Received conversion, add this transaction ID to conversions table
} 
```

* * *

就实时比较而言，您可以访问的唯一指标是重定向之前的时间点，以及您收到回发的时间点。您可以通过检查事务表中的 COUNT() 来查看已完成的重定向次数。您可以通过查看转换表中的 COUNT() 来查看收到的回发/转换次数。

# apache - .htaccess RewriteRule 问题我无法解决

> ID：10226780
> 
> 赞同：0
> 
> 时间：2012-04-19T11:10:31.137
> 
> 标签：apache, .htaccess, mod-rewrite

当前网址：

```
/shop/?display=category&id=cloths 
```

改写为：

```
/shop/cloths 
```

使用以下规则：

```
RewriteRule ^shop/([^/\.]+)$ /shop/index.php?display=category&id=$1 [L] 
```

问题是我需要能够向 url 添加更多的 $_GET 变量，例如：

```
/shop/cloths?page=2 
```

我无法弄清楚这需要什么规则。我也不想限制额外变量的名称，所以我可以：

```
/shop/cloths?page=
/shop/cloths?filter=
/shop/cloths?page=&filter= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:15:29.933

只需添加`QSA`标志：

```
RewriteRule ^shop/([^/\.]+)$ /shop/index.php?display=category&id=$1 [QSA,L] 
```

[http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)

# ruby-on-rails - 基于子域动态设置omniauth-facebook gem的appid、appsecret

> ID：10226783
> 
> 赞同：3
> 
> 时间：2012-04-19T11:10:39.077
> 
> 标签：ruby-on-rails, facebook, omniauth

我们 ror 应用程序中的每个客户都基于子域进行服务，他们有自己的 fbappid、fbsecretid（它为客户的 fb 应用程序提供动力）。我们使用omniauth、omniauth-facebook 来验证用户。所以 customer1.ourapp.com 为一个 appid 为 fbapp_1 的 fb 应用程序和一个 appid 为 fbapp_2 的 customer2.ourapp.com 服务器提供服务

facebook策略初始化的正常方法是将以下行放入初始化程序中

```
config.omniauth :facebook, APP_ID, SECRET, {:scope => 'publish_stream} 
```

我们需要根据子域设置 APP_ID、SECRET，但看起来请求对象在初始化程序时不可用我使用 setup=> 查看选项的动态设置但omniauth-facebook 似乎不支持 appid、appsecret 的设置动态的。

我们如何根据请求的子域动态设置omniauth-facebook的app_id和app_secret？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T05:36:17.667

由于您使用的是设计，请尝试

```
config.omniauth  :facebook, :setup => lambda{
      current_domain = // Get current domain
      config = // Get config
      env['omniauth.strategy'].options[:client_id] = config[current_domain][Rails.env]["app_id"]
      env['omniauth.strategy'].options[:client_secret] = config[current_domain][Rails.env]["app_secret"]
    } 
```

[http://webcache.googleusercontent.com/search?q=cache:zmBqDAomJ84J:blog.cedricbousmanne.com/+&cd=2&hl=en&ct=clnk](http://webcache.googleusercontent.com/search?q=cache:zmBqDAomJ84J:blog.cedricbousmanne.com/+&cd=2&hl=en&ct=clnk) 提供了没有设计的解决方案，只有omniauth

[已编辑] 工作代码摘录

```
config.omniauth :facebook, {:setup => lambda{|env|
   env['omniauth.strategy'].options[:client_id] = $institute_tenant.fbappid
   env['omniauth.strategy'].options[:client_secret] = $institute_tenant.fbappsecret
}, :auth_type => 'https', :scope => 'email'} 
```

# c++ - 参数的隐式默认值？

> ID：10226786
> 
> 赞同：1
> 
> 时间：2012-04-19T11:11:01.760
> 
> 标签：c++, parameters, default-value

如果我得到了这个函数 fun(t1, t2, t3)，并且我用 fun(v1, v2) 调用它，是否可以获得 v3 的默认值，尽管尚未指定它是什么？例如 bool 为 false，指针为 null，int 为 0 等。还是应该引发编译器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:14:33.640

像这样声明它：

```
void fun (Foo t1, Bar t2, bool t3 = false)
{...} 
```

当您放置一个 = 和一个值时，如果没有提供该参数，则该参数将获得一个默认值。但是，您必须从参数列表的右侧开始使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:14:36.687

如果函数没有重载，它将引发编译器错误。

如果你不能改变原型，你可以自己重载它：

```
void fun (bool t1, bool t2)
{ 
   fun (t1,t2, true); //or whatever
} 
```

或者如果您可以更改它，您可以为参数声明一个默认值，如下所示：

```
void fun (bool t1, bool t2, bool t3 = true)
{ 
} 
```

# regex - 使用 RegExp 在字符串的特定侧搜索

> ID：10226790
> 
> 赞同：0
> 
> 时间：2012-04-19T11:11:20.013
> 
> 标签：regex

我有一个长字符串，其中包含如下信息：

`|infoId-*-info||infoId-*-info||infoId-*-info| ...`

我使用`'-*-'`字符作为分隔符，我想在字符的右侧进行搜索，但是如果匹配任何内容，`'-*-'`它应该返回整个部分，有没有办法做到这一点？`infoId-*-info``info`

提前致谢

例子：

这是我的字符串：

```
|8d9f9a0g9r8ad8f-*-sedat||0sdf7a89s9d0wg-*-derya||9g7a6w6e7d89awwe-*-caner| 
```

对于这个字符串，如果我的搜索值是`"edat"`我如何返回整个`8d9f9a0g9r8ad8f-*-sedat`字符串，并且如果我的搜索值是`"s"`它也不应该返回，因为包含字符`0sdf7a89s9d0wg-*-derya`的左侧。如果你能给我支持这个例子的[jsfiddle](http://jsfiddle.net)链接，那将非常受欢迎，非常感谢你花时间。`"-*-"``"s"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:16:55.020

听起来你需要一些类似的东西

```
/((?:infoId)\/YOUR_REGEX_FOR_INFO)\s/ 
```

（我们不知道您的`infoId`和`info`结构如何）。

**按照 OP 添加的示例进行**编辑****

 **您可以使用（对于`edat`）：

```
/\|([^-]+-\*-[^|]*edat[^|]*\|/ 
```

我不知道您使用的是哪种语言，但您可以使用“全局”标志一次获取字符串中的所有匹配项。如果是 JS，它将是`/\|([^-]+-\*-[^|]*edat[^|]*\|/g`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:16:56.090

**尝试这个：**

`(?s)(?<=/)[^/]+(?=/|$)`

**解释：**

```
<!--
(?s)(?<=/)[^/]+(?=/|$)

Options: ^ and $ match at line breaks

Match the remainder of the regex with the options: dot matches newline (s) «(?s)»
Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=/)»
   Match the character “/” literally «/»
Match any character that is NOT a “/” «[^/]+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=/|$)»
   Match either the regular expression below (attempting the next alternative only if this one fails) «/»
      Match the character “/” literally «/»
   Or match regular expression number 2 below (the entire group fails if this one fails to match) «$»
      Assert position at the end of a line (at the end of the string or before a line break character) «$»
--> 
```**

# javascript - jquery颜色编码

> ID：10226792
> 
> 赞同：0
> 
> 时间：2012-04-19T11:11:29.130
> 
> 标签：javascript, jquery

我有一些零件号作为字符串。例如： `partnumber = "a1;a2;a3"`

现在我正在使用`text()`类似的功能显示它

```
$("#id").text("Part number(s) " + partnumber+ " is shown"); 
```

但我只想更改`partnumber`而不是全文的颜色。

所以我应该得到这样的东西：

显示零件编号（某些颜色）a1；a2；a3（某些颜色）。如何使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:15:27.927

您必须将其包装在一个跨度中并使用一个类来定义额外的样式：

```
$("#id").html('Part number(s) <span class="your_color_classname">' + partnumber+ '</span> is shown'); 
```

您必须使用`html()`，而不是`text()`因为您插入的是 html 而不是纯文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:14:23.663

您需要稍微更改一下 html：

```
<div id="id">Part number(s) <span id="partnumbers"></span> is shown</div> 
```

然后在jquery中：

```
$("#partnumbers").html(partnumber); 
```

这样您就可以`#partnumbers`通过`#id`Css 单独设置样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:33:20.820

```
$("#partnumbers").html("Part number(s) <span style='color:red'>" +partnumber+ "</span> is shown"); 
```

# c# - 使用 C# 在 WP7 本地数据库中存储和检索复选框选定的项目

> ID：10226797
> 
> 赞同：2
> 
> 时间：2012-04-19T11:11:41.747
> 
> 标签：c#, windows-phone-7

我有 105 个带有复选框的列表框项目。当用户选择项目时，我希望将所选项目存储在 WP7 本地数据库中。那么，我需要在数据库表列中输入所有列表项吗？或者有没有其他方法可以存储它并在需要时显示所选项目？我正在使用 C# 和 XAML。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:28:37.220

您可以仅将选中的项目存储在数据库表中，如果您再次需要它们，只需显示整个列表并检查数据库中存在的项目。

或者您可以使用 IsChecked 字段将所有项目存储在数据库中，然后您可以简单地读取列表中的整个表，然后将复选框绑定到 IsChecked 字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:59:30.083

叫我傻子，但这就是我的做法

```
// to display user selection - days is a List<DayOfWeek> as stored by you in database
foreach(var day in days)
{
    ListBoxItem lbi = new ListBoxItem();
    TextBlock tb = new TextBlock();
    tb.Text = day.ToString();

    lbi.Content = tb;
    lbi.VerticalContentAlignment = System.Windows.VerticalAlignment.Center;
    lbi.IsSelected = AlarmMod.AlarmData.SelectedDays.Contains(day);

    this.listBox.Items.Add(lbi);
}

// to store
List<DayOfWeek> iDays = new List<DayOfWeek>();

for (int i = 0; i < 7; i++)
{
    if ((this.listBox.Items[i] as ListBoxItem).IsSelected)
    {
        iDays.Add((DayOfWeek)i);
    }
}
// now you store iDays which is a List<DayOfWeek> in database. 
```

# php - 导出csv时如何从列内容中转义分隔符

> ID：10226803
> 
> 赞同：1
> 
> 时间：2012-04-19T11:11:56.893
> 
> 标签：php, mysql, csv, export

我要导出 CSV 文件，分隔符是“，”逗号，但如果列内容有逗号，则会出现问题，在查看 libre office calc 时会破坏 csv 输出。

如果有任何机构可以帮助我如何解决这个问题

我到现在为止

```
//$filename = $row['fileName'].'-ConsignmentInfo.csv';
$filename="test.csv";
$delim = ',';
$columns = array('0Product_Number', 'Product_Name', 'Alternative_Title');
echo implode($delim,$columns )."\n";           

$ptr1 = DD_Db::fetch("SELECT p.pNum,p.pName,a.varcharValue FROM ds_products p   left join productAttribute a on a.id=p.pID where a.attributeId= (select id FROM attribute where attributeName='alternateTitle') ");

 foreach ($ptr1 as $row) {
      $line = array("\"{$row['pNum']}\"","\"{$row['pName']}\"","\"{$row['varcharValue']}\"");
      echo implode($delim,$line)."\n";
 }

header('Content-Type: text/csv');
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header('Content-Disposition: attachment; filename='.$filename);
header('Pragma: cache');
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
exit; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:18:49.850

只需使用[fputcsv](http://php.net/manual/en/function.fputcsv.php)它负责转义并生成正确的 csv 数据。

```
<?php

$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);

$fp = fopen('file.csv', 'w');

foreach ($list as $fields) {
    fputcsv($fp, $fields);
}

fclose($fp);
?> 
```

输出：

```
aaa,bbb,ccc,dddd
123,456,789
"""aaa""","""bbb""" 
```

# 编辑

您始终可以使用[tmpfile](http://www.php.net/manual/en/function.tmpfile.php)的组合打开一个文件，该文件将在请求结束时自动删除，写入该文件，然后在创建报告后使用[fread](http://www.php.net/manual/en/function.fread.php)输出其内容。您必须使用 fread 因为 tmpfile 返回资源，否则您可以使用[tempnam](http://www.php.net/manual/en/function.tempnam.php) + [file_get_contents](http://www.php.net/manual/en/function.file-get-contents.php)但在这种情况下，您必须打开文件并在自己阅读后进行清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:16:28.230

通常的做法是用一对包裹数据，`"`用来`""`表示数据中的双引号字符。

```
foo,bar,"sometimes you get data containing a "","" character","23,000" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T11:17:21.260

将值放在引号中。

[http://pt.wikipedia.org/wiki/Comma-separated_values](http://pt.wikipedia.org/wiki/Comma-separated_values)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:33:19.620

您可以使用[SELECT .. INTO OUTFILE](http://dev.mysql.com/doc/refman/5.5/en/select.html)从查询中执行此操作， 例如

```
SELECT p.pNum, p.pName, a.varcharValue
FROM ds_products p   
LEFT JOIN productAttribute a ON a.id=p.pID 
WHERE a.attributeId = (select id FROM attribute where attributeName='alternateTitle')
INTO OUTFILE '/path/on/server' 
```

如果要添加标题行：

```
SELECT 'A', 'B', 'C'
UNION
SELECT p.pNum, p.pName, a.varcharValue
FROM ds_products p   
LEFT JOIN productAttribute a ON a.id=p.pID 
WHERE a.attributeId = (select id FROM attribute where attributeName='alternateTitle')
INTO OUTFILE '/path/on/server' 
```

# xpath - 如何选择属性名称中带有通配符的元素？

> ID：10226804
> 
> 赞同：1
> 
> 时间：2012-04-19T11:12:03.030
> 
> 标签：xpath, wildcard, html-agility-pack

我有这个 HTML 标签：

```
<div id="23a521b6-5a90-4257-9ee3-17a2cbe8a8fc" jquery17208007497985234224="13"  jquery172080076755224="4"></div> 
```

我需要帮助来选择属性名称为 jquery* 的 div 进行清理，最终结果将是：

```
<div id="23a521b6-5a90-4257-9ee3-17a2cbe8a8fc"></div> 
```

谢谢，伙计们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:49:50.040

不确定您为此使用了什么技术，但要使用 XSLT 摆脱这些属性，请执行以下操作：

```
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:template match="@*|node()">
  <xsl:copy><xsl:apply-templates select="@*|node()"/></xsl:copy>
</xsl:template>
<xsl:template match="@*[starts-with(local-name(), 'jquery')]"/>
</xsl:transform> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:03:40.970

我会选择所有以字符串开头的属性`jquery`，然后使用 AgilityPack 删除它们：

```
var doc = new HtmlDocument();
doc.LoadHtml(html);
var attributes = doc.DocumentNode
    .Descendants()
    .SelectMany(n => n.Attributes.Cast<HtmlAttribute>())
    .Where(a => a.Name.StartsWith("jquery"))
    .ToArray();

foreach (var attribute in attributes)
    attribute.Remove(); 
```

这会给你类似的东西：

```
<div id="23a521b6-5a90-4257-9ee3-17a2cbe8a8fc"></div> 
```

# sql - WHERE IN SQL 语句中的 NULL 用法

> ID：10226805
> 
> 赞同：2
> 
> 时间：2012-04-19T11:12:04.557
> 
> 标签：sql, sql-server, tsql, where-in

我有以下查询

```
Select 
RPAD(x.QUOTE_ID,20,' ')
from csa_sli_all.T_CONV_XREF_CUST_QUOTE x ,
        csa_sli_all.T_CONV_quote q
where   q.select_indicator is null and 
    q.QUOTE_ID = X.QUOTE_ID and 
    q.HOLD_CODE IN ('CAQ' , NULL ) 
```

它没有给我所需的结果。

我将最后一条语句更改为

```
where   q.select_indicator is null and 
    q.QUOTE_ID = X.QUOTE_ID and 
    (q.HOLD_CODE = 'CAQ' or q.hold_code is null) 
```

现在它给了我想要的结果。我的问题是

1 我们不能`NULL`在`WHERE IN`子句中使用吗？

2 如果是，如何

3 按逻辑（不是语法：我知道第一种语法是错误的）两种情况都会给出相同的答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:17:28.323

您不能在使用 IN 的 where 子句中使用空值，因此如果您需要使用它，请像这样使用它：

```
q.HOLD_CODE in ('CAQ', ...) or q.hold_code is null 
```

如果你正在寻找一个空值，你总是必须使用“is null”，因此你不能在 IN 语句中使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:16:48.480

您不能使用`NULL`in`IN`语句，因为`IN`应用了标准`=`运算符。当然，这在比较`NULL`s 时会失败。

就像写作一样`SELECT NULL = NULL`。返回值将是`NULL`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T11:25:12.843

您将不得不`is null`使用`= null`.

在将字段与 进行比较时`NULL`，SQL 查询应使用`IS`运算符代替“=”运算符。原因是如果`ANSI_NULLS`连接的选项为 On，则与 NULL 值比较的表达式将不会返回 true 或 false 值，而是会返回未知值。为简单起见，如果表 xxx 有一个名为 col1 的列，其中包含两个 NULL 值，则此查询将导致获取零记录：

```
Select * from xxx where col1 = NULL 
```

同时，此查询将导致获取两条记录：

```
Select * from xxx where col1 IS NULL 
```

但是，如果您将 ANSI_NULLS 设置为关闭，那么这两个查询都将返回两条记录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T11:19:34.000

不确定，但我认为您不能在 where 子句中使用 NULL。

我总是对 =NULL 和 IS NULL 感到困惑

你为什么不使用 ISNULL 即...

```
 WHERE ISNULL(q.HOD_CODE,'CAQ') = 'CAQ' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-19T11:22:08.573

如果先设置 ANSI_NULLS OFF，则可以使用 IN (Null) Fine。

ANSI_NULLS ON 时无法执行与 NULL 的比较（=、>、< 等）

```
SET ANSI_NULLS OFF
Select 
RPAD(x.QUOTE_ID,20,' ')
from csa_sli_all.T_CONV_XREF_CUST_QUOTE x ,
        csa_sli_all.T_CONV_quote q
where   q.select_indicator is null and 
    q.QUOTE_ID = X.QUOTE_ID and 
    q.HOLD_CODE IN ('CAQ' , NULL ) 
```

应该可以正常工作

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-19T11:23:18.730

`NULL IN (NULL)`评估为未知。要比较空值，您应该使用`is null`运算符。Null 有特定的处理方法。

[样品](https://data.stackexchange.com/stackoverflow/query/67234)：

```
select case when null in (null) then 1 else 0 end

returns 0 
```

[记住 Codd 规则 3](http://en.wikipedia.org/wiki/Codd%27s_12_rules)：

> **规则 3：**空值的系统处理：DBMS 必须允许每个字段保持为空（或为空）。具体来说，它必须支持系统的、不同于所有常规值（例如，在数值的情况下，“与零或任何其他数字不同”）和独立于数据的“缺失信息和不适用信息”的表示类型。**这也暗示了这些表示必须由 DBMS 以系统的方式进行操作。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-19T11:20:04.953

您必须使用联接，而不是使用子查询。说为了论证你正在使用 SQL Server，做类似的事情（显然填写你的字段）：

```
SELECT yourField, yourField2 
FROM yourTable t1
INNER JOIN yourTable2 t2 ON t1.Id = t2.Id
WHERE t1.field is null
AND (t1.code = 'CAQ' OR t1.code IS NULL) 
```

# dropbox - 无法使用 php api 将文件上传到保管箱？

> ID：10226807
> 
> 赞同：4
> 
> 时间：2012-04-19T11:12:07.717
> 
> 标签：dropbox, dropbox-api, dropbox-php

我正在尝试使用 dropbox api 上传文件，但以下代码显示一些错误：

**引导程序.php**

```
// Register a simple autoload function
spl_autoload_register(function($class){
    $class = str_replace('\\', '/', $class);
    require_once('../' . $class . '.php');
});

// Set your consumer key, secret and callback URL
$key      = 'XXXXXXXXXXXXX';
$secret   = 'XXXXXXXXXXXXX';

// Check whether to use HTTPS and set the callback URL
$protocol = (!empty($_SERVER['HTTPS'])) ? 'https' : 'http';
$callback = $protocol . '://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];

// Instantiate the required Dropbox objects
$encrypter = new \Dropbox\OAuth\Storage\Encrypter('XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX');
$storage = new \Dropbox\OAuth\Storage\Session($encrypter);
$OAuth = new \Dropbox\OAuth\Consumer\Curl($key, $secret, $storage, $callback);
$dropbox = new \Dropbox\API($OAuth); 
```

**putFile.php**

```
// Require the bootstrap
require_once('bootstrap.php');

// Create a temporary file and write some data to it
$tmp = tempnam('/tmp', 'dropbox');
$data = 'This file was uploaded using the Dropbox API!';
file_put_contents($tmp, $data);

// Upload the file with an alternative filename
$put = $dropbox->putFile($tmp, 'api_upload_test.txt');

// Unlink the temporary file
unlink($tmp);

// Dump the output
var_dump($put); 
```

代码作者：BenTheDesigner-Dropbox

**错误：** 致命错误：未捕获异常 'Dropbox\Exception' 并带有消息“应用程序文件夹（沙盒）访问尝试失败，因为此应用程序未配置为具有应用程序文件夹。您的访问类型应该改为“保管箱”吗？（状态代码：403）'在 C:\wamp\www\BenTheDesigner-Dropbox-b49576c\Dropbox\OAuth\Consumer\Curl.php 第 103 行

( ! ) Dropbox\Exception: 应用程序文件夹（沙盒）访问尝试失败，因为此应用程序未配置为具有应用程序文件夹。您的访问类型应该改为“保管箱”吗？（状态代码：403）在 C:\wamp\www\BenTheDesigner-Dropbox-b49576c\Dropbox\OAuth\Consumer\Curl.php 第 103 行

我不知道该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:38:43.650

您目前可以为两种“访问类型”注册 Dropbox API 应用程序，“应用程序文件夹”（又名沙盒）和“完整 Dropbox”（又名 Dropbox）。您在注册应用程序时做出此选择。之后，您可以在应用的选项页面上查看您拥有的类型。您可以在此处找到指向您的应用选项页面的链接： [https ://www.dropbox.com/developers/apps](https://www.dropbox.com/developers/apps)

在您的代码中，您需要设置“root”（通常设置在与您的密钥相同的位置）以反映正确的访问类型。

此错误表示您的应用已注册为完全 Dropbox 访问权限，但您已在代码中设置了应用文件夹。

要解决此问题，请找到您的 root 设置位置并将其切换到“dropbox”。（或者，如果您确实想使用应用文件夹访问权限，请注册一个具有应用文件夹访问权限的新应用并使用这些密钥。）

看起来您正在使用的库在您应该使用的 API 类中有一个函数“setRoot”： [https ://github.com/BenTheDesigner/Dropbox/blob/master/Dropbox/API.php](https://github.com/BenTheDesigner/Dropbox/blob/master/Dropbox/API.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T04:52:30.670

此行中 API.php 文件的更改

```
public function __construct(OAuth\Consumer\ConsumerAbstract $OAuth, $root = 'dropbox')
    {
        $this->OAuth = $OAuth;
        $this->setRoot($root);
    } 
```

在`$root='dropbox'` 你的代码中有沙箱..所以删除沙箱并编写保管箱

# sencha-touch - Sencha DataView scrollTo() 最初不工作

> ID：10226808
> 
> 赞同：3
> 
> 时间：2012-04-19T11:12:07.953
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试让数据视图滚动到特定位置。我正在 Chrome 中对此进行测试。我的数据视图中有一个`scrollToSelected()`方法，它计算滚动到的位置，然后调用：

```
var scroller = this.getScrollable().getScroller();
scroller.scrollTo(0, y, true); 
```

这在我选择触发我的`scrollToSelected()`方法的列表项时有效。但在我第一次显示数据视图时`select(id)`，这也触发了`scrollToSelected()`。该变量`y`已正确计算，但不会发生滚动。所以我`scroller.refresh()`在之前的代码中添加了一个`scrollTo()`，现在它可以工作了。但仅当 Chrome 的开发工具栏打开时。如果我在开发人员工具栏不存在时打开页面，则滚动永远不会发生。有任何想法吗？

**编辑：** 如果有帮助，还有更多代码。请原谅任何明显的架构错误——Sencha 对我来说是一个完全不同的编码范例。也就是说，欢迎提出建议。

```
Ext.define('NC.controller.Cook', {
  extend: 'Ext.app.Controller',

  config: {
    control: {
      stepsPanel: {
        swipe: 'stepSwipe',     // this will eventually call goToStep
        selectStep: 'goToStep' // if the user directly selects a step (by tap), this will be fired
      },
      cookPage: {
        show: 'setup'
      }
    },
    refs: {
      cookPage: 'cookpage',
      stepsPanel: 'stepspanel',
    }
  },

  launch: function() {
    this.current = 0;
    this.last = 0;
  },

  setup: function() {
    var sp = this.getStepsPanel();    
    sp.select(this.current);
  },

  stepSwipe: function(dataview, event, node, options, eOpts) {
    this.last = this.current;

    if (event.direction == 'up') {
      if (this.current < dataview.getStore().data.length-1) {
        this.current += 1;
      }
    } else if (event.direction == 'down') {
      if (this.current > 0) { this.current -= 1; }
    }

    // Select the current step. It will trigger the dataView's select
    // event which will end up calling goToStep.
    dataview.select(this.current);
  },

  goToStep: function(dataview, record) {
    dataview.scrollToSelected();
  }
});

Ext.define('NC.view.cook.Steps', {
  extend: 'Ext.DataView',
  id: 'steps',
  xtype: 'stepspanel',

  config: {
    flex: 1,
    activeItem: 1,
    itemTpl: '{text}',
    selectedCls: 'current',
    itemCls: 'step',
    scrollable: true,
    zIndex: 10,
    listeners: {
      // this is if the user doesn't swipe but directly selects one of the steps
      select: function(dataview, record, eOpts) { dataview.fireEvent('selectStep', dataview, record); }
    }
  },

  initialize: function() {
    // set scrolling behaviours off without turning scrollable off
    this.getScrollable().getScroller().onDragStart = null;

    this.callParent();
    var that = this;
    this.element.on('swipe', function(event, node, options, eOpts) {
      that.fireEvent('swipe', that, event, node, options, eOpts);
    });
  },

  scrollToSelected: function() {    
    //var toTop = Ext.get(this.element).down(".current").getY();
    var thisEl = Ext.get(this.element);
    var current = thisEl.down(".current");
    var prev = current;
    var y = 0;

    do {
      prev = prev.prev('.step');
      if (prev) { y += prev.getHeight(); }
    }
    while(prev);

    y = y - ((thisEl.getHeight()-current.getHeight())/3) + 5000;

    var scroller = this.getScrollable().getScroller();
    scroller.refresh();
    scroller.scrollTo(0, y, false);
  }
}) 
```

**编辑2：**

鉴于“时间问题”的建议，我用计时器将函数包装`select()`在函数中，如下所示：`setup`

```
setTimeout(function() { sp.select(0); }, 10); 
```

似乎现在正在工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:00:43.417

我为此使用了“maxpositionchanged”事件，每当列表的滚动条的高度发生变化时都会触发（因此在加载列表时）

```
me.getList().getScrollable().getScroller().on('maxpositionchange', function(s, max) {
            if (!initialScrollDone && max.y >= me.ROW_HEIGHT*9) {
                s.scrollTo(0, 120);
                initialScrollDone = true;
            }
        }); 
```

ROW_HEIGHT 是我自己指定的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-22T14:30:41.480

鉴于 rdougan 提出的“时间问题”的建议，我将 select() 包装在带有计时器的 setup 函数中，如下所示：

```
setTimeout(function() { sp.select(0); }, 10); 
```

它现在可以工作，但我不知道它会有多强大。

# java - 用java编写一个BBS服务器

> ID：10226810
> 
> 赞同：0
> 
> 时间：2012-04-19T11:12:18.483
> 
> 标签：java

前几天看了 Google BBS 项目后，我非常喜欢为我们的企业应用程序编写一个新的前端的想法，这将是一个 bbs。

然后这个 bbs 服务器会调用各种 web 服务等。一切都很好，之前都完成了。

我的问题是我之前创建了一个 telnet 服务器，从客户端连接并交谈并发送数据，但是我如何获得 BBS 外观，即能够将光标放在我想要的位置，接收移动（通过箭头键）命令来移动并在底部放置一个状态（模拟）栏。在绘制新屏幕时获取文本向上滚动效果（但不是状态栏）

所以问题是使用 telnet 技术是做到这一点的最佳方式，或者我怎样才能使用另一种技术来实现这种外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:33:20.363

好的..发现这似乎是我需要的答案：

[http://www.retrogradebbs.com/projects/cbbs/history.html](http://www.retrogradebbs.com/projects/cbbs/history.html)

干杯

# php - 指示 api 使用哪个提供程序

> ID：10226811
> 
> 赞同：0
> 
> 时间：2012-04-19T11:12:19.223
> 
> 标签：php, maps, directions

我有一个关于定向服务的问题。有一个类似的问题，我对此作出了回应，但没有回应，所以我再次问我的问题。对不起，如果这是双重的！我正在谈论的帖子是[google maps api的替代品](https://stackoverflow.com/questions/4151593/alternatives-to-google-maps-api)

现在我的问题是：我需要为必须每天开车送货的快递员做一个路线描述。这只是一个包含需要按正确顺序驾驶的航点的列表。我说的是一条路线中的 10 到 20 个航路点。首先我尝试了谷歌，我完成了脚本，他们最多有 8 个航点。我不能接受专业帐户，因为它太贵了！！

哪个提供商最好做到这一点。我在每天计算路线的cronjob中构建它，所以我不能使用javascript。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:17:29.373

也许[http://openstreetmap.org](http://openstreetmap.org)适合你。那里也可以[设置航点](http://wiki.openstreetmap.org/wiki/Managing_waypoints_with_OSM)。

*   [openstreetmap的php框架概述](http://wiki.openstreetmap.org/wiki/Frameworks)
*   [PHP路由](http://www.phproute.org/)

# c++ - VC++ 和 MySQL C++ 连接器的互操作异常

> ID：10226813
> 
> 赞同：1
> 
> 时间：2012-04-19T11:12:23.017
> 
> 标签：c++, mysql, visual-c++

我正在帮助一位朋友完成他的学士论文项目。这是一个计算各种材料弯矩的程序。客户期望的额外要求之一是存储和检索程序中使用的各种数据的数据库功能。

该程序是用托管 C++ 编写的表单应用程序。我加入进来帮助编写数据库功能。我正在使用 MySQL Server 5.5 和 MySQL Connector/C++ 来桥接程序和数据库。一切进展顺利，我们需要的所有功能都可以正常工作，但仅限于调试。一旦我们将程序置于发布模式，运行时就会出现未定义的行为。以下是用于打开与数据库的连接的函数：

```
try
{
    m_driver = get_driver_instance();
    m_conn = m_driver->connect(m_dbHost, m_dbUser, m_dbPwd);
    m_conn->setSchema(m_dbSchema);
}
catch(sql::SQLException &e)
{
    int a = e.getErrorCode();
    MessageBoxA(NULL, e.what(), "DB Error", MB_OK);
} 
```

传递给连接函数的值都是 std::string。在调试模式下，连接没有问题。在发布模式下，调用 connect 函数后会捕获异常，并显示消息“Unknown MySQL Server Host '####' (0)”，其中 #### 始终是一些垃圾文本。我还注意到在输出窗口中抛出了另一个异常，这个异常是 System.Runtime.InteropServices.SEHException 类型。

我一直在做一些研究，并在许多论坛（以及这里的堆栈交换）上看到了许多这种异常的案例，但似乎没有人对 MySQL 连接器有这个问题。我的假设是内存被损坏，因为程序是混合模式，主程序代码是用托管 C++ 编写的，而我的数据库帮助程序代码是本机 C++（根据连接器的要求）。

是否可以在我的代码中更改某些内容以尝试解决此问题，以确保字符串在运行时不会被损坏。我尝试了许多不同的技巧来尝试解决问题，但没有任何效果。

谢谢，汤姆

更新：我现在在调试模式下看到此错误。我添加了代码以从数据库中检索值并填充表单上的一些文本框。代码如下：

```
 // Populate the form with material details
             String^ selectedMaterial = (String^)(comboBox1->SelectedItem);
             string selectedMaterial_ = "";
             MarshalString(selectedMaterial, selectedMaterial_);

             sql::ResultSet* results = dbHelper.GetData("matname", selectedMaterial_);
             if (results->rowsCount() == 1)
             {
                 // Outdim
                 string outdim_ = "";
                 outdim_ = results->getString("outdim");

                 String^ outdim = gcnew String(outdim_.c_str());
                 textBox1->Text = outdim;
             }
             else
             {
                 // !!!! Duplicate materials in list
             } 
```

当它试图从结果集中读取 outdim 时，会抛出 SEHException，并且给出的唯一其他信息是它是在外部组件中抛出的。

更新 2：我针对调试可执行文件运行 Application Verifier，然后从 VS2010 启动该程序。但是，表单窗口永远不会加载，因此程序必须在某处停止。奇怪的是，Application Verifier 的日志文件中绝对没有任何信息。我也尝试过发布版本，但我也没有从中获得任何有用的信息。

# ruby-on-rails - 如何使用rails将单选按钮选择保存在数据库中

> ID：10226820
> 
> 赞同：1
> 
> 时间：2012-04-19T11:12:44.950
> 
> 标签：ruby-on-rails, ruby, haml

这是我的控制器：

```
class ReportNeedsController < ApplicationController
def index
@report_needs = nil
end
  def new
     @report_need = ReportNeed.new
  end    
  def create
     @report_need = ReportNeed.new(params[:report_need])
     @report_need.save
     redirect_to @report_need
  end
end 
```

这是我的 new.haml 文件：

为什么要举报？

```
%form
    %input{:name => "option", :type => "radio", :value => "spam"}
    spam                   
    %br/    

enter code here

    %input{:name => "option", :type => "radio", :value => "product_corrupted"}      
    product_corrupted                   
    %br/                      
    %input{:name => "option", :type => "radio", :value => "product_spoiled"}       
    product_spoiled 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:05:19.627

在视图中进行更改，例如：

```
 %input{:type => "radio", :name => "report_need[product_type]", :id => "report_need[product_type]-1", :value => "salesforce", :checked => true}
  %br/
  %input{:type => "radio", :name => "report_need[product_type]", :id => "report_need[product_type]-2", :value => "salesforce", } 
```

在控制器中，如果**product_type**是表**report_needs**的字段，则无需更改您的操作。否则它的变化和存储它像：

```
 def create
     report_need = ReportNeed.new(params[:report_need])
     report_need.radio_field_name = params[:report_need][product_type]
     report_need.save
     redirect_to report_need
  end 
```

# r - R 帮助选项 - 设置 help_type="text" 好

> ID：10226831
> 
> 赞同：1
> 
> 时间：2012-04-19T11:13:32.027
> 
> 标签：r

如何在 R 中设置好的参数 help_type="text" ？每次启动 R 会话时，我都必须输入命令选项（help_type="text"），还是可以将其设置为常量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:32:14.450

您可以将该选项选项放在`.Rprofile`启动 R 的目录中的文件中。我使用该方法来加载常用函数和一组默认包。

我想我应该提到以句点开头的文件（所谓的点文件）有时会被操作系统隐藏。（我知道这在 Mac 和 Windows 机器上是正确的。）在 Mac 上，您可以更改 Finder.app 的行为以显示这些文件。这意味着您可以使用您的操作系统 GUI 来编辑它们。（并非我们所有人都支持 Emacs。）

# php - 使用谷歌地图提交位置

> ID：10226832
> 
> 赞同：4
> 
> 时间：2012-04-19T11:13:42.413
> 
> 标签：php, jquery, google-maps

我有一个 html 表单，我想嵌入谷歌地图，以便用户可以确定某个位置。提交表格后如何获取位置？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T13:29:52.290

尽管@zerkms 给出了正确信息的指针，但这可能还不够。我[用一个工作示例创建了一个小提琴](http://jsfiddle.net/lightningwhelk/RDGGY/)：来提供帮助。基本部分是：

1.  一个 javaScript 函数，它使用 maps API 在用户点击的地方放置一个标记（这是 placeMarker）
2.  提交按钮的 JavaScript 单击处理程序，可防止正常的表单提交并将标记的当前纬度记录在隐藏的表单字段中
3.  调用普通表单提交

这是 placeMarker 代码：

```
function placeMarker(location) {
    if (marker) {
        marker.setPosition(location);
    } else {
        marker = new google.maps.Marker({
            position: location,
            map: mapInstance
        });
    }
} 
```

这是用于处理提交的 jQuery 代码：

```
$("#submitbutton").on("click", function(e) {
    // Prevent normal submit action
    e.preventDefault();
    // Collect current latlng of marker and put in hidden form field
    if (marker) {
        $("#latlngfield").val(marker.getPosition().toString());
    } else {
        $("#latlngfield").val("not entered");
    }
    // Show results for debugging
    submitAction();
    // Uncomment this for production and remove submitAction() call
    // $("#dataform").submit();
}); 
```

这是我使用的表格：

```
<form id="dataform">
    <fieldset>
        <legend>Form Information</legend>    
            <label for="firstnamefield">First Name</label>
            <input type="text" name="firstname" id="firstnamefield"><br>
            <label for="lastnamefield">Last Name</label>
            <input type="text" name="lastname" id="lastnamefield"><br>
            <input type="reset" name="reset" value="Clear">
            <input type="submit" name="submit" id="submitbutton" value="Submit Data">
            <input type="hidden" name="latlng" id="latlngfield">
    </fieldset>
</form> 
```

生产中不需要 submitAction，我只是想展示这些值会发生什么：

```
function submitAction() {
    alert("Value of firstname is " + $("#firstnamefield").val());
    alert("Value of lastname is " + $("#lastnamefield").val());
    alert("Value of latlng is " + $("#latlngfield").val());
} 
```

希望这可以帮助！

# emacs - 如何在 Emacs 中 [tar 和] 压缩标记的文件

> ID：10226836
> 
> 赞同：10
> 
> 时间：2012-04-19T11:14:04.097
> 
> 标签：emacs, dired

在`dired+`Debian Squeeze 变体上的 Emacs 23.2.1 中，我选择了四个文件，`*`然后按下`Z`以压缩它们。我回答`y`了提示，并在迷你缓冲区中看到了一些状态更新。我在哪里可以找到压缩文件？我测试了一个*文件*（`C-u` `Z`如何在 Emacs 中 [tar 和] 压缩标记的文件？

（为了抢占任何关于 tar、gzip、其他格式和档案的哲学或方法论讨论，我只想将四个文件作为压缩数据存储在一个文件中。如果可以通过 tar 和 gzip 或直接压缩每个文件来实现存档没关系。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T11:27:11.220

如果`dired+`是类似的东西`dired`，您可以用标记文件`m`然后点击`!`（在标记的文件上运行shell命令）并将命令指定为`tar -czf foo.tar.gz *`（这`*`是一个特殊的标记，被标记文件的名称替换）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T12:15:22.783

您还可以通过标记文件并将其复制到存档文件来存档文件。

例如，将几个文件标记为 dired，然后选择`m-x dired-do-copy`.

当提示输入目的地时，键入`test.zip`。这些文件将自动添加到 zip 存档中。

您还可以通过在 dired 中选择文件并运行命令来解压缩文件`dired-do-extract`

要进行设置，请查看以下变量： dired-to-archive-copy-alist dired-extract-alist

这是我的设置，它已经为我服务了很多年......

```
;; dired-a provides support functions, including archiving, for dired
(load "dired-a")

;; Alist with information how to add files to an archive (from dired-a)
;; Each element has the form (REGEXP ADD-CMD NEW-CMD). If REGEXP matches
;; the file name of a target, that target is an archive and ADD-CMD is a command
;; that adds to an existing archive and NEW-CMD is a command that makes a new
;; archive (overwriting an old one if it exists). ADD-CMD and NEW-CMD are:
;; 1\. Nil (meaning we cannot do this for this type of archive) (one of
;;    ADD-CMD and NEW-CMD must be non-nil).
;; 2\. A symbol that must be a function e.g. dired-do-archive-op.
;; 3\. A format string with two arguments, the source files concatenated into
;;    a space separated string and the target archive.
;; 4\. A list of strings, the command and its flags, to which the target and
;;    the source-files are concatenated."
(setq dired-to-archive-copy-alist
      '(("\\.sh\\(ar\\|[0-9]\\)*$" nil "shar %s > %s")
    ("\\.jar$" ("jar" "uvf") ("jar" "cvf"))
    ("\\.tar$" ("tar" "-uf") ("tar" "-cf"))
    ("\\.tgz$\\|\\.tar\\.g?[zZ]$" ("tar" "-uf %s" "|" "gzip > %s") ("tar" "-czvf"))
    ("\\.ear$" ("zip" "-qr") ("zip" "-qr"))
;   ("\\.rar$" ("rar" "a")   ("rar" "a"))
    ("\\.war$" ("zip" "-qr") ("zip" "-qr"))
    ("\\.zip$" ("zip" "-qr") ("zip" "-qr"))
    ("\\.wmz$" ("zip" "-qr") ("zip" "-qr")) ;; for media player skins
    ("\\.arc$" ("arc" "a") nil)
    ("\\.zoo$" ("zoo" "aP") nil)
    ))

;; use pkzip with manipulating zip files (t) from within dired (use zip
;; and unzip otherwise)
(setq archive-zip-use-pkzip nil)

;; add these file types to archive mode to allow viewing and changing
;; their contents
(add-to-list 'auto-mode-alist '("\\.[ejrw]ar$\\'" . archive-mode))

;; modify the dired-extract switches to use the directory
;; ~/download/tryout as the default extract directory for zip files
(defconst MY_TRYOUT_DIR "~/downloads/tryout"
  "Directory for extracting files")

(setq dired-extract-alist
      `(
    ("\\.u\\(ue\\|aa\\)$" . dired-uud)
    ("\\.jar$" . "jar -xvf %s")
    ("\\.tar$" . ,(concat "tar -xf %s -C " MY_TRYOUT_DIR))
    ("\\.tgz$\\|\\.tar\\.g?[zZ]$" . ,(concat "tar -xzf %s -C " MY_TRYOUT_DIR))
    ("\\.arc$" . "arc x %s ")
    ("\\.bz2$" . ,(concat "bunzip2 -q %s"))
    ("\\.rar$" . ,(concat "unrar x %s " MY_TRYOUT_DIR "\\"))
    ("\\.zip$" . ,(concat "unzip -qq -Ux %s -d " MY_TRYOUT_DIR))
    ("\\.ear$" . ,(concat "unzip -qq -Ux %s -d " MY_TRYOUT_DIR))
    ("\\.war$" . ,(concat "unzip -qq -Ux %s -d " MY_TRYOUT_DIR))
    ("\\.zoo$" . "zoo x. %s ")
    ("\\.lzh$" . "lha x %s ")
    ("\\.7z$"  . "7z e %s ")
    ("\\.g?[zZ]$" . "gzip -d %s")   ; There is only one file
    )) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-28T20:10:29.633

平台：Ubuntu

**要求**

系统：
sudo apt-get install atool

Emacs:
Mx package-list-packages
Cs dired-atool RET
i
x

**解决方案**

1）标记dired缓冲区中的文件。
2) Mx dired-atool-do-pack 注意：确保 shell-file-name 设置为“/bin/bash”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-07T21:09:36.080

在回答后一个问题时，另一个可用于从 dired 生成压缩 tar 文件的工具是[pack](https://github.com/10sr/pack-el)。标记所需的文件并执行`pack-dired-do-pack`，指定`whatever.tar.gz`为输出文件名。

# php - 在托管服务器上调试 PHP 代码

> ID：10226837
> 
> 赞同：1
> 
> 时间：2012-04-19T11:14:06.213
> 
> 标签：php, debugging

我有一个托管服务器 (rochenhost.com)，我在其中运行一些 PHP 代码。在过去，在我开始作为软件开发人员工作之前，自学成才之前，我将变量打印出来。

现在经过几年的学校和开发工作，在我学会使用调试器之后，我想：有没有什么好的 PHP 代码调试工具，在托管服务器上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T18:22:11.600

您正在生产服务器上直接处理的“托管代码”是什么？或者您是否有两个独立的代码库，一个用于开发（调试等），另一个用于生产（显示给您的实际用户）？您可能知道，直接在生产服务器上更改代码有点疯狂，几乎可以保证偶尔会导致您的网站宕机或造成安全漏洞。所以我最大的建议是**获得一个本地开发服务器**。这就像为您的计算机下载适当的 XAMP 堆栈并在调试完文件后使用您最喜欢的 VCS 与生产服务器同步文件一样简单。

拥有本地开发服务器后，请查看[此问题](https://stackoverflow.com/questions/1160686/step-through-debugging-of-php-on-windows)以获取具有逐步功能的调试器列表，并查看[此](https://stackoverflow.com/questions/6166/any-good-php-ide-preferably-free-or-cheap)问题以获取不同平台上可用的 IDE 的更大列表。

如果您在远程服务器上调试代码时遇到困难，这里有一些其他的做法可以提供帮助。你可能已经在做这些了。

1)**打开错误输出。**您可以通过在开头插入以下行来为特定脚本执行此操作：

```
ini_set("display_errors","1");
error_reporting(E-ALL); 
```

这将（有时）将信息性错误消息打印到页面。将此信息暴露给访问者被认为是主要的安全风险，因此请确保在完成测试后删除这些行。如果您有本地开发服务器或外部无法访问的服务器，则可以通过将行添加`display errors = 1`到 php.ini 来打开所有页面的错误报告。

2)**找到您服务器的 PHP 错误日志。**这通常包含有关页面为何死亡的信息，即使您无法加载足够的页面以供 PHP 在那里显示错误消息。您还可以使用该命令`error_log('your message here')`将消息打印到日志中，这在您不能只在页面上转储信息时很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T11:18:24.843

我对 FireFox 使用 FirePHP 扩展，对 Chrome 使用 ChromePhp。他们将日志消息放在浏览器的控制台日志中。他们为我节省了数小时的调试时间。

# expression - google关键字的正则表达式

> ID：10226839
> 
> 赞同：0
> 
> 时间：2012-04-19T11:14:23.957
> 
> 标签：expression

我正在尝试构建一个正则表达式来检测谷歌搜索字符串中的关键字。即来自谷歌的搜索词“惊人的汽车”的字符串是

```
https://www.google.pl/#hl=pl&output=search&sclient=psy-ab&q=amazing+car&oq=amazing+car&aq=f& ... etc 
```

我尝试使用这个正则表达式来检测关键字 car：

```
(google\.).+(&|\?)q=(car) 
```

但这似乎无法正常工作。我错过了什么吗？非常感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:12:25.613

仅当查询以“car”开头时，您的表达式才会匹配。如果您在组中使用“.*”，那么贪婪的 .+ 将使“q=”与 URL 后面的“oq=”匹配。

这可能对您有用：

```
(google\.).+(&|\?)q=([^&]*car) 
```

或者，虽然更复杂，但更安全，应用此正则表达式，它将捕获唯一捕获组中的关键字：

```
https?://(?:[^/]+\.)?google\.[^/]+/[^?]*[?#](?:.*&)?q=([^&]*) 
```

或者，如果您的正则表达式引擎不支持非捕获组，请使用以下命令：

```
https?://([^/]+\.)?google\.[^/]+/[^?]*[?#](.*&)?q=([^&]*) 
```

并在第三组中阅读您的关键字。

# automapper - AutoMapper：映射到目标类时忽略源参数

> ID：10226845
> 
> 赞同：1
> 
> 时间：2012-04-19T11:14:44.923
> 
> 标签：automapper

我想使用 AutoMapper 来映射类，但也想防止源参数映射过来。

```
public class Dest
{
    public string strInclude { get; set; }
}

public class Source
{
    public string strInclude { get; set; }
    public string strIgnore { get; set; }
}

Mapper.CreateMap<Dest, Source>()
    //code to prevent strIgnore from mapping over to Dest 
```

我可以找到很多忽略目标参数的示例，即

```
Mapper.CreateMap<Dest, Source>()
    .ForMember(dest => dest.strIgnore, src => src.Ignore()); 
```

但是，我似乎找不到相反的情况。

# javascript - 如何更新引导弹出框文本？

> ID：10226851
> 
> 赞同：58
> 
> 时间：2012-04-19T11:15:04.823
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 bootstrap-popover 在元素旁边显示一条消息。

如果我想在第一次之后在弹出窗口中显示不同的文本，文本不会改变。使用新文本重新实例化弹出框不会覆盖。

请参阅此 js fiddle 以获取实时示例：

[http://jsfiddle.net/RFzvp/1/](http://jsfiddle.net/RFzvp/1/)

（第一次点击后alert中的消息和dom中的消息不一致）文档对如何解绑有点轻描淡写：http: [//twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

我用错了吗？关于如何解决的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-07-03T12:10:37.483

您可以使用 jquery 数据闭包字典直接访问选项，如下所示：

```
$('a#test').data('bs.popover').options.content = 'new content'; 
```

即使在第一次初始化弹出框之后，此代码也应该可以正常工作。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-04-19T12:11:32.217

您好，请在此处查看工作**演示**：http : [//jsfiddle.net/4g3Py/1/](http://jsfiddle.net/4g3Py/1/)

我已经进行了更改以获得您想要的结果。:)

我想你已经知道你在做什么，但是我的一些示例建议如下：http: [//dl.dropbox.com/u/74874/test_scripts/popover/index.html#](http://dl.dropbox.com/u/74874/test_scripts/popover/index.html#) - 分享这个链接给你如果您会看到源通知属性`data-content`，但您想要的内容通过以下更改起作用，则具有不同弹出窗口的不同链接的想法。

有一个不错的，希望这会有所帮助。D'uh 不要忘记投票并接受答案:)

**jQuery代码**

```
var i = 0;
$('a#test').click(function() {
    i += 1;

    $('a#test').popover({
        trigger: 'manual',
        placement: 'right',
        content: function() {
           var message = "Count is" + i;
             return message;
        }
    });
    $('a#test').popover("show");

});​ 
```

**HTML**

```
<a id="test">Click me</a>
​ 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-09-11T11:14:15.303

以防万一有人在寻找不涉及重新实例化的解决方案`popover`并且只想更改内容 html，请看一下：

```
$('a#test').data('popover').$tip.find(".popover-content").html("<div>some new content yo</div>") 
```

**更新：**在编写此答案和 Bootstrap 3.2.0（我怀疑是 3.0？）之间的某个时刻，这发生了一些变化，变为：

```
$('a#test').data('bs.popover').tip().find ............ 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-01-21T16:13:53.253

老问题，但由于我注意到没有答案提供了正确的方法，这是一个常见问题，我想更新它。

使用`$("a#test").popover("destroy");`- 方法。[在这里拉小提琴](http://jsfiddle.net/UhkMp/)。

这将破坏旧的弹出框，并使您能够以常规方式再次连接新的弹出框。

这是一个示例，您可以单击按钮在已附加弹出框的对象上设置新的弹出框。有关更多详细信息，请参见小提琴。

```
$("button.setNewPopoverContent").on("click", function(e) {
    e.preventDefault();

    $(".popoverObject").popover("destroy").popover({
        title: "New title"
        content: "New content"
    );
}); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-11-30T15:11:57.067

这个问题已有一年多的历史了，但也许这对其他人有用。

如果仅在隐藏弹出框时更改内容，我发现的最简单方法是使用函数和一些 JS 代码。

具体来说，我的 HTML 如下所示：

```
<input id="test" data-toggle="popover"
       data-placement="bottom" data-trigger="focus" />
<div id="popover-content" style="display: none">
  <!-- Hidden div with the popover content -->
  <p>This is the popover content</p>
</div> 
```

请注意，没有指定数据内容。在 JS 中，当创建 popover 时，会使用一个函数来处理内容：

```
$('test').popover({
    html: true,
    content: function() { return $('#popover-content').html(); }
}); 
```

现在您可以更改 popover-content div 的任何位置，并且 popover 将在下次显示时更新：

```
$('#popover-content').html("<p>New content</p>"); 
```

我想这个想法也可以使用纯文本而不是 HTML。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-01-23T15:47:34.293

在 Boostrap 4 上只有一行：

```
$("#your-element").attr("data-content", "your new popover content") 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-08-18T23:47:36.280

你总是可以直接修改 DOM：

```
$('a#test').next(".popover").find(".popover-content").html("Content"); 
```

例如，如果您想要一个弹出框，它将从 API 加载一些数据并在悬停时将其显示在弹出框的内容中：

```
 $("#myPopover").popover({
        trigger: 'hover'
    }).on('shown.bs.popover', function () {
        var popover = $(this);
        var contentEl = popover.next(".popover").find(".popover-content");
        // Show spinner while waiting for data to be fetched
        contentEl.html("<i class='fa fa-spinner fa-pulse fa-2x fa-fw'></i>");

        var myParameter = popover.data('api-parameter');
        $.getJSON("http://ipinfo.io/" + myParameter)
        .done(function (data) {
          var result = '';
          if (data.org) {
            result += data.org + '<br>';
          }
          if (data.city) {
            result += data.city + ', ';
          }

          if (data.region) {
            result += data.region + ' ';
          }
          if (data.country) {
            result += data.country;
          }
          if (result == '') {
            result = "No info found.";
          }
          contentEl.html(result);
        }).fail(function (data) {
          result = "No info found.";
          contentEl.html(result);
        });
    });
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<a href="#" id="myPopover" data-toggle="popover" data-title="IP Details" data-api-parameter="151.101.1.69">Hover here for details on IP 151.101.1.69</a>
```

这假设您信任 API 提供的数据。如果没有，您将需要转义返回的数据以减轻 XSS 攻击。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-06T07:17:41.817

不要从以前的答案中学习

```
let popOverOptions = {
    trigger: 'click',
    ...
    };

// save popOver instance
let popOver = $(`#popover-unique-id`).popover(popOverOptions);

// get its data
let popOverData = popOver.data('bs.popover');

// load data dynamically (may be with AJAX call)
$(`#popover-unique-id`).on('shown.bs.popover', () => {

    setTimeout(() => {

        // set content, title etc...
        popOverData.config.content = 'content/////////';

        // updata the popup in realtime or else this will be shown next time opens
        popOverData.setContent();

        // Can add this if necessary for position correction: 
        popOver._popper.update();

    }, 2000);

}); 
```

这样我们就可以轻松更新弹出框内容。

还有另一种使用方法的`destroy`方法。 [http://jsfiddle.net/bj5ryvop/5/](http://jsfiddle.net/bj5ryvop/5/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-28T09:57:16.310

我发现[Bootstrap 弹出内容不能动态更改](https://stackoverflow.com/questions/13564782)，这引入了该`setContent`功能。因此，我的代码（希望对某人有所帮助）是：

（注意 jquery data() 并不擅长设置）

```
// Update basket
current = $('#basketPopover').data('content');
newbasket = current.replace(/\d+/i,parseInt(data));

$('#basketPopover').attr('data-content',newbasket);
$('#basketPopover').setContent();
$('#basketPopover').$tip.addClass(popover.options.placement); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-02T14:37:30.180

如果 jQuery > 4.1 使用

```
$("#popoverId").popover("dispose").popover({
     title: "Your new title"
     content: "Your new content"
); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-22T17:46:57.210

## 引导程序 5.0 更新

```
let popoverInstance = new bootstrap.Popover($('#element')); 
```

进而：

```
popoverInstance._config.content = "Hello world";
popoverInstance.setContent(); 
```

（*注意*：它将全局更新弹出框内容，因此如果您有多个打开的弹出框，那么它们都将更新为“Hello world”）

# macos - SED 在末尾添加新行

> ID：10226855
> 
> 赞同：1
> 
> 时间：2012-04-19T11:15:07.780
> 
> 标签：macos, text, sed

如果我在终端应用程序中的 Mac OS X 10.7.2 上执行此操作：

```
$ cat test.txt | od -c 
```

我明白了

```
0000000    t   e   s   t   1  \n   t   e   s   t   2                    
0000013 
```

这就是我的 test.txt 文件的真实内容。行。

但是如果我执行 sed 它会在每个文件中添加一个新行。

```
$ sed 's/e/X/g' test.txt | od -c
0000000    t   X   s   t   1  \n   t   X   s   t   2  \n                
0000014 
```

我不想要这条新线。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:17:29.810

`printf`在 awk 中使用。第一行的特殊情况，以便在没有换行符的情况下打印。所有剩余的行都用前面的换行符打印。这可确保您永远不会以换行符结束。

基本结构：

```
awk 'NR==1 { printf("%s", $0); next }
     { printf("\n%s", $0) }' 
```

# java - 检查 JList 中是否存在文件

> ID：10226857
> 
> 赞同：0
> 
> 时间：2012-04-19T11:15:08.763
> 
> 标签：java, file, jlist

我从 JFileChooser 在我的 JList 中添加了一些文件。我正在添加一个名为“CHECK”的新按钮，单击该按钮会告诉 JList 中是否存在特定文件（在已添加的文件中）。如果你们中的任何人能告诉我执行此步骤的正确程序是什么，那就太好了。

提前谢谢你..

这是我目前的代码；

```
 final JFileChooser fileChooser = new JFileChooser();
    fileChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
    fileChooser.setMultiSelectionEnabled(true);
    getContentPane().add(fileChooser, "cell 0 0 3 9");

    JScrollPane scrollPane = new JScrollPane();
    getContentPane().add(scrollPane, "cell 10 1 3 8,grow");

    vector = new Vector<File>();
    final JList list = new JList(vector);
    scrollPane.setViewportView(list);

    JPanel panel = new JPanel();
    getContentPane().add(panel, "cell 3 4 7 1,grow");

    JButton btnNewButton = new JButton("Add Files");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            for (File file : fileChooser.getSelectedFiles()) {
                        vector.add(file);
                        System.out.println("Added..!!");
                }
                list.updateUI();

            }
    });
    panel.add(btnNewButton);

    JButton btnNewButton_1 = new JButton("Remove Files");
    btnNewButton_1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if(list.getSelectedIndices().length > 0) {
                  int[] selectedIndices = list.getSelectedIndices();
                  for (int i = selectedIndices.length-1; i >=0; i--) {
                        vector.removeElementAt(i);
                        System.out.println("Removed..!!");
                  } 
                   }
                    list.updateUI();

        }   
        });
    panel.add(btnNewButton_1);

    JButton btnNewButton_2 = new JButton("Check For Files");
    btnNewButton_2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            String name = "";
            if(list.getSelectedIndices().length > 0 ) {
                       //// to check if a file exists /////
            }
            }
             });

    panel.add(btnNewButton_2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:50:38.467

1.  请使用 Collections Framework 的`List`var 类型和`ArrayList`具体类来实例化。`Vector`自 Java 1.2 以来已成为过去。
2.  遍历选定的文件，检查两端的规范路径：

 ````
final File toCheck = fileToCheckInList.getCanonicalFile();
for (File file : fileChooser.getSelectedFiles())
  if (file.getCanonicalFile().equals(toCheck)) return true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:38:46.787

Vector 有一个 contains 方法，您可以使用它：

```
if(vector.contains(file)){
   //Vector has the file
} 
````

# android - 使用地理编码器显示用户的位置地址

> ID：10226858
> 
> 赞同：1
> 
> 时间：2012-04-19T11:15:12.347
> 
> 标签：android

我有这种方法可以在地图活动上显示用户的纬度和经度：

```
public void animateMap(Location location){
        double lat = location.getLatitude();
        double lng = location.getLongitude();

       Toast.makeText(MyMapActivity.this,
                "Sie sind an\n" + lat + "\n" + lng, Toast.LENGTH_SHORT)
                .show();
        GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
        mapController.animateTo(point, new Message());
        mapOverlay.setPointToDraw(point);

    } 
```

如何在我的方法上实现地理编码器？所以 Toast 将显示位置的地址而不是坐标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:22:59.337

最简单的实现是使用 geocoder 类：

```
 Geocoder geocoder = new Geocoder(context, Locale.ENGLISH); 
        geocoder.getFromLocation(lat, lng, 1);
        List<Address> ls=new ArrayList();
        ls= geocoder.getFromLocation(lat, lng, 1);
        String myLocation = ls.get(0).getSubAdminArea(); 
```

您可以查看该类返回的所有信息，然后选择最适合您的信息。它包含从国家名称到地标名称、邻居邮政编码……几乎所有您可能需要的东西。

但请记住，如果 Google 没有关于此位置的信息，将返回一个空字符串！

因此，对于您来说，示例应该是这样的：

```
public void animateMap(Location location){
    double lat = location.getLatitude();
    double lng = location.getLongitude();

String myLocation;
 try{
           Geocoder geocoder = new Geocoder(context, Locale.ENGLISH);   
        geocoder.getFromLocation(lat, lng, 1);
        List<Address> ls=new ArrayList();
        ls= geocoder.getFromLocation(lat, lng, 1);
        myLocation = ls.get(0).getSubAdminArea();
 }catch(Exception e){
     myLocation="Sorry, we have no information about this location";
 }

   Toast.makeText(MyMapActivity.this,
            "Sie sind an\n" + myLocation , Toast.LENGTH_SHORT)
            .show();
    GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
    mapController.animateTo(point, new Message());
    mapOverlay.setPointToDraw(point);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:31:10.853

你用

```
 Geocoder myLocation = new Geocoder(context, Locale.ENGLISH);
List<Address> myList= myLocation.getFromLocation(lat, lng, 1);
Address add = myList.get(0);
String addressString = add.getAddressLine(0);
String country = add.getCountryName();                      
String city = add.getLocality(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:29:48.253

从 Geocoder 获取您所在位置的地址列表并检查结果是否为[空](http://developer.android.com/reference/android/location/Geocoder.html)：

```
 Geocoder geocoder = new Geocoder(getApplicationContext,Locale.getDefault()); 
 List<Address> address = geocoder.getFromLocation(lat, long, 1);
 String myLocation = "";
 if(address != null && !address.isEmpty())
 {
    myLocation = address.get(0).getSubAdminArea();
 } 
```

# python - PyQt：如何在选项卡小部件中获取当前表格小部件？

> ID：10226869
> 
> 赞同：0
> 
> 时间：2012-04-19T11:16:08.310
> 
> 标签：python, pyqt

我有一个标签小部件，每个小部件都有表格小部件，包含带有链接的单元格。我知道如何从表格小部件获取当前文本并在浏览器中打开它，这就是我想要做的。

```
selection=str(self.tableWidget_1.currentItem().text()).encode('utf8')
webbrowser.open(selection,new=2) 
```

我的问题是我不知道如何获取当前的表格小部件，而不是像上面那样预先确定。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:50:37.340

见[`QTabWidget.currentWidget`](http://pyqt.sourceforge.net/Docs/PyQt4/qtabwidget.html#currentIndex)。

# jquery-ui - jQuery fullcalendar：在月视图中不显示滚动条

> ID：10226888
> 
> 赞同：2
> 
> 时间：2012-04-19T11:17:21.440
> 
> 标签：jquery-ui, scrollbar, fullcalendar

如果我一天有很多事件，那么月视图的高度会增加，但不会显示垂直滚动条，因为我无法看到所有事件，滚动条在周视图中正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T09:05:15.267

基本月份视图中的 jquery fullcalendar 滚动条。

请在 fullcalendar.css 文件中修改以下类

```
.fc-view {
    width: 100%; 
    height: 550px;
    position: absolute;
    bottom:0;
    overflow-y: scroll;
    } 
```

# android - 是否可以将 EditText 放在 LiveWallPaper 中？

> ID：10226889
> 
> 赞同：0
> 
> 时间：2012-04-19T11:17:21.930
> 
> 标签：android, android-edittext, live-wallpaper

是否可以在 android 动态壁纸的设置中添加编辑文本框？如果是，那么如何在设置中设置它并检索它的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:23:26.800

最后我得到了答案。很简单

```
<EditTextPreference
        android:title="@string/settings_name"
        android:summary="@string/settings_name_summary"
        android:key="fn_name">
</EditTextPreference> 
```

这将在 lwp 的设置中给出编辑文本框 :)

# c# - 如何使用分隔符拆分 genericList 项目？

> ID：10226890
> 
> 赞同：-2
> 
> 时间：2012-04-19T11:17:22.250
> 
> 标签：c#, string, arraylist, generic-list

我不知道如何使用分隔符选项将项目从我的 genericList 拆分为两个单独的部分？

```
 List<string> fileLines = File.ReadAllLines(fileName).Skip(4).ToList();
          foreach (var item in fileLines)
          {
            values = item.Split(' ');
            sList.Add(values[3].Substring(2).Trim());
          } 
```

我的 sList 看起来像这样：

```
10.5     5.5
7.2      2.5
-0.1     3.0
-1.1     3.3 
```

依此类推............在我的列表中总共有 8760 行。我想要做的是将列表中的每一行拆分为两个单独的部分，以便我可以计算这些值的最小值、最大值和平均值。（每个值都代表温度，所以加倍）任何帮助将不胜感激！！！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:15:51.537

那你为什么不用这个

```
List<string> fileLines = File.ReadAllLines(fileName).Skip(4).ToList();
      foreach (var item in fileLines)
      {
        values = item.Split(' ');
        string[] vl=values[3].Substring(2).Trim().Split('\t');
        sList1.Add(vl[0]);
        sList2.Add(vl[1]);
      } 
```

# root - 三星 Galaxy S2 根

> ID：10226895
> 
> 赞同：0
> 
> 时间：2012-04-19T11:17:44.830
> 
> 标签：root, galaxy

我尝试将我的 S2 植根，但显然出了点问题。当我完成生根并尝试重新启动它时，它只是卡在带有黄色三角形的引导屏幕上。我去睡觉了，第二天还是这样，所以我上网寻求帮助。我找到了股票 rom 和内核并尝试启动它。现在发生的事情是启动屏幕出现，10 秒后手机刚刚关闭。当我尝试取消它时，我不能，因为 Odin 无法识别我的手机。我也尝试过使用 Heimdall，但也找不到我的手机。

我有国际版，好像叫I900之类的。

我尝试在 Reddit 上询问，当他们无法帮助我时，他们把我送到了这里。我还发现我忘记将手机置于调试模式。

我仍然可以访问下载和恢复模式，昨天我订购了一个 USB 夹具，很快就会收到邮件。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:46:31.677

看来您刷新了错误的内核/映像。尝试获取原始内核和原始ROM。连同正确的 PIT 文件。

请务必检查您是否有 9100 或 9100G .. 这是不同的处理器。

如果您进入下载模式...一切都可以修复。如果您得到一个带有 3 个符号（电话、三角形、PC）的屏幕 您处于第一阶段引导加载程序中，并且必须重新分区 Flash。Odin 应该始终检测到您的手机。

请搜索Recovery Flash，或者在一些Android-Forums 中解压...我不想链接，因为有很多好的网站。

希望这可以帮助。

PS：闪烁不会自动非法。

我是软件开发人员，有时需要为智能手机扎根，并为不同的项目使用自定义内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T05:53:57.320

对于 root 有 2 个应用程序可以帮助您在设备上获得超级用户权限 - 一个是[超级用户](http://www.apkdaddy.com/2013/07/chainsdd-superuser-elite-apk-v313-free.html)，另一个是我推荐超级用户而不是超级用户。Supersu还有一个通过clockworkmod recovery安装的选项（[可以通过rom manager安装](http://www.apkdaddy.com/2013/06/rom-manager-apk-premium-free.html)）所以它成为一个系统应用程序。

# java - 如何使用 Jackson JSON 验证 JSON

> ID：10226897
> 
> 赞同：42
> 
> 时间：2012-04-19T11:17:53.533
> 
> 标签：java, json, jackson

我正在尝试使用 Jackson JSON 获取一个字符串并确定它是否是有效的 JSON。任何人都可以建议使用代码示例（Java）吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-19T12:04:04.880

不确定您的用例是什么，但应该这样做：

```
public boolean isValidJSON(final String json) {
   boolean valid = false;
   try {
      final JsonParser parser = new ObjectMapper().getJsonFactory()
            .createJsonParser(json);
      while (parser.nextToken() != null) {
      }
      valid = true;
   } catch (JsonParseException jpe) {
      jpe.printStackTrace();
   } catch (IOException ioe) {
      ioe.printStackTrace();
   }

   return valid;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-09-25T07:45:22.030

尽管 Perception 的答案可能会满足许多需求，但它无法捕捉到一些问题，其中之一是重复键，请考虑以下示例：

```
String json = "{ \"foo\" : \"bar\", \"foo\" : \"baz\" }"; 
```

作为补充，您可以使用以下代码检查重复键：

```
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.enable(DeserializationFeature.FAIL_ON_READING_DUP_TREE_KEY);
objectMapper.readTree(json); 
```

它会引发`JsonProcessingException`重复键或其他错误。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-04-19T08:43:43.663

对于杰克逊，我使用这个功能：

```
public static boolean isValidJSON(final String json) throws IOException {
    boolean valid = true;
    try{ 
        objectMapper.readTree(json);
    } catch(JsonProcessingException e){
        valid = false;
    }
    return valid;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-04-19T22:05:52.590

我建议单独使用[Bean Validation API](http://www.hibernate.org/subprojects/validator.html)：即首先将数据绑定到 POJO，然后验证 POJO。数据格式级别的模式在我看来不是很有用：通常仍然需要验证更高级别的关注点，而且模式语言本身很笨拙，尤其是。那些使用正在验证的格式（XML Schema 和 JSON Schema 都有这个基本缺陷）。这样做会使代码更加模块化、可重用并分离关注点（序列化、数据验证）。

但实际上我会更进一步，建议您看看[DropWizard——](http://www.dropwizard.io/)它集成了 Jackson 和 Validation API 实现（来自 Hibernate 项目）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-17T22:42:17.387

```
private static boolean isValidJson(String json) {
    try {
        objectMapper.readTree(json);
    } catch (JsonProcessingException e) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-20T13:56:00.197

另一种选择是在 Java 8 中使用 java.util.Optional。这允许返回一个对象并在调用代码中使用更实用的方法。

这是另一种可能的实现：

```
public Optional<JsonProcessingException> validateJson(final String json) {
    try{ 
        objectMapper.readTree(json);
        return Optional.empty();
    } catch(JsonProcessingException e){
        return Optional.of(e);
    } catch(IOException e) {
        throw new RuntimeException(e);
    }
} 
```

然后你可以像这样使用这个方法：

```
jsonHelper.validateJson(mappingData.getMetadataJson())
                    .map(e -> String.format("Error: %s at %s", e.getMessage(), e.getLocation().toString()))
                    .orElse("Valid JSON"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-05T22:22:02.907

改进其他答案

```
public static boolean isValidJSON(final String json) throws IOException {
    boolean valid = true;
    try{ 
        mapper.enable(DeserializationFeature.FAIL_ON_TRAILING_TOKENS);
        mapper.enable(DeserializationFeature.FAIL_ON_READING_DUP_TREE_KEY);
        objectMapper.readTree(json);
    } catch(JsonProcessingException e){
        valid = false;
    }
    return valid;
} 
```

# ios - restkit 10.0 中的 RKObjectMapping 映射问题

> ID：10226899
> 
> 赞同：0
> 
> 时间：2012-04-19T11:17:58.837
> 
> 标签：ios, json, web-services, restkit

我对新的 restkit 10.0 中的 RKObjectMapping 感到困惑。我已经用 RKClient 调用了我的 web 服务，并以 JSON 的形式得到了响应。现在我想用我的 User 类映射 JSON 字符串。怎么做 ？

```
{"id":2,"displayName":"Giri Bhushan","roles":null,"username":"FBUser-123456","password":"dddddddddddddddd=\r\n","email":"test@gmail.com","gender":"M","birthDate":null,"friends":null,"bloodGroup":null,"firstName":null,"lastName":null,"phoneNumber":null} 
```

我试过下面的代码：

```
RKObjectMapping* userMapping = [RKObjectMapping mappingForClass:[User class]];
[userMapping mapKeyPath:@"id" toAttribute:@"userId"];

[userMapping mapKeyPath:@"displayName" toAttribute:@"displayName"];
[userMapping mapKeyPath:@"userName" toAttribute:@"userName"];
[userMapping mapKeyPath:@"password" toAttribute:@"password"];
[userMapping mapKeyPath:@"email" toAttribute:@"email"];
[userMapping mapKeyPath:@"gender" toAttribute:@"gender"];
[userMapping mapKeyPath:@"birthDate" toAttribute:@"birthDate"];
[userMapping mapKeyPath:@"bloodGroup" toAttribute:@"bloodGroup"];
[userMapping mapKeyPath:@"firstName" toAttribute:@"firstName"];
[userMapping mapKeyPath:@"lastName" toAttribute:@"lastName"];

[userMapping mapKeyPath:@"phoneNumber" toAttribute:@"phoneNumber"];

[[RKObjectManager sharedManager].mappingProvider setMapping:userMapping forKeyPath:@"user"]; 
```

但是，如何使用 RKObjectMapping 映射 JSON 字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:15:28.457

你错过了这一行：
`[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"" delegate:self];`

然后实现它的委托方法，如：
`(void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects{ NSLog(@"Objects Retrieved: %d\n%@", objects.count, objects);
YourObject* obj = [objects objectAtIndex:0];`

```
NSString* info = [NSString stringWithFormat:
                  @"Value 1 is %@\n"
                  @"Value 2 is %@\n"
                  @"Value 3 is: %@",
                  [obj value1],
                  [obj value2],
                  [obj value3]; 
```

}`

希望这对你有用。XD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:38:41.557

如果您在 JSON 的根级别有*用户，则以下内容应该有效：*

```
RKObjectManager *manager = [RKObjectManager sharedManager];
RKManagedObjectMapping *userMapping = [RKManagedObjectMapping mappingForClass:[User class] inManagedObjectStore:manager.objectStore];
[userMapping mapKeyPath:@"id" toAttribute:@"userId"];
[userMapping mapAttributes:@"displayName",@"userName",@"password", nil]; // Add other attributes
[manager.mappingProvider setMapping:userMapping forKeyPath:@""]; 
```

# sql - SQL 计算未以正确格式显示

> ID：10226900
> 
> 赞同：0
> 
> 时间：2012-04-19T11:18:00.377
> 
> 标签：sql

我有以下 SQL 查询，在 700 处出现

```
declare @a decimal(10,0)
declare @b decimal(10,0)

set @a = 100 - 2 
set @a = @a / 14
set @a = @a * 100

set @a = ((100 - 2) / 14) * 100

select @a 
```

我正在寻找它做的是返回 85.714285 等...

不太确定我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:21:19.260

你的声明是错误的：

```
declare @a decimal(10,0)
declare @b decimal(10,0) 
```

您已指定长度，但未指定小数位数，这是通过使用第二个值完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:19:51.880

在最后一行的末尾添加 .0，因为如果使用所有整数，SQL 将隐式地将结果转换为 int。

```
set @a = ((100 - 2) / 14) * 100.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:22:08.323

更改您的声明以包含小数位：

```
declare @a decimal(10,5)
declare @b decimal(10,5)

set @a = 100 - 2 
set @a = @a / 14
set @a = @a * 100

set @a = ((100 - 2) / 14) * 100

select @a 
```

由于您的声明设置为`10,0`then 您将没有小数位。

如果您希望答案是 85.714... 那么您需要将 SQL 更改为：

```
declare @a decimal(10,5)

set @a = 100.0 - 2.0 
set @a = @a / 14.0
set @a = @a * 100.0

set @a = 100.0 - ((2.0 / 14.0) * 100.0)

select @a 
```

要获得您正在寻找的结果，您需要将 a 添加`.`到其他值（2、14 等），您将获得所需的值，您还需要确保括号位于正确的位置。

结果 - 85.71430

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:23:53.847

`700`是正确的结果。

请再检查一次！

```
((100 - 2) / 14) * 100 = 700 
```

你计算过

```
100 - 2 / 14 * 100 = 85,... 
```

你想使用这个 sql 查询。

```
set @a = 100 - 2.0 / 14 * 100 
```

# extjs - 带有 CodeMirror 的 Extjs 选项卡面板

> ID：10226906
> 
> 赞同：4
> 
> 时间：2012-04-19T11:18:40.910
> 
> 标签：extjs, tabs, codemirror

我尝试在 TabPanel 中使用[CodeMirror](http://codemirror.net/)。

[http://jsfiddle.net/2dv2z/6/](http://jsfiddle.net/2dv2z/6/)

我有 2 个问题阻碍了我：

*   无法更改选项卡
*   CodeMirror 元素并不真正适合他的容器......

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T19:49:54.413

我为 codemirror 开发了一个 extjs 组件。看看这里[http://www.mzsolutions.eu/extjs/#!/api/Ext.ux.form.field.CodeMirror](http://www.mzsolutions.eu/extjs/#!/api/Ext.ux.form.field.CodeMirror)

干杯

# java - java中图像直方图的方差

> ID：10226907
> 
> 赞同：1
> 
> 时间：2012-04-19T11:18:42.783
> 
> 标签：java, image-processing

我正在尝试计算 java 中图像的标准偏差。我正在使用 rast.Sample 来获取每个灰度级，然后将其从均值中取出并对其进行平方。

我的代码是：

```
public int standardDeviation(BufferedImage source)
    {
    int width = source.getWidth();
    int height = source.getHeight();
    int totalPixels = width * height;
    int temp = 0;
    int VarianceSum = 0;
    double SumSquared = 0;
    int mean = mean(source);
    double variance = 0;
    int StandardDeviation = 0;
    Raster rast = source.getRaster();

    //Loop through rast getting each grey level.
    for(int i =0; i<width; i++)
        {
            for(int j=0; j<width; j++)
            {
                temp = rast.getSample(i,j,0);
                VarianceSum += (temp - mean);
                SumSquared = Math.pow(VarianceSum,2);
            }
        }

    variance = SumSquared/totalPixels;

    System.out.println(temp);
    System.out.println(VarianceSum);
    //System.out.println(SumSquared);
    System.out.println(totalPixels);

    return StandardDeviation;

    } 
```

我在做傻事！请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:42:59.460

您在宽度上迭代两次。如果 width != height 会崩溃。另见我的评论

# php - 通过 URL 发布数据

> ID：10226910
> 
> 赞同：-1
> 
> 时间：2012-04-19T11:18:54.487
> 
> 标签：php, client-side, serverside-javascript

我喜欢将值传递给网页。我有一个动态存储值的数组。我喜欢通过 URL 将这个数组传递给网页，网站是 PHP 语言。我不知道 PHP 页面中存在的变量。我们是否有任何类型的技术或脚本来从客户端获取 PHP 代码中使用的变量名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:07:40.717

使用 method=get 和 $_Get 方法，

使用 GET 方法从表单发送的信息对每个人都是可见的（它将显示在浏览器的地址栏中），并且对发送的信息量有限制。

例子

```
 <form action="welcome.php" method="get">
     Name: <input type="text" name="fname" />
     Age: <input type="text" name="age" />
     <input type="submit"  value="Submit"/>
     </form> 
```

Welcome.php（从 url 获取值）

```
 <?php 
             echo $_GET["fname"]; 
             echo $_GET["age"];

          ?> 
```

# c++ - 文件下载器建议

> ID：10226911
> 
> 赞同：0
> 
> 时间：2012-04-19T11:18:58.120
> 
> 标签：c++, windows, url, download

我需要为非技术用户提供从 URL 可靠下载几个大文件 (3Gb) 的能力，而不会泄露文件的源 URL。理想情况下，我需要从 URL 下载文件的单个 exe（没有依赖项），在 exe 中指定：当用户单击 exe 时，它​​只需要显示保存文件的提示，并且（可选）将为用户提供一些进度条，例如实例。目标 URL 可以直接在资源部分指定，所以当我需要设置另一个路径时，我可以使用 HEX 编辑器编辑 URL 路径。Wget 不适用于我的情况，因为它的命令行实用程序需要用户指定 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:33:31.170

您可以使用该[`URLDownloadToFile`](http://msdn.microsoft.com/en-us/library/ms775123%28v=vs.85%29.aspx)功能。实现[`IBindStatusCallback`](http://msdn.microsoft.com/en-us/library/ms775060%28v=vs.85%29.aspx)接口以接收进度信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:33:40.110

您真的无法隐藏源 URL。你为什么要这么做？如果最终用户在运行您的程序时运行 tcpdump，他们将看到数据包的来源和目的地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:57:53.830

我只是为他们提供一个小批处理文件，它调用`ftp.exe`. 告诉您的最终用户将 .BAT 文件拖放到下载文件所在的位置，然后单击它。

这解决了很多问题，例如您知道您的最终用户将能够找到该目录。

# r - 如何查看用户安装的 R 库/包的功能手册页？

> ID：10226912
> 
> 赞同：0
> 
> 时间：2012-04-19T10:12:40.067
> 
> 标签：r

我已经安装了一个包含很多功能的库。我想看看在这些函数中完成的计算。如何在 R 提示符中访问这些函数的手册页？

我只知道 library(help="name of library") 命令来寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:04:44.137

捷径是：

```
?command 
```

对于诸如`if`快捷方式不起作用的命令，较长的版本是：

```
help("command") 
```

如果您需要在已安装的软件包中查找命令：

```
help.search("command") 
```

如果您需要在所有可能的包中查找命令，那么`sos`库就是门票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:13:15.410

如果你正在使用这个`ggplot2`包，去谷歌，输入类似的内容：

```
'r ggplot2' 
```

在结果中查找如下所示的站点：

```
cran.r-project.org/package=ggplot2 
```

并从`'cran.r-project.org/....'`

单击该链接，您将看到该包的页面。您想单击`Reference Manual`或单击某些包，其中`Vignettes`包含更多涉及的解释和示例。但是，参考手册通常很好地提供了如何使用包函数的示例。

# c++ - 跨平台 C++... 一个文件中的特定于平台的代码部分，还是单独的类？

> ID：10226914
> 
> 赞同：2
> 
> 时间：2012-04-19T11:19:04.910
> 
> 标签：c++, architecture, cross-platform

编写有点低级的 C++ 内容，您经常必须编写特定于操作系统的内容。让我们以一个`MessageBox()`函数为例（不是一个出色的例子，因为框架会这样做，但很容易理解）。

假设您有一个基`App`类，每个项目都提供一个自定义子类，例如`MyApp`. 对于每个操作系统，您可以有一个`App::MessageBox()`包含多个块的方法。`#ifdef`或者，您可以有一个基类/接口，每个操作系统的子类提供实现。例如`AppWin32 : public App`

一方面，后者对我来说似乎更整洁，但另一方面，这意味着您`MyApp`必须使用一些丑陋的代码来确保它是正确的操作系统特定基类的子类。

更好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:32:39.310

由于 file/socket/memory/database/... 函数在不同平台之间的差异比 GUI 函数要小，因此大多数代码都是为所有架构共享/编译的。我只是在这些函数/类中的平台特定代码周围使用#ifdef 块。

对于完全不同的 GUI（或任何其他复杂的子系统）代码，您应该在平台目录下使用不同的实现（不是头文件，可能是内部头文件）文件。(windows/window.cpp, xwin/window.cpp, macosx/window.cpp, ...)

看看这个方案的 GUI 工具包，wxwidgets 或 fltk 或其他大多数......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:36:26.667

IMO，某些类太简单了，例如打开/关闭，#ifdef 对于这些情况还不错。我不认为为一个简单的功能提供一个抽象的平台层是一个好主意，它是过度设计的。

但是跨平台很复杂。如果要提供目标平台中不存在的特定平台功能，则应创建一个抽象平台层并为每个平台实现它，例如Windows中的剪贴板与X11中的X选择有很大不同，因此您必须维护不同的数据结构和算法使它们统一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T14:20:25.960

#ifdef 绝对是最糟糕的。

我会将特定于平台的代码放在单独的源树中（每个平台一棵树）。从项目位置（对于特定平台）可以使用 2 个文件系统链接 - 到“通用”树（例如，命名为“src”）和平台特定树（例如，命名为“特定”，实际上指向 linux、windows ，或其他特定于平台的源根目录）。这可以保证您始终选择正确版本的学员。此外，您甚至可以为针对不同平台设计的类似类赋予相同的名称。

当然，这种方法在具有 FAT 文件系统的 Windows 下是不可能的，但现在这种情况已经很少见了（因为在 Windows 下通常没有理由不使用 NTFS）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T11:22:41.597

如果将实现移动到多个 .cpp 文件，则只能使用一个 #ifdef 块。但是，如果需要，您也可以将其与第二种方法结合使用。不过，为了简单的使用，我猜多个定义文件会起作用。

# scala - 在 playframework 中重新加载自定义文件更改的应用程序

> ID：10226919
> 
> 赞同：6
> 
> 时间：2012-04-19T11:19:23.363
> 
> 标签：scala, sbt, playframework-2.0

在 playframework 中有自动重新加载功能。这意味着在每个请求的开发模式下，play 检查文件的更改，并在必要时重新编译和重新加载项目。因此，例如，如果 I `$ touch conf/routes`，项目将在下一次请求时重新加载。

我想添加一些自定义文件以供关注。

我相信[`watchSources`](https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/PlaySettings.scala#L111)设置包含正在播放的文件列表。但这对我不起作用。考虑一下，我们想将`trigger`文件添加到监视的源。

```
watchSources <+= baseDirectory map { _ / "trigger" } 
```

已成功添加到观看源

```
[sbt console] $ show watch-sources
[info] List(/* trigger appears in list */) 
```

但是 play 会忽略`trigger`更改并且不会重新启动应用程序。我错过了什么？如何让播放监视自定义文件更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:03:52.473

我从来没有尝试过这样做，但经过调查，我注意到

```
watchSources <+= confDirectory map { _ / "routes" } 
```

自然指向 conf (conf/routes) 中的路由文件。您是否可能忘记将文件“触发器”放入 conf (conf/trigger) 中？

# django - 在添加模型时强制用户添加一些 InlineModelAdmin 的实例

> ID：10226924
> 
> 赞同：0
> 
> 时间：2012-04-19T11:19:37.873
> 
> 标签：django, django-admin

我有一个`UserAdmin`，我定义了一个`UserProfileInline`这样的：

```
from ...  
from django.contrib.auth.admin import UserAdmin as UserAdmin_

class UserProfileInLine(admin.StackedInline):
    model = UserProfile
    max_num = 1
    can_delete = False
    verbose_name = 'Profile'
    verbose_name_plural = 'Profile'

class UserAdmin(UserAdmin_):
    inlines = [UserProfileInLine] 
```

我的`UserProfile`模型有一些必填字段。

我想要的是强制用户不仅输入用户名和重复密码，而且至少输入必填字段，以便`UserProfile`创建实例并将其关联到`User`正在添加的实例。

如果我在创建用户时的任何字段中输入任何内容`UserProfileInline`，它会毫无问题地验证表单，但如果我不触摸任何字段，它只会创建用户并且`UserProfile`.

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:36:39.300

检查最近的答案[在 Django 中扩展用户配置文件。管理员创建用户](https://stackoverflow.com/questions/10213020/extending-the-user-profile-in-django-admin-creation-of-users/10214941#10214941)，需要设置inline的`empty_permitted`属性`form`，即可`False`。就像

```
class UserProfileForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(UserProfileForm, self).__init__(*args, **kwargs)
        if self.instance.pk is None:
            self.empty_permitted = False # Here

    class Meta:
        model = UserProfile

class UserProfileInline(admin.StackedInline):                                     
    form = UserProfileForm 
```

另一种可能的解决方案可能是创建您自己的`Formset`（继承自`BaseInlineFormSet`），就像在[此链接](http://code.google.com/p/wadofstuff/wiki/WadOfStuffDjangoForms#wadofstuff.django.forms.)中建议的那样。

它可能是这样的：

```
class UserProfileFormset(BaseInlineFormSet):
    def clean(self):
        for error in self.errors:
            if error:
                return
        completed = 0
        for cleaned_data in self.cleaned_data:
            # form has data and we aren't deleting it.
            if cleaned_data and not cleaned_data.get('DELETE', False):
                completed += 1

        if completed < 1:
            raise forms.ValidationError('You must create a User Profile.') 
```

然后在 中指定该表单集`InlineModelAdmin`：

```
class UserProfileInline(admin.StackedInline):
    formset = UserProfileFormset
    .... 
```

第二个选项的好处是，如果 UserProfile 模型不需要填写任何字段，它仍然会要求您在至少一个字段中输入任何数据。第一种模式没有。

# eclipse-rcp - 如何只显示一个视图

> ID：10226928
> 
> 赞同：0
> 
> 时间：2012-04-19T11:19:54.953
> 
> 标签：eclipse-rcp

我是 RCP 的新手，也许这个问题很基本，但是：从两个视图的角度来看，如何在应用程序开始时只显示其中一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:37:03.810

试试这个

```
 public class Perspective implements IPerspectiveFactory {

        /** Top folder's id. */
        public static final String FI_TOP = Bootstrap.PLUGIN_ID + ".topFolder";
        /** Top folder's id. */
        public static final String FI_BOTTOM = Bootstrap.PLUGIN_ID+ ".bottomFolder";

        float ratioTop = 0.35f;
        float ratioBottom = 0.60f;

        private IPageLayout layout;

        public void createInitialLayout(IPageLayout layout) {
            this.layout = layout;

            String editorAreaId = layout.getEditorArea();
            layout.setEditorAreaVisible(false);

            layout.createPlaceholderFolder(FI_TOP, IPageLayout.TOP, ratioTop, editorAreaId);
            layout.createPlaceholderFolder(FI_BOTTOM, IPageLayout.BOTTOM, ratioBottom, editorAreaId);

            //Opnen a view
            layout.addView("MyViewId", IPageLayout.TOP, 0.9f, layout.getEditorArea());

        }

        public IPageLayout getLayout() {
            return layout;
        } 
```

# php - 在线 DVCS 客户端

> ID：10226930
> 
> 赞同：-1
> 
> 时间：2012-04-19T11:20:05.360
> 
> 标签：php, mercurial, github, bitbucket, sourceforge

好的，我一直在掌握解决我的问题的各种解决方案，例如[为托管许多独立补丁的推荐 DVCS 机制](https://stackoverflow.com/questions/10139746/recommended-dvcs-mechanism-for-hosting-many-independent-patches/10141802)和[在 BitBucket 上为许多用户和补丁使用 Mercurial 补丁队列存储库](https://stackoverflow.com/questions/10164664/using-mercurial-patch-queue-repository-on-bitbucket-for-many-users-and-patches)，但希望这将是我需要的最后一个问题询问如何为我在[https://sourceforge.net/p/iotabuildit/wiki/Home/](https://sourceforge.net/p/iotabuildit/wiki/Home/)中描述的项目建立源代码控制。然后我可以接受其他问题的一些答案并继续前进。

我正在努力满足的要求是：

1.  对用户来说，贡献源代码修改（补丁）必须非常容易。这意味着他们不必下载版本控制客户端。
2.  任何版本的代码都需要轻松地在线托管，因为由于 W3C 安全要求（IE 显然忽略了这一点，但 Chrome 很荣幸），当从本地文件集运行时它在 Chrome 中不起作用。
3.  用户应该能够自己注册并自动获得贡献任何其他人可以播放和查看的补丁的权限（如 Little Big Planet，但更集成 - 允许更改任何内容，而不仅仅是添加内容）。

到目前为止，我尝试过的路径都失败了，原因如下：

1.  Mercurial Patch Queue - 在探索了一会儿之后，我发现它对于普通玩家/用户来说太复杂了，无法参与其中。我们在这里谈论的是潜在的非开发人员。
2.  Github 和 BitBucket - 这些存储库似乎仍然需要本地 DVCS 客户端，并且需要额外的步骤来贡献补丁。最后，对于普通用户来说，它们仍然很难，尤其是那些只想玩某些用户的特定版本游戏的人。似乎没有办法在线托管文件。

所以现在我提出的解决方案如下，我想看看我是否遗漏了一些可以通过其他方式更好地处理的东西。我将在我的 SourceForge 项目上创建一些 PHP 脚本，这些脚本将：

1.  允许用户使用密码注册自己的电子邮件/帐户，以便只有他们可以更新自己的“补丁”
2.  允许他们克隆标准存储库或任何其他用户存储库。
3.  在 PHP 脚本可访问但 HTTP 不可访问的目录中*在线*创建克隆。
4.  允许他们将一组文件提交到他们的工作目录，并将差异作为补丁提交到他们的存储库。
5.  允许从同一目录中的其他用户存储库中提取补丁。（拉取和提交到您自己的存储库不需要身份验证，当我考虑已经存在的更正式的在线存储库托管时，这是一个绊脚石）
6.  拥有一个单独的 PHP 脚本，将您的工作空间复制到可以在线玩游戏的托管目录中。任何玩家都可以访问此工作区来玩您的游戏版本（其中可能包括从任意数量的其他存储库中提取的补丁）。

我不能使用现有的存储库来执行此操作似乎很奇怪，但我想不出解决身份验证问题的方法。所以我需要创建我自己的克隆，我知道 PHP 脚本应该能够在不推送的情况下访问和提交。不幸的是，其他 DVCS 客户端可能无法从这些在线客户端中提取，但如果需要，可能有一些方法可以导出补丁。而且我不知道当合并冲突发生时我要做什么。但这是迄今为止我最接近可行的解决方案。

所以我最终得到的是一个在线 DVCS 客户端，以避免用户必须下载 DVCS 客户端并避免为他们的游戏版本寻找主机。我是否忽略了一个更简单的解决方案？（我是否违反了 SourceForge 的服务条款？如果（我可以获得）Mercurial 安装在那里，我也可以将它托管在 Dreamhost 上。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:35:05.777

一些评论/答案：

使用 DVCS（使用“D”作为分布式），没有“服务器”或“客户端”。
如果您想在本地（在您的工作站上）访问代码，您将需要一个 DVCS（git 或 Mercurial），并且您将克隆一个[上游](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)存储库（即存储在 GitHub 或 BitBucket 中的远程存储库）。

据我了解，每个用户都会分叉主存储库，每个用户创建一个存储库，仍然存储在上游服务器（GitHub 或 BitBucket）上，因为这是分叉背后的想法（在远程端克隆）。

这将解决 1\. 因为每个用户都是他/她自己的分叉的所有者，并且只有在那里才有写访问权。
2\. 是给定的（你可以分叉一个 repo）

其余的点不会由 GitHub 或 BitBucket 解决，而是由一个专用服务器解决，您在该服务器上安装了 DVCS，并在其中添加了相关的钩子以自动化您想要的东西。
该专用服务器可以监控在 GitHub 或 BitBucket 上推送的内容，对于给定用户的给定存储库，执行所需的克隆或更新，并将存储库同步到正确的目录（例如，在您的情况下可以访问 PHP 脚本） .

# hibernate - 查询以计算 Grails 中的布尔属性值

> ID：10226931
> 
> 赞同：3
> 
> 时间：2012-04-19T11:20:08.737
> 
> 标签：hibernate, grails, groovy, grails-orm

我有一个像这样的 grails 域

```
Point {
  User user
  Date assignedDate = new Date()
  consumed = false
} 
```

我想做一个返回用户行的查询，count(consumed=true), count(consumed=false)

例如数据

```
| USER | DATE | CONSUMED |
___________________________
|   1  | ...  | true     |
|   1  | ...  | true     |
|   1  | ...  | false    |
|   2  | ...  | true     |
|   2  | ...  | false    | 
```

查询必须返回：

```
| USER | CONSUMED | NOT CONSUMED |
_________________________________
|   1  | 2        | 1            |
|   2  | 1        | 1            | 
```

我必须在单个查询中执行此操作，因为我需要分页。最好使用 gorm 标准或休眠 HQL。

我试过玩投影，但没有成功。

任何想法？谢谢

## 解决方法

作为一种解决方法，我使用了带有 Michael J. Lee 建议的公式的休眠公式映射。

我添加了两个映射字段

```
    观点 {
          用户用户
          日期分配日期 = 新日期（）
          消耗=假
          免费公式：“CASE WHEN 消费 = 0 THEN 1 ELSE 0 END”
          notFree 公式：“CASE WHEN 消费 = 1 THEN 1 ELSE 0 END”
        }

```

并使用标准查询，例如：

```
    Point.withCriteria{
      预测{
          组属性（'用户'）
          总和（'免费'）
          总和（'notFree'）
      }
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:45:20.840

结构化数据的方式和要返回的查询不适合标准查询和动态查找器之类的东西。我会根据您的经验水平以及您需要总结多少数据来建议这两个选项。

**1.）创建一个存储过程或使用命名查询（更好地处理大量数据）......**

```
SELECT
   user_id as 'USER',
   SUM(CASE WHEN consumed = 1 THEN 1 ELSE 0 END) as 'CONSUMED'
   SUM(CASE WHEN consumed = 0 THEN 0 ELSE 1 END) as 'NOT CONSUMED'
FROM 
   point
GROUP BY
    user_id 
```

**2.) 使用 groovy 的集合闭包在 grails 中完成繁重的工作（如果您有大量数据，请谨慎使用）**

```
def someControllerMethod() {
    def points = Point.list().groupBy{ it.user } //<-- or use a findAllBy or criteria
    def data = [];
    points.each{ point,values ->
        data << ['USER':point.user, 'CONSUMED':values.count{ it.consumed }, 'UNCONSUMED':values.count{ !it.consumed } ]
    }

   println("this is what it looks like ${data}");
   return data //<-- is a list of maps that should be easy to render in your gsp
} 
```

**请注意，我只是在脑海中进行了编码，并没有验证语法**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T11:30:04.417

在该域上添加一个命名查询并使用 GROUP BY 对您的用户进行分组。您可以在选择子句中使用 COUNT

# hadoop - Hadoop：如何将任务统一分配到所有节点

> ID：10226933
> 
> 赞同：1
> 
> 时间：2012-04-19T11:20:21.287
> 
> 标签：hadoop

我想将任务统一分配给所有节点。有没有办法控制这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:17:06.057

地图任务将被放置在离输入数据最近的空闲任务跟踪器上。

优先级是：

1.  同一台机器
2.  同一个机架
3.  其他

在大多数情况下，您不必自己担心平衡问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:11:01.543

你无法控制：

*   执行 map 和 reduce 任务的地方
*   map 和 reduce 任务何时开始或结束
*   map 任务或 reduce 任务处理了哪些键和值

但是，您可以控制：

*   reduce 任务处理什么键以及它们在 reduce 中出现的顺序（使用分区程序）

总之你不能只平衡map任务，但是reduce任务是由框架平衡的

# javascript - 谷歌地图上的无限标记，无需查询限制使用地理编码器

> ID：10226945
> 
> 赞同：0
> 
> 时间：2012-04-19T11:21:26.840
> 
> 标签：javascript, google-maps-api-3

我有一个带有多个标记的谷歌地图。我在此链接[Geocoder 使用](https://stackoverflow.com/questions/5292060/google-maps-v3-geocoding-and-markers-in-loop)的帮助下使用谷歌地图地理编码器完成了这项工作。但是，它仅限于一些标记。在限制之后它显示错误为 queryLimit。有什么办法在地图上显示多个标记没有任何限制。它也可以不是地理编码器。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:20:03.440

永远不要在每次想要显示标记时使用 Web 服务或 API 来获取位置。您需要做的是将纬度和经度存储在某处。最好是存储地址信息的同一个地方。然后只需使用这些纬度和经度来生成标记，而无需担心查询限制。

您超出查询限制的原因是您执行查询的速度太快。如果您在每个查询之间有一段时间，您可以在达到查询上限之前做更多的事情，但这不是一个解决方案。您应该始终保存位置，而不是每次都查询 :)

# java - 读写COM端口？

> ID：10226951
> 
> 赞同：0
> 
> 时间：2012-04-19T11:21:54.097
> 
> 标签：java, python, serial-port

我知道套接字等如何与 java/android 一起工作，但是如何使用 java 或 python 连接到桌面上的 COM 端口？您要使用地址吗？或者查找您想要的端口是否可用或什么？

我不知道我会怎么做。

建议？

我接受 Python 或 Java 的答案。谢谢。

编辑 - 任何 Java 答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:31:20.563

使用 Python，您可以使用[PySerial](http://pyserial.sourceforge.net/)

你在网站上有很多[例子。](http://pyserial.sourceforge.net/shortintro.html)这是一个例子：

```
import serial
ser = serial.Serial('/dev/ttyS1', 9600, timeout=1)
ser.write("hello")
result = ser.readline()  # read a '\n' terminated line
print(result)
ser.close() 
```

如果您在 Windows 下，您可以执行以下操作：

```
ser = serial.Serial('COM12', 19200, timeout=1) 
```

当然，您必须知道要读取哪个 COM 端口。

根据文档，您可以使用最新版本的[PySerial](http://pyserial.sourceforge.net/)`serial.tools.list_ports.comports()`检查哪些端口可用。

通常 COM 端口地址由操作系统选择。因此，您必须知道您的设备在哪个 COM 端口上（例如，在 Windows 7 中，它们列在配置面板“设备和打印机”中）。您还必须知道必须以何种波特率与设备通信（9600 在低速设备中很常见）。

对于 Java，我已经使用了可用于 Windows、MacOS、Solaris 和 Linux 的[RXTX 。](http://rxtx.qbang.org/)它是一个 LGPL 库。同样，如果您想了解可以做什么，还有很多[示例。](http://rxtx.qbang.org/wiki/index.php/Examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:31:48.833

对于 Python，请使用[pySerial](http://pyserial.sourceforge.net)。这将使您将串行端口视为文件对象。从教程示例：

```
>>> import serial
>>> ser = serial.Serial("COM0")  # open COM0, could also be `/dev/ttyUSB0` for Linux, etc.
>>> print ser.portstr       # check which port was really used
>>> ser.write("hello")      # write a string
>>> ser.close()             # close port 
```

对于 Java，您需要[JavaComm](http://java.sun.com/products/javacomm/reference/docs/API_users_guide_3.html)，例如参见[SimpleRead.java](http://java.sun.com/developer/releases/javacomm/SimpleRead.java)

# google-maps - 谷歌地图折线图仅使用地址

> ID：10226952
> 
> 赞同：0
> 
> 时间：2012-04-19T11:21:57.940
> 
> 标签：google-maps

我知道它不存在；但只是为了确保，是否可以不使用坐标而仅使用地址在两点之间绘制折线。

感谢那些不会对我的问题投反对票的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:50:28.817

它不能直接，反向地理代码地址，而不是绘制折线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:37:25.533

不，这是不可能的。你可以看到这个[参考](https://developers.google.com/maps/documentation/javascript/reference#Polyline)。但是你可以通过使用谷歌的这个[网络服务](http://maps.google.com/maps/geo?q=london&output=csv)来获得任何地址的 lat-lng，然后你可以在它上面绘制折线。

# php - SimpleXMLElement 对象的访问部分 - PHP

> ID：10226954
> 
> 赞同：0
> 
> 时间：2012-04-19T11:21:58.767
> 
> 标签：php, object, simplexml

我需要遍历`items`下面 SimpleXMLElement 对象中的数组，但似乎无法使用`$order->order->order->items`. 我可以使用相同的格式访问送货地址和帐单地址，即。`$order->order->order->delivery_address`并期望以相同的方式到达 items 数组。但是，当我得到一个空的 SimpleXMLElement 对象时`print_r($order->order->order->items)`

```
SimpleXMLElement Object
(
    [order] => SimpleXMLElement Object
        (
            [id] => 860268
            [shopkeeper_orderno] => 1001
            [customer] => 797476
            [creationdate] => Apr 19 2012 10:36:38:100AM
            [reference] => k2koju45rmaqfl45n20xbkmq
            [net] => 1500
            [vat] => 17.5
            [status] => 0
            [isnew] => 1
            [deductions] => 0
            [postage] => 1
            [paymentmethod] => PayPal              
            [instructions] => SimpleXMLElement Object
                (
                )

            [errors] => SimpleXMLElement Object
                (
                )

            [kashflow_synch] => 0
            [order] => Array
                (
                    [0] => SimpleXMLElement Object
                        (
                            [billing_address] => SimpleXMLElement Object
                                (
                                    [0] => 

                                )

                        )

                    [1] => SimpleXMLElement Object
                        (
                            [delivery_address] => SimpleXMLElement Object
                                (
                                    [0] => 

                                )

                        )

                    [2] => SimpleXMLElement Object
                        (
                            [items] => Array
                                (
                                    [0] => SimpleXMLElement Object
                                        (
                                            [id] => 1285158
                                            [headerID] => 860268
                                            [productID] => 4867690
                                            [description] => TEST ORDERING PF NODES - Special Offer Price
                                            [net] => 1400
                                            [vat] => 0
                                            [qty] => 1
                                            [formID] => -1
                                        )

                                    [1] => SimpleXMLElement Object
                                        (
                                            [id] => 1285159
                                            [headerID] => 860268
                                            [productID] => 4959678
                                            [description] => Wedding dress
                                            [net] => 100
                                            [vat] => 17.5
                                            [qty] => 1
                                            [formID] => -1
                                        )

                                )

                        )

                )

            [postage_tax] => 0
            [dispatched] => 0
            [paybyotherid] => -1
            [ip] => 81.168.43.121   
            [wheredidyouhearid] => -1
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:30:10.800

**编辑**：我刚刚看到你在命名上犯了一个错误，需要调用父`<orders>`项和子项`<order>`

* * *

SimpleXMLElement*似乎*是空的，实际上它通常被填充但在倾倒时不显示（谁想到了这种疯狂的行为）

你能试试这个吗？

```
foreach($order->orders->order as $order) { // should be orders then
  echo $item->getName();
} 
```

[或者用SimpleXMLElement::children()](http://php.net/manual/en/simplexmlelement.children.php)试试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:31:20.893

您的商品实际上位于订单数组的第二个偏移量上。

我只是使用 xPath 来处理这些。

```
foreach($xmlObject->xpath('/order/order[2]/items') as $item)
{
   // Do something with my $item
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:30:20.587

您可以使用如下所示的循环，然后您需要做的就是 $items->id

```
 foreach($order->children()->children()->items as $items)
      {

      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T13:10:41.603

使用 Dan Lees 的建议，我尝试了 SimpleXMLElement::children() 并做了以下工作

```
foreach ($order->children() as $order) {
        foreach ($order->children() as $order_details) {
            foreach ($order_details->children() as $order_items) {
                echo $order_items->id;
            }
        }
    } 
```

# java - 内存读取速度与简单算术和条件

> ID：10226960
> 
> 赞同：2
> 
> 时间：2012-04-19T11:22:17.450
> 
> 标签：java, performance, lookup-tables

我正在编写一个在任何情况下都需要大量数字运算的程序。

通常，我可以选择通过 {3-4 个加法或乘法以及一个或两个 if-else 检查，可能是大约五个数字} 来计算一个值，或者从查找表中读取该值。一切都是int。

与这些简单的操作相比，内存读取的速度有多快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T11:35:16.287

这是不可能以任何有意义的方式回答的。这取决于实际代码以及您使用的平台。作为一般规则，如果有一些简单的本地优化可能会起作用，JIT 编译器会为您完成它们。

您最好执行以下操作：

1.  以简单自然的方式编写程序。
2.  让它工作。
3.  在典型的输入数据集/问题上运行它。如果速度够快，就停下来。
4.  在执行典型的输入数据集/问题时分析代码。
5.  使用分析结果来识别代码中最关键的热点。
6.  检查代码，并确定*可能的*优化。
7.  对优化进行编码并重新运行分析。它改善了情况吗？
8.  从第 3 步开始重复，直到程序运行得足够快，或者您已经用尽了可能的优化。

* * *

查找表的问题在于您正在用时间换取空间，而空间使用取决于您的应用程序使用的输入组合的数量。查找表方法仅在有限的情况下有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T11:38:19.220

性能调优的基本原理；“不要猜测，测量它”

# c# - 在c#中获取非默认命名空间中xmlpath的属性

> ID：10226963
> 
> 赞同：0
> 
> 时间：2012-04-19T11:22:38.977
> 
> 标签：c#, xpath, xml-namespaces, xmldocument, xpathnavigator

我正在使用 xpathdocument 通过它们的 xpath 表达式获取一些值，直到涉及到命名空间。

xml：

```
?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet href="vsstyle_xml.cgi" type="text/css"?>
<vs120data version="0x1210019" build="21.0.117" label="D21.00.117SAEN060223"   
xmlns:html="http://www.w3.org/1999/xhtml" SIMATIC_VS_Escaped="1">
VS120 Data from 192.168.0.43 (MAC: 08:00:06:71:8C:EE) Time Sync Info: Source was PC:   
PC=192.168.0.1 - TZ is GMT/UTC +1h. Last Synchronization: Feb 27, 2006, 16:41:08\.   
Current Timestamp: Feb 27, 2006, 16:44:14\.  HWVers: 0x34<html:title>VS120   
Data from 192.168.0.43 (MAC: 08:00:06:71:8C:EE)  at Feb 27,    2006, 16:44:14\.   
</html:title>   
<Standard-Parameters>      
Standard-Parameters   
  <Startup-Request> 

...

<Images>
Images
  <Scene>
  Scene<html:img alt="html:img" src="data:image/png;base64...." 
```

'

C#代码：

```
XmlNamespaceManager mgr = new XmlNamespaceManager(nav.NameTable);      
mgr.AddNamespace("html", "http://www.w3.org/1999/xhtml");   
XPathNavigator hc = nav.SelectSingleNode("//html:img", mgr); 
```

我在这里只得到空节点。

当我通过 xpath 表达式使用 sandart xpath 解析时

```
parseXPath("/vs120data/Model/Images/Scene/html:img/@src"); 
```

我得到了命名空间问题，缺少一些前缀的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:57:25.047

**显然，如果您需要获取`src`属性，请更改**：

```
nav.SelectSingleNode("//html:img", mgr) 
```

**至**：

```
nav.SelectSingleNode("//html:img/@src", mgr) 
```

**由于您不需要属性本身，而是它的字符串值，假设类型`nav`是`IXpathNavigable`，请使用**：

```
nav.Evaluate("string(//html:img/@src)", mgr) 
```

# java - 使用 Java 将文件上传到 eXist-db

> ID：10226965
> 
> 赞同：0
> 
> 时间：2012-04-19T11:22:42.043
> 
> 标签：java, file-upload, exist-db

我正在编写一个应用程序，它允许将文件上传到 eXist-db 中的特定集合。我将这个应用程序基于[我在 eXist 网站上找到的代码](http://exist-db.org/exist/devguide_xmldb.xml;jsessionid=1btqxaaw7ekzjnsgyya4v75ch)。

不幸的是，代码似乎不起作用 - 当我测试它时出现错误消息

```
usage: StoreExample collection-path document 
```

当我将 URI *xmldb:exist://localhost:8080/exist/xmlrpc*更改为*http://localhost:8080/exist/admin/admin.xql;jsessionid=1fkd05vvfv6kq*并将集合更改为*/db/col1*时，出现以下错误发生：

```
 Exception in thread "main" org.xmldb.api.base.XMLDBException: 
    at org.xmldb.api.DatabaseManager.getDatabase(Unknown Source)
    at org.xmldb.api.DatabaseManager.getCollection(Unknown Source)
    at org.xmldb.api.DatabaseManager.getCollection(Unknown Source)
    at addingfiletest.exp.main(exp.java:44)

ligne 44 ==> Collection col =DatabaseManager.getCollection(URI + collection); 
```

这是我的代码：

```
import java.io.File;
import org.xmldb.api.DatabaseManager;
import org.xmldb.api.base.Collection;
import org.xmldb.api.base.Database;
import org.xmldb.api.base.*;
import org.xmldb.api.modules.CollectionManagementService;
import org.xmldb.api.modules.XMLResource;

public class exp {

   public final static String URI = "http://localhost:8080/exist/admin/admin.xql;jsessionid=1fkd05vvfv6kq";

   public static void main(String args[]) throws Exception {

      String collection = "/db/col1", file = "D:/PFE/lien.txt";

      // initialisation du driver
      String driver = "org.exist.xmldb.DatabaseImpl";
      Class cl = Class.forName(driver);
      Database database = (Database) cl.newInstance();
      DatabaseManager.registerDatabase(database);

      // Accès à la collection
      Collection col = DatabaseManager.getCollection(URI + collection);

      // créer une nouvelle XMLResource; un id sera affecté à la nouvelle
      // ressource
      XMLResource document = (XMLResource) col.createResource(null,
            "XMLResource");
      File f = new File(file);
      if (!f.canRead()) {
         System.out.println("cannot read file " + file);
         return;
      }

      document.setContent(f);
      System.out.print("storing document " + document.getId() + "...");
      col.storeResource(document);
      System.out.println("ok.");
   }
} 
```

感谢所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T23:50:51.673

我过去创建了一个小型应用程序，我创建新集合的解决方案是：我使用 exists xqj 库（ex - exists-xqj-1.0.1.jar; ex - xqj2-0.0.1.jar ; ex - xqjapi.jar首先你需要创建连接：

```
private static void conectar() {
    try {
        xqc = crearconexion("localhost", "8080", "admin", "abc123.");
    } catch (XQException ex) {
        System.out.println("No hay conexion con la base de datos");
    }
}

    private static XQConnection crearconexion(String host, String puerto, String admin, String pass) throws XQException {
    xqjd = new ExistXQDataSource();
    xqjd.setProperty("serverName", host);
    xqjd.setProperty("port", puerto);
    xqjd.setProperty("user", admin);
    xqjd.setProperty("password", pass);
    xqc = xqjd.getConnection();
    return xqc;
} 
```

（java）我有一个公开的方法在这里创建这个集合（.....）

```
 consulta = 
             "declare namespace exist = \"http://exist.sourceforge.net/NS/exist\"; \n"
            + "declare namespace request=\"http://exist-db.org/xquery/request\"; \n"
            + "    declare namespace xmldb=\"http://exist-db.org/xquery/xmldb\";  \n"
            + "    declare variable $file as xs:string { \""
            + "<menu>\n"
            + "    <maquina>\n"
            + "        <listname>"+maquina.getNombre()+"</listname>\n"
            + "    </maquina>\n"
            + "    <game name=\'0\'>\n"
            + "        <description></description>\n"
            + "        <cloneof/>\n"
            + "        <manufacturer></manufacturer>\n"
            + "        <personalizado>\n"
            + "            <estrellas>0</estrellas>\n"
            + "            <lotengo>No</lotengo>\n"
            + "            <jugado>No</jugado>\n"
            + "            <rutaimagen/>\n"
            + "        </personalizado>\n"
            + "        <rating></rating>\n"
            + "        <year></year>\n"
            + "        <genre></genre>\n"
            + "        <clave>1</clave>\n"
            + "    </game>\n"
            + "</menu>\""
            + " };  \n"
            + "    declare variable $name as xs:string { \""+maquina.getFile()+"\" };  \n"
            + "    declare variable $collection as xs:string { \""+RUTAROOT+"\" };  \n"
            + "      \n"
            + "    <results>  \n"
            + "    {  \n"
            + "    let $load-status := xmldb:store($collection, $name, $file)  \n"
            + "    return <load-status> { $load-status } </load-status>  \n"
            + "    }  \n"
            + "    </results>  ";

        ejecutarConsultaU(consulta);

private static void ejecutarConsultaU(String cadenaAConsultar) throws XQException {
    XQExpression consulta;
    consulta = xqc.createExpression();
    System.out.println("Inicio consulta \n");
    System.out.println(cadenaAConsultar);//it shows your query
    System.out.println("fin consulta \n");
    consulta.executeCommand(cadenaAConsultar);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:43:59.843

据我所知，了解 eXist-db 的 Java 方面的人最好通过eXist-db 邮件列表[exist-open](https://lists.sourceforge.net/lists/listinfo/exist-open)联系到，而不是在 stackoverflow 上。我建议加入exist-open 并在那里发布您的问题。你不会失望的。此外，请记住包含您正在运行的 eXist 的版本号。祝你好运！

# iphone - 在 xcode 中通过 json 使用 Odata 从 Web 服务器获取数据的代码

> ID：10226973
> 
> 赞同：1
> 
> 时间：2012-04-19T11:23:02.707
> 
> 标签：iphone, ios, odata

我是 iPhone 的新手。我正在通过 json 使用 WCF 数据服务和 odata 做一个应用程序。任何人都可以通过提供一些示例代码来帮助我通过 xcode 中的 json 使用 Odata 获取数据..

在此先感谢，萨拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:03:59.760

OData4ObjC 是 Objective C 的开源 OData 客户端，包含许多示例。我建议从那里开始：[https](https://github.com/OData/OData4ObjC) ://github.com/OData/OData4ObjC 。

# jquery - 如何防止jquery mobile将其类添加到html元素？

> ID：10226974
> 
> 赞同：10
> 
> 时间：2012-04-19T11:23:06.810
> 
> 标签：jquery, jquery-mobile

我开发拖放 jquery 移动构造函数。当 jmobile 核心加载时，它通过向不同的元素添加一些类来覆盖我的 css 规则。如何防止这种情况？我想在我的“画布”上放置元素后应用变换。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T11:52:44.927

也许添加 data-role="none" 作为属性会有所帮助？

[http://jquerymobile.com/demos/1.0rc2/docs/forms/forms-all-native.html](http://jquerymobile.com/demos/1.0rc2/docs/forms/forms-all-native.html)

# c# - 枚举 Windows Mobile 设备上的时区

> ID：10226975
> 
> 赞同：0
> 
> 时间：2012-04-19T11:23:10.770
> 
> 标签：c#, windows-mobile, compact-framework, timezone, dst

有没有办法获取 Windows Mobile 6（甚至更好的 6.5.3）设备上可用的时区列表？我需要有关偏差、标准偏差、日光偏差和转换日期的信息（如[TIME_ZONE_INFORMATION](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725481%28v=vs.85%29.aspx)中）。这些是我已经尝试过的事情：

*   注册表项以二进制格式 ( )`HKEY_LOCAL_MACHINE\Software\Microsoft\Timezones`定义了一些时区。`_REG_TZI_FORMAT`Windows 似乎只在那里存储时区更新，因此列表不完整。
*   Windows API 似乎没有提供枚举所有时区的函数。
*   我也许可以将 Windows Mobile 上的时区映射到 Windows 7 中的时区，但存在很多差异，这对我来说似乎是一个容易出错的任务（除了 Hughe 的努力之外）。
*   [MSDN](http://msdn.microsoft.com/en-us/library/aa458853.aspx)告诉我，Windows Mobile SDK 附带了一个，`Timezones.csv`但我在我的计算机上找不到它（既不在 6.5 SDK 文件夹中，也不在 6.5.3 SDK 文件夹中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:42:16.423

[OpenNETCF Windows CE](http://www.opennetcf.com/library/sdf/html/40acf5ae-3429-b8b0-82c9-30c38bc0fab7.htm)库允许列出 Windows Mobile 设备上可用的时区。示例代码：

```
var col = new TimeZoneCollection();
col.Initialize();

foreach (var timeZone in col)
{
  string name = timeZone.DisplayName;
  // ...
} 
```

在内部，库 p/调用 citydb.dll 来获取信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:49:06.223

我认为您正在寻找的是[Noda Time](http://code.google.com/p/noda-time/wiki/Welcome)库，它是[Joda Time](http://joda-time.sourceforge.net/timezones.html)的一个端口。

它提供了有关时间（区域）的广泛信息。

# php - 调用未定义函数 curl_init()

> ID：10226983
> 
> 赞同：7
> 
> 时间：2012-04-19T11:23:49.367
> 
> 标签：php, foursquare

> **可能重复：**
> [curl_init() 函数不起作用](https://stackoverflow.com/questions/4477535/curl-init-function-not-working)

我正在使用 PHP 访问 Foursquare API。我已经为 Foursquare 的身份验证设置了所有内容。但是只要我点击“允许”按钮，我的 callback.php 就会给我以下错误：

```
Fatal error: Call to undefined function curl_init() in C:\wamp\www\EpiFoursquare.php on line 119

Call Stack

Time    Memory  Function                          Location
0.0007  372592  {main}( )                         ..\callback.php:0
0.0039  571896  EpiFoursquare->getAccessToken( )  ..\callback.php:17
0.0040  572928  EpiFoursquare->request( )         ..\EpiFoursquare.php:31 
```

这个错误来自哪里？我找不到原点。请帮帮我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T11:54:51.443

您需要初始化 cURL 扩展： http: [//php.net/manual/en/curl.installation.php](http://php.net/manual/en/curl.installation.php)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T00:23:52.527

1.  `;`从中删除；`extension=php_curl.dll`_`php.ini`
2.  确保`ssleay32.dll`和`libeay32.dll`在`Windows/system32`;
3.  也复制`php_curl.dll`进去`Windows\System32`。

这对我有用！

# ios - 自定义 UIView 的 IBOutlets

> ID：10226988
> 
> 赞同：0
> 
> 时间：2012-04-19T11:24:08.807
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller, iboutlet

我有一个简单的应用程序，其中有一个使用 nib 文件初始化的视图控制器。在这个 nib 文件中，我有一个简单的视图，它的父类`customUIView`是`UIView`. 在此视图中，当调用方法时，我想在自定义`UIView`子类方法上访问一些按钮`setNeedDisplay`。在和类`IBOutlets`中为这些按钮创建是一种好习惯，还是我应该通过迭代来访问这些按钮？`customUIView``customUIViewcontroller``self.subviews`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:29:35.980

您确实应该创建 IBOutlets... 因为这是访问这些按钮属性的最佳方式。

# android - 用于包装多个活动的代理活动

> ID：10226991
> 
> 赞同：0
> 
> 时间：2012-04-19T11:24:14.547
> 
> 标签：android, android-activity

由于通常在 Android 中，某些功能直接在 Activity（例如 NativeActivity）中实现，我现在面临的情况是，我有 2 个想要“*合并*”为一个的 Activity，因为我需要这两种功能。所以我最初的想法是编写一个代理活动，它委托给内部活动实例。在 Android 中是否已经可以实现类似的功能，或者这个概念是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:31:24.930

我尝试实现一个 Activity-Proxy，它将委托给其他活动（必须使用相同`Window`的 ,`WindowManager`等）。可悲的是，它不起作用，因为`Activity.attach`方法是`final`/`package`并且它们用于设置所有内部变量。然后直接使用这些变量（没有 a`protected`或`public`getter）。因此，如果没有机会修补内部结构，您就不能强制所有活动使用相同的上下文，因此您被迫重新实现活动提供的功能。:(

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-19T12:38:08.863

使用[片段](http://developer.android.com/guide/topics/fundamentals/fragments.html)。我想这就是你要找的...

# c# - 使用大数据填充 DataGridView 时性能缓慢

> ID：10226992
> 
> 赞同：24
> 
> 时间：2012-04-19T11:24:21.223
> 
> 标签：c#, performance, datagridview

我正在使用一个`BindingSource`控件（[参考这里](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.bindingsource?view=netframework-4.8)）来填充我的`DataGridView`控件。上面有大约 1000 多条记录。我正在使用线程来做到这一点。在这种情况下，DataGridView 的执行速度非常慢。

我试图将`DoubleBuffered`属性设置为 true、`RowHeadersWidthSizeMode`禁用、`AutoSizeColumnsMode`无。但仍然是相同的行为。

请在这方面帮助我。如何提高网格的性能。

在此先感谢，
维杰

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-07-22T11:01:39.703

如果您有大量的行，例如 10,000 或更多，为了避免性能泄漏 - 在数据绑定之前执行以下操作：

```
dataGridView1.RowHeadersWidthSizeMode = DataGridViewRowHeadersWidthSizeMode.EnableResizing; 
// or even better, use .DisableResizing. Most time consuming enum is DataGridViewRowHeadersWidthSizeMode.AutoSizeToAllHeaders

// set it to false if not needed
dataGridView1.RowHeadersVisible = false; 
```

数据绑定后，您可以重新启用它。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-07T18:54:16.773

确保你不自动调整列大小，它可以提高性能。

即不要这样做：

`Datagridview.Columns[I].AutoSizeMode = DataGridViewAutoSizeColumnMode.xxxxx;`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-03-14T09:58:00.113

通常关闭自动调整大小和双缓冲有助于加快 DataGridView 的填充。检查DGV双缓冲是否开启正常：

```
if (!System.Windows.Forms.SystemInformation.TerminalServerSession)
{
  Type dgvType = dataGridView1.GetType();
  PropertyInfo pi = dgvType.GetProperty("DoubleBuffered",
    BindingFlags.Instance | BindingFlags.NonPublic);
  pi.SetValue(dataGridView1, value, null);
} 
```

使用 WinAPI [WM_SETREDRAW](https://msdn.microsoft.com/en-us/library/windows/desktop/dd145219(v=vs.85).aspx)消息禁用重绘也有帮助：

```
// *** API Declarations ***
[DllImport("user32.dll")]
private static extern int SendMessage(IntPtr hWnd, Int32 wMsg, bool wParam, Int32 lParam);
private const int WM_SETREDRAW = 11;

// *** DataGridView population ***
SendMessage(dataGridView1.Handle, WM_SETREDRAW, false, 0);
// Add rows to DGV here
SendMessage(dataGridView1.Handle, WM_SETREDRAW, true, 0);
dataGridView1.Refresh(); 
```

如果您不需要 2 路数据绑定或 BindingSource 提供的某些功能（过滤等），您可以考虑使用[DataGridView.Rows.AddRange()](https://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrowcollection.addrange(v=vs.110).aspx)方法一次性添加行。

带有示例的源文章的链接：http: [//10tec.com/articles/why-datagridview-slow.aspx](http://10tec.com/articles/why-datagridview-slow.aspx)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-11-23T03:54:26.950

我知道我参加聚会迟到了，但我最近厌倦了 DataGridView 控件的自动调整大小有多慢，并且觉得某个地方的某个人可能会从我的解决方案中受益。

我创建了这个扩展方法来手动测量和调整 DataGridView 中的列。将**AutoSizeColumnsMode**设置为**DataGridViewAutoSizeColumnsMode.None**并在设置 DataSource 后调用此方法。

```
/// <summary>
/// Provides very fast and basic column sizing for large data sets.
/// </summary>
public static void FastAutoSizeColumns(this DataGridView targetGrid)
{
    // Cast out a DataTable from the target grid datasource.
    // We need to iterate through all the data in the grid and a DataTable supports enumeration.
    var gridTable = (DataTable)targetGrid.DataSource;

    // Create a graphics object from the target grid. Used for measuring text size.
    using (var gfx = targetGrid.CreateGraphics())
    {
        // Iterate through the columns.
        for (int i = 0; i < gridTable.Columns.Count; i++)
        {
            // Leverage Linq enumerator to rapidly collect all the rows into a string array, making sure to exclude null values.
            string[] colStringCollection = gridTable.AsEnumerable().Where(r => r.Field<object>(i) != null).Select(r => r.Field<object>(i).ToString()).ToArray();

            // Sort the string array by string lengths.
            colStringCollection = colStringCollection.OrderBy((x) => x.Length).ToArray();

            // Get the last and longest string in the array.
            string longestColString = colStringCollection.Last();

            // Use the graphics object to measure the string size.
            var colWidth = gfx.MeasureString(longestColString, targetGrid.Font);

            // If the calculated width is larger than the column header width, set the new column width.
            if (colWidth.Width > targetGrid.Columns[i].HeaderCell.Size.Width)
            {
                targetGrid.Columns[i].Width = (int)colWidth.Width;
            }
            else // Otherwise, set the column width to the header width.
            {
                targetGrid.Columns[i].Width = targetGrid.Columns[i].HeaderCell.Size.Width;
            }
        }
    }
} 
```

虽然我绝对不会推荐使用 1000+ 行填充 DGV，但这种方法会带来巨大的性能优势，同时产生与**AutoResizeColumns**方法非常相似的结果。

对于 10k 行：（10K 行 * 12 列。）

**AutoResizeColumns** = ~3000 毫秒

**FastAutoSizeColumns** = ~140 毫秒

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-05-29T15:06:33.473

我不得不在一些地方禁用自动调整大小才能看到性能的最大改进。`AutoSizeRowsMode`就我而言，我为、`AutoSizeColumnsMode`和启用了自动调整大小模式`ColumnHeadersHeightSizeMode`。所以在将数据绑定到`DataGridView`：

```
dataGridView.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.None;
dataGridView.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None;
dataGridView.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.DisableResizing;

// ... Bind the data here ...

// Set the DataGridView auto-size modes back to their original settings.
dataGridView.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells;
dataGridView.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
dataGridView.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.AutoSize; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-31T12:43:48.983

如果您不想覆盖 DataGridView 的虚拟模式所需的方法，如果您可以考虑使用 Listview，还有另一种选择：

[http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView](http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView)

> *   它有一个版本（FastObjectListView），可以在不到 0.1 秒的时间内构建一个包含 100,000 个对象的列表。
> *   它有一个版本（DataListView）支持数据绑定，另一个版本（FastDataListView）支持大型（100,000+）数据集的数据绑定。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-27T13:33:53.537

当用户加载 10000 个项目或对它们进行排序时，我遇到了性能问题。当我评论行时：

```
this.dataEvents.AutoSizeRowsMode = System.Windows.Forms.DataGridViewAutoSizeRowsMode.AllCells; 
```

一切都变得很好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-04T19:01:46.460

@Bobby L 的回答很棒，但会阻塞 UI 线程。这是我的改编，它在将计算值应用于 UI 线程之前计算 BackgroundWorker 中列的宽度

```
public partial class Form1 : Form
{
    private BackgroundWorker _worker;

    public Form1()
    {
        InitializeComponent();

        _worker = new BackgroundWorker();
        _worker.DoWork += _worker_DoWork;
        _worker.RunWorkerCompleted += _worker_RunWorkerCompleted;
    }

    private void _worker_DoWork(object sender, DoWorkEventArgs e)
    {
        e.Result = GetAutoSizeColumnsWidth(dataGridView1);
    }

    private void _worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        SetAutoSizeColumnsWidth(dataGridView1, (int[])e.Result);
    }

    private int[] GetAutoSizeColumnsWidth(DataGridView grid)
    {
        var src = ((IEnumerable)grid.DataSource)
            .Cast<object>()
            .Select(x => x.GetType()
                .GetProperties()
                .Select(p => p.GetValue(x, null)?.ToString() ?? string.Empty)
                .ToArray()
            );

        int[] widths = new int[grid.Columns.Count];
        // Iterate through the columns.
        for (int i = 0; i < grid.Columns.Count; i++)
        {
            // Leverage Linq enumerator to rapidly collect all the rows into a string array, making sure to exclude null values.
            string[] colStringCollection = src.Where(r => r[i] != null).Select(r => r[i].ToString()).ToArray();

            // Sort the string array by string lengths.
            colStringCollection = colStringCollection.OrderBy((x) => x.Length).ToArray();

            // Get the last and longest string in the array.
            string longestColString = colStringCollection.Last();

            // Use the graphics object to measure the string size.
            var colWidth = TextRenderer.MeasureText(longestColString, grid.Font);

            // If the calculated width is larger than the column header width, set the new column width.
            if (colWidth.Width > grid.Columns[i].HeaderCell.Size.Width)
            {
                widths[i] = (int)colWidth.Width;
            }
            else // Otherwise, set the column width to the header width.
            {
                widths[i] = grid.Columns[i].HeaderCell.Size.Width;
            }
        }

        return widths;
    }

    public void SetAutoSizeColumnsWidth(DataGridView grid, int[] widths)
    {
        for (int i = 0; i < grid.Columns.Count; i++)
        {
            grid.Columns[i].Width = widths[i];
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-30T07:13:31.467

这解决了我的问题：

```
for (int z = 0; z < dataGridView1.Columns.Count; z++)
{
   dataGridView1.Columns[z].AutoSizeMode = DataGridViewAutoSizeColumnMode.None;
}
... Code where I change the content of dataGridView1 in a loop ...
for (int z = 0; z < dataGridView1.Columns.Count; z++)
{
   dataGridView1.Columns[z].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-21T16:11:49.710

我认为您需要考虑在[虚拟模式下](http://msdn.microsoft.com/en-us/library/2b177d6d.aspx)使用数据网格。基本上，您预先设置网格的范围，然后根据需要覆盖“OnCellValueNeeded”。

您应该会发现（尤其是对于只有 1000 左右的行）您的网格填充变得有效即时。

祝你好运，

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-08T05:39:31.580

我有同样的问题，我通过设置解决了

```
AutoSizeRowsMode to DisplayedCellsExceptHeaders 
```

并为列设置相同

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-02T00:42:03.093

经过一段时间的故障排除后，我发现速度的主要问题仍然来自于从非 UI 线程更改 dataGridView。下面的代码完全解决了我从dataTable数据源缓慢填充的datagridview

```
dataGridView1.Invoke(new MethodInvoker(() =>
                dataGridView1.DataSource = table)
                        ); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-02-25T10:09:07.393

```
 Dim asrm = DataGridView1.AutoSizeRowsMode
        Dim ascm = DataGridView1.AutoSizeColumnsMode
        Dim chhs = DataGridView1.ColumnHeadersHeightSizeMode

        DataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.None
        DataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None
        DataGridView1.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.DisableResizing

        DataGridView1.SuspendLayout()
        bs.SuspendBinding()
        DataGridView1.DataSource = Nothing

        For Each t As obj In lt_list
            bs.Add(t)
        Next

        DataGridView1.DataSource = bs

        DataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.DisplayedCellsExceptHeaders
        DataGridView1.AutoSizeColumnsMode = ascm
        DataGridView1.ColumnHeadersHeightSizeMode = chhs

        bs.ResumeBinding()
        DataGridView1.ResumeLayout() 
```

16000 个项目，.DataSource <> Nothing 时 16 秒，.DataSource = Nothing 时 300 毫秒

# android - 如何创建可以使用拨号盘启动的应用程序

> ID：10226995
> 
> 赞同：3
> 
> 时间：2012-04-19T11:24:34.077
> 
> 标签：android

我想知道如何使用 Dialpad 中的一些代码启动我的 android 应用程序。就像如果你 *##* 3214789650# *#* 从你的银河系它会启动angerGps 应用程序。
如何实施？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:43:08.780

试试这个。使用广播接收器收听拨出电话号码：

**清单.xml**

```
uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/>

<receiver android:name=".OutgoingCallReceiver"> 
<intent-filter> 
<action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
</intent-filter> 
</receiver> 
```

**OutgoingCallReceiver.java**

```
public class OutgoingCallReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Bundle bundle = intent.getExtras();
        if (null == bundle)
            return;
        // outgoingNumber=intent.getStringExtra(Intent.ACTION_NEW_OUTGOING_CALL);
        String phoneNubmer = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
       //START APPLICATION HERE
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T13:01:13.573

您正在寻找的是联系人应用程序的一部分，尽管每个制造商的实施很可能都是相同的，但我不确定这一点。

启动新活动的意图由文件[SpecialCharSequenceMgr](http://source-android.frandroid.com/packages/apps/Contacts/src/com/android/contacts/SpecialCharSequenceMgr.java)中的函数**handleSecretCode**传递。代码片段是

```
 static boolean handleSecretCode(Context context, String input) {

    // Secret codes are in the form *#*#<code>#*#*

    int len = input.length();

    if (len > 8 && input.startsWith("*#*#") && input.endsWith("#*#*")) {
        Intent intent = new Intent(Intents.SECRET_CODE_ACTION,
                Uri.parse("android_secret_code://" + input.substring(4, len - 4)));
        context.sendBroadcast(intent); 
```

您需要做的是为意图操作**Intents.SECRET_CODE_ACTION**和 uri **android_secret_code://"code"**注册广播接收器，并在广播接收器中启动您的应用程序。

您还可以看到一些应用程序是如何实现的，在模拟器上工作的代码之一是 * #* #4636 #* #*。

# visual-studio - msbuild 无法与 tfs 2010 和 importet Microsoft.TeamFoundation.Build.targets 一起正常工作

> ID：10226997
> 
> 赞同：1
> 
> 时间：2012-04-19T11:24:47.143
> 
> 标签：visual-studio, tfs, msbuild, tfsbuild, targets

我坚持扩展我的 msbuild 项目文件和 tfs 2010。我想要实现的是在构建后自动为我的源代码生成文档。我在网上搜索并发现文件 Microsoft.TeamFoundation.Build.targets 为桌面或团队构建定义了许多可定制的目标。其中之一是`GenerateDocumentation`我想使用的 -Target。我遇到的问题是，尽管我导入了这个文件，但 msbuild 并没有调用重载的目标。我的 vcxproj-File 的标题如下所示：

`<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">`

在此之后，我将团队构建目标文件包含在语句中

`<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets"/>`

在这个项目文件的最后，我尝试按照 TeamFoundation 目标文件中的建议重载一些目标：

```
<Target Name="GenerateDocumentation">
     <Message Text="GenerateDocumentation invoked" Importance="high"/>
</Target>

<Target Name="BeforeBuild">
    <Message Text="BeforeBuild invoked" Importance="high" />
</Target>

<Target Name="AfterBuild">
    <Message Text="AfterBuild invoked" Importance="high" />
</Target> 
```

但除了`AfterBuild`-Target之外，本地构建和构建服务器的构建都不会调用`GenerateDocumentation`nor目标。`BeforeBuild`我错过了什么吗？是`DefaultTarget="Build"`正确的吗？我试图将其更改为`DefaultTarget="DesktopBuild"`但随后调用`msbuild`导致各种错误（MSB4018）。在项目文件中，目标文件`$(VCTargetsPath)\Microsoft.Cpp.targets`也被导入。删除此导入时，`GenerateDocumentation`会调用目标，但不会调用其他目标（包括`ResourceCompile`我也需要的）。我可以以某种方式使用它们吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:35:43.047

在构建任务结束时添加这个怎么样......

```
 <CallTarget Targets="GenerateDocumentation"></CallTarget>
  </Target> 
```

# java - 如何将Arraylist的内容写入Java中的xml文件

> ID：10226998
> 
> 赞同：1
> 
> 时间：2012-04-19T11:24:51.927
> 
> 标签：java, xml, arraylist

这是一个简单的问题。但我无法调试它。我有类“Adding.java”，它向 ArrayList 添加了一些数据

```
public class Adding {

WriteFile ob = new WriteFile();

ArrayList list = new ArrayList();
public void add(){

    list.add("Tim");
    list.add(2333);
    list.add(23);

    list.add("John");
    list.add(423);
    list.add(23);

    ob.writeXmlFile(list);

    } } 
```

和另一个创建 xml 文件的类“WriteFile.java”

```
public class WriteFile {

public void writeXmlFile(ArrayList<Object> list) {

    try {

        DocumentBuilderFactory dFact = DocumentBuilderFactory.newInstance();
        DocumentBuilder build = dFact.newDocumentBuilder();
        Document doc = build.newDocument();

        Element root = doc.createElement("Studentinfo");
        doc.appendChild(root);

        Element Details = doc.createElement("Details");
        root.appendChild(Details);

        for(int i=0; i<list.size(); i ++ ) {

            Element name = doc.createElement("Name");
            name.appendChild(doc.createTextNode(String.valueOf(list.get(i))));
            Details.appendChild(name);

            Element id = doc.createElement("ID");
            id.appendChild(doc.createTextNode(String.valueOf(list.get(i))));
            Details.appendChild(id);

            Element mmi = doc.createElement("Age");
            mmi.appendChild(doc.createTextNode(String.valueOf(list.get(i))));
            Details.appendChild(mmi);

        }

         // Save the document to the disk file
        TransformerFactory tranFactory = TransformerFactory.newInstance();
        Transformer aTransformer = tranFactory.newTransformer();

        // format the XML nicely
        aTransformer.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-1");

        aTransformer.setOutputProperty(
                "{http://xml.apache.org/xslt}indent-amount", "4");
        aTransformer.setOutputProperty(OutputKeys.INDENT, "yes");

        DOMSource source = new DOMSource(doc);
        try {
            FileWriter fos = new FileWriter("/home/ros.xml");
            StreamResult result = new StreamResult(fos);
            aTransformer.transform(source, result);

        } catch (IOException e) {

            e.printStackTrace();
        }

    } catch (TransformerException ex) {
        System.out.println("Error outputting document");

    } catch (ParserConfigurationException ex) {
        System.out.println("Error building document");
    } 
```

当我执行此操作时，我得到以下输出

```
 <?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
       <Studentinfo>
             <Details>
                  <name>Tim</name>
                  <Id>Tim</Id>
                  <age>Tim</age>
                  <name>2333</name>
                  <Id>2333</Id>
                  <age>2333</age>
                  ..... 
              </Details>
        </studentinfo> 
```

等等。但我希望最终输出是这种形式

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
       <Studentinfo>
             <Details>
                  <name>Tim</name>
                  <Id>2333</Id>
                  <age>23</age>

                  <name>John</name>
                  <Id>423</Id>
                  <age>2333</age>
                  <size>23</size>
             </Details>
        </studentinfo> 
```

“for”循环遍历“list”元素有什么问题吗？. 任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:30:27.420

为什么不将 Student 对象存储在列表中，每个对象都有名称、ID 和年龄？这会更易于维护，并且易于编程吗？

目前，您使用列表中的相同索引来查找三个属性。您需要在循环中按 3 步进行迭代，并获取元素 i、i+1 和 i+2 以使其工作。

```
list.add(new Student("Tim", 2333, 23));
list.add(new Student("John", 423, 23));

...

for (Student student : studentList) {
    ...
    name.appendChild(doc.createTextNode(student.getName()));
    ...
    id.appendChild(doc.createTextNode(Integer.toString(student.getId())));
    ...
    age.appendChild(doc.createTextNode(Integer.toString(student.getAge())));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:29:30.480

您需要以 3 为增量遍历您的列表：

```
 for(int i=0; i<list.size() - 2; i += 3 ) {

        Element name = doc.createElement("Name");
        name.appendChild(doc.createTextNode(String.valueOf(list.get(i))));
        Details.appendChild(name);

        Element id = doc.createElement("ID");
        id.appendChild(doc.createTextNode(String.valueOf(list.get(i + 1))));
        Details.appendChild(id);

        Element mmi = doc.createElement("Age");
        mmi.appendChild(doc.createTextNode(String.valueOf(list.get(i + 2))));
        Details.appendChild(mmi);

    } 
```

但是您可能最好将自定义类的列表对象存储在名称、id 和年龄的专用字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T18:32:53.240

下面是一个清晰的 XML 文件的示例：

```
Element root = doc.createElement("RectanglesInfo");
 doc.appendChild(root);

for(int i=0; i<rectangles.size(); i ++ ) {

    Element rectangle = doc.createElement("Rectangle");
    root.appendChild(rectangle);

    Element width = doc.createElement("width");
 width.appendChild(doc.createTextNode(Double.toString(rectangles.get(i).getWidth())));
    rectangle.appendChild(width);

    Element height = doc.createElement("height");
    height.appendChild(doc.createTextNode(Double.toString(rectangles.get(i).getHeight())));
    rectangle.appendChild(height);

} 
```

结果将是这样的：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<RectanglesInfo>
    <Rectangle>
        <width>89.0</width>
        <height>85.0</height>
    </Rectangle>
    <Rectangle>
        <width>205.0</width>
        <height>212.0</height>
    </Rectangle>
</RectanglesInfo> 
```

因此，您可以添加学生的信息，而不是矩形。