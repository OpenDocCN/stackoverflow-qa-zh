# StackOverflow 问答 11281000-11281999

# javascript - 使用 Google Earth/Map API 获取精确的（1 公里特定的）高度值系列

> ID：11281001
> 
> 赞同：1
> 
> 时间：2012-07-01T09:46:26.263
> 
> 标签：javascript, google-maps, kml, google-earth

**使用 Google 地球（或地图）API 我使用哪些函数来获取特定区域的高度图/高度（以公里的精度而不是经度的精度）？**

例如，如果我有位置 Lat=11 Long=12，我可以获得该位置的高度吗？我知道谷歌的高度可能不准确，不会有 5 米甚至 1 公里的精度，但没关系（它是为了简单有趣的谷歌地球应用程序，所以不需要高度的准确性）。

我下面的代码可以获得鼠标当前所在位置的当前高度，但是是否有函数调用来获取**给定位置的一系列高度值**？

```
google.earth.addEventListener(ge.getWindow(), 'mousemove', function(evt) {

   if (event.getDidHitGlobe()) {
     var lat  = event.getLatitude();
     var long = event.getLongitude();
     var groundAltitude = ge.getGlobe().getGroundAltitude(latitude, longitude);
     if (groundAltitude) {
        alert(groundAltitude.toFixed(2));
   }
}); 
```

这是唯一的方法吗？请注意，这是精确到 1 经度/纬度，我可以更精确（如 1 公里特定）

```
function obtainAreaAlt(startLong, endLong, startLat, endLat) {

     var alt = {};
     while (startLong < endLong) {
         var origLat = startLat;
         while (startLat < endLat) {
           var a = ge.getGlobe().getGroundAltitude(startLat, startLong);
           if (a)
              alt[""+startLat+","+startLong] = a.toFixed(2);
           startLat++;
         }
         startLong++;
         startLat = origLat;
     }

     return alt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:24:33.523

您可以使用 Google Maps API 的高程服务。它接受位置数组（纬度/经度值）或路径。

演示在这里：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/elevation-paths](https://google-developers.appspot.com/maps/documentation/javascript/examples/elevation-paths)

此处的文档：

[https://developers.google.com/maps/documentation/javascript/reference#ElevationService](https://developers.google.com/maps/documentation/javascript/reference#ElevationService)

请注意，有使用限制！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:28:54.047

使用 google earth 插件，如果您正在选择海拔高度并等待海拔数据数据完成下载到浏览器以获得更好的海拔分辨率，您将需要移动到该位置。

要确定高程数据是否已完成下载，请使用 ge.getStreamingPercent()

[http://earth-api-samples.googlecode.com/svn/trunk/examples/streamingpercent.html](http://earth-api-samples.googlecode.com/svn/trunk/examples/streamingpercent.html)

如果你被缩小得太远，地球上会填充一个低分辨率的地形模型

# iphone - iPod Touch iOS 5.1.1 不调用 viewDidDisappear:animated

> ID：11281002
> 
> 赞同：0
> 
> 时间：2012-07-01T09:46:34.340
> 
> 标签：iphone, objective-c, ios, uikit, cocos2d-iphone

我已经在其他地方发布了这个问题，但是由于 SO 是一个很棒的社区，所以我也在这里这样做。

首先，我使用 Cocos2D 2.0-gles20 将一个多人/团队导向的游戏组合在一起。

我一直在将 GameKitHelper 集成到应用程序中。迄今为止，它在我的 iPhone4 和 iPad2 以及模拟器上运行良好，但现在当我尝试在 iPod Touch 4th 上使用它时，我在 [CCDirectorIOS startAnimation] 中收到断言，因为该应用程序在它应该获得 viewWillAppear 时't 并且在应该的时候没有调用 viewDidDisappear 。

这很重要的原因是 CCDirectorIOS 类上的这些方法导致 Cocos2D 开始/停止动画，而另一个 UIKit 视图在前面。这是我用 Cocos2D-0.99 自己管理的东西，但在 2.0 中，它在 director 中得到了很好的处理，因此每个应用程序都不必专门处理它。

GameKitHelper 类具有以下将 GKMatchmakerViewController 推送到屏幕上的方法：

```
-(void) showMatchmakerWithInvite:(GKInvite*)invite
{
    GKMatchmakerViewController* inviteVC = [[[GKMatchmakerViewController alloc] initWithInvite:invite] autorelease];
    if (inviteVC != nil)
    {
        inviteVC.matchmakerDelegate = self;
        [self presentViewController:inviteVC];
    }
}

-(UIViewController*) getRootViewController
{
    return [CCDirector sharedDirector];
}

-(void) presentViewController:(UIViewController*)vc
{
    UIViewController* rootVC = [self getRootViewController];
    [rootVC presentModalViewController:vc animated:YES];
}

-(void) dismissModalViewController
{
    UIViewController* rootVC = [self getRootViewController];
    [rootVC dismissModalViewControllerAnimated:YES];
} 
```

当我在 iPhone4 等上调用 showMatchmakerWithInvite 时，我在 CCDirectorIOS 对象上看到了对 viewDidDisappear: 的调用，该对象停止了动画。这可以。当 GK 视图消失时，我看到对 viewWillAppear 的调用会重新启动动画。甜的。

然而，在 iPod Touch 上，运行完全相同的项目，没有调用 viewDidDisappear，而是调用 viewWillAppear，在 GK 视图消失之前。

我无法理解为什么会有差异。所有设备都运行 iOS 5.1.1。

几乎就好像 UIKit 的行为在 iPod Touch 上有所不同，但我觉得这很难相信。我的另一个想法是我正在查看时间问题，但我放入了一些代码以允许应用程序即使出现问题也能继续运行，但对 viewDidDisappear 的调用从未发生过。

我认为我可以通过自己管理动画的开始/停止来解决这个问题，但我宁愿不自定义 Cocos2D 代码。

有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:21:33.260

好吧，作为一个没有耐心的人，我没有把它留给别人去做别的事情，我把它发疯了。

我发现有问题的 iPod Touch 设备在限制应用程序中禁用了多人游戏。这似乎导致 GK 视图无法“正确”显示，因此像 viewDidDisappear: 和 viewWillAppear: 这样的事件不会像我预期的那样发生。

所以我已经能够恢复我在 Cocos2D 代码中的所有调整和检测，并简单地对 GameKitHelper 类进行更正，以确保如果多人游戏等功能被禁用，玩家将无法请求它们.

# android - 如何获取 Android 4.0+ 的外部 SD 卡路径？

> ID：11281010
> 
> 赞同：94
> 
> 时间：2012-07-01T09:48:06.977
> 
> 标签：android, android-sdcard

[三星 Galaxy S3](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III)有一个外部 SD 卡插槽，可安装到`/mnt/extSdCard`.

我怎样才能通过类似的方式获得这条路径`Environment.getExternalStorageDirectory()`？

这将返回`mnt/sdcard`，我找不到外部 SD 卡的 API。（或某些平板电脑上的可移动 USB 存储设备。）

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-30T16:13:13.123

我在[这里找到的解决方案有所不同](http://mono-for-android.1047100.n5.nabble.com/detect-SD-Card-path-tp5710218p5710250.html)

```
public static HashSet<String> getExternalMounts() {
    final HashSet<String> out = new HashSet<String>();
    String reg = "(?i).*vold.*(vfat|ntfs|exfat|fat32|ext3|ext4).*rw.*";
    String s = "";
    try {
        final Process process = new ProcessBuilder().command("mount")
                .redirectErrorStream(true).start();
        process.waitFor();
        final InputStream is = process.getInputStream();
        final byte[] buffer = new byte[1024];
        while (is.read(buffer) != -1) {
            s = s + new String(buffer);
        }
        is.close();
    } catch (final Exception e) {
        e.printStackTrace();
    }

    // parse output
    final String[] lines = s.split("\n");
    for (String line : lines) {
        if (!line.toLowerCase(Locale.US).contains("asec")) {
            if (line.matches(reg)) {
                String[] parts = line.split(" ");
                for (String part : parts) {
                    if (part.startsWith("/"))
                        if (!part.toLowerCase(Locale.US).contains("vold"))
                            out.add(part);
                }
            }
        }
    }
    return out;
} 
```

原始方法经过测试和使用

*   华为 X3（现货）
*   银河 S2（现货）
*   银河 S3（现货）

我不确定它们在测试时使用的是哪个 android 版本。

我已经测试了我的修改版本

*   Moto Xoom 4.1.2（库存）
*   使用 otg 电缆的 Galaxy Nexus (cyanogenmod 10)
*   HTC Incredible (cyanogenmod 7.2) 这返回了内部和外部。这个设备有点奇怪，因为 getExternalStorage() 返回的是 sdcard 的路径，所以它的内部大部分都没有使用。

以及一些使用 sdcard 作为主存储的单一存储设备

*   HTC G1 (cyanogenmod 6.1)
*   HTC G1（现货）
*   HTC Vision/G2（现货）

除了 Incredible 之外，所有这些设备都只返回了它们的可移动存储。我可能应该做一些额外的检查，但这至少比我迄今为止找到的任何解决方案都要好一些。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-09-18T11:29:22.540

我找到了更可靠的方法来获取系统中所有 SD-CARD 的路径。这适用于所有 Android 版本并返回所有存储的路径（包括模拟）。

在我所有的设备上都能正常工作。

PS：基于环境类的源代码。

```
private static final Pattern DIR_SEPORATOR = Pattern.compile("/");

/**
 * Raturns all available SD-Cards in the system (include emulated)
 *
 * Warning: Hack! Based on Android source code of version 4.3 (API 18)
 * Because there is no standart way to get it.
 * TODO: Test on future Android versions 4.4+
 *
 * @return paths to all available SD-Cards in the system (include emulated)
 */
public static String[] getStorageDirectories()
{
    // Final set of paths
    final Set<String> rv = new HashSet<String>();
    // Primary physical SD-CARD (not emulated)
    final String rawExternalStorage = System.getenv("EXTERNAL_STORAGE");
    // All Secondary SD-CARDs (all exclude primary) separated by ":"
    final String rawSecondaryStoragesStr = System.getenv("SECONDARY_STORAGE");
    // Primary emulated SD-CARD
    final String rawEmulatedStorageTarget = System.getenv("EMULATED_STORAGE_TARGET");
    if(TextUtils.isEmpty(rawEmulatedStorageTarget))
    {
        // Device has physical external storage; use plain paths.
        if(TextUtils.isEmpty(rawExternalStorage))
        {
            // EXTERNAL_STORAGE undefined; falling back to default.
            rv.add("/storage/sdcard0");
        }
        else
        {
            rv.add(rawExternalStorage);
        }
    }
    else
    {
        // Device has emulated storage; external storage paths should have
        // userId burned into them.
        final String rawUserId;
        if(Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR1)
        {
            rawUserId = "";
        }
        else
        {
            final String path = Environment.getExternalStorageDirectory().getAbsolutePath();
            final String[] folders = DIR_SEPORATOR.split(path);
            final String lastFolder = folders[folders.length - 1];
            boolean isDigit = false;
            try
            {
                Integer.valueOf(lastFolder);
                isDigit = true;
            }
            catch(NumberFormatException ignored)
            {
            }
            rawUserId = isDigit ? lastFolder : "";
        }
        // /storage/emulated/0[1,2,...]
        if(TextUtils.isEmpty(rawUserId))
        {
            rv.add(rawEmulatedStorageTarget);
        }
        else
        {
            rv.add(rawEmulatedStorageTarget + File.separator + rawUserId);
        }
    }
    // Add all secondary storages
    if(!TextUtils.isEmpty(rawSecondaryStoragesStr))
    {
        // All Secondary SD-CARDs splited into array
        final String[] rawSecondaryStorages = rawSecondaryStoragesStr.split(File.pathSeparator);
        Collections.addAll(rv, rawSecondaryStorages);
    }
    return rv.toArray(new String[rv.size()]);
} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-07-01T09:53:37.677

我想使用你需要使用的外部 sdcard：

```
new File("/mnt/external_sd/") 
```

或者

```
new File("/mnt/extSdCard/") 
```

在你的情况下......

代替`Environment.getExternalStorageDirectory()`

为我工作。您应该首先检查目录 mnt 中的内容，然后从那里开始工作。

* * *

您应该使用某种类型的选择方法来选择要使用的 sdcard：

```
File storageDir = new File("/mnt/");
if(storageDir.isDirectory()){
    String[] dirList = storageDir.list();
    //TODO some type of selecton method?
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-11-14T05:55:30.423

我一直在使用**Dmitriy Lozenko**的解决方案，直到我检查了**Asus Zenfone2**、**Marshmallow 6.0.1**并且该解决方案不起作用。获取**EMULATED_STORAGE_TARGET**时解决方案失败，特别是针对 microSD 路径，即：**/storage/F99C-10F4/**。我编辑了代码以直接从模拟的应用程序路径获取模拟的根路径，`context.getExternalFilesDirs(null);`并添加了更多已知*的特定于手机型号的*物理路径。

为了让我们的生活更轻松，我在[这里](https://github.com/hendrawd/StorageUtil)做了一个图书馆。您可以通过 gradle、maven、sbt 和 leiningen 构建系统使用它。

如果你喜欢老式的方式，你也可以直接从[这里](https://github.com/hendrawd/StorageUtil/blob/master/library/src/main/java/hendrawd/storageutil/library/StorageUtil.java)复制粘贴文件，但如果不手动检查，你将不知道以后是否有更新。

如果您有任何问题或建议，请告诉我

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-11-07T08:55:44.847

为了检索所有[外部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)（无论是***SD 卡***还是***内部不可移动存储***），您可以使用以下代码：

```
final String state = Environment.getExternalStorageState();

if ( Environment.MEDIA_MOUNTED.equals(state) || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state) ) {  // we can read the External Storage...           
    //Retrieve the primary External Storage:
    final File primaryExternalStorage = Environment.getExternalStorageDirectory();

    //Retrieve the External Storages root directory:
    final String externalStorageRootDir;
    if ( (externalStorageRootDir = primaryExternalStorage.getParent()) == null ) {  // no parent...
        Log.d(TAG, "External Storage: " + primaryExternalStorage + "\n");
    }
    else {
        final File externalStorageRoot = new File( externalStorageRootDir );
        final File[] files = externalStorageRoot.listFiles();

        for ( final File file : files ) {
            if ( file.isDirectory() && file.canRead() && (file.listFiles().length > 0) ) {  // it is a real directory (not a USB drive)...
                Log.d(TAG, "External Storage: " + file.getAbsolutePath() + "\n");
            }
        }
    }
} 
```

或者，您可以使用**System.getenv("EXTERNAL_STORAGE")**检索主外部存储目录（例如*"/storage/sdcard0"*）和**System.getenv("SECONDARY_STORAGE")**检索所有辅助目录的列表（例如*" /storage/extSdCard:/storage/UsbDriveA:/storage/UsbDriveB"*）。请记住，同样在这种情况下，您可能希望过滤二级目录列表以排除 USB 驱动器。

在任何情况下，请注意使用硬编码路径总是一种不好的方法（特别是当每个制造商都可以随意更改它时）。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-03-20T23:13:09.230

好消息！在 KitKat 中，现在有一个公共 API 用于与这些辅助共享存储设备进行交互。

新的`Context.getExternalFilesDirs()`和`Context.getExternalCacheDirs()`方法可以返回多个路径，包括主设备和辅助设备。然后，您可以遍历它们并检查`Environment.getStorageState()`并`File.getFreeSpace()`确定存储文件的最佳位置。`ContextCompat`这些方法在 support-v4 库中也可用。

另请注意，如果您只对使用返回的目录感兴趣，则`Context`不再需要`READ_`or`WRITE_EXTERNAL_STORAGE`权限。展望未来，您将始终拥有对这些目录的读/写访问权限，而无需其他权限。

应用程序还可以通过终止其权限请求来继续在旧设备上工作，如下所示：

```
<uses-permission
    android:name="android.permission.WRITE_EXTERNAL_STORAGE"
    android:maxSdkVersion="18" /> 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-09-29T02:19:32.713

我做了以下操作来访问所有外部 sd 卡。

和：

```
File primaryExtSd=Environment.getExternalStorageDirectory(); 
```

您将获得主要外部 SD 的路径然后使用：

```
File parentDir=new File(primaryExtSd.getParent()); 
```

你得到主外部存储的父目录，它也是所有外部 sd 的父目录。现在，您可以列出所有存储并选择您想要的存储。

希望它有用。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-11-28T23:38:52.570

找到了一种从 Android N 开始更正式的新方法（如果以前，你可以尝试我上面写的），特别是从 Android R，使用 StorageManager（基于我在[**这里**](https://stackoverflow.com/a/30401010/878126)写的解决方案）：

```
class MainActivity : AppCompatActivity() {
    @RequiresApi(Build.VERSION_CODES.N)
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        getSdCardPaths(this, true)?.forEach { volumePath ->
            Log.d("AppLog", "volumePath:$volumePath")
        }
    }

    /**
     * returns a list of all available sd cards paths, or null if not found.
     *
     * @param includePrimaryExternalStorage set to true if you wish to also include the path of the primary external storage
     */
    fun getSdCardPaths(context: Context, includePrimaryExternalStorage: Boolean): List<String>? {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            val storageManager = context.getSystemService(Context.STORAGE_SERVICE) as StorageManager
            val storageVolumes = storageManager.storageVolumes
            if (!storageVolumes.isNullOrEmpty()) {
                val primaryVolume = storageManager.primaryStorageVolume
                val result = ArrayList<String>(storageVolumes.size)
                for (storageVolume in storageVolumes) {
                    val volumePath = getVolumePath(storageVolume) ?: continue
                    if (storageVolume.uuid == primaryVolume.uuid || storageVolume.isPrimary) {
                        if (includePrimaryExternalStorage)
                            result.add(volumePath)
                        continue
                    }
                    result.add(volumePath)
                }
                return if (result.isEmpty()) null else result
            }
        }
        val externalCacheDirs = ContextCompat.getExternalCacheDirs(context)
        if (externalCacheDirs.isEmpty())
            return null
        if (externalCacheDirs.size == 1) {
            if (externalCacheDirs[0] == null)
                return null
            val storageState = EnvironmentCompat.getStorageState(externalCacheDirs[0])
            if (Environment.MEDIA_MOUNTED != storageState)
                return null
            if (!includePrimaryExternalStorage && Environment.isExternalStorageEmulated())
                return null
        }
        val result = ArrayList<String>()
        if (externalCacheDirs[0] != null && (includePrimaryExternalStorage || externalCacheDirs.size == 1))
            result.add(getRootOfInnerSdCardFolder(context, externalCacheDirs[0]))
        for (i in 1 until externalCacheDirs.size) {
            val file = externalCacheDirs[i] ?: continue
            val storageState = EnvironmentCompat.getStorageState(file)
            if (Environment.MEDIA_MOUNTED == storageState)
                result.add(getRootOfInnerSdCardFolder(context, externalCacheDirs[i]))
        }
        return if (result.isEmpty()) null else result
    }

    fun getRootOfInnerSdCardFolder(context: Context, inputFile: File): String {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            val storageManager = context.getSystemService(Context.STORAGE_SERVICE) as StorageManager
            storageManager.getStorageVolume(inputFile)?.let {
                val result = getVolumePath(it)
                if (result != null)
                    return result
            }
        }
        var file: File = inputFile
        val totalSpace = file.totalSpace
        while (true) {
            val parentFile = file.parentFile
            if (parentFile == null || parentFile.totalSpace != totalSpace || !parentFile.canRead())
                return file.absolutePath
            file = parentFile
        }
    }

    @RequiresApi(Build.VERSION_CODES.N)
    fun getVolumePath(storageVolume: StorageVolume): String? {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R)
            return storageVolume.directory?.absolutePath
        try {
            val storageVolumeClazz = StorageVolume::class.java
            val getPath = storageVolumeClazz.getMethod("getPath")
            return getPath.invoke(storageVolume) as String
        } catch (e: Exception) {
            e.printStackTrace()
        }
        return null
    }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-06-25T05:38:53.647

感谢你们提供的线索，尤其是@SmartLemon，我得到了解决方案。如果其他人需要它，我把我的最终解决方案放在这里（找到第一个列出的外部 SD 卡）：

```
public File getExternalSDCardDirectory()
{
    File innerDir = Environment.getExternalStorageDirectory();
    File rootDir = innerDir.getParentFile();
    File firstExtSdCard = innerDir ;
    File[] files = rootDir.listFiles();
    for (File file : files) {
        if (file.compareTo(innerDir) != 0) {
            firstExtSdCard = file;
            break;
        }
    }
    //Log.i("2", firstExtSdCard.getAbsolutePath().toString());
    return firstExtSdCard;
} 
```

如果那里没有外部 SD 卡，则返回板载存储。如果 sdcard 不存在，我将使用它，您可能需要更改它。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-01-17T03:03:15.903

参考我的代码，希望对你有帮助：

```
 Runtime runtime = Runtime.getRuntime();
    Process proc = runtime.exec("mount");
    InputStream is = proc.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    String line;
    String mount = new String();
    BufferedReader br = new BufferedReader(isr);
    while ((line = br.readLine()) != null) {
        if (line.contains("secure")) continue;
        if (line.contains("asec")) continue;

        if (line.contains("fat")) {//TF card
            String columns[] = line.split(" ");
            if (columns != null && columns.length > 1) {
                mount = mount.concat("*" + columns[1] + "\n");
            }
        } else if (line.contains("fuse")) {//internal storage
            String columns[] = line.split(" ");
            if (columns != null && columns.length > 1) {
                mount = mount.concat(columns[1] + "\n");
            }
        }
    }
    txtView.setText(mount); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-09-07T14:01:39.603

`System.getenv("SECONDARY_STORAGE")`该解决方案（由该问题的其他答案组装而成）处理了对 Marshmallow 没有用的事实（如@ono 所述） 。

测试和工作：

*   三星 Galaxy Tab 2（Android 4.1.1 - 库存）
*   三星 Galaxy Note 8.0（Android 4.2.2 - 库存）
*   三星 Galaxy S4（Android 4.4 - 库存）
*   三星 Galaxy S4 (Android 5.1.1 - Cyanogenmod)
*   三星 Galaxy Tab A（Android 6.0.1 - 库存）

    ```
    /**
     * Returns all available external SD-Card roots in the system.
     *
     * @return paths to all available external SD-Card roots in the system.
     */
    public static String[] getStorageDirectories() {
        String [] storageDirectories;
        String rawSecondaryStoragesStr = System.getenv("SECONDARY_STORAGE");

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            List<String> results = new ArrayList<String>();
            File[] externalDirs = applicationContext.getExternalFilesDirs(null);
            for (File file : externalDirs) {
                String path = file.getPath().split("/Android")[0];
                if((Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP && Environment.isExternalStorageRemovable(file))
                        || rawSecondaryStoragesStr != null && rawSecondaryStoragesStr.contains(path)){
                    results.add(path);
                }
            }
            storageDirectories = results.toArray(new String[0]);
        }else{
            final Set<String> rv = new HashSet<String>();

            if (!TextUtils.isEmpty(rawSecondaryStoragesStr)) {
                final String[] rawSecondaryStorages = rawSecondaryStoragesStr.split(File.pathSeparator);
                Collections.addAll(rv, rawSecondaryStorages);
            }
            storageDirectories = rv.toArray(new String[rv.size()]);
        }
        return storageDirectories;
    } 
    ```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-05-19T11:59:52.170

实际上，在某些设备中，外部 sdcard 默认名称显示为`extSdCard`，而对于其他设备，则显示为`sdcard1`。

此代码片段有助于找出确切的路径并帮助您检索外部设备的路径。

```
String sdpath,sd1path,usbdiskpath,sd0path;    
        if(new File("/storage/extSdCard/").exists())
            {
               sdpath="/storage/extSdCard/";
               Log.i("Sd Cardext Path",sdpath);
            }
        if(new File("/storage/sdcard1/").exists())
         {
              sd1path="/storage/sdcard1/";
              Log.i("Sd Card1 Path",sd1path);
         }
        if(new File("/storage/usbcard1/").exists())
         {
              usbdiskpath="/storage/usbcard1/";
              Log.i("USB Path",usbdiskpath);
         }
        if(new File("/storage/sdcard0/").exists())
         {
              sd0path="/storage/sdcard0/";
              Log.i("Sd Card0 Path",sd0path);
         } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-09-06T07:27:57.293

是的。不同的制造商使用不同的 SD 卡名称，如三星 Tab 3 它的 extsd，而其他三星设备使用不同的 SD 卡，不同的制造商使用不同的名称。

我和你有同样的要求。所以我从我的项目中为您创建了一个示例示例转到此链接[Android 目录选择器](https://github.com/shivarajp/AndroidDirectoryChooserExample)示例，该示例使用 android-dirchooser 库。此示例检测 SD 卡并列出所有子文件夹，它还检测设备是否有多个 SD 卡。

部分代码如下所示完整示例转到链接[Android 目录选择器](https://github.com/shivarajp/AndroidDirectoryChooserExample)

```
/**
* Returns the path to internal storage ex:- /storage/emulated/0
 *
* @return
 */
private String getInternalDirectoryPath() {
return Environment.getExternalStorageDirectory().getAbsolutePath();
 }

/**
 * Returns the SDcard storage path for samsung ex:- /storage/extSdCard
 *
 * @return
 */
    private String getSDcardDirectoryPath() {
    return System.getenv("SECONDARY_STORAGE");
}

 mSdcardLayout.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {
        String sdCardPath;
        /***
         * Null check because user may click on already selected buton before selecting the folder
         * And mSelectedDir may contain some wrong path like when user confirm dialog and swith back again
         */

        if (mSelectedDir != null && !mSelectedDir.getAbsolutePath().contains(System.getenv("SECONDARY_STORAGE"))) {
            mCurrentInternalPath = mSelectedDir.getAbsolutePath();
        } else {
            mCurrentInternalPath = getInternalDirectoryPath();
        }
        if (mCurrentSDcardPath != null) {
            sdCardPath = mCurrentSDcardPath;
        } else {
            sdCardPath = getSDcardDirectoryPath();
        }
        //When there is only one SDcard
        if (sdCardPath != null) {
            if (!sdCardPath.contains(":")) {
                updateButtonColor(STORAGE_EXTERNAL);
                File dir = new File(sdCardPath);
                changeDirectory(dir);
            } else if (sdCardPath.contains(":")) {
                //Multiple Sdcards show root folder and remove the Internal storage from that.
                updateButtonColor(STORAGE_EXTERNAL);
                File dir = new File("/storage");
                changeDirectory(dir);
            }
        } else {
            //In some unknown scenario at least we can list the root folder
            updateButtonColor(STORAGE_EXTERNAL);
            File dir = new File("/storage");
            changeDirectory(dir);
        }

    }
}); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-11-27T07:32:10.317

在某些设备（例如三星 Galaxy sII）上，内部存储卡可能位于 vfat 中。在这种情况下，使用最后一个代码，我们获得路径内部存储卡（/mnt/sdcad）但没有外部卡。参考下面的代码解决了这个问题。

```
static String getExternalStorage(){
         String exts =  Environment.getExternalStorageDirectory().getPath();
         try {
            FileReader fr = new FileReader(new File("/proc/mounts"));       
            BufferedReader br = new BufferedReader(fr);
            String sdCard=null;
            String line;
            while((line = br.readLine())!=null){
                if(line.contains("secure") || line.contains("asec")) continue;
            if(line.contains("fat")){
                String[] pars = line.split("\\s");
                if(pars.length<2) continue;
                if(pars[1].equals(exts)) continue;
                sdCard =pars[1]; 
                break;
            }
        }
        fr.close();
        br.close();
        return sdCard;  

     } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-03-13T07:51:46.753

```
 File[] files = null;
    File file = new File("/storage");// /storage/emulated
if (file.exists()) {
        files = file.listFiles();
            }
            if (null != files)
                for (int j = 0; j < files.length; j++) {
                    Log.e(TAG, "" + files[j]);
                    Log.e(TAG, "//--//--// " +             files[j].exists());

                    if (files[j].toString().replaceAll("_", "")
                            .toLowerCase().contains("extsdcard")) {
                        external_path = files[j].toString();
                        break;
                    } else if (files[j].toString().replaceAll("_", "")
                            .toLowerCase()
                            .contains("sdcard".concat(Integer.toString(j)))) {
                        // external_path = files[j].toString();
                    }
                    Log.e(TAG, "--///--///--  " + external_path);
                } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-07-05T22:52:54.143

`System.getenv("SECONDARY_STORAGE")`为棉花糖返回 null。这是另一种查找所有外部目录的方法。您可以检查它是否可移动，这决定了内部/外部

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
    File[] externalCacheDirs = context.getExternalCacheDirs();
    for (File file : externalCacheDirs) {
        if (Environment.isExternalStorageRemovable(file)) {
            // It's a removable storage
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-06-09T07:07:33.277

我相信这段代码肯定会解决你的问题......这对我来说很好......\

```
try {
            File mountFile = new File("/proc/mounts");
            usbFoundCount=0;
            sdcardFoundCount=0;
            if(mountFile.exists())
             {
                Scanner usbscanner = new Scanner(mountFile);
                while (usbscanner.hasNext()) {
                    String line = usbscanner.nextLine();
                    if (line.startsWith("/dev/fuse /storage/usbcard1")) {
                        usbFoundCount=1;
                        Log.i("-----USB--------","USB Connected and properly mounted---/dev/fuse /storage/usbcard1" );
                    }
            }
         }
            if(mountFile.exists()){
                Scanner sdcardscanner = new Scanner(mountFile);
                while (sdcardscanner.hasNext()) {
                    String line = sdcardscanner.nextLine();
                    if (line.startsWith("/dev/fuse /storage/sdcard1")) {
                        sdcardFoundCount=1;
                        Log.i("-----USB--------","USB Connected and properly mounted---/dev/fuse /storage/sdcard1" );
                    }
            }
         }
            if(usbFoundCount==1)
            {
                Toast.makeText(context,"USB Connected and properly mounted", 7000).show();
                Log.i("-----USB--------","USB Connected and properly mounted" );
            }
            else
            {
                Toast.makeText(context,"USB not found!!!!", 7000).show();
                Log.i("-----USB--------","USB not found!!!!" );

            }
            if(sdcardFoundCount==1)
            {
                Toast.makeText(context,"SDCard Connected and properly mounted", 7000).show();
                Log.i("-----SDCard--------","SDCard Connected and properly mounted" );
            }
            else
            {
                Toast.makeText(context,"SDCard not found!!!!", 7000).show();
                Log.i("-----SDCard--------","SDCard not found!!!!" );

            }
        }catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-11-27T01:51:57.430

要访问我的**SD 卡**中的文件，在我的 HTC One X (Android) 上，我使用以下路径：

```
file:///storage/sdcard0/folder/filename.jpg 
```

**注意**三个“/”！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-11-27T22:53:56.027

```
 String path = Environment.getExternalStorageDirectory()
                        + File.separator + Environment.DIRECTORY_PICTURES;
                File dir = new File(path); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-06-28T06:38:13.870

您可以使用类似的东西 - Context.getExternalCacheDirs() 或 Context.getExternalFilesDirs() 或 Context.getObbDirs()。它们在应用程序可以存储其文件的所有外部存储设备中提供应用程序特定的目录。

所以像这样的东西 - Context.getExternalCacheDirs()[i].getParentFile().getParentFile().getParentFile().getParent() 可以获得外部存储设备的根路径。

我知道这些命令用于不同的目的，但其他答案对我不起作用。

这个链接给了我很好的指示 - [https://possiblemobile.com/2014/03/android-external-storage/](https://possiblemobile.com/2014/03/android-external-storage/)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-10-10T13:41:34.420

```
String secStore = System.getenv("SECONDARY_STORAGE");

File externalsdpath = new File(secStore); 
```

这将获得外部 sd 二级存储的路径。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-10-19T05:43:08.637

我在我的**三星 Galaxy Tab S2（型号：T819Y）上尝试了****Dmitriy Lozenko**和**Gnathonic**提供的解决方案，但没有一个帮助我检索到外部 SD 卡目录的路径。**命令执行包含外部 SD 卡目录（即 /Storage/A5F9-15F4）**所需的路径，但它与正则表达式不匹配，因此未返回。我没有得到三星遵循的目录命名机制。为什么他们偏离标准**（即 extsdcard）**并想出像我的情况一样非常可疑的东西**（即 /Storage/A5F9-15F4）**。有什么我想念的吗？**无论如何，随着Gnathonic**正则表达式的变化**`mount`********解决方案帮助我获得了有效的 sdcard 目录：**********

 ******```
final HashSet<String> out = new HashSet<String>();
        String reg = "(?i).*(vold|media_rw).*(sdcard|vfat|ntfs|exfat|fat32|ext3|ext4).*rw.*";
        String s = "";
        try {
            final Process process = new ProcessBuilder().command("mount")
                    .redirectErrorStream(true).start();
            process.waitFor();
            final InputStream is = process.getInputStream();
            final byte[] buffer = new byte[1024];
            while (is.read(buffer) != -1) {
                s = s + new String(buffer);
            }
            is.close();
        } catch (final Exception e) {
            e.printStackTrace();
        }

        // parse output
        final String[] lines = s.split("\n");
        for (String line : lines) {
            if (!line.toLowerCase(Locale.US).contains("asec")) {
                if (line.matches(reg)) {
                    String[] parts = line.split(" ");
                    for (String part : parts) {
                        if (part.startsWith("/"))
                            if (!part.toLowerCase(Locale.US).contains("vold"))
                                out.add(part);
                    }
                }
            }
        }
        return out; 
```

我不确定这是否是一个有效的解决方案，以及它是否会为其他三星平板电脑提供结果，但它现在已经解决了我的问题。以下是在 Android (v6.0) 中检索可移动 SD 卡路径的另一种方法。我已经用 android marshmallow 测试了这个方法，它可以工作。它使用的方法非常基本，肯定也适用于其他版本，但测试是强制性的。对它的一些了解会有所帮助：

```
public static String getSDCardDirPathForAndroidMarshmallow() {

    File rootDir = null;

    try {
        // Getting external storage directory file
        File innerDir = Environment.getExternalStorageDirectory();

        // Temporarily saving retrieved external storage directory as root
        // directory
        rootDir = innerDir;

        // Splitting path for external storage directory to get its root
        // directory

        String externalStorageDirPath = innerDir.getAbsolutePath();

        if (externalStorageDirPath != null
                && externalStorageDirPath.length() > 1
                && externalStorageDirPath.startsWith("/")) {

            externalStorageDirPath = externalStorageDirPath.substring(1,
                    externalStorageDirPath.length());
        }

        if (externalStorageDirPath != null
                && externalStorageDirPath.endsWith("/")) {

            externalStorageDirPath = externalStorageDirPath.substring(0,
                    externalStorageDirPath.length() - 1);
        }

        String[] pathElements = externalStorageDirPath.split("/");

        for (int i = 0; i < pathElements.length - 1; i++) {

            rootDir = rootDir.getParentFile();
        }

        File[] files = rootDir.listFiles();

        for (File file : files) {
            if (file.exists() && file.compareTo(innerDir) != 0) {

                // Try-catch is implemented to prevent from any IO exception
                try {

                    if (Environment.isExternalStorageRemovable(file)) {
                        return file.getAbsolutePath();

                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return null;
} 
```

如果您有任何其他方法来处理此问题，请分享。谢谢

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-04-13T21:17:26.677

```
//manifest file outside the application tag
//please give permission write this 
//<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
        File file = new File("/mnt");
        String[] fileNameList = file.list(); //file names list inside the mnr folder
        String all_names = ""; //for the log information
        String foundedFullNameOfExtCard = ""; // full name of ext card will come here
        boolean isExtCardFounded = false;
        for (String name : fileNameList) {
            if (!isExtCardFounded) {
                isExtCardFounded = name.contains("ext");
                foundedFullNameOfExtCard = name;
            }
            all_names += name + "\n"; // for log
        }
        Log.d("dialog", all_names + foundedFullNameOfExtCard); 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2012-11-15T10:41:24.370

这不是真的。即使未挂载 SD 卡，/mnt/sdcard/external_sd 也可以存在。当您在未安装时尝试写入 /mnt/sdcard/external_sd 时，您的应用程序将崩溃。

您需要检查是否首先使用以下方法安装了 SD 卡：

```
boolean isSDPresent = Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED); 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2013-12-20T15:46:14.313

在 Galaxy S3 Android 4.3 上，我使用的路径是**./storage/extSdCard/Card/**，它可以完成这项工作。希望能帮助到你，

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2016-03-01T05:23:17.487

以下步骤对我有用。你只需要写这行：

```
String sdf = new String(Environment.getExternalStorageDirectory().getName());
String sddir = new String(Environment.getExternalStorageDirectory().getPath().replace(sdf,"")); 
```

第一行将给出 sd 目录的名称，您只需在第二个字符串的 replace 方法中使用它。第二个字符串将包含内部和可移动**sd(/storage/ 在我的情况下)**的路径。我的应用程序只需要这条路径，但如果需要，您可以走得更远。******

# objective-c - 使用该对象的属性之一在数组中查找对象的索引

> ID：11281011
> 
> 赞同：1
> 
> 时间：2012-07-01T09:48:18.530
> 
> 标签：objective-c, cocoa-touch, nsarray

我有`NSMutableArray` `pages`几个对象（的实例`Page`）。每个`Page`实例都有一个 UUID 和其他属性，例如内容。当 a`page`改变时，除了 UUID 之外的一切都可能改变。更改后，我想通过使用找出特定`Page`in的索引。我使用 UUID 来识别我正在寻找的索引，这很好用：`pages``indexOfObject:`

```
NSMutableArray *uuids = [[NSMutableArray alloc] init];
for (int i = 0; i < [self.pages count]; i++) {
    [uuids addObject:[[pages objectAtIndex:i] uuid]];
}

NSUInteger indexOfPage = [uuids indexOfObject:page.uuid]; 
```

现在我的问题是是否有更优雅的方法来做到这一点。我真正需要的是具有给定 UUID的`Page`对象的索引。`pages`

有 `- (NSIndexSet *)indexesOfObjectsPassingTest:(BOOL (^)(id obj, NSUInteger idx, BOOL *stop))predicate`或`indexOfAccessibilityElement:<#(id)#>`但我不确定这些中的任何一个如何帮助我解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:59:34.980

子类化`isEqual:`方法`Page`如下：

```
- (BOOL) isEqual: (Page *) otherPage
{
    if (![otherPage isKindOfClass:[Page class]]) {
        return NO;
    }

    return [self.UUID isEqualToString: otherPage.UUID];
} 
```

然后`indexOfObject:`将正常工作。

来自[Apple 的 NSArray 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)：

> 从索引 0 开始，向数组的每个元素发送一个 isEqual: 消息，直到找到匹配项或到达数组末尾。此方法将 anObject 参数传递给每个 isEqual: 消息。如果 isEqual:（在 NSObject 协议中声明）返回 YES，则认为对象相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:57:40.047

来自 NSArray 文档：

> 数组的每个元素都会被发送一条`isEqual:`消息，直到找到匹配项或到达数组的末尾。

因此，您可以覆盖`isEqual:`以便`YES`在两个页面具有相同 UUID 时返回。

```
- (BOOL)isEqual:(id)object {
    if (![object isKindOfClass:[Page class]]) {
        return NO;
    }

    Page *otherPage = object;
    return [self.uuid isEqualToString:otherPage.uuid];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T09:55:11.350

通过使用谓词可能是这种方式，假设 pages 是所有页面的数组：

```
predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"(UUID == %@)", searchUUID]];
filteredArray = [pages filteredArrayUsingPredicate:predicate]; 
```

一旦你有了对象，假设你的 uuid 是唯一的，它应该在过滤数组中的 objectAtIndex:0 处，你可以询问该对象的索引：

NSUInteger indexOfPage = [pages indexOfObject:theObject];

# java - 无法使用 FlyingSaucer 的 XHTMLPanel 查看 Jsoup 生成的 HTML 文档

> ID：11281018
> 
> 赞同：0
> 
> 时间：2012-07-01T09:49:44.997
> 
> 标签：java, webview, jsoup, flying-saucer

我只是使用 Jsoup 在 Java 上创建了一个 HTML 文档。下面是代码的一部分

```
public static Document genDoc(String p) throws ProtocolException, IOException, InterruptedException, ParserConfigurationException{
   ........
   return Jsoup.parseBodyFragment(html);
} 
```

完成文档生成后，我必须显示它。我只是使用 FlyingSaucer 的 XHTML 面板。这是代码

```
public static void main(String[] args) throws ProtocolException, IOException, InterruptedException, ParserConfigurationException{
   Document doc = genDoc("http://www.mangareader.net/93-1-11/naruto/chapter-1.html");
   XHTMLPanel xhp = new XHTMLPanel();
   xhp.setDocument(doc);
   ........
} 
```

我认为类 org.jsoup.nodes.Document 继承自“org.w3c.dom.Document”。但是我错了。有什么方法可以传递'org.jsoup.nodes.Document'的对象来使用XHTMLPanel生成Web视图，而无需先将其转换为字符串或输入流或字节[]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:58:03.877

我想没有办法绕过字符串，因为两个 Libs 都使用 Document 的不同实现。

也许您可以为 jsoup <-> w3c 编写转换器，但最简单的方法是使用字符串。

在您的情况下`xhp.setDocument(doc.toString());`应该可以正常工作。

（我将其用于例如 HTML -> PDF 生成，到目前为止没有问题）

# php - 谷歌加一按钮在子域上有所不同

> ID：11281021
> 
> 赞同：0
> 
> 时间：2012-07-01T09:50:08.727
> 
> 标签：php, javascript, html, google-plus, google-plus-one

我访问了 www.mysite.com 并为我的网站 +1。

然后我访问了 mysite.com 并没有 +1。

如何让 google plus-one 将这两个 URL 视为同一页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:53:58.847

你不能。

`www`只是一个与其他任何子域一样的子域。它实际上不同于`mysite.com`并且应该被这样对待。您应该决定要使用哪一个并将另一个与您的服务器一起重定向到它，例如 apache 重写规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T16:16:21.983

通过在页面上指定规范关系，您可以非常轻松地做到这一点。规范关系链接告诉 Google（以及可能的其他搜索引擎）给定页面的真实 URL 是什么。这对于动态生成的页面以及像您的案例这样的子域很有帮助。

Google+ 使用规范链接来帮助统计 +1。

请参阅以下主题：

规范链接： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=139066](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139066)

和 Google+ 选择目标 URL 的顺序： [https ://developers.google.com/+/web/+1button/#target-url](https://developers.google.com/+/web/+1button/#target-url)

# linux - 带有额外选项的 Linux 选择语句

> ID：11281022
> 
> 赞同：2
> 
> 时间：2012-07-01T09:50:15.783
> 
> 标签：linux, bash

我正忙于编写一个可以从 FTP 下载一些文件的脚本，我想要一个 select 语句来提供 ftp 子目录中的目录。但也提供一个选项下载所有这一切都应该发生在底部的@$DNAtype。有人有什么想法吗？

我的代码是：（对不起荷兰评论）

```
#!/bin/bash/
#16-03-2012
#Sander van der Zeeuw s1040176

#Variabele om de ftp aan te kunnen roepen
var='ftp://ftp.ensembl.org/pub/release-66/fasta/'
#Hier word de lijst met beschikbare organisme binnengehaald via de functie curl.
# curl is te installeren via de terminal met het command sudo apt-get install curl
lijst=`curl $var | awk '{print $NF}'`

echo "de keuze 0 selecteert alles"

#hier wordt een directory aangemaakt om de files in weg te schrijven
mkdir -p dnaenpep
cd dnaenpep

#Hier wordt een keuze menu gecreeerd om het juiste organisme te kiezen.
select specie in $lijst
do
    break
done
echo "Uw keuze is:" $specie

#Hier wordt de keuze "0" ingebouwd. Zodat alle genomen gedownload worden.
if [ "$specie" == "" ]
then
    for i in $lijst
    do
        namen=$(curl $var$i/dna/ | awk '{print($NF)}')
        for files in $namen; do curl $var$i/dna/$files -o $files
                    curl $var$i/pep/$files -o $files
        done 
    done
fi

echo "de keuze 0 selecteert alles"

#Wanneer de loop niet uitgevoerd wordt, zal via nog een select statement de gekozen worden #welk DNA je van de ftp wil downloaden. 
lijst2=`curl $var$specie/ | awk '{print $9}'`
echo $lijst2

select dnatype in $lijst2
do
    break
done
echo "uw keuze is:" $dnatype

if [$dnatype == ""]
then
    for i in $dnatype
    do
        wget -O DNAtype "$var$specie/dna/"
        wget -O DNAtype "$var$specie/pep/"
    done
fi

#Hier worden de files die in $dnatype gemaakt worden gedownload.
wget -O DNAtype "$var$specie/$dnatype/"

cat DNAtype | egrep "=" | tr '"' '\n' | sort | grep ^"ftp" |grep gz > Downlist.txt
wget -c -i  Downlist.txt

exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:21:14.820

`select`您的 select 语句应该使用一个数组，您可以在数组中添加其他项目或在语句中的数组名称之后添加它们。

```
lijst2=($(curl "$var$specie/" | awk '{print $9}')
lijst2+=("Another option" "Additional option" "Download all")
echo "${lijst2[@]}"

select dnatype in "${lijst2[@]}"
do
    break
done
echo "uw keuze is: $dnatype" 
```

或者

```
lijst2=($(curl "$var$specie/" | awk '{print $9}')
echo "${lijst2[@]}"

select dnatype in "${lijst2[@]}" "Another option" "Additional option" "Download all"

do
    break
done
echo "uw keuze is: $dnatype" 
```

您选择哪个取决于您是否想要在数组中添加选项。

要全部下载，只需遍历数组（因此您可能希望使用第二个版本，因此您不必跳过“全部下载”，例如，因为它不是文件名。

补充笔记：

Use `$()` instead of backticks for command substitution.

This statement `if [$dnatype == ""]` needs spaces: `if [ $dnatype == "" ]`.

Quote all your variables when they are expanded. You have done this in some places, but not others.

Your long pipeline near the end can almost certainly be simplified. Without seeing example data I could only guess how.

# python-2.7 - 在python中的列表中添加数字

> ID：11281024
> 
> 赞同：1
> 
> 时间：2012-07-01T09:50:24.073
> 
> 标签：python-2.7

我有类似“Q 000 1111 00001 0001 00 //SOME_STRING”的句子，我想在 Python 中的列表中添加除 Q 和 //SOME_STRING 之外的结果，仅结果列表包含 000 1111 00001 0001 00。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:03:06.917

```
import re

data = "Q 000 1111 00001 0001 00 //SOME_STRING"

digits = re.findall(r"\b\d+\b",data) 
```

测试

```
>>> re.findall(r"\b\d+\b","Q 000 1111 00001 0001 00 //SOME_STRING234zzzz")
['000', '1111', '00001', '0001', '00'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T09:58:52.090

```
import re

def filter_digits(bar):
  return re.search("^\d+$", bar)

foo = "Q 000 1111 00001 0001 00 //SOME_STRING"
foo = foo.split(' ')
foo = filter(filter_digits, foo) 
```

# class - 如何使用 main.lua 中另一个类的函数？

> ID：11281032
> 
> 赞同：0
> 
> 时间：2012-07-01T09:51:37.480
> 
> 标签：class, lua, coronasdk

我试图在我的 main.lua 中使用另一个类的函数。我根据我的研究编写了一些代码，但它不能正常工作。你能帮我吗？谢谢。

fish.lua 代码：

```
function class()
  local cls = {}
  cls.__index = cls
  return setmetatable(cls, {__call = function (c, ...)
      instance = setmetatable({}, cls)
      if cls.__init then
          cls.__init(instance, ...)
      end
      return instance
  end})
end

 Fish= class()

 function Fish:listen(event)
  if phase =="began" then
          print("hi")
  end
 end

function Fish:__init(image)
    self.image=display.newImage(image,30,30)
    self.image: addEventListener("touch",self.listen)
end 
```

main.lua 代码：

```
 require  "fish"

  originalImage="fish.small.red.png"
  differentImage="fish.small.blue.png"

  local fishImage=Fish(originalImage) 
```

它显示图像但在触摸时不起作用（打印“hi”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:53:21.990

几个问题：

更改`function Fish:listen(event)`为`function Fish.listen(event)`

并且`if phase =="began" then`应该是`if event.phase =="began" then`

# javascript - 获取两个控制值

> ID：11281035
> 
> 赞同：0
> 
> 时间：2012-07-01T09:52:10.077
> 
> 标签：javascript, jquery, jquery-plugins

我有两个控件，其代码在运行时呈现如下：

```
ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7e7_ctl00_gdvItinerary_ctl03_txtTravelDate      
ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7e7_ctl00_gdvItinerary_ctl04_txtTravelDate 
```

如何使用 jQuery 获取上述两个控件的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:40:54.397

在 asp.net 中，您的控件`id`在运行时更改。

如果您的 id 是`mycontrol`，它将在客户端更改为`blahblahblahmycontrol`（`id`将在最后出现）。

所以，

如果你有一个 asp.net 控件（文本框），如下所示，

`<asp:TextBox runat='server' id='mytxtbox'></asp:TextBox>`

你可以做，

```
$("input[id$='mytxtbox']").val(); 
```

*它选择所有`input`以`_mytxtbox`*

或者，如果 javascript 在同一个 .aspx 文件上，您可以执行类似的操作

```
$('#<%=mytxtbox.ClientID %>').val() 
```

**如果您使用的是 asp.net 4.0，**

您可以将`ClientMode`属性添加到`Static`

`<asp:TextBox ID="mytxtbox" runat="server" ClientIDMode="Static"></asp:TextBox>`

这将保留`TextBox`to`mytxtbox`

所以，你可以这样做，

```
$('#mytxtbox').val(); 
```

是的，您也可以，查看源代码并`id`像这样使用转换后的代码，

```
var txtboxValue = $('#ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7‌​e7_ctl00_gdvItinerary_ctl03_txtTravelDate').val(); 
```

但它不推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:19:03.117

简单 - 使用[`.val()`](http://api.jquery.com/val/)：

```
var firstValue  = $('#ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7‌​e7_ctl00_gdvItinerary_ctl03_txtTravelDate').val();
var secondValue = $('#ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7e7_ctl00_gdvItinerary_ctl04_txtTravelDate').val(); 
```

您应该认真考虑使用 shorted `id`s。仅从这些`id`s，我*完全不知道*该值代表什么。

您可以通过以下方式使其更具可读性：

```
var baseID = "#ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7‌​e7_ctl00_gdvItinerary_";

var firstValue  = $(baseID + 'ctl03_txtTravelDate').val();
var secondValue = $(baseID + 'ctl04_txtTravelDate').val(); 
```

# python - 在 Python（或 Mac OS）中：两个不同的文件被识别为同一个文件并被重写

> ID：11281038
> 
> 赞同：1
> 
> 时间：2012-07-01T09:52:38.160
> 
> 标签：python, macos, unix

问题的简化描述，我有：

目录和文件结构：

```
./top.py
./Task/Task.py   (was deleted and then renamed as:)
./Task/task.py 
```

`top.py`进口`task.py`. 但是当我运行时`top.py`，我看到`task.py`自动更改为`Task.py`.

为什么会这样？

（我在 Mac OS 10.6 上使用 mvim 作为编辑器。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T09:58:26.893

Mac OS X 的默认文件系统不区分大小写，但会保留大小写，正如 Charles 所说（此文件系统称为 Mac OS Extended 或[HFS Plus](http://en.wikipedia.org/wiki/HFS_Plus)，默认配置为不区分大小写）。因此，实际上，./Task/Task.py 和 ./Task/task.py 是*同一个*文件（例如，您可以`open('task.py')`在 Python 中使用 , 来读取 Task.py），但是在创建文件时使用的名称与原案一起保存。

如果您确实需要区分 Task.py 和 task.py，您可能需要创建一个区分大小写的磁盘映像并从中工作（这个问题在网络上有[讨论](https://blog.breadncup.com/2010/04/16/mac-osx-hfs-is-case-insensitive-filesystem-by-default/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:01:00.653

OSX 上的文件大小写将保留为最初创建文件时使用的任何文件。因此`mv Task.py task.py`行不通。如果要重命名文件，通常需要先将其重命名为其他名称。您可以通过以下方式在命令行中执行此操作：

```
cd Task
mv Task.py temp.py
mv temp.py task.py 
```

PS 如果您的文件在 git 版本控制下，它会变得更加复杂。

# jpa - 通过查询@EmbeddedId 的 JPA 标准 api 顺序

> ID：11281039
> 
> 赞同：2
> 
> 时间：2012-07-01T09:52:42.343
> 
> 标签：jpa, jpa-2.0, criteria-api

我有 2 节课：

```
@Entity
@Table(name = "DRCOMMENTS" ,schema = "XXX")
@XmlRootElement
@NamedQueries({
@NamedQuery(name = "Drcomments.findAll", query = "SELECT d FROM Drcomments d"),
public class Drcomments implements Serializable {

private static final long serialVersionUID = 1L;

@EmbeddedId    
protected DrcommentsPK drcommentsPK;

@Size(max = 50)
@Column(name = "SDESC")
private String commentSecondaryCodeDescription;
}

@Embeddable
public class DrcommentsPK implements Serializable {

@Column(name = "CODE")
private Short commentPrimaryCode;

@NotNull   
@Column(name = "SCODE" , length=5)
private Short commentSecondaryCode;
} 
```

我正在尝试使用动态 order by 和参数创建查询，例如：当 DrcommentsPK.commentPrimaryCode 等于 1 时，我想选择所有 Drcomments 记录，并且 order by 将由 DrcommentsPK.commentSecondaryCode。这是我尝试过的：

```
 CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Drcomments> q = cb.createQuery(Drcomments.class);
    Root<Drcomments> c = q.from(Drcomments.class);

    q.select(c);
    q.where(cb.equal(c.get("drcommentsPK").get("commentPrimaryCode"), 1));

    Path<Drcomments> valuePath = c.get("drcommentsPK").get("commentSecondaryCode"); 
    Order[] orders; 
    if(sord.equals("desc"))
    {  
    orders = new Order[] {cb.desc(valuePath)};
    } 
    else
    {  
    orders = new Order[] {cb.asc(valuePath)};
    } 
    q.orderBy(orders);

    query = em.createQuery(q);                
    query.setFirstResult(start);
    query.setMaxResults(start + limit);   

    results = query.getResultList(); 
```

问题是我得到的结果列表没有按commentSecondaryCode desc顺序排序..

我做错了吗？如何才能做到这一点？如何创建将按可嵌入类中的字段排序的查询？

**更新：** 这是我得到的生成的 sql：

```
SELECT * FROM 
(SELECT * FROM 
(SELECT EL_TEMP.*, ROWNUMBER() OVER() AS EL_ROWNM FROM 
(SELECT CMSSDESC AS a1, CMSSCODE AS a4, CMSPCODE AS a5 FROM DRCOMMENTS
 WHERE (CMSPCODE = 1) ORDER BY CMSSCODE DESC, CMSPCODE DESC)
 AS EL_TEMP) 
 AS EL_TEMP2 WHERE EL_ROWNM <= 50) 
 AS EL_TEMP3 WHERE EL_ROWNM > 0 
```

当我运行此代码时，它不会返回 CMSSCODE desc order 中的记录..（因为 order by 应该在外部选择中..）我需要更改`query.setFirstResult()`and中的某些内容`query.setMaxResults()`吗？我如何将它添加到条件查询的末尾，所以它将在最后一个选择中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:01:04.753

您的代码很好并且符合标准。如果您确定它不起作用，那么在未显示的代码部分中一定存在实现错误或一些奇怪的东西。例如，检查值`sord`是否完全正确`"desc"`（区分大小写），否则您将使用升序。

我用 Hibernate 3.6.8.Final 和 EclipseLink (2.3.2) 进行了尝试。它们都按预期工作 -`ORDER BY SCODE [ASC/DESC]`是执行的 SQL 查询的一部分。

# delphi - cxGrid 在您键入时计算

> ID：11281040
> 
> 赞同：0
> 
> 时间：2012-07-01T09:52:45.637
> 
> 标签：delphi, grid, devexpress, vcl

简化后，我有一个 cxGrid，我在其中键入开始时间和结束时间。我需要的是一个函数，当我更改其中一个值时计算差异并将其存储在第三列中

我很难找到正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:20:52.657

I guess you have assigned some sort of Properties editor (probably a DateEdit) to the column.

Given that, you could try to use following code in the OnValidate event of the Properties editor:

```
var
  ValueThirdCol : variant;
  RecordIndex : integer;
begin
  RecordIndex := myView.DataController.FocusedRecordIndex;
  ValueThirdCol := myView.DataController.GetValue(RecordIndex, MyEndDateCol.Index) - myView.DataController.GetValue(RecordIndex, MyStartDateCol.Index);
  myView.DataController.SetValue(RecordIndex, myDifCol.Index, ValueThirdCol);
end; 
```

Please note that you might have to tweak this code a bit depending on if you have set GridMode or DataModeController.SyncMode to true, or not, and to use DisplayValue where necessary, but the basic idea should work.

**EDIT**: the OnValidate event of the Properties editor occurs **before** converting the display value to the edit value. That is the reason why this code I provided had to be tweaked.

In order for the code to work, you need to use (for the column being modified) the DisplayValue argument provided by the event instead of the value returned by GetValue.

For example, if the EndDateCol would be the column that triggered the OnValidate, then the code should be

```
ValueThirdCol := DisplayValue - myView.DataController.GetValue(RecordIndex, MyStartDateCol.Index); 
```

HTH

# ejb - 消息传递 - 为什么实体 Bean 或会话 Bean 不适合

> ID：11281041
> 
> 赞同：0
> 
> 时间：2012-07-01T09:52:46.207
> 
> 标签：ejb, jms

对于消息传递系统/处理消息 - 使用 MDB；不要使用实体 Bean 或会话 Bean。请告诉我原因。

感谢 Adv
RW

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:57:06.717

MDB 旨在接受消息，而其他则不接受。来自[旧的 Sun 教程](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/EJBConcepts5.html)，但[在最新版本中仍然相同](http://docs.oracle.com/javaee/6/tutorial/doc/gipko.html)

> 消息驱动 bean 与会话和实体 bean 之间最明显的区别是客户端不通过接口访问消息驱动 bean。接口在使用接口定义客户端访问部分中进行了描述。与会话或实体 bean 不同，消息驱动 bean 只有一个 bean 类

和

> 会话 bean 允许您发送 JMS 消息并以同步方式而非异步方式接收它们。为避免占用服务器资源，请勿在服务器端组件中使用阻塞同步接收；一般来说，JMS 消息不应该同步发送或接收。要异步接收消息，请使用消息驱动的 bean。

换句话说：在会话 bean 中，您只能在调用 bean 时收到消息。应用服务器将自动调用附加到接收消息的目标（队列或主题）的 MDB 的 onMessage 方法。这意味着 MDB 将保证在每条消息可用时立即处理它，这是会话 bean 无法保证的。

# ios - 如何将半透明 UIView 添加到 UIViewController

> ID：11281049
> 
> 赞同：0
> 
> 时间：2012-07-01T09:53:42.900
> 
> 标签：ios, uiview, uiviewcontroller, transparency, xib

在某个用户操作后，我希望向我的 UIViewController 添加另一个半透明的 UIView；即当它加载时，后面的UIViewController 视图仍然会在背景中可见，而新的UIView 将作为其上方的一个层出现。

“半透明”的 UIView 应该有几个图像和按钮，所以我更喜欢为它创建一个单独的 h、m 和 xib 文件，以便我可以控制它。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T09:56:46.757

尝试这个：

```
UIView *view = [[UIView alloc] init];
[view setAlpha:0.5];
[mainview addSubview:view] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:59:49.933

1.  子类UIView，创建nib文件
2.  将 nib 类更改为您的自定义子类名称
3.  将文件所有者更改为您的视图控制器
4.  在您的视图控制器中，使用 IBOutlet 为自定义视图声明一个 @property
5.  选择笔尖，从文件所有者拖动到自定义视图并连接插座
6.  在您的按钮操作中，当您准备好加载视图时，使用

`[[NSBundle mainBundle] loadNibNamed:@"NibName" owner:self options:nil];`

完成此操作后，您的自定义将从 nib 加载并分配给您声明的属性。

# iphone - BugSense 框架崩溃

> ID：11281059
> 
> 赞同：0
> 
> 时间：2012-07-01T09:56:12.093
> 
> 标签：iphone, objective-c, ios, ipad, bugsense

我在 iPhone 应用程序中使用 Bugsense 框架来获取崩溃日志，它工作正常。但是当我从 iTunes 帐户获得崩溃报告时，崩溃报告表明 bugSense 框架发生了崩溃。

这是什么意思？是否表明 bugSense 报告的应用程序崩溃？还是框架本身的实际崩溃？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:39:25.537

这可能是他们的 SDK 中的崩溃。可悲的是，一旦崩溃发生，他们就会在其框架中执行非异步安全功能。有关这意味着什么的更多详细信息，请参阅[http://landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html](http://landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html)（在这种情况下，一旦发生崩溃就调用 Objective-C 代码是不安全的）。您可能希望与他们联系以解决此可能的问题。

但是堆栈跟踪中较低的消息也表明，这是由于发生未捕获的异常而发生的崩溃，这通常会导致另一个`Last Exception Backtrace`出现在`Thread 0`. 我不确定他们是否包含该功能。如果他们这样做，这会导致该块仅出现在他们自己的崩溃报告中，而不是 iOS 创建的崩溃报告中。那么这没什么好担心的，除了上面提到的代码很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:49:54.923

如果您在 BugSense 中启用了立即调度，这可能是导致此崩溃的原因，因为不能保证它是安全的。

有关更多信息，您可以查看：[https](https://github.com/bugsense/plcrashreporter-bugsense/wiki/Using-the-BugSense-2.x-iOS-library) ://github.com/bugsense/plcrashreporter-bugsense/wiki/Using-the-BugSense-2.x-iOS-library ，启用立即调度部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:15:49.030

当没有互联网连接时可能会发生这种情况，请尝试在错误意义上启用立即调度

# php - 上传时重命名文件

> ID：11281067
> 
> 赞同：0
> 
> 时间：2012-07-01T09:57:31.713
> 
> 标签：php, file, upload, rename

我正在尝试使用 PHP 脚本将图像上传到服务器。它工作正常，直到我想使用名称中的变量更改文件名。

我想将文件重命名为登录用户 username_filename.extension，但它只是跳过用户名变量，因此名称变为：`_filename.extension`。

```
<?php
session_start();
include "./global.php";

    $res = mysql_query("SELECT * FROM users WHERE id='".$_SESSION['uid']."'");
    $row = mysql_fetch_assoc($res);

    $username = $row['username'];

if (!empty($_FILES)) {

    $tempFile = $_FILES['Filedata']['tmp_name'];
    $ext = explode('.',$_FILES['Filedata']['name']);
    $extension = $ext[1];
    $newname =  '/var/www/picturebox/albums/' . $username . '_' . $ext[0] . '.' . $ext[1];

    move_uploaded_file($tempFile,$newname);
}
?> 
```

文件名变为`_filename.extension`

有谁知道该怎么做？

刚刚发现它在 IE 中运行良好，但现在在 Chrome 中。关于解决方案的任何建议？

# macos - 尽管 .profile 文件已更新，但在 mac 上出现“git command not found”错误

> ID：11281070
> 
> 赞同：2
> 
> 时间：2012-07-01T09:58:08.737
> 
> 标签：macos, git, terminal, .profile

当我收到 [git: command not found (on OS X 10.5)](https://stackoverflow.com/questions/1835837/git-command-not-found) 错误时，我已阅读此线程

基本上说用这个短语更新 ~/.profile 文件：

```
export PATH=$PATH:/usr/local/git/bin 
```

我这样做了，但没有用。但是如果我只是在终端中编写这段代码，那么“git”命令确实有效——但只有在我关闭终端之前——然后我需要在我想让 git 工作时重新输入这段代码。

我怀疑我的 mac 中某处还有另一个“.profile”文件，并且我更新的文件无关紧要（因为它不起作用）。

是这样吗？如果是这样 - 我如何找到这个文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T10:15:08.090

将此行添加到您的`~/.bash_profile`文件中：

```
source ~/.profile 
```

这个出色的超级用户回答解释了原因： [.bashrc 和 .bash_profile 之间的区别](https://superuser.com/a/183980)

# php - the_content 之后的 WordPress 插件内容使用 add_filter()

> ID：11281071
> 
> 赞同：0
> 
> 时间：2012-07-01T09:58:11.123
> 
> 标签：php, wordpress, plugins

我正在尝试在 WordPress中添加`my_custom_function`之后使用`the_content`

```
add_filter ('the_content', 'my_custom_function');
add_action ('the_content', 'my_custom_function'); // I tried both 
```

我的`my_custom_function`功能是这样的

```
function my_custom_function($content) {
    if(is_single()) {
        $content .= "this is custom function content";
        $content .= my_another_custom_function();
        $content .= "this is custom function content";
    }

return $content;
} 
```

我的问题是这段代码`my_another_custom_function()` **之前** `the_content`附加，但我想要它**在**内容之后。

代码中给出的其他 2 行`$content .= "this is custom function content";`用于测试，它们出现**在之后** `the_content`

有人可以告诉我如何解决它以及我做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:02:57.610

最可能的原因是 my_another_custom_function() 回显输出而不是仅仅返回它。

# http - Scrapy：发送http请求并解析响应

> ID：11281073
> 
> 赞同：3
> 
> 时间：2012-07-01T09:58:30.053
> 
> 标签：http, scrapy

我看过 [scrapy docs](http://scrapy.readthedocs.org/en/latest/topics/request-response.html)，但是scrapy可以发送http表单（例如：用户名，密码，....）并解析发送此表单的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:37:18.673

同一页面中有一个示例：http: [//scrapy.readthedocs.org/en/latest/topics/request-response.html#passing-additional-data-to-callback-functions](http://scrapy.readthedocs.org/en/latest/topics/request-response.html#passing-additional-data-to-callback-functions)

```
def parse_page1(self, response):
    item = MyItem()
    item['main_url'] = response.url
    request = Request("http://www.example.com/some_page.html",
                      callback=self.parse_page2)
    request.meta['item'] = item
    return request

def parse_page2(self, response):
    item = response.meta['item']
    item['other_url'] = response.url
    return item 
```

您只需将回调参数函数传递给请求，然后在 parse_page2 中解析结果；）

# iphone - 在 Objective-C 中比较字符串

> ID：11281076
> 
> 赞同：0
> 
> 时间：2012-07-01T09:59:30.210
> 
> 标签：iphone, objective-c

> **可能重复：**
> [如何比较目标 c 中的字符串？](https://stackoverflow.com/questions/1302985/how-do-i-compare-strings-in-objective-c)
> [Objective-C If 语句？](https://stackoverflow.com/questions/4987770/objective-c-if-statement)

当我尝试使用 == 因子比较 Objective-C 中的字符串时，我没有得到任何结果。我正在做的是拥有一个 XML 文档，然后检索值“day”，然后比较它们。但正如我所说，什么也没有发生。

XML 代码：

```
<dagensretlist>
<dagensret>
<day>mandag</day>
<date>Mandag 2\. juli</date>
<name>Kylling fillet med rosti og salat</name>
<description>Den sprodeste kyllingfillet med Antons piksved</description>
</dagensret>

<dagensret>
    <day>tirsdag</day>
<date>Tirsdag 3\. juli</date>
<name>Kylling fillet med rosti og salat</name>
<description>Den sprodeste kyllingfillet med Antons piksved</description>
</dagensret>

<dagensret>
    <day>onsdag</day>
<date>Onsdag 4\. juli</date>
<name>Kylling fillet med rosti og salat</name>
<description>Den sprodeste kyllingfillet med Antons piksved</description>
</dagensret>

<dagensret>
<day>torsdag</day>
    <date>Torsdag 5\. juli</date>
<name>Kylling fillet med rosti og salat</name>
<description>Den sprodeste kyllingfillet med Antons piksved</description>
</dagensret>

<dagensret>
    <day>fredag</day>
<date>Fredag 6\. juli</date>
<name>Kylling fillet med rosti og salat</name>
<description>Den sprodeste kyllingfillet med Antons piksved</description>
</dagensret>
</dagensretlist> 
```

代码本身：

```
- (void)getCurrencyList {
    NSArray *currencyList = [self getAllItems:@"//dagensret" fileName:@"dagensret.xml"];
    int numberOfCurrencies = [currencyList count];

    NSString *name, *date, *description, *day;
    if (numberOfCurrencies > 0) {
        for (int i = 0; i < numberOfCurrencies; i++) {

            name            = [[currencyList objectAtIndex:i] objectForKey:@"name"];
            day             = [[currencyList objectAtIndex:i] objectForKey:@"day"];
            date            = [[currencyList objectAtIndex:i] objectForKey:@"date"];
            description     = [[currencyList objectAtIndex:i] objectForKey:@"description"];

            if(day==@"1"){
                NSLog(@"day: %@, date: %@, name: %@, description: %@", day, date, name, description);
                NSLog(@"1");
            }
            if(day==@"tirsdag"){
                NSLog(@"day: %@, date: %@, name: %@, description: %@", day, date, name, description); 
            }
            if(day==@"onsdag"){
                NSLog(@"day: %@, date: %@, name: %@, description: %@", day, date, name, description); 
            } 
            if(day==@"torsdag"){
                NSLog(@"day: %@, date: %@, name: %@, description: %@", day, date, name, description); 
            } 
            if(day==@"fredag"){
                NSLog(@"day: %@, date: %@, name: %@, description: %@", day, date, name, description); 
            }             

        }
    }
} 
```

这是将字符串与变量进行比较的错误方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T10:06:24.840

使用 `isEqualToString`NSString 类比较字符串

[文件](https://developer.apple.com/documentation/foundation/nsstring/1407803-isequaltostring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:46:02.597

使用以下 if 条件...

```
if([day isEqualToString:@"1"]){
   // your code
}... 
```

像这样使用所有..

这可能会帮助你..

# asp.net-mvc-3 - 实体框架写入未知数据库

> ID：11281079
> 
> 赞同：2
> 
> 时间：2012-07-01T09:59:52.583
> 
> 标签：asp.net-mvc-3, entity-framework

我对 EF 还很陌生，对我的解决方案发生了什么感到很困惑。

我处于我的代码似乎正在运行但更改没有写入我期望的数据库的情况。

我正在使用 Web Developer 2010 和 SQL 2008，代码优先方法，但选择在数据库中进行自己的更改并手动确保我的类正确匹配。

事情似乎没问题，直到我遇到一个错误，即 db 哈希不是实体框架所期望的，所以我查看了 modelBuilder.Conventions.Remove(); 这是不可用的 - 似乎在更高版本中不存在。所以，我想如果以后的版本不做这个检查，我会继续删除我对 EF 4 的引用并将 4.3 dll 放在它的位置。我想我也最终删除并重命名了我的数据库。那没有用，所以我跟进了我在 Scott Gu 的博客上找到的关于将 dbContext 命名为与数据库相同的内容，这似乎有帮助。

但是，我现在遇到了最奇怪的情况。我的代码正在运行，数据正在保存，但它没有保存到我的数据库中。事实上，我正在数据库上运行配置文件跟踪，它甚至似乎都没有尝试连接。我也可以将我的连接字符串更改为无效的内容，但我的代码将愉快地运行，存储数据#somewhere#

有什么想法吗？它可能正在使用我不知道的本地数据库或缓存吗？我应该重新开始我的小项目并假装这从未发生过吗？那应该是专业的方法吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:38:00.677

我建议使用 Database first 方法，如果你有你的`Database set`，或者想要**最大程度地控制 database**。

# android - 无法理解为什么我在这段代码中出现错误？

> ID：11281082
> 
> 赞同：0
> 
> 时间：2012-07-01T10:00:09.803
> 
> 标签：android, onclicklistener

```
button.setOnClickListener(new OnClickListener() {  
@Override  
public void onClick(View v) {  
db.update();  
}  
}); 
```

> 在第 1 行 ---> 建议将 setonclicklistener 转换为 setkeylistener 并在第 3 行删除覆盖注释，但它应该在那里找不到错误帮助我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:12:10.180

使用`@Override`on不是强制性的`public void onClick(View v)`，但可能是验证您没有违反其签名的一个很好的理由。但是，如果您选择使用`@Override`，请确保您的项目与 Java 1.6 兼容。如果没有，您可能会收到“...必须覆盖超类方法”错误。要启用此功能，请右键单击 Eclipse 中的项目文件夹，然后`Properties`在底部选择。然后转到`Java Compiler`并`1.6`从顶部的下拉菜单中选择 ( `Compiler compliance level`)。

还要确保您使用的是`View`s `OnClickListener`：

```
button.setOnClickListener(new View.OnClickListener() {
    @Override   
    public void onClick(View v) {
         db.update();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:10:29.620

采用

```
button.setOnClickListener(new View.OnClickListener() {  
@Override  
public void onClick(View v) {  
db.update();  
}  
}); 
```

并确保您正在导入`import android.view.View.OnClickListener;`包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T10:15:52.010

您可能需要像这样在 OnClickListener 前面添加 View：

```
button.setOnClickListener(new View.OnClickListener() {  
  @Override  
  public void onClick(View v) {  
    db.update();  
  }  
}); 
```

另一个潜在问题：OnClick 中的代码将在 UI 线程中运行，更新数据库可能是一个漫长且阻塞的操作，因此您不应该在 UI 线程中执行此操作。而是创建一个新线程。

# android - 多平台 Cocos2d-x 项目

> ID：11281087
> 
> 赞同：2
> 
> 时间：2012-07-01T10:01:01.317
> 
> 标签：android, ios, android-ndk, cocos2d-x

我想从头开始一个新项目，我想在 android 和 ios 平台上发布它。我遇到了 cocos2d-x，但没有完全理解。谁能指导我，是否可以在 cocos2d-x 中创建 c++ proj 并将相同的 proj 转换为 android 和 ios？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:54:11.003

请参考[http://gameit.ro/2012/01/creating-an-iphone-and-android-cocos2d-x-hybrid-project-updated/](http://gameit.ro/2012/01/creating-an-iphone-and-android-cocos2d-x-hybrid-project-updated/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T14:13:00.753

在 cocos2d-x 2.1.2 之前，你仍然可以在 VS 中使用模板。但是，您只能使用python创建项目

1.  安装python 2.7
2.  在 Windows 中打开命令行
3.  转到您的 cocos2d-x-2.1.5\tools\project-creator 文件夹
4.  运行 create_project.py。用法：

> create_project.py -project YourProjectName -package com.example.PakcageName -language cpp

-语言选项：[cpp | 卢阿 | javascript]

您的项目将在 cocos2d-x-2.1.5\projects 中创建

*   Windows：找到`proj.win32`，打开*** .sln
*   Android：找到`proj.android`，导入eclipse
*   iOs：找到`proj.ios`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T08:18:11.703

对于使用 cocos2d-x 的多平台开发，您还可以考虑使用[CocosBuilder](http://cocosbuilder.com) v3.1 和[javascript 绑定](http://www.cocos2d-x.org/boards/20/topics/9696)（请参阅[本教程](http://2sa-studio.blogspot.fr/2013/04/setup-cross-platform-project-with.html)）。

# javascript - iframe 动态 src

> ID：11281089
> 
> 赞同：0
> 
> 时间：2012-07-01T10:01:07.090
> 
> 标签：javascript, html, iframe

我想使用 javascript 获取更新的 iframe 网址？

像这样：

```
<iframe src="http://yahoo.com" id="ifrm" onload="iframeurl()" ></iframe>
<script>
function iframeurl() {
var ifrm = document.getElementById("ifrm");
alert(ifrm.src);
}
</script> 
```

但上面的代码不起作用。我怎样才能做到这一点？我将在 iframe 中使用外部链接，该链接未托管在我使用上述代码的同一域中。

请帮忙。

谢谢

再次感谢。[http://yahoo.com](http://yahoo.com)只是一个例子。同样，我的域是 szacpp.com，我需要获取 other.com 的链接。你的意思是我需要将 htaccess 放在 other.com 中，而我没有访问域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:38:17.523

当页面在 iframe 内发生变化时，iframe的`src`属性**不会**更新。

您唯一的选择是查询 iframe 中的文档，但是只有当 iframe 中的页面来自同一个域时才有效（否则您会遇到[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)）

**更新**

**如果**您有权访问`other.com`，那么您应该能够`Access-Control-Allow-Origin`在`.htaccess`文件中进行设置（假设您使用的是使用该文件系统的服务器）。

你会发现更多的信息.​​..

*   [http://www.w3.org/TR/cors/#access-control-allow-origin-response-header](http://www.w3.org/TR/cors/#access-control-allow-origin-response-header)
*   [http://enable-cors.org/](http://enable-cors.org/)
*   [访问控制允许来源多个来源域？](https://stackoverflow.com/questions/1653308/access-control-allow-origin-multiple-origin-domains)

如果您**无法**访问，`other.com`那么您只是不走运。您将无法知道新页面是什么，`src`因为. 由于我（或更准确地说，昆汀）之前提到的[相同的源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您将无法使用 JavaScript 。`iframe``iframe`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-01T10:41:00.800

尝试这个 ：

```
<iframe src="http://yahoo.com" id="ifrm" onload="iframeurl()" ></iframe>
<script>
function iframeurl() {
var ifrm = parent.document.getElementById("ifrm");
alert(ifrm.src);
}
</script> 
```

# apache-flex - 结果处理程序无法控制与 Flex 4 一起使用的 parsley 3 (BlazeDS + Spring)

> ID：11281092
> 
> 赞同：0
> 
> 时间：2012-07-01T10:01:34.197
> 
> 标签：apache-flex, remoting, blazeds, parsley

我将 parsley 3 与 Flex 4 (AIR) 一起用于我的一个应用程序。当我进行远程调用时，我正在调度一个事件，该事件到达命令类，然后到达 Java 层服务。直到这里一切正常。Java 层进行一些调用等并返回结果，但我的结果处理程序（或故障处理程序）没有获得控制权。

```
 Project
          bin-debug
          libs
              parsley-core-3.0.0.swc
              parsley-flex-3.0.0.swc
              parsley-xml-3.0.0.swc
              spicelib-commands-3.1.1.swc
              spicelib-reflect-3.0.0.swc
              spicelib-util-3.1.0.swc
              spicelib-xml-mapper-3.0.2.swc
         Main.mxml
         ProjectEvent.as
          LoadProjectsCommand
          ProjectPM.as 
```

和其他东西。

命令类获得控制权并且还能够调用 java 服务。代码如下：

```
package 
{
    import mx.collections.ArrayCollection;
    import mx.controls.Alert;
    import mx.rpc.AsyncToken;
    import mx.rpc.events.FaultEvent;
    import mx.rpc.events.ResultEvent;
    import mx.rpc.remoting.RemoteObject;

    /*http://www.spicefactory.org/parsley/docs/3.0/manual/managedcommands.php*/
    public class LoadProjectsCommand
    {
        [Inject(id="projectRemoteService")]
        public var projectRemoteService:RemoteObject;

        [Inject]
        public var model:ProjectScreenPM;

        public function execute(event:ProjectEvent):AsyncToken
        {
            return projectRemoteService.getAllProjectsWithSprintsInSystem() as AsyncToken;
        }

        public function result(event:ResultEvent):void
        {
            Alert.show("Result");
        }
        public function fault(event:FaultEvent):void
        {
            Alert.show("Fault in retrieving projects","Error");
        }
    }
} 
```

我已经验证了 Java 服务调用中的一切都很好。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:50:18.093

您可能会发现该`result`方法没有被调用，因为该命令正在引发错误。

欧芹命令中的失败方法被调用`error`，而不是`fault`，所以你的`fault`方法永远不会被调用。

`fault`将方法重命名为`error`，看看是否会发生变化。

# shell - 使用 wget 下载具有不同本地名称的文件

> ID：11281093
> 
> 赞同：0
> 
> 时间：2012-07-01T10:01:44.773
> 
> 标签：shell, sed, awk, wget

嗨，我有一个文本文件，其中给出了下载链接，例如-

```
http://www.example.com/10.10.11/abc.jpg
http://www.example.com/10.10.12/abc.jpg
http://www.example.com/10.10.13/abc.jpg 
```

这里 10.10.* 是图像的日期。

我需要使用 wget 下载所有图像，其中图像名称将是相应的日期（例如 10.10.111.jpg）。

**PS。**我尝试使用：

```
wget -i download.txt 
```

那么，有什么解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:05:23.463

我建议使用该`-O`选项一个一个地下载文件的批处理脚本，并使用一些 sed/awk 魔法来获得正确的名称

但是要小心！给定`-O`选项，您*必须*按文件调用 wget

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:04:55.570

您可以指示 Wget基于 URL[创建子目录，然后在下载完成后进行重命名。](http://www.gnu.org/software/wget/manual/wget.html#Directory-Options)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T10:21:30.800

这应该可以解决问题。

```
#!/bin/sh
while read url; do
   urldir=${url%/*}
   dir=${urldir##*/}
   wget -O $dir.jpg $url
done < download.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T10:38:40.227

这可能对您有用：

```
sed '\|/\([^/]*\)/[^/]*\1[^/.]*.jpg|!d' download.txt | wget -i - 
```

解释：

过滤`download.txt`文件以仅包含您需要的那些文件，然后将它们传递给`wget`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T17:20:04.283

我开发了一个脚本来执行这个[bulkGetter](http://esausilva.com/2012/10/20/bulkgetter-a-script-wrapped-around-wget/)。超级好用，你只需要一个包含所有你想下载的链接的输入文件，并使用选项“-rb”（参考链接）。

# android - 以编程方式显示一个 WebView，其下方有一个 TextView

> ID：11281094
> 
> 赞同：1
> 
> 时间：2012-07-01T10:02:15.437
> 
> 标签：android, android-layout, webview, textview

以下 XML 实现似乎工作正常：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <WebView
        android:id="@+id/chatView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <EditText
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </EditText>
</LinearLayout> 
```

但是，下面的 Java 实现没有（在 之后的底部有一个很小的空间`WebView`，但`TextView`是不可见的。）

```
Context mContext = getActivity();

LinearLayout view = new LinearLayout(mContext);
view.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
view.setOrientation(LinearLayout.VERTICAL);

WebView web (new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, 1f));
web.loadUrl("http://www.google.com");

TextView text = new TextView(mContext);
text.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

view.addView(web);
view.addView(text); 
```

例子：

![<code>TextView</code> 应该是底部的后退空间，但当然更高。](../Images/1a4ae02ac1c36cba647b5213bba216be.png)

`TextView`应该是底部黑色空间的位置，但当然更高。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T10:10:22.467

如果您尝试`WebView`调整周围的大小`TextView`（我假设这是您想要的，因为您拥有该`android:weight`属性），请确保将高度设置为“ `0dp`”而不是“ `fill_parent`”。否则，`WebView`将填写父项，您`TextView`将不会显示。

此外，由于`TextView`' 的高度设置为“ ” `wrap_content`，如果你想看到它，你实际上需要那里的内容。设置文本后查看它是否显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:07:37.927

我认为你必须在 TextView“文本”上设置一些文本

类似这样`text.setText("This is text ")`

# android - 使用 KSOAP2 从 Eclipse 调用 Web 方法

> ID：11281100
> 
> 赞同：1
> 
> 时间：2012-07-01T10:03:06.137
> 
> 标签：android, eclipse, web-services, ksoap2

我使用 Visual Studio 创建了一个 Web 服务并对其进行了测试，它运行良好。我正在尝试从 Eclipse 中调用 Web 方法。我没有收到任何错误，但问题是没有任何反应。它应该将从用户获取的值插入到数据库中。我在下面给出了java类和web方法。我究竟做错了什么？请帮忙

////Java类调用传入值的web方法/////

```
public class Registration extends Activity{
private static final String SOAP_ACTION = "http://tempuri.org/register";
private static final String OPERATION_NAME = "register";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://10.0.2.2:54714/WebSite1/Service.asmx";

Button sqlRegister;
EditText  sqlFirstName,sqlLastName,sqlEmail,sqlMobileNumber,sqlCurrentLocation,sqlUsername,sqlPassword;

@Override
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.registration);
sqlFirstName = (EditText) findViewById(R.id.etFname);
sqlLastName = (EditText) findViewById(R.id.etLname);
sqlEmail = (EditText) findViewById(R.id.etEmail);
sqlMobileNumber = (EditText) findViewById(R.id.etPhone);
sqlCurrentLocation = (EditText) findViewById(R.id.etCurrentLoc);

sqlUsername = (EditText) findViewById(R.id.etUsername);
sqlPassword = (EditText) findViewById(R.id.etPwd);

sqlRegister = (Button) findViewById(R.id.bRegister);
sqlRegister.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        switch (v.getId()){
        case R.id.bRegister:
             try{
                String firstname = sqlFirstName.getText().toString();
                String lastname = sqlLastName.getText().toString();
                String emailadd = sqlEmail.getText().toString();
                String number = sqlMobileNumber.getText().toString();
                String loc = sqlCurrentLocation.getText().toString();
                String uname = sqlUsername.getText().toString();
                String pwd = sqlPassword.getText().toString();

                SoapObject Request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);

                PropertyInfo pi = new PropertyInfo();
                pi.setName("fname");
                pi.setValue(firstname);
                pi.setType(int.class);
                Request.addProperty(pi);

                PropertyInfo pi2 = new PropertyInfo();
                pi2.setName("lname");
                pi2.setValue(lastname);
                pi2.setType(int.class);
                Request.addProperty(pi2);

                PropertyInfo pi3 = new PropertyInfo();
                pi2.setName("email");
                pi2.setValue(emailadd);
                pi2.setType(int.class);
                Request.addProperty(pi3);

                PropertyInfo pi4 = new PropertyInfo();
                pi2.setName("num");
                pi2.setValue(number);
                pi2.setType(int.class);
                Request.addProperty(pi4);

                PropertyInfo pi5 = new PropertyInfo();
                pi2.setName("locID");
                pi2.setValue(loc);
                pi2.setType(int.class);
                Request.addProperty(pi5);

                PropertyInfo pi6 = new PropertyInfo();
                pi2.setName("username");
                pi2.setValue(uname);
                pi2.setType(int.class);
                Request.addProperty(pi6);

                PropertyInfo pi7 = new PropertyInfo();
                pi2.setName("password");
                pi2.setValue(pwd);
                pi2.setType(int.class);
                Request.addProperty(pi7);

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(Request);
                AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(SOAP_ADDRESS);
                try
                {
                    androidHttpTransport.call(SOAP_ACTION, envelope);
                    SoapObject response = (SoapObject)envelope.getResponse();
                    int result =  Integer.parseInt(response.getProperty(0).toString());
                    if(result ==1){
                        Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();
                    }
                    else
                    {
                        Toast.makeText(Registration.this, "Try Again", Toast.LENGTH_LONG).show();
                    }
                }
                catch(Exception e)
                {
                   e.printStackTrace();
                }
            break;
        }
      }
    });
} 
```

}

///Visual Studio 中的 Web 方法////

```
 [WebMethod]
    public int register(string fname, string lname, string email, string num, int locID,string username,string password)
{
    SqlConnection conn;
    conn = ConnectionManager.GetConnection();
    conn.Open();
    string cmdregister = "INSERT into [User] values(@fname,@lname,@email,@num,@locID)";
    SqlCommand sqlCommand = new SqlCommand(cmdregister, conn);
    sqlCommand.CommandType = CommandType.Text;

    sqlCommand.Parameters.Add("@fname", SqlDbType.Text).Value = fname;
    sqlCommand.Parameters.Add("@lname", SqlDbType.Text).Value = lname;
    sqlCommand.Parameters.Add("@email", SqlDbType.Text).Value = email;
    sqlCommand.Parameters.Add("@num", SqlDbType.Text).Value = num;
    sqlCommand.Parameters.Add("@locID", SqlDbType.Int).Value = locID;
    sqlCommand.ExecuteNonQuery();

    string cmdlogin = "INSERT into [Login] values(@username,@id,@password)";
    SqlCommand sqllogin = new SqlCommand(cmdlogin, conn);
    sqllogin.CommandType = CommandType.Text;

    sqllogin.Parameters.Add("@username", SqlDbType.Text).Value = username;
    sqllogin.Parameters.Add("@password", SqlDbType.Text).Value = password;
    sqllogin.ExecuteNonQuery();
    conn.Close();
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:02:57.200

我找到了问题所在，感谢某人。

1）我用过：

```
AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(SOAP_ADDRESS); 
```

相反，它应该是：

```
HttpTransportSE httptransport = new HttpTransportSE(SOAP_ADDRESS); 
```

2）我用过：

```
 PropertyInfo pi = new PropertyInfo();
            pi.setName("fname");
            pi.setValue(firstname);
            pi.setType(int.class);
            Request.addProperty(pi); 
```

相反，它应该是：

```
request.addProperty("fname", String.valueOf(firstname)); 
```

对于其他文本字段也是如此

# postgresql - 多列之间的匹配模式

> ID：11281103
> 
> 赞同：4
> 
> 时间：2012-07-01T10:03:18.940
> 
> 标签：postgresql, pattern-matching

我有两列说`Main`和`Sub`。（它们可以是同一张桌子，也可以不是）。

`Main`是长度为 20`Sub`的 varchar，长度为 8 的 varchar。
`Sub`始终是**的**子集，`Main`并且是 的最后 8 个字符`Main`。

我可以成功地设计一个查询来匹配模式使用`substr("Main",13,8)`

询问：

```
select * from "MainTable"
 where substr("MainColumn",13,8) LIKE (
   select "SubColumn" From "SubTable" Where "SubId"=1043); 
```

但我想在查询中使用 Like、%、_ 等，以便我可以松散地匹配模式（不是全部 8 个字符）。

问题是我该怎么做。？！

我知道下面的查询是**完全错误**的，但我想实现这样的目标，

```
Select * from "MainTable"
 Where "MainColumn" Like '%' Select "SubColumn" From "SubTable" Where "SubId"=2' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T13:28:11.950

到目前为止的答案未能解决您的问题：

> 但我想在查询中使用 Like、% 、 _ 等，以便我可以松散地匹配模式（不是全部 8 个字符）。

无论您使用`LIKE`还是匹配整个字符串（并且字符串*中*`=`没有通配符），这几乎没有任何区别。要使搜索模糊，您需要*替换*部分模式，而不仅仅是添加。

 **例如，要匹配 的最后 7 个（而不是 8 个）字符`subcolumn`：

```
SELECT *
FROM   maintable m
WHERE  left(maincolumn, 8) LIKE 
       ( '%' || left((SELECT subcolumn FROM subtable WHERE subid = 2), 7)); 
```

我使用更简单的`left()`（在 Postgres 9.1 中引入）。
您`could`将其简化为：

```
SELECT *
FROM   maintable m
WHERE  left(maincolumn, 7) =
       (SELECT left(subcolumn,7) FROM subtable WHERE subid = 2); 
```

但是，如果您使用我在下面提到的特殊索引，您就不会这样做，因为功能索引中的表达式必须精确匹配才能使用。

您可能对扩展感兴趣[`pg_tgrm`](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)。

在 PostgreSQL 9.1 中，每个数据库运行一次：

```
CREATE EXTENSION pg_tgrm; 
```

两个原因：

*   它提供[**相似性算子`%`**](http://www.postgresql.org/docs/current/interactive/pgtrgm.html#PGTRGM-OP-TABLE)。有了它，您可以构建智能相似性搜索：

    ```
    --SELECT show_limit();
    SELECT set_limit(0.5); -- adjust similarity limit for % operator

    SELECT *
    FROM maintable m
    WHERE left(maincolumn, 8) %
          (SELECT subcolumn FROM subtable WHERE subid = 2); 
    ```

*   它为两者提供[**索引支持**](http://www.postgresql.org/docs/current/interactive/pgtrgm.html#AEN137099)`LIKE``%`

    如果读取性能比写入性能更重要，我建议您创建一个[功能性](http://www.postgresql.org/docs/current/interactive/indexes-expressional.html)GIN 或 GiST 索引，如下所示：

    ```
    CREATE INDEX maintable_maincol_tgrm_idx ON maintable
    USING gist (left(maincolumn, 8) gist_trgm_ops); 
    ```

    该索引支持任一查询。请注意，它会带来一些写入操作的成本。
    [此相关答案中类似案例的快速基准](https://stackoverflow.com/a/11250001/939860)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T10:32:29.883

尝试

```
SELECT t1.* from "Main Table" AS t1, "SubTable" AS t2
 WHERE t2.SubId=1043
   AND substr(t1.MainColumn, 13, 8) LIKE "%" || CAST(t2.SubColumn as text); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T11:02:07.457

a 的参数[`LIKE`](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-LIKE)是一个普通的字符串，所以所有的字符串操作在这里都是有效的。在您的情况下，您需要将通配符与目标子字符串连接起来，就像@bksi 建议的那样：

```
... LIKE '%'||CAST("SubColumn" AS test) ... 
```

但请注意，此类模式（以`%`通配符开头的模式）性能不佳。看看[PostgreSQL LIKE 查询性能变化](https://stackoverflow.com/questions/1566717/postgresql-like-query-performance-variations)。

我会推荐：

*   坚持目前的`substr("MainColumn", 13, 8)`做法；
*   避免`LIKE`使用相等比较 ( `=`) 代替（尽管如果`LIKE`模式不包含通配符，它​​们是相等的，但更容易阅读查询）；
*   通过以下方式在“MainTable”上构建[表达式索引：](http://www.postgresql.org/docs/current/interactive/sql-createindex.html)

    ```
    CREATE INDEX i_maincolumn ON "MainTable" (substr("MainColumn", 13, 8)); 
    ```

在我看来，这种组合会表现得更好。

并为表/列使用小写名称，这样您就可以避免双引号。**

# asp.net - ASP.NET 配置文件

> ID：11281104
> 
> 赞同：0
> 
> 时间：2012-07-01T10:03:38.297
> 
> 标签：asp.net, asp.net-profiles

我有这个：

```
protected void Page_Load(object sender, EventArgs e)
{
   nome_Txt.Text = Profile.dados_pessoais.nome;
} 
```

```
protected void save_Click(object sender, EventArgs e)
{
   Profile.dados_pessoais.nome = nome_Txt.Text;
} 
```

如果`Profile.dados_pessoais.nome`是空的，`nome_txt.Text`也是空的。当我更改`nome_Txt.Text`为`teste`例如，当我单击按钮时`nome_Txt.Text`为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:23:47.650

该`Page_Load`事件在按钮单击事件之前运行，因此您始终将文本框分配为空值。

要解决此问题，请不要在回发时填充文本框：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        nome_Txt.Text = Profile.dados_pessoais.nome;
    }
} 
```

正如评论中所述，您可能必须在更改配置文件后保存配置文件，否则下次加载页面时将不会保存：

```
protected void save_Click(object sender, EventArgs e)
{
    Profile.dados_pessoais.nome = nome_Txt.Text;
    Profile.Save()
} 
```

# c# - 如何在一定程度上读取 xml 文件，以便以后可以将其写入另一个 xml 文件

> ID：11281106
> 
> 赞同：0
> 
> 时间：2012-07-01T10:04:36.883
> 
> 标签：c#, xml, xml-parsing, .net-2.0

很多类似的线程并不是我想要的，或者它们处理的是 Linq。我正在使用**.NET 2.0**

我有一个更像模板的 XML 文件。我需要将 XML 写入另一个文件，但我需要它来引用模板 XML 文件以进行初始格式设置。

**像这样：**

我的模板文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<tt xmlns="http://www.w3.org/2006/04/ttaf1" xmlns:tts="http://www.w3.org/2006/04/ttaf1#styling" xml:lang="en">
  <head>
    <styling>
      <style id="s1" tts:fontFamily="SchoolHouse Cursive B" tts:fontSize="16" tts:fontWeight="normal" tts:fontStyle="normal" tts:textDecoration="none" tts:color="white" tts:backgroundColor="blue" tts:textAlign="center" />
      <style id="s2" tts:fontFamily="SchoolHouse Cursive B" tts:fontSize="16" tts:fontWeight="normal" tts:fontStyle="normal" tts:textDecoration="none" tts:color="yellow" tts:backgroundColor="black" tts:textAlign="center" />
   </styling>
  </head>
<body id="s1" style="s1">
  <div xml:lang="uk">
      <p begin="00:00:00" end="00:00:04">Hi! </p>
      <p begin etc............</p>
  </div>
 </body>
</tt> 
```

我需要阅读第一部分`<p begin="00:00:00" end="00:00:04">Hi! </p>`（不包括该行）。我需要进入任何 .NET 类型，以便可以将其传递给将它们写入另一个 XML 文件的函数。

**注意：我不想逐个节点或逐个元素地读取模板 XML 文件。我想要一个通用的解决方案，因为 XML 的初始部分可以是任何东西。**

我试过了：

```
XmlTextReader reader = new XmlTextReader(templateFile);
var list = new Something(); //what type would be ideal
while (reader.Read())
{
    if (reader.LocalName == "p")
       break;

    if (reader.LocalName == "")
       continue;

    list.Add(??); 
    //how do I read the rest here?
} 
```

我怎么能写出同样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:24:34.253

似乎您想以非 XML 有效的方式使用 XML 文件。没有任何 XML 阅读器或工具可以让您使用未封闭`<body>`和`<div>`标签。

我会考虑将其视为文本文件，但随后您将依赖源代码中的换行格式。

缺点是您在编写内容时需要继续将其用作文本，但我没有看到解决方法。

# java - 使用测试帐户时出现您的订单无法处理错误

> ID：11281112
> 
> 赞同：1
> 
> 时间：2012-07-01T10:05:32.017
> 
> 标签：java, android, in-app-purchase, in-app-billing

我正在尝试在我的应用中测试应用内计费。我尝试使用谷歌提供的静态代码，它工作得很好。现在我想提高级别并使用测试帐户进行检查。我已经向我的开发者帐户添加了一个测试帐户，当测试帐户尝试购买内容（显示项目）时，它会告诉：`Your order could not be processed. Please try again`。我前几天注册了这个测试账号，还是没有。

有没有人遇到过这个问题并知道如何解决？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:07:02.827

您不能购买自己的应用程序。 [http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=141659](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=141659)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:25:20.010

您应该确保您的应用已使用发布密钥进行签名。此外，如果您将 APK 上传到控制台只是为了启用应用内产品（未发布），请确保您的测试应用程序具有相同的 android:versionCode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T06:00:14.250

我今天遇到了类似的问题，是的，这是根据 Google 的政策，即不允许人们使用您在 Google Play 开发者控制台中使用的相同帐户购买自己的应用程序。

要解决这个问题：

1.  转到您的 Android 设备的设置
2.  转到帐户 转到 Google 帐户
3.  删除您在 Google Play 开发者控制台中使用的 Google 帐户
4.  添加一个新的/辅助 Google 帐户（如果您没有第二个 Google 帐户，则必须先创建一个）。
5.  为此 Google 帐户添加您的付款方式（即信用卡）
6.  前往 Google Play 商店购买您的应用！
7.  在设置 -> 帐户中重新添加您原来的 Google 帐户。

我想以用户下载和安装我的应用程序时的方式体验事物，所以经历相同的过程对我来说很重要。

# gwt - Sencha GXT 2.x Spinner Field

> ID：11281113
> 
> 赞同：0
> 
> 时间：2012-07-01T10:05:54.827
> 
> 标签：gwt, gxt

我在 GXT 2.0 中的 SpinnerField 遇到了一些问题。首先，当用户更改 1.0、2.0 时它会显示双打我需要它来显示 Ints 1、2、3 等。

其次，对于我的生活，我无法弄清楚如何为其添加更改侦听器。就像用户进行更改一样，它会弹出一个带有值的警报：仅用于演示目的。

我浏览了文档，但找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:19:48.950

尝试将此添加到微调器字段：

```
spinner.setFormat(NumberFormat.getFormat("0"));
spinner.addListener(Events.KeyPress, new KeyListener() {...});
spinner.addListener(Events.Change, new Listener<BaseEvent>(){...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:29:15.687

我会加：

maxNumberMsgField = new SpinnerField(); maxNumberMsgField.setFieldLabel(FeedbackAuthoringStrings.MAX_NUM_MSGS_PROV_LABEL); maxNumberMsgField.setIncrement(1);
maxNumberMsgField.getPropertyEditor().setType(Integer.class); maxNumberMsgField.getPropertyEditor().setFormat(NumberFormat.getDecimalFormat());
maxNumberMsgField.setMinValue(1);
maxNumberMsgField.setMaxValue(20);

# class - 为什么可以在类型字段中混入类？

> ID：11281115
> 
> 赞同：8
> 
> 时间：2012-07-01T10:06:30.643
> 
> 标签：class, scala

为什么我可以说一个类型字段具有一个类的类型，其中混合了另一个类（当一个类中只能混合特征时）？

例子：

```
scala> class A
defined class A

scala> class B extends A
defined class B 
```

`B`不允许混入`A`：

```
scala> new A with B
<console>:10: error: class B needs to be a trait to be mixed in
             new A with B
                        ^ 
```

但这是可能的：

```
scala> class E {type T = A with B}
defined class E

scala> new E
res1: E = E@1f2bc83 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T12:55:51.957

mixin 实例化和复合类型定义之间存在差异。首先类型`A with B`存在并且正是类型`B`，唉，在scala中写是完全合法的

```
val x: A with B = new B 
```

原样

```
val y: Any with AnyRef with A with B = new B 
```

因为它描述了完全相同的类型。您只是在可以分配给该类型变量的值类型中引入限制。当然，这些限制在这种情况下总是成立的。

此外，您必须记住，Scala 不一定需要一个类型来存在——即，底部类型`Nothing`可能根本不被实例化。但是作为`Nothing`可以在 Scala 中表达的每种类型的子类型，编写如下表达式甚至是有效的

```
def foo: AnyRef with AnyVal = sys.error("IMPOSSIBRU!") 
```

`Nothing`是`AnyRef with AnyVal`根据定义的子类型，因此该声明类型检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T10:32:02.830

这称为[复合类型](http://www.scala-lang.org/node/110)，与特征无关。它允许您表示一个类型是其他几种类型的子类型。

有关它们可能出现的更多信息，请参阅“类型处理”部分中的[Scala 标记信息](https://stackoverflow.com/tags/scala/info)。

# php - sql 显示行 0 - 0（共 1 行）导致 mysql_num_rows 出错

> ID：11281116
> 
> 赞同：2
> 
> 时间：2012-07-01T10:06:36.727
> 
> 标签：php, sql, session, mysql-num-rows

是的，我已经确认查询`SELECT * FROM mbgeust WHERE user_name = '{$name}' AND user_pass = SHA1('{$pass}')`返回了一个结果，但它返回说“显示行 0 - 0（总共 1 行，查询耗时 0.0005 秒）”，`mysql_num_rows($mysql)`尽管查询返回一行，但不是第 0 - 1 行，因为返回 0这是我的整个代码

```
<?php
    session_start();
    include './inc/sql.php';
    if(!isset($_SESSION['loggedin'])){
        if(isset($_POST['submit'])){
            $name = mysql_real_escape_string($_POST['username']);
            $pass = mysql_real_escape_string($_POST['password']);
            sql_start();
            $mysql = mysql_query("SELECT * FROM mbgeust WHERE user_name = '{$name}' AND user_pass = SHA1('{$pass}')")
                or die ("Error: ". mysql_error(). " with query ". $mysql);
            if(mysql_num_rows($mysql) == 1){
                $_SESSION['loggedin'] = TRUE;
                $_SESSION['name'] = $name;
                header('refresh:3; URL = /');
                die('You are now logged in!');
            }
            else{
                header('refresh:3; URL = /');
                die ('Password was probably incorrect!');
            }
            sql_stop();
            }
        echo "<form action='./' method='POST'>
        Username: <br/>
        <input type='text' name='username' /><br/>
        Password: <br/>
        <input type='password' name='password' /><br/>
        <input type='submit' name='submit' value='Login'/>
        </form>";
    }
    else {
        include 'main.php';
    }
?> 
```

和 sql.php

```
<?php
    function sql_start(){
        global $con;
        $con = mysql_connect("mackinnonsbakery.co.uk.mysql","mackinnonsbaker","UE9ux3cZ")
            or die('Could not connect: ' . mysql_error());
        mysql_select_db("mackinnonsbaker", $con)
            or die('Could not connect: ' . mysql_error());
    }

    function sql_stop(){
        global $con;
        mysql_close($con);
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:19:18.970

您在`mysql_real_escape_string`之前调用`sql_start()`，因此您没有活动的数据库连接 - 因此 `$name`并且`$pass`可能设置为`false`. 检查您的错误日志，您应该会看到警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:10:49.033

我已切换到 mysqli 并将 sql_start/sql_stop 更改为在页面的开头和结尾分隔包含的文件，如果有人知道如何在不移动到 mysqli 的情况下解决此问题，则可以对其进行排序，因为它将帮助其他人在这里是我目前的代码：

```
<?php
    session_start();
    include './inc/sql_start.php';
    if(!isset($_SESSION['loggedin'])){
        if(isset($_POST['submit'])){
            $name = $mysqli->real_escape_string($_POST['username']);
            $pass = $mysqli->real_escape_string($_POST['password']);
            $query = "SELECT * FROM mbgeust WHERE user_name = '{$name}' AND user_pass = SHA1('{$pass}')";
            if ($stmt = $mysqli->prepare($query)) {
                $stmt->execute();
                $stmt->store_result();
                if($stmt->num_rows == 1){
                    $_SESSION['loggedin'] = TRUE;
                    $_SESSION['name'] = $name;
                    header('refresh:3; URL = /');
                    die('You are now logged in!');
                }
                else{
                    header('refresh:3; URL = /');
                    die ('Password was probably incorrect!');
                }
                $stmt->close();
            }
        }
        echo "<form action='./' method='POST'>
        Username: <br/>
        <input type='text' name='username' /><br/>
        Password: <br/>
        <input type='password' name='password' /><br/>
        <input type='submit' name='submit' value='Login'/>
        </form>";
    }
    else {
        include 'main.php';
    }
    include './inc/sql_stop.php';
?> 
```

sql_start.php

```
<?php
    $mysqli = new mysqli("mackinnonsbakery.co.uk.mysql", "mackinnonsbaker", "UE9ux3cZ", "mackinnonsbaker");
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }
?> 
```

sql_stop.php

```
<?php
    $mysqli->close();
?> 
```

如果有人有真正的解决方案，请再次发布

# php - x-www-form-urlencoded 与 json HTTP POST

> ID：11281117
> 
> 赞同：19
> 
> 时间：2012-07-01T10:06:41.050
> 
> 标签：php, json, forms, curl, content-type

很难决定，
目前我正在使用 php lib curl 以 x-www-form-urlencoded 的形式发送数据

```
curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($this->arguments)); 
```

或者

```
curl_setopt($curl, CURLOPT_POSTFIELDS, $this->arguments); 
```

*第一个问题：*第二个似乎内容长度更大，第一个解决方案可能更好？

这对于平面消息很实用，例如：

```
{
    "name": "John",
    "token": "2121232145",
    "code": "7",
    "data": "Hello"
} 
```

但是我也可以有一个表示对象的数据字段，在这种情况下我是对它进行编码，但是这样做（url编码一个Json）是非常冗长和丑陋的消息，

另一方面，我尝试将其作为 application/json 内容类型发送

```
curl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($this->arguments)); 
```

小消息的内容长度较大，但嵌入 json，显然更好

但是 x-www-form-urlencoded 也接近我需要发送的表单数据，除非嵌入了 json

根据内容类型拥有 2 种不同的 servlet 解析方法并不优雅，那么还有其他选择吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-19T15:56:39.067

[在这里](http://www.ietf.org/mail-archive/web/oauth/current/msg02368.html)您可以阅读有关格式的类似讨论。

> 如果保证编码数据的结构是名称-值对的平面列表，x-www-form-urlencoded 似乎就足够了。如果结构可能（任意）复杂（例如嵌套列表或关联数组），那么一定要使用 JSON。

至于我，我是 KISS 专家。在您的情况下，JSON/XML/任何额外的时间、内存和 CPU 周期成本。x-www-form-urlencoded 数据结合了可读性和紧凑性，所以我敢打赌这是你的选择。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-19T13:06:59.610

`x-www-form-urlencoded`和 JSON 是不同的东西。虽然[x-www-form-urlencoded](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)只是用于将表单提交到服务器的默认内容类型，但 JSON 是基于文本和人类可读格式（标准），用于通过网络连接序列化和发送结构化数据。你不应该比较它们。

> 第二个似乎是更大的内容长度，第一个解决方案可能更好？

不，没有标记为“更好”的解决方案。就像 pinepain 所说，这真的取决于你发送什么样的数据以及如何解析/处理它。JSON 非常适合通过请求发送附加数据。

不要考虑内容长度。考虑您要发送和处理的数据和数据结构。如果您只想在请求之间发送和处理结构化数据并且数据大小不同，只需使用 JSON。它是为此而建的。

`Content-Length`两种方法之间的差异不会成为问题的一部分，因为您的应用不是 Facebook、Twitter 或 Google 之类的怪物。过早的优化是万恶之源。

# seo - 知道某些关键词的页面排名

> ID：11281120
> 
> 赞同：0
> 
> 时间：2012-07-01T10:07:01.697
> 
> 标签：seo, pagerank

我想知道某些关键词在我的页面上的页面排名。例如，我写了“2012 年最佳电影”我的页面确实出现了，但在第 30 到第 50 页。我想查询 Google 针对我的关键字提供的结果集中，以便我可以查看我的页面和我的竞争对手针对典型关键字的排名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:35:06.090

有几个 Web 服务提供此功能：[http](http://raventools.com/) ://raventools.com/或[http://seomoz.org/](http://seomoz.org/)

或者，您可以手动执行该任务。这是一个关于如何使用 Java 查询 google 搜索的示例：[How can you search Google Programmatically Java API](https://stackoverflow.com/questions/3727662/how-can-you-search-google-programmatically-java-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:38:36.200

我认为您可能会将 PageRank 与职位混淆。PageRank 是一种算法，Google 使用它来确定您网站的权限。这并不总是会影响某些关键字的位置。

有很多不错的程序和 Web 服务可供您使用，例如

```
http://raventools.com/ 
```

由于谷歌现在限制了执行的搜索量并对这些数据收费，大多数优质的免费网络服务都已关闭。

你可以看看：

```
http://www.semrush.com 
```

它是免费的，但您必须注册才能获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T05:43:19.370

您需要将您的网页 PageRank**和**网站 PR 与竞争对手进行比较。我们对网站 PR 的最佳指示是 HomePage PagRank。确保为适当的 Google 域执行此操作 - 美国 - Google.com - 英国 Google.co.uk 等 该技术在[http://www.keywordseopro.com](http://www.keywordseopro.com)上进行了更详细的描述。 您可以对每个关键字重复该技术。

# python - 使用 Cairo/Pycairo SVG 生成 Inkscape 组/图层？

> ID：11281126
> 
> 赞同：2
> 
> 时间：2012-07-01T10:08:21.050
> 
> 标签：python, svg, cairo, inkscape, pycairo

我希望能够将对象（填充的矩形、轮廓等）添加到 cairo SVG 上下文中，这样当我用 Inkscape 打开 SVG 文件时，每个对象都会被识别为一个单独的对象，这样我就可以移动/编辑它。理想情况下，我还想对在 Inkscape 中显示为“图层”的对象进行分组。

这是否可以通过 cairo API 来完成（在某种程度上），还是我必须单独生成每个元素，然后将它们全部拼接成 Inkscape SVG 格式？也许 cairo 不是这里的正确工具？那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:47:55.883

*Cairo 提供了一个用于渲染*SVG的 API ，但不用于生成它。

SVG 只是 XML，因此您可以使用任何现成的 XML 库来生成您的 SVG 内容。如果内容相当简单，并且您想要基于 python 的解决方案，我会推荐[lxml](http://lxml.de/)。在这种情况下，您将使用 Python 的[ETree](http://docs.python.org/library/xml.etree.elementtree.html) API 来生成 XML 内容。

另一方面，如果您生成的内容很复杂，例如您需要动态定位元素、计算组和/或文本的边界框以及其他复杂任务，那么我会推荐[Batik](http://xmlgraphics.apache.org/batik/)，它实现了 SVG DOM并提供了这样的方法。在这种情况下，您将使用 DOM API 来生成内容。以下是关于 DOM 的一些资源：

*   [http://www.w3.org/DOM/DOMTR](http://www.w3.org/DOM/DOMTR)
*   Java DOM 绑定：[http ://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/package-summary.html](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/package-summary.html)
*   DOM 的 SVG 扩展：http: [//www.w3.org/TR/SVG/svgdom.html](http://www.w3.org/TR/SVG/svgdom.html)

Batik is written in Java, and so the most straightforward approach would be to use Java to develop against it, but you could also use [Jython](http://www.jython.org/), which is Python for Java, if you prefer to stick with the python language.

# java - 使代码更具可读性

> ID：11281127
> 
> 赞同：3
> 
> 时间：2012-07-01T10:08:32.797
> 
> 标签：java, readability

我的应用程序中有两个名称相同的类，我无法重命名它们，其中一个来自 packageA，第二个来自 packageB，这个类的名称是 State，我必须在我的程序中的一个地方使用它，如下所示：

```
 Map<Integer,Set<org.omg.PortableServer.POAManagerPackage.State>> 
```

有什么办法（但使用这个类）使它更具可读性（稍微缩短它）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T10:14:44.863

可能从其中一个类派生以消除歧义。例如，在`POAState.java`：

```
import org.omg.PortableServer.POAManagerPackage.State;

public class POAState extends State {} 
```

然后：

```
Map<Integer,Set<POAState>> my_map; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:11:26.210

创建将仅具有`Set<org.omg.PortableServer.POAManagerPackage.State>`所有需要的`Set`方法的包装类。

客户端使用：

```
Map<Integer,GoodWrappingSetName> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T10:15:35.440

如果您`State`在同一段代码（*.java 文件）中使用两个不同的类，那么答案是“否”，Java 不提供简写符号。您必须明确并包含完整的包名称以消除歧义。

@dantuch 提出了一个有趣的想法，但不是包装这个类，如果你可以扩展其中一个，你可以创建一个空的子类，`State`它只是将它的所有实现推迟到父类。

```
public MyState extends State {
    // no implementation required
} 
```

然后你可以参考 MyState

# php - 如何搜索存储序列化的字符串

> ID：11281130
> 
> 赞同：0
> 
> 时间：2012-07-01T10:10:21.907
> 
> 标签：php, mysql

我想从此表中搜索计算机，当我将其存储在数据库中时，现在可以找到字符串并传递给查询，因此该字符串存在于数据库中，然后显示结果

我在做

1.  我从 url 中获取值 我的 url 看起来像 localhost\demo\article.php?filter=computer

    `$_GET['filter']`

2.  我的数据库是

    ```
    id | name |tag

    1  |java  |a:2:{i:0;s:8:"Computer";i:1;s:4:"Code"; 

    2  |dbms  |a:2:{i:0;s:8:"Computer";i:1;s:4:"dbms"; 

    3  |c     |a:2:{i:0;s:8:"elect";i:1;s:4:"Code"; 
    ```

现在我想获取计算机所在的所有行或代码

为此，我正在使用查询

```
$query1 = "SELECT * FROM $tableName WHERE tag='%".$_GET['filter']."%' "; 
```

但它没有显示具有计算机或代码的行..

**它就像 stackoverflow 标签过滤**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T10:19:44.320

解决你的问题是通过替换`=`所以`like`你的查询应该是

```
$query1 = "SELECT * FROM $tableName WHERE tag like '%".$_GET['filter']."%' "; 
```

这样做的更好方法是创建额外的两个表。一个将包含您的标签（可选），另一个将包含标签信息。

![在此处输入图像描述](../Images/9d98924387fe92cf04b47161272d92b6.png)

[这篇文章](http://www.itnewb.com/tutorial/Comprehensive-Guide-to-PHP-MySQL-Tag-Clouds-Includes-Demo)对你有很大帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T10:15:29.260

[标准化您的数据库](http://en.wikipedia.org/wiki/Database_normalization)，您将不再需要用螺丝刀转动钉子。

# java - Web.xml - 不将特定文件或 url 重定向到 servlet

> ID：11281133
> 
> 赞同：2
> 
> 时间：2012-07-01T10:10:29.737
> 
> 标签：java, apache, tomcat, servlets, web.xml

我想将所有连接 ( `/*`) 重定向到特定的 servlet，但特定文件 ( `someFile.xml`) 除外。

我在 web.xml 中有以下部分：

```
<servlet-mapping>
      <servlet-name>someServlet</servlet-name> 
      <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

我怎样才能修改它以便`/someFile.xml`不会映射到这个 servlet。

如果我不能使用`web.xml`，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:24:46.987

您可以创建一个 Servlet 并将其映射到接收 /someFile.xml。

```
 <servlet-mapping>
          <servlet-name>someServlet</servlet-name> 
          <url-pattern>/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
           <servlet-name>SomeFileServlet</servlet-name> 
           <url-pattern>/someFile.xml</url-pattern>
    </servlet-mapping> 
```

这样，除了 /someFile.xml 之外的所有请求都将转到 someServlet，而对 /someFile.xml 的请求将转到 SomeFileServlet。

```
**/* mapping in web.xml it answers all requests except other path mappings.** 
```

# c# - 在 c# 中转换通用 SQL 时间格式（所有变体）？

> ID：11281135
> 
> 赞同：5
> 
> 时间：2012-07-01T10:10:47.220
> 
> 标签：c#, .net, datetime, datetime-format, datetime-parsing

如果我在 c#*字符串中有这些通用**sql 有效日期*：

 *（每个日期可以在内部以不同的顺序排列）例如：

```
01 feb 2010
feb 01 2010
2010 01 feb
...
... 
```

我想将字符串日期转换为`DateTime`（c#）。（我希望能够转换上面列表中的每种格式）

虽然解析精确需要我`3!`组合，有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:21:02.503

我想我明白了... ![在此处输入图像描述](../Images/7cb9b7dd9f110a56b0535897899ef2af.png)

```
string[] str = new[] { "01 feb 2010","feb 01 2010","2010 01 feb","2010 feb 01","feb 2010 01" };
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US");
CultureInfo culture = CultureInfo.CreateSpecificCulture("en-US");                       
for (int i = 0; i < str.Length; i++)
{
    DateTime t = DateTime.Parse(str[i], culture);
    t.Dump();
} 
```*

# android - 重复的处理程序消息？

> ID：11281138
> 
> 赞同：1
> 
> 时间：2012-07-01T10:11:02.210
> 
> 标签：android, duplicates, handler

当我在后台多次调用 addAdapter() 时，有时我会收到一些重复的消息。例如，当我调用 addAdapter(item1, item2, item3...) 时，它会打印 item1, item2, item2...

```
ExaminationItem currentAddItem = null;

private void addAdapter(ExaminationItem item)
{
    currentAddItem = item;
    addhandler.sendEmptyMessage(1);
}

private Handler addhandler = new Handler() {
    @Override
    public void handleMessage(Message msg)
    {
        switch (msg.what) {
        case 1:
            if (currentAddItem != null) {
                _adapter.add(currentAddItem);
                Log.i(getClass().getName(), "---------------------------addhandler: currentAddItem._itemName = " + currentAddItem._itemName);
            }
            break;
        default:
            break;
        }

    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:37:42.220

这并不奇怪。每次调用`sendEmptyMessage()`时，都会将消息添加到线程的消息队列中。您没有将您的项目添加到队列中，您只是向 Handler 发送一条消息，以访问 Handler 处理消息时的任何值`currentAddItem`。它看不到您发送消息时的值。因此，您可能会同时看到跳过的项目和重复的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:40:49.220

```
private void addAdapter(ExaminationItem item)
{
    Message message = addhandler.obtainMessage();
    message.what = 1;
    message.obj = item;
    addhandler.sendMessage(message);
}

private Handler addhandler = new Handler() {
    public void handleMessage(Message msg)
    {
        switch (msg.what) {
        case 1:
            if (msg.obj != null) {
                _adapter.add((ExaminationItem) msg.obj);
                examination_scanner_detail_tv.setText("detect to keep fit.");
                Log.i(getClass().getName(), "addhandler: msg.obj = " + msg.obj);
            }
            break;
        default:
            break;
        }
    }
}; 
```

# ruby-on-rails - 注销后，如果我按下返回按钮，我可以看到需要登录的最后一页

> ID：11281141
> 
> 赞同：30
> 
> 时间：2012-07-01T10:11:30.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, browser-cache

我已经在我的 Web 应用程序中配置了设计。我对以下工作流程有疑问：

要访问管理面板，我需要登录。之后，我通常导航到我的网络应用程序的管理面板。当我单击注销时，它会将我重定向到根页面，这是我目前想要的行为。

奇怪的是在这个页面中开始，在上述操作之后，我点击浏览器的后退按钮，它显示了我缓存的最后一页。我的会话已被破坏，因为如果我单击刷新它会重定向我并提到登录以访问该页面，但我不希望能够看到浏览器的最后一个历史页面。

这怎么可能，我能做些什么来防止它？它与浏览器缓存有关吗？修复它的唯一方法是从登录页面中删除缓存以防止这种行为？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-03T17:20:52.733

您想设置页面的标题以防止缓存。你可以这样做：

```
 before_filter :set_cache_buster

  def set_cache_buster
    response.headers["Cache-Control"] = "no-cache, no-store, max-age=0, must-revalidate"
    response.headers["Pragma"] = "no-cache"
    response.headers["Expires"] = "Fri, 01 Jan 1990 00:00:00 GMT"
  end 
```

归功于[此线程](https://stackoverflow.com/questions/711418/how-to-prevent-browser-page-caching-in-rails)的第一个响应。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T19:10:24.823

您可以尝试告诉浏览器不要缓存内容，但这就是它的本质 - 尝试。

如果他们以前查看过该页面，那么您几乎无法强制无法再次查看该页面 - 此时您无法控制。

例如，可以下载页面的 HTML（这是他们查看页面时正在执行的操作），并且您也无法阻止他们截取屏幕截图。

也就是说，浏览器缓存将在某些（大多数？）情况下起作用，请参阅 Michael Frederick 的回答。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T10:31:12.260

这肯定与缓存有关。您必须相应地设置适当的 HTTP 标头。这可能有你需要的答案：[How to prevent browser page caching in Rails](https://stackoverflow.com/questions/711418/how-to-prevent-browser-page-caching-in-rails)

*   约翰内斯

# android - 如何在媒体播放器中播放字节数组中的视频

> ID：11281145
> 
> 赞同：4
> 
> 时间：2012-07-01T10:13:41.523
> 
> 标签：android, video, byte

我正在使用连接到我的安卓设备的 USB 设备

该设备向我发送一个包含视频帧的缓冲区，它会持续发送。

当我收到缓冲区时，我应该将特定的标头放入其中并将其作为 m4v 视频文件写入 sd 卡。

那么我应该在媒体播放器中播放它，到目前为止它工作正常，但我应该直播视频。一旦 USB 设备向我发送缓冲区，我就应该处理它并播放它，以便我可以显示视频。

我的问题是如何从字节缓冲区播放视频文件而不将其存储在 SD 卡中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-28T04:14:19.290

我知道自从提出问题以来已经有一段时间了，但我处于同样的情况，我有一个视频传输流通过 USB 连接。

看起来您需要创建一个扩展 MediaDataSource 并提供`readAt()`和`getSize()`方法的数据源。

我的理解是 Android 的 MediaPlayer，当你提供一个 URL/URI 作为数据源时（通过`setDataSource()`，处理所有网络以下载数据或从存储中检索数据，并拥有自己的 MediaDataSource 播放器用户。

我的计划是创建一个从 USB 设备获取传输流的服务，并不断更新我提供给 MediaPlayer 的自定义 MediaDataSource。

[这](https://github.com/jpxiong/platform_cts/blob/dd40d693dfc3030cf8e9b0bf9f450f2276feb9ca/tests/tests/media/src/android/media/cts/TestMediaDataSource.java)是我能找到的关于这个主题的唯一内容，这是一个为使用 MediaDataSource 和 MediaPlayer 进行测试而编写的测试。他们将文件中的视频读入字节数组，然后将该数组用于`readAt()`and`getSize()`方法。

我能找到的唯一其他资源是人们向 MediaPlayer 提供字符串，但没有涉及到自己的网络。另外，我很好奇恒定的视频流与固定大小的视频有何不同。

编辑：我写了一篇关于 MediaDataSource 以及如何开始使用它的博客文章。这是[链接](https://medium.com/@jacks205/implementing-your-own-android-mediadatasource-e67adb070731)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T17:14:09.867

我发现 jacks205 在 Closeable 中没有提到抽象方法 close()。我们还需要写close()，否则编译会报如下错误： YourMediaDataSource is not abstract and does not override abstract method close() in Closeable

# android - 转换 ArrayList 到字符串[]

> ID：11281147
> 
> 赞同：0
> 
> 时间：2012-07-01T10:13:59.340
> 
> 标签：android, android-dialog

我有类人

```
class person{
int ID ;
sting FirstName ;
string Last Name ;
String Telephone ;

} 
```

我有`ArrayList<person> ;`

现在我想显示只包含的简单列表视图`FirstName + "," + "LastName"`

所以我可以使用类似的代码

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Select Color Mode");

ListView modeList = new ListView(this);
String[] stringArray = new String[] { "Bright Mode", "Normal Mode" };
ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, stringArray);
modeList.setAdapter(modeAdapter);

builder.setView(modeList);
final Dialog dialog = builder.create();

dialog.show(); 
```

那么如何将 ArrayList 转换为包含格式的字符串 []`FirstName + "," + "LastName"`

我可以循环，但是有什么好的方法或简单的方法可以做到这一点，因为我尝试使用适配器但它未能出现在对话中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:25:53.210

让您`ArrayAdapter`使用类型`person`而不是`String`（也，只需传递`ArrayList<person>`而不是数组），如下所示：

```
ArrayAdapter<person> modeAdapter = new ArrayAdapter<person>(this, android.R.layout.simple_list_item_1, android.R.id.text1, theArrayList); 
```

然后覆盖`person`'s 类`toString`方法：

```
class person {
        int ID;
        String FirstName;
        String LastName;
        String Telephone;

        @Override
        public String toString() {          
            return "Whatever " + FirstName + " and Whatever  " + LastName;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:20:49.197

最好使用自定义适配器。这里不需要将 ArrayList 转换为 String ArrayList。您可以通过数组列表位置设置数据。

[关联](https://stackoverflow.com/questions/10995840/populating-listview-by-passing-multiple-arraylists-through-custom-baseadapter)

谢谢

# tcl - 使用 tcl 在 n 行之后在文件中插入代码行

> ID：11281151
> 
> 赞同：2
> 
> 时间：2012-07-01T10:15:06.893
> 
> 标签：tcl

我正在尝试编写一个 tcl 脚本，在找到正则表达式后我需要在其中插入一些代码行。例如，在当前文件中找到最后一次出现的#define 之后，我需要插入更多的#define 代码行。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T17:19:54.903

对文本文件进行编辑时，您将其读入并在内存中对其进行操作。由于您正在处理该文本文件中的代码行，因此我们希望将文件的内容表示为字符串列表（每个字符串都是一行的内容）。然后，我们可以使用`lsearch`（使用`-regexp`选项）找到插入位置（我们将在反向列表上执行此操作，以便找到*最后*一个位置而不是第一个位置），我们可以使用`linsert`.

总的来说，我们得到的代码有点像这样：

```
# Read lines of file (name in “filename” variable) into variable “lines”
set f [open $filename "r"]
set lines [split [read $f] "\n"]
close $f

# Find the insertion index in the reversed list
set idx [lsearch -regexp [lreverse $lines] "^#define "]
if {$idx < 0} {
    error "did not find insertion point in $filename"
}

# Insert the lines (I'm assuming they're listed in the variable “linesToInsert”)
set lines [linsert $lines end-$idx {*}$linesToInsert]

# Write the lines back to the file
set f [open $filename "w"]
puts $f [join $lines "\n"]
close $f 
```

在 Tcl 8.5 之前，样式略有变化：

```
# Read lines of file (name in “filename” variable) into variable “lines”
set f [open $filename "r"]
set lines [split [read $f] "\n"]
close $f

# Find the insertion index in the reversed list
set indices [lsearch -all -regexp $lines "^#define "]
if {![llength $indices]} {
    error "did not find insertion point in $filename"
}
set idx [expr {[lindex $indices end] + 1}]

# Insert the lines (I'm assuming they're listed in the variable “linesToInsert”)
set lines [eval [linsert $linesToInsert 0 linsert $lines $idx]]
### ALTERNATIVE
# set lines [eval [list linsert $lines $idx] $linesToInsert]

# Write the lines back to the file
set f [open $filename "w"]
puts $f [join $lines "\n"]
close $f 
```

搜索所有索引（并在最后一个索引中添加一个）是足够合理的，但是插入的扭曲非常难看。（8.4 之前？升级。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T10:51:10.600

不完全是您问题的答案，但这是有助于编写 shell 脚本的任务类型（即使我的解决方案有点难看）。

```
tac inputfile | sed -n '/#define/,$p' | tac
echo "$yourlines"
tac inputfile | sed '/#define/Q' | tac 
```

应该管用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T18:12:34.833

```
set filename content.txt
set fh [open $filename r]
set lines [read $fh]
close $fh

set line_con [split $lines "\n"]
set line_num {} 
set i 0
foreach line $line_con {
    if [regexp {^#define} $line] {
        lappend line_num $i
        incr i
    }
}

if {[llength $line_num ] > 0 } {
    linsert $line_con [lindex $line_num end] $line_insert
} else {
    puts "no insert point"
}

set filename content_new.txt
set fh [open $filename w]
puts $fh file_con
close $fh 
```

# java - 使用 java swing 搜索谷歌并获得结果

> ID：11281159
> 
> 赞同：1
> 
> 时间：2012-07-01T10:16:16.433
> 
> 标签：java, swing, search

> **可能重复：**
> [您如何以编程方式搜索 Google Java API](https://stackoverflow.com/questions/3727662/how-can-you-search-google-programmatically-java-api)

我想从 JTextfield 中的用户那里获取搜索字符串并在 google 中搜索它并获取结果并将其显示在我的应用程序中...谁能告诉我如何从我的桌面应用程序中搜索 google...我是 java 新手

# android - VideoView（构建我自己的视频视图）

> ID：11281162
> 
> 赞同：1
> 
> 时间：2012-07-01T10:17:05.087
> 
> 标签：android, media-player, android-videoview

```
private void openVideo() {
        if (mUri == null || mSurfaceHolder == null) {
            // not ready for playback just yet, will try again later
            return;
        }
        // Tell the music playback service to pause 
        // TODO: these constants need to be published somewhere in the framework.
        Intent i = new Intent("com.android.music.musicservicecommand");
        i.putExtra("command", "pause");
        mContext.sendBroadcast(i);

        if (mMediaPlayer != null) {
            mMediaPlayer.reset();
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
        try {
            mMediaPlayer = new MediaPlayer();
            mMediaPlayer.setOnPreparedListener(mPreparedListener);
            mMediaPlayer.setOnVideoSizeChangedListener(mSizeChangedListener);
            mIsPrepared = false;
            Log.v(TAG, "reset duration to -1 in openVideo");
            mDuration = -1;
            mMediaPlayer.setOnCompletionListener(mCompletionListener);
            mMediaPlayer.setOnErrorListener(mErrorListener);
            mMediaPlayer.setOnBufferingUpdateListener(mBufferingUpdateListener);
            mCurrentBufferPercentage = 0;
            mMediaPlayer.setDataSource(mContext, mUri);
            mMediaPlayer.setDisplay(mSurfaceHolder);
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            mMediaPlayer.setScreenOnWhilePlaying(true);
            mMediaPlayer.prepareAsync();
            attachMediaController();
        } catch (IOException ex) {
            Log.w(TAG, "Unable to open content: " + mUri, ex);
            return;
        } catch (IllegalArgumentException ex) {
            Log.w(TAG, "Unable to open content: " + mUri, ex);
            return;
        }
    } 
```

我从 GrepCode ( [VideoView](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/VideoView.java) ) 获得了这段代码。我想在我的 videoview 上添加静音和取消静音功能，因此我试图创建一个新的 videoview。但是由于这个 mContext 变量，我无法为我的媒体播放器设置路径。

静音和取消静音的目的：播放具有相同音频的其他音频..

我想访问 Mediaplayer 以实现静音和取消静音功能，因此不会覆盖我的 videoview 类。我是 android 的新手，所以建议我一些方法来实现这一点。提前致谢。

# c# - 2 AverageTimer32 性能计数器

> ID：11281163
> 
> 赞同：1
> 
> 时间：2012-07-01T10:17:06.933
> 
> 标签：c#, .net, windows, console-application, performancecounter

如何在一个应用程序 (.exe) 中定义和使用两个 AverageTimer32 性能计数器？

附加说明：我正在尝试衡量在操作的不同部分花费的时间。

我有一个 AverageTimer32 性能计数器和一个 AverageBase。有用。

现在我想添加第二个 AverageTimer32 性能计数器。即使我添加另一个 AverageBase 计数器，它也不起作用。我想我错了。代码示例非常感谢。

这是代码的不同部分：

```
_AverageDuration = new PerformanceCounter();
_AverageDuration.CategoryName = CategoryName;
_AverageDuration.CounterName = "average time per operation";
_AverageDuration.MachineName = ".";
_AverageDuration.ReadOnly = false;

_AverageDurationBase = new PerformanceCounter();
_AverageDurationBase.CategoryName = CategoryName;
_AverageDurationBase.CounterName = "average time per operation base";
_AverageDurationBase.MachineName = ".";
_AverageDurationBase.ReadOnly = false;
...
CounterCreationDataCollection counters = new CounterCreationDataCollection();
...
CounterCreationData avgDuration = new CounterCreationData();
avgDuration.CounterName = "average time per operation";
avgDuration.CounterHelp = "Average duration per operation execution";
avgDuration.CounterType = PerformanceCounterType.AverageTimer32;
counters.Add(avgDuration);

CounterCreationData avgDurationBase = new CounterCreationData();
avgDurationBase.CounterName = "average time per operation base";
avgDurationBase.CounterHelp = "Average duration per operation execution base";
avgDurationBase.CounterType = PerformanceCounterType.AverageBase;
counters.Add(avgDurationBase);
...
PerformanceCounterCategory.Create(CategoryName, "Category for Receiver", PerformanceCounterCategoryType.Unknown, counters);
...
AverageDuration.IncrementBy(performanceCounterwatch.ElapsedTicks);
AverageDurationBase.Increment(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:21:10.887

添加它们的顺序至关重要。您必须添加平均值，然后是其相应的基数，然后是第二个平均值，然后是第二个相应的基数。

# c - C 局部变量地址返回警告

> ID：11281164
> 
> 赞同：-1
> 
> 时间：2012-07-01T10:17:37.167
> 
> 标签：c, warnings, local-variables

我在C中有这个功能：

```
static Node* newNode(void* e){
Node n={e,NULL,NULL};
return &n;
} 
```

在编译时，我收到以下警告，我想了解它为什么会发生：

```
warning: function returns address of local variable [enabled by default] 
```

这背后隐藏着怎样的危险？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T10:18:33.970

从函数返回时，局部变量会被销毁。在函数返回后访问它们是未定义的行为，不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:16:16.280

警告是因为变量的范围是函数的本地 - 一旦函数返回，该变量不再在范围内，并且它的值是未定义的。

# java - 使用带有自定义键的 HashMap

> ID：11281166
> 
> 赞同：8
> 
> 时间：2012-07-01T10:18:15.567
> 
> 标签：java, map

快速问题：如果我想使用`HashMap`自定义类作为键，我**必须**重写该`hashCode`函数吗？如果我不覆盖该功能，它将如何工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T10:21:15.387

如果您不覆盖 hashCode AND equals 您将获得默认行为，即每个对象都是不同的，无论其内容如何。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T11:41:49.800

从技术上讲，只要相等的对象具有相同的 hashCode，您就不必重写 hashCode 方法。

因此，如果您使用 Object 定义的默认行为，其中 equals 仅针对同一实例返回 true，那么您不必重写 hashCode 方法。

但是，如果您不覆盖 equals 和 hashCode 方法，则意味着您必须确保始终使用相同的键实例。

例如：

```
MyKey key1_1 = new MyKey("key1");

myMap.put(key1_1,someValue); // OK

someValue = myMap.get(key1_1); // returns the correct value, since the same key instance has been used;

MyKey key1_2  = new MaKey("key1"); // different key instance

someValue = myMap.get(key1_2); // returns null, because key1_2 has a different hashCode than key1_1 and key1_1.equals(key1_2) == false 
```

实际上，您通常只有一个键实例，因此从技术上讲，您不必重写 equals 和 hashCode 方法。

但最好的做法是覆盖用作键的类的 equals 和 hashCode 方法，因为稍后您或其他开发人员可能会忘记必须使用相同的实例，这可能导致难以跟踪问题。

请注意：即使您覆盖了 equals 和 hashCode 方法，也必须确保不会以会更改 equals 或 hashCode 方法结果的方式更改键对象，否则地图将找不到您的值了。这就是为什么建议尽可能使用不可变对象作为键的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T10:20:29.273

唯一不需要覆盖`hashCode()`函数的时候是你也没有覆盖`equals`，所以你使用`Object.equals`引用相等的默认定义。这可能是也可能不是您想要的——特别是，即使它们具有相同的字段值，不同的对象也*不会被视为相等。*

如果你覆盖`equals`但不覆盖`hashCode`，`HashMap`行为将是未定义的（阅读：它根本没有任何意义，并且将被完全破坏）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-01T10:21:37.017

这取决于您用作键的对象类。如果它是您建议的自定义类，并且它不扩展任何东西（即它 extends `Object`），那么 hashCode 函数将是 of `Object`，并且将考虑内存引用，使两个看起来相同的对象散列到不同的代码.

所以是的，除非您使用您知道对您有用的功能扩展一个类，否则您`hashCode()`需要实现自己的功能。还要确保实现`equals()`：像 HashMap 这样的一些类`ArrayList`只会使用 equals，而像 HashMap 这样的类会同时检查`hashCode()`和`equals()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T11:28:01.803

还要考虑一下，如果您的密钥不是不可变的，您可能会遇到问题。如果您在映射中放置一个带有可变键的条目，然后您以影响哈希码和等于的方式更改键，您可能会丢失映射中的条目，因为您将无法再检索它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T09:05:24.130

You should override the `equals()` and `hashCode()` methods from the Object class. The default implementation of the `equals()` and `hashcode()`, which are inherited from the `java.lang.Object` uses an object instance’s memory location (e.g. `MyObject@6c60f2ea`). This can cause problems when two instances of the an objects have the same properties but the inherited `equals()` will return `false` because it uses the `memory location`, which is different for the two instances.

Also the `toString()` method can be overridden to provide a proper string representation of your object.

**primary considerations when implementing a user defined key**

1.  If a class overrides `equals()`, it must override `hashCode()`.
2.  If 2 objects are equal, then their `hashCode` values must be equal as well.
3.  If a field is not used in `equals()`, then it must not be used in `hashCode()`.
4.  If it is accessed often, `hashCode()` is a candidate for caching to enhance performance.

# google-app-engine - 如何在 Google AppEngine Datastore 中将实体的键从 Long 更改为 String？

> ID：11281169
> 
> 赞同：1
> 
> 时间：2012-07-01T10:18:28.947
> 
> 标签：google-app-engine, google-cloud-datastore, primary-key

我有许多具有自动生成的长 ID 键的类型的实体（例如 Person(1234)），但现在我需要将这些键更改为具有字符串名称（例如 Person("username")）。

我应该如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:55:34.717

你有两个选择：

1.  向实体添加用户名属性并通过用户名获取（使用查询）实体。
2.  创建 Person 实体时提供 key_name (Person(key_name=username, ...) )，但您需要通过重新创建来迁移所有现有的 Person 实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:15:32.267

一旦实体被保存到数据存储中，它的键就不能改变。因此，您要么必须使用现有键，要么使用新键创建新实体并将任何现有指针重新映射到原始实体。

# javascript - 在回调中将数据添加到 nodejs express 中的会话

> ID：11281172
> 
> 赞同：2
> 
> 时间：2012-07-01T10:18:39.047
> 
> 标签：javascript, node.js, mongodb, express

在下面的代码中，我试图从数据库中获取用户详细信息并将其保存到会话中。但不幸的是，它并没有像我预期的那样工作，数据没有写入会话变量。我猜是因为价值传递？任何解决方法

```
 exports.check = function(req,res,next){
    ..
    ..
    getUserFromDB(req);
}

function getUserFromDB(req){
    ..
    db.findOne(query,function(doc){
        req.session.user = doc;
    })
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T10:46:33.163

我认为您错过了回拨电话。你在使用 express 和 mongodb 吗？我们应该发布完整的工作示例:)

```
exports.check = function (req, res, next) {
  getUserFromDB(req, next);
};

function getUserFromDB(req, callback) {
  db.findOne({ _id: req.qs.id }, function (err, doc) {
    req.session.user = doc;
    callback(err);
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:09:59.880

还要检查错误，以及空文档（未找到）。

# c++ - 具有无效值的初始化引用

> ID：11281175
> 
> 赞同：1
> 
> 时间：2012-07-01T10:19:34.903
> 
> 标签：c++, reference

我有一堂课：

```
class node
{
public:

   node& parent;
} 
```

当我知道它的正确值时，我想设置该`parent`值：

```
node parent;
...

node n;  // here node.parent is a not valid value
n.parent = parent; 
```

但我也必须在构造函数中设置它的值。我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:23:35.497

您无法更改引用引用的变量。所以如果你不能在构造函数中初始化它，你就不需要引用。您可以使用常规指针，但最好使用适合您特定用途的某种智能指针。正确答案主要取决于如何管理被引用对象的生命周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T10:27:33.450

如果您想使用引用而不是指针，因为您想建议类实例不拥有父节点，那么您可以使用[`std::reference_wrapper`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)C++11 的`<functional>`.

`std::weak_ptr`如果父级持有对子级的引用而子级持有对父级的引用，我建议不要使用智能指针（可能除外）。在这种情况下使用智能指针会创建一个循环依赖，这意味着您的对象永远不会被破坏。

# github - Github 无法同步

> ID：11281178
> 
> 赞同：1
> 
> 时间：2012-07-01T10:20:07.003
> 
> 标签：github

我正在使用 github Mac 客户端来管理我的存储库并将拉取请求发送到我分叉的存储库。在过去的几天里，我无法发送拉取请求，我只收到这个错误：

```
error: The requested URL returned error: 403 while accessing
https://github.com/pyrocms/pyrocms.git/info/refs
fatal: HTTP request failed 
```

我也尝试设置 SSH 而不是 HTTPS，但是这样做，Mac 客户端无法联系服务器……我该如何解决这个问题？

这是[我需要的项目](https://github.com/pyrocms/pyrocms)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T18:29:23.757

我需要更新我的 git 版本。谢谢大家！

# git - Scrum 的部署策略

> ID：11281181
> 
> 赞同：0
> 
> 时间：2012-07-01T10:20:40.160
> 
> 标签：git, deployment, scrum

根据 Scrum 在 sprint 结束时的说法，我们必须创建一个可行的解决方案（构建、概念、代码）。例如，sprint 持续时间为 1 周，根据优先级我们需要选择一个可能需要一周以上的问题。我们正在使用一种策略将所有内容提交到主分支，并且我们不使用分支来处理问题；这样做是为了避免对问题进行双重测试。我们可以将一个大问题分解为小任务，但在 sprint 结束时，我们仍然无法获得有效的解决方案。因此，解决此类问题的唯一方法是在单独的分支中开发它。

或许你还有其他的想法、主张？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:04:40.390

您的故事应该适合[INVEST](http://en.wikipedia.org/wiki/INVEST_%28mnemonic%29)属性。“S”有争议地代表“大小合适”或“小”。就像“小到足以适应冲刺”一样。由于您的 sprint 不够大，无法包含您的一些故事，因此您有两种选择：

1.  拆分故事。我的意思不是简单地把它变成更小的任务，而是把它切成仍然可以提供价值但适合冲刺的片段。[在这本很棒的书User Stories Applied](https://rads.stackoverflow.com/amzn/click/com/0321205685)中有一些如何做到这一点的例子。我敢肯定，您也可以在网上找到更多示例。
2.  让你的冲刺时间更长。如果这种情况经常发生，我建议让你的 sprint 持续 2 周。我发现一周的冲刺有点短，所以这是我的建议。

关于如何在 git 中分支（或不分支）代码，这实际上是个人（或团队）的偏好。如果您有良好的自动化测试，那应该没关系。如果你不这样做，那么让故事适合 sprint 将允许你不分支，不测试两次，并坚持你当前的过程。

# android - setDefaultUncaughtExceptionHandler 使应用程序静默崩溃

> ID：11281182
> 
> 赞同：4
> 
> 时间：2012-07-01T10:20:45.373
> 
> 标签：android

**自定义异常处理程序**

```
public class CustomExceptionHandler implements UncaughtExceptionHandler {

private Context ctx;
private ContentResolver cr;

public CustomExceptionHandler(Context ctx, ContentResolver cr) {
    this.ctx = ctx;
    this.cr = cr;
}

public void uncaughtException(Thread t, Throwable e) {

    final Writer result = new StringWriter();
    final PrintWriter printWriter = new PrintWriter(result);
    e.printStackTrace(printWriter);
    String stacktrace = result.toString();
    printWriter.close();

    String deviceUuid = Utilities.DeviceUuid(ctx, cr);
    String bluetoothName = Utilities.LocalBluetoothName();

    AsyncTasks.ErrorLogTask logTask = new AsyncTasks.ErrorLogTask(e, bluetoothName, deviceUuid, stacktrace);
    logTask.execute();
}

} 
```

**从我的主要活动中调用：**

```
Thread.setDefaultUncaughtExceptionHandler(new CustomExceptionHandler(getBaseContext(), getContentResolver())); 
```

现在发生异常时，我没有收到常规的“不幸的是，已停止”弹出窗口。它只是一个黑屏。如果我从我的主要活动中删除我的呼叫，换句话说，`CustomExceptionHandler`不再使用，我会得到默认行为。

有没有办法在我的班级中实现默认错误行为？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:00:23.733

您可以在异常处理程序的末尾添加以下内容以获取“不幸已停止”对话框：

```
System.exit(1); 
```

但是，这将导致进程终止，这意味着您的 AsyncTask 不会运行完成。

无论如何，如果您处于 uncaughtExceptionHandler 中，我会怀疑您的代码是否能够可靠地运行，因为您不知道应用程序的状态是什么。它可能有效，也可能无效。您还可以尝试在 uncaughtExceptionHandler 中创建一个新线程并让该线程休眠一段时间，然后使用 System.exit() 终止应用程序。这可能会给您的 AsyncTask 足够的时间来运行完成。

# java - 从一个 JFrame 移动到另一个

> ID：11281185
> 
> 赞同：4
> 
> 时间：2012-07-01T10:21:01.067
> 
> 标签：java, swing, netbeans, jframe

在Netbeans的一个包中我创建了两个JFrame Forms，第一个是Login，第二个是mainProgram，登录成功后，我用下面的方式“关闭”了Login框，打开了主程序框。

```
mainProgram m=new mainProgram();
m.setVisible(true);
setVisible(false); //to hide the log in frame 
```

这是正确的方法吗？如果这两个分离的类被隐藏而不是被关闭，这不是错误的吗？这是一个过程还是两个不同的过程？如果有更好的方法那是什么？

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T10:33:30.580

> 这是正确的方法吗？

是的，这应该没问题。

> 如果这两个分离的类被隐藏而不是被关闭，这不是错的吗？

理想的做法是处理您未使用的表单（例如不再需要时的登录表单）

> 这些是 1 个过程还是 2 个不同的过程？

这些将在同一进程上运行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T10:33:38.267

> 在Netbeans的一个包中我创建了2个JFrame Forms，第一个是Login，第二个是mainProgram，登录成功后，我用下面的方式“关闭”了Login框，打开了主程序框。

使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)，正确登录后，您可以将 GUI 切换到下一张 Card 和/或更改屏幕上的 JFrame Dimmnsion，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T10:37:00.270

在我看来，更正确的方法是使用另一个类，比如 Launcher，它将具有入口点（main 方法）。将登录窗口设为模态 JDialog，并将 DISPOSE_ON_CLOSE 设置为[默认关闭操作](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDialog.html#setDefaultCloseOperation%28int%29)的值。对话框类应该包含一个通知用户真正登录的方法。登录对话框关闭后，显示主框架

```
loginDialog.setVisible(true);
if (loginDialog.isLoggedIn())
    mainFrame.setVisible(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T11:17:05.317

尝试这个...

1.  您用来隐藏和取消隐藏的方法很好，但**如果使用 dispose 会更好**。

2.  尝试在管理这些 JFrame 的类上应用**单例模式。**

3.  是的，他们都将在**同一个 Process**上。

# c - fscanf() 在不同的机器上表现不同

> ID：11281190
> 
> 赞同：0
> 
> 时间：2012-07-01T10:21:32.337
> 
> 标签：c, scanf

以下代码行应该读取一个字符串、一个 int 和两个用逗号分隔的双精度数，并将它们存储在变量中。

```
fscanf(f,"%[^,],%d,%Lf,%Lf",name,&id,&east, &north); 
```

它适用于我的 Visual Studio 2010 编译器并读取正确的值。我已经在另一台机器上运行该程序，在该机器上我有三个数字的随机值，但字符串的值是正确的。

会是什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:14:16.123

`%Lf`是类型`long double`，不是`double`。在 Microsoft 编译器上，`long double`具有与`double`. 使用`%lf`with ，或者如果你想使用，`double`将类型更改为，它应该可以在任何地方使用。`long double``%Lf`

# php - 如何从 jQuery 中的 PHP 数组中获取值？

> ID：11281195
> 
> 赞同：0
> 
> 时间：2012-07-01T10:22:33.533
> 
> 标签：php, javascript, jquery

我有一个功能：

```
 $("button.btn-info").click(function() {
                 var id=this.id;
            }); 
```

所以，我必须从 PHP 数组 $records 中获取带有“id”号的项目。我需要将此项目插入“警报”函数，但我不知道如何将变量从 JS 传递到 PHP。

请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:25:46.227

使用例如`json_encode($records)`并将其输出到`<script>`html 文件中的标记中，如下所示：

```
<script type="text/javascript">
    var records = <?php echo json_encode($records); ?>;
</script> 
```

这通常应该位于依赖于记录变量的其他 js 代码之前。

否则，如果您想动态加载此 var，则可以使用 ajax ( [jQuery.get )。](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:25:50.830

不完全确定我理解你的问题。看来您只是希望将 PHP 变量写入 javascript：

```
$("button.btn-info").click(function() {
    var id=<?php echo $records->id?>;
}); 
```

请记住，承载 JavaScript 的网页是静态的。如果您希望它与 PHP 交互，则需要使用 AJAX 或其他更高级的东西。

# java - 在 Android 中获取新插入的联系人

> ID：11281197
> 
> 赞同：2
> 
> 时间：2012-07-01T10:23:07.423
> 
> 标签：java, android, database, service, contacts

在我的应用程序中，我正在提取所有联系人并将它们上传到服务器。但是有一个问题。我知道如何提取所有联系人，但是有没有办法获取最新的联系人？

例如：第一次打开应用程序时，我上传了所有联系人，但其他时候我不想上传所有联系人，只上传最新的。

你知道有什么办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:32:56.493

如果您的联系人有一些顺序（按 ID、按名称），您可以保存您保存的最后一个联系人的标识符，下次只需检查是否有标识符大于您保存的最后一个联系人。

例如：

1.  您保存了一个联系人列表，最后保存的联系人 ID（假设它们是有序的，如果没有，则保存最大值）为 100。
2.  下一次运行，您检查是否有任何 ID > 100 的联系人并保存这些，然后再次保存最后插入的 ID。

# mysql - 如何在 Ubuntu 中设置 MYSQL 环境变量？

> ID：11281198
> 
> 赞同：5
> 
> 时间：2012-07-01T10:23:29.207
> 
> 标签：mysql, lampp

所以我安装了**XAMPP**（在Ubuntu中），它成功了，

MYSQL 的位置是**/opt/lampp/bin/mysql**，所以我必须包括访问**mysql**的整个路径，如下所示：

**$/opt/lampp/bin/mysql -u root -p**

并且可以登录。

但是只使用“mysql”是行不通的；它说没有找到。

你能给我一个关于如何为 mysql 设置 env't 变量的想法吗？

Ubuntu 中的新功能。帮助？:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T10:26:36.900

在您的主目录中有一个名为`.bash_profile`（使用 ls -la 来查看它，因为以 . 开头的文件默认隐藏

可能已经有一行与此类似：

```
PATH=$PATH:$HOME/bin 
```

将其更改为

```
PATH=$PATH:$HOME/bin:/opt/lampp/bin/ 
```

这是最简单的方法，还有其他方法可以做到这一点，这样系统上的所有用户都会自动在他们的路径中获取此目录，有关更详细的答案，请访问我们的姊妹网站[askubuntu.com](https://askubuntu.com/)

# android - android类从另一个类调用方向

> ID：11281202
> 
> 赞同：0
> 
> 时间：2012-07-01T10:24:08.803
> 
> 标签：android, class

我想将我的屏幕方向从一个活动调用到另一个活动以压缩代码并使其更容易调用其他函数。

```
public class Activity2 extends Activity{    
  public void Orientation(){
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
  }
} 
```

主应用程序将从另一个类调用方向：

```
public class main extends Activity {
  final Activity2 summon = new Activity2();
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    summon.Orientation();
    setContentView(R.layout.main);
  }
} 
```

这可以做到吗？对不起我的英语不好，这是我的第二语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:59:23.093

在`onCreate()`你的活动中，这样做是为了设置`Landscape Orientation`

`this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`

这对于`Portrait Orientation`

`this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);'

并让`Android`管理您的活动并使用方法从一个`startActivity()`开始另一个。每个活动都将根据其配置有其方向。`Activity``Activity`

问候， 阿基夫·哈米德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:59:39.307

首先，你不能像那样创建 Activity 对象。

要回答您的问题（如果我理解正确的话），您可以像这样在清单中设置活动的方向

```
 <activity
        android:name=".MyLandscapeActivity"
        android:screenOrientation="landscape"
        >
</activity> 
```

# javascript - 使用 javascript 将外部 .htm 文件加载到 div

> ID：11281204
> 
> 赞同：-1
> 
> 时间：2012-07-01T10:24:23.037
> 
> 标签：javascript, html, load, external

> **可能重复：**
> [使用 javascript 将](https://stackoverflow.com/questions/11278078/loading-an-external-htm-with-javascript-into-a-div)
> [外部 .htm 加载到 div 使用 javascript 将外部 .htm 文件加载到 div](https://stackoverflow.com/questions/11280816/loading-an-external-htm-file-into-a-div-with-javascript)

这是我的全部代码：

```
<html>

<head>

</head>

<body>

<script src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript">
$(function(){
    $('.ajax') .click(function(e){
        e.preventDefault()
        $('#content').load( 'file.htm' )
    })
})
</script>

<div id="content">
    <p>random text</p>
</div>

<div><a href="#" class="ajax">Link</a></div>

</body>

</html> 
```

该代码适用于将外部文件加载到 Firefox 中的 div 中，但是当我单击链接时，chrome 和 IE 中没有任何反应。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:30:14.570

虽然这不是问题的原因，但使用分号是一种很好的做法：

```
$(function(){
    $('.ajax') .click(function(e){
        e.preventDefault();
        $('#content').load( 'file.htm' );
    });
}); 
```

如果你不这样做，你偶尔会遇到一些奇怪的错误。

# ruby-on-rails - 具有不同键的 Mongoid upsert

> ID：11281207
> 
> 赞同：3
> 
> 时间：2012-07-01T10:25:13.257
> 
> 标签：ruby-on-rails, mongodb, mongoid, upsert, database

是否可以使用 JSON/字段散列插入 mongodb 集合，但不使用 ObjectId 字段，而是`_id`使用不同的索引字段，例如`external_id`？

我使用它来更新我每天从提要收到的一些项目，因此提要项目不包含我的内部 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:21:46.543

是的，可以在 Mongoid 中使用自定义 id 进行 upsert，但仅在 2012 年 6 月 27 日左右的 3.0.0.rc 中。

应用程序/模型/item.rb

```
class Item
  include Mongoid::Document

  field :external_id, type: String
  field :_id, type: String, default: ->{ external_id }
  field :text, type: String
end 
```

测试/单元/item_test.rb

```
require 'test_helper'

class ItemTest < ActiveSupport::TestCase
  def setup
    Item.delete_all
  end

  test "external id" do
    Item.new( text: 'Lorem ipsum' ).upsert
    Item.new( external_id: 'an external id', text: 'dolor sit amet' ).upsert
    puts Item.all.to_a.collect{|item|item.inspect}
  end
end 
```

输出

运行选项：--name=test_external_id

```
# Running tests:

#<Item _id: 4ff202501f98ce8202c03268, _type: nil, external_id: nil, text: "Lorem ipsum">
#<Item _id: an external id, _type: nil, external_id: "an external id", text: "dolor sit amet">
.

Finished tests in 0.028232s, 35.4208 tests/s, 0.0000 assertions/s.

1 tests, 0 assertions, 0 failures, 0 errors, 0 skips 
```

为此，您必须从 github 安装，访问并从

```
https://github.com/mongoid/mongoid

bundle install
bundle exec rake install 
```

这是使这成为可能的提交的链接。

```
https://github.com/mongoid/mongoid/commit/3062363bad3ab947d7689502d6805652b20e89a0 
```

# joomla - 使用 Cron 作业启动 Akeeba 备份

> ID：11281217
> 
> 赞同：0
> 
> 时间：2012-07-01T10:26:39.877
> 
> 标签：joomla, backup, cron-task

我们正在使用 Akeeba Backup 来备份我们的 Joomla 网站。只需调用此处所述的 URL 即可开始备份：[https](https://www.akeebabackup.com/documentation/quick-start-guide/automating-the-backup.html) ://www.akeebabackup.com/documentation/quick-start-guide/automating-the-backup.html 。为了自动备份我们的站点，我们希望使用每日执行的 Cron 作业调用此 URL。我们的虚拟主机支持创建 Cron 作业，但您不能使用任何 shell 脚本或其他东西。仅支持执行 PHP 脚本。所以我们必须使用 PHP 脚本调用这个 URL。我创建了这个脚本，当直接使用我的浏览器调用它时它工作正常。但是当我尝试使用 Cron 作业执行它时，我只收到错误 302，这意味着文档已暂时移动。我不知道该怎么办。这是我要执行的脚本：

```
<?php
    $result = file_get_contents("http://www.mysite.net/index.php?option=com_akeeba&view=backup&key=topsecret&format=r");
?> 
```

我对 Cron 作业或 PHP 没有经验，所以任何帮助都会很好。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:28:54.043

[阅读文档](https://www.akeebabackup.com/documentation/akeeba-backup-documentation/automating-your-backup.html)就足够了。它准确地告诉您如何使用 wget 或 curl 来处理 CRON 作业。此外，还有一个名为“Wget 的 PHP 替代方案”的部分。我编写 Akeeba Backup 的文档并免费提供是有充分理由的：阅读并防止此类问题；）

# sql - 如何按值传递sql函数参数

> ID：11281218
> 
> 赞同：1
> 
> 时间：2012-07-01T10:27:10.417
> 
> 标签：sql, sql-server, sql-server-2005, parameter-passing

这是更大选择的一部分，但我已将其简化为基本问题：

比较这两个 SQL 查询 - 第一个使用常量，第二个使用变量，两者都具有相同的值（比如说 180）。带有常量的那个会立即显示结果（例如在几毫秒内），带有变量的那个需要几秒钟才能产生相同的结果。

问题在哪里？

查询一：

```
SELECT *
FROM table
WHERE field > 180 
```

查询 2：

```
DECLARE @V INT
SET @v = 180
SELECT *
FROM table
WHERE field > @v 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:28:42.397

关键在于[参数嗅探](http://jahaines.blogspot.be/2010/08/sql-server-parameter-sniffing.html)。从提到的文章中：

*“当参数化查询使用缓存的基数估计来制定查询计划决策时，就会发生参数嗅探。当第一次执行具有非典型参数值时，就会出现问题。对于每个后续执行，优化器都会假设估计是好的，即使估计可能是例如，假设您有一个存储过程，它返回 1 到 1000 之间的所有 id 值。如果使用这么大范围的参数值执行存储过程，优化器将缓存这些非典型值，这间接导致“*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T23:29:24.737

好吧-我被要求详细说明解决方案（我还看到[“写好答案的技巧”](https://stackoverflow.com/questions/how-to-answer)）-让我尝试解释一下-尽管我只能解释效果-为了了解背景，必须自己动手进入提到的文章。

我遇到了每三分钟对某些数据进行快照的问题。（非常简化的）查询是

```
SELECT *
FROM table
WHERE TimeStamp > DateAdd(ss,-180,GetDate()) 
```

工作完美 - 把它放在一个函数中：

```
CREATE FUNCTION GetSnapshot (@ss int) RETURNS TABLE
AS
RETURN
  SELECT *
  FROM Table
  WHERE TimeStamp > DateAdd(ss,-@ss,GetDate()) 
```

只要我用常量调用它，这也很完美，例如

```
SELECT *
FROM GetSnapshot(180) 
```

现在我想进一步参数化，因为 180 秒不适合所有目的。现在问题开始了：

```
DECLARE @v int
SET @v = 180
SELECT *
FROM GetSnapshot(@v) 
```

运行近**10 秒**，而直接调用 180 需要毫秒

我还必须提到，简单的表格也有同样的效果——我调用函数的事实并没有影响结果。无论我尝试什么 - 十秒。

现在在完全绝望之前，我用标题中的问题求助于 stackoverflow 中的专家。我对编程语言中的参数传递了解很多——但在 SQL 中却一无所知。在 PL 中，如果您按值传递，编译器会生成代码以在运行时制作实际值的本地副本，并将其像常量一样传递给被调用函数 - 而按引用传递则“按原样”传递语言构造，然后被调用的过程可以一次又一次地“调用”这个参数 - 无论是变量还是函数调用或其他任何东西。因此，我的印象是，SQL 编译器通过值调用常量和通过引用调用变量——这需要被调用过程进行多次评估，并解释几万条记录的结果集的长时间运行。

在[提到的文章中](http://www.sommarskog.se/query-plan-mysteries.html)，Erland 或多或少地以我的方式解释了它：

（开始报价）

*   常量就是常量，当查询包含常量时，SQL Server 可以完全信任地使用常量的值，甚至可以使用这样的捷径根本不访问表，如果它可以从约束中推断出没有行会被退回。
*   对于参数，SQL Server 不知道运行时值，但它会在编译查询时“嗅探”输入值。
*   对于局部变量，SQL Server 根本不知道运行时值，并应用标准假设。（哪些假设取决于操作员以及可以从唯一索引的存在中推断出什么。）

（结束报价）

然后他进一步详细说明了参数嗅探和执行计划，我并不羞于承认我什么都不懂 (-:) - 但总而言之，它类似于编程语言的按值/被引用概念。

现在如何强制 SQL Server “按值调用”？

幸运的是，David 对[Demystifying SQL Server 的提示：SQL Server Parameter Sniffing](http://jahaines.blogspot.be/2010/08/sql-server-parameter-sniffing.html)文章给出了我称赞的解决方案：使用 sp_executesql 包装器打包完整的“按引用”调用 - 在这种情况下，外部调用仍将是“按参考”，但由于参数解析是在包装级别完成的，因此内部调用可以“按值”完成，我们又回到了毫秒级的响应时间。

像这样使用它来制作技巧：

```
exec sp_executesql 
  N'SELECT * FROM GetSnapshot(@v)',
  N'@v int',
  @v=180 
```

就是这样 - 抱歉回复晚了，但我最近几天很忙...... Meiki

# python - 从 xml 文档中提取元素属性和值而不在 python 中指定元素

> ID：11281220
> 
> 赞同：0
> 
> 时间：2012-07-01T10:27:29.353
> 
> 标签：python, linux, xml-parsing, ubuntu-10.04

我已经创建了 10 个不同类型的 xml 文档，例如一个有书籍详细信息，另一个有电影详细信息或新闻标题等。这样的 xml 文档之一是 books.xml，如下所示：

```
<bookstore>
    <book category="COOKING">
         <title lang="english">Everyday Italian</title>
         <author>Giada De Laurentiis</author>
         <year>2005</year>
         <price>200.00</price>
    </book>

    <book category="CHILDREN">
         <title lang="english">Harry Potter</title>
         <author>J K. Rowling </author>
         <year>2005</year>
         <price>625.00</price>
    </book> 
</bookstore> 
```

我想通过在所有 10 个 xml 文档中搜索用户输入的单词来计算它们。这些词只不过是具有属性及其各自值的元素。

例如：用户输入类别

从上面的例子可以看出 category 是一个属性并且写了两次。因此，根据这个输出应该是“2”，如果这个词类别存在于其他 9 个文档中，那么计数会相应地升级。如何在不指定元素名称的情况下为单个文档执行此操作。它基本上是 xml 解析，那么我该怎么做呢？这对我来说是新的，我面临一些问题。

///////////////////////////////////////// ////////////////////////////

如果我想使用简单的doc而不是schema怎么办？它与xml解析有关，你能告诉我如何在dom模型对象中使用nodelist对象。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:49:20.593

如果您要拥有大量此类 XML 文档，您可以执行以下步骤

1.  摆脱属性中的数据。更改文档格式

    ```
    <book>
         <category>CHILDREN</category>
         <lang>english</lang>
         <title>Harry Potter</title>
         <author>J K. Rowling </author>
         <year>2005</year>
         <price>625.00</price>
    </book> 
    ```

2.  使用[Sphinx使用](http://sphinxsearch.com/)[xmlpipe 数据源](http://sphinxsearch.com/docs/current.html#xmlpipe)对文档进行索引

# python - ValueError：使用 Sage 绘图时“解包的值太多”

> ID：11281222
> 
> 赞同：3
> 
> 时间：2012-07-01T10:27:46.890
> 
> 标签：python, macos, unpack, sage

到目前为止，这是我的代码。我有 Python 2.7（我今天和 Sage 一起下载了它）并正在从终端在 Mac OS X 10.6.8 上运行它（不过，我确实计划在弄清楚发生了什么后立即从 notebook() GUI 运行它继续出现这些错误）。

```
sage: import scipy
sage: import numpy
sage: import matplotlib
sage: cd /Users/nickscomputer/Desktop
/Users/nickscomputer/Desktop
sage: DATA = numpy.loadtxt("PracticeDat.txt")
sage: DATA
array([[   1.,    1.],
   [   2.,    4.],
   [   3.,    9.],
   [   4.,   16.],
   [   5.,   25.],
   [   6.,   36.],
   [   7.,   49.],
   [   8.,   64.],
   [   9.,   81.],
   [  10.,  100.]])
sage: X = DATA[:,0]
sage: Y = DATA[:,1]
sage: plot(X,Y)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

/Users/nickscomputer/Desktop/<ipython console> in <module>()

/Applications/sage/local/lib/python2.7/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)
    685                     kwds[new_name] = kwds[old_name]
    686                     del kwds[old_name]
--> 687             return func(*args, **kwds)
    688         
    689         return wrapper

 /Applications/sage/local/lib/python2.7/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)
    532                 options['__original_opts'] = kwds
    533             options.update(kwds)
--> 534             return func(*args, **options)
    535 
    536         #Add the options specified by @options to the signature of the wrapped

/Applications/sage/local/lib/python2.7/site-packages/sage/plot/plot.pyc in plot(funcs, *args, **kwds)
   1024         # if there is one extra arg, then it had better be a tuple
   1025         elif n == 1:
-> 1026             G = _plot(funcs, *args, **kwds)
   1027         elif n == 2:
   1028         # if there are two extra args, then pull them out and pass them as a tuple

/Applications/sage/local/lib/python2.7/site-packages/sage/plot/plot.pyc in _plot(funcs, xrange,     parametric, polar, fill, label, randomize, **options)
   1095         return Graphics()
   1096     funcs, ranges = setup_for_eval_on_grid(funcs, [xrange], options['plot_points'])
-> 1097     xmin, xmax, delta = ranges[0]
   1098     xrange=ranges[0][:2]
   1099     #parametric_plot will be a list or tuple of two functions (f,g)

ValueError: too many values to unpack 
```

我试过做一个list_plot，我得到这个错误：

```
sage: list_plot(X,Y)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

/Users/nickscomputer/Desktop/<ipython console> in <module>()

/Applications/sage/local/lib/python2.7/site-packages/sage/misc/decorators.pyc in wrapper(*args, **kwds)
    532                 options['__original_opts'] = kwds
    533             options.update(kwds)
--> 534             return func(*args, **options)
    535 
    536         #Add the options specified by @options to the signature of the wrapped

/Applications/sage/local/lib/python2.7/site-packages/sage/plot/plot.pyc in list_plot(data, plotjoined, **kwargs)
   1561     """
   1562     from sage.plot.all import line, point
-> 1563     if data == {} or data == () or data == []:
   1564         return Graphics()
   1565     if isinstance(data, dict):

ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

我也试过这个选项，它会生成空的绘图轴和这个错误：

```
sage: plot((X,Y))
verbose 0 (1978: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate  function at 200 points.
verbose 0 (1978: plot.py, generate_plot_points) Last error message: ''numpy.ndarray' object is not callable'
verbose 0 (1978: plot.py, generate_plot_points) WARNING: When plotting, failed to evaluate function at 200 points.
verbose 0 (1978: plot.py, generate_plot_points) Last error message: ''numpy.ndarray' object is not callable' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:08:04.577

使用`list_plot`. 它的文件说

> 如果您有要相互绘制的 x 值和 y 值的单独列表，请使用“zip”命令创建一个列表，其条目是 (x,y) 值对，并将结果输入“list_plot "

所以特别是使用`list_plot(zip(X,Y))`. 或者，转换`DATA`为单个列表：使用`list_plot(DATA.tolist())`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:56:09.280

我还要指出，我喜欢`line()`与该`linestyle=''`选项一起使用，这样我可以获得更多的 matplotlib 选项（出于某种原因`list_plot`，`points`不能很好地做到这一点）：

```
DATA = [[   1.,    1.],
   [   2.,    4.],
   [   3.,    9.],
   [   4.,   16.],
   [   5.,   25.],
   [   6.,   36.],
   [   7.,   49.],
   [   8.,   64.],
   [   9.,   81.],
   [  10.,  100.]]
line(DATA,marker='^',linestyle='') 
```

# android - 安卓应用闪烁

> ID：11281224
> 
> 赞同：2
> 
> 时间：2012-07-01T10:28:07.673
> 
> 标签：android

我一直在编写一个针对 Android 2.1 的应用程序，几乎可以在所有设备上运行。最近我尝试在 Android 4.0.3 上运行它，它开始闪烁（就像 gmail 应用程序一样）。奇怪的是，我将启动活动更改为空活动（没有控件或布局元素），但它仍然闪烁。将目标更改为 Google APIs 4.0.3 也无济于事。

我目前正在使用 Google API 2.1。很少有外部库 protobuf 和 RabbitMQ 和应用程序权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.WRITE_CONTACTS"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/> 
```

不知道还有什么可能对空 Activity 产生任何影响。有没有人经历过类似的事情或有任何线索可能会发生什么？

编辑：我开始了一个新项目，并一步一步地复制问题。这是我的扩展应用程序的类，它正在用以下内容淹没日志：
`memalloc(26689): ion: Mapped buffer base:0x52172000 size:1949696 offset:0 fd:55`
`memalloc(26689): ion: Unmapping buffer base:0x52172000 size:1949696`

如果我注释掉 line:
`newConfig.locale = locale;`
它在方法中停止：
`public void onConfigurationChanged(Configuration newConfig)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:03:18.337

可能是您的活动重复打开？打印您的活动转储： adb shell dumpsys activity 检查堆栈以查看打开的实例数量

# java - 如何使用 MAMP 显示 html/php 和 GWT 代码？

> ID：11281227
> 
> 赞同：0
> 
> 时间：2012-07-01T10:28:40.267
> 
> 标签：java, gwt, mamp

我使用 MAMP 在本地服务器上运行网站文件。该项目以前是使用 gwt 开发的。我已经安装了 gwt 和 ant。我现在应该把我的 html/php 文件放在哪里，以便能够编译 java 文件，同时在我的本地服务器上显示我的 html/php 文件？

谢谢！，迈赫迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:42:06.923

你在这里混合了几件事，我会尽量让它简单：

1.  GWT 代码是用 java 编写的，但最终会编译为 javascript，因此您部署的实际代码是 javascript。
2.  HTML/PHP/javascript/css 文件应放在 MAMP/htdocs 下
3.  如果您有 GWT 应用程序的源代码并且想要查看/编辑它，您可以在常规记事本中进行，但我强烈建议使用 IDE（集成开发编辑器），如[Eclipse](http://www.eclipse.org/)。

# batch-file - 运行 DOS 命令以获得时间限制

> ID：11281230
> 
> 赞同：1
> 
> 时间：2012-07-01T10:29:56.293
> 
> 标签：batch-file

我想执行以下操作。

1.  从包含许多单词的输入文件中一次读取 1 个单词。
2.  将此单词作为参数传递给另一个基于命令行的应用程序。
3.  运行该应用程序一段固定的时间，比如 10 秒。
4.  如果应用程序在 10 秒后仍在运行，则中止执行并返回，从输入文件中选择下一个单词并重复步骤 1 到 3。

这是我写的，尽管它并没有完全达到我想要的效果：

```
@echo off
for /f %%i in ('type input.txt') do call:Routine %%i

:Routine
set app="myApp.exe"
set limit=60

%app% %1
goto Delay

:Delay
ping localhost -n %limit% > nul 
```

上面的脚本会引入 myApp 执行完成后的延迟。但是，我希望它运行 myApp.exe 不超过 10 秒，如果确实如此，则使用 taskkill 中止应用程序并从输入文件转到下一个单词。

我在网上搜索了一个解决方案并遇到了这个：

[http://www.tech-archive.net/Archive/WinXP/microsoft.public.windowsxp.general/2006-04/msg03609.html](http://www.tech-archive.net/Archive/WinXP/microsoft.public.windowsxp.general/2006-04/msg03609.html)

虽然它没有准确回答我的查询，但我想让我的代码做类似的事情。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:13:33.577

链接代码中的逻辑看起来有缺陷：它要么启动 3 个下载命令，要么延迟约 59 秒并尝试终止所有下载命令，但它从来没有同时执行这两个命令。TASKKILL 命令参数不正确 - 图像名属于 /IM 参数之后。

在您的代码中，如果没有 TASKKILL 命令，您将不会终止您的任务！

循环结束后，您必须 GOTO :EOF 或 EXIT /B，否则代码将失败并在不使用 CALL 的情况下执行子例程。但实际上根本不需要使用子程序。

您只需要初始化一次变量。

无需在 IN() 子句中执行命令。FOR /F 有一个变体，可以直接读取文本文件。`HELP FOR`从命令行键入并仔细阅读文档。

PING 在每个回显请求之间大约有 1 秒的延迟。因此，计数为 11 将产生大约 10 秒的延迟。

*编辑 - 最初忘记了在自己的进程中启动应用程序的关键 START 命令*

```
@echo off
set app="myApp.exe"
set limit=11
for /f %%i in (input.txt) do (
  start "" %app% %%i
  ping localhost -n %limit% > nul
  taskkill /im %app% /f
) 
```

# php - PHP - 获取 HTML 标签的维度

> ID：11281231
> 
> 赞同：0
> 
> 时间：2012-07-01T10:30:02.513
> 
> 标签：php, render

我正在尝试获取网页中 HTML 标记的一些属性。

```
<html>
<head>
  <title>test page</title>
</head>
<body>
  <div id="header" class="clearit" role="banner">
    <div id="headerWrapper">
      <ul id="primaryNav" role="navigation">
        <li id="musicNav" class="navItem">
          <a href="/music" class="nav-link">Music</a>
        </li>
        <li id="listenNav" class="navItem">
          <a href="/listen" class="nav-link">Radio</a>
        </li>
        <li id="eventsNav" class="navItem">
          <a href="/events" class="nav-link">Events</a>
        </li>
        <li id="chartsNav" class="navItem">
          <a href="/charts" class="nav-link">Charts</a>
        </li>
        <li id="communityNav" class="navItem">
          <a href="/community" class="nav-link">Community</a>
        </li>
        <li id="originalsNav" class="navItem">
          <a href="http://originals.last.fm" class="nav-link">Originals</a>
        </li>
      </ul>
    </div>
  </div>
</body>
</html> 
```

例如，我需要实际的高度和宽度，`#headerWrapper`并将其与`#musicNav`我的 PHP 脚本中的值进行比较。由于 PHP 是服务器端的，因此我无法获取这些属性，因此我正在考虑附加 Javascript 代码来计算这些属性并将它们存储在 JSON 文件中，如下代码所示：

```
<script type="text/javascript">
document.ready(function() {
  var JSONObject= {
    "tagname":"headerWrapper",
    "height":$("#headerWrapper").height(),
    "width":$("#headerWrapper").width()
  },
  {
    "tagname":"musicNav",
    "height":$("#musicNav").height(),
    "width":$("#musicNav").width()
  }
  });
});  
</script> 
```

然后我想在包含我的算法的 php 文件中阅读它，以从网页中提取视觉特征。所以我需要使用一些浏览器来渲染带有附加 Javascript 的网页。我正在使用 exec 将新文件发送到 Firefox，如下所示：

```
exec('"C:\Program Files (x86)\Mozilla Firefox\firefox.exe" "http://localhost/Autoextractor/test.html" 2> errors.txt'); 
```

并且 Firefox 在 taskmanager 中打开但**不显示**，页面**不呈现**，并且我附加的 Javascript 代码**不执行**。

safe_mode=off - disabled_functions 从 php.ini 和执行时删除 exec("whoami"); 结果是我的用户（注意：我在管理员组中的用户），我确实尝试了[wscript](http://www.php.net/manual/en/function.exec.php#86438)，但没有结果。

有谁知道它为什么不起作用，或者有另一种解决方案来获取 HTML 标签的尺寸？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T10:32:58.510

简单地运行浏览器不会让您从中读取任何数据，所以忘记使用`system`.

您可以使用[Selenium Webdriver](http://seleniumhq.org/docs/03_webdriver.html)通过 PHP 控制浏览器，运行 JavaScript，然后返回结果。

当您编写真正的 JavaScript 时，您需要修复问题中包含的示例中出现的语法错误。

请记住，屏幕上元素的大小将取决于安装的字体、选择的字体大小、浏览器、窗口大小等因素。您可以获得系统上运行的浏览器的结果，但不能依赖这是一个普遍的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:43:48.180

“有另一种解决方案来获取 HTML 标签的维度吗？”

Firebug/Inspect 出了点问题，它会通过一些简单的操作为您提供渲染偏移量。

如果您想以编程方式在控制台中运行您的代码，尽管您仍然需要 firebug/Inspect 来找到正确的选择器（这确实消除了自动执行任何这些操作的能力）。尝试记录所有内容...好吧，听起来您正在尝试保留*数据库*...也许您应该设置一个。

这可能是一个问题，您需要添加更多上下文才能获得有用的响应。

# html - 在指向 HTML 链接资源（CSS，...）的 URL 中使用 IP 地址

> ID：11281232
> 
> 赞同：0
> 
> 时间：2012-07-01T10:30:03.870
> 
> 标签：html, performance, http, dns

一种众所周知的技术是出于各种原因将资源（CSS、JavaScript 等）与单独的 DNS 名称相关联。像这样：

```
GET http://stackoverflow.com/
GET http://cdn.sstatic.net/stackoverflow/all.css 
```

（两个不同的域名）

反而：

```
GET ...
GET http://92.60.242.2/stackoverflow/all.css 
```

（一次 DNS 查询）

这意味着需要**两次 DNS 查找**。难道我们不能只使用 IP 地址而不是`cdn.sstatic.net`为了保存一次 DNS 查询吗？

请假设从服务器的角度来看可以使用 IP 主机。假设有一个具有专用 IP 的专用资源服务服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T10:33:35.773

内容交付网络通常采用某种负载平衡，通常在 DNS 级别实现（例如`cdn.sstatic.net`，根据请求者的地理位置，名称解析为不同的 IP 地址）。对 IP 地址进行硬编码会适得其反，因为请求将始终发送到同一台服务器（这可能仍然是多个后端服务器前面的负载平衡器，但它们都将位于同一位置）。

# java - Java PlayFramework & Python Django GAE

> ID：11281233
> 
> 赞同：2
> 
> 时间：2012-07-01T10:30:06.483
> 
> 标签：java, python, django, playframework

我已经了解 Java、C# 和 C++。现在我想从 Web 开发开始，我看到一些非常大的网站是用 Python/C++ 构建的。我喜欢 Python 的编码风格，它看起来很干净，但其他一些东西，比如运行前没有错误，真的很奇怪。

但是，我不知道我现在应该学习什么。我从 Python 开始，但后来我发现 Google App Engine 也支持 Java，而且 PlayFramework 看起来也很棒。

现在我真的很困惑。我应该使用 Python 还是 Java？我发现 Python “PyCharm” 的 IDE 对于 Web 开发来说真的很棒。Java是否有类似的东西，可能是eclipse？

我知道这个问题没有建设性，但它会帮助我做出决定。两种语言的优缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T19:39:11.633

我只想补充一点，如果您要求它与 GAE 兼容，那么我认为 Django 是最好的选择。Playframework 的 2.0 版不再与 GAE 兼容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T16:50:44.183

PyCharm is an IDE created by JetBrains. Originally, JetBrains only had one product, IntelliJ IDE (a Java IDE), and PyCharm and all the other products were spawned from that one highly successful product.

As for which language, I would suggest trying to do something small (but feature rich enough to be a holistic test) with all 3 and see which one works best for you. Language choice is a massive question, and depends on personal factors, project factors and many other besides. Therefore I won't even begin to tell you which one is best (because it would be what is best for me, in my situation).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:45:11.043

这取决于你。您还想要什么：学习新的编程语言或学习如何制作网络应用程序？

我刚开始学习一些 PLAY 教程，它真的很棒。PLAY 2 比之前的更精彩。我想学习 Scala，所以它对我来说是完美的，但也因为它不再兼容 GAE，但是来吧，还有其他部署应用程序的方法，我想尝试 OpenShift（不知道是否可能，我会尽快尝试）。

我也是 Python 的忠实粉丝，所以我自然也在寻找在其中构建应用程序的框架。我想说，Django 不是唯一的选择。我很少尝试使用 Django，现在我正在尝试 web2py。正如许多人所说，Django 的学习曲线相当艰难。Web2py 应该更好，但我不喜欢“巫师”搭建应用程序的方式。

我用过 Bottle（Flask 类似），它非常适合小型应用程序。RESTful 应用程序使用起来非常简单，所以也许它应该是你的起点。

从我读到的关于 Python 框架的内容中：

*   Django 非常适合典型的网站/类 CMS，很难学习
*   web2py 非常有趣 --- 我正在测试它，Reddit 正在使用它吗？
*   web.py -- 简约、轻量级的框架，你几乎必须从头开始构建 webapp
*   Tornado/Twisted --- 快速、异步的框架
*   Flask/Bottle --- 非常好的微框架。非常适合 REST 服务

我没有尝试过所有这些，但这是我在阅读网络/博客等时发现的。

我正在寻找类似 Play Framework 2.x 但在 Python 中的东西（最好是 3）:)

# php - htaccess：将站点域重定向到子域

> ID：11281237
> 
> 赞同：0
> 
> 时间：2012-07-01T10:30:42.793
> 
> 标签：php, .htaccess, redirect

我需要在我的 .htaccess 文件中将访问 mysite.com 的用户重定向到 www.mysite.com。

问题是我尝试的任何东西都不起作用，我认为因为`^mysite.com`不排除`www.mysite.com`所以会产生错误的循环，但我通常会收到错误 500。

我还需要排除另一个子域，`img.mysite.com`.

我怎样才能做到这一点？

我使用了许多来自网络的示例和一些 htaccess 生成器，这给了我以下代码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mywebsite.com[nc]
RewriteRule ^(.*)$ http://www.mywebsite.com/$1 [r=301,nc] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:35:28.643

尝试这样的事情：

`RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.mywebsite.com$ [NC]
RewriteRule ^/*(.*)$ [http://www.mywebsite.com/](http://www.mywebsite.com/)$1 [L,R=301]` 

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:36:47.160

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

这是你需要的——取自默认的 Drupal .htaccess

# c - C、对结构队列进行排序

> ID：11281240
> 
> 赞同：0
> 
> 时间：2012-07-01T10:32:16.980
> 
> 标签：c, sorting, queue, structure

我需要一点帮助。我正在尝试按年份对结构队列进行排序。

这是我的结构：

```
struct element{

        int id;
        int sign;
        int year;
        int month;
        double amount;

        struct element *next;

    };

struct queue{
    struct element *head;
    struct element *tail;
    struct element *heads;
    struct element *temp;
    struct element *temph;

    int size;
}; 
```

这是我写的函数：

```
void sort(struct queue* queue){

if (queue->size == 0){
        printf("Struct is empty\n");}
else {

        struct element* head=queue->head;
        struct element* heads=queue->heads;
        struct element* temp=NULL;
        struct element* temph=queue->head;
        int i, size=queue->size;        

        for(i=0;i<size-1;i++){
        heads=head->next;
            if((head->year)>(heads->year)){

                temp=head;
                head=heads;
                heads=temp;         
            }

        head=head->next;
        heads=NULL;
        temp=NULL;
        }

head=temph;
}

} 
```

当我复制它时它会中断：`if((head->year)>(heads->year))`. 我很确定我的问题是由于对旁边的结构的不正确引用引起的`head`（我将其命名为`heads`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:30:28.100

我省略了所有不重要的东西，并将链表冒泡排序简化为这个骨架。

```
void sort(struct queue* queue)
{
struct element **pp, *this;

    if (!queue->head ){
        fprintf(stderr, "OMG Struct is empty\n");
        return;
       }

        for(pp = &queue->head; this = *pp; pp = &(*pp)->next){
        struct element *other = this->next;
            if (!this->next) break;
            if (this->year < other->year) continue;
            /* 
            ** Now, Swap this (b) and other (c) 
            ** old situation: @a -> (b) -> (c) -> (d)
            ** new situation: @a -> (c) -> (b) -> (d) 
            */
            *pp = other;              /* @a  -> (c) */
            this->next = other->next; /* (b) -> (d) */
            other->next = this;       /* (c) -> (b) */
        }
/* Note: when we get here, "this" will contain the last non-NULL node in the
** chain, and can be used to reset the tail-pointer
*/
return;
} 
```

# windows-runtime - 如何使用 Metro 应用程序中的旧 COM 组件

> ID：11281246
> 
> 赞同：4
> 
> 时间：2012-07-01T10:33:01.353
> 
> 标签：windows-runtime

我很难在 Metro 应用程序中使用 COM 对象。如 MSDN 中所述，规则是：

1.  只能使用免注册 COM 对象
2.  COM 只能使用 Metro 应用程序允许的那些 API。

但我的 CoCreateInstanceFromApp 总是返回 REGDB_E_CLASSNOTREG。在桌面应用程序中，SideBySide 执行失败的错误被写入事件日志。但在 Metro 应用程序中，不会将此类错误写入事件日志。

我可以使用桌面应用程序中的相同 COM 对象，因为在类似的清单文件上无需注册。

我错过了什么吗？谁能帮帮我？

谢谢

# iphone - 手势识别器委托：如何实现触摸委托功能

> ID：11281251
> 
> 赞同：2
> 
> 时间：2012-07-01T10:34:15.523
> 
> 标签：iphone, uiview, delegates, uigesturerecognizer

`touchBegan:withEvent`我实际上是在尝试在`touchEnded:withEvent`实现`gestureRecognizers`.

当我尝试将识别器对象的委托设置为 self 时，我的 SDK 会出现一条警告消息，指出“不兼容的类型 id”。

我知道 GestureRecognizer 的委托协议不包括这样的功能，但我不知道应该触发哪个委托才能在我的自定义视图中使用上述功能。

非常感谢您的回复

维克多-玛丽

这是我的代码：

```
@interface TapScrollView : UIScrollView {

  //  id<TapScrollViewDelegate> delegate;
    NSMutableArray *classementBoutons;
    int n;
    int o;
//UIImageView *bouton;

}
//@property (nonatomic, assign) id<TapScrollViewDelegate> delegate;
//@property (nonatomic, retain) UIImageView *bouton;

//@property (strong, nonatomic) UIPanGestureRecognizer *bouton01pan;

-(id)init;
-(void)initierScrollView;

-(void) createGestureRecognizers;
-(IBAction)handlePanGesture:(UIPanGestureRecognizer*)sender;

@end

#import "TapScrollView.h"

@implementation TapScrollView

//@synthesize bouton;

- (void)setUpBoutonView {
    // Create the placard view -- its init method calculates its frame based on its image
    //boutonHome *aBoutonMain = [[boutonHome alloc] init];
    //self.boutonMain = aBoutonMain;
    //[boutonMain setCenter:CGPointMake(200, 200)];
    //[self addSubview:boutonMain];
}

- (id) init 
{
    if (self = [super init])
    {
        NSLog(@"Classe TapScrollView initiée");
    }
    return self;
}

-(void)initierScrollView
{
    int i;
    for (i=0; i<6; i++) {

        UIImage *image = [UIImage imageNamed:@"back.png"];
        UIImageView *bouton = [[UIImageView alloc] initWithImage:image];
        [bouton setTag:i];
        [bouton setFrame:CGRectMake(72+20*i,10,62,55)];
        [classementBoutons insertObject:bouton atIndex:i];
        bouton.userInteractionEnabled = YES;

        UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
        recognizer.delegate = self; 
        [bouton addGestureRecognizer:recognizer];
        [self addSubview:bouton];
}
}
//- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
//{    
//  UITouch *touch = [touches anyObject];
//[super touchesBegan:touches withEvent:event];

  //  for (o=1; o<6; o++) {
  // if ([touch view] ==  [self viewWithTag:o]) 
  // {
  //   UIPanGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:[classementBoutons objectAtIndex:o] action:@selector(handlePanGesture:)];
   // [[classementBoutons objectAtIndex:o] addGestureRecognizer:recognizer];
   // bouton01 = [self viewWithTag:o];
   // }
   // }

    //CGPoint touchPoint = [touch locationInView:self];
    //[self animateFirstTouchAtPoint:touchPoint];
  //  return;
//}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (n=0; n<6; n++) {
        NSLog(@"touche cancelled");
        [[classementBoutons objectAtIndex:n] setFrame:CGRectMake((72+20)*n,10,62,55)];
    }

}

//- (id<TapScrollViewDelegate>) delegate {
//   return (id<TapScrollViewDelegate>)super.delegate;
//}

//- (void) setDelegate:(id<TapScrollViewDelegate>) aDelegate 
//{
//    super.delegate = aDelegate;
//}

#define GROW_ANIMATION_DURATION_SECONDS 0.15
#define SHRINK_ANIMATION_DURATION_SECONDS 0.15

-(IBAction)handlePanGesture:(UIPanGestureRecognizer*)recognizer
{
    NSLog(@"Mouvement ok");
    CGPoint translation = [recognizer translationInView:self];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self];

}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:37:26.533

尝试指定：

```
@interface TapScrollView : UIScrollView <UIGestureRecognizerDelegate> { 
```

这样，您的警告应该消失了，尽管我不得不承认我还没有完全清楚您要完成的工作，因此可能还有其他问题。

# sql - 算术异常、数值溢出或字符串截断

> ID：11281252
> 
> 赞同：7
> 
> 时间：2012-07-01T10:34:33.257
> 
> 标签：sql, firebird, mybatis

我使用firebird作为我的数据库和mybatis来操作数据，但是当我使用长度大于5的关键字运行查询时，会发生以下错误：

```
### Cause: org.firebirdsql.jdbc.FBSQLException: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -303
arithmetic exception, numeric overflow, or string truncation
No message for code 335544914 found. 
```

如果它的长度小于 6，它运行良好。我将mybatis和firebird更新到最新版本，结果是一样的。

详细的sql如下：

```
 select b.*, bt.type_no as "type.id" , bt.type_dsc "type.name", 
  bt.show "type.show", bt.del "type.del" 
from 
  book b,book_type bt 
where 
  b.type_no=bt.type_no and bt.del=0 
  and b.del=0 and b.type_no in (74) 
  and (( lower(title) like '%aaaaaaaaa%' ) or ( lower(content) like '%aaaaaaaaa%' )) 
order by bt.show desc,b.type_no,b.id 
```

其次是错误日志：

```
2012-07-03 23:20:14 [DEBUG](org.apache.ibatis.logging.commons.JakartaCommonsLoggingImpl:42) ooo Using Connection [org.firebirdsql.jdbc.FBConnection@1389b3f]
2012-07-03 23:20:14 [DEBUG](org.apache.ibatis.logging.commons.JakartaCommonsLoggingImpl:42) ==>  Preparing: select b.*, bt.type_no as "type.id" , bt.type_dsc "type.name", bt.show "type.show", bt.del "type.del" from book b,book_type bt where b.type_no=bt.type_no and bt.del=0 and b.del=0 and (( lower(title) like ? ) or ( lower(content) like ? )) order by bt.show desc,b.type_no,b.id 
2012-07-03 23:20:14 [DEBUG](org.apache.ibatis.logging.commons.JakartaCommonsLoggingImpl:42) ==> Parameters: %aaaaaaaa%(String), %aaaaaaaa%(String)
2012-07-03 23:20:14 [ERROR](frame.FrmMainI:1018) org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.firebirdsql.jdbc.FBSQLException: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -303
arithmetic exception, numeric overflow, or string truncation
No message for code 335544914 found.
### The error may involve book.note.findByTypeTitleContent-Inline
### The error occurred while setting parameters
### Cause: org.firebirdsql.jdbc.FBSQLException: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -303
arithmetic exception, numeric overflow, or string truncation
No message for code 335544914 found.
org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.firebirdsql.jdbc.FBSQLException: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -303
arithmetic exception, numeric overflow, or string truncation
No message for code 335544914 found.
### The error may involve book.note.findByTypeTitleContent-Inline
### The error occurred while setting parameters
### Cause: org.firebirdsql.jdbc.FBSQLException: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -303
arithmetic exception, numeric overflow, or string truncation
No message for code 335544914 found.
    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:23)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:104)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:95)
    at dao.AbsBaseIbatisDAO.selectList(AbsBaseIbatisDAO.java:96)
    at dao.NoteDAO.findByTypeTitleContent(NoteDAO.java:19)
    at bo.BookBO.findNoteByTypeTitleContent(BookBO.java:118)
    at frame.FrmMainI.search(FrmMainI.java:1011)
    at frame.FrmMainI$28.keyReleased(FrmMainI.java:839)
    at java.awt.Component.processKeyEvent(Component.java:6249)
    at javax.swing.JComponent.processKeyEvent(JComponent.java:2801)
    at java.awt.Component.processEvent(Component.java:6065)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4651)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1850)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:712)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:990)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:855)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:676)
    at java.awt.Component.dispatchEventImpl(Component.java:4523)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:616)
    at java.awt.EventQueue$2.run(EventQueue.java:614)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:613)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: org.firebirdsql.jdbc.FBSQLException: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -303
arithmetic exception, numeric overflow, or string truncation
No message for code 335544914 found.
    at org.firebirdsql.jdbc.AbstractPreparedStatement.internalExecute(AbstractPreparedStatement.java:730)
    at org.firebirdsql.jdbc.AbstractPreparedStatement.execute(AbstractPreparedStatement.java:663)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
    at $Proxy1.execute(Unknown Source)
    at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:57)
    at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:70)
    at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:57)
    at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:267)
    at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:141)
    at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:124)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:101)
    ... 40 more 
```

而mybatis sql定义：

```
 <select id="findByTypeTitleContent"  parameterType="map" resultMap="booknoteMap">
          select
             b.*,
             bt.type_no as "type.id" ,
             bt.type_dsc "type.name",
             bt.show "type.show",
             bt.del "type.del"
          from
               book b,book_type bt
          where
              b.type_no=bt.type_no
              and bt.del=0
              and b.del=0
              <if test="typeNos!=null">
                 and b.type_no in (
                  <foreach collection="typeNos" item="t" separator=",">
                      #{t.id}
                 </foreach>
                 )
             </if>

             <if test="keys!=null">
                  and ((
                 <foreach collection="keys" item="key"  separator="and" >
                         lower(title) like #{key}
                 </foreach>
                 ) or (
                  <foreach collection="keys" item="key"  separator="and" >
                         lower(content) like #{key}  
                 </foreach>
                 ))
            </if>
          <choose >
                 <when test="typeNo>0">
                     order by bt.show desc, b.id
                 </when>
                 <otherwise>
                     order by bt.show desc,b.type_no,b.id
                 </otherwise>
             </choose>
        </select> 
```

我做了更多的测试，发现无论关键字多长，标题都可以，当长度大于5时，内容会导致错误。标题列是varchar（100），内容是`Blob sub_type 1`，但无论如何在sql控制台中完全没问题这让我很困惑，在java中运行时会发生错误

有任何想法吗？已经很久了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:16:52.067

您可能会遇到这个错误：[http](http://tracker.firebirdsql.org/browse/CORE-3353) ://tracker.firebirdsql.org/browse/CORE-3353 ，它已在 Firebird 2.5.1 中得到解决。在此错误中，`LIKE`-condition 中的 BLOB 参数被描述为 VARCHAR(30) 参数。在 UTF8 连接字符集的情况下，Jaybird 实际上会将其视为 VARCHAR(5)，并且由于 Jaybird 的特定行为，如果它是以 % 结尾的类似模式，则最多允许 6 个字符。

所以，[升级到 Firebird 2.5.1](http://www.firebirdsql.org/en/firebird-2-5/)应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T15:02:03.350

```
select b.*, bt.type_no as "type.id" , bt.type_dsc "type.name", 
  bt.show "type.show", bt.del "type.del" 
```

我认为在几个地方缺少“as”这个词

```
select b.*, bt.type_no as "type.id" , bt.type_dsc AS "type.name", 
  bt.show AS "type.show", bt.del AS "type.del" 
```

# xml - 为什么这个 XDocument 验证失败？

> ID：11281253
> 
> 赞同：5
> 
> 时间：2012-07-01T10:35:01.040
> 
> 标签：xml, xsd

给定模式（匿名，重命名感兴趣的关键点，其余部分省略）：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="inspec"
    targetNamespace="the_right_namespace"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
  <xs:element name="inspec">
    <xs:complexType>
      <xs:all>
        <xs:element name="a_scalar_property" type="xs:int"/>
        <xs:element name="a_collection_property">
          <xs:complexType>
            <snip>
          </xs:complexType>
        </xs:element>
        <xs:element name="another_collection_property">
          <xs:complexType>                
            <snip>
          </xs:complexType>
        </xs:element>                       
      </xs:all>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

和实例（使用 VB xml 文字声明）：

```
Dim xDocument = 
<x:inspec xmlns:x='the_right_namespace'>
<a_collection_property/>
<another_collection_property/>
</x:inspec> 
```

验证失败并显示消息`The element 'inspec' in namespace 'the_right_namespace' has incomplete content. List of possible elements expected: 'a_scalar_property'.`

为什么？`all`根据 W3Schools的说法，该元素：

“all 元素指定子元素可以以任何顺序出现，并且每个子元素可以出现零次或一次。”

省略`a_scalar_property`与包含零次相同。为什么此文件无法验证？

并且不要说“发布完整代码”之类的东西——这不是我的 IP，我已经匿名了，这是有充分理由的。它几乎没有其他东西，我已经用这个最小的例子进行了测试，它给出了相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T10:50:07.123

您需要为中`minOccurs="0"`的每个可选元素指定`xs:all`：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="inspec"
    targetNamespace="the_right_namespace"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
    <xs:element name="inspec">
        <xs:complexType>
            <xs:all>
                <xs:element name="a_scalar_property" type="xs:int" minOccurs="0" />
                <xs:element name="a_collection_property" minOccurs="0">
                    <xs:complexType>
                        <!-- snip -->
                    </xs:complexType>
                </xs:element>
                <xs:element name="another_collection_property" minOccurs="0">
                    <xs:complexType>
                        <!-- snip -->
                    </xs:complexType>
                </xs:element>
            </xs:all>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T10:48:23.447

要使元素成为可选元素， minOccurrs 属性应该为 0，即使在 <all> 组中也是如此。通过阅读 XML 模式规范来获得它确实很麻烦，但是依赖 w3schools 并不是一个好的选择。

# ruby-on-rails - Rails：我可以看到哈希的内容吗

> ID：11281255
> 
> 赞同：0
> 
> 时间：2012-07-01T10:35:17.587
> 
> 标签：ruby-on-rails, hash

有没有办法可以看到通过表单或rails中的链接发送的哈希的内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T10:40:21.890

在您的控制器方法中，只需检查`params`哈希。例如，

```
class UsersController < ApplicationController
  def index
    puts params.inspect
  end
end 
```

您还可以使用 Chrome 开发人员工具或 Firebug 等工具将这些参数作为请求的一部分查看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T10:50:22.730

发送到请求的参数会打印到开发中的日志文件中。

如果您查看最后几百行，`log/development.log`您会发现大致如下：

```
Started GET "/?page=2" for 127.0.0.1 at 2012-07-01 03:05:05 -0600
Processing by ListsController#index as JSON
  Parameters: {"page"=>"2"} 
```

您可以通过从控制器检查对象来增强这一点，或者如 Ben 所述。

您可以通过使用将此输出到日志文件，`Rails.logger.debug params.inspect`或者通过执行将其输出到您的视图的响应中`<%= params.inspect %>`

# javascript - 根据文本框中的值范围重定向到 iframe 中的 URL

> ID：11281260
> 
> 赞同：2
> 
> 时间：2012-07-01T10:36:01.883
> 
> 标签：javascript, url, redirect, range, comparison-operators

嗨，我正在尝试设置一个 RSVP 页面，但遇到一些问题，因为一些客人被邀请参加活动 1，一些参加活动 2，另一些参加这两个活动。我正在尝试外交，并为每种类型的客人设置不同的 RSVP 表格。

我希望做到以下几点： - 有一个弹出窗口或只是一个邀请客人输入号码的页面（在邀请卡上找到）。- 根据输入的值，客人将被重定向到特定页面。（例如，nos 0001 - 1000 重定向到第一页，1001 - 2000 重定向到第二页，等等）

我看过一些答案，但它们都是针对特定值而不是范围（例如，输入“123”，它指向“url.com/123”）。我正在尝试做的事情可能吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T14:52:14.353

使用正则表达式分隔每个组：

```
 function iframe_url(path)
     {
     if (/[0][0-9][0-9][0-9]|1000/.test(path) )
       {
       window.frames[0].location.href = "http://www.stackoverflow.com";
       }
     else if (/[1][0-9][0-9][1-9]|2000/.test(path) )
       {
       window.frames[0].location.href = "http://meta.stackoverflow.com";
       }
     }

   iframe_url("1000") //stackoverflow.com
   iframe_url("1999") //meta.stackoverflow.com 
```

使用模运算符进行余数检查也可以：

```
 function iframe_url(path)
     {
     if (1000 % path < 1000)
       {
       window.frames[0].location.href = "http://www.stackoverflow.com";
       }
     else if (2000 % path < 2000)
       {
       window.frames[0].location.href = "http://meta.stackoverflow.com";
       }
     } 
```

# html - 缩进 docbook 中的文本

> ID：11281261
> 
> 赞同：0
> 
> 时间：2012-07-01T10:36:23.440
> 
> 标签：html, xml, docbook, docbook-5

我想在我在 docbook 5 中写的文章中缩进我的文本。我还需要为我的文本添加颜色。那可能吗？如果有怎么办？我尝试如下缩进，但是当我获取它的 html 输出时它不可见。（这里我试图将文本“Kerfun”对齐到中心）我不知道颜色变化。有人可以告诉我怎么做吗？我哪里出错了？

```
<dbk:para text-indent="center">Kerfun</dbk:para>
   <dbk:para text-indent="center">
      <dbk:emphasis role="bold">Fadiah</dbk:emphasis>
   </dbk:para> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:07:59.393

您尚未指定您的操作系统或工具链。

**要格式化您的 xml：** 我建议使用“ [xmllint](http://xmlsoft.org/xmllint.html) -format”命令

**验证您的 xml：** 可以使用相同的命令来确保您的文档对 docbook 架构有效

**为您的 xml 着色：** 这在很大程度上取决于您使用的编辑器。我个人是[gvim](http://www.vim.org/)的粉丝，它默认启用了 XML 高亮显示。

## 更新

如前所述，我不是 Windows 用户，但 2 分钟的谷歌搜索使我得到以下信息：

*   Notepad++ 似乎有一个[XML 插件](http://sourceforge.net/projects/npp-plugins/)。来源是以下[链接](https://superuser.com/questions/3808/give-me-a-sweet-and-simple-xml-viewer-editor-for-windows)

# c# - C# 反序列化错误

> ID：11281262
> 
> 赞同：-6
> 
> 时间：2012-07-01T10:36:42.923
> 
> 标签：c#, serialization, deserialization

我正在使用 Visual C# Express，我有两个项目，一个名为 mapEditor，第二个名为 Game。
我的问题是我正在将一个对象序列化为 mapEditor 中的一个文件，并且我想在 Game 项目中反序列化该对象。
我在两个项目中都得到了完全相同的类（我正在序列化的对象），它只在 mapEditor 中反序列化。
请给出一个解决方案，我已经坚持了几个月。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:07:09.917

我认为这两个项目的命名空间不同，所以这就是它不起作用的原因。

尝试制作一个包含该类的动态链接库，并在两个项目中使用相同的库。这样，您也可以在一个项目中修改该类，它将在第二个项目中自动修改。

## 如何创建动态链接库：

1.  在 Visual Studio 中打开新项目窗口
2.  选择项目类型*类库*
3.  确保将项目添加到当前解决方案中，并接受
4.  在新创建的项目中添加你的类，确保它们是`public`
5.  在所有其他项目中添加对库项目的引用。

# android - 模拟 Nexus 7

> ID：11281270
> 
> 赞同：36
> 
> 时间：2012-07-01T10:38:02.983
> 
> 标签：android, android-emulator

我想模仿 Nexus 7，但我不知道要使用什么值。
皮肤：内置或自定义分辨率？我应该使用哪些硬件属性？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-01T10:45:22.427

如果您正在运行最新版本的插件 (20)，那么当您创建新设备时，“WXGA800-7in”的“皮肤”下拉列表中有一个选项

```
Abstract LCD Densit: 213
Hardware Back/Home keys: no
Keyboard lid support: no
Max VM Heap size: 48
Device ram: 1024 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T10:00:15.240

在最新版本的插件（21.1.0）中，您可以专门模拟 Nexus 7。

在 AVD 管理器中创建新设备时，您可以选择

> "Nexus 7(7.27",800 x 1280: tvdpi)"

设备下拉菜单中的选项。

这将创建 Nexus 7 模拟器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T10:42:23.513

您无法专门模拟 Nexus 7，但如果您以 API 级别 16 为目标并将分辨率设置为 800x1280，您将拥有与它非常相似的环境。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T22:23:59.983

我发现在选择 WXGA800-7in 后，我需要删除“设备内存大小”选项（否则我会收到“无法分配内存：8”错误），然后添加值为“是”的“GPU 仿真”选项删除“跳过 xx 帧！” 编舞者的消息。

# html - 为什么固定元素覆盖浮动元素？

> ID：11281271
> 
> 赞同：0
> 
> 时间：2012-07-01T10:38:10.893
> 
> 标签：html, css, css-float, position

的HTML是：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="wp-1-main.css">
    <title></title>
</head>
<body>
    <div class="wrapper">
        <div class="textArea"></div>
    </div>
    <div class="imageLine">
    </div>
</body>
</html> 
```

和CSS是

```
.wrapper{
    width: 100%;
    height: 400px;
    position: fixed;
    top: 50%;
    margin-top: -200px;
    border-top: solid 1px black;
    border-bottom: solid 1px black;
    background-color: pink;
}

.imageLine{
    width: 500px;
    height: 1500px;
    float: right;
    margin-right: 60px;
    background-color: grey;

} 
```

我的目标是让 .imageLine 覆盖一些 .wrapper ，并且包装器垂直居中，并且始终位于视口中。但这些代码证明 .wrapper 覆盖了 .imageLine 。有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T10:51:42.140

你可以使用[z-index](http://www.quackit.com/css/properties/css_z-index.cfm)

较高的 z 索引将排在较低的 z 索引之前。

# django - django 错误：__init__() 只需要 1 个参数（给定 2 个）

> ID：11281279
> 
> 赞同：0
> 
> 时间：2012-07-01T10:40:06.910
> 
> 标签：django, sqlalchemy, arguments

我编写了一个名为“库”的 sqlalchemy 模型：

```
class Library(Base):
    __tablename__ = 'library'
    id = Column(Integer, primary_key=True)
    details = Column(String)

    def __init__(self, details):
        self.details = details

    def __repr__(self):
        return u"Library(%s)" % (self.details) 
```

然后，在 views.py 文件中，我写了：

```
def is_lib_empty():
    return len(session.query(Library).all()) <= 0

def populateLib():
    new_libs = [Library('one'), Library('two'), Library('three'), Library('four')]
    session.add_all(new_libs)
    session.commit()

def index(request):
    if is_lib_empty():    
        populateLib()

    libs = session.query(Library).all()
    return render_to_response('../templates/index.html',{'libs':libs}) 
```

然后我运行*python manage.py runserver*，它显示了一条错误消息：

```
__init__() takes exactly 1 argument (2 given) 
```

我应该怎么做才能解决这个问题？

```
TypeError at /
__init__() takes exactly 1 argument (2 given)
Request Method: GET
Django Version: 1.3.1
Exception Type: TypeError
Exception Value:    
__init__() takes exactly 1 argument (2 given)
Exception Location: /cs/wetlab/Limor/workspace/Yeasti/Yeasti/loose_coupling/../loose_coupling/with_sqlalchemy/views.py in populateLib, line 25
Python Executable:  /sw/bin/python2.7
Python Version: 2.7.2
Python Path:    
['/cs/wetlab/Limor/workspace/Yeasti/Yeasti/loose_coupling',
 '/sw/lib/python27.zip',
 '/sw/lib/python2.7',
 '/sw/lib/python2.7/plat-darwin',
 '/sw/lib/python2.7/plat-mac',
 '/sw/lib/python2.7/plat-mac/lib-scriptpackages',
 '/sw/lib/python2.7/lib-tk',
 '/sw/lib/python2.7/lib-old',
 '/sw/lib/python2.7/lib-dynload',
 '/sw/lib/python2.7/site-packages',
 '/sw/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info']
Server time:    Sun, 1 Jul 2012 05:50:03 -0500  

Environment:
Request Method: GET

Django Version: 1.3.1
Python Version: 2.7.2
Installed Applications:
['loose_coupling.with_sqlalchemy']
Installed Middleware:
('django.middleware.common.CommonMiddleware',)

Traceback:
File "/sw/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/cs/wetlab/Limor/workspace/Yeasti/Yeasti/loose_coupling/../loose_coupling/with_sqlalchemy/views.py" in index
  39\.     populateLib()
File "/cs/wetlab/Limor/workspace/Yeasti/Yeasti/loose_coupling/../loose_coupling/with_sqlalchemy/views.py" in populateLib
  25\.     new_libs = [Library('one'), Library('two'), Library('three'), Library('four')]

Exception Type: TypeError at /
Exception Value: __init__() takes exactly 1 argument (2 given) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:00:26.577

更新：

您始终可以使用默认构造函数，使用关键字参数：

```
Library(details='some details') 
```

如[http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html中所述](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html)

这由默认构造函数支持，无需覆盖它。无论如何，您的代码应该可以工作，除非某处有一些覆盖......

# javascript - 如何使用 css 和 javascript 创建看起来自然的线条？

> ID：11281280
> 
> 赞同：0
> 
> 时间：2012-07-01T10:40:06.667
> 
> 标签：javascript, css, html

我正在尝试创建一条看起来自然的线条，而不是通过计算机创建直线。我目前正在这样做：

CSS：

```
#line {
width: 600px;
height: 1px;
background-color: black;
} 
```

HTML：

```
<div id="line"></div> 
```

但这会给我一条直线。有没有办法在必要时使用 css 和 javascript 完成一条看起来很自然的线条？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:47:32.697

使用 css，你可以画任何东西。假设你有一个 100px x 100px 的 div。在这个 div 中，你有 10000 个 1px x 1px 的 div 单元格。您可以使用 css 将每个单元格的颜色更改为您想要的任何颜色，因此您甚至可以呈现图像。

看看这个网站： http: [//neil.fraser.name/software/img2html/](http://neil.fraser.name/software/img2html/)

您可以上传图片，您最终会得到呈现此图片的 html。正如您在 tux.jpg 中看到的那样，与 3kB 的图像相比，您得到的大小 > 280kB。所以你可以看到它没有意义。你想要达到的也没有。

只需画线，将其保存为图像并将其放在您的网站上。

编辑：您也可以像其他人提到的那样使用画布，但它不适用于旧浏览器或禁用 js 的浏览器。为此使用画布也有点矫枉过正..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T10:46:25.703

听起来你想要一个[图像](https://developer.mozilla.org/en/HTML/element/img)。如果你真的想用 javascript 来做，试着像[这个很棒的教程](http://dev.opera.com/articles/view/html5-canvas-painting/)一样使用画布。

**编辑**：我的第二个链接是错误的，看起来很滑稽。对不起！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T10:48:01.857

有许多解决方案（图像、SVG、画布）。最简单和最防弹的方法是在 Illustrator（或者，可能更有可能...... inkscape）中制作图像并渲染它。

如果您想要更具可扩展性的东西，上面提到的任何一个程序都会给您一个 SVG。

为此跳过画布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T10:50:44.187

我认为您正在寻找的是一个使用 div 创建线条的库。我过去用过[这个](http://trickyscripter.com/examples/after/jsgraphics_e.htm)，它成功了。对于椭圆，我可以稍微改进一下。

但无论如何，我使用它是因为那是 2009 年，而 HTML5 还很遥远。现在有更现代的方法来创造同样的效果。

# python - 使用 RawQuerySet 在 Django 中进行延迟查询

> ID：11281284
> 
> 赞同：0
> 
> 时间：2012-07-01T10:40:59.593
> 
> 标签：python, django

我在理解 Django 中原始查询的行为时遇到问题。问题在于使用 RawQuerySet 时对数据库的查询数量。看起来每次我使用 RawQuerySet 都会发送新的数据库查询。例如，使用此代码：

```
 reviews = Reviews.objects.raw('select * from reviews rv [...]')

    count = len(list(reviews))
    avg_rating = 0.0

    if count > 0:
        for r in reviews:
            avg_rating = avg_rating + r.stars       
            avg_rating = avg_rating/float(count)

    avg_rating = avg_rating/float(count) 
```

每次使用“评论”都会产生新的、相同的查询。为什么 RawQuerySet 这么懒？在我看来，一旦有人决定使用原始查询，他就不需要 Django 的额外“帮助”。我错过了什么吗？有没有办法在这种情况下只做一个查询？是的，我决定将 Review.objects.raw() 转换为 list() 并有所帮助，但它仍然困扰着我，为什么要这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:41:13.097

问题来自您的`list(reviews)`表达 - 这迫使 RawQuerySet 尝试以一种或另一种方式从初始查询构建完整的模型实例（可能不是最有效的方式，但这是另一回事）。如果没有此行并假设您没有访问相关对象，则只会进行一个查询，如您在此代码段中所见：

```
>>> from survey.models import Question
>>> from django.db import connection
>>> import pprint
>>> connection.queries
[]
>>> raw = Question.objects.raw("select * from survey_question")
>>> for q in raw:
...     print q.id
... 
1
2
3
4
>>> connection.queries
[{'time': '0.000', 'sql': 'select * from survey_question'}]
>>> list(raw)
[<Question: Survey Essai1 (root) question #1 - Depuis combien de temps programmez vous ?>, <Question: Survey Essai1 (root) question #2 - Comment avez vous débuté ?>, <Question: Survey Essai1 (root) question #3 - Quel est votre niveau de formation>, <Question: Survey Essai1 (root) question #4 - Cette formation porte-t-elle sur l'informatique ?>]
>>> pprint.pprint(connection.queries)
[{'sql': 'select * from survey_question', 'time': '0.000'},
 {'sql': 'select * from survey_question', 'time': '0.000'},
 {'sql': 'SELECT `survey_survey`.`id`, `survey_survey`.`user_id`, `survey_survey`.`title`, `survey_survey`.`notes`, `survey_survey`.`description`, `survey_survey`.`instructions`, `survey_survey`.`date_created`, `survey_survey`.`starts_on`, `survey_survey`.`ends_on` FROM `survey_survey` WHERE `survey_survey`.`id` = 1 ',
  'time': '0.001'},
 {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`password`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`is_superuser`, `auth_user`.`last_login`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 ',
  'time': '0.001'},
 {'sql': 'SELECT `survey_survey`.`id`, `survey_survey`.`user_id`, `survey_survey`.`title`, `survey_survey`.`notes`, `survey_survey`.`description`, `survey_survey`.`instructions`, `survey_survey`.`date_created`, `survey_survey`.`starts_on`, `survey_survey`.`ends_on` FROM `survey_survey` WHERE `survey_survey`.`id` = 1 ',
  'time': '0.000'},
 {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`password`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`is_superuser`, `auth_user`.`last_login`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 ',
  'time': '0.000'},
 {'sql': 'SELECT `survey_survey`.`id`, `survey_survey`.`user_id`, `survey_survey`.`title`, `survey_survey`.`notes`, `survey_survey`.`description`, `survey_survey`.`instructions`, `survey_survey`.`date_created`, `survey_survey`.`starts_on`, `survey_survey`.`ends_on` FROM `survey_survey` WHERE `survey_survey`.`id` = 1 ',
  'time': '0.000'},
 {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`password`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`is_superuser`, `auth_user`.`last_login`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 ',
  'time': '0.000'},
 {'sql': 'SELECT `survey_survey`.`id`, `survey_survey`.`user_id`, `survey_survey`.`title`, `survey_survey`.`notes`, `survey_survey`.`description`, `survey_survey`.`instructions`, `survey_survey`.`date_created`, `survey_survey`.`starts_on`, `survey_survey`.`ends_on` FROM `survey_survey` WHERE `survey_survey`.`id` = 1 ',
  'time': '0.000'},
 {'sql': 'SELECT `auth_user`.`id`, `auth_user`.`username`, `auth_user`.`first_name`, `auth_user`.`last_name`, `auth_user`.`email`, `auth_user`.`password`, `auth_user`.`is_staff`, `auth_user`.`is_active`, `auth_user`.`is_superuser`, `auth_user`.`last_login`, `auth_user`.`date_joined` FROM `auth_user` WHERE `auth_user`.`id` = 1 ',
  'time': '0.000'}]
>>> 
```

现在的重点是：您为什么要使用 RawQueryset 进行上述计算？

我假设`avg_rating = avg_rating/float(count)`循环中的第一行 - 是一个复制粘贴错误（如果不是，我很想知道更多关于你对“平均”的定义）。然后你只需要一个查询（不需要循环也不需要 python 计算）来要求数据库进行计算。您可以使用原始 sql 执行此操作：

```
select avg(stars) from reviews; 
```

或使用 ORM 的聚合函数（参见[https://docs.djangoproject.com/en/1.4/topics/db/aggregation/](https://docs.djangoproject.com/en/1.4/topics/db/aggregation/)）：

```
>>> from django.db.models import Avg
>>> Book.objects.all().aggregate(Avg('price')) 
```

# html - 我的布局在我的浏览器中看起来与在 Visual Studio 中的不同

> ID：11281286
> 
> 赞同：-2
> 
> 时间：2012-07-01T10:41:41.990
> 
> 标签：html, visual-studio, visual-studio-2008, layout

我正在使用 Visual Studio 2008 开发一个网站作为我项目的一部分。在运行时，一些文本框和按钮的大小与设计时不同，它们看起来拉长且更大。

在设计时放置各种控件时，我也遇到了问题，因为在运行时它们出现在网站的不同位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:34:52.490

Visual Studio 中的设计时 HTML 预览很糟糕，而且看起来不像最终产品。我会避免使用它。

在 Visual Studio 中设计布局的最佳解决方案是在编辑器中编写 HTML 和 CSS 代码以获得一般布局。然后构建并发布到您的服务器。在 Chrome 或 Firefox 等良好的开发浏览器中打开您的页面。打开开发工具并摆弄 CSS，直到它在浏览器中看起来不错。一次做一个元素，然后将新的 CSS 复制到 Visual Studio，再次构建/发布，然后刷新页面。

继续这样做，直到您找到所需的布局，然后在其他流行的浏览器中进行测试。

# java - Linux 和 Windows 上的路径变量

> ID：11281287
> 
> 赞同：1
> 
> 时间：2012-07-01T10:41:42.523
> 
> 标签：java, windows, linux, path

我在一个 Java 项目中有几个路径变量，它们在 Linux 上运行良好。这些变量存储在`.properties`文件中并在 Spring 应用程序上下文中使用。这是一个有效的名称变量示例`just.an.example=/home/username/settings/`：很简单，对吧？我正在尝试在 Windows 机器上运行这个应用程序。我尝试了以下方法：`just.an.example=d:/settings/`、`just.an.example=d\:/settings/`、`just.an.example=d\:\\settings\\`和`just.an.example=file:///d:/settings/`其他一些方法，但都没有奏效。

我得到 NullPointerException，这是尝试使用从文件夹中获取的文件的原因（这让我认为该文件夹不可见）。更具体地说，这些变量用作`File`类构造函数的参数。访问文件夹的权限是默认的，我刚刚创建了它们。

此示例变量的工作选项是什么？

**更新**：它终于可以工作了`just.an.example=D:/settings/`，不知何故，我不得不在重新安装它后重新导入 Maven 项目，不仅要更新依赖项，而且`D:/settings/`在这种情况下工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:53:10.313

如果`/home/username/settings/`等于`D:/settings/`，则最后一个是正确的。正斜杠对此效果很好，我已经多次做过这种事情。如果可以`D:/settings/`通过 Windows 资源管理器访问，那么 Java 应该也可以。尝试`D:/settings/`在 Windows 资源管理器中粘贴，看看会发生什么。

# actionscript-3 - 一个类可以检查它是否存在于 SWF 或 FLA 中？

> ID：11281292
> 
> 赞同：0
> 
> 时间：2012-07-01T10:42:22.943
> 
> 标签：actionscript-3, flash, actionscript-2, swc

我有一个 AS2 组件，我需要在 SWF 和 FLA 中表现出不同的行为。它可以以编程方式确定其状态吗？

这里的部分问题可能还在于，当我将它编译为 SWC 时，它可能不再认为它在 FLA 中。

因为我需要在某个时候将它移植到 AS3，所以我也不介意 AS3 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:28:31.293

除非 wvxvw 是正确的并且您正在使用实时预览进行某些操作，否则您的代码始终作为 swf 运行。Swc 和 fla 不执行任何操作。

在不同的上下文中获得不同的行为是可能的。最简单的方法是通过 swfobject & flashvars 设置一个标志（显然在浏览器中运行时）。

# node.js - Mongoose：MongoDB 追随者和更新时的结构

> ID：11281295
> 
> 赞同：0
> 
> 时间：2012-07-01T10:43:21.090
> 
> 标签：node.js, mongodb, mongoose

我正在为我的代码添加关注者和关注者：这里是代码。

总结一下，工作流程是这样的：我更新了一个followers数组，添加了以下人的ObjectId，反之亦然，但是在第一次更新时，我的doc返回0，这意味着还没有更新，你有什么提示?

```
 if (typeof(req.body.userToFollow) != 'undefined') {
    var conditions = { _id: req.user._id }
    , update = {"$addToSet":{following: req.body.userToFollow}}
    , options = {};

    Users.update(conditions, update, options, function(err, doc){
        if (!err && doc) {

            var reconditions = { _id: req.body.userToFollow }
            , reupdate = {"$addToSet": { followers : req.user._id } }
            , reoptions = {};
            Users.update(conditions, update, options, function(err, doc){
                if (!err && doc) {
                    var body = JSON.stringify(doc);
                    res.header('Content-Type', 'application/json');
                    res.end(body);
                } else {
                    console.log(err);
                }
            });
        } else {
            console.log("\n\n\n\n\n");
            console.log(doc);
        }
    });

} 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:47:07.670

通过`{safe:true}`将选项传递给 update() 来使用安全模式。然后您将能够检查更新的状态。

# c++ - 提升 any_range 性能：std::prev(iterator) 与 --iterator

> ID：11281298
> 
> 赞同：9
> 
> 时间：2012-07-01T10:43:42.333
> 
> 标签：c++, performance, boost, c++11, iterator

我最近开始更喜欢自由函数`std::next`以及`std::prev`显式复制和递增/递减迭代器。现在，我在一个非常具体的案例中看到了奇怪的行为，如果能帮助我揭开它的神秘面纱，我将不胜感激。

我有一个插值/外插函数在`boost::any_range`一些`X_type`. 范围类型的完整定义是：

```
boost::any_range <
    const X_type,
    boost::random_access_traversal_tag,
    const X_type,
    std::ptrdiff_t
> 
```

在`any_range`这种特殊情况下，从 a 中分配了`iterator_range`两个指向 的指针`const X_type`，这用作 a`X_type`的大约一半`data()`区域的视图`vector<char>`。

在 MSVC 2010 中编译我的应用程序，一切正常。在 MinGW g++ 4.7.0 中编译相同的代码，它似乎挂在一个特定的位置，然后我将其缩小到这个（稍微缩写）：

```
// Previously ensured conditions:
// 1) xrange is nonempty;
// 2) yrange is the same size as xrange.

auto x_equal_or_greater =
    std::lower_bound(std::begin(xrange),std::end(xrange),xval);

if (x_equal_or_greater == std::end(xrange))
{
    return *yit_from_xit(std::prev(x_equal_or_greater),xrange,yrange);
} 
```

单步执行 gdb 中的代码，我发现它并没有卡住，只是需要很长时间才能从单个`std::prev`调用中返回——在 libstdc++ 中，它是根据操作符`std::advance`并最终实现的`+=`。

只需将`return`行替换为：

```
auto xprev=x_equal_or_greater;
--xprev;
return *yit_from_xit(xprev,xrange,yrange); 
```

性能再次很棒，几乎没有延迟。

我知道使用类型擦除迭代器（那些`any_range`）的开销，但即便如此，上述两种情况真的应该承担如此不同的成本吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T22:53:29.977

好的，在回复了[SplinterOfChaos 的评论](https://stackoverflow.com/questions/11281298/boost-any-range-performance-stdpreviterator-versus-iterator#comment17991728_11281298)后，我意识到了一些事情。问题在于您使用了 any_range。特别是第三个参数，它表示 Reference 参数是一个`const int`. 在 boost 迭代器外观中，当引用不是真正的引用时，它将使用`std::input_iterator_tag`或不提供 STL 等效标记。

这与以下事实有关，严格来说，所有前向、双向和随机访问 STL 迭代器都必须为其引用类型使用真实引用。从 C++11 标准的 24.2.5 开始：

> 一个类或内置类型 X 满足前向迭代器的要求，如果
> 
> — X 满足输入迭代器 (24.2.3) 的要求，
> 
> — X 满足 DefaultConstructible 要求 (17.6.3.1)，
> 
> —**如果 X 是可变迭代器，则引用是对 T 的引用；如果 X 是 const 迭代器，则 reference 是对 const T 的引用**，
> 
> — 表 109 中的表达式是有效的并具有指定的语义，并且
> 
> — X 类型的对象提供多次通过保证，如下所述。

在这种情况下，`std::input_iterator_tag`当查询它时它会返回一个`iterator_category`，这会导致调用`std::prev()`转向*Undefined Behavior*。

无论哪种方式，解决方案都是（如果可能）将您的使用更改`boost::any_range`为以下内容：

```
 boost::any_range <
        const X_type,
        boost::random_access_traversal_tag,
        const X_type&,
        std::ptrdiff_t
    > 
```

这将导致它具有`iterator_category`of `std::random_access_iterator_tag`，并将按照您最初的预期执行操作。

# android - Draw9Patch 显示黑线

> ID：11281300
> 
> 赞同：2
> 
> 时间：2012-07-01T10:45:10.737
> 
> 标签：android, nine-patch

我正在努力使用draw 9补丁。我使用 draw 9 补丁创建了以下资产

![draw9补丁](../Images/499c9481917238b4b2d631936c9144c6.png)

但是，当我使用以下代码将其嵌入应用程序时：

```
<Button android:id="@+id/open_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/open_label"
        android:width="100dip"
       android:background="@drawable/simplebuttonbg"
        /> 
```

它不起作用并显示完整图像

![在此处输入图像描述](../Images/1fd91fa0d4b49b225e2e5fd057d25cef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:45:11.593

编辑：我刚刚在记录这个问题的过程中修复了它 - 所以认为分享它可能很有用：（希望它对某人有所帮助）

1.基本上你不能只设置按钮背景来绘制9个补丁。

1.  您需要先使用以下数据创建无状态可绘制对象：在您的可绘制对象文件夹中

    ```
    android:drawable="@drawable/simplebuttonbg_pressed"
    />
     <item
    android:state_focused="true" 
    android:state_enabled="true"
    android:drawable="@drawable/simplebuttonbg_pressed" /> 
    ```

2.  然后你可以将它作为一种风格或背景出色地应用！

# java - 是否必须在 linux 发行版中使用 open jdk 而不是 oracle 网站上提供的 jdk 版本

> ID：11281303
> 
> 赞同：1
> 
> 时间：2012-07-01T10:45:25.950
> 
> 标签：java, linux, eclipse, ubuntu

我是 Linux 新手并安装了 Ubuntu。美好的。我了解了文件系统的基础知识和要了解的基本知识。

我安装了Jdk1.7。通过从 oracle 网站下载相关的 .rpm 文件。我安装了 Eclipse。我在eclipse项目类路径中给出了已安装的jdk1.7 jre文件夹。

但它没有识别出这一点，并且没有编译一个简单的 java 代码。

在其中一个论坛中，我发现我们应该将 openjdk 用于 linux 发行版。

有人可以解释一下为什么会这样吗？我在这些 linux 发行版中从 oracle 网站安装 jdk7 有什么问题吗？

他们有什么不同？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:49:45.133

不，您不必使用 openjdk，任何 jdk 都应该可以正常工作。你说你给jdk中的jre路径，而不是jdk本身？JRE 没有编译器，JDK 有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:26:48.693

（oracle jdk（和 jre）工作得很好（在当前的 u05 版本中））。

鉴于我已经了解您解压/放置/安装 jdk 的位置（检查路径），以下命令应该可以为您解决很多问题。

```
sudo update-alternatives --install "/usr/bin/java" "java" "/usr/java/jdk1.7/bin/java" 1
sudo update-alternatives --install "/usr/bin/javac" "javac" "/usr/java/jdk1.7/bin/javac" 1
(
sudo update-alternatives --install "/usr/bin/javaws" "javaws" "/usr/java/jdk1.7/bin/javaws" 1
)

sudo update-alternatives --config java
sudo update-alternatives --config javac 
```

希望这应该让 ubuntu 照顾你的 java 特定环境。变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:15:43.117

Openjdk 或 icedtea 或 ... 是 JRE 或 JDK，它们试图尽可能地开放。Oracles JDK/JRE 在开源社区方面不够开放，这是普通 Linux 用户不希望在其 Linux 发行版中作为默认实现的东西。

对于要发布的产品，您应该指定支持/测试的 Java 实现。例如在性能或工具方面可能存在差异。

使用 eclipse 进行开发不一定需要 JDK，因为 eclipse 有自己的 Java 编译器。但建议使用JDK。它有很好的工具，对于某些项目，您需要一个 JDK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T10:58:55.573

尝试

```
sudo apt-get install openjdk-6-jdk eclipse 
```

看看它是否有帮助。

# ios - 通过经纬度和用户位置获取最近的物体？

> ID：11281305
> 
> 赞同：0
> 
> 时间：2012-07-01T10:46:12.707
> 
> 标签：ios, core-location

我有一个核心数据对象列表，每个对象都有一个经度和纬度属性。我有来自核心位置的用户位置。

我想检索离用户位置最近的对象？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:58:15.233

我不会用代码给你答案，因为你只是在问一个一般性问题。

但是，`CLLocation`调用中有一个有用的函数，`distanceFromLocation:`它具有签名：

```
- (CLLocationDistance)distanceFromLocation:(const CLLocation *)location 
```

执行此操作的方法是从 Core Data 存储中的位置存储（或创建）创建 CLLocation 对象，并使用用户当前位置，您可以使用此函数遍历位置列表以获取距离，然后返回返回值最小的位置作为最近的位置。

# python - SQLAlchemy - 一次搜索三个表

> ID：11281306
> 
> 赞同：3
> 
> 时间：2012-07-01T10:46:20.367
> 
> 标签：python, mysql, sqlalchemy, flask, flask-sqlalchemy

**编辑：** 请原谅，因为我刚刚意识到我在下面的示例中犯了一个错误。这是我想要实现的目标：

假设我有如下所述的三个表。当用户输入查询时，它将在所有三个表中搜索名称为 LIKE %query% 的结果，但只返回唯一结果。

这是一些示例数据和输出：

**数据：**

```
**Grandchild:**
id: 1
name: John
child_id: 1

**Grandchild:**
id: 2
name: Jesse
child_id: 2

**Child:**
id: 1
name: Joshua
parent_id: 1

**Child:**
id: 2
name: Jackson
parent_id: 1

**Parent:**
id: 1
name: Josie 
```

如果用户搜索“j”，它将返回两个 Grandchild 条目：John 和 Jesse。如果用户搜索“j, Joshua”，它将只返回其孩子是 Joshua 的 Grandchildren - 在这种情况下，只有 John。

**本质上**，我想搜索所有的孙子条目，然后如果用户输入更多的关键词，它会根据他们相关的子条目的名称过滤这些孙子。“j”将返回所有以“j”开头的孙子，“j, Josh”将返回所有以“j”开头且拥有 Child LIKE %Josh% 的孙子。

* * *

所以，我有这样的设置：

```
Grandchild{
   id
   name
   child_id
}

Child{
   id
   name
   parent_id
}

Parent{
   id
   name
} 
```

孙子链接/映射到孩子。Child 映射到 Parent。

我想做的是如下所示，我一次搜索所有三个数据库：

```
return Grandchild.query.filter(or_(
  Grandchild.name.like("%" + query + "%"),
  Grandchild.child.name.like("%" + query + "%"),
  Grandchild.child.parent.name.like("%" + query + "%")
)).all() 
```

显然上面的查询是不正确的，并返回一个错误：

```
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object has an attribute 'name' 
```

我正在尝试的正确方法是什么？

我正在运行 MySQL、Flask-SQLAlchemy（我相信它扩展了 SQLAlchemy）、Flask。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:01:22.673

至于我，最好修改你的数据模型（如果可能的话）。您可以像这样创建一个自引用表“人员”：

```
People
{ 
    id,
    name,
    parent_id,
    grandparent_id,
 } 

class People(Base):
    __tablename__ = "people"

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(Unicode(255), nullable=False)
    parent_id = Column(Integer, ForeignKey('people.id'))       # parent in hierarchy
    grandparent_id = Column(Integer, ForeignKey('people.id'))  # grandparent in hierarchy

    # relationships
    parent = relationship("People", primaryjoin="People.parent_id==People.id", 
                          remote_side=[id])
    grandparent = relationship("People", primaryjoin="People.grandparent_id==People.id", 
                               remote_side=[id]) 
```

然后事情变得更加明显：

```
session.query(People).filter(People.name.like("%" + query + "%")) 
```

# jquery - 在 jQuery masonry 中找到水平线上的最后一个框并添加 .last

> ID：11281311
> 
> 赞同：1
> 
> 时间：2012-07-01T10:47:25.013
> 
> 标签：jquery, responsive-design, jquery-masonry

我想为网页的主要布局使用 1140 响应式网格，为主页内容部分框使用 jquery masonry。

随着页面大小的变化，我需要将 .last 动态添加到水平行中的最后一个砌体框。

有谁知道我将如何解决这个问题或提供一个教程的网址？

我已经通过文档和谷歌搜索无济于事。

亲切的问候。

# php - 尝试使用 zend 框架连接到数据库时出错

> ID：11281319
> 
> 赞同：1
> 
> 时间：2012-07-01T10:48:21.700
> 
> 标签：php, oracle, zend-framework, stored-procedures, cursor

我正在使用 oracle 适配器连接到数据库，这是 application.ini 中的配置，

```
resources.db.adapter = "Oracle"
resources.db.params.host = "localhost"
resources.db.params.username = "user"
resources.db.params.password = "2012"
resources.db.params.dbname = "books"
resources.db.isDefaultTableAdapter = true 
```

在这里我如何调用存储过程

```
 $db = Zend_Db_Table::getDefaultAdapter();
   try {
        //    $sql = "select * from dual";
        $sql = "begin BA_OPERATIONS_PKG.GETMEMBERCRED(" .
                ":I_USER_ID, :DATA_REC); end;";

        $statement = new Zend_Db_Statement_Oracle($db, $sql);

        $params = array(
            'I_USER_ID' => $userId
        );

        // Create a cursor
        $cursor = new Zend_Db_Cursor_Oracle($db);

        // Bind the cursor as a parameter. This SHOULD push a new cursor in the
        // $_bindCursor stack from Zend_Db_Statement.
        $statement->bindCursor('DATA_REC', $cursor);

         $statement->execute($params);

        echo $cursor;

    } catch (Exception $e) {
        print_r($e->getMessage());
    } 
```

这是我的例外

```
 include_once(Zend\Db\Cursor\Oracle.php) [function.include-once]: failed to open stream: No such file or directory in D:\ZendFramework\library\Zend\Loader.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T13:43:20.290

我扩展了oracle适配器并添加了一个方法：

```
<?php

/**
 * @see Zend_Db_Adapter_Pdo_Oci
 */
require_once 'Zend/Db/Adapter/Oracle.php';

class Zend_Db_Adapter_Cds extends Zend_Db_Adapter_Oracle
{
    public function fetchCursor($sql, $bind = array())
    {
        $data = array();
        $conn = $this->getConnection();

        $curs = oci_new_cursor($conn);
        $stmt = oci_parse($conn, $sql);

        oci_bind_by_name($stmt, "cursor", $curs, -1, OCI_B_CURSOR);
        foreach ($bind as $key => &$val) {
            oci_bind_by_name($stmt, $key, $val, -1, OCI_ASSOC);
        }

        oci_execute($stmt);
        if ($e = oci_error($stmt)) {
            throw new Zend_Db_Adapter_Oracle_Exception($e, -1234);
        }

        oci_execute($curs);
        if (oci_fetch_all($curs, $data, 0, -1, OCI_FETCHSTATEMENT_BY_ROW)) {
            ;//var_dump($data);
        }

        oci_free_statement($stmt);
        oci_free_statement($curs);

        return $data;
    }
} 
```

# java - 为什么 Volatile 行为怪异

> ID：11281327
> 
> 赞同：8
> 
> 时间：2012-07-01T10:49:25.547
> 
> 标签：java, multithreading, volatile, synchronized

我最近经历了 volatile 关键字的这种奇怪行为。据我所知，

1.  volatile关键字应用于变量，以反映一个线程对变量数据所做的更改到另一个线程。

2.  volatile 关键字防止在线程上缓存数据。

我做了一个小测试…………

1.  我使用了一个名为 count 的整数变量，并在其上使用了 volatile 关键字。

2.  然后制作了 2 个不同的线程将变量值增加到 10000，因此最终结果应该是 20000。

3.  **但情况并非总是如此，使用 volatile 关键字，我不会始终获得 20000，而是 18534、15000 等......有时是 20000。**

4.  **但是当我使用同步关键字时，它工作得很好，为什么......？？**

谁能解释一下 volatile 关键字的这种行为。

我使用 volatile 关键字和带有 synchronzied 关键字的代码发布我的代码。

**下面的代码与变量计数上的 volatile 关键字的行为不一致**

```
public class SynVsVol implements Runnable{

    volatile int  count = 0;

    public void go(){

        for (int i=0 ; i<10000 ; i++){
             count = count + 1;
         }
    }

    @Override
    public void run() {
        go();
    }

    public static void main(String[] args){

        SynVsVol s = new SynVsVol();
        Thread t1 = new Thread(s);
        Thread t2 = new Thread(s);
        t1.start();
        t2.start();

        try {
            t1.join();
            t2.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("Total Count Value: "+s.count);
    }
} 
```

**以下代码与 go() 方法中的 synchronized 关键字完美结合。**

```
public class SynVsVol implements Runnable{

    int  count = 0;

    public synchronized void go(){
        for (int i=0 ; i<10000 ; i++){
             count = count + 1;
         }
    }

    @Override
    public void run() {
        go();
    }

    public static void main(String[] args){

        SynVsVol s = new SynVsVol();
        Thread t1 = new Thread(s);
        Thread t2 = new Thread(s);
        t1.start();
        t2.start();

        try {
            t1.join();
            t2.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("Total Count Value: "+s.count);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-01T10:54:25.187

`count = count + 1`不是原子的。它分为三个步骤：

1.  读取变量的当前值
2.  增加值
3.  将新值写回变量

这三个步骤交织在一起，导致执行路径不同，导致值不正确。[`AtomicInteger.incrementAndGet()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet%28%29)如果要避免使用 synchronized 关键字，请改用。

因此，尽管[volatile](http://www.javamex.com/tutorials/synchronization_volatile.shtml)关键字的作用与您描述的差不多，但这仅适用于每个单独的操作，而不适用于所有三个操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-01T10:54:31.570

`volatile`关键字*不是*同步原语。它只是防止在线程上缓存值，但不会防止两个线程同时修改相同的值并将其写回。

假设两个线程需要增加计数器，现在设置为 5。两个线程都看到 5，从中取出 6，然后将其写回计数器。如果计数器不是`volatile`，则两个线程都可以假设它们知道值为 6，并跳过下一次读取。然而，它是易变的，所以他们都会读回 6，并继续递增。由于线程没有步调一致，您可能会在输出中看到与 10000 不同的值，但您几乎不可能看到 20000。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T10:53:42.117

变量 is 的事实`volatile`并不意味着它所涉及的每个操作都是原子的。例如，这一行在`SynVsVol.Go`：

```
count = count + 1; 
```

将首先`count`读取，然后递增，然后将结果写回。如果某个其他线程将同时执行它，则结果取决于命令的交错。

现在，当您添加 , 时`syncronized`，会`SynVsVol.Go`以原子方式执行。即增量是由一个线程整体完成的，另一个线程在`count`完成之前不能修改。

最后，缓存仅在同步块中修改的成员变量要容易得多。编译器可以在获取监视器时读取它们的值，将其缓存在寄存器中，在该寄存器上完成所有更改，并最终在释放监视器时将其刷新回主内存。当您在同步块中调用时也是这种情况`wait`，并且当您使用其他线程`notify`时：缓存的成员变量将被同步，并且您的程序将保持连贯性。即使成员变量未声明为 volatile，也可以[保证：](http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#synchronization)

> 同步确保线程在同步块之前或期间写入的内存以可预测的方式对在同一监视器上同步的其他线程可见。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-01T10:53:55.580

您的代码已损坏，因为它将 a 上的读取和增量操作`volatile`视为原子操作，但事实并非如此。该代码不包含数据竞争，但它*确实*包含`int`.

# jquery - 将类添加到 jquery 循环插件中的活动幻灯片的链接

> ID：11281328
> 
> 赞同：0
> 
> 时间：2012-07-01T10:49:39.897
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我想向当前幻灯片的链接添加一个类。我的 JavaScript 代码是

```
$(document).ready (function() {
$('#slideshow').cycle({
            fx: 'fade',
            speed: 500,
            timeout: 1000,
            pause: 1,
            cleartype: true,
            cleartypeNoBg: true,
            pager: '#forpager',
            pagerAnchorBuilder: function(idx, slide) {
                return '#forpager li:eq(' + (idx) + ')';
            }
        });

    $('#forpager ul li a').click(function(){
      $('#forpager ul li a').removeClass("active");
      $(this).addClass("active");
    });

}); 
```

幻灯片的 html 代码是

```
<div id="forslideshow">
        <div id="slideshow">

            <div class="image">
            <center><img src="images/pic1.jpg" alt="Renny"/></center>
            </div>

            <div class="image">
            <center><img src="images/pic2.jpg" alt="Giselle"/></center>
            </div>

            <div class="image">
            <center><img src="images/pic3.jpg" alt="Emma Goldman"/></center>
            </div>

        </div>

        <div id="forpager">
        <ul>
            <li ><a  href="#"><img src="images/menupic.png"/></a></li>
            <li ><a  href="#"><img src="images/menupic.png"/></a></li>
            <li ><a href="#"><img src="images/menupic.png"/></a></li>
        </ul>
        </div>

    </div> 
```

问题是，当我单击特定链接时，该代码会出现幻灯片并且链接具有活动类，但是当幻灯片循环时，它们相应的链接不是没有活动类。谁能给我代码，它可以在幻灯片放映开始时以及当我不点击链接时添加/更改链接类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:00:55.870

以下代码正在运行。但在应用循环之前使用 updateActivePagerLink 函数。

```
$(document).ready (function() {

    $.fn.cycle.updateActivePagerLink = function(pager, currSlideIndex) {

                $(pager).find('li').removeClass('active')

                .filter('li:eq('+currSlideIndex+')').addClass('active');

    };

$('#slideshow').cycle({
            fx: 'fade',
            speed: 500,
            timeout: 1000,
            pause: 1,
            cleartype: true,
            cleartypeNoBg: true,
            pager: '#forpager',
        pagerAnchorBuilder: function(idx, slide) {
                return '#forpager li:eq(' + (idx) + ')';
            }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:54:54.340

我认为你应该在这里使用“之后”选项[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

```
$('#slideshow').cycle({
            fx: 'fade',
            speed: 500,
            timeout: 1000,
            pause: 1,
            cleartype: true,
            cleartypeNoBg: true,
            pager: '#forpager',
            pagerAnchorBuilder: function(idx, slide) {
                return '#forpager li:eq(' + (idx) + ')';
            },
            after: function() {
              $('#forpager ul li a').removeClass("active");
              $(this).addClass("active");
            }
 }); 
```

# .net - DataContext 范围最佳实践

> ID：11281329
> 
> 赞同：2
> 
> 时间：2012-07-01T10:49:43.570
> 
> 标签：.net, performance, linq-to-sql, datacontext

使用 Linq-to-Sql 时，Visual Studio 会为您创建一个 DataContext 类。我想知道什么时候实例化这个上下文，在我的一个项目中，我使用了一个 DataContext 实例来处理大约 300 个 CRUD 命令（整个项目），它解决了一个我后来设法解决的小问题，在我最近的项目中我有为每个 CRUD 命令创建了一个实例，现在的问题是，使用 DataContext 的最佳方法是什么？每个命令一个还是每个项目一个？或者每笔交易一个（我认为这也是一个好主意）？每种方式的速度和性能有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T10:54:52.067

当您将其打开太短时，您会浪费性能，因为实例化 DataContext 并不是完全免费的。它很便宜，但可以衡量。它显示在配置文件中。

当您将其打开太久时，您也会遇到问题：

1.  物体开始在里面堆积
2.  无论如何，您不能同时在多个线程或多个事务中使用它
3.  如果您的 SubmitChanges 之一由于某种逻辑原因失败，则上下文已失效，因为无论您重试多少次，都会永远出现相同的错误

以下是一些你不应该在没有深入了解的情况下做的规则：

1.  为多个 HTTP 请求/WCF 调用提供一个 DataContext
2.  拥有无限时间的 DataContext（即桌面应用程序的持续时间）
3.  拥有无限数量的跟踪实体的 DataContext
4.  跨线程使用它

# iphone - 七级信息层次结构 - UITableView - iPhone

> ID：11281334
> 
> 赞同：0
> 
> 时间：2012-07-01T10:50:18.000
> 
> 标签：iphone, ios, uitableview, user-interface, user-experience

我有一个由七个级别组成的信息层次结构。使用 UITableView 合适吗？我只是意识到这对于用户浏览信息可能太深了。该信息是抗生素处方的决策树。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:57:43.343

你可能的意思是每个级别都由 UITableView 表示，而所有级别都可以通过 UINavigationController 浏览。

我认为它可以工作，就用户体验而言，只要用户对该层次结构有足够的了解，以免迷失在其中。

问题是：您是否设想显示该信息的其他可能性？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:19:46.503

在表视图结构中拥有 7 级层次结构确实是可能的，但相当深且效率低下。你必须像你的用户一样思考，这对他们来说是一种什么样的体验。一般最多4个。作为建议，您可能应该将您的模型子类化或划分为更有效的导航结构。

# windows-phone-7 - 图钉未位于必应地图中

> ID：11281336
> 
> 赞同：0
> 
> 时间：2012-07-01T10:50:28.433
> 
> 标签：windows-phone-7, bing-maps, pushpin

当我手动提供值（纬度和经度）时，图钉工具找不到位置。

这是我的代码：

```
double dbllat = 13.060407;

double dbllong = 80.249562;

Pushpin mypin = new Pushpin();

watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);

            watcher.MovementThreshold = 40;

            watcher.Start();

            watcher.Position.Location.Latitude = dbllat;

            watcher.Position.Location.Longitude = dbllong;

            mypin .Location.Latitude = dbllat;

            mypin .Location.Longitude = dbllong;

            //CredentialsProvider cp=

            map1.Center = new GeoCoordinate(mypin.Location.Latitude, mypin.Location.Longitude);
            map1.SetView(mypin .Location, 5.0);
            push.Tag = "Location";
            push.Content = "i'm here";
            map1.Children.Add(mypin);
            watcher.Stop(); 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:51:34.127

如果那是你的错误：

**无法路由一个或多个航路点，因为它们离任何道路都太远。**

尝试

```
GeoCoordinate Loc = new GeoCoordinate(dbllat, dbllong);
mypin.Location = Loc; 
```

代替

```
mypin .Location.Latitude = dbllat;
mypin .Location.Longitude = dbllong; 
```

# android - 安卓多设备开发

> ID：11281337
> 
> 赞同：0
> 
> 时间：2012-07-01T10:50:29.200
> 
> 标签：android

我刚开始进行 android 开发，我想知道大多数使用 android 平台的设备上最多的 android sdk 是什么。经过一些研究，我发现 sdk 2.3（姜饼）是最常用的，但仍然不知道它是否支持所有手势、动画……以及平板电脑和智能手机。

我的第一个也是最后一个目标是使用大多数智能手机和平板电脑都可以使用的 sdk，并最大限度地利用 android 平台功能。

提前感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:58:50.893

您需要知道的一切都可以在 Android 开发者网站上找到。

1.  这是[Android 分布图](http://developer.android.com/about/dashboards/index.html)。
2.  可以在[此处](http://developer.android.com/training/basics/supporting-devices/platforms.html)找到有关支持多个平台的信息。
3.  Google 提供了一个[支持库](http://developer.android.com/tools/extras/support-library.html)，它将继续改进，支持以前平台中的新功能。

Gingerbread 是大多数 Android 社​​区目前正在运行的，所以使用它作为你的最低构建 sdk，或者如果你想覆盖 20% 的滞后，则使用 Froyo。将您的目标 SDK 设置为 Jellybean 并利用支持库来保持向后兼容性。

Android 网站上有大量信息，尤其是在[培训部分](http://developer.android.com/training/index.html)。享受和学习:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:53:00.903

您应该从最低的 sdk 版本开始。*这可确保您开始为所有设备进行开发。*

当您遇到该 sdk 版本不支持的功能时，
您可以**升级**您的最低 sdk 版本，或者如果您认为这会过多地限制设备范围，可以**考虑跳过该功能。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T10:56:34.063

简单的答案是，android 2.1+，那么您目前正在处理 99.1% 的所有 android 手机。

那么无聊的答案是这取决于。

也许您在一个市场（企业环境）中，您的所有潜在用户都获得了一部 android 1.6 手机。

它是仅限平板电脑的应用程序，然后选择 3.1+。

无论如何，有关统计数据，请参阅 android 开发人员仪表板进行细分：http: [//developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

我建议您使用 android 兼容性/支持库在 android 3.0 之前的设备上获取片段和其他内容。值得重复，使用碎片，你的生活会更轻松，特别是如果你想让它看起来不错并且在平板电脑上也能很好地工作。[actionbarsherlock.com](http://actionbarsherlock.com)等优秀的库也有很大帮助（旧版本的操作栏）。

# android - 如何擦除两个中的一个覆盖？

> ID：11281339
> 
> 赞同：0
> 
> 时间：2012-07-01T10:51:03.863
> 
> 标签：android, android-maps

我有两个叠加层，一个是 (ItemizedOverlay) 用于在地图上放置标记，另一个是 (Overlay) 用于绘制从源到目的地的路线。可以根据地图上标记的变化在地图上绘制路线。但问题是以前绘制的路线不能被擦除以绘制新路线。

我试过了`mapView.getOverlays().clear()`。但它正在擦除标记和路线。

是否有可能在 mapview 的两个定义的叠加层中获得一个叠加层对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T10:58:11.630

`mapView.getOverlays()`返回`Overlay`正在使用的 s 列表。您可以`Overlay`从该列表中删除一个，留下另一个。

```
Overlay itemizedOverlay, overlay; //you need an instance of the overlays

List<Overlay> overlays = mapView.getOverlays();
overlays.remove(itemizedOverlay); 
```

或者，如果您知道您`Overlay`在列表中的索引：

```
int myOverlayIndex; //the index of your Overlay in the list

List<Overlay> overlays = mapView.getOverlays();
overlays.remove(myOverlayIndex); 
```

# php - 读取一个表并从另一个表中获取与第一个表行相关的行

> ID：11281342
> 
> 赞同：1
> 
> 时间：2012-07-01T10:51:25.307
> 
> 标签：php, mysql

这是我的难题，我有一个带有标识号列的客户表和一个带有“AssociatedTo”列的系泊表。“AssociatedTo”列有时没有编号，因为它尚未分配，但其他列会有一个编号，该编号将是客户的标识号。

我以前有一个系统可以做到这一点，但它无效..慢..而且看起来很可怕。我需要一些东西能够输出一个包含客户列表的表格，并作为其中一行的列，分配给客户行的系泊列表。如果你能指点我的路或举一个这段代码的例子，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:15:21.483

如果我了解您在与**客户**表关联的**系泊表中有***0 行或更多*行。这将为每个客户行返回 1 行，并将所有与客户关联并以**逗号分隔的****m.col1**值返回到**多**列中。

 ******```
select c.*, GROUP_CONCAT(m.col1 SEPARATOR ',') as multiple
from customer c left join mooring m on c.ID = m.AssociatedTo
where 1
group by c.ID 
```

添加

有关所有选项，请参见：[http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat。](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

获取结果您可以使用[explode](http://php.net/manual/en/function.explode.php)来获取值数组。******

# netsuite - 如何“部分”履行销售订单？

> ID：11281345
> 
> 赞同：8
> 
> 时间：2012-07-01T10:51:57.163
> 
> 标签：netsuite

我尝试过`itemFulfillment`以多种方式创建记录，但无论我做什么，销售订单总是“完全”完成（无论是否所有项目都实际完成）。

如果销售订单中只有“部分”商品已发货，我们需要将这些商品设置为仅发货，以便可以对适当的采购订单进行计费并将跟踪发送给客户。当我们尝试仅履行这些项目时，销售订单总是以所有项目都被履行而告终。这给我们带来了许多问题。

我尝试过的事情：

*   从头开始创建新的项目履行（不使用初始化）

*   使用初始化创建新的项目履行（以获取对现有 IF 记录的引用）

*   仅添加已履行的订单项

*   添加所有行项目，明确设置`quantityRemaining = quantity`（项目尚未履行）和已`quantityRemaining = 0`履行项目的设置。

*   尝试变体`ReplaceAll = true`，然后再次尝试变体`ReplaceAll = false`。

在每种情况下，都会将 中的每个项目`SalesOrder`标记为完全履行（每个项目都设置为履行。）

如果有人能够“部分”完成销售订单，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:28:51.080

我今天通过执行以下操作得到了这个工作：

1.  设置`ReplaceAll`为假
2.  避免设置`quantityRemaning`值（在获取对项目履行的引用之后）
3.  将数量设置为发货数量（确保也设置`quantitySpecified`为 true）

如果您不熟悉处理`itemFulfillment`记录，请确保将行设置为销售订单中的相应行。如果您初始化记录，这将自动为您完成。

[在此处查看](http://www.netsuite.com/portal/partners/integration/download/NetSuiteWebServicesRecordsGuide_2_5_0.pdf)`itemFulfillment`使用初始化创建记录的示例（NetSuite 网站上提供的 PDF 文件）。

然后，您只需要上述三个步骤即可“部分”完成销售订单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-12T20:16:26.793

1.  将销售订单转换为`itemfulfillment`
2.  完成您需要的订单项，设置数量等
3.  将履行状态设置为`shipped`
4.  保存履行
5.  现在应该部分履行销售订单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T22:42:03.247

`quantitySpecified`遵循上述答案并且它有效，但在 2016.1 端点的规范中或在初始化的履行对象中找不到，因此省略它并且它工作正常。

另一件需要考虑的事情是，如果您`Sales Order`的商品有多个位置并且您已经*初始化了履行*，您将需要删除与当前履行的*地点不同的所有商品。*否则，您将收到一条关于从多个位置发货的错误消息，就像您使用 UI 一样。我们通过将数量默认为 0 并仅为当前履行的实际货件添加数量来实现此目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-11T16:06:58.300

尝试`yourRecObj.setLineItemValue('item", "quantity", 1, "0")`代替`yourRecObj.setLineItemValue('item", "quantity", 1, 0)`

# c# - 在winrt c#中加密字符串并在c#.net中解密

> ID：11281350
> 
> 赞同：1
> 
> 时间：2012-07-01T10:53:17.043
> 
> 标签：c#, windows-runtime, encryption, encryption-asymmetric

如何在 C# 中的 WinRT Metro 上使用非对称加密来加密字符串并在经典 Windows 中解密，比如在 web 服务中？

我想使用 RsaPkcs1 算法，我可以看到`CryptographicKey`类和`RSAParameters`类甚至不兼容。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T19:06:41.440

我找到了有关如何以`CryptographicKey`.net 4 可以成功使用的格式导出密钥的解决方案。

`CryptographicKey`有2个功能1.`Export` 和2 `ExportPublicKey`.. 我使用了导出私钥的第一个函数。此函数有 2 个参数，第一个是导出类型，第二个是要填充的 byte[]。

如果`CryptographicPrivateKeyBlobType.Capi1PrivateKey`使用，将产生的blob与.net 4可以导入`Export`的WinCAPI兼容。`RSACryptoServiceProvider`

### WinRT

```
String str = "String To Encrypt";
IBuffer buf = CryptographicBuffer.ConvertStringToBinary(str,BinaryStringEncoding.Utf16BE);
String AsymmetricAlgName = Windows.Security.Cryptography.Core.AsymmetricAlgorithmNames.RsaPkcs1;
AsymmetricKeyAlgorithmProvider asym = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgName);
CryptographicKey key = asym.CreateKeyPair(512);
IBuffer enc = CryptographicEngine.Encrypt(key, buf, null);
byte[] encryptedbyteArr;
CryptographicBuffer.CopyToByteArray(enc, out encryptedbyteArr);
String encryptedBase64Str = Convert.ToBase64String(encryptedbyteArr);

//Export the private Key in WinCapi format

byte[] privatekeyBytes;
CryptographicBuffer.CopyToByteArray(key.Export(CryptographicPrivateKeyBlobType.Capi1PrivateKey), out privatekeyBytes);
String privatekeyBase64 = Convert.ToBase64String(privatekeyBytes); 
```

`encryptedBase64Str`现在包含 Base64 中的加密字符串。让我们这么说`encryptedBase64Str="BwIAAACkAABSU0EyAAIAAAEAAQCFrMTqMU3T14zSUM5..."`

### 网络服务

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
String privateKey64 = "BwIAAACkAABSU0EyAAIAAAEAAQCFrMTqMU3T14zSUM5...";
String EncryptedString = "PbauDOjqMLD2P6WSmEw==";
byte[] EncryptedDataBlob = Convert.FromBase64String(EncryptedString);
byte[] privateKeyBlob = Convert.FromBase64String(privateKey64);
byte[] decryptedBytes;
rsa.ImportCspBlob(privateKeyBlob);
decryptedBytes = rsa.Decrypt(EncryptedDataBlob, false);
String decryptedString =System.Text.Encoding.BigEndianUnicode.GetString(decryptedBytes); 
```

`decryptedString`现在包含 WinRT 拥有的解密字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:13:48.377

您必须使用公钥来描述内容。不要忘记在 WinRt 版本中导出公钥！

# red5 - 向指定的 Red5 客户端发送消息

> ID：11281356
> 
> 赞同：0
> 
> 时间：2012-07-01T10:54:30.210
> 
> 标签：red5

当我进行语音聊天时，我发现了一个问题。

问题是如何将消息发送到指定的 RED5 客户端（共享对象）。

这就是我要的 ：

**客户 1**

```
Message from client 2 : Hello!
To client 2 : How are you ?
etc.... 
```

**客户2**

```
To client 1 : Hello!
Message from client 12 : 
etc.... 
```

**客户3**

```
Message from client X : How are you ?
etc.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:03:22.840

您可以使用 sharedObject 向具有您自己的 clientID 和所需的 clientID 的其他客户端发送消息（如下所示： sharedobject.send(fromId,toID,message)) ，其他客户端收到此消息并决定是否显示它.

希望能帮到你。

# php - 可接受的 Memcached 使用

> ID：11281358
> 
> 赞同：1
> 
> 时间：2012-07-01T10:54:41.003
> 
> 标签：php, memcached

我在使用 Memcached 时遇到了一些麻烦。

我在下面有这段代码：

```
if(!$Z->get('user')) {
    $Z->set('user', $hs->load_hs_main($_GET['from'], $_GET['table']));
}

$je = $Z->get('user') ? $Z->get('user') : $hs->load_hs_main($_GET['from'], $_GET['table']); 
```

什么`$Z->get('user')`和`$je`应该是一个 MySQLi 结果对象。这会产生奇怪的效果，例如 print_r 不起作用，而且看起来不正确。

我想检查 memcached 创建的对象是否存在，如果存在则使用它。但如果不存在，请设置它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T10:56:31.080

从缓存中获取项目或从其他地方创建/加载它（如果它不存在）的正确方法是：

```
$user = $Z->get('user'); // get it from cache, returns falsy value if not found
if(!$user) { // not found
    $user = $hs->load_hs_main(...); // load the element from somewhere else
    $Z->set('user', $user); // cache it
}
// here $user always exists 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:02:07.020

一般来说，您不能在内存缓存中存储“内部”类的对象。这些对象包含无法序列化的数据。您必须从结果对象中获取数据并将其存储在 PHP 数组中。然后您可以将该数组存储在 memcache 中。

# iphone - 如何通过 iTunes 文件共享在文件夹中创建文件夹结构

> ID：11281361
> 
> 赞同：0
> 
> 时间：2012-07-01T10:55:02.703
> 
> 标签：iphone, ios5, file-sharing

我正在为 ipad3 开发应用程序，并通过 iTunes 进行文件共享。问题是我只能与我的应用程序共享单个文件。我想将文件夹和子文件夹添加到文档文件夹中。如何通过 iTunes 文件共享将文件夹添加到文档文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:29:43.027

您可以使用创建目录`NSFileManager`

下面的方法将返回目录*userName*的路径（如果存在），如果不存在则创建它。

```
+ (NSString *)getDocsDirectoryByUserName:(NSString *)userName 
{

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString * documentDir = [paths objectAtIndex:0];
NSString * userDir = [documentDir stringByAppendingPathComponent:userName];

NSError *error;
BOOL success = [[NSFileManager defaultManager] createDirectoryAtPath:userDir 
                                         withIntermediateDirectories:YES 
                                                          attributes:nil error:&error];   

if (!success) {
    NSLog(@"Error creating data path: %@", [error localizedDescription]);
}

return userDir;
} 
```

# database - BCED 模式 - 实体加载器方法

> ID：11281363
> 
> 赞同：0
> 
> 时间：2012-07-01T10:55:14.567
> 
> 标签：database, load, controls, entity, boundary

这周五我要参加“软件工程”考试，但是有一点我听不懂，老师也无法解释。

我必须基于边界控制器实体 (BCE) 模式创建一个项目，并具有持久性（数据库或顺序文件，但我将使用 SQLite）。我应该使用保存/加载方法来实现实体类，这些方法将数据放入/从持久层中取出。他们使用 DAO。

例如：

```
public class someEntity
{
   private int someData;

   public void set_someData (int _someData) {this.someData = _someData;}
   public int  get_someData ()              {return this.someData;}

   public void save ()
   {
      DAO dao = new DAO ();

      dao.openConnection ();
      dao.insert (this.someData);
      dao.closeConnection ();
   } 
```

到目前为止，一切都清楚了。

当我实现“加载”方法时，我想使用搜索参数（数据库中的主键）用数据库中的数据“填充”我的实体实例。但是，例如，如果我想让所有出生于 1980 年之前的人都出生，我该怎么办？

我心中唯一的解决方案是将以下内容实现到控制器类中

```
ArrayList <people> pList= new ArrayList ();
people p;

for (int i = 1900 ; i < 1980 ; i++)
{
  p = new people ();

  if (p.load (i) == true); //returns true if has found corresponding entry in db
  {
     pList.add(i);
  }
} 
```

这完全是疯了，不是吗？

所以，我需要一个返回集合的“加载器”方法，这样我就可以在 DAO 中实现一个返回所有出生于 1980 年之前的人的方法，只需一个简单的 SQL 查询。只有当控制类直接与 DAO 对话，忽略 BCE 模式规则时，才能做到这一点。

如果这是一个真正的问题，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:16:54.480

只需在 DAO 中创建一个方法来执行 SQL 查询，例如：

```
SELECT * FROM people p WHERE p.born < '1980-01-01'; 
```

不要忘记在出生列上创建索引。

另外，在咖啡馆找一个 1980 年之前出生并在特定公司工作的单身人士。

您可以使用限制。

```
SELECT p.* FROM people p p.company = c.id WHERE p.born < '1980-01-01' and p.company_id = 'thatcompany' LIMIT 1 
```

（假设 p.company_id 是一个 FK 列）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:11:47.987

我一直在考虑一个解决方案：

即我有“员工”实体，而“员工”在“公司”工作。

这可以表示为：

```
public class company
{
  private String name;
  private int employee_amount;
  private ArrayList <employee> works;

  //setter, getters and save methods...

  public void load (String _name)
  {
     DAO dao = new DAO ();
     employee e;

     dao.openConnection ();
     works = dao.searchByCompany (_name);    
     dao.closeConnection ();

     this.name = _name;
     this.employee_amount = e.length ();
  } 
```

在 DAO 中，将实现 searchByCompany 方法

```
public ArrayList <employee> searchByCompany (String name)
{
  ArrayList <employee> to_return = new ArrayList ();

  //stuff....

   rs = stmt.executeQuery ("SELECT * FROM Employees WHERE Company = '" + name + "'");

  //get rs fields and put everything into to_return

  return to_return;
} 
```

因此，当我需要搜索 80 年前出生的著名员工时，我将以下代码放入控制器类中

```
Company c = new Company;

c.load ("thatCompany");

for (int i = 0 ; i < c.getEmployee_amount () ; i++)
{
   // get ith employee from list
   // test if was born before '80
   //do something, else do other thing
} 
```

这是正确的工作方式吗？

# signalr - 是否可以更改信号器/集线器脚本？

> ID：11281366
> 
> 赞同：0
> 
> 时间：2012-07-01T10:56:15.453
> 
> 标签：signalr

我在已经有另一个 jQuery 版本的站点上使用信号器。我需要更改 jQuery 别名。是否可以修改从 ~/signalr/hubs 返回的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:37:07.357

是的，编写一个自定义[`IJavaScriptProxyGenerator`](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Core/Hubs/IJavaScriptProxyGenerator.cs)并将其插入`GlobalHost.DependencyResolver`启动时，SignalR 将使用它生成脚本。

[在您的情况下，我将`DefaultJavaScriptProxyGenerator`](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Core/Hubs/DefaultJavaScriptProxyGenerator.cs)首先复制[实现](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Core/Hubs/DefaultJavaScriptProxyGenerator.cs)和模板`/SignalR/Scripts/hubs.js`文件，然后将在这两个地方使用的别名替换为对您有意义的任何内容。

# html - 如何在具有永久大小的 div 内使用动态填充填充 img？

> ID：11281370
> 
> 赞同：2
> 
> 时间：2012-07-01T10:56:34.573
> 
> 标签：html, css

我有`div width:200px; height:200px`这个 div 应该是永久大小，但不是。我想放在 div img 里面，我可以根据用户的配置使用填充 10px 或 20px 每边进行播放。img 大小大于 200px，确实如此。我的问题是，当我使用填充时，div 的大小不会根据填充永久改变。我想用 div 的大小分隔填充。感谢您的帮助。

我的代码：

```
<!DOCTYPE html>
<html>
<head>

  <style type='text/css'>
    img{
width:180px;
height:180px;
margin:20px;        
}

.container{
    background-color:orange;
    padding:100px;
    width:200px;
    hieght:200px;
}

</style>
</head>
<body>
<div class="container">
    <img src="http://gfx.glittergraphicsnow.com/albums/ll149/glittergn/flower/flower002.gif" >
</div>
</body>
</html> 
```

这是[演示链接：](http://www.centerwow.com/stackoverflow/temp3.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T11:36:28.883

如果要`padding`在元素的宽度中包含 ，则需要`box-sizing:border-box;`在该元素上使用。

正如@bski 在评论和@AshwinSingh 的回答中提到的那样——您还应该使用它`overflow: hidden`来隐藏任何溢出的内容。

```
.container{
    background-color:orange;
    padding:100px;
    width:200px;
    height:200px;
    /* add this */
    overflow: hidden;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box
    box-sizing:border-box;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:09:15.673

正常的行为是，即使您给它一个固定大小， div 也会占用其内部内容的大小。如果内部内容的总大小大于 div 的大小，则 div 将自动调整大小以容纳内容。记住，div 是一个容器，它包含东西。

我建议使用`width:100%`and `height:100%`，使其调整到足以容纳内容的大小，包括所有边距和填充。

如果您想停止该行为并使用固定宽度而不是赋予`overflow:hidden`属性，这将隐藏任何溢出 div 的内容。如果你想要一个滚动条而不是给`overflow:scroll`属性，这将在内容溢出时显示一个滚动条。

**更新**正如罗杰金指出的那样，你`height:200px`拼错了`hieght:200px`

# qt - 具有异步事件的顺序算法

> ID：11281389
> 
> 赞同：0
> 
> 时间：2012-07-01T11:00:25.680
> 
> 标签：qt, signals

我目前正在（重新）设计一个由几个部分组成的系统：

*   第一部分是一个实体，它（异步）从源获取帧并在每次帧准备好时触发一个事件——通过 Qt 信号。
*   第二部分是实时显示帧的 GUI，并通过插槽连接到上述信号
*   最后一部分是帧处理器，它的行为最好用顺序算法（while、for 等）来描述，并有可能响应来自 GUI 的几种信号。

主要问题是**是否有组织此类代码的最佳实践**？

我想出但不太喜欢的解决方案是：运行 4 个线程。

*   通过 Qt 信号与其他 3 个线程进行通信的 GUI 线程
*   帧源线程在每个帧可用性上发出信号。
*   帧组织器线程，它根据信号存储帧并使用 QWaitCondition 通知帧处理器线程。
*   从帧管理器调用 getNextFrame() 的帧处理器线程。

但我觉得这不是一个好的解决方案，可能是由于混合了不同的范例（等待条件和信号）。此外，等待条件可能会导致事件处理队列不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:27:16.753

没有必要使用`QWaitCondition`. 线程应该是裸的（非派生的）`QThreads`。把你所有的代码`QObjects`都移到那些线程中。帧组织器只是将信号发送到帧处理器。通过将事件发布到线程的事件循环来跨线程边界传递信号。这些事件循环在内部使用同步原语（互斥体）来序列化访问，因此无需在那里重新发明轮子。QThread 的默认实现`run()`只是简单地旋转一个事件循环，因此除了实例化线程并启动它之外，您不需要做任何事情。

您的代码应该在 GUI 线程中实例化所有 QObject 的情况下运行，但性能可能会降低。当您的基准测试显示哪些对象受 CPU 限制时，将它们移动到单独的线程中。这条规则有一个可悲但必要的例外：如果您的相机代码只能使用相机驱动程序提供的阻塞 API（等待某事而不是异步报告某事的 API），那么您别无选择，只能为此牺牲一个线程. 除了这种专用的阻塞变通线程之外，您的应用程序应该使用与可用内核一样多的线程（`QThread::idealThreadCount()`）。您将实例化多达该数量的线程，并在这些线程中随机或以循环方式分配 QObject。再次——只移动受 CPU 限制的 QObject。使用非阻塞 API（网络！）的 IO 绑定对象不需要这种处理。Sane 设备驱动程序（例如来自[http://www.ftdichip.com/](http://www.ftdichip.com/)的）公开异步事件通知，可以通过[`QWinEventNotifier`](http://doc-snapshot.qt-project.org/5.0/qwineventnotifier.html). 它是 Qt 4.x 中的私有 API，但尽管如此，它仍然可以正常工作。

很多常见的API都被阻塞了，这真是令人遗憾。数据库驱动程序就是一个典型的例子。例如，我最终移植了 mysql 客户端驱动程序来使用`QTcpSocket`，这样数据库就不会阻塞使用它的线程。

# c# - 如何在 WebBrowser 控件 C# 中启用文本选择

> ID：11281391
> 
> 赞同：3
> 
> 时间：2012-07-01T11:00:42.047
> 
> 标签：c#, text, browser, selection

我正在使用 WebBrowser 控件构建一个简单的 ePub 阅读器，并且我将文件 HTML 标记加载到控件中。问题是用户无法使用鼠标选择文本。右键单击并选择所有作品，但用户需要能够突出显示/复制/粘贴，这需要使用鼠标进行选择的常用方法。

我很惊讶这不是标准行为，这让我认为我可能做错了什么。任何人都可以伸出援助之手吗？

# java - jersey-test-framework grizzly 返回 404 not found 错误

> ID：11281394
> 
> 赞同：2
> 
> 时间：2012-07-01T11:01:01.967
> 
> 标签：java, json, rest, jersey, grizzly

我想在我的应用程序中实现 Jersey REST/Json 的 JUnit 测试。

我的问题是我从灰熊那里得到了一个 404 没有找到。但是路径是正确的，并且在普通 Web 容器上使用 Curl 进行的测试正在运行。

我正在使用 GWTP（没有 Maven）。我正在手动实现库 Properties -> Java Build Path。我正在使用以下版本：

*   Eclipse 靛蓝（在 Windows 7 上）
*   asm-3.3.1.jar
*   jersey-client-1.12.jar
*   jersey-core-1.12.jar
*   jersey-json-1.12.jar
*   jersey-server-1.12.jar
*   jersey-servlet-1.12.jar
*   jersey-test-framework-core-1.12.jar
*   jersey-test-framework-grizzly-1.12.jar
*   grizzly-framework-1.9.45.jar
*   grizzly-http-1.9.45.jar
*   grizzly-http-servlet-1.9.45.jar
*   grizzly-portunif-1.9.45.jar
*   grizzly-rcm-1.9.45.jar
*   grizzly-servlet-webserver-1.9.45.jar
*   grizzly-utils-1.9.45.jar
*   servlet-api-2.5.jar
*   junit-4.9.jar（也用 4.10.jar 测试过）

根据 Jersey 文档包含所有库：http: [//jersey.java.net/nonav/documentation/latest/user-guide.html](http://jersey.java.net/nonav/documentation/latest/user-guide.html) - 第 7.5 章在 Maven 之外运行测试。

堆栈跟踪如下：

```
INFO: GRIZZLY0001: Starting Grizzly Framework 1.9.45 - 01.07.12 12:11
01.07.2012 10:11:20 com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
com.acolsolutions.loyaltycard.resources
01.07.2012 10:11:20 com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
class com.acolsolutions.loyaltycard.resources.HelloResource
class com.acolsolutions.loyaltycard.resources.CardResource
01.07.2012 10:11:20 com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
01.07.2012 10:11:20 com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'
com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:9998   /api/cards returned a response status of 404 Not Found
at com.sun.jersey.api.client.WebResource.voidHandle(WebResource.java:707)
at com.sun.jersey.api.client.WebResource.access$400(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:553)
at   com.acolsolutions.loyaltycard.junit.CardResourceTests.testCreate(CardResourceTests.java:55)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
01.07.2012 10:11:21    com.sun.jersey.test.framework.spi.container.grizzly.web.GrizzlyWebTestContainerFactory$GrizzlyWebTestContainer stop
INFO: Stopping the Grizzly Web Container... 
```

我的课程如下所示：

CardResourceTests.java：

```
import static org.junit.Assert.assertFalse;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import com.google.appengine.tools.development.testing.LocalDatastoreServiceTestConfig;
import com.google.appengine.tools.development.testing.LocalServiceTestHelper;

import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.test.framework.JerseyTest; 
import com.sun.jersey.test.framework.WebAppDescriptor;

import org.codehaus.jettison.json.JSONObject;

public class CardResourceTests extends JerseyTest {
private final LocalServiceTestHelper helper = new LocalServiceTestHelper(
new LocalDatastoreServiceTestConfig()); 

public CardResourceTests() throws Exception {
super("com.acolsolutions.loyaltycard.resources");
}
/*  
@Before
public void setUp() {
helper.setUp();
}

@After
public void tearDown() {
helper.tearDown();
}
*/  
@Test
public void testCreate() {
boolean thrown = false;
WebResource webResource = resource();
JSONObject card = new JSONObject(); 

try {
card.put("id", "1")
.put("name", "Name of Card")
.put("code", "123456")
.put("codeTypeId", "1")
.put("cardProviderName", "The Card Provider")
.put("picturePath", "provider.jpg")
.put("cardProviderUrl", "http://www.provider.com")
.put("creationDate", "Sun Jun 10 08:55:14 UTC 2012")
.put("modificationDate","Sun Jun 10 08:55:14 UTC 2012");
webResource.path("api/cards").type("application/json").post(card);
} catch(Exception e) {
e.printStackTrace();
thrown = true;
}
assertFalse(thrown);        
}
} 
```

CardRessource.java：

```
import java.util.List;

import javax.ws.rs.Consumes;
import javax.ws.rs.DELETE;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

import com.acolsolutions.loyaltycard.dataobjects.CardDAO;
import com.acolsolutions.loyaltycard.persistence.entities.Card;
import com.google.appengine.api.datastore.Key;
import com.google.appengine.api.datastore.KeyFactory;
import com.allen_sauer.gwt.log.client.Log;

@Path("/cards")
public class CardResource {
CardDAO dao = new CardDAO();

@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response create(Card card) {
Log.debug("Creating card");
Card c = dao.create(card);
if(c.equals(null)) {
return Response.status(400).entity("Create failed!").build();
}
return Response.status(201).entity(c).build();
}
...
} 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

<display-name>loyaltycard</display-name>

<!-- Default page to serve -->
<welcome-file-list>
<welcome-file>loyaltycard.html</welcome-file>
</welcome-file-list>

<!-- 
The below lines are implementing Jersey (JAX-RS) in to the GWT application.
-->
<servlet>
<servlet-name>Jersey</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
<param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
<param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value>
</init-param>       
<init-param>
<param-name>com.sun.jersey.config.property.packages</param-name>
<param-value>com.acolsolutions.loyaltycard.resources</param-value>
</init-param>        
</servlet>

<servlet-mapping>
<servlet-name>Jersey</servlet-name>
<url-pattern>/api/*</url-pattern>
</servlet-mapping>

<!--
This Guice listener hijacks all further filters and servlets. Extra
filters and servlets have to be configured in your
ServletModule#configureServlets() by calling
serve(String).with(Class<? extends HttpServlet>) and
filter(String).through(Class<? extends Filter)
-->
<listener>
<listener-class>com.acolsolutions.loyaltycard.server.guice.GuiceServletConfig</listener-class>
</listener>

<filter>
<filter-name>guiceFilter</filter-name>
<filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
</filter>

<filter-mapping>
<filter-name>guiceFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>

</web-app> 
```

将应用程序作为 Web 应用程序运行时，使用 Curl 和以下命令进行测试：

```
curl http://localhost:8888/api/cards -i -X POST -H "Content-Type: application/json" -d "{\"id\": \"1\", \"name\": \"Name of Card\", \"code\": \"123456\", \"codeTypeId\": \"1\", \"cardProviderName\": \"Card Provider\", \"picturePath\": \"provider.jpg\", \"cardProviderUrl\": \"http://www.provider.com\", \"creationDate\": \"Sun Jun 10 08:55:14 UTC 2012\", \"modificationDate\": \"Sun Jun 10 08:55:14 UTC 2012\" }" 
```

我什至尝试用 RawCap.exe 嗅探环回接口。我在 PCAP 文件中看到以下内容：

```
POST /api/cards HTTP/1.1
Content-Type: application/json
User-Agent: Java/1.7.0
Host: localhost:9998
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive
Content-Length: 254

{"id":"1","name":"Name of Card","code":"123456","codeTypeId":"1","cardProviderName":"Card Provider","picturePath":"provider.jpg","cardProviderUrl":"http:\/\/www.provider.com","creationDate":"Sun Jun 10 08:55:14 UTC 2012","modificationDate":"Sun Jun 10 08:55:14 UTC 2012"}

HTTP/1.1 404 Not Found

server: grizzly/1.9.45
Content-Type: text/plain; charset=iso-8859-1
Transfer-Encoding: chunked
Date: Sun, 01 Jul 2012 00:02:16 GMT 
```

这在我看来就像 JSON 字符串已提交到 URL 但找不到类。

我有点卡在这里。我一定是在上下文路径上做错了，但我不知道该怎么做以及如何设置它。

谢谢你的帮助，克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:39:29.847

将应用程序作为 Web 应用程序运行时，它会在基于 web.xml 的 /api/ URL 中公开。Grizzly 和轻量级 HTTP 服务器都不能识别 web.xml，因此它们会在容器根目录中暴露 jersey。

# php - 如何从此嵌套数组中获取值

> ID：11281395
> 
> 赞同：-3
> 
> 时间：2012-07-01T11:01:01.810
> 
> 标签：php, arrays, multidimensional-array

`var_dump($ib);`给我以下输出：

```
array (
  'data' => array (
    0 => array ( 
      'id' => '2015469353355_151',
      'from' => array ( 
         'name' => 'Aah',
         'id' => '100000292544713',
      ),
      'message' => 'zzzz',
      'created_time' => '2012-06-08T06:16:41+0000',
      ),
    1 => array (
      'id' => '2015469353355_152',
      'from' => array (
        'name' => 'assaaaa',
        'id' => '100000292544713',
      ),
      'message' => 'zzzz',
      'created_time' => '2012-06-08T06:16:51+0000',
    ),
  ),
  'paging' => array (
    'previous' => 'https://graph.facebook.com/2015469353355/comments?limit=25&value=1&redirect=1&__paging_token=2015469353355_175&access_token=AAAFfJS6rRAABAHKGZCy57ZCrSEdQL2kUIYqZAcNBLkbnKTBxRhhx9CTvnUlq2LcAK1kZBWnV6AH5RpvkmGYRFzvk12kNXLe6OhjjapH5PEIUwv1h2tYl&since=1340009948&__previous=1',
  'next' => 'https://graph.facebook.com/2015469353355/comments?limit=25&value=1&redirect=1&access_token=AAAFfJS6rRAABAHKGZCy57ZCrSEdQL2kUIYqZAcNBLkbnKTBxRhhx9CTvnUlq2LcAK1kZBWnV6AH5RpvkmGYRFzvk12kNXLe6OhjjapH5PEIUwv1h2tYl&until=1340009948&__paging_token=2015469353355_175',
  ),
) 
```

如何检索**'next'**的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T11:05:27.293

`next`您可以通过执行以下操作获得 的值，

```
echo $ib['paging']['next']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T11:07:08.713

```
$array["paging"]['next'] 
```

如果我们假设主数组被分配给变量`$array`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T11:14:22.830

因为`paging`是主数组的索引，它本身*也是*一个数组。您可以使用它的索引来深入了解并获取您需要的信息。

`$ib['paging']`会给你 -

```
paging => array (
  'previous' => '...',
  'next' => '...',
) 
```

然后下一步是深入到您再次返回到`next`索引的数组中。所以你最终得到的是一个在索引中指定索引的语句。

```
$ib['paging']['next']; 
```

* * *

如果`next`参数**也是**一个数组，您甚至可以进一步向下使用另一个索引 -

```
paging => array (
  'previous' => '...',
  'next' => array(
     'url'=>'https://graph.facebook...'
  ),
)

// this will give us `'https://graph.facebook...'`
echo $ib['paging']['next']['url']; 
```

# javascript - 从控制台将 MongoDB 字段的类型更改为整数

> ID：11281401
> 
> 赞同：5
> 
> 时间：2012-07-01T11:02:16.253
> 
> 标签：javascript, c++, mongodb

我们有一个应用程序，它在 MongoDB 中存储来自 C/C++ 的一些配置值，并具有重新启动的能力（即它运行一段时间，有人中断应用程序，更改配置，然后再次运行应用程序，它会在哪里找到它停止了）。这就像布尔和字符串配置的魅力。

但是我们有一些整数（在我们当前的 C/C++ 实现中 - 32 位值）。当我使用 MongoDB 控制台修改这些整数值时，Mongo 总是将它们存储为 Number（这在 C/C++ 实现中是双倍的）。我们将更改应用程序以在它期望整数的地方采用双精度值，但我想知道是否有一种方法可以强制 Mongo 从其 JavaScript 控制台存储整数。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T21:27:15.100

在 C/C++ 的“词义”中，int[实际上并不能保证](https://stackoverflow.com/questions/589575/size-of-int-long-etc?answertab=votes#tab-top)是 32 位值。An`int`必须至少为 16 位，但通常与平台架构相匹配（例如 32 或 64 位）。

正如@Jasd 所提到的，JavaScript 只有一种数字类型，即浮点（`double`在 C 中）。

在 MongoDB shell 中，您应该能够使用这些函数`NumberInt(..)`来获取[BSON 32 位整数值](http://bsonspec.org/#/specification)或`NumberLong(..)`获取 BSON 64 位整数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-25T14:00:54.460

您可以通过以下方式修复控制台上某个字段的所有值的类型：

```
db.Statistic.find({kodoId: {$exists: true}}).forEach(function (x) {
  x.kodoId = NumberInt(x.kodoId);
  db.Statistic.save(x);
}); 
```

这只会加载具有该`kodoId`字段的文档并将它们转换为 int 并重新保存。您可以执行以下操作：

```
db.Statistic.find({kodoId: {$exists: true}}, {kodoId: 1}).forEach(function (x) {
   db.Statistic.update({ _id: x._id },
      {$set: {
        kodoId: NumberInt(x.kodoId)
      }});
}); 
```

第二个参数*只会*加载 kodoId 值（希望来自索引）。这应该快得多，因为它不需要加载和重新保存整个文档 - 只是一个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:29:07.453

MongoDB 的外壳由 JavaScript 引擎提供支持。并且 JavaScript 没有`integer`. 它只知道`Number`，这是浮点数的一种类型。
您可以尝试使用 MongoDB 类型[`NumberLong`](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell#Overview-TheMongoDBInteractiveShell-Numbers)，但是当我遇到同样的问题时，它并没有解决。

# android - 服务的全局 try-catch

> ID：11281402
> 
> 赞同：0
> 
> 时间：2012-07-01T11:02:21.733
> 
> 标签：android

我在一项活动中找到了全局尝试捕获的解决方案。（[在这里](https://stackoverflow.com/questions/4427515/using-global-exception-handling-on-android)）我可以对服务做类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:42:26.503

`Thread.setDefaultUncaughtExceptionHandler()`适用于您的整个应用程序。如果您愿意，您可以`Thread.setDefaultUncaughtExceptionHandler()`从 a调用`Service`，而不是从`Activity`. 但是，在大多数情况下，您只需为您的应用程序调用一次。

# android - 文本模糊时，Android BlurMaskFilter 在 canvas.drawOval 中无效

> ID：11281404
> 
> 赞同：26
> 
> 时间：2012-07-01T11:02:29.317
> 
> 标签：android, android-canvas, android-4.0-ice-cream-sandwich, blur

我一直在尝试创建一个自定义视图，该视图在文本下具有模糊的形状。问题是 BlurMaskFilter 对我在画布上绘制的任何形状都没有影响。这是我在构造函数中初始化 Paint 对象的方式：

```
paint = new Paint(0);
paint.setColor(0xffffffff);
paint.setMaskFilter(new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL));

mShadowPaint = new Paint(0);
mShadowPaint.setColor(0xff333333);
mShadowPaint.setMaskFilter(new BlurMaskFilter(10, BlurMaskFilter.Blur.NORMAL)); 
```

我在 onDraw() 中调用这样的函数：

```
canvas.drawOval(mShadowBounds,mShadowPaint);
canvas.drawText("hello", x, y, paint); 
```

但这就是我所看到的。

![椭圆形未模糊，但文本已模糊。](../Images/1655b55eb67969ff84352b10dc131eaa.png)

使用 android 4.0 sdk 并在 4.0.4 Galaxy nexus 设备（英国）上进行测试。我想知道这是否是 4.0.4 中的错误，因为我确实在 4.0 和 4.0.3 的模拟器上对其进行了测试，并且它在它们上的模糊效果非常好，除非我做错了什么？

编辑：这是在其他平台上测试它的扩展视图代码。

```
import android.content.Context;
import android.graphics.BlurMaskFilter;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.RectF;
import android.util.AttributeSet;
import android.view.View;

public class BlurTestView extends View{

    private Paint paint;
    private Paint mShadowPaint;
    private int size = 100;
    private RectF mShadowBounds = new RectF();

    public BlurTestView(Context context) {
        this(context, null, 0);
    }

    public BlurTestView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public BlurTestView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        paint = new Paint(0);
        paint.setColor(0xff333333);
        paint.setTextSize(size);
        paint.setMaskFilter(new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL));

        mShadowPaint = new Paint(0);
        mShadowPaint.setColor(0xff333333);
        mShadowPaint.setMaskFilter(new BlurMaskFilter(10, BlurMaskFilter.Blur.NORMAL));

        mShadowBounds.top = size;
        mShadowBounds.bottom = mShadowBounds.top+(size /2);
        mShadowBounds.left = 0;
        mShadowBounds.right = (int)paint.measureText("hello");
    }

    @Override
    public void onDraw(Canvas canvas)
    {
        canvas.drawOval(mShadowBounds,mShadowPaint);
        canvas.drawText("hello", 0, size, paint);
    }

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-11T10:32:46.847

对我来说似乎是一个错误。我向 Android 团队报告；我们会看到他们说什么。

如果您`android:hardwareAccelerated="false"`在 Activity 中设置，它会正确呈现`AndroidManifest.xml`。

这是来自 Android 图形团队的官方说法：“硬件加速不支持 BlurMaskFilter。” （截至 2012 年 7 月 10 日）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-27T07:01:08.893

如果您不能在您的活动中禁用硬件加速（例如它使用需要硬件加速的 TextureView），您可以使用第一个参数[LAYER_TYPE_SOFTWARE](https://developer.android.com/reference/android/view/View.html#LAYER_TYPE_SOFTWARE)和第二个参数为您的视图调用[setLayerType 。](https://developer.android.com/reference/android/view/View.html#setLayerType(int,%20android.graphics.Paint))

像这样

```
public class BlurTestView extends View {

    public BlurTestView(Context context) {
        this(context, null, 0);
    }

    public BlurTestView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public BlurTestView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        // Disable hardware acceleration for this view
        setLayerType(View.LAYER_TYPE_SOFTWARE, null); 

        // Perform other initialisation 
    }

    // Other methods and so on...
} 
```

有关蒙版滤镜、效果和着色器的更多信息，您可以在[此处](http://chiuki.github.io/android-shaders-filters/#/)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T21:31:31.243

在向路径添加过滤器时遇到了同样的问题。我注意到将目标设置为 13 或以下允许过滤器工作。14岁及以上他们没有。

```
android:targetSdkVersion="13" 
```

# meteor - 如何在 Meteor 应用程序中集成 Facebook 的 Open Graph？

> ID：11281405
> 
> 赞同：4
> 
> 时间：2012-07-01T11:02:57.597
> 
> 标签：meteor

我正在尝试将我的 Meteor 应用程序与 Facebook Open Graph 集成，以在时间线中发布操作。

Facebook API 通过在 HTML 头中定义对象特定的元标记来工作，这些元标记将由 API 读取。例如：

```
<head prefix="og: http://ogp.me/ns# [YOUR_APP_NAMESPACE]: 
                     http://ogp.me/ns/apps/[YOUR_APP_NAMESPACE]#">
    <title>OG Tutorial App</title>
    <meta property="fb:app_id" content="[YOUR_APP_ID]" /> 
    <meta property="og:type" content="[YOUR_APP_NAMESPACE]:recipe" /> 
    <meta property="og:title" content="Stuffed Cookies" /> 
    <meta property="og:image" content="http://fbwerks.com:8000/zhen/cookie.jpg" /> 
    <meta property="og:description" content="The Turducken of Cookies" /> 
    <meta property="og:url" content="http://fbwerks.com:8000/zhen/cookie.html">
</head> 
```

然而，在检查任何 URL 时，Facebook API 看到的是这样的：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/ed99236548322b46a7562b49cd6ee0e0f059e506.css">
  <script type="text/javascript" src="/c16ff21884b1f831d91ebf271236ef78b03b552e.js"></script>
  <title>Made with Meteor!</title>
</head>
<body>
</body>
</html> 
```

在 Meteor 应用程序中集成此元标记的最佳方式是什么，这可能会根据 URL 发生变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T09:19:28.577

我遇到了同样的问题。

处理这个问题的两种方法：

*   最近添加到“spiderable”包（目前在“devel”分支中）还允许您更改*客户端代码中*的“head”标签（附加您的 og:title 等），并*从您的“神奇”服务到 Facebook服务器*。

（注意：您可能不需要在此解决方案中*使用*autopublish 包，因为“spiderable”会停止页面呈现，同时依赖于在客户端启动时“autopublish”设置为“true”的标志）

*   一个更轻量级的解决方案是 Meteor 的“headly”包：

[https://github.com/ayal/headly](https://github.com/ayal/headly)

安装后，您可以像这样使用它：

```
Meteor.headly.config({tagsForRequest: function(req) {
  ... do something dynamic here, i.e get title from db based on url param ...
  return '<meta property="og:title" content="<DYNAMIC TITLE>" />';
}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T15:44:10.083

可蜘蛛包是要走的路...

在你的路由器中做这样的事情......（这是coffee-sciprt）

```
#Spiderable stuff to set meta tags for crawl
$("meta[property='fb:app_id']").attr "content", "YOUR_APP_ID"
$("meta[property='og:type']").attr "content", "YOUR_APP:OPEN_GRAPH_CUSTOM_EVENT"
$("meta[property='og:url']").attr "content", "https://apps.facebook.com/YOURAPP"+ @canonicalPath
$("meta[property='og:title']").attr "content", "some title:
$("meta[property='og:description']").attr "content", "some description"
$("meta[property='og:image']").attr "content", "thumb image url" 
```

你可以测试看看这个页面的 Facebook 抓取是否正在使用他们的调试工具......只需输入这个页面的 URL 并检查错误等。

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:02:15.767

你需要`meteor add spiderable`。

从流星 0.4.2 开始，在`spiderable`包含该包的情况下，您所要做的就是`<meta>`在客户端 HTML 中包含相关元素`<head>`。

```
<head>
  <meta property="og:type" content="website" />
  <title>HTML head test</title>
</head> 
```

# objective-c - 未调用 UIApplicationDidBecomeActiveNotification

> ID：11281406
> 
> 赞同：3
> 
> 时间：2012-07-01T11:03:09.500
> 
> 标签：objective-c, nsnotificationcenter

我在 RootViewController 的 viewDidLoad 函数中使用以下代码。在 AppDelegate 中调用了 ApplicationDidBecomeActive 函数，但是 RVC 似乎没有成为通知，因为函数 someMethod 没有被调用。有人知道问题是什么吗？

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(someMethod:)
                                         name:UIApplicationDidBecomeActiveNotification object:nil];

....

-(void)someMethod:(NSNotification *)notification {
    NSLog(@"OK");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T20:11:38.460

您的问题是，在单个视图控制器应用程序中，在发布 UIApplicationDidBecomeActiveNotification 之后才会调用 viewDidLoad 。因此，您是在第一次发生通知后注册的。应该捕获后续激活，例如如果您切换应用程序并返回，但您会错过第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T19:16:21.507

如果你想添加一个观察者，`UIApplicationDidBecomeActiveNotification`它也会在第一次启动时触发，你应该在函数中添加观察者

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

您的应用程序委托，如下所示：

`[[NSNotificationCenter defaultCenter] addObserver:self.window.rootViewController selector:@selector(someMethod:) name:UIApplicationDidBecomeActiveNotification object:nil];`

（设置根视图控制器后）。

这是有效的，因为在应用程序初始启动时，在 appDelegate 中的 didBecomeActive 之前调用了 didFinishWithLaunching。

# android - “同步太多联系人删除”和“同步当前遇到问题。它很快就会回来”

> ID：11281407
> 
> 赞同：1
> 
> 时间：2012-07-01T11:03:23.543
> 
> 标签：android, gmail, contacts, android-contacts, google-contacts-api

我遇到了以下问题：“同步太多联系人删除”和“同步当前遇到问题。很快就会回来”

我尝试了几乎解决方案并搜索了几乎网站，没有对我有帮助的解决方案。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:03:23.920

最后，我发现我们可以这样做：

*   将联系人导出到 vCard。
*   将它们导入浏览器中的 gmail 联系人。
*   尝试删除联系人并同步

如果它不起作用，请删除您手机中的所有联系人以及您的 gmail 联系人中的所有联系人。然后使用您导出的 vCard 再次导入。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-29T20:22:09.930

我的平板在Android 4.1 Jelly Bean上运行，并且在Apps文件夹中没有联系人应用程序，因此可以使用适合手机的方法删除联系人数据，并且经常在帮助页面中引用。在对我发现摆脱“联系人删除过多”消息并导致无法自动同步的唯一方法进行了大量讨论之后，我发现删除 Google 帐户是唯一的方法。这假设您的联系人和日历数据保存在 Google 的服务器上，并且已首先获取数据的备份副本。打开飞行模式或以其他方式关闭连接。

1.  转到`Settings > Accounts > Google`并删除接受警告消息的帐户。
2.  检查您的联系人和日历是否确实为空，然后重新添加帐户。
3.  您需要登录您的 Google 帐户，以便准备好密码。
4.  打开同步并关闭你应该去。

它对我有用。

# normalization - 标准化 TF-IDF 结果

> ID：11281410
> 
> 赞同：3
> 
> 时间：2012-07-01T11:03:55.790
> 
> 标签：normalization, normalize, tf-idf

我想规范化我从这个给定代码中得到的 tfidf 结果：

```
for (int docNum = 0; docNum < ir.numDocs(); docNum++) {
            TermFreqVector tfv = ir.getTermFreqVector(docNum, "contents");
            if (tfv == null) {
                // ignore empty fields
                continue;
            }
            String[] tterms = tfv.getTerms();
            int termCount = tterms.length;
            int[] freqs = tfv.getTermFrequencies();
            for (int t = 0; t < termCount; t++) {
                double idf = ir.numDocs() / ir.docFreq(new Term("contents", tterms[t]));
                System.out.println(" " + tterms[t] + " " + freqs[t]*Math.log(idf));
            }
        } 
```

此代码的输出是：

```
area 0.0
areola 5.877735781779639
ari 3.9318256327243257
art 1.6094379124341003
artifici 1.0986122886681098
assign 2.1972245773362196
associ 3.295836866004329
assur 1.9459101490553132
averag 1.0986122886681098
avoid 0.6931471805599453
.
.
. 
```

任何帮助将非常感激。谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T15:48:02.060

一种常见的方法是按文档大小进行标准化。即，您不使用**术语计数**（或绝对频率），而是使用相对频率。

让`freqsum`成为您的频率数组的总和。然后使用

```
freqs[t]/(double)freqsum*Math.log(idf) 
```

为避免此类混淆，我建议使用以下术语：

*   **“绝对频率”的**术语计数****
***   **文档中单词比率的**相对频率******

 ****而不是模棱两可的术语“*词频*”。

我知道从历史上看，如果您查看 Salton, Yang, On the specification of term values in automatic indexing (1973)，它们指的是绝对计数。余弦相似度将消除比例，因此无论如何都无关紧要。像 Lucene 这样的现代系统会尝试更好地控制文档的影响。****

# youtube - 有没有办法限制嵌入式 youtube 剪辑的全屏视图

> ID：11281412
> 
> 赞同：0
> 
> 时间：2012-07-01T11:04:30.413
> 
> 标签：youtube, embed, fullscreen, maximize

有没有办法限制嵌入式 youtube 剪辑的全屏视图？

如果我能提供它可以“恢复”的最大大小，那就更好了。我不希望它全屏显示，但我可能需要在包含的“框架”中最大化它。

这甚至可能吗？任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T20:19:23.807

找到了解决方案。

只是为了帮助可能需要相同信息的其他人：

`<param name="allowFullScreen" value="false"></param>`在`object`标签内添加就可以了。

希望能帮助到你。

# java-me - 在 j2me 画布表单中使用事件？

> ID：11281413
> 
> 赞同：0
> 
> 时间：2012-07-01T11:04:34.793
> 
> 标签：java-me, midp, lcdui

^(我是一个点网开发人员。最近被迫在 j2me 中做一些事情。)

我们在 j2me 中有用于处理 SMS-Text-Message 的应用程序，并根据这些短信制作不同的 UI。在此应用程序表单中，使用`Canvas`.

每个画布中有几个操作（通过用户选择不同的选项来执行）。其中一些`operation create new canvas`（类似于 multi Form show ）。

是否有解决方案在每个画布表单中定义事件，然后在调用一些操作之后（如创建新画布）。

> **更多信息：**

例如我有打击代码（画布形式）：

```
public void keyPressed(int key) {
        if (key == -3) {
            // call OK-event 
        }
    } 
```

这意味着当用户输入特定的键时，事件调用返回到 base **`midlet`**。（在这种情况下**`Canvas-Form`**，并且**`midlet`**在不同的 java 类中）。

^(为了在**Dot net**中做到这一点，我们在 中定义事件**`Canvas-Form`**，然后调用它。我们还处理该事件**`midlet-class`**并编写自己的代码 int 该处理方法)

**所以我的问题是在 J2me 中如何做同样的事情？**

> **越来越多的附加信息（更新 2）**

我对 java 和 j2me 的了解少于 Alga 对此的了解:)。所以也许我的问题看起来很荒谬。但我的***问题***有这些部分：

1）定义事件（我不知道怎么做！）
2）调用事件（我`call OK-event`在代码示例中写注释）
3）处理事件方法（我不知道怎么做！）

在我的搜索中，我看到了很多如何使用命令定义事件的示例。但是在画布形式中我应该定义`Command`这样做还是不需要，`Command`因为我在画布中绘制按钮。我希望有人能理解我对这个描述的问题。

^(并希望它可以防止**投反对票**:))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:04:37.700

这很容易做到。Canvas 可以监听按键和指针事件，以及命令。您可以在 API 中定义的各个方法中实现所需的*操作。*

如果您有兴趣，请在[Canvas API 文档](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html)中找到更多详细信息。

*创建新画布*也很容易，因为这些都是普通的旧 Java 对象，没有魔法。您似乎主要在 C# 中活跃，希望它与您创建 C# 对象的实例非常相似。

唯一值得记住的细节是，要使您的画布（或任何[Displayable](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Displayable.html "API 文档")）可见，您需要一个与您的应用程序对应的[Display实例。](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html "API 文档")获得该实例的唯一方法是从扩展[MIDlet](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/midlet/MIDlet.html "API 文档")的类——从充当 MIDP 应用程序入口点的类。

您必须在那里获得 Display 实例，并进一步确保它在您需要的任何地方都可用。该实例也是一个普通的 Java 对象，与 C# 对象非常相似，并且公开它的方式不是特定于 MIDP 的。

如果您需要了解更多详细信息，还可以考虑学习参考教程和 API 文档，网址为

*   [lcdui 标签维基](https://stackoverflow.com/tags/lcdui/info)
*   [midp 标签维基](https://stackoverflow.com/tags/midp/info)

* * *

对于问题更新中提供的代码片段，找出发生了什么的方法是添加适当的日志记录并在模拟器中重新测试它，当您按键时查看模拟器控制台。

```
public void keyPressed(int key) {
        // add logging here:
        System.out.println("keyPressed [" + key + "]");
        if (key == -3) {
            // add logging here:
            System.out.println("calling OK-event");
            // call OK-event 
        }
} 
```

有关示例代码，请查看 lcdui 标记 wiki，参考“MIDP 事件处理”教程，在`EventEx3.java`. lcdui 标记 wiki 中列出的另一个值得一看的教程是“J2ME 教程：使用 MIDP 2.0 的用户界面”，*使用低级 API*部分- 也有示例代码。

# php - 从多个包继承的 Magento 主题

> ID：11281415
> 
> 赞同：2
> 
> 时间：2012-07-01T11:04:35.723
> 
> 标签：php, magento

在magento中是否有可能有一个主题继承自多个其他主题（除了基础）

典型的层次结构是主题 -> 默认 -> 基础。

我想要以下内容：

主题 -> 主题 2 -> 默认 -> 基础

这可能吗？如果没有，任何人都可以提供有关 magento 代码库的任何兴趣点供我研究可能的解决方案。

提前致谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:21:07.260

你寻求的答案在课堂`Mage_Core_Model_Design_Package`上。特别是`_fallback`方法：

```
protected function _fallback($file, array &$params, array $fallbackScheme = array(array()))
{
    if ($this->_shouldFallback) {
        foreach ($fallbackScheme as $try) {
            $params = array_merge($params, $try);
            $filename = $this->validateFile($file, $params);
            if ($filename) {
                return $filename;
            }
        }
        $params['_package'] = self::BASE_PACKAGE;
        $params['_theme']   = self::DEFAULT_THEME;
    }
    return $this->_renderFilename($file, $params);
} 
```

如您所见，它将遍历一系列备用包/主题组合，直到找到一个包含它正在寻找的文件的组合。如果它没有找到它，它最终将使用基本/默认值。

不幸的是，传递给的数据`fallbackScheme`被硬编码在同一个类中，正如您在这个调用中看到的那样（尽管还有另一种方法可以做类似的事情，即`getSkinUrl`）：

```
public function getFilename($file, array $params)
{
    Varien_Profiler::start(__METHOD__);
    $this->updateParamDefaults($params);
    $result = $this->_fallback($file, $params, array(
        array(),
        array('_theme' => $this->getFallbackTheme()),
        array('_theme' => self::DEFAULT_THEME),
    ));
    Varien_Profiler::stop(__METHOD__);
    return $result;
} 
```

对于带有 package`some_package`和 theme的典型请求，`some_theme`它将是这样的：

```
array(3) {
  [0]=>
  array(0) {
  }
  [1]=>
  array(1) {
    ["_theme"]=>
    string(1) "some_theme"
  }
  [2]=>
  array(1) {
    ["_theme"]=>
    string(7) "default"
  }
} 
```

如果您真的想要多个主题继承，则需要重写上述两个方法并添加额外的回退。

幸运的是，主题将成为 Magento2 中的模块，这将解决这个问题。

# javascript - 我如何知道 chrome.experimental.socket 的状态？

> ID：11281418
> 
> 赞同：2
> 
> 时间：2012-07-01T11:05:02.950
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-app

当我在 chrome-extension 上使用“chrome.experimental.socket API”时，我怎么知道套接字已经断开或者刚刚断开。我正在使用 Canary-Chrome。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T04:11:28.060

我刚刚做了一个[更改](http://src.chromium.org/viewvc/chrome?view=rev&revision=150190)，它向套接字 API 添加了一个 getInfo 调用，其中包括连接/断开连接状态。

但是值得注意的是，即使远程端断开了连接，套接字也可能保持“连接”状态；在这种下降之后， read() 将返回错误/EOF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:11:50.663

目前无法使用 API 获取套接字的状态。我已经为此提交了[Chromium 功能请求](https://code.google.com/p/chromium/issues/detail?id=135464)。

# android - 运行时错误：ClassNotFound 异常

> ID：11281420
> 
> 赞同：1
> 
> 时间：2012-07-01T11:05:22.467
> 
> 标签：android, android-intent, classnotfoundexception, inflate-exception

我已经有这个运行时错误将近一周了，但找不到解决方案（我是一个新的 android 程序员）。请帮我！

日志位于此消息的末尾。我知道我有一些类似的问题，但我找不到解决问题的方法。

我试图从活动中调用一个类，`Intent`但运行时错误说找不到这个类。

这是日志文件：

```
07-01 13:22:57.098: E/dalvikvm(1488): Could not find class 'com.XXX.ui.ViewPager',
referenced from method com.XXX.ui.MainIWrapper.onCreate
07-01 13:22:57.338: E/AndroidRuntime(1488): FATAL EXCEPTION: main
07-01 13:22:57.338: E/AndroidRuntime(1488): java.lang.RuntimeException: Unable to start
    activity ComponentInfo{com.XXX/com.XXX.ui.MainIWrapper}:

android.view.InflateException: Binary XML file line #43: Error inflating class
com.XXX.ui.NavigationBar
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.os.Handler.dispatchMessage(Handler.java:99)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.os.Looper.loop(Looper.java:130)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.ActivityThread.main(ActivityThread.java:3683)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
java.lang.reflect.Method.invokeNative(Native Method)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
java.lang.reflect.Method.invoke(Method.java:507)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
dalvik.system.NativeStart.main(Native
Method)
07-01 13:22:57.338: E/AndroidRuntime(1488): Caused by: android.view.InflateException:
Binary
XML file line #43: Error inflating class com.XXX.ui.NavigationBar
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at  
android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.inflate(LayoutInflater.java:408)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.Activity.setContentView(Activity.java:1657)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
com.XXX.ui.MainIWrapper.onCreate(MainIWrapper.java:69)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-01 13:22:57.338: E/AndroidRuntime(1488):     ... 11 more
07-01 13:22:57.338: E/AndroidRuntime(1488): Caused by: java.lang.ClassNotFoundException:
com.XXX.ui.NavigationBar in loader dalvik.system.PathClassLoader[/data/app/com.XXX-
2.apk]
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
java.lang.ClassLoader.loadClass(ClassLoader.java:551)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
java.lang.ClassLoader.loadClass(ClassLoader.java:511)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.createView(LayoutInflater.java:471)
07-01 13:22:57.338: E/AndroidRuntime(1488):     at
android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
07-01 13:22:57.338: E/AndroidRuntime(1488):     ... 23 more 
```

这是处理意图的函数：

```
private Activity from;
private Class to;

public void open() {
    Intent intent;
    intent = new Intent(from, to);

    if (extras != null) {
        intent.putExtras(extras);
    }

    if (to.equals(MainWrapper.class)) {
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    }

    if (activityForResultRequestCode == -1) {
        from.startActivity(intent);
    } else {
        from.startActivityForResult(intent, activityForResultRequestCode);
    }

    if (pendingAnimation != null && pendingAnimation.length == 2) {
        from.overridePendingTransition(pendingAnimation[0], pendingAnimation[1]);
    } else {
        from.overridePendingTransition(R.anim.slide_in_right, R.anim.hold);
    }

    if (toClosePreviousActivity) {
        from.finish();
    }   
} 
```

这是**来自**活动的调用（需要更改），以及我要加载的类（它使用`open()`正在执行意图的函数）：

`UiUtils.getOpenActivityBuilder(SplashScreen.this,MainIWrapper.class).toClosePrev(true).open;`

这是我清单的一部分——它是需要更改为类的主要活动`MainIWrapper`：

```
<activity
    android:name=".ui.SplashScreen"
    android:configChanges="orientation"
    android:screenOrientation="portrait"
    android:theme="@android:style/Theme.NoTitleBar" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
 </activity> 
```

这是清单文件中的 mainWrapper 声明：

```
<activity
    android:name=".ui.MainIWrapper"
    android:configChanges="orientation"
    android:launchMode="singleTask"
    android:screenOrientation="portrait"
    android:theme="@android:style/Theme.NoTitleBar" /> 
```

这是`mainWrapper`声明：

```
public class MainIWrapper extends BaseWebSiteScreen implements HasBox {...} 
```

这是主要的活动声明：

```
public class SplashScreen extends Activity {...} 
```

* * *

谢谢你的帮助但我仍然找不到问题（我真的是android的初学者）

这些是我的 XML 中的行（从第 43 行开始）：

```
<com.XXX.ui.NavigationBar
        xmlns:vwpgind="http://schemas.android.com/apk/res/com.XXX"
        android:id="@+id/navigation_bar"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="top"
        vwpgind:arrowImageSrc="@drawable/common_slider_arrow"
        vwpgind:hideFirstItem="true" /> 
```

MainIWrapper.OnCreate() 的代码是：

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main_iwrapper);

isUserLoggedIn = UserDetails.getInstance(getApplicationContext()).isUserLoggedIn();

//we want to refresh user thumb each time user opens Main iWrapper
if (UserDetails.getInstance(getApplicationContext()).isUserLoggedIn())
UserDetails.deleteCachedUserThumb(getApplicationContext());

textBox = (TextBox) findViewById(R.id.text_box);
viewPager = (ViewPager) findViewById(R.id.view_pager);

pageViewAdapter = new PageViewAdapter();
viewPager.setAdapter(pageViewAdapter);

viewPager.setOffscreenPageLimit(NUMBER_OF_PAGES_TO_PRELOAD);

navigationBar = (NavigationBar) findViewById(R.id.navigation_bar);
topBar = (TopBar) findViewById(R.id.top_bar);
progressAnimation = (ImageView) findViewById(R.id.progress_animation);
bottomBar = (BottomBar) findViewById(R.id.bottom_bar);

} 
```

我仍然找不到这里的错误。我查看了包含 com.XXX.ui 包的构建路径和 src 文件夹（此包包含 NavigationBar 和 ViewPager 类）

* * *

这些是我的 XML 中的行（从第 43 行开始）：

```
 <com.XXX.ui.NavigationBar
            xmlns:vwpgind="http://schemas.android.com/apk/res/com.XXX"
            android:id="@+id/navigation_bar"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="top"
            vwpgind:arrowImageSrc="@drawable/common_slider_arrow"
            vwpgind:hideFirstItem="true" /> 
```

MainIWrapper.OnCreate() 的代码是：

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main_iwrapper);

isUserLoggedIn = UserDetails.getInstance(getApplicationContext()).isUserLoggedIn();

//we want to refresh user thumb each time user opens Main iWrapper
if (UserDetails.getInstance(getApplicationContext()).isUserLoggedIn())
    UserDetails.deleteCachedUserThumb(getApplicationContext());

textBox = (TextBox) findViewById(R.id.text_box);
viewPager = (ViewPager) findViewById(R.id.view_pager);

pageViewAdapter = new PageViewAdapter();
viewPager.setAdapter(pageViewAdapter);

viewPager.setOffscreenPageLimit(NUMBER_OF_PAGES_TO_PRELOAD);

navigationBar = (NavigationBar) findViewById(R.id.navigation_bar);
topBar = (TopBar) findViewById(R.id.top_bar);
progressAnimation = (ImageView) findViewById(R.id.progress_animation);
bottomBar = (BottomBar) findViewById(R.id.bottom_bar);

} 
```

我仍然看不到这里有什么问题

```
public class ViewPager extends android.support.v4.view.ViewPager {

public ViewPager(Context context) {
    super(context);
}

public ViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public Parcelable onSaveInstanceState() {
    try {
        return super.onSaveInstanceState();
    } catch (Exception e) {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:23:40.007

编译器不会检查布局 XML 文件中引用的类是否存在，所以只在运行时报错是正常的。

很可能是com。`XXX.ui.NavigationBar`您的类路径中不存在类。检查你的包名，也许这只是一个错字，或者你可能在`NavigationBar`类的包名重构之后忘记更改 XML 文件中的包名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:03:59.410

错误都在这里：

`07-01 13:22:57.098: E/dalvikvm(1488): Could not find class 'com.XXX.ui.ViewPager', referenced from method com.XXX.ui.MainIWrapper.onCreate android.view.InflateException: Binary XML file line #43: Error inflating class com.XXX.ui.NavigationBar`

发布 MainIWrapper.onCreate() 中的代码，并查看导航栏的 XML 中的第 43 行。

# c# - 当默认操作为空时，为什么空的控制器名称属性起作用？

> ID：11281421
> 
> 赞同：3
> 
> 时间：2012-07-01T11:05:25.643
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在阅读 Pro ASP.NET MVC 3 中的 URL 和 Routes 章节，并试图查看当对象默认值包含空值时会发生什么。这是我目前的路线。

```
routes.MapRoute("MyRoute", "{controller}/{action}", 
    new { controller="Home", action="Index" }); 
```

以下是我对对象默认值的可能组合所做的观察。（**在每种情况下，BOLD 中的 URL 都无法访问。**）

# 情况1

```
new { controller="Home", action="Index" }); 
```

1.  [http://mywebapp.net/](http://mywebapp.net/)
2.  [http://mywebapp.net/Home/](http://mywebapp.net/Home/)
3.  [http://mywebapp.net/Home/Index/](http://mywebapp.net/Home/Index/)

# 案例2

```
new { controller="Home", action="" }); 
```

1.  **http://mywebapp.net/**
    错误：RouteData 必须包含一个名为“action”的项目，其值为非空字符串。
2.  **http://mywebapp.net/Home/**
    错误：RouteData 必须包含一个名为“action”的项目，其值为非空字符串。
3.  [http://mywebapp.net/Home/Index/](http://mywebapp.net/Home/Index/)

上述第二个 URL 的错误是因为路由系统找不到默认操作名称。

# 案例3

```
new { controller="", action="" }); 
```

1.  **http://mywebapp.net/**
    错误：值不能为空或空。参数名称：controllerName
2.  **http://mywebapp.net/Home/**
    错误：RouteData 必须包含一个名为“action”的项目，其值为非空字符串。
3.  [http://mywebapp.net/Home/Index/](http://mywebapp.net/Home/Index/)

上述第一个和第二个 URL 的错误是因为路由系统分别找不到默认控制器和操作名称。

# 案例4

```
new { controller="", action="Index" }); 
```

1.  **http://mywebapp.net/**
    错误：值不能为空或空。参数名称：controllerName
2.  [http://mywebapp.net/Home/](http://mywebapp.net/Home/)（如何以及为什么可以访问？）
3.  [http://mywebapp.net/Home/Index/](http://mywebapp.net/Home/Index/)

* * *

当**Case 3**`controller`中的和`action`属性都为空时，我收到了预期的错误。所以在**案例 4**中，当我的属性值为空时，如何访问第二个 URL [http://mywebapp.net/Home/](http://mywebapp.net/Home/)？****`controller`****

 ****它是否像第二个 URL 一样简单，因为已经定义了 HomeController 并且路由系统通过约定找到了它，或者对这种行为有一些解释？可以对此进行修改以使第二个 URL 不可访问，还是违反了约定优于配置的原则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T17:54:21.707

`Home`并且`Index`不是硬编码约定，除非您将它们指定为默认值，否则运行时不会尝试找到它们。

案例 2.1 不起作用，因为 URL 不包含`action`参数值，并且没有`action`默认值。

案例 4.1 不起作用，因为 URL 不包含`controller`参数值，并且没有`controller`默认值。

如果您想了解有关路由如何工作的更多详细信息，我推荐[这篇文章。](http://maxtoroq.github.io/2012/04/putting-aspnet-routing-to-test.html)****

# pseudocode - 插入排序算法伪代码

> ID：11281422
> 
> 赞同：-1
> 
> 时间：2012-07-01T11:05:25.990
> 
> 标签：pseudocode, sorting

```
INSERTION-SORT(A)
1 for j ← 2 to length[A]
2   do key ← A[j]
3     ▹ Insert A[j] into the sorted sequence A[1  j - 1].
4     i ← j - 1
5     while i > 0 and A[i] > key
6     do A[i + 1] ← A[i]
7         i ← i - 1
8     A[i + 1] ← key 
```

你好！这是我的第一个问题。有人能帮我理解这段代码吗？为什么是'A[i+1]=A[i]'？当我们在列表中列出时，这不应该是其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:10:30.927

`A[i+1]=A[i]`用于将每个大于`key`一个位置的元素向右移动，以便我们可以放在`key`它们之前。

[您可以在此页面](http://en.wikipedia.org/wiki/Insertion_sort)上找到更多信息。

# java - 两行代码之间的延迟 - 图形

> ID：11281427
> 
> 赞同：0
> 
> 时间：2012-07-01T11:06:10.187
> 
> 标签：java, swing, graphics, repaint

我正在尝试制作[西蒙游戏](http://en.wikipedia.org/wiki/Simon_%28game%29)。我正在编写游戏的中途，但我遇到了问题。我希望程序从队列中读取之前在游戏中的所有值，并以正确的顺序闪烁它们的颜色（我选择将它们变为灰色，然后在第二个恢复正常），这是我的问题。如果您查看该方法`play()`，您将看到我在那里写的评论。我怎么做？

这是我的代码：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.geom.Arc2D;
import java.util.Date;

import javax.swing.JPanel;
import javax.swing.Timer;

import unit4.collectionsLib.Queue;

public class window extends JPanel implements MouseListener , ActionListener{

    Queue <Integer>data = new Queue<Integer> ();
    Queue <Integer>temp = new Queue<Integer> ();
    int random;
    Timer prestart;
    int prestartcount;
    Color [] colors = {Color.red,Color.blue,Color.yellow,Color.green};  

    public window (){       
        prestart = new Timer (1000,this);
        int prestartcount=0;    
        prestart.start();       
    }

    public void play (){            
        random = (int)(Math.random()*4);
        data.insert(random);

        int x=0;
        Color temp=Color.black; 
        x = data.remove();
        this.temp.insert(x);
            temp = colors[x];
        colors[x]=Color.gray;
        // delay of one second here
        colors[x]=temp;
    }   

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        g.setColor(colors[0]);
        g.fillArc(80, 150, 250, 250, 0, 360);

        g.setColor(colors[1]);
        g.fillArc(80, 150, 250, 250, 0, 270);

        g.setColor(colors[2]);
        g.fillArc(80, 150, 250, 250, 0, 180);

        g.setColor(colors[3]);
        g.fillArc(80, 150, 250, 250, 0, 90);        

        g.drawString(prestartcount+"", 0, 30);
        repaint();
    }

    @Override
    public void mouseClicked(MouseEvent arg0) {
        arg0.getLocationOnScreen();     
    }

    @Override
    public void mouseEntered(MouseEvent arg0) { 
    }

    @Override
    public void mouseExited(MouseEvent arg0) {      
    }

    @Override
    public void mousePressed(MouseEvent arg0) {     
    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
    }

    @Override
    public void actionPerformed(ActionEvent act) {
        if (act.getSource()==prestart){
            if (prestartcount<3)
                prestartcount++;
            else{
                prestart.stop();
                play(); 
                }               
            }   
        }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:22:32.777

使用基于 Swing 的单[`Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)发来翻转颜色并调用`repaint()`. 有关详细信息，请参阅[在 Swing 应用程序中使用计时器](http://java.sun.com/products/jfc/tsc/articles/timer/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:34:36.997

```
colors[x]=Color.gray;
// delay of one second here
timer = new Timer(0, new ActionListener() {
  @Override
  public void actionPerformed(ActionEvent evt) {
      colors[x]=temp; 
      repaint(); //repaint the gui, or you want see the effect
  }
});
timer.setInitialDelay(1000); //wait one second
timer.setRepeats(false); //only once
timer.start(); 
```

您可能必须将 temp 设为 final，或将其存储在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:09:32.503

尝试使用[Thread.sleep()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29)。

```
Causes the currently executing thread to sleep (temporarily cease execution) for the specified number of milliseconds. The thread does not lose ownership of any monitors. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T11:17:58.343

[`Thread.sleep(1000)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29)是你需要的。

# php - 更改评论列表中显示 IP 后面的 Wordpress 链接 - column_author

> ID：11281428
> 
> 赞同：0
> 
> 时间：2012-07-01T11:06:20.950
> 
> 标签：php, wordpress, function, hook

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T23:43:27.073

我很难找到一种纯 PHP 方法来使用钩子来做到这一点，但我认为没有。注释表中的大部分 HTML 都是通过文件中的 echo 输出的`wp-admin/includes/class-wp-comments-list-table.php`，可以轻松扩展，但我没有看到指示 Wordpress 加载扩展类的方法。

无论如何，这是一个 Wordpress 插件，它注册一个钩子，`admin_footer`如果正在查看的页面是`edit-comments.php`.

您可以将其放在一个`.php`文件中并将其添加到您的`wp-content/plugins`文件夹中。转到 WP Admin，然后激活插件。我叫它`Comment IP Address Blacklist Lookup`。

这是代码。我不打算用它做任何事情，所以我将它作为 GPL 代码发布。随时寻求帮助或提出任何改进建议。

```
<?php
/*
Plugin Name: Comment IP Address Blacklist Lookup
Plugin URI: http://example.com
Description: Changes the IP address link in the comment list to MXToolbox.com's blacklist check
Author: Drew Phillips
Version: 0.1
Author URI: https://www.drew.co.il
*/

/*  Copyright (C) 2012 Drew Phillips

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
*/

require_once ABSPATH . '/wp-includes/pluggable.php';

// Admin menu and admin functions below...

add_action('admin_footer', 'replace_admin_footer');

function replace_admin_footer()
{
    if (basename($_SERVER['SCRIPT_FILENAME']) == 'edit-comments.php') {
        echo <<<EOD
<script type="text/javascript">
<!--
    function replace_comments()
    {
        var links = document.getElementsByTagName('a');
        var i, link, match;

        for (i in links) {
            link = links[i];

            if ( null != (match = link.href.match(/edit-comments\.php\?s=(\d+\.\d+\.\d+\.\d+)&mode=detail/))) {
                link.href = "http://www.mxtoolbox.com/SuperTool.aspx?action=blacklist:" + match[1];
                link.target = "_blank";
            }
        }

    }

    replace_comments();
-->
EOD;
    }
} 
```

# php - 保存大量变量

> ID：11281429
> 
> 赞同：2
> 
> 时间：2012-07-01T11:06:31.680
> 
> 标签：php, arrays, variables

我在 php 脚本中有大量变量。最优性如何，将这些数据保存在单个变量中

```
$a = "aaa";
$b = "bbb";
$c = "ccc"; 
```

还是在关联数组中？

```
$mas = array("a"=>"aaa","b"=>"bbb","c"=>"ccc"); 
```

哪种方法更好？还是没有区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:07:54.307

这取决于。

最好为同一上下文中的变量创建一个数组。例子：

```
 $config = array(); 
```

您可以将所有配置变量存储到一个数组中。当然，执行脚本所需的其他变量不应该存在。

# jakarta-ee - java.lang.ClassFormatError：类文件 groovy/jmx/builder/package-info 中的非法类名“groovy/jmx/builder/package-info”

> ID：11281430
> 
> 赞同：3
> 
> 时间：2012-07-01T11:06:34.723
> 
> 标签：jakarta-ee, maven, groovy, maven-2

在我的 pom 文件中添加**groovy-all**依赖项后：

```
 <dependency>
      <groupId>org.codehaus.groovy</groupId>
      <artifactId>groovy-all</artifactId>
      <version>1.7.5</version>
    </dependency> 
```

运行应用程序时出现以下异常：

```
WARNING: Unable to load class [groovy.jmx.builder.package-info] to check against the @HandlesTypes annotation of one or more ServletContentInitializers. 
java.lang.ClassFormatError: Illegal class name "groovy/jmx/builder/package-info" in class file groovy/jmx/builder/package-info
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2820)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:2006)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1969)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1858)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1826)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1812)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1306)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450) 
```

我正在使用 maven-2，tomcat 7

请告知我为什么会收到此异常，以及如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:23:29.547

这就是[这里的错误](http://jira.codehaus.org/browse/GROOVY-4673)

使用大于 1.8.1 的 groovy 版本将修复它

或者，手动从 1.7.5 groovy-all jar 中删除 package-info 文件。

升级会更容易...

# c# - 替换邮件链接

> ID：11281432
> 
> 赞同：2
> 
> 时间：2012-07-01T11:07:02.290
> 
> 标签：c#, html

我有这个示例字符串：

```
var content = "Lorem ipsum dolor sit amet <a href=\"mailto:info@xxx.com\">info@xxx.com</a> ipsum dolor <a href=\"mailto:info@yyy.eu\">info@yyy.eu</a> adipiscing elit."; 
```

当字符串包含邮件链接时，我想替换（操作）所有出现的 a-tag。

锚点在操作后应该看起来像：

```
<a href="#" title="protected">in..@xxx.com</a> 
```

内容字符串可以包含任意数量的邮件链接。

我怎样才能最好地完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:06:57.810

如果你有 XHTML，那么就像 Chuck 展示的那样使用 XElement。

如果没有，那么正则表达式就是要走的路。就像是：

```
Regex find = new Regex("<a\\b[^>]*href=['\"]mailto:(.*?)['\"]", RegexOptions.Singleline | RegexOptions.IgnoreCase); 
```

警告，我没有测试上面的代码，但我 99% 确定它是正确的。此外，我可能错过了电子邮件地址中的 > 等特殊情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:25:50.220

将内容转换为 XML，然后简单地搜索`a`包含`href`以`mailto:`

你需要这个来使用 XPath：`using System.Xml.XPath;`

```
var content = "Lorem ipsum dolor sit amet <a href=\"mailto:info@xxx.com\">info@xxx.com</a> ipsum dolor <a href=\"mailto:info@yyy.eu\">info@yyy.eu</a> adipiscing elit.";

XElement x = XElement.Parse(string.Format("<root>{0}</root>", content));
var hrefs = x.XPathSelectElements("a[starts-with(@href, 'mailto:')]");
foreach (XElement href in hrefs)
{
    href.Attribute("href").Value = "#";
    href.Add(new XAttribute("title", "protected"));

    string email = href.Value;
    int at = email.IndexOf('@');
    if(at > 0)
    {
        string username = email.Substring(0, at);
        string domain = email.Substring(at);
        if (username.Length > 2)
            href.Value = string.Format("{0}..{1}", 
                username.Substring(0, 2), domain);
    }
}
string result = string.Concat(x.Nodes().ToArray()); 
```

# android - Android 设备购买和测试

> ID：11281434
> 
> 赞同：2
> 
> 时间：2012-07-01T11:07:26.647
> 
> 标签：android, device, screen-size

我的公司需要设备（目前最多四个）来开始测试 Android 应用程序。我知道根据 Android 开发者论坛有四种屏幕尺寸，

1.  X-大
2.  大的
3.  中等的
4.  小的

一个人如何购买属于四个不同类别的 4 种不同设备。例如，我如何知道三星 Galaxy s2 属于“大”还是“中”系列？

任何关于在每个类别中获得什么设备的建议都将受到高度赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:12:16.527

您应该观看 Google IO 2012 与 Reto Meier 的谈话“[让优秀的应用程序变得伟大](http://www.youtube.com/watch?v=PwC1OlJo5VM)”，因为他从大约 45 分钟开始就准确地讨论了这个问题。

正如他所提到的，您不能只购买具有不同屏幕尺寸的设备，因为像素是无关紧要的，因为像素密度。例如 Galaxy Nexus、One X 和 Nexus 7 都具有相同的屏幕分辨率，但外形尺寸不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T11:09:14.883

请阅读[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)。它准确地展示了您对多种屏幕尺寸的期望，以及您如何为它们进行设计。

> xlarge 屏幕至少 960dp x 720dp
> 大屏幕至少 640dp x 480dp
> 普通屏幕至少 470dp x 320dp
> 小屏幕至少 426dp x 320dp

另请参阅此粗略插图： ![在此处输入图像描述](../Images/f3dbd89a8fe70bf2b5821d45891eda60.png)

智能手机 (3"-4")、7" 平板电脑和 10" 平板电脑会很好用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T11:14:40.470

我不知道您所说的屏幕尺寸资格，但我希望实际上有超过四种不同的屏幕分辨率可用，最高可达 1280x800（Galaxy Note）。我会尝试使用“图形数组”< [http://en.wikipedia.org/wiki/Graphic_display_resolutions](http://en.wikipedia.org/wiki/Graphic_display_resolutions) > 来引用屏幕尺寸。

只需查看一些不同价位的流行型号，您就可以找出常见的分辨率。此外，您可以查看 SDK 随附的 android 模拟器建议的分辨率。

关于购物，我只会选择一家制造商，如三星或 HTC，并从不同的奖品范围内挑选具有不同屏幕尺寸的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T11:19:42.430

屏幕尺寸并不是唯一重要的事情。还有像素密度属性。

但是，您不需要开始购买所有可能的设备。最好关注您可以在此处看到的常见配置（向下滚动到屏幕尺寸和密度）：

[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

所以最常见的是 normal/hdpi，它大约是 4 英寸屏幕和 240dp 密度。接下来是 normal/mdpi，但可能正在下降。

lagre/mdpi 和 xlarge/mdpi 是平板电脑，而 normal/xhdpi 是当今的超级手机，例如 Galaxy s3。

# mysql - MySQL XML 查询

> ID：11281436
> 
> 赞同：4
> 
> 时间：2012-07-01T11:07:47.953
> 
> 标签：mysql, sql

我在 MySQL 中遇到了 ExtractValue 函数的问题。

这是我的示例 XML：

```
<As>
    <A>
        <B>Chan</B>
    </A>
    <A>
        <B>Shey</B>
    </A>
    <A>
        <B>Bob</B>
    </A>
</As> 
```

这是我当前的查询：

```
SELECT ExtractValue(@XML, '/As/A/B') 
```

结果如下：

```
CHAN SHEY BOB 
```

这是我想要的：

```
CHAN
SHEY
BOB 
```

有人可以帮我实现这一目标..谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T20:32:07.200

这个问题在这里得到了解答：

[在 MySQL 中解析 XML 字符串](https://stackoverflow.com/questions/902678/parse-an-xml-string-in-mysql)

如果您将孩子更改为“B”，该文章中的解决方案应该有效：

```
DECLARE i INT DEFAULT 1;
DECLARE count DEFAULT ExtractValue(xml, 'count(//child)');

WHILE i <= count DO
SELECT ExtractValue(xml, '//child[$i]');
SET i = i+1;
END WHILE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T10:31:27.920

解决您的问题需要使用`numbers`表格：整数表格，1,2,3,.... 直到某个合理的值，例如 1024。

然后，您将使用[字符串遍历](http://code.openark.org/blog/mysql/unwalking-a-string-with-group_concat)来解决问题。

这是表的 CREATE TABLE 语句`numbers`：

```
CREATE TABLE numbers (
  `n` smallint unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`n`)
)
;
INSERT INTO numbers VALUES (NULL);
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers;
INSERT INTO numbers SELECT NULL FROM numbers; 
```

以上填充值 1..1024

现在查询：

```
SELECT 
  SUBSTRING_INDEX(SUBSTRING_INDEX(ExtractValue(@XML, '/As/A/B'), ' ', n), ' ', -1) AS value
FROM
  numbers
WHERE
  n BETWEEN 1 AND ExtractValue(@XML, 'count(/As/A/B)')
;

+-------+
| value |
+-------+
| Chan  |
| Shey  |
| Bob   |
+-------+
3 rows in set (0.02 sec) 
```

我们使用**3**`ExtractValue(@XML, 'count(/As/A/B)')`来获取值——匹配的 XML 元素的数量。

 **遍历数字 1、2、3，我们从 text`CHAN SHEY BOB`中提取 token #1、token #2、token #3，并按空格分割。

笔记：

*   ExtractXML 返回以空格分隔的值。但是，如果返回的文本中有空格 - 不行。它与分隔空间无法区分。

*   可以避免创建数字表并[即时生成数字](http://code.openark.org/blog/mysql/generating-numbers-out-of-seemingly-thin-air)。我建议不要——它会产生很多开销。拥有一个 1024 行数字表总是很不错的。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-26T10:26:59.493

```
DROP PROCEDURE IF EXISTS `test223`$$ CALL test223()
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `test223`()
BEGIN
 DECLARE xmlDoc TEXT;
 DECLARE i INT ;
 DECLARE coun INT;
 DECLARE child1 VARCHAR(400);
 DECLARE child2 VARCHAR(400);

 SET i =1;

 SET xmlDoc = '<Data><parent><child1>Example 1</child1><child2>Example 2</child2></parent><parent><child1>Example 3</child1><child2>Example 5</child2></parent><parent><child1>Example 5</child1><child2>Example 6</child2></parent></Data>';

 SET coun = ExtractValue(xmlDoc, 'count(/Data/parent/child1)');

 DROP TEMPORARY TABLE  IF EXISTS `parent`; 
 CREATE TEMPORARY TABLE parent (     child1 VARCHAR(400),   
                                                                              child2 VARCHAR(400) ); 

 WHILE i <= coun DO

     INSERT INTO parent
    SELECT ExtractValue(xmlDoc, '//parent[$i]/child1'), ExtractValue(xmlDoc,   '//parent[$i]/child2');

    SET i = i+1;

 END WHILE;

   SELECT * FROM  parent; 

END$$

DELIMITER ; 
```

Response Table :

```
+---------------------+
| Child1      | Child2     |
|-----------|-----------|
|Example 1 |Example 2|
|-----------|-----------|
|Example 3 |Example 5|
|-----------|-----------|
|Example 5 |Example 6|
|-----------|-----------|

```

[http://pinaki-mukherjee.blogspot.in/2014/07/mysql-xml-querying.html](http://pinaki-mukherjee.blogspot.in/2014/07/mysql-xml-querying.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-01T11:16:31.920

您可能需要重新考虑您的数据库设计。关系数据库系统不是为了支持一个字段中的多个值而构建的。[ExtractValue](https://dev.mysql.com/doc/refman/5.6/en/xml-functions.html#function_extractvalue)是一种过滤器，用于从字段中的 XML 数据中提取*一个*值，而不是用于获取多行数据。

您应该阅读数据库规范化。所有表格至少应遵守**第一范式**(1NF)，即每个字段中只有一个值。不满足 1NF 的表通常很难查询，因为一般的 SQL 和特别是 MySQL 等实现并没有为您提供任何用于此类查询的好工具。

如果您仍然想与非 1NF 表一起努力，我认为您可能需要从数据库中获取数据并在应用程序代码中完成工作。**

# c# - 为什么我的 ObservableCollection 没有在 ListBox 中刷新？

> ID：11281441
> 
> 赞同：0
> 
> 时间：2012-07-01T11:09:26.947
> 
> 标签：c#, silverlight, windows-phone-7

我的代码有问题。我使用列表框和可观察集合将数据添加到列表中。代码如下所示：

```
ListData actualData;
ObservableCollection<ListData> data;

public Calculate()
{
    InitializeComponent();

    data = new ObservableCollection<ListData>();
    newData();

    listbox1.ItemsSource = data;
}

private void newData()
{
    actualData = new ListData("1", "2", "3");
    data.Add(actualData);
} 
```

现在，我有一个按钮，例如，它发生了变化，`actualData`但我看不到列表中的变化。

按钮看起来像：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    actualData.first = "12";
} 
```

我找到了解决方法：

```
listbox1.ItemsSource = null;
listbox1.ItemsSource = data; 
```

但这不是一个好的解决方案，这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T11:17:39.420

ObservableCollection 只会在列表中有活动而不是列表项时通知。列表上的活动意味着添加/删除列表中的项目。您需要对 ListData 类实现 INotifyPropertyChange 接口以通知 ListData 类属性/成员的更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T11:34:50.893

正如 ZafarYousafi 在他的回答中正确指出的那样，`ObservableCollection<T>`只会通知添加和删除项目的列表；如果您更改其中一项的属性，它不会在列表中更新。

相反，您需要像这样更改`ListData`类的定义：

```
public class ListData : INotifyPropertyChanged 
```

这需要你的类来实现`PropertyChanged`事件：

```
public event PropertyChangedEventHandler PropertyChanged; 
```

现在，你需要做的就是改变你的定义`first`（编码约定规定属性应该以大写字母开头`PascalCase`）：

```
private string first;
public string First
{
    get { return first; }
    set
    {
        first = value;
        var handler = PropertyChanged; //according to Essential C# (M. Michaelis) 
        if (handler != null)           //the copy should prevent threading issues
        {                              
            handler(this, new PropertyChangedEventArgs("First"));
        }
    }
} 
```

顺便说一句：我对必须将属性名称作为字符串传递感到不舒服。如需更复杂的解决方案，请参阅[本教程](http://dotnet.dzone.com/news/silverlightwpf-implementing)。

# security - ASP 中的会话标识符漏洞问题

> ID：11281442
> 
> 赞同：0
> 
> 时间：2012-07-01T11:09:28.057
> 
> 标签：security, session, asp-classic

我们有一个用经典 ASP 编写的产品。我们正在通过相同的安全认证。我们无法通过下述标准之一。

> **会话令牌长度和熵如下**
> 
> 问题：会话 ID 的长度是 24 个字符，并且会话标识符本质上不是随机的；它们是可以预测的。
> 
> 建议：会话 ID 应该更长（至少 50 个字符）并且本质上是随机的。

有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:11:30.190

不要将 Session 用于与安全相关的任何事情；使用数据库实现您自己的类似会话的机制。为此，您必须按照以下步骤操作：

1.  在每个页面请求中，检查名为“SESSION_TOKEN”的表单变量的值（当然也可以是您自己的命名），如果不存在，则创建 50 个字符的随机字符串，然后在查询字符串或隐藏表单值上将其从页面传递到页面.
2.  使用 SESSION_TOKEN 作为名为“Session_Data”的数据库表的键，该表将模拟经典的 ASP 会话集合，根据上述令牌保存每个会话的数据，并具有一个存储上次访问时间的字段，以便您可以“过期”数据.

这至少应该给你一个好的开始。当然，另一种方法是切换到 ASP.NET，但您可能已经想到它了。:)

# scripting - 如何修改键盘按钮在窗口中回显到屏幕上的文本？

> ID：11281443
> 
> 赞同：0
> 
> 时间：2012-07-01T11:09:28.747
> 
> 标签：scripting, systems-programming

这背后的想法是使用组合键来回显一个非常常用的字符串。说 shift+backspace 必须回显到屏幕“谢谢”。我不知道从哪里开始，具体要做什么。我有编程经验（C/C++/Java），但我对脚本完全陌生。任何帮助或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:07:42.307

I don't know how to write a Windows service, but [these links](http://bit.ly/OYpdHb) seem pretty accessible; especially for someone with C/C++ system programming experience.

If that's no good: [it's been done](http://www.autohotkey.com/). It's open source, so if you want to implement something similar yourself, their [source repo](https://github.com/AutoHotkey/AutoHotkey) is on GitHub.

# c# - 您在 LINQ 中使用 Where 的方式有何不同？

> ID：11281445
> 
> 赞同：0
> 
> 时间：2012-07-01T11:10:08.793
> 
> 标签：c#, .net, linq

```
int[] integers = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }; 
```

这有什么区别：

```
var odd = from i in integers
          where i % 2 == 1
          select i; 
```

和这个 ：

```
var ODD = integers.Where(i => i % 2 == 1); 
```

如果没有区别，只是面孔不同，那为什么有可能呢？我的意思是有两种方法需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:12:25.473

什么都没有——第一个是第二个的语法糖。

我使用任何使意图明确的东西。有时简洁是好的，有时是流畅的方法的流程，有时是一个查询来表达我在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:12:38.407

没有区别，只是语法不同。看看[LINQ 文档](http://msdn.microsoft.com/en-us/library/bb308959.aspx#linqoverview_topic5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:18:43.673

编译器规范要求在编译之前将 LINQ 查询转换为扩展方法调用。

LINQ 查询通常比扩展方法调用的可读性更高。这里的所有都是它的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T11:19:18.050

确实，您在谈论查询表达式和方法链之间的区别......在性能方面没有任何区别

有关更多信息，请查看此[帖子](https://stackoverflow.com/questions/3776577/net-linq-query-syntax-vs-method-chain)

# php - cakephp 将数据从另一个表中检索到控制器中

> ID：11281460
> 
> 赞同：1
> 
> 时间：2012-07-01T11:12:20.880
> 
> 标签：php, mysql, cakephp, mysql-error-1054

我正在使用 cakephp，我希望在我的 userController.php 中从另一个表（ingredient_aliases）中检索数据。这是componentAlias的模型

```
class IngredientAlias extends AppModel {
    public $name = 'IngredientAlias';
    public $useTable = 'ingredient_aliases';
    public $belongsTo = array(
        'Ingredient' => array(
            'className'    => 'Ingredient',
            'foreignKey'   => 'ingredient_id'
        )
    );
... 
```

我想从我的 userController.php 中检索表成分别名（最后 10 个创建）中的数据

我尝试过这种模式：

```
$this->loadModel('IngredientAlias', 2);
$ingg = $this->IngredientAlias->read();
$options['joins'] = array(
    array('table' => 'ingredient_aliases',
        'alias' => 'ing',
        'type' => 'LEFT',
        'foreignKey' => 'ing.user_id',
        'order' => 'ing.created DESC',
        'limit' => 3,
        'conditions' => array(
            'ing.user_id = User.id'
        )
    )
);
$options['conditions'] = array( );
$this->set('ingredient',$this->IngredientAlias->find('all', $options)); 
```

但这给了我这个错误：错误：SQLSTATE [42S22]：找不到列：1054 Unknown column 'User.id' in 'on clause'

有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T04:54:59.667

您可以使用以下内容在任何控制器或组件上简单地实例化另一个模型（表）。

```
$data = ClassRegistry::init('IngredientAlias')->find('first', array()); 
```

就是这样。您将能够访问任何表上的任何数据。

# asp.net - 如何使用 Membership 类获取用户的角色

> ID：11281464
> 
> 赞同：0
> 
> 时间：2012-07-01T11:12:39.830
> 
> 标签：asp.net

我想使用`Membership`该类创建一个 Login.aspx 页面。我通过使用检查用户名和密码`Membership.ValidateUser(txtUsern.Text, txtPass.Text)` ，现在我想获取该用户的角色。类中是否有`Membership`获取用户角色的方法？

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:18:41.677

[`Roles.GetRolesForUser`方法](http://msdn.microsoft.com/en-us/library/13z1h26k)

```
String[] roles = Roles.GetRolesForUser(); // roles of currently logged-on user 
```

或者

```
roles = Roles.GetRolesForUser(userName); // roles of the user with the specified username 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:28:43.883

您应该使用以下代码

```
string[] roles = Roles.GetRolesForUser("userName"); 
```

上面的角色字符串数组将包含您用户的所有角色。除此之外，如果用户已登录，您可以检查用户是否处于特定角色或未使用

```
if(Roles.IsUserInRole("Admin"))
{
//your code
} 
```

这里“管理员”是角色。

# c++ - c++ 模板返回类型取决于模板参数？

> ID：11281465
> 
> 赞同：2
> 
> 时间：2012-07-01T11:12:52.450
> 
> 标签：c++, templates, generic-programming

我已经实现了自己的 SI Unit 类。使用算术运算时，生成的 SI 单位可能会发生变化。例如：（米/秒）/米=1/秒。

好的，现在我还创建了一个简单的 3D Vector 类。这个向量应该是通用的，也可以用于我的 SI Unit 类。所以我实现了一个简单的除法运算符。请参阅以下代码：

```
// Determine result type of Lhs / Rhs:
template < class Lhs, class Rhs >
    struct TV3TypeV3Div { typedef BOOST_TYPEOF( Lhs( ) / Rhs( ) ) type; };

// Vector / Vector:
template < class Lhs, class Rhs >
RobotTools::DataTypes::TV3Type< typename TV3TypeV3Div< Lhs, Rhs >::type > operator/( const RobotTools::DataTypes::TV3Type< Lhs >& lhs,
                                                                                     const RobotTools::DataTypes::TV3Type< Rhs >& rhs )
{
    // do something useful
    return RobotTools::DataTypes::TV3Type< typename TV3TypeV3Div< Lhs, Rhs >::type >( 0, 0, 0 );
}

// Vector / Vector
RobotTools::DataTypes::TV3Type< Tools::DataTypes::Length > vl;
vl / vl;  // Ok this works 
```

在编译期间，正确的返回类型将通过使用 TV3TypeV3Div 结构来确定。这行得通。

现在我想扩展运营商。我还想计算标量类型的向量。所以我写了这个运算符：

```
// Vector / Scalar
template < class Lhs, class Rhs >
RobotTools::DataTypes::TV3Type< typename TV3TypeV3Div< Lhs, Rhs >::type > operator/( const RobotTools::DataTypes::TV3Type< Lhs >& lhs,
                                                                                     const Rhs& rhs )
{
    // do something useful
    return RobotTools::DataTypes::TV3Type< typename TV3TypeV3Div< Lhs, Tools::DataTypes::Length >::type >( 0, 0, 0 );
}

// Vector / Scalar
RobotTools::DataTypes::TV3Type< Tools::DataTypes::Length > vl;
Tools::DataTypes::Length sl;
vl / sl;  // Ok nice it works too 
```

到现在为止还挺好。问题是当我定义第二个运算符（向量/标量）时，这个运算符非常通用，编译器也希望将它用于向量/向量除法。但它失败了，因为 Lhs( ) / Rhs( ) 有：

Lhs=Tools::DataTypes::Length 和 Rhs=RobotTools::DataTypes::TV3Type

没有定义。这是正确的，我理解给定的错误。我不明白的是编译器不使用 Vector/Vector 运算符。

*   有没有可能给编译器提示使用哪个运算符？
*   有没有可能重写运算符来满足我的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:55:47.027

编译器不想使用向量/标量运算符进行向量/向量除法。它只是想检查是否有匹配。

如果您声明（但未定义）一个完全通用的除法运算符

```
template <typename Lhs, typename Rhs>
struct InvalidDivision {};
template <typename Lhs, typename Rhs>
InvalidDivision<Lhs, Rhs> 
operator/(const Lhs& lhs, const Rhs& rhs); // do not define 
```

那么你的代码应该编译和链接。Vector/Scalar 重载将被考虑并拒绝，因为 Vector/Vector 是更好的匹配。

它的缺点是，如果你对没有定义除法的东西进行除法，编译器会抱怨`InvalidDivision<something,other>`而不是给出通常的错误。

也许这可以通过使用 SFINAE 或其他一些高级魔法来改善。

**更新：更详细的解释**

原始版本的代码发生了什么？

我们正在尝试为用户定义的类型调用除法运算符。有两个函数被命名`operator/`，编译器会同时考虑这两个函数并试图找出哪一个更匹配。

首先考虑 Vector/Vector `operator/`。编译器推断出模板参数`Lhs`和`Rhs`模板参数都是`Length`（为简洁起见，我省略了命名空间）。然后将它们代入 的参数`TV3TypeV3Div`，计算 的内部`TV3TypeV3Div`，确定`TV3TypeV3Div<Lhs,Rhs>::type`is `Length`，最后计算`operator/`is的返回类型`TV3Type<Length>`。

现在考虑 Vector/Scalar `operator/`。编译器推断出`Lhs`is `Length`，但是`Rhs`is `TV3Type<Length>`。然后它将这些类型替换为 的参数`TV3TypeV3Div`，并尝试计算 的内部`TV3TypeV3Div`。这就是事情破裂的地方：没有`operator/`可以接受`Length`和`TV3Type<Length>`. 所以无法计算`TV3TypeV3Div<Lhs,Rhs>::type`。编译器输出错误。

现在考虑声明泛型时会发生什么`operator/`。现在有*一个*可以`operator/`接受`Length`和`TV3Type<Length>`！（或任何其他一对论点，就此而言）。所以编译器会愉快地计算`TV3TypeV3Div<Lhs,Rhs>::type`然后返回 Vector/Scalar 的类型`operator/`。所以现在可以同时考虑 Vector/Vector 和 Vector/Scalar`operator/`重载。

编译器现在还看到并考虑`operator/`重载决议的泛型。所有三个重载都会产生匹配。但是 Vector/Vector 重载获胜，因为它比 Vector/Scalar 或 generic 更专业`operator/`，因此是更好的匹配。

**更新 2**

应该可以这样做：

```
namespace Detail
{
    template <typename Lhs, typename Rhs>
        struct DoNotUse {};
    template <typename Lhs, typename Rhs>
        DoNotUse<Lhs, Rhs> operator/(const Lhs& lhs, const Rhs& rhs);
    template < class Lhs, class Rhs >
        struct TV3TypeV3Div { typedef BOOST_TYPEOF( Lhs( ) / Rhs( ) ) type; };
}
using Detail::TV3TypeV3Div; 
```

这应该很好地向所有人隐藏通用运算符/，但`TV3TypeV3Div`.

# sql - 我应该如何对数据库中的数据准确性/置信度进行建模？

> ID：11281468
> 
> 赞同：6
> 
> 时间：2012-07-01T11:14:00.660
> 
> 标签：sql, database-design, data-modeling

假设我有一个保存时间戳的数据库。对于每个时间戳属性，我可能会添加一个准确度属性，说明置信区间，因此存储的信息可能是，例如，“2012 年 7 月 1 日 12:13，+/- 3 个月”。

但总的来说，记录准确性/置信度并不是那么简单。*家谱数据库可能需要记录一个人可能*是另一个人的父亲这一事实。

那么，在存储具有不同准确性/可信度的信息方面是否有任何一般原则或最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T11:48:24.313

以你父亲的例子很容易；不可能超过 100% 确信某人是别人的父亲；一般来说，对任何事情都没有超过 100% 的信心！这反过来意味着您可以简单地存储任何数据属性的百分比置信水平。

但是，您可能不想将置信水平存储为百分比；它取决于数据属性本身以及数据的*含义*。

例如，如果您想存储一个特定字符串与另一个字符串相比有多“准确”，您可能希望存储[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)。在您的时间戳示例中，我个人会存储最小值和最大值，但您也可以存储要添加或减去的月数；要么可以快速计算从数据库中的选择。

我可能不清楚，试图写的是，您的问题的答案不取决于数据库，而是取决于其中的*数据*以及您的用户、业务等的需求。因为它取决于每个单独属性或列需要*单独*的解决方案；不可能有一个“通用”的解决方案。

# c++ - 在 gcc 中禁用“if(0)”消除

> ID：11281471
> 
> 赞同：19
> 
> 时间：2012-07-01T11:14:34.053
> 
> 标签：c++, optimization, gcc, gdb

如何防止 GCC 消除**if(0)**块中的代码？

当我使用 Visual Studio 时，我的调试技术之一是将这样的代码放入我的程序中：

```
if (0)
    do_some_debug_printing_and_checking(); 
```

然后，当遇到断点时，我单击**do_some_debug_printing_and_checking()**行，选择“设置下一条语句”并强制执行。

当我使用 gcc/gdb 作为后端时，“set next statement”不再起作用，因为 GCC 只是从**if(0)**语句中删除了代码。

我当然使用**-O0**标志来禁用优化。我还尝试了**-fno-dce -fno-tree-dce**标志来明确禁用死代码消除，但它没有效果：二进制文件中不存在**if(0)**的内容，我不能使用**set next声明**跳进去。

有什么好方法可以告诉 gcc 禁用**if(0)**内容的消除？

编辑：

感谢“附加变量”的解决方法，但是有两点我不喜欢它：

1.  它仍然是一行额外的代码
2.  当我构建发布版本并且确实希望那些调试内容消失时，它不会自动优化。当然我可以使用#ifdef-s，但那是更多的额外行。

真的，绝对没有选择让 GCC 保留死代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-01T11:19:31.500

最简单的做法是使检查依赖于（例如）具有外部链接的变量。

例如

```
extern bool debug;
if (debug)
    do_some_debug_printing_and_checking(); 
```

命名空间范围内的某处：

```
bool debug = false; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-01T19:38:31.627

我不会依赖 gcc 编译器标志来做到这一点。编译器标志可以在 gcc 版本之间更改，并且在编译器之间进行更改。您可能会发现自己需要在六个月内使用 Visual C++ 调试相同的代码...

@CharlesBailey 对如何使用`extern`变量提出了一个很好的建议。这是一种不需要将变量公开给整个模块或保存在静态存储中的替代方法。

`volatile`在语句范围内声明一个临时变量`if`：

```
if (volatile bool dbg = false)
{
  do_some_debug_printing_and_checking();
} 
```

这使临时变量的范围非常狭窄。`volatile`限定符不会让编译器对变量进行任何假设，也不会优化分支。

要记住的一件事是变量总是在堆栈上分配，并且将一直保留在堆栈上，直到函数退出。这种方法和`extern`方法都应该有效，但权衡取舍略有不同（并且可能可以忽略不计）。

如果您愿意使用宏来帮助解决此问题，那么您可以在将代码发布到生产环境时轻松禁用临时变量：

```
#ifndef IS_DEBUGGING
#  define IS_DEBUGGING 0
#endif

#if IS_DEBUGGING
#  define TMP_DBG_FLAG volatile bool dbg_flag = false
#else
#  define TMP_DBG_FLAG false
#endif 
```

然后将您的`if`声明声明为：

```
if ( TMP_DBG_FLAG )
{
  do_some_debug_printing_and_checking();
} 
```

当您将 IS_DEBUGGING 定义为 1 时，将创建、声明为 volatile 并保留局部变量。当您将 IS_DEBUGGING 定义为 0 时，宏扩展为常量`false`，编译器优化分支。也可以为该`extern`方法做一些非常相似的事情。

这几行额外的代码，但它们与您使用 TMP_DBG_FLAG 的次数无关。该代码也比使用大量`ifdef`s 更具可读性。可以使宏更安全一些（通过将值附加`__LINE__`到它），但这需要三个宏，并且可能不是必需的：

```
#if IS_DEBUGGING
// paste symbols 'x' and 'y' together
#  define TMP_DBG_FLAG_SYMCAT0(x,y) x ## y

// need one level of indirection to expand __LINE__...
#  define TMP_DBG_FLAG_SYMCAT(x,y) TMP_DBG_FLAG_SYMCAT0(x,y)

#  define TMP_DBG_FLAG volatile bool TMP_DBG_FLAG_SYMCAT(dbg_flag_,__LINE__) = false
#else
#  define TMP_DBG_FLAG false
#endif 
```

# database - 如何将access数据库转换为sql server compact类型？

> ID：11281474
> 
> 赞同：3
> 
> 时间：2012-07-01T11:14:52.457
> 
> 标签：database, vb.net, sql-server-ce, ms-access-2007

我设计了一个带有 vb.net 和 Access 数据库的应用程序。我想让我的数据库更安全。如果不需要在每个系统上安装数据库引擎，那就更好了。于是搜了一下，发现SQL CE(Compact Edition)是个不错的选择。现在我有两个问题：

1.  我正在搜索如何将我的 Access 数据库转换为 sdf 文件格式（SQL Server Compact Edition 的格式），但没有得到结果。我找到了将 Access 数据库转换为 SQL 数据库类型而不是 SQL Compact 类型的方法。有人有什么想法吗？
2.  在 Server Explorer->Data Connection 中，我选择 DataSource= Microsoft SQL Server Compact。

我应该如何将表从 Access 导入到这里？我期待着任何形式的帮助。提前致谢。

# javascript - Jquery 按 cookie 排序 1st

> ID：11281475
> 
> 赞同：1
> 
> 时间：2012-07-01T11:14:57.583
> 
> 标签：javascript, jquery, cookies

嗨，我正在制作一个网页，人们在该网页中单击一个按钮并通过 Javascript 保存 cookie，现在它所做的是获取所有 cookie，然后使用单击的那个对其进行排序

任何人都可以有这样的例子或帮助我分类我尝试了一切但它不起作用

就像人们点击一个按钮 - >保存cookie - >然后当用户刷新或再次访问检查cookie并将其显示给用户按钮排序

只是一个代码，示例或想法如何制作这个？

问候， TicTech

```
 var myc=new Array('<td><img class="dmd" src="gray_star.png" id="1" ><a href="#"  class="mlm">Name</a></td>','<td><img class="dmd" id="2" src="gray_star.png"><a href="#" class="mlm">Name</a></td>');

        function createCookiecreateCookie(name,value,days) {
    if (days) {

        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}
function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

        $(document).ready(function(){

function getCookies() {

    var cookies = { };

    if (document.cookie && document.cookie != '') {
        var split = document.cookie.split(';');
        for (var i = 0; i < split.length; i++) {
            var name_value = split[i].split("=");
            name_value[0] = name_value[0].replace(/^ /, '');
            cookies[decodeURIComponent(name_value[0])] = decodeURIComponent(name_value[1]);
        }
    }

    return cookies;

}
var myCookies = getCookies();
var em=0;

  var $user_table = $("#tb");
  var $row1 = $("<tr></tr>");
    var $row2 = $("<tr></tr>");
    var $row3 = $("<tr></tr>");
    var $row4 = $("<tr></tr>");

   var $row5 = $("<tr></tr>");

   var $row6 = $("<tr></tr>");
   var $row7 = $("<tr></tr>");
  var ar=new Array();
for(m=1;m<=21;m++){

em=readCookie("vale"+m);
if(em==0){

/*
for(i=1;i<=1;i++){
var e=i;
var m="$row";

var $esm=(eval(m+e)).children();
alert($esm.size());

$esm.each(function(){

//alert($(".dmd").attr('src'));});
*/
$row1.prepend(myc[m-1]);
var $esm=$row1.children();
alert($esm.size());}

else
if(m==1||m==2||m==3){ 

$row1.append(myc[m-1]);

$user_table.append($row1);

var $esm=$row1.children();
$esm.each(function(){

$(".dmd").attr('src');});
}else if(m==4||m==5||m==6){

var $esm=$row1.children();
$esm.each(function(){

$(".dmd").attr('src');});
//alert(m);
$row2.append(myc[m-1]);
$user_table.append($row2);

}else if(m==7||m==8||m==9){
$row3.append(myc[m-1]);
$user_table.append($row3);
}else if(m==10||m==11||m==12){
$row4.append(myc[m-1]);
$user_table.append($row4);
}else if(m==13||m==14||m==15){
$row5.append(myc[m-1]);
$user_table.append($row5);
}else if(m==16||m==17||m==18){
$row6.append(myc[m-1]);
$user_table.append($row6);
}else if(m==19||m==20||m==21){
$row7.append(myc[m-1]);
$user_table.append($row7);
}}

///$e=$row1.children();
//alert($e.size());

            //loop through the menu item
            $('.dmd').each(function () {

      var id=$(this).attr('id');
              if(readCookie('vale'+id)==0){

      $(this).attr("src","chamkilla.png");
              }else{

      $(this).attr("src","gray_star.png");
              }
            });

          $("img.dmd").hover(
      function(){

      var id=$(this).attr('id');
      $(this).attr("src","chamkilla.png");

      $(this).click(function () {
      if(readCookie('vale'+id)==0){

     $(this).attr("src","gray_star.png");

     createCookiecreateCookie('vale'+id,'1','1');
      }else{
     createCookiecreateCookie('vale'+id,'0','7');

      $(this).attr("src","chamkilla.png");
      }});
      },
      function(){
      $(this).attr("src","gray_star.png");
     }

    );
        });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:41:39.597

我不完全确定您的意思，没有任何代码或您想要排序的确切内容。您说“将其显示给已排序的用户按钮”，这表明您要对按钮本身进行排序 - 如果是这种情况，那么它已经是，按升序和降序排列......

关于排序技术，您可能想要实现[冒泡排序](http://en.wikipedia.org/wiki/Sorting_algorithm#Bubble_sort)。

请发布一些代码，我会看看我是否可以进一步帮助你。一个简化的[jsfiddle](http://jsfiddle.net/)会很好。

# c++ - Qt Creator - 设置架构标志

> ID：11281476
> 
> 赞同：2
> 
> 时间：2012-07-01T11:14:58.023
> 
> 标签：c++, qt, kinect, point-cloud-library

我正在尝试学习如何使用 Qt Creator 在 C++ 中将 libfreenect 与 PCL 库一起使用。我是使用 c++ 的 n00b，所以最终我在编译示例时遇到了错误：

```
ld: warning: in /usr/local/lib/libfreenect.dylib, file was built for i386 which is not the architecture being linked (x86_64)
make: Leaving directory `/Users/george/Documents/Qt/OKPCL'
Undefined symbols:
  "_freenect_init", referenced from:
      Freenect::Freenect::Freenect()in OKPCL.o
  "_freenect_select_subdevices", referenced from:
      Freenect::Freenect::Freenect()in OKPCL.o
  "_freenect_process_events", referenced from:
      Freenect::Freenect::operator()()in OKPCL.o
  "_freenect_shutdown", referenced from:
      Freenect::Freenect::~Freenect()in OKPCL.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [OKPCL] Error 1
The process "/usr/bin/make" exited with code 2.
Error while building project OKPCL (target: Desktop)
When executing build step 'Make' 
```

libfreenect 是为我的机器上的 i386 架构构建的（运行 osx 10.6.8）。我注意到 Qt Creator 运行的默认 Make 是这样做的：

```
make: Entering directory `/Users/george/Documents/Qt/OKPCL'
g++ -headerpad_max_install_names -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -o OKPCL main.o OKPCL.o   -F/Users/george/QtSDK/Desktop/Qt/474/gcc/lib -L/Users/george/QtSDK/Desktop/Qt/474/gcc/lib /usr/local/lib/libfreenect.dylib /usr/local/lib/libpcl_io.dylib /usr/local/lib/libpcl_common.dylib -framework QtCore 
```

我可以在 .pro 文件中设置一个 Qt 标志，以便将架构设置为 i386 而不是 x86_64 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:22:05.647

```
FOO = -arch i386
LIBS = -arch i386
LIBS += $$FOO 
```

或者

```
CONFIG += i386 
```

编辑

要为特定架构设置 Qt，您必须运行命令提示符，输入 Qt 目录并运行：

```
configure -embedded i386 -no-webkit 
```

确认后，您将不得不等待一段时间，然后按照说明进行操作。[在这里](http://doc.qt.nokia.com/4.7-snapshot/configure-options.html)，您还有其他用于配置的标志。它将配置您的 Qt，然后您将重新编译二进制文件。配置后将指导您如何操作。

# html - CSS问题，表格没有填满屏幕

> ID：11281477
> 
> 赞同：0
> 
> 时间：2012-07-01T11:15:00.867
> 
> 标签：html, css, html-table

我一直对要填充浏览器窗口的表格有问题。它有 3 列宽，5 行高。我想要的结果是每个单元格是屏幕宽度的 33%，每个单元格是屏幕高度的 20%。没有固定值，而是我想用百分比来做所有事情，以便它调整大小/拉伸以始终填充浏览器。

问题是，当我调整浏览器的大小时，尽管宽度工作得很好，但高度却不一样。即使我已将每个 TR 行指定为 20% 高，但它并没有以这种方式工作。发生的情况是屏幕的下半部分仍然是空的，并且 5 行没有遵循我指定的 20% 高度。在一个奇怪的例子中（在尝试的时候），第一行是高度的 50%，另外 50% 是底部的 4 行。目前（如下所示），这 5 行占据了大约 60% 的屏幕高度，剩余的 40% 未使用。我有没有提到我讨厌 CSS？

这是表格：

```
<div id="portrait" style="width:100%;height:100%;">
    <table cellpadding=0 cellspacing=0 border=1 style="width:100%;height:100%;">
        <tr style="width:100%;height:20%;">
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
    </table>
</div> 
```

在每个级别中，我都定义了宽度和高度，然后在内部定义了一个相对百分比，同时牢记父容器。在最内层，即图像标签所在的位置，它被设置为 100%x100%，以便填充它的容器（宽度为 TD 中定义的 33%，高度为 TR 中定义的 20%）。

就第一张图片而言，这是我阅读上面的 html 的方式。div 设置为使用浏览器宽度的 100% 和高度的 100%。它只包含一个项目，一个表。该表被定义为 100%x100%，但这当然受到它的父容器 - div 的限制，但由于它也是 100%x100%，所以表应该是完整的浏览器大小（恕我直言）。TR 定义宽度为 100%，因此它填充了浏览器的宽度。它设置为 20% 的高度，所以我相信这意味着它应该固定在桌子高度的 20%，即屏幕 100% 的 20%。TD 定义为 33% 宽度（3 列 33% 填充浏览器）和高度 100%（此列将填充其父 TR 的 100%，设置为浏览器高度的 20%）。最后，图像设置为填充它的 TR/TD，因此设置为 100%x100%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:26:37.960

您需要将以下内容添加到您的样式中。

```
html, body { height: 100% } 
```

​并改变你的

```
<td style="width:33%;height:100%;"><img style="width:100%;height:100%;" src="x.jpg"></td> 
```

到

```
<td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td> 
```

你可以在这里看到它，[http://jsfiddle.net/RFdSw/](http://jsfiddle.net/RFdSw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:27:52.813

这是小提琴：http: [//jsfiddle.net/surendraVsingh/R3aCb/](http://jsfiddle.net/surendraVsingh/R3aCb/)

这是工作代码：

**HTML：**

```
<div id="portrait" style="width:100%;height:100%;">
    <table cellpadding=0 cellspacing=0 border=1 height="100%" style="width:100%; height:100%;">
        <tr style="width:100%;height:20%;">
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
        <tr style="width:100%;height:20%;">
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
            <td style="width:33%;"><img style="width:100%;height:100%;" src="x.jpg"></td>
        </tr>
    </table>
</div>​ 
```

**CSS**

```
html, body{height:100%;}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T11:57:31.393

```
<!DOCTYPE html>

<html>
    <head>
        <style type="text/css">
            html, body{height:100%;width:100%;margin:0;padding:0}
            #mytable
            {
                height:100%;
                width:100%;
                table-layout:fixed;
            }           
            #mytable td
            {
                width;33%;
                height:19%;
            }
            #mytable td img
            {
                width:100%;
                height:100%;
            }
        </style>
    </head>
    <body>
        <div id="portrait" style="width:100%;height:100%;">
    <table cellpadding="0" cellspacing="0" border="1" id="mytable">
        <tr>
            <td><img src="bg-bottom.gif"></td>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
        </tr>
        <tr>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
        </tr>
        <tr>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
        </tr>
        <tr>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
        </tr>
        <tr>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
            <td><img src="x.jpg"></td>
        </tr>
    </table>
</div>

    </body>
</html> 
```

这应该适合你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-12T02:14:20.017

试试这个

```
#portrait {
    height: 0;
}
table {
    height: 100%;
}
tr {
    height: 20%;
} 
```

# c++ - 我如何获得 std::weak_ptr 从这个指针？

> ID：11281478
> 
> 赞同：2
> 
> 时间：2012-07-01T11:15:04.653
> 
> 标签：c++, c++11, this, shared-ptr, weak-ptr

这是示例：

```
tempalate <class T> class MyClass : public T {
    public: 
    MyClass(std::weak_ptr<MyClass> parent) {
         //--------------------------------------+
         //                                      |
         //                                      V
         auto child = std::make_shared<MyClass>(this);
    }
}; 
```

怎么做？如果我需要从 派生`MyClass`，`std::enable_shared_from_this<MyClass<T>>`我如何在没有多重继承的情况下做到这一点，因为`MyClass`已经从另一个`T`祖先派生，我需要调用`shared_from_this()`构造函数？

在我的情况下`T`，可能是某个类继承自`enable_shared_from_this<T>`，但并非总是如此

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:05:36.013

`std::enable_shared_from_this`不继承自 T，所以这里没有问题。

您不需要调用`shared_from_this`CTor，当您拥有`this`并需要相应的`shared_ptr`.

# android - SAXParser 有时会给我一个坏值

> ID：11281491
> 
> 赞同：1
> 
> 时间：2012-07-01T11:16:36.983
> 
> 标签：android, xml, saxparser

这很奇怪。。

我有一个 DefaultHandler 实际上可以很好地处理所有事情，但有时，没有明显的原因，它会给我 0 而不是正确的值。每次都在同一个地方发生这种情况，所以出了点问题，但我不知道是什么！

问题是这样的。我正在解析像“17:00:00”这样的时间。当解析器到达“奇怪的时间”时，它会像这样解析它->“17:00:0”，再调用一次方法characters(char[] ch, int start, int end)，然后解析最后一个“0”。

怎么回事？

实际上，它将结束设置为 7 而不是 8。这适用于除少数值之外的所有内容！

代码非常简单，它只是一个简单的 saxparser。这是字符方法：

```
 public void characters(char[] ch, int start, int end) {
    if(on_element)
        value = new String(ch, start, end);
    } 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:25:49.380

`characters`对于一对打开和关闭标记中的文本，可以多次调用该方法。

您的代码假定它只被调用一次，这通常适用于小数据，但并非总是如此。

您需要在`startElement`方法中为该标记初始化一个缓冲区，在方法中收集到缓冲区中`characters`，并将缓冲区转换为`endElement`.

我[对用户犯同样错误的这个问题的](https://stackoverflow.com/questions/5855421/android-sax-parsing-returns-null-values-and-retrieve-values-in-tags-of-same-nam/5855796#5855796)回答包含一些代码，以更正用户发布的更完整的代码。阅读这可能对您的代码有所帮助。

# java - Play 2.0 javaToDo 教程无法编译

> ID：11281493
> 
> 赞同：2
> 
> 时间：2012-07-01T11:16:58.353
> 
> 标签：java, playframework-2.0

我正在尝试遵循[Play2.0 JavaToDO](http://www.playframework.org/documentation/2.0.2/JavaTodoList "玩2.0 javaToDo教程")教程，但由于某种原因它只是不想工作。浏览了 stackoverflow 和其他在线资源，但没有找到答案，这让我发疯。

Application.java的附加代码

```
package controllers;

import models.Task;
import play.data.Form;
import play.mvc.Controller;
import play.mvc.Result;

public class Application extends Controller {

static Form<Task> taskForm = form(Task.class);

  public static Result index() {
    return redirect(routes.Application.tasks());
  }

  public static Result tasks() {
      return ok(
        views.html.index.render(Task.all(), taskForm));
  }

  public static Result newTask() {
      return TODO;
  }

  public static Result deleteTask(Long id) {
        return TODO;
      }

} 
```

附上Task java的代码

```
package models;

import java.util.List;
import javax.persistence.Entity;

import play.data.Form;
import play.data.validation.Constraints.Required;
import play.db.ebean.Model.Finder;
import play.mvc.Result;
import controllers.routes;

@Entity 
public class Task {

  public Long id;
  @Required
  public String label;

  // search
  public static Finder<Long,Task> find = new Finder(
            Long.class, Task.class);

  // display tasks
  public static List<Task> all() {
      return find.all();
  }

  // create task
  public static void create(Task task) {
      task.create(task);
  }

  // delete task 
  public static void delete(Long id) {
      find.ref(id).delete(id);
      // find.ref(id).delete();
  }

  // create new task
  public static Result newTask() {
      Form<Task> filledForm = taskForm.bindFromRequest();

      if(filledForm.hasErrors()) {
        return badRequest(
          views.html.index.render(Task.all(), filledForm)
        );
      } else {
        Task.create(filledForm.get());
        return redirect(routes.Application.tasks());  
      }
    }
} 
```

我在 Task.java 上得到一个编译错误 `static Form<Task> taskForm = form(Task.class);`

当我在 eclipse 上工作时（该项目在导入之前被 eclipsified），它告诉我 taskForm 无法解析，它还强调了每个 play 2 命令，例如“render()、redirect()、bindFromRequest()”要求我创建一种方法。任何想法如何解决编译错误以及如何让 Eclipse 识别 play2 命令？

**编辑：**

更新了 Application.java

```
package controllers;

import models.Task;
import play.data.Form;
import play.mvc.Controller;
import play.mvc.Result;

public class Application extends Controller {

    // create new task
    public static Result newTask() {
      Form<Task> filledForm = form(Task.class).bindFromRequest();

        if(filledForm.hasErrors()) {
          return badRequest(
            views.html.index.render(Task.all(), filledForm)
          );
        } else {
          Task.newTask(filledForm.get());
          return redirect(routes.Application.tasks());  
        }
    }

    public static Result index() {
        return redirect(routes.Application.tasks());
    }

    public static Result tasks() {
        return ok(
        views.html.index.render(Task.all(), taskForm));
    }

    public static Result deleteTask(Long id) {
        return TODO;
    }

} 
```

更新了 task.java

```
package models;

import java.util.List;
import javax.persistence.Entity;
import play.data.Form;
import play.data.validation.Constraints.Required;
import play.db.ebean.Model;
import play.db.ebean.Model.Finder;
import play.mvc.Result;
import controllers.routes;

@Entity 
public class Task extends Model {

  public Long id;
  @Required
  public String label;

  // Define a taskForm
  static Form<Task> taskForm = form(Task.class);

  // search
  public static Finder<Long,Task> find = new Finder(
            Long.class, Task.class);

  // display tasks
  public static List<Task> all() {
      return find.all();
  }

  // create new task
  public static Result newTask(Task newTask) {
     save(task);
 }

  // delete task 
  public static void delete(Long id) {
      find.ref(id).delete(id);
      // find.ref(id).delete();
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:31:29.743

尝试将这些导入语句放在 Application.java [原始/未更新]上：

```
import play.data.*;
import static play.data.Form.*; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T13:10:26.380

我也收到了这个错误并通过了整个网络，但错误仍然存​​在。我得到的快速修复解决方案之一是：使用

```
static Form taskForm =Form.form(Task.class);      instead of 

 static Form taskForm=form(Task.class); 
```

在您的 application.java 文件中

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T11:32:48.477

我对变量 static Form taskForm 的范围有疑问；它在默认范围内。当我将其更改为公共静态时，该错误发生了。

我尝试了费用管理系统而不是任务列表。从概念上讲，它非常相似——列出费用、添加费用等。我使用 SQLite3 数据库而不是默认的 H2。

在 application.conf 文件中这些是我必须做的其他一些更改 -

```
# Ebean configuration
# ~~~~~
# You can declare as many Ebean servers as you want.
# By convention, the default server is named `default`
#
ebean.default="models.*"       <<<<<<<<---- uncommented this.

# Evolutions
# ~~~~~
# You can disable evolutions if needed
evolutionplugin=disabled        <<<<<<<<---- uncommented this. 
```

进化插件试图通过运行基于我创建的模型的自动查询来创建一个表。费用类。禁用此插件后，我能够继续。

另一件需要注意的事情是 - 我必须以与定义 Expense 类完全相同的方式创建表。Expense 类中声明的变量的顺序和数据类型与数据库表相同。

```
db.default.url="jdbc:sqlite:<absolute path including DB name>" 
```

我想首先检查它是否可以列出表格中的费用。因此，我从 Application.newExpense() 函数中注释掉了这些行。

```
public static Result newExpense() {
        Form<Expense> filledForm = Application.expenseForm.bindFromRequest();

        if(filledForm.hasErrors()) {
            //return badRequest(views.html.index.render(Expense.all(),Application.expenseForm));
            return null;
        }
        else {
            Expense.create(filledForm.get());
            //return redirect(controllers.routes.Application.expenses());
            return null;
        }

    } 
```

这就是我的 index.scala.html 的样子——

```
@(expenses: List[Expense] , expenseForm: Form[Expense])

@import helper._

@main("Expense Management System") {

    <h1>@expenses.size() expense(s)</h1>
    <ul>
        @for(expense <- expenses) {
            <li>
                @expense.id 
                @expense.category 
                @expense.description 
                @expense.amount
            </li> 
        }
    </ul>
    <h2>Add a new expense</h2>
    @form(routes.Application.newExpense()) {
        @inputText(expenseForm("label"))

        <input type="submit" value="Add">

    }

} 
```

我没有在 Build.scala 文件的 appDependencies 部分中添加 sqlite3 依赖项，因为我[在这里](https://stackoverflow.com/questions/14840392/unresolved-dependency-for-postgresql-9-2-jar-in-play-framework?rq=1)读到如果我在 lib/ 目录中添加它的 jar 文件，我不必添加 DB 依赖项。

```
 val appDependencies = Seq(
        jdbc,
        // Add your project dependencies here,
        //"sqlite3" % "org.sqlite.JDBC" % "3.6.20",
        javaCore,
        javaEbean
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T13:04:29.417

我认为您实际上犯了一些错误：

1.  `taskForm`无法在您的 Task 类中解决，因为它是在您的控制器中声明的
2.  当您运行应用程序时，您的视图将由 sbt（即播放控制台）编译。所以`render`编译后该方法将可用（您必须在Eclipse上进行刷新）
3.  同样的问题`redirect`
4.  `bindFromRequest()`不可用，因为`taskForm`无法解决（参见 1。）

**编辑：**

刚刚看到Task类中有一个newTask()方法，这个方法应该是这样的：

在 Task 类（[应该扩展](http://www.playframework.org/documentation/2.0.2/JavaEbean) `play.db.ebean.Model`）中：

```
 // create new task
 public static void newTask(Task newTask) {
    save(newTask);
} 
```

在你的控制器中：

```
 // create new task
  public static Result newTask() {
    Form<Task> filledForm = taskForm.bindFromRequest();

    if(filledForm.hasErrors()) {
      return badRequest(
        views.html.index.render(Task.all(), filledForm)
      );
    } else {
      Task.newTask(filledForm.get());
      return redirect(routes.Application.tasks());  
    }
} 
```

**编辑2：**

```
// create new task
      public static Result newTask() {
        Form<Task> filledForm = form(Task.class).bindFromRequest();

        ...
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:41:03.303

我正在通过本教程工作......

[https://github.com/jamesward/play2torial/blob/master/JAVA.md](https://github.com/jamesward/play2torial/blob/master/JAVA.md)

...并且在使用 2.0.1 版或 Play 时遇到了与上面列出的类似的错误。我正在使用版本 2.0.4 的相同教程，但我没有看到错误。因此，请尝试最新版本的 Play。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T11:23:59.323

你必须为 Eclipse 安装 Scala 插件来解决这个 [http://scala-ide.org/download/current.html](http://scala-ide.org/download/current.html)有时需要刷新 eclipse 项目。

干杯!

# php - 使用java脚本或php提交后保留输入框的最后一个值？

> ID：11281495
> 
> 赞同：0
> 
> 时间：2012-07-01T11:17:14.490
> 
> 标签：php, javascript, jquery

我想在提交后保留输入框的最后一个值，这是我的代码。
但我的代码不起作用

```
<input type="text" name="name" value="<?php echo $_GET['name'];?>" /> 
```

我应该使用 javascript 还是 php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:46:22.577

我认为您的问题“*我应该使用 javascript 还是 php？* ”并不意味着：

> 使用 javascript 是用以前提交的值填充表单字段的最佳实践吗？

我的回答应该是：不，浏览器可能没有 javascript。

但我认为你的问题是：为什么我的提交后的值没有出现在全局宏 $_GET 中？

当然你可以使用**$_POST['name'];** 实体来显示价值，但这是一个非常糟糕的选择：

*   可能将来您可以将表单方法从 POST 更改为 GET
*   将来您可能希望使用从数据库中获取的数据填写表格
*   可能是您应该在呈现表单之前验证您的输入

所以你可以做这样的事情：

*   PHP里面

    $valid = 验证（$_POST）；

*   在 HTML 里面

    <input type="text" name="name" value="<?php echo $valid['name'];?>" />

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:23:47.783

保持这些事情正确：

1）在表单标签中你应该有 method="POST"

2)`<input type="text" name="name" value="<?php echo $_POST['name'];?>" />`

# linux - Qt，Linux，检查给定用户是否具有 sudo 权限

> ID：11281503
> 
> 赞同：3
> 
> 时间：2012-07-01T11:18:47.067
> 
> 标签：linux, qt, qt4, sudo, sudoers

我正在运行 Fedora 17 KDE x64 和 Qt 4.8.1。

与 Ubuntu 相比，Fedora 不授予第一个创建的用户 sudo 权限，也不会将第一个创建的用户添加到`/etc/sudoers`文件中。因此，在 Fedora 17 KDE 上安装程序（尚未测试 Gnome 等）时，它需要`root`（不是`sudo`）权限。所以，我们有三个级别的权限（按照权限级别降序排列）：

1) 根 2) 须藤 3) 用户

在 Fedora 17 KDE 中，如果您有权访问`root`用户帐户，您可以通过编辑文件并添加以下行来授予`sudo`您想要的任何其他用户权限：`/etc/sudoers`

```
user ALL = (ALL) ALL 
```

… 下线：

```
root ALL = (ALL) ALL 
```

替换`user`为您希望授予 sudo 访问权限的帐户的名称。

但并非每个用户都可以访问`root`用户的帐户。这就是`root`用户可以将超级用户 ( `sudo`) 权限授予某些用户帐户的原因。

我想要检查运行应用程序的当前用户是否注册为超级用户。如果是这样，我将使该`/usr/bin/kdesu`工具使用`/usr/bin/sudo`要求输入`sudo`密码的工具。

如果用户不是超级用户，我会`/usr/bin/kdesu`保持默认行为 - 它使用`/usr/bin/su`需要`root`密码的工具。

目前，我正在使用`getenv('USER')`（Windows 上的“USERNAME”，但我只需要 Linux 上的此功能）来获取当前用户。可以通过遍历`QProcess::systemEnvironment()`列出 HOSTNAME 和 USER 变量的位置来获取当前用户的名称。

解析`/etc/sudoers`文件不是一个选项，因为打开文件需要`sudo`或`root`特权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:01:32.903

```
 man sudo
   [...]
   -l[l] [command]
               If no command is specified, the -l (list)
               option will list the allowed (and forbidden)
               commands for the invoking user (or the user
               specified by the -U option) on the current
               host.  If a command is specified and is
               permitted by sudoers, the fully-qualified
               path to the command is displayed along with
               any command line arguments.  If command is
               specified but not allowed, sudo will exit
               with a status value of 1\.  If the -l option
               is specified with an l argument (i.e. -ll),
               or if -l is specified multiple times, a
               longer list format is used. 
```

**更新**您需要一个（伪）终端才能运行`sudo`. 这是一种方法：

```
#include <pty.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <stdio.h>

int main (int argc, char* argv[])
{

    int status, master;
    pid_t respid, pid = forkpty (&master, 0, 0, 0);
    if (pid == 0) {
        /* we are child */
        argv[0] = "/usr/bin/sudo"; /* I know it's a sin... just for a demo */
        execve("/usr/bin/sudo", argv, 0);
    }
    else if (pid > 0) {
        /* we are parent */
        respid = waitpid(pid, &status, 0);
        fprintf (stderr, "sudo exited with status %d\n", 
                   WEXITSTATUS(status));
        }
    }
    else {
        fprintf (stderr, "could not forkpty\n");
    }
} 
```

运行这个：`runsudo -l`例如`runsudo -l /foo/bar/baz`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-21T10:25:19.937

请在单行脚本下运行。
它将列出所有具有 sudo 权限的用户，而不是：

```
for i in $(awk -F ':' '{print $1}' /etc/passwd ); do sudo -l -U $i ; done 
```

# c# - 超过 2 个表在 LINQ 中加入，范围问题

> ID：11281504
> 
> 赞同：0
> 
> 时间：2012-07-01T11:18:50.187
> 
> 标签：c#, linq, join

我正在尝试在 LINQ 中加入 3 个表。

```
var fromCities = from c in cityRepository.Cities
                             join r in routeRepository.Routes on c.Id equals r.FromCityId
                             join cr in rentDetailRepository.CarRentDetails on cr.CityId equals c.Id
                             select c; 
```

我得到 cr 和 c 在第二个 join 语句中不存在？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:43:12.087

更改最后一个连接中的顺序：

```
...
join cr in rentDetailRepository.CarRentDetails on c.Id equals cr.CityId 
```

[join 子句（C# 参考）](http://msdn.microsoft.com/en-us/library/bb311040.aspx)

> 连接子句执行等值连接。换句话说，您只能基于两个键的相等性进行匹配。不支持其他类型的比较，例如“大于”或“不等于”。为了明确所有连接都是等连接，连接子句使用 equals 关键字而不是 == 运算符。equals 关键字只能在连接子句中使用，它与 == 运算符在一个重要方面不同。使用equals时，左键消耗外部源序列，而右键消耗内部源。**外部源仅在 equals 左侧的范围内，内部源序列仅在右侧的范围内。**

# php - 使用引荐来源网址请求网址

> ID：11281505
> 
> 赞同：-2
> 
> 时间：2012-07-01T11:18:51.637
> 
> 标签：php

如何将请求发送到 URL： [http](http://www.flashi.tv/embed.php?v=HitSportsNet41125) ://www.flash.tv/embed.php?v=HitSportsNet41125 在端口 80 上，并使用引用者[http://sportsembed.com/stream-1.php](http://sportsembed.com/stream-1.php) 来抓取源代码？

我可以在 PHP 中使用 cURL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:32:20.647

cURL 是 PHP 中的一个可选模块，您可能不会发现它随处安装。

这是 PHP 核心的一部分：

```
$contextOptions=stream_context_create(array(
    "http"=>array(
        "method"=>"GET",
        "header"=>
            "Accept-language: en\r\n".
            "Cookie: foo=bar\r\n".
            "Referer: http://sportsembed.com/stream-1.php\r\n",
        "user_agent"=>"CrawlingBot v1.0"
    )
));
file_get_contents("http://www.flashi.tv/embed.php?v=HitSportsNet41125", /*include path*/ false, $contextOptions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:21:23.890

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http:// www.flashi.tv/embed.php?v=HitSportsNet41125');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, 'http:// sportsembed.com/stream-1.php');
$html = curl_exec($ch); 
```

我知道推荐人拼写错误，这只是我们所有人都必须生活的东西：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:21:53.117

是的，curl 可以做到这一点。

谷歌搜索`php curl set referrer`给出了一些很好的提示：

*   [关于 curl 的 PHP 手册（搜索“referer”）](http://php.net/manual/en/function.curl-setopt.php)
*   使用显示此示例代码[的 PHP curl 设置 PHP 引用：](http://www.electrictoolbox.com/php-curl-http-referer/)

> ```
> $ch = curl_init();
> curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/2');
> curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
> curl_setopt($ch, CURLOPT_REFERER, 'http://www.example.com/1');
> $html = curl_exec($ch); 
> ```

# jsf-2 - JSF2.0 将参数传递给另一个 Bean

> ID：11281511
> 
> 赞同：0
> 
> 时间：2012-07-01T11:19:54.977
> 
> 标签：jsf-2, managed-bean

当我将操作方法​​中的参数发送到另一个页面时，我无法从第二类中读取它们。

page1.xhtml：

```
....
<h:commandLink action="#{mbean1.gotoMessageDetail(msg)}" value="#{msg.caption}"/>
.... 
```

托管bean1

```
@ManagedBean(name = "mbean1")
@RequestScoped
public class MBean1 {
 ....
 public String gotoMessageDetail(Message msg) {
    //do some work
    retrun "page2.xhtml?param1=val1&param2=val2";
  }
} 
```

在第二类 MBean2 中，我尝试使用以下代码块获取参数，但我无法获取我发送的参数。

```
@ManagedBean(name = "mbean2")
@ViewScoped
public class MBean2{
   ...
  HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
  param1=Long.parseLong(request.getParameter("param1")==null ? "0" : request.getParameter("param1"));
  param2=Long.parseLong(request.getParameter("param2")==null ? "0" : request.getParameter("param2"));
} 
```

param1 和 param2 为空。如何从 mbean1 的操作方法中获取 param1 和 param2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:06:10.160

会不会是这个错字`retrun`？编辑并重试。

```
@ManagedBean(name = "mbean1")
@RequestScoped
public class MBean1 {
 ....
 public String gotoMessageDetail(Message msg) {
    //do some work
    return "page2.xhtml?param1=val1&param2=val2";
    /////retrun to return
  }
} 
```

供您参考，您可以使用`@ManagedProperty`注释将属性从一个 ManagedBean 注入到另一个。在另一个 ManagedBean 上拥有属性意味着您不需要传递任何参数。

看看[在 JSF 2.0 中注入托管 bean](http://www.mkyong.com/jsf2/injecting-managed-beans-in-jsf-2-0/)

# c++ - 自定义 QCompleter 奇怪的行为

> ID：11281512
> 
> 赞同：0
> 
> 时间：2012-07-01T11:20:15.583
> 
> 标签：c++, qt, qcompleter

我都是，我只是按照这个很好的例子： http:
[//qt-project.org/doc/qt-4.8/tools-customcompleter.html](http://qt-project.org/doc/qt-4.8/tools-customcompleter.html)
我完全复制了代码，除了modelFromFile方法的一些变化，这里是：

```
QAbstractItemModel *MainWindow::modelFromFile(const QString& fileName&#41;
 {
     QStringList words;
     words
     << "break"
     << "default"
     << "func"
     << "interface"
     << "select"
     << "case"
     << "defer"
     << "go"
     << "map"
     << "struct"
     << "chan"
     << "else"
     << "goto"
     << "package"
     << "switch"
     << "const"
     << "fallthrough"
     << "if"
     << "range"
     << "type"
     << "continue"
     << "for"
     << "import"
     << "return"
     << "var";
     return new QStringListModel(words, completer);
 } 
```

奇怪的是，当我输入“fal”时，我正在等待“fallthrough”弹出，但我什么也没看到。它可以与“break”和一些但不是所有的词一起使用。
我正在使用 Kubuntu 12.04，而我的 Ubuntu 12.04 合作伙伴得到了这种行为。
Qt Creator 2.4.1
基于 Qt 4.8.0（32 位）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:49:05.567

当参数中给出的列表是排序列表时，QStringListModel 能够完成单词。您的列表未排序，因此它有权不工作:)

# javascript - Nivo Slider 在 IE 中不起作用

> ID：11281514
> 
> 赞同：1
> 
> 时间：2012-07-01T11:20:55.973
> 
> 标签：javascript, jquery, nivo-slider

我很抱歉发布以前在这里的问题，但这让我发疯，没有修复工作。

网站是[http://www.ipmgroup.org](http://www.ipmgroup.org)一切正常，只是 Nivo Slider 没有触发。这也导致文件 ipm.main.js 中没有 javascript 被触发。如果我评论 nivoslider，一切正常。

如果有人能看到缺陷，可以看看它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:24:15.410

好的，刚刚想通了。对于有同样问题的人。任何以数字结尾的设置，在我的例子中是 animSpeed:500 应该在你的 nivoSlider 调用的底部。

# backbone.js - 使用 jquery 的骨干路由更改内容

> ID：11281516
> 
> 赞同：1
> 
> 时间：2012-07-01T11:21:01.607
> 
> 标签：backbone.js, meteor, backbone-routing

我使用流星，所以它有自己的基于把手的模板方法

在我看到的关于 Backbone 路由方法的大多数示例中，他们使用警报或其他东西，但我对如何实际更改页面内容有点困惑

我用：

```
var fragment = Meteor.ui.render( function () {
    return Template["page"]();
});

$('#content').html(fragment); 
```

我也有一个

```
<template name="page">...</template> 
```

这当然可以工作，但是如果我加载页面`url#page`它不会做任何事情，因为它`$('#content')`是在加载 DOM 之前加载的。但它通常适用于页面上指向`url#page`.

我将如何解决它，以便在将其作为 url 加载时加载页面而不会破坏它在超链接中的使用。此外，我的范式是否正确使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:16:30.437

向内容模板添加一个`loadPage`助手，然后在该模板助手中将主干路由代码放入 a`Meteor.defer(function() { ... });`中，这将使您的路由代码在内容模板添加到 DOM 后运行，从而可供 jQuery 访问。

# c# - 在 .NET 中使用不同的 Token 解析 JSON

> ID：11281524
> 
> 赞同：1
> 
> 时间：2012-07-01T11:21:56.233
> 
> 标签：c#, .net, json, c#-4.0

我收到了来自 Klout API 的回复。响应具有以下字段

*   姓名
*   分数
*   分数增量
    *   换天
    *   周变化
    *   月份变化

我在 .NET 中创建了类，并使用 JSON 响应填充对象。这工作正常，但有时我的 JSON 响应中没有 ScoreDeltas。我如何现场检查这个？

```
JavaScriptSerializer _jsserializer = new JavaScriptSerializer();
var list = _jsserializer.Deserialize<List<KloutInfluencer>>(influencer as string);

//KloutInfluencer is the ckass with all fields. 
```

它给了我`NullReference`这个

```
public double dayChange
{
    get { return entity.payload.scoreDeltas.dayChange ; }
} 
```

这是因为 JSON 响应中没有 ScoreDelta 元素（对于这个 id）。如何在运行时检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:04:19.103

选项 1 - 在您的物业内处理：

你可以这样写：

```
public double dayChange
{
    get { return entity.payload.scoreDeltas == null ? 0 : entity.payload.scoreDeltas.dayChange }
} 
```

* * *

选项 2 - 为所有对象手动反序列化后处理：

实际上你需要决定一个默认值——这可能是可以接受的。您可以手动完成将 scoreDeltas 设置为新实例的列表。像这样的东西：

```
list.ForEach( entry => entry.scoreDeltas = entry.scoreDeltas ?? new ScoreDealtas() );
// On my MAC currently, untested, should show an idea 
```

* * *

选项 3 - 在每个对象内反序列化后直接处理：

Microsoft 还为您提供了一个您可以实现的接口，当反序列化对象时调用该接口（IDeserializationCallback， http: [//msdn.microsoft.com/en-us/library/system.runtime.serialization.ideserializationcallback.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ideserializationcallback.aspx)）。如果你在`KloutInfluencer`类中实现这个，你可以处理那些因为 json 没有提供值而留空的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:04:54.763

您可以将类的`dayChange`属性更改`KloutInfluencer`为可为空，然后检查是否`scoreDeltas`设置了有效负载的属性。

```
public double? dayChange
{
    get
    {
        if (null == entity ||
            null == entity.payload ||
            null == entity.payload.scoreDeltas)
        {
            return null;
        }

        return entity.payload.scoreDeltas.dayChange;
    }
} 
```

# jquery - google jquery api - 如何在文本框上使用焦点功能和模糊功能？

> ID：11281525
> 
> 赞同：0
> 
> 时间：2012-07-01T11:21:58.003
> 
> 标签：jquery

我的页面上有 4 个文本框。我使用 jquery focus 和 blur 函数使文本框的默认出现和消失。我的代码：

```
$(document).ready(function() {

$("#name").focus(function() {
    $("#name").removeClass("idleField").addClass("focusField");
    if($("#name").val() == "username") {
        $("#name").val('');
    }
});

$("#name").blur(function() {
    $("#name").removeClass("focusField").addClass("idleField");
    if($("#name").val().length == 0) {
        $("#name").val('username');
    }
});

$("#password").focus(function() {
    $("#name").removeClass("idleField").addClass("focusField");
    if($("#password").val() == "password") {
        $("#password").val('');
    }   
});

$("#password").blur(function() {
    $("#name").removeClass("focusField").addClass("idleField");
    if($("#password").val().length == 0) {
        $("#password").val('password');
    }
});

$("#firstname").focus(function() {
    $("#firstname").removeClass("idleField").addClass("focusField");
    if($("#firstname").val() == "firstname") {
        $("#firstname").val('');
    }
});

$("#firstname").blur(function() {
    $("#firstname").removeClass("focusField").addClass("idleField");
    if($("#firstname").val().length == 0) {
        $("#firstname").val('firstname');
    }
});

$("#lastname").focus(function() {
    $("#lastname").removeClass("idleField").addClass("focusField");
    if($("#lastname").val() == "lastname") {
        $("#lastname").val('');
    }   
});

$("#lastname").blur(function() {
    $("#lastname").removeClass("focusField").addClass("idleField");
    if($("#lastname").val().length == 0) {
        $("#lastname").val('lastname');
    }
});

$("#email").focus(function() {
    $("#email").removeClass("idleField").addClass("focusField");
    if($("#email").val() == "username@example.com") {
        $("#email").val('');
    }
});

$("#email").blur(function() {
    $("#email").removeClass("focusField").addClass("idleField");
    if($("#email").val().length == 0) {
        $("#email").val('username@example.com');
    }
}); 
```

});

我在这里做错什么了吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:28:03.690

您的领域有一个错误，`#password`您仍然可以`#name`作为选择器。

此外，最好以不同的方式处理这个问题，例如，我会将原始值存储为每个需要一个元素的数据属性，然后将一个事件处理程序附加到所有元素，它会检查元素的数据属性与它的当前属性价值...

假设 HTML 是这样的......

```
<input type='text' id='name' data-init='first name'>
<input type='text' id='age' data-init='your age'> 
```

像这样的jQuery工作......

```
// select all the elements to operate on
$("#name,#age").each(function(){
    $me = $(this) // cache the current jQuery object for better performance
    $me.val($me.data('init')) // set the val to the data object of each element
}).focus(function(){ // handle focus for all elements
    $me = $(this)
    $me.removeClass('idleField').addClass('focusField')
    if($me.val() == $me.data('init'))
        $me.val('')
}).blur(function(){ // handle blur for all emements
    $me = $(this)
    $me.removeClass('focusField').addClass('idleField')
    if($me.val().length == 0)
        $me.val($me.data('init'))
}) 
```

# jakarta-ee - 应用到应用 EJB 注入

> ID：11281528
> 
> 赞同：1
> 
> 时间：2012-07-01T11:22:28.353
> 
> 标签：jakarta-ee, glassfish, glassfish-3

上周我在一些 Corba Marshalling Exceptions 中苦苦挣扎。一个 glassfish Web 应用程序试图从同一机器、同一域和同一 EAR 上的另一个 Web 应用程序获取一些数据。我在 StackOverflow 中找到了正确的答案。一个对象不可序列化。在解决了这个小问题之后，glassfish 服务器真的忙了一阵子。我怀疑它正在序列化一个非常大的对象。所以我认为只有一点“指针”从一个应用程序转移到另一个应用程序的想法似乎是错误的。它复制了整个结构。

我的问题是现在。“从一个应用程序到另一个应用程序进行 ejb 注入是否聪明？” 我想如果我保持物体很小（“瞬态”等）它会工作得足够快。但是我不能只访问另一个应用程序中的另一个对象来读取一些数据吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T20:39:13.690

你想做的绝对是可能的。一些术语说明。

您所拥有的是使用 bean 的**远程**接口的**模块到模块 EJB 注入。**

 **您想要的是使用bean 的**本地**接口的**模块到模块 EJB 注入。**

 **因此，对术语进行一些澄清：

## 应用程序与模块

当两个 WAR 文件在同一个 EAR 中时，您在规范方面拥有的是一个应用程序和两个模块。

在所有其他情况下（两个 EAR，WAR 不在一个 EAR 中），您有应用程序到应用程序，这更难处理。

意义在于 EAR 创建了一个类加载器，它将成为父类，每个 WAR 都成为 EAR 的一个子类加载器。因此，WAR 文件无法看到彼此的类，但它们可以看到 EAR 中的共享类。这就是我们的解决方案所在——稍后会详细介绍。

# 远程与本地参考

远程引用是按值传递的（您会获得数据的副本）本地引用是按引用传递的（您提到的“指针”）

请注意，`@EJB`在任何一种情况下都使用相同的注释，并且无法判断您可能拥有哪种注释。只有 bean 本身决定通过bean 类或 bean 的接口`@Remote`公开哪种类型的引用。`@Local`

# 解决方案

因为您有一个 EAR，所以可以将 bean（EJB）从 war 文件中移出并移到一个共享 jar 中，该 jar 位于 EAR 文件的根目录中，紧挨着 WAR 文件。您还必须从 WAR 文件中删除 bean 类及其接口才能使其正常工作。

然后你可以`@Remote`将bean的接口更改为`@Local`.

如果这样做，您将获得按引用传递的语义，并且两个 WAR 文件可以在没有 CORBA 或类似的重物的情况下共享数据。他们只是传递 java 对象，就像在 java 中传递任何对象一样。

如果您确实确实有**应用程序到应用程序的**情况，那么您确实需要使用`@Remote`传递值语义，这当然要慢很多倍。

如果您还将该 EJB 公开给其他应用程序（例如在服务器之外或在其他 EAR 中），那么您仍然可以通过向 bean annotated 添加第二个接口来做到这一点`@Remote`。单个 EJB 可以很容易地公开`@Local`接口`@Remote`（或我们在规范中称之为*视图*`@WebService`）以及REST 服务视图。****

# android - 用于 SMS 的 ContentObserver

> ID：11281533
> 
> 赞同：5
> 
> 时间：2012-07-01T11:23:33.023
> 
> 标签：android, sms, contentobserver

我正在尝试提取发送的短信。我知道这没有 BroadcastReciver 。所以我发现我可以使用 ContentObserver 来监听数据库中的变化。

我该如何实施？我的目标是**只发送新的短信**并通过数据库上的 POST 发送

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:56:20.217

这是执行此操作的代码片段。关键是使用仅查找“类型=传出消息”的选择。

此外，由于任何更改都可以触发内容数据库，因此请跟踪（以某种方式）已处理的内容。

```
int THREAD_ID = 0, ADDRESS = 1, DATE = 2, TYPE = 3, BODY = 4, INCOMING = 1, OUTGOING = 2, UNKNOWN = -1;

String[] smsProjection = new String[] {"thread_id", "address", "date", "type", "body"};

ContentResolver cr = context.getContentResolver();

Cursor cursor = context.getContentResolver().query(uri, smsProjection, "type = ? AND date > ?",new String[]{Integer.toString(OUTGOING), Long.toString(lastOutgoingSmsTime)}, null); 
```

# php - 以特定格式显示 MySQL 数据

> ID：11281535
> 
> 赞同：1
> 
> 时间：2012-07-01T11:24:01.813
> 
> 标签：php, mysql, html

我正在使用 PHP 从 MySQL 数据库中检索一组位置名称并将它们显示在页面上。它看起来像这样。

![在此处输入图像描述](../Images/c335fef9c57b9435994fbfddd3102c0d.png)

我编写的代码从上到下依次显示结果。

```
<html>
<head>
</head>
<body>

<?php

require_once("db_handler.php");

$conn = iniCon();
$db = selectDB($conn);

$query = "SELECT DISTINCT Name FROM location_categories";
$result3 = mysql_query($query, $conn);

?>

<div id="choseLoc">
Locations <br/><br/>
    <table border="0">
        <?php
        while($row = mysql_fetch_array($result3))
        {
        ?>
        <tr>
            <td><? echo $row["Name"]; ?></td>
            <td align="center"><input type="checkbox" name="checkbox[]" value="<? echo $row['Loc_Code']; ?>" /></td>
        </tr>
        <?php
        }
        ?>
    </table>
</div>
<br/>
<div id="buttons">
    <input type="reset" value="Clear" /> <input type="submit" value="Save" name="savebtn" />
</div>

</body>
</html> 
```

现在如果有很多记录，那么显示它不会很有吸引力。我想显示这样的结果。

![在此处输入图像描述](../Images/bf398e2539128c2dd04fbd89900ceaa4.png)

如何以这种格式显示结果？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:27:02.310

将此用于您的内表

```
<table border="0">
        <?php
$a = 0;

        while($row = mysql_fetch_array($result3))
        {
if($a++ %4 == 0) echo "<tr>";
        ?>

            <td><? echo $row["Name"]; ?></td>
            <td align="center"><input type="checkbox" name="checkbox[]" value="<? echo $row['Loc_Code']; ?>" /></td>
        <?php
if($a %4 == 0) echo "</tr>";
        }
        ?>
    </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:28:35.910

您可以将每一个浮动到左侧，只要 #choseLoc 是内部 div 宽度的 4 倍，浮动就会为您布置它们。

```
<div id="choseLoc" style="width:800px;">

    Locations<br/><br/>

    <?php
    while($row = mysql_fetch_array($result3)){
        ?>
        <div style="float:left; width:200px;">
            <?php echo $row["Name"]; ?> <input type="checkbox" name="checkbox[]" value="<?php echo $row['Loc_Code']; ?>" />
        </div>
        <?php
    }
    ?>

</div> 
```

# asp.net - 如何在 ASP.NET 图表控件中的柱形图下方添加面积图

> ID：11281536
> 
> 赞同：0
> 
> 时间：2012-07-01T11:24:10.353
> 
> 标签：asp.net, asp.net-charts, charts

我可以在 ASP.NET 图表控件中轻松创建柱形图，但我想要的是在列后面创建堆叠的背景区域以指示其状态。所以我想在它后面创建一个面积图……我怎么能这样做，或者我应该采取另一条路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:18:11.607

图表示例[http://archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)包含组合图表的示例

# xcode - Xcode 无警报推送通知

> ID：11281539
> 
> 赞同：0
> 
> 时间：2012-07-01T11:24:18.203
> 
> 标签：xcode, notifications, push, alert, mapkit

我刚刚在我的 iPhone 应用程序中实现了推送通知。我正在寻找几乎类似的东西：

[无需用户交互的UITableview的有效自动刷新（IOS 5）](https://stackoverflow.com/questions/10088298/effective-automatic-refresh-of-uitableview-without-user-interaction-ios-5)

假设我有两个用户。一位用户正在改变他的位置。使用 MKMapKit，我可以确定何时发生这种情况并将位置更改发送到我的服务器。然后我向另一台设备发送推送通知，他看到“实时”用户正在改变他的位置。但是有一个问题：如果设备被锁定，如果另一台设备正在移动，我会每隔几秒收到一次通知。是否有可能隐藏警报并且只有应用程序知道其他用户已经改变了他的位置？因此，我正在寻找一种可能性，即我的应用程序知道如果他更改了其他用户的位置，但不会每次都收到警报。NSTimer 不是我要寻找的东西，因为我认为这不是一种非常有效的方式。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:33:58.023

很确定你的应用程序是否被锁定，即在后台你​​不能直接向它发送消息。您是否有自己的服务器跟踪用户移动，并在下次激活时从您的应用程序内部询问最新的移动历史？

# php - jQuery 样式模板

> ID：11281541
> 
> 赞同：0
> 
> 时间：2012-07-01T11:25:20.980
> 
> 标签：php, javascript, jquery, html, dreamweaver

你在WPF工作过吗？如果是，您可能已经了解可以使用提供的数据应用的模板。

我想在 jQuery 中做同样的事情；我有

*   图片
*   图片描述
*   图片价格及其他

我想创建一个模板，如下所示

![模板](../Images/debdbfc2509dea959dbbf0546a34d29a.png)

所以如果我创建这个模板，我应该能够做到这一点

![已应用模板](../Images/3a7f35470896dbbace575f09dd5f05bc.png)

我需要一个教程或提示来做到这一点。

我正在使用 Dreamweaver 开发网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:57:58.880

我不能声称拥有这个概念，但这是我对 Rick Strahl 在 John Resig（全是 Resig）微模板引擎之上的作品的改编。

[http://ejohn.org/blog/javascript-micro-template/](http://ejohn.org/blog/javascript-micro-templating/)

[http://www.west-wind.com/weblog/posts/2008/Oct/13/Client-Templating-with-jQuery](http://www.west-wind.com/weblog/posts/2008/Oct/13/Client-Templating-with-jQuery)

我真的很喜欢 Rick 对这个概念的补充，这就是我将它们包括在这里的原因。我在我自己的标准化库中使用我自己对这些概念的推导，它们确实运行良好，并且非常容易实现。

有一个模板引擎计划直接进入 jQuery ......但它被罐装了。虽然它仍然可以作为插件使用，但我从来都不喜欢这种实现，所以我不能真正推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:57:58.220

我找到了答案。

我需要做的就是创建模板；上面在 PHP 中显示的东西，即

![模板](../Images/a0ad8f4d876c12e736b94936486baa3e.png)

现在通过 jQuery 对 PHP 文件进行 Ajax 查询来应用模板，并显示适当的数据。

我已经成功地做到了这一点。

感谢 AJAX 和 jQuery 中的 Head First。

我总是很高兴为我的问题找到答案。并感谢您的努力。

# magento - Magento：重载 Adminhtml/Productcontroller 的 saveAction 方法不起作用……？

> ID：11281543
> 
> 赞同：2
> 
> 时间：2012-07-01T11:25:50.297
> 
> 标签：magento, controller, product, overwrite, adminhtml

我想从 core/Mage/Adminhtml/controllers/Catalog/ProductController.php 重载 saveAction 方法，但它不起作用 - 我现在已经搜索并尝试了一整天:(

**背景：**我想在保存产品之前更改自定义属性的值。我发现 _initProductSave 设置了属性，我认为，在 init_ProductSave 之后更改它们将是一个好点（如果有人知道更好的地方，请告诉我）......

任何人都可以帮助我... :)

**Magento 版本：**社区版版本 1.7.0.1 没有扩展，没有安装主题，我只是安装了这个版本完全空白......

***版本 1：通过复制到本地/法师文件夹覆盖控制器***

首先，我尝试在正确的结构中将文件复制到 app/code/local 文件夹 - 但它不起作用（我已经使用 Varient.php 用于本地测试系统和 stores.php 用于更正价格错误-两者都有效...）

***版本 2：使用扩展覆盖控制器***

我的扩展看起来像这样：

**文件结构：**

```
code/local/MyOne/MyExtension/controllers/Catalog/ProductController.php 
code/local/MyOne/MyExtension/etc/config.xml 
etc/modules/MyOne_MyExtension.xml 
```

**文件如下所示：MyOne_MyExtension.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <MyOne_MyExtension>
            <active>true</active>
            <codePool>local</codePool>
        </MyOne_MyExtension>
    </modules>
</config> 
```

**代码/本地/MyOne/MyExtension/etc/config.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <MyOne_MyExtension>
            <version>1.0.0</version>
        </MyOne_MyExtension>
    </modules>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <MyOne_MyExtension before="Mage_Adminhtml">MyOne_MyExtension_Catalog_ProductController</MyOne_MyExtension>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
</config> 
```

最后一个，**code/local/MyOne/MyExtension/controllers/Catalog/ProductController.php：**

```
<?php
require_once 'Mage/Adminhtml/controllers/Catalog/ProductController.php';

class MyOne_MyExtension_Catalog_ProductController extends Mage_Adminhtml_Catalog_ProductController
{
    public function saveAction()
    {
        // do my stuff
        die('reached method');
        // after pressing on save, there should no be a white screen ...
    }
}
?> 
```

我已经用谷歌搜索并阅读了很多内容，我没有看到错误...

任何帮助真的很棒！

问候，马蒂亚斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T14:53:02.657

**注意：**鉴于目标方法...

```
Mage_Adminhtml_Catalog_ProductController->_initProductSave() 
```

...最好的做法是排除使用 adminhtml 范围的观察者来消费`catalog_product_save_before`事件。

* * *

*“首先，我试图将文件复制到应用程序/代码/本地文件夹中，在正确的结构中......”*

这不是一种不常见的开发人员方法，但它永远不会奏效。***自动加载器不*****加载****Magento 操作控制器类。***它们由它们的真实文件系统路径显式加载。因此，所谓的“包含路径破解”并不适用。*

 *参考。[`Mage_Core_Controller_Varien_Router_Standard->getControllerFileName()`](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php#L371).

您的第二种方法 - 使用适当的自定义扩展执行重写 - 是正确的方法。您只需要了解 Magento 如何查找动作控制器目录并将动作控制器类与请求 URL 匹配。

在其 config.xml 中，该`Mage_Adminhtml`模块配置了 Admin 路由器，该路由器负责匹配所有与 admin 相关的请求：

```
<admin>
    <routers>
        <adminhtml>
            <use>admin</use>
            <args>
                <module>Mage_Adminhtml</module>
                <frontName>admin</frontName>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

前面的配置片段做了两件事：`<frontName />`节点添加一个模块路由，并且`<module />`节点 - 连同注册`Mage_Adminhtml` `<codePool />`值（“核心”） - 建立一个目录，在该目录中可以找到动作控制器类，在本例中为`/[basepath]/app/code/core/Mage/Adminhtml/controllers/`.

模块操作控制器通过将其他候选匹配目录添加到现有模块路由来重写工作。这都是从配置中解析出来的：

```
<admin>
    <routers>
        <adminhtml>
            <args>
                <modules>
                    <MyOne_MyExtension before="Mage_Adminhtml">MyOne_MyExtension_Catalog_ProductController</MyOne_MyExtension>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

可以看出，上面的配置只是简单的`admin/routers/adminhtml/args/`在配置XML编译时添加或添加到节点。这是如何解释和用于请求匹配的，与控制器匹配的“正常”过程非常相似。在上面的示例中，该`MyOne_MyExtension`模块有效地将一个目录添加到 Adminhtml 模块的目录列表中。假设它在`local`codePool中，上面的例子指向目录

```
/[basepath]/app/code/local/MyOne/MyExtension/controllers/Catalog/ProductController/ 
```

如果有一个动作控制器类，这将起作用

```
/[basepath]/app/code/local/MyOne/MyExtension/controllers/Catalog/ProductController/Catalog/ProductController.php 
```

它包含一个`_initProductSave()`名为的类中的方法

```
MyOne_MyExtension_Catalog_ProductController_Catalog_ProductController 
```

希望这个解释足以说明基于配置的控制器重写工作在目录级别，而不是通过指定特定的类（这是块、帮助程序和模型重写的工作方式）。因为此配置添加了一个目录，所以它不必导致重写，因为它可以用于简单地为给定模块添加新操作。最终，只有在其他一些控制器类在“原始”控制器类之前匹配时，才会发生动作控制器重写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T13:27:12.370

由于 Magento 只需要知道模块名称就可以找到匹配控制器的路径，

改变：

```
<MyOne_MyExtension before="Mage_Adminhtml">MyOne_MyExtension_Catalog_ProductController</MyOne_MyExtension> 
```

到：

```
<MyOne_MyExtension before="Mage_Adminhtml">MyOne_MyExtension</MyOne_MyExtension> 
```*

# cuda - Cuda 线程：特殊映射/索引

> ID：11281544
> 
> 赞同：0
> 
> 时间：2012-07-01T11:26:05.020
> 
> 标签：cuda, mapping

我有不同的 34 个线程块（0...33）。

我需要找到一个公式，以便在每个块中，前 33 个线程 (0...32) 将指向对应的

```
bases[x] 
```

x 从 0 到 32，而最后一个从 33 到 66。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:01:23.310

我猜你想要这样的东西：

```
int offset = (threadIdx.x == 33) ? threadIdx.x : 0;
int val = bases[threadIdx.x + offset]; 
```

以便最后一个线程从块内的线程索引获得非零偏移量。三元运算符将有条件地进行评估，不会导致任何分支分歧。但是，我建议重新考虑使用不是扭曲大小 (32) 倍数的块大小。这样做会浪费很多内核和周期。例如，没有什么会阻止您使用具有 32 个线程的块并让最后两个线程执行额外的计算以覆盖每个块所需的 34 个操作。

# normalization - 如何用标准化的 TF-IDF 做 K-means

> ID：11281545
> 
> 赞同：0
> 
> 时间：2012-07-01T11:26:20.570
> 
> 标签：normalization, cluster-analysis, k-means, tf-idf

我想在这里得到一些指导。我一直在尝试为我的项目标准化 TF-IDF 结果。所以，我在想*TF-IDF 之后的下一步是什么*？我想对那些标准化的 TF-IDF 进行 k-means 聚类，但*现在是时候了*吗？在此之前，我使用 Lucene 创建了索引，如果可能的话，我*不想使用 Mahout*，因为我使用的是 Windows（也不想使用 cygwin）。

关于用这些 lucene-ed 和 tf-idf-ed 结果*做什么（以及如何）做 k-means*的任何建议？我在这里迷路了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:15:29.180

您需要研究 '''球形 k-means'''，如：

*   常规 k-means 与欧几里得距离有关
*   常规 k-means 不适用于高维稀疏数据

# android - 图像质量安卓

> ID：11281546
> 
> 赞同：1
> 
> 时间：2012-07-01T11:26:21.367
> 
> 标签：android, bitmap

我需要解决由位图大小引发的 OutOfMemory 错误。

我使用了这段代码：

```
public static Bitmap decodeSampledBitmapFromSDcard(String file,
            int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(file, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth,
                reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeFile(file, options);
    }

    public static int calculateInSampleSize(BitmapFactory.Options options,
            int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float) height / (float) reqHeight);
            } else {
                inSampleSize = Math.round((float) width / (float) reqWidth);
            }
        }
        return inSampleSize;
    } 
```

但图像质量很差。

我需要另一种方法来调整图像大小以使其位图对象变小而不会破坏质量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:28:16.580

```
int newWidth = 640;
int newHeight = 480;
loat scaleWidth = ((float) newWidth) / width;
float scaleHeight = ((float) newHeight) / height;
Matrix matrix = new Matrix();
                                        matrix.postScale(scaleWidth, scaleHeight);

Bitmap nResizedBitmap = Bitmap.createBitmap(b, 0, 0, width, height, matrix,true);
                                                                                FileOutputStream out = new FileOutputStream(...outfile...);                                         nResizedBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out); 
```

# c# - 列表框中的错误自动高度

> ID：11281550
> 
> 赞同：1
> 
> 时间：2012-07-01T11:26:48.720
> 
> 标签：c#, .net, windows-phone-7, xaml, listbox

我在 XAML 中有这段代码

```
<Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,20">
            <TextBlock x:Name="ApplicationTitle" Text="Title" />
            <TextBlock x:Name="PageTitle" Text="title" Margin="9,-7,0,0" />
        </StackPanel>

        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="22,0,12,0">
            <StackPanel>
                <ListBox Name="Cities"Height="Auto" Margin="4,3,0,10">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock FontSize="40" Text="{Binding Name}"></TextBlock>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Grid>
    </Grid> 
```

当我将项目放入 ListBox 时，滚动不起作用。我不想设置 Listbox 的固定高度，因为我需要支持不同的屏幕分辨率。我需要自动高度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T19:15:56.737

您不需要`StackPanel`，因为其中只有一个孩子。`Grid`命名的“ContentPanel”也是如此。

删除它们，设置`Grid.Row`并`ListBox`调整边距。

原因是`StackPanel`没有限制其子项的高度，无论您的列表框要求的高度是多少 - 堆栈面板都提供了它，即使这意味着列表框不会完全显示。由于列表框得到了它想要的所有高度，它认为不需要滚动。这是对实际发生的事情的简化，但足以了解正在发生的事情。

`StackPanel`在这方面有点“邪恶”——它会默默地给孩子想要的任何高度。

您不必为了 UI 工作而移除网格，但您也不需要它。嵌套越少越好。

# linux - 闰秒和 pthread_mutex_timedlock 过早超时

> ID：11281551
> 
> 赞同：3
> 
> 时间：2012-07-01T11:26:50.873
> 
> 标签：linux, pthreads, leap-second

所以就在最近，我依赖于 pthread_mutex_timedlock 的异步服务器代码似乎过早地超时了。起初我以为这只是我的错误，但看到 linux 内核存在一些闰秒问题，似乎我不是唯一一个：[https ://lkml.org/lkml/2012/7/1 /11](https://lkml.org/lkml/2012/7/1/11)

目前对此的修复是什么？重启服务器，还是更新内核？我的服务器依赖于 timedlock 机制来等待来自其他线程的事件，并且由于这个过早的超时，CPU 使用率一直处于 100%，因为它永远不会停留在 timed lock 上。

我目前正在运行 ubuntu 服务器 10.04.4，内核版本为 2.6.39.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T11:34:34.523

好吧，我遇到了[http://forums.pentaho.com/showthread.php?98217-Java-leap-second-bug-how-to-fix-your-broken-servers&s=5836d11a51327406f965c66fddc9149d&p=286479#post286479](http://forums.pentaho.com/showthread.php?98217-Java-leap-second-bug-how-to-fix-your-broken-servers&s=5836d11a51327406f965c66fddc9149d&p=286479#post286479)

这在 sudo 下成功了：

```
/etc/init.d/ntp stop; date; date `date +"%m%d%H%M%C%y.%S"`; date; /etc/init.d/ntp start 
```

（freenode 的#kernel 说`date -s "\date\"`修复它）

CPU 使用率从 100% 左右下降到 0.5% 也证实了这一点。所以我想就是这样，直到下一个闰秒插入。

# ios - 块语法目标 C

> ID：11281553
> 
> 赞同：7
> 
> 时间：2012-07-01T11:27:03.710
> 
> 标签：ios, objective-c, c, syntax, objective-c-blocks

我刚刚从[另一个答案](https://stackoverflow.com/a/11278382/916299)中阅读了这个片段：

> `^{}`当您使用语法创建块时...

我理解这种语法并经常使用它，但是我从中推断可能还有其他语法可用于创建块。在那里？如果有，不同语法有什么优点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-01T11:37:57.603

如果您的问题是关于块文字语法（用于匿名函数的语法），这里是一般形式

> ^ 返回类型（参数列表）{表达式}

基于此，您可以省略返回类型

> ^（参数列表）{表达式}

因为它可以从返回类型中推断出来。如果没有返回值，`void`就是选择。

此外，你可以写

> ^ {表达式}

如果没有论据。

这与

```
^ void (void) { NSLog(@"Something"); } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T11:38:20.643

通过查看[here，](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)我认为唯一的区别是您是否使用返回类型/参数

# java - 如何从 index.jsp 调用操作？

> ID：11281556
> 
> 赞同：0
> 
> 时间：2012-07-01T11:27:42.123
> 
> 标签：java, struts, dao

我有一个 index.jsp，我想在其中添加一个链接，这样当我单击该链接时，我应该导航到一个操作类`info.action`。

在此操作类中，我使用服务管理器实例，调用服务并从该服务访问数据访问对象 (DAO)。从 DAO 获取的结果在服务中有一些检查条件，根据同样的情况，它应该显示另一个名为 result.jsp 的 jsp。

如何通过链接从 index.jsp 调用操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:55:55.363

URL 应该与 web.xml 中的动作 servlet 映射 url-pattern 匹配，这将调用动作 servlet，并且应该包含该动作的动作映射的路径属性值，这将有助于动作 servlet 找到您的动作的动作映射班级。

例如，如果在您的 web.xml 中，动作 servlet 的映射如下 -

```
<servlet-mapping>
    <servlet-name>action-servlet</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

在你的 struts-config.xml 中，动作的映射如下 -

```
<action-mappings>
    <action path="/amyaction" ...
    ... 
```

然后类似的东西`http://host:port/myapp/myaction.do`应该调用动作。

您可以参考这个 - [https://stackoverflow.com/a/1388120/738746](https://stackoverflow.com/a/1388120/738746)，了解如何使用`<html:link`（struts 标签）和`<c:url`（JSTL 标签）显示链接。

# c# - 从组合框选定项中过滤树视图

> ID：11281558
> 
> 赞同：0
> 
> 时间：2012-07-01T11:27:56.007
> 
> 标签：c#, winforms, treeview

树视图加载了来自数据库的一些数据。我想过滤所选组合框项目的树视图。有人告诉我如何执行此操作吗？

```
 public SelectorDataTreeView()
        {            
            InitializeComponent();

            button1.FlatStyle = FlatStyle.Flat;

            comboBox1.Items.Add("HP");
            comboBox1.Items.Add("DELL");
            comboBox1.Items.Add("Cam");

        }

        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
           String s = comboBox1.SelectedItem.ToString();
           ExpandAll(MyTreeView.Nodes);
        }

        //TreeKey Finder
        private TreeNode[] FindNode(String searchKey)
        {

            return MyTreeView.Nodes.Find(searchKey, true);

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:51:50.290

```
private void Form4_Load(object sender, EventArgs e)
    {
        treeView1.Nodes.Add("LaptopsNodeKey", "Laptop");
        treeView1.Nodes.Add("CellPhonesNodeKey", "Phones");
        treeView1.Nodes.Find("LaptopsNodeKey", true)[0].Nodes.Add("DellTM", "Dell");
        treeView1.Nodes.Find("LaptopsNodeKey", true)[0].Nodes.Add("SonyTM", "Sony");
        treeView1.Nodes.Find("CellPhonesNodeKey", true)[0].Nodes.Add("HTCTM", "HTC");
        treeView1.Nodes.Find("CellPhonesNodeKey", true)[0].Nodes.Add("NokiaTM", "Nokia");

        comboBox1.Items.Add("LaptopsNodeKey");
        comboBox1.Items.Add("CellPhonesNodeKey");

        comboBox2.Items.Add("Laptop");
        comboBox2.Items.Add("Phones");
    }

    //This works because you Loaded ComboBox1 with Name property of Nodes
    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        treeView1.CollapseAll();
        treeView1.SelectedNode = treeView1.Nodes.Find(comboBox1.Text, true)[0];
        treeView1.SelectedNode.Expand();
    }

    //This doesn't work, because you Loaded ComboBox2 with Text property of Nodes
    private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        treeView1.CollapseAll();
        treeView1.SelectedNode = treeView1.Nodes.Find(comboBox1.Text, true)[0];
        treeView1.SelectedNode.Expand();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:05:23.757

啊哈，这是你的错：
`String s = comboBox1.SelectedItem.ToString();`
你应该使用这个：
`String s = comboBox1.Text`;
它正在工作。
而且你应该搜索节点`Name`属性而不是`Text`属性。
得到后`s`你需要像这样使用它
`treeView1.SelectedNode = treeView1.Nodes.Find("WantedNodesName", true)[0]; treeView1.SelectedNode.Expand();`

# java - android admob在横向上调整大小

> ID：11281562
> 
> 赞同：7
> 
> 时间：2012-07-01T11:28:10.083
> 
> 标签：java, android, eclipse

我已经在清单上声明了 adMob

```
<activity 
           android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
          /> 
```

它在设备轮换时已正确调整大小，但现在我必须添加`android:configChanges="keyboardHidden|orientation"`到包含 adMob 的活动中，以防止重新加载活动。我达到了它，但现在 adMob 在横向时没有缩放。onConfigChanges 事件我现在可以强制使用适当的横向尺寸调整 adMob 的大小。如何？谢谢你。

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T02:24:46.723

我遇到了同样的问题，但找到了解决方法。

我的 AdView 位于页面底部，在相对布局内。加载时它看起来是正确的，所以我认为`LayoutParams`是正确的。要解决这个问题，我必须从 . 中删除所有内容`RelativeLayout`，创建一个新的 AdView，然后以正确的顺序将其全部添加回原来的`LayoutParams`.

就像是：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    AdView adView = (AdView)findViewById(R.id.adView);
    View contentFrame = findViewById(R.id.contentFrameLayout);

    RelativeLayout parent = (RelativeLayout) adView.getParent();
    LayoutParams mapFrameParams = contentFrame.getLayoutParams();
    LayoutParams adViewParams = adView.getLayoutParams();

    parent.removeView(adView);
    parent.removeView(contentFrame);

    AdView newAdView = new AdView(this, AdSize.SMART_BANNER, getString(R.string.admob_pubId));

    newAdView.setId(R.id.adView);

    parent.addView(newAdView, adViewParams);
    parent.addView(contentFrame,mapFrameParams);
    newAdView.loadAd(new AdRequest());
} 
```

这对我有用，但仍然感觉像一个黑客。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T17:46:15.913

没有足够的代表直接回复，但你是正确的贾斯汀史密斯。正如 Eric Leichtenschlag 在这里所说的那样[https://groups.google.com/forum/#!msg/google-admob-ads-sdk/8Ch7VmAm7RE/34Tdw6Zz4jAJ](https://groups.google.com/forum/#!msg/google-admob-ads-sdk/8Ch7VmAm7RE/34Tdw6Zz4jAJ)如果您使用的是 SMART_BANNER，则需要重新创建 AdView

我所做的是从布局中删除 adView，销毁 adview，重新创建它，将其添加回布局中，然后发出 AdRequest。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T11:35:30.910

试试这个设置：

```
<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    ads:adSize="SMART_BANNER"
    ads:adUnitId="@string/adkey"
    ads:loadAdOnCreate="false"
    android:focusable="false" /> 
```

自动为您的`SMART_BANNER`广告选择最佳尺寸和类型。

在您的`onConfigurationChanged`方法中，您只需为`AdView`.

请注意，您可能需要添加`xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"`.

# .net - 为什么 WCF 工作流服务表现为单向

> ID：11281565
> 
> 赞同：1
> 
> 时间：2012-07-01T11:28:42.163
> 
> 标签：.net, wcf, workflow-foundation

我正在创建一个 WCF WorkflowService，并且客户端正在对该服务进行异步调用。工作流程运行时间很长，一旦客户端断开连接（即关闭发出请求的应用程序），工作流程将继续并且不会停止。这是如何运作的？一旦客户端断开连接，服务实例不会被破坏，工作流应该停止吗？

为什么它默认表现为“一劳永逸”，即单向？

编辑：好吧，我想，一旦客户端断开连接，服务实例就会被破坏，工作流也会中止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:28:37.980

工作流引擎对长时间运行的异步流程进行建模。这样的过程可以跨越几秒钟、几小时、几周甚至几年，并且可能涉及一个或多个参与者。因此，要求连接保持打开是不合理且不可取的。

Windows 工作流服务将其状态保存到某个数据存储区，通常是数据库，因此如果该工作流在指定时间内没有任何反应，则可以将其保存到数据库并从内存中卸载。将来，当有人调用与该工作流实例相关的 WCF 操作之一时，它会从数据库中恢复并继续执行，就好像它总是加载到内存中一样。这允许在任何单个时间点存在大量工作流实例，其中只有一小部分实际上占用了计算机资源。

持久性也是工作流服务的一个重要特征。如果有一个工作流程已经进行了很长时间，那么您最不想看到的就是丢失它的所有状态和数据，并且如果可能的话，您需要重新开始它。这就是为什么工作流的状态信息不依赖于像网络连接这样脆弱的东西。

# sencha-touch - 从 STORE 发送 POST 请求

> ID：11281567
> 
> 赞同：1
> 
> 时间：2012-07-01T11:28:50.223
> 
> 标签：sencha-touch, extjs4, extjs, extjs-mvc, extjs4.1

这是我的商店课程。我正在尝试完成 POST 请求。这是我的代码；一切正常，当我从 Firebug 检查它时，我也得到了服务器响应。但唯一的问题是，当我`Params tab`在 firefox 中查看时，我看到`_dc 1341141752113`了，当我`Post tab`在 firebug 中查看时，我看到了

```
limit   25
page    1
start   0 
```

1.) 这些是我没有在我的代码中传递的一些参数。为什么我得到这些？

```
Ext.define('Pro.store.Animal',{
    extend:'Ext.data.Store',
    model:'Pro.model.Animal',

    proxy: {
        actionMethods : {

            read   : 'POST'
        },
        type: 'ajax',
        url : '/projectmy/animal.php'

    }

    }); 
```

2.) 如果我想将参数传递给 PHP 文件，我应该如何编辑我的代码以传递参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T04:56:48.070

这些参数是默认值。如果您使用分页工具栏或其他控件来浏览数据，则需要它们。对于附加参数，您可以[在您的代理中使用 extraParams](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Ajax-cfg-extraParams)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:43:50.580

```
Ext.define('App.store.StoreName', {
    extend: 'Ext.data.Store',

    requires: [
        'App.model.StoreName'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            storeId: 'stid',
            model: 'App.model.MyModel',
            proxy: {
                type: 'ajax',
                actionMethods: 'POST',
                api: {
                    read: '../myreadPhp.php',

                },
                reader: {
                    type: 'json'
                }
            },
            listeners: {
                beforeload: {
                    fn: me.onArraystoreBeforeLoad,
                    scope: me
                }
            }
        }, cfg)]);
    },

    onArraystoreBeforeLoad: function(store, operation, options) {
        this.proxy.extraParams.yournameparameter = "pass some name here"; 
        this.proxy.extraParams.yourageparamete = "pass your age here"; 
    }

}); 
```

`myreadPhp.php`将期待参数`yournameparameter` 和`yourageparamete`

# html - 如何让 XSLT 和 XPath 在 Symphony CMS 中以精细的 HTML 操作输出 XML

> ID：11281569
> 
> 赞同：1
> 
> 时间：2012-07-01T11:29:04.110
> 
> 标签：html, xml, xslt, xpath, symphony-cms

在 Symphony CMS 中，我希望能够拥有一个包含页面内容（可能使用 DocBook）的 XML 文档和另一个作为中央首字母缩写词/缩写存储库的 XML 文档。例如，此存储库可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../utilities/master.xsl"?>
<terminology>
    <abbreviations>
        <term abbr="World Wildlife Fund">WWF</term>
    </abbreviations>
</terminology> 
```

然后，XSL 文档将使用 XPath 执行转换，以在模板中显示 DocBook XML。

例如，在从 DocBook 输出的副本中包含文本“WWF”，无论何时发生这种情况，XSLT 和 XPath 都会使用带有标题的缩写标签将该单词包装起来，并使用首字母缩略词/缩写存储库作为资源。

```
<abbr title="World Wildlife Fund">WWF</abbr> 
```

整个设置需要足够可扩展，以便在存储库中有一大堆术语，只要在 DocBook 内容中看到特定的文本字符串，就可以调用这些术语。

我已经指出了[HTML Ninja Technique](http://symphony-cms.com/learn/articles/view/html-ninja-technique/)的方向，这听起来好像它会为我提供我需要的东西，但是这个例子是在提取 HTML（这似乎有点奇怪）并且没有详细介绍如何执行对我要生成的文本字符串进行某种操作。

值得注意的是，我一直在尝试在 Symphony Utilities 的 master.xsl 模板中执行此操作。如果这在此文件中不起作用，我很高兴得到纠正。

我对 XSLT 和 XPath 很陌生，所以在回答这个问题时请不要假设我的任何知识。此时我什至在努力连接 XML 和 XLS 文档。让我制作概念证明的分步说明将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:13:15.157

假设我在同一位置有 3 组文件。

1.  页面文档 (XML)。

    ```
    <?xml version="1.0"?>
    <?xml-stylesheet type="text/xsl" href="transform.xsl"?>
    <html>
        <span>WWF1</span>
        <span>WWF</span>
        <span>WWF2</span>
    </html> 
    ```

2.  首字母缩写词库 (XML)

    ```
    <?xml version="1.0"?>
    <terminology>
      <abbreviations>
        <term abbr="World Wildlife Fund 1">WWF1</term>
        <term abbr="World Wildlife Fund 2">WWF2</term>
      </abbreviations>
    </terminology> 
    ```

3.  变压器 (XSL)。

    ```
    <?xml version="1.0"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" method="xml"/>
       <xsl:template match="/">
          <xsl:apply-templates select="html" mode="transform">
             <xsl:with-param name="repository" select="document('repository.xml')/terminology"/>
          </xsl:apply-templates>
       </xsl:template>

      <!-- Updated Template Start-->
      <xsl:template match="text()" mode="transform" priority="2.5">
         <xsl:param name="repository" />
         <xsl:variable name="this" select="." />
         <xsl:variable name="term" select="$repository/abbreviations/term[contains($this,./text())]" />
         <xsl:choose>
            <xsl:when test="count($term) > 0">
           <xsl:value-of select="substring-before(., $term/text())"/>
               <xsl:variable name="termTitle" select="$term/@abbr" />
               <abbr title="{$termTitle}"><xsl:value-of select="$term/text()"/></abbr>
       <xsl:value-of select="substring-after($this, $term/text())"/>
            </xsl:when>
            <xsl:otherwise>
               <xsl:copy-of select="."/>
            </xsl:otherwise> 
         </xsl:choose>
       </xsl:template>
       <!-- Updated Template Stop-->

       <xsl:template match="node()" mode="transform" priority="2">
          <xsl:param name="repository" />
          <xsl:copy>
             <xsl:apply-templates mode="transform">
                <xsl:with-param name="repository" select="$repository"/>
             </xsl:apply-templates>
          </xsl:copy>
        </xsl:template>
    </xsl:stylesheet> 
    ```

转换器文件将给出如下输出。

```
<html>
  <span><abbr title="World Wildlife Fund 1">WWF1</abbr></span>
  <span>WWF</span>
  <span><abbr title="World Wildlife Fund 2">WWF2</abbr></span>
</html> 
```

您可以通过简单地添加另一个节点来扩展首字母缩写词。

XSLT 不需要更改。

我希望这可以帮助你。

# java - 在jframe中加载html文件

> ID：11281571
> 
> 赞同：1
> 
> 时间：2012-07-01T11:29:21.063
> 
> 标签：java, html, swing, jframe, jeditorpane

我正在完成一个项目，我有一个简单的 html，其中包含一些图像和锚链接，当用户单击帮助菜单按钮时，我想将它们作为帮助文件显示给用户。我不知道该怎么做。我尝试了下面的代码，它只在没有任何滚动的框架中返回我，并且链接不起作用。

```
 pane = new JEditorPane(getClass().getResource("help.html"));//add the html to be    shown
    pane.setEditable(false); 
```

有什么简单的方法吗？请保持简单，因为我是 Java 新手。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:38:42.900

*   使用[JTextComponents.read(Reader in, Object desc) 抛出 IOException](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)

*   要从路径获取文件，`getClass().getResource("help.html")`请阅读[JAR 文件中的打包程序](http://docs.oracle.com/javase/tutorial/deployment/jar/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:34:59.567

好吧，因为我无法以其他方式做到这一点，我发现使用默认用户浏览器查看文件更有用。所以这是我的解决方案：

```
 helpItem.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
          Desktop desktop = null;
             // Before more Desktop API is used, first check 
             // whether the API is supported by this particular 
             // virtual machine (VM) on this particular host.
             if (Desktop.isDesktopSupported()) 
             {
             try
             {
                 desktop = Desktop.getDesktop();
                 String thehelpfile= String.valueOf(getClass()
                      .getResource("help.html"));
                 File fileToOpen=new File(thehelpfile.substring(5));
                 desktop.open(fileToOpen);
             } catch (IOException ex)
             {
                 JOptionPane.showMessageDialog(null,
                      ex, "Λάθος", JOptionPane.PLAIN_MESSAGE);
             }
          }
        }
    }); 
```

# php - 在回调 php 中捕获 http 请求

> ID：11281572
> 
> 赞同：0
> 
> 时间：2012-07-01T11:29:26.857
> 
> 标签：php, http

我正在尝试捕获回调函数中发生的 http 请求：

```
// Code omitted
public function capture($fn)
{
  // start http capture
  $fn();
  // end http capture and stores the capture in a variable
}

//example usage
$request->capture(function(){
  do_some_http_request_with_curl_or_whatever_you_want();
}); 
```

我已经用 ob_start() 和 php 包装器尝试了各种东西......但没有任何效果，非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:40:28.663

由于回调有很多可能的方法来处理它，因此不可能捕获任何任意 HTTP 请求：

*   带有 URL 包装器的高级函数（例如`file_get_contents`）
*   更底层的方法（例如流、套接字）
*   自定义 PHP 扩展（例如 curl）

这些方法中的每一种都有（或根本*没有*！）不同的方法来让你挂钩到请求的机制中，所以除非你想要针对的所有机制都支持挂钩*并且*回调积极地与你合作，否则没有办法去做这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T16:54:55.960

如果您只需要支持流包装器（即不使用套接字函数），则应该可以取消注册`http`流包装器并添加您自己的拦截调用然后转发它们。这是一个例子：

```
<?php

class HttpCaptureStream
{
    private $fd;
    public static $captured;

    public static function reset()
    {
        static::$captured = array();
    }

    public function stream_open($path, $mode, $options, &$opened_path)
    {
        static::$captured[] = $path;

        $this->fd = $this->restored(function () use ($path, $mode) {
            return fopen($path, $mode);
        });

        return (bool) $this->fd;
    }

    public function stream_read($count)
    {
        return fread($this->fd, $count);
    }

    public function stream_write($data)
    {
        return fwrite($this->fd, $data);
    }

    public function stream_tell()
    {
        return ftell($this->fd);
    }

    public function stream_eof()
    {
        return feof($this->fd);
    }

    public function stream_seek($offset, $whence)
    {
        return fseek($this->fd, $offset, $whence);
    }

    public function stream_stat()
    {
        return fstat($this->fd);
    }

    protected function restored($f)
    {
        stream_wrapper_restore('http');

        $result = $f();

        stream_wrapper_unregister('http');
        stream_wrapper_register('http', __CLASS__);

        return $result;
    }
}

function capture($f) {
    stream_wrapper_unregister('http');

    stream_wrapper_register('http', 'HttpCaptureStream');
    HttpCaptureStream::reset();

    $f();

    stream_wrapper_restore('http');
}

capture(function () {
    file_get_contents('http://google.com');
    file_get_contents('http://stackoverflow.com');

    var_dump(HttpCaptureStream::$captured);
}); 
```

# jquery - 无法进行引导轮播循环

> ID：11281574
> 
> 赞同：0
> 
> 时间：2012-07-01T11:29:52.147
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap

我的旋转木马正在工作，但突然停止了。我认为一些包含的文件有问题。

我将 RubyOnRails 与 Twitter Bootstrap 一起使用。

**已编辑**我的 javscript 文件夹中的文件名称：application、bootstrap-carousel、bootstrap-dropdown、bootstrap-modal、bootstrap-transition、jquery-1.7.2、jquery.validate.min

这是我视图中的代码（**已删除'jquery.validate.min'**）：

```
 <%= javascript_include_tag 'jquery-1.7.2','application' %> 
```

并生成 HTML 代码：（**我认为问题在这里**）**导致删除第二行**

```
 <script src="/assets/jquery-1.7.2.js?body=1" type="text/javascript"></script>
   <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
   <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
   <script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
   <script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
   <script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
   <script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
   <script src="/assets/jquery-1.7.2.js?body=1" type="text/javascript"></script>
   <script src="/assets/jquery.validate.min.js?body=1" type="text/javascript"></script>
   <script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

这是我的 application.js 的代码：

```
 $(document).ready(function(){
  $('.carousel').carousel({
  interval: 2000
});  
 } 
```

来自 Google Chrome 控制台的错误：

```
 Uncaught TypeError: Object [object Object] has no method 'carousel' 
```

奇怪的是，它在几乎空的 html 页面中工作（仅使用轮播），并且控制台也出现此错误，但它正在工作。

你能说什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:09:30.177

正确代码：

```
 <%= javascript_include_tag 'application' %> 
```

并从我的 js 文件夹中删除 jquery-1.7.1.min.js 。

# php - PHP、html_entity_decode 和 htmlspecialchars_decode 不起作用

> ID：11281576
> 
> 赞同：3
> 
> 时间：2012-07-01T11:30:40.947
> 
> 标签：php, utf-8

啊，我从不喜欢 PHP，它太“不纯”了……

现在我必须使用它，但我遇到了一个问题：主要是既不`html_entity_decode`也不`htmlspecialchars_decode`似乎对我有用。我已经看过这个论坛了，什么也没有。它似乎在任何地方都有效，只是在这里不起作用......

我将电影的标题发送到数据库，全部编码，然后当我从数据库中获取它时，我用这个解码它：

```
$title = html_entity_decode($row['Title']); 
```

接着：

```
"title":"'.$title.'" 
```

它是我用 PHP 创建的 JSON 对象的一部分。虽然当我查看那个特定对象的属性时，它的标题并没有被解码，实际上没有任何变化。我尝试了问题标题中所述的两个功能，并尝试了像 UTF-8 这样的编码，还有一些像 ENT_QUOTES 或 ENT_COMPAT 这样的选项，但它仍然不起作用。

有人可以告诉我为什么 PHP 不听我的吗？

编辑：这是我在那里所做的全部内容：

```
echo 'var serverVideos = [';
while($row = mysql_fetch_array($result))
{
    $currentRow++;
    $data = array('posterSrc' => $row["Poster_name"],
        'videoSrc' => $row["Video_name"],
        'videoType' => $row["Type"]);

$title = html_entity_decode($row['Title']);
$poster = html_entity_decode($row['Poster_name']);
echo'{"id":"'.$row["ID"].'", "vimeoID":"'.$row["VimeoID"].'", "title":"'.$title.'" ,"client":"'.$row["Client"].'" , "production":"'.$row["Production"].'", "type":"'.$row["Type"].'", ';
            if($row["Type"] != "vimeo")
            {
                echo '"href":"'.http_build_query($data).'"';
            }
            else
            {
                echo '"href":"'.$row["Video_name"].'"';
            }
            echo ', "poster":"'.$poster.'"}';

            if($currentRow != $rowNumber)
            {
                echo ',';
            }
        }
        echo '];'; 
```

抱歉，有点乱，在notepad++中看起来更好；/我实际上是在脚本标签中输出它来制作一个对象，我查看了 json_encode 并没有真正理解它如何帮助我，因为我不知道如何使用这么多变量，抱歉。

此外，以下是使用该 JSON 对象中的变量使用 javascript 制作标签后源代码中的代码：

```
<a production=" " client=" " title="O.S.T.R &amp;quot;Track #12&amp;quot;" href="http://player.vimeo.com/video/43886787?title=1&amp;amp;byline=1&amp;amp;portrait=1" rel="shadowbox" class="box"> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T00:02:17.203

（我无法让这个适合评论，所以它必须是一个答案。）

这里真正的问题是数据被放入数据库的方式。让我们看一下您提供的示例字符串：

```
$raw="O.S.T.R &amp;quot;Track #12&amp;quot;";
echo html_entity_decode($raw);
//   O.S.T.R &quot;Track #12&quot;
echo html_entity_decode(html_entity_decode($raw));
//   O.S.T.R "Track #12" 
```

所以用户输入是*OSTR "Track #12"*

这里的关键概念是，这正是它应该存储在数据库中的方式。因为那是真实的数据。不要在数据库中存储修改后的版本。相反，请适当地转义数据，但您需要输出它。

这是我将用于以下几个示例的示例数据：

```
$title='O.S.T.R "Track #12"';
$description='A&B or A\B ??'; 
```

因此，当您在使用的 SQL 语句`addslashes`（或准备好的语句，但我将在此处展示添加斜杠方法）中写入数据时：

```
$sql="INSERT INTO xxx(title,description) VALUES('".addslashes($title)."','".addslashes($description)."')";
//   INSERT INTO xxx(title,description) VALUES('O.S.T.R \"Track #12\"','A&B or A\\B ??') 
```

对于 json 编码，使用 json_encode：

```
$json=json_encode( array('title'=>$title,'description'=>$description) );
//   {"title":"O.S.T.R \"Track #12\"","description":"A&B or A\\B ??"} 
```

对于 csv 编码，在日志文件中，使用 fputcsv：

```
$fp=fopen("my.csv","a");
fputcsv($fp, array($title,$description) );
fclose($fp);
//   "O.S.T.R ""Track #12""","A&B or A\B ??" 
```

对于作为 HTML 的输出，使用 htmlspecialchars()（或 html_entity_encode()）：

```
$html='<h3>'.htmlspecialchars($title).'</h3>';
$html.='<p>'.htmlspecialchars($description).'</p>';
//   <h3>O.S.T.R &quot;Track #12&quot;</h3><p>A&amp;B or A\B ??</p> 
```

现在，也许我还没有说服你，你仍然真的想在你的数据库中存储 HTML 就绪的数据，并且每次你想将它用于其他任何事情时都要承受额外的步骤来取消 html 化它？在这种情况下，您的示例字符串应该如下所示：

```
O.S.T.R &quot;Track #12&quot; 
```

而你的字符串看起来像：

```
O.S.T.R &amp;quot;Track #12&amp;quot; 
```

你看得到差别吗？第一个已将 html 实体仅编码一次。调用`html_entity_decode()`将正确解码它。第二个已经对它们进行了两次编码。它不再被编码为 html 实体。这就是我们所说*的双实体编码格式*或简称 DEEF。PHP中没有任何`deef_decode()`功能，或者我听说过的任何计算机语言，甚至没有比 PHP 更纯粹的语言。原因是没有人需要这个功能。

摘要：您的代码中存在写入其数据库的错误。您正在接收已编码实体的字符串，但您在将它们写入数据库之前再次对其进行编码。

结论：回到我上面给出的*关键概念*，您应该在将这些 html 实体写入数据库之前对其进行解码，而不是再次对其进行编码。但是，当您进行此更改时，请确保从数据库中获取数据并将其放入 HTML 或 XML 的所有代码都知道它现在必须对实体进行编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T11:36:08.447

我不完全确定这里的问题是什么，但我想知道你为什么不使用[`json_encode()`](http://www.php.net/json_encode)来构建对象？

这将为您解决所有编码问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T11:32:05.730

好的，如果有人遇到同样的问题并且自己不会想出这个废话，解决方案很简单，PHP 函数 html_entity_decode 和 htmlspecialchars_decode 不会完全从特殊字符中剥离字符串，它只会从一个特殊字符中剥离，如果你有两个特殊的字符，你需要运行这个函数两次......例如这个字符串：
`O.S.T.R &amp;quot;Track #12&amp;quot;`

需要剥离两次，首先是 &，然后再剥离那些“-es”。

# c - C 中的递归练习

> ID：11281577
> 
> 赞同：6
> 
> 时间：2012-07-01T11:31:07.540
> 
> 标签：c, string, recursion

您将如何解决以下涉及递归的问题？

*使用原型实现一个函数，* `char *repeat(char *s, int n)` *以便它创建并返回一个字符串，该字符串由输入字符串 s 的*n*次重复组成。例如：如果输入是“Hello”和3，则输出是“HelloHelloHello”。仅使用递归构造。*

我的解决方案在我看来很丑陋，我正在寻找更清洁的东西。这是我的代码：

```
char *repeat(char *s, int n) {
  if(n==0) {
     char *ris = malloc(1);
     ris[0] = '\0';
     return ris;
  }
  int a = strlen(s);
  char *ris = malloc(n*a+1);
  char *ris_pre = repeat(s,n-1);
  strcpy(ris,ris_pre);
  strcpy(ris+(n-1)*a,s);
  free(ris_pre);
  return ris;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T08:46:43.273

一个更整洁和优雅的解决方案（我称之为**Basic Solution**）如下：

**基本解决方案**

```
char *internalRepeat(char *s, int n, size_t total)
{
    return (n > 0)
        ? strcat(internalRepeat(s, n - 1, total + strlen(s)), s)
        : strcpy(malloc(total + 1), "");
}

char *repeat(char *s, int n)
{
    return internalRepeat(s, n, 0);
} 
```

这就是递归的美妙之处。该解决方案的关键是使用递归来递增地构建结果的长度。参数`total`执行此操作（不包括 NUL 终止符）。当递归终止时，结果缓冲区被分配一次（包括 NUL 终止符），然后我们使用递归展开将每个副本附加`s`到结果中。基本解决方案的行为如下：

1.  为任意数量的空字符串重复返回一个长度为零的字符串。
2.  为非空字符串的零次或负次迭代返回一个长度为零的字符串。
3.  为非空字符串上的非零正数重复返回非零长度字符串。

如果基于上述函数创建程序，如下语句：

```
printf("Repeat \"\" 0 times: [%s]\n", repeat("", 0));
printf("Repeat \"\" 3 times: [%s]\n", repeat("", 3));
printf("Repeat \"abcde\" 0 times: [%s]\n", repeat("abcde", 0));
printf("Repeat \"abcde\" 1 times: [%s]\n", repeat("abcde", 1));
printf("Repeat \"abcde\" 4 times: [%s]\n", repeat("abcde", 4)); 
```

将产生以下输出：

```
Repeat "" 0 times: []
Repeat "" 3 times: []
Repeat "abcde" 0 times: []
Repeat "abcde" 1 times: [abcde]
Repeat "abcde" 4 times: [abcdeabcdeabcdeabcde] 
```

**编辑：优化解决方案如下。如果您对优化技术感兴趣，请继续阅读。**

* * *

这里的所有其他建议主要在**O( *n^2* )**中运行并在每次迭代时分配内存。尽管基本解决方案很优雅，只使用一个`malloc()`，并且只需要两个语句，但令人惊讶的是**基本解决方案也有 O( *n^2* )**的运行时间。如果字符串很长，这将使其效率非常低，这`s`意味着基本解决方案并不比此处的任何其他提议更有效。

**优化方案**

以下是实际运行在**O(** ***n*** **)中的该问题的***最佳*解决方案：

 *```
char *internalRepeat(char *s, int n, size_t total, size_t len)
{
    return (n > 0)
        ? strcpy(internalRepeat(s, n - 1, total, len), s) + len
        : strcpy(malloc(total + 1), "");
}

char *repeat(char *s, int n)
{
    int len = strlen(s);

    return internalRepeat(s, n, n * len, len) - (n * len);
} 
```

如您所见，它现在有三个语句并使用了一个参数`len`, 来缓存 的长度`s`。它递归地用于`len`计算结果缓冲区中第`n`'th 副本`s`将被定位的位置，因此允许我们替换`strcat()`为`strcpy()`每次`s`添加到结果中。这给出了O( *n ) 的***实际运行时间**，而不是 O( *n^2* )。

 ****基本解决方案和优化解决方案有什么区别？**

所有其他解决方案`strcat()`至少`n`在字符串上使用了多次以将副本`s`附加到结果中。这就是问题所在，因为实施隐藏了低效率。在内部，可以认为是：`n``s``strcat()``strcat()`

```
strcat = strlen + strcpy 
```

即，在追加时，您首先必须找到要追加的字符串的结尾，*然后*才能执行追加本身。这种隐藏的开销意味着，事实上，创建`n`字符串的副本需要`n`长度检查和`n`物理复制操作。然而，真正的问题在于，对于`s`我们追加的每个副本，我们的结果都会变长。这意味着结果中的每个连续长度检查*也*`strcat()`越来越长。如果我们现在以“*我们必须扫描或复印的次数*”作为比较的基础来比较这两种解决方案，我们可以看到两种解决方案的不同之处在哪里。**`s`**

 *对于`n`string 的副本`s`，基本解决方案执行如下：

```
strlen's/iteration: 2
strcpy's/iteration: 1

Iteration | Init | 1 | 2 | 3 | 4 | ... | n |   Total    |
----------+------+---+---+---+---+-----+---+------------+
Scan "s"  |   0  | 1 | 2 | 3 | 4 | ... | n | (n+1)(n/2) |
Copy "s"  |   0  | 1 | 1 | 1 | 1 | ... | 1 |     n      | 
```

而优化解决方案的执行方式如下：

```
strlen's/iteration: 0
strcpy's/iteration: 1

Iteration | Init | 1 | 2 | 3 | 4 | ... | n |    Total   |
----------+------+---+---+---+---+-----+---+------------+
Scan "s"  |   1  | 0 | 0 | 0 | 0 | ... | 0 |      1     |
Copy "s"  |   0  | 1 | 1 | 1 | 1 | ... | 1 |      n     | 
```

从表中可以看出，由于内置的​​长度检查，基本解决方案对我们的字符串执行 ( *n^2 + n)/2 次*`strcat()`扫描，而优化解决方案总是执行*(n + 1)*次扫描。这就是为什么基本解决方案（以及依赖 的所有其他解决方案`strcat()`）在*O(n^2)*中执行，而优化解决方案在*O(n)*中执行。

**O( *n* ) 与 O( *n^2* ) 相比如何？**

当使用大字符串时，运行时间会产生**巨大**的差异。例如，让我们以一个`s`1MB 的字符串为例，我们希望创建 1,000 个 (== 1GB) 的副本。如果我们有一个 1GHz CPU 可以扫描或复制 1 个字节/时钟周期，那么`s`将生成 1,000 个副本，如下所示：

*注意：**n**取自上面的性能表，表示**s**的单次扫描。*

```
Basic:  (n + 1) * (n / 2) + n = (n ^ 2) / 2 + (3n / 2)
                              = (10^3 ^ 2) / 2 + (3 * 10^3) / 2
                              = (5 * 10^5) + (1.5 * 10^2)
                              = ~(5 * 10^5) (scans of "s")
                              = ~(5 * 10^5 * 10^6) (bytes scanned/copied)
                              = ~500 seconds (@1GHz, 8 mins 20 secs).

Optimised: (n + 1)            = 10^3 + 1
                              = ~10^3 (scans of "s")
                              = ~10^3 * 10^6 (bytes scanned/copied)
                              = 1 second (@1Ghz) 
```

如您所见，几乎立即完成的优化解决方案将需要近 10 分钟才能完成的基本解决方案拆除。但是，如果您认为将字符串`s`变小会有所帮助，那么下一个结果会让您感到恐惧。同样，在处理 1 个字节/时钟周期的 1GHz 机器上，我们取`s`1KB（小 1000 倍），并制作 1,000,000 个副本（总计 == 1GB，与以前相同）。这给出了：

```
Basic:  (n + 1) * (n / 2) + n = (n ^ 2) / 2 + (3n / 2)
                              = (10^6 ^ 2) / 2 + (3 * 10^6) / 2
                              = (5 * 10^11) + (1.5 * 10^5)
                              = ~(5 * 10^11) (scans of "s")
                              = ~(5 * 10^11 * 10^3) (bytes scanned/copied)
                              = ~50,000 seconds (@1GHz, 833 mins)
                              = 13hrs, 53mins, 20 secs

Optimised: (n + 1)            = 10^6 + 1
                              = ~10^6 (scans of "s")
                              = ~10^6 * 10^3 (bytes scanned/copied)
                              = 1 second (@1Ghz) 
```

这是一个真正令人震惊的差异。优化解决方案的执行时间与以前相同，因为写入的数据总量相同。但是，基本解决方案在构建结果时会停滞**半天以上。***这是 O( n* ) 和 O( *n^2* )之间运行时间的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T11:45:01.390

尝试这种方法，您只分配一次字符串：

```
char *repeat(char *s, int n) {
   int srcLength = strlen(s);
   int destLength = srcLength * n + 1;      
   char *result = malloc(destLength);
   result[0] = '\0'; // This is for strcat calls to work properly

   return repeatInternal(s, result, n);
}

char *repeatInternal(char *s, char *result, int n) {
  if(n==0) {
     return result;
  }

  strcat(s, result);  
  return repeat(result, s, n-1);
} 
```

第二种重复方法只能由第一种使用。（第一个是你的原型方法）

注意：我没有编译/测试它，但这应该可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T11:55:58.317

这是一：

```
char *repeat (char *str, int n)
{
  char *ret_str, *new_str;

  if (n == 0)
  {
    ret_str = strdup ("");
    return ret_str;
  }
  ret_str = repeat (str, n-1);
  new_str = malloc (sizeof (char) * strlen (str) * (n + 1));
  new_str[0] = '\0';
  strcpy (new_str, ret_str);
  strcat (new_str, str);
  free (ret_str);
  return new_str;
} 
```

我们可以得到看起来更整洁的代码`realloc ()`

```
char *repeat (char *str, int n)
{
  char *ret_str;

  if (n == 0)
  {
    ret_str = strdup ("");
    return ret_str;
  }
  ret_str = repeat (str, n-1);
  ret_str = realloc (ret_str, sizeof (char) * strlen (str) * (n + 1));
  strcat (ret_str, str);
  return ret_str;
} 
```

**编辑 1**

好的，**这个更紧凑**。

```
char *repeat (char *str, int n)
{
  static char *ret_str;
  static int n_top = -1;

  if (n >= n_top)
    ret_str = calloc (sizeof (char), strlen (str) * n + 1);
  if (n <= 0)
    return ret_str;

  n_top = n;

  return strcat (repeat (str, n-1), str);
} 
```

我们使用一个静态缓冲区来保存最终字符串，因此在所有递归级别中都使用一个缓冲区。

保存来自递归调用`static int n_top`的前一个值的值。`n`当用 调用时，它被初始化`-1`以处理这种情况`n = 0`，因此它返回一个空字符串（并且用于`calloc`初始化 0）。因此，在第一次递归调用中，`-1`只有顶层的值才`n > n_top`为真（`n`总是递减），在这种情况下，整个缓冲区都被分配了`ret_str`。否则我们找到底部条件，也就是when`n`变为0。此时`n = 0`我们将预先分配的静态缓冲区的地址返回给`ret_str`递归树中的父调用者。然后，这个单个缓冲区被附加的每个递归级别使用`str`并移交到上一级，直到达到`main`.

**编辑 2**

**更紧凑的一个，但丑陋**

```
char *repeat (char *str, int n)
{
  static int n_top;
  n_top = (n_top == 0)? n: n_top;
  return (n <= 0)?(n=n_top,n_top=0,calloc (sizeof (char), strlen (str) * n + 1)):strcat (repeat (str, n-1), str);
} 
```

如果您使用 call with ，最后一个紧凑代码会出现问题`repeat (str, n); repeat (str, 0);`。这个实现克服了这个问题，而且它甚至更紧凑，也只使用一个函数。

请注意，有一个丑陋的`(n=n_top,n_top=0,calloc (sizeof (char), strlen (str) * n + 1))`. 在这里，我们确保在回滚时使用 的值`n_top`来分配内存，然后重置`n_top`为，`0`以便该函数在下一次调用或其他主调用者（非递归）中`n_top`设置为。这可以以更具可读性的方式完成，但这看起来很酷。我建议坚持使用更具可读性的内容。`0``main ()`

**编辑 3**

**疯子版**

这克服了重复`strlen ()`调用。`strlen ()`仅调用一次，然后使用字符串长度的值以及`n`当前深度中的值来查找`offset`指示返回的最终字符串结束的值（其地址不存储在任何中间变量中，只是返回并通过）。当将字符串传递给我们时，我们添加偏移量并通过从紧接的下一个深度添加到返回的答案字符串来`memcpy`提供源内存位置。这实际上在字符串结束后立即提供了位置，之后复制了length的东西。注意`memcpy``offset``memcpy``memcpy``str``str_len``memcpy`会返回它传递的目的地址，也就是这个深度的应答字符串结束地址，但是我们需要实际的开始，这是通过`offset`从这个返回值返回来实现的，这就是为什么`offset`在返回之前要减去。

请注意，这*仍然*使用单一功能：D

```
char *repeat (char *str, int n)
{
  static int n_top, str_len;
  int offset = 0;

  (n_top == 0)?(n_top = n,str_len = strlen (str)):(offset = str_len * (n_top-n));
  return (n <= 0)?(n=n_top,n_top=0,malloc (str_len * n + 1)):(memcpy (repeat (str, n-1) + offset, str, str_len) - offset);
} 
```

一些注意事项：

*   在这种情况下，我们可能已经完成`offset = str_len * (n-1)`了在第一个深度`str`中将在偏移量 0 中复制的情况，从随后的递归深度中，它会将字符串从反向复制到答案字符串。

*   这样做时，`memcpy`我们告诉它复制`n`字节，其中不包括`\0`. 但是当我们使用`calloc`为终止字符“\0”分配空间时，它被初始化为0。因此最终的字符串将以“\0”终止。

*   sizeof (char) 始终为 1

*   为了使它看起来更紧凑和神秘，删除`offset`计算并直接计算最后一个`return`表达式中的偏移量。

*   不要在现实生活中使用此代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T13:02:14.403

这是一个需要更多代码的解决方案，但它运行时间为 O(log n) 而不是 O(n)：

```
// Return a string containing 'n' copies of 's'
char *repeat(int n, char *s) {
  return concat((n-1) * strlen(s), strdup(s));
}

// Append 'charsToAdd' characters from 's' to 's', charsToAdd >= 0
char *concat(int charsToAdd, char *s) {
  int oldLen = strlen(s);
  if (charsToAdd <= n) {  // Copy only part of the original string.
    char *longerString = malloc((oldLen + charsToAdd + 1) * sizeof(char));
    strcpy(longerString, s);
    strncat(longerString, s, charsToAdd);
    return longerString;
  } else { // Duplicate s and recurse.
    char *longerString = malloc((2 * oldLen + 1) * sizeof(char));
    strcpy(longerString, s);
    strcat(longerString, s);
    free(s);  // Free the old string; the recusion will allocate a new one.
    return concat(charsToAdd - oldLen, longerString);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T08:44:10.703

一个可能的解决方案：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *repeat(char *s, int n)
{
    static char *sret=NULL;
    static int isnew=1;

    if (!s || !s[0])
    {
        if (sret) { free(sret); sret=NULL; }
        return "";
    }

    if (n<=0) return "";

    if (isnew)
    {
        int nbuf = strlen(s)*n + 1;
        sret = (char*)realloc(sret, nbuf);
        memset(sret, 0, nbuf);
        isnew=0;
    }

    strcat(sret,s);
    repeat(s, n-1);
    isnew = 1;
    return sret;
}

int main()
{
    char *s = repeat("Hello",50);
    printf("%s\n", s);

    s = repeat("Bye",50);
    printf("%s\n", s);

    repeat(NULL,0); /* this free's the static buffer in repeat() */

    s = repeat("so long and farewell",50);
    printf("%s\n", s);

    return 0;
} 
```

[编辑]
aps2012 解决方案的变体，它使用单个函数，但使用静态 int：

```
char *repeat(char *s, int n)
{
    static int t=0;
    return (n > 0) 
        ? (t += strlen(s),strcat(repeat(s, n - 1), s)) 
        : strcpy(malloc(t + 1), "");
} 
```

调用者必须`free()`返回字符串以避免内存泄漏。****

# php - MySQL - 获取每行的平均值

> ID：11281578
> 
> 赞同：2
> 
> 时间：2012-07-01T11:31:15.433
> 
> 标签：php, mysql, math

假设我有 3 个 MySQL 表。一个名为的歌曲数据库`songs`，其中包含歌曲的艺术家、专辑等。这里的主要`lastfm_id`内容是歌曲的唯一 ID。

然后是一个`list`（有 10 个位置，比如前 10 首歌曲）。人们可以通过将歌曲添加到他们的列表中来创建列表，并将它们从 1 到 10 排名。这个 db 并不需要为此被触及。

最后，我们有`song_listed`哪些歌曲是人们挑选的要放入列表的歌曲。这里 ti 是：

![在此处输入图像描述](../Images/29d00d19dc252e089d36c344c7e5a74d.png)

如您所见，`song_id`in与表中`song_listed`的相同。现在由于数据库中只有一个列表，因此有 10 首歌曲。如果创建了 3 个列表，则每个列表将有 30 行，它们自己的等级为 1-10。`lastfm_id``songs``song_listed`

我如何获得`song_listed`列表中每首歌曲的平均排名？

想象一下有一个页面显示一个列表 via`list.php?id=11912`或类似的东西。然后，您将从`song_listed`where is 获取`list_id`歌曲`11912`。

这是我到目前为止得到的：

```
$listSongs = 0;
while ($listSongs <= 9) {

    // Don't worry, I did a query and $songID[x] works.
    $songID = $songID[$listSongs]; // ex: 12949331
    $getAvgRank = mysql_query("") or die(mysql_error());

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T11:37:43.697

```
SELECT song_id, AVG(rank)
FROM song_listed
WHERE song_id in 
  (SELECT s1.song_id FROM song_listed s1 WHERE s1.list_id = <the id of your list_id>)
GROUP BY song_id 
```

**编辑**

如果你想要一个 song_id 的请求（这不是一个好主意，但是）

```
SELECT AVG(rank)
FROM song_listed
WHERE song_id = $songID[$realArray] 
```

注意：这只是“合乎逻辑”的解决方案。使用参数化查询（并阅读 Ben 对 mysql_* 函数的评论）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:57:29.430

我不认为平均排名可以为您提供正确的信息 - 想象一个列表中的 2 首歌曲 - 歌曲 A 出现在 2 个列表中，每次排名为 1，歌曲 B 出现在 200 个列表中，每次排名为 2 => 歌曲A 的平均排名为 1，歌曲 B 为 2，即使它更受欢迎

我建议您改用“受欢迎程度”指标（例如，排名 1 的 10 分 ...排名 10 的 1 分）：

```
select s.song_id, sum(11 - s.rank) popularity_points
from song_listed s
join song_listed l on s.song_id = l.song_id and l.list_id = :my_list_id
group by s.song_id 
```

# android - 是否可以强制软键盘在没有编辑文本的情况下显示？

> ID：11281582
> 
> 赞同：0
> 
> 时间：2012-07-01T11:31:50.253
> 
> 标签：android, android-softkeyboard

如果我有 EditText 可见，它工作正常，但是一旦我将它的可见性设置为 GONE 或 INVISIBLE，键盘不再显示，即使我在 main.xml 中声明了 edittext。那么甚至可以在没有编辑文本的情况下显示键盘吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:08:30.463

请注意，如果您在横向模式下工作，软输入将创建自己的文本输入字段，破坏您所有的辛勤工作。您可以防止这种行为：

```
// This makes us remain invisible when in landscape mode.
setImeOptions(EditorInfo.IME_FLAG_NO_EXTRACT_UI); 
```

现在，如果您设置了一个不可见的 EditText，它将保持原样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:36:09.177

您可以强制软键盘不使用edittext：

```
InputMethodManager im = (InputMethodManager)getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
im.showSoftInput(myView, InputMethodManager.SHOW_FORCED); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:41:09.160

干得好：

```
InputMethodManager inputMngr = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
inputMngr.showSoftInputFromInputMethod(windowToken, flags) 
```

**您可以通过调用view.getWindowToken()**在任何视图上获取窗口令牌。标志可以在 INputMethodManager 中找到。

警告：当您通过调用**inputMngr.hideSoftInputFromWindow(windowToken, flags)**完成输入后，您必须自己关闭键盘。

# javascript - 将图像加载一个

> ID：11281583
> 
> 赞同：1
> 
> 时间：2012-07-01T11:32:18.963
> 
> 标签：javascript, jquery

嗨，我正在尝试制作一个精美的照片库，在加载图像时会有一些动画可以显示它们，

问题是图像加载速度太快，以至于效果同时发生并且看起来不正确。

所以

我试图将它们排成一个数组并获取一个重复的脚本来一次显示一个。

我做了一个尝试，但它不起作用。

这是我到目前为止所做的。

```
<html>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" ></script>

<script>

$(document).ready(function() {

   $imagesloader = Array();

   $('.tile img').load(function() {
          $(this).css('display', 'none');
          $imagesloader.push(this);
    });

    setInterval(function(){ 

        if($imagesloader.lenght > 0)
        {
          $($imagesloader[0]).show('slide');
          $imagesloader.shift();

        }
    },500)

});

</script>

<style>

.tile {
background-color: #CCC;
margin: 5px 0px 0px 5px;
position: absolute;
overflow:hidden;
}

.tile img {
  width:100%;
  height:auto;
}

.h1 {height:125px;}
.h2 {height:255px;}

.w1 {width:190px;}
.w2 {width:385px;}

.t1 {top:0px;}
.t2 {top:130px;}
.t3 {top:260px;}
.t4 {top:390px;}

.l1 {left:0px;}
.l2 {left:195px;}
.l3 {left:390px;}
.l4 {left:585px;}

.container {
width: 980px;
background: #999;
height: 1000px;
position:relative;

}
</style>

<body>

    <div class="container">
        <div class="tile w2 h2 t1 l1">
           <img src="Penguins.jpg" />
        </div>
        <div class="tile w1 h1 t1 l3">
           <img  src="Chrysanthemum.jpg" />
        </div>
        <div class="tile w1 h1 t1 l4">
           <img  src="Desert.jpg" />
        </div>
        <div class="tile w2 h2 t2 l3">
             <img  src="Hydrangeas.jpg" />
        </div>
        <div class="tile w1 h1 t3 l1">
             <img  src="Jellyfish.jpg" />
        </div>
        <div class="tile w1 h1 t4 l1">
              <img  src="Koala.jpg" />
        </div>
        <div class="tile w1 h2 t3 l2">
              <img  src="Tulips.jpg" />
        </div>
        <div class="tile w1 h1 t4 l3">
              <img  src="Tulips.jpg" />
        </div>
        <div class="tile w1 h1 t4 l4">
              <img  src="Tulips.jpg" />
        </div>

    </div>

</body>
</html> 
```

# css - 带有垂直文本的 Twitter 选项卡

> ID：11281586
> 
> 赞同：1
> 
> 时间：2012-07-01T11:32:36.370
> 
> 标签：css, twitter-bootstrap, less

我`twitter-bootstrap`用于创建界面。但我不知道如何`tab-widget`用垂直文本创建。对于文本转换，我使用：

```
-moz-transform:rotate(270deg); 
-moz-transform-origin: bottom left;
-webkit-transform: rotate(270deg);
-webkit-transform-origin: bottom left;
-o-transform: rotate(270deg);
-o-transform-origin:  bottom left;
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-04T13:35:44.643

添加自定义类。

HTML：

```
<div class="letterP3">Hello</div> 
```

CSS：

```
.letterP3 {    
  -webkit-transform: rotate(90deg); 
     -moz-transform: rotate(90deg); 
      -ms-transform: rotate(90deg); 
       -o-transform: rotate(90deg); 
          transform: rotate(90deg);
            color: #000;
            font-size: 22px;                
            height: 200px;
            width: 200px;
            float: left;        
            vertical-align:top;    
} 
```

[http://jsfiddle.net/hellosze/8Rc27/](http://jsfiddle.net/hellosze/8Rc27/)

和 CSS3 工具：

[http://www.css3maker.com/text-rotation.html](http://www.css3maker.com/text-rotation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T18:04:40.497

@lito - 我在[这里](http://cdpn.io/itrqp)实现了左/右垂直引导选项卡- 使用您描述的文本旋转。希望这可以帮助。

# php - 使用正则表达式解析专有标签语法 - 如何检测嵌套标签？

> ID：11281587
> 
> 赞同：0
> 
> 时间：2012-07-01T11:32:46.930
> 
> 标签：php, regex

我想解析这样的东西：

```
Hi [{tagname:content}] [{tag1:xnkudfdhkfujhkdjki diidfo now nested tag
[{tag2: more data here}] kj udf}] 
```

我正在使用这个 PCRE 正则表达式来获取它们之间的所有数据`\[{(.*?)}\]`并且它可以工作，但不适用于嵌套标签。我不是 PCRE 专家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T14:08:40.877

与 Perl 一样，PCRE 可以将嵌套结构匹配到任意深度。这是一个经过测试的脚本：

## 正则表达式匹配嵌套括号

```
<?php // test.php Rev:20120701_0800
$re_nested_double_bracket ='% # Rev:20120701_0800
# Match [{...[{...}]...}] structure with arbitrary nesting.
\[\{                      # Opening literal double bracket.
(                         # $1: Contents of double brackets.
  (?:                     # Group for contents alternatives.
    [^\[\}]++             # Either one or more non-brackets,
  | (?R)                  # or a nested bracket pair,
  | \[                    # or the start of opening bracket
    (?!\{)                # (if not a complete open bracket),
  | \}                    # or the start of closing bracket
    (?!\])                # (if not a complete close bracket).
  )*                      # Zero or more contents alternatives.
)                         # End $1: Contents of double brackets.
\}\]                      # Closing literal double bracket.
%x';

$input = file_get_contents('testdata.txt');
$count = preg_match_all($re_nested_double_bracket, $input, $matches);
printf("There were %d matches found.\n", $count);
for ($i = 0; $i < $count; ++$i) {
    printf("  Match[%d]: %s\n", $i + 1,  $matches[0][$i]);
}
?> 
```

当针对原始帖子中的测试数据运行时，正则表达式匹配的内容如下：

## 示例输出：

`There were 2 matches found.`
`Match[1]: [{tagname:content}]`
`Match[2]: [{tag1:xnkudfdhkfujhkdjki diidfo now nested tag`
`[{tag2: more data here}] kj udf}]`

请注意，此正则表达式匹配*最外面*的一组可能嵌套的括号，并将`$1`括号之间的内容捕获到组中。如果您想解析任何嵌套的括号，则需要递归地对最外层括号的内容重新运行正则表达式，直到没有更多匹配项为止。

那些声称现代正则表达式引擎（即 Perl、PCRE/PHP、.NET）无法解析嵌套结构的人是完全错误的。正则表达式已经很久很久没有“常规”了......

**编辑：2012-07-01 09:00**请注意，此解决方案将嵌套括号匹配到任何“任意深度”，但始终受系统内存、可执行堆栈大小和 PHP以及`pcre.backtrack_limit`配置变量的限制。请注意，如果主题字符串太大和/或对于给定的主机系统嵌套太深，则此正则表达式解决方案肯定会失败。PHP/PCRE 库甚至可能导致正在运行的可执行文件产生堆栈溢出、分段错误和程序崩溃！有关如何以及为什么会发生这种情况（以及如何避免它并优雅地处理此类错误）的深入讨论，请参阅我对相关问题的回答： [Preg_match 函数中的 RegExp 返回浏览器错误](https://stackoverflow.com/a/7627962/433790)和 `pcre.recursion_limit``memory_limit`[PHP 正则表达式：这段代码有什么问题吗？](https://stackoverflow.com/a/5527831/433790).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T12:19:33.153

这是 REGEX 中的常见问题。正如巴克利所说，它们不是为此而设计的。尽管如此，问题还是出现了很多。

根本问题是 REGEX 无法知道嵌套标签的右括号实际上不是外部标签的右括号。

我决定做一些破坏行为并想出了这个恐怖。概念是先拉出不包含其他标签的标签。然后它向外工作，直到它拥有所有标签。

```
$str = "Hi [{tagname:content}] [{tag1:xnkudfdhkfujhkdjki diidfo now nested tag [{tag2: more data here}] kj udf}]";
$matches = array();
function replace_cb($this_match) {
    global $matches;
    $this_match = $this_match[0];
    foreach($matches as $index => $match) $this_match = str_replace('**'.($index + 1).'**', $match, $this_match);
    array_push($matches, $this_match);
    return '**'.count($matches).'**';
}
while(preg_match('/\[\{[^\[]*?\}\]/', $str)) $str = preg_replace_callback('/\[\{[^\[]*?\}\]/', 'replace_cb', $str);
print_r($matches); 
```

输出：

```
Array
(
    [0] => [{tagname:content}]
    [1] => [{tag2: more data here}]
    [2] => [{tag1:xnkudfdhkfujhkdjki diidfo now nested tag [{tag2: more data here}] kj udf}]
) 
```

...因此您最终将所有三个标签分开。

一个弱点是它当前决定一个标签是否包含嵌套标签，如果它包含一个`[`. 这应该`[{`在一起，但这很难，因为您不能在 REGEX 中否定子字符串，只能否定字符或字符范围。

所以，太可怕了。但它有效:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T12:28:44.997

**正则表达式不是解析器。**

对于轻量级解决方案，我建议您使用 JSON 解析器，例如，像这样：

```
$tree = json_decode('["root","'.
                    preg_replace('/\[\{(\w+):/',
                                 '",["\1","',
                                 str_replace(array('\\',   "\n", '"',  '}]'),
                                             array('\\\\', '\n', '\"', '"],"'),
                                             $str).
                    '"]')); 
```

对于此输入（您的示例）：

```
$str = 'Hi [{tagname:content}] [{tag1:xnkudfdhkfujhkdjki diidfo now nested tag
[{tag2: more data here}] kj udf}]'; 
```

你得到这个输出：

```
$tree = array(
   0 => "root",
   1 => "Hi ",
   2 => array(
      0 => "tagname",
      1 => "content"
   ),
   3 => " ",
   4 => array(
      0 => "tag1",
      1 => "xnkudfdhkfujhkdjki diidfo now nested tag\n",
      2 => array(
         0 => "tag2",
         1 => " more data here"
      ),
      3 => " kj udf"
   ),
   5 => ""
); 
```

标签名称是`0`每个子树的元素（我添加了一个任意`"root"`标签）。我假设标签名称是一个简单的`\w+`. 应该更改以反映允许的标签名称。如您所见，解析树中可能有额外的空字符串，但您可以轻松摆脱它们。

我知道，您的问题是关于 PCRE 的，但这有点像要求正确的锤子转动螺丝。

顺便说一句，建立在递归正则表达式引擎上的解析器有一个理论上的缺点，它可能变得非常现实：因为它们必须重新扫描每个输入元素的次数与其在树中的深度一样多，所以假设没有回溯，它们最坏情况的时间复杂度是 O(n ²）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T11:41:43.943

使用正则表达式允许无限嵌套时，没有通用的解决方案。他们不是为此而生的。

以下匹配由 [{ 和 }] 分隔的注释，允许内部嵌套一级注释。使用负前瞻代替 .*? 如果主题字符串包含不平衡的 [{ 字符，以防止灾难性的回溯。

```
\[{(?:(?!}]|\[{).)*+(?:\[{(?:(?!}]|\[{).)*+}](?:(?!}]|\[{).)*+)*+.*?}] 
```

# php - 如何在php中创建动态文本区域或文本字段

> ID：11281588
> 
> 赞同：-3
> 
> 时间：2012-07-01T11:32:56.527
> 
> 标签：php, html, textarea

我需要创建一个文本区域，用户可以在其中调整字体、颜色或使其变为粗体或斜体。就像 stackoverflow 中的此处或您可以在论坛上看到的那样。当我显示数据库的输出时，它将按原样显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:37:45.183

有很多基于 WYSIWYG/Markdown 的文本编辑器可用。这里有几个。

*   [引导程序-wysihtml5](http://jhollingworth.github.com/bootstrap-wysihtml5/)
*   [编辑器](http://redactorjs.com/)
*   [阿罗哈编辑](http://aloha-editor.org/)

另一个有用的资源：[10 个功能丰富的 Javascript 所见即所得和富文本编辑器](http://www.queness.com/post/10363/10-feature-packed-javascript-wysiwyg-and-rich-text-editors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:45:40.673

另一个非常简单的，如果你不喜欢其他的是 nicedit.com

# ruby-on-rails - Ruby - 如何解析数组中的日期

> ID：11281593
> 
> 赞同：2
> 
> 时间：2012-07-01T11:34:06.760
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, activerecord

我有一个 Rails ActiveRecord 组查询：

```
a = Product.select("date(date) as date, count(id) as products").group("date(date)").to_a 
```

我想更改数组中所有日期的格式。我认为它会是这样的：

```
a.map { |s, i| [Date.parse(s).to_time.strftime("%Y-%m-%dT%H:%M:%S"), i] } 
```

但是，我收到一个`can't convert Product into String`错误。如何解析数组中的日期并更改其格式？

**编辑：**

这是我正在寻找的输出示例。

鉴于此表：

```
 create_table :products do |t|
       t.date :date
 end 
```

最终，我想根据上面的组查询创建一个 json 输出。就像是：

```
 [{"products":23,"date":"2012-06-15T00:00:00"}, {"products":26,"date":"2012-06-16T00:00:00"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:42:01.437

尝试这个：

```
a.map { |s, i| [Date.parse(s.date).to_time.strftime("%Y-%m-%dT%H:%M:%S"), i] } 
```

`Product`您的查询返回一个包含两个假字段`date`和的对象数组`products`（与 SQL 查询中的相同）。要获取日期，您应该调用`s.date`返回数组的元素。

**编辑**

要获得所需的数组，您可以执行以下操作：

```
query_result = Product.select("date(date) as date, count(id) as products").group("date(date)")

query_result.map do |row| 
  { :products => row.products, :date => Date.parse(row.date).to_time.strftime("%Y-%m-%dT%H:%M:%S") }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:10:26.797

为什么不将 ActiveRecord::Relation 序列化为 JSON ( `a.to_json`) 并让 JSON 序列化程序处理日期格式？

```
Product.select("date(date) as date, count(id) as products").
  group("date(date)").to_json 
```

# c# - 在表单加载时通知图标

> ID：11281594
> 
> 赞同：-1
> 
> 时间：2012-07-01T11:34:07.893
> 
> 标签：c#, winforms, notifyicon

我的 C# 应用程序中有许多表单。我只在第一个表单上使用 notifyIcon 。我面临的问题是，当我加载其他表单（在运行时）时，它们也会在系统托盘中创建 notifyIcons。

注意：只有两种形式会导致此问题。

请告诉我如何避免它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:01:15.553

我在“属性窗口”（用于 notifyIcon）下将可见属性设置为“假”，然后在表单加载事件中将其设置为“真”。问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:42:43.013

如果您有 1 个形式较少的进程而不是使用 1 个 notifyIcon 实例或它们的数量并且不显示更多 1 notifyIcon

如果您有 2 个或更多流程 - 您有问题 =)

# android - 如何从其他视图的事件中访问视图（视图位于布局层次结构的不同分支中）？

> ID：11281598
> 
> 赞同：1
> 
> 时间：2012-07-01T11:34:34.377
> 
> 标签：android, sorting, onclick, android-activity

让我们举一个像下面这样的例子：

```
package xliiv.sandbox;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.LinearLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class Double_tablesActivity extends Activity {

    static final String TAG = "MAIN";
    LinearLayout lay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout lay = new LinearLayout(this);
        this.lay = lay;

        for(int i=0; i<2; i++) {
            boolean heading =  (i == 0) ? true: false; 
            add_table(heading, "" + i);
        }

        this.lay.setOrientation(1);
        setContentView(lay);

    }

    public void add_table(boolean heading, String text) {
        TableLayout t = new TableLayout(this);
        TableRow tr = new TableRow(this);
        TextView tv = new TextView(this);

        tv.setText(text);

        if (heading == true) {
            tv.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    TextView tv = (TextView) v;
                    Log.i(TAG, "onclick: " + tv.getText());

                    //TODO: sort 2nd table denpends on which col of first table was clicked
                    //??
                }
            });
        }

        tr.addView(tv);
        t.addView(tr);
        lay.addView(t);

    }
} 
```

我想对第二个表进行排序取决于在第一个表中单击了哪个列？假设有一个方法 table.sort(col).. 我找到了 getRootView()，所以我可以使用它并转到第二个表，但必须有更好的方法，而不是手动搜索..

**更新**

在 midoalageb 的回答之后，这里是上层代码的工作版本：

```
package xliiv.sandbox;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.LinearLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class Double_tablesActivity extends Activity {

    static final String TAG = "MAIN";
    LinearLayout lay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout lay = new LinearLayout(this);
        this.lay = lay;

        for(int i=0; i<2; i++) {
            boolean heading =  (i == 0) ? true: false; 
            add_table(heading, "" + i);
            flipper.setTag("tag" + i);
        }

        this.lay.setOrientation(1);
        setContentView(lay);

    }

    public void add_table(boolean heading, String text) {
        TableLayout t = new TableLayout(this);
        TableRow tr = new TableRow(this);
        TextView tv = new TextView(this);

        tv.setText(text);

        if (heading == true) {
            tv.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    View root = (View) getRootView();
                    View view_by_tag = (View) root.findViewWithTag("tag2");                 
                    Log.i(TAG, "found table: " + flipper);
                }
            });
        }

        tr.addView(tv);
        t.addView(tr);
        lay.addView(t);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:28:31.230

由于您从数据库中填充表，因此更好的实现是将您的第二个表替换为 a`ListView`并使用 a`SimpleCursorAdapter`来填充它。

```
SimpleCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to) 
```

每次在第一个表中按下一个键，`Cursor`使用`SimpleCursorAdapter`相关的`ORDER BY`SQL 查询重新查询。

**更新：**如果您不想更改布局，可以`View.SetTag`在填充数据时为您的列提供唯一标签，然后在`OnClickListener`第一个表中，使用`View.FindViewWithTag`找到第二个表的列，然后使用你的排序方法来排序这个表。

# java - 在 Swing 的按钮组中添加单选按钮时出错

> ID：11281605
> 
> 赞同：2
> 
> 时间：2012-07-01T11:35:08.760
> 
> 标签：java, swing, compiler-errors, jradiobutton, buttongroup

我想将 AWT 中的代码转换为 Java 中的 Swing。

```
 ButtonGroup group1=new ButtonGroup();
JRadioButton radio1=new JRadioButton("Brute Force Technique",true);
JRadioButton radio2=new JRadioButton("Simulated Annealing Technique",false);
     //ButtonGroup group1 = new ButtonGroup();
     group1.add( radio1 );
group1.add(radio2); 
```

但是这些行显示错误。

```
group1.add(radio1); 
and group1.add(radio2) ; 
```

错误是：

```
error:package group1 does not exist <identifier> expected 
```

我在 Netbeans IDE 7.1.2 中工作。我是 Java 新手。谁能建议我的代码中有什么问题？

我用 AWT 编写的完整代码并将其转换为 Swing 在这里： [travellingsalesmanproblem.java](http://codes-at-igit.weebly.com/uploads/1/2/2/7/12272842/travellingsalesmanproblem.java)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:41:45.290

这样的操作应该在块中调用，而不是在类字段声明部分中。`{` `}`也许将它移动到构造函数或用like包围它

```
public class TravellingSalesmanProblem extends JApplet implements ActionListener {
    ...

    ButtonGroup group1 = new ButtonGroup();
    JRadioButton radio1Button=new JRadioButton("Brute Force Technique",true);
    JRadioButton radio2Button=new JRadioButton("Simulated Annealing Technique",false);
    {
        group1.add(radio1Button);
        group1.add(radio2Button);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T11:43:54.040

**创建一个方法**...并在其中执行此操作...或**用 {} 包围“添加”**

例如：

```
 ButtonGroup group1=new ButtonGroup();
     JRadioButton radio1=new JRadioButton("Brute Force Technique",true);
     JRadioButton radio2=new JRadioButton("Simulated Annealing Technique",false);

    public void go()
{

     group1.add( radio1 );
     group1.add(radio2);

} 
```

**或者**

```
 ButtonGroup group1=new ButtonGroup();
     JRadioButton radio1=new JRadioButton("Brute Force Technique",true);
     JRadioButton radio2=new JRadioButton("Simulated Annealing Technique",false);

     {

            group1.add( radio1 );
            group1.add(radio2);
     } 
```

# asp.net - 使用设计器从数据库更新模型时保留实体类属性的任何方式

> ID：11281616
> 
> 赞同：1
> 
> 时间：2012-07-01T11:37:18.367
> 
> 标签：asp.net, entity-framework, entity-framework-4, objectcontext

通过 ObjectContext 使用 ASP.NET 4 和实体框架 4.3.1。

每当我从数据库更新/刷新模型时，任何设置的属性属性（即`[AllowHtml]`在一个或多个实体类中的属性上）都会消失，因为该过程完全重建了它看起来的实体模型的所有类。

此外，当尝试通过设计器添加简单的标量属性时，表映射不是自动创建的，我无法创建它们，让我唯一的选择是首先将此属性添加到底层数据库，然后运行更新/刷新模型向导。是否可以添加表映射？如果不是，为什么这个功能甚至包含在设计器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:06:14.770

自动生成代码的第一条规则：您不能修改它，因为每次设计器再次运行自动生成时，您的修改都会丢失 - 自动生成无法检测到您的更改。它负责为您当前的模型生成正确的代码，因此它将始终从头开始创建所有代码并删除旧代码。

表映射不会自动创建。Designer 支持两种建模方法。

*   数据库优先 - 您修改数据库并从数据库运行更新模型以在设计器中获取修改和相关映射
*   模型优先 - 您修改模型并从模型运行生成数据库以获取用于创建数据库的 SQL 脚本

您应该只使用一种方法。

如果要使用属性标记实体，则不得使用自动生成的代码。您必须手动创建和维护您的类。在验证的情况下（使用数据注释），您可以使用[伙伴类](https://stackoverflow.com/questions/2999936/using-dataannotations-with-entity-framework)，但可能不是您的情况。

# java - Android：从特定目录扫描音乐文件？

> ID：11281617
> 
> 赞同：2
> 
> 时间：2012-07-01T11:37:18.790
> 
> 标签：java, android

我希望我的应用程序仅在我在首选项中指定的那些文件夹中扫描音乐文件。这样就不会包含有声读物等其他音乐文件。

目前，我已经编写了这段代码，用于扫描所有音乐文件：

```
private String[] getTrackList() {
        String[] result = null;
        String[] projection = { MediaStore.Audio.Media._ID,
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.TITLE };
        String selection = MediaStore.Audio.Media.IS_MUSIC + "!=" + 0;
        cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                projection, selection, null, MediaStore.Audio.Media.TITLE
                        + " ASC");
        result = new String[cursor.getCount()];
        int position = 0;
        for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
            columnIndex = cursor
                    .getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE);
            result[position] = cursor.getString(columnIndex);
            position++;
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:21:11.373

查看类似问题的答案（虽然它适用于图像，但同样的想法也适用于音频）：

[从 mediastore 的 URI 获取文件名和路径](https://stackoverflow.com/questions/3401579/get-filename-and-path-from-uri-from-mediastore)

看起来 DATA 存储文件路径。我认为如果您使用该`MediaStore.Audio.Media.DATA`列作为 where 子句的一部分，您可以只返回所需目录中的音频文件。

# wcf - 使用 byte[] 传输类时错误 TCP DUP ACK 和其他使用 tcp 流式传输的

> ID：11281626
> 
> 赞同：0
> 
> 时间：2012-07-01T11:38:20.483
> 
> 标签：wcf, tcp

我有一个 WCF 服务，在一种方法中，我使用一个具有字节 [] 的类作为参数。当我使用这种方法时，如果客户端与服务在同一台计算机上，一切正常，但如果客户端在另一台计算机上，我会遇到一些问题。

例如，如果我使用 winshark，我会收到以下错误：

*   另一个错误是“TCP dup ACK 61#1”。

*   TCP重传。好吧，我认为这是一个错误，因为它是红色的。

*   TCP 故障。

*   TCP 快速重传。这是红色的，所以我认为这是另一个错误。

谢谢。

# mysql - OS X Lion 与 xampp + rails + mysql2 gem

> ID：11281628
> 
> 赞同：1
> 
> 时间：2012-07-01T11:38:31.890
> 
> 标签：mysql, ruby, ruby-on-rails-3, xampp, mysql2

我一直在试图弄清楚如何让 OS X Lion 与 XAMPP 安装的 MySQL 一起使用 rails 中的 mysql2 gem。

这是我尝试过的：

*   安装了 XAMPP 开发工具包
*   安装了带有端口和 brew 的 mysql5-server。这两个我现在都卸载了。因为它没有解决问题。
*   从 DMG 文件安装 mysql5 社区版。现在卸载了，因为它没有解决问题。
*   以 tar 格式下载了 mysql5 社区版的 32 位版本。提取文件夹到“/var/mysql”

这是我正在运行以尝试安装它的命令：

```
gem install mysql2 -- --with-mysql-dir=/var/mysql --with-mysql-include=
/var/mysql/include --with-mysql-lib=/var/mysql/lib --with-mysql-config=
/Applications/XAMPP/xamppfiles/bin/mysql_config 
```

我不知道如何让它发挥作用。我能想到的唯一一件事是我以某种方式没有正确指向目录。我尝试从 with-mysql-include、with-mysql-dir 和 with-mysql-lib 配置选项中删除 /include/、/mysql/ 和 /lib/。没有运气。我已经尝试将它们指向 XAMPP 安装。还是没有运气。

返回的错误是：

```
ERROR: Error installing mysql2:
ERROR: Failed to build gem native extension.

/Users/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb --with-mysql-dir=/var/mysql --with-mysql-include=/var/mysql/include --with-mysql-lib=/var/mysql --with-mysql-config=/Applications/XAMPP/xamppfiles/bin/mysql_config
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql.h... no
checking for mysql/mysql.h... no
-----
mysql.h is missing.  please check your installation of mysql and try again.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-mysql-config

Gem files will remain installed in /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11 for inspection.
Results logged to /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/mysql2-0.3.11/ext/mysql2/gem_make.out 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T18:24:56.503

最好不要打扰 XAMPP 提供的东西，而只需安装一个新的 MySQL 副本，并简化安装 mysql2 的 Gem 命令：

```
brew install mysql
gem install mysql2 
```

由于这一切，您在通过 Homebrew 安装 MySQL 后安装 gem 时遇到错误：

```
--with-mysql-dir=/var/mysql --with-mysql-include= \
/var/mysql/include --with-mysql-lib=/var/mysql/lib --with-mysql-config= \
/Applications/XAMPP/xamppfiles/bin/mysql_config 
```

所以删除它可以解决问题。

# android - 使用android从mysql检查值

> ID：11281630
> 
> 赞同：0
> 
> 时间：2012-07-01T11:38:44.290
> 
> 标签：android, mysql

我有一个表，其中有一个名为 的字段`Sold`，在该字段中我存储 0 和 1。所以 1 表示已售出，0 表示可用。

K，我的问题是，当我将信息显示到我的模拟器中时，我想将 0 更改为可用，将 1 更改为已售出，这是我尝试过的，但即使我的数据库中有 0，它也会返回已售出：

```
if (sold.length()==0){

    Log.d("checking","Inside = 0");

    val = "Available";}

    else if (sold.length()>0)

        Log.d("checking","Inside = 1");
        val = "Sold 
```

并且**已售出**包含来自数据库的值。

请帮助将 0 更改为可用，将 1 更改为已售。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:43:32.897

```
if(sold.equalIgnoreCase("0"))
{
   Log.d("checking","Inside = 0");
}else
{
   Log.d("checking","Inside = 1");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T11:44:27.430

您拥有的 sold.length 是您正在使用的字符串表示“已售出”的实际长度。这意味着如果你有“一些”这个词，这个 .length() 等于 4。

因此，在您的代码段中，sold 变量分别是“0”或“1”，因此 sold.length() 始终等于 1。尝试将 String 变量转换为 Integer 并进行比较，或者更好地尝试制作变量从一开始就变成整数。

# objective-c - 使用 Storyboard 从任何视图执行 segue 到初始视图

> ID：11281631
> 
> 赞同：2
> 
> 时间：2012-07-01T11:38:47.087
> 
> 标签：objective-c, ios, login, storyboard

我正在使用 Storyboards 开发一个应用程序。此应用程序要求用户登录。

故事*板*初始时有一个登录视图。当登录正常时，​​它对*TabViewController*执行 segue 。

在对 API 的任何调用中，我都会检查服务器是否返回 401（未授权）。如果发生这种情况，则将布尔值设置为 false（布尔 isLogged）。AppDelegate 观察这个布尔值。如果值更改为 false，我想将用户返回到登录屏幕（请记住，故事板上的初始视图）。

这是一些代码：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

if ([keyPath isEqualToString:@"isLogged"]) {
    BOOL logged = [[change objectForKey:NSKeyValueChangeNewKey] boolValue];
    if (logged) {
        NSLog(@"Logged in succesfully!");
    } else {
        NSLog(@"Logout performed");

        [self.window makeKeyAndVisible];
        [self.window layoutSubviews];

    }

} 
```

这工作正常，但是当我尝试再次登录*LoginOK* segue 时没有执行。

我尝试了许多其他选项，例如：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

UIViewController *loginController = [storyboard instantiateViewControllerWithIdentifier:@"Login"];

[source presentModalViewController:loginController animated:YES]; 
```

但问题是我不知道哪个 View Controller 执行了注销。源必须是应用程序中显示的当前视图控制器，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T18:11:37.687

我想我会和你分享这个相当随机的想法。

如果您没有将登录屏幕作为视图层次结构中的重要步骤，而是在应用程序状态需要登录时立即**从任何普通视图控制器**以模态方式呈现它会怎样。这就是模态视图控制器的用途 - 不让用户恢复正常流程，直到满足某些明确的先决条件。

通过这样做，您不必担心将整个导航堆栈展开到初始控制器。保存状态也容易得多，因为一旦成功执行身份验证，用户应该能够恢复她的正常工作流程，而不是重新开始。

只是一个想法。

**更新#1：**

一种选择是使用自定义通知来携带*登录是必需*的状态。您必须让所有视图控制器都观察通知，而当前可见的视图控制器将执行模态视图控制器的呈现。

您可以使用[从这里借来的](https://stackoverflow.com/questions/2777438/how-to-tell-if-uiviewcontrollers-view-is-visible)代码来检查视图控制器实例是否可见：

```
if (viewController.isViewLoaded && viewController.view.window) {
    // viewController is visible
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T23:15:25.367

最后，我解决了将*isLogged*的​​观察者从 App Delegate 更改为我的自定义*TabViewController*的问题。在*viewDidLoad*我订阅了这个 var。

在方法*observeValueForKeyPath*我执行以下操作：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

LoginViewController *loginController = [storyboard instantiateViewControllerWithIdentifier:@"Login"];

[self presentModalViewController:loginController animated:YES]; 
```

# javascript - 使用 CSS 覆盖通过 JS 添加的内联样式

> ID：11281633
> 
> 赞同：8
> 
> 时间：2012-07-01T11:39:10.733
> 
> 标签：javascript, html, css, inline-styles

一个 js 插件正在添加一个让我有些头疼的样式：

```
element.style {
     z-index: 100 !important;
} 
```

所以我试过这个：

```
html body div#shell div#shellContent div#bottomPart div#rightCol div.containerBox    
div#embedContainer div#janrainEngageEmbed div.janrainContent div#janrainView   
div.janrainHeader[style] {
    z-index: 1 !important;
} 
```

仍然没有。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T16:13:27.770

与其他答案相反，可以使用 CSS 覆盖内联样式：

[http://css-tricks.com/override-inline-styles-with-css/](http://css-tricks.com/override-inline-styles-with-css/)

我猜想极长的选择器可能没有击中元素。

我在 Janrain 插件中遇到了类似的 z-index 问题，已通过以下方式解决：

```
#janrainEngageEmbed > div[style] {
    z-index: 0;
} 
```

在您的情况下，您可能需要：

```
 z-index: 0 !important; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T11:43:24.167

内联样式将胜过任何选择器。要么自己在 javascript 中重置样式，要么修补插件......老实说，无论如何，这听起来并不像写得特别好。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T11:43:52.810

内联样式总是覆盖外部和内部 css，加上插件使用子句的事实`!important`（非常糟糕的做法！），所有这些都使得仅使用 css 修复它是不可能的。我认为您将不得不使用一些自定义 js 来覆盖插件设置。

也许最好的方法是检查您是否可以使用插件指定回调函数并根据需要设置样式。此处的另一个答案建议编辑插件本身，如果您不打算更新它，那很酷 - 否则您最好保留插件代码，只需添加一些您自己的定制 js

# android - Android 点对点连接

> ID：11281634
> 
> 赞同：0
> 
> 时间：2012-07-01T11:39:17.783
> 
> 标签：android, gprs, ijetty

我需要通过 gprs 通道在运行 i-jetty 网络服务器的两部安卓手机之间建立点对点连接。但是许多移动运营商阻止了与手机的入站连接。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:54:31.160

NAT 穿透非常复杂，在您非常熟悉网络的内部结构之前，您真的不应该弄乱它。[pwnat](http://samy.pl/pwnat/)使用的[自主 NAT 遍历](http://samy.pl/pwnat/pwnat.pdf)几乎是当今最先进的技术。

基本思想是利用路由器可能具有任何 IP 地址的事实，并且就 NAT 所知，任何源 IP 地址对于 ICMP 错误消息都是有效的，NAT 会将其转发给其客户端。

请注意，您通常只能通过 UDP。所以你必须实现你自己的字节流协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T22:10:51.017

一般来说，让两部手机互相通话的最可靠方法是使用 C2DM（或 GCM，现在）。也许您可以让设备使用 C2DM 交换它们的 IP 地址（顺便说一句，如果它的地址位于路由器或防火墙后面且端口被阻止，那么这可能对您一无所获）。您还可以根据应用程序的需要使用 SMS。

通常会涉及到你的服务器——额外的开发——但是对于短消息，我不明白为什么一个设备不能通过 C2DM 直接发布到另一个设备。（这是一个未经测试的声明，请注意。）

# android - 在 Android 上更新 XML 文件

> ID：11281636
> 
> 赞同：0
> 
> 时间：2012-07-01T11:39:27.987
> 
> 标签：android

我在为 Android 开发方面还很陌生，希望能得到一些帮助。

首先，简要介绍一下我要实现的目标。

在我正在开发的应用程序中，用户可以为他开始的每个新项目创建一个项目配置文件。我已经创建了代码来为存储在 SD 卡上的每个新项目创建一个新的 XML 文件。

现在我想在主屏幕上创建一个各种项目的列表供用户选择，但我不是 100% 确定如何去做。我的第一个想法是创建一个名为的 XML 文件`Projects List`，其中列出了所有已创建的项目。但我似乎无法在每次创建新项目时找到更新 XML 文件的方法，这就是我寻求帮助的地方。

有人可以帮我了解如何更新 XML 文件吗？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:59:21.993

> 我的第一个想法是创建一个名为 Projects List 的 XML 文件，其中列出了所有已创建的项目。

与其这样做，为什么不简单地查看创建了多少个 xml 文件（对应于创建的项目）？我假设，现在，您将这些项目保存在您创建的文件夹中，`SD Card`因此当需要向用户显示该信息时，只需检查您的项目文件夹，看看有多少（获取名称，获取参考到这些 xml 文件，以便您可以在用户操作等时打开它们）并将它们呈现给用户。

这将比实现每次用户对项目进行一些更改时更新 xml 的逻辑要简单得多，更不用说当您的应用程序未运行时用户可能会删除这些 xml 文件的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:20:12.590

我会做以下事情。

用户创建一些项目 - 对于每个项目，您都有一个 xml 文件。

您检查所有 xml 文件 - 从每个文件中获取一些信息，然后构建一个 ListView ： [Android listview 示例](http://www.mkyong.com/android/android-listview-example/)

从这里您可以创建一个自定义适配器，该适配器将努力从每个 XML 文件中找出您需要的信息，然后当用户单击“浏览项目按钮”时，他们可以在列表视图中看到所有项目？

# java - Matlab-Java 接口，Java 版本冲突

> ID：11281637
> 
> 赞同：1
> 
> 时间：2012-07-01T11:39:28.627
> 
> 标签：java, matlab, matlab-deployment

我使用 Matlab 部署工具将 matlab 代码构建到 java 项目中。我在使用 Matlab-Java 接口时遇到了一些问题，运行 java 代码时出现的错误是：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：无法在 java.library.path 上找到 MATLAB Builder JA 所需的库 mclmcrrt7_15.dll。此库通常与 MATLAB 或 MCR 一起安装，它的缺失可能表明该安装或当前路径配置存在问题。此组件尝试使用的 MCR 版本是：7.15。

当我在 Matlab 控制台中输入“version -java”时，答案是 Java 1.6.0_17-b04。因此，我将系统设置中的路径更改为 ...\Files\Java\jdk1.6.0_33\bin 但由于我安装了 Java 版本 7，它没有使用版本 6。在命令提示符下查看java和javac的版本，发现javac的版本是1.6，而java的版本是1.7。我还创建了一个 CLASSPATH 环境变量和一个 JAVAHOME 变量并将其设置为 1.6。你能告诉我如何将系统使用的java版本更改为1.6，以便matlab可以与之交互吗？

我认为这是问题所在，但我只是从错误消息中猜测。如果问题是其他问题，请告诉我，而不仅仅是 java 版本的不兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:17:28.940

DLL`mclmcrrt7_15.dll`在`PATH`任何地方吗？

为了让 Java 能够加载 DLL，DLL 需要位于`java.library.path`系统属性中列出的文件夹中。Windows 上此属性的默认值是`PATH`环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T07:34:12.740

只需在我的机器上修复相同的错误。就我而言，它是通过将`MATLAB`路径添加到`SYSTEM`环境变量中来修复的：

加入`PATH`

```
-C:\Program Files\MATLAB\R2011a\bin;
-C:\Program Files\MATLAB\R2011a\runtime\win64 
```

希望它是有帮助的。

# android - 单独线程上的同步 HttpPost

> ID：11281650
> 
> 赞同：0
> 
> 时间：2012-07-01T11:42:42.247
> 
> 标签：android

我目前使用扩展的类将一些数据发布到 php webservice `AsyncTask`。

现在我需要进行同步调用，因为我想显示我的应用程序在发送数据后崩溃的默认异常弹出窗口（`previousHandler.uncaughtException(t, e)`）。

我可以禁用上的异步功能`AsyncTask`吗，或者您有其他建议吗？

这是我当前的代码，在此先感谢：

```
public void uncaughtException(Thread t, Throwable e) {

    final Writer result = new StringWriter();
    final PrintWriter printWriter = new PrintWriter(result);
    e.printStackTrace(printWriter);
    String stacktrace = result.toString();
    printWriter.close();

    String deviceUuid = Utilities.DeviceUuid(ctx, cr);
    String bluetoothName = Utilities.LocalBluetoothName();

    AsyncTasks.ErrorLogTask logTask = new AsyncTasks.ErrorLogTask(e, bluetoothName, deviceUuid, stacktrace);
    logTask.execute();

    //task wont be complete before this code below runs since its async.

    previousHandler.uncaughtException(t, e);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:11:57.793

我认为您仍然需要捕获异常。我会将调用保留在您的 AsyncTask 中，但会捕获异常。要么使用标志作为返回值，`doInBackground`要么创建 AsyncTask 的本地变量以用作标志，并`onPostExecute`检查标志并在必要时显示对话框。

通常，由于存在 ANR 的风险，您不想在主 UI 线程上进行服务器调用。请参阅有关它们的这篇文章：http: [//developer.android.com/guide/practices/responsiveness.html](http://developer.android.com/guide/practices/responsiveness.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:15:20.920

将您的默认异常弹出窗口放入`onPostExecute()`. `ErrorLogTask`当您的任务完成时，该块在主线程中执行。

# ruby-on-rails-3 - 如何在erb文件中显示文本？

> ID：11281653
> 
> 赞同：2
> 
> 时间：2012-07-01T11:43:05.067
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, textfield, erb, disabled-input

我一周前开始使用rails，我想知道如何使用erb文件显示不可修改的文本， <%= f.label :email %> <%= f.text_field :email %> 这里，而不是文本框，我需要一个显示电子邮件 ID 的简单文本。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:50:41.180

```
<%= @your_model.email %> 
```

但更准确地说，您必须显示您的视图代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:13:08.030

通过文本字段中的“不可修改的文本”，我假设您不仅希望将电子邮件显示在屏幕上（如果是这样，那么 Yuri Barbashov 是正确的）而且还希望它在输入文本字段中，但不可修改.

在这种情况下，您最好使用 javascript。查看一些 JQuery 示例的[StackOverflow 答案](https://stackoverflow.com/a/1414366/567863)。

**编辑：**

实际上，如果您从不打算重新启用文本字段，[这里的解决方案可能会更容易：](https://stackoverflow.com/a/11270165/567863)

```
<%= f.text_field :email, disabled: true %> 
```

# java - jsp中的jfreechart

> ID：11281656
> 
> 赞同：1
> 
> 时间：2012-07-01T11:43:22.383
> 
> 标签：java, jfreechart

我想使用 jfree 图表在 jsp 中创建一个饼图，我正在使用此代码

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<%@ page  import="java.awt.*" %>
<%@ page  import="java.io.*" %>
<%@ page  import="org.jfree.chart.*" %>
<%@ page  import="org.jfree.chart.entity.*" %>
<%@ page  import ="org.jfree.data.general.*"%>
<%
  final DefaultPieDataset data = new DefaultPieDataset();
  data.setValue("One", new Double(43.2));
  data.setValue("Two", new Double(10.0));
  data.setValue("Three", new Double(27.5));
  data.setValue("Four", new Double(17.5));
  data.setValue("Five", new Double(11.0));
  data.setValue("Six", new Double(19.4));

  JFreeChart chart = ChartFactory.createPieChart
  ("Pie Chart ", data, true, true, false);

 try {
 final ChartRenderingInfo info = new 
  ChartRenderingInfo(new StandardEntityCollection());

  final File file1 = new File("../webapps/jspchart/
  web/piechart.png");
  ChartUtilities.saveChartAsPNG(
   file1, chart, 600, 400, info);
  } catch (Exception e) {
  out.println(e);
  }
%>
<html>
  <head>
  <meta http-equiv="Content-Type" 
  content="text/html; charset=UTF-8">
  <title>JSP Page</title>
  </head>
  <body>
  <IMG SRC="piechart.png" WIDTH="600" HEIGHT="400" 
   BORDER="0" USEMAP="#chart">
  </body>
</html> 
```

问题是我收到此异常“java.io.FileNotFoundException：../webapps/jspchart/web/piechart.png（没有这样的文件或目录）”

有什么想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:59:59.843

异常清楚地说“ `java.io.FileNotFoundException: ../webapps/jspchart/web/piechart.png (No such file or directory)`”

这里**piechart.png** ( `../webapps/jspchart/web/piechart.png`) 或**web**目录不存在。

验证这些信息并修复它。

修复可以是：-

1.  `Web`在文件夹下创建文件`jspchart`夹或
2.  将`piechart.png`文件放在`Web`文件夹下

然后尝试再次编译并运行应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:55:05.333

我明白了。实际上我需要饼图从数据库中获取值。数据库的第一列是名称，第二列是它的值。代码是：表名是chart，数据库是maj

```
<%@ page import="java.io.*"%>

<<%@ page  import="java.awt.*" %>
<%@ page  import="java.io.*" %>
<%@ page import="java.sql.*" %>
<%@ page import="org.jfree.data.jdbc.JDBCPieDataset" %>
<%@ page import="org.jfree.chart.plot.PlotOrientation" %>
<%@ page import="org.jfree.chart.JFreeChart" %>
<%@ page import="org.jfree.chart.ChartUtilities" %>
<%@ page import="org.jfree.chart.ChartFactory" %>
<%@ page import="org.jfree.data.general.DefaultPieDataset" %>
<%@ page import="org.jfree.chart.*"%>
<%@ page import="org.jfree.chart.entity.*"%>
<%@ page import="org.jfree.data.general.*"%>
<%@ page import="org.jfree.chart.plot.PiePlot;" %>

<%

                String query = "SELECT * from chart";
                JDBCPieDataset dataset = new JDBCPieDataset("jdbc:mysql://localhost:3306/maj", "com.mysql.jdbc.Driver","root", "password");
                dataset.executeQuery(query);

            JFreeChart chart = ChartFactory.createPieChart("File System",dataset, true, true, false);
            //chart.setBackgroundPaint(new Color(222, 222, 255));
                final PiePlot plot = (PiePlot) chart.getPlot();
                plot.setBackgroundPaint(Color.white);
                plot.setCircular(true);

            try {

                final ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection());
                final File file1 = new File(getServletContext().getRealPath(".") + "/piechart.png");

                ChartUtilities.saveChartAsPNG(file1, chart, 600, 400, info);
            } catch (Exception e) {
                System.out.println(e);

            }

%>
<html>
    <body>
        Heading
        <IMG SRC="piechart.png" WIDTH="500" HEIGHT="400" style="border:4px solid orange;" USEMAP="#chart" alt="image">
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:49:31.213

你检查过这条路吗？文件在那里吗？（我打赌不会）。

复制该目录下的文件，您的问题将得到解决。

# svn - 基石主干、分支、标签设置

> ID：11281657
> 
> 赞同：2
> 
> 时间：2012-07-01T11:43:23.280
> 
> 标签：svn, cornerstone

我正在试用 Cornerstone SVN 客户端，我需要一些帮助。尽管我很新，但我对 SVN 的概念很满意。

当我创建本地存储库时，默认情况下没有创建主干、标签、分支文件夹。这是我在本地设置的工作流程，我想征求您的意见，看看这是否可行，以及解决此问题的最佳方法是什么。

1.  在 Dropbox 文件夹中当前名为“SVN 存储库”的文件夹中创建一个新存储库。
2.  右键单击存储库并创建一个新文件夹。它提供了创建“主干”、“分支”和“标签”子文件夹核心的选项。这个包含子文件夹的文件夹称为“核心”。
3.  然后我将文件从桌面上的工作文件夹“First Repository”导入到主干。
4.  主干中的文件“签出”到桌面上的同一文件夹“第一个存储库”。

事情现在是同步的。

任何帮助都可以让我明白这一点。好像还挺费劲的。我以为 Cornerstone 会自动设置 Trunk 等？

谢谢，光盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-21T21:56:03.483

很老，但很好的问题。

答案是，Cornerstone 将面临以标准方式为您执行此操作的挑战，因为没有标准。只有建议：repo 根目录下的 trunk/branches/tags 只是一个约定。

顺便说一句，不要与其他人共享您的 Dropbox 文件夹，其中包含 svn 存储库，甚至不要与您自己在另一台机器上共享（冒着同时运行两台机器的风险）。由于 svn 操作而同时更改 Dropbox 中的同一文件会破坏它。

# android - Android Emulator：分配内存失败：8MB RAM 即使是 8MB

> ID：11281667
> 
> 赞同：6
> 
> 时间：2012-07-01T11:44:22.153
> 
> 标签：android, android-emulator

我正在尝试启动模拟器，但我不断收到错误消息`Failed to allocate memory: 8`。

这个问题有一些解决方案，将 RAM 从 1024 设置为 512，但是当我将它设置为 8 时，它仍然会因为这个错误而崩溃！

我该怎么办？

设置截图：

![在此处输入图像描述](../Images/1a47b279aaef4664e297c604f8fa250a.png)

这里是 Windows 给出的崩溃的 emulator-arm.exe 的错误消息：

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: emulator-arm.exe
  Application Version:  0.0.0.0
  Application Timestamp:    4fe779fb
  Fault Module Name:    emulator-arm.exe
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   4fe779fb
  Exception Code:   40000015
  Exception Offset: 0014428e
  OS Version:   6.1.7600.2.0.0.768.3
  Locale ID:    1043
  Additional Information 1: ea2b
  Additional Information 2: ea2b4716fbf9f89aacc15214fb1537bb
  Additional Information 3: 8d2f
  Additional Information 4: 8d2f162ccf8522e475fc4fbe036a6efa 
```

我最后一次检查并且模拟器工作是在更新到 ADT 20 之前和删除所有旧 AVD 之前。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T20:08:50.543

我遇到过这样的问题。修复它的唯一方法是将其设置为 256、512 或 1024。我不知道为什么它不适用于任何随机值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T10:40:19.653

您需要访问位于以下位置的 avd 配置文件：

```
C:\Users\Furqan\.android\avd\Gingerbread.avd 
```

这里我的用户名是 Furqan 和 Gingerbread.avd 是模拟器设备的名称那里有`config.ini`文件，你可以改变 ramsize 或`vm.heapSize=128 hw.ramSize=2048mb`

确保 ramsize 应该以 mb 为单位，同样您可以从这里轻松更改模拟器中的任何内容。

```
 avd.ini.encoding=ISO-8859-1
     hw.sdCard=no
     hw.device.manufacturer=Google
     hw.mainKeys=yes
     hw.lcd.density=320
     hw.accelerometer=yes
     hw.dPad=yes
     hw.cpu.arch=arm
     skin.name=720x1280
     abi.type=armeabi
     hw.device.hash=-708107041
     hw.trackBall=no
     hw.device.name=Galaxy Nexus
     hw.camera.back=emulated
     hw.sensors.proximity=yes
     hw.battery=yes
     disk.dataPartition.size=200M
     image.sysdir.1=platforms\android-10\images\
     hw.audioInput=yes
     hw.sensors.orientation=yes
     hw.camera.front=emulated
     hw.gps=yes
     skin.dynamic=yes
     skin.path=720x1280
     hw.keyboard=yes
     vm.heapSize=128
     hw.ramSize=2048mb 
```

注意：`hw.ramSize`将 mb 放在小写字母中，因为大写字母对我不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T22:35:23.433

在 Windows 下，无论您的 PC 有多少 RAM，将模拟器设置为 900MB 左右似乎是它可以处理的最大值。6GB RAM 和 Windows 7 x64 对我来说 1024MB 总是失败。

另一个重要说明，对于设备 RAM 大小，始终在末尾包含“MB”。它似乎在没有它的情况下随机工作/崩溃，但可以可靠地工作。许多预建的模拟器似乎都没有这样做。例如，使用**900MB**（无空间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T02:45:35.273

正如我在这里提到的：[https ://stackoverflow.com/a/14420779/1993898](https://stackoverflow.com/a/14420779/1993898)

我可以通过“以管理员身份”运行 AVD 来修复此错误，而无需对我的模拟器设置进行任何更改。为了清楚起见，我的模拟器在 RAM 字段中设置了“1024”，不需要 MB 标签。因此，我认为此错误与文件系统权限或缺少权限有关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-07T10:43:54.850

# 解决的问题：

打开 config.ini （位置： C:\USERS\ **YOURUSERNAME** \.android\avd ）并设置 ie

```
hw.ramSize=512 
```

到

```
hw.ramSize=512mb 
```

# html - Html5音频停止后无法再次播放

> ID：11281669
> 
> 赞同：0
> 
> 时间：2012-07-01T11:44:37.070
> 
> 标签：html, audio

我在我的页面中声明了一个音频文件：

```
var audio = new Audio('my.mp3'); 
```

然后我使用点击事件来播放它：

```
$(document).click(function () {
    audio.currentTime = 0; // to make sure it play from the begain
    audio.play();    
}) 
```

只能在第一次点击的时候播放，结束后点击文件就不能再播放了，怎么让它再播放呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:47:42.557

我在 Chrome 中对此进行了测试，但由于 audio.currentTime 语句而发生异常。

这有效（也在 IE9 中）：

```
$(document).click(function () {
    audio.src = "my.mp3";
    audio.play(); 
}) 
```

# php - MongoRegex 并在集合中搜索多行

> ID：11281671
> 
> 赞同：0
> 
> 时间：2012-07-01T11:44:42.833
> 
> 标签：php, json, mongodb, search

我想做的是以下。

```
$collection = $this->db->products_sale;

        $user_query = preg_replace("/[[:blank:]]+/"," ", $data);
        $arr_query = explode(' ', $user_query);

        if (count($arr_query) > 1) {
        $tmp = array();

        foreach ($arr_query as $q) {
            $tmp[] = new MongoRegex( "/". $q ."/i" );
        }

        $who['keywords'] = array('$in' => $tmp);
        $who['title'] = array('$in' => $tmp);
        $who['description'] = array('$in' => $tmp);

        } else {
            $who['keywords'] = new MongoRegex( "/". $user_query ."/" );
            $who['title'] = new MongoRegex( "/". $user_query ."/" );
            $who['description'] = new MongoRegex( "/". $user_query ."/" );
        }

        print json_encode($who);
        $cursor = $collection->find( $who ); 
```

如您所见，我正在做一些搜索，我想做的是以下我需要能够搜索关键字、标题、描述

现在我可以做一些我认为我正在做的搜索，但显然不是。从我得到的信息来看，它似乎将一个长字符串 ARRAY 或 JSON 发送回 mongoDB，这与 MySQL 不同的是，您可以进行 OR/AND 搜索甚至 MATCH 搜索，似乎 MongoDB 并不那么聪明。

这是我发现的作品，但随后它会搜索搜索搜索的确切方式，例如

“windows phone 7”将被搜索而不是关键字。

```
$cursor = $collection->find( 
        array('$or' => array(
        array("keywords" => new MongoRegex( "/$user_query/i" )),
        array("product" => new MongoRegex( "/$user_query/i" )),
        array("description" => new MongoRegex( "/$user_query/i" )),
        ))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:26:25.013

对于任何想知道我最终如何让它工作的人。这很简单。我仍在努力，但这是我到目前为止所拥有的。

```
$collection = $this->db->products_sale;

    $user_query = preg_replace("/[[:blank:]]+/"," ", $data);
    $arr_query = explode(' ', $user_query);

    if (count($arr_query) > 1) {
    $tmp = array();

    foreach ($arr_query as $q) {
        $tmp[] = new MongoRegex( "/". $q ."/i" );
    }

    $who['keywords'] = array('$in' => $tmp);
    $who['product'] = array('$in' => $tmp);

    } else {
        $who['keywords'] = new MongoRegex( "/". $user_query ."/" );
        $who['product'] = new MongoRegex( "/". $user_query ."/" );
    }

    //print json_encode($who);
    $cursor = $collection->find( 
    array('$or' => array($who
    )));

    if ($cursor->count() > 0)
    {
    //print "found you";
    $test = array();
    // iterate through the results
    while( $cursor->hasNext() ) {   
        $test[] = ($cursor->getNext());
    }
    print json_encode($test); 
```

# struts2 - 没有数据可用时，Struts 2 流结果下载

> ID：11281673
> 
> 赞同：0
> 
> 时间：2012-07-01T11:45:04.587
> 
> 标签：struts2

我正在尝试根据数据库中的记录动态生成一个文件供用户下载。我已经通过使用流结果成功地做到了这一点。

问题是，当没有可下载的数据时，我想在浏览器中显示一个对话框，告诉用户“没有可用数据”。

谁能告诉我这应该怎么做？没有数据时，要下载的输入流为空，会出现异常。。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:21:47.473

您将使用不同的结果并在客户端处理通知。有多种方法可以通过 HTML 和 JavaScript 模拟对话框，或者您可以使用纯 HTML。

# javascript - 如何避免包含标记的 HTML 脚本标记的验证器错误（在 JavaScript 模板中）

> ID：11281675
> 
> 赞同：1
> 
> 时间：2012-07-01T11:45:23.410
> 
> 标签：javascript, html, template-engine, w3c-validation

我遇到了一个 JavaSciprt 模板系统。

这是一篇简单的文章：[http ://blog.reybango.com/2010/07/09/not-using-jquery-javascript-templates-youre-really-missing-out/](http://blog.reybango.com/2010/07/09/not-using-jquery-javascript-templates-youre-really-missing-out/)

深入研究这个话题，我发现了其他几个 JavaScript 模板引擎。但是我还没有找到任何关于如何处理验证错误的信息。

我的意思是：使用上面引用的文章中提到的标记，我有一个这样的 HTML 片段：

```
<script id="clientTemplate" type="text/html">
    <li><a href="clients/${id}">${name}</a></li>
</script> 
```

当我使用验证器进行检查时，我会收到诸如`end tag for element A which is not open`等之类的错误。

有没有办法抑制这些错误？

# git - Git/rsync 混合用于具有大型二进制文件和文本文件的项目

> ID：11281678
> 
> 赞同：3
> 
> 时间：2012-07-01T11:45:33.950
> 
> 标签：git, rsync, large-files

有谁知道一个项目可以有效地将基于文本的文件的 git 版本控制和大型二进制文件（如数据）的 rsync 结合起来？显然，这有点超出了 DVCS 应该做的事情，但我很好奇是否有人围绕 git 编写了一个智能包装器来做这些事情以与中央存储库同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T14:25:59.853

你可能喜欢[git-annex](http://git-annex.branchable.com/)。从它的主页：

> git-annex 允许使用 git 管理文件，而无需将文件内容检入 git。虽然这可能看起来自相矛盾，但在处理比 git 目前可以轻松处理的文件时，它很有用，无论是由于内存、时间或磁盘空间的限制。
> 
> 即使没有文件内容跟踪，能够使用 git 管理文件、移动文件和使用版本化目录树删除文件，以及使用分支和分布式克隆，都是使用 git 的非常方便的理由。并且附加文件可以与定期版本化的文件共存于同一个 git 存储库中，这便于维护与附加文件关联但受益于完全修订控制的文档、Makefile 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T13:55:38.073

我看到的[最后一个](http://delicious.com/vonc/binary)叫做**[bup](https://github.com/apenwarr/bup)**：

> bup 是一个备份程序。它是“备份”的缩写。

bup 与其他备份软件相比有一些优势：

> *   它使用滚动校验和算法（类似于 rsync）将大文件分成块。这样做最有用的结果是您可以增量备份巨大的虚拟机 (VM) 磁盘映像、数据库和 XML 文件，即使它们通常都在一个大文件中，并且不会为多个版本使用大量磁盘空间。
> *   它使用来自 git（开源版本控制系统）的 packfile 格式，因此即使您不喜欢 bup 的用户界面，您也可以访问存储的数据。
> *   与 git 不同，它直接写入包文件（而不是具有单独的垃圾收集/重新打包阶段），因此即使无偿大量数据它也很快。bup 改进的索引格式还允许您跟踪比 git 更多的文件名（数百万）并跟踪更多的对象（数百或数千 GB）。
> *   数据在增量备份之间“自动”共享，而不必知道哪个备份基于另一个备份 - 即使备份是由两台甚至不知道彼此的不同计算机制作的。您只需告诉 bup 备份资料，它只保存所需的最少数据量。

# c++ - 类似于 std::vector / boost::array 的 C++ 文件内存映射容器

> ID：11281683
> 
> 赞同：3
> 
> 时间：2012-07-01T11:45:49.970
> 
> 标签：c++, containers, mmap

我想知道是否有一个很好的 C++ 库可以提供类似于 std::vector 或 boost::array 的文件内存映射容器，其显着区别在于它在文件内存映射上运行。

现在我正在考虑基于 boost::array 自己实现这样的，但我宁愿不重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:49:18.543

查看[boost interprocess](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess.html)。它包含许多适用于任意内存位置的容器和分配器。[也有对映射文件](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_mapped_files)的直接支持。

# javascript - Javascript：需要替换模式 HREF

> ID：11281685
> 
> 赞同：0
> 
> 时间：2012-07-01T11:45:57.030
> 
> 标签：javascript

假设在我的 HTML 页面上，我有很多`href`s 链接。

使用 Javascript，我需要遍历所有`href`s 并用某些东西替换它们，并且我没有任何 id 到`href`.

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T11:49:38.450

```
var anchors = document.anchors;
for(var i=0,len=anchors.length;i<len;i++){
   anchors[i].href = 'some_new_url';;
} 
```

**编辑**（在OP的评论之后）

document.anchors 返回锚点集合提供锚点具有`name`属性。

这些是`valid`锚点`document.anchors`

```
 <a href='http://www.link1.html' name=''>Link1</a>
   <a href='link2.html' name=''>Link2</a> 
```

但这不是，

```
<a href='link2.html'>Link2</a> 
```

更好的是，改用这个

```
var anchors = document.getElementsByTagName('a');
for(var i=0,len=anchors.length;i<len;i++){
    anchors[i].href = 'some_new_url';;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:51:06.010

```
<script type='text/javascript'>

var anchors = document.getElementsByTagName('a');
for(var i = 0; i < anchors.href; i++) {
anchors[i].href = 'new target';
}

</script>

...

<a href='link1.html'>Link1</a>
<a href='link2.html'>Link2</a> 
```

**编辑：** 只是另一种方式：

```
var length = document.links.length;
for (var i = 0; i < length; i++) {
document.links[i].href = 'new target';
} 
```

# php - 读取文本文件和复选框 - PHP

> ID：11281687
> 
> 赞同：0
> 
> 时间：2012-07-01T11:46:22.137
> 
> 标签：php

基本上，下面的代码读入一个文本文件并将其显示在屏幕上，每行附近都有复选框。但是现在我希望用户能够选中任何框，然后在新的 PHP 文件中显示选定的结果 - 我想我必须再次读取文本文件并以某种方式将其引用到数组，但我仍然卡住了，所以任何帮助将不胜感激。

谢谢你。

## 第一个php文件

```
<?php
$filename = "file.txt";
$myarray = file($filename);
print "<form action='file2.php' method='post'>\n";
// get number of elements in array with count
$count = 0; // Foreach with counter is probably best here
foreach ($myarray as $line) {
  $count++; // increment the counter
  $par = getvalue($line);
  if ($par[1] <= 200) {
  // Note the [] after the input name
    print "<input type='checkbox' name='test[$count]' /> ";
    print $par[0]." ";
    print $par[1]." ";
    print $par[2]." ";
    print $par[3]."<br />\n";
  }
}
print "</form>"; 
```

## 第二个 php 文件应该显示选定的结果

```
<?php
$filename = "file.txt";
$myarray = file($filename);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:01:53.600

我认为你把问题复杂化了。您可以只给复选框一个`value`属性并从第二页读取数组。从第二页上的kus 开始，`print_r ($_POST)`以帮助您了解必须使用的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:21:13.863

1）考虑你的文本文件的格式（可能类似于`"Name1-Value 1-true\nName1-Value2-false"`）
2）学习[这个](http://php.net/manual/en/function.fopen.php "开放")函数
3）使用默认选项创建一个文件
4）制作一个 PHP 脚本来打开文件，创建一个数组并打印结果 - 例如：

```
$handle = fopen('./file.txt','r');
$fileString = fread($handle,filesize('./file.txt'));
$handle = null; //Similar to unset($handle);
$array = explode($fileString, "\n");
echo '<form action="./script2.php">';
foreach ($array as $value) {
    $value = explode($value, "-");
    echo '<input type="checkbox" name="'.$value[1].'" value="'.$value[2].'" checked="';
    if ($value[3]==true) {
        echo 'checked" /><br />';
    } else {
        echo '" /><br />';
    }
} 
```

5）制作编辑文件的第二个脚本 - 例如：

```
if ($_GET == null;) {exit("He's dead, Jim!");}
$handle = fopen('./file.txt','r');
$fileString = fread($handle,filesize('./file.txt'));
    //Do something with the string :D
$handle = fopen('./file.txt','w');
fwrite($handle,$fileString); 
```

# php - 如何使用 jquery 和 javascript 提交或不提交表单

> ID：11281693
> 
> 赞同：3
> 
> 时间：2012-07-01T11:47:42.163
> 
> 标签：php, jquery, ajax, forms, post

我有一个像这样的表格：

```
<form name="form" id="form" action="sub.php" onsubmit="return checkField();">
.
.
.
</form> 
```

在头上我有：

```
<script>
   function checkField(){
      var fieldToCheck = $('#field').val();
      $.post("checkField.php",{field:fieldTocheck},function(msg)){
         return msg=='ok';
      }
   }
</script> 
```

问题是表单将始终提交..我知道里面的返回`$.post`是为了成功而不是为了函数`checkField()`..那我该怎么办？有人能帮我吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:00:40.533

尝试这个，

```
 function checkField(){
      var fieldToCheck = $('#field').val();
      $.post("checkField.php",{field:fieldTocheck},function(msg)){
         return msg=='ok';
         // pure js submit() to stop checkField() to be called again
         $('#form')[0].submit();  
      }
      return false;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:03:42.677

1、防止提交事件：

```
$('#form').submit(function(event) {
event.preventDefault();
} 
```

2，如果一切正常，继续提交

```
 function checkField(){
      var fieldToCheck = $('#field').val();
      $.post("checkField.php",{field:fieldTocheck},function(msg)){
         $('#form').submit();
      }
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T12:04:30.297

您在表单中指定 onsubmit="return checkField();"

但是您的 checkField() 什么也不返回。

您必须返回 false 以表示中止并且不要发布，或者返回其他东西来表示继续发布。

尝试这个：

```
function checkField(){
  var fieldToCheck = $('#field').val();
  var okToSubmit = false;
  $.post("checkField.php",{field:fieldTocheck},function(msg)){
     if (msg=='ok')
        okToSubmit = true;
  }
  return okToSubmit();
} 
```

此外，checkField 的发布必须是同步的（async = False），否则 checkField() 函数将在检查字段是否正确之前返回其当前值 (false)，从而给您带来误报。

未测试：

```
function checkField(){
  return $.post("checkField.php",{field:$('#field').val()},function(msg)){
     return ('ok' == msg);
  }
} 
```

（最后一种形式更尴尬——你不能轻易地向第一种形式添加更多测试）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T12:03:53.113

最难想到的是，在处理请求之前，您必须在您的 checkField 函数中返回一些值，因此解决方案之一是返回 false 并仅在成功时发布您的表单详细信息

```
<script>
function checkField(){
  var fieldToCheck = $('#field').val();
  $.post("checkField.php",{field:fieldTocheck},function(msg){
     if (msg=='ok') 
     {
        var $form = $('#form'),
        par = $form.serialize();
        $.post($form.attr('action'), par, function(){});
     }
  }
  return false;
});
</script> 
```

# javascript - 不能使用 javaScript setInterval 方法

> ID：11281694
> 
> 赞同：1
> 
> 时间：2012-07-01T11:47:44.133
> 
> 标签：javascript

我不能使用 setInterval 方法，我不知道为什么。该脚本有什么问题，单击停止后，它不会在文本字段中显示计数器 i 的结果。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <title>test_setInterval</title>

        <script type="text/javascript">
            var i = 0;
            var interval;

            function start ()
            {
                interval = document.setInterval("i++", 1000);
            }

            function stop ()
            {
                document.clearInterval(interval);
                output.value = i;
            }
        </script>

    </head>

    <body>
        <input id="output" type="text" />
        <input id="start" type="button" value="start" onclick="start()" />
        <input id="stop" type="button" value="stop" onclick="stop()" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:54:37.143

您必须将 i++ 包装在一个函数中。
另外，删除文档。在 setInterval 之前。
现在，请注意这有一个错误。如果按两次“开始”，`i`每秒将上升两个单位。通过在启动功能中
添加另一个解决了该错误。`clearInterval`

[http://jsfiddle.net/46kzu/3/](http://jsfiddle.net/46kzu/3/)

```
 function start ()
    {   
        clearInterval(interval);
        interval = setInterval(function(){++i;}, 1000);

    }

    function stop ()
    {
        clearInterval(interval);
        output.value = i;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:50:43.253

1.  `clearInterval`并且`setInterval`是窗口的方法，而不是文档。您可以将它们称为`window.clearInterval`或只是`clearInterval`.
2.  最好使用 function 作为 setInterval 的第一个参数，而不是带有代码的字符串，因为[eval 是 evil](http://javascriptweblog.wordpress.com/2010/04/19/how-evil-is-eval/)。

这是一个工作演示[http://jsfiddle.net/9cveg/](http://jsfiddle.net/9cveg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:50:17.650

根据定义， setInterval() 方法以指定的时间间隔（以毫秒为单位）调用函数或评估表达式，并且其窗口的方法不是文档的。

```
 <script type="text/javascript">

                var i = 0;
                var interval;

                function start ()
                {
                    interval = window.setInterval("i++", 1000);
                }

                function stop ()
                {
                    document.clearInterval(interval);
                    output.value = i;
                }

            </script> 
```

# google-docs-api - 您如何执行可恢复上传到 google 文档集合？即使用Java和g-data库

> ID：11281696
> 
> 赞同：0
> 
> 时间：2012-07-01T11:48:06.623
> 
> 标签：google-docs-api, gdata-api, google-drive-api

我有一个工作系统可以使用可恢复上传上传到默认根目录，并且我已经能够在集合中制作元数据，但我需要能够将这种类型的上传直接上传到集合或子集合。

我的主要问题是 url，没有直接上传到集合的路径的定义示例？

我假设它会像：

```
https://docs.google.com/feeds/upload/create-session/default/private/full/folder%3A[folder_id]/contents 
```

考虑到典型的上传路径是相似的，除了没有上传/创建会话部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:18:07.800

在文件夹条目中，查找如下链接：

```
<link rel="http://schemas.google.com/g/2005#resumable-create-media"
    type="application/atom+xml"
    href="https://docs.google.com/feeds/upload/create-session/default/private/full"/> 
```

href 是您需要发送到该文件夹​​以在该文件夹中创建文件的内容。

ps 您是否考虑过使用新的[Drive API](http://developers.google.com/drive)？它具有这种功能，并且使用起来要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T17:30:59.457

原来我最初是正确的，我提供的 URL 对于上传是正确的，但是我为生成 URL 而创建的函数缺少提要和上传之间的 /

# c++ - 整数类型大小问题

> ID：11281697
> 
> 赞同：0
> 
> 时间：2012-07-01T11:48:08.110
> 
> 标签：c++, 32bit-64bit

```
#include <ctime>
#include <cstdio>
#include <sys/time.h>
#include <iostream>
using namespace std;

int main() {
    struct timeval tv;
    gettimeofday(&tv, 0);
    unsigned long long int var=tv.tv_sec*1000L+tv.tv_usec/1000L;
    cout<<sizeof(var)<<endl;
    cout<<var<<endl;
    printf("%u%-15u\n", (unsigned int)(var/1000000000), (unsigned int)(var%1000000000));
    return 0;
} 
```

这东西打印

```
8
1341143123970
1341143123970 
```

在我的 64 位机器上，但是

```
8
1113191712
1113191712 
```

在我的 32 位服务器上。第二个结果显然被限制为 32 位数字，但 unsigned long long int 在两种架构上都是 8 字节。那么夹紧发生在哪里，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T11:51:51.657

`long`这是因为32 位和 64 位机器上的宽度不一样。的类型`tv_sec`是算术类型，通常是^(1)) `long`。

您可以确保使用 64 位类型来完成乘法，`1000ULL`而不是`1000L`：

```
unsigned long long int var=tv.tv_sec*1000ULL+tv.tv_usec/1000ULL; 
```

* * *

[1)`glibc`例如，它是`long`。`"In the GNU C library, time_t is equivalent to long int"` [http://www.gnu.org/software/libc/manual/html_node/Simple-Calendar-Time.html](http://www.gnu.org/software/libc/manual/html_node/Simple-Calendar-Time.html)]

# python - Python动态类方法

> ID：11281698
> 
> 赞同：5
> 
> 时间：2012-07-01T11:48:20.933
> 
> 标签：python, runtime, class-method

说有：

```
class A(B):
    ... 
```

哪里`B`可能`object`和`...`不是：**_**

```
@classmethod # or @staticmethod
def c(cls): print 'Hello from c!' 
```

我该怎么做才`A.c()`不会触发呼叫`AttributeError`？

换句话说，我知道可以在运行时手动将类方法添加到类中。但是是否可以自动执行此操作，例如每次缺少类方法时都会创建一些虚拟方法？

换句话说，只有当我可以`A.__dict__`用我的 dict 替换它处理`__getitem__`- 但`A.__dict__`似乎不可写......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-01T11:56:03.590

您可以通过在[元类](http://docs.python.org/reference/datamodel.html#customizing-class-creation)上使用[`__getattr__`钩子](http://docs.python.org/reference/datamodel.html#object.__getattr__)来实现这一点。

```
class DefaultClassMethods(type):
    def __getattr__(cls, attr):
        def _defaultClassMethod(cls):
            print 'Hi, I am the default class method!'
        setattr(cls, attr, classmethod(_defaultClassMethod))
        return getattr(cls, attr) 
```

演示：

```
>>> class DefaultClassMethods(type):
...     def __getattr__(cls, attr):
...         def _defaultClassMethod(cls):
...             print 'Hi, I am the default class method!'
...         setattr(cls, attr, classmethod(_defaultClassMethod))
...         return getattr(cls, attr)
... 
>>> class A(object):
...     __metaclass__ = DefaultClassMethods
... 
>>> A.spam
<bound method DefaultClassMethods._defaultClassMethod of <class '__main__.A'>>
>>> A.spam()
Hi, I am the default class method! 
```

请注意，我们将`classmethod`调用结果直接设置到类上，有效地将其缓存以供将来查找。

如果您需要在每次调用时重新生成类方法，请使用相同的[方法将函数绑定到实例](https://stackoverflow.com/questions/1015307/python-bind-an-unbound-method)，但使用类和元类（`cls.__metaclass__`用于与元类子类化一致）：

```
from types import MethodType

class DefaultClassMethods(type):
    def __getattr__(cls, attr):
        def _defaultClassMethod(cls):
            print 'Hi, I am the default class method!'
        return _defaultClassMethod.__get__(cls, cls.__metaclass__) 
```

对于静态方法，在所有情况下都直接返回函数，无需使用`staticmethod`装饰器或描述符协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:29:12.953

通过方法`__getattr__`和描述符协议等方法提供给实例的行为也适用于类，但在这种情况下，您必须在类的元类中对它们进行编码。

在这种情况下，只需将元类`__getattr__`函数设置为自动生成所需的类属性。

（setattr、getattr 的技巧是让 Python 做函数 -> 方法转换，而不需要弄乱它）

```
class AutoClassMethod(type):
    def __getattr__(cls, attr):
        default = classmethod(lambda cls: "Default class method for " + repr(cls))
        setattr(cls, attr, default)
        return getattr(cls, attr)

class A(object):
    __metaclass__ = AutoClassMethod
    @classmethod
    def b(cls):
        print cls 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T12:03:45.080

```
>>> class C(object):
...     pass
... 
>>> C.m = classmethod(lambda cls: cls.__name__)
>>> C.m()
'C' 
```

或者你可以使用这样的东西：

```
class Wrapper(object):

    def __init__(self, clz, default=lambda cls: None):
        self._clz = clz
        self._default = default

    def __getattr__(self, attr):
        # __attrs__ will be getted from Wrapper
        if attr.startswith('__'):
            return self.__getattribute__(attr)

        if not hasattr(self._clz, attr):
            setattr(self._clz, attr, classmethod(self._default))
        return getattr(self._clz, attr)

    def __call__(self, *args, **kwargs):
        return self._clz(*args, **kwargs)

>>> class C(object):
...     pass
...
>>> C = Wrapper(C, default=lambda cls: cls.__name__)
>>> c = C()
>>> print C.m()
'C'
>>> print c.m() # now instance have method "m"
'C' 
```

# mysql - 使用子查询更新连接

> ID：11281700
> 
> 赞同：1
> 
> 时间：2012-07-01T11:48:37.580
> 
> 标签：mysql, sql

```
UPDATE item t 

INNER JOIN ( SELECT
               item_name,
               MAX( item_keyword ) AS item_keyword
             FROM item
             WHERE ca_id2  = '2010'
             GROUP BY item_name
           ) s ON t.item_name = s.item_name

SET t.item_keyword = s.item_keyword 

WHERE t.ca_id2 ='3010' 
```

错误是：

> 1064 - 您的 SQL 语法有错误。查看与您的 MySQL 服务器版本相对应的手册，了解在 'SELECT item_name, max(item_keyword) AS item_keyword FROM item 附近使用的正确语法

MySQL 4.0.22 版本失败的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:04:24.113

我尝试根据 [http://www.xaprb.com/blog/2006/06/23/how-to-select-from-an-update-target-in-mysql/构建您的查询](http://www.xaprb.com/blog/2006/06/23/how-to-select-from-an-update-target-in-mysql/)

```
UPDATE item t

SET t.item_keyword =
      ( SELECT MAX( i.item_keyword ) AS item_keyword
          FROM ( SELECT item_keyword, item_name, cd_id2 FROM item ) AS i
         WHERE t.item_name = i.item_name
           AND i.cd_id2  = '2010'
      GROUP BY i.item_name
      )

WHERE t.ca_id2 ='3010' 
```

或者你也可以试试这个版本

```
UPDATE item t

INNER JOIN ( SELECT item_keyword, item_name, cd_id2 FROM item ) AS i

SET t.item_keyword =
      ( SELECT MAX( i.item_keyword ) AS item_keyword
          FROM i
         WHERE t.item_name = i.item_name
           AND i.cd_id2  = '2010'
      GROUP BY i.item_name
      )

WHERE t.ca_id2 ='3010' 
```

对不起，我没有 MySQL 4，所以你必须测试上面的查询。

其他读物：

*   [http://dev.mysql.com/doc/refman/4.1/en/update.html](http://dev.mysql.com/doc/refman/4.1/en/update.html)
*   [http://dev.mysql.com/doc/refman/4.1/en/rewriting-subqueries.html](http://dev.mysql.com/doc/refman/4.1/en/rewriting-subqueries.html)

如果上述查询不起作用，您可以尝试使用临时表而不是子选择：

[http://sqlfiddle.com/#!2/13ccb/1](http://sqlfiddle.com/#!2/13ccb/1)

```
CREATE TEMPORARY TABLE s
   SELECT item_name,
          MAX( item_keyword ) AS item_keyword
    FROM  item
    WHERE cd_id2  = '2010'
      AND item.item_name IN ( SELECT item_name FROM item WHERE item.ca_id2='3010')
GROUP BY item_name;

UPDATE item t 
INNER JOIN s ON t.item_name = s.item_name
SET t.item_keyword = s.item_keyword 
WHERE t.ca_id2 ='3010';

DROP TEMPORARY TABLE s; 
```

# java - ^32 限制和取模方法

> ID：11281703
> 
> 赞同：0
> 
> 时间：2012-07-01T11:49:16.753
> 
> 标签：java

在 Java 中，整数必须介于 2^31 - 1 到 -2^31 之间

所以如果 int x = 2 * 1500000000

逻辑答案将是 300000000，但由于它的值有限制，因此它被提前并使用 2^32 mod 3000000000 它将是 -1294967296 但因为它被提前，数字将变为负数，因为正字段溢出. 我可以说这是真的吗？

此外，我已经搜索并阅读了调制部分，例如在时钟 15 mod 12 == 3 中，因为它是除法的余数，但是它作为时钟的一个例子很好，因为 12 在这里是一个常数。

那么 2^32 是整数的所有调制计算的常数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T14:36:00.283

为简单起见，我将使用 8 位整数。

在二进制中，8 位范围从`00000000b`到`11111111b`。

```
00000000b = 0d
11111111b = 255d 
```

那么计算机如何给整数加符号呢？是[补码](http://en.wikipedia.org/wiki/Two%27s_complement)。

对于无符号整数，我们`11111111b`通过这种方式将二进制转换为十进制：

```
 11111111b
= 1*2^7 + 1*2^6 + 1*2^5 + 1*2^4 + 1*2^3 + 1*2^2 + 1*2^1 + 1*2^0
= 1*128 + 1*64  + 1*32  + 1*16  + 1*8   + 1*4   + 1*2   + 1*1
= 255d 
```

那么有符号整数`11111111b`呢？这是一个简单的方法：

```
 v----------(sign flag 1=negative)
  11111111b
= 1*(-2^7) + 1*2^6 + 1*2^5 + 1*2^4 + 1*2^3 + 1*2^2 + 1*2^1 + 1*2^0
= 1*(-128) + 1*64  + 1*32  + 1*16  + 1*8   + 1*4   + 1*2   + 1*1
= -1d 
```

通常，有符号数的最高有效位是符号标志。

要将负十进制数转换为二进制补码：

```
 -18d
 ========
 without sign     0001 0010
 one's complement 1110 1101 (inverted)
*two's complement 1110 1110 (one's complement + 1) 
```

8 位有符号整数的范围是从`-2^7`到`2^7-1`。

现在什么是溢出？让我们来看看：

```
 01111111b
= 127d

  01111111b + 1
= 10000000b
= 1*(-2^7) + 0*2^6 + 0*2^5 + 0*2^4 + 0*2^3 + 0*2^2 + 0*2^1 + 0*2^0
= 1*(-128) + 0*64  + 0*32  + 0*16  + 0*8   + 0*4   + 0*2   + 0*1
= -128d

  127d + 1d
  =========
  0111 1111 (127d)  +
 +0000 0001 (1d)    +
 ----------
  1000 0000 (-128d) - (overflow) 
```

因此，如果我们将最大的 8 位有符号整数加 1，则结果是最小的 8 位有符号整数。+ve + +ve -> -ve 是溢出错误。

减法呢？45-16？(+ve + -ve -> +ve)

```
 45d - 16d
  =========
  0010 1101 (45d)   +
 +1111 0000 (-16d)  -
 ----------
1 0001 1101 (29d)   +
^---------------------(discard) 
```

45-64怎么样？(+ve + -ve -> -ve)

```
 45d - 64d
  =========
  0010 1101 (45d)   +
 +1100 0000 (-64d)  -
 ----------
  1110 1101 (-19d)  - 
```

-64-64 怎么样？(-ve + -ve -> -ve)

```
 -64d - 65d
  =========
  1100 0000 (-64d)  -
 +1100 0000 (-64d)  -
 ----------
1 1000 0000 (-128d) +
^---------------------(discard) 
```

-64-65 怎么样？

```
 -64d - 65d
  =========
  1100 0000 (-64d)  -
 +1011 1111 (-65d)  -
 ----------
1 0111 1111 (127d)  + (underflow)
^---------------------(discard) 
```

所以 -ve + -ve -> +ve 是下溢错误。

32 位整数的情况类似，只是可用的位数更多。

对于您的问题`2*1500000000`，如果我们将它们视为 32 位无符号整数，则结果为`3000000000`，其二进制表示为：

```
 1011 0010 1101 0000 0101 1110 0000 0000
= 1*2^31 + 0*2^30 + ...
= 1*2147483648 + 0*1073741824 + ...
= 3000000000d 
```

但如果我们将其视为 32 位有符号整数：

```
 v------(Let's recall this is the sign flag)
  1011 0010 1101 0000 0101 1110 0000 0000
= 1*(-2^31) + 0*2^30 + ...
= 1*(-2147483648) + 0*1073741824 + ...
= -1294967296d 
```

* * *

**添加：**无符号整数溢出

无符号整数的溢出非常相似：

```
 11111111b
= 255d

  11111111b + 1
= 00000000b
= 0d

  255d + 1d
  =========
  1111 1111 (255d)  +
 +0000 0001 (1d)    +
 ----------
1 0000 0000 (0d)    - (overflow)
^---------------------(discard) 
```

这就是为什么对于 32 位无符号整数，它总是`mod 2^32`.

顺便说一句，这不仅适用于 Java，而且适用于大多数编程语言，如 C/C++。其他一些编程语言可能会自动处理溢出并将类型更改为更高的精度或浮点数，例如 PHP/JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:06:50.303

你应该修改 2^32，而不是 2^31，然后你应该考虑带符号的算术：高于 2^31 的数字会从它们中减去 2^32。

无论如何，`2 * 1500000000 = 3000000000`小于 2^32，但大于 2^31，所以减去 2^32 得到 -1294967296。

# silverlight - Silverlight XAML 错误

> ID：11281706
> 
> 赞同：3
> 
> 时间：2012-07-01T11:49:22.613
> 
> 标签：silverlight, xaml

为什么如果我将它放入 Silverlight 下使用的 xaml 字典中，编译器会发现错误。

```
<Color x:Key="colorBackDark" A="255" R="150" G="170" B="190" /> 
```

在 WPF XAML 中一切正常。

顺便说一句，无论使用什么 silverlight 版本，都会出现错误。

看起来这是某种解析器错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T12:09:55.870

我假设您遇到的错误类似于以下内容：

> 无法从文本“255”创建“System.Byte”

Silverlight 中的 XAML 解析器只知道如何处理`double`s、`int`s 和`bool`s。结构中的属性 、 和都是s `A`，`R`Silverlight XAML解析器不知道如何处理。另一方面，WPF 中的 XAML 解析器确实知道如何处理这些值，因此这就是您在 WPF 中没有收到错误的原因。`G``B``Color``byte`

该[结构的](http://msdn.microsoft.com/en-us/library/system.windows.media.color(v=vs.95).aspx)[MSDN 文档`Color`](http://msdn.microsoft.com/en-us/library/system.windows.media.color(v=vs.95).aspx)`Color`列出了在 Silverlight 中的 XAML 中创建值的多种方法。

不久前有人问过一个[类似的问题](https://stackoverflow.com/questions/2672076/why-wont-silverlight-handle-the-conversion-of-my-custom-float-property)`float`，即为什么s 也不能在 Silverlight 的 XAML 中使用。

# uitabbarcontroller - TabBarController 的消息框

> ID：11281711
> 
> 赞同：0
> 
> 时间：2012-07-01T11:50:04.163
> 
> 标签：uitabbarcontroller, message

`FirstViewController`我在我的中创建了一个消息框`TabBarController`：

```
- (void)pressedButton:(id)sender {
     [[[UIAlertView alloc] initWithTitle:@"Snap it" message:@"Take a picture"
                               delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil]
     show]; 
```

当用户单击“确定”时，我希望他们被重定向到`SecondViewController`.

知道怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:53:11.660

如果您将标签栏控制器连接到“ `IBOutlet`”（或对它有其他引用），则切换标签就像更新[`selectedIndex`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBarController/selectedIndex)属性一样简单（我已经为您链接了 Apple 文档）。

***编辑：***

将您的代码更改为此。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // if you have connected your tab bar controller to an IBOutlet named myTabBarController
    if(myTabBarController)
    {
        // first tab bar controller is zero, second tab bar controller is 1, etc.
        myTabBarController.selectedIndex = 1;         
    } else {
        NSLog( @"tabBarController is nil and probably not set correctly" ); 
    }
}

- (void)pressedButton:(id)sender {
    UIAlertView * alertView = 
        [[UIAlertView alloc] initWithTitle:@"Snap it" message:@"Take a picture" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    if(alertView)
    {
        [alertView show];
    }
} 
```

这假设您已将标签栏控制器正确设置为 IBOutlet。另请注意，我已将警报视图上的“委托”设置为“自我”（即，如果使用“ ”作为委托，“ `clickedButtonAtIndex`”方法必须存在于同一对象和类中）。`self`

# objective-c - 在 iPhone 视图中滚动页面

> ID：11281718
> 
> 赞同：0
> 
> 时间：2012-07-01T11:50:54.593
> 
> 标签：objective-c, ios, ios5, ios4

我有一个视图，其中包含某些事件的详细信息，其中包括图像视图、一些标签等。我将事件的描述作为视图中的一个小子视图，如下所示。

```
CGRect descriptionTextViewRect = CGRectMake(15, 185, 280, 85);
descriptionText = [[UITextView alloc] initWithFrame:descriptionTextViewRect];
descriptionText.textAlignment = UITextAlignmentLeft;
descriptionText.text =des;
descriptionText.editable = NO;
descriptionText.layer.cornerRadius = 5.0;
descriptionText.clipsToBounds = YES;
descriptionText.userInteractionEnabled = YES;
descriptionText.font = [UIFont systemFontOfSize:15];
[scrollView addSubview: descriptionText]; 
```

我关注了这个[链接](https://stackoverflow.com/questions/3046449/calculate-the-contentsize-of-scrollview)，但我可以滚动文本视图和滚动视图

我是这样跟着的

```
float sizeOfContent = 0;
 int i ;

for (i=0; i<[scrollView.subviews count]; i++) {
    sizeOfContent += descriptionText.frame.size.height;
}

scrollView.contentSize = CGSizeMake(descriptionText.frame.size.width, sizeOfContent) 
```

我需要显示描述的全部内容并使整个详细页面可滚动。

我做得对吗？还是我错过了什么？

我怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:48:02.677

您每次都在同一位置添加子视图。例如：如果您要添加 5 个子视图，则应如下所示：

```
for(int i=0; i<5; i++)
{
CGRect descriptionTextViewRect = CGRectMake(15, i*185, 280, 85);
descriptionText = [[UITextView alloc] initWithFrame:descriptionTextViewRect];
descriptionText.textAlignment = UITextAlignmentLeft;
descriptionText.text =des;
descriptionText.editable = NO;
descriptionText.layer.cornerRadius = 5.0;
descriptionText.clipsToBounds = YES;
descriptionText.userInteractionEnabled = YES;
descriptionText.font = [UIFont systemFontOfSize:15];
[scrollView addSubview: descriptionText];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:26:47.380

您要多次添加相同项目的高度。

这个：

```
for (i=0; i<[scrollView.subviews count]; i++) {
    sizeOfContent += descriptionText.frame.size.height;
} 
```

应该是这样的：

```
for (UIView *view in scrollView.subviews) {
    sizeOfContent += view.frame.size.height;
} 
```

所以它会正确地将所有项目的高度添加到`sizeOfContent`.

# sql-server - 数据库和 UI 开发的最佳方法？

> ID：11281719
> 
> 赞同：2
> 
> 时间：2012-07-01T11:50:57.363
> 
> 标签：sql-server, forms, database-design, calendar, relational-database

这个问题涵盖了许多领域，因此最终可能必须分解为组成部分。但是，我不想这样做，至少在我大致了解我应该采取的方向之前！

我想在.Net Framework 下创建一个**在线预订系统。**GUI 将有两个独立的重要区域。1\. 将是**用于设置用户帐户的典型表单 GUI**。2\. 将是**一个日历**（与谷歌日历非常相似——如果不是真正的谷歌日历）**，它将向用户显示用户可以预订的可用时间**，并希望允许他们通过简单地点击显示的可用时间来实际预订日历。

日历上显示的可用时间取决于两件事：用户的用户类型（将在注册表单中指定）以及（显然）其他用户是否已经占用了可用时间。

我的一个大问题是是否可以使用 Microsoft Access（任何版本）来完成这项任务。我的偏好是由于熟悉，而且此开发中使用的大多数其他技术都是基于 Microsoft 的。我知道可以使用 SQL Server 迁移 Access DB - 但这是否包括重要的前端（即表单）？

最后，接近前端日历方面的策略是我的头脑！虽然当然可以集成 SQL Server 和 Google（文档/日历），但我认为尝试将 Google 日历硬塞到如此复杂的关系数据库中最终是不可行的 - 但我正在努力想一个替代方案，而不必自己动手开发（在这种情况下，我正在认真尝试避免！）

任何关于上述的指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T15:52:55.563

我的 $.02：正如@Luxspes 所说，Sql Server 没有“表单”或“报告”，但 SQL Server 引擎比 Access 的“Jet”引擎更适合基于 Web 的应用程序。但是，您可以在 Access 中开发您的应用程序，然后“升级”您的数据库，这会告诉 Access：“嘿，那些表单和报告很棒，但现在我希望您将后端数据库放入 SQL Server Express（免费）并将前端保留在 Access 中。” 然后，您可以使用 Access 自己的工具将表单和报告发布到 Web，“免费”获得它们，同时获得更好的数据库引擎。

请注意，这样做在商业世界中通常是不可接受的**。**Access 应用程序看起来像一个 Access 应用程序，世界上大多数人都会认出它，但大多数人都不喜欢它：除非您可以使表单看起来非常非常好，否则您似乎在偷工减料。对于内部使用来说很好，因为它的周转时间很快，因此投资回报率很高。如果你正在制作一个商业网站，我会看一下 Microsoft MVC 3 框架：你需要一段时间来熟悉它，但是一旦你加快了速度，你就可以快速而稳健地开发网站. 如果“健壮”是一个词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:26:34.303

是否可以为此任务使用 Microsoft Access（任何版本），该任务使用 Access 作为 .Net Framework 下在线预订系统的数据库：**是的。（但我更喜欢使用 MSSQL Express Edition）**

我知道可以使用 SQL Server 迁移 Access DB - 但这是否包括重要的前端（即表单）？：**不，SQL Server 没有“表单”的概念。如果您已经在 Access 中拥有它们，则必须在例如 ASP.NET 中重新创建它们。如果您正在寻找最简单、最快的方法，我建议您使用 LightSwitch ( [http://www.microsoft.com/visualstudio/en-us/lightswitch](http://www.microsoft.com/visualstudio/en-us/lightswitch) )**

最后，接近前端日历方面的策略是我的头脑！：**如果你不想编码，你可以在谷歌中找到它，只需编写“.NET Schedule control”**

# macos - 创建本地化的 mac 帮助书文件 (.help)

> ID：11281722
> 
> 赞同：4
> 
> 时间：2012-07-01T11:51:36.093
> 
> 标签：macos, apple-help

我在一个文件夹中只用一种语言为我的应用程序创建了帮助，并且它有效。我尝试过本地化此内容并添加西班牙语翻译，但未能成功。

我对[Apples Guide to create a help book](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html)的理解是，我需要创建一个 .help 包以使本地化工作。我已经这样做了，但我收到一条错误消息，提示“所选主题​​当前不可用。”。有几次我认为它可以工作，但它只是显示我拥有的预本地化内容。[清空帮助查看器缓存](https://stackoverflow.com/a/11275063/31569)似乎可以阻止这种情况，但随后我会返回获取不可用内容错误消息。

在我的应用程序的 AppName-Info.plist 文件中，我有以下与帮助相关的条目：

```
<key>CFBundleHelpBookFolder</key>
<string>AppName.help</string>
<key>CFBundleHelpBookName</key>
<string>garsonix.appname.help</string> 
```

我的 AppName.help 文件具有以下结构：

```
AppName.help
    Contents
        Info.plist
        Resources
            English.lproj
                index.html
                search.helpindex
            Spanish.lproj
                index.html
                search.helpindex
            shrd
                logo.png 
```

AppName.help 中的 Info.plist 文件具有以下键：

```
<key>CFBundleDevelopmentRegion</key>
<string>en_GB</string>
<key>CFBundleIdentifier</key>
<string>garsonix.appname.help</string>
<key>CFBundleInfoDictionaryVersion</key>
<string>6.0</string>
<key>CFBundleName</key>
<string>AppName</string>
<key>CFBundlePackageType</key>
<string>BNDL</string>
<key>CFBundleShortVersionString</key>
<string>1.13</string>
<key>CFBundleSignature</key>
<string>hbwr</string>
<key>CFBundleVersion</key>
<string>1.13</string>
<key>HPDBookAccessPath</key>
<string>index.html</string>
<key>HPDBookIconPath</key>
<string>shrd/logo.png</string>
<key>HPDBookKBProduct</key>
<string>GAppName</string>
<key>HPDBookKBURL</key>
<string>http://www.garsonix.co.uk/</string>
<key>HPDBookRemoteURL</key>
<string>http://www.garsonix.co.uk/</string>
<key>HPDBookTitle</key>
<string>AppName Help</string>
<key>HPDBookType</key>
<string>3</string>
<key>HPDBookIndexPath</key>
<string>search.helpindex</string> 
```

有谁知道我做错了什么，或者知道制作 .help 文件的好教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:30:54.557

我终于得到了这个工作，但我不得不放弃 .help 文件格式。

相反，我保留了旧的简单帮助文件夹，我为每种语言复制了该文件夹。然后将每个帮助文件夹与本地化的 nib 文件一起放入主应用程序包的现有本地化文件夹中。

我发现这篇文章中的说明非常有帮助： [https ://web.archive.org/web/20150421040211/https://www.icalamus.net/ioda/howto_applehelpbook.php?lan=en](https://web.archive.org/web/20150421040211/https://www.icalamus.net/ioda/howto_applehelpbook.php?lan=en)

我仍然想知道如何使 .help 格式正常工作，但这解决了我的问题并且看起来更简单。唯一的小缺点是无法共享不需要本地化的图像等资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-25T23:32:44.670

在本地化帮助手册资源后，您应该本地化一些 Info.plist 键。

应该使用 InfoPlist.strings 文件本地化键`CFBundleName`和。`HPDBookTitle`

# c# - ServiceStack.OrmLite 中的 ntext

> ID：11281726
> 
> 赞同：8
> 
> 时间：2012-07-01T11:52:08.193
> 
> 标签：c#, sql-server, code-first, servicestack, ormlite-servicestack

如何首先在 ServiceStack.OrmLite 代码中拥有 nText 数据类型？

```
public class Email
{
    [AutoIncrement]
    public long ID { get; set; }

    public DateTime Date { get; set; }

    public string From { get; set; }

    public string Subject { get; set; } 

    nText =>
    public string Body { get; set; } 

} 
```

如果我使用字符串数据类型，ormlite 在数据库中生成 nVarchar(8000)

我需要超过 8000 个字符的数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T18:51:54.013

您需要将您的`Body`类型转换为`byte[]`from`string`以便 ServiceStack.OrmLite 使用`varchar(max)`列类型。如下所示：

```
public byte[] Body { get; set; } 
```

原因在于 ServiceStack.OrmLite 代码。

在文件[ServiceStack.OrmLite/OrmLiteDialectProviderBase.cs](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/OrmLiteDialectProviderBase.cs#L236)下，方法`InitColumnTypeMap()`为：

```
DbTypeMap.Set<byte[]>(DbType.Binary, BlobColumnDefinition); 
```

在文件[ServiceStack.OrmLite.SqlServer/SqlServerOrmLiteDialectProvider.cs](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite.SqlServer/SqlServerOrmLiteDialectProvider.cs#L27)下，方法`SqlServerOrmLiteDialectProvider()`为：

```
base.BlobColumnDefinition = "VARBINARY(MAX)"; 
```

从这段代码中，您可以看到发生了从 C# 类型到内部 ServiceStack.OrmLite 类型的内部映射，然后又返回到 SqlServer 类型。

这个问题解释了如何在字符串和字节数组之间来回转换，[如何在不手动指定编码的情况下获得 C# 中字符串的一致字节表示？](https://stackoverflow.com/q/472906/299327).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T17:19:21.090

假设你***真的***想要`NTEXT`。如果您想要`nvarchar(max)`或`varchar(max)`查看[https://stackoverflow.com/a/25729568/37055](https://stackoverflow.com/a/25729568/37055)

装饰你的领域模型`System.ComponentModel.DataAnnotations.StringLengthAttribute`

如

```
[StringLengthAttribute(8001)]
public string Markdown { get;set; } 
```

或者

```
[StringLength(Int32.MaxValue)]
public string Markdown { get;set; } 
```

使用任何大于 8000 的长度来超过 Sql Server `varchar`/`nvarchar`列类型的最大长度。

使用理解`NTEXT`声明的自定义方言提供程序。

```
public class NTextSqlProvider : SqlServerOrmLiteDialectProvider
{
  public new static readonly NTextSqlProvider Instance = new NTextSqlProvider();

  public override string GetColumnDefinition(string fieldName, Type fieldType, 
            bool isPrimaryKey, bool autoIncrement, bool isNullable, 
            int? fieldLength, int? scale, string defaultValue)
  {
     var fieldDefinition = base.GetColumnDefinition(fieldName, fieldType,
                                    isPrimaryKey, autoIncrement, isNullable, 
                                    fieldLength, scale, defaultValue);

     if (fieldType == typeof (string) && fieldLength > 8000)
     {
       var orig = string.Format(StringLengthColumnDefinitionFormat, fieldLength);

       fieldDefinition = fieldDefinition.Replace(orig, "NTEXT");
     }

     return fieldDefinition;
  }
} 
```

构建数据库工厂时使用提供者

```
var dbFactory = new OrmLiteConnectionFactory(conStr, NTextSqlProvider.Instance); 
```

# c# - Silverlight 中具有多个对象的数据验证

> ID：11281729
> 
> 赞同：1
> 
> 时间：2012-07-01T11:52:39.607
> 
> 标签：c#, data-binding, validation, silverlight-5.0

我的 Silverlight 表单需要为 3 个类的对象中的字段输入值，这 3 个类将共同请求调用 Web 服务

GUI 的正在进行中的代码如下

```
<UserControl x:Class="ClientSanitaro.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="450" d:DesignWidth="600" xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" xmlns:my="clr-namespace:It.Unina.MasterICT.ClientSanitario.Controls" xmlns:data="clr-namespace:It.Unina.MasterICT.ClientSanitario.Data"  Loaded="UserControl_Loaded">

<sdk:TabControl Height="400" HorizontalAlignment="Center" Margin="10,10,0,0" Name="tabControl" VerticalAlignment="Top" Width="550">        
    <sdk:TabItem Header="Upload documenti" Name="tabUpload">
        <sdk:TabItem.DataContext>
            <data:PazienteGui/>
        </sdk:TabItem.DataContext>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.Resources>
                    <Style TargetType="TextBox">
                        <Setter Property="Margin" Value="2"/>
                    </Style>
                    <Style TargetType="sdk:Label">
                        <Setter Property="Margin" Value="2"/>
                    </Style>
                </Grid.Resources>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="5*"/>
                </Grid.ColumnDefinitions>
                <TextBox Height="23" HorizontalAlignment="Left" Name="txtUploadEndpoint" Width="300" Grid.Column="1" VerticalAlignment="Center" />
                <sdk:Label Height="23" HorizontalAlignment="Right" Name="lblUploadEndpoint" VerticalAlignment="Center" Width="80" Content="URL endpoint" Grid.Column="0" />
            </Grid>

            <Grid Grid.Row="1" Margin="15">
                <Grid.Resources>
                    <Style TargetType="TextBox">
                        <Setter Property="Margin" Value="3"/>
                    </Style>
                    <Style TargetType="sdk:Label">
                        <Setter Property="Margin" Value="3"/>
                    </Style>
                </Grid.Resources>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>
                <sdk:Label Content="Persona" FontWeight="Bold" HorizontalAlignment="Left" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"/>
                <sdk:Label Content="Cognome" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Right"/>
                <TextBox Name="txtPersonaCognome" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch"/>
                <sdk:Label Content="Nome" Grid.Row="2" Grid.Column="0" HorizontalAlignment="Right"/>
                <TextBox Name="txtNome" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Stretch"/>
                <sdk:Label Content="Codice Fiscale" Grid.Row="3" Grid.Column="0" HorizontalAlignment="Right" />
                <TextBox Name="txtPersonaCodiceFiscale" Grid.Row="3" Grid.Column="1" HorizontalAlignment="Stretch"/>
                <sdk:Label Content="Residenza" Grid.Row="4" Grid.Column="0" HorizontalAlignment="Right"/>
                <TextBox Name="txtPazienteResidenza" Grid.Row="4" HorizontalAlignment="Stretch" Grid.Column="1"/>
                <sdk:Label Content="Struttura Sanitaria" Grid.Row="5" Grid.Column="0" HorizontalAlignment="Left" Grid.ColumnSpan="2" FontWeight="Bold" />
                <sdk:Label Content="Nome" Grid.Row="6" Grid.Column="0" HorizontalAlignment="Right"/>
                <TextBox Name="txtStrutturaNome" Grid.Row="6" Grid.Column="1" HorizontalAlignment="Stretch"/>
                <sdk:Label Content="Indirizzo" Grid.Row="7" Grid.Column="0" HorizontalAlignment="Right"/>
                <TextBox Name="txtStrutturaIndirizzo" Grid.Row="7" Grid.Column="1" HorizontalAlignment="Stretch"/>
                <sdk:Label Content="Documento Sanitario" Grid.Row="0" Grid.Column="2" FontWeight="Bold" HorizontalAlignment="Left" Grid.ColumnSpan="2"/>
                <sdk:Label Content="Contenuto" Grid.Row="1" Grid.Column="2" HorizontalAlignment="Right"/>
                <ComboBox Name="cmbTipoContenuto" Grid.Row="1" Grid.Column="3" HorizontalAlignment="Stretch"/>
                <sdk:Label Content="Tipo MIME" Grid.Row="2" Grid.Column="2" HorizontalAlignment="Right"/>
                <TextBlock Name="lblMimeType" Grid.Row="2" Grid.Column="3" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>

                <sdk:Label Content="File" Grid.Row="4" Grid.Column="2" HorizontalAlignment="Right"/>
                <my:FileUpload Grid.Column="3" Grid.Row="4" Grid.RowSpan="2" HorizontalAlignment="Stretch" x:Name="fileUpload" VerticalAlignment="Top" FileUploaded="fileUpload_FileUploaded" FileRemoved="fileUpload_FileRemoved" />
                <Button Content="Upload" Grid.Column="3" Grid.Row="7" HorizontalAlignment="Stretch" Name="btnUpload" VerticalAlignment="Stretch" Click="btnUpload_Click" />
            </Grid>
        </Grid>

    </sdk:TabItem>
    <sdk:TabItem Header="Ricerca documenti" Name="tabRicerca">
        <Grid></Grid>
    </sdk:TabItem>
</sdk:TabControl> 
```

如您所见，在网格中，我有几个字段，都是必需的（`txtCodiceFiscale`长度为 16 个字母数字字符）。我的服务参考定义了 3 个主要类：`Persona`(person) `Documento`(Document) 和`StrutturaSanitaria`(HealthFacility)。环顾四周，我发现执行验证的“更好”方法是使用数据绑定（我可以在经典的 WinForms 中轻松做到这一点），也许它与我尚未掌握的 MVVM 模式有关。

我了解到，我可以将表单及其文本框绑定到数据上下文对象的属性，而不是让表单按钮的 Click 事件手动验证代码。

## 问题

我需要 3 个数据对象。到目前为止，我发现的所有示例都只显示了一个分配给根控件的对象（在我的情况下，我需要将该对象绑定到第一个 TabItem，因为第二个选项卡应该显示来自 Web 服务的结果并且将被正确绑定）。是否可以将控件绑定到多个对象？（我不知道指定多个数据对象的语法）如果不知道，我至少可以将它绑定到这样的类并引用树中的每个属性吗？

```
public class DataContainer {
    public Persona Persona{get; set;}
    public Documento Documento {get; set;}
    public StrutturaSanitaria Struttura {get; set;}
} 
```

它为我省去了定义一个包含所有值的类的麻烦，所以至少当我单击时，`Submit`我所有的对象都充满了数据。

或者，您是否有其他可行且代码成本低廉的解决方案？我正在寻找一些书籍，但我没有时间在截止日期之前阅读它们。有人可以给我看一个关于数据验证的好教程，帮助我**理解**它背后的机制，或者简单地向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:09:43.457

几年前，Colin Eberhardt 发表了一篇关于Silverlight 中[多重绑定的博文。](http://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/)也许这会有所帮助？

[这与WPF MultiBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)类中应用的方法基本相同。

# php - 400+张图片的PHP分页

> ID：11281733
> 
> 赞同：-2
> 
> 时间：2012-07-01T11:53:20.810
> 
> 标签：php

a 有一个网站，目录中有 400 多张图片。我想在每页上按 12 列出它们。我怎样才能做到这一点？这是我的实际代码：

```
 <!doctype html>
<html lang="hu">
    <head>
        <title>Amatőr</title>
        <meta charset="utf-8"/>
    </head>
    <body>
        <h2><a href="../php/upload_picture.php" style="font-size:15pt; color:#ff00e8; text-decoration: none;">Vannak jó képeid? Töltsd fel őket és kikerülhetnek az oldalra!</a></h2>
        <article>
            <header>
                Amatőr Lányok
            </header>
            <div id="kepek">
                <?php
                $imgdir = '../img/blog/img/amator/'; //Pick your folder
                $allowed_types = array('png','jpg','jpeg','gif'); //Allowed types of files
                $dimg = opendir($imgdir);//Open directory
                while($imgfile = readdir($dimg))
                {
                  if( in_array(strtolower(substr($imgfile,-3)),$allowed_types) OR
                      in_array(strtolower(substr($imgfile,-4)),$allowed_types) )
                /*If the file is an image add it to the array*/
                  {$a_img[] = $imgfile;}
                }

                 $totimg = count($a_img);  //The total count of all the images
                //Echo out the images and their paths incased in an li.
                 for($x=0; $x < $totimg; $x++){ echo "<a onclick='Lightbox.start(this, false, false, false, false); return false;' rel='lightbox[amator]' href='" . $imgdir . $a_img[$x] . "'><img class='kep_listaz' width='200px' height='160px' src='" . $imgdir . $a_img[$x] . "' /></a>";}
                ?>
            </div>
        </article>
    </body>
</html>

Thanks! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:12:59.330

所以这实际上更像是一道数学题。您需要获取图像的总数，然后将其除以每页的最大图像数（确保这样[`ceil()`](http://php.net/ceil)做）。

您现在拥有查看所有这些图像所需的最大页面数。您现在需要做的是确定您是想要 page=1/page=2 等还是作为开始和结束。两者都相对容易，但是，使用您需要做的页面

```
$page = (int)$_GET['page'];
$start = $page * $max_items_per_page;
$end = $start + $max_items_per_page; 
```

这样可能更省钱。还要添加额外的代码以确保您不会超出请求的页面的范围。

现在是获取文件数组（我建议您使用[`glob()`](http://php.net/glob)）并从头到尾使用[`array_slice()`](http://php.net/array_slice)它的问题。

最后只有上一页/下一页，或列出所有（或部分）页面。获取下一个和上一个就像添加/删除 1 到`$page`，即`$next = $page + 1;`和一样简单`$prev = $page-1;`。再次，对于这两个，仔细检查你没有越界。如果它们超出范围，最好不要显示下一个/上一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:13:50.937

有两种方法可以对这种数据进行分页：在前端发送所有数据，JavaSctipt 一次只向用户显示一部分，或者在后端，页面只呈现一部分时间，你重新加载整个页面以获得更多。

让它工作的最快方法是使用后端方法：

在你的 for 循环之前添加`$page = isset($_GET['page']) ? $_GET['page']-1 : 0;`

将循环的参数更改为 `$x=$page*12; $x < $totimg && $x < ($page+1)*12; $x++`

然后您可以通过添加`?page=3`到 url来操作页面

如果提交了无效的页码，您还需要添加一些错误处理。

# python - redis - 使用哈希

> ID：11281734
> 
> 赞同：4
> 
> 时间：2012-07-01T11:53:51.020
> 
> 标签：python, django, nosql, memcached, redis

我正在使用 redis 为我的 Web 应用程序实现社交流和通知系统。我是 redis 的新手，我对哈希及其效率有些怀疑。

我已经阅读了这篇很棒[的 Instagram 帖子](http://instagram-engineering.tumblr.com/post/12202313862/storing-hundreds-of-millions-of-simple-key-value-pairs) ，并计划实施他们类似的解决方案以减少存储空间。

正如他们的博客中提到的，他们确实喜欢这样

> 为了利用散列类型，我们将所有媒体 ID 存储到 1000 的存储桶中（我们只取 ID，除以 1000 并丢弃余数）。这决定了我们落入哪个键；*接下来，在位于该键的散列中，媒体 ID 是散列中*的查找键，用户 ID 是值。举个例子，给定媒体 ID 1155315，这意味着它落入桶 1155 (1155315 / 1000 = 1155)：

```
HSET "mediabucket:1155" "1155315" "939"
HGET "mediabucket:1155" "1155315"
> "939" 
```

因此，他们没有将**1000 个单独的键**存储在**一个带有数千个查找键的哈希中**。我**的疑问**是为什么我们不能将查找键值增加到更大。

**例如：** `Media ID of 1155315 will fall into mediabucket:115 by dividing it by 10000` 甚至更大。

他们为什么要解决一个具有 1000 个查找键的哈希桶。为什么他们不能拥有**一个具有 100000 个查找键的哈希桶**。这与**效率**有关吗？

我需要您对在我的 Web 应用程序中实施有效方法的建议。

PS请！不要说stackoverflow不是用来提建议的，我也不知道去哪里寻求帮助。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T12:18:00.870

是的，这与效率有关。

> 我们向总是乐于助人的 Redis 核心开发人员之一 Pieter Noordhuis 征求意见，他建议我们使用 Redis 哈希。Redis 中的哈希是可以非常有效地在内存中编码的字典；Redis 设置 'hash-zipmap-max-entries' 配置哈希可以具有的最大条目数，同时仍能有效编码。我们发现这个设置最好在 1000 左右；更高，HSET 命令将导致明显的 CPU 活动。有关更多详细信息，您可以查看 zipmap 源文件。

小散列以一种特殊的方式（zipmaps）编码，即内存高效，但操作 O(N) 而不是 O(1)。因此，使用一个具有 100k 字段的 zipmap 而不是 100 个具有 1k 字段的 zipmap，您不会获得内存收益，但您的所有操作都会慢 100 倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:22:56.920

基本上，他们希望存储在单个哈希中的值的数量不超过 1000。很可能，他们设置了 Redis 实例配置以很好地使用这个数字（你的集合`hash-zipmap-max-entries`）。

> 每次哈希超过指定的元素数量或元素大小时，它将被转换为真正的哈希表，并且内存节省将丢失。

-- [http://redis.io/topics/memory-optimization](http://redis.io/topics/memory-optimization)

据我了解，您的问题是“为什么正好是 1000 而不是更多？” 嗯，这是因为他们必须在空间效率和速度之间做出选择。节省空间的表示具有操作复杂性`O(N)`，不像`O(1)`普通哈希那样 - 它**慢 N 倍**，但占用的内存更少。

他们测试了不同的值，发现 1000 是一个很好的折衷解决方案 - 占用空间不大，但仍然足够快。

# java - 有界类型参数有什么好处？

> ID：11281735
> 
> 赞同：2
> 
> 时间：2012-07-01T11:54:09.847
> 
> 标签：java, generics

请参见下面的示例，与有界类型参数相比有什么`f(U u)`好处`g(I obj)`？

```
interface I {}
class A {
    public static <U extends I> void f(U u){ }
    public static void g(I obj) { }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T12:01:06.347

对于这种特殊情况，没有任何内容。您可以在`U`（知道`U extends I`）上执行与在`I`.

更多情况下，您会看到它产生实际影响的案例：

```
public static <U extends I> void f(Collection<U> collection) 
```

或者，更一般地说，有界类型参数被用作另一个泛型类型的参数。

# php - 我的 URL 和 _POST 有什么问题？

> ID：11281736
> 
> 赞同：0
> 
> 时间：2012-07-01T11:54:26.047
> 
> 标签：php, forms, url

出于某种原因，我无法让它工作。它提取名称和团队，但不提取其他数据。

这是我的 _POST 数据： $id=$_GET['name']; $tm=$_GET['团队']; $hr=$_POST['小时']; $bl = $_POST['block']; $sp = $_POST['spec_area']; $wx = $_POST['wx'];

这是我的网址：

```
<a href="ola_admin.php?  name='.$data["name"].'&web='.$data["webex"].'&team='.$data['team'] .'&hr='.$data['hours'] .'">update</a></td> 
```

这就是我试图把它放在哪里（当然只是测试）：

```
<?php
  echo $tm;
  echo $wx;
  echo $hours;
  echo $hr;
?> 
```

所以当我点击链接显然我希望它发布数据......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:56:55.173

您正在通过`GET`请求传递变量，但您试图通过 检索其中一些变量`$_POST`，只需将它们全部更改为`$_GET`：

```
$id = $_GET['name'];
$tm = $_GET['team'];
$hr = $_GET['hours'];
$bl = $_GET['block'];
$sp = $_GET['spec_area'];
$wx = $_GET['wx']; 
```

如果要使用，`$_POST`则需要通过`<form>`with发送数据`method="POST"`。

[PHP 手册：来自外部源的变量](http://php.net/manual/en/language.variables.external.php)

您还应该知道，以这种方式使用它会导致 XSS 漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:57:07.910

如果您以您的方式通过 URL 发送数据，则只能使用`$_GET`. 该数组用于在标签`$_POST`中提交的数据。`<form>`

[http://www.tutorialspoint.com/php/php_get_post.htm](http://www.tutorialspoint.com/php/php_get_post.htm)

# jquery - 如何使用 CSS 从图像中提取颜色？

> ID：11281740
> 
> 赞同：1
> 
> 时间：2012-07-01T11:55:12.053
> 
> 标签：jquery, html, css, image

我的网页上有这样的图像：

```
<img src="/Images/content/home.png" alt="" style="float: left;"> 
```

是否有一个 CSS 属性，我可以使用该属性从该图像中提取一些颜色，而无需进入 Photoshop 并编辑图像。更好的是，我可以使用在线应用程序来“处理”图像并去除一些颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:18:25.367

一个名为[**vintageJS**](https://github.com/rendro/vintageJS)的优秀**jQuery**插件可以将图像转换为灰度，并且*不需要服务器端处理*......这一切都在查看器浏览器中完成。[](https://github.com/rendro/vintageJS)

 ***可用于**Firefox**、Chrome 和其他浏览器的**效果包括****灰度**、**模糊边缘**、**棕褐色**、**去饱和**、**噪点**、**亮度**、**对比度**、**曲线**等。还可以实现**多种效果！**

 ****关于允许图像处理然后保存图像的在线应用程序，**vintageJS 插件**有这个很酷的[**Playground 网页**](http://vintagejs.com/)，允许您上传任何图像，即时自定义不同的效果，并下载您编辑的图像！

![在此处输入图像描述](../Images/20b32f66a7198e093416651454238f4e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:07:49.797

如果你想编辑你的图像，有很好的网络应用程序可以用于此目的

*   [像素](http://pixlr.com/editor/)
*   [凤凰（由鸟舍）](http://advanced.aviary.com/online/image-editor)

CSS3/Webkit 过滤器是您正在寻找的。但截至目前，这些仅适用于 Chrome Canary 和 Webkit Nightly。可用的效果有**灰度**、**模糊**、**棕褐色**、**饱和**度、**不透明度**、**亮度**、**对比度**、**色调旋转**和**反转**。

资源： [CSS3 过滤器](http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/)

相反，您可以只设置`opacity`.

```
img {  
    opacity: .7;  
    //above line works in Firefox, Safari, Chrome, Opera
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=70);  
    // above line works in IE6, IE7, and IE8  
   -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=70)";  
    // above line is IE8 only
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T13:15:06.927

> 更好的是，我可以使用在线应用程序来“处理”图像并去除一些颜色吗？

嗨，杰玛，

您提到您使用 Photoshop，但不想打开它来执行此操作。如果灰度图像是你必须经常做的事情，你应该考虑为此创建一个 Photoshop 'Droplet'。基本上，它允许您创建一个桌面快捷方式，您可以将文件（或文件文件夹）拖到该快捷方式，并且它将执行您设置的任何任务以在其中自动执行，例如

1.  打开文件
2.  转换为黑白
3.  以 80% 质量另存为 [文件名]-bw.jpg
4.  关闭文件

[这是 Adob​​e 文档的链接，该文档](http://help.adobe.com/en_US/photoshop/cs/using/WSfd1234e1c4b69f30ea53e41001031ab64-7427a.html)介绍了从操作创建液滴以自动化批处理。另一个选项可能是[ImageMagick](http://www.imagemagick.org/script/index.php)用于批处理图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T12:00:54.433

尝试设置`opacity`图像。

例子：

```
img
{
opacity:0.6;
filter:alpha(opacity=60); /* For IE8 and earlier */
} 
```*******

# css - 如何使选择列表看起来与 Bootstrap nav-pills 相同？

> ID：11281748
> 
> 赞同：1
> 
> 时间：2012-07-01T11:56:56.740
> 
> 标签：css, twitter-bootstrap, selectlist

我想让选择列表看起来像这样-> [http://i.imgur.com/RWg6F.png](http://i.imgur.com/RWg6F.png)

我可以这样说：

```
 <select>
   <ul class="nav nav-pills pull-left">
<li class="dropdown">
  ...
</li>
   </ul>
    </select> 
```

会好还是不好？

# mysql - MySQL：如何在触发器中设置默认用户

> ID：11281753
> 
> 赞同：0
> 
> 时间：2012-07-01T11:57:19.643
> 
> 标签：mysql, triggers, default

我有这个 MySQL 表：

```
create table test.customer (
 ID             INTEGER,
 CREATION_TIME  DATETIME,
 CREATION_USER  VARCHAR(50),
 CHANGE_TIME    TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 CHANGE_USER    VARCHAR(50),
 PRIMARY KEY(ID)
); 
```

我想自动设置用户和时间戳以进行日志记录。我在插入之前确实有一个触发器（实际上只为creation_time编写）：

```
delimiter #
create trigger test.customer_creation 
before insert on test.customer 
for each row 
begin
 set NEW.CREATION_TIME = NOW();
 IF (NEW.CREATION_USER is null or NEW.CREATION_USER = '') 
 THEN set NEW.CREATION_USER = USER(); 
 end IF;
end #
delimiter ; 
```

但我真的不想要一个只针对 CHANGE_USER 的触发器。是否有可能设置 CHANGE_USER 类似于：DEFAULT USER()？还是我必须创建一个额外的触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:16:34.177

在 MySQL 中，您根本不能使用函数作为列的默认值，您可以使用关键字：和`NULL`，而您不能使用函数（除了在内部表示为 的同义词）。`CURRENT_TIMESTAMP``localtimestamp``now()``CURRENT_TIMESTAMP`

所以在你的情况下，要遵循的方法是触发器 ON insert ...你需要额外的触发器。

# c# - 以编程方式检查 Sql Spell

> ID：11281759
> 
> 赞同：-3
> 
> 时间：2012-07-01T11:58:16.517
> 
> 标签：c#, sql

我有一个 .NET 程序，它获取查询并检查它。这个查询可能非常大，运行它需要很多时间。所以我需要运行 Check Splling 而不运行它。谢谢。

## 编辑

因为我的查询可能**非常大**并且运行它**需要很多时间**。我的程序有两种模式：

1- 测试模式：用于测试输入查询 2- 此查询将在稍后运行，当我想执行此查询时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:22:10.353

我猜你的意思不是拼写检查器，而是语法检查，在这种情况下，你应该看看[SQL 解析器](http://www.sqlparser.com/)库。

除其他外，允许：

> 离线 SQL 语法检查 验证语法而不连接到数据库

# jquery - 将鼠标悬停在一个 div 上，另一个 div 淡入并在用户悬停在其上时保持可见

> ID：11281761
> 
> 赞同：0
> 
> 时间：2012-07-01T11:58:20.657
> 
> 标签：jquery, popup, hover, fadein, fadeout

我有一个容器 div。在容器内部，除了文章标题外，还有一个隐藏的 div（位置：abolute，紧邻文章标题和容器 div 的“外部”），其中包含文章的图像和修剪后的文本。

我想要什么：用户将鼠标悬停在文章标题上：

```
<div class="field-title"><span class="field-content"><a href="#">Lorem Ipsum</a></span></div> 
```

结果，弹出

```
<div class="article_popup"> 
```

在文章的标题容器旁边淡入。

如果用户没有将鼠标悬停在弹出窗口上，则弹出窗口会在 1 秒后淡出。如果他这样做了，只要用户将鼠标悬停在弹出窗口上，popu 就会保持可见，然后在 1 秒后淡出。

问题：

-1- 有许多文章容器和弹出 div 共享同一个类，所以如果只有 1 个标题悬停，所有弹出窗口都会出现。

-2- 我试过这个和类似的解决方案：

```
(function ($) {
    $(document).ready(function(){
        $('.field-title').bind('mouseenter', function() {
        $('.article_popup').fadeIn();
        });
        $('.field-title').bind('mouseleave', function() {
        $('.article_popup').fadeOut();
        });
    });
}(jQuery)); 
```

但这并不包括用户将鼠标悬停在弹出窗口本身上的情况。

更新：http: [//jsfiddle.net/zThP7/14/](http://jsfiddle.net/zThP7/14/)

这是我的 HTML（您可以看到许多嵌套的 div 具有相同的类）：

```
<div class="container_block">
<table class="container_table">
    <tbody>
          <tr class="row-1">
                  <td class="col-1">
                        <div class="field-title"><span class="field-content"><a href="#">Lorem Ipsum</a></span></div>  
                        <div class="article_popup_container">
                            <div class="field-content">
                                <div class="article_popup">
                                    <div class="article_popup_photo"><a href="#"><img src="http://image_path"/></a></div>
                                    <div class="article_popup_text">Lorem Ipsum</div>
                                </div>
                            </div>  
                        </div>          
                  </td>
                  <td class="col-2">
                        <div class="field-title"><span class="field-content"><a href="#">Lorem Ipsum</a></span></div>  
                        <div class="article_popup_container">
                            <div class="field-content">
                                <div class="article_popup">
                                    <div class="article_popup_photo"><a href="#"><img src="http://image_path"/></a></div>
                                    <div class="article_popup_text">Lorem Ipsum</div>
                                </div>
                            </div>  
                        </div>        
                   </td>
          </tr>
          <tr class="row-2">
                  <td class="col-1">
                        <div class="field-title"><span class="field-content"><a href="#">Lorem Ipsum</a></span></div>  
                        <div class="article_popup_container">
                            <div class="field-content">
                                <div class="article_popup">
                                    <div class="article_popup_photo"><a href="#"><img src="http://image_path"/></a></div>
                                    <div class="article_popup_text">Lorem Ipsum</div>
                                </div>
                            </div>  
                        </div>        
                  </td>
                  <td class="col-2">
                        <div class="field-title"><span class="field-content"><a href="#">Lorem Ipsum</a></span></div>  
                        <div class="article_popup_container">
                            <div class="field-content">
                                <div class="article_popup">
                                    <div class="article_popup_photo"><a href="#"><img src="http://image_path"/></a></div>
                                    <div class="article_popup_text">Lorem Ipsum</div>
                                </div>
                            </div>  
                        </div>        
                  </td>
          </tr>
          <tr class="row-3">
                  <td class="col-1">
                        <div class="field-title"><span class="field-content"><a href="#">Lorem Ipsum</a></span></div>  
                        <div class="article_popup_container">
                            <div class="field-content">
                                <div class="article_popup">
                                    <div class="article_popup_photo"><a href="#"><img src="http://image_path"/></a></div>
                                    <div class="article_popup_text">Lorem Ipsum</div>
                                </div>
                            </div>  
                        </div>        
                  </td>
                  <td class="col-2">
                        <div class="field-title"><span class="field-content"><a href="#">Lorem Ipsum</a></span></div>  
                        <div class="article_popup_container">
                            <div class="field-content">
                                <div class="article_popup">
                                    <div class="article_popup_photo"><a href="#"><img src="http://image_path"/></a></div>
                                    <div class="article_popup_text">Lorem Ipsum</div>
                                </div>
                            </div>  
                        </div>        
                  </td>
          </tr>
      </tbody>
</table> 
```

我更喜欢用自定义代码来解决这个问题，而不是建议的 jquery 插件，但如果它太复杂，一个功能性和跨浏览器兼容的插件就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:53:12.417

您需要将弹出框移动到同一个容器内，这样您只需要处理一个元素的鼠标移出。检查第一个，它至少会给你一个起点。[http://jsfiddle.net/zThP7/15/](http://jsfiddle.net/zThP7/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:57:04.830

我认为这就是您要寻找的东西；）

[https://stackoverflow.com/a/1670561/472406](https://stackoverflow.com/a/1670561/472406)

您唯一需要更改的是为弹出元素添加 mouseenter 事件并清除超时，并为弹出窗口的 mouseleave 添加超时以隐藏弹出窗口

由于在标题元素中，如果用户从弹出窗口转到标题，则必须清除超时，弹出窗口不会消失

# sockets - 使用 Node.js 进行游戏配对时如何设计

> ID：11281762
> 
> 赞同：1
> 
> 时间：2012-07-01T11:58:48.333
> 
> 标签：sockets, node.js

我正在使用 node.js 进行游戏配对（例如，多个客户端连接服务器。如果有多个玩家，则它们相互连接；否则将被踢 30 秒）。

目前，我正在使用套接字进行连接（这可以检测到意外丢失的连接）。但我想不出一种优雅的配对方式：

```
var net = require('net');
var _clients = new Array();

net.createServer(function(_socket) {
  _socket.on('data', function(_data) {
    //Parse client data
    _clients.push(_socket);
    setTimeout(function(){
      _socket.write('kicked\n');
    },30*1000);
  _socket.on('close', function(data) {
    //Delete _socket from _clients
  }
}).listen(6969, '127.0.0.1');

setInterval(function(){
  var pair = new Array();
  while(_clients.length>2)
  {
    var _s1 = _clients.pop(), _s2 = _clients.pop();
    // Pair _s1 & _s2
  }
},2*1000); 
```

当前的代码可以工作，但它的设计真的很糟糕:(

(1)使用SetInterval，而不是异步调用。(2) 维护像 _clients 这样的数组很不方便，因为我必须处理“被踢”/丢失连接/对或其他情况。

PS。目前我正在按时间顺序配对客户，但可能需要随机配对或其他条件以避免在线玩家不多时总是配对相同的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:14:48.190

为什么不使用类似下面的东西？

**无连接池**

```
var net = require('net')
, pendingPair = null;

net.createServer(function(_socket) {
  _socket.on('data', function(_data) {
    //Parse client data
    if(!pendingPair) {
      pendingPair = _socket;
    } else {
      //  Now you have a pair!
      var p1 = pendingPair
        , p2 = _socket;

      pendingPair = null;
    }
}).listen(6969, '127.0.0.1'); 
```

建立连接后，您会立即获得自动配对。您仍然需要在某处跟踪这些套接字以启动客户端和断开连接，但您应该能够摆脱 setIntervals。

**带连接池**

```
var net = require('net')
  , _ = require('underscore')._
  , clients = {}
  , games = {};

function setKickTimer(socket) {
    socket.kickTimer = setTimeout(function() {
        socket.write('kicked\n');
    }, 30 * 1000);
}

net.createServer(function(socket) {
    socket.id = Math.floor(Math.random() * 1000);
    setKickTimer(socket);
    clients[socket.id] = socket;

    socket.on('data', function(data) {
        socket.data = parseData(data);
    }

    socket.on('close', function(data) {
        var opponent = _.find(clients, function(client) { return client.opponentId === socket.id; });
        //  The opponent is no longer part of a pair.
        if(opponent) {
            delete opponent.opponentId;
            setKickTimer(opponent);
        }

        delete clients[socket.id];
    }

}).listen(6969, '127.0.0.1');

setInterval(function(){
    //  Get the client ids of clients who are not matched, and randomize the order
    var unmatchedClientIds = _.shuffle(_.keys(_.filter(clients, function(client) { return !client.opponentId; })));
    while(unmatchedClientIds > 2) {
        var c1 = unmatchedClientIds.pop(),
          , c2 = unmatchedClientIds.pop();

        clearTimeout(clients[c1].kickTimer);
        clearTimeout(clients[c2].kickTimer);
        clients[c1].opponentId = c2;
        clients[c2].opponentId = c1;
    }
},2*1000); 
```

这不是一个完整的工作解决方案，但它应该让您了解如何管理断开的连接并将用户从队列中踢出。请注意，我正在使用[underscore.js](http://underscorejs.org/)来简化对集合的操作。

# ruby - 在 ruby 中解析大的 txt 文件需要很多时间？

> ID：11281764
> 
> 赞同：0
> 
> 时间：2012-07-01T11:59:01.303
> 
> 标签：ruby

下面是从 Internet 下载大约 9000 行的 txt 文件并填充数据库的代码，我已经尝试了很多，但它需要超过 7 分钟的时间。我正在使用 win 7 64 位和 ruby​​ 1.9.3。有没有办法更快？？

```
require 'open-uri'
require 'dbi'
dbh = DBI.connect("DBI:Mysql:mfmodel:localhost","root","")
#file = open('http://www.amfiindia.com/spages/NAV0.txt')
file = File.open('test.txt','r')
lines = file.lines
2.times { lines.next }
curSubType = ''
curType = ''
curCompName = ''
lines.each do |line|
    line.strip!
if line[-1] == ')'
    curType,curSubType = line.split('(')
    curSubType.chop!
elsif line[-4..-1] == 'Fund'
    curCompName = line.split(" Mutual Fund")[0] 
elsif line == ''
    next
else
    sCode,isin_div,isin_re,sName,nav,rePrice,salePrice,date = line.split(';')
    sCode = Integer(sCode)
    sth = dbh.prepare "call mfmodel.populate(?,?,?,?,?,?,?)"
    sth.execute curCompName,curSubType,curType,sCode,isin_div,isin_re,sName
end
end
dbh.do "commit"
dbh.disconnect
file.close

106799;-;-;HDFC ARBITRAGE FUND RETAIL PLAN DIVIDEND OPTION;10.352;10.3;10.352;29-Jun-2012 
```

这是要插入到表中的数据格式。现在有 8000 行这样的行，我怎样才能通过组合所有这些来进行插入并只调用一次该过程。此外，mysql 是否支持数组和迭代在例程中做这样的事情。请提出您的建议。谢谢。

**编辑**

我必须根据它们是否已经存在来插入表，我还需要在插入表之前使用条件比较。我肯定不会为这些写SQL语句，所以我写了SQL存储过程。现在我有一个列表@the_data，我如何将它传递给过程，然后在 MySQL 端遍历它。有任何想法吗 ？

```
insert into mfmodel.company_masters (company_name) values
#{@the_data.map {|str| "('#{str[0]}')"}.join(',')} 
```

这进行了 100 次插入，但其中 35 次是多余的，因此我需要在插入之前在表中搜索现有条目。

有任何想法吗 ？**谢谢**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T13:38:58.980

从您的评论来看，您似乎将所有时间都花在执行数据库查询上。在最近的一个 Ruby 项目中，我还必须优化一些将 CSV 文件中的数据导入数据库的慢代码。通过使用单个批量`INSERT`查询导入所有数据，而不是对 CSV 文件的每一行进行 1 个查询，我的性能提高了大约 500 倍。我将所有数据累积在一个数组中，然后使用字符串插值和`Array#join`.

从您的评论来看，您似乎不知道如何为批量构建和执行动态 SQL `INSERT`。首先将数据放入嵌套数组中，并以已知顺序插入字段。举个例子，假设我们有这样的数据：

```
some_data = [['106799', 'HDFC FUND'], ['112933', 'SOME OTHER FUND']] 
```

您似乎正在使用 Rails 和 MySQL，因此动态 SQL 必须使用 MySQL 语法。要构建和执行`INSERT`，您可以执行以下操作：

```
ActiveRecord::Base.connection.execute(<<SQL)
  INSERT INTO some_table (a_column, another_column)
  VALUES #{some_data.map { |num,str| "(#{num},'#{str}')" }.join(',')};
SQL 
```

您说您需要将数据插入到 2 个不同的表中。这不是问题。只需将每个表的数据累积在不同的数组中，然后执行 2 个动态查询，可能在事务中。2 个查询将比 9000 快得多。

同样，您在评论中说您可能需要*更新*一些记录而不是插入。我上面提到的“CSV 导入”案例也是如此。解决方案只是稍微复杂一点：

```
# sometimes code speaks more eloquently than prose
require 'set'
already_imported = Set.new
MyModel.select("unique_column_which_also_appears_in_imported_files").each do |x|
  already_imported << x.unique_column_which_also_appears_in_imported_files
end

to_insert,to_update = [],[]
imported_data.each do |row|
  # for the following line, don't let different data types 
  #   (like String vs. Numeric) get ya
  # if you need to convert the imported data to match correctly against what's
  #   already in the DB, do it!
  if already_imported.include? row[index_of_unique_column]
    to_update << row
  else
    to_insert << row
  end
end 
```

然后你必须为所涉及的每个表构建一个动态`INSERT` *和*一个动态`UPDATE`。如果您需要，请在Google 上搜索`UPDATE`语法，并使用所有您最喜欢的字符串处理函数！

回到上面的示例代码，请注意数字字段和字符串字段之间的区别。如果字符串可能包含单引号，则必须确保所有单引号都被转义。`String#gsub`当您尝试执行此操作时，的行为可能会让您感到惊讶：它为 赋予了特殊含义`\'`。到目前为止，我发现转义单引号的最佳方法是：`string.gsub("'") { "\\'" }`. 也许其他海报知道更好的方法。

如果要插入日期，请​​确保将它们转换为 MySQL 的日期语法。

是的，我知道“自己动手”的 SQL 清理非常有问题。上述方法甚至可能存在安全漏洞；如果是这样，我希望我的消息灵通的同龄人能够让我直截了当。但是性能提升太大了，不容忽视。同样，如果这可以使用带有占位符的准备好的查询来完成，并且您知道如何，请发布！

查看您的代码，您似乎正在使用存储过程 ( `mfmodel.populate`) 插入数据。即使您确实想为此使用存储过程，为什么还要`dbh.prepare`在循环中？您应该能够将该行移到`lines.each`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:41:57.037

您可能想尝试将数据导出为 csv 并使用“加载数据文件...替换”加载它。它似乎比尝试构建批量插入查询更清洁/更容易。

# javascript - .load() 可以在 IE 和 dreamweaver 预览中使用，但不能在歌剧和 chrome 中使用

> ID：11281769
> 
> 赞同：0
> 
> 时间：2012-07-01T12:00:19.767
> 
> 标签：javascript, jquery, ajax, google-chrome, load

无法让这段代码在 chrome 中工作，这是必不可少的，因为我正在为 android 开发。任何人都可以看到错误吗？

我只想将“page1.html”加载到“#container1”中。应该很容易，它以前工作过。但是我尝试从头开始重建代码，但我看不出错误是什么。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>TheTutorialBlog.com : jQuery Deep Linking</title>    

  <link href="css_elIndex.css" rel="stylesheet" type="text/css" />
<script src="jquery-1.7.2.min.js"></script>
<script src="bbq-1.2.js"></script>
<script type="text/javascript">

$("document").ready(function(){
    alert('doc ready');
    $('#container1').load('page1.html');
});
</script>
</head>
<body>
<div class ="topBar">
    <div class = "backButton">Home</div>
</div>
<div id="pageContainer">
    <div class="pageViewer" id="container1">            
    </div>
    <div class="pageViewer" id="container2"> 
    </div>
    <div class="pageViewer" id="container3"> 
    </div>
</div>

</body>
</html> 
```

页1.html：

```
<ul class="tabs">
    HEi
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:04:10.923

通过本地文件系统 ( `file://`URL) 访问文件时，出于安全原因，您无法在 Chrome 和 Opera 中加载任何本地 AJAX 资源。

使用 HTTP 时，有“同源策略”来防止站点访问他们不应该访问的数据。然而，在本地文件系统上，没有办法知道什么是安全的，什么是不安全的。因此，对本地文件的 AJAX 请求通常会被阻止。

# css - 将 2 个元素彼此相邻浮动

> ID：11281772
> 
> 赞同：0
> 
> 时间：2012-07-01T12:00:48.863
> 
> 标签：css, html-lists

我试图在右侧的 li 列表中放置两个元素以获得结果：
*一些文本........A....B*

不幸的是订购让我发疯。

这是html代码：

```
<ul class="list">
<li>some text 
     <small class="a">A</small>
     <small class="b">B</small>
</li>
</ul> 
```

使用下面的 CSS 代码，我可以让右侧的小元素彼此相邻，但结果是我在右侧看到了 A 旁边的 B！

```
.list li{
    background-color:#282828;
    color:#ffffff;
    font-size:20px;
    text-transform:uppercase;
    padding-left:5px;
 }

 .list small.a {
    display:inline;
    float:right;
 }

 .list small.b {
    display:inline;
    float:right;
 } 
```

所以，我的目标是：
一些 tex.....................A....B

但例如它看起来像：
一些文本............B......A

**请参阅此处的示例**-> [http://jsfiddle.net/LKVdE/](http://jsfiddle.net/LKVdE/)

预先感谢任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:06:57.870

这是解决方案：http: [//jsfiddle.net/surendraVsingh/LKVdE/1/](http://jsfiddle.net/surendraVsingh/LKVdE/1/)

**CSS**

```
.list small.a {
    background-color: #000000;
    display: inline;
}
.list small.b {
    background-color: #ff0000;
    display: inline;
}
.list li span{
    display: inline-block;
    float: right;
} 
```

**HTML**

```
<ul class="list">
     <li>Brennwert kJ / kcal
         <span>
            <small class="a">1109kJ / 261kcal</small>
            <small class="b">455kJ / 107kcal</small>
         </span>
     </li>
</ul> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:17:38.187

为什么会发生这种情况，因为第一个样式应用于将其移动到右侧的 a ，标记中接下来出现的任何内容现在必须从右侧跟随 a 这就是为什么您看到**BA**而不是**AB**

标记更改：在跨度内包含文本并添加`float:left`到其中

```
<ul class="list">
<li><span class="text">some text</span>
     <small class="a">A</small>
     <small class="b">B</small>
</li>
</ul> 
```

Css 更改，`float:right`从 a 和 b 中删除并添加`float:left`到文本

```
 .text{float:left;}
    .list small.a {
        display:inline;
     }  
     .list small.b {
        display:inline;
     } 
```

工作小提琴：http: [//jsfiddle.net/LKVdE/8/](http://jsfiddle.net/LKVdE/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T12:23:10.960

A和B应该放在一个右浮动容器中：

```
 .list small.a {
            display:inline;
        }

        .list small.b {
            display:inline;
        }

        .floatright {
            float:right;
        } 
```

和

```
 <li>some text
            <div class="floatright">
                <small class="a">A</small>
                <small class="b">B</small>
            </div>
        </li> 
```

# java - 如何使用 httpClient 在 Java 中过滤部分 xml 文件

> ID：11281775
> 
> 赞同：2
> 
> 时间：2012-07-01T12:01:05.203
> 
> 标签：java, xml, httpclient, pubchem

我目前正在做一个项目，我必须从代​​谢物数据库 PubChem 请求数据。我正在使用 Apache 的 HttpClient。我正在执行以下操作：

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet pubChemRequest = new HttpGet("http://pubchem.ncbi.nlm.nih.gov/summary/summary.cgi?cid="
    + cid + "&disopt=SaveXML");
pubChemRequest.getAllHeaders();
System.out.println(pubChemRequest);
HttpResponse response = null;
response = httpclient.execute(pubChemRequest);
HttpEntity entity = response.getEntity();
pubChemInchi = EntityUtils.toString(entity); 
```

问题是这段代码流式传输整个 XML 文件：

```
<?xml version="1.0"?>
<PC-Compound
xmlns="http://www.ncbi.nlm.nih.gov"
xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
xs:schemaLocation="http://www.ncbi.nlm.nih.gov ftp://ftp.ncbi.nlm.nih.gov/pubchem/specifications/pubchem.xsd"> 
```

等等

我想要的是我可以请求，例如，PubChem ID，它将粘贴与该 ID 对应的值。我发现这可以使用本机 Java 方法完成，但我需要为此使用 HttpClient。使用本机 Java，可以这样完成：

```
cid = 5282253
reader = new PCCompoundXMLReader(
new URL("http://pubchem.ncbi.nlm.nih.gov/summary/summary.cgi?cid=" + cid + "&disopt=SaveXML").newInputStream())
mol = reader.read(new NNMolecule())
println "CID: " + mol.getProperty("PubChem CID") 
```

（注：这段代码是用 Groovy 编写的，但经过一些调整后它也可以在 Java 中运行）

所以，如果有人可以帮助我，那就太好了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:48:31.103

有多种方法可以做到这一点。

如果您想将响应转换为 bean，并且不希望响应的结构发生变化，我会考虑使用 XStream。另一种选择是直接使用 SAX 解析器。

当然，快速而肮脏的方法是将您的响应内容转换为 bufferedReader。然后将该阅读器提供给您正在使用的 XMLReader。

使用您上面的代码的示例是：

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet pubChemRequest = new HttpGet("http://pubchem.ncbi.nlm.nih.gov/summary/summary.cgi?cid="
    + cid + "&disopt=SaveXML");
pubChemRequest.getAllHeaders();
System.out.println(pubChemRequest);
HttpResponse response = null;
response = httpclient.execute(pubChemRequest);
BufferedReader br = new BufferedReader(new InputStreamReader((response.getEntity().getContent())));
cid = 5282253
reader = new PCCompoundXMLReader(br)
mol = reader.read(new NNMolecule())
println "CID: " + mol.getProperty("PubChem CID") 
```

谷歌搜索 RESTful Web 服务客户端或 XMLReaders 应该会给你更多关于这个主题的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:10:31.080

尝试使用**NameValuePair**

例如：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);

nameValuePairs.add(new BasicNameValuePair("username", user123));

nameValuePairs.add(new BasicNameValuePair("password", pass123));

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

HttpResponse response = httpclient.execute(httppost); 
```

# c# - Dispatcher.CheckAccess() 失败

> ID：11281780
> 
> 赞同：0
> 
> 时间：2012-07-01T12:01:44.673
> 
> 标签：c#, wpf, thread-safety

我有一个名为 GUI.xaml 的 WPF UI，我需要更改其他类的标签和图像。此外，我需要执行一项长时间的任务，所以我正在使用后台工作人员。所以我在这个网站上阅读了一个解决方案：

在 GUI.xaml.cs 中：

```
public static ChangeGUI someClass;    
private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        someClass = new ChangeGUI(this); //          
        TaskClass.ConnectionThread(SuperHero.getUserID());
    } 
```

在 ChangeGUI.cs 中：

```
public class ChangeGUI
{
    GUI _GUIRef;

    public ChangeGUI(GUI gui)
    {
        _GUIRef = gui;
    }

    public void ChangeLabel()
    {
        //here we can play with labels
    }
    public void ChangeMap(ImageSource tmp)
    {
        if (_GUIRef.image1.Dispatcher.CheckAccess())
            _GUIRef.image1.Source = tmp;//ERROR!!!!!!!!!!!!!! 
        else
            _GUIRef.image1.Dispatcher.Invoke(new Changer(ChangeMap), tmp);
    }
} 
```

在这里我收到一个错误：调用线程无法访问此对象，因为不同的线程拥有它。欢迎帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:38:39.813

如果您在`ImageSource`后台线程上创建了 ，请确保将其冻结，以便可以从任何线程访问它：

```
var imageSource = ...;
imageSource.Freeze(); 
```

# c - 如何捕获事件框上的事件以检测 gtk 中的鼠标移动？

> ID：11281782
> 
> 赞同：2
> 
> 时间：2012-07-01T12:01:45.957
> 
> 标签：c, events, gtk

现在我有一个`motion_notify_event`跟踪`event_box`鼠标坐标的方法。只有当我单击时，我才能检测到运动，`event_box`是否有人知道我如何`event_box`在鼠标悬停时捕获事件，所以我不必单击它。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T16:09:26.703

我想你想听`"motion-notify-event"`信号。确保您还启用了该`GDK_POINTER_MOTION_MASK`标志。

# python - 如何将从文件中读取的字符串定义为 Unicode？

> ID：11281784
> 
> 赞同：-2
> 
> 时间：2012-07-01T12:01:57.880
> 
> 标签：python, regex, unicode

> **可能重复：**
> [在 Python 中从文件中读取字符](https://stackoverflow.com/questions/147741/character-reading-from-file-in-python)

我想从文件中删除所有特殊字符的输入字符串，实际字母除外（即使是西里尔字母也不应该被删除）。我找到的解决方案手动将字符串声明为 unicode 和带有`re.UNICODE`标志的模式，以便检测到来自不同语言的实际字母。

```
# -*- coding: utf-8 -*-
import re
pattern = re.compile("[^\w\d]",re.UNICODE)
n_uni = 'ähm whatßs äüöp ×äØü'
uni = u'ähm whatßs äüöp ×äØü'
words = pattern.split(n_uni) #doesn't work
u_words = pattern.split(uni) #works 
```

因此，如果我直接在源代码中编写字符串并手动将其定义为 Unicode，它会给我所需的输出，而非 Unicode 字符串给我的只是垃圾：

```
"ähm whatßs äüöp äØü" -> unicode
"hm what s ü p ü" -> non-unicode even with some invalid characters 
```

我现在的问题是如何将来自文件的输入定义为 Unicode？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:09:27.443

> 我现在的问题是如何将来自文件的输入定义为 unicode？

直接来自[文档](http://docs.python.org/howto/unicode.html)。

```
import codecs
f = codecs.open('unicode.rst', encoding='utf-8')
for line in f:
    print repr(line) 
```

# php - 如何在 Wamp 上安装 SonataAdminBundle？

> ID：11281785
> 
> 赞同：0
> 
> 时间：2012-07-01T12:02:02.600
> 
> 标签：php, symfony, github, cmd, symfony-sonata

我正在尝试在 WAMP 上安装 Sonata Admin Bundle。首先，将依赖包添加到**vendor/bundles**目录。将以下行添加到文件**deps**中。

```
[SonatajQueryBundle]
    git=http://github.com/sonata-project/SonatajQueryBundle.git
    target=/bundles/Sonata/jQueryBundle

[SonataUserBundle]
    git=http://github.com/sonata-project/SonataUserBundle.git
    target=/bundles/Sonata/UserBundle

[SonataAdminBundle]
    git=http://github.com/sonata-project/SonataAdminBundle.git
    target=/bundles/Sonata/AdminBundle

[KnpMenuBundle]
    git=https://github.com/KnpLabs/KnpMenuBundle.git
    target=/bundles/Knp/Bundle/MenuBundle

[KnpMenu]
    git=https://github.com/KnpLabs/KnpMenu.git
    target=/knp/menu

[SonataDoctrineORMAdminBundle]
    git=http://github.com/sonata-project/SonataDoctrineORMAdminBundle.git
    target=/bundles/Sonata/DoctrineORMAdminBundle 
```

现在在供应商中安装这些捆绑包的问题。我运行这个表扬 `php bin/vendors install`，但它的表演`Try to run ./bin/vendors install --reinstall`

我的Bundle有什么问题吗？我真的不知道该怎么办。请帮忙。

我感谢所有的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:32:30.940

您可能正在使用`Symfony`和的不兼容版本`SonataAdminBundle`。

`SonataBlockBundle`此外，您可能缺少`SonataCacheBundle`最新版本`SonataAdminBundle`（查看[SonataAdmin 安装参考](http://sonata-project.org/bundles/admin/2-0/doc/reference/installation.html)）所需的内容。`Symfony`，`SonataAdminBundle`并且`Doctrine2`只能在特定组合中协同工作。

**建议：尝试**[本教程](http://www.itsalif.info/content/symfony2-sonata-admin-bundle-boilerplate-install)中的相关说明，或者更好的是，克隆[此存储库](https://github.com/liquidlabs/Symfony2-Sonata-Admin-Boilerplate)并根据说明进行配置。

您将获得一个有效的安装，然后您可以将现有的捆绑包添加到其中。

# c++ - sdl表面到opengl纹理

> ID：11281787
> 
> 赞同：2
> 
> 时间：2012-07-01T12:02:05.283
> 
> 标签：c++, opengl, load, sdl, textures

如何使用 SDL 将 .png 图像转换为 OpenGL 表面？我现在拥有的：

```
typedef GLuint texture;

texture load_texture(std::string fname){
    SDL_Surface *tex_surf = IMG_Load(fname.c_str());
    if(!tex_surf){
            return 0;
    }
    texture ret;
    glGenTextures(1, &ret);
    glBindTexture(GL_TEXTURE_2D, ret);
    glTexImage2D(GL_TEXTURE_2D, 0, 3, tex_surf->w, tex_surf->h, 0, GL_RGB,          GL_UNSIGNED_BYTE, tex_surf->pixels);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    SDL_FreeSurface(tex_surf);
    return ret;
} 
```

和我画东西的代码：

glEnable(GL_TEXTURE_2D); glBindTexture(GL_TEXTURE_2D, tex);

```
 //Use blurry texture mapping (replace GL_LINEAR with GL_NEAREST for blocky)
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

        glColor4f( 1.0, 1.0, 1.0, 1.0 ); //Don't use special coloring

        glBegin(GL_QUADS);

        glTexCoord2f(0.0f, 0.0f);
        glVertex3f(0.0f, 0.0f, 0.0f);
        glTexCoord2f(1.0f, 0.0f);
        glVertex3f(128.0f, 0.0f, 0.0f);
        glTexCoord2f(1.0f, 1.0f);
        glVertex3f(128.0f, 128.0f, 0.0f);
        glTexCoord2f(0.0f, 1.0f);
        glVertex3f(0.0f, 128.0f, 0.0f);

        glEnd();

        glDisable(GL_TEXTURE_2D); 
```

问题是它只适用于 .bmp 文件，而且它们会变成蓝色，所以出了什么问题？此外，当我尝试加载 .png 时，它显得非常奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:22:00.263

错误的颜色可能是由于通道顺序错误造成的。我用来加载.bmp 的代码使用GL_BGR 而不是GL_RGB，所以我认为这将解决你的bmp 问题。

您的 png 图像的问题更可能是由于 png 是每像素 32 位造成的。对您而言，最好的解决方案可能是检查 SDL 表面的格式字段，以确定要传递给 glTexImage2D 的适当标志/值。

# java - Java 语法错误缓冲阅读器

> ID：11281790
> 
> 赞同：1
> 
> 时间：2012-07-01T12:02:49.613
> 
> 标签：java, bufferedreader

我正在编写一个只读取文本文件并打印出行的类。我在包含 BufferedReader rd = new BufferedReader(new FileReader("file.txt")); 表示令牌“;”上的语法错误，{ 预计在此令牌之后。我已经尝试将它放在一个方法中，并按照它的建议放在一个 try catch 块中，但是我无法解析 rd 变量。我正在使用 acm 包，因此其他一些语法可能看起来不同，但我没有收到其他错误。任何帮助将不胜感激 =)

```
import acm.program.*;
import acm.util.*;
import java.io.*;
import java.util.*;

public class FileReading extends ConsoleProgram {   

BufferedReader rd = new BufferedReader(new FileReader("file.txt"));

try {
    while (true) {          
        String line = rd.readLine();
        if (line == null) {
            break;
        }
        println(line);
    }
    rd.close();
}
catch (IOException ex) {
    throw new ErrorException(ex);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:06:27.083

像这样的代码块应该包含在方法或静态子句中。就像是：

```
public class FileReading extends ConsoleProgram {   

   public void readFile(){
     BufferedReader rd = null;
     try {
         rd = new BufferedReader(new FileReader("file.txt"));
         while (true) {          
            String line = rd.readLine();
            if (line == null) {
                break;
            }
            println(line);
         }
     }catch (IOException ex) {
         throw new ErrorException(ex);
     }finally{
        try{
         rd.close();
        }catch (IOException ex) {
         throw new ErrorException(ex);
        }
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:14:00.903

正如其他人所回答的那样，您不能在类的一般部分中提供代码，它必须在方法或静态块中。

通过将代码块放在构造函数中，问题就消失了。例如，请参见下文。

```
import acm.program.*;
import acm.util.*;
import java.io.*;
import java.util.*;

public class FileReading extends ConsoleProgram {   
public FileReading()
{
BufferedReader rd = new BufferedReader(new FileReader("file.txt"));

try {
    while (true) {          
        String line = rd.readLine();
        if (line == null) {
            break;
        }
        println(line);
    }
    rd.close();
}
catch (IOException ex) {
    throw new ErrorException(ex);
    }
}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T12:17:19.387

**创建一个方法...并在其中执行此操作...不是直接在类中**

例如：

```
public void go()
{

    BufferedReader rd = new BufferedReader(new FileReader("file.txt"));

try {
    while (true) {          
        String line = rd.readLine();
        if (line == null) {
            break;
        }
        println(line);
    }
    rd.close();
}
catch (IOException ex) {
    throw new ErrorException(ex);
    }
}

} 
```

# java - 使用 STS，如何添加应用上下文

> ID：11281791
> 
> 赞同：1
> 
> 时间：2012-07-01T12:02:49.657
> 
> 标签：java, spring, maven, applicationcontext

我需要一些帮助来建立一个春季项目。我正忙于阅读“Spring in action”一书，我需要尝试一些示例。我查看了很多页面，但无处可以看到我哪里出错了。这一定是我错过或忽视的一些愚蠢的事情。

1.  我安装了 Spring 源工具套件
2.  创建了一个新的 java/maven 项目
3.  添加了一个新的 applicationContext.xml bean 定义文件

该项目的大纲如下所示

![在此处输入图像描述](../Images/38a19fe4212bd6a0462e900455080ecd.png)

我创建了我的 bean（实现汽车接口的 vwCar 和 nissanCar），并且在使用它们的地方我在 app 类中有一个 main 方法。我需要创建一个应用程序上下文。

```
ApplicationContext context = new ClassPathApplicationContext("src/main/resources/applicationContext.xml"); 
```

但是我很难创建 ApplicationContext。它给了我一个错误并且代码辅助不起作用

使用代码辅助它唯一建议的是（在键入应用程序后 按`Ctrl`+ ）：`Space`![输入 app 后按 Ctrl+Space](../Images/a14364b84e793e7f8d2734df73dc58fe.png)

如果我只是输入它，我会收到一个错误

```
ApplicationContext cannot be resolved to a type in class App.java 
```

有什么我应该自己导入的吗？

我可以在项目文件夹上看到一个“S”——这是否表明该项目已经启用了弹簧？

![项目文件夹上的弹簧指示器](../Images/d5ce5506334f57d9476826bb6923dbf1.png)

---------在 ALEX 评论建议我应该添加一个 MAVEN 依赖项后添加-------------

我像 Alex 建议的那样添加了缺少的依赖项，但我不知道正确的版本是什么。如果我查看 STS 目录，我会看到几个名为 ... 2.9.2 的文件

```
org.springframework.ide.eclipse.feature_2.9.2.201205070117-RELEASE 
```

但是如果我用 2.9.2 添加依赖项，我的 POM 上会出现以下错误

```
Missing artifact org.springframework:spring-context:jar:2.9.2 
```

我的 POM 如下所示

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>my.chrispie</groupId>
  <artifactId>MyMavenSpringProject</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>MyMavenSpringProject</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>2.9.2</version>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:26:00.860

由于您使用的是 Maven，因此您应该在 pom.xml 中添加以下依赖项：

```
<dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>

</dependency> 
```

应该在哪里`${org.springframework-version}`替换为您正在使用的版本。

这将确保启动所需的 Spring jar 可用于您的应用程序。

> 这一定是我错过或忽视的一些愚蠢的事情。

我认为您刚刚忽略了 Maven 的依赖项管理功能。创建 Java/Maven 项目不会引入所需的 Spring jar。如果您使用 STS 登录页面中的模板项目，这一切都已设置好。

# javascript - 必应地图 REST API

> ID：11281792
> 
> 赞同：0
> 
> 时间：2012-07-01T12:03:01.390
> 
> 标签：javascript, jquery, json, bing-maps

```
$.getJSON('http://dev.virtualearth.net/REST/v1/Locations/34.00689078318612,35.648735554695115?key=mykey&o=json', function () {
    alert('works!');
}); 
```

所以这不会到达，`alert();`并且在firebug控制台中请求是“RED”，没有其他错误。

但是，只需将 URL 粘贴到浏览器窗口中就会返回有效的 JSON。

我已经没有办法尝试这个了......我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:14:13.763

试试这个..

```
$.getJSON('http://dev.virtualearth.net/REST/v1/Locations/34.00689078318612,35.648735554695115?key=mykey&o=json&jsonp=?', function () {
  alert('works!');
}); 
```

由于[相同的来源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，您的代码失败了。您必须使用[JSONP](http://en.wikipedia.org/wiki/JSONP)来绕过它。

# android - Android 中的 AIM/MSN 聊天集成

> ID：11281795
> 
> 赞同：0
> 
> 时间：2012-07-01T12:03:34.213
> 
> 标签：android, chat, asmack, aim

在过去的几天里，我尝试了 GTalk/Facebook 聊天与[Android Smack](http://www.igniterealtime.org/projects/smack/index.jsp)的集成，它运行良好。

我尝试为 AIM/MSN 聊天与[Android Smack](http://www.igniterealtime.org/projects/smack/index.jsp)集成实现相同的逻辑，但它不起作用。

AIM 聊天集成是否需要任何特殊配置？请提供可以解决我的问题的任何方法或任何教程或参考链接。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:49:59.947

对于 MSN，我们可以使用[LiveSDK XMPP Sample for Android](https://github.com/liveservices/LiveSDK/tree/master/Samples/XMPP-Samples/Android)

**注意：**这个库中有一些身份验证问题，我正在处理它并尽快清除。

对于 AIM [，此 API](http://dev.aol.com)可能有助于获得身份验证。

# javascript - 图像加载，IE 中的另一个错误 - 相当肯定它不是缓存错误

> ID：11281801
> 
> 赞同：0
> 
> 时间：2012-07-01T12:04:09.573
> 
> 标签：javascript, internet-explorer, onload

这段代码是一个更大的脚本的核心，它在几乎所有浏览器中都运行良好。然而它在IE中不起作用。所以我把它剥离下来，发现 image.onload 没有在 IE 中触发。

我已经进行了一些研究，并防止它成为图像缓存问题。一方面，在缓存任何内容之前第一次发生错误，更重要的是，onload 事件附加在 src 之前。

我也有理由确定我正在以与 IE 兼容的方式附加 onload 事件，那么给出了什么，为什么我没有收到警报？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">             
            <script type="text/javascript">

        function generate(){
            var imageGen = document.createElement("img");
            imageGen.setAttribute('onload',"primer()"); 
            imageGen.setAttribute('src', "http://www.google.co.uk/images/srpr/logo3w.png");
            document.getElementById('image').appendChild(imageGen);
            }   

        function primer() { 
            alert("here now");
            }

        </script>
    </head>

    <body onload="generate()">
        <div id="image">

        </div>
    </body>
</html> 
```

**我在[这里托管一个版本](http://thisisonlytemporary.co.uk/ed/tester.html)**

不幸的是，我只能访问 IE8，所以我不知道它是否在其他版本中仍然存在，即使它需要修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:04:34.077

首先，事件**不是**属性，不能使用`setAttribute`. 它可能有效，也可能无效。

其次，尝试创建图像对象而不是图像元素：

```
var imageGen = new Image();
imageGen.src = "http://www.google.co.uk/images/srpr/logo3w.png";
imageGen.onload = primer;
document.getElementById('image').appendChild(imageGen); 
```

[现场测试用例](http://jsfiddle.net/T7quE/)- 在 IE9 和 IE9 兼容模式下对我来说效果很好，应该类似于 IE8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:07:45.477

你可以试试 imageGen.onload = prime 而不是 imageGen.setAttribute('onload',"primer()"); ?

# c# - 如何使用标头请求将参数从 Ajax 传递到 C#？

> ID：11281810
> 
> 赞同：3
> 
> 时间：2012-07-01T12:05:49.673
> 
> 标签：c#, ajax, header

我有以下要求：

```
var response = $.ajax({
    type: "POST",
    contentType: "application/x-www-form-urlencoded",
    url: this.AgentServiceUrl + "/" + methodName,
    data: data,
    async: this.Async,
    success: function (xml, textStatus) { if (successHandler != null) successHandler(state, $.xml2json(xml), textStatus); },
    error: function (xmlHttpRequest, textStatus, errorThrown) { if (errorHandler != null) errorHandler(state, xmlHttpRequest, textStatus, errorThrown); }
}); 
```

我想向这个请求标头添加一个变量并在 C# 上使用它，

我尝试了很多方法，但我不能在 C# 上使用它：

1.  ```
     beforeSend: function (req)  
     {  
         req.setRequestHeader("AgentGUID", this.AgentGUID);  
     }, 
    ```

2.  经过`parameters:`

你能帮助我吗？我不想在 C# 部分更改函数我只想使用类似的东西：

```
(System.Web.HttpContext.Current.Request.Headers["someHeader"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:12:27.540

您`beforeSend`应该按照您的意愿工作，但是您没有在服务器端获得值的原因是`this.AgentGUID`在此方法调用中是`undefined`因为`this`在该上下文中指向另一个对象（很可能是 ajax 请求对象）。

通过在 ajax 调用之外定义一个变量，您的问题将得到修复。

```
var me = this;
var response = $.ajax({
    ...
    beforeSend: function (req)
    {
        req.setRequestHeader("AgentGUID", me.AgentGUID);
    },
    ...
}); 
```

# iphone - 在 Objective-c 中画圆

> ID：11281811
> 
> 赞同：4
> 
> 时间：2012-07-01T12:05:54.133
> 
> 标签：iphone, objective-c, ios, drawing, geometry

我是 iPhone 编程的初学者。我需要创建如图 1 所示的圆圈，其中应将其划分为具有四个不同级别的六个不同部分（参见图 1）。此外，我需要根据给定数据创建一个圆圈，如图 2 所示。每个部分都应该可以单击以缩放特定部分（参见图 3）。

![在此处输入图像描述](../Images/ad4a627f4d503c57665bb414ca192b30.png)
**图 1：**说明了六种不同的颜色，其中两种被分成一个，其余四种被分成三个部分。
![在此处输入图像描述](../Images/cc4b1e739ce4c869b71a1d2e1f439fe6.png)
**图 2：**显示不同级别的不同类别的结果。
![在此处输入图像描述](../Images/8d3794af0ea263e9077979336609021b.png)
**图 3：**所选类别的放大图。

**我有一个情节提要，它加载加载自定义 UIView 并使用 drawRect 方法绘制圆。**

现在的问题是，如何创建像数字一样的饼图？

我已经尝试了很多事情并且可以使用一些指导 - 或者请举一个例子。
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:10:17.943

查看[Quartz 2D Programming Guide](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)，尤其是[Ellipses](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-BCIHJHEA)和[Clipping to Paths](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-BCIHJHEA)部分。剩下的只是一些基本的数学和几何。

你继承 UIView，使用 Quartz 2D 框架来绘制你的圆圈，并可能实现`touchesBegan:`和`touchesEnded:`方法来处理圆圈上的点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:33:12.620

如果您以任何方式希望更改动画（例如当您放大最后一张图像中的类别时），那么您应该尝试尽可能多地使用核心动画。

看看[这个关于使用 Core Animation 制作自定义动画饼图的精彩教程](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)。我相信你可以修改它以获得你想要的。

此外，如果您不关心动画并且只显示从一个状态跳到另一个状态的圆圈，那么 Core Animation 可能只会让事情变得过于复杂，像 Core Graphics 之类的东西（就像提到的其他答案一样）可能是正确的方法去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:59:19.253

**饼图示例：**

```
int sum = 0;
CGFloat offset;
CGFloat angleArray[numberOfSections+1];

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetAllowsAntialiasing(context, true);
CGContextSetShouldAntialias(context, true);

for(int i=0; i<numberOfSections; i++) {
    sum += angle;
}

for(int i=0; i<numberOfSections; i++) {
    angleArray[i] = (float)((angle)/(float)sum)*(2*M_PI); 
    CGContextMoveToPoint(context, radius, radius);

    if(i == 0) {
        CGContextAddArc(context, radius, radius, radius, 0, angleArray[i], 0);
    } else {
        CGContextAddArc(context, radius, radius, radius, offset, (offset+angleArray[i]), 0);
    }
    offset += angleArray[i];

    CGContextSetFillColorWithColor(context, ((UIColor *)[hjulColorArray objectAtIndex:i]).CGColor);
    CGContextClosePath(context); 
    CGContextFillPath(context);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T14:04:47.223

实际上，我认为从长远来看，这个修改后的答案会为您提供更多帮助。查看这些文档：

```
CGPathAddLineToPoint    
CGPathAddArc 
```

这就是我过去所做的，基本上正是你想要做的。

# java - 我们如何在 Spring MVC Hibernate 应用程序的 JSP 中上传图像？

> ID：11281812
> 
> 赞同：0
> 
> 时间：2012-07-01T12:05:57.780
> 
> 标签：java, hibernate, spring-mvc

我需要在 Spring MVC Hibernate Web 应用程序中将图像从 jsp 保存到数据库（MySql）。有人可以给我一个上传图像然后将其保存到数据库中的示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:08:05.563

使用任何基于 jquery 的 fileuploaders ，并仅将路径保存在 db 中。这样您就可以快速扩展您的应用程序。例如值上传器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T09:57:25.143

解决方案是首先从jsp获取路径，并以hibernet传递对象作为参数。

## 用户车辆.java

```
private byte[] image;
public UserVehicle(byte[] image)
{
  this.image=image;
}
---getter n setter
} 
```

## 在 Controller.java 中

```
File file = new File(/*your file path*/);
byte[] bFile = new byte[(int) file.length()];
FileInputStream fileInputStream = new FileInputStream(file);
fileInputStream.read(bFile);
fileInputStream.close();
UserVehicle user = new UserVehicle(bFile) 
```

您的值将作为 blob 文件插入到您的数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-12T14:37:36.550

使用 Spring MVC，所以你可以像这样使用 spring 形式：

```
<form:form method="POST" action="/spring-mvc-xml/uploadFile" enctype="multipart/form-data">
<table>
    <tr>
        <td><form:label path="file">Select a file to upload</form:label></td>
        <td><input type="file" name="file" /></td>
    </tr>
    <tr>
        <td><input type="submit" value="Submit" /></td>
    </tr>
</table>
</form> 
```

最重要的部分是添加**enctype="multipart/form-data"**并且**输入的类型必须是** **"file"**，然后您可以为您的休息控制器添加 multipart 参数，如下所示：

```
@RequestMapping(value = "/uploadFile", method = RequestMethod.POST)
public String submit(@RequestParam("file") MultipartFile file, ModelMap 
modelMap) {
 // here u can find your uploaded file you can set the prop in your 
    object model ,then save object and this will save the file also in 
    blob.

return "fileUploadView";
} 
```

最后，您需要像这样在 spring 上下文中创建 multipart Bean：

```
//you can defined it in xml way if your configuration in xml file 

@Bean(name = "multipartResolver")
public CommonsMultipartResolver multipartResolver()
{
 CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();
   multipartResolver.setMaxUploadSize(20848820);
 return multipartResolver;
} 
```

并且您还需要将您的依赖项中的上传文件库添加到 Spring 可以使用它：

```
dependency>
 <groupId>commons-fileupload</groupId>
 <artifactId>commons-fileupload</artifactId>
 <version>1.3.1</version> // or you can find the last version
</dependency> 
```

最后注意：对于数据库，您可以将列设置为 BLOB 或任何 LOB 类型。我在我的 Spring 应用程序中通常使用这种方式来上传文件，所以我希望你也需要。

# javascript - 在 Three.js 中加载多个 Blender 导出的对象/网格+材质

> ID：11281814
> 
> 赞同：1
> 
> 时间：2012-07-01T12:06:15.897
> 
> 标签：javascript, three.js, blender, uv-mapping

我在[Blender](http://www.blender.org/)中对两个对象进行了建模，它们具有不同的材质和不同的纹理 UV 映射到它们。我用[CanvasRenderer渲染它](http://mrdoob.github.com/three.js/docs/49/#CanvasRenderer)

如果我[导出它，生成的](https://github.com/mrdoob/three.js/tree/master/utils/exporters/blender)[JSON 文件](https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.0)中有不止一种材料，但只有一个网格。

这是我使用 Three.js 加载模型的（简化的）代码：

```
var loader = new THREE.JSONLoader();
loader.load(myModelPath, function {

    var material = geometry.materials[0];
    material.morphTargets = true;
    material.overdraw = true;

    var mesh = new THREE.Mesh(geometry, material);

    mesh.scale.set(50, 50, 50);
    mesh.position.set(0, 0, 0);

    scene.add(mesh);

}); 
```

如您所见，我只使用该`[0]`材料。结果是第二个对象使用了第一个对象的材质（如果我使用`[1]`材质，则相反）。

但我不知道如何创建使用多种材料的网格！

甚至可能吗？或者，有没有办法从 Blender 导出多个 JSON 文件（每个对象一个）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T17:00:58.943

你知道吗？有一种相对简单的方法可以处理这样的案例。

1.  像往常一样在搅拌机中建模。
2.  `Save as copy`与您拥有的对象一样多的副本。
3.  打开每个副本，并*删除除相关对象之外的所有内容*。
    现在你有`obj1.blend`,`obj2.blend`等。
4.  在其中的每一个中，随时导出到 three.js。
5.  全部加载。在我的代码中，这就像将字符串添加到数组一样简单。

请注意，如果有更直接的方法，我也想知道:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T02:37:14.367

自从提出这个问题以来，他们可能已经对 json 导出器进行了改进，但现在可以了。在设置下靠近底部的导出选项中，所有网格都有一个复选框。取消选中，仅导出选定的网格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T00:43:11.887

您必须使用 THREE.ObjLoader。在搅拌机导出设置中，您可以在导出选项的底部选择场景和材质。瞧

# php - php/js/ajax 搜索框

> ID：11281820
> 
> 赞同：0
> 
> 时间：2012-07-01T12:07:25.540
> 
> 标签：php, javascript, ajax, livesearch

我有一个谷歌风格的搜索框。然而，与谷歌不同，当用户从建议中选择时，我不希望页面发生变化，因为还有其他字段。相反，一旦用户选择它，我就会使用 javascript 在电子邮件字段中设置一个值。我的问题是所有建议仍然存在，填满屏幕。

javascript:

```
function setEmail(address) {
//alert(address);
var email = '<input type="email" name="to" value="\''+address+'\'">';
document.getElementById('box').innerHTML = email;
document.getElementById('suggestions').innerHTML = "";
} 
```

ajax返回的链接：

```
<a href="javascript:void(0);" onclick="setEmail('.$address.');">Name</a> 
```

html:

编辑显示下面的答案：

```
<input id="box" type="email" name="to" onkeyup="showSuggestions(this.value)"> 
```

编辑2：为了使建议在选择后消失，我将建议框设置为“”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:13:47.157

您需要为输入提供一个 ID。像这样：

```
<input id="emailField" type="email" name="to" onkeyup="showEmail(this.value)"> 
```

并改变这个：

```
document.getElementById('emailbox').innerHTML = email; 
```

对此：

```
document.getElementById('emailField').value = email; 
```

# google-analytics-api - Analytics API：如何查询“页面路径级别 1”

> ID：11281827
> 
> 赞同：3
> 
> 时间：2012-07-01T12:08:54.633
> 
> 标签：google-analytics-api

我们所有的客户在我们的服务器上都有自己的文件夹。我想跟踪他们的综合浏览量。在 Google Analytics 中，我可以通过制作自定义报告来做到这一点：指标（浏览量）、维度（页面路径级别 1）。

但是在 api 中似乎该维度不可用。您可以查询“ga:pagePath”，但这似乎有点矫枉过正。在使用“页面路径级别 1”的一个月内，我会得到大约 450 个结果，使用“ga:pagePath”我会得到 7 500 000 个结果。

有没有办法通过我的自定义报告中的查询获得相同的结果，而无需自己处理数据？这是可能的，但我想避免它。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T08:24:39.380

尝试使用维度`ga:pagePathLevel1`。它没有记录在案，但对我有用。

# javascript - jQuery UI draggable - 如何拖动一组元素

> ID：11281828
> 
> 赞同：2
> 
> 时间：2012-07-01T12:09:27.263
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

在这些可拖动区域之一（使用 jQuery UI）中通过某个句柄拖动几个单独的容器的最佳做法是什么？因此，其中一个容器应该是主容器，其余的应该是它的从属容器。

我只找到[了这个](http://www.myphpetc.com/2009/11/jquery-ui-multiple-draggable-plugin.html)jQuery UI 插件，但它的主要问题是它对所有容器使用唯一的类“ui-multidraggable”，所以我不能创建几个单独的可拖动组。目前，对我来说唯一的解决方案是修改这个插件以将一组从 $ 节点传递到选项中。

# javascript - Wordpress 热点 - 图片弹出窗口

> ID：11281830
> 
> 赞同：1
> 
> 时间：2012-07-01T12:09:41.253
> 
> 标签：javascript, jquery, wordpress, plugins

我有一张已上传到 wordpress 的图形地图图像。I would like to somehow create "hotspots" on this map, so that when a certain "hotspot / area" on the map is selected, then information about that location is displayed in a "popup" window. 我已经能够在 Dreamweaver 中使用 ApDiv 容器/显示和隐藏不同热点上的行为来完成此操作，但这涉及到 javascript 和其他 css，我不知道如何将其合并到 Wordpress 中。

有没有办法在 wordpress 中使用弹出图像来完成热点？

对此的任何建议将不胜感激。

谢谢

# c++ - c++中抛出的对象在哪里？

> ID：11281837
> 
> 赞同：7
> 
> 时间：2012-07-01T12:11:26.323
> 
> 标签：c++, exception

我想弄清楚我抛出的对象在内存中的存储位置。所以我为它写了一个小程序：

```
#include <iostream>

#define print_dist() int a;\
    do { std::cout << __FUNCTION__ << "() a[" << (long)&a - (long)ptrMainStackBase << "]" << std::endl; } while (0)

#define print_distx(x) \
    do { std::cout << __FUNCTION__ << "() " #x "[" << (long)&x - (long)ptrMainStackBase << "]" << std::endl; } while (0)

#define print_distxy(x, y) \
    do { std::cout << __FUNCTION__ << "() " #x "(ex)[" << (long)&x - (long)y << "]" << std::endl; } while (0)

class CTest
{
    public:
        CTest()
        { std::cout << "CTest::CTest" << std::endl; }

//    private:
        CTest(const CTest&)
        { std::cout << "copy" << std::endl; }
};
const CTest *ptrException;
int *ptrMainStackBase;

void Test2()
{
    print_dist();
    CTest test;
    print_distx(test);
    std::cout << "&test=" << &test << std::endl;
    throw test;
}

void Test1()
{
    print_dist();
    try
    {
        Test2();
    }
    catch (const CTest& test)
    {
        ptrException = &test;
        print_dist();
        print_distx(test);
        print_distxy(test, ptrException);
        std::cout << "&test=" << &test << std::endl;
        throw test;
    }
}

int main()
{
    int b;
    ptrMainStackBase = &b;
    print_dist();
    try
    {
        print_dist();
        Test1();
    }
    catch (const CTest& test)
    {
        print_dist();
        print_distx(test);
        print_distxy(test, ptrException);
        std::cout << "&test=" << &test << std::endl;
    }

    return 0;
} 
```

它打印：

```
main() a[-4]
main() a[-8]
Test1() a[-64]
Test2() a[-104]
CTest::CTest
Test2() test[-108]
&test=0x7fffd3b21628 <- test created here on stack
copy
Test1() a[-68]
Test1() test[-140736732956164]
Test1() test(ex)[0]
&test=0xb89090 <- and copied here
copy
main() a[-12]
main() test[-140736732956020]
main() test(ex)[144]
&test=0xb89120 <- and here 
```

看起来，当我抛出一个对象时，它首先被复制到另一个远离正常堆栈的堆栈。这是真的？为什么两个“异常堆栈帧”之间有 144 字节的距离？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T12:25:32.397

当您抛出一个对象时，它确实首先被复制到某个临时位置。否则，堆栈展开将使其超出范围。然后通过引用捕获它会导致未定义的行为，如下所示：

```
void foo() {
   A a;
   throw a;
}

void bar() {
   try {
      foo();
   } catch (A& a) {
      // use a
   }
} 
```

除非`a`已被复制到某个临时位置，否则您将引用一个不再存在于`catch`. 为此，`A`必须有一个公共的复制构造函数（除非您使用的是 VS，在这种情况下[它也将使用一个私有的......](https://stackoverflow.com/questions/10103645/can-objects-with-private-copy-constructors-be-thrown)）。此外，这是通过引用捕获的一个很好的理由 - 否则，您将有两个复制结构而不是一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:38:57.160

> 看起来，当我抛出一个对象时，它首先被复制到另一个远离正常堆栈的堆栈。这是真的？

捕获异常时抛出的`test`不存在。那个原件`test`已经被破坏了。所以它必须是一个副本，并且新对象与参数和局部变量分开管理。换句话说，不在堆栈上。

它住在哪里？这取决于实施。很可能它是实现为您管理的动态内存（例如，堆）。

> 为什么两个“异常堆栈帧”之间有 144 字节的距离？

该标准没有说明在`catch`块中重新抛出异常时实现如何处理异常。由于`throw`局部变量必须进行复制，因此最简单的实现方法`throw`是始终进行复制。

# c++ - 为什么我需要一个中间交换函数让编译器能够推断出类型？

> ID：11281838
> 
> 赞同：3
> 
> 时间：2012-07-01T12:11:36.857
> 
> 标签：c++, templates

```
template <class T>
void swap(T &t1, T &t2)
{
    T tmp = t1;
    t1 = t2;
    t2 = tmp;
}

template <class Bi>
void reverse(Bi begin, Bi end)
{
    while (begin != end) {
        --end;

        if (begin != end) {
            ::swap(*begin++, *end);
        }
    }
} 
```

为什么上述工作？

```
template <class Bi, class T>
void reverse2(Bi begin, Bi end)
{
    while (begin != end) {
        --end;

        if (begin != end) {
            T tmp = *begin;
            *begin++ = *end;
            *end = tmp;
        }
    }
} 
```

虽然这没有？

为了使第一个示例正常工作，编译器必须能够在编译时推断出交换函数的参数类型。（即它必须能够确定 和 的类型`*begin++`。`*end`）如果可能，为什么编译器不能推断出`*begin`第二个示例中返回的值的类型并做出相应的选择`T`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:15:02.173

编译器从函数**签名**而不是函数**体**中推断出参数类型。

由于`T`根本没有在函数签名中使用（`void reverse2(Bi begin, Bi end)`），编译器无法推断类型。但是，在`swap`它可以推导出类型的情况下，因为它是在函数签名中推导出来的。

# android - 显示延迟Android Java的按钮

> ID：11281840
> 
> 赞同：5
> 
> 时间：2012-07-01T12:11:40.413
> 
> 标签：android, animation

我想为我的程序创建一些简单的动画。有 4 个不可见的按钮，我想要的是当程序启动时，这些按钮会延迟可见。

显示按钮 1 -> 按钮 2 -> 等等。

我试过这个，但是当程序运行时，所有按钮都会同时出现。

```
try {
((Button) findViewById(R.id.f1)).setVisibility(View.VISIBLE);
    Thread.sleep(1200);
((Button) findViewById(R.id.f2)).setVisibility(View.VISIBLE);
    Thread.sleep(1200);
((Button) findViewById(R.id.f3)).setVisibility(View.VISIBLE);
    Thread.sleep(1200);
((Button) findViewById(R.id.f4)).setVisibility(View.VISIBLE);
    Thread.sleep(1200);
 } catch (Exception e) {
 } 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T12:19:58.970

使用处理程序：

```
private Handler handler;

private void showButtons(){
    handler = new Handler();

handler.postDelayed(new Runnable(){
    @Override
    public void run(){
        ((Button) findViewById(R.id.f1)).setVisibility(View.VISIBLE);
    }
}, 1200);

handler.postDelayed(new Runnable(){
    @Override
    public void run(){
        ((Button) findViewById(R.id.f2)).setVisibility(View.VISIBLE);
    }
}, 2400);

//etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:25:05.483

这与这个问题无关，但如果你睡眠主线程（就像你所做的那样）它可以让你的应用程序冻结

# c - 用 C 创建和使用 DLL

> ID：11281844
> 
> 赞同：2
> 
> 时间：2012-07-01T12:12:24.053
> 
> 标签：c, visual-studio-2010, dll

是否有某种文章或教程用于在 Visual Studio 中创建和使用 DLL？我用谷歌搜索，我发现的都是关于 C# 或 C++ 的。我不确定 C++ 和 C 的 DLL 使用是否不同。

我发现这篇文章托管在 MSDN：[演练：创建和使用动态链接库 (C++)](http://msdn.microsoft.com/en-us/library/ms235636%28v=VS.100%29.aspx) 而且，几乎没有更多关于此的内容。如果可能的话，我更喜欢使用 Visual Studio 2010 的文章，而且我使用的是 C。

# c# - 如何使用 getpixel 从 pictureBox.Image 和 Bitmap bmp 创建新图像？

> ID：11281849
> 
> 赞同：0
> 
> 时间：2012-07-01T12:13:25.540
> 
> 标签：c#

我试图使用 Graphics.DrawImage 但我得到黑色图像并且在它上面画了红点。为什么我得到黑色图像？

这是功能：

```
public Bitmap SaveFromPictureBoxToBitMap(Bitmap image1, Image pbox)
        {

            Graphics g = Graphics.FromImage(image1);
            Point p = new Point(pbox.Width,pbox.Height);
            g.DrawImage(pbox, p);
            image1.Save(@"d:\PictureBoxToBitmap\ptob.bmp", System.Drawing.Imaging.ImageFormat.Bmp);
            return newImage;
        } 
```

image1 是我在绘画事件中绘制的 bmp 变量。而 pbox 只是 pictureBox1.Image 并且我在 trackBar1 滚动事件中使用了这个函数。

这就是我在这里添加屏幕截图的原因：

![在此处输入图像描述](../Images/62d1ca998cc06e1e32c912598047c693.png)

在背景上而不是黑色我需要从 pictureBox1 获取图像，但它不起作用，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T18:47:46.393

找到了：

```
using (Bitmap b = new Bitmap(pictureBox1.Width, pictureBox1.Height))
{
    pictureBox1.DrawToBitmap(b, new Rectangle(0, 0, pictureBox1.Width, pictureBox1.Height));
    b.Save(@"d:\testit.png", System.Drawing.Imaging.ImageFormat.Png);
} 
```

# tcp - TCP 和校验和

> ID：11281855
> 
> 赞同：0
> 
> 时间：2012-07-01T12:14:13.423
> 
> 标签：tcp, checksum

我为 Android 编写了将与 HTTP 服务器通信的应用程序。我需要确保将数据提供给服务器而不进行任何更改。如果在传输过程中发生任何变化，我需要重新传输数据。我知道 TCP 有它自己的校验和机制，这是我的问题。我是否需要实现自己的校验和系统，或者 TCP 校验和就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:49:19.613

使用 HTTPS 而不是 HTTP。HTTPS 为每条传输的记录添加[消息验证码](http://en.wikipedia.org/wiki/Message_authentication_code)，保证数据的完整性。这可以防止传输过程中的意外损坏，也可以防止攻击者篡改。

# recursion - Mathematica 中的符号递归函数

> ID：11281858
> 
> 赞同：1
> 
> 时间：2012-07-01T12:14:26.583
> 
> 标签：recursion, wolfram-mathematica, symbolic-math

我想写一个递归函数来计算符号变量。这是python中的一个例子：

```
x = ["x0",...]
y = ["y0",...]
def f(n):
    if n<=0:
        return x[0]
    t1 = x[n]
    t2 = y[n]
    r = f(n-1)
    return t1+t2+r 
```

如何在 Mathematica 中重新实现它？

我尝试手动创建变量名：

```
toFixedWidth[n_Integer, width_Integer] := \
StringJoin[PadLeft[Characters[ToString[n]], width, "0"]]
make_var[i_] := ToExpression[StringJoin["x", toFixedWidth[i, 2]]]
xtab := Table[{make_var[i]}, {i, 0, 10}]
xtab 
```

但它不起作用：

```
{{make_var[0]}, {make_var[1]}, {make_var[2]}, {make_var[3]}, {
  make_var[4]}, {make_var[5]}, {make_var[6]}, {make_var[7]}, {
  make_var[8]}, {make_var[9]}, {make_var[10]}} 
```

我想看看表达式是如何展开的（对于比示例中更复杂的函数），这就是为什么我希望所有变量都是符号的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:00:25.513

下划线保留用于模式匹配 ( `Blank`)。请尝试`makevar`：

```
toFixedWidth[n_Integer, width_Integer] := 
 StringJoin[PadLeft[Characters[ToString[n]], width, "0"]]
makevar[i_] := ToExpression[StringJoin["x", toFixedWidth[i, 2]]]
xtab := Table[{makevar[i]}, {i, 0, 10}]
xtab 
```

> ```
> {{x00}, {x01}, {x02}, {x03}, {x04}, {x05}, {x06}, {x07}, {x08}, {x09}, {x10}} 
> ```

顺便：

```
Table[Unique["x"], {11}] 
```

> ```
> {x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11} 
> ```

# java - Java中的抑扬符是什么意思？

> ID：11281859
> 
> 赞同：3
> 
> 时间：2012-07-01T12:14:54.370
> 
> 标签：java

Java中的抑扬符是什么意思？例如：

```
textArea.setFont(font = font.deriveFont(font.getStyle() ^ Font.BOLD)); 
```

Java中还有其他使用抑扬符的用例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T12:16:22.173

这是按位异或，请参阅[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:21:20.097

这是一个异或，也称为 XOR

# objective-c - Unicode >> U+9FFF 到 URL 的转换

> ID：11281870
> 
> 赞同：0
> 
> 时间：2012-07-01T12:16:53.387
> 
> 标签：objective-c

尝试将包含 U+20000 到 U+2B81F 范围内的转义 unicode（例如：\u3400）的字符串转换为 URL，但它不起作用。U+3400 到 U+9FFF 的范围工作得很好。

```
NSString *string1 = @"\u9FFF";
string1 = [string1 stringByReplacingPercentEscapesUsingEncoding:NSUnicodeStringEncoding];
NSURL *url1 = [NSURL URLWithString:[NSString stringWithFormat:@"http://en.wikipedia.org/Search?search=%@", string1]];
NSLog(@"url1: %@", url1); 
```

**输出**：url1：[http ://en.wikipedia.org/Search?search=%E9%BF%BF](http://en.wikipedia.org/Search?search=%E9%BF%BF)

```
NSString *string2 = @"\u20000";
string2 = [string2 stringByReplacingPercentEscapesUsingEncoding:NSUnicodeStringEncoding];
NSURL *url2 = [NSURL URLWithString:[NSString stringWithFormat:@"http://en.wikipedia.org/Search?search=%@", string2]];
NSLog(@"url2: %@", url2); 
```

**输出**：url2：（空）

基本上，我想要的是将转义的 unicode 列表（\u3400 到 \u2B81F）转换为 URL（甚至是 NSStrings）。如果有其他方法可以通过其他字符串转换方式实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:55:28.967

当 NSString 已经是 UTF-8 编码时，我不知道您为什么要尝试对 Unicode 字符进行转义：

编辑：我明白了！它肯定根本不是 NSLog()，但它不是 (null)，这才是最重要的。

```
const char * str = "\0xF0\0xA0\0x80\0x80";
NSString *string2 = [NSString stringWithUTF8String:str];
NSURL *url2 = [NSURL URLWithString:[NSString stringWithFormat:@"http://en.wikipedia.org/Search?search=%@", string2]];
NSLog(@"url2: %@", string2); 
```

# c++ - 传递参数列表 (C++)

> ID：11281882
> 
> 赞同：0
> 
> 时间：2012-07-01T12:18:31.637
> 
> 标签：c++, argument-passing

我有很多这样的函数（它实际上是一个 API）：

```
void func1(const funcData1& data, ...);
void func2(const funcData2& data, ...); 
```

等等

其中`funcData1`,`funcData2`等仅用于将参数列表传递给函数。每次添加新功能时，也会添加一个新功能`funcData89`。这不是最好的解决方案，恕我直言。所以我正在寻找一种更通用的方式来传递它们。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:20:33.613

您可以查看可变参数或将参数作为集合传递：

```
void func (const funcData1& data, const std::list<Arg>& args); 
```

# php - 循环加载视频...总是显示第一个视频 - jquery 问题？

> ID：11281883
> 
> 赞同：1
> 
> 时间：2012-07-01T12:18:44.487
> 
> 标签：php, jquery, jwplayer

我有加载不同视频的页面。如果这意味着什么，我会使用 jw 播放器作为播放器。而且我的问题很连贯……JW 播放器只播放第一个视频。无论我点击哪个链接，总是播放第一个视频。

如果我看到我的源代码（执行的 html），视频加载正确，即 img1，链接到 video1.flw，img2 链接到 video2.flw...等等。但是，无论我点击哪个链接，都只会播放第一个视频。

任何人都可以弄清楚为什么会发生这种情况？？？

这是与视频相关的代码：

我在标题中有这段代码：

```
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery-1.7.1.js"></script>
<script type='text/javascript' src='js/jquery.simplemodal.js'></script>
<script type='text/javascript' src='js/basic.js'></script>
<script type="text/javascript" src="jwplayer/jwplayer.js"></script> 
```

这是放置视频的代码：

```
<div id='basic-modal'>
<a href='#' class='basic'>
<img src="backOffice/backOfficeImages/<?php echo $r[instrument_image]; ?>" alt="" width="300" height="410" />
</a> 
</div>

<!-- modal content -->
<div id="basic-modal-content">  
<!-- START OF THE PLAYER EMBEDDING TO COPY-PASTE -->
<div id="<?php echo $i;?>">JW Player goes here</div>

<script type="text/javascript">
jwplayer("<?php echo $i;?>").setup({ 
flashplayer: "/jwplayer/player.swf",
autostart:true,
file: "backOffice/videos/instruments/<?php echo $r[instrument_video]; ?>",
height: 360,
width: 640
});
</script>
<!-- END OF THE PLAYER EMBEDDING -->   
</div>
<!-- preload the images -->
<div style='display:none'>
<img src='images/x.png' alt='' />
</div>

<?php
$i++;
?> 
```

$i 变量在此代码所在的 while 循环上方设置为 0。请注意，即使在同一个循环中，图像也能正确显示，在源代码中视频是正确的（video1、video2、video3...）但只播放第一个视频，无论您单击哪个图像。

有人可以帮忙吗？？

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:34:54.357

我看不到任何告诉每个链接打开**特定**模态的东西——我想它只是每次都默认为第一个。

这完全取决于您在 js/jquery.simplemodal.js 和 js/basic.js 中拥有的内容（即必须连接链接的代码）。

我希望看到在链接和模态中包含索引 (0,1,2,3) 的内容 - 然后您可以使用它将链接 3 绑定到模态 3。

示例（但我再次需要有关您如何设置有效答案的链接的更多信息）：

```
<div id='basic-modal' data-index="<?php echo $i;?>">
  ...
</div>

<div id="basic-modal-content" data-index="<?php echo $i;?>">  
  ...
</div> 
```

然后我会想象这样的代码在 basic.js 中的某个地方（或者链接被连接的地方）：

```
// hook up the video links to launch the correct modal
$('div#basic-modal').bind('click', function() {

    // grab the index of the link that was clicked
    var linkIndex = $(this).attr('data-index');

    // get a reference to the corresponding modal
    var modal = $('div#basic-modal-content[data-index="' + linkIndex + '"]');

    // use whatever code you need to show the modal window
    modal.show();
}); 
```

再一次 - 基本思想是每个链接必须对它应该启动的窗口有某种想法，当点击链接时，它使用它来获取对正确视频模式的引用。

# javascript - 为什么 ECMAScript 标准中没有 Object.setPrototypeOf(...) ？

> ID：11281887
> 
> 赞同：9
> 
> 时间：2012-07-01T12:19:36.663
> 
> 标签：javascript, prototype, ecmascript-6, w3c

显然使用`__proto__`属性仍然是操作原型链的主要方式，尽管这不符合标准并且 IE 不支持它。尽管您也可以通过使用构造函数来构造继承，但与属性或标准兼容函数`new`相比，这似乎是不必要的复杂化。`__proto__``Object.getPrototypeOf`

**编辑：**

如答案中所述，这种方法现在确实存在（ES6 标准）。但请注意性能警告：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-17T19:37:48.733

它是 ES6 和谐草案的一部分：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)

我现在在最新版本的 Chrome 中使用它。

```
var proto = {
    foo: 'bar'
};

var object = {};

Object.setPrototypeOf(object, proto);

console.assert(object.foo == 'bar'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:23:32.113

[Brendan Eich](http://en.wikipedia.org/wiki/Brendan_Eich)[在这里](http://brendaneich.com/2011/01/harmony-of-my-dreams/#div-comment-6121)说：

> Object.setPrototypeOf 不会发生。可写的 __proto__ 实现起来非常痛苦（必须序列化以进行循环检查），并且它会产生各种类型混淆的危险。你可能认为你想要它作为一种低级的尖锐乐器。JS 不是那种语言。类和混合的高级形式似乎要好得多，并且不涉及如此尖锐的边缘。

# javascript - 检查是否加载了 html 5 shim

> ID：11281888
> 
> 赞同：5
> 
> 时间：2012-07-01T12:19:37.107
> 
> 标签：javascript, jquery, html5shiv

我们通常检查 jQuery 是否从 CDN 加载，如果没有则回退到本地版本。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script> 
```

我正在使用 twitter 引导程序，它从`googlecode`副本中加载 html 5 shim。

`<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>`

如果不加载本地版本，有什么办法可以回退到本地版本`googlecode`

还是我做错了什么。我不应该检查这个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-01T12:31:14.357

```
<script>window.html5 || document.write('<script src="js/libs/your-local-version.js"><\/script>')</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T12:26:11.163

我不会费心使用 jQuery（长时间的讨论和我不想打开的蠕虫），但这取决于你。

我确实认为从 googlecode 加载 html5.js 会给您带来更多问题，您应该在本地托管它。为什么？因为您直接从 SVN 树的树干中引用代码。该代码可以/将在您身上发生变化，这将使您的工作处于未经测试的状态。您可以参考 Googlecode 的特定修订版......或者真的，自己托管它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-01T12:34:40.483

在本地托管 shiv，从 Google 使用它有很多问题（尤其是 DNS 查找等）更多信息请参见 - [http://zoompf.com/blog/2012/05/html5shiv-and-serving-content-from-代码库](http://zoompf.com/blog/2012/05/html5shiv-and-serving-content-from-code-repositories)

至于我不会打扰的 jQuery 回调代码，用户会认为页面在回调触发之前很久就被破坏了。

如果您让我知道您的网页的 URL，我将演示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T12:33:49.177

使用 html5shim 时，我建议首先在本地加载它。在他们的网站上，他们最近更改了措辞，让您可以下载文件，而不是从 GitHub 上进行热链接，因为 GitHub 可能托管未经测试的代码。

# sql-server - 如何查找详细的重复记录

> ID：11281892
> 
> 赞同：1
> 
> 时间：2012-07-01T12:20:19.463
> 
> 标签：sql-server, sql-server-2005, duplicates

我需要检索有关特定字段重复记录的所有信息。

如果我会使用mysql，我可以这样解决：

```
drop table if exists test;

create table test (
id int not null auto_increment primary key,
surname varchar(50),
firstname varchar(50),
sex char(1),
dob date,
pob varchar(50),
otherfield1 varchar(50),
otherfield2 varchar(50)
) engine = myisam;

insert into test (surname,firstname,sex,dob,pob,otherfield1,otherfield2)
values 
('smith','john','M','2000-01-01','rome','xxx','yyy'),
('black','jack','M','1990-12-30','milan','aaaaa','vvvv'),
('smith','john','M','2000-01-01','rome','zzz','aaaaa'),
('white','mike','M','1980-03-01','naples','zzz','other text'),
('white','mike','M','1980-03-01','naples','zzz','foo bar'),
('smith','ann','F','1992-03-05','turin','aaaaaaa','other text');

select * from test where (surname,firstname,sex,dob,pob) in (
select 
surname,firstname,sex,dob,pob
from test
group by surname,firstname,sex,dob,pob
having count(*) > 1
) 
```

我会得到

```
"id"    "surname"   "firstname" "sex"   "dob"            "pob"  "otherfield1"   "otherfield2"
"1" "smith"           "john"    "M" "2000-01-01"    "rome"     "xxx"    "yyy"
"3" "smith"           "john"    "M" "2000-01-01"    "rome"     "zzz"    "aaaaa"
"4" "white"           "mike"    "M" "1980-03-01"    "naples"   "zzz"    "other text"
"5" "white"           "mike"    "M" "1980-03-01"    "naples"   "zzz"    "foo bar" 
```

但是此方法不适用于 mssql 2005：

```
create table #test (
id int identity,
surname varchar(50),
firstname varchar(50),
sex char(1),
dob datetime,
pob varchar(50),
otherfield1 varchar(50),
otherfield2 varchar(50)
)

insert into #test (surname,firstname,sex,dob,pob,otherfield1,otherfield2) values ('smith','john','M','2000-01-01','rome','xxx','yyy');
insert into #test (surname,firstname,sex,dob,pob,otherfield1,otherfield2) values ('black','jack','M','1990-12-30','milan','aaaaa','vvvv');
insert into #test (surname,firstname,sex,dob,pob,otherfield1,otherfield2) values ('smith','john','M','2000-01-01','rome','zzz','aaaaa');
insert into #test (surname,firstname,sex,dob,pob,otherfield1,otherfield2) values ('white','mike','M','1980-03-01','naples','zzz','other text');
insert into #test (surname,firstname,sex,dob,pob,otherfield1,otherfield2) values ('white','mike','M','1980-03-01','naples','zzz','foo bar');
insert into #test (surname,firstname,sex,dob,pob,otherfield1,otherfield2) values ('smith','ann','F','1992-03-05','turin','aaaaaaa','other text');

select * from #test where (surname,firstname,sex,dob,pob) in (
select 
surname,firstname,sex,dob,pob
from #test
group by surname,firstname,sex,dob,pob
having count(*) > 1
) 
```

提前致谢。

**编辑**

这是我发现的一个可能的解决方案：

```
select t1.* from #test as t1
inner join (select 
            surname,firstname,sex,dob,pob
            from #test
            group by surname,firstname,sex,dob,pob
            having count(*) > 1) as t2
on t1.surname = t2.surname and t1.firstname = t2.firstname and t1.sex = t2.sex and t1.dob = t2.dob and t1.pob = t2.pob 
```

但我想知道是否有更好的方法。我不喜欢加入所有这些条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:29:39.123

```
SELECT * /*TODO: Just list desired columns*/
FROM   (SELECT *,
                Count(*) OVER (PARTITION BY surname,firstname,sex,dob,pob) AS Cnt
        FROM   #test) T
WHERE  Cnt > 1 
```

-或者

```
SELECT *
FROM   #test t1
WHERE  EXISTS (SELECT *
               FROM   #test t2
               WHERE  t1.id <> t2.id
                      AND EXISTS (SELECT t1.surname,
                                         t1.firstname,
                                         t1.sex,
                                         t1.dob,
                                         t1.pob
                                  INTERSECT
                                  SELECT t2.surname,
                                         t2.firstname,
                                         t2.sex,
                                         t2.dob,
                                         t2.pob)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:33:31.530

```
select surname,firstname,sex,dob,pob from 
(
select  
surname,firstname,sex,dob,pob, count(*) as NumberOfRecords
from #test 
group by surname,firstname,sex,dob,pob 
) dupCount
Where dupCount.NumberOfRecords > 1 
```

这应该在 2005 年有效

# linux - 如何将邮箱拆分为每条消息的单个文件？

> ID：11281893
> 
> 赞同：7
> 
> 时间：2012-07-01T12:20:24.883
> 
> 标签：linux, bash, email, unix, mbox

我想通过 bash 命令将我的收件箱拆分为单独的文件（每条消息一个文件），或者可能是 Java 中的简单程序。我该怎么做？

WBR，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T13:17:19.653

只需使用`formail`. `formail`是一个程序，可以处理邮箱，对邮箱中的每条消息运行一些操作，单独的消息等等。

更多信息： http: [//www.manpagez.com/man/1/formail/](http://www.manpagez.com/man/1/formail/)

如果您只想将邮箱拆分为单独的文件，我会建议这样的解决方案：

```
$ cat $MAIL | formail -ds sh -c 'cat > msg.$FILENO' 
```

来自男人：

```
 FILENO
        While splitting, formail  assigns  the  message  number  currently
        being  output  to  this  variable.   By presetting FILENO, you can
        change the initial message number being used and the width of  the
        zero-padded  output.   If  FILENO is unset it will default to 000.
        If FILENO is non-empty and does not contain a number, FILENO  gen-
        eration is disabled. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T16:36:43.597

如果你没有 formail，你也可以使用这个 Perl oneliner（从[这里](http://www.perlmonks.org/?node_id=152332)复制，刚刚在我需要拆分的 Thunderbird 收件箱上进行了测试）

```
perl -pe 'open STDOUT, ">out".++$n if /^From /' < $IN > before_first 
```

或者，有 0 填充的数字：

```
perl -pe 'open STDOUT, sprintf(">m%05d.mbx", ++$n) if /^From /' < $IN > before-first 
```

# jquery - jQuery ajax 和 getJSON 请求遇到 access-control-allow-origin 问题

> ID：11281895
> 
> 赞同：2
> 
> 时间：2012-07-01T12:20:31.653
> 
> 标签：jquery, ajax, jsonp

我正在尝试使用 jquery 的`$.ajax`or从不同的服务器获取文件`$.getJSON`，但我碰壁了`access-control-allow-origin`，而且 jsonp 选项似乎对我不起作用。

该站点使用 jQuery 1.5.1。

这是我的三个测试：

使用基本的 $.ajax，请求的 url 从未`?callback=?`附加：

```
$.ajax({
    url: url,
    datatype: 'jsonp',
    error: function(){console.log('error');},
    success: function(){console.log('success');}
}); 
```

使用基本的 $.ajax 并尝试破解，仍然会遇到跨站点问题：

```
$.ajax({
    url: url + '.jsonp?callback=?',
    datatype: 'jsonp',
    error: function(){console.log('error');},
    success: function(){console.log('success');}
}); 
```

使用 $.getJSON，可以解决跨站点问题，但永远不会触发错误情况：

```
$.getJSON(url + '?callback=?',
    function(data){
        console.log('success');
    })
    .error(function(){
        console.log('error');
    })
    .success(function(){
        console.log('success!');
    }); 
```

有人看到我做错了什么吗？最后，我正在尝试测试该 url 是否存在，如果不存在则执行错误操作。

**编辑**：我试图访问的 url 不存在。我期待触发错误案例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:33:49.673

为了能够从 javascript 访问外部资源。远程资源必须包含`access-control-allow-origin`在响应头中。如果您可以控制该资源，则需要将此响应标头添加到`*`（或您的域，如果您想要更受限制的访问控制）。

在此处阅读有关此内容的更多信息：http: [//enable-cors.org/](http://enable-cors.org/)

如果您不控制该外部资源。解决方案更棘手。有些人利用 YUI 进行跨域 ajax 调用。见这里：http: [//jpvalappil.wordpress.com/2010/01/04/cross-domain-ajax-the-yui-way/](http://jpvalappil.wordpress.com/2010/01/04/cross-domain-ajax-the-yui-way/)。

如果您正在编写 chrome 扩展，API 允许您授予扩展权限以从 js 访问其他域的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:53:33.260

您可以使用[jQuery-JSONP](https://github.com/jaubourg/jquery-jsonp)。该脚本允许您捕获错误（尽管没有任何有意义的错误消息）。

```
 $.jsonp({
      "url": "http://gdata.youtube.com/feeds/api/users/"+userId+"?callback=?",
      "data": {
          "alt": "json-in-script"
      },
      "success": function(userProfile) {
          // handle user profile here 
      },
      "error": function(d,msg) {
          alert("Could not find user "+userId);
      }
    }); 
```

主要浏览器都支持：

*   互联网浏览器 6+
*   火狐 2+
*   铬 1+
*   野生动物园 3+
*   歌剧 9+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T12:48:13.553

你必须指定一个**超时**：

```
$.ajax({
    dataType: "jsonp",
    url : url,
    timeout : 1000
})
    .done(function(data) {logdata(data); })
    .fail(function() { logdata("error"); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-19T19:18:42.647

您使用了数据类型，但您应该使用数据类型。

# c# - 如何根据 Coded ui 测试中的条件进行步骤

> ID：11281898
> 
> 赞同：1
> 
> 时间：2012-07-01T12:21:11.773
> 
> 标签：c#, visual-studio-2010, coded-ui-tests

我正在创建一个编码的 UI 测试，我在其中单击一个按钮以根据列表中项目的计数删除列表中的所有项目，我想知道这在 Visual Studio Coded Ui 测试中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:27:33.467

假设列表是受支持的控件（应该是），它将公开列表中的项目数，您可以使用它来决定是否要删除项目。如果仅部分支持列表但列表中的项目对 CodedUI 可见，您可以检查第一个项目是否存在并决定从那里删除项目。

# c# - 在网站上运行 VMWare API 失败

> ID：11281900
> 
> 赞同：2
> 
> 时间：2012-07-01T12:21:19.243
> 
> 标签：c#, iis, web-applications, vmware, vmware-server

我正在尝试编写一个 Web 客户端，它允许您使用 VMWare API（Vix）管理虚拟机
我在我的服务器技术和网站中使用 WCF，我还使用使用 VMWare API 的[VMWare 任务](http://www.codeproject.com/Articles/31961/Automating-VMWare-Tasks-in-C-with-the-VIX-API)包装器

当我尝试使用以下内容连接到我的 ESXi 服务器时（如帮助文件中所述）：

```
vmWareServer.ConnectToVMWareVIServer(new Uri(string.Format("https://{0}/sdk",  
                                    hostServerIP)), userName, password, timeoutInSecs); 
```

在常规的 C# 项目中，一切似乎都正常......但是，当尝试从网站应用程序运行此行时，我得到了 TimeOut 异常。

我试图在 Web.Config 文件中将 SendTime/RecieveTime 限制更改为 2 分钟，但是半秒后它会抛出这个超时异常......

有没有人熟悉这个 API？它是否连接到 Wrapper 试图连接到 Uri 而它已经在 Web 应用程序中？

我不知道发生了什么，我什至在 VMWare 论坛上都试过，但没有答案......

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:37:47.677

尝试在不同的用户 ID 下运行 IIS 应用程序池。为了进行测试，请尝试运行 winforms 应用程序时使用的相同用户 ID。当事情在控制台/winforms 应用程序中工作，但在 IIS 中失败时，通常与权限相关。

# php - 检索跨域数据php

> ID：11281904
> 
> 赞同：1
> 
> 时间：2012-07-01T12:21:57.550
> 
> 标签：php, proxy, cross-domain

我想做的是使用 ajax 从维基百科检索一些数据。之后我离开了客户端脚本并尝试检索一些随机内容。我尝试了 fopen() 和 fread() 方法，但没有成功，然后我找到了一些文章，其中包含使用代理的互联网提供商的代码。由于这是我的情况，我尝试了下面的代码，但没有给出任何响应。

```
<?php
$opts = array('http' => array('proxy' => 'tcp://10.10.10.101:8080', 'request_fulluri' => true));
$context = stream_context_create ($opts);
$data = file_get_contents('http://www.php.net', false, $context);   
echo $data;
?> 
```

好的，所以我尝试了建议的代码，并使用了正确的代理值：

```
<?php

$url = 'http://www.php.net';
$proxy = '10.10.10.101:8080';
//$proxyauth = 'user:password';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_PROXY, $proxy);
//curl_setopt($ch, CURLOPT_PROXYUSERPWD, $proxyauth);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);

echo $curl_scraped_page; 
```

但它给了我这个错误：HTTP/1.0 403 Forbidden Date: Mon, 02 Jul 2012 09:41:20 GMT Server: Apache Content-Type: text/plain 目标主机被禁止

我不明白为什么它不起作用，以及如何解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:37:50.780

这不是真正的跨域问题，因为您是从服务器而不是浏览器加载数据。

要通过代理从 PHP 加载网页 - 最好使用 cURL（一个 PHP http 客户端：http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)）。

这是一个示例 - 它取自一个类似的问题（http://stackoverflow.com/questions/5211887/how-to-use-curl-via-a-proxy）：

```
<?php

$url = 'http://www.php.net';
$proxy = '10.10.10.101:8080';
//$proxyauth = 'user:password';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_PROXY, $proxy);
//curl_setopt($ch, CURLOPT_PROXYUSERPWD, $proxyauth);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);

echo $curl_scraped_page; 
```

如果您的代理需要身份验证 - 您可以设置 $proxyauth 变量...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:51:57.733

我刚刚测试了您的代码 - 只需使用我自己的代理地址 - 它就可以工作。

```
<?php
    $url = 'http://www.php.net';
    $proxy = '192.168.4.200:3128';
    //$proxyauth = 'user:password';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_PROXY, $proxy);
    //curl_setopt($ch, CURLOPT_PROXYUSERPWD, $proxyauth);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    $curl_scraped_page = curl_exec($ch);
    curl_close($ch);

    echo $curl_scraped_page;
?> 
```

因此，您看到的可能是代理本身，它不允许访问（某些 - 或所有外部？）站点。也许您只需要使用代理进行身份验证。

这可能意味着您将无法通过 get_contents、curl、fsockopen 或任何其他方式执行此操作，除非您与网络管理员一起清除此问题。

# ruby-on-rails - Rails：为多态控制器/模型包装实例变量

> ID：11281906
> 
> 赞同：1
> 
> 时间：2012-07-01T12:22:01.883
> 
> 标签：ruby-on-rails, ruby, wrapper, instance-variables

如何创建动态变量名称/对象？

我有一个多态模型，用于在批准后发送请求并将模型连接在一起。例如，用户可以加入公司、项目或小组等。

所以我有一个属于各种模型的配置文件模型，但我只希望在接受请求后建立关系。

配置文件.rb

```
class Profile < ActiveRecord::Base
    belongs_to :user
    belongs_to :company
    has_many :requests
    has_many :requested, as: :requestable

    attr_accessible :first_name, :last_name

    validates :first_name, presence: true
    validates :last_name, presence: true

end 
```

我需要我的控制器能够根据它正在处理的模型应用其操作。

我希望 @profile.@belongs_to 与 @profile.company 相同，在这种情况下为空。然后从那里@profile.@belongs_to = @requestable

因为配置文件总是属于它加入的模型 @belongs_to 将始终是小写的模型名称。

我一直在搞乱发布到 Flash 消息中的对象的内容，试图弄清楚这一点。

requests_controller.rb

```
class RequestsController < ApplicationController
 before_filter :load_requestable
     def accept
        @request = Request.find(params[:id])
        @profile = Profile.find(@request.profile.id)

        redirect_to [@requestable, :requests], notice: "#{@profile.@belongs_to} #{@request.profile.first_name} #{@request.profile.last_name} id: #{@request.profile.id} wants to join #{@requestable.name}  id: #{@requestable.id}"
     end

     private

     def load_requestable
       klass = [Company, Profile].detect { |c| params["#{c.name.underscore}_id"]}
       @requestable = klass.find(params["#{klass.name.underscore}_id"])
       @belongs_to = klass.to_s.downcase
    end
 end 
```

我在控制台中玩过类似的东西：

```
profile = Profile.first
profile.company = Company.first 
```

这会在对象中创建连接，然后可以保存该连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:48:19.793

如果`@belongs_to`包含您的关联，您可以简单地调用`@profile.send(@belongs_to)`或在分配的情况下`@profile.send("#{@belongs_to}=",@requestable)`

`#send`允许您向 ruby​​ 中的任何对象发送任何消息。想想动态方法调用。

你应该完成了

# html - 如何让我的下拉菜单和悬停效果正确？

> ID：11281907
> 
> 赞同：0
> 
> 时间：2012-07-01T12:22:03.073
> 
> 标签：html, css, menu, drop-down-menu

我已经建立了一个具有下拉功能的水平菜单，它几乎可以正常工作。我只有两个问题，我找不到解决这些问题的正确方法：

1.  主菜单链接和下拉菜单之间的距离有点远，所以当您尝试将鼠标移动到下拉菜单时它就会消失。我知道通过将其更改**`#submenu_dames{top:34px}`**为较小的数字会使其更接近链接,但这也意味着它将覆盖下面的主菜单灰线。下拉列表必须位于该线下方。

2.  我尝试使用 CSS 悬停效果更改主菜单链接的背景颜色。但是发生的情况是背景颜色没有填充正确的宽度和高度。

**这是我的代码：**

[http://jsfiddle.net/flasy_kid/bFBcg/](http://jsfiddle.net/flasy_kid/bFBcg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:33:24.493

您还应该将其更改为使用类而不是 ID，以便您的 CSS 可以更通用，但这解决了您列出的两个问题：http: [//jsfiddle.net/bFBcg/2/](http://jsfiddle.net/bFBcg/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:42:10.303

这似乎工作正常，[http://jsfiddle.net/bFBcg/6/](http://jsfiddle.net/bFBcg/6/)

```
li.menu_item {
    display:inline-block; 
    list-style-type: none; 
    padding-right: 20px; 
    position:relative; 
}
#menu li a {
    text-decoration:none; 
    color:black;
}
#menu_main {
    border-color:#E2E2E2;
    border-style:solid; 
    border-width:1px 0 1px 0;
}
#submenu_dames { 
    margin:0; 
    padding:0; 
    position:absolute; 
    width:550px; 
    border-left:1px solid black; 
    border-right:1px solid black; 
    border-bottom:1px solid black; 
    background:#F6F6F6; display:none;
}
#submenu_heren { 
    margin:0; 
    padding:0; 
    position:absolute; 
    width:550px; 
    border-left:1px solid black; 
    border-right:1px solid black; 
    border-bottom:1px solid black; 
    background:#F6F6F6; 
    display:none;
}
.menu_item:hover #submenu_dames {
    display:block;
}
.menu_item:hover #submenu_heren {
    display:block;
}
.submenu { 
    margin:0; 
    padding:0; 
}
.submenu li { 
    margin:0; 
    padding:0; 
    list-style:none;
}
.submenu_vak {
    float:left; 
    width:150px; 
    margin: 5px; 
    padding: 5px;
}
.submenu_titel {
    font-weight:bold;
}
.menu_item:hover {
    background-color:#eee;
} 
```

# c++ - 为什么我不能将 nullptr 转换为 weak_ptr<>

> ID：11281909
> 
> 赞同：26
> 
> 时间：2012-07-01T12:22:42.630
> 
> 标签：c++, casting, null, shared-ptr, weak-ptr

```
class MyClass {
public:
     MyClass(std::weak_ptr<MyClass> parent){}
} 
```

我想做这个：

```
auto newInstance = std::make_shared<MyClass>(nullptr); 
```

或weak_ptr参数的默认值为null，例如：

```
void function(int arg,std::weak_ptr<MyClass> obj = nullptr); 
```

但是，我需要这样做：

```
auto newInstance = std::make_shared<MyClass>(std::shared_ptr<MyClass>(nullptr)); 
```

这是为什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-01T12:28:46.123

因为 a `weak_ptr`in concept 只能由另一个`weak_ptr`or构成`shared_ptr`。从原始指针构造是没有意义的，无论是否`nullptr`。

您可以在尝试使用的地方使用默认构造的`weak_ptr`( ) ：`std::weak_ptr<MyClass>()``nullptr`

```
auto newInstance = std::make_shared<MyClass>(std::weak_ptr<MyClass>());
void function(int arg,std::weak_ptr<MyClass> obj = std::weak_ptr<MyClass>()); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-01T12:37:10.080

弱指针的主要目的通常是了解可能被其他代码破坏的对象是否仍然存在。从普通指针构造的弱指针怎么可能知道对象是否仍然存在？你能想象一种可行的方法吗？

# dependency-injection - EJB 未注入

> ID：11281910
> 
> 赞同：0
> 
> 时间：2012-07-01T12:22:48.503
> 
> 标签：dependency-injection, ejb, nullpointerexception, code-injection

我的 Java EE 应用程序使用[crawler4j](http://code.google.com/p/crawler4j/)，它使用以下代码开始爬网：

```
CrawlConfig config = new CrawlConfig();
config.setCrawlStorageFolder("C:/crawler4j_storage");
PageFetcher pageFetcher = new PageFetcher(config);
RobotstxtConfig robotstxtConfig = new RobotstxtConfig();
RobotstxtServer robotstxtServer = new RobotstxtServer(robotstxtConfig, pageFetcher);
CrawlController controller = new CrawlController(config, pageFetcher, robotstxtServer);

controller.start(Crawler.class, 1); 
```

EJB 被注入到 Crawler.class 中：

```
@Stateless
@LocalBean
public class Crawler extends WebCrawler {

    @Inject private SeedFacadeLocal seedEJB;

    public void doSomething () {
        seedEJB.findAll(); // gives the NullPointerException
    } 
```

我的猜测是它与 Crawler.class 作为参数传递的方式有关。SeedFacadeLocal 是一个具有@Stateless bean 实现的@Local bean 接口。我在许多其他地方注入了这个 bean，它工作正常。

我认为通过使用“controller.start(Crawler.class, 1)”开始爬网会导致 Crawler.class 成为 POJO 而不是 EJB。因此 Crawler.class 中的注释被忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:04:36.213

`CrawlController``newInstance`通过一个简单的调用创建爬虫实例：

[http://code.google.com/p/crawler4j/source/browse/src/main/java/edu/uci/ics/crawler4j/crawler/CrawlController.java#149](http://code.google.com/p/crawler4j/source/browse/src/main/java/edu/uci/ics/crawler4j/crawler/CrawlController.java#149)

这不会进行任何类型的注入，因此您的爬虫的注入字段将为空。

如果你想使用注入爬虫，那么你需要控制`CrawlController`创建爬虫的方式。但是，没有明显的方法可以做到这一点。从这个角度来看，它的设计相当糟糕。

您可能需要做的是将域逻辑（您在 EJB 中编写的内容）与爬虫类分开，并编写一个简单的、支持 newInstance 的爬虫类，该类在适当的时候调用 EJB。EJB 本身不会是一个爬虫。您可以使用 JNDI 获取对 EJB 的引用。

# php - 如何在 32 位 php 上获得 64 位数字的按位结果

> ID：11281912
> 
> 赞同：3
> 
> 时间：2012-07-01T12:23:06.113
> 
> 标签：php

我在 php 中有两个 32 位无符号整数（crc32() 的结果），我想在 32 位版本的 php 上获得这些数字的按位结果。

我已经尝试了很多实验，但显然我缺少关于 php 如何处理这些数字和二进制数据的一些东西。

更新：

我正在寻找这样的东西：

```
$x = crc32("abc");
$bin = sprintf("%b", $x);

$x2    = crc32("abc2");
$bin2 = sprintf("%b", $x2);

$b = $bin | $bin2;

$result = sprintf("%u",$b);

var_dump($result); 
```

该代码不起作用，但是通过用正确的数字替换 %b 和 %u 我认为它可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:28:47.050

只需使用[按位 OR`|`](http://php.net/manual/en/language.operators.bitwise.php)而不是逻辑OR `||`：

```
$x  = crc32("abc");
$x2 = crc32("abc2");
$b = $x | $x2;              // The integer 2142140882
$result = sprintf('%u',$b); // The string "2142140882" 
```

如果要获取此结果的二进制字符串，请使用[`pack`](http://php.net/pack)：

```
$result_binary = pack('N', $b); // Binary format, "\x7f\xae\x79\d2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:39:01.540

```
 $x = crc32("abc");
    printf("%x", $x); echo "(sedecimal)<br>\n";
    printf("%u", $x); echo "(integer)<br>\n";
    printf("%b", $x); echo "(binary)<br>\n";
    $bin = sprintf("%b", $x); 
```

# javascript - RegExp 中的模式变量不适用于说明符

> ID：11281918
> 
> 赞同：1
> 
> 时间：2012-07-01T12:23:51.473
> 
> 标签：javascript, regex

以下代码按预期写入“响应”：

```
var str = "Would you like to have responses";
var pattern = "Response";
document.write(str.match(new RegExp(pattern,'gi'))); 
```

但是当我添加一个说明符时`\b`，下面会写“null”：

```
var str = "Would you like to have responses";
var pattern = "\bResponse";
document.write(str.match(new RegExp(pattern,'gi'))); 
```

我怎样才能让它工作？

* * *

有趣的是，以下两个作品

```
document.write(str.match(new RegExp(/Response/gi)));
document.write(str.match(new RegExp(/\bResponse/gi))); 
```

但我想使用`new RegExp(pattern,modifiers);`语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:25:34.417

反斜杠在字符串中具有特殊含义，它是转义字符。当您想从字符串创建正则表达式时，必须转义反斜杠。

在转义字符具有相同含义的情况下，您不会注意到它：

```
 '\n'.match('\n');
 '\n'.match('\\n'); 
```

两者都有效。但是，`\b`在字符串中没有这样的含义。
`new RegExp("\bResponse");`变为`/Response/`(`\b`是退格字符，不代表可见字符)。当转义没有特殊含义时，反斜杠将被删除。

# android - 没有 Ti 条码模块的 Appcelerator 中的 QR 扫描

> ID：11281919
> 
> 赞同：0
> 
> 时间：2012-07-01T12:24:33.420
> 
> 标签：android, iphone, appcelerator, qr-code

想检查是否有任何方法可以在不使用 Titanium Barcode 模块的情况下使用 Appcelerator 在 Android / iPhone 上扫描二维码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:17:14.870

[ZXing](http://code.google.com/p/zxing/)是一个很棒的库，可以在您的 Android 应用程序中获得 QR 扫描支持。

但是，它是用 Java 编写的，因此不适用于 iOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T19:37:55.537

ZXing 有 Java 和 Objective C/C++ 两个端口，两者都有强大的二维码支持。事实上，Appcelerator 模块是基于 ZXing 的。您必须弄清楚如何将 ZXing 代码集成到 Appcelerator 中，从而有效地复制 Appcelerator 所做的事情。我不知道该怎么做。

# php - PHP中的目录连接

> ID：11281921
> 
> 赞同：1
> 
> 时间：2012-07-01T12:24:47.643
> 
> 标签：php

我正在尝试使用 PHP 创建硬链接。我知道有三种链接：符号链接、硬链接和目录连接（目录的硬链接）。

在 PHP 中，符号链接是`symlink()`函数，硬链接是`link()`，但是目录连接呢？

我需要将它用于 Web 应用程序，而符号链接对我来说是不够的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T16:07:29.653

我有一个类似的问题，当我专门在 Windows 系统上运行时，我做了：

```
exec('mklink "' . $linkLocation . '" "' . $linkTarget . '" /J') 
```

成功的结果如下所示：

```
Junction created for C:\...\... <<===>> C:\...\... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:30:46.203

您不能在 Linux 中创建指向目录的硬链接（或“目录连接”），操作系统不支持。我不知道是否可以在 Windows 中使用[链接](http://php.net/link)，但它应该像尝试一样简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T12:32:52.217

目录连接是特定于 NTFS 的功能。Linux 中没有目录连接。有[目录绑定挂载](http://linux.die.net/man/8/mount)（查找“绑定挂载”），它们提供类似的功能，但是它们需要 root 访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T16:34:42.383

我使用这个简单的功能，它适用于 Windows。

```
<?php
function makeSymLink ($target, $link)
{
   exec('mklink /j "' . str_replace('/', '\\', $link) . '" "' .str_replace('/', '\\', $target) . '"');  
  }
?> 
```

# sql-server - 在 T-SQL 中重复“in”语句——它可以集中放在某个地方吗？

> ID：11281924
> 
> 赞同：1
> 
> 时间：2012-07-01T12:25:29.873
> 
> 标签：sql-server, tsql, stored-procedures

我有大量存储的过程，它们都执行相似的选择逻辑位：

```
WHERE
 @CustGroup = 'X' AND CUST_TYPE in ('X1', 'X2', 'B1', 'C1')
OR
 @CustGroup = 'Y' AND CUST_TYPE in ('Y1', 'A1', 'B2', 'C2')
OR
 @CustGroup = 'Z' AND CUST_TYPE in ('X2', 'Y2', 'D1', 'D2')
OR
 @CustGroup = 'MAIN' AND CUST_TYPE in ('Y1', 'A1', 'B2', 'C2', 'X2', 'Y2', 'D1', 'D2') 
```

是否有可能：

一种）

将这些“输入”选择放入某种变量中？

```
@XGroup = 'X1', 'X2', 'B1', 'C1'
WHERE
 @CustGroup = 'X' AND CUST_TYPE in (@XGroup) 
```

如果是这样 B)

将这些“in”选择集中放置在某个地方，以便它们可以与不同的存储过程重复使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:35:40.967

回复 B，

创建表

```
create table CUST_TYPE_LOOKUP (
  key varchar(10) not null,   -- or whatever type
  value varchar(10) not null  -- or whatever type
);

create index foo on CUST_TYPE_LOOKUP (key); 
```

用数据填充它。

```
键1 X1
键1 X2
键1 B1
键1 C1
键2 Y1
键2 A1
键2 B2
键2 C2

```

然后使用：

```
WHERE
  @CustGroup = 'X' AND CUST_TYPE in (select value from CUST_TYPE_LOOKUP where key = 'Key1')
 OR
  @CustGroup = 'Y' AND CUST_TYPE in (select value from CUST_TYPE_LOOKUP where key = 'Key2') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T16:27:15.607

您可以使用临时表或表变量简化主要查询，如下所示：

```
DECLARE @cgt TABLE(CustGroup VARCHAR(5), CustType VARCHAR(5));

INSERT  @cgt VALUES('X','X1'), ('X','X2'), ('X','B1'), ('X','C1');
INSERT  @cgt VALUES('Y','Y1'), ('Y','A1'), ('Y','B2'), ('Y','C2');
INSERT  @cgt VALUES('Z','X2'), ('Z','Y2'), ('Z','D1'), ('Z','D2');
INSERT  @cgt VALUES('MAIN','Y1'), ('MAIN','A1'), ('MAIN','B2'), ('MAIN','C2')
, ('MAIN','X2'), ('MAIN','Y2'), ('MAIN','D1'), ('MAIN','D2');

SELECT  t.* 
FROM    MyTable t
JOIN    @cgt cgt    ON  cgt.CustGroup = @CustGroup
                    AND cgt.CustType = t.CUST_TYPE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T15:14:30.493

您描述的那种数组在 TSQL 中实际上是不可能的，但是您可以做一些事情。您可以使用动态 SQL 并创建一次选择条件，然后重用该位来创建剩余的查询。动态 SQL 存在性能和安全问题（如果您允许外部用户更改查询字符串）。我认为最简单的方法是根据您的常用选择标准创建一个视图或一组视图，然后 INNER JOIN 您以后针对这些视图的查询。这使您可以在一个位置快速更改视图中的逻辑，并让它影响基于它的任何其他查询。例如，如果您上面的选择标准适用于所有“前 10 名”客户：

```
CREATE VIEW vTopTenCustomers
AS
SELECT CustomerID
FROM Customers
WHERE
 CustGroup = 'X' AND CUST_TYPE in ('X1', 'X2', 'B1', 'C1')
OR
 CustGroup = 'Y' AND CUST_TYPE in ('Y1', 'A1', 'B2', 'C2')
OR
 CustGroup = 'Z' AND CUST_TYPE in ('X2', 'Y2', 'D1', 'D2')
OR
 CustGroup = 'MAIN' AND CUST_TYPE in ('Y1', 'A1', 'B2', 'C2', 'X2', 'Y2', 'D1', 'D2') 
```

然后，当您需要对前 10 名运行查询时，加入该视图：

```
SELECT *
FROM Customers
INNER JOIN vTopTenCustomers
    ON Customers.CustomerID = vTopTenCustomers.CustomerID 
```

您需要小心您的索引 - 您可能需要 CustGroup 和 Cust_Type 上的非聚集索引以避免视图性能不佳。

# android - 在 Google Play 上发布应用

> ID：11281932
> 
> 赞同：0
> 
> 时间：2012-07-01T12:26:57.233
> 
> 标签：android, encryption, key, publish

我打算在 Google Play 市场上发布一个应用程序。为此，我将创建一个加密密钥。对于未来的更新，我知道我必须使用相同的密钥来签署 apk。

我是否还需要使用创建密钥的同一台机器，或者唯一的要求是拥有相同的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:28:56.960

您只需对相同的配置文件使用相同的密钥。你可以在火星上的机器上签名，而 Google Play 什么也不会说。然而，即使是密钥的微小变化也会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:29:43.600

您将需要相同的加密密钥。(keystore) 并且包名必须相同。没有其他要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T12:30:24.793

您只需要拥有密钥文件并知道其密码，请查看此[链接](http://developer.android.com/tools/publishing/app-signing.html)

# jquery - Jquery Vallenato 1.0 手风琴插件

> ID：11281935
> 
> 赞同：0
> 
> 时间：2012-07-01T12:27:26.300
> 
> 标签：jquery, accordion

有人可以告诉我如何使用 Jquery Vallenato 使第一个手风琴在页面加载时不打开吗？

```
$(document).ready(function()
{
//Add Inactive Class To All Accordion Headers
$('.accordion-header').toggleClass('inactive-header');

//Set The Accordion Content Width
var contentwidth = $('.accordion-header').width();
$('.accordion-content').css({'width' : contentwidth });

//Open The First Accordion Section When Page Loads
$('.accordion-header').first().toggleClass('active-header').toggleClass('inactive-header');
$('.accordion-content').first().slideDown().toggleClass('open-content');

// The Accordion Effect
$('.accordion-header').click(function () {
    if($(this).is('.inactive-header')) {
        $('.active-header').toggleClass('active-header').toggleClass('inactive-header').next().slideToggle().toggleClass('open-content');
        $(this).toggleClass('active-header').toggleClass('inactive-header');
        $(this).next().slideToggle().toggleClass('open-content');
    }

    else {
        $(this).toggleClass('active-header').toggleClass('inactive-header');
        $(this).next().slideToggle().toggleClass('open-content');
    }
});

return false;
}); 
```

[http://www.switchroyale.com/vallenato/](http://www.switchroyale.com/vallenato/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:42:57.590

注释掉这个部分，像这样：

```
//Open The First Accordion Section When Page Loads
//$('.accordion-header').first().toggleClass('active-header').toggleClass('inactive-header');
//$('.accordion-content').first().slideDown().toggleClass('open-content'); 
```

# jpa - 嵌入式 Glassfish JPA 数据源连接失败

> ID：11281936
> 
> 赞同：2
> 
> 时间：2012-07-01T12:27:57.343
> 
> 标签：jpa, junit, glassfish, ejb, derby

我开发了一些单元测试，尝试连接到 Derby 内部数据库，但得到以下结果：

> 警告：本地异常堆栈：异常 [EclipseLink-4002]（Eclipse 持久性服务 - 2.3.2.v20111125-r10461）：org.eclipse.persistence.exceptions.DatabaseException 内部异常：java.sql.SQLSyntaxErrorException：表/视图“序列”不存在。错误代码：20000 调用：UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? 哪里 SEQ_NAME = ？bind => [2 个参数绑定] 查询：DataModifyQuery(name="SEQUENCE" sql="UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?") at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java :333) 在 org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor 的 org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:644)。**在 com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214) 在 com.sun.intercept(BaseContainer.java:5348) 在 com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5360) .ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88) at $Proxy113.createVehicle(Unknown Source) at com.thevehiclelist.__EJB31_Generated_ *VehicleEJB* _Intf_** *Bean*103) 在 org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74) 引起：java.sql.SQLSyntaxErrorException：表/视图“SEQUENCE”不存在。在 org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source) 在 org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source) 在 org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException （未知来源） org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException（未知来源） org.apache.derby.impl.jdbc.EmbedConnection.handleException（未知来源） org.apache.derby.impl.jdbc .ConnectionChild.handleException(Unknown Source) at org.apache.derby.impl.jdbc.EmbedPreparedStatement.(Unknown Source) at org.apache.derby.impl.jdbc.EmbedPreparedStatement20。ConnectionWrapper40.prepareStatement(ConnectionWrapper40.java:173) 在 org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.prepareStatement(DatabaseAccessor.java:1474) 在 org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.prepareStatement(DatabaseAccessor.java: 1423) 在 org.eclipse.persistence.internal.databaseaccess.DatabaseCall.prepareStatement(DatabaseCall.java:697) 在 org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:585) ... 86 更多由：java.sql.SQLException：表/视图'SEQUENCE'不存在。在 org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source) at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source) ... 108 更多原因：错误 42X05：表/视图“序列”不存在。在 org.apache.derby.iapi.error.StandardException.newException(Unknown Source) at org.apache.derby.impl.sql.compile.FromBaseTable.bindTableDescriptor(Unknown Source) at org.apache.derby.impl.sql.compile .FromBaseTable.bindNonVTITables(Unknown Source) at org.apache.derby.impl.sql.compile.FromList.bindTables(Unknown Source) at org.apache.derby.impl.sql.compile.SelectNode.bindNonVTITables(Unknown Source) at org .apache.derby.impl.sql.compile.DMLStatementNode.bindTables(Unknown Source) at org.apache.derby.impl.sql.compile.UpdateNode.bindStatement(Unknown Source) at org.apache.derby.impl.sql.GenericStatement .prepMinion(Unknown Source) at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source) at org.apache.derby.impl.sql.conn。

我的 persistence.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">

    <persistence-unit name="carcmsPU" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/__default</jta-data-source>

        <class>se.while_se.Book</class>
        <class>se.while_se.Car</class>
        <class>com.thevehiclelist.Vehicle</class>

        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:derby:MyTestDb;create=true" />
            <property name="javax.persistence.jdbc.user" value="" />
            <property name="javax.persistence.jdbc.password" value="" />
            <!-- <property name="eclipselink.ddl-generation" value="drop-and-create-tables" /> -->

        </properties>
    </persistence-unit>
</persistence> 
```

我的 pom.xml 是这样的：

```
<dependencies>
                <dependency>
                    <groupId>junit</groupId>
                    <artifactId>junit</artifactId>
                    <version>4.8.1</version>
                    <scope>test</scope>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.persistence</groupId>
                    <artifactId>javax.persistence</artifactId>
                    <version>2.0.0</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.persistence</groupId>
                    <artifactId>eclipselink</artifactId>
                    <version>2.3.2</version>
                </dependency>
                <dependency>
                    <groupId>org.glassfish.main.extras</groupId>
                    <artifactId>glassfish-embedded-all</artifactId>
                    <version>3.1.2</version>
                    <scope>provided</scope>
                </dependency>
                <dependency>
                    <groupId>org.apache.derby</groupId>
                    <artifactId>derby</artifactId>
                    <version>10.8.2.2</version>
                    <scope>provided</scope>
                </dependency>

            </dependencies> 
```

似乎数据库不是在内部数据库中创建的，还是我在这里遗漏了什么？

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:26:53.650

以下被注释掉。因此，预计不会创建表和其他数据库对象（例如序列）。

```
<!-- <property name="eclipselink.ddl-generation" value="drop-and-create-tables" /> --> 
```

只需删除评论，它应该可以正常工作：

```
<property name="eclipselink.ddl-generation" value="drop-and-create-tables" /> 
```

就像附加说明一样，拥有`create=true`JDBC 连接字符串不会影响这一点。它只是关于创建数据库本身，而不是其中的表和其他对象。

# css - 如何让 ::selection 与连字符一起正常工作？

> ID：11281938
> 
> 赞同：3
> 
> 时间：2012-07-01T12:28:16.747
> 
> 标签：css, selection, typography, hyphenation

我想以不同的方式设置所选文本的样式，我正在使用`::selection`它来实现。

```
*::selection, *::-webkit-selection, *::-moz-selection {
    background-color: #aaa;
    color: #fff;
} 
```

出于印刷原因，我使用`hyphens: auto;`的是段落。

```
p {
    -moz-hyphens: auto;
    -webkit-hyphens: auto;
    hyphens: auto;
    text-align: justify;
} 
```

这行得通，但是当我选择带连字符的文本时会出现问题：连字符不会变成白色（即，它们就像未选中一样）。

![显示连字符文本问题的屏幕截图。](../Images/23f3b402d588fdb256fc267fc05e9212.png)

有没有办法解决这个问题，或者这是一个错误？我正在使用 Safari 5.1.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T12:47:21.307

我认为这可能是一个错误。Firefox 也支持连字符，可以[正确地为连字符着色](http://jsfiddle.net/qWA9H/1)。

# javascript - 有什么方法可以在 arbor.js 上添加浮动效果

> ID：11281945
> 
> 赞同：2
> 
> 时间：2012-07-01T12:29:36.493
> 
> 标签：javascript, jquery, canvas, nodes, arbor.js

我正在使用[arbor.js](http://arborjs.org/)在 iPhone/iPad 页面上创建文本节点。

我想为每个文本节点添加浮动效果，文本节点对象不断移动，而不像[jqFloat](http://www.inwebson.com/demo/jqfloat/)那样触摸显示。（arbor.js 重力参数在没有触摸事件的情况下不起作用）

我的文本节点的格式如下所示，

```
var data = {
    nodes: {
        node1: {
            'color': 'red',
            'shape': 'dot',
            'label': 'test1'
        },
        node2: {
            'color': 'green',
            'shape': 'dot',
            'label': 'test2'
        },
        node3: {
            'color': 'blue',
            'shape': 'dot',
            'label': 'test3'
        }
    },
    edges: {
        threadstarter: {
            node1: {},
            node3: {}
        }
    }
};
var sys = arbor.ParticleSystem();
sys.parameters({
    stiffness: 900,
    repulsion: 2000,
    gravity: true,
    dt: 0.015
});
sys.graft(data); 
```

非常感谢您在回答这个问题时提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:02:12.533

您是否尝试将 sys.parameters.friction 设置为 0 ？

# php - 使用 Html 链接将 PHP GET 数据发送到服务器

> ID：11281947
> 
> 赞同：0
> 
> 时间：2012-07-01T12:29:43.947
> 
> 标签：php, html, codeigniter

我有一段时间没有写 PHP GET 请求了。所以我有点生疏了。但是如何使用 Html 链接发送 GET 数据。如果我使用 jQuery 的 get 方法，我知道该怎么做，但我只是想知道是否有更简单的方法在 Html 中使用 href 或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:35:56.640

把参数放在url后面：

```
index.php?param1=yes&param2=no 
```

**然后你可以通过$_GET**读取变量

 **```
echo $_GET['param1']; 
```

但这是 PHP 基础知识。也许您应该先阅读[文档](http://php.net/manual/de/reserved.variables.get.php)。

在带有 ajax 请求的 jQuery 中也是如此。您可以将参数放在 url 后面。

```
$.get('index.php?param1=yes&param2=no', function(data) {
  $('.result').html(data);
  alert('Load was performed.');
}); 
```

如果要读取所有 GET 参数，可以使用 foreach 循环。

```
foreach($_GET as $key => $value) {
    echo $key.":".$value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:36:48.537

简单的方法是，

```
<a href="page.php?string1=str&string2=str&string3=str"></a> 
```

或一种形式，

```
<form action="page.php" method="get"></form> 
```**

# java - 具有自定义行布局的 ListView - Android

> ID：11281952
> 
> 赞同：23
> 
> 时间：2012-07-01T12:30:10.377
> 
> 标签：java, android, android-listview, android-arrayadapter

我想创建一个`Activity`包含一个列表，其中的行具有自定义布局。因此，我创建了`list_entry_layout.xml`定义列表中每一行应具有的布局的文件（在我的示例中，每一行都应具有标题和摘要）：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/list_entry_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20dp" >
    </TextView>

    <TextView
        android:id="@+id/list_entry_summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10dp" >
    </TextView>

</LinearLayout> 
```

我的问题是我不知道如何将数据添加到`ListActivity`类中的每一行。使用以下代码片段，我可以添加每一行的标题：

```
public class MyActivity extends ListActivity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    { 

        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_activity);

        ListView listView = (ListView) findViewById(android.R.id.list);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
            "Linux", "OS/2" };

        ArrayAdapter<String> titleAdapter = new ArrayAdapter<String>(this, R.layout.list_entry_layout, R.id.list_entry_title, values);
        // Assign adapter to ListView
        listView.setAdapter(titleAdapter);

    }
} 
```

> 要添加摘要，我该怎么办？

如果我添加此代码，我将可视化摘要，而不是标题：

```
String[] values = new String[] { "Android_summary", "iPhone_summary", "WindowsMobile_summary", "Blackberry_summary", "WebOS_summary", "Ubuntu_summary", "Windows7_summary", "Max OS X_summary", "Linux_summary", "OS/2_summary" };
ArrayAdapter<String> summaryAdapter = new ArrayAdapter<String>(this, R.layout.list_entry_layout, R.id.list_entry_summary, values);
// Assign adapter to ListView
listView.setAdapter(summaryAdapter); 
```

以下是我想要获得的结果：

![在此处输入图像描述](../Images/d4779ad9fd36589d026418f3ff131941.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-01T13:04:49.960

您需要创建自己的**ArrayAdapter**：

```
private class YourAdapter extends ArrayAdapter<String> {
   // do some work
} 
```

然后，您应该指定如何使用 XML 来查看您的行，这完全符合您的目标，我建议您使用 RelativeLayout，它看起来像这样：

**行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView 
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        />

    <TextView 
        android:id="@+id/email"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/name"
        />

</RelativeLayout> 
```

因此，在**YourAdapter**中，您必须设置超级构造函数：

```
public YourAdapter() {
   super(YourActivity.this, R.layout.row, data);
} 
```

然后，为了在`ListView`+ 更有效的实现中自定义您的数据，我建议您覆盖`getView()`方法并使用`Holder design pattern`.

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {         
   ViewHolder holder = null;
   LayoutInflater inflater = getLayoutInflater();
      if (convertView == null) {
         convertView = inflater.inflate(R.layout.row, null, false);
         holder = new ViewHolder(convertView);
         convertView.setTag(holder);
      }
      else {
         holder = (ViewHolder) convertView.getTag();
      }     
      holder.getUpperText().setText(dataSource[position]);
      holder.getLowerText().setText(dataSource[position]);

   return convertView;  
} 
```

最后只需初始化`ListView`和设置`Adapter`：

```
ListView list = (ListView) findViewById(R.id.list);
list.setAdapter(new YourAdapter()); 
```

**注意：** `Design pattern Holder`表示包含每行的子小部件的任意对象，因此您只需找到它们一次，然后使用`Holder`对象您将始终可以访问它们。

can的实现`Holder`如下所示：

```
public class ViewHolder {
   private View row;
   private TextView upperText = null, lowerText = null;

   public ViewHolder(View row) {
      this.row = row;
   }

   public TextView getUpperText() {
      if (this.upperText == null) {
         this.upperText = (TextView) inView.findViewById(R.id.someId);
      }
      return this.upperText;
   }

   public TextView getLowerText() {
      if (this.lowerText == null) {
         this.lowerText = (TextView) inView.findViewById(R.id.someId);
      }
      return this.lowerText;
   }
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-01T13:00:45.863

`android.R.layout.simple_list_item_2`您可以使用而不是创建自定义行布局来实现此布局。

无论如何，如果您想使用自定义行布局方法，那么我已经为您准备好了代码片段。

干得好。

**SampleActivity.java**

```
package org.sample;

import java.util.ArrayList;

import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import android.widget.TwoLineListItem;

public class SampleActivity extends ListActivity {

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        Mobile mobile;

        ArrayList<Mobile> mobiles  new ArrayList<Mobile>();

        mobile = new Mobile();
        mobile.setName("Android");
        mobile.setSummary("summary goes here");
        mobiles.add(mobile);

        mobile = new Mobile();
        mobile.setName("Blackberry");
        mobile.setSummary("summary goes here");
        mobiles.add(mobile);

        setListAdapter(new MyAdapter(this, mobiles));
    }

} 
```

**移动.java**

```
class Mobile {
    String name;
    String summary;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSummary() {
        return summary;
    }

    public void setSummary(String summary) {
        this.summary = summary;
    }

} 
```

**我的适配器.java**

```
class MyAdapter extends BaseAdapter {

    private Context context;
    private ArrayList<Mobile> mobiles;

    public MyAdapter(Context context, ArrayList<Mobile> mobiles) {
        this.context = context;
        this.mobiles = mobiles;
    }

    @Override
    public int getCount() {
        return mobiles.size();
    }

    @Override
    public Object getItem(int position) {
        return mobiles.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = (View) inflater.inflate(
                    R.layout.list_entry_layout, null);
        }

        TextView name = (TextView)convertView.findViewById(R.id.list_entry_title);
        TextView summary=(TextView)convertView.findViewById(R.id.list_entry_summary);

        name.setText(mobiles.get(position).getName());
        summary.setText(mobiles.get(position).getSummary());

        return convertView;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T12:33:01.867

构建自己的`ArrayAdapter`.
参见例如[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)。

# django - 如何在我的 Facebook 应用程序中使用内部授权 Google API 进行 OAuth

> ID：11281954
> 
> 赞同：1
> 
> 时间：2012-07-01T12:30:27.867
> 
> 标签：django, web-applications, oauth, google-api, gdata-api

我正在使用 Django 构建一个 Facebook 应用程序，而我正在使用 Blogger API。所以，我只想从公共博客（我的博客）中读取数据。

我尝试阅读文档，发现我们有 3 种身份验证机制（ClientLogin、OAuth、AuthSub Proxy）。由于我不能直接将登录凭据放入应用程序（不安全），因此我只有一个选项可以使用。即，OAuth。

我项目的棘手部分是，“用户”（facebook 用户）应该能够访问我的数据，而无需向 Google 提供任何授权信息。然而，在 Google - OAuth 的眼中，当我从博客中提取数据以显示给公众时，我被认为是当有人在 facebook 上打开应用程序时需要授权应用程序的“用户”，这完全是荒谬的。 .

因此，可能有两种方法可以做到这一点：

1.  我应该能够在没有任何用户授权的情况下从博客中提取数据..

我该怎么做？如果不

1.  我应该能够在内部为 OAuth 授权我的应用程序，以便 facebook 用户可以访问数据而无需向 google 提供任何信息。

我怎样才能做到这一点？？如果可能，这是一种安全的方式吗？

*   我对 OAuth、Google API 很陌生。所以，请建议最好和安全的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:08:31.773

我认为您可以使用`Google API Access Token`拉取公共数据.. 或`OAuth Service account`.

这些中的任何一个都可以完成您的工作。

# jquery - jQuery 变量传递

> ID：11281955
> 
> 赞同：1
> 
> 时间：2012-07-01T12:30:28.413
> 
> 标签：jquery, parameter-passing

我正在浏览一些 jQuery 教程，但我似乎无法找到这种混乱的原因。

```
<div id="container">

        <a href="#">Click Me</a>

    </div>      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
    <script>

        function doSomthing(){
            aMessage = message;
            console.log(this);
            console.log(aMessage);
        }

        $('a').on('click', doSomthing)
    </script> 
```

当用户单击锚标记并运行 doSomthing 函数时，查看上面的代码。

但是我不明白为什么，如果将代码更改为以下内容（将括号添加到 doSomthing），doSomthing 函数会立即运行而无需单击锚标记。

```
$('a').on('click', doSomthing()) 
```

此外，如果我想在单击时运行 doSomthing 时传递参数，会发生什么。例如

```
<div id="container">

        <a href="#">Click Me</a>

    </div>      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
    <script>

        function doSomthing(message){
            console.log(this);
            console.log(message);
        }

        $('a').on('click', doSomthing('face bash'))
    </script> 
```

我通常期望的是，在我单击锚标记后，控制台将记录“this”和传递的字符串，但是 doSomthing 函数在页面加载后立即运行，而不是在单击锚标记时运行：S

您如何正常将参数传递给通过其他函数调用的函数：S？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:31:51.910

也许试试

```
$('a').on('click', function(){
    doSomthing('face bash');
}) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:37:49.313

您需要从函数返回一个新函数：

```
 function doSomthing(message) {
        return function() {
            console.log(this);
            console.log(message);
        };
    } 
```

由于您传递的是调用结果`doSomthing`，`.click`因此结果必须是函数 not `undefined`。

```
$('a').on('click', doSomthing('face bash')) 
```

保持原样。

或者，您可以保持`doSomthing`机智并且只是[代理](http://api.jquery.com/jQuery.proxy/)（Currying 仍然没有记录并且需要 jQuery 1.6+）它：

```
 $('a').on('click', $.proxy(doSomthing, null, "face bash")) 
```

# ruby-on-rails - 将许多照片添加到记录中。无法批量分配受保护的属性：

> ID：11281957
> 
> 赞同：0
> 
> 时间：2012-07-01T12:30:53.810
> 
> 标签：ruby-on-rails, activerecord, paperclip, mass-assignment

我正在尝试使用回形针将照片添加到我的应用程序中。一个杯子可以有很多照片。

当我尝试保存新杯子时，出现此错误：

> ActiveModel::MassAssignmentSecurity::MugsController#create 中的错误
> 
> 无法批量分配受保护的属性：mugphoto

**杯子.rb**

```
class Mug < ActiveRecord::Base
  attr_accessible :name, :mugphotos_attributes
  has_many :mugphotos
  accepts_nested_attributes_for :mugphotos, :allow_destroy => true
end 
```

**大头照.rb**

```
class Mugphoto < ActiveRecord::Base
  belongs_to :mug

  has_attached_file :mugphoto, 
    :styles => {  
      :thumb => "100x100#" }
end 
```

**马克杯 new.html.erb**

```
<%= form_for @mug, :html => { :multipart => true } do |f| %>

  <p>name: <br>
  <%= f.text_field :name %></p>

  <%= f.fields_for :mugphoto do |photo| %>
    <p>photo: <br>
    <%= photo.file_field :mugphoto %></p>
  <% end %>     

  <div class="button"><%= submit_tag %></div>
<% end %> 
```

**mugs_controller**

```
class MugsController < ApplicationController

  def new
    @mug = Mug.new
  end

  def create
    @mug = Mug.create(params[:mug])
    if @mug.save
      flash[:notice] = 'Mug added'
      redirect_to mugs_path
    else
      render :action => :new
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:33:52.137

您需要在 Mugphoto.rb 中添加 attr_accessible :mugphoto

# java - 测试时无法让 Maven（和 Eclipse）使用测试资源

> ID：11281959
> 
> 赞同：1
> 
> 时间：2012-07-01T12:31:11.173
> 
> 标签：java, eclipse, unit-testing, maven

我无法让单元测试使用提供的资源`src\test\resources`而不是`src\main\resources`. 是的，有问题的资源在两个地方的名称相同。

我做了相当多的研究，查看了 StackOverflow 的帖子，例如：

*   [让 Maven 使用测试资源](https://stackoverflow.com/questions/6267312/how-to-make-maven-use-test-resources)
*   [让 Eclipse 使用测试资源](https://stackoverflow.com/questions/2912517/make-eclipse-use-src-test-resources-instead-of-src-main-resources)

然而，这个基本问题让我很难过。

我设置了一个非常标准的 Maven Java 项目：

*   应用程序源和资源下`src\main`
*   测试源和资源下`src\test`

Eclipse（感谢 M2Eclipse 插件）在其构建路径中有 、 和`src\main\java`all `src\main\resources`。`src\test\java``src\test\resources`

使用此设置，当我从 Eclipse 资源文件中运行单元测试时，`src\main\resources`会引用其中的资源文件。我知道为什么（因为它们在构建路径中），但我不知道如何防止它。单元测试配置面板不允许我调整（默认）类路径组件的顺序。

即使我要掩饰我无法从 Eclipse 运行我的测试，Maven 也不能很好地发挥作用。我可以看到该`processResources`步骤是将所有测试资源复制到`target\test-classes`树下。但是，当执行单元测试时，`target\classes`正在查阅资源文件的副本。

当然，我忽略了一些*明显*的东西。感谢您提供的任何帮助。

[编辑]**添加更多（可能相关信息）**：

有问题的资源文件是一个名为`persistence.xml`. [Eclipselink](http://www.eclipse.org/eclipselink/)使用它来连接到关系数据源。应用程序使用的文件版本位于`src\main\resources\META-INF`. Maven 构建（比如 WAR）将`META-INF`目录放在目录下`classes`。因此 EclipseLink 工具会找到这个文件。

```
src/main
  |
  + -- java/com/company/ProductDao.java
  | 
  + -- resources/META-INF/persistence.xml  (Requires application container)
  |
src/test
  |
  + -- java/com/company/ProductDaoTest.java
  | 
  + -- resources/META-INF/persistence.xml  (out of container for unit tests)
  | 
```

这里的要点是：**EclipseLink 需要在类路径上的目录中`persistence.xml`调用`META-INF`**一个文件（是的，可以覆盖默认值，但我们不要去那里）。

因此，当*单元测试*运行时，会调用相同的应用程序逻辑。但是`src\main\resources`不能使用文件的版本。目录中提供了不同的*版本*`src\test\resources`。

由于`src\main\resources`正在使用中的版本，*看来*我唯一的办法是在单元测试期间指示 Eclipselink 查找不同的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:37:33.853

这根本不是 Maven 问题。如果您将所有内容都折叠到单个源文件夹中，您将遇到完全相同的问题。想想你真正在做什么。您的单元测试需要来自 src/main 的代码，否则它将不是该代码的单元测试。src/main/java 和 src/main/resources 组成了您正在测试的工件。您不会混合和匹配单元测试的目录。

你基本上是这样做的：

```
/src/com/mycompany/myresource.txt        
/src/com/mycompany/MyAwesomeClass.java
/src/com/mycompany/myresource.txt
/src/com/mycompany/TestMyAwesomeClass.java 
```

不要那样做。配置您的单元测试以从另一个文件加载模拟数据/您的资源文件。

如果 Maven 和 Eclipse 有任何问题的话，我并没有遇到很多问题。意识到 Maven 不是魔法。如果你要使用 Maven 和 Eclipse，一切都必须由 POM 文件驱动，而不是相反。然后事情就很顺利了。

只是为了澄清一下，您的问题与 Maven 无关。您在类路径上声明了两次资源。你需要重新考虑你的单元测试。您可以通过 Profiles 做一些事情来解决这个问题，但这是对构建系统的滥用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T13:14:07.773

我回答了，然后不得不花了一些时间试图再次弄清楚。在surefire文档中，它说测试类应该在类路径中首先出现： [http ://maven.apache.org/surefire/maven-surefire-plugin/examples/configuring-classpath.html](http://maven.apache.org/surefire/maven-surefire-plugin/examples/configuring-classpath.html)

并且肯定会显示（使用 mvn --debug 选项）： [DEBUG] test classpath:
...\target\test-classes
...\target\classes ....m2\repository\javax\enterprise\cdi-api\ 1.2\cdi-api-1.2.jar
....m2\repository\javax\el\javax.el-api\3.0.0\javax.el-api-3.0.0.jar ...但它仍然使用目标\类第一。奇怪的是，这个错误是前段时间报告的。然后无论我做什么，classes 文件夹中的persistence.xml 都会被首先获取。

所以我不得不在一个persistence.xml 文件中使用两个持久性单元，这可能不是最好的，但也可以正常工作。

# javascript - 单击另一个元素时JQuery隐藏下拉菜单

> ID：11281962
> 
> 赞同：0
> 
> 时间：2012-07-01T12:31:52.640
> 
> 标签：javascript, jquery, css

我有以下 html 来创建下拉菜单：

```
<li class="user-section user-section-original">
    <img class="user-image" src="{{ user.get_profile.avatar_small.url }}" height="30" width="30"/>
    <span class="name">{{ user.first_name }} {{ user.last_name.0}}.</span>
</li>
<li class="user-section-dropdown user-section hidden">
    <img class="user-image" src="{{ user.get_profile.avatar_small.url }}" height="30" width="30"/>
    <span class="name">{{ user.first_name }} {{ user.last_name.0}}.</span>
    <a href="{% url logout %}" class="dropdown-item">Log Out</a>
</li> 
```

当用户单击菜单时，它将下拉，然后如果用户再次单击它（或单击下拉菜单之外的任何位置），它将再次隐藏。

这是我到目前为止所拥有的：

```
$("#header li.user-section").click(function() {
    $("#header .user-section-dropdown").css('display', 'block');
    $("#header .user-section-original").css('display', 'none');
}); 
```

这会在单击帐户部分时显示帐户下拉菜单。当再次单击它或单击页面上的另一个部分时，我如何使它也消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:06:48.027

我认为最简单的方法是切换一个类而不是直接应用样式。

```
$("#header li.user-section").click(function() {
    $("#header .user-section-original").toggleClass("hidden");
}); 
```

然后在你的css中创建一个非语义类，比如

```
.hidden { display:none; } 
```

要让它在您单击其他任何地方时消失，请尝试：

```
$(​window).click(function(e){
    var $target = $("#header .user-section-original"); 
    if( $target.hasClass("hidden");
        $target.removeClass("hidden");
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T09:15:54.003

很简单，只需在你的菜单上使用 stopPropagation，然后给'document'点击事件'removeClass'方法；
提示：为了将整个身体向左/向右移动，您可以将“body”元素与您的菜单一起移动；我刚刚应用了这个方法。花了我一天！一天。

```
$('.button').bind('click', function(e) {
    e.stopPropagation();
    $('.menu').toggleClass('slide');
});

// slide out when click other parts of current page

$(document).click(function(){
    $('.menu').removeClass('slide-in');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T13:47:23.420

I know the correct answer has been given, but I'd like to share this Plugin with you: [http://benalman.com/projects/jquery-outside-events-plugin/](http://benalman.com/projects/jquery-outside-events-plugin/)

It's a simple plugin which binds on clicks outside an element. Within this bind-function you simply check if your element is visible or hidden. It's visible, hide it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T12:55:47.203

您只需将单击侦听器添加到整个文档并隐藏下拉列表（如果显示）。

```
$(document).click(function() {
    if($("#header .user-section-dropdown").css('display') == 'block') {
        $("#header .user-section-dropdown").css('display', 'none');
        $("#header .user-section-original").css('display', 'block');
    }
}); 
```

此外，您需要修改原始函数以处理这两种情况：

```
$("#header li.user-section").click(function(e) {
    if($("#header .user-section-dropdown").css('display') == 'none') {
        $("#header .user-section-dropdown").css('display', 'block');
        $("#header .user-section-original").css('display', 'none');
        e.stopPropagation()
    }
    else {
        $("#header .user-section-dropdown").css('display', 'none');
        $("#header .user-section-original").css('display', 'block');
    }
}); 
```

e.stopPropagation() 用于不让文档点击处理程序被调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T13:11:31.367

在点击功能上，您可以添加以下代码

```
$('li[class$="dropdown"]').css('display', 'none') 
```

这将设置所有以 dorpdown 结尾的 li 元素，`display:none`然后您可以显示指定的下拉菜单`display:block`。最后你会有类似的东西

```
$(".specificliclass").click(function(){
$('li[class$="dropdown"]').css('display', 'none');
$('.specificliclass').css('display', 'block')

}); 
```

# dojo - 如何将序列号放在 dojox 网格行中

> ID：11281963
> 
> 赞同：1
> 
> 时间：2012-07-01T12:31:56.543
> 
> 标签：dojo, dojox.grid

我们如何在每个道场网格行中插入行号作为序列号？当网格被过滤或排序时，这不能改变..任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:06:48.167

我找到的解决方案是在网格结构中使用“get”

添加

```
function siFormatter(index){
return index + 1;
} 
```

并将其添加到网格结构中 -

```
{field: "Si", name: "#", get : siFormatter, filterable: false} 
```

使用网格中的 canSort 函数禁用此列的排序

不知道是否有其他更好的解决方案..

# .htaccess - 仅数字 URL 的基于 htaccess 的重定向

> ID：11281964
> 
> 赞同：2
> 
> 时间：2012-07-01T12:32:13.030
> 
> 标签：.htaccess, redirect, url-redirection

让我通过示例来解释一下——我希望 Web 服务器重定向一个 URL `http://example.com/-NUM`，`http://example.com/?p=NUM`例如，`http://example.com/-121`应该重定向到`http://example.com/?p=121`.

在这种情况下，.htaccess 重定向规则应该是什么样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:35:51.110

该模式`^-(\d+)$`将匹配以连字符开头的数字 URI 并捕获到`$1`.

```
RewriteEngine On
RewriteRule ^-(\d+)$ /?p=$1 [L] 
```

例如，如果这是一个 PHP 脚本，您可能需要`index.php`用作目标：

```
RewriteRule ^-(\d+)$ index.php?p=$1 [L] 
```

# java - 读取 BufferedReader

> ID：11281966
> 
> 赞同：0
> 
> 时间：2012-07-01T12:32:33.327
> 
> 标签：java, android, bufferedreader

有没有办法可以创建某种类型的侦听器来侦听 BufferedReader 中是否有新数据？我知道我可以使用类似 while 循环的东西并继续查看它是否可以读取，但即使在异步任务中，这似乎也会阻塞。

基本上我想要做的是收听新数据的套接字输入流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T15:08:40.090

java.io 中的所有内容都是阻塞模式。通常的技术是有一个专门的阅读线程。

# windows-phone-7 - 如何录制视频？

> ID：11281971
> 
> 赞同：1
> 
> 时间：2012-07-01T12:33:15.183
> 
> 标签：windows-phone-7

我想访问相机录制视频以上传，但遇到很多文章指出第三方无法录制视频。这是链接：

[http://forums.create.msdn.com/forums/p/74190/452090.aspx](http://forums.create.msdn.com/forums/p/74190/452090.aspx) [http://pocketnow.com/windows-phone/no-video-camera-access-for-windows-phone-7-developers](http://pocketnow.com/windows-phone/no-video-camera-access-for-windows-phone-7-developers)

这是真的吗？如果不是，我如何使用相机录制视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:32:46.240

使用带有原始相机数据的 Mango 功能。基本上，您只需要以下文章：http: [//jonas.follesoe.no/2011/07/22/qr-code-scanning-on-windows-phone-75-using-zxlib](http://jonas.follesoe.no/2011/07/22/qr-code-scanning-on-windows-phone-75-using-zxlib)

唯一的区别是在方法*ScanPreviewBuffer*中作者扫描二维码，您应该存储这些图像，然后从中制作视频。

这就是我将如何完成这项任务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T14:40:49.473

你很幸运，因为 MSDN 有[一篇](http://msdn.microsoft.com/en-us/library/hh394041%28v=vs.92%29.aspx)关于如何做到这一点的好文章！您还可以[下载完整的示例](http://go.microsoft.com/fwlink/?LinkId=226290)代码。[您可以在此处](http://msdn.microsoft.com/en-us/library/ff431744%28v=VS.92%29.aspx)查看来自 MSDN 的更多示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T16:15:11.833

> 这是真的吗？

在写这些文章时，它曾经是真实的。Mango 之前的 WP7 的早期版本不支持任何 API 来访问相机（我认为你能做的最好的就是启动相机应用程序本身）。正如 Shawn 和 Alex 所说，从 v7.1 开始，您可以访问它。

# javascript - 如何在不阻止鼠标交互的情况下在 Google 地图上叠加某些内容？

> ID：11281977
> 
> 赞同：1
> 
> 时间：2012-07-01T12:33:59.827
> 
> 标签：javascript, google-maps-api-3

我想在谷歌地图上画点东西。所以我想在地图上放一个画布，然后画一些东西，只是这会阻止与地图的交互。我怎样才能绘制一些东西，但让地图的其余部分保持交互？相关代码片段：

款式：

```
<style>
#myCanvas {
    border: 1px solid #9C9898;
}
#canvas-wrap {
    position:relative;
} /* Make this a positioned parent */
#map_canvas {
    position:absolute;
    top:0px;
    left:0px;
    z-index: -1;
}
</style> 
```

Javascript：

```
<script type="text/javascript">
function loadMap() {
  var fenway = new google.maps.LatLng(42.345573,-71.098326);
  var mapOptions = {center: fenway, zoom: 14, mapTypeId: google.maps.MapTypeId.ROADMAP };
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function drawLine(){
  var canvas = document.getElementById("myCanvas");
  var context = canvas.getContext("2d");
  context.beginPath();
  context.moveTo(100, 100);
  context.lineTo(400, 400);
  context.lineWidth = 9;
  context.stroke();
};

function init(){
  loadMap();
  drawLine();
}
</script> 
```

HTML：

```
<div id="canvas-wrap">
  <canvas id="myCanvas" width="600px" height="600px"></canvas>
  <div id="map_canvas" style="width: 600px; height: 600px"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T14:17:26.153

只要您的叠加层不需要用户交互，Ocelot20 的答案就有效。如果是这样，您需要使用 Google 提供的 Polygon (etc) 类。

转发事件*可能会*起作用，但您完全受制于 Google，不会更改事件机制的一些小细节。而且，并非无关紧要，您必须在两个方向上转发事件：从 Google 的地图层到您的画布，以及从您的画布的透明部分到 Google 的地图层。

IE。使用多边形；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T13:07:28.327

`pointer-events' CSS 属性是您正在寻找的：

```
#map_canvas {
    position:absolute;
    top:0px;
    left:0px;
    z-index: -1;
    pointer-events:none;
} 
```

这基本上将使画布对鼠标事件透明。

编辑 - 显然这只适用于某些浏览器。这是一种更复杂但跨浏览器兼容的方法：

[通过层转发鼠标事件](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

# android - 点击列表后填充控件

> ID：11281978
> 
> 赞同：0
> 
> 时间：2012-07-01T12:34:28.410
> 
> 标签：android, android-listview, android-dialog

我有这样的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:gravity="center_vertical|center_horizontal"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/et_OK"
        android:layout_width="400dip"
        android:layout_height="50dip"
        android:layout_toRightOf="@id/tv_patientNOK"
        android:background="@android:drawable/editbox_background" />

    <Button
        android:id="@+id/btn_show"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center"
        android:layout_toRightOf="@id/btn_Continue"
        android:paddingLeft="5dip"
        android:text="show" />

</LinearLayout> 
```

代码看起来像

```
Button Show;
EditText    et_OK;
String[] stringArray;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{

    // define the Data 
     View view = inflater.inflate(
                R.layout.searchmainscreen,
                container,
                false);

this.et_OK = ((EditText) view.findViewById(R.id.et_OK));
 this.Show= (Button)view.findViewById(R.id.btn_show);
        this.Show.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                 AlertDialog.Builder builder = new AlertDialog.Builder(this);
                    builder.setTitle("Select Color Mode");

                    ListView modeList = new ListView(this);
                     stringArray = new String[] { "Bright Mode", "Normal Mode" };
                    ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, stringArray);
                    modeList.setAdapter(modeAdapter);
                    modeList.setOnItemClickListener(new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> parent, View view,
                              int position, long id) {

                    FillControl(position) ;
                 }});

                    builder.setView(modeList);
                    final Dialog dialog = builder.create();

                    dialog.show();

            }
        });

     return view;
}
public void FillControl(int Postion)
{
    /*
     *  TextView Result ; 

Button Continue ;
Button Clear;

EditText       

            NOK ;
CheckBox Registered ; 

// 1 regi
 * 
     * 
     * */

    Log.d(" the arrayaaaaaaaa"," the array is has "+  PatientSearchResult.size() + "With Postion" + Postion);

    String test  = stringArray[Postion] ; 

    et_OK.settext(test); // it crash here 

}

} 
```

它引发错误

```
07-01 15:12:10.860: D/the arrayaaaaaaaa(32020):  the array is has 18With Postion4
07-01 15:12:10.860: W/ResourceType(32020): No package identifier when getting value for resource number 0x00002736
07-01 15:12:10.860: D/AndroidRuntime(32020): Shutting down VM
07-01 15:12:10.860: W/dalvikvm(32020): threadid=1: thread exiting with uncaught exception (group=0x4023f760)
07-01 15:12:10.880: E/AndroidRuntime(32020): FATAL EXCEPTION: main
07-01 15:12:10.880: E/AndroidRuntime(32020): android.content.res.Resources$NotFoundException: String resource ID #0x2736
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.content.res.Resources.getText(Resources.java:238)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.widget.TextView.setText(TextView.java:3229)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at com.appnetics.PatientSearch.FillControl(PatientSearch.java:336)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at com.appnetics.PatientSearch$3.onItemClick(PatientSearch.java:293)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.widget.AdapterView.performItemClick(AdapterView.java:282)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.widget.AbsListView.performItemClick(AbsListView.java:1148)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2643)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:3466)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.widget.ListView.onTouchEvent(ListView.java:3805)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.View.dispatchTouchEvent(View.java:4640)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1881)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1296)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.app.Dialog.dispatchTouchEvent(Dialog.java:720)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1854)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.View.dispatchPointerEvent(View.java:4708)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2448)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.view.ViewRoot.handleMessage(ViewRoot.java:2109)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.os.Looper.loop(Looper.java:132)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at android.app.ActivityThread.main(ActivityThread.java:4123)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at java.lang.reflect.Method.invokeNative(Native Method)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at java.lang.reflect.Method.invoke(Method.java:491)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-01 15:12:10.880: E/AndroidRuntime(32020):    at dalvik.system.NativeStart.main(Native Method)
07-01 15:17:16.430: I/Process(32020): Sending signal. PID: 32020 SIG: 9
07-01 15:17:20.440: D/CLIPBOARD(32199): Hide Clipboard dialog at Starting input: finished by someone else... !
07-01 15:17:31.575: D/dalvikvm(32199): GC_FOR_ALLOC freed 115K, 4% free 6655K/6919K, paused 20ms
07-01 15:17:37.000: D/dalvikvm(32199): GC_CONCURRENT freed 102K, 4% free 6938K/7175K, paused 2ms+3ms
07-01 15:17:37.940: D/EEEEEEEEEEEEEEEEEE(32199): Am here wanna play
07-01 15:17:38.130: D/the arrayaaaaaaaa(32199):  the array is has 18
07-01 15:17:38.145: D/the arrayaaaaaaaa(32199):  the array is has 18
07-01 15:17:38.145: D/EEEEEEEEEEEEEEEEEE(32199): 18
07-01 15:17:38.145: D/EEEEEEEEEEEEEEEEEE(32199): Am here wanna play 123
07-01 15:17:38.185: D/dalvikvm(32199): GC_FOR_ALLOC freed 367K, 8% free 6984K/7559K, paused 35ms
07-01 15:17:38.185: I/dalvikvm-heap(32199): Grow heap (frag case) to 7.379MB for 513744-byte allocation
07-01 15:17:38.215: D/dalvikvm(32199): GC_FOR_ALLOC freed <1K, 8% free 7485K/8071K, paused 17ms
07-01 15:17:38.275: D/dalvikvm(32199): GC_CONCURRENT freed 4K, 6% free 7605K/8071K, paused 1ms+2ms
07-01 15:17:39.625: D/the arrayaaaaaaaa(32199):  the array is has 18With Postion3
07-01 15:17:39.625: W/ResourceType(32199): No package identifier when getting value for resource number 0x00002734
07-01 15:17:39.625: D/AndroidRuntime(32199): Shutting down VM
07-01 15:17:39.625: W/dalvikvm(32199): threadid=1: thread exiting with uncaught exception (group=0x4023f760)
07-01 15:17:39.645: E/AndroidRuntime(32199): FATAL EXCEPTION: main
07-01 15:17:39.645: E/AndroidRuntime(32199): android.content.res.Resources$NotFoundException: String resource ID #0x2734
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.content.res.Resources.getText(Resources.java:238)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.widget.TextView.setText(TextView.java:3229)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at com.appnetics.PatientSearch.FillControl(PatientSearch.java:336)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at com.appnetics.PatientSearch$3.onItemClick(PatientSearch.java:293)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.widget.AdapterView.performItemClick(AdapterView.java:282)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.widget.AbsListView.performItemClick(AbsListView.java:1148)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2643)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:3466)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.widget.ListView.onTouchEvent(ListView.java:3805)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.View.dispatchTouchEvent(View.java:4640)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1881)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1296)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.app.Dialog.dispatchTouchEvent(Dialog.java:720)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1854)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.View.dispatchPointerEvent(View.java:4708)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2448)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.view.ViewRoot.handleMessage(ViewRoot.java:2109)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.os.Looper.loop(Looper.java:132)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at android.app.ActivityThread.main(ActivityThread.java:4123)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at java.lang.reflect.Method.invokeNative(Native Method)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at java.lang.reflect.Method.invoke(Method.java:491)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-01 15:17:39.645: E/AndroidRuntime(32199):    at dalvik.system.NativeStart.main(Native Method) 
```

任何想法如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:58:19.287

在此检查之前首先评论用于获取字符串并设置为 edittext 的两行

```
 Log.d("length",""+stringArray.length()); 
```

如果不等于 0，我们可以继续设置文本或其他内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:38:28.580

更改为

```
String test  = stringArray[Postion] ; 
```

至

```
String test  = String.valueOf(stringArray[Postion]) + "" ; 

et_OK.setText(test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T13:04:13.970

你不觉得吗？

```
 et_OK.settext(test); // it crash here 
```

应该是

```
 et_OK.setText(test); 
```

# javascript - 在幻灯片中暂停 youtube 视频

> ID：11281982
> 
> 赞同：1
> 
> 时间：2012-07-01T12:34:41.297
> 
> 标签：javascript, jquery, html, youtube

我有一个幻灯片/滑块，其中包含来自 youtube 的图像和视频。如果按下下一个或上一个按钮，是否可以暂停当前的 youtube 视频。当一个人回到同一张幻灯片时，我还能自动播放剪辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:36:52.560

是的。YouTube JavaScript Player API 参考是您所需要的[https://developers.google.com/youtube/js_api_reference#GettingStarted](https://developers.google.com/youtube/js_api_reference#GettingStarted)

使用`player.stopVideo()`方法。

# c++ - 如何找出使用的内存量

> ID：11281983
> 
> 赞同：1
> 
> 时间：2012-07-01T12:34:42.220
> 
> 标签：c++, c, profiling, heap-memory, dynamic-allocation

我正在尝试一个 C/C++ 程序，我想知道由于堆和其他一些数据结构而使用了多少内存。那么如何找出各种数据结构使用的内存量呢？

我认为 malloc 运算符应该被覆盖，但我不确定是否相同。
我正在使用 Linux 和 Netbeans 7.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:42:53.813

您可以按照类似问题中的建议为 C++ 使用内存分析器，例如 Valgrind。看到[这个](http://valgrind.org/docs/manual/ms-manual.html)

对于 netbeans IDE 看看[这个](http://netbeans.org/kb/docs/cnd/profiling-tools.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:43:19.747

如果您想使用手工制作的内存分析，那么您需要重载`operator new`和/或`malloc()`运行。虽然`malloc()`可以很容易地重载，但你需要使用宏技巧。

使用和重载`operator new`的优势在于，它更容易、更优雅，并且您可以单独评估每种类型的`struct`/ `class`。

# html - 在 JQMobile 的同一行中从右侧写入文本

> ID：11281984
> 
> 赞同：0
> 
> 时间：2012-07-01T12:34:46.117
> 
> 标签：html, jquery-mobile

我正在使用此代码来显示这样的行 ***1234 :order** ..................... ..................................***一些文字***（没有所有......）

```
 <ul data-role="listview" class="test" data-theme="a">
        <li>
<div class="ui-grid-a" data-theme="a">
<div class="ui-block-a"></div>
<div class="ui-block-b">1234</div>

</div>
            <p class="ui-li-aside"><strong>order</strong></p> 
        </li>  
        <li><div class="ui-block">some text(not english)</div></li>    

    </ul> 
```

现在我想显示另一条线，该线将从右侧开始，并且将显示在所有原始文件上而不创建新的`li`。（从右到左）如果我与另一个一起做，`li`所以我得到另一个列表，我该怎么做在同一行没有开始新的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:09:26.290

不确定您所说的“如果我用另一个 Liso 来做，我会得到另一个列表”，但使用另一个`<li>`很有意义。

只需给这个 li 一个类（让我们说 class="fr"），然后在 css 中执行：

```
.fr{
float: right;
text-align: right
} 
```

# mysql - MySQL JOIN，UNION，两者都有还是两者都没有？

> ID：11281987
> 
> 赞同：1
> 
> 时间：2012-07-01T12:35:09.863
> 
> 标签：mysql

在 MySQL 中，我试图获得某个结果集，但不确定要研究什么。

我有一个“人”表：

uid（PK），名字，姓氏。

然后我有一个“匹配”表：

matchid，uid1（fk），score1，uid2（fk），score2

我希望我的查询结果集显示：

matchid，uid1 的名字，score1，uid2 的名字，score2。

我的初学者技能似乎无法获得它，我的问题是第二个 uid 并将该人的名字显示为结果集中的列而不是 id。

我已经尝试过，就像使用名称和 matchid 进行测试一样：

```
 Select * From
    ( Select matches.idmatches, people.FirstName, 
      From people, matches 
      Where matches.uid1 = people.uid ) as a
    JOIN
    (Select matches.idmatches, people.FirstName, 
     From people, matches 
     Where matches.uid2 = people.uid ) as b 
```

但它多次返回每个名称（我有 6 个条目，它返回了 36 个结果......似乎经历了每个可能的组合）并且 matchid 不匹配：

```
uid1  matchid uid2 matchid
Michael 13  Jennii  13
Michael 14  Jennii  13
Michael 15  Jennii  13
Michael 16  Jennii  13
Michael 17  Jennii  13
Michael 18  Jennii  13
Michael 13  Jennii  14
Michael 14  Jennii  14
Michael 15  Jennii  14
Michael 16  Jennii  14
Michael 17  Jennii  14
Michael 18  Jennii  14
Michael 13  Jennii  15
...and so on...... you get the point... 
```

我想要的是：

```
 uid1 matchid uid2 matchid
    Michael 13  Jennii  13
    Michael 14  Jennii  14
.......and so on..... with no duplicates. 
```

希望一切都有意义，首先不确定我是否正确地制作了表格，然后如果使用连接是正确的方法，如果是的话..我真的不明白我是如何得到这个输出的，我做错了什么. 多谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:39:15.830

为什么不使用：

```
SELECT matchid, p1.firstname AS firstname1, matches.score1, p2.firstname AS firstname2, matches.score2
FROM matches, people p1, people p2
WHERE matches.uid1 = p1.uid
AND matches.uid2 = p2.uid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:44:32.027

```
SELECT 
  p1.firstname AS player1, m.score1, 
  p2.firstname AS player2, m.score2
FROM matches AS m 
INNER JOIN people AS p1 
  ON m.uid1 = p1.uid
INNER JOIN people AS p2 
  ON m.uid2 = p2.uid
GROUP BY m.matchid 
```

你会得到：

```
player1 score1 player2 score2
Alice   12     Bob     13
... 
```

# asp.net-mvc-3 - 将数字控制台应用程序转换为 MVC3 Web 应用程序时遇到问题

> ID：11281988
> 
> 赞同：0
> 
> 时间：2012-07-01T12:35:23.043
> 
> 标签：asp.net-mvc-3, razor

我是 MVC 的新手，之前在 C# 控制台应用程序中做过很多数值编程。我想最终构建运行这些相同类型程序的 Web 应用程序。我的第一次尝试虽然遇到了困难。

这是一个非常基本的应用程序，它将从表单中获取一个数字，然后计算 1 和该数字之间的所有数字的总和，这些数字可以被 3 或 5 整除。我创建了一个简单的 Model 类，其中包含一个变量，它将对应于输入：

```
namespace MvcDemo.Models
{
public  class Values 
{

    public int Number { get; set; }

}
} 
```

然后我创建了一个控制器类：

```
namespace MvcDemo.Controllers
{
public class HomeController : Controller
{
    Values v = new Values();

    public ActionResult Index()
    { return View(); }

    [HttpPost]
    public ActionResult Index(int number)
    {

        v.Number = number;

        return View(v); 
    }

}
} 
```

最后是视图：

```
@Model MvcDemo.Models.Values

@{ViewBag.Title = "Home Page";}

<h1>Sum of Multiples of 3 & 5</h1>

@using (Html.BeginForm()){

@Html.TextBox("number");

    <input type="submit" />   
}

@{
int n;
List<int> nums = new List<int>();
int sum = 0;

if(@Model.Number!=null)
{
n = @Model.Number;
}
else
{
    n = 10;    
}

for (int i = 1; i < n; i++)
{
    if (i % 3 == 0 || i % 5 == 0)
    {
        nums.Add(i);
    }
}

for (int j = 0; j < nums.Count; j++)
{
    sum += nums[j];
}

}
<p>The sum of the factors is: @sum</p> 
```

当我尝试运行它时，我得到一个异常说“无法对空引用执行运行时绑定”。这是指我试图分配 n 的视图页面。我不太确定如何解决这个问题。

在视图类中使用数字逻辑也是不好的做法，还是在控制器类中会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:38:24.477

您收到错误，因为模型为空。

如果您使用强类型视图，则不会出现该错误，但是由于您编写了`@Model`而不是`@model`，因此您的视图不是强类型的。

# php - 以下对 call_user_func_array() 的调用是否有效？

> ID：11281992
> 
> 赞同：0
> 
> 时间：2012-07-01T12:36:08.003
> 
> 标签：php, pass-by-reference, php-5.4

我有几个库使用类似于以下代码的代码。

```
$args = array_merge(array(&$target, $context), $args);
$result = call_user_func_array($callback, $args); 
```

两种情况下的代码都不同，但我展示的代码基本上是完成的。该 `$callback`函数使用以下签名：

```
function callback(&$target, $context); 
```

库文件和第三方代码（称为插件或扩展）都采用该函数签名，这意味着没有一个扩展将回调定义为，例如 `function my_extension_loader_callback($target, $context)`.

令我困惑的是[call_user_func_array()](http://php.net/manual/en/function.call-user-func-array.php)文档中的以下句子。

> 在 PHP 5.4 之前，param_arr 中的引用变量通过引用传递给函数，而不管函数是否期望相应参数通过引用传递。这种形式的调用时按引用传递不会发出弃用通知，但它仍然被弃用，并已在 PHP 5.4 中删除。**此外，这不适用于遵循函数签名的内部函数。**当函数需要通过引用传递参数时，按值传递会导致警告并`call_user_func()`返回`FALSE`。

特别是，突出显示的句子似乎表明 PHP 代码中定义的函数没有这样做。

以这种方式使用`call_user_func_array()`在 PHP 5.4 中有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T13:26:39.673

使用`call_user_func_array`时，在较新版本的 PHP 中，当函数需要引用时按值传递被视为错误。

这是 PHP 5.3.3 之前的有效 PHP 代码：

```
//first param is pass by reference:
my_function(&$strName){
}

//passing by value, not by reference, is now incorrect if passing by reference is expected:
call_user_func_array("my_function", array($strSomething));

//correct usage
call_user_func_array("my_function", array(&$strSomething)); 
```

上面的值传递不再可能没有警告（我的项目也设置为在任何类型的错误（通知、警告等）上抛出异常。）所以我必须解决这个问题。

**解决方案** 我遇到了这个问题，这就是我解决它的方法（我有一个小型 RPC 服务器，所以在反序列化参数后没有引用值之类的东西）：

```
//generic utility function for this kind of situations
function &array_make_references(&$arrSomething)
{ 
    $arrAllValuesReferencesToOriginalValues=array();
    foreach($arrSomething as $mxKey=>&$mxValue)
        $arrAllValuesReferencesToOriginalValues[$mxKey]=&$mxValue;
    return $arrAllValuesReferencesToOriginalValues;
} 
```

虽然`$strSomething`不是通过引用传递，`array_make_references`但会使其成为对自身的引用：

```
call_user_func_array("my_function", array_make_references(array($strSomething))); 
```

我认为 PHP 人员正在考虑帮助人们捕获错误调用的函数（一个很好隐藏的陷阱），这在通过`call_user_func_array`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T12:47:58.223

如果`call_user_func_array()`退货`false`你有问题，否则一切都会好起来的。

默认情况下，参数不再通过引用传递，但您可以明确地进行。唯一的麻烦可能是您的参考在 期间丢失`array_merge()`，尚未测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-05T20:00:16.690

当有几个站点使用`call_user_func_array`通过引用传递的参数时，我在升级到 PHP5.4 时发现了同样的问题。

我所做的解决方法非常简单，包括`call_user_func_array`使用 eval() 将其自身替换为完整的函数调用。这不是最优雅的解决方案，但它符合我的目的:)

这是旧代码：

```
call_user_func_array($target, &$arguments); 
```

我替换为：

```
$my_arguments = '';
for ($i=0; $i<count($arguments); $i++) {
    if ($i > 0) { $my_arguments.= ", "; }
    $my_arguments.= "\$arguments[$i]";
}
$evalthis = " $target ( $my_arguments );";
eval($evalthis); 
```

希望这可以帮助！