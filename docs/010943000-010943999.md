# StackOverflow 问答 10943000-10943999

# ruby-on-rails - 如何修复 Rails 中存在问题的早期迁移？

> ID：10943002
> 
> 赞同：1
> 
> 时间：2012-06-08T04:17:24.070
> 
> 标签：ruby-on-rails, rails-migrations

我在本地编写了一个 Rails 应用程序，并且可能编写了 10-15 个迁移。这一切都在本地正常工作。

当我想在 heroku 上进行部署时，我遇到了一个问题，因为他们使用的 PostGreSQL 版本比我在本地使用的版本更早。由于我的一个数据库视图中缺少 DB 函数，我最早的迁移之一失败了。

我找到了一种解决 DB 函数问题的方法，但现在我被卡住了，因为我无法编写一个新的迁移来更改视图以使用 hack，因为 rake db:migrate 将在它命中原始后中止有问题的视图创建。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:24:28.323

首先删除你的数据库：

```
heroku pg:reset 
```

然后运行你的新迁移：

```
heroku rake db:migrate 
```

# actionscript-3 - as3 查找特定字符串的最后一次出现

> ID：10943010
> 
> 赞同：0
> 
> 时间：2012-06-08T04:18:20.013
> 
> 标签：actionscript-3

快速提问，***indexof()***找到字符串字符的第一个出现位置？最后出现的字符串字符呢？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T04:26:07.090

毫不夸张的说：

[`.lastIndexOf()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#lastIndexOf%28%29)

# ruby-on-rails - 销毁空白嵌套属性

> ID：10943013
> 
> 赞同：35
> 
> 时间：2012-06-08T04:18:44.770
> 
> 标签：ruby-on-rails, activerecord

如果嵌套模型的属性在父模型的表单中被空白，我想销毁嵌套模型 - 但是，`ActiveRecord::Callbacks`如果模型为空白，似乎不会调用。

```
class Artist < ActiveRecord::Base
  using_access_control
  attr_accessible :bio, :name, :tour_dates_attributes
  has_many :tour_dates, :dependent => :destroy
  accepts_nested_attributes_for :tour_dates, :reject_if => lambda { |a| a[:when].blank? || a[:where].blank? }, :allow_destroy => true
  validates :bio, :name :presence => true

  def to_param
    name
  end
end 
```

和

```
class TourDate < ActiveRecord::Base
  validates :address, :when, :where, :artist_id, :presence => true
  attr_accessible :address, :artist_id, :when, :where
  belongs_to :artist
  before_save :destroy_if_blank

  private
  def destroy_if_blank
    logger.info "destroy_if_blank called"
  end
end 
```

我有一个艺术家表格，用于`fields_for`显示艺术家相关巡演日期的字段，用于编辑和添加新的巡演日期，但如果我只是空白巡演日期（删除它），`destroy_if_blank`则永远不会被调用。据推测，Artist 控制器的`@artist.update_attributes(params[:artist])`行不认为值得更新的空白实体。

我错过了什么吗？有没有解决的办法？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-08T03:47:14.093

如果满足您的条件，我会保留 :reject_if 块，但将 :_destroy => 1 插入到属性哈希中。（这在不方便将 _destroy 添加到表单代码的情况下很有用。）

您必须进行额外检查以查看记录是否存在才能返回正确的值，但以下似乎对我来说在所有情况下都有效。

```
accepts_nested_attributes_for :tour_dates, :reject_if => :reject_tour, :allow_destroy => true

def reject_tour(attributes)
  exists = attributes['id'].present?
  empty = attributes.slice(:when, :where).values.all?(&:blank?)
  attributes.merge!({:_destroy => 1}) if exists and empty # destroy empty tour
  return (!exists and empty) # reject empty attributes
end 
```

当*所有*属性为空时，您只需将`empty`计算更改为：

```
empty = attributes.except(:id).values.all?(&:blank?) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T17:46:20.887

我今天设法做这样的事情。就像@shuriu 所说，您最好的选择是删除该`reject_if`选项并自己处理破坏。`mark_for_destruction`派上用场：

```
class Artist < ActiveRecord::Base
  accepts_nested_attributes_for :tour_dates

  before_validation :mark_tour_dates_for_destruction 

  def mark_tour_dates_for_destruction
    tour_dates.each do |tour_date|
      if tour_date.when.blank? || tour_date.where.blank?
        tour_date.mark_for_destruction
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-08T04:29:11.333

您有代码说如果“where”或“when”为空白，则应忽略记录，在accepts_nested _attributes 行上，删除`reject_if`并且您的destroy_if 空白可能会被调用。

通常要销毁，您会 `_destroy`在嵌套记录上设置一个属性，查看文档[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

另外，今天刚用 cocoon 做了一些，觉得很棒，[https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-06T23:42:47.780

类似于史蒂夫肯沃西的回答，没有局部变量。

```
 accepts_nested_attributes_for :tour_dates, :reject_if => :reject_tour, :allow_destroy => true

 def reject_tour(attributes)
    if attributes[:when].blank? || attributes[:where].blank?
      if attributes[:id].present?
        attributes.merge!({:_destroy => 1}) && false
      else
        true
      end
    end
  end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T07:38:57.200

使用您当前的代码，这是不可能的，因为`reject_if`传递给`accepts_nested_attributes_for`.

正如 Christ Mohr 所说，最简单的方法是`_destroy`在更新 parent 时为嵌套模型设置属性，嵌套模型将被销毁。有关此内容或[此 railscast](http://railscasts.com/episodes/196-nested-model-form-revised)的更多信息，请参阅文档。

或者，您可以使用 cocoon 或 awesome_nested_fields 之类的 gem。

要具体执行您想要的操作，您应该删除该`reject_if`选项，并在父对象内的回调中处理逻辑。它应该检查 tour_dates_attributes 中的空白值并销毁嵌套模型。不过要小心翼翼...

# session - 会话到期时如何重定向到登录页面？

> ID：10943016
> 
> 赞同：2
> 
> 时间：2012-06-08T04:19:10.877
> 
> 标签：session, servlets, jsf-2

我有三个 JSF 2.0 Web 模块，我需要在会话到期时重定向到登录页面。

我已经尝试使用它`HttpSessionListener`，它正在调用`sessionDestroyed()`事件方法，但我无法在其中转发/重定向请求。我认为这是因为没有`HttpServletRequest`和`HttpServletResponse`对象。

我也尝试过使用 a `PhaseListener`，但它会导致网络浏览器中出现“重定向过多”错误。

```
public class SessionListener implements PhaseListener {

    public PhaseId getPhaseId() {
        return PhaseId.RESTORE_VIEW;
    }

    public void beforePhase(PhaseEvent event) {
        if (!FacesContext.getCurrentInstance().isPostback()) {
            try {
                System.out.println("Session Destroyed");
                FacesContext.getCurrentInstance().getExternalContext().redirect("login.jsf");
            }
            catch (Exception e) {
                System.out.println("error" + e);
            }
        }
    }

    public void afterPhase(PhaseEvent event)  {
        try {
            System.out.println("Session Created");
        }
        catch (Exception e) {
            System.out.println("error" + e);
        }
    }

} 
```

为什么这些尝试不起作用，我怎样才能最好地解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T14:25:10.560

**无法**在会话到期的那一刻发送重定向。客户端此时尚未发送任何 HTTP 请求，然后您可以使用重定向进行响应。

您应该只保留现有的身份验证机制，当用户不再登录时重定向到登录页面。您最多可以通过添加一个检查来改进它，如果用户被重定向到登录页面*是因为*会话已过期，或者只是因为他以前从未登录过（即这是一个全新的请求）。

您可以通过 if [`HttpServletRequest#getRequestedSessionId()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestedSessionId%28%29)doesn't return `null`（这意味着客户端已发送会话 cookie 并因此假定会话仍然有效）并[`HttpServletRequest#isRequestedSessionIdValid()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isRequestedSessionIdValid%28%29)返回`false`（这意味着会话已在服务器端过期）来检查这一点。您可以在检查登录用户的同一过滤器中执行此操作（您已经有一个，对吗？或者您是否使用容器管理的身份验证？）。

```
User user = (User) session.getAttribute("user");

if (user == null) {
    String loginURL = request.getContextPath() + "/login.jsf";
    if (request.getRequestedSessionId() != null && !request.isRequestedSessionIdValid()) {
        response.sendRedirect(loginURL + "?expired=true");
    } else {
        response.sendRedirect(loginURL);
    }
} else {
    chain.doFilter(request, response);
} 
```

然后在`login.xhtml`页面中检查它

```
<h:panelGroup rendered="#{param.expired}">
    <p>You have been redirected to the login page, because your session was expired.</p>
</h:panelGroup> 
```

顺便说一句，您的相位监听器方法毫无意义。*它确实在每个*请求上发送重定向，导致它在无限循环中运行。恢复视图阶段与会话到期完全无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:54:47.500

尝试使用

```
 FacesContext.getCurrentInstance().getApplication().getNavigationHandler().
       handleNavigation(context, null, "LoginForm"); 
```

但请注意，您应该为这些目的使用 Servlet 过滤器，最好不要从 PhaseListener 进行任何重定向，因为它真的很容易出错。

# google-app-engine - 谷歌应用引擎项目包

> ID：10943030
> 
> 赞同：0
> 
> 时间：2012-06-08T04:21:22.923
> 
> 标签：google-app-engine, salesforce, google-apps

嗨，我是谷歌应用引擎的新手，我想知道应用引擎中是否有一个选项可以创建项目的安装程序包，可以部署在其他谷歌应用程序域中。所以基本上项目不会公开托管，但仅用于特定的谷歌应用域

我在这里看到的一个类比是 salesforce 包，开发人员可以在其中创建一个包 url，通过该包可以安装在其他组织中。该项目未公开托管。[http://appexchange.salesforce.com/](http://appexchange.salesforce.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:54:52.313

在开发 Google App Engine 应用程序时，您不必指定项目的 url。因此，您可以将应用程序安装和部署到多个组织甚至子项目。

您唯一需要设置的是[app.yaml](https://developers.google.com/appengine/docs/python/config/appconfig)（如果您使用 python）或[appengine-web.xml](https://developers.google.com/appengine/docs/java/config/appconfig)（对于 java）中的应用程序名称

因此，为了开发安装程序，我将创建一个脚本，首先询问用户他们想要部署到的应用程序的名称，相应地修改配置文件，然后调用普通的 appcfg.py 安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:20:14.920

您可以轻松打包您的源代码。唯一需要更改的变量是 app.yaml 应用程序：python 中的字段和 java 中的 appengine-web.xml。这将允许您在其他域中部署应用程序。

至于不是 App Engine 工作方式的包 url。您可以将您的应用程序设置为仅允许某些域访问它并提供一个 API 以将其集成到另一个应用程序中，但这与 Sales Force 包 url 不同。

# iphone - iOS 滚动界面 - FoodSpotting 注册界面

> ID：10943031
> 
> 赞同：0
> 
> 时间：2012-06-08T04:21:38.277
> 
> 标签：iphone, ios, xcode, uitableview

我不确定你们是否检查过 iPhone 应用程序“FoodSpotting”的登录/注册界面，但它非常酷。不知何故，他们能够将似乎是 UITableView 的东西垂直向下移动以创建一个带有流畅动画的全新视图。基本上看起来他们正在向下移动整个屏幕，但是当您尝试向上滚动回原始登录屏幕时却不能。

有人知道如何使用 UITableView、ScrollView 或常规 UIView 获得这种功能吗？如果您需要更多关于我所说的动画类型的说明，请下载应用程序，或者我可以尝试发布图片...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:24:48.963

嘿，我实际上建立了那个页面！很简单：就是两个 UITableView，一个简单的 Core Animation 动画用来在两者之间“滚动”。我想只使用一个 tableview 可以实现类似的效果，尽管使用两个单独的 tableview 允许我们利用单个 tableview 的滚动行为来做一些事情，比如当键盘出现时向上移动表单。

**编辑：**

我知道这是 SUUUPER 迟到了，但这里有一个快速的解释......

我的控制器是 UIViewController 子类，而不是 UITableViewController。在viewcontroller的视图中，我这样设置了两个tableviews...

![在此处输入图像描述](../Images/dbb499e212ab5cb151a3317438868187.png)

*   黑色 = 状态栏
*   红色 = 屏幕区域
*   蓝色 = 顶部 TableView
*   绿色 = 底部 TableView，位于屏幕外

在两者之间转换的代码非常简单......

```
//transition to bottom tableview
[UIView animateWithDuration:ANIMATION_TIME animations:^{
    bottomTableView.transform = CGAffineTransformMakeTranslation(0, -self.view.frame.size.height);
    topTableView.transform = CGAffineTransformMakeTranslation(0, -self.view.frame.size.height); 
}];

…

//and to return to original state…
[UIView animateWithDuration:ANIMATION_TIME animations:^{
    bottomTableView.transform = CGAffineTransformIdentity;
    topTableView.transform = CGAffineTransformIdentity; 
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:31:17.443

是的你是对的。它是 UIView 上的 UIScrollView。默认情况下，滚动视图是可滚动的，并且在完成注册时视图是动画的。

所以这将很容易实现。

# android - 重构 Android 原型的技巧

> ID：10943032
> 
> 赞同：0
> 
> 时间：2012-06-08T04:21:51.490
> 
> 标签：android, refactoring, prototype

我有一个从另一个开发人员那里继承的 Android 项目。

原始代码是使用单个 View 和单个 Activity 一起破解的。视图类有一个在输入和渲染期间打开的 State 变量。

每个“屏幕”都是直接渲染到屏幕上的单个位图。根本没有使用任何布局。更糟糕的是，View 和 Activity 类中的每个变量都被声明为 public static 并且会频繁地相互访问。

我已经重新编写了代码，所以它现在有点易于管理，但它仍然在原来的两个类中。这是我的第一个体面大小的 Android 应用程序，所以我不完全确定下一步该去哪里。

从外观上看，每个“屏幕”都应该有自己的 View 和 Activity。这是一般做法吗？

如果是这样，我需要某种方式在单独的活动之间共享数据。我已经阅读了使用包含通用数据的 Singleton 类的建议。还有其他更多内置于Android框架中的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:38:14.117

我建议每个屏幕使用一个活动，或者更确切地说，每个功能。一个活动通常有一个关联的视图来绘制 UI。如果活动所做的只是显示不同的位图，那么您可以在布局中定义一个 ImageView 并在该 ImageView 中显示各种位图。

在 Android 活动中使用公共静态字段是不好的做法。活动根本不应该访问其他活动中的字段，它们应该通过意图、数据库或共享的@Injected 类相互传递数据。

从您所写的内容来看，从头开始重新启动该应用程序可能比尝试修复当前应用程序更容易。我去过那里，做到了，然后后悔没有放弃该应用程序并从头开始。

# c++ - 为什么 C++ 中的字符串通常以 '\0' 结尾？

> ID：10943033
> 
> 赞同：20
> 
> 时间：2012-06-08T04:22:05.940
> 
> 标签：c++, c, string

在许多代码示例中，人们通常`'\0'`在创建新的 char 数组后使用如下：

```
string s = "JustAString";
char* array = new char[s.size() + 1];
strncpy(array, s.c_str(), s.size());
array[s.size()] = '\0'; 
```

为什么要`'\0'`在这里使用？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-08T04:23:13.190

您的问题标题引用了 C 字符串。C++`std::string`对象的处理方式与*标准 C*字符串不同。`\0`在使用 C 字符串时很重要，当我在`string`这里使用该术语时，我指的是*标准 C 字符串*。

`\0`在 C 中充当字符串终止符。它被称为*空字符*或*NUL*。它表示处理字符串的代码——标准库，还有你自己的代码——字符串的结尾在哪里。一个很好的例子是`strlen`返回字符串的长度。

当您声明一个常量字符串时：

```
const char *str = "JustAString"; 
```

然后`\0`自动为您附加。在其他情况下，您将像数组示例一样管理非常量字符串，有时您需要自己处理它。[您的示例中使用的 strncpy](http://en.cppreference.com/w/c/string/byte/strncpy)的文档是一个很好的说明：`strncpy`复制空终止字符，**除非**在复制整个字符串之前达到指定长度的情况。因此，您经常会看到`strncpy`与空终止符的*可能冗余分配相结合。*`strlcpy`并`strcpy_s`旨在解决因疏忽处理此案而引起的潜在问题。

在您的特定示例中，`array[s.size()] = '\0';`就是这样一种冗余：由于`array`是 size `s.size() + 1`，并且`strncpy`正在复制`s.size()`字符，因此该函数将附加`\0`.

标准 C 字符串实用程序的文档将指出您何时需要小心包含此类空终止符。但请仔细阅读文档：因为`strncpy`细节很容易被忽略，导致潜在的缓冲区溢出。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-08T04:23:33.093

> **为什么 C++ 中的字符串通常以`'\0'`?**

请注意，C++ 字符串和 C 字符串并不相同。
在 C++ 中，string 指的是**[std::string](http://www.cplusplus.com/reference/string/string/)**，它是一个模板类，提供了很多直观的函数来处理字符串。
请注意，C++ std::string 没有终止，但该类提供了将底层字符串数据作为终止的 c 样式字符串`\0`获取的函数。`\0`

在 C 中，字符串是字符的集合。此集合通常以`\0`.
除非使用特殊字符 like ，否则`\0`无法知道字符串何时结束。
它也被恰当地称为字符串空终止符。

当然，可能还有其他记账方式来跟踪字符串的长度，但是使用特殊字符有两个直接的优点：

*   它更直观和
*   没有额外的开销

请注意，这`\0`是必需的，因为大多数标准 C 库函数都在假设它们被`\0`终止的情况下对字符串进行操作。
例如：
在使用`printf()`时，如果您有一个未`\0`终止的字符串，则`printf()`继续写入字符`stdout`直到`\0`遇到 a ，简而言之，它甚至可能打印垃圾。

> **为什么要`'\0'`在这里使用？**

不需要`\0`终止字符串的情况有两种：

*   在任何用法中，如果您明确记账字符串的长度并且
*   如果您使用一些标准库 api 将隐式添加 a`\0`到字符串。

在您的情况下，您已经有第二种情况适合您。

```
array[s.size()] = '\0'; 
```

上面的代码语句在您的示例中是多余的。

对于您的示例 using`strncpy()`使其无用。`strncpy()`将字符复制`s.size()`到您的`array`，请注意，如果在复制字符串后还有剩余空间，它会附加一个空终止符。由于`array`大小`s.size() + 1`为 a`\0`是自动添加的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-08T04:27:50.973

'\0' 是空终止字符。如果您的字符数组没有它并且您尝试执行 strcpy 您将有缓冲区溢出。许多函数依靠它来知道何时需要停止读取或写入内存。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-08T06:28:45.270

```
strncpy(array, s.c_str(), s.size());
array[s.size()] = '\0'; 
```

> 为什么我们应该在这里使用'\0'？

你不应该，第二行是浪费空间。如果您知道如何使用它，strncpy 已经添加了一个空终止。代码可以重写为：

```
strncpy(array, s.c_str(), s.size()+1); 
```

strncpy 是一个奇怪的函数，它假设第一个参数是第三个参数大小的数组。因此，如果在复制字符串后还有剩余空间，它只会复制空终止。

在这种情况下，您也可以使用 memcpy()，它的效率会稍高一些，但可能会使代码阅读起来不那么直观。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-08T04:40:22.710

在 C 中，我们用一个 char（或 w_char）数组来表示字符串，并使用特殊字符来表示字符串的结束。与 Pascal 不同，Pascal 将字符串的长度存储在数组的索引 0 中（因此字符串对字符数有硬性限制），*理论上*对字符串的字符数没有限制（表示为字符数组）可以在 C 中具有。

在 C 中的默认库以及其他库中的所有函数中，特殊字符都应为 NUL。如果要使用依赖于字符串确切长度的库函数，则必须使用 NUL 终止字符串。您可以完全定义自己的终止字符，但您必须了解涉及字符串（作为字符数组）的库函数可能无法按您预期的那样工作，并且会导致各种错误。

在给出的代码片段中，需要将终止字符显式设置为 NUL，因为您不知道分配的数组中是否有垃圾数据。这也是一个很好的做法，因为在大型代码中，您可能看不到字符数组的初始化。

# android - 无需下载即可安装apk

> ID：10943037
> 
> 赞同：1
> 
> 时间：2012-06-08T04:22:47.500
> 
> 标签：android, streaming, client-server

我可以`apk`不下载就安装文件吗？该`apk`文件在服务器上。我尝试了下面的代码，但它不起作用：

```
public static void InstallProgram(Uri uri, Context context){
    Intent intent = new Intent(Intent.ACTION_VIEW);           
    intent.setDataAndType(uri,"application/vnd.android.package-archive");
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);     
    context.startActivity(intent);
} 
```

`uri`在哪里`http://192.168.43.1:6789/mobile_base/test.apk`。它返回一个错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://192.168.43.1:6789/mobile_base/test.apk typ=application/vnd.android.package-archive flg=0x10000000 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:30:23.007

> 您可以使用此代码。可能会解决问题

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("http://192.168.43.1:6789/mobile_base/test.apk"));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T04:32:39.787

为此，您的 android 应用程序必须已上传到 android 市场。当您将其上传到 android 市场时，然后使用以下代码使用您的 android 应用程序打开市场。

```
 Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=<packagename>"));
startActivity(intent); 
```

如果您希望它从您自己的服务器下载并安装，请使用以下代码

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("http://www.example.com/sample/test.apk"));
    startActivity(intent); 
```

# jquery - Safari中的Jquery DateTimepicker日历缺失值

> ID：10943041
> 
> 赞同：0
> 
> 时间：2012-06-08T04:23:15.680
> 
> 标签：jquery, jquery-ui, safari

我正在使用带有 timeplugin 的 jquery datepicker。这适用于我们许多用户群使用的每个浏览器栏 Safari。

```
 $( '#my_date' ).datetimepicker(
    {
        dateFormat: 'yy-mm-dd',
        minDate: new Date() - 1,
        timeFormat: 'hh:mm:ss'
    }); 
```

datepicker 上的 callander 显示为未定义，并且在 safari 中缺少月份。任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:48:39.213

**[Safari http://jsfiddle.net/jT5Gk/4/](http://jsfiddle.net/jT5Gk/4/) **或** [http://jsfiddle.net/jT5Gk/5/](http://jsfiddle.net/jT5Gk/5/)**的工作演示****

 **我注意到 Safari 中的行为并得到了你的意见。

因此，我添加了之前的问题和问题解决后的图片:) 以便在 safari 中的其他人清楚。我可以在 Safari 浏览器中看到，问题是`mindate: new date() -1`哪个不正确。

你也应该看看这里：[http](http://www.w3schools.com/jsref/jsref_obj_date.asp) ://www.w3schools.com/jsref/jsref_obj_date.asp 希望它有帮助，*只是*使用 datepicker 我做 了额外的一点[http://jsfiddle.net/2qzjg/](http://jsfiddle.net/2qzjg/)

**代码**

```
$('#example16_start').datetimepicker({
    dateFormat: 'yy-mm-dd',
    minDate: new Date(-1) ,
    timeFormat: 'hh:mm:ss'
});​ 
```

**或者**

```
 $('#example16_start').datetimepicker({
        dateFormat: 'yy-mm-dd',
        minDate: -1,
        timeFormat: 'hh:mm:ss'
    });​ 
```

**问题是（在 Safari 中）**

![在此处输入图像描述](../Images/59ed6626b33eade29af1118532c11525.png)

**解决方案后表现良好**

![在此处输入图像描述](../Images/698fec51a522fcc757e95d2d5d4c14d8.png)**

# objective-c - 具有合成只读属性的类的子类无法访问 Objective-C 中的实例变量

> ID：10943042
> 
> 赞同：26
> 
> 时间：2012-06-08T04:23:24.767
> 
> 标签：objective-c, ios, inheritance, subclass

在超类中`MyClass`：

```
@interface MyClass : NSObject

@property (nonatomic, strong, readonly) NSString *pString;

@end

@implementation MyClass

@synthesize pString = _pString;

@end 
```

在子类中`MySubclass`

```
@interface MySubclass : MyClass

@end

@implementation MySubclass

- (id)init {
    if (self = [super init]) {
        _pString = @"Some string";
    }
    return self;
} 
```

问题是编译器认为它`_pString`不是 的成员`MySubclass`，但我在`MyClass`.

我错过了什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-08T04:35:09.523

`_pString`产生的实例变量`@synthesize`是*私有*的`MyClass`。您需要对其进行*保护*才能`MySubclass`访问它。

`_pString`在 的`@protected`部分添加 ivar 声明`MyClass`，如下所示：

```
@interface MyClass : NSObject {
    @protected
    NSString *_pString;
}

@property (nonatomic, strong, readonly) NSString *pString;

@end 
```

现在像往常一样合成访问器，您的变量将可供您的子类访问。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T04:30:08.980

我对这个问题很熟悉。您在 .m 类中合成变量，因此它不会与标题一起导入，因为 _pString 变量将作为实现的一部分创建，而不是接口。解决方案是在您的头接口中声明 _pString ，然后无论如何合成它（它将使用现有变量而不是创建私有变量）。

```
@interface MyClass : NSObject
{
    NSString *_pString; //Don't worry, it will not be public
}

@property (nonatomic, strong, readonly) NSString *pString;

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T15:39:10.170

给定的答案非常好。这是一个替代答案，显然 Apple[更喜欢](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW6).

你可以为你的类定义一个[私有扩展](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW6)`MyClass+Protected.h`，一个文件，它需要包含在`MyClass.m`和中`MySubclass.m`。

然后，在这个新文件中，将属性重新定义为`readwrite`.

```
@interface MyClass ()
@property (strong, readwrite) NSString * pString;
@end 
```

这种替代方法允许您使用访问器`self.pString`而不是 ivar `_pString`。

`pString`注意：您仍然需要保持`MyClass.h`原样的定义。

# wordpress - wordpress插件上没有回复

> ID：10943044
> 
> 赞同：0
> 
> 时间：2012-06-08T04:23:33.027
> 
> 标签：wordpress

我在一个多星期前提交了一个 Wordpress 插件，但仍然没有得到回复，有什么办法可以弄清楚状态是什么？这真是令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:43:22.353

延迟回复可能表明您提交的内容不完整 - 我在 18 小时内收到了我的回复。

如果您想要快速响应，请**让审阅者尽可能轻松**地评估您的插件是否是对有用事物的合理尝试：

*   [包括一个很棒的自述文件](http://wp.smashingmagazine.com/2011/11/23/improve-wordpress-plugins-readme-txt/)，并使用自述文件测试工具来验证它
*   [避免最常见的插件编码错误，让每个人的生活都很痛苦](http://planetozh.com/blog/2009/09/top-10-most-common-coding-mistakes-in-wordpress-plugins/)
*   在自述文件和插件标题中包含一个好的、简短、简单的插件描述以及它的作用
*   包括一个下载源代码的链接，以便他们可以测试它 - 令人惊讶的是，我怀疑这经常被遗漏！
*   确保您包含指向描述插件的站点的链接、给出的说明以及提供的下载链接

如果你做了所有这些，你应该得到一个相当快速的反应。如果你只做一些，你会让审阅者更加努力，他们可能会跳过批准你的，而专注于其他更容易评估的插件，因为他们提供了上述所有内容。

坦率地说，做上述事情实际上让你的插件对公众更有用，所以值得花额外的时间——即使你的插件是一个耸人听闻的想法，如果没有很好地描述，没有人会理解它有多么有用，而且它只是赢了不习惯！

# css - 在另一个 mixin 中使用 LESS 中的一个 mixin

> ID：10943048
> 
> 赞同：1
> 
> 时间：2012-06-08T04:23:44.407
> 
> 标签：css, styles, less, mixins

我正在尝试使用一种混合来计算另一个包含我的基本字体样式的基线高度。每次我尝试编译时，都会出现错误。

这是一个例子。

```
.lineHeight(@sizeValue){
@remValue: @sizeValue;
@pxValue: (@sizeValue * 10);
line-height: ~"@{pxValue}px";
line-height: ~"@{remValue}rem";
}

.baseFont(@weight: normal, @size: 14px, @lineHeight: (.lineHeight(2.1)) {
font-family: @fontFamily;
font-size: @size;
font-weight: @weight;
line-height: @lineHeight;
} 
```

The error is: TypeError: Cannot call method 'charAt' of undefined at getLocation (/Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/parser.js:212:34) at new LessError (/Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/parser.js:221:19) at Object.toCSS (/Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/parser.js:385:31) at /Applications/CodeKit.app/Contents/Resources/engines/less/bin/lessc:107:28 at /Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/parser.js:434:40 at /Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/parser.js:94:48 at /Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/index.js:116:17 at /Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/parser.js:434:40 at /Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/parser.js:94:48 at /Applications/CodeKit.app/Contents/Resources/engines/less/lib/less/index.js:116:17

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:43:51.930

从另一个参数列表中调用一个 mixin 是没有意义的（除了`(`在调用 mixin 之前你有一个额外的方面）。

这是我对 mixin 继承的尝试，它适用于您的情况，但不是我见过的最优雅的 LESS。重量和尺寸的默认值也需要在两个地方重复：

```
.lineHeight(@sizeValue){
    @remValue: @sizeValue;
    @pxValue: (@sizeValue * 10);
    line-height: ~"@{pxValue}px";
    line-height: ~"@{remValue}rem";
}

// Shared by both versions of baseFont, never used directly
.commonBaseFont(@weight, @size) {
    font-family: @fontFamily;
    font-size: @size;
    font-weight: @weight;
}

// baseFont called without lineHeight argument
.baseFont(@weight: normal, @size: 14px){
    .commonBaseFont(@weight, @size);
    .lineHeight(2.1)
}

// baseFont called with lineHeight argument
.baseFont(@weight: normal, @size: 14px, @lineHeight) {
    .commonBaseFont(@weight, @size);
    line-height: @lineHeight;
} 
```

# javascript - Google Maps API 中的自定义 InfoWindow 大小/指针位置

> ID：10943056
> 
> 赞同：0
> 
> 时间：2012-06-08T04:26:07.090
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个可以在这里看到的地图应用程序：

[http://chrismcaleenan.com/map/?page_id=25](http://chrismcaleenan.com/map/?page_id=25)

应用程序中的每个马来西亚州都会有一个显示附加信息的信息窗口。您可以通过将鼠标悬停在右侧主数据表中的“吉打”上或地图中的州本身上来查看此示例。

如您所见，问题在于地图平移以定位信息窗口。有没有办法固定地图位置并设置 InfoWindow 大小或位置，以便在不平移的情况下完全显示？在 Kedah 示例中，可以将 InfoWindow 直接定位在右侧和/或使用较短的尾部。

一种选择是为每个州创建一个自定义图形，但我宁愿避免这种情况，因为我将遇到与 add'l 数据相同的问题（例如，单击 Kedah 进行缩放 - 缩放时所有数据点上都会有 InfoWindows ）。

如果你在玩，双击水会缩小并重置地图。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:43:34.367

是的，有时 pan 会将鼠标拉出状态，这会导致`InfoWindow`消失。我知道那不是你想要的。Google Maps 演示目录包含一个示例，我认为该示例将为您提供所需的地图。它被命名为[SmartInfoWindow](http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html)。看一看，单击一些标记，检查 SmartInfoWindow 的行为方式，看看这是否可以帮助您实现您想要的。它并不完美，但它使锅保持在绝对最低限度。

# c# - 成功扫描时禁用符号扫描仪“哔”？

> ID：10943059
> 
> 赞同：7
> 
> 时间：2012-06-08T04:26:15.110
> 
> 标签：c#, compact-framework, barcode-scanner, motorola

我正在使用motorolla MC55，它会扫描并在成功扫描时发出哔哔声，我需要禁用该功能，以便它在扫描时根本不会播放任何声音。

有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-13T15:27:35.283

扫描以下条形码以启用/禁用哔声。

![参考页](../Images/387d56ffbf64d22ed7e822e7b4b9cf24.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T06:06:09.227

试试这个：

```
Symbol.Barcode.Reader reader = new Symbol.Barcode.Reader();

// Other initialization 

reader.Parameters.Feedback.Success.BeepTime = 0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-12T17:13:33.183

您可能只想调整声音的级别：

```
Symbol.Audio.Device MyDevice = (Symbol.Audio.Device)Symbol.StandardForms.SelectDevice.Select(
    Symbol.Audio.Controller.Title,
    Symbol.Audio.Device.AvailableDevices);
Symbol.Audio.StandardAudio MyAudioDevice = new Symbol.Audio.StandardAudio(MyDevice);

// set the volume of the audio from the settings file.
MyAudioDevice.BeeperVolume = NewLevel;

// set the audio device to nothing
MyAudioDevice.Dispose();
MyAudioDevice = null;
MyDevice = null; 
```

# php - isset($_POST['submit']) 与 $_SERVER['REQUEST_METHOD']=='POST'

> ID：10943060
> 
> 赞同：19
> 
> 时间：2012-06-08T04:26:23.783
> 
> 标签：php

我遇到过使用以下脚本的脚本：

```
isset($_POST['submit']) 
```

以及使用的代码：

```
$_SERVER['REQUEST_METHOD']=='POST' 
```

我想知道这两者之间的区别以及哪种方法最好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T04:44:55.380

```
isset($_POST['submit']) 
```

如果您已经知道将*始终*发送特定值，因此表示预期的表单提交（`submit`本例中的字段）此代码将告诉您两件事：

1.  表单是通过方法提交的`POST`，而不是`GET`,`PUT`等。
2.  该`submit`字段已通过。

* * *

```
$_SERVER['REQUEST_METHOD'] == 'POST' 
```

`POST`这准确地告诉你一件事，一个表单是通过该方法提交的。使用它的原因包括：

*   您想区分无效的表单提交（例如，并非所有字段都已传输）和其他类型的页面检索（`GET`,`PUT`等）
*   你不知道你会收到什么。也许这段代码是在一个不知道其依赖部分的所有细节的控制器中运行的。

前者是

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (!isset($_POST['name'])) {
        // at this point you know that `name` was not passed as part of the request
        // this could be treated as an error
    }
} 
```

相对：

```
if (!isset($_POST['name'])) {
    // the `name` field was not passed as part of the request
    // but it might also be a GET request, in which case a page should be shown
} 
```

**重要的**

检查请求中的提交按钮字段是不可靠的，因为可以通过其他方式提交表单（例如在文本框中按 Enter）。

* * *

```
$_POST 
```

只需使用此表达式，您就可以断言：

1.  表格是通过提交的`POST`
2.  至少已提交一个字段

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T04:28:54.463

他们做不同的事情。

第一个检查是否设置了数组`submit`中的键 ( ) 。`$_POST`

第二个检查`$_SERVER`数组中某个键的值是否为`'POST'`。我想有人会使用它来判断数据是否已使用“get”或“post”方法发送，但通常您不仅关心使用了哪种方法，而是发送了哪些数据。

你想做什么？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T04:30:52.470

这意味着两个不同的东西。首先，检查表单提交时`submit`是否传递了参数。许多人使用此代码段来验证是否已发送表单。这是有效的，因为提交按钮在技术上是一个`<input>`，因此它的值与表单中的任何其他元素一起发送。

```
<?php
    if(isset($_POST['submit'])) { // This way form and form logic can be adjacent to each other
        // Logic
    }
?>
<form method='POST' action='<?= $_SERVER['REQUEST_URI'] ?>'>
   <!--- other form stuff -->
   <input type="submit" name="submit" value="Send!" />
</form> 
```

第二个片段测试表单是否使用 POST 方法提交。这并不一定意味着表单按钮被按下。如果它没有通过 POST 提交，那么超全局`$_POST`将为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T04:32:17.490

第一条语句检查请求方法是否是`Post`以及请求是否包含 element 的值`submit`。第二种方法只检查请求方法是否为`Post`.

要检查表单是否已发布，第二个更好，因为它稍微清晰一些，只做一件事。但是我不会太担心使用哪一个。

# iphone - 重置标签栏控制器的视图控制器

> ID：10943077
> 
> 赞同：2
> 
> 时间：2012-06-08T04:30:29.023
> 
> 标签：iphone, uitabbarcontroller

在我的应用程序中，我使用 XIB 为 Tab Bar 创建了视图控制器。我的意思是我使用 XIB 在标签栏中添加了视图控制器。看图，

![在此处输入图像描述](../Images/b6bd8b421576e23eb6399592c2c9631f.png)

所以我的申请是这样的。我有一个将显示登录页面的注销功能。在登录页面中，我将标签栏显示为

```
 [self.view addSubview tabBarController.view]; 
```

当我注销时，我只需删除此标签栏并将登录屏幕显示为

```
 [self.tabBarController.view removeFromSuperView]; 
```

然后它将显示登录屏幕。当我再次登录时，标签栏中的视图控制器不会重置。我的意思是，如果我在表格视图中显示了一些数据，例如名称，那么当我再次登录时它会保持原样（有时我以不同的用户身份登录并获得前一个用户的详细信息。）。我试过了

```
 self.tabBarController.viewControllers = nil; 
```

重置所有视图控制器，但它不再起作用。我认为每次登录时所有视图控制器都应该调用`ViewDidLoad:`，目前它正在调用`viewWillAppear:`。所以请让我知道我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:10:14.293

我认为，由于您在退出并再次登录后没有使用新对象，因此它向您展示了最后一个阶段。登录后尝试初始化控制器对象可能对您有用。

如果您进一步发现任何问题，请告诉我。

干杯塔伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:01:49.307

这一切都是因为您使用了 Interface Builder 而造成的麻烦。好吧，试着解释一下。在像 MyViewController.m ypu 这样的类中，需要设置如下属性：

```
@interface MyViewController : UIViewController
{
    IBOutlet UITabBarController *mytabbar;
} 
```

在 IB (Interface Builder) 中，您需要`mytabbar`为您的 UITabBarController 设置属性名称。之后，您可以重新创建此变量，因为您有指向此变量的指针。

# android - 滚动时Phonegap应用程序标题移动

> ID：10943081
> 
> 赞同：0
> 
> 时间：2012-06-08T04:30:59.837
> 
> 标签：android, ios, jquery-mobile, cordova

我正在开发一个Phonegap 应用程序。我已经为每一页使用了标题。但是当我在手机中测试它时，当我向下滚动时，有时标题也会移动并加入正文元素。（标题和正文元素应该有一些空间）。这是我的绳子......

```
<div data-role="page" id="detail-page" data-theme="a">
<div data-role="header" data-position="fixed">
<h1>xxxxxxxxxxxxx</h1>
</div>
<div data-role="content">
<form>
    <ul data-role="listview" data-inset="true" data-theme="a">
        <li ><div data-role="fieldcontain">
            <label for="textarea">name </label>
            <input type="text" name="name" id="name" value=""/></div>
        </li>
        <li ><div data-role="fieldcontain">
            <label for="address">xxxxxxxxx</label>
            <input type="hidden" name="xxxxx"/></div>
            <label for="xxxxxxx">xxxxxxxx:</label>
            <input type="text" name="xxxxx" id="xxxxxx" value="" />
            <label for="district">xxxxxxxxxx</label>
            <input type="text" name="xxxxxxx" id="xxxxxxxxxx" value=""/>
        </li>
        <li>
        <div data-role="fieldcontain">
        <label for="date">Date</label>
        <input type="datetime-local" name="date" id="name" value=""/></div></li>
        <li>
        <div data-role="fieldcontain">
        <label for="textarea">xxxxxxxxxxxx</label>
        <input type="text" name="xxxxxxxxxxx" id="xxxxxxxxxxxx" value=""/></div></li>

        </ul>

     <div data-role="fieldcontain">
     <button type="submit" name="save" id="save" value="Save" data-theme="a"/></div>

    </form>
    </div></div> 
```

请帮我解决这个问题..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:42:10.210

添加页脚..

```
<div data-role="footer" data-position="fixed">
          <h1>Fixed Footer!</h1>
      </div> 
```

# jms - 从队列中读取消息后不消耗消息

> ID：10943082
> 
> 赞同：1
> 
> 时间：2012-06-08T04:31:02.643
> 
> 标签：jms, message

使用 JMS，从队列代码中读取消息，如下所示：

```
QueueReceiver qReceiver = qSession.createReceiver(queue, getIdCorrelation(msgID));
qReceiver.receive(timeOut); 
```

从队列中读取消息后，消息不会被消耗。

# c# - 如何使用按位运算符从另一个数字中删除一个数字？

> ID：10943087
> 
> 赞同：1
> 
> 时间：2012-06-08T04:31:48.030
> 
> 标签：c#, c, bit-manipulation

例如，如何使用按位运算符`2`从`123`和返回中删除`13`？我不知道该怎么做..有可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:36:42.063

您的建议是可能的，但实际上没有意义。以下是以位表示的值（仅显示相关位，左侧的所有内容均为零）：

2: 000010 || 123: 1111011 || 13: 001101

没有逻辑方法可以通过按位运算将 123 更改为 13。最好将其转换为字符串或字符数组，删除两者然后将其转换回 int。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:01:24.937

还有哪些案例？如果存在某种模式，则可以将其概括为整数级别，否则您实际上只是在查看字符串替换。

`2`in`123`实际上是`2E1 (10100)`，并且in`2`都`1234`不会`2E2 (11001000)`与 相关`2 (10)`，至少在按位形式上是这样。此外，需要将已删除号码右侧的“数字”添加到已删除号码左侧的数字 / 10。

即，从 123 到 13：

```
Located "2".
Number on left (x): 100
Number on right (y): 3
y + (x / 10) = 13 
```

从 1324 到 134

```
Located "2"
Number on left (x): 1300
Number on right (y): 4
y + (x / 10) = 134 
```

除非有某种模式（即您知道数字的位置），否则您只需要`.ToString()`输入数字，然后执行 a `.Replace("2", "")`，然后再对结果执行 an `int.Parse()`。

**编辑：**有人赞成这个答案，我意识到我以前的实现是不必要的复杂。“迭代”以 10 为基数的数字相对简单，不需要递归。

下面的新解决方案，性能更好，但这是一个巨大的微优化：

```
static int OmitDigit(int number, int digit) {
    var output = 0;
    var multiplier = 1;

    while (number > 0) {
        var n = number % 10;
        number /= 10;

        if (n != digit) {
            output += (n * multiplier);
            multiplier *= 10;
        }
    }

    return output;
} 
```

结果： `1554443`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:20:38.273

由于我们正在使用以 10 为底的数字，因此以 2 为底的操作至少可以说是丑陋的。使用一些数学，从 k 中删除第 n 个数字，然后移动是

```
(k/pow(10,n))*pow(10, n-1) + k%pow(10, n-1) 
```

在 base 2 中，`<<`and`>>`运算符的作用类似于乘以 a `pow(2, n)`，并且`&`使用掩码完成 的工作`%`，但在 base 10 中，位不对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T06:20:25.837

这很尴尬，但如果你真的必须只进行按位运算，我建议你[将数字转换为 BCD](http://people.ee.duke.edu/~dwyer/courses/ece52/Binary_to_BCD_Converter.pdf)。进入 BCD 后，您基本上拥有一个 0 到 9 之间的十六进制数字，因此删除一个数字非常简单。完成后，转换回二进制。

我不相信有人愿意这样做。

# python - numpy.max 还是 max ？哪个更快？

> ID：10943088
> 
> 赞同：41
> 
> 时间：2012-06-08T04:31:55.497
> 
> 标签：python, numpy, runtime, max, min

在python中，哪个更快？

```
numpy.max(), numpy.min() 
```

或者

```
max(), min() 
```

我的列表/数组长度从 2 到 600 不等。我应该使用哪一个来节省一些运行时间？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-08T05:22:00.043

好吧，从我的时间来看，如果你已经有`a`你应该使用的numpy 数组`a.max`（消息来源告诉它与可用的相同）。但是，如果您有内置列表，那么大部分时间都需要*将*其转换为 np.ndarray => 这就是为什么您的时间安排更好。`np.max``a.max`*`max`*

 *从本质上讲：如果`np.ndarray`然后`a.max`，如果`list`并且不需要所有`np.ndarray`标准的机器`max`。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-04-05T11:08:11.713

我对此也很感兴趣，并用[perfplot](https://github.com/nschloe/perfplot)（我的一个小项目）测试了这三个变体。结果：你不会出错`a.max()`。

[![在此处输入图像描述](../Images/1dca03754eabdfb6f4c7791f704237a0.png)](https://i.stack.imgur.com/ZSOfq.png)

重现情节的代码：

```
import numpy as np
import perfplot

b = perfplot.bench(
    setup=np.random.rand,
    kernels=[max, np.max, lambda a: a.max()],
    labels=["max(a)", "np.max(a)", "a.max()"],
    n_range=[2 ** k for k in range(25)],
    xlabel="len(a)",
)
b.show() 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-08T04:37:12.203

最好使用 Python [timeit 模块](http://docs.python.org/library/timeit.html)之类的东西来自己测试它。这样您就可以在您自己的环境中测试您自己的数据，而不是依赖具有各种测试数据和环境的第三方，这些数据和环境不一定能代表您的环境。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T04:39:15.960

`numpy.min`并且`numpy.max`与内置函数的语义（和调用签名）略有不同，因此选择不应该与速度有关。如果您需要能够理智地处理多维数据，请使用 numpy 版本。如果您只是使用 Python 列表或其他不了解维度的东西，请使用内置函数。*

# android - 选项卡小部件上的 onActivityResult

> ID：10943091
> 
> 赞同：1
> 
> 时间：2012-06-08T04:32:29.473
> 
> 标签：android, tabwidget

我是android开发的新手。我没有得到调用`onActivityResult`方法。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    System.out.println("================================");
    if(resultCode==RESULT_OK) {
       Toast.makeText(TaskListActivity.this, "Pass", Toast.LENGTH_LONG).show();
    } else{
       Toast.makeText(TaskListActivity.this, "Fail", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:42:23.453

在父活动上写下您的代码。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    System.out.println("================================");
    if(resultCode==RESULT_OK) {
       Toast.makeText(TaskListActivity.this, "Pass", Toast.LENGTH_LONG).show();
    } else{
       Toast.makeText(TaskListActivity.this, "Fail", Toast.LENGTH_LONG).show();
    }
} 
```

当您使用 tabwidget 时，您必须在父活动上编写 onActivityResult。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:42:58.063

1.  您应该使用`Log`类而不是`System.out.println()`打印到 logcat。

2.  您忘记`super.onActivityResult()`在方法结束时调用。

3.  确保您使用`startActivityForResult`. 确保传递给它的第二个参数是非负整数，否则`onActivityResult()`在子活动完成时不会被调用。

# asp.net - RSS pubDate 未显示

> ID：10943093
> 
> 赞同：0
> 
> 时间：2012-06-08T04:32:46.263
> 
> 标签：asp.net, .net, rss

我在下面有一个 xml 文件

```
<?xml version="1.0" encoding="utf-8"?><rss version="2.0">
 <channel>
  <title>About RSS</title>
  <link>http://localhost:27549/TTTT.aspx</link>
  <description>The latest news</description>
  <image><url>http://localhost:27549/images/ttt_logo.jpg</url></image>
  <item>
    <title>ABC</title>
    <link>http://localhost:27549/Viewttt.aspx?id=217</link>
    <description>zzzzzzzzzzzzzzzzzzz...</description>
    <pubDate>Tuesday, August 30, 2011, 00:00:00AM</pubDate>
  </item>
 </channel>
</rss> 
```

虽然您可以看到 pubdate 标签，但它不会显示在 pubDate 位置。这是我获取 pubdate 的代码，但它不起作用，

```
DateTime dt = DateTime.ParseExact(pubDate, "MM/dd/yyyy", CultureInfo.InvariantCulture);
pubDate = dt.ToString("dddd, MMMM dd, yyyy, HH:mm:sstt");

writer.WriteElementString("pubDate", pubDate); 
```

例如，我尝试获取今天的日期，如下所示，

```
writer.WriteElementString("pubDate", DateTime.Now.ToString("r")); 
```

并且日期正在显示。第一组代码可能有什么问题？

```
String pubDate = "";

            using (System.Data.Common.DbCommand dbCommand = DataAccess.Instance().Database.GetStoredProcCommand("usp_GetLatestNews"))
            {

                using (IDataReader reader = DataAccess.Instance().Database.ExecuteReader(dbCommand))
                {
                    int i = 0;
                    while (reader.Read())
                    {
                        if (i == 0)
                        {
                            newsHeader = "New News Summary Available for " + reader["Title"].ToString() + " - " + reader["PubDate"];
                            newsLink = "ViewTTT.aspx?id=" + reader["Id"].ToString();
                            newsDesc = reader["FullDescription"].ToString();
                            pubDate = reader["pubDate"].ToString();
                            DateTime dt = DateTime.ParseExact(pubDate, "MM/dd/yyyy", CultureInfo.InvariantCulture);

                            pubDate = dt.ToString("r");
                        }
                        i++;
                    }

                };

            }

AddRSSItem(writer, newsHeader, newsUrl, newsDesc, pubDate);
.............
.............

public XmlTextWriter AddRSSItem(XmlTextWriter writer,
                 string sItemTitle, string sItemLink,
                 string sItemDescription, String pubDate)
        {
            writer.WriteStartElement("item");
            writer.WriteElementString("title", sItemTitle);
            writer.WriteElementString("link", sItemLink);
            writer.WriteElementString("description", sItemDescription);
            writer.WriteElementString("pubDate", pubDate);
            writer.WriteEndElement();

            return writer;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:06:13.090

我的建议是你使用你所说的格式：

```
DateTime dt = DateTime.ParseExact(pubDate, "MM/dd/yyyy", CultureInfo.InvariantCulture);
pubDate = dt.ToString("r");
writer.WriteElementString("pubDate", pubDate); 
```

请注意，我使用的是`"r"`指定符*Tue, 30 Aug 2011 00:00:00 GMT*而不是`"dddd, MMMM dd, yyyy, HH:mm:sstt"` *2011 年 8 月 30 日星期二 00:00:00 AM*，它们是不同的格式。

# azure - azure 站点是否过渡部署？

> ID：10943094
> 
> 赞同：3
> 
> 时间：2012-06-08T04:32:52.067
> 
> 标签：azure, azure-deployment, azure-web-app-service

在将 azure 网站部署到可以说 10 个实例的场时，新版本的部署是如何传播的？

是否有一段时间，不同的用户可能会根据负载均衡器向他们发送的位置访问不同版本的网站？还是 azure 会启动一个全新的集合并在它们都准备好时进行 ip 交换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:32:11.093

您认为 azure 网站更像是“Windows Azure Web 角色”，这是不正确的。使用 Windows Azure 网站，您的网站（共享）在没有数百个其他网站的情况下共享资源，因此没有这样的 ip 交换和更新域等。

网站存储在内容共享上，可以从场中的所有“Web 服务器”访问，因此不需要复制或类似的东西。因此，对于共享和保留网站，所有实例的更新都将是即时的。对于较大的包更新，文件系统更改通知可能需要一些时间，但是一旦文件系统更新通知可用，所有实例将立即获取更新的代码。

对于 Windows Azure 网站，内容位于“内容共享”，所有实例都从那里获取数据，因此不会有多个实例具有不同版本数据的机会。

# batch-file - 如何对放入批处理文件的参数进行排序？

> ID：10943099
> 
> 赞同：0
> 
> 时间：2012-06-08T04:34:02.223
> 
> 标签：batch-file, command-prompt

我正在编写一个批处理文件，该文件查找并执行`update.bat`放置在其上的所有目录中的所有文件。

这里的问题是我希望参数（即目录的路径）按名称排序，但事实证明它们是按修改日期排序的。

这是 Windows（Windows 7）的默认行为吗？有什么建议可以解决这个问题吗？

* * *

这是我的批处理脚本：

```
@echo off
Setlocal EnableDelayedExpansion

if [%1]==[] goto :no_update_dropped

set LOG_FILE=update_log.txt

echo You are about to run these updates:
for %%G IN (%*) do (
  if exist %%~sG\NUL echo %%G
)

pause

for %%G IN (%*) do (
  if exist %%G\NUL (
        if exist %%G\update.bat (
            call %%G\update.bat %LOG_FILE%
        ) else (
            echo No update.bat found in %%G.
            goto :no_batch_found
        )
    )
)
goto :success

:no_update_dropped
echo NO UPDATE FOLDER FOUND
echo Drag and drop one or more update folder to run.
goto :exit

:no_batch_found
echo UPDATE NOT COMPLETED!
goto exit

:success
echo all updated has been run successfully
goto :exit

:exit
pause 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T06:07:05.680

您可以像这样在 for 循环中对参数列表进行排序：

```
setlocal enabledelayedexpansion
for /f "delims=" %%a in ('(for %%i in (%*^) do @echo %%~i^)^|sort') do (
    set dirname=%%a
    set dirname=!dirname:~0,-1!
    echo use "!dirname!" without the trailing space
) 
```

PS它似乎`sort`在字符串的末尾附加了一个空格，（WTF ????）所以你必须摆脱它。我更改了代码。

**最后在**[dbenham的解释](https://stackoverflow.com/a/10950927/1301359)的帮助下，这变成了：

```
for /f "delims=" %%a in ('cmd /c "for %%i in (%*) do @echo %%~i"^|sort') do (
    echo use "%%a"
) 
```

PPS 这应该在名称中使用逗号更安全（当然，它们必须被引用）

```
for /f "delims=" %%a in ('cmd /c ^"for %%i in ^(%*^) do @echo %%~i^"^|sort') do (
        echo use "%%a"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:56:39.600

我会改变输入集。

您可以通过使用`/on`和获取目录按名称排序

```
/ad 
```

所以所有目录的名称=

```
dir /ad /on 
```

# java - Hibernate 和 mysql 超时问题

> ID：10943100
> 
> 赞同：1
> 
> 时间：2012-06-08T04:34:02.230
> 
> 标签：java, mysql, hibernate, connection-pooling, c3p0

我遇到了 Hibernate 和 Mysql 超时错误的问题。我也在使用 c3p0（连接提供程序）的属性。在我的 Hibernate/MySQL 在 8 小时后运行（这是 Mysql 中的默认超时值）后，我有例外。但这无济于事。

自动重新连接的属性也不起作用。

这是我的休眠配置：

```
<property name="connection_provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
    **<property name="connection.autoReconnect"> true</property>
    <property name="connection.autoReconnectForPools">true</property>**
    <property name="connection.is-connection-validation-required">true</property>
    <property name="c3p0.validate">true</property>
    <property name="current_session_context_class">thread</property>
    <property name="cache.use_query_cache">false</property>
    <property name="cache.use_second_level_cache">false</property>
    <property name="c3p0.idle_test_period">20</property>
    <property name="c3p0.timeout">40</property>
    <property name="c3p0.max_size">100</property>
    <property name="c3p0.min_size">1</property>
    <property name="c3p0.acquireRetryAttempts">10</property>
    <property name="c3p0.maxPoolSize">100</property>
    <property name="c3p0.maxIdleTime">300</property>
    <property name="c3p0.maxStatements">50</property>
    <property name="c3p0.minPoolSize">10</property>
    <property name="c3p0.preferredTestQuery">select 1;</property>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost:3306/doqeap</property>
    <property name="connection.user">root</property>
    <property name="connection.password">*******</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.jdbc.batch_size">0</property>
    <mapping></mapping> 
```

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:26:45.590

如果连接超时是问题，那么连接测试应该通过结帐测试（可靠但会带来客户端可见的性能成本）或检查+空闲测试的测试来消除，枯萎。

查看您的配置参数，看起来您的意思是在结帐和空闲测试上设置测试。我希望 c3p0 会在您的应用程序看到它们之前消除超时异常。如果这还没有发生，看到两件事会很有趣：1）c3p0 的配置，当池初始化时记录在 INFO 中——是 c3p0，通过休眠层，看到你想要的配置？2）您的应用程序遇到陈旧连接时收到的异常。

祝你好运！

# css - IE7 z-index 和堆叠

> ID：10943102
> 
> 赞同：0
> 
> 时间：2012-06-08T04:34:05.413
> 
> 标签：css, internet-explorer-7

我花了将近两天的时间试图解决 IE7 中的 z-index/stacking 问题，我承认失败，我希望你们中的一个天才可以帮助我！

如果您在 IE7 中访问[http://learningseat.wpdemo.com.au/discover/#links](http://learningseat.wpdemo.com.au/discover/#links)并单击我们代表什么或我们要去哪里，您将看到我们与谁合作和我们是谁链接显示在我的灯箱顶部。

我试图通过移动东西来解决这个问题，将 position: relative 和 z-indexes 添加到不同的元素，但我根本没有成功。

我什至尝试使用一些 jQuery 技巧来解决 IE 的 z-index 问题，但我没有运气。

我在这个项目上与另一位开发人员合作过，代码不太漂亮，但如果有人能帮助我解决这个问题，我将永远感激不尽！

感谢您的想法和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:07:56.593

在[这个 StackOverflow 答案](https://stackoverflow.com/a/3998006/249624)中，Tgr 很好地解释了 z-index 应该如何工作以及 IE 7 及更早版本是如何出错的。

在我有限的修补中对我有用的是该答案最后一段中提出的解决方案。首先，我删除了样式表中特定于 IE7 的 z-index 值，然后`.buttoninfo`在单击的那个中添加了一个非常高的 z-index 值 (9999)。在您的代码中，您可以在单击按钮时添加一个类，然后在隐藏弹出窗口时将其删除。

# ruby-on-rails - Rails 上的 FTP 身份验证

> ID：10943106
> 
> 赞同：1
> 
> 时间：2012-06-08T04:35:02.440
> 
> 标签：ruby-on-rails, ftp, connection

我正在尝试使用 rails 登录 ftp 帐户，但身份验证失败，我不知道为什么。我的 html 页面调用了一个方法：

```
test(site.host,site.ftp_user,site.ftp_pw) 
```

我的助手定义了这个方法：

```
def test(host_ip,user,pass)
ftp = Net::FTP.new(host_ip)
ftp.login('user','pass')
ftp.system
ftp.close
end 
```

该信息正在与 FileZilla 一起使用，因此问题出在其他地方。任何想法 ？

我对引号之间的内容感到困惑。我的意思是 site.ftp_user 和 site.ftp_pw 是字符串，所以我不知道为什么我必须使用引号。但如果我不使用它们，我会收到 gettaddrinfo 错误...

这是我在删除引号时得到的 SocketError ：

```
 getaddrinfo: Name or service not known 
```

有点迷失在这里：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:52:01.240

`user`是的，你想删除`password`你的助手的引用。

那么，getaddrinfo 错误在哪一行？也许你可以在这里分享。

是否`ftp.system`在线...如果是这样，系统可能不是您想要的方法调用。

如果您想打开文件或其他内容，请查看此处的示例[http://stdlib.rubyonrails.org/libdoc/net/ftp/rdoc/classes/Net/FTP.html](http://stdlib.rubyonrails.org/libdoc/net/ftp/rdoc/classes/Net/FTP.html)

# node.js - 什么是 express 框架的最佳 IDE - nodejs

> ID：10943109
> 
> 赞同：6
> 
> 时间：2012-06-08T04:35:28.770
> 
> 标签：node.js, express

express 框架的最佳 IDE 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:23:53.520

您可能有兴趣查看：

*   [网络风暴](http://www.jetbrains.com/webstorm/)
*   [科莫多 IDE](http://www.activestate.com/komodo-ide)
*   [耐德](http://coreh.github.com/nide/)
*   [Cloud9 IDE](http://c9.io/)（基于 Web）

# objective-c - 根据目标 c 中的特定属性从核心数据中获取结果

> ID：10943110
> 
> 赞同：0
> 
> 时间：2012-06-08T04:35:36.817
> 
> 标签：objective-c, ios, xcode, core-data

在我的项目中，我实现了核心数据以将批量数据保存在多个实体下。实体之一是“优惠券”，它有近 10 个属性。一是用户名。当应用程序打开时，我需要根据登录的特定用户获取所有条目。当用户输入每个条目时，用户名已经保存到核心数据中。如何为此设置谓词？我是核心数据概念的新手。这就是我在实体优惠券下获取所有结果的方式。

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"Category BEGINSWITH[c] @"All" and Used == NO"];
[request setPredicate: pred];

NSArray *objects = [context  executeFetchRequest:request error:&error];
NSLog(@"%@arry",objects);

if ([objects count]>0) {
    [self.couponList addObjectsFromArray:objects];
}

[request release]; 
```

任何帮助或建议将不胜感激。在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:03:50.537

您的谓词语法错误。您需要将参数替换为格式字符串。

此外，您的谓词似乎与用户名无关。为什么？

```
[NSPredicate predicateWithFormat:@"username = %@", userName]; 
// or, including your existing predicate:
[NSPredicate predicateWithFormat:@"username = %@ && 
                                   category BEGINSWITH[c] %@ && 
                                   used == %@",
   userName, @"All", [NSNumber numberWithBool:NO]]; 
```

请注意，我使用了`category`和`used`较低的首字母。我假设这些是您的实体在获取时的属性，因此按照惯例，第一个字母应该很小。

`used == NO`此外，如果您愿意，您实际上也可以使用您的版本。

# azure - 天蓝色网站的应用程序池超时

> ID：10943111
> 
> 赞同：22
> 
> 时间：2012-06-08T04:35:47.683
> 
> 标签：azure, application-pool, azure-web-app-service

有没有办法设置在 azure 站点下运行的网站的应用程序池的超时。

我有一个网站在那里运行，它似乎需要在空闲一段时间后再次启动。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-03-16T21:24:47.087

由于相关答案在评论中，因此很容易错过。当前，Azure Web 应用程序支持将`Always On`应用程序保存在内存中的功能。它在`Basic`上层和更高层中可用，您可以从**门户**配置它：

`Resource_Group > Web App > Settings > Application settings`

[![永远在线](../Images/fb2b42d3a90847879f67015c4e142468.png)](https://i.stack.imgur.com/xfIGv.png)

如果您想在一个`Free`或多个`Shared`层中实现相同的效果，您可以创建一个`webjob`ping 您的网站以将其保存在内存中。有许多博客文章如何实现这一点[1](http://wp.sjkp.dk/azure-website-slow-on-first-request-part-ii/)、[2](http://ideasof.andersaberg.com/development/keep-your-free-azure-website-from-idle-app-pool-timeout/)等。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-10T06:23:40.653

Windows Azure 网站支持两种模式，共享和保留。

在共享模式下，您的网站进程 (w3wp) 与其他进程一起运行，共享包括 CPU 和内存在内的资源。运行时（即 Windows Azure 网站系统）会在闲置一段时间后从内存中删除站点——即当您的站点没有获得任何流量时。运行时根据许多参数做出删除站点的决定，即使您更改配置，它也可能不适用，因为运行时可能会覆盖该配置。

如果您正在寻找您的站点始终在内存中，您可能需要考虑切换到预留实例，其中您的站点在自己的虚拟机上运行，​​并且系统在以下方面更加灵活资源利用率。

Yochay（PM Azure 网站）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T05:00:54.543

如果您指的是新的 Windows Azure 网站，我认为您没有任何控制应用程序池超时的选项。这是一项共享的托管服务，您只需上传您的站点，并为您处理 IIS 等的详细信息。您可以查看已发布的[管理页面](https://www.windowsazure.com/en-us/manage/services/web-sites/how-to-manage-websites/)，您会发现这不是一个选项。

# c# - 表单实例成员和静态成员

> ID：10943113
> 
> 赞同：-2
> 
> 时间：2012-06-08T04:36:02.337
> 
> 标签：c#

我有一个 formdlg 可以从两个 2 个表单访问 对于按钮单击 Form1，它需要是实例-可以有多个 formdlg

但是从另一个地方，我只需要一个 formdlg 实例

任何想法谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:47:44.140

以下是可以为您提供答案的类的示例代码。

```
class formdlg
{
    static formdlg instance;
    public static formdlg GetInstance()
    {
        if (instance == null)
            instance = new formdlg();

        return instance;
    }
} 
```

由于构造函数是公共的，因此您可以随时在 Form1 中调用 new 来获取多个实例。

在 form2 中，每次都使用静态函数 GetInstance 来检索单个实例。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:41:08.970

简单地，

使用[单例](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

```
using System;

public class myForm : Form
{
   private static myForm Current;

   private myForm() {}

   public static myForm Instance
   {
      get 
      {
         if (Current == null)
         {
            Current = new myForm();
         }
         return Current;
      }
   }
} 
```

# php - 如何让 Amazon s3 PHP SDK 工作？

> ID：10943115
> 
> 赞同：2
> 
> 时间：2012-06-08T04:36:09.503
> 
> 标签：php, amazon-s3, amazon-web-services

我正在尝试第一次设置 s3 并尝试运行 PHP sdk 附带的示例文件，该文件创建一个存储桶并尝试将一些演示文件上传到它。但这是我得到的错误：

```
The difference between the request time and the current time is too large. 
```

我读到关于 SO 的另一个问题，这是因为亚马逊通过比较服务器和客户端之间的时间来确定有效请求，即 2 必须在 15 分钟的范围内。

现在问题来了。我的笔记本电脑的时间是`12:30AM June 8, 2012`此刻。在我的服务器上，我创建了一个名为 servertime.php 的文件并将此代码放在该文件中：

```
<?php
   print strftime('%c');
?> 
```

输出是：

```
Fri Jun 8 00:31:22 2012 
```

看起来日子是正确的，但我不知道该怎么做`00:31:22`。无论如何，如何始终确保客户端和服务器之间的时间在彼此 15 分钟的窗口内。如果我在中国有一个用户希望在我的网站上上传一个文件，该文件使用 s3 作为 cdn。那么时差将超过一天。如何确保所有用户的时间都在我的服务器时间的 15 分钟内？如果用户在美国，但他们机器上的时间配置错误怎么办。

基本上如何让 s3 存储桶创建和上传工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:43:52.097

将您的 EC2 实例和 S3 存储桶放在同一区域内，并确保您的服务器具有正确的时间：

**Debian/Ubuntu**

```
// install ntp
apt-get install ntp ntpdate 
```

**CentOS/Fedora**

```
// install ntp
yum install ntp

// turn on service
chkconfig ntpd on

// synchronize system clock with 0.pool.ntp.org server
ntpdate pool.ntp.org

// start ntp
/etc/init.d/ntpd start 
```

那应该可以解决您的问题。

# ios - clang：错误：链接器命令失败，退出代码为 1，仅在设备上测试时

> ID：10943121
> 
> 赞同：0
> 
> 时间：2012-06-08T04:36:49.843
> 
> 标签：ios, linker

当我遇到这个问题时，我正要在设备上测试我的应用程序，我收到了这个链接器错误。我已经检查了我所有的编译源和构建阶段，但是没有迹象表明我两次导入了东西。

> ld：在 /Users/wouter/Sites/test/FastPdfKit.embeddedframework/FastPdfKit.framework/FastPdfKit(FastPdfKit) 和 /Users/wouter/Sites/test/FastPdfKit.embeddedframework/FastPdfKit.framework/FastPdfKit(FastPdfKit) 中重复符号 _calculateNextSearchPage架构 armv7 clang：错误：链接器命令失败，退出代码 1（使用 -v 查看调用）

这只发生在在设备上测试时，而不是在模拟器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T02:24:04.377

好吧，伙计们，我遇到了同样的问题。好像我修好了 我正在使用 cocapods，因此无法正确执行所描述的标准程序。

**使用 Cocoapods 正确添加 FastPDFKit 的步骤。**

*   下载 FastPDFKit
*   在您的项目中将文件添加到“您的项目”
*   转到您刚刚下载的 FastPDFKit 文件夹
*   找到 1 个文件夹和 1 个项目文件。按住 Command 键并将这些添加到您的项目中
*   `FastPdfKit.xcodeproj`
*   `FastPdfKit.embeddedframework`

![在此处输入图像描述](../Images/3187678a395a5a5a0a7e1710ad483e0b.png)

*（注意：`FastPdfKit.embeddedframework`是实际的框架，您可能希望在将其添加到项目之前独立打开 FastPdfKit.xcodeproj，从磁盘中删除 FastPdfKit.embeddedframework 文件夹并在项目中构建 FastPdfKit 目标。您应该会看到新创建的`FastPdfKit.embeddedframework`文件夹）*

*   转到您的项目设置>您的目标>构建阶段>将二进制文件与库链接
*   确保 FastPdfKit.framework 在那里。
*   如果没有，请将其从项目中拖出并放在那里。
*   清理项目，删除派生数据
*   添加`#import <FastPdfKit/FastPdfKit.h>`你需要的地方，你很高兴。
*   这是我与库的链接二进制文件的样子

    ![在此处输入图像描述](../Images/f5b8b2ea13abc1252835eb2467a0c928.png)

如果您有任何问题，请告诉我我可能遗漏了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:15:41.100

尝试删除目标->构建阶段->编译文件中的重复文件/图像，复制捆绑资源

# java - 我可以从 UNIX shell 检查 JNI 版本吗？

> ID：10943122
> 
> 赞同：2
> 
> 时间：2012-06-08T04:36:50.647
> 
> 标签：java, java-native-interface, version

如何检查我/用户当前使用的 JNI 版本？有没有我直接在 shell 提示符下执行的命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:06:30.107

我不知道外壳的方法。您可以打开 jni.h 文件并查看版本，或者如果您想通过程序来完成，例如

```
#ifdef JNI_VERSION_1_4  
printf("Version is 1.4 \n");
#endif 
```

也可以使用 JNI 函数`jint GetVersion(JNIEnv *env);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T07:40:52.270

对于想知道的人，请将 GetVersion 返回的数字写成十六进制以轻松解释其含义。

# c - 管道覆盖缓冲区，不知道如何克服

> ID：10943123
> 
> 赞同：0
> 
> 时间：2012-06-08T04:36:51.047
> 
> 标签：c, fork, pipe

我使用一个简单的管道。我读了一会儿，一次 1 个字符，我想每次我读一个字符时，我都会覆盖一些东西

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <string.h>

int main () {
    int pipefd[2];
    int cpid;
    char buf[31];
    if (pipe(pipefd) == -1) {
        perror("pipe");
        exit(EXIT_FAILURE);
    }
    cpid = fork();
    if (cpid == -1) {
        perror("cpid");
        exit(EXIT_FAILURE);
    }
    if (cpid == 0) {      // child reads from pipe
        close (pipefd[1]); // close unused write end
        int i = 0;
        while (read (pipefd[0], &(buf[i++]), 1)>0);
        printf ("Server receives: %s", buf);
        close (pipefd[0]);
        exit (EXIT_SUCCESS);
    }
    else {               // parent writes to pipe
        close (pipefd[0]); // closing unused read end;
        char buf2[30];
        printf("Server transmits: ");
        scanf ("%s", buf2);
        write (pipefd[1], buf2, strlen(buf2)+1);
        close(pipefd[1]);
        wait(NULL);
        exit(EXIT_SUCCESS);
    }
  return 0;
} 
```

**代码现已修复，已过时：**例如，如果我输入：“Flowers”，它会打印 F，然后是 ~6 个无法打印的字符

**但是：**发生了一件奇怪的事情，我只是使用了一个长度超过 30 的字符串，它根本没有产生任何错误，而且它确实设法写入了整个字符串。虽然我的两个缓冲区都比这小得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:41:47.597

这里看起来不对：

```
while (read (pipefd[0], &buf, 1)>0); 
```

您一遍又一遍地将一个字符读入缓冲区的第一个位置。相反，您应该增加放置读取字符的位置。

例如

```
int i = 0;
while (read(pipefd[0], buf + i, 1) >0 ) ++i;
buf[i] = 0; // end string 
```

检查它不会变得大于 buf 大小可能也很好：

```
while (read(pipefd[0], buf + i, 1) >0 && i < sizeof(buf)) ++i; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:01:34.137

（按照安德斯的建议。）

使用 GCC 4.6.3，我的代码：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <string.h>

int main () {
    int pipefd[2];
    int cpid;
    char buf[31];
    if (pipe(pipefd) == -1) {
        perror("pipe");
        exit(EXIT_FAILURE);
    }
    cpid = fork();
    if (cpid == -1)
    {
        perror("cpid");
        exit(EXIT_FAILURE);
    }
    if (cpid == 0) {      // child reads from pipe
        close (pipefd[1]); // close unused write end
        int i=0;
        while (read(pipefd[0], &(buf[i++]), 1) != 0);
        printf ("Server receives: %s\n", buf);
        close (pipefd[0]);
        exit (EXIT_SUCCESS);
    }
    else {               // parent writes to pipe
        close (pipefd[0]); // closing unused read end;
        char buf2[30];
        printf("Server transmits: ");
        scanf ("%s", buf2);
        write (pipefd[1], buf2, strlen(buf2)+1);
        close(pipefd[1]);
        wait(NULL);
        exit(EXIT_SUCCESS);
    }
  return 0;
} 
```

产生：

```
[user@host tmp]$ gcc pipes.c -o pipes && ./pipes 
Server transmits: Flowers
Server receives: Flowers 
```

（我也同意他关于边界检查的观点。）

* * *

**编辑：**根据您的评论，如果您更改以下行（对我来说是 35）

```
scanf("%s", buf2); 
```

到

```
fgets(buf2, 30, stdin); 
```

你获得两个好处。(a) 通过限制将复制到`buf2`. (b) 您能够“接受”非换行符空格（空格和制表符），而使用`scanf`，您不能：

```
[user@host tmp]$ gcc pipes.c -o pipes && ./pipes 
Server transmits: Flowers smell nice
Server receives: Flowers smell nice 
```

# json - 如何从 yii 中的 json 文件中读取 json 数据以制作依赖下拉列表

> ID：10943126
> 
> 赞同：2
> 
> 时间：2012-06-08T04:37:29.443
> 
> 标签：json, yii

我有两个 json 文件 state.json 和 city.json 我如何在 yii 中从它们读取数据以进行依赖下拉选择。

状态 json

```
{
"sates":
[{"regionid":122,"countryid":254,"region":Alabama},
{"regionid":123,"countryid":254,"region":Alaska},
{"regionid":124,"countryid":254,"region":Arizona},
.
.
.
]
} 
```

城市json文件

```
{
"city":
[
{"cityid":6836,"countryid":254,"regionid":122,"city":Abbeville},
{"cityid":19061,"countryid":254,"regionid":122,"city":Abernant},
{"cityid":19116,"countryid":254,"regionid":122,"city":Adamsville},
.
.
.
]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:10:11.357

```
 Yii::app()->clientScript->registerScript('dropdown', "
    $('#dropdown1').change(listval);    
    function listval()
    {

        var regionid=$('#dropdown1').val();//regionid must be the value of option

            var city=".json_encode($cityarr).";
            for(var i=0;i<city_array_count;i++)
            {

            if(city[i]['regionid']==regionid){
                $('#dropdown2').append( $('<option></option>').val(city[i]['cityid']).html(city[i]['city']));

            }

    }
    "); 
```

$cityarr 是 php 中的第二个数组。您可以替换“.json_encode($cityarr)”。与您的阵列。

我希望这会奏效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:48:09.413

我对 Yii 不熟悉，但是在查找之后，可能最好和最直接的选择是使用`system.web.helpers.CJSON`该类。

您要做的是首先将您的 JSON 文件（country.json 或 city.json）读入一个字符串变量。这不需要特殊操作；假装您正在阅读文本文件。

然后，使用该`CJSON.decode( jsonString)`方法，该方法将返回一个包含 JSON 文件中所有内容的对象。

至于从中创建下拉选择，我不知道您的 JSON 文件是什么样的，所以我无法帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:12:30.843

第一步：将文件读入字符串并`responsestring`从文件中获取一个。您可以使用文件输入流或任何方法。

第二步：解析它。

```
 try{
    JSONObject jobj=new JSONObject(response_str);
    JSONArray jarr=jobj.getJSONArray("sates");

    for(int i=0;i<jarr.length();i++)
    {
JSONObject jsonobj=jarr.getJSONObject(i);
//here is required data bind it with some UI or do anything.    
long regionid=jsonobj.getLong("regionid");
    long countryid=jsonobj.getLong("countryid");
    String region=jsonobj.getString("region");
    }

    }
    catch(JSONException e)
    {

    } 
```

第三步：将值与 UI 绑定。

# ios5 - 如何在 UITabBar 或 UITabBatViewController 中删除此底栏？

> ID：10943128
> 
> 赞同：0
> 
> 时间：2012-06-08T04:37:49.497
> 
> 标签：ios5, uitabbarcontroller, uitabbar, uitabbaritem

我正在尝试对 UITabBar 进行一些自定义。我几乎完成了一切。但是，我看到每个 UITabBarItem 底部都有一个小条。我不知道它是什么对象。有人可以告诉我如何删除它吗？或者，如果有人可以告诉我如何使 UITabBarItem 内的 UIImage 显示在那个未知栏的前面。这已经足够好了。

[https://www.evernote.com/shard/s214/sh/a3f42cea-a36e-449e-bf91-83f82c82a32f/8f3c35eb158008f96d0d4f5f621d7ff4](https://www.evernote.com/shard/s214/sh/a3f42cea-a36e-449e-bf91-83f82c82a32f/8f3c35eb158008f96d0d4f5f621d7ff4)

颜色混合图层模式 [http://www.evernote.com/shard/s214/sh/3d506d1b-6159-429e-952a-f2cdeb270c56/6c747156a612ea74205724ec1441942a](http://www.evernote.com/shard/s214/sh/3d506d1b-6159-429e-952a-f2cdeb270c56/6c747156a612ea74205724ec1441942a)

我有一个自定义的 UITabBarViewController 和 UITabBar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:14:09.297

> 请选择基于视图的应用程序。在 Tabbar Application 中，默认的标签栏将出现在底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:22:15.360

使用默认选项卡控制器无法完成任何解决方案。我只是重新创建自定义选项卡控制器。

# joomla - YSlow Grade F on Add Expires headers - 请帮助

> ID：10943134
> 
> 赞同：1
> 
> 时间：2012-06-08T04:38:38.613
> 
> 标签：joomla, header, yslow

我在我的网站上使用 Joomla，并且我在我的 htaccess 文件中包含了 Expires 标头，但是当通过 YSlow 检查网站时，等级仍然是 F，htaccess 文件中的代码是

```
<IfModule mod_expires.c>
  # Enable expiration control
    ExpiresActive On

  # Default expiration: Immediate after request
    ExpiresDefault "now"

  # CSS and JS expiration: 1 week after request
    ExpiresByType text/css "now plus 1 week"
    ExpiresByType application/javascript "now plus 1 week"
    ExpiresByType application/x-javascript "now plus 1 week"

  # Image files expiration: 1 month after request
    ExpiresByType image/bmp "now plus 1 month"
    ExpiresByType image/gif "now plus 1 month"
    ExpiresByType image/jpeg "now plus 1 month"
    ExpiresByType image/jp2 "now plus 1 month"
    ExpiresByType image/pipeg "now plus 1 month"
    ExpiresByType image/png "now plus 1 month"
    ExpiresByType image/svg+xml "now plus 1 month"
    ExpiresByType image/tiff "now plus 1 month"
    ExpiresByType image/vnd.microsoft.icon "now plus 1 month"
    ExpiresByType image/x-icon "now plus 1 month"
    ExpiresByType image/ico "now plus 1 month"
    ExpiresByType image/icon "now plus 1 month"
    ExpiresByType text/ico "now plus 1 month"
    ExpiresByType application/ico "now plus 1 month"
    ExpiresByType image/vnd.wap.wbmp "now plus 1 month"
    ExpiresByType application/vnd.wap.wbxml "now plus 1 month"
    ExpiresByType application/smil "now plus 1 month"

  # Audio files expiration: 1 month after request
    ExpiresByType audio/basic "now plus 1 month"
    ExpiresByType audio/mid "now plus 1 month"
    ExpiresByType audio/midi "now plus 1 month"
    ExpiresByType audio/mpeg "now plus 1 month"
    ExpiresByType audio/x-aiff "now plus 1 month"
    ExpiresByType audio/x-mpegurl "now plus 1 month"
    ExpiresByType audio/x-pn-realaudio "now plus 1 month"
    ExpiresByType audio/x-wav "now plus 1 month"

  # Movie files expiration: 1 month after request
    ExpiresByType application/x-shockwave-flash "now plus 1 month"
    ExpiresByType x-world/x-vrml "now plus 1 month"
    ExpiresByType video/x-msvideo "now plus 1 month"
    ExpiresByType video/mpeg "now plus 1 month"
    ExpiresByType video/mp4 "now plus 1 month"
    ExpiresByType video/quicktime "now plus 1 month"
    ExpiresByType video/x-la-asf "now plus 1 month"
    ExpiresByType video/x-ms-asf "now plus 1 month"

  # webfonts
    ExpiresByType font/truetype "access plus 1 month"
    ExpiresByType font/opentype "access plus 1 month"
    ExpiresByType application/x-font-woff "access plus 1 month"
    ExpiresByType image/svg+xml "access plus 1 month"
    ExpiresByType application/vnd.ms-fontobject "access plus 1 month"
</IfModule> 
```

有人可以告诉我为什么它没有被 Yslow 分级吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T04:07:16.080

您的托管解决方案是否提供PHP 模块**mod_expires ？**

# python - 从 HTML 标记中提取文本？

> ID：10943136
> 
> 赞同：-3
> 
> 时间：2012-06-08T04:38:42.873
> 
> 标签：python, html, parsing, lxml

> **可能重复：**
> [使用 Python 解析源代码 (Python) 方法从 HTML 文件中提取文本](https://stackoverflow.com/questions/328356/extracting-text-from-html-file-using-python)
> [：Beautiful Soup、lxml、html5lib 的区别？](https://stackoverflow.com/questions/10942730/parsing-source-code-python-approach-beautiful-soup-lxml-html5lib-difference)

目前有一个大型网页，其源代码是大约 200,000 行几乎所有（如果不是全部）HTML。更具体地说，它是一个网页，其内容是由换行符分隔的几千块文本（尽管换行符并不具体意味着内容中有分隔）

我的主要目标是从源代码中提取文本，就像我将网页复制/粘贴到文本编辑器中一样。我想使用另一个解析函数，它最初接收复制/粘贴的文本而不是源代码。

为此，我目前正在使用 urllib2，并在 Beautiful Soup 中调用 .get_text()。问题是，Beautiful Soup 在我的代码中留下了大量的空白，并且很难将结果传递给第二个“文本”解析器。我已经对解析 HTML 进行了大量研究，但坦率地说，我不确定如何轻松解决这个问题。此外，我对如何使用 lxml 之类的导入来提取文本有点困惑。

tl; 博士：有没有什么可能的方法来实现一个结果，就像我在网页上做了全选、复制、粘贴一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:01:14.793

听起来您想将 HTML 呈现为文本，而不是提取各种标签的内容。

如果是这种情况，请考虑将其中一个作为Python 代码中的[子进程运行：](http://docs.python.org/library/subprocess.html)

*   `links -html-numbered-links 1 -html-images 1 -dump "file://$@"`
*   `lynx -force_html -dump "$@"`
*   `w3m -T text/html -F -dump "$@"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:05:53.173

您是否尝试过查看 HTML 解析器。如果您只想要不带标记符号的 html 页面的内容，则可以使用：

```
from HTMLParser import HTMLParser

class MyHTMLParser(HTMLParser):
    def __init__(self):
        HTMLParser.__init__(self)
        self.tags = []
        self.attrs = []
    def handle_starttag(self, tag, attrs):
        self.tags.append(tag)
        self.attrs.append(attrs)
    def handle_endtag(self, tag):
        if tag not in self.tags:return
        for x in reversed(self.tags):
            self.tags.pop()
            self.attrs.pop()
            if tag == x:return
    def handle_data(self, data):
        print data

parser = MyHTMLParser()
f = file("temp.html")
parser.feed(f.read())
f.close() 
```

这将解析 html 页面内的数据。`<div><h1>This is my webpage</h1><div></div></div>`将打印为`This is my webpage`. 您可以修改任何您想显示不同部分、不同格式等的方法。只需根据自己的喜好更改基本类，我的代码应该让您开始走上正确的道路。

# java - 泛型类型和通配符类型的区别

> ID：10943137
> 
> 赞同：53
> 
> 时间：2012-06-08T04:38:49.550
> 
> 标签：java, generics, wildcard

我是 Generic 的新手，我的问题是：两个函数有什么区别：

功能一：

```
public static <E> void funct1  (List<E> list1) {

} 
```

功能二：

```
public static void funct2(List<?> list) {

} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-08T05:07:21.500

第一个签名说：list1 是 E 的列表。

第二个签名说： list 是某种类型的实例列表，但我们不知道类型。

当我们尝试更改方法时，差异变得很明显，因此它需要第二个参数，应该将其添加到方法内的列表中：

```
import java.util.List;

public class Experiment {
    public static <E> void funct1(final List<E> list1, final E something) {
        list1.add(something);
    }

    public static void funct2(final List<?> list, final Object something) {
        list.add(something); // does not compile
    }
} 
```

第一个效果很好。而且您不能将第二个参数更改为可以实际编译的任何内容。

实际上，我刚刚发现了一个更好的差异演示：

```
public class Experiment {
    public static <E> void funct1(final List<E> list) {
        list.add(list.get(0));
    }

    public static void funct2(final List<?> list) {
        list.add(list.get(0)); // !!!!!!!!!!!!!! won't compile !!!!!!!!!
    }
} 
```

`<?>`当它只限制我们可以用它做什么时，我们为什么需要它（正如@Babu_Reddy_H 在评论中所做的那样）。我看到了通配符版本的以下好处：

*   调用者必须对他传入的对象了解较少。例如，如果我有一个列表映射：`Map<String, List<?>>`我可以将其值传递给您的函数，而无需指定列表元素的类型。所以

*   如果我分发像这样参数化的对象，我会主动限制人们对这些对象的了解以及他们可以用它做什么（只要他们远离不安全的投射）。

当我将它们结合起来时，这两个是有意义的：`List<? extends T>`. 例如，考虑一个方法`List<T> merge(List<? extends T>, List<? extends T>)`，它将两个输入列表合并到一个新的结果列表中。当然，您可以再引入两个类型参数，但您为什么要这样做呢？这将是过度指定的事情。

*   finally 通配符可以有下限，因此使用列表可以使该`add`方法起作用，`get`而不会给您任何有用的东西。当然，这引发了下一个问题：为什么泛型没有下界？

有关更深入的答案，请参阅：[何时使用泛型方法以及何时使用通配符？](https://stackoverflow.com/questions/18176594/when-to-use-generic-methods-and-when-to-use-wild-card)和[http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#FAQ203](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#FAQ203)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T05:03:54.560

泛型使集合更安全。

`List<E>`: E 这里是Type Parameter，可以用来确定列表的内容类型，但是有`No`办法在`runtime`.

```
Generics are checked only during compilation time. 
```

`<? extends String>`：这是专门构建到 java 中的，用于处理类型参数的问题。`"? extends String"`表示这个 List 可以有

```
objects which IS-A String. 
```

例如：

动物类 Dog 类扩展 Animal Tiger 类扩展 Animal

所以使用 `"public void go(ArrayList<Animal> a)"`will `NOT accept`Dog 或 Tiger 作为其内容，但 Animal。

`"public void go(ArrayList<? extends Animal> a)"`是什么需要做`ArrayList take in Dog and Tiger type.`

检查 Head First Java 中的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T04:42:23.493

列表作为参数类型表示参数必须是具有任何对象类型的项目列表。此外，您可以绑定`E`参数以声明对函数体内列表项的引用。

List 作为参数类型具有相同的语义，除了没有其他方法可以声明对列表中项目的引用，而只能使用`Object`. 其他帖子给出了额外的细微差别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-28T12:13:33.673

我通常会解释 < **E** > 和 < **?** > 通过与逻辑量化的比较，即全称量化和存在量化。

*   对应于“forall E, ...”
*   对应于“存在某种东西（用 表示）使得......”

因此，下面的泛型方法声明意味着，对于所有类类型**E**，我们定义`funct1`

```
public static <E> void funct1  (List<E>; list1) {

} 
```

以下泛型方法声明意味着，对于某些由 < **?表示的现有类** >，我们定义`funct2`.

```
public static void funct2(List<?> list) {

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T05:21:32.427

第一个是接受参数的函数，该参数必须是 E 类型的项目列表。

第二个示例类型未定义

```
List<?> list 
```

所以你可以传递任何类型的对象的列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T07:28:38.160

（自您的编辑以来）这两个函数签名对外部代码具有相同的效果——它们都将 any`List`作为参数。通配符相当于只使用一次的类型参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-24T10:32:08.393

除了前面提到的那些区别之外，还有一个额外的区别：您可以显式设置泛型方法调用的类型参数：

```
List<Apple> apples = ...
ClassName.<Banana>funct2(apples); // for some reason the compiler seems to be ok
                               // with type parameters, even though the method has none

ClassName.<Banana>funct1(apples); // compiler error: incompatible types: List<Apple>
                                  //                 cannot be converted to List<Banana> 
```

（`ClassName`是包含方法的类的名称。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-23T13:55:55.440

在这种情况下，通配符 (?) 和类型参数 (E) 都会为您做同样的事情。基于用例有某些优势。比方说，如果您想拥有一种可能具有多个参数的方法，例如：

```
public void function1(ArrayList<?> a, ArrayList<?> b){
 // some process
}

public <T> void function2(ArrayList<T> a, ArrayList<T> b){
 // some process
} 
```

在函数 1 中，a 可以是字符串的 AL，b 可以是整数的 AL，因此无法控制两个参数的类型，但这对于函数 2 来说很容易。 **如果我们想稍后在方法或类中使用类型，我们应该使用类型参数（函数 2）**

WildCard 和 Type 参数中有一些功能：

**通配符（？）**

1.  它支持类型的上限和下限，而 Type 参数 (E) 仅支持上限。

**类型参数(E)**

1.  有时我们不需要传递实际的类型 ex：

    ```
    ArrayList<Integer> ai = new ArrayList<Integer>();
    ArrayList<Double>  ad = new ArrayList<Double>();
    function2(ai, ad);
    //It will compile and the T will be Number. 
    ```

在这种情况下，编译器根据实际参数的类型为我们推断类型参数

# sql - 是否可以非顺序更改 Oracle 序列的值？

> ID：10943138
> 
> 赞同：4
> 
> 时间：2012-06-08T04:38:57.897
> 
> 标签：sql, oracle, plsql

我在开发环境中有一些插入要发布，开发人员在进行插入时没有使用序列来获取正确的标识符。他所做的是进入生产数据库，找出最大的标识符是什么，并在其中添加了几百个数字。为了启动他现在已经离开了公司。

所以 prod 的脚本充满了数百个：

```
INSERT INTO table (sequencecol, cola, colb) VALUES (90001,'test','test');

INSERT INTO childtableB (foreignkeyTableA, cola) VALUES (90001,'test') 
```

应该是什么时候

```
INSERT INTO tableA (sequencecol, cola, colb) VALUES (tablesequence.NEXTVAL,'test','test');
INSERT INTO childtableB (foreignkeyTableA, cola) VALUES (tablesequence.CURRVAL,'test') 
```

我正在处理的场景比这更复杂，我没有时间重写，相反，我只想将序列设置为作为该脚本的一部分插入的记录的最大值。

是否可以更改序列的值以将其设置为我要插入的记录的最大值 +1 的值？

我愿意接受更好的建议

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T04:49:54.923

方法很好。

但是看看[这个相关问题的答案，](https://stackoverflow.com/questions/51470/)仅仅将一个序列重置为一个特定的值并不容易。

由于您不需要*回到*这里，也许只需编写一个小脚本，在循环中使用序列中的数字，直到它到达您需要的位置。

[或者，如果](http://dev-notes.com/code.php?q=81)它有*很多*数字：

```
-- First, alter the object so the next increment will jump 1000 instead of just 1.
alter sequence myschema.seq_mysequence increment by 1000;

-- Run a select to actually increment it by 1000
select myschema.seq_mysequence.nextval from dual;

-- Alter the object back to incrementing only 1 at a time
alter sequence myschema.seq_mysequence increment by 1; 
```

# css - CSS 文件名在另一个 CSS 文件中被引用？

> ID：10943140
> 
> 赞同：0
> 
> 时间：2012-06-08T04:39:06.020
> 
> 标签：css

:)

我继承了一个网站，现在我正在浏览 CSS 文件以压缩它们。我发现了一段令我困惑的代码；不知道是不是故意放在那里的。有问题的代码是：

```
table{text.css
    margin-bottom: 0;
} 
```

我遇到的问题是`text.css`. 现在我们正在使用两个名为 960.css 和 text.css 的 CSS 文件，所以我假设这就是引用的来源。这实际上对代码有任何影响，还是只是以前的编码人员正在做的事情的一个奇怪的工件？在这个主题上找不到任何东西，所以我想这只是一个偶然的编码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:42:07.910

所要做的就是阻止“margin-bottom”声明做任何事情。所以，是的，奇怪的神器。

# azure - 在 Azure 中保护网站和 VM 之间的网络

> ID：10943144
> 
> 赞同：11
> 
> 时间：2012-06-08T04:39:37.073
> 
> 标签：azure, azure-web-app-service

我知道在 Windows azure 中，您可以将虚拟机添加到虚拟网络，但我没有看到将网站添加到网络的选项。

从 azure 网站保护对 VM (MongoDb) 的访问的推荐方法是什么？

我更喜欢将数据库放在某种防火墙后面，而不是让流量通过公共互联网。

编辑：虚拟机将托管 MongoDb，因此不能选择使用 Sql Azure 或其他 MSSql 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:41:07.660

如果您希望在虚拟机中使用网络和您自己的数据库，最好从保留网站开始。由于资源限制和其他限制，共享网站可能不是一个好主意。

如果您的数据库是 MongoDB，那么您有两个选择：

1.  让您的 ASP.NET MVC 应用程序在虚拟机（Windows Server + IIS + 您的应用程序 - IaaS）中运行，并让 MongoDB 在其他虚拟机上运行。如果两台机器都在同一个 DC 中，则无需摆弄网络。

2.  让 Azure ASP.NET MVC Web 角色 (PaaS) 和虚拟机运行 MongoDB (IaaS)。

在这两种情况下，您只需要配置一个连接字符串来连接 MongoDB，并且不需要额外的网络修改来使其工作，因为所有机器都在同一个 DC 内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-13T14:36:42.127

老问题，但微软 Azure 现在支持：http: [//azure.microsoft.com/en-us/documentation/articles/web-sites-integrate-with-vnet/](http://azure.microsoft.com/en-us/documentation/articles/web-sites-integrate-with-vnet/)

编辑：首先，确保您已经设置了 VNET 并添加了网关（由于某种原因，添加网关需要很长时间......确保在继续之前让它完成）。

```
New-AzureVNetGateway -VNetName $vnetName -GatewayType DynamicRouting 
```

网关也可以添加到门户中。

然后，您必须为此使用[新的预览门户](https://portal.azure.com/)，浏览您的网络应用程序并向下滚动到网络部分并单击“虚拟网络”按钮。然后，在现有连接列表下找到您的 vnet。如果您没有看到它，那么您的网关设置不正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T04:53:49.337

我不确定我是否理解您的问题，但我会尝试回答。一种方法是创建一个 VM (IaaS) 来托管您的网站，例如 MVC 3 应用程序。（创建其中两个，然后在 Azure 中对它们进行负载平衡）。创建另一个 VM (IaaS)，这将是您的数据库 VM。例如 SQL 服务器。来自您网站的连接字符串将允许您与数据库服务器通信

当用户访问您的站点时，他们将无法看到您的数据库，因为它没有公开公开，他们只会看到您为您的网站打开的端口 80 以供浏览。您已经有效地创建了一个安全的网站，人们可以通过端口 80 浏览该网站，而无需访问您的数据库层。

上面的模型对所有事情都使用 IaaS，你也可以做一个 PaaS/IaaS，你有一个在 Azure PaaS（Web 角色）中运行的网站，你有一个在 IaaS 机器上运行的数据库（例如 SQL Server）。同样，所有流量都将访问您面向公众的网站，该网站将有一个连接字符串指向您的 IaaS 实例，并且只有它才能与您的数据库实例进行通信。

有更多方法可以解决这个问题，通过提供 MySQL（今天宣布）的 WAWS（Windows Azure 网站）以及在 Azure 中使用 SQL DB？

如果您解释您的确切要求，那么我们可以更好地指导您吗？

我仍然不清楚您的虚拟网络部分以及位于哪里？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T05:08:34.007

您不能将 Windows Azure 网站添加到由其他 Windows Azure 部署组成的虚拟网络。

只要您的数据库位于同一个数据中心内，就不需要虚拟网络。如果您创建一个 Windows Azure 网站，您可以简单地与一个 Windows Azure SQL 数据库对话 - 只需通过门户设置一个，获取连接字符串和凭据，然后将其添加到您的应用程序中。事实上，当您从库（使用 SQL Server 与 MySQL）创建网站时，系统会要求您创建新数据库或选择现有数据库。

在门户中，您可以轻松创建自己的数据库（这是数据库即服务，只需几秒钟）。完成后，您可以启用防火墙规则以允许 Windows Azure 服务访问它。然后不要添加任何进一步的防火墙规则。此时，只有 Windows Azure 服务甚至可以*找到*您的数据库，并且只有知道凭据的服务才能连接到它。

正如@user728584 所建议的那样，您也可以在虚拟机中运行数据库，但是您必须通过公共 IP 地址访问它。如果您访问本地数据库，则会遇到同样的问题，因为无法将 vpn 客户端安装到 Azure 网站中。您*可以*使用托管在 Web 角色中的 Web 应用程序来执行此操作（您几乎可以做任何事情）。

# php - Codeigniter 的会话数据，它们只是 cookie 吗？

> ID：10943145
> 
> 赞同：3
> 
> 时间：2012-06-08T04:39:51.927
> 
> 标签：php, codeigniter, session, cookies

我将在我的登录系统中使用 Codeigniter 的会话数据，但首先我想了解它们，所以我阅读了用户指南，据我了解，Codeigniter 的会话数据是`just`cookie。
这是真的？这意味着如果用户禁用 cookie，他将无法使用 Codeigniter 的会话数据登录任何网站？
引：

`The Session class stores session information for each user as serialized (and optionally encrypted) data in a cookie`
所以这意味着我应该创建自己的原生 PHP 会话数据，以使禁用 cookie 的用户能够登录我的网站？还是 Codeigniter 的会话数据`not`只是 cookie？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:43:52.870

是的，CodeIgniter 的内置会话类确实使用了 cookie，但是，即使是 PHP 中的标准会话也需要 cookie。

因此，无论你走哪条路线，CodeIgniter Session 或标准 Session，如果用户没有启用 cookie，Sessions 将无法工作。

CodeIgniter 的 Session 类的优点是它会自动加密数据以防止 cookie 被篡改，此外还允许您根据数据库对 cookie 进行身份验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T04:42:34.567

CodeIgniter 或任何其他使用 HTTP 协议的应用程序中的会话最好跟踪使用 cookie。通常，会话数据本身不使用 cookie 存储，但`key`访问此数据的方法是，实际会话数据是否存储在服务器的文件系统或数据库中。

PHP 允许通过 cookie、POST 或 GET 设置会话 ID，但最好始终使用 cookie，否则您[将](http://www.php.net/manual/en/session.security.php)使用`ini_set('session.use_only_cookies', true)`. 几乎每个人都启用了 cookie。

# java - 如何防止Android应用安装超过3次？

> ID：10943150
> 
> 赞同：1
> 
> 时间：2012-06-08T04:40:38.520
> 
> 标签：java, android

我有一个建议来限制 Android 应用程序的安装次数，让我们假设给定用户帐户安装 3 次。我已经在应用程序的开头插入了一个表单，该表单从我们的数据库中检查用户名和密码，并返回其是否有效。

接下来我必须应用一个技巧来防止这个应用程序被每个用户安装超过 3 次。我希望它能清除我正在尝试做的事情。任何想法要做什么以及如何进行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:45:13.727

**您绝不**可以限制用户不要从 google play 安装您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T04:55:19.310

在数据库的用户表中有一个`install_count`列。每次用户填写表单时，检查该`install_count`值，如果等于3，则不允许应用程序继续，您可以显示“*超出最大安装数*”的消息并退出应用程序。否则，为该用户增加数据库中的 install_count 值。

PS：正如Zoombie所说，您无法阻止用户安装应用程序，但如果超过安装限制，您可以限制用户运行应用程序。

您还需要注意，有许多应用程序会备份已安装的应用程序和可以随时恢复的数据。此外，如果用户更换他的设备超过三次，他将无法运行您的应用程序。所以考虑一下这个限制的缺点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T05:01:01.497

从技术上讲，这不是一个非常困难的问题，但用户关系问题将难以管理。您应该为您的用户提供一种简单易用的机制来“重置”他们的安装计数。此外，您需要在用户为您的应用程序付款之前通知他们此限制。

在我能想到的几种情况下，这样的限制会导致问题：

1.  如果用户将手机恢复出厂设置然后重新安装应用程序会怎样？
2.  如果用户安装自定义 ROM 或获得新手机怎么办？

您是否要拒绝付费客户安装他们付费的应用程序？从长远来看，像这样执行不力的政策只会伤害你，因为它会导致

1.  对您的应用的评价非常差
2.  盗版您的应用程序并删除检查

请记住，人们正在下载/购买您的应用程序，因为它为他们提供了一些东西，并且他们认为他们将始终可以访问您的应用程序。一旦你开始否认功能或违反他们的假设，你就会开始疏远你的客户。

# c# - 无法从 DevExpress ASPxTreeList 控件中选择子菜单项

> ID：10943152
> 
> 赞同：1
> 
> 时间：2012-06-08T04:41:13.980
> 
> 标签：c#, asp.net, devexpress

![子菜单选择。](../Images/9d1f81016af1bab26d0c64d81e1ff965.png) 我在我的项目中使用 Devexpress ASPxTreeList 控件。选择父节点时，当我尝试选择任何单个子节点时，所有子节点均自动选择bot，则由于未选择父级，因此我无法显示子节点。

此外，如果尝试选择父节点，则所有子节点都被选中，我无法选择或显示子节点。

有谁能够帮我...

# android - 更改 Android 默认字体大小

> ID：10943154
> 
> 赞同：1
> 
> 时间：2012-06-08T04:41:29.793
> 
> 标签：android, fonts, size

谁能告诉我默认文本字体大小在 android 框架中的确切设置位置。当我使用 Spare Parts 包更改字体大小并重新启动我的 android 设备时，默认情况下字体大小设置为 Normal 样式。但我想要它默认为非常大。

谢谢， 里亚兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:56:04.690

如果您只想为整个手机设置字体大小。试着去

```
Settings (Phone) > Accessibility. 
```

在那里选择`Large Text`。

注意：我假设您只想要手机的字体，而不是通过应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T10:23:19.843

根据[http://recombu.com/mobile/article/changeing-font-size_M18292.html](http://recombu.com/mobile/article/changing-font-size_M18292.html)没有本机选项，直到 Android 3.0。

您必须安装一些第三方应用程序。“大字体”似乎很受欢迎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T04:45:26.797

您无法更改默认字体大小。您可以定义主题，并在主题中定义字体大小。您可以在 android 开发人员参考文档中阅读有关定义主题和样式的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T22:48:02.053

对于 andriod 2.3.5 转到 SMS 单击菜单-> 设置向下滚动，直到看到字体设置并选择字体大小设置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T04:48:05.610

您可以在应用程序中更改字体大小、样式等，但不能更改整个设备。要做到这一点，我猜你需要root你的手机并在其中提供具有指定字体大小的自定义字体。

# javascript - 循环遍历 iframe 中的多个元素

> ID：10943156
> 
> 赞同：1
> 
> 时间：2012-06-08T04:41:36.143
> 
> 标签：javascript, jquery, iframe, find

我已将内容加载到页面上的隐藏 iframe 中，并且我想遍历页面上的多个元素并使用 jquery 获取文本。

这是我当前的代码：

```
$('#myiFrame').contents().find('div.air').each(function (index) {
       alert($(this).text());
     }); 
```

尽管页面上有两个 div，但它似乎只找到了一个具有“air”类的 div。我的代码怎么错了？

编辑：我应该说它们是页面上的两个“div.air”，不在同一个父级下。

HTML它类似于：

```
<section id="blah">
<div class="air"> text here </div>
</section>
<section id="blah2">
<div class="air"> text here </div>
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:45:55.607

制定了我自己的答案：

```
$('#iframe').contents().find('.air').each(function(){

    var foo = $(this).html();
    //do your Stuff here

}); 
```

# javascript - 如何使用javascript（但不是标签或属性）替换字符串中所有匹配的纯文本字符串？

> ID：10943166
> 
> 赞同：2
> 
> 时间：2012-06-08T04:42:33.330
> 
> 标签：javascript, string, replace

想象一下页面上的这个 html

```
<div id="hpl_content_wrap">
<p class="foobar">this is one word and then another word comes in foobar and then more words and then foobar again.</p>
<p>this is a <a href="http://foobar.com" data-bitly-type="bitly_hover_card">link with foobar in an attribute</a> but only the foobar inside of the link should be replaced.</p>
</div> 
```

使用 javascript，如何在不更改任何内部 html 标签的情况下将所有 'foobar' 单词更改为 'herpderp'？

IE。只应更改纯文本。

所以成功的html改变将是

```
<div id="hpl_content_wrap">
<p class="foobar">this is one word and then another word comes in herpderp and then more words and then herpderp again.</p>
<p>this is a <a href="http://foobar.com" data-bitly-type="bitly_hover_card">link with herpderp in an attribute</a> but only the herpderp inside of the link should be replaced.    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:46:32.910

这是您需要做的...

1.  获取对一堆元素的引用。
2.  递归遍历子节点，仅替换文本节点中的文本。

抱歉耽搁了，我还没来得及添加代码就跑题了。

```
var replaceText = function me(parentNode, find, replace) {
    var children = parentNode.childNodes;

    for (var i = 0, length = children.length; i < length; i++) {
        if (children[i].nodeType == 1) {
            me(children[i], find, replace);            
        } else if (children[i].nodeType == 3) {
            children[i].data = children[i].data.replace(find, replace);
        }

    }

    return parentNode;

}

replaceText(document.body, /foobar/g, "herpderp");​​​ 
```

[js小提琴](http://jsfiddle.net/hj9h8/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:47:57.357

这是一个简单的问题：

*   识别 DOM 树中的所有文本节点，
*   然后替换其中的所有 foobar 字符串。

这是完整的代码：

```
// from: https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery
var getTextNodesIn = function (el) {
    return $(el).find(":not(iframe)").andSelf().contents().filter(function() {
        return this.nodeType == 3;
    });
};

var replaceAllText = function (pattern, replacement, root) {
    var nodes = getTextNodesIn(root || $('body'))
    var re    = new RegExp(pattern, 'g')

    nodes.each(function (i, e) {
        if (e.textContent && e.textContent.indexOf(pattern) != -1) {
           e.textContent = e.textContent.replace(re, replacement);
        }
    });
};

// replace all text nodes in document's body
replaceAllText('foobar', 'herpderp');

// replace all text nodes under element with ID 'someRootElement'
replaceAllText('foobar', 'herpderp', $('#someRootElement')); 
```

请注意，我对 foobar 进行了预检查，以避免使用正则表达式处理疯狂的长字符串。可能是也可能不是一个好主意。

如果您不想使用 jQuery，而只想使用纯 JavaScript，请点击代码片段中的链接（[如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)），您还可以在其中找到仅 JS 的版本来获取节点。然后，您只需以类似的方式迭代返回的元素。

# android - 可选字段的 Android 可扩展视图

> ID：10943169
> 
> 赞同：0
> 
> 时间：2012-06-08T04:43:09.173
> 
> 标签：android, android-layout

我正在做一个注册页面编码。为此，我有很多字段，例如姓名、姓氏、性别、出生日期、用户名、密码、地址 1、地址 2、城市、州、国家/地区、邮编等。在此地址字段是可选的。所以我的问题是，是否可以放置一个按钮，然后单击该按钮，只有可选字段可见。

我尝试使用 Scrollview，但我认为这不是正确的选择。谁能帮我做这件事。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-17T12:53:00.690

在您的布局中使用可见性 = 可见的所有可选元素一段时间，然后根据需要对视图进行排序和排列，之后`visibility = gone`，在 relativeLayout 中将“可选” Gui Elements 设置为 ：`android:animateLayoutChanges="true"` 然后在活动类中播放通过隐藏或不隐藏可选元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:47:31.193

您可以使每个字段可见、不可见或消失。您可以定义一个按钮来更改字段的可见性。您可以在 android 开发人员参考页面上找到更多信息，搜索“View.visible”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T04:51:45.827

您也可以通过使用来实现此目的，`ScrollView`但您必须将可选字段的`visiblity`as`VISIBLE`或进行管理`GONE`。**单击**展开按钮时，将`views`可见性设置为`VISIBLE`，默认情况下将其可见性设置为`GONE`。您可以为它们添加动画效果以实现折叠和展开效果。

# wsdl - 使用 WSO2 ESB 时如何更改 WSDL 中的绑定主机名？

> ID：10943176
> 
> 赞同：1
> 
> 时间：2012-06-08T04:44:10.793
> 
> 标签：wsdl, wso2, wso2esb

当我创建代理服务使用自定义代理时，我想 在 WSDL 的绑定中将主机名从`"http://localhost:8280/services/AppointWebServiceProxy.AppointWebServiceProxyHttpSoap11Endpoint"`更改 为：`"http://10.10.11.176:8280/services/AppointWebServiceProxy.AppointWebServiceProxyHttpSoap11Endpoint"`

```
 <wsdl:port name="AppointWebServiceProxyHttpSoap11Endpoint" binding="tns:AppointWebServiceProxySoap11Binding">
 <soap:address location="http://localhost:8280/services/AppointWebServiceProxy.AppointWebServiceProxyHttpSoap11Endpoint"/> 
 </wsdl:port> 
```

我已经更改了`<HostName>10.10.11.176</HostName>`carbon.xml 并更改了`<parameter name="bind-address" locked="false">10.10.11.176</parameter>` axis2.xml 但所有这些都不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:44:31.710

要更改您的服务发布的 url，您必须编辑参数

```
<parameter name="WSDLEPRPrefix" locked="false">http://hostname os IP address</parameter> 
```

到axis2.xml文件中所需的值，Transport In (Listeners)部分

问候

# android - 如何使用 ShareCompat.IntentBuilder 启动活动

> ID：10943177
> 
> 赞同：12
> 
> 时间：2012-06-08T04:44:11.170
> 
> 标签：android, android-intent, android-appcompat

我正在尝试添加共享意图以发布到*Google Plus*，但似乎无法解决将新的`ShareCompat.IntentBuilder`（Android 支持库类）传递给该`startActivity`方法的问题。我开始使用[这个例子](http://googleplusplatform.blogspot.com/2012/05/sharing-rich-content-from-your-android.html)。我的应用是使用 Android 2.2 平台编译的。是否有可能有另一种支持方式来启动 Activity 以启动共享意图。

```
IntentBuilder shareIntent = ShareCompat.IntentBuilder.from(MyActivity.this);                
shareIntent.setText(message);
shareIntent.setSubject(subject);

if (mFullFileName != null) {
    File imageFile = new File(mFullFileName);
    if (imageFile.exists()) {
        shareIntent.setStream(Uri.fromFile(imageFile));
        shareIntent.setType("image/jpeg");
    }
} else {
    shareIntent.setType("*.*");
}   
shareIntent.getIntent();
// doesn't compile only accepts Intent and not the Intentbuilder 
startActivity(shareIntent); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-07-27T13:49:50.643

这是我的代码中的一个示例，但如果您想要一些参考资料，请点击文章的超链接。

```
public void shareText(String text) {
        String mimeType = "text/plain";
        String title = "Example title";

        Intent shareIntent =   ShareCompat.IntentBuilder.from(this)
                                                    .setType(mimeType)
                                                    .setText(text)
                                                    .getIntent();
        if (shareIntent.resolveActivity(getPackageManager()) != null){
            startActivity(shareIntent);
        }
    } 
```

[关于 ShareCompat.IntentBuilder 和共享意图的博客文章](https://medium.com/google-developers/sharing-content-between-android-apps-2e6db9d1368b)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-08T05:12:13.937

有趣的是，我只是想通了...给出的示例是假设创建一个 Intent 而不是 IntentBuilder 对象.. 必须更改我的代码以链接对象创建。

```
Intent i = ShareCompat.IntentBuilder.from(MyActivity.this)
                       .setText(message)
                       .setSubject(subject)
                       .setStream(Uri.fromFile(imageFile))
                       .setType("image/jpeg")
                       .getIntent()
                       .setPackage("com.google.android.apps.plus"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-09-23T10:24:57.380

`ShareCompat.IntentBuilder.from(ActivityName.this)`已[弃用](https://developer.android.com/reference/androidx/core/app/ShareCompat.IntentBuilder#from(android.app.Activity))，请使用 IntentBuilder 的构造函数，如下所示：

```
new ShareCompat
                .IntentBuilder(YourActivity.this)
                .setType("text/plain")
                .setChooserTitle("Share text with: ")
                .setText("Desired text to share")
                .startChooser(); 
```

# r - iGraph 图中的顶点名称在哪里

> ID：10943181
> 
> 赞同：18
> 
> 时间：2012-06-08T04:45:08.907
> 
> 标签：r, igraph, bipartite

我的一般问题是我在使用 iGraph 生成图形时丢失了顶点名称/标签（不确定这里的正确词）。

我有一个二分网络的边缘列表 IC_edge_sub，如下所示：

```
 new_individualID new_companyID
1             <NA>     10024354c
3        10069415i      2020225c
4        10069415i     16020347c
5        10069272i      2020225c
6        10069272i     16020347c
7        10069274i      2020225c 
```

然后我创建一个图形元素：

```
IC_projected_graphs <- bipartite.projection(IC_twomode, types = 
                         is.bipartite(IC_twomode)$type) 
```

然后将其折叠以仅识别 companyID 之间的连接

```
IC_projected_graphs <- bipartite.projection(IC_twomode, types =   
                         is.bipartite(IC_twomode)$type) 
```

然后得到邻接矩阵：

```
CC_matrix_IC_based <- get.adjacency(CC_graph_IC_based); CC_matrix_IC_based 
```

在 iGraph 中，节点编号从零开始，因此矩阵命名也从零开始。但是，我现在需要最终 CC_matrix_IC_based 矩阵中边缘列表的第二列中指定的“new_companyID”。

你能帮我如何使用原始边缘列表中的信息将行名和列名放入最终的邻接矩阵中吗？

我用谷歌搜索并搜索了堆栈流，但无法真正找到有效的答案。非常感谢你的帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-08T11:16:50.333

顶点名称通常存储在以`name`igraph 命名的顶点属性中。因此，如果您的图形存储在变量`g`中，那么您可以使用它`V(g)$name`来检索所有顶点的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T01:42:42.700

关键问题是我在生成图表时没有保存名称。之后我需要确保不会丢失数据。以下是整体解决方案：

```
# Subsetting / triangulating data for selected games
GC_edge_sub <- subset (GC_edge, mb_titleID %in% loggames_yearly_sample$mb_titleID)
GC_edge_sub <- subset(GC_edge_sub, select = c("new_titleID", "new_companyID"))
head(GC_edge_sub)

# Generating the vertex names
vertex_new_companyID <- data.frame(names = unique(GC_edge_sub$new_companyID))
vertex_new_titleID <- data.frame(names = unique(GC_edge_sub$new_titleID))
vertex <- rbind(vertex_new_companyID, vertex_new_titleID)

# Creation of GC_twomode
GC_twomode <- graph.data.frame(GC_edge_sub, vertices = vertex)
GC_projected_graphs <- bipartite.projection(GC_twomode, 
                                            types = is.bipartite(GC_twomode)$type)
GC_matrix_GC_based <- get.adjacency(GC_twomode)
dim(GC_matrix_GC_based)

# Collapsing the matrix
# Be aware that if you use the classical command 
# `CC_graph_GC_based <- GC_projected_graphs$proj2` 
# it collapses, but looses the colnames and rownames
# I thus: a) create a subset of the adjacency matrix; and
#         b) create the lookef for matrix by multiplication
rowtokeep <- match(vertex_new_companyID$names, colnames(GC_matrix_GC_based))
coltokeep <- match(vertex_new_titleID$names, rownames(GC_matrix_GC_based))
GC_matrix_GC_based_redux <- GC_matrix_GC_based[rowtokeep, coltokeep]
# We now have a CG matrix.Let's build from this a GG matrix.
CC <- GC_matrix_GC_based_redux %*% t(GC_matrix_GC_based_redux) 
```

# php - ajax 发布但无法阻止刷新

> ID：10943186
> 
> 赞同：5
> 
> 时间：2012-06-08T04:45:59.913
> 
> 标签：php, ajax, post, page-refresh

在 ajax 发布后我的页面刷新有问题，我尝试了 6 种不同的变体，有一次我得到了正确的结果，但无法阻止页面刷新，现在在这个网站上搜索网络和周围它都不起作用，它仍然令人耳目一新......

当前代码是：

```
$('#submit_btn').click(function() {
/*event.preventDefault();*/
var curPassword = $("input#curPassword").val();
var newPassword = $("input#newPassword").val();
var new2Password = $("input#new2Password").val();
/*var params = 'curPassword='+ curPassword + '&newPassword=' + newPassword + '&new2Password=' + new2Password; */
var params = {
    curPassword: curPassword,
    newPassword: newPassword,
    new2Password:new2Password
};
$.ajax({
        type: "POST",
        url: "testAjax.php",
        data: params,
        success: function(msg){
            alert(msg);
        }
    });
    return false;
}); 
```

形式是：

```
<form method="post" action="" name="confirmChange" class="confirmChange">
<label for="curPassword">Current Password:</label>
<input type="password" name="curPassword" id="curPassword" value="" />
<label for="newPassword">New Password:</label>
<input type="password" name="newPassword" id="newPassword" value="" />
<label for="new2Password">Confirm New Password:</label>
<input type="password" name="new2Password" id="new2Password" value="" />
<br />
<input type="button" name="confirmChange" class="confirmChange" id="submit_btn" value="Change" /> 
```

感谢任何帮助使其正常工作=/

**更新：** 删除了其他非直接相关的代码，因为它有点使问题变得混乱。还更新了代码以反映最新版本。我将 ajax url 更改为一个简单的 textAjax.php 并带有一个简单的 echo hello world ，但我仍然一无所获。

**更新 2** 尝试将 javascript 代码更改为：

```
$('#submit_btn').click(function() {
        alert('Button Clicked');
}); 
```

而且我什么也没得到......如果这是下面的表格，那么点击功能怎么可能根本不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:53:10.760

您不需要使用 type="submit" 作为您的输入。只需使用 type="button" 并在按钮的单击事件上调用 ajax 函数。

```
<input type="button" name="confirmChange" class="confirmChange" id="submit_btn" value="Change">

$('#submit_btn').click(function() {
  (ajax code here)
}); 
```

preventDefault() 也可以，但是，在我看来，当您可以完全避免使用提交按钮时，为什么要阻止事件自然发生呢？

**更新：** 我刚刚意识到使用提交将允许用户按回车键来触发您的操作，所以也许这也有一些优点。无论如何，[这是一个类似的问题，其中包含对 preventDefault() 的详细说明](https://stackoverflow.com/questions/887712/prevent-page-refresh-by-submit-a-post-action-from-a-normal-clickevent)。

**更新 2：** 您需要修复 ajax 函数中的参数。使用数组而不是尝试构建查询字符串：

```
var params = {
curPassword: curPassword,
newPassword: newPassword,
new2Password:new2Password
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:10:05.340

尝试这个

```
<script>
function refreshpage(){
 (ajax code here)
  return false;
}
</script>

<form onsubmit="return refreshpage();">
<input type = "submit" value="submit_btn">
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T04:53:25.137

在以下代码块中封装您的 AJAX 调用

```
$('form.confirmChange').submit(function(event) {
      event.preventDefault();
      #剩下的代码在这里
});

```

preventDefault() 将阻止触发事件的默认操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T14:10:33.793

使用循环只运行一次 ajax 调用。

```
var i;
for(i=0;i<1;i++){
//ajax code here
} 
```

所以，那么它就不会一次又一次地调用..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T03:36:00.173

我想我使用以下方法修复了它：

```
$('#submit_btn').live('click', (function() { 
```

我至少在单击时开始得到响应，但我没有更新或从 php 文件中获取任何回声，但希望这会更容易调试。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-12T03:34:58.133

我有同样的问题。就像你一样，我将我`<input>`的标签包裹在一`<form>`对标签中。即使没有`<submit>`，我发现当我单击按钮触发 Ajax 调用时，它正在刷新页面 - 并且实际上将表单提交到页面。

我最终删除了`<form>`标签并且这种行为停止了，但 Ajax 仍然按预期工作。我希望这可以帮助其他正在经历这种情况的人。

# wcf - Sharepoint 2010 Web 服务：使用 WCF 的身份验证失败

> ID：10943191
> 
> 赞同：1
> 
> 时间：2012-06-08T04:47:04.050
> 
> 标签：wcf, web-services, sharepoint, visual-c++

我正在创建一个应用程序来列出所有子站点、属性并上传文档。我正在尝试使用 WCF 来使用共享点 Web 服务。为了进行身份验证，我编写了下面提到的代码：

```
HRESULT hr;
ISAXXMLReader* pRdr = NULL;
hr = CoInitialize(NULL);
hr = CoCreateInstance(
                __uuidof(SAXXMLReader),
                NULL,
                CLSCTX_ALL,
                __uuidof(ISAXXMLReader),
                (void **)&pRdr);

 if ( SUCCEEDED(hr) )
 {
    pRdr->putBaseURL(L"http://bascansp01");
    Authentication::CAuthentication* auth = new Authentication::CAuthentication(pRdr);  
    Authentication::LoginResult* res = new Authentication::LoginResult();

    BSTR sUsername  = L"aakanksh@abc";
    BSTR sPasswd    = L"abcd";
    hr = auth->Login(sUsername, sPasswd, res); 
```

但我的登录失败。在调试时，我发现它在以下行失败： __atlsoap_hr = SendRequest(_T("SOAPAction: \"http://schemas.microsoft.com/sharepoint/soap/Login\"\r\n"));

任何线索为什么它失败了。

谢谢和问候， Aakanksha

# c# - 在 C# 中将 string.Empty 转换为（通用）T？

> ID：10943202
> 
> 赞同：9
> 
> 时间：2012-06-08T04:49:05.757
> 
> 标签：c#, generics, casting

我有一个实用方法，它从旧的`.INI`配置类型文件中返回一个强类型的值，带有签名

```
internal static T GetIniSetting<T>(string config, string key, T defVal = default(T)) 
```

我希望字符串是特殊的，因为在编码器未指定默认值的情况下，我希望*defaultValue*的默认值为`string.Empty`，而不是（即 null）。`default(string)`

```
if (cantFindValueInIniFile == true)
{
    if ((typeof(T) == typeof(string)) && (defaultValue == null))
    {
        // *** Code needed here - Cannot convert string to <T>***
        return (T)string.Empty; 
    }
    return defaultValue;
} 
```

我已经尝试过强制转换和`as`关键字，但无济于事。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T04:51:49.553

'hacky'方式：

```
return (T)(object)string.Empty; 
```

笔记：

*   非常安全，因为您检查了先决条件。
*   引用类型的性能损失不明显。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T04:52:21.850

你必须这样做：`(T)(object)(string.Empty)`.

此外，一个小的优化是将其存储在静态只读字符串字段中，这样您就不必进行强制转换，而是每个通用参数一次（而不是每个方法调用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T04:54:24.457

如果我没记错的话，GetIniSetting 中的最后一个参数是可选的，只有当你不提供任何东西时，你才会得到 default(string)。因此，要使用 string.Empty 作为默认字符串值，请进行如下调用：

```
string value = GetIniSetting<string>(config, key, string.Empty); 
```

# php - 使用mysql在3d中找到欧几里德距离的最有效方法是什么？

> ID：10943205
> 
> 赞同：11
> 
> 时间：2012-06-08T04:50:04.563
> 
> 标签：php, mysql, algorithm, math, euclidean-distance

我有一个 MySQL 表，其中存储在 3 列 R、G、B 中的数千个数据点。如何使用欧几里德距离找到最接近给定点（a、b、c）的数据点？

我将颜色的 RGB 值分别保存在表格中，因此每列中的值限制为 0-255。我要做的是通过找到欧几里得距离最小的颜色来找到最接近的颜色匹配。

我显然可以遍历表中的每个点来计算距离，但这不足以有效地进行缩放。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T05:06:42.263

我认为上述评论都是正确的，但它们 - 在我的拙见中 - 没有回答最初的问题。（如我错了请纠正我）。所以，让我在这里加上我的 50 美分：

您要求一个 select 语句，假设您的表称为“颜色”，并且您的列称为 r、g 和 b，它们是范围为 0..255 的整数，并且您正在寻找值，在您的表，最接近给定值，让我们说：rr，gg，bb，那么我敢尝试以下：

```
select min(sqrt((rr-r)*(rr-r)+(gg-g)*(gg-g)+(bb-b)*(bb-b))) from colors; 
```

现在，这个答案有很多警告，因为我不确定我的问题是否正确，所以请确认它是否正确，或者纠正我，以便我可以提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:22:55.443

我看到你可以做的第一级优化是将你想要限制查询的距离平方，这样你就不需要对每一行执行平方根。我鼓励的第二级优化是一些预处理，以减轻对每个查询的无关平方的需要（这可能会为大型 RGB 表创建一些额外的运行时间）。您必须进行一些基准测试才能看到，但是通过将值替换为 a、b、c 和 d，然后执行查询，您可以减轻 MySQL 的压力。

![乳胶](../Images/057cbf688ad28bc51898b3e83cf4a25c.png)

请注意，最后两行之间的性能差异可以忽略不计。您必须在系统上使用测试查询来确定哪个更快。

我刚刚重新阅读并注意到您是按距离订购的。在这种情况下，应该删除 d 一切都应该移到一侧。您仍然可以插入常量以防止在 MySQL 端进行额外处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T06:16:29.563

1.  由于您正在寻找最小距离而不是确切距离，因此您可以跳过平方根。我认为[平方欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_Distance)适用于此。
2.  您已经说过这些值的范围在 0-255 之间，因此您可以制作一个包含 255 个值的索引查找表。

这是我在 SQL 方面的想法。`r0`, `g0`, 和`b0`表示目标颜色。该表`Vector`将保存上述#2 中提到的平方值。此解决方案将访问所有记录，但可以通过仅排序和选择第一行将结果集设置为 1。

```
select 
    c.r, c.g, c.b,
    mR.dist + mG.dist + mB.dist as squared_dist
from 
    colors c,
    vector mR,
    vector mG,
    vector mB
where
    c.r-r0 = mR.point and
    c.g-g0 = mG.point and
    c.b-b0 = mB.point
group by
    c.r, c.g, c.b 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T05:17:23.380

我相信有两种选择。

正如您所说的那样，您必须遍历整个集合，并比较并检查您最初设置的最大值，该最大值是-1 之类的极低数字。这在线性时间内运行，n 次（因为您只是将 1 点与集合中的每个点进行比较，所以它以线性方式缩放）。

我仍在考虑另一种选择......类似于在远离输入点的地方进行广度优先搜索，直到在搜索点的集合中找到一个点，但这需要更多的思考（我想平均而言，3D 空间必须非常密集才能更有效）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T05:24:45.300

如果你遍历每个点并计算距离，不要使用平方根函数，没有必要。最小的平方和就足够了。

这是您要解决的[问题。](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem "问题")（平面情况，选择所有按ax、y或z轴排序的点。然后用PHP处理）

MySQL 也有一个[空间数据库](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html "空间数据库")，它可能有这个功能。虽然我并不积极。

# java - org.jboss.web.tomcat.security.JBossWebRealm 身份验证期间出错 java.util.ConcurrentModificationException

> ID：10943212
> 
> 赞同：1
> 
> 时间：2012-06-08T04:50:45.493
> 
> 标签：java, jboss, security, jboss5.x

当我尝试重新启动服务器时出现以下异常。

```
2012-06-07 17:46:14,872 ERROR [http-0.0.0.0-8080-25]-[org.jboss.web.tomcat.security.JBossWebRealm] Error during authenticate
java.util.ConcurrentModificationException
    at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
    at java.util.AbstractList$Itr.next(AbstractList.java:343)
    at org.jboss.security.plugins.JBossAuthorizationManager.getRolesAsSet(JBossAuthorizationManager.java:317)
    at org.jboss.security.plugins.JBossAuthorizationManager.getUserRoles(JBossAuthorizationManager.java:233)
    at org.jboss.security.plugins.auth.JaasSecurityManagerBase.getUserRoles(JaasSecurityManagerBase.java:457)
    at org.jboss.security.plugins.JaasSecurityManager.getUserRoles(JaasSecurityManager.java:208)
    at org.jboss.web.tomcat.security.JBossWebRealm.getCachingPrincipal(JBossWebRealm.java:669)
    at org.jboss.web.tomcat.security.JBossWebRealm.authenticate(JBossWebRealm.java:409)
    at org.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:181)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:491)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

JBOSS的JBossAuthorizationManager中getRolesAsSet方法的代码如下： //Private Methods

```
private HashSet<Principal> getRolesAsSet(RoleGroup roles)
    {
       HashSet<Principal> userRoles = null;
       if( roles != null )
       {
          userRoles = new HashSet<Principal>();
          List<Role> rolesList = roles.getRoles();
          for(Role r: rolesList)
          {
             userRoles.add(new SimplePrincipal(r.getRoleName()));
          } 
       }
       return userRoles;
    } 
```

正如我所知（并且已经对该方法进行了一些简单的测试），如果有一些线程在调用 roleList 的迭代器的同时添加或删除 RoleGroup“角色”的角色，我们将得到 ConcurrentModificationException 如上所述。

我认为这是 JBOSS 的一个错误。不确定我们是否可以在 JBOSS 中进行一些配置来避免这种情况。我的 JBOSS 服务器版本是“jboss-5.1.0.GA”

请给我一些建议。谢谢。

# wpf - Application.Resources 中定义的样式不适用于控件

> ID：10943213
> 
> 赞同：2
> 
> 时间：2012-06-08T04:50:52.363
> 
> 标签：wpf, xaml, .net-4.0, styling

我正在尝试将全局应用程序样式应用于某些控件类型，但是将这些样式添加到 Application.Resources 并没有将样式应用于我视图中的元素。

例子：

```
<Application x:Class="GUI.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Application.Resources>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="AliceBlue"></Setter>
            <Setter Property="Margin" Value="20,20,20,20"></Setter>
            <Setter Property="FontStyle" Value="Italic"></Setter>
        </Style>
    </Application.Resources>
</Application> 
```

在我发现的所有应用程序范围样式的示例中，这就是他们所说的方式，但它对我不起作用。我究竟做错了什么？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:20:38.647

我自己解决了这个问题，问题是我没有使用该`StartUpUri`属性来打开我的初始应用程序视图，我更改了我的启动过程，所以它确实使用了这个属性，这解决了我的问题。

我的 App.xaml 现在看起来像这样：

```
<Application x:Class="GUI.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="/Views/Application/SplashView.xaml">
    <Application.Resources>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="Aqua"></Setter>
        </Style>
    </Application.Resources>
</Application> 
```

谢谢，亚历克斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-26T20:55:49.473

尽管这是一个旧帖子并已得到答复。我遇到了这个问题。我删除`StartupUri`并添加了空样式（我以问题为例）：

```
<Application x:Class="GUI.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Application.Resources>
        <!-- Added blank style first -->
        <Style TargetType="Rectangle" />
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="AliceBlue"></Setter>
            <Setter Property="Margin" Value="20,20,20,20"></Setter>
            <Setter Property="FontStyle" Value="Italic"></Setter>
        </Style>
    </Application.Resources>
</Application> 
```

# javascript - 具有字符限制的 Javascript 正则表达式白名单

> ID：10943215
> 
> 赞同：1
> 
> 时间：2012-06-08T04:51:17.113
> 
> 标签：javascript, regex, whitelist, character-limit

我正在尝试向此白名单正则表达式方法添加字符限制子句

```
str = str.replace(/[^A-Za-z-_0-9 ]/g, ""); 
```

有可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:53:07.400

使用量词指定限制。

如果您想要一个最大值（例如 10 个），请执行以下操作：

```
str = str.replace(/[^A-Za-z-_0-9 ]{,10}/g, ""); 
```

最低限度：

```
str = str.replace(/[^A-Za-z-_0-9 ]{10,}/g, ""); 
```

一个范围：

```
str = str.replace(/[^A-Za-z-_0-9 ]{8,10}/g, ""); 
```

准确数量：

```
str = str.replace(/[^A-Za-z-_0-9 ]{10}/g, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:02:19.070

```
str = str.replace(/[^A-Za-z-_0-9\s]/g, "").substring(0,10);  //At most 10 chars 
```

# c# - 在 Asp.net mvc 中更新后删除了 HttpRuntime.Cache

> ID：10943217
> 
> 赞同：0
> 
> 时间：2012-06-08T04:51:23.100
> 
> 标签：c#, asp.net-mvc-3, caching

我`HttpRuntime.Cache`用来重复任务。每个缓存过期都会起作用并创建新的缓存。缓存从`application_start`. 但我有一个问题。

当我更新 Web 应用程序`dll`时，缓存已删除（未过期）和 application_start 将不起作用

我怎么解决这个问题？

如何创建不可删除的缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:38:28.853

当您修改 web.config 或`/bin`目录的内容时，这将导致工作进程重置。因此，您的应用程序实际上会关闭，然后重新启动下一个请求。

ASP.NET 缓存在应用程序重新启动时不持久。如果需要持久缓存，则需要使用外部缓存服务，如 memcache、Velocity、NCache、SharedCache 等。

“application_start 不起作用” 这听起来令人困惑。如果您提供有关该问题的更多详细信息，我也可以尝试提供帮助。

# android - 在android代码中设置代理IP和端口？

> ID：10943218
> 
> 赞同：3
> 
> 时间：2012-06-08T04:51:36.127
> 
> 标签：android, proxy

有没有办法在android应用程序中添加代理IP和端口，以便通过代理路由互联网访问？

从一个链接我得到了信息

try { Settings.System.putString(getContentResolver(),
Settings.System.HTTP_PROXY, "127.0.0.1:100");//启用代理 }catch (Exception ex){ }

但是通过尝试这个系统变量不能解决吗？

请帮忙！！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:00:29.723

```
HttpURLConnection con =null;

URL url = new URL("xxxxx");

Proxy proxy=new Proxy(java.net.Proxy.Type.HTTP, new InetSocketAddress(android.net.Proxy.getDefaultHost(),android.net.Proxy.getDefaultPort()));

con = (HttpURLConnection) url.openConnection(proxy); 
```

这个可以吗？

# jython - 从字符串和整数列表中删除所有字符串

> ID：10943219
> 
> 赞同：0
> 
> 时间：2012-06-08T04:51:40.490
> 
> 标签：jython

给你： list1 = [2, "berry", "joe", 3, 5, 4, 10, "happy", "sad"]

想要返回 [2, 3, 5, 4, 10]

是否可以只从列表中删除字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:10:54.927

使用[列表理解](http://www.jython.org/jythonbook/en/1.0/DataTypes.html#list-comprehensions)，您可以仅使用您想要的元素构建另一个列表。

```
>>> list1 = [2, "berry", "joe", 3, 5, 4, 10, "happy", "sad"]
>>> [i for i in list1 if isinstance(i, int)]
[2, 3, 5, 4, 10] 
```

例如，如果您也有浮点数并希望保留它们，则可以选择：

```
>>> list1 = [2, "berry", "joe", 3, 5, 4, 10.0, "happy", "sad"]
>>> [i for i in list1 if not isinstance(i, str)]
[2, 3, 5, 4, 10.0] 
```

# java - 如何根据数据换出小部件元素

> ID：10943224
> 
> 赞同：1
> 
> 时间：2012-06-08T04:52:21.337
> 
> 标签：java, google-app-engine, gwt, requestfactory

我们有一个使用**RequestFactory**、**Editor Framework**和**UiBinder**的 GWT 项目。使用 RequestFactory 从服务器加载数据后，我们会根据数据中的状态确定页面是否应为只读。

此时我想渲染一个`input`小部件或一个`label`（如果是只读的）。

理想情况下，我会根据数据交换小部件的渲染，但是在加载数据时，渲染端看起来已经完成（基于我已经完成的调试）。

我不想在页面上有两个小部件，其中一个是隐藏的。这已经给我们带来了问题，隐藏的数据覆盖了其他数据，更不用说 DOM 中小部件数量的两倍了。

到目前为止，一个想法是在收到数据时删除FromParent()。有一个更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:46:05.890

**我的第一个想法是...**

*仅适用于输入字段和文本区域。如果您有下拉菜单、单选框或复选框，则它不起作用...*

...通过css设置输入字段的样式，使其看起来不像一个（删除边框和背景颜色应该这样做），如果它是只读的，则禁用它。如果它不是只读的，则删除 css 类，因此它看起来像一个普通的输入字段并使其可编辑。

像这样的东西：

```
<style>
.label {
    background-color: white;
    border: 0px;
    color: black;
}
</style>

<input type="text" class="label" disabled value="Read only data"/>
<input type="text" value="Editable data"/> 
```

**另一个想法是..**

我使用 GWT 已经有一段时间了。但是，您不能在获取数据的 rcp 调用的回调中添加小部件吗？

像这样的东西：

在 ui Binder 中，您只有数据的容器。

在一种方法中，您将数据绘制为容器中的标签或输入字段，具体取决于您获得的数据。您在数据请求的回调中调用此方法。

# android - 单击时侦听器调用了两次

> ID：10943227
> 
> 赞同：7
> 
> 时间：2012-06-08T04:52:28.057
> 
> 标签：android, android-widget

我知道这很容易，但我只是无法调试它。

我正在动态创建 3 个 LinearLayouts 并将它们添加到滚动视图中。我在 3 个线性布局的顶部添加了一个按钮“ins”。

问题是在单击 ins 按钮时，其 on clicklistener 被调用了 3 次。代码：

```
package com.integrated.mpr;

import android.app.Activity;
import android.app.Dialog;
import android.util.Log;
import android.util.TypedValue;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class Page1 extends Activity implements OnClickListener{

    static int pos = new Choose().n;
    static String partname;

    int i;
    int[][] id = new int[pos][5];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        int p =0;
        for(int i =0;i<3;i++){
            for(int j =0;j<5;j++){

                p++;
            }
        }

        ScrollView sv = new ScrollView(this);

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        int resid = getResources().getIdentifier("background", "drawable", getPackageName());
        ll.setBackgroundResource(resid);

        Button ins = new Button(this);
        ins.setText("Instructions");
        ins.setOnClickListener(this);
        ins.setId(5000);

        ll.addView(ins);

        for(i =0;i<3;i++){

            LinearLayout llay = new LinearLayout(this);
            llay.setOrientation(LinearLayout.VERTICAL);

            TextView tv = new TextView(this);
            tv.setText("enter the " +(i+1)+" position name");

            EditText et = new EditText(this);
            et.setId(id[i][0]);

            Button starta = new Button(this);
            starta.setText("Record 1");
            starta.setId(id[i][1]);
            starta.setOnClickListener(this);

            Button startb = new Button(this);
            startb.setText("Record 2");
            startb.setId(id[i][2]);
            startb.setOnClickListener(this);

            Button startc = new Button(this);
            startc.setText("Record 3");
            startc.setId(id[i][3]);
            startc.setOnClickListener(this);

            Button stop = new Button(this);
            stop.setText("Submit");
            stop.setId(id[i][4]);
            stop.setOnClickListener(this);

            TextView tv1 = new TextView(this);
            tv1.setVisibility(llay.INVISIBLE);

            llay.addView(tv);
            llay.addView(et);
            llay.addView(starta);
            llay.addView(startb);
            llay.addView(startc);
            llay.addView(stop);
            llay.addView(tv1);
            ll.addView(llay);

        }
        Button bcon = new Button(this);
        bcon.setText("Continue");
        bcon.setId(10000);
        bcon.setOnClickListener(this);
        ll.addView(bcon);

        sv.addView(ll);

        this.setContentView(sv);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

            if(v.getId()==5000){    
            Log.d("ins", "called");
            Context mContext = Page1.this;
            Dialog dialog = new Dialog(mContext);
            dialog.setTitle("Instructions");
            dialog.setContentView(R.layout.instructiondialog);
            dialog.show();

            }

        }
    }

} 
```

我肯定知道，OnCreate 的代码中存在一些问题，但它是什么？请帮忙

谁能进一步解释如何设置按钮对齐屏幕右侧，即如何设置其布局重力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:06:30.707

我不确定您到底想实现什么。但是您可以设置标志。如果标志值为 1，则仅处理 onClick 否则不处理。

下面的片段会帮助你。

是的，但您必须以某种方式将该标志重置为 1。

```
 @Override
        public void onClick(View v) 
           {
            // TODO Auto-generated method stub

                if(v.getId()==5000)
                {    
                if(flag)
                 {
                   Log.d("ins", "called");
                   Context mContext = Page1.this;
                   Dialog dialog = new Dialog(mContext);
                   dialog.setTitle("Instructions");
                   dialog.setContentView(R.layout.instructiondialog);
                   dialog.show();
                 }
                flag=0;
                }
             } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:07:33.703

您也可以像这样调用按钮单击事件

```
Button ins = new Button(this);
ins.setText("Instructions");
ins.setOnClickListener(this);
ins.setId(5000);

ins.setOnClickListener(new OnClickListener() 
{
    public void onClick(View v) 
    {
        // TODO Auto-generated method stub
        Context mContext = Page1.this;
        Dialog dialog = new Dialog(mContext);
        dialog.setTitle("Instructions");
        dialog.setContentView(R.layout.instructiondialog);
        dialog.show();
    }
}); 
```

# javascript - 使用 JSON 登录时，如何让 Google Adsense 访问登录区域中的页面？

> ID：10943228
> 
> 赞同：0
> 
> 时间：2012-06-08T04:52:40.197
> 
> 标签：javascript, json, login, adsense

我有一个网站，我想在其中包含 Google Adsense 广告，其中广告仅出现在用户登录时可访问的区域内。

在 Google Adsense 界面中，可以进入`Account Settings -> Access and authorization -> Crawler access`并设置一个登录帐户，供 Google 网络爬虫查看登录区域。

但是，可用的三种登录类型`POST`是`GET`和`htaccess`。我已经尝试了所有三个并且没有工作。

在我的例子中，用户通过访问一个名为 login.html 的页面登录，他们在其中输入他们的登录信息，然后按下一个由 Javascript 驱动的按钮。它将 JSON 数据发送到服务器，如果用户没问题，则将他们重定向到不同的页面。

我看不出是否有办法配置 Adsense 来处理这个问题。当我测试登录访问时，它只显示我的登录屏幕，这似乎表明它停在那里并且实际上并没有访问受限制的页面。

我可以做些什么来确保 Google Adsense 可以登录，同时保留我的登录方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:04:04.120

这个想法是你发出一个类似于你通常做的**ajax请求的请求。**

`Restricted Directory or URL`: www.example.com/members/

`Login URL`: www.example.com/login.ajax.php

`Login method`: POST 或 GET 取决于您的 ajax 请求的参数是作为 POST 数据还是 GET 数据发送。

`Parameters`：添加您与ajax请求一起发送的所有参数。所以这很可能是一个`usr`和`pwd`参数。如果您使用 usr 和 pwd 发送单个参数，那也很好，因为您可以简单地使用例如文字字符串`data`（取决于您在代码中调用它的内容）创建一个参数。`{usr:"adsense_username",pwd:"password"}`

如果您无法弄清楚，请复制执行 ajax 请求的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T08:51:53.323

好吧，我猜您是在同一个域中登录，而 adsense 正在从不同的域中执行 Json。我建议你 JsonP。它将跨域工作

# codeigniter - 在当前控制器中包含另一个控制器

> ID：10943230
> 
> 赞同：0
> 
> 时间：2012-06-08T04:53:06.913
> 
> 标签：codeigniter

我是 codeignitor 的新手，因为将我的网站分成三个，如页眉、正文、页脚我已经创建了页眉和页脚控制器并查看页面。我面临一个问题，如何将两个控制器都包含在 body 控制器中，如 include('.php')在php中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:46:05.973

您页面的 html 应该在视图中，而不是在控制器中。

您的选择是；

1）为每个部分创建一个视图，然后从控制器中调用它们

```
class Foo extends CI_Controller {
public function index() {
    $data = array(); // put data in here
    $this->load->view('header', $data);
    $this->load->view('main, $data);
    $this->load->view('footer', $data);
} 
```

2）从主要内容视图调用其他视图

```
// in view for html page
<?php $this->load->view('header'); ?>
<h1>My Page</h1>
<?php $this->load->view('footer'); ?> 
```

3）或使用模板库，例如[这个](http://williamsconcepts.com/ci/codeigniter/libraries/template/)

如果您真的想在控制器路由中关闭控制器，请查看[hmvc for codigniter](http://codeigniter.com/wiki/Modular_Extensions_-_HMVC)

# iphone - 如何使用可可触摸进行无限滚动图像

> ID：10943233
> 
> 赞同：1
> 
> 时间：2012-06-08T04:53:12.293
> 
> 标签：iphone, ios, cocoa-touch, infinite-scroll

我想添加无限滚动图像，并且图像滚动没有尽头：

```
const CGFloat kScrollObjHeight  = 200.0;
const CGFloat kScrollObjWidth   = 320.0;
const NSUInteger kNumImages     = 17;

- (void)layoutScrollImages
{
    UIImageView *view = nil;
    NSArray *subviews = [scrollview1 subviews];
    CGFloat curXLoc = 0;

    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;
            curXLoc += (kScrollObjWidth);
        }
    }

    [scrollview1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scrollview1 bounds].size.height)];
}

-(void)viewDidLoad
{
    self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];
    [scrollview1 setBackgroundColor:[UIColor blackColor]];
    [scrollview1 setCanCancelContentTouches:NO];
    scrollview1.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scrollview1.clipsToBounds = YES;
    scrollview1.scrollEnabled = YES;
    scrollview1.pagingEnabled = YES;

    for(int i=0;i< kNumImages;i++)
    {
        NSString *imgName=[[NSString alloc] initWithFormat:@"head%d.png",i];
        UIImage *img=[UIImage imageNamed:imgName];
        UIImageView *imageView=[[UIImageView alloc] initWithImage:img];

        [imageView setFrame:CGRectMake(i* kScrollObjWidth, 0, kScrollObjWidth,kScrollObjHeight)];
        [scrollview1 addSubview:imageView];
        [imageView release];
        [imgName release];
    }

    scrollview1.contentSize= CGSizeMake(kScrollObjWidth* kNumImages, kScrollObjHeight);

    [self layoutScrollImages];

    [super viewDidLoad];   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:06:32.330

只需使用 .h 文件创建一个简单的新项目

```
#import <UIKit/UIKit.h>

@interface scrollableImageViewController : UIViewController {

IBOutlet UIScrollView *sview;

}

@end 
```

以及使用此方法的 .m 文件

```
- (void)viewDidLoad {
[super viewDidLoad];

for(int i=0;i<10;i++)
{
    NSString *name=[[NSString alloc] initWithFormat:@"images%d.png",i];
    NSLog(@"%@",name);
    [name    release];
    UIImage *img=[UIImage imageNamed:@"img.png"];
    UIImageView *imageView=[[UIImageView alloc] initWithImage:img];
    [imageView setFrame:CGRectMake(i*57, 0, 57, 57)];
    [sview addSubview:imageView];

    [imageView release];
}
sview.contentSize= CGSizeMake(57*10, 57);
} 
```

并检查结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:01:43.607

您可以查看 Apples 示例代码`PhotoScroller`。
这是他们`WWDC 11` 在 Session 中介绍的代码`104 - Advanced ScrollView Techniques`。如果您是注册的 Apple 开发人员，您可以免费观看此视频（和相应的 PDF）。

# android - 在 Android 应用中使用多个数据库值绘制图形

> ID：10943234
> 
> 赞同：2
> 
> 时间：2012-06-08T04:53:18.357
> 
> 标签：android, sql, view, nullpointerexception, runtimeexception

我目前正在使用 afreechart 在我的 Android 应用程序中绘制图表。我正在使用他们在示例应用程序中举例说明的 TimeSeries 图表。对我来说，要从两个数据库中提取数据。两个问题： 1\. 如何使用我的两个数据库中的值绘制这个时间序列图？2\. 整个图表并不像人们想要的那样平滑。特别是在滚动或轻弹时。因此，它与应用程序设计不一致。有什么办法可以让它更流畅吗？

如果上面的问题似乎没有必要或在某种程度上是错误的，请指出我可以使用多个数据库值绘制图形的方法，即使它不使用 afreechart。谢谢。

我尝试在 createDataset() 中使用简单的“for”循环，例如：

```
private static XYDataset createDataset() {

 mfirstDbHelper.open();
     msecondDbHelper.open();

     int firstdb_count = (int) DatabaseUtils.queryNumEntries(mfirstDbHelper.mDb,firstDbAdapter.DATABASE_TABLE);
     int seconddb_count = (int) DatabaseUtils.queryNumEntries(msecondDbHelper.mDb,secondDbAdapter.DATABASE_TABLE);

     TimeSeriesCollection dataset = new TimeSeriesCollection();

     for(int i=1;i<=seconddb_count;i++){
         Cursor seconddb = msecondDbHelper.fetchItem(i);

         TimeSeries s1 = new TimeSeries(seconddb.getString(
                seconddb.getColumnIndexOrThrow(secondDbAdapter.KEY_ITEMNAME)));

            for(int j=1;j<=firstdb_count;j++){
                    Cursor firstdb = mfirstDbHelper.fetchItem(j);
                    int first_sp_id = Integer.parseInt(firstdb.getString(
        firstdb.getColumnIndexOrThrow(firstDbAdapter.KEY_ID)));

                    if(first_sp_id == i){

                        int value = Integer.parseInt(firstdb.getString(
                                    firstdb.getColumnIndexOrThrow(firstDbAdapter.KEY_VALUE)));
                        String date = firstdb.getString(
                                    firstdb.getColumnIndexOrThrow(firstDbAdapter.KEY_DATE));

                String dateParts[] = date.split("-");
                String day = dateParts[0];
                String month = dateParts[1];
                String year = dateParts[2];
                int d = Integer.parseInt(day);
                int m = Integer.parseInt(month);
                int y = Integer.parseInt(year);

                        s1.add(new Day(d,m,y), value);
                        dataset.addSeries(s1);
                    }
                    firstdb.close();
                }
        seconddb.close();
        }

     mfirstDbHelper.close();
     msecondDbHelper.close();

     return dataset;

}
} 
```

我已将示例中的 Month() 更改为 Day()，并确保该区域没有错误。我收到错误：

```
ERROR/AndroidRuntime(706): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kev/com.kev.MyProject}: java.lang.NullPointerException 
```

此外，很明显，这段代码一遍又一遍地重绘图形“s1”。我不知道如何克服这个问题，以及错误。我对编程还是相当陌生，尤其是 Android 应用程序开发，所以上面的任何错误，请随意打我的脑袋并更正我的代码。

哦，还有一件事，我不能使用 startManagingCursor() 因为它是 DemoView 而不是 Activity。所以，不知道它是否会导致任何问题。

Afreechart 时间序列示例： [http ://code.google.com/p/afreechart/source/browse/#svn%2Ftrunk%2Fafreechart_sample%2Fsrc%2Forg%2Fafree%2Fchart%2Fdemo](http://code.google.com/p/afreechart/source/browse/#svn%2Ftrunk%2Fafreechart_sample%2Fsrc%2Forg%2Fafree%2Fchart%2Fdemo)

Afreechart TimeSeries 示例 - 查看： [http ://code.google.com/p/afreechart/source/browse/trunk/afreechart_sample/src/org/afree/chart/demo/view/TimeSeriesChartDemo01View.java](http://code.google.com/p/afreechart/source/browse/trunk/afreechart_sample/src/org/afree/chart/demo/view/TimeSeriesChartDemo01View.java)

感谢你的宝贵时间。:)

# wordpress - 我在哪里可以找到好的 WordPress 面试问题和答案？

> ID：10943235
> 
> 赞同：-1
> 
> 时间：2012-06-08T04:53:21.393
> 
> 标签：wordpress

任何人都可以帮助我获得好的 WordPress 面试问题和答案。
任何链接或资源？

请回复，因为我无法得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:18:08.940

你可以在这里得到大量的问题和（很好的）答案，[https://stackoverflow.com/questions/tagged/wordpress?sort=frequent](https://stackoverflow.com/questions/tagged/wordpress?sort=frequent)。你自己看看，你能回答多少。

除此之外，我要补充两个问题：什么是 wordpress？你不能用wordpress做什么？

# ios - 打开 iPhone/iPad 设置面板

> ID：10943237
> 
> 赞同：0
> 
> 时间：2012-06-08T04:53:34.773
> 
> 标签：ios, xcode, settings

我的应用程序需要打开 iPhone/iPad“邮件、联系人、日历”设置面板并自动滚动以查看默认日历设置行的功能。任何样品或想法？

我会把它放在 IBAction 下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T05:12:45.383

在 iOS 5 中，以编程方式将 Settings.app 启动到特定设置面板的 URL 方案曾短暂公开（尽管我不确定它是否被记录）。但是，在 iOS 5.1 中，第三方应用程序的功能已被禁止。就目前而言，目前无法从最新版本的操作系统上的第三方应用程序执行此操作 - 至少，不会以不会让您的应用程序被 App Store 拒绝的方式。可能有一种越狱方式可以做到这一点，但我不涉足那个，所以我不知道。

# c++ - 不能继承的东西

> ID：10943241
> 
> 赞同：4
> 
> 时间：2012-06-08T04:53:56.790
> 
> 标签：c++, inheritance

我被要求说出三个不能从基类继承的东西。

除了私有成员函数，我还能添加什么？

我考虑过友元函数，但由于它们实际上不属于该类，因此它们与继承无关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T05:38:58.443

您通常关心的一些明显的对象是构造函数、赋值运算符和析构函数。

在所有这些情况下，特定于派生类的新版本要么由用户提供，要么由编译器合成（尽管 C++11 还添加了一些功能，例如简单地删除你不想要的类） .

我可能应该补充一点，“不能被继承”不一定完全正确。例如，C++11 添加了继承构造函数（但它们不在 C++98/03 中，这是大多数课程仍在处理的内容）。即使在 C++11 中，默认情况下也不会继承它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:01:23.653

私有成员变量和私有基。您也不能继承模板参数、COM __uuids 以及该类是否从 DLL 导出。

赋值运算符不能被继承。

# c# - 在 .NET FX 4.5 中使用验证实现演示

> ID：10943247
> 
> 赞同：0
> 
> 时间：2012-06-08T04:54:29.163
> 
> 标签：c#, wpf, validation, .net-4.5, .net-framework-version

我很惊讶 MS 实现了一项新功能：使用 INotifyDataErrorInfo 进行验证

我听说这个验证类有这么大的改进，所以我想用 WPF 来实现这个，但是在 MSDN 中我找不到官方示例演示来理解这个接口。

如果你有，可以提供给我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:01:01.530

这可能会有所帮助。

[异步数据验证](http://www.jonathanantoine.com/2011/09/18/wpf-4-5-asynchronous-data-validation/)

[4.5 中的异步验证](http://anthymecaillard.wordpress.com/2012/03/26/wpf-4-5-validation-asynchrone/)

# perl - 删除链表的头部不是主要的哈希结构吗？

> ID：10943248
> 
> 赞同：0
> 
> 时间：2012-06-08T04:54:45.867
> 
> 标签：perl, hash, linked-list

另一个数据结构疑问。我会直截了当。这就是我所拥有的

```
use strict;
use warnings;
use Data::Dumper;

my $head= undef;
my $tail=\$head;

open FILE, "<datastored.txt" or die $!;

while (<FILE>){
    my $node = {
                "data" => $_ , 
                "next" => undef
            };
    $$tail=$node; 
    $tail = \${$node->{"next"}}; 
};

# #1# Print full list #
print Dumper $head;

# #2# Delete the first node and display data of next node #
$head = $head->{next};
my $value = $head->{data}; 
```

这是我得到的输出

```
$VAR1 = {
          'next' => \{
                        'next' => \{
                                      'next' => \{
                                                    'next' => \undef,
                                                    'data' => 'line 4'
                                                  },
                                      'data' => 'line 3
'
                                    },
                        'data' => 'line 2
'
                      },
          'data' => 'line 1
'
        };
Not a HASH reference at linkedlist.pl line 32, <FILE> line 4\. **<<<< My Problem and hence my question?** 
```

注意 - 文件的内容`datastored.txt`很简单

```
line 1
line 2
line 3
line 4 
```

如果我看`$head`最初的打印结果，它显然是一个散列中的散列等等，那么为什么删除第一个节点后数据结构的完整性受到阻碍？*（请参阅输出最后一行的错误）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:03:42.950

> 它显然是散列中的散列，依此类推

实际上，显然不是。每个 next 都包含对哈希引用的引用，而不是对哈希的引用。注意所有的“ `\`”？你应该看到

```
$VAR1 = {
  'next' => {
    'next' => {
      'next' => {
        'next' => undef,
        'data' => 'line 4'
      },
      'data' => 'line 3'
    },
    'data' => 'line 2'
  },
  'data' => 'line 1'
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T05:04:50.730

Perl 引用很棘手。转储程序输出表示法`\{`显示`{next}`字段包含对哈希引用的引用。

违规行是对`tail`. 尝试

```
$tail = \$node->{"next"}; 
```

# c - 找出是什么使 C 程序变慢的工具？

> ID：10943251
> 
> 赞同：7
> 
> 时间：2012-06-08T04:55:19.413
> 
> 标签：c, performance, time

我有一个由几个 .h 和 .c 文件和许多函数组成的程序。还有调用其他函数的函数等等。现在，这实际上是一项任务，所以我知道程序需要多少时间才能完成。

问题是，与给定的时间相比，我的程序花费了太多时间。是否有可能找出哪个函数花费了太多时间或代码的哪个部分阻碍了程序？

* * *

我没有在这里给出代码，因为它太长了。我知道没有人能回答为什么“我的程序”很慢，但我说的是一般！是否有一个工具可以测量每个功能需要多少时间或类似的东西？我正在使用 gcc，我在 Linux 上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T05:10:11.067

由于您使用的是 linux，因此您可能已经`gprof`安装了分析器。最基本的用法`gprof`是通过`-pg`选项编译（`-g`也需要选项来获得信息输出）。例如

```
> gcc -g -pg -o my_executable my_file.c 
```

现在，您可以正常运行程序了。然后你跑

```
> gprof my_executable > profile.txt 
```

这会将分析信​​息输出到`profile.txt`. 这个数据看起来有点像

```
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 33.34      0.02     0.02     7208     0.00     0.00  open
 16.67      0.03     0.01      244     0.04     0.12  offtime
 16.67      0.04     0.01        8     1.25     1.25  memccpy
 16.67      0.05     0.01        7     1.43     1.43  write
 16.67      0.06     0.01                             mcount
  0.00      0.06     0.00      236     0.00     0.00  tzset
  0.00      0.06     0.00      192     0.00     0.00  tolower
  0.00      0.06     0.00       47     0.00     0.00  strlen
  0.00      0.06     0.00       45     0.00     0.00  strchr
  0.00      0.06     0.00        1     0.00    50.00  main
  0.00      0.06     0.00        1     0.00     0.00  memcpy
  0.00      0.06     0.00        1     0.00    10.11  print
  0.00      0.06     0.00        1     0.00     0.00  profil
  0.00      0.06     0.00        1     0.00    50.00  report

[...] 
```

并且您可以读取有关每个函数的一些数据（例如`open`，被调用了 7208 次，执行它花费了 0.02 秒。）。[该示例数据是从本指南](http://www.cs.utah.edu/dept/old/texinfo/as/gprof_toc.html)中借来的，您应该阅读该指南，因为它提供了更多解释并描述了如何操作分析以获得诸如逐行分析之类的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:13:50.407

正如上面 dbaupp 所建议的，gprof 是 linux 的优秀工具。除此之外，如果您有权访问[IBM Rational Quantify](http://www-01.ibm.com/software/awdtools/purifyplus/unix/)，您也可以尝试。它是一个商业工具，但提供了需要更多时间的功能和调用流程等的良好图形视图。

# c# - 在 C# 中创建 GUI 并在 VBScript 中调用

> ID：10943253
> 
> 赞同：0
> 
> 时间：2012-06-08T04:55:36.010
> 
> 标签：c#, vbscript, interop, activex, com-interop

我尝试用 C# 制作一个带有 COM 可见的 ActiveX。它是一个 Windows 窗体。我成功地将它构建为一个 dll ActiveX，然后我编写了一个 VBScript 代码来调用它。from出现了，但在那之后就消失了。我不知道为什么@@这是我的代码：

C# 代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using Microsoft.Win32;
using System.Reflection;

namespace ActiveXTestLibrary
{
    [ProgId("ActiveXTestLibrary.UserControl")]
    [ClassInterface(ClassInterfaceType.AutoDispatch)]
    [ComVisible(true)] 
    public partial class UserControl1 : Form
    {
        public UserControl1()
        {
            InitializeComponent();
        }

        [ComVisible(true)]
        public void Hello()
        {
            this.Show();
        }

        private void radButton1_Click(object sender, EventArgs e)
        {
            this.lblResult.Text = "I am a .NET user control happily living \ninside an ActiveX container. Cheers.";
        }

        [ComRegisterFunction()]
        public static void RegisterClass(string key)
        {
            StringBuilder sb = new StringBuilder(key);
            sb.Replace(@"HKEY_CLASSES_ROOT\", "");

            RegistryKey k = Registry.ClassesRoot.OpenSubKey(sb.ToString(), true);

            RegistryKey ctrl = k.CreateSubKey("Control");
            ctrl.Close();

            RegistryKey inprocServer32 = k.OpenSubKey("InprocServer32", true);
            inprocServer32.SetValue("CodeBase", Assembly.GetExecutingAssembly().CodeBase);
            inprocServer32.Close();

            k.Close();
        }

        [ComUnregisterFunction()]
        public static void UnregisterClass(string key)
        {
            StringBuilder sb = new StringBuilder(key);
            sb.Replace(@"HKEY_CLASSES_ROOT\", "");

            RegistryKey k = Registry.ClassesRoot.OpenSubKey(sb.ToString(), true);

            if (k == null)
            {
                return;
            }
            k.DeleteSubKey("Control", false);

            RegistryKey inprocServer32 = k.OpenSubKey("InprocServer32", true);

            inprocServer32.DeleteSubKey("CodeBase", false);

            inprocServer32.Close();
        }
    }
} 
```

和 VBScript：

```
Sub main
    set objTest = CreateObject("ActiveXTestLibrary.UserControl")
    objTest.Hello
end sub

call main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:00:54.370

要显示表单，您需要通过调用[Application.Run](http://msdn.microsoft.com/en-us/library/ms157902.aspx)来启动消息循环：

```
[ComVisible(true)]
public void Hello()
{
    Applicaiton.Run(this);
} 
```

Show() 函数将显示表单并立即退出。 `Application.Run()`在表单关闭之前不会退出。

# iis-6 - 需要关闭详细报告以符合 PCI 合规性

> ID：10943257
> 
> 赞同：0
> 
> 时间：2012-06-08T04:56:08.153
> 
> 标签：iis-6, pci-compliance

PCI 合规团队通知我们，我们失败了，因为“详细报告”已开启。我以前从未听说过。我们有一个 IIS6 服务器。我们没有运行水晶报告或任何类似的东西。我在 II6 中找不到任何称为详细报告的项目。有谁知道详细报告是什么，更重要的是如何关闭它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:19:48.667

问题是服务器上名为“Event Sentry”的软件（不确定拼写是否正确）。我还没有从服务员那里得到完整的细节，当我知道更多时我会添加更多。但是，我认为最好告诉这个问题，以防其他人有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:58:02.567

IIS 6 中详细程度的文档位于[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d87ac473-eddb-4f7e-9a91-ce9f168b5635.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d87ac473-eddb-4f7e-9a91-ce9f168b5635.mspx?mfr=true)

它们可以通过 Provider 文件进行管理。文档位于：[http ://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/991e07c3-4143-48cc-ab39-8d49065a8388.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/991e07c3-4143-48cc-ab39-8d49065a8388.mspx?mfr=true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T04:59:12.127

他们可能参考 IIS (6) [Logggin Verbosity Levels](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d87ac473-eddb-4f7e-9a91-ce9f168b5635.mspx?mfr=true)

5 级是**详细**的：

> IIS 提供程序报告有关请求的详细信息

# javascript - 从另一个 js 文件中引用 js 文件

> ID：10943263
> 
> 赞同：1
> 
> 时间：2012-06-08T04:57:11.850
> 
> 标签：javascript, jquery, ajax, refresh

**jQuery**

我正在使用以下内容从另一个 js 文件加载 js 文件。

```
$.getScript("js/keys.js"); 
```

由于 ajax 调用，我从**key.js**中删除了一些事件处理程序。所以为了这个目的，我使用上面提到的代码重新加载**keys.js**，以便我删除的偶数处理程序可用。它工作正常；但是

我希望当我回忆**key.js**时，它只重新加载不在缓存中的那段代码，因为它重置了变量的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:57:52.053

我会建议不要重新加载**key.js**文件，只需激活/调用您已删除的事件处理程序。

而不是编写以下代码：

```
$.getScript("js/keys.js"); 
```

像这样替换它：（一个例子）

```
$("#name").click(function(){

}); 
```

希望它会帮助你。

# python - 使用机械化登录

> ID：10943264
> 
> 赞同：0
> 
> 时间：2012-06-08T04:57:21.413
> 
> 标签：python, mechanize

我正在尝试使用库 Mechanize 登录。这是我运行时得到的输出

```
for f in br.forms():
    print f 
```

输出

```
 <login_form1 POST https://www.box.com/login application/x-www-form-urlencoded
  <TextControl(login=)>
  <PasswordControl(password=)>
  <HiddenControl(_pw_sql=) (readonly)>
  <CheckboxControl(remember_login=[*on])>
  <HiddenControl(__login=1) (readonly)>
  <HiddenControl(reg_step=) (readonly)>
  <HiddenControl(submit1=1) (readonly)>
  <HiddenControl(folder=) (readonly)>
  <HiddenControl(skip_framework_login=) (readonly)>
  <HiddenControl(login_or_register_mode=login) (readonly)>
  <HiddenControl(new_login_or_register_mode=) (readonly)>
  <SubmitControl(<None>=) (readonly)>>
<google_apps_login_form POST https://www.box.com/sso/google_apps application/x-www-form-urlencoded
  <TextControl(google_apps_domain=Enter Domain Name)>
  <CheckboxControl(google_apps_non_enterprise=[on])>> 
```

现在登录到我做的页面，

```
br.form['login']='USERNAME'
br.form['password']='PASSWORD' 
```

但是响应仍然显示我还没有登录。

我在某个地方出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:06:11.753

好吧，从外观上看，您错过了`br.submit()`（看来您没有跳过`br.select_form(nr=0)`登录表单）。只有在您登录之后。基本上您只是填写了您的用户名和密码，但没有按回车键。

# asp-classic - 第 0 行多步 OLE DB 操作生成错误。检查每个 OLE DB 状态值（如果可用）。没有工作

> ID：10943267
> 
> 赞同：0
> 
> 时间：2012-06-08T04:58:03.893
> 
> 标签：asp-classic, vbscript, oledb

我继承了一些旧的 asp/vb 代码，它抛出了一个我找不到修复的错误。

服务器是 Windows Server 2008，运行 IIS7，SQL 服务器是 2008。

这是代码：

```
<% @ Language=VBScript %>
<!-- #include file="dsn.asp" -->
<!-- #include file="adovbs.inc" -->
<!-- #include file="libfunct.asp" -->

<%
'****************************************
'    VARIABLES DECLARATION
'****************************************
Dim sSql, RsInsCoInfo, PolicyID, InsCo, InsOffice
Dim qsPolicyType, qsAttach, qsCLNT_ID, qsClientID
Dim CostArray(10)
Dim DescriptionArray(10)
'****************************************
'    END VARIABLES DECLARATION
'****************************************

'********************************************
'    RETRIEVING THE QUERYSTRINGS
'********************************************
qsAttach     = Request.QueryString("Attach")
qsCLNT_ID    = Request.QueryString("CLNT_ID")
qsClientID   = Request.QueryString("ClientID")
qsPolicyType = Request.QueryString("PolicyType")
qsReQuote    = Request.QueryString("ReQuote")
qsPolicyID   = Request.QueryString("PolicyID")
'********************************************
'    END RETRIEVING THE QUERYSTRINGS
'********************************************

'**********************************************
' RETRIEVING THE INSURANCE COMPANY DETAILS
'**********************************************
'Get the insurance company details
Set RsInsCoInfo  = Server.CreateObject("ADODB.RecordSet")

sSQL = "SELECT InsuranceCo.*,FormPolicy.* FROM insuranceCo,FormPolicy"
sSQL = sSQL & " WHERE FormPolicy.INS_EF <= CONVERT(smalldatetime,'" & dbSaveDate(Date) & "',101)"
sSQL = sSQL & " And FormPolicy.INS_ET >= convert(smalldatetime,'" & dbSaveDate(Date) & "',101)"
sSQL = sSQL & " AND FormPolicy.PolicyType ='"  & qsPolicyType & "'"
sSQL = sSQL & " AND InsuranceCo.INS_ID = FormPolicy.INS_ID"

'response.write ssql
'response.end
RsInsCoInfo.Open sSQL, OLEDBConnStr, adOpenStatic, adLockReadOnly, adCmdText

If Not RsInsCoInfo.EOF then
    InsOffice = RsInsCoInfo("INS_Office")
    InsCo     = RsInsCoInfo("INS_DS")
Else
    Response.write "<b>No underwriter available.  Please contact the system administrator.<br>"
    Response.write sSQL
    Response.end
End if

'Close and free
RsInsCoInfo.close
Set RsInsCoInfo = Nothing
'**********************************************
' END RETRIEVING THE INSURANCE COMPANY DETAILS
'**********************************************

'*********************************************************************************
'              CLIENT SEQUENCE NUMBER INCREMENT FOR THIS POLICY TYPE
'*********************************************************************************
If Not qsReQuote Then
   newPolicyNumber = qsClientID & qsPolicyType
   Set RsSequence    = Server.CreateObject("ADODB.RecordSet")
   sSQL = "SELECT * FROM Policy WHERE PolicyNumber like '%" & newPolicyNumber & "%' AND Clnt_ID=" & qsCLNT_ID
   RsSequence.Open sSQL, OLEDBConnStr, adOpenStatic, adLockReadOnly, adCmdText
   If RsSequence.recordcount > 0 then
       PolicyID = 00
       While not RsSequence.eof
          If right(RsSequence("PolicyNumber"), 2) > PolicyID then
             PolicyID = Cstr(right(RsSequence("PolicyNumber"), 2))
                response.write PolicyID & "<br>"
          End if
          RsSequence.moveNext
       Wend
       PolicyID = PolicyID + 1
       If PolicyID < 10 then
          PolicyID = "0" & CStr(PolicyID)
       End If
   Else
      PolicyID = "01"
   End If
   RsSequence.close
   SET RsSequence = NOTHING
End If
'*********************************************************************************
'             END CLIENT SEQUENCE NUMBER INCREMENT FOR THIS POLICY TYPE
'*********************************************************************************

'*********************************************************************************
'             UPDATING ADDITIONNAL FIELD TO THE QUOTE CREATION
'*********************************************************************************
'Setting var
Dim strConnection, SQL_Upsate, newPolicyNumber
newPolicyNumber = qsClientID & qsPolicyType & PolicyID

If Not qsReQuote Then
   'Insert Sql Statement
   SQL_Update = "UPDATE Policy SET CLNT_ID=" & qsCLNT_ID & ","
   SQL_Update = SQL_Update & " InsuranceCo='"& InsCo & "',"
   SQL_Update = SQL_Update & " Office='"& InsOffice & "',"
   SQL_Update = SQL_Update & " StatusID="& 0 & ","
   SQL_Update = SQL_Update & " PolicyNumber='" & newPolicyNumber & "'"
   SQL_Update = SQL_Update & " WHERE PolicyID=" & qsAttach
Else
   'Insert Sql Statement
   SQL_Update = "UPDATE Policy SET CLNT_ID=" & qsCLNT_ID & ","
   SQL_Update = SQL_Update & " InsuranceCo='"& InsCo & "',"
   SQL_Update = SQL_Update & " Office='"& InsOffice & "',"
   SQL_Update = SQL_Update & " StatusID="& 0
   SQL_Update = SQL_Update & " WHERE PolicyID=" & qsPolicyID
End If

'Connection object and open the db
Set strConnection = Server.CreateObject("ADODB.Connection")
strConnection.Open OLEDBConnStr

' Executing the sql insert
strConnection.Execute SQL_Update

'Now Close the connection and free up
strConnection.Close
Set strConnection = Nothing

'*********************************************************************************
'               END ADDING ADDITIONAL FIELDS TO THE QUOTE CREATION
'*********************************************************************************

'*********************************************************************************
'                               DO CALCULATION
' - obtains file named Policy & 'Calculations.inc' = HHCalculations.inc etc.
'
' Modified by Stuart 20/5/03
'*********************************************************************************
set Rs = Server.CreateObject("ADODB.Recordset")

If Not qsReQuote Then
   sSQL = "SELECT Policy.* FROM Policy WHERE Policy.PolicyID=" & qsAttach
Else
   sSQL = "SELECT Policy.* FROM Policy WHERE Policy.PolicyID=" & qsPolicyID
End If

Rs.Open sSQL, OLEDBConnStr, adOpenkeyset, adLockPessimistic, adCmdText

'********************************************
'Response.write "<B>Policy table For Testing Only<P></b>"
'For Each fld in Rs.fields
'   Response.write fld.name & " = " & fld.value & "<br>"
'Next
'Response.end
'**********************************************

    Agent = 0
    Agent2 = 0
    AgentIntro = 0

'Open rsAccount for writing account entries to the PolicyAmount table
'** Comment derek to Stuart -> wont we be better here to find the agent with the code?

If Session("Agent") <> "" then
    set RsAgent = Server.CreateObject("ADODB.Recordset")
    sSQL = "Select * from Agents Where Name = '" & Session("Agent") & "'"
    RsAgent.Open sSQL, OLEDBConnStr, adOpenkeyset, adLockPessimistic, adCmdText
    Agent = rsAgent("commission")
End if

'If a park was involved for a new business then the introductory rate is required.
If Session("Village_Name") <> "" then
    set RsPark = Server.CreateObject("ADODB.Recordset")
    If IsNumeric(Session("Village_Name")) Then
       sSQL = "Select * from Park Where ParkID = '" & Session("Village_Name") & "'"
    Else
       sSQL = "Select * from Park Where ParkID = '" & Session("reParkID") & "'"
    End If
    RsPark.Open sSQL, OLEDBConnStr, adOpenkeyset, adLockPessimistic, adCmdText
    If RsPark.eof then
        Response.write "<b>" & ssql & "<P>No Park record found - Line 189 QuoteSave2.asp<P>Please contact you system administrator." 
        'Response.end
    Else
        AgentIntro = RsPark("Introduction")
    End if
End if

set RsAccount = Server.CreateObject("ADODB.Recordset")
set RsQuestions = Server.CreateObject("ADODB.Recordset")

If Not qsReQuote Then
   sSQL = "SELECT * FROM PolicyAmount WHERE PolicyID=" & qsAttach
Else
   sSQL = "SELECT * FROM PolicyAmount WHERE PolicyID=" & qsPolicyID
End If
RsAccount.Open sSQL, OLEDBConnStr, adOpenkeyset, adLockPessimistic, adCmdText

If Not qsReQuote Then
   sSQL = "SELECT * FROM PolicyQuestions WHERE PolicyID=" & qsAttach
Else
   sSQL = "SELECT * FROM PolicyQuestions WHERE PolicyID=" & qsPolicyID
End If

RsQuestions.Open sSQL, OLEDBConnStr, adOpenkeyset, adLockPessimistic, adCmdText

If Not qsRequote Then
   RsAccount.Addnew
End If
If Not qsRequote Then
   RsAccount("PolicyID") = qsAttach
   linkID = qsAttach
Else
   RsAccount("PolicyID") = qsPolicyID
   linkID = qsPolicyID
End If

sTargetFile = qsPolicyType & "Calculations.inc"
sTargetFileContents = GetFileContentsForExecution(sTargetFile)
Execute sTargetFileContents

'*********************************************************************************
'                            END DO CALCULATION
'*********************************************************************************

'*********************************************************************************
'                            WRITE COSTS TO THE TABLE
'*********************************************************************************

'Update data to the PolicyAmount table
RsAccount("PolicyAmount_IB") = Session("Login")

RsAccount("PolicyAmount_IT") = Date
RsAccount.Update

'**********************************************
'Response.write "<P><B>PolicyAmount table For Testing Only<P></b>"

'For Each fld in RsAccount.fields
'   Response.write fld.name & " = " & fld.value & "<br>"
'Next
'Response.write "<P><B><a href='default.asp'>Home</a>"
'Response.end
'***********************************************

'Clean up
RsAccount.Close
Set RsAccount = Nothing
Rs.update
Rs.Close
Set Rs = Nothing
RsQuestions.Close
Set RsQuestions = Nothing
'RsPark.close
'Set RsPark = Nothing

'Finish with this second saving so redirect to the policy page
If Not qsReQuote Then
   Response.redirect "Policy.asp?PolicyID=" & qsAttach & "&CLNT_ID=" & qsCLNT_ID & "&ClientID=" & qsClientID & "&PolicyType=" & qsPolicyType
Else
   Response.redirect "Policy.asp?PolicyID=" & qsPolicyID & "&CLNT_ID=" & qsCLNT_ID & "&ClientID=" & qsClientID & "&PolicyType=" & qsPolicyType
End If

%> 
```

这是错误：“警告：文件 /quotesave2.asp 第 0 行多步 OLE DB 操作生成错误。检查每个 OLE DB 状态值（如果可用）。没有完成任何工作......”

它真的没有给我太多继续，任何帮助/见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:59:36.890

这是经典的，我通过在执行之前将每个命令记录到数据库来处理这些问题。所以例如

```
log(sSql)
RsAccount.Open sSQL, OLEDBConnStr, adOpenkeyset, adLockPessimistic, adCmdText 
```

其中 log(tekst) 是一个子文件，它将传递的文本写入 txt 文件。现在，当您遇到错误执行停止并检查您的日志。最后一个条目是生成错误的 sql。在交互式环境中执行此 sql，您可以轻松地调整文本并重试，并从 dbclient 获得更准确的错误。不知道 Sql Server 是什么，我使用 Oracle，它是 Sql*Plus，我确定 Sql Server 必须有其他人。更正 sql 后，将其粘贴到代码中，用变量替换文字。再次请求您的页面并执行上述操作，直到您的所有 sql 都正确为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T07:07:53.237

首先，您的 SELECT 语句选择了多个具有相同名称的字段，这可能会导致问题。将您的声明更改为：（您可能需要更改 INS_DS 的表，我只是猜到了）

```
sSQL = "SELECT ic.INS_Office, fp.INS_DS "&_
    "FROM insuranceCo ic INNER JOIN FormPolicy fp ON ic.INS_ID = fp.INS_ID "&_
    "WHERE fp.INS_EF <= CONVERT(smalldatetime,'" & dbSaveDate(Date) & "',101) "&_
    "AND fp.INS_ET >= convert(smalldatetime,'" & dbSaveDate(Date) & "',101) "&_
    "AND fp.PolicyType = '"  & qsPolicyType & "'" 
```

如果仍然是同样的错误，我记得在弄乱日期/时间字段时遇到了这个错误，所以这两个日期字段是可疑的。为了调试，尝试不使用该过滤器进行选择，看看会发生什么：

```
sSQL = "SELECT ic.INS_Office, fp.INS_DS "&_
    "FROM insuranceCo ic INNER JOIN FormPolicy fp ON ic.INS_ID = fp.INS_ID "&_
    "WHERE fp.PolicyType = '"  & qsPolicyType & "'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:27:34.210

在没有行号的情况下确定确切的问题真的很困难。我注意到在脚本的末尾，您正在向`RsAccount`记录集字段添加新记录并向其分配值。过去，由于 VBScript 变量和记录集字段类型之间的类型不匹配，我得到了“多步 OLE DB 操作生成错误”错误。仔细检查要更新的列的数据类型，如有必要，在将值分配给记录集之前显式转换值（例如，使用`CLng`for numbers）。

# facebook - 在 Flash 网站中创建 Facebook 登录按钮

> ID：10943268
> 
> 赞同：2
> 
> 时间：2012-06-08T04:58:17.263
> 
> 标签：facebook, actionscript-3, facebook-graph-api, facebook-social-plugins

我想将 facebook 登录按钮集成到我的网站中。用户只能使用他/她的 Facebook 帐户登录。我对有关用户的任何其他信息不感兴趣。

但我有点困惑......我阅读了官方的 facebook 文档，但我不明白我需要什么。我不确定是否需要使用**[Graph API](https://developers.facebook.com/docs/reference/api/)**或**社交插件**的**[登录按钮](https://developers.facebook.com/docs/reference/plugins/login/)**

 **你能帮我解决我的疑惑吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:14:20.683

要在 Flash 中使用它，您必须通过一些 ExternalInterface 调用来使用 javascript sdk。这就是我一直这样做的方式。

AS3

```
 public function FBconnect():void {
            ExternalInterface.addCallback("onLogin", onLogin);
            ExternalInterface.addCallback("onError", onError);
            ExternalInterface.call("requestLogin");
        }

        private function onError():void {
            dispatchEvent(new DataEvent(DataEvent.ERROR));
        }

        public function logout():void {
            ExternalInterface.call("FB.logout", null);
        }

        private function onLogin():void {
            debugTools.trace("FB LOGIN");
            connectUser();
        }

        private function connectUser():void {
            ExternalInterface.addCallback("loadUser", userCallback);
            ExternalInterface.call("connectUser");
        }

        private function userCallback(data:Array):void {
            debugTools.trace("FB USER LOADED");
            var userData:Object = data[0];

            _FBuser = new FBUser(userData.id);
            _FBuser.firstName = userData.first_name;
            _FBuser.lastName = userData.last_name;
            _FBuser.email = userData.email;

            dispatchEvent(new DataEvent(DataEvent.SUCCESS));
        } 
```

JS

```
window.fbAsyncInit = function() {
                FB.init({
                    appId: YOUR_APP_ID,
                    status: false,
                    cookie: true,
                    xfbml: false
                });         
            };
            (function() {
              var e = document.createElement('script'); e.async = true;
              e.src = document.location.protocol +
                '//connect.facebook.net/en_US/all.js';
              document.getElementById('fb-root').appendChild(e);
            }());

            function connectUser() {
                FB.api('/me', function(response) {
                    if(response) {                  
                        var usrs = new Array();
                        usrs.push(response);
                        document.getElementById('flashObj').loadUser(usrs);
                    } else {
                        document.getElementById('flashObj').onError();
                    }
                });
            };

            function requestLogin() {
                FB.login(function(response) {
                    if (response.authResponse) {
                        document.getElementById('flashObj').onLogin();              
                    } else {
                        document.getElementById('flashObj').onError();
                    }
                }, {scope:'email'});
            } 
```

所以要把它分解。

我们在网页中加载 javascript sdk，如果您不知道，请查看 facebook 上的文档以了解如何操作。

接下来，通过 ExternalInterface，我们在 JS 中调用 FB.login，并在响应时通过 document.getElementById 调用 AS3 函数（以访问您的 swf）。

然后我们做同样的事情来使用 Graph API 来获取我们用户的信息。

以我的经验，这是 facebook 将您的用户连接到您的 flash 应用程序的最佳工作流程。**

# git - git：如何自动解决删除/修改冲突？

> ID：10943270
> 
> 赞同：2
> 
> 时间：2012-06-08T04:58:34.870
> 
> 标签：git, conflict

我按照以下方式组织了我的工作流程：

master 分支用于开发，包含源代码和一些实用程序脚本。

release 分支是分布式的，包含可执行文件和一些附加文件。

当我第一次创建发布分支时，我从中删除了所有源代码，并添加了编译后的可执行文件。当我想制作下一个版本时，我会

`git checkout release`

`git merge --no-ff -Xours master`

即使我使用 -Xours 选项，每个更改的源文件都会导致删除/修改冲突。我必须手动删除所有冲突的文件，然后提交。有没有办法自动解决这个冲突，强制删除的文件保持删除状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:09:57.740

您正在以完全不同的方式使用 Git 和源代码控制管理。我并不是说它错了，但你应该考虑重新考虑你想用 git repo 实现什么。

在一般实践中，`release`分支也应该包含代码。而且您总是从`release`分支构建您的生产可执行文件。然后将它们移动到其他地方。

也就是说，如果您也想保留可执行文件的版本。创建另一个 git 存储库以将它们保留在那里。这样，您可以更轻松地维护可执行文件。

如果您使用的是 maven/java，那么我会推荐 Maven Repo，它的唯一目的是管理构建的工件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:15:37.290

不要使用相同的存储库来存储从您的代码生成的人工制品。您将膨胀您的历史，并使推送和获取缓慢以进行常规开发。最终你将不得不放弃这种方法，因为新的克隆需要太长时间。标准化您的人工制品拉链的命名约定，并通过其他方式运送它们。它可能是另一个 git 存储库，但它不能是您处理代码的地方。如果您愿意，可以通过子模块在 2 个存储库之间建立链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:20:47.923

当您从存储库中删除一些文件并提交一些更改时，您需要使用 -a 选项。广告文档说：

```
-a, --all
   Tell the command to automatically stage files that have been
   modified and deleted, but new files you have not told git about are
   not affected. 
```

这会从已删除的文件中清除我的所有存储库。当我从其他分支合并时，我没有冲突。我不确定这会对你有所帮助。我希望是的。

# php - 在 php echo 中打印一个 javascript 变量

> ID：10943273
> 
> 赞同：1
> 
> 时间：2012-06-08T04:59:22.483
> 
> 标签：php, javascript, variables

澄清：

我有一个回声语句如下：

```
 $striptitle .= ' - <a onclick="getnewurl();" href="'.SGLink::album($aid). '">'. $namek .'</a></h1>
<a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-via="jb_thehot" data-text="Pictures of '. $hashfinal .'" teens>Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>';

echo $striptitle ; 
```

onclick 这样做：

```
<script type="text/javascript">
function getnewurl()
{
var url = document.URL;
alert( url );
}
</script> 
```

我需要的基本上是添加我的锚标签 data-url="INSERT_VAR_URL_HERE"

那可能吗？

如果这还不够清楚，请告诉我谢谢！

编辑：澄清一下，功能中的警报仅用于测试。我需要的是能够在同一个 $striptitle 变量中使用函数中获得的变量。

我的问题是 url 随 AJAX 变化，而 twitter 按钮的 data-url 没有更新。我希望能够通过每次点击它来获取新的网址。如果还有其他方法可以做到这一点，我愿意接受建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:04:29.460

为什么不将其作为参数传递？

```
$striptitle .= " - <a onclick=\"getnewurl('URL-HERE');\"...>"; 
```

然后在你的脚本中：

```
<script>
    function getnewurl(url) {
        alert(url);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:07:23.890

以@Kolink 的回答为基础，一种不在两个地方重复 url 的方法可以将链接生成为：

```
<a onclick="getnewurl(this);" href="..."> 
```

那么你的 JS 可能看起来像：

```
function getnewurl(link) {
    link.setAttribute('data-url', location.href);
} 
```

**EDIT**显然`jQuery.data`没有正确更新 dom，但 setAttribute 确实

# c++ - 如何在 WinCE 5.0 中注册 Com 组件？

> ID：10943275
> 
> 赞同：0
> 
> 时间：2012-06-08T04:59:59.083
> 
> 标签：c++, windows-ce, exe

我在 C++ 中创建了一个 COM 组件。现在我想在 WinCE 5.0 中注册我的 COM 组件并通过调用 ActiveXObject(); 在 ASP(.asp) 页面中使用它。请帮我注册 COM 组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:17:20.847

应该有一个名为 regsvrce.exe 的实用程序，只需 google 或点击底部的链接即可。

[但是您可以像这里](http://social.msdn.microsoft.com/Forums/en/windowsmobiledev/thread/3f056507-3f2a-470d-bf51-7a8230f56f47)描述的那样创建简单的安装实用程序

也看[这里](http://forum.xda-developers.com/showthread.php?t=305513)和[这里](http://www.ivcdisplays.com/faq.htm)

# php - 在 Zend Registry 中存储一个对象

> ID：10943276
> 
> 赞同：1
> 
> 时间：2012-06-08T05:00:05.633
> 
> 标签：php, zend-framework, registry

如何将对象存储在 Zend_Registry 实例中，以便将对象的每个属性作为索引加载，并将对象属性的每个值存储为注册表的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:14:50.860

回答了我自己的问题。创建一个扩展 Zend_Registry 的类并添加以下方法：

```
public static function loadObject($object){
    $data = get_object_vars($object);
    foreach($data as $key => $value){
        self::set($key, $value);
    }
} 
```

# asp.net-mvc - asp.net mvc 3 表单身份验证和 ie9

> ID：10943285
> 
> 赞同：0
> 
> 时间：2012-06-08T05:01:15.293
> 
> 标签：asp.net-mvc, iis-7, internet-explorer-9, forms-authentication, session-timeout

好吧，我完全被这个难住了。这是 asp.net mvc3 web 应用程序的场景，几个月来一直运行良好，但我每周都在经历补丁和新版本的新功能。代码库本身在两个独立的 iis7 windows r2 服务器上运行。其中一台服务器，我不使用标准的应用程序池身份（网络服务） - 我有一个特定的用户，因为它从文件服务器中提取一些文件，因此也需要从该目录添加/删除特定权限。

在这台服务器上，它刚刚开始在 IE9 中 99% 的时间对表单身份验证进行疯狂操作，一两次我必须在 chrome 上执行此操作，但 chome/ff 通常表现得没有问题。

问题是，一旦您登录并转到另一个页面，它就会不断响应移动对象，并再次重定向到登录页面。（有时它甚至在登录时这样做）但是会话仍然有效，因为作为模板的一部分，它显示了基于用户身份验证的菜单项，调用如下

```
Context.User.IsInRole(xxxx)
Request.IsAuthenticated 
```

我已经摆弄了它，cookie会话似乎很好，一切都按应有的方式设置。

但是，如果我做一个完整的 iisreset，ie9 将工作大约 5 分钟，然后每次请求都会失败，并重定向回登录页面。

我在 Web 应用程序中根本没有使用 iframe，我的 web.config 设置是

```
<sessionState mode="InProc" timeout="80" />
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="40" slidingExpiration="true" cookieless="UseCookies" />
</authentication> 
```

已检查时间同步，并且客户端和服务器都在 1 秒内。

所以在这个阶段，我被卡住了，我不知道去哪里进一步排除故障，或者我可以尝试什么。如果需要，我可以远程调试服务器。

当我在我的开发盒上进行本地测试时，我没有看到任何问题。

谢谢，卡梅伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:57:49.450

问题解决了。我将应用程序池的工作进程数设置为 2，因此对于 2 个工作进程中的哪一个具有我验证的表单 cookie/会话，这是一个幸运的下降。

改回 1，应用程序按预期工作。但是，我将完全重写我的会话处理并存储在数据库中，因此我可以将此工作进程增加到 4 个左右，以提高应用程序的效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:06:18.460

如果您正在使用`FormAuthenticationTicket`，请检查以下内容。

```
FormsAuthenticationTicket authTicket = new
                           FormsAuthenticationTicket(1, //version
                           username, // user name
                           DateTime.Now,             //creation 
                           DateTime.Now.AddDays(5), //<--- THIS  Expiration 
                           remember, //Persistent
                           userdata); 
```

# vb.net - 你调用的对象是空的。不知道为什么我会收到这个错误

> ID：10943296
> 
> 赞同：0
> 
> 时间：2012-06-08T05:02:47.580
> 
> 标签：vb.net

每次我尝试运行运行此代码的表单时，我正在制作的程序遇到问题：

```
Private Sub customDuffer_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles customDuffer.DoWork
    While (Me.Visible = True)
        For Each tone In trackWriter.noteArray
            If switch = True Then
                Beep.tone(1000, note, 240)
            End If
        Next tone
    End While 
```

Beep.tone(1000, note, 240)<< 这是引发异常的行。我的主表单上有完全相同的代码，它在其他任何地方都可以完美运行，只有在应该运行的表单中我才会遇到异常。

注意数组是公共的，我可以从其他任何地方正常访问它，并且自定义类哔声工作正常。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:13:50.220

Beep 或 note 变量必须未初始化。添加一些调试代码：

```
If switch = True Then
  If Beep is Nothing then MsgBox ("Beep is nothing!")
  If note is Nothing then MsgBox ("note is nothing!")
  Beep.tone(1000, note, 240)
End If 
```

运行它，看看弹出哪个消息。然后找出应该初始化的位置。

如果没有消息弹出，则 Beep.tone() 方法中存在未初始化的变量错误。

# maven - Jenkins JDepend Plugin 报告 JAR 类

> ID：10943297
> 
> 赞同：0
> 
> 时间：2012-06-08T05:02:47.723
> 
> 标签：maven, jenkins

我正在使用 1.467 和 Jenkins JDepend 插件 1.2.3。当我构建时，它会生成 JDepend 报告。没问题。

问题是我收到关于以下课程的报告：

```
org.apache.commons.fileupload
org.hibernate.ejb 
```

包报告我没有写的类。我如何配置它以使其 JDepend 仅在我编写的类上运行？

```
com.mycompany.myproject 
```

例如。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:19:54.567

[JDepend Maven 插件](http://mojo.codehaus.org/jdepend-maven-plugin/)看起来很旧，似乎处于测试阶段。它不支持排除包/类的方法。我假设[jenkins JDepend Plugin](https://wiki.jenkins-ci.org/display/JENKINS/JDepend+Plugin)使用其中的信息来生成报告。

[JDepend](http://clarkware.com/software/JDepend.html)本身提供了从分析中包含/排除类/包的[选项。](http://clarkware.com/software/JDepend.html#customize)JDepend [ant 任务](http://clarkware.com/software/JDepend.html#ant)也为此提供了支持。

一种可能性是使用 jdepend ant 任务使用[maven antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)（或直接调用 jdepend 使用[maven exec 插件](http://mojo.codehaus.org/exec-maven-plugin/)）进行分析并将报告文件指定给 jenkins 插件进行报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:36:36.707

我通过将目标设置为“jdepend:generate”并将预生成的 JDepend 文件设置为“target/jdepend-report.xml”来使其工作

# php - 为什么 mysql_insert_id 在我的情况下返回 0？

> ID：10943298
> 
> 赞同：0
> 
> 时间：2012-06-08T05:02:59.060
> 
> 标签：php, mysql

这是我的桌子：

```
CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `name` varchar(20) NOT NULL default '',
  `pass` varchar(32) NOT NULL default '',
  `lang` varchar(2) default NULL,
  `locale` varchar(2) default NULL,
  `pic` varchar(255) default NULL,
  `sex` char(1) default NULL,
  `birthday` date default NULL,
  `mail` varchar(64) default NULL,
  `created` timestamp NOT NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `mail` (`mail`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=27 ; 
```

这是我的查询：

```
$query = "INSERT IGNORE INTO `users` (`name`, `mail`, `birthday`, `lang`, `locale`, `sex`, `pic`) VALUES ('".$name."', '".$email."', '".date_format($birthdaynew, 'Y-m-d H:i:s')."', '".substr($locale, 0, 2)."', '".substr($locale, -2, 2)."', '".$sex."', 'pic/".$uid.".jpg')";
$rows = mysql_query($query) or die("Failed: " . mysql_error());

$_SESSION['id']      = mysql_insert_id(); // I have tryed also mysql_insert_id($db_con) where $db_con is the link to db.
$_SESSION['name']    = $name; 
```

$_SESSION['name'] 包含正确的名称，但 $_SESSION['id'] 包含 0。为什么？我要疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:08:50.887

您使用 INSERT IGNORE 是否有特殊原因？

如果您使用 INSERT IGNORE，那么如果存在重复键（PRIMARY 或 UNIQUE），或者将 NULL 插入具有 NOT NULL 约束的列中，则实际上不会插入该行。

*参考 pass 列，因为您尚未定义要插入其中的任何内容，并且它具有 NOT NULL 约束。*

编辑： *也参考邮件列，因为你有一个 UNIQUE 约束。*

# django - Django ImageField modelformset_factory

> ID：10943299
> 
> 赞同：0
> 
> 时间：2012-06-08T05:03:00.753
> 
> 标签：django, django-forms, django-models

我正在尝试使用 ImageField 编辑表单，并且正在使用 modelformset_factory

在我看来：

```
ModelFormSet = modelformset_factory(Model, max_num=0,)
if request.method == 'POST':
    formset = MyFormSet(request.POST, request.FILES, queryset=Model.objects.filter(pk=2))
    if formset.is_valid():
        formset.save() 
```

但它不起作用，有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:05:12.073

代码很好，只是错过了在 html 表单上放置 html 标签 enctype="multipart/form-data" ......这就是问题所在

# ruby-on-rails-3 - 运行 rake cucumber 时：好的，我收到错误

> ID：10943300
> 
> 赞同：0
> 
> 时间：2012-06-08T05:03:05.240
> 
> 标签：ruby-on-rails-3, rspec, cucumber, capybara

这是我的 features/creating_projects.feature 来自 Rails 3 in Action 的第 2-3 章

![在此处输入图像描述](../Images/d78ba4da083ae575306c8299ef966d64.png)

这是我在运行 rake cucumber 时得到的结果：ok --trace：

![在此处输入图像描述](../Images/c9b3e52561215e8ca08f23eed3cfec92.png)

我有一种感觉，我缺少对 Cucumber 的依赖项或对 Cucumber 的依赖项的依赖项？

这也是我的 Gemfile：

![在此处输入图像描述](../Images/aaccb6533d9abe7137ee754d931c0f6d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T02:18:08.380

我也遇到了这个问题，并`--strict`按照 Justin Soong 在这篇[文章](https://stackoverflow.com/questions/5449248/cucumber-command-failed-with-status-1-with-rake-features)中的建议删除了 cucumber.yml 中的内容。

# c++ - 如何正确破坏链表？

> ID：10943305
> 
> 赞同：0
> 
> 时间：2012-06-08T05:03:22.317
> 
> 标签：c++, linked-list, destructor

对于一个类分配，我需要为我创建的链表对象实现一个析构函数。我创建了一个函数`MakeEmpty`，我在析构函数中调用了该函数。它第一次正确编译，但现在我立即崩溃并显示错误消息：

> 表达式：_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)

有人可以帮我找出问题所在吗？我运行调试器并指出错误在代码中的位置。

```
WORD::~WORD()
{
cout << "Destructor Called"<<endl;

(*this).MakeEmpty();
} 
```

这是 MakeEmpty() 函数

```
void WORD::MakeEmpty()
{
alpha_numeric *p = (*this).front;

if((*this).IsEmpty())
{
    cout <<"Already empty"<< endl;
    return;
}

while(front != 0)
{
    front = front -> next;
    delete p;//<<<<---DEBUGGER SAYS ERROR HERE
    p = front;
}
return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:09:09.193

由于这是一项家庭作业，我不会给出解决方案，而是给出一个提示。

```
while(front != 0)
{
    front = front -> next;
    delete p;//<<<<---DEBUGGER SAYS ERROR HERE
    p = front;
} 
```

在此期间，您在列表中的哪个位置开始/结束删除？为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:22:45.907

你有一个编码错误......你需要： 替补检查你的代码！

在每条语句和循环的每次迭代中写下所有变量的预期值。不要跳过任何步骤。这将使您的编码错误显而易见。

30 年后，我在脑海中这样做了.. 但我总是这样做以确保我所写的内容是正确的。这一习惯将在未来几年为您提供良好的服务。

# java - 适用于 Linux 和 Windows 的 Visio to PDF API

> ID：10943307
> 
> 赞同：2
> 
> 时间：2012-06-08T05:03:41.387
> 
> 标签：java, pdf, visio

我正在评估变压器以找到对 pdf 变压器的 visio。我发现没有。是否有任何外部第三方 api 可以将 visio 转换为 pdf（Linux 和 Windows）。我找到了easyPDF api，但它只支持windows平台。

任何帮助表示赞赏。

# google-maps - Android 在谷歌地图上的所有地址上都设置了 pin

> ID：10943310
> 
> 赞同：1
> 
> 时间：2012-06-08T05:03:56.713
> 
> 标签：google-maps

如何在 Google 地图中的所有地址上添加图钉？

可以动态完成吗？

# django - 在 Django 模型中查询相关的对象集

> ID：10943312
> 
> 赞同：0
> 
> 时间：2012-06-08T05:04:19.647
> 
> 标签：django, django-models

假设我的模型中有以下类：

```
class User(BaseModel):
  ..

class Node(BaseModel):
  ..
  author = models.ForeignKey(User, related_name='%(class)ss')
  tags   = models.ManyToManyField('Tag', related_name='%(class)ss')
  ..

class Tag(BaseModel):
  .. 
```

现在，我想在一个`User`类中有一个方法，它将返回用户节点的所有标签：

```
class User(BaseModel):
  ..
  def get_tags(self):

    # Here some more querying for tags in selected nodes
    user_tags = self.nodes.filter(author=self) # What to add if possible?

    return .. 
```

我希望该`user_tag`集合包含由给定用户创作的节点中使用的所有标签。如何在没有自定义 SQL 的情况下实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:53:43.163

如果您的问题正确，应该这样做，select_related() 方法会提前递归地预填充所有一对多关系的缓存。

更多详情[请点击这里](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)

# video - CLI 工具将 AVI 文件与 JPEG 格式视频分割

> ID：10943313
> 
> 赞同：2
> 
> 时间：2012-06-08T05:04:27.617
> 
> 标签：video, video-processing

我是视频处理的新手，我正在尝试用 Python 编写程序。该方案是通过时间戳将一个长视频分割成一些短视频。

例如，我有一个输入`video long_video.avi`15 分钟。我想提取到 2 个视频，`short_1_5_video.avi`（1'-5'）和`short_6_10_video.avi`（6'-10'）。输入视频有容器`AVI`和视频格式`JPEG`。这是视频信息（显示在 mediainfo 工具中）：

![在此处输入图像描述](../Images/0ee237892fccca37c079097230b9a1f5.png)

我想找到一个可以从 Python 调用的 CLI（命令行界面）工具。我尝试了一些工具：

*   `mp4box`（[http://www.videohelp.com/tools/mp4box](http://www.videohelp.com/tools/mp4box)）：

    但 mp4box 不支持 AVI 文件。它只支持 MKV 和 MP4 文件。

*   `mkvmerge`（在 mkv 工具中）：

    但是 mkvmerge 只支持 MKV 文件。

*   `ffmgeg`：

    但它似乎不支持按时间戳分割视频（“似乎”，因为我在 ffmpeg 的规范中没有找到它）。

我考虑过将输入视频从转换`AVI`为`MP4`或`MKV`然后将其拆分，但是转换所需的时间太长。请建议我一个工具可以分割`AVI`文件`JPEG`格式视频，可以从命令行控制。

另外，我也想找一个可以做到这一点的GUI工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:14:22.087

我相信您可以使用`ffmpeg`（`-ss`以秒或 hh:mm:ss 格式表示开始位置，`-t`以秒为单位的 hh:mm:ss 格式表示长度/持续时间）。

[`mencoder`](http://bro1.centras.info/mencoder_editing.html)（mplayer 的一部分）似乎也可以。我没有链接到 mplayer/mencoder 站点，而是链接到一个页面，该页面具有可能有帮助的 mencoder 命令行选项。

我相信`vlc`也可以（`--start-time <time in seconds> --stop-time <time in seconds> --sout <output file>`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:22:13.147

假设您想将此文件拆分为 3 个部分：`beginning -> 00:00:05 -> 00:00:10 -> end`，请尝试以下操作：

```
mencoder -endpos 00:00:05 -oac copy -ovc copy input.avi -o part1.avi
mencoder -ss 00:00:05 -oac copy -ovc copy input.avi -o tmp.avi

mencoder -endpos 00:00:10 -oac copy -ovc copy tmp.avi -o part2.avi
mencoder -ss 00:00:10 -oac copy -ovc copy tmp.avi -o part3.avi 
```

# php - 如何保护我的 Amazon S3 存储桶

> ID：10943318
> 
> 赞同：0
> 
> 时间：2012-06-08T05:04:54.747
> 
> 标签：php, security, amazon-s3

我有 Amazon S3，其中包含我的一堆视频（用于互联网营销）。我也有图片、脚本、打包课程、视频教程，各种东西。所有文件都通过我的亚马逊存储桶中的不同文件夹进行排序。

问题是，使用某些 Amazon S3 Bucket 翻录程序的任何人都可以轻松获得所有文件。您只需输入存储桶名称，然后您就可以撕掉所有内容。不久前，我还收到一封来自亚马逊的电子邮件，称我的存储桶不安全且可公开访问。

我想我必须设置一些存储桶策略？

我需要能够将视频嵌入我的各种网站（视频压缩页面）。还有我的培训区，它也有嵌入的视频教程，以及一些供会员下载的 zip 文件等。此外，我的 JWPlayer SWF 控制器文件和匹配的 jwplayer.js 文件都位于我的 Amazon S3 上（因此它加载速度很快，并且我所有的视频嵌入都使用它，所以我没有在许多网站上上传 20 次不同的 jwplayer ）。

我怎么不让 Bucket 可以公开访问，但它仍然可以嵌入到我的页面中。我不能将它设置为只允许一个域，因为它将在许多站点中使用。我可以从我的服务器的 IP 允许它吗？如果我确实让它使用域，我可以将 1 个站点作为重定向来设置引荐来源网址。就像一个有权访问 S3 的控制 PHP 文件......

任何有关如何使这项工作和安全工作的帮助、链接和见解都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-30T08:45:44.390

您需要创建仅在您的页面上共享且有时间限制的特殊链接。这样，如果链接在网络上泄露，它们只会持续几秒钟、几分钟或几小时。就我而言，我创建了一个会员网站，必须登录才能获得链接。即使那样，如果这些成员在网络上剪切/粘贴这些链接，这些链接也会在半小时内失效。

[我在这里](https://stackoverflow.com/q/12192949/105539)谈论我在 PHP 中为此创建的一个函数。更多信息在[这里](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/RESTAuthentication.html)。

我在 PHP 中的函数可以工作，但它还不能处理子文件夹，这就是为什么我在它上面放置了一个 stackoverflow 问题单。

# iphone - UIView 难度

> ID：10943321
> 
> 赞同：0
> 
> 时间：2012-06-08T05:05:17.477
> 
> 标签：iphone, ios, xcode, uiview

我尝试添加一个像透明一样的白色视图，所以我设置了这个：

```
self.backgroundView = [[UIView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];
[self.backgroundView setBackgroundColor:[UIColor whiteColor]];
[self.backgroundView setAlpha:0.5];
[self.backgroundView setOpaque:NO];
[self.view addSubview:self.backgroundView];

slotButton.frame = CGRectMake(550, 350, 400, 100);
[backgroundView addSubview:slotButton];
 } 
```

但是当我在视图中添加一个按钮时，该按钮变得透明。我想要的是在不透明的情况下向白色透明视图添加一个按钮`UIButton`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:08:17.710

与其使您的 View 透明，不如仅将其背景颜色设置为透明

像这样：

```
self.backgoundView.backgroundColor = [UIColor colorWithRed:255 green:255 blue:255 alpha:0.5]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:20:22.947

设置背景视图的 alpha 属性 < 1 会导致整个视图和内部的任何子视图（包括按钮）变得透明。如果您只希望视图的背景是透明的，请将视图的背景颜色设置为透明色。

```
self.backgroundView.backgroundColor = [UIColor clearColor];
self.backgroundView.opaque = NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:13:38.320

这很简单。你需要有两个 UIView。在第二个视图上设置所有属性，如透明度、背景颜色或 Alpha，并将其添加到第一个视图上。现在在第一个视图上添加您的按钮。你完成了。

干杯，

塔伦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T05:49:01.703

```
self.backgroundView.backgroundColor = [UIColor colorWithWhite:1.0 alpha:0.5];
self.backgroundView.alpha = 1.0; 
```

# html - 不希望标题中的 DIV 重叠

> ID：10943336
> 
> 赞同：1
> 
> 时间：2012-06-08T05:07:10.800
> 
> 标签：html, css

在我对CSS（和stackoverflow！）非常陌生，并且似乎无法让我的标题中的div对齐并且不重叠。我有一个带有 align="absmiddle" 的徽标图像，因此 h1 文本位于它的右侧，这就是我想要的方式。我想要在 h1 下方（仍在徽标右侧）以小文本显示业务联系信息的另一行文本。当我添加带有联系信息的 div 时，它会显示在徽标后面。对于想要重叠的人以及不同浏览器和调整大小的问题，我已经看到了很多问题和解决方案，但似乎无法找到一些简单的东西来询问我在问什么。感谢你的帮助。

这是html：

```
<body>
<div id="outer-container">
<div id="header">
      <div id="main-logo">
        <h1><a href="#"><img src="images/Murray_Logo.gif" alt="Murray logo" width="144" height="144" align="absmiddle" />Company name here</a></h1>
      </div>
    <br clear= "all" />
      <div id= "contactinfo">address</div>
      <div id="main-menu">
        <ul>
          <li class="first-item">
            <a href="#">Home</a>
          </li>
          <li>
            <a href="#">Services</a>
          </li>
          <li class="last-item">
            <a href="#">Testimonials</a>
          </li>
        </ul>
  </div>
</div>
</body> 
```

和CSS：

```
* {
  padding: 0;
  margin: 0;
}

a {
  color: #2D80D2;
  text-decoration: underline;
}

a:hover {
  text-decoration: none;
}

body {
  font-size: 11.5pt;
  line-height: 1.5em;
  color: #404040;
  background: #FFFFFF url('images/bg1.gif') repeat-x top left;
}

body,input {
  font-family: Georgia, serif;
}

br.clear-all {
  clear: both;
}

h1,h2,h3,h4 {
  letter-spacing: -1px;
}

h1,h2 {
  font-family: Century, serif;
}

h2 {
  font-size: 1.75em;
}

h2,h3,h4 {
  margin-bottom: 0.75em;
   color: #000;
}

h3 {
  font-size: 1.5em;
}

h4 {
  font-size: 1em;
}

p {
  margin-bottom: 1.25em;
}

ul {
  margin-bottom: 1.25em;
}

ul h4 {
  margin-bottom: 0.3em;
}

#header {
  height: 175px;
  position: relative;
  padding: 20px;
}

#outer-container {
  position: relative;
  width: 1200px; /* was 980px */
  margin: 90px auto 0 auto;
}

#inner-container {
  padding: 0;
  position: relative;
  width: 980px;
  margin: 25px 0 15px 0;
}

#inner-container .features {
  padding-left: 0;
  list-style: none;
}

#inner-container .features li {
  padding: 10px 0 10px 0;
  clear: both;
}

#inner-container ul {
  list-style: none;
}

#inner-container ul li {
  border-top: dashed 1px #B3B3B3;
  padding: 5px 0 5px 0;
}

#inner-container ul li.first-item {
  border-top: 0;
  padding-top: 0;
}

#main-logo {
  height: 145px; /* 6/7/12 DH */
  left: 20px;
  line-height: 107px;
  position: absolute;
  top: 0;
}

#main-logo a {
  text-decoration: none;
  color: #000;
}

#main-logo h1 {
  font-size: 2.2em;
}

#main-logo p {
    font-size:1em;
}

#main-logo img {
    padding: 0 20px 0 0;
}

#main-menu {
  width: 940px;
  border-bottom: solid 1px #1467B9;
  bottom: 0;
  border-top: solid 1px #5AADFF;
  line-height: 53px;
  margin: 0 0 0 0;
  padding: 0 20px 0 20px;
  height: 53px;
  left: 0;
  background: #1E71C3 url('images/bg2.gif') repeat-x top left;
  position: absolute;
}

#main-menu a {
  color: #FFF;
  /*letter-spacing: -1px; /* 6/7/12 DH */
  text-decoration: none;
}

#main-menu ul {
  list-style: none;
}

#main-menu ul li {
  display: inline;
  padding: 0 10px 0 10px;
}

#main-menu ul li.first-item {
  padding-left: 0;
}

#contactinfo {
  font-family:Tahoma, Geneva, sans-serif;
  font-size:10px;;
}

#contactinfo a {
  color: #404040;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:17:03.277

基本上你可以使用这样的 div 布局：

```
<div style="float:left;">LOGO</div>
<div style="float:left;">
  <div>COMPANY</div>
  <div>CONTACT</div>
</div> 
```

就像您在左侧有徽标 div，在徽标 div 的右侧有 2 个 div（一个在另一个之上）用于公司和联系信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:23:41.017

你得到了重叠，因为你已经绝对定位了#main-logo，并且绝对定位从文档的正常流程中删除了元素，这意味着其他内容将不再尊重它的定位和“重叠”绝对定位的内容所在的位置。如果您想将该徽标放在某个位置，我会使用相对定位或使用一些边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:57:11.370

伴随着kinakuta的解释。您的标记也有一些错误。

```
<div id="outer-container"> 
```

是一个未闭合的元素。

```
<br clear= "all" /> 
```

`clear`已过时。在 CSS 中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T06:10:59.750

在这种情况下，您`header`的位置是相对的，因此最好保留 id`contactinfo`并`position :absolute`使用边距进行排列。

试试这个：

```
#contactinfo {
  font-family:Tahoma, Geneva, sans-serif;
  font-size:10px;
  position:absolute;
  left: 187px;
  line-height: 160px;
} 
```

# r - 将稀疏矩阵扩展/转换为更大的稀疏矩阵

> ID：10943338
> 
> 赞同：1
> 
> 时间：2012-06-08T05:07:13.467
> 
> 标签：r, social-networking, sparse-matrix

我知道这个问题的标题很混乱，如果没有错的话。对此感到抱歉，让我解释一下我尝试做的事情：

```
# I have a population of individuals:
population <- c("Adam", "Bob", "Chris", "Doug", "Emily", "Frank", "George","Harry", "Isaac", "Jim", "Kyle", "Louis")
population_size <- length(population) # this is 12

# I then draw a sample from this population
mysample_size <- 5
mysample <- sample(population,mysample_size, replace=FALSE)

# I then simulate a network among the people in the sample
frn <- matrix(rbinom(mysample_size*mysample_size, 1, 0.4),nrow=n)
x[x<=0] <- 0
x[x>0] <- 1
rownames(frn) <- mysample 
colnames(frn) <- mysample 
```

*我现在想将 frn 中的值转移到一个包含原始总体中所有成员的矩阵中，即 12 x 12 矩阵。该矩阵中的值仅来自 frn 5*5 矩阵。

我不知道如何从顶部的矩阵生成底部的矩阵。

我想过不同的方法（例如使用 iGraph 和通过边缘列表推进）或运行循环，但并没有真正找到一个单一的替代方案来运行。了解背景可能很重要：我的实际矩阵比这大得多，我需要多次运行此操作，因此一个有效的解决方案会很棒。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:50:25.247

```
# create an empty matrix with NAs. You may have the full matrix already.
full_matrix <- matrix(rep(NA, population_size*population_size), nrow=population_size)
rownames(full_matrix) <- colnames(full_matrix) <- population
frn <- matrix(rbinom(mysample_size*mysample_size, 1, 0.4), nrow = mysample_size)
rownames(frn) <- colnames(frn) <- mysample
# Find the locations where they match
tmp <- match(rownames(frn), rownames(full_matrix))
tmp2 <- match(colnames(frn), colnames(full_matrix))

# do a merge
full_matrix[tmp,tmp2] <- frn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:48:46.460

最简单的解决方案：`ind = match(mysample,population)`为您提供与样本对应的行和列的索引号，因此`popn`通过执行更新总体网络矩阵`popn[ind,ind] = frn`。完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:48:22.397

您可以使用...稀疏矩阵。

```
library(Matrix)
# Make sure the columns match
population <- c( mysample, setdiff(population, mysample) )
ij <- which( frn != 0, arr.ind=TRUE )
m <- sparseMatrix( 
  i = ij[,1], j=ij[,2], 
  x = 1,  # or frn[ij]
  dim = length(population)*c(1,1), 
  dimnames = list(population, population) 
)
m 
```

# screen-resolution - 建立网站时我应该注意的最小屏幕分辨率是多少？

> ID：10943342
> 
> 赞同：17
> 
> 时间：2012-06-08T05:07:23.920
> 
> 标签：screen-resolution

那么在构建网站时我应该考虑的最低屏幕分辨率是多少，尤其是宽度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T05:09:23.887

这是显示浏览器分辨率统计数据和趋势的链接 -

[浏览器显示统计](http://www.w3schools.com/browsers/browsers_display.asp)

它表明，截至 2012 年——

```
Date   Higher     1024x768 800x600    640x480    Other
2012   85%        13%      1%         0%         1% 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T05:14:46.840

我猜是 320×480 或 480×800 的移动设备。但他们应该在大多数网站上获得完全不同的布局。

现在普通显示器至少应该有 1024×768，除非你希望人们在安装 Windows 后直接访问你的网站，但没有视频驱动程序；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T05:09:44.293

将此添加到标题部分。这会自动适应

```
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T05:19:07.560

这取决于您正在构建的网站、您的内容、目标用户的年龄组/人口统计数据和其他信息。
旧桌面的普遍最低屏幕分辨率为 800x600。
1.年龄组：由于视力较弱，老年人倾向于使用较低的分辨率（800或1024）。
2.您的用户是否有更新机器：现在现代PC的分辨率以1024x768开头。最常用的分辨率是 1280

检查您的潜在用户组。此外，它还取决于您将在页面中拥有的内容。避免使用户水平滚动的设计。
这些只是几个指针。实际的 Web 开发必须考虑很多方面。

# python - Pydot集群定位

> ID：10943347
> 
> 赞同：1
> 
> 时间：2012-06-08T05:07:37.883
> 
> 标签：python, pydot

如果有两个集群包含其他集群的层次结构。都非常酷！

我想垂直放置两个集群。尽管其他帖子建议如何垂直放置节点（而不是集群），但我无法让它适用于集群。

size 参数对我不起作用，但无论如何这似乎是错误的答案，因为我的 python 程序是一般地设置一类可能是任何大小的图。我只想要两个集群在另一个之上，大小应该是任意的。

一个简单的例子将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:54:30.603

我解决了这个问题。我有两个独立的集群，每个集群都包含一个子集群的层次结构并被描绘为矩形。如果我将这两个集群添加到我的图表中，它们会从左到右显示，但我希望它们一个在另一个之上。如果我向每个集群添加一个节点，让它们处于垂直方向。它们可以在样式修饰符中不可见，但我使用节点作为标签。通过在两个节点之间添加一条边，两个集群以最合理的方式定位自己，以最小化边长，并垂直重新排列。

在下面的示例中，我创建了另外两个封闭块，这可能不是必需的，因为您可以将一个节点添加到 cluster1 中，另一个添加到 cluster2 中，但是我发现封闭块使我的图表更整洁。

例如，例如；

```
#Assume cluster1 and cluser2 exist

#Create enclosing cluster box
enclosingBlock1=pydot.Cluster('eb1', label='label1',shape='rectangle')
enclosingBlock1.add_subgraph(cluster1)

# Add node to enclosing cluster
node1=pydot.Node('D1',label='Diagram1')
enclosingBlock1.add_node(node1)

#Create second enclosing block
enclosingBlock2=pydot.Cluster('eb2', label='label2',shape='rectangle')
enclosingBlock2.add_subgraph(cluster2)
# Add the node and create the joining edge
node2=pydot.Node('D2',label='Diagram2')
enclosingBlock2.add_node(node2)
edge = pydot.Edge(node1,node2)

graph.add_subgraph(enclosingBlock1)
graph.add_subgraph(enclosingBlock2)
graph.add_edge(edge)
graph.write('xmlSQL.png',prog = 'dot',format = 'png') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T06:33:50.720

[此处](https://stackoverflow.com/a/3329126/1959808)描述了对集群排序问题的正确解决方案。它涉及[`constraint = false`](https://www.graphviz.org/doc/info/attrs.html#d:constraint)在某些边上进行设置，以便`dot`在对节点进行排名时忽略它们。

在链接的帖子中，启发式地描述了该方法。在自动生成[控制流图](https://en.wikipedia.org/wiki/Control_flow_graph)`constraint`时对我有用的方法是在后向边缘上设置一个 false 。

在控制流图中，后向边是从循环体的出口返回到其入口的边。因此，如果您的应用程序涉及此类可识别的边缘，那么您可以将其自动化，否则仍然可以作为手动选择边缘的指导原则。

如果从有关问题的先验结构信息中不知道此类可识别的边，但您仍希望自动解除边的约束，则可以使用深度优先或广度优先树（您的选择）来选择边的子集作为落后。

# c++ - 在代码中使用 OutputDebugString 在发布模式下编译时会导致编译失败。（VC++）

> ID：10943350
> 
> 赞同：0
> 
> 时间：2012-06-08T05:08:07.167
> 
> 标签：c++, debugging, visual-c++, release, outputdebugstring

我在我的 VC++ 代码中使用了很多 OutputDebugString @。它在调试模式下构建良好。但是使用与 OutputDebugString 相同的代码会使编译失败。

即使在代码中使用“OutputDebugString”，如何在 RELEASE 模式下避免这种构建失败。提前致谢。

# android - 加速度计不改变值

> ID：10943351
> 
> 赞同：1
> 
> 时间：2012-06-08T05:08:09.513
> 
> 标签：android, accelerometer

所以我有下面的代码，我无法开始工作。我试图让一个类（AccelerometerReader）读取我手机加速度计的值，然后我在另一个类（MyGame）中调用这些值，我用它在屏幕上打印这些值。代码中的一切似乎都很好，我没有得到任何值，除了我打印的值都只是说 0.0 并且不改变。我知道我的手机也有加速度计。任何帮助，将不胜感激！

谢谢，欧文

**AccelerometerReader 类**

```
import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;

public class AccelerometerReader extends Activity implements SensorEventListener{
 private SensorManager sensorManager;
 float ax,ay,az;   // these are the acceleration in x, y and z axes

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        sensorManager=(SensorManager) getSystemService(SENSOR_SERVICE);
        sensorManager.registerListener(this, sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
   }

   @Override
   public void onAccuracyChanged(Sensor sensor, int accuracy) {
   }

   @Override
   public void onSensorChanged(SensorEvent event) {
       if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER)
           return;

       if (event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){
           ax=event.values[0];
           ay=event.values[1];
           az=event.values[2];
       }
   }

public float getValueX() {
    return ax;
}

public float getValueY() {
    return ay;
}

public float getValueZ() {
    return az;
}
} 
```

**MyGame 类内部**

```
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    leftWall = new Rect(-100,0,0,canvas.getHeight());
    rightWall = new Rect(canvas.getWidth(), 0, (canvas.getWidth() + 100), canvas.getHeight());
    floor = new Rect(0,canvas.getHeight(),canvas.getWidth(),(canvas.getHeight() + 100));
    ceiling = new Rect(0,-100,canvas.getWidth(),0);

    AccelerometerReader acc = new AccelerometerReader();
    float ax = acc.getValueX();
    float ay = acc.getValueY();
    float az = acc.getValueZ();     

    canvas.drawColor(Color.rgb(red,green,blue)); //0 or 51?, 51, 102

    Rect player = new Rect(xPos,yPos,xPos+100,yPos+100);
    Paint myPaint = new Paint();
    myPaint.setColor(Color.rgb(0, 102, 255));
    canvas.drawRect(player, myPaint);
    myPaint.setColor(Color.rgb(0, 0, 0));
    canvas.drawRect(xPos + 5, yPos + 5, xPos + 95, yPos +95, myPaint);
    myPaint.setColor(Color.WHITE);
    myPaint.setTextSize(20);
    canvas.drawText("" + Math.round(ySpeed), 75, 50, myPaint);
    canvas.drawText(ax +", "+ ay +", "+ az, 300, 50, myPaint);
    if(gameStarted == false) {
        myPaint.setTextSize(30);
        myPaint.setTextAlign(Align.CENTER);
        canvas.drawText("Touch screen to begin!", canvas.getWidth()/2, canvas.getHeight()/2, myPaint);
    }
    int r = Math.round(rand.nextInt(canvas.getHeight() - 150));
    if(needsRand == true) {
        blockY = r;
        myPaint.setColor(Color.rgb(rand.nextInt(255), rand.nextInt(255), rand.nextInt(255)));
    }

    //if(isAlive == true) { 
        Rect block =  new Rect(blockX,blockY,(blockX+100),(blockY+100)); // left, top, right, bottom
        myPaint.setColor(Color.WHITE);
        canvas.drawRect(block, myPaint);
        blockX--;
    //}

    if(player.intersect(leftWall)) {
        xSpeed = Math.abs(xSpeed);
    } else if(player.intersect(rightWall)) { 
        xSpeed = -(xSpeed);
    } else if(player.intersect(floor)) {
        yPos = canvas.getHeight() - 150;
        ySpeed = -(ySpeed)*.75;
    } else if(player.intersect(ceiling)) {
        ySpeed = Math.abs(ySpeed);
    } else if(player.intersect(block)) {
        ySpeed = 0;
    }
    if(blockX <= -100) {
        blockX = canvas.getWidth() + 100;
        needsRand = true;
    } else {
        needsRand = false;
    }

    canvas.drawText("" + r, 300, 100, myPaint);

    physics();
    invalidate();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:01:32.247

你使用的方法对我来说真的很奇怪。您实际上在绘图类中提取加速度计值。这就像，您创建一个加速度计类的实例，然后立即取出他的值（无需等待真正的加速度计实际检索值）然后尝试绘制它。无论如何，这可能是您的问题，您绘制起始加速度计值并且在它们更改时不要刷新它们。我不知道你的其余代码是什么，但是如果你 onDraw 被多次调用，你只需创建你的类的一个新实例，你从中提取的值没有时间被传感器更改读数。

您最好使用 push 方法，在加速度计类中实现一个侦听器接口，以便每当检索到新的加速度值时，都会通知绘图类并获取新值，然后绘制它们。

*编辑：*我强烈建议您为加速度计使用更快的延迟（最快的会这样做）。请记住，加速度是所有这些中功耗较低的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T08:27:09.513

我的服务.java

```
public class MyService extends Service implements SensorEventListener {
       public void onCreate() {
              super.onCreate();
              sm = (SensorManager) getSystemService(SENSOR_SERVICE);
              sm.unregisterListener(this);  
              sm.registerListener(this,sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_FASTEST);
       }
       public void onDestroy() {
              super.onDestroy();
              sm.unregisterListener(this);
       }

// Creates a new binder
@Override
public IBinder onBind(Intent intent) {
       return new MyBinder<MyService>(this);
}

public void onSensorChanged(SensorEvent event) {
       ax=event.values[0];                           
       ay=event.values[1];                           
       az=event.values[2];                
       for (Listener listener : listeners) listener.handleNewAccelValue(this);
}

public interface Listener {
       // Actions to take when a new position has been added to the model
       void handleNewAccelValue(MyService sender);
}

// List of all the ongoing listeners bound to the Model
private List<Listener> listeners = new ArrayList<Listener>();

// Binds a listener from the View to the Model
public void addListener(Listener listener) {
       this.listeners.add(listener);
}

// Removes a listener from the View to the Model
public void removeListener(Listener listener) {
       this.listeners.remove(listener);
} 
```

你的活动.java

```
public class YourActivity implements MyService.Listener{
public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState); 
        // Binds to the created service
        doBindService();
}

// Creating the controller and the model
private ServiceComputeFinal controller;

// Creates the connection with a MyService service
ServiceConnection connection = new ServiceConnection(){
    public void onServiceConnected(ComponentName name, IBinder binder) {
        controller = ((MyBinder<MyService>) binder).getService();           
    }

    public void onServiceDisconnected(ComponentName name) {
        controller = null;
    }   
};

// Binds to the created service
void doBindService(){
    bindService(new Intent(this, MyService.class), connection, Context.BIND_AUTO_CREATE);
}

// And finally recover the accelerometer data that interest you
public void handleNewAccelValue(MyService sender){
    DO_WHATEVER_YOU_WANT_WITH(controller.getAx());
} 
```

我给了你所有的工具来做你想做的事。尝试查看这段代码并了解它的作用（其实并不复杂），ServiceConnection 允许 Activity 从 Service 中恢复值，而 Listener 接口允许 Service 在新值准备好时通知 Activity。如果需要，请随时提出任何问题。

# c++ - ADO 在存储过程中不支持 XML

> ID：10943357
> 
> 赞同：0
> 
> 时间：2012-06-08T05:08:44.623
> 
> 标签：c++, xml, sql-server-2005, visual-c++, stored-procedures

当尝试从 c++ 执行 sql server 中的存储过程时，我得到 ce = {DB_E_ERRORSINCOMMAND}

c++代码是

```
pCom->Execute(NULL,NULL,adCmdStoredProc); 
```

从命令对象执行..

存储过程看起来像这样

```
create PROCEDURE [dbo].[InsertTicketDetails]
AS
BEGIN
DECLARE @inputXml XML;
SET NOCOUNT ON
set @inputXml = '<Record><studentid>143</studentid></Record>';

INSERT INTO dbo.sample (studentid)
    SELECT 
        @inputXml.value( 'studentid[1]', 'int' ) AS studentid        
    FROM @inputXml.nodes('/Record') a(y)
END 
```

如果在没有 xml 正常工作的情况下完成插入，则此处的插入是使用 xml 完成的。我认为这是 xml 的问题，或者我们无法从 c++ 访问 sql server 的 xml 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:16:44.670

错误不在 ADO 中，而是在返回 NULL 的 SQL 中。我怀疑 dbo.sample (studentid) 不允许空值。

将插入语句更改为：

```
INSERT INTO dbo.sample (studentid)
SELECT  
    @inputXml.value( '(/Record/studentid)[1]', 'int' ) AS studentid 
```

或者

```
INSERT INTO dbo.sample (studentid)
SELECT  
    @inputXml.value( '(//studentid)[1]', 'int' ) AS studentid         
FROM @inputXml.nodes('/Record') a(y) 
```

# php - 解析xml版本2 PHP

> ID：10943358
> 
> 赞同：0
> 
> 时间：2012-06-08T05:08:45.657
> 
> 标签：php, xml

我试图用 simpleXMLElement 读取 xml 版本 2 并出错。这是我的示例 xml

```
<?xml version="2.0"?>
<books>
  <book id="978-1594489501">
    <title>My books</title>
    <author>Someone</author>
    <publisher>publisher</publisher>
    <price>14.27</price>
  </book>
</books> 
```

PHP代码：

```
$xml = new SimpleXMLElement('books.xml', null, true);
$attributes = $element->attributes();   // get all attributes
$children   = $element->children();     // get all children

foreach($children as $key => $value){
  echo $value;
} 
```

# javascript - 导航损坏：菜单链接“主页”指向不存在的 ID“#home” - javascript 提示

> ID：10943365
> 
> 赞同：0
> 
> 时间：2012-06-08T05:09:18.180
> 
> 标签：javascript, jquery, css, ruby-on-rails-3

自从我使用asset.precompiling（意思是在生产中启用它）以来，我开始在本地看到时髦的功能。

具体来说，当页面刚刚加载时，我开始看到这个弹出窗口。

```
Navigation Broken: The menu link "Home" points to a nonexistent ID "#home". 
To solve this, add the ID "home" to a tag, for example: <article id="home"> 
```

![弹出窗口](../Images/a77ed3000b3b0012711fad28f0fb0e45.png)

一旦我点击弹出窗口，链接就可以正常工作。

这是一个单页站点，因此当我单击菜单项时，它会正确向下滚动。

`nav`外观是这样的：

```
<nav class="menu two-thirds column omega">
            <ul>
                <li><a href="#home" class="active">Home</a><br /></li>
                <li><a href="#features" class="active">What is it?</a><br /></li>
                <li><a href="#pricing" class="active">How much?</a><br /></li>
                <li><a href="/login" class="active">Login</a><br /></li>                
            </ul>
        </nav> 
```

实际元素如下所示：

```
<article id="features" class="dark"> 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T23:26:59.140

我发现的修复只是将锚标签的路径从`#home`更改为`\#home`。

不知道是什么导致了这个问题，但这为我解决了这个问题。

# sql - 季度日期计算

> ID：10943369
> 
> 赞同：1
> 
> 时间：2012-06-08T05:09:45.477
> 
> 标签：sql, sql-server-2008

我在每个季度最后一个月的第一个日期安排工作时遇到问题。这将非常容易，因为我可以获得每个季度的最后一个月，然后将第一个日期附加到它上面

```
select START_DATE,
CONVERT(datetime,CAST(YEAR(START_DATE) as VARCHAR(4))+'/'+
                 CAST(DATEPART(Q,START_DATE)*3 as VARCHAR(2))+'/01 00:00:00',120
       ) as SCHEDULE_DATE_LAST_MONTH_OF_QUARTER
from JOB_SCHEDULE_CONFIGURATION 
```

绊脚石是 START_DATE。我将举例说明

```
START_DATE SCHEDULE_DATE_LAST_MONTH_OF_QUARTER
2012/05/01 2012/06/01 --correct schedule
2012/02/15 2012/03/01 --correct schedule
2012/06/15 2012/06/01 ---problem at this line I will explain why 
```

开始日期恰好是 2012 年 6 月 15 日，我无法在开始日期之前安排工作，即 2012 年 6 月 1 日。我必须在 2012/06/15 之后安排它，这意味着该工作应该安排在下一个季度，即 2012/09/01

应该如何修改查询？我想可能会涉及到一些数学问题，而我真的不擅长数学。请帮忙。

谢谢

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:25:06.983

```
declare @T table
(
  START_DATE date
)

insert into @T values
('2012-05-01'),
('2012-02-15'),
('2012-06-15')

select dateadd(month,
               2,
               dateadd(quarter,
                       datediff(quarter,
                                0,
                                dateadd(month,
                                        case when day(START_DATE) >= 15
                                          then 1
                                          else 0 
                                        end,
                                        START_DATE)),
                       0))
from @T 
```

**更新：**

此查询的主要部分是获取一个季度的第一个日期，这是通过 dateadd/datediff 技巧完成的。

```
select dateadd(quarter, datedifF(quarter, 0, START_DATE), 0)
from @T 
```

结果：

```
-----------------------
2012-04-01 00:00:00.000
2012-01-01 00:00:00.000
2012-04-01 00:00:00.000 
```

您想要本季度的最后一个月，所以我们添加了`dateadd(month, 2`

```
select dateadd(month, 2, dateadd(quarter, datedifF(quarter, 0, START_DATE), 0))
from @T 
```

结果：

```
-----------------------
2012-06-01 00:00:00.000
2012-03-01 00:00:00.000
2012-06-01 00:00:00.000 
```

只剩下上个月 15 日之后的日期应该在下个季度末的部分。`day(START_DATE)`将为您提供月份中的某一天，因此如果`day(START_DATE) >= 15`使用案例语句，我们可以将 1 个月添加到 START_DATE。

```
select dateadd(month, case when day(START_DATE) >= 15 then 1 else 0 end, START_DATE)
from @T 
```

结果：

```
----------
2012-05-01
2012-03-15
2012-07-15 
```

把它们放在一起，它会看起来像这样。

```
select dateadd(month, 2, dateadd(quarter, datedifF(quarter, 0, dateadd(month, case when day(START_DATE) >= 15 then 1 else 0 end, START_DATE)), 0))
from @T 
```

结果：

```
-----------------------
2012-06-01 00:00:00.000
2012-03-01 00:00:00.000
2012-09-01 00:00:00.000 
```

# asp.net - .NET Jitter 可以优化 While XmlReader.Read 循环吗？

> ID：10943370
> 
> 赞同：1
> 
> 时间：2012-06-08T05:09:48.073
> 
> 标签：asp.net, .net, jit, xmlreader

[我问了一个单独的问题（现已删除），我认为实际问题是什么。]

.NET Jitter 是否不能实际执行此循环：

```
Private Shared Sub CheckXmlValidity(ByVal textReader As System.IO.StreamReader)
  Try
    ' Check for "interesting" xml documents.
    Dim settings = New System.Xml.XmlReaderSettings()
    settings.XmlResolver = Nothing
    settings.MaxCharactersInDocument = 655360
    ' Successfully parse the file, otherwise an XmlException is to be thrown.
    Dim reader = System.Xml.XmlReader.Create(textReader, settings)
    Try
      While reader.Read()
        'Just checking.
      End While
    Finally
      reader.Close()
    End Try
  Catch ex As Exception
    Throw New HttpException(500, "Invalid Xml data", ex)
  End Try
End Sub 
```

我希望不完全是因为可能引发的异常的副作用，但我只是在检查......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:15:40.410

JITer，实际上是任何优化器，只能删除对问题执行没有影响的项目。在 .Net 中很难证明一种方法没有效果。特别是因为如果源对象是，每个方法调用都会产生影响`null`（它会抛出异常）。因此，即使是已知为无操作的方法也无法在不插入`null`排序检查的情况下完全删除 (1)

在这种情况下`XmlReader.Read`，是一种`abstract`更难的非密封类型的方法。`XmlReader.Read`只有当 JITer 知道 的每个实现都是空操作并因此无效时，它才能删除此调用 。但它永远无法知道这一点，因为 的推导数`XmlReader`不是一个固定的集合。一个新的 DLL 可以在任何时候加载，它的新派生`XmlReader`具有有意义的定义，因此不能被优化掉。

(1) 注意：我并不是说 JITer 会这样做，只是说如果它删除了方法，则需要进行某种形式的`null`检查。

# android - MySpace 与 Android 的集成

> ID：10943376
> 
> 赞同：0
> 
> 时间：2012-06-08T05:10:15.203
> 
> 标签：android, myspace

您好我正在尝试将 MySpace 与我的 Android 应用程序集成。由于我是新手，你能告诉我从哪里开始吗？我需要遵循任何说明来实现这一目标吗？

给我一些链接或博客，这将有助于做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:19:12.073

您可以查看这些将 MySpace 与您的 Android 应用程序集成的教程：

[http://code.google.com/p/myspace-android-sdk/wiki/HowToUse](http://code.google.com/p/myspace-android-sdk/wiki/HowToUse)

[MySpaceID SDK for Java Android](http://wiki.developer.myspace.com/index.php?title=Category%3aMySpaceID_SDK_for_Java_Android)

[http://developer.myspace.com/](http://developer.myspace.com/)

[您可以从这里](http://wiki.developer.myspace.com/index.php?title=Category%3aMySpaceID_SDK_for_Java_Android)下载 MySpace Android SDK以将 MySpace 集成到您的应用程序中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T07:19:47.157

使用 SocialAuth Library 整合 Myspace

[http://code.google.com/p/socialauth-android/](http://code.google.com/p/socialauth-android/)

# ruby - 红宝石，返回重复计数

> ID：10943382
> 
> 赞同：0
> 
> 时间：2012-06-08T05:12:14.887
> 
> 标签：ruby, arrays, duplicates, duplicate-removal, badge

我想知道是否有人可以帮助我返回重复计数？

我一直在阅读 [如何计算 Ruby 数组中的重复项](https://stackoverflow.com/questions/1765368/how-to-count-duplicates-in-ruby-arrays)

这非常接近我想要的。但是代码很难理解。

例如，如果我有一个数组...

```
[#<Badge id: 1, name: "justice">, #<Badge id: 9, name: "resonator">, #<Badge id: 9, name: "resonator"> ] 
```

我想要一个函数，它会返回一些指示用户有 2 个徽章“谐振器”。

我试图创建一个类似于 stackoverflow 工作方式的徽章系统。有些徽章可以多次授予，如果是，我想要对徽章进行某种形式的计数。但是我在思考如何做到这一点时遇到了很多麻烦。我想首先我需要计算重复的数量。

最终在我的代码结束时，我只是像这样渲染徽章名称

```
<li>
    <%= badge_item.name %>
</li> 
```

这样它就会显示类似...

徽章：

正义

谐振器 x2

我怎样才能做到这一点？删除重复项是正确的方法吗？帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:23:04.497

你可能想做这样的事情：

控制器：

```
@badge_names_with_counts = user.badges.count(group: :name) 
```

看法：

```
<% @badge_names_with_counts.each do |badge_name_with_count| %>
  <%= badge_name_with_count.name %> x<%= badge_name_with_count.count %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:37:04.010

好吧，也许有一种更花哨的 ruby​​ 方法可以做到这一点，但首先你可以这样做：

```
badges = [#<Badge id: 1, name: "justice">, #<Badge id: 9, name: "resonator">, #<Badge id: 9, name: "resonator"> ]
counts = {}

badges.each do {|badge|
  #depends on you whether you want to count by id or name
  counts[badge.id] ||= 0
  counts[badge.id] += 1
} 
```

然后您可以安全地使您的数组独一无二并显示如下计数：

```
badges.uniq!

badges.each do |badge|
  puts badge.name
  puts counts[badge.id]
end 
```

但我很确定 ruby​​ 中有一个更好的迭代器来计算。也许那注入或减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T00:49:13.503

由于某种原因，方法 .count 不起作用。也许我没有从数据库中拉出来或其他什么？所以我在我的控制器中做了..

```
@badge_names_with_counts = @user.badges.group_by(&:name) 
```

它返回一个哈希，我通过它循环...

```
<% if @badge_names_with_counts.any? %>
    <ol class='badges'>
    <% @badge_names_with_counts.each do |key, value| %>
        <% if value.count > 1 %>
            <li><%= key %> x <%= value.count %></li><br/>
        <% else %>
            <li><%= key %></li><br/>
        <% end %>
    <% end %>
    </ol>
<% end %> 
```

# grails - 删除多对多关系的一侧

> ID：10943385
> 
> 赞同：0
> 
> 时间：2012-06-08T05:12:50.250
> 
> 标签：grails, grails-orm

我正在尝试使用“5.2.1.3Many-to-many”部分中给出的示例在 Grails 1.3.7 中建立多对多关系。以下是域：

```
class Author {

String name

static mapping = {
    table 'authorx'
}

static hasMany = {
    books: Book
}
}

class Book {

String name

static mapping = {
    table 'bookx'
}

static hasMany = {
    authors: Author
}

static belongsTo = [Author]
} 
```

以下行不适用于这些域中的任何一个：

```
author.books
book.authors 
```

此外，数据库中没有创建应该是联结表的 authorx_bookx 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:40:11.923

问题是在其中一个域中使用 { 和 } 而不是 [ 和 ]。

# python - 在 DateTimeProperty Google App Engine 上找不到匹配的索引

> ID：10943388
> 
> 赞同：0
> 
> 时间：2012-06-08T05:13:39.963
> 
> 标签：python, google-app-engine, indexing

我正在使用 Google App Engine、Python 并且正在构建一个功能，允许用户按票数或 creation_date 对他们的照片进行排序。

**模型应如下所示：**

```
class MyUser(db.Model):
    user = db.UserProperty(required=True)
    name = db.StringProperty()
class UserImage(db.Model):
    user = db.ReferenceProperty(MyUser,collection_name='user_images')

    image_key = blobstore.BlobReferenceProperty(required=False)
    creation_date = db.DateTimeProperty(required=True,auto_now_add=True)
    votes = db.IntegerProperty(required=False) 
```

**我想运行两个查询：**

```
my_user = db.get('my_user_key')
1) image_keys = my_user.user_images.order('-votes').fetch(100,keys_only=True)
2) image_keys = my_user.user_images.order('-creation_date').fetch(100,keys_only=True) 
```

第一个查询运行得很好，但第二个给我*NeedIndexError: no matching index found*即使我将这些属性添加到**index.yaml**

**这是我的 index.yaml**

```
indexes:
- kind: UserImage
  properties:
  - name: user
  - name: votes
    direction: desc
  - name: creation_date
    direction: desc 
```

Google App Engine 仪表板告诉我**所有索引**现在都在提供服务。

* * *

**更新**

我在 index.yaml 中写的实际上是 Order By votes，然后是 creation_date。正如dragonx所建议的那样。我将它们分开，它按预期工作。

* * *

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:32:22.030

尝试单独的索引

```
indexes:
- kind: UserImage
  properties:
  - name: user
  - name: votes
    direction: desc

- kind: UserImage
  properties:
  - name: user
  - name: creation_date
    direction: desc 
```

# android - 为什么 Android Facebook 界面不能与 Fragments 一起使用？

> ID：10943392
> 
> 赞同：2
> 
> 时间：2012-06-08T05:14:06.257
> 
> 标签：android, android-fragments, actionbarsherlock, facebook-android-sdk, fragmentpageradapter

我正在将一些 Android **Facebook**代码从`Activity`a 切换到`Fragment`. 在切换之前一切正常，但现在`onComplete()`回调没有被执行。

Facebook 代码是否不适用于**Fragments**，还是我做错了什么？

这是原始代码（在 a 中`SherlockActivity`）：

```
if (!mFacebook.isSessionValid()) {
    mFacebook.authorize(MyActivity.this, permissions, new DialogListener() {
        @Override
        public void onComplete(Bundle values) { ... }    // CALLED AS EXPECTED
    }
} 
```

这是新代码（在 SherlockFragment 中）：

```
if (!mFacebook.isSessionValid()) {
    mFacebook.authorize(getActivity(), permissions, new DialogListener() {
        @Override
        public void onComplete(Bundle values) { ... }    // DOES NOT GET CALLED
    }
} 
```

Activity 和 Fragment 都包含 Facebook 要求的相同 onActivityResult()：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    mFacebook.authorizeCallback(requestCode, resultCode, data);
} 
```

谢谢你的帮助！

[编辑：这里](https://stackoverflow.com/questions/8835094/does-the-facebook-sdk-only-work-with-activities)提出了一个类似的问题，接受的答案是将 更改`Fragment`为`FragmentActivity`. 但我不明白这有什么帮助，因为它不再是一个`Fragment`（我出于其他原因需要它）。建议？

编辑 2：我推出了自己的解决方案。见下文。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T20:36:29.593

据我所知，Facebook auth API 不支持**Fragments**。具体来说，`onComplete()`来自 Facebook`authorize()`调用的回调适用于**Activities**，但不适用于**Fragments**。

**所以我为Fragments**整理了一个简单的解决方法。解决方案取决于调用完成时在父**Activity**`onActivityResult()`中也被调用的事实，因此您可以使用它为**Fragment**设置单独的*回调*机制。**`authorize()`**

 *******首先，在父Activity**中设置一个变量来携带目标**Fragment的**名字，比如说

```
TargetFragment mTargetFragment; 
```

您可以在 Fragment 首次实例化时对其进行初始化，如下所示：

```
@Override
public void onAttachFragment(Fragment fragment) {
    super.onAttachFragment(fragment);

    String fragmentSimpleName = fragment.getClass().getSimpleName();

    if (fragmentSimpleName.equals("TargetFragment"))
        mTargetFragment = (TargetFragment)fragment;        
} 
```

然后在 onActivityResult() 函数中添加几行：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (mTargetFragment != null)       
        mTargetFragment.myCallBack(requestCode, resultCode, data);
} 
```

现在您可以模仿通常放在新 myCallBack() 函数中的 onComplete() 回调中的代码：

```
public void myCallBack(int requestCode, int resultCode, Intent data) {
    mFacebook.authorizeCallback(requestCode, resultCode, data);

    // other code from your onComplete() function ...
} 
```

我希望这可以帮助别人。干杯!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T09:15:53.000

我已经下载了最新版本的 Facebook SDK，我也遇到了同样的问题，[gcl1](https://stackoverflow.com/users/1322527/gcl1)的解决方案工作正常，但我必须对活动结果做更多​​的事情，所以我在父活动上做了这个：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (mTargetFragment != null) {
        mTargetFragment.onActivityResult(requestCode, resultCode, data);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T13:07:33.530

Facebook SDK don't works with Fragment, but works with FragmentActivity. So you need:

1.  Catch the FB login info in onActivityResult() in your parent FragmentActivity.
2.  Pass activity results to your child Fragment

example:

1.

```
public class MainActivity extends FragmentActivity(){

/* catch FACEBOOK login info and call onFBLoginActivityResult() to pass it to FacebookFrragment*/
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

       android.support.v4.app.FragmentManager fm =   getSupportFragmentManager();
       FacebookFragment fbfragment= (FacebookFragment ) fm.findFragmentByTag("facebookfragment");
       selectPKEConfigFragment.onFBLoginActivityResult(requestCode, resultCode, data);

    }

} 
```

2.

```
public class FacebookFragment extends Fragment{

        @Override
            public View onCreateView(LayoutInflater inflater, ViewGroup container, 
                Bundle savedInstanceState) {
        // ........... 

         // start Facebook Login

                    Session.openActiveSession(getActivity(), true, new Session.StatusCallback() {

                      // callback when session changes state
                      @Override
                      public void call(Session session, SessionState state, Exception exception) {
                        if (session.isOpened()) {
                          // make request to the /me API
                          Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                            // callback after Graph API response with user object
                            @Override
                            public void onCompleted(GraphUser user, Response response) {
                              if (user != null) {
                               // TextView welcome = (TextView) findViewById(R.id.welcome);
                               // welcome.setText("Hello " + user.getName() + "!");
                                  Log.i(TAG,"User: " + user.getName());
                              }
                              else  Log.i(TAG,"User: null");
                            }
                          });
                        }
                        else Log.i(TAG,"session closed");
                      }

                    });

            }

        /*
         * replace onActivityResult
         */
        public void onFBLoginActivityResult(int requestCode, int resultCode, Intent data){
             Log.i(TAG,"Activity result SelectPKEConfig");
            Session.getActiveSession().onActivityResult(getActivity(), requestCode, resultCode, data);
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-25T08:42:12.890

实际上，如果您查看[Android 版 Facebook Docs，](https://developers.facebook.com/docs/android/login-with-facebook/v2.2?locale=tr_TR)您会看到登录示例在其中使用了片段。

**Facebook SDK 提供了LoginButton**小部件，它有一个名为 setFragment 的方法，您可以传递要使用登录功能的目标片段。

# 在您的片段布局中

添加 Facebook SDK 提供的登录按钮。

```
 <com.facebook.widget.LoginButton
            android:id="@+id/facebook_login_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginTop="30dp" /> 
```

# 在你的片段中

在您的片段中创建**UiLifecycleHelper**和**StatusCallback**对象。

```
private UiLifecycleHelper uiHelper;
private Session.StatusCallback callback = new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        onSessionStateChange(session, state, exception);
    }
}; 
```

添加处理用户状态更改的方法。

```
private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    if (state.isOpened()) {
        Log.i("LoginFragment", "Logged in...");
        Log.i("LoginFragment", session.getAccessToken());
        doAnythingWithTheFacebookToken(session.getAccessToken());
    } else if (state.isClosed()) {
        // this part is called when user login fails
        Log.i("LoginFragment", "Logged out...");
    }
} 
```

覆盖片段生命周期方法

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    uiHelper = new UiLifecycleHelper(getActivity(), callback);
    uiHelper.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    // inflate your fragment view

    facebookLoginButton = (LoginButton) view.findViewById(R.id.facebook_login_button);
    facebookLoginButton.setFragment(this);
}

@Override
public void onResume() {
    super.onResume();
    // For scenarios where the main activity is launched and user
    // session is not null, the session state change notification
    // may not be triggered. Trigger it if it's open/closed.
    Session session = Session.getActiveSession();
    if (session != null &&
            (session.isOpened() || session.isClosed())) {
        onSessionStateChange(session, session.getState(), null);
    }

    uiHelper.onResume();
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
}

@Override
public void onPause() {
    super.onPause();
    uiHelper.onPause();
}

@Override
public void onDestroy() {
    super.onDestroy();
    uiHelper.onDestroy();
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    uiHelper.onSaveInstanceState(outState);
} 
```

# 结果

通常你需要在你的活动中覆盖**onActivityResult**但在 Facebook 登录按钮上调用**setFragment()**允许你的片段在它自己的**onActivityResult**中接收结果。

如果您想使用不同的按钮（例如您自己的按钮）：

*   在布局中隐藏 facebookLoginButton

*   在实际按钮的 onclick 侦听器中调用facebookLoginButton 上的**performClick()**

而已。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-30T11:18:41.030

我们不需要在片段类的主要活动内部和片段内部配置onActivityResult。只需将下面的代码放在包含您的片段的主要活动中，然后在片段中执行其余的 facebook sdk 代码......它很简单。

```
 @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(ChatScreen.this, requestCode,
                resultCode, data);
    } 
```*****

# vb.net - 高速环形缓冲器

> ID：10943396
> 
> 赞同：2
> 
> 时间：2012-06-08T05:14:42.330
> 
> 标签：vb.net, memory-leaks, dispose, circular-buffer

我被要求提高用于高速数据采集的应用程序的内存效率。在多次运行 VS 内存分析器并扫描项目以查找明显问题后，我得出以下结论：尽管使用固定大小的循环缓冲区来存储获取的样本点，但 RAM 使用量相对于轮询周期会增加。例如：在 2 微秒内轮询一个信号的数据可以使用比以 50 微秒运行时多 5 倍的内存（私有字节）......即使缓冲区大小相同。

循环缓冲区是一组 SamplePoint 对象。这些对象中的每一个都包含一组 Shorts（16 位）用于每个信号的相应数据和一个日期对象（8 个字节）用于时间戳。为提高效率，循环缓冲区每次开始轮询时仅重新调整一次，并填充空样本点，然后“分配”。

此外，似乎当我们停止并运行应用程序时，它每次都会占用更多内存，就好像 Redim 没有释放先前的数组一样。

我的问题归结为以下几点：

实现包含具有数组的托管对象的循环缓冲区的最节省内存的方法是什么？此外，具有不同轮询速度的固定大小数组如何以及为什么会增加内存使用量？垃圾收集器没有时间吗？当子或函数退出时，局部变量是否会立即被处理掉？

这些是我想在继续之前排除的一些疑虑和担忧。感谢您抽出宝贵时间。另外，我可以发布代码，但这将毫无意义，因为它有很多并且分散了。

编辑：这是我编写的一些精简代码，反映了循环缓冲区的初始化、填充和重置。看到任何错误？

```
 ''' <summary>
''' Initialize internal list circular buffer.
''' </summary>
''' <param name="sizeOfBuffer"></param>
''' <remarks>
''' This is done for efficiency to avoid creating new samples points 
''' and redimensioning samplepoint data arrays for every read. Instead
''' the buffer is created and each samplepoint re-used. 
''' </remarks>
Friend Sub InitializeCircularBuffer(ByVal sizeOfBuffer As Integer, ByVal smpleDataSize As Integer, ByVal name As String)

    Dim mutexName As String = CreateMutexName(name)
    'First check for already existing mutex, otherwise create a new one
    Try
        _Mutex = Mutex.OpenExisting(mutexName)
    Catch ex As WaitHandleCannotBeOpenedException
        'Intialize mutex for each shared memory with unique names
        _Mutex = New Mutex(False, mutexName)
    Catch ex As UnauthorizedAccessException
        'Intialize mutex for each shared memory with unique names
        _Mutex = New Mutex(False, mutexName)
    End Try

    _Mutex.WaitOne()
    Try
        _SampleDataSize = smpleDataSize

        'Check size is valid, otherwise use the shared memory numSamples as default
        If sizeOfBuffer <= 0 Then
            _CircularBufferSize = _DefaultBufferSize
        Else
            _CircularBufferSize = sizeOfBuffer
        End If

        'Initialize/Reset circular buffer
        If _CircularBuffer Is Nothing Then
            _CircularBuffer = New List(Of SHM_SamplePoint)
        Else
            _CircularBuffer.Clear()
        End If

        'Create empty sample points with redimensioned data arrays in buffer 
        For i = 0 To _CircularBufferSize - 1
            _CircularBuffer.Add(New SHM_SamplePoint(_SampleDataSize))
        Next

        'Set current index to last place in buffer
        'It is incremented to first place when buffer
        'is being populated
        _CurrentIndex = _CircularBufferSize - 1

        _CircularBufferInitialized = True
    Catch ex As Exception
    Finally
        _Mutex.ReleaseMutex()
    End Try
End Sub

''' <summary>
''' Packages raw data and populates circular buffer.
''' </summary>
Friend Sub PopulateCircularBuffer(ByRef rawData() As Double, ByVal rawTimeStamps() As Double, ByVal numSamples As Integer, Optional ByVal startIndex As Integer = 0)
    _Mutex.WaitOne()
    Try
        _NumNewSamples = numSamples
        If _NumNewSamples > 0 Then
            For i As Integer = startIndex To _NumNewSamples - 1
                'Get index of next sample to be overwritten
                _CurrentIndex = (_CurrentIndex + 1) Mod _CircularBufferSize
                'Assign time-stamp
                _CircularBuffer(_CurrentIndex).TimeStamp = Date.FromOADate(rawTimeStamps(i))
                'Assign data
                Array.ConstrainedCopy(rawData, (i * _SampleDataSize), _CircularBuffer(_CurrentIndex).Data, 0, _SampleDataSize)
            Next
        End If
    Catch ex As Exception
    Finally
        _Mutex.ReleaseMutex()
    End Try
End Sub

''' <summary>
''' Empty the circular buffer.
''' </summary>
''' <remarks></remarks>
Friend Sub ResetCircularBuffer()
    For i As Integer = 0 To _CircularBuffer.Count - 1
        _CircularBuffer(i).Data = Nothing
        _CircularBuffer(i).TimeStamp = Nothing
    Next
    _CircularBuffer.Clear()
    _CircularBuffer.TrimExcess()
    'Signal garbage collection
    GC.Collect()
    _CircularBufferSize = 0
    _CircularBufferInitialized = False
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:19:19.660

垃圾收集器会在认为合适的时候处理对象。事实上，我正在开发的一个应用程序现在获取内存的速度非常快，以至于 GC 直到进程使用大约 1.4GB 的 RAM 才开始释放 RAM（即使只有大约 100K 正在使用中，其余的有资格收集）。

根据您的描述，我完全不清楚为什么内存利用率应该与采样率成反比（给定一个固定大小的缓冲区）。我同意发布相关代码是明智之举的评论。

如果您当前使用的是工作站之一（反之亦然），您可以尝试使用服务器垃圾收集器来查看结果是否有所不同。

[我们应该使用“工作站”垃圾收集还是“服务器”垃圾收集？](https://stackoverflow.com/questions/1707240/should-we-use-workstation-garbage-collection-or-server-garbage-collection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:05:06.063

通过将“ByVal rawTimeStamps() As Double”更改为 ByRef，您将在内存占用方面获得小幅改进，因为将为 ByVal 复制数组。

此外，存储原始时间戳并仅调用 Date.FromOADate 来转换从缓冲区中提取的值 - 您正在创建您可能永远不需要的 Date 对象（如果缓冲区环绕）。

# sql-server - 如何提高 STAsText() 对 SQL Server 2008 中空间 GEOMETRY 数据类型的结果精度？

> ID：10943399
> 
> 赞同：2
> 
> 时间：2012-06-08T05:14:50.807
> 
> 标签：sql-server, sql-server-2008, geometry, spatial

我在 SQL Server 2008 中有一个表，其中包含一个名为 SHAPE 的 GEOMETRY 类型的列。同一表的另一列称为 WKT 的计算列公式定义为：

```
([SHAPE].[STAsText]()) 
```

[SHAPE] 列用于存储一堆 POINT（经纬度），而 [WKT] 用于存储其 Well-Known Text。

但是，WKT 表示的精度低于实际的经度和纬度。

例如，如果 x = 142.592896 和 y = -38.38580099，则其 WKT 表示为 POINT (142.593 -38.3858)。如何将其表示为 POINT (142.592896 -38.38580099)？

谢谢！！

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:32:14.940

我认为这可能取决于存储纬度和经度的列类型，我认为它们可能是浮点数。您可以尝试将它们更改为 decima(x,y)，如果您真的需要，甚至可以更改为字符串。

请看下面我的例子：

```
DECLARE @X FLOAT =  142.59289600001
DECLARE @Y FLOAT = -38.3858009900001

DECLARE @X2 DECIMAL(28,18) =  142.59289600001
DECLARE @Y2 DECIMAL(28,18)= -38.3858009900001

SELECT 
    a.Geog.STAsText() AS WKT
,   b.Geog.STAsText() AS WKT_2
,   c.Geog.STAsText() AS WKT_3
FROM 
(
    SELECT 
        GEOGRAPHY::STGeomFromText('POINT(142.59289600001 -38.3858009900001)', 4326) AS Geog
) a
,
(
    SELECT 
        GEOGRAPHY::STGeomFromText('POINT(' + CAST(@X AS VARCHAR(25)) + ' ' + CAST(@Y AS VARCHAR(25)) + ')', 4326) AS Geog
)b
,
(
    SELECT 
        GEOGRAPHY::STGeomFromText('POINT(' + CAST(@X2 AS VARCHAR(25)) + ' ' + CAST(@Y2 AS VARCHAR(25)) + ')', 4326) AS Geog
)c 
```

# iphone - 如何将 iPhone 中的联系人分类为多个类别？

> ID：10943400
> 
> 赞同：0
> 
> 时间：2012-06-08T05:15:07.193
> 
> 标签：iphone, addressbook

我目前正在我的应用程序中实现地址簿。但是我遇到了地址簿的一个问题，那就是我想根据联系人类型从地址簿中传递联系人。我的意思是，如果联系人类型是个人，则保存在个人类别中，或者如果是业务类型，则保存在业务类别中。

但是在通讯簿中，我没有得到任何可以根据联系人类型对联系人进行分类的事件。如果有人有任何想法，请与我分享。

我也使用过此代码，但我总是得到个人类型的联系。

```
 CFNumberRef recordType = ABRecordCopyValue(aSource, kABPersonKindProperty);
    if (recordType == kABPersonKindPerson) {
        phone_book_data.Type=[NSString stringWithFormat:@"personal"];
    } 
    else{
        phone_book_data.Type=[NSString stringWithFormat:@"business"];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:44:31.523

来自`ABPerson Reference`：

`Person Type Property`

这些常量实现了 person 类型属性（type 的属性`kABIntegerPropertyType`），它指示人员记录是代表一个人还是一个组织。

```
const ABPropertyID kABPersonKindProperty;
const CFNumberRef kABPersonKindPerson;
const CFNumberRef kABPersonKindOrganization; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:33:53.190

iphone通讯录中可以插入两种类型的联系人。(1)个人和(2)组织。我不知道如何在 iPhone 通讯录中添加组织联系人，但我知道如果它会在您的代码中检测到记录类型“kABPersonKindOrganization”，它将进入 else 循环。因此，如果您能找到如何将组织联系人插入电话簿，您就可以完美地测试它。

# php - 如何在javascript中显示目录的所有图像？

> ID：10943405
> 
> 赞同：3
> 
> 时间：2012-06-08T05:15:44.637
> 
> 标签：php, javascript, jquery, directory-traversal

我想在 javascript 的帮助下动态显示目录中的所有图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T05:20:52.150

我不相信这是可能的，但是如果您向 ASP.NET 或 PHP（或类似）页面发出 AJAX 请求，他们可以列出文件夹中的文件并将其返回以供 Javascript 显示。

跨域策略显然适用。

如果您使用的是 PHP，您应该对目录使用递归来获取完整的文件结构。PHP 有一个可以使用的[扫描目录函数。](http://www.php.net/manual/en/function.scandir.php)

基本代码示例：

```
function listdir($folder) {
    if (!is_dir($folder)) {
        return array(); //empty if not a folder
    }
    $return = scandir($folder);
    $subfolders = array();
    array_shift($return); //first two values are always .. & .
    array_shift($return);
    foreach ($return as $key => $value) {
        if (is_dir($value)) {
            unset($return[$key]);
            $subfolders[$value] = listdir($value); //recursively analyse the subdirectory
        }
    }
    return array_merge(array_values($return), $subfolders);

} 
```

注意：这还没有测试，如果它不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:24:55.957

基本的 PHP 示例：

```
<?php

foreach(glob("/path/to/images/{*.gif,*.jpg,*.png,*.jpeg,*.bmp}", GLOB_BRACE) as $image){
    echo '<img src="'.$image.'">';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T05:24:26.673

除非目录有索引或者您事先知道文件名，否则无法使用纯 javascript 执行此操作。仍然使用 php 的替代方法如下：

*   向 php 文件发送[ajax](http://api.jquery.com/jQuery.ajax/)请求，数据为目录名

*   然后 PHP 文件使用 , 等命令访问`opendir`目录`readdir`内容`scandir`。有关通过 php readdir/scandir 命令或[此（通过 glob）](http://www.brightcherry.co.uk/scribbles/php-list-all-files-in-a-directory/)读取目录的更多详细信息，请参阅此[SO 问题](https://stackoverflow.com/questions/2014474/php-read-sub-directories-and-loop-through-files-how-to)或[此链接](http://www.clanthemes.com/tutorials-view-140-display-all-files-in-a-directory.html)

*   PHP 文件将文件名（此处为图像名称）作为 json 对象返回。

*   在客户端，ajax 响应以 json 对象的形式出现。

*   完毕！您拥有该文件夹中的所有图像。

# php - PHP sql md5 注册

> ID：10943409
> 
> 赞同：1
> 
> 时间：2012-06-08T05:16:37.777
> 
> 标签：php, sql, login, md5

我创建了一个 php 注册表单。它工作正常。但是当我将它修改为 md5 密码时，它没有运行。此外，我可以通过哪些方式保护/修改它以消除 SQL 注入攻击。

```
 require_once("functions/validation_employee_signup.php");

if( isset($_POST['send']) && (!validateName($_POST['name']) || !validateEmail($_POST['email']) || !validatePasswords($_POST['pass1'], $_POST['pass2']) || !validateContact($_POST['contact']) || !validateAge($_POST['age'])) ):?>
            <div id="error">    
                <ul>
                    <? if(!validateName($_POST['name'])):?>
                        <li><strong>Invalid Name:</strong> We want names with more than 3 letters.</li>
                    <? endif?>
                    <? if(!validateEmail($_POST['email'])):?>
                        <li><strong>Invalid E-mail:</strong> Type a valid e-mail please.</li>
                    <? endif?>
                    <? if(!validatePasswords($_POST['pass1'], $_POST['pass2'])):?>
                        <li><strong>Passwords are invalid:</strong> Passwords doesnt match or are invalid!</li>
                    <? endif?>
                    <? if(!validateContact($_POST['contact'])):?>
                        <li><strong>Please enter a valid number.</strong></li>
                    <? endif?>
                    <? if(!validateAge($_POST['age'])):?>
                        <li><strong>Please enter a valid age</strong></li>
                    <? endif?>
                    </ul>
            </div>
        <?php elseif(isset($_POST['send'])):?>
            <div id="error" class="valid">
                <ul>
                <?php
                require_once('functions/connection.php'); 
                $query = "INSERT INTO employee (name, md5(password), email, contact, age, gender, location, skill, work) VALUES ";                           
                $query .= "('".$_POST['name']."', '".$_POST['pass1']."', '".$_POST['email']."','".$_POST['contact']."','".$_POST['age']."','".$_POST['gender']."','".$_POST['location']."','".$_POST['skill']."','".$_POST['work']."')";
                // run the query
                mysql_query($query);?>
                <li><strong>Congratulations!</strong> You have been successfully registered!</li>
                </ul>
            </div>
    <?php endif?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:36:22.513

我认为您在错误的位置添加了 MD5。它应该用于字符串而不是列名。所以你的价值观部分应该是这样的：

```
$query .= "('".$_POST['name']."', MD5('".$_POST['pass1']."'), etc... 
```

# android - ListView 不占据整个屏幕

> ID：10943410
> 
> 赞同：0
> 
> 时间：2012-06-08T05:16:39.080
> 
> 标签：android, android-listview

我已经尝试了所有可能的选项`android:background`，但没有`android:cacheColorHint`用隐藏图片`@android:color/transparent`中`@null`的 listView。

我正在尝试将灰色背景（粉红色问号）与我的应用程序的白色主题合并。

我的主题是常规`@android:style/Theme.Light.NoTitleBar`

我的布局代码是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent" >

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="1" >

        <ImageView
            android:id="@+id/abcIcon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_weight="0.15"
            android:contentDescription="@string/abcIcon"
            android:scaleType="centerInside"
            android:src="@drawable/abc" />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_weight="0.70"
            android:text="@string/app_name"
            android:textSize="@dimen/headertextsize" />

        <ImageView
            android:id="@+id/search"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_weight="0.15"
            android:contentDescription="@string/abcIcon"
            android:src="@drawable/search" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/followupHeaderLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/header"
        android:layout_gravity="center_horizontal" >

        <RelativeLayout
            android:id="@+id/followupHeaderRelativeLayout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" >

            <ImageView
                android:id="@+id/leftArrow"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:contentDescription="@string/abcIcon"
                android:src="@drawable/leftarrow" />

            <TextView
                android:id="@+id/followupHeaderText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/leftArrow"
                android:text="@string/followup"
                android:textSize="@dimen/headertextsize" />
        </RelativeLayout>

        <TextView
            android:id="@+id/followupDescriptionText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/followupHeaderRelativeLayout"
            android:layout_centerInParent="true"
            android:padding="10dp"
            android:text="@string/followupdescription"
            android:textSize="@dimen/normaltextsize" />
    </RelativeLayout>

    <TextView
        android:id="@+id/listViewHeaderText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/followupHeaderLayout"
        android:layout_marginLeft="10dp"
        android:text="@string/typeofAppt"
        android:textSize="@dimen/normaltextsize" />

    <RelativeLayout
        android:id="@+id/declarationLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="10dp" >

        <TextView
            android:id="@+id/widgetLabel"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="@string/declarationCompletion"
            android:textColor="@android:color/black"
            android:textSize="@dimen/normaltextsize" />

        <Button
            android:id="@+id/doneButton"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/widgetLabel"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="15dp"
            android:background="#436EEE"
            android:gravity="left"
            android:paddingBottom="10dp"
            android:paddingLeft="5dp"
            android:paddingTop="10dp"
            android:text="@string/doneWithFollowup"
            android:textColor="@android:color/white"
            android:textSize="@dimen/normaltextsize" />
    </RelativeLayout>

    <ListView
        android:id="@+id/listViewFollowup"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/declarationLayout"
        android:layout_below="@id/listViewHeaderText"
        android:background="@android:color/transparent"
        android:cacheColorHint="@null"
        android:choiceMode="singleChoice" />

</RelativeLayout> 
```

有什么提示吗？

![在此处输入图像描述](../Images/8537a8f82cc6e6229e2966939ab32004.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:56:10.600

我知道的唯一解决方案是根据需要创建一个宽度为 1dp 和高度的按钮，并将其放置在列表下方以填写其余部分。

我提前为这个相当“肮脏”的建议道歉 - 但是当你遇到这种问题时，我尝试了bottom_margins，填充，固定大小的背景，......我还没有找到任何一种“干净”的解决方案。

也期待关于这个主题的更好的工作建议:-)

# django - 计算 django 模板中每个键的字典值

> ID：10943411
> 
> 赞同：1
> 
> 时间：2012-06-08T05:16:39.137
> 
> 标签：django, django-templates

嗨，朋友们，他们可以通过任何方式计算 django 模板中字典的特定键的值的数量

就像假设我有一个字典

```
 y =  { 1:('A', 'B','C'), 2:('C','D','E','F') } 
```

我正在传递这个命令。从我的 django 视图中，我想计算我的 django 模板中每个键的值的数量以执行某些特定任务。

我试过计数，但它不起作用........任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:33:33.963

内置的模板过滤器`length`应该会有所帮助。
[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#length](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#length)过滤器在[Django Book](http://www.djangobook.com/en/1.0/chapter04/)
中是这样描述 的：`length`

> 长度：返回值的长度。您可以在列表或字符串或任何知道如何确定其长度的 Python 对象（即任何具有`__len__()`方法的对象）上使用它。

例子：

```
<ul>
  {% for k,v in y.items %}
    <li>key: {{ k }} has {{ v|length }} value(s)</li>
  {% endfor %}
</ul> 
```

# html - 为什么我的 CSS 中的零填充会创建“假”边距？

> ID：10943414
> 
> 赞同：0
> 
> 时间：2012-06-08T05:16:59.360
> 
> 标签：html, css

我过去曾遇到过这种情况，但我通常能够围绕这个问题进行设计——通常是通过手动将第一个 P 或 H1 标签的上边距设置为零（这次没用）。

当我将填充/边距设置为 0PX 时，为什么会得到“错误”边距？如果我给 wrap div 甚至一个 PX 填充，它会自动纠正问题并且一切看起来都不错，如果我不这样做，我会在顶部得到一个空白，这根本没有任何意义。为什么更改填充会影响包含的 div 的边距？

[JSFiddle](http://jsfiddle.net/rE9up/)

到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T05:20:25.863

这称为[保证金崩溃](http://www.howtocreate.co.uk/tutorials/css/margincollapsing)。一旦你知道这个名字，就有[很多教程](http://reference.sitepoint.com/css/collapsingmargins)可以找到；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:18:46.803

添加 a`overflow: hidden;`会变魔术。

```
#wrap
{
    width:1024px;
    height:748px;
    background:#000;
    margin:0px;
    padding:0px;
    overflow: hidden;
} 
```

# ruby - 如何使用不同版本的 ruby 但使用相同的 gemset？

> ID：10943416
> 
> 赞同：5
> 
> 时间：2012-06-08T05:17:09.037
> 
> 标签：ruby, rvm, gemset

在我的电脑上，我`ruby1.9.2-p290`使用`system`gemset 运行。我想在我的开发环境中继续测试 Ruby 的边缘版本，但我不想再次安装所有 gem 并保留相同 gem 文件的大部分相同副本。

我怎样才能切换到`ruby1.9.3-p325`使用`system`与 rvm 相同的 gemset？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:52:37.083

您可以使用：

```
rvm gemset copy 1.9.2-p290@system 1.9.3@system 
```

# android - 获取 json 数据时传递 data.java.lang.Null 指针异常时出错

> ID：10943420
> 
> 赞同：0
> 
> 时间：2012-06-08T05:17:26.310
> 
> 标签：android, android-listview, baseadapter, android-listfragment

我在自定义列表视图中做片段，同时从服务器数据库获取 json 数据到 android 移动它显示一个错误，如 data.java.lang.null 指针异常。请告诉我如何解决这个问题我在下面提到我的代码

```
 i try this code
    public class MyListFragment1 extends ListFragment {
private static final Context Context = null;
ImageView back;
String url = Main.url;
String Qrimage;
Bitmap bmp;

AppetiserFragment adapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LayoutInflater gridInflater = (LayoutInflater) getActivity()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = gridInflater.inflate(R.layout.applistviewfragment, null);

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    InputStream is = null;
    String result = "";
    JSONObject jArray = null;
    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url + "test.php");
        HttpResponse response = httpClient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        // TODO: handle exception
        Log.e("Log", "Error in Connection" + e.toString());

        // Intent intent = new Intent(ViewQRCode.this, PimCarder.class);

        // startActivity(intent);

    }
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        jArray = new JSONObject(result);
        JSONArray json = jArray.getJSONArray("appetiser");
        ListView list = (ListView) v.findViewById(R.id.list);

        adapter = new AppetiserFragment(Context, json);
        list.setAdapter(adapter);

    } catch (Exception e) {
        // TODO: handle exception
        Log.e("log", "Error in Passing data" + e.toString());
    }
}

  } 
```

AppetizerFragment.class

```
 public class AppetiserFragment extends BaseAdapter {
public static ArrayList<String> arr = new ArrayList<String>();
public static ArrayList<String> itemprice = new ArrayList<String>();
public static ArrayList<Bitmap> image = new ArrayList<Bitmap>();
String url = Main.url;
public Context Context;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, price, desc, itemno;
String[] itemnames, checkeditems, itemnos;
String[] prices;
String[] descs;
HashMap<String, String> map = new HashMap<String, String>();

public AppetiserFragment(Context context, JSONArray imageArrayJson) {
    Context = context;
    System.out.println(imageArrayJson);//here i can print json data
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];(here after code not runs correctly i thought here only the problem)
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.prices = new String[imageArrayJson.length()];
    this.descs = new String[imageArrayJson.length()];
    this.itemnos = new String[imageArrayJson.length()];
    try {

        for (int i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);

            qrimage = image.getString("itemimage");
            itemname = image.getString("itemname");
            itemno = new Integer(i + 1).toString();
            price = image.getString("price");
            desc = image.getString("itemdesc");
            System.out.println(price);
            itemnames[i] = itemname;
            prices[i] = price;
            descs[i] = desc;
            itemnos[i] = itemno;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(map);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public AppetiserFragment() {
    // TODO Auto-generated constructor stub
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View view = convertView;
    final ViewHolder viewHolder;
    if (view == null) {
        view = inflater.inflate(R.layout.appetiserlistview, null);
        System.out.println("prakash");
        viewHolder = new ViewHolder();
        viewHolder.image = (ImageView) view
                .findViewById(R.id.appetiserimage);
        viewHolder.text = (TextView) view.findViewById(R.id.appetisertext);
        viewHolder.desc = (TextView) view.findViewById(R.id.appetiserdesc);
        viewHolder.price = (TextView) view
                .findViewById(R.id.appetiserprice);
        viewHolder.appitemnum = (TextView) view
                .findViewById(R.id.appitemno);
        // viewHolder.checkbox = (CheckBox) view.findViewById(R.id.bcheck);

        view.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) view.getTag();
    }
    viewHolder.image.setImageBitmap(bmps[position]);
    viewHolder.appitemnum.setText(itemnos[position]);
    viewHolder.price.setText(prices[position]);
    viewHolder.desc.setText(descs[position]);
    // viewHolder.checkbox.setTag(itemnames[position]);
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(itemnames[position]);

    return view;
}

public void clear() {
    arr.clear();
    itemprice.clear();
    image.clear();
}

static class ViewHolder {

    protected TextView text, price, desc, appitemnum;
    protected ImageView image;
    public static CheckBox checkbox = null;
} 
```

请告诉我如何解决这个问题...请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:24:08.233

我看到的第一件事是你忘记初始化你的上下文。

改变这个

```
 private static final Context Context = null;   //variable name should not be reserved keyword 
```

到

```
private Context context= null;  
context= getActivity().getApplicationContext();  <<<<<<<<<<<<<<<

adapter = new AppetiserFragment(Context, json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:10:51.507

```
public class mm {
    private static String p;

    static void ll (String h){
        p=h;    
    }

    static String get(){    
        return p;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        ll("Mozambique is a nica country");

        System.out.println(get());
    }
} 
```

注意：- 返回方法应该没有参数。

# php - 从ajax获取时如何拆分结果数据

> ID：10943421
> 
> 赞同：-1
> 
> 时间：2012-06-08T05:17:35.757
> 
> 标签：php, javascript, jquery, ajax, logic

这是我用于进行 ajax 调用的 JS BLOCK——

```
$(document).ready(function () {
    $('#myid').change(function () {
        var optval = $('#myid').val();

        if (optval == 3) {
            var url = '<?php echo base_url ?>datapage.php';
            $.ajax({
                type: "GET",
                url: url,
                success: function (results) {
                    $('#datadiv').html(results);
                }
            });
        }

    });
}); 
```

我如何从结果中拆分数据，因为我已经尝试过类似的方法但它不起作用 `results.serialize()`。虽然评论块`datapage.php` 是一种方式，但我不想那样做

PS——

> 结果是一个完整的页面，其中包含 tr 和 td，我只想获取数据...实际上 datapage.php 也正在与其他文件一起使用，因此无法对其进行更多修改并且也没有提供创建新页面来获取数据： （......还有一件事我试图传递数据并在那个页面上使用`$get['data'] == mystring`然后获取我的愿望结果，否则做同样的事情......这是可以的还是任何其他方法？？

这就是我在结果中得到的结果——http: [//pastebin.com/ky9Lzuuu](http://pastebin.com/ky9Lzuuu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:54:11.043

如果你有一个从服务器返回的 HTML，你可以简单地使用 jQuery 选择器来获取 HTML 的所需部分并将其插入到页面中

如果它是 id 为“myTR”的特定 tr，请执行以下操作：

```
$('#datadiv').html($(results).find("tr#myTR").html()); 
```

# installation - Visual Studio 2012 安装：ngen 挂起/什么也不做

> ID：10943424
> 
> 赞同：4
> 
> 时间：2012-06-08T05:18:00.197
> 
> 标签：installation, windows-7-x64, visual-studio-2012, ngen

我一直在尝试安装 Visual Studio 2012 Professional RC（从 Windows 7 x64 上的 VS 11 Beta 升级），我发现安装程序似乎在看似任意的时间“挂起”。我使用引号，因为安装程序 UI 仍然完全响应；它似乎只是坐在那里，拒绝再往前走。我观察到的情况如下：

*   msiexec.exe 的一个实例（32 位，作为 SYSTEM 运行）固定我的 4 个内核之一。
*   vs_professional.exe 的 2 个实例似乎正在运行（都使用我的身份）。其中一个（主 UI 实例）一直在使用 1-2% 的 CPU，大概是在它执行业务时查看进度条是否必须更新等；另一个实例似乎根本不使用任何 CPU。
*   ngen.exe 的一个实例似乎无所事事，即没有CPU 使用率。

当我运行安装程序并指定日志文件位置时，我可以看到安装程序为它成功安装的所有组件生成日志文件。当它到达“挂起”的包时（每次运行安装程序时都不同），每次的共同点是它刚刚调用 ngen.exe 以在安装期间生成本机映像。 **无论我是尝试进行安装、卸载还是修复，都会发生此挂起**

我试过让机器在一夜之间完成它的工作，有时长达 16 个小时，当我回来时它仍然卡在同一点。如果我从 UI 取消设置，我会在 UI 中看到一条消息“正在停止当前会话”，但似乎没有任何反应。如果我终止 ngen.exe 进程，我可以在日志文件中看到安装程序开始生成/卸载另一个本机映像，这再次导致挂起。如果我在 UI 中单击取消后终止了非活动的 vs_professional.exe，安装将成功结束，并显示“X of Y components were installed/uninstalled successfully”消息。

有什么想法/建议吗？我想尽办法收拾这个烂摊子！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T01:27:02.867

VS2012 Update 2 的情况与我非常相似。

我发现您可以恢复暂停的 ngen 进程并完全完成安装，但我是通过单独安装所有组件（使用安装文件的 /layout 参数）来实现的。

另一个注意事项：如果您查看暂停的 ngen 进程和启动它的命令 args，您可以使用相同的 args 运行 ngen，它将成功执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T19:17:00.240

我花了一天的大部分时间来解决同样的问题。通过创建一个新的 Windows 配置文件并从那里运行安装，我取得了成功。我使用的是 Windows 8 x64（这让一切变得更加令人沮丧）

希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T03:18:48.880

以下是我一直在解决与 Windows 安装程序（SQL、VS ...）相关的几乎问题的步骤。在详细信息之前，您应该知道 Windows 保存时日志文件的路径，以便更轻松和/或自行调查：

默认为：

C:\Program Files (x86)\Microsoft SQL Server\110\Setup Bootstrap\Log 或 C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\Log 我们可以在这里看到一个或多个文件夹：SQL2008 为 100 ,110 用于 SQL2012 和 120 用于 SQL2014 ...您应该关心创建的时间/日期文件夹。是时候运行 setup.exe

现在详细介绍：

我遇到的几乎问题是挂起/什么都不做/消失......并且无法完成设置（永远挂起）-->您可以看到日志文件并自己知道它为什么永远挂起，当您阅读日志时很容易知道:)

第 1 步：确保您的源设置正确

第2步：当你遇到挂起/什么都不做..，关闭程序并重新启动01次

第 3 步：重新运行设置 - 如果仍然挂起，打开旁边的任务管理器并注意新程序“弹出”并且不会消失（在我的情况下，它挂在 ExecuteStandardTimingsWorkflow 并且我看到 Microsoft 公共语言运行时本机编译器（ngen进程）弹出并且不出现所以我手动结束任务并且Windows继续运行设置）

第 4 步：某些时间程序无法删除/删除或运行某些组件设置，因此您需要帮助。阅读日志文件并滚动结束页面，您可以看到最后的进度，如果程序无法做到，您需要帮助。

第 5 步：执行管理器并找到 Windows 安装程序（ msiexe 进程），其中一些没有响应，您需要手动将其杀死。

第6步：挂起时重新启动PC有时程序需要01重新启动才能完成某些任务，重新启动后它将自动继续。

这是我一直在做的事情，安装后 99% 的情况都已修复并稳定运行。希望这可以帮助 ：）

# ruby - Sinatra 的授权宝石

> ID：10943431
> 
> 赞同：0
> 
> 时间：2012-06-08T05:19:45.943
> 
> 标签：ruby, authorization, sinatra

我正在做一个需要一些授权的 Sinatra 项目。我正在使用 OmniAuth 进行身份验证，现在我需要 CanCan 之类的东西来处理授权。我是 Sinatra 的新手，所以我不确定是否有通用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:46:42.790

有[sinatra-can](https://github.com/shf/sinatra-can)。根据[自述文件](https://github.com/shf/sinatra-can/blob/master/README.markdown)，它“是 CanCan 授权库的轻量级包装器。它包含 CanCan 的 Rails 助手的部分实现，但在 Sinatra 中”。因此，您可以像在 Rails 中使用[CanCan一样使用 Ability 文件。](https://github.com/ryanb/cancan/)它没有涵盖 CanCan 所做的所有事情，但它的目标是。

# php - 有效答案的 Recaptcha 响应为空

> ID：10943436
> 
> 赞同：0
> 
> 时间：2012-06-08T05:20:26.483
> 
> 标签：php, recaptcha

我正在尝试将 Recaptcha 与我的一种形式集成。我设法将recaptcha放在表单上并使用Curl提交（在这篇文章的帮助下：[什么是阻止fsockopen？](https://stackoverflow.com/questions/10471942/what-is-blocking-fsockopen)）。但是，recaptcha 似乎甚至不接受正确的答案。

我不擅长 PHP，但是在调试代码时（使用 echo 进行调试）发现响应是空的。我已经花了大约 2 天的时间，但仍然无济于事。

包含 Curl 后，我是否需要对 recaptcha_check_answer 进行任何更改？

注意：我使用的是 WAMPServer 2.2（Apache：2.2.21，PHP：5.3.10）

以下是我的表单代码和提交代码的摘录。

```
/**  Recaptcha display Code**/
require_once('recaptchalib.php');
$publickey = "6LeamtESAAAAAH-77WMLP5NqvCQR8g3ZMJ7kZJvV"; // you got this from recaptcha.org

$out = '<div><label for="captcha'.$form_id.'">* '.$field_object->field_label.'</label></div>';
$out .= recaptcha_get_html($publickey);
return $out;

/** Form Submit Code **/
require_once('recaptchalib.php');
$privatekey = "6LeamtESAAAAAFM1d1Zd2XRDlTjxZRH8OaTowg7n";

$resp = recaptcha_check_answer($privatekey,
        $_SERVER["REMOTE_ADDR"],
        $_POST["recaptcha_challenge_field"],
            $_POST["recaptcha_response_field"]);

if (!$resp->is_valid) {
    if (empty($resp->error))
        $this->setFormError('captcha', __('You copied the number from the captcha field incorrectly.', 'custom-contact-forms'));
    else $this->setFormError('captcha', $resp->error);
} 
```

这是修改后的recaptcha代码

```
<?php

define("RECAPTCHA_API_SERVER", "http://www.google.com/recaptcha/api");
define("RECAPTCHA_API_SECURE_SERVER", "https://www.google.com/recaptcha/api");
define("RECAPTCHA_VERIFY_SERVER", "www.google.com");

function _recaptcha_qsencode ($data) {
        $req = "";
        foreach ( $data as $key => $value )
                $req .= $key . '=' . urlencode( stripslashes($value) ) . '&';

        // Cut the last '&'
        $req=substr($req,0,strlen($req)-1);
        return $req;
}

function _recaptcha_http_post($host, $path, $data, $port = 80) {

        $req = _recaptcha_qsencode ($data);
        $request = curl_init("http://".$host.$path);

        curl_setopt($request, CURLOPT_USERAGENT, "reCAPTCHA/PHP");
        curl_setopt($request, CURLOPT_POST, true);
        curl_setopt($request, CURLOPT_POSTFIELDS, $req);
        curl_setopt($request, CURLOPT_RETURNTRANSFER, true);

        $response = curl_exec($request);
        return $response;
}

function recaptcha_get_html ($pubkey, $error = null, $use_ssl = false)
{
    if ($pubkey == null || $pubkey == '') {
        die ("To use reCAPTCHA you must get an API key from <a href='https://www.google.com/recaptcha/admin/create'>https://www.google.com/recaptcha/admin/create</a>");
    }

    if ($use_ssl) {
                $server = RECAPTCHA_API_SECURE_SERVER;
        } else {
                $server = RECAPTCHA_API_SERVER;
        }

        $errorpart = "";
        if ($error) {
           $errorpart = "&amp;error=" . $error;
        }
        return '<script type="text/javascript" src="'. $server . '/challenge?k=' . $pubkey . $errorpart . '"></script>

    <noscript>
        <iframe src="'. $server . '/noscript?k=' . $pubkey . $errorpart . '" height="300" width="500" frameborder="0"></iframe><br/>
        <textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
        <input type="hidden" name="recaptcha_response_field" value="manual_challenge"/>
    </noscript>';
}

class ReCaptchaResponse {
        var $is_valid;
        var $error;
}

function recaptcha_check_answer ($privkey, $remoteip, $challenge, $response, $extra_params = array())
{
    if ($privkey == null || $privkey == '') {
        die ("To use reCAPTCHA you must get an API key from <a href='https://www.google.com/recaptcha/admin/create'>https://www.google.com/recaptcha/admin/create</a>");
    }
    if ($remoteip == null || $remoteip == '') {
        die ("For security reasons, you must pass the remote ip to reCAPTCHA");
    }

        //discard spam submissions
        if ($challenge == null || strlen($challenge) == 0 || $response == null || strlen($response) == 0) {
                $recaptcha_response = new ReCaptchaResponse();
                $recaptcha_response->is_valid = false;
                $recaptcha_response->error = 'incorrect-captcha-sol';
                return $recaptcha_response;
        }

        $response = _recaptcha_http_post (RECAPTCHA_VERIFY_SERVER, "/verify",
                                          array (
                                                 'privatekey' => $privkey,
                                                 'remoteip' => $remoteip,
                                                 'challenge' => $challenge,
                                                 'response' => $response
                                                 ) + $extra_params
                                          );

        $answers = explode ("\n", $response [1]);
        $recaptcha_response = new ReCaptchaResponse();

        if (trim ($answers [0]) == 'true') {
                $recaptcha_response->is_valid = true;
        }
        else {
                $recaptcha_response->is_valid = false;
                $recaptcha_response->error = $answers [1];
        }
        return $recaptcha_response;
}

function recaptcha_get_signup_url ($domain = null, $appname = null) {
    return "https://www.google.com/recaptcha/admin/create?" .  _recaptcha_qsencode (array ('domains' => $domain, 'app' => $appname));
}

function _recaptcha_aes_pad($val) {
    $block_size = 16;
    $numpad = $block_size - (strlen ($val) % $block_size);
    return str_pad($val, strlen ($val) + $numpad, chr($numpad));
}

/* Mailhide related code */

function _recaptcha_aes_encrypt($val,$ky) {
    if (! function_exists ("mcrypt_encrypt")) {
        die ("To use reCAPTCHA Mailhide, you need to have the mcrypt php module installed.");
    }
    $mode=MCRYPT_MODE_CBC;   
    $enc=MCRYPT_RIJNDAEL_128;
    $val=_recaptcha_aes_pad($val);
    return mcrypt_encrypt($enc, $ky, $val, $mode, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0");
}

function _recaptcha_mailhide_urlbase64 ($x) {
    return strtr(base64_encode ($x), '+/', '-_');
}

/* gets the reCAPTCHA Mailhide url for a given email, public key and private key */
function recaptcha_mailhide_url($pubkey, $privkey, $email) {
    if ($pubkey == '' || $pubkey == null || $privkey == "" || $privkey == null) {
        die ("To use reCAPTCHA Mailhide, you have to sign up for a public and private key, " .
             "you can do so at <a href='http://www.google.com/recaptcha/mailhide/apikey'>http://www.google.com/recaptcha/mailhide/apikey</a>");
    }

    $ky = pack('H*', $privkey);
    $cryptmail = _recaptcha_aes_encrypt ($email, $ky);

    return "http://www.google.com/recaptcha/mailhide/d?k=" . $pubkey . "&c=" . _recaptcha_mailhide_urlbase64 ($cryptmail);
}

function _recaptcha_mailhide_email_parts ($email) {
    $arr = preg_split("/@/", $email );

    if (strlen ($arr[0]) <= 4) {
        $arr[0] = substr ($arr[0], 0, 1);
    } else if (strlen ($arr[0]) <= 6) {
        $arr[0] = substr ($arr[0], 0, 3);
    } else {
        $arr[0] = substr ($arr[0], 0, 4);
    }
    return $arr;
}

function recaptcha_mailhide_html($pubkey, $privkey, $email) {
    $emailparts = _recaptcha_mailhide_email_parts ($email);
    $url = recaptcha_mailhide_url ($pubkey, $privkey, $email);

    return htmlentities($emailparts[0]) . "<a href='" . htmlentities ($url) .
        "' onclick=\"window.open('" . htmlentities ($url) . "', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;\" title=\"Reveal this e-mail address\">...</a>@" . htmlentities ($emailparts [1]);

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:31:48.060

在开发模式下运行时，我在所有站点中也遇到了这些问题。没关系，如果使用虚拟主机（即：mydomain.local）或只是“平面”本地主机（localhost/mydomain）运行。一旦我在真正的生产服务器上切换到生产，recaptcha 就像一个魅力。

所以我想它一定与Apache有关。最明智的代码是通过 php 发出的 http 请求，但我检查了 fsockopen 是否正常工作。没有显示警告或错误，神秘的是 $response 总是空的。

我已经在我的域[formacion online](http://formaciononline.eu)中尝试过，这是一个 VPS，它似乎工作正常。phpinfo() 显示的大多数值的设置相同。

# php - 如何使用 php 访问用户应用程序数据

> ID：10943437
> 
> 赞同：-1
> 
> 时间：2012-06-08T05:20:31.100
> 
> 标签：php

再会。谁能帮助我了解如何使用 php 代码访问用户应用程序数据？这些有内置功能吗？如果您有任何想法，请提供帮助。非常需要。

这是我要访问的目录示例 C:\Documents and Settings\MyDocumentName\Application Data\

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:31:11.490

（完全）不可能。

PHP 代码在服务器上进行解释，到达用户浏览器的唯一内容是 PHP 代码的结果。您可以使用允许用户将其应用程序数据目录的内容上传到服务器的表单来构建应用程序，但我认为它不会成为一个非常受欢迎的网站。

或者，如果您打算以更亲密的方式与用户交互，总会有诸如 Flash 应用程序或（喘不过气！）ActiveX 控件之类的途径，但是对于如今的浏览器，大多数人会将您的应用程序标记为安全漏洞并禁用它.

# android - 从 Dropbox 下载所有类型的文件

> ID：10943438
> 
> 赞同：2
> 
> 时间：2012-06-08T05:20:32.703
> 
> 标签：android, download, dropbox

我正在研究 Dropbox。我看到了文档。这是我显示列表的代码：

```
Entry entryCheck = mApi.metadata("/", 100, null, true, null);
Log.i("Item Name", entryCheck.fileName());
Log.i("Is Folder", String.valueOf(entryCheck.isDir)); 
```

我从 Dropbox 获得了所有列表，但我的问题是

1.  如果它是文件或目录，这里 entryCheck.isDir 总是给我真正的价值，所以我怎么知道哪个是文件或哪个是目录？
2.  我是如何下载这些文件的。

我试过这个，但它不工作：

```
private boolean downloadDropboxFile(String dbPath, File localFile,
        DropboxAPI<?> api) throws IOException {
    BufferedInputStream br = null;
    BufferedOutputStream bw = null;
    try {
        if (!localFile.exists()) {
            localFile.createNewFile(); // otherwise dropbox client will fail
            // silently
        }                   

        DropboxInputStream fin = mApi.getFileStream("dropbox", dbPath);
        br = new BufferedInputStream(fin);
        bw = new BufferedOutputStream(new FileOutputStream(localFile));

        byte[] buffer = new byte[4096];
        int read;
        while (true) {
            read = br.read(buffer);
            if (read <= 0) {
                break;
            }
            bw.write(buffer, 0, read);
        }
    } catch (DropboxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        // in finally block:
        if (bw != null) {
            bw.close();
        }
        if (br != null) {
            br.close();
        }
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:23:44.747

这将起作用

```
String inPath ="mnt/sdcard/"+filename;
File file=new File(inPath);           
try {

    mFos = new FileOutputStream(file);
} catch (FileNotFoundException e) {
    mErrorMsg = "Couldn't create a local file to store the image";
    return false;
}

mApi.getFile("/"+filename, null, mFos, null); 
```

这将下载文件并将其存储在 sdcard 位置`inPath`。您必须在新线程中执行此操作，而不是在主线程中。使用 AsyncTask。 [http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html) 这个链接解释了为什么..

# ios5 - prepareForSegue 和 tableView 的不同行为：didSelectRowAtIndexPath：

> ID：10943444
> 
> 赞同：1
> 
> 时间：2012-06-08T05:21:00.633
> 
> 标签：ios5, uitableview, segue

我正在测试一个简单的场景，它有一个 UITableViewController，它的单元格连接到另一个 UIViewController。现在，在这个过程中，我需要向 UIViewController 传递一些信息，例如商品的名称和价格。我想测试使用 prepareForSegue 和 didSelectRowAtIndexPath: 来传递这两个数据点之间的区别。它似乎适用于 didSelectRowAtIndexPath: 但不适用于 prepareForSegue。做了一些调试后：

1-我想知道 prepareForSegue 是否在destinationViewController 上的任何IBOutlet 初始化之前发生，因此您无法有效地设置它们。所以 prepareForSegue 似乎更倾向于传递非 IBOutlet 属性。

2-如果我使用常规推送 segue，如何从 didSelectRowAtIndexPath: 方法访问“segue.destinationViewController”。

PS：在测试prepareForSegue时，我将IB中的segue设置为push，而在测试didSelectRowAtIndexPath:时，我将IB中的segue设置为模态。

PS：一切与实名雷同纯属偶然！

```
 -(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"itemDetailSegue"])
    {
        NSIndexPath *indexPath=[self.tableView indexPathForSelectedRow];

        NSString *theItemName=[[self.itemsForSale objectAtIndex:indexPath.row]objectForKey:@"Name"];
        NSString *theItemPrice=[[self.itemsForSale objectAtIndex:indexPath.row]objectForKey:@"Price"];

        JuanDetailVC* juanDetailVC= (JuanDetailVC*) segue.destinationViewController;

        juanDetailVC.itemName.text=theItemName;
        juanDetailVC.itemPrice.text=theItemPrice;
    }
}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *theItemName=[[self.itemsForSale objectAtIndex:indexPath.row]objectForKey:@"Name"];
    NSString *theItemPrice=[[self.itemsForSale objectAtIndex:indexPath.row]objectForKey:@"Price"];

    JuanDetailVC* juanDetailVC= (JuanDetailVC*) self.presentedViewController;

    juanDetailVC.itemName.text=theItemName;
    juanDetailVC.itemPrice.text=theItemPrice;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:34:05.273

你是对的，你不能在 prepareForSegue 中设置插座属性。您必须将属性传递给另一个属性，然后在目标视图控制器的 viewDidLoad 中设置插座的属性。例如：您不能设置标签的文本，您必须创建第二个属性（例如 an `NSString *labelText`）并在 viewDidLoad 中设置标签的文本（`self.label.text = self.labelText`）。

您无权访问 tableView:didSelectRowAtIndexPath 中的目标视图控制器。您必须自己通过分配/初始化来创建实例。

# java - Apache camel 同时处理两个 csv 文件

> ID：10943445
> 
> 赞同：2
> 
> 时间：2012-06-08T05:21:32.053
> 
> 标签：java, apache-camel

我正在尝试处理两个`.csv`文件并将它们的数据保存到数据库中。我正在使用 java dsl 而不是同样的弹簧。

**为了更好地解释这个场景：**
我正在读取两个`.csv`文件并处理它们以将它们的数据上传到 sql 数据库中。我为此执行的步骤是

1.  在 servlet 容器文件中指定引擎初始化程序。
2.  创建一个`EngineInitialiser`
3.  将 EngineInitialiser 绑定到核心引擎。
4.  创建将数据持久保存到数据库所需的 dao 文件。
5.  创建定义绑定的引擎模块。
6.  定义定义文件特定格式的文件。

然而，问题是

尝试将交换解组为`BindyCsvDataFormat`. 有两个格式类文件，因为我为 file1 输入文件指定了一个，一个为`file2.csv`.

现在 bindy 正在尝试将格式映射到父类文件。但是，当它选择`file1.csv`它时，它会将其映射到同一包下定义的模型 1 和模型 2。但是，它应该只映射到一个类。如何强制它只映射到一个格式类？

**错误如下：**

> java.lang.IllegalArgumentException：缺少某些字段（可选或必填），行：org.apache.camel.dataformat.bindy.BindyCsvFactory.bind(BindyCsvFactory.java:215) atorg.apache.camel.dataformat.bindy 的 1。 csv.BindyCsvDataFormat.unmarshal(BindyCsvDataFormat.java:169)atorg.apache.camel.processor.UnmarshalProcessor.process(UnmarshalProcessor.java:58) at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61 ) 在 org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) 在 org.apache.camel.processor.DelegateAsyncProcessor 的 org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)。在 org.apache.camel.management.InstrumentationProcessor 处理（DelegateAsyncProcessor.java:90）。进程（InstrumentationProcessor.java:71）在 org.apache.camel.util.AsyncProcessorHelper.process（AsyncProcessorHelper.java:73）在 org.apache.camel.processor.DelegateAsyncProcessor.processNext（DelegateAsyncProcessor.java:99）在 org.apache .camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) 在 org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91) 在 org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper .java:73) 位于 org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:223) 的 org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:333)。 org.apache.camel.processor 中的处理器.RouteContextProcessor.processNext(RouteContextProcessor.java:45)。DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) 在 org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:304) 在 org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)在 org.apache.camel.processor.Pipeline.process(Pipeline.java:117) 在 org.apache.camel.processor.Pipeline.process(Pipeline.java:80) 在 org.apache.camel.processor.RouteContextProcessor.processNext (RouteContextProcessor.java:45) 在 org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) 在 org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150) 在 org.apache。 camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117) 在 org.apache.camel.processor.RouteInflightRepositoryProcessor。processNext(RouteInflightRepositoryProcessor.java:50) 在 org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) 在 org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) 在 org.apache .camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99) 在 org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90) 在 org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java :71) 在 org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:175) 在 org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:352)。 camel.component.file.GenericFileConsumer.poll（GenericFileConsumer.java：136) at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:138) at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:90) at java.util.concurrent.Executors$RunnableAdapter .call(Executors.java:441) 在 java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317) 在 java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150) 在 java.util。 concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:181) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java :205) 在 java.util.concurrent.ThreadPoolExecutor$Worker。runTask(ThreadPoolExecutor.java:886) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) at java.lang.Thread.run(Thread.java:619) |#]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:19:46.633

您需要为不同的绑定模型使用不同的包名称。这是目前的限制，将来会改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:08:19.787

不同的实体管理者应该解决这个问题。

# android - 我们如何解析 OPML 字符串

> ID：10943454
> 
> 赞同：2
> 
> 时间：2012-06-08T05:22:13.837
> 
> 标签：android, parsing, opml

当我通过 HttpPost 发布网址时，我得到了以下字符串作为响应。我的问题是如何解析这个字符串。

```
<?xml version="1.0" encoding="UTF-8"?>

<opml version="1">

    <head>
    <status>200</status>
        </head>

    <body>

<outline type="object" text="account">

<account>

  <guide_id>u36710162</guide_id>

  <username>xyz</username>

  <session_id>9d28d854-bd31-4bba-9a5f-4e5cd88edaac</session_id>

  <first_name />

  <last_name />

  <email>xyz@gmail.com</email>

</account>

</outline>

    </body>

</opml> 
```

如何从此字符串中获取状态、guide_id、用户名、session_id、first_name、last_name 和电子邮件。

提前致谢 ...！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:24:29.607

这是一个 XML 格式的响应。您可以通过**[SAXParser](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-simple-sax-parser/)**、[**DOMParser**](http://vikaskanani.wordpress.com/2011/09/15/android-simple-xml-dom-parser-example-for-reading-response-from-inputstream/)或**[Xmlpullparser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)**对其进行解析。

关于`status`这一点，您可以从 HTTP 本身获取它

```
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = httpclient.execute(httpRequest);
response.getStatusLine().getStatusCode() 
```

*注意：考虑`<account>`作为您的父标签。*

# mysql - Gridview 没有用我的 sql 更新

> ID：10943456
> 
> 赞同：0
> 
> 时间：2012-06-08T05:22:28.530
> 
> 标签：mysql, gridview

我正在尝试通过 griview 更新 mysql 数据库，但是当我单击更新按钮时，这里没有更改是我的 sql 数据源代码，但这不起作用

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:GisConnectionString %>"
            ProviderName="<%$ ConnectionStrings:GisConnectionString.ProviderName %>" SelectCommand="SELECT vehicleno, cnic, isaccepted, gname, fname, haulagecode FROM gis.registration WHERE (regno = ?)&#13;&#10;and vehicleno=?"
            UpdateCommand="UPDATE gis.registration SET vehicleno =?, cnic =?, isaccepted =?, gname =?, fname = ?, haulagecode = ?&#13;&#10;where regno=?&#13;&#10;and vehicleno=?">
            <SelectParameters>
                <asp:ControlParameter ControlID="TextBox1" Name="?" PropertyName="Text" />
                <asp:ControlParameter ControlID="TextBox2" Name="?" PropertyName="Text" />
            </SelectParameters>
            <UpdateParameters>
                <asp:Parameter Name="vehicleno" DbType="string" />
                <asp:Parameter Name="cnic" DbType="string"/>
                <asp:Parameter Name="isaccepted" DbType="string" />
                <asp:Parameter Name="gname" DbType="string"/>
                <asp:Parameter Name="fname" DbType="string"/>
                <asp:Parameter Name="haulagecode" DbType="string"/>
                <asp:Parameter Name="regno" DbType="string"/>
                <asp:Parameter Name="vehicleno" DbType="string"/>
            </UpdateParameters>
        </asp:SqlDataSource> 
```

任何帮助将不胜感激提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:29:21.497

这是解决方案

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:GisConnectionString %>"
    ProviderName="<%$ ConnectionStrings:GisConnectionString.ProviderName %>" SelectCommand="SELECT vehicleno, cnic, isaccepted, gname, fname, haulagecode FROM gis.registration WHERE (regno = IFNULL(?, regno)) AND (companycode = ?)"
    UpdateCommand="UPDATE gis.registration SET vehicleno =?, cnic =?, isaccepted =?, gname =?, fname = ?, haulagecode = ? where regno=?">
    <SelectParameters>
        <asp:ControlParameter ControlID="TextBox1" Name="?" PropertyName="Text" />
        <asp:ControlParameter ControlID="Label1" Name="?" PropertyName="Text" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="vehicleno" DbType="String" />
        <asp:Parameter Name="cnic" DbType="String"/>
        <asp:Parameter Name="isaccepted" DbType="String" />
        <asp:Parameter Name="gname" DbType="String"/>
        <asp:Parameter Name="fname" DbType="String"/>
        <asp:Parameter Name="haulagecode" DbType="String"/>
        <asp:ControlParameter ControlID="TextBox1" DbType="String" Name="regno" PropertyName="Text" />
        <asp:Parameter Name="vehicleno" DbType="String"/>
    </UpdateParameters>
</asp:SqlDataSource> 
```

# c# - jQuery 方法链与 C#/VB 缺乏方法链

> ID：10943457
> 
> 赞同：0
> 
> 时间：2012-06-08T05:22:30.207
> 
> 标签：c#, jquery, method-chaining, builder-pattern

jQuery 的哪些内在属性及其满足的要求使其成为构建器模式和方法链的理想候选者？

换一种方式问，C#/VB .NET 核心库是否可以用更多类似于 jQuery 的方法链来重写，或者是否有一些继承、限制因素？

很多都归结为 JavaScript 是动态的还是像 VB/C# 这样的类型或 jQuery 主要对 DOM 操作感兴趣的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:25:19.737

您可以在 C# 中链接方法就好了。例如，这是一直使用 Linq 完成的。

要了解 C# 中的方法链接实现，请参阅

[C# 中的方法链](https://stackoverflow.com/questions/1119799/method-chaining-in-c-sharp)

这有时也被称为[流畅的界面](http://en.wikipedia.org/wiki/Fluent_interface)。

其基本思想是每个参与链的方法都返回`this`，从而可以通过引用前一次调用的返回值来调用该类的其他方法。

没有什么技术可以阻止核心库被重写以更广泛地使用方法链。但实际上，重写核心库会破坏所有现有的 .NET 应用程序。

当然，可以编写一个库，为核心库中的事物提供流畅的接口。想到的一件事是 System.IO 中对 Streams 和 Readers 的处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:25:47.373

不，有几个 C# 库是用类似的“链接”编写的。它通常称为 Fluent API。一个例子是 Fluent NHibernate，但还有更多，因为它只是一种结构化代码的方式。这不是动态与静态语言的限制

# process - 使用 vbscript 进行进程间通信

> ID：10943464
> 
> 赞同：3
> 
> 时间：2012-06-08T05:23:50.490
> 
> 标签：process, vbscript, ipc, communication

我需要将数据从一个进程发送到另一个进程。约束：

发送方进程调用非常昂贵。它需要使用 vbscipt 来完成。对于 Sender 进程，此数据传输是一项额外的工作。它不应受到此功能的太大影响。在 4-5 分钟内，发送方进程中有大约 1000 个线程。

更快的IPC很重要。如果可以异步完成会更好。我读到了命名管道。是否可以使用 vbscript 打开命名管道。考虑到上述约束，还有其他可能的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T05:37:10.140

使用命名管道可能是原生 VBScript 的唯一选择。您可以通过用其他语言编写 COM 对象来访问任何其他 IPC 方法。

命名管道可以像文件一样被写入，因此您可以使用[FileSystemObject](http://msdn.microsoft.com/en-us/library/aa242706%28v=vs.60%29.aspx)从命名管道打开和读取/写入。打开命名管道的格式是使用格式`\\\\.\pipe\PipeName`（将 PipeName 替换为管道的实际名称）。

所以要在 VBScript 中写入命名管道：

```
Set fs = CreateObject("Scripting.FileSystemObject")
Set a = fs.CreateTextFile("\\.\pipe\PipeName", True)
a.WriteLine("This is a test.")
a.Close 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T02:20:41.293

```
Option Explicit

Dim g_receivedCallback

If WScript.Arguments.Named.Exists("NEW") Then
    RunSecondInstance
Else
    RunFirstInstance
End If

Sub RunSecondInstance()
    Dim oSa, oWindow, oData, oCallback
    ' Search for the window
    Set oSa = CreateObject("Shell.Application")
    For Each oWindow In oSa.Windows
        If TypeName(oWindow.Document) = "HTMLDocument" Then
            If InStr(oWindow.Document.Title, "IPC Window") > 0 Then
                ' Get the data object, set a property and callback a method
                Set oData = oWindow.GetProperty ("IPCData") 
                Set oCallback = oData.Callback
                oData.Value = "Success!"
                Call oCallback
            End If
        End If
    Next
End Sub

Sub RunFirstInstance()

    Dim oData, oIe, oWs

    ' Create a object to pass to a other script
    Set oData = New IPCData
    ' Set a property to a callback method
    Set oData.Callback = GetRef("MyCallback")

    ' Create a window and store the data in the window
    Set oIe = CreateObject("InternetExplorer.Application")
    oIe.Navigate "about:blank"
    Do Until oIe.ReadyState = 4 : WScript.Sleep 5 : Loop
    oIe.Document.Title = "IPC Window"
    oIe.PutProperty "IPCData", oData

    ' Run second script instance
    Set oWs = CreateObject("WScript.Shell")
    oWs.Run "WSCRIPT.EXE """ & WScript.ScriptFullName & """ /NEW"

    ' Wait for callback from second script
    Do  Until g_receivedCallback = True : WScript.Sleep 5 : Loop

    ' Display received data
    MsgBox oData.Value

    ' Close ie
    oIe.Quit

End Sub

Sub MyCallback()
    g_receivedCallback = True
End Sub

Class IPCData

    Private m_callback
    Public Property Get Callback()
        Set Callback = m_callback
    End Property
    Public Property Set Callback(ByVal v)
        Set m_callback = v
    End Property

    Private m_value
    Public Property Get Value()
        If IsObject(m_value) Then
            Set Value = m_value
        Else
            Value = m_value
        End If
    End Property
    Public Property Let Value(ByVal v)
        m_value = v
    End Property
    Public Property Set Value(ByVal v)
        Set m_value = v
    End Property

End Class 
```

# hadoop - RecordReader 在 Hadoop 中的工作

> ID：10943472
> 
> 赞同：9
> 
> 时间：2012-06-08T05:24:27.123
> 
> 标签：hadoop, mapreduce

谁能解释 RecordReader 的实际工作原理？程序开始执行后方法`nextkeyvalue()`和`getCurrentkey()`工作如何？`getprogress()`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T10:53:48.383

（新 API）：默认 Mapper 类有一个 run 方法，如下所示：

```
public void run(Context context) throws IOException, InterruptedException {
    setup(context);
    while (context.nextKeyValue()) {
        map(context.getCurrentKey(), context.getCurrentValue(), context);
    }
    cleanup(context);
} 
```

,和方法是方法的`Context.nextKeyValue()`包装。请参阅源文件。`Context.getCurrentKey()``Context.getCurrentValue()``RecordReader``src/mapred/org/apache/hadoop/mapreduce/MapContext.java`

所以这个循环执行并调用你的 Mapper 实现的`map(K, V, Context)`方法。

具体来说，您还想知道什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T16:18:52.943

org.apache.hadoop.mapred.MapTask - runNewMapper()

实施步骤：

1.  创建新的映射器

2.  获取映射器的输入拆分

3.  获取拆分的记录仪

4.  初始化记录阅读器

5.  使用记录阅读器遍历 getNextKeyVal() 并将 key,val 传递给映射器映射方法

6.  清理

# windows - 为什么没有使用 Windows 的 Django 教程？

> ID：10943473
> 
> 赞同：0
> 
> 时间：2012-06-08T05:24:27.203
> 
> 标签：windows, django

我开始使用 Django，我发现我看到的每个示例都是在 Mac OS 中完成的。我是 Windows 用户。我用过 Mac OS X Lion，除了我的个人电脑没有它之外，我没有任何问题。我不想出去花钱购买操作系统并设置双启动只是为了遵循 Django 的快速教程。所以我的问题是，谁能给我指出一个使用 Windows 的教程，这样我就可以很好地了解它是如何工作的，并打好基础，这样我就可以更轻松地翻译其他教程。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:40:43.170

没有特定于 windows 的 django 教程，因为 django 作为一个框架是平台无关的。用于编写项目的所有 Python 代码在不同平台上都是相同的。只有当教程引用文件系统上的路径时，您才会看到不同的东西。

然而，django 的实际安装过程将是特定于平台的，但这更像是一个用于 windows 的 python 问题。安装任何 python 包或框架的情况都是一样的。

最终，当你学习 django 时，你只需要实际运行几个命令：

```
python manage.py syncb
python manage.py runserver
python manage.py shell 
```

你如何调用 python 是平台特定的部分，但 django 方面是相同的。项目文件结构也一样。只要项目不使用特定于平台的文件路径引用，您就可以在 windows 上运行在 linux 下编写的项目。

这个文档可能是您唯一需要的，它解释了各种安装过程：
[https ://docs.djangoproject.com/en/1.4/topics/install/](https://docs.djangoproject.com/en/1.4/topics/install/)

如果您需要更多信息，您可能需要提供一些具体示例，说明在哪些地方让您无法看到非 Windows 风格的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:27:12.663

这是一个稍微旧的教程： http: [//mirkobonadei.wordpress.com/2010/01/25/install-python-and-django-on-windows/](http://mirkobonadei.wordpress.com/2010/01/25/install-python-and-django-on-windows/)

官方 Django 文档也有一个关于安装的部分，其中包括 Windows：[https ://docs.djangoproject.com/en/dev/topics/install/](https://docs.djangoproject.com/en/dev/topics/install/)

# android - 如何识别机器人中的对话

> ID：10943475
> 
> 赞同：1
> 
> 时间：2012-06-08T05:24:43.537
> 
> 标签：android, android-activity, robotium

我是 Robotium 和 Android 的新手。我写了一些代码来测试一个活动。并且该活动正在打开一个对话框。我无法识别它。我试过solo.getCurrentActivity()，不行。我尝试了solo.searchText()。但是测试失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:55:26.883

写这样的代码

```
if (solo.waitForActivity("HomePhone", 20000)) {
            if(solo.waitForText("xxx*",1,10000)){
                if(solo.waitForText("ok*",1,5000)){
                    solo.clickOnText("ok*");                    
                }else{
                    solo.goBack();
                }
            } 
```

等待文本是您达到目的的最佳方法

# python - pandas 使用日期时间对象重新索引 DataFrame

> ID：10943478
> 
> 赞同：15
> 
> 时间：2012-06-08T05:24:57.607
> 
> 标签：python, dataframe, pandas, reindex

`DataFrame`是否可以使用由日期时间对象组成的列重新索引熊猫？

我有一个包含`df`以下列的 DataFrame：

```
Int64Index: 19610 entries, 0 to 19609
Data columns:
cntr                  19610  non-null values  #int
datflt                19610  non-null values  #float
dtstamp               19610  non-null values  #datetime object
DOYtimestamp          19610  non-null values  #float
dtypes: int64(1), float64(2), object(1) 
```

我可以`df`轻松地重新索引`DOYtimestamp`：`df.reindex(index=df.dtstamp)` 并`DOYtimestamp`具有以下值：

```
>>> df['DOYtimestamp'].values
    array([ 153.76252315,  153.76253472,  153.7625463 , ...,  153.98945602,
    153.98946759,  153.98947917]) 
```

但我想重新索引由 datetime 对象组成的 DataFrame `dtstamp`，以便我直接从索引生成不同的时间戳。该`dtstamp`列的值如下所示：

```
 >>> df['dtstamp'].values
     array([2012-06-02 18:18:02, 2012-06-02 18:18:03, 2012-06-02 18:18:04, ...,
     2012-06-02 23:44:49, 2012-06-02 23:44:50, 2012-06-02 23:44:51], 
     dtype=object) 
```

当我尝试重新索引`df`时，`dtstamp`我得到以下信息：

```
>>> df.reindex(index=df.dtstamp)
    TypeError: can't compare datetime.datetime to long 
```

我只是不确定我需要做什么才能使索引成为日期时间类型。有什么想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T05:34:25.010

听起来你不想重新索引。`reindex`确切地说，不是用于定义新索引，这有点令人困惑。相反，它会查找具有指定索引的行。因此，如果您有一个带有 index 的 DataFrame `[0, 1, 2]`，那么执行 a`reindex([2, 1, 0])`将以相反的顺序返回行。做类似的事情`reindex([8, 9, 10])`不会为行创建新索引；相反，它将返回一个带有`NaN`值的 DataFrame，因为没有索引为 8、9 或 10 的行。

看起来您想要的只是保留相同的行，但为它们创建一个全新的索引。为此，您可以直接分配给索引。所以尝试做`df.index = df['dtstamp']`。

# php - SSL 证书警告

> ID：10943479
> 
> 赞同：0
> 
> 时间：2012-06-08T05:25:01.273
> 
> 标签：php, apache, .htaccess

我们在我们的网站上安装了 SSL 证书。第一次用户需要在他们的浏览器上安装这个证书（接受它）。有没有办法禁用它？

我认为在其中设置 SSL 路径的 apache conf 或 .htaccess 文件可能是可能的。

谁能做到这一点，可以在这里粘贴我的设置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:29:21.523

听起来好像您的证书签名不正确或用于错误的域。今天的大多数浏览器都不会询问安全证书是否完全有效。

# jquery - fancybox 2.0.6 ie7 无法正常工作

> ID：10943486
> 
> 赞同：2
> 
> 时间：2012-06-08T05:25:59.590
> 
> 标签：jquery, class, html, fancybox-2

我正在使用 fancybox 内联内容，所有其他浏览器都运行良好，但在 IE7 中不行。

试图调用 div 类而不是 div id，从：`<a class="various" href="#inline">Inline</a>` 到：`<a class="various" href=".inline">Inline</a>`

然后在 ie7 中，弹出窗口有效，但没有加载内容并显示错误消息。“无法加载请求的内容。请稍后再试。”

内联内容方法是否仅适用于 div id？不上课？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:01:34.193

我遇到了完全相同的问题，原因是 IE7 在内部修改了我的 href="#inline"，在 #inline 之前添加了一些内容，因此在呈现的 HTML 中它是不同的，fancybox 不起作用。

我最终调用了 hack JS 函数来纠正这个问题：

```
function RefreshAnchorForIE7(anchorCSS) {
    if ($.browser.msie && $.browser.version == "7.0") {
        var val = $(anchorCSS).attr("href");
        var index = val.lastIndexOf("#");

        if (index > 0) {
            $(anchorCSS).attr("href", val.substring(index));
        }
    }
} 
```

# algorithm - 从文件的各个部分的散列中导出文件的散列

> ID：10943487
> 
> 赞同：0
> 
> 时间：2012-06-08T05:26:24.517
> 
> 标签：algorithm, hash, sha

我有一个文件说 foo.txt。说，它的 SHA-256 是 SHA(foo.txt)。现在，我将文件分成多个部分，例如 p1、p2、... pn。这些部分的哈希值是 SHA(p1), SHA(p2), ... SHA(pn)。

我的问题是，是否有可能以某种方式导出 SHA(foo.txt)，仅给出 SHA(p1)、SHA(p2)、...、SHA(pn)？

我正在解决一个问题，我有一个文件的每个部分的哈希值。但是，我需要导出实际文件的 SHA，而无需访问任何部分或实际文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:29:34.000

不，那是不可能的。这将违背*安全*散列函数的本质。

您唯一能做的就是存储*所有*片段的哈希值（以及它们的长度信息），然后通过以相同方式检查完整文件的所有相应片段来检查“组合”哈希值。

# c++ - 具有多个参数的复制构造函数

> ID：10943491
> 
> 赞同：9
> 
> 时间：2012-06-08T05:27:34.050
> 
> 标签：c++, copy-constructor

我正在学习 C++，并且正在从`C++: The Complete Reference`. 书上说

> 只要为它们定义了默认参数，复制构造函数就可以具有附加参数。但是，在所有情况下，第一个参数都必须是对进行初始化的对象的引用。

但我很困惑我们将如何传递这些额外的参数？我相信应该有一些书中没有给出并且我无法弄清楚的方法。谁能帮我吗？

**编辑：** 也可以在所有三种情况下传递这些额外的参数，即

*   当一个对象显式初始化另一个对象时，例如在声明中
*   将对象的副本传递给函数时
*   生成临时对象时（最常见的是，作为返回值）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T05:30:39.403

这是一个简单的例子：

```
class A {
    //...
public:
    A (const A&, bool deep = false) {
        if (!deep) { /* make a shallow copy */ }
        else { /* make a deep copy */ }
    }
};

void foo (A x) { /*...*/ }
A bar () { /*...*/ return A(); }
A a_var; 
```

在此示例中，参数默认为 false，这意味着默认的复制构造函数将是浅的。

```
A b(a_var);       // b gets a shallow copy of a
foo(b);           // foo() receives a shallow copy 
```

但是，可以通过在第二个参数中传入 true 来实现深层复制。

```
A b(a_var, true); // b gets a deep copy of a
foo(A(b, true));  // foo receives a shallow copy of a deep copy 
```

类似地，对于返回 an 的函数`A`，返回的副本将是浅的，因为它使用默认值，但接收者可以在接收到它时使其变得深。

```
A b(bar());       // shallow
A b(bar(), true); // deep 
```

请记住，当您定义复制构造函数时，很可能意味着您需要定义析构函数并重载赋值运算符（三规则）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:43:59.050

这样想：只有构造函数的概念。当编译器决定需要进行复制时，它会寻找一个构造函数，该构造函数可以通过传入一个类型的对象来调用`T`。由于这种特殊的用例，我们通常将选择的构造函数称为“复制”构造函数。

# android - SherlockListFragment - 如何将我的适配器内容放入片段寻呼机列表的 R.id.content 中？

> ID：10943492
> 
> 赞同：0
> 
> 时间：2012-06-08T05:27:43.763
> 
> 标签：android, actionbarsherlock

我有这个代码

```
public class MyFragment extends SherlockFragment {

    public static Fragment newInstance(Context context) {
        MyFragment f = new MyFragment();

        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View v = inflater.inflate(R.layout.fragment_pager_list, container,false);
        View tv = v.findViewById(R.id.text);
        ((TextView)tv).setText("Layout One" );
        return v;
    }
} 
```

我创建了一个包含联系人列表的适配器，我想将该联系人列表放入 fragment_pager_list 中。我正在使用此代码

```
mAdapter = new SimpleCursorAdapter(getActivity(),
                R.layout.fragment_pager_list, null,
                new String[] {ContactsContract.Contacts.DISPLAY_NAME},
                new int[] { R.id.text}, 0);

        setListAdapter(mAdapter);

        // Start out with a progress indicator.
        setListShown(true); 
```

如何在顶部显示“联系人”，在其下方显示我的两个联系人。

![在此处输入图像描述](../Images/da74a997f16c85333f441c100cd65769.png)

fragment_pager_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2011 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:drawable/gallery_thumb">

    <TextView android:id="@+id/text"
        android:layout_width="match_parent" android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="@string/hello_world"/>

    <!-- The frame layout is here since we will be showing either
    the empty view or the list view.  -->
    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >
        <!-- Here is the list. Since we are using a ListActivity, we
             have to call it "@android:id/list" so ListActivity will
             find it -->
        <ListView android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:drawSelectorOnTop="false"/>

        <!-- Here is the view to show if the list is emtpy -->
        <TextView android:id="@android:id/empty"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="No items."/>

    </FrameLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:38:33.540

你应该扩展`SherlockListFragment`. 然后你可以调用`setListAdapter`它（[文档](http://developer.android.com/reference/android/app/ListActivity.html#setListAdapter(android.widget.ListAdapter))）。

这在过去对我有用：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.some_list_layout, container, false);

    setListAdapter(/* Your adapter, should extend BaseAdapter or similar */);

    return v;
} 
```

**编辑**：另外，我相信你的 ListView 必须有 ID `android:id="@android:id/list"`。如果它不适用于该 ID，请尝试**[此处](https://stackoverflow.com/a/5159661/1438733)**找到的解决方案。

# c# - c#会话值通过下拉列表显示

> ID：10943493
> 
> 赞同：0
> 
> 时间：2012-06-08T05:27:44.907
> 
> 标签：c#, .net, session

我正在尝试通过下拉列表显示会话值。这是我制作的代码，但效果不佳。纠正我

```
 //session created

public void SAN()
        {
            cn.Open();
            string sq = "select  Sitealiasname from tbl_Sitemaster where sitename in (select sitename from tbl_emploeedetails where employeestatus='L' and employeeid='" + Session["EMPID"].ToString() + "') and    status='A' order by Sitealiasname asc";
            SqlCommand d = new SqlCommand(sq, cn);
            SqlDataReader r;
            r = d.ExecuteReader();
            while (r.Read())
            {
                Label4.Text = r["Sitealiasname"].ToString().Trim();
                Session["Sitealiasname"] = Label4.Text;
            }

            cn.Close();

        }

    //call the session to dropdownlist
     protected void Page_Load(object sender, EventArgs e)
        {
            ddlsite.Text = Session["Sitealiasname"].ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:47:14.463

你可以试试

用于 SAN 功能使用

```
 List<String> sitenames=null;
    using (DataReader  r = d.ExecuteReader())
    {    
       sitenames = r.AutoMap<string>().ToList();
    }
    Session["Sitealiasname"] = sitenames; 
```

对于绑定到下拉列表，您可以使用

```
 ddlsite.DataSource = Session["Sitealiasname"];
    ddlsite.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:39:13.960

> 在页面加载中尝试此代码以将会话值绑定到 Dropdowlist

```
ddlsite.Items.Add(Session["Sitealiasname"].Tostring()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:40:53.233

Dropdownlist 没有您在此处使用的文本属性。您必须首先填充下拉列表，然后选择要显示的值。

首先，您应该通过
items.add()在下拉列表中添加项目

[下拉链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist_members%28v=vs.71%29.aspx)支持的属性列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T06:45:34.930

试试这个

// 添加这一行 ------ 已编辑-------------

```
using System.Linq; 
```

## 使用 System.Collections.Generic；

```
public void SAN()
    {
        cn.Open();
        string sq = "select  Sitealiasname from tbl_Sitemaster where sitename in (select `sitename from tbl_emploeedetails where employeestatus='L' and employeeid='" + Session["EMPID"].ToString() + "') and    status='A' order by Sitealiasname asc";`
        SqlCommand d = new SqlCommand(sq, cn);
        SqlDataReader r;
        r = d.ExecuteReader();
 List<string> sitnames = new  List<string>();
        while (r.Read())
        {
            sitename.Add(r["Sitealiasname"].ToString().Trim());
        }

        cn.Close();
Session["Sitealiasname"] = sitename
    }

 protected void Page_Load(object sender, EventArgs e)
    {
///Bind data here

if(Session["Sitealiasname"] != null){
       ddlsite.DataSource = Session["Sitealiasname"].ToList();
       ddlsite.DataBind();
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T07:15:05.363

如果我完全了解您的需要，请检查此代码，那么这对您有用。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        SAN();
        bind();

    }
}

private void bind()
{
    ArrayList ar = new ArrayList();
    ar.Add("first");
    ar.Add("Second");
    ar.Add("Third");
    ar.Add("Four");
    ar.Add("Five");
    ar.Add("Six");
    ar.Add("Seven");
    DropDownList1.DataSource = ar;
    DropDownList1.DataBind();
    DropDownList1.SelectedValue = Session["Sitealiasname"].ToString();
}

public void SAN()
    {
        cn.Open();
        string sq = "select  Sitealiasname from tbl_Sitemaster where sitename in (select sitename from tbl_emploeedetails where employeestatus='L' and employeeid='" + Session["EMPID"].ToString() + "') and    status='A' order by Sitealiasname asc";
        SqlCommand d = new SqlCommand(sq, cn);
        SqlDataReader r;
        r = d.ExecuteReader();
        while (r.Read())
        {
            Label4.Text = r["Sitealiasname"].ToString().Trim();
            Session["Sitealiasname"] = Label4.Text;//Suppose here session value "first"
        }

        cn.Close();

    } 
```

如果不是你想要的，请告诉我。

# serial-port - Arduino Mega：void serialEvent3() { } 并不总是触发（或者是吗？）

> ID：10943494
> 
> 赞同：0
> 
> 时间：2012-06-08T05:28:14.793
> 
> 标签：serial-port, arduino

```
String cmdData; //Store the complete command on one line to send to sensor board.

String phResponse; //Store the ph sensor response.

boolean startOfLine = false;
boolean endOfLine = false;
boolean stringComplete = false;

void setup()
{
  Serial.begin(38400);
  Serial3.begin(38400);

  pinMode(2, OUTPUT); //used for temperature probe
}

void loop()
{
  if (stringComplete)
  {
    Serial.println("Stored Response: " + phResponse);

    phResponse = ""; //empty phResponse variable to get ready for the next response

    stringComplete = false;
  }
}

void serialEvent()
{
  while (Serial.available())
  {
    char cmd = (char)Serial.read();

    if (cmd == '{')
    { 
      startOfLine = true;
    }

    if (cmd == '}')
    { 
      endOfLine = true;
    }

    if (startOfLine && cmd != '{'  && cmd != '}')
    {
      cmdData += cmd;
    }

    if (startOfLine && endOfLine)
    { 
      startOfLine = false;
      endOfLine = false;

      cmdData.toLowerCase(); //convert cmdData value to lowercase for sanity reasons

      if (cmdData == "ph")
      {
        delay(500);

        ph();
      }

      if (cmdData == "phatc")
      {
        delay(500);

        phATC();
      }

      cmdData = ""; //empty cmdData variable to get ready for the next command
    }
  }
}

void serialEvent3()
{
  while(Serial3.available())
  {
    char cmd3 = (char)Serial3.read();

    phResponse += String(cmd3);

    if (cmd3 == '\r')
    {
      stringComplete = true;
      Serial.println("Carriage Command Found!");
    }
  }
}

float getTemp(char tempType)
{
  float v_out;           //voltage output from temp sensor
  float temp;            //the final temperature is stored here (this is only for code clarity)
  float tempInCelcius;   //stores temperature in C
  float tempInFarenheit; //store temperature in F

  digitalWrite(A0, LOW); //set pull-up on analog pin
  digitalWrite(2, HIGH); //set pin 2 high, this will turn on temp sensor
  delay(2);              //wait 1 ms for temp to stabilize

  v_out = analogRead(0); //read the input pin

  digitalWrite(2, LOW); //set pin 2 low, this will turn off temp sensor

  v_out*=.0048;                                        //convert ADC points to volts (we are using .0048 because this device is running at 5 volts)
  v_out*=1000;                                         //convert volts to millivolts

  tempInCelcius = 0.0512 * v_out -20.5128;             //the equation from millivolts to temperature
  tempInFarenheit = (tempInCelcius * 9.0)/ 5.0 + 32.0; // Convert Celcius to Fahrenheit

  if (tempType == 'c')
  { 
    return tempInCelcius; //return temp in celcius
  } 
  else if (tempType == 'f')
  {
    return tempInFarenheit; //return temp in Farenheit
  }
}

void ph()
{
  Serial.println("Calculating PH sensor value in 3 Seconds");

  delay(3000);

  Serial3.print("r\r");
}

void phATC()
{
  Serial.println("PH Auto Temperature Calibration will start in 3 Seconds");
  delay(3000);

  float temp = getTemp('c');
  char tempAr[10];
  String tempAsString;
  String tempData;

  dtostrf(temp,1,2,tempAr);
  tempAsString = String(tempAr);

  tempData = tempAsString + '\r';
  Serial3.print(tempData);
} 
```

有人可以解释为什么 serialEvent3() 在第二次（有时是第三次）向传感器板发送命令后触发。一旦 serialEvent3() 最终触发连续的命令可以流畅地工作。serialEvent() 似乎按预期工作。我尝试重新安排功能但没有成功。如果未触发 serialEvent3，是否有“故障安全”超时代码再次发送命令？

工作代码编辑：

```
String cmdData; //Store the complete command on one line to send to sensor board.

String phResponse; //Store the ph sensor response.

boolean startOfLine = false;
boolean endOfLine = false;
boolean stringComplete = false;

boolean s3Trigger = false;

void setup()
{
  Serial3.begin(38400);

  Serial.begin(38400);
}

void serialEvent()
{
  while (Serial.available())
  { 
    char cmd = (char)Serial.read();

    if (cmd == '{')
    { 
      startOfLine = true;
    }

    if (cmd == '}')
    { 
      endOfLine = true;
    }

    if (startOfLine && cmd != '{'  && cmd != '}')
    {
      cmdData += cmd;
      //Serial.println(cmdData);
    }
  }
}

void serialEvent3()
{
  while(Serial3.available())
  {
    char cmd3 = (char)Serial3.read();

    phResponse += String(cmd3);

    if (cmd3 == '\r') //if Carriage Return has been found then...
    {
      stringComplete = true;
    }
  }
}

void loop()
{
  if (startOfLine && endOfLine) //both startOfLine and endOfLine must be true to run the command...
  { 
    startOfLine = false;
    endOfLine = false;

    s3Trigger = true; //set the s3Trigger boolean to true to check if data on Serial3.available() is available.

    runCommand();
  }

  if (stringComplete)
  {
    Serial.println("Stored Response: " + phResponse); //print stored response from ph sensor.

    phResponse = ""; //empty phResponse variable to get ready for the next response
    cmdData = ""; //empty phResponse variable to get ready for the next command

    stringComplete = false; //set stringComplete to false
    s3Trigger = false; //set s3Trigger to false so it doesn't continuously loop.
  }

  if (s3Trigger) //if true then continue
  {
    delay(1000); //delay to make sure the Serial3 buffer has all the data

    if (!Serial3.available()) //if Serial3 available then execute the runCommand() function
    {
      //Serial.println("!Serial3.available()");
      runCommand();
    }
    else
    {
      s3Trigger = false; //set s3Trigger to false so it doesn't continuously loop.
    }
  }
}

void runCommand()
{
  cmdData.toLowerCase(); //convert cmdData value to lowercase for sanity reasons

  if (cmdData == "ph")
  {  
    ph();
  } 
}

void ph()
{
  Serial.println("Calculating PH sensor value in 3 Seconds");

  delay(3000);

  Serial3.print("r\r");
} 
```

**无需两次发送命令的新工作代码：**

```
/*
This software was made to demonstrate how to quickly get your Atlas Scientific product running on the Arduino platform.
An Arduino MEGA 2560 board was used to test this code.
This code was written in the Arudino 1.0 IDE
Modify the code to fit your system.
**Type in a command in the serial monitor and the Atlas Scientific product will respond.**
**The data from the Atlas Scientific product will come out on the serial monitor.**
Code efficacy was NOT considered, this is a demo only.
The TX3 line goes to the RX pin of your product.
The RX3 line goes to the TX pin of your product.
Make sure you also connect to power and GND pins to power and a common ground.
Open TOOLS > serial monitor, set the serial monitor to the correct serial port and set the baud rate to 38400.
Remember, select carriage return from the drop down menu next to the baud rate selection; not "both NL & CR".
*/

String inputstring = "";                                                       //a string to hold incoming data from the PC
String sensorstring = "";                                                      //a string to hold the data from the Atlas Scientific product
boolean input_stringcomplete = false;                                          //have we received all the data from the PC
boolean sensor_stringcomplete = false;                                         //have we received all the data from the Atlas Scientific product

  #include <SoftwareSerial.h>

  SoftwareSerial mySerial(10, 11); // RX, TX

  void setup(){    //set up the hardware
     //set up the hardware
     Serial.begin(38400);                                                      //set baud rate for the hardware serial port_0 to 38400
     mySerial.begin(38400);

     inputstring.reserve(5);                                                   //set aside some bytes for receiving data from the PC
     sensorstring.reserve(30);                                                 //set aside some bytes for receiving data from Atlas Scientific product

     pinMode(12, OUTPUT);

     digitalWrite(12, HIGH);       // turn on pullup resistors

     //mySerial.print("i\r");
     }

   void serialEvent() {                                                         //if the hardware serial port_0 receives a char              
               char inchar = (char)Serial.read();                               //get the char we just received
               inputstring += inchar;                                           //add it to the inputString
               if(inchar == '\r') {input_stringcomplete = true;}                //if the incoming character is a <CR>, set the flag
              }

 void loop(){                                                                   //here we go....

   while(mySerial.available())
   {
              char inchar = (char)mySerial.read();                              //get the char we just received
              sensorstring += inchar;                                          //add it to the inputString
              if(inchar == '\r') {sensor_stringcomplete = true;}               //if the incoming character is a <CR>, set the flag

             //Serial.print(inchar); 
   }

  if (input_stringcomplete){    //if a string from the PC has been recived in its entierty 
      //Serial.print(inputstring);
      mySerial.print(inputstring);                                              //send that string to the Atlas Scientific product
      inputstring = "";                                                        //clear the string:
      input_stringcomplete = false;                                            //reset the flage used to tell if we have recived a completed string from the PC
      }

 if (sensor_stringcomplete){                                                   //if a string from the Atlas Scientific product has been recived in its entierty 
      Serial.println(sensorstring);                                            //send that string to to the PC's serial monitor
      sensorstring = "";                                                       //clear the string:
      sensor_stringcomplete = false;                                           //reset the flage used to tell if we have recived a completed string from the Atlas Scientific product
      }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:08:35.637

我注意到一件事（不是串行读取问题的原因）。在微处理器中，浮点数学很昂贵。将这三行结合起来可能是值得的：

```
v_out*=.0048;
v_out*=1000;
tempInCelcius = 0.0512 * v_out -20.5128; 
```

进入：

```
tempInCelcius = v_out * 0.24576 -20.2128; 
```

我也会`tempInFarenheit = (tempInCelcius * 9.0)/ 5.0 + 32.0;`直接进入 return 语句，因此只有在需要时才进行计算。通常，鼓励将这些行分开以在 PC 上编程，但使用微处理器时，我倾向于压缩代码并插入大量注释。

编辑：

我查看了传感器的示例代码，我想我有一些你可以尝试的东西。你`while (Serial.available())`这里有一条线。我不能确定，但​​这对我来说看起来不正确，它可能会搞砸你。尝试删除该块并在事件中进行读取。让我知道你是怎么做出来的。

我希望这有帮助。

# android - 偏好的变化会在那里提交还是需要再次调用活动？

> ID：10943495
> 
> 赞同：0
> 
> 时间：2012-06-08T05:28:15.827
> 
> 标签：android, sharedpreferences

我有这个代码：

```
public static final String PREFS_NAME = "MyPrefsFile";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

settings = getSharedPreferences(PREFS_NAME, 0);
boolean hasLoggedIn = settings.getBoolean("hasLoggedIn", false);

    if (!((LoginButton.email).equals(""))) {

        //settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        // Set "hasLoggedIn" to true
        editor.putBoolean("hasLoggedIn", true);
        // Commit the edits!
        editor.commit();
        Log.d("hasLoggedIn in email check = ", hasLoggedIn + "");
    }
} 
```

即使在输入 if 之后，最后一个 Log 也会给我 hadLoggedIn 为 false。

在同一个活动的某个地方，我得到了相同的编辑代码，它工作正常，但唯一的区别是我从来没有在它被编辑后立即使用它，我在再次调用活动时使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:38:20.300

您将再次必须打开共享首选项才能阅读。

**您的 hasLoggedIn 仍然包含旧值。**

我已将您的代码更新如下。

```
public static final String PREFS_NAME = "MyPrefsFile";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

settings = getSharedPreferences(PREFS_NAME, 0);
boolean hasLoggedIn = settings.getBoolean("hasLoggedIn", false);

    if (!((LoginButton.email).equals(""))) {

        //settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        // Set "hasLoggedIn" to true
        editor.putBoolean("hasLoggedIn", true);
        // Commit the edits!
        editor.commit();

        //You forgot write following line.
        hasLoggedIn = getSharedPreferences(PREFS_NAME, 0).getBoolean("hasLoggedIn", false); 
        Log.d("hasLoggedIn in email check = ", hasLoggedIn + "");
    }
} 
```

# sql - Rails：按大多数共同标签排序的可扩展方式

> ID：10943500
> 
> 赞同：1
> 
> 时间：2012-06-08T05:28:48.613
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord, has-many-through

请原谅我仍然是一个 Rails 初学者，但我有一个使用 has_many 的基本工作标记系统：

```
class Post < ActiveRecord::Base
  has_many :taggings
  has_many :tags, :through => :taggings
end

class Tag < ActiveRecord::Base
  has_many :taggings
  has_many :posts, :through => :taggings
end

class Tagging < ActiveRecord::Base
  belongs_to :post
  belongs_to :tag
  [...]
end 
```

给定两个帖子 post1 和 post2，我可以找到它们的共同标签：

```
post1.tags & post2.tags 
```

并计算他们有多少共同点：

```
(post1.tags & post2.tags).count 
```

现在，我想做的剩下的事情有点复杂：

1.  给定一个帖子，获取所有其他帖子的列表，按其他帖子与给定帖子共有的标签数量排序。

2.  获取所有可能的帖子对的列表，按共同的标签数量排序。因此，共有标签最多的对排在第一位，没有相同标签的对排在最后。

假设我有 N 个帖子，列表 1 应该返回 N-1 个帖子，列表 2 应该返回 N(N-1)/2 个帖子。所以对于一个简单的集合：

```
P1: tags A B C D E
P2: tags A   C     F G
P3: tags A   C D   F G
P4: tags   B C D E 
```

Func1(P1) 应该返回：P4, P3, P2 ...因为 P4 与 P1 有 4 个共同的标签，P3 有 3 个共同的标签，等等。

Func2() 应该返回： [P1,P4], [P2,P3], [P1,P3], [P1,P2], [P3,P4], [P2,P4] ...前两对有 4共同的标签，最后一对只有一个共同点。

我意识到对于这两个，我可以迭代，在代码中进行一些手动计数和排序，但我想知道是否有更好、更具可扩展性的“Rails”方式可以更好地利用 ActiveRecord 和 SQL？

有任何想法吗？我将感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:49:34.523

你可以使用像[acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on)或[rocket_tag 这样](https://github.com/bradphelan/rocket_tag)的 gem 。他们有这方面的功能。如果你仍然想自己做，看看它是如何在那里实现的。如果您使用 postgresql（最新版​​本除外）并在“group by”语句中提及所有列，也要小心。据我所知[，acts-as-taggable-on在](https://github.com/mbleigh/acts-as-taggable-on)[这里](https://github.com/mbleigh/acts-as-taggable-on/blob/master/lib/acts_as_taggable_on/acts_as_taggable_on/related.rb)解决了这个问题。

# stream - 从支持 ONVIF 协议的网络 IP 摄像机获取实时流？

> ID：10943501
> 
> 赞同：5
> 
> 时间：2012-06-08T05:28:55.187
> 
> 标签：stream, camera, video-streaming, protocols, onvif

我有网络 IP 摄像机（佳能 VB-M40）。本相机支持 ONVIF 协议。我正在使用 C 语言在 Windows 中实现其 ONVIF 功能。我使用以下请求获得了它的 RTSP URI。

```
snprintf(postData, sizeof(postData),
      "<?xml version=\"1.0\" encoding=\"utf-8\"?>"
      "<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" "
      "xmlns:tds=\"http://www.onvif.org/ver10/media/wsdl\""
      "xmlns:tt=\"http://www.onvif.org/ver10/schema\">"             
      "<soap:Body>"
      "<tds:GetStreamUri>"
        "<tds:StreamSetup>"
          "<tt:Stream>0</tt:Stream>" 
          "<tt:Transport>" 
            "<tt:Protocol>HTTP</tt:Protocol>" 
          "</tt:Transport>"
        "</tds:StreamSetup>"
        "<tds:ProfileToken>profile1</tds:ProfileToken>"
      "</tds:GetStreamUri>"
        "</soap:Body></soap:Envelope>",
      username, digest_str, nonce_str, time_str); 
```

回应是：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope  xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" 
                    xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding" 
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                    xmlns:wsa5="http://www.w3.org/2005/08/addressing" 
                    xmlns:c14n="http://www.w3.org/2001/10/xml-exc-c14n#" 
                    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
                    xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
                    xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
                    xmlns:MC2="http://www.onvif.org/ver10/schema" 
                    xmlns:MC3="http://www.w3.org/2005/05/xmlmime" 
                    xmlns:MC4="http://docs.oasis-open.org/wsn/b-2" 
                    xmlns:MC10="http://www.w3.org/2004/08/xop/include" 
                    xmlns:MC5="http://docs.oasis-open.org/wsrf/bf-2" 
                    xmlns:MC6="http://docs.oasis-open.org/wsn/t-1" 
                    xmlns:CC="http://www.canon.com/ns/networkcamera/onvif/va/schema" 
                    xmlns:MC1="http://www.onvif.org/ver10/media/wsdl" 
                    xmlns:MC8="http://www.onvif.org/ver20/analytics/wsdl/RuleEngineBinding" 
                    xmlns:MC9="http://www.onvif.org/ver20/analytics/wsdl/AnalyticsEngineBinding" 
                    xmlns:MC7="http://www.onvif.org/ver20/analytics/wsdl" 
                    xmlns:ter="http://www.onvif.org/ver10/error" 
                    xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2" 
                    xmlns:tns1="http://www.onvif.org/ver10/topics">
    <SOAP-ENV:Header></SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <MC1:GetStreamUriResponse>
            <MC1:MediaUri>
                <MC2:Uri>rtsp://192.168.5.53:8090/profile1=r</MC2:Uri>
                <MC2:InvalidAfterConnect>false</MC2:InvalidAfterConnect>
                <MC2:InvalidAfterReboot>true</MC2:InvalidAfterReboot>
                <MC2:Timeout>PT0M0S</MC2:Timeout>
            </MC1:MediaUri>
        </MC1:GetStreamUriResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

根据 ONVIF 规范，一旦我得到流 URI，我应该向设备发送“DESCRIBE”请求。我正在使用此过程，因为我需要 TCP 上的流。

我的问题是如何将“DESCRIBE”请求发送到设备以及在哪个套接字上？

我是否应该在发送 GetStreamURI 请求的同一个套接字上发送此请求。或者我必须创建另一个。请求的格式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T05:56:07.890

在端口 554（或设备中为 RTSP 配置的其他端口）上将其发送到与 GetStreamUri 请求相同的主机。然后你必须在 DESCRIBE 之前发送 OPTIONS 请求。它可能会在其正文中返回 401 Unauthorized status 和 nonce + realm 值。*（我使用的地址与您在 GetStreamUri 响应中收到的地址不同。）*

```
Request:
OPTIONS http://192.168.128.99:80/profile1/media.smp RTSP/1.0\r\n
CSeq: 1\r\n
User-Agent: MyAgent\r\n\r\n

Response:
RTSP/1.0 401 Unauthorized
CSeq: 1
Date: Thu Jun 28 05:39:55 2012 GMT
Expires: Thu Jun 28 05:39:55 2012 GMT
Cache-Control: must-revalidate
WWW-Authenticate: Digest realm="iPOLiS", nonce="00000000000000000000000048E02F14" 
```

读取此领域和 nonce 值，因为您需要它来进行自动化并发送另一个授权的 OPTIONS 请求。

```
OPTIONS http://192.168.128.99:80/profile1/media.smp RTSP/1.0\r\n
CSeq: 2\r\n
Authorization: Digest username="admin", realm="iPOLiS", nonce="00000000000000000000000048E02F14", uri="http://192.168.128.99:80/profile1/media.smp", response="23a5a81fb98b6cb29368eba060ba31b9"\r\n
User-Agent: MyAgent\r\n\r\n 
```

[以这种方式](http://en.wikipedia.org/wiki/Digest_access_authentication)生成响应

然后来 DESCRIBE 请求

```
DESCRIBE http://192.168.128.99:80/profile1/media.smp RTSP/1.0\r\n
CSeq: 3\r\n
User-Agent: MyAgent\r\n\r\n 
```

和回应

```
RTSP/1.0 200 OK
CSeq: 3
Date: Thu Jun 28 05:46:20 2012 GMT
Expires: Thu Jun 28 05:46:20 2012 GMT
Content-Base: http://192.168.128.99:554/profile1/media.smp/
Content-Type: application/sdp
Content-Length: 498
x-Accept-Retransmit: our-retransmit
x-Accept-Dynamic-Rate: 1
Cache-Control: must-revalidate

v=0
o=- 0 0 IN IP4 192.168.128.9
s=Media Presentation
i=samsung
c=IN IP4 0.0.0.0
b=AS:384128
t=0 0
a=control:http://192.168.128.99:554/profile1/media.smp
a=range:npt=now-
m=video 40336 RTP/AVP 26
b=AS:384000
a=rtpmap:26 JPEG/90000
a=control:http://192.168.128.99:554/profile1/media.smp/trackID=v
a=cliprect:0,0,768,1024
a=framesize:26 1024-768
a=framerate:5.0
m=audio 40338 RTP/AVP 0
b=AS:64
a=rtpmap:0 PCMU/8000
a=control:http://192.168.128.99:554/profile1/media.smp/trackID=a 
```

应该从 a=control:http://192.168.128.99:554/profile1/media.smp/trackID=v 中的这个响应地址解析媒体 m=video（它是一个 SDP 协议）。这就是我走了多远。下一步应该是使用传输信息发出 SETUP 请求，然后发送 PLAY 请求。您必须在 SETUP 请求中指定的端口上侦听才能接收图像。

# jquery - jquery在ul li标签中获取值，但不想要某个标签

> ID：10943507
> 
> 赞同：6
> 
> 时间：2012-06-08T05:30:07.380
> 
> 标签：jquery, ajax, text

我正在尝试在标签内获取文本值`li`，但它有另一个我不想要的标签

例子：

```
<ul>
<li><a class="close">x</a>text</li>
<li><a class="close">x</a>more text</li>
<li><a class="close">x</a>wohoooo more text</li>
</ul> 
```

我可以像这样得到标签

```
$("ul li").text(); 
```

但它也从 中捕获 x `a`。如何删除 a 标签？必须有一个我不熟悉的简单解决方案，

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T05:43:56.930

```
$("ul li").contents(':not(.close)').text() 
```

children() 不返回文本节点；要获取所有子节点，包括文本和评论节点，请使用 .contents() [http://api.jquery.com/children/](http://api.jquery.com/children/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:53:47.813

### 自定义伪类过滤器

为抓取文本节点编写自己的表达式：

```
$.extend( $.expr[":"], {
    textnodes: function( e ) {
        return e.nodeType === 3;
    }
});

$("ul li").contents(":textnodes"); 
```

产生以下集合：

```
["text","more text","wohoooo more text"] 
```

小提琴：http: [//jsfiddle.net/jonathansampson/T3MQc/](http://jsfiddle.net/jonathansampson/T3MQc/)

### 自定义方法

您还可以扩展`jQuery.fn`以提供您自己的方法：

```
$.extend( $.fn, {
    textnodes: function() {
        return $(this).contents().filter(function(){
            return this.nodeType === 3;
        });
    }
});

$("ul li").textnodes(); 
```

这导致我们在上面看到的相同输出。

小提琴：http: [//jsfiddle.net/jonathansampson/T3MQc/1/](http://jsfiddle.net/jonathansampson/T3MQc/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T05:34:03.790

这很丑陋，但它有效。它克隆节点，然后删除所有子节点，最后打印剩下的文本：

```
$('ul li').clone()
  .children()
    .remove()
    .end()
  .text() 
```

设法从这里喜欢的信息中提取一个更好的版本：[如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)

```
$('ul li').contents().filter(function() {
    return this.nodeType == 3;
}).text() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T05:44:41.713

```
$('ul li')
   .contents()   // target to contents of li
   .filter(function() {    
      return this.nodeType == 3;  // filtering over textnode
}).text();  // get the text value 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/182/)**

# c# - 元素绑定

> ID：10943508
> 
> 赞同：1
> 
> 时间：2012-06-08T05:30:09.820
> 
> 标签：c#, wpf, binding

```
<Button x:Name="btn_binding" Content="Binding" HorizontalAlignment="Right" Height="44" Margin="0,127,63,0" VerticalAlignment="Top" Width="67"/>
<TextBox x:Name="txt_binding" Text="{Binding Content,ElementName=btn_binding}" Height="48" Margin="0,48,31,0" TextWrapping="Wrap" VerticalAlignment="Top" HorizontalAlignment="Right" Width="130"/> 
```

结果会是这样

![在此处输入图像描述](../Images/85385e10515e513470dc449f52a33405.png)

然后我可以通过下面的代码得到相同的结果

```
public partial class biding : Window
{
    public biding()
    {
        this.InitializeComponent();

        txt_binding.Text=btn_binding.Content.ToString();
    }
} 
```

请告诉我两者有什么区别，我想最好使用哪一个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:48:08.903

在第一种情况下，您将`TextBox.Text`属性绑定到`Button.Content`属性，并且每次更改时都会`Content`更改。其次，您只需`Text`在构造函数中设置一次属性并更改`Button.Content`不会影响它。

希望很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:49:57.663

在我看来... Xaml 绑定将在您键入时反映在设计器中...无需等待运行解决方案即可查看输出...

如果代码落后..您需要运行解决方案才能查看结果..

# jquery - 如何在jquery中禁用日期选择器图像后启用它

> ID：10943517
> 
> 赞同：2
> 
> 时间：2012-06-08T05:31:23.957
> 
> 标签：jquery

像这样禁用它后如何使日期选择器图像可单击/启用

```
 $("#_ctl0_MainContent_txtFromDateTime").datepicker({
    showOn: "button",
    buttonImage: "../images/calendar.gif",
    buttonImageOnly: true,
    buttonText: "Please Select Date",
    onSelect: function() {
        //            $(this).datepicker("option", "dateFormat", "MM d yy")
        $("#_ctl0_MainContent_hdnFromDateTime").val($(this).val());
    }
});
$("#_ctl0_MainContent_txtFromDateTime").datepicker('disable'); 
```

如果我使用

```
 $("#_ctl0_MainContent_txtFromDateTime").datepicker('enable'); 
```

它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:21:54.290

使用 settime out 作为日期

```
$.validator.addMethod("endDate", function(value, element) { 

    var startDate = $('#txt_reg_form').val(), 
    ret = Date.parse(startDate) <= Date.parse(value) || value == ""; 

    if(!ret){ /*IF NOT VALID DATE*/

        /*TRY DISABLING DATEPICKER FOR A MOMENT*/
        $("#txt_reg_form").datepicker('disable');

        /*SET TIMEOUT TO ENABLE IT AFTER 1 SECOND*/
        setTimeout(function(){
               $("#txt_reg_form").datepicker('enable');
           }, 1000);
    }
    return ret;
 }
, "To date should be greater then From date"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:49:03.923

最后我在禁用数据选择器后启用了它。首先我加载了整个数据选择器，然后启用它

```
 $("#_ctl0_MainContent_txtFromDateTime").datepicker({
showOn: "button",
buttonImage: "../images/calendar.gif",
buttonImageOnly: true,
buttonText: "Please Select Date",
onSelect: function() {
    //            $(this).datepicker("option", "dateFormat", "MM d yy")
    $("#_ctl0_MainContent_hdnFromDateTime").val($(this).val());
} 
```

});

```
 $("#_ctl0_MainContent_txtFromDateTime").datepicker('disable'); 
```

让它像这样禁用。在那之后

```
 var disabled = $("#_ctl0_MainContent_txtFromDateTime").datepicker("option", "disabled");
    //setter
    $("#_ctl0_MainContent_txtFromDateTime").datepicker("option", "disabled", false);
    $("#_ctl0_MainContent_txtFromDateTime").datepicker({ constrainInput: true });
    $("#_ctl0_MainContent_txtFromDateTime").datepicker("enable"); 
```

# jquery - 替换 DOM3 getUserData/setUserData 方法

> ID：10943519
> 
> 赞同：2
> 
> 时间：2012-06-08T05:31:46.757
> 
> 标签：jquery, dom, cross-browser, deprecated, dom3

所以我们有一些老式的 Firefox 扩展代码，它们使用[DOM3 方法](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-getUserData) `get/setUserData()`在 DOM 中传递数据。不幸的是，这些[在 DOM4 中已被弃用](http://www.w3.org/TR/domcore/#dom-core)，因此 Firefox[计划放弃对它们的支持](https://bugzilla.mozilla.org/show_bug.cgi?id=749981)，而 Chrome 从一开始就从未支持它们。

是否有跨浏览器替换？jQuery`$.data`似乎是一种选择，但“纯”JavaScript 更可取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:13:45.553

所以最后我们还是决定用 jQuery，核心库只有 75k 左右，很干净地解决了这个问题：

```
element.getUserData('foo') --> $(element).data('foo')

element.setUserData('foo', 'bar', null) --> $(element).data('foo', 'bar') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T08:42:40.233

使用可以存储数据的自定义事件`detail`

参考：[如何将数据从网页传输到 Firefox 扩展](https://stackoverflow.com/questions/19972071/how-can-i-transfer-data-to-firefox-extension-from-web-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T20:56:20.880

只需在元素上设置您想要的任何属性。

```
element.key = value; 
```

DOM 元素/节点**只是 JavaScript 对象**。为避免名称与本机属性（如 等）发生冲突`id`，您可以在键前加上下划线。

```
element._id = "foo"; 
```

# android - 如何解决android中linearlayout中的scrollview listview

> ID：10943526
> 
> 赞同：1
> 
> 时间：2012-06-08T05:32:11.137
> 
> 标签：android, android-listview, scrollview, android-linearlayout

这里我在我的线性布局中使用滚动视图。但我想在我的滚动视图线性布局中包含另一个列表视图。

滚动视图只支持一个孩子。我知道滚动视图内部的列表视图不起作用。但是有没有其他选项可以使用列表视图。我想滚动所有内容。

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView
        android:id="@+id/widget54"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        xmlns:android="http://schemas.android.com/apk/res/android"
        >
        <LinearLayout
            android:layout_width="310px"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            >
            <Button
                android:id="@+id/button1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button 1"
                />
            <Button
                android:id="@+id/button2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button 2"
                />
            <Button
                android:id="@+id/button3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button 3"
                />
            <EditText
                android:id="@+id/txt"
                android:layout_width="fill_parent"
                android:layout_height="300px"
                />
            <Button
                android:id="@+id/button4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button 4"
                />

        </LinearLayout>
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:40:24.197

ScrollView 中的 ListView 很肯定不起作用。

我能想到的唯一方法是，界面中只有一个列表视图，并为它创建一个自定义适配器：

```
public class HeaderAdapter{
    private Adapter mAdapter; // this adapter is the adapter that you will normally have, for your listview

    getViewTypeCount(){
        return mAdapter.getViewTypeCount() + 1;
    }

    getView(int pos, View convertView){
        // Handle only the first position, othervise, let mAdapter return
        if (pos!=0) return mAdapter.getView(pos-1, convertView);

        // 
        View v = LayoutInflater.inflate(R.layout.other_linear_layout);
        // Bind the v if necessary

        return v;
    }
} 
```

以上只是一个示例，想法是您将其余内容（线性布局、按钮、edittext 等）视为适配器的“标题”行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-06T09:21:20.933

如果 ScrollView 中只有一个 ListView，则可以在布局 XML 中为 ScrollView 添加一个属性： `android:fillViewport="true"`。

这将展开 ListView 的所有内容。

否则，如果ScrollView中有多个ListView或GridView，则需要创建一个customListView。

扩展 ListView 和 @Override onMeasure：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2,
                MeasureSpec.AT_MOST);
        super.onMeasure(widthMeasureSpec, expandSpec);
} 
```

# jquery - jQuery 表单验证；如果选中复选框，则为必填字段

> ID：10943530
> 
> 赞同：0
> 
> 时间：2012-06-08T05:32:24.707
> 
> 标签：jquery, forms

我目前正在处理这个； [http://www.geektantra.com/2009/09/jquery-live-form-validation/](http://www.geektantra.com/2009/09/jquery-live-form-validation/)

我正在尝试添加验证，因此如果用户选中“位置”框，则必须需要“L2”字段。我怎样才能用这个插件实现这一点？我是否必须混合复选框表达式？

```
expression: "if (isChecked(SelfID)) return true; else return false;", 
```

这是插件功能

```
<script type="text/javascript">
            jQuery(function(){
                jQuery("#v1").validate({
                    expression: "if (VAL) return true; else return false;",
                    message: "Please enter your name"
                });
            });
</script> 
```

这是表格

```
<form method="post" id="contactform" action="/form.php" >
<h5>Category:</h5>
<p><input type="checkbox" name="Location" value="Checked" onclick="toggle_visibility('f1');"> <span class="a1">- Location</span><br><div id="f1" style="display:none">Where are you located?<br /><input name="L2" id="L2" type="text"  /></div></p>

<h5>Name:</h5>
<p><input name="Name" id="v1" type="text" /></p>
<p><div><input name="submit" type="submit" value="Submit"/></div></p>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:39:09.827

你的意思是：

```
rules: {
      fieldName: {
        required: {       
          depends: function() {
            return $("input[name='checkbox']:checked")
          }
        }
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T23:59:54.720

出于某种原因，苏迪尔的回答对我不起作用——我不得不修改它：

```
rules: {
  fieldName: {
    required: {       
      depends: function(element) {
        return $("input[name='checkbox']:checked").length == 1
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:13:26.727

苏迪尔的回答是正确的。您所要做的就是在初始化验证时将其用作选项。

```
var opt = {};//copy from Sudhir's post of course change the field name as required.
$("form").validate(opt); 
```

# mongodb - 是否可以在流星中创建自定义 mongodb 游标？

> ID：10943531
> 
> 赞同：1
> 
> 时间：2012-06-08T05:32:25.707
> 
> 标签：mongodb, meteor

我有一个学生收藏和一个人收藏。Person 包含以下字段：姓名、地址等 Student 包含：rollno 和一个存储此学生的 person._id 的 person 字段

现在我想在学生模板中显示学生的姓名，但请注意学生中没有`name`字段，我需要从该学生的个人文档中获取该字段。

有没有办法在具有学生信息以及该学生个人文档中的选择性字段的客户端上获取 mongodb 光标？

此外，是否有更好或更标准的方式来实现我想要实现的目标？

注意：我不想使用冗余并将`name`字段存储在学生文档中，所以这不是解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T21:43:54.523

> 有没有更好或更标准的方式来实现我想要实现的目标？

听起来您正试图在一次阅读中阅读有关学生的所有信息 - 唯一的方法是将所有这些信息放在一个文档中。

文档数据库的灵活模式允许您在单个集合中拥有文档，这些文档不需要具有相同的模式，即字段数量。

所以我建议你考虑一下为什么你实际上需要为人和学生单独的集合 - 这会导致当你添加一个学生时写入两个集合（虽然一次写入是原子的，但两次写入不是）并且它也会导致你的问题现在有你需要有两个单独的阅读来获取有关学生的所有信息。

这个[SO question](https://stackoverflow.com/questions/10521901/mongodb-schema-design-for-polymorphic-objects)与您的情况有些相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:15:29.727

请参阅此线程中接受的答案：

[从集合中删除时观察游标时可能出现的错误](https://stackoverflow.com/questions/10643509/possible-bug-when-observing-a-cursor-when-deleting-from-collection)

它涉及使用内置`_publishCursor`标题的修改版本`publishModifiedCursor`，它允许您指定回调以将属性添加到您正在发布的游标中的每个文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:12:44.810

我会将您的代码更改为在 Person 对象中具有角色/工作属性。这是语义上的，至少对我来说是这样，想想某人以你原来的方法换工作与简单地改变角色的难度级别。

然后你可以搜索

```
Persons.find {role: 'student'} 
```

这完全类似于拥有一个学生对象。

正如 Asya 所说，学生们可以拥有其他人拥有的额外领域。

# .net - 字符串的 GetHashCode() 方法可以返回零吗？

> ID：10943533
> 
> 赞同：3
> 
> 时间：2012-06-08T05:32:34.543
> 
> 标签：.net, hashcode

使用该`GetHashCode()`方法获取字符串的哈希码时，它是否有可能返回零，或者使用的算法是否保证其他情况？

我问的原因是我有一个用例，我需要为空字符串发明一个散列，我正在考虑使用零而不是散列一些常量字符串。如果我这样做，我发生碰撞的可能性有多大（除非碰撞总是可能的明显事实）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T05:46:21.123

没有办法明确回答这个问题。[String.GetHashCode()](http://msdn.microsoft.com/en-us/library/system.string.gethashcode.aspx)的行为被记录为未定义，可能会在框架版本之间发生变化，并且在 32 位和 64 位系统之间会有所不同。

如果您选择了其他值，则可能会发生碰撞。零将是一个非常合理的默认值。

如果[Nullable.GetHashCode()](http://msdn.microsoft.com/en-us/library/axk9ks7d.aspx)存储空值，则返回 0，因此返回零的哈希码有一些先例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:43:05.313

`GetHashCode()`只要求哈希码一致。它不需要是唯一的。所以零是一个有效但非常幼稚的哈希值:)

显然，这将导致哈希表中的许多冲突。

至于字符串哈希码，我想在某些情况下是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:19:43.243

这是有风险的，空字符串可能会被强制转换为空字符串。例如：

```
 string nullstr = null;
        string notnull = nullstr + nullstr; 
```

可能有点古怪，但是当它发生时，您将有一个很好的调试时间。简单的解决方案是使用 string.Empty.GetHashCode()，不要求哈希码是唯一的。

# android - 我们可以以编程方式覆盖设备的 TTS 引擎设置吗？

> ID：10943536
> 
> 赞同：3
> 
> 时间：2012-06-08T05:33:19.993
> 
> 标签：android, text-to-speech

我必须在android中以编程方式覆盖设备的文本到语音设置，该怎么做？

完整的用例是：我的应用程序正在根据用户的输入设置应用程序语言，即：如果用户选择法语作为语言，则应用程序将显示所有文本并仅以法语宣布文本。但问题在于设备的 TTS 引擎设置您可以覆盖应用程序使用选项“始终使用我的设置”复选框进行设置，所以有什么方法可以通过我的应用程序以编程方式选中或取消选中该复选框，所以我需要从应用程序做的是当应用程序要宣布文本之前，在宣布它将取消选中复选框，然后宣布它，然后再次将复选框选中。

顺便说一句，我正在使用 android 2.1 版本并使用三星 Galaxy 标签开发应用程序。

请提供一些方法来实现它。

问候， 皮克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:44:36.163

您不必更改系统设置，您只需要调用`setLanguage()`并且可能`setEngineByPackageName()`在您的 TTS 实例上。通常，您无法从应用程序更改系统设置，TTS 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T21:08:57.803

就 TTS 速度而言，您无法覆盖设备设置，这很荒谬，默认“正常”太快而“慢”太慢......如果我们有滑动调整，如在 TTS 应用程序中，那么不会有问题。

# javascript - 如何使用 JavaScript 解析 RSS 提要？

> ID：10943544
> 
> 赞同：121
> 
> 时间：2012-06-08T05:34:16.270
> 
> 标签：javascript, html, rss

我需要解析 RSS 提要（XML 2.0 版）并在 HTML 页面中显示解析的详细信息。

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-06-08T05:43:24.190

## 解析提要

### 使用[jQuery](http://www.jquery.com/)的[jFeed](http://plugins.jquery.com/project/jFeed)

[（真的不推荐那个，请参阅其他选项。）]

```
jQuery.getFeed({
   url     : FEED_URL,
   success : function (feed) {
      console.log(feed.title);
      // do more stuff here
   }
}); 
```

### 使用[jQuery](http://www.jquery.com/)的内置 XML 支持

```
$.get(FEED_URL, function (data) {
    $(data).find("entry").each(function () { // or "item" or whatever suits your feed
        var el = $(this);

        console.log("------------------------");
        console.log("title      : " + el.find("title").text());
        console.log("author     : " + el.find("author").text());
        console.log("description: " + el.find("description").text());
    });
}); 
```

### 使用[jQuery](http://www.jquery.com/)和[Google AJAX Feed API](https://developers.google.com/feed/)

```
$.ajax({
  url      : document.location.protocol + '//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent(FEED_URL),
  dataType : 'json',
  success  : function (data) {
    if (data.responseData.feed && data.responseData.feed.entries) {
      $.each(data.responseData.feed.entries, function (i, e) {
        console.log("------------------------");
        console.log("title      : " + e.title);
        console.log("author     : " + e.author);
        console.log("description: " + e.description);
      });
    }
  }
}); 
```

但这意味着您依赖他们在线且可访问。

* * *

## 建筑内容

从提要中成功提取所需信息后，您可以创建[`DocumentFragment`](https://developer.mozilla.org/en/DOM/DocumentFragment)s （其中包含要注入[`document.createDocumentFragment()`](https://developer.mozilla.org/en/DOM/document.createDocumentFragment)的元素（使用 创建）以显示数据。[`document.createElement()`](https://developer.mozilla.org/en/DOM/document.createElement)

* * *

## 注入内容

在页面上选择您想要的容器元素并将您的文档片段附加到它，然后简单地使用 innerHTML 来完全替换其内容。

就像是：

```
$('#rss-viewer').append(aDocumentFragmentEntry); 
```

或者：

```
$('#rss-viewer')[0].innerHTML = aDocumentFragmentOfAllEntries.innerHTML; 
```

* * *

## 测试数据

使用这个[问题的提要](https://stackoverflow.com/feeds/question/10943544)，在撰写本文时给出：

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:creativeCommons="http://backend.userland.com/creativeCommonsRssModule" xmlns:re="http://purl.org/atompub/rank/1.0">
    <title type="text">How to parse a RSS feed using javascript? - Stack Overflow</title>
    <link rel="self" href="https://stackoverflow.com/feeds/question/10943544" type="application/atom+xml" />
        <link rel="hub" href="http://pubsubhubbub.appspot.com/" />        
    <link rel="alternate" href="https://stackoverflow.com/q/10943544" type="text/html" />
    <subtitle>most recent 30 from stackoverflow.com</subtitle>
    <updated>2012-06-08T06:36:47Z</updated>
    <id>https://stackoverflow.com/feeds/question/10943544</id>
    <creativeCommons:license>http://www.creativecommons.org/licenses/by-sa/3.0/rdf</creativeCommons:license> 
    <entry>
        <id>https://stackoverflow.com/q/10943544</id>
        <re:rank scheme="http://stackoverflow.com">2</re:rank>
        <title type="text">How to parse a RSS feed using javascript?</title>
        <category scheme="https://stackoverflow.com/feeds/question/10943544/tags" term="javascript"/><category scheme="https://stackoverflow.com/feeds/question/10943544/tags" term="html5"/><category scheme="https://stackoverflow.com/feeds/question/10943544/tags" term="jquery-mobile"/>
        <author>
            <name>Thiru</name>
            <uri>https://stackoverflow.com/users/1126255</uri>
        </author>
        <link rel="alternate" href="https://stackoverflow.com/questions/10943544/how-to-parse-a-rss-feed-using-javascript" />
        <published>2012-06-08T05:34:16Z</published>
        <updated>2012-06-08T06:35:22Z</updated>
        <summary type="html">
            &lt;p&gt;I need to parse the RSS-Feed(XML version2.0) using XML and I want to display the parsed detail in HTML page, I tried in many ways. But its not working. My system is running under proxy, since I am new to this field, I don&#39;t know whether it is possible or not. If any one knows please help me on this. Thanks in advance.&lt;/p&gt;

        </summary>
    </entry>
    <entry>
        <id>https://stackoverflow.com/questions/10943544/-/10943610#10943610</id>
        <re:rank scheme="http://stackoverflow.com">1</re:rank>
        <title type="text">Answer by haylem for How to parse a RSS feed using javascript?</title>
        <author>
            <name>haylem</name>
            <uri>https://stackoverflow.com/users/453590</uri>
        </author>    
        <link rel="alternate" href="https://stackoverflow.com/questions/10943544/how-to-parse-a-rss-feed-using-javascript/10943610#10943610" />
        <published>2012-06-08T05:43:24Z</published>   
        <updated>2012-06-08T06:35:22Z</updated>
        <summary type="html">&lt;h1&gt;Parsing the Feed&lt;/h1&gt;

&lt;h3&gt;With jQuery&#39;s jFeed&lt;/h3&gt;

&lt;p&gt;Try this, with the &lt;a href=&quot;http://plugins.jquery.com/project/jFeed&quot; rel=&quot;nofollow&quot;&gt;jFeed&lt;/a&gt; &lt;a href=&quot;http://www.jquery.com/&quot; rel=&quot;nofollow&quot;&gt;jQuery&lt;/a&gt; plug-in&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;jQuery.getFeed({
   url     : FEED_URL,
   success : function (feed) {
      console.log(feed.title);
      // do more stuff here
   }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;With jQuery&#39;s Built-in XML Support&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;$.get(FEED_URL, function (data) {
    $(data).find(&quot;entry&quot;).each(function () { // or &quot;item&quot; or whatever suits your feed
        var el = $(this);

        console.log(&quot;------------------------&quot;);
        console.log(&quot;title      : &quot; + el.find(&quot;title&quot;).text());
        console.log(&quot;author     : &quot; + el.find(&quot;author&quot;).text());
        console.log(&quot;description: &quot; + el.find(&quot;description&quot;).text());
    });
});
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;With jQuery and the Google AJAX APIs&lt;/h3&gt;

&lt;p&gt;Otherwise, &lt;a href=&quot;https://developers.google.com/feed/&quot; rel=&quot;nofollow&quot;&gt;Google&#39;s AJAX Feed API&lt;/a&gt; allows you to get the feed as a JSON object:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$.ajax({
  url      : document.location.protocol + &#39;//ajax.googleapis.com/ajax/services/feed/load?v=1.0&amp;amp;num=10&amp;amp;callback=?&amp;amp;q=&#39; + encodeURIComponent(FEED_URL),
  dataType : &#39;json&#39;,
  success  : function (data) {
    if (data.responseData.feed &amp;amp;&amp;amp; data.responseData.feed.entries) {
      $.each(data.responseData.feed.entries, function (i, e) {
        console.log(&quot;------------------------&quot;);
        console.log(&quot;title      : &quot; + e.title);
        console.log(&quot;author     : &quot; + e.author);
        console.log(&quot;description: &quot; + e.description);
      });
    }
  }
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;But that means you&#39;re relient on them being online and reachable.&lt;/p&gt;

&lt;hr&gt;

&lt;h1&gt;Building Content&lt;/h1&gt;

&lt;p&gt;Once you&#39;ve successfully extracted the information you need from the feed, you need to create document fragments containing the elements you&#39;ll want to inject to display your data.&lt;/p&gt;

&lt;hr&gt;

&lt;h1&gt;Injecting the content&lt;/h1&gt;

&lt;p&gt;Select the container element that you want on the page and append your document fragments to it, and simply use innerHTML to replace its content entirely.&lt;/p&gt;
</summary>
    </entry></feed> 
```

## 处决

### 使用 jQuery 的内置 XML 支持

*调用：*

```
$.get('https://stackoverflow.com/feeds/question/10943544', function (data) {
    $(data).find("entry").each(function () { // or "item" or whatever suits your feed
        var el = $(this);

        console.log("------------------------");
        console.log("title      : " + el.find("title").text());
        console.log("author     : " + el.find("author").text());
        console.log("description: " + el.find("description").text());
    });
}); 
```

*打印出来：*

```
------------------------
title      : How to parse a RSS feed using javascript?
author     : 
            Thiru
            https://stackoverflow.com/users/1126255

description: 
------------------------
title      : Answer by haylem for How to parse a RSS feed using javascript?
author     : 
            haylem
            https://stackoverflow.com/users/453590

description: 
```

### 使用 jQuery 和 Google AJAX API

*调用：*

```
$.ajax({
  url      : document.location.protocol + '//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent('https://stackoverflow.com/feeds/question/10943544'),
  dataType : 'json',
  success  : function (data) {
    if (data.responseData.feed && data.responseData.feed.entries) {
      $.each(data.responseData.feed.entries, function (i, e) {
        console.log("------------------------");
        console.log("title      : " + e.title);
        console.log("author     : " + e.author);
        console.log("description: " + e.description);
      });
    }
  }
}); 
```

*打印出来：*

```
------------------------
title      : How to parse a RSS feed using javascript?
author     : Thiru
description: undefined
------------------------
title      : Answer by haylem for How to parse a RSS feed using javascript?
author     : haylem
description: undefined 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-06-13T02:03:04.367

另一个**已弃用** *（感谢@daylight）*选项，对我来说最简单（这是我用于[SpokenToday.info](http://spokentoday.info)的）：

[Google Feed API](https://developers.google.com/feed/)不使用 JQuery ，只需 2 个步骤：

1.  导入库：

    ```
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">google.load("feeds", "1");</script> 
    ```

2.  查找/加载提要（[文档](https://developers.google.com/feed/v1/jsondevguide#using_json)）：

    ```
    var feed = new google.feeds.Feed('http://www.google.com/trends/hottrends/atom/feed?pn=p1');
    feed.load(function (data) {
        // Parse data depending on the specified response format, default is JSON.
        console.dir(data);
    }); 
    ```

3.  要解析数据，请查看[有关响应格式的文档](https://developers.google.com/feed/v1/jsondevguide#resultJson)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-02T10:57:05.757

不幸的是，对于其他阅读本文的人（从 2019 年开始），大多数 JS RSS 阅读实现现在都不起作用。首先，Google API 已经关闭，所以这不再是一个选项，并且由于 CORS 安全策略，您现在通常不能跨域请求 RSS 提要。

使用[https://www.raymondcamden.com/2015/12/08/parsing-rss-feeds-in-javascript-options](https://www.raymondcamden.com/2015/12/08/parsing-rss-feeds-in-javascript-options) (2015) 上的示例，我得到以下信息：

`Access to XMLHttpRequest at 'https://feeds.feedburner.com/raymondcamdensblog?format=xml' from origin 'MYSITE' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.`

这是正确的，并且是最终网站的安全预防措施，但现在确实意味着上述答案不太可能奏效。

我的解决方法可能是通过 PHP 解析 RSS 提要并允许 javascript 访问我的 PHP，而不是尝试访问最终目标提要本身。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-04T14:17:18.560

如果您正在为您的 rss 小部件寻找一个简单且免费的[Google Feed API替代方案，那么](https://developers.google.com/feed/)***[rss2json.com](https://rss2json.com/)***可能是一个合适的解决方案。

您可以尝试从以下*[api 文档](https://rss2json.com/google-feed-api-alternative)*中的示例代码中查看它是如何工作的：

```
google.load("feeds", "1");

    function initialize() {
      var feed = new google.feeds.Feed("https://news.ycombinator.com/rss");
      feed.load(function(result) {
        if (!result.error) {
          var container = document.getElementById("feed");
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var div = document.createElement("div");
            div.appendChild(document.createTextNode(entry.title));
            container.appendChild(div);
          }
        }
      });
    }
    google.setOnLoadCallback(initialize);
```

```
<html>
  <head>    
     <script src="https://rss2json.com/gfapi.js"></script>
  </head>
  <body>
    <p><b>Result from the API:</b></p>
    <div id="feed"></div>
  </body>
</html>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-28T12:42:24.500

我对许多误导性的文章和答案感到非常愤怒，以至于我编写了自己的 RSS 阅读器： [https ://gouessej.wordpress.com/2020/06/28/comment-creer-un-lecteur-rss-en-javascript-how- to-create-a-rss-reader-in-javascript/](https://gouessej.wordpress.com/2020/06/28/comment-creer-un-lecteur-rss-en-javascript-how-to-create-a-rss-reader-in-javascript/)

您可以使用 AJAX 请求来获取 RSS 文件，但当且仅当您使用 CORS 代理时它才会起作用。我将尝试编写自己的 CORS 代理，为您提供更强大的解决方案。与此同时，它可以工作，我将它部署在我的 Debian Linux 下的服务器上。

我的解决方案不使用 JQuery，我只使用普通的 Javascript 标准 API，没有第三方库，它应该可以与 Microsoft Internet Explorer 11 一起使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-09T05:43:41.117

如果你想使用纯 JavaScript API，在[https://github.com/hongkiat/js-rss-reader/有一个很好的例子](https://github.com/hongkiat/js-rss-reader/)

[https://www.hongkiat.com/blog/rss-reader-in-javascript/](https://www.hongkiat.com/blog/rss-reader-in-javascript/)上的完整描述

它使用`fetch`方法作为异步获取资源的全局方法。下面是一段代码：

```
fetch(websiteUrl).then((res) => {
  res.text().then((htmlTxt) => {
    var domParser = new DOMParser()
    let doc = domParser.parseFromString(htmlTxt, 'text/html')
    var feedUrl = doc.querySelector('link[type="application/rss+xml"]').href
  })
}).catch(() => console.error('Error in fetching the website')) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-16T10:23:31.327

您可以使用[jquery-rss](https://github.com/sdepold/jquery-rss)或[Vanilla RSS](https://github.com/sdepold/vanilla-rss)，它们带有漂亮的模板并且非常易于使用：

```
// Example for jquery.rss
$("#your-div").rss("https://stackoverflow.com/feeds/question/10943544", {
    limit: 3,
    layoutTemplate: '<ul class="inline">{entries}</ul>',
    entryTemplate: '<li><a href="{url}">[{author}@{date}] {title}</a><br/>{shortBodyPlain}</li>'
})

// Example for Vanilla RSS
const RSS = require('vanilla-rss');
const rss = new RSS(
    document.querySelector("#your-div"),
    "https://stackoverflow.com/feeds/question/10943544",
    { 
      // options go here
    }
);
rss.render().then(() => {
  console.log('Everything is loaded and rendered');
}); 
```

有关工作示例，请参阅[http://jsfiddle.net/sdepold/ozq2dn9e/1/ 。](http://jsfiddle.net/sdepold/ozq2dn9e/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-11T16:26:49.200

现在试图找到一个好的解决方案，我偶然发现了[FeedEk jQuery RSS/ATOM Feed 插件，它通过 jQuery](https://jquery-plugins.net/FeedEk/FeedEk.html) [Feed API](https://jquery-plugins.net/feed-api)很好地解析和显示 RSS 和 Atom 提要。对于一个基本的基于 XML 的 RSS 提要，我发现它就像一个魅力，不需要服务器端脚本或其他 CORS 变通方法，它甚至可以在本地运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-01T22:28:24.100

由于我不断收到 CORS 错误，我没有找到仅使用 js 解析 RSS 的解决方案。安装插件对我来说不是一个选项，构建代理也不好玩，我发现的小解决方案也不起作用。

因此，以防万一有人来到这里并可以使用服务器端，我发现[这个](https://makitweb.com/how-to-read-rss-feeds-using-php/)PHP 解决方案非常适合我！（没有 CORS 错误！“x 已被 CORS 策略阻止...”）

# python - Python：为什么我们需要一个构建工具，你对 CI 有什么建议？

> ID：10943548
> 
> 赞同：9
> 
> 时间：2012-06-08T05:34:44.370
> 
> 标签：python, django, build, continuous-integration, package

我有相当多的经验`Python`，但我还没有使用`Build tools`过。

我的技术：

*   Python
*   姜戈

> Python 开发人员谈论需要以下内容的继续集成：

*   VCS [我使用 GIT]
*   **构建工具[我一无所知]**
*   像 Jenkins 这样的 CI 系统 [我正在学习]

那么，**为什么要使用`Build Tool`它提供的东西**呢？

和打包工具一样吗？

我听说过`maven`但`ant`从未听说过在 python 世界中使用它们，这是为什么呢？

你会推荐什么给第一个计时器`Build tools`？

这对部署有何帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T05:46:25.400

[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)的 wiki几乎解释了它。

构建工具与构建整个项目所需的东西有关。如果您的项目是 100% 纯 python，那么您可能没有任何构建工具作为其所有解释脚本。您将继续致力于该项目，它将继续构建（如果需要构建）和测试。

编译语言（或者如果您的 python 项目需要以某种方式打包以进行测试）将需要构建工具来生成可以由 CI 系统运行和测试的程序。

例如，如果您的项目是 C++，您可能正在使用`make`它作为构建工具。当您提交新代码时，`make`必须运行以构建项目并进行测试。

# mysql - MYSQL中的死锁

> ID：10943549
> 
> 赞同：-3
> 
> 时间：2012-06-08T05:35:46.013
> 
> 标签：mysql

与大量设备执行事务时，发生死锁错误。我正在使用 MySQL。大量设备将同时访问数据库。这会导致错误代码 1205。

有什么建议……？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:42:06.313

从[文档](http://dev.mysql.com/doc/refman/4.1/en/error-messages-server.html#error_er_lock_wait_timeout)：

> 消息：超过锁定等待超时；**尝试重启事务**

这说明了一切。另一个问题是如何找出导致超时的原因——但这几乎不可能用给定的信息来判断。您必须提供一些数字（“一个巨大的数字”是多少；在您的事务中执行了多少（以及哪些）语句）以及有关您所涉及的表结构的一些信息。

如果没有办法再加快您的事务，您可以编辑您的`my.cnf`并增加超时 ( `innodb_lock_wait_timeout`)，或者，如果您只想增加此事务的超时，请`SET innodb_lock_wait_timeout = 120;`在开始之前调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:45:54.843

您可以从以下几个地方开始：

*   [http://www.serveradminblog.com/2011/03/tuning-mysql-performance-howto-part-1/](http://www.serveradminblog.com/2011/03/tuning-mysql-performance-howto-part-1/)

*   [http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)

*   [http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html)

你的问题非常广泛。你需要做一些功课，并了解一些事实。这是一项艰苦的工作——但这​​是绝对必要的。

恕我直言...

# windows-phone-7 - UDPAnySourceMulticastClient 仅适用于 Wi-fi？

> ID：10943550
> 
> 赞同：1
> 
> 时间：2012-06-08T05:35:45.977
> 
> 标签：windows-phone-7, udp, discovery

我正在开发一个需要在网络中发现设备的应用程序。我在 windows phone 7 中使用 UDPAnySourceMulticastClient 来发现桌面客户端。每当我将桌面连接到 D-link 或 wi-fi 连接器时，我都能在我的 wp7 中发现桌面。

但是当我通过以太网将桌面连接到某个网络并将 wp7 连接到桌面使用的同一网络时，我的问题出现了，我无法发现桌面（即使我正在向群组发送消息）。UDPAnySourceMulticastClient 只有在两者都通过 wi-fi 网络连接时才有效吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:29:48.360

UDP 多播依赖于用于使网络（路由器等）将消息重新广播给所有其他客户端的硬件。虽然可能会出现更复杂的情况，但对于连接到同一个无线集线器的通信以外的任何东西都启用多播是不常见的。

# javascript - javascript中是否有任何方法“request.form”，如asp.net

> ID：10943551
> 
> 赞同：1
> 
> 时间：2012-06-08T05:35:50.037
> 
> 标签：javascript, jquery, apex-code

我想要用于顶点代码的 request.form 所以我正在尝试在 javascript 中为 asp 页面有直接方法 request.form 但它在 javascript 中不起作用...请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:50:08.083

如果要访问表单内的元素值，可以使用`document.forms[]`as：

```
var oForm = document.forms[1]; 
```

或者

```
var oForm = document.forms["myFormId"]; 
```

一旦你在一个变量中有表单，你就可以像这样访问你的表单内部的元素：

```
var myElement = oForm.elements[2]; 
```

或者

```
var myElement = oForm.elements["elementId"]; 
```

此外，您可以像这样访问元素的值：

```
var value = oForm.elements["elementId"].value; 
```

# c# - 在动态更新 UI 时执行线程

> ID：10943552
> 
> 赞同：1
> 
> 时间：2012-06-08T05:35:54.373
> 
> 标签：c#

我一直在努力解决这个问题。当谈到线程时，我很困惑。

我正在尝试做的是在函数中延迟 1 次暂停并继续该函数，直到另一个 1 秒的暂停出现并最终完成该函数。

```
public partial class SplashScreen : Form
{
    public SplashScreen()
    {
        InitializeComponent(); // initalize splash screen
        DatabaseStatus(); // set database connection
        getUserInfo(); // get user information
        showInfo(); // show app information on splash screen
        System.Threading.Thread wa = new System.Threading.Thread(new System.Threading.ThreadStart(checkUser));
        wa.IsBackground = true;
        wa.Start();
    }

    void checkUser()
    { 
        if (RegisteredUser)
        {
            richTextBox1.Text += "Loading user settings...";  // SHOW THIS TEXT AND WAIT 1 SECOND UNTIL NEXT
            System.Threading.Thread.Sleep(1000); 

            if (DATABASE_CONNECTION)
            {
                richTextBox1.Text += "Loging on...";
                // WAIT AGAIN 1 SEC AND CONTINUE///
                LoginCheck login = new LoginCheck(USER_NAME, PASSWORD);
                if (login.LOGIN_SUCESS)
                {
                    richTextBox1.Text += "Sucess!";
                   // SHOW THIS TEXT AND WAIT 1 SEC UNTIL SPLASH SCREEN FADE OUT//
                    //MessageBox.Show(login.HASH);
                    opac.Interval = 12;
                    opac.Start();
                    opac.Tick += new EventHandler(dec);
                }
                else
                {
                    MessageBox.Show(login.HASH);
                }
            }
        }
        else
        {
            richTextBox1.Text += "Not user profile found...";
            // ask user to register
        }
    }
} 
```

我放置评论的地方是我希望线程暂停并继续的地方......

有人有意见吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:44:48.317

首先，您必须知道在使用 WinForms（以及 WPF/Silverlight ...

如果您需要做异步工作，您将需要使用`Invoke`或`BeginInvoke`将您的 UI 工作转换回表单或控件的线程。另外，考虑使用委托（`MethodInvoker`很方便）而不是创建自己的线程。

此外，您需要在`Load`事件期间或之后开始异步工作，否则您的逻辑将在表单显示之前开始执行（请参见下面的示例）。

我以您的示例并将其放入我自己的简化示例中。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        RegisteredUser = true;
        DATABASE_CONNECTION = true;

    }

    private void UpdateStatus(string message)
    {
        BeginInvoke(new MethodInvoker(() => richTextBox1.Text += message));
    }

    private void CheckUser()
    {
        if (RegisteredUser)
        {
            UpdateStatus("Loading user settings..."); // SHOW THIS TEXT AND WAIT 1 SECOND UNTIL NEXT
            System.Threading.Thread.Sleep(1000);

            if (DATABASE_CONNECTION)
            {
                UpdateStatus("Logging on...");
                //// WAIT AGAIN 1 SEC AND CONTINUE///
                //LoginCheck login = new LoginCheck(USER_NAME, PASSWORD);
                if (true)//login.LOGIN_SUCESS)
                {
                    UpdateStatus("Success!");
                    // SHOW THIS TEXT AND WAIT 1 SEC UNTIL SPLASH SCREEN FADE OUT//
                    //MessageBox.Show(login.HASH);
                    //opac.Interval = 12;
                    //opac.Start();
                    //opac.Tick += new EventHandler(dec);
                }
                else
                {
                    //MessageBox.Show(login.HASH);
                }
            }
        }
        else
        {
            UpdateStatus("No user profile found.");
            // ask user to register
        }
    }

    protected bool DATABASE_CONNECTION { get; set; }

    protected bool RegisteredUser { get; set; }

    private void Form1_Load(object sender, EventArgs e)
    {
        var invoker = new MethodInvoker(CheckUser);
        invoker.BeginInvoke(null, null);
    }
} 
```

如您所见，我使用了一种方法，例如为`UpdateStatus`我在 UI 上工作，确保它在 UI 线程上完成。您可以使用任意数量的类似方法在 UI 中执行其他操作，例如触发表单的淡入淡出等。

你甚至不应该在 UI 线程之外显示消息框；让那些通过类似的方法安全地调用（同样，对于调试，只是`Debug.WriteLine`将消息写入调试器，而不是到处弹出消息框）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:40:54.070

我建议您在单独的后台工作线程中执行所有操作并更新 UI 中的状态。这使 UI 更快，您的应用程序更可靠。

[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T19:01:55.080

```
public partial class SplashScreen : Form
{      
    bool DATABASE_CONNECTION;
    bool RegisteredUser; // if user has been registered
    string USER_NAME;
    string PASSWORD;
    double LIN_x = 0.01;

    DialogResult result;
    custom con = new custom();
    Timer opac = new Timer();

    public SplashScreen()
    {
        InitializeComponent(); // initalize splash screen
        DatabaseStatus(); // set database connection
        getUserInfo(); // get user information
        showInfo(); // show app information on splash screen
    }

    private void UpdateStatus(string message)
    {
        BeginInvoke(new MethodInvoker(() => richTextBox1.Text += message + Environment.NewLine));
    }

    void checkUser()
    {
        UpdateStatus("Loading user settings..."); 
        if (RegisteredUser)
        {
            UpdateStatus("User " + USER_NAME + " found." );
            if (DATABASE_CONNECTION)
            {
                UpdateStatus("Logging on..."); 
                LoginCheck login = new LoginCheck(USER_NAME, PASSWORD);
                if (login.LOGIN_SUCESS)
                {
                    UpdateStatus("Success! Loading " + con.AppTitle() + "...please wait");

                    //UpdateStatus(login.HASH); return hash string from web site
                    fadeSplash(); // begin fade out of form
                }
                else
                {
                    UpdateStatus("There was an error logging in."); 

                }
            }
            else
            {
                UpdateStatus("No database connection found."); 

            }
        }
        else
        {
            UpdateStatus("No user found"); 

            Reg(); // Registration form
        }
    }

    private void fadeSplash()
    {
        opac.Interval = 12;
        opac.Tick += new EventHandler(dec);
        opac.Start();
    }

    private void dec(object sender, EventArgs e)
    {
        this.Opacity -= LIN_x;
        if (this.Opacity < 0.04)
        {
            opac.Stop();
            this.Hide();
            main open = new main(); // start application
            open.Show();
        }
    }
} 
```

这是在 MethodInvoke 期间淡出方法不触发的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T05:40:41.840

你需要使用 Invoke() 看到[这个](http://www.codeproject.com/Articles/2083/The-key-to-multi-threaded-Windows-Forms-UI-interac)

# powershell - Powershell：函数中的 $LASTEXITCODE

> ID：10943554
> 
> 赞同：16
> 
> 时间：2012-06-08T05:36:08.220
> 
> 标签：powershell, powershell-2.0, powershell-ise

嗨，我注意到以下代码片段有一些奇怪的行为

```
function test
{
    $LASTEXITCODE = $null
    ping asdfs
    Write-Host "Last exitcode: $LASTEXITCODE"
}

test
Write-Host "Last exitcode: $LASTEXITCODE" 
```

这个的输出是

```
Ping request could not find host asdfs. Please check the name and try again.
Last exitcode: 
Last exitcode: 1 
```

为什么 $LASTEXITCODE 没有在 test() 函数中设置？

这是我现在遇到的一个问题的概括，当我从函数中调用 Win32 .exe 并且 $LASTEXITCODE 没有返回我在函数中期望的值时

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-08T06:16:18.520

因为您不应该设置这样的自动变量。您正在创建一个局部变量并将其无效。删除该`$LASTEXITCODE = $null`行，您将获得预期的结果。或者你可以做`$global:LASTEXITCODE = $null`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T15:23:00.067

您在功能测试范围内为 $LASTEXITCODE 分配一个值，它实际上是在其中设置的。输出的最后一行将 $LASTEXITCODE 列为 1，因为您离开了函数 test 的范围，并且在该范围内分配给 $LASTEXITCODE 的值不再有任何意义。

正如 manojlds 已经指出的那样，如果您想获得该结果，您可以全局设置变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-08T22:04:01.773

不确定我是否喜欢直接设置 $LASTEXITCODE ......可能最好让系统内部来做：

```
cmd /c "exit 0" #Reset $LASTEXITCODE between runs while debugging 
```

# iphone - 当应用程序在后台时，是否需要在 didUpdateToLocation 方法中进行任何事件处理？

> ID：10943557
> 
> 赞同：0
> 
> 时间：2012-06-08T05:36:33.703
> 
> 标签：iphone, ios5, gps, xcode4.2, core-location

我在我的应用程序中使用核心位置框架，我在 UIBackgroundMode 中添加了位置字符串或在 info.plist 中添加了所需的背景模式（在 xcode 4.2 中），以在应用程序也处于后台状态时获取有关位置的更新。在此链接[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)的文档中，说明 UIBackgroundMode(location) 将在位置更新时通知应用程序应用程序在后台。我认为如果应用程序睡眠和位置更新，那么应用程序将收到有关位置更新的通知，它会再次进入后台状态，对吗？或者当应用程序在后台时，我们是否需要在 didUpdateToLocation 方法中进行任何事件处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:34:57.350

在 didupdatelocation 方法中不需要事件处理。它会在位置更新时通知应用程序。

谢谢。

# ruby-on-rails - 访问 ApplicationHelper 中的 *_path 助手

> ID：10943561
> 
> 赞同：0
> 
> 时间：2012-06-08T05:36:56.707
> 
> 标签：ruby-on-rails

我想在 ApplicationHelper 中调用 *_path 方法（如`root_path`、`post_path`等）。

如果直接调用它，我会得到一个错误

```
NameError: undefined local variable or method `root_path' for #<ActionView::Base:0x00000002d94480> 
```

有什么方便的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:48:08.273

您可能忘记在 config/routes.rb 中定义 root_path。例如，

```
root to: "shared_pages#home" 
```

# c# - 从数字数组中查找所有加法和减法组合

> ID：10943562
> 
> 赞同：1
> 
> 时间：2012-06-08T05:36:57.613
> 
> 标签：c#, algorithm, recursion

我需要创建一个函数来接收一个数字数组和一个目标数字，并返回您可以通过多少种不同的方式添加或减去这些数字以获得目标数字。

IE。

值 = 2、4、6、8 目标 = 12

2 + 4 + 6 = 12，

4 + 8 = 12，

6 + 8 - 2 = 12，

2 - 4 + 6 + 8 = 12，

返回 4

这是我到目前为止所拥有的，但它只计算加法问题。

```
private void RecursiveSolve(int goal, int currentSum, List<int> included, List<int> notIncluded, int startIndex) 
{
    for (int index = startIndex; index < notIncluded.Count; index++) 
    {
        int nextValue = notIncluded[index];
        if (currentSum + nextValue == goal)
        {
            List<int> newResult = new List<int>(included);
            newResult.Add(nextValue);
            mResults.Add(newResult);
        }
        else if (currentSum - nextValue == goal)
        {
            List<int> newResult = new List<int>(included);
            newResult.Add(nextValue);
            mResults.Add(newResult);
        }

        if (currentSum - nextValue < goal && currentSum - nextValue > 0 )
        {
            List<int> nextIncluded = new List<int>(included);
            nextIncluded.Add(nextValue);
            List<int> nextNotIncluded = new List<int>(notIncluded);
            nextNotIncluded.Remove(nextValue);
            RecursiveSolve(goal, currentSum - nextValue, nextIncluded, nextNotIncluded, startIndex++);
        }

        if (currentSum + nextValue < goal)
        {
            List<int> nextIncluded = new List<int>(included);
            nextIncluded.Add(nextValue);
            List<int> nextNotIncluded = new List<int>(notIncluded);
            nextNotIncluded.Remove(nextValue);
            RecursiveSolve(goal, currentSum + nextValue, nextIncluded, nextNotIncluded, startIndex++);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:13:05.197

嗯，简单的方法是尝试所有的组合。如果你有 N 个数字，你就有 3^N 个组合。推理是这样的：你对数字求和，但在每个数字前面加上一个系数。如果您的数字是 A1..AN，则添加 N 个系数 (C1..CN) 并求和：

```
Sum (Ai*Ci) 
```

您的 Cis 可以是 1（表示您添加数字）、-1（表示您减去该数字）或 0（表示您忽略该数字）。

因此，检查所有 3^N 可能的系数分配，计算总和并与您的目标进行比较。

我假设所有数字都不同（如您的示例中所示）。如果一个数字可以出现两次，您需要考虑到这一点。

# asp.net - TextBox水印中的闪烁文本框

> ID：10943566
> 
> 赞同：0
> 
> 时间：2012-06-08T05:37:45.583
> 
> 标签：asp.net, ajaxcontroltoolkit

我使用此代码

```
 <asp:TextBox ID="txtsearch" runat="server" Style="margin-top:21px; margin-right: 14px; margin-bottom: 0px;
                width: 120px; height: 13px; font-size: 11px" BorderStyle="None"></asp:TextBox>
<ajaxToolkit:TextBoxWatermarkExtender ID="TBWE2" runat="server"
TargetControlID="TextBox1"
WatermarkText="Type First Name Here"
WatermarkCssClass="watermarked" /> 
```

风格是

```
 .unwatermarked
    {
        height: 18px;
        width: 148px;
    }

    .watermarked
    {
        height: 20px;
        width: 150px;
        padding: 2px 0 0 2px;
        border: 1px solid #BEBEBE;
        background-color: #F0F8FF;
        color: gray;
    } 
```

它是显示水印，但它是闪烁的文字！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:38:38.323

像下面这样更改你的代码我在 IE、Mozilla、chrome 中有 chk

```
<asp:TextBox ID="TextBox1" runat="server" Style="margin-top:21px; margin-right: 14px; margin-bottom: 0px;
                    width: 120px; height: 13px; font-size: 11px" ></asp:TextBox>

            <asp:TextBoxWatermarkExtender ID="TextBox1_TextBoxWatermarkExtender" 
                runat="server" Enabled="True" WatermarkText="Type First Name Here"
     WatermarkCssClass="watermarked" TargetControlID="TextBox1">
            </asp:TextBoxWatermarkExtender> 
```

# javascript - 如何使用 JavaScript 中的值填充下拉列表？

> ID：10943567
> 
> 赞同：4
> 
> 时间：2012-06-08T05:38:01.543
> 
> 标签：javascript, jquery, asp.net, c#-4.0, tridion

我在 Tridion CMS 的扩展中向功能区工具栏按钮添加了一个按钮。单击按钮后，将显示一个带有两个下拉菜单的弹出页面。通过更改第一个下拉控件中的值，我应该填充第二个下拉控件的值。就我而言，我正在使用`ASP drop down list`控制。目前，我将硬编码要填充到 Java 脚本中的第二个下拉列表的值。对于此要求，我正在使用以下代码，但我无法填充该值（未识别标签）。

Java脚本代码：

```
ABC.WCMS.RTFExtension.Popups.ButtonPopup.prototype._populate = function () {    
    var selectedValue = $('#functionalcomponent').value;//First dropdown selected value
    var dropdownId = $("#Dd");//Second Dropdown Control

        switch (selectedValue) {

            case "Home Ware":
                dropdownId.append($("<option> </option>").val("Select Sub-Category").html(""));
                dropdownId.append($("<option> </option>").val("Air-Conditioners/Coolers").html("Air-Conditioners/Coolers"));              
                break;
            case "Education":
                dropdownId.append($("<option> </option>").val("Select Sub-Category").html(""));
                dropdownId.append($("<option> </option>").val("Colleges").html("Colleges"));
                break;
            default:
                dropdownId.append($("<option> </option>").val("Select Sub-Category").html(""));
                dropdownId.append($("<option> </option>").val("No Value").html("No Value"));

        }
    return true;
} 
```

ASPX 控件：

```
<%--Dropdown1--%>
<asp:DropDownList ID="functionalcomponent" runat="server"></asp:DropDownList>
<%--Dropdown2--%>
<asp:DropDownList ID="Dd" runat="server"></asp:DropDownList> 
```

如何从外部 JavaScript 文件中填充第二个下拉列表的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:58:51.977

您可以使用以下方法，而不是按需添加值：

1.  预先将所有项目添加到 DOM。

2.  使用 jQuery 逻辑隐​​藏所需的项目。

    您可以参考以下帖子以获取提示[使用 jQuery 在选择列表中隐藏选项](https://stackoverflow.com/questions/1271503/hide-options-in-a-select-list-using-jquery)

请查看[基于 Radio selected 的 jQuery disable SELECT 选项（需要所有浏览器的支持](https://stackoverflow.com/questions/877328/jquery-disable-select-options-based-on-radio-selected-need-support-for-all-brow/878331#878331)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:44:56.260

我最近开发了一个 GUI 扩展，我们根据另一个下拉列表的值填充了一个下拉列表。当我使用 javascript 填充时，我有以下代码：

```
$j(c.SystemDropDown).append("<option value=\"" + value + "\">" + value + "</option>"); 
```

如您所见，我的示例附加了整个`<option>`标签，而您的标签是使用 指定的`.val()`，也许您可​​以尝试这种方式？

我的版本很好用:)

# django - Django-nonrel：生产中仅加载部分夹具数据

> ID：10943568
> 
> 赞同：1
> 
> 时间：2012-06-08T05:38:18.367
> 
> 标签：django, google-app-engine, google-cloud-datastore, django-nonrel

作为一个学习项目，我使用 django-nonrel 和 GAE 来设计一个包含尽可能多关于 NBA 数据的网站。因此，我需要使用夹具将大部分数据预填充到我的数据库（我正在使用 GAE 数据存储）中，因为手动输入 400 多名玩家的信息简直是不可想象的。为此，我创建了一个具有以下格式的 .yaml 固定装置（直接取自[django 文档示例](https://docs.djangoproject.com/en/1.3/howto/initial-data/)）：

```
- model: players.player
  pk: 1
  fields: 
    team:  10
    first_name:  Jeff
    last_name:  Adrien
    age:  25
    pos:  SF
    gp:  8

- model: players.player
  pk: 2
  fields: 
    team:  7
    first_name:  Arron
    last_name:  Afflalo
    age:  26
    pos:  SG
    gp:  32 
```

不幸的是，当我运行“python manage.py remote loaddata nbadata.yaml”时，它只加载了前 190 个播放器（我之所以这么说是因为它第一次加载 190，第二次加载 186），然后才把它给我以下错误消息：

```
File "/usr/local/google_appengine/lib/fancy_urllib/fancy_urllib/__init__.py", 
line 367, in do_open
raise url_error
URLError: <urlopen error [Errno 101] Network is unreachable> 
```

有谁知道发生了什么，是否有解决方案？

更新：我将 .yaml 文件的名称更改为“initial_data.yaml”，以查看在“python manage.py deploy”过程的 syncdb 部分中自动加载是否会更好。我得到以下结果：

```
Running syncdb.
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Installed 448 object(s) from 1 fixture(s) 
```

但是，当我查看数据存储区时，仍然只有 186 个玩家！有谁知道怎么回事？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:05:52.183

远程 API 发出 HTTP 请求以上传每个 HTTP 实体。在某些时候，您的网络连接失败，整个操作失败。

可以想到两种解决方案，但都不是特别容易： - 找到更好的互联网连接。- 修补 django-nonrel 中的夹具上传代码以进行一些自动重试而不是失败。

我不确定，但我不认为 syncdb 真的适用于生产，我相信它只是针对本地数据存储运行，这就是你看到它成功的原因。

# android - 如何从android中的加速度计和磁力计中检索位置

> ID：10943569
> 
> 赞同：0
> 
> 时间：2012-06-08T05:38:19.617
> 
> 标签：android, accelerometer, android-sensors, magnetometer

我想从 android 设备中的加速度计和磁力计检索位置和速度，我目前可以从加速度计获取速度，但是如何使用速度传感器和地磁场将其与磁力计传感器的位置相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:31:24.380

这个问题[经常出人意料地出现](https://stackoverflow.com/a/6648664/341970)。

您无法获得准确的位置甚至速度，但这里有[一些提示，您实际上可以做些什么](https://stackoverflow.com/a/7835988/341970)。

# jquery - jQuery ajax - 变音字符编码

> ID：10943575
> 
> 赞同：2
> 
> 时间：2012-06-08T05:38:43.320
> 
> 标签：jquery, ajax, character-encoding, special-characters

我正在使用 jquery 的 ajax() 方法将包装在 XML 格式中的数据发送到服务器：

```
url = "http://mysite.com/service/command";    
input = "my string";
xml = "<request><space>"+space_id+"</space><input>"+input+"</input></request>";
$.ajax({ 
    type: "POST", 
    url: url,
    dataType: 'xml;charset=UTF-8',
    data: xml
}); 
```

如果传递给方法的“数据”属性的**输入**字符串中存在变音字符，则这些字符在发送到服务器之前会转换为其他一些奇怪的组合，尽管是 UTF-8 字符编码。例如，贝娄是提交给服务器的数据，输入字符串为**ääää**。我已经从 Chrome 的开发者工具中复制了它——>网络：

```
<request><space>2080878</space><input>Ã¤Ã¤Ã¤Ã¤</input></request> 
```

我该如何解决这个问题并防止变音符号被这样“扭曲”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:32:50.877

我认为这应该解决它：

1.  以 UTF-8 编码形式保存您的 JavaScript。如果您使用“记事本”，请从菜单中使用“文件->另存为”，然后在“保存”按钮的左下方选择“UTF-8”作为编码。原因：输入=“äää”；必须作为 UTF-8 编码字符保存到文件中。

2.  如果从输入元素（例如 textarea、输入行）接收输入，则告诉浏览器它是以多种方式编码的 UTF-8。一种可能性是添加如下 HTTP 标头（如果这是脚本的输出（例如 PHP 或 ASP））：

    内容类型：文本/html；字符集=utf-8

3.  如果不可能，请将 META-Tag 放入使用如下脚本的 html 文件的标题中：

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

4.  将 DOCTYPE 添加到包含/执行脚本的 html 文件。原因：某些浏览器确实使用一些旧的兼容机制来解释没有 DOCTYPE 的 html，该机制假定 ISO-8859-1 编码或类似的东西。我注意到在 JavaScript 中有更糟糕的效果......所以总是在你的 HTML 文档的开头添加一个像这样的 DOCTYPE（不需要是“严格的”）：

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" " [http://www.w3.org/TR/html4/strict.dtd](http://www.w3.org/TR/html4/strict.dtd) ">

希望有帮助;-)

# android - 如何在android中使用google api获取当前位置的纬度和经度？

> ID：10943576
> 
> 赞同：1
> 
> 时间：2012-06-08T05:38:49.110
> 
> 标签：android, google-api

如何从谷歌 api 获得 lat , long ，我有一些代码可以完美运行，但有时它给了我们，即使我在印度，英国的价值观。

```
String surl = "http://mobilemaps.clients.google.com/glm/mmap";
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(surl);
httppost.setEntity(new MyCellIDRequestEntity(shortcid, lac));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
DataInputStream dis = new DataInputStream(entity.getContent());

// Read some prior data
dis.readShort();
dis.readByte();
// Read the error-code
int errorCode = dis.readInt();
System.err.println("Error Code iss::" + errorCode);
int api = myPrefs2.getInt("api", 0);
if (errorCode == 0) 
{
    lat = (double) dis.readInt() / 1000000D;
    lng = (double) dis.readInt() / 1000000D;
    System.err.println("lattitude::" + Double.toString(lng) + "::long::" + Double.toString(lat));
} else {
    // System.err.println("Wrong Error Code");
}
} catch (Exception e) {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:50:56.973

只需通过[链接](https://stackoverflow.com/questions/9357555/reverse-geocoding-is-not-working/10515900#10515900)即可帮助您获取用户位置的完整地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:35:16.460

试试这个 -

从 Activity 调用函数：

```
String location_name = getmylocation(latitude+","+longitude) 
```

**getMyLocation()**方法将提供您的位置字符串 -

```
public String getmylocation(String value)
{           
      JSONObject json = JSONfunctions.getJSONfromURL("http://maps.googleapis.com/maps/api/geocode/json?latlng="+value+"&sensor=true");
      try{
        JSONArray  georesult = json.getJSONArray("results");
            JSONObject e = georesult.getJSONObject(0);

            String result = e.getString("address_components");
            JSONArray jArray1 = new JSONArray(result);
            JSONObject json_data=jArray1.getJSONObject(3);

            loc = json_data.getString("long_name");

      }catch(JSONException e)
      {
        e.printStackTrace();
      }    
    return loc;
} 
```

**JSONfunctions.java**

```
package com.sample.getcurrentlocation;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONfunctions {

    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{

            jArray = new JSONObject(result);            
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
    }
} 
```

您可以使用`String location_name`And 简单地查看位置，不要忘记添加所需的权限 -

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission> 
```

# c++ - 使用 Allegro 5 加载 .png 图像文件

> ID：10943577
> 
> 赞同：2
> 
> 时间：2012-06-08T05:38:50.183
> 
> 标签：c++, image, allegro, allegro5

我正在用 allegro 编写游戏，并想加载一些图像文件。但是，每当我调用 al_load_bitmap 时，都会得到一个空指针。我使用 XCode 4.1 作为我的 IDE。我会尝试使用 g++ 进行编译（以防它是路径问题）但是我不知道我需要做什么才能在命令行中使用 g++ 编译它（只是 g++ main.cpp 不起作用）。无论如何，这是我的代码：

```
ALLEGRO_PATH *path = al_get_standard_path(ALLEGRO_RESOURCES_PATH);

for (int i = 0; i < NUM_TILES; i++)
{
    switch (static_cast<Tile>(i)) {
        case GRASS:
            al_set_path_filename(path, "grass.png");
            tileFiles[i] = al_load_bitmap(al_path_cstr(path, '/'));
            if (!tileFiles[i])
            {
                std::cerr<<"grass.png not initialized"<<std::endl;
            }
            break;
        case DIRT:
            al_set_path_filename(path, "dirt.png");
            tileFiles[i] = al_load_bitmap(al_path_cstr(path, '/'));
            if (!tileFiles[i])
            {
                std::cerr<<"dirt.png not initialized"<<std::endl;
            }
            break;
        default:
            std::cerr 
                << "Missing case statement for datatype Tile numbered at " 
                << i
                << " in Board::Board (float mw, float mh, int tst)"
                << " declared in Board.cpp."
                << std::endl;
            break;
    }
} 
```

我已经跑了：

```
if(!al_init_image_addon()) {
    al_show_native_message_box(display, "Error", "Error", "Failed to initialize al_init_image_addon!", 
                               NULL, ALLEGRO_MESSAGEBOX_ERROR);
    return -1;
} 
```

我还提出：

```
#include "allegro5/allegro_image.h"
#include "allegro5/allegro_native_dialog.h" 
```

在我文件的顶部。既不加载grass.png，也不加载dirty.png，它们与我的main.cpp 文件位于完全相同的目录中。我没有编译错误，但是当我尝试加载我的图像时，我总是得到空指针，所以当需要将它们绘制到显示器时，它们不会显示。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:15:12.367

> Neither grass.png, nor dirt.png load and they are in the exact same directory as my main.cpp file

Just a debugging tip... If you were to output the result of `al_path_cstr(path, '/')` to the console, it should be extremely obvious why the call is failing.

`ALLEGRO_RESOURCES_PATH` is the location of "bundled resources," which on OS X means the directory of the *executable file*. (If you were to use an app bundle, then it would be the resource folder of the bundle.) As a quick check, just copy the images into the same directory that your executable file is being built.

Most IDEs have very odd directory structures, IMO. I would ultimately set it up so that you are building into something like:

```
/src/main.c
/include/main.h
/obj/release
/obj/debug
/bin/game.exe
/bin/game-debug.exe
/bin/image.png 
```

But that's just my preference. Use whatever you like, but you should read [the docs](http://www.allegro.cc/manual/5/al_get_standard_path) again to get a clear picture of the different locations that `al_get_standard_path()` reveals.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T03:32:07.777

Okay, I had been having the same problem, and I was absolutely positive that I was looking in the correct directory and that the resources for the program were there. I used al_path_cstr(path, '/') and allegro's working directory was as expected. Then I looked at the resource file sizes....

**All my resources in my build directory were zero bytes**. **Copied them over** myself and it **solved the issue**. I hope this helps some one out!

# html - 调整 textArea 的高度和宽度以适合表格

> ID：10943579
> 
> 赞同：32
> 
> 时间：2012-06-08T05:39:02.797
> 
> 标签：html

我在表格中显示 html 内容。用于打印我`textArea`在`<td>`表格中使用的标签。所以我想调整 的高度和宽度`textArea`，使其等于`<td>`. 我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-08T05:56:00.700

[dabblet.demo](http://dabblet.com/gist/2893830)
![在此处输入图像描述](../Images/f86deb575178330fd9782e1a64c73179.png)

### 问题是 textarea 的行为不是正常的盒子模型，这就是为什么我们需要这个盒子大小的技巧

这`CSS`将帮助您：

```
textarea {
    border: none;
    width: 100%;
    -webkit-box-sizing: border-box; /* <=iOS4, <= Android  2.3 */
       -moz-box-sizing: border-box; /* FF1+ */
            box-sizing: border-box; /* Chrome, IE8, Opera, Safari 5.1*/
} 
```

## 如果您无权访问`css`文件，则可以使用内联 css

像这样：

```
<textarea style="border: none; width: 100%; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;"> </textarea> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T05:44:22.637

尝试使用这个 CSS：

```
td textarea {
    width: 100%;
    height: 100%
} 
```

或内联：

```
<td>
    <textarea style="width: 100%; height: 100%; border: none">
    </textarea>
</td> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-08T05:47:01.983

给 textarea 一个 100% 的宽度和高度样式

```
td textarea {
 width:100%;
 height: 100%;
} 
```

但也要考虑到填充和边框或文本区域，这样它就不会从 td 溢出。

希望这可以帮助。

# html - Browser Dom - 它可以容纳多少数据

> ID：10943580
> 
> 赞同：2
> 
> 时间：2012-06-08T05:39:02.947
> 
> 标签：html, dom

构建一个基于 AJAX 的站点并尽可能保持速度，我计划在用户离开页面后使用 jquery hide() 页面。

如果他们再次选择它们，这允许我立即再次显示（）它们。

该网站是一个约会网站，因此绝大多数将被隐藏的页面是成员个人资料和其他标准页面，如邮件、主页、搜索等。

问题 - 标准页面与此 stackoverflow 页面大致相同（关于 HTML/内容等）。如果我在 DOM 中隐藏 100 个这样的页面，会不会给浏览器带来问题？如果是 1000 页或 5000 页呢？我很想知道如果运行一个缓慢增长的大型 DOM 的网站，浏览器是否会遇到困难或崩溃。

注意：如果这是一个问题，我可以在 DOM 中有超过 100 个页面时为页面添加时间戳并删除多余的页面等。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:21:09.827

这是一个不可能回答的问题，因为

*   取决于浏览器在其上运行的硬件，作为您无法控制的网站
*   取决于浏览器技术——网站无法控制的其他东西
*   取决于可用的虚拟内存 - 网站也无法控制。

因此，总而言之，网站无法控制客户端设置，因此您必须对它可以在内存中保存的数据结构的大小（无论是真实的还是虚拟的）做出合理的假设。

# php - 如何诊断本地网络上间歇性缓慢的 PHP 到 MySQL 的连接速度？

> ID：10943583
> 
> 赞同：0
> 
> 时间：2012-06-08T05:39:17.773
> 
> 标签：php, mysql, macos

自从升级到 OS X Lion 后，我注意到在建立从 PHP 5.3 到本地网络上的 MySQL 数据库的连接时会出现间歇性的 6-10 秒延迟。其他开发人员都没有遇到这个问题，在更新之前我也没有。

我已经分析了这个问题，发现整个滞后发生在`PDO::__construct()`. 我不知道我还能如何尝试调试这个问题 - 我什至从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T05:44:28.660

我有 15 年的 MySQL 经验，到目前为止，连接时出现的任何类型的延迟都是 100% 与 DNS 相关的问题。客户端和服务器都尝试解析名称，可能正向和反向。如果 DNS 设置有问题，问题就会消失并且永远不会得到响应。因此延迟直到发生超时并采取下一个最佳选择。我建议将双方 IP 地址写入 /etc/hosts 并带有名称，以确保选择退出 DNS 问题。

# php - mysql 获取数组，错误--“where 子句中的未知列 'image_name' where image_name=image name

> ID：10943585
> 
> 赞同：0
> 
> 时间：2012-06-08T05:39:32.260
> 
> 标签：php, mysql

我正在尝试为图像站点创建一个喜欢/不喜欢的脚本。这两个脚本（一个用于喜欢，一个用于显示图像）都单独工作，但是在组合脚本时，我收到此错误 ""Unknown column 'image_name' in 'where clause'" 。我相信错误是在 $get 变量中。这是我的脚本——

```
$query_random_image=mysql_query("SELECT * FROM image_info ORDER BY RAND() LIMIT 0,1")            or die (mysql_error());

        $array_random_image=mysql_fetch_array($query_random_image) or die   (mysql_error());

         $get=mysql_query("SELECT * FROM image_info WHERE url={$array_random_image['url']}") or die(mysql_error());

        echo "<img src=images/".$array_random_image['url'].">";

        $get_id=mysql_fetch_array($get) or die (mysql_error());

        $get_id_echo=$get_id['id'];

        $rate=$_POST["subject"];

        $get_ratings=mysql_query("SELECT * FROM rate WHERE $get_id=image_id") or die(mysql_error());

        $get_ratings_array=mysql_fetch_array($get_ratings) or die (mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:45:19.810

您在 where 子句中切换它们的位置：`$get_id=image_id`

```
$get_ratings=mysql_query("SELECT * FROM rate WHERE image_id = $get_id") 
```

# c# - C# 作业调度程序

> ID：10943587
> 
> 赞同：-2
> 
> 时间：2012-06-08T05:39:42.980
> 
> 标签：c#, scheduled-tasks

我想在我的项目中实现调度程序。我的目标是实现 ETL 流程。这意味着在一天结束时，我想从我的数据库中读取今天的数据，然后创建一个 XML 文件并将其上传到某个远程系统。对于实施，我完成了除调度之外的所有过程。

如果有人知道，请帮我做以下事情。

1.  添加一个新的类来处理调度
2.  c#中如何使用定时器创建调度器（如何添加和使用）
3.  如何在指定时间 11.45 PM(23.45) 调用该计时器

请提供一些示例代码

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:44:05.353

你可能想看看`Quartz.net`- [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T11:53:20.533

我在控制台应用程序中尝试了一些简单的作业调度。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using Quartz;
    using Quartz.Impl;
    using Quartz.Job;
    using System.Windows;
    namespace WindowsTrainingTasks
    {
        public partial class Schedulerexample : Window
        {
            public Schedulerexample()
            {
                InitializeComponent();
                ISchedulerFactory schedFact = new StdSchedulerFactory();
                IScheduler quartzScheduler = schedFact.GetScheduler();
                IJobDetail job = JobBuilder.Create<HelloJob>()
                   .WithIdentity("HelloJob", "group1")
                   .Build();
                ITrigger trigger = TriggerBuilder.Create()
                .WithIdentity("DAMMetadataSyncTrigger")
                .StartNow()
                .WithSimpleSchedule(x => x
                .WithIntervalInSeconds(5)
                .RepeatForever())
                .Build();
                quartzScheduler.ScheduleJob(job, trigger);
                quartzScheduler.Start();
            }
        }
        public class HelloJob : IJob
        {
            public void Execute(IJobExecutionContext context)
            {
               MessageBox.Show("Xenovex Technologies", "Xenovex5");
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:46:32.773

由于您希望每天运行它并且因为您没有争论该程序需要一直运行（例如通过 WCF 服务与应用程序通信），我建议您让您的应用程序从 Windows 调度程序启动。

# python - 多个jinja2扩展？

> ID：10943589
> 
> 赞同：1
> 
> 时间：2012-06-08T05:40:09.363
> 
> 标签：python, jinja2, webapp2

我想添加多个 jinja2 扩展，但我不知道语法。这是我当前的配置：

```
config = {  'webapp2_extras.sessions': {
    'cookie_name': '_simpleauth_sess',
    'secret_key': SESSION_KEY
  },
  'webapp2_extras.auth': {
    'user_attributes': []
  },'webapp2_extras.jinja2': {'template_path': 'templates',
          'filters': {'timesince': filters.timesince,
          'datetimeformat': filters.datetimeformat,
    'slugify_montao' : filters.slugify_montao,
'format_datetime_human' : filters.format_datetime_human,
'default_if_none' : filters.default_if_none,
'datetimeformat_viewad': filters.datetimeformat_viewad,
'datetimeformat_jinja': filters.datetimeformat_jinja,
},
          'environment_args': {'extensions': ['jinja2.ext.i18n']}},
          'webapp2_extras.sessions': {'secret_key': 'my-245-key'}} 
```

我想添加内涵`env = Environment(extensions=['jinja2htmlcompress.SelectiveHTMLCompress'])`，但我不知道如何拥有多个。能给我看看么？

谢谢

[http://jinja.pocoo.org/docs/extensions/](http://jinja.pocoo.org/docs/extensions/)

## 更新

看到下面的答案，我将我的配置对象编辑为：

> config = { 'webapp2_extras.sessions': { 'cookie_name': '_simpleauth_sess', 'secret_key': SESSION_KEY }, 'webapp2_extras.auth': { 'user_attributes': [] },'webapp2_extras.jinja2': {'template_path' ：'模板'，'过滤器'：{'timesince'：filters.timesince，'datetimeformat'：filters.datetimeformat，'slugify_montao'：filters.slugify_montao，'format_datetime_human'：filters.format_datetime_human，'default_if_none'：filters.default_if_none， 'datetimeformat_viewad'：filters.datetimeformat_viewad，'datetimeformat_jinja'：filters.datetimeformat_jinja，}，'environment_args'：{'extensions'：['jinja2.ext.i18n'，'jinja2htmlcompress.SelectiveHTMLCompress']}}, }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:54:12.783

可以将多个扩展指定为原始列表的附加元素。

```
...
'environment_args': {'extensions': ['jinja2.ext.i18n', 
                                    'jinja2htmlcompress.SelectiveHTMLCompress']}
... 
```

不过，我不得不说，您的`config`字典似乎格式不规则。
特别是一个问题是您似乎有两个`'webapp2_extras.sessions'`不起作用的键。

# facebook - 如何获取不喜欢 facebook 页面的用户好友列表？

> ID：10943594
> 
> 赞同：0
> 
> 时间：2012-06-08T05:40:37.843
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在编写一个应用程序来向不喜欢页面的登录用户的朋友发送应用程序请求。

我在代码中所做的是获取用户朋友列表，然后使用 FQL 获取喜欢该页面的人员列表。

FQL 中有没有一种方法可以让我获得不喜欢该页面的人的列表？NOT IN 运算符在 facebook 查询中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:21:07.087

不幸的是，没有办法在单个查询中获取它们。

你在做什么是正确的。

# iphone - 将 NSDate 和 NSNumber 和/或保存在相同的核心数据属性中

> ID：10943602
> 
> 赞同：1
> 
> 时间：2012-06-08T05:41:41.607
> 
> 标签：iphone, cocoa-touch, core-data, nsdate, nsnumber

在 IB 中创建核心数据模型时必须指定它将是什么类型的属性，有字符串、日期、整数、小数等选项。

我的问题是，我如何在同一属性中存储一个 NSDate，并在其他时间添加一个新实体，但这次使用该属性的 NSNumber。

换句话说，我只想要`id Object`coredata中的等号，在获取之后，我会检查是否`[[Object isKindOfClass[NSDate class]]`或NSNumber。

我听说过可变形的，但我没有创建要存储的自定义对象。任何关于这方面的信息都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:12:53.777

这是一个非常糟糕的主意。实际上，日期在 SQLite 中表示为数字，但 Core Data 可能使用不同类型的存储，所以你只是对事情如何工作做出了太多假设。

`number`为您的实体 a和 a指定附加属性会更加简洁和容易`date`。然后，您可以轻松检查它们中的任何一个是否存在`nil`或包含值。即使引入第三个属性来告诉您对象是否具有日期或数字，也比您的设置更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:53:01.840

我在当前项目中遇到过这种情况。如果您的值包含 int、float、boolean，您可以使用 NSNumber 作为属性，如果它包含 NSDate，则属性应该作为实体中的字符串。

希望这有帮助。

# java - Android：当应用程序重新启动时，下载的文件被删除

> ID：10943604
> 
> 赞同：1
> 
> 时间：2012-06-08T05:42:48.257
> 
> 标签：java, android, audio, download, filenotfoundexception

我使用从服务器下载音频文件

```
 try {

               // URL url = new URL("http://commonsware.com/misc/test2.3gp");
                URL url = new URL("http://192.168.0.2/supplications/"+fileName);
                //URL url = new   URL("http://www.msoftech.com/supplications/android/"+fileName);
                HttpURLConnection c = (HttpURLConnection) url.openConnection();
                c.setRequestMethod("GET");
                c.setDoOutput(true);
                c.connect();

                Log.v("log_tag", "PATH: " + PATH);
                File file = new File(PATH);
                file.mkdirs();
                File outputFile = new File(file, fileName);
                FileOutputStream fos = new FileOutputStream(outputFile);

                InputStream is = c.getInputStream();

                byte[] buffer = new byte[1024];
                int len1 = 0;
                while ((len1 = is.read(buffer)) != -1)
                {
                    fos.write(buffer, 0, len1);
                }
                fos.close();
                is.close();
            } catch (IOException e) {
                Log.d("log_tag", "Error: " + e);
            }
            Log.v("log_tag", "Check: " +cd2); 
```

这里 PATH = "/data/data/packagename/sounds/filename

它工作正常，音频文件下载并成功播放，但我的问题是当我单击主页按钮然后重新启动应用程序时意味着找不到下载音频的文件夹，即退出应用程序时意味着所有下载的音频都被删除自动地。它抛出未找到的异常文件。

为了播放下载的文件，我使用了如下代码，

```
public void audioPlayer(String path, String fileName) throw FileNotFoundException
{
    //set up MediaPlayer 

FileInputStream fileInputStream = new FileInputStream(PATH+"/"+fileName);
            //String command = "chmod 666 " + recordFile.toString(); 
            try {
                mp.setDataSource(fileInputStream.getFD());
               // mp.setDataSource(path+"/"+filename.mp3);
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                mp.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            mp.start(); 
```

它有什么问题我必须做什么才能永久保存音频文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:29:45.770

您的代码中没有任何问题，这是文件权限问题。当您将文件下载到应用程序包下的内部文件系统中时，会为其分配安全性，例如“-rw------”，这意味着您的文件只能由同一个应用程序访问。由于 android 是基于 Linux 的，因此每个文件都有一些许可。

您的文件会在那里，但其他应用程序（如媒体播放器等）无法访问，因此这些应用程序会引发错误，例如找不到文件。（您可以通过 DDMS 工具检查）。

只需将文件路径更改为外部驱动器。

如果有帮助，请采纳答案。

# ajax - 使用ajax提交后显示Django评论

> ID：10943608
> 
> 赞同：0
> 
> 时间：2012-06-08T05:43:15.197
> 
> 标签：ajax, django, comments

[我在这里](http://ca.rroll.net/2009/05/10/improving-django-comments-user-experience-with-ajax/)使用 Nick Carroll 的方法在我的应用程序中实现了 Django ajax 评论提交。我希望在服务器收到并保存之后，使用 ajax 发布评论、提交日期和评论的用户出现在页面上。有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:56:59.950

使用 jquery 的 post 方法将评论发布到服务器，并在成功响应时，通过成功回调函数在页面上显示评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:43:15.927

好吧，这是一种黑客的方式来解决这个问题，但我想我已经找到了一个不错的解决方案：

```
<script type="text/javascript" charset="utf-8">
    function bindPostCommentHandler() {
        $('#comment_form form input.submit-preview').remove();
        $('#comment_form form').submit(function() {
            var comment_text = $('#id_comment').val();
            $.ajax({
                type: "POST",
                data: $('#comment_form form').serialize(),
                url: "{% comment_form_target %}",
                cache: false,
                dataType: "html",
                success: function(html, textStatus) {
                    $('#comment_form form').fadeTo(500, 0, function(){
                        $(this).remove();
                    });

                    var today = new Date();
                    var dd = today.getDate();
                    var mm = today.getMonth()+1;
                    var yyyy = today.getFullYear();
                    if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} var today = mm+'/'+dd+'/'+yyyy;
                    var comment = "<div class='comment'><h4>User " + "\"{{ user.username }}\"" + " Rating <small>" + today + "</small></h4>" + comment_text + "</div><hr />";
                    $(comment).hide().prependTo("#comments_loc").fadeIn(1000);  
                    bindPostCommentHandler();
                },
                 error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $('#comment_form form').replaceWith('Your comment was unable to be posted at this time.  We apologize for the inconvenience.');
                 }
           });
        return false;
    });
}

$(document).ready(function() {
    bindPostCommentHandler();
});
</script> 
```

我对 javascript 比较陌生，所以我把它和我所知道的一点点放在一起。如果您认为这可以清理，请随时留下一些评论。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T06:06:38.130

```
<script type="text/javascript" charset="utf-8">
    function bindPostCommentHandler() {
        $('#comment_form form input.submit-preview').remove();
        $('#comment_form form').submit(function() {
            $.ajax({
                type: "POST",
                data: $('#comment_form form').serialize(),
                url: "{% comment_form_target %}",
                cache: false,
                dataType: "html",
                success: function(html, textStatus) {
                    $('#comment_form form').replaceWith(html);
                     $('.comt_message').show();
                    bindPostCommentHandler();
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $('#comment_form form').replaceWith('Your comment was unable to be posted at this time.  We apologise for the inconvenience.');
                }
            });
            return false;
        });
    }

    $(document).ready(function() {
        bindPostCommentHandler();
    });
    </script> 
```

# ruby-on-rails-3 - 为什么我的 Mac 终端上出现警告？

> ID：10943617
> 
> 赞同：0
> 
> 时间：2012-06-08T05:43:57.817
> 
> 标签：ruby-on-rails-3, macos

你好，因为我在我的 MacOS 上安装了 Rails，当我在终端上运行命令时，我不断收到警告。这是什么东西？

```
→ rake db:migrate

/Users/mycomputername/.rvm/gems/ruby-1.9.2-p136@global/gems/bundler-1.0.22/lib/bundler.rb:209: warning: Insecure world writable dir /usr/local in PATH, mode 040777

/Users/mycomputername/.rvm/gems/ruby-1.9.2-p136@global/gems/bundler-1.0.22/lib/bundler.rb:209: warning: Insecure world writable dir /usr/local in PATH, mode 040777 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:11:02.720

```
sudo chmod -R o-w /usr/local 
```

这将删除 /usr/local 的所有子目录的“其他”写权限。

# javascript - jQuery插件冲突

> ID：10943631
> 
> 赞同：1
> 
> 时间：2012-06-08T05:45:24.457
> 
> 标签：javascript, jquery, jquery-plugins

我的主页上有一个滑块和新闻代码。

我在 head 标签中使用了以下编码。

```
[1]<script type="text/javascript" src="..js/jquery.core.js"></script>
[2]<script type="text/javascript" src="..js/jquery.superfish.js"></script>
[3]<script type="text/javascript" src="..js/jquery.jcarousel.pack.js"></script>
[4]<script type="text/javascript" src="..js/jquery.easing.js"></script>
[5]<script type="text/javascript" src="..js/jquery.scripts.js"></script>
[6]<script type="text/javascript" src="..js/common.js"></script> 
```

当我使用这种格式时，我的滑块工作正常，但新闻自动收报机卡住了。滑块使用第 2、第 3、第 4 和第 5 个脚本。第 6 个脚本用于新闻自动收报机。如果我在第一个新闻代码之后使用第 6 个脚本，则可以正常工作。但随后滑块不起作用。

我应该如何使用它们来让两者都工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:51:58.423

如果插件确实不兼容，并且您不想编辑它们以修复冲突，则将其中一个放在 iframe 中以隔离它可能是一种解决方案......特别是如果它们是不兼容的隔离组件与页面的其余部分进行通信...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:06:10.273

尝试这个

```
<script type="text/javascript">
if (typeof jQuery !== 'undefined') {
    jQuery.noConflict();
}
</script> 
```

在第 5 和第 6 个脚本之间使用上面的代码，而**`jQuery`**不是**`$`**在第 6 个 js 中使用，这可能会有所帮助

# sharepoint - 当文档处于一个阶段时如何禁用下拉列表中的值

> ID：10943632
> 
> 赞同：0
> 
> 时间：2012-06-08T05:45:37.613
> 
> 标签：sharepoint, sharepoint-2010

我有一个下拉框，其中包含值 Development、Review 和 Baseline。

当文档处于开发阶段时，当用户单击下拉菜单时，基线值应该被禁用。这怎么可能实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:21:21.940

您应该能够通过遍历文档库列表来检索[SPListItem实例。](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.aspx)然后，利用[Level](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.level.aspx)和[ModerationInformation](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitem.moderationinformation.aspx)属性来确定文档草稿/已发布和批准状态。

# java - 如何在 URL 中传递多个参数？

> ID：10943635
> 
> 赞同：47
> 
> 时间：2012-06-08T05:45:56.657
> 
> 标签：java, android, url, servlets

我试图弄清楚如何在 URL 中传递多个参数。我想将我的 android 类中的纬度和经度传递给 java servlet。我怎样才能做到这一点？

```
URL url;
double lat=touchedPoint.getLatitudeE6() / 1E6;
double lon=touchedPoint.getLongitudeE6() / 1E6;
url = new URL("http://10.0.2.2:8080/HelloServlet/PDRS?param1="+lat+lon); 
```

在这种情况下，输出（写入文件）是`28.53438677.472097`. 这是可行的，但我想在两个单独的参数中传递纬度和经度，以便减少我在服务器端的工作。如果不可能，我如何至少在`lat`&之间添加一个空格，`lon`以便我可以使用`tokenizer`类来获取我的纬度和经度。我尝试了以下行但无济于事。

```
 url = new URL("http://10.0.2.2:8080/HelloServlet/PDRS?param1="+lat+" "+lon);
output- Nothing is written to file
        url = new URL("http://10.0.2.2:8080/HelloServlet/PDRS?param1="+lat+"&?param2="+lon);
output- 28.534386 (Only Latitude)
        url = new URL("http://10.0.2.2:8080/HelloServlet/PDRS?param1="+lat+"?param2="+lon);
output- 28.532577?param2=77.502996 
```

我的servlet代码如下：

```
req.setCharacterEncoding("UTF-8");
resp.setCharacterEncoding("UTF-8");
final String par1 =  req.getParameter("param1");
final String par2 = req.getParameter("param2");
FileWriter fstream = new FileWriter("C:\\Users\\Hitchhiker\\Desktop\\out2.txt");
BufferedWriter out = new BufferedWriter(fstream);
out.write(par1);
out.append(par2);
out.close(); 
```

我还想知道这是将数据从 android 设备传递到服务器的最安全可靠的方式。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-08T05:53:10.047

这

```
url = new URL("http://10.0.2.2:8080/HelloServlet/PDRS?param1="+lat+"&param2="+lon); 
```

必须工作。无论出于什么奇怪的原因¹，您都需要`?`在第一个参数`&`之前和以下参数之前。

使用复合参数，如

```
url = new URL("http://10.0.2.2:8080/HelloServlet/PDRS?param1="+lat+"_"+lon); 
```

也可以，但肯定不好。您不能在那里使用空格，因为它在 URL 中是被禁止的，但您可以将其编码为`%20`or `+`（但这是更糟糕的风格）。

* * *

^(1 声明`?`将路径和参数`&`分开以及将参数彼此分开并不能解释任何原因。一些 RFC 说“使用？那里和那里”，但我不明白为什么他们没有选择相同的字符。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T05:49:12.590

我对 Java 不太了解，但 URL 查询参数应该用“&”分隔，而不是“？”

[https://www.rfc-editor.org/rfc/rfc3986](https://www.rfc-editor.org/rfc/rfc3986)是使用“sub-delim”作为关键字进行参考的好地方。[http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)是另一个很好的来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-03T00:32:11.133

您可以将多个参数传递为“ `?param1=value1&param2=value2`”

但这并不安全。它很容易受到***`Cross Site Scripting (XSS) Attack`***.

您的参数可以简单地替换为脚本。

看看这篇[文章](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)和[文章](http://www.golemtechnologies.com/articles/prevent-xss)

[您可以使用StringEscapeUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html)的 API 使其安全

```
static String   escapeHtml(String str) 
          Escapes the characters in a String using HTML entities. 
```

即使`https`在没有上述预防措施的情况下使用 url 进行安全保护也不是一个好习惯。

看看相关的 SE 问题：

[URLEncoder.encode(string, "UTF-8") 是一个糟糕的验证吗？](https://stackoverflow.com/questions/9291912/is-urlencoder-encodestring-utf-8-a-poor-validation)

# bluetooth - 有没有办法使用 AppleScript 解锁受密码保护的计算机？

> ID：10943637
> 
> 赞同：0
> 
> 时间：2012-06-08T05:46:10.990
> 
> 标签：bluetooth, locking, applescript, unlock

我正在尝试配置一个自动的、蓝牙供电的计算机锁定和解锁系统。到目前为止，我已经完成了锁定脚本，但我想不出一个可以解锁屏幕的脚本，因为我的电脑受密码保护。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:41:50.613

当您尝试编写脚本时，通常有两种选择。首先，如果应用程序是可编写脚本的，那么您可以直接向应用程序发出 applescript 命令。如果它不是可编写脚本的，那么您唯一的其他选择是使用 GUI 脚本编写，您可以在其中模拟按下按钮和键入击键，就像您坐在计算机前自己做的一样。您可以使用系统事件命令来执行此操作。

在您的情况下，我认为您需要第二种选择。通常，当您编写 gui 脚本时，应用程序必须位于最前面。由于那时“解锁屏幕”可能是最前面的，因此您有机会这样做。但是我还没有尝试过，所以你需要做一些测试，看看它是否可能。只需搜索 gui 脚本示例并尝试一下。

我想您的脚本将如下所示。这假设光标自动放置在窗口的密码部分，以便“击键”命令实际上会在正确的位置输入......否则您需要想办法在输入任何内容之前将光标放在那里。

```
tell application "System Events"
    keystroke "unlock password"
    delay .5
    click button "OK" of window 1
end tell 
```

# jquery - 使用 SyntaxHighlighter 突出显示 jQuery 语法？

> ID：10943638
> 
> 赞同：-1
> 
> 时间：2012-06-08T05:46:21.017
> 
> 标签：jquery, syntax-highlighting

是否有任何库可用于 SyntaxHighlighter (http://alexgorbatchev.com/SyntaxHighlighter/) 以突出显示 jQuery 代码？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:50:37.270

jQuery 是 JavaScript，所以

```
<pre class="brush:javascript">...</pre> 
```

应该与Alex Gorbatchev的[SyntaxHighlighter一起使用。](http://alexgorbatchev.com/SyntaxHighlighter/)

# iphone - 如何检测视图控制器何时被解除？

> ID：10943650
> 
> 赞同：2
> 
> 时间：2012-06-08T05:47:17.783
> 
> 标签：iphone, objective-c, ios, xcode, segue

如何在我的 mapview（主）控制器中检测到详细视图控制器已被解除？我有一个带有图钉和注释的地图视图。当在任何注释上点击 rightCalloutAccessoryView 时，将通过 performSegueWithIdentifier 调用模态详细视图控制器。顺便说一句，我不知道这是否正确，但主视图控制器和详细视图控制器由导航控制器附加。

我的目标是根据用户对详细视图控制器的操作对地图视图（主视图）采取有条件的操作。具体来说，如果他们已经点击了“移除图钉”功能，我想在控制返回到地图视图时移除图钉。如果他们只是点击完成按钮，那么我希望图钉和注释保留在屏幕上。

以我有限的知识，我可以使用下面的第二行删除图钉，但问题是我可以看到图钉和注释在点击 rightCalloutAccessorView 图标之后和显示详细视图之前立即被删除。所以这意味着如果用户随后点击详细信息屏幕上的“完成”按钮，他们将返回到地图视图，其中已删除了图钉和注释。如果用户点击“删除”按钮，我只希望将其删除。

```
 [self performSegueWithIdentifier:@"PinDetail" sender:self];
   [self.mapView removeAnnotation:MA]; 
```

所以我的问题真的是：

1.  我在哪里输入 removeAnnotation 代码？在当前位置，销钉的移除甚至在详细视图出现之前就已发生。
2.  如何检测是否已点击详细视图上的删除按钮？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:50:48.397

您可以使用委托根据详细视图中的操作对 mapview 执行操作。在 performSegueWithIndentifier 中，您可以将详细视图分配为 mapview 的委托，它将为您执行操作。

或者您可以为详细视图设置目标和选择器，当在详细视图中发生任何操作时，您可以调用目标为地图视图的选择器，如下所示： 1.在 performSegue 方法中设置目标如下：

```
 [theController setTarget:self andSelector:@selector(performAction)]; 
```

其中 theController 是您的目标视图控制器，即详细视图控制器。

2.详细查看控制器.h文件

```
 id m_Target;
  SEL m_Selector; 
```

详细查看 controller.m 文件：

```
- (void)setTarget:(id)inTarget andSelector:(SEL)inSelector
{
    m_Target = inTarget;
    m_Selector = inSelector;
} 
```

3.在关闭详细视图调用之前

```
 if ([m_Target respondsToSelector:m_Selector]) {
            [m_Target performSelector:m_Selector withObject:nil];
        } 
```

4.在地图视图控制器.m文件中定义performAction

# c# - 将数组作为参数传递给另一个

> ID：10943651
> 
> 赞同：1
> 
> 时间：2012-06-08T05:47:26.183
> 
> 标签：c#, c#-4.0

我有一个代码片段。& 我想传递 msg_arr 作为参数，数组名称是 msg_arr

这是我的尝试 1，但出现错误

```
 private void check(string keyword params arr[] msg_arr )
    {
        switch (keyword.ToUpper())
        {
            case  "SETTELG":
                Response.Redirect("../SMSFunction/SeenSMS.ascx?value=1&arr" + msg_arr);

                break; 
```

这是我的尝试2，也是错误

```
 private void check(string keyword string msg_arr[] )
    {
        switch (keyword.ToUpper())
        {
            case  "SETTELG":
                Response.Redirect("../SMSFunction/SeenSMS.ascx?value=1&arr" + msg_arr);

                break; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T05:48:44.287

好吧，您在参数之间缺少逗号：

```
private void check(string keyword, params arr[] msg_arr) 
```

如果不是这种情况，请发布整个代码和实际的错误消息。一个好主意是阅读[params 上的文档](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:02:55.200

嗨学习者，

请使用此签名

```
 private void check(params object[] msg_arr)
{

} 
```

它对我有用希望它也对你有帮助

# python - Python中的成对测试组合生成器

> ID：10943655
> 
> 赞同：5
> 
> 时间：2012-06-08T05:48:09.293
> 
> 标签：python, testing, combinations

我正在尝试成对测试并想要基于 Python 的成对测试工具。我已经尝试过 AllPairs（http://pypi.python.org/pypi/AllPairs/2.0.1）。当我在一列中给出 10 个条目时，它有错误。目前使用微软 PICT 生成成对组合。

Python中是否有任何工具可以为大型数组生成成对组合？

AllPairs 中的错误如果我给这个

```
parameters = [ [ "Brand X", "Brand Y","Brand A","Brand B","Brand C","Brand D" ]
             , [ "98", "NT", "2000", "XP"]
             , [ "Internal", "Modem","A","B","C","D","E","F","G","H","I","J","K","L","M" ]
             , [ "Salaried", "Hourly", "Part-Time", "Contr.","AA","BB","CC","DD","EE","FF","GG","HH","II" ]
             , [ 6, 10, 15, 30, 60, 70, 80, 90, 100, 110, 120, 130, 140 ]
             ] 
```

输出是

```
Brand X count is 16
Brand Y count is 122
Brand A count is 16
Brand B count is 16
Brand C count is 16
Brand D count is 15 
```

为了这

```
parameters = [ [ "Brand X", "Brand Y","Brand A","Brand B","Brand C","Brand D" ]
             , [ "98", "NT", "2000", "XP"]
             , [ "Internal", "Modem" ]
             , [ "Salaried", "Hourly", "Part-Time", "Contr." ]
             , [ 6, 10, 15, 30, 60 ]
             ] 
```

输出是

```
Brand X count is 5
Brand Y count is 5
Brand A count is 5
Brand B count is 5
Brand C count is 5
Brand D count is 6 
```

我认为，对于更大的阵列工作是不正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T05:11:52.483

这样的事情怎么样？

```
from itertools import chain, combinations, product

def pairwiseGen(*sequences):
    unseen = set(chain.from_iterable(product(*i) for i in combinations(sequences, 2)))
    for path in product(*sequences):
        common_pairs = set(combinations(path, 2)) & unseen
        if common_pairs:
            yield path
            unseen.difference_update(common_pairs) 
```

用法（使用`parameters`您在问题中定义的列表）：

```
>>> pairs = list(pairwiseGen(*parameters))
>>> len(pairs)
846 
```

我认为仍有一些优化空间（上面的生成器产生的结果比预期的要多一些），但我认为你会同意它比使用笛卡尔积要短得多*：*

```
>>> all_possible = list(product(*parameters))
>>> len(all_possible)
60480 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-20T08:28:55.030

使用[allpairspy](https://pypi.python.org/pypi/allpairspy)怎么样？它是[AllPairs](https://pypi.python.org/pypi/AllPairs/2.0.1)的一个分支，具有更多功能（可能是错误修复）和文档。调整为您的参数的[基本用法示例代码返回 200 个 5 元组：](https://github.com/thombashi/allpairspy#basic-usage)

```
from allpairspy import AllPairs

parameters = [
    [ "Brand X", "Brand Y","Brand A","Brand B","Brand C","Brand D" ],
    [ "98", "NT", "2000", "XP"],
    [ "Internal", "Modem","A","B","C","D","E","F","G","H","I","J","K","L","M" ],
    [ "Salaried", "Hourly", "Part-Time", "Contr.","AA","BB","CC","DD","EE","FF","GG","HH","II" ],
    [ 6, 10, 15, 30, 60, 70, 80, 90, 100, 110, 120, 130, 140 ]
]

print("PAIRWISE:")
for i, pairs in enumerate(AllPairs(parameters)):
    print("{:2d}: {}".format(i, pairs)) 
```

如果您想测试 Python 代码或使用基于 pytest 的测试框架，您可以[通过其测试参数化功能将 allpairspy 与 pytest 集成](https://github.com/thombashi/allpairspy#parameterized-testing-with-pairwise-by-using-pytest)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-06T22:02:00.130

**TL;DR** AllPairs 返回一个有效的成对测试集，即使品牌和 Windows 版本的分布不均匀。

**例子**

这是您的示例：

```
Brand : Brand X, Brand Y, Brand A, Brand B, Brand C, Brand D
Version : 98, NT, 2000, XP
Network : Internal, Modem, A, B, C, D, E, F, G, H, I, J, K, L, M
Wage : Salaried, Hourly, Part-Time, Contr., AA, BB, CC, DD, EE, FF, GG, HH, II
Time : 6, 10, 15, 30, 60, 70, 80, 90, 100, 110, 120, 130, 140 
```

**有效性：**

如果您检查，您会发现 PICT 和 AllPairs 都包含所有 993 个 2 元组。这意味着 PICT 和 AllPairs 都返回有效集合。

上述示例中 2 元组的总数为：

```
6*4 + 6*15 + 6*13 + 6*13 + 4*15 + 4*13 + 4*13 + 15*13 + 15*13 + 13*13 = 993 
```

**表现：**

测试用例的典型数量为 O(nm)，其中 n 和 m 是两个最大参数。在这种情况下：15*13 = 195 是测试集的绝对最小数量。

AllPairs 返回 200 个 5 元组

PICT 返回 206 个 5 元组

因此 PICT 和 AllPairs 都返回接近测试集的最小数量。

**分布**：

Raj 指出的是 AllPairs 返回一个分布不均的测试集。

品牌：

```
Brand A : 16
Brand B : 16
Brand C : 16
Brand D : 15
Brand X : 16
Brand Y : 122 
```

版本：

```
98 : 155
2000 : 15
NT : 16
XP : 15 
```

PICT 返回更均匀分布的测试集

品牌：

```
Brand A : 26
Brand B : 32
Brand C : 40
Brand D : 35
Brand X : 40
Brand Y : 33 
```

版本：

```
98 : 48
2000 : 55
NT : 52
XP : 51 
```

**解释**

Brand 和 Version 的不均匀分布仍然有效的原因是这两个字段的基数最低（6 和 4）。因此，AllPairs 似乎正在填充获得所有 Network 和 Wage 对所需的 5 元`Brand Y`组`Windows 98`

以下是每个字段的基数：

```
Brand : 6
Version : 4
Network : 15
Wage : 13
Time : 13 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-17T10:38:05.140

我刚刚围绕 MS pict 实现创建了一个包装器，这可能对您有用。显然具有依赖性，但可以节省重新创建轮子。

```
import os
import tempfile
import subprocess

def all_pairs(*sequence):
    """
    Calculate the all pairs testing sequence from the Microsoft PICT all pairs application
    that is compiled from: https://github.com/Microsoft/pict

    >>> Type = ['Single', 'Span', 'Stripe', 'Mirror', 'RAID-5']
    >>> Size = [10, 100, 500, 1000, 5000, 10000, 40000]
    >>> Format_method = ['Quick', 'Slow']
    >>> File_system = ['FAT', 'FAT32', 'NTFS']
    >>> Cluster_size = [512, 1024, 2048, 4096, 8192, 16384, 32768, 65536]
    >>> Compression = ['On', 'Off']
    >>> combinations = all_pairs(Type, Size, Format_method, File_system, Cluster_size, Compression)
    >>> assert len(combinations) == 56
    """
    exe = '/opt/pict/bin/pict'
    assert os.path.exists(exe), 'Make sure you have install the PICT executable to: {}'.format(exe)
    assert len(sequence) > 0
    for s in sequence:
        assert isinstance(s, list)
        assert len(s) > 0

    # create input file
    lines = list()
    for i, s in enumerate(sequence):
        seq = ', '.join([str(r) for r in range(len(s))])
        new_line = '{}: {}'.format(i, seq)
        lines.append(new_line)

    with tempfile.NamedTemporaryFile(mode='w') as tmp:
        tmp.write(os.linesep.join(lines))
        tmp.flush()
        result = subprocess.check_output([exe, tmp.name])

    options = list()
    for line in result.split(os.linesep)[1:]:  # skip the header
        if len(line) == 0:
            continue
        indices = [int(i) for i in line.split('\t')]
        options.append([s[i] for s, i in zip(sequence, indices)])
    return options 
```

# c# - 一个适用于所有文件类型的 .ashx 通用处理程序？

> ID：10943660
> 
> 赞同：3
> 
> 时间：2012-06-08T05:49:05.710
> 
> 标签：c#, asp.net, httphandler, file-type

我已经阅读了基本的 MSDN 信息和一些教程。根据我目前所学到的，我已经能够制作两个 .ashx 处理程序，我称之为 ImageHandler.ashx 和 PDFHandler.ashx。它们会按照您的预期进行：分别返回图像或 PDF。对于这两个处理程序，在`ProcessRequest`方法中，我`context.Response.ContentType`分别设置为“image/jpeg”和“application/pdf”，然后用`context.Response.BinaryWrite(bytes)`到目前为止这工作得很好。

但是，我想让用户能够下载任何文件，无论类型如何。我真的需要为每种文件类型创建不同的处理程序吗？

我可以只有一个 .ashx 文件，然后有一个基于文件类型的 switch 语句（我可以通过文件名的子字符串获得）？即使我这样做了，那么非标准文件类型（例如 .xyz 文件）呢？在这种情况下我应该设置什么`content.Response.ContentType`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:59:53.177

不，您不需要多个处理程序，*尤其是*在基本操作相同的情况下。是的，您可以使用任何类型的逻辑来决定将响应内容类型设置为什么。对于您不知道的事情，请使用`application/octet-stream`. 您还应该考虑设置“content-disposition”标头，这使您有机会建议是否应将其显示为“内联”（即在浏览器中）或提示下载 - 以及逻辑文件名是什么（而不是一些ashx页面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:59:54.613

您可以设置`Content-type: application/octet-stream`并让浏览器根据文件扩展名处理要执行的操作。

# c#-2.0 - c#下拉列表选中计数

> ID：10943662
> 
> 赞同：0
> 
> 时间：2012-06-08T05:49:32.340
> 
> 标签：c#-2.0

昨天我问了一个问题，从我们这里的朋友那里得到了答案，我跑成功了，也有一个问题。“昨天我的问题是，当我们选择下拉列表时，它应该在第一次用标签显示为“1”，再次选择增加”，这就是我得到的答案.. ,

```
static int count = 0;
private void bind()
{ 
    ArrayList ar = new ArrayList();
    ar.Add("first"); 
    ar.Add("Second");
    ar.Add("Third");
    ar.Add("Four");
    ar.Add("Five");
    ar.Add("Six"); 
    ar.Add("Seven");
    CCddl.DataSource = ar;
    CCddl.DataBind();
}

protected void CCddl_SelectedIndexChanged(object sender, EventArgs e)
{
    if (count == 0) count = 1;
        Label12.Text = count++.ToString(); 
} 
```

这段代码有效，但是一旦运行窗口关闭，它就会失去继续，我的意思是应用程序再次运行它会再次显示“1”。但正是我想要的是，号码延续应该在系统日发生变化时结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:09:43.257

您应该以某种方式将值存储在数据库或其他东西中。带有日期值。然后，当日期更改时，您只需重置该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:10:48.447

尝试使用[应用程序设置](http://msdn.microsoft.com/en-us/library/a65txexh(v=vs.80).aspx)功能。我添加了两个用户设置`CountDate`，并`Count`在 Project->Property's->Settings 中将您的 SelectedIndexChangedEvent 更改为

```
protected void CCddl_SelectedIndexChanged(object sender, EventArgs e)
{
    if (count == 0) count = 1;
        Label12.Text = count++.ToString();

    Properties.Settings.Default.CountDate = DateTime.Now.Date;
    Properties.Settings.Default.Count = count;
    Properties.Settings.Default.Save();
} 
```

在表单初始化期间调用`Bind`方法之前，请放置类似这样的内容。

```
 if(Properties.Settings.Default.CountDate.Date != DateTime.Now.Date)
 {
    Properties.Settings.Default.Count = 0;
    Properties.Settings.Default.CountDate = DateTime.Now.Date;
    Properties.Settings.Default.Save();
 }
 else
    count = Properties.Settings.Default.Count;

 bind(); 
```

* * *

添加了属性设置图像

![在此处输入图像描述](../Images/deeff6075a0853a78ec672d83d69be6a.png)

# grails - Spring Social Grails 插件

> ID：10943666
> 
> 赞同：1
> 
> 时间：2012-06-08T05:50:16.037
> 
> 标签：grails, spring-social

我正在从 [https://github.com/synergyj/grails-spring-social-core为 Spring Social 运行 grails 插件](https://github.com/synergyj/grails-spring-social-core)

当我尝试运行该应用程序时，它会引发以下错误

```
Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):
- org.grails.plugins:spock:0.6-SNAPSHOT 
```

我已经包括了`mavenRepo "http://m2repo.spockframework.org/snapshots"`和`test(":spock:0.6-SNAPSHOT") { export = false }`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T03:58:05.627

从 [https://github.com/synergyj/grails-spring-social-core](https://github.com/synergyj/grails-spring-social-core)获取最新的结帐。作者更改了设置

# java - 我的程序有什么问题？我知道我犯了一个错误。但是哪里？

> ID：10943667
> 
> 赞同：-2
> 
> 时间：2012-06-08T05:50:16.780
> 
> 标签：java, swing

运行它时，我在控制台中收到此错误消息。我哪里出错了？“显示 C:/Users/Nimit/Desktop/n.txt 时出错”

```
import java.io.IOException;
import javax.swing.*;
public class exmpleText
{
    public static void main(String[] args)
    {
        String url = "C:/Users/Nimit/Desktop/n.txt";
        try
        {
            JFrame frame=new JFrame("Hi");
            JEditorPane Pane = new JEditorPane(url);
            Pane.setEditable(false);
            frame.add(new JScrollPane(Pane));
        } 
        catch(IOException ioe) 
        {
            System.err.println("Error displaying " + url);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T06:23:03.990

你的第一个错误是这条线。

```
 System.err.println("Error displaying " + url); 
```

错误不在于它在做什么，而在于它没有做什么。还应该做的是（至少）打印出异常消息，最好是堆栈跟踪。

* * *

现在您已经看到/向我们展示了堆栈跟踪，很清楚潜在的错误是什么。该字符串`"C:/Users/Nimit/Desktop/n.txt"`不是有效的 URL。有效的文件 URL 以`"file:"`方案开头。

带有 Windows 驱动器号的文件 URL 写成`"file:///C:/Users/Nimit/Desktop/n.txt"`.

**参考**：http: [//blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx](http://blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx)

或者，您可以使用 将路径名转换为 URL `new File("some path").toURL()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T06:33:50.873

您应该显示堆栈跟踪以了解实际情况，使用`ioe.printStackTrace()`

```
import java.io.IOException;
import javax.swing.*;

public class ExempleText {

    public static void main(String[] args) {
        String url = "C:/Users/Nimit/Desktop/n.txt";
        try {
            JFrame frame=new JFrame("Hi");
            JEditorPane Pane = new JEditorPane(url);
            Pane.setEditable(false);
            frame.add(new JScrollPane(Pane));
        } catch(IOException ioe) {
            System.err.println("Error displaying " + url);
            ioe.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:49:47.957

在创建 JFrame 对象后添加此代码

```
 try{

editorPane.setContentType("text/html");

Reader fileRead=new FileReader(name); // name is the file you want to read

editorPane.read(fileRead,null);

} catch(Exception e) { 

e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T06:43:10.363

更正的代码

```
import java.io.*;
import javax.swing.*;
import java.net.*;

public class exmpleText
{

  public static void main(String[] args)
  {
    String url = "C:\\Users\\welcome\\z.txt";
    File f = new File(url);

    try
    {
      URL x = f.toURL();
      System.out.println(x);         

      JFrame frame=new JFrame("Hi");

      JEditorPane Pane = new JEditorPane(x);
      Pane.setEditable(false);

      frame.add(new JScrollPane(Pane));
      frame.setVisible(true);
    } 
    catch(Exception ioe) 
    {
      System.out.println(ioe);
      System.err.println("Error displaying " + url);
    }
  }
} 
```

# iphone - 如何使我的视图随设备方向旋转？

> ID：10943673
> 
> 赞同：-1
> 
> 时间：2012-06-08T05:50:44.580
> 
> 标签：iphone

我正在研究远程桌面协议，我面临很多问题。你们真的很好，在许多危急情况下都能帮助我。

我的问题是这样的： -

如果我点击任何按钮连接到 RDP 之后如果我想旋转设备它不会发生

我做了 shouldAutorotateToInterfaceOrientation 是的，还是一样

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:09:31.190

在数组“支持的界面方向”下的 info.plist 文件中，您可以添加以下内容：

```
<key>UISupportedInterfaceOrientations</key>
<array>
    <string>UIInterfaceOrientationPortrait</string>
    <string>UIInterfaceOrientationLandscapeLeft</string>
    <string>UIInterfaceOrientationLandscapeRight</string>
    <string> UIInterfaceOrientationPortraitUpsideDown</string>
</array> 
```

希望这可以帮助！

# java - 如何在java中将字符串转换为日期？

> ID：10943674
> 
> 赞同：-2
> 
> 时间：2012-06-08T05:50:47.560
> 
> 标签：java, string, date

> **可能重复：**
> [Java 字符串到日期的转换](https://stackoverflow.com/questions/4216745/java-string-to-date-conversion)

我想将字符串转换为日期格式..怎么做？正常方式我可以像“dd-MM-yyyy”那样做。但我想转换以下字符串

字符串 sdate=“2012 年 6 月 7 日下午 5:40:00”；字符串 edate="2012 年 6 月 28 日下午 5:40:00";

怎么做？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:52:31.787

这是您应该研究[SimpleDateFormat的 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:04:59.930

```
String edate ="Jun 28, 2012 5:40:00 PM ";
String DATE_FORMAT = "yyyy-MM-dd";
SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);
String strDateNew = sdf.format(edate); 
```

# visual-studio - ReferencePath 与 ReferenceCopyLocalPaths

> ID：10943677
> 
> 赞同：5
> 
> 时间：2012-06-08T05:51:03.577
> 
> 标签：visual-studio, msbuild

`ReferencePath`with condition`'%(CopyLocal)'=='true'`和 和有什么区别`ReferenceCopyLocalPaths`吗？

这个问题是由[这个](https://stackoverflow.com/a/2337377/188826)答案提出的，它在两段代码中使用了两种方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T07:47:55.950

`ReferencePath`: 解析主文件的路径。

`ReferenceCopyLocalPaths`：标记为的引用`"CopyLocal"`及其依赖项，包括 .pdbs、.xmls 和卫星。

要测试每个项目的内容，请将其添加到您的 .csproj 文件中：

```
<Target Name="AfterBuild">
    <Message Text="1\. ReferencePath:%0D%0A%09@(ReferencePath->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)', '%0D%0A%09')" />
    <Message Text="2\. ReferenceCopyLocalPaths:%0D%0A%09@(ReferenceCopyLocalPaths->'$(OutDir)%(DestinationSubDirectory)%(Filename)%(Extension)', '%0D%0A%09')" />
</Target> 
```

# c# - c# - 有没有办法访问像“N02”这样的标准数字格式字符串？

> ID：10943679
> 
> 赞同：0
> 
> 时间：2012-06-08T05:51:30.373
> 
> 标签：c#, formatting, excel-interop

在数据网格中，我正在显示使用标准格式字符串格式化的数值，在本例中为“N02”。当我将此数据导出到 excel 时，我想将 excel 列的格式设置为相同。有没有办法评估当前语言环境的“N02”格式并获取实际的格式字符串？

如果不是，我想我必须尝试使用​​当前 NumberFormat 的 NumberNegativePattern、NumberGroupSizes、NumberGroupSeparator 和 NumberDecimalSeparator 属性来重建它，但我真的不喜欢我的机会比我的语言环境/文化更适合我.

这是我想为我的 Excel 互操作调用设置的内容：

((范围)excelSheet.Columns[columnLetter + ":" + columnLetter, Type.Missing]).NumberFormat = xxxxx;

我希望“N”和“N02”都使用 xxxxx，我知道我可以使用类似这样的内容：“#,##0.00;-#,##0.00”作为“N02”但这使整个事情变得文化具体的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:44:45.460

这里的问题是双重的；首先，在处理数字样式时，Excel 互操作只公开了非常有限的一组功能。其次，Excel 本身很少关注特定于文化的格式。

例如，在 Excel 的 Open XML 标准中，所有内置数字格式样式都是硬编码的（请参阅[ECMA 标准文档](http://www.ecma-international.org/news/TC45_current_work/Office%20Open%20XML%20Part%204%20-%20Markup%20Language%20Reference.pdf)，第 2128 页）。尽管根据用户的区域设置使用不同的样式，但 Excel 不会像 .NET Framework 的全球化功能那样关注用户区域设置中的任何覆盖。即使您要将标准数字格式字符串与其 Excel 等效项（按区域）结合起来，由于 Windows 中的区域设置，格式仍然可能有所不同。

正如 flindeberg 在他们的评论中提到的那样，将单元格值格式化为文本是真正确保数字在 .NET 中的格式化方式是它们在 Excel 中的显示方式的唯一方法。

由于您正在使用的限制，我建议在生成电子表格时以不变的文化为目标，而不是尝试为每种文化进行专门化。通过坚持不变文化的规则，您可以相当容易地编写一个算法来将标准数字格式字符串转换为它们的扩展形式，以便与 Excel 一起使用。

# javascript - 如果用户已经登录并点击了 wesite facebook 中的分享按钮，在 IE8 中询问登录凭据 ..！

> ID：10943680
> 
> 赞同：0
> 
> 时间：2012-06-08T05:51:50.203
> 
> 标签：javascript, facebook

我正在使用 javascript SDK 来实现提要功能。这是我的问题，如果用户登录并点击分享按钮 facebook 在 IE8 中询问登录凭据。在 IE9 中工作正常

我正在使用此代码

```
FB.init({appId: "416595358373189",show_error:true, status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

    FB.ui(obj, callback);
  }

    function callback(response) 
{

    } 
```

# memcached - 为内存缓存提供到期时间是否重要

> ID：10943681
> 
> 赞同：1
> 
> 时间：2012-06-08T05:51:53.497
> 
> 标签：memcached

我有一个 Web 应用程序，如果缓存了一些数据库操作，它会运行良好。这些是静态数据，每天都会添加新数据。为了减少数据库读取操作，我将使用 memcached。

如果我不为放入 memcached 的数据指定到期时间会发生什么。它会通过消耗更多的 RAM 来影响性能吗..？在将数据添加到缓存时放弃到期时间是否很好。

PS：我们使用AWS来部署带有ngnix、php、mysql的webapp。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:57:20.437

大概当您的应用程序在 2050 年仍在运行时，您在 2012 年放入缓存中的某些内容将不再相关。如果您不提供某种到期时间，则只有缓存重置（例如服务器重新启动）最终会刷新缓存。

除非你有无限的内存（而且我很确定 AWS 不提供这个 ;-) 为缓存的项目添加一些过期时间是明智的。

即使 Memcached 会根据[最近最少使用](http://en.wikipedia.org/wiki/LRU)的机制使项目过期（感谢@mikewied 指出这一点），缓存仍将在 memcache 开始基于 LRU 逐出项目之前完全填满。不幸的是，Memcache 的 LRU 算法是 perslab，而不是全局的。这意味着基于 LRU 的驱逐可能不是最优的。请参阅[Memcached 内存分配和优化](http://returnfoo.com/2012/02/memcached-memory-allocation-and-optimization-2/)。

# jquery - 实现 AJAX 数据库侦听器的最佳方式

> ID：10943683
> 
> 赞同：0
> 
> 时间：2012-06-08T05:52:08.117
> 
> 标签：jquery, database

根据上面的标题。实现 Ajax 数据库侦听器的最佳方法是什么。

我们想要实现一个监听器的场景（例如，如果我们想要在每次插入新条目时检索特定表的附加条目）。

我尝试使用递归 jquery ajax 发布请求来检查表条目。但我不知道这是否是最好的方法。也许您可以分享一些很棒的东西和最好的东西。

```
function my_table_db_listener(){        
   $.ajax({
         type   : 'post',
         url    : 'http://mysite.com/?axn=get_table_new_entries',
         success    : function(data){

                     //process data
                     ...
                     ...

                     //recursive call
                     my_table_db_listener();                  
         },
         error  : function(xhr, ajaxOptions, thrownError){
                     alert(xhr.statusText);
         }
   })
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:54:26.093

长池也称为反向 AJAX 是您应该研究的。

这是一个[例子](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

# validation - 在 Grails 中，如何在字段旁边显示验证错误消息？

> ID：10943684
> 
> 赞同：16
> 
> 时间：2012-06-08T05:52:14.680
> 
> 标签：validation, grails, grails-2.0

[Grails 2.0.4 验证文档](http://grails.org/doc/latest/guide/validation.html)向您展示了如何在页面顶部显示错误消息以及如何在字段无效时向元素添加 css 类，但它没有告诉您如何显示错误消息在字段本身旁边，如下所示：

```
 -----------------------
Name: |                     |  You must enter a name!
      ----------------------- 
```

如何检索无效字段的特定错误消息，然后将其显示在它所针对的字段旁边？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T17:26:51.257

实际上，文档确实显示了如何做到这一点，只是不太清楚这就是他们的意思：

```
<g:renderErrors bean="${book}" as="list" field="title"/> 
```

如果您指定*字段*属性，它只会呈现该字段的错误。因此，您可以相应地编写 HTML。

```
<input type="text" ... /> <g:if test="${bean.hasErrors}"><g:renderErrors bean="${book}" as="list" field="title"/></g:if> 
```

它可以变得像你想要的那样简单或复杂，虽然我通常喜欢 grails 插件，但这似乎很简单，没有一个，你可以更好地控制标记。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T06:25:39.263

我使用[Grails Fields 插件](http://www.grails.org/plugin/fields)来执行此操作，它很有效。

它使为表单字段呈现创建默认模板变得容易。例如，我有以下内容`grails-app/views/_fields/default/_field.gsp`：

```
<%@ page defaultCodec="html" %>
<div class="control-group${invalid ? ' error' : ''}">
    <label class="control-label" for="${property}${index ?: ""}">${label}</label>
    <div class="controls">
        <%= widget.replace("id=\"${property}\"", "id=\"${property}${index ?: ""}\"") %>
        <g:if test="${invalid}"><span class="help-inline">${errors.join('<br>')}</span></g:if>
    </div>
</div> 
```

从 HTML 中可以看出，错误是内联显示的。这是我的登录表单的一部分：

```
<g:form controller="home" action="login" >
    <f:field bean="user" property="email"/>
    <f:field bean="user" property="password">
        <g:field type="password" name="${property}" value="${value}"/>
    </f:field>
</g:form> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T17:43:51.767

这是上下文中的自定义错误，包含在用户名字段周围。这将做你想要的。

```
<dt>User Id</dt>
            <dd><g:textField name="username" value="${user?.username}"/>
            <g:hasErrors bean="${user}" field="username">
                    <g:eachError bean="${user}" field="username">
                        <p style="color: red;"><g:message error="${it}"/></p>
                    </g:eachError>
                </g:hasErrors>
            </dd> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T07:10:15.003

我建议使用[Jquery 验证插件](http://grails.org/plugin/jquery-validation-ui)。有几个关于此的 Grails 插件，但它们有点过时了。此外，我认为这个任务对于使用另一个插件来说非常简单。

# php - 从谷歌播放返回所有字段的函数

> ID：10943689
> 
> 赞同：1
> 
> 时间：2012-06-08T05:52:38.223
> 
> 标签：php, jquery, ajax

我想创建一个函数，它将返回谷歌播放的所有字段。也就是说，如果我们将 com.xyz.abcdef 传递给函数，函数应该返回一个命名值集合，例如 appname、description、screenshotUrls[] ，类别，评级等来自谷歌播放。是否可以在 php 中执行任务。php 中是否有任何控制器或函数可以执行此任务。任何人都可以帮助我。

谢谢。

# .net - 创建动态 WCF 服务代理 .net 2.0 程序集

> ID：10943690
> 
> 赞同：0
> 
> 时间：2012-06-08T05:52:42.213
> 
> 标签：.net, wcf

我有一些 WCF 服务托管在 IIS 中或自托管在 Windows 服务中。

最初，wcf 服务仅托管在 IIS 中，引用这些服务的 .net 2.0 程序集运行良好。

由于这些服务托管在本地机器上，因此即使机器发生变化，在引用服务时创建的 url 也能正常工作。

现在，wcf 服务可以是自托管的，也可以是 IIS 的，并且在自托管的情况下，url 也将另外有一个端口号。

在客户端应用程序中，服务被引用为 WebReference 和引用属性 - UrlBehaviour 已设置为动态，因此它将根据配置文件中指定的端点 url 创建代理，此设置现在不起作用，即使端点 url在配置文件中进行了更改，它正在访问在服务引用时创建的相同的旧端点 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:57:36.143

一种或另一种方式，确保在调用 Web 方法之前将代理类的“Url”属性设置为您想要的值。

# r - `R CMD Sweave myfile.rnw` 的 knitr 等价物是什么？

> ID：10943695
> 
> 赞同：58
> 
> 时间：2012-06-08T05:53:11.493
> 
> 标签：r, sweave, knitr

命令行[knitr](http://yihui.name/knitr/demo/minimal/)相当于`R CMD Sweave myfile.rnw`什么？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-08T06:04:23.877

通用解决方案（不管 R 版本如何）：

```
Rscript -e "library(knitr); knit('myfile.Rmd')" 
```

从 R 3.1.0 开始，`R CMD Sweave`已经开始支持非 Sweave 文档（虽然命令名称听起来有点奇怪），您唯一需要做的就是在文档中指定一个小插图引擎，例如

```
%\VignetteEngine{knitr::knitr} 
```

**要查看knitr**中可能的小插图引擎，请使用

```
library(knitr)
library(tools)
names(vignetteEngine(package = 'knitr'))
# "knitr::rmarkdown" "knitr::knitr" "knitr::docco_classic" "knitr::docco_linear" 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-08T08:59:01.480

我有一个 knitme.R 脚本：

```
library(knitr)
render_html()
source("hooks.R") # mods to defaults
inFile = commandArgs(trailingOnly=TRUE)[1]
outFile = commandArgs(trailingOnly=TRUE)[2]
knit(inFile,output=outFile) 
```

所以我可以这样做

```
Rscript knitme.R $SOURCE $TARGET 
```

根据需要在哪里`$SOURCE`和在哪里`$TARGET`。

您也可以将其集成到`Make`中，因此您有一个规则，您所要做的就是：

```
make myfile.html 
```

它会`myfile.Rhtml`生成 HTML 文件。调整以从 .Rnw 制作 PDF

我将它与[SCons](http://www.scons.org/)一起使用而不是 Make，所以我有一个更复杂的*Sconscript*文件（部分原因是我才刚刚开始学习使用 SCons，所以它可能有点笨拙）

```
env=Environment()
bld = Builder(action = '/usr/bin/Rscript knitme.R $SOURCE $TARGET',
              suffix='.html',
              src_suffix='Rhtml')
env.Append(BUILDERS = {'Knit' : bld})
env.Knit(source='test.Rhtml',target='test.html') 
```

那么我需要做的就是：

```
scons test.html 
```

我`test.html`是从`test.Rhtml`if `test.Rhtml`has changed 中建立起来的。

这是`Sconstruct`基于各种其他依赖项构建整个网站并将其复制到服务器的文件的所有部分。

现在跑题了……

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-26T22:29:12.623

要添加到其他答案，如果您想编织/渲染文件并在一行中打开所有输出，您可以使用：

```
Rscript -e "rmarkdown::render('file.Rmd')" & open file.pdf 
```

我更喜欢在一行中完成所有操作，因为作为可重用的 Vim 命令运行更简单。

`open`如果您想使用系统的非默认设置，也可以用特定的应用程序替换。如果我在 Windows 上并想使用 Sumatra 覆盖当前打开的 PDF 输出，我倾向于使用它（所以我不必每次都记得关闭它）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-29T01:09:11.823

```
R CMD knit file.Rmd 
```

直接等价于 R CMD Sweave file.Rmd

最近，在 rmarkdown 和 knitr 中有增强的功能来处理这种肮脏的工作。对于幻灯片，我一直在使用 Rmarkdown YAML 标头来指定预期的输出格式，并且命令行是基本的，例如

```
R -e "library(rmarkdown); render(\"file.Rmd\")" 
```

# git - 在 Windows 7 上使用 Git 时出错

> ID：10943696
> 
> 赞同：1
> 
> 时间：2012-06-08T05:53:17.857
> 
> 标签：git, windows-7, installation

我已经在 Windows 7 上下载并安装了 Git 设置。但是每当我尝试创建/克隆或初始化新的存储库时，它都会生成以下错误。

> 'git' 不是内部或外部命令、可运行程序或批处理文件。

谁能建议我它可能要求什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:56:21.277

您需要将[包含 git 可执行文件的文件夹添加到您的 Windows 路径](http://www.computerhope.com/issues/ch000549.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:46:36.763

如果你使用 MSysGit 提供的 bash，你应该不会有这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:41:02.473

使用 msysgit，您需要通过[`<path/to/msysgit>/git-cmd.bat`](https://github.com/msysgit/msysgit/blob/devel/git-cmd.bat).
这将为`PATH`您解决问题。

你需要 git 来与 GitHub 存储库交互，别忘了[**windows.github.com**](http://windows.github.com/)。
它还包括一个 msysgit 分发和`PATH`正确设置。

# java - 初始化 JNI_CreateJavaVM 的第三个参数

> ID：10943698
> 
> 赞同：1
> 
> 时间：2012-06-08T05:53:30.610
> 
> 标签：java, java-native-interface

该方法`JNI_CreateJavaVM`的第三个参数将第三个参数作为`JavaVMInitArgs`结构。

```
typedef struct JavaVMInitArgs { 
                     jint version; 
                     jint nOptions; 
                     JavaVMOption *options; 
                     jboolean ignoreUnrecognized; 
                 } JavaVMInitArgs; 
```

我如何初始化这个？我无法这样做。

**JNI_CreateJavaVM 的原型**：`jint JNI_CreateJavaVM(JavaVM **pvm, void **penv, void *vm_args);`

我如何初始化 vm_args ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T06:00:16.057

*经过一番讨论，我们得出结论，您的编译器设置有问题。*

为了能够成功编译和链接`JNI_CreateJavaVM`，您需要将`jvm`库添加到链接器。

* * *

## 初步答案：

查看[调用 API](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html)，以下示例可能会解释您需要做什么：

```
JavaVMInitArgs vm_args;
JavaVMOption options[4];

options[0].optionString = "-Djava.compiler=NONE";           /* disable JIT */
options[1].optionString = "-Djava.class.path=c:\myclasses"; /* user classes */
options[2].optionString = "-Djava.library.path=c:\mylibs";  /* set native library path */
options[3].optionString = "-verbose:jni";                   /* print JNI-related messages */

vm_args.version = JNI_VERSION_1_2;
vm_args.options = options;
vm_args.nOptions = 4;
vm_args.ignoreUnrecognized = TRUE;

/* Note that in the JDK, there is no longer any need to call 
 * JNI_GetDefaultJavaVMInitArgs. 
 */
res = JNI_CreateJavaVM(&vm, (void **)&env, &vm_args);
if (res < 0) ... 
```

# facebook - Facebook 代码没有贴在墙上

> ID：10943709
> 
> 赞同：1
> 
> 时间：2012-06-08T05:54:39.763
> 
> 标签：facebook, post

我正在尝试将 facebook 与我的 android 应用程序连接起来，我已经在 facebook 上创建了应用程序并获得了它的应用程序 ID。使用此 ID，此代码应发布在用户墙上。为什么下面的代码只是祝酒“在facebook上发布”而不是在我的墙上发布？

```
mFacebookBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.d("Facebook Activity", "After on create");
            mPrefs = getPreferences(MODE_PRIVATE);
            String access_token = mPrefs.getString("access_token", null);
            long expires = mPrefs.getLong("access_expires", 0);

            if (access_token != null) {
                facebook.setAccessToken(access_token);
            }
            if (!facebook.isSessionValid()) {

                facebook.authorize(FacebookActivity.this, PERMISSIONS,
                        new DialogListener() {
                            @Override
                            public void onComplete(Bundle values) {
                                SharedPreferences.Editor editor = mPrefs.edit();
                                editor.putString("access_token",
                                        facebook.getAccessToken());
                                editor.putLong("access_expires",
                                        facebook.getAccessExpires());
                                editor.commit();
                            }

                            @Override
                            public void onFacebookError(FacebookError error) {
                            }

                            @Override
                            public void onError(DialogError e) {
                            }

                            @Override
                            public void onCancel() {
                            }
                        });
            }

            Log.d("Facebook Activity", "Logged in in Facebook");
            facebookPost("Testing 1");
            try {
                facebook.logout(getApplicationContext());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        private void facebookPost(String string) {
            // TODO Auto-generated method stub
            // code for facebook post here
            Log.d("Facebook Activity", "Facebook Post Method");
            AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(
                    facebook);
            Bundle params = new Bundle();

            params.putString("message", string);

                params.putString("name", "Test Name");
                params.putString("caption","Test caption");
                params.putString("link","www.test.com");
                params.putString("description","test description");
                params.putString("picture", "www.somelink.com/image.gif");
            Log.d("Facebook Activity", "Firing Request to facebook");
            mAsyncFbRunner.request("Me/feed", params, "POST",
                    new RequestListener() {

                        @Override
                        public void onMalformedURLException(
                                MalformedURLException e, Object state) {
                            // TODO Auto-generated method stub
                            Toast.makeText(getApplicationContext(),
                                    "Malformed URL Exception",
                                    Toast.LENGTH_SHORT).show();
                        }

                        @Override
                        public void onIOException(IOException e,
                                Object state) {
                            // TODO Auto-generated method stub
                            Toast.makeText(getApplicationContext(),
                                    "Internet is not available", Toast.LENGTH_SHORT)
                                    .show();
                        }

                        @Override
                        public void onFileNotFoundException(
                                FileNotFoundException e, Object state) {
                            // TODO Auto-generated method stub

                        }

                        @Override
                        public void onFacebookError(FacebookError e,
                                Object state) {
                            // TODO Auto-generated method stub
                            Toast.makeText(getApplicationContext(),
                                    "Facebook Error", Toast.LENGTH_SHORT)
                                    .show();
                        }

                        @Override
                        public void onComplete(String response, Object state) {
                            // TODO Auto-generated method stub
                            mRunOnUi.post(new Runnable() {
                                @Override
                                public void run() {

                                    Toast.makeText(getApplicationContext(),
                                            "Posted to Facebook",
                                            Toast.LENGTH_SHORT).show();
                                }
                            });
                            // Toast.makeText(getApplicationContext(),
                            // "Posted to facebook",
                            // Toast.LENGTH_SHORT).show();
                        }
                    }, new Object());
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:51:57.713

```
$status = $facebook->api('/me/feed', 'POST', 
array(
'message' => 'message . ',
'name' => 'name.',   
'caption' => "Caption of the Post",
'link' => 'https://www.facebook.com/biju.nemom',
'description' =>'this is a description',
'picture' => ' images/mis.jpg' 
)
); 
```

# linux - 将文件移动到另一个文件夹，包括文件名中的创建日期

> ID：10943710
> 
> 赞同：1
> 
> 时间：2012-06-08T05:54:45.090
> 
> 标签：linux, perl, shell, scripting

我可以将文件从一个文件夹移动到另一个文件夹，但问题是我希望新文件夹中新创建的文件作为其创建日期和文件名。

例如

```
/scripts/a.log 
```

搬去

```
/log/8june2012a.log 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T06:22:56.017

```
cp filename "`date +%Y%m%d`filename" 
```

这会将**文件名**复制为**20120608filename**。对于您的示例，这就是您想要的：

```
cp filename "`date +%d%b%Y`filename" 
```

这会将**文件名**复制为**08jun2012filename**。如果你想移动你的文件而不是复制使用`mv`而不是`cp`：

```
mv filename "`date +%d%b%Y`filename" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:31:40.133

使用几个 CPAN 模块，这可以很简单。[`File::Copy`](https://metacpan.org/module/File%3a%3aCopy)自 Perl v5.0 以来一直是核心模块，但除非您已经拥有它们，否则需要安装它们[`Date::Format`](https://metacpan.org/module/Date%3a%3aFormat)。[`Path::Class`](https://metacpan.org/module/Path%3a%3aClass)

我已经从字面上理解了您的要求，并且此解决方案使用创建日期`%e%B%Y`作为格式为原始文件添加前缀，将大写转换为小写并去除空格。然而，这不是很可读，目录列表不会自动按日期顺序排序，所以我建议使用`%Y-%m-%d-`替换包含调用的`strftime`行

```
my $date = lc strftime('%Y-%m-%d-', @date) 
```

目前，该代码仅打印将要移动的文件及其目的地的列表。要实际执行此操作，您应该取消对`move`.

```
use strict;
use warnings;

use Path::Class 'dir';
use Date::Format 'strftime';
use File::Copy 'move';

my $source  = dir '/scripts/';
my $dest = dir '/log/';

for my $file (grep { not $_->is_dir } $source->children) {

  my @date = localtime $file->stat->ctime;
  (my $date = lc strftime('%e%B%Y', @date)) =~ tr/\x20//d;

  my $newfile = $dest->file($date.$file->basename);

  print "move $file -> $newfile\n";
  #  move $file, $newfile;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T07:32:11.203

这是 Perl 中的一个解决方案。

```
#!/usr/bin/perl

use strict;
use warnings;
use File::Copy 'move';
use Time::Piece 'localtime';

my $indir = '/scripts';
my $outdir = '/log';

# get all of the files in the scripts dir
chdir $indir;
my @files = grep -f, glob '*';

foreach my $infile (@files) {
    # get the date that the file was created
    my $file_created_date = localtime( (stat $infile)[9] );
    my $outfile = $file_created_date->strftime('%d%B%Y').$infile;
    move $infile, "$outdir/$outfile";
} 
```

顺便说一句，我会将日期格式化为`%Y%m%d`(yyyymmdd)，因为它为您提供了一致的格式并允许您更轻松地按日期排序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T07:49:01.200

另一种解决方案。

```
use strict ;
use File::stat ;
use POSIX qw(strftime);

my $File = 'mv.pl';
my $NewFile=strftime("%d%B%Y",localtime(stat($File)->ctime)) . $File ;

rename $File, $NewFile; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T06:04:05.560

```
use File::Copy;
move("a.log",$DIRECTORY.get_timestamp().".log"); 
```

您的 get_timestamp 函数应该生成日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T06:21:56.063

我为你写了一个演示，

```
#!/bin/bash

DATE=`date +"%e%B%Y" | tr -d ' ' | tr A-Z a-z`

for FILENAME in *.log
do
        cp "${FILENAME}" "/log/${DATE}${FILENAME}"
done 
```

您可以在“脚本”目录中运行它。

# jquery - 如何提交来自输入元素的数据和来自 JSP 函数的 Id 数组？

> ID：10943713
> 
> 赞同：0
> 
> 时间：2012-06-08T05:54:54.313
> 
> 标签：jquery, css, jsp, spring-mvc

我是 Web 开发的新手，学习最多的是“我继续”。我在服务器端使用 Spring-MVC，在客户端使用 JSP、JQuery 和 CSS。到目前为止，我有一个简单的页面，其中包含 2 个时间选择器（jquery），`<div>s`每个列表包含项目数据和一个复选框。当单击提交按钮时，整个数据以表单形式提交并`@RequestParam-s`以我的`Controller`. 在我的下一步中，我希望每个`<div>`都具有一个复选框的功能：我实现了一个`toggle`更改`<div>`背景并收集相关 ID 的功能。现在我的问题是如何将这些数据提交到服务器（时间选择器和 ID 数组）？我需要构建一个`JSON`对象并提交它吗？我可以举一个例子来说明如何从`toggle`功能和时间从`input element`？
这是我的 html 中的一个片段：

```
<div class="container" >
    <label class="TimeLabel" >Start:</label>
    <input type="text" style="width: 3em;" id="timepicker_start" name="timepicker_start" value="09:00" />
    <label class="TimeLabel">End:</label>
    <input type="text" style="width: 3em;" id="timepicker_end" name="timepicker_end" value="18:00" />
<div/>
...
<!-- item only list -->     
<div class="container">
  <ul class="plainList">
    <c:forEach items="${itemsFrom.itemsOnly}" var="item" varStatus="status">            
      <li>
        <div class="inner">
          <img src="resources/images/${item.id}.png">           
          <ul class="plainList">             
            <li><h4>${item.title} &trade;</h4></li>              
            <li><h5>${item.description}</h5></li>            
          </ul>              
          <div style="clear: both"></div>           
        </div>           
      </li>         
    </c:forEach>      
  </ul>     
</div> 
```

和我的功能：

```
 <script type="text/javascript">
    var count = 0;
    var attrIds = new Array();
    $(function() {
        $(".inner").toggle(function() {
            $(this).css("background", "#2E8B57");
            attrIds.push(this.id);
            count++;
            $("section").find("#attrCount").text(count);
        }, function() {
            $(this).css("background", "#dcdcdc");
            attrIds.splice($.inArray(this.id, attrIds),1);
            count--;
            $("section").find("#attrCount").text(count);
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T09:23:41.710

好的，所以我所做的是创建了一个隐藏元素：

```
 <script type="text/javascript">
    $(document).ready(function() {
        var hidden = document.createElement("input");
        hidden.type = "hidden";
        hidden.name = "itemsIds";
        hidden.id = "itemsIds";
        document.forms[0].appendChild(hidden);
    });
</script> 
```

在我的`Toggle`函数中，我添加了：

```
 var hid = document.getElementById("itemsIds");
        hid.value = attrIdsArr; 
```

现在，当我提交表单时，`itemsIds`提交。如果有人对我的解决方案及其效率有任何意见，我很乐意得到他们。

# wpf - 在 WPF 中未更新 TreeView 中带有转换器的 ObservableCollection

> ID：10943715
> 
> 赞同：2
> 
> 时间：2012-06-08T05:55:12.203
> 
> 标签：observablecollection, 转换器, 绑定，递归, 树视图, , , , wpf, binding, treeview, observablecollection, converter

我有一个大问题，如果我将 ItemSource ( [observablecollection](/questions/tagged/observablecollection "显示标记为“observablecollection”的问题") ) 与[转换器](/questions/tagged/converter "显示标记为“转换器”的问题")[绑定，递归](/questions/tagged/binding "显示标记为“绑定”的问题")[树视图](/questions/tagged/treeview "显示标记为“树视图”的问题")不会更新任何子项。我制作了一个小示例 WPF 应用程序来解释恼人的行为。

首先，我有一个名为 Folder 的类。文件夹集合从真实应用程序中的 DataLayer 传递。这是简单的示例类：

```
// Represents a Folder from the database
public class Folder
{
    public string Label { get; set; }

    // Data recursion
    public ObservableCollection<Folder> Children { get; set; }

    public Folder()
    {
        Children = new ObservableCollection<Folder>();
    }
} 
```

在表示层中，我需要更多属性才能在树视图中查看它。我无法更改文件夹类。

```
// Hold additional data to a Folder
public class TreeViewFolder
{
    public Folder Folder { get; set; }

    public bool IsExpanded { get; set; }
} 
```

我的示例中有一个 ViewModel 类，它生成一些根级测试数据。通过一个任务，我在 3 秒后模拟了测试数据的变化：添加一个根文件夹和一个子文件夹。

```
// ViewModel to MainWindow.xaml
public class ViewModel
{
    public ObservableCollection<Folder> Folders { get; set; }
    public ObservableCollection<TreeViewFolder> TreeViewFolders { get; set; }

    public ViewModel()
    {
        // childfolder
        var childs = new ObservableCollection<Folder>();
        childs.Add(new Folder{Label="3.1"});

        // Generate some test data
        Folders = new ObservableCollection<Folder>
                      {
                          new Folder {Label = "1."},
                          new Folder {Label = "2."},
                          new Folder {Label = "3.", Children = childs},
                          new Folder {Label = "4."}
                      };

        // Add the test data to new TreeViewFolders
        TreeViewFolders = new ObservableCollection<TreeViewFolder>
                      {
                          new TreeViewFolder{Folder = Folders[0]},
                          new TreeViewFolder{Folder = Folders[1]},
                          new TreeViewFolder{Folder = Folders[2]},
                          new TreeViewFolder{Folder = Folders[3]}
                      };

        // This is the UI Thread
        Execute.InitializeWithDispatcher();

        // Wait for 3 seconds...
        Task.Factory.StartNew(() =>
            System.Threading.Thread.Sleep(3000))
            // ...and then add a new main folder and one child folder
            .ContinueWith((pre) =>
                Execute.InvokeOnUIThread(() => {
                    Folders.Add( new Folder() {Label = "5."});
                    TreeViewFolders.Add(new TreeViewFolder{Folder = Folders[4]});
                    Folders[1].Children.Add(new Folder {Label = "2.1"});
                }));
    }
} 
```

转换器实现一个字典来跟踪所有已经是 TreeViewFolder 的文件夹，并且能够将一个文件夹或 ObservableCollection 转换为 TreeViewFolder 或 ObservableCollection。未实现反向转换。

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        //DictionaryLookUp just holds a Folder <-> TreeViewFolder relation in a Dictionary<Folder, TreeViewFolder> for performance issues

        // Single object
        if (targetType == typeof(TreeViewFolder)) {
            var inputFolder = value as Folder;
            if (inputFolder == null) return null;
            return DictionaryLookUp(inputFolder);
        }

        // Collection of Folders
        // WPF SAYS IT WANTS AN IENUMERABLE??? I GIVE AN OBSERVABLECOLLECTION
        if (targetType == typeof(IEnumerable)) {
            var inputFolders = value as IEnumerable<Folder>;
            if (inputFolders == null) return null;

            var outputFolders = new ObservableCollection<TreeViewFolder>();

            foreach (var folder in inputFolders) {
                outputFolders.Add(DictionaryLookUp(folder));
            }

            return outputFolders;
        }
        //Error!
        return null;
    } 
```

在 MainWindow.xaml 我只有两个 TreeViews。第一个再次只是为了证明当我使用原始文件夹（而不是 TreeViewFolder）时一切正常。第二个 TreeView 是我需要的。

```
<Window x:Class="TreeViewConverterBinding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TreeViewConverterBinding"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <local:ViewModel />
    </Window.DataContext>
    <Window.Resources>
        <local:FolderToTreeViewFolderConverter x:Key="FtTVFConverter" />
    </Window.Resources>
    <StackPanel >
        <Label Content="TreeView for Folders: Binding without Converter" />
        <TreeView ItemsSource="{Binding Folders}">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate 
                    DataType="{x:Type local:Folder}"
                    ItemsSource="{Binding Children}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Label}"/>
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
        <Label Content="TreeView for TreeViewFolders: Binding to same Source with Converter" />
        <TreeView ItemsSource="{Binding TreeViewFolders}">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate 
                    DataType="{x:Type local:TreeViewFolder}"
                    ItemsSource="{Binding Folder.Children, Converter={StaticResource FtTVFConverter}}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Folder.Label}"/>
                        <TextBlock Text=" Folder.Children.Count=" />
                        <TextBlock Text="{Binding Folder.Children.Count}"/>
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
    </StackPanel>
</Window> 
```

此外，我将一个特殊的 TextBlock 绑定到文件夹的子项计数。

这里的问题是，在第二个 TreeView 中，TextBlock 在条目“2”的 3 秒后显示 Count=1。但树视图中没有出现 [+]。[+] 在条目“3”中。尽管。上面的 TreeView 效果很好！

谁能告诉我这里有什么问题？如何使 [+] 出现在底部 TreeView 的第二个条目中？

我知道还有其他方法可以使用 TreeViewFolder 中的属性（继承、反射等）来扩展文件夹，但不适合真正的应用程序。这里的主要问题是，一个文件夹对于整个应用程序只存在一次，而相应的 TreeViewFolder 存在 n 次具有不同的属性......

在此先感谢索科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:56:57.253

看来这里的问题是 WPF 无法将 ObservableCollection 转换为 ObservableCollection。Convert() 方法中 IEnumerable 的 targetType 很好地提示了该问题。我发现没有办法告诉 WPF 请求 ObservableCollection。即使我返回 ObservableCollection WPF 也不会像对待它一样对待它......

因此，经过大量尝试和错误后，我想出了一个解决问题的解决方法。基本上它使用集合的计数属性来触发 WPF 中的更新。

这是初始帖子的 xaml 中更改的部分：

```
 <HierarchicalDataTemplate.ItemsSource>
                    <MultiBinding Converter="{StaticResource FtTVFMultiConverter}">
                        <Binding Path="Folder.Children" />
                        <Binding Path="Folder.Children.Count" />
                    </MultiBinding>
                </HierarchicalDataTemplate.ItemsSource> 
```

FtTVFMultiConverter 是一个仅实现 IMultiValueConverter 接口的 Convert() 的类：

```
 public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var inputFolders = values[0] as ObservableCollection<Folder>;
        if (inputFolders == null) return null;

        var outputTreeViewFolders = new ObservableCollection<TreeViewFolder>();

        foreach (var folder in inputFolders) {
            outputTreeViewFolders.Add(new TreeViewFolder { Folder = folder });
        }

        return outputTreeViewFolders;
    } 
```

因此，ViewModel 中源的更改由 Folder.Children.Count 属性的更改触发。因此调用 Convert 方法来传递新添加的 Childs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:55:12.387

你说 ...

> 转换器没什么特别的。它实现了一个字典来跟踪所有已经是 TreeViewFolder 的文件夹，并且能够将一个文件夹或 IEnumerable 转换为 TreeViewFolder 或 IEnumerable。未实现反向转换。

但这就是造成这一切的原因，不是吗！通过将您的 observable 集合转换为字典（这是一个 non-observable `IEnumerable`），您已经失去了 WPF GUI 的持续更新能力！

您需要使用`INotifyCollectionChanged`接口实现自定义字典，然后在处理`Folders.CollectionChanged`事件时，根据可观察集合中已更改的内容同步字典并引发其自己的`CustomDictionarty.CollectionChanged`事件。

# c# - Visual Studio 包和 VSIX 项目类型有什么区别？

> ID：10943716
> 
> 赞同：10
> 
> 时间：2012-06-08T05:55:13.470
> 
> 标签：c#, .net, visual-studio-2010, sdk

在 VS2010 SDK 可扩展性中，“Visual Studio 包”项目类型和“VSIX 项目”类型有什么区别？他们都在生成用于发布模板的 VSIX 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T18:47:39.857

这实际上已作为此处提出的一系列问题的一部分得到了回答：

[Visual Studio 2010 可扩展性入门 - 3 个问题](https://stackoverflow.com/q/4627829/1444911)

> 这两个项目都产生了 VSIX。VSIX 项目只生成一个空的，而包项目为您设置了一个托管包框架包。这里有一些包的演练。

由于这是针对这个特定问题的，我认为值得将其作为单独的 Q/A 保留，而不是关闭问题。

# xcode - Xcode - 您如何确定应用程序包中是否存在文件？

> ID：10943719
> 
> 赞同：0
> 
> 时间：2012-06-08T05:55:29.607
> 
> 标签：xcode, file, directory

有多少类似的问题被问到但对我没有帮助，这太荒谬了。

这是我的代码：

```
 BOOL exists = [[NSFileManager defaultManager] fileExistsAtPath:[NSString stringWithFormat: @"Flags/%@.jpg", countr.Name]];
        if (exists) {
            NSLog(@"exist");
        } 
```

我有一个以`Flags`其中的文件命名的组。我试着把这个组放在根目录下，代码不起作用。然后我尝试将它放在资源中，并在文件路径中的两个'Resources/'中都没有它也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:05:12.707

您可以使用以下代码：

```
NSString *exists = [[NSBundle mainBundle] pathForResource:@"%@", countr.Name ofType:@"jpg"];

//This line checks if anything was stored in the string exists. Nothing would be stored in it if there was no file that existed.
if(exists == nil){ 
    NSLog(@"Doesn't exist");
}
else{
    NSLog(@"Exists!");
} 
```

希望这可以帮助！

# c# - C# 控制台应用程序中的调度程序问题

> ID：10943722
> 
> 赞同：1
> 
> 时间：2012-06-08T05:56:00.923
> 
> 标签：c#, multithreading, dispatcher

我需要在正确的工作线程上调用在计时器线程上运行的方法。Invoke/BeginInvoke 过程对我有用。有2个线程共享一个线程间数据容器进行数据交换。一种是填充队列，一种是处理队列。如果队列在空状态后被填充，则会引发事件。所有问题都是由计时器引起的，它在其经过的事件上打开新线程。我正在使用 Dispatcher 在正确的线程上进行调度，但一切正常，除了这个 Dispatcher。:-)

请问有没有人看出问题出在哪里？

完整的测试代码在这里： http: [//pastebin.com/jqYbR9PS](http://pastebin.com/jqYbR9PS)。

调试输出是这样的：

```
App Thread ID: 9
Processor Thread ID: 10
Processor Dispatcher Thread ID: 10
The thread '<No Name>' (0x888) has exited with code 0 (0x0).
Processor QueueListener caller Thread ID: 12
Processor Dispatcher Thread ID: 10
Processor invoking ProcessQueue.
...here shut be processing output...
Processor invoked ProcessQueue.
App Thread ID on end: 9
The thread 'vshost.RunParkingWindow' (0x17c4) has exited with code 0 (0x0).
The thread '<No Name>' (0x820) has exited with code 0 (0x0).
The program '[5760] TestingConsoleApplication.vshost.exe: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

ProcessQueue 永远不会被调用/调用。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T06:10:08.993

您需要通过调用[Dispatcher.Run()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.run)来实际启动调度程序，以便调度程序处理对其调用的调用。

从控制台应用程序中使用 Dispatcher 很奇怪—— Dispatcher 用于 WPF 应用程序，但我想它会起作用。

请注意，调用`Dispatcher.Run()`不会返回 - 它会进入一个循环，直到您调用[Dispatcher.BeginInvokeShutdown()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvokeshutdown)

有关示例，请参阅此[博客文章。](http://blogs.msdn.com/b/chgeuer/archive/2009/01/15/how-to-host-and-use-a-dependencyobject-in-a-threaded-console-app.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:20:06.317

Dispatcher.BeginInvoke 使用 Windows 消息泵。您尝试分派的线程 (processingThread) 未运行消息泵。

您可以在该线程上运行消息泵，但为什么要这样做而不是使用 EventWaitHandle 或其他线程同步对象呢？

此外，代码中队列上的操作不是线程安全的。

# clojure - Clojure 多方法全局层次结构

> ID：10943724
> 
> 赞同：1
> 
> 时间：2012-06-08T05:56:06.347
> 
> 标签：clojure

在文档中它说

> 上面的所有示例都使用了多方法系统使用的全局层次结构

什么是全局层次结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:14:44.557

查看[core.clj](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj)并查找`(def ^{:private true} global-hierarchy (make-hierarchy))`. 文档字符串`make-hierarchy`说

> “创建一个层次结构对象，用于派生、isa？等。”

this 与多方法系统的关系可以通过执行 a `macroexpand`on `defmulti`which 导致对`clojure.lang.MultiFn`构造函数的调用来找出方法名称为字符串和 var `#'clojure.core/global-hierarchy`。如果需要，您可以查看`clojure.lang.MultiFn`源代码，但这是多方法的“幕后”。

# javascript - 如何触发 iframe 事件 Jquery

> ID：10943727
> 
> 赞同：2
> 
> 时间：2012-06-08T05:56:18.157
> 
> 标签：javascript, jquery, iframe

我有一个 IFRAME，我想从 IFRAME 的父级触发一个事件（在 iframe 内）：

**只是我想要做**的一个粗略的例子：****

 **```
<iframe id="i">
  <div id="test"></div>
  <script>
  $(document).ready(function() {  // Event is binded inside the iframe 

   $("#test").live({ click : function() { alert("hello"); } });
  });
  </script>
</iframe>

<script>
$(document).ready(function() { // Want to trigger it from outside the iframe
 $("#i").contents().find("#test").trigger("click");
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T06:17:56.423

您的 jquery 是正确的，唯一的问题是您在文档准备好但当时 iframe 没有完全加载时执行此操作，因此 div 那时不存在并且不会触发点击。将您的主页脚本更改为

```
$(document).ready(function() {
    //want to trigger it from outside the iframe
    $("#i").load(function(){
        $("#i").contents().find("div").trigger("click");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:06:24.860

尝试这个

[来自 iFrame 中的 ger javascript 事件](https://stackoverflow.com/questions/8319613/trigger-javascript-event-from-within-an-iframe)

但看看吉利的回答

```
document.myFrameName.myFunction(); 
```

问候**

# php - 用 PHP 读取二进制文件

> ID：10943730
> 
> 赞同：4
> 
> 时间：2012-06-08T05:56:35.230
> 
> 标签：php, c++, structure

这是使用的“C++”结构。

```
struct gross
    {
        char date[11];
        char ac[128];
        char type[5];
        float mvalue;
        float netraw;
        float netfer;
        char stat[128];
        float firr;
        float acb;
    }; 
```

这是使用 GCC 编译器编译时生成的二进制文件的内容。

> 12/12/1995 D US 12.23 34.12 90.12费用12 56.12 01/01/1998 A US 52.23 54.12 10.12费用92 16.12 31/12/1999 A US 52.23 54.12 10.12费用92 16.12 31/12/1999 D US 12.23 34.12 90.12费用12 56.12 01/01/01/01/01/01/01/01/01/01/01/01/01/01/01/01/01/211.12费用92 16.12 01/01/2000 Z US 12.23 34.12 90.12费用12 56.12 31/12/2010 A US 52.23 54.12 10.12费用92 16.12 31/12/2010 D US 12.23 34.12 90.12 费用 12 56.12

读取上述二进制文件内容的 PHP 编码。

```
echo "<table>";
while (!feof($f)) {

  if ($s = fread($f, 292)) {

        $nn = unpack('a11date/a128ac/a5type/fmvalue/fnetraw/fnetfer/a128stat/ffirr/facb', $s);

        echo "<td>" . $nn[date] ."</td>";
        echo "<td>" . $nn[ac] . "</td>";
        echo "<td>" . $nn[type] . "</td>";
        echo "<td>" . $nn[mvalue] . "</td>";
        echo "<td>" . $nn[netraw] . "</td>";
        echo "<td>" . $nn[netfer] . "</td>";
        echo "<td>" . $nn[stat] . "</td>";
        echo "<td>" . $nn[firr] . "</td>";
        echo "<td>" . $nn[acb] . "</td>";
        echo "</tr>";
 }
}
        echo "</table>";
fclose($f);
?> 
```

这是我从上面的代码中得到的。我得到的是第二个和第七个字段中有很多垃圾值。并且精度超过了浮点字段。如何解决这个问题？

> 12/12/1995 d¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 12.229999542236 34.119998931885 90.120002746582 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 12 56.119998931885
> 
> 01/01/1998 a¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 52.229999542236 54.119998931885 10.119999885559 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 92 16.120000839233
> 
> 1999 年 12 月 31 日 a¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 52.229999542236 54.119998931885 10.119999885559 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 92 16.120000839233
> 
> 31/12/1999 d¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 12.229999542236 34.119998931885 90.120002746582 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 12 56.119998931885
> 
> 01/01/2000 a¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 52.229999542236 54.119998931885 10.119999885559 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 92 16.120000839233
> 
> 01/01/2000 z¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 12.229999542236 34.119998931885 90.120002746582 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 12 56.119998931885
> 
> 31/12/2010 a¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 52.229999542236 54.119998931885 10.119999885559 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 92 16.120000839233
> 
> 31/12/2010 d¸³M·g·ew·¤dw·àew·Öúr·ÿÿÿÿ,w·ø;w·Ìª¹¿ô{·{·‹ây·Ð{·SpP·ip·¤dw·ew· €5w·ôOg· X«¹¿»qP·äSg us 12.229999542236 34.119998931885 90.120002746582 费用·5rP· #Ä äSg· rP·ô›Å #Ä 5rP·0#o·¸xw·x«¹¿·ÅÿÿýŽäSg·¸x ·ÆD¬¹¿L¬¹¿5rP·pòy· 12 56.119998931885

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:10:01.443

在 PHP 的`pack`and`unpack`中，格式化代码`a`代表 NUL*填充*字符串。在这种情况下，看起来第二个和第七个字段没有填充 NUL；他们只有 NUL 来指示字符串的结束位置，然后是随机数据。

要在 NUL 之前获取字符串的一部分，您可以使用`substr`and `strpos`：

```
$input = "a\000b"; // string with embedded NUL 
$output = substr($input, 0, strpos($input, "\000"));
var_dump($output); // string(1) "a" 
```

* * *

浮点字段具有正确的值，您在 C 程序的输出中看到的值是四舍五入的。要在 PHP 中执行相同的操作，您可以使用`sprintf`例如：

```
$input = 16.120000839233;
$output = sprintf("%.2f", $input);
var_dump($output); // string(5) "16.12" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:10:32.333

是的，因为您解压的第二个参数是“a128ac”，而手册（http://jp2.php.net/manual/en/function.pack.php）说“a”代表“NUL 填充字符串”，但您可能想要“A”是“空格填充的字符串”。你看到的是垃圾，因为没有正确找到终结器。

# php - json_encode($myObject) 不想透露我的整个对象

> ID：10943731
> 
> 赞同：2
> 
> 时间：2012-06-08T05:56:50.520
> 
> 标签：php, ajax, json

我们的 PHP 应用程序大量使用了 json_encode($myObject) 以及 mustache 模板库。这很棒。

麻烦的是，当从 ajax 请求返回 json 数据时，它揭示了我们对象的整个结构，即使我们没有为它们分配数据。一个简单的例子：

通过 ajax 获取用户并让服务器返回带有 json_encode($user) 的对象

json：

`"_userID":"1","_password":null,"_avatar":"0000723_8949d1d7eb0214fdf6c1af3cb6b66ed3_a.jpg","_blocked":null,"_confirmed":null,"_registerDate":null,"_lastVisitDate":null,"_template":null,"_referrerUserID":null,"_referrerURL":null,"_referrerDomain":null,"_referrerSearchTerms":null,"_confirmationHash":null,"_type":"Administrator"`等等...

当我只想返回几个字段时，它揭示了我们的对象的很多信息。

显然，我可以重写我们的服务器端代码以发送回一个数组或不同的对象，这些对象更受限制，但实际上这使生活变得更加困难，并且有点妨碍我们处理与服务器相同的对象的干净模板设计。

如何清除 json_encode 中的所有空属性。有没有其他人有这个问题和一个好的和干净的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:13:43.287

您可能应该调整您的服务器端代码以忽略空值并仅返回设置的字段（从而避免不必要的带宽使用）。
在您的客户端代码中，我建议您为模板设置一组默认值，并使用默认值扩展它们接收到的 JSON。
我希望您使用 jquery，代码如下所示：

```
var defaults ={someDay:"somePlace"};
var object = $.extend({},defaults,theJson); 
```

**更新**
并为了“清理” php 中的对象，您可以执行以下操作：

```
foreach($obj as $k => $v)
    if($v == null)
        unset($obj[$k]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:18:50.107

根据我在处理对象和 JSON 时的经验，我认为没有一种方法可以不迭代每个值。我总是发现在类中实现一个 _toJson 方法会更好，并且在将其编码为 JSON 之前做所有必要的准备（utf8 编码问题，使用 getter 而不是直接调用变量等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T02:52:07.823

感谢@gion_13，我修改了他的代码并提出了一个完整的解决方案：

```
$output = array('data'=>$data,'template'=>$template);
$output = object_unset_nulls($output);
echo json_encode($output);

function object_unset_nulls($obj)
  {
    $arrObj = is_object($obj) ? get_object_vars($obj) : $obj;
    foreach($arrObj as $key => $val)
    {
      $val = (is_array($val) || is_object($val)) ? object_unset_nulls($val) : $val;
      if (is_array($obj))
        $obj[$key] = $val;
      else
        $obj->$key = $val;
      if($val == null)
        unset($obj->$key);
    }
    return $obj;
  } 
```

# java - 将java项目转换为android phonegap

> ID：10943734
> 
> 赞同：0
> 
> 时间：2012-06-08T05:57:04.500
> 
> 标签：java, android, cordova

我看到了一个关于将 android 转换为 java 项目的问题。现在我想了解将 Java 项目转换为 Android Phonegap。项目。有什么办法吗？我从这个[Convert java project into android project on Eclipse](https://stackoverflow.com/questions/7171327/convert-java-project-into-android-project-on-eclipse)中读到，但是对于第四种方式，创建新的 android 项目并指向现有的 java 源，但在 java 中没有 AndroidManifest.xml。我们想如何创造新的？谢谢

# java - jsoup url，通过链接名获取url

> ID：10943739
> 
> 赞同：0
> 
> 时间：2012-06-08T05:57:40.683
> 
> 标签：java, url, jsoup

我想通过链接名称获取 url。

```
<a href="download.asp?softid=1&amp;downid=2&id=65367" target="_blank">download</a>

<a href="www.baidu.com" target="_blank">ad</a> 
```

所以我想要的是第一个网址，因为链接名称是下载。

我的问题是如何通过链接名称获取 url。

我知道一个完整的解决方案是获取所有元素并使用 if(a.text().contains(download) )。但我想有一个简单的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:53:27.523

使用伪选择器。例如，

```
Document doc = Jsoup.connect(url).get();
Elements a = doc.select("a[href]:contains(download)"); 
```

根据您要完成的具体任务，您可能希望使用 containsOwn 来避免在子元素中进行搜索，或者如果您想使用正则表达式来获取仅包含文本“下载”的元素，请使用 matches/matchesOwn。那个正则表达式是

```
^download$ 
```

请参阅[选择器文档](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T14:44:48.290

好吧，最好的方法是获取所有包含 href 的 < a>，并获取 href 属性。像这样：

```
Document doc = Jsoup.connect("whatever url").get();

Elements a = doc.select("a[href]");

String href;

for (Element elem : a) {
    href = a.attr("href");
} 
```

现在..您想要获得哪些href完全取决于您。但我认为你必须使用

```
.contains(""); 
.endsWith(""); 
.startsWith(""); 
```

哦，也许您可​​以尝试使用 doc 变量中的 getter。

.getElementsByAttributeValue("a[href]", "download");

# jquery - 在 Rails 中发送 ajax 请求时出现 MultiJson::DecodeError

> ID：10943740
> 
> 赞同：4
> 
> 时间：2012-06-08T05:57:44.443
> 
> 标签：jquery, ruby-on-rails, ajax

我有以下代码：

```
$.ajax({
  headers: {'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content'), 'Content-Type': 'application/json; charset=utf-8'},
  url:'/monitoring',
  type:'POST',
  data: {checked:{a:1}},
  dataType: 'json',
  success: function(){
  }
}); 
```

发送此请求时引发以下异常：

**MultiJson::DecodeError**

**'checked%5Ba%5D=1'**处的意外令牌

 **这是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T06:17:51.650

我找到了解决方案。它现在可以工作了（参见 Content-Type）：

```
$.ajax({
  headers: {'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content'), 'Content-Type': 'application/x-www-form-urlencoded'},
  url:'/monitoring',
  type:'POST',
  data: {checked:{a:1}},
  dataType: 'json',
  success: function(){
  }
}); 
```**

# c - Eclipse CDT 附带什么？

> ID：10943742
> 
> 赞同：0
> 
> 时间：2012-06-08T05:58:04.623
> 
> 标签：c, eclipse

这是我目前在家用电脑上安装的：

[http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers-includes-incubating-components/indigosr2](http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers-includes-incubating-components/indigosr2)

现在，安装起来很痛苦，因为您需要使用 Cygwin 安装一堆东西才能​​让 Eclipse 编译和运行 C 项目。前几天我发现了这个：

[http://www.eclipse.org/cdt/](http://www.eclipse.org/cdt/)

Eclipse CDT 是否附带编译和运行 C 程序所需的一切，还是仍然依赖于外部文件？它带有标准库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:57:08.383

您不必使用**Cygwin**，您可以使用诸如**mingw**之类的替代品（对于大多数人来说安装起来更简单）。查看本教程以了解如何在 Windows 上设置的详细说明：
[http ://www.banym.de/eclipse/install-eclipse-cdt-on-windows-7](http://www.banym.de/eclipse/install-eclipse-cdt-on-windows-7)

编译器负责标准库，在上面提到的情况下，它是 mingw。

另一方面，如果您对 MAC OS 安装检查感兴趣：

*   [http://forge.mysql.com/wiki/Eclipse/CDT_on_Linux_and_Mac_OS_X](http://forge.mysql.com/wiki/Eclipse/CDT_on_Linux_and_Mac_OS_X)
*   [http://max.berger.name/howto/cdt/cdt.jsp](http://max.berger.name/howto/cdt/cdt.jsp)

# ruby-on-rails - Rails 3 中缺少部分错误

> ID：10943744
> 
> 赞同：6
> 
> 时间：2012-06-08T05:58:24.130
> 
> 标签：ruby-on-rails

我收到一个错误：

```
Missing partial post/questions, application/questions with
{:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}.
Searched in:* "/Users/..../<project name>/app/views" 
```

我试图将数据库中的所有帖子呈现为`index.html.erb`.

我的观点是`post/index.html.erb`：

```
 <!--html codes -->

    <%= render 'questions' %> 
```

控制器`controller/post_controller.rb`：

```
 def index
       @posts=Post.all
    end

    def questions
    end 
```

`questions.html.erb`

```
 <%=@posts.each do |post| %>
    <table>
        <tr>
            <td>
                <h2>
                    <%=post.title%>
                </h2>
            </td>
        </tr>
        <tr>
            <td>
                <h3><%=post.body%></h3>
            </td>
        </tr>
        <tr>
            <td>
                This Post comes under:<h4><%=post.tag%></h4>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T06:04:11.940

分部的文件名必须以下划线开头。您应该将 _questions.html.erb 保存在 post 文件夹中。此外，您不需要定义“问题”操作。

# python - 在scrapy中运行多个蜘蛛

> ID：10943745
> 
> 赞同：8
> 
> 时间：2012-06-08T05:58:43.920
> 
> 标签：python, scrapy, web-crawler

1.  例如，在scrapy 中，如果我有两个包含不同 HTML 的 URL。现在我想为一个单独编写两个蜘蛛，并希望同时运行两个蜘蛛。在 scrapy 中是否可以一次运行多个蜘蛛。

2.  在编写多个蜘蛛后的scrapy中，我们如何安排它们每6小时运行一次（可能就像cron作业）

我不知道上面，你能建议我如何用一个例子来执行上面的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:36:59.137

从操作系统级别一次运行两个scrapy脚本可能是最简单的。他们都应该能够保存到同一个数据库。创建一个shell脚本来调用两个scrapy脚本同时执行它们：

```
scrapy runspider foo &
scrapy runspider bar 
```

一定要使这个脚本可执行`chmod +x script_name`

要每 6 小时安排一次 cronjob，`crontab -e`请在终端中键入，然后按如下方式编辑文件：

```
* */6 * * * path/to/shell/script_name >> path/to/file.log 
```

第一个 * 是分钟，然后是小时等，星号是通配符。因此，这表示在小时数可被 6 整除的任何时间或每六小时运行一次脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-22T03:14:50.110

您可以尝试使用`CrawlerProcess`

```
from scrapy.utils.project import get_project_settings
from scrapy.crawler import CrawlerProcess

from myproject.spiders import spider1, spider2

1Spider = spider1.1Spider()
2Spider = spider2.2Spider()
process = CrawlerProcess(get_project_settings())
process.crawl(1Spider)
process.crawl(2Spider)
process.start() 
```

如果您想查看抓取的完整日志，请`LOG_FILE`在您的`settings.py`.

```
LOG_FILE = "logs/mylog.log" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T16:43:35.380

您应该使用 scrapyd 来处理多个爬虫 [http://doc.scrapy.org/en/latest/topics/scrapyd.html](http://doc.scrapy.org/en/latest/topics/scrapyd.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-11T23:29:19.450

这里是允许你在 scrapy 中运行多个蜘蛛的代码。将此代码保存在与 scrapy.cfg 相同的目录中（我的 scrapy 版本是 1.3.3，它可以工作）：

```
from scrapy.utils.project import get_project_settings
from scrapy.crawler import CrawlerProcess

setting = get_project_settings()
process = CrawlerProcess(setting)

for spider_name in process.spiders.list():
    print ("Running spider %s" % (spider_name))
    process.crawl(spider_name,query="dvh") #query dvh is custom argument used in your scrapy

process.start() 
```

然后你可以安排这个 python 程序与 cronjob 一起运行。

# iphone - 在 AlertView OK 按钮声明中执行一段代码

> ID：10943747
> 
> 赞同：1
> 
> 时间：2012-06-08T05:58:52.630
> 
> 标签：iphone, objective-c, ios, uialertview

在我的警报视图中，有两个按钮，确定和取消。当用户单击“确定”按钮时，`dismissWithClickedButtonIndex:animated`会调用委托方法，如果索引为 0，则我会调用一个方法来执行一些代码：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" 
                                                    message:@"Are you sure you want to exit"
                                                   delegate:self cancelButtonTitle: @"OK" 

                                          otherButtonTitles: @"Cancel",nil]; 

    [alert show]; 
    [alert release];//release the reference 
```

委托方式：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{

    if (buttonIndex==0) {
        [self aMethod];
    }    
}

-(void)aMethod{

//Some useful code
} 
```

现在，我想要代替所有这些，是`aMethod`直接在 AlertView 中执行方法的代码，而不参考委托方法和被调用的方法，如下所示：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" 
                                                message:@"Are you sure you want to exit"
                                               delegate:self cancelButtonTitle: @"OK" //Put here some useful code

                                      otherButtonTitles: @"Cancel",nil]; 
```

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:03:59.673

不幸的是，目前这是不可能的（iOS 5.1）。AlertView 类不支持块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:22:43.307

我制作了一对`UIAlertView`和`UIActionSheet`子类来做到这一点。在这里抓住它们： [https ://github.com/rydermackay/RMActionSheet](https://github.com/rydermackay/RMActionSheet)

像这样使用它们：

```
RMAlertView *alertView = [RMAlertView alertViewWithTitle:@"Alert!" message:nil];

[alertView addButtonWithTitle:@"OK"
                       action:^{
                           NSLog(@"OK");
                       }];

[alertView addCancelButtonWithTitle:@"Cancel"
                             action:nil];
[alertView show]; 
```

**编辑：**

从您的评论看来，您对区块不熟悉。现在读这个。严重地。 [http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)

这也是一个很好的：http: [//www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html](http://www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html)

# rest - 通过 DDD 应用程序从 REST api 返回域模型是否很好？

> ID：10943758
> 
> 赞同：12
> 
> 时间：2012-06-08T06:00:33.513
> 
> 标签：rest, domain-driven-design

如果您要在 DDD 应用程序之上为 CRUD 设置一个 REST 层，您会让 REST 层吐出域模型（就数据而言）（比如 GET）吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-08T08:02:39.803

通常，您希望能够更改域对象（例如，当您了解有关域的新知识时），而不必更改系统的公共接口/API。反过来也是一样的：如果需要对公共接口进行更改，您不想更改您的域模型。

所以从这个角度来看，我永远不会在公共接口上按原样公开我的域对象。相反，我会创建作为公共接口一部分的数据传输对象 (DTO)。这样，对我的域和公共 api 的更改可以独立更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:45:04.130

您不应该公开 DDD 模型。这是绝对正确的，因为 SOA 前端不应该向客户端公开实现细节。您的用户应该依赖于一个业务功能，而不是一个实现细节……但这假设了一个很好的设计，将几个可能是异构的应用程序联合到一个 SOA 总线中。

我想补充一下答案，因为提到 CRUD 接口让我认为这可能是 SOA 滥用的情况，其中 SOA 原则用于粘合应用程序的各个层，而不是应用程序网络。SOA 是企业沟通其系统的一种方式，而不是一种实现 MVC 的方式！如此简单却又如此被误解。例如，仅仅因为您的前端 GUI 使用服务来访问后端，您就没有“SOA 应用程序”……这意味着什么。

如果这是用于粘合层的 SOA 案例，请修改您的设计并为该抽象级别使用适当的设计架构。否则你会误解这里找到的关于不暴露 DDD 模型和不使用 CRUDY 的建议，你最终肯定会为服务接口创建一个单独的域模型，然后你必须映射到 DDD，这太复杂了你将需要使用推土机之类的东西来映射具有不同名称的同一事物，等等，直到我们最终得到一个臃肿的无法维护的混乱......</p>

..小心点。

-亚历克斯

Redzedi 说的太对了，我们需要澄清一下……

就像所有事情一样，这比说起来要复杂得多。序列化复杂的域模型可能非常困难，以至于您最终要么不将任何逻辑放入域中，即贫血模型反模式 (http://martinfowler.com/bliki/AnemicDomainModel.html)，要么拥有一个单独的贫血模型持久性，即 DTO。

我不知道什么是最糟糕的，但两种选择都很糟糕。您应该将模型中的逻辑放入模型中，并且您应该能够在任何地方直接序列化。

根据我多年使用领域模型的经验，我相信最好的事情是中间的一点。是的，正如 Fowler 和 Evans 所说，业务对象应该带有逻辑，但不是所有（http://codebetter.com/gregyoung/2009/07/15/the-anemic-domain-model-pattern/）都有一点贫血好的服务层是最好的。

例如，一张发票应该知道它的项目，并有一个程序来计算其总额，这取决于项目。但是发票的项目不需要知道发票。那么当一个项目的成本发生变化时，它是否应该有一个指向父发票的指针作为循环引用并调用发票的总计算过程？

我相信不会。我认为这是服务层的任务，它应该首先接收事件然后编排过程，而不必为了实现目的将所有业务对象耦合在一起，也不必违反业务交互规则，而这正是领域模型的用途。

-亚历克斯

# php - 如何从mysql数据库中回显第i行和第n列？

> ID：10943762
> 
> 赞同：2
> 
> 时间：2012-06-08T06:01:17.980
> 
> 标签：php, javascript, mysql, ajax, json

我需要从 mysql 数据库中回显第 4 行第 3 列

```
 $query = 'SELECT * FROM picture LIMIT 10';
    $result = mysql_query($query);
    $row = mysql_fetch_array($result,MYSQL_NUM ); 
```

*   问题 1 > $result 包含什么？MYSQL 中的表格形式？

*   问题 2 > $row 包含什么？只是第一排？

*   问题 3 > 我怎样才能移动到第 4 行？回声 $row[4] 不起作用！?

*   问题 4 > 如何移动到第 4 行第 3 列？

    `echo $row[4][3]`不行！！?

*   问题 5 - 如果我必须将 2 行发送回客户端（假设 ajax 从 php 请求它）

会是php吗

```
 $query = 'SELECT * FROM picture LIMIT 5';
$result = mysql_query($query);
$rec = mysql_fetch_array($result,MYSQL_NUM );

print_r (json_encode($result[0])); 
```

在 html 方面

```
$.ajax({
      url: "viewnew.php",
      data: {
         current_image: imId,
         direction    : dir
      },
      success: function(ret){
          console.log(ret);
          var arr = eval(ret);
          alert("first: " + arr[0] + ", second: " + arr[1]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:03:35.513

你的答案是`echo mysql_result($result, 3, 3)`。您也可以使用`echo mysql_result($result, 3, 'rowname')`. 请注意，由于它是零索引的，因此第四行是#3，因为第一行是#0。

`$result`包含一个 MySQL 查询结果*对象*，您需要使用内置函数来访问它。

`$row`确实只包含第一行的数组。内部指针增加了，所以如果你运行这`$row`行代码两次，`$row`现在将有第二行。一旦你用完了行，那行代码将评估为`false`（这在下面很有用）。

php.net 提供了这段代码：

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    printf("ID: %s  Name: %s", $row[0], $row[1]);  
} 
```

由于 while 语句在行数用完时将评估为 false，因此您将获得所有行。由于您正在进行查询，因此您应该知道如何处理每一行中的相关数据。

关于 AJAX，在服务器端，您需要将行分配给数组变量（如上），然后输出您想要的。由于您知道如何输出它们，因此如何在客户端处理它们取决于您。

`htmlspecialchars()`或`htmlentities()`将使数据安全输出。

示例方法如下：

```
$query = mysql_query(...);
$rows = array();
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    $rows[] = $row; //append row to rows array
}
//Then output the relevant rows 
```

[php.net](http://www.php.net/manual/en/ref.mysql.php)有大量关于如何在 PHP 中使用 MySQL 函数的文档。

另外，不要忘记安全！`mysql_real_escape_string()`在使用用户输入进行查询时几乎总是需要的。

# 32bit-64bit - 使用 64 位和 32 位 JDK

> ID：10943763
> 
> 赞同：3
> 
> 时间：2012-06-08T06:01:19.417
> 
> 标签：32bit-64bit, java, jmf, jdk1.6

我有一个运行 64 位 windows 7 的系统。我正在使用[JMF](http://en.wikipedia.org/wiki/Java_Media_Framework)做一个项目，我发现它在 32 位 jdk 上效果最好（或仅）。我正在使用 32 位日食。我还安装了 64 位 JDK。现在我已经为 32 位 JDK 设置了类路径（JAVA_HOME 和路径）。

问题是在 64 位和 32 位 JDK 之间切换变得很忙（我每次都必须更改类路径）。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T06:06:10.303

您可以在 Eclipse 中注册多个 JRE，并将项目或运行配置与特定 JRE 相关联。这些与用于运行 Eclipse 的 JRE 不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T06:14:05.907

Eclipse 不需要依赖 JAVA_HOME 或 PATH。您可以在 eclipse.ini 文件中指定用于运行 Eclipse 的 JVM，并通过 Eclipse 首选项指定目标 JVM 的路径。

如果您必须从命令行同时运行 32 位和 64 位 Java，您应该花一些时间来编写 shell 脚本、别名等。

*   您可以编写一个脚本（使用“.”执行）来切换 PATH 和 JAVA_HOME 的设置。

*   我更喜欢编写简单的包装脚本或别名来自动化您正在开发的软件的构建或运行步骤的方法。您可以在这些脚本中嵌入 PATH 和 JAVA_HOME 的本地覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:07:53.203

我建议只在你的机器上安装一个 JDK。

如果您使用 JMF 和 Eclipse 32 位，请卸载 64 位 JDK

根据甲骨文。

![在此处输入图像描述](../Images/b2540efbf5a1fb0aa0c3c74b6c01e3ef.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T04:14:19.030

在不更改环境变量的情况下运行 64 位 eclipse

只需将 64 位 jre 复制到 eclipse（64 位）根文件夹并将其重命名为 jre。

# jquery - Jqmobile 中的数据转换和数据 ajax 一起使用

> ID：10943770
> 
> 赞同：1
> 
> 时间：2012-06-08T06:02:00.567
> 
> 标签：jquery, jquery-mobile, transitions

在我的 Jqmobile 代码中，我试图通过申请`data-transition="slide"`锚链接来传输页面。问题是链接页面有我自己编码的自定义 jquery ......当我用 data-transition="slide" 和 href 击中锚点时它肯定会过境，但链接页面自定义 jquery 脚本不运行...我尝试使用`data-ajax-"false"`但在这种情况下自定义脚本运行但不是`data-transition="slide"`...我希望两者一起运行...有可能...？？

这是简单的自定义，在此我显示/隐藏输入框..

```
<script type="text/javascript">
$(document).bind("pageinit", function(){
      $('#near_index').hide();
      $('#find').click(function() {
             $('#near_index').show();       
      });
    });
</script> 
```

这是HTML，

```
<a href="category.html" data-transition="slide" data-ajax-"false"><img src="images/23-bird.png" alt="Category 2" class="ui-li-icon iconSmall">Category 2</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:23:28.490

**pageinit**用于插件初始化 - 请参见[此处](http://jquerymobile.com/test/docs/api/events.html)。

所以这个事件只会在 JQM 首次加载时触发一次。在你的“页面”（DOM）被初始化之后。您加载的任何其他页面都将被拉入 DOM，但不会触发另一个*pageinit*。

只需使用任何其他可用事件（上面的链接），例如**pagebeforeshow**或**pageshow**。这些将随着加载到 DOM 中的每个页面而触发。只需在事件处理程序中放置一个 console.log("HELLO") 并查看它是否触发。

**编辑**转换：
您不能设置 data-ajax="false" 并进行转换（从页面 A 滑动到页面 B），因为转换是使用 AJAX 将新页面加载到 DOM 与常规链接的结果（ data-ajax="false") 删除旧 DOM 并加载新页面（新 DOM）。

JQM 的概念是始终保持在同一个“页面”中，并且只通过 Ajax 加载/加载新页面。这就是您可以进行转换的方式（加载新页面，将其放在旧页面旁边，然后滑动）。

这也可能是您的自定义代码没有触发的原因，因为如果您说**data-ajax="false"**您是在告诉 JQM“我在这里完成了”，并加载一个新页面。

如果您不需要 data-ajax="false"，请忽略它。

# c++ - Mystring.h:26：错误：预期的类型说明符

> ID：10943773
> 
> 赞同：0
> 
> 时间：2012-06-08T06:02:39.937
> 
> 标签：c++

我正在修改给我的代码以允许抛出异常。问题是声明似乎不接受错误，将异常类型作为有效类。

代码如下：

```
// Interface for a simple String class to encapsulate a C character string

#ifndef _MYSTRING_H_
#define _MYSTRING_H_

#include <string.h>
#include <iostream>
#include <stdexcept>
using namespace std;

class MyString {
public:
    // Constructors and destructor
    MyString(const char * = ""); // Create from C string
    MyString(const MyString &); // Copy constructor
    ~MyString() { delete [] sdata; }

    // Assignment
    MyString & operator = (const MyString &);
    MyString & operator = (const char *);

    MyString & operator += (const MyString &);
    MyString & operator += (const char &);

    // Character access
    char & operator [] (int i) throw(MyString::Error);
    char operator [] (int i) const throw(MyString::Error){
        return (i < 0 || i >= len) ? '\0' : sdata[i];
    }

    // Substrings
    MyString operator () (unsigned int start, unsigned int count) const throw(MyString::Error);

    // Concatenation
    MyString operator + (const MyString &) const;
    MyString operator + (const char &) const;

    // Cast to c string
    operator const char * () const { return sdata; }

    // Query methods
    unsigned int length() const { return len; }

    class Error: public exception{
        public:
            //ERROR CODES
            static const int SUBSTRING_ERR = 0;
            static const int INDEX_ERR  = 1;
            static const int ALLOC_ERR  = 2;

            int errorCode;
            int leftIndex;
            int count;
            int size;

            Error(int errCode){ //Alloc error
                errorCode = errCode;
            }
            Error(int errCode, int left, int len){ //Index error
                errorCode = errCode;
                leftIndex   = left;
                size        = len;
            }
            Error(int errCode, int left,int substrCount, int len){ //Substring error
                errorCode = errCode;
                leftIndex   = left;
                size        = len;
                count = substrCount;
            }

    };

private:
    char * sdata;           // Storage for the characters
    unsigned int len;       // Current length

    // Private constructor for pre-allocation
    MyString(const char *, unsigned int);  
};

inline ostream & operator << (ostream & o, const MyString & s) {
    return o << (const char *) s;
}

inline bool operator == (const MyString  & lhs, const MyString & rhs) {
    return (::strcmp(lhs, rhs) == 0) ? true : false;
}

inline bool operator != (const MyString  & lhs, const MyString & rhs) {
    return (lhs == rhs) ? false : true;
}

inline bool operator < (const MyString  & lhs, const MyString & rhs) {
    return (::strcmp(lhs, rhs) < 0) ? true : false;
}

inline bool operator >= (const MyString  & lhs, const MyString & rhs) {
    return (lhs < rhs) ? false : true;
}

inline bool operator > (const MyString  & lhs, const MyString & rhs) {
    return (::strcmp(lhs, rhs) > 0) ? true : false;
}

inline bool operator <= (const MyString  & lhs, const MyString & rhs) {
    return (lhs > rhs) ? false : true;
}

inline ostream & operator << (ostream & o, const MyString::Error & s) {
    return o << "NOM"; //TODO
}

#endif 
```

这是完整的错误消息：

/Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:26：错误：预期类型说明符/Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:26：错误：预期`)' /Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:26: error: expected ‘;’ /Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:27: error: expected type-specifier /Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:27: error: expected`）'/Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:27：错误：预期';' /Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:32：错误：预期`;' before ‘MyString’ /Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:32: error: expected type-specifier /Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330/6/Mystring.h:32: error: expected`）'/Users/alexanderstein/Documents/School/2011-2012/Term 3/CIS 330 /6/Mystring.h:32: 错误：预期';'</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:12:54.883

您需要在`MyString::Error`使用该类之前声明它：

```
class MyString {
 public:
  // constructors, assignment operators, increment operators as before

  class Error: public std::exception{ ... }

  // Character access and methods using MyString::Error
  char & operator [] (int i) throw(MyString::Error);
  char operator [] (int i) const throw(MyString::Error){ ... }

}; 
```

我强烈建议不要`using namespace std`在头文件中使用任何其他名称空间。此外，在 C++11 中不鼓励和弃用异常规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:12:47.160

我相信它是`operator[]`- 单个令牌，而不是`operator []`- 两个令牌。其他地方也一样。

# ruby-on-rails - 创建用户后如何更改重定向路径？

> ID：10943774
> 
> 赞同：0
> 
> 时间：2012-06-08T06:02:43.503
> 
> 标签：ruby-on-rails, authentication, redirect, devise

在我的应用程序中，我不允许用户注册并让它由唯一的管理员用户管理，因为该应用程序仅供一小部分人使用。

当我现在创建一个用户时。我被定向到我创建的用户正在自动登录，并且我被重定向到主页，并带有一条感谢我登录的 Flash 消息。

这是不对的，当我创建一个以上的用户时出现问题，因为我收到一个错误，告诉我我已经登录。

这是我的 user.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :username, :password, :password_confirmation, :remember_me
end 
```

我的 users_controller.rb

```
class UsersController < ApplicationController
  # GET /users
  # GET /users.xml
  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @users }
    end
  end

  # GET /users/1
  # GET /users/1.xml
  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @user }
    end
  end

  # GET /users/new
  # GET /users/new.xml
  def new
    @user = User.new
    @current_method = "new"

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @user }
    end
  end

  # GET /users/1/edit
  def edit
    @user = User.find(params[:id])
  end

  # POST /users
  # POST /users.xml
  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to(@user, :notice => 'User was successfully created.') }
        format.xml  { render :xml => @user, :status => :created, :location => @user }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
      end
    end
  end

  # PUT /users/1
  # PUT /users/1.xml
  def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to(@user, :notice => 'User was successfully updated.') }
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
      end
    end
  end

  # DELETE /users/1
  # DELETE /users/1.xml
  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_to do |format|
      format.html { redirect_to(users_url) }
      format.xml  { head :ok }
    end
  end
end 
```

我的路线

```
DocumentManager::Application.routes.draw do

  devise_for :users

  get "index/index"
  devise_for :users, :controllers => {:sessions => 'sessions'}
  resources :clients, :jobs, :users

end 
```

谁能指出我正确的方向或知道如何获得我正在寻找的功能？

就像我说的。我需要重定向返回到用户创建屏幕，用户不会自动登录，并且 Flash 消息是不同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:05:47.347

发生这种情况是因为您使用的是设计注册控制器，该控制器会在用户注册后登录。此外，您没有禁用注册模块，因此每个人都可以创建一个访问`/users/sign_up`.

为了做你想做的事，这样做：

1.  移除`registerable`模块；
2.  通过 a 将用户控制器的访问权限限制为仅限管理员`before_filter`；
3.  删除`devise_for`您的路线之一；
4.  使用用户控制器创建您的用户；

您也可以设置一个随机密码，并要求用户在登录后生成首次密码发送编辑密码链接。

# jquery - 20 秒后使用图像横幅淡化图像部分

> ID：10943780
> 
> 赞同：0
> 
> 时间：2012-06-08T06:03:26.390
> 
> 标签：jquery, html, css, slideshow, fade

我在 20 秒后使用淡入和淡出旋转了背景图像。图像在左上角包含徽标，在右侧从上到下包含人物图像现在问题是图像应该使用fadeIn和fadeOut旋转，但左上角的徽标不应该有fadeIn和fadeOut的效果（不应该有效果变化）。

所以我的问题是如何只淡化一个背景图像的一部分，而其他部分不应该淡化（或不看）

## 我当前的工作 jQuery 代码

```
 $("DIV#background IMG").eq(0).fadeIn(1000, function(){
        setTimeout("changeBackground(0)",20000);
    });

    changeBackground = function (i){
        curr_index = i;
        //alert(curr_index);
        nex_index = ((i + 1) > 3 ) ? 0 : i + 1;
        //alert(nex_index); 
        $("DIV#background IMG").fadeOut(1000)
        $("DIV#background IMG").eq(nex_index).fadeIn(1000, function(){
            setTimeout("changeBackground(nex_index)",20000);
        });
    } 
```

**注意：**上面的代码是正确的并且工作成功

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:11:51.657

添加 jQuery 插件[jquery-rotate](http://code.google.com/p/jquery-rotate/)。然后你可以使用：

```
.rotate(angle,[whence=relative])
.rotateLeft([angle=90])
.rotateRight([angle=90]) 
```

在您的代码中：

```
$("DIV#background IMG").fadeOut(1000).rotateRight([angle=360]) 
```

`;`此外，您的代码在第二行末尾缺少 a 。

如果您的概念与`rotate`Banner **Rotater**中的一样，那么这就是代码。

```
$("DIV#background IMG").fadeOut(1000).attr('src', 'newimage.png').fadeIn(1000); 
```

或者更好地将时间作为变量，以便您可以在幻灯片之间随时更改：

```
var time = 500; // Keeping it 500 because of 500 (fadeIn) + 500 (fadeOut) = 1000!
$("DIV#background IMG").fadeOut(time).attr('src', 'newimage.png').fadeIn(time); 
```

# 完整代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Banner Rotate</title>
        <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
        <script type="text/javascript">
            function changeBG()
            {
                var d = new Date();
                $(".background img").fadeOut(500).attr('src', 'http://lorempixel.com/100/100/?' + d.getMilliseconds()).fadeIn(500);
            }
            $(document).ready(function(){
                setInterval('changeBG()', 1500);
            });
        </script>
    </head>
    <body>
        <div class="background">
            <img src="http://lorempixel.com/100/100/" alt="" />
        </div>
        <a href="#" onclick="changeBG(); return false;">Change</a>
    </body>
</html> 
```

希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:56:24.767

有一个用于循环图像的 jquery 插件。[jQuery 循环](http://jquery.malsup.com/cycle/)。将所有图像放在同一个容器元素中并调用`cycle()`它。

该插件将一个图像直接淡化到另一个图像之上，因此如果图像的徽标部分始终保持在同一位置，您将不会注意到它正在淡化。

另一个想法是将您的徽标放在单独的（透明 .png）图像中，并将其样式`position:absolute`设置在旋转图像顶部的正确位置。

# java - 从命令行执行 jar 中的 java 按钮

> ID：10943784
> 
> 赞同：0
> 
> 时间：2012-06-08T06:03:51.533
> 
> 标签：java, button, jar, cmd, void

我有一个 jar，我只想从该程序中获取输出。当我们执行 jar 时，将打开一个窗口，该窗口中有三个按钮。我需要单击第二个按钮，单击该按钮后，它将打开一个新窗口，我需要单击另一个打开文件对话框的按钮，我们需要选择一个文件，然后单击打开。那就是程序将产生输出。但是，我希望它在不打开程序 jar 界面的情况下执行它，只需使用命令行

```
java -cp test.jar click_button1 click_button2(file.txt) 
```

所以用户不需要看界面，程序只是在后台运行。

请提供建议和帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:38:05.617

你的问题很难理解。

但是，如果您正在寻找一种从 Java 向命令行发送命令的方法，您可以使用 Java 中的 Runtime：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#getRuntime%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#getRuntime%28%29)

```
Runtime cmd = Runtime.getRuntime();
cmd.exec("java -cp test.jar click_button1 click_button2(file.txt)"); 
```

# android - Android 如何在 ImageView 中显示 54 张卡片图像中的 1 张

> ID：10943790
> 
> 赞同：1
> 
> 时间：2012-06-08T06:04:12.923
> 
> 标签：android

我试图找出在`ImageView`. 我想我可以从资产中加载位图。但我不知道如何调整它的大小。当它从`XML`文件中加载它时，它会从 3 个不同的位图中选择 1 个，每个位图的大小都不同。

我不知道如何确定要使用的位图大小。我知道如何获取视图的宽度和高度，但不是整个屏幕。有没有办法获得屏幕分辨率？

所以我知道如何设置 a 的位图属性`ImageView`，但我找不到任何用于缩放的东西。有没有办法对其进行缩放，或者我需要一个针对不同屏幕尺寸的单独位图？

这看起来应该很简单，但是变成了非常复杂的东西，

有没有办法获得屏幕分辨率？我可以缩放`ImageView`显示的位图吗？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:39:04.437

您在这里有很多问题，我不清楚您实际上要做什么，但是您最后提出的问题的答案是：

> “有没有办法得到屏幕分辨率？”

当然...

```
getWindowManager().getDefaultDisplay().getWidth()
getWindowManager().getDefaultDisplay().getHeight() 
```

> “我可以缩放 ImageView 显示的位图吗？”

ImageView 只是一个容器，因此如果您设置它的宽度和高度，然后将位图加载到其中，它们将缩放到该宽度和高度。

如果您将其 layout_width 和 layout_height 设置为 to`wrap_content`而不是特定尺寸，那么它将符合图像的任何尺寸（并随着加载不同的位图而增长和缩小）。如果您担心不同的屏幕，您需要将图像放入不同的文件夹（具有相同的名称），用于不同的分辨率设备，根据此处的文档：http: [//developer.android.com/guide/practices/screens_support .html](http://developer.android.com/guide/practices/screens_support.html)

位图可以以任何您喜欢的方式手动缩放，也可以使用矩阵进行缩放。这有点复杂，因此，在您澄清您的答案并表达对此的实际需求之前，我不会冒险给出示例。

# makefile - 如何为我的服务器制作 deb 包？

> ID：10943791
> 
> 赞同：0
> 
> 时间：2012-06-08T06:04:15.017
> 
> 标签：makefile, installation, package, deb

我为我的桌面安装了 Ubuntu (12.04 LTS)，并且我有两台运行 Ubuntu (11.04 LTS) 的 VPS 服务器。我使用 fcgi 在这些服务器上运行 PHP，但我想升级到最新版本的 PHP (5.4.3) 并包含我需要直接烘焙的模块。恰好常规`./configure`脚本恰好包含所有我需要的东西。所以从这里开始，我想制作一个可以在我的两台 VPS 服务器上使用的 deb 包，这样我就可以使用`apt-get install php`. 我必须做些什么才能让这种情况发生？

我将从我拥有的桌面安装（Ubuntu 12.04 LTS）中制作软件包，并通过 ftp 或设置午餐垫帐户将它们分发到我的服务器。桌面是库存安装，我添加的唯一额外的东西是 lib2xml-dev 以便我可以编译 php。服务器也是裸机，只运行 10 个进程，包括 nginx 和 php-cgi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:56:44.683

从 Debian 测试下载并[构建源代码包；](http://www.crazysquirrel.com/computing/debian/build-from-source.jspx)他们目前[似乎在 PHP 5.4.4 上](http://packages.qa.debian.org/p/php5.html)。（不过，您可能需要添加一些反向端口等。）设置[您自己的存储库](http://wiki.debian.org/HowToSetupADebianRepository)并将其添加到`/etc/apt/sources.list.d`服务器上。您可能需要在 11.04 机器上进行构建，以便能够在 11.04 上安装（或使用版本依赖项来玩技巧）。

# sql - 如何在查询中使用like和

> ID：10943793
> 
> 赞同：0
> 
> 时间：2012-06-08T06:04:20.990
> 
> 标签：sql, oracle, oracle10g

> **可能重复：**
> [SQL 中是否有“LIKE”和“IN”的组合？](https://stackoverflow.com/questions/3014940/is-there-a-combination-of-like-and-in-in-sql)

我们可以像这样在同一个查询中使用like和in条件吗

```
 select inticap(last_name),length(last_name) from employees
    where last_name in(like '%J%',like '%A%',like '%M%');

OR 

  select inticap(last_name),length(last_name) from employees
where last_name like in( '%J%', '%A%',l'%M%'); 
```

我知道这行不通。在这里，我想显示姓氏大写的首字母和姓氏的长度，我想用字母“A”、“J”和“M”显示姓名。请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:09:02.347

```
 select inticap(last_name),length(last_name) from employees
where last_name like '%J%' OR last_name like '%A%' OR last_name '%M%'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T13:48:33.620

正如已经提到的，您不能直接组合`LIKE`，并且`IN`如您所愿。

这是一个笨拙的选择：

```
SELECT INITCAP(last_name)
,      LENGTH(last_name)
FROM   employees
WHERE  +1 IN (SIGN(INSTR(last_name,'J'))
          ,   SIGN(INSTR(last_name,'A'))
          ,   SIGN(INSTR(last_name,'M'))) 
```

或者，如果您至少使用 10g，则可以使用正则表达式：

```
SELECT INITCAP(last_name)
,      LENGTH(last_name)
FROM   employees
WHERE  REGEXP_LIKE(last_name,'(J|A|M)') 
```

...但一般来说，正则表达式比普通 SQL 函数更占用 CPU。

# c# - 使用 LINQ 计算用户统计信息

> ID：10943797
> 
> 赞同：1
> 
> 时间：2012-06-08T06:04:33.223
> 
> 标签：c#, sql, linq

我的用户活动日志如下所示：

ID、用户名、日期

我需要计算每天的条目总数，以及过去 10 天当天最活跃的用户。

```
//pseudo code
from entry in data.UserLogs
group by entry.Date == each day
select username of most active user, count(Id) 
```

我是 LINQ 和 SQL 的新手，有人可以帮我完成这个查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:54:57.793

我想这就是你所追求的。只需将其放入 LINQPad 即可查看它的运行情况

```
void Main()
{
    var logs = new List<UserLog>
        {
            new UserLog { Id= 1, Date = new DateTime(2012,1,1), Username = "cburgdorf"},
            new UserLog { Id= 2, Date = new DateTime(2012,1,1), Username = "cburgdorf"},
            new UserLog { Id= 3, Date = new DateTime(2012,1,1), Username = "cburgdorf"},
            new UserLog { Id= 4, Date = new DateTime(2012,1,1), Username = "Mister Foo"},
            new UserLog { Id= 5, Date = new DateTime(2012,1,1), Username = "Mister Foo"},
            new UserLog { Id= 6, Date = new DateTime(2012,1,2), Username = "Mister Bar"},
            new UserLog { Id= 7, Date = new DateTime(2012,1,2), Username = "Mister Bar"},
            new UserLog { Id= 8, Date = new DateTime(2012,1,2), Username = "cburgdorf"},
            new UserLog { Id= 9, Date = new DateTime(2012,1,2), Username = "Mister Foo"},
            new UserLog { Id= 10, Date = new DateTime(2012,1,2), Username = "Mister Foo"},
            new UserLog { Id= 11, Date = new DateTime(2012,1,2), Username = "Mister Foo"},
            new UserLog { Id= 12, Date = new DateTime(2012,1,2), Username = "Mister Bar"}
        };

    logs
        .OrderByDescending (l => l.Date)
        .GroupBy (log => log.Date)      
        .Select (log => log
                        .GroupBy (l => l.Username)
                        .Select (l => new 
                        {
                            Count = l.Count (),
                            Value = l.FirstOrDefault (),
                        })
                        .OrderBy (l => l.Count).Last ())
        .Select (log => new 
        {
            Date = log.Value.Date,
            Count = log.Count,
            Username = log.Value.Username
        })
        .Take(10)
        .Dump();

        //In LINQPad use Dump() to see the results:
        /*
            logs
                .OrderByDescending (l => l.Date)
                .GroupBy (log => log.Date)      
                .Select (log => log
                                .GroupBy (l => l.Username)
                                .Select (l => new 
                                {
                                    Count = l.Count (),
                                    Value = l.FirstOrDefault (),
                                })
                                .OrderBy (l => l.Count).Last ())
                .Select (log => new 
                {
                    Date = log.Value.Date,
                    Count = log.Count,
                    Username = log.Value.Username
                })
                .Take(10)
                .Dump();
        */

}

class UserLog
{
    public int Id {get;set;}
    public DateTime Date {get;set;}
    public string Username {get;set;}
}

The result is:

    02.01.2012 00:00:00 | 3 | Mister Foo 
    01.01.2012 00:00:00 | 3 | cburgdorf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:36:08.530

这应该行得通。这将选择最近 10 天内排名最高的用户。

```
var query =
   (from userLog in data.UserLogs
    group userLog.UserName by userLog.Date.Date into usersPerDate
    orderby usersPerDate.Key descending
    let topUsers =
        from user in usersPerDate
        group 1 by user into g
        let count = g.Count()
        orderby count descending
        select new
        {
            UserName = g.Key,
            Count = count,
        }
    select topUsers.First()).Take(10); 
```

# php - 将 PDF 文件从 php 服务器发送到 android

> ID：10943801
> 
> 赞同：1
> 
> 时间：2012-06-08T06:04:59.150
> 
> 标签：php, android

我在 PHP 服务器上创建了一个 pdf 文档，我想将文件发送到 android 设备，然后让 android 查看文件。任何人都可以帮助我编写 PHP 和 android 中的代码吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:07:59.337

看看这个[问题](https://stackoverflow.com/questions/9334090/failed-to-save-image-to-sdcard/9334437#9334437)

改变

```
String url = "http://farm1.static.flickr.com/114/298125983_0e4bf66782_b.jpg"; 
```

到

```
String url = "http://farm1.static.flickr.com/114/yourfile.pdf"; 
```

也请改变

```
OutputStream output = new FileOutputStream(Path+"some_photo_from_gdansk_poland.jpg");//obj 
```

到

```
OutputStream output = new FileOutputStream(Path+"yourfilename.pdf");//obj 
```

它有效，谢谢

# iphone - 使用 RabbitMQ 的链接器命令失败，退出代码为 1（使用 -v 查看调用）

> ID：10943808
> 
> 赞同：4
> 
> 时间：2012-06-08T06:05:40.490
> 
> 标签：iphone, rabbitmq

我正在`RabbitMQ`使用`AMQP classes`. 我正在尝试与`AMQP`with打开连接

```
AMQPConnection *t=[[AMQPConnection alloc]init];
[t connectToHost:@"localhost" onPort:5672];
[t release]; 
```

但是我在使用这段代码后遇到了这种错误。我已经从[这里](https://github.com/profmaad/librabbitmq-objc)`AMQP`下载了课程

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_AMQPConnection", referenced from:
      objc-class-ref in HomePageController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谢谢。

**解决方案：**

我得到了上面的解决方案。**我已将 AMQP 类的所有 .m 文件添加到编译器源代码中，它对我有用。**

# javascript - 将click绑定到dom中添加的元素，导致触发元素执行

> ID：10943809
> 
> 赞同：1
> 
> 时间：2012-06-08T06:05:48.057
> 
> 标签：javascript, jquery

我在将元素添加到 dom 时将其与 click 函数绑定。我的问题是，如果我添加让我们说 3 个元素，然后我单击其中的任何一个，它会执行该功能 3 次。是什么让它触发了这 3 次，这可以通过其他方式完成吗？

让我在这里用一个 jsfiddle[演示来说明它](http://jsfiddle.net/Pcy2E/1/)

html

```
<div id="breadcrumb"><a href="#" id="start" class="click-me">Start</a></div>
<a href="#" id="add_to_breadcrumb">Add to breadcrumb</a>​ 
```

jQuery

```
$('#add_to_breadcrumb').on('click', function(){
    $('#breadcrumb').append('<a href="#" class="click-me">' + $('#breadcrumb > a').size() + '</a>', bindClick());

});

function bindClick(){
    $(document).on('click', '.click-me', function(){
        alert($(this).text());        
    });        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:10:50.890

试试这个：

```
$('#add_to_breadcrumb').on('click', function() {
    $('#breadcrumb').append('<a href="#" class="click-me">' + $('#breadcrumb > a').size() + '</a>');
});

$(document).on('click', '.click-me', function() {
    alert($(this).text());
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/Pcy2E/2/)**

每个追加的绑定`click`事件，导致每次追加一次又一次地绑定到每个元素。

# android - 如何在 android 模拟器中为印度地区语言设置自定义语言环境

> ID：10943811
> 
> 赞同：9
> 
> 时间：2012-06-08T06:06:02.130
> 
> 标签：android, localization, android-emulator, locale

我想将我的模拟器语言环境设置为印度区域语言（如泰米尔语、加拿大语或泰卢固语）的一些自定义语言环境。任何人请提供建议，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T06:45:16.150

您必须下载您的语言字体文件 (.ttf)。之后，在您的项目资产文件夹中导入字体文件创建文件夹字体并将您的字体文件（.ttf）粘贴到文件夹字体。按照以下链接中的说明进行堆栈溢出后：

[英文单词之间的Android泰米尔语字体](https://stackoverflow.com/questions/10635516/android-tamil-font-between-english-word)

（或者）

参考这个文件

[http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html)

所有语言的iso代码链接如下

[http://www.w3.org/WAI/ER/IG/ert/iso639.htm](http://www.w3.org/WAI/ER/IG/ert/iso639.htm)

欢迎...！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T14:19:56.030

我的错没有清楚地理解下面给出的 android 文档链接 [http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

为他人着想，

创建和使用自定义语言环境供开发人员在 android 模拟器中测试本地化应用程序。有两种方法可以创建自定义语言环境以了解更多信息，请参见上面的链接。

```
* Use the Custom Locale application, which is accessible from the Application tab. (After you create a custom locale, switch to it by pressing and holding the locale name.) In my case I given te_IN for telugu(Indian) locale. 
* Change to a custom locale from the adb shell 
```

我只是通过检查设备中的自定义语言环境应用程序感到困惑。

此外，目前除了印地语（其代码为 hi_IN，在 Android 4.0.3 中也是如此）之外，印度区域语言没有默认的语言环境支持。因此，即使我们将自定义语言环境设置为泰卢固语印度语即 te_IN，Android 系统也不会识别泰卢固语字体。对此有何建议？我想要这个在 Android 2.2 版本上。

# push-notification - UrbanAirship - 管理页面中“允许从设备推送”的设置在哪里？

> ID：10943812
> 
> 赞同：0
> 
> 时间：2012-06-08T06:06:04.853
> 
> 标签：push-notification, apple-push-notifications, urbanairship.com

我阅读了有关如何“允许从设备推送 [通知]”的[urbanairship 文档，并在文档中说应该有一个选项可以这样做。](https://urbanairship.com/docs/push_index.html#allow-push-from-device)但是，当我在我的应用程序的管理页面中时。我看不到那个选项。我看到我可以编辑：应用程序名称、应用程序图标、类别、启用丰富推送、推送通知支持、Apple 推送证书、证书密码、推送调试模式、BlackBerry 的东西...、Android 的东西。

“允许从设备推送”选项在哪里？我在看正确的管理页面吗？文档过期了吗？

非常感谢您的任何帮助或指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:38:33.357

[在他们的支持页面](https://support.urbanairship.com/customer/portal/questions/369452-allow-push-from-device)上找到了这个答案：

> 感谢您与我们联系。我们对系统进行了更改，对于创建的任何新应用程序，该选项将不再可用。如果您向我们发送电子邮件至 support@urbanairship.com，并附上您的应用密钥和原始请求，我们可以为您开启此功能。

# c# - Protobuf Net 和从二进制文件存储/检索数据块

> ID：10943817
> 
> 赞同：1
> 
> 时间：2012-06-08T06:06:26.357
> 
> 标签：c#, collections, stream, protocol-buffers, protobuf-net

我想弄清楚是否可以使用 protobuf-net 来存储和检索以下序列化数据结构：

我每天有大约 200,000 个大小为 16 字节的对象（该对象包含一个 long 和两个浮点类型值，8 字节加上 2 * 4 字节），我喜欢将它们存储在二进制文件中。此类对象的检索将仅按一整天进行，例如，我想请求 2012 年 4 月 1 日至 2012 年 4 月 6 日之间的对象，这些对象应该从 4 月 1 日开始读取，然后是 4 月 2 日，... 4 月 6 日。一个要求是访问需要是随机的，这意味着，该文件可能包含从 2010 年到 2012 年 6 月的数据，但我可能只想检索 2012 年 4 月 1 日到 4 月 6 日之间的元素，而不必从一开始就读取所有元素。

我目前以 DateTimeTick 的顺序将数据存储为连续的字节数组，但不考虑新的一天何时开始或结束。如果我可以使用 protbuf-net 将数据作为 IEnumerable 的全天“blob”流式传输，那就太棒了。那可能吗？我正在考虑为使用 protobuf-net 序列化的每一天存储一个 IEnumerable 或 List，但不知道以后如何随机访问特定列表？有什么想法或建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:15:28.110

这不是 protobuf-net 的*典型*用例，虽然我怀疑这样*使用它*是可能的，但尝试这样做并不是我的本能。如果关键要求是按天拆分，那么使用多个文件将是一个明显的选择。或者，调整您现有的文件格式以包括（每天）日期戳和当天数据的大小 - 然后您可以使用`FileStream`'`.Position`属性在一整天内向前跳过。

protobuf-net*确实*具有流式处理和跳过 API，或者如果您不想涉及核心序列化程序，则可以使用原始的“阅读器”API，但是：我不确定这是否会对您有*很大*帮助。

坦率地说，由于（在您当前的过程中）每个块都是固定大小的，您还可以使用二进制搜索（也许使用线性插值作为凝视位置）来寻找正确的时间。

# javascript - Javascript中的自调用函数

> ID：10943823
> 
> 赞同：4
> 
> 时间：2012-06-08T06:07:03.130
> 
> 标签：javascript

这里有两个功能。

1) 使用“新”对象创建。

```
(
  function se(){
    var a=10;

    var t = function (){
        var that=this;
        alert(a);
        that.book= function (){
            alert(that);
        }
        that.book();
    }
    return new t();
  }()
); 
```

2) 使用对象字面量方式

```
(
    function se(){
        var a=10;
        var f={
            init:function(){
                alert(a);
            }
        }                   
        f.init();
    }()
); 
```

那么使用的最佳实践是什么？为什么？在第一个示例中使用“this”的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:14:54.070

这里的多个事物之间存在一些混淆。

您可能想阅读以下内容：

*   关闭，
*   JavaScript 中的作用域，
*   和基于原型的继承。

# mysql - 错误 1 (HY000): 无法在 windows server 2008 上创建/写入文件

> ID：10943825
> 
> 赞同：0
> 
> 时间：2012-06-08T06:07:15.420
> 
> 标签：mysql, window

我正在使用 mysql 5.1.34 和 windows server 2008，当我尝试使用 mysql 中映射网络驱动器上的程序输出 csv 时，它显示此错误（错误 1（HY000）：无法在 windows 服务器上创建/写入文件2008），但相同的程序正在本地磁盘上运行。我必须在 mysql 配置文件中进行任何设置吗？导出映射网络驱动器上的文件。

通过使用 etl 工具，我可以将文件导出到同一驱动器上。

我在 Windows 和 mysql 上都拥有所有必需的权限。

谢谢... Jagtap 简历

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T18:10:44.907

Windows 上的映射驱动器是按会话进行的。当您运行此 MySQL 命令时，它会在 MySQL 服务器进程中执行。MySQL 服务器进程在与您的登录名不同的会话（可能作为`LOCAL SERVICE`用户）中运行，因此它无法访问您的驱动器映射 - 因此出现错误。

如您所见，最简单的解决方法是使用不同的工具来执行磁盘 I/O 客户端（在您的用户会话中）。也可以通过使用 UNC 路径（例如`\\server\share\folder\file.ext`）而不是驱动器号来做到这一点 - 但前提是 MySQL 服务器进程作为文件服务器信任的用户运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T06:12:02.420

这是一个 Windows 权限问题。

MySQL 可能作为不同的本地用户（可能不是域用户）运行，该用户在映射驱动器上没有权限。当您运行导出实用程序时，它会使用您的凭据运行并且具有写入权限。

# scala - “val a:A = new B”，有什么意义？

> ID：10943826
> 
> 赞同：5
> 
> 时间：2012-06-08T06:07:33.343
> 
> 标签：scala, types, type-inference

这个成语（？）在楼梯书中出现了很多次：

```
val b:A = new B 
```

或者

```
val b = new B
val b2:A = b 
```

除了试图在教科书中提出一些观点之外，为什么要声明与推断类型不同的类型？

顺便问一下，这个有什么名字吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T06:36:21.627

它可用于：

1.  描述程序员的意图（*我创建了一个 B，但我只对 A 行为感兴趣*）
2.  确保您将仅使用 A 中定义的方法。它将允许稍后交换具体实现，而无需更改大部分代码。
3.  简化使用 IDE 或 REPL 时可用的自动完成列表。
4.  在某个时候强制进行隐式转换。

对于更复杂的实例化，它确保推断的类型是正确的。例如

```
sealed trait Answer
case object Yes extends Answer
case object No extends Answer

scala> val a = List( Yes, Yes, No )
a: List[Product with Serializable with Answer] = List(Yes, Yes, No)

scala> val b: List[Answer] = List( Yes, Yes, No )
b: List[Answer] = List(Yes, Yes, No) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-08T06:09:42.363

我认为它类似于针对接口编程的习惯用法。通过做

```
val b:A = new B 
```

你确保在那之后你不依赖任何其他的东西，而不是`A`. 即，它保证如果你决定改变`b:A = new C`什么都不会破坏。

# ssl - ARM 上基于 libpurple 的连接尝试出现错误“SSL 对等体提供了无效证书”

> ID：10943829
> 
> 赞同：1
> 
> 时间：2012-06-08T06:07:56.233
> 
> 标签：ssl, certificate, libpurple

我正在使用 libpurple (libpurple.com) 开发聊天应用程序。在 x86 处理器（桌面）上一切正常

但是，相同的代码在 ARM（iMx Freescale）处理器上运行时显示错误：

登录时出现“ **SSL 对等方提供了无效证书**”。

我正在使用 Ubuntu 操作系统。就像在 x86 机器中一样，所有包似乎都适用于 ARM 处理器。（包括 gnutls 开发包）

任何线索将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:40:17.103

**因此，我已将问题发布到 pidgin 邮件列表：**

> 大家好，我正在使用 libpurple (package-1:2.10.0-0ubuntu2) 来开发聊天应用程序。在 x86 处理器上一切正常（桌面 - Ubuntu 11.10）
> 
> 但是，相同的聊天应用程序（交叉编译后）在 ARM（基于 Ubuntu 11.10 的 iMx Freescale）处理器上运行时显示错误：
> 
> 登录时“SSL 对等方提供了无效证书”。
> 
> --1-- ARM 目标的所有包似乎都存在，就像在 x86 机器中一样。（包括 gnutls 开发包，如 FAQ [http://developer.pidgin.im/wiki/Installing%20Pidgin#IhaveOpenSSLwhyisntPidginusingit](http://developer.pidgin.im/wiki/Installing%20Pidgin#IhaveOpenSSLwhyisntPidginusingit)中所述）。
> 
> --2-- 我已经安装了 ca-certificates 包（将其更新为 Ubuntu 11.10 的 Ubuntu 存储库中的最新包），使用：'apt-get install ca-certificates'。
> 
> --3-- 还尝试将“~/.purple/certificates/x509/tls_peers/”的内容从正常工作的 x86 机器复制到目标系统。
> 
> 在这些之后，SSL 错误仍然存​​在。解决此问题的任何帮助将不胜感激。谢谢和问候， 罗伊

**和某个回复帖子写道：**

> -----原始消息----- 发件人：Mark -----er [mailto:ma--@-----nt.net] 发送时间：2012 年 6 月 11 日星期一晚上 8:42 至: Roy Samuel (RB--/---4) 抄送：support@pi​​dgin.im 主题：回复：错误：SSL 对等方提供了无效证书 | 在 ARM-ubuntu-11.10 上运行
> 
> 您可以尝试通过使用“pidgin -d”运行以显示大量调试输出来找出 Pidgin 认为证书无效的原因（我有点惊讶您看到的错误消息并没有说明为什么它无效） . 我能想到的两个最可能的原因是您的 ARM 计算机上的时钟错误，或者 Pidgin 仍然找不到 CA 证书。

**将目标 ARM 板上的日期更改为当前日期，错误已解决！**

# c# - 获取局域网服务器/pc的列表、启动/停止进程

> ID：10943835
> 
> 赞同：0
> 
> 时间：2012-06-08T06:08:42.300
> 
> 标签：c#, asp.net, .net, lan

我的局域网中有多台 PC 和服务器。现在我想构建一个 ASP.NET 或 Windows 窗体应用程序来控制所有服务器和 PC 的运行进程。

有没有办法获取远程服务器/PC的运行进程列表？有没有办法以同样的方式启动/停止进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:22:17.470

首先，您不能编写 ASP.NET Windows 窗体应用程序。您可以选择 Windows 应用程序或 ASP.NET Web 应用程序。在这种情况下，它是 Windows 应用程序。你可以通过两种方法做到这一点，

1.  在所有客户端机器上运行的某些程序将收集进程信息到服务器应用程序。

2.  使用 WMI，使用 Win32_Process 类。

如果您有运行 Windows 操作系统的客户端，我建议使用 WMI 方法。

# android - 如果 ArrayList 包含不起作用

> ID：10943836
> 
> 赞同：0
> 
> 时间：2012-06-08T06:08:44.390
> 
> 标签：android

我正在开发具有大量 ArraYlists 的应用程序，它需要将它们与非列表数据进行比较。当我尝试这种方法`fdata.contains(data2)`时，它总是返回 false。ArayLists 包含名为“favdat”的类，如下所示：`

```
public class favdat {
    public String product,term,note,link;
} 
```

Data2 的定义是这样的：`favdat Data2=new favdat();` 我也尝试过保留所有方法，它返回大小为 0 的列表。我知道有些数据是相等的。

所以问题是我怎么知道是否`fdata`包含`data2`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T06:16:50.680

比较对象的默认实现是比较它们是否是同一个对象，因此具有完全相同属性的两个对象仍然不相等。您需要做的是覆盖*hashCode*和*equals*方法。举个例子：

```
public int hashCode() {
    return product.hashCode() * 31 + term.hashCode();
}

public boolean equals(Object o) {
    if (o instanceof favdata) {
         favdata other = (favdata) o;
         return product.equals(other.product) 
             && term.equals(other.term) 
             && note.equals(other.note) 
             && link.equals(other.link);
    } else {
        return false;
    }
} 
```

在 java 中，类名通常以大写字母开头，所以它是*Favdat*，并且您的代码通常更容易阅读以保持字段声明分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:15:11.983

您需要定义一个`equals(Object obj)`内部调用的方法，该方法`favdat`将启用对象比较。

这里有一个更详细的方法：

*   [比较Java中的对象](http://en.wikibooks.org/wiki/Java_Programming/Comparing_Objects)
*   SO中的相关线程，谈论[如何`ArrayList.contains()`工作](https://stackoverflow.com/questions/2642589/how-does-a-java-arraylist-contains-method-evaluate-objects)。

# php - PBKDF2 推荐的密钥大小？

> ID：10943837
> 
> 赞同：3
> 
> 时间：2012-06-08T06:08:47.230
> 
> 标签：php, mysql, security, sha, pbkdf2

我的功能如下：

```
pbkdf2($raw_pw,$salt,1000,128) 
```

1000 是通过次数，128 是密钥大小。该函数返回一个二进制密钥，我使用 base64 将其存储在数据库中。

我的问题是：使用 sha512 的 pbkdf2 的推荐密钥大小和盐大小是多少？

密钥大小为 32 是否与密钥大小为 128 一样安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T08:02:25.440

1000 是迭代次数，而不是通过次数。128 是末尾的长度。

根据[维基百科](http://en.wikipedia.org/wiki/PBKDF2)（以及我自己对密码学的一点了解），您应该使用超过 128 位（或您要求的 32 位）。结果密钥的大小等于哈希冲突的机会。使用 256（如 WPA2 那样）或 512 应该不是问题，对于您的 CPU/内存/其他任何东西也不是问题。

与 pbkdf2 的其他集成相比，1000 也是非常少量的迭代。您可以轻松使用 5000 或 10000（如 iOS4），这可能会导致处理时间增加 10 毫秒，但会产生更强大的密钥（请参阅：可能的攻击者还必须运行 10k 次迭代。这可能会改变他需要的时间1 天到 10 天，或 1 个月到将近 1 年）。

# php - 我想学习如何在 php 中使用不同的散列、加密/解密算法

> ID：10943839
> 
> 赞同：0
> 
> 时间：2012-06-08T06:09:03.813
> 
> 标签：php, encryption, hash

我有一组要加密的示例字符串，对于密码，我想要对其进行哈希处理。（我进行了一些在线研究，但我对他们如何实现它有点不知所措/困惑）

我对 Web 开发的安全性相当陌生，我目前是一名学生，我想学习如何创建安全的 Web 应用程序。（如果您能展示我如何使用我的代码实现散列和加密，那就太好了*。blowfish,sha256,md5*）

```
$salt = "308lk;f9vm.h-!@";

$user = "billgates@hotmail.com";

$password = "ra89232_11";
$name = "Microsoft";
$address = "Redmond, Seattle"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:20:41.450

为了节省您的一些辛苦工作，我建议您使用已经建立的库来执行此操作。例如[phpass](http://www.openwall.com/phpass/ "通行证")或[PHP-PasswordLib](https://github.com/ircmaxell/PHP-PasswordLib "PHP-密码库")

我不会详细介绍更多细节，但我只是向您推荐一些类似的问题以及涵盖您的问题的可能重复项。

[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

[PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

[这是一种安全的方法吗，哎呀](https://stackoverflow.com/questions/10557440/is-this-a-secure-method-oop)（第一部分）

**加密：** [使用 PHP 加密和解密密码的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)

# java - 在服务于 Socket 连接的两个线程之间共享公共数据

> ID：10943841
> 
> 赞同：6
> 
> 时间：2012-06-08T06:09:10.120
> 
> 标签：java, multithreading, sockets

我在 SO 上看到了很多类似的问题，但图片中几乎没有`Socket`。所以请花点时间阅读这个问题。

我有`ServerSocket`侦听请求的服务器应用程序（使用），当客户端尝试连接时，会创建新线程来为客户端提供服务（并且服务器返回到新请求的侦听模式）。现在，我需要根据其他客户端发送到服务器的内容来响应一个客户端。

**例子：**

*   ServerSocket 监听传入连接。
*   客户端 A 连接，创建新线程为 A 服务。
*   客户端 B 连接，创建新线程为 B 服务。
*   A 向服务器发送消息“Hello from A”。
*   将此消息作为响应发送给客户端 B。

我对整个“线程间通信”这件事很陌生。显然，上面提到的情况听起来很简单，但我描述这个是为了得到一个提示，因为我将在客户端之间交换大量数据，保持服务器为中间。

另外，如果我想将**共享对象限制为 10 个特定的 Clients**怎么办？这样，当第 11 个客户端连接到服务器时，我创建了新的共享对象，该对象将用于在第 11、12、13 ......最多 20 个客户端之间交换数据。以此类推，每组 10 个客户。

**我尝试了什么：（**我猜是愚蠢的）

*   我有一个`public`类，该对象应该共享为`public static`，因此我可以将它用作全局而不实例化它，例如`MyGlobalClass.SharedMsg`.
*   那行不通，我无法将一个线程中收到的数据发送到另一个线程。

我知道有一个明显的锁定问题，因为如果一个线程正在写入一个对象，那么在第一个线程完成写入之前，其他线程无法访问它。

那么解决这个问题的理想方法是什么？

## 更新

由于我创建线程来服务传入连接请求的方式，我无法理解如何在线程之间共享相同的对象，因为使用上面提到的全局对象不起作用。

以下是我如何监听传入连接并动态创建服务线程。

```
// Method of server class
public void startServer()
{
    if (!isRunning)
    {
        try
        {
            isRunning = true;
            while (isRunning)
            {
                try
                {
                    new ClientHandler(mysocketserver.accept()).start();
                }
                catch (SocketTimeoutException ex)
                {
                    //nothing to perform here, go back again to listening.
                }
                catch (SocketException ex)
                {
                    //Not to handle, since I'll stop the server using SocketServer's close() method, and its going to throw SocketException anyway.
                }
            }
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
    }
    else
        System.out.println("Server Already Started!");
} 
```

和`ClientHandler`班级。

```
public class ClientHandler extends Thread
{
    private Socket client = null;
    private ObjectInputStream in = null;
    private ObjectOutputStream out = null;

    public ClientHandler(Socket client)
    {
        super("ClientHandler");
        this.client = client;
    }

    //This run() is common for every Client that connects, and that's where the problem is.
    public void run()
    {
        try
        {
            in = new ObjectInputStream(client.getInputStream());
            out = new ObjectOutputStream(client.getOutputStream());

            //Message received from this thread.
            String msg = in.readObject().toString();
            System.out.println("Client @ "+ client.getInetAddress().getHostAddress() +" Says : "+msg);

            //Response to this client.
            out.writeObject("Message Received");

            out.close();
            in.close();
            client.close();
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

我相信我创建动态线程来为每个连接的客户端提供服务的方式，使用全局对象共享相同的数据源是不可能的，因为`run()`上面的主体对于每个连接的客户端都是完全相同的，因此同样的方法是消费者和生产者。我应该进行哪些修复，以便我可以为每个连接创建动态线程并仍然共享同一个对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T06:17:56.283

您可能需要一个队列用于每个客户端之间的通信。每个队列将是从一个客户端推送到另一个客户端的数据的“管道”。

你会像这样使用它（伪代码）：

```
Thread 1:
Receive request from Client A, with message for Client B
Put message on back of concurrent Queue A2B
Respond to Client A.

Thread 2:
Receive request from Client B.
Pop message from front of Queue A2B
Respond to Client B with message. 
```

您可能还希望它是通用的，因此您有一个 AllToB 队列，许多客户端（因此也有许多线程）可以写入。

注意类：[ConcurrentLinkedQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)，[ArrayBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html)。

如果您想限制消息的数量，那么 ArrayBlockingQueue 及其容量构造函数允许您执行此操作。如果您不需要阻塞功能，可以使用方法`offer`and`poll`而不是`put`and `take`。

我不会担心共享队列，这会使问题变得更加复杂。仅当您知道需要解决内存使用问题时才执行此操作。

**编辑：**根据您的更新：

如果您需要在所有动态创建的实例之间共享一个实例，您可以：

1.  制作一个静态实例。
2.  将其传递给构造函数。

示例 1：

```
public class ClientHandler extends Thread
{
  public static final Map<ClientHandler, BlockingQueue<String>> messageQueues 
    = new ConcurrentHashMap<>();

  <snip>

  public ClientHandler(Socket client)
  {
    super("ClientHandler");
    this.client = client;
    // Note: Bad practice to reference 'this' in a constructor.
    // This can throw an error based on what the put method does.
    // As such, if you are to do this, put it at the end of the method.
    messageQueues.put(this, new ArrayBlockingQueue<>());
  }

  // You can now access this in the run() method like so:
  // Get messages for the current client.
  // messageQueues.get(this).poll();
  // Send messages to the thread for another client.
  // messageQueues.get(someClient).offer(message); 
```

几点注意事项：

*   messageQueues 对象实际上应该包含某种客户端标识符，而不是短暂的对象引用。
*   更可测试的设计会将 messageQueues 对象传递给构造函数以允许模拟。
*   我可能会建议为地图使用包装类，因此您只需使用 2 个参数调用 offer，而不必担心地图语义。

# android - 如何在 Android 的一个图像视图中插入 2 个图像每 5 秒切换一次图像

> ID：10943843
> 
> 赞同：-1
> 
> 时间：2012-06-08T06:09:26.827
> 
> 标签：android, android-imageview

我想在 Android 中创建一个横幅，在一个 ImageView 中有两个不同的图像，每 5 秒图像应该一个接一个地交替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:19:52.963

使用2个imageviews，并将图像设置为该imageview，默认情况下使imageview2在5秒后消失，使imagevew1消失，imageview2为可见，反之亦然，每5秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:30:08.707

像这样创建一个自定义[视图](http://developer.android.com/reference/android/view/View.html)：

```
public static class MyBannerView extends View
{
   private int width;
   private int height;
   private Bitmap bitmap;

public RenderView(Context context)
    {
        super(context);
        init();
    }

public RenderView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        init();
    }
    public RenderView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init()
    {
        //anything you might need here
    }

    //This method is called when the View changes size like on rotation
    protected void onSizeChanged (int w, int h, int oldw, int oldh) 
    {

    width = w; //this will let you keep track of width and height should you need it.
    height = h;

    }

    protected void updateMyBanner(Bitmap b)
    {
     bitmap = b;
     invalidate(); // This will force your view to redraw itself;
    }

    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);       
            //there are four different methods for drawBitmap pick the one that
            // suites your needs the best
            canvas.drawBitmap(params which will include bitmap) 

        }

} 
```

现在您以某种方式将此视图放置在您的布局中，您将每 5 秒或其他任何时间使用您的位图调用 updateMyBanner(Bitmap b)。你可以创建一个[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来处理这个，或者你可以使用一个[Handler](http://developer.android.com/reference/android/os/Handler.html)对象并创建一个[Runnable](http://developer.android.com/reference/java/lang/Runnable.html)来调用它。

重要的是要记住，您只能通过主活动线程来触摸 UI，因此如果您选择为此使用线程，则需要在主线程上使用[Handler](http://developer.android.com/reference/android/os/Handler.html)来实际执行更新。

# compression - 在服务器上启用压缩

> ID：10943849
> 
> 赞同：0
> 
> 时间：2012-06-08T06:10:23.047
> 
> 标签：compression, gzip, deflate

我正在谷歌上运行页面速度测试，它告诉我需要在我的服务器上启用压缩。

您能否提供有关如何在我的服务器上启用压缩的信息？

谢谢。

# jquery - jquery ui 多日期选择器数据范围没有周末

> ID：10943850
> 
> 赞同：8
> 
> 时间：2012-06-08T06:10:41.270
> 
> 标签：jquery, jquery-ui, date, range, jquery-ui-datepicker

我正在使用这个[多日期选择器](http://multidatespickr.sourceforge.net/#simple-select-days-range-demo)。是否可以使用不选择周末的日期范围模式？

我已经完成了多日期选择器，其中周末被阻止，用户只能选择 5 天，但这不是我的目标。我想要这个功能：当用户点击特定日期时，将突出显示范围内的五天而没有周末...

我的代码如下：

```
jQuery('#deliverydate').multiDatesPicker({
   minDate:0,
   beforeShowDay: noWeekendsOrHolidays,
   mode: 'daysRangeWithoutWeekends', 
   autoselectRange: [0,5],
   numberOfMonths: 2            
}); 
```

现在我离我自己的解决方案很近了：

如果几天范围内有周末，我计算所有必须启用的天数和所有必须选择的新天数。

我在 multidatepicker.js daysRangeWithoutWeekends 中添加了我的新方法，我计算了所有新的和禁用的天数。然后我使用两个 foreach 循环来禁用和启用新日期：

```
$.each(all_removed_dates, function(index, value) { 
    methods.removeDates.call(obj, value);
});

$.each(all_new_dates, function(index, value) { 
     methods.addDates.call(obj,value);
}); 
```

值是日期对象。第一个 foreach 循环完美运行并删除了所有突出显示的周末，但第二个循环不起作用。它返回我错误：

```
Empty array of dates received. 
```

你知道为什么吗？

对于所有你不明白我的目标是什么： ![没有周末的 multidatepicker 范围](../Images/de7f093cd392728309d0a4f967316b45.png)

如果我点击 21.6.2012 日期 21.6., 22.6., 25.6., 26.6., 27.6\. 我必须在没有周末的范围内选择 5 天。必须选择。

使用上面的代码，我设法在周末删除突出显示的课程，但不知道为什么第二个循环（看我的代码上面）没有突出显示 26.6.2012 和 27.6.2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:24:13.683

首先，这不是通用的解决方案。我没有时间寻求通用解决方案。我的解决方案是，如果您必须在没有周末的情况下选择 5 天。

在 jquery-ui.multidatepicker.js 中 onSelect 方法（cca.81 行）添加：

```
if(this.multiDatesPicker.mode == 'daysRangeWithoutWeekends'  && this.multiDatesPicker.dates.picked.length > 0){
      var i = 0,
      last

      if(this.multiDatesPicker.dates.picked[0].getDay() == 2){  //thusday
           i = 1
           //remove sunday
           all_removed_dates.push(this.multiDatesPicker.dates.picked[4])
      } 
      if(this.multiDatesPicker.dates.picked[0].getDay() == 3){//wednesday
           i = 2 
           //remove sunday and saturday 
           all_removed_dates.push(this.multiDatesPicker.dates.picked[3],                      this.multiDatesPicker.dates.picked[4])
      }
      if(this.multiDatesPicker.dates.picked[0].getDay() == 4){ //thursday
           i=2
           all_removed_dates.push(this.multiDatesPicker.dates.picked[2], this.multiDatesPicker.dates.picked[3])                                   
      }  
      if(this.multiDatesPicker.dates.picked[0].getDay() == 5){ //friday
           i=2
           all_removed_dates.push(this.multiDatesPicker.dates.picked[1], this.multiDatesPicker.dates.picked[2])                                   
      } 

      last = this.multiDatesPicker.dates.picked.pop()
      this.multiDatesPicker.dates.picked.push(last)

      if(this.multiDatesPicker.dates.picked[0].getDay() == 2){ //thusday
            //if we have thusday we add 2 day after last day so last day in range was saturday and we add 2 day and we get date for monday
            var new_date = new Date(last.getFullYear(), last.getMonth(), last.getDate() + 2)
            all_new_dates.push(new_date)
      }else{
          //if there were sunday and saturday in range we add 2 days to last date in range
          for(var j = 1; j <= i; j++){
                var new_date = new Date(last.getFullYear(), last.getMonth(), last.getDate() + j)
                all_new_dates.push(new_date)
          }
      }

      var obj = this
      //remove sunday and saturday 
      $.each(all_removed_dates, function(index, value) { 
          methods.removeDates.call(obj, value);
      });
      //add new days                                  
      $.each(all_new_dates, function(index, value) { 
          methods.add_new_date.call(obj,value);
      });                             
} 
```

在 jquery-ui.multidatepicker.js 中的 toogleDate 方法（cca。431 行）中，在 case 'daysRange' 之前添加：

```
case 'daysRangeWithoutWeekends': 
```

在 jquery-ui.multidatepicker.js 中的 setMode(cca.473row) 之前 case 'daysRange' 添加：

```
case 'daysRangeWithoutWeekends': 
```

砑光机初始化：

```
jQuery('#deliverydate').multiDatesPicker({
   minDate:0,
   beforeShowDay: noWeekendsOrHolidays,
   mode: 'daysRangeWithoutWeekends', 
   autoselectRange: [0,5],
   numberOfMonths: 2            
}); 
```

如果有人制作通用算法，请分享它=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:57:27.093

也许只是循环并修改数组内容会起作用吗？

```
if (this.multiDatesPicker.mode === 'daysRangeWithoutWeekends' && this.multiDatesPicker.dates.picked.length > 0) {
    var i = 0,
        saturdayFound = false,
        sundayFound = false;
    for (i = 0; i < this.multiDatesPicker.dates.picked.length; i += 1) {
        if (this.multiDatesPicker.dates.picked[i].getDay() === 6) {
            this.multiDatesPicker.dates.picked[i] = this.multiDatesPicker.dates.picked[i].addDays(2); //make it Monday
            saturdayFound = true;
        }
        if (this.multiDatesPicker.dates.picked[i].getDay() === 0) {
            this.multiDatesPicker.dates.picked[i] = this.multiDatesPicker.dates.picked[i].addDays(1); //make it Monday
            sundayFound = true;
        }
        if (saturdayFound || sundayFound) {
            //weekend exists before this element in the array
            if ((this.multiDatesPicker.dates.picked[i].getDay() > 0) || (this.multiDatesPicker.dates.picked[i].getDay() < 6)) {
                //weekday found following weekend
                if (saturdayFound) {
                    this.multiDatesPicker.dates.picked[i] = this.multiDatesPicker.dates.picked[i].addDays(1); //add a day to offset for Saturday
                }
                if (sundayFound) {
                    this.multiDatesPicker.dates.picked[i] = this.multiDatesPicker.dates.picked[i].addDays(1); //add a day to offset for Sunday
                }
            }
        }
    }
    all_new_dates = this.multiDatesPicker.dates.picked;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:03:27.193

你为什么不试试这个

```
methods.addDates.call(obj,all_new_dates); 
```

而不是这个

```
$.each(all_new_dates, function(index, value) { 
     methods.addDates.call(obj,value);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T05:37:07.210

使用以下代码更改 daysRange 大小写

案例“天数范围”：

```
this.multiDatesPicker.dates[type] = []; // deletes all picked/disabled 
var end = this.multiDatesPicker.autoselectRange[1];
var begin = this.multiDatesPicker.autoselectRange[0];
if(end < begin) { // switch
    end = this.multiDatesPicker.autoselectRange[0];
    begin = this.multiDatesPicker.autoselectRange[1];
}

var i1=begin;
var i2=begin;
while(i1<end){
    var tep= new Date(methods.sumDays(date, i2));
    if(tep.getDay()!=0 && tep.getDay()!=6){
        methods.addDates.call(this, methods.sumDays(date, i2), type);
        i1++;
    }
    i2++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-23T08:45:47.990

仅在星期日禁用：添加选项 beforeShowDay: noWeekendsOrHolidays

```
function noWeekendsOrHolidays(date) {
    DateRemove = date.getFullYear()+'-'+date.getMonth()+'-'+date.getDate();
    if (date.getDay() == 0) { // remove dimanche
        return [false, ''];
    } else {
        return [true, ''];
    }
} 
```

如果您在控制台中有错误：错误：收到的空日期数组。在 jquery-ui.multidatepicker.js 中寻找“addDates：函数（日期，类型）”并添加返回 true；

```
addDates : function( dates, type ) {
            if(dates.length > 0) {
                if(!type) type = 'picked';
                switch(typeof dates) {
                    case 'object':
                    case 'array':
                        if(dates.length) {
                            for(var i = 0; i < dates.length; i++)
                                addDate.call(this, dates[i], type, true);
                            sortDates.call(this, type);
                            break;
                        } // else does the same as 'string'
                    case 'string':
                    case 'number':
                        addDate.call(this, dates, type);
                        break;
                    default: 
                        $.error('Date format "'+ typeof dates +'" not allowed on jQuery.multiDatesPicker');
                }
                //$(this).datepicker('refresh');
            } else {
                return true; // ADD THIS ONE
                $.error('Empty array of dates received.');
            }
        }, 
```

# sql-server - SSRS 2008 R2 - Excel 输出未格式化为页面大小

> ID：10943853
> 
> 赞同：4
> 
> 时间：2012-06-08T06:10:53.703
> 
> 标签：sql-server, excel, reporting-services, formatting, ssrs-2008-r2

我有一批报告设置为在 A4 页面上很好地横向打印。但是当我将默认格式设置为 Excel 时，生成的电子表格在不更改打印设置的情况下打印时比 A4 页面宽，因此它当然会被分解为多页（即：每页宽 2 页而不是大于 1)

我们的大多数用户只想在通过电子邮件到达后立即打印这些（但他们仍然需要 Excel 格式，以便他们可以重新排序、剪切和粘贴等），所以我怎样才能让 Excel 保持报告中定义的打印格式在 SSRS 中，这样用户就不必搞乱打印设置了吗？（这些是每日报告，所以这让我们的用户发疯，因为他们中的一些人可能会收到 4 或 5 份报告！）

我是否必须使用 Excel 模板（甚至可以这样做吗？）还是有办法通过 SSRS 实现我想要的？

TIA 的任何帮助....

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:54:00.040

**简短的回答是，你不能完全用 Excel 渲染器做你想做的事**。想到的一些解决方法：

*   用数据填充 Excel 模板可能是一种选择，但更多的是*SSIS*的工作，而不是报告服务。
*   以 PDF 格式发送报告以供打印，如果需要，也可以在 Excel 中发送。
*   重新布局报表，使其与 Excel 的默认打印效果很好。这不会很漂亮，您需要使列更小（并且可能使用 WritingMode 属性旋转标题）或以某种方式将列转换为行组。
*   （黑客警告！）为您的用户创建一个 Excel 宏或类似的东西，它可以进行一些打印快速修复。

**一些背景**
不幸的是，SSRS 只能让您对报表在各种呈现扩展中的呈现方式进行少量控制。有[这个关于渲染扩展的 MSDN 页面](http://msdn.microsoft.com/en-us/library/ee210530.aspx#RenderingExtensions)（另外强调我的）有一些有用的信息：

> *   **软分页渲染器**：软分页渲染器维护报表布局和格式。生成的文件**针对基于屏幕的查看和交付进行了优化**，例如在网页上。可用的软分页呈现器有：**Microsoft Excel**、Microsoft Word、Web 存档 (MHTML) 和 HTML。
>     
>     
> *   **硬分页渲染器**：硬分页渲染器维护报表布局和格式。生成的文件**针对一致的打印体验进行了优化**，或者以书本格式在线查看报告。支持可用的硬分页渲染器： TIFF 和**PDF**。

因此，如果您想优化打印体验，您可能应该使用 PDF 导出。然后，您可以调整页面大小和边距以在页面上容纳尽可能多的信息，并让客户端程序（可能是 Adob​​e Reader）担心打印得很好。

# iphone - 将 NSMutableArray 保存到 plist

> ID：10943855
> 
> 赞同：0
> 
> 时间：2012-06-08T06:11:10.540
> 
> 标签：iphone, objective-c, ios, serialization

我正在尝试将数据保存到 plist 中。我有一个`NSObject`有六个`NSString`变量的类，我将对象存储在`NSMutableArray`. 如何将其存储`NSMutableArray`到 plist 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:14:34.707

你有两个选择（也许更多，但这是我想到的两个）：

1.  [`NSPropertyListSerialization`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)

2.  `NSArray`的方法，[`– writeToFile:atomically`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/writeToFile%3aatomically%3a)：

您还可以在您的类中编写一个方法来保存和读取这些数据，因为它都是`NSString`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:22:16.630

您可以使用存档/取消存档来执行此操作。看看[这个](http://samsoff.es/posts/archiving-objective-c-objects-with-nscoding)。

# jar - 如何创建像jar一样的liferay补丁

> ID：10943856
> 
> 赞同：1
> 
> 时间：2012-06-08T06:11:14.840
> 
> 标签：jar, liferay

众所周知，为了修改 Liferay 的核心类（不能使用钩子改变的类），我们通常创建 EXT 环境。

由于 EXT 相当复杂，我认为创建一个包含修改后的类的 jar 将是一个不错的选择（Liferay 在为任何错误提供补丁时也是如此）。

任何人都可以为我提供创建像 jar 一样的 Liferay 补丁的确切步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:40:22.660

由于 Liferay 6.0 只有 ext 插件 - 我发现它们比旧的 EXT 环境更容易处理。您使用的是哪个版本？

“支持”的方式是 ext，您添加到应用程序服务器的任何其他内容很可能取决于您的应用程序服务器加载类的方式：例如，如果您添加应该在核心类之前加载的 jar，您可能需要命名该 jar就像 aaaa-something.jar 在一个上，zzzz-something.jar 在另一个上（形象地）。此外，根据平台的不同，大小写可能很重要。

我相信无论如何，你会发现 ext 不仅仅是丢一个罐子，但它解决了一个相当复杂的问题。我的建议：使用这个对你有利。

而且，可能最重要的是：只要有可能改变钩子中的某些行为：就这样做！它们的侵入性要小得多。如果您的分机经常更改并且相当大，那么您将使迁移变得更加困难。保持尽可能小。

# python - Python：更详细地按日期时间对文件进行排序

> ID：10943858
> 
> 赞同：3
> 
> 时间：2012-06-08T06:11:35.790
> 
> 标签：python, ubuntu, python-2.7

我在 ubuntu 中使用 python 2.7。我如何以更详细的顺序对文件进行排序，因为我有一个脚本可以在几秒钟内创建成 txt 苍蝇的数量。我有一个脚本，它可以找到最旧和最年轻的文件，但它似乎只是与第二个而不是毫秒比较。

我的打印输出：

```
output_04.txt                     06/08/12 12:00:18
output_05.txt                     06/08/12 12:00:18

-----------
oldest: output_05.txt    
youngest: output_05.txt
----------- 
```

但最旧文件的正确顺序应该是“output_04.txt”。有专业知道吗？谢谢！

**更新**：谢谢大家。我确实尝试了所有代码，但似乎没有我需要的输出。对不起，伙计们，我确实很感谢你们。但是我上面的文件示例具有相同的时间，所以如果完整日期、小时、分钟、秒都相同，则必须以毫秒为单位进行比较。不是吗？如我错了请纠正我。感谢大家！干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:47:00.267

可以`os.path.getmtime(path_to_file)`用来获取文件的修改时间。

对文件列表进行排序的一种方法是创建它们的列表`os.listdir`并获取每个文件的修改时间。您将有一个元组列表，您可以按元组的第二个元素（即修改时间）对其进行排序。

您还可以检查`os.path.getmtime`with的分辨率`os.stat_float_times()`。如果后者返回 True 然后`os.path.getmtime`返回一个浮点数（这表明您的分辨率超过秒数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:14:37.657

```
def get_files(path):
    import os
    if os.path.exists(path):
        os.chdir(path)
        files = (os.listdir(path))
        items = {}
        def get_file_details(f):
            return {f:os.path.getmtime(f)}
        results = [get_file_details(f) for f in files]
        for result in results:
            for key, value in result.items():
                items[key] = value
    return items

v = sorted(get_files(path), key=r.get) 
```

`get_files`接受`path`作为参数，如果`path`存在，则将当前目录更改为路径并生成文件列表。`get_file_details`产生文件的最后修改时间。

`get_files`返回一个以文件名为键、修改时间为值的字典。然后使用标准`sorted`对值进行排序。`reverse`参数可以传递给升序或降序排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T18:07:01.783

您无法比较毫秒数，因为没有此类信息。

stat(2) 调用返回三个 time_t 字段： - 访问时间 - 创建时间 - 最后修改时间

time_t 是一个整数，表示自 1970 年 1 月 1 日 00:00 UTC 以来经过的秒数（不是毫秒）。

因此，您可以在文件时间中拥有的最大细节是秒。我不知道某些文件系统是否提供了更高的分辨率，但是您必须在 C 中使用特定的调用，然后在 Python 中编写包装器才能使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T06:54:06.817

嗨试试下面的代码

```
# retrieve the file information from a selected folder
# sort the files by last modified date/time and display in order newest file first
# tested with Python24    vegaseat    21jan2006
import os, glob, time
# use a folder you have ...
root = 'D:\\Zz1\\Cartoons\\' # one specific folder
#root = 'D:\\Zz1\\*'          # all the subfolders too
date_file_list = []
for folder in glob.glob(root):
    print "folder =", folder
    # select the type of file, for instance *.jpg or all files *.*
    for file in glob.glob(folder + '/*.*'):
        # retrieves the stats for the current file as a tuple
        # (mode, ino, dev, nlink, uid, gid, size, atime, mtime, ctime)
        # the tuple element mtime at index 8 is the last-modified-date
        stats = os.stat(file)
        # create tuple (year yyyy, month(1-12), day(1-31), hour(0-23), minute(0-59), second(0-59),
        # weekday(0-6, 0 is monday), Julian day(1-366), daylight flag(-1,0 or 1)) from seconds since epoch
        # note:  this tuple can be sorted properly by date and time
        lastmod_date = time.localtime(stats[8])
        #print image_file, lastmod_date   # test
        # create list of tuples ready for sorting by date
        date_file_tuple = lastmod_date, file
        date_file_list.append(date_file_tuple)

#print date_file_list  # test
date_file_list.sort()
date_file_list.reverse()  # newest mod date now first
print "%-40s %s" % ("filename:", "last modified:")
for file in date_file_list:
    # extract just the filename
    folder, file_name = os.path.split(file[1])
    # convert date tuple to MM/DD/YYYY HH:MM:SS format
    file_date = time.strftime("%m/%d/%y %H:%M:%S", file[0])
    print "%-40s %s" % (file_name, file_date) 
```

希望这会有所帮助

谢谢你

# html - 控制器中的刷新功能

> ID：10943860
> 
> 赞同：0
> 
> 时间：2012-06-08T06:11:44.343
> 
> 标签：html, ruby-on-rails, debugging, controller

我在使用 Rails 项目时遇到问题。当我按下刷新按钮时，服务器会打印出以下消息：

2012 年 6 月 7 日星期四 22:54:19 -0700 开始为 127.0.0.1 获取“/assets?action=select_refresh&controller=home&id=1”

ActionController::RoutingError (没有路由匹配 [GET] "/assets"): config/initializers/quiet_assets.rb:7:in `call'

渲染 /Library/Ruby/Gems/1.8/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/routing_error.erb 在 rescues/la yout (1.2ms)

这是我的代码：

hom_controller.rb

```
class HomeController < ApplicationController
  def index
  end

  def select_refresh
    print("debug")
    @specs = Specialization.find(params[:id])
    if @specs.update_attributes(params[:specialization])
       printnamessid = "printnames" + @specs.id.to_s
       render :update do |page|
         page[printnamessid].replace :partial => "printnames", :locals => {:s => @specs}
       end
    else
      print("do nothing")
    end
 end
end 
```

规范.html.erb

```
<h1>Specializations</h1>

<div id="somediv">
<table width="600" border="2" cellpadding="2" cellspacing="2" align="center">
<tr>
    <td width="280">Specialization Name</td>
    <td width="50">Application count</td>
    <td width="100">Applicant Names</td> <!--table in here-->
    <td width="70">Refresh</td>
</tr>
<% Specialization.all.each do |s| %>
<tr>
    <td><%= s.name %></td>
    <td><%= render :partial => "printcount", :locals => {:s => s} %></td>
    <td><%= render :partial => "printnames", :locals => {:s => s} %></td>
    <td><%= link_to "Refresh", {:action => "select_refresh", :id => s }, :remote => true %></td>
</tr>
<% end %> 
```

_printnames.html.erb

```
 <div id="printnames<%= s.id%>">
   <table width="100" border="2" cellpadding="2" cellspacing="2" align="center">
     <% s.applicant.each do |a| %>
     <tr>
         <td><%= a.firstname %></td>
     </tr>
     <% end %>
   </table>
 </div> 
```

你知道有什么问题吗？我用谷歌搜索了一下，但我发现的只是以前版本的 Rails 有问题吗？我使用的是 3.2.5 版。

您是否知道将打印行放入终端或从函数打印警报（如 js）的简单方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:18:32.650

这可能会有所帮助：[Rails 3: Ajax-updating a view with a partial](https://stackoverflow.com/questions/7772854/rails-3-ajax-updating-a-view-with-a-partial)

# javascript - 如何将相同的 onchange 事件添加到不同的选择框

> ID：10943869
> 
> 赞同：1
> 
> 时间：2012-06-08T06:13:06.777
> 
> 标签：javascript, jquery

我想将`'change'`事件添加到 4 个选择框。我已经使用`bind()`. 但是我想在更改每个选择框时调用不同的函数。对...的更改事件说**function1()**`SelectBox1`

> 我该怎么做？

我是&的**新手**，所以请帮忙。谢谢`javascript``jquery`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:16:26.627

假设你的 HTML 是这样的：

**HTML**

```
<select id="selectBox1">
</select>

<select id="selectBox2">
</select>

<select id="selectBox3">
</select>

<select id="selectBox4">
</select> 
```

**jQuery**

```
$('select[id^=selectBox]').on('change', function() {

    // to get the id of current selectBox
    var selectId = this.id;

    if(selectId == 'selectBox1') {
        function1();
    } else if(selecId == 'selectBox2') {
       function2();
    }
    // and so on
}); 
```

* * *

### 多一点

```
$('select[id^=selectBox]').on('change', function() {

        // to get the selected value
        var value = $.trim( this.value ); // $.trim() used to remove space
                                          // from beginning and end
                                          // you may not use

        // to get selected option text
        var optText = $('option:selected', this).text()

        // to get the selectedIndex
        var selIndex = this.selectedIndex;
        // OR
        var selIndex = $(this).prop('selectedIndex');
}); 
```

* * *

### 笔记

在这里，获取以 .开头的`select[id^=selectBox]`选择框。你可能有不同的东西。`id``selectBox``id`

**[`.change()`](http://api.jquery.com/change)**用于将事件绑定到那些选择框。

阅读更多关于

*   **[jQuery 选择器](http://api.jquery.com/category/selectors)**
*   **[jQuery 事件](http://api.jquery.com/category/events/)**
*   **[$.trim()](http://api.jquery.com/jQuery.trim/)**
*   **[。支柱（）](http://api.jquery.com/prop/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:38:22.100

您可以为每个选择设置一个特定的属性，这样：

```
<select id="selectBox1" val='1'>
</select>

<select id="selectBox2" val='2'>
</select>

<select id="selectBox3" val='3'>
</select>

<select id="selectBox4" val='4'>
</select> 
```

然后像这样绑定 onchange 事件：

```
 $("select").change(function(){
        var val = $(this).attr("val");
        if (val == '1')
            {
                //logic for first select change
            }
        else if (val == '2')
            {
                //logic for second select change
            }
        else if (val == '3')
            {
                //logic for third select change
            }

        // and so on...
   }); 
```

希望有帮助。

# c++ - 从服务器接收 xml 结果

> ID：10943871
> 
> 赞同：0
> 
> 时间：2012-06-08T06:13:24.947
> 
> 标签：c++, qt, qt4

在 qt 下，我使用 QTcpSocket 向服务器发布查询。我将收到一个 xml 结果。我使用 QLabel 来显示 xml 内容。

我试过这样。

```
QDataStream ini(&sock);
QString result;
in >> result;
ui->label->setText(result); 
```

很抱歉我无法提供结果，因为 stackoverflow 不允许我发布图片。

但是我得到了一些凌乱的代码而不是 xml。什么原因？

有时我可以收到一些 http 响应词，虽然非常罕见。如果你能告诉我怎么做，我将不胜感激。

也许这就是我如何显示 xml 内容造成的混乱代码。我很困惑。：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:13:49.467

1) 来自服务器的数据不是数据流格式。因此，您无法使用 QDatastream 读取它。直接使用 sock->read()/sock->readAll() 代替。

2) 确保在纯文本模式下使用 QLabel：

```
label->setTextFormat( Qt::PlainText ) 
```

不过，使用 QTextBrowser（也与 setPlainText 一起）会更有用，并且会让您更易读和更容易导航输出。

# io - 是否有任何真正的程序检查文件关闭错误？

> ID：10943877
> 
> 赞同：2
> 
> 时间：2012-06-08T06:14:26.693
> 
> 标签：io, filesystems, operating-system

我从未见过检查文件是否正确关闭的真正用途。我的意思是，如果它没有关闭，那会怎样？你没有什么聪明可做的。此外，我不确定是否有一个真实世界的用例，其中非`write`//会失败`reads`，`flush`只有`close`意志会失败。

有没有人真正使用 的返回值`close`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:58:14.627

从关闭（2）：

```
Not checking the return value of close() is a common but nevertheless serious
programming error. It is quite possible that errors on a previous write(2)
operation are first reported at the final close(). Not checking the return
value when closing the file may lead to silent loss of data. This can
especially be observed with NFS and with disk quota. 
```

而且如果你在你的应用程序中使用信号`close`可能会被中断（EINTR）。

编辑：也就是说，除非我准备好处理这种情况并编写必须 100% 万无一失的代码，否则我很少打扰。

# ios5 - CLGeocoder 只显示最近的苹果商店？

> ID：10943881
> 
> 赞同：0
> 
> 时间：2012-06-08T06:15:10.920
> 
> 标签：ios5, clgeocoder

CLGeocoder 现在就那么粗糙吗？我期待一些相对接近街道地址的东西。我正在 5.1 模拟器上测试并使用 ARC。如果有帮助，我现在使用以下内容制作了一个快速测试项目：

```
 - (IBAction)getLocationPressed {
      if ([CLLocationManager locationServicesEnabled] &&
          [CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) {    
        [self.geoCoder reverseGeocodeLocation:self.locationManager.location completionHandler: 
         ^(NSArray *placemarks, NSError *error) {         
// Note: there is NO guarantee that the CLGeocodeCompletionHandler will be invoked on the main thread
          dispatch_async(dispatch_get_main_queue(),^ {
            NSLog(@"placemarks count: %d", [placemarks count]);
            CLPlacemark *placemark = [placemarks objectAtIndex:0];  
// Note: if a poor location is specified, there may be multiple placemarks for the given location    
            NSString *currentAddress = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];
            NSLog(@"I am currently at %@", currentAddress);    
            self.locationLabel.text = currentAddress;
          });
        }];
      }
    }

    #pragma mark - CLLocationManager Delegate Methods 
    - (void)locationManager:(CLLocationManager *)manager 
        didUpdateToLocation:(CLLocation *)newLocation 
               fromLocation:(CLLocation *)oldLocation {      
      // do something...
    }    
    - (void)locationManager:(CLLocationManager *)manager
           didFailWithError:(NSError *)error {
      if (error.code == kCLErrorDenied) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!" 
                                message:@"this can not work without location services enabled" 
                                delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
      }
    }

    #pragma mark - Lifecycle Methods
    - (void)viewDidLoad {
      [super viewDidLoad];
      self.locationManager.delegate = self;
      self.locationManager.purpose = REASON_FOR_USING_LOCATION;
      self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;//kCLLocationAccuracyNearestTenMeters;
      [self.locationManager startUpdatingLocation];
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:19:33.060

是的！事实证明，我只是没有在模拟器中启用位置。如果我在我的设备上测试它，它实际上是有效的。这是一个完整的 .m 文件的示例，如果它可以帮助任何人。我设置了几个标签和一个圆形矩形按钮，您可以从代码中看到：

```
#define REASON_FOR_USING_LOCATION  (@"to find the closest widget")

@interface ViewController ()  <CLLocationManagerDelegate>
@property (weak, nonatomic) IBOutlet UILabel *locationLabel;
@property (strong, nonatomic) CLLocationManager *locationManager;
@property (strong, nonatomic) CLGeocoder *geoCoder;
@end

@implementation ViewController
#pragma mark - Getters/Setters
@synthesize locationLabel = _locationLabel;
@synthesize locationManager = _locationManager;
@synthesize geoCoder = _geoCoder;
// lazily instantiate as required
- (CLGeocoder *)geoCoder {
  if (!_geoCoder) _geoCoder = [CLGeocoder new];
  return _geoCoder;
}

- (CLLocationManager *)locationManager {
  if (!_locationManager) _locationManager = [CLLocationManager new];
  return _locationManager;
}

#pragma mark - Target/Action Methods
- (IBAction)clearLocationPressed {
  self.locationLabel.text = @""; 
}

- (IBAction)getLocationPressed {
  if ([CLLocationManager locationServicesEnabled] &&
      [CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) {

    [self.geoCoder reverseGeocodeLocation:self.locationManager.location completionHandler: 
     ^(NSArray *placemarks, NSError *error) {

      // Note: there is NO guarantee that the CLGeocodeCompletionHandler will be invoked on the main thread
      dispatch_async(dispatch_get_main_queue(),^ {
        NSLog(@"placemarks count: %d", [placemarks count]);
        CLPlacemark *placemark = [placemarks objectAtIndex:0];  
        // Note: if a poor location is specified, there may be multiple placemarks for the given location

        NSString *currentAddress = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];

        NSLog(@"I am currently at %@", currentAddress);

        self.locationLabel.text = currentAddress;
      });
    }];
  }
}

#pragma mark - CLLocationManager Delegate Methods 
- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation {      
  // do something...
}

- (void)locationManager:(CLLocationManager *)manager
       didFailWithError:(NSError *)error {
  if (error.code == kCLErrorDenied) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!" 
                            message:@"this can not work without location services enabled" 
                            delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
  }
}

#pragma mark - Lifecycle Methods
- (void)viewDidLoad {
  [super viewDidLoad];
  self.locationManager.delegate = self;
  self.locationManager.purpose = REASON_FOR_USING_LOCATION;
  self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;//kCLLocationAccuracyNearestTenMeters;
  [self.locationManager startUpdatingLocation];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  return YES;
}

- (void)viewDidUnload {
  [self setLocationLabel:nil];
  [self setLocationManager:nil];
  [self setGeoCoder:nil];
  [super viewDidUnload];
}
@end 
```

# php - 如何选择图像并将图像的链接放在文本框中？

> ID：10943889
> 
> 赞同：0
> 
> 时间：2012-06-08T06:16:34.697
> 
> 标签：php, jquery, image, select

我有一个`SelectIamge.php`包含以下 html 的表单：

```
<input type="text" id="urlImage" />
<input type="button" id="selectImage" /> 
```

用户需要能够单击 selectImage 按钮以打开页面 UploadImage.php 的弹出窗口。然后，用户将上传一张图片，并显示该图片的缩略图。如果用户单击缩略图，我需要将图像的 url 放在 urlImage 文本框中。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:34:29.993

首先给缩略图一些 id 即 id='thumb'

包含 jquery 库文件并在文件中的 javascript 下方写入

```
<script type="text/javascript">
$("#thumb").click(function(){
   var src = $(this).attr('src');
   $("#urlImage").val(src);
});
</script> 
```

# php - 意外的 T_IF 错误

> ID：10943890
> 
> 赞同：-6
> 
> 时间：2012-06-08T06:16:46.140
> 
> 标签：php, sql

收到此错误时，我正在编写注册脚本。另外，我想扩展我对这个特定错误的了解。无休止的谷歌搜索==>没有帮助。这是我的代码：

```
<?php
          //include the connection file

          require_once("functions/validation_employee_signup.php");
          require_once("functions/functions.php")

    if( isset($_POST['send']) && (!validateName($_POST['name']) || !validateEmail($_POST['email']) || !validatePasswords($_POST['pass1'], $_POST['pass2']) || !validateContact($_POST['contact']) || !validateAge($_POST['age'])) ):?>
                <div id="error">    
                    <ul>
                        <? if(!validateName($_POST['name'])):?>
                            <li><strong>Invalid Name:</strong> We want names with more than 3 letters.</li>
                        <? endif?>
                        <? if(!validateEmail($_POST['email'])):?>
                            <li><strong>Invalid E-mail:</strong> Type a valid e-mail please.</li>
                        <? endif?>
                        <? if(!validatePasswords($_POST['pass1'], $_POST['pass2'])):?>
                            <li><strong>Passwords are invalid:</strong> Passwords doesnt match or are invalid!</li>
                        <? endif?>
                        <? if(!validateContact($_POST['contact'])):?>
                            <li><strong>Please enter a valid number.</strong></li>
                        <? endif?>
                        <? if(!validateAge($_POST['age'])):?>
                            <li><strong>Please enter a valid age</strong></li>
                        <? endif?>
                        </ul>
                </div>
            <?php elseif(isset($_POST['send'])):?>
                <div id="error" class="valid">
                    <ul>
                    <?php
                    require_once('functions/connection.php'); 
                    $query = "INSERT INTO employee (name, password, email, contact, age, gender, location, skill, work) VALUES ";                
                    $email = protect($_POST['email']);
                    $res = mysql_query("SELECT * FROM `employee` WHERE `email` = '".$email."'");
                    $num = mysql_num_rows($res);
                    if($num == 1){
                            //if yes the username is taken so display error message
                            echo  "<li><strong>The EMail ID you have chosen is already taken!</strong></li>";
                                }else{           
                                $query .= "('".$_POST['name']."', MD5('".$_POST['pass1']."'), '".$email."','".$_POST['contact']."','".$_POST['age']."','".$_POST['gender']."','".$_POST['location']."','".$_POST['skill']."','".$_POST['work']."')";
                    // run the query
                    mysql_query($query);}?>
                    <li><strong>Congratulations!</strong> You have been successfully registered!</li>
                    </ul>
                </div>
        <?php endif?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:23:21.030

显然，它不需要 if 语句，而且您似乎忘记了第 5 行的分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:30:47.903

```
 require_once("functions/functions.php") ;  // at line 5 
```

如果您使用过 IDE，您已经错过了这里的分号，那么您就会知道

# c# - 在列表中查找方法

> ID：10943891
> 
> 赞同：0
> 
> 时间：2012-06-08T06:16:50.300
> 
> 标签：c#, winforms

这是我的清单

```
public string state { get; set; }
public string city { get; set; }
public Point p1 { get; set; }
public Point p2 { get; set; }
public List<Explorer> line = new List<Explorer>();
public List<Explorer> rectangle = new List<Explorer>();
public List<Explorer> ellipse = new List<Explorer>(); 
```

这是我在列表代码中添加元素

```
line.Add(new Explorer
            {
                state = "AAAA",
                city = "BBB",
                p1 = start,
                p2 = end
            }); 
```

与州和城市的价值相关，我需要找到它们的位置点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:25:10.187

你能试一下吗

```
 line.Where(l=>l.state == "whatever" && l.city == "whatever").
       Select(p=> new() { point1 = p.p1, point2 = p.p2 }).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:42:33.213

您可以使用 LINQ 过滤您的列表/检索您想要的项目：

使用[在哪里](http://msdn.microsoft.com/en-en/library/bb534803.aspx)

```
line.Where(e => e.state == "AAAA" && e.city == "BBB") 
```

使用[Single/SingleOrDefault/First/FirstOrDefault](http://msdn.microsoft.com/en-en/library/bb155325.aspx)

```
line.SingleOrDefault(e => e.state == "AAAA" && e.city == "BBB") 
```

如果您只对点感兴趣，则可以使用[Select](http://msdn.microsoft.com/en-en/library/system.linq.enumerable.select.aspx)投影

```
var points = line.Where(e => e.state == "AAAA" && e.city == "BBB")
                    .Select(e=>Tuple.Create(e.p1, e.p2))
                    .Single(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:26:46.177

如果您有如下资源管理器类列表，

```
List<Explorer> myList;

var result = myList.SingleOrDefault(d=> d.state="somthing" && d.city="Soemthing");

// access result.points here. 
```

# windows-phone-7 - 如何将图像放置在网格中的图像内？

> ID：10943895
> 
> 赞同：1
> 
> 时间：2012-06-08T06:17:07.957
> 
> 标签：windows-phone-7, windows-phone-7.1

我需要并排放置图像，并且需要在每个图像下方放置一个小图像图标。请帮助我如何设计？任何样品请告诉我..

如何根据条件动态地将用户图像放在一个小图像中..请帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:44:29.987

我为你做了简单的原型。我不能为你制作整个屏幕。这是我从您的评论和屏幕截图中得到的基本信息。请参阅下面的 XAML 和屏幕截图：

```
 <ListBox Name="lstImages" VerticalAlignment="Top">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Padding" Value="0,0,0,-15" />
                        <Setter Property="Margin" Value="2"/>
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel>
                        </toolkit:WrapPanel>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <Image Height="100" Width="110" Source="{Binding BigImageSource}" VerticalAlignment="Top"/>
                            <Image Height="10" Width="10" Source="{Binding SmallImageSource}" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,-35,10,0"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

![在此处输入图像描述](../Images/6be4375faa32cb3123ab68b6887273f0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:29:35.160

用这个

```
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition/>
    <ColumnDefinition/>   
  </Grid.ColumnDefinitions>
    <Grid Grid.Column="0">
      <Grid.RowDefinitions>
      <RowDefinition/>
      <RowDefinition/>
     </Grid.RowDefinitions>
       <Image Source="Your image" Grid.Row="0"/>
       <Image Source="Your small icon" Grid.Row="1"/>
  </Grid>

<Grid Grid.Column="1">
  <Grid.RowDefinitions>
    <RowDefinition/>
    <RowDefinition/>
  </Grid.RowDefinitions>
   <Image Source="Your image" Grid.Row="0"/>
   <Image Source="Your small icon" Grid.Row="1"/>
</Grid>

</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:52:33.683

```
<StackPanel>
    <StackPanel Orientation="Horizontal">
      <Image Source="Firstimage" />
      <Image Source="Secondimage" />
    </Stackpanel>
    <StackPanel Orientation="Horizontal">
      <Image Source="Firsticon" />
      <Image Source="Secondicon" />
    </Stackpanel>
</StackPanel> 
```

但是在这里您必须对图标堆栈面板进行一些更改，例如设置一些边距，以使其与实际图像对齐。

这只是一种选择，您也可以使用核子回答的网格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:30:32.760

如果你想在列表框中显示你的图像，然后在环绕面板中包裹这种方式，你也可以设置包裹面板的方向。Wrappanel 位于 windows phone 7 的 silverlight 工具包中。

```
 <ListBox Name="lstImages">
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="Padding" Value="-15" />
                                        <Setter Property="Margin" Value="0"/>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <toolkit:WrapPanel>
                                        </toolkit:WrapPanel>
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                  <stackpanel>
                                  <Image Source="Your image" />
                                  <Image Source="Small image" />
                                  </stackpanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox> 
```

并将此列表框与您的数据集合绑定。

# iphone - 在 iphone 中播放与频率和分贝相关的哔声

> ID：10943896
> 
> 赞同：6
> 
> 时间：2012-06-08T06:17:08.287
> 
> 标签：iphone, avaudioplayer, frequency, beep

我已经研究过要在 iphone 中播放与我给出的频率和分贝有关的哔声。

我提到的链接：

[http://developer.apple.com/library/ios/#samplecode/MusicCube/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008978](http://developer.apple.com/library/ios/#samplecode/MusicCube/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008978)

[http://www.politepix.com/2010/06/18/decibel-metering-from-an-iphone-audio-unit/](http://www.politepix.com/2010/06/18/decibel-metering-from-an-iphone-audio-unit/)

[http://atastypixel.com/blog/using-remoteio-audio-unit/](http://atastypixel.com/blog/using-remoteio-audio-unit/)

[http://www.politepix.com/2010/06/18/decibel-metering-from-an-iphone-audio-unit/](http://www.politepix.com/2010/06/18/decibel-metering-from-an-iphone-audio-unit/)

[如何播放特定频率和框架未找到 AudioUnit 问题的声音](https://stackoverflow.com/questions/740627/how-to-play-a-sound-of-paticular-frequency-and-framework-not-found-audiounit-que)

我还使用 Flite 在我的应用程序中进行文本转语音。

我可以知道，是否可以使用 flite 在 iphone 中播放与频率和分贝相关的哔声。

我知道他们正在根据输入创建一个音频文件（仅与音高、方差、速度和给定的字符串有关）并在创建后通过 Audioplayer 播放。

但是他们没有自定义方法来设置频率和分贝！！！！

那么任何人都可以为我提供一种在 iphone 中执行此操作的好方法。

对此问题的任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T02:13:52.457

此类允许您以给定的频率和给定的幅度播放哔声。它使用来自 AudioToolbox.framework 的*AudioQueues*。这只是一个草图，很多东西都应该改进，但是创建信号的机制是有效的。

如果您看到`@interface`.

```
#import <AudioToolbox/AudioToolbox.h>
#define TONE_SAMPLERATE 44100.

@interface Tone : NSObject {
    AudioQueueRef queue;
    AudioQueueBufferRef buffer;
    BOOL rebuildBuffer;
}
@property (nonatomic, assign) NSUInteger frequency;
@property (nonatomic, assign) CGFloat dB;

- (void)play;
- (void)pause;
@end

@implementation Tone
@synthesize dB=_dB,frequency=_frequency;

void handleBuffer(void *inUserData,
                  AudioQueueRef inAQ,
                  AudioQueueBufferRef inBuffer);

#pragma mark - Initialization and deallocation -

- (id)init
{
    if ((self=[super init])) {

        _dB=0.;
        _frequency=440;
        rebuildBuffer=YES;

        // TO DO: handle AudioQueueXYZ's failures!!

        // create a descriptor containing a LPCM, mono, float format
        AudioStreamBasicDescription desc;

        desc.mSampleRate=TONE_SAMPLERATE;
        desc.mFormatID=kAudioFormatLinearPCM;
        desc.mFormatFlags=kLinearPCMFormatFlagIsFloat;
        desc.mBytesPerPacket=sizeof(float);
        desc.mFramesPerPacket=1;
        desc.mBytesPerFrame=sizeof(float);
        desc.mChannelsPerFrame=1;
        desc.mBitsPerChannel=8*sizeof(float);

        // create a new queue
        AudioQueueNewOutput(&desc,
                            &handleBuffer,
                            self,
                            CFRunLoopGetCurrent(),
                            kCFRunLoopCommonModes,
                            0,
                            &queue);

        // and its buffer, ready to hold 1" of data
        AudioQueueAllocateBuffer(queue,
                                 sizeof(float)*TONE_SAMPLERATE,
                                 &buffer);

        // create the buffer and enqueue it
        handleBuffer(self, queue, buffer);

    }
    return self;
}

- (void)dealloc
{
    AudioQueueStop(queue, YES);
    AudioQueueFreeBuffer(queue, buffer);
    AudioQueueDispose(queue, YES);

    [super dealloc];
}

#pragma mark - Main function -

void handleBuffer(void *inUserData,
                AudioQueueRef inAQ,
                AudioQueueBufferRef inBuffer) {

    // this function takes care of building the buffer and enqueuing it.

    // cast inUserData type to Tone
    Tone *tone=(Tone *)inUserData;

    // check if the buffer must be rebuilt
    if (tone->rebuildBuffer) {

        // precompute some useful qtys
        float *data=inBuffer->mAudioData;
        NSUInteger max=inBuffer->mAudioDataBytesCapacity/sizeof(float);

        // multiplying the argument by 2pi changes the period of the cosine
        //  function to 1s (instead of 2pi). then we must divide by the sample
        //  rate to get TONE_SAMPLERATE samples in one period.
        CGFloat unit=2.*M_PI/TONE_SAMPLERATE;
        // this is the amplitude converted from dB to a linear scale
        CGFloat amplitude=pow(10., tone.dB*.05);

        // loop and simply set data[i] to the value of cos(...)
        for (NSUInteger i=0; i<max; ++i)
            data[i]=(float)(amplitude*cos(unit*(CGFloat)(tone.frequency*i)));

        // inform the queue that we have filled the buffer
        inBuffer->mAudioDataByteSize=sizeof(float)*max;

        // and set flag
        tone->rebuildBuffer=NO;
    }

    // reenqueue the buffer
    AudioQueueEnqueueBuffer(inAQ,
                            inBuffer,
                            0,
                            NULL);

    /* TO DO: the transition between two adjacent buffers (the same one actually)
              generates a "tick", even if the adjacent buffers represent a continuous signal.
              maybe using two buffers instead of one would fix it.
     */
}

#pragma - Properties and methods -

- (void)play
{
    // generate an AudioTimeStamp with "0" simply!
    //  (copied from FillOutAudioTimeStampWithSampleTime)

    AudioTimeStamp time;

    time.mSampleTime=0.;
    time.mRateScalar=0.;
    time.mWordClockTime=0.;
    memset(&time.mSMPTETime, 0, sizeof(SMPTETime));
    time.mFlags = kAudioTimeStampSampleTimeValid;

    // TO DO: maybe it could be useful to check AudioQueueStart's return value
    AudioQueueStart(queue, &time);
}

- (void)pause
{
    // TO DO: maybe it could be useful to check AudioQueuePause's return value
    AudioQueuePause(queue);
}

- (void)setFrequency:(NSUInteger)frequency
{
    if (_frequency!=frequency) {
        _frequency=frequency;

        // we need to update the buffer (as soon as it stops playing)
        rebuildBuffer=YES;
    }
}

- (void)setDB:(CGFloat)dB
{
    if (dB!=_dB) {
        _dB=dB;

        // we need to update the buffer (as soon as it stops playing)
        rebuildBuffer=YES;
    }
}

@end 
```

*   该类生成一个以给定整数频率（**幅值*cos(2pi*frequency*t)**）振荡的cos波形；整个工作是通过`void handleBuffer(...)`使用具有线性 PCM、单声道、浮点 @44.1kHz 格式的 AudioQueue 来完成的。为了改变信号形状，你可以改变那条线。例如，下面的代码将产生一个方波：

    ```
    float x = fmodf(unit*(CGFloat)(tone.frequency*i), 2 * M_PI);
    data[i] = amplitude * (x > M_PI ? -1.0 : 1.0); 
    ```

*   对于浮点频率，您应该考虑在一秒钟的音频数据中不一定有整数次振荡，因此表示的信号在两个缓冲区之间的连接处是不连续的，并产生一个奇怪的“滴答声”。例如，您可以设置较少的样本，以便结点位于信号周期的末尾。

*   正如 Paul R 指出的那样，您应该首先校准硬件，以便在您在实现中设置的值与设备产生的声音之间进行可靠的转换。实际上，这段代码中生成的浮点样本的范围是 -1 到 1，所以我只是将幅度值转换为 dB ( **20*log_10(amplitude)** )。
*   查看评论以了解实施中的其他细节和“已知限制”（所有这些“TO DO”）。Apple 在其参考资料中详细记录了所使用的功能。

# image-processing - 如何为图像添加镜头（焦点）模糊

> ID：10943898
> 
> 赞同：3
> 
> 时间：2012-06-08T06:17:09.483
> 
> 标签：image-processing, blur, gaussian

我试图弄清楚如何以编程方式执行此操作，但是尽管我进行了所有谷歌搜索，但我无法弄清楚这是怎么回事。

镜头模糊不同于看起来非常计算机生成的高斯模糊。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:58:04.220

我发现了一篇关于这个主题的[有趣的博客文章](http://yehar.com/blog/?p=1495)。我还没有通读整件事，但它似乎很有描述性，可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:29:10.903

您没有说明您要使用哪种语言，但 Java 可以进行很多图像处理，请查看此链接：

[jhlabs 模糊示例](http://www.jhlabs.com/ip/blurring.html)

它甚至包括您所追求的镜头模糊效果。

# apache - 当我们可以通过 httpd.conf 来创建子域的 DNS 记录时，为什么要为子域创建 DNS 记录？

> ID：10943899
> 
> 赞同：0
> 
> 时间：2012-06-08T06:17:14.213
> 
> 标签：apache, .htaccess

我想在我的站点中使用用户名作为子域（如`user1.domain.com`.
我已经阅读了很多文章，这些文章提到在 DNS 中创建如下 A 记录：

```
*.domain.com A 127.0.0.1 ;OR you site ip address 
```

然后使用 .htaccess 将请求从子域重定向到服务器中的文件夹。

但我发现另一种方法据说只是修改你的 httpd.conf 如下：

```
<VirtualHost *:80>
        DocumentRoot /abs/path/to/webroot
        ServerName   domainname.com
        ServerAlias *.domainname.com
        <Directory /abs/path/to/webroot>
                AllowOverride All
                Order allow,deny
                Allow from all
        </Directory>
</VirtualHost> 
```

然后通过检索子域`$_SERVER['HTTP_HOST']`。`ServerAlias *.domainname.com`问题是当我们可以做一个简单的事情时，为什么有人要使用 htaccess 并对 apache 施加压力并创建 DNS 记录`httpd.conf`？
我提前感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:27:22.757

您已经添加了`ServerAlias`，但是为了让您的计算机能够找到`user1.domain.com`并`user2.domain.com`解决该问题`127.0.0.1`，您需要更新您的`HOSTS`文件或`DNS Table`.

您编写的配置用于 Apache 服务器，用于在用户请求域时处理重定向。因此，从本质上讲，您需要一个`Dynamic HOSTS`文件或一项服务来解析`*.domain.com`您的`127.0.0.1`服务器。

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:30:31.887

您需要设置通配符 DNS 记录并配置服务器别名`httpd.conf`以启用任意子域的托管。他们配置完全不同的东西。

添加通配符 DNS 记录允许客户端确定您的子域的 IP 地址。使用通配符 DNS 记录 about`user1.domain.com`将解析为`127.0.0.1`. 如果您没有 DNS 记录，则 no`user1.domain.com`将不是有效名称，也不会解析为 IP 地址。DNS 记录是为了允许客户端连接到您的服务器。

该`httpd.conf`配置是 Apache 服务器的本地配置。它不会影响客户。该行将`ServerAlias *.domainname.com`配置 Apache 以告诉它处理任意子域。客户端不会直接受此设置影响。

# python - 使用 uWSGI 和 Cherokee 部署 Pyramid 应用程序

> ID：10943900
> 
> 赞同：5
> 
> 时间：2012-06-08T06:17:20.687
> 
> 标签：python, pyramid, web-deployment, cherokee

我正在尝试设置一个通用的 Pyramid 项目以通过 Cherokee 与 uWSGI 一起工作，但不断收到“未加载应用程序”错误。我所做的所有研究并没有真正让我继续下去。有人有想法么？请注意，我“正在”通过 virtualenvwrapper 使用 virtualenv。

这是来自我的 development.ini

```
[uwsgi]
socket = 127.0.0.1:2626
master = true
processes = 1
virtualenv = /home/user/.virtualenvs/pyramid/
pythonpath = /home/user/Projects/ConventionMeStatic 
```

这是我一直试图用来启动它的命令：`/usr/bin/uwsgi --ini development.ini --plugin python`.

我可以发布任何进一步的细节，但项目本身没有其他更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T06:55:44.257

您已指定 virtualenv 和 pytonpath，但尚未指定要加载的应用程序。

如果您有一个单文件应用程序，您可以使用 --wsgi-file 选项加载该文件，如果您有一个 deployment.ini 文件，您可以使用 --paste 选项，如此处所述

[http://projects.unbit.it/uwsgi/wiki/UsePaste](http://projects.unbit.it/uwsgi/wiki/UsePaste)

或 uwsgi wiki 的示例部分中描述的 --ini-paste 快捷方式

# ios - 如何从 sqlite 数据库中检索数据？返回值为零

> ID：10943901
> 
> 赞同：0
> 
> 时间：2012-06-08T06:17:28.020
> 
> 标签：ios, sqlite

如何从 sqlite 数据库中检索数据？返回值为零。

```
-(id)init{

    if(self==[super init]){
        database=nil;
    }
    return self;
}

-(void)addDetails:(NSString *)_name withAddress:(NSString *)_address withAge:(int)_age withMobile:(double)_mobile{

   // NSLog(@"in db class --->%@ %@ %d %f",_name,_address,_age,_mobile);
   // NSString *name=@"...has done it";

      if([self openDBConnection] == TRUE) {

        const char *sql= "insert into Personal (Name,Address,Age,Mobiel) Values(?, ?, ?, ?)";

        sqlite3_stmt *updateUser_stmt = nil;
        NSInteger retVal = sqlite3_prepare_v2(database, sql, -1, &updateUser_stmt, NULL);
        NSLog(@"the return value is %d",retVal);
        if(retVal == SQLITE_OK)
        {
            sqlite3_bind_text (updateUser_stmt , 1, [_name UTF8String],-1,SQLITE_STATIC);
            sqlite3_bind_text (updateUser_stmt , 2, [_address UTF8String], -1, SQLITE_STATIC);
            sqlite3_bind_int(updateUser_stmt, 3, _age); 
            sqlite3_bind_double(updateUser_stmt, 4, _mobile);
            // sqlite3_bind_text (updateUser_stmt , 4, [HomeUserDetails.strName UTF8String], -1, SQLITE_STATIC);

            NSInteger resultInt = sqlite3_step(updateUser_stmt );
            if(SQLITE_DONE != resultInt)
                NSLog(@"Error while inserting data. '%s'", sqlite3_errmsg(database));
            else    
            {
                NSLog(@"MyA user details added to database");
            }
        }
        sqlite3_reset(updateUser_stmt );
        sqlite3_finalize(updateUser_stmt );
        updateUser_stmt = nil;
    }
}

-(void) modifyUserDetails :(Person *)_person
{
    NSLog(@"in update");
    if([self openDBConnection] == TRUE)
    {
        NSString *str = [NSString stringWithFormat:@"UPDATE Personal SET  Address='%@', Age='%d' , Mobiel='%d' WHERE Name='%@'",
                         _person.address, [_person getAge], [_person getMobile], _person.name];
        NSLog(@" String :%@",str);
        //NSString *str = [NSString stringWithFormat:@"UPDATE Room SET Access=1 WHERE RoomName='%@'",room.m_roomName];
        const char *sql = [str UTF8String];
        // [NSString stringWithFormat:@"UPDATE Room SET Access=%d WHERE RoomName=%@", access,room.m_roomName];
        sqlite3_stmt *updateUser_stmt = nil;
        if(sqlite3_prepare_v2(database, sql, -1, &updateUser_stmt, NULL) == SQLITE_OK)
        {
            sqlite3_bind_text(updateUser_stmt, 1, [_person.name UTF8String], -1, SQLITE_STATIC);
            sqlite3_bind_text(updateUser_stmt, 2, [_person.address UTF8String], -1, SQLITE_STATIC);
            sqlite3_bind_int(updateUser_stmt, 3, [_person getAge]);
            sqlite3_bind_double(updateUser_stmt, 4, [_person getMobile]);

            if(SQLITE_DONE != sqlite3_step(updateUser_stmt))
                NSLog(@"Error while updating data data. '%s'", sqlite3_errmsg(database));
        }
        sqlite3_reset(updateUser_stmt );
        sqlite3_finalize(updateUser_stmt );
        updateUser_stmt = nil;
    }
}

-(void)getUserDetails
{
    UIApplication *app=[UIApplication sharedApplication];
    appdlegate=app.delegate;
    if(appdlegate.arrayNames)
        [appdlegate.arrayNames removeAllObjects];
    NSLog(@"in get users");
    if([self openDBConnection] == TRUE) 
    {
        const char *sql = "select Name,Address,Age,Mobiel from Personal";//AccessLevel,HintA HintQ,Name,pwd
        sqlite3_stmt *getAccess_stmt = nil;
        NSInteger retVal = sqlite3_prepare_v2(database, sql, -1, &getAccess_stmt, NULL);
        if(retVal == SQLITE_OK)
        {
            while(sqlite3_step(getAccess_stmt) == SQLITE_ROW)
            {
                char* name = (char*) sqlite3_column_text(getAccess_stmt, 0);
                NSString *tmp;
                if (name != NULL){
                   tmp = [NSString stringWithUTF8String:name];
                    NSLog(@"value form db :%@",tmp);
                }
                [appdlegate.arrayNames addObject:tmp];
                char *addrs = (char*) sqlite3_column_text(getAccess_stmt, 1);
                if (addrs != NULL){
                    NSString *tmp = [NSString stringWithUTF8String:addrs];
                    NSLog(@"value from db :%@",tmp);
                }

                int age =sqlite3_column_int(getAccess_stmt,2);

                if(age){
                    NSLog(@"age from db: %d",age);
                }
                int mobile=sqlite3_column_double(getAccess_stmt, 3);
                ;
                if(mobile){
                    NSLog(@"mobile from db: %d",mobile);               
                }
            }
        }
        sqlite3_reset(getAccess_stmt );
        sqlite3_finalize(getAccess_stmt );
        getAccess_stmt = nil;
    }
}
-(Person *)getPerticular:(NSString *)_name
{ 
    Person *person;
    UIApplication *app=[UIApplication sharedApplication];
    appdlegate=app.delegate;
    NSLog(@"in get users");
    if([self openDBConnection] == TRUE) 
    {
         NSString *query = [NSString stringWithFormat:@"select  *from Personal where name ='%@'",_name];

        const char *sql =[query cStringUsingEncoding:NSASCIIStringEncoding];

        //const char *sql = "select  *from Personal where name=''";//AccessLevel,HintA HintQ,Name,pwd
        sqlite3_stmt *getAccess_stmt = nil;
        NSInteger retVal = sqlite3_prepare_v2(database, sql, -1, &getAccess_stmt, NULL);
        if(retVal == SQLITE_OK)
        {
             person=[[Person alloc]init];
            while(sqlite3_step(getAccess_stmt) == SQLITE_ROW)
            {

                char* name = (char*) sqlite3_column_text(getAccess_stmt, 0);
                NSString *tmp;
                if (name != NULL){
                    tmp = [NSString stringWithUTF8String:name];
                    NSLog(@"value perticular form db :%@",tmp);
                    person.name=tmp;
                }

                char *addrs = (char*) sqlite3_column_text(getAccess_stmt, 1);
                if (addrs != NULL){
                    NSString *tmp = [NSString stringWithUTF8String:addrs];
                    NSLog(@"value perticular from db :%@",tmp);
                    person.address=tmp;
                }

                int age =sqlite3_column_int(getAccess_stmt,2);

                if(age){
                    NSLog(@"perticular age from db: %d",age);
                    [person setAge:age];
                }
                int mobile=sqlite3_column_double(getAccess_stmt, 3);
                ;
                if(mobile){
                    NSLog(@"mobile from db: %d",mobile);
                    [person setMobile:mobile];
                }
            }
        }
        sqlite3_reset(getAccess_stmt );
        sqlite3_finalize(getAccess_stmt );
        getAccess_stmt = nil;
    }

    return person;
}

-(void)createConnection{

    NSError *error;
    NSArray *strdest=[NSArray arrayWithObjects:NSHomeDirectory(),@"Documents",DB_NAME,nil];

    dest=[NSString pathWithComponents:strdest];

    NSFileManager *manager=[NSFileManager defaultManager];
    NSArray *strSrc=[NSArray arrayWithObjects:NSHomeDirectory(),@"SqlliteDemo.app",DB_NAME, nil];
    NSString *source=[NSString pathWithComponents:strSrc];

    BOOL sucess=[manager fileExistsAtPath:dest];
    if(sucess){
        NSLog(@"alredy db copied to documents");
    }

    else {
        [manager copyItemAtPath:source toPath:dest error:&error];
        if(error){
            NSLog(@"NO Error");
        }
        else{
            NSLog(@"error is %@",error); 
        }
    }
}

-(BOOL)openDBConnection{
    [self createConnection];
    if(!database){
        if(sqlite3_open([dest UTF8String], &database)==SQLITE_OK){
            return TRUE;

        }else {
            return FALSE;
        }
    }
    return TRUE;
}

-(void)finalizeStatements{
    if(database)sqlite3_close(database);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:43:00.793

认为下面显示的查询中存在一些问题，请在命令行中交叉检查相同的查询。即使看看你是否在你的项目中正确添加了 db 文件，这也可能会产生一些问题。

```
NSString *query = [NSString stringWithFormat:@"select  *from Personal where name ='%@'",_name]; 
```

# c++ - Linux 分配器不会释放小块内存

> ID：10943907
> 
> 赞同：16
> 
> 时间：2012-06-08T06:18:10.480
> 
> 标签：c++, memory, heap-memory, allocation

Linux glibc 分配器的行为似乎很奇怪。希望有人可以对此有所了解。这是我拥有的源文件：

第一个.cpp：

```
#include <unistd.h>
#include <stdlib.h>
#include <list>
#include <vector>

int main() {

  std::list<char*> ptrs;
  for(size_t i = 0; i < 50000; ++i) {
    ptrs.push_back( new char[1024] );
  }
  for(size_t i = 0; i < 50000; ++i) {
    delete[] ptrs.back();
    ptrs.pop_back();
  }

  ptrs.clear();

  sleep(100);

  return 0;
} 
```

第二个.cpp：

```
#include <unistd.h>
#include <stdlib.h>
#include <list>

int main() {

  char** ptrs = new char*[50000];
  for(size_t i = 0; i < 50000; ++i) {
    ptrs[i] = new char[1024];
  }
  for(size_t i = 0; i < 50000; ++i) {
    delete[] ptrs[i];
  }
  delete[] ptrs;

  sleep(100);

  return 0;
} 
```

我同时编译：

```
$ g++ -o first first.cpp
$ g++ -o 秒 second.cpp

```

我先运行，在它休眠后，我看到常驻内存大小：

当我编译 first.cpp 并运行它时，我用 ps 查看内存：

```
$ ./first&
$ ps aux | grep first
davidw    9393  1.3  0.3  64344 53016 pts/4    S    23:37   0:00 ./first

$ ./second&
$ ps aux | grep second
davidw    9404  1.0  0.0  12068  1024 pts/4    S    23:38   0:00 ./second 
```

注意常驻内存大小。首先，常驻内存大小为 53016k。其次是1024k。首先从未出于某种原因将分配释放回内核。

为什么第一个程序不将内存释放给内核，而第二个程序却可以呢？我知道第一个程序使用链表，链表可能会在同一页面上分配一些节点作为我们正在释放的数据。但是，这些节点应该被释放，因为我们要弹出这些节点，然后清除链表。如果你通过 valgrind 运行这些程序中的任何一个，它就不会出现内存泄漏。可能发生的情况是内存在 first.cpp 中变得碎片化，而在 second.cpp 中没有。但是，如果一个页面上的所有内存都被释放，那么该页面如何不被释放回内核呢？将内存交还给内核需要什么？如何修改 first.cpp（继续将 char* 放在列表中）以便将内存让给内核。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T08:42:58.607

这种行为是有意的，glibc 使用一个可调阈值来决定是否将内存实际返回给系统，或者是否缓存它以供以后重用。在您的第一个程序中，您每次都进行大量小分配，`push_back`这些小分配不是连续的块，并且可能低于阈值，因此不要返回操作系统。

清除列表后调用[`malloc_trim(0)`](http://man7.org/linux/man-pages/man3/malloc_trim.3.html)应该会导致 glibc 立即将最顶部的可用内存区域返回给系统（`sbrk`下次需要内存时需要系统调用。）

如果您确实需要覆盖默认行为（除非分析显示它确实有帮助，否则我不建议这样做），那么您可能应该使用 strace 和/或尝试 [`mallinfo`](http://www.gnu.org/software/libc/manual/html_node/Statistics-of-Malloc.html)查看程序中实际发生的情况，并可能[`mallopt`](http://www.gnu.org/software/libc/manual/html_node/Malloc-Tunable-Parameters.html)用于调整阈值用于将内存返回给系统。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T07:53:54.250

如果您再次请求它们，它会保留较小的块可用。这是一个简单的缓存优化，而不是需要关注的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T07:52:51.193

通常，分配的内存`new`只会在进程终止时返回给系统。在第二种情况下，我怀疑这`libc`是对非常大的连续块使用特殊分配器，它确实返回它，但如果你的任何一个`new char[1024]`被返回，我会感到非常惊讶，而且在许多 Unices 上，即使是大块也不会被退回。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T08:50:34.313

（编辑我的答案，因为这里真的没有任何问题。）

如前所述，这里没有真正的问题。Johnathon Wakely 一针见血。

当内存利用率不是我在 Linux 上的预期时，我通常使用该`mtrace`工具开始分析，并分析`/proc/self/maps`文件。

`mtrace`通过将代码括在两个调用中来使用，一个用于启动跟踪，一个用于结束它。

```
 mtrace();
  {
      // do stuff
  }
  muntrace(); 
```

只有设置了环境变量，`mtrace`调用才有效。`MALLOC_TRACE`它指定 mtrace 日志记录输出的文件名。然后可以分析此日志记录输出是否存在内存泄漏。调用的命令行程序`mtrace`可用于分析输出。

```
$ MALLOC_TRACE=mtrace.log ./a.out
$ mtrace ./a.out mtrace.log 
```

该`/proc/self/maps`文件提供了当前程序正在使用的内存映射区域的列表，包括匿名区域。它可以帮助识别特别大的区域，然后需要额外的侦查来确定该区域与什么相关联。下面是一个将`/proc/self/maps`文件转储到另一个文件的简单程序。

```
void dump_maps (const char *outfilename) {
  std::ifstream inmaps("/proc/self/maps");
  std::ofstream outf(outfilename, std::ios::out|std::ios::trunc);
  outf << inmaps.rdbuf();
} 
```

# asp.net-mvc - 如何在 Umbraco 5 中显示新创建的属性值？

> ID：10943908
> 
> 赞同：0
> 
> 时间：2012-06-08T06:18:28.110
> 
> 标签：asp.net-mvc, razor, umbraco, umbraco5

我只想知道如何获取 umbraco 5.. 中 4.7 版 node.GetProperty("PropertyAlias").value 中属性的值

现在。我如何在 5 中使用它？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:38:14.943

如果您正在编辑视图，并且想要显示当前页面内容中的字段，则可以动态执行此操作：

```
@CurrentPage.PropertyAlias 
```

如果您正在编辑视图，但当前页面不代表模型，或者您需要更高级的功能，您可以使用 Field 方法检索属性：

```
@Umbraco.Field(Model, "PropertyAlias") 
```

最后，如果您在代码中选择了内容节点：

```
MyContent.Field<string>("PropertyAlias") 
```

# ruby - 要散列的散列数组

> ID：10943909
> 
> 赞同：72
> 
> 时间：2012-06-08T06:18:29.697
> 
> 标签：ruby, arrays, hash

例如，我有单个哈希数组

```
a = [{a: :b}, {c: :d}] 
```

将它转换成这个的最好方法是什么？

```
{a: :b, c: :d} 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-06-08T06:22:59.100

您可以使用

```
a.reduce Hash.new, :merge 
```

直接产生

```
{:a=>:b, :c=>:d} 
```

请注意，在发生冲突的情况下，顺序很重要。后面的哈希会覆盖以前的映射，参见例如：

```
[{a: :b}, {c: :d}, {e: :f, a: :g}].reduce Hash.new, :merge   # {:a=>:g, :c=>:d, :e=>:f} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-04-30T06:57:18.167

您可以使用`.inject`：

```
a.inject(:merge)
#=> {:a=>:b, :c=>:d} 
```

[**示范**](https://repl.it/ByEz)

这会在两个合并的每次迭代中启动一个新的哈希。为避免这种情况，您可以使用破坏性`:merge!`（或`:update`，这是相同的）：

```
a.inject(:merge!)
#=> {:a=>:b, :c=>:d} 
```

[**示范**](https://repl.it/ByEz/1)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-09-29T13:16:27.567

这两个：

```
total_hash = hs.reduce({}) { |acc_hash, hash| acc_hash.merge(hash) }
total_hash = hs.reduce({}, :merge) 
```

请注意，`Hash#merge`每次迭代都会创建一个新的哈希，如果您正在构建一个大哈希，这可能是一个问题。在这种情况下，请`update`改用：

```
total_hash = hs.reduce({}, :update) 
```

另一种方法是将散列转换为对，然后构建最终散列：

```
total_hash = hs.flat_map(&:to_a).to_h 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-19T08:47:10.083

我遇到了这个答案，我想在性能方面比较这两个选项，看看哪个更好：

1.  `a.reduce Hash.new, :merge`
2.  `a.inject(:merge)`

使用 ruby​​ 基准测试模块，事实证明选项 (2)`a.inject(:merge)`更快。

用于比较的代码：

```
require 'benchmark'

input = [{b: "c"}, {e: "f"}, {h: "i"}, {k: "l"}]
n = 50_000

Benchmark.bm do |benchmark|
  benchmark.report("reduce") do
    n.times do
      input.reduce Hash.new, :merge
    end
  end

  benchmark.report("inject") do
    n.times do
      input.inject(:merge)
    end
  end
end 
```

结果是

```
 user     system      total        real
reduce  0.125098   0.003690   0.128788 (  0.129617)
inject  0.078262   0.001439   0.079701 (  0.080383) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-11T10:04:02.583

只需使用

```
a.reduce(:merge)
#=> {:a=>:b, :c=>:d} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-26T13:20:00.897

尝试这个

```
a.inject({}){|acc, hash| acc.merge(hash)} #=> {:a=>:b, :c=>:d} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-10T13:48:53.207

您可以将其转换为数组`[[:a, :b]]`，然后将所有内容转换为哈希`{:a=>:b}`

```
# it works like [[:a, :b]].to_h => {:a=>:b}

[{a: :b}, {c: :d}].map { |hash| hash.to_a.flatten }.to_h

# => {:a=>:b, :c=>:d} 
```

# .htaccess - 带有虚拟主机的htaccess不起作用

> ID：10943910
> 
> 赞同：4
> 
> 时间：2012-06-08T06:18:32.107
> 
> 标签：.htaccess, php

我有一台配置了许多虚拟主机的本地开发 Debx64 机器。主 URL 设置为

```
<VirtualHost *:80>
ServerAdmin webmaster@blah.com
ServerName blah.com 
ServerAlias blah.com 
DocumentRoot /home/blah/v1.blah.com 
<Directory /home/blah/v1.blah.com/>
            AllowOverride All
            Order allow,deny
            allow from all
</Directory>
AccessFileName .htaccess  
ErrorLog /home/blah/blah_logs/v1.blah.com.in-error_log
CustomLog /home/blah/blah_logs/v1.blah.com.in-access_log common 
</VirtualHost> 
```

并重定向到主要的操作 VH

```
<VirtualHost *:80>
 ServerAdmin webmaster@blah.com
 ServerName v1.blah.com 
 ServerAlias v1.blah.com 
 DocumentRoot /home/blah/v1.blah.com 
<Directory /home/blah/v1.blah.com/>
            AllowOverride All
            Order allow,deny
            allow from all
</Directory>
AccessFileName .htaccess  
ErrorLog /home/blah/blah_logs/v1.blah.com.in-error_log
 CustomLog /home/blah/blah_logs/v1.blah.com.in-access_log common 
</VirtualHost> 
```

我在 v1.blah.com 上设置了 .htaccess 来将 .html 解析为 .php

```
Options +ExecCGI

AddHandler php-fcgi .php .html 
Action php-cgi /home/php5-fcgi
<FilesMatch "^php5?\.(ini|cgi)$">
    Order Deny,Allow
    Deny from All
    Allow from env=REDIRECT_STATUS
</FilesMatch> 
```

如果我以 v1.blah.com 访问 URL，这很好用，但是如果我以 blah.com 访问它，则不会调用 .htaccess 并且正常提供 .html。

我错过了什么？php.ini 中是否有需要更改的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T06:25:25.953

是否有特殊原因需要为您的主机设置两个单独的条目？看到他们都使用相同的日志文件和 DocumentRoot，你能不能将 blah.com 添加到 ServerAlias 的列表中？

因此，您最终会得到以下配置：

```
<VirtualHost *:80>
ServerAdmin webmaster@blah.com
ServerName v1.blah.com
ServerAlias v1.blah.com blah.com 
DocumentRoot /home/blah/v1.blah.com 
<Directory /home/blah/v1.blah.com/>
            AllowOverride All
            Order allow,deny
            allow from all
</Directory>
AccessFileName .htaccess  
ErrorLog /home/blah/blah_logs/v1.blah.com.in-error_log
CustomLog /home/blah/blah_logs/v1.blah.com.in-access_log common 
</VirtualHost> 
```

# iphone - coreData 实体实例创建失败，使用了多对多关系。RoomOccupant 创建失败？

> ID：10943914
> 
> 赞同：0
> 
> 时间：2012-06-08T06:18:52.570
> 
> 标签：iphone, objective-c, cocoa-touch, core-data

桌子

> RoomOccupant < occupantid,relations(room,contact)>

因此，房间和联系人是 coreData 中的实体。从房间和联系人到 RoomOccupant 有一对多的关系。我已经定义了 addvalue、removevalue、addobjects 等，以正确添加 roomoccupant 关系。

因此，在创建 roomoccupant 时，我正在设置房间和居住者的联系方式。

> occupant.room = room1, occupant.contact = contact1，因此 room1 和 contact1 是在 coreData 中创建的。

但它在“occupant.contact = contact1”声明中崩溃。如果解决了将不胜感激。提前致谢。

代码：

```
-(BOOL) setChatRoomOccupant:(RoomOccupant*)occupant
{
    CDChatRoomOccupants* occupantExisted = [self getChatRoomOccupant:occupant.occupantid];
    CDObjectFactory* factory = [[MobileClient getMobileClient] getFactory];
    if (!occupantExisted) 
    {
        CDChatRoom* room = [self setChatRoom:occupant.room];
        CDContact* contact = [factory setContact:occupant.contact];

        CDChatRoomOccupants* newOccupant = [NSEntityDescription insertNewObjectForEntityForName:@"CDChatRoomOccupants" inManagedObjectContext:localContext];
        newOccupant.occupantid = occupant.occupantid;
        if (contact) {
            NSLog(@"contact details:%@,%@",contact.phoneNumber,contact.firstName);
            newOccupant.contact = contact;
        }
        if (room) {
            newOccupant.room = room;
        }
        NSError* error = nil;
        if (![localContext save:&error]) {
            return true;
        }
    }
    else{
        occupantExisted.occupantid = occupant.occupantid;
        occupantExisted.room = [self setChatRoom:occupant.room];
        occupantExisted.contact = [factory setContact:occupant.contact];
        NSError* error = nil;
        if (![localContext save:&error]) {
            return true;
        }
    }
    return false;
} 
```

# java - 设计android UI的最佳实践是什么？

> ID：10943915
> 
> 赞同：1
> 
> 时间：2012-06-08T06:18:53.853
> 
> 标签：java, android, android-layout, android-xml

我正在用 android 开发一个有 50 多个屏幕的企业应用程序，所以我必须深入研究内存管理。我对用 xml 或代码设计它的用户界面感到困惑。这里有更好的内存管理的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:41:00.220

> 具有超过 50 个屏幕的应用程序。

如果你有 50 个屏幕，那么我建议[在 android 中使用 Reuse UI Components。](http://developer.android.com/resources/articles/layout-tricks-reuse.html).

但

> 我对用 xml 或代码设计它的用户界面感到困惑

您可以两种方式都这样做但是当需要多次使用相同的视图时，请以编程方式添加视图。或者有时您需要动态添加视图然后以编程方式使用。您可以在一个应用程序中使用 xml 布局和以编程方式。

> 这里有更好的内存管理的最佳实践是什么？

两者都是与内存管理相关的最佳实践，如果您使用 xml 或代码进行接口，没有人会占用更多内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:25:00.513

@raneez，，，，应用程序设计不依赖于屏幕数量，它取决于您使用的布局类型。首选布局是线性的。图像应该正确放置在可绘制文件夹中。对于内存管理，您必须调试你的应用程序。并检查是否有任何异常发生......如果你仍然面临任何问题，请告诉我......你也可以提供一些截图......你要去的应用程序使,.,,,,,,

# android - 如何在安卓手机中通过音量键拍照

> ID：10943917
> 
> 赞同：0
> 
> 时间：2012-06-08T06:19:11.180
> 
> 标签：android, camera

当我骑自行车时，我喜欢用手机（三星 i9103 android 2.3.6）拍照。
我想把我的手机坐在自行车上，按下耳机上的音量按钮拍照。

所以我该怎么做？

我是一名网络开发者，但我可以编写一个简单的应用程序，或者是否有任何应用程序已经可以做到这一点？通过音量按钮启动相机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:23:39.873

试试这个[application1](http://www.androidzoom.com/android_applications/media_and_video/volume-key-camera_pffj.html)或[application2](http://www.androidzoom.com/android_applications/photography/volshutter-camera-free_bevax.html?nav=related)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T12:52:02.413

[https://play.google.com/store/apps/details?id=com.mgrmobi.photobutton](https://play.google.com/store/apps/details?id=com.mgrmobi.photobutton) 在我的 S4 上效果很好

你应该检查你的手机。可能它会起作用。

# core-data - 核心数据访问器 - 删除前

> ID：10943918
> 
> 赞同：1
> 
> 时间：2012-06-08T06:19:32.077
> 
> 标签：core-data, ios5

我拥有的是一个名为“MyDocument”的核心数据实体，它具有这些属性

*   文件名
*   文件扩展名
*   文件网址

我从服务器下载了一堆文件，将它们保存在磁盘上的“缓存”文件夹中，然后在数据库中为每个文档插入行。这只是使管理应用程序中的文档变得更容易，而无需列出目录内容等......

一切似乎都很好，除了当我删除实体时，我还想删除磁盘上的关联文件。我可以轻松地做这样的事情

```
for(MyDocument *myDocument in ParentEntity.mydocuments) 
{
    [[NSFileManager defaultManager] removeItemAtURL:[NSURL fileURLWithPath:myDocument.fileURL] error:nil];
    [context deleteObject:myDocument];
} 
```

但是我正在尝试通过访问器完成此操作....以便我可以`deleteObject:myDocument`从任何地方调用 - 并确保相关文件也将被删除。

我知道我可以使用 Core Data 的 External File Storage 选项而不用担心这个，但我使用 QLPreviewController 来预览这些文档，并且 QLPreviewController 需要一个文件 URL 才能预览该项目。如果我将文档保存在 Core Data 中，每次 Preview 需要它时，我都必须将文件从存储的 NSData 写入磁盘。这没有任何意义，所以我决定自己将它们存储在外部并在数据库中保留参考。

那么，我将如何编写一个自定义访问器，该访问器将在对象即将被删除之前跳转并删除关联的文件，然后继续删除实际的实体..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:33:38.903

NSManagedObject -prepareForDeletion 肯定是您需要在实体中实现的，以处理相关资源。

Core Data 在删除规则传播之前为每个删除的实体调用 prepareForDeletion 。这是实现比 Core Data 提供的非常基本规则更复杂的任何东西的正确位置。

它可以在不向 NSManagedObjectContext 添加东西的情况下工作，它将与默认的 NSManagedObjectContext -deleteObject 一起工作，并且不会与 NSUndoManager 混淆。当然，您必须为您的实体使用自定义类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:46:38.877

我认为最干净的方法是简单地将自定义方法添加到您的`NSManagedObject`子类中。下面我将其设为 的类别`NSManagedObjectContext`，但您也可以将其作为`MyDocument`实例方法来执行。通过这种方式，您可以显式删除实体和关联文档，同时仍然可以选择仅删除实体。此外，当您不再熟悉您的代码时，您将避免将来意外删除内容;-)。

```
@interface NSManagedObjectContext (customDelete)
-(void)deleteMyDocumentObjectAndAssociatedFiles:(MyDocument *)object;
@end

@implementation NSManagedObjectContext (customDelete)
-(void)deleteMyDocumentObjectAndAssociatedFiles:(MyDocument *)object {
   [[NSFileManager defaultManager] removeItemAtURL:
     [NSURL fileURLWithPath:object.fileURL] error:nil];
   [self deleteObject:object];
}
@end 
```

或者作为`MyDocument`方法（不知道这种“自我删除”是否有效）：

```
-(void)deleteSelfAndAssociatedFiles {
   [[NSFileManager defaultManager] removeItemAtURL:
     [NSURL fileURLWithPath:self.fileURL] error:nil];
   [self.managedObjectContext deleteObject:self];
} 
```

# excel - vba中的应用程序定义或对象定义错误

> ID：10943930
> 
> 赞同：2
> 
> 时间：2012-06-08T06:21:16.320
> 
> 标签：excel, vba

我在打开的按钮的单击事件中编写以下代码行`Sheet2`。但这给了我`Object Defined or Application Defined`错误。如果我删除`Worksheets("Sheet1")`，那么它将正常工作，但它会选择`Sheet2's`范围。我想要范围从`Sheet1`.

所以请帮我解决这个问题。

```
Worksheets("Sheet1").Range(Cells(2, 1), Cells(lastrow, 5)).Sort _
Key1:=Range("E2"), Order1:=xlDescending 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:22:05.073

那是因为你`Cells`没有完全定义。

尝试这个

```
With Worksheets("Sheet1")
    .Range(.Cells(2, 1), .Cells(lastrow, 5)).Sort _
    Key1:=.Range("E2"), Order1:=xlDescending
End With 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-29T06:19:30.337

我在使用 VBA 时遇到了类似的问题，我想与您分享我的解决方案，这是我的代码：

```
Range("F76").Select
With Selection
.HorizontalAlignment = xlCenter
.Font.Bold = True
.Font.Color = RGB(0, 112, 192)
.Merge
.NumberFormat = "yyyy-mm-dd;@"
With .Validation
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:="=Data"
End With
End With 
```

这个片段给我带来了麻烦。正确定义了单元格（代码中的早期代码是带有工作表激活的片段）。

解决方案只包含一行代码，我只需要添加

```
.Clear 
```

到代码，一切都恢复正常了。我希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-07-14T08:06:52.543

上面的解决方案肯定可以解决问题。但简单地在顶部添加一行也可以正常工作。

```
Sheets("Sheet1").activate 
```

# windows-phone-7 - 从屏幕键盘中删除小数点

> ID：10943931
> 
> 赞同：0
> 
> 时间：2012-06-08T06:21:18.473
> 
> 标签：windows-phone-7, on-screen-keyboard

根据这个[文件](http://msdn.microsoft.com/en-us/library/hh393998%28VS.92%29.aspx)，Windows Phone OS 7.1 上的数字小键盘应该有“.”。- 小数点。

有没有办法从键盘上删除小数点，只留下数字和退格符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:31:57.800

与其尝试修改内置键盘（您不能这样做）或尝试创建自定义键盘（要准确地重新创建本机体验需要大量工作），您可能会发现忽略不想显示的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:36:11.623

除了各种 InputScopes 之外，没有其他方法可以自定义软输入面板。但是，您可以尝试模拟 SIP，但这似乎需要做很多额外的工作才能避免使用“.”。

如果您选择走这条路，这里有一个可能会有所帮助的示例：[http ://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx](http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:38:45.083

使用 TextChanged 事件检查句点并忽略它。

# java - 使用线程池的 Eclipse Jobs API？

> ID：10943933
> 
> 赞同：3
> 
> 时间：2012-06-08T06:21:25.033
> 
> 标签：java, eclipse, multithreading, eclipse-rcp, threadpool

Eclipse 3.0 Jobs API 是否使用任何内部线程池来执行作业？还是在每次安排作业（即将开始）时创建一个新线程？

如果它不使用任何线程池，是否有可能以某种方式将作业与 Java 的 ExecutorService 一起使用，以便计划的作业将重用 Executor 池中的现有线程？

如果不是最后一个问题，是否有机会在 Eclipse 进度视图中提供进度反馈（就像我对 Jobs IProgressMonitor 所做的那样），但在常规 Java 线程中？

我真的很喜欢 Jobs API 提供的功能（尤其是进度监控和取消），但我有点担心如果它不使用线程池并且作业经常被安排，它可能会引入主 UI 线程的开销。

提前致谢！

问候，jb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:01:07.763

Eclipse Jobs 确实使用固定数量的工作线程。根据优先级将作业分配给这些工作线程。

我找不到任何说明这一点的文档，但是如果您在调试模式下启动 Eclipse 实例，您可以在线程列表中看到一些工作线程 - 这些是执行的线程作业。

# mysql - MySQL 查询效率 - 有没有更好的方法？

> ID：10943934
> 
> 赞同：0
> 
> 时间：2012-06-08T06:21:27.987
> 
> 标签：mysql, codeigniter, union, left-join

我有一个查询，它基本上结合了动作表，并按时间顺序从它们中选择，同时保留分页..

有没有更有效/更好的方法来做到这一点？查询需要 3 秒。不可怕..但我认为还有改进的余地，我会经常使用它..

谢谢！

```
SELECT 
   `newsletters_subscribers`.`email`,
   `newsletters_subscribers`.`first_name`, 
   `newsletters_subscribers`.`last_name`,
   `newsletters_subscribers`.`id` AS subscriber_id,
    COUNT(DISTINCT newsletters_opens.id) AS opens,
    COUNT(DISTINCT newsletters_clicks.id) AS clicks,
    COUNT(DISTINCT newsletters_forwards.id) AS forwards
FROM `thebookrackqccom_newsletters_subscribers` newsletters_subscribers
  LEFT JOIN 
   `thebookrackqccom_newsletters_opens` newsletters_opens
      ON `newsletters_opens`.`subscriber_id` = `newsletters_subscribers`.`id` 
      AND newsletters_opens.newsletter_id = 1
  LEFT JOIN
   `thebookrackqccom_newsletters_clicks` newsletters_clicks 
      ON `newsletters_clicks`.`subscriber_id` = `newsletters_subscribers`.`id` 
      AND newsletters_clicks.newsletter_id = 1
  LEFT JOIN
   `thebookrackqccom_newsletters_forwards` newsletters_forwards 
      ON `newsletters_forwards`.`subscriber_id` = `newsletters_subscribers`.`id` 
      AND newsletters_forwards.newsletter_id = 1
WHERE
     ( newsletters_opens.id IS NOT NULL 
    OR newsletters_clicks.id IS NOT NULL 
    OR newsletters_forwards.id IS NOT NULL ) 
GROUP BY 
   `newsletters_subscribers`.`id`
ORDER BY 
   `newsletters_subscribers`.`email` ASC
LIMIT 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:19:20.490

您需要的是查询可以使用的索引。`(newsletter_id, subscribe_id)`在三个表中的每一个上建立一个复合索引会有所帮助。

您还可以像这样重写查询：

```
SELECT 
    s.email,
    s.first_name, 
    s.last_name,
    s.id                AS subscriber_id,
    COALESCE(o.opens, 0)    AS opens,
    COALESCE(c.clicks, 0)   AS clicks,
    COALESCE(f.forwards, 0) AS forwards
FROM    thebookrackqccom_newsletters_subscribers AS s
  LEFT JOIN 
    ( SELECT subscriber_id,
             COUNT(*) AS opens
      FROM  thebookrackqccom_newsletters_opens 
      WHERE newsletters_opens.newsletter_id = 1
    ) AS o    ON o.subscriber_id = s.id
  LEFT JOIN 
    ( SELECT subscriber_id,
             COUNT(*) AS clicks
      FROM  thebookrackqccom_newsletters_clicks
      WHERE newsletter_id = 1
    ) AS c    ON c.subscriber_id = s.id
  LEFT JOIN 
    ( SELECT subscriber_id,
             COUNT(*) AS forwards
      FROM  thebookrackqccom_newsletters_forwards
      WHERE newsletter_id = 1
    ) AS f    ON f.subscriber_id = s.id
WHERE ( o.subscriber_id IS NOT NULL 
     OR c.subscriber_id IS NOT NULL 
     OR f.subscriber_id IS NOT NULL ) 
ORDER BY 
    s.email ASC
LIMIT 25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:34:35.847

试试这个查询我希望你得到更好的执行时间

询问

```
SELECT 
`newsletters_subscribers`.`email`,
`newsletters_subscribers`.`first_name`, 
`newsletters_subscribers`.`last_name`,
`newsletters_subscribers`.`id` AS subscriber_id,
@nopen := coalesce( N_OPEN.NOPENIDCOUNT, 000000 ) as opens,
@nclick := coalesce( N_CLICK.NCLICKIDCOUNT, 000000 ) as clicks,
@nfwd := coalesce( N_FWD.NFWDIDCOUNT, 000000 ) as forwards

FROM 
(select @nopen := 0,@nclick := 0,@nfwd :=0) sqlvars,

`thebookrackqccom_newsletters_subscribers` AS newsletters_subscribers

LEFT JOIN (SELECT `newsletters_opens`.`subscriber_id`,
COUNT(newsletters_opens.id) AS NOPENIDCOUNT 
FROM `thebookrackqccom_newsletters_opens` AS  newsletters_opens 
WHERE newsletters_opens.newsletter_id = 1) AS N_OPEN 
ON N_OPEN.subscriber_id = `newsletters_subscribers`.`id` 

LEFT JOIN (SELECT `newsletters_clicks`.`subscriber_id`,
COUNT(newsletters_clicks.id) AS NCLICKIDCOUNT
FROM `thebookrackqccom_newsletters_clicks` AS  newsletters_clicks 
WHERE newsletters_clicks.newsletter_id = 1) AS N_CLICK
ON N_CLICK.subscriber_id = `newsletters_subscribers`.`id`

LEFT JOIN (SELECT `newsletters_forwards`.`subscriber_id`,
COUNT(newsletters_forwards.id) AS NFWDIDCOUNT
FROM `thebookrackqccom_newsletters_forwards` AS  newsletters_forwards 
WHERE newsletters_forwards.newsletter_id = 1) AS N_FWD
ON N_FWD.subscriber_id = `newsletters_subscribers`.`id` 

GROUP BY `newsletters_subscribers`.`id`
ORDER BY `newsletters_subscribers`.`email` ASC
LIMIT 25 
```

# iphone - 适合的UILabel尺寸

> ID：10943935
> 
> 赞同：6
> 
> 时间：2012-06-08T06:21:31.750
> 
> 标签：iphone

我有一个涉及`UILabel`'s`sizeToFit`方法的问题：

```
UILabel *questionLabel = [[UILabel alloc]initWithFrame:CGRectMake(0,0,320,320)];
questionLabel.lineBreakMode = UILineBreakModeWordWrap;
questionLabel.backgroundColor=[UIColor clearColor];
questionLabel.textAlignment=UITextAlignmentLeft;
questionLabel.textColor=[UIColor blackColor];
questionLabel.tag=1;
questionLabel.font=[UIFont systemFontOfSize:13];
questionLabel.numberOfLines = 0;
[questionLabel sizeToFit];
[myView addSubview:questionLabel]; 
```

我编写了这段代码来显示我的数据。但是如果我写：`[questionLabel sizeToFit]`我的数据显示不正确。如果我删除`[questionLabel sizeToFit]`它，它会显示，但它只显示一半的数据。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T06:51:20.097

```
NSString *yourString = @"write your label text here";
CGSize s = [yourString sizeWithFont:[UIFont systemFontOfSize:12] constrainedToSize:CGSizeMake(width, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];
questionLabel.frame = CGRectMake(0, 0, s.width, s.height); 
```

检查它是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:11:19.937

我认为最好使用 taus-iDeveloper 答案来计算标签的大小。
我只想说您的代码不起作用的原因是因为您没有为 UILabel 设置文本，因此 sizeToFit 返回 CGSizeZero （因此它不会出现在屏幕上）。您必须在使用 sizeToFit 之前设置文本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-09T09:18:35.630

我发现如果 AutoLayout 处于打开状态，则适合的尺寸不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-13T20:54:33.013

我发现在将 sizeToFit 与 UILabel 一起使用时，在 InterfaceBuilder 中，您需要将 Autoshrink 属性从“固定字体大小”更改为“最小字体大小”。然后我通常将其值设置为 0.5 以确保其正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T07:25:31.703

我用谷歌搜索了上面的问题，发现了一些关于 sizeToFit 似乎是一个错误的信息，并且已经向苹果报告了。因此，作为一种解决方法，您可以使用以下代码：

```
NSString * myText = [NSString stringWithString:@"some text"];

CGFloat constrainedSize = 265.0f;

UIFont * myFont = [UIFont fontWithName:@"Arial" size:19]; 

CGSize textSize = [myText sizeWithFont: myFont
                       constrainedToSize:CGSizeMake(constrainedSize, CGFLOAT_MAX)
                           lineBreakMode:UILineBreakModeWordWrap];

CGRect labelFrame = CGRectMake (0, 0, textSize.width, textSize.height);

UILabel *label = [[UILabel alloc] initWithFrame:labelFrame];

[label setFont:myFont];

[label setText:myText]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-08T06:38:19.323

只需确保增加标签的行数即可。代替

`questionLable.numberOfLines = 0;`利用

`questionLable.numberOfLines = 4;` 因为它将强制系统计算 4 行可能的最小宽度。

您也可以通过 Xib 文件实现此目的..

# spring - JPA 和 Hibernate 与基于 Spring 的 Web 应用程序的有效混合

> ID：10943937
> 
> 赞同：1
> 
> 时间：2012-06-08T06:21:40.523
> 
> 标签：spring, hibernate, spring-data-jpa

我正在研究一个使用 Spring 和 JPA 的新 Web 应用程序。我想知道通过使用 org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter 的 jpaVendorAdapter，哪些 Hibernate 真正被使用或通过此配置可用（参见下面的配置）？

在搜索代码库的其余部分时，我只在代码中找到了对 Hibernate 的缓存引用的 POJO/实体。为什么在这里使用 Hibernate 缓存？是否有 JPA 选项可以替代对 Hibernate 的任何依赖？

```
import org.hibernate.annotations.Cache;
import org.hibernate.annotations.CacheConcurrencyStrategy;
import javax.persistence.Entity;
import javax.persistence.Table;

@Entity
@Table(name = "test")
@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE) 
```

**Spring contextConfigLocation 文件摘录：**

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean
                class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="MYSQL" />
                <property name="showSql" value="false" />
            </bean>
        </property>
    </bean>
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/app" />
        <property name="username" value="root" />
        <property name="password" value="pwd" />
    </bean> 
```

# c# - 在 WCF 中使用 Post Sharp

> ID：10943939
> 
> 赞同：1
> 
> 时间：2012-06-08T06:21:54.617
> 
> 标签：c#, wcf, custom-attributes, postsharp

我创建了一个权限属性，并在我用 BLL 编写的方法中使用了它。如果我需要，它可以正常工作并且调试良好。但是当我在我的中使用相同的属性时，`WCF layer`它就会**停止工作**。没有给出任何错误，但没有检查权限，也没有调试。代码只是忽略了属性。

为了简单起见，我使用这种方法

我的 WCF 方法调用与 WCF 方法在同一类中定义的另一个方法，并且该子方法调用 BLL，并且该子方法具有权限属性。

但是没有用。请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:01:22.390

PostSharp 是构建过程的一部分。我怀疑包含您的 WCF 服务的库没有运行 PostSharp 后编译过程，该过程将属性代码与您自己的代码交织在一起。如果它不是你的断点......等等。对于 PostSharp 代码将不起作用。

通常，后编译过程由位于开发 PC 系统托盘中的后台应用程序完成。但是可以禁用它。我不知道您是如何编译 WCF 服务库的。

您可以手动将 PostSharp 添加到您的项目中：

*   [手动将 PostSharp 添加到您的项目中](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/41129237-a5d4-4acf-aef4-c46759ccfb4b.htm#manually)

引用 PostSharp 文档：

1.  使用文本编辑器打开项目文件（csproj、vbproj、...）。如果您的项目已在 Visual Studio 中加载，请打开解决方案资源管理器，右键单击项目名称，单击“卸载项目”，然后再次右键单击同一项目并单击“编辑”。

2.  找到文件末尾附近的元素。例如，C# 2.0 项目应该以类似于以下的元素结束：

    <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />

3.  **在**导入行之前，插入以下文本：

    <PropertyGroup><DontImportPostSharp>True</DontImportPostSharp></PropertyGroup>

4.  **在**C#/VB 导入行之后，插入以下文本：

    <Import Project="....\第三方\PostSharp 2.0\PostSharp.targets" />

5.  保存文件并重新加载项目。

6.  编译。

如果您从 BLL 程序集中调用方法，请检查 PostSharp 后编译过程是否也正确运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:28:35.353

我不知道 PostSharp 但是：

我的第一步是反射 P​​ostSharp 编织 IL 以查看生成的代码。看起来对吗？

我假设该方面着眼于一些安全上下文信息。如果上下文无效，您是否在忽略处理的方面有保护代码？Persmission 属性是否会在不告诉您的情况下处理此问题。

换句话说，Permission 属性是否设计为与 WCF 请求端点一起使用？

# c# - Twitter 流 API C#

> ID：10943941
> 
> 赞同：7
> 
> 时间：2012-06-08T06:21:58.700
> 
> 标签：c#, twitter, oauth, streaming

嗨，有人知道如何使用 C# 的流 API 吗？因此，每当我的帐户中有新的推文时，它都会反映在我的程序中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-13T08:01:29.270

到目前为止，我在.Net 领域找到的唯一***可靠***[的包装器是TweetInvi](https://tweetinvi.codeplex.com)。试着忽略这个网站看起来像是由一个活跃的 10 岁的孩子设计的（感谢 MS 'metro' 团队），实际的图书馆设计得非常好并且坚如磐石。

当然假设你有相关的访问令牌（如果没有看到[http://dev.twitter.com](http://dev.twitter.com)），一个启动和运行是多么容易的例子：

```
TwitterCredentials.SetCredentials(userToken,userTokenPrivate,apiKey,apiKeyPrivate);
_userStream = Stream.CreateUserStream();
_userStream.TweetCreatedByFriend += (sender,args) => Console.WriteLine(args.Tweet.Text);
_userStream.Start(); 
```

这会将推文的正文写入您的控制台输出，并且它的更新速度甚至比打开实际的 Twitter 网站还要快。当一条推文被收藏、转发、当你有一个新的关注者等时，还会暴露其他事件。

我可以保证这个库是可靠的——我将它用于我的[CovertTweeter](https://github.com/nathanchere/CovertTweeter)项目并且完全没有问题。事实上，通过 TweetInvi 访问流 API 甚至比我在使用 Linq2Twitter 和 TweetSharp 等 REST 包装器时碰到的许多砖墙还要容易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T09:58:50.197

看看这个帖子：

[使用新的 .NET HttpClient 和 HttpCompletionOption.ResponseHeadersRead 进行流式传输](http://www.tugberkugurlu.com/archive/streaming-with-newnet-httpclient-and-httpcompletionoption-responseheadersread)

你没有完整的实现，但你会明白的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T06:31:00.297

这是一个示例，“从 Twitter 流 API 读取数据并将其添加到 MSMQ。第二个进程（包括）从队列中读取，解析 json 消息，并更新数据存储。”

[https://github.com/swhitley/TwitterStreamClient](https://github.com/swhitley/TwitterStreamClient)

您可以更改上述问题以在更新数据存储时生成事件。在您的程序中，您可以订阅此事件来做任何您想做的事情。

如果您正在寻找基于 OAuth 的示例，请使用为 Twitter、Facebook、LinkedIn 和 Google 提供 .NET oAuth 的“AuthPack”：

[https://github.com/swhitley/AuthPack/tree/master/AuthPack](https://github.com/swhitley/AuthPack/tree/master/AuthPack)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T05:13:48.440

我在这里找到了一个很好的使用流 API 的示例代码[Twitterizer](https://github.com/Twitterizer/Twitterizer)。

# c# - 使用 split 创建新字符串

> ID：10943945
> 
> 赞同：0
> 
> 时间：2012-06-08T06:22:39.143
> 
> 标签：c#

我正在使用 Split 来选择长字符串的不同部分。然后我还使用 Split 再次将相同的字符串重建回长字符串，但没有字符串的第一部分

```
string.Split(',')[1] + "," + string.Split(',')[2] + "," + string.Split(',')[3] .... 
```

我正在使用的字符串

```
string info = "id,title,director,actor1,actor2,actor3,genre,runtime,year,comment"; 
```

我的问题是是否有一种简单而简单的方法来重建字符串而不像我一样使用拆分？由于我想要字符串的所有部分都没有第一部分，即 id，那么应该有一种简单的方法来删除第一个逗号之前的所有内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T06:25:23.320

你把事情复杂化了：

```
info = info.SubString(info.IndexOf(',') + 1); 
```

第一个更快，这个只是为了完整起见：

```
info = info.Remove(0, info.IndexOf(',') + 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:28:38.360

我想您不知道子字符串的长度，但是您想删除第一个逗号之前的所有内容（包括逗号），所以最简单的做法可能是寻找这个逗号的位置，然后取走之后的所有内容：

```
int idx = info.IndexOf(',');
string result = info.Substring(idx + 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T06:33:15.023

一遍又一遍地分割同一个字符串是没有意义的。此外，可以使用 String.Join 来连接字符串

你写：

```
var str="moo,id,title,director,actor1,actor2,actor3,genre,runtime,year,comment";
var parts=str.Split(',');
var newStr=String.Join(",",parts,1,parts.Length-1);
Console.WriteLine(newStr); 
```

更好的是使用 IndexOf 查找第一次出现的 ',' 并在第一个逗号之后返回字符串：

```
 var newStr=str.Substring(str.IndexOf(',')+1); 
```

如果要将第一个元素与字符串的其余部分分开，可以使用 Substring 执行此操作：

```
 var firstComma=str.IndexOf(',');
    var newStr=str.Substring(firstComma+1);
    var firstStr=str.Substring(0,firstComma); 
```

# php - 传递自定义验证消息

> ID：10943952
> 
> 赞同：0
> 
> 时间：2012-06-08T06:23:00.717
> 
> 标签：php, codeigniter

在 Codeigniter 2 中有一种方法可以在下面的数组中自定义验证消息，而不是**$this->form_validation->set_message**

```
 $ValidationRules = array(
               array('field'   => 'address_line1', 
                     'label'   => 'Address Line1', 
                     'rules'   => 'trim|min_length[2]|max_length[40]|xss_clean'),
               array('field'   => 'address_line2', 
                     'label'   => 'Address Line2', 
                     'rules'   => 'trim|min_length[2]|max_length[40]|xss_clean'),
               array('field'   => 'address_line3', 
                     'label'   => 'City', 
                     'rules'   => 'trim|min_length[2]|max_length[40]|xss_clean')
                );

    $this->form_validation->set_rules($ValidationRules);
    if ($this->form_validation->run() == FALSE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:29:01.433

如果您想要每个规则的消息，您可以创建一个以规则为键的新数组。

```
 $validationMessages = array('min_length' => 'String not long enough', 'max_length' => 'String too long');
            $this->addMessage($field, $validationMessages[$key]); 
```

'Field' 表示发生验证错误的字段，'key' 是出现问题的特定业务规则。您可以通过向消息添加自定义变量来扩展它，以显示更准确的消息：

```
 $validationMessages = array('min_length' => '{field} not long enough', 'max_length' => '{field} too long');
            $this->addMessage($field, str_replace('{field}', $field['label'], $validationMessages[$key]); 
```

# android - 在android中扭曲图像

> ID：10943956
> 
> 赞同：10
> 
> 时间：2012-06-08T06:23:13.397
> 
> 标签：android

我需要像在 google Play中的应用程序**Photo Warp中一样扭曲图像。**我在 [BitMapmesh.java](http://www.devdaily.com/java/jwarehouse/android-examples/platforms/android-2/samples/ApiDemos/src/com/example/android/apis/graphics/BitmapMesh.java.shtml)中使用 warp但是，我需要**Photo Warp中的其他类型**

[扭曲 http://evergreenhits.com/ad/PhotoShare.png](http://evergreenhits.com/ad/PhotoShare.png)

请给我任何建议。

# java - 复制哈希图

> ID：10943958
> 
> 赞同：0
> 
> 时间：2012-06-08T06:23:15.033
> 
> 标签：java

我有一个结构

```
HashMap<String,HashMap<Integer, HashMap<Integer, question>>> lang=new HashMap<String,HashMap<Integer, HashMap<Integer, question>>>();

HashMap<Integer,HashMap<Integer,question>> section= new HashMap<Integer,HashMap<Integer,question>>();
HashMap<Integer,question> questions= new HashMap<Integer,question>(); 
```

根据我的逻辑，我填写问题，部分

```
while(logic){
    for(someother logic){

        //make the skeleton structure of the object
        questions.add(integer,object);
    }
    section.add(integer,map3);
} 
```

现在我使用这个 map2 作为骨架并进行更改

```
HashMap<Integer,HashMap<Integer,object>> tempMap= new HashMap<Integer,HashMap<Integer,object>>();
while(logicnew){
    while(logic 2){
        tempMap = new HashMap(section);
        while(logic 3){
            tempMap2 = new HashMap(tempMap.get(integer));
            //make my changes
        }
    }
    lang.add(integer,tempMap);
} 
```

多种语言有多个部分，多个部分有多个问题。问题是值正在被写入，即如果我有第一语言的法语文本和第二语言的英语文本，我只会在我制作的两个语言映射中看到英文文本。你能告诉我有什么问题吗？让我知道是否有更好的方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:41:56.787

HashMap 是一个通过引用传递的对象（您应该阅读此内容）。

如果要重用 map2，请确保正确克隆 map2。否则，您对 map2 所做的修改将反映在所有 HashMap 实例中。

在重用 map2 之前执行此操作：

```
map2 = (HashMap) map2.clone(); 
```

请注意，这是一个浅拷贝。

阅读此处了解更多信息： http: [//docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#clone%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#clone%28%29)

HashMap的深度克隆：

```
public HashMap deepClone(HashMap map) {
    HashMap clone = new HashMap();
    Iterator it = map.keySet().iterator();

    while (it.hasNext()) {
        Object key = it.next();
        Object value = map.get(key);
        clone.put(key.clone(), value.clone());
    }
    return clone;
} 
```

这只是一个示例实现，为您提供了一个可以使用的模板。您应该确保 HashMap 是类型安全的，并且键和值具有 Object.clone() 的深层克隆实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:47:40.800

当您从 map2 创建临时哈希映射时，它会创建新的映射对象。但是这个新地图 (tempMap) 的值与您在 map2 中的对象相同。因此，如果您在 tempMap 中更改值对象 - map2 中也会发生相同的更改。简单的克隆没有帮助 - 它只克隆 HashMap，而不是键和对象。所以你必须在复制时克隆你的对象（ke）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:52:21.340

问题是您正在`HashMap`使用浅拷贝复制 s，这是所有 Java 集合的默认行为。让我们将其简化为仅一级`HashMap`。考虑以下代码：

```
Date date1 = new Date(1000);
Date date2 = new Date(2000);
HashMap<String, Date> map1 = new HashMap<String, Date>();
map1.put("one", date1);
map1.put("two", date2);
HashMap<String, Date> map2 = new HashMap<String, Date>(map1);
map2.get("one").setTime(3000); 
```

发生的情况是第二个`HashMap`( `map2`) 将包含相同的`Date`s实例`map1`。`date1`,`map1.get("one")`并且`map2.get("one")`将引用同一个`Date`对象，因此以下表达式都将`3000`作为结果返回：

```
date1.getTime();
map1.get("one").getTime();
map2.get("one").getTime(); 
```

当您将另一个`HashMap`放入`HashMap`. 从第二次迭代开始，您将`HashMap`一遍又一遍地修改相同的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T17:53:41.140

我已经深度克隆（使用 object`serialization`和`deserialization`）该部分`hashmap`并存储在 temp 中`hashmap`，并使用 temp`hashmap`添加问题文本，现在可以根据语言添加问题文本，制作我的 lang `hashmap`。

# c++ - 如何从 c 中的文件中删除记录（保存的记录是 struct ）

> ID：10943960
> 
> 赞同：2
> 
> 时间：2012-06-08T06:23:18.000
> 
> 标签：c++, c, io

我有一个列出学生的程序，它可以添加新学生，通过学生编号从列表中搜索甚至删除学生，它包含一个学生信息结构。所有信息都在一个名为 REG.DAT 的文件中。我的问题出在 >>DELETE<< 部分。我想按学生编号从列表中删除一个学生，但是当我这样做时，我将列表的其余部分丢失给必须删除的人。请帮我解决这个问题。这是我的代码：

```
void _remove()
{
    int std_num = 0 , k ;
    int status = 1 , i = -1 , j = 0  ; 
    struct students read[100] ,temp;
    FILE *p ;

    p = fopen("reg.dat","rb");
    if(!p)
    {
        system("cls");
        cout << ">>>>>Register file could not be opened! call the support .<<<<<" << endl;
        _menu();
    }
    while(!feof(p))
    {
        fread(&read[i],sizeof(struct students),1,p) ;
        i++;
    }
    cout << "Enter STD NO. to delete from the list : " << endl ;
    cin >> std_num ;
    for( j = 0 ; j < i ; j++)
    {
        if(std_num == read[j].std_num)
        {
            for( k = j + 1 ; k < i ; k++)
            {
                memcpy(&read[k-1] , &read[k],sizeof (students));
            }
        }
    }
    fclose(p);

    FILE *fp;
    fp = fopen("reg.dat","wb"); 
    for( int l = 0 ; l < i - 2 ; l++)
        fwrite(&read[l], sizeof(struct students), 1 ,fp );
    fclose(fp);
    system("cls") ;
    cout << "STD with NO. " << std_num << " has been removed" << endl ; 
    _menu();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:30:21.120

您不应该使用`memcpy`重叠的内存部分。您应该改用[memmov](http://www.cplusplus.com/reference/clibrary/cstring/memmove/)。正如 memmov 描述所述：

*移动内存块 将 num 个字节的值从源指向的位置复制到目标指向的内存块。复制就像使用中间缓冲区一样进行，**允许目标和源重叠。***

另外： -找到学生编号后，您可以
使用语句停止迭代第一个循环。`break`

亲切的问候，
博

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:26:23.010

通常的做法是

*   将`bool is_deleted`成员添加到`struct student`.
*   删除学生时，将结构更新`is_deleted`为 true。
*   阅读学生记录时，忽略已删除的记录。
*   提供一个程序，逐条读取整个文件记录并将其复制到另一个文件，跳过已删除的记录。然后将此其他文件重命名为原始名称。定期调用此过程，或在程序启动时调用，或仅根据需要手动调用。

# php - cakephp 强制关闭 http 连接继续运行脚本

> ID：10943962
> 
> 赞同：0
> 
> 时间：2012-06-08T06:23:23.987
> 
> 标签：php, ajax, cakephp, forceclose

我需要在后台运行一个非常长的过程。该程序应该将请求详细信息发送到服务器，服务器返回一个进程ID。程序应该在某个时间间隔发送一个带有该 ID 的检查请求，以查看该过程是否完成。一切正常，除了我无法关闭连接并且客户端在进程完成之前无法接收 ID。我尝试使用这篇文章：[http](http://codehackit.blogspot.com/2011/07/how-to-kill-http-connection-and.html) ://codehackit.blogspot.com/2011/07/how-to-kill-http-connection-and.html但它仍然没有关闭连接。这是我到目前为止所做的：

```
$id = time();

$this->Session->write(sprintf('LongProcess.%s.finished', $id), false);

$this->Response->data(array('process_id' => $id));

ob_end_clean();
ob_start();

$this->Response->render();

header("Connection: close");
ob_end_flush();
ob_flush(); 
flush();

ignore_user_abort(true);
set_time_limit(0);

// Do really long processing here 
```

为了帮助解释，`$this->Response`是我编写的用于处理 ajax 调用的组件。该`data()`方法将数据添加到组件中的数组中。该`render()`方法将所有数据格式化为客户端使用的特定规范，并使用`$this->controller->render('/Elements/response');`.

如何强制关闭连接，以便客户端可以继续做其他事情？

# iphone - 从 URL 获取位置的资产实例

> ID：10943965
> 
> 赞同：0
> 
> 时间：2012-06-08T06:23:46.613
> 
> 标签：iphone, ios5, cllocation, alassetslibrary

我正在尝试获取已保存照片的位置坐标。我的网址是：

```
NSURL *photoUrl = [info objectForKey:UIImagePickerControllerReferenceURL]; 
```

现在我正在尝试使用

> "valueForProperty:ALAssetPropertyLocation"

它适用于 ALAsset 对象。

如何从 photoURL 获取 ALAsset 对象实例？

我试图避免带有结果/失败块的“assetForURL”。

谢谢， 塔拉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:22:42.767

获得 ALAsset 的唯一方法是使用assetForURL: 块。

您可以枚举库中的所有 ALAsset，并将它们与您从保存的照片中获得的 NSURL 匹配。

# scala - “def someFun[_] (a:Int) = a”，没有警告也没有错误。普通的？

> ID：10943969
> 
> 赞同：4
> 
> 时间：2012-06-08T06:23:58.970
> 
> 标签：scala, types, type-inference

出于好奇，我尝试运行以下命令：

```
def someFun[_](a:Int) = a 
```

令我惊讶的是，没有发出任何错误或警告，并且它以您期望的方式运行（我想这很好）但是编译器不理解类型参数的冗余是否正常，或者它可能意味着它的某些东西（语义上？）与此不同：

```
def someFun(a:Int) = a 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T06:42:40.093

编译器生成这个：

```
def someFun(a: Int): Int = a; 
```

但这并不是因为编译器知道这是未使用的，而是因为类型擦除。您可以使用`-print`编译器的选项检查这样的事情。这也不足为奇，因为它只是一个未使用的类型参数。

# javascript - javascript中的倒计时和倒计时

> ID：10943970
> 
> 赞同：2
> 
> 时间：2012-06-08T06:24:02.783
> 
> 标签：javascript, html, countdown

我们的网站上有一个在线测验部分，它有一个 JavaScript 代码，用于计算我们的测试人员参与特定测试的时间：

[小提琴](http://jsfiddle.net/hRF6P/)

此代码中的 526 表示从测验开始经过的秒数

```
document.writeln("<span id=\"time_online1\"></span>");
zi_inceput1 = new Date();
ceas_start1 = zi_inceput1.getTime();

function initStopwatch1() {
    var timp_pe_pag1 = new Date();
    return ((timp_pe_pag1.getTime() + (1000 * 526) - ceas_start1) / 1000);
}

var time = 5 * 60;

function getSecs1() {
    var tSecs1 = Math.round(initStopwatch1());
    var iSecs1 = time - tSecs1 % 60;
    var tMins1 = Math.round(iSecs1 / 60);
    var iMins1 = time - tMins1 % 60;

    var sSecs1 = iSecs1 % 60;
    var sMins1 = iMins1 % 60;

    if (sMins1 === '0' && sSecs1 === '0') {
        alert('time is up and you can not continue, the test is submited.');
        document.getElementById('time_online1').innerHTML = "times up";
        document.qs.submit();
    } else {

        document.getElementById('time_online1').innerHTML = sMins1 + ":" + sSecs1;
        window.setTimeout('getSecs1()', 1000);

    }

}
window.setTimeout('getSecs1()', 1000) 
```

现在我想添加一个名为“测试时间限制”的新功能，例如用户只有 60 分钟进行测试：所以计数器应该开始倒计时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:35:56.373

嗨，这是您修改后的功能，它确实倒计时功能
**Javascript**

```
document.writeln("<span id=\"time_online1\"></span>");
zi_inceput1 = new Date();
ceas_start1 = zi_inceput1.getTime();

function initStopwatch1() {
    var timp_pe_pag1 = new Date();
    return ((timp_pe_pag1.getTime() + (1000 * 0) - ceas_start1) / 1000);
}
var tim = 05;
function getSecs1() {
    var tSecs1 = Math.round(initStopwatch1());
    if((tim-tSecs1)>=0)
    {
    var iSecs1 = (tim-tSecs1) % 60;

    var iMins1 = Math.round((tSecs1 - 30) / 60);
    var iHour1 = Math.round((iMins1 - 30) / 60);
    var iMins1 = iMins1 % 60;
    var min = Math.floor((tim-tSecs1) / 60);
    var iHour1 = iHour1 % 24;
    var sSecs1 = "" + ((iSecs1 > 9) ? iSecs1 : "0" + iSecs1);
    var sMins1 = "" + ((iMins1 > 9) ? iMins1 : "0" + iMins1);
    var sHour1 = "" + ((iHour1 > 9) ? iHour1 : "0" + iHour1);
    document.getElementById('time_online1').innerHTML = min + ":" + sSecs1;
    window.setTimeout('getSecs1()', 1000);
}
else
    alert("time up");
}
window.setTimeout('getSecs1()', 1000)​ 
```

您可以在[jsfiddle](http://jsfiddle.net/NejiHyuga/hRF6P/19/)上测试解决方案 。这是否完成了你的要求哥们..

更新了西北。

# c++ - 来自 C++ 中不同基类的模棱两可的函数

> ID：10943971
> 
> 赞同：0
> 
> 时间：2012-06-08T06:24:15.683
> 
> 标签：c++, inheritance, ambiguity

以下代码：

```
class Base1
{
public:
    void go() {}
};

class Base2
{
public:
    void go(int a) {}
};

class Derived : public Base1, public Base2 {};

int main()
{
    Derived d;

    d.go(3);

    return 0;
} 
```

编译时会报错：

```
g++ -o a a.cc
a.cc: In function ‘int main()’:
a.cc:19:7: error: request for member ‘go’ is ambiguous
a.cc:10:10: error: candidates are: void Base2::go(int)
a.cc:4:10: error:                 void Base1::go()
make: *** [a] Error 1 
```

很容易看出基类中的原型是不同的。但是为什么编译器不能检测到这一点并自动选择匹配的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T06:32:18.983

不允许跨类边界重载函数。您可以通过像这样编写 Derived 类来解决此问题 -

```
class Derived : public Base1, public Base2
{
public:
    using Base1::go;
    using Base2::go;
}; 
```

# charts - jqPlot中annotatedTimeLine插件的使用

> ID：10943974
> 
> 赞同：3
> 
> 时间：2012-06-08T06:24:30.220
> 
> 标签：charts, jqplot, annotatedtimeline

我是新手`jqPlot`，我目前正在使用它来根据一些统计数据生成图表。我想为我的一张图表使用带注释的时间线。[我在https://bitbucket.org/j5bot/jqplot](https://bitbucket.org/j5bot/jqplot)找到了插件 。是否有任何示例代码来演示这种用法？我尝试在系列默认选项中使用它：

`seriesDefaults: {renderer:annotatedTimelineRenderer}`

但这似乎不起作用。有人可以举例说明它的用法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T16:38:25.317

据我所知，j5bot 创建了 jqPlot 主代码的一个分支，特别是对于时间线。J5 在 Google Group 中谈论它，并提供了一个关于它可以在[这里](http://screencast.com/t/mHY5eUV99XaT)做什么的截屏视频。[j5bot的fork](https://bitbucket.org/j5bot/jqplot/compare/default..cleonello/jqplot%3adefault#diff) （examples/rangeSelector.php）中似乎提供了一个额外的示例文件，虽然我没有看到它明确调用annotatedTimelineRenderer，但我真的无法想象示例文件还有什么用途，所以这个可能是开始的地方。

J5bot 还对其他文件进行了更改，因此您也需要获取这些版本 - 而不仅仅是将插件放入 Chris 的 jqPlot 代码中。

# php - 在 wordpress 多站点中创建博客后更新当前用户的主博客

> ID：10943976
> 
> 赞同：0
> 
> 时间：2012-06-08T06:24:57.580
> 
> 标签：php, wordpress, wpmu

我想将当前用户的主博客更新为在 wp-signup.php 表单上注册博客后创建的博客。以便将当前用户的主博客设置为他创建的博客。

我试过这个，但它不起作用，

```
add_action('wpmu_new_blog','update_primary_blog',10);

function update_primary_blog() {
global $wpdb;
update_user_meta( get_current_user_id(), 'primary_blog', $wpdb->insert_id );
} 
```

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:20:27.040

尝试这个：

```
<?php
add_action('wpmu_new_blog','update_primary_blog',10, 1);
function update_primary_blog($blog_id) {
    update_user_meta( get_current_user_id(), 'primary_blog', $blog_id);
} 
```

钩子上的更多信息（和参数）：
[http ://adambrown.info/p/wp_hooks/hook/wpmu_new_blog?version=3.3&file=wp-includes/ms-functions.php](http://adambrown.info/p/wp_hooks/hook/wpmu_new_blog?version=3.3&file=wp-includes/ms-functions.php)

# php - 我需要在 FancyBox 文件中替换什么以使其出现在父级中？

> ID：10943978
> 
> 赞同：0
> 
> 时间：2012-06-08T06:25:08.560
> 
> 标签：php, javascript, jquery, fancybox

在我的 javascript 中，我有这个功能：

```
$(document).ready(function() {
    var no_of_galleries = $('.gallery').length;
    for ( var i = 1 ; i < no_of_galleries ; i++ ) {
         $("a[rel=photo_open" + i + "]").fancybox();
    }
}); 
```

我尝试了一切但我无法在父母中打开它。我用 iframe 调用这个文件，我想在父级而不是 iframe 中打开图像。

如果有解决方案，请告诉我，如果没有，请告诉我我需要在 fancybox 文件中更改什么，以便它将在父级中打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:34:59.780

解决了！

更改以下内容：

第 351 行从 'height' : $(document).height() 到 'height' : $(window.parent.document).height()

第 1039 行从 $('body').append( 到 window.parent.$('body').append(

第 674 至 677 行

```
$(window).width() - (currentOpts.margin *2),
$(window).height() - (currentOpts.margin * 2),
$(document).scrollLeft() + currentOpts.margin,
$(document).scrollTop() + currentOpts.margin 
```

到

```
$(window.parent.window).width() - (currentOpts.margin * 2),
$(window.parent.window).height() - (currentOpts.margin * 2),
$(window.parent.document).scrollLeft() + currentOpts.margin,
$(window.parent.document).scrollTop() + currentOpts.margin 
```

真的行！！我已经测试过了

# c# - 通用表达式过滤器

> ID：10943981
> 
> 赞同：3
> 
> 时间：2012-06-08T06:25:11.983
> 
> 标签：c#, linq, generics, expression

嗨，我希望有人能够提供以下一些指导：

我正在尝试创建一个使用反射的通用表达式过滤器，它可以接收一组规则并创建一个有效的表达式来限制从数据源返回的数据。

我遇到的问题是试图了解如何编写表达式来处理以下场景。

```
public class Item
{
    public string Name { get; set; }
    public List<TagTypes> TagTypes { get; set; }
}

public class TagTypes
{
    public string Name { get; set; }
    public List<Tags> Tags { get; set; }
}

public class Tags
{
    public string TagName { get; set; }
} 
```

数据基本上看起来像

```
var itemList = new List<Item>
            {
                new Item
                {
                Name = "xyz",
                TagTypes = new List<TagTypes>
                    {
                        new TagTypes
                        {
                            Name = "Genre",
                            Tags = new List<Tags>
                                {
                                new Tags
                                    {
                                        TagName = "tag1"
                                    },
                                new Tags
                                    {
                                        TagName = "tag2"
                                    }        
                                }
                        }
                    }
               }

            }; 
```

我想写一个表达式，返回所有与“流派”过滤器匹配的项目——>“tag1”

我可以使用以下方法来做到这一点：

```
var filtered = from item in itemList
from tagType in item.TagTypes
   where tagType.Name == "Genre"
      from tag in tagType.Tags
      where tag.TagName == "tag1"
select item 
```

并且有一个基本的工作版本，它适用于 Item 类的属性，但是我不知道如何在 TagTypes 及以下执行 SelectMany。

基本级别只是以下

```
var parameter = Expression.Parameter(typeof(T), "itemList");
var property = GetPropertyInfo<T>({Propertyname});
var propertyAccess = Expression.MakeMemberAccess(parameter, property);
Expression.Equal(propertyAccess, Expression.Constant({Value})); 
```

* * *

**编辑**

数据存储在 NoSQL 数据库中，过滤器是动态的，可以更改和添加。

使用反射创建通用过滤器的原因是为了适应不同的过滤器，而不必预先知道它们是什么。用户将能够使用过滤器 id 请求数据，然后这将根据请求中的过滤器选择数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:29:43.240

我想你可能过于复杂了。

您可以只写一个`Expression<Func<Item>>`或`Expression<Func<List<Item>>`并选择该`Body`属性。

例如

```
 Expression<Func<List<Item>> createListOfItems = () => new List<Item>
        {
            new Item
            {
            Name = "xyz",
            TagTypes = new List<TagTypes>
                {
                    new TagTypes
                    {
                        Name = "Genre",
                        Tags = new List<Tags>
                            {
                            new Tags
                                {
                                    TagName = "tag1"
                                },
                            new Tags
                                {
                                    TagName = "tag2"
                                }        
                            }
                    }
                }
           }

        }; 
```

# python - 从 QuickFix 窗口应用自动 pep8 修复

> ID：10943987
> 
> 赞同：16
> 
> 时间：2012-06-08T06:26:08.517
> 
> 标签：python, vim, pep8, python-mode

### 背景：

我正在使用（很棒的）Vim 插件[python-mode](https://github.com/klen/python-mode)，其中包括 pep8 linter。该`:PyLint`命令运行所有 linter 并在 QuickFix 窗口中打开错误。

### 问题：

现在，假设我只使用 pep8 linter，并且我有一个充满错误的 QuickFix 窗口。我想逐步检查每个错误并应用自动修复（使用类似 autopep8 的东西）。autopep8 工具很棒，但它会出错。理想情况下，我希望能够监督 Vim 中的每个修复（应用修复、检查、移动到下一个修复）。

我目前的方法是在我的 Python 文件上运行[autopep8](http://pypi.python.org/pypi/autopep8/)，比较结果，然后修复任何错误的更改：

```
$ autopep8 --in-place spam.py
$ git difftool spam.py  # check edits in gVim, write to file
$ git commit spam.py -m "Fix bad PEP8 formatting" 
```

但是，这种方法破坏了我的撤消历史，并且看起来不必要地复杂。有没有更好的办法？

### 问题：

有没有办法在 QuickFix 窗口中自动将 pep8 修复（如果可用）应用于 pep8 错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T23:50:18.203

## 选项

有两个简单的答案不会消除您的撤消历史记录。

### 1\. 与 Vim 中保存的文件进行比较

`DiffWithSaved`很久以前在网上发现了这个功能，非常好用。在这种情况下，您只需在终端中运行 autopep8，当`Gvim`要求重新加载文件时，选择否，然后运行此功能，它将弹出一个包含新文件的暂存缓冲区并允许您进行更改。

```
" copy this to your vimrc or source it

" tells vim not to automatically reload changed files
set noautoread 

function! DiffWithSaved()
  let filetype=&ft
  diffthis
  vnew | r # | normal! 1Gdd
  diffthis
  exe "setlocal bt=nofile bh=wipe nobl noswf ro ft=" . filetype
endfunction

" sets up mappings to function

com! DiffSaved call DiffWithSaved()
map <Leader>ds :DiffSaved<CR> 
```

一旦你运行它，你可以使用 vim [copy-diff 和其他 diff 命令](http://vimdoc.sourceforge.net/htmldoc/diff.html#copy-diffs)来快速完成并接受/不接受更改。另外，所有内容都将存储在撤消历史记录中。

```
" run these commands after sourcing the above function

" % expands to filename (also %:h to head, %:t to tail)
" if it throws an error, just do :cd %:h first

:!autopep8 --in-place %
:DiffSaved 
```

### 2\. 与 git 比较`difftool`并重新加载文件

如果你想与 git index 中的文件进行比较（并使用 git 的 difftool），你可以执行以下操作：

1.  让 gvim 打开，
2.  在终端中运行您的命令，让程序打开一个新的 gvim（或 vim）实例来处理差异。
3.  全部保存。
4.  回到你原来的 gvim，让 vim 重新加载文件，（至少据我所知）你的撤销历史应该保留。

## 优点缺点

**选项1**

好处：

*   每个更改都将保存在您的撤消历史记录中
*   vim 中的图形差异易于阅读

缺点：

*   不会使用 git 的 difftool
*   依赖于vim的`diff`功能。

**选项 2**

好处：

*   使用 git 的 difftool
*   更清晰的撤消历史记录（来自 autopep8 前后的单个撤消 - 非常取决于您想要的内容）

缺点：

*   似乎更尴尬
*   粒度较小的撤消历史记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T16:01:37.380

您还可以使用出色的[vim-autopep8](https://github.com/tell-k/vim-autopep8)

# recursion - T(n)=2T(n/2) + n*log(logn) 的解

> ID：10943992
> 
> 赞同：0
> 
> 时间：2012-06-08T06:26:51.763
> 
> 标签：recursion, complexity-theory, big-o

我正在努力解决这个等式。我得出结论，主定理不适用于这种情况，因此我尝试连续替换这些项以求解该方程，但无法继续。有人能告诉我解决这个问题的最佳方法是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:53:34.050

正如您推断的那样，由于情况三的条件失败，我们不能使用主定理。

但首先我们有 n^(log_b a) = n(log_2 2) = n

现在 n < n* log(log(n))

因此，与其他项 n*(log(log n)) 相比，递归项 2T(n/2) 的贡献不断减少……因此我们现在可以忘记该项……

现在考虑术语 n(log(log n))

扩大重复，但我们重视这个术语，我们有，

T(n) = 2^k * T(n/2^k) + n [ log(log(n/2^(k-1))) + log(log(n/2^(k-2)) .....]

把 2^k 作为我们的 n，

T(n) =*忽略第一项*+ n [ log(log(2)) + log(log(4)) +.....+ log(log(2^(k-1))) ]

T(n) =*忽略第一项*+ n [ log(1) + log(2) + log(3) +......+ log(k-1) ]

T(n) =*忽略第一项*+ n [ log((k-1)!) ]

我们只需要一个上限，因此我们可以利用斯特林近似，

嗯！< (n/e)^n

因此（k-1）！~ ((k-1)/e)^(k-1)

因此 log((k-1)!) = (k-1)[(log(k-1) - log (e)]

但是 k = log n => [ log((k-1)!) ] = (log(n) - 1) [log(log(n)-1 - log(e)]

因此我们的术语 n [ log((k-1)!) ] = n*log(n)*log(log(n)) 和一些我们可以忽略的低阶术语..

因此答案是：O(n*log(n)*log(log(n)))

PS：我不确定这个答案，请检查并告诉我是否犯了一些错误！

# blackberry - 标题和标签字段栏中的问题

> ID：10943995
> 
> 赞同：-1
> 
> 时间：2012-06-08T06:26:59.657
> 
> 标签：blackberry, blackberry-jde

我有一个标题栏，就在它下面我有一个标签字段，我遇到了一个问题，当我向下滚动标签字段“timezoneTitle”时不可见。它只有在我向上滚动时才可见。我想保留它即使用户上下滚动也已修复，如何处理？

```
LabelField title= new LabelField("welcome", LabelField.FIELD_RIGHT);

hfm.add(title);

 // title for timezone
  LabelField timezoneTitle = new LabelField("", LabelField.ELLIPSIS
            | LabelField.USE_ALL_WIDTH | LabelField.FIELD_HCENTER) {
        public void paint(Graphics graphics) {
            graphics.setColor(Color.WHITE);
            graphics.setBackgroundColor(Color.BLUE);
            graphics.clear();
            super.paint(graphics);
        }
    };
setTitle(vm);
add(timezoneTitle ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:27:31.483

让我们采用一个主要的垂直字段 VFM ......将 hfm 添加到 VFM(vfm.add(hfm)) 并将时区字段添加到 VFM(vfm.add(tzmger))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:18:25.503

将主屏幕划分为两个垂直字段管理器（vfm1 和 vfm2）并将这两个字段添加到缅因屏幕（VFM），第一个将时区添加到 vfm1 并将标签字段添加到 vfm2。（对于 vfm1 设置标志 NO_VERTICALSCROLL）。

# ruby-on-rails - 我可以在 rails 项目中为 params hash 的元素指定名称（例如 ':name' 而不是 ':id' ）吗？

> ID：10943996
> 
> 赞同：2
> 
> 时间：2012-06-08T06:27:05.177
> 
> 标签：ruby-on-rails, routing, routes, url-routing

我的路线.rb：

```
Temp::Application.routes.draw do
  resources :categories, path: '', only: [:index] do
    resources :entries, path: '', only: [:index, :show]
  end
end 
```

这导致以下路线：

```
 $ rake routes
    category_entries GET /:category_id(.:format)     entries#index
      category_entry GET /:category_id/:id(.:format) entries#show
          categories GET /                           categories#index 
```

问题：**我可以以某种方式指定以下参数：：category_id，：id？**

更详细...我需要这个，因为我不想在我的路径中使用 ID，而是使用名称，例如：`http://localhost:3000/cat1/ent11`. 我的条目控制器是：

```
class EntriesController < ApplicationController
  def index
    @entries = Category.where(name: params[:category_id]).first.entries
  end

  def show
    entries = Category.where(name: params[:category_id]).first.entries
    @entry = entries.select { |e|
      e.name == params[:id]
    } .first
  end
end 
```

如果我可以写一些类似的东西，而不是`params[:category_id]`，这段代码会更容易理解： ，。 **我怎样才能做到这一点？**`params[:id]``params[:category_name]``params[:entry_name]`

 **更新：*我想保持我的路线足智多谋......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:33:28.920

在您的 routes.rb 中，您可以添加该行

```
match ':controller/:action/:category_name/:entry_name' 
```

让某个控制器接收您想要的参数。请参阅[http://guides.rubyonrails.org/routing.html#non-resourceful-routes](http://guides.rubyonrails.org/routing.html#non-resourceful-routes)。**

# javascript - 如何将包含科学记数法的字符串转换为正确的 Javascript 数字格式

> ID：10943997
> 
> 赞同：59
> 
> 时间：2012-06-08T06:27:11.510
> 
> 标签：javascript, string, numbers, format

我有一个字符串`e.g: "4.874915326E7"`。将其转换为 javascript 数字格式的最佳方法是什么？（整数或浮点数）？如果我尝试 parseInt()，最后的***E***将被忽略。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-06-08T06:29:45.103

### 编辑：

*这个答案似乎引起了一些混乱。最初的问题是询问如何将字符串形式的科学记数法转换为数字（以便可以用于计算）。但是，找到此答案的大量人似乎认为这是关于将 javascript 表示为科学记数法的数字转换为更美观的格式。如果这实际上是您的目标（演示），那么您应该将数字转换为字符串。请注意，这意味着您将无法在计算中轻松使用它。*

### 原答案：

将其作为字符串传递给 Number 函数。

```
Number("4.874915326E7") // returns 48749153.26
Number("4E27") // returns 4e+27 
```

### 将科学计数法中的数字转换为字符串：

这最好由[另一个问题](https://stackoverflow.com/questions/1685680/how-to-avoid-scientific-notation-for-large-numbers-in-javascript)来回答，但从那个问题我个人喜欢[使用的解决方案`.toLocaleString()`](https://stackoverflow.com/a/50978675/854246)。请注意，该特定解决方案不适用于负数。为了您的方便，这里有一个例子：

```
(4e+27).toLocaleString('fullwide', {useGrouping:false}) // returns "4000000000000000000000000000" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-08T06:36:34.123

尝试这样的事情

# [演示](http://jsfiddle.net/pGahX/)

```
Number("4.874915326E7").toPrecision() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-04T18:36:42.960

您还可以`+`在字符串前面使用符号来获取数字。

```
+"4.874915326E7" // == 48749153.26 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-05-19T21:52:50.077

我有这样的价值，`3.53048874968162e-09`并且使用`Number.toFixed(20)`对我有用：

```
value = new Number('3.53048874968162e-09')
//[Number: 3.53048874968162e-9]
value.toFixed(20)
//'0.00000000353048874968' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-17T19:23:28.350

使用 MathJs 库对我来说效果最好，尝试了很多这些答案，但在某些情况下它们都不能正常工作。这非常有效。更多信息请访问[https://mathjs.org/](https://mathjs.org/)

解决方案，添加 MathJS，然后像这样调用它：

```
<script src="https://cdn.jsdelivr.net/npm/mathjs@8.0.1/lib/browser/math.js"  crossorigin="anonymous"></script>

    function toPlainString(num) {
        return math.format(num,  {notation: 'fixed'});
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-20T02:17:56.550

**前言**

尽管其他答案已经足够且正确，但为了能够正确解析字符串中的数字，了解类型强制（在您的情况下为转换）至少在高级别上如何工作很有用。

**强制规则**

`parseInt`当您调用, `parseFloat`,`Number`构造函数或一元运算符等实用程序时，有一些规则定义了如何执行转换`+`：

`parseInt(<value>, [radix])`功能：

*   忽略前导空格 ( `" 24"`-> `24`)
*   空字符串返回`NaN`
*   第一个非数字字符完成解析（`" 42answer"`-> `42`）
*   在上述规则下，小数位也完成解析

第三条规则正是为什么忽略指数部分（`ExponentPart`由[标准](https://tc39.es/ecma262/#prod-ExponentIndicator)中定义的`ExponentIndicator`和组成） - 一旦遇到字符，解析停止并且函数返回到目前为止解析的数字。事实上，它更早停止 - 当第一次遇到小数点时（参见最后一条规则）。`SignedInteger``e`

`parseFloat()`与 相同`parseInt`，除了：

*   它解析第一个小数点
*   忽略前导`0`（因此无法解析十六进制）

根据经验，您应该`parseInt`在转换为“整数”和`parseFloat`“浮点”时使用（注意它们实际上是相同的类型）。

`Number()`构造函数和一元`+`：

*   对于 boolean -> `true`to `1`, `false`to`0`

*   对于`null`-> `0`（因为`null`是假的）

*   对于`undefined`->`NaN`

*   对于数字：直通

*   对于字符串：

    *   只有数字 [0-9] 字符，以数字或`+`或`-`-> 数字（整数）开头
    *   相同，但包含浮点 -> 数字（浮点）
    *   包含十六进制 -> 数字（整数）
    *   空字符串->`0`
    *   所有其他情况->`NaN`
*   对于对象，`valueOf()`调用它们的方法。如果结果为`NaN`，则`toString()`调用方法。在引擎盖下，对象被转换为基元，而基元被转换为数字。

*   对于符号和 BigInts ->`TypeError`被抛出

**数字格式注意事项**

由于该问题仍然吸引与格式有关的答案和评论（如已接受的答案所有效说明的那样），因此应该说明：

> 应用于编程，**“数字格式”**有一个严格的含义：
> **数值的表示**
> 
> **“转换”**也有严格意义上的**类型转换**（见[标准](https://tc39.es/ecma262/#sec-type-conversion)）

ECMAScript 实现*双精度 64 位格式*，这是它唯一的“格式”。该问题询问有关*将 String 转换为数字格式*的问题，因此答案应提供以下信息：

> 给定值表示电子符号中的数字，如何将字符串转换为数字

**参考**

1.  `ToNumber` ECMAScript 标准中的[抽象操作](https://tc39.es/ecma262/#sec-tonumber)
2.  我在这个主题和其他许多方面的最佳读物之一：Matt Frisbie 的“面向 Web 开发人员的专业 Javascript”。
3.  类型强制解释（[博客文章](https://www.freecodecamp.org/news/js-type-coercion-explained-27ba3d9a2839/)）