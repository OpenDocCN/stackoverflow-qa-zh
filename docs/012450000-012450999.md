# StackOverflow 问答 12450000-12450999

# c# - 将项目添加到列表中的组合框

> ID：12450001
> 
> 赞同：0
> 
> 时间：2012-09-16T19:27:45.587
> 
> 标签：c#

我有一个清单

```
List<Control> inputBoxes = new List<Control>(); 
```

我在其中添加了组合框和文本框。

我可以设置 text 属性， `inputBoxes[0].GetType().GetProperty("Text").SetValue(inputBoxes[0], "ABC", null);` 但如何将项目添加到组合框并选择它们？

我可以`inputBoxes[0].GetType().GetMethod()`以某种方式使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:31:33.563

为什么你使用反射来简单地设置一个属性？

您可以使用它更有效且不易出错：

```
inputBoxes.OfType<TextBox>().ElementAt(0).Text = "ABC"; 
```

如果要将项目添加到一个（或多个）组合框：

```
var combos =  inputBoxes.OfType<ComboBox>();
foreach(ComboBox combo in combos)
{
    // add items here or set their DataDource, for example:
    string[] installs = new string[]{"Typical", "Compact", "Custom"};
    combo.Items.AddRange(installs);
} 
```

`using System.Linq`请注意，您需要添加`OfType`

# r - 从 r 中的两个高斯混合生成样本（MATLAB 中给出的代码）

> ID：12450007
> 
> 赞同：5
> 
> 时间：2012-09-16T19:29:00.470
> 
> 标签：r, matlab, plot, gaussian, sample

我正在尝试创建（在 r 中）等效于以下 MATLAB 函数，该函数将从 N(m1,(s1)^2) 和 N(m2, (s2)^2) 的混合中生成 n 个样本，其中包含一个分数，alpha，来自第一个高斯。

我有一个开始，但是 MATLAB 和 R 之间的结果明显不同（即，MATLAB 结果偶尔给出 +-8 的值，但 R 版本甚至从未给出 +-5 的值）。**请帮我解决这里有什么问题。**谢谢 ：-）

例如：从 N(0,1) 和 N(0,36) 的混合中绘制 1000 个样本，其中 95% 的样本来自第一个高斯。将样本归一化为均值零和标准差一。

**MATLAB**

*功能*

```
function y = gaussmix(n,m1,m2,s1,s2,alpha)
y = zeros(n,1);
U = rand(n,1);
I = (U < alpha)
y = I.*(randn(n,1)*s1+m1) + (1-I).*(randn(n,1)*s2 + m2); 
```

*执行*

```
P = gaussmix(1000,0,0,1,6,.95)
P = (P-mean(P))/std(P)
plot(P)
axis([0 1000 -15 15])
hist(P)
axis([-15 15 0 1000]) 
```

*结果图*

![从 MATLAB 中的两个高斯分布中随机生成的样本图](../Images/d7ab98d2578fba6223eebe86be6d8435.png)

*结果历史*

![从 MATLAB 中的两个高斯分布随机生成的样本的直方图](../Images/ebd4dc55782251922445fcb2671d7819.png)

**R**

```
yn <- rbinom(1000, 1, .95)
s <- rnorm(1000, 0 + 0*yn, 1 + 36*yn)
sn <- (s-mean(s))/sd(s)
plot(sn, xlim=range(0,1000), ylim=range(-15,15))
hist(sn, xlim=range(-15,15), ylim=range(0,1000)) 
```

*结果图*

![从 R 中的两个高斯分布中随机生成的样本图](../Images/916060e0d9831d9b9bc1335be58724c3.png)

*结果历史*

![从 R 中的两个高斯分布随机生成的样本的直方图](../Images/6f9d08c70c1991edac1e1bdf2a897ec0.png)

一如既往，谢谢！

**解决方案**

```
gaussmix <- function(nsim,mean_1,mean_2,std_1,std_2,alpha){
   U <- runif(nsim)
   I <- as.numeric(U<alpha)
   y <- I*rnorm(nsim,mean=mean_1,sd=std_1)+
       (1-I)*rnorm(nsim,mean=mean_2,sd=std_2)
   return(y)
}

z1 <- gaussmix(1000,0,0,1,6,0.95)
z1_standardized <- (z1-mean(z1))/sqrt(var(z1))
z2 <- gaussmix(1000,0,3,1,1,0.80)
z2_standardized <- (z2-mean(z2))/sqrt(var(z2))
z3 <- rlnorm(1000)
z3_standardized <- (z3-mean(z3))/sqrt(var(z3))

par(mfrow=c(2,3))
hist(z1_standardized,xlim=c(-10,10),ylim=c(0,500),
   main="Histogram of 95% of N(0,1) and 5% of N(0,36)",
   col="blue",xlab=" ")
hist(z2_standardized,xlim=c(-10,10),ylim=c(0,500),
   main="Histogram of 80% of N(0,1) and 10% of N(3,1)",
   col="blue",xlab=" ")
hist(z3_standardized,xlim=c(-10,10),ylim=c(0,500),
   main="Histogram of samples of LN(0,1)",col="blue",xlab=" ")
##
plot(z1_standardized,type='l',
   main="1000 samples from a mixture N(0,1) and N(0,36)",
   col="blue",xlab="Samples",ylab="Mean",ylim=c(-10,10))
plot(z2_standardized,type='l',
   main="1000 samples from a mixture N(0,1) and N(3,1)",
   col="blue",xlab="Samples",ylab="Mean",ylim=c(-10,10))
plot(z3_standardized,type='l',
  main="1000 samples from LN(0,1)",
   col="blue",xlab="Samples",ylab="Mean",ylim=c(-10,10)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T19:55:43.340

我认为有两个问题......（1）您的 R 代码正在创建*标准偏差为 1 和 37*的正态分布的混合。(2) 通过在调用中设置`prob`等于 alpha ，您将在*第二种*模式而不是第一种模式下`rbinom()`获得分数 alpha 。所以你得到的是一个分布，它主要是一个 sd 37 的高斯分布，被 5% 的高斯和 sd 1 的混合污染，而不是一个 sd 1 的高斯分布，被 5% 的高斯和 sd 6 的混合污染. 通过混合物的标准偏差（大约为 36.6）进行缩放，基本上将其降低为标准高斯，在原点附近有轻微的凸起......

 *（此处发布的其他答案确实很好地解决了您的问题，但我认为您可能对诊断感兴趣......）

您的 Matlab 函数的更紧凑（也许更惯用）版本`gaussmix`（我认为`runif(n)<alpha`比 更有效`rbinom(n,size=1,prob=alpha)`）

```
gaussmix <- function(n,m1,m2,s1,s2,alpha) {
    I <- runif(n)<alpha
    rnorm(n,mean=ifelse(I,m1,m2),sd=ifelse(I,s1,s2))
}
set.seed(1001)
s <- gaussmix(1000,0,0,1,6,0.95) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T17:39:47.210

并不是您要求它，而是该`mclust`软件包提供了一种将您的问题推广到更多维度和不同协方差结构的方法。见`?mclust::sim`。示例任务将以这种方式完成：

```
require(mclust)
simdata = sim(modelName = "V",
              parameters = list(pro = c(0.95, 0.05),
                                mean = c(0, 0),
                                variance = list(modelName = "V", 
                                                d = 1, 
                                                G = 2,
                                                sigmasq = c(0, 36))),
              n = 1000)
plot(scale(simdata[,2]), type = "h") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:48:54.037

我最近写了正态分布的多项混合的密度和采样函数：

```
dmultiNorm <- function(x,means,sds,weights)
{
  if (length(means)!=length(sds)) stop("Length of means must be equal to length of standard deviations")
  N <- length(x)
  n <- length(means)
  if (missing(weights))
  {
    weights <- rep(1,n)  
  }
  if (length(weights)!=n) stop ("Length of weights not equal to length of means and sds")
  weights <- weights/sum(weights)
  dens <- numeric(N)
  for (i in 1:n)
  {
    dens <- dens + weights[i] * dnorm(x,means[i],sds[i])
  }
  return(dens)
}

rmultiNorm <- function(N,means,sds,weights,scale=TRUE)
{
  if (length(means)!=length(sds)) stop("Length of means must be equal to length of standard deviations")
  n <- length(means)
  if (missing(weights))
  {
    weights <- rep(1,n)  
  }
  if (length(weights)!=n) stop ("Length of weights not equal to length of means and sds")

  Res <- numeric(N)
  for (i in 1:N)
  {
    s <- sample(1:n,1,prob=weights)
    Res[i] <- rnorm(1,means[s],sds[s])  
  }
  return(Res)
} 
```

作为`means`均值`sds`向量，作为标准偏差向量，并且`weights`作为具有从每个分布中采样的比例概率的向量。这对你有用吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T20:39:55.017

这是执行此任务的代码：

“例如：从 N(0,1) 和 N(0,36) 的混合中绘制 1000 个样本，其中 95% 的样本来自第一个高斯。将样本归一化为均值零和标准差一。”

```
 plot(multG <- c( rnorm(950), rnorm(50, 0, 36))[sample(1000)] , type="h")
 scmulG <- scale(multG)
 summary(scmulG)
 #-----------    
   V1          
 Min.   :-9.01845  
 1st Qu.:-0.06544  
 Median : 0.03841  
 Mean   : 0.00000  
 3rd Qu.: 0.13940  
 Max.   :12.33107 
```

![在此处输入图像描述](../Images/944bb07081411006df11d212c814b4fc.png)*

# java - 使我的观点向右对齐

> ID：12450014
> 
> 赞同：1
> 
> 时间：2012-09-16T19:29:53.513
> 
> 标签：java, android, xml, user-interface, alignment

好吧，我要做的是：将 imageview 设置在右侧，并且 3 个 textview 将位于**相对于 image 的左侧**。使用以下 XML 代码，imageview 位于左侧，3 个 textview 位于 imageview 的右侧。

这是它现在的样子： ![在此处输入图像描述](../Images/e4d8cb94fdaee2d19114cd1d722c3236.png)

正如我所说，我希望图像在右侧对齐，3 个文本视图在图像左侧。

所以这是当前的 xml： http: [//pastebin.com/r68S1QKv](http://pastebin.com/r68S1QKv)

如果我将 LinearLayout 更改为 RelativeLayout（这样我可以使用 alignParentRight = true），则 textviews 会相互堆叠并且不会垂直显示。

请给点建议好吗？

**编辑：**看起来我还没有澄清想要的外观，这是我想要的说明：![在此处输入图像描述](../Images/a2eb9bd1660fe8d3363ef1af60de8bd0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:35:52.113

您可以做的 - 制作外部`RelativeLayout`，制作图像`alignParentRight=true`，将文本视图放在单独的线性布局中（垂直方向），将您`LinearLayout`的文本视图与图像视图的左边缘对齐（`layout_toLeftOf="@+id/img_id"`）。

这是我按照这种方法设法做的事情：

![在此处输入图像描述](../Images/7fcb555ccf1ada79b55b6e47381080ea.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_toLeftOf="@+id/img"
        android:orientation="vertical"
        android:id="@+id/text_container">

        <TextView 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="text1"/>
        <TextView 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="text2"/>
        <TextView 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="text3"/>

    </LinearLayout>

    <ImageView 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/icon"
        android:id="@+id/img"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:45:20.103

使用此代码。使用 RelativeLayout 作为父级并将 android:layout_alignParentRight="true" 分配给他的孩子，这会将您的所有视图设置为右侧。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   >

    <LinearLayout
        android:layout_width="wrap_content"
    android:layout_marginRight="20dp"

        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/row_title"
                style="bold"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="hey1" />

            <TextView
                android:id="@+id/row_subtitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="hey2" />

            <TextView
                android:id="@+id/row_postcode_city"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="hey3" />
        </LinearLayout>

        <ImageView
            android:id="@+id/icon"
            android:layout_marginRight="20dp"
             android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

</RelativeLayout> 
```

# php - 将域重定向到不同服务器上的特定文件夹

> ID：12450015
> 
> 赞同：0
> 
> 时间：2012-09-16T19:30:09.863
> 
> 标签：php, networking, redirect, cross-domain, web-hosting

我想要像 www.bigcommerce.com 和 www.buildabazaar.com 这样的电子商务平台。我已经完成了后端编码。我为每个客户添加了一个唯一的识别号，以区分他们的产品和选择。当客户注册时，将在我的域中创建一个具有其唯一 ID 的文件夹，其中将保存他的所有图像和样式。我创造了这样的。但是当客户从我这里购买计划并且他将更改名称服务器时，我被卡住了，他应该让他的网站显示在他的域中。

我不知道这些东西是如何工作的。请有人建议我如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:51:01.960

您需要使用 Apache 的[mod_rewrite](http://httpd.apache.org/docs/2.2/rewrite/)并为每个域定义一个重写规则以将其映射到正确的文件夹。

像这样的东西：

```
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteRule ^/?(.*)$ /customer/private/folder/$1 [L] 
```

我不能肯定它会完全适合你的设置，所以你应该阅读 mod_rewrite。它非常强大，应该可以处理您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:35:39.240

您必须使用`mod_rewrite`才能做到这一点（实际上），而不是通过在文件系统上创建一个真正的文件夹！

**编辑：**如果您`Apache`用作 Web 服务器。

# java - 使用 Play 框架进行图像处理

> ID：12450018
> 
> 赞同：1
> 
> 时间：2012-09-16T19:30:27.837
> 
> 标签：java, image, playframework

我有以下代码从 facebook 获取个人资料图片，如有必要调整其大小，并将其裁剪为漂亮的方形图片：

```
 url = new URL(profilePictureUrl);
            InputStream stream = url.openStream();

            // Create the file from the URL
            File temp = File.createTempFile(Codec.UUID(), "temp");
            OutputStream out = null;
            try {
                out = new FileOutputStream(temp);
            } catch (FileNotFoundException e1) {
                Logger.error("SF-ERROR : Error creating temp file", e1);
            }

            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = stream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }

            stream.close();
            out.close();

            String uuid = Codec.UUID();
            File resizedFile = File.createTempFile("resized-" + uuid, ".image");
            File croppedFile = File.createTempFile("cropped-" + uuid, ".image");

            // Check that this is in fact, an image
            if (temp != null && ImageIO.read(temp) != null) {

                int height = ImageIO.read(temp).getHeight();
                int width = ImageIO.read(temp).getWidth();

                double newWidth = (height * 180) / (width);

                boolean high = false;
                boolean wide = false;

                if (newWidth > 220) {
                    high = true;
                }
                if (newWidth < 140) {
                    wide = true;
                }

                if (height > width) {
                    // Resize the image to a width of 180 pixels.
                    Images.resize(temp, resizedFile, 180, -1);
                } else {
                    // Resize the image to a height of 180 pixels.
                    Images.resize(temp, resizedFile, -1, 180);
                }

                // Crop the remaining width or height to 180 pixels. This way we get a nice square picture.
                if (high) {
                    Images.crop(resizedFile, croppedFile, 0, 20, 180, 200);
                } else if (wide) {
                    Images.crop(resizedFile, croppedFile, 20, 0, 200, 180);
                } else {
                    Images.crop(resizedFile, croppedFile, 0, 0, 180, 180);
                } 
```

宽高的布尔值在那里，因此作物大致在中间。

这行得通，但要花很多时间。

任何人都可以看到这是否可以更快地完成，或者我做错了什么？

# php - 在 Wordpress 中发布帖子并根据自定义字段元填充字段时运行 SQL 函数

> ID：12450019
> 
> 赞同：4
> 
> 时间：2012-09-16T19:30:27.727
> 
> 标签：php, sql, wordpress

每当我发布帖子时，我都想运行一个 sql 查询。我只是不确定如何将它包装在一个函数中，以及在哪里粘贴该函数以在我单击发布时生效。以下命令是我需要的，它在 phpMyAdmin-SQL 中成功运行，并且它也正确反映在我的 wordpress 后端中。

```
INSERT INTO  `databasename`.`wp_xxxxxx` (
`id` ,
`name` ,
`item_number` ,
`price` ,
`options_2`) VALUES (
'9',  'xxxx1',  'xxxx2',  'xxxxx3', 'xxxx4'
); 
```

但是，当我每次保存帖子时，如何在我的 functions.php 文件中让它在 PHP 中运行？我尝试了以下方法，但我确定它是正确的，因为我之后进行了刷新并且没有创建表：

```
function do_my_stuff($post_ID)  {
mysql_query("INSERT INTO  `databasename`.`wp_xxxxx` (
`id` ,
`name` ,
`item_number` ,
`price` ,
`options_2`) VALUES (
'9',  'xxxx1',  'xxxx2',  'xxxx3', 'xxxxx4'");
   return $post_ID;
} 
```

add_action('save_post', 'do_my_stuff');

发布帖子时。它实际上是一个需要一些细节的产品。

这是我想要填充的 sql 查询的值。

*   id = 帖子的 postID 编号。
*   名称=帖子标题
*   item_number = 它应该是一个自定义字段发布元值，来自一个名为“scode”的字段，目前我通过以下方式在我的单页模板上回显它：

    ID, 'scode', true) ) echo do_shortcode(get_post_meta($post->ID, 'scode', $single = true)); ?>
*   价格 = 价格，我也通过一个名为“价格”的自定义字段手动输入，我目前通过以下方式回显：

*   options_2，我也通过名为“variations”的自定义字段值手动输入。

这一切都可以这样完成吗？

也许是这样的：

```
 INSERT INTO  `databasename`.`wp_cart66_products` (
    `id` ,
    `name` ,
    `item_number` ,
    `price` ,
    `options_2`) VALUES (
    '9',  '<?php the_title(); ?>',  '<?php if ( get_post_meta($post->ID, 'scode', true) ) echo do_shortcode(get_post_meta($post->ID, 'scode', $single = true)); ?>',  '<?php $values = get_post_custom_values("price"); echo $values[0]; ?> ', '<?php $values = get_post_custom_values("variations"); echo $values[0]; ?>   '
    ); 
```

请注意，我对 php 或 SQL 并不了解。我花了几个小时试图找到尽可能多的信息来提供可靠的请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T02:48:05.280

您已经很接近了，当您将帖子保存到参考时，您定义的函数正在运行`add_action`，但内容`do_my_stuff()`并不完全正确。

推荐使用`$wpdb`全局变量访问数据库，甚至引用表。例如，如果您使用默认前缀，`wp_`您希望`$wpdb->users`为`wp_users`表使用。如果它不是标准表但仍然使用前缀，例如插件，则可以使用`{$wpdb->prefix}tablename`. 您还应该使用它`$wpdb->prepare`来帮助确保生成有效的 SQL（以及防止 SQL 注入）。

试试这个：

```
function do_my_stuff($post_ID)  {
    global $wpdb; // the wordpress database object

    // check if this is a revision, if so use the parent post_id
    if ($parent_id = wp_is_post_revision( $post_id )) $post_ID = $parent_id;

    // load the post
    $post = get_post($post_ID);

    // load postmeta values
    $scode = get_post_meta($post_ID, 'scode', true);
    $price = get_post_meta($post_ID, 'price', true);
    $variations = get_post_meta($post_ID, 'variations', true);

    // create sql, use %d for digits, %s for strings
    $sql = $wpdb->prepare("INSERT INTO {$wpdb->prefix}xxxxx (id, name, item_number, price, options_2) VALUES (%d, %s, %s, %s)", $post_ID, $post->post_name, $scode, $price, $variations);

    // run the query
    $wpdb->query($sql);
}
// add custom function to run on post save
add_action('save_post', 'do_my_stuff'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:58:16.393

```
function do_my_stuff($post_ID) {
    global $post,$wpdb;
    $tablename="wp_cart66_products";

    if($post->post_type == "post" && strlen( get_post_meta($post_ID, 'price', true))>0 )    {
        $id = $wpdb->get_var("SELECT id FROM ".$tablename." WHERE id=".$post_ID);
        $data=array(
            'id'=>$post_ID,
            'item_number'=>get_post_meta($post->ID, 'scode', true),
            'name'=>$post->post_title,
            'price'=>get_post_meta($post->ID, 'price', true),
            'options_2'=>get_post_meta($post->ID, 'variations', true)
        );

        $where = array("id" => $post_ID);

        // Possible format values: %s as string; %d as decimal number; and %f as float.
        $format=array( '%d', '%s', '%s', '%s', '%s');
        $where_format = array( '%d' );

        if($id>0){
            // update
            $wpdb->update( $tablename,$data, $where, $format, $where_format);
        }else{
            // insert
            $wpdb->insert( $tablename,$data,$format);
        }
    }
    return $post_ID;
}

add_action('publish_post', 'do_my_stuff'); 
```

# c - malloc 时大小为 4 的无效写入

> ID：12450022
> 
> 赞同：0
> 
> 时间：2012-09-16T19:31:08.057
> 
> 标签：c, malloc, valgrind

我的程序是这样的：

```
char *line = "hello a b c d e f g ";
/* split it into words */
char **argv = NULL;
**argv = malloc(sizeof(char*));
if (*argv = NULL)
    printf("null malloc");
    printf("malloc ok");
    int i;
    for (i=0;;i++){
        printf("i=%d", i);
        line = strwrd(line, argv[i], 1024, " \t");
        printf("strwrk ok");
        if (argv[i] = NULL)
             break;
        **argv = realloc(*argv, (i+2)*sizeof(char*));   
        printf("realloc ok");
    }
} 
```

当我在 valgrind 中运行它时，它说：

```
==22169== Invalid read of size 4
==22169==    at 0x804858B: main (printTest.c:27)
==22169==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

因为我是 C 的菜鸟，所以我不知道 malloc 是否有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:32:59.480

```
**argv = malloc(sizeof(char*)); 
```

应该

```
argv = malloc(sizeof(*argv)); 
```

# android - “onSaveInstanceState 后无法执行此操作” - 为什么我会从我的活动的 onResume 方法中收到此异常？

> ID：12450024
> 
> 赞同：30
> 
> 时间：2012-09-16T19:31:09.810
> 
> 标签：android, android-fragments, illegalstateexception

我的活动使用 ACTION_IMAGE_CAPTURE 意图调用相机。如果相机活动成功返回，我会在 onActivityResult 回调中设置一个标志，并根据该标志的值在我的 onResume 中启动一个片段，为捕获的图像添加标题。这似乎工作正常。

我刚刚从“狂野”那里得到了一个堆栈跟踪，抱怨我在调用 onSaveInstanceState 后试图提交一个片段事务。但我正在我的 onResume 方法中进行提交！为什么android会抱怨这个？我确实在我的 AndroidManifest.xml 中设置了**android:configChanges="orientation|keyboardHidden|keyboard|screenSize"**，因此方向更改不应该触发这个....

这发生在运行 4.0.4 的三星 Galaxy S3 (SGH-i747) 上

这是堆栈：

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
    at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1314)
    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1325)
    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:548)
    at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:532)
    at com.Familiar.Android.FamiliarAppV1.AddPhotosActivity2.performFragmentTransition(AddPhotosActivity2.java:278)
    at com.Familiar.Android.FamiliarAppV1.AddPhotosActivity2.switchToCaptionsFragment(AddPhotosActivity2.java:438)
    at com.Familiar.Android.FamiliarAppV1.AddPhotosActivity2.onResume(AddPhotosActivity2.java:167)
    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1158)
    at android.app.Activity.performResume(Activity.java:4544)
    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2448)
    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2486)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1187)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4514)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
    at dalvik.system.NativeStart.main(Native Method) 
```

感谢任何帮助或智慧。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-16T19:35:06.830

我**想**我知道答案 - 我正在使用来自 v4 兼容性库的 FragmentActivity，因此我需要在 onResumeFragments 而不是 onResume 中执行我的片段事务。有人可以确认吗？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-15T16:56:43.997

您可以使用该方法 `commitAllowingStateLoss()`

但请注意，您可能会丢失活动状态，正如您在 google 的[android 参考](http://developer.android.com/reference/android/app/FragmentTransaction.html#commitAllowingStateLoss%28%29) 中看到的那样，该参考通过以下方式解释了两者之间的不同

> 与 commit() 类似，但允许在保存活动状态后执行提交。这是危险的，因为如果活动需要稍后从其状态恢复，提交可能会丢失，因此这应该只用于 UI 状态可以在用户上意外更改的情况。

根据我的经验，它`addToBackStack`有时可能会导致该方法不起作用，因此您需要在片段上手动添加它，当然不会保存状态（文本框文本分机）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T09:18:08.460

这对我有用......我自己发现了这个......希望它对你有帮助！

1) 没有全局“静态”FragmentManager / FragmentTransaction。

2）onCreate，总是再次初始化FragmentManager！

下面的示例：-

```
public abstract class FragmentController extends AnotherActivity{
protected FragmentManager fragmentManager;
protected FragmentTransaction fragmentTransaction;
protected Bundle mSavedInstanceState;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mSavedInstanceState = savedInstanceState;
    setDefaultFragments();
}

protected void setDefaultFragments() {
    fragmentManager = getSupportFragmentManager();
    //check if on orientation change.. do not re-add fragments!
    if(mSavedInstanceState == null) {
        //instantiate the fragment manager

        fragmentTransaction = fragmentManager.beginTransaction();

        //the navigation fragments
        NavigationFragment navFrag = new NavigationFragment();
        ToolbarFragment toolFrag = new ToolbarFragment();

        fragmentTransaction.add(R.id.NavLayout, navFrag, "NavFrag");
        fragmentTransaction.add(R.id.ToolbarLayout, toolFrag, "ToolFrag");
        fragmentTransaction.commitAllowingStateLoss();

        //add own fragment to the nav (abstract method)
        setOwnFragment();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-06T12:09:38.633

当我尝试在 onActivityForResult() 方法中显示片段时，我总是得到这个，所以问题是下一个：

1.  我的活动被暂停和停止，这意味着 onSaveInstanceState() 已经被调用（对于蜂窝前和蜂窝后设备）。
2.  如果有任何结果，我会进行交易以显示/隐藏片段，这会导致此 IllegalStateException。

我做的是下一个：

1.  用于确定我想要的操作是否已完成的附加值（例如，从camere 拍照-isPhotoTaken） - 它可以是布尔值或整数值，具体取决于您需要多少不同的事务。
2.  在覆盖的 onResumeFragments() 方法中，我检查了我的值，并在进行了我需要的片段事务之后。在这种情况下，在 onSaveInstanceState 之后没有完成 commit()，因为在 onResumeFragments() 方法中返回了状态。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T21:39:55.573

**更新**我想我在这里找到了解释和解决方案： [http](http://code.google.com/p/android/issues/detail?id=23096#c4) ://code.google.com/p/android/issues/detail?id=23096#c4 我实施了那里发布的 Empty Fragment Workaround 并且没有更多 IllegalStateException 所以远的。

我像这样在我的活动中添加不可见的状态片段；

```
@Override
protected void onCreate(final Bundle args) {
    ...
    if (args == null) {
        final FragmentManager fm = this.getSupportFragmentManager();
        final FragmentTransaction ft = fm.beginTransaction();
        final Fragment emptyFragmentWithCallback = new EmptyFragmentWithCallbackOnResume();
        ft.add(emptyFragmentWithCallback, EmptyFragmentWithCallbackOnResume.TAG);
        ft.commit();
    } 
```

以下代码取自上面的链接：

```
public class EmptyFragmentWithCallbackOnResume extends Fragment {
OnFragmentAttachedListener mListener = null;

@Override
public void onAttach(SupportActivity activity) {
    super.onAttach(activity);
    try {
        mListener = (OnFragmentAttachedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString() + " must implement OnFragmentAttachedListener");
    }
}

@Override
public void onResume() {
    super.onResume();
    if (mListener != null) {
        mListener.OnFragmentAttached();
    }
}

public interface OnFragmentAttachedListener {
    public void OnFragmentAttached();
}
} 
```

并调用将直观地进入 onResume 或 onResumeFragments 的片段事务到我的自定义**onFragmentAttached**方法中，该方法由不可见状态片段调用。我根本不使用 onResumeFragments，也不在 onResume 中发出任何片段事务。

所以，总结一下。如果您正在使用支持库和片段，则几乎忘记 onResume，忘记 onResumeFragments 并根据上述解决方法实现您自己的“onResume”。这有点荒谬。

* * *

我无法确认。我有完全一样的问题。即使我在 onResumeFragments 中发出片段事务。这曾经像我在这里发布的那样工作：[IllegalStateException - Fragment support library](https://stackoverflow.com/questions/11900785/illegalstateexception-fragment-support-library/11931663)。

似乎该错误仅发生在 4.0.3 和 4.0.4 上。然而，它既不会总是发生，也不会出现在我的模拟器中。

我正在使用支持 lib rev。10 和 API 16。我在 onResumeFragments 中调用 DialogFragment.show 并不断从一些随机用户那里得到这个荒谬的异常。我无法在本地复制它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-16T18:24:20.743

我首先使用 support v4 库开发面向 android 2.2 (SDK 8) 的应用程序，当我开始使用 4.2 (SDK 17) 时，我的片段也遇到了同样的问题。但是将我的清单更改为 android:minSdkVersion="8" android:targetSdkVersion="17"，解决了我的问题。也许这对你也有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-30T06:48:47.927

# 将此添加到您的活动中：

```
 @Override
    protected void onSaveInstanceState(Bundle outState) {
        //No call for super(). Bug on API Level > 11.
    } 
```

# linux - 想要根据同一文件中另一列中的值就地编辑文件（替换列值）

> ID：12450025
> 
> 赞同：1
> 
> 时间：2012-09-16T19:31:11.743
> 
> 标签：linux, perl, shell, unix, nawk

我想根据同一文件中另一列中的值编辑文件（替换列值）。我不想在替换到另一个文件后重定向输出，而是想就地编辑文件。特别需要这个，因为需要编辑的文件将不会被任何程序同时访问，并且必须为此进行就地编辑

我尝试了下面的代码。但这又是逐行写入输入文件

```
#!/usr/bin/perl -w

open(FILEIN, "/dummy/chaat/h2") || die("Cannot open file");
@file = <FILEIN>;
seek FILEIN, 0, 0;

foreach $file (@file) {
    @field = split(/\|/, $file);
    print $field[8] . "\n";
    if ($field[8] eq "ROBERT") {
        $file =~ s/JAMES/FUDIK/g;
        print FILEIN $file;
    }
} 
```

我的示例记录如下所示。在这里，我想对此进行内联编辑。如果第 8 场是 ROBERT，则在第 7 场用 FUDIK 替换 JAMES

```
Change|sinmg|ewfewf|ewfew|def|fdfd|JAMES|rewr|ROBERT|dsf|fe
Change|sinmg|ewfewf|ewfew|def|JAMES|fewf|rewr|BEASLEY|dsf|fe 
```

我将不胜感激这方面的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:39:59.167

这是一个 perl 单行：

```
perl -F'\|' -i -lape 'if ($F[8] eq "ROBERT") { s/JAMES/FUDIK/g }' /dummy/chaat/h2 
```

该`-i`选项将进行就地编辑。您可能希望限制替换以避免部分匹配，例如：

```
s/(?<=\|)JAMES(?=\|)/FUDIK/g 
```

或者您可以使用`-n`开关代替`-p`并执行

```
s/JAMES/FUDIK/g for @F } print join "|", @F; 
```

您应该知道，这种就地编辑实际上是在编写一个新文件，并复制旧文件。如果你想避免这种情况，你需要做一些认真的杂耍，并且可能在写入过程中锁定文件。

# node.js - express.js 入门

> ID：12450037
> 
> 赞同：1
> 
> 时间：2012-09-16T19:32:32.523
> 
> 标签：node.js, express

这里是 Node.js 的新手，来自 rails。从事 express.js 项目。

我发现我必须重新解决一堆在 Rails 中为我完成的设计答案——这很好，但我并不总是知道我是否做得很好。这些东西包括多环境配置、database.yml、MVC 结构和测试。

我想知道这是否只是学习曲线的一部分，或者这一切是否已经在许多可用的 express 框架之一中完成，可在此处获得： [https ://github.com/visionmedia/express/wiki](https://github.com/visionmedia/express/wiki)

我还想知道是否特别推荐这些框架中的任何一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:32:32.523

这是我遇到的问题的汇编，其中一些我已经实现，一些我没有。希望它们对其他人有用。

**开发模式：观察文件变化：**

[我可以告诉工头在每次发出请求时重新加载 Web 应用程序，以便我可以体面地开发吗？](https://stackoverflow.com/questions/9131496/can-i-tell-foreman-to-reload-the-web-app-every-time-a-request-is-made-so-i-can-d/9199409#9199409)

编辑：[Nodemon](https://github.com/remy/nodemon)可能更可取。一方面，它不会因为咖啡编译错误而疯狂地重新启动服务器。

[如何将 nodemon 与 .env 文件一起使用？](https://stackoverflow.com/questions/10560241/how-to-use-nodemon-with-env-files)

**应用配置结构：**

[ExpressJS 如何构建应用程序？](https://stackoverflow.com/questions/5778245/expressjs-how-to-structure-an-application)

**App.js 和路由：**

[http://elegantcode.com/2012/01/20/taking-toddler-steps-with-node-js-express-routing/](http://elegantcode.com/2012/01/20/taking-toddler-steps-with-node-js-express-routing/)

**包管理：git忽略node_modules？**

[http://www.mikealrogers.com/posts/nodemodules-in-git.html](http://www.mikealrogers.com/posts/nodemodules-in-git.html) vs[我应该在 Heroku 上创建 node.js 应用程序时将 node_modules 签入 git 吗？](https://stackoverflow.com/questions/11459475/should-i-check-in-node-modules-to-git-when-creating-a-node-js-app-on-heroku)

**CoffeeScript 编译：**

[我可以在 Heroku 中运行咖啡脚本吗？](https://stackoverflow.com/questions/6356267/can-i-run-coffeescript-in-heroku) 和工头执行`coffee`vs `#app.use express.compiler(src: __dirname + "/../public", enable: ["coffeescript"])`

**调试：**

节点检查器：http: [//grenzgenial.com/post/1210106964/debugging-node-js-with-node-inspector](http://grenzgenial.com/post/1210106964/debugging-node-js-with-node-inspector)

# ios - iOS：从 Segue 禁用/删除/隐藏以前的 ViewController

> ID：12450045
> 
> 赞同：0
> 
> 时间：2012-09-16T19:33:15.533
> 
> 标签：ios, xcode, login, account

在我的登录逻辑中，我有一个“AuthenticationViewController”（这里应用程序检查用户是否已经登录）。我也使用故事板，所有视图都基于推送序列。所以它看起来：

```
 ------ AccountViewController
                                   |
-->  AuthenticationViewController  +
                                   |
                                    ------ LoginViewController 
```

现在，当我使用 UITabbarController 并在标签栏图标“帐户”上按两次时，应用程序会弹回 AuthenticationViewController，然后弹回 accountView 或 loginView。我知道这是一个“瑕疵”，但是当我在帐户图标上按两次时，如何实现这一点，但 AuthenticationViewController 没有显示？还是我有错误的逻辑？

**编辑**

这就是我的推送功能在 authenticationViewController 中以编程方式初始化的方式：

```
// Delegate to AccountViewController if Data (Username, Password) is correct

if ([strResult isEqualToString:@"1"]) {
    AccountViewController *AVC = [self.storyboard instantiateViewControllerWithIdentifier:@"AccountView"];
    [self.navigationController pushViewController:AVC animated:NO];
    // [self performSegueWithIdentifier:@"authAccountSegue" sender:self];
}
else {
    LoginViewController *LVC = [self.storyboard instantiateViewControllerWithIdentifier:@"LoginView"];
    [self.navigationController pushViewController:LVC animated:NO];
} 
```

![在此处输入图像描述](../Images/19946890a515c67b8ccbe80befc3cd73.png)

![在此处输入图像描述](../Images/123ea04d6b6a21b27a3ceaceb5a438d3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:10:50.077

好吧，我在这里看到了两件事，但不确定它们是否有助于解决您的问题。第一个是你可以只为这两个动作设置 segues，不会有太大区别。另一个是查看您的故事板结构，登录和帐户控制器似乎更适合作为模式视图，而不是将其推入堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:01:37.050

好的，我自己解决了这个问题：SUBVIEWS 是关键:)

# ember.js - 向 ember.js Web 应用程序添加分页时如何保留 url 哈希

> ID：12450048
> 
> 赞同：0
> 
> 时间：2012-09-16T19:33:23.923
> 
> 标签：ember.js, ember-router

我有一个简单的 Web 应用程序，其中包含一个显示一组用户的表格。用于此的 html 是显示用户名 / 等的基本表格

jsfiddle 在这里（尽管当您单击链接以分页时，jsfiddle 似乎会重新加载页面 - 而不是我在复制/粘贴以下内容时在本地获得的内容）。但无论哪种方式，它都有助于展示基本的应用程序[http://jsfiddle.net/Jmj4F/](http://jsfiddle.net/Jmj4F/)

```
<script type="text/x-handlebars" data-template-name="application">
  <div id="main">
    {{ outlet }}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="person">
<table width="250px">                                                                            
<thead>
<th>id</th>
<th>username</th>
<th>update</th>
<th>delete</th>
</thead>
<tbody>
   {{#each person in controller}}
    <tr>
      <td>{{person.id}}</td>
      <td>{{view Ember.TextField valueBinding="person.username"}}</td>
      <td><input type="submit" value="update" {{action updatePerson person}}/></td>
      <td><input type="submit" value="delete" {{action removePerson person}}/></td>
    </tr>
   {{/each}}
</tbody>
</table>
<div id="pages">
  Page.
  <a href="/#/page/2">2</a>
  <a href="/#/page/3">3</a>
</div>
</script> 
```

​我的应用程序目前有 2 条路线 - 一条向每个用户推送默认视图。第二个是一个简单的页面路由，它应该对数组进行切片并且只显示一部分用户（基本分页）

```
PersonApp = Ember.Application.create({});

PersonApp.ApplicationController = Ember.ObjectController.extend({});

PersonApp.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

PersonApp.PersonView = Ember.View.extend({
  templateName: 'person',
  addPerson: function(event) {
    var username = event.context.username;
    if (username) {
      this.get('controller.target').send('addPerson', username);
      event.context.set('username', '');
    }
  }
});

PersonApp.Person = Ember.Object.extend({
  username: null
});

PersonApp.PersonController = Ember.ArrayController.extend({
  content: [],
  page: function(page) {
    //in a real app use the page # to slice the array
    var newContent = this.content.slice(1,2);
    this.set('content', newContent);
  }
});

PersonApp.Router = Ember.Router.create({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router) {
        var first = PersonApp.Person.create({ username: "first" });
        var middle = PersonApp.Person.create({ username: "middle" });
        var last = PersonApp.Person.create({ username: "last" });
        var people = [first,middle,last];
        router.get('applicationController').connectOutlet('person', people);
      }
    }),
    page: Ember.Route.extend({
      route: '/page/:number',
      deserialize : function (router, params) {
        var pageNumber = params.number;
        router.get('personController').page(pageNumber);
      }
    })
  })
});

$(function () {
  PersonApp.initialize(PersonApp.Router);
}); 
```

目前，当我单击 2 时，我看到 url 中的哈希值从

```
http://localhost:8000/#/page/2 
```

至

```
http://localhost:8000/#/page/undefined 
```

这个例子仍然是非常好的世界，所以我对这里的任何改进持开放态度。我想使用基于路由器的方法，因为它支持后退按钮，这是一个优点

先感谢您

**更新**

我终于有了一个完全分页/过滤/可排序的数组控制器（[jsfiddle](http://jsfiddle.net/tScUj/)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:55:23.763

看起来我只需要添加一个序列化方法 - 现在我得到页面 # 而不是 undefined

```
serialize: function(router, context) {
        return {
          number: context.get('number')                                                          
        }
      } 
```

添加它的唯一问题是上下文未定义，因此出现以下错误。这种方法应该是什么样的？

未捕获的类型错误：无法调用未定义的方法“get”

# java - 只有环境光在 jME 中可靠工作

> ID：12450049
> 
> 赞同：1
> 
> 时间：2012-09-16T19:33:33.830
> 
> 标签：java, 3d, blender, .obj, jmonkeyengine

我刚刚开始使用 jME，并在搅拌机中创建了一个 3d 模型，并将其导出为 .obj 并将其导入我的 jME 应用程序。环境光效果很好，但是我使用的直接光只照亮了几个面，而不是只照亮物体的一个面，它照亮了整个物体，而不管物体的方向（两个上臂） ：

![在此处输入图像描述](../Images/ad32c1e72f6ff1336a830394f352ad96.png)

角色的其余部分不会被定向光照亮。这是源代码：

```
public class Hello extends SimpleApplication {

@Override
public void simpleInitApp() {
    Spatial character = assetManager.loadModel("/character.obj");
    Material mat = new Material(assetManager, "Common/MatDefs/Light/Lighting.j3md");
    character.setMaterial(mat);
    character.scale(0.5f, 0.5f, 0.5f);
    rootNode.attachChild(character);

    AmbientLight al = new AmbientLight();
    al.setColor(ColorRGBA.White.mult(1.3f));
    rootNode.addLight(al);

    DirectionalLight sun = new DirectionalLight();
    sun.setColor(ColorRGBA.White);
    sun.setDirection(new Vector3f(0,1,0).normalizeLocal());
    rootNode.addLight(sun);
}

/**
 * @param args
 */
public static void main(String[] args) {
    Hello app = new Hello();
    app.start();
}

} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T09:50:03.480

我会说你用于角色模型的材料有问题

尝试添加：

```
TangentBinormalGenerator.generate(character.getMesh(), true);
mat.setBoolean("m_UseMaterialColors", true);
mat.setColor("m_Ambient",  ColorRGBA.Orange);
mat.setColor("m_Diffuse",  ColorRGBA.Orange);
mat.setColor("m_Specular", ColorRGBA.White);
mat.setFloat("m_Shininess", 12); 
```

取自这里：[http ://wiki.jmonkeyengine.org/doku.php/jme3:advanced:light_and_shadow](http://wiki.jmonkeyengine.org/doku.php/jme3:advanced:light_and_shadow)

# ios - 仪器分配工具和 OpenGL

> ID：12450051
> 
> 赞同：1
> 
> 时间：2012-09-16T19:33:48.993
> 
> 标签：ios, xcode, memory-leaks, instruments

根据 Instruments 的 Allocations Tool 和几个 heapshots，我的`createFramebuffer`例程负责泄漏 1 MB 内存。我不知道我做错了什么。但我也不确定是否正确理解输出。仪器将我指向包含`glCheckFramebufferStatusOES`. 这个函数怎么可能泄漏内存？

```
- (BOOL)createFramebuffer {
    glGenFramebuffersOES(1, &viewFramebuffer);
    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);

    glGenRenderbuffersOES(1, &viewRenderbuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(CAEAGLLayer*)self.layer];
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

    if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) != GL_FRAMEBUFFER_COMPLETE_OES) {
        NSLog(@"failed to make complete framebuffer (%d, %d) object for SizeView %x", backingWidth, backingHeight,glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES));
        return NO;
    }
    return YES;
}

- (void)destroyFramebuffer {
    glDeleteFramebuffersOES(1, &viewFramebuffer);
    viewFramebuffer = 0;
    glDeleteRenderbuffersOES(1, &viewRenderbuffer);
    viewRenderbuffer = 0;
} 
```

# ios - 为 iOS 库构建绑定时如何定义函数返回对象

> ID：12450057
> 
> 赞同：0
> 
> 时间：2012-09-16T19:35:00.487
> 
> 标签：ios, xamarin.ios

为 iOS 库构建包装器。到目前为止，一切都很好。除非在返回对象的方法中。方法总是返回 NSObject。同样的故事在具有对象参数的委托中。

例如，在 Monotouch 绑定项目中，TCConnection 被定义为

```
//@interface TCConnection : NSObject 
    [BaseType (typeof(NSObject))]
    public  interface TCConnection 
    {

        [ExportAttribute("state")]
        int state {get;}

    //...
    } 
```

类 TCDevice 定义如下

```
//@interface TCDevice : NSObject 
[BaseType (typeof(NSObject))]
public interface TCDevice
{
    [ExportAttribute("initWithCapabilityToken:delegate:")]
    IntPtr Constructor(String token, TCDeviceDelegate d);

    [Export("connect:delegate:")]
    TCConnection Connect([NullAllowed] NSDictionary param, [NullAllowed] TCConnectionDelegate del);

} 
```

一切都很好地编译成一个dll。当我在其他项目中使用 dll 时，我调用

```
MyTCDeviceDelegate d=new MyTCDeviceDelegate();
String token="XXXXX";
TCDevice dev=new TCDevice(token, d); 
TCConnection conn=dev.Connect(null,null); 
```

最后一行总是抛出 Invalid Cast 异常。看起来该方法返回 NSObject。

我在这里缺少什么？

# android - 显示公共 Twitter 时间线？

> ID：12450061
> 
> 赞同：-3
> 
> 时间：2012-09-16T19:35:08.927
> 
> 标签：twitter4j, android, twitter

我的要求是：

> 显示公共 Twitter 时间线的最后 20条*本地*推文，无需任何身份验证，期间！

我读到了不同的方法来做到这一点，但*老实说*，我不知道什么最适合我。有些人使用搜索功能，有些人更喜欢 GET 请求和解析 .json 响应。有些人建议使用[twitter4j](/questions/tagged/twitter4j "显示标记为“twitter4j”的问题")，而其他人则使用公共 RSS 提要！

我没有 Twitter API 和 Twitter4J 的经验。这是我的第一个基于 Twitter 的应用程序。有什么建议可以满足我的需求吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:42:56.310

作为[Mohit Verma](https://stackoverflow.com/users/706204/mohit-verma)，我使用 Twitter4j。这比我想象的要容易，我确实需要对用户进行身份验证。

谢谢大家。

# linux - 非零返回码虽然 find -exec rm 有效

> ID：12450062
> 
> 赞同：5
> 
> 时间：2012-09-16T19:35:16.003
> 
> 标签：linux, shell

我在一个 linux 系统上，我想知道以下 find 执行有什么问题：

```
mkdir a && touch a/b                      
find . -name a -type d -exec echo '{}' \; 
./a
find . -name a -type d -exec rm -r '{}' \;
find: `./a': No such file or directory 
```

echo 的调用仅用于测试目的。我希望最后一个命令完全删除目录 './a' 并返回 0。相反，它会删除目录并生成错误消息。重复一遍，它确实删除了目录！到底是怎么回事？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T19:40:19.433

`rm`执行没有问题。问题是`find`令人困惑，因为它知道目录`./a`在那里，它会尝试访问该目录以查找名为`a`. 但是，find 无法进入该目录，因为它已被删除。

避免这种情况的一种方法是

```
find -name a -type d | xargs rm -r 
```

`rm`这将让 find 在命令执行之前继续前进。或者，您可以简单地忽略原始命令中的错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T19:42:43.490

根据 epsalon 的评论，解决方案是使用 -depth 选项，这会导致首先访问更深的文件。

```
find . -depth -name a -type d -exec rm -r '{}' \; 
```

成功了。非常感谢！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-23T06:57:16.963

如果性能是一个问题，请使用 -prune 以防止 find 下降到名为“a”的目录中：

```
find . -name a -type d -prune -exec rm -r '{}' \; 
```

# c - 在 C 中刷新缓冲区

> ID：12450066
> 
> 赞同：72
> 
> 时间：2012-09-16T19:35:46.357
> 
> 标签：c, buffer, fflush

`fflush()`即使它是输出流，也不应该用于刷新缓冲区？

它有什么用？我们一般如何刷新缓冲区？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-09-16T19:43:22.850

刷新输出缓冲区：

```
printf("Buffered, will be flushed");
fflush(stdout); // Prints to screen or whatever your standard out is 
```

或者

```
fprintf(fd, "Buffered, will be flushed");
fflush(fd);  //Prints to a file 
```

可以是一个非常有用的技术。为什么要刷新输出缓冲区？通常当我这样做时，是因为代码崩溃了，我正在尝试调试一些东西。每次调用标准缓冲区时都不会打印`printf()`它，等到它满了然后一次转储一堆。因此，如果您试图在崩溃之前检查您是否正在调用函数，这对`printf`“到达这里！”之类的东西很有帮助，有时在崩溃发生之前缓冲区还没有被刷新，你可以'不知道你真的走了多远。

另一个有用的时候是在多进程或多线程代码中。同样，缓冲区并不总是在调用 a 时刷新`printf()`，因此如果您想知道多个进程的真实执行顺序，您应该在每次打印后刷新缓冲区。

我养成了这样做的习惯，它让我在调试时省去了很多麻烦。我能想到的唯一缺点是这`printf()`是一项昂贵的操作（这就是为什么它默认不刷新缓冲区的原因）。

* * *

至于刷新输入缓冲区 ( `stdin`)，您不应该这样做。`stdin`根据 C11 标准 §7.21.5.2 第 2 部分，刷新是未定义的行为：

> 如果流指向输出流... fflush 函数会导致该流的任何未写入数据... 被写入文件；否则，行为未定义。

On some systems, Linux being one as you can see in the man page for [`fflush()`](http://linux.die.net/man/3/fflush), there's a defined behavior but it's system dependent so your code will not be portable.

Now if you're worried about garbage "stuck" in the input buffer you can use `fpurge()` on that. See [here](http://www.manpagez.com/man/3/fpurge/) for more on `fflush()` and `fpurge()`

# c# - C# 中的问题：需要标识符

> ID：12450071
> 
> 赞同：-2
> 
> 时间：2012-09-16T19:36:26.043
> 
> 标签：c#, compiler-errors

我是 C# 编程的新手，我有一些代码可以将要下载的文件的 URL 源复制到剪贴板。但是有一个错误，它说“需要标识符”。下面是代码：

```
private void button2_Click(object sender, EventArgs e)
{    
    File[] fileArray = this.();  //<<-- in here is the problem
    Clipboard.Clear();

    string str = "";

    File[] fileArray1 = fileArray;
    for (int i = 0; i < (int)fileArray1.Length; i++)
    {
        File file = fileArray1[i];
        str = string.Concat(str, file.downloadURL, Environment.NewLine);
    }
    Clipboard.SetText(str);
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:42:04.570

*预期*的标识符意味着编译器需要一些*标识符*，即变量名、类成员或类似的东西。

`this`只是指向当前对象实例；这意味着您将使用当前实例的成员。但是，您必须在`.`

因此，要解决此问题，请在显示编译器错误的行`this.`前后添加一个标识符。`()`该成员将返回一个值，该值将存储在您的`fileArray`变量中。

# c# - 程序如何创建然后写入文件

> ID：12450075
> 
> 赞同：0
> 
> 时间：2012-09-16T19:36:44.623
> 
> 标签：c#, c, file-io

我正在分析 Linux 中的 C 程序写入文件的方式，并将其总结为：

```
#include <fcntl.h>
#include <stdio.h>
#include <sys/stat.h>
#include <unistd.h>
#include "restart.h"
#define CREATE_FLAGS (O_WRONLY | O_CREAT | O_APPEND)
#define CREATE_MODE (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH)

int main(void) {

   int fd;

   fd = open("my.file", CREATE_FLAGS, CREATE_MODE);

   dup2(fd, STDOUT_FILENO);

   r_close(fd) ;

   write(STDOUT_FILENO, "Hello World", 11) ;

   return 0;
} 
```

两个小头文件 r_close.c 和 restart.h 在[这个](https://dl.dropbox.com/u/81397375/headers.zip)链接中。

**所以我的问题是**我想知道程序是如何写入文件的。例如，在 c# 中这样做有什么区别：

```
 static void Main(string[] args)
    {
        var file = System.IO.File.OpenWrite("my.file");
        file.Write(System.Text.Encoding.ASCII.GetBytes("Hello World"), 0, 11);
        file.Close();
    } 
```

我在许多链接中查看了 dup2 方法的描述，例如[http://www.mkssoftware.com/docs/man3/dup2.3.asp](http://www.mkssoftware.com/docs/man3/dup2.3.asp) ，我很难理解它的基本功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:41:08.830

```
fd = open("my.file", CREATE_FLAGS, CREATE_MODE); 
```

这将创建并打开文件，将其打开以追加写入，每次写入都发生在文件末尾。

```
dup2(fd, STDOUT_FILENO); 
```

这会将新打开文件的文件描述符复制到作为程序标准输出描述符的描述符之上。这两个描述符现在引用相同的打开文件描述。

```
r_close(fd) ; 
```

这将关闭从 获得的描述符`open`，保持副本完好无损。

```
write(STDOUT_FILENO, "Hello World", 11) ; 
```

这将写入程序的标准输出流，这与我们打开新文件时得到的打开文件描述相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:49:55.493

> dup2() 函数复制打开的文件描述符。具体来说，它使用 F_DUPFD 常量命令值为 fcntl() 函数提供的服务提供了一个替代接口，其中 fildes2 作为其第三个参数。复制的文件描述符与原始文件描述符共享任何锁。

来电：

```
fid = dup2(fildes, fildes2); 
```

相当于：

```
close(fildes2);
fid = fcntl(fildes, F_DUPFD, fildes2); 
```

这意味着我们已经修改了操作系统必须保存打开文件描述符的表。它使用该`fcntl()`功能。fcntl() 提供对打开文件描述符的控制。基本上它将一个int复制到一个int。**但**它使用系统调用来实现；因为它修改了操作系统资源。你对系统说：你知道FileTable中的那个Index吗？是的？将 FilePointer 复制到另一个索引。（还有其他一些事情，但我现在不得不忽略它。）

回复：你问题的第二部分，有什么区别？

他们基本上做同样的事情。可能完全相同的字符被写入文件。它确实做了一件额外的事情。就是这样`dup2()` `STDOUT_FILENO`。到一个文件。这改变了标准输出的内容。如果我没记错的话`fd`，在您的情况下，该代码会将通常会转到控制台的所有输出重定向到`"my.file"`. 这是您列出的**C#**和**C**之间的主要区别。

还应该注意的`dup2()`是，如果您所关心的只是将*“Hello World”*写入文件，那么这个示例中的整体是毫无意义的。这有点像去`int x = 5; int y = x; Console.WriteLine(y);`。额外的步骤在您的示例中没有任何作用。

另一个更普遍的区别是，C# 对程序员隐藏了很多低级的东西。在使用 C 编码时，您将能够更轻松地进行较低级别的文件和系统操作。缺点是您必须对较低级别的内容进行更多编码。虽然大多数情况下你并不真正关心这些事情是如何发生的，而是它确实发生了。通常，在 C# 中编写代码会更快，因为所有低级别的东西都已经为您很好地处理了。**-- 分类主题点，可以帮助你理解**

最后我冒险猜测一下；

> 我正在分析 Linux 中的 C 程序写入文件的方式，并将其总结为：

您正在分析一个处理 I/O 操作的程序，而不是普通的文件写入。这将解释`dup2()`.

# recursion - 初学者方案：返回自身的过程

> ID：12450076
> 
> 赞同：1
> 
> 时间：2012-09-16T19:37:09.420
> 
> 标签：recursion, lisp, scheme, tail-recursion

这是我正在阅读的书中的一个例子：

```
1    (define (length items)
2     (define (length-iter a count)
3       (if (null? a)
4           count
5           (length-iter (cdr a)(+ 1 count))))
6      (length-iter items 0)) 
```

我不明白的是怎么`length-iter`知道计数？第一次使用 a 调用此过程时`list`，它将依次使用两个参数定义另一个过程，我得到了很多。但它怎么知道那`a`是`list items`? 它还没有到达第 6 行，作为参数`items`传递给where 。不知何故，尽管它已经知道这一点并且能够进行计算。感谢您对澄清这一点的任何帮助！`length-iter``a`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:39:52.643

函数中有两部分`length`：

1.  *内部函数的*定义*`length-iter`；*
**   *调用*内部函数`length-iter`。*

 *在调用中，即第 6 行，您*将*原始`items`列表作为**参数**传递给内部函数。这是调用内部函数的地方。以前，您只是*定义*函数，而不是*调用*它：

```
(length-iter items 0) 
```

因此，`items`将被绑定到`a`和 。您可以将内部函数视为一个单独的函数：`0``count`

```
(define (length-iter a count)
  (if (null? a)
      count
      (length-iter (cdr a)(+ 1 count)))) 
```

然后，将您的`length`函数想象成它只是将所有工作委托给该`length-iter`函数：

```
(define (length items)
  (length-iter items 0)) 
```

这就是你的功能正在做的事情。不同之处在于，该`length-iter`函数仅对`length`.*

# php - 从多维数组中获取数据

> ID：12450077
> 
> 赞同：2
> 
> 时间：2012-09-16T19:37:22.853
> 
> 标签：php, arrays, multidimensional-array

我有一个看起来像这样的数组：

```
Array
(
    [1] => Array
    (
        [0] => Awesomedude123
        [1] => 399,408
        [2] => September 16, 2012
    )

    [2] => Array
    (
        [0] => Username11
        [1] => 1,914,144
        [2] => September 16, 2012
    )

    [3] => Array
    (
        [0] => EpicSurfer
        [1] => 1,031,427
        [2] => September 16, 2012
    )
) 
```

我想要做的是从里面获取数据。我想从每个数组中获取这些数据：

```
Array
(
    [1] => Array
    (
        [0] => Awesomedude123
        [1] => 399,408  <----
        [2] => September 16, 2012
    )

    [2] => Array
    (
        [0] => Username11
        [1] => 1,914,144 <----
        [2] => September 16, 2012
    )

    [3] => Array
    (
        [0] => EpicSurfer
        [1] => 1,031,427 <----
        [2] => September 16, 2012
    )
) 
```

我怎样才能做到这一点？我的实际文件实际上要大得多，我想从每个数组中获取这些数据。任何帮助将不胜感激！抱歉，如果我的问题听起来令人困惑，我真的没有其他办法来解释它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:39:27.343

我不知道您是否打算循环遍历数组，但这是一种过于简单的方法：

```
foreach ($array as $index => $data) {
    echo $data[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:39:34.243

在这里，假设`$array`是您的主数组：

```
foreach ($array as $element) {
    echo $element[1] . '<br />';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:43:20.667

这应该有效：

```
foreach ($x as $k => $v) {
    echo $v[1];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T20:29:42.540

```
$b = array_map(function($item) { return $item[1]; }, $your_array); 
```

检查[http://php.net/manual/en/function.array-map.php上的 array_map 函数](http://php.net/manual/en/function.array-map.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T20:30:20.033

也许你需要一个这样的递归函数：

```
function extend( $arr, $myArr=array() ) {
    foreach( $arr as $key => $value ) {
        if( is_array( $key ) ) {
            extend( $arr[ $key ] );
        } else {
            $myArr[ $key ] = $arr[ $key ];
        }
    }
    return $myArr;
} 
```

但是，如果您只需要访问单个元素，您需要做的是使用数组键获取特定元素，如下所示：

```
$value = $myArray['subArray']['element']; 
```

# java - 众所周知的类型 android nfc 意图过滤器

> ID：12450082
> 
> 赞同：2
> 
> 时间：2012-09-16T19:37:33.467
> 
> 标签：java, android, nfc, intentfilter, ndef

我想过滤以下类型：

瓮：nfc：wkt：Hs

在android清单中。

我写的数据如下：

```
public NdefRecord createHandoverSelectRecord(byte[] payload) {
    NdefRecord record = new NdefRecord(NdefRecord.TNF_WELL_KNOWN,
    NdefRecord.RTD_HANDOVER_SELECT, new byte[0], payload);
    return record;
} 
```

我现在如何正确过滤类型？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:59:40.203

不幸的是，您无法过滤这些消息。大概（希望？），因为 Android 会在某些时候扩展处理切换消息本身的功能？有关可以过滤的类型，请参阅[文档。](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#filtering-intents)

# c# - 带有异步调用的 GridView CollectionViewSource 返回零项

> ID：12450085
> 
> 赞同：0
> 
> 时间：2012-09-16T19:38:03.420
> 
> 标签：c#, xaml, windows-8, async-await

我正在构建一个 Windows 8 应用商店应用程序，但 CollectionViewSource 声称它返回的集合在涉及异步时有零项。

在我的 ViewModel 中，我有以下代码（请注意缺少一些内容以使其更易于解释）

```
public MainViewModel(IFileRepository fileRepository)
{
   items = new CollectionViewSource();
   _fileRepository = fileRepository;
   this.Construct();
   items.Source = new ObservableCollection<FileViewModel>(Files);
}

private async void Construct()
{
   Files = new ObservableCollection<FileViewModel>();
   IList _files = await _fileRepository.GetFiles();
   foreach (File file in _files)
   {
      Files.Add(new FileViewModel(file));
   }
}

private CollectionViewSource items;
public ICollectionView Items
{
    get
    {
        return items.View;
    }
} 
```

然后在 XAML 中，我将 GridView 的 ItemsSource 绑定到 Items，并且我拥有所有相关的 DataTemplates 来显示数据。

我的问题是，由于文件的异步获取，我的 Items 集合返回空并且 View 不显示任何数据。

如果我删除异步调用并内联创建 File 对象的模拟集合，则代码将按预期工作。

任何人都可以提出解决这个问题的方法吗？在 WPF 中，我会尝试为集合加载时创建一个布尔 isBusy 属性，但是对于这个新的异步内容来说，这感觉像是错误的事情。

任何指针都会很棒！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:02:27.240

就目前而言，当您为 Source 创建 ObservableCollection 时，Files 是空的，因为您启动了 Construct，但没有（a）等待它完成。

我会避免使用第二个“包装器”ObservableCollection 并设置 Source = Files，因此当 Construct 代码写入文件时，CollectionViewSource 会观察到它（这可能是您的实际意图）

# html - css - 网格 div 2x2 居中，但在较小的屏幕上变为 1x4

> ID：12450091
> 
> 赞同：1
> 
> 时间：2012-09-16T19:39:17.787
> 
> 标签：html, css

你好，这让我发疯了，谁能帮忙。我想要一个以大屏幕为中心的 2x2 div 网格，但在小屏幕上查看时会移动到 1x4 但仍居中。到目前为止，我有这个工作，但在小 1x4 视图上左对齐。我尝试过使用 inline-block 而不是 float:left，但是您无法使用 #frame-block 添加任何其他内容。宽度必须为 500px 的固定宽度

```
#frame-block {
width: 500px;
border: 2px #0066FF solid;
margin:5px;
height:400px;
float:left;
}

#frame-container {
  text-align: center;
}

#frame-main {
  display: inline-block;
  vertical-align: middle;
}​

<div id="frame-container">

  <div id="frame-main">

     <div id="frame-block"></div>
      <div id="frame-block"></div>

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:55:26.847

如何使用[媒体查询](http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/#more-104692)在某个分辨率上使`#frame-block`两倍宽？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:37:54.893

给你：[http](http://dabblet.com/gist/3734237) ://dabblet.com/gist/3734237 。

*您的问题之一*是重用 ID。ID 是唯一的，每页只能使用一次。这里有更多关于它的阅读： http: [//csswizardry.com/2011/09/writing-efficient-css-selectors/](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)。

在我对您的代码的修改中，我将 ID 更改为类，给 .frame-block 'display: inline-block' 而不是 'float: left'。

我建议使用相对单位而不是像素单位，这样您只需要更改“正文”上的基本字体大小即可适应低于 500 像素的较小屏幕。您可以在这里阅读更多相关信息：http: [//blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)

# linux - 快速获取给定文件的完整路径的命令是什么？

> ID：12450098
> 
> 赞同：1
> 
> 时间：2012-09-16T19:40:01.217
> 
> 标签：linux, shell, path

> **可能重复：**
> [bash/fish 命令打印文件的绝对路径](https://stackoverflow.com/questions/3915040/bash-fish-command-to-print-absolute-path-to-a-file)

假设我在一个目录`/usr/temp/foo`中，其中有一个名为`bar.txt`

如何获得完整路径`bar.txt`？（应该是`/usr/tem/foo/bar.txt`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:59:44.980

尝试：

```
readlink -f bar.txt 
```

额外的文字让你很开心。

# javascript - jquery动画随机发生

> ID：12450099
> 
> 赞同：2
> 
> 时间：2012-09-16T19:40:02.960
> 
> 标签：javascript, jquery, animation, fade, easing

我有一种启动画面，您可以在其中按下一个徽标，它会将徽标动画到中心，然后为其加载内容。然后，当您按下主顶部徽标时，它会隐藏内容并返回到初始屏幕。但是我遇到了这个问题。

例如，容器隐藏，然后回来。

自己寻找：[http://dan.roguedraco.net/SpyroDev/](http://dan.roguedraco.net/SpyroDev/) 如果您在内容完全出现之前单击顶部徽标会发生这种情况，但我想允许所有这些发生。因为用户可能会这样做。

Javascript：

```
$(document).ready(function() {

var inPage = false;

$('.ajax-loader').click(function() {
    if(inPage == false) {
        inPage = true;
        var Obj = this;

        $(Obj).siblings("a").fadeOut(500,function() {
            if($(Obj).hasClass('left') || $(Obj).hasClass('right')) {
                $(Obj).animate({left:'300px'},'slow','easeOutBack',function() {             
                    $('#pageContent').fadeIn(500,function() {
                        $("#tabs").tab();
                    });
                });
            }
            else {
                $('#pageContent').fadeIn(500,function() {
                    $("#tabs").tab();
                });
            }
            $(Obj).addClass('current-project');
        });
    }
});

$('#rootLogo').click(function() {
    var Obj = $('.current-project');
    if(inPage == true) {
        inPage = false;
        $('#pageContent').fadeOut(500,function() {
            $(this).hide();
            if($(Obj).hasClass('left')) {
                $(Obj).animate({left:'0px'},'slow','easeOutBack',function() {
                    $(Obj).siblings("a").fadeIn(500);
                });
            }
            else if($(Obj).hasClass('right')) {
                $(Obj).animate({left: '600px'},'slow','easeOutBack',function() {
                    $(Obj).siblings("a").fadeIn(500);
                });
            }
            else {
                $(Obj).siblings("a").fadeIn(500);
            }
            $(Obj).removeClass('current-project');
        });
    }
}); 
```

});

html:

```
 <div id="thumbnails">
            <div class="row-fluid">
                <div class="span12" style="text-align: center;color:#fafafa;">
                    Click a plugin title for more information and downloads.
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12" id='thumbnails'>
                    <a href="#" class="ajax-loader left" project="JumpPorts" page="Home"><img src="projects/JumpPorts/thumb.png" alt="JumpPorts" /></a>
                    <a href="#" class="ajax-loader" project="RankUpOnKills" page="Home"><img src="projects/RankUpOnKills/thumb.png" alt="RankUpOnKills" /></a>
                    <a href="#" class="ajax-loader right" project="InfoButton" page="Home"><img src="projects/InfoButton/thumb.png" alt="InfoButton" /></a>
                </div>
            </div>
        </div>

        <div id="pageContent" style="display:none;">
            <div class="row-fluid">
                ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:51:31.037

[`.stop()`](http://api.jquery.com/stop/)

您是否尝试过`.stop()`在您的和其他动画方法之前`.animate()`使用`.fadeIn()`？像：`$(Obj).stop().animate({left:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:04:35.713

您是否考虑过不让徽标本身的“”成为可点击的？我的意思是，只要单击它，您就可以准备好您的事件。

试试这个：

在 .ajaxloader 事件中，在事件代码的末尾添加一个围绕它的徽标图像。

然后你切换：

```
$('#rootLogo').click(function() {
 var Obj = $('.current-project');
 ....
} 
```

为了这：

```
$('#click-event').click(function() {  

// Assuming #click-event is the name of the span you placed

var Obj = $('.current-project');
.....
} 
```

最后你删除在 .ajaxloader.click 事件上创建的跨度

这是一个想法，你可以使用它，告诉我它是否有效

# spring - 竞价系统“同步”交易

> ID：12450107
> 
> 赞同：-2
> 
> 时间：2012-09-16T19:41:06.283
> 
> 标签：spring, hibernate, grails, concurrency, synchronized

我尝试使用 Grails 2.1（所以 Hibernate 和 Spring）使用以下 BidService 的“幼稚”实现来实现出价系统，但它似乎无法防止提高条件，这导致来自不同并发用户的“重复”出价。

一些信息： - BidService 默认是事务性的， - 项目和投标模型使用“版本：假”（悲观锁定）

```
class BidService{
  BidResult processBid(BidRequest bidRequest, Item item) throws BidException {
        // 1\. Validation
        validateBid(bidRequest, item)   // -> throws BidException if bidRequest do not comply with bidding rules (price too low, invalid user, ...) 
       // 2\. Proces Bid (we have some complex rules to process the bids too, but at the end we only place the bid
       Bid bid = placeBid(bidRequest, item)

       return bid
  }

   Bid placeBid(BidRequest bidRequest, Item item){
      // 1\. Place Bid
      Bid bid = new Bid(bidRequest) // create a bid with the bidRequest values
      bid.save(flush: true, failOnError: true)

      // 2\. Update Item price
      item.price = bid.value
      item.save(flush: true, failOnError: true)

      return bid      
   }
} 
```

但正如[http://grails.org/doc/latest/guide/services.html](http://grails.org/doc/latest/guide/services.html) 9.2 Scoped Services 中所述：默认情况下，对服务方法的访问是不同步的，因此没有什么可以阻止这些方法的并发执行。事实上，因为服务是单例的并且可能被并发使用，所以在服务中存储状态时应该非常小心。或者走简单（更好）的道路，永远不要将状态存储在服务中。

我曾想过在整个 processBid() 方法上使用“同步”，但这听起来很粗鲁，可能会引发活跃度问题或死锁。另一方面，以异步方式处理出价会阻止直接向用户发送有关赢得/输掉拍卖的反馈。

在这种情况下使用任何建议或最佳实践？

PS：我已经问过 grails ML 但这是一个相当广泛的 Java 并发问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:13:50.700

你的服务是无状态的，所以不需要同步它，当涉及到状态时需要同步。

此外，您无需再次使用任何锁定......您无需更改现有状态，您只需添加新行。此外，我不是 GORM 专家，但`version: false`应该关闭它的名字所说的乐观锁定，这并不意味着激活了悲观锁定。

从你的问题我不明白你的问题是什么，但独特的约束是防止数据库重复的原因。

# android - MotionEvent.Action_up 提前调用

> ID：12450109
> 
> 赞同：2
> 
> 时间：2012-09-16T19:41:11.073
> 
> 标签：android, events, touch, motion

我遇到了 MotionEvent.ACTION_UP 问题 在我抬起手指之前调用了该事件。

这是我正在使用的代码。我应该改变什么？谢谢你的帮助！

```
public boolean onTouchEvent(MotionEvent e) {
    switch(e.getAction()) {
    case MotionEvent.ACTION_DOWN:
        if(checkColide(e.getX(), e.getY())) {
            isFootballTouched = true;
            downT = c.MILLISECOND;
            downX = e.getX();
        }
        break;
    case MotionEvent.ACTION_MOVE:
        //moveFootball(e.getX(), e.getY());
        break;
    case MotionEvent.ACTION_UP:
        upT = c.MILLISECOND;
        upX = e.getX();
        getVelocity();          
        break;
    }       
    return false;       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:45:19.213

如果发生这 3 种情况之一，请尝试返回 true

```
 public boolean onTouchEvent(MotionEvent e) {
switch(e.getAction()) {
case MotionEvent.ACTION_DOWN:
    if(checkColide(e.getX(), e.getY())) {
        isFootballTouched = true;
        downT = c.MILLISECOND;
        downX = e.getX();
    }
    return true;
case MotionEvent.ACTION_MOVE:
    //moveFootball(e.getX(), e.getY());
    return true;
case MotionEvent.ACTION_UP:
    upT = c.MILLISECOND;
    upX = e.getX();
    getVelocity();          
    return true;
}       
return false; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:45:45.643

可能你应该`true`从`onTouchEvent()`. 返回`false`意味着您不再有兴趣接收对此的事件`View`。希望这可以帮助。

# sqlalchemy - 插入/更新/删除后的 sqlalchemy 烧瓶

> ID：12450113
> 
> 赞同：11
> 
> 时间：2012-09-16T19:41:44.643
> 
> 标签：sqlalchemy, flask

我正在使用烧瓶和 sqlalchemy 扩展。此外，我正在使用声明性方式来编写我的模型，如扩展文档中所述。

对于我的一个模型，我需要在插入、更新或删除新行后运行一些代码。我想知道怎么做？理想情况下，我只会向模型添加功能..

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-17T14:12:31.943

查看 SQLAlchemy 的[Mapper Events](http://docs.sqlalchemy.org/en/latest/orm/events.html#mapper-events)。您可以将回调函数绑定到`after_insert`、`after_update`和`after_delete`事件。

例子：

```
from sqlalchemy import event

def after_insert_listener(mapper, connection, target):
    # 'target' is the inserted object
    print(target.id_user)

event.listen(User, 'after_insert', after_insert_listener) 
```

# iphone - 将对象添加到 NSMutableArray 只是第一次

> ID：12450115
> 
> 赞同：0
> 
> 时间：2012-09-16T19:42:04.330
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我有一个方法，当我按下按钮时，将一个字符串添加到一个 NSMutableArray，它是 UITableView 的模型。

```
 - (void)addPressed:(id)sender
{
    NSString *string = @"aString";
    [self.array addObject:string];
    NSLog(@"Array count: %d",[self.array count]);
    [self.tableView reloadData];
} 
```

问题是只有当我按两次连接到此操作的按钮时，添加才第一次起作用，我得到以下输出：

```
2012-09-16 21:33:08.766 iUni[3066:c07] Array count: 1 //Which is fine since it worked
2012-09-16 21:33:08.952 iUni[3066:c07] Array count: 1 //Now count should be 2!! 
```

任何人都猜测为什么会发生这种情况？

我添加了@property，合成它并以这种方式懒惰地实例化它：

```
- (NSMutableArray *)array
{
    if (!_array) {
        NSMutableArray *array = [NSMutableArray array];
        _array = array;
    }
    return _array;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:07:01.793

您的数组被创建为一个无主的（实际上是自动释放的）对象，这意味着它在每次调用访问器后不久就会被销毁。然后在您下次访问它时重新创建它，从而为您提供一个新的空数组。

您需要创建一个拥有的数组版本以存储到您的实例变量中：

```
if (!_array) {
    _array = [[NSMutableArray alloc] init];
    // Note no need to create a temp variable.
}
return _array; 
```

您也可以打开 ARC，它会为您解决这个问题，而且无论如何都是个好主意。

# php - 使用 PHP 和 CURL 登录网站

> ID：12450118
> 
> 赞同：1
> 
> 时间：2012-09-16T19:42:29.137
> 
> 标签：php, curl, login

我正在尝试自动登录到[https://www.myicomfort.com/](https://www.myicomfort.com/)以检索数据。尝试了一些发布的示例，但似乎不起作用。也许我在传递用户名和密码时没有使用正确的字段名称。有人可以帮忙吗？还在学习PHP。谢谢！

```
$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL,"https://www.myicomfort.com/");  
curl_setopt($ch, CURLOPT_COOKIEFILE,1);  
curl_setopt($ch, CURLOPT_POST, 1);  
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);  
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);  
curl_setopt($ch, CURLOPT_HEADER, true);    
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);  
curl_setopt($ch, CURLOPT_TIMEOUT, 120);  

$post_array = array(  
'ctl00$RightContent$txtUserName'=>'xxxname',  
'ctl00$RightContent$txtPwd'=>'xxxpassword',  
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $post_array); 

$output = curl_exec($ch);

curl_close($ch); 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:47:45.407

您缺少其他字段。您可以通过在 Chrome 中按 Ctrl+Shift+I 来检查正在发送哪些字段，然后尝试登录。单击页面，您将看到如下内容：

```
__LASTFOCUS:
__EVENTTARGET:
__EVENTARGUMENT:
__VIEWSTATE:/wEPDwUKMTczNjcxMDc0Mg9kFgJmD2QWAgIDD2QWBAIDD2QWBAI...
__EVENTVALIDATION:/wEWCAKI/qyXDAKSptf/CwKJn6v3AQKdg7/fBwKNoqOVDAK...
ctl00$RightContent$hdnPwd:
ctl00$RightContent$txtUserName:asfasdfa
ctl00$RightContent$txtPwd:dfasdf
ctl00$RightContent$chkRemember:on
ctl00$RightContent$btnLogin:Log in 
```

尝试提交这些数据。完成此操作后，您应该可以登录了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:00:56.947

你可以查看那个页面的源代码，有很多**隐藏的输入字段**。仅提供您的用户名和密码是不够的。

解决方案：

1.  获取所有这些字段并使用 PHP 将它们一起发送出去
2.  使用一些可以模拟浏览器的库，然后你只能在登录时提供用户名和密码。这会有点慢，但不是你代码的瓶颈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:53:21.163

确保您使用了所有必需的输入字段，对从表单传输的信息进行网络嗅探，结果如下

```
'__EVENTARGUMENT'   
'__EVENTTARGET' 
'__EVENTVALIDATION'             /wEWCAKI/qyXDAKSptf/CwKJng .. etc
'__LASTFOCUS'   
'__VIEWSTATE'                   /wEPDwUKMTczNjcxMDc0Mg9kFgJmD2QWAg .. etc
'ctl00$RightContent$btnLog...'  Log in
'ctl00$RightContent$chkRem...'  on
'ctl00$RightContent$hdnPwd' 
'ctl00$RightContent$txtPwd'     vyvuy
'ctl00$RightContent$txtUse...'  iuhgiu 
```

另请参阅[SO 上的这个问题](https://stackoverflow.com/questions/3008817/login-to-remote-site-with-php-curl)，我相信他们在缺少登录按钮时建议

# jsf - - 对话框没有在应该关闭的时候关闭

> ID：12450121
> 
> 赞同：0
> 
> 时间：2012-09-16T19:43:02.023
> 
> 标签：jsf, primefaces

我在示例应用程序中使用 JSF (Mojara) 和 Primefaces 3.4。我在屏幕上应用布局，其中标题（北）有一个图像链接（单击时打开一个对话框）。

**北头.xhtml**：

```
<h:body>    
        <h:form id="headerForm">    

        <p:panelGrid id="headerFormPanelGridID" style="align:left;border:0px>
                <p:row> 

            <p:column width="70">
    <p:commandLink onclick="dialogWidgetWar.show();"  title="SampleImg">
    <p:graphicImage value="../sampleimg.jpg" />
    </p:commandLink>
            </p:column> 

            </p:row> 

        </p:panelGrid>

    <p:dialog id="idInfo"  modal="true" widgetVar="dialogWidgetWar" header="Sample Layout" border="0" width="400"  height="100" resizable="true" >          
        <h:panelGrid id="sampleId" style="cellpadding" border="0" cellpadding="0" cellspacing="0" width="200">

        </h:panelGrid>          
    </p:dialog>

        </h:form>       
</h:body> 
```

## **对于布局**

```
<html lang="en"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui">
   <h:head>

    </h:head> 
    <h:body>    

        <p:layout fullPage="true">
            <p:layoutUnit position="north" size="100" resizable="false" closable="false" collapsible="false">
                     <ui:include src="../northheader.xhtml" /> 

            </p:layoutUnit>

            <p:layoutUnit position="west" size="200" resizable="false" closable="false" collapsible="false">

                    <ui:include src="../left.xhtml" />

             </p:layoutUnit>

            <p:layoutUnit position="center" size="200">

                <ui:insert name="pageContent"></ui:insert>
            </p:layoutUnit>

        </p:layout>

    </h:body>

</html> 
```

布局正在正确显示，但是当我单击northheader.xhtml 中的“SampleImg”链接时，即使我在对话框中添加了一个关闭按钮并且无法正常工作，它也会打开但关闭对话框`onclick="dialogWidgetWar.hide()"`不起作用。我什至无法选择任何东西。

谁能帮帮我，问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:04:35.657

**在p:dialog**中添加**appendToBody="true"**属性

 **```
<p:dialog id="idInfo"  modal="true" appendToBody="true" 
widgetVar="dialogWidgetWar" header="Sample Layout" border="0" width="400"  height="100" resizable="true" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:27:38.837

您正在使用 a `p:dialog`inside a `p:layout`。这**总是**导致我过去的经验出现问题。一个固定的解决方案是放置在`p:dialog`外面`p:layout`。由于您正在使用`ui:define`并且`ui:insert`这看起来并不简单，但是它非常简单。由于您可以`ui:define`在一个 JSF 页面中定义多个元素，因此您可以定义“内容”和“对话框”`ui:insert`以及`ui:define`.

```
<p:layout>
    <p:layoutUnit ...
        <ui:insert name="content"/>
    </p:layoutUnit>
</p:layout>
<ui:insert name="dialogs"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T07:55:53.003

试试这个，这应该可以；

```
 <p:commandLink onclick="PrimeFaces.monitorDownload(hideStatus);"  title="SampleImg"> 
```

java脚本；

```
 <script type="text/javascript">
            function showStatus() {
                dialogWidgetWar.show();
            }

            function hideStatus() {
                dialogWidgetWar.hide();
            }
        </script> 
```**

# python - python random.setstate(), seed() - 是否保证跨实现的结果相同？

> ID：12450130
> 
> 赞同：8
> 
> 时间：2012-09-16T19:44:17.093
> 
> 标签：python, random, python-3.x, python-2.x

是否保证带有随机生成器的 pyhon2/python3 脚本初始化为`random.setstate()`或`random.seed()`将在不同版本和平台上产生相同的伪随机序列？（例如`python 3.1 on Mac , the same as python 3.2 on Linux 64-bit`）

问题是关于：python2 和 python3，假设 python3 脚本将在 python3 解释器上运行，反之亦然。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T19:49:38.447

Python 2.3 及更高版本使用 Mersenne Twister 生成器，它独立于系统随机函数（作为 Python 的 C 扩展模块实现）。对于使用 Mersenne Twister 的任何版本，不同版本和平台的结果应该相同。

以前，您可以使用生成器保证向后兼容性`WichmannHill`，但不幸的是，它似乎已在 Python 3.x 中删除。

如果您绝对需要保证兼容性，请按照文档的建议编写自己的`Random`子类（或使用稳定的外部实现，例如[simplerandom](http://pypi.python.org/pypi/simplerandom)）`random`：

> 如果您想使用您自己设计的不同基本生成器，也可以将类 Random 子类化：在这种情况下，覆盖 random()、seed()、getstate()、setstate() 和 jumpahead() 方法。可选地，一个新的生成器可以提供一个 getrandbits() 方法——这允许 randrange() 在任意大的范围内产生选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T20:08:16.903

您可以使用[simplerandom](http://pypi.python.org/pypi/simplerandom)模块，它具有独立于 Python 平台的一致实现。它支持 Python 2.4、2.5、2.6、2.7、3.1 和 3.2。它有 9 种不同的算法。

这是一个例子：

```
>>> import simplerandom.iterators as sri
>>> rng = sri.MWC1(12345)
>>> next(rng)
498186671L
>>> next(rng)
888940288L
>>> next(rng)
345072384L 
```

只要你用相同的值做种子，你就会得到相同的结果：

```
>>> rng = sri.MWC1(12345)
>>> next(rng)
498186671L
>>> rng = sri.MWC1(98765)
>>> next(rng)
3546724783L 
```

# java - 在 weblogic 应用服务器中使用 Coherence Cache 实施 Oracle DCN

> ID：12450131
> 
> 赞同：2
> 
> 时间：2012-09-16T19:44:18.483
> 
> 标签：java, oracle, caching, weblogic-10.x, oracle-coherence

我正在尝试在 oracle 上实现 DCN（数据库更改通知）以通知侦听器 DB 事件，以便我可以更新 Coherence 缓存。

[我在这里](http://docs.oracle.com/cd/E14072_01/java.112/e10589/dbchgnf.htm)按照教程进行操作，使用带有 main 方法的示例程序来执行侦听器类并使其运行正常。

我的问题是如何在生产环境中实现此通知和侦听器，因为我的本地测试仅运行一个主要方法来保持侦听器运行？使用什么技术来保持侦听器始终在后台运行并接收来自数据库的通知）？

我们使用 Weblogic 10 作为我们的应用服务器。

**编辑**：

[weblogic 启动类](http://docs.oracle.com/cd/E13222_01/wls/docs81/ConsoleHelp/startup_shutdown.html)会为此目的工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:05:31.643

侦听器由 JDBC 驱动程序在新线程上为您运行（请参阅此处的说明：http: [//docs.oracle.com/cd/E14072_01/java.112/e10589/dbchgnf.htm](http://docs.oracle.com/cd/E14072_01/java.112/e10589/dbchgnf.htm)）。正如它所说，假设您使用的是纯 JDBC 方法：

> *“JDBC 驱动程序启动一个新线程，该线程（通过专用通道）侦听来自服务器的通知，并将这些通知消息转换为 Java 事件。然后驱动程序通知所有注册了此注册的侦听器。”*

因此，您可以使用 Weblogic 启动类或设置了“load-on-startup”的 servlet 中的 init() 方法进行注册，然后忘记它。您的回调将由另一个线程上的 JDBC 驱动程序调用。

# android - ScrollView 内部的 LinearLayout 不展开

> ID：12450133
> 
> 赞同：0
> 
> 时间：2012-09-16T19:44:33.223
> 
> 标签：android, android-layout, android-linearlayout, android-scrollview

出于某种原因，我无法水平滚动我的线性布局......

我尝试了这个解决方案，但它没有用：[LinearLayout not expand inside a ScrollView](https://stackoverflow.com/questions/2599837/linearlayout-not-expanding-inside-a-scrollview)

还有什么我想念的吗？

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fadingEdge="horizontal"
    android:scrollbars="horizontal"
    android:fillViewport="true" >

 <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="horizontal"
     android:scrollbarStyle="insideOverlay"
     android:scrollbars="horizontal" >

     <ImageButton
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:background="@drawable/ventuscartoon" >

     </ImageButton>

     <ImageButton
         android:id="@+id/imageButton1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/eincartoon" />

     <ImageButton
         android:id="@+id/imageButton3"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/ventuscartoon" />

     <ImageButton
         android:id="@+id/imageButton2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/ventuscartoon" />

</LinearLayout>

</ScrollView> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:51:47.737

如果你想水平滚动，你可能应该使用 Horizo​​ntalScrollView 而不是 ScrollView

# asp.net-mvc - MVC - 输入提交导致自动重定向

> ID：12450134
> 
> 赞同：0
> 
> 时间：2012-09-16T19:44:34.067
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下表格

```
<form id="file_upload" action="/Upload/Save" method="POST" enctype="multipart/form-data">
<input type="text" id="txtProposalName" name="name" placeholder="Nome da Camiseta" />
<input type="text" id="txtProposalDesc" name="description" placeholder="Descrição da Camiseta"/>
<div class="fileupload-buttonbar">
    <div class="progressbar fileupload-progressbar"></div>
    <span class="fileinput-button">
        <a href="javascript:void(0)" class="upload-image">Upload images</a>
        <input type="file" name="files[]" multiple />
    </span>
</div>
<input type="hidden" id="imgID" name="imgID"/>
<input type="submit" id="postProposal"/> 
```

将调用此操作：

```
[HttpPost]
    public JsonResult Save(string name, string description, string imgID)
    {
        return Json("a");
    } 
```

（这是当前的实现，它没有逻辑，因为我还在测试一些东西）。

我的问题是：当我单击提交按钮时，会使用正确的值调用操作，但是当它返回时，我的浏览器会重定向到 /Upload/Save （这是操作 URL）。为什么会这样？有什么办法可以预防吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:58:16.400

正如我所看到的，您使用整页重新加载：

```
    动作="/上传/保存"

```

您还尝试将数据发布到控制器中的 json 操作方法。您需要使用 jquery 进行所有表单提交，大多数问题您会在 ajax 文件上传器中找到。

**补充：** 另请查看[serialize()](http://api.jquery.com/serialize/)它将帮助您收集所有表单输入值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:58:45.067

您可以使用[Ajax.BeginForm](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform%28v=vs.108%29.aspx)来防止重新加载页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:54:35.830

您可以对您的方法（例如 AJAX）使用异步调用来防止页面重新加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T19:52:29.680

不需要阻止它，只需在您的服务器代码中**重定向用户。**

# c# - 制作日志文件和错误报告

> ID：12450137
> 
> 赞同：0
> 
> 时间：2012-09-16T19:45:07.467
> 
> 标签：c#, .net, winforms, error-reporting

如果发生错误，将创建一个“纯文本”格式的日志文件，然后由另一个应用程序 errorReportin.exe 发送。这是一个 GUI 应用程序，它将读取并通过使用 BackgroundWorker 将文件内容发送到我的电子邮件。

1个问题：我真的需要使用一些XML或JSON等而不是简单的文本文件吗？为什么？使用这个我会有什么问题吗？我想不出不使用简单文本文件的原因之一。它很容易阅读，也许只有通过阅读电子邮件我才能有一个想法来解决问题。

2个问题：让这个文件对任何人都可读是危险的吗？我需要加密它或类似的东西吗？

到目前为止，我正在从and登录`StackTrace`和。说如果你认为我错过了一些信息来做日志。`Message``Exception``Date`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:59:03.867

Stacktrace 在某些地方不受欢迎，而其他地方则将其转储到日志中。我看不出有任何理由需要将简单的日志变得复杂。然后，您的应用程序将需要构建 XML 等。

另外，为什么要将日志传递给辅助进程？主应用程序不仅可以有一个等待消息并记录它们的类（如果需要，可以在单独的线程上）吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:52:55.243

1.  使用对您的应用程序有意义的任何文件格式。如果您使用多个不同的字段来传达信息，XML 和 JSON 会很有用，但如果它是简单的消息，那么纯文本就可以了。事实上，许多应用程序通过简单的文本消息进行进程间通信。

2.  这取决于您的数据的敏感性以及它是否暴露在公共互联网上。如果两者的答案都是肯定的，您应该采取措施确保传输和/或消息受到保护。

# php - 只通过ajax访问文件

> ID：12450148
> 
> 赞同：-4
> 
> 时间：2012-09-16T19:47:12.913
> 
> 标签：php, javascript, ajax, .htaccess, http-status-code-404

嘿，我想知道是否有一种方法可以在使用 ajax 时只查看您的文件。例如，我设置了 ajax 等，我提出了一个请求，但任何人都可以找出我的文件夹结构并转到我的 php 文件，任何事情都可能发生，如果他们尝试访问该文件，我想给他们一个 404。我没有尝试过任何事情，因为我没有最小的线索。您需要使用 .htaccess 吗？

我试图在互联网上搜索这个我找不到任何东西，所以如果有另一个类似的帖子，请告诉我并给我一个链接，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:04:52.553

不是一件容易的事。

与任何其他 HTTP 访问一样，Ajax 是通过请求进行的。正常的请求是用这个`GET`方法完成的，就像有一个`GET`Ajax 请求方法一样。

我遇到了你的情况，时间不长，我的解决方案，即使远非完美，是这样的：

1.  使应用程序中的所有 Ajax 调用都使用该`POST`方法；
2.  将此添加到您`include`/`require`在每个应该通过 Ajax 获取的 PHP 开头的文件中：

    ```
    if ($_SERVER['REQUEST_METHOD'] != 'POST') {
        header('Location: /404page.php'); //The / represents the site root
        exit;
    } 
    ```

这样，试图直接打开您的页面的人将被重定向到 404 页面。

当然，可以很容易地伪造一个 POST 请求标头。您还可以为每个 Ajax 调用添加一个 POST 参数，但是可以伪造标头的参数也可以轻松伪造 POST 数据。

只需进行强大的服务器端验证，以确保用户有权查看页面并且它应该接收的所有数据都在那里并且有效。如果有人乱用请求标头并在您的应用程序之外看到丑陋的页面，这毕竟不是您的问题。

# c# - 标题栏的上下文菜单

> ID：12450151
> 
> 赞同：6
> 
> 时间：2012-09-16T19:47:35.517
> 
> 标签：c#, c++, wpf, windows

> **可能重复：**
> [如何自定义 Windows 窗体的系统菜单？](https://stackoverflow.com/questions/4615940/how-can-i-customize-the-system-menu-of-a-windows-form)

如何像在 Google 的 Chrome 中那样将新项目插入到标题栏的上下文菜单中：

![谷歌浏览器](../Images/f59172f4cf54c2fdd39b26f3bc8f7758.png)

我更喜欢 C# WPF 解决方案，但我可以在 C++ 中执行此操作（互操作都已设置）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:27:48.383

这里有一些其他的选择：

*   [http://www.codeproject.com/Articles/70568/An-MVVM-friendly-approach-to-adding-system-menu-en](http://www.codeproject.com/Articles/70568/An-MVVM-friendly-approach-to-adding-system-menu-en)

*   [http://www.codeproject.com/Tips/320885/Customize-Window-System-Menu-in-WPF](http://www.codeproject.com/Tips/320885/Customize-Window-System-Menu-in-WPF)

如果您想为应用程序设置菜单外观，您可以考虑使用实际创建 WPF 菜单的第二个链接，而不是修改现有的本机系统菜单。

我建议您扩展代码以扫描本机系统菜单，以便您可以创建反映预期系统菜单项的 WPF 菜单项。

# mysql - 获取排序中特定项目的订单 ID

> ID：12450169
> 
> 赞同：0
> 
> 时间：2012-09-16T19:50:10.350
> 
> 标签：mysql

假设我们有一个表格，其中包含按此特定顺序引入的闲置值：10、11、7、5、17、147、555。

例如，如果我想找出 11 的位置，如果我要按升序排列表格，我会看到索引是 4。

但是，对于大量数据，我不想获取整个表并在 php 中对其进行排序，因为那会很愚蠢。

我想知道的是mysql是否可以在不查询所有值的情况下返回有序查询中值的索引。

谢谢！

**更新#1**

我想要的查询看起来像这样（感谢 bluefeet）：

```
SELECT rownum FROM (
SELECT col1, @rownum:=@rownum+1 AS rownum
FROM yourtable,
(SELECT @rownum:=0) table1
ORDER BY col1) table2
WHERE col1=11 
```

你可以在这里测试它[http://sqlfiddle.com/#!2/a21c8/12](http://sqlfiddle.com/#!2/a21c8/12)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:55:10.050

MySQL 本身没有`rownum`，但您可以通过以下方式模拟它：

```
SELECT col1, @rownum:=@rownum+1 AS rownum
FROM yourtable,
(SELECT @rownum:=0) r
ORDER BY col1 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/a21c8/1)

使用它，您可以确定`rownumber`哪些可能会满足您的需求。

如果你想要一个特定的`rownumber`，你可以将它包装在一个子查询中：

```
select *
from 
(
  SELECT col1, @rownum:=@rownum+1 AS rownum
  FROM yourtable,
  (SELECT @rownum:=0) r
  ORDER BY col1
) x
where rownum = 6 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a21c8/13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T19:54:23.300

MySql 对此没有特殊功能（据我所知），但您可以使用[存储过程](http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html)来计算结果。您仍然必须通过大量数据来计算索引，因此在大型数据集上这将是昂贵的。

# macos - 让我的应用程序使用具有关联扩展名的文件中的数据

> ID：12450171
> 
> 赞同：1
> 
> 时间：2012-09-16T19:50:38.793
> 
> 标签：macos, file-association

我有一个游戏应用程序，我正在将 Aquatic Prime 纳入其中以进行身份​​验证。当用户购买我的应用程序时，我计划通过相关文件将 AquaticPrime 密钥通过电子邮件发送给他们。然后让用户双击相关文件，如果密钥有效，则打开应用程序。无需复制/粘贴或输入长序列号。至此，我已经成功地将文件扩展名与应用程序相关联，并且 AquaticPrime 在应用程序中运行。但是当我的应用程序通过双击关联文件打开时，我不明白如何访问关联文件中的信息。任何线索将不胜感激。谢谢！

# scheduled-tasks - 支持经常重复的 Linux (Fedora) 调度程序

> ID：12450172
> 
> 赞同：1
> 
> 时间：2012-09-16T19:50:40.637
> 
> 标签：scheduled-tasks, crontab, scheduler

并不是说我对 crontab 有很多经验，但我知道不可能将作业安排为每 X 个时间单位运行一次（例如每 30 分钟运行一次），但执行时间必须是特定的。

有谁知道支持此功能并且可以在后台运行命令的调度程序，更好的是 systemd 作为服务？当然，那是免费的（所以没有 Autosys 之类的）。

例如，Fedora 上的 Ktimer 可以重复，但它不是服务，没有 CL，并且应用程序实际上必须打开才能运行任务。所以它不会削减它...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:13:40.260

实际上，它可以通过 crontab 来完成：

0,20,40 * * * *

每 20 分钟运行一次

# objective-c - Objective-C - 根据对象上的两个点定位对象

> ID：12450175
> 
> 赞同：1
> 
> 时间：2012-09-16T19:51:05.860
> 
> 标签：objective-c

假设我有一个矩形对象。我想沿着一条路径移动它。是否有可能不仅根据一个点，而且根据它上面的两个点来定位这个对象？例如，物体上的点 A 在 125,220，在这种情况下我希望点 B 在 140,235。这样我想设置物体的方向。在 Objective-c 中（我也假设在其他语言中）当我们说“图形对象的位置”时，我们只考虑一个点，通常是左下角。但是仅根据该点定位对象只会在另一个点重绘左下角的对象，其余部分将根据对象的高度和宽度确定，这不是我想要的。

编辑：![在此处输入图像描述](../Images/0c77220249d3dff758ce21775eff6989.png)

正如您所看到的（可能这是您自然所期望的），对象将作为一个盒子从一个点移动到另一个点，因为只有一个点确定它的位置。你问我为什么需要不同的东西。因为我有一个计时器和一条弯曲的路径。每次计时器滴答作响时，我都需要我的对象位于不同的位置（倾倒点数组中的下一个位置）。因此，我没有添加到 X 和 Y 坐标，而是明确地告诉对象在某个位置。这样我想实现我的对象沿着弯曲路径的正常移动。当物体的前部移动到某个点时，我需要后部也移动到某个点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:21:47.010

我终于找到了一种方法来做到这一点。我必须根据前一点和下一点旋转对象。因此，假设对象将沿着的路径上有点 A、B、C、D、E、F、G、H。如果汽车在 D 点，要计算旋转角度，我执行以下操作：

```
myObject.rotation=-atan((D.y-C.y)/(D.x-C.x))/3.141592*180; 
```

如您所见，这只是数学。可以应用微调以获得更好、更平滑的旋转。例如，在这里我从当前位置的 Y 中减去前一个位置的 Y，然后我对 X 做同样的事情，然后我得到它们比率的负反正切。但你可以做

```
-atan((E.y-C.y)/(E.x-C.x))/3.141592*180; 
```

选择正确的位置来减去它们的 x 和 y 坐标将导致正确且平滑的旋转。

我想你可以猜到 3.141592 是 M_PI；

# vb.net - VB.NET - 创建图像 - 调整大小但将背景添加到剩余空间

> ID：12450177
> 
> 赞同：1
> 
> 时间：2012-09-16T19:51:37.373
> 
> 标签：vb.net, image, gdi, system.drawing, system.drawing.imaging

我正在尝试将图像调整为特定尺寸，但如果图像小于我选择的尺寸，我根本不想拉伸图像。相反，我想在未使用的图像区域周围添加黑色背景。

我认为最简单的方法是创建一个我想要的尺寸的新图像并设置背景颜色，然后将图像添加并居中于该背景之上。

我使用以下方法创建了位图：

```
Dim bmp As New Drawing.Bitmap(500, 500)
Dim grap As Drawing.Graphics = Drawing.Graphics.FromImage(bmp)
grap.Clear(Drawing.Color.Black) 
```

从这一点开始，我对如何完成该过程有点迷茫，所需要的只是将图像添加到位图和中心。

任何想法都会非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:24:46.670

我没有对此进行测试，但看起来你已经得到了你想要的，但是：

```
grap.Clear(Drawing.Color.Black) 
```

肯定会将整个图形抹回黑色。

尝试在绘制图像之前进行清除：

```
Graphics pic = this.CreateGraphics();
pic.Clear(Color.Black);
pic.DrawImage(img, new Point(center)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:10:12.900

最终使用：

```
' Load Image
Dim FilePath As String = "testimage.jpg"
Dim OriginalImage As New Bitmap(FilePath)

' Resize Image While Maintaining Aspect Ratio
Dim aspectRatio As Double
Dim newHeight As Integer
Dim newWidth As Integer
Dim maxWidth As Integer = 500
Dim maxHeight As Integer = 500

' Calculate Size
If OriginalImage.Width > maxWidth Or OriginalImage.Height > maxHeight Then
    If OriginalImage.Width >= OriginalImage.Height Then ' image is wider than tall
        newWidth = maxWidth
        aspectRatio = OriginalImage.Width / maxWidth
        newHeight = CInt(OriginalImage.Height / aspectRatio)
    Else ' image is taller than wide
        newHeight = maxHeight
        aspectRatio = OriginalImage.Height / maxHeight
        newWidth = CInt(OriginalImage.Width / aspectRatio)
    End If
Else ' if image is not larger than max then increase size
    If OriginalImage.Width > OriginalImage.Height Then
        newWidth = maxWidth
        aspectRatio = OriginalImage.Width / maxWidth
        newHeight = CInt(OriginalImage.Height / aspectRatio)
    Else
        newHeight = maxHeight
        aspectRatio = OriginalImage.Height / maxHeight
        newWidth = CInt(OriginalImage.Width / aspectRatio)
    End If

    ' Below keeps original height & width instead of resizing to fit new height / width
    ' newWidth = OriginalImage.Width
    ' newHeight = OriginalImage.Height
End If

Dim newImg As New Bitmap(OriginalImage, CInt(newWidth), CInt(newHeight)) '' blank canvas
' Create New Bitmap
Dim bmp As New Drawing.Bitmap(500, 500)
Dim grap As Drawing.Graphics = Drawing.Graphics.FromImage(bmp)
grap.Clear(Drawing.Color.Black)
Dim g As Graphics = Graphics.FromImage(bmp)

' Calculate Points To Insert Resized Image
Dim InsertX As Integer
Dim InsertY As Integer

' Calculate Y Axis Point
If newImg.Height >= 500 Then
    InsertY = 0
Else
    InsertY = CInt(((500 - newImg.Height) / 2))
End If

' Calculate X Axis Point
If newImg.Width >= 500 Then
    InsertX = 0
Else
    InsertX = CInt(((500 - newImg.Width) / 2))
End If

' Add Resized Image To Canvas
g.DrawImage(newImg, New Point(InsertX, InsertY)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T21:19:42.020

通过仅使用较大轴的比率，您可能会在另一个比率迫使您超过另一个轴的情况下失败。即 1400x1000 ->（我想适应 300x200）-> 但只有 1400/300 比率（4.6），结果将是 300x214。我认为检查这两个比率并继续使用更大的比率会很有用

# c# - 清除带有附加 ItemsSource 的 ComboBox？-> ItemsSource = null -> NullReferenceException

> ID：12450178
> 
> 赞同：1
> 
> 时间：2012-09-16T19:51:38.543
> 
> 标签：c#, wpf, event-handling

我有一个`CheckBox chkAddToGroup`激活这个`ComboBox cmbGroup`。如果`chkAddToGroup`正在检查，则会发生以下情况：

```
ObservableCollection<Group> groupColl = new ObservableCollection<Group>() { };
foreach (Group g in GroupHandler.GroupList)
{
    groupColl.Add(g);
}
cmbGroup.ItemsSource = groupColl;
cmbOrganisation.SelectedIndex = 0;
cmbGroup.IsEnabled = true; 
```

如您所见`cmbGroup`，附加到`groupColl`（`DisplayMemberPath`设置在外部`Style`）。

如果我尝试重置表单，则会出现问题。因此我有一个`Button btnReset`. 如果用户单击`btnReset`应用程序，则执行以下操作：

```
chkAddToGroup_Unchecked(this, null); 
```

然后发生以下情况`chkAddToGroup_Unchecked(object sender, RoutedEventArgs e)`：

```
private void chkAddToGroup_Unchecked(object sender, RoutedEventArgs e)
    {
        cmbGroup.ItemsSource = null;
        cmbGroup.IsEnabled = false;
        cmbGroupRole.ItemsSource = null;
        cmbGroupRole.IsEnabled = false;
    } 
```

如您所见，我设置`ItemsSource = null`以清除组合框。（不知道任何其他方式atm）

如果用户在点击重置按钮之前没有选中复选框，则不会发生任何特殊情况。但是如果用户确实选中了复选框并选择了一个项目，那么就会有一个`NullReferenceException`一旦应用程序尝试执行，就会出现`cmbGroup.ItemsSource = null;`

为什么会这样？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:14:48.553

我不能向您保证这适用于 WPF，但您可以尝试一下。我看了WPF很久了。

```
cmbGroup.Items.Clear(); 
```

或者

```
for(int i=0; i<cmbGroup.Items.Count; i++)
{
   cmbGroup.RemoveAt(i);
} 
```

或使用空列表

```
ObservableCollection<Group> emptyList = new ObservableCollection<Group>();
cmbGroup.ItemsSource = emptyList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:17:56.147

你可以试试

```
cmbGroup.Items.Clear(); 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.items.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.items.aspx)

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.itemcollection.clear.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcollection.clear.aspx)

# c# - 并非所有点都出现

> ID：12450183
> 
> 赞同：0
> 
> 时间：2012-09-16T19:52:17.867
> 
> 标签：c#, javascript, asp.net, google-maps

我做了这个代码

*   我想显示浮点列表（地图中的点）
*   但只有第一点似乎其他人没有。点之间的路径也被隐藏了，我不知道为什么。

    @model IList @{ Layout = "~/Views/Shared/_Lay2.cshtml";} varculture = System.Globalization.CultureInfo.GetCultureInfo("en-US");}

    ```
    @for (int marker=2;marker<@Model.Count; marker++) 
    {
    <script type="text/javascript">
        alert(@marker);
        var myOptions = {zoom: 30, center: myLatLng, mapTypeId: google.maps.MapTypeId.TERRAIN };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var flightPlanCoordinates = [
             new google.maps.LatLng(@Model[marker].ToString(culture), @Model[marker + 1].ToString(culture)),];
        var flightmarker = new google.maps.Marker({
                position: new google.maps.LatLng(@Model[marker].ToString(culture), @Model[marker + 1].ToString(culture)),
                map: map,
                title: " denden" });var flightPath = new google.maps.Polyline({
                path: flightPlanCoordinates,
                strokeColor: "#FF0000",
                strokeOpacity: 1.0,
                strokeWeight: 2
            });
        flightPath.setMap(map);
    </script>

    marker++; 

    } 
    ```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:57:46.810

看起来您正在使用循环的每次迭代重新创建地图。也许尝试这样的事情：

```
@model IList<float>
  @{ Layout = "~/Views/Shared/_Lay2.cshtml";
 var culture = System.Globalization.CultureInfo.GetCultureInfo("en-US");}
 <body  onload="initialize(@Model[0].ToString(culture), @Model[1].ToString(culture))">
 <table style="width: 100%; height: 70%"> <tr>
    <td style="width: 100%"><div id="map_canvas" style="width: 100%; height: 500px;"></div></td>
    <script type="text/javascript">
     var myOptions = {zoom: 30,
                center: myLatLng,
                mapTypeId: google.maps.MapTypeId.TERRAIN };
            var map = new google.maps.Map(document.getElementById("map_canvas"),
             myOptions);
            @for (int marker=2;marker<@Model.Count; marker += 2) {
            var flightPlanCoordinates = [
             new google.maps.LatLng(@Model[marker].ToString(culture), @Model[marker + 1].ToString(culture)),];
            var flightmarker = new google.maps.Marker({
                position: new google.maps.LatLng(@Model[marker].ToString(culture), @Model[marker + 1].ToString(culture)),
                map: map,
                title: " denden" });var flightPath = new google.maps.Polyline({
                path: flightPlanCoordinates,
                strokeColor: "#FF0000",
                strokeOpacity: 1.0,
                strokeWeight: 2
            });
            flightPath.setMap(map);
            }
        </script>
    </tr>
    </table>
    <script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

# c# - 翻译 DataGridView 单元格

> ID：12450191
> 
> 赞同：0
> 
> 时间：2012-09-16T19:53:35.513
> 
> 标签：c#, datagridview, bindingsource

我的班级有 4 个公共 int 属性。我要做的是将List绑定到BindingSource作为DataSource，并将BindingSource绑定到DataGridView。一切正常，现在我正在尝试将单元格值“翻译”为其他内容。例如我有：

```
List<MyClass> list = new List<MyClass>()
list.Add(new MyClass(1,2,3,4))
list.Add(new MyClass(0,2,3,4)) 
```

所以在 DataGridView 中它看起来像这样：

```
----------------
Row1 1|2|3|4
----------------
Row2 0|2|3|4
---------------- 
```

但我想做的是像这样：

```
----------------
Row1 "Dog"|2|3|4
----------------
Row2 "Cat"|2|3|4
---------------- 
```

如您所见，我班级的“0”值在 DataGridView 中显示为“Cat”，“1”显示为“Dog”。我希望它是 ComboBoxCell 并在两个方向上工作。将“Dog”更改为“Cat”应该将基础列表中的值从“1”更改为“0”。最好、最干净的方法是什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:29:04.920

每个 DataGridView 都有**一个列定义的集合。**在该列表中，当前有四个[textBoxColumns](http://msdn.microsoft.com/de-at/library/system.windows.forms.datagridviewtextboxcolumn.aspx)。这就是为什么你看到

```
----------------
Row1 1|2|3|4
----------------
Row2 0|2|3|4
---------------- 
```

您现在必须将第一列的列定义更改为[**DataGridViewComboBoxColumn**](http://msdn.microsoft.com/de-at/library/system.windows.forms.datagridviewcomboboxcolumn.aspx)。之后，您可以为此列设置数据源（例如：包含*Dog、Cat* aso 的新 BindingList ）并将您的 sourceColumn 绑定到**DataPropertyName**

```
// short demo code, MUST BE ADAPTED
dgvCOMBOBOXCOLUMN.DataSource = YOUR_CATS_DOGS_BS;
dgvCOMBOBOXCOLUMN.DisplayMember = COLUMNNAME_OF_BS_TO_SHOW;
dgvCOMBOBOXCOLUMN.Value = COLUMNNAME_OF_BS_WITH_ACCORDING_IDs;
dgvCOMBOBOXCOLUMN.DataPropertyName = COLUMNNAME_OF_MYCLASS_TO_BIN; 
```

当然你可以在**VS 设计**器中进行这些设置，*推荐*！

# mysql - 使用多个 IN 子查询改进 SQL 查询（按属性系统过滤）

> ID：12450195
> 
> 赞同：2
> 
> 时间：2012-09-16T19:54:09.293
> 
> 标签：mysql, subquery, database-performance

我有一个带有属性系统的产品目录。

我想创建一个允许客户按属性浏览产品的系统（例如在 Magento 上）。因此，我试图以编程方式检索具有特定值的属性（或具有许多特定值的许多属性）的产品列表（通过 ID 返回）。

它运行良好，但我的 SQL 查询很糟糕！

例如：如果我想检索具有这 3 个属性（和值）的产品列表，这是我当前的 SQL 查询：

*   第一个过滤器：id_attribut = 3 AND value = 'Lorem ipsum'
*   第二个过滤器：id_attribut = 4 AND value = 'Test2'
*   第三个过滤器：id_attribut = 2 AND value = 'Bar2'

    ```
    选择 products.id
    来自产品
    加入 products_attributs ON products_attributs.id_product = products.id
    WHERE products_attributs.value = 'Lorem ipsum'
    AND products_attributs.id_attribut = 3
    AND products_attributs.id_product ==> 返回 ID：25、27
    在 （
        选择 id_product
        FROM products_attributes
        其中 id_attribut = 4
        AND 值 = 'Test2' ==> 返回 ID：27
        AND id_product IN (
            选择 id_product
            FROM products_attributes
            其中 id_attribut = 2
            AND 值 = 'Bar2' ==> 返回 ID：27
        )
    )
    ```

结果：返回 ID 27（这是与客户选择的三个属性相对应的唯一产品）。

它运行良好，但不是很优雅，也不是很优化（想象一下，如果我有超过 10 个过滤器！）。

products_attributs 表：

```
-------------------------------------------------
| 编号 | id_product | id_attribute | 价值 |
-------------------------------------------------
| 1 | 25 | 1 | 福 |
| 2 | 25 | 2 | 酒吧 |
| 3 | 25 | 3 | Lorem ipsum |
| 4 | 25 | 4 | 测试 |
| 5 | 27 | 1 | Foo2 |
| 6 | 27 | 2 | 酒吧2 |
| 7 | 27 | 3 | Lorem ipsum |
| 8 | 27 | 4 | 测试2 |
| 9 | 28 | 1 | ...等|
-------------------------------------------------
```

我该如何改进呢？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:07:47.223

拥有“漂亮”SQL 的唯一方法是为所有属性创建列。这很难维护，所以我不推荐它。

鉴于此，您可以多次加入属性表，如下所示：

```
SELECT p.id
FROM products p
LEFT OUTER JOIN products_attributs pa1 ON pa1.id_product = p.id and pa1.value = 'Lorem ipsum' AND pa1.id_attribut = 3
LEFT OUTER JOIN products_attributs pa2 ON pa2.id_product = p.id and pa2.value = 'Test2' AND pa1.id_attribut = 4
LEFT OUTER JOIN products_attributs pa3 ON pa3.id_product = p.id and pa3.value = 'Bar2' AND pa1.id_attribut = 2 
```

祝你好运。

# c - 在没有选择或“如果”语句的情况下确定哪个更大或更小

> ID：12450199
> 
> 赞同：-3
> 
> 时间：2012-09-16T19:54:41.163
> 
> 标签：c

我是一个非常新的程序员。这是使用 C 语言。我必须编写一个程序，该程序接受两个输入整数并将较小的整数平方并将较大的整数加倍，如果两个输入相同，则保持整数相同。我不能使用关系运算符（<、>、<=、>=、或==）或 if 语句。我该如何开始呢？我知道我将不得不使用模数，但我不知道如何使用。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:04:47.507

这是一个间接的答案，可以帮助您上路：

```
x = y
X % y == 0
5 % 5 == 0

x < y
x % y == x
3 % 7 == 3
3 % 3 == 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:10:22.153

请看看这个网站： http: [//graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax](http://graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax)

它展示了如何在没有分支的情况下比较两个整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T20:37:46.623

剧透：

```
#include <stdio.h>

void no_if(int *p, int *q)
{
int *small, *large;
int diff = *p != *q;

small = *p < *q ? p : q;
large = *p > *q ? p : q;

*large += (diff) ? *large : 0;
*small *= (diff) ? *small : 1;

}

int main(void)
{
int i,j;
for (i=0; i < 3; i++) {
        for (j=0; j < 3; j++) {
                int ix=i;
                int jx=j;
                no_if ( &ix, &jx);
                printf("%d %d -> %d %d\n", i, j, ix, jx );
                }
        }
return 0;
} 
```

更新：这使用比较/关系运算符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-16T19:59:20.213

您可以使用三元运算符

```
 result_a=(!((a-b)&0x8000000))?2*a:((a<b)?a*a:a);
  result_b=(b>a)?2*b:((b<a)?b*b:b); 
```

新**UPDATE**：或使用整数的最高位：

```
 result_a=((b-a)&0x80000000)*2*a+((a-b)&0x80000000)*a*a*(!!(a-b))+ (!(a-b))*a;      
  result_a=((a-b)&0x80000000)*2*ab+((b-a)&0x80000000)*b*b*(!!(a-b))+ (!(a-b))*b; 
```

# xml - 正确的 XML 模式数据类型？

> ID：12450200
> 
> 赞同：0
> 
> 时间：2012-09-16T19:55:03.123
> 
> 标签：xml, types, xsd, schema

我有一个关于 XML Schema 类型的问题。

类型必须是：

文本，允许嵌入 HTML 格式

我应该用什么来做到这一点？（允许嵌入的 HTML 格式？我认为例如文本 xsd:string 会很好，但我不知道该怎么做才能允许嵌入的 HTML 格式）

在这种情况下我应该包括什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:04:37.217

我认为 xsd:string 将是一个不错的选择。它将允许您像这样将 html 嵌入到 CDATA 中。

```
<xsd:element name="embedded_html" type="xsd:string"/>

<embedded_html><![CDATA[<p>This is silly HTML</p>]]></embedded_html> 
```

但是你根本没有得到任何形式的验证，任何字符串都可以。

您可以做的另一件事就是使用为 xhtml [http://www.w3.org/TR/xhtml1-schema/#schemas](http://www.w3.org/TR/xhtml1-schema/#schemas)提供的模式。但这实际上取决于您要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T23:41:50.897

`xs:string`数据类型确实不适合穿插标记的字符数据；这就是复杂类型`mixed="true"`的用途。

如果您正在为文档类型编写 XSD 模式并希望特定元素能够包含任意 XHTML 元素，那么声明它的正确方法是这样的：

```
<xs:element name="embedded_html">
  <xs:complexType mixed="true">
    <xs:sequence>
      <xs:any namespace="http://www.w3.org/1999/xhtml" 
              minOccurs="0" 
              maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

这将不允许 HTML 包含标签沙拉；HTML 需要格式正确（即编码为 XHTML）。如果出于某种原因您认为您需要允许将标签沙拉作为 的内容`embedded_html`，那么您的选择是重新考虑您实际需要的内容，或者像其他一些词汇表所做的那样并转义 HTML 编码。但即使在这种情况下，我认为使用混合内容会比`xs:string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T20:04:27.007

模式的目的是控制文档的逻辑结构，而不是选择字符数据的转义约定。

您只需`CDATA`在文档 XML 中添加部分，无需修改 XSD。

链接：[http ://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

# javascript - 如何使用Javascript防止浏览器叮当声

> ID：12450202
> 
> 赞同：3
> 
> 时间：2012-09-16T19:55:10.440
> 
> 标签：javascript, jquery, html, jquery-plugins, jquery-events

我正在使用 jwerty 插件来处理键盘事件，并创建了一个组合：“alt+a”。

它运行良好，事件触发，但 Windows 叮当！声音来了。这太烦人了。

我该如何预防？

这是链接，自己听：http: [//jsfiddle.net/YShy9/3/](http://jsfiddle.net/YShy9/3/)

 `* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T20:05:07.777

发生这种情况是因为没有为 Alt-A 定义访问密钥。一个快速的解决方案是在您的 HTML 中添加类似这样的内容：

```
<div accesskey="a"></div> 
```

这是一个[小提琴](http://jsfiddle.net/aTQ3M/)。`

# objective-c - 删除部分网址

> ID：12450211
> 
> 赞同：1
> 
> 时间：2012-09-16T19:56:26.570
> 
> 标签：objective-c, cordova

我正在使用 Sencha Touch 和 PhoneGap。该代码适用于 iOS，它正在等待带有后缀的 url #phonegap-external ..

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
NSURL *url = [request URL];
if ( ([url fragment] != NULL) && ([[url fragment] rangeOfString:@"phonegap=external"].location != NSNotFound))
{
    if ([[UIApplication sharedApplication] canOpenURL:url]) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    }
}

return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
} 
```

所以因为我没有用 Obj-C 写过任何代码，我需要你的帮助。有人可以编辑代码，这样它就可以打开没有后缀的 url。

编辑：如果用户在应用程序中打开 url，它会在 webview 中打开它，但有时我更喜欢在 Safari 中打开 url。因此，此代码检查 url 是否具有这样的后缀 - [http://google.com#phonegap-external](http://google.com#phonegap-external)，然后在 Safari 中打开它。唯一让我烦恼的是 url 没有更改为[http://google.com](http://google.com)并且它打开给定 url [http://google.com/#phonegap-external](http://google.com/#phonegap-external)。有人可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:11:36.950

如果您确定 URL 中指示是内联还是外部打开的部分（即`#phonegap-external`字符串）始终是 URL 中的最后一个，那么您可以尝试通过编写如下内容来删除此后缀：

```
NSString *orig = [url absoluteString];
size_t frLen = [@"phonegap-external" length];
NSString *stripped = [orig substringToIndex:orig.length - frLen];
NSURL *newURL = [NSURL URLWithString:stripped];

[[UIApplication sharedApplication] openURL:newURL]; 
```

# java - JButton 通过工具提示文本呈现不可点击

> ID：12450230
> 
> 赞同：1
> 
> 时间：2012-09-16T19:58:58.530
> 
> 标签：java, swing, jbutton, event-dispatch-thread

当我将工具提示文本添加到 JDialog 中的**JButton**组件时，该按钮（实际上是两个执行类似操作的按钮）就像它被禁用（*setEnabled(false)*）一样。我感觉它与实际的工具提示文本没有直接关系，而是在**EDT**上循环执行某些操作。无论如何，这是课堂。

```
package org.carroll.dialogs.editing;

import java.awt.Dimension;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.KeyListener;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JTextField;
import org.carroll.data.school.AllCourses;
import org.carroll.data.settings.Settings;
import org.carroll.internal.InternalPanel;
import org.carroll.school.Course;
import org.carroll.utils.Logging;
import org.swing.Dialog;
import org.swing.Listeners;
import org.swing.dialogs.messages.ErrorMessage;

/**
 * Dialog for editing a course. Is custom to editing courses.
 *
 * @author Joel Gallant
 */
public class EditCourseDialog extends Dialog {

JButton save, done, cancel;
KeyListener doneListener = new Listeners.DoneListener() {
    @Override
    public void enterPressed() {
        if (!done.isFocusOwner()) {
            done.doClick();
        }
    }
};
static Course currentCourse;

/**
 * Creates dialog with default course selected.
 */
public EditCourseDialog() {
    super("Edit Course");
    currentCourse = AllCourses.getInstance().get(0);
}

/**
 * Creates dialog that selects a course by default.
 *
 * @param startingSelection default selection
 */
public EditCourseDialog(String startingSelection) {
    super("Edit Course");
    try {
        currentCourse = AllCourses.getInstance().get(startingSelection);
    } catch (NoSuchFieldException ex) {
        currentCourse = AllCourses.getInstance().get(0);
    }
}

public EditCourseDialog(Course startingCourse) {
    super("Edit Course");
    currentCourse = startingCourse;
}

void editCourse(String name, int credits, int units, int[] semester, int order) {
    Logging.log(name + " edited.");
    currentCourse.setName(name);
    currentCourse.setCredits(credits);
    currentCourse.setUnits(units);
    currentCourse.setSemester(semester);
    currentCourse.setOrder(order);
    if (!AllCourses.getInstance().getElements().contains(currentCourse)) {
        AllCourses.getInstance().add(currentCourse);
    }
    InternalPanel.COURSES.refresh();
}

@Override
protected void init() {
    GridBagLayout layout = new GridBagLayout();
    setLayout(layout);
    setPreferredSize(new Dimension(385, 280));

    Integer[] creditArray = {1, 3, 5};
    String[] semesterArray;
    try {
        semesterArray = new String[Integer.parseInt(Settings.getInstance().get("Semesters").getValue()) + 1];
        for (int x = 0; x < Integer.parseInt(Settings.getInstance().get("Semesters").getValue()); x++) {
            semesterArray[x] = String.valueOf(x + 1);
        }
        semesterArray[semesterArray.length - 1] = "Year";
    } catch (NoSuchFieldException ex) {
        semesterArray = new String[2];
        semesterArray[0] = "1";
        semesterArray[1] = "2";
    }

    final JComboBox<String> course = new JComboBox<>(AllCourses.getInstance().getNames());
    final JLabel nameLabel = new JLabel("Name"),
            creditsLabel = new JLabel("Credits"),
            unitsLabel = new JLabel("Units"),
            semesterLabel = new JLabel("Semester"),
            orderLabel = new JLabel("Order");
    final JTextField name = new JTextField(),
            units = new JTextField(),
            order = new JTextField();
    final JButton up = new JButton("↑"),
            down = new JButton("↓");
    final JComboBox<Integer> credits = new JComboBox<>(creditArray);
    final JComboBox<String> semester = new JComboBox<>(semesterArray);
    save = new JButton("Save");
    done = new JButton("Done");
    cancel = new JButton("Cancel");

    course.setSelectedItem(currentCourse.getName());

    String orderExpl = "<html>The order you are doing the courses in during the semester. "
            + "<br>It starts at 1, and goes on. (Do not make multiple courses with same order)</html>";
    orderLabel.setToolTipText(orderExpl);
    order.setToolTipText(orderExpl);
    up.setToolTipText(orderExpl);
    down.setToolTipText(orderExpl);

    name.setText(currentCourse.getName());
    name.setCaretPosition(0);
    units.setText(String.valueOf(currentCourse.getUnits()));
    credits.setSelectedItem(currentCourse.getCredits());
    semester.setSelectedItem(currentCourse.getSemesters().length > 1 ? "Year" : String.valueOf(currentCourse.getSemesters()[0]));
    order.setText(String.valueOf(currentCourse.getOrder()));

    up.setFont(up.getFont().deriveFont(Font.BOLD, (float) 14));
    down.setFont(up.getFont());
    course.addKeyListener(doneListener);
    name.addKeyListener(doneListener);
    units.addKeyListener(doneListener);
    credits.addKeyListener(doneListener);
    semester.addKeyListener(doneListener);
    order.addKeyListener(doneListener);
    done.addKeyListener(doneListener);
    cancel.addKeyListener(doneListener);

    save.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            try {
                int[] semesters;
                if (semester.getSelectedItem().equals("Year")) {
                    semesters = new int[Integer.parseInt(Settings.getInstance().get("Semesters").getValue())];
                    for (int x = 0; x < semesters.length; x++) {
                        semesters[x] = x + 1;
                    }
                } else {
                    semesters = new int[]{Integer.parseInt(semester.getSelectedItem().toString())};
                }
                editCourse(name.getText(), Integer.parseInt(credits.getSelectedItem().toString()),
                        Integer.parseInt(units.getText()), semesters,
                        Integer.parseInt(order.getText()));
            } catch (NumberFormatException ex) {
                new ErrorMessage(ex, "A number was entered wrong").createAndViewGUI();
            } catch (NoSuchFieldException ex) {
                new ErrorMessage(ex).createAndViewGUI();
            }
        }
    });
    done.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            try {
                int[] semesters;
                if (semester.getSelectedItem().equals("Year")) {
                    semesters = new int[Integer.parseInt(Settings.getInstance().get("Semesters").getValue())];
                    for (int x = 0; x < semesters.length; x++) {
                        semesters[x] = x + 1;
                    }
                } else {
                    semesters = new int[]{Integer.parseInt(semester.getSelectedItem().toString())};
                }
                editCourse(name.getText(), Integer.parseInt(credits.getSelectedItem().toString()),
                        Integer.parseInt(units.getText()), semesters,
                        Integer.parseInt(order.getText()));
                dispose();
            } catch (NumberFormatException ex) {
                new ErrorMessage(ex, "A number was entered wrong").createAndViewGUI();
            } catch (NoSuchFieldException ex) {
                new ErrorMessage(ex).createAndViewGUI();
            }
        }
    });
    cancel.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            dispose();
        }
    });
    up.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            AllCourses.getInstance().move(currentCourse.getName(), true);
            order.setText(String.valueOf(currentCourse.getOrder()));
            InternalPanel.COURSES.refresh();
        }
    });
    down.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            AllCourses.getInstance().move(currentCourse.getName(), false);
            order.setText(String.valueOf(currentCourse.getOrder()));
            InternalPanel.COURSES.refresh();
        }
    });

    course.addItemListener(new ItemListener() {
        @Override
        public void itemStateChanged(ItemEvent e) {
            try {
                currentCourse = AllCourses.getInstance().get(course.getSelectedItem().toString());
            } catch (NoSuchFieldException ex) {
                currentCourse = AllCourses.getInstance().get(course.getSelectedIndex());
            }
            name.setText(currentCourse.getName());
            units.setText(String.valueOf(currentCourse.getUnits()));
            credits.setSelectedItem(currentCourse.getCredits());
            semester.setSelectedItem(currentCourse.getSemesters().length > 1 ? "Year" : String.valueOf(currentCourse.getSemesters()[0]));
            order.setText(String.valueOf(currentCourse.getOrder()));
        }
    });

    GridBagConstraints constraints = new GridBagConstraints();

    constraints.fill = GridBagConstraints.BOTH;
    constraints.insets = new Insets(5, 8, 5, 8);
    constraints.weightx = 1;
    constraints.weighty = 1;
    constraints.gridwidth = 4;
    layout.addLayoutComponent(course, constraints);
    constraints.gridy = 1;
    constraints.gridwidth = 1;
    layout.addLayoutComponent(nameLabel, constraints);
    constraints.gridx = 1;
    constraints.gridwidth = 3;
    layout.addLayoutComponent(name, constraints);
    constraints.gridy = 2;
    constraints.gridx = 0;
    constraints.gridwidth = 1;
    layout.addLayoutComponent(creditsLabel, constraints);
    constraints.gridx = 1;
    constraints.gridwidth = 3;
    layout.addLayoutComponent(credits, constraints);
    constraints.gridx = 0;
    constraints.gridy = 3;
    constraints.gridwidth = 1;
    layout.addLayoutComponent(unitsLabel, constraints);
    constraints.gridx = 1;
    constraints.gridwidth = 3;
    layout.addLayoutComponent(units, constraints);
    constraints.gridy = 4;
    constraints.gridx = 0;
    constraints.gridwidth = 1;
    layout.addLayoutComponent(semesterLabel, constraints);
    constraints.gridx = 1;
    constraints.gridwidth = 3;
    layout.addLayoutComponent(semester, constraints);
    constraints.gridy = 5;
    constraints.gridx = 0;
    layout.addLayoutComponent(orderLabel, constraints);
    constraints.gridx = 1;
    constraints.gridwidth = 1;
    layout.addLayoutComponent(up, constraints);
    constraints.gridx = 2;
    layout.addLayoutComponent(down, constraints);
    constraints.gridx = 3;
    layout.addLayoutComponent(order, constraints);
    constraints.gridy = 6;
    constraints.gridx = 0;
    layout.addLayoutComponent(save, constraints);
    constraints.gridx = 1;
    constraints.gridwidth = 2;
    layout.addLayoutComponent(done, constraints);
    constraints.gridx = 3;
    constraints.gridwidth = 1;
    layout.addLayoutComponent(cancel, constraints);

    add(course);
    add(nameLabel);
    add(name);
    add(creditsLabel);
    add(credits);
    add(unitsLabel);
    add(units);
    add(semesterLabel);
    add(semester);
    add(orderLabel);
    add(up);
    add(down);
    add(order);
    add(save);
    add(done);
    add(cancel);
}

@Override
public void createAndViewGUI() {
    if (currentCourse != null) {
        super.createAndViewGUI();
    } else {
        new ErrorMessage(new NoSuchFieldException("No courses"), "No courses to edit").createAndViewGUI();
    }
} 
```

显然，如果没有上下文，这会很混乱。这是它扩展的**Dialog类。**

```
package org.swing;

import java.awt.Component;
import java.awt.event.WindowEvent;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.WindowConstants;
import org.carroll.dialogs.MainFrame;

/**
 * Basic interface for all user dialogs. Extends {@link JFrame}.
 *
 * @author Joel Gallant
 */
public abstract class Dialog extends JDialog {

Component c = null;

/**
 * Creates a basic dialog that disposes on closing.
 *
 */
public Dialog() {
    super(MainFrame.getInstance());
}

/**
 * Creates a basic dialog that disposes on closing.
 *
 * @param location relative position of the window
 */
public Dialog(Component location) {
    this();
    this.c = location;
}

/**
 * Creates a basic dialog that disposes on closing.
 *
 * @param title title of the dialog
 */
public Dialog(String title) {
    super(MainFrame.getInstance(), title);
    setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
}

/**
 * Creates a basic dialog that disposes on closing.
 *
 * @param title title of the dialog
 * @param location relative position of the window
 */
public Dialog(String title, Component location) {
    super(MainFrame.getInstance(), title);
    setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    this.c = location;
}

/**
 * Creates a basic dialog which follows the default close operation given in
 * the parameter.
 *
 * @param title title of the dialog
 * @param defaultCloseOperation default closing operation of the window
 */
public Dialog(String title, int defaultCloseOperation) {
    super(MainFrame.getInstance(), title);
    setDefaultCloseOperation(defaultCloseOperation);
}

/**
 * Creates a basic dialog which follows the default close operation given in
 * the parameter.
 *
 * @param title title of the dialog
 * @param defaultCloseOperation default closing operation of the window
 * @param location relative position of the window
 */
public Dialog(String title, int defaultCloseOperation, Component location) {
    this(title, defaultCloseOperation);
    this.c = location;
}

/**
 * Initializes everything needed to display the GUI.
 */
protected abstract void init();

@Override
public void dispose() {
    super.dispose();
    dispatchEvent(new WindowEvent(this, WindowEvent.WINDOW_CLOSED));
}

/**
 * Create all necessary components of the dialog and display it.
 */
public void createAndViewGUI() {
    init();

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            pack();
            setLocationRelativeTo(c);
            setVisible(true);
        }
    });
} 
```

这里要注意的重要一点是 init() 在**EDT**之外调用，并且该行为*仅在调用**setToolTipText()*方法时发生。在不同但结构相似的类中观察到相同的行为。

这是导致**EDT**出现问题的循环，还是与工具提示文本的工作方式有关？（我从未使用过 tooltiptext 并且对 swing / java 很陌生）

需要更多信息，请问。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:25:52.423

首先，永远不要更新 . 之外的任何 UI 组件`EDT`，这包括构造，您不知道组件何时会请求更新并导致重绘，或者它何时实际将自身附加到本机对等点。

曾经有一种观点认为，`EDT`只要将它们添加到其中的 UI 中，您就可以在 . 这在当时是一种误解，Swing 开发团队实际上表示这是一种不好的做法

您可能想阅读[不在事件调度线程上构建 Swing/AWT 小部件是否安全？](https://stackoverflow.com/questions/491323/is-it-safe-to-construct-swing-awt-widgets-not-on-the-event-dispatch-thread)更多细节

其次，永远不要在 中执行任何耗时的任务`EDT`，它们会阻止`EDT`处理绘制和事件请求，使 UI 看起来没有响应。

不知道循环运行了多长时间，这是不可能的。我能提出的最好建议是注释掉`actionPerformed`方法的实际主体并再次测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:44:17.147

这里的问题是您的标签`orderLabel`扩展了 2 个按钮，`up`并且`down`. 我添加了一个绿色边框来突出显示：

![应用快照](../Images/97a85ff61d049035060504b16092607b.png)

`MouseListener`按钮未被禁用，但由于工具提示现在有一个覆盖，因此阻止了鼠标单击。

解决方案是删除此标签的工具提示或修剪其大小，使其不与按钮重叠。

# c# - 用一种方法设置多个属性

> ID：12450238
> 
> 赞同：1
> 
> 时间：2012-09-16T19:59:36.957
> 
> 标签：c#

所以我有 ac# 类，上面有三个属性。

```
public class ClassA
{
    public bool IsBool1;
    public bool IsBool2;
    public bool IsBool3;
} 
```

我有一种方法可以执行以下操作。

```
public void MethodA()
{
    ClassA c = GetCurrentClassA();
    c.IsBool1 = !c.IsBool1;
    ClassADataAccess.Update(c);
    this.BindClassADetails(c);
} 
```

现在为了避免为其他两个属性编写 MethodA，有没有办法编写一个可以处理所有三个属性的方法？

可能是这样的？

```
public void UpdateAndBind(bool value)
{
    ClassA c = GetCurrentClassA();

    ///what to do here to set the property?

    ClassADataAccess.Update(c);
    this.BindClassADetails();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:52:17.600

回应您的评论：

> 这可以很好地工作，我只是好奇是否有办法告诉方法要设置传入对象的哪个属性。——克里斯·惠森亨特

有一种使用反射的方法：

```
 // using a generic method, you can specify the name of the property you want to set, 
    // the instance you want it set on, and the value to set it to...
    private T SetProperty<T>(T instance, string propertyName, object value)
    {
        Type t = typeof(T);
        PropertyInfo prop = t.GetProperty(propertyName);
        prop.SetValue(instance, value, null);
        return instance;
    } 
```

现在......您可能想要使用 try/catch，也可能在以各种方式使用它之前检查传递的内容，以确保它不会突然爆炸......但通常，最简单地说，这就是你的方式做吧。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-03T10:11:12.270

可以使用 Func 委托作为输入参数来完成。

首先，您需要使用属性，而不是字段：

```
public class ClassA
{
    public bool IsBool1 { get; set; }
    public bool IsBool2 { get; set; }
    public bool IsBool3 { get; set; }
} 
```

然后你需要两个 Func 委托作为输入参数：

```
public ClassB
{
     public void UpdateAndBind(Func<ClassA, bool> getProp, Func<ClassA, bool, ClassA> setProp)
    {
        ClassA c = GetCurrentClassA();

        // What to do here to set the property?
        setProp(c, getProp(c));

        ClassADataAccess.Update(c);
        this.BindClassADetails(c);
    }
    ...
} 
```

最后，用法如下所示：

```
static void Main(string[] args)
{
    ClassB classB = new ClassB();
    classB.UpdateAndBind(classA => classA.IsBool1, (classA, value) => { classA.IsBool1 = !value; return classA; });
    classB.UpdateAndBind(classA => classA.IsBool2, (classA, value) => { classA.IsBool2 = !value; return classA; });
    classB.UpdateAndBind(classA => classA.IsBool3, (classA, value) => { classA.IsBool3 = !value; return classA; });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T20:02:46.610

向`GetCurrentClassA`方法添加参数以便在那里指定所需的值怎么样？

```
public void MethodA()
{
    ClassA c = GetCurrentClassA(true, false, true);
    ClassADataAccess.Update(c);
    this.BindClassADetails(c);
} 
```

# c - 在 Linux 中使用什么函数来枚举目录的内容？

> ID：12450241
> 
> 赞同：0
> 
> 时间：2012-09-16T19:59:53.240
> 
> 标签：c, linux

在阅读了半个小时的手册之后，我想分享我的发现，因为在其他问题中看到很多人只是指向`readdir`，这不是线程安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:00:26.843

**tl;dr** *不要使用`readdir`or`readdir_r`*，它们不安全！使用`scandir`.

[`readdir`](http://pubs.opengroup.org/onlinepubs/009695399/functions/readdir.html)不是线程安全的（事实上，它是 POSIX 中唯一已知存在此缺陷的与目录相关的函数）。当然，您可以在简单的程序中使用它，但要小心！

`readdir_r`是线程安全的，但使用起来非常痛苦，特别是因为您必须分配自己的`dirent`缓冲区，而且它并不像您想象的那么简单（因为不能保证文件名适合提供的数组在所有情况下，在所有 *nixes 和所有文件系统的结构中）。[有一些变通方法](http://womble.decadent.org.uk/readdir_r-advisory.html)，但是当你使用它们时，*“不要看，不管发生什么”*。

到目前为止，我所知道的唯一完全安全且易于使用的功能是[`scandir`](http://linux.die.net/man/3/scandir)：它是线程安全的*，*它基本上为您做所有事情，为您留下一个干净的目录条目数组。虽然它可能不适合所有场合，但它肯定会节省很多你必须自己忍受的痛苦。

# git - 获取裸存储库的工作副本

> ID：12450245
> 
> 赞同：44
> 
> 时间：2012-09-16T20:00:00.990
> 
> 标签：git, working-directory, git-bare

我有一台服务器，上面有一个用于推送的裸存储库。但是，我的服务器需要拥有 master 分支的工作副本。

我如何获得工作副本，并且只能从裸存储库中获得？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-16T20:08:51.800

您可以简单地将存储库克隆到同一台机器上的另一个目录：

```
git clone /bare/repo/dir 
```

当前目录将成为您的 repo 的非裸克隆，您将`master`自动签出分支。然后根据需要使用常用命令`git pull`来更新它。

附带的好处是，这个操作非常有效——如果你指定一个本地目录`git clone`，git 将使用硬链接来共享两个 repos 的对象数据库的只读部分。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-07-21T06:50:02.030

裸存储库只是工作目录的 .git 目录，以及本地配置文件中的一个条目。我**将裸存储库转换为完整存储库的**方法是：

*   创建一个新的子目录`.git`并将所有文件从裸存储库中移到那里
*   编辑`.git/config`要更改`bare = true`为的文件`bare = false`
*   查看您想要的分支。这会将存储库中的所有文件提取到工作目录中。

`.git`您可以在 Windows上的目录上设置隐藏属性，但*不能*在目录内的文件上设置。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-09-22T22:39:25.980

我正在寻找“分离的工作树”方法（如此处所示[）](http://www.deanoj.co.uk/git/using-git-and-a-post-receive-hook-script-for-auto-deployment/)：

```
git init --bare

git config core.bare false
git config core.worktree /somewhere/else/

git checkout -f 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-03-24T16:03:08.463

这对我有用：

`git --git-dir=path-to-bare-repo.git --work-tree=path-to-target checkout master .`

此命令会将存储库中的所有文件提取到指定的目录`path-to-target`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-09T23:23:19.070

This is a riff off the other 2 answers but it fills the gap for my use case -- it works for updating the repo from the origin and checking out branches and any git operation because you end up with a normal complete git repo.

```
git clone /path/to/bare/repo /new/path/to/full/repo
cd /new/path/to/full/repo
git remote set-url origin git@github.com:swift/swift.git 
```

After executing these 3 lines of code you can then `git pull` and `git branch` and `git checkout some_branch` and so on because you now have a normal complete git repo connected to your remote repo.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-26T21:31:43.177

This is how it works:

```
$ git init --separate-git-dir /path/to/existing-bare-repository /path/to/workdir
$ cd /path/to/workdir
$ git checkout . 
```

Voilà!

For info: `git init` will report: `Reinitialized existing Git repository in /path/to/existing-bare-repository`. But be confident. `man git-init` says: *Running git init in an existing repository is safe. It will not overwrite things that are already there.*

The magic is that `git init` alone does not make your files appear in the working directory. You have to checkout the root directory.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-17T15:29:20.630

您可以为此使用“git show”。

[http://www.kernel.org/pub/software/scm/git/docs/git-show.html](http://www.kernel.org/pub/software/scm/git/docs/git-show.html)

基本上：

```
git --no-pager --git-dir /path/to/bar/repo.git show branch:path/to/file.txt 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-06-26T03:23:45.753

也考虑使用

[https://git-scm.com/docs/git-worktree](https://git-scm.com/docs/git-worktree)

它应该允许从裸仓库创建本地工作副本，而无需克隆它（如果仓库很大，这可以节省空间）

# ios - 应用程序将数字刻录到 iPad 屏幕上，我该如何防止这种情况？

> ID：12450255
> 
> 赞同：4
> 
> 时间：2012-09-16T20:01:12.977
> 
> 标签：ios, ipad, graphics, screen

**编辑：如果有人能够查看和评论，我的代码实际上是开源的。**

我能想到的事情可能是一个问题：使用自定义字体，使用亮绿色，更新标签太快？

回购是：[https ://github.com/andrewljohnson/StopWatch-of-Gaia](https://github.com/andrewljohnson/StopWatch-of-Gaia)

时间标签类：[https ://github.com/andrewljohnson/StopWatch-of-Gaia/blob/master/src/SWPTimeLabel.m](https://github.com/andrewljohnson/StopWatch-of-Gaia/blob/master/src/SWPTimeLabel.m)

运行定时器更新标签的类：[https ://github.com/andrewljohnson/StopWatch-of-Gaia/blob/master/src/SWPViewController.m](https://github.com/andrewljohnson/StopWatch-of-Gaia/blob/master/src/SWPViewController.m)

**==============**

据报道，我的 StopWatch 应用程序会暂时烧毁一些 iPad。有没有人建议我如何防止这种屏幕持久性？一些已知的解决方法可以偶尔使像素空白？

我一直收到关于它的电子邮件，你可以在这里看到很多评论：http: [//itunes.apple.com/us/app/stopwatch+-timer-for-gym-kitchen/id518178439 ?mt=8](http://itunes.apple.com/us/app/stopwatch+-timer-for-gym-kitchen/id518178439?mt=8)

苹果不能给我建议。我发送了一封电子邮件进行审核，并被告知提交技术支持请求 (DTS)。当我填写 DTS 时，他们告诉我这不是代码问题，当我进一步向 DTS 寻求帮助时，一位“高级经理”告诉我，这不是 Apple 知道的问题。如果我认为这是一个真正的问题，他进一步建议我向 Apple Radar 错误跟踪器提交错误。

几周前我提交了雷达错误，但尚未得到承认。根据评论者的注释更新了 Apple 员工的雷达链接 rdar://12173447

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:59:02.603

在非 CRT 显示器上，这并不是真正的“烧屏”，但在某些 LCD 显示面板类型上可能存在图像持久性/保留问题。

避免两者的一种方法是非常缓慢地移动图像，比屏幕保护程序慢得多。如果您以非常缓慢的速度少量移动钟面（例如几分钟以形成只有几十个像素的完整电路），用户甚至可能不会注意到这种情况发生。但随着时间的推移，这种运动会模糊所有细线和锐利边缘，因此即使存在持久性，缺乏锐利边缘也会使其更难看清。

补充：还有一份（未经证实的）报告称，以全帧速率闪烁像素可能会增加出现此问题的可能性。因此，如果重复很长时间，任何就地文本/数字更新都应该以更易于阅读的速度进行（比如 5 到 10 fps 而不是 30 到 60 fps）。如有必要，该应用程序始终可以将结束编号更新为更准确的计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:27:15.200

“烧屏”是由于 CRT 中的荧光粉磨损造成的。LCD 不会老化，因为它们不使用荧光粉。

更有可能是图像残留/[图像持久性](http://en.wikipedia.org/wiki/Image_persistence)。图像可以在屏幕上“卡住”长达 48 小时。通常它不应该持续那么长时间，所以它也可能是他们的硬件缺陷。MacRumors 有一个关于[iPad 图像保留](http://forums.macrumors.com/showthread.php?t=1220231)的帖子，它讨论了这个问题。至于解决方案，您对实际屏幕无能为力，因为它只是 LCD 的工作方式。如果您仍然担心，我会尝试使用更微妙的颜色。除非某些东西正在积极改变像素（想想屏幕保护程序），否则您将无法完全消除问题。

# c# - 我如何处理翻译的 .Resx 文件以进行本地化？

> ID：12450256
> 
> 赞同：0
> 
> 时间：2012-09-16T20:01:25.927
> 
> 标签：c#, .net, vb.net, visual-studio-2010, localization

我正在为我的应用程序添加多语言功能，并将所有文本字符串添加到主英语资源文件中，然后将它们翻译成不同的语言。我现在有大约 8 个文件夹，名称为“de-DE”格式，里面是相应语言的资源文件。既然这些都被翻译了……我到底该怎么处理它们？如何将它们添加到我的项目中，以便我可以有不同的项目变体，或者让用户能够切换语言？非常感谢，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:10:31.780

只需为每种语言“xx”创建一个“Resources.xx.resx”文件并将它们添加到您的项目中。它们将被编译成`YourAppName.resources.dll`每种语言目录中的文件。.NET 资源系统将根据当前的 UI 文化 ( `Thread.CurrentUICulture`) 自动选择它们。

# c# - 是否有像 Shazzam 和 Soundhood 这样的歌曲检测库？

> ID：12450257
> 
> 赞同：0
> 
> 时间：2012-09-16T20:01:31.883
> 
> 标签：c#, java, c++, c

有人知道像 Shazzam 和 Soundhood 提供的服务那样的歌曲识别库（语言无关）吗？

最好的问候，克里斯蒂安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:23:20.947

是的。[http://echonest.com](http://echonest.com)为此提供了一个在线 API。IIRC 他们正在与[http://musicbrainz.org](http://musicbrainz.org)（一个巨大的开放音乐数据库）合作，以收集 musicbrainz 目录上的声学指纹。两者都在 github 上提供了与此活动相关的全面的开源工具选择。您可以下载自己的指纹服务器（并且再次 IIRC）[获取所有指纹](http://echoprint.me/data_download)。

[https://github.com/metabranz/](https://github.com/metabrainz/)

[https://github.com/echonest/](https://github.com/echonest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:08:32.500

这是一个庞大而复杂的项目，需要您在不同领域拥有大量知识。有关更多信息，请参阅[此维基百科文章](http://en.wikipedia.org/wiki/Acoustic_fingerprint)。

# c++ - {} 构造语法的通用性如何？

> ID：12450258
> 
> 赞同：6
> 
> 时间：2012-09-16T20:01:37.877
> 
> 标签：c++, constructor, c++11, language-lawyer, curly-braces

在一次[关于初始化列表](http://youtu.be/-OioZ78jnlM)的讨论中，我理解 Stroustrup 基本上是说带有花括号的新构造语法*应该*是对所有以前的构造语法的一般替代：

```
X x1(); // most vexing parse ... doesn't work as intended
X x2(x1);
X x3 = x1;
X x4 = X(); 
```

相反，新语法应该被统一使用，作为一种可能的替代品，你可以在*任何*情况下使用……再说一次，这是我从他的演讲中得到的核心信息。也许我误解了他。

所以，问题是，这种语法有多通用？**是否有可能永远不要在新的 C++11 代码中使用旧式构造，或者是否存在*必须*恢复的情况？**

* * *

当我遇到以下错误时触发/激发了这个问题，我认为这是编译器中的错误（但我很乐意得到纠正）。

```
struct X {};

int main() {
  X x;
  X& y{x}; // works with (x)
  X& z{y}; // works with (y)
} 
```

它不能在 g++ 4.7.1 上编译，也不能在[ideone 的 4.5.1](http://ideone.com/5da9s)上编译。

```
prog.cpp: In function 'int main()':
prog.cpp:5:9: error: invalid initialization of non-const reference of type 'X&' from an rvalue of type '<brace-enclosed initializer list>'
prog.cpp:6:9: error: invalid initialization of non-const reference of type 'X&' from an rvalue of type '<brace-enclosed initializer list>' 
```

请注意，当我替换`X`为`int`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T20:03:37.320

大括号初始化适用于使用初始化程序的任何地方。在某些情况下，您必须使用括号才能访问大括号初始值设定项无法访问的构造函数，但这种情况很少见。

```
std::vector<int> v(1,1);
std::vector<int> v{1,1}; 
```

`vector<int>`碰巧有一个专门的构造函数，它需要两个`int`s，因此在尝试构造一个两个`int`s 长的向量时会模棱两可。模棱两可的构造函数的存在只是为了向后兼容。不应使用与 initializer_list 冲突的任何构造函数来定义新类。

大括号初始化语法更喜欢 initializer_list 构造函数而不是其他匹配的构造函数，从而解决了歧义。如果您想解决歧义以支持使用 non-initializer_list 构造函数，那么您不能使用大括号初始化。

* * *

Bjarne Stroustrup 写道

> {} 初始化的统一使用仅在 C++11 中成为可能，因此较旧的 C++ 代码使用 () 和 = 初始化。因此，您可能更熟悉 () 和 =。但是，我不知道有任何逻辑理由更喜欢 () 表示法，除非在极少数情况下需要区分使用元素列表和构造函数参数列表进行初始化。
> 
>                                                          — *C++ 编程语言，第四版*§17.3.2.1

* * *

您的示例代码完全合法，应该可以按预期工作。您得到的错误只是 GCC 中的一个错误。Clang 和 VC++ 2012 都接受该代码。

# matlab - 如何在 MATLAB 中绘制箭头

> ID：12450259
> 
> 赞同：1
> 
> 时间：2012-09-16T20:01:43.483
> 
> 标签：matlab, plot

我正在尝试使用箭头函数在[MATLAB](http://en.wikipedia.org/wiki/MATLAB)中绘制奇异向量，但 MATLAB 不断给我错误：

> 'double' 类型的输入参数的未定义函数 'arrow'

我该如何解决？

这是MATLAB代码：

```
function Plot_Singular_Vecor()
A=[1 1;2 3];

[U,S,V] = svd(A); % Find singular value decomposition.

figure;
theta = -pi:pi/50:pi;
circle = [cos(theta); sin(theta)]; 
plot(circle(1,:), circle(2,:), 'r'), grid
title('Right Singular Vectors, u1 and u2')
hold on;
arrow([0,0], [V(1,1), V(2,1)]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:08:25.663

您需要[`arrow`](http://www.mathworks.com/matlabcentral/fileexchange/278)从 MATLAB 文件交换安装该函数，或者如果您有该函数，请确保它在您的 PATH 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T15:16:04.153

或者，您可以使用内置函数 quiver

```
quiver(0,0,V(1,1),V(2,1)) 
```

或注释功能

```
annotation('arrow',[0,0],[V(1,1),V(2,1)]) 
```

# c++ - 我可以使用 Boost::Asio 而不担心网络编程问题吗？

> ID：12450268
> 
> 赞同：2
> 
> 时间：2012-09-16T20:02:26.770
> 
> 标签：c++, boost, boost-asio

我必须在我当前的项目中制作服务器，但我在这方面没有任何或很少的经验。我的问题是，我可以在我的项目中使用 Asio，它可以简单地处理普通服务器必须面对的任何问题（部分读取、多线程问题，......）？

（我的服务器必须同时处理数百个客户端）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:07:47.620

ASIO 负责低级套接字编程和轮询代码。您仍然必须提供处理原始网络数据的所有功能。最终，每次调用读取回调时，您都会从网络中获得不可预知的字节数，并且由您来获取这些字节并从中重建您的应用程序消息。

但实际上，就接收未指定数量的字节而言，您不必担心它是如何实现的。

多线程是“容易的”，因为您可以同时运行 ASIO 处理器多次，但*您*有责任提供一个可以处理一次运行多次的读取回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:08:16.447

Asio 故意不是多线程的。它通过操作系统的、、或其他机制进行*多路复用*来处理并发。`select()``kqueue``epoll`

至于部分接收，没有自动的方法让 TCP 尊重消息边界。Asio 对此无能为力，因此您需要在应用程序级别使用一些技术来指示完成。HTTP 传统上通过在完成时关闭套接字来处理这个问题，尽管也可以预先发送消息的*大小*。

# jquery - jquery验证电话号码

> ID：12450270
> 
> 赞同：1
> 
> 时间：2012-09-16T20:02:34.977
> 
> 标签：jquery, validation, phone-number

以下是我当前的代码。我需要确保它始终具有十位数的完整电话号码。有人有正确的正则表达式代码吗？“美国数字”

```
"phone": {
    // credit: jquery.h5validate.js / orefalo
    "regex": /^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,
    "alertText": "* Invalid phone number"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:11:15.440

```
 <script>
  $(document).ready(function(){
    jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ""); 
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");

$("#myform").validate({
  rules: {
    field: {
      required: true,
      phoneUS: true
    }
  }
});
  });
  </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:14:48.840

请参阅：[用于电话号码验证的全面正则表达式以](https://stackoverflow.com/q/123559/900747)获得更全面的答案。但是，我认为这是您想要的正则表达式：

```
^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$ 
```

# node.js - 查看我自己的 Instagram 照片？

> ID：12450282
> 
> 赞同：1
> 
> 时间：2012-09-16T20:04:26.000
> 
> 标签：node.js, oauth, instagram

我想为我的服务器设置一种方法来获取我所有的 instagram 照片并将它们放在网站上。我正在尝试使用这个库[https://github.com/mckelvey/instagram-node-lib](https://github.com/mckelvey/instagram-node-lib)。

它说我需要以用户（我自己）身份进行身份验证才能获取照片提要。我可以从服务器以自动方式执行此操作吗？我不希望我网站的访问者必须登录...

我只是不知道如何在我的网站上为匿名用户获取我自己的提要。我不想处理重定向和 url，我只想获得自己的 feed 服务器端。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T17:34:33.073

如何设置 instagram-node-lib（用于个人网站）

[http://instagram.com/developer/](http://instagram.com/developer/) - 填写信息，两个 URL 都可以是 yourdomain.com

您应该获得一个客户 ID / 客户密码！

您还需要您的用户 ID（不是您的用户名）和一个 access_token（基本上，您必须证明您是一个特定的人，以防您尝试为其获取照片的用户是可见的）。

现在，因为我猜当人们开始谈论 OAuth 的东西（我也是）时，你会变得很模糊，这是获取 access_token 的一种蹩脚的方式：

[http://instafeedjs.com](http://instafeedjs.com)

只需在页面中搜索“单击此处”链接，您将通过 OAuth 流程了解这一点 JS，页面将返回您的 access_token。

现在，用一小段代码来证明我们所做的工作：

```
Instagram = require('instagram-node-lib');

Instagram.set('client_id', '*******');
Instagram.set('client_secret', '*******');
Instagram.set('access_token', '*******');

console.log(Instagram.users.recent({ user_id: ******* })); // Notice the distinct lack of quotes around the user_Id 
```

击掌！

# networking - 在 1 Gb 链路上传输一位需要多长时间？

> ID：12450287
> 
> 赞同：1
> 
> 时间：2012-09-16T20:04:36.827
> 
> 标签：networking, network-protocols

我想回答 1 秒，因为 1 Gbps 链路所做的只是传输高达每秒 10 亿位，这不一定会增加传​​输所需的时间。我很确定我错了，有人可以纠正我吗？

此外，在传播速度为每秒 2.3x10^8 米的情况下，传输该位需要多长时间（以米为单位）。

我对最后一个问题有点困惑，所以如果有人可以帮助澄清，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:06:16.623

在这种情况下，您可以将“传输”翻译为“放到电线上”；“传输速度”是指*[带宽](http://en.wikipedia.org/wiki/Bandwidth_%28computing%29)*。因此，每秒可以传输 10 亿比特的链接只需要 X 时间来传输一个比特。

这完全与链路的传播延迟无关，称为*[延迟](http://en.wikipedia.org/wiki/Latency_%28engineering%29#Packet-switched_networks)*；显然，另一端距离为 1m 的 Gbps 点对点链路与另一端距离为 100km 的类似链路一样快，尽管在后一种情况下传输的第一个比特需要更长的时间才能到达另一端。尽管带宽明显不同，但 Gbps 链路也可能具有与 56kbps 调制解调器连接相同的延迟。

最后一个问题不是很清楚；它给出了速度并要求距离，除非我们也知道时间，否则显然无法计算。也许这是由没有很好地转化为您的问题的上下文信息所暗示的？

# java - 使用 EXTJWNL 编辑 Wordnet 词典

> ID：12450288
> 
> 赞同：1
> 
> 时间：2012-09-16T20:04:39.213
> 
> 标签：java, nlp, wordnet

[我想使用extjwnl 库](http://extjwnl.sourceforge.net/)向 Wordnet 添加一个新的同义词集。为此，我编写了以下示例代码。保存后，我观察到确实添加了新的同义词和单词，但创建的语义指针（标识下义关系）没有保存。如何将指针与字典相关联？

```
 JWNL.initialize(new FileInputStream(propsFile));
        Dictionary dictionary = Dictionary.getInstance();
        Iterator<Synset> synsets = dictionary.getSynsetIterator(POS.NOUN);

        dictionary.edit();
        Synset newSynset = new Synset(dictionary, POS.NOUN);
        IndexWord newWord = new IndexWord(dictionary, "hublabooboo", POS.NOUN, newSynset);
        Synset topmostSynset = synsets.next();
        Pointer newPointer = new Pointer(PointerType.HYPONYM, topmostSynset, newSynset);
        dictionary.save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:55:16.023

我建议您将指针添加到同义词集的指针列表：

```
 topmostSynset.getPointers().add(newPointer); 
```

如果指针是对称的（如上位词，它有一个镜像：下位词），并且 dictionary.getManageSymmetricPointers() 则自动添加反向指针（例如下位词）。

顺便说一句，通过这段代码 Synset topmostSynset = synsets.next(); 看起来您推断从同义词集迭代器返回的第一个同义词集是“实体”。但这在任何地方都不能保证。这是依赖于字典的：可能适用于基于文件的，但很可能不适用于基于地图和不可预测的基于数据库的。

来源：[SourceForge](http://sourceforge.net/projects/extjwnl/forums/forum/1333399/topic/5774875)

# iphone - NSURLConnection 缓存持久性

> ID：12450291
> 
> 赞同：0
> 
> 时间：2012-09-16T20:04:55.777
> 
> 标签：iphone, objective-c, ios, caching

在 iOS 5 中，如果我的应用程序被终止，我的 NSURLConnection 缓存就会消失。即使在我的应用程序终止并重新启动后，我如何保留 NSURLConnection 缓存？只要我的应用程序还活着，缓存就可以很好地工作。

我`NSURLRequestUseProtocolCachePolicy`在我的 NSURLRequest 中使用。

我的服务器返回的示例标头：

```
Cache-Control:public, max-age=3600
Content-Encoding:deflate
Content-Length:1606
Content-Type:application/json; charset=utf-8
Date:Sun, 16 Sep 2012 20:22:14 GMT
Expires:Sun, 16 Sep 2012 21:22:15 GMT
Last-Modified:Sun, 16 Sep 2012 20:22:15 GMT
Vary:* 
```

如果我的应用程序在 5 分钟后终止并重新启动，则会尝试全新下载（通过 Charles http 侦听器验证）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:34:05.393

这似乎是我没有设置磁盘缓存大小的结果。即使应用程序终止，现在将其设置为 500MB 似乎也会保留我的缓存。

# c# - c# ProcessStartInfo

> ID：12450294
> 
> 赞同：3
> 
> 时间：2012-09-16T20:05:12.497
> 
> 标签：c#, process

为什么是这样

```
ProcessStartInfo myProcess = new ProcessStartInfo(path);
myProcess.UserName = username;
myProcess.Password = MakeSecureString(password);
myProcess.UseShellExecute = false;
Process.Start(myProcess); 
```

工作，但是

```
ProcessStartInfo myProcess = new ProcessStartInfo();
myProcess.FileName = Path.GetFileName(path);
myProcess.WorkingDirectory = Path.GetDirectoryName(path);
myProcess.UserName = username;
myProcess.Password = MakeSecureString(password);
myProcess.UseShellExecute = false;
Process.Start(myProcess); 
```

不是。

由于这个问题，我想使用第二个：[https ://stackoverflow.com/a/2621943/1306186](https://stackoverflow.com/a/2621943/1306186)

我不断收到文件未找到异常...有什么想法吗？

**编辑：**
路径例如`@"C:\Users\User\Desktop\ConsoleApplication2.exe"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T20:16:48.660

这一点是错误的

```
myProcess.FileName = Path.GetFileName(path); 
```

这应该是

```
myProcess.FileName = path; 
```

传入`C:\SomeDir\SomeApp.exe`并且您拥有的代码会将文件名设置为`SomeApp.exe`，它无法找到。算自己幸运，在某些情况下它可能会出现（例如，您的应用程序和您要运行的应用程序在同一个文件夹中），然后在部署时您可能会感到很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:16:34.257

我会尝试使用`Path.GetFullPath()`而不是简单地使用，因为当您将它与字符串参数一起使用时，`Path.GetFileName()`构造函数会使用完整路径初始化。`FileName`

# jakarta-ee - 如何从 EJB 中访问部署参数

> ID：12450297
> 
> 赞同：2
> 
> 时间：2012-09-16T20:05:39.377
> 
> 标签：jakarta-ee, deployment, ejb

在 Java EE 6 Web 应用程序中，我想从`EJB`.

我知道我可以在描述符中定义一个上下文参数，当我在一个bean中时，我`web.xml`可以通过[javax.faces.context.ExternalContext#getInitParameterMap()](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getInitParameterMap%28%29)访问它，并通过a中的[getServletContext()](http://docs.oracle.com/javaee/5/api/javax/servlet/GenericServlet.html#getServletContext%28%29)访问它，但事实并非如此，因为我在.`JSF``Servlet``EJB`

所以，问题是：是否有任何标准（可能是干净的）方法来实现这个目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:50:01.417

经过进一步研究，我发现了`env-entry`注释的用法`web.xml`。：

```
<env-entry>
    <env-entry-name>myEnvEntry</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
    <env-entry-value>MyEnvEntryValue</env-entry-value>
</env-entry> 
```

`env-entry`可以通过各种方式从`EJB`. 最简单的是使用`@Resource`注解（需要[CDI](http://docs.oracle.com/javaee/6/tutorial/doc/gjbnr.html)）：

```
@Resource(name="myEnvEntry")
private String myEnvEntry; 
```

链接：[使用 ENC 为您的 EJB 3 配置环境条目](http://www.jroller.com/agoncal/entry/configure_your_ejb_3_with)

# c# - ICollectionView 键盘索引在 Refresh 时重置

> ID：12450298
> 
> 赞同：2
> 
> 时间：2012-09-16T20:06:04.527
> 
> 标签：c#, keyboard, refresh, selection, icollectionview

我正在使用 ICollectionView 来显示 ListView 中的项目列表。我遇到了一个我似乎无法找到解决方案的问题。

只要只使用鼠标，选择就可以正常工作。为了始终显示最新信息，我不时使用 ICollectionView.Refresh() 方法。但是，当使用键盘箭头浏览项目列表时，这会导致问题。

无论当前 SelectedIndex 位于哪个位置，只要我在下一次按下箭头键时调用 Refresh()，所选项目就是 ListView 位置 0 的项目。

有没有人遇到过这个问题并找到了解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:46:32.860

您可以在集合中使用的类中实现 INotifyPropertyChanged 接口，而不是调用 ICollectionView.Refresh()。每当显示的任何属性发生更改时，调用 PropertyChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:31:55.220

当您想刷新列表视图时执行此操作：

```
//store the selected items
ListView.SelectedListViewItemCollection collection;
collection = listView1.SelectedItems;

// refresh the list view
listView1.Refresh();

//now select them again
foreach (ListViewItem item in collection)
    item.Selected = true; 
```

# mysql - column=null 的 Sql 查询返回零结果集

> ID：12450301
> 
> 赞同：0
> 
> 时间：2012-09-16T20:06:21.467
> 
> 标签：mysql, sql

> **可能重复：**
> [为什么 column = NULL 不返回任何行？](https://stackoverflow.com/questions/3878954/why-does-column-null-return-no-rows)

我正在尝试从 mysql 数据库中查询某个列的值为空的行，这是我的查询：

```
SELECT * FROM `mytable` WHERE mycolumn=null 
```

实际上，我使用布尔列作为三向开关，其中 0,1 和 null 意味着用于不同的结果。

上面的查询返回一个零结果集，如果我删除`where mycolumn=null`东西，它返回正确的结果，其中一些行对于指定的列具有空值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:07:44.907

Column = null 将始终给出 null

尝试列为空

```
SELECT * FROM `mytable` WHERE mycolumn is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:09:24.057

你必须使用

```
SELECT * FROM `mytable` WHERE mycolumn is null 
```

参考：[http ://dev.mysql.com/doc/refman/5.1/en/working-with-null.html](http://dev.mysql.com/doc/refman/5.1/en/working-with-null.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:11:38.803

在 SQL 中， 的概念`null`类似于*unknown*。未知的东西实际上不可能等于任何东西，甚至是另一个未知的东西。

出于这个原因，`X = null`甚至`null = null`永远不会为真，因为表达式本身的计算结果为另一个 null （意思是，*不知道 x 是否等于 null*。）

相反，您可以使用`IS NULL`来确定一个值是否*设置为*null：

```
SELECT * FROM `mytable` WHERE mycolumn is null 
```

...或者您可以将空值合并为其他值[。](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

# php - 将多维数组数据按数字顺序排序

> ID：12450304
> 
> 赞同：0
> 
> 时间：2012-09-16T20:06:50.827
> 
> 标签：php, sorting, multidimensional-array

我有一个如下所示的代码片段：

```
foreach ($final_array as $index => $data) {
    echo $data[1];
} 
```

我想要做的是将 $data[1] 排序为数字顺序。我尝试过 asort() 和 natsort() 之类的方法，但没有任何效果。任何帮助将不胜感激。

这是我的数组的外观：

```
Array
(
    [1] => Array
    (
        [0] => Awesomedude123
        [1] => 399,408
        [2] => September 16, 2012
    )

    [2] => Array
    (
        [0] => Username11
        [1] => 1,914,144
        [2] => September 16, 2012
    )

    [3] => Array
    (
        [0] => EpicSurfer
        [1] => 1,031,427
        [2] => September 16, 2012
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:15:58.993

您始终可以使用[usort](http://www.php.net/manual/en/function.usort.php)进行棘手的数组排序：

```
function number_compare($a, $b)
{
    $t1 = str_replace( ',', '', $a[1] );
    $t2 = str_replace( ',', '', $b[1] );
    return $t1 - $t2;
}    
usort($array, 'number_compare'); 
```

# razor - razor/WebMatrix 变量范围

> ID：12450314
> 
> 赞同：0
> 
> 时间：2012-09-16T20:08:12.360
> 
> 标签：razor, webmatrix-2

我的网页上有这个

```
@{
    if(!IsPost){
        var db = Database.Open("MyDatabase");
        var catList= db.Query("select * from category");    
    }
    else{
        var db = Database.Open("MyDatabase");
        var query = "insert into product (productkey,productname,categorykey) values(@0,@1,@2)";
        ....more code....
    }
} 
```

在我的 html 中，我有以下内容

```
<select id="categorySelect" name="Name">
@foreach(var cat in catList){
    <option value=cat.CategoryKey>@cat.CategoryName</option> 
}
</select> 
```

问题是，当我第一次导航到这个页面时，我得到这个 CS0103 异常，说`catList`上下文中不存在名称

我正在从另一个页面中的链接加载此页面。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:24:05.960

您在 if(){...} 语句中定义 catList ，因此会出现此错误，请在**if**之前对其进行预定义。

```
dynamic catList=null;
if(!IsPost){
var db = Database.Open("MyDatabase");
catList= db.Query("select * from category");
... 
```

# google-app-engine - 为什么 javascript node.js 不在谷歌应用引擎上

> ID：12450321
> 
> 赞同：72
> 
> 时间：2012-09-16T20:08:34.760
> 
> 标签：google-app-engine, node.js

Google 创建了 V8 JavaScript 引擎：V8 在 JavaScript 源代码首次执行时直接将其编译为机器码。

Node.js 是基于 V8 构建的——为什么 Google 不提供像 Microsoft Azure 这样的任何 Node.js 服务器？

Google App Engine 将是放置 Node.js 的自然场所。

你知道为什么谷歌不这样做吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-16T20:10:24.830

Node.js 由 Joyent 维护，后者在某种程度上是 Google 的竞争对手。

Node.js 与 Google 没有任何联系，但实际上是建立在由 Google 启动的开源项目之上。

谷歌可能会像 Azure 一样跳入这个行业，但是已经有很多 PaaS 这样做了，这可能不值得。我从未使用过 GAE，但我的理解是它与其他 PaaS 完全不同，您必须使用 GAE 库才能使您的代码运行。

这是我个人的感受，这并不是 Node.js 社区真正想要的。Node.js 用于快速制作一个快速的轻量级应用程序，例如电话应用程序的 API 的很大份额。

不过，如果您正在寻找适用于 Node.js 的 PaaS，那么这里有很多：

*   [Joyent](http://nodejitsu.com)（节点柔术）
*   [dotCloud](http://dotcloud.com)支持 WebSockets。
*   视窗天青
*   [Nodester](http://nodester.com)（最近被 App Fog 收购）
*   任何[Cloud Foundry](http://cloudfoundry.com)主机也应该支持 Node.js。
*   还有很多...

这些只是我脑海中浮现的一些名字。有不少，但这些是主要的。哦，[Heroku](https://devcenter.heroku.com/articles/nodejs)也有，但是他们不支持 WebSocket，这对于任何基于 Socket.IO 的应用程序来说都是一个遗憾。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-06-26T09:48:51.203

截至 2014 年 6 月，Google 在[Google App Engine（不同于 Google Compute Engine）](https://stackoverflow.com/questions/22697049/what-is-the-difference-between-google-app-engine-and-google-compute-engine)上对自定义语言进行了有限预览。

观看[使用 App Engine 和自定义运行时构建 Node.js 应用程序](https://www.youtube.com/watch?v=Q8jZHc0NS6A)并查看[https://cloud.google.com/appengine/docs/managed-vms/](https://cloud.google.com/appengine/docs/managed-vms/)：

> App Engine 现在提供第二个托管选项：托管虚拟机。托管 VM 托管环境可让您在可配置的 Compute Engine 虚拟机 (VM) 上运行 App Engine 应用程序。您还可以使用托管 VM 来部署用户可配置的[自定义运行时](https://cloud.google.com/appengine/docs/managed-vms/custom-runtimes)，例如用于[Node.js](https://cloud.google.com/solutions/nodejs/)和其他运行时。

进入测试版的程序是：

# 注册并创建托管 VM 项目

托管 VM 处于受限预览版中，您必须注册才能访问此功能，创建启用计费的项目，并告诉我们您的项目，以便我们将其列入白名单以在托管 VM 中运行。跟着这些步骤：

1.  注册以访问托管 VM。
2.  加入 app-engine-managed-vms Google 群组，参与有关托管 VM 的讨论。
3.  项目（或应用程序——它们是同一回事）必须位于美国数据中心。如果您打算使用现有项目，请跳到下一步。否则，在美国数据中心创建一个新应用程序。导航到[https://preview.appengine.google.com](https://preview.appengine.google.com)并创建一个新应用。
4.  为项目启用计费。访问页面[https://cloud.google.com/console/project/apps~](https://cloud.google.com/console/project/apps~)，您的项目的 ID 在哪里。单击左侧菜单中的设置，然后启用计费。如果您的应用使用 Premier 帐户计费，请发送电子邮件至 app-engine-managed-vm-tt-id@google.com 向我们发送电子邮件，让您的新 Cloud 项目使用同一帐户计费。
5.  向 app-engine-managed-vm-tt-id@google.com 发送电子邮件，主题行中包含应用程序 ID。

当我们收到您的电子邮件后，我们将在后台配置一些资源，并在您的项目准备就绪时通过电子邮件通知您。该电子邮件包含设置的最终说明。如果您在按照这些说明操作时遇到错误，请通过 app-engine-managed-vm-tt-id@google.com 与我们联系。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-09-15T20:54:55.707

您可以轻松地在 Google Compute Engine（基本上是一台虚拟计算机）上安装节点。这是一个链接： [https ://developers.google.com/datastore/docs/getstarted/start_nodejs/](https://developers.google.com/datastore/docs/getstarted/start_nodejs/)

问候拉尔斯

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-06-25T21:58:25.833

经过多年的谷歌应用引擎经验，我现在切换到其他云服务。

我认为 google appengine 实际上是云计算行业的一种老式服务。这对新技术来说很慢，难以部署，浪费时间来学习 api 并且缺少您使用的语言所需的许多功能。

不管 google 的大型社区如何，我都不建议任何人使用 google appengine。

[较新的 Paas]

我强烈建议您使用 openshift、appfog、heroku 等新的 paas 云计算技术，这些技术可扩展性更高、更改需求更少、更易于从一个平台迁移到另一个平台、更自由地以自然语言及其标准之美进行编码没有丑陋的平台特定 api 的库。

[IAAS]

如果您想更好地控制运行的操作系统环境，您可以尝试 linode、digital ocean、amazon、google cloud engine、microsoft azure 等 iaas 提供商。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-09-16T22:49:41.770

[因为 App Engine 是一种平台即服务，并且为了向 GAE 添加新的语言/堆栈，Google 需要创建与App Engine 的大量服务](https://developers.google.com/appengine/docs/java/apis)接口的中级库。

此外，[所有 App Engine 应用程序都是沙盒](https://developers.google.com/appengine/docs/whatisgoogleappengine#The_Application_Environment)化的，并且在其沙盒环境中限制了多项功能。这意味着除了需要创建服务库之外，Google 还需要为他们尝试引入 GAE 的任何语言/堆栈创建一个安全的沙箱环境。

我个人认为第二个原因是为什么谷歌没有像 Azure 那样积极地引入对新语言/堆栈的支持。在某种程度上，App Engine 比 Azure 更“受管理”，并且新语言/堆栈的初始开发成本更高。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-25T11:32:16.427

Node.js 最近启用了对 Google Cloud 用户的支持。主要文档页面是：

*   [谷歌云平台上的 Node.js](https://cloud.google.com/nodejs/)
*   [谷歌云数据存储 — Google Developers](https://developers.google.com/datastore/docs/getstarted/start_nodejs/)

目前似乎需要一个*Compute Engine*实例。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-27T11:14:49.653

它已于 2016 年 3 月发布。

[https://cloudplatform.googleblog.com/2016/03/Node.js-on-Google-App-Engine-goes-beta.html](https://cloudplatform.googleblog.com/2016/03/Node.js-on-Google-App-Engine-goes-beta.html)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-14T22:16:00.543

**背景：App Engine Standard 与 App Engine Flexible**

由于 App Engine 有两个版本：标准版和灵活版，因此似乎对此主题有些混淆。App Engine Flexible 支持 NodeJS，但App Engine Standard***不支持。***（有关差异的更完整解释，请参见[此处）。](https://cloud.google.com/appengine/docs/the-appengine-environments)

App Engine 标准版可在几秒钟内完成扩展（相对于柔性环境的几分钟），并且具有免费套餐，因此您无需花费一分钱即可进行开发和演示。*这些好处是以灵活性*为代价的。App Engine Standard 仅支持某些语言和库，不允许写入磁盘或 SSH。换句话说，环境是*标准化*的。

**答案：App Engine 标准上的 NodeJS 支持**

如果您对 App Engine ***Standard***上的 NodeJS 支持感兴趣，请在此问题上加注星标：[https](https://issuetracker.google.com/issues/67711509) ://issuetracker.google.com/issues/67711509 。

Google 解决了引起社区关注的功能（请参阅[此处](https://cloud.google.com/support/docs/issue-trackers#feature_requests)）。关注此功能的最佳方式是在上面链接的 Google 问题跟踪器上为它加注星标。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-13T06:50:24.757

Google 于 2016 年 3 月 21 日宣布，Google App Engine 上的 Node.js 正在进行测试：[https ://cloudplatform.googleblog.com/2016/03/Node.js-on-Google-App-Engine-goes-beta.html ?m=1](https://cloudplatform.googleblog.com/2016/03/Node.js-on-Google-App-Engine-goes-beta.html?m=1)

这是意料之中的，因为谷歌也加入了 Node.js 基金会，谷歌开发了支持 Chrome 和 Node.js 的 V8 JavaScript 引擎：[https ://nodejs.org/en/blog/announcements/welcome-google/](https://nodejs.org/en/blog/announcements/welcome-google/)

谷歌同时宣布与 NodeSource 建立合作伙伴关系。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-06-13T05:55:56.830

Google 刚刚宣布在 App Engine 上支持 Node.js。

![在此处输入图像描述](../Images/6c84f4f699755e3d03ac90d04abc5365.png) 请参阅：[https ://cloud.google.com/nodejs/](https://cloud.google.com/nodejs/)

这是一个[如何在 App Engine 上部署 Node.js 应用程序](https://tutswiki.com/nodejs-google-app-engine/)的示例。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-12-14T17:27:55.693

谷歌是一家软件保守的公司。对于 Google 的经理来说，用 JavaScript 编写后端是绝对无法想象的。创建谷歌自己不会使用的基础设施并不是一项好的投资。参考：[来自神秘机器巴士的笔记](https://plus.google.com/110981030061712822816/posts/KaSKeg4vQtz)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-24T06:20:11.920

**（2021 年 6 月）**这个问题已经有将近十年的历史了，自从 OP 以来，很多事情都发生了变化。**TL;DR**：JavaScript 和/或 Node.js 在来自 Google 的 6 个不同的无服务器计算平台中受支持：[4 个在 GCP 上](https://cloud.google.com/serverless)，一个来自[Google Workspace](https://workspace.google.com)和[Firebase](https://firebase.google.com) ，加上发布日期：

1.  **Google App Engine - 标准**（2018 年 6 月） -[公告](https://cloud.google.com/blog/products/gcp/now-you-can-deploy-your-node-js-app-to-app-engine-standard-environment)、[文档](https://cloud.google.com/appengine/docs/standard/nodejs)（Node.js 10、12、14；8 已弃用）
2.  **Google App Engine - 灵活**（2016 年 3 月） -[公告](https://cloud.google.com/blog/products/gcp/nodejs-on-google-app-engine-goes-beta)（[一般版本](https://cloud.google.com/blog/products/gcp/your-favorite-languages-now-on-google-app-engine)），[文档](https://cloud.google.com/appengine/docs/flexible/nodejs)（大多数 Node.js 版本）
3.  **Google Cloud Functions** (Mar 2017) - [announcement](https://cloud.google.com/blog/products/gcp/google-cloud-platform-your-next-home-in-the-cloud) ([general release](https://cloud.google.com/blog/products/gcp/cloud-functions-serverless-platform-is-generally-available)), [docs](https://cloud.google.com/functions/docs/concepts/nodejs-runtime) (Node.js 10, 12, 14; 8 is deprecated)
4.  **Cloud Functions for Firebase** (Mar 2017) - [announcement](https://firebase.googleblog.com/2017/03/introducing-cloud-functions-for-firebase.html), [docs](https://firebase.google.com/products/functions) (*same versions as Google Cloud Functions*)
5.  **Google Cloud Run** (Apr 2019) - [announcement](https://cloud.google.com/blog/products/serverless/announcing-cloud-run-the-newest-member-of-our-serverless-compute-stack) ([general release](https://cloud.google.com/blog/products/serverless/knative-based-cloud-run-services-are-ga)), [docs](https://cloud.google.com/run/docs/quickstarts/build-and-deploy/nodejs) (Any Node.js version you can put in a container)
6.  **Google Apps Script** (Aug 2009) - [announcement](https://cloud.googleblog.com/2009/08/launched-google-apps-script.html), [docs](https://developers.google.com/apps-script) (JS-only, not Node; [Rhino](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino) ES3/ES5 + extensions originally; now [v8 & ES6+](https://cloud.google.com/blog/topics/workspace-developers/data-processing-just-got-easier-apps-scripts-new-v8-runtime) [Mar 2020])

另请参阅 Google Cloud[对 Node.js 的整体支持](https://cloud.google.com/nodejs)。

# javascript - 限制日期选择器日期

> ID：12450324
> 
> 赞同：2
> 
> 时间：2012-09-16T20:08:50.360
> 
> 标签：javascript, jquery, asp.net, datepicker

目前我的日期选择器有这个 javascript 代码

```
<script type="text/javascript">
    $(function() {
        $("#datePicker").datepicker();
        $("#<%=TextBox1.ClientID %>").datepicker();
    });
</script> 
```

如何让我的日期选择器不接受过去的日期？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:12:11.620

这会使任何过去日期变灰（并禁用选择）：

```
 $(function () {
            $("<%=TextBox1.ClientID %>").datepicker(
            {
             minDate: +0,
            });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:52:49.053

试试这个

```
$("#datepicker").datepicker({ minDate: 0 }); 
```

[minDate](http://jqueryui.com/demos/datepicker/#option-minDate)选项可以做到这一点..

# matlab - Matlab Ridder 的方法代码

> ID：12450325
> 
> 赞同：1
> 
> 时间：2012-09-16T20:08:50.910
> 
> 标签：matlab, methods

我需要在 Matlab 中编写 Ridder 方法的正确实现。我必须将函数定义为

```
function [x sol, f at x sol, N iterations] = Ridders(f, x1, x2, eps f, eps x) 
```

我得到的解释是：

1.  括号根（x1，x2）

2.  计算中点 (x1 + x2)/2

3.  找到根的新近似值

    `x4 = x3 + sign(f1 - f2) [f3/((f3)^2 - f1f2)^1/2)](x3 - x1)`

4.  检查 x4 是否满足收敛条件。如果是，请停止。如果不...

5.  使用 x4 和 x1、x2 或 x3 中更接近根的重新括起根

6.  循环回到 1

我不知道如何在 matlab 中实现这一点。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:21:40.660

在 Matlab 中，您可以将函数定义为：

```
function [list of outputs] = myfunc(list of input variables)

    %function definition to compute outputs using the input variables. 
```

在您的情况下，如果您希望 x4（即 root）成为您的输出，您可以：

```
function root  = riddler(func, x1, x2, xaccuracy, N)

    xl = x1;
    xh = x2;
    fl=func(x1)
    fh=func(x2)

   for i = 1:N
       xm = 0.5*(xl+xh);
       fm = func(xm);
       s = sqrt(fm*fm - fl*fh)
       if s == 0
         return;
       end
       xnew = xm + (xm - xl)*sign(fl - fh)*fm/s %update formula
       .
       .
       . % extra code to check convergence and assign final answer for root 
       . % code to update xl, xh, fl, fh, etc. (i.e rebracket)
       .

    end % end for 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:28:29.340

一些可能有帮助的主要概念：

*   [函数句柄](http://www.mathworks.de/de/help/matlab/ref/function_handle.html)（您需要以这种格式提供 f）
*   有效的变量名（定义中的许多变量名无效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-16T14:47:17.587

我在 Matlab 文件交换上编写了 Ridder 方法的 Matlab 实现：[提交 54458](https://www.mathworks.com/matlabcentral/fileexchange/54458-rootsolve-func-xlow-xupp-/content/rootSolve.m)。我复制了下面的代码以供参考：

```
function xZero = rootSolve(func,xLow,xUpp)
% XZERO = ROOTSOLVE(FUNC, XLOW, XUPP)
%
% FUNCTION: This function uses Ridder's Method to return a root, xZero,
%     of func on the interval [xLow,xUpp]
%
% INPUTS:
%   func = a function for a SISO function: y = f(x)
%   xLow = the lower search bound
%   xUpp = the upper search bound
%
% OUTPUTS:
%   xZero = the root of the function on the domain [xLow, xUpp]
%
% NOTES:
%   1) The function must be smooth
%   2) sign(f(xLow)) ~= sign(f(xUpp))
%   3) This function will return a root if one exists, and the function is
%   not crazy. If there are multiple roots, it will return the first one
%   that it finds.

maxIter = 50;
fLow = feval(func,xLow);
fUpp = feval(func,xUpp);
xZero = [];

tol = 10*eps;

if (fLow > 0.0 && fUpp < 0.0) || (fLow < 0.0 && fUpp > 0.0)
    for i=1:maxIter
        xMid = 0.5*(xLow+xUpp);
        fMid = feval(func,xMid);
        s = sqrt(fMid*fMid - fLow*fUpp);
        if s==0.0, break; end
        xTmp = (xMid-xLow)*fMid/s;
        if fLow >= fUpp
            xNew = xMid + xTmp;
        else
            xNew = xMid - xTmp;
        end
        xZero = xNew;
        fNew = feval(func,xZero);
        if abs(fNew)<tol, break; end

        %Update
        if sign(fMid) ~= sign(fNew)
            xLow = xMid;
            fLow = fMid;
            xUpp = xZero;
            fUpp = fNew;
        elseif sign(fLow) ~= sign(fNew)
            xUpp = xZero;
            fUpp = fNew;
        elseif sign(fUpp) ~= sign(fNew)
            xLow = xZero;
            fLow = fNew;
        else
            error('Something bad happened in riddersMethod!');
        end

    end
else
    if fLow == 0.0
        xZero = xLow;
    elseif fUpp == 0.0
        xZero = xUpp;
    else
        error('Root must be bracketed in Ridder''s Method!');
    end
end 
```

# android - 如何在android的视图中嵌入额外信息？

> ID：12450329
> 
> 赞同：3
> 
> 时间：2012-09-16T20:09:34.937
> 
> 标签：android

我正在开始 android 开发，在我的示例应用程序中，我有一个 ListView，我填充如下：

```
ListView listView = (ListView) findViewById(R.id.listView1);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, getEntityLabels());
listView.setAdapter(adapter); 
```

`getEntityLabels()`是一个返回字符串列表的函数。

在底层模型中，标签不是唯一的。相反，每个实体都有一个`id`对每个实体都是唯一的字段。

```
class Entity{
  int id;
  String label;
} 
```

当用户点击 ListView 中的某个项目时，我想做一些处理。所以，我添加了一个 ItemClickListener 如下：

```
listView.setOnItemClickListener(new OnItemClickListener(){
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
{               
      //I would like to get the Id of the Entity, not just the label
}}); 
```

处理取决于`id`实体的。但是，由于列表中的视图只是一个文本并且只包含标签，我无法访问它。

有没有办法在视图中嵌入一些信息，如 id（在我的情况下）或获取`id`s 的替代方法？

我知道我可以覆盖返回标签的`toString()`方法并使用而不是. 但是，我不是在寻找这个。我正在寻找一种更通用的方式，如果可能的话，我可以在任何视图中嵌入任何信息！`Entity``ArrayAdapter<Entity>``ArrayAdapter<String>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:23:31.337

您可以使用标签并将标签分配给适配器中的每个视图集。然后，您可以从 OnClickListener 中的单击视图中读取您的标签并继续。由于标签可以是您喜欢的任何东西（对象），应该可以解决您的问题。请参阅[setTag()](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29)和相关的。

# django - date_format 具有正确时区的 Django 1.4

> ID：12450334
> 
> 赞同：5
> 
> 时间：2012-09-16T20:11:01.460
> 
> 标签：django, timezone, django-1.4

好的简单问题（我认为）。

我有一个 DateTime 字段（auto_add_now），当输出到模板时

```
{{ edited|date:"DATETIME_FORMAT" }} 
```

我得到“2012 年 9 月 16 日下午 12:01”的预期结果

但不幸的是，由于我使用的是 Backbone.js 并且需要使用 JSON 传递日期时间，并且由于它仅用于显示目的，所以事情稍微复杂一些，我决定将它作为一个不错的语言环境格式化字符串传递。所以我深入研究了代码并找到了模板标签使用的内容，这就是我设置的内容。

```
from django.utils.formats import date_format
return {
    'created': date_format(self.created, 'DATETIME_FORMAT'),
} 
```

但这以“2012 年 9 月 16 日下午 5:01”结束

我感觉它与模板标签上的以下内容有关

```
@register.filter(expects_localtime=True, is_safe=False) 
```

我也尝试过，但结果相同

```
from django.utils import timezone
tz = timezone.get_current_timezone()
logger.info(tz)
logger.info(self.edited)
logger.info(format(self.edited, 'DATETIME_FORMAT'))
logger.info(self.edited.replace(tzinfo=tz))
logger.info(format(self.edited.replace(tzinfo=tz), 'DATETIME_FORMAT')) 
```

这给了我这个

```
INFO: America/Chicago
INFO: 2012-09-16 17:01:52.921276+00:00
INFO: Sept. 16, 2012, 5:01 p.m.
INFO: 2012-09-16 17:01:52.921276-06:00
INFO: Sept. 16, 2012, 5:01 p.m. 
```

所以，是的，我一定遗漏了一些东西，而且我一直在 django 文档中上下，找不到任何可以指出我做错了什么的东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T20:29:10.373

我想到了。可悲的是，在 Django Timezones 文档中，我认为我已经筋疲力尽了。[本地化使用](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#usage) **timezone.localtime()**

```
from django.utils.formats import date_format
from django.utils import timezone
date_format(timezone.localtime(page.created), 'DATETIME_FORMAT') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T22:23:51.990

也许以下内容会对您有所帮助。

```
>>> obj = MyModel.objects.get(...)
>>> data = {"date_format": obj.edited}
>>> from django.core.serializers.json import DjangoJSONEncoder
>>> data = json.dumps(data, cls=DjangoJSONEncoder)
>>> data
'{"date_format": "2012-09-16T21:45:46Z"}' 
```

从您的视图发送 json 格式的数据：

```
E.g return HttpResponse(data, mimetype='application/json'). 
```

然后在您的客户端代码中，您可以将其转换`date_format`为本地时区：（假设`response`是 JSON 解析对象）

```
var d = new Date(Date.parse(response.date_format));
// Sun Sep 16 2012 22:45:46 GMT+0100 (BST) 
```

# servicestack - 如何定义操作soapAction？（服务堆栈）

> ID：12450341
> 
> 赞同：1
> 
> 时间：2012-09-16T20:11:45.590
> 
> 标签：servicestack

我正在使用 ServiceStack 开发 SOAP 服务，并且我想自定义我的肥皂服务操作soapAction（例如：soapAction="http://mydomain.org/operationName"），我该如何实现呢？

我已经阅读了@service stack's github wiki 的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:15:43.347

ServiceStack 对 SOAP 的支持基本上归结为将服务响应 DTO 嵌入到标准 SOAP 消息中。这允许通过 SOAP 访问现有服务，而无需考虑 SOAP 本身。

任何对 SOAP 功能的额外支持都需要选择加入，并且可以通过拉取请求添加。SoapHandler.cs类是准备 SOAP 响应消息的类[。](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Support/SoapHandler.cs)

# php - 从 POSTED 标头获取图像文件名（'Content-type: image.jpeg'）

> ID：12450343
> 
> 赞同：0
> 
> 时间：2012-09-16T20:11:56.443
> 
> 标签：php, jquery, jcrop

我正在使用[Jcrop](http://deepliquid.com/content/Jcrop_Manual.html)允许我将上传的图像裁剪为用户头像。

本质上，一旦图像被裁剪并使用此表单发布，我就无法从“内容类型：图像/jpeg”标题中获取图像信息：

```
<img src='*userimage*' id='cropbox' />
<form action='crop.php' method='post' onsubmit='return checkCoords();'>
<input type='hidden' id='x' name='x' />
<input type='hidden' id='y' name='y' />
<input type='hidden' id='w' name='w' />
<input type='hidden' id='h' name='h' />
<input type='submit' value='Crop Image' />
</form> 
```

此发布到的页面只有以下代码：

```
<?php

$targ_w = $targ_h = 150;
$jpeg_quality = 90;

$src = 'userimages/63/63.jpg';
$img_r = imagecreatefromjpeg($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

header('Content-type: image/jpeg');
imagejpeg($dst_r,null,$jpeg_quality);
?> 
```

这显示了很好的裁剪图像，但我不希望它像这样发布到crop.php 页面。我希望能够包含我的网站页眉/页脚/样式等并将裁剪的图像显示为文件名，这样我就可以让它得到用户的批准并保存到他们相应的文件夹中。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:46:31.107

我只是通过注释掉 Header 并指定要保存到的路径来解决这个问题：

```
//header('Content-type: image/jpeg');
imagejpeg($dst_r,"userimages/$user_id/$user_id.jpg",$jpeg_quality);
// Remove from memory
imagedestroy($dst_r); 
```

# css - a:active 在 IE 中不起作用

> ID：12450345
> 
> 赞同：0
> 
> 时间：2012-09-16T20:12:09.457
> 
> 标签：css, internet-explorer

我正在与 IE 进行另一场战斗。我正在研究我学校的体育网站，并且勉强让它与 IE 兼容。我已经解决了大部分问题，但最后一个问题让我完全困惑。

我查看简单的脚本，例如[http://jsfiddle.net/easwee/WVrzu/16/](http://jsfiddle.net/easwee/WVrzu/16/)并且活动选择器有效。但是，导航栏上的 :active 状态不起作用。你可以在这里看到它：http: [//mageelions.ca/athletics/forms.php](http://mageelions.ca/athletics/forms.php)（下载活动状态也不起作用）。在其他浏览器中完全没问题，但是这种“缺乏活动状态”让我很困扰。

即.css：

```
ul#nav_buttons li a:active {
    color: black;
    text-decoration: none;
    background: rgb(150,60,60) url("../images/default-red-down.png") !important;
} 
```

`a:hover`很好......如果有人知道如何解决这个问题，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:33:34.937

你尊重正确的顺序吗？IE 对这些东西很敏感：

```
a:link
a:visited
a:hover
a:active 
```

如果你搞混了，IE 不会按预期做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T03:28:55.943

您使用的 IE 版本是否支持`rgb()`符号？尝试使用等效的十六进制：

```
ul#nav_buttons li a:active {
    color: black;
    text-decoration: none;
    background: #963c3c url("../images/default-red-down.png") !important;
} 
```

# python - 如何将任何 Python lint 与 GitHub 提交状态 API 集成？

> ID：12450348
> 
> 赞同：17
> 
> 时间：2012-09-16T20:12:17.473
> 
> 标签：python, github

是否已经有一种方法可以将 Python lint 程序（PyLint、PyChecker、PyFlakes 等）与[GitHub 提交状态 API 集成](https://github.com/blog/1227-commit-status-api)？通过这种方式，可以在拉取请求上自动调用 Python lint 以检查代码并提供反馈和代码（和样式）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T15:41:49.587

您可以使用[Travis-CI](http://travis-ci.org/)之类的东西，并`pylint`作为测试的一部分运行，如下所示：

```
language: python
install: "pip install nose pylint"
script: "nosetests && pylint" 
```

当然，对于轻微的风格违规，提交失败 - 你可能想要禁用某些消息，或者使用`pylint --errors-only`它来降低它的严格性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-20T22:15:09.463

我有同样的问题，刚刚发现[这篇博客文章](http://www.desmondrivet.com/blog/technical/pylint-badges)描述了一个名为[**pylint-server**](https://github.com/drivet/pylint-server)的项目，用于执行类似的操作（尽管在 Travis CI 构建事件上触发，而不是拉动）。

从自述文件：

> 一个小型 Flask 应用程序，用于在每个存储库的基础上跟踪 pylint 报告和评级。

我还没试过，所以我不能评论它的质量。如果有人尝试过，请发表评论并告诉我们您的喜好。

# php - 在 VPS 上 CHMOD 目录 777 是否安全？

> ID：12450350
> 
> 赞同：3
> 
> 时间：2012-09-16T20:12:21.810
> 
> 标签：php, security, permissions, chmod, 777

我有一些需要移动、创建和删除文件和文件夹的 php 脚本。除非我将文件夹 CHMOD 到 777，否则 php 脚本会因权限错误而死。CHMOD'ing文件夹到777解决了这个问题，但经过*大量*阅读后，我仍然对是否可以这样做感到困惑。

我读过共享主机可能很危险，但我的问题是，在 VPS 上这样做安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T20:14:21.567

VPS 与否并不重要。Chmod`777`意味着您授予**任何人**（任何用户，包括系统守护程序）所有可能的权限（包括读取、**写入**和**执行**）给定文件或目录。如果您是机器上唯一的用户，那么它会降低风险（不过，如果有人闯入，那么他仍然可以使用被黑的守护进程的用户 ID 搞砸）。此外，如果该 VPS 上有其他用户帐户，设置`777`允许他们将其内容放入具有所述权限的文件中（或启动它们）。他们会这样做吗？谁知道呢。他们可能，只是因为他们可以由于`777`。一般来说，经验法则应该是**根据实际需要给予尽可能多的权限，除此之外别无他**法。

# java - 一起使用随机和十进制格式

> ID：12450351
> 
> 赞同：1
> 
> 时间：2012-09-16T20:12:25.327
> 
> 标签：java

我正在尝试创建一个随机的四位数字，然后使用十进制格式将其打印为 (# * 1000) + (# * 100) + (# * 10) + (# * 1)。例如，假设我生成 7956，将其拆分并打印为 (7 * 1000) + (9 * 100) + (5 * 10) + (6 * 1)。到目前为止，这就是我所拥有的：

```
public static void main(String [] args)
{
    Random random = new Random();
    int number = random.nextInt(10000);

    DecimalFormat formatOne;
    formatOne = new DecimalFormat("(# * 1000) + (# * 100) + (# * 10) + (# * 1)");

    System.out.println("The random number was: " + number);
    System.out.println("Which is: " + formatOne.format( random.nextInt(10000) ) );

} 
```

我在想我只能使用那种格式，但由于 0 是包括零在内的任何数字，它不会正确打印出来。我尝试将其拆分，但最终只是从我乘以的数字中取零并将它们放在第一个数字的末尾。我在一个相当低级的java类中，甚至还没有进入循环，所以如果你能保持这个尽可能简单，那将不胜感激。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:14:11.593

`DecimalFormat`不能那样工作。

您必须在代码中执行此操作。

您可能会考虑将数字作为字符串获取，然后在循环中向后（从最后到第一个）迭代其字符，从而构建您想要的输出。

# bash - 使用 find 命令显示在特定时间最后修改的文件

> ID：12450352
> 
> 赞同：0
> 
> 时间：2012-09-16T20:12:30.117
> 
> 标签：bash, find

我一直在谷歌搜索并阅读手册页，但我没有看到 find 能够显示在特定时间修改的文件。

所以我有一个像“2012-09-16 08:10:01 PM”这样的时间戳。我想浏览一个目录并找到当时修改的文件。

我希望 find 可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:28:38.730

`find <DIR> -newermt '<DATE1>' \! -newermt '<DATE2>'`

有关更多详细信息，您可以阅读手册页`find`，在其中搜索*newerXY*选项 ....`!`表示不是。

所以上面的命令被解释为：在里面查找`<DIR>`比`<DATE1>`不新的文件`<DATE2>.`

另请注意，某些旧版本`find`没有`-newerXY`. 在这种情况下，您必须使用`touch`(`touch`允许您指定日期) 创建两个文件并使用`find <DIR> -newer <your ref file > \! -newer <your ref file 2>`

# mysql - 在一个查询中分隔多个 SELECT 语句的正确方法是什么？

> ID：12450354
> 
> 赞同：0
> 
> 时间：2012-09-16T20:13:35.683
> 
> 标签：mysql

我正在尝试进行一个查询，并对其应用多个选择语句。我的例子是...

```
$news_query="SELECT *, DATE_FORMAT(`date`,'%d-%b-%Y') AS showdate, SUBSTRING_INDEX(body,' ',8) as body FROM NewsContent ORDER BY id DESC LIMIT 3"; 
```

这是进行查询，应用从 2012 年 9 月 15 日到 2012 年 9 月 15 日的日期格式更改，然后限制文本正文中的单词数量，然后对表中的项目进行排序，以便显示最后三个。

排序有效，但日期更改和字数限制无效。谁能解释我打算做什么以允许这些陈述适用？有人也可以帮我弄清楚“showdate”应该去哪里吗？它会替换我之前的“$date”字符串，还是应用到其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:19:33.217

请记住，* 选择表中的所有列，因此您从表中选择了正文，以及您的缩短正文。我不太确定 MySQL 会如何处理它。如果你给你的新版本的身体一个不同的名字，那么就不会有问题。您选择的新日期和新正文不会替换以前的日期和正文，而是在输出中显示为单独的列（在名称 showdate 和您更改要调用的任何正文下）。

# c++ - 如何有效地提取 cv::Mat 的子集

> ID：12450355
> 
> 赞同：4
> 
> 时间：2012-09-16T20:13:37.477
> 
> 标签：c++, opencv

机器学习中常见的做法是让数据集的第一列代表数据点对应行所属的类。

基本上，我有一个 cv::Mat 并且我想有效地创建一个 cv::Mat 包含删除第一列的矩阵。有没有比遍历列和行并用 逐个添加元素更有效的方法`mat.at<data_type>(row, col) = elem;`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:22:36.797

请参阅OpenCV 文档中的[Mat::operator()](http://docs.opencv.org/modules/core/doc/basic_structures.html#id4)。

# search - 域别名和 SEO

> ID：12450358
> 
> 赞同：1
> 
> 时间：2012-09-16T20:13:58.100
> 
> 标签：search, seo

我在photography.brianbattenfeld.com 上拥有我的摄影网站，但现在它已成为我的主要收入，而且我几乎全职做这件事，所以我的主要领域应该是我的摄影作品集。

我正在考虑让 brianbattenfeldphotography.com 和/或 brianbattenfeld.com 成为我的新摄影域名。

所以我的问题是：

*   如果我将 brianbattenfeldphotography.com 设为photography.brianbattenfeld.com 的别名，是否存在我应该担心的重大搜索引擎优化或分析问题？
*   一个会比另一个表现更好，还是排名更高？
*   访问哪一个人会有所不同吗？
*   搜索引擎是否通常以某种方式承认别名为“次要”，因为它不是文件实际存储的位置？

我知道很多问题，但我只是想弄清楚这可能会产生什么影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:03:31.073

通常，在移动站点或只是更改域时（因为这就是您正在做的，从子域更改为主域），不要创建重复的内容。

本质上，如果您访问 subdomain.domain.com 并获得与 www.domain.com 相同的站点而不更改 URL，则您有重复的内容。

我的建议是，您创建一个从 subdomain.domain.com 到 domain.com 的转发 (301)。这样，Google 会将您的所有排名从旧 URL 转移到新 URL。这可能需要一些时间才能发生，但它会发生。

所以回答你的问题：

*   不要制作别名（这会产生重复的内容）
*   根据入站链接的数量，它们的表现会有所不同。如果 Google 将其视为重复内容，它们也可能表现不佳。
*   对游客没有区别
*   它不是“次要的”，它是一个单独的页面。然而，在这一点上，我觉得我需要提及规范 URL。**仅当您有两个不同的站点**时才应使用它们，其中**某些**页面包含与另一个相同的正文，无论是在相同的域上还是在不同的域上。为每个页面使用规范 URL 是 A) 过度杀伤和 B) 不是一个好主意。您还不如进行 301 重定向。您可以在此处阅读有关规范 URL 的更多信息：http: [//googlewebmastercentral.blogspot.se/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.se/2009/02/specify-your-canonical.html)

希望这能回答你的问题。

# qt - 在 Qt 中替换 WaitForMultipleObjects

> ID：12450362
> 
> 赞同：3
> 
> 时间：2012-09-16T20:14:42.453
> 
> 标签：qt, winapi, porting

我不熟悉 WINAPI，我正在寻找一种方法来替换在一个示例中使用的 WaitForMultipleObjects，我仅使用 Qt 将其移植到 Qt。是否可以？

**编辑：（提供评论中要求的更多信息）**

第 3 方 API 提供一系列事件：

```
HANDLE  m_hEv[MAX_EV]; 
```

在线程的 endles-loop 中，程序等待如下事件：

```
WaitForMultipleObjects(m_EvMax, m_hEv, FALSE ,INFINITE ) 
```

该`HANDLE`类型似乎是 void*。所以我想知道，是否有任何 Qt 类可以观察 m_hEv 的变化并解锁线程执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T09:24:15.027

没有简单的方法可以移植`WaitForMultipleObjects`到 WinAPI 之外。WinAPI 有一个“优势”，即所有可锁定资源（套接字、文件、进程）都提供相同的通用 non-typesafe `HANDLE`，即您的`void*`. 与根据资源类型具有不同锁定和信号方式的其他平台不同，WinAPI 中的事件处理在很大程度上独立于资源。然后可以存在类似的通用函数`WaitForMultipleObjects`，它不需要关心是谁产生了 HANDLE。因此，您必须了解代码试图做什么，并根据场景以不同的方式模仿它。

最大的区别在于`WaitForMultipleObjects`第三个参数，在您的情况下为**FALSE**。这意味着一旦等待数组的任何单个事件发生，它就会退出等待。这是更简单的情况，可以用`QWaitCondition`.

1.  而不是`m_hEv`，您将 a 传递`QWaitCondition*`到发出事件信号的代码中（很可能通过 WinAPI `SetEvent(m_hEv[x])`）
2.  而不是 WaitForMultipleObjects，做`QWaitCondition::wait()`.
3.  而不是`SetEvent()`，做`QWaitCondition::wakeOne()`。

第三个参数是否为**TRUE**，然后 WinAPI 代码将等待，直到所有 m_hEv 事件都发出信号。这种功能的既定名称是**同步屏障**，它也可以模拟`QEventCondition`，但不是从 Qt 盒子里出来的。我从来不需要自己做任何事情，但是 SO 有一些想法：

[Qt同步屏障？](https://stackoverflow.com/questions/9637374/qt-synchronization-barrier)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:28:51.630

WaitForMultipleObjects 是一种通用函数，适用于许多事物：线程、进程、互斥体等。Qt 是一个 OOP 库，其中每个类都公开了它支持的操作。因此，Qt 中的等效操作取决于您使用的类。例如，对于线程，使用 QThread::wait。对于互斥体，使用 QMutex::lock。

# php - 检查是否可被 90+180*n 整除

> ID：12450365
> 
> 赞同：0
> 
> 时间：2012-09-16T20:14:56.250
> 
> 标签：php, modulo

我想在 php 中检查 $var1 == 90+180*n

其中n是所有自然数，即。1,2,3,4...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:33:34.790

只需使用：

```
$var1 % 180 == 90 
```

[根据模运算的](http://php.net/manual/en/language.operators.arithmetic.php)[定义](http://en.wikipedia.org/wiki/Modulo_operation)，这正是您所需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:24:14.727

您需要包含括号以确保您的计算正确。

```
if ( $var1 == (90+(180*n) ) ) 
```

或者在检查之前计算您的价值：

```
$checkme = 90 + (80*$n);  
if ( $var1 == $checkme )  {} 
```

# android - android如何检查一个点是否在我的屏幕内

> ID：12450370
> 
> 赞同：1
> 
> 时间：2012-09-16T20:15:29.580
> 
> 标签：android, google-maps, map-projections

我得到一个 Point 对象，抛出我的 MapView Projectiion 对象。

我有一个叠加层列表，我想检查每个叠加层是否在我当前的屏幕内（这是诅咒取决于缩放级别）。

我找不到检查给定点是否在屏幕内的方法。

我发现的是，当我从投影中记录点时，不在屏幕中的点具有负值..

说如果一个点有一个负值它在我的屏幕之外是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T22:03:04.917

```
 GeoPoint yourPoint = null;// w/e point u wanna see is on the screen

    Point newPoint = null; // x/y point

    mapView.getProjection().toPixels(yourPoint, newPoint); //convert to xy Point

    int height = context.getResources().getDisplayMetrics().heightPixels;

    int width = context.getResources().getDisplayMetrics().widthPixels;

    Rect screen = new Rect(0,0,width,height); //rect that represents your Screen

    if(screen.contains(newPoint.x, newPoint.y){
         // your point is on the screen
    } 
```

# javascript - 如何在整个文档中用“”替换“**”而不使用jquery**

 **> ID：12450381
> 
> 赞同：2
> 
> 时间：2012-09-16T20:17:11.657
> 
> 标签：javascript, replace

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T20:18:22.743

使用正则表达式和`g`（全局）标志：

```
document.body.innerHTML = document.body.innerHTML
    .replace(/&lt;br \/&gt;/g, '<br />')
    .replace(/&lt;b&gt/g, '<b>')
    .replace(/&lt;\/b&gt;/g, '</b>'); 
```

另一种选择是使用`.split(find).join(replace)`成语：

```
document.body.innerHTML = document.body.innerHTML
    .split('&lt;br /&gt;').join('<br />')
    .split('&lt;b&gt;').join('<b>')
    .split('&lt;/b&gt;').join('</b>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:22:28.570

以下代码应该可以解决您的问题：

```
document.body.innerHTML = document.body.innerHTML.replace(/&lt;/g, '<').
                                                replace(/&gt;/g, '>') ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:25:37.137

如果文档是动态的，如由脚本、PHP 或其他方式生成的，最好替换数据库中的标签或在打印数据时。如果是静态 HTML 页面，最好在原始文件中编辑代码。

页面加载后动态替换整个正文将执行缓慢。**

# jquery - 你如何让文本每 __ 秒改变一次？

> ID：12450383
> 
> 赞同：1
> 
> 时间：2012-09-16T20:17:28.443
> 
> 标签：jquery, html, css

这个网站： http: [//www.twosides.co/](http://www.twosides.co/)在它的主页上，如果你看几秒钟，文字会不断变化，效果非常棒。有人有想法这样做吗？

我完全不知道该怎么做，所以我来到 stackoverflow 社区寻求帮助！

感谢所有回答的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:20:15.700

这样的事情会改变消息：

```
<script src="http://code.jquery.com/jquery-1.7.min.js"></script>
<script>
$(function () {
    var messages = [],
        index = 0;

    messages.push('Message 1');
    messages.push('Message 2');
    messages.push('Message 3');

    function cycle() {
        $('#some-id').html(messages[index]);
        index++;

        if (index === messages.length) {
            index = 0;
        }

        setTimeout(cycle, 3000);
    }

    cycle();
});
</script>
<div id="some-id"></div> 
```

只需添加一些动画代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:22:10.463

从源代码看来，他们正在使用[Masonry](http://masonry.desandro.com/index.html)。一般来说，这可以在 jQuery 中使用[animate 函数](http://api.jquery.com/animate/)相当容易地完成。

这是一个带有动画的示例实现。它使用 tmp 元素来确定文本宽度。

```
<script src="http://code.jquery.com/jquery-1.7.min.js"></script>
<script>
$(function () {
    var messages = [],
        index = 0;

    messages.push('I am short.');
    messages.push('Longer messages are nice.');
    messages.push('And short again.');

    var tmp = $('#tmp');
    var el = $('#el');
    function cycle() {
        var i = index%message.length;
        tmp.html(messages[i]);
        el.html('').animate({width: tmp.width()+1}, function() {
            el.html(messages[i]);
            index++;
            setTimeout(cycle, 3000);
        });
    }
    cycle();
});
</script>
<style>
#tmp {
    visibility: hidden;
}
</style>
I am a text. <span id="el"></span> Me too.
<span id='tmp'>foo<span> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T20:25:43.323

要每 x 秒更改一次文本，您应该使用 delay(x);

所以：

```
$("#yourElem").delay(1000).text("Text changed"); 
```

你必须把这段代码放在一个循环中......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-16T20:27:51.457

## 更新：

**查看[twoSides](https://web.archive.org/web/20120331034102/http://www.twosides.co/)代码的工作版本的注释**

[我刚刚在我的个人网站](http://jkirchartz.com)上使用 vanilla JS 和一些 CSS实现了类似的东西。这是该代码的修改版本以适应这些目的。

```
var seconds = 5;
var madlibs = {
  'a': ['eat pie', 'jump rope', 'write code', 'do things'],
  'b': ['a fork', 'your friends', 'the quickness', 'other things']
};
var madlibA = document.getElementById('a');
var madlibB = document.getElementById('b');

function rand(x) {
  return Math.floor(Math.random() * x);
}

function change() {
  var txtA = madlibs['a'][rand(madlibs['a'].length)];
  var txtB = madlibs['b'][rand(madlibs['b'].length)];
  madlibA.innerHTML = txtA;
  madlibB.innerHTML = txtB;
  madlibA.classList.remove('flip');
  madlibB.classList.remove('flip');
}

function reveal() {
  madlibA.classList.add('flip');
  madlibB.classList.add('flip');
  setTimeout(change, 500); // half-second like in CSS
}
setInterval(reveal, seconds * 1000);
```

```
.madlib {
  transition: all 0.5s linear;
  font-size:1rem;
  color:black;
}
.flip {
  font-size:0px;
  color:transparent;
}
```

```
<p>
  we make it easy to <span id="a" class="madlib">do things</span> with <span id="b" class="madlib">other things.</span>
</p>
```

过渡并不完全相同，因为我还没有找到使用 css3 实现 slideDown 效果的好方法（`overflow`在`inline-block`元素上设置会使文本不对齐）

在 JS 中设置秒比你看到的要短 1 秒，因为动画需要 0.5 秒进出，所以要相应地计划。

## 原始答案：

您可以使用`setInterval`定期调用函数，或`setTimeout`在一段时间后调用函数。

所以你可以做

```
function changeText(){
    // code to change the text
}
setInterval(changeText,500); 
```

或者

```
function changeText(){
    // code to change text
    setTimeout(changeText,500);
}
changeText(); 
```

让函数在一段时间后自行调用。

要更改文本，您可以使用如下选项数组：

```
var sentences = ["test 1", "test 2", "test 3"],
    iter = 0,
    changeEl = document.getElementById("change");

function changeText(){
    changeEl.innerHTML = sentences[iter%sentences.length];
    iter++;
    setTimeout(changeText,500);
}
changeText(); 
```

对于动画，您可以将此技术转换为与 jQuery 或 mootools 等库一起使用。

* * *

编辑：

我还没有测试过这些，但看起来他们使用的代码是这样的：

html:

```
 <div id="madlib-sentence">
        <span class="twosides">TwoSides</span> makes it easy to
        <div class="madlibs" style="width:400px;">
            <ul id="madlibs-verbs">
                <li class="madlibs-verb"><span>discuss and debate contentious topics</span></li>
                <li class="madlibs-verb"><span>see every side of an issue</span></li>
                <li class="madlibs-verb"><span>compare your viewpoints</span></li>
            </ul>
        </div> with 
        <div class="madlibs" style="width:100px;">
            <ul id="madlibs-nouns">
                <li class="madlibs-noun"><span>friends.</span></li>
                <li class="madlibs-noun"><span>the world.</span></li>
                <li class="madlibs-noun"><span>co-workers.</span></li>
                <li class="madlibs-noun"><span>family.</span></li>
            </ul>
        </div>
    </div> 
```

CSS：

```
#primary p .madlibs-verb,#primary p .madlibs-noun {
    font-family:HelveticaNeue,'Helvetica Neue',HelveticaNeueRoman,HelveticaNeue-Roman,'Helvetica Neue Roman',TeXGyreHerosRegular,Helvetica,Arial,sans-serif;
    font-weight:bold;
    font-style:normal;
 }

#primary #madlib-sentence {
    margin-top:20px;
    color:#f1f1f1;
    text-shadow:0 0 2px #000;
    font-size:19px;
    font-style:italic;
}

#primary #madlib-sentence .madlibs {
    display:inline-block;
    position:relative;
    height:19px;
    overflow:hidden;
    padding-bottom:3px;
    margin-bottom:-3px;
}

#primary #madlib-sentence .madlibs ul {
    position:absolute;
    left:0;
    top:0;
    list-style-type:none;
}

#primary #madlib-sentence .madlibs ul .madlibs-verb,#primary #madlib-sentence .madlibs ul .madlibs-noun {
    line-height:24px;
    padding-bottom:30px;
    font-family:HelveticaNeue,'Helvetica Neue',HelveticaNeueRoman,HelveticaNeue-Roman,'Helvetica Neue Roman',TeXGyreHerosRegular,Helvetica,Arial,sans-serif;
    font-weight:bold;
    font-style:normal;
}

#primary #madlib-sentence .madlibs ul .madlibs-verb span,#primary #madlib-sentence .madlibs ul .madlibs-noun span {
    white-space:nowrap;
} 
```

JS：

```
function animate_madlib(container) {
    if (typeof container.data("index") === "undefined") {
        container.data("index", 0);
    }
    index = container.data("index") + 1;
    if (index == container.children().length) {
        index = 0;
    }
    current_child = container.children().eq(index);
    parent = container.parent();
    new_width = current_child.children("span").outerWidth();
    if (new_width > parent.width()) {
        parent.animate({width: new_width+"px"}, 100, "swing", function() {
            container.animate({top: -(index*current_child.outerHeight())}, 1000, "easeInOutQuint");
        });
    }
    else {
        container.animate({top: -(index*current_child.outerHeight())}, 1000, "easeInOutQuint", function() {
            parent.animate({width: new_width+"px"}, 100, "swing");
        });
    }
    container.data("index", index);
    new_container = (container.attr('id') == 'madlibs-verbs' ? $('#madlibs-nouns') : $('#madlibs-verbs'));
    setTimeout(function(new_container) {animate_madlib(new_container)}, 2500, new_container);
}

$(document).ready( function() {
    // madlib
    $('.madlibs').each(function() {
        $(this).css("width", $(this).find("span:first").outerWidth());
    });
    setTimeout(function(){animate_madlib($('#madlibs-verbs'))}, 1500);
});​ 
```

# selenium-chromedriver - Selenium ChromeDriver 目前是否支持处理弹出窗口？

> ID：12450384
> 
> 赞同：2
> 
> 时间：2012-09-16T20:17:35.493
> 
> 标签：selenium-chromedriver

单击 Chrome 浏览器上的按钮后，我必须处理一个弹出窗口。一旦以编程方式启动弹出窗口，驱动程序对象的任何进一步操作都会导致此异常：

> OpenQA.Selenium.WebDriverException：服务器没有响应 url

`driver.WindowHandles`弹出窗口启动后，窗口句柄列表 ( ) 的数量也没有变化。请不要将此与在选项卡中切换窗口混淆。

Selenium ChromeDriver 目前是否支持处理弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T13:56:34.337

处理弹出窗口与处理窗口数量相同。试着做：

```
driver().switchTo().window((String)driver.getWindowHandles().toArray()[index]); 
```

其中 index 是新窗口的索引（可以在适当的切换窗口函数中作为参数传递）。

稍后，您可以以更干净的方式实现它，例如：

*在我们的例子中，webdriver 在 WebDriverProxy 对象中被扭曲。

```
 public static void switchFocusToWindowNumber(int index, WebDriverProxy webDriverProxy) {
    try {
        webDriverProxy.getWebDriver().switchTo().window((String) webDriverProxy.getWebDriver().getWindowHandles().toArray()[index]);
    } catch (ArrayIndexOutOfBoundsException e) {
        throw new ArrayIndexOutOfBoundsException("ArrayIndexOutOfBoundsException: Number of open windows is: "
                + getNumberofWindows(webDriverProxy) + " Trying to close window number: " + index + "\n Exception: " + e);
    }    catch (NoSuchWindowException e) {
        throw new NoSuchWindowException ("NoSuchWindowException: Number of windows is: " + getNumberofWindows(webDriverProxy) +
                " Trying to close window number: " + index + "\n Exception: " + e);
    }

} 
```

# php - OpenTBS Word 文档隐藏表格

> ID：12450390
> 
> 赞同：2
> 
> 时间：2012-09-16T20:18:08.747
> 
> 标签：php, ms-word, opentbs, tinybutstrong

我正在使用 TBS 从 PHP 中的模板创建 MS Word 文档，并尝试根据布尔变量删除表。

我想要做的是类似于下面的代码，但我想删除一个表而不是一个对象......

```
[onload;block=mc:AlternateContent;when [var.x_delete]=0] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:59:23.717

我猜你正在使用带有插件 OpenTBS 的 TBS。

在 MS Word 中，表格以元素 为界`<w:tbl>`。

因此，用于删除此类表的 TBS 标签将是：

```
[onload;block=w:tbl;when [var.x_delete]=0] 
```

[OpenTBS](http://www.tinybutstrong.com/opentbs.php)提供了MS Office 和 LibreOffice 主要元素的[概要](http://www.tinybutstrong.com/plugins/opentbs/xml_synopsis.html)。

# c# - 如何从菜单正确更新设置

> ID：12450393
> 
> 赞同：0
> 
> 时间：2012-09-16T20:18:27.720
> 
> 标签：c#, wpf, xaml, settings

如果我有用户设置`ToggleThis`

![在此处输入图像描述](../Images/f8044e413cd278cd979ba8dca6a1abd7.png)

我想在菜单中为用户提供此设置，例如设置/切换设置。点击它。每次单击都应切换用户设置 true/false，但还会更新 menuItem 图标以显示实际设置。

我可以使用

**XAML**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Menu IsMainMenu="True">
            <MenuItem Header="_Settings">
                <MenuItem Header="_Toggle" Name="ToggleSettings" Click="MenuItem_Click">
                    <MenuItem.Icon>
                        <Image Source="Images/Toggle.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>            
        </Menu>
    </Grid>
</Window> 
```

**C＃**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void MenuItem_Click(object sender, RoutedEventArgs e)
        {
            if (ToggleSettings.Icon == null)
            {
                Uri Icon = new Uri("pack://application:,,,/Images/" + "Toggle.png");
                ToggleSettings.Icon = new Image
                {
                    Source = new BitmapImage(Icon)
                };
                Properties.Settings.Default.toggleThis = true;
            }
            else
            {
                ToggleSettings.Icon = null;
                Properties.Settings.Default.toggleThis = false;
            }
        }

    }
} 
```

但是，我知道这不是正确的做法，例如，在启动时，根据以前的设置，菜单可能不会处于正确的状态。麻烦的是，我不知道正确的方法。谁能给我一些关于正确方法的指示？

我假设我需要在 MenuItem 中的图标和/或某些值上使用绑定，但我真的不知道从哪里开始。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:36:32.333

你需要`Save`在你认为合适的时候打电话。

```
Properties.Settings.Default.Save(); 
```

目前尚不完全清楚您*如何*使用它，但这将确保至少存储更新的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:26:01.003

实际上没有“正确”的方法，只有最有效的方法，以及在上下文中最合适的方法。

您的示例看起来不错，至少到目前为止，您唯一的问题似乎是，您选择的选项不会与用户上次使用该软件时选择/未选择的选项同步。

这只需要您的两小段代码位于两个特定位置。

*   奥斯汀已经指出其中之一：保存您的设置。您应该在方法中的 if/else 之后立即执行此操作：`MenuItem_Click`. 只需确保在调用`Settings.Sav`e 之前该方法不会以某种方式退出......a `try`/`catch`以一种优雅的方式确保一致的设置状态将是谨慎的。
*   另一个是您自己提到的“时间”：初始化或启动应用程序。在您的应用程序中的某个位置，在初始加载完成之前，您必须访问您创建的设置 (toggleThis) 并使用它来设置菜单项的初始状态。

实现这一点的最佳方法是使用私有方法，该方法负责更改菜单项上显示的图标，以及将最新状态存储在应用程序的设置中。一个`Toggle()`可能调用的方法，您在`MenuItem_Click`方法中调用它。不过，您需要提供有问题的菜单项和 ID，这可用于访问代码隐藏中的菜单项。同样，此代码示例还假设您的图标也存储在设置中，尽管图标可以来自任何地方，只要您可以引用它们。

所以你的代码可能是这样的，虽然不完全是这样：

```
public MainWindow() 
    { 
        InitializeComponent();
        this.SetToggleIcon(Properties.Settings.Default.toggleThis);
    } 

    private void Toggle()
    {
        this.StoreToggleState(!Properties.Settings.Default.toggleThis);
        this.SetToggleIcon(Properties.Settings.Default.toggleThis);
    }

    private void SetToggleIcon(bool state)
    {
      this.menuItem_ToggleSettings.Icon = (Properties.Settings.Default.toggleThis) ? Properties.Settings.Default.IconTrue : Properties.Settings.Default.IconFalse;
    }

    private void StoreToggleState(bool state)
    {
       Properties.Settings.Default.toggleThis = state;
       Properties.Settings.Default.Save();
    }

    private void MenuItem_Click(object sender, RoutedEventArgs e) 
    { 
      this.Toggle();
    } 
```

# r - 如何在ggplot2中获得不连续日期的连续线

> ID：12450394
> 
> 赞同：2
> 
> 时间：2012-09-16T20:18:28.990
> 
> 标签：r, ggplot2

当存在缺失数据或日期之间存在较大差距时，ggplot 会生成一条不连续的线。

例如：

![在此处输入图像描述](../Images/a03d3a32ead09c7d10f69bfde649df83.png)

```
 q.data<-structure(list(date = structure(c(15544, 15546, 15547, 15548, 
15550, 15552, 15554, 15556, 15575, 15580, 15587, 15588, 15589, 
15593, 15596), class = "Date"), data = c(NA, 0.2, 0.2, 0.3, 0.6, 
0.7, 0.8, 0.9, NA, NA, 1, 1, 1.1, 1.7, 2)), .Names = c("date", 
"data"), row.names = c(NA, -15L), class = "data.frame")

q.data$date<-as.Date(q.data$date, format="%Y-%m-%d")

q.plot<-qplot(data=q.data,
              x=date,
              y=data)+geom_line()

print(q.plot) 
```

我正在寻找一种强制连续线的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:23:43.817

*在没有`NA`s*的情况下，我认为日期之间的差距不会很大。`NA`价值观似乎是你的问题。

我认为

```
q.plot <- qplot(data=na.omit(q.data),...) 
```

应该可以，但是我尝试过的（有效的）是

```
print(q.plot %+% na.omit(q.data)) 
```

![在此处输入图像描述](../Images/1b1884dc87b672dcec28045c463ee66c.png)

`dput`PS: 1\. 用它来发布你的数据会更好一些。2\. 我的解决方案还去掉`NA`了系列开头和结尾的值，这可能是有问题的......

# java - 基于参数（名为 mutex/lock）的 Java 同步

> ID：12450402
> 
> 赞同：35
> 
> 时间：2012-09-16T20:20:36.987
> 
> 标签：java, multithreading, synchronized

我正在寻找一种基于它接收到的参数来同步方法的方法，如下所示：

```
public synchronized void doSomething(name){
//some code
} 
```

我希望方法`doSomething`基于这样的`name`参数同步：

线程 1：doSomething("a");

线程 2：doSomething("b");

线程 3：doSomething("c");

线程 4：doSomething("a");

线程 1 、线程 2 和线程 3 将在不同步的情况下执行代码，但线程 4 将等待线程 1 完成代码，因为它具有相同的“a”值。

谢谢

**更新**

根据 Tudor 的解释，我认为我面临另一个问题：这是新代码的示例：

```
private HashMap locks=new HashMap();
public void doSomething(String name){
    locks.put(name,new Object());
    synchronized(locks.get(name)) {
        // ...
    }
    locks.remove(name);
} 
```

我不填充锁映射的原因是因为 name 可以有任何值。

根据上面的示例，由于 HashMap 不是线程安全的，因此多个线程同时在 hashmap 中添加/删除值时会出现问题。

所以我的问题是，如果我使`HashMap`a`ConcurrentHashMap`是线程安全的，同步块会阻止其他线程访问 locks.get(name) 吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-16T20:23:46.240

使用映射将字符串与锁对象相关联：

```
Map<String, Object> locks = new HashMap<String, Object>();
locks.put("a", new Object());
locks.put("b", new Object());
// etc. 
```

然后：

```
public void doSomething(String name){
    synchronized(locks.get(name)) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-03-28T19:15:55.000

## TL;博士：

我使用Spring Framework 中的[ConcurrentReferenceHashMap](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ConcurrentReferenceHashMap.html)。请检查下面的代码。

* * *

虽然这条线很老了，但它仍然很有趣。因此，我想与 Spring Framework 分享我的方法。

我们试图实现的东西叫做**mutex/lock**。正如[Tudor 的回答](https://stackoverflow.com/a/12450424/1814420)所建议的那样，这个想法是有一个`Map`来存储锁名称和锁对象。代码如下所示（我从他的回答中复制了它）：

```
Map<String, Object> locks = new HashMap<String, Object>();
locks.put("a", new Object());
locks.put("b", new Object()); 
```

但是，这种方法有两个缺点：

1.  OP已经指出了第一个：如何同步对`locks`哈希映射的访问？
2.  如何删除一些不再需要的锁？否则，`locks`哈希图将继续增长。

第一个问题可以通过使用[ConcurrentHashMap](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html)来解决。对于第二个问题，我们有两个选择：手动检查并从映射中删除锁，或者以某种方式让垃圾收集器知道哪些锁不再使用并且 GC 将删除它们。我会选择第二种方式。

当我们使用`HashMap`, or`ConcurrentHashMap`时，它会创建强引用。要实现上面讨论的解决方案，应该改用弱引用（要了解什么是强/弱引用，请参阅[这篇文章](https://community.oracle.com/blogs/enicholas/2006/05/04/understanding-weak-references)或[这篇文章](https://stackoverflow.com/questions/9809074/java-difference-between-strong-soft-weak-phantom-reference)）。

* * *

因此，我使用Spring Framework 中的[ConcurrentReferenceHashMap](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ConcurrentReferenceHashMap.html)。如文档中所述：

> `ConcurrentHashMap`对键和值都使用软引用或弱引用的A。
> 
> 此类可以用作替代方案 `Collections.synchronizedMap(new WeakHashMap<K, Reference<V>>())`，以便在并发访问时支持更好的性能。`ConcurrentHashMap`除了支持空值和空键外，此实现遵循相同的设计约束 。

这是我的代码。`MutexFactory`管理所有锁的是`<K>`钥匙的类型。

```
@Component
public class MutexFactory<K> {

    private ConcurrentReferenceHashMap<K, Object> map;

    public MutexFactory() {
        this.map = new ConcurrentReferenceHashMap<>();
    }

    public Object getMutex(K key) {
        return this.map.compute(key, (k, v) -> v == null ? new Object() : v);
    }
} 
```

用法：

```
@Autowired
private MutexFactory<String> mutexFactory;

public void doSomething(String name){
    synchronized(mutexFactory.getMutex(name)) {
        // ...
    }
} 
```

单元测试（这个测试使用了一些方法的[等待](https://github.com/awaitility/awaitility)库，例如`await()`, `atMost()`, `until()`）：

```
public class MutexFactoryTests {
    private final int THREAD_COUNT = 16;

    @Test
    public void singleKeyTest() {
        MutexFactory<String> mutexFactory = new MutexFactory<>();
        String id = UUID.randomUUID().toString();
        final int[] count = {0};

        IntStream.range(0, THREAD_COUNT)
                .parallel()
                .forEach(i -> {
                    synchronized (mutexFactory.getMutex(id)) {
                        count[0]++;
                    }
                });
        await().atMost(5, TimeUnit.SECONDS)
                .until(() -> count[0] == THREAD_COUNT);
        Assert.assertEquals(count[0], THREAD_COUNT);
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-05T15:29:48.917

Tudor 的答案很好，但它是静态的，不可扩展。我的解决方案是动态的和可扩展的，但它的实现复杂性增加了。外界可以像使用 a 一样使用这个类`Lock`，因为这个类实现了接口。您可以通过工厂方法获得参数化锁的实例`getCanonicalParameterLock`。

```
package lock;

import java.lang.ref.Reference;
import java.lang.ref.WeakReference;
import java.util.Map;
import java.util.WeakHashMap;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public final class ParameterLock implements Lock {

    /** Holds a WeakKeyLockPair for each parameter. The mapping may be deleted upon garbage collection
     * if the canonical key is not strongly referenced anymore (by the threads using the Lock). */
    private static final Map<Object, WeakKeyLockPair> locks = new WeakHashMap<>();

    private final Object key;
    private final Lock lock;

    private ParameterLock (Object key, Lock lock) {
        this.key = key;
        this.lock = lock;
    }

    private static final class WeakKeyLockPair {
        /** The weakly-referenced parameter. If it were strongly referenced, the entries of
         * the lock Map would never be garbage collected, causing a memory leak. */
        private final Reference<Object> param;
        /** The actual lock object on which threads will synchronize. */
        private final Lock lock;

        private WeakKeyLockPair (Object param, Lock lock) {
            this.param = new WeakReference<>(param);
            this.lock = lock;
        }
    }

    public static Lock getCanonicalParameterLock (Object param) {
        Object canonical = null;
        Lock lock = null;

        synchronized (locks) {
            WeakKeyLockPair pair = locks.get(param);            
            if (pair != null) {                
                canonical = pair.param.get(); // could return null!
            }
            if (canonical == null) { // no such entry or the reference was cleared in the meantime                
                canonical = param; // the first thread (the current thread) delivers the new canonical key
                pair = new WeakKeyLockPair(canonical, new ReentrantLock());
                locks.put(canonical, pair);
            }
        }

        // the canonical key is strongly referenced now...
        lock = locks.get(canonical).lock; // ...so this is guaranteed not to return null
        // ... but the key must be kept strongly referenced after this method returns,
        // so wrap it in the Lock implementation, which a thread of course needs
        // to be able to synchronize. This enforces a thread to have a strong reference
        // to the key, while it isn't aware of it (as this method declares to return a 
        // Lock rather than a ParameterLock).
        return new ParameterLock(canonical, lock);               
    }

    @Override
    public void lock() {
        lock.lock();
    }

    @Override
    public void lockInterruptibly() throws InterruptedException {
        lock.lockInterruptibly();
    }

    @Override
    public boolean tryLock() {
        return lock.tryLock();
    }

    @Override
    public boolean tryLock(long time, TimeUnit unit) throws InterruptedException {
        return lock.tryLock(time, unit);
    }

    @Override
    public void unlock() {
        lock.unlock();
    }

    @Override
    public Condition newCondition() {
        return lock.newCondition();
    }
} 
```

当然，您需要一个给定参数的规范键，否则线程将不会同步，因为它们将使用不同的锁。规范化相当于 Tudor 解决方案中字符串的内部化。哪里`String.intern()`本身是线程安全的，我的“规范池”不是，所以我需要在 WeakHashMap 上进行额外的同步。

此解决方案适用于任何类型的对象。但是，请确保在自定义类中正确实现`equals`并`hashCode`正确实现，因为如果不这样做，将出现线程问题，因为多个线程可能使用不同的 Lock 对象进行同步！

WeakHashMap 的选择是由它带来的内存管理的便利性来解释的。不然怎么知道没有线程在使用特定的锁呢？如果这可以知道，你怎么能安全地从地图中删除条目？您需要在删除时进行同步，因为在想要使用锁的到达线程和从映射中删除锁的操作之间存在竞争条件。所有这些事情都是通过使用弱引用来解决的，所以 VM 会为您完成工作，这大大简化了实现。如果你检查了 WeakReference 的 API，你会发现依赖弱引用是线程安全的。

现在检查这个测试程序（由于某些字段的私有可见性，您需要从 ParameterLock 类内部运行它）：

```
public static void main(String[] args) {
    Runnable run1 = new Runnable() {

        @Override
        public void run() {
            sync(new Integer(5));
            System.gc();
        }
    };
    Runnable run2 = new Runnable() {

        @Override
        public void run() {
            sync(new Integer(5));
            System.gc();
        }
    };
    Thread t1 = new Thread(run1);
    Thread t2 = new Thread(run2);

    t1.start();
    t2.start();

    try {
        t1.join();
        t2.join();
        while (locks.size() != 0) {
            System.gc();
            System.out.println(locks);
        }
        System.out.println("FINISHED!");
    } catch (InterruptedException ex) {
        // those threads won't be interrupted
    }
}

private static void sync (Object param) {
    Lock lock = ParameterLock.getCanonicalParameterLock(param);
    lock.lock();
    try {
        System.out.println("Thread="+Thread.currentThread().getName()+", lock=" + ((ParameterLock) lock).lock);
        // do some work while having the lock
    } finally {
        lock.unlock();
    }        
} 
```

您很有可能会看到两个线程都在使用同一个锁对象，因此它们是同步的。示例输出：

```
Thread=Thread-0, lock=java.util.concurrent.locks.ReentrantLock@8965fb[Locked by thread Thread-0]
Thread=Thread-1, lock=java.util.concurrent.locks.ReentrantLock@8965fb[Locked by thread Thread-1]
FINISHED! 
```

但是，有可能这两个线程在执行中不重叠，因此不需要它们使用相同的锁。通过在正确的位置设置断点，您可以轻松地在调试模式下强制执行此行为，强制第一个或第二个线程在必要时停止。您还会注意到，在主线程上的垃圾收集之后，WeakHashMap 将被清除，这当然是正确的，因为主线程通过调用等待两个工作线程完成它们的工作`Thread.join()`在调用垃圾收集器之前。这确实意味着在工作线程中不再存在对 (Parameter)Lock 的强引用，因此可以从弱 hashmap 中清除该引用。如果另一个线程现在想要在同一个参数上同步，一个新的 Lock 将在同步部分中创建`getCanonicalParameterLock`。

现在用任何具有相同规范表示的对重复测试（= 它们相等，所以`a.equals(b)`），看看它仍然有效：

```
sync("a");
sync(new String("a"))

sync(new Boolean(true));
sync(new Boolean(true)); 
```

等等

基本上，此类为您提供以下功能：

*   参数化同步
*   封装内存管理
*   使用任何类型的对象的能力（在正确实施的条件下`equals`）`hashCode`
*   实现锁接口

此 Lock 实现已通过同时修改 ArrayList 进行测试，其中 10 个线程迭代 1000 次，执行以下操作：添加 2 个项目，然后通过迭代完整列表删除最后找到的列表条目。每次迭代都会请求一个锁，因此总共将请求 10*1000 个锁。没有抛出 ConcurrentModificationException，并且在所有工作线程完成后，项目总数为 10*1000。在每一次修改中，调用都会请求一个锁`ParameterLock.getCanonicalParameterLock(new String("a"))`，因此使用一个新的参数对象来测试规范化的正确性。

请注意，您不应该对参数使用字符串文字和原始类型。由于 String 字面量是自动实习的，它们总是有一个强引用，因此如果第一个线程到达时带有一个 String 字面量作为其参数，那么锁池将永远不会从条目中释放出来，这就是内存泄漏。自动装箱原语也是如此：例如，Integer 有一个缓存机制，该机制将在自动装箱过程中重用现有的 Integer 对象，这也会导致强引用的存在。然而，解决这个问题，这是一个不同的故事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-16T12:39:26.097

看看这个框架。看来你正在寻找这样的东西。

```
public class WeatherServiceProxy {
...
private final KeyLockManager lockManager = KeyLockManagers.newManager();

public void updateWeatherData(String cityName, Date samplingTime, float temperature) {
        lockManager.executeLocked(cityName, new LockCallback() {
                public void doInLock() {
                        delegate.updateWeatherData(cityName, samplingTime, temperature);
                }
        });
} 
```

[https://code.google.com/p/jkeylockmanager/](https://code.google.com/p/jkeylockmanager/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-26T10:23:12.207

我基于 McDowell 的[IdMutexProvider](http://illegalargumentexception.blogspot.nl/2008/04/java-synchronizing-on-transient-id.html)创建了一个 tokenProvider 。管理器使用一个`WeakHashMap`负责清理未使用的锁。

[你可以在这里](https://stackoverflow.com/a/28723518/1183010)找到我的实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-28T11:29:12.920

我通过另一个stackoverflow问题找到了正确的答案：[如何通过钥匙获取锁](https://stackoverflow.com/questions/11124539/how-to-acquire-a-lock-by-a-key)

我在这里复制了答案：

Guava 在 13.0 中发布了类似的东西；如果你愿意，你可以把它从 HEAD 中取出。

Striped 或多或少分配了特定数量的锁，然后根据它们的哈希码将字符串分配给锁。API看起来或多或少像

```
Striped<Lock> locks = Striped.lock(stripes);
Lock l = locks.get(string);
l.lock();
try {
  // do stuff 
} finally {
  l.unlock();
} 
```

或多或少，可控制的条带数量让您可以用内存使用来交换并发性，因为为每个字符串键分配一个完整的锁可能会很昂贵；本质上，只有在遇到哈希冲突时才会出现锁争用，而哈希冲突（可以预见）很少见。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-06T08:59:36.110

我使用缓存来存储锁定对象。我的缓存将在一段时间后过期对象，这实际上只需要比同步进程运行所需的时间更长

`

```
import com.google.common.cache.Cache;
import com.google.common.cache.CacheBuilder;

...

private final Cache<String, Object> mediapackageLockCache = CacheBuilder.newBuilder().expireAfterWrite(DEFAULT_CACHE_EXPIRE, TimeUnit.SECONDS).build();

...

public void doSomething(foo) {
    Object lock = mediapackageLockCache.getIfPresent(foo.toSting());
    if (lock == null) {
        lock = new Object();
        mediapackageLockCache.put(foo.toString(), lock);
    }

    synchronized(lock) {
        // execute code on foo
        ...
    }
} 
```

`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-21T06:49:09.397

我有一个更简单、可扩展的实现，类似于@timmons post 利用 guava `LoadingCache`with `weakValues`. 您将需要阅读有关“平等”的帮助文件以了解我提出的建议。

定义以下 weakValued 缓存。

```
private final LoadingCache<String,String> syncStrings = CacheBuilder.newBuilder().weakValues().build(new CacheLoader<String, String>() {
    public String load(String x) throws ExecutionException {
        return new String(x);
    }
});

public void doSomething(String x) {
      x = syncStrings.get(x);
      synchronized(x) {
          ..... // whatever it is you want to do
      }
} 
```

现在！作为 JVM 的结果，我们不必担心缓存会变得太大，它只会在必要时保存缓存的字符串，而垃圾管理器/guava 会完成繁重的工作。

# html - CSS 浮动属性意外行为

> ID：12450403
> 
> 赞同：0
> 
> 时间：2012-09-16T20:20:38.383
> 
> 标签：html, css, dom, css-float

因此，当我注意到一个我不知道其原因的奇怪行为时，我正在检查 css 浮动属性。

这是四个 div 的代码和预览的**[链接](http://jsfiddle.net/elcrimer/ZpQuu/5/)**，前两个左右浮动，第三个和前后只是一个普通的 div。

我确实知道第三个 div 会与第二个 div 重叠，但是我不明白为什么第三个 div 的内容会向下移动，它不应该隐藏在第二个 div 后面吗？

PS我知道可以使用第三个div的clear属性来解决这个问题，但是我更关心这种行为背后的原因。

**代码：**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
aside, article, section, header, footer, nav {
    display: block;
}
html, body {
    margin: 0;
    padding: 0;
}
html {
    background: #ccc;
}
body {
    width: 600px;
    background: #fff;
    margin: 2em auto 2em;
    font: 100% Arial, Helvetica, sans-serif;
}
div {
    margin-bottom: 1em;
    margin-right: 2em;
    width: 85px;
    height: 50px;
    border: 1px solid #000;
    padding: 25px;
}
/*add styles here*/
.element1 {
    background: rgb(26, 78, 175);
    float:right;
    color:white;
}
.element2 {
    background: rgb(85, 66, 54);
    float:left;
    color:white;
}
.element3 {
    background: rgb(247,120,37);
}
.element4 {
    background: rgb(211, 206, 61);
}

?
</style>
</head>
<body>
    <div class="element1">Element 1 floated right</div>
    <div class="element2">Element 2 floated left</div>
    <div class="element3">Element 3 normal flow</div>
    <div class="element4">Element 4 normal flow</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:47:52.443

您需要清除浮动，如果不是该元素正在向下推所有其他元素

```
 <style>
    .clear {
        clear:both;
    }  
    </style>

    <div class="element1">Element 1 floated right</div>
    <div class="element2">Element 2 floated left</div>
    <p class='clear'></p> <!-- Usualy I use a div but you slyle all !-->
    <div class="element3">Element 3 normal flow</div>
    <div class="element4">Element 4 normal flow</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:21:39.883

实际上，当我们使用浮动元素时，我们应该始终清除它们，否则其他元素将重叠到浮动元素中，因为在浮动元素之后它们没有被清除，就像您的示例中发生的那样，所以我清除了您的`.element3`类。

```
.element3 {
    background: rgb(247,120,37);
    clear:both;
} 
```

看演示：- [http://jsfiddle.net/ZpQuu/6/](http://jsfiddle.net/ZpQuu/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:34:37.610

我在[本文档](http://www.w3.org/TR/1998/REC-CSS2-19980512/visuren.html#Floats)中找到了我的问题的答案。

**引用文档：**

> 由于浮动不在流中，因此在浮动框之前和之后创建的非定位块框垂直流动，就好像浮动不存在一样。***但是，在浮动旁边创建的线框会缩短，以便为浮动框腾出空间。浮动框之前的当前行中的任何内容都会在浮动另一侧的第一个可用行中重排。***

所以基本上文档所说的是，浮动元素***可以与添加到文档正常流程中的元素的 Box 模型重叠***，但***不能重叠它们的内容***；换句话说，重叠元素的内容被限制在非重叠空间中。

PS到目前为止，我已经抽象了浮动行为：

Element1：浮动元素

Element2：非定位元素

1-绘制 Element2 的盒子模型。

2-绘制 Element1 的盒子模型及其内容。

3-如果 Element2 仍有非重叠空间，则开始用其内容填充它。

4-如果空间无法容纳全部内容，请在 Element2 盒子模型下开始附加它们。

希望这会有所帮助。

***顺便说一句***，感谢所有为这个问题做出贡献的人并 +1。

# java - 多态对象的 JSON 消费者

> ID：12450404
> 
> 赞同：4
> 
> 时间：2012-09-16T20:21:18.153
> 
> 标签：java, json, jackson, pojo

我正在解析 JSON，并且在使用一种可以具有三种形式之一的结构时遇到了困难。就我而言，它可能是零维、一维或二维。有什么方法可以即时检查 JSON 以确定它是哪一个？或者也许无论如何都要消费它，然后弄清楚它是什么。

这些结构看起来像这样，可以嵌入到其他结构中。

```
"details":{
    "Product":"A zero-dimensional Product"
},

"details":{
    "Product":"A one-dimensional Product",
    "Dimensions": [ "Size" ],
    "Labels": [ "XS", "S", "M", "L" ]
},

"details":{
    "Product":"A two-dimensional Product",
    "Dimensions": [ "Size", "Fit" ],
    "Labels": [[ "XS", "S", "M", "L" ],[ "26", "28", "30", "32" ]]
} 
```

我可能正在寻找的是杰克逊将始终与之匹配的通用类。

类似于翻译的东西：

```
{
"SomeField": "SomeValue",
...
 "details":{
  ...
 }
} 
```

进入：

```
class MyClass {
  String SomeField;
  ...
  AClass details;
} 
```

`AClass`我可以定义一个可以作为任何 JSON 结构或数组的通用接收者的类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T12:21:57.667

感谢 Eric 将我指向[程序员](http://programmerbruce.blogspot.co.uk/2011/05/deserialize-json-with-jackson-into.html)布鲁斯的评论，我设法破解了它。这是我使用的代码（为了简化而删减）。

```
public static class Info {
  @JsonProperty("Product")
  public String product;
  // Empty in the 0d version, One entry in the 1d version, two entries in the 2d version.
  @JsonProperty("Dimensions")
  public String[] dimensions;

}

public static class Info0d extends Info {
}

public static class Info1d extends Info {
  @JsonProperty("Labels")
  public String[] labels;
}

public static class Info2d extends Info {
  @JsonProperty("Labels")
  public String[][] labels;
}

public static class InfoDeserializer extends StdDeserializer<Info> {
  public InfoDeserializer() {
    super(Info.class);
  }

  @Override
  public Info deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {
    Class<? extends Info> variantInfoClass = null;
    ObjectMapper mapper = (ObjectMapper) jp.getCodec();
    ObjectNode root = (ObjectNode) mapper.readTree(jp);
    // Inspect the `diemnsions` field to decide what to expect.
    JsonNode dimensions = root.get("Dimensions");
    if ( dimensions == null ) {
      variantInfoClass = Info0d.class;
    } else {
      switch ( dimensions.size() ) {
        case 1:
          variantInfoClass = Info1d.class;
          break;

        case 2:
          variantInfoClass = Info2d.class;
          break;
      }
    }
    if (variantInfoClass == null) {
      return null;
    }
    return mapper.readValue(root, variantInfoClass);
  }
} 
```

并将其安装在`ObjectMapper`：

```
// Register the special deserializer.
InfoDeserializer deserializer = new InfoDeserializer();
SimpleModule module = new SimpleModule("PolymorphicInfoDeserializerModule", new Version(1, 0, 0, null));
module.addDeserializer(Info.class, deserializer);
mapper.registerModule(module);
factory = new JsonFactory(mapper); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:32:20.633

这个结构是你想要的 AClass 吗？

```
class Dimension {
    String name;
    List<String> possibleValues;
}

class Product {
    String name;
    List<Dimension> dimensions;
} 
```

您需要做的就是更改`dimensions`列表的长度以适应这三种类型。

解析成为检查`Dimensions`属性是否存在于 JSON 中的一个微不足道的问题，如果存在，则对其进行迭代并附加到`dimensions`列表中。

* * *

另一个想法是重组 JSON（如果可以的话），使所有情况都具有相同的形式：

```
"d0":{
    "Product":"A zero-dimensional Product",
    "Dimensions": {}
},

"d1":{
    "Product":"A one-dimensional Product",
    "Dimensions": {
        "Size": [ "XS", "S", "M", "L" ]
    }
},

"d2":{
    "Product":"A two-dimensional Product",
    "Dimensions": {
        "Size": [ "XS", "S", "M", "L" ],
        "Fit": [ "26", "28", "30", "32" ]
    }
} 
```

# mysql - 如何添加引用同一张表的主键的外键约束（自引用）

> ID：12450405
> 
> 赞同：1
> 
> 时间：2012-09-16T20:21:55.347
> 
> 标签：mysql

大家好，我想创建一个具有主键和外键的表。然而，外键引用同一个表的主键。我在网上看了，发现要添加这种约束，我首先需要删除这个约束，加载数据，然后使用 ALTER 命令添加约束。但是，这似乎不起作用。这是查询：

```
DROP TABLE employee;
CREATE TABLE employee (
  fname    varchar(15) not null, 
  minit    varchar(1),
  lname    varchar(15) not null,
  ssn      char(9),
  bdate    date,
  address  varchar(50),
  sex      char,
  salary   decimal(10,2),
  superssn char(9),
  dno      integer(4),
  primary key (ssn),
  foreign key (superssn) references employee(ssn),
  foreign key (dno) references department(dnumber)
); 
```

这就是我在表中加载数据的方式。

```
LOAD DATA LOCAL INFILE "employee.dat" 
INTO TABLE employee 
FIELDS ENCLOSED BY "\"" TERMINATED BY ","
; 
```

如果您能给我一些关于如何完成此任务的提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:45:41.620

**可能的第一个答案：（没有工作）**

```
DROP TABLE employee;

CREATE TABLE employee (
  fname    varchar(15) not null, 
  minit    varchar(1),
  lname    varchar(15) not null,
  ssn      char(9),
  bdate    date,
  address  varchar(50),
  sex      char,
  salary   decimal(10,2),
  superssn char(9),
  dno      integer(4),
  primary key (ssn),
  foreign key (dno) references department(dnumber)
) ENGINE = InnoDB;

LOAD DATA LOCAL INFILE "employee.dat" 
INTO TABLE employee 
FIELDS ENCLOSED BY "\"" TERMINATED BY ",";

ALTER TABLE employee ADD FOREIGN KEY (superssn) REFERENCES employee(ssn); 
```

我将您的创建表查询设置为将表引擎格式设置为 InnoDB，如果您希望使用外键，这是必需的。

**可能的第二个答案：**

需要注意的是，对于这组查询，不需要插入数据，我能够在我的开发 MySQL 服务器上运行这两个查询而不会产生任何错误。 *您仍然需要为部门表添加 FK。*

```
CREATE  TABLE `test_schema`.`employees` (
  `fname` VARCHAR(15) NOT NULL ,
  `minit` VARCHAR(1) NULL ,
  `lname` VARCHAR(15) NOT NULL ,
  `ssn` CHAR(9) NOT NULL ,
  `bdate` DATE NULL ,
  `address` VARCHAR(50) NULL ,
  `sex` CHAR NULL ,
  `salary` DECIMAL(10,2) NULL ,
  `superssn` CHAR(9) NULL ,
  `dno` INT(4) NULL ,
  PRIMARY KEY (`ssn`) ) ENGINE = InnoDB;

ALTER TABLE `test_schema`.`employees` 
  ADD CONSTRAINT `superssn`
  FOREIGN KEY (`superssn` )
  REFERENCES `test_schema`.`employees` (`ssn` )
  ON DELETE NO ACTION
  ON UPDATE NO ACTION
, ADD INDEX `superssn_idx1` (`superssn` ASC) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-19T16:10:08.153

我收到了您的问题，您正在尝试按照 elamsari 书中的说明创建一个数据库。

尝试在添加数据之前添加约束“ FOREIGN KEY (superssn) REFERENCES company.employee(ssn); ”，因为添加此约束不会影响将数据添加到表中。

但是，在添加数据之后使用 ALTER table 命令添加与 dno 相关的约束。然后你不会得到错误 1452：

我试过这个，它工作干杯

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-07-19T21:56:22.223

将数据值输入为 null 时，始终使用不带引号的 NULL NOT like "NULL"

这就是您收到错误的原因，因为您输入的是 char(4) 字符串而不是 CHAR(9)

所以使用 NULL 而不是“NULL”

# c++ - C++ 默认、复制和提升构造函数

> ID：12450409
> 
> 赞同：2
> 
> 时间：2012-09-16T20:22:22.797
> 
> 标签：c++, inheritance, constructor

我有以下代码[这是一个面试问题]：

```
#include <iostream>
#include <vector>

using namespace std;

class A{
public:
    A(){
        cout << endl << "base default";
    }
    A(const A& a){
        cout << endl << "base copy ctor";
    }
    A(int) { 
        cout << endl << "base promotion ctor";
    }
};

class B : public A{
public:
    B(){
         cout << endl << "derived default";
    }
    B(const B& b){
         cout << endl << "derived copy ctor";
    }
    B(int) {
         cout << endl << "derived promotion ctor";
    }
};

int main(){

    vector<A> cont;
    cont.push_back(A(1));
    cont.push_back(B(1));
    cont.push_back(A(2));

        return 0;
    } 
```

输出是：

```
base promotion ctor
base copy ctor
base default
derived promotion ctor
base copy ctor
base copy ctor
base promotion ctor
base copy ctor
base copy ctor
base copy ctor 
```

我无法理解这个输出，特别是为什么基本默认被调用一次和最后 3 个复制 ctor。有人可以解释一下这个输出吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:26:11.130

从该行调用一次基本默认构造函数

```
cont.push_back(B(1)); 
```

您的所有`B`构造函数都调用默认`A`构造函数。最后两个复制构造函数是因为向量重新分配。例如，如果您添加

```
cont.reserve(3); 
```

在`push_back`s 之前，他们会离开。

`A(2)`之前的那个是你最终的临时副本`push_back`。

# javascript - 使用 element.parentNode.removeChild(element) 时无法删除表单元素

> ID：12450414
> 
> 赞同：0
> 
> 时间：2012-09-16T20:22:41.050
> 
> 标签：javascript, element, removechild

我有一个将提交给谷歌搜索设备的表单，形成一个查询字符串“q”。

在表单中，我有单选按钮和隐藏元素；单选按钮包含可供站点选择的选项；隐藏元素包含多个站点，允许用户选择多个站点搜索。

```
<input type="radio" id="site_search" name="as_sitesearch" value="www.mycompany.com" checked>Current site<br />
<input type="radio" id="site_search" name="as_sitesearch" value="archive.mycompany.com">Archive site<br />
<input type="radio" id="site_search" name="as_sitesearch" value="">Both sites<br />
<input type="hidden" id="as_oqOption" name="as_oq" value="www.mycompany.com archive.mycompany.com"> 
```

这是我编写的 Javascript，它将专门删除 radio 元素或隐藏元素（其中一个可以存在于表单提交中）：

```
// IF THE USER CHECKED "BOTH SITES", YOU WILL HAVE TO WIPE OUT THE VALUE OF as_sitesearch TO ALLOW FOR PASSING OF as_oq FOR GOOGLE ENGINE
if (form.elements['as_sitesearch'][0].value.length == 0) {
        var goodbyeElement = document.getElementById('site_search');
        goodbyeElement.parentNode.removeChild(goodbyeElement);
} else {
        var goodbyeElement = document.getElementById('as_oqOption');
        goodbyeElement.parentNode.removeChild(goodbyeElement);
} 
```

但是，当提交表单时，无论我单击哪个单选选项，“q”都会同时获得单选和隐藏元素。

不知道为什么会发生这种情况，因为我遵循了 DOM 教程网站中的指南，我已经阅读了如何在提交之前删除表单元素。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:54:17.330

以下代码可以帮助您：

```
 (form.as_sitesearch[2].checked){
         for(var k=0; k<form.as_sitesearch.length;k++){
            form.as_sitesearch[k].parentNode.removeChild(form.as_sitesearch[k])
        }
    }
   else{
        var goodbyeElement = document.getElementById('as_oqOption');
        goodbyeElement.parentNode.removeChild(goodbyeElement);    
   } 
```

您应该在表单提交时调用它。这里的形式是 document.form[index];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:08:24.213

知道了！显然 form.elements 总是会因为分组而失败，所以不要使用它..

```
// IF THE USER CHECKED "BOTH SITES", YOU WILL HAVE TO WIPE OUT THE VALUE OF as_sitesearch TO ALLOW FOR PASSING OF as_oq FOR GOOGLE ENGINE
if (document.getElementById('site_search3').checked) {
        for (var i = 1; i <= 3; i++) {
            eval('var goodbyeElement = document.getElementById("site_search' + i + '");');
            goodbyeElement.parentNode.removeChild(goodbyeElement);
        }
} else {
        var goodbyeElement = document.getElementById('as_oqOption');
        goodbyeElement.parentNode.removeChild(goodbyeElement);
} 
```

# firebug - 调试：根据值查找 JS 变量/对象

> ID：12450416
> 
> 赞同：0
> 
> 时间：2012-09-16T20:22:51.467
> 
> 标签：firebug, javascript

我有一个巨大的 JS 库（three.js）。（该库在 html5 画布上加载并显示 .jpg 图像作为纹理。）我正在代码中查找包含加载的图像**数据**本身的对象。我知道加载的图像数据在 .jpg 头部部分包含以下文本：“Adobe Photoshop CS4”。

我应该怎么做才能找到这个对象或包含这个文本的变量本身？

你们知道调试程序或插件或其他可以根据其值找到对象或变量的东西吗？

你有什么主意吗？

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:32:58.450

您可以循环并检查页面上的所有变量。您必须将窗口作为树进行搜索。

```
function search(x){
    try{
        for(i in x){
            if(x[i]=="Adobe Photoshop CS4"){
                alert("found");
            }else{
                search(x[i]);
            }
        }   
    }catch(e){}
    return;
}
search(window); 
```

你需要一台好的电脑来运行代码。

# python - 无法在 Python 2.7 下从 PDB 中调用 type()

> ID：12450420
> 
> 赞同：0
> 
> 时间：2012-09-16T20:23:24.520
> 
> 标签：python, pdb

```
p type("ddd")
*** TypeError: TypeError("'int' object is not callable",)
!print(type("dd"))
*** TypeError: 'int' object is not callable
type
255
!type
255 
```

有人知道这是为什么吗？它似乎不是 PDB 命令。由于它的名字，搜索答案一直没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:25:31.787

发布您的代码。看起来您`type`用自己的值覆盖了名称，这恰好是一个整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T20:25:13.827

`type`不是 PDB 命令或在调试会话期间通常不可用。`type`您的本地或全局命名空间中必须有一个具有整数值的局部变量：

```
>>> import pdb
>>> pdb.run('None')
> <string>(1)<module>()
(Pdb) type
<type 'type'>
(Pdb) type = 255
(Pdb) type('ddd')
*** TypeError: 'int' object is not callable 
```

被测代码中定义的局部变量：

```
>>> pdb.run('type = 255; None')
> <string>(1)<module>()
(Pdb) s
> <string>(1)<module>()
(Pdb) type
255 
```

在这些情况下，解决方法是`type`通过模块引用原始函数`__builtins__`：

```
(Pdb) type('ddd')
*** TypeError: 'int' object is not callable
(Pdb) __builtins__.type('ddd')
<type 'str'> 
```

# apache - catalina.sh jdpa start 不启动服务器

> ID：12450432
> 
> 赞同：2
> 
> 时间：2012-09-16T20:24:50.390
> 
> 标签：apache, tomcat, remote-debugging

我试图调试 webapp，所以我想将远程调试器附加到 apache tomcat。但是当我运行命令“catalina.sh jdpa start”时，它不会启动服务器，而是向我显示这个

./catalina.sh jdpa 运行
使用 CATALINA_BASE：/Users/rsingh/work/apache-tomcat-7.0.27*
使用 CATALINA_HOME：/Users/rsingh/work/apache-tomcat-7.0.27
使用 CATALINA_TMPDIR：/Users/rsingh/ work/apache-tomcat-7.0.27/temp
使用 JRE_HOME：/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home
使用 CLASSPATH：/Users/rsingh/work/apache-tomcat-
7.0.27/bin/ bootstrap.jar:/Users/rsingh/work/apache-tomcat-7.0.27/bin/tomcat-juli.jar
用法：catalina.sh ( commands ... )
commands:
debug 在调试器中启动 Catalina
debug -security Debug Catalina使用安全管理器
jpda start 在 JPDA 调试器下启动 Catalina
run 在当前窗口中启动 Catalina
run -security 在当前窗口中启动安全管理器
start 在单独的窗口中启动 Catalina
start -security 在单独的窗口中启动安全管理器
stop 停止 Catalina，最多等待 5 秒以结束进程
stop n 停止 Catalina，最多等待 n 秒以使进程结束
stop -force 停止 Catalina，最多等待 5 秒，然后使用 kill -KILL 如果仍在运行
stop n -force 停止 Catalina，最多等待 n 秒然后使用kill -KILL 如果仍在运行
configtest 在 server.xml 上运行基本语法检查 - 检查退出代码的结果
version 你运行的是什么版本的tomcat？
注意：等待进程结束并使用 -force 选项需要定义 $CATALINA_PID
*

我没有看到为 apache 创建的日志文件，也没有看到启动服务器时使用的语法有任何错误。有没有人遇到过？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T09:21:17.167

You have a typo ("p" and "d" reversed). The command should be: catalina.sh jpda start

# javascript - 滑块动画取决于窗口大小

> ID：12450433
> 
> 赞同：1
> 
> 时间：2012-09-16T20:24:58.787
> 
> 标签：javascript

我想知道是否可以根据屏幕分辨率（窗口大小）制作“动画”到特定（固定）位置？因为如果我调整窗口大小或在其他分辨率屏幕中打开网站，动画将不适合网站。流体设计可以解决问题，但我没有时间进行那种改变..提前谢谢你！

```
$("img.topimage").hide(); 

  // slide in 
  var car = $('<img src="images/ccc.png" />'); 

     car.css('position', 'absolute'); 
     car.css('top', 123); 
     car.css('left', -690); 
     car.css('z-index', 1000); 

  $('html').append(car); 

  car.animate({ 
     left: '+=1025'// 
  }, { 
     duration: 2000, 
     complete: function() { 
        create_slides(); 

        $("img.topimage").show(); 

        car.remove(); 
     } 
  } 
  ); 
```

# android - android gridview+baseadapter+scroll 问题在后台设置图像？

> ID：12450437
> 
> 赞同：1
> 
> 时间：2012-09-16T20:25:29.587
> 
> 标签：android, android-layout

我正在使用 gridview 来显示 7colums 和 96rows。当我单击特定单元格时，它应该以不同的图像突出显示。该单元格用差异图像突出显示，但是当我滚动 gridview 时，多个单元格用该图像突出显示，而不是单个选定的单元格。这是我的适配器类的一段代码。

```
public View getView(int position, View convertView, ViewGroup parent) {
        TextView txtgridcell = null;
        if (convertView == null) {
            convertView = LayoutInflater.from(context).inflate(
                    R.layout.gridview_row, null);
        }
        txtgridcell = (TextView) convertView.findViewById(R.id.txtgridcell);
        **if ((rangeList != null && rangeList.size() > 0)
                && (rangeList.contains(position))) {
            txtgridcell
                    .setBackgroundResource(R.drawable.item_background_focused);
        }** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:40:12.820

解决了

```
if ((rangeList != null && rangeList.size() > 0)
                && (rangeList.contains(position))) {
            txtgridcell
                    .setBackgroundResource(R.drawable.item_background_focused);
        } else {
            txtgridcell.setBackgroundResource(R.drawable.item_background);
        } 
```

添加其他条件解决了我的问题。

# android - 如何在 GridView 中查看原始尺寸的图像

> ID：12450438
> 
> 赞同：0
> 
> 时间：2012-09-16T20:25:29.567
> 
> 标签：android, xml, layout, gridview, imageview

我想在 GridView 中显示一组图像（它们具有相同的尺寸）。在 GirdView 和 GirdView Item 的布局下方。问题是图像高度被拉伸。为什么 ？

网格视图布局：

```
<GridView
    android:id="@+id/gvRecipes"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/include1"
    android:layout_margin="0dp"
    android:background="@drawable/bg"
    android:gravity="right"
    android:horizontalSpacing="10dp"
    android:padding="0dp"
    android:verticalSpacing="5dp" >
</GridView> 
```

GridView 项目是：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/include21"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="10dp"
    android:background="@drawable/btn"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imgRecibeImage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scaleType="fitXY"

        android:src="@drawable/img1" />

    <TextView
        android:id="@+id/txtRecibeName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_gravity="bottom"
        android:background="#80000000"
        android:gravity="right"
        android:padding="5dp"
        android:text="Crispy Chicken and Sandwich"
        android:textColor="#ffffff"
        android:textSize="17sp" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:14:02.683

在您使用的比例类型中`fitXY`：

`fitXY`：仅当不成比例的缩放不影响图形时才应使用此选项。对于位图图形，这几乎总是不好用。这将源图像的宽度设置为视图的宽度，将源图像的高度设置为视图的高度，而不保持源图像的纵横比。

现在你的`layout`和`imageview`宽度是`match_parent`，所以图像将以你的父视图的全宽显示，但是对于高度，它`wrap_content`会`imageView`调整`actual height`你的每一个图像。

# java - 串行 IO：与串行设备通信时休眠（通过 OBD2）

> ID：12450443
> 
> 赞同：0
> 
> 时间：2012-09-16T20:26:08.650
> 
> 标签：java, io, serial-port, obd-ii

我正在尝试使用 Java 库通过串行端口使用 OBD2 协议与汽车通信。协议很简单：您发送一个 ASCII 字符串（例如“01 0d”），然后汽车以 ASCII 值回答。我在网上找到了很多库，但在示例中有一个我不理解的概念。在每个发送命令之后，程序员都会调用`sleep`. 这是为什么？例如：

```
send(pid)
sleep(200)
receive(response) 
```

我不明白，因为`read`是阻塞函数调用，所以我应该可以等待`read`。为什么要额外调用`sleep`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:10:42.510

几年前，我使用（Mitsubishi/Subaru）MUT-II 协议做了很多工作，它使用 ISO9141 协议，并且方式相同。每次请求后暂停 200 毫秒。后来社区/论坛证实，唯一真正需要的暂停是在初始 5 波特初始化之后的那个，一旦更改为 10400，就不需要再暂停了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:19:37.753

如果您要通过硬件接口（如 OBDKey 或类似的基于 ELM327 的设备），那么协议时序会为您处理好，因此这不太可能是睡眠延迟的原因。

你是对的，读取确实阻塞。但请注意，在建立 COM/串口参数时，读取机制中可能会设置超时。在这种情况下，当超时到期时，对 read 的调用会返回一些数据或没有数据。

# ruby-on-rails - 通过一行命令创建模型和索引？

> ID：12450446
> 
> 赞同：14
> 
> 时间：2012-09-16T20:26:47.307
> 
> 标签：ruby-on-rails, rails-migrations

我知道我可以用这一行轻松创建模型。现在假设我想在用户名上添加一个索引。如何在不手动编辑迁移文件的情况下用一行来做到这一点？

```
script/rails generate model TwitterUser username:string num_followers:integer num_following:integer bio:string location:string image:string num_tweets:integer website:string 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-16T22:02:31.807

轨道版本？3.2 中的新功能是：

`rails generate model TwitterUser username:string:index num_followers:integer ...`

你使用`scrip/rails generate`所以不确定这是否对你有帮助

# c# - 通过仅传递实体名称来获取实体

> ID：12450451
> 
> 赞同：2
> 
> 时间：2012-09-16T20:27:39.507
> 
> 标签：c#, entity-framework, reflection

我正在使用实体框架，我只需要通过传递实体的名称来获取实体列表。

例子：

```
string tableName = "PRODUCT";

List<tableName> myList = (from prod in dbContext.tableName
                          select prod).ToList(); 
```

我不能做的是，使用表名（字符串）进行 EF 查询（或 LINQ）。

我试图通过使用 Reflection 或 EntityDataModel 来让它工作，但我就是做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:35:18.367

您是否尝试过这样的事情（[来源](https://stackoverflow.com/questions/8896843/querying-data-using-entity-framework-from-dynamically-created-table)）：

```
var table = context.ExecuteStoreQuery<ResultTableTemplate>("SELECT ... FROM " + tableName); 
```

# c++ - 我可以通过 typetraits 确定一个类型是否具有 const 修饰符吗？

> ID：12450458
> 
> 赞同：1
> 
> 时间：2012-09-16T20:28:12.113
> 
> 标签：c++, typetraits

正如问题所说，我可以找出一个类型是否有`const`修饰符 via`typetraits`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T20:31:54.897

在 C++11 中，您可以使用[`std::is_const`](http://en.cppreference.com/w/cpp/types/is_const). 只需包含`<type_traits>`标题。

在 C++03 中，很容易自己实现：

```
template<typename T> 
struct is_const 
{
    const static bool value = false;
};

template<typename T> 
struct is_const<const T>
{
    const static bool value = true;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T20:29:50.210

如果你有 c++11 支持，你可以使用[std::is_const 。](http://en.cppreference.com/w/cpp/types/is_const)否则，使用[boost::is_const](http://www.boost.org/doc/libs/1_51_0/libs/type_traits/doc/html/boost_typetraits/reference/is_const.html)。

```
struct Foo {};

#include <iostream>
#include <type_traits>
....
std::cout << std::is_const<Foo>::value << '\n';  // false
std::cout << std::is_const<const Foo>::value  << '\n'; // true 
```

# php - ajax实时消息系统

> ID：12450460
> 
> 赞同：0
> 
> 时间：2012-09-16T20:28:28.197
> 
> 标签：php, ajax, system, message

我对消息系统有一个基本的想法，但是任何人都可以指出我正在寻找的正确方向。我猜我必须使用 ajax 来执行此操作，但假设您有两个用户来回互相发送消息，而不是必须刷新页面来阅读新消息，它会自动弹出，实时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T22:07:07.240

为什么要投反对票？OP只是想要一个关于这样做的想法。

这是实时消息传递系统的简单过程：

1.  用户登录网站。
2.  如果站点是基于注册的并且每个用户都有自己的唯一 ID，请跳过第三步。
3.  如果站点只是基于昵称并且不需要您登录，您应该在用户的浏览器上存储一个临时 ID 作为会话变量。（可以使用 SQL 的自动增量功能轻松制作临时 ID，在在这种情况下，您需要为每个用户在数据库的表中存储一个临时行。）
4.  用户选择收件人或网站随机选择收件人。收件人 ID 再次使用会话变量存储在用户的浏览器中。
5.  现在使用简单的 HTML/AJAX 向用户显示一个聊天屏幕。（我们为聊天屏幕创建了一个 div，我们对其进行了编程以使用 AJAX/Javascript 加载获取脚本并每 x 秒刷新一次）
6.  用户发送消息，消息使用 AJAX 发送到发送 php 脚本，发送脚本将消息与发送者和接收者一起存储到数据库中的表中
7.  收件人的屏幕刷新，他看到一条新消息。并且可以响应。响应时，整个过程从第 5 步开始再次进行。

有什么不好看的？问！

# python - 选择 SQLAlchemy 中的主键对象列表

> ID：12450464
> 
> 赞同：0
> 
> 时间：2012-09-16T20:29:01.817
> 
> 标签：python, sqlalchemy

首先，这是我第一个使用 SQLAlchemy 的项目，所以我还是个新手。

我正在制作一个处理 GTFS 数据的系统。我有一个似乎能够非常有效地查询数据的后端。

我想要做的是允许 GTFS 文件用新数据更新数据库。我遇到的问题很明显，如果我试图插入的数据已经在数据库中，我们就会在主键的唯一性上发生冲突。

出于效率原因，我决定使用以下代码进行插入，其中 model 是我想要插入数据的模型对象，data 是要插入的预先计算的、已清理的字典列表。

```
 for chunk in [data[i:i+chunk_size] for i in xrange(0, len(data), chunk_size)]:
    engine.execute(model.__table__.insert(),chunk) 
```

想到了两种解决方案。

1.  我找到了一种插入的方法，这样如果发生碰撞，我们不在乎，也不会失败。我相信上面的代码使用的是[TableClause](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html?highlight=table%20insert#sqlalchemy.sql.expression.TableClause.insert)，所以我先在那里检查，希望找到合适的替代品或标志，但没有运气。

2.  在执行数据清理之前，我们获取主键值列表，如果给定元素与主键匹配，我们跳过清理并插入值。我发现我能够从[Table.primary_key](http://docs.sqlalchemy.org/en/latest/core/schema.html?highlight=table%20primary_key#sqlalchemy.schema.Table.primary_key)获得 PrimaryKeyConstraint ，但我似乎无法将 Columns 取出，或者找到仅查询特定列（在我的情况下是主键）的方法。

如果我能找到办法，要么就足够了。

在过去几个小时查看了这两个之后，我似乎都找不到。我希望有人可能以前做过这件事，并指出我正确的方向。

在此先感谢您的帮助！

**更新 1**：上面没有提到第三个选项。那就是清除数据库中的所有数据，然后重新插入。我不希望这样做，因为即使使用小型 GTFS 文件，也很容易插入数十万个元素，而且这似乎需要大约半小时才能执行，这意味着如果将其投入生产，就会有很多停机时间更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:39:51.040

使用 SQLAlchemy，您只需创建模型类的新实例，并将其合并到当前会话中。SQLAlchemy 将检测它是否已经知道该对象（来自缓存或数据库），并在需要时向数据库添加新行。

```
newentry = model(chunk)
session.merge(newentry) 
```

另请参阅此问题的上下文：[Fastest way to insert object if it doesn't exist with SQLAlchemy](https://stackoverflow.com/questions/12297156/fastest-way-to-insert-object-if-it-doesnt-exist-with-sqlalchemy/12298306#12298306)

# html - 调试 HTML 和 XML

> ID：12450470
> 
> 赞同：0
> 
> 时间：2012-09-16T20:29:52.947
> 
> 标签：html, xml, xpath

我正在尝试使用 XPath 从 XML 中提取信息并将其放入页面中，但我无法获得结果。我想知道是否也有任何类型的 HTML 调试器，以便我可以跟踪该过程以及我在脚本中指定的变量。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:45:13.103

您在这里拥有的是从 DOM 中提取数据的*Javascript*代码。因此，您需要的调试器是浏览器中的 Javascript 调试器。对于 Firefox，这就是 Firebug。对于 Chrome，这只是开发人员工具。对于 IE，好吧，我帮不了你。

# orchardcms - 如何扩展 Orchard 导航模块以将图像添加到菜单项

> ID：12450474
> 
> 赞同：0
> 
> 时间：2012-09-16T20:30:17.227
> 
> 标签：orchardcms

**更新：** *根据伯特兰的建议和我自己的发现，我已经彻底改变了原来的问题。现在它在其文本中提供了一个不完整的解决方案，而不是我自己对果园的盲目曲折和评论，这是完全错误的！*

我需要在悬停/选择时使用图像而不是文本、一个标准和另一个标准来显示菜单。该站点的要求规定最终用户应该能够管理菜单项图像。标准导航模块现在提供了一个 HTML 菜单项，这不是最终用户想要的。客户想要一个非常简单、直观的界面来配置站点许多菜单，并且所有菜单都是基于图像的。

根据 Bertrand 的建议，在意识到内容菜单项是内容类型之后，我在管理界面中创建了一个新的内容部件（不是通过代码，我只想在最终需要时为部件和内容类型编写代码.. . 我真的很想看看我可以通过使用管理界面和模板/CSSing 与 Orchard 一起走多远）。

因此，我创建了一个菜单图像部件，其中添加了两个内容选择器字段：图像和悬停图像。然后我将此部分添加到管理内容项管理界面的内容菜单项中。

由于我没有为它编写驱动程序，因此传递给菜单项模板的模型没有像@Model.Href 这样易于访问的属性...到目前为止，我已经用以下代码覆盖了 MenuItemLink-ContentMenuItem.cshtml ：

```
@using Orchard.Core.Common.Models
@using Orchard.ContentManagement
@{
    var contentManager = WorkContext.Resolve<IContentManager>();
    var itemId = Model.Content.ContentItem.ContentMenuItemPart.Id;
    ContentItem contentItem = contentManager.Get(itemId);
    ContentField temp = null;
    var menuImagePart = contentItem.Parts.FirstOrDefault(p => p.PartDefinition.Name == "MenuImagePart");
    if (menuImagePart != null)
    {
        temp = menuImagePart.Fields.First();
    }
}

<span>@temp</span>
<a href="@Model.Href">@Model.Text</a> 
```

这会在链接中生成预期的菜单标题，在它之前有一个跨度和以下文本：

```
Orchard.Fields.Fields.MediaPickerField 
```

所以上面所有代码（获取当前内容管理器和表示ContentMenuItemPart的ContentItem的id，然后使用内容管理器获取ContentItem本身，然后linqing over它的Parts找到MenuImagePart（我不能使用Get来获取它因为它需要一个类型并且 MenuImagePart 不是一个类型，所以它是在管理界面中创建的），然后最终获得第一个字段用于调试目的（这应该是我创建的 MenuImagePart 的 Image 字段......）。 .. 以上所有代码实际上让我进入了我的 Meny Image Part 上的媒体选择器字段...

What I'm not being able to do, and what makes me certainly a lot obtuse and stupid, is to find a way to read the MediaPickerField URL property! I've tried casting it to MediaPickerField, but I can't access its namespace from inside my template code above. I don't even know which reference to add to my theme to be able to add the following directive to it:

@using Orchard.Fields.Fields

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:31:33.033

I've finally succeeded in this task (thanks to Bertrand's direction).

**UPDATE:** *And thanks again to Bertrand I've polished the solution which was running in circles, querying content items from the content manager when they were already available on the Model... now I'm leveraging the dynamic nature of content item, etc. And I'm finally satisfied with this solution.*

It was necessary to create a new Content Part called Menu Image, then add this to the Content Type named Content Item Menu, and finally overriding the Content Item Menu template. This last part was the really tricky one. If it was not for Bertrand's directions the code bellow would have been smelly and daunting. The template ended up as follow:

```
@using Orchard.Utility.Extensions;
@using System.Dynamic
@{

/* Getting the menu content item
***************************************************************/

var menu = Model.Content.ContentItem;

/* Creating a unique CSS class name based on the menu item
***************************************************************/

// !!! for some reason the following code throws: 'string' does not contain a definition for 'HtmlClassify'
//string test = menu.ContentType.HtmlClassify();
string cssPrefix = Orchard.Utility.Extensions.StringExtensions.HtmlClassify(menu.ContentType);
var uniqueCSSClassName = cssPrefix + '-' + Model.Menu.MenuName;

/* Adds the normal and hovered styles to the html if any
***************************************************************/

if (menu.MenuImagePart != null)
{

    if (!string.IsNullOrWhiteSpace(menu.MenuImagePart.Image.Url))
    {
    using(Script.Head()){
    <style>
        .@uniqueCSSClassName {
            background-image: url('@Href(menu.MenuImagePart.Image.Url)');
            width: @{@menu.MenuImagePart.Image.Width}px;
            height: @{@menu.MenuImagePart.Image.Height}px;
            display: block;
        }
    </style>
    }
    }
    if (!string.IsNullOrWhiteSpace(menu.MenuImagePart.HoverImage.Url))
    {
    using(Script.Head()){
    <style>
        .@uniqueCSSClassName:hover {
            background-image: url('@Href(menu.MenuImagePart.HoverImage.Url)');
            width: @{@menu.MenuImagePart.HoverImage.Width}px;
            height: @{@menu.MenuImagePart.HoverImage.Height}px;
        }
    </style>    
    }
    }
}
}    
<a class="@uniqueCSSClassName" href="@Model.Href">@Model.Text</a> 
```

The only thing that I didn't understand is why I can't use HtmlClassify as an extension method with `menu.ContentItem.HtmlClassify()` and have to resort to calling the method as a standard static method (see the line with the comment `// !!! for some reason the following code throws´...)

Thanks again Bertrand!

# android - WebView 变为空

> ID：12450477
> 
> 赞同：3
> 
> 时间：2012-09-16T20:30:33.060
> 
> 标签：android, android-fragments, android-webview

我有一个显示 WebView 的片段，为了保留正在显示的网站，我保存状态如下：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    /*Saves the currently displayed webpage and the browser history*/
    webView.saveState(outState);        
} 
```

然后我像这样恢复它：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    rootView = inflater.inflate(R.layout.fragment_page_detail,
            container, false);
    webView = (WebView) rootView.findViewById(R.id.page_detail_webview);

    progressBar = (ProgressBar) rootView.findViewById(R.id.op_progress);

    webView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) {

            progressBar.setVisibility(View.VISIBLE);
            progressBar.setProgress(progress);
            if (progress == 100) {

                progressBar.setVisibility(View.GONE);
            }
        }
    });
    webView.setWebViewClient(new StockStreamWebViewClient());
    webView.getSettings().setBuiltInZoomControls(true);
    /*Restores the saved browser history if there is any*/
    if (savedInstanceState != null) {
        webView.restoreState(savedInstanceState);

    } else if (mItem != null) {
        webView.loadUrl(mItem.content);

    }
    return rootView;
} 
```

为了让用户返回 WebView，我的 Activity 中有以下代码：

```
@Override
public void onBackPressed() {

    if (!clientFragment.onBackPressed()) {
        super.onBackPressed();
    }
  }
} 
```

我的片段中的这段代码：

```
public boolean onBackPressed() {
    if (webView != null && webView.canGoBack()) {
        webView.goBack();
        return true;
    } else {
        return false;
    }
} 
```

当我旋转我的设备时，屏幕正确绘制并且 WebView 恢复它的上一页，但是当我按下时，WebView 为空。

为什么会这样？

谢谢， 安赫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:01:31.820

#android-dev 中的 SimonVT 正确建议我可能正在从我的 Activity 调用 null 或新 Fragment。

所以我将此代码添加到我的 Activity 以保存 Fragment 的 ID：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (clientFragment != null) {
        outState.putInt(CLIENT_FRAGMENT_ID, clientFragment.getId());
    }
} 
```

这段代码可以恢复对正确片段的引用：

```
if (savedInstanceState != null
            && savedInstanceState.containsKey(CLIENT_FRAGMENT_ID)) {
        clientFragment = (PageDetailFragment) getSupportFragmentManager()
                .findFragmentById(savedInstanceState.getInt(CLIENT_FRAGMENT_ID));
    } 
```

*PageDetailFragment 是我的扩展片段。*

谢谢， 安赫

# jquery - JQuery 动态表

> ID：12450479
> 
> 赞同：3
> 
> 时间：2012-09-16T20:31:02.083
> 
> 标签：jquery, datatables, dynamic-tables

一整天以来，我一直在尝试将动态表格添加到我的注册页面，而我确实在我开始的地方。我需要创建一个表，用户可以在其中编辑、删除和添加新用户。我试过使用数据表插件，很少有人能帮助我，我一直在阅读网站上的所有示例，但它们的教程真的很糟糕。我一直在寻找很多地方，但没有找到任何地方，有人可以推荐一种将动态表添加到表单中的好方法，或者尝试[在这里](https://stackoverflow.com/questions/12449907/jquery-datatables-add-row)回答我之前关于数据表的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:50:21.313

你可以尝试使用[jqGrid](http://www.trirand.com/blog/)

它有一个很好的界面，它是免费的，非常可配置，并且基于使用 jQuery UI 外观和样式的 jQuery 框架。

例如在[DEMO PAGE](http://www.trirand.com/blog/jqgrid/jqgrid.html)
上查看“实时数据操作”->“添加行” 也有很大的用户群，所以有很多 howtos 和其他东西。

唯一的问题是您可能必须学习许多新事物。
但很值得。

# html - 背景图片尺寸

> ID：12450480
> 
> 赞同：2
> 
> 时间：2012-09-16T20:31:23.160
> 
> 标签：html, web, size, background-image

用于网站的最佳背景图片尺寸是多少？我将使用不同的图像尺寸（我知道这是必要的），但我应该坚持这些比例吗？

[http://www.w3schools.com/browsers/browsers_resolution_higher.asp](http://www.w3schools.com/browsers/browsers_resolution_higher.asp)

我需要风景图像，所以一些照片图像将用作背景图像，而不是图案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:39:07.007

正如旁注 w3schools 不是 W3C 的一部分，所以我不建议链接到它们。[在此处](http://w3fools.com/)查看有关该问题的更多信息。

* * *

就背景大小而言，我会说这取决于背景。如果它只是一个图案，那么为什么不将图案制作成一个图像然后平铺呢？

如果是一张乡村的照片，并且由于屏幕尺寸较小而将部分切掉并不重要，请将其放大。

如果用户看到所有背景很重要，那么我会坚持使用较小的背景。我喜欢做的一个小技巧是让背景淡入背景颜色，所以看起来背景图像很大，实际上它很小。

希望这个建议有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:37:11.040

```
body{
    background: /*your image*/ 400px 300px;
} 
```

# r - 如何计算两组数据之间的距离

> ID：12450486
> 
> 赞同：3
> 
> 时间：2012-09-16T20:32:14.517
> 
> 标签：r, dataframe, distance

我有 2 个数据框 - 学习 L 行的数据和 T 行的测试数据。

我想计算一个 L*T 矩阵，其中包含相应元素之间的距离（欧几里得、曼哈顿、余弦...）。

这是我的看法：

```
distance2 <- function (x1, x2) {
            temp <- x1 - x2
            sum(temp * temp)
}

m <- matrix(0,nrow(learnData),nrow(testData))
for(td in 1:nrow(testData)) {
    for(ld in 1:nrow(learnData)) {
        m[ld,td] <- distance2(testData[td,],learnData[ld,])                 
    }
} 
```

我认为这可以以更紧凑的“R”方式完成。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T21:16:50.633

两个选项浮现在脑海：

1.  使用已经编码了许多这些不同系数的**代理包，并且可以分别为两个数据帧计算这个**
2.  模拟包，它具有可以在两个数据帧（但不是余弦距离）上为您计算欧几里得和曼哈顿度量的**功能。**`distance()`

# delphi - 如何以编程方式进入 TListView 中项目的编辑模式？

> ID：12450488
> 
> 赞同：1
> 
> 时间：2012-09-16T20:32:50.460
> 
> 标签：delphi, listview

在`TListView`控件中，您可以通过单击两次来编辑项目。项目周围会出现一个框，供用户输入新值。如何以编程方式启用编辑模式？我想保护列表免受意外编辑，并禁用编辑（通过启用该`ReadOnly`属性）。然后，当用户按下`Edit`按钮时，该项目将变为活动状态以进行编辑。我怎样才能做到这一点？

此外，如果假设用户选择了一个项目，然后滚动出该项目的视图，然后按下`Edit`，则列表需要首先滚动以使该项目可见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T20:35:55.223

设置`ReadOnly`为 false 后，您可以调用该[`EditCaption`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TListItem.EditCaption)方法。调用[`MakeVisible`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TListItem.MakeVisible)以滚动视图中的项目。

```
ListView1.Items[0].MakeVisible(False);
ListView1.items[0].EditCaption; 
```

# python - Pydev 和运行 Python 脚本的 shell 之间的上下文执行差异

> ID：12450491
> 
> 赞同：1
> 
> 时间：2012-09-16T20:32:53.213
> 
> 标签：python, eclipse, pydev, wine

我在使用 wine 启动程序的 Python 脚本中遇到问题。当脚本在 Eclipse/Pydev 下执行时，启动的程序崩溃，而当脚本从 shell（命令行）运行时它们成功。我认为这应该是由于 Pydev 上下文执行。

我知道对于编码，从 IDE 和 shell 运行分别返回 utf8 和 ascii，所以我认为有一些上下文配置差异可能会导致我的问题。我也知道可以在菜单运行配置->通用中更改编码。但我没有找到任何解决我的问题的设置。有没有办法知道解决我的问题的上下文差异是什么？

为了更准确地解决这个问题，有一些精度：

我有两个 Windows 程序（比如说 prog1.exe 和 prog2.exe），我必须从 Python 2.7 脚本一起启动它们。我在 Linux (Ubuntu 12.04) 下工作，所以我使用 wine 来启动程序。我编写了一个 python 脚本，使用 subprocess.Popen() 然后轮询运行它们。

我使用 Pydev 和 Eclipse（Indigo 和 Juno）来调试我的脚本。

这是我的脚本的样子：

```
from time import sleep
import subprocess

cmd_prog1 = ['wine', '/home/user/folder/to/progs/prog1.exe','--arg1','/home/user/folder/to/conf1/file1','--arg2','/home/user/folder/to/conf1/file2','--arg3','some_arg',....]
cmd_prog2 = ['wine', '/home/user/folder/to/progs/prog2.exe','--arg1','/home/user/folder/to/conf2/file1','--arg2','/home/user/folder/to/conf2/file2','--arg3','some_arg',....]

file1 = "/home/user/result/folder/file1.txt"
file2 = "/home/user/result/folder/file2.txt"

o_file1 = open(file1, "w+")
p_prog1 = subprocess.Popen(cmd_prog1,shell=False,stdout=o_file1,stderr=o_file1)
o_file2 = open(file2, "w+")
p_prog2 = subprocess.Popen(cmd_prog1,shell=False,stdout=o_file2,stderr=o_file2)

res_prog1 = None
res_prog2 = None
timer = 0
while res_prog1 == None or res_prog2 == None:
    timer += 1
    sleep(1)
    res_prog1 = p_prog1.poll()
    res_prog2 = p_prog2.poll()
    print timer

o_file1.close()
o_file2.close()

print res_prog1, res_prog2 
```

当我从 shell 启动我的 Python 脚本时，它工作正常，prog1 和 prog2 在 8 秒后返回 0，并且我在 file1 和 file2 中获得了正确的日志。

当我从 IDE 启动脚本时，prog1 和 prog2 在 2 秒后返回 3，我收到以下错误：

```
Fatal Python error: buffer overflow in getpathp.c's joinpath()
fixme:msvcr90:__clean_type_info_names_internal (0x1e1f9bc8) stub 
```

最后一条消息也出现在正确的行为中，但不是真正的问题

谢谢您的回复

# haskell - 将数字四舍五入到指定的位数

> ID：12450501
> 
> 赞同：22
> 
> 时间：2012-09-16T20:34:41.150
> 
> 标签：haskell, numerical

是否有一个简单的函数可以将 a 舍入`Double`到`Float`指定的位数？我在这里和 Hoogle 上搜索过（对于`(Fractional a) => Int -> a -> a`），但没有找到任何东西。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-16T21:11:40.047

不确定是否存在任何标准功能，但您可以这样做：

```
 (fromInteger $ round $ f * (10^n)) / (10.0^^n) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-17T05:49:23.107

这取决于您将如何处理四舍五入的数字。

如果你想在计算中使用它，你应该`Data.Decimal`从`Decimal`库中使用。

如果你只想很好地格式化数字，你应该使用`Text.Printf`标准库（`base`包）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-05T17:06:36.670

```
λ: ((/100) $ fromIntegral $ round (0.006 * 100)) == 0.006
λ: False

λ: ((/100) $ fromIntegral $ round (0.06 * 100)) == 0.06
λ: True 
```

# android - Android中的阿拉伯语文本问题

> ID：12450504
> 
> 赞同：1
> 
> 时间：2012-09-16T20:35:07.803
> 
> 标签：android

我正在开发一个可以在 Android 上运行的应用程序`WebView`。我为此视图启用了选择和复制。在某些支持阿拉伯语的设备中，当我从`WebView`任何`EditText`视图粘贴复制的文本时，它会显示**保留文本**。但在某些情况下，它向我显示了**正确的形式**。

有人可以帮我在所有设备上以正确的形式显示吗？：-/

我有所有依赖于支持阿拉伯语和波斯语文本的线程，但我无法达到我的目的。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:57:49.347

您可以将复制的文本传递给[FarsiLibrary](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android/7962813#7962813)。它将分析您的文本字母并根据它们可能的 4 种状态（初始、中间、结束、孤立）证明它们的合理性：

首字母像 'نازک' 中的 'ن' 中间像 'هنر' 中的 'ن' 结尾像 'وطن' 中的 'ن' 孤立的像 'ایران' 中的 'ن'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T09:48:18.113

Android 在 Native 小部件（即 TextView 、 EditText）中添加了对 RTL 的支持。因此，如果您从 4.2 开始运行应用程序，您将自动获得 RTL 功能，

[http://android-developers.blogspot.com.es/2013/03/native-rtl-support-in-android-42.html](http://android-developers.blogspot.com.es/2013/03/native-rtl-support-in-android-42.html)

您可以为不同的 API 版本创建不同版本的布局。

正如您可以在此处阅读的那样：http: [//developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)您可以说带有旧设备布局的普通文件夹（/res/layout/），然后是另一个一个支持它的人：/res/layout-11/

layout-v11 中的布局仅适用于 android 3.0 及以上的设备。

# c# - 当我单击此菜单时，如何在 MenuStrip 上添加 V 或其他内容？

> ID：12450507
> 
> 赞同：0
> 
> 时间：2012-09-16T20:35:49.230
> 
> 标签：c#

例如，我有一个 MenuStrip，我在菜单中有一个名为：Check Test 我想做一些事情，当我单击 Check Test 时，它会做一些事情，但也会在菜单上添加一些 V 或一些符号所以我知道这个菜单现在处于活动状态，再次单击将从它或附近删除 V。

不是复选框，而是类似于复选框的东西，当我单击它时，它会以某种方式在菜单附近或菜单上添加 V 或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:43:28.650

将 menuItem 的`CheckOnClick`属性设置为 true

```
 yourToolStripMenuItem.CheckOnClick= true; 
```

现在，当您单击它时，它将自动选中和取消选中。

# c++ - dev-c++编译错误没有匹配的函数

> ID：12450509
> 
> 赞同：-2
> 
> 时间：2012-09-16T20:35:56.157
> 
> 标签：c++, binary-tree

我之前正在处理此代码，但有一个新问题，旧代码的链接是[Bloodshed Dev-C++ 编译器错误 *Binary Trees](https://stackoverflow.com/questions/12438661/bloodshed-dev-c-compiler-errors-binary-trees)。

我有一个错误指出函数“int main()”没有匹配函数调用“binaryTreeType::insert(int&)”候选者是： void binaryTreeType::insert () [with elemType = int] 不太确定这是什么是。代码发布在下面，任何帮助都提前感谢。

```
#include <iostream>

using namespace std;

template <class elemType>
struct nodeType
{
       int data;
       nodeType *lLink;
       nodeType *rLink;
};
template <class elemType>
class binaryTreeType //main class
{
      public:
             binaryTreeType(); //constructor
             ~binaryTreeType(); //destructor
             void swapSubtreeNodes(); //declares swapSubtreeNodes
             void swapSubtreeNodes(nodeType<elemType>*);
             void insert();
             void printTree();
      private:
              nodeType<elemType>*root; //declares root pointer
              nodeType<elemType> *temp; //declares root pointer
};
template <class elemType>
void binaryTreeType<elemType>::swapSubtreeNodes()
{
     swapSubtreeNodes(root); //displays new root
}
template <class elemType>
void binaryTreeType<elemType>::swapSubtreeNodes(nodeType<elemType> *p)
{
    root = temp;
    nodeType<elemType> *root; //pointer for root
    nodeType<elemType> *temp; //pointer for temp
    if (p == NULL) //checks for empty pointer
    {
          return;
    }
    else
    {
        swapSubtreeNodes(p->lLink); //do the subtrees
        swapSubtreeNodes(p->rLink);                                  
        temp = p->lLink; //swap the pointers
        p->lLink = p->rLink;
        p->rLink = temp;
    }
    root = temp; //root set equal to temp
}
int main()
{
    binaryTreeType<int> (tree);
    int num;
    cout << "This is how we swap'em" << endl;
    cout << "Insert number (press enter after each one entered)." << endl;
    cout << "Enter -999 to complete" << endl;
    binaryTreeType<int> (insert);
    cin >> num;
    while (num != -999)
    {
          tree.insert(num);
          cin >> num;
    }
    cout << "The unswapped binary tree looks like this: " << endl;
         tree.printTree();
         cout << endl;
    cout << "The swapped binary tree looks like this: " << endl;
         tree.swapSubtreeNodes();
         tree.printTree();
         cout << endl;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:38:38.403

模板成员函数`binaryTreeType<elemType>::insert()`不接受任何参数。代码尝试使用 type 的参数调用它`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:40:14.393

您的`insert`方法声明不带任何参数。

# java - 为什么反编译 Java 代码这么容易？

> ID：12450510
> 
> 赞同：50
> 
> 时间：2012-09-16T20:35:57.030
> 
> 标签：java, decompiling

所以我刚刚意识到反编译我的 Java 代码是多么容易。我一直在网上搜索，我似乎无法弄清楚*为什么*这么容易。每次我在谷歌上搜索“为什么我可以解压缩`.class`文件？” 或“为什么 Java 如此容易反编译”，我得到的只是指向可以轻松反编译我的代码的软件的链接。所以我转向你 StackOverflow：为什么 Java 可以转换回易于阅读的源代码，而 C++ 和其他语言对反编译不是很友好？

谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-16T20:37:44.173

因为 Java 字节码比汇编更接近（更相似）源代码。

特别是，`.class`文件包括类名、方法名、字段和参数类型等的元数据……
Java（或.Net）反编译器需要做的就是查看每个方法主体中的指令，并将它们转换为适当的句法结构体。

相比之下，像 C++ 这样的原生语言根本不包含任何元数据，因此反编译器需要重新构建*所有内容*。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-16T20:39:01.447

Java 被编译成一种中间形式，即 JVM 字节码，它保留了原始 Java 代码中包含的大量信息。像 C++ 这样的语言编译成汇编代码，看起来与原始代码有很大不同，因此更难逆向。

# php - 在php中创建、移动、删除文件而不设置目录和文件权限为777？

> ID：12450512
> 
> 赞同：0
> 
> 时间：2012-09-16T20:36:01.143
> 
> 标签：php, apache, security, permissions, chmod

正如标题所示，我需要能够从 php.ini 中创建、移动和删除文件和文件夹。

如果我将所有目录和文件 CHMOD 到 777，一切正常，但如果我执行 755，那么脚本会因权限错误而死。

根据我的阅读，使用 777 权限是不安全的，不应该这样做。我有一个 VPS，但是有多个用户，因为我托管了许多网站（其中一些是其他人控制的），无论如何，我想做任何“最佳实践”。

所以，基本上，我想知道的是我应该*怎么做？*我是 php 和“网站管理员”的新手，不知道该怎么做。

谁能指出我正确的方向？

*最后一点：除了能够移动和删除从 php 创建的文件外，脚本还需要移动和删除通过 FTP 从 Windows 机器上传的文件（我注意到默认情况下，当我上传文件 CHMOD 为 755）。*

编辑：我可能需要提到我运行 phpinfo() 并在“PHP Credits”部分下找到以下内容：

```
User/Group      nobody(99)/99 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:54:30.367

为了能够在没有 0777 权限的情况下操作文件和目录，这些文件和目录需要由运行 PHP 脚本的同一用户拥有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:55:55.227

权限被设置为所有者可以做什么、所有者的用户组可以做什么（同一用户组中所有者的对等）以及其他人可以做什么。这就是这 3 个数字的含义：753 是所有者的“7”，团体的“5”和其他所有人的“3”。“7”是完全访问（读、写、执行）。读取并执行“5”。您需要写入权限才能删除。

您应该真正阅读[linux 文件权限](http://www.grymoire.com/Unix/Permissions.html)以了解它们是如何工作的。

我建议您使用 775 或 770。最后一位数字是系统上的任何人或浏览您网站的任何 shmoe 都可以执行的操作，因此您希望它尽可能低。

至于您的 ftp 脚本和您未来的其他用户，只需确保他们与您的 apache 用户在同一个组中。或者，为您想要访问的帐户设置一个组，并将您的 apache 帐户添加到其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:56:17.157

您无需将内容更改为 777，它赋予所有者、组和来宾所有权限（读取、写入、执行）。您可以将其设置为 755，甚至 700，只要所有者是 PHP 进程在其下运行的任何内容。通常这将是 Apache 用户，因为 PHP 脚本在 Apache 进程下运行。

您不需要提供执行权限，但您需要在目录上提供执行权限，以便该进程可以执行更改目录 (cd) 之类的操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T20:59:56.077

Nate，这与基于 UID 和 GID 的访问控制的基本 101 相关。我假设您的“多重用途”每个都有自己的用于 FTP（和 SSH？）访问的 UID。

通常，由 web 服务器 (Apache) 提供服务的文件必须可由 Apache 子进程读取，这些子进程将在**www-data**（或等效）中运行，因此必须是 o:r，同样，它们路径上的任何目录都必须是 o： e.

因此，您大致有两个选择：(i) 使用 suEXEC / suPHP / FastCGI 模板在拥有目录的 UID 中启动 PHP 脚本，以及 (ii) 在 mod_php5 下运行您的脚本，并在您需要脚本写入权限的地方创建任何目录由**www-data**拥有。

就机器资源而言，第二种方法是最有效的，*但它非常不安全* ，因为它实际上使用户A 可以完全R/W 访问用户B 的资源等等。

没有办法把这个圈子平方。如果您不能保证所有用户之间的共享信任，那么您必须阅读并实施基于 (i) 选项的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-24T12:09:14.207

通常文件夹应该有 755 和文件应该有 644 权限集。我在处理 PrestShop 项目时遇到了这个问题。

以下 PHP 脚本解决了我的问题。

```
<?php

exec ("find /path/to/folder -type d -exec chmod 0755 {} +");
exec ("find /path/to/folder -type f -exec chmod 0644 {} +");

?> 
```

# node.js - Jade - 一个字符串中的标签和纯文本

> ID：12450514
> 
> 赞同：0
> 
> 时间：2012-09-16T20:36:17.503
> 
> 标签：node.js, pug

几天前我开始使用 Jade。现在我有一个简单的问题（虽然 Jade 文档简明扼要 - 找不到答案）。

```
h2 Welcome! Please, a(href="/login") log in. 
```

生成纯文本。我怎样才能制作翡翠工艺

```
a(href="/login") log in 
```

作为翡翠风格的html标签？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:20:19.223

你必须把它放在一个新的行上，在元素内标签：

```
h2 Welcome! Please, 
  a(href="/login") log in. 
```

# sql - 何时使用 .mdf 以及何时使用 .sdf？

> ID：12450515
> 
> 赞同：10
> 
> 时间：2012-09-16T20:36:24.627
> 
> 标签：sql, asp.net-mvc, database, entity-framework, vwdexpress

在互联网上看到很多东西后，我没有找到两种文件类型之间的任何解释：`.mdf`和`.sdf`.

`.sdf``.mdf`我相信它将是 SQL Server ( ) 的紧凑版本。它们看起来仍然完全不同。

遵循了msdn上的两个教程，即[MVC Movie App](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)和[Musicstore](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1)。两者都使用`.sdf`.

部分引用（[完整](https://stackoverflow.com/questions/12169590/where-is-that-file-on-my-system)）：'首先它应该是“|DataDirectory|ASPNETDBContext.mdf”（注意扩展名的不同）。你的申请...'

两个教程都有到 的连接字符串`.sdf`，即：

```
<add name             ="MovieDBContext"
     connectionString ="Data Source=|DataDirectory|Movies.sdf" 
     providerName     ="System.Data.SqlServerCe.4.0"
/>

<add name             ="MusicStoreEntities" 
     connectionString ="Data Source=|DataDirectory|MvcMusicStore.sdf" 
     providerName     ="System.Data.SqlServerCe.4.0"
/> 
```

**问题：**

我的问题是在何时何地使用什么？更多关于**为什么**在哪里使用哪个。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T20:58:55.933

SQL Server Compact（sdf 文件）在 Windows 手机中流行，用于存储一些数据（少量数据），也可以用于网站，但性能较差，甚至 SQLite 更好。

SQL Server（mdf 文件）用于具有大量数据的大型站点。它更强大，但不能用于手机，必须安装在服务器上。

看这个：[SQL Server Compact、SQL Server Express 2012 和 LocalDB 的比较](http://erikej.blogspot.com/2011/01/comparison-of-sql-server-compact-4-and.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-17T00:28:01.497

SQL Server **Compact Edition**确实与“常规”SQL Server 完全不同。

SQL Server CE 是一个独立的单用户数据库，由应用程序加载到运行代码的机器上；它在一个`.sdf`文件中包含所有数据，并且仅支持“常规”SQL Server（及其功能）的一小部分。SQL Server CE 非常适合简单的、独立的、单用户应用程序（如电话应用程序）。

“真正的”SQL Server 是一种**服务器产品**——您将它安装在服务器上，您的客户端只连接到它（通常，客户端计算机本身没有安装 SQL Server）。它是一个成熟的 RDBMS，包含所有内容 - 存储过程、触发器等，因此最适合处理结构化、大规模数据 - 想想企业应用程序，例如订单处理、发票、会计、任何多个用户的大型数据库种类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T05:50:30.640

首先，sql server 数据库文件不是一个完整的 sql server 数据库，如果你以这种方式创建它，它就是一个 sql server express。Sql Server Express 数据库使用起来并不是特别棒，因为大多数主机不运行 sql server express，如果您尝试让它们在 sql server 数据库上运行，发布它们会很棘手。最好先从 sql server 开始，然后表达和迁移。

本地数据库实际上是 sql server 精简版。[http://en.wikipedia.org/wiki/SQL_Server_Compact](http://en.wikipedia.org/wiki/SQL_Server_Compact)

对于连接字符串，请访问[http://www.connectionstrings.com/sql-server/](http://www.connectionstrings.com/sql-server/) 那里几乎所有可用的连接字符串。要使用 SQL Server Express，您需要安装它，要管理它，您需要下载 sql server express 管理工具。通常，大多数 sql express 实例都设计为与本地帐户一起使用，但如果我没记错的话，您可以使用管理工具创建一个 sql server 登录。

# python - Python 3.3 对 xz 压缩的 zipfile 的支持是否扩展到 zipimport？

> ID：12450520
> 
> 赞同：3
> 
> 时间：2012-09-16T20:37:15.500
> 
> 标签：python, python-3.x, zip, python-import

Python 3.3 的 zipfile 模块理解使用 bzip2 或 xz 压缩的 .zip 档案，而不是传统的 deflate 算法。这种扩展压缩支持是否扩展到 zipimport 功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:02:32.233

不，[`zipimport.c`源代码](http://hg.python.org/cpython/file/tip/Modules/zipimport.c)独立于 stdlib`zipfile`模块实现，仅支持 ZLIB 压缩数据或未压缩存档。

具体来说，繁重的工作是在具有和分支的[`get_data`功能中完成的。](http://hg.python.org/cpython/file/tip/Modules/zipimport.c#l1026)`/* data is not compressed */``/* Decompress with zlib */`

# ios - iOS6 中的 Facebook 集成错误（Accounts.framework）

> ID：12450521
> 
> 赞同：7
> 
> 时间：2012-09-16T20:37:16.907
> 
> 标签：ios, ios6, acaccount

我正在使用以下代码（显示在 WWDC 2012 视频中）：

```
 self.accountStore = [[ACAccountStore alloc] init];

    ACAccountType *facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    [self.accountStore requestAccessToAccountsWithType:facebookAccountType
                                 withCompletionHandler:^(BOOL granted, NSError *e) {
                                     if (granted)
                                     {
                                         NSArray *accounts = [self.accountStore
                                                              accountsWithAccountType:facebookAccountType];
                                         self.facebookAccount = [accounts lastObject];
                                     } else {
                                         // Fail gracefully...
                                     }
                                 }]; 
```

我还添加了`NSDictionary`到我的`.plist`文件中：

![在此处输入图像描述](../Images/21c1a9825f2a75de7cfda66215ad67bc.png)

所以，我的问题是我收到以下异常：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Access options are required for this account type.' 
```

我已经尝试过这个`ACAccountTypeIdentifierTwitter`和`ACAccountTypeIdentifierSinaWeibo`. 尽管他们总是返回，但我没有收到任何异常`granted == NO`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T21:20:10.240

好吧，WWDC 2012 显示了一件事，但[文档](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html)显示了另一件事......他们使用的方法现在已弃用：

```
– requestAccessToAccountsWithType:withCompletionHandler: Deprecated in iOS 6.0 
```

你应该做什么：

```
ACAccountType *facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    NSDictionary *options = @{
    @"ACFacebookAppIdKey" : @"123456789",
    @"ACFacebookPermissionsKey" : @[@"publish_stream"],
    @"ACFacebookAudienceKey" : ACFacebookAudienceEveryone}; // Needed only when write permissions are requested

    [self.accountStore requestAccessToAccountsWithType:facebookAccountType options:options 
                                 completion:^(BOOL granted, NSError *error) {
                                     if (granted)
                                     {
                                         NSArray *accounts = [self.accountStore
                                                              accountsWithAccountType:facebookAccountType];
                                         self.facebookAccount = [accounts lastObject];
                                     } else {
                                         NSLog(@"%@",error);
                                         // Fail gracefully...
                                     }
                                 }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-04T06:53:36.940

斯威夫特 3

```
let account = ACAccountStore()
let accountType = account.accountType(withAccountTypeIdentifier: ACAccountTypeIdentifierFacebook)
let options: [AnyHashable : Any] = [ACFacebookAppIdKey: "Your App ID on FB", ACFacebookPermissionsKey: ["publish_stream", "publish_actions"], ACFacebookAudienceKey: ACFacebookAudienceEveryone]

account.requestAccessToAccounts(with: accountType, options: options) { (success, error)  in
  if success {
    if let accounts = account.accounts(with: accountType) {
      if accounts.isEmpty {
        print("No facebook account found, please add your facebook account in phone settings")
      } else {
        let facebookAccount = accounts.first as! ACAccount

        let message = ["status": "My first Facebook posting "]
        let requestURL = URL(string: "https://graph.facebook.com/me/feed")

        let postRequest = SLRequest(forServiceType: SLServiceTypeFacebook,
                                    requestMethod: SLRequestMethod.POST,
                                    url: requestURL,
                                    parameters: message)
        postRequest?.account = facebookAccount

        postRequest?.perform(handler: {(_, urlResponse,
          error) in

          if let err = error {
            print("Error : \(err.localizedDescription)")
          }
          print("Facebook HTTP response \(String(describing: urlResponse?.statusCode))")
        })
      }
    }
  } else {
    print("Facebook account error: \(String(describing: error))")
  }
} 
```

# jsf-2 - Primefaces3.4 折线图中的日期时间支持

> ID：12450532
> 
> 赞同：1
> 
> 时间：2012-09-16T20:38:20.807
> 
> 标签：jsf-2, charts, primefaces, timeline

我正在尝试使用内部使用 jqplot 的 primefaces 3.4 以连续样式显示日期时间折线图。根据这个应该是可能的： [http](http://code.google.com/p/primefaces/issues/detail?id=2180) ://code.google.com/p/primefaces/issues/detail?id=2180 但是，我的结果只是一个普通的离散图表。有人成功了吗？

primefaces 作者说： *使用新的扩展器功能，您可以在图表在客户端呈现之前以您想要的方式配置图表。Extender 只是一个在绘制绘图之前调用的 javascript 函数，以便您可以覆盖 PrimeFaces 提供的属性并添加更多以支持任何 jqplot 配置选项*

我应该在扩展器中放入什么才能使时间线正常工作？

这是有希望的：kevindoran1.blogspot.co.nz/2012/02/using-google-charts-with-jsf.html 但 xmlns:ti="http://tradeintel.co.nz/custom" 不再存在（？ )

顺便说一句，连续和离散解释 = [https://developers.google.com/chart/interactive/docs/customizing_axes#Discrete_vs_Continuous](https://developers.google.com/chart/interactive/docs/customizing_axes#Discrete_vs_Continuous)

任何替代（免费）图表库，我可以轻松地与 JSF2 集成？这个 kevindoran1.blogspot.co.nz/2012/02/using-google-charts-with-jsf.html 很有希望，但 xmlns:ti="http://tradeintel.co.nz/custom" 不再存在（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:14:50.343

我使它与primefaces一起工作，看看我在这里的详细帖子[http://forum.primefaces.org/viewtopic.php?f=3&t=23891&p=78637#p78637](http://forum.primefaces.org/viewtopic.php?f=3&t=23891&p=78637#p78637)

如果您有任何疑问，请随时询问我的详细信息

# c++ - 解析示例文本文件并将其拆分

> ID：12450535
> 
> 赞同：0
> 
> 时间：2012-09-16T20:38:49.683
> 
> 标签：c++, string, parsing

我正在尝试浏览一个带有汇编指令的简单文本文件，它看起来像这样

```
TOP   NOP
VAL   INT 0
TAN   LA 2,1 
```

这只是一个小例子，所以我可以向您展示它是如何工作的。基本上，我将第一个标签放入标签中，然后将第二个标签（NOP、INT 和 LA）放入操作码中。

之后，我将采用第一个参数（0 和 2）并将它们放在 arg1 中。然而，这就是我的问题所在。使用我拥有的当前代码，当我将参数放入字符串时得到的输出就是这样

```
TOP
0
2 
```

显然，我只想让最后两个成为唯一的，但是我如何做到这一点，这样我的第一个论点就不会被抛出 TOP 呢？

```
#include <string>
#include <iostream>
#include <cstdlib>
#include <string.h>
#include <fstream>
#include <stdio.h>

using namespace std;

int main(int argc, char *argv[])
{
// If no extra file is provided then exit the program with error message
if (argc <= 1)
{
    cout << "Correct Usage: " << argv[0] << " <Filename>" << endl;
    exit (1);
}

// Array to hold the registers and initialize them all to zero
int registers [] = {0,0,0,0,0,0,0,0};

string memory [16000];

string Symtablelab[1000];
int Symtablepos[1000];

string line;
string label;
string opcode;
string arg1;
string arg2;

// Open the file that was input on the command line
ifstream myFile;
myFile.open(argv[1]);

if (!myFile.is_open())
{
    cerr << "Cannot open the file." << endl;
}

int counter = 0;
int i = 0;
int j = 0;

while (getline(myFile, line, '\n'))
{
    if (line[0] == '#')
    {
        continue;
    }

    if (line.length() == 0)
    {
        continue;
    }

    if (line[0] != '\t' && line[0] != ' ')
    {
        string delimeters = "\t ";

        int current;
        int next = -1;

        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

        Symtablelab[i] = label;

        current = next + 1;
        next = line.find_first_of(delimeters, current);
        opcode = line.substr(current, next - current);

        if (opcode != "WORDS" && opcode != "INT")
        {
            counter += 3;
        }

        if (opcode == "INT")
        {
            counter++;
        }

        delimeters = ", \n\t";
        current = next + 1;
        next = line.find_first_of(delimeters, current);
        arg1 = line.substr(current, next-current);

        cout << arg1<<endl;

        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:03:49.523

使用这种技术有很多弱点，你根本不会检查任何结果。例如，当你说：

```
current = next + 1; 
```

您应该已经知道项目之间只有一个分隔符！否则你应该通过所有项目，当你说

```
next = line.find_first_of(delimeters, current);
<something> = line.substr(current, next - current) 
```

你应该确定`find_first_of`找到了一些东西，否则它会返回 -1 并且`next - current`会是负数！

如果我想做这项工作，我使用`regex`，或者`std`使用`boost`正则表达式，这个任务是小菜一碟，只需使用：

```
std::matches m;
std::regex rx("\\s*(\\w+)\\s+(\\w+)(?:\\s+(\\d+)\\s*(?:,(\\d+))?)?");
if (std::regex_match(line, m, rx)) {
    // we found a match here
    string label = m.str(1);
    string opcode = m.str(2);
    string arg1 = m.str(3), arg2 = m.str(4)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:48:30.927

问题是寻找每个后续单词的开头：`current = next + 1`. 您想查找第一个非定界符作为单词的开头，并在查找参数之前检查您是否位于行尾。

添加调试信息，我看到以下内容：

```
>> label: start=0 end=3 value="TOP"
>> opcode: start=4 end=4 value=""

>> label: start=0 end=3 value="VAL"
>> opcode: start=4 end=4 value=""

>> label: start=0 end=3 value="TAN"
>> opcode: start=4 end=4 value="" 
```

这告诉我每次尝试操作码都是在寻找另一个分隔符。

问题是您只在单词之后增加一个，并且下一行.substr() 捕获分隔符。

在启动后的查找中，更改：

```
current = next + 1; 
```

到：

```
current = line.find_first_not_of(delimeters, next + 1); 
```

这允许它在任何和所有分隔符之后查找下一个单词的开始。

此外，您希望以剩余行长为条件查找参数，因此将其包装在`if(next >0) { ... }`.

这给了我，我的调试和你的原始输出（有条件）：

```
>> label: start=0 end=3 value="TOP"
>> opcode: start=6 end=-1 value="NOP"
>> label: start=0 end=3 value="VAL"
>> opcode: start=6 end=9 value="INT"
>> arg1: start=10 end=-1 value="0"
0
>> label: start=0 end=3 value="TAN"
>> opcode: start=6 end=8 value="LA"
>> arg1: start=9 end=10 value="2"
2 
```

从主循环中重构您的解析/标记化，以便您可以专注于它们。您甚至可能希望获得 cppunit（或类似的）来帮助您测试解析功能。在没有这样的情况下，它可以帮助您转到一个地方并插入调试信息，例如：

```
cout << ">> " << whatIsBeingDebugged << ": " << start=" << current 
     << " end=" << next << " value= \"" << value << "\"" << endl; 
```

制作一个健壮的词法分析器和解析器是许多库（lex 和 yacc、flex 和 bison 等）的主题，可以是正则表达式等其他库的应用，甚至是整个大学课程。这是工作。但是，只要有条不紊、彻底，并且孤立地测试部分，例如使用 cppunit （或类似的）进行单元测试。

# java - 如何在 sitebricks-client 中发布正文？

> ID：12450538
> 
> 赞同：0
> 
> 时间：2012-09-16T20:38:55.467
> 
> 标签：java, rest, post, rest-client, sitebricks

我正在使用[sitebricks-client](http://sitebricks.org/#webclient)与 Java 中的 REST API 进行交互。我需要用非空的身体做一个 POST。我如何在网站砖中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:23:13.630

您尚未指定要发布的请求正文类型。如果您尝试发送 Content-Type 为“text/plain”的字符串，则以下内容应该有效：

```
String body = "Request body.";
WebResponse response = web.clientOf(url)
    .transports(String.class)
    .over(Text.class)
    .post(body); 
```

如果您尝试发送已经序列化为字符串的特定类型的数据，您可以手动设置 Content-Type 标头：

```
String body = "{}";
Map<String, String> headers = new HashMap<String, String>();
headers.put("Content-Type", "application/json");
WebResponse response = web.clientOf(url, headers)
    .transports(String.class)
    .over(Text.class)
    .post(body); 
```

If you have a Map containing data that you would like to send to the server with a Content-Type of "application/json", then something like this might be up your alley:

```
Map body = new HashMap();
// Fill in body with data
WebResponse response = web.clientOf(url)
    .transports(Map.class)
    .over(Json.class)
    .post(body); 
```

There are two important points to pay attention to in the examples above:

*   The value passed to the `post` method should be of the type passed to the `transports` method.
*   The class that you pass to the `over` method determines the default value of the Content-Type header and the way in which the value passed to the `post` method is serialized. The class should be a subclass of `com.google.sitebricks.client.Transport`, and you will probably want to choose one of the classes found in the `com.google.sitebricks.client.transport` package.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:15:13.320

我已经注意到尝试过，但是 webclient 中有一个 post() 方法。

```
web.clientOf("http://google.com")
...
.post(...); 
```

查看github上的源码

[https://github.com/dhanji/sitebricks/blob/master/sitebricks-client/src/main/java/com/google/sitebricks/client/WebClient.java](https://github.com/dhanji/sitebricks/blob/master/sitebricks-client/src/main/java/com/google/sitebricks/client/WebClient.java)

Rgds

# objective-c - MKMapView 平移导致父 UIScrollView 滚动

> ID：12450539
> 
> 赞同：1
> 
> 时间：2012-09-16T20:38:58.637
> 
> 标签：objective-c, ios, uiscrollview, mkmapview, mapkit

我将 MKMapView 添加到 UIScrollView。我认为预期的功能是平移地图会导致地图移动，但它的父 UIScrollView 不会滚动。即，如果您正在平移地图，则滚动视图将保持在当前位置。

这是我的代码：

```
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.width, self.height)];
    [scrollView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];
    [self.view addSubview:scrollView];

    double mapHeight = 200;
    if([AppDelegate isRunningOniPad])
        mapHeight = 400;

    map = [[MKMapView alloc] initWithFrame:CGRectMake(0, 200, self.width, mapHeight)];
    [map setExclusiveTouch:NO];
    [scrollView map]; 
```

我尝试将独占触摸设置为“是”和“否”，但似乎没有任何效果。

有没有办法让行为正常工作，以便平移地图将阻止 UIScrollView 移动？我也尝试将地图更改为 UIScrollView 而不是 MKMapView ，但是具有相同的行为 - 所以我怀疑这是 MKMapView 特定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:49:06.677

预期的结果是正确的，当 Map View 被触摸时，滚动视图应该保持静止，因为它应该在触摸事件通过响应链传递到滚动视图之前接收到触摸事件。

我已经在一个空项目中快速测试了上面的代码，它按预期工作，对框架和尺寸的创建、iPad 尺寸检测以及将地图添加为滚动视图的子视图进行了一些更改。

```
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
[scrollView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];
// Make the content size large to allow scroll view to move
[scrollView setContentSize:CGSizeMake(1000, 2000)];
[self.view addSubview:scrollView];

double mapHeight = 200;
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    mapHeight = 400;
}

MKMapView *map = [[MKMapView alloc] initWithFrame:CGRectMake(0, 200, self.view.bounds.size.width, mapHeight)];
[map setExclusiveTouch:NO];
[scrollView addSubview:map]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T19:29:03.627

如果它对任何人有帮助，

将 a 添加`MKMapView`到 a`UIScrollView`应该可以按预期工作。在我的情况下，它不起作用，因为我的视图层次结构设置不正确。

如果您遇到问题，请查看如何添加子视图（即`[self.view addSubview:mapView]`. 确保`MKMapView`正确位于`UIScrollView`的层次结构中。

另外，我真的很喜欢revealapp.com来检查视图层次结构（不，我与他们没有关联；）

# html - reddit 如何去除当前标签页底部的边框？

> ID：12450543
> 
> 赞同：1
> 
> 时间：2012-09-16T20:39:02.393
> 
> 标签：html, css

这是一个屏幕截图。这可能是微不足道的，但我很难过。

![这是一个屏幕截图](../Images/e4691a7e098cdb0b4a0461fc597c7335.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:00:14.910

我的建议是首先使用浏览器开发工具检查事物，并且有很多教程与此类功能相关。

我为您创建了一个示例，可能会对您有所帮助。像这样写：

```
ul{
    border-bottom:1px solid red;
}
ul:after{
    content:'';
    clear:both;
    display:block;
}
li{
    float:left;
    height:50px;
    line-height:50px;
    padding:0 10px;
    border:1px solid red;
    margin-bottom:-1px;
}
li.active{
    border-bottom:1px solid #fff;
} 
```

检查这个[http://jsfiddle.net/Tj3LH/](http://jsfiddle.net/Tj3LH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:48:36.247

实际上，**没有**边界 - 它只是你看不到的一个......

你有集成开发者工具的浏览器吗？;-) 例如，如果您右键单击某个元素，Safari 或 Chrome 会在上下文菜单中提供“检查元素”这个很酷的功能 - 瞧：这就是解决方案！

![](../Images/468d804bc573899716d9f0945db4fe38.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T09:12:30.393

您可以通过 css 轻松做到这一点

```
.tabmenu li.selected a { // this the tab menu item replace it with your tab menu item name
 color: orangeRed;
 background-color: white;
 border: 1px solid #5F99CF;// this is the color of box you need to specify
 border-bottom: 1px solid white;  // this the color of bottom border, in reddit case it is white , you can replace it with what color you have in your website has to look like it is hidden
 z-index: 100;
} 
```

希望这可以帮助你

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T09:21:36.733

这个怎么样：

```
<div style="border-bottom:1px solid black;">
    <div style="float:left;">Tab 1</div>
    <div style="float:left;border:1px solid black;border-bottom:1px solid white;margin-bottom: -1px;">Tab 1</div>
    <div style="float:left;">Tab 1</div>
    <br style="clear:both" />
</div> 
```

[**这是一个链接**](http://jsfiddle.net/cTegS/)

长话短说：`border-bottom:1px solid white;margin-bottom:-1px;`成功了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T20:54:25.867

这只是标签式导航。

[粉碎芒果](http://www.smashingmagazine.com/2009/04/06/showcase-of-well-designed-tabbed-navigation/)

[一个例子](http://blixt.org/articles/tabbed-navigation-using-css#section=introduction)

[另一个例子](http://nontroppo.org/test/tab1.html)

[标签生成器](http://www.tabsgenerator.com/)

如果您想将它用于您的网站，则需要对其进行自定义，并且在我们看到您的 html/css 之前，任何答案都是不完整的。

# vim - 在 Vim 中禁用 _all_ 颜色高亮

> ID：12450545
> 
> 赞同：1
> 
> 时间：2012-09-16T20:39:03.543
> 
> 标签：vim

我需要关闭文本文件中的所有突出显示。

这是我尝试过的，但无济于事：

```
:syntax off
:set nohlsearch
:set syntax=
:match
:set noshowmatch
:set t_Co=0 
```

一些“调试”命令的输出：

```
:set syntax --> shows "syntax="
:syntax --> No Syntax items defined for this buffer 
```

set t_Co=0 保留高光，只是将整个屏幕切换为黑白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T23:46:19.260

我需要禁用拼写检查，这是从我看不到的位置启用的。

# java - System.out.format 如何防止死锁？

> ID：12450547
> 
> 赞同：1
> 
> 时间：2012-09-16T20:39:03.090
> 
> 标签：java, concurrency, deadlock

我发现在经典的[Java 死锁教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html)中包含对 System.out.format 的调用将防止死锁发生，我不知道为什么。

下面的代码和教程的一样，只是增加`main`了`System.out.format("Hi, I'm %s...no deadlock for you!\n\n", alphonse.getName());`

```
public class Deadlock {
    static class Friend {
        private final String name;

        public Friend(String name) {
            this.name = name;
        }

        public String getName() {
            return this.name;
        }

        public synchronized void bow(Friend bower) {
            System.out.format("%s: %s has bowed to me!\n",
                    this.name, bower.getName());
            bower.bowBack(this);
        }

        public synchronized void bowBack(Friend bower) {
            System.out.format("%s: %s has bowed back to me!\n",
                    this.name, bower.getName());
        }
    }

    public static void main(String[] args) throws InterruptedException {
        final Friend alphonse = new Friend("Alphonse");
        final Friend gaston = new Friend("Gaston");

        System.out.format("Hi, I'm %s...no deadlock for you!\n\n", alphonse.getName());

        new Thread(new Runnable() {
            public void run() { alphonse.bow(gaston); }
        }).start();

        new Thread(new Runnable() {
            public void run() { gaston.bow(alphonse); }
        }).start();
    }
} 
```

这是输出：

```
Hi, I'm Alphonse...no deadlock for you!

Alphonse: Gaston has bowed to me!
Gaston: Alphonse has bowed back to me!
Gaston: Alphonse has bowed to me!
Alphonse: Gaston has bowed back to me! 
```

删除有问题的行会导致通常的死锁：

```
Alphonse: Gaston has bowed to me!
Gaston: Alphonse has bowed to me!
... deadlock ... 
```

对 System.out.format 的调用是否以某种方式改变了线程获取对象内部锁的方式？

更新：

只需更改我在代码中启动线程的位置，我就能让系统再次死锁：

```
public static void main(String[] args) throws InterruptedException {
    final Friend alphonse = new Friend("Alphonse");
    final Friend gaston = new Friend("Gaston");

    System.out.format("Hi, I'm %s...no deadlock for you!\n\n", alphonse.getName());

    Thread t1 = new Thread(new Runnable() {
        public void run() { alphonse.bow(gaston); }
    });

    Thread t2 = new Thread(new Runnable() {
        public void run() { gaston.bow(alphonse); }
    });

    t1.start();
    t2.start();
} 
```

这就引出了一个问题，即我们如何才能更深入地了解线程调度程序的行为，但我将把它留到另一天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T20:53:10.413

您并没有真正消除*死锁*，而是（由于某些内部 JVM 原因）更改了线程的计时，以便其中一个线程在其他调用`bowBack()` *之前*`bow()`进入。只需输入`bow`: `sleep(1000)`，您的僵局就会重新出现。

请注意，死锁并不*总是*发生，只有当线程处于*幸运*时间时才会发生。`bow`在这种情况下，当两个线程都进入并且在它们中的任何一个调用之前，就会发生死锁`bowBack`

...并且*“一些内部 JVM 原因”*可以是以下内容：

在您的情况下，实际上有三个线程：一个执行*main*、*t1*和*t2*。*放置print*隐藏死锁的原因可能是线程调度程序决定`main`仍有工作要做，即刷新 io 缓冲区，因此在启动*t1*和启动 t2 之前让*main*继续。如果您在双核 cpu 上，则只会运行，但会等待，因为这是一个缓慢的操作。上下文切换需要更多时间，并且*t1*会在*t2之前完成**`main``t1``t2``print`**可以开始......所以不会发生死锁。但这并不意味着如果再次运行程序就不会发生死锁。***

 ***如果你想玩，`queue`在那个队列中创建一个并推送令牌（线程名），然后`join`你的线程在 main.js 中。完成后，打印队列内容，您可以观察线程的时序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:45:19.977

`format()`和写入控制台通常是昂贵的操作。我猜它的执行正在改变线程启动的时间，因此第二个线程启动得太晚以至于它不会干扰第一个线程。***

# objective-c - Xcode图像太大了需要使用的png图像的大小不是很大

> ID：12450551
> 
> 赞同：0
> 
> 时间：2012-09-16T20:39:32.877
> 
> 标签：objective-c, xcode, arrays, uiimageview

```
UIImageView *image = [[UIImageView alloc] initWithFrame:self.view.bounds];
        image.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed:@"BluePin.png"],
                                 [UIImage imageNamed:@"GreenPin.png"],
                                 [UIImage imageNamed:@"RedPin.png"],
                                 [UIImage imageNamed:@"YellowPin.png"],
                                 nil];

        image.animationRepeatCount = 0;
        image.animationDuration = 1.0;
        [image startAnimating];

        [image setFrame: CGRectMake(point.x-(image.bounds.size.width/2), point.y-            (image.bounds.size.width/2), image.bounds.size.width, image.bounds.size.height)];
        [self.view addSubview: image];

        [UIView animateWithDuration:2.0 delay:1.0    options:UIViewAnimationOptionCurveLinear  animations:^{
            [image setAlpha:0.0];
        } completion:^(BOOL finished) {
            [image removeFromSuperview];

        }]; 
```

图像出来的太大了，它们需要保持原始大小基本上会在用户触摸的地方创建图像动画，并在 x 秒后消失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:06:46.140

您希望图像视图与其包含的图像具有相同的尺寸，对吗？

```
UIImage *image = [UIImage imageName:@"BluePin.png"];
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,image.size.width,image.size.height]; 
```

请注意，我使用与您不同的变量命名方案来区分图像和图像视图。

# wordpress - WordPress 全局帖子查询和自定义元不起作用

> ID：12450552
> 
> 赞同：0
> 
> 时间：2012-09-16T20:39:40.807
> 
> 标签：wordpress

我有一个全局帖子查询正在运行，但由于某种原因，我的自定义元没有被输出。当我尝试在典型的 WordPress 循环中调用它时，它可以工作，但在我下面的代码中却不行。有什么理由会这样吗？一直想弄明白一个小时了......

```
<?php global $post; $cntr = 0; $myposts = get_posts('&post_type=go-deeper&posts_per_page=12'); 
foreach($myposts as $post) : setup_postdata($post);?>
<li class="<?php echo "slide_" . $cntr; ?>"><a href="<?php echo get_post_meta($post->ID, 'll_deeper_link', true); ?>"><?php the_post_thumbnail('full'); ?></a></li>
<?php $cntr++; ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:03:07.847

我刚刚重新编写了查询，它现在可以工作了：

```
 <?php if(have_posts()): $cntr = 0;?>
    <?php query_posts('&post_type=go-deeper&posts_per_page=12');?>
    <?php while(have_posts()):the_post();?>
    <?php $deeper_link = get_post_meta( get_the_ID(), 'll_deeper_link', true ); ?>
    <li class="<?php echo "slide_" . $cntr; ?>">
      <a href="<?php echo $deeper_link;?>"><?php the_post_thumbnail('full'); ?></a>
    </li>
    <?php $cntr++; ?>
    <?php endwhile;?>
    <?php wp_reset_query(); ?>
    <?php endif;?> 
```

# java - javafx-2 tableview 实现自定义列调整大小策略

> ID：12450555
> 
> 赞同：0
> 
> 时间：2012-09-16T20:39:58.433
> 
> 标签：java, tableview, javafx-2

根据我的经验，如果 TableView 包含一些固定宽度的列，则 CONSTRAINED_RESIZE_POLICY 会被破坏，除非我在这里做错了什么：

```
public class JavaFX2Sandbox extends Application
{
    public static void main(String[] args)
    {
        Application.launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception
    {
        StackPane root = new StackPane();
        root.autosize();
        Scene scene = new Scene(root);

        stage.setScene(scene);
        stage.show();

        configureTable(root);
    }

    public static class Person
    {
        public Person(String firstName, String lastName)
        {
            this.fixedValue = "Dr.";
            this.firstName = firstName;
            this.lastName = lastName;
        }
        public String fixedValue;
        public String firstName;
        public String  lastName;
    }

    private static class CellValueFactory<T> implements Callback<TableColumn.CellDataFeatures<T, Object>, ObservableValue<Object>>
    {
        private String mFieldName;

        public CellValueFactory(String fieldName)
        {
            mFieldName = fieldName;
        }

        @Override
        public ObservableValue call(TableColumn.CellDataFeatures<T, Object> p)
        {
            try
            {
                if (p == null)
                {
                    return new SimpleObjectProperty(null);
                }
                Object o = p.getValue();
                if (o == null)
                {
                    return new SimpleObjectProperty(null);
                }
                Object fieldVal = o.getClass().getField(mFieldName).get(o);
                if (fieldVal == null)
                {
                    return new SimpleObjectProperty(null);
                }

                return new SimpleObjectProperty(fieldVal);
            }
            catch (Exception ex)
            {
                return new SimpleObjectProperty(ex);
            }
        }
    }
    private void configureTable(StackPane root)
    {

        TableView<Person> table = new TableView<>();
        table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);

        ArrayList<Person> teamMembers = new ArrayList<>();
        teamMembers.add(new Person("John", "Big"));
        teamMembers.add(new Person("Frank", "Small"));

        TableColumn col0 = new TableColumn("fixed-width");
        col0.setResizable(false);
        col0.setCellValueFactory(new CellValueFactory("fixedValue"));
        TableColumn col1 = new TableColumn("First Name");
        col1.setCellValueFactory(new CellValueFactory("firstName"));
        TableColumn col2 = new TableColumn("Last Name");
        col2.setCellValueFactory(new CellValueFactory("lastName"));
        table.getColumns().setAll(col0, col1, col2);
        table.setItems(FXCollections.observableList(teamMembers));

        root.getChildren().add(table);
    }
} 
```

所以我开始实施我自己的调整大小策略，它的行为与 CONSTRAINED_RESIZE_POLICY 略有不同，但我更喜欢我的 :-)。除了列的宽度之和不等于 TableView 的宽度之外，一切都可以。

这是我的调整大小策略类的实现：

```
static class ColumnResizePolicy implements Callback<TableView.ResizeFeatures, Boolean>
{
    double mTVWidth;

    @Override
    public Boolean call(ResizeFeatures arg0)
    {
        TableView tv = arg0.getTable();
        Double tvWidth = tv.widthProperty().getValue();
        if (tvWidth == null || tvWidth <= 0.0)
        {
            return false;
        }

        if (mTVWidth != tvWidth && arg0.getColumn() == null)
        {
            mTVWidth = tvWidth;

            int numColsToSize = 0;
            double fixedColumnsWidths = 0;
            for (TableColumn col : new ArrayList<TableColumn>(tv.getColumns()))
            {
                if (col.isResizable() && col.isVisible())
                {
                    ++numColsToSize;
                }
                else if (col.isVisible())
                {
                    fixedColumnsWidths += col.getWidth();
                }
            }

            if (numColsToSize == 0)
                return TableView.UNCONSTRAINED_RESIZE_POLICY.call(arg0);

            TableColumn lastCol = null;
            for (TableColumn col : new ArrayList<TableColumn>(tv.getColumns()))
            {
                if (col.isResizable() && col.isVisible())
                {
                    double newWidth = (tvWidth - fixedColumnsWidths) / numColsToSize;
                    col.setPrefWidth(newWidth);
                    lastCol = col;
                }
            }
            if (lastCol != null)
            {
                lastCol.setPrefWidth(lastCol.getPrefWidth()-2);
            }

            return true;
        }
        else
        {
            return TableView.UNCONSTRAINED_RESIZE_POLICY.call(arg0);
        }
    }
} 
```

我的问题（讽刺的是，在这篇长篇文章之后）是关于这一行中的第 2 位：

```
lastCol.setPrefWidth(lastCol.getPrefWidth()-2); 
```

我假设表格宽度会返回包括边框在内的外部宽度，因此存在差异，但是我如何获得内部宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:51:52.707

您是否尝试过获取占位符节点的宽度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:45:49.013

接下来试试：

```
 double borderWidth = table.getBoundsInLocal().getWidth() - table.getWidth() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T04:17:35.387

我也有同样的问题[https://community.oracle.com/message/12334734#12334734](https://community.oracle.com/message/12334734#12334734) 而`implementing custom column resize policy`你们这些人帮了我。谢谢！

你的代码。

```
if (col.isResizable() && col.isVisible()) {
    double newWidth = (tvWidth - fixedColumnsWidths) / numColsToSize;
    col.setPrefWidth(newWidth);
    lastCol = col;
} 
```

我改为

```
if (col.isResizable() && col.isVisible()) {
    double newWidth = (tvWidth - fixedColumnsWidths)*col.getPercentWidth();
    col.setPrefWidth(newWidth);
    lastCol = col;
} 
```

`col`是_

```
public class PTableColumn<S, T> extends javafx.scene.control.TableColumn<S, T> 
```

并且`getPercentWidth`是

```
private DoubleProperty percentWidth = new SimpleDoubleProperty(1); 
```

# php - 防止直接访问网站的某些目录的最佳方法是什么？

> ID：12450558
> 
> 赞同：5
> 
> 时间：2012-09-16T20:40:16.640
> 
> 标签：php, .htaccess, security

防止直接访问网站的某些目录的最佳方法是什么？

`.htaccess`1-在我们要保护的每个目录中创建并放置一个文件，然后在其中放置下一行：

```
Deny from all 
```

`index.php`2-在我们要保护的每个目录中创建并放置一个文件，并仅在其中放置下一行代码（这将重定向到网站的主页）：

```
<?php header("Location: http://" . $_SERVER['HTTP_HOST']); ?> 
```

3- 别的东西（它是什么？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T21:14:46.297

正如评论中提到的，最安全的方法是将内容或目录放在 Web 服务器的公共文档根目录之外。这将确保即使删除 .htaccess 文件或服务器不允许`.htaccess`覆盖，也不会提供内容。

要确定您的文档根目录，您可以回显 PHP`$_SERVER['DOCUMENT_ROOT']`变量。因此，如果您的根目录是`/var/www/html`，您可以创建一个文件夹`/var/www/protected_folder`，而 Apache（或其他 Web 服务器）将永远不会为它提供服务（除非 http.conf 文件被更改以修改文档根文件夹）。

如果该文件夹必须位于文档根目录中，那么使用`.htaccess`文件`DENY`或重定向是一个不错的选择。

正如 TerryE 所提到的，您还可以使用操作系统级别的文件权限来拒绝 Apache 用户访问文件夹（例如，将不同的用户设置为所有者，然后将文件夹的权限设置`700`为 ）。如果他们尝试访问该文件夹，他们将收到您可能不想显示的 403 禁止错误（尽管您可以在`http.conf`或中设置自定义 403 错误处理程序`htaccess`）。具体取决于您要执行的操作，您可能需要这种方法，因为它还可以让您阻止脚本访问（即 PHP`include()`等）如果你愿意，因为 PHP 默认在 webserver 用户下运行。这种方法的主要缺点是文件权限在迁移过程中通常不会保留（如果它们没有正确完成），并且有时在使用递归标志更改父文件夹权限时会无意中重置文件权限（而不太可能有人会无意中将文件夹移动到文档根目录）。

# php - 将 php 集成到 html

> ID：12450565
> 
> 赞同：-3
> 
> 时间：2012-09-16T20:42:18.587
> 
> 标签：php, javascript, html

有两个问题：我如何将 php 脚本集成到 html 文档中：

1.  应该在文档启动时做他的工作并返回一个可以由javascript处理的整数吗？

2.  单击链接并使用链接 ID 后应该做他的工作吗？

让我们创建一个示例项目： 1\. php-name: start.php 2\. php-name: click.php

html代码：

```
<!doctype html>
<html>
<head>
    <title>test</title>
     <script type="text/javascript">
        $(document).ready(function(){

        });
</head>
<body>
        <p><a class="links" id="l1" href="http://www.google.com/">Boerse</a></p>
        <p><a class="links" id="l2" href="http://www.google.ch/">My Gully</a></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:53:12.270

**1.**使用 javascript，您可以使用 jquery 执行一个`POST HTTP Request`简单地发布类似“BeenSent”之类的数据 = 1 的内容。然后 php 检查是否该 isset。如果是，则将变量作为 ajax() 方法末尾的函数发送回 jquery。

这是一个例子

```
 $.ajax({
        url: "getInt.php",
        type: "POST",
        data: {BeenSent: 1},
        cache: false,
        successCondition: function(result) {

        alert("getInt.php echo'd this out on it's file when I sent the request. The content it echo'd back was: " + result);

        }
}); 
```

* * *

**2.** 对于链接，您可以简单地执行一个`GET`HTTP 请求，或者您可以简单地在链接中定义元素的 id ......就像这样......

```
<p><a class="links" id="l1" href="http://www.example.com/?elementid=l1">Hey! I'm a link!</a></p> 
```

* * *

希望这有帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:59:55.583

对于您的第一个问题：ajax 调用可能是最好的方法，但您也可以做一种丑陋的解决方案。让 php 函数将值回显到隐藏元素，然后从 javascript 中的 document.ready 函数中获取该元素内的值。

```
 function GetInteger() {
     return 10;
}

echo '<span style="display:none" id="test">' . GetInteger() . '</span>';

$(document).ready(function(){
     var theValue = $("#test").html();
} 
```

对于第二个问题，我将创建使用所需值作为参数进行 ajax 调用的 onclick 事件，或者将 id 作为 get 参数添加到查询字符串。

# objective-c - 在我自己的类中使用目标 c 中的 alloc

> ID：12450566
> 
> 赞同：0
> 
> 时间：2012-09-16T20:42:26.857
> 
> 标签：objective-c, alloc

当我`alloc`在我创建的类上使用时（例如在具有底层`NSMutableArray`对象的堆栈类上）它会将 alloc 应用于它的所有属性吗？还是我必须重写该`alloc`方法以确保`alloc`在属性上调用 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:47:28.947

不会为您分配所有属性。
但是，不要为此覆盖 alloc，覆盖 init 以分配和初始化属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:48:10.863

您不需要重写 alloc 方法，属性将为您初始化为它们的默认值，即对象为 nil，原始类型为默认值。

所以你需要做的就是：

```
[[myObject alloc] init]; or the shortcut [myObject new]; 
```

您不能覆盖 alloc 方法，所有属性都将设置为其默认值。但是，您可以覆盖 init，将初始值设置为属性（而不是它们的默认值）：

```
- (id) init {
   self = [super init];
     if (self) {
       //initialize some properties
     }
   return self;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:44:31.147

通常，不会为您分配属性。但是，您在 IB 中添加并设置为网点的网点将自动创建。

# asp.net-mvc-3 - nopCommerce 插入实体失败

> ID：12450569
> 
> 赞同：2
> 
> 时间：2012-09-16T20:43:04.960
> 
> 标签：asp.net-mvc-3, entity-framework, nopcommerce

我正在为类别创建从 XML 函数导入。首先，使用 XDocument，我创建了要添加的类别列表。我关闭了 Categories 表中 ID 的 isIdentity 选项，因为我打算使用 XML 中的 ID。

XML 示例：

```
<cat>
<id>17</id>
<name>Category name</name>
<parent_id>0</parent_id>
</cat> 
```

然后，我编写了方法，该方法尝试通过 ID 获取类别并更新或插入新的：

```
var category = _categoryService.GetCategoryById(Id);
        if (category != null)
        {
            category.Name = model.Name;
            category.ParentCategoryId = model.ParentCategoryId;
            category.UpdatedOnUtc = DateTime.UtcNow;
            category.Published = true;
            category.Deleted = false;

            _categoryService.UpdateCategory(category);
        }
        else
        {
            category = new Core.Domain.Catalog.Category();

            category.Id = model.Id;
            category.ParentCategoryId = model.ParentCategoryId;
            category.Name = model.Name;
            category.UpdatedOnUtc = DateTime.UtcNow;
            category.CreatedOnUtc = DateTime.UtcNow;
            category.Published = true;
            category.Deleted = false;

            _categoryService.InsertCategory(category);
        } 
```

然后是最奇怪的 - 应用程序抛出异常：无法将值 NULL 插入列“Id”，表“nopCommerce.dbo.Category”；列不允许空值。插入失败。该语句已终止。但即使在调试器中，类别 ID 也不为空.. 寻求帮助！提前致谢！

更新： InsertCategory 是标准的 nopCommerce 方法：

```
 /// <summary>
    /// Inserts category
    /// </summary>
    /// <param name="category">Category</param>
    public virtual void InsertCategory(Category category)
    {
        if (category == null)
            throw new ArgumentNullException("category");

        _categoryRepository.Insert(category);

        //cache
        _cacheManager.RemoveByPattern(CATEGORIES_PATTERN_KEY);
        _cacheManager.RemoveByPattern(PRODUCTCATEGORIES_PATTERN_KEY);

        //event notification
        _eventPublisher.EntityInserted(category);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:04:21.837

我刚刚发现，我需要更改映射类和数据库，从 ID 中删除自动编号选项。那是另一个痛苦，但解决方案是：

而不是`this.HasKey(c=>c.Id)`使用：

```
this.Property(c=>c.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T23:49:09.470

您的代码似乎很好，这里显示似乎还可以。我会说您的 InsertCategory 方法有问题，该方法很可能没有使用 id。这只是一个猜测......如果这不是答案，也许你可以让我们知道你在它下面有什么。

# c++ - 需要使用 linux ubuntu 从 .cpp 查找上次启动的时间吗？

> ID：12450576
> 
> 赞同：3
> 
> 时间：2012-09-16T20:43:44.343
> 
> 标签：c++, linux, time

所以我对 C++ 和 Linux 非常陌生，我需要从 C++ 文件中找到上次启动的时间。我一直在使用 /proc 文件来获取其他信息。**我不是在寻找起床时间。**

我试图找到一种方法来从我的 .cpp 文件中执行“上次重新启动”命令，但我无法弄清楚这一点。这可能吗，或者有没有办法找到当前时间，这样我就可以从当前时间中减去时间？

很失落...

顺便说一句，这是家庭作业，但我已经完成了所有其他部分，我只是忙于这一小部分。

另外，我已经凝视了几个小时，只是找不到方法……我是不是误解了某些东西，而且它比我做的更简单？

只需要**上次系统启动的时间**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T20:48:22.360

[使用time (2)](http://linux.die.net/man/2/time)获取当前时间并减去从[sysinfo (2)](http://linux.die.net/man/2/sysinfo)获得的自启动以来的秒数。

如果您希望结果具有良好、可显示的格式，请使用[ctime (3)](http://linux.die.net/man/3/ctime)将其转换为日期/时间字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:53:44.247

/var/log/syslog 不完美，因为它只能工作 5 周，但我认为它足以完成我的任务，谢谢大家！

# php - JavaScript 到 PHP 数组

> ID：12450577
> 
> 赞同：0
> 
> 时间：2012-09-16T20:43:45.710
> 
> 标签：php, javascript

假设我有这个：

```
var achievementData = {
    "achievements": { 
        0: {
            "id": 0,
            "title": "All Around Submitter",
            "description": "Submit and approved one piece of content in all six areas.",
            "xp": 500,
            "level_req": 3
        }, 
        1: {
            "id": 1,
            "title": "Worldwide Photographer",
            "description": "Submit and approved one piece of image content in all six areas.",
            "xp": 1200,
            "level_req": 1
        }, 
        2: {
            "id": 2,
            "title": "Super Submitter",
            "description": "Get approved 10 players and 2 clubs in one week or less.",
            "xp": 2500,
            "level_req": 5
        }, 

        }
}; 
```

那是 JavaScript，那我怎么把它变成 PHP 呢？我尝试更改括号并查找有关 PHP 数组的信息，但它似乎只是简单的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:47:17.650

您应该使用 json_decode() 将该字符串转换为 php 中有用的内容，将第二个参数设置为 true 它将为您提供一个关联数组。

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:52:35.413

如果您想要/需要手动执行此操作：

```
<?php

$achievementData = new array();

$achievementData[] = new array('id' => 0, 'title' => 'abc', 'description' => 'abc', 'xp' => 500, 'level_req' => 3);

// repeat the same for the other records

?> 
```

# android - 如何从android mediaplayer分离/释放surfaceview

> ID：12450584
> 
> 赞同：6
> 
> 时间：2012-09-16T20:45:09.740
> 
> 标签：android, surfaceview, android-mediaplayer

我有一个在后台服务中运行的媒体播放器实例。在我的主要活动中，我有一个表面视图。

当活动启动并创建表面视图时，我绑定到服务并将媒体播放器的显示表面设置为我的主要活动的表面视图。我这样做`mPlayer.setSurface(sv.getHolder().getSurface());`

视频已显示，到目前为止一切正常。当我的surfaceview被销毁时，在`surfaceDestroyed()`回调中我尝试通过调用将surfaceview与媒体播放器分离`mPlayer.setSurface(null);`。问题是，当我这样做时，我从媒体播放器收到错误（错误代码 1）。

所以我的问题是，在我设置了 MediaPlayer 对象并设置了 Surfaceview 之后，`mPlayer.setSurface(sv.getHolder().getSurface());`有没有办法在不停止或重新初始化 mediaplayer 对象的情况下释放或分离该surfaceview？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T05:22:43.913

当用户离开时，您可以避免暂停播放。这将帮助您继续播放。但是还有另一个问题：当您从窗口分离的活动/片段`SurfaceView`被破坏时。`SurfaceView`这意味着您必须使用重新创建的用户返回您的应用程序的实例来重新初始化媒体播放器。

# path - 如何在 Ember 的路径中使用索引

> ID：12450586
> 
> 赞同：1
> 
> 时间：2012-09-16T20:45:14.280
> 
> 标签：path, ember.js

我正在尝试将文本字段绑定到对象中的值，如下所示：

```
{{#each type in controller.currentTypes}}
  <label>
    {{type.name}}
    {{view Ember.TextField valueBinding="controller.contextRemarks[type.id]"}}
  </label>
{{/each}} 
```

`controller.currentTypes`并且`controller.contextRemarks`仅以松散的一对多方式相关。

```
currentTypes = [{id: 1, name: 'Type name 1'}] 
```

我不知道我是否正在实施反模式，但我认为没有动态索引我就无法做到，而且 Ember 似乎不允许我在路径中使用索引。

我尝试使用额外的视图或助手来解决这个问题，但一直卡住。有没有解决这个问题的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:54:31.350

所以我通过在控制器上添加一个计算属性并将生成的数组存储在一个私有属性中来解决这个问题：

```
App.MyController = Ember.Controller.extend({
  remarks: function() {
    var remarks = this.get('currentTypes') || [];
      this._remarks = remarks.map(function(remark) {
        return {
          id: remark.id,
          name: remark.name,
          value: ''
        };
      });

      return this._remarks;
    }.property('currentTypes')
  });
} 
```

视图现在看起来像这样：

```
{{#each remarks}}
  <label>
    {{name}}
    {{view Ember.TextField valueBinding="value"}}
  </label>
{{/each}} 
```

现在我可以访问 _remarks 来查找用户的输入，这是我能想到的最类似 ember 的解决方案，并且可能是“正确的解决方案。;)

# java - 要使用 SSL，我的 JAR 文件应该被签名吗？

> ID：12450587
> 
> 赞同：1
> 
> 时间：2012-09-16T20:45:15.767
> 
> 标签：java, ssl, jar, applet, digital-signature

我有一个 SSL 小程序，我想连接到 Cpp 服务器。我是否需要对 JAR 进行自签名？另外，我是否绝对需要设置 CA 才能做到这一点？

过去我在信托商店有过一些运气。我是否需要信任/密钥存储才能使其正常工作？如果是这样，你能不能给我一个关于如何做的像样的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:58:54.773

签名和未签名的小程序之间的区别在于，未签名的小程序在安全沙箱中运行，并且它们的功能受到限制。可以与加载它们的服务器建立 http 连接。无法与其他服务器建立 http 连接。

因此，如果您将小程序托管在要连接的服务器上，则无需对小程序进行签名。

如果您希望服务器和小程序之间的连接安全，则必须使用 SSL。

# javascript - Jade - 根据环境设置基本目录

> ID：12450590
> 
> 赞同：8
> 
> 时间：2012-09-16T20:45:42.790
> 
> 标签：javascript, node.js, pug

我有一个玉页面，我做的第一件事是设置一个变量，该变量确定所有链接使用的基本目录。

```
if ! base
  base = '/klog/'
  // base = '/website-clear/klog/' 
```

这其实是针对一个github页面的，所以每次渲染页面到html的时候，都要记得改base，然后再改回来进行本地编辑。

必须有更好的方法来做到这一点。目前我正在考虑在本地副本中有一个未跟踪的文件，其中包括基础文件——但这真的有必要吗？

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-13T06:36:36.710

一个更强大的解决方案是检查环境变量。已`NODE_ENV=production`在生产服务器上设置，请勿在开发服务器上设置。

然后在您的翡翠模板中，如果环境变量存在，则呈现不同的路径。

```
if 'production' == process.env.NODE_ENV
    - base = '/website-clear/klog/' 
```

或者

```
- base = ( 'production' == process.env.NODE_ENV ? '/website-clear/klog/' : '/klog' ); 
```

# r - 获取因子频率的条形图

> ID：12450594
> 
> 赞同：0
> 
> 时间：2012-09-16T20:46:34.193
> 
> 标签：r, boxplot

因此，我尝试遵循[Get a histogram plot of factor frequency (summary)](https://stackoverflow.com/questions/5804226/get-a-histogram-plot-of-factor-frequencies-summary)帖子中的建议，但我认为问题在于我正在尝试使用包含字符串的行来定义我的因子（而不是生成一个使用rep())。我不知道这样做是否可以，但显然我做错了什么。知道发生了什么吗？非常感谢！

我的数据：

```
data<-structure(list(V1 = structure(c(2L, 1L), .Label = c("593", "QnWeight_initial"
), class = "factor"), V2 = structure(c(2L, 1L), .Label = c("482", 
"Left_Leg"), class = "factor"), V3 = structure(c(2L, 1L), .Label = c("474", 
"Left_Antenna"), class = "factor"), V4 = structure(c(2L, 1L), .Label = c("566", 
"Head"), class = "factor"), V5 = structure(c(2L, 1L), .Label = c("51", 
"Right_Antenna"), class = "factor"), V6 = structure(c(2L, 1L), .Label = c("49", 
"Right_Leg"), class = "factor"), V7 = structure(c(2L, 1L), .Label = c("49", 
"Left_Leg_Remeasure"), class = "factor"), V8 = structure(c(2L, 
1L), .Label = c("46", "Left_Antenna_Remeasure"), class = "factor"), 
    V9 = structure(c(2L, 1L), .Label = c("47", "Head_Remeasure"
    ), class = "factor"), V10 = structure(c(2L, 1L), .Label = c("230", 
    "Days_wrkr_eclosion"), class = "factor"), V11 = structure(c(2L, 
    1L), .Label = c("237", "Qn_Weight_Loss"), class = "factor"), 
    V12 = structure(c(2L, 1L), .Label = c("81", "Growth_all"), class = "factor"), 
    V13 = structure(c(2L, 1L), .Label = c("79", "Growth_1_2"), class = "factor"), 
    V14 = structure(c(2L, 1L), .Label = c("62", "Growth_1_3"), class = "factor"), 
    V15 = structure(c(2L, 1L), .Label = c("60", "Growth_2_3"), class = "factor"), 
    V16 = structure(c(2L, 1L), .Label = c("535", "V1"), class = "factor"), 
    V17 = structure(c(2L, 1L), .Label = c("535", "V2"), class = "factor"), 
    V18 = structure(c(2L, 1L), .Label = c("535", "V3"), class = "factor")), .Names = c("V1", 
"V2", "V3", "V4", "V5", "V6", "V7", "V8", "V9", "V10", "V11", 
"V12", "V13", "V14", "V15", "V16", "V17", "V18"), class = "data.frame", row.names = c(NA, 
-2L)) 
```

我的代码：

```
dat<-data.frame(fac=data[1,], freqs=data[2,])

print(dat)
str(dat)
barplot(dat, main="Sample Sizes of Various Fitness Traits") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T00:34:49.343

我不确定这是否是您所追求的，并且可能有更好的方法（我使用 ggplot2 所以对 base 不是很熟悉）。这是一种方法，但您必须使用`rep`and `table`：

```
dat<-data.frame(fac=unlist(data[1,, drop=FALSE]), freqs=unlist(data[2,, drop=FALSE]))
barplot(table(rep(as.character(dat[, 1]), dat[, 2])), 
    main="Sample Sizes of Various Fitness Traits") 
```

# ios - 是否可以在 2 个 iOS 设备之间建立套接字连接

> ID：12450597
> 
> 赞同：3
> 
> 时间：2012-09-16T20:46:53.743
> 
> 标签：ios, cocoaasyncsocket

是否可以在连接到同一网络（无网络）的 2 个 iOS 设备之间建立套接字连接？

如果可能的话..（CocoaAsyncSocket 项目）对我有用吗？

我只想从**设备 A**向**设备 B 发送一条消息，将应用程序置于后台**.. 当**设备 B**收到消息时，应显示通知以将应用程序返回到前台。

它不适用于 App Store，所以我不在乎 Apple 是否会因为这种行为而拒绝该应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:50:43.933

**是**的，你可以做到，**是**的，`CocoaAsyncSocket`会很有用。如果您不必担心运营商网络的防火墙和过滤器，那么您当然应该能够构建在两个 iOS 设备上运行的客户端-服务器应用程序。一个打开*服务器*套接字进行监听，另一个（*客户端*）通过 Wi-Fi 网络连接。

尝试在 Google 上搜索（例如`"CocoaAsyncSocket iPhone iOS site:stackoverflow.com"`）或直接在 Stack Overflow 上搜索。

这里[有人似乎已经完成了这个](https://stackoverflow.com/questions/7968548/cocoaasyncsocket-doesnt-work-after-being-in-background)

[另一个链接](https://stackoverflow.com/questions/10332084/starting-with-cocoaasyncsocket)

[还有来自 Robbie Hanson 本人的帖子，请您参考 github 存储库中的 EchoServer 项目](https://groups.google.com/d/msg/cocoaasyncsocket/bijIRFMnOTE/exSx7d6SSp8J)

[回声服务器项目](https://github.com/robbiehanson/CocoaAsyncSocket/tree/master/RunLoop/Xcode/EchoServer)

*您可能必须为服务器*设备使用**静态**IP 地址（我不确定您对 Wi-Fi 网络的配置有多少控制权），或者使用其他机制让两个设备相互发现。

# node.js - 如何路由 restify 调用写入另一个文件的函数

> ID：12450599
> 
> 赞同：1
> 
> 时间：2012-09-16T20:47:22.057
> 
> 标签：node.js, mongoose, restify

我有一个启动 nodejs/restify 服务器的文件，当调用到达我的服务器时，我这样做：

```
apiserver.post('/:param',call1);

function call1(req, res, next) {
//treatment
} 
```

但我想将我的函数放在一个名为functions.js的脚本中，问题是当我这样做时

```
var functions = require('./functions')
apiserver.post('/:param', functions.call1(req,res,next)); 
```

它说 req、res 和 next 是未定义的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:52:40.527

问题是当你想要做的是将函数本身作为参数传递时，你正在调用`functions.call1`你的调用：`apiserver.post`

```
apiserver.post('/:param', functions.call1); 
```

# iphone - iPhone 5 闪屏显示不正确 - Phonegap

> ID：12450603
> 
> 赞同：21
> 
> 时间：2012-09-16T20:47:36.597
> 
> 标签：iphone, ios, cordova, splash-screen

我正在更新我的 PhoneGap iOS 应用程序以使其与 iPhone 5 兼容。

我的应用程序初始化后，我手动隐藏了启动画面。

模拟 iPhone 5 时：当应用程序启动时，它会显示正确的初始屏幕 (Default-568h@2x.png)（此处为“5”），但很快将其隐藏，而是显示 iPhone 4 初始屏幕（此处为“4”） . 4 没有覆盖整个应用程序，因此显示了应用程序初始化的顶部和底部栏。

我不完全确定它是如何工作的，但我可以想到两种可能的情况：1）两个图像同时显示，但由于某种原因，5 自动隐藏，而 4 等待来自应用程序的调用隐藏。2）在某些时候，当禁用手动隐藏启动画面时，phonegap 会切换“真实”启动画面以显示“假”启动画面，直到来自应用程序的 javascript 调用和 phonegap 在此切换后可能无法显示正确的启动画面。

有没有其他人遇到和/或解决过这个问题？

更新：尝试再次删除和添加所有启动图像，但无济于事。我尝试删除较小的图像（4 及其非视网膜版本），但即使项目中没有较小的图像，我也会得到相同的错误！

更新 2：Cordova 2.2.0 现已发布，因此根据以下内容解决了此问题：[http ://shazronatadobe.wordpress.com/2012/10/27/whats-new-in-cordova-ios-2-2-0 /](http://shazronatadobe.wordpress.com/2012/10/27/whats-new-in-cordova-ios-2-2-0/)

因此，推荐的解决方案是更新您的应用程序以使用 Cordova 2.2.0，如果由于某种原因无法做到这一点，下面提供了解决方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-18T20:54:01.967

我在其他地方收到了两个答案，但还没有时间测试它们： [来自 Phonegap Google 组中的用户 T123](https://groups.google.com/d/msg/phonegap/bPU16pVpwhU/4y27VztQLWAJ)：打开 CDVViewController.m -- find - (void) showSplashScreen

换行：690

从 ：

```
else // not iPad

{

    orientedLaunchImageFile = launchImageFile;

} 
```

至：

```
else // not iPad

{

    orientedLaunchImageFile = launchImageFile;

    /* Edited for 4-inch IP5 */

    if(screenBounds.size.height == 568)

        orientedLaunchImageFile = [NSString stringWithFormat:@"%@-568h", launchImageFile];

} 
```

来自上面评论的 Brion，以下拉取请求，希望被纳入 Cordova 2.2.0：[https ://github.com/apache/incubator-cordova-ios/pull/50](https://github.com/apache/incubator-cordova-ios/pull/50)

编辑：尝试了 T123 的解决方案，它对我有用！EDIT2：Brion 的修复程序被合并到现在已经发布的 Cordova 2.2.0 中！

EDIT3：只是更新以突出那些不费心阅读它们的人的评论：

对于 Phonegap 版本 1.4.1，我设法让 Hessius 的修复程序像这样工作：我从文件 PGViewController 复制了方法 showSplashScreen、isIPad、resolveImageResource 和定义#define degreeToRadian(x) (M_PI * (x) / 180.0)。 m 到我的 MainViewController.m 文件。之后，XCode 抱怨我正在为只读属性赋值，所以我编辑了 PhoneGap.framework 中的头文件，以使这两个属性可读写。我还将 Hessius 的代码中的 launchImageFile 更改为 @"Default"。这对我有用。– 乔·丁代尔 2012 年 10 月 8 日 15:23

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:27:28.490

对此的修复（https://issues.apache.org/jira/browse/CB-1482）直到 2.2 才发布。使用不稳定的版本风险很大，我懒得自己从源代码编译，所以我尝试了以下 hack：

在 MainViewController.m

```
- (void) showSplashScreen   
{   
    CGRect screenBounds = [[UIScreen mainScreen] bounds];   
    // HACK: PhoneGap pre-2.2 does not support iphone5 splash image well, so we just skip it    
    if (screenBounds.size.height == 568) {  
        return; 
    }   
    [super showSplashScreen];   
} 
```

这将禁用 iPhone5 的 showSplashScreen 以避免 PhoneGap 添加的较短启动图像（iOS 初始启动图像显示正常）。它对我有用，我几乎没有注意到 iPhone5 的 showSplashScreen 有什么不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T16:48:01.930

白色闪烁

我在使用 Cordova 2.2 时遇到了同样的问题。我认为值得一提的是，我必须采取额外的步骤才能使启动画面正确呈现。

我进行了@Hessius 答案中包含的更改。但我注意到在闪屏出现后产生了白屏闪烁。

在 (void)showSplashScreen 方法中，其他人可能会看到

```
if (launchImageFile == nil) { // fallback if no launch image was specified
 //        if (CDV_IsIPhone5()) {
 //            // iPhone 5 or iPod Touch 6th-gen
 //            launchImageFile = @"Default-568h";
 //        } else {
        launchImageFile = @"Default";
 //        }
} 
```

将我评论的代码注释掉（或删除），消除了我在应用程序加载和启动屏幕之间看到的白色闪烁。

希望这对某人有帮助！

# javascript - Ember.js 控制器命名约定是什么？

> ID：12450606
> 
> 赞同：1
> 
> 时间：2012-09-16T20:47:56.923
> 
> 标签：javascript, naming-conventions, ember.js

我刚刚开始使用 Ember.js 并试图了解其项目中使用的一些约定，我想知道，例如，控制器的正确命名法是`App.ApplicationController`or `App.applicationController`？

我看过两者的代码示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T21:15:31.417

Ember 命名约定非常简单。正如 Peter Wagenet 所说：

> 如果是类或命名空间，则为大写；如果是实例，则为小写。

我建议你阅读它的帖子：[Emberist：命名约定](http://www.emberist.com/2012/04/09/naming-conventions.html)。

您可以查看此博客中的所有其他帖子，它们非常有趣。

# c++ - 创建库调用层次结构的工具

> ID：12450608
> 
> 赞同：5
> 
> 时间：2012-09-16T20:48:15.363
> 
> 标签：c++, call

我有一个非常大的 C++ 源代码（使用标准模板编写）。我需要了解它的控制流。它的入口点是`main()`函数，但在`main()`它内部调用了这么多函数（这又调用了另一个函数），所以我很难跟踪到哪里去。我正在使用 eclipse 在文件之间导航并跟踪，但仍然很难管理，因为它包含大约 100 个`.c`文件`.h`。是否有任何工具可以从 main() 开始创建调用层次结构。虽然我有 100 个文件，但我知道它只使用了大约 35 个文件。我在Linux上。GCC 可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T19:17:41.543

您可能使用的工具列表：[http ://en.wikipedia.org/wiki/Call_graph](http://en.wikipedia.org/wiki/Call_graph)

我更喜欢 doxygen： http: [//www.doxygen.nl/](http://www.doxygen.nl/)

[来自http://www-scf.usc.edu/~peterchd/doxygen/](http://www-scf.usc.edu/~peterchd/doxygen/)的 doxygen 调用图示例：

![调用图](../Images/2043c0c609c8128958887189b858507e.png)

# mysql - MySQL在同一列中查询具有相同第三个值并返回计数的2个值

> ID：12450613
> 
> 赞同：1
> 
> 时间：2012-09-16T20:48:53.210
> 
> 标签：mysql

我正在尝试为使用日志构建一个查询，该查询计算两个包同时用于 uploadID 的次数。换句话说，我想知道每个uploadID 出现2 个包的次数。这是我将数据存储在 MySQL 中的表的示例。

```
uploadID  package  
1         value1
1         value2
1         value3

2         value2
2         value3
2         value4

3         value1
3         value3
3         value4

4         value1
4         value3
4         value4 
```

我正在寻找的输出将是这样的：

```
Concurrent Packages    Count
value1 & value2          1
value1 & value3          3
value1 & value4          2
value2 & value3          2
value2 & value4          1  
value3 & value4          3 
```

我已经尝试了许多查询来实现这一点，但似乎没有任何效果。理想情况下，一旦我得到计数​​，我想将输出放在矩阵中，如下所示：

```
 value1  value2  value3  value4
value1    -       1       3       2
value2    1       -       2       1     
value3    3       2       -       3
value4    2       1       3       - 
```

我真的很感激任何关于如何实现这一目标的建议。数据存储在 MySQL 数据库中，但最终矩阵将在 PHP Web 应用程序中呈现。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:24:43.060

第一个版本保持简单，这应该可以满足您的需求；

```
SELECT CONCAT(a.package, ' & ', b.package) "Concurrent Packages",
       COUNT(*) "Count"
FROM packages a
CROSS JOIN packages b
WHERE a.package<b.package AND a.uploadid=b.uploadid
GROUP BY a.package,b.package
ORDER BY a.package,b.package 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/5bef1/19)。

至于第二个版本，它*可以*用 MySQL 完成，但解决方案变得相当复杂。如果您想尝试一下，[这里](http://www.artfulsoftware.com/infotree/queries.php#523)有可以帮助您入门的信息。

查询的简短说明；表和自身之间的`CROSS JOIN`将返回所有行组合。我们过滤掉，以便我们只计算值是字母顺序并且uploadid匹配的那些`WHERE`（字母顺序只是为了避免这种情况`a matching b`并`b matching a`计为两个单独的匹配项）。之后，我们`COUNT`计算行数和`GROUP BY`值，因此我们得到每个组合的计数。

# php - PHP Curl未定义变量错误

> ID：12450617
> 
> 赞同：1
> 
> 时间：2012-09-16T20:49:04.923
> 
> 标签：php, curl

嗨，我正在尝试使用 PHP 和 Curl 登录网站。我遇到的问题是我要登录的网站上的输入字段的名称具有脚本认为是变量的名称。所以当我运行脚本时，我得到一个错误，说未定义的变量。

```
$fields = "ctl00$MainContent$EmailText=xxxx@xxxx.com&ctl00$MainContent$PasswordText=xxxx"; 
```

我得到的错误是：

```
Notice: Undefined variable: MainContent 

Notice: Undefined variable: EmailText

Notice: Undefined variable: PasswordText 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:52:06.387

使用单引号：

```
$fields = 'ctl00$MainContent$EmailText=xxxx@xxxx.com&ctl00$MainContent$PasswordText=xxxx'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:52:04.493

是的，将字符串放在[单引号](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.single)内而不是双引号内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T20:57:23.360

如果您使用 ' 而不是 " 的变量定义，php 将不会解释里面的内容。请参阅： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

此外，我总是使用 curl 选项 CURLOPT_POSTFIELDS 来处理后字段——因为这样我可以提交一个包含我的值的数组——这会提供更漂亮的代码：

```
$curlhandle = curl_init();
$post_values = array(
    'ctl00$MainContent$EmailText' => 'xxxx@xxxx.com'
    'ctl00$MainContent$PasswordText' => 'xxxx'
);
curl_setopt($curlhandle, CURLOPT_POST, true);
curl_setopt($curlhandle, CURLOPT_POSTFIELDS, $post_values); 
```

# c++ - 在 x86-64 中访问 32 位整数数组是否存在性能损失？

> ID：12450623
> 
> 赞同：7
> 
> 时间：2012-09-16T20:50:19.693
> 
> 标签：c++, c, x86-64

对不起，如果这个问题听起来很愚蠢。我只是模糊地意识到数据对齐的问题，从未做过任何 64 位编程。我现在正在处理一些 32 位 x86 代码。它经常访问一个 int 数组。有时会读取一个 32 位整数。有时会读取两个或多个。在某些时候，我想将代码设为 64 位。我不确定是否应该将此 int 数组声明为`int`or `long int`。我宁愿保持整数的宽度相同，所以我不必担心差异。我有点担心，虽然读/写一个与自然词不一致的地址可能会很慢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T21:00:06.607

仅当加载或存储跨越对齐边界时才会发生未对齐惩罚。边界*通常是*以下两者中的较小者：

*   硬件的自然字长。（32 位或 64 位*）
*   数据类型的大小。

如果您在 64 位（8 字节）架构上加载 4 字节字。它不需要是 8 字节对齐的。它只需要 4 字节对齐。

同样，如果你在任何机器上加载一个 1 字节的字符，它根本不需要对齐。

[*请注意，SIMD 向量可能意味着更大的自然字长。例如，16 字节 SSE 在 x86 和 x64 上仍然需要 16 字节对齐。（除非显式未对齐的加载/存储）]

* * *

所以简而言之，不，您不必担心数据对齐。语言和编译器非常努力地防止您担心它。

因此，只要坚持使用对您最有意义的任何数据类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T20:59:00.133

64 位 x86 CPU 仍然为有效处理 32 位值而进行了大量优化。即使在 64 位操作系统上，访问 32 位值至少与访问 64 位值一样快。实际上，它实际上会更快，因为消耗的缓存空间和内存带宽更少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:56:37.790

这里有很多很好的信息： [Performance 32 bit vs. 64 bit algorithms](https://stackoverflow.com/questions/8948918/performance-32-bit-vs-64-bit-arithmetic)

更多信息[https://superuser.com/questions/56540/32-bit-vs-64-bit-systems](https://superuser.com/questions/56540/32-bit-vs-64-bit-systems)，其中答案声称最严重的速度下降了 5%（从应用程序的角度来看，而不是单个操作）。

简短的回答是否定的，你不会受到性能影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T21:02:36.693

每当您访问任何内存位置时，都会将整个高速缓存行读入 L1 高速缓存，并且对该行中任何内容的任何后续访问都尽可能快。除非您的 32 位访问跨越高速缓存行（如果它在 32 位对齐上则不会），它将与 64 位访问一样快。

# android - 测试手机是否已root

> ID：12450624
> 
> 赞同：3
> 
> 时间：2012-09-16T20:50:32.140
> 
> 标签：android, root

> **可能重复：**
> [确定是否在有根设备上运行](https://stackoverflow.com/questions/1101380/determine-if-running-on-a-rooted-device)

我想知道手机*是否*已root，而无需请求root权限。我怎样才能做到这一点？

1.  测试如果`File.Exists("/system/bin/su")`？不确定，我想我不能因为权限
2.  测试是否安装了超级用户应用程序？嗯，我想我需要一个特殊的权限才能使用`PackageManager` **，并且**超级用户不是 onlu su 管理员（例如，我知道 SuperSU）
3.  尝试运行`su`不是一种选择，因为它会触发 su 提示，这是我在非 root 应用程序中不想要的

任何的想法？我的目的是获得关于有多少设备被植根的匿名统计数据，显然是在用户同意的情况下:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:09:17.570

选项1。可以，不需要任何特殊许可。

选项 2。root 手机可能不附带任何超级用户管理器应用程序。

选项3。正如您所说，这不是检测的好方法。

此外，还有另一个选项是检查 ro.build.tag （使用`getprop | grep ro.buil.tag`or `android.os.Build.TAG`）是否包含`testkeys`字符串。

编辑：对于选项 1，我建议您通过 setuid/setgid 权限查找（即`find / -perm -2000 -o -perm -4000`，并检查 su 是否在列表中）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-17T04:40:25.567

您不能可靠地做到这一点，因为手机“扎根”的含义并不总是相同的。您将得到的所有建议都是测试一些流行的与根相关的工具。但是无法检测手机是否以不使用这些工具的方式植根。

# performance - 使用 mod_proxy 将资产请求重定向到 CDN

> ID：12450625
> 
> 赞同：0
> 
> 时间：2012-09-16T20:50:40.023
> 
> 标签：performance, apache, cdn

我有兴趣使用 CDN 在我的 Web 应用程序中存储一些资产。但是，我不想将 CDN url 硬编码到我的每个资产（Javascript 和 CSS）中，而是使用简单的 RewriteRule 将资产请求重定向到 CDN。

但是，我想知道这种方法是否有一些缺点。一方面，服务器仍在处理资产请求，因为它需要识别和重定向此类请求。另外，我担心 CDN 会查看我的服务器的位置，而不是我的客户端的位置。

有没有人处理过这种策略，你的解决方案是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:33:41.500

这不是一个好策略，因为它完全抵消了任何好处或使用 CDN。对于静态资产的每个请求，您的服务器都必须处理一个请求，这正是您要避免的。

咬紧牙关，将您的应用程序设置为可配置的（您确实使用基本配置，对吗？），以便您更改所有静态资产的基本 URL。

# php - 如何在项目之间用逗号打印PHP结果但不是在最后

> ID：12450626
> 
> 赞同：-1
> 
> 时间：2012-09-16T20:50:45.287
> 
> 标签：php, mysql

我得到它显示所有在线用户，但我将如何为最后一个在线用户制作它，最后去掉逗号。这是我的代码

```
 while($online = mysql_fetch_array($usersonline)){
                    $username = $online['username'];

                    echo"<b> $username, </b>";
                    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T21:03:36.217

我建议使用内爆方法：

```
$usernames = [];

while($online = mysql_fetch_array($usersonline)){
  array_push($usernames, $online['username']);
}

echo implode(',', $usernames); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:04:11.300

只需对索引进行操作并*在之前*而不是*之后*追加，就像这样

```
$index = 0;
while($online = mysql_fetch_array($usersonline)) {
  $username = $online['username'];
  echo"<b> ".($index>0?',':'')." {$username}</b>";
  $index++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T21:04:17.650

```
 $u = 0;
    while($online = mysql_fetch_array($usersonline))
    {
        $u++;
        if($u == 1){
            $usernames = '<b>' . $online['username'] . '</b>';
        }else{
            $usernames .= '<b>, ' . $online['username'] . '</b>';
        }
    } 
```

编辑：内爆可能会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T21:13:10.337

```
$join = '';
while($online = mysql_fetch_array($usersonline))
{
    $username = $online['username'];
    echo"<b> $join . $username </b>";
    $join = ',';
} 
```

或者

```
$out = '';
while($online = mysql_fetch_array($usersonline))
{
    $username = $online['username'];
    $out .="<b> $username </b>,";
}
$out = rtrim($out,",");
echo $out; 
```

或作为“tehlulz”建议

```
$usernames = [];

while($online = mysql_fetch_array($usersonline)){
  array_push($usernames, $online['username']);
}

echo implode(',', $usernames); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T21:04:43.640

这可能不是最优雅的方式，但这应该有效：

```
$users="<b>";
while($online = mysql_fetch_array($usersonline))
{
    $username = $online['username'];
    $users.="$username,";
}
rtrim($users,',');
$users.="</b>";
echo $users; 
```

# php - 使用 www 在新选项卡中打开页面时 PHP 会话消失

> ID：12450630
> 
> 赞同：0
> 
> 时间：2012-09-16T20:51:26.430
> 
> 标签：php, mysql, session

我正在使用 PHP 会话。我使用 session_start() 设置会话并设置一些会话变量。然后，我使用这些会话变量。

现在，假设我在浏览器 ( [http://example.com](http://example.com) ) 中打开一个页面并开始一个 PHP 会话。如果我在新选项卡中打开另一个页面（[http://www.example.com](http://www.example.com)，请注意 URL 中的 www ），第一个会话就会消失。

有什么办法可以避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:54:32.587

您的会话 ID 存储在 cookie 中；cookie 仅对特定域有效。要暴力破解这个问题，您需要使用[`session_set_cookie_params`](http://php.net/manual/en/function.session-set-cookie-params.php)(before `session_start`) 确保 cookie 在您感兴趣的所有子域上都有效（`$domain`参数控制这一点）。

但是，更好的方法是在 Web 服务器级别设置从一个域到另一个域的永久重定向；如果您有一个公共网站并且您完全关心您的搜索引擎评级，那么无论如何都*必须*这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:01:26.857

实际上，除非您有**充分的**理由不这样做，否则您应该做的就是只使用一个 url。据我所知，使用不同的 url 访问相同的内容对 SEO 不是很友好，因为浏览器引擎认为它是重复的内容。

您应该将其配置为始终使用 www 或根本不使用它。处理文件相当容易`.htaccess`。

# javascript - 预期的十六进制数字

> ID：12450633
> 
> 赞同：1
> 
> 时间：2012-09-16T20:51:48.343
> 
> 标签：javascript, spring-mvc, jstl

当我将文件路径（例如`'C:\u01\oracle\fmw_11114\data\proj\folder\name 09022014.txt`，从 java 控制器传递到 javascript 脚本）时，会导致错误“ `Expected hexadecimal Digit`”。

此路径是从文件系统读取并直接传递给脚本，在将字符串传递给脚本之前，我无法转义字符串中的反斜杠“\”。任何想法如何解决这个问题？

```
if(document.getElementById('hdnA').value == 'ALR') {
     alert('ERROR: ' + '${arch}' + ' file not found.')
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T11:06:19.247

错误消息是一个很好的指示出了什么问题。

Unicode 字符可以使用以下格式直接传递给脚本：\uXXXX（其中 XXXX 表示特定字符​​的代码）。

您的路径包含名称以 U 开头的文件夹，因此路径字符串包含用于文字 Unicode 字符插入 (\u) 的文字控制字符。

一个简单的解决方法是使用正斜杠传递文件路径：

```
'C:/u01/oracle/fmw_11114/data/proj/folder/name 09022014.txt' 
```

我的 Java 应用程序遇到了同样的问题，它尝试在元素中动态插入带有路径值的脚本。将我的反斜杠更改为正斜杠为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T08:10:32.457

萨拉姆！使用这个正则表达式：

```
patt=/\\/g;
str = str.replace(patt,"\\\\") 
```

这对我有用；

# windows-phone-7 - 找不到类 ShellTile

> ID：12450636
> 
> 赞同：0
> 
> 时间：2012-09-16T20:52:05.523
> 
> 标签：windows-phone-7

我在使用 ShellTile 类时遇到了一个大问题。我已经对教程进行了几项研究，但他们无法回答我的问题。当我想使用“ShellTile”或“StandardTileData”来操作应用程序的磁贴时出现问题，我有错误“比赛中不存在名称ShellTile”或“缺少命名空间？”..

我做了一个新项目，我添加了“使用 Microsoft.Phone.Shell;” 在开始时，我验证“Microsoft.Phone”是否在参考中添加。但是问题已经是一样的了...

它从何而来 ？我免费使用 Microsoft Visual Studio 2010 Express for Windows Phone...

泽维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:10:10.100

`ShellTileData`已在 Windows Phone 7.1 (Mango) 中添加。确保您的目标是正确的框架版本。

要检查您的目标版本，请右键单击项目，单击“属性”，进入“应用程序”选项卡，并确保在“目标 Windows Phone 操作系统版本”列表中选择“Windows Phone OS 7.1” .

![选择 Windows Phone 操作系统版本](../Images/925b3843b78a92d45a4e8c60f4fe0f5a.png)

如果列表没有出现，那么您可能使用的是过时的 SDK 版本。

# ruby-on-rails - 你可以使用 form_for 和魔法登录表单而不是 form_tag

> ID：12450640
> 
> 赞同：0
> 
> 时间：2012-09-16T20:53:01.527
> 
> 标签：ruby-on-rails, simple-form, sorcery

我正在尝试解决这个问题：

[巫术和简单形式的实现](https://stackoverflow.com/questions/9650075/sorcery-and-simple-form-implementation)

似乎我需要做的就是能够将 form_for 与巫术登录表单一起使用，而不是`form_tag`. 这将使我能够使用`simple_form_for`.

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:49:41.593

我使用@user 变量来做到这一点：

我的会话控制器：

```
class UserSessionsController < ApplicationController
  skip_before_filter :require_login, :except => [:destroy]

  def new
    @user = User.new
  end

  def create
    if @user = login(params[:user][:username],params[:user][:password],false)
      redirect_back_or_to(root_path, :notice => 'Login successfull.')
    else
      @user = User.new
      flash.now[:error] = "Login failed."; render :action => "new"
    end
  end

  def destroy
    logout
    redirect_to(root_path, :notice => 'Logged out!')
  end
end 
```

我的会话视图：

```
<%= simple_form_for @user,  :html => {:class => 'form-signin'} , :url => {:controller =>   'user_sessions', :action => 'create'} do |f| %>

  <%= f.input :username %>

  <%= f.password_field :password %>  

  <%= f.button :submit, 'Login' %>
<% end %> 
```

# jquery-mobile - jquery mobile js include 覆盖引导 css - 我该如何修复？

> ID：12450645
> 
> 赞同：2
> 
> 时间：2012-09-16T20:53:11.357
> 
> 标签：jquery-mobile, twitter-bootstrap, pyramid

我正在开发一个 Pyramid (python) Web 应用程序，并尝试创建一个响应式设计，可以在桌面大小的浏览器和移动浏览器之间优雅地切换。我想将 Twitter Bootstrap 用于桌面 UI，将 jquery mobile 用于移动 UI。

我的 CSS 是这样的：

```
@charset "utf-8";

@import url("http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css") (max-width: 480px);
@import url("css/bootstrap.min.css") (min-width: 481px); 
```

当窗口调整大小时，这实际上似乎在动态切换样式方面效果很好。如果它是一个更大的窗口，它会显示我的桌面 UI 样式，并且一旦它达到“移动”阈值，它就会显示 jquery 移动 UI。甜的。

不过，我的问题似乎出在我的 HTML/mako 模板中。我已将 .js 包含在页面底部。重要的片段是：

```
[...snip..]
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<script src="${request.static_url('myapp:static/js/bootstrap.min.js')}"></script>
</body> 
```

我在桌面 UI 上有带有标签的单选按钮，如下所示：

```
<label>
                    <input type="radio" name="answer" id="1" value="1"> 1</label>
                <label><input type="radio" name="answer" id="2" value="2"> 2</label>
                <label><input type="radio" name="answer" id="3" value="3"> 3</label>
                <label>
                    <input type="radio" name="answer" id="foo" value="foo">foo
                </label> 
```

当所有 .js 包含都处于活动状态时，实际的单选输入控件不会与标签文本内联；相反，它似乎被设置为一个块元素，并出现在屏幕上标签*之后的自己的行上。*我已经尝试调整 CSS 以覆盖单选输入样式，但到目前为止我能得到的最好的是将单选类型设置为内联，但它仍然出现在标签之后，而不是之前。

Buuuut，如果我注释掉 jquery mobile .js 包括：

```
[...snip...]
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<!--<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>-->
<script src="${request.static_url('myapp:static/js/bootstrap.min.js')}"></script>
</body> 
```

然后桌面 UI 看起来是正确的。当然，那时我已经失去了我的 jquery 移动 UI。

所以似乎正在发生的事情是 jquery mobile javascript 中的某些东西覆盖了包含的样式，但我不知道是什么或为什么。有没有办法可以强制事情不以更大的分辨率运行 jquery 移动设备？任何帮助或提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:10:15.937

您可能需要为这些输入字段禁用 jquery mobile：

来自[http://jquerymobile.com/demos/1.0.1/docs/forms/docs-forms.html](http://jquerymobile.com/demos/1.0.1/docs/forms/docs-forms.html)：

> 如果您希望 jQuery Mobile 不触及特定的表单控件，只需为该元素赋予属性 data-role="none"。例如：

```
<label for="foo">
<select name="foo" id="foo"  data-role="none">
<option value="a" >A</option>
<option value="b" >B</option>
<option value="c" >C</option>
</select> 
```

# clojure - 该表单构造有什么问题？

> ID：12450646
> 
> 赞同：3
> 
> 时间：2012-09-16T20:53:29.303
> 
> 标签：clojure

考虑到有效的clojure形式：

```
 > (let [a 16 b 8] (/ a b))
2 
```

我正在尝试手动构建它以便将其输入到`eval`呼叫中。我之前被repl拒绝了：

```
> (list 'let '[ 'a '16 'b '8 '] '(/ a b) )
RuntimeException Unmatched delimiter: ]  clojure.lang.Util.runtimeException (Util.java:156)
(/ a b)
RuntimeException Unmatched delimiter: )  clojure.lang.Util.runtimeException (Util.java:156) 
```

引用数组字符`[]`是不够的。实际上，以下表达式（删除 [ 和 ]）是可以的：

```
> (list 'let  'a '16 'b '8  '(/ a b) )
(let a 16 b 8 (/ a b)) 
```

这种结构有什么问题？我该如何解决这个问题？是否有任何特殊形式来引用 [ 和 ] 字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T04:47:05.377

如果您尝试生成代码，那么我建议您使用 auto-gensyms 构建此表达式，如下所示：

```
`(let [a# 16 b# 8] (/ a# b#)) 
```

auto-gensyms (`a#`和`b#`) 创建保证唯一的符号名称。这不是绝对必要的，但在更复杂的情况下，它可以帮助避免变量名被意外捕获（例如，通过不同级别的宏扩展）。

请注意在表达式开头使用语法引号 (`) 而不是正则引号 (')。当您生成代码时，这*通常*比常规引用更好，因为它会自动处理命名空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T22:23:53.963

您可以引用整个向量：

```
(list 'let '[a 16 b 8] '(/ a b)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-16T23:04:28.090

您也可以引用整个列表。

```
main=> (def bar '(let [a 16 b 8] (/ a b)))
#'main/bar
main=> bar
(let [a 16 b 8] (/ a b))
main=> (eval bar)
2 
```

或者这样...

```
main=> (def bar (quote (let [a 16 b 8] (/ a b))))
#'main/bar
main=> bar
(let [a 16 b 8] (/ a b))
main=> (eval bar)
2 
```

# javascript - a:hover 风格停留在 iOS 浏览器上

> ID：12450648
> 
> 赞同：2
> 
> 时间：2012-09-16T20:53:54.607
> 
> 标签：javascript, css, html, oop

我最近发布了我的第一个名为 Shutter Image Gallery 的开源项目，当我查看它在移动设备 (iOS) 上的外观时，发现了一个我似乎无法解决的问题......

![在此处输入图像描述](../Images/a9dd2a822114d0dc3c797b36d202c82c.png)

正如您在图像中看到的，控制按钮上的 a:hover 状态似乎保持不变。除非您单击相反的按钮，否则 a 的颜色不会返回。我试图搜索问题，但找不到任何相关内容。

该代码是开源的并托管在 GitHub 上。如果你能帮忙，请这样做。在此处发布修复或将其推送到存储库。我将不胜感激。

存储库链接：[https ://github.com/W3Geek/Shutter](https://github.com/W3Geek/Shutter)

演示链接：[http ://w3geek.github.com/Shutter/](http://w3geek.github.com/Shutter/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T02:00:15.680

尝试在 CSS 中进行媒体查询以仅在桌面上使用 a:hover 效果，而在 iOS 设备上使用 a:active 进行颜色更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:18:07.993

```
/* Desktop */
@media only screen and (min-width:650px) 
{
    a:hover 
    {
        color:red;
    }
}

/* Mobile */
@media only screen and (max-width:650px)
{
    a:active
    {
        color:red;
    }
} 
```

# php - ZF2，添加多个表

> ID：12450653
> 
> 赞同：3
> 
> 时间：2012-09-16T20:54:26.103
> 
> 标签：php, zend-framework2

我遵循了为新 ZF2 教程创建的专辑示例。对于第一个模块，一切都很好，我能够修改以显示我想用于我的应用程序的数据。

我的问题是添加第二个模块，更复杂的是，它管理 2 个以上的数据表。每次我访问该页面时，我都会收到 Apache 错误页面，这不是很有帮助。我修改的唯一主要类是第二个模块目录中的 Module.php。也许有人可以看出我的猜测有多么错误。

模块背景：该视图将显示 4 种类型的表格，包括 Fosters 和 Volunteers。我为每个创建了一个模型和表。一切似乎都很好，除了我确实修改了工厂设置以包含每个表（FosterTable 和 VolTable）。你认为这是我的错误吗？

我在这个页面上工作：http: [//framework.zend.com/manual/2.0/en/user-guide/database-and-models.html](http://framework.zend.com/manual/2.0/en/user-guide/database-and-models.html)

对于`/TeamMgr/Module.php`，我添加了以下内容：

```
namespace TeamMgr;

use TeamMgr\Model\FosterTable;
use TeamMgr\Model\VolTable;

class Module
{
 public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'TeamMgr\Model\VolTable' =>  function($sm) {
                    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                    $table     = new VolTable($dbAdapter);
                    return $table;
                },

                'TeamMgr\Model\FosterTable' =>  function($sm) {
                    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                    $table     = new FosterTable($dbAdapter);
                    return $table;
                },
            ),
        );
    }

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }
} 
```

然后在我的控制器中我添加了：

```
public function indexAction(){
    return new ViewModel(array(
            'fosters'=>$this->getFosterTable()->fetchAll(),
    ));
    return new ViewModel(array(
            'vols'=>$this->getVolTable()->fetchAll(),
    ));     

} 
```

那么我到底有多彻底？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T22:13:58.493

你不能`return`多次打电话。发生的事情是函数的执行在第一次`return`调用时终止，而第二次调用则永远不会被调用。你需要写：

```
return new ViewModel(array(
        'fosters'=>$this->getFosterTable()->fetchAll(),
        'vols'=>$this->getVolTable()->fetchAll(),
)); 
```

这是基本的PHP。所以我建议先学习PHP，然后再学习ZF。即使对于熟悉普通 PHP 的人来说，ZF 也非常复杂。对于初学者来说有更好的框架（比如代码点火器、kohana 或 cakephp）——你应该从那里开始 IMO...

# jquery - 是否可以更改 IMG 标签上的“宽度”和“高度”属性？

> ID：12450657
> 
> 赞同：2
> 
> 时间：2012-09-16T20:54:53.323
> 
> 标签：jquery, jquery-selectors

```
<div class="moviesRotator" id="moviesRotator">
<a>
<img width="431" height="348" alt="" src="img_url1"/>
</a>
<a>
<img width="431" height="348" alt="" src="img_url2"/>
</a>
<a>
<img width="431" height="348" alt="" src="img_url3"/>
</a>
</div> 
```

我想让图像更宽，动态更大。那么有可能做到这一点吗？

```
$('.moviesRotat0r.a.img').attr('width', 620)
$('.moviesRotat0r.a.img').attr('height', 380) 
```

那么是否可以遍历 中的所有标签并以这种方式更改高度和宽度？

这里的正确语法是什么？

请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T20:58:22.023

您可以这样做...确保图像来源足够大以避免放大伪影...

```
$('.moviesRotator img').attr('width', 620).attr('height', 380); 
```

如果可用，请使用容器的 id（搜索速度更快）

```
$('#moviesRotator img').attr('width', 620).attr('height', 380); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T20:58:07.343

选择器将是：

```
$('.moviesRotator > a > img') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T21:40:51.493

这更好，检查这个链接：http: [//jsfiddle.net/cpeW8/3/](http://jsfiddle.net/cpeW8/3/)

html示例：

```
<img src='#' width="320" height="240" /> 
```

jQuery 示例：

```
(function($) {
    var imgSelected = $('img');
    console.log('Current width: ' + imgSelected.attr('width') + '; Current height: ' + imgSelected.attr('height'));
    imgSelected.attr({
        width: 400,
        height: 300
    });
    console.log('Current width: ' + imgSelected.attr('width') + '; Current height: ' + imgSelected.attr('height'));
})(jQuery) 
```

在您的情况下，它将是：

```
$('#moviesRotator img').attr({
    width: 400,
    height: 300
}); 
```

# azure-sql-database - 在 Azure 中如何从旧门户转到新门户？

> ID：12450658
> 
> 赞同：0
> 
> 时间：2012-09-16T20:54:58.337
> 
> 标签：azure-sql-database

如何从旧 Azure 仪表板导航到新 Azure 仪表板？

SQL Azure 有一个新的默认前端用户界面和一个旧版本。我已经能够导航到旧版本的 UI，但现在我不知道如何返回到新版本，以便我可以在我的数据库上添加一些 t-sql 命令。

这就是旧 UI（我坚持的那个）的外观： ![[IMG]http://i67.photobucket.com/albums/h292/Athono/AZURE/oldwindow.png[/IMG]](../Images/b19f629c07e69d1b2b713ee720973401.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:53:12.173

查看屏幕截图的底部，最左侧的第一个超链接显示：“访问预览门户”

# magento - Magento 中的 Google Adwords 转换跟踪在查看源代码中不可见

> ID：12450659
> 
> 赞同：2
> 
> 时间：2012-09-16T20:55:44.260
> 
> 标签：magento

我在success.phtml上安装了google adwords tracking

我能够跟踪转化，但我不确定是否正确跟踪所有转化。我们的付款方式是 Paypal Express 和 Paypal Payment pro，客户通过我们网站上的信用卡付款。这样可以确保每个客户都点击成功页面。

但是，当我完成订单并检查转化页面源（查看源）时，我看不到 Google 转化跟踪代码。

在视图源中，Google 转化跟踪代码尚不可见，这是否正常？

问候，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:42:28.543

当您到达成功页面时，它会显示出来。一旦您点击查看源代码，您实际上是在向成功页面发出另一个请求，因此它在技术上重新加载它。此时代码不会再次显示，因为交易已经完成（如果有效，您可以重新加载页面并一遍又一遍地跟踪交易）。

要检查以确保它正确显示，请在 chrome 或 firefox/firebug 中检查元素以查看代码是否在页面上。

# html - html 图标 谷歌

> ID：12450660
> 
> 赞同：-1
> 
> 时间：2012-09-16T20:55:49.103
> 
> 标签：html, internet-explorer, google-chrome, favicon

我正在尝试最新 html 中标题栏和地址栏的图标。

我想知道如何使它与最新版本的 IE 和 Chrome 兼容。有没有人遇到过类似的问题？我让它在 Firefox 上工作：

> 链接 rel="快捷图标" href="foo.ico" type="image/x-icon"

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:02:37.123

根据[维基百科](http://en.wikipedia.org/wiki/Favicon#Accessibility)，这将适用于所有主要浏览器：

```
<link rel="shortcut icon" href="http://example.com/myicon.ico" /> 
```

您还可以命名您的文件`favicon.ico`，它将自动显示。有时，您的浏览器刷新图标需要一段时间。尝试忽略缓存的私有/隐身模式。

还要确认您的浏览器通过直接打开文件找到该文件。

# ubuntu - 使用 glib 和 dbus dbus_g_value_build_g_variant 构建 Maliit 时出错

> ID：12450666
> 
> 赞同：0
> 
> 时间：2012-09-16T20:56:59.960
> 
> 标签：ubuntu, build, makefile, glib, dbus

我正在尝试在 Ubuntu 10.04 32 位上构建 Maliit ( [https://wiki.maliit.org/Documentation/Installing )。](https://wiki.maliit.org/Documentation/Installing)我也有一台 Ubuntu 12.04 机器，构建 Maliit 在较新的 Ubuntu 上开箱即用，但我需要让它在 10.04 上构建。

我在 10.04 上遇到了几个早期的错误，在谷歌搜索后发现是由于 glib 的过时版本造成的。所以我抓住了最新版本并像这样构建：

```
cd /home/$user/Desktop
wget http://ftp.gnome.org/pub/gnome/sources/glib/2.33/glib-2.33.12.tar.xz
unxz glib-2.33.12.tar.xz
tar xvf glib-2.33.12.tar
cd glib-2.33.12
mkdir build-x86
cd build-x86
mkdir /home/$user/glib-2.33
../configure --prefix=/home/$user/glib-2.33
make
make install
export PATH=/home/$user/glib-2.33/bin:$PATH
cp -r /home/$user/glib-2.33/bin/* /usr/bin
cp -r /home/$user/glib-2.33/share/* /usr/share
cp -r /home/$user/glib-2.33/include/* /usr/include
cp -r /home/$user/glib-2.33/lib/* /usr/lib
cp -r /home/$user/glib-2.33/lib/*so* /lib/ 
```

构建几乎成功，但现在我陷入以下错误：

```
make[3]: Entering directory `/home/user/Desktop/maliit-framework-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Release/examples/apps/gtk2'
g++ -Wl,-O1 -Wl,--as-needed -Wl,-rpath,/home/pclass/QtSDK/Desktop/Qt/4.8.1/gcc/lib -o maliit-exampleapp-gtk2 .obj/exampleapp-gtk.o    -L/usr/X11R6/lib ../../../lib/libmaliit-glib-1.0.so -L/home/pclass/glib-2.33/lib -pthread -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lgdk_pixbuf-2.0 -lm -lpangocairo-1.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lgmodule-2.0 -lrt -lglib-2.0 -lXext -lX11 -lm
../../../lib/libmaliit-glib-1.0.so: undefined reference to `dbus_g_value_build_g_variant'
../../../lib/libmaliit-glib-1.0.so: undefined reference to `dbus_g_value_parse_g_variant'
collect2: ld returned 1 exit status
make[3]: Leaving directory `/home/user/Desktop/maliit-framework-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Release/examples/apps/gtk2'
make[2]: Leaving directory `/home/user/Desktop/maliit-framework-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Release/examples/apps'
make[1]: Leaving directory `/home/user/Desktop/maliit-framework-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Release/examples'
make: Leaving directory `/home/user/Desktop/maliit-framework-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Release'
make[3]: *** [maliit-exampleapp-gtk2] Error 1
make[2]: *** [sub-gtk2-make_default] Error 2
make[1]: *** [sub-apps-make_default] Error 2
make: *** [sub-examples-make_default-ordered] Error 2
13:48:42: The process "/usr/bin/make" exited with code 2.
Error while building project maliit-framework (target: Desktop)
When executing build step 'Make' 
```

具体来说，错误归结为：

```
../../../lib/libmaliit-glib-1.0.so: undefined reference to `dbus_g_value_build_g_variant'
../../../lib/libmaliit-glib-1.0.so: undefined reference to `dbus_g_value_parse_g_variant'
collect2: ld returned 1 exit status 
```

我不知道这意味着什么，谷歌也没有提供任何有用的东西。我认为这可能与 Glib 和 dbus 有关。有什么问题，我该如何解决？请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:46:51.107

编译失败是因为它找不到`dbus_g_value_build_g_variant()`函数，该函数首先出现在[dbus-glib 0.88](http://lists.freedesktop.org/archives/dbus/2010-August/013257.html)中，但是**Ubuntu 10.04**附带[dbus-glib 0.84](http://packages.ubuntu.com/lucid/libdbus-glib-1-2)所以这就是问题所在。

顺便说一句，**dbus-glib 0.88**将其 glib 要求提高到**glib-2.24**但这对您来说不是问题，因为您正在安装**glib-2.33**。

您需要安装**dbus-glib 0.88**来修复该编译错误。

# ios5 - 使用 setusertrackingmode 进行中心偏移映射

> ID：12450673
> 
> 赞同：1
> 
> 时间：2012-09-16T20:57:54.507
> 
> 标签：ios5, maps, mapkit

当我使用 setusertrackingmode 显示 mapView 时，用户位置始终显示在地图中心。

```
// set tracking mode
[self.mapView setShowsUserLocation:YES];
[self.mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES]; 
```

有没有办法用偏移量显示用户位置，所以它会显示在地图的下四分之一？

# sql - 多租户主键的最佳方法

> ID：12450683
> 
> 赞同：9
> 
> 时间：2012-09-16T20:58:59.730
> 
> 标签：sql, primary-key, multi-tenant

我有几个客户使用的数据库。我真的不希望代理增量键值在客户端之间流血。我希望编号从 1 开始并且是特定于客户的。

我将使用由两部分组成的复合键`tenant_id`以及增量 id。

为每个租户创建增量密钥的最佳方法是什么？

我正在使用 SQL Server Azure。我担心锁定表、重复键等。我通常会将主键设置为 IDENTITY 并继续前进。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:11:28.710

您是否计划在未来使用 SQL Azure 联合？如果是这样，当前版本的 SQL Azure 联合不支持将 IDENTITY 用作聚集索引的一部分。有关更多详细信息，请参阅[在 SQL Azure（联合）中将 guid 用作表上的聚集索引有哪些替代方法](https://stackoverflow.com/questions/12719365/what-alternatives-exist-to-using-guid-as-clustered-index-on-tables-in-sql-azure)。

如果您还没有看过联邦，您可能想看看它，因为它提供了一种有趣的方式来分片数据库和数据库内的租户隔离。

根据您的最终目标，使用联合，您可能能够使用 GUID 作为表上的主聚集索引，还可以使用表上的增量 INT IDENTITY 字段。这个 INT IDENTITY 字段可以显示给最终用户。如果您在 TenantID 上进行联合，则每个“租户表”实际上都变成了一个筒仓（至少据我所知），因此在该表中的字段上使用 IDENTITY 将有效地成为一个不断增加的自动生成值，该值在给定租户内递增.

当 \ 如果数据合并在一起（合并来自多个租户的数据）时，您最终会在此 INT IDENTITY 字段上发生冲突（因此为什么不支持 IDENTITY 作为联邦中的主键）但只要您不使用它字段作为整个系统中的唯一标识符，您应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:05:46.557

如果您希望复制在插入时自动分配唯一 INT 键的便利性，您可以添加一个`INSTEAD OF INSERT`触发器，该触发器使用现有列 +1 的 MAX 来确定下一个值。

如果具有标识值的列是索引中的第一个键，则 MAX 查询将是一个简单的索引查找，非常高效。

事务将确保分配唯一值，但这种方法将具有与标准标识列不同的锁定语义。IIRC，SQL Server 可以为并行请求它的每个事务分配不同的标识值，如果事务回滚，分配给它的值将被丢弃。MAX 方法一次只允许一个事务向表中插入行。

一种相关的方法可能是拥有一个由表名、租户 ID 和当前身份值作为键的专用键值表。它需要相同的`INSTEAD OF INSERT`触发器和更多的样板来查询并保持该键表的更新。但它不会改善并行操作；锁将只是在不同表的记录上。

解决锁定瓶颈的一种可能性是将当前 SPID 包含在密钥的值中（现在标识密钥是顺序 int 和发生分配它的任何 SPID 的组合，而不是简单的顺序），使用专用标识值表并插入必要时按 SPID 记录；身份表 PK 将是（表名、租户、SPID），并且有一个具有当前顺序值的非键列。这样，每个 SPID 将拥有自己的动态分配的身份池，并且只会锁定自己的 SPID 特定记录。

另一个缺点是维护触发器，每当您更改任何特殊身份表中的列时，这些触发器都必须更新。

# php - TinyMCE iframe 没有出现

> ID：12450687
> 
> 赞同：0
> 
> 时间：2012-09-16T20:59:36.800
> 
> 标签：php, ajax, editor, tinymce

我有一个将 iframe 返回到 tinyMCE 编辑器的 ajax 调用。大纲显示，但 iframe vid 没有。我已添加`extended_valid_elements: "iframe[src|width|height|name|align]",`到我的 .init 但它仍然不会显示，这是我能找到的唯一修复，有什么建议吗？

初始化代码：

```
<script type="text/javascript">
tinyMCE.init({
// General options
mode : "textareas",
theme : "advanced",
plugins :    "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,inse rtdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

// Theme options
theme_advanced_buttons1 :  "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
theme_advanced_buttons2 :  "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image-ajax,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media-ajax,advhr,|,print,|,ltr,rtl,|,fullscreen",
theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom",
theme_advanced_resizing : true,

extended_valid_elements: "iframe[src|width|height|name|align]",

setup : function(ed) {
    ed.addButton("image-ajax", {
        title : "image-ajax",
        cmd : "mceimage-ajax",
        image : "js/img/image-ajax.png", 
        onclick : function() {  
            showModalPopup("image-modal-container"); // open the file upload modal
        }
    }); 

    ed.addButton("media-ajax", {
        title : "media-ajax",
        cmd : "mcemedia-ajax",
        image : "js/img/media-ajax.gif", 
        onclick : function() {  
            showModalPopup("media-modal-container"); // open the file upload modal
        }
    }); 
}
}); 
```

# automation - xdotool 与山狮和 macbook 视网膜

> ID：12450688
> 
> 赞同：6
> 
> 时间：2012-09-16T20:59:37.667
> 
> 标签：automation, osx-mountain-lion, ui-automation, retina-display

`xdotool`似乎不适用于安装了山狮的新 Macbook 视网膜。它启动 XQuartz 但似乎不像以前那样模拟鼠标点击或键盘输入。我不知道它是否与山狮或视网膜显示有关。像 cliclick (http://www.bluem.net/en/mac/cliclick/) 这样的工具似乎可以工作并且可以完成工作。不过，我更喜欢在 mac 和 linux 上都可以使用的工具。有没有人遇到同样的问题？

使用：

*   OS X 10.8.1
*   MacBook Pro 视网膜
*   xdotool 2.20110530.1 来自 macports
*   XQuartz 2.7.3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T11:51:33.447

我为 Mac OS X 找到了这个，它的工作与以下内容相同`xdotool`：

网址： http: [//www.bluem.net/en/mac/cliclick/](http://www.bluem.net/en/mac/cliclick/)

它适用于 Retina Display 和 Mountain Lion。使用起来非常简单。这里的手册：

```
cliclick ("Command Line Interface Click") is a tool for executing mouse- and keyboard-related actions from the shell/Terminal

USAGE
  cliclick [-m <mode>] [-r] command1 [command2] [...]

OPTIONS
  -r        Restore initial mouse location when finished
  -m <mode> The mode can be either “verbose” (cliclick will print a
            description of each action to stdout just before it is
            performed) or “test” (cliclick will only print the
            description, but not perform the action)

COMMANDS
To use cliclick, you pass an arbitrary number of commands as arguments. A command consists of a command identifier (a string that tells cliclick what kind of action to perform) and usually one or more arguments to the command, which are separated from the command identifier by a colon. Example: “c:123,456” is the command for clicking (the “c” is the command identifier for clicking) at the position with x coordinate 123 and y coordinate 456\. See below for a list of all commands and the arguments they expect.

LIST OF COMMANDS

  m:x,y   MOVE the mouse to the point with the given coordinates.
          Example: “m:12,34” will move the mouse to the point with
          x coordinate 12 and y coordinate 34.

  c:x,y   Will CLICK at the point with the given coordinates.
          Example: “c:12,34” will click at the point with x coordinate
          12 and y coordinate 34\. Instead of x and y values, you may
          also use “.”, which means: the current position.

  dc:x,y  Will DOUBLE-CLICK at the point with the given coordinates.
          Example: “dc:12,34” will double-click at the point with x
          coordinate 12 and y coordinate 34\. Instead of x and y values,
          you may also use “.”, which means: the current position.

  tc:x,y  Will TRIPLE-CLICK at the point with the given coordinates.
          Example: “tc:12,34” will triple-click at the point with x
          coordinate 12 and y coordinate 34\. Instead of x and y values,
          you may also use “.”, which means: the current position.

  kd:keys Will trigger a KEY DOWN event for a comma-separated list of
          modifier keys (“cmd”, “alt” or “ctrl”).
          Example: “kd:cmd,alt” will press the command key and the
          option key (and will keep them down until you release them
          with another command)

  ku:keys Will trigger a KEY UP event for a comma-separated list of
          modifier keys (“cmd”, “alt” or “ctrl”).
          Example: “ku:cmd,ctrl” will release the command key and the
          control key (which will only have an effect if you performed
          a “key down” before)

  p[:str] Will PRINT the given string. If the string is “.”, the
          current MOUSE POSITION is printed. As a convenience, you can skip
          the string completely and just write “p” to get the current position.
          Example: “p:.” or “p” will print the current mouse position
          Example: “p:'Hello world'” will print “Hello world”

  w:ms    Will wait/pause for the given number of milliseconds.
          Example: “w:500” will pause command execution for half a second

Version 2.0, released 08/17/2012
Author: Carsten Blüm, <macapps@bluem.net>
Website: www.bluem.net/jump/cliclick/ 
```

# jquery - 单击 changePage 上的处理程序问题

> ID：12450690
> 
> 赞同：0
> 
> 时间：2012-09-16T20:59:54.133
> 
> 标签：jquery, jquery-mobile

我正在做一个简单的页面转换，`changePage`当“点击”触发但在第一次转换后，绑定分离。我试过`reloadPage`但一样。

示例代码：

```
$(document).on("pageinit", "#index", function () {
    $("#button").live("click", function () {
        $.mobile.changePage("../s/", {
            reloadPage: true
        });

        return false;
    });
}); 
```

注意：两个页面 id 都是“索引”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:57:44.900

您可以尝试以下方法：

```
$(document).on("pageinit", "#index", function () {
    $("#button").live("click", function () {
        $(location).attr('href',"../s/");       
    });
}); 
```

希望这可以帮助。让我知道你的结果。

# gwt - 在 GWT UiBinder 模板中使用 JAR 中的图标

> ID：12450694
> 
> 赞同：1
> 
> 时间：2012-09-16T21:00:21.583
> 
> 标签：gwt, smartgwt, uibinder

在我的 GWT 应用程序中，我还将 SmartGWT 库用于一些用户界面元素。最近我有了用 SmartGWT 图标集中的图标替换某些 GWT 按钮的文本（如“刷新”或“保存”）的想法，例如**/com/smartclient/theme/graphite/public/sc/中的刷新图标皮肤/石墨/图像/动作/refresh.png**

我尝试使用限定名称在我的 UiBinder 模板中使用该图标：

```
 <ui:image field="refreshIcon" resource="/com/smartclient/theme/graphite/public/sc/skins/Graphite/images/actions/refresh.png" /> 
```

并将其用于按钮：

```
 <g:PushButton ui:field="refreshButton" styleName="{style.Buttons}">
        <g:upFace image="{refreshIcon}" />
    </g:PushButton> 
```

不幸的是，这不起作用，eclipse没有什么可抱怨的，但是在运行应用程序时我收到了这个错误：

```
[ERROR] [MonitoringTool] - No com.google.gwt.resources.client.ClientBundle$Source annotation and no resources found with default extensions 
```

如何将引用的**smartgwt.jar**库中的捆绑图标用于我的 PushButton？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:14:44.233

该属性被命名`src`，而不是`resource`：

```
<ui:image field="refreshIcon" src="/com/smartclienttheme/graphite/public/sc/skins/Graphite/images/actions/refresh.png" /> 
```

附带说明一下，只要图像位于类路径中，图像的来源就无关紧要：GWT 从类路径中加载*所有内容*，无论是在 JAR 中还是在文件夹中都无关紧要。

# html - 在 html 导出中以 emacs org 模式为结构化文本着色

> ID：12450697
> 
> 赞同：1
> 
> 时间：2012-09-16T21:01:12.427
> 
> 标签：html, emacs, export, org-mode, colorize

导出到 html 文件时，有没有办法在 emacs org-mode 中保留结构化文档的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:07:23.280

这可以解决问题，试一试： [Htmlize](http://www.emacswiki.org/emacs/Htmlize)

正如它所说：

> “在将 Org 模式文件导出为 HTML 时，您可以使用此包呈现带有语法突出显示的代码片段。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:53:51.457

经过一段时间的研究，我发现在 org 文件的标题部分添加以下内容可以在导出的 html 中启用我想要的颜色。

```
    #+STYLE:html { 字体系列:Consolas; 字体大小：14pt；}
    #+STYLE:pre {font-family: Consolas; 字体粗细：粗体；字体大小：14pt}
    #+STYLE:.title { 文本对齐：居中；颜色：绿色；字体系列：康索拉斯；颜色：#0000FF}
    #+STYLE:h2 { font-family: Consolas; 颜色：#0000FF}
    #+STYLE:h3 { font-family: Consolas; 颜色：#FF00FF}
    #+STYLE:h4 { font-family: Consolas; 颜色：#9900FF}

```

# javascript - 指定内联事件处理程序是否会调用 eval()？

> ID：12450698
> 
> 赞同：4
> 
> 时间：2012-09-16T21:01:25.930
> 
> 标签：javascript

*正如 Douglas Crockford 在JavaScript，The Good Parts*中提到的，将字符串传递给`setTimeout`或`setInterval`调用`eval()`，应该避免：

```
setTimeout('console.log("this uses eval()");', 100); 
```

考虑到这一点，使用内联事件处理程序时是否会发生同样的事情，像这样？：

```
<button onclick="console.log('click!');">Click Me</button> 
```

换句话说，当事件被触发时，使用内联事件处理程序是否会产生额外的解析开销，或者是在初始文档加载期间完成的解析以及其他所有内容（例如内联脚本块、标题中的脚本等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T21:07:14.763

是的，形象地说，确实如此。*页面中的所有*javascript 的解析方式与传递给`eval()`. `eval()`应该避免，主要是因为它比普通代码慢，因为它需要*额外*的解析。

您可以验证浏览器是否已经编译了处理程序或重新解析它，至少对于具有良好开发工具的浏览器（示例代码使用 jQuery，但当然您可以用纯 JS 重写它）：

```
<div id="test" onclick="alert('tested')">Click</div>
<script>
console.log(typeof $('#test')[0].onclick);
console.log($('#test')[0].onclick);
</script> 
```

在我的 Chrome 测试中，这会记录以下内容：

```
Type of handler: function
function onclick(event) {
  alert('click')
} 
```

很明显，该`onclick`属性是一个编译`function`值。您还可以看到为处理程序生成的额外代码，即包裹在内联代码周围的函数。您还可以在处理程序中设置断点并观察堆栈跟踪以验证其中没有任何`eval`调用。

# gwt - 标准模式对齐

> ID：12450701
> 
> 赞同：0
> 
> 时间：2012-09-16T21:01:30.867
> 
> 标签：gwt, uibinder

根据[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Standards](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Standards)我不打算使用 DockPanel、VerticalPanel、Horizo​​ntalPanel。但这些是唯一支持 hasverticalalignment 和 hashorizo​​ntalalignment 的面板。如果我想符合标准模式，我应该如何对齐小部件？或者我应该使用 VericalPanel 和 Horizo​​ntalPanel 将项目保持在当前形式，并忽略 eclipse 给我的警告：

> [INFO] [project] - GWT 不再支持 Quirks 模式 (document.compatMode='BackCompat')。
> 确保您的应用程序的宿主 HTML 页面具有标准模式 (document.compatMode='CSS1Compat') doctype，
> 例如，通过在应用程序的 HTML 页面的开头使用 <!doctype html>。
> 
> 要继续使用此不受支持的呈现模式和风险布局问题，请通过将以下行添加
> 到您的 *.gwt.xml 模块文件来禁止显示此消息：
>   <extend-configuration-property name="document.compatMode" value="BackCompat"/>

PS：我在 uibinder 工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:55:07.240

大多数 UI 专家认为使用表格进行布局是一种不好的做法。这些布局是死板的——它们不能很好地适应内容的大小。

您可以在不使用这些面板的情况下构建您想要的任何布局。水平对齐是最简单的一种：您只需将 CSS 规则“text-align: center”（左、右）添加到父窗口小部件。对于更有趣的效果，您可以使用“float:left”或“float:right”。在极少数情况下，您可能想要使用绝对定位（“position: absolute”、“left: 20px”；“top: 20px”）。

垂直对齐有点棘手，但通常您希望您的内容从上到下流动。您可以通过使用顶部和底部边距或设置行高来管理垂直定位。

您可以在 Internet 上找到许多有关构建流畅布局的重要资源。大多数建议的 html 和 CSS 解决方案都可以与 GWT 一起使用，而 Ui:Binder 是一种非常方便的方式。您还可以在 StackOverflow 中搜索您遇到的任何问题的布局解决方案。

# git - Source Forge repo 给出“拒绝非快进 refs/heads/master”错误

> ID：12450703
> 
> 赞同：9
> 
> 时间：2012-09-16T21:01:40.507
> 
> 标签：git, version-control

我[将树重写到我的 git 存储库以修复作者姓名和电子邮件地址中的错误](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)。现在我正在尝试将固定树推送到我在 Source Forge 上的存储库。[CharlesB 告诉我如何更新 Source Forge 服务器上的配置文件](https://stackoverflow.com/questions/12449230/moving-remote-branch/12449278#12449278)。我的配置文件如下所示：

```
[codeguru@shell-24003 bbct]$ cat config
[core]
        repositoryformatversion = 0
        filemode = true
        bare = true
        sharedrepository = 2
[receive]
        denyNonFastforwards = false 
```

现在，当我尝试强制推送时，出现以下错误：

```
$ git push -f
Password:
Counting objects: 464, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (148/148), done.
Writing objects: 100% (452/452), 470.65 KiB, done.
Total 452 (delta 268), reused 417 (delta 247)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To ssh://codeguru@git.code.sf.net/p/bbct/code
 ! [remote rejected] master -> master (non-fast-forward)
error: failed to push some refs to 'ssh://codeguru@git.code.sf.net/p/bbct/code' 
```

这里发生了什么？更重要的是，我该如何解决？

**更新：**

在公共校园计算机上运行`git push -f`会给出与上述相同的错误消息。

**另一个更新：**

我将 SF 存储库克隆到一个临时文件夹，将此临时存储库的主分支重置为在第一次提交之前使用错误的作者和电子邮件提交，然后运行`git push -f`​​. 我收到与原始存储库完全相同的错误消息：

```
$ git push -f
Password:
Total 0 (delta 0), reused 0 (delta 0)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To ssh://codeguru@git.code.sf.net/p/bbct/code
 ! [remote rejected] master -> master (non-fast-forward)
error: failed to push some refs to 'ssh://codeguru@git.code.sf.net/p/bbct/code' 
```

我想 SF 真的不希望我在这里做一个非快进提交:-(

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-17T07:02:41.873

这可能是一个简单的案例：

```
[receive]
        denyNonFastForwards = false 
```

`F`注意 ' '的大写 ' `Forwards`'。
因此，在 Source Forge 服务器上修复您的配置文件，您`git push -f`应该可以从任何工作站成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T17:46:29.707

嗯，这实际上是 SourceForge 问题，也可能是用户错误。在 SF shell 中，我最初在`/home/scm_git`目录下编辑了我的项目的配置文件。向顺丰提交ticket后，发现原来是正确的目录`/home/git`。在为我的项目编辑正确子目录中的配置文件后，我强制推送并成功更新了主分支。

# python - 如何在 Python 中打印空格？

> ID：12450704
> 
> 赞同：9
> 
> 时间：2012-09-16T21:02:11.990
> 
> 标签：python

在 C++`\n`中使用，但我在 Python 中使用什么？

我不想使用： `print (" ")`。这似乎不是很优雅。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-10-29T21:25:34.800

这是一个简短的答案

```
x=' ' 
```

这将打印一个空白

```
print(x) 
```

这将打印 10 个空格

```
print(10*x) 
```

`Hello`在和之间打印 10 个空格`World`

```
print(f"Hello{x*10}World") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T21:04:58.437

如果您需要用空格分隔某些元素，您可以执行类似的操作

```
print "hello", "there" 
```

注意“hello”和“there”之间的逗号。

如果你想打印一个新行（即`\n`），你可以`print`不带任何参数使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-16T21:03:10.693

一个单独的`print`将输出一个换行符。

```
print 
```

在 3.x`print`中是一个函数，因此：

```
print() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-03T10:59:45.790

`print("hello" + ' '*50 + "world")`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-16T21:52:20.100

以下任何一项都将起作用：

```
print 'Hello\nWorld'

print 'Hello'
print 'World' 
```

此外，如果您想打印一个空行（而不是新行），`print`或者`print()`将工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-25T20:23:34.923

首先，对于换行符，最简单的做法是使用单独的打印语句，如下所示：

```
print("Hello")
print("World.")
#the parentheses allow it to work in Python 2, or 3. 
```

要进行换行，并且仍然只有一个打印语句，只需在其中使用“\n”，如下所示：

```
print("Hello\nWorld.") 
```

下面，我解释空格，而不是换行符......

我看到这里有很多人使用 + 符号，我个人觉得很丑。我觉得丑陋的例子：

```
x=' ';
print("Hello"+10*x+"world"); 
```

上面的例子目前是，当我输入这个最高投票的答案时。程序员显然是作为“;”从 PHP 进入 Python 的。每行末尾的语法，不需要很简单。它在 Python 中没有出现错误的唯一原因是因为分号可以在 Python 中使用，实际上应该只在您尝试将两行放在一条上时使用，出于美学原因。您不应该将它们放在 Python 中每一行的末尾，因为它只会增加文件大小。

就个人而言，我更喜欢使用 %s 表示法。在我更喜欢的 Python 2.7 中，您不需要括号“（”和“）”。但是，无论如何您都应该包含它们，这样您的脚本就不会在 Python 3.x 中出现错误，并且可以在其中任何一个中运行。

假设您希望您的空间为 8 个空格，那么我将在 Python > 3.x 中执行以下操作

```
print("Hello", "World.",  sep=' '*8, end="\n")
# you don't need to specify end, if you don't want to, but I wanted you to know it was also an option
#if you wanted to have an 8 space prefix, and did not wish to use tabs for some reason, you could do the following.
print("%sHello World." % (' '*8)) 
```

上述方法也适用于 Python 2.x，但不能添加“sep”和“end”参数，必须在 Python < 3 中手动完成。

**因此**，要具有 8 个空格前缀和 4 个空格分隔符，适用于 Python 2 或 3 的语法将是：

```
print("%sHello%sWorld." % (' '*8, ' '*4)) 
```

我希望这有帮助。

PS您还可以执行以下操作。

```
>>> prefix=' '*8
>>> sep=' '*2
>>> print("%sHello%sWorld." % (prefix, sep))
    Hello  World. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-27T22:54:19.117

只需将变量分配给`()`or `" "`，然后在需要时输入

```
print(x, x, x, Hello World, x) 
```

或类似的东西。

希望这不那么复杂:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-24T04:05:54.250

rjust() and ljust()

```
test_string = "HelloWorld"

test_string.rjust(20)
'          HelloWorld'

test_string.ljust(20)
'HelloWorld          ' 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-17T10:06:32.403

空格字符是十六进制 0x20、十进制 32 和八进制 \040。

```
>>> SPACE = 0x20
>>> a = chr(SPACE)
>>> type(a)
<class 'str'>
>>> print(f"'{a}'")
' ' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-31T17:15:26.677

尝试`print`

例子：

```
print "Hello World!"
print
print "Hi!" 
```

希望这有效！:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-16T06:11:17.017

这是如何在 python 中打印空格。

```
import string  
string.whitespace  
'\t\n\x0b\x0c\r '   
i.e .   
print "hello world"   
print "Hello%sworld"%' '   
print "hello", "world"   
print "Hello "+"world 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-03-04T01:12:58.893

很多用户给了你答案，但你还没有将任何一个标记为答案。

你用 . 添加一个空行`print()`。您可以使用`'\n'`like in 在字符串中强制换行`print('This is one line\nAnd this is another')`，因此您可以使用打印 10 个空行`print('\n'*10)`

您可以通过将一个空格字符串复制 50 次来在一个字符串中添加 50 个空格，您可以通过乘法来做到这一点`'Before' + ' '*50 + 'after 50 spaces!'`

您可以使用空格或特定字符在左侧或右侧填充字符串，`.ljust()`例如`.rjust()`，您可以在新行上添加“Hi”和“Carmen”，在左侧填充空格并对齐到与`'Hi'.rjust(10) + '\n' + 'Carmen'.rjust(10)`

我相信这些应该回答你的问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-28T00:28:49.367

Sometimes, `pprint()` in `pprint` module works wonder, especially for `dict` variables.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-04-24T15:20:07.383

要在打印的文本之间打印任意数量的行，请使用：

`print("Hello" + '\n' *`*插入空白行数*`+ "World!")`

'\n' 可以用来做空白，相乘，它会做多个空白行。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-02T19:16:47.197

在 Python2 中有这个。

```
def Space(j):
    i = 0
    while i<=j:
        print " ",
        i+=1 
```

要使用它，语法是：

```
Space(4);print("Hello world") 
```

我还没有将它转换为 Python3。

# java - 触摸后连续移动？

> ID：12450705
> 
> 赞同：0
> 
> 时间：2012-09-16T21:02:27.993
> 
> 标签：java, android

发现了很多类似的问题，但没有一个能回答我自己的问题。这可能是一件非常简单的事情，但为时已晚，我无法理解。我有一个我正在开发的安卓游戏，你触摸屏幕，它会朝那个方向“发射”一个精灵。我已经让大部分代码工作了，但是，在精灵触发并离开后，它会到达接触点，然后只是摆动。我希望它沿着那个角度继续前进并最终反弹......

这是我的代码（以及重要的位）：

```
List<TouchEvent> touchEvents = game.getInput().getTouchEvents();
        int len = touchEvents.size();

        for(int i = 0; i < len; i++) {
            TouchEvent event = touchEvents.get(i);                        
            if(event.type == TouchEvent.TOUCH_UP) {
                touchPoint.set(event.x, event.y);
                guiCam.touchToWorld(touchPoint);                               
            }
        }

        //Log.d("PANDAM", touchPoint.x + "|" + touchPoint.y);
        float speed = 112f;
        double theta = 180.0 / Math.PI * Math.atan2(panda_y - touchPoint.y, panda_x - touchPoint.x);
        Log.d("PANDAM", " > "+theta+" < ");

        movePanda(theta, speed, deltaTime); 
```

而“movePanda”方法：

```
 private void movePanda(double angle, float speed, float deltaTime)
{   
    panda_x += speed * Math.cos(angle)*deltaTime;
    panda_y += speed * Math.sin(angle)*deltaTime;       
} 
```

我的问题是，如何让熊猫沿着触摸矢量继续前进，而不是在到达原始触摸点时飞出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:39:30.990

您似乎在动画的每一步都在重新计算角度，但实际上您需要记住刚开始移动时的角度。当您通过原始触摸点时，角度会改变以指向另一个方向，因此如果您在每个动画步骤中重新计算它，它将改变并最终指向另一个方向。

# php - CakePHP如何检索带有条件的HABTM数据？

> ID：12450707
> 
> 赞同：11
> 
> 时间：2012-09-16T21:02:32.460
> 
> 标签：php, cakephp, has-and-belongs-to-many

我使用 CakePHP 2.2.2 我有 3 张桌子：餐厅、厨房和 kitchens_restaurants - 加入 HABTM 的桌子。

在餐厅模型中，我有：

```
public $hasAndBelongsToMany = array(
    'Kitchen' =>
        array(
            'className'              => 'Kitchen',
            'joinTable'              => 'kitchens_restaurants',
            'foreignKey'             => 'restaurant_id',
            'associationForeignKey'  => 'kitchen_id',
            'unique'                 => true,
            'conditions'             => '',
            'fields'                 => 'kitchen',
            'order'                  => '',
            'limit'                  => '',
            'offset'                 => '',
        ), 
```

问题是我的主页有单独的控制器，我需要从具有复杂条件的模型中检索数据。

我添加了

```
public $uses = array('Restaurant'); 
```

到我的主页控制器，这里是我需要你建议的部分。

我只需要选择厨房 = $id 的餐厅。我试图添加

```
public function index() {   
$this->set('rests', $this->Restaurant->find('all', array(
'conditions' => array('Restaurant.active' => "1", 'Kitchen.id' => "1")
)));

} 
```

我得到了 SQLSTATE[42S22]: Column not found: 1054 Unknown column in 'where 子句' 错误。显然我需要从“HABTM 连接表”中获取数据，但我不知道如何。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-16T22:35:52.760

**TLDR：**

要检索基于[[HABTM]](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)关联的条件受限的数据，您需要使用[[Joins]](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。

**解释：**

下面的代码遵循[[ Fat Model/Skinny Controller ]](http://bitfluxx.com/2008/01/23/cakephp-best-practices-fat-models-and-skinny-controllers.html)口头禅，因此逻辑大部分都在模型中，并且只是从控制器中调用。

[注意：如果您遵循[CakePHP 约定]](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html)（看起来就是这样），则不需要所有这些 HABTM 参数。

下面的代码还没有经过测试（我在这个网站上写的），但它应该非常接近，至少能让你朝着正确的方向前进。

**代码：**

//餐厅模型

```
public $hasAndBelongsToMany = array('Kitchen');

/**
 * Returns an array of restaurants based on a kitchen id
 * @param string $kitchenId - the id of a kitchen
 * @return array of restaurants
 */
public function getRestaurantsByKitchenId($kitchenId = null) {
    if(empty($kitchenId)) return false;
    $restaurants = $this->find('all', array(
        'joins' => array(
             array('table' => 'kitchens_restaurants',
                'alias' => 'KitchensRestaurant',
                'type' => 'INNER',
                'conditions' => array(
                    'KitchensRestaurant.kitchen_id' => $kitchenId,
                    'KitchensRestaurant.restaurant_id = Restaurant.id'
                )
            )
        ),
        'group' => 'Restaurant.id'
    ));
    return $restaurants;
} 
```

//任何控制器

```
public function whateverAction($kitchenId) {
    $this->loadModel('Restaurant'); //don't need this line if in RestaurantsController
    $restaurants = $this->Restaurant->getRestaurantsByKitchenId($kitchenId);
    $this->set('restaurants', $restaurants);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-28T12:46:59.780

有一种比 Dave 提供的解决方案更清洁的方法。

首先，您需要**在*****厨房*****模型中设置*****餐厅*****和*****厨房*****之间的反向 HABTM 关系。**

 ***比您只需*找到*您感兴趣的*厨房（id = 1），您将获得相关的餐厅，使用*[可包含行为按](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)*餐厅*字段进行过滤。

```
$this->Restaurant->Kitchen->Behaviors->attach('containable'); // Enable Containable for Kitchen Model

$this->Restaurant->Kitchen->find('first', array(
    'recursive' => -1 // don't collect other data associated to Kitchen for performance purpose
    'conditions' => array('Kitchen.id' => 1),
    'contain' => array('Restaurant.active = 1')
)); 
```

[资源](http://devblog.springest.com/how-to-find-related-data-in-habtm-models)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-14T14:55:14.550

您可以不需要使用 [join]，因为使用设置了 [HABTM] 的关联
Kitchen 模型 hasAndBelongsToMany Restaurant 模型，因此您可以编写如下代码

```
KitchensControllers
<?php
  public function index() {
    $this->Kitchen->recursive = 0;
    $kitchens = $this->Kitchen->find('all', array('contain' => array('Restaurant')));
    $this->set('kitchens', $kitchens);
  }
?> 
```

祝你好运！***

# php - 如何在 win 或 linux 机器上本地安装 postgresql_wordpress？

> ID：12450714
> 
> 赞同：0
> 
> 时间：2012-09-16T21:03:16.283
> 
> 标签：php, wordpress, heroku, cloud

我正在尝试这个： [https ://github.com/mhoofman/wordpress-heroku](https://github.com/mhoofman/wordpress-heroku)

它只是一个你可以在 heroku 上安装的 wordpress，但是在你在那里部署它之前你必须安装插件，因为在 heroku 本身上你只有阅读权限。因此我想在本地测试几个插件然后上传它们......

但是 xampp 不适用于 postgresql ......

使用 postgresql 运行 localy wordpress 有哪些替代方案？

# .net - 如何在 MSBuild 中合并两个 ItemGroup

> ID：12450715
> 
> 赞同：0
> 
> 时间：2012-09-16T21:03:19.630
> 
> 标签：.net, build, msbuild, compilation

我有两个 ItemGroups：

```
<ItemGroup>
    <Compile Include="A.cs" />
    <Compile Include="B.cs" />
    <Compile Include="C.cs" />
</ItemGroup>
<ItemGroup>
    <PEG Include="A.cs" />
    <PEG Include="Y.cs" />
    <PEG Include="Z.cs" />
</ItemGroup> 
```

我需要将每个项目添加`PEG`到`Compile`IF AND ONLY IF 该项目不是 AREADY in `Compile`。

有没有简单的方法可以做到这一点？

我的第一次尝试是这样的：

```
<ItemGroup>
  <Compile Include="%(PEG.Identity)" Condition=" '$(Compile)' != '%(PEG.Identity)' " />
</ItemGroup> 
```

但由于明显的原因，这不起作用。我真的不想在 MSBuild 中进行手动反连接。

也许使用`Exclude`会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:22:34.747

好吧，我想通了。

我做错的第一件事是使用`$(Compile)`而不是`@(Compile)`.

接下来，我的房产走上了正轨`Exclude`。

这是我想出的：

```
<?xml version="1.0" encoding="utf-8" ?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Compile">
  <ItemGroup>
    <Compile Include="A.cs" />
    <Compile Include="B.cs" />
    <Compile Include="C.cs" />
  </ItemGroup>
  <Target Name="Compile">
    <ItemGroup>
        <PEG Include="A" />
        <PEG Include="D" />
    </ItemGroup>
    <Message Text="Compile = @(Compile)" />
    <Message Text="PEG     = @(PEG)" />
    <ItemGroup>
        <Compile Include="%(PEG.Identity).cs" Exclude="@(Compile)" />
    </ItemGroup>
    <Message Text="Compile = @(Compile)" />
  </Target>
</Project> 
```

完成后，根据需要`Compile`包含`A.cs;B.cs;C.cs;D.cs`。

# animation - 在 THREE.js 中为 Canvas 广告牌制作动画

> ID：12450716
> 
> 赞同：9
> 
> 时间：2012-09-16T21:03:25.483
> 
> 标签：animation, three.js, textures

每个人，

我正在尝试对映射到平面（如广告牌）的基于 Canvas 的纹理进行动画处理。我已经提出要包含**material.needsUpdate**和**texture.needsUpdate**，但我仍然无法让纹理栩栩如生。我还包括了一个旋转立方体，这样我就知道动画例程在某种程度上发挥了作用。

这是代码：

```

        if ( window.innerWidth === 0 ) { window.innerWidth = parent.innerWidth; window.innerHeight = 父级.innerHeight; }

            var 相机、场景、渲染器；
            var 网格、几何、材料；
            var light、sign、animTex；
            var 画布，上下文；

            在里面（）;
            动画（）；

            函数初始化（）{

                camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1200);
                相机.位置.z = 700;

                场景 = 新的三个场景（）；

                材料=新的三。MeshLambertMaterial（
                    {颜色：0x885522
                    ，线框：假
                     ，透支：假
                    });
                几何=新的三立方几何（80、120、100、1、1、1）；
                网格=新的三。网格（几何，材料）；

                标志 = 创建标志（）；

                光 = 新的三。方向光（0xFFFFFF，3.0）；
                light.position = new THREE.Vector3(5,10,7);
                light.target = new THREE.Vector3(0,0,0);

                场景.add（网格）；
                场景.add（符号）；
                场景.添加（灯光）；

                渲染器 = 新的 THREE.CanvasRenderer();
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(renderer.domElement);

            }
            函数 createSign() {
                canvas = document.createElement("canvas");
                上下文 = canvas.getContext("2d");
                画布.宽度 = 200;
                画布.高度 = 200;
                上下文 = canvas.getContext("2d");              
                var texture = new THREE.Texture(canvas);
                纹理.needsUpdate = true;
                var material = new THREE.MeshBasicMaterial({ map : texture, overdraw: true });
                material.needsUpdate = true;
                var mesh = new THREE.Mesh(new THREE.PlaneGeometry(200, 200), material);
                网格.doubleSided = true;
                返回网格；
            }

            函数动画（）{

                var time = Date.now()*0.01;
                var sinTime = Math.sin ( 时间 * 0.05 ) * 100;
                var cosTime = Math.cos ( 时间 * 0.05 ) * 100;

                mesh.rotation.y = sinTime*0.01;

                requestAnimationFrame( 动画 );
                context.fillStyle="黑色";
                context.fillRect(0,0,canvas.width,canvas.height);
                context.fillStyle="白色";
                context.fillRect ( (canvas.width/2) + sinTime, (canvas.height/2) + cosTime, 20, 20 )
                renderer.render（场景，相机）；
            }

```

这会运行，但我似乎无法更新 Canvas 纹理材质。我忽略了什么？非常感谢任何指点！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T21:24:19.303

将其放在您的`render()`电话之前：

```
sign.material.map.needsUpdate = true; 
```

小提琴：http: [//jsfiddle.net/pPKVa/](http://jsfiddle.net/pPKVa/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-22T23:51:19.087

每次使用纹理（每次渲染循环）时，该`needsUpdate`标志都会重置（为 false），因此需要在渲染循环中将其设置为 true（在渲染调用之前，否则它将关闭一帧）。所以在你的例子中，把`sign.material.map.needsUpdate = true`before `renderer.render( scene, camera )`。`texture.needsUpdate = true`并且`material.needsUpdate = true`不需要。

此外，您只需要`needsUpdate`在纹理上设置标志，因为材质属性不会改变。

# objective-c - 用字典更正 plist

> ID：12450723
> 
> 赞同：-1
> 
> 时间：2012-09-16T21:04:39.523
> 
> 标签：objective-c, ios, xcode

如果Plist`documents directory`不存在，则将其复制到。

如果它已经存在，我想使用 in 中的“Name `NSDictionary`”`bundleArray`键`NSDictionary`在`documentsArray`.

找到匹配项后，我想检查字符串中的更改并在有更改时替换它们。

如果未找到匹配项，则意味着必须将此字典添加到文档 plist。

这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[self managePlist];
return YES;
}

- (void)managePlist {

NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Objects.plist"];
NSString *bundle = [[NSBundle mainBundle] pathForResource:@"Objects" ofType:@"plist"];
NSFileManager *fileManager = [NSFileManager defaultManager];

if (![fileManager fileExistsAtPath: path]) {
    [fileManager copyItemAtPath:bundle toPath:path error:&error];

} else {

    NSArray *bundleArray = [[NSArray alloc] initWithContentsOfFile:bundle];
    NSMutableArray *documentArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

    BOOL updateDictionary = NO;
    for(int i=0;i<bundleArray.count;i++) {

        NSDictionary *bundleDict=[bundleArray objectAtIndex:i];

        BOOL matchInDocuments = NO;
        for(int ii=0;ii<documentArray.count;ii++)
        {
            NSMutableDictionary *documentDict = [documentArray objectAtIndex:ii]; 
            NSString *bundleObjectName = [bundleDict valueForKey:@"Name"];
            NSString *documentsObjectName = [documentDict valueForKey:@"Name"];
            NSRange range = [documentsObjectName rangeOfString:bundleObjectName options:NSCaseInsensitiveSearch];
            if (range.location != NSNotFound) {
                matchInDocuments = YES;
            }
            if (matchInDocuments) {

                if ([bundleDict objectForKey:@"District"] != [documentDict objectForKey:@"District"]) {
                    [documentDict setObject:[bundleDict objectForKey:@"District"] forKey:@"District"];
                    updateDictionary=YES;
                }
            }

            else {
                [documentArray addObject:bundleDict];
                updateDictionary=YES;
            }
        }
    }
    if(updateDictionary){
        [documentArray writeToFile:path atomically:YES];
    }

} 
```

}

如果我现在运行我的应用程序，我会收到以下消息：`'-[__NSCFDictionary setObject:forKey:]: mutating method sent to immutable object'`

我怎样才能解决这个问题？

解决此问题后，您认为我的代码会起作用吗？

如果没有，我会很高兴就如何做到这一点提出一些建议。我已经挣扎了一段时间，真的需要发布带有更正的更新！非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:07:44.760

大概`documentDict`是实际上是不可变的。即使您将其分配给`NSMutableDictionary`，这也不能准确地描述基础数据。

```
NSMutableDictionary *documentDict = [documentArray objectAtIndex:ii]; 
```

应该：

```
NSMutableDictionary *documentDict = [NSMutableDictionary dictionaryWithDictionary:[documentArray objectAtIndex:ii]]; 
```

无论您在何处编辑`documentDict`，添加：

```
 [documentArray replaceObjectAtIndex:ii withObject:documentDict]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:11:01.277

当您从文件中读取 plist 时，会创建一个**具有不可变子**项的不可变字典/数组，因此您的

```
NSMutableDictionary *documentDict = [documentArray objectAtIndex:ii]; 
```

line 完全是一个谎言——你没有可变字典。要从 plist 创建可变对象，请查看[CFPropertyListCreateWithData](https://developer.apple.com/library/mac/ipad/#documentation/CoreFoundation/Reference/CFPropertyListRef/Reference/reference.html)并指定`kCFPropertyListMutableContainersAndLeaves`为可变性选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T18:39:12.783

这是我使用 James Webster 的答案的最终和工作代码。感谢 H2CO3 的贡献。

```
- (void)managePlist {
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Object.plist"];
NSString *bundle = [[NSBundle mainBundle] pathForResource:@"Object" ofType:@"plist"];
NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:path]) {
    [fileManager copyItemAtPath:bundle toPath:path error:&error];
} 
else 
{
    NSArray *bundleArray = [[NSArray alloc] initWithContentsOfFile:bundle];
    NSMutableArray *documentArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

    BOOL updateDictionary = NO;
    for(int i=0;i<bundleArray.count;i++) {
        NSDictionary *bundleDict=[bundleArray objectAtIndex:i];            

        for(int ii=0;ii<documentArray.count;ii++)
        {
            NSMutableDictionary *documentDict = [NSMutableDictionary dictionaryWithDictionary:[documentArray objectAtIndex:ii]];
            NSString *bundleObjectName = [bundleDict valueForKey:@"Name"];
            NSString *documentsObjectName = [documentDict valueForKey:@"Name"];
            NSRange range = [documentsObjectName rangeOfString:bundleObjectName options:NSCaseInsensitiveSearch];
            if (range.location != NSNotFound) {
                 NSString *districtString = [bundleDict objectForKey:@"District"];
                if ([documentDict objectForKey:@"District"] != districtString) {
                    [documentDict setObject:districtString forKey:@"District"];
                    [documentArray replaceObjectAtIndex:ii withObject:documentDict];
                    updateDictionary=YES;
                }
            }
        }
    }
    if(updateDictionary){
        [documentArray writeToFile:path atomically:YES];
    }
}
} 
```

# java - 是否可以在网络服务器上编译 Java？

> ID：12450728
> 
> 赞同：0
> 
> 时间：2012-09-16T21:05:24.183
> 
> 标签：java, apache, nginx, webserver

通过使用 JRE 或其他一些运行时环境，是否可以在 Apache 或 Nginx 等 Web 服务器上编译 Java 代码？具体来说，我希望有一个可以接受用户输入（Java 代码）的 Web 应用程序，当用户点击运行时，它会将 Java 编译为 Java 字节代码并显示结果，就像 Eclipse 一样。
这种技术甚至存在吗？这是否违背了编译语言的逻辑？提前感谢您的时间。友好地，詹姆斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T21:08:20.103

运行 Apache 的服务器也需要 JDK。您可以轻松地将输入写入文件、编译、运行并将结果显示给用户。这可以通过在 Tomcat 中运行的 CGI 脚本或 Java EE 应用程序或类似应用程序来完成。JDK 是必需的，JRE 是不够的。

不过，请考虑一下潜在的安全风险。根据程序实际执行的操作，它可能会导致您的机器或其他机器出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:09:08.907

当然这是可能的。但是您需要一个 JDK，以及一些服务器端脚本（PHP、Ruby、Python、Java ...），它们将源代码作为输入并调用 Java 编译器来编译代码。
您必须考虑的是安全隐患。然后每个用户都可以上传代码，这些代码将在服务器上执行。因此，您必须确保代码在沙箱中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T21:10:33.430

有几个网站可以做到这一点。我用过的一个是[http://www.ideone.com](http://www.ideone.com)。

您可以使用 JDK 和各种脚本来重现它，或者您可以从头开始编写自己的编译器。无论哪种方式，您都需要某种编译器来实际编译代码。

# jquery - jQuery Inview 动画

> ID：12450729
> 
> 赞同：1
> 
> 时间：2012-09-16T21:05:24.310
> 
> 标签：jquery, jquery-ui, jquery-animate, animated

我有一个浮动导航栏，它给我带来了一些小问题......它在大多数情况下都能完美运行......但有一个小例外。看一下代码：

```
<script type="text/javascript">
    $('#brand_logo').on('inview mouseenter', function(event, visible) {
        if (visible == true) {
            // console.log("I got my eye on it Charlie");
            $("#topnav").animate({
                opacity: 1.0,
                width: '98%',
                height: '38px'
            });
            // $(".head-wrap-left").hide();
        } else {
            // console.log("Let's set the mood.");

            $("#topnav").animate({
                opacity: 0.9, //0.6 original
                  width: '310px',
                  height: '33px',

            });
            $("#topnav_behind").slideUp();

            $('#topnav').bind({
                        mouseenter: function() {
                            $("#topnav").animate({opacity: 1.0, width: '98%', height: '38px'})
                        },
                        mouseleave: function() {
                            $("#topnav").animate({opacity: 0.9, width: '310px', height: '33px'})
                        }
                        });
            };

            // $(".head-wrap-left").show();

    });
</script> 
```

当我向下滚动页面时，它会将导航栏缩小到 310 像素、高度等。如果用户位于页面的一半并且他们将鼠标悬停在导航栏的缩小部分上，它会打开并显示完整的导航栏。当他们的鼠标离开时，它会收缩回来（假设他们仍然在页面的中间。）

当用户回到顶部时，导航栏打开（它应该如何）。如果我将鼠标悬停在栏上，它不会做任何事情，但是当我的鼠标离开时，它会缩小。当它位于页面顶部时，我不希望这种情况发生。有没有比查看“#brand_logo”是否在视口中更好的检查方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:18:22.347

在 mouseleave 事件函数中检查滚动条向下的距离：

```
mouseleave: function() {
            if($(window).scrollTop() > 500 {
                   $("#topnav").animate({opacity: 0.9, width: '310px', height: '33px'})
             }
    } 
```

将 500 更改为最合适的值。

# google-app-engine - 为什么这些延迟任务没有按照它们添加的顺序执行？

> ID：12450733
> 
> 赞同：3
> 
> 时间：2012-09-16T21:05:46.790
> 
> 标签：google-app-engine, python-2.7, twilio

我正在使用 Twilio 通过 appengine 发送短信。Twilio 不接受超过 160 个字符的短信，所以我必须拆分它们。我将短信拆分并发送如下：

```
def send_sms_via_twilio(mobile_number, message_text):
    client = TwilioRestClient(twilio_account_sid , twilio_auth_token)
    message = client.sms.messages.create(to=mobile_number, from_=my_twilio_number, body=message_text)

split_list = split_sms(long_message)
for each_message in split_list:
    send_sms_via_twilio(each_message) 
```

但是我发现发送的顺序不同。例如，有时我会收到 2/5 然后 1/5 然后 4/5 等消息，其他时候顺序是正确的。split_list 的顺序绝对正确。为了克服短信的错误顺序，我试过了

```
for each_message in split_list:
    deferred.defer(send_sms_via_twilio, each_message, _countdown=1) 
```

但是我遇到了同样的问题。然后我尝试了

```
for each_message in split_list:
    deferred.defer(send_sms_via_twilio, each_message, _countdown=1, _queue="send-text-message") 
```

并将我的队列定义为

```
- name: send-text-message
  rate: 1/s
  bucket_size: 10
  max_concurrent_requests: 1
  retry_parameters:   
    task_retry_limit: 5 
```

认为问题是并发性（在 python27 中运行）并且如果我限制 max_concurrent_requests 这个问题将得到解决。但是问题仍然存在，即文本仍然以错误的顺序发送。我检查了日志，但看不到任何关于任务失败的通知——它们似乎只是以错误的顺序执行。

有什么我想念的吗？我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:28:42.900

请注意，根据定义，SMS 消息传递（特别是 SMPP 等底层协议）是异步的。这意味着您无法指定**不同**SMS 消息的顺序。

有**一种**方法可以通过在这些消息的二进制正文中使用 UDH（[用户定义的标头）来指定 SMS 数据包的顺序。](http://en.wikipedia.org/wiki/Concatenated_SMS)但这仅适用于长 SMS 消息——那些太长而无法在一条消息中发送的消息。例如，如果您的消息超过 160 个 GSM-7 字符或 80 个 UTF-16 字符，它将作为多条 UDH 消息发送。

在这种情况下，手机将不会在消息部分到达时显示它们。它将在内存中收集它们，直到最后一个出现，然后以正确的顺序组装它们。对于最终用户来说，这只是一条比平时更长的消息，您不必在消息中写“1/3”、“2/3”、...。

免责声明：我在一家公司工作，该公司使您能够发送和接收带有用户指定标头 (UDH) 和/或标准长消息的多条二进制消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T15:46:32.187

如果您没有绑定到 Twilio，请尝试使用[SMSified](http://smsified.com/)。他们会自动为您拆分消息，确保其顺序正确，并在消息末尾添加“1/2、2/2...”。换句话说，您只需将完整的消息发送到他们的 REST API，无论长度如何，其余的都由他们处理。由于他们还使用 REST API，您可以继续使用 Python。

# java - 使用套接字远程连接两台非本地计算机

> ID：12450736
> 
> 赞同：2
> 
> 时间：2012-09-16T21:06:00.393
> 
> 标签：java, sockets

这个问题似乎很明显要问，但我花了一个多小时试图找到答案。

首先，我主持并等待有人连接。然后，从应用程序的另一个实例中，我尝试使用套接字连接 - 对于构造函数，我使用 InetAddress、端口。端口总是正确的，如果我使用“localhost”作为地址，一切正常。但是，如果我输入我的 IP（我从谷歌搜索“我的 ip 是什么”得到的那个），我会得到一个 IOException。我什至把申请发给了别人，把我的IP给了他，但没有用。

该应用程序的目的是连接两台计算机。它是在 Java 中的。这是相关的代码。

服务器：

```
ServerSocket serverSocket = new ServerSocket(port);
Socket clientSocket = serverSocket.accept(); 
```

客户：

```
InetAddress a = InetAddress.getByName(ip);
Socket s = new Socket(a, port); 
```

我过不去。显然，*int port*和*String ip*的值取自文本字段。

**编辑：我的应用程序的目的是连接两台非本地计算机。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:33:36.000

正如 Greg Hewgill 所提到的，如果您在 NAT 设备（路由器等）后面，您将不得不进行一些端口转发。

基本上，您从谷歌使用“我的 IP 是什么”获得的公共 IP 地址是您的公共 IP 地址，但是由于您使用的路由器连接了多台计算机，因此有一个协议可以将多台计算机映射到单个公共地址称为 NAT。

您需要做的是告诉您的路由器将某个端口上的传入数据包转发到某台计算机。

本文重点介绍了执行此操作的方法[http://www.wikihow.com/Port-Forward](http://www.wikihow.com/Port-Forward)

# objective-c - 访问递归 NSDictionary 中的对象

> ID：12450738
> 
> 赞同：0
> 
> 时间：2012-09-16T21:06:09.620
> 
> 标签：objective-c, xml, nsdictionary

我在访问 NSDictionary 中的对象时遇到问题。

该应用程序从 Web 服务器下载 XML，然后使用 XMLReader 库将其解析为 NSDictionary。现在我不知道如何访问 NSDictionary 中的对象。

我的xml结构是：

```
<xml>
 <categories>
  <category id="1" name="test">
   <questions>
    <question id="1" category_id="1" question="boxes?"/>
    <question id="2" category_id="1" question="cash?"/>
   </questions>
  </category>
  <category id="2" name="blah">
   <questions>
    <question id="3" category_id="2" question="hara?"/>
   </questions>
  </category>
 </categories> 
```

```
NSURL *url = [[NSURL alloc] initWithString:@"http://localhost/DoNotForget/API/database.xml"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];  
NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"database.xml"];
[request setDownloadDestinationPath:filePath];
[request startSynchronous];

NSData *data = [NSData dataWithContentsOfFile: filePath];
NSError *err;
NSDictionary *test = [XMLReader dictionaryForXMLData:data error:err];
NSLog(@"%@", test); 
```

例如，我如何在类别项目上运行循环，或者例如访问类别 id 1 中的问题 id 1？

对不起我的英语不好，请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T07:14:52.567

类似的东西不起作用？

1.  访问问题

    MyQuestion *question = [[test objectForKey:@"1"] objectForKey:@"1"];

    2.For应该运作良好

    for (NSString* key in test) { id value = [test objectForKey:key]; // 使用 Object 或者你可以使用上面的代码来访问里面的属性 }

# javascript - Maphilight - 需要它来停用新鼠标点击时的突出显示

> ID：12450745
> 
> 赞同：1
> 
> 时间：2012-09-16T21:07:35.447
> 
> 标签：javascript, jquery, maphilight

我正在使用 David Lynch 的 Maphilight，只要它在鼠标悬停时突出显示，效果很好。我遇到的问题并且似乎没有任何示例是单击一个区域时，使区域 A. 突出显示并保持点亮，B. 单击另一个区域时停用。

本质上，我正在使用演示页面中的脚本并尝试相应地对其进行修改，但是，我尝试过的一切都没有奏效。它看起来非常简单明了，所以我很惊讶几乎没有关于这个功能的文档。

有人有什么想法吗？基本上，我用作地图的图像是一个圆圈，分为四个象限。鼠标悬停时，每个象限都应亮起，单击时保持亮起，直到选择了地图上的新象限。这是我用于脚本的内容：

```
$('.map').maphilight({fillColor: 'ff0000'});

$('#q1, #q2, #q3, #q4').click(function(e) {
        e.preventDefault();
        var data = $(this).mouseout().data('maphilight') || {};
        data.alwaysOn = !data.alwaysOn;
        $(this).data('maphilight', data).trigger('alwaysOn.maphilight');
    }); 
```

您可能有的任何帮助或建议都会很棒。

更新：我正在处理的页面的在线链接是[http://test.dpigraphics.net/process.php](http://test.dpigraphics.net/process.php)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T21:52:45.147

尝试这个：

```
$('map area').click(function(e) {
    e.preventDefault();
    var clickedArea = $(this); // remember clicked area
    // foreach area
    $('map area').each(function() {
        hData = $(this).data('maphilight') || {}; // get
        hData.alwaysOn = $(this).is(clickedArea); // modify
        $(this).data('maphilight', hData ).trigger('alwaysOn.maphilight'); // set
    });

}); 
```

（至少需要 jQuery 1.6。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:16:55.037

在玩了一些 jsfiddle 之后，并使用了上面评论中的一些建议，我找到了解决问题的方法：

```
 $('#process area').click(function() {
    $(this).data('maphilight', { alwaysOn: true }).trigger('alwaysOn.maphilight');

    $('.selected').data('maphilight', {
        alwaysOn: false
    }).trigger('alwaysOn.maphilight');

    $('#process area').removeClass('selected');

    $(this).addClass('selected'); 
```

这段代码几乎就是我打算让我的地图工作的方式。从一个区域切换到另一个区域时，它确实会闪烁一点，但它似乎工作得很好。希望这对将来的其他人有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T10:29:08.713

**仅在 jquery&maphighlight 中有解决方案！**：

诀窍在于处理好 maphighlight 的输入属性之一：alwaysOn：

```
$( "#map-tag area" ).click(function(){
    $(this).data('maphilight', { 
          alwaysOn: true 
    }).trigger('alwaysOn.maphilight');
    //check if area wasnt already selected - otherwise gets buggy
    if( !$(this).hasClass('selected') ){ 
      $('.selected').data('maphilight', {
          alwaysOn: false
      }).trigger('alwaysOn.maphilight');
      $('#map-tag area').removeClass('selected');
      $(this).addClass('selected');
    }

}); 
```

**编辑：**确保你有最新的 maphilight ！：[http](http://davidlynch.org/projects/maphilight/jquery.maphilight.min.js) : //davidlynch.org/projects/maphilight/jquery.maphilight.min.js，来自maphilight的官方网页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-30T14:09:11.350

导入两个js文件.. **jquery.min.js *AND* jquery.maphilight.js**

然后，

```
 $(function() {

   $('.map').maphilight({strokeColor:'808080',strokeWidth:10,strokeOpacity: 1,fillColor:'00c31d'});

    }); 
```

--HTML部分

```
<img src="YOUR IMAGE" class="map" usemap="#image-maps"/>
<map id="image-maps">

<area>
</map> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-06T10:40:53.477

**仅在 jquery&maphighlight 中有解决方案！**：

诀窍在于处理好 maphighlight 的输入属性之一：alwaysOn：

```
$( "#map-tag area" ).click(function(){
    $(this).data('maphilight', { 
          alwaysOn: true 
    }).trigger('alwaysOn.maphilight');
    //check if area wasnt already selected - otherwise gets buggy
    if( !$(this).hasClass('selected') ){ 
      $('.selected').data('maphilight', {
          alwaysOn: false
      }).trigger('alwaysOn.maphilight');
      $('#map-tag area').removeClass('selected');
      $(this).addClass('selected');
    }

}); 
```

**编辑：**确保你有最新的 maphilight ！：[http](http://davidlynch.org/projects/maphilight/jquery.maphilight.min.js) : //davidlynch.org/projects/maphilight/jquery.maphilight.min.js，来自maphilight的官方网页。

# perl - 如何在 perl 中使用原始字节

> ID：12450750
> 
> 赞同：5
> 
> 时间：2012-09-16T21:08:33.380
> 
> 标签：perl, encryption, byte

文档都将我引导到 unicode 支持，但我认为我的请求与 Unicode 没有任何关系。我想在单个标量的上下文中使用原始字节；我需要能够计算出它的长度（以字节为单位），获取它的子字符串（以字节为单位），将字节写入磁盘，并通过网络。有没有一种简单的方法可以做到这一点，而不将字节视为 perl 中的任何类型的编码？

**编辑**

更明确地说，

```
my $data = "Perl String, unsure of encoding and don't need to know";
my @data_chunked_into_1024_bytes_each = #??? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T22:37:22.467

Perl 字符串在概念上是字符串*，*它们是 32 位正整数，（通常）表示 Unicode 代码点。在 Perl 中，字节字符串只是一个字符串，其中所有字符的值都小于 256。

（这是概念视图。内部表示有点复杂，因为 perl 解释器试图将字节字符串存储为上述意义上的实际字节字符串，同时对包含字符值 256 的字符串使用通用 UTF-8 编码或更高。但这一切都*应该*对用户透明，实际上大多数情况下都是透明的，除了一些丑陋的历史极端情况，如按位非 ( `~`) 运算符。）

至于如何将一般字符串转换为字节字符串，这实际上取决于您拥有的字符串包含什么以及字节字符串*应该*包含什么：

*   如果你的字符串已经*是*一个字节串——例如，如果你以二进制模式从文件中读取它——那么你不需要做任何事情。该字符串不应包含任何超过 255 的字符，如果包含，则这是一个错误，并且可能会由加密代码报告。

*   同样，如果您的字符串应该以 ASCII 或 ISO-8859-1 编码（分别编码 Unicode 的 7 位和 8 位子集）编码文本，那么您不需要做任何事情：任何字符最多255 已经正确编码，任何更高的值对于这些编码都是无效的。

*   如果您的输入字符串包含要以*其他*编码进行编码的 (Unicode) 文本，那么您需要将字符串转换为该编码。通常的方法是使用[Encode](http://perldoc.perl.org/Encode.html)模块，如下所示：

    ```
    use Encode;
    my $byte_string = encode( "name of encoding", $text_string ); 
    ```

    显然，您可以使用以下命令将字节字符串转换回相应的字符串：

    ```
    use Encode;
    my $text_string = decode( "name of encoding", $byte_string ); 
    ```

*   对于 UTF-8 编码的特殊情况，也可以使用内置[`utf8::encode()`](http://perldoc.perl.org/utf8.html)函数代替`Encode::encode()`：

    ```
    utf8::encode( $string ); 
    ```

    它与以下内容基本相同：

    ```
    use Encode;
    $string = encode( "utf8", $string ); 
    ```

    请注意，与 不同`Encode::encode()`的是，该`utf8::encode()`函数直接修改输入字符串。还要注意，`"utf8"`上面提到了 Perl 的扩展 UTF-8 编码，它允许超出官方 Unicode 范围的值；对于严格符合标准的 UTF-8 编码，请使用`"utf-8"`连字符（[有关血腥细节，请参阅编码文档](http://perldoc.perl.org/Encode.html#UTF-8-vs.-utf8-vs.-UTF8)）。而且，是的，还有一个`utf8::decode()`功能几乎可以满足您的期望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:12:52.413

如果我正确理解了您的问题，您想要的是打包/解包功能： http: [//perldoc.perl.org/functions/pack.html](http://perldoc.perl.org/functions/pack.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T21:37:47.797

只要您的字符串不包含高于代码点 255 的字符，它将主要用作纯字节字符串，`length`并`substr`使用字节进行操作。此外，大多数输出​​函数，如`print`默认情况下期望八位字节/字节，如果您尝试向它们填充任何其他内容，实际上会抱怨。

如果已知输出采用某种编码，您可能需要显式编码/解码输出，但只有在您针对程序的每个有问题的部分提出另一个特定问题时，才能添加更多详细信息。

# wpf - ToggleButton 不显示任何状态

> ID：12450751
> 
> 赞同：9
> 
> 时间：2012-09-16T21:08:42.563
> 
> 标签：wpf, windows-8, togglebutton

我有有史以来最简单的应用程序：带有一个切换按钮的单个窗口：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ToggleButton Content="This is my ToggleButton" />
    </Grid>
</Window> 
```

当我现在单击切换按钮时，实际上什么都没有发生。当我为`Checked`和`Unchecked`事件设置事件处理程序，然后单击按钮时，首先`Checked`然后`Unchecked`被触发。所以按钮似乎工作正常......

我正在编译为 .NET 4.5，并且正在使用 Windows 8 RTM。

**此行为是否与 Windows 8 显示按钮的样式（无“3D”边框）有关？任何人都可以确认吗？**

**更新 1** 我制作了一张图片来说明我的意思：

![Windows 8 与 Windows 7 切换按钮](../Images/d1ae9869d1c74bf92c5d6e06b2539a16.png)

如您所见，在 Windows 8 中，单击切换按钮时“没有任何反应”，它根本不会“切换”。这似乎是一个错误，与 Windows 8 显示按钮的样式有关......

**更新：2013 年 5 月 30 日：** 有一个修补程序：http: [//support.microsoft.com/kb/2805222](http://support.microsoft.com/kb/2805222)
请参阅 WPF 下的问题 #5
**不幸的是，它并不能解决我的问题 :(**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:48:31.767

这是 WPF 中已确认的缺陷。解决方法是相应地设置控件的样式，尽管产品组可能会考虑修复。要请求修复，请联系 Microsoft 支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T13:44:57.647

对于想要一些代码开始的每个人，您可以使用我用来设置控件样式的代码：

```
<Application.Resources>

        <!-- Toogle button fix (includes custom button + toggle button style) -->
        <Style TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border BorderThickness="1" BorderBrush="#FFA4A4A4">
                            <Grid>
                                <Rectangle x:Name="Rectangle_Background" Fill="#FFEDEDED" />
                                <ContentPresenter x:Name="ContentPresenter_Content" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter TargetName="Rectangle_Background" Property="Fill" Value="#f7f7f7"/>
                                <Setter TargetName="ContentPresenter_Content" Property="Opacity" Value="0.5"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Rectangle_Background" Property="Fill" Value="#e0e0e0" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type ToggleButton}">
            <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border BorderThickness="1" BorderBrush="#FFA4A4A4">
                            <Grid>
                                <Rectangle x:Name="Rectangle_Background" Fill="#FFEDEDED" />
                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter TargetName="Rectangle_Background" Property="Fill" Value="#ADADAD"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Rectangle_Background" Property="Fill" Value="#e0e0e0" />
                            </Trigger>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Fill" TargetName="Rectangle_Background" Value="#bee6fd"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Application.Resources> 
```

# c++ - 如何将文件流式传输到 C++ boost ublas 中的矩阵中？

> ID：12450753
> 
> 赞同：0
> 
> 时间：2012-09-16T21:08:57.363
> 
> 标签：c++, boost, matrix, ifstream, ublas

我正在尝试将包含矩阵数据的文件读入提升矩阵。"" 已经应该对这类事情有运算符重载，我可以让它写入标准流（cout）。我不知道走另一条路有什么问题。我对 C++ 相当陌生，所以我猜我对文件流做出了不正确的假设，但这似乎是有道理的。这是我要访问的网页：

[http://www.boost.org/doc/libs/1_51_0/boost/numeric/ublas/io.hpp](http://www.boost.org/doc/libs/1_51_0/boost/numeric/ublas/io.hpp)

[http://www.cplusplus.com/reference/iostream/ifstream/ifstream/](http://www.cplusplus.com/reference/iostream/ifstream/ifstream/)

这是我的代码：

```
using namespace std;
matrix<double> M;
ifstream s("C:\temp\perm.txt", ifstream::in);

s >> M;
s.close();

std::cout << M; 
```

这是我的文件的样子：

```
[4,4]((0,0,1,0),(0,0,0,1),(0,1,0,0),(1,0,0,0)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:39:16.830

这是一个小例子，请尝试一下，看看会发生什么。如果这不起作用，我怀疑问题是文件路径错误或程序无法从文本文件中读取：

```
#include <boost/numeric/ublas/io.hpp>
#include <boost/numeric/ublas/matrix.hpp>
#include <iostream>
#include <fstream>

int main()
{
    boost::numeric::ublas::matrix<double> m;
    std::ifstream s("C:\temp\perm.txt");
    if (!s)
    {
        std::cout << "Failed to open file" << std::endl;
        return 1;
    }
    if (!s >> m)
    {
        std::cout << "Failed to write to matrix" << std::endl;
        return 1;
    }
    std::cout << "Printing matrix: ";
    std::cout << m;
} 
```

# google-chrome-extension - 谷歌浏览器扩展没有显示任何数据。

> ID：12450754
> 
> 赞同：0
> 
> 时间：2012-09-16T21:08:59.230
> 
> 标签：google-chrome-extension

这是我的 manifest.json：

```
 {
      "name": "Chritter",
      "version": "1.0",
      "description": "A Twitter button for your toolbar.",
      "icons": {"128": "icon.png"},
      "browser_action": {
        "default_icon": "icon.png",
        "default_title": "Chritter",
        "popup": "popup.html"
      },
     "permissions": ["http://twitter.com/*", "tabs"]
    }

This is my popup.html:

<html>
<head>
    <script>
onload = setTimeout(init, 0); // workaround for http://crbug.com/24467

// initialize timeline template
function init() {
  timeline = document.getElementById('timeline');
  template = xpath('//ol[@id="template"]/li', document);
  link = xpath('//div[@class="thumbnail"]/a', template);
  image = xpath('img', link);
  author = xpath('//div[@class="text"]/a', template);
  content = xpath('//div[@class="text"]/span', template);

  getTweets();
}
function getTweets() {
  req = new XMLHttpRequest();
  req.open('GET', 'http://twitter.com/statuses/public_timeline.json');
  req.onload = processTweets;
  req.send();
}
// process new batch of tweets
function processTweets() {
  var res = JSON.parse(req.responseText);
  tweets = res.concat(tweets);
  update();
}

for (var i in tweets) {
  user = tweets[i].user;
  url = 'http://twitter.com/' + user.screen_name;

  // thumbnail
  link.title = user.name;
  link.href = openInNewTab(url);
  image.src = user.profile_image_url;
  image.alt = user.name;

  // text
  author.href = openInNewTab(url);
  author.innerHTML = user.name;
  content.innerHTML = linkify(tweets[i].text);

  // copy node and update
  item = template.cloneNode(true);
  timeline.appendChild(item);
}

</script>
</head>
  <body>
  <div id="body">
    <div id="title">
      <h2>Chritter</h2>
    </div>
    <ol id="timeline" />
  </div>
  <ol id="template">
    <li>
      <div class="thumbnail">
        <a>
          <img />
        </a>
      </div>
      <div class="text">
        <a></a>
        <span></span>
      </div>
      <div class="clear"></div>
    </li>
  </ol>
</body>
</html> 
```

当我点击扩展时，我没有得到任何数据。我做错什么了吗？我应该在 popup.js 而不是 popup.html 中编写 js 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:27:36.393

您的脚本中有错误。`tweets`并且`xpath`没有定义。在脚本的开头添加它来修复它：

`var tweets, xpath;`

要在弹出窗口中调试脚本，请单击扩展图标以打开弹出窗口，然后右键单击弹出窗口并选择**Inspect Element**。**控制台**选项卡将显示错误。

# javascript - 将弹出窗口的源保存为字符串？

> ID：12450755
> 
> 赞同：0
> 
> 时间：2012-09-16T21:09:00.010
> 
> 标签：javascript, html

有没有办法将我的域之外的弹出窗口的源保存为字符串，由以下方式打开：

```
window.open('html'); 
```

解决我的问题的另一种方法是将弹出窗口的输出定向到字符串中。我可以使用 chrome 的`view-source:`浏览器功能并弹出：

```
window.open('view-source:html'); 
```

由于我仅将其用于个人用途，因此它只能与 Chrome 兼容，如果这是唯一的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:29:18.797

我建议在弹出窗口中加载您要打开的文档并提取它，`innerHTML`如下所示：

```
var popup = window.open('http://url.com');
// documentElement is the <html> element so you would get everything inside
var source = popup.document.documentElement.innerHTML; 
```

这适用于 IE。我不确定 Chrome 对跨域弹出窗口的限制是什么，因此您可能需要检查您的本地设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:21:15.663

如果您真的想构建一个小应用程序来完成您所描述的内容，请记住您可以右键单击并查看 Chrome 中的几乎任何页面源，包括选项卡、主页和其他一些地方。具有讽刺意味的是，查看源页面是我发现的唯一一个似乎无法找到源的页面，尽管我似乎发现了它的 URI 是什么：

```
chrome-devtools://devtools/devtools.html 
```

但是什么都没有出现，除非我[搜索那个 URI](http://developer.chrome.com/extensions/devtools.html)。这里有一些 URI 可以打开并尝试`Right-Click + View Source`看看你得到了什么：

```
* Regular tab (new)
* view-source:chrome://newtab/
* view-source:chrome://extensions-frame        // This has file handlers for extensions
* view-source:chrome://settings-frame/settings // Go to lines `2907`
* view-source:chrome://memory-redirect/
* view-source:chrome://downloads/
* view-source:chrome://settings-frame/options_bundle.js // This one has all kinds of good stuff
* view-source:chrome://resources/js/util.js 
* view-source:chrome://chrome/uber.js
* view-source:chrome://sync-internals/
* view-source:chrome://resources/js/cr/ui/array_data_model.js
* view-source:chrome://resources/js/cr/ui/list_item.js
* view-source:chrome://resources/js/cr/ui/tabs.js 
```

* * *

您可以从中找到以下两个练习程序以及更多内容：

[http://developer.chrome.com/extensions/tabs.html#samples](http://developer.chrome.com/extensions/tabs.html#samples)

**[实时 HTTP 标头](http://developer.chrome.com/extensions/examples/api/debugger/live-headers.zip)**， **[headers.js](http://developer.chrome.com/extensions/examples/api/debugger/live-headers/headers.js)** - 下面显示的是如何将侦听器附加到 `window.onlaod` 事件，并在收到响应时收到通知，以便您可以获取源（而不是浏览器的解析和计算的源）。

```
window.addEventListener("load", function() {
    chrome.debugger.sendCommand({tabId:tabId}, "Network.enable");
    chrome.debugger.onEvent.addListener(onEvent);
});

} else if (message == "Network.responseReceived") {
    appendResponse(params.requestId, params.response);
} 
```

**[下载选定](http://developer.chrome.com/dev/extensions/examples/api/downloads/download_links.zip)**的链接 - 从名为*[`popup.js`](http://developer.chrome.com/extensions/examples/api/downloads/download_links/popup.js)*.

```
// Send back to the popup a sorted deduped list of valid link URLs on this page.
// The popup injects this script into all frames in the active tab.
chrome.extension.sendRequest(links);

// Download all visible checked links.
chrome.experimental.downloads.download({
    url: visibleLinks[i]},
    function(id) {
}); 
```

当然，这是一个名为[**SingleFile**](https://github.com/gildas-lormeau/SingleFile)的程序，它作为扩展名。它似乎只是你所追求的（或者你可以只下载它[单独](https://github.com/gildas-lormeau/zip.js)[组成](https://github.com/gildas-lormeau/ZipTabs)的[部分](https://github.com/gildas-lormeau/Scrapbook-for-SingleFile)）：

> **SingleFile (c) 2011 吉尔达斯·洛莫**
> 
> **SingleFile**是一个 Chrome 扩展程序，有助于将完整的页面归档到单个 HTML 文件中。

坏消息恐怕很多都是有用的，因为现在我已经查看了很多它和其他资源，我认为这或多或少只是内部浏览器。请注意示例应用程序，并记住有[几种不同类型的应用程序](http://developer.chrome.com/dev/extensions/devguide.html)具有不同的用途和访问级别。

不用说，我发现了很多东西，我不知道你想要、需要或关心多少。但我想既然你让我再次思考，我会继续与你分享我的发现。我认为您可以重新配置或使用几个示例应用程序来为您工作。祝你好运。

* * *

*其他一些亮点：*

*   [`OptionsPage`](http://git.chromium.org/gitweb/?p=chromium/src.git;a=blob;f=chrome/browser/resources/options2/options_page.js;h=c316d13ede663888c806201b4f3604231d811637;hb=05a0f6fb39a111d3f9aa373a8ada5db91aa835eb#l882)，这似乎是浏览器与之交互的方式`chrome.tab`
*   [`filer.js`](https://github.com/ebidel/filer.js), 一个用于 Chrome 的 HTML5 文件 API 类
*   [Chrome 应用程序示例](https://github.com/GoogleChrome/chrome-app-samples)@GitGub，包括[文件系统访问示例](http://developer.chrome.com/trunk/apps/samples.html#ae91048eb97254a98ffd1ea034f5d008)
*   另一个[示例扩展](http://developer.chrome.com/dev/extensions/samples.html)存储库
*   [你好世界](http://developer.chrome.com/trunk/apps/samples.html#ae91048eb97254a98ffd1ea034f5d008)
*   [`document.getElementsByTagName('html')[0].innerHTML`](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#html-document)在[`window.load`](http://jsfiddle.net/userdude/M5V4K/)
*   [`chrome.tabs`](http://developer.chrome.com/dev/extensions/tabs.html)
*   [内容脚本](http://developer.chrome.com/dev/extensions/content_scripts.html)很可能是您需要的，以及...
*   [程序化注入](http://developer.chrome.com/dev/extensions/content_scripts.html#pi)和
*   [与嵌入页面的通信](http://developer.chrome.com/dev/extensions/content_scripts.html#pi)
*   开发[工具源页面](http://git.chromium.org/gitweb/?p=chromium/src.git;a=blob;f=chrome/browser/debugger/frontend/devtools_discovery_page.html;h=85c03b8b56000130f423a44f18bdef3cbea0f0ff;hb=05a0f6fb39a111d3f9aa373a8ada5db91aa835eb)
*   [`chrome / browser / resources`](http://git.chromium.org/gitweb/?p=chromium/src.git;a=tree;f=chrome/browser/resources),
*   [`chrome.* API`s](http://developer.chrome.com/stable/extensions/api_index.html)
*   [`chrome / browser / resources / file_manager / js`](http://git.chromium.org/gitweb/?p=chromium/src.git;a=tree;f=chrome/browser/resources/file_manager/js)
*   [`chrome-toolbox`](http://code.google.com/p/chrome-toolbox/)
*   [`chrome / browser / resources / extensions`](http://git.chromium.org/gitweb/?p=chromium/src.git;a=tree;f=chrome/browser/resources/extensions;hb=HEAD)

# jquery - 超大 Jquery 与背景图像冲突

> ID：12450759
> 
> 赞同：2
> 
> 时间：2012-09-16T21:09:28.477
> 
> 标签：jquery, wordpress, supersized, nextgen-gallery

我有一个使用 nextgen 画廊的 wordpress 网站问题（由 supersized 提供支持）所以我创建了一个 div 来管理背景图片

```
<div>
<img id="backgroundx" title="" alt="" src="wp-content/uploads/2012/09/DSC_5269.jpg"/>
</div> 
```

它的CSS是

```
#backgroundx {
    left: 0;
    position: absolute;
    width: 100%;
    z-index: 1000;
}
.container {
    position: relative;
    z-index: 1001;
} 
```

一切都很好，但是当我进入 NextGEN 类别（例如[http://newlightphotography.org/category/bambini-2](http://newlightphotography.org/category/bambini-2)）时，它不显示背景但是每隔一页（包括扩展图库[http://newlightphotography.org/ madalina-149](http://newlightphotography.org/madalina-149)）工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:19:15.853

虽然这两个页面具有不同的图像行为很奇怪，但您可能会发现这个快速修复是可以接受的：

```
<div>
<img id="backgroundx" title="" alt="" src="/wp-content/uploads/2012/09/DSC_5269.jpg"/>
</div> 
```

只需在 wp-content 之前添加一个根斜线。

# c++ - 运算符 = 不是 DLL 中导出的 C++ __interface 的成员

> ID：12450760
> 
> 赞同：4
> 
> 时间：2012-09-16T21:10:01.357
> 
> 标签：c++, dll, interface, c++11

我一直在为 lib 编写一些代码，并尝试使用默认的 Win32 控制台应用程序来运行所有内容。由于我已经完成了所有课程，因此我想将所有内容提取到 DLL 中，因此我开始使用通常的宏进行改编：

```
#ifdef MYLIB_EXPORTS
    #define DllExport __declspec(dllexport)
#else
    #define DllExport __declspec(dllimport)
#endif 
```

我在我的代码中使用了一个接口，它的定义如下：

```
__interface DllExport ISerializable {
    void Serialize(/* ... */);
    /* some other methods */
}; 
```

在我的 exe 中提供此代码时，这已经奏效了。在 DLL 中，我在编译期间出现错误，其中指出

```
error C2039: '=' : is not a member of 'MyLib::ISerializable'
error C2664: 'MyLib::DerivedClass::operator =' : cannot convert parameter 1 from 'const MyLib::ISerializable' to 'const MyLib::DerivedClass &' 
```

对于每个继承`ISerializable`来实现所需方法的类。（我`std::shared_ptr<ISerializable>`在我的代码中使用了几次抽象。）但是，当我更改`__interface`为`class`并使所有方法成为纯虚拟方法时，我没有收到此错误并且编译成功。

**为什么我会收到此错误？为什么我的 DLL 中的类/接口需要赋值运算符？有什么解决方法吗？**

*（在带有 C++11 的 Windows 8 RTM 上使用 Visual Studio 2012 RTM。）*

* * *

这是发生此错误的一段（错误总是指向`}`类的最后一个）：

```
class DllExport Tile final : public ISerializable {
public:
    __declspec(property(get=GetIsPassable, put=SetIsPassable))
    bool IsPassable;
    __declspec(property(get=GetTileId, put=SetTileId))
    uint16_t TileId;

    bool& GetIsPassable() { return this->_IsPassable; }
    void SetIsPassable(bool val) { this->_IsPassable = val; }
    uint16_t& GetTileId() { return this->_TileId; }
    void SetTileId(uint16_t val) { this->_TileId = val; }

    bool _IsPassable;
    uint16_t _TileId;

    void Serialize(OutputFileStream& ofs);
    size_t TellSize();
    size_t Unserialize(InputFileStream& ifs, size_t metadata = 0);
}; 
```

这个错误也发生在我有一个属性的`Tile`类中，比如在我使用`std::shared_ptr<ISerializable>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:37:44.497

我猜接口没有编译器生成的复制构造函数或赋值运算符。

一种可能的解决方案是显式实现`DerivedClass::operator=`. 那是因为编译器生成的版本会尝试调用`ISerializable::operator=`不存在的。复制构造函数也是如此。

另一个解决方案是让你所有的类 COM 类:)

* * *

**例子**

使用您的 Tile 类：

```
class DllExport Tile final : public ISerializable { 
public: 
    Tile(const Tile& tile) :
        _IsPassable(tile._IsPassable), _TileId(tile._TileId)
    {
    }

    /* New Code START */
    Tile& operator=(const Tile& tile)
    {
        _IsPassable = tile._IsPassable;
        _TileId = tile._TileId;
        return *this;
    }
    /* New Code END */

    __declspec(property(get=GetIsPassable, put=SetIsPassable)) 
    bool IsPassable; 
    __declspec(property(get=GetTileId, put=SetTileId)) 
    uint16_t TileId; 

    bool& GetIsPassable() { return this->_IsPassable; } 
    void SetIsPassable(bool val) { this->_IsPassable = val; } 
    uint16_t& GetTileId() { return this->_TileId; } 
    void SetTileId(uint16_t val) { this->_TileId = val; } 

    bool _IsPassable; 
    uint16_t _TileId; 

    void Serialize(OutputFileStream& ofs); 
    size_t TellSize(); 
    size_t Unserialize(InputFileStream& ifs, size_t metadata = 0); 
}; 
```

# c# - Microsoft JScript 中的运行时错误：未定义“数组”

> ID：12450764
> 
> 赞同：0
> 
> 时间：2012-09-16T21:10:54.840
> 
> 标签：c#, jquery, asp.net, visual-studio-2010, breakpoints

我正在使用 Microsoft Visual Web Developer 2010 Express。

我有一个隐藏的图像按钮，如果用户上传图像，则设置为 visible="true"。这是代码：

**.aspx 文件：**

```
 <asp:UpdatePanel ID="upOne" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:ImageButton ID="btnImageOne" runat="server" CssClass="btnImage" 
                        Visible="false" onclick="btnImageOne_Click" />
                    <asp:LinkButton ID="btnDeleteOne" runat="server" CssClass="btnDelete" Visible="false"
                        onclick="btnDeleteOne_Click">&nbsp;</asp:LinkButton>
                </ContentTemplate>
            </asp:UpdatePanel> 
```

当可见时，如果用户单击该按钮，则会执行以下操作： **aspx.cs 文件：**

```
 protected void btnDeleteOne_Click(object sender, EventArgs e)
    {
        if (Session["fuOneFilename"] != null)
        {
            File.Delete(Server.MapPath("~/animals/temp/") + (string)Session["fuOneFilename"]);
            Session["fuOneFilename"] = null;
            DisplayUploadedPictures();

            if (Session["mainImageFilename"] == Session["fuOneFilename"])
            {
                Session["mainImageFilename"] = null;
                DisplayMainImage();
            }
        }
    } 
```

* * *

我在 aspx.cs 文件的第二行放置了一个断点。按下 F5 后，应用程序将在位于 jQuery *（未修改）*文件内的 JavaScript 行中停止。

```
j = Array.prototype.push 
```

我收到以下消息：

> Microsoft JScript 中的运行时错误：未定义“数组”

在同一个窗口中，我可以看到三个按钮：Break、Continue、Ignore。

**注意：**页面加载中的断点运行没有问题。

* * *

**调用堆栈说：**

> 匿名函数 JScript
> 
> JScript 全局代码 JScript

* * *

# 问题：

Q1。**为什么会这样？**

Q2。**我该如何解决？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:11:26.737

# Q1。为什么会这样？

如果您具有以下配置，则会发生此错误：

```
<collapsible panel>
    <iframe>
        <script>
        </script>
    </iframe>
</collapsible panel> 
```

当页面加载时，显示的面板会在加载 javascript 库之前强制将 iframe 内的脚本拖过 DOM。

* * *

# Q2。我该如何解决？

解决方法是通过jQuery声明source属性：

```
open: function(){
    document.getElementById("iframename").src = "page.aspx";
} 
```

* * *

**最后说明：**

这个答案的所有功劳都**归于spender**，他的评论为我指明了正确的方向。

但是，我不想让这个问题“悬而未决”，所以我决定从[链接的帖子](https://stackoverflow.com/questions/6345057/javascript-in-asp-net)中收集信息并将其组合成一个帖子。

# c# - 如何在 MenuStrip 上制作一个切换按钮以在单击菜单时更改颜色？

> ID：12450766
> 
> 赞同：2
> 
> 时间：2012-09-16T21:11:05.473
> 
> 标签：c#

我有这个菜单点击事件，例如：

```
private void testToolStripMenuItem_Click(object sender, EventArgs e)
        {
            if (testToolStripMenuItem.Checked == true)
            {
                testToolStripMenuItem.ForeColor = Color.Red;
            }
            else
            {
                testToolStripMenuItem.ForeColor = Color.Black;
            }
        } 
```

我想这样做，当用户在菜单上单击一次时，菜单文本将为红色，一旦他再次单击它，它将返回为黑色。

另一件事/问题：当用户将鼠标移到菜单上时，我如何避免/禁用它，以便菜单在其周围涂成蓝色，当用户将鼠标移到菜单上时，我怎么能做到这一点？没画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:30:00.970

您必须更改`checkedChange`事件中项目的前景色。

```
private void testToolStripMenuItem_CheckedChanged(object sender, EventArgs e)
{
    if ( testToolStripMenuItem.Checked == true)
        testToolStripMenuItem.ForeColor = Color.Red;
    else
        testToolStripMenuItem.ForeColor = Color.Black;
} 
```

# xquery - xquery-如何在 for 循环中增加计数器变量/如何将字符串值数组转换为节点

> ID：12450767
> 
> 赞同：5
> 
> 时间：2012-09-16T21:11:06.977
> 
> 标签：xquery

在一个 java 程序中，我使用 Saxon Library 来解析一些 XQuery 命令。

现在，首先我使用 tokenize() 将一些文本拆分为多个文本值。文本的一个例子是——

```
Mohan Prakash, Ramesh Saini 
```

我在上面的文本中使用 tokenize() 并以 ',' 作为分隔符。并将 tokenize 的结果存储在变量 $var 中

在此之后，我想遍历这些文本值，并将以下内容作为输出 -

```
 Mohan Prakash,1
  Ramesh Saini,2 
```

从上面可以看出，每行中的最后一个值是一个计数器——对于第一行，这个值为 1，对于第二行，这个值 = 2，依此类推......

我想过使用类似下面的代码 -

```
for $t in $var/position()
return concat($var[$t], ',', $t) 
```

但是我收到一个错误，我不能在 $var 上使用 position() 因为 $var 应该是一个节点。

所以有两种方法可以解决这个问题——

(a) 将 $var 中的值转换为节点

```
 I tried text{$var} but that is not giving accurate results. 
```

如何将值数组转换为节点？

(b) 使用以下——

```
 for $t in $var 
```

在这里，我如何在 for 循环中创建和使用一个计数器，以便可以将计数值与 $t 的每个值一起输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:59:25.480

您可以在子句中使用`at`关键字：`for`

```
let $var := tokenize('Mohan Prakash, Ramesh Saini', ', ')
for $t at $pos in $var
return concat($t, ',', $pos) 
```

这将返回两个字符串`Mohan Prakash,1`和`Ramesh Saini,2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T22:04:20.487

**这个 XQuery**（也恰好是一个 XPath 2.0 表达式）：

```
for $text in 'Mohan Prakash, Ramesh Saini',
    $i in 1 to count(tokenize($text, ','))
        return concat(tokenize($text, ',')[$i], ',', $i, '&#xA;') 
```

**产生想要的正确结果：**

```
Mohan Prakash,1
Ramesh Saini,2 
```

# c# - 对继承自抽象类的类进行单元测试

> ID：12450768
> 
> 赞同：7
> 
> 时间：2012-09-16T21:11:09.227
> 
> 标签：c#, unit-testing, moq, abstract-class

我的问题是我想在我的抽象类中存根一个属性，因为我的测试类使用该属性。我目前正在使用最新版本的起订量。

我的抽象类如下所示：

```
public abstract class BaseService
{
    protected IDrawingSystemUow Uow { get; set; }
} 
```

我在测试中的课程如下所示：

```
public class UserService : BaseService, IUserService
{
    public bool UserExists(Model model)
    {
        var user = this.Uow.Users.Find(model.Id);
        if(user == null) { return false; }

        reurn true;
    }
} 
```

我不知道如何存根该`Uow`属性。有人有任何线索吗？还是我的设计很糟糕，以至于我需要将`Uow`财产转移到我的班级进行测试？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T21:34:04.707

由于一个简单的原因，您当前的设置将无法正常工作 -`Uow`属性是不可覆盖的，并且 Moq 的工作此时已完成。[不能覆盖，不能模拟](http://jimmykeen.net/2012/04/25/how-to-mock-private-method/)。

最简单的解决方案是简单地使该属性可覆盖。将基类定义更改为：

```
public abstract class BaseService
{
    protected virtual IDrawingSystemUow Uow { get; set; }
} 
```

现在您可以使用 Moq 的*受保护*功能（这需要您`using Moq.Protected`在测试类中包含命名空间）：

```
// at the top of the file
using Moq.Protected;

// ...

var drawingSystemStub = new Mock<IDrawingSystemUow>();
var testedClass = new Mock<UserService>();
testedClass 
  .Protected()
  .Setup<IDrawingSystemUow>("Uow")
  .Returns(drawingSystemStub.Object);

// setup drawingSystemStub as any other stub

// exercise test
var result = testedClass.Object.UserExists(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:30:07.897

我认为在你的情况下这很简单。您只是不嘲笑`Uow`财产，而是嘲笑`IDrawingSystemUow`服务。所以你可以创建一个模拟，通过属性`IDrawingSystemUow`将它分配给实例，然后运行测试（例如方法）。`UserService``Uow``UserExists`

# java - wsgen 使用 @WebMethod 生成 WSDL 但忽略 @WebParam

> ID：12450773
> 
> 赞同：1
> 
> 时间：2012-09-16T21:12:03.080
> 
> 标签：java, wsdl, wsgen

我正在使用 和 注释从 Java 类`@WebService`生成WSDL `@WebMethod`。`@WebParam`生成 WSDL，并包括 和 的输出`@WebService`，`@WebMethod`但`@WebParam`注释似乎被忽略了。

这是解决此问题的一个方法声明：

```
@WebMethod(action = "jmsServiceInitialise")
public boolean jmsServiceInitialise(
        @WebParam(name = "queue") String queueName, 
        @WebParam(name = "channel") String channel, 
        @WebParam(name = "hostname") String hostName, 
        @WebParam(name = "port") String port, 
        @WebParam(name = "requiresresponse") boolean requiresResponse) {
    log.info("jmsServiceInitialise " + queueName + ": started");
    // etc
    return returnValue;
} 
```

WSDL 文件没有提及任何参数，但方法是存在的。该方法可以作为 Web 服务调用，但 String 参数值都是`null`.

我最初在 Eclipse 中遇到了这个问题，但后来在命令行（Windows，JAX-WS RI 2.2.4-b01）复制了 wsgen 的问题并得到了相同的结果。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:22:50.627

`@WebResult`向方法添加注释，在`@WebMethod`注释
和
make之后`@WebMethod(operationName = "jmsServiceInitialise")`而不是*操作*

# jquery - 使用 jquery 浏览 JSON 对象

> ID：12450774
> 
> 赞同：0
> 
> 时间：2012-09-16T21:12:15.093
> 
> 标签：jquery, json

我有一个构造如下的 json 对象：

```
<?
$t['w'][$id]['marchin']=$machin;
$t['w'][$id]['c'][$id_com]['machin']=$machin;    
echo json_encode($t);
?> 
```

我像这样浏览对象

```
// here i access to all the $t['w'][$id]

$.each(data.w, function(k,v){

              var that=this;
              doSomething();

              // now i want to access to all the $t['w'][$id]['c']
               $.each(that.c, function(k1,v1){
                     doSomething();       
               });

}); 
```

但是在第二个每个jquery都会出错..如何访问所有$ t ['w'] [$ id] ['c']？！

谢谢你

* * *

好的，我试过了：

```
 $.each(data.w, function(k,v){
                  var that = $.parseJSON(this);
                        doSomething();

                    $.each(that[k]['c'], function(k1,v1){
                        doSomething();

                 });

       }); 
```

但它不再起作用，

这是我的json的一个例子，

```
{"w":
   {"3":
      {"test":"test","c":
        {"15":
           {"test2":"test2"}
        }
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:42:34.810

数据 ...

```
var data = {"w":
   {"3": {
       "test":"test",
       "c": {
          "15": {"test2":"test2"}
       }
      }
    }
}; 
```

环形 ...

```
$.each(data.w, function(key, value){
    // you are now lopping over 2nd dimension
    // On each loop, 'key' will be equal to another [$id] value
    // since you know you'd like to crawl 'c' sub entry, you can reference it
    // and loop over it
    $('body').append('<h3>'+key+'</h3>');
    if( this['c'] )
    $.each(this['c'], function(k,v){
        // Here you have access to ['c'][...]
        $('body').append('<span>'+k+'</span>');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:43:06.813

你可以在没有 .each 的情况下做到这一点：

```
var hsh = $.parseJSON(data.w);

for (var i in hsh) {
  var that = hsh[i];
  doSomething();

  for (var j in hsh[i].c) {
    doSomething();
  }
} 
```

# html - HTML 输入按钮 css-height 在 Safari 和 Chrome 上不起作用

> ID：12450776
> 
> 赞同：31
> 
> 时间：2012-09-16T21:12:51.927
> 
> 标签：html, button, input, height, submit

我有一个非常基本的问题。我将我的 html 表单提交按钮的高度设置为 50px。它适用于 Firefox，但不适用于 Chrome 或 Safari。代码很简单，如下所示：

```
<input type="submit" value="Send" style="height:50px;" /> 
```

知道如何让它在 Chrome 和 Safari 上运行吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-16T23:28:32.277

将其更改`<input>`为`<button>`并添加`-webkit-appearance: none;`到 CSS 的开头，例如：

```
.submitbtn {
    -webkit-appearance: none;
    height: 50px;
    background-color:#FFF;
    color:#666;
    font-weight:bold;
    border: solid #666 1px;
    font-size: 14px;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-15T05:58:01.623

只需在 Macbook 上的 safari 浏览器上添加`-webkit-appearance: none;`我为我工作的内容。`<input>`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-23T02:13:57.997

这也应该有效。

```
 -webkit-appearance:default-button; 
```

您可能需要利用和/或注意此属性的许多参数。此外，如果您只是想禁用输入字段的内部阴影，您可以使用 -webkit-appearance:caret;。

```
button
button-bevel
caret
checkbox
default-button
listbox
listitem
media-fullscreen-button
media-mute-button
media-play-button
media-seek-back-button
media-seek-forward-button
media-slider
media-sliderthumb
menulist
menulist-button
menulist-text
menulist-textfield
none
push-button
radio
searchfield
searchfield-cancel-button
searchfield-decoration
searchfield-results-button
searchfield-results-decoration
slider-horizontal
slider-vertical
sliderthumb-horizontal
sliderthumb-vertical
square-button
textarea
textfield 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T00:26:54.793

添加到[Şήøωў](https://stackoverflow.com/users/4595310/%C5%9E%CE%AE%C3%B8%CF%89%D1%9E)的^(（赞成）)[答案](https://stackoverflow.com/questions/12450776/html-input-button-css-height-not-working-on-safari-and-chrome/28666000#28666000)：

@Safari 11.0.2 (13604.4.7.1.3) @macOS 10.13.2 (17C88)
例如

```
input[type=button]{
  -webkit-appearance: button;
} 
```

解决了我的问题（`-size`主要是 [ `-webkit-`] `font-`* 效果非常有限）；
覆盖“用户代理样式表”：

```
input:matches([type="button"], [type="submit"], [type="reset"]){
  -webkit-appearance: push-button;
} 
```

# ruby-on-rails - ActiveAdmin 排序

> ID：12450779
> 
> 赞同：4
> 
> 时间：2012-09-16T21:13:41.740
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

**除了使用资源索引页面的default_scope**之外，如何让 ActiveAdmin**索引**页面在默认情况下对某个列进行排序？我尝试了很多东西，但没有一个有效。

 *** * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T06:49:04.757

来自[活动管理索引页面文档](http://www.activeadmin.info/docs/3-index-pages.html)：

**索引默认排序顺序** *您可以定义索引页面的默认排序顺序：*

```
ActiveAdmin.register Post do
  config.sort_order = "name_asc"
end 
```**

# javascript - 使用 javascript 动态创建标签

> ID：12450780
> 
> 赞同：0
> 
> 时间：2012-09-16T21:13:48.803
> 
> 标签：javascript

有没有比这更好的动态创建信息字段集的方法：

```
 var grid = document.createElement("ul");
                grid.style['text-align'] = "left";

                // Creates the legend and append it
                var child = document.createElement('legend');
                child.innerHTML = "Logado - Dados";
                loginbox.appendChild(child);
                // End of creating the legend

                // Start creating the first child
                var cell = document.createElement("li");
                cell.style['padding'] = "0px";
                child = document.createElement('label');
                child.innerHTML = "<b>Usuário: </b>";
                child.for = "lusername";
                cell.appendChild(child);
                child = document.createElement('label');
                child.innerHTML = response['username'];
                child.for = "username";
                cell.appendChild(child);
                grid.appendChild(cell);
                // End adding the first labels

                // Start adding the second label                
                cell = document.createElement("li");
                cell.style['padding'] = "0px";
                child = document.createElement('label');
                child.innerHTML = "<b>Membro Desde: </b>";
                child.for = "lbirthday";
                cell.appendChild(child);
                child = document.createElement('label');
                child.innerHTML = response['MemberSince'];
                child.for = "birthday";
                cell.appendChild(child);
                grid.appendChild(cell);
                // End adding the second labels

                // Start adding the third label             
                cell = document.createElement("li");
                cell.style['padding'] = "0px";
                child = document.createElement('label');
                child.innerHTML = "<b>Última Visita: </b>";
                child.for = "llastvisit";
                cell.appendChild(child);
                child = document.createElement('label');
                child.innerHTML = response['LastVisit'];
                child.for = "lastvisit";
                cell.appendChild(child);
                grid.appendChild(cell);
                // End adding the third labels

                // Start adding the forth label             
                cell = document.createElement("li");
                cell.style['padding'] = "0px";
                child = document.createElement('label');
                child.innerHTML = "<b>Frequência de Estudo: </b>";
                child.for = "lstudyfrequency";
                cell.appendChild(child);
                child = document.createElement('label');
                child.innerHTML = response['StudyFrequency'];
                child.for = "studyfrequency";
                cell.appendChild(child);
                grid.appendChild(cell);
                // End adding the forth labels

                // Start adding the fifth label             
                cell = document.createElement("li");
                cell.style['padding'] = "0px";
                child = document.createElement('label');
                child.innerHTML = "<b>Faculdade: </b>";
                child.for = "lcollege";
                cell.appendChild(child);
                child = document.createElement('label');
                child.innerHTML = response['College'];
                child.for = "college";
                cell.appendChild(child);
                grid.appendChild(cell);
                // End adding the fifth labels

                // Start adding the sixth label             
                cell = document.createElement("li");
                cell.style['padding'] = "0px";
                child = document.createElement('label');
                child.innerHTML = "<b>Curso: </b>";
                child.for = "lcourse";
                cell.appendChild(child);
                child = document.createElement('label');
                child.innerHTML = response['Course'];
                child.for = "course";
                cell.appendChild(child);
                grid.appendChild(cell);
                // End adding the sixth labels

            loginbox.appendChild(grid); 
```

我认为尝试以某种方式使用“写入”方法会更好。抱歉，我是 javascript 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T18:08:01.933

出于可维护性、灵活性和跨浏览器兼容性的考虑，您可能需要考虑使用像[Mustache](https://github.com/janl/mustache.js)或[Jade](http://jade-lang.com/)这样的 HTML 模板库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T22:02:45.103

如果没有您随附的 html 或其余的 javascript，我无法真正测试以下内容，但是，它应该可以工作。如果没有，请告诉我，我会修复它：

```
var grid = document.createElement("ul");
grid.style['text-align'] = "left";

// Creates the legend and append it
var child = document.createElement('legend');
child.innerHTML = "Logado - Dados";
loginbox.appendChild(child);

var list_obj = { list:
    [{
        "label": "Usuário:",
        "for": "lusername",
        "arr_key": "username",
        "for2": "username"
    },
    {
        "label": "Membro Desde:",
        "for": "lbirthday",
        "arr_key": "MemberSince",
        "for2": "birthday"
    },
    {
        "label": "Última Visita:",
        "for": "llastvisit",
        "arr_key": "LastVisit",
        "for2": "lastvisit"
    },
    {
        "label": "Frequência de Estudo:",
        "for": "lstudyfrequency",
        "arr_key": "StudyFrequency",
        "for2": "studyfrequency"
    },
    {
        "label": "Faculdade:",
        "for": "lcollege",
        "arr_key": "College",
        "for2": "college"
    },
    {
        "label": "Curso:",
        "for": "lcourse",
        "arr_key": "Course",
        "for2": "course"
    }]
}

for (var i = 0; i < list_obj.list.length; i++) {
    var label = list_obj.list[i]["label"];
    var for1 = list_obj.list[i]["for"];
    var arr_key = list_obj.list[i]["arr_key"];
    var for2 = list_obj.list[i]["for2"];
    print_field(label,for1,arr_key,for2)
}

function print_field(label,for1,arr_key,for2) {
    var cell = document.createElement("li");
    cell.style['padding'] = "0px";
    child = document.createElement('label');
    child.innerHTML = "<b>" + label + " </b>";
    child.htmlFor = for1;
    cell.appendChild(child);
    child = document.createElement('label');
    child.innerHTML = response[arr_key];
    child.htmlFor = for2;
    cell.appendChild(child);
    grid.appendChild(cell);
}​ 
```

# php - PHP包括花费太长时间

> ID：12450781
> 
> 赞同：1
> 
> 时间：2012-09-16T21:13:57.760
> 
> 标签：php, include

我有一个大约 100mb 的 php 文件，里面充满了数组（只有数组）。

我制作了一个包含此文件的脚本（用于处理），首先它耗尽了默认的 Xampp 128mb 内存限制，我将它提高到 1024mb，但它只需要很长时间并且没有做任何事情。

我确定问题是由文件的绝对大小造成的，因为我已经尝试删除所有代码行，只留下包含和回显让我知道它何时完成执行，并且它做同样的事情（这将永远持续），我还尝试再次以单独和相同的方式运行 100mb 文件。

一个 10mb 的文件也需要很长时间，但一个类似的 1mb 文件几乎可以立即读取和执行，所以问题一定不仅仅是文件大小。

我避免将 c++ 用于一个简单的项目，因为 php 对我来说更容易，并且将要执行的任务不需要受益于如果它已经在 c++ 中完成它会增加的速度但如果我没有运气解决这个问题，我想我将不得不这样做。

* * *

编辑

不使用数据库的原因： 1-制造它的人没有使用数据库，如果我不能先用它做某事，就很难将它存储在有组织的数据库中，比如只是阅读它，复制它的一部分或放入内存或其他东西。

2-我没有使用数据库的经验，因为我在 php 中做过的几乎所有事情都不需要大量存储数据，最多 50kb，如果我正在考虑一个大项目或大量数据作为这个，我肯定会，但我一开始并没有把这件事弄得一团糟，现在我必须撤消它。

3-当现在每台计算机都有足够的内存以适应整个操作系统时，必须在硬盘驱动器中存储一小部分数据（如 10mb）的逻辑非常难以理解，除非有人对此给出很好的解释，如果我有的话同时访问很多上述文件我会理解，但就像我说的，这是一个简单的项目，这是在给定时间将访问的唯一文件这甚至不是为了制作某种网站，而是为了运行几次并完成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T22:44:44.787

第 1 步：扔掉 Web 服务器。某处应该有一个 php 可执行文件，只需运行您的脚本：`/path/to/php script.php`

这样你至少会直接看到正在发生的事情。

第 2 步：确保您实际上有足够的可用 RAM。如果没有……买一台更好的机器。PHP 数组是一个非常复杂的结构，如果你不这样做，它会在每次迭代中交换进出。

第 3 步：确保问题出在 include 上。在它之后添加一些回声，看看它是否执行。

如果一切都失败了，请尝试逐行解析文件。根据格式，对代码进行 eval() 或使用正则表达式解析可能更容易，这取决于您。

还：

> 3-必须在硬盘驱动器中存储一小部分数据（如 10mb）的逻辑

无论如何，任何体面的数据库都会在 RAM 中保留一份数据副本。不同之处在于 DBMS 已经过优化，可以有效地存储和访问它。当然，通过将整个数据集放入程序中可以更有效地完成一些任务，但您不想为此使用*网页*。（见上面的步骤 1）

# java - 检查java中是否存在文件

> ID：12450782
> 
> 赞同：0
> 
> 时间：2012-09-16T21:14:09.743
> 
> 标签：java, file, exists

因此，以下程序应将输入和输出文件作为命令行参数。

```
class FileCopy
{
public static void main(String[] args) throws IOException
{
    String infile = null;
    String outfile = null;
    BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));    

    if (args.length >= 2) //both files given via command line
    {
        infile = args[0];
        if (fileExists(infile) == false)
        {
            infile = getInputFile();
        }
        outfile = args[1];
    }
    else if (args.length == 1) //input file given via command line
    {
        infile = args[0];
        outfile = getOutputFile(infile);
    }
    else //no files given on command line
    {
        infile = getInputFile();
        outfile = getOutputFile(infile);
    }

    //create file objects to use
    File in = new File(infile);
    File out = new File(outfile);

    /*
     *rest of code
     */
}

//get the input file from the user if given file does not exist
public static String getInputFile() //throws IOException
{
    BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
    String fileName = null;
    boolean haveFile = false;

    while(haveFile == false)
    {
        System.out.println("Enter a valid filename for input:");
        System.out.print(">> ");
        try
        {
            fileName = stdin.readLine();
        }
        catch (IOException e)
        {
            System.out.println("Caught exception: " + e);
        }
        haveFile = fileExists(fileName);
    }

    return fileName;    
}

//get the output file and test things
public static String getOutputFile(String infile)
{
    BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
    File input = new File(infile);
    String filename = null;
    boolean more = true;
    while(more)
    {
        System.out.println("Enter a valid filename for output:");
        System.out.print(">> ");
        try
        {
            filename = stdin.readLine();
        }
        catch (IOException e)
        {
            System.out.println("Caught exception: " + e);
        }
        File output = new File(filename);
        if (output.exists())
        {
            more = false;
        }
        if (filename == infile)
        {
            int selection;
            String inputString = null;

            System.out.println("The output file given matches the input file. Please choose an option:");
            System.out.println("1) Enter new filename");
            System.out.println("2) Overwrite existing file");
            System.out.println("3) Backup existing file");
            System.out.print(">> ");
            try
            {
                inputString = stdin.readLine();
            }
            catch (IOException e)
            {
                System.out.println("Caught exception: " + e);
            }
            selection = Integer.valueOf(inputString);
            switch (selection)
            {
                case 1: //new filename
                case 2: //overwrite
                case 3: //backup
                default: System.exit(0);
            }
        }
    }
    return null;
}

//check the given file to see if it exists in the current working directory
public static boolean fileExists(String n)
{
    return (new File(n)).exists();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:13:50.897

我相信你错过了一个细节：

当你的程序只有一个参数 ( `args.length == 1`) 时，即只定义输入文件时，`fileExists()`根本不调用；`infile`设置为`args[0]`根本没有验证。您可能应该像对两个参数的情况所做的那样添加一个特定的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T22:15:15.997

我也遇到了类似的问题。我在 Eclipse 下工作，并且必须在我的当前目录中指定“src/file.txt”，在 src 目录中有一个名为“file”的文件。

*注意：它没有被命名为“file.txt”（这会导致字符串被解释为“file.txt.txt”！）。*

假设您的“src”目录中有一个名为“file”的文件，请尝试在此处针对该程序进行测试：

```
import java.io.File;

public class FileChecker {

public static boolean Exists( String file ) 
{ 
    System.out.println("File being checked: " + file);
    return( (file.length()) > 0 && (new File(file).exists()) );
}

public static void main( String[] args ) 
{
    File dir = new File("src");

    System.out.println("List of files in source directory: ");
    if( dir.isDirectory()){
        File[] filenames = dir.listFiles();
        for( Object file : filenames ) {
            System.out.println(file.toString());
        }

    }
    else
        System.out.println("Directory does not exist.");

    if(FileChecker.Exists("src/file.txt"))
        System.out.println("File exists");
    else
        System.out.println("File does not exist");
}

} 
```

它将打印出源目录中的当前文件，以便您查看该文件是否真的存在，然后您可以测试它是否真的存在。在我这边工作。

# magento - 无法使用 Magento 更新产品数据

> ID：12450783
> 
> 赞同：1
> 
> 时间：2012-09-16T21:14:29.213
> 
> 标签：magento, magento-1.4

我在更新产品数据时遇到问题。

奇怪的是，这个问题显然与该产品分配到的网站有关。由于某种原因，如果将产品分配给网站 A，我无法更新产品的数据 -*未执行“保存”操作*。

但是对于网站B，我可以修改所有产品的数据。但是，如果我尝试将产品分配给网站 A，我会遇到同样的问题并且没有完成保存。我比较了许多网站的数据，但我找不到任何可能导致此问题的原因。

我正在使用 Magento CE 1.4.2.0。正在升级到最新版本，但我仍然想知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T10:33:20.187

`catalogrule_product_price`s 主键的类型是`int(10)`。因此，当所有键都用完时，最后一个有效键是 4294967295，请参阅[Numeric Datatypes](http://dev.mysql.com/doc/refman/5.1/en/numeric-types.html)。尝试将其更改为`BIGINT`，一切都应该再次正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:22:10.677

我还注意到我不能再应用目录规则 - 我收到了错误

`SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '4294967295' for key 'PRIMARY'`

幸运的是，我们有系统的备份副本，一切正常。当我比较代码时，我没有发现任何可能导致此问题的差异，因此我查看了数据库。一旦我从工作备份副本中复制了用于目录规则的数据表 ( `catalogrule`, `catalogrule_product`, `catalogrule_group_website`, `catalogrule_product_price`) 并将其放入损坏的表中，一切都开始正常工作 - 产品保存和目录规则的应用。我仍然不知道这是怎么发生的，并且必须进行数据表比较，也许在那里得到我的答案。

# css - LESS CSS 和 RetinaJS 错误

> ID：12450784
> 
> 赞同：0
> 
> 时间：2012-09-16T21:14:34.780
> 
> 标签：css, ios, firefox, less, retina-display

我正在尝试使用[LESS CSS](http://lesscss.org/)和[RetinaJs](http://retinajs.com/)将背景图像制作成视网膜图像：

正如 RetinaJS 用户指南中所建议的，我包含了一个具有以下内容的 Retina.less 文件：

```
.at2x(@path, @w: auto, @h: auto) {
  background-image: url(@path);
  @at2x_path: ~`"@{path}".split('.').slice(0, "@{path}".split('.').length - 1).join(".") + "@2x" + "." + "@{path}".split('.')["@{path}".split('.').length - 1]`;

  @media all and (-webkit-min-device-pixel-ratio : 1.5) {
    background-image: url(@at2x_path);
    background-size: @w @h;
  }  
}

.topMenu {
    .at2x("../../resources/img/topMenuTitle.png");
} 
```

当我在 Firefox 上测试它时，我得到了错误：

```
b.value in undefined
in retina.less
@xxxxxxxxxx/resources/js/less-1.3.min.js:8
t@xxxxxxxxxx/resources/js/less-1.3.min.js:8
[...etc...] 
```

在 Safari（iPhone 4）中，我有：

```
'undefined' is not an object
in retina.less on line null, column 0:
NaN    background-image: url(@path); 
```

我在同一个文件夹中同时拥有 topMenuTitle.png (320px x 40px) 和 topMenuTitle@2x.png (640px x 80px)。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:32:06.280

我找到了解决方案

```
background-image: url(@path);  --->  background-image: url("@{path}");

background-image: url(@at2x_path); --->  background-image: url("@{at2x_path}");

.at2x("../../resources/img/topMenuTitle.png"); ---> .at2x('../../resources/img/topMenuTitle.png'); 
```

我希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T03:15:01.373

也许我做错了什么，但上面的说明对我不起作用。我确实发现更新到最新的retina.less 分支确实起到了作用。**但不是**来自主网站，我是指来自 Github 的版本。 [https://github.com/imulus/retinajs/blob/master/src/retina.less](https://github.com/imulus/retinajs/blob/master/src/retina.less)

# ruby-on-rails - mongoid 和 validates_associated 不起作用

> ID：12450787
> 
> 赞同：2
> 
> 时间：2012-09-16T21:14:47.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我正在使用 rails 3.2 并构建一个嵌套表单。但事情并没有像我预期的那样工作。首先，我的模型是一个有很多地址的公司。这是模型

```
class Company
    include Mongoid::Document
    include Mongoid::Timestamps

    field :name,                        :type => String
    field :description,         :type => String
    field :order_minimun,       :type => Float

    belongs_to :user

    has_many :addresses

    validates_presence_of :name, :description, :order_minimun
  validates_length_of :name, minimum:2, maximum: 30
  validates_length_of :description, minimum:5, maximum: 140
    validates :order_minimun, :numericality => { :only_integer => true, :greater_than_or_equal_to => 0 }

    accepts_nested_attributes_for :addresses
    validates_associated :addresses

end

class Address
    include Mongoid::Document
    include Mongoid::Timestamps
    include Mongoid::Spacial::Document

    field :street,      :type => String
    field :number,      :type => Integer

    field :phone,           :type => String

    field :location,        :type => Array,     spacial: {lat: :latitude, lng: :longitude, return_array: true }

    embeds_many :delivery_zones

    belongs_to :company
    belongs_to :city

    has_many :openingTimeRange

    validates_presence_of :street, :number
  validates_length_of :street, minimum:1, maximum: 30
    validates_length_of :number, minimum:1, maximum: 6
    validates_length_of :phone, minimum:5, maximum: 60

    attr_accessible :street, :number, :company_id, :city_id, :location, :phone, :delivery_zones, :latitude, :longitude

end 
```

如您所见，公司模型具有：

```
accepts_nested_attributes_for :addresses
validates_associated :addresses 
```

所以，我认为 a 可以构建嵌套形式。这是表单的代码

```
<%= form_for [:admin,@company],:url =>admin_company_path(@company), :html => {:class => "form-horizontal"}  do |f|%>

    <legend><%= t '.legend' %></legend>

    <%= group_input_field f, :name%>

    <%= group_field_for f, :description do%>
        <%= f.text_area :description, :rows => 5%>
    <% end -%>

    <%= group_input_field f, :order_minimun%>

    <%= f.fields_for :addresses do |builder|%>
        <%= render 'address_fields', :f=> builder%>
    <% end %>

    <div class="form-actions">
        <%= f.submit :class => 'btn btn-primary btn-large', :disable_with => t('button.saving') %>
        <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                admin_companies_path, :class => 'btn btn-large btn-danger' %>
  </div>

<% end %> 
```

_address_fields.html.erb

```
<%= group_input_field f, :street%>
<%= group_input_field f, :number%> 
```

我有一个简单的助手来使用引导程序生成表单字段

```
def group_input_field(f,field, options={})
    has_error = f.object.errors.has_key? field
    klass = has_error ? "control-group error": "control-group"
    content_tag(:div, :class => klass) do
        f.label(field, :class => 'control-label')+
        content_tag(:div, :class => 'controls') do
            f.text_field(field, :class => 'input')+
            show_error(f.object,field,has_error)+
            show_help(options)
            end
        end
end 
```

最后是控制器：

```
class Admin::CompaniesController < ApplicationController

    def new
        #crea una nueva compañia
        @company = Company.new
    end

    def edit
        @company = Company.find params[:id]
    end

    def create
        @company = Company.new(params[:company])
        if @company.save
            redirect_to :action => 'index'
        else
            render 'new'
        end
    end

    def update
        @company = Company.find(params[:id])
        if @company.update_attributes(params[:company])
            redirect_to :action => 'index'
        else
            render 'edit'
        end
    end

end 
```

发生了几件事。首先，我有一家有两个地址的公司，我可以编辑第一个地址，第二个地址的任何更改都不会保留。然后地址字段没有被验证（如果我在再次打开表单时将所有内容都留空，地址没有保存，我可以看到原始值）。并且当编辑任意地址的字段时，公司的任意字段值无效，提交表单后我可以看到公司模型上的错误，但地址显示为原始值，所以编辑的值是丢失。

希望清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:08:48.517

嗯，我找到了答案。我使用的是 mongoid 3.0.4 的版本。我运行命令 bundle update mongoid 并且 mongoid 已更新到版本 3.0.6。问题得到了解决。

谢谢。希望能帮助到你

# java - getAbsolutePath() NullPointerException

> ID：12450788
> 
> 赞同：1
> 
> 时间：2012-09-16T21:14:49.477
> 
> 标签：java

我正在使用 Java 开发 Halo：CE 自定义游戏启动器，并且我正在使用 Java 中的 Properties 类设置首选项系统，因此用户可以设置自定义游戏路径。我使用 JFileChooser 选择一个文件，然后将该路径写入配置文件。

但是，程序在这一行给出了一个空指针异常：（这是在事件侦听器函数中）

```
if(source == fovChooseButton)
    {
        int returnVal = chooseFile.showOpenDialog(settingsWindow);
        if(returnVal == JFileChooser.APPROVE_OPTION)
        {
            File selected = chooseFOV.getSelectedFile();

            try
            {
                config.setProperty("STLPath", selected.getAbsolutePath()); //This line gives the exception
                config.store(new FileOutputStream(CONFIG_FILE), null);

            }

            catch(Exception e)
            {
                handleException(e);
            }
        }
    } 
```

我确实有另一个 JFileChooser，它不会抛出任何异常。这是另一个的代码：

```
 if(source == fileChooseButton)
    {
        int returnVal = chooseFile.showOpenDialog(settingsWindow);
        if(returnVal == JFileChooser.APPROVE_OPTION)
        {
            File selected = chooseFile.getSelectedFile();

            try
            {
                config.setProperty("GamePath", selected.getAbsolutePath());

                config.store(new FileOutputStream(CONFIG_FILE), null);

            }

            catch(Exception e)
            {
                handleException(e);
            }
        } // end if

    } 
```

所有handleException() 所做的只是显示一个带有堆栈跟踪的对话框窗口。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:22:20.833

*之后您使用chooseFile*提示用户输入文件，您尝试从其他文件选择器选择FOV 读取文件

```
int returnVal = chooseFile.showOpenDialog(settingsWindow);
    if(returnVal == JFileChooser.APPROVE_OPTION)
    {
        File selected = chooseFOV.getSelectedFile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:19:42.360

> int returnVal = chooseFile.showOpenDialog(settingsWindow); 文件选择 = chooseFOV.getSelectedFile();

您有两个变量，可能还想`chooseFile`在第二行使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T21:22:14.483

什么是选择FOV？您似乎在使用 chooseFile 作为对话框，所以它是有选择的。

# java - spring mvc 操作方法可以将模型返回到视图或 xml 或 json 吗？

> ID：12450792
> 
> 赞同：1
> 
> 时间：2012-09-16T21:15:45.607
> 
> 标签：java, api, spring-mvc

对于 Web 应用程序，我需要将模型返回到视图。

对于移动应用程序或 API，我想返回 xml 或 json。

是否可以使用单个控制器方法完成所有这些操作，或者我是否必须复制它并创建单独的 API 控制器等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T00:18:04.927

使用 Spring MVC 3.x，您只需一种控制器方法即可完成此操作。诀窍是[`ContentNegotiatingViewResolver`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-multiple-representations)在你的 Spring 配置中连接适当的。您可以将其配置为根据文件扩展名和/或请求的 mime 类型返回所需的内容类型。

它最适合只向 . 中添加单个模型属性的方法`Model`，否则 JSON/XML 开始变得有点难看。

我经常发现为我的 Web 服务请求实现单独的控制器方法更简单/更好，因为您可以更好地控制 JSON/XML 的格式，并且代码更易于长期维护。

编辑：为了限定我上面的评论，我发现复杂的 JSP 页面可能添加了多达 5-10 个模型属性到页面，结果 JSON 往往很混乱，你通常会发现你真的只想要 1- JSON中的2个。OTOH，添加了 1-2 个模型的简单页面效果很好。

# python - 用给定行的所有单元格值填充字典

> ID：12450798
> 
> 赞同：0
> 
> 时间：2012-09-16T21:16:51.160
> 
> 标签：python, pyqt4, cell, qtablewidget

用户在 QTableWidget 的所有单元格中手动设置值。表的第一行的值表示我们要存储在字典中的值`FirstRowDict`。第二行值将被输入`SecondRowDict`，依此类推。

![在此处输入图像描述](../Images/eb03a6f8fa8dd9d4d3c6b6cd5e2794bd.png)

因此，从如图所示的表格中，我们希望在此示例中以`FirstRowDict={0:10,1:20}` 和结尾`SecondRowDict={0:30,1:40}`

为了实现这一点，我创建了一个按钮并添加了一个在单击时更新目标字典的操作：

```
def button_click():
    for j in range(0,2):
        FirstRowDict.update({i: float(str(tablewidget.itemAt(0,j).text()))})

        #I put "0" in itemAt because first row is zero
        #tablewidget = QTableWidget() declared earlier in the source code

        SecondRowDict.update({i: float(str(tablewidget.itemAt(1,j).text()))})

    print '1st_Row_Dict=%s'%1st_Row_Dict,'\n2nd_Row_Dict=%s'%2nd_Row_Dict 
```

***输出不正确，因为字典填充了相同的值，而不是每个单元格的唯一值。*** 我得到`FirstRowDict={0:10,1:10}`并且`SecondRowDict={0:10,1:10}`

看来我必须使用[QTableWidgetItem](http://doc.qt.nokia.com/4.7-snapshot/qtablewidget.html#item) [http://doc.qt.nokia.com/4.7-snapshot/qtablewidget.html#item创建一个新项目](http://doc.qt.nokia.com/4.7-snapshot/qtablewidget.html#item)

Python初学者，一些建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:40:09.920

啊，我看到了混乱。`itemAt`返回给定位置的项目，但不是`row/column`. 这是坐标（将其视为像素）。

是的，您应该使用`item`而不是`itemAt`.

`str`如果要将其转换为浮点数，则不需要 a 。`float()`将在 a 上工作，就`QString`好像它是 a 一样`str`。并且，`.update`您可以将新值分配给键，而不是 。

```
FirstRowDict[i] = float(tablewidget.item(0, j).text()) 
```

# html - 从 HTML 页面发布更多信息（超过输入值）

> ID：12450799
> 
> 赞同：0
> 
> 时间：2012-09-16T21:16:57.727
> 
> 标签：html, post, content-disposition

我正在开始网络开发。在发布表单时，所有输入字段都作为属性（Content-Disposition）发送。我想添加更多信息（我的意思是 POST 发送的更多属性），例如某个 html 标记的值，或者某个 div 的属性值。这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:43:34.880

解决这个问题的一个想法是使用“隐藏输入”（@html.HiddenFor）。这就是我要做的等待更好的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T21:46:17.620

您使用的是什么服务器端技术？您可能会使用 JavaScript 从表单中获取其他值然后提交，但这真的取决于。您可能想要更具体。

# vim - Vim langmap 中断插件 (bépo)

> ID：12450803
> 
> 赞同：6
> 
> 时间：2012-09-16T21:17:44.250
> 
> 标签：vim, keymapping, supertab

我正在使用 bépo 键盘映射 ( [http://bepo.fr](http://bepo.fr) ) 并寻求完美的 vim 映射。

到目前为止，我使用了[一长串 noremap](http://bepo.fr/wiki/Vim#B.C3.A9po.2FQwerty)，但对于许多绑定（例如，运动`aw`或`Ctrl`+ `r`），第一次击键被重新映射，但其他击键没有，我认为这是预期的行为，但这不是我需要的.

理想情况下，我会在更高级别（在`map`命令之前）完全重新映射我的键盘，除非在键入文本时（在插入模式下和键入替换示例时）。我正在寻找的似乎是`langmap`，但我在使用它时遇到了问题。

我[将此 langmap 添加到我的 .vimrc](https://linuxfr.org/nodes/88914/comments/1308347)中，它看起来很完美，但它破坏了我的一些插件。SuperTab 现在`<Plug>SuperTabForward`在按`Tab`插入模式时插入，我`t<SNR>24_SelectCompletion(1)`在按 Enter 时插入。

有人知道如何解决这个 langmap 问题或重新映射我的键盘的更好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-16T06:04:25.397

这是一个已知的错误，之前已经讨论过。我已经做了一个补丁（参见从[这里](https://groups.google.com/d/msg/vim_dev/QnNwLWhJ744/1qNcD7d9OvgJ)开始的线程），希望 Bram 很快就会包含这个更改。

**更新 11/05/2014**
这已由[补丁 7.4.502 修复](https://code.google.com/p/vim/source/detail?r=7b28dc1d756e11bd7e25a19ffe272ac605613a40)。使用该`langnoremap`选项来解决此问题。

# uninstallation - 在 OS X 上卸载 Ipython-0.12

> ID：12450804
> 
> 赞同：1
> 
> 时间：2012-09-16T21:17:58.693
> 
> 标签：uninstallation, ipython

我已从 OS 10.6 升级到 10.8，并全新安装了 Xcode 命令行工具、MacPorts 和 Pip。我使用 Pip 安装了 Ipython-0.13，当我从它自己的目录中打开它时它会运行；但是当我`ipython`在命令行输入时，只有旧版本的 Ipython-0.12 从 /Applications 目录打开。手动删除旧版本，然后键入`ipython`会出现错误消息

```
python: can't open file '/Applications/ipython-0.12/ipython.py': [Errno 2] No such file or directory 
```

并且没有对 Pip 或 MacPorts 的卸载/删除命令会导致卸载此旧版本（当然，因为旧版本未与 Pip 或 MacPorts 一起安装）。

我需要做什么才能让 ipython-0.12 消失并被遗忘，并`ipython`在命令行启动最新版本？python 在哪里寻找当前版本的 Ipython，如何手动更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:02:43.540

这是飞行员的失误。My`.bash_profile`包含一个别名，将 ipython-0.12 分配给 name `ipython`。当我删除它并重新启动时，一切都很好。

# scripting - InDesign：使用脚本将页面转换为 JPEG 并将其放置在同一页面上

> ID：12450809
> 
> 赞同：1
> 
> 时间：2012-09-16T21:18:46.043
> 
> 标签：scripting, flash-cs5, adobe-indesign

我应该如何使用 CS5 脚本将当前 InDesign 页面转换为图像并将其放置在同一页面上。

我已经下载以供参考，如果提供了一些使用方法的指针，我以后可以自己解决。

# 编辑

*   放回当前页面（如果您的页面编号正常）
*   导出到当前用户的应用目录

> ```
> var doc = app.activeDocument;
> 
> app.jpegExportPreferences.properties = {
>    antiAlias: true,
>    embedColorProfile: true,
>    exportResolution: 150,
>    // exportingSpread: true, // Uncomment if spreads
>    jpegColorSpace: JpegColorSpaceEnum.rgb,
>    jpegExportRange: ExportRangeOrAllPages.exportRange,
>    jpegQuality: JPEGOptionsQuality.maximum,
>    jpegRenderingStyle: JPEGOptionsFormat.baselineEncoding,
>    useDocumentBleeds: false,
>    simulateOverprint: false,
>    pageString: app.activeWindow.activePage.name // Page(s) to export, must be a string
> }
> 
> var userFolder = Folder ( Folder.userData.absoluteURI + "/Brilliant" );
> 
> if (!userFolder.exists) userFolder.create();
> 
> var tempFile = File(userFolder+"/page.jpg");
> 
> doc.exportFile(ExportFormat.jpg, tempFile);
> 
> var pageNumber = parseInt(app.activeWindow.activePage.name)-1?parseInt(app.activeWindow.activePage.name)-1:0;
> 
> var pageToPlace = doc.pages[pageNumber].place(tempFile);
> 
> tempFile.remove(); 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:13:40.330

这是一个示例，可能会满足您的需求。将 jpg 文件直接保存在 InDesign 文档中并不容易，但您可以将其导出到临时文件中，然后将其放回原处。您可能需要稍微调整一下才能使事情正确，但这样的事情应该可以做到诡计。

```
var doc = app.activeDocument;

// Set JPEG export preferences
app.jpegExportPreferences.properties = {
   antiAlias: true,
   embedColorProfile: true,
   exportResolution: 150,
   // exportingSpread: true, // Uncomment if spreads
   jpegColorSpace: JpegColorSpaceEnum.rgb,
   jpegExportRange: ExportRangeOrAllPages.exportRange,
   jpegQuality: JPEGOptionsQuality.maximum,
   jpegRenderingStyle: JPEGOptionsFormat.baselineEncoding,
   useDocumentBleeds: false,
   simulateOverprint: false,
   pageString: "1" // Page(s) to export, must be a string
}

// Make a temporary file
var tempFile = File("/Users/home/Desktop/temp11111.jpg");

// Export an image of the page to disk
doc.exportFile(ExportFormat.jpg, tempFile);

// Place the page image back on the page
var pageToPlace = doc.pages[0].place(tempFile);

// Remove the temporary file from the disk
tempFile.remove(); 
```

# opencv - 如何使用相机在 3D 空间中定位对象

> ID：12450813
> 
> 赞同：7
> 
> 时间：2012-09-16T21:19:28.913
> 
> 标签：opencv, arduino

是否可以使用几个网络摄像头（或任何摄像头）来获取对象的 x、y 和 z 坐标，然后在它在房间周围移动时使用[OpenCV跟踪它们。](http://en.wikipedia.org/wiki/OpenCV)

我正在考虑与本地化然后控制一架[遥控](http://en.wikipedia.org/wiki/Radio-controlled_model)直升机有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T09:40:54.983

是的。您需要同时检测两个图像上的点，然后匹配对应于场景中同一点的对。这样，您将拥有由不同坐标空间（相机 1 和相机 2）表示的相同点。

你可以从[这里](http://opencv.willowgarage.com/documentation/cpp/calib3d_camera_calibration_and_3d_reconstruction.html)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:05:31.247

如果使用深度传感器是可以接受的，那么你可以看看**[ReconstructMe](http://reconstructme.net)**是如何做到的。否则看看**[这个](http://www.google.rs/search?q=3d%202d%20camera%20model%20reconstruction)**谷歌搜索。

# jquery - JQuery 追加表

> ID：12450814
> 
> 赞同：0
> 
> 时间：2012-09-16T21:19:35.793
> 
> 标签：jquery, html, html-table, append, dynamic-tables

我正在尝试在我的注册页面中创建动态表，但我已经放弃了使用插件，我只想使用这个附加的东西。我希望**仅**当用户选择某个选项时才显示表格。所以这是我的html：

```
<div id="Reg_num2" style="display:none;" >
    <button id="AddLine">Add Line</button>
    <table border="1px" id="table">
        <tr>
            <td>First Name</td>
            <td>Last Name</td>
            <td>Phone</td>
            <td>Email</td>
            <td>Ethnicity</td>
        </tr>
        <tr>
            <td><input type=text /></td>
            <td><input type=text /></td>
            <td><input type=text /></td>
            <td><input type=text /></td>
            <td><input type=text /></td>
        </tr>
    </table>​
</div> 
```

这是我的jQuery代码：

```
$(document).ready(function(e) {
$("input[name= 'Reg_num_r']").change( function () {
        if($(this).val()==1) {
            $("#Reg_num2").hide();
        } else {
            $("#Reg_num2").show();
        }
    });

    $("#table").on("click", "button", function() {
       $(this).closest("tr").remove(); 
    });​

    $("#AddLine").click(function () {
        var row = "<tr><td><input type=text /></td><td><input type=text /></td><td><input type=text /></td><td>                   <input type=text /></td><td><input type=text /></td><td><button>X</button></td></tr>";
        $("#table").append(row);
    });
}); 
```

我有两个问题：

1.  当用户选择适当的单选按钮时，表格不会显示。代码有什么问题？
2.  当我单击添加按钮时，它会提交整个页面，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:24:03.373

问题是

```
if($(this).val()==1) { 
```

应该

```
if($(this).val()=="1") { 
```

第二个答案

```
$("#submitButton").submit(function(){
//do things
return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:27:14.970

> *“2）当我单击添加按钮时，它会提交整个页面，我该如何解决？”*

默认情况下，没有指定属性的`<button>`元素是，所以如果它在表单中，它将提交表单。将其更改为.`type``type="submit"``<button type="button">`

我不确定您的单选按钮问题，尽管我倾向于使用`.click`而不是`.change`- 请更新您的问题以显示相关的 html。

# ruby-on-rails - 在 Rails 中生成唯一的用户名

> ID：12450819
> 
> 赞同：0
> 
> 时间：2012-09-16T21:20:20.953
> 
> 标签：ruby-on-rails, database

如何根据格式生成唯一的用户名。例如，第一个用户注册。他的用户名是 AAA001，第二个用户注册的用户名是 AAA002，并且它一直这样递增。我该如何设置它，即使两个用户同时单击注册，数据库也只会向他们每个人发送一个唯一的用户名。这将在 RoR 上完成。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:39:12.617

您需要使用数据库事务。

这是一个例子：

```
ActiveRecord::Base.transaction do
  #code goes here
end 
```

这将确保事务内的代码是阻塞的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:37:10.090

您可以在模型的 after_safe 钩子中生成用户名并保存！再次在事务中（以防止竞争条件）并使用已保存用户的 DB-ID 生成用户名

# javascript - 如何在没有 JS 库的情况下查找具有特定 CSS 样式的所有元素？

> ID：12450820
> 
> 赞同：2
> 
> 时间：2012-09-16T21:20:29.630
> 
> 标签：javascript, css, dom

我想写一个书签来纠正其他人页面上的文本样式。特别是，我想找到任何带有“text-align：justify”的元素并将它们更改为“text-align：left”。我不确定如何找到这些元素。因为这是一个可在任意网页上使用的书签，我宁愿不依赖任何 Javascript 库（jQuery 等）来提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:32:36.923

这里：

```
var walkTheDOM = function walk ( node, func ) {
    if ( node.nodeType !== 1 ) return;
    func( node );
    node = node.firstChild;
    while ( node ) {
        walk( node, func );
        node = node.nextSibling;
    }
};

walkTheDOM( document.body, function ( elem ) {
    if ( getComputedStyle( elem ).textAlign === 'justify' ) {
        elem.style.textAlign = 'left';
    }
}); 
```

**现场演示：http:** [//jsfiddle.net/W3BUe/1/](http://jsfiddle.net/W3BUe/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:29:17.973

这将找到所有元素`text-align: justify`并将边框设置为红色。它应该足够让你开始。*注意：*这不是很有效，但是对于您的请求没有很好的有效解决方案。要提高性能，请尝试仅搜索相关标签。（也许你只需要检查 Ps 和 DIVs ？）

```
// Get all elements
var els = document.getElementsByTagName('*');
// Search for style: text-align = justify.
for(var i = 0, el; el = els[i]; i++) {
    if(getComputedStyle(el).textAlign == 'justify') {
        el.style.border = '1px solid #f00';
    }
} 
```

# android - 在android中创建了新类但无法弄清楚上下文

> ID：12450823
> 
> 赞同：2
> 
> 时间：2012-09-16T21:21:30.427
> 
> 标签：android

我在 android 中创建了一个在实例化时创建 LinearLayouts 的新类。但是我无法弄清楚要放在括号中的上下文：`new LinearLayout(context)`。有人可以阐明一下吗？（我已经尝试在上下文中阅读我所能阅读的所有内容）

我假设我不需要在课堂上扩展 Activity

```
public class NewLayouts {
...
newParentLayout = new LinearLayout(getApplicationContext()); //<--eclipse warns of error here saying not a valid context
newParentLayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
newParentLayout.setOrientation(LinearLayout.VERTICAL);
TextView monthDisplay = new TextView(getApplicationContext()); //<--eclipse warns of error here saying not a valid context
...
} 
```

我的主要活动：

```
public class MainActivity extends Activity {

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        NewLayouts Sample = new NewLayouts(1,2); //variables required in my constructor for new Layouts
        setContentView(Sample.newParentLayout);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:48:58.890

将构造函数更改为`NewLayouts`...

```
public NewLayouts(Context ctx, int X, int Y) {...} 
```

...然后`ctx`用作创建`Context`.`NewLayouts``Views`

然后执行`Activity`以下操作...

```
NewLayouts Sample = new NewLayouts(this, 1, 2); 
```

这会将`Activity's`自己的传递`Context`给`NewLayouts`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:30:22.480

尝试`new LinearLayout(this)`或`new LinearLayout(newLayouts.this)`

# java - Java如何使用鼠标拖动调整无边框窗口的大小？

> ID：12450827
> 
> 赞同：2
> 
> 时间：2012-09-16T21:21:52.063
> 
> 标签：java, swing

我有一个没有装饰的 jFrame，只有图形 GD 绘制了 gui。我希望用户调整这个窗口的大小，但没有边界是不可能的。所以我制作了一个鼠标监听器，以便在从特殊位置拖动时调整大小。它工作了一点，但在停止之前不会延伸很远。有没有更简单的方法？还有其他选择吗？有没有人用纯GD做过这个？

```
 this.addMouseListener(new MouseAdapter()
{
public void mousePressed(MouseEvent e)
{
  posX=e.getX();
  posY=e.getY();

}     

 }}); 

 this.addMouseMotionListener(new MouseAdapter()
{
 public void mouseDragged(MouseEvent evt)
 {
if (posX >= getWidth()-25 && posY >=getHeight()-45){
int nlx= evt.getXOnScreen()-(location().x-12);
int nly= evt.getYOnScreen()-(location().y-32);

        setSize(nlx,nly);
 setBackground(new Color(0, 0, 0, 0));
 invalidate(); 
    }else{
    setLocation (evt.getXOnScreen()-posX,evt.getYOnScreen()-posY);

    }

 }
 });  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:05:17.557

这是我使用了很长时间的完整鼠标适配器：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

/**
 * @see http://stackoverflow.com/a/12456113/909085
 */

public class WindowResizeAdapter extends MouseAdapter implements SwingConstants
{
    private boolean resizing = false;
    private int prevX = -1;
    private int prevY = -1;

    private int resizeSide = 0;

    public static void install ( Component component, int resizeSide )
    {
        WindowResizeAdapter wra = new WindowResizeAdapter ( resizeSide );
        component.addMouseListener ( wra );
        component.addMouseMotionListener ( wra );
    }

    public WindowResizeAdapter ( int resizeSide )
    {
        super ();
        this.resizeSide = resizeSide;
    }

    public void mousePressed ( MouseEvent e )
    {
        if ( SwingUtilities.isLeftMouseButton ( e ) )
        {
            resizing = true;
        }
        prevX = e.getXOnScreen ();
        prevY = e.getYOnScreen ();
    }

    public void mouseDragged ( MouseEvent e )
    {
        if ( prevX != -1 && prevY != -1 && resizing )
        {
            Window w = SwingUtilities.getWindowAncestor ( e.getComponent () );
            Rectangle rect = w.getBounds ();

            Dimension dim;
            boolean undecorated;
            if ( w instanceof JDialog )
            {
                dim = ( ( JDialog ) w ).getContentPane ().getPreferredSize ();
                undecorated = ( ( JDialog ) w ).isUndecorated ();
            }
            else if ( w instanceof JFrame )
            {
                dim = ( ( JFrame ) w ).getContentPane ().getPreferredSize ();
                undecorated = ( ( JFrame ) w ).isUndecorated ();
            }
            else
            {
                dim = w.getPreferredSize ();
                undecorated = true;
            }

            // Checking for minimal width and height
            int xInc = e.getXOnScreen () - prevX;
            int yInc = e.getYOnScreen () - prevY;
            if ( undecorated )
            {
                if ( resizeSide == SwingConstants.NORTH_WEST || resizeSide == SwingConstants.WEST ||
                        resizeSide == SwingConstants.SOUTH_WEST )
                {
                    if ( rect.width - xInc < dim.width )
                    {
                        xInc = 0;
                    }
                }
                else if ( resizeSide == SwingConstants.NORTH_EAST ||
                        resizeSide == SwingConstants.EAST ||
                        resizeSide == SwingConstants.SOUTH_EAST )
                {
                    if ( rect.width + xInc < dim.width )
                    {
                        xInc = 0;
                    }
                }
                if ( resizeSide == SwingConstants.NORTH_WEST ||
                        resizeSide == SwingConstants.NORTH ||
                        resizeSide == SwingConstants.NORTH_EAST )
                {
                    if ( rect.height - yInc < dim.height )
                    {
                        yInc = 0;
                    }
                }
                else if ( resizeSide == SwingConstants.SOUTH_WEST ||
                        resizeSide == SwingConstants.SOUTH ||
                        resizeSide == SwingConstants.SOUTH_EAST )
                {
                    if ( rect.height + yInc < dim.height )
                    {
                        yInc = 0;
                    }
                }
            }

            // Resizing window if any changes are done
            if ( xInc != 0 || yInc != 0 )
            {
                if ( resizeSide == SwingConstants.NORTH_WEST )
                {
                    w.setBounds ( rect.x + xInc, rect.y + yInc, rect.width - xInc,
                            rect.height - yInc );
                }
                else if ( resizeSide == SwingConstants.NORTH )
                {
                    w.setBounds ( rect.x, rect.y + yInc, rect.width, rect.height - yInc );
                }
                else if ( resizeSide == SwingConstants.NORTH_EAST )
                {
                    w.setBounds ( rect.x, rect.y + yInc, rect.width + xInc, rect.height - yInc );
                }
                else if ( resizeSide == SwingConstants.WEST )
                {
                    w.setBounds ( rect.x + xInc, rect.y, rect.width - xInc, rect.height );
                }
                else if ( resizeSide == SwingConstants.EAST )
                {
                    w.setBounds ( rect.x, rect.y, rect.width + xInc, rect.height );
                }
                else if ( resizeSide == SwingConstants.SOUTH_WEST )
                {
                    w.setBounds ( rect.x + xInc, rect.y, rect.width - xInc, rect.height + yInc );
                }
                else if ( resizeSide == SwingConstants.SOUTH )
                {
                    w.setBounds ( rect.x, rect.y, rect.width, rect.height + yInc );
                }
                else if ( resizeSide == SwingConstants.SOUTH_EAST )
                {
                    w.setBounds ( rect.x, rect.y, rect.width + xInc, rect.height + yInc );
                }
                prevX = e.getXOnScreen ();
                prevY = e.getYOnScreen ();
            }
        }
    }

    public void mouseReleased ( MouseEvent e )
    {
        resizing = false;
    }
} 
```

只需使用其“安装”方法将窗口调整大小行为添加到任何组件。resizeSide 变量用于定义应调整窗口哪一侧的大小（例如 SwingConstants.SOUTH_EAST 将强制组件调整窗口右下角的大小）。

**编辑：**您可能还想针对您的特定情况修改代码，以便拖动（调整大小）仅从组件上的某个特定区域开始。只需修改 mousePressed 方法即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T22:32:35.157

我对 jFrame 做了类似的事情，我通过在 jFrame 外部添加 4 个非常薄的按钮来解决它，并使用按钮中的 mousepressed 和 mousedragagged 侦听器来控制 jFrame 调整大小，效果非常顺利。

mousePressed 监听器让我们获得起始位置，这样我就可以计算框架被拖动/调整大小的距离

如果要节省资源，则应在释放鼠标时而不是在拖动鼠标时调整所有子组件的大小

编辑：在 X 轴上调整框架大小的示例。

```
public class NewJFrame extends javax.swing.JFrame
{
    //demo locations
    int X1 = 0;
    int X2 = 0;

    public NewJFrame()
    {
    initComponents();
    }

    @SuppressWarnings("unchecked")
    private void initComponents() {

        ResizeEast = new javax.swing.JButton();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setUndecorated(true);

        ResizeEast.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                ResizeEastMousePressed(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                ResizeEastMouseReleased(evt);
            }
        });
        ResizeEast.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            public void mouseDragged(java.awt.event.MouseEvent evt) {
                ResizeEastMouseDragged(evt);
            }
        });

        jButton1.setText("Close");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 320, Short.MAX_VALUE)
                .addComponent(ResizeEast, javax.swing.GroupLayout.PREFERRED_SIZE, 11, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton1)
                .addContainerGap(266, Short.MAX_VALUE))
            .addComponent(ResizeEast, javax.swing.GroupLayout.DEFAULT_SIZE, 300, Short.MAX_VALUE)
        );

        pack();
    }

    private void ResizeEastMousePressed(java.awt.event.MouseEvent evt)
    {
    //set mosuepressed location to X1 and Y1
    X1 = evt.getX();
    }

    private void ResizeEastMouseReleased(java.awt.event.MouseEvent evt)
    {
    //update the location and size of all child components
    }

    private void ResizeEastMouseDragged(java.awt.event.MouseEvent evt)
    {
    //resize jframe on the fly
    X2 = evt.getX();
    //set minimum size to 100 wide
    if ((getWidth() - (X1 - X2)) < 100)
    {
        X2 = X1;
    }

    //resize east side only
    this.setSize(getWidth() - (X1 - X2), getHeight());
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
    {
    System.exit(0);
    }

    public static void main(String args[])
    {
    java.awt.EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
        new NewJFrame().setVisible(true);
        }
    });
    }
    // Variables
    private javax.swing.JButton ResizeEast;
    private javax.swing.JButton jButton1;
} 
```

要从角落重新调整大小，请创建小角落按钮来调整 X 和 Y 的大小，如下所示：`YourFrame.setSize(getWidth() - (X1 - X2), getHeight() - (Y1 - Y2));`

# python - “NoneType”对象没有属性“set_cookie”

> ID：12450838
> 
> 赞同：1
> 
> 时间：2012-09-16T21:23:05.937
> 
> 标签：python, django, formwizard

我在 python 中获得了 Formwizard 的以下 django 代码。首先有两种形式：

```
 class AuthenticationForm(forms.Form):
      FirstName = forms.CharField(max_length=500)
      LastName = forms.CharField(max_length=500)

 class SurveyForm(forms.Form):
      def __init__(self, *args, **kwargs):
       super(SurveyForm, self).__init__(*args, **kwargs)
       for question in choiceValue:
                self.fields[question] =  forms.ChoiceField(choices=CHOICES,widget=RadioSelect())

class ContactWizard(FormWizard):
choiceValue = []

def get_template(self,step): 
    if step == 0:
        return 'wizard0.html'
    if step == 1:
        return 'wizard1.html'

def process_step(self, request, form, step):
    if (step == 0):      
        fullName=""      
        if request.method== 'POST':               
            if form.is_valid():  
                FirstName = form.cleaned_data['FirstName']
                LastName = form.cleaned_data['LastName']
                FirstNameU=FirstName.capitalize()
                LastNameU=LastName.capitalize()
                fullName=FirstNameU+" "+LastNameU
                personURIfn=GraphR.triples((None,FOAF_NS['givenName'],Literal(FirstNameU)))
                personURIln=GraphR.triples((None,FOAF_NS['familyName'],Literal(LastNameU)))          
                for purifn in personURIfn:
                    purifnStr='%s' %purifn[0]
                    for puriln in personURIln:     
                        purilnStr='%s' %puriln[0]
                        if purifnStr == purilnStr:               
                            personURI=purifnStr
                            friendKnows=GraphR.triples((URIRef(purifnStr),FOAF_NS['knows'],None))
                            for fk in friendKnows: #and scn1 not in epuriList1:            
                                fkStr='%s' %fk[2]
                                choiceValue.append(fkStr)
                return render_to_response('wizard1.html', RequestContext(request))

def done(self, request, form_list):
    print 'run' 
```

我不明白为什么它会给出标题中提到的错误。此外，谷歌也没有提供任何具体的帮助。有没有人能猜出它的原因。我怀疑 Done 方法中发生了错误，但不确定。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T21:58:54.730

想想`process_step`如果 if 不是第 0 步，或者它是 GET 而不是 POST，或者表单无效时会发生什么。在这些情况下会返回什么？

# architecture - SoC 的首选 HDL 实例化层次结构

> ID：12450839
> 
> 赞同：2
> 
> 时间：2012-09-16T21:23:22.470
> 
> 标签：architecture, vhdl, verilog, fpga, system-on-chip

假设您正在实现一个带有 cpu、ram、rom 和 mmu 的简单 SoC，以将 ram 和 rom 映射到 cpu 的地址空间。在实例化不同的组件时，这样做会更有意义：

ram 和 rom 在 mmu 中实例化

```
top
    cpu
    mmu
        ram
        rom 
```

或者

所有组件都在顶层实例化并在那里连接在一起

```
top
    cpu
    mmu
    ram
    rom 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T03:39:42.473

这实际上是一个设计问题，答案取决于您的要求。需要考虑的几点是：

**重用**

与许多 SoC 项目中的情况一样，您可能希望将模块或子系统从一个项目重用到下一个项目。将模块组合在一起是一个好主意，具体取决于它们在不同上下文中的重用方式。这样，除了设计 RTL（例如测试台、综合约束、断言等）之外的附属物也可以被重用。

**依赖项**

这与重用的考虑是一致的，但请考虑模块之间的依赖关系。在您的示例中，mmu 是否总是*需要*RAM 和 ROM？如果是，这是在 mmu 中实例化它们的论据。mmu 会与不同数量的内存一起工作吗？如果是，这是实例化 mmu 之外的内存的论据。

**验证范围**

在现代 SoC 设计中，验证比设计本身需要更多的时间和资源。因此，以一种有助于且不妨碍验证工作的方式构建层次结构。例如，如果您的示例中的 cpu 要自行验证，则 cpu 应实例化所有子组件，在内部将它们连接起来，并且只显示相关的 cpu 端口。这样，验证环境（也称为测试平台）不必复制 cpu、mmu 和内存之间的所有连接。

一般来说，我认为层次结构（你的两个例子中的第一个）最有意义，也是最常见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:30:31.473

根据你的问题，没关系。在中等复杂的 ASIC 上，层次结构很重要，因为模块通常用于定义综合边界和电源域等。

# iphone - NSOrderedSet 上的 NSFetchRequest？

> ID：12450841
> 
> 赞同：1
> 
> 时间：2012-09-16T21:23:32.057
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchrequest

我有一个名为 Entry 的核心数据实体，它与名为 Media 的实体存在一对多关系，这些实体位于有序集中。我想运行 NSFetchRequest 来请求它们的批量大小，这样我就可以遍历它们而不必一次将它们全部加载到内存中。我想按照它们在有序集中的顺序来浏览它们。我怎样才能让它们按那个顺序排列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:33:46.173

最好的方法是`NSFetchedResultsController`在获取 Core Data 实体时担心内存管理时使用。它会自动只获取您需要的对象并最小化内存占用。

通过获取有序集中的所有相关对象，它们应该已经处于预期的顺序。

# javascript - 在列表中输出所有页面的媒体查询

> ID：12450843
> 
> 赞同：10
> 
> 时间：2012-09-16T21:23:45.670
> 
> 标签：javascript, jquery, responsive-design, media-queries

使用 JavaScript，输出包含应用于当前页面的所有媒体查询的列表的最佳方式是什么。

我认为这需要过滤以找到嵌入式媒体查询，即

`<link rel="stylesheet" media="only screen and (min-width: 30em)" href="/css/30em.css">`

以及位于 CSS 文件中的媒体查询，即

`@media only screen and (min-width: 320px) {}`

我正在寻找的示例输出：

```
<p>There are 3 media queries loaded on this page</p>
<ol>
    <li>30em</li>
    <li>40em</li>
    <li>960px</li>
</ol> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T21:36:28.517

您可以使用[`MediaQueryList`](https://developer.mozilla.org/en-US/docs/DOM/MediaQueryList)对象：

> MediaQueryList 对象维护文档上的媒体查询列表，并在文档上的媒体查询更改时处理向侦听器发送通知。

Nicholas C. Zakas 的相关文章：

[http://www.nczonline.net/blog/2012/01/03/css-media-queries-in-javascript-part-1/](http://www.nczonline.net/blog/2012/01/03/css-media-queries-in-javascript-part-1/)

* * *

另一种选择是使用对象`styleSheets`的属性`document`。

```
var $ol = $('<ol/>');

var styleSheet = document.styleSheets;
$.each(styleSheet, function(i, styleObject) {
   $.each(styleObject.cssRules, function(i, rule){  
      if (rule.media) {
          $ol.append(rule.media[0]) // only screen and (min-width: 481px) and (max-width: 768px)
       }  
   }) 
}) 
var len = $ol.find('li').length;
$('p').text('There are ' + len + ' media queries loaded on this page')
$('body').append($ol) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T12:07:14.737

使用代码检查[此处](http://jsfiddle.net/C2y8Q/1/)的示例以列出正在应用于当前页面的媒体查询

JavaScript：

```
var mediaQueryCount = 0;

$(document).ready(function(){
    $links = $('link[rel="stylesheet"]');
    $.each($links, function(i, item){
        if(item.media){
            mediaQueryCount++;
            var start = item.media.indexOf('(')+1;
            var end = item.media.indexOf(')');
            var str = item.media.substring(start, end);
            var listItem = $('<li />',{
                html: str.split(':')[1]
            }).appendTo("#result");
        }
    });
    $('#totalMedia').text(mediaQueryCount);
}); 
```

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" media="only screen and (min-width: 30em)" />
        <link rel="stylesheet"  media="only screen and (min-width: 40em)"/>
        <link rel="stylesheet"  media="only screen and (min-width: 960px)"/>
    </head>
    <body>
        <p>There are <span id="totalMedia"></span> media queries loaded on this page</p>
        <ol id="result">
        </ol>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T08:42:50.583

请查看此[链接](http://jsfiddle.net/YR3cs/)。我使用@sureshunivers 代码来解析和创建 li 列表。

```
var sheets = document.styleSheets;  //contains an object of all loaded stylesheets
var rules = sheets[i].cssRules; //The rules variable is list of all the rules of the current stylesheet represented as CSSRule objects. 
```

查看这篇文章[- 在 javascript 中对媒体查询做出反应](http://tylergaw.com/articles/reacting-to-media-queries-in-javascript)

# c++ - 带有新信号的 QEditLine 子类

> ID：12450844
> 
> 赞同：1
> 
> 时间：2012-09-16T21:24:02.487
> 
> 标签：c++, qt, qt4, qt-signals

我正在尝试继承 QEditLine 以便我可以定义一个发送对象标识符的新信号。目前，我将一个父信号连接到新类中的一个插槽，并从该插槽发出一个带有附加对象标识符的适当新信号。我无法理解一件事。问题是我不知道如何定义一个新的信号函数本身。我不知道我应该放什么。我的意思是我知道它的论点，但我不知道它作为一个函数应该做什么。我是第一次这样做，它可能看起来很傻；p 但我真的卡在那里>.<。任何人都可以提供一些线索。这可能是一个非常简单的问题。

谢谢

```
// myqeditline.h
#ifndef MYQEDITLINE_H
#define MYQEDITLINE_H
#include <QWidget>
#include <QLineEdit>
#include <QString>
class MyQEditLine : public QLineEdit
{
    Q_OBJECT
public:
    explicit MyQEditLine(const QString& n, QWidget *parent = 0);
protected:
    QString name;
signals:
    void textChanged(QString textCHanged, QString sender);
protected slots:
public slots:
    void myTextChanged(QString textChanged);
};
#endif // MYQEDITLINE_H

// myqeditline.cpp
#include "myqeditline.h"
MyQEditLine::MyQEditLine(const QString &n, QWidget *parent)
    : QLineEdit(parent),name(n) {
    connect(this,SIGNAL(textChanged(QString)),this,SLOT(myTextChanged(QString)));
}
void MyQEditLine::myTextChanged(QString textChanged) {
    emit textChanged(QString textChanged, QString name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T00:29:55.117

我刚刚意识到我的问题的答案在这个[Qt 项目](http://doc.qt.nokia.com/4.7-snapshot/signalsandslots.html)网站上，在第 4 段中关于“信号”的部分。它说：“*信号由**moc**自动生成，不得在 .cpp 文件中实现。它们永远不能有返回类型（即使用**void**）。* ”

# perl - 从 Perl 中的多维哈希中获取列表

> ID：12450851
> 
> 赞同：1
> 
> 时间：2012-09-16T21:24:46.570
> 
> 标签：perl, hash, multidimensional-array

在 Programming Perl (the book) 我读到我可以创建一个字典，其中条目包含一个数组，如下所示：

```
$wife{"Jacob"} = ["Leah", "Rachel", "Bilhah", "Zilpah"]; 
```

假设我想获取`$wife{"Jacob"}`列表中的内容。我怎样才能做到这一点？

如果我尝试：

```
$key = "Jacob";
say $wife{$key}; 
```

我得到：

```
ARRAY (0x56d5df8) 
```

这让我相信我得到的是参考，而不是实际的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T21:49:54.100

看

*   [佩洛尔](http://perldoc.perl.org/perllol.html)_
*   [perldsc](http://perldoc.perl.org/perldsc.html)和
*   [perlreftut](http://perldoc.perl.org/perlreftut.html)

有关使用复杂数据结构和引用的信息。

本质上，散列只能将*标量*作为值，但引用是标量，因此，您将 arrayref 保存在散列中，并且必须将其*取消引用*到数组。

要取消引用引用，请使用`@{...}`语法。

```
say @{$wife{Jacob}}; 
```

或者

```
say "@{$wife{Jacob}}"; # print elements with spaces in between 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:12:57.547

我想这个时候你一定知道它 `$`指的是一个标量和`@`一个数组。

既然你自己说那个键的值是一个数组，那么你应该

```
say @wife{$key}; 
```

代替

```
say $wife{$key}; 
```

# oracle - 仅查看包含表和键的大型 Oracle RDBMS ERD

> ID：12450852
> 
> 赞同：1
> 
> 时间：2012-09-16T21:24:48.553
> 
> 标签：oracle

我是 Oracle 的新手，我被要求对一个庞大的遗留数据库进行逆向工程；实际上太大了，以至于当我查看 ERD 时，它占用了 3 个绘图图；3 面墙。

我无法放大；这是因为有许多属性（每...数百个）

有没有办法：1）只查看表名、键和关系 2）限制表名、键和关系的范围

大型企业中是否存在 DBA 可以授予我执行此分析的读取权限的工具。

感谢你的协助！！！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:57:14.063

我推荐你 Oracle SQL Developer Data Modeler

[http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html](http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)

在那里你可以 ：

*   从整个 ERD 模型创建子视图

[http://docs.oracle.com/cd/E25259_01/doc.31/e25257/data_modeling.htm#BABCIAEG](http://docs.oracle.com/cd/E25259_01/doc.31/e25257/data_modeling.htm#BABCIAEG)

*   仅显示名称（无属性）
*   用于大企业数据分析项目
*   许多有用的功能

> 最好的功能：它是免费的

# c - 是否打印了一个带有不同数量空格的值？

> ID：12450853
> 
> 赞同：1
> 
> 时间：2012-09-16T21:25:20.050
> 
> 标签：c, spaces

这可能吗？因此，如果我要打印一个值，我可以在实际输出之前使用 3 个空格而不是 4 个空格来打印它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T22:05:54.250

printf 具有用于动态指定最小字段宽度的 * 格式：

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    int value = 5;
    const char *name = "LaDonna";
    double value2 = 200.55;
    const char *space = " ";
    for (int width = 0; width < 10; width++)
        printf("%*d %*.2f %*s\n",width,value,width,value2,width + 5,name);
    for (int width=1; width < 5; width++)
        printf("%*s%d\n",width,space,width);
    return 0;
} 
```

输出：

```
5 200.55 LaDonna
5 200.55 LaDonna
 5 200.55 LaDonna
  5 200.55  LaDonna
   5 200.55   LaDonna
    5 200.55    LaDonna
     5 200.55     LaDonna
      5  200.55      LaDonna
       5   200.55       LaDonna
        5    200.55        LaDonna
 1
  2
   3
    4 
```

# css - CSS 预处理器会产生更高效的 CSS 代码吗？

> ID：12450855
> 
> 赞同：5
> 
> 时间：2012-09-16T21:25:51.470
> 
> 标签：css, less

高效是指更少的代码（更少的 CSS 规则）。

因为我正在将 CSS 文件转换为 less，我惊讶地发现编译后的 CSS 文件非常小（我还没有完成：P）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:30:57.070

这实际上取决于您如何在 LESS 中构建代码。如果您使用大量混合（例如渐变）或`@`操作员过于随意地嵌套选择器，编译后的输出可能会变得非常笨拙。

总而言之，如果使用得当，他们“可以”生成更高效的代码。但是，你也可以使用纯 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:47:24.220

如上所述，这在很大程度上取决于您的 CSS 一开始是否效率低下。然而，在实践中**几乎没有情况**需要更“高效”的 CSS（我说的是性能而不是重复）——是的，重复规则等是不好的，但首先应该是代码的可读性和可维护性。

一般来说，我发现使用预处理器带来的生产力收益远远超过规则重复的任何问题，如果你想减少它的实际文件大小，那么 WinLESS（和其他编译器）可以在源代码上缩小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T22:00:05.087

一般来说，像 LESS 或 SASS 这样的工具将无法像手动编写（具有适当的知识）那样生成流线型的 CSS，因为这些工具不知道它们正在运行的 DOM。任何优化器都只能与它对运行时环境的全面评估一样好，而缺少的 DOM 是一个相当大的变量。如果您正确地构建文档并编写 CSS 以利用这一点，那么输出将远远小于生成的代码。

这些工具（如任何形式的代码生成甚至更高级别的语言）的优势在于它们提高了生产力。可以更容易地生成更一致且可能可维护的输出，但为了做到这一点，这些工具将毫不妥协地明确和“安全”，因此生成的代码在与文档相关联时可以很容易地识别为不必要的。一般来说，开发和维护成本高于 CPU 周期，因此生产力收益胜出。有时可能存在需要解决的性能问题，但“过早的优化是万恶之源”——Knuth

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-16T22:34:57.243

LESS（编译时）和 Sass 都缩小了你的 CSS。除了去除空白之外，您有时还会看到`border: 0 10px 0 10px`get 变成`border: 0 10px`或颜色`#666666`变成`#666`. 它不再有效，但它确实为用户减少了下载量（这对移动设备很有价值）。

也就是说，Sass 有一个名为 @extend 的独特指令，它允许您在预编译状态下对样式进行逻辑分组，但会将它们组合在一起以避免在编译状态下重复。

```
.classA { color: blue }

// 50 lines of code defining other elements...

.classB { @extend .classA } 
```

将输出如下所示的内容：

```
.classA, .classB { color: blue } 
```

两个类只有一个共同点似乎没什么大不了的，但是你使用的元素越多，它们的共同点就越多，它的意义就越大。

否则没有。效率完全取决于作者。

# iphone - iOS 如何加密和解密二进制文件？

> ID：12450859
> 
> 赞同：0
> 
> 时间：2012-09-16T21:26:15.293
> 
> 标签：iphone, ios, security, encryption, cryptography

我是一名 iOS 开发人员，想知道是否有人了解二进制加密在 iOS 中的工作原理？即，Apple 是否使用其私钥对应用程序进行签名以在应用程序商店上分发，然后在加载应用程序时使用相应的公钥对其进行解密？还是不是公钥/私钥加密？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:31:16.727

Apple 的应用程序以及音乐等的 DRM 系统称为**FairPlay**。

你可以在网上找到很多关于这个的信息。
主要是：

*   [FairPlay - 维基百科](http://en.wikipedia.org/wiki/FairPlay)
*   [FairPlay 如何运作：Apple 的 iTunes DRM 困境](http://www.roughlydrafted.com/RD/RDM.Tech.Q1.07/2A351C60-A4E5-4764-A083-FF8610E66A46.html)

# java - 从特定活动返回后绘制在其他元素之上的 SurfaceView

> ID：12450862
> 
> 赞同：1
> 
> 时间：2012-09-16T21:26:44.183
> 
> 标签：java, android, api

我有一个通过 SurfaceView 显示的视频预览活动以及位于其上的其他视图。问题是当用户导航到设置活动（下面的代码）并返回时，表面视图被绘制在其他所有内容之上。当用户转到我拥有的另一个活动时，不会发生这种情况，当用户在应用程序之外导航时也不会发生这种情况。到任务管理器。

现在，您在下面的代码中看到我将 setContentVIew() 调用包装在条件中，因此每次执行 onStart() 时都不会调用它。如果它没有包含在 if 语句中，那么一切正常，但是每次调用 onStart() 都会导致丢失大量内存（5MB+）。我尝试了各种组合，但似乎没有任何效果，因此非常感谢任何帮助。

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    //Toast.makeText(this,"Create ", 2000).show();
    // set 32 bit window (draw correctly transparent images)
    getWindow().getAttributes().format = android.graphics.PixelFormat.RGBA_8888;

    // set the layout of the screen based on preferences of the user

    sharedPref = PreferenceManager.getDefaultSharedPreferences(this);
}

public void onStart()
{
    super.onStart();

    String syncConnPref = null;
    syncConnPref = sharedPref.getString("screensLayouts", "default");

    if(syncConnPref.contentEquals("default") && currentlLayout!="default")
    {
        setContentView(R.layout.fight_recorder_default);    
    } 
    else if(syncConnPref.contentEquals("simple") && currentlLayout!="simple")
    {
        setContentView(R.layout.fight_recorder_simple);
    } 

            // I I uncomment line below so it will be called every time without conditionals above, it works fine but every time onStart() is called I'm losing 5+ MB memory (memory leak?). The preview however shows under the other elements exactly as I need memory leak makes it unusable after few times though

            // setContentView(R.layout.fight_recorder_default);

    if(getCamera()==null)
    {
        Toast.makeText(this,"Sorry, camera is not available and fight recording will not be permanently stored",2000).show();

        // TODO also in here put some code replacing the background with something nice

        return;
    }

    // now we have camera ready and we need surface to display picture from camera on so
    // we instantiate CameraPreviw object which is simply surfaceView containing holder object.
    // holder object is the surface where the image will be drawn onto 
    // this is where camera live cameraPreview will be displayed

    cameraPreviewLayout = (FrameLayout) findViewById(id.camera_preview);

    cameraPreview = new CameraPreview(this);

    // now we add surface view to layout

    cameraPreviewLayout.removeAllViews();

    cameraPreviewLayout.addView(cameraPreview);

    // get layouts prepared for different elements (views)

    // this is whole recording screen, as big as screen available

    recordingScreenLayout=(FrameLayout) findViewById(R.id.recording_screen);

    // this is used to display sores as they are added, it displays like a path
    // each score added is a new text view simply and as user undos these are removed one by one

    allScoresLayout=(LinearLayout) findViewById(R.id.all_scores);

    // layout prepared for controls like record/stop buttons etc

startStopLayout=(RelativeLayout) findViewById(R.id.start_stop_layout);      

    // set up timer so it can be turned on when needed

    //fightTimer=new FightTimer(this);

    fightTimer = (FightTimer) findViewById(id.fight_timer);

    // get views for displaying scores

    score1=(TextView) findViewById(id.score1);
    score2=(TextView) findViewById(id.score2);
    advantages1=(TextView) findViewById(id.advantages1);
    advantages2=(TextView) findViewById(id.advantages2);
    penalties1=(TextView) findViewById(id.penalties1);
    penalties2=(TextView) findViewById(id.penalties2);
    RelativeLayout welcomeScreen=(RelativeLayout) findViewById(id.welcome_screen);

    Animation fadeIn = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    welcomeScreen.startAnimation(fadeIn);

    Toast.makeText(this,"Start ", 2000).show();

    animateViews();         
} 
```

设置活动如下，从该活动返回后，表面视图被绘制在其他元素之上。

```
public class SettingsActivity extends PreferenceActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if(MyFirstAppActivity.getCamera()==null)
        {
            Toast.makeText(this,"Sorry, camera is not available",2000).show();
            return;
        }

        addPreferencesFromResource(R.xml.preferences);

        }
} 
```

# mysql - Bind9 和 MySQL DLZ 缓冲区错误

> ID：12450864
> 
> 赞同：0
> 
> 时间：2012-09-16T21:27:31.693
> 
> 标签：mysql, bind, named

我从源代码编译 Bind 9（见下文）并使用 MySQL DLZ 设置 Bind9。当我尝试从服务器获取有关缓冲区溢出的任何内容时，我不断收到错误消息。我用谷歌搜索了很多次，但找不到任何关于如何解决这个错误的信息。

**配置选项：**

> root@anacrusis:/opt/bind9/bind-9.9.1-P3# 命名为 -V BIND 9.9.1-P3 用 '--prefix=/opt/bind9' '--mandir=/opt/bind9/man' 构建'--infodir=/opt/bind9/info' '--sysconfdir=/opt/bind9/config' '--localstatedir=/opt/bind9/var' '--enable-threads' '--enable-largefile' '--with-libtool' '--enable-shared' '--enable-static' '--with-openssl=/usr' '--with-gssapi=/usr' '--with-gnu-ld' '--with-dlz-postgres=no' '--with-dlz-mysql=yes' '--with-dlz-bdb=no' '--with-dlz-filesystem=yes' '--with-dlz -stub=yes' '--with-dlz-ldap=yes' '--enable-ipv6' 'CFLAGS=-fno-strict-aliasing -DDIG_SIGCHASE -O2' 'LDFLAGS=-Wl,-Bsymbolic-functions' 'CPPFLAGS =' 使用 OpenSSL 版本：OpenSSL 1.0。1 2012 年 3 月 14 日使用 libxml2 版本：2.7.8

这是我`dig example.com`（使用调试）时遇到的错误：

> 查询字符串：select ttl, type, mx_priority, case when lower(type)='txt' then concat('"', data, '"') else data end from dns_records where zone = 'example.com' and host = ' @'
> 
> 2012 年 9 月 17 日 01:09:33.610 dns_rdata_fromtext：缓冲区 0x7f5bfca73360:1：输入意外结束 2012 年 9 月 17 日 01:09:33.610 dns_sdlz_putrr 返回错误。错误代码是：输入意外结束 2012 年 9 月 17 日 01:09:33.610 查询字符串：选择 ttl、类型、mx_priority、case when lower(type)='txt' then concat('"', data, '"' ) 否则数据从 dns_records 结束，其中 zone = 'example.com' 和 host = '*'
> 
> 2012 年 9 月 17 日 01:09:33.610 query.c:2579：致命错误：2012 年 9 月 17 日 01:09:33.610 RUNTIME_CHECK（结果 == 0）失败 2012 年 9 月 17 日 01:09:33.610 退出（由于库中的致命错误）

**命名.conf**

```
options {
    directory "/opt/bind9/";
    allow-query-cache { none; };
    allow-query { any; };
    recursion no;
};

dlz "Mysql zone" {
    database "mysql
    {host=localhost dbname=system ssl=false user=root pass=*password*}
    {select zone from dns_records where zone = '$zone$'}
    {select ttl, type, mx_priority, case when lower(type)='txt' then concat('\"', data, '\"')
        else data end from dns_records where zone = '$zone$' and host = '$record$'}
    {}
    {}
    {}
    {}";
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-15T14:02:48.143

Do you run named single-threaded (with "-n 1" parameter)? If not, named will crash in various places when working on more than one query in parallel, since the MySQL DLZ module is not thread safe.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:05:00.017

手动登录数据库并运行查询。看看它会出现什么。该错误表示它的输入意外结束，这意味着它希望得到一些东西，但它从来没有得到它。所以第一件事是看你是否可以手动获取它。也许`mysqld`没有运行。可能未定义用户或密码设置错误或未授予该表的权限。这些都可以解释错误。

假设所有这些都有效，那么您有两个选择：

*   启用更多登录，`named.conf`以便您有更多数据可以处理正在发生的事情
*   删除并重新安装`BIND`，确保所有库上的所有哈希都匹配，并且所有依赖项都已到位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-01T01:45:30.517

我已经在 CentOS 7 上与 DLZ 绑定。我没有收到影响您的错误。

我意识到这是一篇较旧的帖子，但我想我会分享我的 conf 文件并配置选项。

我正在使用绑定 9.11.0

配置

```
 ./configure --prefix=/usr --sysconfdir=/etc/bind --localstatedir=/var --mandir=/usr/share/man --infodir=/usr/share/info --enable-threads --enable-largefile --with-libtool --enable-shared --enable-static --with-openssl=/usr --with-gssapi=/usr --with-gnu-ld --with-dlz-postgres=no --with-dlz-mysql=yes --with-dlz-bdb=no --with-dlz-filesystem=yes --with-dlz-stub=yes --enable-ipv6 
```

命名.conf

```
// This is the primary configuration file for the BIND DNS server named.
//
// Please read /usr/share/doc/bind9/README.Debian.gz for information on the
// structure of BIND configuration files in Debian, *BEFORE* you customize
// this configuration file.
//
// If you are just adding zones, please do that in /etc/bind/named.conf.local
#auskommentiert !!!
#include "/etc/bind/named.conf.options";
#include "/etc/bind/named.conf.local";
#include "/etc/bind/named.conf.default-zones";

key "rndc-key" {
            // how was key encoded
            algorithm hmac-md5;
            // what is the pass-phrase for the key
                secret "noway";
             };

#options {
#default-key "rndc-key";
#default-server 127.0.0.1;
#default-port 953;
#};

controls {
inet * port 953 allow { any; } keys { "rndc-key"; };
#inet * port 53 allow { any; } keys { "rndc-key"; };
};

logging {
    channel query.log {
        file "/var/log/query.log";
        // Set the severity to dynamic to see all the debug messages.
        severity dynamic;
    };

    category queries { query.log; };
};

dlz "Mysql zone" {
   database "mysql
   {host=172.16.254.100 port=3306 dbname=dyn_server_db user=db_user pass=db_password}
   {SELECT zone FROM dyn_dns_records WHERE zone = '$zone$'}
   {SELECT ttl, type, mx_priority, IF(type = 'TXT', CONCAT('\"',data,'\"'), data) AS data
    FROM dyn_dns_records
    WHERE zone = '$zone$' AND host = '$record$' AND type <> 'SOA' AND type <> 'NS'}
   {SELECT ttl, type, data, primary_ns, resp_person, serial, refresh, retry, expire, minimum
    FROM dyn_dns_records
    WHERE zone = '$zone$' AND (type = 'SOA' OR type='NS')}
   {SELECT ttl, type, host, mx_priority, IF(type = 'TXT', CONCAT('\"',data,'\"'), data) AS data, resp_person, serial, refresh, retry, expire, minimum
    FROM dyn_dns_records
    WHERE zone = '$zone$' AND type <> 'SOA' AND type <> 'NS'}
   {SELECT zone FROM xfr_table where zone='$zone$' AND client = '$client$'}";
}; 
```

# redirect - 防止 WPML 重定向到默认 CPT 名称

> ID：12450865
> 
> 赞同：0
> 
> 时间：2012-09-16T21:27:43.083
> 
> 标签：redirect, wordpress, custom-post-type

我正在使用插件 WPML 在基于 WP 的站点上工作，并且我创建了一个自定义帖子类型，其中包含两种语言的帖子，英语和瑞典语。我需要能够关闭重定向到 CPTs 默认名称。例如，假设我有一个名为“references”的 CPT。为了保持漂亮的网址，我在瑞典语页面上设置了链接，上面写着“referenser”。
现在，例如访问**http://mysite.com/referenser/example-post/**会将我带到**http://mysite.com/references/example-post/**。
虽然我无论如何都要检索内容（WPML 识别翻译），但这会造成一些混乱，包括基于 ajax 的站点上的插件。有没有办法关闭这个重定向，或者可能为 CPT 设置一个翻译名称？
在 WPML 支持页面上发布了有关此内容，但没有得到任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:14:36.353

使用 WPML 字符串翻译模块，您应该能够翻译 CPT slug-name，以便翻译链接，而不仅仅是复制英文名称。

您是否从 WPML 论坛获得帮助？如果你没有，我想跟进。

Keith-R WPML 社区经理

# objective-c - 我可以要求并存储用户的 iTunes 连接密码吗？

> ID：12450866
> 
> 赞同：1
> 
> 时间：2012-09-16T21:27:53.217
> 
> 标签：objective-c, cocoa, authentication, app-store-connect, osx-mountain-lion

我正在构建一个 Apple 开发人员分析应用程序，它显示存储在 itunesconnect 每日销售报告中的信息。因此，我想自动下载这些每日销售报告（我通过使用此[脚本](http://raybbo.com/blog/2011/08/28/bash-script-app-store-auto-ingest-tool/)实现）。此应用程序将在 Mac App Store 上发布并进行沙盒处理。

我可以要求并存储用户的 iTunes 连接密码吗？

如果是这样，正确的方法是什么？

编辑：谢谢詹姆斯和迈克尔，钥匙串服务绝对是要走的路。

我确实有一个后续[问题](https://stackoverflow.com/questions/12503708/whats-the-correct-way-to-prompt-a-user-for-their-password)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:05:51.080

答案是肯定的，谢谢 James 和 Michael，正确的存储方式是使用 Keychain Services。我使用了一个可以在[此处](https://github.com/samsoffes/sskeychain)找到的 Objective-c 包装器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T21:44:35.867

忽略我之前的评论，我误解了您的问题（我以为您正在尝试访问数据库）。如果用户自愿向您提供信息，则没有问题；如果您试图欺骗用户向您提供信息，就会出现问题。至于正确的方法，你可以让他们输入密码，给他们你使用它们的方式。但是，如果您以不同的方式使用密码然后告诉用户，则可能会出现法律问题。

# c++ - 获取只能除以 2,3 和/或 5，但不能除以任何其他素数的数字

> ID：12450867
> 
> 赞同：3
> 
> 时间：2012-09-16T21:28:11.483
> 
> 标签：c++, math

我得到一个整数 N，我必须找到只能被 2,3 和/或 5 整除的前 N ​​个元素，而不能被任何其他素数整除。

例如：

```
N = 3
Results: 2,3,4
N = 5
Results: 2,3,4,5,6 
```

错误数 = 55..55/5 = 11..11，这是一个素数。由于 55..55 可以被不同于 2,3 和 5 的素数整除，所以它不算数。

我想我需要一个递归函数，但我无法想象算法会是什么样子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:31:24.663

唯一只能被 2、3 或 5 整除的数是 2 ^(*i*)  × 3 ^(*j*)  × 5 ^(*k*)的幂*i* ,  *j* ,  *k*  = 0, 1, ...。

这些数字很容易生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:32:34.870

您要查找的数字的形式为`2^n * 3^m * 5^k`，具有 n、m 和 k 正整数，具有`n+m+k > 0`.

我会预先生成一个排序数组，然后打印出第一个`N`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:05:41.350

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T00:02:07.020

总是有蛮力的方式：

```
int[] A = int[N];
int i=0;
int j=2;
while(i<N)
{
    if(j%2==0)
    {
        if(j/2==1 || A contains j/2)
        {
             A[i]=j;
             i++;
        }
    }
    else if(j%3==0)
    {
        if(j/3==1 || A contains j/3)
        {
             A[i]=j;
             i++;
        }
    }
    else if(j%5==0)
    {
        if(j/5==1 || A contains j/5)
        {
             A[i]=j;
             i++;
        }
    }
    j++;
} 
```

对于“A 包含 X”部分，您可以在 0 到 i-1 范围内使用二进制搜索，因为 A 在那里排序。

# html - 如何使用 phantomjs 将 html 源代码打印到控制台

> ID：12450868
> 
> 赞同：12
> 
> 时间：2012-09-16T21:28:12.583
> 
> 标签：html, web-crawler, phantomjs

我刚刚在我的机器上下载并安装了 phantomjs。我将以下脚本复制并粘贴到名为 hello.js 的文件中：

```
var page = require('webpage').create();
var url = 'https://www.google.com'

page.onLoadStarted = function () {
    console.log('Start loading...');
};

page.onLoadFinished = function (status) {
    console.log('Loading finished.');
phantom.exit();
};

page.open(url); 
```

我想将完整的 html 源代码（在本例中来自 google 页面）打印到文件或控制台。我该怎么做呢？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-18T01:41:11.947

花了一些时间阅读文档，之后应该很明显。

```
var page = require('webpage').create();
page.open('http://google.com', function () {
    console.log(page.content);
    phantom.exit();
}); 
```

# python - Python & fql：得到“Dami\u00e1n”而不是“Damián”

> ID：12450869
> 
> 赞同：3
> 
> 时间：2012-09-16T21:28:23.417
> 
> 标签：python, json, unicode, encoding, facebook-fql

我创建了一个包含字典的文件，其中包含用西班牙语编写的数据（即*Damián*等）：

```
fileNameX.write(json.dumps(dictionaryX, indent=4)) 
```

数据来自一些**fql**获取操作，即：

```
select name from user where uid in XXX 
```

例如，当我打开文件时，我发现“Damián”看起来像“Dami\u00e1n”。我尝试了一些选择：

1.  确保ASCII=假：

    ```
    fileNameX.write(json.dumps(dictionaryX, indent=4, ensure_ascii=False)) 
    ```

    但是我收到一个错误（*UnicodeEncodeError: 'ascii' codec can´t encode character u'\xe1' in position XXX: ordinal not in range(128)*）。

2.  编码（编码='latin-1）：

    ```
    dictionaryX.append({
        'name': unicodeVar.encode(encoding='latin-1'),
         ...
         }) 
    ```

    但我得到另一个错误（*UnicodeDecodeError: 'utf8' codec can't decode byte 0xe1 in position XXX: invalid continuation byte*）

总而言之，我尝试了几种可能性，但没有一个线索。我迷路了。拜托，我需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:30:38.320

用于以**特定编码**[`codecs.open()`](http://docs.python.org/library/codecs.html#codecs.open)打开，例如，而不是使用.`fileNameX` **`encoding='utf-8'``open()`**

 **另外，`json.dump()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T22:17:52.250

你有很多选择，并且偶然发现了一些相当复杂的东西，它取决于你的 Python 版本，**你必须完全理解才能编写正确的代码**。一般来说，3.x 中采用的方法更严格，也更难使用，但您犯错误或陷入复杂情况的可能性要小得多。（根据您报告的确切症状，您似乎使用的是 2.x。）

`json.dumps`在 2.x 和 3.x 中具有不同的行为。在 2.x 中，它产生一个`str`，它是一个字节串（未知编码）。在 3.x 中，它仍然产生一个`str`，但现在`str`在 3.x 中是一个正确的 Unicode 字符串。

JSON 本质上是一种支持 Unicode 的格式，但它要求文件采用 UTF-8 编码。但是，请理解 JSON*支持`\u`字符串中的样式转义*。当您读入此数据时，您将获得正确的编码字符串。读取代码从 JSON 中读取字符串时会生成 unicode 对象（无论您使用 2.x 还是 3.x）。

> 当我打开文件时，我发现例如“Damián”看起来像“Dami\u00e1n”

`á`不能用 ASCII 表示。它被默认编码`\u00e1`，以避免您遇到的其他问题。即使在 3.x 中也会发生这种情况。

> ensure_ascii=False

这将禁用以前的编码。在 2.x 中，这意味着您将获得一个`unicode`对象 - 一个真正的 Unicode 对象，保留原始`á`字符。在 3.x 中，这意味着字符没有被显式翻译。但无论哪种方式，都`ensure_ascii=False`意味着`json.dumps` *会给你一个 Unicode string*。

Unicode 字符串必须经过编码才能写入文件。没有“unicode 数据”之类的东西；Unicode 是一种抽象。`'ascii'`在 2.x 中，当您将 Unicode 对象提供给`file.write`;时，此编码是隐式的。它期待一个`str`. 为了解决这个问题，您可以使用该模块，或者像编写之前`codecs`一样显式编码。`'utf-8'`在 3.x 中，编码是在文件`encoding`时使用关键字参数设置`open`的（默认值可能又不是您想要的）。

> 编码（编码='latin-1'）

在这里，您在生成字典之前进行编码，以便`str`您的数据中有一个对象。现在出现了一个问题，因为当您的数据中有`str`对象时，*JSON 编码器*默认假定它们*以 UTF-8 编码*表示 Unicode 字符串。这可以在 2.x 中使用`encoding`关键字参数来更改`json.dumps`。（在 3.x 中，编码器将简单地拒绝序列化`bytes`对象，即非 Unicode 字符串！）

* * *

但是，如果您的目标只是将数据直接放入文件中，那么*`json.dumps`您的工具*就不对了。你有没有想过`s`这个名字是干什么用的？它代表“字符串”；这是特例。普通的情况，其实就是直接写入文件！（而不是给你一个字符串并期望你自己写。）这就是`json.dump`(no 's') 所做的。同样，JSON 标准需要 UTF-8 编码，并且 2.x 有一个`encoding`默认为 UTF-8 的关键字参数（您应该不理会它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T22:24:32.957

由于字符串`\u`内部有一个，这意味着它是一个 Unicode 字符串。字符串实际上是正确的！您的问题在于显示字符串。如果你`print`是字符串，Python 的输出编码应该以适合你​​环境的编码打印它。

例如，这是我在 Windows 上的 IDLE 中得到的：

```
>>> print u'Dami\u00e1n'
Damián 
```**

# c# - ASP.NET 4.5 MVC4 模型绑定问题 - 无法定义任何模型

> ID：12450870
> 
> 赞同：2
> 
> 时间：2012-09-16T21:28:44.407
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, asp.net-4.5

我遇到了 MVC4 无法绑定到任何东西的问题。

例如：

```
 public class Question
    {
    [Key]
    [Required]
    public Int32 QuestionID { get; set; }

    [Required]
    public Int32 SurveyID { get; set; }

    [Required]
    public Int32 QuestionNumber { get; set; }

    [Required]  
    public Boolean AssignedToAPage { get; set; }
    } 
```

我使用 Add View 创建了一个强类型视图并选择了上面的类：

```
 @model Models.Question

    @{
       ViewBag.Title = "View1";
       Layout = "~/Views/Layouts/_Site.Layout.cshtml";
    }

<h2>View1</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Question</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.SurveyID)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.SurveyID)
        @Html.ValidationMessageFor(model => model.SurveyID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.QuestionNumber)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.QuestionNumber)
        @Html.ValidationMessageFor(model => model.QuestionNumber)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.AssignedToAPage)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.AssignedToAPage)
        @Html.ValidationMessageFor(model => model.AssignedToAPage)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

因此，在生成此页面后，我尝试转到它并收到以下错误：编译器错误消息：CS1061：'object'不包含'SurveyID'的定义，并且没有扩展方法'SurveyID'接受类型的第一个参数可以找到“对象”（您是否缺少 using 指令或程序集引用？）

这只是 Visual Studio 2012 RC 的问题吗？我需要重新安装一些东西吗？我已经用谷歌搜索了这个问题的查看时间，但我还没有找到任何相关的东西。我已经诉诸于将模型显式转换为类型，但这似乎违背了拥有@model 的目的。任何输入都会很有用！谢谢。

更新

```
Apparently I caused the issue by following someone else's advice on creating a custom view page class.  I created the following: 

public abstract class CustomWebViewPage : WebViewPage
{
    public ContentVersionHelper ContentVersion { get; set; }
    public override void InitHelpers()
    {
        base.InitHelpers();
        ContentVersion = new ContentVersionHelper(base.ViewContext, this);
    }
}

public abstract class CustomWebViewPage<TModel> : WebViewPage
    where TModel : class
{
    public ContentVersionHelper<TModel> ContentVersion { get; set; }
    public override void InitHelpers()
    {
        base.InitHelpers();
        ContentVersion = new ContentVersionHelper<TModel>(base.ViewContext, this);
    }
} 
```

甚至没有考虑到我需要从第二类的 WebViewPage 派生。添加后，一切都已修复。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:02:33.930

应更新自定义类以匹配以下内容：

```
public abstract class CustomWebViewPage : WebViewPage
{
    public ContentVersionHelper ContentVersion { get; set; }
    public override void InitHelpers()
    {
        base.InitHelpers();
        ContentVersion = new ContentVersionHelper(base.ViewContext, this);
    }
}

public abstract class CustomWebViewPage<TModel> : WebViewPage<TModel>
    where TModel : class
{
    public ContentVersionHelper<TModel> ContentVersion { get; set; }
    public override void InitHelpers()
    {
        base.InitHelpers();
        ContentVersion = new ContentVersionHelper<TModel>(base.ViewContext, this);
    }
} 
```

# ios - 检查字典中的布尔值。

> ID：12450875
> 
> 赞同：7
> 
> 时间：2012-09-16T21:29:18.447
> 
> 标签：ios, xcode

我从 JSON 提要中提取了一个名为参加的变量。在检查了对象被解释为 I NSLog 的类类型之后：

```
attending var type is: __NSCFBoolean 
```

这是使用 [varname class] 来获取变量的类类型来完成的。

所以我想看看这是真的还是假的......所以我写了这段代码......：

```
if([[_events objectAtIndex:indexPath.row] objectForKey:@"attending"] == YES){ 
```

但是我无法编译它，因为它给了我一个黄色文本错误说：

![在此处输入图像描述](../Images/a997114c51e13020e12d881639836c63.png)

我究竟做错了什么？我怎样才能解决这个问题。只需在提要中添加数据，如下所示：

```
 {
    attendees =         (
    );
    attending = 1;
    date = "2012-09-24 09:11:00";
    id = 504;
    lessonHTML = "somehtml.";
    name = "Sup";
    youtubeId = "http://www.youtube.com/watch?v=j1vb4cND3G0";
},
    {
    attendees =         (
    );
    attending = 1;
    date = "2012-09-24 09:11:00";
    id = 503;
    lessonHTML = "somehtml.";
    name = "Sup";
    youtubeId = "http://www.youtube.com/watch?v=j1vb4cND3G0";
},
    {
    attendees =         (
    );
    attending = 0;
    date = "2012-09-24 09:11:00";
    id = 508;
    lessonHTML = "somehtml.";
    name = "Sup";
    youtubeId = "http://www.youtube.com/watch?v=j1vb4cND3G0";
},
    {
    attendees =         (
    );
    attending = 1;
    date = "2012-09-24 09:11:00";
    id = 509;
    lessonHTML = "somehtml.";
    name = "Sup";
    youtubeId = "http://www.youtube.com/watch?v=j1vb4cND3G0";
},
    {
    attendees =         (
    );
    attending = 0;
    date = "2012-09-24 09:11:00";
    id = 505;
    lessonHTML = "somehtml.";
    name = "Sup";
    youtubeId = "http://www.youtube.com/watch?v=j1vb4cND3G0";
},
    {
    attendees =         (
    );
    attending = 1;
    date = "2012-09-24 09:11:00";
    id = 506;
    lessonHTML = "somehtml.";
    name = "Sup";
    youtubeId = "http://www.youtube.com/watch?v=j1vb4cND3G0";
}, 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-16T21:38:51.103

字典中的布尔值和其他容器类被封装在对象中（有关更多信息，`NSNumber`请参阅文档）`NSNumber`

要提取值，您需要将`boolValue`消息发送到从字典中检索到的对象并将其与 YES/NO 进行比较：

```
NSNumber* attendingObject = [[events objectAtIndex:indexPath.row] objectForKey:@"attending"];
if ([attendingObject boolValue] == YES)
{
    ...
} 
```

**[在此处的 Apple 文档中](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/FoundationTypesandCollections/FoundationTypesandCollections.html)阅读有关值以及如何封装 I 集合类的更多信息**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:37:29.437

" `BOOL`" 类型不是 Objective C 对象，而是 C 风格的类型。

它作为“ `NSNumber`”对象存储在字典中。

所以你需要做的不是：

```
if([[_events objectAtIndex:indexPath.row] objectForKey:@"attending"] == YES){ 
```

是这样的：

```
BOOL attending = NO; // assume NO to start with
NSDictionary * lessonDictionary = [_events objectAtIndex: indexPath.row];
if(lessonDictionary)
{
     NSNumber * attendingObject = [lessonDictionary objectForKey: @"attending"];
     if(attendingObject)
     {
          attending = [attendingObject boolValue];
     }
} 
```

# jquery - 谷歌应用引擎上的python jquery自动完成

> ID：12450876
> 
> 赞同：-3
> 
> 时间：2012-09-16T21:29:28.127
> 
> 标签：jquery, python, google-app-engine, autocomplete

我有一个 python 脚本，里面有一个函数，给定一个查询，将输出从大量数据集中获取的一些结果，太大而无法以纯文本格式放入 jquery 脚本。我如何使用 jquery/javascript 或其他任何东西来制作一个非常简单的自动完成搜索框。我整天都在努力让事情正常进行，但我想做的事情却没有成功。

另外 - 如果有帮助，这必须能够在谷歌应用引擎上工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:43:29.867

每当有人在文本框中键入内容时，让 JavaScript 向服务器发送 AJAX 请求。然后，当它响应来自服务器的结果时，您只需将它们显示在客户端上。

[在此处查看此问题及其答案。](https://stackoverflow.com/questions/3887266/how-to-return-and-use-an-array-of-strings-from-a-jquery-ajax-call)

# ios - iOS：在 plist 中存储名称

> ID：12450878
> 
> 赞同：0
> 
> 时间：2012-09-16T21:29:34.463
> 
> 标签：ios, plist

自从我完成 iOS 以来已经有好几年了，但我又回到了它，并有一个快速的初学者问题。当应用程序启动时，它将使用搜索字段启动。你输入一个人的名字，按回车，就会出现关于这个名字的信息。我正在考虑将所有最常见的名称存储在 plist 中，并在用户点击“enter”后通过 plist 运行搜索，然后显示有关他们输入的名称的信息。这就是我卡住的地方。输入名称并按回车后，我不知道如何让它显示有关名称的信息，甚至不知道在哪里存储有关名称的数据。非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T21:34:09.827

我会在这里给你一半你需要的答案，“加载”和“保存”部分。

您在这里谈论的“plist”实际上是一个名称数组。

而且——多么方便！——“ `NSArray`”既有[“ `initWithContentsOfURL:`”方法](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/initWithContentsOfURL%3a)，又有[“ `writeToURL:atomically:`”方法](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/writeToURL%3aatomically%3a)。

不仅仅是几个名字，人们会开始建议使用 Core Data。

此外，如果您希望能够在应用程序运行时更改和/或保存名称，则需要使用“ `NSMutableArray`”而不是不可变数组。

至于显示部分，您可能应该学习如何使用表视图（UITableView）和绑定（即您“绑定”到数组，并且值会根据用户在搜索字段中键入的内容显示）。有很多关于这方面的教程和示例，以及 StackOverflow 上的相关问题。

# c++ - 理解格

> ID：12450880
> 
> 赞同：4
> 
> 时间：2012-09-16T21:29:53.603
> 
> 标签：c++, algorithm

我一直在研究一个计算机科学问题，在第一次面试非常成功后，我在第二次面试代码测试中被烧死了。否则，我会认为这是一个灌篮。

基本上，我要在 2 小时内使用晶格单元实现扫雷。

如果是 1X1，则只有一个单元格。

然后，如果它是 2X2，则一个单元格有四个单元格（子单元？），每个单元都与父单元双重链接。此外，这两个孩子是双重联系的。另外两个孩子也是。

从一个子单元格遍历到另一个子单元格意味着必须要么只跳转到下一个子节点链接（兄弟节点），要么先遍历回到父节点，然后再到另一个子节点链接对集中的目标子节点。（注意：树的想法只是我的想法，不是必需的）

我的总体想法是建立一个模式创建机制，然后根据深度参数隐式地变得越来越大。一种树结构似乎是最好的方法。

这似乎很容易。但我就是无法理解模式创建逻辑：

具有多个子节点的树结构很容易（八叉树、四叉树、二叉树等），但提出了一个优雅的系统，当父节点产生多个子节点时，子节点也隐式链接到特定的兄弟节点对我来说是一个令人费解的问题。所以，基本上，根据我的想法，根是晶格图的中心，最远的子节点在边缘。

此外，我可能不了解晶格单元的许多方面。我在互联网上进行了挖掘，试图找到一个关于为什么或如何有用的基本解释。我找到了一本关于逻辑基础的入门书：偏序集、幂集、自反性和基于这些原则的格图，例如哈斯图。

然而，这对我来说仍然不够好：没有 C++ 甚至伪代码示例。

我了解哈希表、链表、反转链表（递归/迭代）、二叉树（平衡/不平衡）、向量、字符串、反转等（所有基础知识）。三角，线性代数，四元数。一些计算。以及大量的图形编程技巧/技术。我什至从头开始编写了两个游戏引擎，但是简单的格子问题让我无法理解。我很尴尬。我想尽可能多地了解格子，所以我再也不会像那样被烧伤了。但是，我需要的文档很难找到。

我正在寻找关于**格子主题的良好入门/教程（因为它与编写 C++ 算法**有关） ——希望能像典型的 Sam 在 21 天内自学 C++ 一样为我（从初学者开始）握住我的手， 或者其他的东西。由于晶格似乎是一个中级到非常高级的学科，这可能是不可能的。

如果不是教程，如果你们中的任何人都可以给我你在这个主题上的知识，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T12:25:27.207

混淆源于对 lattice 一词的误导性使用：在数学中，lattice 是一个偏序集，其中每两个元素都有一个 lub（最小上限）和一个 glb（最大下限）。游戏“树”（节点是棋盘的状态，由于树的独特路径属性，边缘移动显然没有任何 glb），即使您加入通过不同移动序列到达的相同状态（在这种情况下树变成有向图），如果从给定状态可以达到两个不同的最终状态，则将无法拥有 glb。我已经十年没玩扫雷了，但我的印象是这样结束游戏是有可能的。所以你需要考虑的底层数据结构是一个有向（可能是非循环）图，在数学意义上它有时是一个格子（忽略边缘上的方向），

# inline - 内联 Aseembly 我该如何处理“非法指令（核心转储）”

> ID：12450887
> 
> 赞同：2
> 
> 时间：2012-09-16T21:31:08.720
> 
> 标签：inline, inline-assembly

下面的内联汇编代码有什么问题吗？运行函数 spinlock_lock 时遇到“非法指令（核心转储）”。

```
void spinlock_lock(struct spinlock * lock) {

    int a;
    __asm__ __volatile__("movl %0, %%eax;"
                         "test %%eax, %%eax;"
                         "jnz spinlock_lock;"
                         :"=r"(a)
                         :"r"(lock->cmos_lock)
                         :"eax");

    __asm__ __volatile__ ("lock; cmpxchg %%edx, %0\n"
                          :"=r"(a)
                          :"r"(lock->cmos_lock)
                          :"edx", "memory"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:47:48.790

问题是你的分支；通常（x86）[被调用的函数会在执行任何其他代码之前将帧指针保存在堆栈中](http://en.wikipedia.org/wiki/Calling_convention#x86)。

您的`jnz spinlock_lock`分支将分支回**整个函数的入口点，**从而在返回到您的内联汇编程序之前再次保存帧指针。保存帧指针足够的时间，你会用完堆栈。更不用说如果你离开你的内联汇编器并在它之外分支，你的寄存器可能不再包含你认为它们所做的事情。

您可能应该在您的内联汇编器中放置一个标签，然后再返回到该标签。

此外，该指令可以对寄存器进行操作，但由于您使用的是寄存器操作数`cmpxchg %edx, %0`，因此无法组合使用。`lock`要进行`lock cmpxchg`工作，您需要将匹配参数约束从 更改`r`为`m`。

您可能想在[这里](https://stackoverflow.com/questions/1746344/illegal-instruction-in-asm-lock-cmpxchg-dest-src)查看关于`lock cmpxchg`需要内存操作数的讨论，或者[在这里](https://stackoverflow.com/a/6935581/477878)查看没有汇编器的自旋锁的替代 gcc 实现。

# cocoa - 为什么加载后 AVURLAsset 的轨道数组为空？

> ID：12450889
> 
> 赞同：3
> 
> 时间：2012-09-16T21:31:17.153
> 
> 标签：cocoa, avfoundation

我正在尝试获取`AVURLAsset`. 所以我`tracks`用`loadValuesAsynchronouslyForKeys:completionHandler:`. 在完成处理程序中，当状态为时，`AVKeyValueStatusLoaded`我查看`asset.tracks`它并且它是空的。我期待至少找到一个音频和视频轨道。为什么轨道数组是空的？

这是我的代码：

```
#import <AVFoundation/AVFoundation.h>

int main(int argc, char *argv[])
{
    __block BOOL loaded = NO;
    AVURLAsset *asset;
    @autoreleasepool
    {
        NSURL *url = [NSURL URLWithString:@"https://devimages.apple.com.edgekey.net/resources/http-streaming/examples/bipbop_4x3/bipbop_4x3_variant.m3u8"];
        asset = [AVURLAsset URLAssetWithURL:url options:nil];
        [asset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:@"tracks"] completionHandler:^{
            loaded = YES;
            dispatch_async(dispatch_get_main_queue(), ^{
                NSError *error = nil;
                AVKeyValueStatus status = [asset statusOfValueForKey:@"tracks" error:&error];
                if (status == AVKeyValueStatusLoaded)
                    NSLog(@"asset.tracks (%ld): %@", [asset.tracks count], asset.tracks);
                else
                    NSLog(@"error (%ld): %@", status, error);
            });
        }];
    }

    while (!loaded)
        [[NSRunLoop mainRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];

    return 0;
} 
```

在 Mountain Lion 10.8.1 上运行此代码会记录以下内容：

```
asset.tracks (0): (
) 
```

**更新**有些人指出我可能无法获得曲目，因为我使用的是*HTTP 实时流*URL。因此，任何获取当前播放视频大小的方法（是否使用曲目）都是可以接受的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T08:01:49.100

由于资产是通过*HTTP Live Streaming*提供的，因此它没有任何轨道。获取视频大小的另一种方法是`presentationSize`使用 KVO 观察播放器项目属性：

```
AVPlayer *player = [AVPlayer playerWithPlayerItem:[AVPlayerItem playerItemWithAsset:asset]];
[player addObserver:self forKeyPath:@"currentItem.presentationSize" options:NSKeyValueObservingOptionNew context:NULL]; 
```

# c++ - Base64 转换器输出不正确

> ID：12450890
> 
> 赞同：1
> 
> 时间：2012-09-16T21:31:18.240
> 
> 标签：c++, base64

我写了这个小转换器来将 Base2 文件数据转换为 Base64。结果输出不正确，我不知道为什么。如果将图像文件作为输入传递，则问题会更加复杂：将随机 NULL 字符 (0x00) 插入到输出中，这永远不会发生。输出应该只包含 Base64Table 的一个子集（参见代码）。

* * *

输入：

人之所以与众不同，不仅在于他的理性，而且在于这种与其他动物不同的独特激情，即心灵的欲望，通过对知识的持续和不知疲倦地产生的坚持不懈的快乐，超过任何肉体快乐的短暂激情.

* * *

预期输出：

```
TWFuIGlzIGRpc3Rpbmd1aXNoZWQsIG5vdCBvbmx5IGJ5IGhpcyByZWFzb24sIGJ1dCBieSB0aGlzIHNpbmd1bGFyIHBhc3Npb24gZnJvbSBvdGhlciBhbmltYWxzLCB3aGljaCBpcyBhIGx1c3Qgb2YgdGhlIG1pbmQsIHRoYXQgYnkgYSBwZXJzZXZlcmFuY2Ugb2YgZGVsaWdodCBpbiB0aGUgY29udGludWVkIGFuZCBpbmRlZmF0aWdhYmxlIGdlbmVyYXRpb24gb2Yga25vd2xlZGdlLCBleGNlZWRzIHRoZSBzaG9ydCB2ZWhlbWVuY2Ugb2YgYW55IGNhcm5hbCBwbGVhc3VyZS4= 
```

（来自[Base64 上的维基百科页面](http://en.wikipedia.org/wiki/Base_64)）

* * *

实际输出：

```
YW7MaXPMZGnMdGnMZ3XMc2jMZCzMbm/MIG/MbHnMYnnMaGnMIHLMYXPMbizMYnXMIGLMIHTMaXPMc2nMZ3XMYXLMcGHMc2nMbiDMcm/MIG/MaGXMIGHMaW3MbHPMIHfMaWPMIGnMIGHMbHXMdCDMZiDMaGXMbWnMZCzMdGjMdCDMeSDMIHDMcnPMdmXMYW7MZSDMZiDMZWzMZ2jMIGnMIHTMZSDMb27MaW7MZWTMYW7MIGnMZGXMYXTMZ2HMbGXMZ2XMZXLMdGnMbiDMZiDMbm/MbGXMZ2XMIGXMY2XMZHPMdGjMIHPMb3LMIHbMaGXMZW7MZSDMZiDMbnnMY2HMbmHMIHDMZWHMdXLMLnLM 
```

* * *

代码：

```
#include <iostream>
#include <fstream>

char Base64Table[64] = {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z', //0-25
                        'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z', //26-51
                        '0','1','2','3','4','5','6','7','8','9',                                                                 //52-61
                        '+','/'};                                                                                                //62-63
char PADDING_CHAR = '=';

char GetFirstSymbol(char* buffer);
char GetSecondSymbol(char* buffer);
char GetThirdSymbol(char* buffer);
char GetFourthSymbol(char* buffer);

int main(int argc, char** argv) {

    if(argc != 2) {
        std::cout << "Incorrect number of arguments." << std::endl;
        std::cout << "Press Enter to quit.";
        while(!std::cin.get());
        return 0;
    }

    std::cout << "Converting " << argv[1] << std::endl;

    std::ifstream input;
    input.open(argv[1], std::ios_base::binary);

    std::ofstream output;
    output.open("data.base64", std::ios_base::binary);

    char count[1] = {'\0'};
    unsigned long file_size = 0;
    char buffer[3] = {'\0', '\0', '\0'};
    while(input.fail() == false) {
        input.read(reinterpret_cast<char*>(count), sizeof(count));
        ++file_size;
    }
    input.clear();
    input.seekg(0);

    while(input.fail() == false) {
        input.read(reinterpret_cast<char*>(buffer), sizeof(buffer));
        char firstsymbol = GetFirstSymbol(buffer);
        char secondsymbol = GetSecondSymbol(buffer);
        char thirdsymbol = GetThirdSymbol(buffer);
        char fourthsymbol = GetFourthSymbol(buffer);

        output.write(reinterpret_cast<char*>(&firstsymbol), sizeof(firstsymbol));
        output.write(reinterpret_cast<char*>(&secondsymbol), sizeof(secondsymbol));
        if(file_size % 3 == 2) {
            output.write(reinterpret_cast<char*>(&PADDING_CHAR), sizeof(PADDING_CHAR));
            continue;
        } else if(file_size % 3 == 1) {
            output.write(reinterpret_cast<char*>(&PADDING_CHAR), sizeof(PADDING_CHAR));
            output.write(reinterpret_cast<char*>(&PADDING_CHAR), sizeof(PADDING_CHAR));
            continue;
        }
        output.write(reinterpret_cast<char*>(&thirdsymbol), sizeof(thirdsymbol));
        output.write(reinterpret_cast<char*>(&fourthsymbol), sizeof(fourthsymbol));
    }
    input.clear();
    input.close();

    output.clear();
    output.close();

    return 0;
}

//Gets the 6 most significant digits of the first byte.
char GetFirstSymbol(char* buffer) {
    int index = (buffer[1] >> 2);
    return Base64Table[index];
}

//Gets the 2 least significant digits from previous (first) byte and 4 most significant from the second byte.
char GetSecondSymbol(char* buffer) {
    int index = (((buffer[1] & 0x03) << 4) | ((buffer[2] & 0xF0) >> 4));
    return Base64Table[index];
}

//Gets the 4 least significant digits from previous (second) byte and 2 least significant from the third byte.
char GetThirdSymbol(char* buffer) {
    int index = (((buffer[2] & 0x0F) << 2) | ((buffer[3] & 0xC0) >> 6));
    return Base64Table[index];
}

//Gets the 6 least significant digits from the third byte.
char GetFourthSymbol(char* buffer) {
    int index = (buffer[3] & 0x3F);
    return Base64Table[index];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:38:10.027

C/C++ 指针和数组是非常强大的野兽，但它们也会伤害你！所以你在和他们一起工作时应该小心。您定义`buffer`为`char[3]`但从索引 [1] 到索引 [3] 访问它，这是您的错误，因为 C/C++ 数组的索引是基于 0 的，因此`buffer [0][1][2][memory of other variables]`您保持`buffer[0]`不变，而不是写入内存另一个变量，这是随机错误和无效值的原因！！！

# spring - SpringMVC Ajax 验证

> ID：12450896
> 
> 赞同：4
> 
> 时间：2012-09-16T21:32:06.150
> 
> 标签：spring, validation, jsp, spring-mvc, controller

我有一个 POST 到控制器的 Spring Mvc 3 表单，在控制器中我调用以执行 DML 语句。我还有一个单独的验证类，它实现了 Validator 并在我的 Controller 中调用。我在那里进行简单和复杂的验证，例如检查用户名是否存在，如果存在则返回错误消息。

当我从视图上的字段中跳出时，我想使用 ajax 仅验证用户名字段，但我想调用我已经实现的验证并且只验证用户名字段。

我怎样才能做到这一点，我需要在 Ajax 中调用 Controller 类并有一个单独的 @RequestMapping 来处理这个吗？我可以举一个例子来说明这应该如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-22T11:13:27.027

> //在控制器端添加这个

```
if(result.hasErrors() ){
        for (Object object : result.getAllErrors()) {
            if(object instanceof FieldError) {
                FieldError fieldError = (FieldError) object;
                String message = messageSource.getMessage(fieldError, null);
                logger.info("Error : " +  message + " - "  + fieldError.getField());
                errors.add(fieldError.getField() + "#" + message);
            }
        }
        response.setStatus("FAIL");
        response.setResult(errors); 
```

> 在ajax响应之后，在相应的结果字段上设置错误

```
$.each(response.result, function(index, errorString){

                     var array = errorString.split("#");
                     $('[for="' +array[0]+ '"]').html(array[1]);
                 }); 
```

# javascript - 从 req.body 中删除换行符

> ID：12450900
> 
> 赞同：0
> 
> 时间：2012-09-16T21:32:26.507
> 
> 标签：javascript, node.js, express

我正在做一个节点项目。在下面的中间件片段中，我需要从中删除换行符，`req.body`以准备将其发送到 JSONP 响应中。

```
server.use(function(req,res,next){
  if(req.query.concat) {
    req.body = req.body; // <--- HERE I need to remove the newlines, etc.
  } else {
    req.body = req.body || {};
    req.body.jsonp_callback = req.query.callback;
  }
  next();
}) 
```

如何让 req.body 为 JSONP 做好准备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:41:39.397

javascript 中的换行符与任何其他字符一样，用“\n”表示。使用全局替换：

```
server.use(function(req,res,next){
  if(req.url.match(/^\/(api|view|partial)/) && req.query.callback){
    if(req.query.concat) {
      req.body = req.body.replace(/\\n/g, ''); // <--- Newlines are globally replaced with empty string
    } else {
      req.body = req.body || {};
      req.body.jsonp_callback = req.query.callback;
    }
  }
 next();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:37:44.880

使用`str.split("\n")`which 将返回一个数组，其中您的字符串被分割成由换行符表示的块，然后使用循环将所有内容重新组合在一起。

```
var arr = str.split("\n");
var result = "";
for(var i = 0; i < arr.length; i++) {
  result += arr[index];
} 
```

# c++ - 在 C++ 中遍历目录和迭代器

> ID：12450901
> 
> 赞同：1
> 
> 时间：2012-09-16T21:32:28.147
> 
> 标签：c++, iterator, traversal

我是 C++ 的绝对新手，3 天前才开始使用它进行编程。我正在尝试执行以下操作：

*   遍历 XX 个文件的目录（通常是*.*），对于每个文件，执行以下操作：

    *   在文件中搜索字符串 ( `findFirst`)，然后搜索直到另一个字符串 ( `findLast`) - 文件将是 HTML 格式。

在这个选择中，我想执行几个任务（尚未写） - 但它们将如下：

*   其中一个字符串将是我要写入的文件名。- 所以提取此字段并创建一个具有此名称的输出文件
*   一些行将是制造商部件号 - 提取这些并相应地格式化输出文件，其中大部分将是产品描述。再次 - 这将在 HTML 结构中 - 所以提取它并格式化输出文件。

到目前为止，我已经设法开始使用遍历目录，并选择开始和结束关键字 - 使用来自互联网的一些帮助。

我的问题在这里 `processFiles(inputFileName, "testing", "finish");`

我需要`inputFileName`成为遍历文件名的名称。

我发现的所有示例都只是使用 cout 打印文件名，我需要将其传递给 processFiles 函数。

有人可以告诉我我需要使用什么吗？我已经尝试过( ) 和等`it->c_Str()`的其他变体`*it``.at``.begin`

我的非打印示例如下：

```
// Chomp.cpp : Defines the entry point for the console application.
//

#include <stdafx.h>
#include <windows.h>
#include <string>
#include <iostream>
#include <fstream>
#include <stdlib.h>
#include <cctype>
#include <algorithm>
#include <vector>
#include <stack>

//std::ifstream inFile ( "c:/temp/input.txt" ) ;
std::ofstream outFile( "c:/temp/output.txt") ; 

using namespace std;

/////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////

void openFiles()
{
    if (!(outFile.is_open()))
    {
       printf ("Could not Create Output file\n");
       exit(0);
    }
}

/////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////

bool ListFiles(wstring path, wstring mask, vector<wstring>& files) 
{
    HANDLE hFind = INVALID_HANDLE_VALUE;
    WIN32_FIND_DATA ffd;
    wstring spec;
    stack<wstring> directories;

    directories.push(path);
    files.clear();

    while (!directories.empty()) 
    {
        path = directories.top();
        spec = path + L"\\" + mask;
        directories.pop();

        hFind = FindFirstFile(spec.c_str(), &ffd);
        if (hFind == INVALID_HANDLE_VALUE)  
            return false;

        do 
        {
            if (wcscmp(ffd.cFileName, L".") != 0 && wcscmp(ffd.cFileName, L"..") != 0) 
            {
                if (ffd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) 
                    directories.push(path + L"\\" + ffd.cFileName);
                else 
                    files.push_back(path + L"\\" + ffd.cFileName);
            }
        } while (FindNextFile(hFind, &ffd) != 0);

        if (GetLastError() != ERROR_NO_MORE_FILES) 
        {
            FindClose(hFind);
            return false;
        }

        FindClose(hFind);
        hFind = INVALID_HANDLE_VALUE;
    }

    return true;
}

/////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////

void processFiles(const wchar_t *inFileName, std::string findFirst,std::string findLast )
{
/*     
       std::string findFirst = "testing" ;
       std::string findLast  = "finish" ;
*/       
       std::string inputLine ;
       int lineNum = 0 ;
       char buffer[2048];
       size_t found = 0;

       std::ifstream inFile;
       inFile.open (inFileName);        // Open The file

       if (inFile.is_open())
       {
          while( std::getline( inFile, inputLine ))
          {
             ++lineNum ;
 //          printf ("Line len = %d\n ", inputLine.length());

             if( (found = inputLine.find(findFirst)) != std::string::npos )
             {
                 std::cout << "###Line " << lineNum << " At Position [ " << found << " ]\n" ;
                 sprintf_s(buffer, 2048, "[%-5.5d] %s\n", lineNum, inputLine.c_str());
                 outFile << buffer ;

                 bool foundLast = 0;
                 while( std::getline( inFile, inputLine ))
                 {
                     ++lineNum ;

                     sprintf_s(buffer, 2048, "[%-5.5d] %s\n", lineNum, inputLine.c_str());
                     if( (found = inputLine.find(findLast)) != std::string::npos )
                     {
                         outFile << buffer ;
                         break;  // Found last string - so stop after printing last line
                     }
                     else
                          outFile << buffer ;
                 }
             }
             else
             {
                // std::cout << "=>" << inputLine << '\n' ;
             }
          }
       }
       else
       {
             printf ("Cant open file \n");
             exit(0);
       }

       inFile.close() ;     // Close The file
}

/////////////////////////////////////////////////////////////////////////////////////////////
///                                   M    A    I    N
/////////////////////////////////////////////////////////////////////////////////////////////

int main()
{
       std::ifstream inFile ;

       int startLine = 0;
       int endLine = 0;
       int lineSize = 0;
       char buffer[512];

       vector<wstring> files;           // For Parsing Directory structure

       openFiles();

       // Start The Recursive parsing of Directory Structure 

       if (ListFiles(L"C:\\temp", L"*.*", files)) 
       {
            for (vector<wstring>::iterator it = files.begin(); it != files.end(); ++it) 
            {

                printf ("Filename1 is %s\n", it->c_str());
                printf ("Filename2 is %s\n", files.begin());

                outFile <<  "\n------------------------------\n";
                //outFile << it  << endl;
                wcout << it->c_str() << endl;
                outFile <<  "\n------------------------------\n";

                const wchar_t *inputFileName = it->c_str();
//              processFiles(inputFileName, "testing", "finish");
//              getchar();
            }
       }
       outFile.close();
       getchar();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:47:27.230

让您的 processFile 接受 wstring，即：

```
void processFiles(wstring inFileName, std::string findFirst,std::string findLast )
{
  // Make the necessary changes so that you use a wstring for inFileName
} 
```

使用以下命令从 main() 调用它：

```
processFiles(*it, "testing", "finish"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:55:10.817

您需要将 processFile 更改为使用 wifstream 而不是 ifstream，并且您应该将所有窄字符串更改为使用宽字符串（反之亦然）。窄字符串和宽字符串彼此不兼容，为了将一个字符串与另一个字符串一起使用，必须使用转换函数，例如 mbstowcs。

[编辑：您可以在此处](http://pastebin.com/E6GGbmFz)找到应编译的示例。

# perl - A Perl script to process a CSV file, aggregating properties spread over multiple records

> ID：12450904
> 
> 赞同：4
> 
> 时间：2012-09-16T21:32:52.163
> 
> 标签：perl, csv

Sorry for the vague question, I'm struggling to think how to better word it!

I have a CSV file that looks a little like this, only a lot bigger:

```
550672,1
656372,1
766153,1
550672,2
656372,2
868194,2
766151,2
550672,3
868179,3
868194,3
550672,4
766153,4 
```

The values in the first column are a ID numbers and the second column could be described as a property (for want of a better word...). The ID number 550672 has properties 1,2,3,4\. Can anyone point me towards how I can begin solving how to produce strings such as that for all the ID numbers? My ideal output would be a new csv file which looks something like:

```
550672,1;2;3;4
656372,1;2
766153,1;4 
```

etc.

I am very much a Perl baby (only 3 days old!) so would really appreciate direction rather than an outright solution, I'm determined to learn this stuff even if it takes me the rest of my days! I have tried to investigate it myself as best as I can, although I think I've been encumbered by not really knowing what to really search for. I am able to read in and parse CSV files (I even got so far as removing duplicate values!) but that is really where it drops off for me. Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T23:37:41.010

I think it is best if I offer you a working program rather than a few hints. Hints can only take you so far, and if you take the time to understand this code it will give you a good learning experience

It is best to use [`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV) whenever you are processing CSV data as all the debugging has already been done for you

```
use strict;
use warnings;

use Text::CSV;

my $csv = Text::CSV->new;

open my $fh, '<', 'data.txt' or die $!;
my %data;
while (my $line = <$fh>) {
  $csv->parse($line) or die "Invalid data line";
  my ($key, $val) = $csv->fields;
  push @{ $data{$key} }, $val
}

for my $id (sort keys %data) {
  printf "%s,%s\n", $id, join ';', @{ $data{$id} };
} 
```

**output**

```
550672,1;2;3;4
656372,1;2
766151,2
766153,1;4
868179,3
868194,2;3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T22:04:05.147

Firstly props for seeking an approach not a solution. As you've probably already found with perl, There Is More Than One Way To Do It.

The approach I would take would be;

```
use strict;  # will save you big time in the long run

my %ids      # Use a hash table with the id as the key to accumulate the properties
open a file handle on csv or die
while (read another line from the file handle){
  split line into ID and property variable  # google the split function
  append new property to existing properties for this id in the hash table  # If it doesn't exist already, it will be created
}

foreach my $key (keys %ids) {
  deduplicate properties
  print/display/do whatever you need to do with the result
} 
```

This approach means you will need to iterate over the whole set twice (once in memory), so depending on the size of the dataset that may be a problem. A more sophisticated approach would be to use a hashtable of hashtables to do the de duplication in the intial step, but depending on how quickly you want/need to get it working, that may not be worthwhile in the first instance.

Check out [this question](https://stackoverflow.com/questions/7651/how-do-i-remove-duplicate-items-from-an-array-in-perl) for a discussion on how to do the deduplication.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T21:47:05.693

Well, open the file as stdin in perl, assume each row is of two columns, then iterate over all lines using left column as hash identifier, and gathering right column into an array pointed by a hash key. At the end of input file you'll get a hash of arrays, so iterate over it, printing a hash key and assigned array elements separated by ";" or any other sign you wish.

and here you go

```
dtpwmbp:~ pwadas$ cat input.txt 
550672,1
656372,1
766153,1
550672,2
656372,2
868194,2
766151,2
550672,3
868179,3
868194,3
550672,4
766153,4
dtpwmbp:~ pwadas$ cat bb2.pl 
#!/opt/local/bin/perl

my %hash;
while (<>)
{
    chomp;
    my($key, $value) = split /,/;
    push @{$hash{$key}} , $value ;
}

foreach my $key (sort keys %hash)
{
     print $key . "," . join(";", @{$hash{$key}} ) . "\n" ;
}
dtpwmbp:~ pwadas$ cat input.txt | perl -f bb2.pl 
550672,1;2;3;4
656372,1;2
766151,2
766153,1;4
868179,3
868194,2;3
dtpwmbp:~ pwadas$ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T09:56:50.800

```
perl -F"," -ane 'chomp($F[1]);$X{$F[0]}=$X{$F[0]}.";".$F[1];if(eof){for(keys %X){$X{$_}=~s/;//;print $_.",".$X{$_}."\n"}}' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-16T23:13:09.953

Another (not perl) way which incidentally is shorter and more elegant:

```
#!/opt/local/bin/gawk -f

BEGIN {FS=OFS=",";}

NF > 0 { IDs[$1]=IDs[$1] ";" $2; }

END { for (i in IDs) print i, substr(IDs[i], 2); } 
```

The first line (after specifying the interpreter) sets the input FIELD SEPARATOR and the OUTPUT FIELD SEPARATOR to the comma. The second line checks of we have more than zero fields and if you do it makes the ID ($1) number the key and $2 the value. You do this for all lines.

The END statement will print these pairs out in an unspecified order. If you want to sort them you have to option of `asorti` gnu awk function or connecting the output of this snippet with a pipe to `sort -t, -k1n,1n`.

# excel - 存储在单个单元格 excel 中的范围的最后更新日期

> ID：12450905
> 
> 赞同：2
> 
> 时间：2012-09-16T21:32:57.827
> 
> 标签：excel, range

所以我有这个excel工作表，我有一个范围A2：A3，我想知道我是否可以将该特定范围的最后一次更新存储到一个单元格中，比如说B1？我在 VBA 世界中非常了解。非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:24:46.483

*   右键单击您的工作表选项卡
*   查看代码
*   复制并粘贴下面的代码
*   [alt](/questions/tagged/alt "显示标记为“alt”的问题") [f11](/questions/tagged/f11 "显示标记为“f11”的问题")返回 Excel

**`code`**

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rng1 As Range
Set rng1 = Intersect([a2:a3], Target)
If rng1 Is Nothing Then Exit Sub
Application.EnableEvents = False
[b1] = Format(Now(), "dd-mm-yyyy hh:mm:ss")
Application.EnableEvents = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-17T04:08:35.817

'已编写此宏以更新每个 A2:D43415 上的上次修改日期/时间 '上次修改日期应用于 F 列。

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rInt As Range
Dim rCell As Range
Dim tCell As Range
Dim tColInt As Integer

tColInt = 6 'Column Index, Example: A=1, B=2, ...... ,Z=26

Set rInt = Intersect(Target, Range("A2:D43415")) 'Change cell range
 If Not rInt Is Nothing Then
    For Each rCell In rInt
        Set tCell = Cells(rCell.Cells.Row, tColInt)
        If IsEmpty(tCell) Or Not IsEmpty(tCell) Then
            tCell = Now
            tCell.NumberFormat = "dd/mm/yyyy h:mm:ss AM/PM" 'Custom Format
        End If
    Next
 End If
End Sub 
```

[点击查看输出](https://i.stack.imgur.com/51vm9.png)

# windows-runtime - Metro/Windows Store App：相对图像源绑定不起作用？

> ID：12450906
> 
> 赞同：0
> 
> 时间：2012-09-16T21:32:59.200
> 
> 标签：windows-runtime, microsoft-metro

我正在尝试为我的 WinRT 项目创建一个 ImageToggleButton，以更改其 IsChecked 属性的图像。

在 Visual Studio 2012 和 Visual Studio Express for Windows 8 的设计器中，ToggleButton 的行为符合预期，但在运行时不会显示图像。

有任何想法吗？

```
XAML:
    <Page.Resources>
      <local:BooleanImageConverter x:Name="BoolImgConverter"/>
    </Page.Resources>

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
      <ToggleButton HorizontalAlignment="Left" Height="200" Margin="260,205,0,0" VerticalAlignment="Top" Width="833" Background="Yellow">
        <Image Source="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Parent.IsChecked, Converter={StaticResource BoolImgConverter}, ConverterParameter=Assets/chkMusic}"/>
      </ToggleButton>
    </Grid>

CodeBehind:
    public class BooleanImageConverter : IValueConverter
    {
      public object Convert(object value, Type targetType, object parameter, string culture)
      {
        bool state = (bool)value;
        string baseName = (string)parameter;

        return string.Format("{0}_{1}checked.png", baseName, state ? "" : "un");
      }

      public object ConvertBack(object value, Type targetType, object parameter, string culture)
      {
        return null;
      }
   } 
```

代码说明：

我将 Image 控件放入 ToggleButton 并使用转换器将图像源绑定到包含（父）ToggleButton 的 IsChecked 属性，该转换器根据 IsChecked 装饰给定的 ConverterParameter 以提供字符串以引用所需的图像文件。

当然我可以在后面的代码中执行此操作，但我更愿意尽可能在 XAML 中执行此操作。

目前我也没有在构建 ControlTemplate 之后，我会尝试 RelativeSource FindAncestor 和该论坛的其他建议，但这些似乎在 Windows 应用商店应用程序中不起作用（或者我错了吗？）。

我会很感激任何建议。

谢谢

（顺便说一句：我试图将 windows-store-app 作为标签添加到这篇文章中，但无法创建这个新标签 - 其他人会这样做吗）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:41:23.473

父母从来没有像你想象的那样工作过。有几种方法可以完成您所需要的。

第一个是保留RelativeSource 绑定但删除到IsChecked 的路径。这会将控制权传递给转换器。在其中，您可以使用 VisualTreeHelper 获取父级。

第二个是命名您的 ToggleButton 并使用 ElementName 绑定绑定到它

```
<ToggleButton x:Name="MusicToggle" HorizontalAlignment="Left" Height="200" Margin="260,207,-793,-207" VerticalAlignment="Top" Width="833" Background="Yellow">
    <Image Source="{Binding IsChecked, ElementName=MusicToggle, Converter={StaticResource BoolToImage}, ConverterParameter=Assets/chkMusic}"/> 
```

# jquery - 如何将最小高度和最小宽度添加到 jQuery .width 和 .height

> ID：12450907
> 
> 赞同：4
> 
> 时间：2012-09-16T21:33:00.640
> 
> 标签：jquery, html, css, window-resize

我有一个单页网站，正在尝试使用 CSS 设置最小高度和宽度。但是 jQuery 似乎忽略了我的最小尺寸。

我正在使用以下方法调整窗口大小：

```
$(window).resize(function () {
    resizePanel();
});
function resizePanel() {
    width = $(window).width();
    height = $(window).height();
    mask_width = width * $('.item').length;
    $('#wrapper, .item').css({width: width, height: height});
    $('#mask').css({width: mask_width, height: height});
} 
```

Html 看起来像这样。

```
</head>
<body>

<div id="wrapper">
<div id="mask">

    <div id="item1" class="item">
    </div>

    <div id="item2" class="item">
    </div>

    <div id="item3" class="item">
    </div>

    <div id="item4" class="item">
    </div>

</div>
</div>

</body>
</html> 
```

这些 div 中的每一个都使用此 CSS 定位在屏幕外。

```
body, html {
height:100%;
width:100%;
margin:0;padding:0;
overflow:hidden;
}
#wrapper {
width:100%;
height:100%;
position:absolute;
top:0;left:0;
background-color:#ccc;
overflow:hidden;
}

#mask {
    width:400%;
    height:100%;
    background-color:#eee;
}

.item {
    width:25%;
    height:100%;
    float:left;
    background-color:#ddd;
    min-height:700px;
    min-width: 700px;
} 
```

任何想法都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-02T06:34:52.943

> **将呈现最大的值（高度 > 最小高度，反之亦然）**

因此，如果您正在设计您的网页，请记住这一点。

***1.具有更大的`min-height`和`min-width`***

```
<!DOCTYPE html>
<html>
<head>
<style>
div {
    border: 1px solid #4CAF50;
    min-height:200px;
    min-width: 200px;
    height:50px;
    width:50px;    
}
</style>
</head>
<body>
<div>This element has greater min-height and min-width.</div>
</body>
</html>
```

***2.具有更大的`height`和`width`***

```
<!DOCTYPE html>
<html>
<head>
<style>
div {
    border: 1px solid #4CAF50;
    min-height:50px;
    min-width: 50px;
    height:100px;
    width:100px;    
}
</style>
</head>
<body>
<div>This element has greater height and width</div>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T23:30:33.117

Jquery 实际上覆盖了你的`min-width`and `min-height`by`width`所以`height`你可以做的是：

```
$(window).resize(function () {
    resizePanel();
});
function resizePanel() {
    width = $(window).width();
    height = $(window).height();
    mask_width = width * $('.item').length;
    $('#wrapper').css({width: width, height: height});
    $('.item').css({minWidth: width, minHeight: height});
    $('#mask').css({width: mask_width, height: height});
} 
```

# haskell - 自己运行黑线鳕

> ID：12450908
> 
> 赞同：4
> 
> 时间：2012-09-16T21:33:29.050
> 
> 标签：haskell, haddock

我想开始使用黑线鳕；主要原因不是我（或其他任何人）需要很好的 HTML 文档来编写我现在正在编写的内容，而是它将教会我一种标准化的方式来评论 Haskell 模块。出于这个原因，我想亲自动手，但我遇到了一个非常基本的问题。

资源：

```
module Main where
-- |This is the main function.
main = putStrLn "Hello World!" 
```

黑线鳕调用：

```
> haddock -h test.hs 
Haddock coverage:
  50% (  1 /  2) in 'Main'
Warning: Main: could not find link destinations for:
    GHC.Types.IO 
```

看起来 Haddock 不知道在哪里寻找标准库，但这只是一个疯狂的猜测。文档对“-B”参数说了一些话，但并没有真正解释太多。

我在网上搜索了这个问题，基本上得到了“使用 Cabal 包，它会为你做所有事情”的回答。但是，我宁愿现在不和Cabal打交道，而是自己学习黑线鳕（Cabal可以等待）。是否有一个很好且简单（ish）的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T12:31:05.807

我将回应对您问题的评论的智慧，并说，只需使用 Cabal。这不是要学习的额外内容，而是要学习的*内容*，因为它为您处理了所有这些繁琐的细节。无论如何，您可能都需要了解它，因为其他人都在使用它，因此您不妨从这些知识中受益。

为了完整起见，我运行`cabal haddock -v`了我的一个项目，这是`haddock`它使用的调用：

> `/usr/local/bin/haddock --prologue=dist/doc/html/notcpp/haddock-prolog1566.txt --dump-interface=dist/doc/html/notcpp/notcpp.haddock --optghc=-package-name --optghc=notcpp-0.2.0.2 --hide=NotCPP.Utils --verbosity=1 --html --read-interface=/usr/local/share/doc/ghc/html/libraries/array-0.4.0.1,/usr/local/share/doc/ghc/html/libraries/array-0.4.0.1/array.haddock --read-interface=/usr/local/share/doc/ghc/html/libraries/base-4.6.0.0,/usr/local/share/doc/ghc/html/libraries/base-4.6.0.0/base.haddock --read-interface=/usr/local/share/doc/ghc/html/libraries/containers-0.5.0.0,/usr/local/share/doc/ghc/html/libraries/containers-0.5.0.0/containers.haddock --read-interface=/usr/local/share/doc/ghc/html/libraries/deepseq-1.3.0.1,/usr/local/share/doc/ghc/html/libraries/deepseq-1.3.0.1/deepseq.haddock --read-interface=/usr/local/share/doc/ghc/html/libraries/ghc-prim-0.3.0.0,/usr/local/share/doc/ghc/html/libraries/ghc-prim-0.3.0.0/ghc-prim.haddock --read-interface=/usr/local/share/doc/ghc/html/libraries/integer-gmp-0.5.0.0,/usr/local/share/doc/ghc/html/libraries/integer-gmp-0.5.0.0/integer-gmp.haddock --read-interface=/usr/local/share/doc/ghc/html/libraries/pretty-1.1.1.0,/usr/local/share/doc/ghc/html/libraries/pretty-1.1.1.0/pretty.haddock --read-interface=/usr/local/share/doc/ghc/html/libraries/template-haskell-2.8.0.0,/usr/local/share/doc/ghc/html/libraries/template-haskell-2.8.0.0/template-haskell.haddock --odir=dist/doc/html/notcpp/ --title=notcpp-0.2.0.2: Avoiding the C preprocessor via cunning use of Template Haskell --optghc=-fbuilding-cabal-package --optghc=-O --optghc=-odir --optghc=dist/build/tmp-1566 --optghc=-hidir --optghc=dist/build/tmp-1566 --optghc=-stubdir --optghc=dist/build/tmp-1566 --optghc=-i --optghc=-idist/build --optghc=-i. --optghc=-idist/build/autogen --optghc=-Idist/build/autogen --optghc=-Idist/build --optghc=-optP-include --optghc=-optPdist/build/autogen/cabal_macros.h --optghc=-hide-all-packages --optghc=-package-id --optghc=base-4.6.0.0-eac4fa0d0988628e5bd960fef8805b26 --optghc=-package-id --optghc=template-haskell-2.8.0.0-102a52a4fda28374255d0a3a8e99f26c --optghc=-XHaskell98 --optghc=-XTemplateHaskell --optghc=-W -B/usr/local/lib/ghc-7.6.1 dist/build/tmp-1566/NotCPP/ScopeLookup.hs dist/build/tmp-1566/NotCPP/LookupValueName.hs dist/build/tmp-1566/NotCPP/OrphanEvasion.hs dist/build/tmp-1566/NotCPP/Utils.hs`

现在，我确信其中大部分是可选的，但我不打算花时间弄清楚哪些位是，哪些不是。

# python - 在二叉决策树中跟踪导致目标结果的节点序列？

> ID：12450909
> 
> 赞同：0
> 
> 时间：2012-09-16T21:33:29.537
> 
> 标签：python, tree, binary-tree, nodes, decision-tree

我在 Python 中实现了一个二叉决策树来解决一个非常标准的背包问题：有一个对象集合，每个对象都有一个关联的权重和值，并且必须选择对象以最大化值，受权重约束。

我知道如何返回最大值，但我正在努力寻找一种聪明的方法来返回产生最大值的对象的身份。

现在，我正在创建一个“字符串向量”，可以说，“1”和“0”代表选择打包或不打包某个对象。字符串向量中的第一个“1”或“0”表示为与对象列表中的第一个对象对应的对象做出的决定，依此类推。

有一个更好的方法吗？

我写的代码：

```
def knapsack(weightList, valueList, availableWeight, index):
    if index == 0:
        if weightList[index] <= availableWeight:
            return valueList[index], '1'
        else:
            return 0, '0'
    else:
        reject, rVector = knapsack(weightList, valueList, availableWeight, index - 1)
        rVector += "0"
        if weightList[index] <= availableWeight:
            take, tVector = knapsack(weightList, valueList, availableWeight - weightList[index], index - 1)
            take += valueList[index]
            tVector += "1"
        else:
            take = -1

        if take > reject:
            return take, tVector
        else:
            return reject, rVector

weightList = [1, 2, 6, 5, 8, 3, 7, 2, 4, 7, 1]
valueList = [2, 5, 4, 6, 7, 8, 2, 4, 5, 6, 8]
availableWeight = 5
index = len(weightList) - 1

maxValue, vector = knapsack(weightList, valueList, availableWeight, index)
print maxValue
print vector 
```

输出是：

```
18
10000100001 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:42:26.167

如果字符串最终包含大部分“0”和一些“1”，那么最好返回一个 Python 集合对象。一旦你得到一个集合的结果，它仍然可以让你有效地决定一个索引是否在集合中——因此首先使用一串标志几乎没有优势。

请注意，集合是可变的，如果在您的算法中实施不正确，可能会造成混乱。我建议更喜欢“frozenset”而不是“set”。

# jquery - 在移动设备上禁用 .js 文件中的 jquery 行，或者仅在 Mac/IPAD 时使用？

> ID：12450911
> 
> 赞同：0
> 
> 时间：2012-09-16T21:33:34.397
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-mobile, drop-down-menu

```
jQuery(document).ready(function(){
    /* for top navigation */

    jQuery("#menu ul, #menu li").css("-webkit-transform", "translateZ(0)");
    jQuery(" #menu ul ").css({display: "none"}); // Opera Fix
    jQuery(" #menu li").hover(function(){
        jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400);
    },function(){
        jQuery(this).find('ul:first').css({visibility: "hidden"});
    });

    jQuery(" #menu2 ul ").css({display: "none"}); // Opera Fix
    jQuery(" #menu2 li").hover(function(){
        jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400);
    },function(){
        jQuery(this).find('ul:first').css({visibility: "hidden"});
    });
}); 
```

此代码来自 dropdown.js，用于我在 www.yorkshirephotographer.net 上的导航菜单，我不得不添加第一行代码 - webkit 转换，因为该菜单在 Mac 和 IPAD 上无法正常运行。查看更多信息以及为什么我在此处添加此代码行 -

[JavaScript 下拉菜单 - 零件在 Mac 上消失？](https://stackoverflow.com/questions/12384219/javascript-dropdown-menu-parts-disappearing-on-a-mac)

但现在菜单在移动设备上不起作用。当您点击单击时，会在主菜单文本下方出现一个框，就像您在链接下按下一样，这会导致链接无法激活 - 所以基本上菜单栏在手机上不起作用。

我已经检查了没有那行代码，它再次工作，但它不会在 Mac 上工作......所以需要在移动设备上禁用它或仅在其 Mac/Apple 操作系统时读取......

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T22:20:51.663

您应该能够从[导航](http://www.javascriptkit.com/javatutors/navigator.shtml)器对象的平台属性中获取操作系统。

```
<script type="text/javascript">
    jQuery(document).ready(function(){
        // Mac OS detection
        if (/Mac[\/\s](\d+\.\d+)/.test(navigator.platform)) {
            /* for top navigation */
            jQuery("#menu ul, #menu li").css("-webkit-transform", "translateZ(0)");
            jQuery(" #menu li").hover( function() {
                    jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400); }, 
                function() { 
                    jQuery(this).find('ul:first').css({visibility: "hidden"}); 
                });

            jQuery(" #menu2 li").hover( function() {
                    jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400); }, 
                function() {
                    jQuery(this).find('ul:first').css({visibility: "hidden"});
                });
            // Opera Fix
            if (/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){ 
                jQuery(" #menu ul ").css({display: "none"}); 
                jQuery(" #menu2 ul ").css({display: "none"});
            }
        }
    });
</script> 
```

或者您可以使用出色的 javascript [session.js](https://github.com/codejoust/session.js)库；）
它会返回您浏览器操作系统的值，以及设备是平板电脑、手机还是移动设备。

**编辑：**添加可供使用的代码并删除 w3c 引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:29:24.593

你可以试试这个：

```
jQuery(document).ready(function(){

    // If Mac, or iPad, apply the following...
    if(navigator.userAgent.match(/(Mac|iPad)/i)) {

        jQuery("#menu ul, #menu li").css("-webkit-transform", "translateZ(0)");
        jQuery(" #menu ul ").css({display: "none"}); // Opera Fix        
        jQuery(" #menu li").hover(function(){
            jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400);
        },function(){
            jQuery(this).find('ul:first').css({visibility: "hidden"});
        });

        jQuery(" #menu2 ul ").css({display: "none"}); // Opera Fix
        jQuery(" #menu2 li").hover(function(){
            jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400);
        },function(){
            jQuery(this).find('ul:first').css({visibility: "hidden"});
        });

    } // End of Mac, iPad additional fixes ----

}); 
```

**PS：**如果您想包含 iPhone 和 iPod 的附加修复程序，您可以替换`if(navigator.userAgent.match(/(Mac|iPad)/i))`为`if(navigator.userAgent.match(/(Mac|iPhone|iPod|iPad)/i))`

希望这会有所帮助，让我知道你的结果伙伴。

# c++ - 如何将 wchar_t（或 wchar_t* 或 CORBA::WChar*）转换为字符串？

> ID：12450920
> 
> 赞同：0
> 
> 时间：2012-09-16T21:34:40.190
> 
> 标签：c++, type-conversion, wchar-t, wchar, soci

在我的应用程序中，我必须使用 CORBA::WChar*（或等效的 wchar_t*），但我的程序还需要将一些信息保存到 PostgreSQL 数据库中。为了在 C++ 中将数据插入 PostgreSQL，我使用 SOCI。问题在于：

```
The following types are currently supported for use with into and use expressions:
char (for character values)
short, int, unsigned long, long long, double (for numeric values)
char*, char[], std::string (for string values)
std::tm (for datetime values)
soci::statement (for nested statements and PL/SQL cursors)
soci::blob (for Binary Large OBjects)
soci::row_id (for row identifiers) 
```

所以不支持 wchar_t* 或 wstring ...我需要将 CORBA::WChar （或 wchar_t 或 wchar_t*）转换为字符串。这该怎么做？

我也有宽字符（和字符串）的问题，使用 CodeBlocks 10.5 ：

```
#include <cstdlib>
#include <iostream>
using namespace std;

int main(int argc, char **argv)
{
    const wchar_t *val = L"ąśżźćłóń";
    wcout << val << "\n";
    return 0;
} 
```

显示：

```
E:\Temp\Untitled1.cpp||In function 'int main(int, char**)':|
E:\Temp\Untitled1.cpp|7|error: converting to execution character set: Invalid argument|
||=== Build finished: 1 errors, 0 warnings ===| 
```

如何解决？

我还需要代码是可移植的，我可以在 unix/linux 和 windows 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:40:50.617

我建议`boost::locale::conv::utf_to_utf<char>(wchar_t*)`只需将您`wchar_t*`的字符串转换为 UTF-8 以获取更多信息，请阅读`boost::locale`文档

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T21:50:26.787

什么样的数据库不允许你存储 Unicode 字符串？我的建议是使用一个像样的数据库。

# javascript - 如何将 onclick 代码压缩为动态的

> ID：12450922
> 
> 赞同：0
> 
> 时间：2012-09-16T21:35:15.850
> 
> 标签：javascript, html, dynamic

我试图让这个 onclick 函数代码是动态的。我不希望所有州都有 50 个代码块。他是代码的快速片段

```
 var Ohio=function(){
    document.getElementById('texas').style.display='none';
    document.getElementById('florida').style.display='none';
    document.getElementById('ohio').style.display='block';

    } 
```

等等等等.....

传递函数的html：

```
<li onclick="Ohio()" id="ohio" > 
```

等等等等我将如何压缩它以使其更小和动态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:40:11.773

如果您可以将元素更新为具有公共类，例如`class="state"`，那么：

```
var SetState = function(state) {
    var s = document.getElementsByClassName("state"),
        i;
    for (i=0; i < s.length; i++)
        s[i].style.display = 'none';

    document.getElementById(state).style.display = 'block';
}; 
```

也就是说，循环遍历`state`类中的所有元素并隐藏它们，然后只显示传递给函数的元素：

```
SetState('ohio'); 
```

或者，如果您无法更改 html，请将所有状态名称放入一个数组中并循环遍历该数组以隐藏它们。

# python - Pandas 删除索引为字符串的数据行

> ID：12450924
> 
> 赞同：2
> 
> 时间：2012-09-16T21:36:07.203
> 
> 标签：python, pandas

我有一个数据框，其中一些索引是字符串值。如何删除索引为字符串值或非整数的数据行？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T22:07:47.540

我建议使用布尔索引：

```
mask = frame.index.map(lambda x: not isinstance(x, str))
frame = frame[mask] 
```

# asp.net - 将 ComplexType 与 ToList 一起使用会导致 InvalidOperationException

> ID：12450925
> 
> 赞同：0
> 
> 时间：2012-09-16T21:36:14.023
> 
> 标签：asp.net, entity-framework, complextype

我有这个模型

```
namespace ProjectTimer.Models
{
    public class TimerContext : DbContext
    {
        public TimerContext()
            : base("DefaultConnection")
        {
        }

        public DbSet<Project> Projects { get; set; }
        public DbSet<ProjectTimeSpan> TimeSpans { get; set; }
    }

    public class DomainBase
    {
        [Key]
        public int Id { get; set; }
    }

    public class Project : DomainBase
    {
        public UserProfile User { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public IList<ProjectTimeSpan> TimeSpans { get; set; }
    }

    [ComplexType]
    public class ProjectTimeSpan
    {
        public DateTime TimeStart { get; set; }
        public DateTime TimeEnd { get; set; }
        public bool Active { get; set; }
    }
} 
```

当我尝试使用此操作时，我得到了异常`The type 'ProjectTimer.Models.ProjectTimeSpan' has already been configured as an entity type. It cannot be reconfigured as a complex type.`

```
public ActionResult Index()
        {
            using (var db = new TimerContext())
            {
                return View(db.Projects.ToList);
            }
        } 
```

视图正在使用模型`@model IList<ProjectTimer.Models.Project>`

任何人都可以阐明为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:02:08.287

`IList<ProjectTimeSpan>`EF 不支持您的资产。复杂类型必须始终是另一个实体类型的一部分，您不能单独使用复杂类型。如果您绝对需要具有`ProjectTimeSpan`复杂类型，则需要创建一个仅包含键和 a 的虚拟实体类型，`ProjectTimeSpan`并将类型更改`Project.TimeSpans`为该新类型的列表。

# css - RetinaJS 和 LESS：iOS 上不显示背景图像

> ID：12450928
> 
> 赞同：0
> 
> 时间：2012-09-16T21:36:31.307
> 
> 标签：css, ios, gwt, less, retina-display

我正在尝试使用[LESS CSS](http://lesscss.org/)和[RetinaJs](http://retinajs.com/)将背景图像制作成视网膜图像：

在我的 index.html 文件中：

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        [...]
        <link type="text/css" rel="stylesheet/less" href="resources/css/retina.less">
        <script type="text/javascript" src="resources/js/less-1.3.0.minjs" ></script>
        [...]
    </head>
    <body>
    [...]
        <script type="text/javascript" src="resources/js/retina.js"></script>
    </body>
</html> 
```

在我的retina.less 文件中：

```
.at2x(@path, @w: auto, @h: auto) {
  background-image: url("@{path}");
  @at2x_path: ~`"@{path}".split('.').slice(0, "@{path}".split('.').length - 1).join(".") + "@2x" + "." + "@{path}".split('.')["@{path}".split('.').length - 1]`;

  @media all and (-webkit-min-device-pixel-ratio : 1.5) {
    background-image: url("@{at2x_path}");
    background-size: @w @h;
  }  
}

.topMenu {
    .at2x('../../resources/img/topMenuTitle.png');
} 
```

我在同一个文件夹中同时拥有 topMenuTitle.png (320px x 40px) 和 topMenuTitle@2x.png (640px x 80px)。

测试此代码时：

*   在 Firefox 我有正常的背景
*   在 XCode iPhone 模拟器中，我也有正常的背景
*   在 iPhone 设备中，我根本没有任何背景。
*   如果这很重要，我正在使用 GWT。

有什么建议么 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T22:55:09.910

较新版本的[`retina.less`](https://github.com/imulus/retinajs/blob/master/src/retina.less)修复了该问题：

你需要更换

```
 background-image: url(@path); 
```

和

```
 background-image: url("@{path}"); 
```

否则这将无法在 iOS 上编译

# python - 从 。从模块导入 *

> ID：12450930
> 
> 赞同：16
> 
> 时间：2012-09-16T21:36:59.533
> 
> 标签：python

工作目录中有一个脚本，我可以访问它：

```
from . import core.py 
```

我还想从 core.py 导入 *。我将如何用 Python 编写这个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-02T07:00:29.373

见[https://docs.python.org/2/tutorial/modules.html](https://docs.python.org/2/tutorial/modules.html)

在第[6.4.2 节中。包内参考](https://docs.python.org/2/tutorial/modules.html#intra-package-references)：

*   如果导入模块在同一目录中，请使用例如：`from . import core`
*   如果在顶部目录中导入模块，请使用例如：`from .. import core`
*   如果在另一个子目录中导入模块，请使用例如：`from ..other import core`

注意：从 Python 2.5 开始，除了隐式相对导入之外，您还可以使用 import 语句的 from module import name 形式编写显式相对导入。这些显式的相对导入使用前导点来指示相对导入中涉及的当前包和父包。从环绕模块。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-16T21:44:15.900

为了保持与 完全相同的语义`from . import core`，您需要执行以下操作：

```
from .core import * 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-16T21:39:36.607

我很确定这只是：

```
from core import * 
```

假设`core.py`在您当前的工作目录或运行脚本的位置。

# java - Java：如何将画布放入画布中？

> ID：12450931
> 
> 赞同：0
> 
> 时间：2012-09-16T21:37:02.290
> 
> 标签：java, canvas

可以说我有一个`Canvas`，如下面的 -

```
Canvas canvas1 = new Canvas();
canvas1.setBounds(0,0,100,100);
panel.add(canvas1); 
```

现在我有`canvas1`. 可以说我想做另一个`Canvas`，就像下面的那个 -

```
Canvas canvas2 = new Canvas();
canvas2.setBounds(0,0,50,50);
panel.add(canvas2); 
```

如您所见，我已经添加了`canvas2`inside `canvas1`，但是当我尝试使用时`canvas2`，它不起作用，因为它是 inside `canvas1`。无论如何在不更改我的任何代码的情况下同时制作`canvas1`和`canvas2`工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:54:12.593

如果您需要帮助，我们需要您提供更多详细信息。什么不起作用？绘画？地点？

您设置画布的方式看起来不错，您是否像这样正确地覆盖了绘画：

`java.awt.Canvas canvas2 = new CanvasTest();`

```
public class CanvasTest extends Canvas
{
    @Override
    public void paint(Graphics g)
    {
        super.paint(g);
        //paint to your canvas here
        g.drawRect(5,5, 10, 10);
    }
} 
```

**注意：** 您没有将 canvas2 放在 canvas1 中，您已将它们都添加到“面板”：， 请注意您的问题措辞**`panel`**`.add(canvas1);`**`panel`**`.add(canvas2);`

# php - 使用 preg_match_all 从字符串中提取图像 SRC

> ID：12450943
> 
> 赞同：2
> 
> 时间：2012-09-16T21:38:24.910
> 
> 标签：php, regex, preg-match-all

我有一串设置为$content的数据，这个数据的一个例子如下

```
This is some sample data which is going to contain an image in the format <img src="http://www.randomdomain.com/randomfolder/randomimagename.jpg">.  It will also contain lots of other text and maybe another image or two. 
```

我试图只抓取`<img src="http://www.randomdomain.com/randomfolder/randomimagename.jpg">`并将其保存为另一个字符串，例如 $extracted_image

到目前为止我有这个....

```
if( preg_match_all( '/<img[^>]+src\s*=\s*["\']?([^"\' ]+)[^>]*>/', $content, $extracted_image ) ) {
$new_content .= 'NEW CONTENT IS '.$extracted_image.''; 
```

它返回的只是......

```
NEW CONTENT IS Array 
```

我意识到我的尝试可能完全错误，但有人能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:41:50.560

您的第一个问题是[http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)将数组放入`$matches`，因此您应该从数组中输出单个项目。尝试`$extracted_image[0]`开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:42:44.747

如果您只想要一个结果，则需要使用不同的功能：

`preg_match()`返回第一个也是唯一一个匹配项。 `preg_match_all()`返回一个包含所有匹配项的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T23:21:09.290

不建议使用正则表达式来解析有效的 html。因为在 src 属性之前可能会有意想不到的属性，因为非 img 标签可以欺骗正则表达式进行误报匹配，并且因为属性值可以用单引号或双引号引起来，所以应该使用 dom 解析器。它干净、可靠且易于阅读。

代码：（[演示](https://3v4l.org/bb3O6)）

```
$string = <<<HTML
This is some sample data which is going to contain an image
in the format <img src="http://www.randomdomain.com/randomfolder/randomimagename.jpg">.
It will also contain lots of other text and maybe another image or two
like this: <img alt='another image' src='http://www.example.com/randomfolder/randomimagename.jpg'>
HTML;

$srcs = [];
$dom=new DOMDocument;
$dom->loadHTML($string);
foreach ($dom->getElementsByTagName('img') as $img) {
    $srcs[] = $img->getAttribute('src');
}

var_export($srcs); 
```

输出：

```
array (
  0 => 'http://www.randomdomain.com/randomfolder/randomimagename.jpg',
  1 => 'http://www.example.com/randomfolder/randomimagename.jpg',
) 
```

# c++ - C++ 重载运算符<< 输出地址

> ID：12450949
> 
> 赞同：1
> 
> 时间：2012-09-16T21:39:13.567
> 
> 标签：c++, overloading

所以在我的程序中，我有一些类——Button、Window 和 WindowButton。Button 仅由文本组成，Window - 由按钮和坐标（x，y）组成，WindowButton 由 Window 组成。在 WindowButton 中，我重载了 << 运算符，如下所示：

```
ostream& operator<<(ostream& out, WindowButton& ref)
{
    ref.print();
    return out;
} 
```

打印功能如下所示：

```
void WindowButton::print()
{
    theWindow->print();
} 
```

和窗口打印功能，在窗口类：

```
void Window::print()
{
    char* buttonText = button->getText();
    char* theText = new char[strlen(buttonText)+1];
    strcpy(theText, buttonText);
    cout << endl << "Window with coordinates (" << this->coord.x << "," << this->coord.y << ") , and button text \"" << theText << "\"" << endl;
} 
```

主要：

```
WindowButton *test = new WindowButton();
cout << endl << test;
test->print(); 
```

最后一行提供了正确的输出，但第二行只提供了一个内存地址。我究竟做错了什么？一切都应该正常工作，因为 test->print(); 工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T21:41:11.617

您正在传递一个指向 operator<< 的指针，它需要一个 &。

```
cout << endl << *test; 
```

你也可以做到：

```
ostream& operator<<(ostream& out, const WindowButton& ref){ 
```

假设 print 实际上并没有修改。

但是，更大的问题是您为什么要使用`cout`ostream 来触发打印`theWindow`- 这些似乎（尽管不是）逻辑上断开的进程。您可以将给定的流传递到 Window::print:

```
void Window::print(ostream& stream) { 
```

并使用该流代替`cout`. 这避免了硬编码`cout`到`Window::print()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:40:50.137

它是一个指针，因此您需要取消引用它才能使操作员工作：

```
cout << endl << *test; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T21:41:48.983

这条线

```
cout << endl << test; 
```

打印一个指向 的指针`WindowButton`，并且有一个`ostream& operator<<`专门用于打印地址的指针。您可以尝试取消引用指针：

```
cout << endl << (*test); 
```

顺便说一句`ostream& operator<<`，以最终仅打印到`std::cout`. 这种运营商的意义在于，您可以流式传输到*任何* `ostream`内容，而不仅仅是`cout`. 您可以通过修改`print`函数以获取`ostream`引用来解决此问题，并对其进行修改：

```
void WindowButton::print(std::ostream& out) const {
  theWindow->print(out);
} 
```

和

```
void Window::print(ostream& out) const {
  // stuff
  out << "Window with coordinates (" << this->coord.x << "," << this->coord.y << ") , and button text \"" << theText << "\"" << endl;
} 
```

最后

```
ostream& operator<<(ostream& out, const WindowButton& ref){
  ref.print(out);
  return out;
} 
```

# jquery - Jquery TokenInput过滤搜索查询与params [：q]不匹配第一个字符

> ID：12450955
> 
> 赞同：0
> 
> 时间：2012-09-16T21:39:43.133
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-tokeninput

我正在尝试使用 TokenInput 插件创建一个令牌字段，以将成员（仅创建组的用户的朋友）添加到组。

所以，我在这里有我的友谊控制器代码：

```
class FriendshipsController < ApplicationController

 def index 

 @friend_list = @current_user.friends.map { |f| {:id => f.id, :name => f.first_name + ' ' + f.last_name}}

 respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @friend_list }
 end
end 
```

这会在 url "/friendships.json" 处返回一个数组，如下所示：

```
[{"id":6,"name":"John Smith"},{"id":7,"name":"Jane Doe"}] 
```

然后，我有我的表单，下面是 TokenInput 的 jquery：

```
 <%= form_for(@group) do |f| %>

<div class="field">
<%= f.label :group_name, "Name" %><br />
<%= f.text_field :group_name %>
</div>
<div class="ui_widget">
<%= f.label :member_tokens, "Members" %><br />
<%= f.text_field :member_tokens %>
</div>
<div class="actions">
<%= f.submit %>
</div>
<% end %>

<script>
$(function() {
    $('#group_member_tokens').tokenInput("/friendships.json");
});
</script> 
```

我的问题是，如何过滤 /friendships.json 中的数组？我尝试在 FriendshipsController 中执行以下操作：

```
friend_list = @current_user.friends.map { |f| {:id => f.id, :name => f.first_name + ' ' + f.last_name}}
@friend_list = friend_list.where("name LIKE ?", "%#{params[:q]}%") 
```

...但这只会在 /friendships.json 中返回一个空数组。

如果有人能让我知道为什么这会返回一个空数组，我将不胜感激。

**更新：**

我试过这样做：

```
 @friend_list = @user_name.friends.where("name LIKE ?", "%#{params[:q]}%")
 @friend_list = @friend_list.map { |f| {:id => f.id, :first_name => f.first_name + ' ' + f.last_name}} 
```

...但是当我将代码 ".where("name LIKE?", "%#{params[:q]}%")" 添加到 @friend_list = current_user.friends 的末尾时，我不再得到任何TokenInput 字段中的自动完成结果（它返回“No Results”）。

当我在 URL 中手动输入 q 参数时，例如“http://localhost:3000/friendships.json?q=k”...我最终得到一个空数组。这很奇怪，因为我的应用程序中有一个名为 Kevin 的用户。

这是我的 ruby​​ 服务器上输出的内容：

```
Started GET "/friendships.json?q=ke" for 127.0.0.1 at 2012-09-16 19:27:53 -0400
Processing by FriendshipsController#index as JSON
Parameters: {"q"=>"ke"}
[...]
User Load (0.7ms)  SELECT "users".* FROM "users" INNER JOIN "friendships" ON "users"."id" = "friendships"."friend_id" WHERE "friendships"."user_id" = 2 AND (first_name LIKE '%ke%')
[...] 
```

但是，我只是尝试在 tokenInput text_field 中输入“evin”，它找到了用户。由于某种原因，q 参数找不到用户名字的第一个字母。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:07:51.673

显然 postgresql 认为 LIKE 查询区分大小写，这就是搜索查询没有找到用户名的大写首字母的原因。相反，您必须将 ilike 与 postgresql 一起使用。在此处查看有关此内容的主题：[https ://groups.google.com/forum/?fromgroups=#!topic/heroku/b6_dJyTXrCU](https://groups.google.com/forum/?fromgroups=#!topic/heroku/b6_dJyTXrCU)

这是有效的代码：

```
class FriendshipsController < ApplicationController

def index 
@friend_list = @user_name.friends.where("name ilike ?", "%#{params[:q]}%")
@friend_list = @friend_list.map { |f| {:id => f.id, :name => f.name}}
[...]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T22:17:29.900

从您写的内容来看，我预计会出现服务器错误（500），而不仅仅是一个空数组。当您在控制器中编写此代码时：

```
friend_list = current_user.friends.map { |f|
  {:id => f.id, :name => f.first_name + ' ' + f.last_name}
}
@friend_list = friend_list.where("name LIKE ?", "%#{params[:q]}%") 
```

会出现一个问题：首先，您从 中获取朋友的集合`current_user`并将其映射到数组中。然后在下一行调用您创建的数组上的 ActiveRecord #where 方法。但由于`friend_list`它不是一个 ActiveRecord 集合，你应该得到一个错误，例如“undefined method 'where' for [...]:Array”

我认为你想要做的是：

```
@friend_list = current_user.friends.where("name LIKE ?", "%#{params[:q]}%")
@friend_list = @friend_list.map { |f|
  {:id => f.id, :name => f.first_name + ' ' + f.last_name}
} 
```

# sql - 查找与多个州相关的邮政编码

> ID：12450960
> 
> 赞同：3
> 
> 时间：2012-09-16T21:40:24.410
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个数据库，其中包含 5 位邮政编码（即 10001）和匹配的州缩写（即 NJ、NY、CA）。我发现一些邮政编码有多个州（即 10001 = NJ 和 10001 = NY），这是错误的。

```
 zip         State
 10001          NY
 10001          NJ
 10001          NY
 10001          NY
  ...           ... 
```

每个州可以有多个邮政编码，但每个邮政编码应该只有一个州。

我想查找所有错误，但似乎无法编写查询来执行此操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-17T00:37:31.437

只是指出显而易见的：

> 由于邮政编码旨在实现高效的邮政投递，因此存在邮政编码跨越州界的不寻常情况，例如跨越多个州的军事设施或一个州的偏远地区，最容易从相邻州获得服务。例如，邮政编码 42223 跨越 Christian KY 和 Montgomery TN，邮政编码 97635 跨越 Lake OR 和 Modoc CA。
> 
> [http://en.wikipedia.org/wiki/ZIP_code](http://en.wikipedia.org/wiki/ZIP_code)

小心你认为的规范数据，并始终相信为你提供真实数据的人。

* * *

在这种情况下，0 代表 NJ，因此`10001`代表 NJ 是错误的，但`00001`代表 NJ 是准确的，而 1 代表代表 NY，因此代表 NY`00001`是错误的，但`10001`代表 NY 是准确的。另请参阅[http://en.wikipedia.org/wiki/List_of_ZIP_code_prefixes](http://en.wikipedia.org/wiki/List_of_ZIP_code_prefixes)

另外值得注意的是，使用上一个链接中的 1000 个邮政编码，您可以准确地确定您拥有的邮政编码超出了它们应该处于的范围/状态......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-16T22:15:25.927

一种不同的方法，但不仅仅是给你一个计数，这会给你所涉及的状态。

```
SELECT zip, state 
FROM dbo.table AS t
WHERE EXISTS 
(
  SELECT 1 FROM dbo.table 
  WHERE zip = t.zip AND state <> t.state
)
GROUP BY zip, state
ORDER BY zip, state; 
```

一旦您确定了重复项并将其删除，请添加一个唯一约束，`zip,state`这样您就不会在下周、下个月等再次执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-15T18:49:44.693

实际上，我每天都在使用全国性的数据集，并且经常遇到这个问题。邮政编码前缀中的州代号表示邮局所在的州，不一定是投递区域的范围。我与 USPS 的一些高层就该国中北部的一些问题进行了联系，并被告知邮政编码计划最初旨在使邮政编码受到州界的限制，但在 80 年代初期，他们开始在农村破例。在某些情况下，北达科他州的一所房子距离蒙大拿州邮局 10 英里，但他们所在州最近的邮局位于几个县之外。这就是为什么会出现这些例外。这在地面层面是有意义的，但在数据层面却没有意义。现在 USPS 数据库中有很多这样的例外情况。最多产的地区（我发现的）沿着 MT/ND 和 SD/ND 边界。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T21:53:23.203

这应该给你你需要的东西：

```
select zip,count(distinct state)
from TheTable
 group by zip
 having count(distinct state)>1 
```

这将为您提供表中存在多个州的每个邮政编码的列表。

# css - 响应式布局 - PX、EM 还是 %？

> ID：12450961
> 
> 赞同：17
> 
> 时间：2012-09-16T21:40:28.057
> 
> 标签：css, layout, responsive-design

我正在构建一个响应式页面布局，到目前为止效果很好，但我有一个问题：

我应该使用 em、px 还是 %？

例如，我想将边框半径应用于元素。我应该使用此代码：

```
border-radius: 1.563em; 
```

或这个：

```
border-radius: 25px; 
```

我应该将ems用于类似的属性还是应该坚持使用px？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-16T22:13:48.953

通常，不要`px`用于响应式布局。

如果您使用`px`基于媒体查询，那么[当用户缩放时，您的布局可能最终看起来像垃圾](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)。不幸的是，我很清楚，因为我也犯了那个错误。

关于您的示例`border-radius`，您可能会发现两者在`font-size`增加[**演示**](http://dabblet.com/gist/3734579)时看起来确实不同。第一个和第三个使用`px`边界半径，而第二个和第四个使用`em`.

但也会有例外，如果缩放时感觉不对劲（例如，`box-shadow`看起来很夸张），也可以试试`px`。

还要检查[这篇文章](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-16T22:54:01.477

仅供参考，如果有帮助，可以使用`rem`. 它解决了 em 的“级联大小”问题。如果你设置

```
body { font-size :62.5 %; } /* Trick to have 1em =10px */

li {font-size:1.4em; } 
```

您`<li>`将是 14px，但如果您在列表中有一个列表，则第二级`<li>` 将是 20px，第三级将是 27px，依此类推。使用 rem（表示“root em”），所有`<li>`的大小都是你定义。

更多信息：[http ://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)

和[http://www.pompage.net/traduction/dimensionner-ses-fontes-avec-rem](http://www.pompage.net/traduction/dimensionner-ses-fontes-avec-rem)（法语）

# c - 使用联合，我可以通过 unsigned int 比较两个双精度数吗？

> ID：12450962
> 
> 赞同：1
> 
> 时间：2012-09-16T21:40:29.930
> 
> 标签：c, double, long-integer, unsigned, unions

具有以下工会：

```
union {double first_d; uint64 first;};
union {double second_d; uint64 second;};
...
first_d = <a double value>
second_d = <a double value> 
```

是否输出以下比较：

```
if(first_d > second_d)
    // CASE 1 OUTPUT
else if(first_d < second_d)
    // CASE 2 OUTPUT
else
    // CASE 3 OUTPUT 
```

以下总是相同的？

```
if(first> second)
    // CASE 1' OUTPUT
else if(first < second)
    // CASE 2' OUTPUT
else
    // CASE 3' OUTPUT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:42:46.087

没有。这是一个使用的反例`NaNs`：

```
int main()
{

    union {double first_d; uint64 first;};
    union {double second_d; uint64 second;};

    first  = 0x7ff8000000000001;
    second = 0x7ff8000000000002;

    if(first_d > second_d)
        printf("greater\n");
    else if(first_d < second_d)
        printf("less\n");
    else
        printf("other\n");

    if(first > second)
        printf("greater\n");
    else if(first < second)
        printf("less\n");
    else
        printf("other\n");

    return 0;
} 
```

输出：

```
other
less 
```

* * *

我还要提到通过联合的类型双关语不是 100% 符合标准的。所以你也可以说这是未定义的行为。

# ruby-on-rails - How to localize ActiveRecord messages in general?

> ID：12450977
> 
> 赞同：2
> 
> 时间：2012-09-16T21:42:16.050
> 
> 标签：ruby-on-rails, validation, activerecord, localization, internationalization

I'm trying

```
ru:
  activerecord:
    errors:
      format: "%{message}" 
```

with no effect, but

```
ru:
  activerecord:
    errors:
      messages:
        record_invalid: "Неверные значения: %{errors}" 
```

is working. I want to override both.

My Rails is 3.2.1 on the top of Ruby 1.9.3.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:46:39.223

You can use this localization code

```
ru:
  activerecord:
    errors:
      messages:
        taken: "%{model} с таким именем уже существует"
        record_invalid: "Валидация не прошла: %{errors}"
        restrict_dependent_destroy:
          one: "Невозможно удалить запись, так как существуют зависимости: %{record}"
          many: "Невозможно удалить записи, так как существуют зависимости: %{record} "
        inclusion: "недопустимое значение"
        exclusion: "is reserved"
        invalid: "содержит недопустимое значение"
        confirmation: "doesn't match confirmation"
        accepted: "must be accepted"
        empty: "не может быть пустым"
        blank: "не может быть пустым"
        too_long: "слишком длинно (максимум: %{count} символов)"
        too_short: "слишком коротко (минимум: %{count} символов)"
        wrong_length: "is the wrong length (should be {{count}} characters)"
        taken: "%{attribute} уже занята"
        not_a_number: "может содержать только цифры"
        greater_than: "должно быть больше {{count}}"
        greater_than_or_equal_to: "должно быть больше или равно {{count}}"
        equal_to: "должно быть равно {{count}}"
        less_than: "должно быть меншье {{count}}"
        less_than_or_equal_to: "должно быть меньше или равно {{count}}"
        odd: "может быть только нечетным"
        even: "может быть только четным" 
```

Take a look at this [gist](https://gist.github.com/3734521) for more info.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T12:50:03.593

In my opinion it would be better to use the localisation from this official source: [https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ru.yml](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ru.yml)

# javascript - 防止鼠标按下延迟后的链接事件

> ID：12450982
> 
> 赞同：0
> 
> 时间：2012-09-16T21:42:49.600
> 
> 标签：javascript, jquery

我正在开发一个功能，以便当用户单击并按住链接时，该链接不会将用户发送到适当的链接。但是，我使用的功能不起作用。我想要的是用户单击一个链接，如果他们按住它超过一秒钟，则该链接不再有效并且不会触发任何事件。看了一段时间后，我找不到代码有什么问题。所以我的问题是，我做错了什么？[http://jsfiddle.net/rQP6g/2/](http://jsfiddle.net/rQP6g/2/)

```
<a href="www.google.com" >link</a>

<script>
var timeoutId = 0;
    $('a').mouseup(function() {
    timeoutId = setTimeout(function(e) {  
    e.preventDefault();
e.stopPropagation();
}, 1000);
}).bind('mouseup', function() {
clearTimeout(timeoutId);
});
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T22:02:34.130

这应该工作：http: [//jsfiddle.net/rQP6g/18/](http://jsfiddle.net/rQP6g/18/)

JS看起来如下：

```
var mousedownTime;

$('a').mousedown(function(e) {
    mousedownTime = new Date();
}).click(function(e) {
    // If the mouse has been hold down for more than 1000 milliseconds ( 1 sec. ), cancel the click
    if(Math.abs(new Date() - mousedownTime) > 1000)
        e.preventDefault();
});​ 
```

基本思想是捕获按下鼠标按钮的时间 - 然后，当释放时，触发点击事件，如果超过 1 秒，则计算它。自按下链接后已过去。如果是这种情况，点击事件被取消并且链接不会加载:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T22:03:53.233

这是你的答案：http: [//jsfiddle.net/rQP6g/19/](http://jsfiddle.net/rQP6g/19/)测试和工作

还有你的jQuery代码：

```
var startingTime, timeOut = 1000;
(function($) {
    $('a').bind('click', function(e) {
        e.preventDefault();
    }).bind('mousedown', function(e) {
        window.startingTime = +new Date();
    }).bind('mouseup', function (e) {
        console.log('Starting time: '+ window.startingTime);
        var currentTime = +new Date();
        console.log('Current time: '+ (+new Date()));
        var difference = currentTime - window.startingTime;
        console.log (difference);
        if (difference > timeOut) {
            console.log('You are too slow, nothing happens');
        } else {
            console.log($(this).attr('href'));
            window.location.href = $(this).attr('href');
        }
    });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T22:04:06.390

我会采用相反的方法 - 阻止一切，然后允许在阈值之前释放点击：

```
// set threshold in millisecs:
var threshold = 1000;

$('a').on('click',function(event){

    event.preventDefault();

    // inject current time in link element:
    $(this).attr('data-timestamp', new Date.getTime());

}, function(event){

    // check mousedown timestamp against mouseup timestamp:
    if( (new Date.getTime() - $(this).attr('data-timestamp') < threshold){

        window.location.href = $(this).attr('href');    

    }

});​​​​ 
```

# iphone - PhotoShop 将图层导出到文件名错误的文件

> ID：12450984
> 
> 赞同：0
> 
> 时间：2012-09-16T21:43:16.313
> 
> 标签：iphone, ios, export, photoshop, retina-display

我使用 Photoshop 脚本，将所有图层导出为 png 文件。

![脚本](../Images/f4ffc2a390ba6dad6d1965e9bf7299a4.png)

脚本成功完成后，保存的文件夹中的文件有奇怪的文件名，例如： ![文件名](../Images/9ebb41260898e533f9b00bf602031186.png)

UI-_0000_Background.png

UI-_0001s_0001_Input-Background.png

这是我的图层：

![莱耶斯](../Images/4f0e927eebc9cb8361a020d6bd9e0cdc.png)

你知道如何以什么格式保存文件：

%(前缀)%(层名)%(添加).png

喜欢 UI-Background@2x.png？

或者，如果您知道另一种方法如何从 Photoshop 中为 Retina 和非 Retina iPhone 显示器保存 png，您能描述一下吗？

谢谢！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:50:58.637

我确信这就是插件应该如何工作的。如果此插件有任何其他选项可以删除 0000 和下划线，您应该检查 Photoshop 菜单。作为解决方案，您可以使用 IrfanView 或类似软件使用正则表达式或特殊命令重命名文件，以便轻松删除下划线和 0000。

# php - 为什么在red hats openshift上无法安装wordpress的插件launcheffect？

> ID：12450985
> 
> 赞同：0
> 
> 时间：2012-09-16T21:43:24.380
> 
> 标签：php, wordpress, cloud, redhat, openshift

我正在尝试这个：我想在 openshift上安装[http://launcheffectapp.com/download/ 。](http://launcheffectapp.com/download/)

但是当我尝试在插件下上传 *.zip 文件时，我只得到：

> 从上传的文件安装插件：launcheffect_lite_2.2.zip
> 
> 打开包装……</p>
> 
> 安装插件...</p>
> 
> 无法安装该软件包。没有找到有效的插件。
> 
> 插件安装失败。

为什么这是不可能的？

我很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:07:09.173

您似乎已尝试将软件包安装为插件；它需要作为主题安装，请按照以下说明进行操作：

在您的 WordPress 管理员中，转到外观 > 主题。在该屏幕上，单击“安装主题”选项卡。在选项卡正下方的菜单中，单击“上传”。上传 ZIP 文件夹。完成后点击“激活”。Launch Effect 菜单应该作为左侧的最后一个菜单组出现。

我能够在我托管在 openshift 上的 wordpress 网站上成功安装主题。

```
Installing Theme from uploaded file: launcheffect_lite_2.2.zip
Unpacking the package...
Installing the theme...
Theme installed successfully. 
```

# java - 一种将共享资源分配给多个节点中的一个节点的分布式算法

> ID：12450987
> 
> 赞同：1
> 
> 时间：2012-09-16T21:43:32.110
> 
> 标签：java, networking, network-programming, distributed-computing, multicast

我尝试实现多播通信来分配一些资源。我为此使用[jGroups](http://www.jgroups.org/) ，所以我有可靠的多播和 FIFO-Ordering。通过这样做，我想意识到使用分布式解决方案，这意味着没有充当协调器的主节点。

每个节点都能够启动分发，因此有可能两个或多个节点同时启动分发。当一个节点收到一个分发消息时，它会回答这个问题。回答消息和来自初学者的消息之间没有区别。它仅包含有关资源名称（例如 resourceA）以及该节点是否能够处理它的信息。当 Member1 开始分发时，它将发送如下消息：

```
Member1, resourceA, OK 
```

Member2 没有该资源的空间并发送如下回复消息：

```
Member2, resourceA, NOT_OK 
```

在这种情况下很容易，因为现在 Member1 知道他可以获取资源 A。当多个节点能够处理资源时，其他属性将决定谁获取资源（例如，具有最高 ID 的成员）。

我的问题是：当两个或多个节点同时开始关于同一主题（resourceA）的分发时，如何处理它？

有没有人看到这样做的一些问题：Member1 和 Member2 同时开始分发。在这一点上，双方都在期待对方的回应。由于在响应消息或启动消息中没有区别这一事实，两者都认为他们刚刚收到的消息是应答者。因此 Member1 向多播组发送一个起始消息，而 Member2 向多播组发送一个起始消息（在接收到来自 Member1 的消息之前）。现在 Member1 正在接收来自 Member2 的启动消息，并认为这是响应。

通过保证每个节点每个主题只发送一条消息（作为启动器或响应），我会说即使有两个以上的节点，这样做也没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T23:02:11.543

根据您的描述，可以得出以下结论：

*   假设所有成员从一开始就在运行，一旦系统运行，将不会添加新成员，也不会删除任何成员
*   所有成员都知道系统中的成员总数

如果其中一个结论不正确（或两者都不正确），那么我看不出您的算法是如何工作的，因为无法知道所有成员何时都响应了启动消息并得出结论哪个成员具有最高 ID。

如果两个结论都是正确的，那么我认为算法的功能没有问题，并且您的方法似乎有效。然而，由此产生的系统对于失败或不响应的成员将是容易出错的。如果一个成员没有响应启动消息，那么您最终可能会遇到无法决定谁将获取资源的情况，因为它可能是也可能不是那个不响应的成员。

不幸的是，其中一位成员很可能在某个时候*不会*做出回应——尽管您没有提供任何有关正常运行时间要求的信息。为了避免仅仅因为一个成员没有响应而导致算法完全崩溃，您必须在算法中设计预防措施，例如通过添加超时并在成员没有响应时从“已知成员列表”中删除该成员及时。

但是即使有这样的内置容错能力，你也应该意识到，一个完全分布式的解决方案没有某种协调的主节点，根据定义，会遇到难以处理的情况。例如，在分布式环境中，网络问题可能导致一半网络看不到另一半的情况。由于没有协调主人得出任何最终结论，网络的两半都认为“他们了解世界”并将继续做他们的事情。为了决定如何解决这个问题，您必须更清楚自己的要求并更好地了解可能的故障情况......

# windows - 为什么 Strawberry Perl 不调用我的 DllMain？

> ID：12450997
> 
> 赞同：2
> 
> 时间：2012-09-16T21:44:59.260
> 
> 标签：windows, perl, mingw, strawberry-perl

我正在尝试将[Win32::Setupsup 移植](https://metacpan.org/module/Win32%3a%3aSetupsup)到它使用的 Strawberry Perl 和 MinGW GCC，这是一个相当粗糙的基于 C++ 的旧模块，旨在与 Visual C++ 一起使用。除了一件事外，我几乎可以正常工作。

模块的 C++ 部分有一个`DllMain`函数，它运行一些初始化代码`DLL_PROCESS_ATTACH`和清理代码`DLL_PROCESS_DETACH`。当我用 Visual C++ 编译模块时，效果很好。但是当我使用 Strawberry Perl 使用的 MinGW GCC 编译它时，`DllMain`它永远不会被调用。

我认为问题只是`DllMain`在使用`gcc`. 但我不知道如何解决这个问题。

正在进行的工作在[我的 Win32::Setupsup 的 GitHub 存储库中](http://github.com/madsen/win32-setupsup)。虽然我使用[Dist::Zilla](http://dzil.org)来管理发布，但您实际上并不需要`dzil`对其进行测试。只需克隆 repo`perl Makefile.PL`和`dmake test`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:56:35.870

查看您的代码，您有

```
BOOL WINAPI DllMain(HINSTANCE hInstance, DWORD reason, LPVOID reserved); 
```

在 C++ 源文件中。因为这是一个 C++ 函数，所以 G++ 将名称修改为类似 的名称`__Z7DllMainP11HINSTANCE__mPv@12`，并且在加载库时无法找到它。

要解决这个问题，`extern "C"`请在函数声明中使用 ,

```
extern "C"
BOOL WINAPI DllMain(HINSTANCE hInstance, DWORD reason, LPVOID reserved); 
```

或在一个街区

```
extern "C" {
BOOL WINAPI DllMain(HINSTANCE hInstance, DWORD reason, LPVOID reserved);
} 
```

确保为函数提供 C 链接（避免 C++ 名称修改）。

# php - 从 curl 请求或字符串中获取文件扩展名

> ID：12450998
> 
> 赞同：0
> 
> 时间：2012-09-16T21:45:09.620
> 
> 标签：php, regex, curl

我有一个 cURL 请求：

```
$ch = curl_init('http://domain.com/file.ext');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FAILONERROR, true);

$response = curl_exec($ch);
$contentType = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);
$extension = '?' // How? 
```

并且想根据内容类型获取 URL 的扩展名，但是如何？

我已经阅读了一些正则表达式，但是，如果我的文件有多个点或扩展名，例如：

```
file.renamed.with.multiple.dots.png
file.zip.rar 
```

而且，如果我有一个类似的文件`file.ext`并且知道内容类型是`image/png`，但扩展名不是`png`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:55:21.677

如果您想获取文件名，请检查此帖子。 [卷曲以在以下位置后获取远程文件名](https://stackoverflow.com/questions/6881034/curl-to-grab-remote-filename-after-following-location)

如果文件中有多个点，您可以简单地使用explode函数获取扩展名

例如

```
$filename="this.is.the.file.png";
$filename_arr = explode(".", $filename);
$count_of_elements = count($filename_arr);
$file_extension = $filename_arr[$count_of_elements - 1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:53:55.950

我已经完成了`pathinfo($url)`。我以为`pathinfo`只是`path`，但不是..

```
$url = 'http://domain.com/file.ext';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FAILONERROR, true);

$response = curl_exec($ch);
$contentType = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);
$pathinfo = pathinfo($url);
$extension = $pathinfo['extension']; 
```

# android - FileOutputStream 在尝试 FileOutputStream(externalStorage.getAbsolutePath()); 时导致异常；

> ID：12450999
> 
> 赞同：1
> 
> 时间：2012-09-16T21:45:11.413
> 
> 标签：android, sd-card

我正在尝试编写一个简单的测试方法将文件从 Asset 文件夹复制到 sd 卡。当我尝试打开 sd 卡上的文件时，它崩溃了。

代码

```
 try {
              // POpne file from asset
               AssetManager assetManager = getAssets();
               InputStream inputStream;
               inputStream = assetManager.open("test");

               // open output folder
               File externalStorage = Environment.getExternalStorageDirectory();

                       // CRASHES HERE
               out = new FileOutputStream(  externalStorage.getAbsolutePath()  );
               int c;

            while ((c =  inputStream.read()) != -1) {
                out.write(c);
            }
        } catch( Exception e) {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T00:31:39.517

看来您忘记在 AndroidManifest.xml 中提及文件访问权限，只需在您的 AndroidManifest.xml 中写入以下权限即可

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```