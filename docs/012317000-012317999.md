# StackOverflow 问答 12317000-12317999

# ruby-on-rails - ActionMailer 将局部变量传递给 erb 模板

> ID：12317000
> 
> 赞同：17
> 
> 时间：2012-09-07T11:14:17.420
> 
> 标签：ruby-on-rails, ruby, actionmailer, erb, local-variables

我知道我可以定义实例变量，例如：

```
def user_register(username, email)
  @username = username
  @email = email

  mail(:to => email, :subject => "Welcome!", :template_name => "reg_#{I18n.locale}")
end 
```

但是，有没有办法使用**局部**变量，就像将*:locals*传递给局部变量一样？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-09-17T07:07:26.243

正如 ronalchn 指出的那样，这是`render`that has `:locals`，而不是`mail`方法。因此，您需要直接访问该`render`方法才能传递当地人。

您可以给 the 一个块`mail`，这样就可以访问该`render`方法，如下所示：

```
mail(to: "your_mail@example.com", subject: "Test passing locals to view from mailer") do |format|
  format.html {
    render locals: { recipient_name: "John D." }
  }
end 
```

现在你应该可以使用`"Hello <%= recipient_name %>"`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-07T12:14:17.577

`mail`该方法中可用的所有选项都可以在[http://api.rubyonrails.org/classes/ActionMailer/Base.html#method-i-mail](http://api.rubyonrails.org/classes/ActionMailer/Base.html#method-i-mail)找到。

我们知道`render`有一个`:locals`选择。但是我们可以看到没有`:locals`可用的选项`mail`。因此，不，没有比使用实例变量更好的方法（除非你想使用像全局变量或持久数据库对象这样可怕的东西——**不要这样做**）。

实例变量是您要使用的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-03T12:08:50.213

在 Rails 5 中，您只需`@`在方法中使用定义实例变量。`locals`为此，您不再有权访问该物业。

```
class UserMailer < ApplicationMailer

  def welcome_email(user_id:, to_email:, user_full_name:, token:)    
    # Mail template variables
    @user = User.find_by(id: user_id)
    @token = token

    mail(:to => to_email,
       :subject => MAILER_SUBJECTS_WELCOME,
       :template_path => "user_mailer",
       :template_name => "welcome_email")
  end
end 
```

`<%= @user %>`然后，您可以使用和在您的电子邮件模板中访问它们`<%= @token %>`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-16T22:29:10.730

您实际上**可以**将 locals 选项与邮件一起使用，只是有点令人困惑和不一致。

使用`:locals`后，您可以使用实例变量在邮件模板中访问这些本地变量，例如

```
:locals => { :name => 'Jane' } 
```

然后在模板中

```
Dear <%= @name %>, 
```

# trac - trac：通过 style.css 修改路线图不起作用

> ID：12317001
> 
> 赞同：0
> 
> 时间：2012-09-07T11:14:18.793
> 
> 标签：trac

我想在 trac 路线图进度条上添加新组。为此，我修改了 trac.ini 文件：

```
# Definition of an 'rejected' group:                                 
rejected = rejected
rejected.order = 2
rejected.css_class = my
rejected.label = rejected 
```

我已经关联到 css_class 属性值 my.

接下来我只用一行创建了 style.css 文件：

```
table.progress td.my { background: blue; } 
```

读取文件 style.css 但未应用颜色。当我改回默认值时，即

```
rejected.css_class = new 
```

进度条已更新并按预期显示黄色。但是，当我使用时它不显示

```
rejected.css_class = my 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:28:49.077

请记住，CSS 样式将根据遇到的顺序相互覆盖。该页面可能正在正确加载您的自定义样式，但如果在您的 style.css*之后*加载了另一个样式表并且该样式表包含与您的样式冲突的任何样式，则后面的样式表将覆盖您的样式表。仔细检查您的自定义样式表是否已包含在内，并且没有被另一个样式表静默覆盖（​​我发现 Firefox 的 Firebug 插件有助于追踪此类问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:33:56.133

首先，作为参考，有关该主题的权威文档[在 trac.edgewall.org 的](http://trac.edgewall.org/wiki/TracRoadmapCustomGroups)wiki 中。

现在，您是否尝试过使用其他颜色表达式，例如常见的十六进制值，即`#BAE0BA`（绿色 Trac 默认为关闭）？您甚至可以尝试为键设置完整范围的值，`background`例如`none repeat scroll 0 0 #BAE0BA`.

# javascript - 像 jQuery.extend() 但独立的东西？

> ID：12317003
> 
> 赞同：15
> 
> 时间：2012-09-07T11:14:28.557
> 
> 标签：javascript

我正在寻找一种将两个配置对象合并在一起的方法，例如：

```
var developmentConfig = {
  url: "localhost",
  port: 80
};

var productionConfig = {
  url: "example.com"
};

var config = isDevelopment ? developmentConfig : jQuery.extend(developmentConfig, productionConfig); 
```

但是，这是一个 Node.js 应用程序，我不想包含 jQuery，我正在寻找类似但独立的东西。我知道我可以自己写一些类似的东西，但我宁愿使用经过测试和证明的东西（有边缘情况，配置对象使用更丰富的层次结构时会出现复杂情况等）

**编辑**：简单的迭代是不够的，因为它不处理层次结构。Underscore 的`extend`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-07T11:17:13.843

如果您只需要扩展，那么用几行代码编写它就很简单了。如果你想要递归扩展，如果你想要有循环结构、具有复杂原型链的对象等，那么完全通用地做到这一点是很棘手的。如果它只是一些嵌套的普通对象，那么这应该可以工作：

```
function extend (target, source) {
  target = target || {};
  for (var prop in source) {
    if (typeof source[prop] === 'object') {
      target[prop] = extend(target[prop], source[prop]);
    } else {
      target[prop] = source[prop];
    }
  }
  return target;
} 
```

如果您正在寻找一个轻量级库来执行此操作（由于上面列出的原因，减去递归）和 javascript 未提供的其他类似功能，请查看[下划线](http://underscorejs.org)，它也可以通过 NPM 用于节点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T13:08:36.310

另一个简单的独立功能示例，为未来的朝圣者提供了一个简单的独立功能示例，可防止不同类型的属性合并：

```
function extend(obj) {
    Array.prototype.slice.call(arguments, 1).forEach(function(source) {
        if (source) {
            for (var prop in source) {
                if (source[prop].constructor === Object) {
                    if (!obj[prop] || obj[prop].constructor === Object) {
                        obj[prop] = obj[prop] || {};
                        extend(obj[prop], source[prop]);
                    } else {
                        obj[prop] = source[prop];
                    }
                } else {
                    obj[prop] = source[prop];
                }
            }
        }
    });
    return obj;
} 
```

用法：

```
extend({ name:'Maria', address:{ city:'Moscow', street:'Lenina str, 52' } }, { name:'Marianna', address:{ zip:1200003 }})
=> { name:'Marianna', address:{ city:'Moscow', street:'Lenina str, 52', zip:1200003 } } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-13T21:07:35.807

此解决方案创建一个**新对象**并能够处理**多个对象**。

此外，它是**递归**的，您可以选择**要****覆盖 Values**和**Objects**的天气。

```
 function extendObjects() {

        var newObject        = {};
        var overwriteValues  = false;
        var overwriteObjects = false;

        for ( var indexArgument = 0; indexArgument < arguments.length; indexArgument++ ) {

            if ( typeof arguments[indexArgument] !== 'object' ) {

                if ( arguments[indexArgument] == 'overwriteValues_True' ) {

                    overwriteValues = true;            
                } else if ( arguments[indexArgument] == 'overwriteValues_False' ) {

                    overwriteValues = false;                             
                } else if ( arguments[indexArgument] == 'overwriteObjects_True' ) {

                    overwriteObjects = true;     
                } else if ( arguments[indexArgument] == 'overwriteObjects_False' ) {

                    overwriteObjects = false; 
                }

            } else {

                extendObject( arguments[indexArgument], newObject, overwriteValues, overwriteObjects );
            }

        }

        function extendObject( object, extendedObject, overwriteValues, overwriteObjects ) {

            for ( var indexObject in object ) {

                if ( typeof object[indexObject] === 'object' ) {

                    if ( typeof extendedObject[indexObject] === "undefined" || overwriteObjects ) {
                        extendedObject[indexObject] = object[indexObject];
                    }

                    extendObject( object[indexObject], extendedObject[indexObject], overwriteValues, overwriteObjects );

                } else {

                    if ( typeof extendedObject[indexObject] === "undefined" || overwriteValues ) {
                        extendedObject[indexObject] = object[indexObject];
                    }

                }

            }     

            return extendedObject;

        }

        return newObject;
    }

    var object1           = { a : 1, b : 2, testArr : [888, { innArr : 1 }, 777 ], data : { e : 12, c : { lol : 1 }, rofl : { O : 3 } } };
    var object2           = { a : 6, b : 9, data : { a : 17, b : 18, e : 13, rofl : { O : 99, copter : { mao : 1 } } }, hexa : { tetra : 66 } };
    var object3           = { f : 13, g : 666, a : 333, data : { c : { xD : 45 } }, testArr : [888, { innArr : 3 }, 555 ]  };

    var newExtendedObject = extendObjects( 'overwriteValues_False', 'overwriteObjects_False', object1, object2, object3 ); 
```

**newExtendedObject 的内容：**

```
{"a":1,"b":2,"testArr":[888,{"innArr":1},777],"data":{"e":12,"c":{"lol":1,"xD":45},"rofl":{"O":3,"copter":{"mao":1}},"a":17,"b":18},"hexa":{"tetra":66},"f":13,"g":666} 
```

小提琴：http: [//jsfiddle.net/o0gb2umb/](http://jsfiddle.net/o0gb2umb/)

# template-engine - Jade 中的 li #{variable} 和 li= 变量有什么区别？

> ID：12317004
> 
> 赞同：1
> 
> 时间：2012-09-07T11:14:30.193
> 
> 标签：template-engine, pug, templating

我在玩[Jade Template Syntax](http://naltatis.github.com/jade-syntax-docs)并进入这个（从文档稍微修改）：

```
ul
  for book in books
    li= book
  else
    li sorry, no books!

{"books": ["First"]} 
```

我也可以打印“First”：

```
li #{book} 
```

`#{book}`那么，使用和 和有什么区别`li= book`？

**编辑**downvoter：与其在不给我们解释的情况下投票，不如留下评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T06:50:43.253

区别只是html中输出的区别。但是你是 100% 正确的，差别很小。`book`是变量，`#{book}`是变量中包含的文本。

`#{book}`: 将输出变量 book 中包含的文本，它是**First** only。

`li= book`: 将变量内容输出到`li`语句中`<li>First</li>`

因此，`li= book`等同于`li #{book}`并将输出`<li>First</li>`

*你甚至可以多玩一点：*

`h1= book`或`h1 #{book}`：将输出`<h1>First</h1>`

`h2= book`或`h2 #{book}`：将输出`<h2>First</h2>`

# wcf - 耗时的 WCF 服务调用会阻止其他 WCF 服务调用。

> ID：12317011
> 
> 赞同：0
> 
> 时间：2012-09-07T11:14:40.057
> 
> 标签：wcf, silverlight, web-services, wcf-data-services

我在 Silverlight 5 应用程序中使用 WCF 服务。

在我的一个服务电话中，我正在做一项耗时的工作。完成该事件需要 1 或 2 分钟。我没有用繁忙的指示器阻塞 UI，因此用户仍然可以与应用程序交互。

问题是当我进行第一次服务调用时，它会执行一些耗时的操作。当用户加载其他一些服务时，我的第二个服务调用在第一个服务完成之前不会被处理。

如何在单独的线程中执行耗时的服务调用以避免其他调用等待此服务完成？

网络服务代码

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class TestService
{[OperationContract]
    public bool PerformFileScan(int fileID)
    {
    //Time Consuming Process
    }
} 
```

CS

```
client.PerformFileScanAsnc(docId);
client.PerformFileScanCompleted += new EventHandler<.PerformFileScanCompletedEventArgs>(client_PerformFileScanCompleted); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:23:57.057

你有两个选择：

1.  在服务器端使您的调用异步。您可以使用 TPL 并编写类似的内容`Task.Factory.StartNew(...)`
2.  `ServiceBehavior`您可以使用属性装饰您的服务实现并将其设置`ConcurrencyMode`为`Multiple`：

    ```
    [ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]    
    public class YourService
    {

    } 
    ```

然后 wcf 将并行安排对您的服务的调用。但是你必须确保你的服务代码是线程安全的！

# continuous-integration - 使用持续集成部署到虚拟机以运行集成测试

> ID：12317013
> 
> 赞同：9
> 
> 时间：2012-09-07T11:14:41.950
> 
> 标签：continuous-integration, teamcity, virtualization

有没有人有任何设置 CI 服务器（首选团队城市）来管理虚拟机的创建、将包部署到机器、将数据库设置为已知配置然后运行集成测试的经验。拆掉整个东西，然后向Team city报告测试状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T15:40:50.677

我们做这样的事情，我们有三种类型的测试。我相信你知道的单元测试，但我们也运行了一些验收测试和集成测试，后者是相关的。

在我们的集成测试中，我们针对我们的 QA 环境运行了一系列 WatiN 测试，已知该环境已经在其上运行，这些通常在 TeamCity 对 QA 环境运行部署构建之后运行。这些测试对我们所有的外部第三方进行了全面集成。

您可能更感兴趣的是我们的验收测试，但请注意我们不会启动虚拟环境（稍后会详细介绍）。我们进行了一系列验收测试，在他们自己的应用程序域中启动所有服务，并使用 Visual Studio 数据库项目部署数据库。因为这些是验收测试，所以所有第三方接口都被模拟了。由于服务是在进程中启动的，最后唯一需要清理的是数据库。

这对我们有用，但我一直在考虑在不进行集成测试的情况下将其提升到一个新的水平，并启动一个看起来与我们的实时环境完全一样的虚拟环境，直至域名和 IP 地址，这是完全可行的，但将耗时做，但将取决于您计划使用的虚拟环境的风格。

这是一个关于如何使用 MSBuild 启动 Hyper-V 服务器的已回答 SO 问题，但我确信还有其他示例使用 Ant/Nant/Rake 进行 Hyper-V/VMWare 等。

[如何使用 MSBuild 和 MS 虚拟服务器和/或 Hyper-V 服务器虚拟化创建虚拟机作为构建过程的一部分？](https://stackoverflow.com/questions/11720/how-can-i-create-virtual-machines-as-part-of-a-build-process-using-msbuild-and-m)

# abap - 从另一个 itab 填充 itab 值

> ID：12317016
> 
> 赞同：1
> 
> 时间：2012-09-07T11:14:50.903
> 
> 标签：abap, internal-tables

我有一个内部表`itab`，其中有一些行，其中一个组件`matnr`为空。我想检查`palet`内部表的列并从表`matnr`中获取，然后将内部表的列更改为新值。这是一个摘要；`palet``zlldet``matnr``matnr`

`itab`桌子：

```
+-------+-------+-----------+
| palet | matnr | something |
+-------+-------+-----------+
|  1234 | null  | abc       |
|  1235 | null  | saa       |
|  1236 | null  | ssd       |
+-------+-------+-----------+ 
```

因此，我将检查表中的`palet`列`zlldet`并找到该`matnr`行的值。新`itab`值应为：

```
+-------+--------+-----------+
| palet | matnr  | something |
+-------+--------+-----------+
|  1234 | 543213 | abc       |
|  1235 | 988876 | saa       |
|  1236 | 344545 | ssd       |
+-------+--------+-----------+ 
```

* * *

我试过的：

```
LOOP AT itab.
  SELECT SINGLE matnr INTO itab-matnr
    FROM zlldet WHERE palet = itab-palet.
  ENDIF.
ENDLOOP. 
```

我正在尝试更改第二行中的值。我知道这是错误的，我应该使用一些`MODIFY`声明，但我不确定如何。

**编辑：**

这是完整的代码：

```
REPORT zwps0510 MESSAGE-ID zc LINE-SIZE 255 NO STANDARD PAGE HEADING.
TABLES: zzllog, zzldet, marc, makt.
DATA: BEGIN OF itab OCCURS 0.
    INCLUDE STRUCTURE zzllog.
DATA: END OF itab.

DATA: adet TYPE p.
*/ paket numaraları
SELECT-OPTIONS: spalet FOR zzllog-palet.      "/paket no
SELECT-OPTIONS: spaleta FOR zzllog-paleta.    "/paketnoa
SELECT-OPTIONS: spaletb FOR zzllog-paletb.    "/paketnob
SELECTION-SCREEN SKIP 1.
*/ paketle ilgili bilgiler
SELECT-OPTIONS: sdispo FOR marc-dispo.
SELECT-OPTIONS: smatnr FOR zzllog-matnr.
SELECT-OPTIONS: sharkod FOR zzllog-harkod.    "/logtaki işlem kodu
*SELECT-OPTIONS: stelf1 FOR zzllog-telf1.
SELECT-OPTIONS: starih FOR zzllog-tarih.
SELECT-OPTIONS: susr FOR zzllog-usr.
SELECT-OPTIONS: saufnr FOR zzllog-aufnr.
SELECTION-SCREEN SKIP 1.
*/ depo adres bilgileri
SELECT-OPTIONS: sflgnum FOR zzllog-flgnum.    "/kaynak depo no
SELECT-OPTIONS: sflgtyp FOR zzllog-flgtyp.    "/kaynak depo tipi
SELECT-OPTIONS: sflgpla FOR zzllog-flgpla.    "/kaynak depo numarası
SELECT-OPTIONS: stlgnum FOR zzllog-tlgnum.    "/hedef depo no
SELECT-OPTIONS: stlgtyp FOR zzllog-tlgtyp.    "/hedef depo tipi
SELECT-OPTIONS: stlgpla FOR zzllog-tlgpla.    "/hedef depo numarası
SELECTION-SCREEN SKIP 1.
*/ Çıktıda gelecek kolonların seçimi
SELECTION-SCREEN BEGIN OF BLOCK uc WITH FRAME TITLE text-001.
PARAMETERS : tarih AS CHECKBOX DEFAULT 'X',
         saat AS CHECKBOX DEFAULT 'X',
         usr AS CHECKBOX DEFAULT 'X',
         palet AS CHECKBOX DEFAULT 'X',
         paleta AS CHECKBOX DEFAULT 'X',
         paletb AS CHECKBOX DEFAULT 'X',
         harkod AS CHECKBOX DEFAULT 'X',  "/ hareket kodu
         matnr AS CHECKBOX DEFAULT 'X',
         menge AS CHECKBOX DEFAULT 'X',
         sebep AS CHECKBOX DEFAULT 'X',  "/ sipariş/red
         aufnr AS CHECKBOX DEFAULT 'X',  "/sm.siparişi
         ref2 AS CHECKBOX DEFAULT 'X',
         paufnr AS CHECKBOX DEFAULT 'X', "/enj.siparişi
         flgnum AS CHECKBOX DEFAULT 'X', "/from depo...
         flgtyp AS CHECKBOX DEFAULT 'X',
         flgpla AS CHECKBOX DEFAULT 'X',
         tlgnum AS CHECKBOX DEFAULT 'X', "/ to depo...
         tlgtyp AS CHECKBOX DEFAULT 'X',
         tlgpla AS CHECKBOX DEFAULT 'X'.
SELECTION-SCREEN END OF BLOCK uc.
*
TOP-OF-PAGE.
   PERFORM baslik.
*
START-OF-SELECTION.
  PERFORM prepare_itab.
  PERFORM write_itab.
**
FORM prepare_itab.
*/ Paketle ilgili tüm geçmiş hareketler log tablosundan okunur
  SELECT * INTO CORRESPONDING FIELDS OF TABLE itab
      FROM zzllog WHERE palet IN spalet
                    AND paleta IN spaleta
                    AND paletb IN spaletb
                    AND matnr IN smatnr
                    AND harkod IN sharkod
                    AND tarih IN starih
                    AND flgnum IN sflgnum
                    AND flgtyp IN sflgtyp
                    AND flgpla IN sflgpla
                    AND tlgnum IN stlgnum
                    AND tlgtyp IN stlgtyp
                    AND tlgpla IN stlgpla
                    AND aufnr IN saufnr
                    AND usr IN susr.
  IF sdispo[] IS NOT INITIAL.
    LOOP AT itab.
      SELECT SINGLE dispo INTO marc-dispo
                FROM marc WHERE matnr = itab-matnr
                            AND werks = '3001'
                            AND dispo IN sdispo.
      IF sy-subrc <> 0.
        DELETE itab.
      ENDIF.
    ENDLOOP.
  ENDIF.

  DESCRIBE TABLE itab LINES adet.
*/ tüm hareketler tarih ve saate göre sıralanır
 SORT itab BY tarih saat.
 WRITE:/ 'ADET: ', adet.
 ULINE.
   ENDFORM. 
```

所以，我想要做的正是：如果`sharkod`包含`D`,`zzldet`应该检查`matnr`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:37:35.720

不要使用`MODIFY`，而是使用字段符号：

```
DATA: lt_materials TYPE TABLE OF zzllog.
FIELD-SYMBOLS: <ls_line> TYPE zzllog.

* other code with strange comments :-)

LOOP AT lt_materials ASSIGNING <ls_line> WHERE matnr IS INITIAL.
  SELECT SINGLE MATNR
    FROM zlldet
    INTO <ls_line>-matnr
    WHERE palet = <ls_line>-palet.
ENDLOOP. 
```

这只是正确语法的示例。在实际程序中执行此操作不是一个好主意，因为您很有可能会使用数千个请求访问数据库，并且可能会降低性能。最好将`PALET`没有的数字预选`MATNR`到单独的表中，然后在单个查询中`FOR ALL ENTRIES IN`读取所有s。`MATNR`

编辑：添加类型名称。顺便说一句，您声明内部表的方式有些过时了......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:54:58.960

当您想使用修改而不是字段符号来执行此操作时，这将是正确的解决方案：

```
LOOP AT itab.
  SELECT SINGLE matnr INTO itab-matnr
    FROM zlldet WHERE palet = itab-palet.
  MODIFY itab.
ENDLOOP. 
```

您将 itab 声明为带有标题行的表（顺便说一句，已弃用）。这意味着您有一个表格 itab 和一个结构 itab。在哪种情况下使用哪个取决于上下文，并且某些命令（例如 LOOP AT 和 MODIFY）同时使用两者。这将是带有工作区而不是标题行的代码。它更具可读性。

```
DATA itab TYPE TABLE OF [something].
DATA wa TYPE [something].

LOOP AT itab INTO wa.  " copies each line into wa
  SELECT SINGLE matnr INTO wa-matnr
    FROM zlldet WHERE palet = itab-palet.
  MODIFY itab FROM wa.  " writes the changed line back to the table
ENDLOOP. 
```

您还可以使用带有字段符号 vwegert 描述的解决方案。字段符号是指向表格行的指针。对字段符号的任何更改都将自动写回表中，因此在这种情况下您不需要 MODIFY。它也更快，尤其是对于非常宽的表，因为不需要复制数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:40:35.583

您还可以避免每次在循环内使用 select 语句。相反，您可以尝试使用 Range 表并在循环之前只使用一次 select 语句，因为它可以提高性能。

定义用户定义的结构并声明变量

```
types: begin of ty_p_m,
         palet type zlldet-palet,
         matnr type zlldet-matnr,
       end of ty_p_m.

data: r_palet type range table of zlldet-palet,
      r_line_palet like line of r_palet,
      i_p_matnr type standard table of ty_p_m,
      wa_p_m type ty_p_m.

field-symbols: <fs> type wa_p_m. 
```

填写下一步要在选择查询中使用的范围表。

```
r_line_palet-sign = 'I'.
r_line_palet-option = 'EQ'.

loop at itab into wa.
r_line_palet-low = wa-palet.
append  r_line_palet to r_palet.
endloop. 
```

现在通过引用范围表来使用 select 语句并获取声明的内部表中的数据。

```
select palet matnr from zlldet into i_p_matnr
where palet in r_palet. 
```

现在循环声明的内部表。在里面读取带有传入值的内部表，并使用字段符号而不是修改语句修改表本身。

```
loop at i_p_matnr into wa_p_matnr.
read table itab with key palet = wa_p_matnr-palet assigning <fs>.
if sy-subrc = 0.
<fs>-matnr = wa_p_matnr-matnr.
endif.
clear wa_p_matnr.
endloop. 
```

# yii - 如何在 yii 用户模型中使电子邮件独一无二

> ID：12317017
> 
> 赞同：6
> 
> 时间：2012-09-07T11:15:07.573
> 
> 标签：yii

验证码是

```
 return array( 
         array('firstname, lastname, confirm_email, education, email, password, occupation,location , birthdate, interest,gender,created, modified', 'required'),

                     array('email', 'email'),
                     array('password', 'length', 'max'=>20, 'min' => 5,'message' => "Incorrect fi (length between 5 and 20 characters)."),
                     array('firstname', 'match', 'pattern' => '/^[A-Za-z0-9_]+$/u','message' => UserModule::t("Incorrect symbols (A-z0-9).")),
                     array('email', 'unique'),
    ); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-04T07:51:42.913

您可以通过下面给出的规则使您的电子邮件在 yii 用户模型中唯一。

```
public function rules() {
   return array(
     ...
     array('email', 'email'),
     array('email', 'unique', 'className' => 'User',
        'attributeName' => 'email',
        'message'=>'This Email is already in use'),
     ...
); } 
```

这里 className 是您的用户模型类的名称，attributeName 是您的数据库电子邮件字段名称。

您也可以查看以下链接。

[http://www.yiiframework.com/forum/index.php/topic/32786-creating-my-own-model-cmodel-not-cactiverecord/](http://www.yiiframework.com/forum/index.php/topic/32786-creating-my-own-model-cmodel-not-cactiverecord/)

谢谢

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T05:17:24.323

```
public function rules()
{
    return array(
        ...
        array('email', 'email'),
        array('email', 'unique'),
        ...
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:47:21.253

尝试这个：

根据您给定的代码，看起来还可以

您可以使用以下有关验证的 url 进行验证：

[http://www.yiiframework.com/doc/guide/1.1/en/form.model#declaring-validation-rules](http://www.yiiframework.com/doc/guide/1.1/en/form.model#declaring-validation-rules)

# c# - C#：如何反映一个类以获取其预定义数据类型的属性

> ID：12317019
> 
> 赞同：0
> 
> 时间：2012-09-07T11:15:12.347
> 
> 标签：c#

我有一个“员工”类，它有以下成员：

```
//[membername,type]
[Name,string]
[DOB,DateTime]
[DateOfHire,DateTime]
[TerminationDate,DateTime?]
[AddressChanges,List<string>] 
```

在这里，我需要反映并获取除集合类型之外的所有属性。

在此示例中，除了 AddressChanges，我需要获取所有成员。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:22:02.173

根据你所说的“收藏”的意思，这样的事情会起作用：

```
var notCollectionProperties =
    typeof(Employee)
        .GetProperties(BindingFlags.Public|BindingFlags.Instance)
        .Where(prop => !typeof(ICollection).IsAssignableFrom(prop.PropertyType)); 
```

更一般地，您可能想要使用`IEnumerable`而不是`ICollection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:18:30.583

使用反射枚举属性并排除具有集合类型的属性。例如：

```
Type myType = typeof(TargetClass);
foreach(PropertyInfo propertyInfo in myType.GetProperties())
{
    if(propertyInfo.PropertyType is ...)
    {
        // Handle cases 
    }    
} 
```

# c# - 如果 StringBuilder 是可变的，那么为什么 StringBuilder 方法返回一个 StringBuilder 对象？

> ID：12317021
> 
> 赞同：12
> 
> 时间：2012-09-07T11:15:17.327
> 
> 标签：c#, .net, vb.net

我们都知道`strings`是不可变的，而 StringBuilder 是`mutable`. 正确的。那为什么它的方法返回一个`StringBuilder`对象。它们不应该都是 void 方法吗？

为什么这个

```
public StringBuilder Append(bool value) 
```

并不是

```
public void Append(bool value) 
```

任何解释使用它的例子都会很棒。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T11:16:42.893

它被称为[“流畅的界面”](http://en.wikipedia.org/wiki/Fluent_interface)。它允许您通过重复的点符号将调用链接在一起。

```
return new StringBuilder()
  .Append("Hello, ")
  .Append("world!")
  .ToString(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-07T11:17:20.617

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.90%29.aspx)：

> 大多数修改此类实例的方法都返回对同一实例的引用。由于返回了对实例的引用，因此您可以调用该引用的方法或属性。如果您想编写一个将**连续操作一个接一个地链接**起来的单个语句，这会很方便。

**示例**：

```
string user = new StringBuilder()
    .AppendFormat("Name: {0}", user.Name)
    .AppendLine()
    .AppendFormat("Email: {0}", user.Email)
    .AppendLine()
    .ToString(); 
```

这通常称为[fluent interface](http://en.wikipedia.org/wiki/Fluent_interface)。

# php - 使用 smarty 从字符串中去除空格

> ID：12317022
> 
> 赞同：5
> 
> 时间：2012-09-07T11:15:16.817
> 
> 标签：php, string, smarty, smarty3

我是新来的聪明人。

我想知道如何从 Smarty 中的给定字符串中删除所有空白字符？

我有一个像“这是我的字符串”这样的字符串。输出应该是“thisismystring”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-12T07:14:16.287

从[文档中](http://www.smarty.net/docs/en/language.modifier.replace.tpl)：

```
{$YourVariable|replace:' ':''} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T07:13:14.940

条带之间的任何内容，所有空格都将被删除。

```
 {strip}{/strip} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-15T11:19:17.570

您可以使用[`strip`修饰符](https://www.smarty.net/docsv2/en/language.modifier.strip.tpl)从变量（字符串）中去除空格，并将空字符串作为参数传递给它：

```
{$myVar|strip:""} 
```

# java - 有没有办法使用于显示相机馈送的表面视图的大小小于全屏？

> ID：12317024
> 
> 赞同：0
> 
> 时间：2012-09-07T11:15:29.777
> 
> 标签：java, android

我正在创建一个向图像添加帧的 Android 应用程序（想想那些在海滩上你把头伸进去的东西......），但我希望图像显示在持有相机馈送的表面视图的顶部，以便用户可以定位照片的主题。

我遇到的问题是相机馈送（表面视图）显示图像的任一侧。我想重新调整表面视图的大小以适合图像。图像的大小可能会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:40:18.163

我认为您喜欢在表面视图顶部有一些覆盖 - 这是通过这样的框架布局实现的：

[http://javaocr.svn.sourceforge.net/viewvc/javaocr/trunk/demos/sampler/res/layout/main.xml?revision=229&view=markup](http://javaocr.svn.sourceforge.net/viewvc/javaocr/trunk/demos/sampler/res/layout/main.xml?revision=229&view=markup)

您可以在叠加层中放置除其他表面视图之外的所有内容

# video - Red5 服务器 + Red5 录像机集成，用于视频录制/播放

> ID：12317030
> 
> 赞同：0
> 
> 时间：2012-09-07T11:16:08.187
> 
> 标签：video, red5, javacv

我正在用 Java 设置一个视频录制/播放应用程序，使用 Red5 作为媒体服务器。我使用 HDFVR 作为客户端，并且运行良好。但是，我也想尝试 red5-recorder，但我找不到任何将 red5-recorder 与 Red5 服务器一起使用的资源（即使在记录器站点上）。如果有人有任何好的链接/资源，请分享。谢谢。

编辑 - [Javacv](https://code.google.com/p/javacv/)是一个很好的开源项目，可以从网络摄像头捕获图像/视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:26:04.887

我猜他们的常见问题解答部分确实涵盖了所有内容？

[http://www.red5-recorder.com/faq.php](http://www.red5-recorder.com/faq.php)

您只需修改参数列表以指向您的 red5 应用程序。

# module - 使用 drupal_write_record 将提交的表单内容插入数据库

> ID：12317031
> 
> 赞同：1
> 
> 时间：2012-09-07T08:36:49.220
> 
> 标签：module, form-api, database

> **可能重复：**
> [使用 drupal_write_record 将提交的表单内容插入数据库](https://stackoverflow.com/questions/12313648/insert-submitted-form-content-to-db-using-drupal-write-record)

我是drupal的新手，我想做的是我的第一个模块，所以希望你能理解我。我创建了一个注册模块，并想通过**[drupal_write_record](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_write_record/6)**将其连接到数据库，但我不知道该怎么做。我从drupal网站上阅读了如何使用这种方法，但仍然无法做到。

你能帮我解决这个问题吗？

这是我的模块的样子：

```
function my_module_menu() {
$items = array();
$items['my_module/form'] = array(
    'title' => 'Contact Information',
    'description' => 'Contact Information',
    'page callback' => 'drupal_get_form',
    'access callback' => true,
    'weight' => '10',
    'page arguments' => array('my_module_form'),
    'access arguments' => array('access content'),
    'type' =>  MENU_NORMAL_ITEM,
);
$items['my_module/list/1'] = array(
    'title' => t('Contact list'),
    'page callback' => 'my_module_form_list_page',
    'page arguments' => array(1),
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK, 
);
return $items;
}
function my_module_perm() {
return array('access my_module content', 'access administration pages');
}

function my_module_help($path, $arg) {
$output = '';  //declare your output variable
switch ($path) {
case "admin/help#my_module":
    $output = '<p>'.  t("Displays information about site") .'</p>';
    break;
}
return $output;
}
function my_module_form($form_data) {
$form['contact_information'] = array(
    '#value' => variable_get('contact_form_information', t('Please fill in all fields.'))
);
$form['first'] = array(
    '#type' => 'textfield',
    '#title' => t('First name'),
    '#maxlength' => 20,
    '#required' => TRUE,
);
$form['last'] = array(
    '#type' => 'textfield',
    '#title' => t('Last name'),
    '#maxlength' => 20,
    '#required' => TRUE,
);
$form['street'] = array(
    '#type' => 'textfield',
    '#title' => t('Street Address'),
    '#required' => TRUE,
); 
$form['city'] = array(
    '#type' => 'textfield',
    '#title' => t('City'),
    '#required' => TRUE,
); 
$form['postal'] = array(
    '#type' => 'textfield',
    '#title' => t('Postal Code'),
); 
$form['state'] = array(
    '#type' => 'select',
    '#title' => t('State'),
    '#default_value' => variable_get('feed_item_length','chisinau'),
    '#options' => array(
    'chisinau' => t('Chisinau'), 
    'balti' => t('Balti'), 
    'cahul' => t('Cahul')),
); 
$form['phone'] = array(
    '#type' => 'textfield',
    '#title' => t('Business Phone'),
    '#required' => TRUE,
); 
$form['ext'] = array(
    '#type' => 'textfield',
    '#title' => t('ext'),
); 
$form['mobile'] = array(
    '#type' => 'textfield',
    '#title' => t('Mobile'),
    '#required' => TRUE,
); 
$form['home_phone'] = array(
    '#type' => 'textfield',
    '#title' => t('Home Phone'),
);
$form['email'] = array(
    '#type' => 'textfield',
    '#title' => t('Email'),
    '#required' => TRUE,
);
$form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Save'),
);
$form['clear'] = array(
    '#type' => 'submit',
    '#value' => t('Cancel'),
    '#validate' => array('my_module_my_form_clear'),
);
return $form;
}

function my_module_form_submit($form, &$form_data){
global $user;
    $data = array(
        'id' => $user->id,
        'first' => $form_data['values']['first'],
        'last' => $form_data['values']['last'],
        'street' => $form_data['values']['street'],
        'city' => $form_data['values']['city'],
        'postal' => $form_data['values']['postal'],
        'state' => $form_data['values']['state'],
        'phone' => $form_data['values']['phone'],
        'ext' => $form_data['values']['ext'],
        'mobile' => $form_data['values']['mobile'],
        'home_phone' => $form_data['values']['home_phone'],
        'email' => $form_data['values']['email'],
    );
drupal_write_record('my_module', $data ,'id');
drupal_set_message(t('Information has been saved to the database')); 
} 
```

**使用这种方法，但不是我需要的：**

```
function my_module_form_submit($form_id, &$form_data)  {
db_query("INSERT INTO my_module (id, first, last, street, city, postal, state, phone, ext, mobile, home_phone, email)
VALUES ('%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s')",
$form_data['values']['first'],
$form_data['values']['last'], 
$form_data['values']['street'],
$form_data['values']['city'],
$form_data['values']['postal'], 
$form_data['values']['state'],
$form_data['values']['phone'],
$form_data['values']['ext'], 
$form_data['values']['mobile'],
$form_data['values']['home_phone'],
$form_data['values']['email']); 
drupal_set_message(t('Information has been saved to the database')); 
} 
```

My_module.install 文件：

```
function my_module_install() {
  drupal_install_schema('my_module');
}

function my_module_uninstall() {
 drupal_uninstall_schema('my_module');
  } 

function my_module_schema(){
  $schema = array();
  $schema['my_module'] = array(
  'description' => 'My Module table.',
  'fields'=>array(  
  'id'=>array(  
  'type'=>'serial',  
  'unsigned'=>TRUE,  
  'not null'=>TRUE  
  ),  
  'first'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),  
  'last'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ), 
  'street'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  'city'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  'postal'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  'state'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  'phone'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  'ext'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ), 
  'mobile'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  'home_phone'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  'email'=>array(  
  'type'=>'varchar',  
  'length'=>255,  
  'default' => 'NULL',  
  'null'=>TRUE  
  ),
  ),  
   'primary key'=>array("id"), 
  );
  return $schema;
  } 
```

出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:01:46.550

的第三个参数`drupal_write_record`应该是主 ID 的数组。在您的情况下（如果字段 id 确实是主键。）应该是`array('id')`. 但是，由于我看不到整个 hook_schema 函数，我不能说您是否设置了主键？

您使用的是 Drupal 7 还是 Drupal 6？Drupal 6 还要求您`hook_install()`对`drupal_install_schema('my_module')`.

在此处阅读有关 drupal_write_record 的更多信息：[http](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_write_record/7) ://api.drupal.org/api/drupal/includes!common.inc/function/drupal_write_record/7 。

# python - 导入从命令行传递的任意数量的模块？（归结为“如何解开字符串？”）

> ID：12317036
> 
> 赞同：-2
> 
> 时间：2012-09-07T11:16:20.790
> 
> 标签：python, string, import, command-line-arguments

> **可能重复：**
> [Python 中的动态模块导入](https://stackoverflow.com/questions/301134/dynamic-module-import-in-python)

我需要一个允许用户从命令行导入多个模块的功能。因此，首先让我们设置允许用户将任意数量的参数传递到列表中的代码：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument("cmd", action="store", nargs='*')
args = parser.parse_args()
args_list = args.cmd 
```

我知道您可以使用以下语法导入任意数量的模块：

```
import sys, os, math 
```

所以现在我只需要找到一种方法来从`args_list`带有模块名称的字符串列表（）中解开每个元素的字符串，这样我就可以执行以下操作：

```
for el in args_list:
    import unstring(el) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:20:41.880

可能您想使用内置[`__import__`函数](http://docs.python.org/library/functions.html#__import__)，例如：

```
__import__(el, globals(), locals()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:25:25.560

用这个：

```
for el in args_list:
    globals()[el] = __import__(el, globals(), locals()) 
```

# ios - APNS 通知 TTL

> ID：12317037
> 
> 赞同：2
> 
> 时间：2012-09-07T11:16:23.000
> 
> 标签：ios, apple-push-notifications

我成功地使用 APNS 从 web 应用程序向在其设备上安装了配套 iOS 应用程序的用户发送通知。

现在，我正在寻找一种方法来为通知指定一种 TTL，这样用户就不会收到过时的信息。

这个[SO question](https://stackoverflow.com/questions/8608849/how-long-does-a-push-notification-sit-in-queue-before-being-removed)指出通知（至少每个用户的最后一个）在被删除之前会保留大约一个月，这对我来说太长了。

是否有解决方案来指定通知的 TTL 或撤回/删除以前发送的通知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-07T11:56:07.760

在[与 APN 通信中，](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html)它声明您可以为通知设置到期日期：

> 以秒 (UTC) 表示的 UNIX 纪元日期。此标头标识通知不再有效并且可以丢弃的日期。如果此值非零，APNs 将存储通知并尝试至少传递一次，如果第一次无法传递通知，则根据需要重复尝试。如果值为 0，则 APNs 将通知视为立即过期，并且不会存储通知或尝试重新发送通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:30:24.013

不要以为我们能做到。您可能可以发送带有通知负载的时间戳，并在收到通知后让应用程序检查它。这样，您的应用程序可以让用户知道它是否已过时。

# php - 以超级用户身份执行的脚本

> ID：12317038
> 
> 赞同：1
> 
> 时间：2012-09-07T11:16:30.133
> 
> 标签：php, admin, root

我如何从我的 PHP 脚本中判断它是否以超级用户权限执行？

如果它不像我那样被调用，`sudo php script.php`我可以抛出一个错误

```
if (!is_sudo()) {
  die('Please execute with sudo');
} 
```

我敢肯定有一个简单的方法来检查，但我只是还没有找到它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T11:18:00.487

您可以使用[posix_getuid()](http://de2.php.net/manual/en/function.posix-getuid.php)（0 是`root`）：

```
if (posix_getuid() != 0) {
    die('Please execute with sudo');
} 
```

正如@Dave Random 建议的那样：

```
function is_sudo () {
    return posix_getuid() === 0;
} 
```

# java - 如何使用 JDBC 从 Mysql 中检索正确编码的数据

> ID：12317039
> 
> 赞同：3
> 
> 时间：2012-09-07T11:16:31.847
> 
> 标签：java, mysql, jdbc, character-encoding, collation

当我使用 sql insert 将数据（包括法语字符）插入数据库时​​，它工作正常：

```
 CREATE TABLE Categories(code_interne_c varchar(100) primary key,
                           description    varchar(100));

   INSERT INTO Categories  VALUES ('01','Matières premières');
   INSERT INTO Categories  VALUES ('02','Articles de conditionnement');
   INSERT INTO Categories  VALUES ('03','Consommables production');
   INSERT INTO Categories  VALUES ('04','Produits de nettoyage');
   INSERT INTO Categories  VALUES ('05','Réactifs'); 
```

当我使用 mysql 命令行时，它也可以正常工作（如您所见，它是正常的和预期的输出）：

```
 mysql> select * from categories;
   +----------------+-------------------------------------------+
   | code_interne_c | description                               |
   +----------------+-------------------------------------------+
   | 01             | Matières premières                        |
   | 02             | Articles de conditionnement               |
   | 03             | Consommables production                   |
   | 04             | Produits de nettoyage                     |
   | 05             | Réactifs                                  |
   +----------------+-------------------------------------------+
   14 rows in set (0.00 sec) 
```

**但是当我使用jdbc**检索数据时 ：

```
public static String testreqchar(){
    try {
        Statement st = cx.createStatement();
        ResultSet rs = st.executeQuery("select * from categories");
        rs.next();
        return rs.getString(2)+"|| and  test French accent characters : é ô ê à è û ";
    } catch (SQLException ex) {
        Logger.getLogger(Methodes.class.getName()).log(Level.SEVERE, null, ex);
        return null;
    }
}
public static void main(String a[]) {

           System.out.println(testreqchar());
} 
```

这是我在 IDE 和接口中得到的输出：

```
 MatiŠres premiŠres|| and  test French accent characters : é ô ê à è û 
```

我不知道是什么问题。

```
 Mysql 5.5.27 set on UTF-8 as charset on Win server 2008 R2 French
   mysql-connector-java-5.1.21
   JDK 1.7 Running on win 7 pro French. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:32:35.617

放在`useUnicode=true&characterEncoding=UTF8`连接字符串的末尾。见样品，

```
 Connection conn = DriverManager.getConnection  
        ( "jdbc:mysql://localhost/bug_utf8?useUnicode=true&characterEncoding=UTF8" 
```

# javascript - box2dweb：墙壁不会反弹慢速物体

> ID：12317040
> 
> 赞同：4
> 
> 时间：2012-09-07T11:16:39.570
> 
> 标签：javascript, html, box2d

我在我的游戏中使用 box2dweb。我在一个圆圈周围定位了四个盒子，并给了这个圆圈一个初始速度。我预计圆圈会从墙上反弹，但在碰撞后圆圈会与墙壁平行移动。只有当圆圈移动缓慢时才会发生这种情况。一个圆圈最后总是停在墙上。我怎样才能让一个圈子表现得正确？下面的脚本显示了问题。

```
<!DOCTYPE HTML>
<html lang="ja-JP">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://jsdo.it/Kon/box2dweb/js"></script>
    <script type="text/javascript">

var Ball_Speed = 2.0;

var b2Vec2 = Box2D.Common.Math.b2Vec2;
var b2Body = Box2D.Dynamics.b2Body;
var b2World = Box2D.Dynamics.b2World;
var b2CircleShape = Box2D.Collision.Shapes.b2CircleShape;
var b2DebugDraw = Box2D.Dynamics.b2DebugDraw;

$(function(){    
    "use strict";
    var canvas = $("#canvas");
    canvas.css("width", 500);
    canvas.css("height", 500);
    canvas.get(0).width  = 500;
    canvas.get(0).height = 500;

    var world = new b2World(new b2Vec2(0, 0), true);

    var debugDraw = new b2DebugDraw();
    debugDraw.SetSprite(canvas.get(0).getContext("2d"));
    debugDraw.SetDrawScale(100);
    debugDraw.SetFillAlpha(0.9);
    debugDraw.SetLineThickness(1.0);
    debugDraw.SetFlags(b2DebugDraw.e_shapeBit | b2DebugDraw.e_jointBit);
    world.SetDebugDraw(debugDraw);

    var fixDef = new Box2D.Dynamics.b2FixtureDef;
    fixDef.restitution = 1;

    var bodyDef = new Box2D.Dynamics.b2BodyDef;
    bodyDef.linearDamping = 0.2;

    // Create Wall //////////////////////////////////////////////////////////////////
    function createWall(x, y, w, h){
        bodyDef.type = b2Body.b2_staticBody;
        bodyDef.position.x = x + w / 2;
        bodyDef.position.y = y + h / 2;
        fixDef.shape = new Box2D.Collision.Shapes.b2PolygonShape;
        fixDef.shape.SetAsBox(w / 2, h / 2);
        world.CreateBody(bodyDef).CreateFixture(fixDef);
    }    
    createWall(0, 0, 2, 0.1);
    createWall(0, 0, 0.1, 2);
    createWall(2, 0, 0.1, 2);
    createWall(0, 2, 2, 0.1);

    // Create Ball
    fixDef.shape = new b2CircleShape(0.2);
    bodyDef.type = b2Body.b2_dynamicBody;
    bodyDef.position = new b2Vec2(1.5, 1.0);
    bodyDef.linearVelocity = new b2Vec2(Ball_Speed, Ball_Speed);
    world.CreateBody(bodyDef).CreateFixture(fixDef);

    (function loop(){
        world.Step(1 / 60, 10, 10);
        world.DrawDebugData();
        world.ClearForces();
        setTimeout(loop, 15);
    })();
});    

    </script>
</head>
<body>
    <canvas id="canvas"></canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:12:53.507

尝试将 Box2D.Common.b2Settings.b2_velocityThreshold 的值更改为零。

[http://www.iforce2d.net/b2dtut/gotchas#slownorebound](http://www.iforce2d.net/b2dtut/gotchas#slownorebound)

# mysql - MySQL字符串设置和获取交集

> ID：12317042
> 
> 赞同：2
> 
> 时间：2012-09-07T11:16:43.783
> 
> 标签：mysql, sql, math, boolean, set

我有一个投影不好的数据库，它在“1,2,5,10”之类的文本列中有一个 ID 集。我需要得到以相同方式设置的两列的交集。我不喜欢使用 PHP 或其他脚本语言来做，我也不喜欢 MySQL 自定义函数。有没有办法得到逗号分隔符字符串给出的两组的交集？

其实我不需要有完整的交集，我只需要知道两组中是否有相同的数字。如果是，我需要有“1”，如果没有相同的数字，我需要有“0”。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:20:03.787

您可以通过`REGEXP`一些巧妙的替换来做到这一点。

认为应该这样做（免责声明：尚未对其进行广泛测试）：

```
SELECT col1,
       col2,
       CONCAT('(', REPLACE(col2, ',', '(\\,|$)|'), '(\\,|$))') AS regex,
       col1 REGEXP CONCAT('(', REPLACE(col2, ',', '(\\,|$)|'), '(\\,|$))') AS intersect
FROM tbl 
```

见[http://sqlfiddle.com/#!2/7b86f/3](http://sqlfiddle.com/#!2/7b86f/3)

解释一下：这将转换`col2`为正则表达式以匹配`col1`. 该`(\,|$)`位与逗号或字符串结尾匹配。希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T19:33:38.163

Steve 的代码并非在所有情况下都有效。例如，当一个数字可以在另一个数字中找到时，它不起作用。插入 tbl (col1, col2) 值 ('60,61,64,68,73', '14,16,17,18,1'); 稍加调整就可以工作：

```
SELECT col1,
col2,
CONCAT('((\\,)', REPLACE(col2,',', '(\\,)|(\\,)'), '(\\,))') AS regex,
CONCAT(',',col1,',') REGEXP CONCAT('((\\,)', REPLACE(col2,',', '(\\,)|(\\,)'), '(\\,))') AS intersect
FROM tbl 
```

# android - 为什么启动设备android后服务不会自动启动

> ID：12317047
> 
> 赞同：1
> 
> 时间：2012-09-07T11:16:56.760
> 
> 标签：android, android-service, android-alarms

我将自动启动编码为：

```
public class AutoStart extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {
            SetAlarm(context);
        }       

    }

    public void SetAlarm(Context context) {
        AlarmManager am = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(context, ServiceUpdateData.class);
        // PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
        PendingIntent pi = PendingIntent.getService(context, 0, i,
                PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.SECOND, 30);// 
        int dbtime = 10;

        int time = 1000 * 60 * dbtime;
        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
                time, pi); // Millisec * Second * Minute
        Toast.makeText(context, "Service Started Again", Toast.LENGTH_LONG)
                .show();
    }
} 
```

我在 androidmainifest.xml 中添加了

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

为什么我的服务在启动设备 android 后没有自动启动。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:19:09.727

不要忘记设置`Intent-Filter`为`BOOT_COMPLETED`

喜欢：

```
<receiver android:name=".AutoStart">
    <intent-filter>
        <action
            android:name ="android.intent.action.BOOT_COMPLETED">
        </action>
    </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:22:08.467

```
 <receiver android:name="yourpackageName.classname"

        <intent-filter>
           <action android:name="android.intent.action.BOOT_COMPLETED"/>
        </intent-filter>
    </receiver> 
```

# javascript - 如何在 JavaScript 中将长正则表达式拆分为多行？

> ID：12317049
> 
> 赞同：167
> 
> 时间：2012-09-07T11:17:10.650
> 
> 标签：javascript, regex, jslint, expression, readability

我有一个很长的正则表达式，我希望在我的 JavaScript 代码中将其拆分为多行，以根据 JSLint 规则保持每行长度为 80 个字符。我认为它更适合阅读。这是模式示例：

```
var pattern = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/; 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2016-01-12T22:34:09.153

扩展@KooiInc 答案，您可以避免使用对象的`source`属性手动转义每个特殊字符`RegExp`。

例子：

```
var urlRegex= new RegExp(''
  + /(?:(?:(https?|ftp):)?\/\/)/.source     // protocol
  + /(?:([^:\n\r]+):([^@\n\r]+)@)?/.source  // user:pass
  + /(?:(?:www\.)?([^\/\n\r]+))/.source     // domain
  + /(\/[^?\n\r]+)?/.source                 // request
  + /(\?[^#\n\r]*)?/.source                 // query
  + /(#?[^\n\r]*)?/.source                  // anchor
); 
```

或者，如果您想避免重复该`.source`属性，您可以使用以下`Array.map()`函数：

```
var urlRegex= new RegExp([
  /(?:(?:(https?|ftp):)?\/\/)/      // protocol
  ,/(?:([^:\n\r]+):([^@\n\r]+)@)?/  // user:pass
  ,/(?:(?:www\.)?([^\/\n\r]+))/     // domain
  ,/(\/[^?\n\r]+)?/                 // request
  ,/(\?[^#\n\r]*)?/                 // query
  ,/(#?[^\n\r]*)?/                  // anchor
].map(function(r) {return r.source}).join('')); 
```

在 ES6 中，map 函数可以简化为： `.map(r => r.source)`

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-09-07T11:20:23.527

您可以将其转换为字符串并通过调用创建表达式`new RegExp()`：

```
var myRE = new RegExp (['^(([^<>()[\]\\.,;:\\s@\"]+(\\.[^<>(),[\]\\.,;:\\s@\"]+)*)',
                        '|(\\".+\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.',
                        '[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\\.)+',
                        '[a-zA-Z]{2,}))$'].join('')); 
```

笔记：

1.  将*表达式文字*转换为字符串时，您需要转义所有反斜杠，因为在评估*字符串文字*时会消耗反斜杠。（有关更多详细信息，请参阅 Kayo 的评论。）
2.  `RegExp`接受修饰符作为第二个参数

    `/regex/g`=>`new RegExp('regex', 'g')`

[**添加ES20xx**（标记模板）]

在 ES20xx 中，您可以使用[标记模板](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)。见片段。

笔记：

*   这里的缺点是您不能在正则表达式字符串中使用纯空格（始终使用`\s`, `\s+`, `\s{1,x}`,`\t`等`\n`）。

```
(() => {
  const createRegExp = (str, opts) => 
    new RegExp(str.raw[0].replace(/\s/gm, ""), opts || "");
  const yourRE = createRegExp`
    ^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|
    (\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|
    (([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$`;
  console.log(yourRE);
  const anotherLongRE = createRegExp`
    (\byyyy\b)|(\bm\b)|(\bd\b)|(\bh\b)|(\bmi\b)|(\bs\b)|(\bms\b)|
    (\bwd\b)|(\bmm\b)|(\bdd\b)|(\bhh\b)|(\bMI\b)|(\bS\b)|(\bMS\b)|
    (\bM\b)|(\bMM\b)|(\bdow\b)|(\bDOW\b)
    ${"gi"}`;
  console.log(anotherLongRE);
})();
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-06-14T23:37:57.320

使用字符串`new RegExp`很尴尬，因为您必须转义所有反斜杠。您可以编写较小的正则表达式并将它们连接起来。

让我们拆分这个正则表达式

```
/^foo(.*)\bar$/ 
```

后面我们会用一个函数让事情变得更漂亮

```
function multilineRegExp(regs, options) {
    return new RegExp(regs.map(
        function(reg){ return reg.source; }
    ).join(''), options);
} 
```

现在让我们摇滚

```
var r = multilineRegExp([
     /^foo/,  // we can add comments too
     /(.*)/,
     /\bar$/
]); 
```

由于它有成本，因此尝试只构建一次真正的正则表达式，然后使用它。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-01-21T13:42:28.633

这里有很好的答案，但为了完整起见，有人应该提到 Javascript 的[原型链](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)继承的核心特性。像这样的东西说明了这个想法：

```
RegExp.prototype.append = function(re) {
  return new RegExp(this.source + re.source, this.flags);
};

let regex = /[a-z]/g
.append(/[A-Z]/)
.append(/[0-9]/);

console.log(regex); //=> /[a-z][A-Z][0-9]/g
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-02-02T14:53:20.617

感谢[模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)的奇妙世界，您现在可以在 ES6 中编写大的、多行的、注释良好的，**甚至语义嵌套**的正则表达式。

```
//build regexes without worrying about
// - double-backslashing
// - adding whitespace for readability
// - adding in comments
let clean = (piece) => (piece
    .replace(/((^|\n)(?:[^\/\\]|\/[^*\/]|\\.)*?)\s*\/\*(?:[^*]|\*[^\/])*(\*\/|)/g, '$1')
    .replace(/((^|\n)(?:[^\/\\]|\/[^\/]|\\.)*?)\s*\/\/[^\n]*/g, '$1')
    .replace(/\n\s*/g, '')
);
window.regex = ({raw}, ...interpolations) => (
    new RegExp(interpolations.reduce(
        (regex, insert, index) => (regex + insert + clean(raw[index + 1])),
        clean(raw[0])
    ))
); 
```

使用它，您现在可以编写如下正则表达式：

```
let re = regex`I'm a special regex{3} //with a comment!`; 
```

输出

```
/I'm a special regex{3}/ 
```

[或者多线呢？](https://jsfiddle.net/yL2rw419/1/)

```
'123hello'
    .match(regex`
        //so this is a regex

        //here I am matching some numbers
        (\d+)

        //Oh! See how I didn't need to double backslash that \d?
        ([a-z]{1,3}) /*note to self, this is group #2*/
    `)
    [2] 
```

输出`hel`，整洁！
“如果我需要实际搜索换行符怎么办？”，然后用`\n`傻！
在我的 Firefox 和 Chrome 上工作。

* * *

好的，“稍微复杂一点的东西怎么样？”
当然，[这是我正在研究的对象解构 JS 解析器的一部分](https://jsfiddle.net/vs5mxf9h/)：

```
regex`^\s*
    (
        //closing the object
        (\})|

        //starting from open or comma you can...
        (?:[,{]\s*)(?:
            //have a rest operator
            (\.\.\.)
            |
            //have a property key
            (
                //a non-negative integer
                \b\d+\b
                |
                //any unencapsulated string of the following
                \b[A-Za-z$_][\w$]*\b
                |
                //a quoted string
                //this is #5!
                ("|')(?:
                    //that contains any non-escape, non-quote character
                    (?!\5|\\).
                    |
                    //or any escape sequence
                    (?:\\.)
                //finished by the quote
                )*\5
            )
            //after a property key, we can go inside
            \s*(:|)
      |
      \s*(?={)
        )
    )
    ((?:
        //after closing we expect either
        // - the parent's comma/close,
        // - or the end of the string
        \s*(?:[,}\]=]|$)
        |
        //after the rest operator we expect the close
        \s*\}
        |
        //after diving into a key we expect that object to open
        \s*[{[:]
        |
        //otherwise we saw only a key, we now expect a comma or close
        \s*[,}{]
    ).*)
$` 
```

它输出`/^\s*((\})|(?:[,{]\s*)(?:(\.\.\.)|(\b\d+\b|\b[A-Za-z$_][\w$]*\b|("|')(?:(?!\5|\\).|(?:\\.))*\5)\s*(:|)|\s*(?={)))((?:\s*(?:[,}\]=]|$)|\s*\}|\s*[{[:]|\s*[,}{]).*)$/`

并通过一个小演示运行它？

```
let input = '{why, hello, there, "you   huge \\"", 17, {big,smelly}}';
for (
    let parsed;
    parsed = input.match(r);
    input = parsed[parsed.length - 1]
) console.log(parsed[1]); 
```

成功输出

```
{why
, hello
, there
, "you   huge \""
, 17
,
{big
,smelly
}
} 
```

注意引用字符串的成功捕获。
我在 Chrome 和 Firefox 上测试过，效果很好！

[如果[好奇，您可以查看我在做什么](https://stackoverflow.com/a/60026664/2518317)，以及[它的演示](https://jsfiddle.net/anmb03jf/)。
虽然它只适用于 Chrome，因为 Firefox 不支持反向引用或命名组。因此请注意，此答案中给出的示例实际上是一个绝育版本，可能很容易被欺骗接受无效字符串。]

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-12-27T16:18:57.030

上面的正则表达式缺少一些不能正常工作的黑色斜线。所以，我编辑了正则表达式。请考虑这个 99.99% 用于电子邮件验证的正则表达式。

```
let EMAIL_REGEXP = 
new RegExp (['^(([^<>()[\\]\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\.,;:\\s@\"]+)*)',
                    '|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.',
                    '[0-9]{1,3}\])|(([a-zA-Z\\-0-9]+\\.)+',
                    '[a-zA-Z]{2,}))$'].join('')); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-07T12:00:31.107

为了避免 Array `join`，您还可以使用以下语法：

```
var pattern = new RegExp('^(([^<>()[\]\\.,;:\s@\"]+' +
  '(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@' +
  '((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|' +
  '(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$'); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-23T10:45:18.677

您可以简单地使用字符串操作。

```
var pattenString = "^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|"+
"(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|"+
"(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$";
var patten = new RegExp(pattenString); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-04-30T16:38:23.953

我尝试通过封装所有内容并实现对拆分捕获组和字符集的支持来改进 korun 的答案 - 使这种方法更加通用。

要使用此代码段，您需要调用可变参数函数`combineRegex`，其参数是您需要组合的正则表达式对象。它的实现可以在底部找到。

捕获组不能以这种方式直接拆分，因为它会使某些部分只留下一个括号。您的浏览器会因异常而失败。

相反，我只是在数组中传递捕获组的内容。`combineRegex`遇到数组时会自动添加括号。

此外，量词需要遵循一些东西。如果由于某种原因需要在量词前面拆分正则表达式，则需要添加一对括号。这些将被自动删除。关键是一个空的捕获组是毫无用处的，这样量词就有了参考意义。相同的方法可用于非捕获组（`/(?:abc)/`变成`[/()?:abc/]`）之类的事情。

这最好用一个简单的例子来解释：

```
var regex = /abcd(efghi)+jkl/; 
```

会成为：

```
var regex = combineRegex(
    /ab/,
    /cd/,
    [
        /ef/,
        /ghi/
    ],
    /()+jkl/    // Note the added '()' in front of '+'
); 
```

如果您必须拆分字符集，您可以使用对象 ( `{"":[regex1, regex2, ...]}`) 而不是数组 ( `[regex1, regex2, ...]`)。只要对象只包含一个键，键的内容可以是任何内容。请注意，如果第一个字符可以解释为量词，则`()`不必使用虚拟开头。`]`即`/[+?]/`变成`{"":[/]+?/]}`

这是片段和更完整的示例：

```
function combineRegexStr(dummy, ...regex)
{
    return regex.map(r => {
        if(Array.isArray(r))
            return "("+combineRegexStr(dummy, ...r).replace(dummy, "")+")";
        else if(Object.getPrototypeOf(r) === Object.getPrototypeOf({}))
            return "["+combineRegexStr(/^\]/, ...(Object.entries(r)[0][1]))+"]";
        else 
            return r.source.replace(dummy, "");
    }).join("");
}
function combineRegex(...regex)
{
    return new RegExp(combineRegexStr(/^\(\)/, ...regex));
}

//Usage:
//Original:
console.log(/abcd(?:ef[+A-Z0-9]gh)+$/.source);
//Same as:
console.log(
  combineRegex(
    /ab/,
    /cd/,
    [
      /()?:ef/,
      {"": [/]+A-Z/, /0-9/]},
      /gh/
    ],
    /()+$/
  ).source
);
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-02T14:02:47.460

@Hashbrown 的出色[回答](https://stackoverflow.com/a/60027277/867786)让我走上了正轨。这是我的版本，也是受到这个[博客](http://lea.verou.me/2018/06/easy-dynamic-regular-expressions-with-tagged-template-literals-and-proxies/)的启发。

```
function regexp(...args) {
  function cleanup(string) {
    // remove whitespace, single and multi-line comments
    return string.replace(/\s+|\/\/.*|\/\*[\s\S]*?\*\//g, '');
  }

  function escape(string) {
    // escape regular expression
    return string.replace(/[-.*+?^${}()|[\]\\]/g, '\\$&');
  }

  function create(flags, strings, ...values) {
    let pattern = '';
    for (let i = 0; i < values.length; ++i) {
      pattern += cleanup(strings.raw[i]);  // strings are cleaned up
      pattern += escape(values[i]);        // values are escaped
    }
    pattern += cleanup(strings.raw[values.length]);
    return RegExp(pattern, flags);
  }

  if (Array.isArray(args[0])) {
    // used as a template tag (no flags)
    return create('', ...args);
  }

  // used as a function (with flags)
  return create.bind(void 0, args[0]);
} 
```

像这样使用它：

```
regexp('i')`
  //so this is a regex

  //here I am matching some numbers
  (\d+)

  //Oh! See how I didn't need to double backslash that \d?
  ([a-z]{1,3}) /*note to self, this is group #2*/
` 
```

要创建此`RegExp`对象：

```
/(\d+)([a-z]{1,3})/i 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-07T11:39:40.747

就个人而言，我会选择一个不太复杂的正则表达式：

```
/\S+@\S+\.\S+/ 
```

当然，它不如您当前的模式*准确*，但是您要完成什么？您是否正在尝试捕捉用户可能输入的意外错误，或者您是否担心您的用户可能会尝试输入无效地址？如果是第一个，我会选择更简单的模式。如果是后者，通过回复发送到该地址的电子邮件进行验证可能是更好的选择。

但是，如果您想使用当前的模式，通过从较小的子模式构建它（IMO）会更容易阅读（和维护！），如下所示：

```
var box1 = "([^<>()[\]\\\\.,;:\s@\"]+(\\.[^<>()[\\]\\\\.,;:\s@\"]+)*)";
var box2 = "(\".+\")";

var host1 = "(\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])";
var host2 = "(([a-zA-Z\-0-9]+\\.)+[a-zA-Z]{2,})";

var regex = new RegExp("^(" + box1 + "|" + box2 + ")@(" + host1 + "|" + host2 + ")$"); 
```

# tridion - 在嵌入式字段中循环组件链接

> ID：12317050
> 
> 赞同：1
> 
> 时间：2012-09-07T11:17:13.440
> 
> 标签：tridion, tridion-2011, dwt, dreamweaver-templates

我们有一个“组件 A”，它有一个“嵌入字段”类型的*多值字段。*嵌入的字段又具有“**组件链接**”类型的*多值*字段。

 **这看起来像： **组件 A -> 嵌入式 Shcema 字段 -> 组件链接**

如何在dreamweaver中迭代和访问**“组件链接”的字段？**此外，组件字段支持三种不同的模式，我们想在 Dreamweaver 中检查这些模式名称。

我发现[这篇文章](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_FAD509B62A6D4ED68949E6DB1752FCB3)很有用。但是更多的细节确实很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:27:36.107

看看这些问题：

*   [如何在 SDL Tridion 2011 SP1 中处理 Dreamweaver TBB 中的嵌套重复区域](https://stackoverflow.com/questions/10309577/how-to-handle-nested-repeating-regions-in-dreamweaver-tbbs-in-sdl-tridion-2011-s/10322575#10322575)

*   [在 Dreamweaver TBB 中检索链接组件的值 - 并将其设为 SiteEditable](https://stackoverflow.com/questions/10256744/retrieving-values-of-a-linked-component-in-dreamweaver-tbb-and-making-it-sitee/10259792#10259792)

Tridion 练习手册中的这一页：

*   [http://code.google.com/p/tridion-practice/wiki/IteratingOverMultivalueEmbeddedFields](http://code.google.com/p/tridion-practice/wiki/IteratingOverMultivalueEmbeddedFields)

它们涵盖了访问 DWT 中的字段时可能遇到的最常见问题。

如果这些不能回答您的问题，***请更新您的问题***：

1.  组件的相关 XML***片段***
2.  显示您已经尝试过的 DWT***片段***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:04:16.070

您可以轻松地遍历多值嵌入字段的组件链接，但没有直接的方法来获取组件链接值，您必须使用 dwt 扩展名或 .net tbb。sdltridionworld.com 上有一些可用的。

我之前用嵌套模板做过这个。您也可以根据循环中组件链接字段组件的模式从您的主 dwt tbb 尝试嵌套/子模板。

我也建议使用剃须刀模板。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:49:17.707

正如 Vikas 之前提到的，在多值嵌入模式字段的多值组件链接字段上重复是相对简单的。您的 DWT 代码应遵循以下形式：

```
<!-- TemplateBeginRepeat name="XML Name of Embedded Schema Fields" -->
    <!-- TemplateBeginRepeat name="XML Name of multivalued Component Link field" -->
        @@Field@@  - Should write out the TCM ID of your linked component
    <!-- TemplateEndRepeat -->
<!-- TemplateEndRepeat --> 
```

但是，您无法使用“开箱即用”的 Dreamweaver 模板访问这些组件的字段或架构详细信息。

你可以：

1.  在您的 Content Manager 服务器上安装[Dreamweaver Get eXtension](http://www.sdltridionworld.com/community/extension_overview/dreamweaver_get_extension.aspx)`@@Get(...)@@` ，这将允许您使用语法检索链接组件的字段（以及其他内容）
2.  [在 Dreamweaver 模板之前使用Generic SDL Tridion 2011 模板构建块](http://www.sdltridionworld.com/community/2011_extensions/generic-2011-tbbs.aspx)中的“获取链接组件”.Net TBB ，这会将链接的组件放入模板包中，以便您可以直接迭代它们
3.  编写您自己的 .Net TBB 来处理与这些链接相关的特定业务逻辑并输出 html（不推荐）或您可以从 DWT 处理的命名包项目、项目或项目数组。
4.  从您的 DWT 调用另一个（嵌套）组件模板`@@RenderComponentPresentation(Field, "tcm:x-xx-32")@@`
5.  以上任意组合

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T11:29:54.540

您可以遍历嵌入模式字段段落中的多值字段段落，如下所示：

```
<!-- TemplateBeginRepeat name="Component.Fields.paragraphs" -->

    <h2>@@Field.header@@ (@@TemplateRepeatIndex@@)</h2>
    <!-- TemplateBeginRepeat name="Field.paragraph" -->
        <p>@@Field@@</p>
    <!-- TemplateEndRepeat -->

<!-- TemplateEndRepeat --> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T12:09:24.910

请尝试使用以下代码：

```
 <!-- TemplateBeginRepeat name="paragraphs" -->
               <!-- TemplateBeginRepeat name="Internal_Link" -->
                 <!-- TemplateBeginIf cond = "Internal_Link != ''" -->
                    <p> @@Component.ID@@ </p>
                 <!-- TemplateEndIf -->
               <!-- TemplateEndRepeat -->
         <!-- TemplateEndRepeat --> 
```

要检查第零个组件，您可以使用以下代码：

```
 <!-- TemplateBeginRepeat name="paragraphs0.Internal_Link" --> 
```**

# php - Zend 框架 2

> ID：12317052
> 
> 赞同：4
> 
> 时间：2012-09-07T11:17:14.000
> 
> 标签：php, zend-framework, zend-framework2

我是新 Zend 框架的狂热爱好者。到目前为止，我已经在以前的版本中完成了一个项目，我决定学习新的项目，其中包含对我来说非常难以理解的部分。

我看过网络研讨会和 youtube 视频，还阅读了文档，我试图通过阅读代码来理解这个框架，但我无法弄清楚的事情很少。

网络研讨会上有很多信息`EventManager`，但由于我缺乏英语，我无法 100% 理解演讲内容。

我知道事件管理器管理的事件非常明显，但我真的不知道如何使用它：在其中一个网络研讨会中，他们提供了一些简单的示例，但他们没有解释将这段代码放在哪里，是`module.php`文件吗？或者其他地方，如果您可以向我展示一些带有解释的实际示例，以便我了解重点。

接下来的事情是神秘`$e`的作为参数传递给大多数`Module.php`使用 after 的函数：`$e->getApplication`或者我只是想知道这`$e`代表什么？它是什么的实例？接下来是它是如何“自动”传递给这些函数的？

另一个问题：在为每个调用的模块指定的配置文件中，`module.config.php`有很多东西。我明白了路线的要点，但我不知道什么是可调用对象和工厂。它还在其中一个网络研讨会中进行了如下解释：invokables 是类的路径，工厂是可调用的函数或类（不记得了）。重点是好的，这在一些理论讨论中是有道理的，但请给我一些深入解释的例子，这些工厂和可调用对象来自哪里以及我需要知道的其他东西。

另一件事是这些配置文件中有很多配置可能性。我在哪里可以找到有关`"keys"=>"values"`这些文件中可能存在的信息的一些信息？

这就是现在的全部内容，但我仍然想问一些未回答的问题。如果有人能够帮助我，我将非常感谢通过邮件与此人通信。

* * *

好的，一个问题解决了。关于神秘的 &e 所以如果有人对此感兴趣，这是一个解决方案：

这个 $e 变量实例取决于我们在 module.php 文件中使用的函数：

案例 1：init() -> &e 是模块管理器的一个实例 案例 2：onBootstrap() -> &e 是 MvcEvent 的一个实例（如果我还没有找到其他案例，请告诉我们）

问题是当事件被触发时会调用这些方法，所以如果这些函数出现在我们的代码中，监听器会将 &e 传递给那些正在监听的函数（这是我的简单逻辑，所以请不要讨厌我）

还有其他问题要回答..一旦想出一些有意义的答案，我会告诉你的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T07:43:02.113

在股票 ZF2 代码中，`$e`始终是`Zend\EventManager\EventManagerInterface`. 通常它是一个`Zend\EventManager\Event`或一个`Zend\Mvc\MvcEvent`。

一个类的 EventManager 触发一个事件，导致调用侦听器回调。每个侦听器回调都会传递一个 an 的实例`Event`，然后该实例具有一些有用的方法，特别是`getTarget()`and `getParams()`。其他实例`EventManagerInterface`通常有更专业的方法。`MvcEvent`特别是具有与组件相关的方法，`Mvc`例如`getApplication()`、和。`getRouter()``getRequest()``getResponse()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T13:44:55.180

您可以在“使用 Zend Framework 2”一书中找到有关 tghe EventManager、应用程序配置和 MvcEvent 的更多信息：http: [//leanpub.com/using-zend-framework-2](http://leanpub.com/using-zend-framework-2)

# java - 为什么反序列化后调用第一个构造函数而没有其他构造函数

> ID：12317063
> 
> 赞同：1
> 
> 时间：2012-09-07T11:17:46.267
> 
> 标签：java, serialization

请有人能解释一下为什么反序列化后调用“Gambler”类的构造函数，但说“Player”类的构造函数不是？

```
import java.io.*;
  class Gambler {
   Gambler() { System.out.print("d"); }
  }
  class Person extends Gambler implements Serializable {
   Person() { System.out.print("c"); }
  }
  class Player extends Person {
   Player() { System.out.print("p"); }
 }

  class CardPlayer extends Player implements Serializable {
    CardPlayer() { System.out.print("c"); }
      public static void main(String[] args) {
      CardPlayer c1 = new CardPlayer();
      try {
            FileOutputStream fos = new FileOutputStream("play.txt");
            ObjectOutputStream os = new ObjectOutputStream(fos);
            os.writeObject(c1);
            os.close();
            FileInputStream fis = new FileInputStream("play.txt");
            ObjectInputStream is = new ObjectInputStream(fis);
            CardPlayer c2 = (CardPlayer) is.readObject();
            is.close(); 

            } 
      catch (Exception x ) { }
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:21:36.030

因为`Gambler`类没有实现`Serializable`接口。来自 javadocs 的`Serializable`：

> 为了允许序列化不可序列化类的子类型，子类型可以负责保存和恢复超类型的公共、受保护和（如果可访问）包字段的状态。仅当它扩展的类具有可访问的无参数构造函数来初始化类的状态时，子类型才可以承担此责任。如果不是这种情况，则声明类 Serializable 是错误的。将在运行时检测到错误。
> 
> 在反序列化过程中，不可序列化类的字段将使用类的公共或受保护的无参数构造函数进行初始化。可序列化的子类必须可以访问无参数构造函数。**可序列化子类的字段将从流中恢复。**

请参阅[`java.io.Serializable`java 文档](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:26:11.970

在`serializing Object Tree is persisted`您的情况下，对象树是`Person`一流的。现在`Super()`，如果父类对于任何子类都不可序列化，那么机制就会出现。所以这就是为什么你的构造函数`Gambler`被调用的原因。

[您可以在http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)上找到更多信息

> 在反序列化过程中，不可序列化类的字段将使用类的公共或受保护的无参数构造函数进行初始化。可序列化的子类必须可以访问无参数构造函数。可序列化子类的字段将从流中恢复。

# asp.net-mvc - .net MVC 区域和子文件夹

> ID：12317067
> 
> 赞同：1
> 
> 时间：2012-09-07T11:18:01.023
> 
> 标签：asp.net-mvc

我在我的项目中使用区域，但我想将这些区域中的视图组织到子文件夹中。

例如，我有一个名为 Members 的区域，其中包含一个名为 Settings 的 Controller 和另一个名为 MemberCategory 的 Controller。MemberCategory 实际上是设置的子文件夹。

我想当我访问我的 url 的 Member Category 视图时解析为 Members/Settings/MemberCategory

目前它解析为 Members/MemberCategory

是否可以将视图嵌套到子文件夹中并将控制器更改为指向

```
return View("Members/Settings/MemberCategory"); 
```

或者这需要通过路由来完成吗？

任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:35:26.037

我已经用 Routes 解决了这个问题，并且没有将视图嵌套到子文件夹中。

在我的区域注册文件中，我在默认路线上方添加了以下内容：

```
 context.MapRoute(
        "MemberCategory",
        "Members/Settings/MemberCategory",
        new { controller = "MemberCategory", action = "Index" }
    );

    context.MapRoute(
        "MemberCategoryAction",
        "Members/Settings/MemberCategory/{action}/{id}",
        new { controller = "MemberCategory", action = "Index", id = UrlParameter.Optional }
    ); 
```

不确定这是否是最优雅的方式，但它适用于我的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:18:03.977

您还可以执行以下操作：

```
return this.View("../MailTemplates/ResetPassword"); 
```

访问您要使用的视图。代码编辑器将无法解决此问题，但它可以工作。

我认为这比：

```
return this.View("~/Areas/Cms/MailTemplates/ResetPassword"); 
```

# .net - 使用 Fluent API 为 POCO 对象在 BaseClass 上设置 MaxLength

> ID：12317070
> 
> 赞同：1
> 
> 时间：2012-09-07T11:18:12.677
> 
> 标签：.net, c#-4.0, entity-framework-4

我有一个基类，就像我的 POCO 对象一样

```
 public abstract class BASE
    {
        protected BASE()
        {
            Created = DateTime.UtcNow;
            Modified = Created;

        }

        public int id { get; set; }
        public DateTime Created { get; set; }
        public DateTime Modified { get; set; }
        [MaxLength(50)]
        public string CreatedBy { get; set; }
        [MaxLength(50)]
        public string ModifiedBy { get; set; }
    } 
```

我想要做的是使用流利的 API 设置“MaxLength(50)”属性。

但如果我在`Context.ModelCreating`

```
modelBuilder.Entity<BASE>().Property(p => p.CreatedBy).HasMaxLength(50);
modelBuilder.Entity<BASE>().Property(p => p.ModifiedBy).HasMaxLength(50); 
```

然后在数据库中生成“BASEs”表——我想避免这种情况。

我错过了什么，能够在 Fluent API 中设置这些约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:30:50.670

您可以使用`EntityTypeConfiguration<TEntity>`来配置最大长度。

创建一个基类来映射`BASE`属性。

```
public class MyEntityMap<TEntity> : EntityTypeConfiguration<TEntity>
    where TEntity : BASE
{
    public MyEntityMap()
    {
        Property(p => p.CreatedBy).HasMaxLength(50);
        Property(p => p.CreatedBy).HasMaxLength(50);
    }
} 
```

然后`MyEntityMap<TEntity>`为每个派生类创建。

```
public class DerivedMap : MyEntityMap<Derived>
{
    public DerivedMap()
    {
        //mappings
    }
}

modelBuilder.Configurations.Add(new DerivedMap()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T08:42:24.397

我刚刚以 Code First 方法将此答案用于 EF 6。用于设置表的 SQL 脚本按我预期的方式生成。基类中映射的所有列，包括在从此类派生的表脚本中

```
public abstract class BaseMap<T> : EntityTypeConfiguration<T> where T : DbBase
    {
        protected BaseMap()
        {
            Ignore(t => t.DbGuid);

            // Properties

            Property(t => t.CreatedBy)
                .IsRequired()
                .HasMaxLength(50);

            Property(t => t.ChangedBy)
                .HasMaxLength(50);

            Property(t => t.DeletedBy)
                .HasMaxLength(50);

            Property(t => t.RowVersion)
                .IsRequired()
                .IsFixedLength()
                .HasMaxLength(8)
                .IsRowVersion()
                .IsConcurrencyToken();

            // Table & Column Mappings
            Property(t => t.CreatedAt).HasColumnName("CreatedAt");
            Property(t => t.CreatedBy).HasColumnName("CreatedBy");
            Property(t => t.ChangedAt).HasColumnName("ChangedAt");
            Property(t => t.ChangedBy).HasColumnName("ChangedBy");
            Property(t => t.DeletedAt).HasColumnName("DeletedAt");
            Property(t => t.DeletedBy).HasColumnName("DeletedBy");
            Property(t => t.RowVersion).HasColumnName("RowVersion");
        }
    } 
```

# android - 什么时候可以在 Android Activity 生命周期中调用绑定服务？

> ID：12317072
> 
> 赞同：3
> 
> 时间：2012-09-07T11:18:25.203
> 
> 标签：android, android-activity, android-service

我对 Android 开发人员很陌生，并且在绑定服务的概念上苦苦挣扎

我已在活动的`onCreate`方法中将服务绑定到活动

```
startService(intent);
bindService(intent, mConnection, Context.BIND_AUTO_CREATE); 
```

`mConnection`是我在匿名类中`ServiceConnection`重写了回调方法的对象`onServiceConnected`

在回调中，`mService`（它是 type 的类成员`LibraryService`，`LibraryService`是我的子类`Service`）设置为引用`LibraryService`我们绑定到的对象：

```
mService = binder.getService(); 
```

我以为在 onCreate 中调用 bindService 之后，我就可以通过 mService 引用调用 LibraryService 了，但此时它仍然设置为 null，表示尚未执行 onServiceConnected 回调。

我试图打印由`mService`使用 Log 的方法生成的字符串的值：

```
if (mService != null) {
    Log.d(LOG_TAG, "In onCreate getLogFileName string value: " + mService.getLogFileName("pulse"));             
} else {
    Log.d(LOG_TAG, "In onCreate getLogFileName string value: null");                
} 
```

正如我提到的 - 它在 onCreate 中仍然为空，然后我将相同的日志代码添加到 onStart 和 onResume 但 mService 仍然为空

我的问题是该回调何时执行？我原以为它必须发生在`onCreate`方法的主体内，但显然不是。我想我需要一些关于 Android 系统如何/何时执行回调的指示

我知道回调确实会被执行，因为我在实例化 mService 的语句上放置了一个断点并且它命中了该语句。我只是不明白它什么时候发生，即我怎么知道它什么时候可以假设`mService`已经设置？我只能在`OnServiceConnected`回调正文中访问它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:24:05.217

服务绑定是异步的，因此，您必须通过一点同步来处理它。因此，在调用绑定服务后，您可以执行类似的操作

```
synchronized(this){
   while(mBoundInstance == null)
      this.wait();
} 
```

在 onServiceConnected 中：

```
synchronized(this){
   this.notify(); //wakes up thread: now mBoundInstance is 100% != null
} 
```

请注意，将等待放在 asyncTask 中很好，这样 ui 就不会被冻结。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-06T14:57:00.403

看看[https://stuff.mit.edu/afs/sipb/project/android/docs/guide/components/bound-services.html](https://stuff.mit.edu/afs/sipb/project/android/docs/guide/components/bound-services.html)

那里说：

*   您只需要在活动可见时与服务交互，您应该在 onStart() 期间绑定并在 onStop() 期间取消绑定。
*   如果您希望您的活动即使在后台停止时也能收到响应，那么您可以在 onCreate() 期间绑定并在 onDestroy() 期间取消绑定。请注意，这意味着您的活动需要在其运行的整个过程中（即使在后台）都使用该服务，因此如果该服务在另一个进程中，那么您会增加该进程的权重，并且系统更有可能会杀了它。
*   您通常不应在活动的 onResume() 和 onPause() 期间绑定和取消绑定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-06T15:27:30.410

现在我重新阅读了您的问题和描述，我认为您想了解其他信息。我不会删除第一个答案，因为如果只阅读问题的标题，它通常是正确的答案。

通常你想在 onResume 中/之后真正构建你的 UI。或者您将启动一个定期轮询您的服务的线程 - 并在 onResume 上启动该线程（并在 onPause 上停止它）。您可以将该“init”代码移至特殊的 init() 方法。

onStart 你调用 bindService onResume 你检查 mService 是否不为空，然后你启动 init() 方法（如果你只是将你的活动放在后台，它不为空，那么它不会超过 onStop，而只会调用 onPause 和 onResume）。

您还可以在从活页夹对象分配 mService 之后立即从 ServiceConnection 匿名类调用 init() 。

请记住，在 ServiceConnectionon.ServiceDisconnected 中以及在 onStop() 中调用 unbindService() 之后，始终将 mService 设为空。还要记住：在完成一次绑定（和取消绑定）后，您不能重新使用 ServiceConnection 对象。它会给出一个例外。因此，只需在每个新绑定（onStart/onStop 的每个周期）上执行一个新的 ServiceConnection。

# javascript - 在浏览器中提交表单并在 javascript 中进行多线程处理

> ID：12317075
> 
> 赞同：1
> 
> 时间：2012-09-07T11:18:32.737
> 
> 标签：javascript, multithreading, forms, browser

> **可能重复：**
> [阻止用户按回车键提交表单](https://stackoverflow.com/questions/895171/prevent-users-from-submitting-form-by-hitting-enter)

我写了一些简单的代码（[你也可以在这里测试](http://jsfiddle.net/mj8Kv/5/)）

```
<form >
       <input id="id2" type='text' />
</form>
$("#id2").keydown(function(e) {
    if (e.keyCode == 13) {
        alert('nope!');
        return false;
    }
}); 
```

如果我点击回车，我应该会看到一条带有“不！”的警报。然后什么都没有。但是，在我单击警报窗口上的“确定”后，尽管函数返回 false，但表单仍在提交。

它是什么？javascript中的一些奇怪的多线程？漏洞？或者...

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:20:48.757

使用`keypress`事件而不是`keydown`事件：

```
$("#id2").keypress(function(e) {
    if (e.keyCode == 13) {
        alert('nope!');
        return false;
    }
}); 
```

[更新的演示](http://jsfiddle.net/mj8Kv/10/)

# java - 使用 Hibernate 通过 SSH 隧道获取数据

> ID：12317077
> 
> 赞同：5
> 
> 时间：2012-09-07T11:18:37.527
> 
> 标签：java, hibernate, ssh

我最近开始学习 Hibernate 技术，不得不使用 Hibernate 从数据库中获取数据。问题是我只能通过 SSH 隧道连接到数据库。我可以在`hibernate.cfg.xml`文件中使用任何属性来解决此问题吗？或者您可以提出另一种新手可以理解的方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T14:18:36.007

也许使用[Jsch](http://www.jcraft.com/jsch/)。[一些例子](http://www.jcraft.com/jsch/examples/)可以给你一个方法。

另一种方法可能是实现您自己的 SSH SocketFactory，可能使用 http 代理处理程序和端口转发的东西。起点可以是：

```
SSHSocketFactory fact = new SSHSocketFactory(sshHost, sshPort, new SSHPasswordAuthenticator(sshUser, sshPassword));

sock = fact.createSocket(host, port); 
```

您可以将您的实现与`hibernate.cfg.xml`文件中的以下参数链接起来：

```
hibernate.connection.socketFactory=com.mysql.jdbc.NamedPipeSocketFactory 
```

或者也许就像他们在[这里](http://code.google.com/p/sshframework/source/browse/trunk/src/cn/hs/ssh/test/hibernate/config/HibernateUtil.java?spec=svn2&r=2)或[这里](http://www.codeforge.com/read/141861/HibernateSessionFactory.java__html)的方式（后者是更好的方式）。

好 ssh 的东西！

# php - 从 http 切换到 https 在不同的浏览器上会出现不同的错误？

> ID：12317079
> 
> 赞同：3
> 
> 时间：2012-09-07T11:18:48.820
> 
> 标签：php, .htaccess, browser, https, ssl-certificate

我想`https`在所有其他页面上运行时运行几个页面`http`

**我在.htaccess**和**config.inc.php**文件中编写了以下代码

### .htaccess

```
RewriteEngine on
Options +FollowSymLinks 
RewriteBase /

RewriteRule ^login/?$ login.php [NC]

# Rewrite non www to www.charityrummage.com
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Rewrite to https
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} /login [OR]
RewriteCond %{REQUEST_URI} /do_login.php [OR]
RewriteCond %{REQUEST_URI} /payment/?.*$ 
RewriteRule ^(.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L,QSA]

# traffic to http://, except login.php and payment.php
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !(/login|/do_login.php|/payment)
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L,QSA] 
```

**还对config.inc.php**进行了一些更改，这是必需的，也是网站的第一个文件

### 配置文件

```
$ssl_page = array('login.php','do_login.php','payment.php');
// Note: do_login.php is intermediate page
if(in_array(trim($_SERVER['SCRIPT_NAME'],'/'),$ssl_page)){
    define('PROTOCOL','https://');    
 }else{
   define('PROTOCOL','http://');
}
define('DS','/');
define('URL',PROTOCOL.$_SERVER['HTTP_HOST'].DS);
// based on URL i made CSS and JS Path 
```

这是网站链接：

> [http://www.charityrummage.com](http://www.charityrummage.com)。

登录页面已启用 ssl：

> [https://www.charityrummage.com/login](https://www.charityrummage.com/login)

## 但

当我运行该网站时，它会在不同的浏览器上给出不同的错误，这真的很烦人。以下是不同浏览器上的错误描述

### IE8

> 它总是提示安全错误，
> 如果我单击“是”，则显示除左侧面板外的所有内容
> ，如果单击“否”，则在网址附近出现证书错误，但网站运行正常。

### 铬 (v:20.0.1132.8)

> 以以下格式显示有关 css 和 js 的多个警告（参见控制台）：
> 
> **[https://www.charityrummage.com/login](https://www.charityrummage.com/login)上的页面运行来自[http://www.charityrummage.com/css/reset.css](http://www.charityrummage.com/css/reset.css)的不安全内容**
> 
> 但是如果您查看[登录页面](https://www.charityrummage.com/login)的源代码，那么您可以看到每个 **css**和**js**都在运行`https://`

### 火狐 (v 16.0)

> 它仅显示几秒钟的锁定标志（安全）然后消失
> （我很惊讶它从未提示 https 的安全警报）但是当我们使用 **页面信息 - > 媒体**时，许多图像都来自**http://**

请您检查并告诉我确切的问题是什么？

我还想知道一件事。

> 如果`https://`页面显示不正确，那么由哪一个负责

*   操作系统或
*   浏览器或
*   服务器或
*   编程问题或
*   SSL证书问题

    最后，这个问题的解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:35:45.210

试试这个规则：

```
# Force files ending in X to use same protocol as initial request
RewriteRule \.(gif|jpe?g|png|ico|css|js)$ - [S=1] 
```

或者这个：

```
# don't do anything for images/css/js (leave protocol as is)
RewriteRule \.(gif|jpe?g|png|ico|css|js)$ - [NC,L] 
```

之前`# traffic to http://`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:32:44.957

我之前通过在页面上设置基本href来解决这个问题

```
<base href="<?php echo HTTPS_BASE_REF; ?>"></base> 
```

这意味着所有链接都由此派生并正确解析。

HTTPS_BASE_REF 的常量是在我的 config.inc.php 文件中设置的。

# database - 2 台 Postgresql 9.2.1.4 机器上的同步复制设置

> ID：12317082
> 
> 赞同：1
> 
> 时间：2012-09-07T11:18:51.490
> 
> 标签：database, replication, postgresql-9.1

我在 2 台 Postgresql 9.2.1.4 机器（主机和从机）上运行同步复制

这是配置：

**主参数**

```
synchronous_commit=on
synchronous_standby_names = '*'
no synchronous_replication_timeout parameter, so 10 sec by default
no synchronous_replication parameter, so async by default
wal_level = hot_standby
max_wal_senders = 5
wal_keep_segments = 32
hot_standby = on 
```

**从站参数**

```
no synchronous_commit, so by default on 
no synchronous_replication_service parameter, so by default async 
max_wal_senders = 5 
wal_keep_segments = 32 
hot_standby = on 
```

应用程序在 Master 上插入记录，并使用 pgpool 从 Master 或 Slave 读取记录。有时会发生在插入记录之后应用程序看不到插入的记录（可能是通过从另一个数据库主机读取为插入的），但是当我们事后检查它时，记录就在数据库中。

在 [http://wiki.postgresql.org/wiki/Synchronous_replication#SYNCHRONOUS_REPLICATION_OVERVIEW](http://wiki.postgresql.org/wiki/Synchronous_replication#SYNCHRONOUS_REPLICATION_OVERVIEW)上 ，我发现：“如果在超时时间内没有收到回复，我们会发出通知，然后返回成功提交（不可能有其他操作）。”

我的问题

1.  a）这是否真的意味着如果 Master 上的 synchronous_replication_timeout（默认为 10 秒）被超过，并且在以下三种情况中的任何一种情况下

*   数据没有到达从站或
*   交易未在 Slave 上提交或
*   事务在 Slave 上回滚，

主人提交事务但奴隶根本不提交？

如果是这样，那么事务似乎并不是真正同步的......

1.  b) 如果我在 Master synchronous_replication_timeout=0 上设置，Master 会无限期地等待 Slave 提交或回滚，如果从属提交，master commis 也会在从属回滚的情况下进行，master 也会回滚？
2.  我应该设置什么值

    同步复制（在主服务器上）= 异步（定义）| 接收 | 同步 | 申请

和

```
synchronous_replication_service (on Slave)
= async (def) | recv | fsync | apply 
```

为了确保我确实有适当的同步复制设置（所以我确信数据在两台服务器上都提交或在两台服务器上回滚）

他们都应该申请吗？

1.  是否有任何选项可以确保通过在 PosgreSQL 9.1.4 上使用同步复制来同时提交主服务器和从服务器上的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:28:56.360

您引用的 wiki 页面当前描述了一个未提交的实现同步复制的补丁，如果您有兴趣，请参见此处：http: [//archives.postgresql.org/pgsql-hackers/2010-12/msg02484.php](http://archives.postgresql.org/pgsql-hackers/2010-12/msg02484.php)

因此，您对 GUC 的“同步复制超时”或“同步复制服务”的问题与 PostgreSQL 的发布版本无关，因为最终提交的同步复制版本与该 wiki 页面中描述的版本大不相同。对此感到抱歉，我会看看如何清理该 wiki 页面。您想要的信息位于： [http ://www.postgresql.org/docs/current/static/warm-standby.html#SYNCHRONOUS-REPLICATION](http://www.postgresql.org/docs/current/static/warm-standby.html#SYNCHRONOUS-REPLICATION)

# c# - 在计算机“。”上找不到服务 {ServiceName}

> ID：12317086
> 
> 赞同：3
> 
> 时间：2012-09-07T11:19:02.770
> 
> 标签：c#, windows-services, windows-security

我有一个在本地 PC 上运行的 Windows 服务。我的操作系统是 Windows 7。我想通过 C# 代码启动我的服务，而无需通过“计算机管理 > 服务”。

当我运行下面的代码时，它给了我以下信息`Exception`：

> “在计算机 '.' 上找不到服务 {ServiceName}。”

```
ServiceController service = new ServiceController(serviceName);
try
{
    TimeSpan timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds);

    service.Start();
    service.WaitForStatus(ServiceControllerStatus.Running, timeout);
}
catch
{
    // ...
} 
```

我看过很多关于这种情况的帖子，都提到这是一个`security feature of Windows 7`. 有没有办法在不影响管理员组的情况下运行此服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:08:26.300

您可能遇到了 UAC 问题。您需要将清单文件添加到您的应用程序，表明该应用程序必须以管理员身份运行。这将导致 Windows 在您的程序运行时提示提升。这是一篇引导您完成问题/解决方案的文章：

[http://www.codeproject.com/Articles/17968/Making-Your-Application-UAC-Aware](http://www.codeproject.com/Articles/17968/Making-Your-Application-UAC-Aware)

以及相关的stackoverflow帖子：

[如何强制我的 .NET 应用程序以管理员身份运行？](https://stackoverflow.com/questions/2818179/how-to-force-c-sharp-app-to-run-as-administrator-on-windows-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-24T05:58:13.503

它可能与您无法选择的框架有关。你可以选择它然后刷新你的IIS。 [![在此处输入图像描述](../Images/d95684c3fbf133d7ac1da4de722ff010.png)](https://i.stack.imgur.com/p2pbi.png)

# c# - 如何通过选择相关单选按钮来显示在asp页面上显示的图像的属性

> ID：12317087
> 
> 赞同：1
> 
> 时间：2012-09-07T11:19:03.223
> 
> 标签：c#, .net, ascx

实际上，我正在处理一个`ascx`在指定文件夹中显示图像的文件。

The task is to place a radio button for each image, and when a radio-button is selected, the details (like the image's name) of the appropriate image should be shown in a pop-up box.

请帮我完成任务！

```
<asp:DataList ID="dlAssignftp" Visible="false" runat="server" RepeatColumns="5" RepeatDirection="Vertical"
    HorizontalAlign="left" CellPadding="1" CellSpacing="1" Width="100%">
    <ItemTemplate>
        <ul class="gallery clearfix slideshow">
            <li>
                <a href='<%# DataBinder.Eval (Container.DataItem, "Image Path") %>' rel="prettyPhoto[pp_gal]">                
                <asp:Image ImageUrl='<%# DataBinder.Eval (Container.DataItem, "Image Path") %>' ID="imgftp"
                    runat="server" Height="100px" Width="100px" Visible="true" />
                 </a>
            </li>
            <asp:RadioButton ID="rbtn_ftpimg" runat="server" Text="Select" GroupName="rbtn_ftpimg_grp" Checked="false" TextAlign="Right" OnCheckedChanged="rbtn_ftpimg_Changed" AutoPostBack="true"  />
        </ul>
        <%--</a>--%>
    </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:25:41.637

根据您正在寻找的属性，您可以执行以下操作：

```
Image img = Image.FromFile(<path to image on server>);
//return data to web: img.Width, img.Height etc. 
```

此外，我*认为*您可以执行以下操作：

```
PropertyItem[] itms = img.PropertyItems;
foreach(PropertyItem item in itms)
{
      //iterate through items and do work
} 
```

这有帮助吗？

- - 编辑 - -

上面的代码应该为您提供您正在寻找的详细信息，但至于如何显示它们完全取决于您。我*可能会*做类似于以下的事情：

```
 <script language="javascript">
 function GetImageDetails(id)
 {
    $.ajax({
    url: '/Images/GetImageDetails',
    type: "POST",
    data: { imageId: id },
    dataType: 'json',
    success: function (data) {
            var content;
            content = data[0].Width;
            content += "<br>";
            content += data[0].Height;
            content += "<br>";
            //etc
            alert(content);
    }
   });
 }
 </script>
 <input type=radio onClick="GetImageDetails(1);"> 
```

然后在服务器端，您可能有一个如下所示的 Web 服务：

```
 public JsonResult GetImageDetails(int ID)
 {
     var img = Image.FromFile(<path to image on server>);
     return Json(new { width = img.Width, height = img.Height });
 } 
```

您可以通过多种方式对其进行修改以满足您的需求。例如，您会注意到我将一个 id 参数传递给 Web Service 方法（但在示例中我没有对它做任何事情），我将使用它从数据库中提取图像的物理位置。或者，您可以只传递图像的路径，以避免往返数据库服务器。同样，你如何去做这件事真的取决于你。

最后一点，上述 Web 服务方法类似于您在 MVC 3/4 环境中发现的方法。如果你没有运行 MVC，你可以这样做：

```
 public string GetImageDetails(int ID)
 {
     var img = Image.FromFile(<path to image on server>);
     var serializer = new JavaScriptSerializer();
     return serializer.Serialize(new { width = img.Width, height = img.Height });
 } 
```

希望这可以帮助。

# c# - 添加布尔值（作为整数）

> ID：12317092
> 
> 赞同：31
> 
> 时间：2012-09-07T11:19:27.357
> 
> 标签：c#, boolean

我在 AS3 中编写了一个代码，它允许我检查特定数量的事情是否属实......

```
If (true + false + true + true + false + true + true < 4)
{

} 
```

当我尝试用 C# 重写时，它告诉我不能添加类型 bool 和 bool。这样做的最好方法是像这样重写它吗？还是有一些更简单的解决方法？

```
If ((true?1:0) + (false?1:0) + (true?1:0) + (true?1:0) + (false?1:0) + (true?1:0) + (true?1:0) < 4)
{

} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-07T11:23:23.677

尝试在**方法参数**[`IEnumerable<T>.Count(Func<T,bool>)`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)上使用from`System.Linq`和`T`as 。`bool`**[`params`](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)**

```
public static int CountTrue(params bool[] args)
{
   return args.Count(t => t);
} 
```

用法

```
// The count will be 3
int count = CountTrue(false, true, false, true, true); 
```

* * *

您还可以引入**[`this`](https://msdn.microsoft.com/en-us/library/bb383977.aspx)扩展方法**：

```
public static int TrueCount(this bool[] array)
{
   return array.Count(t => t);
} 
```

用法

```
// The count will be 3
int count = new bool[] { false, true, false, true, true }.TrueCount(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-07T11:23:10.553

您可以创建一个数组并使用`Count`：

```
if ((new []{true, false, true, true, false, true, true}).Count(x=>x) < 4)
{

} 
```

或`Sum`方法：

```
if ((new []{true, false, true, true, false, true, true}).Sum(x=>x?1:0) < 4)
{

} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-07T11:33:04.363

这是一个更有趣的例子：

```
if ((BoolCount)true + false + true + true + false + true + true <= 5)
{
    Console.WriteLine("yay");
} 
```

使用这个类：

```
struct BoolCount
{
    private readonly int c;
    private BoolCount(int c) { this.c = c; }

    public static implicit operator BoolCount(bool b)
        { return new BoolCount(Convert.ToInt32(b)); }

    public static implicit operator int(BoolCount me)
        { return me.c; }

    public static BoolCount operator +(BoolCount me, BoolCount other)
        { return new BoolCount(me.c + other.c); }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-07T11:25:35.340

`Convert.ToInt32(true) + Convert.ToInt32(false) + Convert.ToInt32(true)` 在这种情况下也可以工作我认为这是我们最简单的方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:33:36.767

（受*LB:s*评论启发）您可以编写一个扩展方法：

```
static class Ex
{
    public static int Int(this bool x) { return x ? 1 : 0; }
} 
```

然后（假设你`using`在包含类的命名空间中包含一个`Ex`），你可以`if`这样写你的语句：

```
if (true.Int() + false.Int() + true.Int() + true.Int() + 
    false.Int() + true.Int() + true.Int() < 4)
{
    ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T13:07:31.360

[`BitArray`](http://msdn.microsoft.com/en-us/library/x3we7ff2)您可以为该类编写扩展方法。我不确定性能是否会比使用 Linq 更好，但至少它是另一种选择：

```
public static int CountSetBits(this BitArray theBitArray)
{
   int count = 0;
   for (int i = 0; i < theBitArray.Count; i++)
   {
      count += (theBitArray.Get(i)) ? 1 : 0;
   }
   return count; 
} 
```

用法：

```
BitArray barray = new BitArray(new [] { true, true, false, true });
int count = barray.CountSetBits(); // Will return 3 
```

# android - 从微调器中选择项目以显示编辑文本

> ID：12317093
> 
> 赞同：0
> 
> 时间：2012-09-07T11:19:29.083
> 
> 标签：android, android-edittext, android-spinner

I am trying to show an EditText when a certain Item from a Spinner is selected. 到目前为止，我已经创建了微调器和 EditText，但我真的不知道下一步是什么。我不想在 EditText 中显示选择，我只想显示 EditText 字段。

```
 @Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final EditText editText = (EditText) findViewById(R.id.edit_text_box);
    editText.getText().toString();

}

public void addItemsOnSpinner()
{
    spinner1 = (Spinner) findViewById(R.id.spinner);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource
    (this, R.array.spinner_item, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter (adapter);

}

public void onItemSelected(AdapterView<?> spinner1, View view,int pos, long id)
{

        editText.setText(spinner1.getSelectedItem());

} 
```

这也是我的字符串数组中的内容+希望仅在选择 item2 时显示编辑文本框

```
<string-array name="spinner_item">
    <item>Item 1</item>
    <item value="Item2">Item 2</item>
    <item>Item 3</item>
    <item>Item 4</item>
</string-array> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:28:40.817

您应该`editText`在 XML 中将可见性设置为不可见或消失，这取决于更适合您的需求。然后您可以使用以下方法使其显示：

```
public void onItemSelected(AdapterView<?> spinner1, View view, int pos, long id)
{
    yourEditText.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:47:30.237

```
 spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            int x = spinner1.getSelectedItemPosition();
            valSel = items[x];
    }
String spinner1val = spin1.getText().toString();         //extract value of text from spinner

EditText text = (EditText) findViewById(R.id.EditText1);  //get id of EditText box
text.setText(spinner1val); 
```

或者，如果您想检查在 Spinner 中选择的项目的值，“valsel”包含该值。干杯瓦塞尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:25:33.187

您必须在 edittext 上设置文本`onItemSelected`。首先按照**MKJParekh** Suggest 进行更改。

```
public void onItemSelected(AdapterView<?> spinner1, View view,int pos, long id)
{
   yourEditText.setText(spinner1.getSelectedItem())
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T11:28:08.880

从微调器中获取选定的值，

```
String anyvariable=String.valueOf(spin.getSelectedItem()); 
```

现在您可以在编辑文本中显示此字符串值，

```
EditText text = (EditText) findViewById(R.id.your_text);
text.setText(anyvariable); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:33:16.660

```
 @Override
        public void onItemSelected(AdapterView<?> month, View arg1,int arg2, long arg3) {
            // TODO Auto-generated method stub
            selectedMonth=  month.getItemAtPosition(arg2).toString();
            Log.d("Tag",""+selectedMonth);
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
            //selected_item=    arg0.getChildAt(1).toString();

        }
        });

        selected_item contains the item ,so just set it to editView like
         editView.setText(selected_item) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-26T05:43:02.037

1.  EditText height1，weight1，身高，体重；微调器 height_spinner, weight_spinner; 字符串高度输入字符串，重量输入字符串；按钮计算bmi；

    @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_bmi);

    ```
    // set your class members as they start out null.
    // do this for all of them 
    height1 = (EditText) findViewById(R.id.idofheight1inxml);
    height_spinner = (Spinner) findViewById(R.id.idofheightspinnerinxml); 
    ....

        // Show the Up button in the action bar.
    setupActionBar();
    setupSpinners(); } 
    ```

    void setupSpinner(){ height_spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() { @Override public void onItemSelected(AdapterView parent, View view, int position, long id) { //IE 如果在高度微调器 CM 被选中 我想隐藏第二个高度编辑文本字段。 // 我不确定这是“height1”还是“height” if (position == 0){ height.setVisibility(View.GONE); } else { height.setVisibility (View.VISIBLE); } }

    ```
     @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    });

    // if you want to add similar logic for weight spinner, do that with this : 
    weight_spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            // put your code here for weight spinner
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); } 
    ```

# inheritance - 在 InitializeComponent 之后调用基本构造函数

> ID：12317095
> 
> 赞同：0
> 
> 时间：2012-09-07T11:19:33.627
> 
> 标签：inheritance, constructor, derived-class

我正在开发一个具有许多面板的应用程序，这些面板都来自`BasePanel`用户控件。
使用该应用程序与使用向导非常相似 - 每次不同的面板显示在所有其他面板之上。
我想要一个计时器，所以当没有用户活动时，会显示第一个面板。

这是基本面板代码：

```
public partial class BasePanel : UserControl
{
    private Timer timer = new Timer();

    public BasePanel()
    {
        InitializeComponent();

        timer.Interval = 5000;
        timer.Tick += timer_Tick;

        foreach (Control control in Controls)
            control.Click += Control_Click;
    }

    public event EventHandler NoActivity = delegate { };
    private void timer_Tick(object sender, EventArgs e)
    {
        NoActivity(this, EventArgs.Empty);
    }

    private void Control_Click(object sender, EventArgs e)
    {
        timer.Stop();
        timer.Start();
    }

    protected override void OnEnter(EventArgs e)
    {
        base.OnEnter(e);
        timer.Start();
    }

    protected override void OnLeave(EventArgs e)
    {
        base.OnLeave(e);
        timer.Stop();
    }
} 
```

问题：
在`BasePanel`调用派生之前调用构造函数`InitializeComponent()`。
由于`BasePanel`没有自己的控件 - 没有控件注册到`Control_Click`事件。

这是正常的继承行为，但仍然 - 我如何在基类中注册派生类的控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T06:40:29.103

最终这样解决了：我在以下代码中添加了这个递归函数`BasePanel`：

```
public void RegisterControls(Control parent)
{
    foreach (Control control in parent.Controls)
    {
        control.Click += Control_Click;
        RegisterControls(control);
    }
} 
```

在创建这些面板的类中：

```
private static T CreatePanel<T>()
{
    T panel = Activator.CreateInstance<T>();

    BasePanel basePanel = panel as BasePanel;

    if (basePanel != null)
    {
        basePanel.BackColor = Color.Transparent;
        basePanel.Dock = DockStyle.Fill;
        basePanel.Font = new Font("Arial", 20.25F, FontStyle.Bold, GraphicsUnit.Point, 0);
        basePanel.Margin = new Padding(0);

        basePanel.RegisterControls(basePanel);
    }

    return panel;
} 
```

# c# - 来自 C# 的 SQL 表值参数

> ID：12317109
> 
> 赞同：1
> 
> 时间：2012-09-07T11:20:31.600
> 
> 标签：c#, tsql

仅仅落后了几年，但我今天发现了存储过程/UDF 的表值参数。它们是我遇到的问题的理想解决方案，但我无法让它们在 C# 中工作。

我有一个UDF：

```
CREATE FUNCTION GetSurveyScores
    @Survey     bigint, 
    @Question   nvarchar(max),
    @Area       StringList      READONLY,
    @JobCode    StringList      READONLY
AS BEGIN

    SELECT * FROM SurveyResults WHERE RespondentArea IN (Select val from @Area) AND RespondentJobCode IN (select val from @JobCodes)
END 
```

（StringList 是我创建的类型，它只是一个表值类型，有一个名为 val 的列，定义为 nvarchar(256)）

然后从 SQL Server Management Studio，我可以这样做：

```
declare @area StringList;
insert into @area(val) values('NW'),('NE'),('SW');
// Get all survey respondent job codes from the SurveyRespondent table.
declare @jobcodes StringList;
insert into @jobcodes select distinct jobcode from dbo.SurveyRespondent;

select * from dbo.GetSurveyScores(3, 'Q3', @area, @jobcodes) 
```

这非常有效。

从 C# 中，我没有得到任何结果（没有例外），使用此代码：（我正在使用 DataTables，因为我打算将其放入的实际代码已经使用 DataTables）

```
DataTable areas = new DataTable("StringList");
areas.Columns.Add("val");
areas.Rows.Add("NW"); areas .Rows.Add("NE"); areas .Rows.Add("SW");

DataTable jobcodes = new DataTable("StringList");
jobcodes.Columns.Add("val");
jobcodes.Rows.Add("JC1"); jobcodes .Rows.Add("JC2");    

SqlCommand cmd = new SqlCommand("SELECT * FROM dbo.GetSurveyScores(3, 'Q3', @area, @jc)", connection);
cmd.Parameters.AddWithValue("@area", areas);
cmd.Parameters["@area"].SqlDbType = SqlDbType.Structured;
cmd.Parameters["@area"].TypeName = "StringList";

cmd.Parameters.AddWithValue("@jc", jobcodes);
cmd.Parameters["@jc"].SqlDbType = SqlDbType.Structured;
cmd.Parameters["@jc"].TypeName = "StringList";

DataTable results = new DataTable();
using (SqlDataAdapter da = new SqlDataAdapter(cmd)) {

    da.Fill(results);

}

Console.WriteLine(results.Rows.Count); 
```

最后一行打印 0。我确定我一定错过了一些简单的东西，但经过 6 小时的尝试，我认为我需要换一双眼睛来看待它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:24:34.157

我相信问题在于你没有从你的函数中返回任何东西，虽然老实说我不确定它是如何在 MGT 工作室中运行的，因为它看起来像一个语法错误。该函数应该看起来像这样

```
CREATE FUNCTION GetSurveyScores (
    @Survey     bigint, 
    @Question   nvarchar(max),
    @Area       StringList      READONLY,
    @JobCodes    StringList      READONLY )
RETURNS @Results TABLE  (RespondentArea NVARCHAR(256), RespondentJobCode NVARCHAR(256))
AS 
BEGIN
    INSERT @Results
    SELECT * FROM SurveyResults WHERE RespondentArea IN (Select val from @Area) AND RespondentJobCode IN (select val from @JobCodes)
    RETURN
END
go 
```

您实际使用的语法略有不同的 Id' 图像，并且 select 语句正在执行但函数的返回值没有结果。

# c# - 将 MySqlDbType 字段映射到 MySQL 关键字

> ID：12317112
> 
> 赞同：3
> 
> 时间：2012-09-07T11:20:50.413
> 
> 标签：c#, .net, mysql, database, visual-studio

**问题：**

MySQL.NET 连接器有一个名为 MySqlDbType 的枚举，其中包含 Int16、Int32、Int64、Guid 等字段。虽然我还没有测试过……但有些东西（直觉）告诉我我不能这样做：

```
CREATE TABLE MyTable
(
    ID Guid NOT NULL, 
    Age Int32 NOT NULL
); 
```

**问题：**

有谁知道 MySqlDbType 中的每个字段/值都映射到其 SQL 关键字等效项的引用或列表？或者阐明在创建表时如何使用枚举指定列类型？

作为旁注 - 其中一些字段将使用参数，我也需要这些知识！即 VARCHAR(32) 等。

PS 遗憾的是，我不是 MySQL（或者实际上是 SQL）专家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:23:11.597

您可以[在 MySQL 中使用数值数据类型，](http://dev.mysql.com/doc/refman/5.5/en/numeric-types.html)例如`BIGINT, INT`：

```
CREATE TABLE MyTable
(
    ID BIGINT NOT NULL, 
    Age INT NOT NULL
); 
```

# sql-server-2008 - 按 ID 返回列中的一组值计数

> ID：12317113
> 
> 赞同：1
> 
> 时间：2012-09-07T11:20:50.443
> 
> 标签：sql-server-2008, pivot-table

我有一张这样的桌子：

```
ID    Type
----------
1     sent
1     sent
1     open
1     bounce
1     click
2     sent
2     sent
2     open
2     open
2     click 
```

我想要一个查询返回这样的结果：

```
ID    sent    open    bounce    click
1     2       1       1         1
2     2       2       0         1 
```

只是不知道该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:36:38.730

尝试枢轴

```
SELECT ID,[sent],[open],[bounce],[click]
FROM   your_table
PIVOT (COUNT([Type]) 
FOR   [Type] in ([sent],[open],[bounce],[click]))p 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/a7ed9/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:34:38.203

您可以使用`PIVOT`or获得这样的结果，如果您在列`GROUP BY`中有变量值，您甚至可以获得结果：`Type`

测试数据：

```
CREATE TABLE #t(ID    INT, Type VARCHAR(100))
INSERT #t 
VALUES 
(1,     'sent'),
(1,     'sent'),
(1,     'open'),
(1,     'bounce'),
(1,     'click'),
(2,     'sent'),
(2,     'sent'),
(2,     'open'),
(2,     'open'),
(2,     'click') 
```

`PIVOT`方法：

```
SELECT  pvt.*
FROM    #t
PIVOT
(
    COUNT(Type) FOR Type IN ([sent], [open], [bounce], [click])
) pvt 
```

如果还有其他可能的值，`Type`并且您事先不知道它们，请使用 dynamic `PIVOT`：

```
DECLARE @cols NVARCHAR(1000) = STUFF(
(
    SELECT  DISTINCT ',[' + Type + ']'
    FROM    #t
    FOR     XML PATH('')
), 1, 1, '')

DECLARE @query NVARCHAR(2000) = 
'
SELECT  pvt.*
FROM    #t
PIVOT
(
    COUNT(Type) FOR Type IN ('+@cols+')
) pvt   
'

EXEC(@query) 
```

如果您知道 的固定值`Type`，您还可以使用：

```
SELECT  ID,
        COUNT(CASE WHEN Type = 'sent' THEN 1 END) [sent],
        COUNT(CASE WHEN Type = 'open' THEN 1 END) [open],
        COUNT(CASE WHEN Type = 'bounce' THEN 1 END) bounce,
        COUNT(CASE WHEN Type = 'click' THEN 1 END) click
FROM    #t
GROUP   BY ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:36:45.780

```
Select Id, 
count(case When type='sent' then 1 else 0 end) as sent,
count(case when type='open' then 1 else 0 end) as open
From table
Group by Id 
```

如果那不能给您确切的答案，请尝试计数（不同的情况....）:)

# javascript - 正则表达式向后看 javascript

> ID：12317115
> 
> 赞同：6
> 
> 时间：2012-09-07T11:21:04.780
> 
> 标签：javascript, regex

我有这个正则表达式可以正确匹配我需要的所有内容（所有电子邮件地址不在链接内）：

```
/((?<!mailto:|=|[a-zA-Z0-9._%+-])[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.‌​-]+\.[a-zA-Z]{2,64}(?![a-zA-Z]|<\/[aA]>))/ 
```

不幸的是，由于 javascript 不支持lookbehind，它不适用于我的网络应用程序。有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:25:17.523

根据定义，您必须向后看才能知道`<a>`电子邮件地址之前没有起始链接标签。

你可以试试：

1.  匹配每个电子邮件地址，然后以编程方式验证该电子邮件地址是否不在链接中

或者

1.  使用 AJAX 将数据发送到您的服务器，并让您的服务器执行正则表达式。

# ios - OpenGL ES - GLSL 返回计算

> ID：12317120
> 
> 赞同：2
> 
> 时间：2012-09-07T11:21:20.983
> 
> 标签：ios, opengl-es, glsl, shader, tracking

我正在尝试使用 GPU 为 iPhone 创建一个面部跟踪器来执行性能计算。

为了使跟踪更加智能，我需要能够从着色器中检索值。但是我很难这样做，这对 iPhone OpenGL ES 可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:34:58.867

从着色器（至少在 ES 中）获取任何输出的唯一方法是将某些内容渲染到帧缓冲区并从 GPU 读回生成的像素值。

但是由于我不知道您的算法和实现，我无法告诉您如何最好地构建它以有效地获取结果。但请记住，着色器的唯一输出是渲染到帧缓冲区中的图像，无论该图像可能具有何种结构。

因此，通常最好为最小化 CPU-GPU 通信构建算法。因此，请考虑您是否真的需要知道 CPU 上的这些值，或者是否足以使用纹理或 VBO 将它们提供给 GPU 算法的其他部分，您可以（或多或少）有效地渲染其中而无需 CPU 往返.

# asp.net - ASP.Net 应用程序可以在按钮单击上运行本地 Exe 文件吗

> ID：12317124
> 
> 赞同：1
> 
> 时间：2012-09-07T11:21:36.217
> 
> 标签：asp.net, .net, vb.net, permissions

我在服务器上部署了一个 ASP.Net 应用程序。我想知道它是否能够在单击按钮时访问我的本地系统 exe 文件。

我在互联网上阅读了很多关于此的文章。有人说 ASP.Net 应用程序无法访问本地程序。虽然有些人建议它取决于权限、身份和其他东西。

我在本地机器上尝试了类似的事情，但即使在授予本地系统访问权限、文件的网络服务甚至将应用程序池标识更改为本地系统之后，我也无法完成相同的操作......

所以我只想确认这件事是否可能......

这是我要执行的代码

```
 Dim pstartinfo As New ProcessStartInfo()
        Dim p As New Process()

        pstartinfo.WorkingDirectory = "D:\VS2010Projects\SignatureCaptureWindows\bin\Debug"
        pstartinfo.FileName = "SignatureCaptureWindows.exe"
        pstartinfo.CreateNoWindow = False

        p = Process.Start(pstartinfo)

        p.WaitForExit()

        If (Not p.ExitCode.Equals(0)) Then

            Response.Write("Image Successfully saved in Database with ID = " + p.ExitCode.ToString())
            DisplaySavedImage(p.ExitCode)
        Else

        End If 
```

在 locahost 上运行时，它工作正常。当我在本地 IIS 上部署它时，它不会打开 exe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:24:38.320

有可能并且要求应用程序池用户对可执行文件的位置具有权限以及执行它的权限。

您可以使用`Process`该类来执行几乎任何事情（如果需要，甚至可以使用不同的用户凭据）。

不要忘记尝试使用 UI 运行应用程序通常不会很好地运行，因为应用程序池不在交互式环境中运行（因此，它无法打开窗口和单击按钮）。

您应该限制自己使用非交互式的可执行文件，因为 Web 服务器将无法与 windows 等进行交互。

* * *

在您的特定场景中，您需要用户输入他们的签名并保存它 - 您需要他们*上传*签名（我假设图像文件已经存在），或者在客户端*创建*`canvas`这样的图像（比如和JavaScript）。然后，您可以上传图像并保存。

# asp.net-mvc - Onion Architecture - Repository Vs Service?

> ID：12317126
> 
> 赞同：34
> 
> 时间：2012-09-07T11:21:46.070
> 
> 标签：asp.net-mvc, domain-driven-design, onion-architecture

I am learning the well-known Onion Architecture from Jeffrey Palermo. Not specific to this pattern, but I cannot see clearly the separation between repositories and domain services. I (mis)understand that repository concerns data access and service are more about business layer (reference one or more repositories).

In many examples, a repository seems to have some kind of business logic behind like `GetAllProductsByCategoryId` or `GetAllXXXBySomeCriteriaYYY`.

For lists, it seems that service is just a wrapper on repository without any logic. For hierarchies (parent/children/children), it is almost the same problem : is it the role of repository to load the complete hierarchy ?

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-07T23:33:03.923

The repository **is not** a gateway to access Database. It is an abstraction that allow you to store and load domain objects from some form of persistence store. (Database, Cache or even plain Collection). It take or return the domain objects instead of its internal field, hence it is an object oriented interface.

It is not recommended to add some methods like `GetAllProductsByCategoryId` or `GetProductByName` to the repository, because you will add more and more methods the repository as your use case/ object field count increase. Instead it is better to have a query method on the repository which takes a Specification. You can pass different implementations of the Specification to retrieve the products.

Overall, the goal of repository pattern is to create a storage abstraction that does not require changes when the use cases changes. [This article](http://thinkinginobjects.com/2012/08/26/dont-use-dao-use-repository/) talks about the Repository pattern in domain modelling in great detail. You may be interested.

For the second question: If I see a `ProductRepository` in the code, I'd expect that it returns me a list of Product. I also expect that each of the Product instance is complete. For example, if Product has a reference to `ProductDetail` object, I'd expect that `Product.getDetail()` returns me a `ProductDetail` instance rather than null. Maybe the implementation of the repository load `ProductDetail` together with Product, maybe the `getDetail()` method invoke `ProductDetailRepository` on the fly. I don't really care as a user of the repository. It is also possible that the Product only returns a `ProductDetail` id when I call `getDetail()`. It is perfect fine from the repository's contract point of view. However it complicates my client code and forces me to call `ProductDetailRepository` myself.

By the way, I've seen many service classes that solely wrap the repository classes in my past. I think it is an anti-pattern. It is better to have the callers of the services to use the repositories directly.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-07T12:59:56.063

> Repository pattern mediates between the domain and data mapping layers using a collection-like interface for accessing domain objects.

So, repositories is to provide interface for CRUD operation on domain entities. Remember that Repositories deals with whole Aggregate.

> Aggregates are groups of things that belong together. An Aggregate Root is the thing that holds them all together.

Example `Order` and `OrderLines`:

> OrderLines have no reason to exist without their parent Order, nor can they belong to any other Order. In this case, Order and OrderLines would probably be an Aggregate, and the Order would be the Aggregate Root

Business logic should be in Domain Entities, not in Repository layer , application logic should be in service layer like your mention, services in here play a role as coordinator between repositoies.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-04T21:11:29.993

While I'm still struggling with this, I want to post as an answer but also I accept (and want) feedback about this.

In the example `GetProductsByCategory(int id)`

First, let's think from the initial need. We hit a controller, probably the CategoryController so you have something like:

```
public CategoryController(ICategoryService service) {
    // here we inject our service and keep a private variable.
}

public IHttpActionResult Category(int id) {
    CategoryViewModel model = something.GetCategoryViewModel(id); 
    return View()
} 
```

so far, so good. We need to declare 'something' that creates the view model. Let's simplify and say:

```
public IHttpActionResult Category(int id) {
    var dependencies = service.GetDependenciesForCategory(id);
    CategoryViewModel model = new CategoryViewModel(dependencies); 
    return View()
} 
```

ok, what are dependencies ? We *maybe* need the category tree, the products, the page, how many total products, etc.

so if we implemented this in a repository way, this could look like more or less like this :

```
public IHttpActionResult Category(int id) {
    var products = repository.GetCategoryProducts(id);
    var category = repository.GetCategory(id); // full details of the category
    var childs = repository.GetCategoriesSummary(category.childs);
    CategoryViewModel model = new CategoryViewModel(products, category, childs); // awouch! 
    return View()
} 
```

instead, back to services :

```
public IHttpActionResult Category(int id) {
    var category = service.GetCategory(id);
    if (category == null) return NotFound(); //
    var model = new CategoryViewModel(category);
    return View(model);
} 
```

much better, but what is exactly inside `service.GetCategory(id)` ?

```
public CategoryService(ICategoryRespository categoryRepository, IProductRepository productRepository) {
    // same dependency injection here

    public Category GetCategory(int id) {
        var category = categoryRepository.Get(id);
        var childs = categoryRepository.Get(category.childs) // int[] of ids
        var products = productRepository.GetByCategory(id) // this doesn't look that good...
        return category;
    }

} 
```

Let's try another approach, the unit of work, I will use Entity framework as the UoW and Repositories, so no need to create those.

```
public CategoryService(DbContext db) {
    // same dependency injection here

    public Category GetCategory(int id) {
        var category = db.Category.Include(c=> c.Childs).Include(c=> c.Products).Find(id);
        return category;
    }
} 
```

So here we are using the 'query' syntax instead of the method syntax, but instead of implementing our own complex, we can use our ORM. Also, we have access to ALL repositories, so we can still do our Unit of work inside our service.

Now we need to select which data we want, I probably don't want all the fields of my entities.

The best place I can see this is happening is actually on the ViewModel, each ViewModel may need to map it's own data, so let's change the implementation of the service again.

```
public CategoryService(DbContext db) {
    // same dependency injection here

    public Category GetCategory(int id) {
        var category = db.Category.Find(id);
        return category;
    }
} 
```

so where are all the products and inner categories?

let's take a look at the ViewModel, remember this will ONLY map data to values, if you are doing something else here, you are probably giving too much responsibility to your ViewModel.

```
public CategoryViewModel(Category category) {
    Name = category.Name;
    Id = category.Id;
    Products = category.Products.Select(p=> new CategoryProductViewModel(p));
    Childs = category.Childs.Select(c => c.Name); // only childs names.
} 
```

you can imagine the `CategoryProductViewModel` by yourself right now.

BUT (why is there always a but??)

We are doing 3 db hits, and we are fetching all the category fields because of the Find. Also Lazy Loading **must** be enable. Not a real solution isn't it ?

To improve this, we can change find with where... but this will delegate the `Single` or `Find` to the ViewModel, also it will return an `IQueryable<Category>`, where we know it should be exactly one.

Remember I said "I'm still struggling?" this is mostly why. To fix this, we should return the exact needed data from the service (also know as the ..... you know it .... yes! the ViewModel).

so let's back to our controller :

```
public IHttpActionResult Category(int id) {
    var model = service.GetProductCategoryViewModel(id);
    if (category == null) return NotFound(); //
    return View(model);
} 
```

inside the `GetProductCategoryViewModel` method, we can call private methods that return the different pieces and assemble them as the ViewModel.

this is bad, now my services know about viewmodels... let's fix that.

We create an interface, this interface is the actual contract of what this method will return.

```
ICategoryWithProductsAndChildsIds // quite verbose, i know. 
```

nice, now we only need to declare our ViewModel as

```
public class CategoryViewModel : ICategoryWithProductsAndChildsIds 
```

and implement it the way we want.

The interface looks like it has too many things, of course it can be splitted with `ICategoryBasic`, `IProducts`, `IChilds`, or whatever you may want to name those.

So when we implement another viewModel, we can choose to do only `IProducts`. We can have our services having methods (private or not) to retrieve those contracts, and glue the pieces in the service layer. (Easy to say than done)

When I get into a fully working code, I might create a blog post or a github repo, but for now, I don't have it yet, so this is all for now.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-17T20:15:20.050

I believe the Repository should be only for CRUD operations.

```
public interface IRepository<T>
{
    Add(T)
    Remove(T)
    Get(id)
    ...
} 
```

So IRepository would have: Add, Remove, Update, Get, GetAll and possibly a version of each of those that takes a list, i.e, AddMany, RemoveMany, etc.

For performing search retrieval operations you should have a second interface such as an IFinder. You can either go with a specification, so IFinder could have a Find(criteria) method that takes criterias. Or you can go with things like IPersonFinder which would define custom functions such as: a FindPersonByName, FindPersonByAge etc.

```
public interface IMyObjectFinder
{
    FindByName(name)
    FindByEmail(email)
    FindAllSmallerThen(amount)
    FindAllThatArePartOf(group)
    ...
} 
```

The alternative would be:

```
public interface IFinder<T>
{
    Find(criterias)
} 
```

This second approach is more complex. You need to define a strategy for the criterias. Are you going to use a query language of some sort, or a more simple key-value association, etc. The full power of the interface is also harder to understand from simply looking at it. It's also easier to leak implementations with this method, because the criterias could be based around a particular type of persistence system, like if you take a SQL query as criteria for example. On the other hand, it might prevent you from having to continuously come back to the IFinder because you've hit a special use case that requires a more specific query. I say it might, because your criteria strategy will not necessarily cover 100% of the querying use cases you might need.

You could also decide to mix both together, and have an IFinder defining a Find method, and IMyObjectFinders that implement IFinder, but also add custom methods such as FindByName.

The service acts as a supervisor. Say you need to retrieve an item but must also process the item before it is returned to the client, and that processing might require information found in other items. So the service would retrieve all appropriate items using the Repositories and the Finders, it would then send the item to be processed to objects that encapsulates the necessary processing logic, and finally it would return the item requested by the client. Sometime, no processing and no extra retrievals will be required, in such cases, you don't need to have a service. You can have clients directly call into the Repositories and the Finders. This is one difference with the Onion and a Layered architecture, in the Onion, everything that is more outside can access everything more inside, not only the layer before it.

It would be the role of the repository to load the full hierarchy of what is needed to properly construct the item that it returns. So if your repository returns an item that has a List of another type of item, it should already resolve that. Personally though, I like to design my objects so that they don't contain references to other items, because it makes the repository more complex. I prefer to have my objects keep the Id of other items, so that if the client really needs that other item, he can query it again with the proper Repository given the Id. This flattens out all items returned by the Repositories, yet still let's you create hierarchies if you need to.

You could, if you really felt the need to, add a restraining mechanism to your Repository, so that you can specify exactly which field of the item you need. Say you have a Person, and only care for his name, you could do Get(id, name) and the Repository would not bother with getting every field of the Person, only it's name field. Doing this though, adds considerable complexity to the repository. And doing this with hierarchical objects is even more complex, especially if you want to restrict fields inside fields of fields. So I don't really recommend it. The only good reason for this, to me, would be cases where performance is critical, and nothing else can be done to improve the performance.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-07T11:28:40.767

In Domain Driven Design the repository is responsible for retrieving the whole Aggregate.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-05T07:13:51.653

See the relation between *services* and *repositories* on [Services in Domain-Driven Design (DDD)](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/) by [Lev Gorodinski](http://gorodinski.com/) with updates from [Vaughn Vernon](https://twitter.com/vaughnvernon) emphasizing the [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/) style:

> An application service has an important and distinguishing role - it provides a hosting environment for the execution of domain logic. As such, it is a convenient point to inject various gateways such as a repository or wrappers for external services.

A *service* is part of the *Application Core* as one can see graphically depicted by [Onion Architecture](https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/) or Microservices Patterns by Chris Richardson page 148 in the context of the [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/).

A repository *implementation* on the other hand is just an *adapter*, something that is able to *translate* the *application's* messages to a storage system (which could be anything: database, files, etc). See also *Interface Adapters* section from [The Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html) (talking about *Interface Adapters* layer):

> If the database is a SQL database, then all the SQL should be restricted to this layer ...

Search for "repository adapter" at [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/) section *Stage 3: (FIT or UI) App mock database* talking about the *repository* implementation viewed as an *adapter*.

A repository *interface* on the other hand is part of the *Application Core*:

*   check [Onion Architecture](https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/):

> The first layer around the Domain Model is typically where we would find interfaces that provide object saving and retrieving behavior, called repository interfaces.

*   see also page 159 from Microservices Patterns by Chris Richardson in the context of the [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/)

According to Eric Evans Domain-Driven Design:

> When a significant process or transformation in the domain is not a natural responsibility of an ENTITY or VALUE OBJECT, add an operation to the model as standalone interface declared as a SERVICE. Define the interface in terms of the language of the model and make sure the operation name is part of the UBIQUITOUS LANGUAGE. Make the SERVICE stateless.

So, a *service* is just something that contains *business logic*.

My conclusion: a *service* is a business logic building block; a *repository* is just an *adapter* providing access for the *business logic* to a storage system. One could mock the adapter to test the *business logic* in isolation or one could create additional repository adapters to provide more storage options for the *application* (e.g. file adapter, no-sql database adapter, etc).

About `GetAllProductsByCategoryId` or `GetAllXXXBySomeCriteriaYYY`

The repository methods should denote their intention so their naming could be very expressive; while those methods contain only the logic to communicate with the storage system they are fine. Based on the fact that the method naming might be very meaningful some frameworks (e.g. Spring Data) are able to create/generate the implementation for those methods and there's nothing wrong/odd there. On the other hand one might want to optimize/reduce the number of repository methods in various ways like having them accept a complex criteria object or a criteria list instead of having a method for each combination of those criteria, but this doesn't change the role of the repository (implementation) which is still an *adapter*.

About "is it the role of repository to load the complete hierarchy?"

By now the role of the repository (implementation) should be clear: is to convey the *application's* messages/requests intended for the storage system. The message/request could be e.g. "give me the Person identified by 123" or "give me a list of Person conform to some criteria" or "give me a complete hierarchy conform to some criteria" as long as the message/request can be *translated* to the storage system *as such*. Some storage systems are not able, for example, to give/return a *hierarchy object* so one should create a *service* to construct the *hierarchy object*; other storage systems are able to give/return a *hierarchy object* but of a type specific to their API/driver so the repository (implementation) should convert it to a DTO which might be further processed by a service in order to construct the business *hierarchy object*. Remember: a *repository* (implementation) is just an *adapter* which should be possible to mock (for testing purposes).

SIDE NOTE

Note also that there could be more types of services: *application services* and *domain services* - see them depicted at [Onion Architecture](https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/) but better explained at [Services in Domain-Driven Design (DDD)](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/) by [Lev Gorodinski](http://gorodinski.com/) where one should check for:

> The differences between a domain service and an application services are subtle but critical

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-07T13:40:52.977

Onion and Hexagonal Architectures purpose is to invert the dependency from domain->data access.
Rather than having a UI->api->domain->data-access,
you'll have something like UI->api->domain**<-**data-access
To make your most important asset, the domain logic, is in the center and free of external dependencies. Generally by splitting the Repository into Interface/Implementation and putting the interface along with the business logic.

Now to services, there's more that one type of services:

*   Application Services: your controller and view model, which are external concerns for UI and display and are not part of the domain
*   Domain Services: which provide domain logic. In you're case if the logic you're having in application services starts to do more that it's presentation duties. you should look at extracting to a domain service
*   Infrastructure Services: which would, as with repositories, have an interface within the domain, and an implementation in the outer layers

@Bart Calixto, you may have a look at CQRS, building your view model is too complex when you're trying to use Repositories which you design for domain logic. you could just rewrite another repo for the ViewModel, using SQL joins for example, and it doesn't have to be in the domain

# jquery - 如何在 jQuery Validation 插件中设置错误 div 名称？

> ID：12317133
> 
> 赞同：2
> 
> 时间：2012-09-07T11:22:37.637
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件。

我知道如何在 div 中包装错误，但我想为不同的表单使用不同的错误类（因为定位）。

这是我如何在 div 中包装错误的 JavaScript：

```
 errorElement: "div",
    wrapper: "div",  // a wrapper around the error message
    errorPlacement: function(error, element) {
    element.before(error);
    offset = element.offset();
    error.css('right', offset.right);
    } 
```

和我的CSS：

```
 div.error{
 ...some css styling
 } 
```

**如何设置错误 div 名称？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:06:41.653

如果我理解正确，您想使用“ErrorClass”给错误一个类来识别和设置它的样式。

例如：

```
 $("#form").validate({
    errorClass: "error", //Defines error class as 'error'
    errorElement: "div",
    //etc...
}); 
```

# adobe-indesign - 连接到 Adob e InDesign 控制台

> ID：12317135
> 
> 赞同：4
> 
> 时间：2012-09-07T11:22:59.337
> 
> 标签：adobe-indesign, windows-server, indesign-server

我有一个在 Windows 2007 VPS 上运行的 InDesign Server 实例，它在端口 8081 上运行 SOAP 服务。它作为 Windows 服务运行并运行开发和实时 JSX 脚本，具体取决于脚本的路径（我们有一个dev 文件夹和一个 live 文件夹）。

我在运行新脚本时遇到问题，因此想访问正在运行的服务的控制台，但我很难在 Adob​​e PDF 文档中找到有关如何执行此操作的参考。我知道找到了脚本本身，因为特定代码行的 Windows 事件查看器中存在错误，但我认为它在定位 JSXBIN 资源时遇到了问题。错误消息仅列出有问题的变量，而不是显式路径。

我已修改脚本以将路径信息输出到标准输出，但这不会进入事件日志。那么，我可以在正在运行的服务的控制台上获得一个窗口吗？我不想停止当前的服务，因为它正在用于实时。

我从文档中得到的一些想法：

```
InDesignServer -console
InDesignServer -LogToApplicationEventLog 
```

我认为这个可执行文件会启动一个新实例，这不是我想要的（它会选择一个新的端口号，或者尝试使用 8081 并且由于端口正在使用而无法启动 - 我没有尝试过明显的原因）。这些标志分别在 DOS 窗口中显示标准输出，并将标准输出重定向到事件日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:04:36.437

简而言之，我认为这是不可能的。我犹豫要不要在我们的实时服务器上启动一个*新*实例，以防它破坏任何东西，但实际上它很安全；只需确保您指定的端口与通常的端口不同。

```
InDesignServer -noconsole -port 10001 
```

将`noconsole`stdout 和 stderr 与当前 DOS 窗口连接 - 使用`console`会打开一个新窗口，因此它是您想要的前者。

另外：这可能值得避免`LogToApplicationEventLog`，因为进程可能会与控制台断开连接，这使得以优雅的方式杀死它很繁琐。

# extjs4.1 - 如何在 extjs 4.1 中垂直对齐显示字段中的文本

> ID：12317138
> 
> 赞同：1
> 
> 时间：2012-09-07T11:23:13.860
> 
> 标签：extjs4.1

考虑以下项目。当我用文本填充字段时。文本垂直对齐到中间。我如何确保这是垂直对齐的顶部。需要明确的是，我的意思不是“我的标签”，而是实际的字段值。

```
 {
                                            xtype:'displayfield',
                                            name:'FromAddress',
                                            height:100,
                                            fieldLabel:'My Label'
                                        }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:04:10.303

如果有`fieldBodyStyle`配置就好了，但`fieldBodyCls`可以在这里工作：

```
<style type="text/css">
    .align-top { vertical-align:top; }
</style>

{
    xtype:        "displayfield",
    name:         "FromAddress",
    height:       100,
    fieldLabel:   "My Label",
    fieldBodyCls: "align-top"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T10:57:24.147

设置[labelAlign](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.form.Labelable-cfg-labelAlign) = 'top' 也很好用

# objective-c - “代表或 NSNotifications” 判断代码的性能？

> ID：12317139
> 
> 赞同：0
> 
> 时间：2012-09-07T11:23:14.623
> 
> 标签：objective-c, memory-management, nsnotificationcenter, performance-testing, nsnotifications

在我的应用程序中，我必须在 tableview 中将图像文件显示为列表，以全尺寸和多个缩略图显示它们。因此，基本上我开发了三个单独的类来处理这三个视图。现在要执行任何文件操作，我可以想到两种方法：

1.  为所有这些类创建 appdelegate 对象，并相应地处理它们。当在一个类中对照片文件执行一项操作时，所有其他类都使用**NSNotification**通知，将 obeserver 保持为 Appdelegate 对象。

2.  在需要时为这些类创建本地对象，并通过调用相关方法分配**委托**以执行从一个类到另一个类的文件操作。

但是，我无法判断哪种方法在内存使用和性能方面会更好？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:58:09.413

使用与直接消息传递的一对一关系是更简单的关系和通信/消息传递方式。支持委托回调 -**编号 2**。

使这种设计具有双向性也很容易——如果视图离开屏幕，您可以执行取消操作。如果加载失败，更容易通知控制器。

* * *

`NSNotification`s 是相对重量级的。不必要。

在单例（应用程序委托）中存储一堆东西可能会导致几个不必要的保留对象。如果您的程序是并发的，那么这会增加更多的复杂性。不需要任何这种复杂性或引入可变的全局状态，也没有理由提出对象应该具有更大的访问范围和生命周期。

除此之外，您还可以针对特定需求进行优化，但我目前看不到任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:09:12.613

这在很大程度上取决于代码以及您如何构建应用程序。我一般在以下情况下使用代表：

*   委托对象存在于需要它的主要对象之前和之后的位置。换句话说，主对象不需要担心它的委托的生命周期。
*   对象与其委托对象之间的关系是严格的一对一关系。换句话说，只有一个委托对象需要与主对象交互。我已经看到了代表被换入和换出的情况，我不推荐这样的代码。
*   主要对象需要来自委托的信息。

我会在以下情况下使用通知：

*   多个对象需要知道另一个类中发生的事情。
*   主类不需要与其他类交互，甚至不需要知道它们的存在。

无论您选择哪一个，我都不会为每个图像拥有一个以上的文件管理对象。简单的原因是拥有多个意味着您需要确保它们都具有相同的状态，因此可以相互通信。否则虫子会爬进来。

# php - 如何为 Javascript array() 使用准备 PHP 变量？

> ID：12317140
> 
> 赞同：1
> 
> 时间：2012-09-07T11:23:14.430
> 
> 标签：php, javascript, arrays, filter, sanitization

假设我们有输入字段或文本区域，用户可以在其中放置任何内容。这意味着用户可以放在那里：

*   文本
*   空白
*   多行
*   HTML 标签
*   单引号和双引号
*   斜线
*   诸如此类...

我当前的代码是这样做的：`<?php $data = addslashes($content_of_input); ?>`

不久之后……

```
<?php
    $php_generate_javascriptArray .='
        javascriptArray[0] ="'.$data.'";
    ';
?>
<script>
    javascriptArray = [];
    <?php echo $php_generate_javascriptArray; ?>
</script> 
```

不幸的是，添加斜杠是不够的——当用户将多行或 HTML 链接放入其中时，Javascript 会中断。有什么办法可以防止这种情况，并且仍然**允许 Javascript 数组包含 LINK、MULTIPLE LINES、HTML TAGS**吗？我正在寻找一些通用过滤器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:24:26.213

[`json_encode`](http://php.net/json_encode)将 PHP 数据结构（或字符串或数字）转换为适当的 JavaScript 数据结构，同时使其安全地注入 HTML 文档中的脚本元素（通过转义斜杠）。

```
<script>
    var data = <?php echo json_encode($data); ?> ;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:28:02.963

使用 PHP 函数[urlencode(...)](http://php.net/manual/en/function.urlencode.php) 或[base64_encode(...)](http://php.net/manual/en/function.base64-encode.php)需要更高级的保护。

我通常使用 urlencode，在 Javascript 端使用 unescape 来解码 URL 格式数据。

# image - 图像处理 - 二阶方向导数

> ID：12317141
> 
> 赞同：1
> 
> 时间：2012-09-07T11:23:15.870
> 
> 标签：image, optimization, image-processing, filter, signals

为了检测山谷，我想在信号具有最大二阶导数的方向上找到我的 2D 信号的最小值。

我认为我可以在每个像素上计算二阶导数 wrt xx, yy, xy, yx 的大小，取其中的最大值，看看我的像素是否是这个方向上的局部最小值。

首先，您认为我这样做是对的吗？

其次，计算方向导数的滤波器是什么样的？我有个主意这是

001111100

001111100

001111100

00-2-2-2-2-2-200

00-2-2-2-2-2-200

00-2-2-2-2-2-200

001111100

001111100

001111100

对于沿 yy 的导数，

000000000

01110-1-1-10

01110-1-1-10

01110-1-1-10

000000000

0-1-1-101110

0-1-1-101110

0-1-1-101110

000000000

对于沿 xy 的导数等...

但我希望有人确认或暗示相关文档。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:57:40.157

我建议试试这个：

1.  平滑：如果图像可能包含噪声，我会先用高斯核对其进行过滤，因为二阶导数对噪声非常敏感。

2.  二阶导数：用离散拉普拉斯算子对图像进行滤波，例如：0 1 0；1 -4 1; 0 1 0

3.  求二阶导数的局部最大值：用这个掩码扩张图像：1 1 1；1 0 1; 1 1 1

所有三个步骤在 OpenCV\Matlab 中都有现成的实现。

# django - 调用 News.objects.all()[:x] 来获取固定数量的记录是否正确

> ID：12317143
> 
> 赞同：3
> 
> 时间：2012-09-07T11:23:24.273
> 
> 标签：django, django-models

我在问什么：如果我需要从 db 中提取前 10 条最新新闻。我找到了唯一的方法

```
 News.objects.all().order_by('-pub_date')[:10] 
```

但它安全吗？这个建筑如何运作？它会从数据库中获取所有新闻记录，然后对它们进行排序，然后只取 10 条吗？或者它会优化查询并且只从数据库中获取 10 条最新记录？这很重要，因为我在数据库中确实有超过 1000 条新闻记录，并且从数据库中获取它们需要很长时间，甚至需要更长的时间来对它们进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:25:04.873

这是安全的[QuerySets as lazy](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)。在您的情况下，最多将获取 10 个对象，因为数据库查询将被优化为仅从数据库返回 10 条记录。

您可以阅读有关[何时评估 QuerySet](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)和[限制 QuerySet](https://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets)的更多信息（本节处理切片 QuerySet，这就是您正在做的事情）。

# objective-c - 是否可以使用 UIBackgroundModes 和 bluetooth-central 发送附近的消息？

> ID：12317148
> 
> 赞同：1
> 
> 时间：2012-09-07T11:23:59.740
> 
> 标签：objective-c, xcode, bluetooth, multitasking

我想创建一个应用程序，当人们使用同一个 Iphone 应用程序时，它将发送消息或弹出警报。要求是，即使在后台或睡眠模式下也需要弹出警报。我找到了一个名为 UIBackgroundModes 和 bluetooth-central 的函数，它允许在后台移动蓝牙。有人帮助我，如果有示例代码，我也会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:43:34.167

不是在应用程序处于后台模式时。对于后台模式，您将不得不退回到推送通知。

苹果文档摘录：

[点对点连接提供本地无线和蓝牙网络](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)

**点对点连接**允许您的游戏在多个基于 iOS 的设备之间创建自组织蓝牙或本地无线网络。尽管设计时考虑到了游戏，但该网络对于应用程序用户之间的任何类型的数据交换都很有用。例如，应用程序可以使用对等连接来共享电子名片或其他数据。

*iOS 3.0 及更高版本中提供了对等连接。*

# numpy - 使用来自另一个矩阵的索引引用矩阵中的行

> ID：12317151
> 
> 赞同：1
> 
> 时间：2012-09-07T11:24:09.630
> 
> 标签：numpy, scipy

你有一个原始的稀疏矩阵 X：

```
>>print type(X) 
>>print X.todense()
<class 'scipy.sparse.csr.csr_matrix'>
[[1,4,3]
 [3,4,1]
 [2,1,1]
 [3,6,3]] 
```

你有第二个稀疏矩阵 Z，它是从 X 的某些行派生的（比如说值加倍，所以我们可以看到两个矩阵之间的差异）。在`pseudo-code`：

```
>>Z = X[[0,2,3]]
>>print Z.todense()
[[1,4,3]
 [2,1,1]
 [3,6,3]]

>>Z = Z*2
>>print Z.todense()
[[2, 8, 6]
 [4, 2, 2]
 [6, 12,6]] 
```

使用 X 中的 ORIGINAL 索引检索 Z 中的行的最佳方法是什么。例如，在*伪代码*中：

```
>>print Z[[0,3]]
[[2,8,6]              #0 from Z, and what would be row **0** from X)
 [6,12,6]]            #2 from Z, but what would be row **3** from X) 
```

也就是说，如何使用引用原始矩阵 X 中原始行位置的索引从 Z 中检索行？为此，无论如何都不能修改 X（不能向矩阵 X 添加索引列），但没有其他限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:56:12.877

如果您在数组中有原始索引`i`，并且其中的值按升序`i`排列（如您的示例中所示），则可以使用 numpy.searchsorted(i, [0, 3]) 查找 Z 中与索引对应的索引[0, 3] 在原始 X 中。这是 IPython 会话中的演示：

```
在 [39] 中：X = csr_matrix([[1,4,3],[3,4,1],[2,1,1],[3,6,3]])

在 [40] 中：X.todense()
出[40]：
矩阵([[1, 4, 3],
        [3, 4, 1],
        [2, 1, 1],
        [3, 6, 3]])

在 [41] 中： i = 数组（[0, 2, 3]）

在 [42] 中：Z = 2 * X[i]

在 [43] 中：Z.todense()
出[43]：
矩阵([[ 2, 8, 6],
        [ 4, 2, 2],
        [ 6, 12, 6]])

在 [44] 中：Zsub = Z[searchsorted(i, [0, 3])]

在 [45] 中：Zsub.todense()
出[45]：
矩阵([[ 2, 8, 6],
        [ 6, 12, 6]])

```

# javascript - jquery $(this) 对象丢失问题

> ID：12317152
> 
> 赞同：2
> 
> 时间：2012-09-07T11:24:11.033
> 
> 标签：javascript, jquery, ajax, oop, object

我对 jQuery 的`$(this)`对象有疑问，让我错过了`this`代码中的元素：

```
 $('.star').click(function (){
    var id   = $(this).parent().attr('id').split('rating')[1];
    var vote = $(this).index() + 1;
    var ThisStar = $(this);

    alert(ThisStar.parent().html())

    $.ajax({
        type: 'POST',
        url:  EXECUTION_URL + 'ajax/rate.php',
        data: {'article' :id  ,'rate': vote},
        success:function(data,tt,ff){
            alert(ThisStar.parent().html())
        }
  }); 
```

第一次警报触发：被点击节点的父节点的真实内容第二次警报触发：null ！！！为什么改成ajax了？还是出于其他原因？请告诉我一个解决这个问题的好方法

**好的，实际上我检查了我的代码，在 ajax 函数之后有两行删除了`this`对象中的存储节点，并且由于 ajax 函数是异步函数，所以在成功函数内的代码之前执行的两行 >> 谢谢大家**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:01:15.790

您的代码应该可以正常工作，**[请检查证明](http://jsfiddle.net/PcLD6/)**。唯一的区别是：

```
success:function(data,tt,ff){
    alert(ThisStar.parent().html())
} 
```

对比

```
success:function(data,tt,ff){
    alert(ThisStar.parent().html())
}}); 
```

# objective-c - GCD：如何从串行队列中删除等待任务？

> ID：12317154
> 
> 赞同：12
> 
> 时间：2012-09-07T11:24:13.093
> 
> 标签：objective-c, ios, grand-central-dispatch

首先我创建一个这样的串行队列

```
static dispatch_queue_t queue = dispatch_queue_create("myQueue", DISPATCH_QUEUE_SERIAL); 
```

然后，在某个未知的时间点，一个任务像这样被添加到队列中

```
dispatch_async(queue, ^{
    // do something, which takes some time
}); 
```

如果第一个任务尚未完成，则新任务将等到第一个任务完成（这当然是串行队列的用途）。

但是如果我将 5 个新任务添加到队列中，而原来的第一个任务仍在运行，我不想执行新任务 no.1，然后是 no.2，然后是 no.3 等等，而是想得到去掉task 1到task 4，在原来的第一个task完成后直接开始执行task no.5。

换句话说，如果我添加一个新任务，我想从队列中弹出任何等待任务（不是当前正在运行的任务）。

是否有内置机制，还是我必须自己实现？对于后者，我将如何识别队列中的单个任务并删除它们？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T14:39:44.967

一旦一个块被提交到 GCD 调度队列，它就会运行。没有办法取消它。如您所知，您可以实现自己的机制来提前“中止”块执行。

一个更简单的方法是使用`NSOperationQueue`，因为它已经提供了一个用于取消挂起操作（即那些尚未运行的操作）的实现，并且您可以使用 new-ish`addOperationWithBlock`方法轻松地将块排队。

虽然`NSOperationQueue`是使用 GCD 实现的，但我发现 GCD 在大多数情况下更容易使用。但是，在这种情况下，我会认真考虑使用`NSOperationQueue`，因为它已经处理取消挂起的操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T12:26:53.487

随着戴维斯的回答让我走上正轨，我成功地做到了这一点

```
taskCounter++;
dispatch_async(queue, ^{
    if (taskCounter > 1) {
        taskCounter--;
        NSLog(@"%@", @"skip");
        return;
    }
    NSLog(@"%@", @"start");
    // do stuff
    sleep(3);
    taskCounter--;
    NSLog(@"%@", @"done");
}); 
```

`taskCounter`必须是 ivar 或属性（用 初始化`0`）。在这种情况下，它甚至不需要该`__block`属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T11:28:15.327

你处理这个问题的方法是使用一个 ivar 来指示他们应该返回的排队块：

```
^{
  if(!canceled) {
    ... do work
  }
} 
```

您也不需要使用简单的布尔值 - 您可以使其更复杂 - 但总体思路是在执行任何操作之前使用块查询的一个或多个 ivars。

我使用这种技术（但没有发明它）取得了巨大的成功。

# python - 使用 pcolormesh 绘制轨道数据

> ID：12317155
> 
> 赞同：3
> 
> 时间：2012-09-07T11:24:15.513
> 
> 标签：python, raw-data, satellite-image, matplotlib-basemap

我正在尝试映射具有相关纬度和经度的数据集。我正在使用的数据的详细信息如下：

```
Variable   Type       Data/Info
-------------------------------
lat    ndarray    1826x960, type `float64`
lon    ndarray    1826x960, type `float64`
data   ndarray    1826x960, type `float64` 
```

然后我创建了一个底图：

```
m = Basemap(projection='cyl', llcrnrlon=-180, urcrnrlon=180, llcrnrlat=-40, urcrnrlat=40, resolution='c') 
```

现在，在创建的底图上，我将使用 pcolormesh 绘制上述数据集：

```
m.drawcoastlines()
m.drawcountries
x,y = m(lon,lat)
m.pcolormesh(x,y,data)
m.colorbar()
plt.show() 
```

这给出了下图： [温度亮度图](http://i.stack.imgur.com/W5LNF.png)

但是，如果我在覆盖整个经度范围（-180 到 180）的数据集（大小 2691x960，同样适用于 lon 和 lat）上执行类似的绘图，我会得到一个“奇怪的条”： [奇怪的条](http://i.stack.imgur.com/vj47g.png)

我很确定由于数据集的重叠而出现了奇怪的条。同样的情节已经在 matlab 中进行过，它工作得很好。

请告诉我问题是什么，可以做些什么来删除栏，在 python 中绘制这种数据的其他方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:18:11.607

我认为您遇到了我之前遇到的问题。这里的问题是，当底图尝试创建多边形时，它使用的插值方法似乎无法正确处理本初子午线。实际穿过本初子午线的像素被插入到一个在全球范围内延伸的多边形中。

我使用的解决方案是将文件拆分为两个掩码数组（或者只是在不同时间以两种不同方式掩码原始数组），一个掩码东半球，一个掩码西半球，然后将它们都映射到相同的坐标区对象。

编辑：另一个解决方案可能是让你的经度范围从 -179.99 到 179.99 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T21:20:44.910

我没有用任何东西给我这个问题，但它看起来像使用[mpl_toolkit.basemap.addcyclic方法](http://matplotlib.org/basemap/api/basemap_api.html#mpl_toolkits.basemap.addcyclic)[在这里](https://stackoverflow.com/a/18320385/943773)提供了一个类似的探测问题的解决方案。

从文档：

`arrout, lonsout = addcyclic(arrin, lonsin)`将经度中的循环（环绕）点添加到`arrin`和`lonsin`，假设经度是 的最右侧维度`arrin`。

# c# - Microsoft.Win32.TaskScheduler RandomDelay

> ID：12317157
> 
> 赞同：3
> 
> 时间：2012-09-07T11:24:19.460
> 
> 标签：c#, scheduled-tasks, scheduler

我编写了一个创建计划任务的小程序。我希望这项任务每天在下午 6 点到 11.59 之间的任何时间运行。出于这个原因，我创建了这个触发器

```
td.Triggers.Add(new DailyTrigger
                {
                    DaysInterval = 1,
                    StartBoundary = DateTime.Today + TimeSpan.FromHours(18),
                    RandomDelay = TimeSpan.FromMinutes(359)
                }); 
```

问题是在任务计划程序窗口中，我创建的任务总是设置为在 6

![在此处输入图像描述](../Images/83131c3f5396c5bc01a75053dfd38c74.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-14T21:19:01.997

这是实现结果的正确语法。不幸的是，Windows 中的任务计划程序应用程序不显示有关延迟的信息。（顺便说一句，我是该库的作者，并且我 100% 确信您的任务将按照您的意愿执行。）有关 RandomDelay 属性功能的详细信息，请参阅[Microsoft 文档](https://docs.microsoft.com/en-us/windows/desktop/taskschd/dailytrigger-randomdelay)。

# textbox - TextBox 的 InputScope 不再工作了？

> ID：12317159
> 
> 赞同：0
> 
> 时间：2012-09-07T11:24:27.697
> 
> 标签：textbox, microsoft-metro, winrt-xaml, inputscope

在我的 WinRT/C# 应用程序中，我有一个带有各种输入框 ( `TextBox`) 的 XAML 文件。每个文本框都`InputScope`定义了一个属性，因此屏幕键盘应该单独显示（例如 for `InputScope="Number"`）。

在 Win8 Release Preview 中，`InputScope`产生了正确的结果并显示了不同的键盘布局。现在我已经切换到 Win8 RTM，这似乎不再起作用了。无论`InputScope`属性值如何，屏幕键盘布局每次都是相同的（默认）布局。

谁能重现此问题或可以给我提示如何解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:10:00.683

我刚刚做了以下测试...

```
<TextBox InputScope="Number"/> 
```

它工作正常。还尝试了其他几个输入范围，它们也都正常工作。

# java - Selenium WebDriver 中的 HtmlUnitWebdriver

> ID：12317162
> 
> 赞同：2
> 
> 时间：2012-09-07T11:24:50.253
> 
> 标签：java, selenium, webdriver

有什么方法可以完全执行包含 HtmlUnit webdriver 中的 Ajax 调用的 javascript 吗？由于它是隐形驱动程序，我们无法跟踪它的工作。我不希望答案为

```
 Webdriver driver = new HtmlUnitDriver(true);
   or
  driver.setjavascriptenabled(true); 
```

如果有人知道 HtmlUnit 的内部工作，请提供任何帮助，我真的很感激，因为我正面临这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:40:20.940

我没有深入研究 HtmlUnit webdriver 但是 jsExecutor 对我来说已经足够了 js execution 。例如

```
String cssLocator=.... 
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssLocator+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

# php - 如何使用 PHP、Twitter API 来获得更多或所有关注者？

> ID：12317163
> 
> 赞同：1
> 
> 时间：2012-09-07T11:24:51.707
> 
> 标签：php, api, twitter

我有一个 twitter api php 脚本成功吐出我的最后 100 个关注者

```
$flwrs_url = "http://api.twitter.com/1/statuses/followers/exampleuser.json";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $flwrs_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$curlout = curl_exec($ch);
curl_close($ch);
$response = json_decode($curlout, true);

foreach($response as $friends){
    $id = $friends['id'];   
$screen_name = $friends['screen_name'];
.... 
```

（我使用 exampleuser 而不是我自己的帐户）如何扩展它以包括更多或所有我的关注者？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:02:36.537

感谢弗洛里安的回答。顺便说一句，我想我找到了正确的方法来做我正在寻找的事情。如我错了请纠正我。

使用后：

```
 $code=$tmhOAuth->request('GET', $tmhOAuth->url('1/followers/ids'),
            array('screen_name' => $user, 'cursor' => $cursor)); 
```

获取所有 5000 个关注者（用户 ID）的技术。我使用以下代码一次抓取 100 个（用户详细信息）批次：

```
$status_url = "http://api.twitter.com/1/users/lookup.json?user_id=";
$lastNum=$last; // $lastNum=100;
$i=$first;     // $i=0;
while($i<$lastNum){
    if ($i==($lastNum-1)){
        $status_url = $status_url . "$followers[$i]";
    }else{  
        $status_url = $status_url . "$followers[$i],";
    }

    $i++;
}

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $status_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$curlout = curl_exec($ch);
curl_close($ch);
$response = json_decode($curlout, true);

$i = 0;
foreach($response as $friends){
    $id = $friends['id'];
    $screen_name = $friends['screen_name'];
    $name = $friends['name'];
    $thumb = $friends['profile_image_url'];
    $url = $friends['screen_name'];
    $location = $friends['location'];
    $description = $friends['description'];
    echo "$i) $id $screen_name $name $location $description<br />";
    $i++;
} 
```

我意识到我需要在这些“100 批”之间放置“睡眠”，但我不太确定要使用多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:34:28.200

根据[Twitter API 文档](https://dev.twitter.com/docs/api/1/get/followers/ids)，`GET followers/ids`该请求应返回多达 5000 个关注者。

但是，如果 API 没有返回所有关注者，则响应中应该有一个`next_cursor`元素可用于检索下一批关注者。您只需将`next_cursor`as的值附加`cursor`到请求中（另请参阅 API 文档）。

请注意，您使用的是最近已弃用的 Twitter API 版本 1。也就是说，它可能会在明年年初停止工作。您应该尽快升级到[1.1 版](https://dev.twitter.com/docs/api/1.1)。有新的指导方针，其中之一是所有请求都必须通过 oAuth 进行身份验证。

# javascript - 使用 CSS 和 Javascript 进行重定向 - 手持设备

> ID：12317165
> 
> 赞同：1
> 
> 时间：2012-09-07T11:25:13.677
> 
> 标签：javascript, jquery, css

我一直在尝试根据所有桌面和手持设备上的屏幕尺寸进行重定向，我猜媒体查询是一个很好的答案，因为当我使用 javascript 检测到屏幕尺寸时，`screen.width`不同的浏览器返回给我不同的屏幕尺寸，这很烦人为什么会这样。好吧，我需要知道两件事，以下代码会像 javascript 一样检测屏幕，还是一般会检测到 100% 准确的屏幕尺寸？如果是这样，如果以下css规则变为真，我如何触发重定向javascript代码？

```
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) {
  /* iPhone, Android rules here */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:02:44.877

您可以使用 jQuery 或 Mootools 之类的框架来避免浏览器不一致。

我可能写了一些你想要的东西：http: [//jsfiddle.net/aUW4N/](http://jsfiddle.net/aUW4N/)

# python - 如何将数据聚合到 Graphite

> ID：12317166
> 
> 赞同：1
> 
> 时间：2012-09-07T11:25:14.280
> 
> 标签：python, node.js, installation, monitoring, graphite

我正在使用模块[测量](https://github.com/felixge/node-measured)节点服务器来监控我的节点服务器，我需要将监控的统计信息汇总到[Graphite](http://graphite.wikidot.com/start)。这让我感到困惑和沮丧。试图理解 Graphite 指南一点也不顺利，它显示了一个 unix 世界命令指南，我正在使用 windows。尝试安装所需的组件，但 python 命令显示不支持任何命令。任何人都有一个易于理解和支持 Windows 的好指南，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:27:55.520

我对 Windows 上的石墨知之甚少，但即使在 linux 上也很难设置，所以我什至不会在 Windows 上尝试。它之所以复杂，部分原因是石墨实际上是由几个协同工作的组件组成的。

我发现开始使用石墨的最简单方法是下载并使用已经构建的虚拟机映像。例如，有一些[vagrant 图像](http://warwickp.com/2012/03/vagrant-box-with-graphite-statsd-gdash-nginx)已经有石墨和 statsd。

[托管石墨](http://www.hostedgraphite.com/)是另一种可能性，但根据您的数据保留需求，它并不是非常便宜，而且我不确定我是否了解安全模型。

如果您愿意在安装过程中一头雾水，[这里有一个截屏视频](http://obfuscurity.com/2012/08/Screencast---Installing-Graphite-from-Source)，一步一步地展示如何安装。那个[含糊不清的博客](http://obfuscurity.com/Tags/Graphite)也提供了关于石墨一般使用的非常丰富的信息。

# ruby-on-rails - 验证此 belongs_to 中的存在

> ID：12317170
> 
> 赞同：1
> 
> 时间：2012-09-07T11:25:31.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, belongs-to

我有产品和品牌产品型号：

```
class Product < ActiveRecord::Base
  attr_accessible :brand_id, :title
  belongs_to :brand

  validates :title, :presence => true
  validates :brand, :presence => {:message => 'The brand no exists'}
end 
```

和品牌模型

```
class Brand < ActiveRecord::Base
  attr_accessible  :name
  validates :name, :presence => true

  has_many :products, :dependent => :destroy
end 
```

我想验证是否存在具有该品牌名称的产品。我的意思是我可以在不同品牌中拥有 2 件同名的产品，但不在同一个品牌中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:57:24.603

您可以使用以下`uniqueness`验证`scope`：

```
validates :name, :uniqueness => { :scope => :brand_id } 
```

请注意，您必须指定`:brand_id`而不是`:brand`，因为无法对关系进行验证。

如果您不知道，我建议您阅读[Active Record Validations and Callbacks](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)指南。

注意：语法`{:foo => 'bar'}`被替换（自 Ruby 1.9.2 起）为`{foo: 'bar'}`.

# ruby-on-rails - 表示现有 has_many 模型的 Rails 多态关联

> ID：12317173
> 
> 赞同：1
> 
> 时间：2012-09-07T11:25:38.613
> 
> 标签：ruby-on-rails, associations, polymorphism

我想为现有的卡片模型创建一个“时间线”功能。卡片已经有_many Notes和has_many Attachments。我希望能够：

*   在一个统一的集合中访问笔记、附件（以及最终的其他模型），使用一种不错的方法，例如：*card.timeline*
*   仍然可以访问卡片的注释和附件，例如：*card.notes*
*   仍然可以访问笔记的父卡，例如：*note.card*
*   能够将项目添加到卡片的时间线，API 如下：*card.timeline << note*

我想我的数据库设置正确，这是我似乎无法正确的关联声明。这是我的架构：

```
 create_table "cards", :force => true do |t|
    t.string   "name"
  end

  create_table "timeline_items", :force => true do |t|
    t.integer  "card_id",    :null => false # FK from cards table
    t.integer  "item_id",    :null => false # FK from notes or attachments table
    t.string   "item_type",  :null => false # either 'Note' or 'Attachment'
  end

  create_table "notes", :force => true do |t|
    t.text     "content"
  end

  create_table "attachments", :force => true do |t|
    t.string   "file_file_name"
  end 
```

任何人都知道我如何使用 ActiveRecord 来实现这一点？它让我胡思乱想！

一个起点是：

```
class Card < ActiveRecord::Base
  has_many    :timeline_items
  has_many    :notes,       :through => :timeline_items, :source => :item, :source_type => 'Note', :order => 'updated_at DESC'
  has_many    :attachments, :through => :timeline_items, :source => :item, :source_type => 'Attachment', :order => 'updated_at DESC'
end

class TimelineItem < ActiveRecord::Base
  belongs_to :card
  belongs_to :item, :polymorphic => true
end

class Note < ActiveRecord::Base
  has_one     :card, :through => :timeline_items
  has_one     :timeline_item, :as => :item
end 
```

提前谢谢~Stu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:04:24.867

好的 - 在为此苦苦挣扎之后，我在发布到 stackoverflow 后的 10 分钟内破解了它！典型的。

为了避免其他人将头撞到墙上，这就是我的错误：

注意应该是：

```
class Note < ActiveRecord::Base
  has_one     :card, :through => :timeline_item #not timeline_items
  has_one     :timeline_item, :as => :item
end 
```

就是这样！我试图使用[本文](https://gist.github.com/1242485)中使用的创建方法，但实际上这不是必需的。

这是控制台输出，显示 sql 语句都在使用timeline_items 表：

```
1.9.2-p290 :009 > c = Card.find(547)
  Card Load (0.3ms)  SELECT `cards`.* FROM `cards` WHERE `cards`.`id` = 547 LIMIT 1
 => #<Card id: 547, name: "Duplicates appearing"> 

1.9.2-p290 :010 > c.notes.count
   (0.3ms)  SELECT COUNT(*) FROM `notes` INNER JOIN `timeline_items` ON `notes`.`id` = `timeline_items`.`item_id` WHERE `timeline_items`.`card_id` = 547 AND `timeline_items`.`item_type` = 'Note'
 => 4 

1.9.2-p290 :011 > c.notes.last.card
  Note Load (2.7ms)  SELECT `notes`.* FROM `notes` INNER JOIN `timeline_items` ON `notes`.`id` = `timeline_items`.`item_id` WHERE `timeline_items`.`card_id` = 547 AND `timeline_items`.`item_type` = 'Note' ORDER BY updated_at ASC LIMIT 1
  Card Load (3.2ms)  SELECT `cards`.* FROM `cards` INNER JOIN `timeline_items` ON `cards`.`id` = `timeline_items`.`card_id` WHERE `timeline_items`.`item_id` = 620 AND `timeline_items`.`item_type` = 'Note' LIMIT 1
 => #<Card id: 547, name: "Duplicates appearing"> 

1.9.2-p290 :013 > c.notes << Note.new(:content => 'Holee Sheeet Dawg', :user_id => 1)
   (0.2ms)  BEGIN
  SQL (0.6ms)  INSERT INTO `notes` (`content`, `created_at`, `updated_at`, `user_id`) VALUES ('Holee Sheeet Dawg', '2012-09-07 11:38:55', '2012-09-07 11:38:55', 1)
   (0.1ms)  COMMIT
   (0.1ms)  BEGIN
  SQL (0.3ms)  INSERT INTO `timeline_items` (`card_id`, `created_at`, `item_id`, `item_type`, `updated_at`) VALUES (547, '2012-09-07 11:38:55', 625, 'Note', '2012-09-07 11:38:55')
   (0.5ms)  COMMIT
  Note Load (1.8ms)  SELECT `notes`.* FROM `notes` INNER JOIN `timeline_items` ON `notes`.`id` = `timeline_items`.`item_id` WHERE `timeline_items`.`card_id` = 547 AND `timeline_items`.`item_type` = 'Note' ORDER BY updated_at DESC
 => [#<Note id: 625, content: "Holee Sheeet Dawg", user_id: 1, created_at: "2012-09-07 11:38:55", updated_at: "2012-09-07 11:38:55">, .....]

1.9.2-p290 :014 > c.notes.count
   (0.7ms)  SELECT COUNT(*) FROM `notes` INNER JOIN `timeline_items` ON `notes`.`id` = `timeline_items`.`item_id` WHERE `timeline_items`.`card_id` = 547 AND `timeline_items`.`item_type` = 'Note'
 => 5 
```

**编辑：**

我只是注意到我对*card.timeline*的要求还没有得到满足。因为连接来自多个表，所以我无法让 AR 为我处理连接（理想情况下 *card.timeline_items.join(:notes, :attachments)* 可以做到这一点）。

为了解决这个问题，我在我的卡片类中添加了以下方法：

```
 def timeline
    (self.notes + self.attachments).sort { |a,b| a.updated_at <=> b.updated_at }
  end 
```

# junit - 在 Assert 上使用哪个 JUnit 包？

> ID：12317174
> 
> 赞同：2
> 
> 时间：2012-09-07T11:25:38.913
> 
> 标签：junit

> **可能重复：**
> [2 个 JUnit Assert 类之间的差异](https://stackoverflow.com/questions/291003/differences-between-2-junit-assert-classes)

我的类路径中有两个 junit-4.8.1.jar，我的 IDE 的自动完成功能为我提供了以下两个 Assert 类：

*   junit.framework.Assert
*   org.junit.Assert

我应该使用哪一个？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:27:31.273

我更喜欢`org.junit`JUnit 中的所有东西。它是代码来自的源 URL。另一个是遗留下来的，因此它不会破坏旧代码。

选择一个并保持一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:29:01.737

引用[重复的](https://stackoverflow.com/a/291074/60462)...

> JUnit 3.X：junit.framework.Assert JUnit 4.X：org.junit.Assert
> 
> 首选最新版本，尤其是在运行带有注释支持的 JDK5 及更高版本时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:31:01.773

Niether，使用`MatcherAssert`and `Hamcrest`with`assertThat`代替`assertTrue`/`assertFalse`

[匹配断言](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/MatcherAssert.html)

# javascript - JavaScript 从字符串中删除尾随空格和句点

> ID：12317176
> 
> 赞同：1
> 
> 时间：2012-09-07T11:25:40.627
> 
> 标签：javascript, regex, string

我正在尝试从字符串中删除所有尾随空格和句点，以便如果我采用以下任一示例：

```
var string = "  ..  bob is a string ."; 
```

或者

```
var string = " .  bob is a string . .."; 
```

他们最终会成为：

```
"bob is a string" 
```

我知道蹲着，但我在[这里](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)`regex`找到了一个删除尾随空格的功能：

```
str.replace(/^\s+|\s+$/g, ""); 
```

我尝试修改以包含句点，但它仍然只删除尾随空格字符：

```
str.replace(/^[\s+\.]|[\s+\.]$/g, ""); 
```

谁能告诉我这是如何完成的，或许可以解释一下我习惯使用的正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:35:02.007

您的正则表达式几乎是正确的，您只需将量词 ( `+`) 放在字符类 ( `[]`) 之外：

```
var str = " .  bob is a string . ..";
str.replace(/^[.\s]+|[.\s]+$/g, "");
//"bob is a string" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:37:50.600

尝试这个：

```
var str = " .  bob is a string . ..";
var stripped = str.replace(/^[\s.]+|[\s.]+$/g,""); 
```

在字符类 ([]) 中，`.`不需要转义。这将删除任何前导或尾随空格和句点。

# .htaccess - Magento 使用 302 重定向到基本 url，我如何让它使用 301

> ID：12317177
> 
> 赞同：5
> 
> 时间：2012-09-07T11:25:43.517
> 
> 标签：.htaccess, magento, redirect, seo, magento-1.4

我在 firebug 中注意到我的 magento 商店的非 www 版本使用`302`. 出于 SEO 目的，我希望它使用`301`.

**我如何尝试修复它**

我去了系统 > 配置 > 常规 > Web > Url 选项，如果请求的 URL 不匹配，我的设置重定向到基本 URL 设置为是（只有 2 个选项：是或否）![Magento 1.4 URL 重写选项](../Images/43b2d64c16088af839087a34ad7b3240.png)

**重要说明**

我正在使用 Magento v1.4.0.1 我的`.htaccess`文件包含以下关于 URL 重写的内容：

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine on
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l
    RewriteRule .* index.php [L]
</IfModule> 
```

如何将重定向方法更改为`301`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T15:22:39.733

从 1.6.2.0 开始，似乎可以在管理面板中选择重定向方法，无需修改*.htaccess*。

只需转到*System -> Configuration -> Web -> Url Options*并将*Auto-redirect to Base URL*设置为您的首选方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T11:29:35.117

尝试将最后一行更改为：

```
RewriteRule .* index.php [R=301,L] 
```

请参阅[Apache mod_rewrite RewriteRule Directive](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)关于标志的部分。

# android - Android 连接 BroadcastReceiver 的启动速度不够快

> ID：12317181
> 
> 赞同：1
> 
> 时间：2012-09-07T11:25:58.210
> 
> 标签：android, android-activity, android-lifecycle, connectivity

我在我的应用程序中扩展了 Application 类。在那个类中，我有一个等待连接更改的 BroadcastReceiver。如果我切换到飞行模式，它会立即识别出连接丢失并接收到广播，但是如果我失去数据连接（即在地下等），即使没有互联网相关，也需要几秒钟到几分钟才能启动任务成功完成（即使您尝试在浏览器中浏览）。**有没有更精确的方法来找出互联网连接何时首次丢失？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:49:20.113

找出 Internet 连接何时丢失的一种方法是对网络错误进行适当的异常检查。

如果抛出网络异常（套接字超时、I/O 错误等），您可以将应用程序的状态设置为断开连接。当然，这仅在您积极尝试通过网络发送或接收数据时才有效。

如果连接通知非常重要，您可以使用远程服务器（例如 ping 谷歌服务器）进行定期检查，但这会耗尽您的电池，因为过于频繁地接触网络往往会使无线电保持清醒并消耗电力。

# cordova - 在 JQuery Mobile Phonegap 中，如果列表项位于 Android 中的固定页脚（选项卡）下，选项卡将不起作用

> ID：12317186
> 
> 赞同：3
> 
> 时间：2012-09-07T11:26:11.140
> 
> 标签：cordova, jquery-mobile, jquery, footer

在 JQuery Mobile + Phonegap 中，我在屏幕中有项目列表，固定页脚有 4 个按钮。当滚动时任何列表项出现在页脚下并点击标签（页脚中的按钮）时，选项卡事件不起作用，列表（位于选项卡按钮下方）事件正在触发。

升级到 Cordova 后出现此问题。

# c# - 鼠标离开时关闭 wpf 弹出窗口

> ID：12317187
> 
> 赞同：2
> 
> 时间：2012-09-07T11:26:15.470
> 
> 标签：c#, wpf, events

我有一个标签，其鼠标悬停事件会打开一个弹出窗口。

我正在尝试处理弹出窗口上的 mouseleave 事件并关闭弹出窗口。

我遇到的问题是 mouseleave 事件直到我单击弹出窗口外的任何位置才被触发。

有人可以告诉我我做错了什么吗？

这是代码。

XAML：

```
<Popup Name="myPopup" IsOpen="False" PlacementTarget="{Binding ElementName=myButton}" StaysOpen="False" MouseLeave="myPopup_MouseLeave">

    <DataGrid MinHeight="400" MinWidth="300" Name="dtgPopup" AutoGenerateColumns="False" ItemsSource="{Binding}" SelectionChanged="dtgPopup_SelectionChanged"  IsReadOnly="True" CanUserAddRows="False">

    </DataGrid>

</Popup>

<Label Name="recentPanels" Content="Recent Panels" MouseEnter="recentPanels_MouseEnter"/> 
```

事件处理程序：

```
private void recentPanels_MouseEnter(object sender, MouseEventArgs e)
        {
            myPopup.IsOpen = true;
        }

        private void myPopup_MouseLeave(object sender, MouseEventArgs e)
        {
            myPopup.IsOpen = false;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:49:29.333

如果你愿意，你可以只在 wpf 中处理这个问题，这取决于你想让你的代码保持多干净。这样您就可以使用 IsMouseOver 而不是检测 MouseLeave/MouseEnter。

在 TextBlock 中使用 MultiDataTrigger 触发资源，如下所示：

```
<MultiDataTrigger>
  <MultiDataTrigger.Conditions>
    <Condition
      Binding="{Binding Mode=OneWay, RelativeSource={RelativeSource Self}, Path=IsMouseOver}" 
      Value="True"
  />
  </MultiDataTrigger.Conditions>
  <Setter
    TargetName="myPopup" 
    Property="IsOpen" 
    Value="True" 
  />
</MultiDataTrigger> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:27:36.083

根据我的经验，似乎需要单击鼠标才能意识到鼠标指针实际上已经离开了表单或弹出窗口。一个易于实现的解决方法如下，而不是使用 MouseLeave 事件，而是使用 OnMouseLeave。

```
protected virtual void OnMouseLeave(MouseEventArgs e)
{
    myPopup.IsOpen = false;
} 
```

更多信息： http: [//msdn.microsoft.com/en-us/library/system.windows.controls.control.onmouseleave (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.onmouseleave(v=vs.95).aspx)

# twitter-bootstrap - 带有导航栏和不同窗口大小的 Bootstrap clear-top

> ID：12317189
> 
> 赞同：1
> 
> 时间：2012-09-07T11:26:30.703
> 
> 标签：twitter-bootstrap

我正在使用 Twitter Bootstrap，我的页面顶部有一个`.navbar-fixed-top`导航，在我添加`padding-top: 25px`到`<body>`. 问题是当窗口大小低于时`980px`，`padding`我的顶部`navbar`而不是它后面，我得到的是顶部丑陋的白色空白空间。知道如何解决吗？

编辑：感谢 simbirsk 的回答，我刚刚意识到，除了“空白”出现之外，当您滚动它时，我的导航栏现在不再跟随滚动（它只停留在页面顶部）。这也是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:31:28.547

一个快速的解决方案：不要在冲突的解决方案下添加该填充。将您的 CSS 更改为：

```
@media (min-width: 979px) {
    body {
        padding-top: 25px;
    }
} 
```

编辑：对于新问题。
这是标准的响应行为。如果您不喜欢它的工作方式，您可以：

1.  不链接`bootstrap.responsive.min.css`
2.  自定义您的 Bootstrap [http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)
3.  编写自己的媒体查询

# c# - 如何将图片框添加到 动态的

> ID：12317191
> 
> 赞同：0
> 
> 时间：2012-09-07T11:26:32.130
> 
> 标签：c#, list, picturebox

我想添加 23 个我一直在表单中使用的图片框。我尝试过这种方式，但没有奏效：

```
List<PictureBox> pbList = new List<PictureBox>();

for (int i = 0; i < 23; i++)
  pbList.Add(pictureBox +i); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:29:18.697

您正在尝试按名称添加它们，您必须进行查找：

```
List<PictureBox> pbList = new List<PictureBox>();

for (int i = 0; i < 23; i++)
  pbList.Add((PictureBox)Controls.Find("pictureBox" + i)); 
```

编辑：如果您的图片框嵌套在其他控件中，则必须将“true”传递给 Find() 方法，以便搜索所有子项。其他解决方案（包括我的）将仅搜索直接在控件容器“控件”中的图片框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:34:54.643

```
var pbList = Controls.OfType<PictureBox>().Select(a => a.Name.StartsWith("pictureBox")); 
```

# android - 如何在 Android 原生中使用 Facebook OAuth？

> ID：12317192
> 
> 赞同：2
> 
> 时间：2012-09-07T11:26:34.517
> 
> 标签：android, facebook, sdk, oauth, native

我正在使用官方 Facebook Android SDK 将 Facebook 集成到我的应用程序中。在授权方面，SDK 使用一个自定义对话框，其中包含 Webview，加载 facebook 登录页面供用户输入用户名和密码，这听起来不错。

但是，当阅读 Facebook.java（在 SDK 包中）中“授权”方法的 javadoc 时，我发现“请注意，可以使用 OAuth 2.0 用户名和密码流程本地处理用户凭据，但这不受此支持开发工具包"

我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:56:56.840

嗯，我还没有使用 Facebook SDK，但我已经编写了基于 OAuth 2.0 的 Web 服务的通信以获取凭据；所以我的回答不会专门针对 Facebook，而是针对 OAuth 2.0。您需要与 OAuth 网络服务进行通信首先要获得一个令牌，为了获得它，您需要向网络服务提供您的私人开发人员密钥和密码以及您的客户密码和登录名。我认为这正是您的文档所谈论的内容。

请注意，良好的 web 服务提供了一个已经编写好的包装器，以免每个开发人员重写相同的包装器。如果您需要包装器示例，请查看 github 上的 Soundcloud Official Wrapper。

# browser - URL 自动附加路径

> ID：12317195
> 
> 赞同：0
> 
> 时间：2012-09-07T11:26:47.150
> 
> 标签：browser

我的浏览器中的 URL 有问题。

如果我输入[http://int-test.company.com/test.png](http://int-test.company.com/test.png)

它自动变成[了 http://int-test.company.com.company.com/test.png](http://int-test.company.com.company.com/test.png)

但是，如果我使用主机 ip（例如 10.218.132.18/test.png）键入它就可以正常工作。

而且它只发生在一个特定的主机名上。

我是否在浏览器设置中不知不觉地配置了一些东西？

知道为什么吗？

我在所有浏览器（IE、Google Chrome 和 Firefox）中都试过了，也遇到了同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:50:19.853

我怀疑这是您的 Web 服务器配置的问题，而不是浏览器的问题。它可能包含一些应该将您重定向到规范地址的检查，但检查不正确并将域添加到已经包含它的 URL。

要检查，请手动与服务器聊天。这很容易。采取`netcat`（通常称为`nc`）或`telnet`或`putty`，将它们定向到HTTP服务器端口（使用类似的命令`telnet int-test.company.com 80`（`putty`是一个例外——它有配置对话框））并输入

```
GET /test.png HTTP/1.1
Host: int-test.company.com 
```

和一个空行。如果答案以 3 开头的数字（300 到 303）开头，并且包含如下行

```
Location: http://int-test.company.com.company.com/test.png 
```

这就是问题所在。让服务器管理员修复配置。正确答案应该以数字 2 开头，几行之后是大量垃圾，这就是转储到控制台的 PNG 文件的样子。

# testing - 带有 emberjs 的 CI

> ID：12317196
> 
> 赞同：7
> 
> 时间：2012-09-07T11:26:48.570
> 
> 标签：testing, continuous-integration, ember.js, integration-testing, travis-ci

我目前正在研究将基于 ember.js 的应用程序的测试套件集成到 travis-ci 中的方法。所以首先，我们不在开源服务上，我们将它用于私人存储库等。

我查看了几个开源项目如何运行他们的 ember.js 测试套件，看起来他们用他们的项目设置了一个服务器，每当有人推送到存储库时，它可能会更新。[然后 PhantomJS](http://phantomjs.org)用于在该服务器上运行测试（实际上不在 travis-ci 本身上）。

我对这种方法的问题是，这增加了另一个步骤（并最终增加了复杂性）：我必须使用最新代码更新和维护服务器，以便我可以使用 PhantomJS 来运行测试套件。

另一个缺点是我看不到它如何使我们能够测试 PR（拉请求）。服务器必须使用 PR 中的代码进行更新。在合并之前测试 PR 是 travis-ci 的一大优点。

我找不到太多/任何关于仅通过 CLI 运行 ember.js 测试的信息——我希望有人在我之前解决了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T02:54:26.777

我无法回答你关于 travis-ci 的问题……但我可以提供一些关于使用 jasmine 对 ember.js 代码进行单元测试的想法。

在我开始使用 ember.js 之前，我正在使用 jasmine 和一个名为 jasmine-node 的简单 node.js 模块进行单元测试。这使我可以从命令行快速运行一套 jasmine 单元测试，而无需打开浏览器或使用“js-test runner”/等进行破解

当我使用 jasmine、jquery 和简单的 javascript 模块来保持我的 javascript 代码人类可读时，这非常有用。但是当我需要使用 ember/handlebars/etc 时，jasmine-node 模块就崩溃了，因为它希望你在全局和窗口上都有所有可用的东西。但是因为 ember 只是一个浏览器库，并不是所有东西都在“全局”上

我开始研究 PhantomJS 并且像您自己一样看不到自己增加了复杂性。因此，我决定花一个周末来写下 jasmine 测试运行器空间中缺少的东西，而不是围绕这个问题进行破解。我想要 jasmine-node 的相同功能（这意味着我的 CI 盒子上只需要一个最新版本的 node.js 和一个简单的 npm 模块来运行测试）

我编写了一个名为[jasmine-phantom-node](https://github.com/toranb/jasmine-phantom-node)的 npm 模块，其核心是使用 node.js 来运行 phantomJS =>，这反过来会启动一个常规的 jasmine html 运行程序，并使用一个非常基本的 express web 应用程序抓取页面以获取测试结果。

我花时间在 github 项目中放置了 2 个不同的示例，以便其他人可以快速了解它是如何工作的。这是自以为是的，因此您需要在项目根目录中创建一个 html 文件，插件将使用该文件来执行您的测试。它还需要 jasmine 和 jasmine-html 以及最近的 jQuery。

它为我个人解决了这个问题，现在我可以使用简单的 jasmine 编写针对 ember 的测试，并在没有浏览器的情况下从 cmd 行运行它。

这是我最近在使用这个测试运行器时针对 ember 视图编写的示例 jasmine 单元测试。如果您想查看被测视图如何在应用程序中使用，[这里是完整的 ember / django 项目的链接。](https://github.com/toranb/ember-django-rest)

```
require('static/script/vendor/filtersortpage.js');
require('static/script/app/person.js');

describe ("PersonApp.PersonView Tests", function(){

  var sut, router, controller;

  beforeEach(function(){
    sut = PersonApp.PersonView.create();
    router = new Object({send:function(){}});
    controller = PersonApp.PersonController.create({});
    controller.set("target", router);
    sut.set("controller", controller);
  });

  it ("does not invoke send on router when username does not exist", function(){
    var event = {'context': {'username':'', 'set': function(){}}};
    var sendSpy = spyOn(router, 'send');
    sut.addPerson(event);
    expect(sendSpy).not.toHaveBeenCalledWith('addPerson', jasmine.any(String));
  });

  it ("invokes send on router with username when exists", function(){
    var event = {'context': {'username':'foo', 'set': function(){}}};
    var sendSpy = spyOn(router, 'send');
    sut.addPerson(event);
    expect(sendSpy).toHaveBeenCalledWith('addPerson', 'foo');
  });

  it ("does not invoke set context when username does not exist", function(){
    var event = {'context': {'username':'', 'set': function(){}}};
    var setSpy = spyOn(event.context, 'set');
    sut.addPerson(event);
    expect(setSpy).not.toHaveBeenCalledWith('username', jasmine.any(String));
  });

  it ("invokes set context to empty string when username exists", function(){
    var event = {'context': {'username':'foo', 'set': function(){}}};
    var setSpy = spyOn(event.context, 'set');
    sut.addPerson(event);
    expect(setSpy).toHaveBeenCalledWith('username', '');
  });
}); 
```

这是我在上面进行单元测试的生产余烬视图

```
PersonApp.PersonView = Ember.View.extend({
  templateName: 'person',
  addPerson: function(event) {
    var username = event.context.username;
    if (username) {
      this.get('controller.target').send('addPerson', username);
      event.context.set('username', '');
    }
  }
}); 
```

# c++ - 在 C/C++ 中使用常量优化的函数调用

> ID：12317197
> 
> 赞同：4
> 
> 时间：2012-09-07T11:26:49.777
> 
> 标签：c++, c, optimization, compiler-construction

如果你有带常量的函数调用，它没有副作用，也不依赖于任何东西，如下所示：

```
int foo(int a,int b)
{         
  返回 a+b;   
}

```

函数是否内联？或者，也许函数是在编译时评估的，这个评估的结果插入到函数调用的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T11:33:22.980

我尝试使用相当旧的 gcc 编译它 -

```
#include <iostream>

int foo(int a,int b)
{
    return a+b;
} 

int main()
{
    std::cout << foo(100, 123) ;
} 
```

主要编译到这个 -

```
LFB1439:
    subq    $8, %rsp
.LCFI1:
    movl    $223, %esi
    movl    $_ZSt4cout, %edi
    call    _ZNSolsEi
    xorl    %eax, %eax
    addq    $8, %rsp
    ret 
```

所以它在编译时编译了加法，得到了 223。

显然，结果取决于您的代码和编译器，但这表明它可以并且在编译时内联并计算加法（如果可以的话）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T11:31:02.807

不在 C++ 中。它们不会像那样在编译时执行——除非编译器神奇地做到了。但是，这不能强求。

但是，对于 C++11，您可以使用`constexpr`它来确保在编译时对其进行评估，例如：

```
constexpr int get_five() {return 5;} 
```

因此，您可以将函数重写为：

```
constexpr int foo(int a,int b)
{         
  return a+b;   
} 
```

请注意，如果此函数的参数并不总是恒定的，您不必担心。

来自维基百科：

> 如果使用不是常量表达式的参数调用 constexpr 函数或构造函数，则调用的行为就好像该函数不是 constexpr，并且结果值不是常量表达式。同样，如果 constexpr 函数的 return 语句中的表达式对于特定调用未计算为常量表达式，则结果不是常量表达式。

这意味着这`foo(1,1)`将是恒定的，但是：

```
int i,j;
cin >> i >> j;
foo(i,j) // this is not constant 
```

参考：[http ://en.wikipedia.org/wiki/C%2B%2B11#constexpr_-_Generalized_constant_expressions](http://en.wikipedia.org/wiki/C%2B%2B11#constexpr_-_Generalized_constant_expressions)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T11:28:36.723

如果您在头文件中定义它，那么它很有可能被内联。如果您使用完整的编译时常量作为其参数，那么编译器应该能够在编译时执行该函数。

即使没有这样的保证，你也应该相信你的编译器。他们非常擅长优化您的代码。如果要确保函数在编译时执行，可以添加`constexpr`重载（仅限 C++11）：

```
constexpr int foo(int a,int b){
    return a+b;
} 
```

我尝试了以下代码段：

```
int add(int a, int b) {
    return a + b;
}

int main() {
    return add(5, 2);
} 
```

当使用 GCC 和 -O3 标志编译时，它被编译为：

```
0x08048300 <+0>:    mov    $0x7,%eax
0x08048305 <+5>:    ret 
```

因此，您可以看到它实际上是在编译时执行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T11:29:27.290

是否执行此类优化不是 C 和 C++ 语言的定义部分。从本质上讲，只要生成的代码根据源代码是有效的，编译器就可以自由地进行优化。在一般情况下，在更高的优化级别，这个调用可以是内联的，或者如果调用站点总是传入常量（在编译时已知的值），则可以在编译时计算结果并且完全避免任何运行时开销。

优化编译器选择不内联函数的一般情况是：

*   递归函数
*   当它更倾向于大小而不是速度时，或者如果内联会极大地扭曲最终二进制文件的大小

另一个需要注意的问题是内联会改变函数的链接。

在 GCC 和 G++ 上编译以下 C 代码`-O3`：

```
int foo(int a, int b) {
    return a+b;
}

int main(void)
{
    return foo(1, 2);
} 
```

产生以下汇编代码：

```
00000000004004e0 <main>:
main():
  4004e0:       b8 03 00 00 00          mov    $0x3,%eax
  4004e5:       c3                      retq 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:31:02.813

您可以检查程序集列表以查看它是否被内联，但如前所述，它是特定于编译器的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T11:31:50.643

这取决于编译器和优化设置，但通常你可以假设任何足够高级的编译器都会在你开启至少一点优化时内联这样一个微不足道的函数。

当你想确保函数是内联的，你总是可以用 inline 关键字声明它：

```
inline int foo(int a,int b){
    return a+b;
} 
```

但是通常应该避免这种善意的提示，因为大多数编译器比大多数程序员更善于决定内联哪些函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T12:16:14.000

如何在编译时计算此函数的可能场景：
1）`foo`在内联优化阶段之一期间编译器内联函数。
2) 在[常量传播](http://en.wikipedia.org/wiki/Constant_folding) 优化阶段，编译器可以“传播”编译时已知的变量值，即常量和常量表达式。

注意：在您看到程序的汇编代码之前，您永远不会确切地知道该函数是否被内联。即使您使用`inline`说明符。编译器可能会忽略此说明符或没有此说明符的内联函数。

# c# - asp：图表控件。无法设置 X 轴的起始日期值

> ID：12317199
> 
> 赞同：0
> 
> 时间：2012-09-07T11:26:50.973
> 
> 标签：c#, asp.net, html, charts, data-visualization

我有一个带有线条系列的图表控件。我将一个包含 4 行的数据表传递给它，每个数据表包含一个十进制值和一个日期。日期范围为 9 月 4 日至 9 月 7 日。生成图表时，X 轴的起始值为 9 月 3 日，导致图表在开始处有一个空白点。如何使 X 轴从 9 月 4 日开始？我可以设置 y 轴起始值，因为该`Chart1.ChartAreas[0].AxisY.Minimum`属性需要一个双精度值。

# c++ - png++ 中未定义的引用

> ID：12317203
> 
> 赞同：0
> 
> 时间：2012-09-07T11:27:07.307
> 
> 标签：c++, linux, libpng

我是 linux 环境中的 C++ 新手，我正在尝试将 png++ 库用于项目。我面临的问题是我使用 png++ incudes 编写的一个简单程序不起作用并向我显示以下错误

```
AProg.o: In function `png::info_base::info_base(png::io_base&, png_struct_def*)':
AProg.cpp:(.text._ZN3png9info_baseC2ERNS_7io_baseEP14png_struct_def[_ZN3png9info_baseC5ERNS_7io_baseEP14png_struct_def]+0x21): undefined reference to `png_create_info_struct'
AProg.o: In function `png::info::write() const':
AProg.cpp:(.text._ZNK3png4info5writeEv[png::info::write() const]+0xd4): undefined reference to `png_set_PLTE'
AProg.cpp:(.text._ZNK3png4info5writeEv[png::info::write() const]+0x137): undefined reference to `png_set_tRNS'
AProg.cpp:(.text._ZNK3png4info5writeEv[png::info::write() const]+0x14f): undefined reference to `png_write_info'
AProg.o: In function `png::info::sync_ihdr() const':
AProg.cpp:(.text._ZNK3png4info9sync_ihdrEv[png::info::sync_ihdr() const]+0x79): undefined reference to `png_set_IHDR'
AProg.o: In function `png::end_info::destroy()':
AProg.cpp:(.text._ZN3png8end_info7destroyEv[png::end_info::destroy()]+0x48): undefined reference to `png_destroy_info_struct'
AProg.o: In function `png::end_info::write() const':
AProg.cpp:(.text._ZNK3png8end_info5writeEv[png::end_info::write() const]+0x1a): undefined reference to `png_write_end'
AProg.o: In function `png::io_base::set_swap() const':
AProg.cpp:(.text._ZNK3png7io_base8set_swapEv[png::io_base::set_swap() const]+0x1b): undefined reference to `png_set_swap'
.............. (and it goes on). 
```

到目前为止我所做的事情的背景。

1：我已经正确配置了 gcc/g++。

2：我已经正确安装了 libpng-1.2.50。结果似乎是正确的。

这就是我的 usr/local 文件夹现在的样子

```
:/usr/local/include$ ls

libpng12  libpng15  png++  pngconf.h  png.h  pnglibconf.h

:/usr/local/lib$ ls

libpng12.a   libpng12.so    libpng12.so.0.50.0  libpng15.la  libpng15.so.15     libpng.a   libpng.so    libpng.so.3.50.0  python2.7
libpng12.la  libpng12.so.0  libpng15.a          libpng15.so  libpng15.so.15.12.0  libpng.la  libpng.so.3  pkgconfig

:/usr/local/bin$ ls

eclipse  libpng-1.2.50  libpng12-config  libpng-1.5.12  libpng15-config  libpng-config  png++-0.2.5 
```

3：之后我按照以下（[http://www.nongnu.org/pngpp/doc/0.2.5/](http://www.nongnu.org/pngpp/doc/0.2.5/)）安装了png++-0.2.5，所有五个步骤都没有给出任何错误。

但在那之后，当我尝试编译一个简单的程序（使用同一站点给出的说明：[http](http://www.nongnu.org/pngpp/doc/0.2.5/) ://www.nongnu.org/pngpp/doc/0.2.5/ ）时，它不会编译。

```
:~/workspace/AProg$ g++ -o AProg AProg.o 'libpng-config --ldflags'

g++: error: libpng-config --ldflags: No such file or directory 
```

然后我试图解决这个问题并用谷歌搜索它并给出了这个命令，它在编译时似乎工作正常，但是当我试图运行它时。我收到了帖子顶部提到的错误

```
 :~/workspace/AProg$ g++ -c AProg.cpp -I/usr/local/include/libpng12 -L/usr/local/lib -lpng -I/usr/local/include/png++

 :~/workspace/AProg$ 
```

我很抱歉这么长的帖子。但我只是想解释与我的问题相关的任何/一切。希望有人在这里帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:00:47.300

您在链接器命令行中使用的引号似乎不正确，它应该是单反*引号*：

```
$ g++ -o AProg AProg.o `libpng-config --ldflags` 
```

# java - 使用 Java 的 LDAP 身份验证

> ID：12317205
> 
> 赞同：39
> 
> 时间：2012-09-07T11:27:20.877
> 
> 标签：java, authentication, ldap

我需要为应用程序进行 LDAP 身份验证。

我尝试了以下程序：

```
import java.util.Hashtable;  

import javax.naming.Context;  
import javax.naming.NamingException;  
import javax.naming.ldap.InitialLdapContext;  
import javax.naming.ldap.LdapContext;  

public class LdapContextCreation {  
    public static void main(String[] args) {  
        LdapContextCreation ldapContxCrtn = new LdapContextCreation();  
        LdapContext ctx = ldapContxCrtn.getLdapContext();  
    }  
    public LdapContext getLdapContext(){  
        LdapContext ctx = null;  
        try{  
            Hashtable env = new Hashtable();  
            env.put(Context.INITIAL_CONTEXT_FACTORY,  "com.sun.jndi.ldap.LdapCtxFactory");  
            env.put(Context.SECURITY_AUTHENTICATION, "Simple");  
            //it can be <domain\\userid> something that you use for windows login  
            //it can also be  
            env.put(Context.SECURITY_PRINCIPAL, "username@domain.com");  
            env.put(Context.SECURITY_CREDENTIALS, "password");  
            //in following property we specify ldap protocol and connection url.  
            //generally the port is 389  
            env.put(Context.PROVIDER_URL, "ldap://server.domain.com");  
            ctx = new InitialLdapContext(env, null);  
            System.out.println("Connection Successful.");  
        }catch(NamingException nex){  
            System.out.println("LDAP Connection: FAILED");  
            nex.printStackTrace();  
        }  
        return ctx;  
    }  

} 
```

得到以下异常：

```
LDAP 连接：失败
javax.naming.AuthenticationException：[LDAP：错误代码 49 - 无效凭据]
    在 com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3053)
    在 com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2999)
    在 com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2801)
    在 com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2715)
    在 com.sun.jndi.ldap.LdapCtx.(LdapCtx.java:305)
    在 com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(LdapCtxFactory.java:187)
    在 com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(LdapCtxFactory.java:205)
    在 com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(LdapCtxFactory.java:148)
    在 com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(LdapCtxFactory.java:78)
    在 javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:235)
    在 javax.naming.InitialContext.initializeDefaultInitCtx(InitialContext.java:318)
    在 javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:348)
    在 javax.naming.InitialContext.internalInit(InitialContext.java:286)
    在 javax.naming.InitialContext.init(InitialContext.java:308)
    在 javax.naming.ldap.InitialLdapContext.(InitialLdapContext.java:99)
    在 LdapContextCreation.getLdapContext(LdapContextCreation.java:27)
    在 LdapContextCreation.main(LdapContextCreation.java:12)

```

还有几点需要考虑：

1.  早些时候我正在使用`tomcat 5.3.5`，但有人告诉我只有 tomcat 6 支持它，所以我下载`tomcat 6.0.35`并目前只使用这个版本。

2.  配置`server.xml`并添加以下代码 -

    ```
    <Realm className="org.apache.catalina.realm.JNDIRealm" 
                       debug="99" 
                       connectionURL="ldap://server.domain.com:389/"  
                       userPattern="{0}" /> 
    ```

3.  评论了以下代码`server.xml`-

    ```
    <!-- Commenting for LDAP
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
         resourceName="UserDatabase"/> --> 
    ```

4.  [文章中](http://viralpatel.net/blogs/implement-ldap-authentication-in-tomcat-jboss-server-for-java-app/)的步骤 2 和 3

5.  有人建议应该将一些 jar 文件复制到 tomcat 以运行`ldap`身份验证，这是我需要做的吗？以及哪些`jar`文件？

6.  另外，我肯定使用了正确的凭据，那么导致此问题的原因是什么？

7.  如果我使用不正确的属性，有没有办法找出 LDAP 的正确属性？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-07-15T07:19:17.113

以下代码使用纯 Java JNDI 从 LDAP 进行身份验证。原则是：-

1.  首先使用管理员或 DN 用户查找用户。
2.  用户对象需要使用用户凭据再次传递给 LDAP
3.  无异常意味着 - 验证成功。否则身份验证失败。

代码片段

```
public static boolean authenticateJndi(String username, String password) throws Exception{
    Properties props = new Properties();
    props.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    props.put(Context.PROVIDER_URL, "ldap://LDAPSERVER:PORT");
    props.put(Context.SECURITY_PRINCIPAL, "uid=adminuser,ou=special users,o=xx.com");//adminuser - User with special priviledge, dn user
    props.put(Context.SECURITY_CREDENTIALS, "adminpassword");//dn user password

    InitialDirContext context = new InitialDirContext(props);

    SearchControls ctrls = new SearchControls();
    ctrls.setReturningAttributes(new String[] { "givenName", "sn","memberOf" });
    ctrls.setSearchScope(SearchControls.SUBTREE_SCOPE);

    NamingEnumeration<javax.naming.directory.SearchResult> answers = context.search("o=xx.com", "(uid=" + username + ")", ctrls);
    javax.naming.directory.SearchResult result = answers.nextElement();

    String user = result.getNameInNamespace();

    try {
        props = new Properties();
        props.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        props.put(Context.PROVIDER_URL, "ldap://LDAPSERVER:PORT");
        props.put(Context.SECURITY_PRINCIPAL, user);
        props.put(Context.SECURITY_CREDENTIALS, password);

   context = new InitialDirContext(props);
    } catch (Exception e) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-08-11T11:57:23.617

这是我的 LDAP Java 登录测试应用程序，支持 LDAP:// 和 LDAPS:// 自签名测试证书。代码取自一些 SO 帖子，简化了实现并删除了遗留的 sun.java.* 导入。

*   [如何接受 JNDI/LDAP 连接的自签名证书？](https://stackoverflow.com/questions/4615163/how-to-accept-self-signed-certificates-for-jndi-ldap-connections)
*   [在 Linux 上使用 Java 对 Active Directory 进行身份验证](https://stackoverflow.com/questions/390150/authenticating-against-active-directory-with-java-on-linux)

**用法**
我已经在 Windows7 和 Linux 机器上针对 WinAD 目录服务运行了它。应用程序打印用户名和成员组。

> $ java -cp 类 test.LoginLDAP url=ldap://1.2.3.4:389 用户名=myname@company.fi 密码=mypwd
> 
> $ java -cp 类 test.LoginLDAP url=ldaps://1.2.3.4:636 用户名=myname@company.fi 密码=mypwd

测试应用程序支持 ldaps:// 协议的临时自签名测试证书，这个 DummySSLFactory 接受任何服务器证书，因此中间人是可能的。实际安装应将服务器证书导入本地 JKS 密钥库文件，而不是使用虚拟工厂。

应用程序使用最终用户的用户名+密码进行初始上下文和 ldap 查询，它适用于 WinAD，但不知道是否可以用于所有 ldap 服务器实现。您可以使用内部用户名+密码创建上下文，然后运行查询以查看是否找到了给定的最终用户。

**登录LDAP.java**

```
package test;

import java.util.*;
import javax.naming.*;
import javax.naming.directory.*;

public class LoginLDAP {

    public static void main(String[] args) throws Exception {
        Map<String,String> params = createParams(args);

        String url = params.get("url"); // ldap://1.2.3.4:389 or ldaps://1.2.3.4:636
        String principalName = params.get("username"); // firstname.lastname@mydomain.com
        String domainName = params.get("domain"); // mydomain.com or empty

        if (domainName==null || "".equals(domainName)) {
            int delim = principalName.indexOf('@');
            domainName = principalName.substring(delim+1);
        }

        Properties props = new Properties();
        props.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        props.put(Context.PROVIDER_URL, url); 
        props.put(Context.SECURITY_PRINCIPAL, principalName); 
        props.put(Context.SECURITY_CREDENTIALS, params.get("password")); // secretpwd
        if (url.toUpperCase().startsWith("LDAPS://")) {
            props.put(Context.SECURITY_PROTOCOL, "ssl");
            props.put(Context.SECURITY_AUTHENTICATION, "simple");
            props.put("java.naming.ldap.factory.socket", "test.DummySSLSocketFactory");         
        }

        InitialDirContext context = new InitialDirContext(props);
        try {
            SearchControls ctrls = new SearchControls();
            ctrls.setSearchScope(SearchControls.SUBTREE_SCOPE);
            NamingEnumeration<SearchResult> results = context.search(toDC(domainName),"(& (userPrincipalName="+principalName+")(objectClass=user))", ctrls);
            if(!results.hasMore())
                throw new AuthenticationException("Principal name not found");

            SearchResult result = results.next();
            System.out.println("distinguisedName: " + result.getNameInNamespace() ); // CN=Firstname Lastname,OU=Mycity,DC=mydomain,DC=com

            Attribute memberOf = result.getAttributes().get("memberOf");
            if(memberOf!=null) {
                for(int idx=0; idx<memberOf.size(); idx++) {
                    System.out.println("memberOf: " + memberOf.get(idx).toString() ); // CN=Mygroup,CN=Users,DC=mydomain,DC=com
                    //Attribute att = context.getAttributes(memberOf.get(idx).toString(), new String[]{"CN"}).get("CN");
                    //System.out.println( att.get().toString() ); //  CN part of groupname
                }
            }
        } finally {
            try { context.close(); } catch(Exception ex) { }
        }       
    }

    /**
     * Create "DC=sub,DC=mydomain,DC=com" string
     * @param domainName    sub.mydomain.com
     * @return
     */
    private static String toDC(String domainName) {
        StringBuilder buf = new StringBuilder();
        for (String token : domainName.split("\\.")) {
            if(token.length()==0) continue;
            if(buf.length()>0)  buf.append(",");
            buf.append("DC=").append(token);
        }
        return buf.toString();
    }

    private static Map<String,String> createParams(String[] args) {
        Map<String,String> params = new HashMap<String,String>();  
        for(String str : args) {
            int delim = str.indexOf('=');
            if (delim>0) params.put(str.substring(0, delim).trim(), str.substring(delim+1).trim());
            else if (delim==0) params.put("", str.substring(1).trim());
            else params.put(str, null);
        }
        return params;
    }

} 
```

和 SSL 助手类。

```
package test;

import java.io.*;
import java.net.*;
import java.security.SecureRandom;
import java.security.cert.X509Certificate;    
import javax.net.*;
import javax.net.ssl.*;

public class DummySSLSocketFactory extends SSLSocketFactory {
    private SSLSocketFactory socketFactory;
    public DummySSLSocketFactory() {
        try {
          SSLContext ctx = SSLContext.getInstance("TLS");
          ctx.init(null, new TrustManager[]{ new DummyTrustManager()}, new SecureRandom());
          socketFactory = ctx.getSocketFactory();
        } catch ( Exception ex ){ throw new IllegalArgumentException(ex); }
    }

      public static SocketFactory getDefault() { return new DummySSLSocketFactory(); }

      @Override public String[] getDefaultCipherSuites() { return socketFactory.getDefaultCipherSuites(); }
      @Override public String[] getSupportedCipherSuites() { return socketFactory.getSupportedCipherSuites(); }

      @Override public Socket createSocket(Socket socket, String string, int i, boolean bln) throws IOException {
        return socketFactory.createSocket(socket, string, i, bln);
      }
      @Override public Socket createSocket(String string, int i) throws IOException, UnknownHostException {
        return socketFactory.createSocket(string, i);
      }
      @Override public Socket createSocket(String string, int i, InetAddress ia, int i1) throws IOException, UnknownHostException {
        return socketFactory.createSocket(string, i, ia, i1);
      }
      @Override public Socket createSocket(InetAddress ia, int i) throws IOException {
        return socketFactory.createSocket(ia, i);
      }
      @Override public Socket createSocket(InetAddress ia, int i, InetAddress ia1, int i1) throws IOException {
        return socketFactory.createSocket(ia, i, ia1, i1);
      }
}

class DummyTrustManager implements X509TrustManager {
    @Override public void checkClientTrusted(X509Certificate[] xcs, String str) {
        // do nothing
    }
    @Override public void checkServerTrusted(X509Certificate[] xcs, String str) {
        /*System.out.println("checkServerTrusted for authType: " + str); // RSA
        for(int idx=0; idx<xcs.length; idx++) {
            X509Certificate cert = xcs[idx];
            System.out.println("X500Principal: " + cert.getSubjectX500Principal().getName());
        }*/
    }
    @Override public X509Certificate[] getAcceptedIssuers() {
        return new java.security.cert.X509Certificate[0];
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-07T11:41:31.750

您必须为整个用户`dn`提供`SECURITY_PRINCIPAL`

像这样

```
env.put(Context.SECURITY_PRINCIPAL, "cn=username,ou=testOu,o=test"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-27T22:03:32.070

```
// this class will authenticate LDAP UserName or Email

// simply call LdapAuth.authenticateUserAndGetInfo (username,password);

//Note: Configure ldapURI ,requiredAttributes ,ADSearchPaths,accountSuffex 

import java.util.*;

import javax.naming.*;

import java.util.regex.*;

import javax.naming.directory.*;

import javax.naming.ldap.InitialLdapContext;

import javax.naming.ldap.LdapContext;

public class LdapAuth {

private final static String ldapURI = "ldap://20.200.200.200:389/DC=corp,DC=local";

private final static String contextFactory = "com.sun.jndi.ldap.LdapCtxFactory";

private  static String[] requiredAttributes = {"cn","givenName","sn","displayName","userPrincipalName","sAMAccountName","objectSid","userAccountControl"};

// see you active directory user OU's hirarchy 

private  static String[] ADSearchPaths = 

{ 

    "OU=O365 Synced Accounts,OU=ALL USERS",

    "OU=Users,OU=O365 Synced Accounts,OU=ALL USERS",

    "OU=In-House,OU=Users,OU=O365 Synced Accounts,OU=ALL USERS",

    "OU=Torbram Users,OU=Users,OU=O365 Synced Accounts,OU=ALL USERS",

    "OU=Migrated Users,OU=TES-Users"

};

private static String accountSuffex = "@corp.local"; // this will be used if user name is just provided

private static void authenticateUserAndGetInfo (String user, String password) throws Exception {

    try {

        Hashtable<String,String> env = new Hashtable <String,String>();

        env.put(Context.INITIAL_CONTEXT_FACTORY, contextFactory);

        env.put(Context.PROVIDER_URL, ldapURI);     

        env.put(Context.SECURITY_AUTHENTICATION, "simple");

        env.put(Context.SECURITY_PRINCIPAL, user);

        env.put(Context.SECURITY_CREDENTIALS, password);

        DirContext ctx = new InitialDirContext(env);

        String filter = "(sAMAccountName="+user+")";  // default for search filter username

        if(user.contains("@"))  // if user name is a email then
        {
            //String parts[] = user.split("\\@");
            //use different filter for email
            filter = "(userPrincipalName="+user+")";
        }

        SearchControls ctrl = new SearchControls();
        ctrl.setSearchScope(SearchControls.SUBTREE_SCOPE);
        ctrl.setReturningAttributes(requiredAttributes);

        NamingEnumeration userInfo = null;

        Integer i = 0;
        do
        {
            userInfo = ctx.search(ADSearchPaths[i], filter, ctrl);
            i++;

        } while(!userInfo.hasMore() && i < ADSearchPaths.length );

        if (userInfo.hasMore()) {

            SearchResult UserDetails = (SearchResult) userInfo.next();
            Attributes userAttr = UserDetails.getAttributes();System.out.println("adEmail = "+userAttr.get("userPrincipalName").get(0).toString());

            System.out.println("adFirstName = "+userAttr.get("givenName").get(0).toString());

            System.out.println("adLastName = "+userAttr.get("sn").get(0).toString());

            System.out.println("name = "+userAttr.get("cn").get(0).toString());

            System.out.println("AdFullName = "+userAttr.get("cn").get(0).toString());

        }

        userInfo.close();

    }
    catch (javax.naming.AuthenticationException e) {

    }
}   
} 
```

# javascript - 如何在单击提交按钮时为新窗口编写 JavaScript 代码，显示注册信息，确定和取消？

> ID：12317212
> 
> 赞同：0
> 
> 时间：2012-09-07T11:27:41.410
> 
> 标签：javascript, asp.net

我想要一个包含用户名、电子邮件 ID 等信息的弹出框，单击提交按钮和确定和取消按钮以使用 JAVA SCRIPT 进行确认。.如何在单击提交按钮时为新窗口编写 JavaScript 代码，显示注册信息，并带有确定和取消。

```
<script type="text/javascript">
    if (confirm("Press 'OK' to leave, or 'Cancel' if you want to stay: "))
    {         
       window.location="http://google.com";
    }
    else
    {         
      <a href="javascript:history.go(-1)">Go back</a> 
    }
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:45:51.470

可以使用[JQUERY UI](http://jqueryui.com/demos/dialog/#modal-form)

你可能想在那个检查 ModalForm

```
$( "#dialog-form" ).dialog({
            autoOpen: false,
            height: 300,
            width: 350,
            modal: true,
            buttons: {
                "Create an account": function() {
                    var bValid = true;
                    allFields.removeClass( "ui-state-error" );

                    if ( bValid ) {
                        $( "#users tbody" ).append( "<tr>" +
                            "<td>" + name.val() + "</td>" + 
                            "<td>" + email.val() + "</td>" + 
                            "<td>" + password.val() + "</td>" +
                        "</tr>" ); 
                        $( this ).dialog( "close" );
                    }
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                allFields.val( "" ).removeClass( "ui-state-error" );
            }
        }); 
```

# php - 使用 PHP 如何找到 CSS 标记/id/类并替换花括号内的样式？

> ID：12317214
> 
> 赞同：0
> 
> 时间：2012-09-07T11:27:43.517
> 
> 标签：php, css, regex, preg-match

我需要遍历 CSS 文件以查找特定项目并将其 CSS 更改为主题编辑器的更新内容。我在花括号之间有一个包含所有 CSS 的变量，我只需要找到一种方法来选择给定标签后的大括号并替换内容。任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:32:04.473

也许不是唯一的解决方案，但您是否考虑过将 CSS 放入数据库并动态生成 CSS 文件？

将其存储在数据库中还使您可以在每次发生更改时重新生成文件，并将其缓存起来以节省性能。

要修改现有文件，您可能需要遍历文件并希望没有人手动更改 CSS 文件的样式约定，并通过记住最后一个标签/类/id 表达式来替换（可能不起作用盒子外面！）：

```
$newFileContent = "";
$searchClass = "td.content";
$lines = file("style.css");
$insideSearchedTag = false;
foreach($lines as $line) {
  if (strstr($line, $searchClass) !== false) {
    $insideSearchedTag = true;
    $newFileContent .= "\n" . $line;
  }
  else if (strstr($line, "}") !== false) {
    $insideSearchedTag = false;
    $newFileContent .= "\n" . $line;
  }
  else if ($insideSearchedTag) {
    // search/replace the content you want to replace.
    $newLineContent = str_ireplace($searchStyle, $replaceStyle, $line);
    $newFileContent .= "\n" . $newLineContent;
  }
  else { $newFileContent .= "\n" . $line; }
}
fwrite($file, $newFileContent); 
```

# java - 是否有任何用于 appengine Java 报告生成的示例？

> ID：12317216
> 
> 赞同：1
> 
> 时间：2012-09-07T11:27:51.267
> 
> 标签：java, google-app-engine, mapreduce, reporting, bigtable

我们正在为我们的应用程序使用 AppEngine 和数据存储，其中我们有一个中等大小的信息表，其中包含一个带有条目的列表。

我想总结报告中的条目列表，指定每个条目出现多少次，例如通常在 SQL 中我只会使用`select distinct`a 列，然后遍历每个条目并使用`select count(x) where value = valueOfEntry`.

虽然计数部分很容易完成，但明显的问题是“问题”。我能远程找到的唯一解决方案是 MapReduce，并且大多数示例都基于 Python。有[这个博客条目](http://ikaisays.com/2010/07/09/using-the-java-mapper-framework-for-app-engine/)非常有用，但有些过时，因为它早于 reduce 部分。然后是[这里](http://www.youtube.com/watch?v=EIxelKcyCC0)的视频和我能找到的更多资源。

但是，如果我不能写入单独的实体并且我没有减少阶段，我真的很难理解如何构建汇总表？

这似乎是一件微不足道且简单的事情，但需要这么多的箍，是否没有示例或现有的报告引擎我可以直接插入 AppEngine 而没有所有的摩擦？

我看到了[BigQuery](https://developers.google.com/bigquery/articles/datastoretobigquery)，但是将数据从应用程序引擎移出并进入该商店似乎很麻烦。我尝试将数据下载为 CSV，但也遇到了很多问题。从长远来看，这似乎也不是一个实用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:10:36.887

有一个[文档](http://code.google.com/p/appengine-mapreduce/wiki/GettingStartedInJava)解释了 java 的 mapreduce 的一些概念。虽然它不完整，但它与 python 版本共享大部分架构。在该文档中，还有一个指向[完整的 java 示例 mapreduce 应用程序](http://code.google.com/p/appengine-mapreduce/source/browse/trunk/java/example/com/google/appengine/demos/mapreduce/entitycount/)的指针，该应用程序从数据存储中读取。

为了编写结果，您指定一个[`Output`class](http://appengine-mapreduce.googlecode.com/svn/trunk/java/src/com/google/appengine/tools/mapreduce/outputs/)。要将结果写入新的数据存储实体，您需要创建自己的输出类。但您也可以使用 blobstore（请参阅 BlobFileOutput.java）。

另一种选择是，每当您编写一个实体时，您也会将另一个条目写入/更新到 EntityDistinct 数据模型。

如果您计划执行复杂的报告并且您现在可以预测您的所有需求，我建议您再次查看 Big Query。BigQuery 非常强大，可以在非常庞大的数据集上完美运行。您可以检查[http://code.google.com/p/log2bq/](http://code.google.com/p/log2bq/)这是一个使用 mapreduce 将日志加载到 Big Query 的 python 项目。或者您也可以有一个 cron 作业，每隔一段时间获取所有新实体并将它们移动到 Big Query 中。

与摩擦相关，请记住这是一个无 SQL 数据库，因此具有一些优点，但有些东西与 SQL 有本质上的不同。请记住，您始终可以使用[Google Cloud SQL](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide)，因为您的数据集大小有限，但您会失去复制和容错功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T21:19:38.073

我认为这可以帮助你：http: [//jjmpsj.blogspot.ro/2008/05/appengine-output-tricks-reporting.html ?m=1](http://jjmpsj.blogspot.ro/2008/05/appengine-output-tricks-reporting.html?m=1)

# vb.net - 检查我的应用程序是否有焦点/最顶层 vb.net

> ID：12317221
> 
> 赞同：1
> 
> 时间：2012-09-07T11:28:02.000
> 
> 标签：vb.net, focus

我需要检查我的应用程序是否隐藏在任何其他窗口后面/失去焦点。基本上我有一个应用程序，如果发生事件并且应用程序没有聚焦，我可以闪烁窗口。

我实际上是在几个月前写的，但是在我使用像 application.focused 这样简单的东西之前丢失了源代码，尽管我一生都不记得它是什么了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:43:10.937

您可以使用[GetActiveWindow](http://msdn.microsoft.com/en-us/library/ms646292%28VS.85%29.aspx)获取活动窗口的 hWnd，然后将其与窗口的 hWnd 进行比较。如果您还不知道窗口的 hWnd，您可以使用[Control.Handle](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.handle%28VS.80%29.aspx)或[FindWindowEx](http://www.pinvoke.net/default.aspx/user32.findwindowex)来获取它。

如果您需要检查您的窗口是否设置为最顶层，则在 C#[中 pinvoke 的 getwindowlong](http://www.pinvoke.net/default.aspx/user32.getwindowlong)底部有示例代码，但您应该能够根据页面其余部分中给出的内容编写 VB 等价物。

# android - android：数据库写访问抛出异常

> ID：12317224
> 
> 赞同：0
> 
> 时间：2012-09-07T11:28:09.293
> 
> 标签：android, database, sqlite

我正在使用以下代码在数据库中插入一个项目。但每次我得到例外。HistoryItem 有成员：sectorCount=int; 链接=字符串；currentDownloadedBytes=long;

**内部活动**：

```
DatabaseHelper helper=new DatabaseHelper(getApplicationContext());
helper.checkAndInserItem(new HistoryItem("http://dummy.com/dummy.jpg",4,2212),1000); 
```

**在 DatabaseHelper 内部**：

```
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_DOWNLOAD_ITEMS + "("
            + KEY_URL + " TEXT PRIMARY KEY," + KEY_NUMBER_OF_SECTORS_USED + " INTEGER,"
            + KEY_CURRENTLY_DOWNLOADED_BYTES + " TEXT"+")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

public void checkAndAddItem(HistoryItem item,int maxNumberOfItemsAllowedInDb) {
   SQLiteDatabase db = this.getWritableDatabase();
   ContentValues values = new ContentValues();
   values.put(KEY_URL, item.link); //item.link is a string
   values.put(KEY_NUMBER_OF_SECTORS_USED, item.sectorCount); //item.sectorCount is an Integer
   values.put(KEY_CURRENTLY_DOWNLOADED_BYTES, ""+ item.currentlyDownloadedBytes );//item.currentlyDownloadedBytes is a long

   String selectQuery = "SELECT * FROM " + TABLE_DOWNLOAD_ITEMS;

   Cursor cursor = db.rawQuery(selectQuery, null);
   int k=cursor.getCount();
   if(k<maxNumberOfItemsAllowedInDb)
     db.insert(TABLE_DOWNLOAD_ITEMS, null, values);
   else
   {
     if(cursor.moveToLast()) {
          dummy=cursor.getString(0) ;
          db.delete(TABLE_DOWNLOAD_ITEMS, KEY_URL + " = ?",
                new String[] { dummy });
          db.insert(TABLE_DOWNLOAD_ITEMS, null, values);
          }  
     }
cursor.close();
db.close(); 
```

}

**在 logcat 中：**

```
09-07 16:47:43.532: E/SQLiteDatabase(14450): Error inserting currentlyDownloadedBytes=2212 numberOfSectorsUsed=4 url=http://dummy.com/dummy.jpg<
09-07 16:47:43.532: E/SQLiteDatabase(14450): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:113)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1839)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1712)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at com.rahul.SpeedyDownload.lib.DownloadDatabaseHelper.checkAndAddItem(DownloadDatabaseHelper. java:73)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at com.rahul.SpeedyDownload.lib.MultiConnectionDownloader$SectionDownloader.run(MultiConnectionDownloader.java:216)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-07 16:47:43.532: E/SQLiteDatabase(14450):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:43:31.137

此行正在创建错误

```
 values.put(KEY_CURRENTLY_DOWNLOADED_BYTES, ""+ item.currentlyDownloadedBytes ) 
```

改成

```
 values.put(KEY_CURRENTLY_DOWNLOADED_BYTES, ""+String.valueOf(item.currentlyDownloadedBytes) ) 
```

因为它被声明为 TEXT 而不是整数

# asp.net - 在 IIS 5.1 (Windows XP) 上托管 .NET 4.0 REST WCF 服务问题 404（找不到资源）

> ID：12317227
> 
> 赞同：1
> 
> 时间：2012-09-07T11:28:17.537
> 
> 标签：asp.net, wcf, rest, web-config, iis-5

我有一个基于 WCF 的 RESTful API (.NET Framework 4.0)，在 IIS 7.0 (Win7) 或 IIS 6.0 (Server 2003) 上托管时可以正常工作。但是，我发现在 IIS 5.1 (Windows XP) 上托管网站存在问题，这令人惊讶，因为我认为 5.1 和 6.0 的区别仅在于托管网站的数量。

以下请求一切正常（[结果截图](http://i.stack.imgur.com/JIuFC.jpg)）：

> `http://localhost/test/api/OrderService.svc`

所以我想我不必注册任何模块来处理 SVC 文件或其他任何东西。但是，以下请求（[结果截图](http://i.stack.imgur.com/DEFtZ.jpg)）：

> `http://localhost/test/api/OrderService.svc/rest/orders?format=json`

返回 HTTP 代码 404。我检查了事件查看器但一无所获。

同样，一切都适用于 IIS 7.0 和 IIS 6.0。这是 web.config 文件（有些东西被删掉了）：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <globalization uiCulture="auto" />
    <customErrors mode="Off" />
  </system.web>
  <system.webServer>
    <!--Это приложение определяет конфигурацию в разделе system.web/httpHandlers.
    Если есть уверенность, что можно игнорировать эту ошибку, сообщение о ней можно отключить, установив для параметра system.webServer/validation@validateIntegratedModeConfiguration значение false.
    Для запуска приложений ASP.NET на сервере IIS 7.0 и более поздних версий предпочтительным является интегрированный режим.-->
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
    <handlers>
      <remove name="WebDAV" />
      <add name="AddAsmx" verb="*" path="*.asmx" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="AppService" verb="*" path="*_AppService.axd" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </handlers>
  </system.webServer>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="soapBinding" closeTimeout="00:02:00" hostNameComparisonMode="Exact" maxBufferSize="120000" maxReceivedMessageSize="120000" >
         <security mode="Transport" />
        </binding>
      </basicHttpBinding>
      <webHttpBinding>
        <binding name="restBinding">
          <security mode="Transport" />
        </binding>
        <!--http://social.msdn.microsoft.com/Forums/en/wcf/thread/845d0bbd-52b4-420f-bf06-793d53ef93ba-->
        <!--<binding name="poxBinding">
        </binding>-->
      </webHttpBinding>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <standardEndpoints>
      <webHttpEndpoint>
        <!-- 
            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint 
            via the attributes on the <standardEndpoint> element below
        -->
        <standardEndpoint name="XDDF" maxBufferSize="120000" maxReceivedMessageSize="120000" helpEnabled="true" automaticFormatSelectionEnabled="true" />
      </webHttpEndpoint>
    </standardEndpoints>
    <services>
      <service behaviorConfiguration="slBehavior" name="WcfServiceLibrary.OrderService">
        <endpoint address="soap" binding="basicHttpBinding" name="basicHttpBinding" bindingConfiguration="soapBinding" contract="WcfServiceLibrary.IOrderService" />
        <endpoint address="rest" binding="webHttpBinding" bindingConfiguration="restBinding" behaviorConfiguration="restBehavior" contract="WcfServiceLibrary.IOrderService" />
        <!--<endpoint address="pox" binding="webHttpBinding" bindingConfiguration="poxBinding" behaviorConfiguration="poxBehavior" contract="WcfServiceLibrary.IOrderService"/>-->
        <endpoint address="mex" binding="mexHttpsBinding" name="mexHttpbinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="restBehavior">
          <!--<enableWebScript/>-->
          <webHttp />
        </behavior>
        <!--<behavior name="poxBehavior">
            <webHttp />
          </behavior>-->
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="slBehavior">
          <serviceMetadata httpsGetEnabled="true" />
          <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="returnFaults" />
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

请帮忙。我找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:13:26.907

执行以下操作对我有用。

*   在 IIS 上选择应用程序的属性。
*   在虚拟目录选项卡中选择配置。
*   单击添加。选择作为 aspnet_isapi.dll 的可执行文件。（通常路径类似于
    c:\windows\microsoft.net\framework\v4.0.30319\aspnet_isapi.dll）。
*   扩展名为**.***
*   取消选中“检查文件是否存在”。
*   单击确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:34:53.640

我发布这个是为了帮助其他人，因为我遇到了同样的问题，而且 IIS 5 上的 WCF REST 上的大多数帖子都是旧的。

您的应用程序池对该网站/虚拟目录的权限可能存在问题，您可以尝试设置该权限并尝试一下。

您可以参考这篇文章以获得更多帮助。

[http://technicalwizardry.blogspot.in/2013/04/wcf-rest-service-hosted-on-iis-5.html#!/2013/04/wcf-rest-service-hosted-on-iis-5。 html](http://technicalwizardry.blogspot.in/2013/04/wcf-rest-service-hosted-on-iis-5.html#!/2013/04/wcf-rest-service-hosted-on-iis-5.html)

# java - 从JAVA中的主字符串中提取子字符串属性和值

> ID：12317229
> 
> 赞同：0
> 
> 时间：2012-09-07T11:28:25.653
> 
> 标签：java

我有以下字符串：

```
\018attribute1=value1\028attribute2=value2\033attribute3=value3 
```

**注意：**这`"\0xx"`是一个不包含特殊字符的硬字符串，`"\0xx"`是随机的。我从一个 api 得到这个字符串，它包含“\”字符。

我想提取属性名称和属性值

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:34:53.607

您需要对`\`字符进行两次转义。一次用于 Java，一次用于正则表达式。这变成了`\\\\`. 然后你可以使用`Pattern`and`Matcher`建立你的价值观的地图：

```
Pattern p = Pattern.compile("\\\\0..([^=]+)=([^\\\\]*)");
Matcher matcher = p.matcher("\\018attribute1=value1\\028attribute2=value2\\033attribute3=value3");
Map<String, String> attributes = new HashMap<String, String>();
while (matcher.find()) {
    attributes.put(matcher.group(1), matcher.group(2));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:34:56.720

像这样对我有用：

```
String str = "\\018attribute1=value1\\028attribute2=value2\\033attribute3=value3";
Pattern p = Pattern.compile("0\\d{2}(.*?)=(.*?)(\\\\|$)");
Matcher m = p.matcher(str);
while(m.find())
{
    System.out.println(m.group(1));
    System.out.println(m.group(2));
    System.out.println("-------");
} 
```

它产生了：

```
attribute1
value1
-------
attribute2
value2
-------
attribute3
value3 
```

* * *

正则表达式假定您需要匹配的模式始终以反斜杠开头，后跟 2 位数字 (\0xx)。然后它将提取第一个子字符串，直到它遇到等号。一旦它与等号匹配，它将继续匹配，直到它碰到另一个斜杠或字符串的末尾。

如果你没有这三个数字，你可以用类似这样的东西来代替它，`\0\w{2}`这将匹配一个零，后跟任何字母、数字或下划线。

# ios - NSData 为 NULL 尽管长度为正

> ID：12317231
> 
> 赞同：-1
> 
> 时间：2012-09-07T11:28:28.187
> 
> 标签：ios, nsurlconnection

从网络服务器检索响应数据我使用以下方法`NSURLConnection`：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"%@    %i", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding], data.length);
    [responseData appendData:data];
} 
```

这给了我：

> （空）212

在我做的其他项目中，我没有这样的问题。

这个项目大约在三年前使用 iOS-SDK 3.0 开始，从那时起经历了 4.x 和 5.x。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:34:07.697

这很简单，您的数据可能不是有效的 UTF-8 字符串。这意味着`[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]`失败并返回`nil`。但是`data.length`仍然是积极的，因为有数据。

# facebook - Facebook：如何做到这一点？

> ID：12317236
> 
> 赞同：0
> 
> 时间：2012-09-07T11:28:48.677
> 
> 标签：facebook, hyperlink, external

我最近发现了这个链接：

[https://www.facebook.com/media/albums/?id=111115269008275](https://www.facebook.com/media/albums/?id=111115269008275)

我希望这是一个 facebook 页面，但如果你点击“Rezeptwelt”，你会被定向到一个不是 facebook 的页面。如何做到这一点？

我会感谢任何提示！

编辑：也有这个：[https](https://www.facebook.com/permalink.php?story_fbid=259658517487282&id=111115269008275) ://www.facebook.com/permalink.php? story_fbid=259658517487282&id=111115269008275 - 再一次，当点击“Rezeptwelt”时，我被引导到一个网页（它将我重定向回facebook，但这不是重点），我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:56:59.140

这是一个 Open Graph 页面，由外部 URL 上的 Like 按钮支持。此功能已[弃用，将在几周内删除](https://developers.facebook.com/docs/reference/plugins/like/migration/)

# sql-server - 使用 SQL Server 2012 FileTable 创建目录后资源管理器未更新

> ID：12317241
> 
> 赞同：7
> 
> 时间：2012-09-07T11:29:09.133
> 
> 标签：sql-server, filestream, explorer, sql-server-2012, filetable

我正在尝试通过调用以下代码的存储过程在 SQL Server FileTable 中创建目录：

```
INSERT INTO tblMyFiles (name, is_directory, is_archive) 
VALUES ('foldername', 1, 0); 
```

调用此代码后，如果我在 SQL Server Management Studio 中选择行，我可以看到位于文件表中的行，但是如果我通过 Windows 资源管理器浏览到文件表目录，我将看不到新创建的目录。如果我刷新 Windows 资源管理器，则该目录仍然不显示。如果我在资源管理器的文件表目录中创建一个文件，那么它似乎会唤醒资源管理器，然后出现我通过存储过程创建的所有目录。

在同一个 SQL 框和不同的数据库上运行它时，我没有遇到这个问题，我比较了所有属性，它们看起来相同，但我一定遗漏了一些东西，不知道是什么？任何帮助将非常感激。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:30:50.987

我已经看到了同样的问题 - Explorer 似乎无限期地缓存网络共享目录结构存在问题。我还注意到它不会刷新，直到我创建一个文件然后删除它 - 然后神奇地刷新缓存。删除文件必须强制刷新目录缓存。

此缓存问题似乎与**SMB**相关 - 我尝试了 SMB 2 ( *Windows 7* ) 和 SMB 3 ( *Windows 8* ) 并遇到了同样的问题。SQL 2012 [FileTables 应该支持 SMB 3](http://channel9.msdn.com/posts/SQL11UPD03-REC-05)。

[关注此 TechNet 论坛帖子后](http://social.technet.microsoft.com/Forums/en/w7itprogeneral/thread/947489ae-dc86-45f0-ad5e-463a62e1d59f)，禁用[**SMB 目录缓存**](http://technet.microsoft.com/en-us/library/ff686200%28v=ws.10%29.aspx)使其每次都刷新（*在 Win7 和 Win8 上验证*）。我猜这可能是 SQL Server 没有发送正确的 SMB 消息或 SMB 客户端堆栈中的错误。不管怎样——微软需要解决这个问题，因为他们同时管理客户端和服务器设计。

### 禁用 SMB 目录缓存

> [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanWorkstation\Parameters] "DirectoryCacheLifetime"=dword:00000000

# c# - 当我想在我的类/方法中使用不同的类型时，是否有 ant Design Solution 而不是泛型

> ID：12317244
> 
> 赞同：2
> 
> 时间：2012-09-07T11:29:18.833
> 
> 标签：c#, generics, .net-4.0

我有以下控制器（图中），它们调用静态方法来获取数据。由于我将在许多其他页面上使用数据，我不想一次又一次地请求数据。这就是为什么我要检查数据是否为空，然后适当地返回值。

```
private static IEnumerable<MovieDetails> GetJsonData(string jsonRequestURL)
{
    try
    {
        using (var wc = new WebClient())
        {
            var json = wc.DownloadString(jsonRequestURL);
            var rootObj = JsonConvert.DeserializeObject<MoviesListRootObject>(json);

            var responseObject = rootObj.movieResponse;

            var movieDetails = responseObject.Select(movieDetail =>
                                                        new MovieDetails
                                                        {
                                                            Description = movieDetail.description,
                                                            MovieURI = movieDetail.formats.res150p,
                                                            Thumbnail = movieDetail.image,
                                                            Title = movieDetail.title,
                                                            ID = movieDetail.id
                                                        });
            return movieDetails;
        }
    }

    catch (Exception exception)
    {
        //Error Handling
    }
} 
```

到目前为止，这是完美的，`GetJsonData`只有一种类型的反序列化（目前`MoviesListRootObject`如果我想转换为根对象的另一种类型：） `FeaturedlistRootObject`。

但是我如何以同样的方法去渴望其他类型呢？ ![控制器示意图](../Images/c40ebd38cb6d393c1d467412a0783939.png)

泛型是唯一的选择还是存在一些我可以使用的更好的设计/功能（不确定动态会有多大帮助）？

同样，如果我只剩下泛型，我可以避免编写基于不同类型的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:33:14.967

您的代码似乎有两部分可以更改：

1.  根对象的类型（例如`MoviesListRootObject`）和结果的类型（例如`IEnumerable<MovieDetails>`）
2.  如何从根对象创建结果

泛型是#1 的完美解决方案，但它们对#2 帮助不大，你需要一些其他机制。根据代码的结构，#2 的最佳解决方案可能会有所不同。我认为您在这里几乎有两种选择：

1.  使方法通用并使用委托来创建结果
2.  使整个类型通用并通过调用抽象方法创建结果

选择 1 可能如下所示：

```
private static TResult GetJsonData<TRoot, TResult>(
    string jsonRequestURL, Func<TRoot, TResult> resultSelector)
{
    using (var wc = new WebClient())
    {
        var json = wc.DownloadString(jsonRequestURL);
        var rootObj = JsonConvert.DeserializeObject<TRoot>(json);
        return resultSelector(rootObj);
    }
}

private static IEnumerable<MovieDetails> GetMovieDetails(string jsonRequestURL)
{
    return GetJsonData<MoviesListRootObject, IEnumerable<MovieDetails>>(
        jsonRequestURL,
        rootObj =>
        {
            var responseObject = rootObj.movieResponse;

            var movieDetails = responseObject.Select(
                movieDetail =>
                    new MovieDetails
                    {
                        Description = movieDetail.description,
                        MovieURI = movieDetail.formats.res150p,
                        Thumbnail = movieDetail.image,
                        Title = movieDetail.title,
                        ID = movieDetail.id
                    });
            return movieDetails;
        });
} 
```

这样，下载 JSON 数据的通用代码与下载电影细节的特定代码是分开的。

# python - python mock library - 在单元测试时修补类

> ID：12317255
> 
> 赞同：5
> 
> 时间：2012-09-07T11:30:16.477
> 
> 标签：python, mocking, patch

我无法理解模拟补丁的工作原理以及它是否能够解决我的问题。

我有 3 个文件：与外部接口 (a.py) 的通信、业务逻辑 (b.py) 和测试 (test.py)。我想在运行测试时修补业务逻辑使用的外部接口。

一个.py：

```
class SomeProductionClassINeedPatch(object):
    name = 'Production Class (communication with some external service)'
    def do_something(self):
        print '<some feature with external service>' 
```

b.py：

```
import mock
from src.tmp.mocks.a import SomeProductionClassINeedPatch

class WorkingClass(object):
    def some_method_that_uses_external_class(self, *args):
        external = self._external
        external.do_something()

    @property
    def _external(self):
        if not hasattr(self, '_ext_obj' or not self._ext_obj):
            self._ext_obj = SomeProductionClassINeedPatch()
            print isinstance(self._ext_obj, mock.MagicMock) # False
        return self._ext_obj

b = WorkingClass()
b.some_method_that_uses_external_class() 
```

测试.py：

```
import mock
from src.tmp.mocks.b import WorkingClass    # class I want to test

@mock.patch('src.tmp.mocks.a.SomeProductionClassINeedPatch')
def test_some_method_of_working_class(external_mock=None, *args):
    o = WorkingClass()
    o.some_method_that_uses_external_class()        # external interface wasn't patched: <some feature with external service> - but I need mock here!
    print '<test> - '+str(isinstance(o._external, mock.MagicMock))  # False

test_some_method_of_working_class() 
```

我希望在**test.py**中调用 o.some_method_that_uses_external_class()实际上不会使用外部接口，而是模拟对象。但似乎仍然使用实际对象。

此外，当我在 test.py 或 b.py 中检查外部接口对象的实例时 - 我无法让它们通过**isinstance(object, MagicMock)**检查，它总是返回 false。即使我尝试在**b.py**中应用相同的补丁（作为类装饰器）。我究竟做错了什么？

如果这很重要，我会使用 Michael Foord 的 python 2.7 和模拟库 1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:38:43.267

如在[哪里修补](https://docs.python.org/3/library/unittest.mock.html#where-to-patch)中所述：

> patch 通过（临时）将名称指向的对象更改为另一个对象。可以有许多名称指向任何单个对象，因此要使修补工作正常，您必须确保修补被测系统使用的名称。

在您的示例中，使用您要修补的对象的代码位于 module 中`b`。调用patch时，类已经导入到module中`b`，所以patch`a`不会对`b`. 您需要在以下路径中路径对象`b`：

```
@mock.patch('src.tmp.mocks.b.SomeProductionClassINeedPatch') 
```

这将为您提供预期的结果，第一次调用`b`未打补丁，而第二次调用`test`使用了模拟对象：

```
# python test.py
False
<some feature with external service>
True
<test> - True 
```

# python - 附加到 defaultdict 中的列表

> ID：12317261
> 
> 赞同：10
> 
> 时间：2012-09-07T11:30:41.480
> 
> 标签：python, dictionary

我正在尝试将对象附加到默认字典中的值列表：

```
dic = defaultdict(list)
groups = ["A","B","C","D"]

# data_list is a list of objects from a self-defined class. 
# Among others, they have an attribute called mygroup

for entry in data_list:
    for mygroup in groups:
        if entry.mygroup == mygroup:
            dic[mygroup] = dic[mygroup].append(entry) 
```

所以我想收集属于这个字典中一个组的所有条目，使用组名作为键，所有相关对象的列表作为值。

但是上面的代码引发了一个 AttributeError：

```
 dic[mygroup] = dic[mygroup].append(entry)
AttributeError: 'NoneType' object has no attribute 'append' 
```

所以看起来由于某种原因，这些值没有被识别为列表？

有没有办法附加到用作字典或默认字典中的值的列表？（我以前用普通的 dict 试过这个，得到了同样的错误。）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-07T11:33:43.787

尝试

```
if entry.mygroup == mygroup:
    dic[mygroup].append(entry) 
```

这与您`append`在任何列表中使用的方式相同。`append`不返回任何内容，因此当您将结果分配给 时`dic[mygroup]`，它会变成`None`. 下次您尝试附加到它时，您会收到错误消息。

# python - 如何使用 Python 将电话号码列表（例如 202.202.2020）格式化为 (202) 202-2020？

> ID：12317262
> 
> 赞同：-1
> 
> 时间：2012-09-07T11:30:41.067
> 
> 标签：python

我有一个巨大的电话号码列表，其格式主要是例如 202.202.2020，但有时是 2022022020，有时是 202 202 2020 等。（但它们总是 10 个号码）。
我想使用 python 脚本将它们全部格式化为**(202) 202-2020 。**

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:40:58.023

删除垃圾（。或 - 等），只留下数字。

```
number = ''.join([ n for n in number if n.isdigit() ]) 
```

然后输入你想要的格式。

```
number = '(' + number[:3] + ') ' + number[3:6] + '-' + number[6:10] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:10:28.987

您可以轻松地使用正则表达式：[http ://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

例如，这适用于您描述的情况：

```
import re
regexp = re.compile('([0-9]{3}).*([0-9]{3}).*([0-9]{4})')

test = '222.222.2222'
match = regexp.match(test)
'(%s) %s-%s' % match.groups() # Gives '(222) 222-2222'

test = '222 222 2222'
match = regexp.match(test)
'(%s) %s-%s' % match.groups() # Gives '(222) 222-2222' 
```

# mysql - MySQL的STR_TO_DATE()函数

> ID：12317265
> 
> 赞同：4
> 
> 时间：2012-09-07T11:30:55.480
> 
> 标签：mysql, date, string-to-datetime

我有这种格式的日期`5 Mar 1985 0:00`存储在表中`VARCHAR`。
我想把它转换成`Datetime`，我使用`STR_TO_DATE()`如下：

```
SELECT STR_TO_DATE(birth_date, '%d %m %Y %h:%i') FROM student WHERE pk = 29 
```

但它返回`NULL`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T11:43:01.107

试试这种格式 -`'%e %b %Y %k:%i'`例如 -

```
SELECT STR_TO_DATE('5 Mar 1985 2:33', '%e %b %Y %k:%i') dt;
+---------------------+
| dt                  |
+---------------------+
| 1985-03-05 02:33:00 |
+---------------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:32:18.670

试试`STR_TO_DATE(birth_date, '%d %M %Y %h:%i')`吧

`%m`= 整数 `%M`月份 = 字符串月份（例如：Mar）

# google-app-engine - 在 GAE 中使用 pygooglechart

> ID：12317270
> 
> 赞同：0
> 
> 时间：2012-09-07T11:31:04.013
> 
> 标签：google-app-engine, python-2.7

当我使用“从 pygooglechart 导入 PieChart3D”时，谷歌应用程序引擎报告“没有名为 pygooglechart 的模块”可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:41:06.270

您需要上传要使用的模块 - 您可以将 pygooglechart 放在应用程序的目录中，它应该可以工作。请参阅[如何在 Google App Engine 中导入模块？](https://stackoverflow.com/questions/2710861/how-to-import-modules-in-google-app-engine).

如果您要调用的模块使用任何本机 C 代码，它将无法在 Google App Engine 上运行，但我认为 pygooglechart 是纯 Python，所以应该没问题。

# css - 输入框和按钮的宽度相同，但我不想要

> ID：12317271
> 
> 赞同：1
> 
> 时间：2012-09-07T11:31:06.370
> 
> 标签：css

html:

```
<form id="personal_info" action="..." method="post">
    <legend>Personal info</legend>
    <p>
        <label for="fullname">Your name: </label>
        <input name="fullname" id="fullname" type="text" tabindex="1" />
    </p>
    <p>
        <label for="email">Your e-mail: </label>
        <input name="email" id="email" type="text" tabindex="2" />
    </p>
    <p><input id="send" type="submit" value="Send" /></p>
</form> 
```

CSS：

```
form#personal_info {
    background:#dee;
    width:470px;
    padding:10px;
    border:1px solid #000;
    margin:0;
}
form#personal_info legend {
    font-family:georgia, sans-serif;
    font-size:1.1em;
    font-weight:bold;
    border:3px solid #fff;
    margin-bottom:5px;
    padding:3px;
    width:270px;
    background:#fff url(legend.gif) repeat-x center left;
}
form#personal_info label {
    clear:left;
    display:block;
    float:left;
    width:100px;
    text-align:right;
    padding-right:10px;
    color:#888;
    margin-bottom:0.5em;
}
form#personal_info input {
    border:1px solid #fff;
    background:#fff url(legend.gif) repeat-x top left;
    padding-left:0.5em;
    margin-bottom:0.6em;width:300px;
}
form#personal_info #button1 {
    color:#c00;
    padding-right:0.5em;
    cursor:pointer;
    margin-left:8px;
    width:100px;
}
form#personal_info #button1:hover {
    background-position:center left;
    color:#000;
    width:100px;
} 
```

输入和按钮的宽度相同，均为 300 像素，但我希望按钮的宽度为 100 像素。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:36:39.527

**[看演示](http://jsfiddle.net/M4g8q/)**

如果您只是对其应用样式，`input`则会将这些样式应用于所有`input`元素，例如`textbox`，`button`因为它们是输入元素。

您应该使用`id's`唯一地应用样式。

使用`#button`并不意味着这些样式将应用于`buttons`.

您可以做的是将 id 分配给您的输入元素，然后相应地应用样式

```
<input id="txtEmail" type="text"/>
<input id="btnSend" type="submit"/> 
```

**CSS：**

```
#txtEmail
{
//your styles
}

#btnSend
{
//your styles
} 
```

或者你可以做这样的事情

```
input[type="text"]
{
//your styles
}    

input[type="submit"]
{
//your styles
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:43:35.337

您可以指定规则应更改的输入类型：

> 输入[类型='文本']

此外，如果您在 CSS #id 中使用 ID，则无需在它们前面加上任何前缀 - 这无济于事！

# c# - windows 安装程序安装进度状态消息

> ID：12317272
> 
> 赞同：2
> 
> 时间：2012-09-07T11:31:11.760
> 
> 标签：c#, .net, windows-installer

我将 VS 2010(C#) 用于我的 Windows 应用程序及其安装程序包的创建。是否可以通过覆盖任何安装程序方法或任何其他方式在进度条下方显示自定义状态消息，例如“当前正在安装数据库脚本...”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:14:38.670

这是代码项目的链接，其中简要描述了设置项目中的 CustomAction。[如何使用 Visual Studio 2010 中的安装项目创建自定义对话框。](http://www.codeproject.com/Articles/181395/How-to-create-custom-dialog-boxes-using-the-Web-Se)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:36:38.097

我不知道VS是否可能。Windows Installer 数据库中有一个[操作表。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367516%28v=vs.85%29.aspx)您可以使用 Windows SDK 中的特殊工具“Orca”对其进行编辑。或者您可以使用 Wix 工具集（`ProgressText`- 元素）

# jquery - jquery验证引擎中整数范围的自定义验证规则

> ID：12317275
> 
> 赞同：0
> 
> 时间：2012-09-07T11:31:23.243
> 
> 标签：jquery, regex, validation, jquery-validate

我正在使用[JQuery 验证引擎](https://github.com/posabsolute/jQuery-Validation-Engine)库。我正在尝试通过`Regex`或`custom method`验证字段输入来创建自定义验证。

我建议将此验证名称命名为`custom integer validation containing integer range or some integers separated by comma(s) or combination of both`.

以下是标准：

1.  可以输入任何整数。例如`89`
2.  可以输入任何整数范围。例如`12-18`或`15-18`但不是`19-3 (range should between min to max)`
3.  可以输入以逗号（，）分隔的上述两个输入的任意组合，逗号之间只能有或没有空格。例如`1-6, 5, 8-13, 7`。**但不是** `-3-5 (not -3)`或`3-7-, 10 (not 7-)`

我尝试了这个自定义规则：

```
"integerRangeComma": {                    
             "regex": /^(([0-9]+)([\,]([0-9]+))?|([\,]([0-9]+))?)$/,
             "alertText": "* Invalid floating decimal number"
          }, 
```

我进行上述验证的预期目的是：

我有一个总文件列表让我们假设`12`。我在表格中创建了一个文本框来接受什么文件，他喜欢在他的个人资料中添加。上述标准应适用于此。

我的下一个问题是，我还必须验证用户输入的数字不大于`12 (my presumption)`.

我如何通过创建自己的自定义规则或其他方式来实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:25:18.657

用正则表达式做数学总是一件痛苦的事，你应该解析它并用代码检查*不大于 12*的条件。但是，对于这个简单的示例，可以使用

```
[0-9]|1[12] 
```

然后，您对单个整数或范围的输入的组合将是

```
number(-number)? 
```

对于一个输入，或两个逗号分隔的输入是

```
input(\s*,\s*input)? 
```

如果您想要两个以上，请使用`*`无限或`{0,n}`有限重复而不是`?`.

所以在一起，你得到

```
var integerRangeComma = {                    
     "regex": /^([0-9]|1[12])(-[0-9]|-1[12])?(\s*,\s*([0-9]|1[12])(-[0-9]|-1[12])?)?$/,
     "alertText": "a single page number until 12 or an interval in them, or two of those separated by a comma"
}; 
```

# php - 使用 codeigniter 调整图像大小

> ID：12317276
> 
> 赞同：0
> 
> 时间：2012-09-07T11:31:24.810
> 
> 标签：php, codeigniter

我一直在寻找一些教程或可以帮助我解决这个问题的东西，我正在开发一个网站，用户可以在其中放置提供房间的广告，并且当他们放置广告时，他们可以添加一些照片。我想调整照片的大小并降低一些质量，这样它们就不会变得太大。问题是有时用户会插入奇怪的分辨率，所以我想做一些类似 css background-size:cover 属性的事情。调整照片大小，使较小的一侧适合并裁剪其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:35:57.337

Image Moo 库将完全满足您的需求。它非常强大且非常易于使用

[官方网站](http://www.matmoo.com/digital-dribble/codeigniter/image_moo/)

[CI 论坛主题](http://codeigniter.com/forums/viewthread/161469/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:01:40.723

试试这个：首先加载图像库：

```
$this->load->library('image_lib'); 
```

然后给出这样的图像配置

```
$config['width'] = 75;
$config['height'] = 50;
$this->load->library('image_lib', $config);
$this->image_lib->resize();//You can also pass the width,height params through this function 
```

就是这样。也许这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:41:42.377

Image MOO 是一个出色的库，可以即时完成图像操作......

例如，要将上传的图像调整为特定路径，您只需执行此操作

```
function example_callback_after_upload($uploader_response,$field_info,                                 $files_to_upload)
{
$this->load->library('image_moo');

//Is only one file uploaded so it ok to use it with $uploader_response[0].
$file_uploaded = $field_info->upload_path.'/'.$uploader_response[0]->name; 

$this->image_moo->load($file_uploaded)->resize(800,600)->save($file_uploaded,true);

return true;
} 
```

有关更多详细信息，请参见：[image moo library](http://www.matmoo.com/digital-dribble/codeigniter/image_moo/) 希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T22:23:15.363

**宽幅图像！**

[http://wideimage.sourceforge.net/](http://wideimage.sourceforge.net/)

[http://getsparks.org/packages/wideimage-ci/versions/HEAD/show](http://getsparks.org/packages/wideimage-ci/versions/HEAD/show)

**基本用法**

```
// output to browser in JPG format with quality set to 80%.
$this->wideimage->load('image.png')->resize(90, 90)->output('jpg', 80); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-25T10:39:40.087

另外，测试此代码。

```
$this->image_moo->load(FCPATH.'/upload/'.$image)->resize(750,450,TRUE)->save(FCPATH.'/upload/'.'750-450-124545cd.png', $overwrite=false); 
```

# python - 尝试在 kivy 中构建节拍器 - 事件循环管理

> ID：12317278
> 
> 赞同：1
> 
> 时间：2012-09-07T11:31:30.327
> 
> 标签：python, events, loops, kivy

因为我在这里没有找到任何东西，所以我试着提出我的问题。

我正在尝试在 kivy 中构建一个简单的节拍器。我基本上采用了安装时提供的音频示例，并且想添加节拍器功能。

```
class AudioButton(ToggleButton):

    filename = StringProperty(None)
    sound = ObjectProperty(None)

    def on_filename(self, instance, value):
        # the first time that the filename is set, we are loading the sample
        if self.sound is None:
            self.sound = SoundLoader.load(value)

    def on_press(self):
        # stop the sound if it's currently playing
        if self.sound.status != 'stop':
            self.sound.stop()
        self.sound.play() 
```

如您所见，我将课程从 更改`Button`为`ToggleButton`。

我试图用 放一个`while`循环`self.sound.play()`，但这会导致无穷大，所以基本上我正在寻找一种方法来打破循环，如果我再次按下按钮。

我并没有真正理解文档中的事件循环管理，我认为这应该是答案，但我以前从未使用过事件循环。如果有人可以为这种情况提供一些示例代码，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T12:36:58.143

您想开始寻找的地方是 Kivy 文档讨论[时钟事件](http://kivy.org/docs/guide/events.html#clock-events)。在像这样的事件驱动系统中，任何类型的`while`循环都会使系统陷入瘫痪。相反，当您希望某些事情定期发生时，您要求系统设置一个计时器，并告诉它您希望在每次计时器结束时调用的函数。

在您的情况下，您可能只需播放单个节拍器的滴答声并完成，直到下一次计时器结束。

# python - 无法在 Mountain Lion 上导入 NumPy

> ID：12317279
> 
> 赞同：2
> 
> 时间：2012-09-07T11:31:37.133
> 
> 标签：python, numpy, nltk, osx-mountain-lion

真的很难让 nltk 工作。使用 Scipy Superpack 下载我认为的解决方案，但收到以下错误：

```
>>> import nltk
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk/__init__.py", line 105, in <module>
    from collocations import *
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk/collocations.py", line 38, in <module>
    from nltk.metrics import ContingencyMeasures, BigramAssocMeasures, TrigramAssocMeasures
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk/metrics/__init__.py", line 23, in <module>
    from nltk.metrics.segmentation    import windowdiff, ghd, pk
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk/metrics/segmentation.py", line 44, in <module>
    import numpy
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_5c944b9_20120828-py2.7-macosx-10.8-x86_64.egg/numpy/__init__.py", line 137, in <module>
    import add_newdocs
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_5c944b9_20120828-py2.7-macosx-10.8-x86_64.egg/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_5c944b9_20120828-py2.7-macosx-10.8-x86_64.egg/numpy/lib/__init__.py", line 4, in <module>
    from type_check import *
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_5c944b9_20120828-py2.7-macosx-10.8-x86_64.egg/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_5c944b9_20120828-py2.7-macosx-10.8-x86_64.egg/numpy/core/__init__.py", line 5, in <module>
    import multiarray
ImportError: dlopen(/Library/Python/2.7/site-packages/numpy-1.8.0.dev_5c944b9_20120828-py2.7-macosx-10.8-x86_64.egg/numpy/core/multiarray.so, 2): no suitable image found.  Did find:
    /Library/Python/2.7/site-packages/numpy-1.8.0.dev_5c944b9_20120828-py2.7-macosx-10.8-x86_64.egg/numpy/core/multiarray.so: mach-o, but wrong architecture 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:10:52.377

当您尝试“import numpy”时会发生什么？回溯是否仍然导致**multiarray.so**类似于：

```
 no matching architecture in universal wrapper 
```

如果是这样，您需要使用正确的 archflags 进行重建，在您的情况下，我假设它是 x86_64。

```
ARCHFLAGS="-arch x86_64" pip install numpy 
```

# android - 无法升级数据库

> ID：12317280
> 
> 赞同：0
> 
> 时间：2012-09-07T11:31:38.430
> 
> 标签：android, database, sqlite

下面是我的数据库代码，我正在尝试通过更改版本号来升级它，但是当我运行表时没有重新创建或更改......代码中有任何问题请帮助

```
public class DBHelper extends SQLiteOpenHelper {
    public static final int db_version = 1;
    private static final String CL_CITY = null;
    public static final String COL_NAME = "pName";
    //private static final String TABLE_NAME = CL_CITY;
    public static String TAG = DBHelper.class.getName();
    public static String DB_PATH = "data/data/org.clock/database/";
    private static String STATUS= "STATUS";
    private static String dbName = "clock.db";
    private static final String STRING_ALTER = "ALTER TABLE "+CL_CITY+" ADD "+STATUS+" STATUS";

    protected SQLiteDatabase dataBase;
    protected Context context;
    //private Context context;
    private static SQLiteDatabase checkDB = null;
    public DBHelper(Context context, String dbName) {
        super(context, dbName, null, 34);
        //this.dbName = dbName;
        this.context = context;
    }

    public void createDb() throws IOException {
        boolean dbExist = checkDataBase();
        Log.d(TAG, "DBChecking............ dbExist : " + dbExist);
        if (!dbExist) {
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                Log.d(TAG, "Error cloneing database" + e);
            }
        }
    }

    private boolean checkDataBase() {

        try {
            if(checkDB == null){
                String path = DB_PATH + dbName;
                Log.d(TAG, "checkDataBase path=" + path);
                checkDB = SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.OPEN_READONLY);
            }
        } catch (SQLiteException e) {
            Log.e(TAG, "DBChecking............ ", e);
        }
        /*if (checkDB != null) {
            checkDB.close();
        }*/
        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException {
        Log.i(TAG, "copyDataBase database...");
        File file = new File(DB_PATH);
        Log.i(TAG, "cloneDataBase file=" + file);
        file.mkdirs();
        InputStream dbInput = context.getAssets().open(dbName);
        String outPutFile = DB_PATH + dbName;
        Log.i(TAG, "copyDataBase outPutFile=" + outPutFile);
        OutputStream dbOutPut = new FileOutputStream(outPutFile);
        byte[] buffer = new byte[1024];
        Log.i(TAG, "copyDataBase buffer=" + buffer);
        int length;
        while ((length = dbInput.read(buffer)) > 0) {
            dbOutPut.write(buffer, 0, length);
        }
        dbOutPut.flush();
        dbOutPut.close();
        dbInput.close();
    }

    public void openDb() throws SQLException {
        String dbPath = DB_PATH + dbName;
        dataBase = SQLiteDatabase.openDatabase(dbPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    @Override
    public synchronized void close() {
        if (dataBase != null)
            dataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

if (newVersion > oldVersion){

    //db.execSQL("CREATE TABLE "+"staff"+" (_id INTEGER PRIMARY KEY AUTOINCREMENT, "
          // +COL_NAME+" TEXT);");

           db.execSQL("STRING_ALTER ");

    }
    }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:34:29.203

更改`db.execSQL("STRING_ALTER ");`为`db.execSQL(STRING_ALTER);`

还要检查您的 alter sql 命令。看起来很不对劲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:02:15.420

我注意到您使用了错误的数据库路径：

```
public static String DB_PATH = "data/data/org.clock/database/"; 
```

这应该是：

```
public static String DB_PATH = "data/data/org.clock/databases/"; 
```

（数据库/ ==> 数据库/）

# windows-8 - 我们如何在 Metro 应用程序中显示页面内容，就好像它显示在网页中一样？

> ID：12317281
> 
> 赞同：0
> 
> 时间：2012-09-07T11:31:37.537
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

我的现代 Win8 应用程序项目中有一个 .html 文件，其中包含网页数据。现在我们如何在这个现代应用程序中显示页面内容，就好像它显示在网页中一样？

注意：我不想离开应用程序。在应用程序内我想显示我保存在项目中的 .html 文件的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:42:48.630

使用[WebView](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx)控件并将您保存在项目中的文件设置为源。

```
<WebView Source="ms-appx-web:///HTMLPage1.html"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:38:35.333

使用[WebView](http://msdn.microsoft.com/en-us/library/windows/apps/br227702.aspx)对象并导航到项目文件夹中的本地页面。

ms-appx-web:///HTMLPage1.html

# java - 将 JSP 字段索引到控制器

> ID：12317284
> 
> 赞同：0
> 
> 时间：2012-09-07T11:31:41.470
> 
> 标签：java, jsp, spring-mvc

我们正在开发一个非常大的 Spring MVC 应用程序。从外观上看，我们将在 JSP 中有很多字段，我们必须手动映射到模型，并进行基本验证（除了带注释的验证）。

是否有任何框架或技术可以让我们管理这么多领域——某种地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:43:12.453

有什么东西阻止你使用`@ModelAttribute`吗？它将从 WebRequest 的字段中创建对象。

控制器的方法如下所示：

```
@RequestMapping(value = "/mapping")
protected ModelAndView changeState(@ModelAttribute StateBean state) { ... } 
```

我还遇到了映射不是那么直接的情况，我将整个传递`WebRequest`给我的控制器并创建了一些辅助方法来获取我需要的字段。这对于动态生成的复杂结构（如树表等）特别有用。

```
RequestMapping(value = "/mapping")
protected ModelAndView processRules(WebRequest request) { ... } 
```

在辅助方法中，我通过生成名称和调用来获取字段：

```
request.getAttribute(fieldName); 
```

# spring - 如何在 Spring 3.1 应用程序中声明 JSF 托管 bean？

> ID：12317288
> 
> 赞同：7
> 
> 时间：2012-09-07T11:31:54.497
> 
> 标签：spring, jsf

这是我第一次开发基于 Java EE 架构的应用程序，我正在使用

*   JSF 2.0
*   春天 3.1
*   JPA 2.0

我想问你一个我有点困惑的问题。我想声明我的 JSF 托管 bean，但是有很多解决方案可以处理这个约束：

1.  在 faces-config.xml 中声明 manged bean。
2.  用 @ManagedBean 注解覆盖我的控制器。
3.  用 @Controller 注释覆盖我的控制器。

我的问题是：这三种解决方案有什么区别？！以及我应该对我的 ApplicationConfig.java 或/和 web.xml 进行哪些更改？！关于 Spring，我应该在我的 web.xml 中放置某种侦听器吗？！

我真的尝试阅读许多教程和示例，但每次我都发现自己被屏蔽了！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-07T11:58:55.943

在集成 Spring 和 JSF 时，您真的不能成为这两种技术的初学者，因为它们不能很好地结合使用。我对您的第一个也是最好的建议是，在尝试集成它们之前，先阅读几本关于 JSF 和 Spring 的书籍，并真正分别了解它们。

话虽如此，JSF 是一个基于组件的 Web 框架，重点是 MVC。Spring 是一个依赖注入和控制反转框架，并非 Web 应用程序独有。

如果你不明白这三个术语是：

*   基于组件的网络框架

*   依赖注入

*   控制反转

然后我的建议是，您只需停止正在做的事情并立即开始阅读。

整合这两件事的主要问题是两个框架之间的职责有一些重叠，需要解决。JSF 作为一个独立的框架维护它自己的托管 bean 的范围，而不需要一个单独的 DI 框架。然而，当引入 Spring 时，自然会产生冲突。Spring 除了 JSF 之外还管理自己的 Bean，因此要引用这些 ManagedBean 并将业务对象或 DAO 正确注入其中以供使用，JSF ManagedBeans 需要成为 Spring Controller。

您可以使用注释声明 JSF ManagedBean `@Controller`。Spring 3 足够聪明，可以识别出它是一个 JSF 托管 bean，并且 bean 名称将是任何为 ManagedBean 声明的名称。

```
@Controller
@Scope("session")
@ManagedBean(name="testBean") 
```

现在已经处理好了，下一个问题是 JSF 实现附带的讨厌的 EL Resolver。EL Resolver 基本上就是这样做的，它解析在您的 XHTML/JSF 页面上遇到的 EL 表达式。但是，当引用`testBean`时，它将无法正确解析此名称，因为它通过该名称引用 JSF 托管 bean，并且将无法找到具有您需要的所有 Spring 注入依赖项的 Spring Controller。

Spring 3 通过为您提供一个自定义 EL Resolver 来代替与您的 JSF 实现捆绑在一起的那个来解决这个问题。您可以声明它用于`faces-config.xml`

```
<application> 
   <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver> 
</application> 
```

现在终于：

> 我应该在我的 web.xml 中放置某种监听器吗？！

如果您只是集成 JSF + Spring 而不需要任何其他 Spring 控制的 Servlet 或不需要 Spring Security 集成，那么**您**不需要在`web.xml`. 您只需要声明 FacesServlet 及其上下文参数，以及您的情况可能需要的任何其他第三方组件库 servlet。

# php - 打印带有一些 MySQL 记录的数组

> ID：12317292
> 
> 赞同：0
> 
> 时间：2012-09-07T11:32:03.967
> 
> 标签：php, html, mysql, html-table, duplicates

不确定该主题是否适合该问题。

我有一个表格，其中包含一些带有年份信息的数据，如下所示。

```
table mydata
+----+------------+----------+
| id | year       | some_data|
+----+------------+----------+
|  1 | 2011       | x        |
|  2 | 2012       | y        |
|  2 | 2009       | x        |
|  2 | 2007       | z        |
|  1 | 2009       | b        |
|  3 | 2011       | a        |
|  2 | 2007       | n        |
|  3 | 2006       | h        |
|  2 | 2007       | t        |
+----+------------+----------+ 
```

这是我的问题。我正在尝试从带有年份信息的 mydata 表中获取某些 id 的数据。但是我需要显示某些年份范围内的记录，例如过去 6 年和现在的未来 6 年。

例如;

```
id = 2

+----+------------+----------+
| id | year       | some_data|
+----+------------+----------+
|  2 | 2007       | z        |
|  2 | 2007       | n        |
|  2 | 2009       | x        |
|  2 | 2012       | y        |
+----+------------+----------+ 
```

我需要在 HTML 表结构中显示这样的数据：

```
+------------+----------+
| year       | some_data|
+------------+----------+
| 2006       |          |
| 2007       | z        |
|            | n        |
|            | t        |
| 2008       |          |
| 2009       | x        |
| 2010       |          |
| 2011       |          |
| 2012       | y        |
| 2013       |          |
| 2014       |          |
| 2015       |          |
| 2016       |          |
| 2017       |          |
| 2018       |          |
+------------+----------+ 
```

不知道哪一年有重复记录，哪一年没有。所以我总是用不止一个查询或大量 for 循环来尝试我的解决方案。并且没有按我的意愿工作。

和想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:53:51.663

从数据库中获取已排序的数据，然后通过循环您希望输出的年份在 PHP 中构建您的输出表。

例如，使用 PDO 对象`$dbh`：

```
$qry = $dbh->prepare('
  SELECT   year, some_data
  FROM     mydata
  WHERE    year BETWEEN :start AND :end
  ORDER BY year
');

$qry->bindParam(':start', $range_start);
$qry->bindParam(':end'  , $range_end  );

$current_year = intval(date('Y'));
$range_start  = $current_year - 6;
$range_end    = $current_year + 6;

if ($qry->execute()) {

  $row = $qry->fetch();

  echo '<table><tr><th scope="col">year</th><th scope="col">some_data</th></tr>';
  for ($y = $range_start; $y <= $range_end; $y++) {
    echo "<tr><th scope=\"row\">$y</th><td><ul>";
    while ($row && $row['year'] == $y) {
      echo '<li>' . htmlentities($row['some_data']) . '</li>';
      $row = $qry->fetch();
    }
    echo "</ul></td></tr>";
  }
  echo '</table>';

} 
```

# spring - Spring Security 中的自定义权限 - targetId null

> ID：12317293
> 
> 赞同：1
> 
> 时间：2012-09-07T11:32:05.290
> 
> 标签：spring, spring-security

我正在使用基于表达式的 Spring Security 3.x 保护我的应用程序。我有以下服务接口：

```
@PreAuthorize("hasRole('ROLE_ADMIN') or hasPermission(#employeeId, 'employee', 'isOwner')")
EmployeeData getById(Integer employeeId);

@PreAuthorize("hasRole('ROLE_ADMIN') or hasPermission(#employeeId, 'employee', 'isOwner')")
void update(Integer employeeId, EmployeeData employeedata); 
```

我的 PermissionEvaluator 如下所示：

```
@Component
public class CustomPermissionEvaluator implements PermissionEvaluator {
    private Map<String, Permission> permissionMap = new HashMap<String, Permission>();

    public CustomPermissionEvaluator(Map<String, Permission> permissionMap) {
        this.permissionMap = permissionMap;
    }

    @Override
    public boolean hasPermission(Authentication authentication, Object targetDomainObject, Object permission) {
        throw new PermissionNotDefinedException("Permission not supported for loaded domain object by " + this.getClass().toString());
    }

    @Override
    public boolean hasPermission(Authentication authentication, Serializable targetId, String targetType, Object permission) {
        verifyPermissionIsDefined((String) permission);
        return permissionMap.get(permission).isAllowed(authentication, (Integer) targetId);
    }

    private void verifyPermissionIsDefined(String permissionKey) {
        if (!permissionMap.containsKey(permissionKey)) {
            throw new PermissionNotDefinedException("No permission with key '" + permissionKey + "' is defined in" + this.getClass().toString());
        }
    }
} 
```

对于第一个服务方法 (getById)，它按预期工作：

*   如果用户有 ROLE_ADMIN，那么他就可以获取数据。
*   如果用户想查看自己的个人资料，他也可以

但是，对于第二种方法，更新方法，应用程序不起作用。targetId 在调用方法时始终为空`hasPermission(Authentication authentication, Serializable targetId, String targetType, Object permission)`。

我不知道为什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:48:21.733

请检查服务和实现中的参数名称是否匹配。

您还可以检查*MethodSecurityEvaluationContext.lookupVariable*方法如何与调试器一起使用。

查看类似的问题：[spring security：为什么我们不能在 @PreAuthorize 中访问 Hibernate 实体参数？](https://stackoverflow.com/questions/10767469/spring-security-why-cant-we-access-hibernate-entitiy-parameters-in-preauthor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T19:29:03.947

我有类似的问题： targetDomainObject 每次 hasPermission 调用都为空。

对我来说，问题是我的接口 A 设置了所有身份验证注释（如 @PreAuthorize 和 @PostAuthorize）。它由抽象类 B 实现。具体类 C 是实际的服务。

```
public class C extends B 
```

这没有用。

```
public class C extends B implements A 
```

但这工作得很好。

从代码逻辑来看，这些声明是完全一样的。但是 Spring security 混淆了第一个
并且与第二个正常工作。

# css - 使用 display:table 的 HTML 布局问题

> ID：12317305
> 
> 赞同：0
> 
> 时间：2012-09-07T11:32:42.543
> 
> 标签：css, html, tablelayout

我正在尝试使用`display:table, table-row`以下方式获得最终输出。蓝色框应可调整大小，红色框应具有固定高度。

![在此处输入图像描述](../Images/de0611fac8dafa6b9d2cd202439dd5b4.png)

[在这里](http://jsbin.com/ikepif/1/edit)启动一个 jsbin 。

我正在寻找一个 CSS 解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:38:10.690

它适用于**display:table**。像这样写：

```
#wrapper {height:250px; width:200px; border:3px solid gray; display:table;}
  #one {height:100px; background-color:red;display: table-row;}
  #two {background-color:blue;display: table-row;} 
```

检查这个[http://jsfiddle.net/jYvK2/](http://jsfiddle.net/jYvK2/)

# hibernate - IJ000453：无法获取托管连接数据源

> ID：12317307
> 
> 赞同：0
> 
> 时间：2012-09-07T11:32:47.083
> 
> 标签：hibernate, persistence

17:03:38,942 WARN [org.hibernate.engine.jdbc.internal.JdbcServicesImpl]（MSC 服务线程 1-2）HHH000342：无法获得查询元数据的连接：javax.resource.ResourceException：IJ000453：无法获得托管连接对于 java:jboss/datasources/studentDS

我收到此错误..我可以知道..这是什么以及为什么会发生以及解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:32:12.750

Hibernate 正在询问您为连接指定的 DataSource，但 DataSource 说它不能返回一个。除此之外，您还没有提供足够的信息...

# php - Cannot access empty property

> ID：12317316
> 
> 赞同：2
> 
> 时间：2012-09-07T11:33:31.313
> 
> 标签：php, arrays, object

I am constructing an array like this:

```
$result = $this->db->get($this->_table);
foreach ($result->result_array() as $row) 
{
    $list->$row['categories_id'] = array('total_amount' => $row['total_amount'], 'other_stuff' => 'stuff');
} 
```

This gives me a fatal exception "Cannot access empty property"

```
<?foreach ($category_list as $index => $row) {?>
          <td><?=$row?></td>
          <td><?=$list->$index['total_amount']?></td>
   <?}?> 
```

but this works

```
<?foreach ($category_list as $index => $row) {?>
          <td><?=$row?></td>
          <? $temp = $list->$index; ?>
          <td><?=$temp['total_amount']?></td>
   <?}?> 
```

Is there a better way to get the "total amount" from this object?

Even better - how can I make it so the object performs like this

```
 echo $list->$index->total_amount 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:38:04.923

Ah, i see the problem.

The way you are using it now you're trying to access the element 'total_amount' of array index, not the element total_amount` of the array $list->$index. And of course,as $index is only an array key and as such a string or int, it won't work.

What about this: `<td><?=$list->{$index}['total_amount']?></td>`

About your last question (accessing values via $list->$index->total_amount): You could probably cast your array to an object with (object).

`$list->$row['categories_id'] = (object) array('total_amount' => $row['total_amount'], 'other_stuff' => 'stuff');`

------- Original Answer -------

I don't know your exact object, but try the following:

`$transaction_list->index['total_amount']`

Notice the missing $ in front of the index? That's the actual way to access class member variables. When using $ you're actually doing something else.

[http://www.php.net/manual/en/language.oop5.basic.php](http://www.php.net/manual/en/language.oop5.basic.php)

[http://www.php.net/manual/en/language.variables.variable.php](http://www.php.net/manual/en/language.variables.variable.php)

# spring - 在 WAR 中使用 Spring

> ID：12317321
> 
> 赞同：1
> 
> 时间：2012-09-07T11:33:39.903
> 
> 标签：spring, scheduled-tasks

我用 Spring 3 TaskScheduler 做了 jar 应用程序。我用 main 方法运行这个应用程序：

```
public static void main(String[] args) {
  GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
  ctx.load("classpath:scheduler-app-context.xml");
  ctx.refresh();
  while (true) {
    // ...
  }
  // ...
} 
```

是否可以在 Web 应用程序（war 文件）中运行这个 jar，主要方法？如何在 web.xml 中运行它。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:39:01.350

在你的做这样的事情`web.xml`：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:scheduler-app-context.xml</param-value>
</context-param>

<listener>
   <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

这将从 XML 文件中实例化您的 Spring 上下文。因此，不必像您的`main`方法那样手动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T10:06:26.637

如果您在战争中需要简单的调度程序（使用 spring 框架），您还可以执行以下操作：

（在 Spring 中，“@PostConstruct”将初始化调度程序 - 所以不需要 main 方法）

```
 @Component
    public class Scheduler {

        private static final Logger LOG = LoggerFactory.getLogger(Scheduler.class);

        @PostConstruct
        private void initializeTenSecSchedule() {

            final List<Runnable> jobs = new ArrayList<Runnable>();

            jobs.add(doSomeTestLogs());
            jobs.add(doSomeTestLogs2());

            final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(jobs.size());

            for(Runnable job : jobs){

                scheduler.scheduleWithFixedDelay(job, 10, 10, SECONDS);

            }

        }

        /**
         * ---------------------some schedule tasks--------------------------
         */

        private Runnable doSomeTestLogs(){

            final Runnable job = new Runnable() {
                public void run() { 

                    LOG.debug("== foo SCHEDULE a", 1);
                    System.out.println("Method executed at every 10 seconds. Current time is :: "+ new Date());

                }
            };

            return job;

        }

        private Runnable doSomeTestLogs2(){

            final Runnable job = new Runnable() {
                public void run() { 

                    LOG.debug("== foo SCHEDULE b", 1);
                    System.out.println("Method executed at every 10 seconds. Current time is :: "+ new Date());

                }
            };

            return job;

        }

    } 
```

# android - 没有这样的模块：fts4aux-查询使用 fts4aux 创建的 sqlite 虚拟表时出错

> ID：12317326
> 
> 赞同：0
> 
> 时间：2012-09-07T11:33:57.733
> 
> 标签：android, sqlite, fts4

我正在尝试收集单词并从 fts4aux 表中构建一个集合来提供 AutocCompleteTextView。但是在访问使用 fts4aux 创建的虚拟表时遇到问题

我有一个虚拟表“ProductVirtual”。

```
CREATE VIRTUAL TABLE ProductVirtual USING fts4(name, company) 
```

由此我创建了一个名为“product_terms”的 fts4aux 表。

```
CREATE VIRTUAL TABLE product_terms USING fts4aux(ProductVirtual) 
```

这是我的查询

> 从 product_terms 中选择术语

当我从数据库控制台对 sqlite 数据库运行此查询时，我能够检索结果。

但是当我从我的 android 应用程序中使用相同的查询时，它会引发以下错误

> I/SqliteDatabaseCpp(26555): sqlite 返回: 错误代码 = 1, msg = 没有这样的模块: fts4aux, db=/data/data/com.product/databases/product_device.db

同时，我可以毫无问题地从 android 应用程序中查询 fts4 虚拟表。所以，我确定 fts4 已启用。

但唯一的问题是使用“fts4aux”表。我该如何克服这个？我必须在某处单独启用“fts4aux”吗？

请发表你的想法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:59:31.120

使用 fts4aux 需要 SQLite 3.7.6 或更高版本，如[Android 中使用的 SQLite 版本？](https://stackoverflow.com/questions/2421189/version-of-sqlite-used-in-android#4377116), 这需要 Android 4.1 (Jelly Bean) 或供应商更新到较新 SQLite 版本的某些特定设备。

# java - 在tomcat中重新加载类文件

> ID：12317331
> 
> 赞同：1
> 
> 时间：2012-09-07T11:34:28.130
> 
> 标签：java, tomcat, classloader, urlclassloader, contextclassloader

我在运行时创建一个类文件。

我想用类加载器中的更新的类文件替换现有的类文件。

它类似于避免服务器重新启动和重新部署的热交换（例如 JRebel）。

我找到了用于上下文重新加载的 tomcat 的 context.xml 方法。但在生产环境中它不是很有用。

我们可以在运行时向 ClassLoader 注册类吗？请建议是否有任何替代方法可以在运行时重新加载类。

* * *

我正在使用以下代码来检索当前的类加载器。

```
ClassLoader classLoader = LoggingAspect.class.getClassLoader(); 
```

下面是加载类方法的实现。

```
public class AspectClassLoader extends ClassLoader{

@Override
public synchronized Class<?> loadClass(String name) throws ClassNotFoundException
{
    String customLoadClass = "com.log.LoggingAspect";
    try
    {
        if(!customLoadClass.equals(name))
        {
            return super.loadClass(name);
        }
        else
        {
            URL classLoadUrl = new URL(this.reloadClassUrl);
            URLConnection connection = classLoadUrl.openConnection();
            InputStream input = connection.getInputStream();
            ByteArrayOutputStream buffer = new ByteArrayOutputStream();
            int data = input.read();

            while(data != -1){
                buffer.write(data);
                data = input.read();
            }

            input.close();

            byte[] classData = buffer.toByteArray();
            return defineClass(name, classData, 0, classData.length);
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    return null; 
} 
```

要重新加载课程，我正在使用以下代码。

```
AspectClassLoader urlClsLoader = new AspectClassLoader(classLoader);
Class aspect = urlClsLoader.reloadClass("com.log.LoggingAspect", true, new String("file:"+className)); 
```

我的类加载器的重载方法是

```
public synchronized Class<?> reloadClass(String name, boolean resolve, String reloadClassUrl) throws ClassNotFoundException
{
    this.reloadClassUrl = reloadClassUrl;
    return this.loadClass(name, resolve);
} 
```

重新加载后，如果我创建 LoggingAspect 的新实例，它仍然会给我旧实例。请建议。

```
Class aspect = urlClsLoader.reloadClass("com.log.LoggingAspect", true, new String("file:"+className));
        com.log.aspect.Aspect aspectObj = (com.log.aspect.Aspect)aspect.newInstance(); 
```

我仍然得到旧实例。

请建议为什么类加载器不加载修改后的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:14:32.020

这是可能的，但很复杂。您需要做的是以`URLClassLoader`当前`ClassLoader`为父级创建一个新的。将 URL 添加到包含您的类的文件夹（没有包文件夹）到新的`URLClassLoader`

接下来，您必须`loadClass()`在调用之前修补以返回您的新类`parent.loadClass()`（否则，将使用现有的类而忽略更新的类）。

当您想*使用*新类时，它会变得复杂。为此，您必须使用新的类加载器创建它，并确保每个人都使用该类型的此实例。

如果您的 WAR 中不存在该类，它可能更安全（并且更容易调试）。不使用类型，而是使用 加载类`URLClassLoader`并创建它的实例。所以使用这个类的代码是这样工作的：

```
IService service = createService(); 
```

where`IService`是一个接口，它定义了生成的类支持的方法。这样，您可以编写使用这些方法的代码，而实际上不需要实现。

# php - PDO：绑定时使用 data_type 的目的是什么？

> ID：12317333
> 
> 赞同：5
> 
> 时间：2012-09-07T11:34:37.047
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [Php PDO::bindParam 数据类型.. 它是如何工作的？](https://stackoverflow.com/questions/833510/php-pdobindparam-data-types-how-does-it-work)

例如，我有以下准备好的声明：

```
$sth = $dbh->prepare('SELECT `name` FROM `user` WHERE `user_id` = :user_id'); 
```

我可以像这样绑定 user_id 参数：

```
$sth->bindValue(':user_id', $user_id_value); 
```

而且我仍然可以免受 SQL 注入的影响。

但是，bindValue() 也是一个名为 data_type 的可选参数，它允许您设置显式数据类型。例子：

```
$sth->bindValue(':user_id', $user_id_value, PDO::PARAM_INT); 
```

这允许我声明 user_id 将是一个整数。

我的问题是：如果您可以安全地使用或不使用 SQL 注入，为什么还要在 bindValue 中使用 data_type 参数？是否存在强制数据完整性？如果您事先验证您的数据，您是否需要担心使用它？使用它还有其他我没有想到的好处吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T11:41:04.117

基本上 - 是的。强制执行 data_types 是一件好事。

不要假设可以防止注入 - 很久以前，我看到一篇博客文章详细介绍了使用 utf8 代码进行反引号和引号等的注入；其中，虽然没有在评估为单个字符的地方转义，因此允许注入。

这并不是说这个问题没有得到解决，我也不是说你很脆弱——只是说假设有时不是最好的选择......

# php - 如何在 OrangeHRM 中添加模块？

> ID：12317335
> 
> 赞同：3
> 
> 时间：2012-09-07T11:34:40.573
> 
> 标签：php, symfony1, orangehrm

我一直在努力理解 OrangeHRM 的流程，并且我也制作了一个模块，但我需要将该模块集成到 orange hrm 中。所以现在问题来了，因为我不明白在 orangehrm 中从哪里开始整合它。我知道在编辑之后从 index.php 开始，在哪里获取带有 OrangeHRM 的页脚和页眉的模块。

谁能解释我找到这条线的路径

> ./symfony/web/index.php/pim/viewEmployeeList/reset/1

# javascript - onmousedown 改变光标；可能需要控制事件冒泡

> ID：12317339
> 
> 赞同：2
> 
> 时间：2012-09-07T11:34:54.773
> 
> 标签：javascript, cursor, onmousedown

对于我的一个项目，我需要更改自定义光标 onmousedown 并将其更改回 onmouseup 和 onmouseout。目前，我只对让它适用于 Chrome 感兴趣，稍后会看到不同的浏览器。

所以我从下面的代码开始。

html:

```
<div id="firstspot"></div> 
```

CSS：

```
#firstspot {
position:absolute;
width:145px;
height:145px;
margin-left:58px;
top:144px;
cursor:url(img/cur/hand-point-right.cur),wait;
}

#firstspot:active {
cursor:url(img/cur/hand-grab-right.cur),wait;
} 
```

所需的更改似乎只有在我最少移动一次鼠标后才会发生，因为如果我更广泛地移动鼠标，光标默认为“文本”光标。

但是，如果我尝试对背景图像而不是光标进行 onmousedown 更改，它**确实**可以在 onmousedown 上工作！~~~~~~~~~~~~~~~~

接下来，我尝试使用以下代码使用 javascript: html 来获得所需的效果：

```
<div id="firstspot" onmousedown="chcursor();" onmouseup="chback();" onmouseout="chback();"></div> 
```

CSS：

```
#firstspot {
position:absolute;
width:145px;
height:145px;
margin-left:58px;
top:144px;
cursor:url(img/cur/hand-point-right.cur),wait;
} 
```

javascript:

```
function chcursor ()
{
document.getElementById('firstspot').style.cursor = "url(img/cur/hand-grab-right.cur),wait";
}

function chback ()
{
document.getElementById('firstspot').style.cursor = "url(img/cur/hand-point-right.cur),wait";
} 
```

这产生了几乎相同的延迟效果，而添加 onmouseup 和 onmouseout 效果很好。因此，抓手光标仅在鼠标按下后的一次简约移动后再次可见。~~~~~~~~~~~~~~~~~~~~`

研究揭示了一种叫做**事件冒泡**的东西。

我想开始测试/控制这种现象，并希望有人能指出我正确的方向。

到目前为止，我遇到了“无法完成”并且无法创建所需的光标更改。

我更喜欢纯 javascript 解决方案而不是使用 js 库（为什么要为可能只需要几行 js 的解决方案添加大量的库？），但我将不胜感激。

**PS 请记住，我不是专业的网络开发人员。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:04:57.717

我认为您应该`return false`在“onmousedown”和其他事件处理程序的末尾包含 a 。这应该防止“事件冒泡”。

请参阅以下示例：http: [//jsbin.com/ifitah/1/edit](http://jsbin.com/ifitah/1/edit)

# java - static{} 块的目的/优势是什么？

> ID：12317343
> 
> 赞同：3
> 
> 时间：2012-09-07T11:35:04.103
> 
> 标签：java, static

> **可能重复：**
> [静态初始化块](https://stackoverflow.com/questions/2420389/static-initialization-blocks)

在查看一些旧代码时，我发现了一些我以前从未见过的相当奇怪的语法。在做了一些研究之后，我现在知道我看到的是一个`static{}`块（如果我理解正确的话）是一个在初始化时执行的代码块。

我不明白的是拥有这样一个功能的优势，或者什么时候可能想要使用它。看起来静态块只包含可以属于任何常规静态*方法*的常规代码行，那么让它在初始化时自动运行有什么好处（除了为程序员节省一行代码来调用方法）？为什么这很重要或有用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:38:24.643

正如他们在[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)中所说：

> 如果初始化需要一些逻辑（例如，错误处理或填充复杂数组的 for 循环），简单的赋值是不够的。实例变量可以在构造函数中初始化，其中可以使用错误处理或其他逻辑。为了为类变量提供相同的功能，Java 编程语言包括静态初始化块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:36:13.697

将其视为静态变量的构造函数。它使您有机会在任何人使用它们之前对其进行初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T11:39:39.040

正如您所说，静态块在初始化时执行。假设您有一个可能非常复杂的静态字段，例如

```
private static List<ThingsDownloadedByTheNet> ls; 
```

只是在做

```
private static List<ThingsDownloadedByTheNet> ls = new ArrayList<ThingsDownloadedByTheNet> 
```

还不够，因为您可能还想设置列表元素。因此，您执行一个静态块，在其中执行一些初始化（在这种情况下，您连接到服务器并填充列表元素）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T11:36:40.627

`static{}`加载类时执行块。您可以使用它来初始化静态字段或调用静态方法。您不能使用任何方法来替换此行为，因为类“没有构造函数”。实际上，您可以将其视为“类构造函数”。

# php - php中的单选按钮值未显示

> ID：12317349
> 
> 赞同：1
> 
> 时间：2012-09-07T11:35:47.903
> 
> 标签：php, html

我有一个搜索本地数据库的表单。它仍处于生产阶段。但是，当我尝试获取单选按钮的值时，什么也没有。下面是代码：

# PHP

```
$k = $_GET['k'];
$terms = explode(" ", $k);
$query = "SELECT * FROM  series8000 WHERE ";
$vision = $_GET['Vision'];
$new = $_GET['new1'];
$sithelo = sithelo;
foreach ($terms as $each) {
    $i++;
    if ($i == 1)
        $query .= "Description LIKE '%$each%' ";
    else
        $query .= "OR Description LIKE '%$each%' ";
}   
$query .= "AND VisionType = '$vision' ";

if (!empty($new1 )) {
    $query .= "AND Change = '$new1' ";
} 
```

# HTML

```
<form action='index.php' method='get'>
<fieldset>

                <legend>Change</legend> 

                    <label for="New" class="property">New Product</label>
                    <div class="labels">
                        <input type="radio"  name="new1" <?php if (isset($new1) && $new1 == "N") echo "checked=yes"; ?>size="30" value="N"/>
                        <input type="radio"  name="new1" size="30" value="Y"/>
                        <input type="radio"  name="new1" size="30"  value="YN"/>&nbsp;&nbsp;
                    </div>  

                    <div style="clear: both;"></div> 
```

挑战是当我在此处未显示的 php 代码中回显时，名为 new1 的单选按钮的值变为空白。我必须获取单选按钮的值，以便我可以在查询中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:08:37.877

请尝试使用`checked= 'checked'`而不是使用checked=yes。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:33:02.527

改变

```
<input type="radio"  name="new1" <?php if (isset($new1) && $new1 == "N") echo "checked=yes"; ?>size="30" value="N"/> 
```

进入

```
<input type='radio' name='new1' <?php if (isset($new1) && $new1 == "N") echo "checked='checked' "; ?>size='30' value='N'/> 
```

我的答案有所不同，因为输出的答案和之前的答案之间*没有空格。*`checked='checked'``size='30'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:26:38.040

您将 new1 的值放在变量 $new 中，但在涉及到这一行时您似乎没有使用它：

```
if (!empty($new1 )) {
    $query .= "AND Change = '$new1' ";
} 
```

尝试使用：

```
if (!empty($new)) {
    $query .= "AND Change = '$new' ";
} 
```

并使用卡莱所说的：

```
 echo "checked='checked'"; 
```

# javascript - 如何在 MVC3 中的文本上显示鼠标悬停的部分视图？

> ID：12317350
> 
> 赞同：5
> 
> 时间：2012-09-07T11:35:51.697
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, partial-views

我正在使用 MVC3 开发网站。我创建了一个局部视图，其中包含 4 个水平放置的图像。现在我有另一个视图，即详细视图，我显示了一个文本。当用户将鼠标悬停在该文本上时，我想显示图像的部分视图。

这个怎么做 ？

抱歉，我在同一个问题中包含了另一个问题，因为我认为它与上述问题有关。所以我的下一个问题是——

当该图像显示给用户时，用户从该列表中选择一个图像，并据此我必须执行一些操作。

我处理了给定的答案，但我知道我无法执行其他操作，例如在显示的图像列表上进行选择。

这也要怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:44:26.057

用于`jQuery`获取局部视图的内容并将它们显示在`moveover`或上`hover`：

例如：

```
$("#container").mouseover(function() {
   $.ajax({
    url: "@Url.Action("YourPartialView")",
    type: "GET",
    success: function(data) {
        var htmlx = data; // the View

        $("#content").append(htmlx);
        $("#content").slideDown('slow');
        }
    }); 
}); 
```

`#container`保存文本的区域在哪里`#content`，当用户将鼠标悬停在容器上时将显示的区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:51:05.860

如果要在悬停时动态加载部分视图，可以使用 jquery ajax 调用来实现：

```
$("img.your-class").mouseover(function () {

   // get the image ID - modify according to your markup
   var imageId = $(this).data('image-id');

   $.ajax({

       // use the imageId from above here
       url: "add-your-view-url", 

       success: function(data) {
          $("#target-div-id").html(data);
       }

    }); 

}); 
```

在您的控制器中，您将需要执行类似于此的操作：

```
public ActionResult Action(int imageId)
{
     // get the model for your partial view
     var model = GetModel(imageId);

     // you can optionally return different result based on request type
     if (Request.IsAjaxRequest())
     {
          // update with actual path of your partial view
          return PartialView("path-to-your-view", model);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:42:09.113

尝试使用 jquery

```
$("#id").mouseover(function () {
   $.ajax({
       url: 'url',
       success: function (response) {
        $(response.responseText).appendTo($('body'));
    }
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T11:43:22.107

您还可以决定使用 ajax（带有标识图像的参数）在鼠标悬停时调用操作。Ajax 调用将返回部分视图，然后您可以将其包装在 div 中并以您想要的方式呈现，例如使用一些工具提示库

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:38:33.960

您需要使用 JavaScript 执行此操作，使用 jQuery（一个 javascript 库）可能更容易。

您需要将局部视图包裹在隐藏元素中，然后在用户悬停时显示此元素。

有关更多信息和示例，请参阅[http://api.jquery.com/hover/ 。](http://api.jquery.com/hover/)

另请参阅此处的基本示例：http: [//jsfiddle.net/49bAz/](http://jsfiddle.net/49bAz/)

# php - 在跨越多个模型文件的代码点火器中处理事务

> ID：12317355
> 
> 赞同：2
> 
> 时间：2012-09-07T11:36:09.830
> 
> 标签：php, mysql, codeigniter, transactions

我正在尝试在代码点火器中实现事务。

问题是我的 DML 语句在多个模型文件中。

我的 Controller 操作如下所示：

```
//the following is inside a controller
public function myaction()
{
    transaction_start();
    first_model->setSomeData();
    second_model->setSomeData();
    third_model->setSomeData();
    transaction_complete();
} 
```

我正在研究一个 mysql 数据库，并且我已经在相关模型 innodb 中制作了它们的表，因为我知道引擎支持事务。

上面的代码结构似乎不起作用，因为我故意让第二个模型插入失败。我预计三个插入（三个模型的 setsomedata 方法中的每一个中的 1 个）都失败或全部成功。但事实并非如此

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:53:17.897

要在 codeigniter 中调用模型，有一个 load->model 函数

```
<?php
controller extends CI_Controller{
    public function __construct(){
        parent::__construct();
        $this->load->model('FirstModel');
        $this->load->model('SecondModel');
    }
?> 
```

并在某些动作中使用它

```
<?php
//...
    public function index(){
        $this->FirstModel->getData();
        $this->SecondModel->getData();
    }
//...
?> 
```

# excel - Excel 连接引号

> ID：12317359
> 
> 赞同：25
> 
> 时间：2012-09-07T11:36:37.550
> 
> 标签：excel, vba

我正在尝试连接多个字段并希望某些字段以引号（“.....”）开头和结尾。当我在其中放置一个单元格 (B2) 时，单元格 (B2) 显示为带有引号的纯文本。

```
CONCATENATE("""B2""") -> "B2"

CONCATENATE("""B2""") -> "(whatever is in cell B2)" 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-07T11:39:43.423

试试这个：

```
CONCATENATE(""""; B2 ;"""") 
```

@widor 也提供了一个不错的解决方案替代方案 - 与我的集成：

```
CONCATENATE(char(34); B2 ;char(34)) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-07T11:39:24.547

使用`CHAR`：

```
=Char(34)&"This is in quotes"&Char(34) 
```

应评估为：

```
"This is in quotes" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-09T14:54:37.500

您也可以使用以下语法：（在 D 列中连接 A、B 和 C）

```
=A2 & " """ & B2 & """ " & C2 
```

![Excel公式与引号连接](../Images/036e2799d54d2f1667b8f0b6a36f0123.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-05T17:24:56.827

更简单的答案 - 将内容放在不同单元格中的引号中，然后将它们连接起来！

```
B1: rcrCheck.asp
C1: =D1&B1&E1
D1: "code in quotes" and "more code in quotes"  
E1: " 
```

结果很完美（不能给你看，因为我得到了一个关于代码的愚蠢对话框）

十分简单！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-20T07:13:42.473

我正在形成一些编程逻辑，使用**CHAR(34)**在 Excel 中引用：我发布的一小部分可能会有所帮助，希望

```
1   Customers
2   Invoices 
```

使用的公式：

> =CONCATENATE("listEvents.Add(",D4,",",CHAR(34),E4,CHAR(34),");")

结果 ：

```
listEvents.Add(1,"Customers");
listEvents.Add(2,"Invoices"); 
```

# hbase - Hbase shell 命令

> ID：12317365
> 
> 赞同：2
> 
> 时间：2012-09-07T11:36:46.897
> 
> 标签：hbase

我有一个有点愚蠢的 Hbase 问题，但困扰了我很长时间。当我登录 Hbase shell 时发出以下命令：

```
[jack@HOST117-20 bin]$ ./hbase shell
HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 0.94.0, r1332822, Tue May  1 21:43:54 UTC 2012

hbase(main):001:0>scon mytable 
```

我发现我无法删除命令，例如如果我输入了错误的命令“scon”，那么我不能使用 Backspace 或 Delete 按钮来删除命令，我必须重新输入。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-13T05:11:15.877

您可能在 Windows 上使用secureCRT。我在这个配置中遇到了同样的问题。我切换到 PuTTY，问题就消失了。如果您仍想使用 SecureCRT，我找到了一种解决方法 - 转到会话配置并在仿真部分使用终端“Linux”，现在在 HBase Shell 中，您可以使用 Ctrl-backspace 来完成“退格”工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T10:33:43.963

我遇到了同样的问题，发现即使使用标准 irb 也可以通过键入以下命令行来重现该问题（我通过阅读 /usr/lib/hbase/bin/hbase 找到了这个命令行）。

```
$ java -cp \
    ~/.m2/repository/org/jruby/jruby-complete/1.6.5/jruby-complete-1.6.5.jar \
    org.jruby.Main /usr/bin/irb 
```

因此，根本原因不在HBase shell中，而是在JRuby中，进一步调查发现根本原因存在于JRuby 1.6.5使用的JLine中。

首先，我创建了 ~/.jlinebindings.properties 文件并将“Rubout：backward-delete-char”放在那里，希望退格键会“删除光标后面的一个字符”，但它不起作用。更糟糕的是，.jlinebindings.properties 文件的存在清除了其他键绑定（例如箭头键的绑定），所以我删除了 .jlinebindings.properties。我尝试将键绑定设置添加到 ~/.jline.rc 和 ~/.inputrc，但它们也不起作用。

我查看了 JLine2 源代码以进一步调查，发现最新版本的 JLine2 不支持 .jlinebindings.properties 文件。但是，支持 .jline.rc。所以，我编译了最新的 JLIne2 源代码，将键绑定到 .jline.rc 文件并指定 JLine2 库（target/jline-2.10-SNAPSHOT.jar）作为类路径的第一个元素，但它不起作用。使用新构建的 JLine2 库，JRuby 1.6.5 抛出了 IncompatibleClassChangeError。这意味着 JLine2 改变了它的 API 并破坏了向后兼容性。

接下来，我查看了 JRuby 源代码并编译如下。

```
# JRuby compilation requires ant
$ yum install ant

# Without this, compilation fails.
$ yum install ant-apache-regexp

$ git clone https://github.com/jruby/jruby.git

# Check the latest version
$ git tag

$ git checkout 1.7.1
$ mvn install 
```

使用新的 JRuby 二进制文件，我再次调用了命令行。

```
$ java -cp \
    ~/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar \
    org.jruby.Main /usr/bin/irb 
```

但是，它引发了 SyntaxError。

```
SyntaxError: file:/home/admin/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar!/META-INF/jruby.home/lib/ruby/1.9/irb/lc/ja/encoding_aliases.rb:7: syntax error, unexpected kEND

end
  ^
         eval at org/jruby/RubyKernel.java:1066
    real_load at jar:file:/home/admin/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar!/META-INF/jruby.home/lib/ruby/1.9/irb/locale.rb:134
         load at jar:file:/home/admin/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar!/META-INF/jruby.home/lib/ruby/1.9/irb/locale.rb:110
   initialize at jar:file:/home/admin/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar!/META-INF/jruby.home/lib/ruby/1.9/irb/locale.rb:32
  init_config at jar:file:/home/admin/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar!/META-INF/jruby.home/lib/ruby/1.9/irb/init.rb:114
        setup at jar:file:/home/admin/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar!/META-INF/jruby.home/lib/ruby/1.9/irb/init.rb:16
        start at jar:file:/home/admin/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar!/META-INF/jruby.home/lib/ruby/1.9/irb.rb:53
       (root) at /usr/bin/irb:13 
```

encoding_aliases.rb 中一定有问题（或者新的 JRuby 做了一些改变，破坏了向后兼容性），但我没有心思去调查它，所以添加了 LANG=C 作为解决方法。

```
$ LANG=C java -cp \
    ~/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar \
    org.jruby.Main /usr/bin/irb 
```

这成功调用了 irb，我可以确认退格符按预期工作。maven/jruby-core/pom.xml 表示 JRuby 1.7.1 所指的 JLIne 版本是 2.7。

作为最后一步，我尝试通过执行以下操作让 HBase shell 使用新的 JRuby。

```
$ cd /usr/lib/hbase/lib
$ mv jruby-complete-1.6.5.jar{,.backup}
$ cp ~/.m2/repository/org/jruby/jruby-complete/1.7.1/jruby-complete-1.7.1.jar .
$ hbase shell 
```

但是，HBase shell 没有启动。相反，发出了以下错误消息。

```
include_class is deprecated. Use java_import.
include_class is deprecated. Use java_import.
include_class is deprecated. Use java_import.
12/12/28 18:03:12 WARN conf.Configuration: hadoop.native.lib is deprecated. Instead, use io.native.lib.available
NoMethodError: undefined method `getTerminal' for Java::Jline::Terminal:Module
  refresh_width at /usr/lib/hbase/bin/../bin/../lib/ruby/shell/formatter.rb:34
     initialize at /usr/lib/hbase/bin/../bin/../lib/ruby/shell/formatter.rb:47
         (root) at /usr/lib/hbase/bin/../bin/hirb.rb:108 
```

这些错误消息表明在 /usr/lib/hbase/lib 下替换 jruby-complete-*.jar 并不能解决问题。

所以，我放弃了，并得出结论，没有简单的解决方法来解决这个问题。我的最终结论是，我们必须等待 HBase 专家使用新的 JRuby 更新 HBase shell 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T09:47:17.757

我有考试同样的问题。我在 Win 7 机器中以 xterm 模式使用 SecureCRT 以通过 SSH 连接到 CentOS 6.3 Linux 服务器。

我安装了 hbase 和其他东西，然后我发现我的退格键和删除键都在向右删除。所以，@Jack，我猜你的退格键没有被破坏，只是它作为另一个删除键起作用，而不是它的正常行为（向左删除）。

我找到了一个解决方案：使用 Ctrl + Backspace 左键删除。它对我来说就像一个魅力。因此，如果您在过去 2 年内还没有找到解决办法，您应该试试这个；）

顺便说一句，虽然我找到了这个解决方法，但我仍然不知道它为什么会发生。如果有人知道这个问题的原因（irb 的错误或 SecureCRT 的错误设置？），请告诉我。谢谢！

# grails - grails插件的依赖

> ID：12317370
> 
> 赞同：1
> 
> 时间：2012-09-07T11:37:17.123
> 
> 标签：grails, grails-plugin

我正在编写一个依赖于 Quartz 插件的 Grails 插件，即安装我的插件的应用程序也必须安装 Quartz 插件。为了强制执行此要求，我将以下内容添加到插件的描述符中

```
def dependsOn = [quartz: '0.4.2'] 
```

但是，当我运行时`grails package-plugin`出现错误

```
Error: The following plugins failed to load due to missing dependencies: [quartzJobStats]
- Plugin: quartzJobStats
   - Dependencies:
       ! quartz (Required: 0.4.2, Found: Not Installed) [INVALID] 
```

我应该如何指定插件的（插件）依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:42:59.100

不要`dependsOn`在 Grails 2.0+ 中使用，添加依赖项`BuildConfig.groovy`

```
plugins {
   build(':release:2.0.4', ':rest-client-builder:1.0.2') {
      export = false
   }
   compile ":quartz:0.4.2"
} 
```

或者这个使用最新的：

```
compile ":quartz:1.0-RC2" 
```

# php - PHP PDO 准备 SELECT 语句

> ID：12317374
> 
> 赞同：-2
> 
> 时间：2012-09-07T11:37:25.203
> 
> 标签：php, pdo, prepared-statement

我尝试在 php 中使用 PDO 做一个准备好的 SELECT 语句。这是我的声明：

```
 # named placeholders 
    $STH = $DBH->("SELECT * FROM `highscore_ranked` WHERE DeviceID = :deviceid ORDER BY Points DESC LIMIT 0 , 10");
    $STH->bindValue(':deviceid', $DeviceIDClear);

    # setting the fetch mode
    $STH->setFetchMode(PDO::FETCH_ASSOC);
    $STH->execute(); 
```

但我得到了错误：

```
 PHP Parse error:  syntax error, unexpected '(', expecting T_STRING or T_VARIABLE or '{' or '$' 
```

在这条线上：

```
 $STH = $DBH->("SELECT * FROM `highscore_ranked` WHERE DeviceID = :deviceid ORDER BY Points DESC LIMIT 0 , 10"); 
```

我不知道这条线出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:38:43.970

您忘记了方法的名称！！！！

```
$STH = $DBH->prepare("SELECT * FROM `highscore_ranked` WHERE DeviceID = :deviceid ORDER BY Points DESC LIMIT 0 , 10"); 
```

# iphone - OpenCV图像拼接错误IOS

> ID：12317380
> 
> 赞同：1
> 
> 时间：2012-09-07T11:37:56.840
> 
> 标签：iphone, ios, opencv

我使用 iOS openCV 库来拼接图像以创建我的全景应用程序。但是，如果我尝试使用超过 2 个图像，我会收到以下错误。

> 删除了一些图像，因为它们无法匹配或图像太相似。尝试减少 --match_conf 值和/或检查您是否正在缝合重复项。

有谁知道问题是什么以及如何避免这种情况？我使用了从我的相机拍摄的相关图像。

# makefile - makefile 中缺少 MACHTYPE

> ID：12317382
> 
> 赞同：5
> 
> 时间：2012-09-07T11:38:04.427
> 
> 标签：makefile, environment-variables

我的 makefile 有以下两行。

```
$(MACHTYPE)/jkweb.a: $(O) $(MACHTYPE)
        ar rcus $(MACHTYPE)/jkweb.a $(O) 
```

当我回显时，我可以看到 MACHTYPE 是`x86_64-pc-linux-gnu`. 我已经`x86_64-pc-linux-gnu`在当前目录中有目录。但是当我输入 make 时，它​​会说`ar: /jkweb.a: Permission denied`which 应该是`x86_64-pc-linux-gnu/jkweb.a`.

为什么缺少 MACHTYPE？

PS 该软件是[Blat](http://users.soe.ucsc.edu/~kent/src/)。[邮件列表](https://lists.soe.ucsc.edu/pipermail/genome/2008-June/016592.html)建议将MACHTYPE 更改为 x86_64。

```
include ../inc/common.mk

O = aliType.o annoColumn.o annoFilter.o annoFormatter.o annoFormatTab.o \
    annoGrator.o annoGratorQuery.o annoOption.o annoRow.o annoStreamer.o annoStreamVcf.o \
    apacheLog.o asParse.o axt.o axtAffine.o bamFile.o base64.o \
    basicBed.o bbiRead.o bbiWrite.o bigBed.o binRange.o bits.o \
    blastOut.o blastParse.o boxClump.o boxLump.o bPlusTree.o \
    bwgCreate.o bwgQuery.o bwgValsOnChrom.o \
    cda.o chain.o chainBlock.o chainConnect.o chainToAxt.o chainToPsl.o \
    cheapcgi.o cirTree.o codebias.o colHash.o common.o correlate.o crTree.o \
    dgRange.o diGraph.o dlist.o dnaLoad.o dnaMarkov.o dnaMotif.o dnaseq.o \
    dnautil.o dsPrint.o dtdParse.o dystring.o \
    emblParse.o errCatch.o errabort.o \
    fa.o ffAli.o ffScore.o filePath.o fixColor.o flydna.o fof.o \
    font/mgCourier10.o font/mgCourier12.o font/mgCourier14.o font/mgCourier18.o \
    font/mgCourier24.o font/mgCourier34.o font/mgCourier8.o font/mgHelvetica10.o \
    font/mgHelvetica12.o font/mgHelvetica14.o font/mgHelvetica18.o font/mgHelvetica24.o \
    font/mgHelvetica34.o font/mgHelvetica8.o font/mgHelveticaBold10.o font/mgHelveticaBold12.o \
    font/mgHelveticaBold14.o font/mgHelveticaBold18.o font/mgHelveticaBold24.o \
    font/mgHelveticaBold34.o font/mgHelveticaBold8.o font/mgSixhi6.o font/mgSail8.o \
    font/mgTimes10.o font/mgTimes12.o font/mgTimes14.o font/mgTimes18.o \
    font/mgTimes24.o font/mgTimes34.o font/mgTimes8.o font/mgMenlo12.o \
    fuzzyShow.o \
    gapCalc.o gdf.o gemfont.o genomeRangeTree.o \
    gfNet.o gff.o gff3.o gfxPoly.o gifLabel.o \
    hacTree.o hash.o histogram.o hmmPfamParse.o hmmstats.o htmlPage.o htmshell.o \
    https.o intExp.o intValTree.o internet.o itsa.o iupac.o \
    jointalign.o jpegSize.o keys.o knetUdc.o kxTok.o linefile.o lineFileOnBigBed.o localmem.o log.o \
    maf.o mafFromAxt.o mafScore.o md5.o memalloc.o memgfx.o metaWig.o mgCircle.o \
    mgPolygon.o mime.o net.o nib.o nibTwo.o nt4.o numObscure.o \
    obscure.o oldGff.o oligoTm.o options.o osunix.o pairHmm.o peakCluster.o \
    phyloTree.o pipeline.o portimpl.o pngwrite.o psGfx.o psPoly.o pscmGfx.o \
    psl.o pslGenoShow.o pslShow.o pslTbl.o pslTransMap.o pthreadWrap.o \
    qa.o quickHeap.o quotedP.o \
    ra.o rainbow.o rbTree.o rangeTree.o regexHelper.o repMask.o \
    rle.o rnautil.o rqlEval.o rqlParse.o rudp.o \
    scoreWindow.o seg.o seqOut.o seqStats.o servBrcMcw.o servCrunx.o \
    servcis.o servcl.o servmsII.o servpws.o shaRes.o slog.o snof.o \
    snofmake.o snofsig.o spaceSaver.o spacedColumn.o spacedSeed.o \
    splatAli.o sqlList.o sqlNum.o subText.o sufa.o sufx.o synQueue.o \
    tabRow.o textOut.o tokenizer.o trix.o twoBit.o \
    udc.o vcf.o vGfx.o vPng.o verbose.o \
    wildcmp.o wormdna.o \
    xAli.o xa.o xap.o xenshow.o xmlEscape.o xp.o zlibFace.o

$(MACHTYPE)/jkweb.a: $(O) $(MACHTYPE)
    ar rcus $(MACHTYPE)/jkweb.a $(O)

$(MACHTYPE):
    mkdir $(MACHTYPE)

test:
    cd tests && ${MAKE} test

clean:
    rm -f ${O} $(MACHTYPE)/jkweb.a
    cd tests && ${MAKE} clean

tags:
    etags ../inc/*.h ../lib/*.h ../lib/*.c  ../hg/inc/*.h ../hg/lib/*.h ../hg/lib/*.c ../hg/hgTracks/*.c ../hg/hgc/*.c ../hg/hgTrackUi/*.c 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T02:11:00.767

让我们尝试一个实验：

1）检查外壳：`echo $SHELL`。（我期待 bash。）

2）检查变量：（`set | grep MACHTYPE`我期望“x86_64-pc-linux-gnu”。）

3）再次检查变量：（`printenv | grep MACHTYPE`我什么都不期待，没有输出。）

4) 在 makefile 的顶部添加该行`$(info MACHTYPE is $(MACHTYPE))`并运行`make`. （我希望“MACHTYPE 是”，然后是失败。）

5）敲木头并运行`make MACHTYPE=$MACHTYPE`。

**编辑：**
好！问题是该变量`MACHTYPE`在您的 shell 中作为*局部*变量（不会传递给类似的进程`make`），而不是作为*环境*变量（本来是）。所以你可以像上面那样运行 Make `make MACHTYPE=$MACHTYPE`，或者把 MACHTYPE 变成一个环境变量：

```
export MACHTYPE
make 
```

（更正感谢 Reinier Torenbeek。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-11T10:36:30.560

我有这个：

```
MACHTYPE:=$(shell set | grep ^MACHTYPE= | sed s-.*=--) 
```

# linux - 为 shell 脚本创建计数器

> ID：12317384
> 
> 赞同：1
> 
> 时间：2012-09-07T11:38:05.320
> 
> 标签：linux, bash, shell

我需要创建一个计数器以在 shell（bash）脚本中使用，每次调用脚本时，包含的数字必须增加一，并且数字应保持为六位数字，因此初始值为 000000，然后是 000001，然后是 000002 等等.....我正在做的是，我创建了一个名为“counter”的文件，该文件在第一行包含一个 6 位整数。所以从脚本我有这个代码：

```
index= cat /path/counter | tail -1   #get the counter
tmp=`expr $index + 1`                #clone and increase the counter
echo "" >/path/counter               #empty the counter
echo ${tmp} >/path/counter           #insert clone 
```

问题是它在第二步不起作用，可能是第一步实际上失败了，你有什么建议吗？

一个选项如下：

```
#!/bin/bash

read index < /path/counter
declare -i tmp=index+1
printf "%06d" $tmp > /path/counter 
```

问题是它只将文件的内容提升到 000007，之后我得到：

```
-bash: 000008: value too great for base (error token is "000008") 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:41:26.790

您没有正确阅读索引。尝试：

```
index=$(tail -1 /path/counter) 
```

其他需要注意的事项：

*   你不需要`cat`，`tail`可以自己处理
*   您可以将反引号替换为`tmp=$(expr ...)`
*   您不需要`echo ""`，`>`重定向会截断文件

### 编辑

要使数字宽为 6 位，请尝试`printf`代替`echo`：

```
printf "%06d", $index 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:36:30.053

bash 有一种机制，您可以在其中指定数字的基数

```
#!/bin/bash
file=/path/to/counter
[[ ! -f "$file" ]] && echo 0 > $file              # create if not exist
index=$(< "$file")                                # read the contents
printf "%06d\n" "$((10#$index + 1))" > "$file"    # increment and write 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:47:42.467

这也可以：

```
#!/bin/bash

if [ -e /tmp/counter ]
  then
    . /tmp/counter
  fi

if [ -z "${COUNTER}" ]
  then
    COUNTER=1
  else
    COUNTER=$((COUNTER+1))
  fi

echo "COUNTER=${COUNTER}" > /tmp/counter

echo ${COUNTER} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T12:21:09.537

[更新：修复在文本文件中包含一个明确的基本标记，但格伦杰克曼击败了我。]

您可以稍微简化一下：

```
read index < /path/counter   # Read the first line using bash's builtin read
declare -i tmp=index+1       # Set the integer attribute on tmp to simplify the math
printf "10#%06d" $tmp > /path/counter    # No need to explicitly empty the counter; > overwrites 
```

或者，您甚至不需要临时变量来保存增量值：

```
read index < /path/counter
printf "10#%06d" $(( index+1 )) > /path/counter 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T14:57:00.667

解决了

```
index=$(cat /path/counter| tail -1)
tmp=$(expr $index + 1)
printf "%06d" $tmp > /path/counter 
```

# ruby-on-rails - Heroku 上的存在验证失败，即使它在本地工作

> ID：12317385
> 
> 赞同：1
> 
> 时间：2012-09-07T11:38:09.113
> 
> 标签：ruby-on-rails, heroku

因为我正在学习如何使用 Heroku 和在 Rails 上编码，所以我想问一下我遇到的这个奇怪的问题

我正在使用 Heroku 将我的 Rails 应用程序在线推送并使用**postgresql**作为我的数据库。我已经通过命令成功推送了我的代码

```
git push heroku master
```

然而，即使我已经在我的模型中添加了存在验证，并且即使它可以在线工作，我仍然无法让它在 Heroku 上工作。我的型号代码；

```
class User < ActiveRecord::Base
  attr_accessible :name
  validates :name, :presence => true 
end 
```

如果我能得到一些想法，我将不胜感激。我希望它与部署无关，因为它可以在线正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:01:15.500

您可以通过执行`git diff heroku/master`. 如果您已正确提交和部署所有内容，则应该不会显示任何更改。

# python - 在 NetworkX 中更改节点形状

> ID：12317388
> 
> 赞同：4
> 
> 时间：2012-09-07T11:38:13.503
> 
> 标签：python, networkx

我需要 NetworkX 中不同形状的节点，一些矩形和三角形节点。有人知道这是否可能吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:43:53.200

找到它，有一个属性 node_shape 可以改变形状。

# c# - 如何强制 BundleCollection 在 MVC4 中刷新缓存的脚本包

> ID：12317391
> 
> 赞同：87
> 
> 时间：2012-09-07T11:38:20.840
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

... 或者*我是如何学会停止担心的，而只是针对来自 Microsoft 的完全未记录的 API 编写代码*。有官方`System.Web.Optimization`发布的任何实际文档吗？'因为我肯定找不到，没有 XML 文档，所有博客文章都引用了 RC API，这有很大不同。随便吧。。

我正在编写一些代码来自动解析 javascript 依赖项，并从这些依赖项中动态创建包。一切都很好，除非您编辑脚本或以其他方式做出会影响捆绑包的更改而不重新启动应用程序，否则这些更改将不会被反映。所以我添加了一个选项来禁用开发中使用的依赖项缓存。

*但是，即使捆绑集合已更改*，显然也会`BundleTables`缓存 URL 。例如，在我自己的代码中，当我想重新创建一个包时，我会执行以下操作：

 *```
// remove an existing bundle
BundleTable.Bundles.Remove(BundleTable.Bundles.GetBundleFor(bundleAlias));

// recreate it.
var bundle = new ScriptBundle(bundleAlias);

// dependencies is a collection of objects representing scripts, 
// this creates a new bundle from that list. 

foreach (var item in dependencies)
{
    bundle.Include(item.Path);
}

// add the new bundle to the collection

BundleTable.Bundles.Add(bundle);

// bundleAlias is the same alias used previously to create the bundle,
// like "~/mybundle1" 

var bundleUrl = BundleTable.Bundles.ResolveBundleUrl(bundleAlias);

// returns something like "/mybundle1?v=hzBkDmqVAC8R_Nme4OYZ5qoq5fLBIhAGguKa28lYLfQ1" 
```

每当我删除并重新创建*具有相同别名*的包时，绝对不会发生任何事情：`bundleUrl`返回`ResolveBundleUrl`的结果与我删除并重新创建包之前相同。“相同”是指内容哈希未更改以反映捆绑包的新内容。

*编辑*......实际上，它比这更糟糕。*捆绑包本身*以某种方式缓存在集合`Bundles`之外。如果我只是生成自己的随机散列以防止浏览器缓存脚本，ASP.NET 会返回*旧脚本*。因此，显然，从中删除捆绑包`BundleTable.Bundles`实际上并没有做任何事情。

我可以简单地更改别名来解决这个问题，这对于开发来说是可以的，但我不喜欢这个想法，因为这意味着我必须在每次页面加载后弃用别名，或者让 BundleCollection 的大小在每个页面加载。如果您将其留在生产环境中，那将是一场灾难。

因此，似乎在提供脚本时，它会独立于实际`BundleTables.Bundles`对象进行缓存。因此，如果您重用一个 URL，即使您在重用它之前删除了它引用的包，它也会响应缓存中的任何内容，并且更改`Bundles`对象不会刷新缓存 - 因此只有*新*项目（或相反，具有不同名称的新项目）将永远被使用。

这种行为似乎很奇怪......从集合中删除某些内容应该将其从缓存中删除。但事实并非如此。必须有一种方法来刷新此缓存并让它使用当前的内容，`BundleCollection`而不是在首次访问该捆绑包时缓存的内容。

知道我会怎么做吗？

有一种`ResetAll`方法的目的未知，但无论如何它都会破坏事物，所以不是这样。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-07T20:24:18.337

我们听到您对文档的痛苦，不幸的是，此功能仍在快速变化，并且生成文档有一些滞后，并且几乎可以立即过时。 [Rick 的博客文章](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)是最新的，我也尝试在这里回答问题，同时传播当前信息。我们目前正在建立我们的官方 codeplex 站点，该站点将始终具有最新文档。

现在关于如何从缓存中刷新包的具体问题。

1.  我们使用从请求的捆绑包 url 生成的密钥将捆绑响应存储在 ASP.NET 缓存中，即`Context.Cache["System.Web.Optimization.Bundle:~/bundles/jquery"]`我们还针对用于生成此捆绑包的所有文件和目录设置缓存依赖项。因此，如果任何底层文件或目录发生更改，缓存条目将被刷新。

2.  我们并不真正支持基于每个请求实时更新 BundleTable/BundleCollection。完全支持的场景是在应用程序启动期间配置捆绑包（这样在网络场场景中一切正常，否则如果发送到错误的服务器，某些捆绑包请求最终会变成 404）。查看您的代码示例，我的猜测是您正在尝试根据特定请求动态修改捆绑集合？任何类型的捆绑管理/重新配置都应该伴随着 appdomain 重置，以确保一切都已正确设置。

因此，请避免在不回收您的应用程序域的情况下修改您的捆绑包定义。您可以自由修改捆绑包中的实际文件，这些文件应该会自动检测并为您的捆绑包 url 生成新的哈希码。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-07T16:29:15.327

我有一个类似的问题。
在我的课堂`BundleConfig`上，我试图看看使用`BundleTable.EnableOptimizations = true`.

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        BundleTable.EnableOptimizations = true;

        bundles.Add(...);
    }
} 
```

一切正常。
在某些时候，我正在做一些调试并将属性设置为 false。
我很难理解发生了什么，因为 jquery 的包（第一个）似乎无法解析和加载（`/bundles/jquery?v=`）。

经过一番咒骂后，我认为（？！）我已经设法解决了问题。尝试在注册开始时添加`bundles.Clear()`和`bundles.ResetAll()`，事情应该会重新开始工作。

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Clear();
        bundles.ResetAll();

        BundleTable.EnableOptimizations = false;

        bundles.Add(...);
    }
} 
```

我意识到只有在更改`EnableOptimizations`属性时才需要运行这两种方法。

**更新：**

深入挖掘我发现了这一点，`BundleTable.Bundles.ResolveBundleUrl`并且`@Scripts.Url`似乎在解决捆绑路径时遇到了问题。

为了简单起见，我添加了一些图像：

![图 1](../Images/d477bc152650f348f9590b271fa2f1c7.png)

我已经关闭了优化并捆绑了一些脚本。

![图 2](../Images/79479d7a19e47c4d5929b11f37c1053e.png)

正文中包含相同的捆绑包。

![图 3](../Images/eec2948ca72025fb0034ac8708759bcf.png)

`@Scripts.Url``@Scripts.Render`在生成正确路径的同时给我捆绑包的“优化”路径。
同样的事情发生在`BundleTable.Bundles.ResolveBundleUrl`.

**我正在使用 Visual Studio 2010 + MVC 4 + Framework .Net 4.0。**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-20T13:05:00.103

考虑到 Hao Kung 建议不要因为网络农场场景而这样做，我认为有很多场景你可能想要这样做。这是一个解决方案：

```
BundleTable.Bundles.ResetAll(); //or something more specific if neccesary
var bundle = new Bundle("~/bundles/your-bundle-virtual-path");
//add your includes here or load them in from a config file

//this is where the magic happens
var context = new BundleContext(new HttpContextWrapper(HttpContext.Current), BundleTable.Bundles, bundle.Path);
bundle.UpdateCache(context, bundle.GenerateBundleResponse(context));

BundleTable.Bundles.Add(bundle); 
```

您可以随时调用上述代码，您的捆绑包将得到更新。这在 EnableOptimizations 为 true 或 false 时都有效 - 换句话说，这将在调试或实时场景中抛出正确的标记，其中：

```
@Scripts.Render("~/bundles/your-bundle-virtual-path") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-04T16:54:17.003

我还遇到了更新捆绑包而不重建的问题。以下是需要了解的重要事项：

*   如果文件路径更改，则捆绑包不会更新。
*   如果捆绑包的虚拟路径更改，捆绑包会更新。
*   如果磁盘上的文件发生更改，则捆绑包会更新。

所以知道了，如果你正在做动态捆绑，你可以编写一些代码来使捆绑的虚拟路径基于文件路径。我建议散列文件路径并将该散列附加到包的虚拟路径的末尾。这样，当文件路径更改时，虚拟路径也会更改，并且捆绑包将更新。

这是我最终得到的代码，它为我解决了这个问题：

```
 public static IHtmlString RenderStyleBundle(string bundlePath, string[] filePaths)
    {
        // Add a hash of the files onto the path to ensure that the filepaths have not changed.
        bundlePath = string.Format("{0}{1}", bundlePath, GetBundleHashForFiles(filePaths));

        var bundleIsRegistered = BundleTable
            .Bundles
            .GetRegisteredBundles()
            .Where(bundle => bundle.Path == bundlePath)
            .Any();

        if(!bundleIsRegistered)
        {
            var bundle = new StyleBundle(bundlePath);
            bundle.Include(filePaths);
            BundleTable.Bundles.Add(bundle);
        }

        return Styles.Render(bundlePath);
    }

    static string GetBundleHashForFiles(IEnumerable<string> filePaths)
    {
        // Create a unique hash for this set of files
        var aggregatedPaths = filePaths.Aggregate((pathString, next) => pathString + next);
        var Md5 = MD5.Create();
        var encodedPaths = Encoding.UTF8.GetBytes(aggregatedPaths);
        var hash = Md5.ComputeHash(encodedPaths);
        var bundlePath = hash.Aggregate(string.Empty, (hashString, next) => string.Format("{0}{1:x2}", hashString, next));
        return bundlePath;
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-13T16:45:43.213

您是否尝试过从（**StyleBundle**或**ScriptBundle**）派生，在构造函数中不添加任何内容，然后覆盖

```
public override IEnumerable<System.IO.FileInfo> EnumerateFiles(BundleContext context) 
```

我为动态样式表执行此操作，并且 EnumerateFiles 在每个请求上都会被调用。这可能不是最好的解决方案，但它确实有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-06T10:26:25.027

很抱歉恢复死线程，但是我在 Umbraco 站点中遇到了与 Bundle 缓存类似的问题，我希望样式表/脚本在用户更改后端漂亮版本时自动缩小。

我已经拥有的代码是（在样式表的 onSaved 方法中）：

```
 BundleTable.Bundles.Add(new StyleBundle("~/bundles/styles.min.css").Include(
                           "~/css/main.css"
                        )); 
```

和（onApplicationStarted）：

```
BundleTable.EnableOptimizations = true; 
```

无论我尝试什么，“~/bundles/styles.min.css”文件似乎都没有改变。在我的页面顶部，我最初是这样加载样式表的：

```
<link rel="stylesheet" href="~/bundles/styles.min.css" /> 
```

但是，我通过将其更改为：

```
@Styles.Render("~/bundles/styles.min.css") 
```

Styles.Render 方法在文件名末尾拉入一个查询字符串，我猜它是上​​面 Hao 描述的缓存键。

对我来说，就这么简单。希望这对像我这样在谷歌上搜索了几个小时但只能找到几年前的帖子的人有所帮助！*

# drupal - Drupal 7 - 对 cron 触发的每个用户运行规则

> ID：12317393
> 
> 赞同：1
> 
> 时间：2012-09-07T11:38:26.677
> 
> 标签：drupal, drupal-7, drupal-commerce

是否可以对 cron 运行时触发的每个用户运行规则。

我需要检查每个用户的订阅状态（商务订阅模块）以及订阅是否已过期降级他们的角色。

我希望该模块具有此功能，但显然没有。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:13:13.077

当然，让你的规则正常，编写一个小的自定义模块并实现[`hook_cron()`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_cron/7)运行[`rules_invoke_event()`](http://drupalcontrib.org/api/drupal/contributions!rules!rules.module/function/rules_invoke_event/7)：

```
function MYMODULE_cron() {
  rules_invoke_event('rule_name', $arg1, $arg2, $argN);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T19:36:42.320

过时的答案。现在可以在选择触发规则的内容时选择“Cron 维护任务”。

# facebook-graph-api - 如何通过自定义应用程序获取访问令牌以代表 facebook 页面发布？

> ID：12317398
> 
> 赞同：0
> 
> 时间：2012-09-07T11:38:43.077
> 
> 标签：facebook-graph-api

> **我发现下面的解决方案非常有用，所以我想我应该分享一下！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:38:43.077

要通过 facebook 应用程序发布到 facebook 页面，您需要获取用于应用程序使用的 facebook 页面的访问令牌（具有所需的权限）。为此，请登录您的 facebook 帐户并转到[Graph API Explorer](http://www.facebook.com/apps/application.php?id=145634995501895)。在资源管理器中：

1.  提交此网址：[https](https://graph.facebook.com/me/accounts) ://graph.facebook.com/me/accounts '（在应用程序页面内的 url 字段中。）

2.  选择您要代表其执行操作（发布、点赞等）的应用程序。

3.  单击**获取访问令牌**（如果您没有）以获取它。

4.  选择要授予此应用的权限。：**publish_stream**、**offline_access**和**manage_pages**（用于发布到页面墙贴）。

5.  您将在 facebook 上看到您的实体（或图形对象）列表，例如 fb 页面或应用程序及其访问令牌。此外，对于您将找到的页面，查询应用程序对该页面的权限。

6.  **现在查询应用程序可以通过使用对象的 id 和它们的访问令牌**代表页面（或任何对象）进行操作。

# r - R igraph write.graph() edgelist 如果图为空

> ID：12317400
> 
> 赞同：1
> 
> 时间：2012-09-07T11:38:53.617
> 
> 标签：r, igraph, vertex, edge-list

在 R 中使用包“igraph”并调用函数：

```
graph <- graph.empty(10,directed=FALSE)
write.graph(graph,"some/path/graph.txt",format="edgelist") 
```

如果我通过使用来回忆图表

```
g <- as.undirected(read.graph("some/path/graph.txt",format="edgelist")) 
```

该图是空的，但也没有顶点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:51:26.970

边列表是一个有 2 列的矩阵，每条边有一行，第一列表示源节点，第二列表示目标节点。由于您没有边缘，因此边缘列表为空，因此您编写的文件为空。

通常edgelist是存储图的最简单方法，节点的数量可以从edgelist中唯一节点名称的数量推断出来（或者如果节点被编号，则为最大整数，我认为这就是igraph所做的），但它如果有没有边的节点会出错，

您可以尝试另一种格式，该格式也将信息存储在节点上。例如，

```
library("igraph")

graph <- graph.empty(10,directed=FALSE)
write.graph(graph,"graph.txt",format="pajek")

g <- as.undirected(read.graph("graph.txt",format="pajek")) 
```

# php - 使用 preg_replace 将一个字符的多个实例转换为一个（aa = a）？

> ID：12317401
> 
> 赞同：6
> 
> 时间：2012-09-07T11:38:54.547
> 
> 标签：php, preg-replace

我有一个字符串，我想将多个外观转换`-`为一个`-`。

我已经尝试过`preg_replace('/--+/g', '-', $string)`，但这根本没有返回任何东西..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:44:41.643

你不应该`g`在模式中使用，你可以简化你的正则表达式：

```
preg_replace('/-+/', '-', $string); 
```

不需要反斜杠转义。

在[http://ideone.com/IOlpv](http://ideone.com/IOlpv)上：

```
<?
$string = "asdfsdfd----sdfsdfs-sdf-sdf";
echo preg_replace('/-+/', '-', $string);
?> 
```

输出：

```
asdfsdfd-sdfsdfs-sdf-sdf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T11:41:14.857

```
preg_replace('/([\-]+)/', '-', $string) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:43:32.590

您的代码给出以下错误：

> 警告：preg_replace()：未知修饰符“g”

没有`g`修饰符。尝试：

```
preg_replace('/--+/', '-', $string) 
```

# c# - 为什么我不能将数据从 c# 发送到 asp.net 中的 Javascript 文件？

> ID：12317404
> 
> 赞同：0
> 
> 时间：2012-09-07T11:38:56.810
> 
> 标签：c#, javascript, asp.net

我有一个在 c# 中创建的类的列表，我必须将其值发送到 javascript 文件。我在 c# 中创建了一个字符串并将列表的值放入其中：

```
count = 0;
JString = "[";
for(i=0; i<x; i++)
{
    JString += "{Source:" + A[i] + ", Number:" + 3 + ", Target:" + B[i] + "},";
    count++;
}
JString = JString.Remove(JString.Length - 1, 1); //to remove the last ,
JString += "]";
GraphData.Text = "" + "var JString =" + JString + " ;" + "var count =" + count + " ;"; 
```

GraphData 是保存字符串的标签。

在 JavaScript 文件中，我添加了：

```
 $("#GraphData").val(); //to get the string sent 
```

但它不是这样工作的。难道我做错了什么？

提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:49:13.083

```
for(i=0; i<count; i++)
{
    JString += "{Source:" + A[i] + ", Number:" + 3 + ", Target:" + B[i] + "},";
    count++;
} 
```

这看起来像一个无限循环。你`i`在每个周期都增加和计数 1，所以`i`总是小于`count`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:54:43.507

解决无限循环问题后，您需要调用`$('#GraphData').text()`; 因为`Label` 在 asp.net 中被渲染为一个`span`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:39:49.630

我认为这里的 GraphData 是服务器控件。要获取此元素，请使用其 ClientID

尝试这个

$("# <%= GraphData.ClientID%> ").val();

# java - Java Regex：替换字符，除非前面有其他字符

> ID：12317407
> 
> 赞同：4
> 
> 时间：2012-09-07T11:39:17.400
> 
> 标签：java, regex

我正在使用 Java 和正则表达式，需要将一些数据拆分为多个实体。在我的输入中，单引号字符 (') 指定实体的结尾，除非它前面有转义字符，即问号 (?)。

我的 RegEx 是`(?<!\\?)\\'` 并且我正在使用 Scanner 将输入拆分为单独的实体。所以以下情况可以正常工作：

```
Hello'There  becomes 2 entities: Hello and There
Hello?'There remains 1 entity:   Hello?'There 
```

但是，当我遇到想要转义问号的情况时，它不起作用。所以：

```
Hello??'There     should become 2 entities:   Hello?? and There
Hello???'There    should become 1 entity:     Hello???'There
Hello????'There   should become 2 entities:   Hello???? and There
Hello?????'There  should become 1 entity:     Hello????'There
Hello?????There   should become 1 entity:     Hello????There
Hello??????There  should become 1 entity:     Hello?????There 
```

因此，规则是如果有偶数个问号，后跟引号，则应将其拆分。如果有奇数个问号，则不应拆分。

有人可以帮助修复我的正则表达式（希望有解释！）以应对多种情况吗？

谢谢，

菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:58:14.950

试试这个表达式来匹配偶数情况：`(?<=[^\?](?>\?\?){0,1000})'`

*   `(?<=...)'`是一种积极的态度，即每个`'`前面都有表达式 between `(?<=`and `)`will match
*   `(?>\?\?)`是由 2 个连续问号组成的原子组
*   `(?>\?\?){0,1000}`表示可以有 0 到 1000 个这些组。请注意，您不能编写`(?>\?\?)*`，因为表达式需要具有最大长度（最大组数）。但是，您应该能够将上限增加很多，具体取决于表达式的其余部分
*   `[^\?](?>\?\?)...`表示 2 个问号的组必须以某个字符开头，但不能是问号（否则您会匹配奇数情况）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:31:45.853

不要`split()`用于这个。这似乎是显而易见的解决方案，但匹配实体本身比匹配分隔符要容易得多。大多数支持正则表达式的语言都有内置的方法，比如 Python`findall()`或 Ruby 的`scan()`，但在 Java 中，我们仍然坚持编写样板文件。这是一个例子：

```
Pattern p = Pattern.compile("([^?']|\\?.)+");
String[] inputs = {
    "Hello??'There",
    "Hello???'There",
    "Hello????'There",
    "Hello?????'There",
    "Hello?????There",
    "Hello??????There"
};
for (String s : inputs)
{
  System.out.printf("%n%s :%n", s);
  Matcher m = p.matcher(s);
  while (m.find())
  {
    System.out.printf("  %s%n", m.group());
  }
} 
```

输出：

```
Hello??'There :
  Hello??
  There

Hello???'There :
  Hello???'There

Hello????'There :
  Hello????
  There

Hello?????'There :
  Hello?????'There

Hello?????There :
  Hello?????There

Hello??????There :
  Hello??????There 
```

Thomas 使用的任意最大长度噱头，除了令人作呕（无意冒犯，Thomas！）之外，是不可靠的，因为它们不断将错误引入处理这些东西的 Pattern.java 代码中。但是不要将此解决方案视为另一种解决方法；Lookbehinds 永远不应该是您的首选，即使在 .NET 这样的风格中，它们可以可靠且不受限制地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:34:19.633

您确定要使用正则表达式吗？如果您的字符串相对较小和/或执行时间不是大问题，您可以使用字符串生成器和循环来计算“？”的数量。例如

```
 //Your String
    String x = "Hello??'World'Hello?'World";
    StringBuilder sb = new StringBuilder();
    //Holds your splits
    ArrayList<String> parts = new ArrayList<String>();

    int questionmarkcount = 0;
    int _isEven;

    for (char c : x.toCharArray()) {
        if (c == '?') {
            questionmarkcount++;
            sb.append(c);
        } else if (c == '\'') {
            _isEven = questionmarkcount % 2;
            //if there are an even number of '? or none
            if (_isEven == 0 || questionmarkcount == 0) {
                //add the current split, reset the ? count and clear the String builder
                parts.add(sb.toString());
                sb.delete(0, sb.length());
                questionmarkcount = 0;
            } else {
                //append the question mark, no split is needed
                sb.append(c);
                //start counting from the beginning
                questionmarkcount = 0;
            }
        } else {
            sb.append(c);
        }
    }
    parts.add(sb.toString()); 
```

在循环结束时，部分 ArrayList 将保存所有拆分。如果**'** .

# iphone - 如何在iphone的uitableview中仅显示前5个单元格

> ID：12317415
> 
> 赞同：0
> 
> 时间：2012-09-07T11:39:53.057
> 
> 标签：iphone, objective-c, ios

我正在开发小游戏。我正在使用 nsuserdefaults 来存储玩家姓名和分数。现在我只想在我的 uitableview 中存储前 5 个分数。我只想显示前 5 个分数。

```
-(void)btnSaveScore

{
    if(!dictWinData)
        dictWinData = [[NSMutableDictionary alloc] init];

array = [[NSMutableArray alloc] init];
array = [[[NSUserDefaults standardUserDefaults] valueForKey:@"ScoreName"] mutableCopy];

if([array count] == 0)
{
    array = [[NSMutableArray alloc] init];
}

NSString *strName = [NSString stringWithFormat:@"%@",strNameOFPlayer];
NSString *strScore = [NSString stringWithFormat:@"%@",[NSString stringWithFormat:@"%d",iTap]];

if ([strScore length] == 3)
{

    [array addObject:[NSString stringWithFormat:@"%@                    %@",strScore,strName]];
}
else
{
    [array addObject:[NSString stringWithFormat:@"%@                      %@",strScore,strName]];
}

NSSortDescriptor *sorter = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:NO];
NSArray *sorters = [[NSArray alloc] initWithObjects:sorter, nil];
[sorter release];
NSArray *sortedArray = [array sortedArrayUsingDescriptors:sorters];

NSUserDefaults *dfltsData = [NSUserDefaults standardUserDefaults];
[dfltsData setObject:sortedArray forKey:@"ScoreName"];
[dfltsData synchronize];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
                                                message:@"Score is saved."
                                               delegate:self
                                      cancelButtonTitle:@"Ok"
                                      otherButtonTitles:nil, nil];
[alert show];    
[alert release];  

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:43:05.980

做这个

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if ([array count]>5)    
        return 5;
    else 
        return [array count];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:44:11.937

使用简单的功能怎么样。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSUserDefaults *dfltsData = [NSUserDefaults standardUserDefaults];
    NSArray *scoresArray = [dfltsData objectForKey:@"ScoreName"];
    return MIN(5, [scoresArray count]);
} 
```

# google-app-engine - GAE 数据存储与 Google Cloud SQL 定价

> ID：12317417
> 
> 赞同：3
> 
> 时间：2012-09-07T11:39:59.380
> 
> 标签：google-app-engine, google-cloud-datastore, google-cloud-sql

我开始使用 Cloud SQL 数据库开发应用程序，因为我发现它比 Datastore 选项更容易理解（我之前做过很多 SQL）。在第一个月对 Cloud SQL 计费后，我发现它并不便宜，几乎没有完成任何查询，而且价格已经高于我的预期。

该应用程序是一个游戏，每分钟向服务器发出许多小请求，不需要大量查询，只需下载游戏状态和帐户的小请求。

就成本而言，迁移到 GAE 数据存储是否值得？（我已经阅读了计费页面，但如果没有实际尝试过，很难感受成本差异有多大）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:03:04.730

如果系统从 CloudSQL 迁移到数据存储会节省资金，那么很难确定，您应该真正理解为什么 CloudSQL 的成本比您预期的要高，并尝试估计它在数据存储上的成本。然后可以对使用与 CloudSQL 无关的数据存储进行优化，**但主要是**我认为您需要检查如何降低查询率（例如使用 memcache），这将为您节省很多钱.

# ssl - oauth_signature 不是在重新发明 SSL 轮子吗？

> ID：12317420
> 
> 赞同：5
> 
> 时间：2012-09-07T11:40:31.003
> 
> 标签：ssl, oauth, twitter-oauth, restful-authentication, client-certificates

在使用 twitter API 时，我遇到了`oauth_signature`基本上是（请求正文 + 请求参数 + nonces/timestamps + a `consumer_secret`）的哈希。`consumer_secret`只有发送请求的应用程序才知道。

在推特的例子中：

*   所有通信都必须通过 SSL 进行。
*   twitter`consumer_secret`向每个授权的应用程序发出 。

由于 的主要用途`oauth_signature`是防止 MITM（即没有山雀（在运输中篡改）:)，在我看来，这个特定的用例可以通过 Mutual SSL 解决

*   Twitter`consumer_secret`可以为每个应用程序颁发 SSL 证书，而不是颁发 .

虽然这种客户端 ssl 证书的想法可能看起来像 1990 年代的互联网奥秘，但它并不成功，主要是因为在验证客户端证书的信任链时遇到了麻烦。这个问题在这里不会出现，因为 twitter 将是证书的唯一颁发者和验证者。缺点是代表 Twitter 需要付出更多努力来生成初始应用程序/客户端 ssl 证书，但回报将在于 REST API 的简单性，这可以依赖于客户是他所说的那个人的保证。

请注意，twitter 只是本例中的一个示例。AFAIK，大多数其他 oauth 实现者使用类似的策略，这里的要点适用于任何已经强制使用 SSL 的大规模 OAuth 实现者。

我在这里想念什么？互联网惯性？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T15:21:21.200

相互 SSL 证书虽然是个好主意，但并不能完全解决 OAuth 试图解决的问题。OAuth 有两组令牌。一种用于应用程序（可以由 SSL 证书替换），也用于特定用户。当您尝试确定是否允许此授权应用程序访问此特定用户时，SSL 证书无济于事。

# java - 自动更新 jtextfield

> ID：12317426
> 
> 赞同：0
> 
> 时间：2012-09-07T11:41:05.590
> 
> 标签：java, swing, concurrency, jtextfield, event-dispatch-thread

有谁知道如何每 5 秒更新一次 jTextfield？自动的。所以不需要用户输入。它用于更新文本字段中的时间。这是我尝试过的，但后来我的程序冻结了。

```
while(true){
                        Thread.sleep(1000);
                        txtCheck.setText(convert.getCheck());
                        System.out.println("Ja");
                        } 
```

convert 是一个线程，我试图抛出异常但失败了，因为 Eclise 说线程不能抛出异常。

转换.getCheck：

```
 public String getCheck() {
        return check;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:37:43.140

您想使用 Swing Timer 对象。这是一个[Oracle教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

首先，您需要让您的类实现 ActionListener 接口。在您的类中，您还需要实现一个 actionPerformed() 方法。最后，您应该在 main() 函数或某处启动计时器

```
timer = new Timer(5000, MyClass);
timer.setInitialDelay(pause);
timer.start(); 
```

然后，您将实现您的类，例如：

```
public class MyClass implements ActionListener
{
   ...

   void actionPerformed(ActionEvent e) {
       /*
        This is called every time the timer fires, put your code here
       */
   }
 } 
```

# .net - IOrderedQueryable.AsEnumerable() 是否仍然有序？

> ID：12317429
> 
> 赞同：3
> 
> 时间：2012-09-07T11:41:13.703
> 
> 标签：.net, linq, entity-framework, entity

`context.EntitySet.AsEnumerable().OrderBy()`返回一个`IOrderedEnumerable`保证是有序的，但看起来排序是在客户端完成的。

`context.EntitySet.OrderBy().AsEnumerable()`将表达式保留为 an`IOrderedQueryable`直到它最终变为`IEnumerable`. 我相信在这种情况下排序是由数据库完成的，这是更可取的。在一些基本测试中，输出似乎仍然是有序的。即使`IOrderedQueryable.AsEnumerable()`只返回一个，是否也能保证订购`IEnumerable`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:19:15.237

是的，这是有保证的。`AsEnumerable`只是一个简单的只进包装器（`IOrderedEnumerable`实际上只是一个标记接口）。

# caching - Azure 缓存中是否有最大对象数（预览版）

> ID：12317436
> 
> 赞同：0
> 
> 时间：2012-09-07T11:41:39.723
> 
> 标签：caching, azure, azure-caching

我知道 Azure 缓存中有最大内存限制，但也有最大对象数吗？随着键数量的增加，感觉缓存会变慢。

**背景：**

我需要为每个用户在内存中保留一些数字（从 db 计算的摘要很昂贵，但动态增加内存却很便宜）。随着并发用户的增长，我担心如果有限制，我可能会超出缓存。

**我的预期解决方案：**

假设我必须为每个用户保留`Int64`' `value1`' 和 ' ' 的内存。`value2`

将项目缓存为`userN_value1, userN_value2, [...]`并调用[DataCache.Increment](http://msdn.microsoft.com/en-us/LIbrary/microsoft.applicationserver.caching.datacache.increment)以在更改时更新每个计数器的值，如下所示：

```
DataCache.Increment("user1_value1", 2500, 0, "someregion"); 
```

随着用户数量的增长，这可能会导致*很多*项目。这是我应该担心的事情吗？有没有更好的方法我没有想到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:40:09.190

据我所知没有对象限制，你只受内存的约束，如果你的缓存遇到内存压力，它会驱逐对象以释放它，数据删除过程是异步的，并且遵循最近最少使用（LRU）策略

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:07:22.083

在实践中，限制是由为集群选择的 VM 的实例数量和大小强加的。

[容量规划指南电子表格](http://msdn.microsoft.com/en-us/library/windowsazure/hh914129)非常有趣，我用它来比较我们当前对共享缓存服务的使用情况，以便找到匹配的配置（然后比较成本）。

如果您根据您的场景调整**最大活动对象数**和**平均对象大小（序列化后）**设置，您会注意到建议的配置是如何上升的。

似乎有一个限制：如果您增加要求，您可能会遇到“不支持大于 32 的集群大小。考虑拆分为多个集群”。我假设如果您在集群中需要超过 32 个节点，每个节点都作为一个 ExtraLarge VM，那么您就达到了限制。

# php - 解析 curl_exec 响应

> ID：12317438
> 
> 赞同：0
> 
> 时间：2012-09-07T11:41:44.293
> 
> 标签：php, curl

几乎一整天我都在努力解决这个问题。

我`$result = curl_exec($ch);`用来读取响应，我想获得如下所示的 Set-cookie 标头：

```
Set-Cookie: JSESSIONID=05a0c785d8e2f4856a3f844e3694; Path=/qos; HttpOnly rememberMe=deleteMe; Path=/qos; Max-Age=0; Expires=Thu, 06-Sep-2012 10:50:20 GMT rememberMe=x+8X9hDZEUwM23osStzBmHs6FV/4VJAy18j4gjswG0H9wYKtOsSLu4p4XQ2KjLReNN4V2NokyjT66QkWzYetsde /Gbvmb9iJgV3VsuCvRgFpEFsduig5wHwu0YXjVgQWheiK87+5CNQE1X06z8mbPKu2GZUE/vwUUraR66ZAfxPdRKM24NKJ7HV4UIAPspudvCTJzFRqfkwb+pw cqnslyB6Rb/LB+pqHx2oshnINTwNd1E25+Zjs8qGQFQnHRvI4mRGF+BHC1JPGBV2GD9F7K29+szUlAGJhKr7FtOV1ELhN4JMqP4yuGDH0Dt9naLbRr6oFxxB 9t1+N5gHKVOE0vL5VM54Is5nAnWmhUrx9r3+R99We5phw7XuE1svlcOq2XrVeRJthMy3Xfp70cobUBdN/bOh5/ih9/wg3XwpagsGUKf1raP9mGO4ShDd+NFg8Z+eC+80Yt2wkS+7ZH/UGNh73LkdtCv6WlgFqiB/po20Lu+gCbDEceKt+lTNlU2c1; Path=/qos; Max-Age=15724800; Expires=Fri, 08-Mar-2013 10:50:20 GMT; HttpOnly 
```

我想用';'分开它们 字符。

编辑：

下面的解决方案并没有像我想象的那样工作。也许是因为我的结果中有其他标题：

```
Status Code: 200 OK
Content-Length: 0
Date: Fri, 07 Sep 2012 10:50:20 GMT
Server: GlassFish Server Open Source Edition 3.1.1
Set-Cookie: JSESSIONID=05a0c785d8e2f4856a3f844e3694; Path=/qos; HttpOnly rememberMe=deleteMe; Path=/qos; Max-Age=0; Expires=Thu, 06-Sep-2012 10:50:20 GMT rememberMe=x+8X9hDZEUwM23osStzBmHs6FV/4VJAy18j4gjswG0H9wYKtOsSLu4p4XQ2KjLReNN4V2NokyjT66QkWzYetsde /Gbvmb9iJgV3VsuCvRgFpEFsduig5wHwu0YXjVgQWheiK87+5CNQE1X06z8mbPKu2GZUE/vwUUraR66ZAfxPdRKM24NKJ7HV4UIAPspudvCTJzFRqfkwb+pw cqnslyB6Rb/LB+pqHx2oshnINTwNd1E25+Zjs8qGQFQnHRvI4mRGF+BHC1JPGBV2GD9F7K29+szUlAGJhKr7FtOV1ELhN4JMqP4yuGDH0Dt9naLbRr6oFxxB 9t1+N5gHKVOE0vL5VM54Is5nAnWmhUrx9r3+R99We5phw7XuE1svlcOq2XrVeRJthMy3Xfp70cobUBdN/bOh5/ih9/wg3XwpagsGUKf1raP9mGO4ShDd+NFg8Z+eC+80Yt2wkS+7ZH/UGNh73LkdtCv6WlgFqiB/po20Lu+gCbDEceKt+lTNlU2c1; Path=/qos; Max-Age=15724800; Expires=Fri, 08-Mar-2013 10:50:20 GMT; HttpOnly 
```

我只需要 Set-cookie

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:19:37.087

使用[explode()](http://php.net/explode)来分割我们的字符串，像这样：

```
$dataArray = explode('; ', $result); 
```

结果 $dataArray 是包含所有部分的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:24:19.673

使用此行获取`curl_exec()`结果的所有元素的数组：

```
$parsedResult = explode('; ', $result); 
```

请注意，您可以`curl_exec()`使用 '; 拆分结果。'。

然后，您可以`Set-Cookie`通过执行以下操作访问该值：

```
$setCookieValue = substr("Set-Cookie: ", "", $parsedResult[0]); 
```

实质上，您获取 $parsedResult 数组的第一个元素并从中删除“Set-Cookie:”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:52:16.910

最后我找到了那个灵魂。一次爆炸还不够。

```
$parsedHeaders = http_parse_headers($result);
$set_cookie_header = $parsedHeaders['Set-Cookie'];
$cookie = $set_cookie_header[0];
$cookie = $cookie[0];
$cookie = explode('; ', $cookie);
$cookie = $cookie[0];
$cookie = substr($cookie, 11); 
```

我从 php.net 示例中获取的 http_parse_headers 看起来像这样：

```
function http_parse_headers( $header )
{
        $retVal = array();
        $fields = explode("\r\n", preg_replace('/\x0D\x0A[\x09\x20]+/', ' ', $header));
        foreach( $fields as $field ) {
            if( preg_match('/([^:]+): (.+)/m', $field, $match) ) {
                $match[1] = preg_replace('/(?<=^|[\x09\x20\x2D])./e', 'strtoupper("\0")', strtolower(trim($match[1])));
                if( isset($retVal[$match[1]]) ) {
                    $retVal[$match[1]] = array($retVal[$match[1]], $match[2]);
                } else {
                    $retVal[$match[1]] = trim($match[2]);
                }
            }
        }
        return $retVal;
} 
```

我希望它将来对某人有所帮助。

# mongodb - 查询中的 mongodb c-driver $orderby

> ID：12317440
> 
> 赞同：3
> 
> 时间：2012-09-07T11:41:48.100
> 
> 标签：mongodb, mongodb-c

我正在尝试使用 sort ($orderby) 关键字对 mongo 集合进行查询。

这是没有 $orderby 的 bson-query 对象：

```
bson cmd;
bson_init( &cmd );
bson_append_string( &cmd, "ip", ip.c_str() );
bson_append_start_object( &cmd, "timestamp" );
bson_append_long( &cmd, "$gt", 100 );
bson_append_finish_object( &cmd );
bson_finish( &cmd );

mongo_find( conn, collection, cmd, bson_empty( &empty ), 0, 0, MONGO_SLAVE_OK ); 
```

它工作得很好，并返回 5000 个结果。

当我添加 $orderby 对象时（就像这里的 c-driver 示例[http://api.mongodb.org/c/current/tutorial.html#complex-queries](http://api.mongodb.org/c/current/tutorial.html#complex-queries)）：

```
bson cmd;
bson_init( &cmd );
bson_append_string( &cmd, "ip", ip.c_str() );
bson_append_start_object( &cmd, "timestamp" );
bson_append_long( &cmd, "$gt", 100 );
bson_append_finish_object( &cmd );

bson_append_start_object( &cmd, "$orderby" );
bson_append_int( &cmd, "timestamp", 1 );
bson_append_finish_object( &cmd );

bson_finish( &cmd );
... 
```

我有**0**个结果。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:52:56.053

尝试：

```
bson cmd;
bson_init( &cmd );

bson_append_start_object( &cmd, "$query" );
    bson_append_string( &cmd, "ip", ip.c_str() );
    bson_append_start_object( &cmd, "timestamp" );
        bson_append_long( &cmd, "$gt", 100 );
    bson_append_finish_object( &cmd );
bson_append_finish_object( &cmd );

bson_append_start_object( &cmd, "$orderby" );
    bson_append_int( &cmd, "timestamp", 1 );
bson_append_finish_object( &cmd );

bson_finish( &cmd ); 
```

# php - Zend 框架 - 本地主机上的 utf8 好的 - 网络服务器上的 utf8 失败

> ID：12317441
> 
> 赞同：4
> 
> 时间：2012-09-07T11:41:50.473
> 
> 标签：php, mysql, forms, zend-framework, utf-8

在寻找解决方案数小时后，我放弃了。这是我的问题。我在 localhost 的数据库是`utf8_general_ci`，在我的 application.ini 中我写了

```
resources.db.params.charset = utf8 
```

一切都很好并且工作正常。

但在网络服务器上，这些字符看起来像 Ã¼ 或 Ã¶。我评论了 resources.db.params = utf8 进出。如果它出来了，那么到处的字符都很好，但不是任何形式（标签或值）。如果它在每个字符上都会出现这样的情况。同样的故事/没有效果

```
$form->setAttrib('accept-charset', 'UTF-8'); 
```

我也试过

```
resources.db.params.driver_options = "SET NAMES utf8". 
```

没有成功。

PHP版本本地主机：5.3.8 - MySql 5.0.8
PHP版本网络服务器：5.2.6 - MySql 5.0.51

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:52:20.087

我不确定这是否是解决方案，但为了在 MySQL 中使用 UTF-8，我将 db 参数设置如下：

```
resources.db.params.charset = utf8 
```

你试过这个吗？

[编辑]

您可能还想确保视图（以及表单）也使用正确的编码：

```
resources.view.encoding = "UTF-8" 
```

或者，如果您在引导程序中手动实例化视图：

```
$view->setEncoding("UTF-8"); 
```

这应该使表单接受相同的编码，因为它使用视图的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:55:10.953

如果您的数据库正确配置为使用 utf8_general_ci-collat​​ion，那么问题不在于数据库，而在于告诉浏览器如何正确解码来自服务器的 HTML 响应。

有两种方法可以告诉浏览器如何解码响应：

1.  在`Content-Type`-header 中包含字符编码。然后它看起来像这样： `Content-Type: text/html; charset=utf-8`

    或类似地用于其他内容类型。

    `Content-Type: application/json; charset=utf-8`

2.  在您的-tag中包含 a`<meta charset="utf-8">`作为第一个标签。`<head>`将此标签作为第一个标签之一很重要。至少在任何包含需要显示的文本的标签之前，例如`<title>`.

# jquery - 如何将默认 css 属性解析为内联样式属性

> ID：12317442
> 
> 赞同：0
> 
> 时间：2012-09-07T11:41:50.077
> 
> 标签：jquery, css, html

目前我有一个页面，用户可以在其中创建 div 并将它们拖放到另一个 div`id="holder"`中。

我有一个保存按钮，可以获取持有人的 html。`$('#Holder').html();`

holder 中的 div 具有来自 CSS 文件的一些样式和内联样式：`style="left:10px; right:10px; background-color:#000000;"`由 jQuery 添加。

我想要的是将我的 CSS 文件中的样式与内联样式结合起来，这样我就可以使用`$('#holder').html();`并拥有所有样式。

问题：如何将 CSS 样式解析为`style=""`attr.

所以在信息之后我有一个例子：http: [//jsfiddle.net/Ub9ZD/](http://jsfiddle.net/Ub9ZD/)

如您所见，我缺少宽度、高度和位置样式。

== 编辑 ==

在查看给定的链接后，我仍然在为此苦苦挣扎。

我仍然无法结合文件中的内联样式和 CSS 样式。

进度：http: [//jsfiddle.net/Ub9ZD/39/](http://jsfiddle.net/Ub9ZD/39/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:45:16.050

这并不像听起来那么容易，远非如此。如果要查看对象的 CSS 属性，可以使用[`.css()`](http://api.jquery.com/css/)jQuery 提供的函数。本质上，您将通过`.css()`函数检索每个元素的样式，并使用该方法将它们重新应用到元素`htmlELement.style`。然后，理论上，`.html()`会为您提供该元素上所有 CSS 样式的列表。

您确定这是您需要的，还是可以`.css()`按照预期的方式使用？

# asp.net - 检查 .net 中的文本框值是否更改

> ID：12317443
> 
> 赞同：2
> 
> 时间：2012-09-07T11:41:53.763
> 
> 标签：asp.net, .net, vb.net, visual-studio-2010

我正在使用以下代码检查文本框值是否已更改。文本框值最初是在按钮单击事件中从数据库中检索的。

要求：如果 tbOffienotes 文本框发生更改，我想更新另一个对象（objTest2）属性。此外，我只想从文本框中获取新输入的文本。

```
If Not tbOfficeNotes.Text.Equals(objTest.OfficeNotes) Then
        Dim strComment As String = tbOfficeNotes.Text.Remove
                                            (0, objTest.OfficeNotes.Length) 
        'Save the test2 object
        objTest2.Comment=strComment

End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:50:14.160

订阅`TextChanged`文本框的事件。这将在值更改时引发。`Text`您将在文本框的属性中获得新输入的值

```
Protected Sub tbOfficeNotes_TextChanged(ByVal sender As Object, _
        ByVal e As System.EventArgs) Handles tbOfficeNotes.TextChanged
     Dim strComment As String = tbOfficeNotes.Text
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:44:03.000

为什么不将初始值存储在某个控件中，即`HiddenField`与当前值进行比较...如果更改，然后执行您的操作...

# javascript - 如果输入字段为空，则显示 div

> ID：12317447
> 
> 赞同：2
> 
> 时间：2012-09-07T11:42:10.083
> 
> 标签：javascript, html, input, show

我想用**id="showDiv"显示****div**，但前提是**id="textfield"的****输入**字段为空。

 ******```
<form action="">
 <fieldset>
  <input type="text" id="textfield" value="">
 </fieldset>
</form>

<div id="showDiv" style="width:50px;height:50px;background-color:#6CF;"></div> 
```

任何人都知道可以做到这一点的Javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T11:50:35.270

尝试这个

```
<script type="text/javascript">
if(document.getElementById("textfield").value == ""){
document.getElementById("showDiv").style.display="block";
}
</script> 
```

检查[JSFiddle](http://jsfiddle.net/p8R7r/)以获取示例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T11:52:12.373

你可以写：

```
$("#textfield").keyup(function(){
    if($(this).val()) {
        $("#showDiv").hide();
    } else {
        $("#showDiv").show();
    }

});​ 
```

现场示例[http://jsfiddle.net/Z5sjS/3/](http://jsfiddle.net/Z5sjS/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:53:34.330

```
If (document.getElementById("textfield").value == "")
 document.GetElementByZid("showDiv").style.display = "inline"
Else
 document.GetElementByZid("showDiv").style.display = "none" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-16T15:37:20.543

这个适用于 Chrome，它是纯 JavaScript。

HTML：

```
Enter Text: <input type="text" id="myInput" onkeyup="showColorBox()"> 
```

JavaScript：

```
<script>function showColorBox() {
var x = document.getElementById("myInput");  

var myDiv = document.getElementById("hiddenBox");
if (x.value != "")
{
    myDiv.style.display = "block";
} else {
    myDiv.style.display = "none";
}    
}
</script> 
```

JSFiddle：[https ://jsfiddle.net/e39vou8s/1/](https://jsfiddle.net/e39vou8s/1/)******

# magento - 在 Magento 的产品列表中隐藏“Inc TAX/VAT”？

> ID：12317451
> 
> 赞同：0
> 
> 时间：2012-09-07T11:42:24.810
> 
> 标签：magento, magento-1.7

除了作弊和添加这个 CSS：

```
.products-list .price-including-tax { display:none; } 
```

有谁知道我如何删除产品列表中的“Inc TAX/VAT”而不是单个产品页面？

我相信我可以使用 price.phtml 模板文件来做到这一点，尽管我不确定应该在其中编辑哪些原始代码，因为它在我的设置中不存在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:51:01.023

如果您使用的是默认主题，请转到以下位置：

\app\design\frontend\base\default\template\catalog\product\price.phtml

在这里您可以隐藏文本。

# c# - 通过反射填充枚举数组

> ID：12317452
> 
> 赞同：3
> 
> 时间：2012-09-07T11:42:29.443
> 
> 标签：c#, reflection, propertyinfo

我有一个读取一些 XML 并填充对象的方法。这是通过基于 XML 中的元素名称计算对象上的属性名称的反射来完成的。这适用于基本对象类型，但我正在努力处理枚举数组。

因此，我的枚举数组属性有一个 PropertyInfo 对象（我们称之为属性），并且我有一个字符串值（我们称之为值），其中包含表示枚举值的逗号分隔数字（例如“1,3,5”）。

我努力了：

`property.SetValue(this, value.Split(',').Select(i => int.Parse(i)).ToArray(), null);`

和

`property.SetValue(this, value.Split(',').Select(i => Enum.ToObject(property.PropertyType.GetElementType(), int.Parse(i))).ToArray(), null);`

但没有喜悦。在第一个代码示例中，Select.ToArray 的结果是一个 int[]，然后引发解析错误。与第二种情况类似，但 Select.ToArray 返回一个 object[] 并再次引发解析错误。

我想写这个好像枚举类型是未知的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:00:31.530

尝试这个：

```
// create the enum values as object[]
var values = value.Split(',')
  .Select(i => Enum.Parse(property.PropertyType.GetElementType(), i))
  .ToArray()

// create array of correct type
Array array = (Array)Activator.CreateInstance(property.PropertyType, values.Length);

// copy the object values to the array
int i = 0;
foreach(var value in values)
{
  array.SetValue(value, i++);
}

// set the property
property.SetValue(this, array, null) 
```

可能有更简单的方法，但关键是您创建了一个正确类型的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:01:44.607

以下是如何“正确”地做到这一点。通过反射处理数组有点难看：

```
// assume that property is an array of some enum 

var enumType = property.PropertyType.GetElementType();
var values = value.Split(',');
var enumArray = Array.CreateInstance(enumType, values.Length);
for (int i = 0; i < enumArray.Length; ++i)
    enumArray.SetValue(Enum.Parse(enumType, values[i]), i);

property.SetValue(x, enumArray); 
```

要点是您需要创建具有正确元素类型的数组。如果你只是使用`ToArray`，那么充其量你会得到一个`int[]`，最坏的情况是一个`object[]`。

您实际上*可以*`int[]`将数组设置为枚举数组属性（只要枚举具有`int`其基础类型）。这只是对您的第一个示例的轻微改动，您不需要提供第三个参数：

```
property.SetValue(x, value.Split(',').Select(i => int.Parse(i)).ToArray()); 
```

但是，设置为此属性的数组将具有“错误”类型。我不确定这是否真的会导致任何问题，但如果您进行大量依赖运行时类型的反射，您可能会遇到一些问题。（如果您想解析命名的枚举值，这也不起作用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:09:21.390

使用通用方法的另一种方法：

```
public class Class2
{
    public enum TestEnum
    {
        One = 1,
        Two = 2,
        Three = 3
    }

    public TestEnum[] TestValues { get; set; }

    public static T[] ConvertToEnum<T>(IEnumerable<int> values)
    {
        return values
            .Select(v => (T)Enum.ToObject(typeof(T), v))
            .ToArray();
    }

    public void Test()
    {
        var property = this.GetType().GetProperty("TestValues");

        var value = "1,2,3";

        var convert = this.GetType()
            .GetMethod("ConvertToEnum")
            .MakeGenericMethod(property.PropertyType.GetElementType());

        var intValues = value.Split(',').Select(v => int.Parse(v));

        var result = convert.Invoke(null, new[] { intValues });

        property.SetValue(this, result, null);
    }
} 
```

要点是使数组创建更具可读性。奖励：该`ConvertToEnum<T>`方法可以在其他地方重复使用。

# java - 在猪中使用 AvroStorage()

> ID：12317453
> 
> 赞同：1
> 
> 时间：2012-09-07T11:42:39.583
> 
> 标签：java, apache-pig, avro

我正在尝试在 Java 中构建我的第一个 Pig UDF，并且在使用 Eclipse 构建时无法调用该函数我的代码如下所示：

```
REGISTER /home/user2/deb/demo.jar; 
```

注册 /home/user2/deb/deb/avro-1.4.0.jar 注册 /home/user2/deb/deb/json-simple-1.1.jar 注册 /home/user2/deb/deb/piggybank.jar 注册 /home /user2/deb/jackson-core-asl-1.5.5.jar 注册 /home/user2/deb//jackson-mapper-asl-1.5.5.jar

```
avro = LOAD '/user/user2/deb/part-r-00000.avro' USING AvroStorage('schema_check') AS (accntNo: chararray); 
```

C = FOREACH avro GENERATE masking.AccountMask(accntNo); 转储 C;

```
ERROR 1070: Could not resolve AvroStorage using imports: [, org.apache.pig.builtin., org.apache.pig.impl.builtin.]

java.lang.RuntimeException: Cannot instantiate:AvroStorage
at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:459) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T15:49:28.077

尝试使用 AvroStorage 的完全限定名称：

```
avro = LOAD '/user/user2/deb/part-r-00000.avro' 
       USING org.apache.pig.piggybank.storage.avro.AvroStorage('schema_check') 
       AS (accntNo: chararray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:57:49.240

我认为您需要包含 avro 运行时 jar：avro-1.5.3.jar。您运行的 avro 版本可能与 1.5.3 不同，因此请检查以确保在其中输入了正确的版本号。

注册 /some/path/avro-1.5.3.jar

# c# - 2D XNA-相机和固定背景

> ID：12317463
> 
> 赞同：0
> 
> 时间：2012-09-07T11:43:16.570
> 
> 标签：c#, windows-phone-7, xna, camera

我目前正在为 Windows Phone 创建一个 XNA-Game。我有关于 2D 相机和背景的问题。

是否可以移动 XNA-Camera 并修复背景，使其不随相机视图移动？此外，我的暂停按钮和菜单栏也在移动，希望可以将它们固定到屏幕顶部。

更新：这是我在相机课上的 move-Methode：

```
 public void Move(Vector2 amount)
    {
        _pos += amount;
    } 
```

截图：[http ://www.abload.de/img/screenshotbdllj.png](http://www.abload.de/img/screenshotbdllj.png)

正如您在图片上看到的，盒子对象自上而下下降，背景向上移动。有没有办法保持背景静态固定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:22:24.257

如果您在 2D 空间中工作，您可能会遇到这样的情况：

```
spriteBatch.Begin(SomeSortmode,nullnull,etc..., Matrix);
//drawstuff
spriteBatch.End(); 
```

如果是这种情况，请将您的渲染代码移动到另一个 Begin() 和 End()

我想到了这样的事情：

```
spriteBatch.Begin(SomeSortmode,nullnull,etc..., Matrix);
//draw stuff affected by the camera
spriteBatch.End();

spriteBatch.Begin()
//draw stuff which should not be affected by the camera
spriteBatch.End(); 
```

# css - 如何使用 css3 使循环动画等待

> ID：12317466
> 
> 赞同：8
> 
> 时间：2012-09-07T11:43:23.493
> 
> 标签：css, css-animations

我有一个带有以下内容的css3动画：

```
@-webkit-keyframes rotate {
    from {
    -webkit-transform: rotate(0deg);
    }
    to { 
    -webkit-transform: rotate(360deg);
    }
}

.animated {
-webkit-animation-name: rotate;
-webkit-animation-duration: 2.4s;
-webkit-animation-iteration-count: infinite;
-webkit-transition-timing-function: ease-in-out;
} 
```

它完美无缺，嗯......，我想让它在循环之间等待：
*动画开始*，动画结束，**等待（大约0.5秒）**，*动画开始*，动画结束，**等待（大约0.5秒）** ......

PS：我试过`-webkit-animation-delay`了，还是不行。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-07T11:58:08.400

`keyframes`为您的动画持续时间增加 0.5 秒，然后在您的动画中创建一个不会改变旋转量的额外帧；

```
@-webkit-keyframes rotate {
    0% {
    -webkit-transform: rotate(0deg);
    }
    83% { /*2.4 / 2.9 = 0.827*/
    -webkit-transform: rotate(360deg);
    }
    100% {
    -webkit-transform: rotate(360deg);
    }
}
.animated {
...
-webkit-animation-duration: 2.9s; /*note the increase*/
...
} 
```

小演示：[小链接](http://jsfiddle.net/glee/ZVgAu/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:00:51.550

通过javascript在指定时间内禁用元素上的css类可能会解决您的问题。

```
function delayAnimation () {
    var animatedEl = document.getElementById('whatever');
    animatedEl.className = '';
    setTimeout(function () {
        animatedEl.className = 'animated'
        setTimeout(delayAnimation, 2400);// i see 2.4s is your animation duration
    }, 500)// wait 0.5s
} 
```

希望这可以帮助。

编辑：我更新了这个答案来修复代码。您可以在[jsfiddle](http://jsfiddle.net/m6C7L/1/)上看到一个完整的示例。感谢[@Fabrice](https://stackoverflow.com/users/3580717/fabrice)指出代码不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:33:34.197

您可以使用过渡。例如：

```
transition: all 0.6s ease-in-out; 
```

在哪里`transition-delay:0.6s;`

# android - 如何获取到指定位置的 URI？

> ID：12317467
> 
> 赞同：2
> 
> 时间：2012-09-07T11:43:29.630
> 
> 标签：android, android-layout, android-intent, android-widget

我需要您的帮助来解决我在应用程序中发现的一个小问题。

在我的应用程序中，我使用此代码将资产文件夹的所有内容复制到我自己创建的文件夹中。

```
File wallpaperDirectory = new File("/sdcard/Wallpaper/");
    wallpaperDirectory.mkdirs();

    AssetManager assetManager = getAssets();
    String[] files = null;
    try {
        files = assetManager.list("");
    } catch (IOException e) {
        Log.e("tag", e.getMessage());
    }
    for(String filename : files) {
        InputStream in = null;
        OutputStream out = null;
        try {
          in = assetManager.open(filename);
          out = new FileOutputStream("/sdcard/Wallpaper/" + filename);
          copyFile(in, out);
          in.close();
          in = null;
          out.flush();
          out.close();
          out = null;
        } catch(Exception e) {
            Log.e("tag", e.getMessage());
        }       
}

private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
      out.write(buffer, 0, read);
    }
} 
```

现在我需要我创建的这个文件夹 (/sdcard/Wallpaper/) 的 URI，你知道吗？非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:48:00.383

获取 SD 卡上特定文件夹的 Uri。

```
String sdcard = Environment.getExternalStorageDirectory().getAbsolutePath();

Uri.fromFile(new File(sdcard+"/Wallpaper/")); 
```

或者

```
Uri.parse(sdcard+"/Wallpaper/") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:49:11.500

```
Uri uri = Uri.fromFile(new File("/sdcard/Wallpaper/")); 
```

或者

```
Uri uri = Uri.parse("/sdcard/Wallpaper/"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:49:13.910

试试这个

获取文件路径

```
File path = "/sdcard/Wallpaper/"; 
```

通过以下代码将文件路径转换为 ​​Uri

```
Uri imageurl = Uri.fromFile(path); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:00:00.740

您可以使用`public static Uri fromFile (File file)`方法 from `android.net.Uri`。

# java - Spring security 3 在使用 OpenID 进行身份验证时忽略禁用/锁定标志

> ID：12317477
> 
> 赞同：4
> 
> 时间：2012-09-07T11:43:51.470
> 
> 标签：java, authentication, spring-security, openid

我正在开发一个使用 Spring Security 3.0.7 通过用户名/密码或使用 OpenID 对用户进行身份验证的 Web 应用程序。现在我需要能够禁用某些帐户。起初我找不到相关文档，但最后我发现了[User.isEnabled()](http://static.springsource.org/spring-security/site/docs/3.0.7.RELEASE/apidocs/org/springframework/security/core/userdetails/User.html#isEnabled%28%29)：

> 指示用户是启用还是禁用。无法验证禁用的用户。

此标志的值在构造函数中给出。

使用表单进行身份验证时，它似乎工作正常。不幸的是，Spring 的 OpenID 似乎完全忽略了该标志。我尽可能多地登录，我可以在日志中看到：

> 调试 ossoOpenIDAuthenticationFilter -**身份验证成功。**更新 SecurityContextHolder 以包含：[org.springframework.security.openid.OpenIDAuthenticationToken@66348da1：主体：mypackage.UserInfo@ddd49b1b：用户名：cbada36792e42a3be5a5e0f77d14e918186c7e3f；密码保护]; **启用：假；**AccountNonExpired：真；凭据非过期：真；AccountNonLocked：真；授予权限：ROLE_USER；凭证：[受保护]；已认证：真实；详细信息：org.springframework.security.web.authentication.WebAuthenticationDetails@fffd148a：RemoteIpAddress：127.0.0.1；会话 ID：1arhd8er0sj1yynglq8linpnb；授予权限：ROLE_USER，属性：[]]

**如何在禁用的帐户上成功进行身份验证？**（如果我尝试锁定帐户，也是一样的。）

我错过了什么重要的东西吗？或者它只是一个错误？任何想法要寻找什么，还有什么要启用的日志记录？

* * *

我的 XML 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
  xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://www.springframework.org/schema/security
  http://www.springframework.org/schema/security/spring-security-3.0.xsd">

  <global-method-security secured-annotations="enabled">
  </global-method-security>

  <http use-expressions="true" auto-config="true">
    <intercept-url pattern="/" access="permitAll" />
    <!-- ... other pattens -->
    <form-login
        login-page="/"
        authentication-success-handler-ref="loginSuccessHandler"
    />

    <remember-me data-source-ref="dataSource" user-service-ref="myUserDetails"/>

    <openid-login
        user-service-ref="openIdAuth"
        authentication-success-handler-ref="loginSuccessHandler"
        authentication-failure-handler-ref="openIdFailureHandler"
        >
      <attribute-exchange>
        <openid-attribute name="email" type="http://axschema.org/contact/email" required="true" />
        <openid-attribute name="name" type="http://axschema.org/namePerson" />
      </attribute-exchange>
    </openid-login>
    <logout success-handler-ref="logoutSuccessHandler"/>
  </http>

  <authentication-manager>
    <authentication-provider ref="daoAuthenticationProvider"/>
  </authentication-manager>

  <beans:bean id="daoAuthenticationProvider"
    class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <beans:property name="userDetailsService" ref="myUserDetails"/>
    <beans:property name="saltSource" ref="saltSource"/>
    <beans:property name="passwordEncoder" ref="passwordEncoder"/>
    <beans:property name="preAuthenticationChecks">
      <beans:bean class="org.springframework.security.authentication.AccountStatusUserDetailsChecker"/>
    </beans:property>
  </beans:bean>
</beans:beans> 
```

这`myUserDetails`是我的自定义 bean，它从数据库加载用户并返回一个简单的自定义实现`User`：

```
public class UserInfo
    extends User
{
    public UserInfo(UserEntity user)
    {
        super(  user.getUserName(),
                user.getPassword(),
                !user.isDisabled(), // enabled
                true, // non-expired
                true, // credentials non-expired
                !user.isLocked(), // non-locked
                UserInfo.authorities(user) // my static method
            );
        // store some info for further reference here
        // ...
    }
    // ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T13:22:18.103

我现在正在处理类似的情况。

Spring Security 基于过滤器链。如果您声明 openid 而不是将 opendId 身份验证添加到您的安全过滤器链中（我不知道 spring openid 详细信息）。

当您的过滤器链处于 openId 步骤并且有人已登录时，它将返回身份验证成功，而无需查看 UserDetails 表中的禁用状态。

第 7.3 章：docs.spring.io/spring-security/site/docs/3.0.x/reference/security-filter-chain.html

当有人通过 FB 登录时，我使用 Spring Social（用于 FB 等）并且 isDisabled() 也不适用于我。

[解决方案是用你的改变默认 spring 的 openid 实现，在UserDetails](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-core/3.1.4.RELEASE/org/springframework/security/core/userdetails/UserDetails.java#UserDetails)中观察 isDisabled() 。

**[可能](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-openid/3.0.1.RELEASE/org/springframework/security/openid/OpenIDAuthenticationProvider.java)**在这里**：**OpenIDAuthenticationProvider**。这是一枪！我不知道春天的openid**

 **希望它有所帮助。**

# excel - 将 R 中的图形另存为 Excel 中的可编辑图形

> ID：12317479
> 
> 赞同：2
> 
> 时间：2012-09-07T11:44:02.477
> 
> 标签：excel, r, user-interface

我正在用 R 编写一个 GUI，我必须实现的功能之一是将图形输出保存到 Excel 工作表的按钮，理想情况下，图形应该可以在 Excel 中编辑。我正在尝试通过以下方式执行此操作：

1.  将用于图形的数据保存到 .xlsx 文件
2.  从 R 调用 VBA 脚本以在 .xlsx 文件中重新创建图形。

我坚持第二步，因为我不知道如何从 R 执行 vba 脚本。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:12:53.300

我建议将工作表设置为模板，然后创建图表并将其链接到工作表或其他工作表上的特定区域。然后当您需要创建一个新文件时，复制模板并将数据从 R 添加到 Excel，然后图形将使用新数据更新。

如果您想使用 VBA，那么我通常使用的方法是[StatconnDCOM](http://rcom.univie.ac.at/download.html#statconnDCOM) + RCOM，只需将 Excel 作为 COM 对象来处理。

# arrays - bash中的数组数组

> ID：12317483
> 
> 赞同：51
> 
> 时间：2012-09-07T11:44:07.540
> 
> 标签：arrays, bash, shell

我正在尝试逐行读取包含由句点分隔的字段的输入文件。我想将它们放入一个数组数组中，以便稍后循环遍历它们。输入似乎没问题，但是将其“推送”到数组（inData）上似乎不起作用。

代码如下：

```
Input file: 
GSDB.GOSALESDW_DIST_INVENTORY_FACT.MONTH_KEY
GSDB.GOSALESDW_DIST_INVENTORY_FACT.ORGANIZATION_KEY

infile=${1}

OIFS=$IFS
IFS=":"

cat ${infile} | while read line
do
      line=${line//\./:}
      inarray=(${line})
#      echo ${inarray[@]}
#      echo ${#inarray[@]}      
#      echo ${inarray[0]}
#      echo ${inarray[1]}
#      echo ${inarray[2]}

      inData=("${inData[@]}" "${inarray[@]}")
done 
IFS=$OIFS

echo ${#inData[@]}   

for ((i = 0; i < ${#inData[@]}; i++))
do
 echo $i
    for ((j = 0; j < ${#inData[$i][@]}; j++))
    do
       echo ${inData[$i][$j]}
    done
done 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-12-24T13:37:25.023

bash 中的字段嵌套框，但它无法绕过查看示例。

```
#!/bin/bash

# requires bash 4 or later; on macOS, /bin/bash is version 3.x,
# so need to install bash 4 or 5 using e.g. https://brew.sh

declare -a pages

pages[0]='domain.de;de;https'
pages[1]='domain.fr;fr;http'

for page in "${pages[@]}"
do
    # turn e.g. 'domain.de;de;https' into
    # array ['domain.de', 'de', 'https']
    IFS=";" read -r -a arr <<< "${page}"

    site="${arr[0]}"
    lang="${arr[1]}"
    prot="${arr[2]}"
    echo "site : ${site}"
    echo "lang : ${lang}"
    echo "prot : ${prot}"
    echo
done 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-07T12:20:00.207

Bash 不支持多维数组。尝试

```
array=(a b c d)
echo ${array[1]}
echo ${array[1][3]}
echo ${array[1]exit} 
```

有关如何模拟它们的技巧，请参阅[Advanced Bash Scripting Guide](http://tldp.org/LDP/abs/html/arrays.html)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-03-01T16:25:02.250

知道您可以将字符串拆分为“数组”。您可以创建一个列表列表。例如，数据库服务器中的数据库列表。

```
dbServersList=('db001:app001,app002,app003' 'db002:app004,app005' 'dbcentral:central')

# Loop over DB servers
for someDbServer in ${dbServersList[@]}
do
    # delete previous array/list (this is crucial!)
    unset dbNamesList
    # split sub-list if available
    if [[ $someDbServer == *":"* ]]
    then
        # split server name from sub-list
        tmpServerArray=(${someDbServer//:/ })
        someDbServer=${tmpServerArray[0]}
        dbNamesList=${tmpServerArray[1]}
        # make array from simple string
        dbNamesList=(${dbNamesList//,/ })
    fi

    # Info
    echo -e "\n----\n$someDbServer\n--"

    # Loop over databases
    for someDB in ${dbNamesList[@]}
    do
        echo $someDB
    done
done 
```

上面的输出将是：

```
----
db001
--
app001
app002
app003

----
db002
--
app004
app005

----
dbcentral
--
central 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-10T16:08:32.977

我为此苦苦挣扎，但找到了一个令人不舒服的妥协。通常，当遇到解决方案涉及在 Bash 中使用数据结构的问题时，您应该切换到另一种语言，例如 Python。忽略该建议并继续前进：

我的用例通常涉及列表列表（或数组数组）并循环它们。你通常不想嵌套比这更深。此外，大多数数组是可能包含也可能不包含空格的字符串，但通常不包含特殊字符。这允许我使用不混淆的语法来表达外部数组，然后对字符串使用正常的 bash 处理来获得第二个列表或数组。您需要注意您的 IFS 分隔符 obvi。

因此，关联数组可以为我提供一种创建列表列表的方法，例如：

```
declare -A JOB_LIST=(
   [job1] = "a set of arguments"
   [job2] = "another different list"
   ...
) 
```

这允许您遍历两个数组，例如：

```
for job in "${!JOB_LIST[@]}"; do
  /bin/jobrun ${job[@]}
done 
```

啊，除了键列表的输出（使用魔法`${!...}`）意味着你不会按顺序遍历你的列表。因此，另一个必要的技巧是对键的顺序进行排序，如果这对您很重要的话。排序顺序由您决定；我发现使用字母数字排序很方便，`aajob1 bbjob3 ccjob6`完全可以接受。

所以

```
declare -A JOB_LIST=(
   [aajob1] = "a set of arguments"
   [bbjob2] = "another different list"
   ...
)
sorted=($(printf '%s\n' "${!JOB_LIST[@]}"| /bin/sort))
for job in "${sorted[@]}"; do
   for args in "${job[@]}"; do
     echo "Do something with ${arg} in ${job}"
   done
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-21T19:46:16.233

我使用关联数组并在键中使用 :: 来表示深度。:: 也可以用于嵌入属性，但这是另一个主题，...

```
declare -A __myArrayOfArray=([Array1::Var1]="Assignment" [Array2::Var1]="Assignment") 
```

Array1 下的一个数组

```
__myArrayOfArray[Array1::SubArray1::Var1]="Assignment" 
```

任何数组中的条目都可以通过...检索（按顺序...）

```
local __sortedKeys=`echo ${!__myArrayOfArray[@]} | xargs -n1 | sort -u | xargs`
for __key in ${__sortedKeys}; do
    #
    # show all properties in the Subordinate Profile "Array1::SubArray1::"
    if [[ ${__key} =~ ^Array1::SubArray1:: ]]; then
        __property=${__key##Array1::SubArray1::}
        if [[ ${__property} =~ :: ]]; then
            echo "Property ${__property%%:*} is a Subordinate array"
        else
            echo "Property ${__property} is set to: ${__myArrayOfArray[${__key}]}"
        fi
    fi 
done 
```

从属“配置文件”列表可以通过以下方式得出：

```
declare -A __subordinateProfiles=()
local __profile
local __key
for __key in "${!__myArrayOfArray[@]}"; do
    if [[ $__key =~ :: ]]; then
        local __property=${__key##*:}
        __profile=${__key%%:*}
        __subordinateProfiles[${__profile}]=1
    fi   
done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-04T22:18:26.817

您可以像在此脚本中那样使用（取消）引用数组：

```
#!/bin/bash

OFS=$IFS     # store field separator
IFS="${2: }" # define field separator
file=$1      # input file name

unset a      # reference to line array
unset i j    # index
unset m n    # dimension

### input

i=0
while read line
do
  a=A$i
  unset $a
  declare -a $a='($line)'
  i=$((i+1))
done < $file
# store number of lines
m=$i

### output

for ((i=0; i < $m; i++))
do
  a=A$i
  # get line size
  # double escape '\\' for sub shell '``' and 'echo'
  n=`eval echo \\${#$a[@]}`
  for (( j = 0; j < $n; j++))
  do
    # get field value
    f=`eval echo \\${$a[$j]}`
    # do something
    echo "line $((i+1)) field $((j+1)) = '$f'"
  done
done

IFS=$OFS 
```

归功于[https://unix.stackexchange.com/questions/199348/dynamically-create-array-in-bash-with-variables-as-array-name](https://unix.stackexchange.com/questions/199348/dynamically-create-array-in-bash-with-variables-as-array-name)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-15T17:58:18.363

如果您使用 declare -p 将每个数组转换并存储为字符串（请参阅我的函数 stringify），则可以使用 bash 数组数组。这将正确处理数组中的空格和任何其他问题字符。提取数组时，使用函数 unstringify 重建数组。此脚本演示了一个数组数组：

```
#!/bin/bash 
# BASH array of arrays demo

# Convert an array to a string that can be used to reform 
# the array as a new variable. This allows functions to
# return arrays as strings. Works for arrays and associative
# arrays. Spaces and odd characters are all handled by bash 
# declare.
# Usage: stringify variableName
#     variableName - Name of the array variable e.g. "myArray",
#          NOT the array contents.
# Returns (prints) the stringified version of the array.
# Examples. Use declare to make an array:
#     declare -a myArray=( "O'Neal, Dan" "Kim, Mary Ann" )
# (Or to make a local variable replace declare with local.)
# Stringify myArray:
#     stringifiedArray="$(stringify myArray)"
# Reform the array with any name like reformedArray:
#     eval "$(unstringify reformedArray "$stringifiedArray")"
# To stringify an argument list "$@", first create the array
# with a name:     declare -a myArgs=( "$@" )
stringify() {
    declare -p $1
}

# Reform an array from a stringified array. Actually this prints
# the declare command to form the new array. You need to call 
# eval with the result to make the array.
# Usage: eval "$(unstringify newArrayName stringifiedArray [local])"
#     Adding the optional "local" will create a local variable 
#     (uses local instead of declare).
# Example to make array variable named reformedArray from 
# stringifiedArray:
#     eval "$(unstringify reformedArray "$stringifiedArray")"
unstringify() {
    local cmd="declare"
    [ -n "$3" ] && cmd="$3"
    # This RE pattern extracts 2 things:
    #     1: the array type, should be "-a" or "-A"
    #     2: stringified contents of the array 
    # and skips "declare" and the original variable name.
    local declareRE='^declare ([^ ]+) [^=]+=(.*)$'
    if [[ "$2" =~ $declareRE ]]
    then
        printf '%s %s %s=%s\n' "$cmd" "${BASH_REMATCH[1]}" "$1" "${BASH_REMATCH[2]}"
    else
        echo "*** unstringify failed, invalid stringified array:" 1>&2
        printf '%s\n' "$2" 1>&2
        return 1
    fi
}

# array of arrays demo
declare -a array # the array holding the arrays
declare -a row1=( "this is" "row 1" )
declare -a row2=( "row 2" "has problem chars" '!@#$%^*(*()-_=+[{]}"|\:;,.<.>?/' )
declare -a row3=( "$@" ) # row3 is the arguments to the script

# Fill the array with each row converted to a string.
# stringify needs the NAME OF THE VARIABLE, not the variable itself
array[0]="$(stringify row1)"
array[1]="$(stringify row2)"
array[2]="$(stringify row3)"

# Print array contents
for row in "${array[@]}"
do
    echo "Expanding stringified row: $row"
    # Reform the row as the array thisRow
    eval "$(unstringify thisRow "$row")"
    echo "Row values:"
    for val in "${thisRow[@]}"
    do
        echo "   '$val'"
    done
done 
```

# sql-server - 在 Visual Studio 中创建与 MDF 文件的连接：“文件正在使用中”

> ID：12317486
> 
> 赞同：9
> 
> 时间：2012-09-07T11:44:11.330
> 
> 标签：sql-server, visual-studio-2010, entity-framework, database-connection, sql-server-2012-express

## 介绍

我是实体框架的新手并设置了正确的 SQL Server。

我正在关注[官方的实体框架教程](http://www.asp.net/web-forms/tutorials/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-1)，并且我在“创建数据库”的步骤中 - 页面下方大约 30%。

## 重现问题的步骤

> 将 School.mdf 文件从以下文件夹复制到应用程序的 App_Data 文件夹

我没有使用该`School.mdf`文件，而是使用我自己的文件，该文件是使用 SQL Server Management Studio 自动创建的（我从[Microsoft 下载中心](http://www.microsoft.com/en-us/download/details.aspx?id=29062)下载了该文件，选择了该`ENU\x86\SQLEXPRADV_x86_ENU.exe`选项）来创建带有表的数据库。

在 Visual Studio 2010 Ultimate 中，我：

1.  转到`Server Explorer`并右键单击`Data Connections`--> `Add Connection`：

2.  为数据源选择`Microsoft SQL Server Database File`- 选项并按`Continue`。

3.  点击`Browse...`下方`Database file name`。

4.  选择目录中的文件`%PROGRAMFILES%\Microsoft SQL Server\MSSQL11.MOBILIZEMESQL\MSSQL\DATA`，因为那是它的保存位置。

5.  得到错误。

**图片版本**：

**1.**

![添加数据库连接步骤1](../Images/a31808d575afcc366f66611fddc68152.png)

**2.**

![添加数据库连接步骤2](../Images/b0f55886167ac445c6f1a4a43675b9bf.png)

**3.**

![添加数据库连接步骤 3](../Images/27c77b3aa9a1ea19c3a136c24643a2a1.png)

## 问题

我收到错误消息：

```
DateBaseName.mdf
This file is in use.
Enter a new name or close the file that's open in another program. 
```

## 我试过的

由于教程没有直接告诉我如何做到这一点，我首先想到我的目标是找到一种打开`.mdf`文件的方法，这就是我能找到的方法。

我想我收到错误是因为 SQL Server 正在运行（因为 Management Studio 没有运行），因为我不知道还有什么应该使用该文件。

我可以将文件复制到另一个目录中，但是每次更改数据库时我都不必更新文件吗？

由于我是新手，我知道我在这里遗漏了一些明显的东西。

## 问题

是否有将数据库连接到实体框架的正确方法？

# excel - SUMPRODUCT 超过多个范围问题

> ID：12317487
> 
> 赞同：0
> 
> 时间：2012-09-07T11:44:13.543
> 
> 标签：excel, formulas

这可能是一个已经问过的问题，但我无法正确地用词来进行搜索。

我完全知道`SUMPRODUCT`可以将其称为 select 语句，并且已经使用了一段时间。

但是，我遇到了一个实例，我只需要在多种条件下触发总和。

基本陈述是：-

```
SELECT SUM(Quantity) FROM Orders WHERE Gencode="GEN0368" 
```

结果 sumproduct 是：-

```
=SUMPRODUCT((C2:C32) * (B2:B32="GEN0368")) 
```

难点是只有在触发另一个条件时才出现求和积。

通过单一标准这样做很容易：-

```
=SUMPRODUCT((C2:C32) * (B2:B32="GEN0368") * (J2:J32="W3019100582")) 
```

但我需要第二个标准是一个范围，这就是我遇到的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:08:39.837

试试这个

`=SUMPRODUCT(C2:C32,(B2:B32="GEN0368")*ISNUMBER(MATCH(J2:J32,Your_range,0)))`

其中 Your_range 可以是实际范围（单列或单行），也可以是这样输入的数组 {"abc","xyz","stu"}

# mysql - 需要使用不同条件从表的列中的单行中多次计数

> ID：12317491
> 
> 赞同：0
> 
> 时间：2012-09-07T11:44:27.640
> 
> 标签：mysql, database, group-by, pivot

我有一张包含以下列的表格

id = 例如 1,2,3,4,5,6...

状态 = 例如可用/不可用

cityName = 例如 = 艾哈迈达巴德

我写了下面的查询并得到了我需要的输出，但我想要一些不同的格式

```
SELECT count(id) as 'Count', status, cityName  FROM table_name
    WHERE cityName like 'Ahmedabad'
    GROUP BY status ; 
```

**输出 ： -**

```
----------------------
Count|status|cityname
----------------------
100|Available|Ahmeadabad

200|Not Available|Ahmeadabad 
```

**我想要的输出：-**

```
--------------------------------
Available|Not Available|cityname
--------------------------------
100|200|Ahmeadabad 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:51:23.737

```
SELECT
SUM(IF(status = 'Available', 1, 0)) AS `Available`,
SUM(IF(status = 'Not Available', 1, 0)) AS `Not_Available`,
cityName
FROM
table_name
GROUP BY cityName 
```

请询问有关查询是否有任何不清楚的地方。

或者，如果您只想要那个城市，您可以省略 GROUP BY

```
SELECT
SUM(IF(status = 'Available', 1, 0)) AS `Available`,
SUM(IF(status = 'Not Available', 1, 0)) AS `Not_Available`,
cityName
FROM
table_name
WHERE cityName = 'Ahmeadabad' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:16:25.140

一种通用的方法是使用 SUM(CASE WHEN...)

```
SELECT 
SUM(CASE WHEN Status = 'Available' then 1 else 0 end) AS `Available`, 
SUM(CASE WHEN Status = 'Not Available' then 1, 0 end) AS `Not_Available`, 
cityName 
FROM 
table_name 
GROUP BY cityName 
```

# c# - 如何为可空类型使用 Mock 设置

> ID：12317492
> 
> 赞同：5
> 
> 时间：2012-09-07T11:44:33.437
> 
> 标签：c#, testing, moq, nullable

我有一个接口，它有像这样可以为空的参数

```
Result<Notice> List(int offset, int limit, Guid? publicationId, Guid? profileId, DateTime? toDate, ListingOrder order); 
```

这就是我试图模拟这个方法的方式

```
mockNoticesClient.Setup(c => c.List(It.IsAny<int>(), It.IsAny<int>(), It.IsAny<Nullable<Guid>>(), It.IsAny<Nullable<Guid>>(), It.IsAny<Nullable<DateTime>>(), Data.Notices.ListingOrder.DateDesc)).Returns(dataNotices); 
```

然后在尝试使用该方法时

```
var results = this.noticesClient.List(0, 100, null, profileId, latestNoticeTime, Data.Notices.ListingOrder.DateDesc); 
```

每当此行运行时，尽管抛出此异常

```
... threw an exception of type 'System.NullReferenceException' ... {System.NullReferenceException} 
```

我尝试了一些不同的组合，例如在参数中使用带有 null 的 setup ，但这也不起作用。我正在使用最新版本的 Moq 4.0.10827（目前）。

**编辑：** noticesClient 的构造函数采用 dataNoticesClient 的接口

```
public Client(Data.Notices.INotices noticesClient) 
```

并像这样初始化

```
mockNoticesClient = new Mock<Data.Notices.INotices>();
noticesClient = new Client(mockNoticesClient.Object);

mockNoticesClient.Setup(c => c.List(It.IsAny<int>(), It.IsAny<int>(), It.IsAny<Nullable<Guid>>(), It.IsAny<Nullable<Guid>>(), It.IsAny<Nullable<DateTime>>(), It.IsAny<Data.Notices.ListingOrder>())).Returns(dataNotices);

mockNoticesClient.Setup(c => c.List(It.IsAny<int>(), It.IsAny<int>(), It.IsAny<Guid?>(), It.IsAny<Guid?>(), It.IsAny<DateTime?>(), It.IsAny<Data.Notices.ListingOrder>())).Returns(dataNotices); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-26T21:32:40.620

这是`moq`提出问题时库中的错误（`moq 4.0.10827`），但[在这里](https://github.com/moq/moq4/issues/90)解决了。现在可以使用 进行设置`Nullable<T>`和调用`null`，效果很好。

```
public interface INullable
{
    int Method(Guid? guid);
}

var mock = new Mock<INullable>();
mock.Setup(m => m.Method(It.IsAny<Guid?>())).Returns(6);
int a = mock.Object.Method(null); // a is 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:48:27.850

我将调试此测试并检查以下内容：

```
Data.Notices.ListingOrder.DateDesc 
```

前三个值之一可能为空，因此`NullReferenceException`被抛出

顺便说一句，这种链接可能表明存在设计缺陷，请参阅[得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)

# python - urllib2.urlopen()：获取内容的大小

> ID：12317493
> 
> 赞同：9
> 
> 时间：2012-09-07T11:44:35.340
> 
> 标签：python, urllib2

只要工作允许，我仍在以我的方式围绕 python 工作......

我正在使用使用`urllib2.urlopen`. 我想知道如何从每个请求中获取页面内容的大小。我似乎无法弄清楚这一点。

提前致谢，

米宾

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T11:51:54.537

```
print len(urlopen(url).read()) 
```

或者

```
>>> result = urllib2.urlopen('http://www.spiegel.de')
>>> result.headers['content-length']
'181291' 
```

# cocos2d-iphone - 不同层对象的碰撞检测

> ID：12317496
> 
> 赞同：1
> 
> 时间：2012-09-07T11:44:58.660
> 
> 标签：cocos2d-iphone, collision-detection, game-physics

我的 2 个对象（玩家和障碍物）在不同的层中，并且都添加到 GameLayer（主层）中。我想对物体（玩家和障碍物）的物体进行碰撞检测。

我有以下代码，但不幸的是它没有得到碰撞检测。

```
 CGPoint P_point = [[CCDirector sharedDirector] convertToGL:[playerLayer.player convertToWorldSpace:playerLayer.player.position]];

CGRect frame_1 = CGRectMake(P_point.x,P_point.y, playerLayer.player.boundingBox.size.width, playerLayer.player.boundingBox.size.height);

CGPoint selfMouPoint = [[CCDirector sharedDirector]convertToGL:self.position];

 if(CGRectContainsPoint( frame_1, selfMouPoint ))
    NSLog(@"Collision"); 
```

代码有什么问题？这是 SELF 是障碍物。

# javascript - Javascript 和 RegEx：拆分并保留分隔符

> ID：12317499
> 
> 赞同：2
> 
> 时间：2012-09-07T11:45:28.160
> 
> 标签：javascript, regex, delimiter

我有一个正则表达式，它将我的字符串拆分为数组。

一切正常，除了我想保留分隔符的一部分。

这是我的正则表达式：

```
(&#?[a-zA-Z0-9]+;)[\s] 
```

在Javascript中，我正在做：

```
var test = paragraph.split(/(&#?[a-zA-Z0-9]+;)[\s]/g); 
```

我的段落如下：

```
Current addresses:  &dagger;    Biopharmaceutical Research and Development<br />
&Dagger;    Clovis Oncology<br />
&sect;  Pisces Molecular <br />
||  School of Biological Sciences    
&para;  Department of Chemistry<br /> 
```

问题是我的数组中有 10 个元素，而不是我应该的 5 个。事实上，我也将分隔符作为一个元素，我的目标是让分隔符与拆分的元素保持一致，而不是创建一个新的分隔符。

非常感谢您的帮助。

编辑：

我想得到这个结果：

```
1\. &dagger; Biopharmaceutical Research and Development<br />
2\. &Dagger; Clovis Oncology<br />
3\. &sect;   &sect;  Pisces Molecular <br />
||  School of Biological Sciences  
4\.  &para;  Department of Chemistry<br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:01:41.750

正如我在评论中所说，这个解决方案（顺便说一下，未经测试）只有在你只是管理`<br />`元素时才有效。这里：

```
var text = paragraph.split("<br />"); // now text contains just the text on each line

for(var i = 0; i<text.length-1; i++) { // don't want to add an line break to our last line
    text[i] += " <br />"; // replace the <br /> elements on each line
} 
```

该变量`text`现在是一个数组，其中数组的每个元素都是原始段落的一行。换行符 ( `<br />`) 已添加回每行的末尾。您刚刚提到要拆分特殊字符，但据我所知，每一行都以换行符结尾，所以这应该有同样的效果。不幸的是，我目前没有时间写出更完整的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:25:23.163

尝试`match`改用：

```
var test = paragraph.match(/&#?[a-zA-Z0-9]+;\s[^&]*/g); 
```

更新：添加了必需的空白`\s`匹配。

解释：

*   `&#?`匹配`&`和可选`#`（问号匹配前一次或零次）

*   `[a-zA-Z0-9]`是所有大小写字符和数字的范围。如果您还接受下划线，则可以将其替换为`\w`.

*   符号表示它应该匹配最后`+`一个模式一次或多次，因此它匹配一个或多个字符 az、AZ 和数字 0-9。

*   `;`匹配`;`字符。

*   `\s`匹配类空白。这包括空格、制表符和其他空白字符。

*   `[^&]*`再次是一个范围，但由于`^`是第一个字符，匹配被否定，所以它不匹配`&`-characters 它匹配除了`&`. 星形匹配模式零次或多次。

*   `g`最后，在最后一个`/`意思之后`global`，并`match`在第一个匹配之后继续，并获得所有匹配的数组。

因此，匹配`&`和一个可选的`#`，后跟任意数量的字母或数字（但至少一个），后跟`;`，后跟一个空格，后跟零个或多个不是 的字符`&`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:30:40.857

使用正则表达式非常简单：

```
var result = input.match(/&#?[^\W_]+;\s[^&]*/g); 
```

### [在这里](http://jsfiddle.net/b6Y6Z/)测试一下。

# grails - 在 mysql 表中，我无法更改鉴别器值

> ID：12317500
> 
> 赞同：1
> 
> 时间：2012-09-07T11:45:34.760
> 
> 标签：grails, inheritance, mapping, discriminator

在 grails 中，我有三个类，例如：

1.

```
package com.p1
class Node {
    static constraints = {
        name(blank:false,nullable:true)
    }
    String name
    static mapping = {
        discriminator column:"Node_Type"
    }
    String toString() {
        "$name"
    }
} 
```

2.

```
package com.p1
class Task extends Node {
    static constraints = {
    }   
    static mapping =  {
        discriminator value:"TASK_NODE"
   }
} 
```

3.

```
package com.p1
class Decision extends Node{
    static constraints = {
        assignee(nullable:true)
    }
    String assignee
     static mapping =  {
         discriminator value:"DECISION_NODE"
    }

} 
```

在 MySQL 表中，我可以将鉴别器列名获取为`Node_Type`，**但无法获取 and 之类的**`TASK_NODE`列值`DECISION_NODE`。

相反，我变得像这样[`com.p1.Task`或`com.p1.Decision`]

# eclipse - Eclipse Window->Show View all entry都变灰了

> ID：12317501
> 
> 赞同：2
> 
> 时间：2012-09-07T11:45:37.850
> 
> 标签：eclipse

在菜单中的 eclipse（Helios Service Release 2）的最新更新之后，`Window->Show View`所有条目现在都变灰了。如果我关闭视图，则不会再次显示它（重置透视图除外）。这可能是什么原因？

![在此处输入图像描述](../Images/3212d4b4c7ddbfbf1de7c81062187efc.png)

# python - 如何在python中将十进制0打印为000

> ID：12317504
> 
> 赞同：4
> 
> 时间：2012-09-07T11:45:57.820
> 
> 标签：python, python-2.7, number-formatting

我正在将十六进制数据转换为十进制，范围是从 00 到 FF

```
 hex_data = "FF"
int("0x" + hex_data , 16) 
```

返回 255，但是当我将 0 作为 hexdata 给出时，它会给出 0 而我需要它作为 000

怎么做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T11:48:27.877

您需要对其进行格式化：

```
hex_data = "FF"
number = int("0x" + hex_data, 16) 
print '%03d' % number # either this
print '{:03d}'.format(number) # or this (Python >= 2.6) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:14:20.023

为了完整起见，您还可以执行以下操作：

```
str(int(hex_data, 16)).zfill(3) 
```

# iphone - 如何添加看起来像 UIAlert 的启动视图

> ID：12317505
> 
> 赞同：0
> 
> 时间：2012-09-07T11:46:14.307
> 
> 标签：iphone, ios, uiviewcontroller, uialertview, splash-screen

我需要一个具有飞溅功能的视图。但我不需要在应用程序加载开始时。我在用户异步请求处理期间需要这个。

它的外观应该像一个小的警报框，但我希望在这里进行自定义：我不希望它看起来像任何其他`UIAlertview`. 我不想要它上面的任何按钮（确定/取消），因为当应用程序需要它时它会被丢弃。用户不应丢弃它。

我对两种方法感到困惑：我应该使用`UIViewController`（但想让它看起来像一个模态框，并且还具有警报大小，而不是 320 X 480）？或者我应该使用`UIAlertView`没有按钮的自定义？我怀疑我是否可以自由地玩它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:08:14.260

我认为人们过于关注您问题的警报视图部分。您不需要将此基于警报视图。使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:49:20.003

你需要一个自定义的`UIAlertView`.

您可以阅读本教程：http: [//joris.kluivers.nl/blog/2009/04/23/subclass-uialertview-to-create-a-custom-alert/](http://joris.kluivers.nl/blog/2009/04/23/subclass-uialertview-to-create-a-custom-alert/)

本教程展示了如何创建`UIAlertView`没有按钮的自定义

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T11:51:48.020

您无需任何按钮即可轻松使用 UIAlertView！

```
splashAlertView = [[UIAlertView alloc] initWithTitle:@"Data is Loading" 
                                             message:@"Please wait until data will finish loading" 
                                            delegate:self 
                                   cancelButtonTitle:nil 
                                   otherButtonTitles:nil];

[splashAlertView show];
[splashAlertView addSubview:yourSplashSubview]; 
```

然后，当您的数据完成加载时，只需调用：

```
[splashAlertView dismissWithClickedButtonIndex:-1 animated:0];
[splashAlertView release];
splashAlertView = NULL; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T12:04:06.500

另一种选择是只使用 UIView 子类。您可以根据需要设置 UIView 的样式，并在需要显示“警报”时创建视图实例并将其添加到当前可见视图中。

禁用当前可见视图上的交互，直到此 UIView 可见。当您从最顶层视图中删除它时，再次启用交互。

# microsoft-metro - 更改 WinRT 应用的 appmanifest 会破坏应用数据

> ID：12317507
> 
> 赞同：7
> 
> 时间：2012-09-07T11:46:20.500
> 
> 标签：microsoft-metro, windows-runtime

在我的 WinRT 应用程序中，我将用户数据（不是会话数据）存储在本地文件中。该文件通过 ApplicationData.Current.LocalFolder 保存和加载。

**每次我对应用程序清单进行微小更改时，这些保存的文件和应用程序设置都会在应用程序启动时失效并删除。**这是否仅在开发环境中如此，或者当软件包已在应用商店中发布时也会发生这种情况？

如何防止系统这样做？如果由于版本更改而丢失数据，用户将非常不高兴！

**更新 1：**
感谢 Hans Passant，我了解到[数据文件也有一个 Version](https://stackoverflow.com/questions/12317507/changing-the-appmanifest-of-a-winrt-app-destroys-the-apps-data/12329692#12329692)。设置数据文件版本已经解决了版本更改的问题（仅增量），但不适用于其余的清单更改。

**更新 2：**
与此同时，我还观察到，不仅更改应用程序清单的属性会产生这种效果。如果我为新语言（本地化）添加新资源文件，数据也将被删除。很高兴知道，如果通过商店发布的已安装应用程序中也存在这种奇怪的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:47:40.017

我的问题的答案似乎并不那么容易。最终我观察到它可能包含两个不同的问题。在网上我发现[的信息很少](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)，因此我在这里写的只是一些推测，基于我所做的一些简单测试。

**版本更改**
感谢 Hans Passant，我了解到数据文件可能有一个[版本](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.setversionasync)。由于缺乏文档，我做了如下版本测试和版本设置：

```
await ApplicationData.Current.SetVersionAsync((uint)1, (setVersionRequest) => { }); 
```

代码在我加载数据文件之前随时执行。因为目前我的文件格式没有任何更改，所以我将更改回调留空`{}`。
插入上述代码后，版本更改在更改版本属性时不再删除我的应用程序数据。但是，作为测试，我后来删除了代码，出乎意料的是，任何版本更改都没有删除应用程序数据文件！也许是因为它们现在是版本化的。*（附带说明：降低版本总是会导致数据文件丢失）。*

**General Manifest Changes**
改变manifest的属性（除了Version-properties）删除数据的效果**还没有消失**。例如，如果我更改应用程序的描述，所有数据都将被删除。找了一些帖子猜测店里不会出现这种情况，但是没有找到任何证据。

**添加语言**
我观察到的另一个效果是，如果我向应用程序添加一种新语言（添加一个资源文件），也会这样做。

*请注意：以上所有解释均基于对我的开发环境的观察。我还没有找到任何具体的文档，因此我建议每个人都很好地测试相关的用例，以免让您的客户非常不满意。可能在几个月后，会有更具体的文档可用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:31:51.450

这应该只发生在开发环境中。发布应用程序后，清单是固定的，不会更改*。

* 除了以下情况 1）您更改它并重新上传，以及 2）清单很可能会在认证过程中发生更改，这是可以预料的。

# c# - 无法从我的 C# 控制台应用程序中使用 MongoDB

> ID：12317509
> 
> 赞同：6
> 
> 时间：2012-09-07T11:46:24.753
> 
> 标签：c#, mongodb

> 无法连接到服务器 localhost:27017：命令 'ping' 失败：no > such cmd (response: { "errmsg" : "no such cmd", "ok" : 0.0 })。

* * *

这可能是我在这里遗漏的基本内容......请帮帮我

以上是我得到的异常......
下面是我正在使用的代码（这是网站中给出的示例演示） 注意：我的数据库正在运行。我能够从命令行创建和编辑数据库。

```
using System;
using System.Collections.Generic;

using MongoDB.Bson;
using MongoDB.Driver;
using MongoDB.Driver.Builders;

namespace MongoDBTest
{
    public class Entity
    {
        public ObjectId Id { get; set; }
        public string Name { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var connectionString = "mongodb://localhost/?safe=true";
            var server = MongoServer.Create(connectionString);
            var database = server.GetDatabase("test");
            var collection = database.GetCollection<Entity>("entities");

            var entity = new Entity { Name = "Tom" };
            collection.Insert(entity);
            var id = entity.Id;

            var query = Query.EQ("_id", id);
            entity = collection.FindOne(query);

            entity.Name = "Dick";
            collection.Save(entity);

            var update = Update.Set("Name", "Harry");
            collection.Update(query, update);

            collection.Remove(query);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:45:37.383

您可以从 mongo shell 运行以下命令：

```
> db.version()
2.2.0
> db.runCommand("ping")
{ "ok" : 1 }
> 
```

这是为了验证您使用的服务器版本太旧以至于没有 ping 命令。

# cocoa - NSTextView 和 Core Animation 绘制麻烦

> ID：12317513
> 
> 赞同：3
> 
> 时间：2012-09-07T11:46:44.120
> 
> 标签：cocoa, core-animation, nstextview

我在 NSTextView 上添加 CA 层时遇到了一些麻烦。我希望能够在文本视图中添加小的“气泡”（就像在 Xcode 中一样），所以我想用核心动画来做。当我在视图 -awakeFromNib 中启用层支持模式`[self wantsLayer:YES]`并添加一个空的 CALayer 作为根层`[self setLayer:rootLayer]`时，视图的内容会被随机垃圾完全破坏

![随机垃圾](../Images/cc67baaeeb6480306eb26724a91d5c7a.png)

如果我在根层上设置背景颜色，该颜色会很好地显示出来。所以不知何故透明层后面的textview不会重绘？或者这是一个不同的问题？

**编辑：** [这是一个产生类似东西的示例项目](http://halfdanj.dk/files/LayberBackedTextView.zip)（至少在 10.8 上）

乔纳斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:55:12.000

原来你不能替换NSTextView的图层，只能添加子图层。所以用作品代替这条`self.layer = rootLayer`线`[self.layer addSubLayer:rootLayer]`。
替换图层会破坏 NSTextView 绘图。

# jsoup - jsoup 和选择列表 html 标记的问题

> ID：12317514
> 
> 赞同：0
> 
> 时间：2012-09-07T11:46:44.940
> 
> 标签：jsoup

我是 jsoup 的新手，在使用 html`<select>`标签时遇到了一些麻烦。我需要根据它们包含的文本获取选择列表选项的值属性。例如：

```
'<select id="list">
<option value="0">First value</option>
<option value="1">Second value</option>
<option value="2">Third value</option>
</select>' 
```

如何获得“第二值”选项的值属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:02:30.620

尝试这个：

```
Document doc = Jsoup.parse(html);
String value = doc.select("#list > option:eq(1)").attr("value"); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:34:07.640

基于选项文本的正确代码：

```
 Document doc = Jsoup.parse(html);
 String value = doc.select("#list > option:contains(Second value)").val(); 
```

# javascript - 使用 jQuery 在表格中进行分页

> ID：12317515
> 
> 赞同：2
> 
> 时间：2012-09-07T11:46:59.470
> 
> 标签：javascript, jquery

过去几天我一直在研究以下代码，但找不到似乎可以按我想要的方式工作的解决方案。我需要的是在表格的一部分内进行分页。需要以下操作/事件：

*   单击上一个或下一个时，顶部的比赛名称应随着突出显示的比赛而相应更改。SO R2 = Race 2 - Virgina 等。

*   棘手的部分来了，一旦您到达最后一个可见（高亮）列并单击下一步，应该会出现一个新列，因此范围将为 R2-R7 等等，总数总是不同的。所有 Rn 的宽度应该保持不变。

我的问题是，这在 jQuery 中甚至是可能的吗？如何？我研究了一些分页插件，但似乎没有一个能够做到这一点。

代码在这里：http: [//jsfiddle.net/yunowork/5r9ZW/](http://jsfiddle.net/yunowork/5r9ZW/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:56:20.617

使页面涉及**整个**表格。复制每个页面的所有表结构。

然后，当单击`previous`or时`next`，您需要一个事件处理程序（应该很容易），它只会更新您所在的列，并更新名称（也很容易），只需说：

```
$("#title").val(titlearray[columnnumber]); // or something like this 
```

当您到达终点时，以编程方式调用页面的任何更改（加载新表）。

现在我不确定您从哪里获取数据 - 是否已加载但未显示，或者您是否进行了 AJAX 调用。如果有插件，您可能应该使用它。

无论哪种方式，如果例如。它已经在页面上，你可以在你的上一个/下一个事件处理程序中说这样的话（如果你没有使用插件）：

```
if (columnnumber == lastcolumn) {
  newpagenumber = oldpagenumber + 1; // for next page
  // do this if you don't have a pagination plugin
  $("#page" + oldpagenumber).css("display:none"); // hide previous page
  $("#page" + newpagenumber).css("display:block"); // show next page
  // otherwise use a plugin to switch pages
} 
```

在您的 html 中，您可以只拥有：

```
<table id="page1" style="display:block"></table>
<table id="page2" style="display:none"></table>
<table id="page3" style="display:none"></table> 
```

这个想法只是让每个表格都已经在 HTML 中，但您只是显示代表正确页面的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:32:16.230

并不完美，但可能是一个起点：

我只在“下一个”中对其进行了测试。

我在下一个函数中添加了：

```
var $currCol = $('.highlighted'); //to get the current column

$('.race strong').text($('.highlighted').next('td:first').text()); //To set the title: R1 - R2 - R3 ... 
```

和

```
else{
        $currCol.each(function(i,v){
            var k = i + 1;   
            var id = parseInt(v.id.replace('r',''));                
            id++;
            if(k == 1) $(this).clone().text('R'+id).attr('id', 'r'+id).appendTo($('table tr').eq(k));
            else $(this).clone().attr('id', 'r'+id).appendTo($('table tr').eq(k));
        });
    } // to add a new column 
```

希望这有帮助

# java - 如何在java中将Base64编码二进制字符串转换为二进制？

> ID：12317518
> 
> 赞同：3
> 
> 时间：2012-09-07T11:47:17.727
> 
> 标签：java, android, salesforce

如何将以下 Base64 编码二进制字符串转换为 java 中的二进制文件。我看到人们使用以下代码在 php 中做同样的事情。如何在java中实现这一点？

在 PHP 中：

```
$byteArr = "AAAAAEAA";
$maparray = array();
$map = "";
foreach(str_split($byteArr) as $c)
    $maparray [] = sprintf("%08b", ord($c));
$map = implode("", $maparray );

Output is $map -> "000000000000000000000000000000000100000000000000"; 
```

但是当我在java中尝试这个时：

```
String input = "AAAAAEAA";
String mapArray = "";
for(int b=0;b<input.length();b++){
   int asciValueOfChar =(int)toByte.charAt(b);
   String binaryInt = Integer.toBinaryString(asciValueOfChar);
   String paddedBinaryInt = String.format("%8s", binaryInt);
   paddedBinaryInt = paddedBinaryInt.replace(' ', '0');
   System.out.println("ASCII Code::"+asciValueOfChar);
   System.out.println("Binary of Char::"+binaryInt);
   System.out.println("Binary of Padded Char::"+binaryInt);
   mapArray = mapArray + paddedBinaryInt ;
}
System.out.println("Binary Array::"+mapArray);

Output is mapArray -> "0100000101000001010000010100000101000001010001010100000101000001" 
```

输出不同。

我怎样才能获得相同的输出？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:58:33.593

要解码 base64，最简单的是使用[Apache commons Decoder](http://commons.apache.org/codec/)。

```
import org.apache.commons.codec.binary.Base64;

byte[] decodedBytes = Base64.decodeBase64(input); 
```

你真的需要二进制作为由“0”和“1”字符组成的字符串吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:22:41.857

首先，我不相信 PHP 会给你上面提到的字符串 ( `000000000000000000000000000000000100000000000000`) 作为输出！

您问题中的代码枚举输入字符串 ( `AAAAAEAA`) 中的每个字符，检索每个字符的[ASCII 值](http://www.php.net/manual/en/function.ord.php)并将其发布到输出中。如果您执行您提到的 PHP 代码，您将给出与运行您提到的 JAVA 代码完全相同的输出 ( `0100000101000001010000010100000101000001010001010100000101000001`)。

例如，

```
ord("A") = 65 
```

65又具有`01000001`二进制表示。

其次，纠正你的问题以获得正确的答案。看来，伙计们，早些时候回答过，根本不明白你的问题。

第三，如果要获取给定字符串的二进制表示，请使用[getBytes()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#getBytes%28%29)方法检索整个字符串的字节表示。使用或修改[此代码片段](http://www.java.happycodings.com/Core_Java/code3.html)以获取给定字节数组的二进制表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:03:28.613

我希望人们推荐 apache commons 但我不知道它是否可移植......

你可以使用这个：

```
public class Base64Coder
{

// Mapping table from 6-bit nibbles to Base64 characters.
private static final char[] map1                = new char[64];
static
{
    int i = 0;
    for (char c = 'A'; c <= 'Z'; c++)
        map1[i++] = c;
    for (char c = 'a'; c <= 'z'; c++)
        map1[i++] = c;
    for (char c = '0'; c <= '9'; c++)
        map1[i++] = c;
    map1[i++] = '+';
    map1[i++] = '/';
}
// Mapping table from Base64 characters to 6-bit nibbles.
private static final byte[] map2                = new byte[128];
static
{
    for (int i = 0; i < map2.length; i++)
        map2[i] = -1;
    for (int i = 0; i < 64; i++)
        map2[map1[i]] = (byte) i;
}
// The line separator string of the operating system.
private static final String systemLineSeparator = System.getProperty("line.separator");

/**
 * Decodes a byte array from Base64 format. No blanks or line breaks are
 * allowed within the Base64 encoded input data.
 * 
 * @param in
 *            A character array containing the Base64 encoded data.
 * @return An array containing the decoded data bytes.
 * @throws IllegalArgumentException
 *             If the input is not valid Base64 encoded data.
 */
public static byte[] decode(char[] in)
{
    return decode(in, 0, in.length);
}

/**
 * Decodes a byte array from Base64 format. No blanks or line breaks are
 * allowed within the Base64 encoded input data.
 * 
 * @param in
 *            A character array containing the Base64 encoded data.
 * @param iOff
 *            Offset of the first character in <code>in</code> to be
 *            processed.
 * @param iLen
 *            Number of characters to process in <code>in</code>, starting
 *            at <code>iOff</code>.
 * @return An array containing the decoded data bytes.
 * @throws IllegalArgumentException
 *             If the input is not valid Base64 encoded data.
 */
public static byte[] decode(char[] in, int iOff, int iLen)
{
    if (iLen % 4 != 0) throw new IllegalArgumentException("Length of Base64 encoded input string is not a multiple of 4.");
    while (iLen > 0 && in[iOff + iLen - 1] == '=')
        iLen--;
    int oLen = (iLen * 3) / 4;
    byte[] out = new byte[oLen];
    int ip = iOff;
    int iEnd = iOff + iLen;
    int op = 0;
    while (ip < iEnd)
    {
        int i0 = in[ip++];
        int i1 = in[ip++];
        int i2 = ip < iEnd ? in[ip++] : 'A';
        int i3 = ip < iEnd ? in[ip++] : 'A';
        if (i0 > 127 || i1 > 127 || i2 > 127 || i3 > 127)
            throw new IllegalArgumentException("Illegal character in Base64 encoded data.");
        int b0 = map2[i0];
        int b1 = map2[i1];
        int b2 = map2[i2];
        int b3 = map2[i3];
        if (b0 < 0 || b1 < 0 || b2 < 0 || b3 < 0) throw new IllegalArgumentException("Illegal character in Base64 encoded data.");
        int o0 = (b0 << 2) | (b1 >>> 4);
        int o1 = ((b1 & 0xf) << 4) | (b2 >>> 2);
        int o2 = ((b2 & 3) << 6) | b3;
        out[op++] = (byte) o0;
        if (op < oLen) out[op++] = (byte) o1;
        if (op < oLen) out[op++] = (byte) o2;
    }
    return out;
}

/**
 * Decodes a byte array from Base64 format. No blanks or line breaks are
 * allowed within the Base64 encoded input data.
 * 
 * @param s
 *            A Base64 String to be decoded.
 * @return An array containing the decoded data bytes.
 * @throws IllegalArgumentException
 *             If the input is not valid Base64 encoded data.
 */
public static byte[] decode(String s)
{
    return decode(s.toCharArray());
}

/**
 * Decodes a byte array from Base64 format and ignores line separators, tabs
 * and blanks. CR, LF, Tab and Space characters are ignored in the input
 * data. This method is compatible with
 * <code>sun.misc.BASE64Decoder.decodeBuffer(String)</code>.
 * 
 * @param s
 *            A Base64 String to be decoded.
 * @return An array containing the decoded data bytes.
 * @throws IllegalArgumentException
 *             If the input is not valid Base64 encoded data.
 */
public static byte[] decodeLines(String s)
{
    char[] buf = new char[s.length()];
    int p = 0;
    for (int ip = 0; ip < s.length(); ip++)
    {
        char c = s.charAt(ip);
        if (c != ' ' && c != '\r' && c != '\n' && c != '\t') buf[p++] = c;
    }
    return decode(buf, 0, p);
}

/**
 * Decodes a string from Base64 format. No blanks or line breaks are allowed
 * within the Base64 encoded input data.
 * 
 * @param s
 *            A Base64 String to be decoded.
 * @return A String containing the decoded data.
 * @throws IllegalArgumentException
 *             If the input is not valid Base64 encoded data.
 */
public static String decodeString(String s)
{
    return new String(decode(s));
}

/**
 * Encodes a byte array into Base64 format. No blanks or line breaks are
 * inserted in the output.
 * 
 * @param in
 *            An array containing the data bytes to be encoded.
 * @return A character array containing the Base64 encoded data.
 */
public static char[] encode(byte[] in)
{
    return encode(in, 0, in.length);
}

/**
 * Encodes a byte array into Base64 format. No blanks or line breaks are
 * inserted in the output.
 * 
 * @param in
 *            An array containing the data bytes to be encoded.
 * @param iLen
 *            Number of bytes to process in <code>in</code>.
 * @return A character array containing the Base64 encoded data.
 */
public static char[] encode(byte[] in, int iLen)
{
    return encode(in, 0, iLen);
}

/**
 * Encodes a byte array into Base64 format. No blanks or line breaks are
 * inserted in the output.
 * 
 * @param in
 *            An array containing the data bytes to be encoded.
 * @param iOff
 *            Offset of the first byte in <code>in</code> to be processed.
 * @param iLen
 *            Number of bytes to process in <code>in</code>, starting at
 *            <code>iOff</code>.
 * @return A character array containing the Base64 encoded data.
 */
public static char[] encode(byte[] in, int iOff, int iLen)
{
    int oDataLen = (iLen * 4 + 2) / 3;       // output length without padding
    int oLen = ((iLen + 2) / 3) * 4;         // output length including padding
    char[] out = new char[oLen];
    int ip = iOff;
    int iEnd = iOff + iLen;
    int op = 0;
    while (ip < iEnd)
    {
        int i0 = in[ip++] & 0xff;
        int i1 = ip < iEnd ? in[ip++] & 0xff : 0;
        int i2 = ip < iEnd ? in[ip++] & 0xff : 0;
        int o0 = i0 >>> 2;
        int o1 = ((i0 & 3) << 4) | (i1 >>> 4);
        int o2 = ((i1 & 0xf) << 2) | (i2 >>> 6);
        int o3 = i2 & 0x3F;
        out[op++] = map1[o0];
        out[op++] = map1[o1];
        out[op] = op < oDataLen ? map1[o2] : '=';
        op++;
        out[op] = op < oDataLen ? map1[o3] : '=';
        op++;
    }
    return out;
}

/**
 * Encodes a byte array into Base 64 format and breaks the output into lines
 * of 76 characters. This method is compatible with
 * <code>sun.misc.BASE64Encoder.encodeBuffer(byte[])</code>.
 * 
 * @param in
 *            An array containing the data bytes to be encoded.
 * @return A String containing the Base64 encoded data, broken into lines.
 */
public static String encodeLines(byte[] in)
{
    return encodeLines(in, 0, in.length, 76, systemLineSeparator);
}

/**
 * Encodes a byte array into Base 64 format and breaks the output into
 * lines.
 * 
 * @param in
 *            An array containing the data bytes to be encoded.
 * @param iOff
 *            Offset of the first byte in <code>in</code> to be processed.
 * @param iLen
 *            Number of bytes to be processed in <code>in</code>, starting
 *            at <code>iOff</code>.
 * @param lineLen
 *            Line length for the output data. Should be a multiple of 4.
 * @param lineSeparator
 *            The line separator to be used to separate the output lines.
 * @return A String containing the Base64 encoded data, broken into lines.
 */
public static String encodeLines(byte[] in, int iOff, int iLen, int lineLen, String lineSeparator)
{
    int blockLen = (lineLen * 3) / 4;
    if (blockLen <= 0) throw new IllegalArgumentException();
    int lines = (iLen + blockLen - 1) / blockLen;
    int bufLen = ((iLen + 2) / 3) * 4 + lines * lineSeparator.length();
    StringBuilder buf = new StringBuilder(bufLen);
    int ip = 0;
    while (ip < iLen)
    {
        int l = Math.min(iLen - ip, blockLen);
        buf.append(encode(in, iOff + ip, l));
        buf.append(lineSeparator);
        ip += l;
    }
    return buf.toString();
}

/**
 * Encodes a string into Base64 format. No blanks or line breaks are
 * inserted.
 * 
 * @param s
 *            A String to be encoded.
 * @return A String containing the Base64 encoded data.
 */
public static String encodeString(String s)
{
    return new String(encode(s.getBytes()));
}

// Dummy constructor.
private Base64Coder()
{
}
} 
```

用法：

```
String message = "blahblah";
byte[] encoded = Base64Coder.encode(message.getBytes("UTF-8"));
byte[] decoded = Base64Coder.decode(encoded);
String msg2 = new String(decoded, "UTF-8");
if(message.equals(msg2)) System.out.println("yaay"); 
```

它还与 Sun 的代码兼容...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:32:41.350

Android 包含自己的 Base64 编码器和解码器。解码 Base64 字符串所需的只是：

```
byte[] decoded = Base64.decode( string, Base64.DEFAULT ); 
```

第二个参数是一个标志。见这里：[Base64](http://developer.android.com/reference/android/util/Base64.html)

# php - Magento 使用 getCollection() 获取当前排序和方向

> ID：12317519
> 
> 赞同：2
> 
> 时间：2012-09-07T11:47:22.513
> 
> 标签：php, magento

我不得不对 Magento 中的目录页面 (list.phtml) 进行一些更改，一切都很好，除了“排序依据”名称、位置等......

这是我的代码：

```
$_productCollection= Mage::getModel('catalog/product')->getCollection()
                     ->addAttributeToSelect('*')
                     ->addStoreFilter()
                     ->setPage(Mage::getBlockSingleton('page/html_pager')->getCurrentPage(), $limit)
                     ->setPageSize( $limit )
                     ->setOrder($this->getCurrentOrder(), $this->getCurrentDirection())
                     ->load(); 
```

这里显然有问题，因为在尝试对结果进行排序时没有任何反应，名称，位置等！

显然这条线有问题：

```
->setOrder($this->getCurrentOrder(), $this->getCurrentDirection()) 
```

我也遇到了设置为不单独显示的简单产品正在显示的问题！我也错过了那里的一些东西。

如果有人可以引导我使用正确的函数/语法，那就太好了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:29:00.793

我解决了订购问题！

> ->setOrder(Mage::getBlockSingleton('catalog/product_list_toolbar')->getCurrentOrder(), Mage::getBlockSingleton('catalog/product_list_toolbar')->getCurrentDirection())

并且产品设置为不单独显示：

```
->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds()) 
```

所以其他人的完整代码：

```
if( $this->getMode()!='grid' ) {
    $limit = Mage::getStoreConfig('catalog/frontend/list_per_page'); 
}
else {
    $limit = Mage::getStoreConfig('catalog/frontend/grid_per_page');
}   
  $_productCollection= Mage::getModel('catalog/product')->getCollection()
                        ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
                         ->addAttributeToSelect('sku_base')
                         ->addStoreFilter(Mage::app()->getStore()->getId())
                         ->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds())
                         ->setPage(Mage::getBlockSingleton('page/html_pager')->getCurrentPage(), $limit)
                         ->setPageSize( $limit )
                         ->setOrder(Mage::getBlockSingleton('catalog/product_list_toolbar')->getCurrentOrder(), Mage::getBlockSingleton('catalog/product_list_toolbar')->getCurrentDirection())
                         ->load(); 
```

# javascript - jquery“动画”变量值

> ID：12317523
> 
> 赞同：16
> 
> 时间：2012-09-07T11:47:58.313
> 
> 标签：javascript, jquery, variables, jquery-animate

我需要用jquery“动画”一个变量。

**示例：** 变量值为 1。5 秒后该值应为 10。它应该“顺利”增加。

希望你明白我的意思。

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-07T12:07:28.567

尝试：

```
$({someValue: 0}).animate({someValue: 10}, {
    duration: 5000,
    step: function() { 
        $('#el').text(Math.ceil(this.someValue));
    }
});

<div id="el"></div> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-07T11:56:32.177

您需要的是[`$().animate`](http://api.jquery.com/animate/)函数中的 step 参数。

```
var a = 1;
jQuery('#dummy').animate({ /* animate dummy value */},{
    duration: 5000, 
    step: function(now,fx){ 
        a = 1 + ((now/100)*9); 
    }
}); 
```

[演示](http://jsfiddle.net/wmhVc/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-07T12:55:27.047

![表示](../Images/5a1e38092620700789291a974cfbc9d8.png)

```
var snail = {speed:0};
$(snail).animate({speed: 10}, 5000); 
```

[演示](http://jsbin.com/gewak/3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T11:54:00.590

这应该适合你：

```
var a = 1;
var b = setInterval(function() {
  console.log(a);
  a++;
  if (a == 10) { clearInterval(b); }
}, 500); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T11:57:56.663

Html 标记为
**Html**

```
<span id="changeNumber">1</span> 
```

您可以在 5 秒后更改其值。
**查询：**

```
setInterval(function() {        
        $('#changeNumber').text('10');
    },5000); 
```

这是一个演示[http://jsfiddle.net/Simplybj/Fbhs9/](http://jsfiddle.net/Simplybj/Fbhs9/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T11:51:50.987

使用 setInterval ：

```
percentage = 0;
startValue = 1;
finishValue = 5;
currentValue = 1;
interval = setInterval(function(){ 
   percentage ++; 
   currentValue = startValue + ((finishValue - startValue) * percentage) / 100;
   doSomething(currentValue);
   if (percentage == 100) clearInterval(interval);
 }, duration / 100)

function doSomething(val) { /*process value*/} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-29T08:32:49.223

作为 Ties 答案的补充 - 您不需要将虚拟元素附加到 DOM。我这样做：

```
$.fn.animateValueTo = function (value) {

    var that = this;

    $('<span>')
        .css('display', 'none')
        .css('letter-spacing', parseInt(that.text()))
        .animate({ letterSpacing: value }, {
            duration: 1000,
            step: function (i) {
                that.text(parseInt(i));
            }
        });

    return this;
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-04T19:20:24.853

尝试这个：

```
var varToAnimate = 1;
$(window).animate({
    varToAnimate: 10
}, 5000); 
```

**注意：这仅适用于使用`var varToAnimate`或设置变量的情况`window.varToAnimate`。**

当您设置一个变量时，它会在窗口对象中创建一个属性。`jQuery.animate()`为属性设置动画，因此`$(window)`获取窗口对象，并将`varToAnimate: 10`窗口的 varToAnimate 属性设置为 10。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-07T11:53:51.750

递增`setTimeout`

```
x = 1

for(i=0;i<1000;i+=100){
  setTimeout(function(){
    console.log(x++)
  },i)
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-09-07T11:52:21.967

```
​var blub = 1;
setTimeout(function () {
    blub = 10;
}, 5000); 
```

# iphone - 使用 coredata 更新表列

> ID：12317532
> 
> 赞同：0
> 
> 时间：2012-09-07T11:48:35.220
> 
> 标签：iphone, core-data

我有一个名为 CCAccount 的表，有 8 个字段。当我注册时，我只输入 3 个字段，其他字段将为空。当我单击 addPasscode 按钮时，我需要输入密码到具有 ccid=myccid 的 CCAccount 表。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:28:25.317

您必须使用`NSPredicate`，请参阅此[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)以了解如何使用它。

# java - 基类扩展和数组

> ID：12317540
> 
> 赞同：1
> 
> 时间：2012-09-07T11:49:29.393
> 
> 标签：java

我想要一个基类和几个扩展它的类。

然后我想要一个可以是两个扩展类中的任何一个的数组。

我希望做这样的事情：

```
class Base{  }
class A extends Base {}
class B extends Base {} 
```

然后我想要一个可以是 A 或 B 的数组，所以我在数组声明中使用 Base

```
Base[] it = Base[2];

it[0] = new A();
it[1] = new B(); 
```

我不确定我这样做是否正确或是否允许。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T11:51:43.180

您缺少`new`关键字：

```
Base[] it = new Base[2]; 
```

除此之外 - 方法很好。类型数组`Base[]`可以保存类型`A`和的对象`B`，因为它们本身就扩展了类型`Base`。

**例子：**

```
static public class Base { 
    public void foo() { 
        System.out.println("I am base");
    }
}
static public class A extends Base { 
    @Override
    public void foo() { 
        System.out.println("I am A");
    }
}
static public class B extends Base { 
    @Override
    public void foo() { 
        System.out.println("I am B");
    }
}

    public static void main(String[] args) {
        Base[] arr = new Base[2];
        arr[0] = new A();
        arr[1] = new B();
        arr[0].foo();
        arr[1].foo();
    } 
```

正如打印中预期的那样，将导致：

```
I am A
I am B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:52:51.850

好吧，最好的办法是尝试一下 =) 至于问题，是的，它应该可以工作。

# asp.net - SSRS 2005 - 自定义参数处理

> ID：12317546
> 
> 赞同：0
> 
> 时间：2012-09-07T11:50:15.053
> 
> 标签：asp.net

我使用 SSRS 2005 开发了一份报告。报告有 5 个参数。其中 4 个将被显示并由用户选择，1 个（比如说 ID）需要隐藏。

我想从我的 ASP.NET 应用程序中传递 ID 参数的值，这将是登录用户的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:53:04.847

您可以尝试使用此代码

```
var report = new LocalReport();
report .ReportPath = Server.MapPath("~/Path/To/Report.rdlc");
ReportParameter param= new ReportParameter("Name", "Value");
report .SetParameters(new ReportParameter[] { param}); 
```

# c# - 在运行时加载程序集并使用 Activator.CreateInstance() 创建实例

> ID：12317553
> 
> 赞同：14
> 
> 时间：2012-09-07T11:50:30.393
> 
> 标签：c#, .net, reflection

我试图在运行时加载程序集，但我不确定为什么我不能使用 static 在程序集中创建类型的实例`Activator.CreateInstance()`。它适用于`Assembly.CreateInstance()`.

```
string assemblyFilename = "MyAssembly.dll";
string assemblyName = "MyAssembly";
string typeName = "MyAssembly.MyType";

FileInfo fileInfo = new FileInfo(assemblyFilename); 
```

这有效：

```
var assembly = Assembly.LoadFrom(assemblyFilename);
Form form = (Form)assembly.CreateInstance(typeName); 
```

但这不起作用：

```
Assembly.LoadFrom(assemblyFilename);
Form form = (Form)Activator.CreateInstance(assemblyName, typeName).Unwrap(); 
```

抛出 FileNotFoundException：

> 无法加载文件或程序集“MyAssembly”或其依赖项之一。该系统找不到指定的文件。

**编辑：**

在这两种情况下，在`Assembly.LoadFrom()`调用之后，当我查看`AppDomain.CurrentDomain.GetAssemblies()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T11:55:48.137

你可以用他的路径调整你的文件

```
var path = Assembly.GetAssembly(MyType.GetType()).Location;
var thisAssembly= Assembly.LoadFrom(path);

var TypeName = "";
Type type = thisAssembly.GetType(TypeName);
object instance = Activator.CreateInstance(type); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T11:56:06.230

您必须首先将程序集加载到您当前的 AppDomain 中：

```
AppDomain.CurrentDomain.Load(File.ReadAllBytes(assemblyFileName)); 
```

编辑：这行得通吗？

```
Form form = (Form)Activator.CreateInstance(Type.GetType(typeName)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-16T10:29:16.883

试图编辑原始答案，但我没有收到作者的回复。因此，以防万一有人需要，这是对我有用的代码

```
System.Reflection.Assembly assembly = AppDomain.CurrentDomain.Load(File.ReadAllBytes("DLL_PATH"));  
Form form = (Form)assembly.CreateInstance("FullNameSpace.ClassName"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-06T23:37:46.110

A Khudairy 的答案的变体在这里允许传入输入参数以访问特定的构造函数，再加上他的答案的变体解决了一个问题，我已经遇到了一个问题，实际上我已经断断续续地搜索了几个星期，现在试图解决（很多荣誉给他分享答案）。

我的问题是我想将 .NET 3.5 dll 加载到 .NET 4.6 的新应用程序中，但那些旧 dll 使用了看起来使用 CAS 策略的第三方控件。我会从第三方控件收到一个错误，说我需要上交 app.config，如果我这样做了，我可以加载和运行这些文件，如果它们在我的本地计算机上，但如果我尝试从一个网络驱动器，我需要这样做，然后我收到 FileIOPermission 错误。

尝试运行 NetFx40_LegacySecurityPolicy 与 loadFromRemoteSources 和 useLegacyV2RuntimeActivationPolicy 的组合，并尝试了几种不同的方法，例如通常对我有用的 Activator.CreateInstance()，尝试创建沙箱（尽管我不知道我是否做得正确），但没有任何效果，以下除外。请注意，我的用户控件也是基于基类的。在授予对网络驱动器的访问权限之前，我已经运行了一些 CAS 命令提示符命令，并且我的应用程序应该在完全信任的情况下运行。无论如何，到目前为止，除了这个之外，我尝试过的任何方法看起来都没有对我有用。

代码修复：

```
object dllUserControl = null;
System.Reflection.Assembly assembly = AppDomain.CurrentDomain.Load(File.ReadAllBytes("DLL_PATH"));  
dllUserControl = assembly.CreateInstance("FullNameSpace.ClassName",true,BindingFlags.Default,null,constructorParams[],null,null); 
```

...我可以稍后根据需要将对象转换为我的基类，以便稍后在它自己的窗体/窗口中启动它。

# asp.net-mvc - 声明的变量在部分视图中不可访问

> ID：12317556
> 
> 赞同：0
> 
> 时间：2012-09-07T11:50:36.920
> 
> 标签：asp.net-mvc

有一件奇怪的事情。我在视图开始时声明了一些变量，但在标签中它无法访问。我可以在标签之间声明具有相同名称的变量。在这些标签中，原始变量已经可以再次访问。

也许，原因可能是有runatserver。代码如下所示：

```
<% var variable = something; %>
<head id="Head1" runat="server">
<%!-- <% variable = something else; %> --%> // impossible variable don't exist in this context
<% var variable = something else %> // so this row instead of last one 
...
</head>
<% if (variable == something) 
       ThisFunctionWillBeExecute();
   if (variable == somethigelse)
       ThisFunctionWillNotBeExecuted();
%> 
```

我不明白为什么，我不能谷歌一些解释。你听得懂么？一些链接？它是如何工作的，部分代码是否单独处理？

不要问为什么要使用这种奇怪的解决方案，我不是代码的作者，我只是对其进行了一些更改。

已编辑：我忘了写它是母版页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:14:50.090

在 ASP.NET MVC 上下文中，如果您在任何元素（例如 DIV）上使用`runat="server"`标记，它将将该代码呈现为已编译页面中的单独**方法**。因此，任何现有变量都会脱离上下文，而在该标记中声明的变量会在标记之后脱离上下文`runat="server"`。

来源： [ASP.NET MVC 中 runat="server" 标记的状态是什么？](https://stackoverflow.com/questions/446533/what-is-the-status-of-runat-server-tags-in-asp-net-mvc)

# ruby-on-rails - rspec中的别名'it'

> ID：12317558
> 
> 赞同：12
> 
> 时间：2012-09-07T11:50:53.817
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我正在尝试在 rspec 中为 ROR 应用程序编写一些测试（不是用于代码覆盖，但与此处无关），并且至少需要为 describe 和它起别名。我可以别名描述就好了，因为它在顶层。但是，我不能让其他任何工作。像这个人：

```
module RSpec
  module Core
    class ExampleGroupMethods
      alias :they :it
    end
  end
end 
```

我将它包含在规范文件中，但我没有得到正确的模块路径。我查看了 rspec 代码库，但碰壁了，所以我认为我不太清楚自己在做什么。任何提示或资源将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T15:14:06.773

你想使用[`alias_example_to`](http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration%3aalias_example_to)：

```
RSpec.configure do |c|
  c.alias_example_to :they
end 
```

这是 RSpec 的公共 API 的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:00:52.393

看起来您想使用[define_example_method](https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/example_group.rb#L70-93)。这就是 RSpec 定义示例组方法的方式，例如`it`，`specify`它们实际上只是彼此的别名。不确定是否有经过批准的 API 可以利用它，但您应该能够执行以下操作：

```
module RSpec
  module Core
    class ExampleGroupMethods
      class << self
        define_example_method :they
      end
    end
  end
end 
```

# ios - iOS分发认证转换为p12格式

> ID：12317559
> 
> 赞同：1
> 
> 时间：2012-09-07T11:50:55.323
> 
> 标签：ios, apache-flex, certificate

我在之前为项目创建的 iOS 门户中有一个分发证书。现在我想将此证书用于另一个项目。但是，我在钥匙串中丢失了它的私钥。有没有办法可以在没有私钥的情况下将分发证书转换为 p12 格式？我不想删除并重新创建分发文件，因为我怀疑它会影响我现有的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:58:22.717

重新创建您的证书不会影响任何实时应用程序。他们继续工作。当您再次使用新证书时，您只需重新创建 mobileprovisions 即可使用它。

我不确定它是否会影响临时发行版，但我认为它不会，至少不会影响那些已经安装的发行版。

# sql-server-2008 - 如何使用 try、throw 和 catch 在错误处理中打印消息

> ID：12317561
> 
> 赞同：4
> 
> 时间：2012-09-07T11:50:59.503
> 
> 标签：sql-server-2008, error-handling

我想在我的查询中打印一条消息（“数据库中不存在该表雇员”）。

我的查询是：

```
create proc sp_emprecord
as 
begin
    select * from employe
end

begin try
    execute sp_emprecord
end try

begin catch
    select
    error_message() as errormessage,
    error_number() as erronumber,
    error_state() as errorstate,
    error_procedure() as errorprocedure,
    error_line() as errorline;
 end catch 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T14:03:15.627

尝试这个：

```
create proc sp_emprecord
as 
begin
    select * from employe
end
go
begin try
    execute sp_emprecord
end try

begin catch
    if(ERROR_NUMBER() = 208)
        RAISERROR ('The table employe is not exist in database', 0, 1) WITH NOWAIT;
    else
        select
        error_message() as errormessage,
        error_number() as erronumber,
        error_state() as errorstate,
        error_procedure() as errorprocedure,
        error_line() as errorline;
 end catch 
```

# django - 尝试在 Heroku 上设置 Django 和 postgreSQL

> ID：12317562
> 
> 赞同：2
> 
> 时间：2012-09-07T11:51:00.153
> 
> 标签：django, postgresql, heroku, osx-lion

我正在尝试遵循有关部署 Django 应用程序的 Heroku 教程：

[Heroku 上的 Django 入门](https://devcenter.heroku.com/articles/django)

我可以毫无问题地运行其中的大部分内容，但是在同步 postgreSQL 数据库时，我收到以下消息：

```
psycopg2.OperationalError: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

我尝试过推广数据库、将 HOST 设置为 /tmp、修改 postgresql.conf 以及我发现搜索的许多其他内容都没有成功

我正在开发 MB-Pro、Mac OS 10.7 (Lion)，并在某些地方读到这个操作系统在涉及 postgre 时让开发人员有些头疼。有人在 OS 10.7 上遇到过这个问题，并在更新到 10.8 后修复了吗？我正在考虑更新，以防它解决问题。

提前致谢。

编辑：

我试图运行的命令是：`heroku run python manage.py syncdb`

编辑：我忘了删除已经在文件中定义的数据库定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:22:04.633

我利用[PostgresApp](http://postgresapp.com/)帮助在我的 Mac 上运行 Postgres，然后在终端中运行；

```
psql -h localhost 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:46:05.467

我忘记删除已在文件中定义的 DATABASE 定义。它现在正在工作。

# java - Stable alternative to RXTX

> ID：12317576
> 
> 赞同：55
> 
> 时间：2012-09-07T11:52:15.557
> 
> 标签：java, serial-port, rxtx

After using RXTX for a number of different projects, I've come across many annoying discrepancies and issues that can only sensibly be put down to bugs in the library - deadlocks, race hazards, and monitor threads deep in the RXTX library being left open preventing the program from closing (even though all ports I was using have been closed!) Running the latest "unstable" version has helped a bit, but it's still far from where I'd call it reliable, and activity on the project seems rather low at present.

However, searching for free cross-platform alternatives to RXTX doesn't seem to come up with much else.

Is there another library that anyone's tried with more luck? I don't need parallel port support, just serial, and it doesn't necessarily have to be compatible with RXTX or the `javax.comm` API.

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-07T11:55:13.287

We have moved to [java-simple-serial-connector](https://github.com/scream3r/java-simple-serial-connector) which seems to be very stable and comfortable at the current release 0.9.0\. For now, it works on windows and linux systems. We use it for modem interactions.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-31T09:38:01.713

There's [jSerialComm](http://fazecast.github.io/jSerialComm/) too.

Serial communication in Java is a mess. I've had trouble with jSSC with a virtual usb serial on linux, but with serial-comm it connected.

RXTX is a mess.

At least I think that now this SO question has all of the worth mentioning serial communication java libraries.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-07T14:01:53.217

There's a few of them out there now, now that Arduino is pretty popular.

There's [Serialio](http://www.serialio.com/support/jspCommAPI.php)

and [PureJavaComm](http://www.sparetimelabs.com/purejavacomm/index.html), but it's pretty early on in development from what I can see.

it really depends on what your needs are. RXTX has been ported pretty much everywhere, so it is widely available.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-17T13:56:54.180

One of the issues of RXTX I faced was **the delay closing the port.** When checking with setserial the port configuration I discovered a parameter **closing_delay=3000**. This means that the port closes 3 sec after the close() method was executed. Resetting the closing_delay toany value is ignored by RXTX. RXTX insists in 3sec delay.

the **JSSC** library performed to our satisfaction

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-07T18:30:05.050

Serialio lib is $49/platform/developer seat which gets you unlimited distribution in unlimited apps so not too pricey. The Mac library has been stable and reliable for us in an undemanding application and availability/compatibility has been good throughout for the various Mac platforms and OS/X releases.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-22T21:53:18.087

I use socat configured to serve a socket for a serial port. The downside is that baud rate etc. is given to the socat invocation, it is not something you can readily alter from your program. On the upside is I can connect across a network without anything more than changing the IP address I connect to.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-30T03:55:45.410

jSerialCom is good ! 'https://github.com/Fazecast/jSerialComm'

And here is its' wiki page： [https://github.com/Fazecast/jSerialComm](https://github.com/Fazecast/jSerialComm)

# algorithm - 河内塔的递归解决方案

> ID：12317583
> 
> 赞同：0
> 
> 时间：2012-09-07T11:52:48.620
> 
> 标签：algorithm, towers-of-hanoi

我正在阅读 RobetSedwick 的 C++ 书中的算法。在这里，作者正在解释河内塔使用分而治之的设计和重现。

以下代码是问题的递归解决方案。它指定在每个步骤中应该移动哪个磁盘，以及在哪个方向上（+ 表示向右移动一个钉子，当在最右边的钉子上时，循环到最左边的钉子；和 - 表示向左移动一个钉子，循环到最左边的钉子。当在最左边的钉子上时，最右边的钉子）。

```
Disk3          
Disk2
Disk1

Peg1      Peg2   Peg3 
```

我的问题当磁盘位于左挂钩（即挂钩 1）上时，作者在“循环到最左边的挂钩”上方的意思是什么我们如何循环到最左边的挂钩？

作者还提到递归是基于以下思想：要将N个磁盘向右移动一个钉子，我们首先将顶部N-1个磁盘向左移动一个钉子，然后将N个磁盘向右移动一个钉子，然后移动N-1个磁盘再向左钉一个（在磁盘 N 上）。

我对上面的左右术语感到困惑。任何人都可以解释一下。

```
void hanoi(int N, int d)
  {
    if (N == 0) return;
    hanoi(N-1, -d);
    shift(N, d);    
    hanoi(N-1, -d);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:01:18.880

它只是意味着：

向右骑行：

```
peg1 -> peg2
peg2 -> peg3
peg3 -> peg1 
```

向左骑行

```
peg1 -> peg3
peg2 -> peg1
peg3 -> peg2 
```

# ruby-on-rails - Rails + 设计 + API + 用户注册

> ID：12317586
> 
> 赞同：6
> 
> 时间：2012-09-07T11:52:54.130
> 
> 标签：ruby-on-rails, api, mobile, devise, registration

我是 ruby​​ 和 rails 的新手，到目前为止，我设法使用 devise 设置了用户管理。现在我正在尝试集成对移动 Android 和 iOS 应用程序的支持。到目前为止，他们可以登录和注销并获得身份验证令牌。但除此之外，我还希望他们能够注册。

现在，据我了解，我必须发帖

```
http://localhost:3000/users/sign_up 
```

这个帖子看起来怎么样？以及如何获得 JSON 响应？我在[stackoverflow](https://stackoverflow.com/questions/8666871/ruby-on-rails-user-registration-using-rest-api-call-and-devise)上找到了这个。

```
"utf8=✓&amp;authenticity_token=n5vXMnlzrXefnKQEV4SmVM8cFdHDCUxMYWEBMHp9fDw%3D&user[email]=asd%40fasd.org&user[password]=321&user[password_confirmation]=1233&commit=Sign+up" 
```

不幸的是，这不起作用 - 我收到“错误请求”消息。关于这个例子，我也有几个问题。什么是authentity_token？我如何得到一个？我猜这不是设计令牌身份验证，因为此时用户甚至无法拥有一个。

此外，在成功登录后，我想将“注册成功”消息与生成的设计身份验证令牌捆绑在一起。所以我想我必须以某种方式扩展设计现有的注册控制器。

非常感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T12:08:53.133

设计已经有了所有这些设置。根据您的注册路径，我推断您将 Devise 安装到`http://localhost:3000/users`. Devise 包括所有需要的控制器和视图，包括登录表单、注册表单、电子邮件确认表单和密码重置表单。

GET`http://localhost:3000/users/sign_up`实际上是一种供用户注册的表单。该页面上的表单将 POST 到`http://localhost:3000/users/`，然后转到 Devise 的注册控制器的创建操作。

假设 已经没有操作/视图`/users/sign_up`，注册表单应该在那里，去检查它是否在那里（假设您`devise_for`在文件中正确设置`routes.rb`）。

# wordpress - 加载评论之前的 Wordpress add_action

> ID：12317587
> 
> 赞同：0
> 
> 时间：2012-09-07T11:52:58.697
> 
> 标签：wordpress, plugins

我正在尝试编写一个插件，该插件应在加载评论之前或加载页面内容之后加载。我正在尝试使用`add_action('pre_get_comments', 'my_function');`，但它不起作用。

# javascript - 将 GET 请求（HTML 字符串）转换为完整的 DOM 对象

> ID：12317588
> 
> 赞同：2
> 
> 时间：2012-09-07T11:52:59.723
> 
> 标签：javascript, jquery, dom

我正在编写一个 JavaScript 脚本，它会定期检查页面中的新元素，即 DOM 树更新。这些特定元素之一包含指向其他页面的超链接。我的目标是执行该页面的 GET 并将结果转换为 DOM 对象，以触发该页面中特定元素的特定事件。我可以做到这一点`var newPage = window.open(hyperlink);`，然后可以通过`newPage.document.getElementById('elementId');`. 但是，脚本会遍历许多超链接，并且将它们全部打开效率不高。

那么，有没有什么方法可以有效地操纵整个页面的对象，即不打开它（例如，`$.get(hyperlink, function(page) { // convert page to DOM });`）？

感谢任何答案，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:00:04.217

也许你采取了错误的方法。与其将页面转换为 DOM，不如简单地对链接进行正则表达式搜索。这显然是利用页面内容的最有效方式。然而，诚然，正确地做也是一件痛苦的事，而且它没有考虑到由 javascript 添加的链接。

这完全取决于您的范围。如果您告诉我您正在寻找一种有效的方法来完成此任务，那么我会提供此解决方案。否则，无论您以哪种方式切片，都没有将整个页面解析为 DOM 的“快速”方式。

[这将使您开始使用正则表达式来提取 html 链接。](http://regexlib.com/REDetails.aspx?regexp_id=903)

# eclipse - Java JDK 版本 Eclipse Blackboard 9.1 java.lang.UnsupportedClassVersionError

> ID：12317590
> 
> 赞同：0
> 
> 时间：2012-09-07T11:53:12.047
> 
> 标签：eclipse, java, blackboard

我已经成功实施并部署了一个 hello world 项目，添加了一个管理示例管理工具。我必须在 eclipse 中的 3 个位置（项目、ant 和一般 eclipse java 设置）中将所有版本的 JRE/JDK 更正为 1.6 之后才这样做。现在我正在尝试编译一个由外部承包商（以 .war 格式工作）提供给我们的项目。我想自己扩展项目。该项目中有轴罐等，并引用了黑板罐，虽然它在 Eclipse 中编译，但在部署到 Bb 并运行它时，我得到：java.lang.UnsupportedClassVersionError 我试图在 JDK 1.7 中编译，我也得到一个错误。它似乎与版本有关 - 我应该为 Bb 9.1 使用哪个 JDK 版本？任何人都可以解释一下吗？完整错误：com/streaming/SearchManager

```
java.lang.UnsupportedClassVersionError: com/streaming/SearchManager
    at org.apache.jsp.helix.resultsList_jsp._jspService(resultsList_jsp.java:129)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at sun.reflect.GeneratedMethodAccessor1109.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:283)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at blackboard.platform.servlet.B2ContextFilter.doFilter(B2ContextFilter.java:121)
    at sun.reflect.GeneratedMethodAccessor1114.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at blackboard.platform.servlet.ContentTypeFilter.doFilter(ContentTypeFilter.java:57)
    at sun.reflect.GeneratedMethodAccessor1112.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at blackboard.platform.servlet.XssServletFilter.doFilter(XssServletFilter.java:139)
    at sun.reflect.GeneratedMethodAccessor1111.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at blackboard.platform.servlet.RequestSessionFilter.doFilter(RequestSessionFilter.java:123)
    at sun.reflect.GeneratedMethodAccessor1110.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:554)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:647)
    at blackboard.tomcat.valves.LoggingRemoteIpValve.invoke(LoggingRemoteIpValve.java:44)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:48:22.593

运行的 JDK 版本会因本地设置而异。在 Blackboard Learn 9.1 Service Pack 10（2012 年 10 月发行版）之后，系统应该运行 JDK 1.7 版本。在此之前，它们可能在 JDK1.6 下运行，尽管有些在 1.7 下运行。您应该联系您的本地管理员以确定 JDK 的路径并获取使用的版本。JDK 的路径存储在 bb-config.properies 文件中。

您的 jsp 文件中的问题可能是它引用了您的 webapps/WEB-INF/lib（本地构建块库）中的一个库，该库与目标 Blackboard 系统上的 JDK 版本不兼容。看来您的 jsp 正在黑板服务器上运行时编译，并且由于第三方库的兼容性而失败。如果你想在war文件中预编译jsp你必须使用jspc作为一个ant任务。

# forms - Windows Phone 开发。将项目添加到 Pan-Page 不起作用

> ID：12317591
> 
> 赞同：0
> 
> 时间：2012-09-07T11:53:24.847
> 
> 标签：forms, xaml, windows-phone, panoramas

我有

```
 <!--Panorama item one-->
   <controls:PanoramaItem Header="Search">

   </controls:PanoramaItem> 
```

而我只想做的就是将一些文本框等放入其中。但是，当我放下一个文本框（选择全景项目一格）时，Visual Studio 会将这些表单项添加到全景页面之外，位于 XAML 底部的某个位置。

如何将表单添加到我决定使用它们的全景项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:39:11.597

一个网格。我需要添加一个网格，将我的所有元素存储在里面。

# iphone - 从 iPhone 应用程序打开 Safari 的指南

> ID：12317595
> 
> 赞同：2
> 
> 时间：2012-09-07T11:53:49.730
> 
> 标签：iphone, user-interface, safari, design-guidelines, ui-guidelines

是否有关于从 iPhone 应用程序在 Safari 中打开网站的任何可用性指南？

示例：我的应用程序中有一个按钮，点击该按钮时会将用户带到 safari 中的网站 - 这会关闭我的应用程序并打开 safari。

对我来说，在没有警告用户他们即将退出应用程序并打开 safari 的情况下这样做有点糟糕。

是否有任何用户指南说明应如何处理？即你应该提示用户并让他们知道吗？

我一直没能找到官方指南

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:01:17.133

```
-(void)openSafari
{
   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"test"
                       message:@"this will open safari, you sure?" 
                       delegate:self cancelButtonTitle:@"no" 
                       otherButtonTitles:@"yes", nil];
              [alert show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"yes"]){
    [[UIApplication sharedApplication] openURL:
    [NSURL URLWithString:@"http://www.google.com"]];
  }
} 
```

在你的头文件中。

```
 @class YourClass : SuperClass<UIAlertViewDelegate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:36:59.587

如果您在 UIWebView 上加载网络而不是打开 safari（就像 twitter、facebook 和许多其他应用程序一样），那会更好，因为用户不会离开您的应用程序

# javascript - 如何在 mvc 4 中不使用模型进行客户端验证

> ID：12317601
> 
> 赞同：0
> 
> 时间：2012-09-07T11:54:04.750
> 
> 标签：javascript, jquery, ajax

我正在开发一个 ASP.NET MVC 4 应用程序，在该应用程序中我没有使用视图模型并且不想使用它们。对于模型，我使用从实体生成的类。请告诉我有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:01:05.043

您将需要指定验证属性（如果您希望 ASP 为您处理验证。）您可以使用部分类来扩展您的模型，然后添加如下属性：

```
//this is the model (generated from the entities)  
   [MetadataType(typeof(User_Validation))]

    public partial class User
    {

    } 
```

然后指定验证属性。

```
 public class User_Validation
    {
        [Required(ErrorMessage="The Full Name is required")]
        public string FullName{ get; set; }

        [Required(ErrorMessage="The Cellphone Number  is required")]
        public string CellNumber { get; set; }

    } 
```

或者，您可以使用 jQuery 或您选择的其他客户端插件自己处理所有验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:02:42.047

使用 jQuery 验证属性装饰表单元素（通常由 MVC 在读取模型的 DataAnnotations 时自动完成）。

从文档中，这就是您将如何进行简单的文本框验证：

`<input id="cname" name="name" size="25" class="required" minlength="2" />`

然后，

`$(document).ready(function(){ $("#commentForm").validate(); });`

有关更多信息，请参阅[jQuery 验证文档](http://docs.jquery.com/Plugins/Validation)

# javascript - JavaScript 音频播放器，需要在进度条上搜索

> ID：12317602
> 
> 赞同：1
> 
> 时间：2012-09-07T11:54:06.900
> 
> 标签：javascript, audio, seekbar

我有一些代码，其中进度条链接到音频支付；但我还没有弄清楚如何使用进度条上的鼠标光标进行搜索。有没有办法在旧版 JavaScript 中做到这一点？

JavaScript：

```
function play() {
    document.getElementById('player').play();
}

function pause() {
    document.getElementById('player').pause();
}
function updateProgress() {
    var player = document.getElementById('player');
    var progressbar = document.getElementById('seekbar');
    progressbar.value = (player .currentTime / player .duration);
}; 
```

HTML：

```
<audio ontimeupdate="updateProgress()" src="music/fiji/lladep/apathy.mp3" id="player"></audio>  
<button onClick="play()">Play</button>
<button onClick="pause()">Pause</button>
<progress id="seekbar" value="0" max="1"></progress> 
```

# java - Google App Engine 上的推送队列与拉取队列

> ID：12317603
> 
> 赞同：23
> 
> 时间：2012-09-07T11:54:07.053
> 
> 标签：java, api, google-app-engine, task-queue, worker-thread

到目前为止，没有人（甚至 GAE 文档）能够给我一个非常清楚的描述**推送**队列和**拉取**队列之间的区别。

我的*理解*是，Task Queue API 允许您定义可以将工作排入队列的任务队列。不知何故，这与 GAE 的自动缩放功能一起使用，因此您无需显式管理从这些队列中消耗任务的工作线程的数量：GAE 只是为您完成。

但是我在任何地方都找不到关于推送和拉取队列之间差异的“国王英语”描述。什么是“推送队列”推送？什么是“拉队列”拉？他们都在里面配置`queues.xml`吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-07T12:29:47.033

在**拉取队列**中，您将任务排入队列并且您的代码需要拉取它们，您通过从队列中租用任务并删除任务来拉取它们。如果您不删除任务并且租用时间到期，系统会将任务返回到队列中。

您可以使用拉队列（例如）来聚合可以一起处理的多个工作单元。另一个示例：排队任务将由外部机器（如 EC2 或 gCompute）拉取，以便以 AppEngine 无法处理的方式处理任务。

在**推送队列**中，您将任务排入队列，但 AppEngine 会将它们出列并在任务指定的处理程序上运行它们。您可以控制任务处理速率，如何控制任务执行失败，AppEngine 将决定使用多少个实例（线程）来进行处理。

# java - 如何定义返回参数？

> ID：12317604
> 
> 赞同：3
> 
> 时间：2012-09-07T11:54:11.377
> 
> 标签：java, methods, return, abap

我习惯了 JAVA，因此在 ABAP 中编写此代码时遇到问题。

我用两个参数调用一个方法。它应该返回一个数字，所以我可以保存它。

我想要的是

```
int result = generate_num(40,5);

int generate_num(int thisNum, int newDigit){
    return thisNum * 10 + newDigit;
} 
```

到目前为止，我在 ABAP 中尝试过这个。

//声明的方法

```
methods GENERATE_NUM
importing
  !thisNum type I
  !NEWDIGIT type DIGIT_NUMBER_VALUE. 
```

//调用方法

```
CALL METHOD me->Generate_NUM
   EXPORTING
       thisNUm = 40
       newDigit = 5. 
```

//方法本身

```
METHOD GENERATE_NUM.

DATA: newNum type i.

  If thisnum < 0.
    newNum = thisnum * 10 - newdigit.
  Else.
    newNum = thisnum * 10 + newdigit.
  ENDIF.

  RETURNING VALUE(newNum).   

ENDMETHOD. 
```

但是我迷失在这段代码中，不知道如何返回一个值以及如何将它保存在另一个变量中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T12:07:37.537

这就是您声明带有返回参数的方法的方式：

```
METHODS generate_num 
  IMPORTING
    thisNum TYPE i   
    newdigit TYPE digit_number_value
  RETURNING
    value(result) TYPE i. 
```

请注意，一个方法只能有一个`RETURNING`参数，并且该参数必须始终按值传递。

在方法实现中，通过修改声明为返回参数的局部变量来设置返回值：

```
METHOD generate_num.

  IF thisnum < 0.
    result = thisnum * 10 - newdigit.
  ELSE.
    result = thisnum * 10 + newdigit.
  ENDIF.     

ENDMETHOD. 
```

返回值将是`result`方法返回时的任何值。就像`EXPORTING`参数一样。

当您调用一个方法时，您可以使用经典的 CALL 语法，这更像是经验丰富的 ABAP 开发人员习惯使用的语法：

```
DATA lv_foo TYPE i. " the variable you want to store the return value in

CALL METHOD me->generate_num
   EXPORTING
       thisNUm = 40
       newDigit = 5
   RECEIVING
       result = lv_foo. 
```

或者更类似于您可能习惯的 Java 语法的函数式语法：

```
lv_foo = me->generate_num( thisNUm = 40 newDigit = 5). 
```

如果该方法不仅具有导入参数，还具有更改或导出参数，则语法如下所示：

```
lv_foo = me->generate_num( 
   EXPORTING thisNUm = 40 
             newDigit = 5
   CHANGING cv_bar = lv_bar ). 
```

# c# - 传递页面的查询字符串时未触发 AjaxFileUpload1_UploadComplete 事件

> ID：12317606
> 
> 赞同：2
> 
> 时间：2012-09-07T11:54:30.273
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit

我正在使用`AjaxFileUpload1`Ajax 控制工具包。

我将查询字符串传递到我正在使用`AjaxFileUpload1`控件的页面

（例如页面 WebForm1.aspx?Key=22）

但这里的问题是，如果我当时将查询字符串传递给 WebForm1.aspx 页面

```
protected void AjaxFileUpload1_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e) 
```

此事件未触发

任何人都可以帮我解决这个问题..

在此先感谢...问候， **普拉萨德**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:45:34.723

## 解决了！

仔细谷歌搜索，我发现[AJAX Control Toolkit Release Notes - September 2012 Release](http://ajaxcontroltoolkit.codeplex.com/releases/view/94873)说：

> 最后，我们整合了社区贡献的几个 Pull Requests：
> 
> 解决了阻止 AjaxFileUpload 控件处理需要查询字符串变量的页面的问题。

所以使用最新版本的 Ajax Control Toolkit 解决了这个问题。

# maven-3 - Maven：Maven 属性值的概述

> ID：12317609
> 
> 赞同：44
> 
> 时间：2012-09-07T11:54:47.837
> 
> 标签：maven-3, maven-plugin

我想找出适用于某些 Maven 项目的*所有Maven 属性的值。*
`mvn help:system`列出 OS 环境变量和 JVM 系统属性，但没有 Maven 属性。
`mvn help:evaluate`只能在交互模式下工作，这意味着我必须键入一个 Maven 属性（例如`${project.build.outputDirectory}`）来获取该属性的值。

我正在寻找一种获取所有 Maven 属性及其值的完整列表的方法。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-12T13:28:37.220

作为一种解决方法，将其添加到`<plugins> ... </plugins>`项目中的部分`pom.xml`：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-antrun-plugin</artifactId>
  <version>1.7</version>
  <executions>
    <execution>
      <phase>validate</phase>
      <goals>
        <goal>run</goal>
      </goals>
      <configuration>
        <tasks>
          <echoproperties />
        </tasks>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

现在执行`mvn validate`.
在控制台上，以 为前缀`[echoproperties]`，将显示系统属性的完整列表，包括 Maven 设置的属性，例如`project.build.outputDirectory`、`basedir`和`settings.localRepository`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-06T14:30:31.370

不确定是否有帮助，但我在尝试做同样的事情时发现了这一点：

```
mvn com.github.ekryd.echo-maven-plugin:echo-maven-plugin:echo -Decho.message='${project.build.testOutputDirectory}' 
```

从[这里](https://stackoverflow.com/questions/15763915/how-to-echo-in-maven-without-antrun-plugin)。

将以下内容添加到`${user.home}/.m2/settings.xml`：

```
 <pluginGroups>
    <pluginGroup>com.github.ekryd.echo-maven-plugin</pluginGroup>
  </pluginGroups> 
```

该命令可以缩短为：

```
mvn echo:echo -Decho.message='${project.build.testOutputDirectory}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:19:44.913

我不知道如何“正式”获得它们，但这是一种解决方法。添加`maven-antrun-plugin`到您的项目并运行`mvn test -X`. 该插件将显示从 Maven 传递给它的所有属性。这份清单对我来说看起来很完整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-12T11:03:31.127

maven-help-plugin 做你想做的事，只需调用它`-Dexpression=project.properties`就会打印出有效 pom 的属性标签。

**tl;博士**

```
mvn help:evaluate -Dexpression=project.properties 
```

当您只想要属性输出而不是 Maven 输出时的奖励积分

```
mvn help:evaluate -Dexpression=project.properties -q -DforceStdout 
```

或使用显式版本，因为`-DforceStdout`从版本 3.1.0 开始工作

```
mvn org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate -Dexpression=project.properties -q -DforceStdout 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-02T17:16:31.077

实际上 project.build.outputDirectory 在那里，但您需要在“编译”阶段执行，而不是在“验证”阶段执行。我想哪些属性可用也取决于特定插件的执行目标的当前阶段，在本例中为“maven-antrun-plugin”。

```
 <!-- Ant Run Plugin for debugging pom.xml and calling ant tasks -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>${ant.plugin.version}</version>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <tasks>
                            <echoproperties/>
                        </tasks>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-10-28T16:29:31.917

有同样的问题。通过 maven 更改了 findbugs 配置中的 timeout 和 maxheap。

下面为我​​修复了它：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>findbugs-maven-plugin</artifactId>
            <version>3.0.2</version>
            <configuration>
                <maxHeap>2048</maxHeap>
                <timeout>1800000</timeout>
            </configuration>
        </plugin> 
```

# android - 智能节俭的HTML解析（无需下载完整的页面源）？

> ID：12317619
> 
> 赞同：0
> 
> 时间：2012-09-07T11:55:19.847
> 
> 标签：android, html, html-parsing

我需要在我的应用程序中解析一些网页，但我有一个大问题 - 数据。我要解析的页面大小在 400-500kb 之间，具体取决于时间。我需要每天解析几次 - 取决于用户请求等，但标准应该是每天 10-20 次。但是，我担心数据 - 如果我每天解析 10-20 次，则在 1 个月内它的 150-300mb (10 x 30 x 0,5mb)。这太多了，因为很多人都有 100mb 的限制。甚至 500mb 的限制，我的应用程序不能吃一半。

我只需要非常小的网页数据，有没有办法下载例如网页源的一部分，或者只下载一些特定的标签，或者下载压缩的，或者任何其他类型的下载，而不需要消耗数百 mb月？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:00:36.143

这样做可能需要网络服务器的一些合作，如果您从不受您控制的服务器下载页面，那么这可能是不可能的。

要记住的一件事是，现代 Web 浏览器和服务器通常 gzip 基于文本的数据，因此实际传输的数据量将大大小于未压缩的页面大小（大致了解传输的大小将是，尝试使用 zip 实用程序来压缩原始 HTML）。

可能有帮助的另一件事是[HTTP Range 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)，您的服务器可能支持也可能不支持 - 这使您可以请求由字节范围指定的资源的特定部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:01:57.610

我能想到的最好方法是设置一个代理服务器，它会定期下载页面，并提取您需要的数据，以更小、更合适的格式将其公开给您的应用程序。

例如，您可以使用 Linux 服务器之类的命令行工具`wget`，`curl`然后使用脚本 (php/perl/python/ruby/bash) 解析数据并重新格式化。然后，您将使用 Web 服务器 (apache/lighttpd) 提供内容。

`node.js`就个人而言，如果您有自己的服务器来完成这项任务，我会在.

# php - 如何从图像中获取特定颜色范围的位置？

> ID：12317620
> 
> 赞同：4
> 
> 时间：2012-09-07T11:55:22.270
> 
> 标签：php, imagemagick, gd

![圣诞树](../Images/6c9449bca6ddc53916a7104eaa5a0bcf.png)

我有这张圣诞树的图像，树枝上有不同的圆圈。你可以看到圆圈有不同的颜色：绿色、红色、黄色等。

我必须使用 PHP 找到圆圈的位置。

PHP GD库可以吗？

如果可能，请建议我如何计算圆圈的 x 和 y 位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:35:23.740

使用 GD 库是不可能的，但使用 imagemagick 是不可能的。

[通过边缘检测](http://en.wikipedia.org/wiki/Edge_detection)可以找到颜色变化及其在图像中的位置。

[在这篇博客文章](http://www.emanueleferonato.com/2010/10/19/image-edge-detection-algorithm-php-version/)中有一个很好的关于 php 的总结。

没有通用脚本我可以给你，因为找到正确的算法四你的源图像是一个迭代过程。

首先，您将尝试从源图像中过滤掉树的深绿色，然后您可以运行边缘检测以获取灰度图像中圆圈的边缘。

一旦你在那里，你需要某种圆形检测。谷歌发现了这个有趣[的线程](http://ask.metafilter.com/38544/circle-detection-algorithm)

希望这有助于将您推向正确的方向。

# wordpress - Wordpress 主页取决于用户 IP 位置

> ID：12317631
> 
> 赞同：1
> 
> 时间：2012-09-07T11:56:27.227
> 
> 标签：wordpress, geolocation, ip, subdomain, ip-geolocation

我目前在 WordPress 中运行多站点，并且我希望用户在访问 domain.com 时被定向到 city-x.domain.com 或 city-y.domain.com 取决于他们更接近哪个在他们的大致位置（IP 地址足够近）。这可能吗，如果可以，我将把代码放在哪里？

# c++ - 围绕 const 和非常量指针的统一包装器

> ID：12317635
> 
> 赞同：3
> 
> 时间：2012-09-07T11:56:37.413
> 
> 标签：c++

我在我的 C++ 项目中使用 GNU 科学库。为了方便起见，我想透明地包装`gsl_vector*`在一个 C++ 类中（以添加一堆特定于域的函数并简化接口）。但我对如何处理感到困惑`const gsl_vector*`。让我解释。让我从这个简约的包装器开始。

```
class Vector {
  gsl_vector* vector_;
public:
  Vector(gsl_vector* vector): vector_(vector) {}
  double& operator()(int i) {
    return *gsl_vector_ptr(vector_, i);
  }
}; 
```

进一步假设我有两个功能。一是定义如下：

```
int f(Vector& x) {
  \\ do some math, e.g. x(0) = 0.0;
  return 0;
} 
```

另一种是必须使用 GSL 类型的回调函数，定义如下：

```
int gsl_f(gsl_vector* x) {
  Vector xx(x);
  return f(xx);
} 
```

这工作正常。现在，假设回调有一个常量签名：

```
int gsl_f(const gsl_vector* x); 
```

然后我可以相应地重新定义我的`Vector`类和我的`f`功能：

```
class Vector {
  const gsl_vector* vector_;
public:
  Vector(const gsl_vector* vector): vector_(vector) {}
  const double& operator()(int i) const {
    return *gsl_vector_const_ptr(vector_, i);
  }
};

int f(const Vector& x) {
  \\ do some math 
  return 0;
} 
```

也有效。现在，我希望我的包装类适合这两种情况。例如，我希望能够执行以下操作，同时*保持 const 的安全性*：

```
int f(const Vector& x, Vector& y) {
  \\ do some math 
  return 0;
}

int gsl_f(const gsl_vector* x, gsl_vector* y) {
  Vector yy(y);
  return f(x, yy);
} 
```

我可以通过使用`Vector`带有两个指针（const 和 non-const）的 a 来做到这一点，并记住它是从 const 成员还是非常量成员初始化的。我的问题是，我可以在没有运行时检查的情况下做到这一点吗？毕竟，所有信息在编译时就在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:05:40.563

结合这两个类应该可以按预期工作，您尝试过吗？

```
class Vector {
  gsl_vector* vector_;
public:
  Vector(gsl_vector* vector): vector_(vector) {}

  const double& operator()(int i) const {
    return *gsl_vector_ptr(vector_, i);
  }
  double& operator()(int i) {
    return *gsl_vector_ptr(vector_, i);
  }

  operator const_Vector()
  { 
    return const_Vector(vector_);
  }

};

class const_Vector {
  const gsl_vector* vector_;
public:
  const_Vector(const gsl_vector* vector): vector_(vector) {}

  const double& operator()(int i) const {
    return *gsl_vector_ptr(vector_, i);
  }
}; 
```

函数签名需要这样看：

```
int f(const_Vector& x, Vector& y) {
  \\ do some math 
  return 0;
} 
```

这遵循类似迭代器和 const_iterator 的方案。

也许你有一种情况，这是行不通的，。您应该发布这种情况，我们可以尝试解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:15:23.263

建议（不是很好，但应该可行）：

```
class Vector { 
  gsl_vector* vector_;
  const gsl_vector* const_vector_; 
public: 
  Vector(const gsl_vector* vector): vector_(nullptr), const_vector_(vector) {} 
  Vector(gsl_vector* vector): vector_(vector), const_vector_(vector) {}
  const double& operator()(int i) const { 
    return *gsl_vector_ptr(const_vector_, i); 
  } 
  double& operator () (int i) {
    return *gsl_vector_ptr(vector_, i);
  }
}; 
```

第二种可能：

```
class Vector { 
private:
  gsl_vector* vector_;

  Vector(gsl_vector* vector): vector_(vector) {}

public:
  static const Vector* Create (const gsl_vector* vector) {
     return new Vector (const_cast<Vector *> vector);
  }

  static Vector* Create (gsl_vector* vector) {
     return new Vector (vector);
  }

  const double& operator()(int i) const { 
    return *gsl_vector_ptr(vector_, i); 
  } 
  double& operator () (int i) {
    return *gsl_vector_ptr(vector_, i);
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:31:21.127

您还可以使用某种带有数据指针的继承。进一步 - 模板可用于创建重载函数，根据输入指针类型返回一个或第二个版本。

```
class JSONChannelFullConfigConst:
        public JSONObjectRenderer {
public:
    JSONChannelFullConfigConst(const uint8_t * channel_id,
                               const sensors_single_channel_config_t * cfg) :
                    j_channel_id(channel_id),
                    j_cfg(cfg) {

    }

private:
    const uint8_t * const j_channel_id;
    const sensors_single_channel_config_t * const j_cfg;
    void renderFields(rlf::UcOstreamBase& os) const;
    public:
    uint8_t getId() const {
        return *j_channel_id;
    }
};

class JSONChannelFullConfig:
        public JSONChannelFullConfigConst,
        public JSONObjectParser {
public:
    JSONChannelFullConfig(uint8_t * channel_id, sensors_single_channel_config_t * cfg) :
                    JSONChannelFullConfigConst(channel_id, cfg),
                    j_channel_id(channel_id),
                    j_cfg(cfg) {

    }
    void setId(uint8_t id) {
        *j_channel_id = id;
    }
private:
    uint8_t * const j_channel_id;
    sensors_single_channel_config_t * const j_cfg;

    virtual bool parseNameValuePair(const char * name, rlf::UcIstream & value);
}; 
```

# python - 如何在连接列上查询具有唯一值的行？

> ID：12317641
> 
> 赞同：5
> 
> 时间：2012-09-07T11:57:19.613
> 
> 标签：python, sqlalchemy

我试图让我的 popular_query 子查询删除 dupe Place.id，但它不会删除它。这是下面的代码。我尝试使用 distinct 但它不遵守 order_by 规则。

```
SimilarPost = aliased(Post)
SimilarPostOption = aliased(PostOption)
popular_query = (db.session.query(Post, func.count(SimilarPost.id)).
         join(Place, Place.id == Post.place_id).
         join(PostOption, PostOption.post_id == Post.id).
         outerjoin(SimilarPostOption, PostOption.val == SimilarPostOption.val).
         join(SimilarPost,SimilarPost.id == SimilarPostOption.post_id).
         filter(Place.id == Post.place_id).
         filter(self.radius_cond()).
         group_by(Post.id).
         group_by(Place.id).
         order_by(desc(func.count(SimilarPost.id))).
         order_by(desc(Post.timestamp))
         ).subquery().select()

all_posts = db.session.query(Post).select_from(filter.pick()).all() 
```

我做了一个测试打印输出

```
print [x.place.name for x in all_posts]

[u'placeB', u'placeB', u'placeB', u'placeC', u'placeC', u'placeA'] 
```

我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T23:36:46.377

这应该可以得到你想要的：

```
SimilarPost = aliased(Post)
SimilarPostOption = aliased(PostOption)
post_popularity = (db.session.query(func.count(SimilarPost.id))
        .select_from(PostOption)
        .filter(PostOption.post_id == Post.id)
        .correlate(Post)
        .outerjoin(SimilarPostOption, PostOption.val == SimilarPostOption.val)
        .join(SimilarPost, sql.and_(
                SimilarPost.id == SimilarPostOption.post_id,
                SimilarPost.place_id == Post.place_id)
        )
        .as_scalar())
popular_post_id = (db.session.query(Post.id)
        .filter(Post.place_id == Place.id)
        .correlate(Place)
        .order_by(post_popularity.desc())
        .limit(1)
        .as_scalar())

deduped_posts = (db.session.query(Post, post_popularity)
        .join(Place)
        .filter(Post.id == popular_post_id)
        .order_by(post_popularity.desc(), Post.timestamp.desc())
        .all()) 
```

我无法谈论大型数据集的运行时性能，并且可能有更好的解决方案，但这就是我设法从相当多的来源（[MySQL JOIN with LIMIT 1 onjoined table](https://stackoverflow.com/questions/6879391/mysql-join-with-limit-1-on-joined-table)，[SQLAlchemy - 在 WHERE 中的子查询子句](https://stackoverflow.com/questions/6206600/sqlalchemy-subquery-in-a-where-clause)，[SQLAlchemy 查询文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html)）。最大的复杂因素是您显然需要`as_scalar`将子查询嵌套在正确的位置，因此不能同时返回 Post id 和来自同一子查询的计数。

FWIW，这是一个庞然大物，我同意 user1675804 的观点，这么深的 SQLAlchemy 代码很难理解，也不是很容易维护。您应该认真研究任何可用的低技术解决方案，例如向数据库添加列或在 python 代码中做更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T21:38:00.433

我不想在这里听起来像坏人，但是...在我看来，您解决该问题的方法似乎远非最佳...如果您使用的是postgresql，则可以使用WITH简化整个事情...但是一个更好的方法考虑到我的假设，即这些帖子的阅读频率将比更新的频率高得多，是向您的表中添加一些列，这些列由插入/更新到其他表时的触发器更新，至少如果性能可能会成为问题这是我要使用的解决方案

对sqlalchemy不是很熟悉，所以不能用清晰的代码为你写，但我能想出的唯一其他解决方案至少使用一个子查询来为group by中的每一列从order by中选择事物，并且这将大大增加您已经很慢的查询

# android - 使线性布局水平滚动

> ID：12317648
> 
> 赞同：9
> 
> 时间：2012-09-07T11:58:02.127
> 
> 标签：android, android-layout, android-scrollview

如何使线性布局水平滚动？我只是在 myscrollview 中包装了一个线性布局，我也做了我的 XML 文件中需要的操作，但是对于超过线性布局大小的内容，它仍然无法水平滚动。这是我的 XML：

```
 <ScrollView 
        android:id="@+id/scroller"
        android:layout_marginTop="16dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/popup"
        android:fadingEdgeLength="5dip"
        android:scrollbars="horizontal"
        android:overScrollMode="always" 
        android:isScrollContainer="true" 
        android:scrollbarAlwaysDrawHorizontalTrack="true"
        >

        <LinearLayout
            android:id="@+id/tracks"
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:padding="10dip"/>

    </ScrollView >

    <ImageView
        android:id="@+id/arrow_up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/arrow_up" />

    <ImageView
        android:id="@+id/arrow_down"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/scroller"
        android:layout_marginTop="-4dip"
        android:src="@drawable/arrow_down" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:02:17.787

请使用[Horizo​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html "水平滚动视图")

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T12:02:47.273

是否尝试使用`<HorizontalScrollView ></HorizontalScrollView>`标签？只需在以下位置尝试上面的标签

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T12:03:23.153

检查此链接[http://android.okhelp.cz/horizo​​ntalscrollview-scrollview-horizo​​ntal-vertical-android-xml-example/](http://android.okhelp.cz/horizontalscrollview-scrollview-horizontal-vertical-android-xml-example/)

```
 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.ImageButton;

  public class HorizontalscroolActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ImageButton btn11 = (ImageButton) findViewById(R.id.imageButton1);

    ImageButton btn2 = (ImageButton) findViewById(R.id.imageButton2);

    ImageButton btn3 = (ImageButton) findViewById(R.id.imageButton3);

    ImageButton btn4 = (ImageButton) findViewById(R.id.imageButton4);

}

  } 
```

在 XML 文件中

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">
            <ImageButton
                android:id="@+id/imageButton1"
                android:layout_width="wrap_content"
                android:layout_height="100dp"
                android:src="@drawable/pic7"
                android:text="image1" />
            <TextView
                android:id="@+id/text"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Textview1" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="fill_parent"
            android:orientation="vertical"
            android:layout_height="fill_parent">
            <ImageButton
                android:text="image2"
                android:id="@+id/imageButton2"
                android:layout_width="wrap_content"
                android:layout_height="100dp"
                android:src="@drawable/pic2" />
            <TextView
                android:id="@+id/text"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Textview2" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="fill_parent"
            android:orientation="vertical"
            android:layout_height="fill_parent">
            <ImageButton
                android:text="image3"
                android:id="@+id/imageButton3"
                android:layout_width="wrap_content"
                android:layout_height="100dp"
                android:src="@drawable/pic7" />
            <TextView
                android:id="@+id/text"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Textview3" />
        </LinearLayout>
        <LinearLayout
            android:layout_width="fill_parent"
            android:orientation="vertical"
            android:layout_height="fill_parent">
            <ImageButton
                android:text="image4"
                android:id="@+id/imageButton4"
                android:layout_width="wrap_content"
                android:layout_height="100dp"
                android:src="@drawable/pic5" />
            <TextView
                android:id="@+id/text4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Textview4" />
        </LinearLayout>
    </LinearLayout>
</HorizontalScrollView> 
```

# android - 如果应用程序崩溃或手动终止，如何清理数据？

> ID：12317651
> 
> 赞同：-3
> 
> 时间：2012-09-07T11:58:06.997
> 
> 标签：android, sqlite, crash, sharedpreferences, terminate

当我执行最后一个活动时，一个疑问来了。我的应用程序存储并从 DB 和 SharedPreferences 获取一些值，那么，如果我的应用程序崩溃或终止，是否可以清理它们？

终止我的意思是像进入“设备设置”并手动终止应用程序（或以其他方式）的人。也许通过背景调查服务？

编辑 - 由我自己解决

只需在 Application 的 onCreate 中处理 DefaultUncaughtExceptionHandler：

```
Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {
@Override
public void uncaughtException(Thread thread, final Throwable ex) {
  // here i start a new Activity in which clean and handle what i need)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:48:31.153

我想最好的方法是在您的应用首次加载时检查“垃圾”数据。如果您的应用程序崩溃或用户强制关闭它，您的应用程序将不会收到任何其他通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:06:30.537

如果您手动终止应用程序，那么垃圾收集器将删除所有临时存储的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:41:13.277

卸载应用程序将删除所有数据库/文件等。

```
adb uninstall <package name> 
```

# .net - 为什么升级到 razor 2 / mvc 4 后，我的 razor 视图会抱怨“} 预期”？

> ID：12317655
> 
> 赞同：20
> 
> 时间：2012-09-07T11:58:30.890
> 
> 标签：.net, asp.net-mvc, razor, asp.net-mvc-4

我有一个现有的 razor 1 / mvc 3 视图，有一些嵌套的`if`- 非常简单，但是在升级到 razor 2 / mvc 4 后，它在运行时抱怨并编译（`BuildViews`）关于`} expected`. 它曾经工作得很好。

*   我检查了所有元素是否格式正确/已关闭
*   我检查了所有`{`/`}`是否平衡 - 这不是文件结尾问题

有什么问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-07T11:58:30.890

在 razor 2 / mvc 4 升级中修复了许多遗留的 razor 奇怪问题；一个有趣的问题是，在 razor 1 中，以下内容是合法的（在代码区域中）：

```
string foo = @Some.Complex.Expression; 
```

注意`@`有多余的和不正确的，但是剃须刀1没有抱怨。但是，razor 2 比较挑剔，比较糊涂，`} expected`报错。此行应替换为：

```
string foo = Some.Complex.Expression; 
```

这有点微妙，因为发生的错误与大括号（/ ）*无关*，并且可能与报告的行相距几行。`{``}`

# objective-c - 几个 UIViewController 和 OpenGLView (Cocos2D) 之上的透明 UITableView

> ID：12317659
> 
> 赞同：4
> 
> 时间：2012-09-07T11:58:42.627
> 
> 标签：objective-c, uitableview, uiviewcontroller, cocos2d-iphone, uicolor

这是我的代码：

```
// View Controller with navigation bar
InAppPurchaseViewController *purchaseViewController = [[InAppPurchaseViewController alloc] init];
purchaseViewController.title = @"Magasin";
purchaseViewController.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissViewController:)] autorelease];
UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:purchaseViewController] autorelease];

// Add `purchaseViewcontroller` TO container AND container ON openGLView
UIViewController *container = [[UIViewController alloc] init];
[container setView:[[CCDirector sharedDirector] openGLView]];
[container setModalTransitionStyle: UIModalTransitionStyleCoverVertical];
[container presentViewController:navController animated:YES completion:nil]; 
```

在`UITableView`purchaseViewController 中。

我正在考虑使用`[UIColor clearColor]`，但无论我使用它，我的`UITableView`. 单元格变得不可选择和不可滑动（除了单元格中的元素）

编辑：appdelegate

这是.h

```
@class AudioEngine;
@class RootViewController;
@class Score;

@interface AppDelegate : NSObject <UIApplicationDelegate, GameCenterManagerDelegate>

@property int CurrentPackage;
@property int CurrentScore;
@property int CurrentHighScore;
@property BOOL SoundShouldPlay;
@property BOOL PauseScreenUp;
@property(nonatomic, retain) AudioEngine *CustomAudioEngine;
@property(nonatomic, retain) GameCenterManager *CustomGameCenterManager;
@property(nonatomic, retain) UIWindow *window;
@property(nonatomic, readonly) RootViewController *ViewController;
@property(nonatomic, retain) NSString* CurrentLeaderBoard;
@property(nonatomic, retain) NSMutableArray *TenLastScoresArray;

+(AppDelegate *)get;
-(void)connectToGameCenter;
-(void)addScoreToLastScore:(Score*)score; 
```

该方法确实完成了启动

```
-(void)applicationDidFinishLaunching:(UIApplication*)application
{
    CC_DIRECTOR_INIT();
    self.CurrentLeaderBoard = kLeaderboardID;
    [[SKPaymentQueue defaultQueue] addTransactionObserver:[InAppPurchaseSingleton sharedHelper]];
    [AudioEngine preloadBackgroundMusic];
    [AudioEngine playBackgroundMusic:3];
    self.SoundShouldPlay = YES;
    [SceneManager goSplash];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T10:31:22.100

而不是在以下位置显示视图控制器`container`：

```
UIViewController *container = [[UIViewController alloc] init];
...
[container presentViewController:navController animated:YES completion:nil]; 
```

应该在 cocos2D 模板为您创建的根视图控制器上显示它。它通常可以通过应用委托访问：

```
UIViewController *rootViewController = (UIViewController*)[(YOURAPPDELEGATE*)[[UIApplication sharedApplication] delegate] viewController];
[rootViewController presentViewController:navController animated:YES completion:nil]; 
```

`viewController`是 cocos2D 默认模板添加到应用程序委托类的 ivar。它通常是私有的，因此您需要定义一个访问器：

```
@property (nonatomic, readonly) RootViewController *viewController; //-- .h file

@synthesize viewController; //-- .m file 
```

希望这可以帮助。

编辑：

根据我的应用程序委托中的内容，我认为您可以尝试像这样实例化 RootViewController：

```
 CC_DIRECTOR_INIT
ViewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
ViewController.wantsFullScreenLayout = YES;
[ViewController setView:[[CCDirector sharedDirector] openGLView]];
    ... 
```

# c# - 文本框不更新

> ID：12317660
> 
> 赞同：0
> 
> 时间：2012-09-07T11:58:46.680
> 
> 标签：c#, wpf, data-binding, inotifypropertychanged

我试过搜索，但也许我没有使用正确的术语来搜索。

我有几个我正在使用的文本框，当我输入数据时，我看到调试时更新的值，但它们永远不会更新到表单。

基本上，我有一个用于视觉效果的表单，然后我有一个处理所有活动的类。我已经将该类创建为资源，并且我正在引用文本框中的资源。

我真正知道如何处理表单更新的唯一方法是实现对值变化的计算。因此，如果我更新了一个属性，我会从 OnPropertyChanged() 调用该方法。这会产生问题，因为由于计算重写值，值总是会发生变化。然后我尝试评估新值的变化

IE

```
public double In1
{
    get{_return _in1;}
    set{
        if (_in1 != value)
        _in1 = value;

        OnPropertyChanged("In1");
    }
} 
```

无论如何，我的问题是我没有看到将值写入文本框。这是我第一次真正尝试使用数据绑定，所以我假设我做错了什么（很明显）

```
<ad:DockableContent
    xmlns="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" 
    x:Class="DMC_Robot_Editor.GUI.frmAngleConvertor"
    Title="frmAngleConvertor" Height="259" Width="282">
<ad:DockableContent.Resources>       
    <local:AngleConvertor x:Key="Converter"/>
</ad:DockableContent.Resources>
<Grid >    
        <GroupBox HorizontalAlignment="Stretch" VerticalAlignment="Top">
        <Grid>
 <ComboBox  x:Name="cbInput" HorizontalAlignment="Stretch" VerticalAlignment="Top"     Grid.Column="1" Grid.ColumnSpan="3" Grid.Row="1"  DisplayMemberPath="ValueCartesianString"     SelectedValuePath="ValueCartesianEnum" IsSynchronizedWithCurrentItem="True"      SelectedIndex="{Binding InputItem,Source={StaticResource Converter}}" ItemsSource="{Binding InputConvention, Source={StaticResource Converter}}"  IsReadOnly="True"/>
                    <TextBox x:Name="tbIn1" HorizontalAlignment="Center"     VerticalAlignment="Bottom" Text="{Binding In1, Converter={StaticResource DoubleToStringConverter}, Source={StaticResource Converter}}" Grid.Column="0"     d:LayoutOverrides="GridBox" Grid.Row="2" Width="50" TextAlignment="Center">
                        <TextBox.DataContext>
                            <local:AngleConvertor/>
                        </TextBox.DataContext>                    </Grid>
</ad:DockableContent>

public class AngleConverter()
{
    private double _in1 = 0.0;
    public double In1
    {
        get{_return _in1;}
        set{
            if (_in1 != value)
            _in1 = value;

            OnPropertyChanged("In1");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:42:04.553

`UpdateSourceTrigger=PropertyChanged`您可以使用您的模式添加到您的绑定中`TwoWay`

```
<TextBox Name="tbIn1" 

HorizontalAlignment="Center"     
VerticalAlignment="Bottom" 

Text="{Binding In1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, 
Converter={StaticResource DoubleToStringConverter}, 
Source={StaticResource Converter}}" 

Grid.Column="0"     
d:LayoutOverrides="GridBox" 
Grid.Row="2" 
Width="50" 
TextAlignment="Center"
/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:12:37.287

尝试[`UpdateSourceTrigger=PropertyChanged`](http://csharpsimplified.wordpress.com/2009/08/22/updatesourcetrigger-databinding/)在您的文本框中应用：

```
Text="{Binding Path-In1, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource DoubleToStringConverter}, Source={StaticResource Converter}}"  
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:40:33.340

你的真实代码应该是这样的：

```
public class AngleConverter : INotifyPropertyChanged 
```

所以我认为它只是你代码中的一个错字。你没有发布你的转换器代码，你的文本框中的绑定是好的。文本框默认 UpdateSourceTrigger 是 lostfocus。所以也许 UpdateSourceTrigger=PropertyChanged 做了你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:58:19.353

查看绑定
DoubleToStringConverter 是否被调用？
被叫了？

```
Text="{Binding In1, Converter={StaticResource DoubleToStringConverter}, Source={StaticResource Converter}}" 
```

将 Source 从绑定中移到 DockableContent 上的 DataContext 中。

```
DataContext="{Binding RelativeSource={RelativeSource self}}" 
```

不带转换器试试

```
Text="{Binding In1}" 
```

# c++ - c++ 类作为联合

> ID：12317661
> 
> 赞同：0
> 
> 时间：2012-09-07T11:58:49.193
> 
> 标签：c++, oop, memory, unions

我发现联合是 C++ 中的类。

如果您将一个类声明为联合：

```
union Foo // 声明联合类型
{
    字符 ch;

    int func(int a);

};          

```

联合的大小是 4 还是 1（假设 char 大小为 1 ，指针大小为 4 ）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:00:59.910

> 我发现联合**也是**C++ 中的类。（强调我的）

~~不（它们是类类型，而不是类）。~~我的错，显然它们是类：

### 3.9.2/1

> *   [...]
> *   联合，它们是能够在不同时间包含不同类型对象的类
> *   [...]

（不再相关）联合不能有`virtual`成员函数，也不能用于继承。

*上答案：*

大小将足以容纳最大的数据成员。在这种情况下，很可能是`1`，是的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:01:04.277

自己试试：

```
#include <iostream>

union Foo    // Declare union type
{
    char   ch;

    int func(int a);     
};   

int main()
{
    std::cout << sizeof(Foo);
} 
```

输出：

```
1 
```

# java - 带有前端的 Java 简单分析/事件流处理

> ID：12317662
> 
> 赞同：1
> 
> 时间：2012-09-07T11:58:51.113
> 
> 标签：java, logging, analytics, esper, graphite

我的应用程序对其内部流程进行了大量测量。例如，我为某些方法计时，我为外部 web 服务调用计时，我也有具有变化值的变量，以及具有“状态”（例如 PAUSED、WAITING 等）的进程。

该应用程序使用 100 到 200 个线程，并且每一位数据都将与特定线程相关联。

我正在寻找一些软件，我可以将所有这些信息导入它，以生成有用的指标和数据图表（理想情况下是实时或接近实时），让我设置阈值以触发警告，让我过滤按线程或线程组等的数据

该应用程序正在执行时间紧迫的任务，因此软件/api 需要非常快并且永不阻塞。

该应用程序是用 java 编写的，理想情况下，软件/api 也应该是用 java 编写的。我想我正在寻找的是所谓的事件流处理，但我真的不确定用什么语言来描述它。

到目前为止，我发现的只有 Esper 和 ERMA。有人可以给我推荐吗？我是唯一一个在这个项目上工作的人，所以我希望有一些很容易设置和使用的东西，并且有一个可行的前端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:43:19.857

最后我发现 Graphite 非常接近我想要的。然而，设置和配置并不是最简单的，但我最终让它工作了。

[http://graphite.wikidot.com/](http://graphite.wikidot.com/)

在我的情况下，我将数据直接从我的应用程序发送到 Statsd（通过 UDP），它收集数据并在它最终进入耳语后端之前进行一些预处理，这里有一个简单的 java 接口示例[https:// github.com/etsy/statsd/commit/2253223f3c19d2149d65ec5bc802198ff93da4cb](https://github.com/etsy/statsd/commit/2253223f3c19d2149d65ec5bc802198ff93da4cb)

或者，您可以将数据直接发送到石墨，例如这里[http://neopatel.blogspot.co.uk/2011/04/logging-to-graphite-monitoring-tool.html](http://neopatel.blogspot.co.uk/2011/04/logging-to-graphite-monitoring-tool.html)

# python - 烧瓶长例程

> ID：12317667
> 
> 赞同：7
> 
> 时间：2012-09-07T11:59:10.847
> 
> 标签：python, flask, gunicorn, long-running-processes

我必须在我的 Flask 应用程序中做一些长时间的工作。我想异步进行。刚开始工作，然后从 javascript 检查状态。

我正在尝试做类似的事情：

```
@app.route('/sync')
def sync():
    p = Process(target=routine, args=('abc',))
    p.start()

    return "Working..." 
```

但这创造了不复存在的独角兽工人。

如何解决？我应该使用像芹菜这样的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T12:56:50.460

有很多选择。您可以开发自己的解决方案，使用 Celery 或 Twisted（我相信还有更多已经制作好的选项，但这些是最常见的选项）。

开发您的内部解决方案并不困难。可以使用`multiprocessing`Python 标准库的模块：

*   当任务到达时，您在数据库中插入一行，其中包含任务 ID 和状态。
*   然后启动一个进程来执行在完成时更新行状态的工作。
*   你可以有一个视图来检查任务是否完成，实际上只是检查相应的状态。

当然，您必须考虑要将计算结果存储在哪里以及错误会发生什么。

与芹菜一起去也很容易。它看起来如下所示。定义一个异步执行的函数：

```
@celery.task
def mytask(data):

    ... do a lot of work ... 
```

然后，不要直接调用任务，比如直接`mytask(data)`执行它，而是使用以下`delay`方法：

```
result = mytask.delay(mydata) 
```

最后，您可以检查结果是否可用`ready`：

```
result.ready() 
```

但是，请记住，要使用 Celery，您必须运行外部*工作*进程。

我从来没有看过 Twisted，所以我不能告诉你它是否比这更复杂（但也可以做你想做的事情）。

无论如何，这些解决方案中的任何一个都应该适用于 Flask。**要检查结果，**如果您使用 Javascript则完全没有关系。只需使检查状态的视图返回 JSON（您可以使用 Flask 的`jsonify`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:49:29.663

我会使用消息代理，例如rabbitmq 或activemq。烧瓶进程会将作业添加到消息队列中，而长时间运行的工作进程（或池或工作进程）将从队列中取出作业以完成它们。工作进程可以更新数据库以允许烧瓶服务器知道作业的当前状态并将此信息传递给客户端。

使用 celery 似乎是一个不错的方法。

# java - Java：int数组用非零元素初始化

> ID：12317668
> 
> 赞同：130
> 
> 时间：2012-09-07T11:59:10.707
> 
> 标签：java, arrays, jvm, initialization, java-7

根据 JLS，`int`数组应该在初始化之后用零填充。但是，我面临的情况并非如此。这种行为首先出现在 JDK 7u4 中，并且也出现在所有以后的更新中（我使用 64 位实现）。以下代码抛出异常：

```
public static void main(String[] args) {
        int[] a;
        int n = 0;
        for (int i = 0; i < 100000000; ++i) {
            a = new int[10];
            for (int f : a)
                if (f != 0)
                  throw new RuntimeException("Array just after allocation: "+ Arrays.toString(a));
            Arrays.fill(a, 0);
            for (int j = 0; j < a.length; ++j)
                a[j] = (n - j)*i;
            for (int f : a)
                n += f;
        }
        System.out.println(n);
    } 
```

该异常发生在 JVM 执行代码块的编译之后，并且没有`-Xint`标志出现。此外，该`Arrays.fill(...)`语句（与此代码中的所有其他语句一样）是必需的，如果不存在，则不会发生异常。很明显，这个可能的错误与一些 JVM 优化有关。这种行为的原因有什么想法吗？

*更新：*
我在 HotSpot 64 位服务器 VM、Gentoo Linux、Debian Linux（内核 3.0 版本）和 MacOS Lion 上从 1.7.0_04 到 1.7.0_10 的 Java 版本上看到了这种行为。这个错误总是可以用上面的代码重现。我没有在 32 位 JDK 或 Windows 上测试这个问题。我已经向 Oracle 发送了一个错误报告（错误 ID 7196857），它会在几天后出现在公共 Oracle 错误数据库中。

*更新：*
Oracle 在他们的公共错误数据库中发布了这个错误：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7196857](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7196857)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-11T17:59:15.810

Here we are faced with a bug in the JIT-compiler. Compiler determines that the allocated array is filled after allocation in `Arrays.fill(...)`, but the check for uses between the allocation and the fill is faulty. So, compiler performs an illegal optimization - it skips zeroing of allocated array.

This bug is placed in Oracle bug tracker ([bug id 7196857](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7196857)). Unfortunately, I did not wait for any clarifications from Oracle about the following points. As I see, this bug is OS-specific: it absolutely reproducible on 64-bit Linux and Mac, but, as I see from comments, it reproduces not regularly on Windows (for similar versions of JDK). Additionally it would be nice to know when this bug will be fixed.

There is only advice at the moment: do not use JDK1.7.0_04 or later if you depend on JLS for newly declared arrays.

*Update at October 5:*

In the new [Build 10](http://jdk7.java.net/download.html) of the JDK 7u10 (early access) released at October 04, 2012, this bug was fixed at least for Linux OS (I did not test for other). Thanks to @Makoto, who found that this bug is no longer available for public access in Oracle bug database. Unfortunately, I do not know for the reasons Oracle removed it from public access, but it is available in Google [cache](http://webcache.googleusercontent.com/search?q=cache%3aQ0V_rKQNw5sJ%3abugs.sun.com/bugdatabase/view_bug.do?bug_id=7196857%20&cd=5&hl=en&ct=clnk). Also, this bug has caught the attention of Redhat: the CVE identifiers [CVE-2012-4420](https://access.redhat.com/security/cve/CVE-2012-4420) ([bugzilla](https://bugzilla.redhat.com/show_bug.cgi?id=856588)) and [CVE-2012-4416](https://access.redhat.com/security/cve/CVE-2012-4416) ([bugzilla](https://bugzilla.redhat.com/show_bug.cgi?id=856124)) were assigned to this flaw.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:04:38.247

我对您的代码进行了一些更改。这不是整数溢出的问题。查看代码，它在运行时抛出异常

```
 int[] a;
    int n = 0;
    for (int i = 0; i < 100000000; ++i) {
        a = new int[10];
        for (int f : a) {
            if (f != 0) {
                throw new RuntimeException("Array just after allocation: " + Arrays.toString(a));
            }
        }
        for (int ii = 0, len = a.length; ii < len; ii++)
            a[ii] = 0;
        for (int j = 0; j < a.length; ++j)
            a[j] = Integer.MAX_VALUE - 1;
        for (int j = 0; j < a.length; ++j)
            n++;
    } 
```

# javascript - 如果使用 ajax 加载页面，$(select).selectmenu('open') 不起作用

> ID：12317669
> 
> 赞同：0
> 
> 时间：2012-09-07T11:59:10.797
> 
> 标签：javascript, jquery-mobile

我有一个按钮，单击时会显示一个下拉菜单。此代码适用于加载了以下内容的页面`data-ajax="false"`：

```
$('#btnMainMenu').live('click', function() {
  $('#dpMainMenu').selectmenu('open');
}); 
```

但是网站上有一些锚点`data-ajax="true"`，所以每当用户加载这些页面时 - 上面的代码似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:51:39.643

加载`data-ajax="true"`的页面只加载页面的特定部分（这是 jQuery Mobile 的默认行为）。即之间的一切`<div data-role="page">...</div>`。即使页面以这种方式加载，您的代码是否有效？

参考：[链接页面](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T12:25:46.740

我刚刚遇到了同样的问题，我的解决方案是在通过 Ajax 加载的页面正文中包含下面的代码（我把它放在表单的下面）。

```
<script>
    $('document').read(function () {
        $("#form-id").trigger("refresh", true); 
    });
</script> 
```

这样，当页面准备好时，Jquery 会重新创建选择菜单所在的表单，因此所有行为都会再次返回。

# silverlight-5.0 - 选中 DataGrid 中选定行的复选框

> ID：12317670
> 
> 赞同：0
> 
> 时间：2012-09-07T11:59:12.840
> 
> 标签：silverlight-5.0

我有一个数据网格，其中第一列包含复选框。我想要实现的是，当我检查第一行复选框，然后我检查第五行复选框时按住 shift 按钮，然后应用程序应该检查所选行的所有复选框（即第一行到第五行）。

我正在使用 MVVM 模式。我在复选框列的顶部有 checkall 复选框，并且命令绑定到它。CheckAll 复选框工作正常。单击单个复选框还会从视图模型执行命令，该命令选中-取消选中选中的复选框。ViewModel 的属性绑定到复选框。

我现在想做的与我们在邮件中看到的非常相似（即 yahoo、gmail）。复选框应根据使用 shift 键从键盘选择的行来取消选中。如果我遗漏了描述我的问题所需的任何信息，请通知我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:32:44.440

是的可能。

在您使用的 Datagrid 中有一个名为 SELECETIONMODE 的属性。

将此设置为`SelectionMode = EXTENDED`,

下一个->

使用这种代码检查所有复选框为真。

最好为您加载的数据创建一个类。使它干净和容易。如果您使用 RIA 服务加载数据并将其绑定到您的数据网格，那么您已经排序..:)

我强烈推荐这个，而不是使用列号。

```
private void refreshDatagrid()
{

ObservableCollection<Cars> c = --Load all your cars----;
this.mydatagrid.ItemsSource = c;
}

---To Check all the boxes
private void checkAllBoxes_Click(object sender, RoutedEventArgs e)
        {
            if (this.mydatagrid.SelectedItems != null)
            {
                foreach (Cars c in this.mydatagrid.SelectedItems)
                {
                    if (c.isSelected != true)
                    {
                        ula.Approved = true;
                    }
                }
            }
        }

--Example Object Class
class Cars {

   public Cars(){}

   public Nullable<bool> isSelected {get;set;}

   public string carName {get;set;}

   public string LicenseNumber {get;set;}

   public string year {get;set;}

   public string model {get;set;}    

} 
```

当然最后在前端创建一个按钮`Click="checkAllBoxes_Click"`

希望概念清晰。

干杯

# c# - Visual Studio 2010 无法禁用 CSS 验证（删除验证选项后）

> ID：12317671
> 
> 赞同：0
> 
> 时间：2012-09-07T11:59:30.347
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, visual-studio-2010

希望我能对解决此问题有所了解。

在我正在处理的这个解决方案的构建序列结束时，我得到一个由于 CSS 验证失败而发生的错误列表。仅出现“CSS”错误。我试图压制这些“错误”

**到目前为止我为排除故障而采取的措施：**

*   我已删除工具 > 选项 > 文本编辑器 > CSS > 杂项 > 错误工具 > 选项 > 文本编辑器 > HTML > 验证 > 选项下的复选框

    关闭/重新打开 Visual Studio，但这个特定的解决方案/项目没有接受更改，并在构建时继续将 CSS 问题显示为“错误”。

    但是，我创建的其他解决方案按我的需要运行，即 CSS 验证被抑制

*   尝试重置我的环境（工具 > 导入和导出设置 > 重置所有设置）

*   还运行“devenv /resetuserdata”（我相信与上面相同）

如何在此解决方案上解决此问题以抑制 CSS“错误”或至少使它们出现在“警告”下？

* * *

运行：Win 7 x64 上的 Visual Studio 2010 Pro SP1 这会影响 ASP.NET MVC 2 Web 应用程序

（ps.这些CSS问题大部分来自第三方库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:34:05.337

发现解决方案是 MicrosoftAjax 的构建后缩小器错误。如果我评论了与 MicrosoftAjax 相关的 .csproj 文件的后期构建部分，它可以正常工作！

我认为这是 Microsoft Ajax Minifier（版本 4.62.4618.15618）的一个错误。

# java - 有没有办法让所有具有通过@Autowired 注入的范围原型的bean？

> ID：12317675
> 
> 赞同：0
> 
> 时间：2012-09-07T11:59:55.713
> 
> 标签：java, spring, autowired, prototype-scope

注入具有作用域`prototype`的bean`@Autowired`通常不会按预期工作。但是在写代码的时候，很容易不小心注入原型。

有没有办法获取所有`@Autowired`字段和方法的列表并将其与 Spring AppContext 匹配以检查这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:49:10.570

一种方法可能是覆盖`org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor`（负责处理@Autowired、@Inject、@Resource 等）并执行您在此覆盖的 bean 后处理器中提到的检查。但是，AutowiredAnnotationBeanPostProcessor 注册了很多常见的自定义命名空间（`context:component-scan`等`context:annotation-config`），因此这些自定义注释必须替换为相应的`bean`变体，并且覆盖的后处理器也注册为 bean。

# sql - SQL 查询总结年初至今的实际值和年初至今的平均值

> ID：12317678
> 
> 赞同：3
> 
> 时间：2012-09-07T12:00:02.310
> 
> 标签：sql, aggregate-functions, common-table-expression

我需要一个查询，总计费用实际年初至今，平均年初至今（在所有年份中，我的平均年份是多少），去年年初至今

我需要 3 条数据：实际 YTD | 年初至今平均 | 过去几年|

这是我到目前为止所拥有的：

```
select  SUM(Expenses)
        ,DATEADD(year, datediff(year,0,[Date]), 0) 
from    table1 
group by  
        DATEADD(year, datediff(year,0,[Date]), 0) 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:19:20.207

试试这个：

```
DECLARE @currentYear int
SELECT @currentYear = DATEPART(year, GETDATE())

SELECT SUM(CASE WHEN DATEPART(year,[date]) = @currentYear 
    THEN Expenses ELSE 0 END) AS 'Actual YTD',
SUM(Expenses) / COUNT( DISTINCT DATEPART(year,[date])) AS 'Average YTD',
SUM(CASE WHEN DATEPART(year,[date]) = @currentYear -1 
    THEN Expenses ELSE 0 END) AS 'Last Year YTD'

FROM Table1 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/58561/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:13:16.890

试试这个

```
select 

    AVG(case when 
        [date]>=DATEADD(year, datediff(year,0,getDate())-1, 0)  and 
        [date]<DATEADD(year, datediff(year,0,getDate()), 0) 
        then Expenses end) 
        as average_ytd,

    sum(case when 
        [date]>=DATEADD(year, datediff(year,0,getDate())-1, 0)  and 
        [date]<DATEADD(year, datediff(year,0,getDate()), 0) 
        then Expenses else 0 end) 
        as actual_ytd,

    sum(case when 
        [date]>=DATEADD(year, datediff(year,0,getDate())-2, 0)  and 
        [date]<DATEADD(year, datediff(year,0,getDate())-1, 0) 
        then Expenses else 0 end) 
        as lat_year_ytd
from
    table1 
```

# ruby-on-rails - 将裸 URL 重定向到 www DNS 问题

> ID：12317680
> 
> 赞同：1
> 
> 时间：2012-09-07T12:00:09.943
> 
> 标签：ruby-on-rails, heroku, dns

我在 heroku 上，我正在尝试`http://domain.com/*`重定向到`http://www.domain.com/*`. 使用`rack-rewrite`，我必须`http://myapp.herokuapp.com/*`成功重定向到`http://www.domain.com/*`. 但是，我无法`http://domain.com/*`重定向到`http://www.domain.com/*`.

看一个[类似的线程](https://stackoverflow.com/questions/10395184/rails-proper-setup-with-dns-rack-rewrite-etc-for-heroku)，似乎我应该将我的 A 记录设置为指向 myapp.herokuapp.com。我可以将我的 CNAME (www) 设置为 myapp.herokuapp.com，但是当我尝试使用我的 A 记录这样做时，我收到了这个错误：

```
INVALID_IP: 'myapp.herokuapp.com' is not valid IP for A record. (host name: @) 
```

我也试过了，`myapp.herokuapp.com.`但我得到了同样的错误。我究竟做错了什么？我也尝试将 @ 设置为其他记录类型，但没有一个给我`http://domain.com/*`我正在寻找的。任何帮助将不胜感激。

**编辑：**好的，所以将 @ 设置为 CNAME 完全解决了问题。我不确定为什么我读过的所有内容都引用了 A 记录。

# c# - WPF 绑定 ObservableCollection 到 ItemsControl 不起作用

> ID：12317682
> 
> 赞同：2
> 
> 时间：2012-09-07T12:00:16.303
> 
> 标签：c#, wpf, data-binding, observablecollection, itemscontrol

我有一些字符串属性需要解析内容，并显示在单独的控件中。假设有电子邮件和网址用空格分隔。显示电子邮件工作正常，但网址却不行。这是代码：

XAML 文件：

```
<ScrollViewer Grid.Row="0" Grid.Column="5" >
        <StackPanel Orientation="Vertical">
            <TextBox Name="EmailTextBox"
                     Text="{Binding ElementName=candidatePersonalDataViewControl, Mode=OneWay, Path=Candidate.Email, Converter={StaticResource emailConverter}}"/>

            <ItemsControl ItemsSource="{Binding ElementName=candidatePersonalDataViewControl, Mode=OneWay, Path=UrlsProperty}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock
                            Margin="0,0,0,0"
                            Padding="5,2,5,2"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top">
                            <Hyperlink NavigateUri="{Binding Path=/}" 
                                       Click="EmailAsWWW_Click">
                                <Run Text="{Binding Path=/}" />
                            </Hyperlink>
                        </TextBlock>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel Orientation="Vertical" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer> 
```

C# 文件：

```
 private static readonly DependencyProperty CandidateProperty = DependencyProperty.Register("Candidate", typeof(Candidate), typeof(CandidatePersonalDataViewControl));
    public Candidate Candidate
    {
        get { return (Candidate)GetValue(CandidateProperty); }
        set { SetValue(CandidateProperty, value); }
    }

    public CandidatePersonalDataViewControl()
    {
        InitializeComponent();
        this.DataContext = this;
        UrlsProperty = new ObservableCollection<string>();
    }

    public ObservableCollection<string> UrlsProperty
    {
        get;
        private set;
    }

    private void Grid_LayoutUpdated(object sender, EventArgs e)
    {
        if (Candidate == null)
            return;
        if (Candidate.Email == null)
            return;

        EmailPropertyToEmailsConverter emailConverter = new EmailPropertyToEmailsConverter();
        bool emails = (emailConverter.Convert(Candidate.Email, typeof(string), null, null) as string) != null;
        this.EmailTextBox.Visibility = emails ? Visibility.Visible : Visibility.Collapsed;

        EmailPropertyToUrlListConverter urlConverter = new EmailPropertyToUrlListConverter();
        IList<string> urls = urlConverter.Convert(Candidate.Email, typeof(string), null, null) as IList<string>;
        UrlsProperty.Clear();
        if (urls != null)
            foreach (string url in urls)
                UrlsProperty.Add(url);
    } 
```

我已经调试了 Grid_LayoutUpdated 并且工作正常。它会在需要时触发，并且 UrlsCollection 包含所需的数据。正如我所说，EmailTextBox 显示数据，但 ItemsControl 一直是空的。更有趣的是，从超链接绑定中删除“Path=/”会引发 XAML Parse 异常。我的想法已经用完了......我已经阅读了一些主题，但没有一个有用

[wpf ItemsControl绑定问题](https://stackoverflow.com/questions/3159128/wpf-itemscontrol-binding-problem)

[WPF绑定路径=/不工作？](https://stackoverflow.com/questions/2784377/wpf-binding-path-not-working)

[WPF - 将列表框绑定到 list<string> - 我做错了什么？](https://stackoverflow.com/questions/1488840/wpf-bind-a-listbox-to-a-liststring-what-am-i-doing-wrong)

[如何将 ObservableCollections 绑定到 ItemsSource？](https://stackoverflow.com/questions/4303557/how-do-you-bind-observablecollections-to-itemssource)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:33:42.047

`Path=/`绑定到***集合***的当前*项****而不是被模板化*的当前项，通常所说的当前项是被选中的项（请参阅[`IsSynchronizedWithCurrentItem`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.issynchronizedwithcurrentitem.aspx)）。你`DataContext`是一个字符串而不是一个集合，因此尝试通过绑定到当前项目`/`将失败（请参阅[绑定错误](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)）。**

 **要绑定到*正在模板化的当前项目，*您需要直接绑定到`DataContext`可以通过`{Binding}`或`{Binding .}`/完成的项目`{Binding Path=.}`（如果属性需要`Binding.Path`选择后者之一）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:33:39.647

您的超链接控件需要一个用于 NavigateUri 属性的 Uri，但您只需绑定到一个字符串。

实现您想要的一种方法是为您的 NavigateUri 绑定使用转换器

```
<Hyperlink NavigateUri="{Binding Path=., Converter={StaticResource YourStringToUriConverterGoesHere}}" Click="EmailAsWWW_Click">
  <Run Text="{Binding}" />
</Hyperlink> 
```

另一种方法是更改​​集合

```
public ObservableCollection<MyUrlWrapper> UrlsProperty
{
    get;
    private set;
}

public class MyUrlWrapper
{
    public string Url {get;set;}
    public Uri MyUri {get{return new Uri(this.Url);}}
}

<Hyperlink NavigateUri="{Binding Path=MyUri}" Click="EmailAsWWW_Click">
  <Run Text="{Binding Path=Url}" />
</Hyperlink> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:10:31.827

尝试：

```
<Hyperlink NavigateUri="{Binding}" Click="EmailAsWWW_Click">
    <Run Text="{Binding}" />
</Hyperlink> 
```**

# core-data - 将 CoreData 对象存储到 NSDictionary 或 NS Array

> ID：12317684
> 
> 赞同：1
> 
> 时间：2012-09-07T12:00:27.277
> 
> 标签：core-data

我正在尝试将输出存储`[Sectioninfo Objects]`到数组中

```
NSArray *currentCategory = [sectionInfo objects]; 
```

虽然我在 NSLOG 上得到的输出如下：

```
"<Catalogue: 0x6da1d20> (
    entity: Catalogue;
    id: 0x6da1090 <x-coredata://894839B1-B485-4D64-8D46-99E388F00225/Catalogue/p3> ;
    data: {\n    comments = nil;\n
                 email = nil;\n
                 name = Shorts;\n
                 phone = 0;\n
                 picture = <ffd8ffe0 00104a46 49460001 01000001 00010000 ffe10058 45786966 00004d4d 002a0000 00080002 01120003 00000001 0001>;\n
                 price = 77;\n
                 shop = Shop;\n
                 website = nil;\n})" 
```

我只对数据部分感兴趣

我怎样才能只提取数据部分？& 然后我可以将它添加到 NSArray

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:09:12.950

由于该问题已标记为核心数据，因此我假设您正在谈论从`NSFetchedResultsController`via获得的部分信息

```
id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section]; 
```

如果是这种情况，则节信息协议指定`objects`返回该节中的对象数组。这个对象数组将保存实际对象，就像您从执行 fetch 得到的对象数组一样。

因此，您可以像访问任何其他对象一样访问它们。希望您有一个子类，因此您可以通过适当的属性访问该对象。

否则，您可以使用 KVC 方法。从您的日志输出中，我假设`data`是您的对象的一个​​属性（可能是一个字符串）。

```
NSArray *sectionObjects = [sectionInfo objects];
NSMutableArray *dataArray = [NSMutableArray arrayWithCapacity:sectionObjects.count];
for (NSManagedObject *object in sectionObjects) {
    NSString *data = [object valueForKey:@"data"];
    [dataArray addObject:data];
} 
```

或者，您可以更简洁地执行以下操作：

```
NSArray *dataArray = [[sectionInfo objects] valueForKey:@"data"]; 
```

它返回一个数组，其中包含将密钥应用于接收器中的每个对象的结果。

# jsp - jsp & rich:dataTables 使用图片时注销

> ID：12317691
> 
> 赞同：2
> 
> 时间：2012-09-07T12:00:50.933
> 
> 标签：jsp, jsf, richfaces

我对 Rich:dataTable 有一个奇怪的问题：

我的主页项目有一些需要身份验证才能访问的目录。它通过基于表单的登录来完成。工作正常，正如预期的那样。

在一页上是一个rich:dataTable。即使在这里一切正常。但是当我尝试转到另一个页面（在同一目录中）时，我必须再次登录我使用 h:graphicImage 标签的表：

```
<rich:dataTable  id="stdlist" rowClasses="tbleven,tblodd" value="#{sbasSS.SMStatuslist}" var="loc" 
  columnClasses="centertd, centertd"
  headerClass="tblheader" reRender="true">
    <rich:column>
        <f:facet name="header" >
            <h:outputText value="mobilnummer"/>
        </f:facet>    
        <h:outputText value="#{loc.destination}"/> 
    </rich:column>
    <rich:column>
        <f:facet name="header" >
            <h:outputText value="lev. status"/>
        </f:facet>    
        <h:graphicImage value="/Teacher/flags/#{loc.status}.gif" />
    </rich:column>  
</rich:dataTable> 
```

图像按应有的方式显示。没有失败的路径左右。但我被淘汰了，会话无效。

如果我改变

```
<h:graphicImage value="/Teacher/flags/#{loc.status}.gif" /> 
```

进入

```
<h:outputText value="#{loc.status}"/> 
```

显示预期的文本。导航工作。我不必再次登录。

知道这可能是什么吗？

最好的问候拉尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:23:13.680

事实上，HTML 文档中的所有 URL 引用（如图像、脚本、CSS 文件等）都是由一个全新且不同的 HTTP 请求单独请求的。这些症状表明您`Filter`在 web 应用程序中进行了过度的身份验证，它没有正确完成其工作，并且由于某种原因，一旦请求图像，整个会话就会失效。

根据迄今为止提供的信息，这就是所有可以告诉/猜测的内容。您的下一步将是调试该过滤器并投入更多时间来了解 HTML、HTTP 和网络浏览器的一般工作方式。这个问题至少与 RichFaces 数据表无关。`<h:graphicImage>`当页面中只有带有硬编码`#{loc.status}`值的a 时，您肯定会遇到完全相同的问题。

# php - 如何在 php 中进行高效的 INSERT 查询

> ID：12317696
> 
> 赞同：-5
> 
> 时间：2012-09-07T12:01:03.297
> 
> 标签：php, mysql, insert

我正在使用 php 在 MYSQL 中插入表单的元素值。我的表单包含 20 个不同的元素，这意味着

```
count($_POST) 
```

返回 20。如何在 PHP 中有效地进行 INSERT 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:11:34.877

> 我将一一提取 20 个值，然后将它们一一连接起来。我不想遵循这种方法。你有更好的方法吗？

是的，您可以使用[`foreach`](http://php.net/manual/en/control-structures.foreach.php). 下面的示例假设 3 个：

*   你所有的表单域都是文本域，
*   表单字段与表格中的列的顺序相同
*   表单元素 ( ) 与表中的列名称`<input>`具有相同的属性`name`

它可以是这样的：

```
$sql = 'INSERT INTO table_name VALUES (';
foreach ($_POST as $key => $value)
    $sql .= mysqli_real_escape_string($value);
$sql .= ')'; 
```

# linux - 确定性地从财富中产生输出

> ID：12317698
> 
> 赞同：1
> 
> 时间：2012-09-07T12:01:06.510
> 
> 标签：linux, bash, unix

我的[财富](http://en.wikipedia.org/wiki/Fortune_%28Unix%29)输出太随机了——为了让我的财富具有任何科学意义，我需要遵循占星术的原则，以便选择的财富部分取决于例如月相。我已经整理了占星术方面的内容，以获得一个占星确定性的数字，我可以将其用作随机种子。

从这里，我要么希望能够：

1.  输出第 N 个财富，或

2.  设置幸运使用的随机种子。

我可以想象做 1\. 通过获取财富文件列表`fortune -f`并从其中一个文件中选择随机行。但如果有更优雅的解决方案，那就太好了。

我不知道该怎么做 2.，我只知道 RNG 不是 $RANDOM，所以我不能在 bash 中设置种子`RANDOM=seed`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T11:47:44.157

财富有许多版本和重新实现。我查看了 Linux 的 fortune 源代码，您可能正在使用它（这里：[fortune source](ftp://sunsite.unc.edu/pub/Linux/games/amusements/fortune/)）。不幸的是（！）它用于`/dev/urandom`获取种子，如果失败`time(0)`则使用它。这就是为什么`$RANDOM`不起作用。我只能想象这些解决方案（除了您已经找到的解决方案）：

1）修改源以添加强制随机种子的选项。这很微不足道。

2) 通过 将程序运行到受限环境中`chroot`。`/dev/urandom`受限环境必须包含必要的二进制文件和包含您要应用的种子的假（普通文件）：

```
echo -en "$myseed" > restrictedroot/dev/urandom
chroot restrictedroot fortune 
```

请注意，伪造的 urandom 包含二进制数据，因此`$myseed`必须扩展为 4 字节的二进制序列（即具有四个十六进制序列“\xHH”）。一点都不方便。

# android - 如何使用未发布的应用测试应用内计费？

> ID：12317700
> 
> 赞同：14
> 
> 时间：2012-09-07T12:01:14.667
> 
> 标签：android, in-app-billing

我有一个使用 In-App-Billing 销售帐户管理项目的 Android 应用程序。

我使用静态响应 ID 测试了该应用程序，一切似乎都正常。我现在想用真实的产品 ID 测试应用程序。

我在 Google Play 商店中创建了该应用程序，并上传了具有正确权限的应用程序草稿版本。我现在创建了一个 In-App-Billing 项目并发布了该项目。

目前该应用尚未发布。该项目已创建并发布，并且我有一个测试帐户，该帐户已在开发人员帐户的配置文件中注册，并且是我用于测试的设备上的唯一帐户。该应用程序使用与上传的草稿相同的密钥进行签名。**编辑：我目前正在使用 Android 4.1 && 4.03 进行测试**

如果我尝试购买该商品，Google Play 商店会弹出，但会显示一个对话框，其中包含以下方法：**您请求的商品不可购买。**

如何在不发布应用程序的情况下测试购买商品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:24:45.990

测试应用程序时，请确保您已导出并正确签名（不使用调试密钥）。还要确保您在设备上使用正确的 Google 帐户（注册的测试帐户）。

另外，注册的测试账号**不能**是开发者账号。

除此之外，它应该可以正常工作。

**注意：**测试您自己的应用内购买确实需要有效的信用卡和实际付款。

最后，目前市场编辑需要几个小时才能通过服务器传播并显示出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:33:52.557

如果您刚刚上传了应用程序并在那里添加了项目，则可能需要一些时间来反映 google play 上的更改，然后等待大约 2 小时。它将显示您要购买的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-18T09:56:23.870

对于到达此线程的其他人，现在`not possible to test In-app billing with just a draft version`是应用程序。

> 不再支持草稿应用 以前，您可以发布应用的“草稿”版本进行测试。不再支持此功能。相反，您可以通过两种方式测试预发布应用在 Google Play 商店中的功能：

*   您可以将应用程序发布到 alpha 或 beta 分发渠道。这使得该应用程序可以在 Google Play 商店中使用，但仅限于您放在“白名单”中的测试人员。

*   在少数情况下，您可以使用未发布的应用程序测试 Google Play 功能。例如，您可以使用静态响应、始终返回特定结果（如“已购买”或“已退款”）的特殊保留产品 ID 来测试未发布应用的应用内计费支持。

有关详细信息，请阅读[https://developer.android.com/google/play/billing/billing_testing.html#billing-testing-test](https://developer.android.com/google/play/billing/billing_testing.html#billing-testing-test)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:05:30.767

您可以使用选项测试应用内计费，看看[这个](http://developer.android.com/guide/google/play/billing/billing_testing.html)

**编辑 ：**

在我提到的链接上，您可以看到：

> 注意：您无需发布应用程序即可进行端到端测试。您只需将您的应用程序作为草稿应用程序上传即可执行端到端测试。

如果仍然无法测试，您可以做的就是发布并测试它。如果您认为您的应用程序内结算可能存在错误，退款仍然是一种解决方案。

我正在考虑一些事情，在开发网站上，你可以看到：

> 确认您的设备正在运行受支持的 Google Play 应用程序或 MyApps 应用程序版本。

您在哪个 Android 版本上进行测试？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-06T07:34:24.080

您必须在您的应用商店应用帐户中的应用产品中添加产品（项目 sku）。`SKU`您设置的`In-App`账单不可用。为了测试，设置`SKU` `androidtestpayment`. 现在您将收到该错误**您请求的项目不可购买。**

# jquery - 在另一个淡入之前淡出 div — Jquery

> ID：12317704
> 
> 赞同：2
> 
> 时间：2012-09-07T12:01:16.913
> 
> 标签：jquery, fadein, fade, fadeout

我是这个 jquery 业务的新手——如果你能在心里原谅我和我无知的问题，我将不胜感激。

我的困境：我有两个 div，我需要一个在另一个淡入*之前*淡出。

这是我的代码：

```
<script type="text/javascript">
  $(document).ready(
    function(){
        $("#about").click(function () {
            $("#aboutinfo").fadeToggle();
        });
    });
</script>
    <script type="text/javascript">
  $(document).ready(
    function(){
        $("#contact").click(function () {
            $("#contactinfo").fadeToggle();
        });
    });
</script> 
```

有问题的网站是[这个](http://tomjhume.com/camelot)。

另外，我认为我写错了jquery，因为这两个语句都有自己的 `<script></script>`标签？

感谢任何可以提供帮助的人:)

编辑：这似乎不起作用：

```
<script type="text/javascript">
  $(document).ready(
    function(){
        $("#music").click(function () {
            $("#musicinfo").fadeToggle();
            $("#about").click(function () {
            $("#aboutinfo").fadeToggle();
            $("#contact").click(function () {
            $("#contactinfo").fadeToggle();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:03:40.920

动画都接受回调函数，这些回调函数将在一个动画结束时调用：

```
$('#about').click(function() {
    $('#contactinfo, #musicinfo').fadeOut(function() {
        $('#aboutinfo').fadeIn();
    });
}); 
```

如果没有要淡出的东西（即没有可见元素），回调将立即触发。

...是的，这可能都在一个`<script>`块内，并且在一个`$(document).ready`侦听器内：

```
$(document).ready(function() {
   $('#about').click(function() { ... });
   $('#contact').click(function() { ... });
}); 
```

如果您使用类和 ID，您可能能够为所有元素编写一个单击处理程序。就像是：

```
$('.header-item').click(function() {
   var target = $('#' + this.id + 'info');
   $('.info-item').not(target).fadeOut(function() {
      target.fadeIn();
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T16:55:12.253

```
$("#button").click(function()
{
$("#div1").hide();
$("#div2").fadeIn("slow");
}); 
```

它会迅速淡出并淡入另一个 div。

# amazon-s3 - DynamoDB S3 导入

> ID：12317707
> 
> 赞同：0
> 
> 时间：2012-09-07T12:01:31.563
> 
> 标签：amazon-s3, amazon-web-services, amazon-dynamodb, amazon-emr, emr

从[S3 导入到 DynamoDB](http://aws.typepad.com/aws/2012/01/aws-howto-using-amazon-elastic-mapreduce-with-dynamodb.html)时，这是否计入预置的写入吞吐量？

我有一个只能读取的服务，除了来自 S3 中的多 GB 文件的批量更新。我们不想为整个月的预置写入付费，并且考虑到 AWS 政策只允许预置速率一次翻倍，从 0 写入扩展到数百万可能需要一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:26:29.037

是的。EMR 集成依赖于与任何客户端应用程序相同的 API。因此，它受制于相同的吞吐量策略。

次要精度：

*   最小吞吐量 = 1（不是 0）
*   最大吞吐量 = 10,000（不 > 1,000,000）

顺便说一句，只要您一次只加倍，就可以轻松实现巨大的“缩放”。运行只需几分钟。也许您还可以考虑存储“增量”差异而不是完整的“S3 中的多 GB 文件”。会省很多...

DynamoDB[官方优化指南](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMR_Hive_Optimizing.html)可以为您提供一些关于如何优化导入的有用提示。

# visual-studio-2010 - VS2010“没有测试受到影响”

> ID：12317708
> 
> 赞同：1
> 
> 时间：2012-09-07T12:01:32.430
> 
> 标签：visual-studio-2010, tfsbuild

我在 VS2010 中有一个 TFS 版本。在构建单元测试之后执行。在构建摘要中，它告诉我“1 次测试运行已完成 - 100% 平均通过率”，但在此下方它表示“没有测试受到影响”。我猜受影响的测试与提供仅运行受签入代码影响的测试的功能有关？这是正确的吗？既然我很乐意在每次构建后运行所有测试，我该如何关闭“没有测试受到影响”消息？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:16:26.067

您对测试影响分析是正确的 - 它查看自上次构建以来的变更集以及哪些测试与该代码相交。要为构建禁用测试影响分析：

1.  在团队资源管理器中右键单击您的构建定义，然后选择编辑...
2.  转到流程类别并展开高级部分
3.  将“分析测试影响”设置为 False

您还可以在每个构建的基础上设置此值 - 将手动构建排队，该设置可通过“参数”选项卡获得。

# php - 奇怪的 strtotime() 问题 - 读取为不正确的格式

> ID：12317711
> 
> 赞同：1
> 
> 时间：2012-09-07T12:01:41.533
> 
> 标签：php, date

服务器的语言环境设置正确，在其他域上似乎没问题……但是我目前遇到了一个奇怪的问题。

如果我直接做，`strtotime('now');`它会返回正确的时间戳（对于我所在时区的今天的日期/时间）但是如果我这样做：

```
strtotime('07/09/2012 13:48'); 
```

它返回 7 月 9 日的时间戳，就像它以美国格式读取日期一样。我已检索时区并将其设置为欧洲/伦敦（通过使用 date_default_timezone_get）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:05:00.583

```
$date = DateTime::createFromFormat('d/m/Y H:i', '07/09/2012 13:48');
echo $date->format('Y-m-d H:i'); 
```

[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:04:39.440

使用[DateTime](http://fr2.php.net/manual/en/datetime.createfromformat.php)类和 DateTime::createFromFormat() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:03:12.733

[strtotime](http://php.net/manual/en/function.strtotime.php)将其读取为美国格式。最好使用 ISO yyyy-mm-dd。

[请参阅此以获取有效的日期格式](http://www.php.net/manual/en/datetime.formats.date.php)

# java - 使用会话将 java Metro 客户端连接到 wcf 服务

> ID：12317712
> 
> 赞同：1
> 
> 时间：2012-09-07T12:01:41.910
> 
> 标签：java, wcf, microsoft-metro

我需要将 java Metro 客户端连接到我正在处理的项目的 wcf 服务。[我在click](http://webservices20.blogspot.de/2011/06/test-drive-shiny-new-wcf-interop.html)上使用了教程。

在我想向我的服务添加会话之前，一切似乎都正常工作。当我添加`<reliableSession enabled="true" />`到我的配置文件时，客户端无法重新加载 wcf 服务。

配置文件：

```
 <system.serviceModel>
    <diagnostics>
      <messageLogging   logEntireMessage="false" logMalformedMessages="false"
       logMessagesAtServiceLevel="false" logMessagesAtTransportLevel="false" />
    </diagnostics>
    <services>

      <service name="Service" behaviorConfiguration="ServiceBehavior">

        <!-- Service Endpoints -->
        <endpoint address="" bindingConfiguration="interopBinding" binding="metroBinding" contract="IService">
          <identity>
            <dns value="localhost" />
          </identity>

        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>

        <behavior name="ServiceBehavior">

          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <!-- To configure the service certificate -->
          <serviceCredentials>
            <serviceCertificate storeLocation="LocalMachine" storeName="Root" x509FindType="FindBySubjectDistinguishedName"  findValue="CN=go2.openscrolling" />
            <clientCertificate>
              <authentication certificateValidationMode="PeerOrChainTrust"  />
             </clientCertificate>
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <metroBinding>
        <binding name="interopBinding" messageEncoding="Text">
          <security mode="MutualCertificate" establishSecurityContext="false" algorithmSuite="Basic128"/>

          <!--<reliableSession enabled="true" />-->
        </binding>
      </metroBinding>
    </bindings>
    <extensions>
      <bindingExtensions>
        <add name="metroBinding" type="Microsoft.ServiceModel.Interop.Metro.Configuration.MetroBindingCollectionElement, Microsoft.ServiceModel.Interop, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4fc38efee625237e"/>
      </bindingExtensions>
    </extensions>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

# sql-server - 如何使 EXE 文件中的 SSIS 作业失败

> ID：12317714
> 
> 赞同：0
> 
> 时间：2012-09-07T12:01:50.283
> 
> 标签：sql-server, ssis

我开发了一个由 SSIS 作业触发的应用程序，需要 2 到 120 分钟的执行时间。我现在确实想知道 EXE 文件的执行是否失败或没有使用 SSIS 的监视和报告功能。我当然在应用程序中有日志记录，但这更多是为了调试，我需要能够使用 SSIS 作业功能发送通知。

是否有一个特定的返回值，我可以告诉 SSIS 作业 EXE 文件的执行失败？还是我需要自己在 Workflow 中实现这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:06:34.033

目前尚不清楚您如何从 SSIS 中执行此 EXE。我将不得不假设它与执行流程任务有关。

[执行流程任务](http://msdn.microsoft.com/en-us/library/ms141166.aspx)允许您指定您期望的成功[值，以及如果返回代码不是成功值，您是否希望任务失败](http://msdn.microsoft.com/en-us/library/ms178485.aspx)。我相信这是您想要的财产。

因此，设置您的 EXE 以遵循返回值的标准约定。如果执行成功返回零，任何其他值报告失败。（您可以有不同的值代表不同的失败模式。）您的执行流程任务将指定零作为成功值（默认值），如果返回值不是成功值（也是默认值），则失败。然后，您可以通过发送邮件任务或您想要的任何其他方式让控制流路由失败约束以报告失败。

# java - java.lang.StringIndexOutOfBoundsException

> ID：12317716
> 
> 赞同：2
> 
> 时间：2012-09-07T12:02:12.933
> 
> 标签：java, string, indexoutofboundsexception

这是将十六进制转换为字符串的代码，但在字符串大小不超过 62 个字符之前它可以正常工作？

```
public static String hexToString(String hex)
        {       
           StringBuilder output = new StringBuilder();
           for (int i = 0; i < hex.length(); i+=2)
           {
            String str = hex.substring(i, i+2);
            output.append((char)Integer.parseInt(str, 16));
           }
           return(output.toString());
        } 
```

> java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：HEX.hexToString(HEX.java:36) 处 HEX.main(HEX.java:56) 处的 java.lang.String.substring(Unknown Source) 处为 62

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:04:19.487

`i+2`是`String str = hex.substring(i, i+2);`问题所在。即使, 如果是奇数`i < hex.length()`，`i+2`也太大了。`hex.length()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:28:11.513

只有当字符串中有奇数个字符时，您才会遇到这个问题。按如下方式修复您的功能：

```
public static String hexToString(String hex)
    {       
       StringBuilder output = new StringBuilder();
       String str = "";
       for (int i = 0; i < hex.length(); i+=2)
       {

        if(i+2 < hex.length()){
            str = hex.substring(i, i+2);
        }else{
            str = hex.substring(i, i+1);
        }
        output.append((char)Integer.parseInt(str, 16));
       }
       return(output.toString());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:06:29.797

如果您在 for 循环中使用 String.length 并且 i 从 0 开始，那么您需要从字符串长度中减去 -1

```
for (int i = 0; i < hex.length()-1; i+=2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:09:34.533

修复你的循环条件：

```
for (int i = 0; i < hex.length() - 3; i +=2) 
```

# c - 如何在运行时分配多维数组？

> ID：12317717
> 
> 赞同：2
> 
> 时间：2012-09-07T12:02:14.607
> 
> 标签：c, arrays, pointers, ansi

在设计时，我可以声明一个像这样的变量：

```
char szDesignTimeArray[120][128]; 
```

上面的声明是 120 个大小为 128 的数组。在运行时我需要分配以下内容：

```
char szRunTime[?][128]; 
```

我知道数组的大小，但我不知道需要分配多少个数组。当我知道号码时，如何声明并分配它们？

万事如意

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T12:06:18.097

我假设在运行时您也知道 Row_Size。

您可以在运行时动态分配多维数组，如下所示：

```
#include <stdlib.h>

int **array;
array = malloc(nrows * sizeof(int *));
if(array == NULL)
    {
    fprintf(stderr, "out of memory\n");
    exit or return
    }
for(i = 0; i < nrows; i++)
    {
    array[i] = malloc(ncolumns * sizeof(int));
    if(array[i] == NULL)
        {
        fprintf(stderr, "out of memory\n");
        exit or return
        }
    } 
```

参考：

[http://www.eskimo.com/~scs/cclass/int/sx9b.html](http://www.eskimo.com/~scs/cclass/int/sx9b.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:18:57.063

静态知道行的长度后，您还可以分配

```
char (*szRunTime)[128];
// obtain row count
szRunTime = malloc(rowCount * sizeof *szRunTime); 
```

内存指向的指针`char[128]`。这样，您将获得一个连续的内存块，这可能会提供更好的局部性，并且您只需要`free`一个指针。

如果行数不太大，使用变长数组，

```
rowCount = whatever;
char szRunTime[rowCount][128]; 
```

但是，如果支持 C99 或更高版本，则可能是最佳选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:08:18.603

使用这个，其中变量是你想要的数组数量：

```
char **szRunTime = malloc(sizeof(char *)*Variable);
int i;
for(i=0 ; i<Variable ; i++)
    szRunTime[i] = malloc(sizeof(char)*128); 
```

# java - Eclipse 3.8 和 4.2 有什么区别？

> ID：12317719
> 
> 赞同：1
> 
> 时间：2012-09-07T12:02:23.980
> 
> 标签：java, eclipse, eclipse-indigo, eclipse-juno

> **可能重复：**
> [Eclipse 3.8 — 与 3.7 有什么区别？](https://stackoverflow.com/questions/6997190/eclipse-3-8-whats-the-difference-from-3-7)

我认为 Eclipse 3.8 和 4.2 都是 Juno 版本，但两者的基本区别是什么？为什么将两个版本的 Eclipse Juno 放在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:46:50.573

Eclipse 4.x 使用的是 e4 平台，例如，该平台有很多 UI 更改。Eclipse 3.8 基本相同，但使用的是平台的版本 3。

# macos - 如何在 OSX 上的 .app 项目中包含带有 CMake 的 Qt 库？

> ID：12317724
> 
> 赞同：3
> 
> 时间：2012-09-07T12:02:40.510
> 
> 标签：macos, qt, deployment, cmake, macdeployqt

我使用 CMake 作为构建系统创建了一个 Qt 项目。我想在部署阶段包括必要的 Qt 框架

```
Qt3Support.framework/ QtNetwork.framework/  QtXml.framework/
QtCore.framework/     QtOpenGL.framework/   
QtGui.framework/      QtSql.framework/ 
```

为了准备好将我的程序作为独立的 dmg 分发。

这通常是用`macdeployqt`命令完成的，但它给了我很多这样的错误：

```
ERROR: "strip: for architecture x86_64 object:
/Users/rs/build/myapp.app/Contents/Frameworks/QtXmlPatterns.framework/Versions/4/QtXmlPatterns
 malformed object (unknown load command 5) 
```

所以我希望能够在部署阶段直接做，有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:51:19.027

[我使用 DeployQt4 和 BundleUtilities 有一段时间了，直到我遇到了一个问题，根据其中一位作者的说法，](http://public.kitware.com/Bug/view.php?id=13422)这个问题不容易解决。

我最终编写了一个 ruby​​ 脚本，它完成了 BundleUtilities 所做的事情，以解决这个问题。与 BundleUtilities 相比，我的脚本目前有一个限制 - 它不处理具有多个可执行文件的包。在 cmake 中编写相同的功能超出了我的受虐程度（我设法理解了 BundleUtilities 的作用和方式，但对他们必须用来在内存中组织数据的装置感到震惊）。

脚本本身可在此处获得：[https ://github.com/artm/vision-ui-skeleton/blob/master/ruby/fixup/fixup.rb](https://github.com/artm/vision-ui-skeleton/blob/master/ruby/fixup/fixup.rb)

它从 cmake 底部使用：[https ://github.com/artm/vision-ui-skeleton/blob/master/cmake/QArtmRelease.cmake](https://github.com/artm/vision-ui-skeleton/blob/master/cmake/QArtmRelease.cmake)

它适用于 OSX 10.6.x 以及可能更高版本附带的 ruby​​。

# php - 数据库 phpmyadmin 中的权限表

> ID：12317729
> 
> 赞同：-1
> 
> 时间：2012-09-07T12:03:02.017
> 
> 标签：php, database, phpmyadmin

我有 4 个用户......并且都有不同的权限......那么我如何在数据库中为他们分配权限......

我在数据库中创建了 3 个表 ->

1)user 表 2)permission_type 表 3)permission 表

帮帮我....提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:06:07.720

您需要一个表来存储权限和用户之间的关系。

user_has_permission

*   用户身份
*   许可ID

但除此之外，我真的无话可说——毕竟你还没有真正向我们提供足够的信息。

# winforms - 想让 Windows 应用程序在 32 位和 64 位上运行

> ID：12317730
> 
> 赞同：2
> 
> 时间：2012-09-07T12:03:03.840
> 
> 标签：winforms, 32bit-64bit

我正在创建一个 Windows 窗体应用程序，并且刚刚提出了一个问题，使我的应用程序可以在 32 位和 64 位机器上运行。

我用谷歌搜索了我的问题，找到了一种解决方案，将平台目标从“任何 cpu”更改为 x86，然后编译它。然后它将在两个系统上工作。

现在我的问题是，我是否需要做任何其他事情来实现这一点，否则上述解决方案就可以了。

我正在创建我的应用程序，所以我现在无法测试它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:30:38.933

是的，您还需要做三件事，实用的东西：

1.  您需要通过让代码在 64 位模式下运行来检查您是否真的领先。通常，64 位代码的运行速度比 32 位代码慢一点，由于指针大小加倍，它使用 CPU 缓存的效率要低得多。通过它有 8 个额外的 cpu 寄存器来补偿它。如果您在内部循环中操作大量 long 或 double 类型的值，您只会获得性能优势。您*可以*通过使用更多内存来提高性能，但如果您的程序也必须在 32 位模式下运行，这将很难实现。

2.  您需要在 32 位和 64 位操作系统上*测试您的代码。*很难避免对本机代码的依赖，其中很多都隐藏在您可能无法识别为本机代码的包装器中。例如数据库提供者。这样的代码有两种不同的风格，它们的行为可能不同。

3.  如果您实际上有这样的依赖关系，那么您可能需要编写两个安装程序，在目标机器上部署正确的本机 DLL。一个 64 位和一个 32 位安装程序。无论您是否这样做，都应该在第 2 条中清除。

显然，您想首先关注第 1 条，它可能会帮助您跳过第 2 条和第 3 条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:11:10.290

***解决方案资源管理器->双击属性（应打开一个新选项卡）->构建选项卡***

设置***配置***以**`'Any CPU'`**确保您的应用程序可以在 32 位和 64 位计算机上运行。

![任何 CPU](../Images/5ba89c9ec4730c38246acaad06965d45.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:20:52.930

这是选项[Any CPU, x32bit, x64bit](http://social.msdn.microsoft.com/Forums/sk/netfx64bit/thread/0b21d7a4-d929-4ac3-8447-f51b9c28ec9c)的比较。

> “AnyCPU 让您可以在 32 位和 64 位机器上运行，而 x64 只能在 64 位上运行”

从您的帖子中，我认为没有理由不使用`Any CPU`.

# c# - Dojo 1.8 Web 服务调用失败，状态为：500 错误代码

> ID：12317731
> 
> 赞同：1
> 
> 时间：2012-09-07T12:03:05.807
> 
> 标签：c#, .net, dojo, asmx

```
dojo.xhrPost({
  url: "Default.aspx/TestMethod",
  handleAs: "json",
  contentType: "application/json",
  postData: dojo.toJson({  }),
  load: function (result) {
    debugger;
  },
  error: function (err) {
    debugger;
  }
}); 
```

`WebMethod`那是我用来向`Default.aspx`. 该方法称为`TestMethod`.

我得到的错误是：

```
Unable to load Default.aspx/TestMethod status: 500 
```

如果您需要任何其他信息，请告诉我。

***注意：我可以从服务器端调用该方法，它会按预期返回结果。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:47:49.670

我去过那儿。:(

通常这是您传入的数据格式的问题。例如，如果您的 WebMethod 有一个 int 参数并且您正在传递一个字符串，那么您将遇到这样的失败。我会使用 Fiddler [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)之类的工具来查看您发送给该方法的内容。

还要打开您拥有的任何服务器端日志记录和跟踪并使用它。一个对 500 错误有用的来源（这往往发生在“你的”服务器代码到达之前）是 Asp.net 健康监控。有关设置和使用它的更多信息，请访问[http://msdn.microsoft.com/en-us/library/bb398933(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398933(v=vs.100).aspx)

# java - Java 使用正则表达式查找和替换字符串

> ID：12317736
> 
> 赞同：0
> 
> 时间：2012-09-07T12:03:26.167
> 
> 标签：java

我需要以正则表达式格式指定**字符串 find**，以便可以找到 head 标签，无论其格式是`<html >`or`<html>`还是`< html>`。如何指定正则表达式格式的查找字符串？

```
String source = "<html >The quick brown fox jumps over the brown lazy dog.</html >";
String find = "<html>";
String replace = "";        
Pattern pattern = Pattern.compile(find);        
Matcher matcher = pattern.matcher(source);        
String output = matcher.replaceAll(replace); 
System.out.println("Source = " + source);
System.out.println("Output = " + output); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:08:00.443

尽管您可以通过做来解决您的问题`<\\s*html\\s*>`，但您**不应该**使用正则表达式处理 HTML。[强制性链接](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。

表示 0个`\\s*`或多个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:11:22.057

不要尝试使用正则表达式解析 HTML！尝试阅读有关`XPath`. 非常有帮助。虽然`XPath`默认情况下会尝试验证您的文档，但您可以尝试`HtmlCleaner`使其有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:14:50.523

这个例子可能对你有帮助。

```
String source = "<html >The quick brown fox jumps over the brown lazy dog.</html >";

        String find = "\\<.*?>";
        String replace = "";        
        Pattern pattern = Pattern.compile(find);        
        Matcher matcher = pattern.matcher(source);        
        String output = matcher.replaceAll(replace); 
        System.out.println("Source = " + source);
        System.out.println("Output = " + output); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:09:36.843

要在标签中提取文本，请使用类似

```
String source = "<html >The quick brown fox jumps over the brown lazy dog.</html >";
System.out.println( source.replaceAll( "^<\\s*html\\s*>(.*)<\\s*\\/html\\s*>$", "$1" ) );
// output is:
// The quick brown fox jumps over the brown lazy dog. 
```

但尽量避免通过正则表达式解析 html。阅读[本主题](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

# python - 我的简单的基于控制台的 python 代码可以在网络上工作吗？

> ID：12317751
> 
> 赞同：-4
> 
> 时间：2012-09-07T12:04:38.480
> 
> 标签：python, web

简单的 Python 代码能否在 Web 服务器上工作（安装了 Apache2）。代码保存为 hello.py。

```
def hello():
    print ("Hello there Python!!") 
```

这只是一个例子。此代码将在控制台中运行。这段代码可以在网络上运行吗？我的问题是：基于控制台的应用程序是否可以在保存为 .py 扩展名的网络上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T12:16:50.740

你的问题很模糊。您应该尝试阅读更多关于使用 python 作为服务器端脚本语言的信息，并在您有一些更具体和具体的问题时回来。尝试和谷歌“使用 python 作为服务器端脚本语言”并查看此链接[http://docs.python.org/howto/webservers.html](http://docs.python.org/howto/webservers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:21:13.027

不...

因为网页通过 HTTP 协议运行，这意味着您的服务器需要：

*   接收 HTTP 请求
*   处理该请求
*   创建响应
*   通过 HTTP 发回您的响应

通过使用 python，您只能处理输入数据（列表第 2 步的一部分）。

至于解决方案，您必须使用 Web 框架来处理其他部分并使用 Web 服务器（如 apache）。

存在像[Django](https://www.djangoproject.com/)或[Web.py](http://webpy.org/)这样的优秀 Web 框架，但最好检查您的需求并选择合适的框架。

# c# - ASP.net - 用相机捕捉视频并在网页中播放

> ID：12317753
> 
> 赞同：2
> 
> 时间：2012-09-07T12:04:47.353
> 
> 标签：c#, asp.net

我想用网络摄像头捕捉视频并在我的网站上实时播放。
我不知道该怎么办！

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:16:12.763

使用纯 ASP.NET，您不能。您有几种选择，我在 .NET 驾驶室中知道的唯一一种选择是使用 Silverlight（例如[http://www.silverlightshow.net/items/Capturing-the-Webcam-in-Silverlight-4.aspx](http://www.silverlightshow.net/items/Capturing-the-Webcam-in-Silverlight-4.aspx)和[http://forums.silverlight.net/t/145729.aspx](http://forums.silverlight.net/t/145729.aspx)）

您的其他选择是使用 Flash 或购买第三方组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T03:29:45.247

您可以使用开发中的 HTML5 视频标准来做到这一点。我记得在演示文稿中看到了一个网络摄像头应用程序的工作演示（我认为 Google 的 HTML 可以做到这一点）。查看这些页面以获取想法/示例：

[http://www.sitepoint.com/stream-your-webcam-to-a-browser-in-javascript/](http://www.sitepoint.com/stream-your-webcam-to-a-browser-in-javascript/)

[http://www.iandevlin.com/blog/2012/06/html5/filtering-a-webcam-using-getusermedia-and-html5-canvas](http://www.iandevlin.com/blog/2012/06/html5/filtering-a-webcam-using-getusermedia-and-html5-canvas)

[http://www.webrtc.org/](http://www.webrtc.org/)

[https://wiki.mozilla.org/Platform/Features/Camera_API](https://wiki.mozilla.org/Platform/Features/Camera_API)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:02:06.283

如果您想从您控制的单台计算机上显示视频（例如老式的“网络摄像头”页面），那么您需要编写一些本地计算机软件（可能使用 DirectShow 或 MediaFoundation）从您的摄像头捕获帧并将它们传输到您的网络服务器和您的页面有一个简单的脚本，它会导致图像每秒钟左右重新加载一次。这不是真正的视频，但直到最近它是网络摄像头页面的工作方式。

现在，在 2012 年，您可以直接提供视频服务。您可能想使用 Apple 的“HTTP 视频流”之类的东西，其中相机的视频流（不是单个帧）被保存成几秒钟长的块，然后不断推送到服务器。然后，网络服务器提供一个永无止境的播放列表，列出所有可用的视频块，然后浏览器根据需要下载这些块。这消除了对流媒体服务器（如 Microsoft 的 WMS 或 Adob​​e 的 Flash Media Server）的需求。

# iphone - 如何在 TableView 中获得填充？

> ID：12317755
> 
> 赞同：1
> 
> 时间：2012-09-07T12:04:56.810
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个带有深色透明背景的 TableView，我想要一个填充，我尝试使用`contentInsets`, `contentSize`和`contentOffset`：

```
CGFloat padding = 10.0f;
CGSize size = self.tableView.bounds.size;
size.width -= (padding*2);
size.height -= (padding*2);
self.tableView.contentSize = size;
self.tableView.contentInset = UIEdgeInsetsMake(padding, padding, padding, padding);
self.tableView.contentOffset = CGPointMake(-padding, -padding); 
```

那是行不通的。我得到了填充，但单元格既没有调整大小也没有重新定位。

我知道，我可以将 TableView 嵌套在另一个视图中，但应该有另一种解决方案。

编辑：

我实际上对“contentSize”的含义有一个误解。这不是视口的大小，而是内容的实际大小。所以我可能不得不..

1.  如果可能，调整单个单元格的大小（可能与 TableView 的布局过程发生冲突）
2.  如上所述对 TableView 应用内容偏移量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:46:52.117

对于宽度，您将不得不弄乱每个单元格框架。至于顶部和底部插图，使用 setContentInset：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:13:49.057

如果你想为你的 tableview 做一个 puffing，只需改变它的框架。

如果您想为您的单元格填充，请尝试以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

      static NSString *CellIdentifier = @"Custom";

      UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
      if (cell == nil) {
            CGRect cellFrame = CGRectMake(20,0,200,200); //CHANGE FRAME FOR YOUR APP
            UITableViewCell *cell = [[[UITableViewCell alloc] initWithFrame:cellFrame reuseIdentifier:CellIdentifier] autorelease];

      }

          //INSERT YOUR CODE TO RETRIVE TEXT TO INSERT INTO A CELL

    return cell;
} 
```

# drupal - 视图中的节点正文字段自动删除 HTML 标记

> ID：12317763
> 
> 赞同：0
> 
> 时间：2012-09-07T12:05:24.360
> 
> 标签：drupal, drupal-views

我想在视图中输出完整的节点正文代码，但 HTML 标记会自动剥离。问题是没有选中“Strip HTML tags”复选框。

所以，而不是例如：

```
<p>Example</p> 
```

我得到：

```
Example 
```

编辑：我发现我没有很好地解释我的问题。我想要得到的不是例如 5 段。我想显示代码。例如：

```
<p>Paragraph1</p>
<p>Paragraph2</p>
<p>Paragraph3</p> 
```

代替：

```
Paragraph1
Paragraph2
Paragraph3 
```

目的是导出代码以在另一个安装中导入这些节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:40:34.320

您可能已将节点正文字段的文本格式设置为`<p>`在内容进入视图之前去除标签。编辑受影响的节点之一，确保文本格式未设置为“纯文本”，并确保其`<p>`位于“允许的 HTML 标记”列表中。

（对于 Drupal7）如果它不在列表中，请转到主页 » 管理 » 配置 » 内容创作并单击文本格式 (/admin/config/content/formats)。单击要更改的文本格式的“配置”。添加`<p>`到“过滤器设置”中的“允许的 HTML 标记”列表中。或者，您可以设置不限制允许的 HTML 标记的新文本格式。

（对于 Drupal6）转到 /admin/settings/filters，单击要更改的文本格式的“配置”，然后单击其“配置”选项卡。

如果要显示正文字段的 HTML，则需要对 HTML 进行“转义”，以便浏览器不会呈现它。我知道这样做的唯一方法是将每个节点的文本格式设置为“纯文本”，然后将您的视图字段格式化程序更改为“默认”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:44:20.407

如果你想得到带有 HTML 标签的输出，你可以做两件事：

1.  构建一个普通视图，然后从查看源选项或 Firebug 复制/粘贴 HTML 代码

2.  使用此处发布的 Views 数据导出模块的补丁：http: [//drupal.org/node/1224894](http://drupal.org/node/1224894)。这样您就可以导出包含 HTML 标记的字段。

# javascript - 根据屏幕宽度显示块

> ID：12317766
> 
> 赞同：0
> 
> 时间：2012-09-07T12:05:33.933
> 
> 标签：javascript, jquery, css, screen

我正在寻找有关如何在此页面 [http://www.eonline.com上显示和调整块的方法](http://www.eonline.com)

Js 小提琴 [http://jsfiddle.net/3pcDe/](http://jsfiddle.net/3pcDe/)

提前感谢您的任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:10:15.953

jQuery masonry 是你的朋友

[http://masonry.desandro.com/](http://masonry.desandro.com/)

这是一个非常简单的使用具有各种选项的插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:43:27.003

或者，更好的是，让 Masonry 的大姐姐 Isotope 大放异彩——她可以在 Masonry 之上做各种花样，而且很容易上手。两者都是由同一个开发者开发和维护的；砌体是第一位的，Isotope 是作为一种进步而构建的，具有排序、过滤和其他很酷的功能，请[在此处](http://isotope.metafizzy.co/)查看并亲自尝试。

# c# - 请求被中止：无法创建 SSL/TLS 安全通道

> ID：12317771
> 
> 赞同：12
> 
> 时间：2012-09-07T12:05:47.673
> 
> 标签：c#, httpwebrequest, x509certificate2

> **可能重复：**
> [请求被中止：无法创建 SSL/TLS 安全通道](https://stackoverflow.com/questions/2859790/the-request-was-aborted-could-not-create-ssl-tls-secure-channel)

我正在尝试使用客户端证书发送 http 请求。文件，在本例中为 `.p12`文件。但是，当它到达该行时`responseStream = httpRequest.GetRequestStream();`，它会抛出一个 WebException：`System.Net.WebException: The request was aborted: Could not create SSL/TLS secure channel.`

我在 IIS7.5（在 Windows 7 上）上对此进行调试，其中应用程序池标识为“LocalSystem”。

我该如何解决这个问题？

```
 System.IO.Stream responseStream = null;
        string errorString = string.Empty;
        ;
        string postData = string.Empty;
        HttpWebRequest httpRequest = null;
        System.Text.Encoding Encoding = new System.Text.UTF8Encoding();
        try
        {
            XmlDocument orderXml = new XmlDocument();
            orderXml.Load(@"c:\xmlfile.xml");
            postData = orderXml.InnerXml;

            byte[] byte1 = Encoding.GetBytes(postData);

            httpRequest = (HttpWebRequest)WebRequest.Create("https://testurl.com/SOAP_v1_0/");
            httpRequest.Method = "POST";
            httpRequest.Timeout = 9000;
            httpRequest.KeepAlive = false;
            httpRequest.ContentType = "text/xml; charset=" + "utf-8";
            httpRequest.ContentLength = byte1.Length;

            X509Certificate2 certificate = new X509Certificate2(@"c:\file.p12", "password", X509KeyStorageFlags.Exportable);
            X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);

            try
            {
                store.Open(OpenFlags.ReadWrite);

                if (!store.Certificates.Contains(certificate))
                {
                    store.Add(certificate);
                }

                int indexOfCertificate = store.Certificates.IndexOf(certificate);
                certificate = store.Certificates[indexOfCertificate];
            }

            finally
            {
                store.Close();
            }

            httpRequest.ClientCertificates.Add(certificate);

            responseStream = httpRequest.GetRequestStream();

            responseStream.Write(byte1, 0, byte1.Length);
        }
        catch (WebException webExcp)
        {
            errorString += "Error message: " + webExcp.Message;

            // Get the WebException status code.
            WebExceptionStatus status = webExcp.Status;

            if (status == WebExceptionStatus.ProtocolError)
            {
                // Get HttpWebResponse so that you can check the HTTP status code.
                HttpWebResponse httpResponse = (HttpWebResponse)webExcp.Response;
                errorString += "; The server returned protocol error " + httpResponse.StatusCode + " - " + httpResponse.StatusCode;
                httpResponse.Close();
            }
        }
        catch (Exception e)
        {
            errorString += "Error message: " + e.Message;
        }
        finally
        {
            if (responseStream != null)
            {
                responseStream.Close();
            }
        }
    } 
```

使用跟踪日志运行时，这些是指定错误的行：

```
System.Net Information: 0 : [4968] SecureChannel#2399524 - Certificate is of type X509Certificate2 and contains the private key.

System.Net Information: 0 : [4968] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)

System.Net Error: 0 : [4968] AcquireCredentialsHandle() failed with error 0X8009030D.

System.Net Information: 0 : [4968] AcquireCredentialsHandle(package = Microsoft Unified Security Protocol Provider, intent  = Outbound, scc     = System.Net.SecureCredential)

System.Net Error: 0 : [4968] AcquireCredentialsHandle() failed with error 0X8009030D.
System.Net.Sockets Verbose: 0 : [4968] Socket#59311937::Dispose()

System.Net Error: 0 : [4968] Exception in the HttpWebRequest#50160154:: - The request was aborted: Could not create SSL/TLS secure channel.

System.Net Error: 0 : [4968] Exception in the HttpWebRequest#50160154::EndGetRequestStream - The request was aborted: Could not create SSL/TLS secure channel. 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-08T03:56:30.570

您需要为您的应用创建一个 system.net 日志。您需要创建一个 myapp.exe.config 配置文件并将以下内容放入其中。

```
<?xml version="1.0" encoding="UTF-8"?>

<configuration>
    <system.diagnostics>
        <trace autoflush="true" />
        <sources>
            <source name="System.Net">
                <listeners>
                    <add name="System.Net" />
                </listeners>
            </source>
            <source name="System.Net.Sockets">
                <listeners>
                    <add name="System.Net" />
                </listeners>
            </source>
            <source name="System.Net.Cache">
                <listeners>
                    <add name="System.Net" />
                </listeners>
            </source>
        </sources>
        <sharedListeners>
            <add
                name="System.Net"
                type="System.Diagnostics.TextWriterTraceListener"
                initializeData="System.Net.trace.log"
            />
        </sharedListeners>
        <switches>
            <add name="System.Net" value="Verbose" />
            <add name="System.Net.Sockets" value="Verbose" />
            <add name="System.Net.Cache" value="Verbose" />
        </switches>
    </system.diagnostics>
</configuration> 
```

如果您使用此配置文件运行，它将创建一个名为 system.net.trace.log 的日志文件。该文件将包含有关失败原因的更多详细信息。

# css - CSS 不适用于 Firefox

> ID：12317772
> 
> 赞同：1
> 
> 时间：2012-09-07T12:05:50.263
> 
> 标签：css, firefox

在 Chrome 和其他浏览器中，这可以正常工作，但在 Firefox 中则不然。在 Firefox 中，它还显示“编辑”文本和图像。我只想显示编辑图像。

# HTML 代码

```
<td align="center">
<a id="lnkEdit" class="RemoveDecoration" href="javascript:__doPostBack('lnkEdit','')">
<img id="imgEdit" class="EditImage" style="border-style:None;" alt="Edit" src="">
</a>
</td> 
```

# 我的 CSS：

```
.EditImage a{
    background-image:url(../Images/Edit.png) ;
    background-repeat:no-repeat;
    height:14px;
    width:13px;
    background-position:-20px -3px;
    border:none;
     }  .EditImage:hover {
    background-image:url(../Images/Edit.png) ;
    background-repeat:no-repeat;
    height:14px;
    width:14px;
    background-position  : -2px -2px;
    border:none;
     } 
```

见图片：

![在此处输入图像描述](../Images/9223243475ceeda98a78ea5bc165c233.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:08:42.727

它显示“编辑”，因为图像标签的 src="" 属性为空。所以它显示了备用 (alt=) 文本。

背景图像在背景中，所以

坏空 src=""

```
<img id="imgEdit" class="EditImage" style="border-style:None;" alt="Edit" src=""> 
```

改为这样做：

```
<img id="imgEdit" class="EditImage" style="border-style:None;" alt="Edit" src="../Images/Edit.png"> 
```

并删除 CSS 中的 background-image 属性

# java - 带有组合库的 jar 文件中的类路径

> ID：12317777
> 
> 赞同：0
> 
> 时间：2012-09-07T12:06:25.537
> 
> 标签：java, jar, classpath

我正在尝试创建一个关于它需要的库的“自包含”的 jar 文件。

因此，我创建了以下 ant 文件：

```
<project name="srv" default="prod">
    <target name="prod">
        <jar destfile="build/ServerApplication.jar" basedir="bin/">
            <restrict>
             <name name="**/*.class"/>
             <archives>
               <zips>
                 <fileset dir="lib/" includes="**/*.jar"/>
               </zips>
             </archives>
            </restrict>
            <manifest>
                <attribute name="Class-Path" value="." />
                <attribute name="Main-Class" value="my.package.ServerApplication" />
            </manifest>
        </jar>
    </target>
</project> 
```

但是，当我尝试使用启动应用程序时

```
> java -jar ServerApplication.jar 
```

我收到一个错误

> 找不到适合 jdbc 的驱动程序：mysql://localhost/db?user=root&password=

我认为这是因为`com.mysql.jdbc`找不到 jar 内的包。为什么是这样？当我将*Class-Path*设置为 时`.`，jar 不应该能够找到该 jar 中的所有类吗？

我在反编译器中打开了 jar，所有的类都在它们需要的地方，见这里：

![反编译的 JAR](../Images/20423d1bf94cab72fdc21b6f36b22bde.png)

这里出了什么问题？我的清单看起来像这样：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.7.0_07-b10 (Oracle Corporation)
Main-Class: my.package.ServerApplication
Class-Path: . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:13:01.777

我认为您应该完全避免设置类路径，并且由于您将所有内容都打包在 uber-jar 中 - 它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:13:30.993

如果您希望它们包含在空格中，则必须明确写出 jar 的名称。否则，我建议只需启动您的 jar 并手动提供类路径作为参数：

```
java -cp . -jar ServerApplication.jar 
```

[浏览此处获取更多信息。](http://www.velocityreviews.com/forums/t130090-jar-files-and-manifest-class-path.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:24:00.300

也许你可以试试[fatjar](http://fjep.sourceforge.net/)这个优秀的 eclipse 插件。它曾多次使用它来包含基于 Java Swing 的应用程序的所有依赖项。

# php - jQuery（不带 $.ajax）$.POST+json 从 PHP json_encode 检索“null”

> ID：12317785
> 
> 赞同：1
> 
> 时间：2012-09-07T12:07:13.687
> 
> 标签：php, jquery, ajax, json

我第一次写，但不是第一次在这里。我感到被迫在这里提问，因为这里没有一个明显相似的问题能够给我一个明确的解决方法或解决方案。我的项目涉及井字游戏，全部基于 jQuery、PHP 和日志文件。它工作正常，但是对于发送到 txt 日志的每条信息，我必须添加一个新的 $.post 来检索将显示在页面不同部分的信息，而不是全部在一个列表中（特别是 O 和 X被检索回其原始文本元素）...游戏是实时的，多人游戏并且运行良好，但使用由 PHP 编写的两个 txt 日志，它也管理游戏：一个日志保持位置（填充空间）和另一个使用了什么字符（X 或 O）。很好，但我通过 $.post 给这两个打电话，将它们的数据存储在各自的全局变量中并在 setInterval 中使用它们，以便为其他玩家及时更新。但是由于还有许多其他信息，例如名称和剩余动作（从 9 到 1），我想将所有内容放在一个日志中，这样更容易一次检索并在游戏中显示在各自的位置页。我的问题（现在我现在需要开始工作）是从 PHP 中检索它们。在测试过程中，我模拟了三个信息：位置、字符（O 或 X）和玩家姓名，将它们放在一个数组中并用 json_encode 回显它们，如下所示（我的 jQuery 帖子，然后是我的 PHP）：一些更容易一次检索并通过游戏页面显示在各自位置的东西。我的问题（现在我现在需要开始工作）是从 PHP 中检索它们。在测试过程中，我模拟了三个信息：位置、字符（O 或 X）和玩家姓名，将它们放在一个数组中并用 json_encode 回显它们，如下所示（我的 jQuery 帖子，然后是我的 PHP）：一些更容易一次检索并通过游戏页面显示在各自位置的东西。我的问题（现在我现在需要开始工作）是从 PHP 中检索它们。在测试过程中，我模拟了三个信息：位置、字符（O 或 X）和玩家姓名，将它们放在一个数组中并用 json_encode 回显它们，如下所示（我的 jQuery 帖子，然后是我的 PHP）：

```
<script type="text/javascript" src="jquery.js"></script>

$.post ("json.php", {pos:"pos",weapon:"weapon",nome:"nome"}, function(data){

alert (data); //returns null...
//alert (data.pos); //nothing, script ignores execution
//alert (data[0].pos); //returns null...
//alert (data[1].pos); //returns null...
//alert (data[2].pos); //returns null...
//alert (data[3].pos); //returns null...
//tests above based on some suggestions I'fe found through the web, ineffective...

},"json"); 
```

还有我的 PHP：

```
<?php

//Simulating values being received during the game:

$pos='s3'; //simulation player's move on slot 3
$weapon='O'; //player puts O on slot 3
$name= 'fulano';

//Putting general player info into the array to be used by jQuery:

$coord= array();

$coord['pos']= $pos; //Sets the position where the player put his char
$coord['weapon']= $weapon; //The "weapon" to be put in respective "pos"
$coord['nome']=$name; //Player's name to be displayed during the game

echo json_encode($coord); //encoded json is returning {"pos":"s3","weapon":"O","nome":"fulano"} nicely
?> 
```

两者都是post，都使用json，jQuery返回一些东西，但是是空的，PHP回声还好...... $.ajax根本没有成功......我需要的是：$.post检索每个数据，这样我就可以将它们一一存储在它们各自的全局变量中，但如果警报甚至无法显示其中一个即将到来，则说明有问题。更改了每个变量名称以避免任何类型的冲突，但没有解决...我进行此测试只是为了确保 jQuery 清楚地获取 PHP json，这里没有发生什么。我的 HTML 使用默认字符集，我在 localhost 中对其进行测试，我的主项目在这里完美运行，这是专门测试 json 响应的侧面测试。我在使用 $.ajax ({}) 时根本没有成功（我的 jQuery 是 1.7.1），无论如何，脚本只是停止执行，PHP 在这里一直响应正常，但是 jQuery 没有给我除了“null”之外它应该得到的东西，我已经在 FF15 和 IE8 上对其进行了测试，问题只是我在 jQuery 上的 json 例程，PHP 工作正常，我的 $.posts 在这里和主项目上， 也。这里可能出了什么问题？为什么不管我尝试什么，它只是简单地将数据返回为空？我提前感谢大家，我只是问，因为这里和外部没有真正给我答案的例子，而且 99,9% 依赖于 Ajax，但我相信它可以像这样更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T14:16:26.840

将此添加到您的代码中

```
$.post ("json.php", {pos:"pos",weapon:"weapon",nome:"nome"}, function(data){
     $(data).each(function(){
            alert(this.s3);
            alert(this.0);
            alert(this.fulano);
     });
},"json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:44:39.823

有效的 JSON 如下：`{"key":"value"}`不是`{key:"value"}`

注意：所有引用都封装了，而不仅仅是值。希望有帮助。

# wordpress - 在 wordpress 中搜索

> ID：12317786
> 
> 赞同：0
> 
> 时间：2012-09-07T12:07:22.933
> 
> 标签：wordpress, search, http-status-code-404

我的问题，当我在**WP**中搜索**英语**时，它运行良好，但是当我开始搜索**俄语**或**日语**时，它会将我重定向到页面 {site.com}/search 并显示 404 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:14:21.403

该查询的记录可能为零。开始搜索可能与您的数据库匹配的结果。我的意思是搜索已经在数据库中的内容，否则您将被重定向到 404 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:04:22.750

您是否使用自定义搜索脚本或任何搜索功能挂钩？或者您使用默认的 WordPress 搜索表单？

# php - PHP从函数返回一个对象

> ID：12317789
> 
> 赞同：1
> 
> 时间：2012-09-07T12:07:32.857
> 
> 标签：php

我的问题是这个（在 PHP 中）：

我有三个班，

```
Class cls1 {
    public function myfunc() {

    }
}
Class cls2 {
    private $_obj1; //type of cls1
    ...
    public function getObj1() {
        return $_obj1;
    }
}

Class cls3 {
    ...
    public function getMyFunc() {
        $temp = new cls2();
        $temp->getObj1()->myfunc(); //THIS IS NOT WORKING.
        //PHP Throws an error like : Fatal error: Call to a member function getId() on a non-object in xyz.php on line 125.
    }
} 
```

我无法通过 cls2 的方式从 cls3 到达 cls1 的功能。

我该如何实施？

**注意：**我编写了这个基本代码来显示问题。不要考虑语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:09:16.490

您必须先实例化 $temp 对象的 $_obj1 属性，然后才能检索它。例如，在 cls2 构造函数中执行此操作。此外，您需要在类中正确引用私有属性，使用 this 关键字来引用实例。

```
Class cls2 {
    private $_obj1; //type of cls1
    ...
    public function __construct(){
        $this->_obj1 = new cls1();
    }

    public function getObj1() {
        return $this->_obj1;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:11:17.013

Object1 尚未实例化。

```
Class cls1 {
    public function myfunc() {

    }
}
Class cls2 {
    private $_obj1; //type of cls1
    ...
    public function getObj1() {
        if(!$this->$_obj1 instanceof cls1) {
            $this->_obj = new cls1();
        }
        return $_obj1;
    }
}

Class cls3 {
    ...
    public function getMyFunc() {
        $temp = new cls2();
        $temp->getObj1()->myfunc(); //THIS IS NOT WORKING.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:18:50.603

这可能是一种不好的做法。当您可以简单地在第二个类中扩展第一个类时，为什么要创建一个类并将其实例化到另一个类中。

```
<?php
class cls1 {
    public function myFunc() {
        echo "I am myFunc!";
    }
}
class cls2 extends cls1 {
    public function getObj1() {
        return $obj1;
    }
}
class cls3 {
    public function getMyFunc() {
        $temp = new cls2();
        $temp->myFunc();
    }
}
$a = new cls3();
$a->getMyFunc();
?> 
```

# android - 将图像更改为以编程方式创建的按钮

> ID：12317790
> 
> 赞同：-1
> 
> 时间：2012-09-07T12:07:33.743
> 
> 标签：android, android-imageview, android-image

我已经创建了一个带有按钮的界面，但是我不知道需要创建多少个按钮，所以我在 java 中创建了它们，代码如下：

```
public void criaButton (String nome){

    TableLayout tl=(TableLayout)findViewById(R.id.tabBTALERT);    
    TableRow tr1 = new TableRow(this);
    tr1.setPadding(17, 15, 15, 5);
    final Button bt = new Button(this);
    bt.setText(nome);
    bt.setTextColor(Color.BLACK);
    bt.setBackgroundResource(R.drawable.botao);
    bt.setCompoundDrawablesWithIntrinsicBounds(R.drawable.envelope, 0, 0, 0);
    bt.setPadding(10, 20, 20, 20);
    bt.setId(id);
    tr1.addView(bt);
    tl.addView(tr1);
    bt.setOnClickListener( new View.OnClickListener() {
        public void onClick(View arg0) {

            idButton = bt.getId();
            nomeButton = (String) bt.getText();

            inicia ();
            Toast.makeText(Alerta.this, "Nome e ID : " + nomeButton + " " + idButton, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

使用这种方法，我可以保存我创建的每个按钮的 ID 和名称。问题是，这些按钮有一个图像，当我开始另一个活动时，我必须更改图像，如果消息被阅读、未阅读、批准或拒绝。

问题是，如何提供按钮的 id 来更改图像并使用更改后的图像重新开始活动？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:23:59.530

将按钮 id 保存在一个数组中，然后通过它们的 id 找到按钮并将它们的图像更改为所需的图像。

# ruby - 没有 Nokogiri 的 Ruby 中的 Curl 解析？

> ID：12317791
> 
> 赞同：1
> 
> 时间：2012-09-07T12:07:35.270
> 
> 标签：ruby, nokogiri, rest-client

> **可能重复：**
> [ruby 中的简单解析](https://stackoverflow.com/questions/12319221/simple-parsing-in-ruby)

我正在尝试验证网站中的标题，经过反复试验，我发现这可以通过使用 nokogiri 和 rest-client 在 ruby​​ 中完成

```
 require 'nokogiri'
 require 'rest-client'

 page = Nokogiri::HTML(RestClient.get("http:/#{user.username}.domain.com/"))   
 simian = page.at_css("title").text 
     if simian == "Welcome to"
       puts "default monkey" 
   else 
   puts "website updated"       
    end 
```

不幸的是，对于大量网站来说，这似乎并不总是有效，因为它在 /admin/users/list 500 Internal Server Error 处返回 RestClient::InternalServerError

我想知道是否有任何选项可以通过简单地使用 mycurl = %x(curl [http://.......](http://.......) .) 来实现相同的效果，通过解析标题而不使用它是一种有效的方法任何宝石或 curl 选项可以直接与 nokogiri 一起使用吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:35:52.573

在阅读了您的问题后，不确定您是否已经设置了这两个宝石，这是另一种可能证明更简单的方法。

```
require 'open-uri'

url="http://google.com"
source = open(url).read
source[/<title>(.*)<\/title>, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:47:02.897

这有两个部分。一个是获取页面，另一个是解析。对于获取，您并不需要`rest-client`gem，只要`open-uri`从标准库中就可以了。Nokogiri 进行解析，这不太可能是您的问题。尝试这个：

```
require 'open-uri'
require 'nokogiri'

page = Nokogiri::HTML(open('http://example.com/'))
puts page.at('title').text 
```

# php - 用户选择背景问题

> ID：12317803
> 
> 赞同：0
> 
> 时间：2012-09-07T12:08:32.307
> 
> 标签：php

**概述**：我有允许用户选择背景的脚本，此选项保存在 mysqlDB 中。然后在登录时将其提取并保存在会话中。

**问题：**我遇到的问题是在 IE 中只显示背景而网页内容不显示。它适用于 chrome，我已经阅读了显示背景的不同方法，但它似乎不起作用。我的脚本有什么问题吗？

**脚本**：

```
<style> body { background: url('http://domain.co.uk/images/assets/<?php echo "".$_SESSION["USER"]["bg"]."" ?>.jpg')  no-repeat top; } </style> 
```

*会话开始脚本*

```
<?php 
session_start();
if(!isset($_SESSION["USER"])){
    header("Location: ../index.php");
}
?> 
```

*检查登录/生成会话*

```
if(mysql_num_rows($result) == 1){
while($user_data = mysql_fetch_array($result)) {
$_SESSION["USER"]["bg"] = $user_data["bg"]; 
```

我的启动会话脚本和生成作品，我在这里发布了相关的片段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:39:19.903

实际上`<style>`必须包含在里面`head`。或者您可以将属性添加`style="background: url('http://example.com/images/assets/<?=$_SESSION["USER"]["bg"]?>.jpg"`到`<body>`标签。我认为这会有所帮助。

# android - 如何在android中动态添加具有多列的行？

> ID：12317807
> 
> 赞同：5
> 
> 时间：2012-09-07T12:08:38.190
> 
> 标签：android, user-interface

嗨，我已经开发了如下屏幕所示的 UI。现在我想在最后一个加号按钮单击事件中添加 UI 中的最后一行。

我知道如何添加`Button`或`EditText`动态添加，但我不知道如何添加和删除动态具有多列的行。

**编辑：-**关于最后一行的一个重要的事情是每一列都是可编辑的。这意味着我需要每列的引用来获取它的内容。当我动态添加行时，加号按钮应该放在新行中。同样，如果我删除行行加号按钮应该移到上排。

我该怎么做。任何指南或任何方法都将不胜感激。

![在此处输入图像描述](../Images/e995ed69c9c4a14024d46a4a7af8a2e5.png) 这是我的 XML 文件。

```
<?xml version="1.0" encoding="utf-8"?>
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  >

<RelativeLayout 
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/navi_bar" />

<Button
    android:id="@+id/title_bar_btnBack"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="3dp"
    android:background="@drawable/back_button_image" />

<Button
    android:id="@+id/title_bar_btnExport"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="35dp"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/title_bar_btnBack"
    android:layout_marginRight="10dp"
    android:background="@drawable/export_button_normal" />

<!-- Create PDF Part 2 -->

<ImageView
    android:id="@+id/pdf_Upper_Image"
    android:layout_width="wrap_content"
    android:layout_height="45dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/title_bar_btnBack"
    android:background="@drawable/grid_bg_part1" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/pdf_Upper_Image"
    android:layout_alignParentLeft="true"
    android:text="Kassenbuch"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#3EC7F9"
    android:textSize="23dp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="2dp"
    android:layout_toRightOf="@+id/textView1"
    android:text="Name :"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/txtName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView2"
    android:layout_alignTop="@+id/textView2"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/textView2"
    android:text="Akshay"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<!-- Custom Pdf Part 2 -->

<ImageView
    android:id="@+id/pdf_Middle_Image"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/pdf_Upper_Image"
    android:background="@drawable/grid_bg_part2" 
    android:layout_marginLeft="1dp"
    android:layout_marginRight="1dp"
    />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/pdf_Middle_Image"
    android:layout_marginLeft="2dp"
    android:text="Einnahmen"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/txtName"
    android:layout_alignTop="@+id/txtName"
    android:layout_marginLeft="82dp"
    android:layout_toRightOf="@+id/txtName"
    android:text="Month :"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_alignLeft="@+id/textView4"
    android:layout_marginBottom="2dp"
    android:text="Mand Nr. :"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/txtMand"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView5"
    android:layout_alignTop="@+id/textView5"
    android:layout_toRightOf="@+id/textView5"
    android:text="Mand"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/txtMonth"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/txtName"
    android:layout_alignTop="@+id/textView4"
    android:layout_toRightOf="@+id/textView5"
    android:text="05"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9" 
    android:textSize="12dp" 
    />

<TextView
    android:id="@+id/textView8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/txtYear"
    android:layout_alignTop="@+id/txtMonth"
    android:layout_toLeftOf="@+id/title_bar_btnExport"
    android:text="Year :"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/textView9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView5"
    android:layout_alignBottom="@+id/textView5"
    android:layout_alignLeft="@+id/textView8"
    android:text="Blatt :"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/txtYear"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/txtMonth"
    android:layout_alignLeft="@+id/title_bar_btnExport"
    android:layout_alignTop="@+id/txtMonth"
    android:text="2012"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/pdf_Middle_Image"
    android:layout_marginLeft="10dp"
    android:layout_toRightOf="@+id/textView3"
    android:text="Ausgabne"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9" >
</TextView>

<TextView
    android:id="@+id/textView7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/pdf_Middle_Image"
    android:layout_marginLeft="15dp"
    android:layout_toRightOf="@+id/textView6"
    android:text="Bestand"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9" />

<TextView
    android:id="@+id/textView12"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/pdf_Middle_Image"
    android:layout_toLeftOf="@+id/txtMand"
    android:text="Datum"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9" />

<TextView
    android:id="@+id/textView13"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/pdf_Middle_Image"
    android:layout_toLeftOf="@+id/textView5"
    android:text="Beleg Konto"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="8dp" />

<TextView
    android:id="@+id/textView14"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView13"
    android:layout_alignTop="@+id/pdf_Middle_Image"
    android:layout_marginRight="03dp"
    android:layout_toLeftOf="@+id/textView13"
    android:text="Gegen Konto"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="08dp" />

<TextView
    android:id="@+id/textView15"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView3"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/textView14"
    android:text="Anfangsbestand/Ubertrag"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="9dp" />

<TextView
    android:id="@+id/textView11"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView13"
    android:layout_alignTop="@+id/pdf_Middle_Image"
    android:layout_marginLeft="25dp"
    android:layout_toRightOf="@+id/textView12"
    android:text="USt satz."
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="09dp" />

<TextView
    android:id="@+id/txtBlatt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView9"
    android:layout_alignBottom="@+id/textView9"
    android:layout_toRightOf="@+id/textView9"
    android:text="Blatt"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<TextView
    android:id="@+id/textView10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView11"
    android:layout_alignLeft="@+id/textView9"
    android:text="Text"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9" />

<include android:id="@+id/firstRow"
     layout="@layout/custom_pdf3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/pdf_Middle_Image"
        android:layout_marginLeft="2dp"
        android:layout_marginRight="2dp"/>

 </RelativeLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:30:59.480

创建一个代表完整行的布局，然后您可以使用：

`public View inflate (int resource, ViewGroup root)`从`LayoutInflater`（`android.view`包中的一个类）到**`new view hierarchy`**从指定的 XML 资源（例如你的新行）中膨胀一个。

现在，您可以使用特定标签将此视图（您的行）动态添加到主布局中（例如将按钮动态添加到布局中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:18:29.700

1.  创建一个 XML 布局文件，它将代表列表视图中的一个“行”。
2.  使用基本适配器实现自定义适配器。
3.  在该`getView()`方法中，膨胀 Xml 布局，引用内部项目（使用`outerLayout.findViewById()`，在`Listeners`此处设置，最后`return`将`view`.
4.  为您的侦听器编写实现。

够简单吗？:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:54:37.960

尝试在运行时创建整个布局。创建一个包含所有列的单行，并将最后一列的可见性设置为消失。按下加号按钮时更改可见性。我认为创建一行相对布局类型会很好。当您想删除一行时，您必须计算主布局中的相对布局，然后删除您要删除的索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:16:23.350

我想你会通过一个例子来最好地理解。让我们稍微简化一下。假设您的主要布局是这样的：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/main_layout" >

</TableLayout> 
```

这很简单`TableLayout`，还没有任何视图（您可以在其中包含预烘焙的行）。现在你想要创建`TableRows`你想要动态添加的东西，并分别处理它的子视图，对吧？`TableRow`你可以在 xml 中创建你的整体：

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/tablerow_textview"
        android:text="Hello" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/tablerow_button"
        android:text="World" />
</TableRow> 
```

然后是java部分。假设您想将其中的 10 行添加到 TableLayout 中，并分别处理每一行按钮。您可以这样做（您必须有权访问 Context 对象）：

```
// get the main TableLayout from xml
TableLayout layout = (TableLayout) findViewById(R.id.main_layout);  

// get a LayoutInflater object. 'this' is the current Activity
LayoutInflater inflater = LayoutInflater.from(this);

for(int i=0; i<10; i++)
{
    //Create an inflated instance of that layout
    TableRow row = (TableRow) inflater.inflate(R.layout.table_row, null);

    //Notice, that we call the findViewById() function on the previously 
    //inflated layout, which means, that we can only access its subviews
    Button rowButton = (Button) row.findViewById(R.id.tablerow_button);
    TextView rowText = (TextView) row.findViewById(R.id.tablerow_textview);

    //Now that you have those Views, you can do whatever you want with them, (set
    an onClickListener, change the text, etc)

    //finally we need to add the row to the table
    layout.addView(row);
} 
```

如果你的包装器为你的膨胀布局创建了一个类，它有自己的 getter-setter 函数，你可以用 new 操作符实例化它，所有的膨胀都将在后台完成，这也是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T06:46:01.553

您需要使用[自定义视图。](http://developer.android.com/training/custom-views/create-view.html)然后每个视图都可以是一个复杂的视图，你可以做任何你想做的事情，这个任务应该不容易。

```
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="2dp"
    android:layout_toRightOf="@+id/textView1"
    android:text="Name :"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#3EC7F9"
    android:textSize="12dp" />

<com.sample.MyCustomView
    android:id="@+id/myView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

然后`MyCustomView`可以是线性布局或其他。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T11:09:10.363

在上面的 xml

**你在 Textview 中做了所有的事情并进行了调整**

`Tablelayout`而不是使用它，您必须在您的 xml 文件中创建一个。

onButtonClick 事件，您必须动态创建一个新的 tablerow，然后使用添加组件`tablerow.addview(componentsname)`，最后将 tablerow 添加到 tablelayout

[简单的表格布局](http://huuah.com/using-tablelayout-on-android/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-15T08:06:34.603

在尝试了很多不同的事情之后，我解决了我的问题，如下所示。我在我的 xml 中进行了某些更改。我`LinearLayout`使用`ScrollView`.

我创建了一个具有完整行的 xml 文件。现在我的任务是按`LinearLayout`以下方式添加该 xml。我每次都在按钮单击事件上调用此方法。

```
 public void AddDynamicView() {

    linearLayout = (LinearLayout) findViewById(R.id.show_pdfTableLayout);

    layoutInflater = (LayoutInflater) getApplicationContext()
            .getSystemService(LAYOUT_INFLATER_SERVICE);
    view = layoutInflater.inflate(R.layout.custom_pdf3, null);

    linearLayout.addView(view);
    list.add(view);  // Here I have created list of View so that I can get the id of specific view.
          } 
```

我已经尝试过了，`TableLayout`但是我在占用整行时遇到了一些问题。这就是我使用`LinearLayout`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-16T08:24:07.680

可能我没看明白！！！

您可以使用 ListView 和 Adapter 完成问题中提到的所有操作。您可以提供一个数组来保存字段，使用数组提供适配器并使用适配器提供 listView。如果您需要一个新行，只需向数组中添加一个元素。如果要删除行，只需将其从数组中删除即可。如果要对项目进行排序，只需对数组进行排序。如果要选择上一个/下一个，只需使用列表视图选择方法。

我想知道您检查了您的答案，这不是绝对正确的方法。确实如此，但是如果您的目标 ui 很复杂，那么页面将需要比动态和优化的 ListView 更多的时间来呈现和滚动。

如果您认为我的回答听起来不错，请告诉我用一些代码更新它。

# ajax - 服务器端 Ajax Rails 3

> ID：12317810
> 
> 赞同：0
> 
> 时间：2012-09-07T12:08:52.323
> 
> 标签：ajax, ruby-on-rails-3, jquery

我有一个产品列表和一个名为“已售”的列。当用户将状态更改为 false 或 true 时，我希望我的 rails 应用程序更新产品的 html 页面索引，但只更新包含产品状态的“div”，而不重新加载所有 html 页面。是否有教程或宝石可以让我的生活更轻松？我找到的所有教程都是针对客户端 AJAX 请求的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:27:29.357

服务器发起的请求是不可能的，因为在 HTTP 下，“对话”总是由客户端启动的。如果你真的想这样做，你需要在你的网页中嵌入一个服务器并让它打开并监听一个端口，这是有问题的，因为没有办法从网页启动服务器并且因为许多网络阻塞传入的请求，有充分的理由。

更新已经显示的页面通常是通过让客户端定期通过 AJAX 轮询服务器来完成的（例如每隔几秒一次）以询问是否有任何更改。一种方法是让客户端发送其最后一次检查的时间，并在`Product.where("updated_at > ?", timestamp)`服务器端执行并返回该时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:40:09.877

将产品 ID 动态分配给行。在您要更改文本的“td”中添加一个“状态”类。

```
%tr{:id => "product_#{product.id}"}
  %td Cell #Product
  %td.status Available
  %td #link_to controller method where product status is changed to 'Sold.'. Set ":remote => true" for request to be ajax. 
```

创建一个文件 sell_product.js.haml （我考虑 haml 和 sell_product 作为控制器方法）。在 js 文件中搜索具有特定 id 和 $('.status').text() 到“可用”的表行并将其替换为“已售”

# android - 如何在从 listview 调用的对话框中设置 Android 按钮？

> ID：12317814
> 
> 赞同：0
> 
> 时间：2012-09-07T12:09:07.037
> 
> 标签：android, button, dialog

我有这样的代码：

```
public class Screening extends ListActivity implements OnClickListener{
...
Button screeningOK, set, cancel;
...
@Override
protected void onListItemClick(ListView l, View v, int position, long id) 
{
    super.onListItemClick(l, v, position, id);
    int listPosition = position; 

    switch(listPosition){
    case _AGESELECTION:
        Dialog d = new Dialog(Screening.this);
        d.setTitle(R.string.ageselector_title);
        set = (Button)d.findViewById(R.id.bSet);
        cancel = (Button)d.findViewById(R.id.bCancel);
        //set.setOnClickListener(this);

        cancel.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                finish();
            }
        });
        d.setContentView(R.layout.agedialog);
        d.show();

    break; 
```

如此简短的解释，我有一个打开对话框的列表。Dialog 有 NumberPicker、设置和取消按钮。

现在，在 Set 上，我想保存 NumPicker 值，然后取消以取消对话框。(finish(); 很可能会完成活动，但这不是问题，问题是无论我是否在点击侦听器上设置新的，例如：

```
set.setOnClickListener(this); 
```

或者

```
cancel.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            finish();
        }
    }); 
```

它使我的应用程序因空指针异常而崩溃。

主类中有 onClick 功能，因为原始活动由列表、单选按钮和保存按钮组成。

我假设我已经拥有 onClickListener 的事实让我在这里很难过，但不知道是什么。

请指教。

tnx。

# vb.net - 通过邮政编码获取 15 英里内的所有邮政编码

> ID：12317823
> 
> 赞同：-2
> 
> 时间：2012-09-07T12:09:45.430
> 
> 标签：vb.net

我需要在我的 asp.net 应用程序中使用邮政编码半径查找器和计算器，我将在其中提供邮政编码、距离（以英里为单位），并且应该获取距离指定邮政编码指定英里的邮政编码列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:18:09.963

请参阅这些帖子：

[通过输入 Landmark 获取邮政编码](https://stackoverflow.com/questions/12295718/get-postal-code-by-entering-landmark)

[https://stackoverflow.com/questions/12316940/get-all-postal-codes-within-15-miles](https://stackoverflow.com/questions/12316940/get-all-postal-codes-within-15-miles)

此外，这篇文章非常详尽：

[http://www.codeproject.com/Articles/32806/GeoLocation-by-Radius-Using-Google-Maps-and-NET](http://www.codeproject.com/Articles/32806/GeoLocation-by-Radius-Using-Google-Maps-and-NET)

# objective-c - UIPickerView - 用多个数组填充 1 个选择器

> ID：12317827
> 
> 赞同：1
> 
> 时间：2012-09-07T12:10:01.043
> 
> 标签：objective-c, cocoa-touch, uipickerview

我在 Xcode 4.4 中遇到了选择器视图的问题。我想用多个数组填充 1 Picker。我看了/阅读了很多教程，几乎可以开始工作了。这是我的代码：

*。H

```
 #import <UIKit/UIKit.h>

@interface PickerView : UIViewController

<UIPickerViewDataSource,UIPickerViewDelegate>
{
    IBOutlet UIPickerView *picker;

    NSMutableArray *array_1;
    NSMutableArray *array_2;
}

@property (strong, nonatomic) IBOutlet UIView *pickerContainer;
@property (strong, nonatomic) IBOutlet UITextField *textfield_1;
@property (strong, nonatomic) IBOutlet UITextField *textfield_2;

- (IBAction)showArray_1Picker:(id)sender;
- (IBAction)showArray_2Picker:(id)sender;
- (IBAction)hidePicker:(id)sender;

@end 
```

*.m

```
#import "PickerView.h"

@interface PickerView ()

@end

@implementation PickerView
@synthesize pickerContainer;
@synthesize textfield_1;
@synthesize textfield_2;

int textFieldTouched = 0;

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)picker
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent (NSInteger)component
{
    switch(textFieldTouched)
    {
        case 1:
            return [array_1 count];
            break;
        case 2:
            return [array_2 count];
            break;
        default:
            return 0;
    }
}

- (NSString *)pickerView:(UIPickerView *)picker titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    switch(textFieldTouched)
    {
        case 1:
            return [array_1 objectAtIndex:row];
            break;
        case 2:
            return [array_2 objectAtIndex:row];
            break;
        default:
            return @"nothing";
    }
}

- (void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    switch(textFieldTouched)
    {
        case 1:
            textfield_1.text = [array_1 objectAtIndex:[pickerView selectedRowInComponent:0]];
            break;
        case 2:
            textfield_2.text = [array_2 objectAtIndex:[pickerView selectedRowInComponent:0]];
            break;
    }
}

 - (void)viewDidLoad
 {
    array_1 = [[NSMutableArray alloc] init];
    [array_1 addObject:@"1"];
    [array_1 addObject:@"2"];
    [array_1 addObject:@"3"];
    [array_1 addObject:@"4"];
    [array_1 addObject:@"5"];

    array_2 = [[NSMutableArray alloc] init];
    [array_2 addObject:@"a"];
    [array_2 addObject:@"b"];
    [array_2 addObject:@"c"];
    [array_2 addObject:@"d"];
    [array_2 addObject:@"e"];

    pickerContainer.frame = CGRectMake(0, 460, 320, 261);

    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [self setPickerContainer:nil];
    [self setTextfield_1:nil];
    [self setTextfield_2:nil];
    [super viewDidUnload];
}

- (IBAction)showArray_1Picker:(id)sender
{
    [textfield_1 resignFirstResponder];
    textFieldTouched = 1;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    pickerContainer.frame = CGRectMake(0, 200, 320, 261);
    [UIView commitAnimations];
}

- (IBAction)showArray_2Picker:(id)sender
{
    [textfield_2 resignFirstResponder];
    textFieldTouched = 2;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    pickerContainer.frame = CGRectMake(0, 200, 320, 261);
    [UIView commitAnimations];
}

- (IBAction)hidePicker:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    pickerContainer.frame = CGRectMake(0, 460, 320, 261);
    [UIView commitAnimations];
}

@end 
```

所以我遇到了两个主要问题：

1.  如果我设置 textFieldTouched = 0 （或 > 2），就像我在选择器出现时为空之前所做的那样。无论如何，如果我再次隐藏它，它会在文本字段中写入相应数组的第一个值。

2.  如果我设置 textFieldTouched = 1 或 =2，无论我尝试编辑什么文本字段，选择器都会填充相关数组。但是，如果我将选择器上的值滚动到我的视线之外，当我向后滚动时它们会发生变化。

我想要这样：

如果我触摸文本字段 1，选择器会显示填充数组 1

如果我触摸文本字段 2，选择器会显示填充数组 2

等等。

你能帮我吗？

我已经上传了代码，以便您更好地查看它。

[https://dl.dropbox.com/u/5858884/ProblemCode.zip](https://dl.dropbox.com/u/5858884/ProblemCode.zip)

附言

英语不是我的母语，所以请原谅错误；）

我两周前开始编程，所以如果你在我的代码中发现不属于我的问题的错误，请告诉我，这样我会变得更好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T23:40:29.887

在您的 showArray1Picker 和 showArray2Picker 方法中添加以下行：

```
[picker reloadAllComponents]; 
```

这将导致选择器重新加载其数据。您还需要将 IBOutlet 选择器连接到 IB 中的选择器视图——我注意到它没有连接。

# java - Eclipse 3.8 中的 p2-dropins 机制是否有任何重大变化？

> ID：12317835
> 
> 赞同：0
> 
> 时间：2012-09-07T12:10:30.767
> 
> 标签：java, eclipse, osgi, equinox, p2

Eclipse 3.8 中的 p2 机制有什么重大变化吗？我尝试通过 p2 dropins 机制安装 Eclipse 3.8 插件，但它根本不起作用。它无法解析插件。插件视角也缺失。bundles.info 也没有出现在 org.eclipse.equinox.simpleconfigurator 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:27:18.430

我怀疑您的 dropins 无法安装，因为它们具有在您的新安装中未解决的依赖项。dropins 的标准行为是忽略无法安装的插件。用户没有得到关于该问题的任何反馈。这就是不推荐使用 dropins 方法安装插件的原因之一。

要调试您当前的问题，请尝试使用插件安装对话框来安装您尝试通过插件安装的插件。您将看到有关安装无法继续的原因的报告，并且能够继续进行相应的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:13:57.093

[发行说明](http://www.eclipse.org/eclipse/development/readme_eclipse_3.8.php)的[这一部分](http://www.eclipse.org/eclipse/development/readme_eclipse_3.8.php#Compatibility)应该解决您的问题。

> **API 合同兼容性**：Eclipse SDK 3.8 与 Eclipse SDK 3.7 向上合同兼容，除了[Eclipse 3.8 插件迁移指南中](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.isv/porting/eclipse_3_8_porting_guide.html)提到的那些领域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:08:30.713

您应该将已安装的插件从用户 .eclipse/org.eclipse.platform_4.2.0_*/plugins 和 .eclipse/org.eclipse.platform_4.2.0_*/features 复制到 /usr/lib/eclipse-4.2/dropins/eclipse /plugins 和 /usr/lib/eclipse-4.2/dropins/eclipse/features。在 win7 文件系统中，您应该在您的用户目录中找到 C:/eclipse/dropins 以及您的插件和功能目录。它适用于 4.3.0 Juno 版本：I20120810-1300

[请参阅 Dropins 入门段落](http://wiki.eclipse.org/Equinox/p2/Getting_Started)

# html - 更改选项卡后如何从 onblur 事件中清除/删除值

> ID：12317839
> 
> 赞同：0
> 
> 时间：2012-09-07T12:10:44.723
> 
> 标签：html, jquery

我的问题是，在我的注册表单中，当它有错误消息并且用户尝试更改选项卡并再次返回注册时，错误消息仍然存在，当我更改选项卡时，我应该怎么做才能删除错误消息以及何时我再次点击注册链接？

```
<script src="http://code.jquery.com/jquery-1.8.1.js"></script>
    <script>
        $(function() {           
            var tabContainers = $('section.tabs > article');
            tabContainers.hide().filter('#login').show();

            $('.ultabs a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('.ultabs a').removeClass('selected');
                $(this).addClass('selected');
                return false;
            });
        });
        function check_email() {
            var email=$("#textEmail").val();
            $.ajax(
            {
                type:"POST",
                url:"register.php",
                data: { 
                'email': email
                },
                success:function(msg) {
                    $("#checkEmail").html(msg);
                }
            });
            return false;
        }
        function check_password() {
            var pass=$("#textPassword").val();
            $.ajax(
            {
                type:"POST",
                url:"register.php",
                data: { 
                'pass': pass
                },
                success:function(msg) {
                    $("#checkPassword").html(msg);
                }
            });
            return false;
        }
    </script>

<nav id="siteNav">
    <h1>Navigation</h1>
    <ul class="ultabs">
        <li><a href="#login">Login</a></li>
        <li><a href="#register">Register</a></li>
    </ul>
</nav>
<section id="siteContent" class="tabs">
    <h1>Section</h1>
    <article id="login">
        <h1>Login</h1>
        <table>
            <tr>
                <td class="message" colspan="2"></td>
            </tr>
            <tr>
                <td>E-mail:</td><td><input type="email"></td>
            </tr>
            <tr>
                <td class="message" colspan="2"></td>
            </tr>
            <tr>
                <td>Password:</td><td><input type="password"></td>
            </tr>
            <tr>
                <td colspan="2"><input type="button"></td>
            </tr>
        </table>
    </article>
    <article id="register">
        <h1>Register</h1>
        <table>
            <tr>
                <td class="message" colspan="2"></td>
            </tr>   
            <tr>
                <td>Name:</td><td><input type="text"></td>
            </tr>
            <tr>
                <td id="checkEmail" class="message" colspan="2"></td>
            </tr>
            <tr>
                <td>E-mail:</td><td><input id="textEmail" type="email" onblur="return check_email()"></td>
            </tr>
            <tr>
                <td id="checkPassword" class="message" colspan="2"></td>
            </tr>
            <tr>
                <td>Password:</td><td><input id="textPassword" type="password" onblur="return check_password()"></td>
            </tr>
            <tr>
                <td class="message" colspan="2"></td>
            </tr>
            <tr>
                <td>Re-type:</td><td><input type="password"></td>
            </tr>
            <tr>
                <td colspan="2"><input type="button"></td>
            </tr>
        </table>
    </article>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:06:54.763

我建议您使用像 Bassistance 提供的验证器插件 - [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。它将处理错误消息，而无需您深入了解验证的细节......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:07:48.090

您可以清除`td`选项卡的更改

```
$('.ultabs a').click(function () {
   $('.message').html('');
   // the rest of your code
}); 
```

# emacs - 禁用右侧鼠标按钮上的帮助菜单（x-coord > 0x7F）

> ID：12317844
> 
> 赞同：3
> 
> 时间：2012-09-07T12:11:01.917
> 
> 标签：emacs

当我单击或滚动鼠标滚轮时，它的指针位于屏幕的右侧，没有文本，emacs 显示如下帮助菜单：

```
按 PageUp 键从 minibuffer 到达这个缓冲区。
或者，您可以使用向上/向下键（或您的历史键）来更改
--/.../--
在此缓冲区中，键入 RET 以选择完成近点。

可能的完成是：
e==>Emacs 教程 E==>Emacs 教程（选择语言）...
--/.../--
a==>关于 Emacs A==>关于 GNU
==================================================== ================================

;; 这是我的工作缓冲区

==================================================== ================================
帮助（向上/向下更改，PgUp 到菜单）：e==>Emacs 教程

```

这很令人不安，我必须按 Cg 才能返回编辑。如何禁用此功能？

PS 我尝试按 Ch k < LMB at right>，但它没有显示键的代码，它再次显示该菜单。

**编辑**（回应斯特凡）：

按下后：`aaa <LMB at right> C-g C-h l`我看到以下顺序：

... aaa ESC [ M SPC \300\256 6 ESC [ M # \300\256 6 Cg Ch l

正如我发现的那样，这些符号：`\300\256`和`6`取决于我单击时光标的位置。`\300\256`是一个水平坐标，`6`是一个垂直坐标。

我对其进行了进一步调查：当 y 坐标从普通符号`a`或`}`或`DEL`（实际上它是最后一个普通符号）变成类似代码`\300\200`（这是第一个值，导致帮助菜单）时，菜单出现。正如 unicode[符号表所示](http://en.wikipedia.org/wiki/List_of_Unicode_characters)，`DEL`代码为 U+007F(0b01111111)，下一个值将是 U+00800(0b10000000)（填充字符），位于另一个表中：C1 控件和 Latin-1 补充

我在 PuTTy ssh 客户端上使用 GNU emacs 23.2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:29:50.270

这听起来不像 Emacs 在其默认配置中的任何功能。我建议您尝试：`a a a <LMB at right>`然后`C-h l`哪个应该向您显示 Emacs 收到的最后几个事件。尝试找出其中对应的事件（它们将出现在 之后`a a a`）以查看操作系统在执行此操作时发送给 Emacs 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:15:46.920

这实际上是一个错误。这是一个解决方法：

```
;; Disable menubar
(menu-bar-mode -1)

;; Workaround for "mouse on menu-bar" bug
(defun transform-to-start-event (event)
  (let ((y0 (second (window-inside-edges (selected-window))))
        (x0 (first (window-inside-edges (selected-window)))))
    (let ((x (- (car (third (second event))) #x3fff00 x0))
          (y (- (cdr (third (second event))) y0))
          (time (fourth (second event))))
      `(down-mouse-1 ,(posn-at-x-y x y (window-at 0 0) t)))))

(defun tmm-menubar-mouse (event)
  (interactive "e")
  (let ((evt (transform-to-start-event event)))
    (push (cons 'up-mouse-1 (cdr evt)) unread-command-events)
    (mouse-drag-track evt t))) 
```

它会停用菜单栏，但无论如何我都不需要它。它也不能正确处理选择和滚动，但至少它可以正确定位点。

# ruby-on-rails - 在 Rails 3 中使用 group by 在查询中获取 COUNT(column) 作为整数

> ID：12317850
> 
> 赞同：2
> 
> 时间：2012-09-07T12:11:25.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有 2 个模型类别和文章相关，如下所示：

```
class Category < ActiveRecord::Base
  has_many :articles
end

class Article < ActiveRecord::Base
  belongs_to :category

  def self.count_articles_per_category
    select('category_id, COUNT(*) AS total').group(:category_id)
  end
end 
```

我正在像这样访问 count_articles_per_category

```
Article.count_articles_per_category 
```

这将返回具有 2 列的文章：category_id 和 total。

我的问题是总列是一个字符串。所以问题是：有没有一种方法可以将该列作为整数获取？

PS：我试图在数据库中为 COUNT(*) 做一个演员，但这没有帮助。我尽量避免做这样的事情：

```
articles = Article.count_articles_per_category
articles.map do |article|
  article.total = article.total.to_i
  article
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:17:54.623

`Article.group(:category_id).count`可能会给你一些你可以使用的东西。这将返回一个散列，其中每个键代表 category_id，每个值代表对应的整数作为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:20:50.130

不，不支持`ActiveRecord`自动转换数据类型（始终作为字符串传输到数据库）。

`ActiveRecord`检索项目时的工作方式是：

*   对于`ActiveRecord`模型中的每个属性，检查列类型，并将数据转换为该类型。
*   对于额外的列，它不知道应该将其转换为什么数据类型。

额外列包括来自其他表或表达式的列。

* * *

您可以使用不同的查询，例如：

```
Article.group(:category_id).count
Article.count(:group => :category_id) 
```

这些返回`:category_id => count`. 所以你可能会得到类似的东西`{6=>2, 4=>2, 5=>1, 2=>1, 9=>1, 1=>1, 3=>1}`。

使用该`count`方法是有效的，因为它隐含地让 ActiveRecord 知道它是一个整数类型。

# sql - 在表中批量插入多个管道数据

> ID：12317851
> 
> 赞同：0
> 
> 时间：2012-09-07T12:11:30.463
> 
> 标签：sql, sql-server

我写了一个查询，将 .lst 文件中的数据插入表名 AxisATM 但是当我尝试插入时，它给了我错误

当我从 LST 文件中删除所有行时，除了 First ..它给了我 Success msg 说 1 rows changed..

```
Msg 4866, Level 16, State 1, Line 1
The bulk load failed. The column is too long in the data file for row 1, column 36\. Verify that the field terminator and row terminator are specified correctly.
Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "BULK" for linked server "(null)" reported an error. The provider did not give any information about the error.
Msg 7330, Level 16, State 2, Line 1
Cannot fetch a row from OLE DB provider "BULK" for linked server "(null)". 
```

询问 ：-

```
 BULK
INSERT dbo.ATMAxis
FROM 'c:\AGS_WINCORE_120901.lst'
WITH
(
FIELDTERMINATOR = '|',
ROWTERMINATOR = 'CHAR(13)'
)
GO 
```

AGS_WINCORE_120901.lst：-

```
PRO1|......|00000000000|0| {Like it has 36 '|' separators} 
```

使用记事本++ 我知道行尾字符是 CR LF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:56:56.257

不出所料，问题出在

```
ROWTERMINATOR = 'CHAR(13)' 
```

我已将其更改为

```
ROWTERMINATOR = '0x0A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:14:33.207

正如错误所说，第 36 列的字符比表列的第 36 列的字符多。您需要增加该列的大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:29:37.963

似乎行终止符会产生问题。如果是这种情况，尝试更换`/r/n`它`Char(10)`会解决问题。另外，检查`char(13)`.

[这个 MSDN 线程](http://social.msdn.microsoft.com/Forums/en-IN/transactsql/thread/a87b9fbb-40dc-4a2e-83df-eab150620122)有更多信息。

# java - xml 1.1 规范中的“解析数据”是什么意思？

> ID：12317852
> 
> 赞同：1
> 
> 时间：2012-09-07T12:11:32.367
> 
> 标签：java, xml, xml-parsing

我正在重新措辞我的问题，因为“解析实体”的事情与手头的问题无关。

XML 1.1 与 1.0

xml 1.1 库是在序列化/反序列化之前转义非法字符吗？还是图书馆要彻底禁止他们？在 xml 元素上设置 Text 的正确方法是什么？

如果元素 e = new Element("foo")

我应该这样做：

e.setText(sanitized_text_illegal_characters_removed_or_escaped) ？

或者

e.setText(any_text)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:18:23.903

除非您正在编写 XML 解析器，否则您实际上不需要担心已解析的实体。`&lt;`就像和之类的东西`&amp;`。您可以在文档中定义自己的 DTD，但这是一个很少使用的功能。外部解析实体是其内容驻留在另一个文件或网络资源或类似的地方的实体*。*

至于你的主要问题：

> 在 xml 元素上设置 Text 的正确方法是什么？
> 
> 如果元素 e = new Element("foo")
> 
> 我应该这样做：
> 
> e.setText(string_of_sanitized_data_with_illegal_characters_escaped) ？
> 
> 或者
> 
> e.setText(any_text)

当文档被反序列化时，您应该将文本设置为您希望它出现的另一端。这通常意味着您不应该转义数据，XML 库会为您执行此操作。

例如：

1.  您插入文本“床和早餐”。
2.  XML 库将其转换为 " `bed &amp; breakfast`" 或 " `<![CDATA[bed & breakfast]]>`" 或其他表示形式，这并不重要。
3.  您将文档发送到其他地方。
4.  另一个解析器读取文档并将文本转换回来。
5.  终端软件检索字符串“床和早餐”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:23:15.990

如果您以编程方式编写 XML，那么您几乎肯定不想使用已解析的实体。

有两种类型的解析实体：内部和外部。内部解析的实体由如下 DTD 声明定义：

```
<!ENTITY me "Mike"> 
```

或者

```
<!ENTITY me "<name>Mike</name>"> 
```

外部已解析实体由 DTD 声明定义，如下所示：

```
<!ENTITY me SYSTEM "me.xml"> 
```

无论实体是内部的还是外部的，它都可以被这样的实体引用引用：

```
&me; 
```

它可以出现在元素或属性的内容中。

# android - Android EditText 包裹三个点

> ID：12317855
> 
> 赞同：0
> 
> 时间：2012-09-07T12:12:01.570
> 
> 标签：android, android-edittext, word-wrap

如何防止 EditText 在字符串末尾换上三个点。如何将三个点和最后一个单词包裹在一起？

![在此处输入图像描述](../Images/885049e32d736f8abd82160444c5f7d2.png)

PS：三个点我加self！提示信息，以三个点结尾

没有代码，在xml中声明了EditText。xml布局是：

```
<EditText
    android:id="@+id/comment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:ems="10"
    android:gravity="top|left"
    android:hint="Добавьте комментарий к фото..."
    android:lines="3"
    android:maxLines="5"
    android:background="@drawable/bg_input"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:19:22.040

`android:ellipsize="end"`如果您希望它在单行中并且最后一个世界以使用点结束，或者如果多行使用或更多使用它，则如果它的长度大于`TextView`或容量，则会在文本末尾添加点。`EditText``andorid:singleline="true"``android:maxLines="2"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:15:05.093

尝试`android:singleLine="true"`用于您的`EditText`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:17:04.053

尝试`android:ellipsize="none"`在您的 xml 文件中的 EditText 中使用。

# java - 无法更正我的 java 程序

> ID：12317856
> 
> 赞同：0
> 
> 时间：2012-09-07T12:12:07.310
> 
> 标签：java, arrays

我刚开始学习java，我正在开发一个程序。我在这里遇到错误：

```
locationsOfCells = simpleDotCom.getLocationCells(); 
```

但我不确定错误是什么。日食说

> 无法 `getLocationCells()`从类型中对非静态方法进行静态引用`simpleDotCom`

有人可以帮我弄这个吗？我究竟做错了什么？

```
public class simpleDotCom {
    int[] locationsCells;

    void setLocationCells(int[] loc){
        //Setting the array
        locationsCells = new int[3];
        locationsCells[0]= 3;
        locationsCells[1]= 4;
        locationsCells[2]= 5;
    }

    public int[] getLocationCells(){

        return locationsCells;

    }
}

public class simpleDotComGame {

    public static void main(String[] args) {
        printBoard();
    }

    private static void printBoard(){
        simpleDotCom theBoard = new simpleDotCom();
        int[] locationsOfCells; 
        locationsOfCells = new int[3];
        locationsOfCells = theBoard.getLocationCells();

        for(int i = 0; i<3; i++){
            System.out.println(locationsOfCells[i]);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:15:22.757

问题是您正在调用该`getLocationCells()`方法，就好像它是一个静态方法，而实际上它是一个实例方法。

您需要首先从您的类中创建一个对象，如下所示：

```
simpleDotCom myObject = new simpleDotCom(); 
```

然后调用它的方法：

```
locationsOfCells  = myObject.getLocationCells(); 
```

顺便说一句，在 Java 世界中有一个广泛遵循的命名约定，其中类名总是以大写字母开头 - 您应该重命名您的类`SimpleDotCom`以避免混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:23:11.483

```
simpleDotCom obj = new simpleDotCom();
locationsOfCells = obj.getLocationCells(); 
```

你的班级名称也应该以大写字母开头

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:16:07.370

您正在尝试`getLocationCells`以静态方式。您需要先创建一个实例`simpleDotCom`：

```
simpleDotCom mySimpleDotCom = new simpleDotCom();       
locationsOfCells = mySimpleDotCom.getLocationCells(); 
```

BTW 类名总是以大写字母开头。这将有助于消除将方法作为成员方法访问的混淆。

更新：

要从更新的静态方法访问，您还需要声明`theBoard`为`static`变量：

```
static simpleDotCom theBoard = new simpleDotCom(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T12:19:04.477

您正在尝试从 main 方法引用非静态方法。这在java中是不允许的。您可以尝试将 simpleDotCom 类设为静态，以便您可以访问该类的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T12:14:46.357

要么将 simpleDotCom 的字段和方法也设为静态，要么创建 simpleDotCom 的实例并访问该实例的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T12:13:37.077

您正在尝试从静态上下文访问普通的非静态方法，但它不起作用。

您可以从尝试访问: from 的例程中删除静态词，也可以通过在其声明中添加静态词来`getLocationCells()`制作静态词。`getLocationCells()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T12:39:30.403

您的代码还有更多错误。

1.  非静态方法无法使用类名调用。所以尝试用对象调用 getLocationCells()。

    simpleDotCom obj=新的 simpleDotCom(); obj.getLocationCells()

2.  接下来你会得到空指针异常。U 尝试在初始化之前打印 locationsOfCells 值。因此，在打印值之前尝试调用 setLocationCells() 方法。

3.  Ur 方法定义 void setLocationCells(int[] loc)。这里你有参数 loc 但你没有在方法块中使用任何地方。所以请注意处理方法参数。

# iphone - 在 Obj C 中使用 Brad Larson GPUImage 为照片创建素描效果

> ID：12317858
> 
> 赞同：4
> 
> 时间：2012-09-07T12:12:20.647
> 
> 标签：iphone, objective-c, ios, gpuimage, imagefilter

嗨，我想尝试使用 Brad Larson 的`GPUImage`sdk in对照片进行素描效果`iOS`。我正在尝试创建这样的草图效果

![在此处输入图像描述](../Images/d17e5bb9e76ce10b8625f01ce5e48f5a.png)

但是我得到的草图效果是这样的

![在此处输入图像描述](../Images/0cbabdefd1ee1d51f7e96fda8b973d67.png)

我正在使用 GPUImageSketchFilter 来创建此效果，以下是我提供的用于实现此效果的参数：

```
setTexelHeight:(1.12 / 480.0)
setTexelWidth:(0.5 / 320.0) 
```

请建议我如何达到这种效果..

布拉德听从你的建议，我有这个...

![在此处输入图像描述](../Images/bb3caade1d9ce2dcf5f9f2ad11335c50.png)

**我的目标：**我需要使右图像看起来像左图像..请建议我..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T08:06:40.373

有一些关于您面临的问题的信息。希望这对您有所帮助。 [http://iphonedevsdk.com/forum/iphone-sdk-development/103548-pencil-sketch-of-an-image-in-iphone-sdk.html](http://iphonedevsdk.com/forum/iphone-sdk-development/103548-pencil-sketch-of-an-image-in-iphone-sdk.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T03:45:11.703

我见过更好的草图效果代码，但我不擅长过滤，我无法为 GPUImage 编写自定义过滤器来应用它：

```
float res = iResolution.x;
float n0 = 97.0 / res;
float n1 = 15.0 / res;
float n2 = 97.0 / res;
float n3 = 9.7 / res;
float total = n2 + ( 4.0 * n0 ) + ( 4.0 * n1 );

const vec3 div3 = vec3(1.0 / 3.0);

void main(void) {
  float offset, temp1, temp2;
    vec4 m, p0, p1, p2, p3, p4, p5, p6, p7, p8;
    offset = n3;

    p0=texture2D(iCamera,iScreen);
    p1=texture2D(iCamera,iScreen+vec2(-offset,-offset));
    p2=texture2D(iCamera,iScreen+vec2( offset,-offset));
    p3=texture2D(iCamera,iScreen+vec2( offset, offset));
    p4=texture2D(iCamera,iScreen+vec2(-offset, offset));

    offset=n3*2.0;

    p5=texture2D(iCamera,iScreen+vec2(-offset,-offset));
    p6=texture2D(iCamera,iScreen+vec2( offset,-offset));
    p7=texture2D(iCamera,iScreen+vec2( offset, offset));
    p8=texture2D(iCamera,iScreen+vec2(-offset, offset));
    m = (p0 * n2 + (p1 + p2 + p3 + p4) * n0 + (p5 + p6 + p7 + p8) * n1) / total;

    //convert to b/w
    temp1 = dot(p0.rgb, div3);
    temp2 = dot(m.rgb, div3);

    //color dodge blend mode
    if (temp2 <= 0.0005) {
        gl_FragColor = vec4( 1.0, 1.0, 1.0, p0.a);
    } else {
        gl_FragColor = vec4( vec3(min(temp1 / temp2, 1.0)), p0.a);
    }
} 
```

# bash - 循环目录和文件 bash 脚本 - awk 不写入文件

> ID：12317865
> 
> 赞同：2
> 
> 时间：2012-09-07T12:12:57.560
> 
> 标签：bash, awk, find

我想遍历一些包含 xml 文件的目录。对于每个文件，我想应用一个 awk 命令并将输出再次写入文件。但是，写入的文件是空的。为什么？我使用以下脚本：

```
#!/bin/bash
for f in `find /myDir/ -iname "*.xml"`
do
   awk '/<string name="my\/ attribute" optional="false">/,/<\/string>/ {sub(/<value>(.*)<\/value>/,"<value>none</value>")}1' $f >$f
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:23:15.787

您必须使用临时文件：

```
awk ... "$f" > "$f".tmp; mv "$f".tmp "$f" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:22:18.317

问题不在于`awk`，问题在于重定向。无法写入您正在阅读的文件。

# c# - 在 Rhino Mocks 中设置属性时如何抛出异常

> ID：12317875
> 
> 赞同：1
> 
> 时间：2012-09-07T12:13:22.933
> 
> 标签：c#, rhino-mocks

当我的存根的属性（双精度）被设置（为任何值）时，我的存根应该抛出一个异常。如何使用 Rhino Mocks 3.5 完成此任务？

我试过这个：

```
 var myMock = MockRepository.GenerateStub<MyInterface>();
        myMock.Stub(x => x.MyProperty).Throw(new Exception()); 
```

但这给了我：

```
System.InvalidOperationException : You are trying to set an expectation on a property that was defined to use PropertyBehavior.
Instead of writing code such as this: mockObject.Stub(x => x.SomeProperty).Return(42);
You can use the property directly to achieve the same result: mockObject.SomeProperty = 42; 
```

但在这种情况下，我不是在谈论设置和获取一个简单的值，它应该抛出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:22:00.843

您必须替换为`MockRepository.GenerateMock,`

这个版本有问题`GenerateStub`，

```
var myMock = MockRepository.GenerateMock<MyInterface>();
myMock.Stub(x => x.MyProperty).Throw(new Exception()); 
```

# java - 使用 maven 代替 ant 与 SPRING、部署和结构

> ID：12317876
> 
> 赞同：2
> 
> 时间：2012-09-07T12:13:23.277
> 
> 标签：java, spring, maven, ant, war

我有一个 spring 项目并使用 ANT 将我的战争编译/部署到 Tomcat。所以基本上它只是创建一个war文件并将其移动到tomcat文件夹。

文件夹结构是这样的：

```
Spring
    -src
        ALL MY SRC (JAVA) files
    -war
        -WEB-INF
            -jsp
            -lib
                ALL MY LIBRARIES
            -properties
            web.xml
            spring-servlet.xml
        -META-INF
build.xml
pom.xml // putting my pom.xml here 
```

使用 ant，我手动下载了我所有的库。现在看来，maven 会自动下载所有库，这要归功于 pom.xml。问题/问题：

1.  我必须用 Maven 更改我的文件夹结构吗？
2.  maven 会将所有下载的库包含到 WAR 中吗？这是默认的吗？
3.  当 maven 下载它的 WARS 时，它可以把所有的库放到`WEB-INF/lib`? 如何？
4.  我在做什么有意义吗，如果没有，那为什么？

有几个问题，因为我从来没有使用过 maven。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T12:20:36.210

1.  是的，最好更改结构，请参阅 Maven 站点。如果您开始使用具有复杂功能的 maven-plugins（例如使用 XSLT 生成 java 源代码），它会节省一些麻烦。IDE支持也可能更好。比如：src/main/java、src/test/java、src/main/resources。
2.  是的。
3.  是的。自动。
4.  是的，否则您应该将 Ivy 与 ant 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:35:19.313

[标准 Maven Web 项目结构](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)
Milloose 评论说，最好采用标准项目结构。

# javascript - 使用 jquery 延迟对象链接多个 ajax 调用

> ID：12317887
> 
> 赞同：4
> 
> 时间：2012-09-07T12:14:14.947
> 
> 标签：javascript, jquery, jquery-deferred

在寻找类似于此处所述的解决方案时： [如何使用 jquery 链接 ajax 调用](https://stackoverflow.com/questions/8612894/how-to-chain-ajax-calls-using-jquery?lq=1) 我正在寻找使用 jquery v1.52 的解决方案。

我有一组要发出的 ajax 请求。但是每个 ajax 请求只有在完成前一个 ajax 调用后才能发送。我正在尝试使用 jquery 1.5.2 来实现这一点，但无法做到。[这](http://jsfiddle.net/ashwinkumark/Vdmkx/3/)是我从上述示例中修改的内容。这没用。谁能帮我搞定这个工作？预期输出是[http://jsfiddle.net/k8aUj/3/](http://jsfiddle.net/k8aUj/3/)

PS：我无法升级到 1.5.2 以上的版本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:31:30.500

哟！解决了！[http://jsfiddle.net/sandhyasriraj/AaHZv/](http://jsfiddle.net/sandhyasriraj/AaHZv/)

```
var x = null;
var i = 0;
x= $.Deferred();
var countries=["US","CA","MX","bx","fs","ZX"];
function log(msg) {
    var $out=$("<div />");
    $out.html(msg);
    $("#console").append($out);
}

callX = function(j) {
    return $.ajax({
            type: "GET",
            url: "/echo/json/",
            data: {country:countries[i]},
            dataType: "JSON",
            success: function(){
                log("Successful request for [" + countries[j] + "]");
                i++;      
                x.resolve();
                xy();
               }
        });

}
x.resolve();
xy = function()
{
    debugger;
    if(i > 5)
        return;

     $.when(x).then(function() {
        x = $.Deferred();
        log("Making request for [" + countries[i] + "]");
        callX(i);
    });
}
xy(); 
```

这是你想要的吗？

# xml - Magento 模块自行禁用

> ID：12317892
> 
> 赞同：1
> 
> 时间：2012-09-07T12:14:25.343
> 
> 标签：xml, magento, magento-1.7

我有一个几乎可以部署的 Magento 系统；但由于某种原因，昨晚几个模块从真变为假。当我转到**`system>config>advanced`**它们时，它们被设置为启用，但是当我打开**`app/etc/modules`**并检查 xml 文件时，有几个设置为 false。

例如

```
<config>
<modules>
    <Mage_Api>
        <active>false</active>
        <codePool>core</codePool>
        <depends>
            <Mage_Core />
        </depends>
    </Mage_Api>
</modules> 
```

任何人都可以建议可能的情况或现在做什么。

编辑：还有三个文件，Mage_Backup.xml Mage_Admin.xml 和 Mage_Adminhtml.xml 是空白的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:21:48.587

发生这种情况的*唯一*方法是由某人或某个远程进程（ftp、rsync 等）手动操作这些文件。更改访问密钥、更改密码和查看日志。

系统 > 配置 > 高级中的 GUI***不会***禁用模块 - 它会禁用它们的输出，如标题所示。该`modules/[Module_Handle]/active`值与 DMO 中显示的值之间没有联系。

# jquery - jQuery获取选定选项并选择另一个选择

> ID：12317894
> 
> 赞同：0
> 
> 时间：2012-09-07T12:14:31.903
> 
> 标签：jquery, html

如果他们想要相同的详细信息，我已经做了一个表格，可以将计费字段复制到运输字段，我的标题有问题 - 我有一个包含先生，夫人，小姐等的选择列表......我需要做的是当它改变一个，然后选择另一个

有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:16:22.773

看一下 jquery [val()](http://api.jquery.com/val/)方法。

```
$('#sel2').val($('#sel1')​.val()); 
```

[演示](http://jsfiddle.net/HpuZz/2)

# android - 是否可以以编程方式打开 android 4 上的移动热点？

> ID：12317899
> 
> 赞同：1
> 
> 时间：2012-09-07T12:14:41.740
> 
> 标签：android, wifi, android-wifi

1.  是否可以通过编程方式激活安卓手机上的移动热点？
2.  如果移动热点被激活，是否有可能在应用程序中以编程方式读取手机移动热点的配置（SSID、密码、安全 WPA ......），例如通过 NFC 将其发送到另一部手机？

我找到的消息来源说“不可能，没有具有此功能的 SDK”，但此消息来源是 2010 年到 2011 年之间。

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:42:20.830

Yes, try this method...

```
 WifiManager wifiManager = (WifiManager) getBaseContext()
            .getSystemService(Context.WIFI_SERVICE);
          wifiManager.setWifiEnabled(false);
try {
    wifiManager.getClass()
            .getMethod("setWifiApEnabled",
                               WifiConfiguration.class,
                               boolean.class)
        .invoke(wifiManager, null, false);
} catch (Exception e) {
    Log.e(Main.TAG, "Cannot call: setWifiApEnabled", e);
} 
```

# hibernate - TransactionRequiredException：执行更新/删除查询

> ID：12317904
> 
> 赞同：14
> 
> 时间：2012-09-07T12:15:17.947
> 
> 标签：hibernate, jpa, spring-mvc

我很难找到解决问题的方法。
我有一个服务类，其中包含一种在登录时设置验证标志的方法。

```
@Service("userRolesService")
@Repository
@Transactional
public class UserRolesService {
   public void verify() {
       repository.verifyUser();
   }
} 
```

我的存储库是 SpringData CrudRepository，verifyUser 类似于

```
 @Modifying
 @Query("UPDATE user SET (verified = 1 WHERE verified=0)")
 public void verifyUser(); 
```

在单元测试中直接调用代码时，一切正常。通过应用程序从我的身份验证提供程序调用它时，出现以下异常：

> `javax.persistence.TransactionRequiredException`：执行更新/删除查询

`@Autowired`使用注释将 Service 类注入到我的单元测试和身份验证提供程序中。测试本身没有任何有趣的注释，身份验证提供程序也没有。

我的想法很新鲜，所以如果有人有线索，我将非常感激。

编辑：我现在不再调用 verifyUser 更新脚本，而是检索所有未经验证的用户，设置已验证标志并使用存储库的 save() 方法。这有效，但非常难看，所以我愿意接受更好的建议。

编辑2：

这里的每个请求是配置的持久性部分，我想这是最相关的，其余的只处理身份验证。此配置用于单元测试和 Web 应用程序，唯一的区别是数据源是用于单元测试的嵌入式 H2 DB 和用于 Web 应用程序的 mysql。

```
<beans [..]>

    <bean id="entityManagerFactory"
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
          depends-on="persistenceInitializer">
        <property name="dataSource" ref="dataSource"/>
        <property name="persistenceUnitName" value="jpa"/>
        <property name="packagesToScan">
            <list>
                <value>com.example.model</value>
            </list>
        </property>
        <property name="jpaVendorAdapter">
            <bean class="com.example.persistence.adapter.ConfigurationRetainingHibernateJpaVendorAdapter">
                <property name="database" value="${spring.hibernate.database}"/>
                <property name="generateDdl" value="${spring.hibernate.generateDdl}"/>
            </bean>
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.ejb.naming_strategy">org.hibernate.cfg.DefaultComponentSafeNamingStrategy
                </prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <jpa:repositories base-package="com.example.persistence.repository"/>

    <tx:annotation-driven/>

    <bean id="persistenceInitializer" class="com.example.persistence.init.NoOpInitializer"/>

</beans> 
```

此外，我有一个仅在网络应用程序中的配置，而不是单元测试：

```
<beans [..]>

    <bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:application.properties</value>
            </list>
        </property>
    </bean>

    <mvc:annotation-driven/>

    <mvc:default-servlet-handler/>

    <context:annotation-config/>

</beans> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T16:25:40.987

`<tx:annotation-driven/>`我认为，如果您`<context:annotation-config/>`将`@Transactional`. 这`<tx:annotation-driven/>`是一个后处理器，仅在定义它的应用程序上下文中装饰 bean。有关进一步说明[，请参阅我的答案。](https://stackoverflow.com/questions/10019426/spring-transactional-not-working/10021874#10021874)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T09:23:09.990

**- 您的服务类也不应该是存储库**

**- 这是您的 applicationContext.xml 的外观：**

```
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit"/>
    <property name="dataSource" ref="dataSource"/>
</bean>

<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}"/>
    <property name="url" value="${database.url}"/>
    <property name="username" value="${database.username}"/>
    <property name="password" value="${database.password}"/>
    <property name="testOnBorrow" value="true"/>
    <property name="testOnReturn" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
    <property name="numTestsPerEvictionRun" value="3"/>
    <property name="minEvictableIdleTimeMillis" value="1800000"/>
    <property name="validationQuery" value="SELECT 1"/>
    <property name="initialSize" value="1"/>
    <property name="minIdle" value="1"/>
    <property name="maxActive" value="10"/>
    <property name="poolPreparedStatements" value="true"/>
    <property name="maxOpenPreparedStatements" value="20"/>
</bean> 
```

**- 这里是你的单元测试类应该如何定义**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader=WebContextLoader.class, locations = {"classpath:/META-INF/spring/applicationContext.xml", "classpath:/META-INF/spring/applicationContext-test-override.xml"})
public class MyTest { 
```

**- 注意 applicationContext-test-override.xml** 的使用 这用于覆盖测试上下文中的任何设置。这样做意味着您正在测试真实的应用程序上下文，因此如果您在那里犯了错误，它会出现在您的测试中。它应该位于 src/test/resources 中。这就是你所需要的：

```
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="url" value="${database-test.url}"/>
</bean> 
```

**- （可选）使用 mode=aspectj**

将以下内容添加到 Maven 插件中。它在编译时合并方面，而不是运行时（模式=代理）。

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.4</version>
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                    <!-- NB: force aspect compile before normal compile, required for 1.3+ 
                        see: MASPECTJ-13, MASPECTJ-92 -->
                    <phase>process-sources</phase>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>${java.version}</source>
                <target>${java.version}</target>
            </configuration>
        </plugin> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-10T19:16:26.883

我遇到了一些问题，我通过在执行删除或更新的服务方法上添加 @Transactional 注释来解决它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-11T10:03:28.447

使用这种方式

```
@Modifying
    @Transactional 
    @Query(value ="delete from admindata where user_name = :userName AND group_name = :groupName",nativeQuery = true)
    public void deleteadminUser(@Param("userName") String userName,@Param("groupName") String groupName); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-18T05:40:45.030

我也遇到了同样的问题并通过添加注释来解决***@Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class, readOnly = false)***

```
@Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class, readOnly = false)
public class UserRolesService{
..........
} 
```

# javascript - jQuery 在下拉菜单上切换

> ID：12317905
> 
> 赞同：1
> 
> 时间：2012-09-07T12:15:18.857
> 
> 标签：javascript, jquery, css, toggle

**问题：**

在下面提供的示例中，我有一个带有选项的 sidenav，您单击以显示一个切换的 div。如果您单击菜单“Dolar”中的第三项，您将看到一个下拉菜单，其中包含三个选项出现在链接下方。

这很好，但我希望在单击其他链接时关闭下拉菜单。我不确定如何实现这一目标。

**jsFiddle：**

[http://jsfiddle.net/visualdecree/4A23Z/39/](http://jsfiddle.net/visualdecree/4A23Z/39/)

**jQuery：**

注意：我知道它可能很乱，我还在学习这个。

```
$('.sn a, .sn-alt a').on('click',function(){ // Sidenav panel script

    var panID = $("#" + $(this).data('panel') );

    $("div[id*='sn-pan-']")
    .stop()
    .hide({width:'toggle'},400);

    $(panID)
    .css({'left' : '139px','overflow':'visible'})
    .stop()
    .animate
    ({ width: "toggle", opacity: "toggle"
    }, { duration: "slow" });

    $(".control-view").hide();  // Fadein menu close button
    $(".control-view").not(":visible").stop().delay(400).fadeTo("fast", 0.33);   

});

$('.sn, .sn-drop').click(function(e) {
    $('ul.sidenav li').not(this).removeClass('active'); // Active class removal / add
    $(this).stop(true, true).toggleClass("active");    
});

$('.sn-alt').click(function(e) {
    $('ul.additional li').not(this).removeClass('active'); // Active class removal / add
    $(this).stop(true, true).toggleClass("active");    
});

$(".control-view").hover( // Hover effect for menu close button
    function () {
    $(".control-view").stop().hide().fadeTo("fast", 1); // Hover in
   }, 
    function () {
    $(".control-view").fadeTo("normal",0.33); // Fade back to previous set opacity
});

$('.control-view').click(function(e) {
        $("div[id*='sn-pan-']")
        .stop(true,true)
        .hide({width:'toggle'}, 100);

        $('ul.sidenav li').not(this).removeClass('active');

        $(".control-view").stop().fadeOut("fast");
});

$(".additional").hide(); // Controls for the 'design' dropdown

$(".sn-drop").click(function(){
    $(".additional").slideToggle(300);
    var scrt_var = Math.random();
    return false; //Prevent the browser jump to the link anchor
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:19:14.883

只需添加此 JQuery，当您单击侧边栏中的其他链接时，它将关闭您的`.additional`

```
$(".sn").click(function(){
    $(".additional").slideUp(300);
    var scrt_var = Math.random();
    return false; //Prevent the browser jump to the link anchor
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:18:43.700

如果它只是左侧的链接，您希望成为关闭下拉列表的触发器，那么您可以简单地这样做：

```
$('.sn').click(function(){
    $('.additional').slideUp();
}) 
```

# django - 在 Apache 上部署 Django - 目录布局

> ID：12317906
> 
> 赞同：0
> 
> 时间：2012-09-07T12:15:20.307
> 
> 标签：django, apache, virtualhost

我有一个具有以下目录结构的 Django 应用程序

```
/myapp/
   /login/
   /myapp_settings/
   /subapp1/
   /supapp2/ 
```

`manage.py`在`myapp`目录中。

在项目中，`url.py`我有这样的 URL 设置：

```
urlpatterns = patterns('',
    url(r'^subapp1/', include('subapp1.urls')),
    url(r'^xhr/', include('subapp1.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^subapp2/', include('smart_selects.urls')),

        # Login / logout.
    url(r'^login/$', 'django.contrib.auth.views.login'),
    url(r'^logout/$', 'django.contrib.auth.views.logout', {'next_page': '/subapp1/'}, name='auth_logout'),
    url(r'^logout/(?P<next_page>.*)/$', 'django.contrib.auth.views.logout', name='auth_logout_next'),
) 
```

在 development 上部署时`runserver`，所有内容都正确链接和加载。当我将整个`myapp`目录部署到 Apache 上的 Django 根目录时，我发现它没有按预期链接。

例如，如果我链接到`example.com/login/`，我会得到一个 Apache 404。我认为这是因为我没有为该特定目录定义虚拟目录配置。

我在 Apache 中为我的应用程序设置了以下内容：

```
WSGIScriptAlias /myapp /var/www/django-projects/myapp/myapp_settings/wsgi.py
WSGIPythonPath /var/www/django-projects/myapp

Alias /media/ /var/www/django-projects/myapp/media/
Alias /static/ /var/www/django-projects/myapp/static/

<Directory /var/www/django-projects/myapp/static>
Order deny,allow
Allow from all
</Directory>

<Directory /var/www/django-projects/myapp/media>
Order deny,allow
Allow from all
</Directory>

<Directory /var/www/django-projects/myapp/myapp_settings/>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

我需要为我使用的每个 URL 模式配置别名和目录吗？如果是这样，我怎样才能重做我的 URL 模式，这样我就不需要这样做了。我不想在部署应用程序时进行所有这些额外的 Apache 配置。

**编辑：**我`WSGIScriptAlias`按照 Reinbach 的建议修改了我的。现在显示为`WSGIScriptAlias / /var/www/django-projects/myapp/myapp_settings/wsgi.py`. 但是，这仍然返回 404。Apache 日志中的错误说

`[Fri Sep 07 09:11:00 2012] [error] [client 192.189.x.x] File does not exist: /var/www/html/login`

请注意，它正在查找`/var/www/html`（默认 Apache 根目录）而不是`/var/www/django-projects`

**EDIT2：**我为本节附加了 VirtualHost 块

```
WSGIPythonPath /var/www/django-projects/myapp
<VirtualHost sub.example.com:80>
     DocumentRoot /var/www/django-projects/myapp
     ServerName sub.example.com
     WSGIScriptAlias / /var/www/django-projects/myapp/myapp_settings/wsgi.py

     Alias /robots.txt /var/www/django-projects/myapp/static/robots.txt
     Alias /favicon.ico /var/www/django-projects/myapp/static/favicon.ico
     AliasMatch ^/([^/]*\.css) /var/www/django-projects/myapp/static/css/$1
     AliasMatch ^/([^/]*\.js) /var/www/django-projects/myapp/static/js/$1
     AliasMatch ^/([^/]*\.png) /var/www/django-projects/myapp/static/images/$1
     AliasMatch ^/([^/]*\.swf) /var/www/django-projects/myapp/static/swf/$1

     Alias /media/ /var/www/django-projects/myapp/media/
     Alias /static/ /var/www/django-projects/myapp/static/

     <Directory /var/www/django-projects/myapp/static>
         Order deny,allow
         Allow from all
     </Directory>
     <Directory /var/www/django-projects/myapp/media>
         Order deny,allow
         Allow from all
     </Directory>
     <Directory /var/www/django-projects/myapp/myapp_settings/>
         <Files wsgi.py>
              Order deny,allow
              Allow from all
         </Files>
     </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:34:04.980

我相信您想更改您的 WSGIScriptAlias ，因为您当前希望`example.com/myapp/login`在您的示例显示您尝试使用时处理它`example.com/login`

```
WSGIScriptAlias / /var/www/django-projects/myapp/myapp_settings/wsgi.py 
```

请参阅[如何将 Django 与 Apache 和 mod_wsgi 一起使用](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T07:48:02.030

**长话短说**

自 Apache 2.4.x 起，Allow 和 Deny 已被弃用，请改用 Require all grant（或 denied）。

**长篇大论**

我在尝试使用 Apache 和 mod_wsgi 设置 Django 时遇到了同样的问题。我不完全确定为什么会发生这种情况，但是当我在 httpd.conf 中注释掉以下行时

```
# Deny access to the entirety of your server's filesystem. You must
# explicitly permit access to web content directories in other 
# <Directory> blocks below.
#
#<Directory />
#    AllowOverride none
#    Require all denied
#</Directory> 
```

一切正常。

我不确定这是否是解决问题的正确和安全的方法，但我希望它可能会有所帮助。

**PS**我认为这*不应该*引起太多的安全问题，因为根目录无论如何都是别名的：`WSGIScriptAlias / /var/www/django-projects/myapp/myapp_settings/wsgi.py`，但我可能已经磨损了。

**PPS**看起来更好的解决方案是不注释这些行，但将 Order 和 Allow 指令更改为 Require all grant。例如：

```
<Directory /var/www/django-projects/myapp/myapp_settings/>
<Files wsgi.py>
Require all granted
#Order deny,allow
#Allow from all
</Files>
</Directory> 
```

然而，这只是我可以提出的试错解决方案。我对它为什么起作用没有深入的了解，但 Order and Allow 不起作用。

**PPPS**哦，现在我知道了。自 Apache 2.4.x 起，Allow 和 Deny 已被弃用。好的答案可以在[这里](https://stackoverflow.com/a/11993187/1906174)找到。

# php - 查找一个月的每周周期（从星期一开始）

> ID：12317909
> 
> 赞同：1
> 
> 时间：2012-09-07T12:15:31.303
> 
> 标签：php, time, duration, period, week-number

我正在尝试查找给定月份和年份的每周周期。日期应从星期一开始，到星期日结束。如果一个月的 1 日是星期日（2011 年 5 月前），它应该是第一个元素。

2011 年 5 月

*   5月1日（星期日）
*   5 月 2 日 - 5 月 8 日（周一至周日）
*   5 月 9 日 - 5 月 15 日（周一至周日）
*   5 月 17 日 - Ma6y 22（周一至周日）
*   5 月 23 日 - 5 月 29 日（周一至周日）
*   5 月 30 日 - 5 月 31 日（周一至周二）

2012 年 9 月

*   9 月 1 日 - 9 月 2 日
*   9 月 3 日 - 9 月 9 日
*   9 月 10 日 - 9 月 16 日
*   9 月 17 日 - 9 月 23 日
*   9 月 24 日 - 9 月 30 日

我正在使用这个函数来计算两个日期的周数 - 即每月的第一天和每月的最后一天。

```
public function getWeekNumbers($startDate, $endDate)
{
    $p = new DatePeriod(
            new DateTime($startDate),
            new DateInterval('P1W'),
            new DateTime($endDate)
    );

    $weekNumberList = array();

    foreach ($p as $w)
    {
        $weekNumber = $w->format('W');
        $weekNumberList[] = ltrim($weekNumber, '0');
    }

    return $weekNumberList;
} 
```

奇怪的是，对于 1 月份，当我期待 [1, 2, 3, 4, 5] 时，它会返回 [52, 1, 2, 3, 4] 的周数。

一旦我有了周数，我就会像这样使用它们：

```
//The following loop will populate the dataset with the entire month's durations - regardless if hours were worked or not.
    $firstDayOfMonth = date('Y-m-d', strtotime("first day of {$this->year}-{$monthName}"));
    $lastDayOfMonth = date('Y-m-d', strtotime("last day of {$this->year}-{$monthName}"));

    foreach ($this->getWeekNumbers($firstDayOfMonth, $lastDayOfMonth) as $key => $weekId)
    {
        // find first mоnday of the year
        $firstMon = strtotime("mon jan {$this->year}");

        // calculate how many weeks to add
        $weeksOffset = $weekId - date('W', $firstMon);

        $beginDays = $weeksOffset * 7;
        $endDays = ($weeksOffset * 7) + 6;

        $searchedMon = strtotime(date('Y-m-d', $firstMon) . " +{$beginDays} days");
        $searchedSun = strtotime(date('Y-m-d', $firstMon) . " +{$endDays} days");

        echo date("M d", $searchedMon) . " - " . date("M d", $searchedSun);
    } 
```

由于 getWeekNumbers 函数没有返回我期望的周数，因此上述函数的输出为

*   12 月 24 日 - 12 月 30 日 (2012)
*   1 月 2 日 - 1 月 8 日 (2012)
*   1 月 9 日 - 1 月 15 日 (2012)
*   1 月 16 日 - 1 月 22 日 (2012)
*   1 月 23 日 - 1 月 29 日 (2012)

请注意，第一行（12 月 24 日 - 12 月 30 日）是当年年底（2012 年），而不是去年年底（2011 年）。

理想情况下，我希望它看起来像![在此处输入图像描述](../Images/acfa08d0b24cb02f0ccf5aad9263390d.png)

有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:48:06.037

如果您需要选定月份的所有星期，以及选定星期的所有日期，那么这就是您所需要的：

```
function getWeekDays($month, $year)
{
    $p = new DatePeriod(
        DateTime::createFromFormat('!Y-n-d', "$year-$month-01"),
        new DateInterval('P1D'),
        DateTime::createFromFormat('!Y-n-d', "$year-$month-01")->add(new DateInterval('P1M'))
    );

    $datesByWeek = array();
    foreach ($p as $d) {
        $dateByWeek[ $d->format('W') ][] = $d;
    }
    return $dateByWeek;
} 
```

getWeekDays() 函数返回多维数组。第一个键是周数。2 级是数组，将日期保存为 DateTime 对象。

获取示例：

```
print_r( getWeekDays(5, 2011) ); # May 2011
print_r( getWeekDays(9, 2012) ); # Sep 2012 
```

我有一点时间，所以我写了一个例子;-)

```
$datesByWeek = getWeekDays(8, 2012);
$o = '<table border="1">';
$o.= '<tr><th>Week</th><th>Monday</th><th>Tuesday</th><th>Wednesday</th><th>Thursday</th><th>Friday</th><th>Saturday</th><th>Sunday</th></tr>';
foreach ($datesByWeek as $week => $dates) {
    $firstD = $dates[0];
    $lastD = $dates[count($dates)-1];

    $o.= "<tr>";
    $o.= "<td>" . $firstD->format('M d') . ' - ' . $lastD->format('M d') . "</td>";
    $N = $firstD->format('N');
    for ($i = 1; $i < $N; $i++) {
        $o.= "<td>-</td>";
    }
    foreach ($dates as $d) {
        $o.= "<td>" . $d->format('d.') . " / 0.00</td>";
            # for selected date do you magic
    }
    $N = $lastD->format('N');
    for ($i = $N; $i < 7; $i++) {
        $o.= "<td>-</td>";
    }
    $o.= "</tr>";
}
$o.= '</table>';
echo $o; 
```

输出如下所示： ![在此处输入图像描述](../Images/1b6983d609009323a9d5db3deb53ccb6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:27:36.540

以下假设用户可以选择他们想要运行报告的月份和年份（发布的值是月份的 1-12 和年份的 YYYY）。可能有一种更优雅的方式来做到这一点，但这似乎对我有用。此外，在您的帖子顶部，您说您希望星期是星期一 - 星期日。但是，底部的示例/屏幕截​​图显示星期是星期日到星期六。以下是最初规定的周一至周日的目标。

```
$month = $_POST["month"];
$year = $_POST["year"];

$endDate = date("t", strtotime($year."-".$month."-01"));

$dayOfWeekOfFirstOfMonth = date("w", strtotime($year."-".$month."-01"));
$lastDayOfFirstWeek = 8 - $dayOfWeekOfFirstOfMonth;

$weeksArray = array(array("firstDay"=>1, "lastDay"=>$lastDayOfFirstWeek));

$loopDate = $lastDayOfFirstWeek + 1;

while($loopDate < $endDate)
{
    $weeksArray[] = array("firstDay"=>$loopDate, "lastDay"=>($loopDate+6 > $endDate ? $endDate : $loopDate+6));
    $loopDate+=7;
}

foreach($weeksArray as $week)
{
    echo date("M d", strtotime($year."-".$month."-".$week["firstDay"])) . " - " . date("M d", strtotime($year."-".$month."-".$week["lastDay"])) . "\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T16:28:02.043

这完美！phpfiddle[在这里](http://phpfiddle.org/main/code/0zy-7nh)

```
<?php
// start and end must be timestamps !!!!
$start = 1346976000;  //  Thu 2012-09-06
$end   = 1348704000;  //  Tue 2012-09-26

// generate the weeks 
$weeks = generateweeks($start, $end);

// diaplay the weeks
echo 'From: '.fDate($start).'<br>';
foreach ($weeks as $week){
   echo fDate($week['start']).' '.fDate($week['end']).'<br>';
}
echo 'To: '.fDate($end).'<br>';

/*   outputs this:
From: Thu 2012-09-06
Thu 2012-09-06 Sun 2012-09-09
Mon 2012-09-10 Sun 2012-09-16
Mon 2012-09-17 Sun 2012-09-23
Mon 2012-09-24 Wed 2012-09-26
To: Wed 2012-09-26
*/

// $start and $end must be unix timestamps (any range)
//  returns an array of arrays with 'start' and 'end' elements set 
//  for each week (or part of week) for the given interval
//  return values are also in timestamps
function generateweeks($start,$end){
    $ret = array();
    $start = E2D($start);
    $end = E2D($end);

    $ns = nextSunday($start);

    while(true){
        if($ns>=$end) {insert($ret,$start,$end);return $ret;}
        insert($ret,$start,$ns);
        $start = $ns +1;
        $ns+=7;
    }
}

// helper function to append the array and convert back to unix timestamp
function insert(&$arr, $start, $end){$arr[] = array('start'=>D2E($start), 'end'=>D2E($end));}
// recives any date on CD format returns next Sunday on CD format
function nextSunday($Cdate){return $Cdate + 6  - $Cdate % 7;}
// recives any date on CD format returns previous Monday on CD format // finaly not used here
function prevMonday($Cdate){return $Cdate      - $Cdate % 7;}   
// recives timestamp returns CD
function E2D($what){return floor($what/86400)+2;}     // floor may be optional in some circunstances
// recives CD returns timestamp
function D2E($what){return ($what-2)*86400;}          // 24*60*60
// just format the timestamp for output, you can adapt it to your needs
function fDate($what){return date('D Y-m-d',$what);} 
```

# android - Android上的JPEG2000编码器/解码器

> ID：12317914
> 
> 赞同：0
> 
> 时间：2012-09-07T12:15:52.927
> 
> 标签：android, jpeg2000

我想在 Android 上编码/解码 jpeg2000 格式。您对如何实施它有任何建议/教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:19:41.300

在其他谷歌搜索结果中：

*   [https://encrypted.google.com/search?q=jpeg+2000+encoding+java+library](https://encrypted.google.com/search?q=jpeg+2000+encoding+java+library)
*   [https://encrypted.google.com/search?q=jpeg+2000+encoding+java+library+android&oq=jpeg+2000+encoding+java+library+android](https://encrypted.google.com/search?q=jpeg+2000+encoding+java+library+android&oq=jpeg+2000+encoding+java+library+android)
*   [使用 Hadoop 等分布式计算将图像编码为 Jpeg2000](https://stackoverflow.com/questions/4301065/encoding-image-into-jpeg2000-using-distributed-computing-like-hadoop)
*   [http://www.jpeg.org/jpeg2000guide/software/software.html](http://www.jpeg.org/jpeg2000guide/software/software.html)

# ruby - 为什么即使在需要'test/unit'之后也会抛出'undefined method `assert_equal''

> ID：12317921
> 
> 赞同：10
> 
> 时间：2012-09-07T12:16:14.763
> 
> 标签：ruby, testunit

我打开 irb 并输入：

```
require 'test/unit' 
```

但是当我使用该`assert_equal`方法时，出现以下错误：`NoMethodError: undefined method 'assert_equal' for main:Object`. 为什么即使在需要“测试/单元”之后也会发生这种情况？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T12:22:14.690

`assert_equal`是在 的子类上定义的`Test::Unit::TestCase`，因此仅在该类中可用。`include Test::Unit::TestCase`将这些方法加载到当前范围可能会取得一些成功。

更有可能你可以更好地在一个短文件中编写你的测试，并运行它们`ruby ./my_file.rb`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-29T18:20:54.860

您可以在内置的 ruby​​ 错误测试中使用

```
raise "Message you want to throw when error happens" if/unless "Condition when you want to throw the error " 
```

**或者**

如果您在尝试使用断言时收到错误消息，例如“NoMethodError: undefined method `assert' for main:Object”，请将其添加到脚本的顶部：

```
require "test/unit/assertions"
include Test::Unit::Assertions 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-07T13:23:46.333

这是使用断言的方式：

```
class Gum
  def crisis; -42 end
end

# and as for testing:

require 'test/unit'

class GumTest < Test::Unit::TestCase
  def test_crisis
    g = Gum.new
    assert_equal -42, g.crisis
  end
end 
```

# git - 如何处理git中的主要版本分支

> ID：12317923
> 
> 赞同：3
> 
> 时间：2012-09-07T12:16:14.753
> 
> 标签：git, git-branch, git-flow

我只是将开发项目从 SVN 切换到 git，这是我们第一次使用任何类型的分支。我正在围绕 git-flow 方法（基于[这篇很棒的文章](http://nvie.com/posts/a-successful-git-branching-model/)）思考问题，但我一直在概念化如何做一件事。

当我们进行主要版本升级（比如从 2​​ 到 3）时，我们仍然支持版本 2 至少一年，包括错误修复和偶尔的新功能。我会为版本 2 创建一个新的永久分支来应用这些更改吗？如果我们继续为第 3 版开发并决定要在第 2 版中添加新的第 3 版功能，这可能吗？你会怎么做？我是否必须从开发分支中挑选提交到版本 2 分支，或者我可以进行实际的合并？

（我将 Tower 用于我的 Git 客户端）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:24:31.743

是的，您将拥有一个支持分支和一个开发分支。

支持分支上的任何错误修复很可能也与开发分支相关，因此支持分支应定期合并到开发分支中。请注意，您的开发版本分歧越大，您遇到的合并冲突就越多。

另一种情况，与支持相关的开发功能应该是例外而不是规则（否则你会首先开发它以支持），所以这些提交应该是精心挑选的。不应将开发分支合并到支持分支中，因为您很可能在其中有许多未测试、未完成或实验性的功能，您不想将其作为支持补丁发布。

# html - HTML/CSS - 调整大小的 3 列

> ID：12317927
> 
> 赞同：1
> 
> 时间：2012-09-07T12:16:25.033
> 
> 标签：html, css, layout, jquery-masonry

我正在构建一个非常简单的页面，由 tumblr 提供支持。

它在主要区域有 3 列内容。内容 div 都设置为 33% 的宽度并向左浮动，大多数情况下它会按照您的预期自行排列，但是当您调整窗口大小时，它似乎有时会恢复为 2 列。有谁知道如何解决这个问题？

html 在这里：[http ://emilestest.tumblr.com](http://emilestest.tumblr.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:23:33.433

尝试将 .item css 宽度设置为：32%。浏览器有时可能会错误计算宽度，因此您可能有一两个额外的像素，因此浮动重叠到下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:23:44.743

涉及到 Javascript 操作。您的`article`html 元素获取绝对位置和一些坐标。查看这些脚本（或禁用它们，以便仅使用 CSS 进行定位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T12:26:51.387

在您的具体情况下，有几种解决方案：

1.  使用 JavaScript放置 + 大小`div`s 并禁用 CSS 布局
2.  利用`display: table`
3.  使用一个`table`元素

免责声明：对于所有在阅读时哭泣的人`table`：

> 使用分区来模拟表格以显示表格数据与使用表格控制图形和页面布局一样是设计缺陷。

资料来源：[http ://en.wikipedia.org/wiki/Tableless_web_design#The_use_of_tables](http://en.wikipedia.org/wiki/Tableless_web_design#The_use_of_tables)

# ruby-on-rails-3 - RDiscount 自定义生成的 html

> ID：12317933
> 
> 赞同：1
> 
> 时间：2012-09-07T12:16:55.203
> 
> 标签：ruby-on-rails-3, markdown

我在我的应用程序中使用[RDiscount](https://github.com/rtomayko/rdiscount)将 Markdown 转换为 html。实际上，当我在 Markdown 中添加一些代码时，它会生成**代码**和**预**标记，但我想在**代码**标记中添加一个类，我该怎么做？我需要用 Nokogiri 或类似的东西解析生成的 HTML 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:51:26.520

Rdiscount 本身似乎无法做到这一点。解析结果（使用 Nokogiri 或其他）可能会奏效，但可能会很昂贵。如果可以，请切换到另一个库，例如[Redcarpet](https://github.com/vmg/redcarpet)。这个看起来可以很容易地扩展以满足您的需求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:59:54.103

有一件事是肯定的，你不能告诉 Rdiscount 去做，它没有选择。我查看了 Rdiscount 源代码，这就是我最终在文件 generate.c 中的内容：

```
static void
printcode(Line *t, MMIOT *f)
{
    int blanks;

    Qstring("<pre><code>", f);
    for ( blanks = 0; t ; t = t->next ) {
    if ( S(t->text) > t->dle ) {
        while ( blanks ) {
        Qchar('\n', f);
        --blanks;
        }
        code(f, T(t->text), S(t->text));
        Qchar('\n', f);
    }
    else blanks++;
    }
    Qstring("</code></pre>", f);
} 
```

没有将任何类添加到代码和 pre 的选项。

如果您需要添加一个类来格式化标记，也许您可​​以尝试一种解决方法并在

```
<div class="myclass">
    <pre><code> 
```

对你来说可行吗？

# java - 在 Android 上创建临时文件的最佳方法是什么？

> ID：12317934
> 
> 赞同：12
> 
> 时间：2012-09-07T12:17:01.087
> 
> 标签：java, android, file, file-io

好吧，这不完全是一个问题，因为我并没有真正“卡住”我的代码，但我发现 Android API 在访问外部存储和 File.createTempFile() 方法方面有一些奇怪的行为，而且我想了解发生了什么...

请注意，我的清单**不**包括`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE">`.

* * *

**第1部分 ：**

我有以下代码可以**作为**一个魅力：

```
File tempFile = new File(Environment.getExternalStorageDirectory(),
                      "my_temp_file.png"); 
```

它为我创建了一个临时文件，我可以毫无困难地在其中写入数据。

**问题 1**：为什么它会起作用，因为我不应该在我的 SDCard 上拥有写入权限？

* * *

**第2部分 ：**

我试图更改我的代码以使用`createTempFile`创建临时文件的官方方法。所以我试过：

```
File tempFile = File.createTempFile("my_temp", "png", 
                      Environment.getExternalStorageDirectory()); 
```

并在我的 manifest.xml 中添加了**WRITE_EXTERNAL_STORAGE 。**你猜怎么了 ？这不起作用，我得到一个`java.io.IOException`：

```
09-07 14:07:29.061: E/_CLOG(19982): java.io.IOException: Permission denied
09-07 14:07:29.061: E/_CLOG(19982):     at java.io.File.createNewFileImpl(Native Method)
09-07 14:07:29.061: E/_CLOG(19982):     at java.io.File.createNewFile(File.java:1257)
09-07 14:07:29.061: E/_CLOG(19982):     at java.io.File.createTempFile(File.java:1322)
09-07 14:07:29.061: E/_CLOG(19982):     at com.(...).onClick(ProfileImageUpdater.java:58) 
```

**问题2**：为什么这不起作用，而恕我直言它应该？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T12:22:40.230

试试这样...

```
File outputDir = context.getCacheDir(); // context being the Activity pointer
File outputFile = File.createTempFile("prefix", "extension", outputDir); 
```

**编辑 ：**

对于**问题 2**

可能是以下链接的问题...

[Environment.getExternalStorageDirectory 不返回可移动存储的路径](https://stackoverflow.com/questions/6049114/environment-getexternalstoragedirectory-does-not-return-the-path-to-the-removabl)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T12:22:16.210

您收到此错误是因为您在 manifest.xml 上声明了写入外部存储的权限。您需要添加此权限。

此外，永远不要直接在 getExternalStorage() 上写入文件（特别是临时文件）。

这将直接放在 SD 卡上，并会造成混乱。对于只能由您自己的应用程序查看的临时文件，您应该使用：

```
getExternalStorage() + "/Android/data/<package_name>/cache/" 
```

替换为您打包的应用程序，例如 com. Orabig.myFirstApp 如果用户卸载应用程序，该特殊文件夹会自动从系统中删除，从而使系统没有临时文件。

**编辑：**

> 请注意，我的清单不包括

你必须！

**编辑：** 另外，如果您创建临时媒体文件（例如 PNG），最好在该文件夹上创建一个名为 .nomedia 的空文件。这样您就可以避免媒体扫描仪对其进行扫描并将其显示在图库中。

**最后编辑：**

在创建文件之前，您必须通过调用`mkdirs()`File 对象来创建文件夹。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T09:32:43.377

我终于弄清楚发生了什么...

问题 1：事实上，创建的文件旨在供系统应用程序用于从用户的图库中检索和裁剪图像。所以我的应用程序不必拥有 WRITE_EXTERNAL_STORAGE 权限，因为该文件是由系统本身编写的。

问题2：我不确定。我猜Android不允许在我尝试的地方创建一个临时文件（因为它不适合它）

# php - mysql查询中的post函数

> ID：12317936
> 
> 赞同：0
> 
> 时间：2012-09-07T12:17:12.620
> 
> 标签：php, mysql, post

我尝试通过 post 函数创建一个从公式获取的查询。post 函数必须传递一个文本和一个 int 变量来创建发送到数据库的查询。

当我开始执行我的 php 脚本时，它说：未定义的索引，用于 int 变量。

我不明白为什么无法识别 int 变量。这是我的代码：

公式04.php

```
<form action="selection_jeux.php" method="post">
    <p>
    Nom
    <input type="text" name="possesseur"/>
        Prix maximum
    <input type="int" name="prixmax"/>
    <input type="submit" value="Valider"/>
    </p>
</form>

selection_jeux.php

<?php
    try
    {
        $bdd = new PDO('mysql:host=localhost;dbname=test' , 'root', '');
    }
    catch(Exception $e)
    {
        die('Erreur : '.$e->getMessage());
    }
    $req = $bdd->prepare('SELECT nomselec, prix FROM jeux_video WHERE possesseur = :possesseur AND prix <= :prixmax');
    $req->execute(array('possesseur'=> $_POST['possesseur'], 'prixmax'=> $_POST['prixmax']));

    echo '<ul>';

    while($donnees = $req->fetch())
    {
        echo '<li>'  . $donnees['nom'] . ' (' . $donnees['prix'] . ' EUR)</li>'; 
    }
    echo '<li>';

    $req->closeCursor();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:19:18.933

哦，

好吧，这只是基本的 HTML

```
<input type="text"> 
```

并不意味着内容将是一个字符串，它只是一种输入。

`<input type="int">`只是不存在...

接受的输入类型 (HTML4)

*   按钮
*   复选框
*   文件
*   隐
*   图片
*   密码
*   收音机
*   重启
*   提交
*   文本

接受的输入类型 (HTML5)

*   按钮
*   复选框
*   颜色
*   日期
*   约会时间
*   本地日期时间
*   电子邮件
*   文件
*   隐
*   图片
*   月
*   数字
*   密码
*   收音机
*   范围
*   重启
*   搜索
*   提交
*   电话
*   文本
*   时间
*   网址
*   星期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:19:13.437

因为没有称为 int 的输入类型。

[http://de.selfhtml.org/html/referenz/attribute.htm#input](http://de.selfhtml.org/html/referenz/attribute.htm#input)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:21:30.080

**问题在于 SQL 语句而不是 HTML 标记**

**在您的准备语句中，您有 SELECT nomselec,prix 但在您的 while 语句中，您有 $donnees['nom'] 而不是 nomselec**

这可能是问题吗？

对于所有说 int 不是有效类型的人来说，这并不重要，它仍然会正常发布；

例子：

```
<?php
if(isset($_POST))
{
    print_r($_POST);
}
?>
<form action="" method="post">
<p>
Nom
<input type="text" name="possesseur"/>
Prix maximum
<input type="int" name="prixmax"/>
<input type="submit" value="Valider"/>
</p>
</form> 
```

回报：

```
Array ( [possesseur] => test [prixmax] => 123 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T12:23:40.357

使用 < `input type="number">` HTML5 输入类型是

```
color
date
datetime
datetime-local
email
month
number
range
search
tel
time
url
week 
```

# perl - perl 自动加载模块，就像在 php 中一样

> ID：12317939
> 
> 赞同：1
> 
> 时间：2012-09-07T12:17:39.183
> 
> 标签：perl, module, autoload

我正在 Perl 中创建一个更大的应用程序，我想知道类似于 php 的类自动加载是否可以在 Perl 中完成？

我检查了捕获异常和 $`SIG{__DIE__}`重新定义等，但这似乎不是解决方案，因为它将首先在“无法通过包找到新方法”时停止，然后加载每个模块，我应该再次调用整个程序。

一种解决方案可能是扫描我的库中的所有文件并`@INC`在运行时将其提供给它，但我不知道这是否是一个好的解决方案——可能不是。

有人有建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:00:20.840

好吧，您可能想阅读以下内容：

*   [自动加载](http://perldoc.perl.org/perlsub.html#Autoloading)和[自动加载器](http://perldoc.perl.org/AutoLoader.html)
*   [自动使用](https://metacpan.org/module/autouse)
*   [类::自动使用](https://metacpan.org/module/Class::Autouse)
*   [之后](https://metacpan.org/module/later)
*   等等

不过，这些都与 PHP 的方法完全不同。

但是，列出所有“正常”依赖项确实是最佳实践。这使得构建安装程序/部署到 CPAN 等变得更容易。还有许多其他模块处理加载插件，在运行时你真的不知道要加载什么。

找出你的依赖关系是否有一些困难，或者你只是想避免在每个文件的顶部使用一堆“使用”语句？

# python - Python 线程：我可以同时睡在两个 threading.Event() 上吗？

> ID：12317940
> 
> 赞同：28
> 
> 时间：2012-09-07T12:01:21.370
> 
> 标签：python, multithreading

如果我有两个`threading.Event()`对象，并且希望在设置其中一个对象之前一直睡觉，那么在 python 中是否有一种有效的方法来做到这一点？显然我可以对轮询/超时做一些事情，但我希望真正让线程休眠，直到设置一个，类似于`select`文件描述符的使用方式。

那么在下面的实现中，一个高效的非轮询实现`wait_for_either`会是什么样子呢？

```
a = threading.Event()
b = threading.Event()

wait_for_either(a, b) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T14:44:02.293

这是一个非轮询非过多线程解决方案：修改现有`Event`的 s 以在它们更改时触发回调，并在该回调中处理设置新事件：

```
import threading

def or_set(self):
    self._set()
    self.changed()

def or_clear(self):
    self._clear()
    self.changed()

def orify(e, changed_callback):
    e._set = e.set
    e._clear = e.clear
    e.changed = changed_callback
    e.set = lambda: or_set(e)
    e.clear = lambda: or_clear(e)

def OrEvent(*events):
    or_event = threading.Event()
    def changed():
        bools = [e.is_set() for e in events]
        if any(bools):
            or_event.set()
        else:
            or_event.clear()
    for e in events:
        orify(e, changed)
    changed()
    return or_event 
```

示例用法：

```
def wait_on(name, e):
    print "Waiting on %s..." % (name,)
    e.wait()
    print "%s fired!" % (name,)

def test():
    import time

    e1 = threading.Event()
    e2 = threading.Event()

    or_e = OrEvent(e1, e2)

    threading.Thread(target=wait_on, args=('e1', e1)).start()
    time.sleep(0.05)
    threading.Thread(target=wait_on, args=('e2', e2)).start()
    time.sleep(0.05)
    threading.Thread(target=wait_on, args=('or_e', or_e)).start()
    time.sleep(0.05)

    print "Firing e1 in 2 seconds..."
    time.sleep(2)
    e1.set()
    time.sleep(0.05)

    print "Firing e2 in 2 seconds..."
    time.sleep(2)
    e2.set()
    time.sleep(0.05) 
```

结果是：

```
Waiting on e1...
Waiting on e2...
Waiting on or_e...
Firing e1 in 2 seconds...
e1 fired!or_e fired!

Firing e2 in 2 seconds...
e2 fired! 
```

这应该是线程安全的。欢迎任何意见。

编辑：哦，这是你的`wait_for_either`函数，虽然我编写代码的方式是，最好制作并传递一个`or_event`. 请注意，`or_event`不应手动设置或清除 。

```
def wait_for_either(e1, e2):
    OrEvent(e1, e2).wait() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-02-08T07:15:21.817

我认为标准库为这个问题提供了一个非常规范的解决方案，我没有看到这个问题：[条件变量](https://docs.python.org/3/library/threading.html#threading.Condition)。您让主线程等待条件变量，并在每次收到通知时轮询事件集。仅在其中一个事件更新时才通知它，因此没有浪费的轮询。这是一个 Python 3 示例：

```
from threading import Thread, Event, Condition
from time import sleep
from random import random

event1 = Event()
event2 = Event()
cond = Condition()

def thread_func(event, i):
    delay = random()
    print("Thread {} sleeping for {}s".format(i, delay))
    sleep(delay)

    event.set()
    with cond:
        cond.notify()

    print("Thread {} done".format(i))

with cond:
    Thread(target=thread_func, args=(event1, 1)).start()
    Thread(target=thread_func, args=(event2, 2)).start()
    print("Threads started")

    while not (event1.is_set() or event2.is_set()):
        print("Entering cond.wait")
        cond.wait()
        print("Exited cond.wait ({}, {})".format(event1.is_set(), event2.is_set()))

    print("Main thread done") 
```

示例输出：

```
Thread 1 sleeping for 0.31569427100177794s
Thread 2 sleeping for 0.486548134317051s
Threads started
Entering cond.wait
Thread 1 done
Exited cond.wait (True, False)
Main thread done
Thread 2 done 
```

请注意，没有额外的线程或不必要的轮询，您可以等待任意谓词变为真（例如，设置任何特定的事件子集）。该模式还有一个`wait_for`包装器`while (pred): cond.wait()`，它可以使您的代码更易于阅读。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-07T12:39:06.727

一种解决方案（*使用轮询*`Event`）是在循环中对每个进行顺序等待

```
def wait_for_either(a, b):
    while True:
        if a.wait(tunable_timeout):
            break
        if b.wait(tunable_timeout):
            break 
```

我认为，如果您将超时调整得足够好，结果就可以了。

* * *

我能想到的最好的非轮询是在不同的线程中等待每个人，并`Event`在主线程中设置一个共享的人。

```
def repeat_trigger(waiter, trigger):
    waiter.wait()
    trigger.set()

def wait_for_either(a, b):
    trigger = threading.Event()
    ta = threading.Thread(target=repeat_trigger, args=(a, trigger))
    tb = threading.Thread(target=repeat_trigger, args=(b, trigger))
    ta.start()
    tb.start()
    # Now do the union waiting
    trigger.wait() 
```

* * *

很有趣，所以我写了一个之前解决方案的 OOP 版本：

```
class EventUnion(object):
    """Register Event objects and wait for release when any of them is set"""
    def __init__(self, ev_list=None):
        self._trigger = Event()
        if ev_list:
            # Make a list of threads, one for each Event
            self._t_list = [
                Thread(target=self._triggerer, args=(ev, ))
                for ev in ev_list
            ]
        else:
            self._t_list = []

    def register(self, ev):
        """Register a new Event"""
        self._t_list.append(Thread(target=self._triggerer, args=(ev, )))

    def wait(self, timeout=None):
        """Start waiting until any one of the registred Event is set"""
        # Start all the threads
        map(lambda t: t.start(), self._t_list)
        # Now do the union waiting
        return self._trigger.wait(timeout)

    def _triggerer(self, ev):
        ev.wait()
        self._trigger.set() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-12T08:42:15.307

启动额外的线程似乎是一个明确的解决方案，但不是很有效。函数 wait_events 将阻止 util 设置任何一个事件。

```
def wait_events(*events):
    event_share = Event()

    def set_event_share(event):
        event.wait()
        event.clear()
        event_share.set()
    for event in events:
        Thread(target=set_event_share(event)).start()

    event_share.wait()

wait_events(event1, event2, event3) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-23T04:58:15.420

在您可以等待的地方扩展[克劳迪乌的答案：](https://stackoverflow.com/a/12320352/1760875)

1.  事件 1 或事件 2
2.  事件 1 甚至 2

* * *

```
from threading import Thread, Event, _Event

class ConditionalEvent(_Event):
    def __init__(self, events_list, condition):
        _Event.__init__(self)

        self.event_list = events_list
        self.condition = condition

        for e in events_list:
            self._setup(e, self._state_changed)

        self._state_changed()

    def _state_changed(self):
        bools = [e.is_set() for e in self.event_list]
        if self.condition == 'or':                
            if any(bools):
                self.set()
            else:
                self.clear()

        elif self.condition == 'and':                 
            if all(bools):
                self.set()
            else:
                self.clear()

    def _custom_set(self,e):
        e._set()
        e._state_changed()

    def _custom_clear(self,e):
        e._clear()
        e._state_changed()

    def _setup(self, e, changed_callback):
        e._set = e.set
        e._clear = e.clear
        e._state_changed = changed_callback
        e.set = lambda: self._custom_set(e)
        e.clear = lambda: self._custom_clear(e) 
```

示例用法将与以前非常相似

```
import time

e1 = Event()
e2 = Event()

# Example to wait for triggering of event 1 OR event 2
or_e = ConditionalEvent([e1, e2], 'or')

# Example to wait for triggering of event 1 AND event 2
and_e = ConditionalEvent([e1, e2], 'and') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-29T17:49:23.390

这是一个老问题，但我希望这对来自谷歌的人有所帮助。
接受的答案相当陈旧，并且会导致两次“orified”事件的无限循环。

这是一个使用`concurrent.futures`

```
import concurrent.futures
from concurrent.futures import ThreadPoolExecutor

def wait_for_either(events, timeout=None, t_pool=None):
    '''blocks untils one of the events gets set

    PARAMETERS
    events (list): list of threading.Event objects
    timeout (float): timeout for events (used for polling)
    t_pool (concurrent.futures.ThreadPoolExecutor): optional
    '''

    if any(event.is_set() for event in events):
        # sanity check
        pass
    else:
        t_pool = t_pool or ThreadPoolExecutor(max_workers=len(events))
        tasks = []
        for event in events:
            tasks.append(t_pool.submit(event.wait))

        concurrent.futures.wait(tasks, timeout=timeout, return_when='FIRST_COMPLETED')
        # cleanup
        for task in tasks:
            try:
                task.result(timeout=0)
            except concurrent.futures.TimeoutError:
                pass 
```

测试功能

```
import threading
import time
from datetime import datetime, timedelta

def bomb(myevent, sleep_s):
    '''set event after sleep_s seconds'''
    with lock:
        print('explodes in ', datetime.now() + timedelta(seconds=sleep_s))
    time.sleep(sleep_s)
    myevent.set()
    with lock:
        print('BOOM!')

lock = threading.RLock()  # so prints don't get jumbled
a = threading.Event()
b = threading.Event()

t_pool = ThreadPoolExecutor(max_workers=2)

threading.Thread(target=bomb, args=(event1, 5), daemon=True).start()
threading.Thread(target=bomb, args=(event2, 120), daemon=True).start()

with lock:
    print('1 second timeout, no ThreadPool', datetime.now())

wait_for_either([a, b], timeout=1)

with lock:
    print('wait_event_or done', datetime.now())
    print('=' * 15)

with lock:
    print('wait for event1', datetime.now())

wait_for_either([a, b], t_pool=t_pool)

with lock:
    print('wait_event_or done', datetime.now()) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T13:46:52.860

不漂亮，但您可以使用两个额外的线程来多路复用事件......

```
def wait_for_either(a, b):
  flag = False #some condition variable, event, or similar

  class Event_Waiter(threading.Thread):
    def __init__(self, event):
        self.e = event
    def run(self):
        self.e.wait()
        flag.set()

  a_thread = Event_Waiter(a)
  b_thread = Event_Waiter(b)
  a.start()
  b.start()
  flag.wait() 
```

请注意，如果它们到达得太快，您可能不得不担心意外获得这两个事件。辅助线程（a_thread 和 b_thread）应该在尝试设置标志时锁定同步，然后应该杀死另一个线程（如果它被消耗，可能会重置该线程的事件）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-16T06:53:03.800

```
def wait_for_event_timeout(*events):
    while not all([e.isSet() for e in events]):
        #Check to see if the event is set. Timeout 1 sec.
        ev_wait_bool=[e.wait(1) for e in events]
        # Process if all events are set. Change all to any to process if any event set
        if all(ev_wait_bool):
            logging.debug('processing event')
        else:
            logging.debug('doing other work')

e1 = threading.Event()
e2 = threading.Event()

t3 = threading.Thread(name='non-block-multi',
                      target=wait_for_event_timeout,
                      args=(e1,e2))
t3.start()

logging.debug('Waiting before calling Event.set()')
time.sleep(5)
e1.set()
time.sleep(10)
e2.set()
logging.debug('Event is set') 
```

# php - 数据库未与不同主机 CakePHP 版本 2.0.0-dev 上的服务器连接

> ID：12317943
> 
> 赞同：0
> 
> 时间：2012-09-07T12:18:03.263
> 
> 标签：php, mysql, cakephp, phpmyadmin, cakephp-2.0

我在服务器上连接 cake php version-2.0.0-dev 应用程序时遇到问题。当我连接本地主机数据库时，它在服务器上工作正常，但如果我尝试将它与另一台主机托管的不同服务器的数据库连接，则会出现以下错误：

```
Fatal error: Call to a member function getAttribute() on a non-object in
/home/dev.ukssmain/public_html/stock_system_ukrs/cake/libs/model/datasources/dbo/dbo_mysql.php
on line 259** 
```

我在 database.php 文件中的配置就像

```
public $default = array(
    'driver' => 'mysql',
    'connect' => 'mysql_connect',
'host' => 'test.com',
'port' => '3306',
'login' => 'test',
'password' => 'test',
'database' => 'test',
'prefix' => ''
); 
```

任何人都可以帮助我度过这个难关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:24:10.453

首先，您应该更新到 2.0.6（最新的稳定版 2.0.x），或最新的稳定版 2.2.2。你可以在[这里](https://github.com/cakephp/cakephp/tags)找到它们。

2.0.0-dev 不稳定且过时，您应该改用稳定版本。我不知道您为什么要使用 -dev 版本运行生产站点，您是在问问题。

数据库配置信息可以在[这里](http://book.cakephp.org/2.0/en/development/configuration.html#database-configuration)找到。

# javascript - 查看存储在服务器上的大型文本文件，例如日志文件（基于 Web）

> ID：12317946
> 
> 赞同：6
> 
> 时间：2012-09-07T12:18:09.633
> 
> 标签：javascript, web-applications, textbox, frontend, web-based

您能否命名一个用 JavaScript 实现的前端的好的文本查看器，它可以通过显示后端提供的文本片段来平滑地显示巨大的文本文件（大小为 Gbs 和 Tbs）？

Upd：与 jQuery Log Viewer 插件不同，它不仅应该显示日志的尾部，而且应该是一个成熟的文本查看器，具有 Page Up、Page Down 以及以选定百分比显示文件的某种方式（滚动条或 GoTo 按钮）

Upd2：它可以是开源的也可以是专有的

Upd3：与明显的分页文本不同，它应该可以逐行滚动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T12:45:05.270

查看[Node.JS](http://nodejs.org/) - 一个具有大量可用插件和模块的服务器端 JavaScript 框架。您可以通过文件系统模块加载文本文件，然后通过 http 模块通过 http 连接返回该文本文件的片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:24:28.980

如果您最终不得不自己编写一些东西，您可能会发现开源[LogMonitor](http://codebox.org.uk/pages/logmonitor)是一个有用的起点（免责声明 - 我写的）。

照原样它只会显示文件的尾部，但后端 Java 代码可以返回文件片段，而前端会以一些漂亮的格式显示它们，所以你可以用它做点什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:44:31.893

如果您已经拥有后端解析并准备日志片段，正如您所说，也许可以在前端使用像[YUI 编辑器这样简单的东西？](http://yuilibrary.com/yui/docs/editor/)

YUI 是高度可定制的，它看起来就像任何编辑器一样 + 你可以获得 YUI 配置、事件、钩子和其他东西。

编辑：我刚刚看到你没有后端解析器。在这种情况下，将 YUI 与之前提供的节点答案 Josh 结合起来。事实上，YUI 是节点就绪的，所以你也可以在后端使用它。

# memory - 我的设备的全局内存大小是多少？

> ID：12317947
> 
> 赞同：2
> 
> 时间：2012-09-07T12:18:12.237
> 
> 标签：memory, cuda

我有特斯拉 C2075。我想知道全局内存大小。所以我运行了`deviceQuery`SDK 示例。它报告我有 4GB 的全局内存，但是当我运行`nvidia-smi`-q 时，它报告了 6GB 的全局内存。为什么会出现这种不匹配？是否有一些内存专门用于操作系统？./deviceQuery 报告：

> CUDA 设备查询（运行时 API）版本（CUDART 静态链接）
> 
> 找到 1 个支持 CUDA 的设备
> 
> 设备 0：“Tesla C2075”
> CUDA 驱动程序版本/运行时版本 5.0/5.0
> CUDA 功能主要/次要版本号：2.0
> 全局内存总量：4096 MBytes（4294967295 字节）

nvidia-smi -q 输出：

> 内存使用
> 总量：5375 MB 已
> 使用：39 MB
> 空闲：5336 MB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T15:49:54.770

您正在运行 32 位 Linux，因此您的进程将只有 4GB 的设备内存可用。

该设备仍然有 6GB，因此如果您有两个进程共享该设备，那么它们之间可以占用全部 6GB，但每个进程只能使用 4GB。

# java - GAE：实例和队列之间的分工

> ID：12317948
> 
> 赞同：0
> 
> 时间：2012-09-07T12:18:12.180
> 
> 标签：java, google-app-engine, ejb, esb, n-tier-architecture

我通常喜欢用 2 或 3“层”组件部署我的 JBoss 服务器应用程序：

*   一个`my-ws.war`包含我所有服务器的 Web 服务的文件，包括“Web 层”并部署到 JBoss 的 Web 容器；和
*   一个`my-esb.war`由我的服务器的“ESB”（服务总线）组成的文件，基本上是一个用 Apache Camel 构建的 ESB，用于为异步请求提供服务
*   1+ `EJB`s 包含我服务器的所有业务逻辑，包括“业务层”并部署到 JBoss 的应用程序容器；所有 EJB 都负责为同步请求提供服务

所以 Web 服务`my-ws.war`（及时），或者它将它们路由到一个队列，在那里它们被我的基于 Camel 的 ESB 拾取和处理（在异步请求的情况下）。这一直对我有用，我真的很喜欢这种架构。

我现在正在设计我的第一个 GAE 后端，并且正在努力弄清楚如何将相同的架构映射到 GAE 平台上。

显然，我必须将所有内容部署为单个 WAR 文件（不再有 EAR 或 EJB）。但我在这里没有“得到”的是：

1.  如果 Web 服务确定请求是异步的并且应该在 ESB 上进行，我可以将请求排入任务队列，但不确定如何指示我的 Camel 路由的第一个端点获取任务并开始处理它（我'习惯于在 Camel 和 ActiveMQ 之间工作）
2.  我*假设*我的 ESB 应该部署到后端实例，因此它不受时间或线程约束的限制，**是**吗？
3.  如果 Web 服务确定请求是同步的并且必须快速响应，那么我需要 EJB 的 GAE 版本。我是否只是制作处理程序 POJOS 并将请求路由给他们？我的 Web 服务将尽可能多线程（我相信 10 个线程是前端实例的最大值）所以我认为这样的处理程序 POJO 需要是线程安全的，**是**吗？或者有没有更好的方法在 GAE 上模拟 EJB/模块化业务逻辑？

此外，如果有人认为尝试将我的正常架构映射到 GAE 有任何内在*错误，请大声说出来，让我知道是什么/为什么！*提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:36:23.363

您描述的架构很简单。您可以决定是否为您的应用程序提供隐含的复杂性。

我不熟悉 Camel 的具体细节，因此您需要尝试将此处的概念映射到它之上。但是，这应该没什么大不了的。在这个级别，ESB 是 ESB 是 ESB。

对于#1，有两种选择。GAE 有`push`和`pull`队列。`Push`队列由您设置并由 GAE 管理，并且只能在 GAE 环境中使用。`Pull`队列由您设置和管理，但可以驱动 GAE 和外部应用程序。

对于`push`您的应用程序来说，队列只不过是一个普通的 Web 请求，细节是 GAE 是发出实际请求的客户端。您将要访问的 URL 及其有效负载发布到队列中，GAE 捕获、路由和限制对您的 URL 的请求。为了向 Camel 注入请求，如果您可以从 Servlet 或任何任意 Java 类中抽取 Camel 管道，那么您可以在此处执行此操作。我知道 Camel 有一堆连接器和侦听器等，但在这种情况下，您只需要一个简单的、基于代码的注入点。我毫不怀疑骆驼可以做到这一点，我只是不能说细节。

`pull`队列完全不同。在这里，您将需要一个自由运行的线程，将任务从队列中拉出（使用 GAE 租用机制）并处理它们。您很可能能够利用一些 Camel 基础设施来创建一个`pull`队列兼容的线程端点，并让 Camel 管理整个套件。但最终，您必须对线程进行后台处理，管理要运行的线程数量，监控它们，关闭它们等。因此，与`push`队列相比，这里实际上需要做更多的工作。`Push`如果在 GAE 中包含所有内容是合理的要求，那么从内部基础架构的角度来看，队列更容易。如果您需要一些外部集成，`pull`可以通过 HTTP 请求从外部源中提取队列。

因此，虽然 Camel 可能没有开箱即用的能力来管理 GAE`pull`队列，但我敢打赌，调整现有组件来处理这个问题非常简单，然后你可以让 Camel 管理整个事情。如果您已经在这个级别上对 Camel 感到满意，那么这对您来说可能更容易使用。

对于#2，GAE 后端的两个主要好处是稳定性和寿命。普通实例作为通用 Web 应用程序存在，适用于负载平衡。GAE 根据流量和响应模式动态创建和销毁这些实例。但是很有可能在任何特定时间实际运行的应用程序实例为零，GAE 在看到第一个请求时会启动它们。因此，任何内部（即未保存在数据库中）托管状态都不能保证具有任何实际寿命。

后端是您控制的实例。它们很像其他云提供商的实例。您启动它，调整大小，将流量路由给它们，然后关闭它们。为此，您可以获得更好的正常运行时间和系统容量断言。

如果您的请求在 CPU 时间或资源方面不是特别苛刻，您可能不需要后端实例，尤其是`push`队列。基本上想象从 Web 浏览器获取请求，并将信息传递给 GAE 任务系统。GAE 要做的就是像任何其他请求一样立即回拨。对你的应用来说，它看起来就像正常的网络流量，它不“知道”它来自 GAE。

因此，如果您一次将 1000 个请求全部放入队列，GAE 将启动尽可能多的应用程序实例，以满足存储桶速率和消息速率。当这 1000 个请求完成后，GAE 将关闭所有安静的实例。就像您突然有 1000 名访问者访问您的应用程序，然后突然离开。

对于`pull`队列，您几乎需要一个长时间运行的实例，因为它们确实是唯一一种可以处理位于队列中等待流量的长时间运行的线程。但这意味着您一直在运行，无论是否有流量。

对于#3，这主要是直截了当的。

在最基本的形式中，EJB（我假设您主要指的是无状态会话 Bean）基本上是一个 POJO，其定义的生命周期包装在事务上下文中。您可以相当容易地复制 SSB，因为您可以编写自己的“迷你”容器：

```
YourTrnCtx ctx = startNewTransaction();
registerContextToThread(ctx);
YourBean b = new YourBean();
injectResources(b);
b.start();
b.service();
b.end();
commitTransaction(ctx); 
```

在 10,000 英尺处，这就是它的要点。幸运的是，您实际上不必自己编写。Spring 和 Guice 都可以为您处理其中的大部分内容，尤其是资源注入和其他 bean。如果您不大量（或根本不）使用 EJB 生命周期、拦截器或事务机制，那么也可以简化事情。

最后，假设您的 SSB 中没有静态值，您不必担心线程安全，因为您只需为每个请求创建一个新实例。与 Servlet 相比，极大地简化了问题。

您还可以查看像 Stripes 或 Struts 2 这样的体面的 Action Framework，它们围绕您的 Web 请求提供了许多这些生命周期模式等。可以简化事情。

这样就可以处理大 3。总而言之，我不是“身经百战”的 GAE 老手，我的 GAE 应用程序很小，并且没有使用任何这些技术。这都是“书本学习”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:31:06.273

好吧，我会尽量简明扼要，易于理解，并将答案按您问题的相同顺序排列。

1.  任务队列只是`URL`当任务从队列中取出时 Gae 会调用的。因此，您必须将其配置`URL`为根据需要调用您的后端或前端之一。**但是很重要！**您可以 [直接调用后端](https://developers.google.com/appengine/docs/java/backends/overview#Addressing_Backends)而不使用任务队列。

    *   在[推送](https://developers.google.com/appengine/docs/java/taskqueue/overview-push)队列中，您推送任务，Gae 会尽快执行它。
    *   在[拉](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull)队列中，您必须配置要执行任务的时间。
2.  正如我之前所说，如果您调用后端或前端取决于您要执行的任务，60 秒是前端调用的实际限制，对于许多任务来说很多。
3.  由于 Gae 不支持 EJB，如果您熟悉基于组件的框架（如 EJB），则必须寻找另一种，这里有一些选项，但还有更多：
    *   [apache tasperty](http://tapestry.apache.org/)，看起来很容易移植到 Gae。
    *   [apache wicket](http://wicket.apache.org/)，可以通过[wicket 初始化程序轻松移植到 Gae](https://github.com/wicketstuff/core/wiki/Google-AppEngine-Initializer)

无论您**为同步请求**做什么，您都必须在请求上下文中完成所有任务，否则将失去与客户端的连接。

# html - 当我导入 strict.dtd 时框架集标签正在工作

> ID：12317949
> 
> 赞同：0
> 
> 时间：2012-09-07T12:18:16.590
> 
> 标签：html, frameset

问题：当我将语句作为 html 页面的第一行导入时，标记正在工作。

问题描述：-我创建了一个页面TestingDoctype.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>
        <head>
            <title>Testing DOCTYPE</title>
        </head>
        <frameset >
            <frame src="a.htm"/>
        </frameset>
         <frameset >
            <frame src="b.htm"/>
        </frameset>
            <frameset >
            <frame src="c.htm"/>
        </frameset>
            <frameset >
            <frame src="d.htm"/>
        </frameset>
  </html> 
```

我使用了带有严格 dtd 的标签，但浏览器仍然解析它并显示页面。

我试图在谷歌上搜索示例，但我没有得到任何可以清除这些 dtd 之间差异的示例。请提供一些链接，以便我可以清除 dtd 文件的概念。

我会很感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:54:12.063

Web 浏览器不关注 DTD。除了执行验证之外，它们（在 HTML 的上下文中）几乎没有什么用处。（使用[验证器](http://validator.w3.org/)是一个非常好的主意）。

（浏览器确实关注 Doctypes，但仅作为在标准/几乎标准/怪癖解析/渲染模式之间切换的魔术字符串。）

# android - 对 ExpandableList 使用 SimpleCursorTreeAdapter 会出现错误“无法读取第 0 行，第 -1 列”。找不到错误

> ID：12317956
> 
> 赞同：1
> 
> 时间：2012-09-07T12:18:39.543
> 
> 标签：android, sqlite, listview, exception, cursor

我想从 SQLite 数据库中获取数据并通过 SimpleCursorTreeAdapter 填充我的 ExpandableListView，但它在某个地方失败了。我真的找不到什么问题，甚至不知道异常发生在哪里......

MyExpandableListAdapter：

```
private class MyExpandableListAdapter extends SimpleCursorTreeAdapter
    {       

        public MyExpandableListAdapter(Context context, Cursor cursor,
                int groupLayout, String[] groupFrom, int[] groupTo,
                int childLayout, String[] childFrom, int[] childTo) {
            super(context, cursor, groupLayout, groupFrom, groupTo, childLayout, childFrom,
                    childTo);
            // TODO Auto-generated constructor stub
        }

        @Override
        protected Cursor getChildrenCursor(Cursor groupCursor) {
            Log.d("Calling getChildrenCursor()","OK");
            Cursor childrenCursor = dbAdapter.getTrackedValuesByDate(groupCursor.getString(groupCursor.getColumnIndex(DbAdapter.KEY_VALUE_DATE)));
            Log.d("getChildrenCursor()", DatabaseUtils.dumpCursorToString(childrenCursor));
            startManagingCursor(childrenCursor);

            return childrenCursor;
        }       
    } 
```

这是我的活动中设置 ListAdapter 的相关部分：

```
private void fillData()
    {
        Cursor dateCursor = dbAdapter.getAllDates();
        startManagingCursor(dateCursor);
        Log.d("fillData()", DatabaseUtils.dumpCursorToString(dateCursor));
        MyExpandableListAdapter myAdapter = new MyExpandableListAdapter(this, 
        dateCursor, 
        R.layout.expandablelist_header_date, 
        new String[] {DbAdapter.KEY_VALUE_DATE},    
        new int[]{R.id.expandablelist_header_date},             
        R.layout.listview_tracked_values, 
        new String[] {DbAdapter.KEY_INDICATOR_NAME, DbAdapter.KEY_INDICATOR_UNIT, DbAdapter.KEY_VALUE_VALUE},
        new int[]{R.id.list_trackedvalue_indicatorname, R.id.list_trackedvalue_unit, R.id.list_trackedvalue_value });

        Log.d("fillData()", "Creation successful");     
        this.expandableList.setAdapter(myAdapter);
        Log.d("fillData()", "Adapter set");
    } 
```

以下是我的 dbAdapter 的两个使用功能：

```
public Cursor getTrackedValuesByDate(String dateString)
    {
        Cursor cursor = this.db.rawQuery("select * from "+DB_INDICATORS_TABLE+" i,"+ DB_VALUES_TABLE+" v where i."
        + KEY_INDICATOR_ROWID+"=v."+KEY_VALUE_INDICATOR_ID+" and v."+KEY_VALUE_DATE+"='"+dateString+"'", null);

        if(cursor!=null)
            cursor.moveToFirst();

        Log.d("getTrackedValuesByDate()", DatabaseUtils.dumpCursorToString(cursor));
        return cursor;
    }

    public Cursor getAllDates()
    {
        Cursor c = this.db.rawQuery("Select distinct "+KEY_VALUE_DATE+" from "+DB_VALUES_TABLE, null);
        if(c!=null)
            c.moveToFirst();

        Log.d("getAllDates()", DatabaseUtils.dumpCursorToString(c));
        return c;
    } 
```

最后是 LogCat 的输出：

```
09-07 12:05:06.912: D/fillData()(1317): >>>>> Dumping cursor android.database.sqlite.SQLiteCursor@41219990
09-07 12:05:06.912: D/fillData()(1317): 0 {
09-07 12:05:06.912: D/fillData()(1317):    trackDate=07.09.2012
09-07 12:05:06.912: D/fillData()(1317): }
09-07 12:05:06.912: D/fillData()(1317): 1 {
09-07 12:05:06.912: D/fillData()(1317):    trackDate=08.08.2012
09-07 12:05:06.912: D/fillData()(1317): }
09-07 12:05:06.912: D/fillData()(1317): <<<<<
09-07 12:05:06.952: D/fillData()(1317): Creation successful
09-07 12:05:06.952: D/fillData()(1317): Adapter set
09-07 12:05:07.012: E/CursorWindow(1317): Failed to read row 0, column -1 from a CursorWindow which has 2 rows, 1 columns.
09-07 12:05:07.012: D/AndroidRuntime(1317): Shutting down VM
09-07 12:05:07.048: W/dalvikvm(1317): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-07 12:05:07.145: E/AndroidRuntime(1317): FATAL EXCEPTION: main
09-07 12:05:07.145: E/AndroidRuntime(1317): java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.database.CursorWindow.nativeGetLong(Native Method)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.database.CursorWindow.getLong(CursorWindow.java:507)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.database.AbstractWindowedCursor.getLong(AbstractWindowedCursor.java:75)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.CursorTreeAdapter$MyCursorHelper.getId(CursorTreeAdapter.java:436)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.CursorTreeAdapter.getGroupId(CursorTreeAdapter.java:191)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.ExpandableListConnector.getItemId(ExpandableListConnector.java:422)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.AbsListView.obtainView(AbsListView.java:2288)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.ListView.onMeasure(ListView.java:1156)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.view.View.measure(View.java:15172)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.RelativeLayout.measureChild(RelativeLayout.java:602)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:415)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.view.View.measure(View.java:15172)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-07 12:05:07.145: E/AndroidRuntime(1317):     at android.view.View.measure(View.java:15172) 
```

如您所见，我的最后一个 debug.log 是 Adapter 设置为 ListView，但后来它是 finnito ...我什至没有收到覆盖函数 getChildrenCursor(Cursor groupCursor) 被调用过的日志消息，所以错误发生在我不知道在哪里......

救命啊，我要疯了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T10:14:25.493

从 CursorTreeAdapter 的文档中[，](http://developer.android.com/reference/android/widget/CursorTreeAdapter.html)它是 SimpleCursorTreeAdapter 的间接父级，您可以看到：

> 游标必须包含名为“_id”的列，否则此类将不起作用。

您在查询中缺少的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:27:21.447

几点

您可能返回了一个空游标（即不返回 null），因此不要检查 c != null 而是尝试检查游标列数或检查 c.moveToNext 检查

还使用 try{}catch(SQLiteException) 包装所有 rawQuery 和 Cursor 方法

记录这个异常可能会揭示更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:22:21.383

好的，我无法让它与 SimpleTreeAdapter 一起工作......根本找不到错误。我现在所做的是跳过 TreeAdapter 并将游标的内容填充到 Collections 中，然后通过 BaseExpandableListAdapter 填充列表。

它更复杂，不如 SimpleTreeAdapter 优雅，但至少它现在可以工作；-)

# android - Android NumberPicker：从 XML 设置最小值、最大值、默认值

> ID：12317960
> 
> 赞同：60
> 
> 时间：2012-09-07T12:18:52.877
> 
> 标签：android, xml, layout, numberpicker

有没有办法从 XML 布局中设置[NumberPicker的最小值、最大值和默认值？](http://shanetully.com/2011/12/android-3-x-and-4-x-numberpicker-example/)

我是从 Activity 代码中执行此操作的：

```
np = (NumberPicker) findViewById(R.id.np);
np.setMaxValue(120);
np.setMinValue(0);
np.setValue(30); 
```

XML 显然更合适，因为它定义了属性，而不是行为。

有没有办法使用 XML 布局设置这些？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-05T17:19:38.133

我遇到了同样的问题，这就是我解决它的方法（根据 MKJParekh 的评论）：

1.  我创建了自己的 NumberPicker-Class

    ```
    package com.exaple.project;

    import android.annotation.TargetApi;
    import android.content.Context;
    import android.os.Build;
    import android.util.AttributeSet;
    import android.widget.NumberPicker;

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)//For backward-compability
    public class MyNumberPicker extends NumberPicker {

        public MyNumberPicker(Context context) {
            super(context);
        }

        public MyNumberPicker(Context context, AttributeSet attrs) {
            super(context, attrs);
            processAttributeSet(attrs);
        }

        public MyNumberPicker(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            processAttributeSet(attrs);
        }
        private void processAttributeSet(AttributeSet attrs) {
            //This method reads the parameters given in the xml file and sets the properties according to it
            this.setMinValue(attrs.getAttributeIntValue(null, "min", 0));
            this.setMaxValue(attrs.getAttributeIntValue(null, "max", 0));
        }
    } 
    ```

2.  现在您可以在 xml 布局文件中使用此 NumberPicker

    ```
    <com.exaple.project.myNumberPicker
        android:id="@+id/numberPicker1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:orientation="vertical"
        max="100"
        min="1" /> 
    ```

感谢 MKJParekh 的有用评论

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2021-02-04T04:48:11.790

你可以试试这个：

```
<NumberPicker
  android:id="@+id/number_picker"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  app:minValue="@{0}"
  app:maxValue="@{120}"
  app:value="@{30}"/> 
```

这作为 Android 数据绑定的一部分。因此，您可能希望在应用级别 build.gradle 中将其设置为 true。

```
android {
    ...

    dataBinding {
        enabled true
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-12T05:05:34.210

这是遵循[Android Docs](https://developer.android.com/training/custom-views/create-view.html)
的更新版本 （因此支持主题和 Android Studio 设计器预览）

**值/attrs.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <declare-styleable name="NumberPickerWithXml">
        <attr name="maxValue" format="integer" />
        <attr name="minValue" format="integer" />
        <attr name="defaultValue" format="integer" />
    </declare-styleable>

</resources> 
```

**NumberPickerWithXml.kt：**

```
package com.example.library.ui

import android.content.Context
import android.util.AttributeSet
import android.widget.NumberPicker
import com.example.library.ui.R

class NumberPickerWithXml : NumberPicker {

    constructor(context: Context) : super(context)

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {
        processXmlAttributes(attrs)
    }

    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {
        processXmlAttributes(attrs, defStyleAttr)
    }

    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int, defStyleRes: Int) : super(context, attrs, defStyleAttr, defStyleRes) {
        processXmlAttributes(attrs, defStyleAttr, defStyleRes)
    }

    private fun processXmlAttributes(attrs: AttributeSet, defStyleAttr: Int = 0, defStyleRes: Int = 0) {
        val attributes = context.theme.obtainStyledAttributes(attrs, R.styleable.NumberPickerWithXml, defStyleAttr, defStyleRes)

        try {
            this.minValue = attributes.getInt(R.styleable.NumberPickerWithXml_minValue, 0)
            this.maxValue = attributes.getInt(R.styleable.NumberPickerWithXml_maxValue, 0)
            this.value = attributes.getInt(R.styleable.NumberPickerWithXml_defaultValue, 0)
        } finally {
            attributes.recycle()
        }
    }

} 
```

**...或 NumberPickerWithXml.java（未经测试）：**

```
package com.example.library.ui

import android.content.Context;
import android.util.AttributeSet;
import android.widget.NumberPicker;
import com.example.library.ui.R;

public class NumberPickerWithXml extends NumberPicker {

    public NumberPickerWithXml(Context context) {
        super(context);
    }

    public NumberPickerWithXml(Context context, AttributeSet attrs) {
        super(context, attrs);
        processXmlAttributes(attrs, 0, 0);
    }

    public NumberPickerWithXml(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        processXmlAttributes(attrs, defStyleAttr, 0);
    }

    public NumberPickerWithXml(Context context, AttributeSet attrs, int: defStyleAttr, int: defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        processXmlAttributes(attrs, defStyleAttr, defStyleRes);
    }

    private void processXmlAttributes(AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        TypedArray attributes = getContext().getTheme().obtainStyledAttributes(attrs, R.styleable.NumberPickerWithXml, defStyleAttr, defStyleRes);

        try {
            this.setMinValue(attributes.getInt(R.styleable.NumberPickerWithXml_minValue, 0));
            this.setMaxValue(attributes.getInt(R.styleable.NumberPickerWithXml_maxValue, 0));
            this.setValue(attributes.getInt(R.styleable.NumberPickerWithXml_defaultValue, 0));
        } finally {
            attributes.recycle();
        }
    }

} 
```

**布局中的用法：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:custom="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <com.example.library.ui.NumberPickerWithXml
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        custom:defaultValue="30"
        custom:maxValue="120"
        custom:minValue="0" />

</LinearLayout> 
```

# paypal - L_ERRORCODE0:10409 Express Checkout 令牌是为您以外的商家帐户签发的

> ID：12317962
> 
> 赞同：4
> 
> 时间：2012-09-07T12:18:57.000
> 
> 标签：paypal, paypal-sandbox

> L_ERRORCODE0:10409 Express Checkout 令牌是为您以外的商家帐户签发的

这个错误是什么意思？当我集成 paypal express checkout 时
，我不明白我的应用程序中出现此错误的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T03:23:32.593

我假设您在调用 DoExpressCheckoutPayment 时一定已经知道了。？？

我认为您会得到此信息的唯一原因是，如果您对 SetExpressCheckout 使用的 API 凭据与在 DoExpressCheckoutPayment 中使用的不同。

或者，当您调用 SetExpressCheckout 时，您可能使用了一个 SUBJECT 值，而您忘记在 DoExpressCheckoutPayment 请求中包含这个相同的值。

这就是我能想到的会引发该错误的全部内容，因为它确实确实意味着它所说的......令牌用于与您尝试处理付款不同的帐户。

# html - 修复表格上的列并防止它在 IE7 中看起来很糟糕

> ID：12317963
> 
> 赞同：0
> 
> 时间：2012-09-07T12:18:57.240
> 
> 标签：html, css, html-table, internet-explorer-7

我读了另一个问题的答案，[这](https://stackoverflow.com/a/1312678/109880)正是我所需要的。尽管如答案中所述，它在 IE7 中看起来很糟糕。我希望它在 IE7 中看起来不错。在 IE<=7 中不需要固定第一列，但表格（和第一列）应该是可读的。

有谁知道如何在 IE7 中隐藏 CSS 的某些部分，使它看起来像一个普通的表格？如果是这样，您可以随时 fork [http://jsfiddle.net/emn13/YMvk9/](http://jsfiddle.net/emn13/YMvk9/)向我展示 :)

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:18:06.267

您可以编写一个单独的样式表供 IE 使用：

```
<!--[if IE]>
    <link href="/style/ie.css" type="text/css" rel="Stylesheet" />
<![endif]-->

<!--[if !IE]>
    <link href="/style/core.css" type="text/css" rel="Stylesheet" />
<![endif]--> 
```

这将强制 IE 使用您在其中指定的规则，`ie.css`以便您可以在那里给它您想要的规则。这也将从 IE 中隐藏 Google Chrome 和 Firefox 中使用的其他部分。

**仅当浏览器不是**IE时才会使用第二个样式表，因此如果 Chrome 和 Firefox 中的所有内容都正确显示，则可以保持这些规则不变。然后只需将 IE 所需的规则复制到它的样式表中。

最佳实践是编写 CSS 以使其在所有浏览器中显示相同，但​​这不那么令人沮丧！

希望这可以帮助

**参考：** [http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T16:50:10.580

我解决了这些问题并附上了文件[http://jsfiddle.net/fJJvG/2/](http://jsfiddle.net/fJJvG/2/)。一件事，您必须从[http://jquery.com/](http://jquery.com/)下载 jquery 插件并放入您的标题中。然后你会得到结果。`

# iphone - 保存用户默认值时随机坏访问

> ID：12317971
> 
> 赞同：3
> 
> 时间：2012-09-07T12:19:18.470
> 
> 标签：iphone, objective-c, ios, arrays

我只是想将此数组保存为用户默认值，它会随机崩溃。有时它有效，有时它给我 EXC_BAD_ACCESS。我没有正确释放一些东西吗？

```
- (void)setTextValue:(NSString *)valueText indexToSet:(NSUInteger)index
{
    [self.pageData replaceObjectAtIndex:index withObject:valueText];
    [[NSUserDefaults standardUserDefaults] setObject:self.pageData forKey:@"mynotes"];
} 
```

这是我确定的导致错误的方法。这是 Xcode 已经创建的一种方法，我添加了自己的自定义代码。

```
- (nbookDataViewController *)viewControllerAtIndex:(NSUInteger)index storyboard:(UIStoryboard *)storyboard
{   
    nbookDataViewController *dataViewController = [storyboard instantiateViewControllerWithIdentifier:@"nbookDataViewController"];
    if (self.pageData.count > 0 && index < self.pageData.count)
    {
        NSString *val = (NSString *)[self.pageData objectAtIndex:index];
        dataViewController.dataObject = val;
    }
    else
    {
        NSDate *date = [NSDate date];
        NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
        [dateFormat setDateFormat:@"MMMM d, YYYY"];
        NSString *dateString = [dateFormat stringFromDate:date];
        //[dateFormat release];
        [self.pageData addObject:dateString];
        dataViewController.dataObject = (NSString *)[self.pageData objectAtIndex:index];
    }
    dataViewController.myModel = (nbookModelController *)self;
    dataViewController.dIndex = index;
    //[self.mySaveData setObject:self.pageData forKey:@"mynotes"];
    return dataViewController;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:38:02.750

这个技巧将允许您在异常上中断代码并让您直接检查为什么会发生这种情况： [https ://stackoverflow.com/a/616526/46970](https://stackoverflow.com/a/616526/46970)

# erlang - 未收到 Erlang UDP 数据包

> ID：12317981
> 
> 赞同：0
> 
> 时间：2012-09-07T12:19:58.460
> 
> 标签：erlang, udp

我正在尝试让客户端（在 NAT 之后）将数据包发送到专用服务器。

这是我的代码：

```
-module(udp_test).

-export([start_client/3, listen/1, send/4, start_listen/1]).

start_client(Host, Port, Packet) ->
    {ok, Socket} = gen_udp:open(0, [{active, true}, binary]),
    io:format("client opened socket=~p~n",[Socket]),
    spawn(?MODULE, send, [Socket, Host, Port, Packet]).

start_listen(Port) ->
    {ok, Socket} = gen_udp:open(Port, [binary]),
    spawn(?MODULE, listen, [Socket]).

listen(Socket) ->
    inet:setopts(Socket, [{active, once}]),
    receive
    {udp, Socket , Host, Port, Bin} ->
        gen_udp:send(Socket, Host, Port, "Got Message"),
        io:format("server received:~p / ~p~n",[Socket, Bin]),
        listen(Socket)
    end.

send(Socket, Host, Port, Packet) ->
    timer:send_after(1000, tryToSend),
    receive
    tryToSend ->
        io:fwrite("Sending: ~p / to ~p / P: ~p~n", [Packet, Host, Port]),
        Val = gen_udp:send(Socket, Host, Port, Packet),
        io:fwrite("Value: ~p~n", [Val]),
        send(Socket, Host, Port, Packet);
    _ ->
        io:fwrite("???~n")
    end. 
```

在专用服务器上，我启动了监听功能：

```
# erl -pa ebin
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
1> udp_test:listen(4000). 
```

在客户端我启动发送循环：

```
$ erl -pa ebin                                                      
Erlang R15B (erts-5.9) [source] [smp:2:2] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9  (abort with ^G)
1> udp_test:start_client("ip.of.my.server", 4000, "HELLO !!!").
client opened socket=#Port<0.737>
<0.33.0>
Sending: "HELLO !!!" / to "ip.of.my.server" / P: 4000
Value: ok
Sending: "HELLO !!!" / to "ip.of.my.server" / P: 4000
Value: ok
Sending: "HELLO !!!" / to "ip.of.my.server" / P: 4000
Value: ok 
```

虽然**gen_udp:send**从客户端返回**ok**，但服务器似乎没有收到任何这些数据包，因为它应该在控制台上打印“**服务器收到：”HELLO !!!“ ”。**

任何人都会知道为什么这不起作用。

**编辑 1：**

*   专用服务器上没有配置防火墙或 iptable。

*   客户端和服务器之间的连接通过 TCP 工作正常，但不是 UDP。

*   当我尝试在同一设备（不同的 erlang 节点）上同时运行服务器和客户端时，它也不起作用。

**编辑 2 ：** 更改了监听部分的代码，在每次收到消息时循环自己重新创建 Socket ......但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:07:37.840

您的`start_client/3`,`send/4`循环应该按预期工作，尽管它是一种稍微复杂的方式来获得 1 秒的延迟。

您`listen/1`不会按预期执行，最多应返回一条消息：

*   对于每个循环，它都会打开一个新套接字，第一次它使用端口打开套接字，而在接下来的循环中，它使用套接字打开一个新套接字，这应该会产生错误。
*   您将套接字设置为，`{active,once}`因此在将套接字重置为活动一次之前，您最多会在套接字上接收一个数据包。

为什么要在接收端尝试做一些简单的事情，比如：

```
Erlang R15B (erts-5.9) [source] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9  (abort with ^G)
1> {ok,S}=gen_udp:open(5555,[]).
{ok,#Port<0.582>}
2> flush().
Shell got {udp,#Port<0.582>,{127,0,0,1},4444,"hej"}
Shell got {udp,#Port<0.582>,{127,0,0,1},4444,"there"}
ok
3> 
```

作为测试基本连接的第一步？

**编辑：**

在您调用的新版本中，`start_listen/1`它会打开一个 UDP 套接字，**然后**生成一个进程来坐下来监听它。打开端口的进程就是端口*控制进程*。当数据包到达时发送的消息被发送到控制进程，在这种情况下，控制进程不是控制进程。

有两种方法可以解决此问题：

*   产生一个进程，它首先打开端口，然后进入一个循环，从套接字接收 UDP 消息。这就是您引用的示例中的完成方式：`start`生成一个正在运行的进程`server`，该进程打开端口，然后调用`loop`.

*   用于`gen_udp:controlling_process/2`将套接字的控制权传递给循环进程，以便它接收数据包消息。

两者都工作并有自己的位置。您在原始代码中具有相同的结构，但我错过了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:30:14.033

发现问题，我正在启动套接字，然后只产生循环......

要么将 control_process 更改为生成的 pid，要么打开生成的 pid 上的套接字。

希望它可以帮助某人。

# blackberry - 如何在黑莓中停止进度条

> ID：12317982
> 
> 赞同：1
> 
> 时间：2012-09-07T12:19:58.597
> 
> 标签：blackberry, progress-bar, blackberry-simulator, blackberry-jde

在 BlackBerry 中，我的应用程序运行良好。但是一个要求是当我从服务器加载数据时，会显示一个进度条。如果从服务器加载数据需要很长时间，那么我想停止进度条。在黑莓中，按下后退键时，它不起作用。请帮我。

```
public class WaitScreen extends PopupScreen
{
   public WaitScreen(String msg) {

      super(new HorizontalFieldManager());

      add(new LabelField(msg));
      AnimatedGIFField testanimated = new AnimatedGIFField(
         (GIFEncodedImage) (GIFEncodedImage.getEncodedImageResource("ajax_loader.gif")),
         AnimatedGIFField.FIELD_HCENTER | AnimatedGIFField.FIELD_VCENTER);

      add(testanimated);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:21:12.303

```
 public long timeout=0;

                 t.schedule(new TimerTask() {

                    public void run() 
                    {
                        // TODO Auto-generated method stub

                        timeout+=1;
                        System.out.println("Timeout value:"+timeout);
                        if(timeout>=28)
                        {
                            //timeout every 1 munite

                             System.out.println("Timeout value:"+timeout);
                             System.out.println("closing connection");

                                 try
                                 {
                                     parent.notifyDestroyed();

                                 }
                                 catch (Exception ex)
                                 {                   

                                     System.out.println("Exception is:"+ex);
                                 }
                                 this.cancel();
                     }

                    }
                }, 0, 1000);

    //           Thread.sleep(30000);

httpconn_post = (HttpConnection) Connector.open(url);

             httpconn_post.setRequestMethod(HttpConnection.POST);

           httpconn_post.setRequestProperty("Accept_Language","en-US");
           httpconn_post.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

           OutputStream out = httpconn_post.openOutputStream();

           out.write(param.getBytes());
           out.flush();

           System.out.println("Status Line Code: " + httpconn_post.getResponseCode());
           System.out.println("Status Line Message: " + httpconn_post.getResponseMessage());

           if ( httpconn_post.getResponseCode()== HttpConnection.HTTP_OK )
           {
           is=httpconn_post.openDataInputStream();

//           cancelling timer

           t.cancel();
.....
.....
}

 I had done this using this code..I had done it successfully.. 
```

# jquery - .load() 在 iPad 上不起作用

> ID：12317987
> 
> 赞同：1
> 
> 时间：2012-09-07T12:20:30.010
> 
> 标签：jquery, ipad, load, mobile-safari, mjpeg

我有简单的脚本来检查图像，但它在我的 ios 5.1 的 ipad 上无法正常工作。在图像中，我收到 jpg 的流，因此负载必须在每一帧上工作（如在大型 safari 中），但在 ipad 中它只触发一次。可能是一些建议？

```
$('#image').load(function(){
    console.log(new Date().getTime(););
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:26:16.783

jQuery官网上有提到：

> 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用`.load()`快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行功能。应该注意几个已知的警告。这些是：
> 
> *   它不能始终如一地工作，也不能可靠地跨浏览器
> *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> *   它没有正确地冒泡 DOM 树
> *   可以停止对已经存在于浏览器缓存中的图像进行触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T16:51:42.173

正如@Parv-sharma 所说， .load 不可靠。在这里也有同样的经历。

如果这是关于响应式图像调整（只是猜测）之类的东西，那么恕我直言，这是您解决问题的最佳机会：

1.  **当然有一个中央 resizeScript() 。**确保你抓住了 img.height() === 0 的情况，在这种情况下，坚持你的优雅降级，也就是默认，也就是非 js 缩放。（阅读：暂时什么都不做）

2.  **最多触发你的 resizeScript() 三次**

    在 image.load() 上，在 jQuery.ready() 上，最后是延迟的，几毫秒后。

    ```
    setTimeout( App.adjustFullsize ,300); 
    ```

    这要么没有害处（如果之前的调用之一已经完成了这项工作，或者如果事情一直失败），但有一个很好的变化，即图像现在也“正式”加载了......

*（哦，第四次，您可能还想注册到 resize()（即设备转动）事件......）*。

# .htaccess - 使用 .htaccess 保护站点文件夹

> ID：12317990
> 
> 赞同：-1
> 
> 时间：2012-09-07T12:20:43.213
> 
> 标签：.htaccess

我正在为我的新项目使用 cakephp。我想用 .htaccess 保护我的网站。这就是我想要实现的目标。

如果有人试图访问我的网站 url，现在 www.sample.com.User 不应该在没有提供密码或任何其他安全方法的情况下访问。我怎样才能实现这个属性？我要详细说明这个要求吗？然后请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:29:14.913

使用 .htaccess 您可以使用密码保护整个目录：
`AuthType Basic
AuthName "Restricted Files"
AuthBasicProvider file
AuthUserFile /path/to/passwords/file/passwords
Require user myuser`

您可以使用以下命令创建密码文件：

`htpasswd -c /path/to/passwords/file/passwords myuser`

您可以在 Apache 文档中使用很好的示例来完成描述。

原始答案： [.htaccess 密码和强制登录](https://stackoverflow.com/questions/4633710/htaccess-password-and-forced-login)

# java - 在单独的线程中（在启动期间）运行每个 SQL 查询是不好的做法吗？

> ID：12317994
> 
> 赞同：0
> 
> 时间：2012-09-07T12:20:52.797
> 
> 标签：java, mysql, sql, multithreading, thread-safety

我的 Java 应用程序需要在启动时从不同的 MySQL 表中收集信息。没有数据库信息，应用程序将无法使用。因此，**启动最多需要几秒钟**（尽可能使用缓存减少此时间）。

1.  **在单独的线程中执行这些 SQL 查询中的每一个，允许具有多个 CPU 内核的计算机最终更快地启动应用程序（我知道，不能保证），**这会是不好的做法吗？****
***   **在实施这个“系统”之前，我需要知道什么缺点吗？****

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:23:55.883

不，当然不是。例如，当多个用户同时访问您的 Web 应用程序时，像 Tomcat 这样的 Java Web 服务器会一直运行。

只需确保使用事务正确管理数据完整性即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:25:28.097

通过并行化而不是串行执行请求来执行请求可能是一个好主意。

注意使用数据源，每个请求都必须使用自己的数据库连接（切勿同时在不同线程之间共享连接）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T12:28:29.303

确保你的连接池和你的线程池大小适应良好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T12:30:20.587

数据库会话是相对昂贵的对象。并行到几个线程是没有问题的，但是如果你有 1000 个表，就不要创建 1000 个线程。

此外，多线程具有复杂性和潜在的巨大维护成本（例如，竞争条件导致的不可重现的问题）。所以，做你的测量，如果你发现速度只有几个百分点，就把所有的东西放回去。

有更多方法可以避免您看到的延迟。例如，您可以在单个命令批处理中发送多个查询，从而减少代码和数据库之间的往返次数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T13:52:50.820

这是你必须尝试的事情。

如果您从每个表中带回相对较少的行，那么在每个线程（或 jdbc 连接池）中建立数据库连接可能比建立一次并执行查询需要更长的时间。

幸运的是，它的代码并不多，因此您应该能够很快尝试一下。**

# c++ - C++ 中的流式字符串文字

> ID：12317995
> 
> 赞同：3
> 
> 时间：2012-09-07T12:21:01.117
> 
> 标签：c++, stl, literals

假设我有一些用于文件和流的内部框架。我有`IOutputStream`接口类`write(char const *buffer, size_t size)`和`flush()`。我有一个名为的工具，`Printer`可以与任何`IOutputStream`后代实例一起使用。然后我有`Printer & operator<<(T x)`样式方法，`T x`要写入的数据（或引用或指向它的指针）在哪里。

例如`Printer & operator<<(int x)`将转换`x`为字符串，并`write(...)`真正调用引用的输出流的函数。

让我们看看问题！调用：`printer << "appletree";`。它调用`Printer & operator<<(char const *s)`. 对于这种用法，我必须调用 an`strlen(s)`来确定大小，然后我可以调用最后一步。这是相当疯狂的，因为我知道编译时的长度`appletree`。

有什么好的做法吗？STL 是如何`ostream`使用titerals 的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T12:25:30.293

由于字符串文字具有 type `const char(&)[]`，您可以为它们添加重载：

```
template<size_t n>
Printer& operator<<(const char (&cstring)[n]) {
    write(cstring, n - 1);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T12:25:28.780

怎么样

```
template<std::size_t Size>
Printer& operator << (const char (&s)[Size]); 
```