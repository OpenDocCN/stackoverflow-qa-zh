# StackOverflow 问答 12249000-12249999

# angularjs - 无法接收 Angular js 事件

> ID：12249002
> 
> 赞同：0
> 
> 时间：2012-09-03T13:38:25.700
> 
> 标签：angularjs

请看看这个简单的小提琴：http: [//jsfiddle.net/tgbpy/11/](http://jsfiddle.net/tgbpy/11/)

我无法发出事件。我需要在不创建共享服务的情况下做这个简单的事情。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:53:08.720

控制器 1 和控制器 2 没有嵌套。它们是对等的，属于 rootScope。

```
<div ng-controller="controller1">...</div>
<div ng-controller="controller2">...</div> 
```

因此，当您从控制器 1 发出事件时，它不会到达控制器 2，而只会到达父级（在这种情况下，它将到达 rootScope）。

如果在控制器 2 中声明了控制器 1，那么您的代码应该可以工作。

```
<div ng-controller="controller2">  
  ..
  <div ng-controller="controller1">...</div>
  .. 
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:29:07.670

添加到@manoj 告诉你的内容

这是一个有效的小提琴

[http://jsfiddle.net/tgbpy/13/](http://jsfiddle.net/tgbpy/13/)

当您想要发布消息时，您调用 $rootScope.$broadcast ，除非两个控制器是嵌套的。如果你做 $rootScope.$broadcast 任何范围，无论它在哪里都会得到它。

# c# - 在 C# 中使用 C++ 组件对象模型

> ID：12249007
> 
> 赞同：5
> 
> 时间：2012-09-03T13:38:47.353
> 
> 标签：c#, c++, com

我正在尝试在 C++ 中构建一个 COM 库，使用 C# 项目进行测试。有些方法需要将字符串返回给调用者。从 C# 调用这些方法时，我得到以下信息：“在位置读取访问冲突......”

这是我的测试项目中的 C++ 代码（除了 VS 2010 ATL 生成的所有东西）

```
//COMTest.idl
[id(1)] HRESULT Test([out,retval] BSTR* ret);

//Program2.h
STDMETHOD(Test)(BSTR* ret);

//Program2.cpp
STDMETHODIMP CProgram2::Test(BSTR* ret)
{
   BSTR tmp = (BSTR)CoTaskMemAlloc(sizeof(wchar_t) * 2);
   tmp[0] = L'H';
   tmp[1] = L'\0';

   *ret = (BSTR)tmp;
   return S_OK;
} 
```

在 C# 中，我只是从 COM-Tab 中引用了 DLL，关闭了“嵌入互操作类型”，因为它导致了错误，然后运行了这个：

```
static void Main(string[] args)
{
   COMTestLib.Program2Class instance = new COMTestLib.Program2Class();
   string tmp = instance.Test(); //Where the error occurs

   Console.WriteLine(tmp); //This is not reached

   Console.Read();
} 
```

离开测试方法后发生错误。我从我的 C# 项目中调试了 C++ 代码，并将值放置在正确的位置。如果我尝试返回 0（在 C# 中给出 null），我不会收到错误消息，即使我仍然像示例中那样分配内存。

我无法理解访问冲突所抱怨的地址。它既不是我分配的地址，也不是该方法中使用的任何其他地址。在我看来也很奇怪的是 CoTaskMemAlloc-Function 总是返回第一个字节设置为零 (0x00XXXXXX) 的地址，但这可能只是 COM 的事情。

我没有想法，在任何地方都找不到关于此的太多信息（基本的 COM 教程除外）。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T19:54:30.923

BSTR 需要额外的内存（以跟踪字符串 len），因此必须使用[SysAllocString](http://msdn.microsoft.com/en-us/library/xda6xzx7%28v=vs.71%29.aspx) () 函数来分配 BSTR（或使用“*智能*”BSTR 类之一）。

因此，您的原始代码应如下所示：

```
//Program2.cpp
STDMETHODIMP CProgram2::Test(BSTR* ret)
{
   *ret = SysAllocString(L"H");
   return S_OK;
} 
```

关于 BSTR 的好读物：http: [//blogs.msdn.com/b/ericlippert/archive/2003/09/12/52976.aspx](http://blogs.msdn.com/b/ericlippert/archive/2003/09/12/52976.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:09:20.537

检查您的 COM 项目和测试项目是否都是 STA。还要检查位数。如果将 BSTR 替换为 LPSTR 会怎样？

# php - 更严格的会话控制方法

> ID：12249009
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:38:52.037
> 
> 标签：php, session

简而言之：这是一个关于提高会话安全性以防止会话固定/劫持的问题

我有一个用户注册表格、登录和文章发布表格。现在，当用户注册、登录或发布内容时，所有三个页面的感谢页面总是不同的。更具体地说'thankyou.php'

问题是用户可以通过输入 url 'site.com/thanks.php' 访问静态感谢页面

我不希望这种情况发生，我希望这些页面仅在特定任务被仲裁时显示。

所以，我考虑过制作 sql 查询来查看用户是否在最后 5 秒内有帖子并显示感谢页面，或者显示 404，但是，似乎没有必要只为一个查询创建查询。而且，由于我认为 PHP 是灵活的，如果你们给我一个想法，我可能会在途中学到一些新的东西，关于如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:45:22.367

您可以通过像这样解决会话来实现这一点：

```
if($_SESSION['registration']=="registration")
{
echo "Thank you for registering";

 unset($_SESSION['registration']); 

}
elsif($_SESSION['login']=="login")
{
echo "Thank you for login";
unset($_SESSION['login']); 

}
elseif($_SESSION['post']=="post")
{
echo "Thank you for Post";
unset($_SESSION['post']); 
}
else
{
echo "session is not set,something is wrong";
} 
```

所以在 html 页面上的 session 中设置值。

```
$_SESSION['login']="login"; 
```

//也喜欢别人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:46:12.810

您可以使用 $_SERVER['HTTP_REFERER'] 限制页面（[在此处输入链接描述](http://php.net/manual/en/reserved.variables.server.php)）从他们来到thankyou.php 页面查看。

# javascript - 在 Firefox 14-15 for tinymce 中插入/编辑图像无法正常工作

> ID：12249016
> 
> 赞同：0
> 
> 时间：2012-09-03T13:39:10.380
> 
> 标签：javascript, jquery, asp.net, tinymce

我有 Firefox 15 和 Windows 7。我右键单击图像，然后选择插入/编辑图像。第一次加载正常，然后单击取消。

再次按照上述操作，窗口将冻结 - 这发生在托管站点/服务器上，在本地服务器中我得到一个`500 - Internal server error.`

除了 Firefox，每个浏览器都运行良好，谁能告诉我为什么会这样？

我有最新版本（3.5.6）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:01:38.063

我在页面中添加了带有参数/查询字符串的tinymce，所以我认为它没有正确连接到系统中。我已经删除了那个参数/查询字符串，它的工作很完美。

# jquery-ui - Jquery Autocomplete - 空源

> ID：12249020
> 
> 赞同：0
> 
> 时间：2012-09-03T13:39:32.293
> 
> 标签：jquery-ui, autocomplete

我正在使用 JQuery 自动完成功能。来源来自网址。我想知道我是否可以知道源为空，我的意思是当从 url 返回的源为空时，我想打印警报消息。

我的代码是

```
$(function() {
$( "#tags" ).autocomplete({
    source: remoteurl
    select:  function (event, ui) {
        alert(ui.item.value);
        return true;
    }
});
}); 
```

谢谢，

约翰。

# objective-c - NSArray isEqual 方法的清晰描述？

> ID：12249024
> 
> 赞同：3
> 
> 时间：2012-09-03T13:39:38.797
> 
> 标签：objective-c, cocoa

我不清楚 NSArray 的 isEqual 方法如何比较两个数组的元素。它是否检查两个数组是否包含相同的对象（例如==）？还是在对象上使用 isEqual 比较两个数组的内容？

我发现 Apple 的这种方法的文档简洁明了。我也找不到 NSArray.m 的来源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T22:07:41.743

现代 Cocoa 文档中没有答案，但是如果您[一直回到 WebObjects 3.5 的 NSArray 文档](http://developer.apple.com/legacy/mac/library/#documentation/LegacyTechnologies/WebObjects/WebObjects_3.5/Reference/Frameworks/ObjC/Foundation/Classes/NSArrayClassCluster/Description.html#//apple_ref/occ/instm/NSArray/isEqual:)，您会发现这个宝石：

> - (BOOL) `isEqual:`(id)一个对象
> 
> 如果接收者和对象相等，则返回 YES；否则返回 NO。YES 返回值表示接收者和 anObject 都是从 NSArray 继承的类的实例，并且它们都包含相同的对象（由`isEqualToArray:`方法确定）。

在遗留文档之外，最接近答案的是在 Coding Guidelines for Cocoa 中[对对象比较的讨论](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/FrameworkImpl.html#//apple_ref/doc/uid/20001286-1007347)，这似乎暗示`isEqual:`并且`isEqualToWhatever:`应该做同样的事情，唯一的区别是类型安全的级别。

尽管如此，我还是建议[提交一个错误](https://bugreport.apple.com/)以要求澄清文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T13:43:21.163

[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/isEqualToArray%3a)很清楚：

> 如果两个数组都包含相同数量的对象并且每个数组中给定索引处的对象满足 isEqual: 测试，则它们具有相同的内容。

这意味着`isEqual`（而不是`==`）将用于测试对象是否相等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T13:42:40.377

Cocoa 中的所有对象都`-isEqual:`默认进行比较。然而，默认版本的`-isEqual:`on`NSObject`会进行指针比较。因此，如果对象没有正确实现其`-isEqual:`和`-hash`方法，它将简单地比较指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T08:00:10.170

也许它有点像这样！？（此处输入，可能有错别字）

```
if(![array1 isKindOfClass:[NSArray class]] || ![array2 isKindOfClass:[NSArray class]])
 return NO;

if(array1 == array2)
 return YES;

if(array1.count != array2.count)
 return NO;

for(int i =0; i<array1.count;i++)
 if(![array1[i] isEqual:array[i]])
  return NO;

return YES; 
```

# magento - 如何通过magento中的“运输方式”获得承运人

> ID：12249027
> 
> 赞同：1
> 
> 时间：2012-09-03T13:39:47.737
> 
> 标签：magento

典型的 magento 订单有 shipping_method。例如，就我而言，它是“flatrate_flatrate”。

如何将承运人（“flatrate”）与 shipping_method 绑定？

感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:31:52.530

```
public function getShippingMethodsList($quoteId, $store=null)
{
    $quote = $this->_getQuote($quoteId, $store);

    $quoteShippingAddress = $quote->getShippingAddress();
    if (is_null($quoteShippingAddress->getId())) {
        $this->_fault("shipping_address_is_not_set");
    }

    try {
        $quoteShippingAddress->collectShippingRates()->save();
        $groupedRates = $quoteShippingAddress->getGroupedAllShippingRates();

        $ratesResult = array();
        foreach ($groupedRates as $carrierCode => $rates ) {
            $carrierName = $carrierCode;
            if (!is_null(Mage::getStoreConfig('carriers/'.$carrierCode.'/title'))) {
                $carrierName = Mage::getStoreConfig('carriers/'.$carrierCode.'/title');
            }

            foreach ($rates as $rate) {
                $rateItem = $this->_getAttributes($rate, "quote_shipping_rate");
                $rateItem['carrierName'] = $carrierName;
                $ratesResult[] = $rateItem;
                unset($rateItem);
            }
        }
    } catch (Mage_Core_Exception $e) {
        $this->_fault('shipping_methods_list_could_not_be_retrived', $e->getMessage());
    }

    return $ratesResult;
} 
```

# autohotkey - 如何使用 AutoHotkey 找到“另存为”窗口？

> ID：12249028
> 
> 赞同：3
> 
> 时间：2012-09-03T13:39:54.750
> 
> 标签：autohotkey

我试图找出是否有一个“另存为”框打开这个`WinExist`脚本

```
if WinExist,Save As,Save As
MsgBox, is there
else
MsgBox, is not there 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T01:41:53.190

您的原始代码几乎是正确的：

*   `if`和之间的空格`WinExist`必须去掉。
*   的第二个参数`ifWinExist`是`WinTitle`。如果“另存为”对话框不包含文本“另存为”，则必须删除第二个参数。在我的具有英语（澳大利亚）区域设置的 Windows 7 系统上就是这种情况。

工作示例：

```
; ifWinExist command
ifWinExist, Save As
    MsgBox, is there
else
    MsgBox, is not there

; if(expression) and WinExist() function
if WinExist("Save As")
    MsgBox, is there
else
    MsgBox, is not there 
```

您还可以组合条件：

```
ifWinExist, Save As ahk_class #32770 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:09:18.030

假设它是一个操作系统的窗口，我会做类似的事情，

```
^F1::       ;press Control + F1 to serch the window.
    if FindWindow()
        msgbox Found
    else
        msgbox Not Found
Return

FindWindow(strPartOfTitle="Save", strClass="#32770") {

    if (hWnd := WinExist("ahk_class " . strClass)) 
    {
        WinGetTitle, strWinTitle, ahk_id %hWnd%
        if InStr(strWinTitle, strPartOfTitle) 
            return true
        else
            return false
    } 
} 
```

# objective-c - 如何强制重新获取 NSManagedObject 的关系集

> ID：12249029
> 
> 赞同：0
> 
> 时间：2012-09-03T13:39:54.220
> 
> 标签：objective-c, ios, macos, core-data

如何从持久存储中强制重新获取 nsmanagedobject 的关系？

关系是一个nsset。它的内容可能已被其他上下文更改。更改可能包括集合中的新元素、集合中现有元素的删除和更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:53:02.390

如果您有不同的 NSManagedObjectContexts，则需要监听“保存”。

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(updateStuff:)
                                                 name:NSManagedObjectContextDidSaveNotification
                                               object:nil]; 
```

完成后，您可以“刷新”您的数据。

```
- (void)updateStuff:(NSNotification *)notification
{
    NSArray *array = [myEntity.theRelationship allObjects];
} 
```

# php - 注册：全文搜索

> ID：12249030
> 
> 赞同：0
> 
> 时间：2012-09-03T13:40:03.413
> 
> 标签：php, mysql

我们正在使用 FULLTEXT 搜索我们的项目之一，但加载时间太长。我们只有 50 万个数据。

```
SELECT category_id, subcat_id, MATCH(product_name, product_desc) AGAINST ('cd player' IN BOOLEAN MODE) as score 
FROM `products_details1` WHERE MATCH(product_name, product_desc) AGAINST ('cd player' IN BOOLEAN MODE)
ORDER BY score DESC 
```

在 mysql_query :::0.0026848316192627 之前

> $result = mysql_query($query, $db_connection1);

在 mysql_query :::21.530656814575 之后

如果我们从 phpMyadmin 运行相同的查询，则需要 0.8430 秒...

有什么解决办法吗？

# python - 执行 bash python 后运行解释器

> ID：12249033
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:40:12.860
> 
> 标签：python, bash, interpreter

显然，让解释器进行调试会有所帮助，但我更喜欢在终端中执行命令。有没有办法让它运行python程序，然后启动一个解释器，里面已经创建了变量和函数。我当前的命令是这样的：

```
python main.py < tests/1.in 
```

有谁知道如何修改它以使变量和函数在运行后可访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:46:01.540

使用`-i`标志：

```
python -i main.py < tests/1.in 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:47:43.380

怎么样[`-i`](http://docs.python.org/using/cmdline.html#cmdoption-i)：

```
-i : 运行脚本后交互检查；甚至强制提示
         如果 stdin 似乎不是终端；还有 PYTHONINSPECT=x

```

# javascript - 如何在 JavaScript 中拆分值

> ID：12249035
> 
> 赞同：0
> 
> 时间：2012-09-03T13:40:21.857
> 
> 标签：javascript

我必须使用 JavaScript 拆分值，并希望`/`从字符串中找到最后出现的斜杠并替换最后一个斜杠之后的内容`/`例如：

```
var word = "www.abc/def/ghf/ijk/**default.aspx**"; 
```

应该成为

```
var word ="www.abc/def/ghf/ijk/**replacement**"; 
```

斜线的数量可能每次都不同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T13:41:50.723

尝试使用正则表达式：

```
"www.abc/def/ghf/ijk/default.aspx".replace(/\/[^\/]+$/, "/replacement"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T13:43:36.923

没有正则表达式的替代方法（我只记得`lastIndexOf()`方法）

```
var word = "www.abc/def/ghf/ijk/default.aspx";
word = word.substring(0, word.lastIndexOf("/")) + "/replacement"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T13:44:05.017

您可以在“/”上拆分数组，然后从数组中弹出最后一个元素，然后重新加入。

```
word = word.split('/');
word.pop();
word = word.join('/') + replacement; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T13:44:12.863

使用`join()`和`split()`函数的组合怎么样？

```
var word = "www.abc/def/ghf/ijk/default.aspx";

// split the word using a `/` as a delimiter
wordParts = word.split('/'); 

// replace the last element of the array
wordParts[wordParts.length-1] = 'replacement';

// join the array back to a string.
var finalWord = wordParts.join('/'); 
```

斜杠的数量在这里并不重要，因为所做的只是在分隔符的每个实例处拆分字符串（在本例中为斜杠）。

### [这是一个工作演示](http://jsfiddle.net/kZ7eq/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T13:44:15.860

KISS原则怎么样？

```
var word = "www.abc/def/ghf/ijk/default.aspx";
word = word.substring(0, word.lastIndexOf("/")) + "/replacement"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T13:49:36.393

使用正则表达式或数组，例如：

```
[].splice.call(word = word.split('/'), -1, 1, 'replacement');
word = word.join('/'); 
```

# iphone - 如何在 iPhone 4 中设置应用程序后台运行时间？

> ID：12249039
> 
> 赞同：0
> 
> 时间：2012-09-03T13:40:45.903
> 
> 标签：iphone, objective-c, ios4

我正在开发一个导航应用程序，它需要在后台运行。我想知道如何设置应用程序的后台运行时间？这个时间是由 iOS 修复的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:04:25.940

在这里你有 UIBackgroundModes

[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

向下滚动，您将看到您可以在 info.plist 中启用位置

祝一切顺利

# windows - 构建项目时的权限问题

> ID：12249040
> 
> 赞同：13
> 
> 时间：2012-09-03T13:40:47.537
> 
> 标签：windows, visual-studio-2010

我正在尝试在机器上构建一个项目，但我得到以下信息：

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(744,5): warning MSB3075: The command "regsvr32 /s "C:\builds\working\\Win32\Debug\projx86.dll"" exited with code 5\. Please verify that you have sufficient rights to run this command.
The previous error was converted to a warning because the task was called with ContinueOnError=true.
Build continuing because "ContinueOnError" on the task "Exec" is set to "true".
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(756,5): error MSB8011: Failed to register output. Please try enabling Per-user Redirection or register the component from a command prompt with elevated permissions. 
```

我使用的用户帐户是机器上的管理员，所以不应该拥有最高权限吗？

我可以去启动并右键单击并以管理员身份运行，这可能会对它进行排序，但我试图自动构建和运行这个项目，所以我不能使用那个方法。

任何人都知道我可以如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-17T05:06:11.310

解决方案资源管理器 ->[YourProject]->Properties->Linker ->General->Per-user Redirection "TRUE"

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-29T13:54:13.417

我在处理 C++ ATL 项目时发现了同样的问题。

就我而言，当我添加一个新的 ATL 类时，我在资源文件 (.rc) 中缺少一行，它添加了新类资源文件 (.rgs) 的资源类型“注册表”。这会产生与上述相同的权限问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-21T08:52:24.327

@LittleFairy 的答案可能是最好的。但是您可以以管理员身份运行 Visual Studio。

注意：您需要以管理员身份显式启动 Visual Studio。仅具有管理员权限的用户帐户是不够的。

# sql-server-2008 - 使用“非静态”搜索词进行全文搜索（来自连接表变量）

> ID：12249043
> 
> 赞同：0
> 
> 时间：2012-09-03T13:41:01.953
> 
> 标签：sql-server-2008, tsql, full-text-search, table-valued-parameters

希望（并且实际上认为:)）有人已经遇到了类似的问题并解决了它..

短期内的基本问题..由于使用“wordsearch”功能和相关数据将在不久的将来迅速增长，我们（在这种情况下是指我）需要改为使用全文搜索..

所以它现在所有设置..但我无法使查询语法工作（下面的简化版本）

```
declare @searchTerm varchar(256)
set @searchTerm = 'test'

declare @searchValues table (code varchar(900), searchterm varchar(256))
-- this is just for testing, usually the table is prefilled with different codes and values
if(@searchTerm is not null) 
insert into @searchValues
    select code, @searchTerm from dbo.base_question where question_type_id = 'text'

select distinct(a.item_id) 
from dbo.answer_text as a with (nolock)
join dbo.base_question as bqt with (nolock) on bqt.id = a.base_question_id
join @searchValues as st on bqt.code = st.code
where a.value is not null
and not LTRIM(RTRIM(a.value)) = ''
and CONTAINS(a.value, st.searchterm) 
```

where 子句是一个更大的子句的一部分.. 只是猜测我会认为“包含”子句需要一种“静态”搜索词输入，并且不能处理与行相关的值..

在 msdn 和这里都找不到任何东西..

主要问题之一是'base_questions'不是固定的并且可能会改变，并且搜索条件（哪个问题要搜索什么术语）是完全动态的..所以没有switch-case或类似的东西..我认为动态 sql 也不是一个真正的选择（出于不同的原因，但这将远远超出这个问题的范围 :) ..）

但是，对该数据库的所有搜索都是通过带有标量和表值参数（如 @searchValues ）的存储过程完成的。如果可能的话，我想保持这种状态

所以**任何提示，提示和建议**都值得赞赏

和简化数据库结构的仅供参考和完整性的简短版本：

**答案**( **id** bigint (PK), **item_id** uniqueidentifier (FK), **base_question_id** uniqueidentifier (FK), **value** nvarchar(max))

**base_question** ( **id** uniqueidentifier (PK), **code** varchar(900), **question_type_id** (FK), *.. descriptive content ..* )

**item** ( **id** uniqueidentifier (PK), *.. 描述性内容 ..* )

.. 甚至可以更改数据库结构以使搜索具有一定的性能并再次工作；）..（现在我们有大约 120k item_ids 和大约 2.5 个 mio 答案，但这很容易增加 10 倍甚至更多）

# javascript - Keith-Wood datepicker onclick（在第一次点击时不起作用）

> ID：12249048
> 
> 赞同：2
> 
> 时间：2012-09-03T13:41:31.747
> 
> 标签：javascript, jquery, onclick, datepicker

在 GWT 应用程序中，我正在尝试使用此组件：

[http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)

在他们的页面中，他们解释说我们需要使用以下 jquery 函数来使用它：

```
$(function() {
$('#popupDatepicker').datepick();
});

<input type="text" id="popupDatepicker"> 
```

由于要求应用程序，我不能像描述的那样使用它，所以我像这样使用 onClick 事件：

```
<input type="text" id="popupDatepicker" 
       onClick="$('#popupDatepicker').datepick();"> 
```

通过这种方式，组件被加载但仅在第二次点击时（我的第一次点击没有做任何事情）

有人遇到过这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:38:04.063

您应该能够使用任何选择器字符串来初始化页面上的日期选择器元素。因此，你可以给你的`<input>`元素一个类：

```
 <input class='datepick' name='whatever'> 
```

然后使用以下命令初始化所有这些：

```
 $(function() {
   $('.datepick').datepick();
 }); 
```

# mysql - MYSQL 优化 'IN' 和 'ORDER BY'

> ID：12249049
> 
> 赞同：-4
> 
> 时间：2012-09-03T13:41:40.773
> 
> 标签：mysql, database

```
EXPLAIN 
    SELECT * FROM test_askcomment WHERE cid IN(1,2,3) ORDER BY dateline DESC;

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  test_askcomment ALL PRIMARY NULL    NULL    NULL    3   Using where; Using filesort 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:45:52.557

```
ALTER TABLE `test_askcomment ` ADD INDEX `index1` (`cid`);

ALTER TABLE `test_askcomment ` ADD INDEX `index2` (`dateline `); 
```

尝试索引您正在使用 where 子句的列或选择列

# c# - 列表的独特组合

> ID：12249051
> 
> 赞同：10
> 
> 时间：2012-09-03T13:41:42.793
> 
> 标签：c#, algorithm

对此绝对头脑一片空白。这是那些日子之一。但我一直在寻找一种解决方案来获得一定长度的项目列表的独特组合。例如，给定一个列表 [a, b, c] 和长度为 2，它将返回 [a,b] [a,c] [b,c] 但不返回 [b,a] [c,a] [c ,b]

为此，我发现了许多代码，但似乎没有一个适合。以下代码似乎最合适，我一直在尝试根据需要对其进行更改：

```
// Returns an enumeration of enumerators, one for each permutation
// of the input.
public static IEnumerable<IEnumerable<T>> Permute<T>(IEnumerable<T> list, int count)
{
    if (count == 0)
    {
        yield return new T[0];
    }
    else
    {
        int startingElementIndex = 0;
        foreach (T startingElement in list)
        {
            IEnumerable<T> remainingItems = AllExcept(list, startingElementIndex);

            foreach (IEnumerable<T> permutationOfRemainder in Permute(remainingItems, count - 1))
            {
                yield return Concat<T>(
                    new T[] { startingElement },
                    permutationOfRemainder);
            }
            startingElementIndex += 1;
        }
    }
}

// Enumerates over contents of both lists.
public static IEnumerable<T> Concat<T>(IEnumerable<T> a, IEnumerable<T> b)
{
    foreach (T item in a) { yield return item; }
    foreach (T item in b) { yield return item; }
}

// Enumerates over all items in the input, skipping over the item
// with the specified offset.
public static IEnumerable<T> AllExcept<T>(IEnumerable<T> input, int indexToSkip)
{
    int index = 0;
    foreach (T item in input)
    {
        if (index != indexToSkip) yield return item;
        index += 1;
    }
} 
```

这完成了它应该做的事情，但它返回所有排列，不管它们是唯一的。我试图弄清楚这段代码的哪一部分（如果有的话）要更改以获得唯一值。或者是实现此功能的更好方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T13:53:16.690

尝试这个：

```
void Main()
{
    var list = new List<string> { "a", "b", "c", "d", "e" };
    var result = GetPermutations(list, 3);
}

IEnumerable<IEnumerable<T>> GetPermutations<T>(IEnumerable<T> items, int count)
{
    int i = 0;
    foreach(var item in items)
    {
        if(count == 1)
            yield return new T[] { item };
        else
        {
            foreach(var result in GetPermutations(items.Skip(i + 1), count - 1))
                yield return new T[] { item }.Concat(result);
        }

        ++i;
    }
} 
```

如果计数为 2，它会返回：

```
a, b
a, c
a, d
a, e
b, c
b, d
b, e
c, d
c, e
d, e 
```

如果计数为 3，它会返回：

```
a, b, c
a, b, d
a, b, e
a, c, d
a, c, e
a, d, e
b, c, d
b, c, e
b, d, e 
c, d, e 
```

这是你所期望的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T13:50:21.130

实现中的剩余项目列表包含除当前起始项目之外的所有项目。

获取起始项目之后的项目：

```
IEnumerable<T> remainingItems = list.Skip(startingElementIndex + 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:45:36.547

而不是 AllExcept，您应该使用仅提供您正在考虑的项目之后的项目的子序列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T13:53:47.880

在 set-speak 中，您正在寻找的是基于长度 n 的幂集的子集。如果您在 Google 上搜索“C#”+“Power set”，那么您应该可以开始大量使用。

[http://en.wikipedia.org/wiki/Power_set](http://en.wikipedia.org/wiki/Power_set)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T14:06:18.963

并且只是为了完整性..如果您已经拥有所有排列（:)并且因为它只是对我的复制和粘贴）使用下面的扩展方法，您可以获得如下不同的结果：

```
var result = permutations.Distinct((p1, p2) => !p1.Differs(p2)); 
```

只是一个例子，如果您经常使用比较列表，其他方法也可能在其他地方派上用场

```
public static class Extensionmethods
{
    /// <summary>
    /// Checks if both IEnumerables contain the same values regardless of their sequence
    /// </summary>
    /// <typeparam name="T">Type of Elements</typeparam>
    /// <param name="result">IEnumerable to compare to</param>
    /// <param name="compare">IEnumerable to compare to</param>
    /// <returns>Returns false if both IEnumerables contain the same values</returns>
    public static bool Differs<T>(this IEnumerable<T> result, IEnumerable<T> compare)
    {
        if (result == null && compare == null)
            return false;
        if (result != null && compare == null)
            return true;
        if (result == null && compare != null)
            return true;
        return result.Count() != compare.Count()
            || compare.Where(c => c == null).Count() != result.Where(r => r == null).Count()
            || compare.Where(c => c != null).Distinct().Any(item => result.Where(r => item.Equals(r)).Count() != compare.Where(r => item.Equals(r)).Count());
    }
    /// <summary>
    /// Checks if both IEnumerables contain the same values (corresponding to <paramref name="comparer"/> regardless of their sequence
    /// </summary>
    /// <typeparam name="T">Type of Elements</typeparam>
    /// <param name="result">IEnumerable to compare to</param>
    /// <param name="compare">IEnumerable to compare to</param>
    /// <param name="comparer">IEqualityComparer to use</param>
    /// <returns>Returns false if both IEnumerables contain the same values</returns>
    public static bool Differs<T>(this IEnumerable<T> result, IEnumerable<T> compare, IEqualityComparer<T> comparer)
    {
        if (result == null && compare == null)
            return false;
        if (result != null && compare == null)
            return true;
        if (result == null && compare != null)
            return true;
        return result.Count() != compare.Count()
            || compare.Where(c => c == null).Count() != result.Where(r => r == null).Count()
            || compare.Where(c => c != null).Distinct().Any(item => result.Where(r => comparer.Equals(item, r)).Count() != compare.Where(r => comparer.Equals(item, r)).Count());
    }

    public static IEnumerable<T> Distinct<T>(this IEnumerable<T> source, Func<T, T, bool> compareFunction, Func<T, int> hashFunction = null)
    {
        var ecomparer = new DynamicEqualityComparer<T>(compareFunction, hashFunction);
        return source.Distinct(ecomparer);
    }

}

internal class DynamicEqualityComparer<T> : IEqualityComparer<T>
{

    public DynamicEqualityComparer(Func<T, T, bool> equalFunction, Func<T, int> hashFunction = null)
    {
        this.equalFunc = equalFunction;
        this.hashFunc = hashFunction;
    }

    private Func<T, T, bool> equalFunc;
    public bool Equals(T x, T y)
    {
        if (x == null && y == null) return true;
        if (x == null) return false;
        if (y == null) return false;
        if (hashFunc != null)
        {
            if (hashFunc.Invoke(x) != hashFunc.Invoke(y)) return false;
        }
        return this.equalFunc.Invoke(x, y);
    }

    private Func<T, int> hashFunc;
    public int GetHashCode(T obj)
    {
        if (hashFunc != null) return hashFunc.Invoke(obj);
        return 0;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-29T06:46:59.890

我已经尝试了上面的所有方法，但失败了，因为如果输入较大，它们会吃掉很多 Ram 并且崩溃。但我有一个非常非常简单的解决方案：

```
class Program
{
    static List<string> textArr = new List<string>() { "1", "2", "3", "4" };
    static void Main(string[] args)
    {
        getCombination();
    }

   static void getCombination() {
        var maxCombination = 1;
        List<string> Combinations = new List<string>();
        for (var i = 1; i <= textArr.Count(); i++)
        {
            maxCombination = maxCombination * i;
        }

        while (Combinations.Count<maxCombination)
        {
            var temp = string.Join(" ", textArr.OrderBy(x => Guid.NewGuid()).ToList());

            if (Combinations.Contains(temp))
            {
                continue;
            }
            else {
                Combinations.Add(temp);
            }

        }

        Combinations.ForEach(x => {
            Console.WriteLine(x+" ");
        });

    }
} 
```

# sql - 从存储过程执行 SQL Server 代理作业并返回作业结果

> ID：12249056
> 
> 赞同：25
> 
> 时间：2012-09-03T13:42:10.173
> 
> 标签：sql, sql-server, sql-server-2008, tsql, jobs

需要有一个存储过程调用 SQL Server 代理作业并返回作业是否成功运行。

到目前为止我有

```
CREATE PROCEDURE MonthlyData
AS
EXEC msdb.dbo.sp_start_job N'MonthlyData'

WAITFOR DELAY '000:04:00'

EXEC msdb.dbo.sp_help_jobhistory @job_name = 'MonthlyData'
GO 
```

哪个开始工作，如果工作成功与否，最好的返回方式是什么？

好的，进行了编辑并使用了 WAITFOR DELAY，因为该作业通常在 3-4 分钟之间运行，从不超过 4 分钟。这项作业有没有更有效的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-23T15:56:09.960

对于所有**不允许**使用**OPENROWSET**命令的人，这可能会有所帮助。我在这里找到了我的解决方案的开始：

[http://social.msdn.microsoft.com/Forums/en-US/89659729-fea8-4df0-8057-79e0a437b658/dynamically-checking-job-status-with-tsql](http://social.msdn.microsoft.com/Forums/en-US/89659729-fea8-4df0-8057-79e0a437b658/dynamically-checking-job-status-with-tsql)

这取决于这样一个事实，即**msdb.dbo.sysjobactivity**表的某些列在作业以一种或另一种方式完成后首先被填充。

```
-- Start job
DECLARE @job_name NVARCHAR(MAX) = 'JobName'
EXEC msdb.dbo.sp_start_job @job_name = @job_name

-- Wait for job to finish
DECLARE @job_history_id AS INT = NULL

WHILE @time_constraint = @ok
BEGIN
    SELECT TOP 1 @job_history_id = activity.job_history_id
    FROM msdb.dbo.sysjobs jobs
    INNER JOIN msdb.dbo.sysjobactivity activity ON activity.job_id = jobs.job_id
    WHERE jobs.name = @job_name
    ORDER BY activity.start_execution_date DESC

    IF @job_history_id IS NULL
    BEGIN
        WAITFOR DELAY '00:00:10'
        CONTINUE
    END
    ELSE
        BREAK
END

-- Check exit code
SELECT history.run_status
FROM msdb.dbo.sysjobhistory history
WHERE history.instance_id = @job_history_id 
```

您可能需要检查允许 WHILE 循环运行多长时间。我选择将该部分排除在示例之外。

Microsoft 退出代码等指南： [http ://technet.microsoft.com/en-us/library/ms174997.aspx](http://technet.microsoft.com/en-us/library/ms174997.aspx)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-03T13:49:21.060

您可以运行查询：

```
EXEC msdb.dbo.sp_help_jobhistory 
    @job_name = N'MonthlyData' 
```

它将返回一个列 run_status。状态是：

```
 0 - Failed
 1 - Succeeded
 2 - Retry
 3 - Canceled 
```

[有关MSDN](http://msdn.microsoft.com/en-us/library/ms188025.aspx)的更多信息

**编辑**：您可能想要轮询您的工作并确保它已执行。您可以从 sp_help_job 过程中获取此信息。当此过程返回状态时`4`，表示作业处于空闲状态。然后可以安全地检查它的运行状态。

您可以使用以下代码进行轮询：

```
DECLARE @job_status INT
SELECT @job_status = current_execution_status FROM OPENROWSET('SQLNCLI', 'Server=.;Trusted_Connection=yes;','exec msdb.dbo.sp_help_job @job_name = ''NightlyBackups''')

WHILE @job_status <> 4
BEGIN
    WAITFOR DELAY '00:00:03'
    SELECT @job_status = current_execution_status FROM OPENROWSET('SQLNCLI', 'Server=.;Trusted_Connection=yes;','exec msdb.dbo.sp_help_job @job_name = ''NightlyBackups''')
END

EXEC msdb.dbo.sp_help_jobhistory 
    @job_name = N'NightlyBackups' ;
GO 
```

此代码将检查状态，等待 3 秒，然后重试。一旦我们获得 4 的状态，我们就知道工作已完成，并且可以安全地检查工作历史记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-14T16:15:25.250

这是一个脚本，它将检查作业的状态并在它尚未运行时运行它。

```
declare @xp_results table (
job_id                UNIQUEIDENTIFIER NOT NULL,
last_run_date         INT              NOT NULL,
last_run_time         INT              NOT NULL,
next_run_date         INT              NOT NULL,
next_run_time         INT              NOT NULL,
next_run_schedule_id  INT              NOT NULL,
requested_to_run      INT              NOT NULL, -- BOOL
request_source        INT              NOT NULL,
request_source_id     sysname          COLLATE database_default NULL,
running               INT              NOT NULL, -- BOOL
current_step          INT              NOT NULL,
current_retry_attempt INT              NOT NULL,
job_state             INT              NOT NULL)

DECLARE @job_id uniqueidentifier ;
select @job_id = job_id from msdb.dbo.sysjobs where name = 'Job1';
insert into @xp_results
EXEC master.dbo.xp_sqlagent_enum_jobs 1, sa, @job_id

select case when running = 1 then 'Currently Running' else '' end as running, 
case job_state 
    when 0 then 'Not Idle or Suspended'
    when 1 then 'Executing Job'
    when 2 then 'Waiting For Thread'
    when 3 then 'Between Retries'
    when 4 then 'Idle'
    when 5 then 'Suspended'
    when 6 then 'WaitingForStepToFinish'
    when 7 then 'PerformingCompletionActions'
end as job_state
from @xp_results

IF (select running from @xp_results) <> 1
    EXEC msdb.dbo.sp_start_job 'Job1' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-21T14:59:06.823

@lapponiandevil 在这里有最好、最有用的解决方案，但他们的代码比它需要的稍微复杂一些，并且实际上并不能按原样工作，因为它需要显示代码中未定义的 @Time_constraint 和 @ok 变量。

这些是为了支持代理作业的超时，但这不是必需的。代理作业步骤可以使用自己的超时值进行配置，如果超过它会正确出错，这与他们的代码不同。如果您使用该超时方法，您可能会发现自己正在寻找幻像错误，或者在您进入流程的下一步时不知道您正在等待的代理作业仍在运行。

我认为将代码减少到最低限度并删除超时功能是理想的。这是我根据他们的解决方案提出的：

```
-- Start Agent Job
DECLARE @JobName NVARCHAR(128) = 'My Agent Job Name'
   EXEC msdb.dbo.sp_start_job @JobName

-- Wait for Agent Job to finish
DECLARE @HistoryID AS INT = NULL
  WHILE @HistoryID IS NULL
  BEGIN
        --Read most recent Job History ID for the specified Agent Job name
            SELECT TOP 1 @HistoryID = b.job_history_id
              FROM msdb.dbo.sysjobs a
        INNER JOIN msdb.dbo.sysjobactivity b ON b.job_id = a.job_id
             WHERE a.name = @JobName
          ORDER BY b.Start_execution_date DESC
        --If Job is still running (Job History ID = NULL), wait 3 seconds
                IF @HistoryID IS NULL WAITFOR DELAY '00:00:03'
    END

-- Check Agent Job exit code to make sure it succeeded
     IF (SELECT run_status 
           FROM msdb.dbo.sysjobhistory 
          WHERE instance_id = @HistoryID) <> 1 
  THROW 69000, 'Child Agent Job failure', 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T14:18:43.707

我可能有点晚了，但我发现以下查询对我有用。它将给出执行时间和执行结束时间。您也可以更改它以获取状态。

```
SELECT 
    job.name, 
    job.job_id, 
    job.originating_server, 
    activity.run_requested_date, 
    activity.stop_execution_date, 
    DATEDIFF( SECOND, activity.run_requested_date, activity.stop_execution_date ) as Elapsed 
FROM msdb.dbo.sysjobs_view job 
JOIN msdb.dbo.sysjobactivity activity ON job.job_id = activity.job_id 
JOIN msdb.dbo.syssessions sess ON sess.session_id = activity.session_id 
JOIN 
( 
    SELECT 
    MAX( agent_start_date ) AS max_agent_start_date 
    FROM 
    msdb.dbo.syssessions 
) sess_max 
ON sess.agent_start_date = sess_max.max_agent_start_date 
WHERE run_requested_date IS NOT NULL 
--AND stop_execution_date IS NULL 
AND job.name = @JobName 
```

# tsql - 从分隔字符串中提取另一位数据以获取查询结果

> ID：12249062
> 
> 赞同：0
> 
> 时间：2012-09-03T13:42:20.673
> 
> 标签：tsql

我使用下面的代码在某个字符或数字出现后提取分隔字符串中如此多的数据，我希望在提取每个这些值之前提取另一条数据。尽管我确实了解其中的元素，但我并不完全了解代码的工作原理。我只是希望重复拉取的过程并将其整合到查询结果中。

```
USE RUG_Data 

IF OBJECT_ID('tempdb..#splitoutdata','U') IS NOT NULL DROP TABLE #SPLITOUTDATA;
CREATE TABLE #SPLITOUTDATA (
    INDEX1 INT,
    ROWNUM INT,
    BITOFDATA VARCHAR(max));

IF OBJECT_ID(N'dbo.Split_XML', N'TF') IS NOT NULL DROP FUNCTION dbo.Split_XML
GO
SET QUOTED_IDENTIFIER ON
SET ANSI_NULLS ON
GO
CREATE FUNCTION dbo.Split_XML
    (
     @Parameter VARCHAR(MAX)
    ,@Delimiter VARCHAR(1)
    )
RETURNS @Result TABLE
    (
     ItemNumber INT
    ,ItemValue VARCHAR(MAX)
    )
AS 
    BEGIN
        DECLARE @XML XML ;
        SET @Parameter = ( SELECT   @Parameter
                         FOR XML PATH('')
                         ) ;
        SELECT  @XML = '<r>' + REPLACE(@Parameter, @Delimiter, '</r><r>') + '</r>' ;

        INSERT  INTO @Result
                (
                 ItemNumber
                ,ItemValue
                )
                SELECT  ROW_NUMBER() OVER ( ORDER BY ( SELECT NULL) ) AS ItemNumber
                ,       Item.value('text()[1]', 'VARCHAR(MAX)') AS ItemValue
                FROM    @XML.nodes('//r') R ( Item ) ;
        RETURN ;
    END ;
GO

;WITH
REFORMATTEDDATA AS
(
SELECT  
    row_number()over(order by (select null)) as INDEX1,

    REPLACE(REPLACE(CAST(DATA AS VARCHAR(MAX)),CHAR(13),''),CHAR(10),'')AS RAWCLOB2
FROM
    RUG_CLOB
WHERE
    CAST(DATA AS VARCHAR(MAX)) LIKE 'ZHV|FS0000%%%|D0003001%'
)

INSERT INTO #SPLITOUTDATA 
SELECT 
      INDEX1, 
      ROW_NUMBER()OVER(PARTITION BY INDEX1 ORDER BY split.ItemNumber) AS ROWNUM,
      split.ItemValue AS BITOFDATA 
 FROM REFORMATTEDDATA
 CROSS APPLY dbo.Split_XML(reformatteddata.RAWCLOB2,'|') SPLIT

CREATE CLUSTERED INDEX idx1 ON #SPLITOUTDATA (INDEX1,ROWNUM)

SELECT

    [Date], [MPAN],
    [1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12],[13],[14],[15],[16],[17],[18],[19],
    [20],[21],[22],[23],[24],[25],[26],[27],[28],[29],[30],[31],[32],[33],[34],[35],[36],[37],[38],[39],[40],[41],[42],[43],[44],[45],[46],[47],[48],[49],[50] 

FROM
( 
    SELECT 
    INDEX1, 
    (SELECT BITOFDATA FROM #SPLITOUTDATA so2 WHERE so2.INDEX1 = so1.INDEX1 and so2.ROWNUM = 8) AS [Date] ,
    (SELECT BITOFDATA FROM #SPLITOUTDATA so2 WHERE so2.INDEX1 = so1.INDEX1 and so2.ROWNUM = 14) AS [MPAN] ,

    ROW_NUMBER()OVER(PARTITION BY INDEX1 ORDER BY ROWNUM) AS ROWNUM, 

    (SELECT BITOFDATA FROM #SPLITOUTDATA so4 WHERE so4.INDEX1 = so1.INDEX1 AND so4.ROWNUM = so1.ROWNUM +3) AS BITOFDATA 
    FROM #SPLITOUTDATA so1 
    WHERE BITOFDATA = '012' 

        --  AND 
        --(SELECT BITOFDATA FROM #SPLITOUTDATA so5 WHERE so5.DC_INDEX_FK = so1.DC_INDEX_FK AND so5.ROWNUM = 10) NOT IN ('TR01')
    ) p 
    PIVOT 
        (MAX (BITOFDATA) 
    FOR ROWNUM IN ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12],[13],[14],[15],[16],[17],[18],[19],[20],[21],[22],[23],[24],[25],[26],[27],[28],[29],[30],[31],[32],[33],[34],[35],[36],[37],[38],[39],[40],[41],[42],[43],[44],[45],[46],[47],[48],[49],[50]) 
) AS PVT

IF OBJECT_ID('tempdb..#splitoutdata','U') IS NOT NULL DROP TABLE #SPLITOUTDATA;
IF OBJECT_ID(N'dbo.Split_XML', N'TF') IS NOT NULL DROP FUNCTION dbo.Split_XML 
```

目前我的查询结果显示为——</p>

```
[Date], [MPAN],
[1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12],[13],[14],[15],[16],[17],[18],[19],
[20],[21],[22],[23],[24],[25],[26],[27],[28],[29],[30],[31],[32],[33],[34],[35],[36],[37],[38],[39],[40],[41],[42],[43],[44],[45],[46],[47],[48],[49],[50] 
```

我希望拥有

```
[Date], [MPAN],
[E/A],[1], [E/A], [2], [E/A], [3], [E/A], [4], [E/A], [5], [E/A], [6], [E/A], [7], [E/A], [8], [E/A], [9], [E/A], [10], [E/A], [11], [E/A], [12], [E/A], [13], [E/A], [14], [E/A], [15], [E/A], [16], [E/A], [17], [E/A], [18], [E/A], [19], [E/A],[20], [E/A], [21], [E/A], [22], [E/A], [23], [E/A], [24], [E/A], [25], [E/A], [26], [E/A], [27], [E/A],[28], [E/A], [29], [E/A], [30], [E/A], [31], [E/A], [32], [E/A], [33], [E/A], [34], [E/A],[35], [E/A],[36], [E/A], [37], [E/A], [38], [E/A], [39], [E/A], [40], [E/A], [41], [E/A], [42], [E/A], [43], [E/A], [44], [E/A], [45], [E/A], [46], [E/A], [47], [E/A], [48], [E/A],[49], [E/A], [50] 
```

E/A 值也在分隔字符串内，并且在我每次拉取的值之前都有一个部分，所以我假设我会以某种方式使用这段代码来拉取它：

```
(SELECT BITOFDATA FROM #SPLITOUTDATA so4 WHERE so4.INDEX1 = so1.INDEX1 AND so4.ROWNUM = so1.ROWNUM +2) AS BITOFDATA 
FROM #SPLITOUTDATA so1 
WHERE BITOFDATA = '012' 
```

由于某种原因，我只是无法让它工作，因为我对此很陌生，但我认为它相当简单。

对不起，如果我没有很好地解释它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:50:37.870

没有样本数据很难判断，但是您应该能够对 PIVOT 的结果进行第二次 PIVOT 以获得您所追求的结果

# maven - 詹金斯抛出：连接到 Nexus 被拒绝错误？

> ID：12249067
> 
> 赞同：0
> 
> 时间：2012-09-03T13:42:50.340
> 
> 标签：maven, connection, jenkins, nexus

我们正在使用 Maven 部署插件，而 Jenkins 无法部署并抛出异常？它在本地工作（控制台）。这是为什么？

詹金斯错误：

```
 Could not transfer artifact XX:XYZ from/to nexus (http://10.0.0.0:8081/nexus/content/groups/public): Connection to http: //10.0.0.0:8081 refused 
```

用于下载，例如来自 Nexus Jenkins 的依赖 jar 会引发相同的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:55:21.767

看起来您有一个防火墙阻止了端口 8081 上 IP 地址 10.0.0.0 的流量。

# javascript - 在科尔多瓦应用程序中找不到插件

> ID：12249083
> 
> 赞同：1
> 
> 时间：2012-09-03T13:43:58.740
> 
> 标签：javascript, ios, ios4, cordova-2.0.0

在我的 ios 项目中，我需要使用 Cordova cordova-1.9.0.js 的本机 AlertView。

我已经检查了该链接： [native AlertView](http://nachbaur.com/blog/how-to-use-the-native-alert-dialog-in-phonegap)

我检查了 [科尔多瓦文档](http://docs.phonegap.com/en/1.9.0/cordova_notification_notification.md.html#notification.alert)

在此，我还在 App/Supporting Files/Cordova.plist 中添加了所需的权限

```
 <key>Plugins</key>
     <dict>
        <key>Notification</key>
        <string>CDVNotification</string>
     </dict> 
```

但是在运行时它给了我这个错误

> 错误：未找到插件 ''，或者不是 CDVP 插件。检查 Cordova.plist 中的插件映射。

它没有向我显示警报。

我不知道从哪里找到？请建议我哪里出错了？该版本的cordova有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:56:07.193

它`navigator.notification`是 Cordova 核心的一部分，因此您无需向 cordova.plist 添加另一个条目。应该已经有条目了。删除您的条目，然后重试。

# php - 流是用来做什么的？

> ID：12249085
> 
> 赞同：0
> 
> 时间：2012-09-03T13:44:05.020
> 
> 标签：php, stream

[http://php.net/manual/en/book.stream.php](http://php.net/manual/en/book.stream.php)

很多功能，可能还有很多电器。但是，例如，我想用流做什么？它们通常用于什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:52:21.010

流是基本上任何 I/O（输入、输出）的概括，甚至更一般地说是任何可以读取或写入的东西。如果您曾经`fopen`使用流打开过文件。如果您曾经使用 下载过远程文件`file_get_contents('http://exmaple.com')`，那么您已经使用了流。有 Stream Wrappers for `http://`、简单的本地文件`zip://`等等。`fopen`和之类的功能`file_get_contents`相当高级，您链接到的手册中列出的所有功能甚至更低级别，例如，允许您将数据从一个流直接传输到另一个流，例如直接文件到文件数据复制，以及您可以在相当低的级别上使用 I/O 操作做的其他好事

# python - 如何在 Ubuntu 中使用 numpy 和 OpenBLAS 而不是 Atlas？

> ID：12249089
> 
> 赞同：15
> 
> 时间：2012-09-03T13:44:17.790
> 
> 标签：python, ubuntu, numpy, installation, blas

我一直在寻找一种使用 OpenBLAS 安装/编译 Numpy 的简单方法，但没有找到简单的答案。对于像我这样不习惯编译软件的人来说，我所看到的所有文档都需要太多的知识。Ubuntu 中有两个与 OpenBLAS 相关的软件包：`libopenblas-base`和`libopenblas-dev`. 安装它们后，我应该怎么做才能再次使用它们安装 Numpy？谢谢！

请注意，安装这些 OpenBLAS 包后，Numpy 不再工作：无法导入：ImportError: /usr/lib/liblapack.so.3gf: undefined symbol: ATL_chemv。使用他们的 Ubuntu[网站说明](http://deeplearning.net/software/theano/install_ubuntu.html#install-ubuntu)安装 Theano 时也会出现问题。

[这已经在这里](https://stackoverflow.com/questions/8917977/installing-lapack-for-numpy)注意到了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T16:12:00.517

运行`sudo update-alternatives --all`并设置`liblapack.so.3gf`为`/usr/lib/lapack/liblapack.so.3gf`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-06T10:22:12.187

添加到接受的答案（使用`update-alternatives`），原因是因为 OpenBlas 与 Lapack 的 Atlas 版本不兼容。对于每个 Blas 和 Lapack 版本：

1.  默认 Blas + 默认 Lapack => OK
2.  OpenBlas + 默认 Lapack => 好的
3.  Atlas-Blas + 默认 Lapack => OK
4.  Atlas-Blas + Atlas-Lapack => 好的
5.  OpenBlas + Atlas-Lapack => 错误！（此处为以下案例。）

这是来自个人经验（具有完全相同的问题）以及为什么[在此比较博客](http://blog.nguyenvq.com/blog/2014/11/10/optimized-r-and-python-standard-blas-vs-atlas-vs-openblas-vs-mkl/)中没有提到这种组合。

顺便说一句，您可以在 中找到必要的文件`/etc/alternatives/`，通常文件名以`lib*`. 为每一个做`sudo update-alternatives --config <filename>`。例如，执行以下操作：

*   `sudo update-alternatives --config libblas.so`
*   `sudo update-alternatives --config libblas.so.3`

更改 Blas 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T08:07:39.530

考虑使用 EasyBuild ( [http://hpcugent.github.io/easybuild/](http://hpcugent.github.io/easybuild/) )，这是一个用于构建和安装软件的开源框架。

它允许您（非常容易地）使用各种编译器构建和安装（科学）软件，并使用不同的 BLAS 库（ATLAS、OpenBLAS、ACML、Intel MKL，...）。

[一旦你安装了 EasyBuild（专业提示：使用https://github.com/hpcugent/easybuild/wiki/Bootstrapping-EasyBuild](https://github.com/hpcugent/easybuild/wiki/Bootstrapping-EasyBuild)中描述的引导过程），它归结为运行一个命令，例如：

`eb numpy-1.6.2-goolf-1.4.10-Python-2.7.3.eb -ldr`

这将首先构建和安装完整的编译器工具链（goolf：GCC+OpenBLAS+OpenMPI+LAPACK+FFTW），然后使用该工具链构建 Python 和 numpy。而所有这一切都在你吃午饭的时候。;-)

免责声明：我是 EasyBuild 开发人员之一。

# jqgrid - 什么是 clientArray 以及如何访问数据 clientArray

> ID：12249092
> 
> 赞同：0
> 
> 时间：2012-09-03T13:44:25.313
> 
> 标签：jqgrid, jqgrid-asp.net

我`clientArray`在这段代码中看到

```
 if (id && id !== lastSel) {

                        grid.saveRow(lastSel, true, 'clientArray'); 

                        grid.jqGrid('restoreRow', lastSel);
                        grid.jqGrid('editRow', id, true, null, null, 'clientArray');
                        lastSel = id;
                        //}  
                    } 
```

什么是 a`clientArray`以及如何访问数据`clientArray`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:42:54.640

写这段代码的时候

```
grid.jqGrid('editRow', id, true, null, null, 'clientArray'); 
```

数据不发送到服务器，只是在网格中处理数据

# visual-studio-2012 - “测试代理无法连接到测试控制器”VS2012 代理

> ID：12249093
> 
> 赞同：4
> 
> 时间：2012-09-03T13:44:30.480
> 
> 标签：visual-studio-2012, tfs

（使用 Visual Studio 2012 代理工具进行测试）

我很难让我的测试代理（在远程机器上）连接到我的测试控制器。

我收到错误消息：

> “测试代理无法连接到测试控制器”

在日志中，存在以下错误：

有些错误会显示多次，所以我在它们旁边标出了次数。

x2：

> “无法从测试代理获取状态。异常：无法连接到 IPC 端口：系统找不到指定的文件。”

x1：

> “无法从测试代理获取状态。异常：未找到请求的服务”

x1：

> “无法从测试代理获取状态。异常：无法写入 IPC 端口：管道正在关闭”

x3：

> “无法从测试代理获取状态。异常：无法连接到 IPC 端口：系统找不到指定的文件。”

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T13:06:11.010

我解决了这个问题。

尽管我的测试代理报告成功创建了防火墙例外，但我检查了我的防火墙的入站规则，发现 QTAgentService.exe 的两个例外实际上被阻止了。

我之前在这台机器上安装了 Visual Studio 2010 代理工具。这些例外仍处于启用状态。

我不确定它们被阻止的原因，但一种可能是我的防病毒软件阻止了它（我安装了 AVG 防病毒软件）。我对 VS2010 代理工具没有同样的问题。

一旦我取消阻止了两个异常（一个是 UDP，另一个是 TCP），我的测试代理就成功地连接到了我的测试控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-26T09:58:50.860

您应该禁用 UAC 和防火墙。我遇到了这个问题，解决方案是在注册表中禁用 UAC。如果您在其上运行测试控制器或测试代理，它适用于 Window 8+ 主机。
参考这篇文章：[链接](http://www.eightforums.com/system-security/2434-disable-uac-completely.html) 可以通过以下命令实现：
`reg add HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System /v EnableLUA /t REG_DWORD /d 0 /f`

# javascript - 如何在使用丰富的日期选择时显示时间编辑器：日历

> ID：12249095
> 
> 赞同：3
> 
> 时间：2012-09-03T13:44:39.880
> 
> 标签：javascript, jsf, richfaces

我想制作一个日历，您可以在其中选择日期，并自动选择时间。我不应该使用按钮来更改时间:(

所以我有下一个：

```
<rich:calendar id="currentDate" popup="true"
    datePattern="dd/MM/yyyy - HH:mm" enableManualInput="false"
    showFooter="false" required="true" resetTimeOnDateSelect="true"
    oncollapse="return timeSelected;"
    showWeeksBar="false" showWeekDaysBar="true"
    value="#{bean.currentDate}"
    ondateselected="timeSelected=false; Richfaces.getComponent('calendar',this).showTimeEditor(); return true;"
    ontimeselected="timeSelected=true; return true;"
    ontimeselect="timeSelected=true; return true;"
>
    <a4j:support event="onchange" ajaxSingle="true" />
</rich:calendar> 
```

但它根本不起作用。有两个问题。

1 - 当您选择一天时，会出现弹出窗口。但是，如果您在不更改时间的情况下按“接受”，则无法关闭日历:(

2 - 一旦你选择了日期/时间，但你只想更改时间，你就不能这样做，因为你不能选择当前日期，所以你看不到时间编辑器。

我正在使用丰富的面孔 3.3.3

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:51:45.943

`ondateselected`和`ontimeselected`属性仅在*实际更改*日期或时间时调用，而不是在您单击日期或关闭时间编辑器时调用。没有标准的`<rich:calendar>`属性可以捕捉到这一点。您需要覆盖标准`calendar.js`函数`eventCellOnclick()`（在单击日期时调用）和`hideTimeEditor()`（在时间编辑器关闭时调用）。

以下适用于 RichFaces 3.3.3（以及 Mojarra 1.2_15 和 Tomcat 7.0.29）。

```
<h:form id="form">
    <rich:calendar id="currentDate" popup="true"
        datePattern="dd/MM/yyyy - HH:mm" enableManualInput="false"
        showFooter="false" required="true" resetTimeOnDateSelect="true"
        showWeeksBar="false" showWeekDaysBar="true"
        value="#{bean.currentDate}"
        oncollapse="return this.component.timeSelected;"
    >
        <a4j:support event="onchange" ajaxSingle="true" />
    </rich:calendar>
</h:form>

<script>
    var currentDateComponent = $('form:currentDate').component;

    var originalCellOnClickFunction = currentDateComponent.eventCellOnClick;
    currentDateComponent.eventCellOnClick = function() {
        this.timeSelected = false;
        originalCellOnClickFunction.apply(this, arguments);
        currentDateComponent.showTimeEditor();
    };

    var originalHideTimeEditorFunction = currentDateComponent.hideTimeEditor;
    currentDateComponent.hideTimeEditor = function() {
        this.timeSelected = true;
        originalHideTimeEditorFunction.apply(this, arguments);
    };
</script> 
```

请注意`ondateselected`，`ontimeselect`和`ontimeselected`属性已删除，并且该`oncollapse`属性已更改。另请注意，必须在 DOM 中填充日历后执行脚本。所以上面的工作原样。如果您想将脚本移动到它自己的 JS 文件中（这是一件好事），请确保它仅在 DOM 就绪上执行（即，将脚本放在 end of`<body>`或通过`window.onload()`or执行`jQuery.ready()`）。

# c# - 无效的属性 ID 错误 - 来自 List<> c# ASP.NET 的 JSON 对象

> ID：12249096
> 
> 赞同：1
> 
> 时间：2012-09-03T13:44:40.387
> 
> 标签：c#, javascript, asp.net, json, razor

我已经在这个问题上待了几天，但一无所获。

我正在尝试将 List 对象序列化为 JSON，以便可以将其传递给 Google Analytics 的电子商务服务，因此需要事先将其传递给 javascript。

但是，json 输出存在错误。

首先，我有一个 Item 类。

```
Item {
    Id,
    Name,
    Sku,
    Price,
    Quantity
} 
```

我的购物车类包含一个项目列表

```
public List<Item> Items; 
```

我正在使用以下内容来序列化列表。

```
var jsonList = JavascriptSerializer.Serialize(cart.Items); 
```

然后使用 Razor 将 jsonList 传递给 javascript，如下所示 -

```
<script type="text/javascript">
    var items = @jsonList;
</script> 
```

在浏览器中生成的结果如下所示：

```
items = [{&quot;Id&quot;:ITEM_ID,&quot;Name&quot;:&quot;ITEM_NAME&quot;,&quot;Sku&quot;:&quot;ITEM_SKU&quot;,&quot;Quantity&quot;:ITEM_QTY,&quot;Price&quot;:ITEM_PRICE},{&quot;Id&quot;:ITEM2_ID,&quot;Name&quot;:&quot;ITEM2_NAME&quot;,etc...}] 
```

所以我想知道如何摆脱 " 并用所需的 " 代替它们。它与我的 Item 类或我的javascript有关吗？

我已经尝试过 @Html.Raw(items) 并且没有运气 - 返回一个空的 json 对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T13:47:12.120

您可以使用[Html.Raw](http://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper.raw%28v=vs.98%29.aspx)返回未编码的 HTML

```
var items = @Html.Raw(@jsonList); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:09:56.103

找到了适用于以下帖子的解决方案。

[如何使用 Razor 将未编码的 Json 写入我的视图？](https://stackoverflow.com/questions/4072762/how-do-i-write-unencoded-json-to-my-view-using-razor)

感谢@James 提到未编码的 HTML——这让我走上了正确的道路。

# android - 如何在布局背景中插入图像？

> ID：12249101
> 
> 赞同：-2
> 
> 时间：2012-09-03T13:44:57.653
> 
> 标签：android

在android的登录布局背景中插入图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T13:48:03.057

在 xml 中：

```
android:background="@drawable/your_image" 
```

在代码中（`setBackgroundDrawable`自 API 16 起已弃用，但仍然有用）

```
.setBackgroundDrawable(Drawable d);
//or
.setBackgroundResource(int resId); 
```

从 API 16 开始：

```
.setBackground(Drawable d) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:47:20.747

像这样 -

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout android:id="@+id/loginLayout" xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:background="@drawable/background">
    ....
    ....
    </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:49:22.113

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/ad_screenfull"
    android:orientation="vertical" >
</LinearLayout> 
```

# forms - 联系表单上的发送按钮在移动设备上不起作用

> ID：12249102
> 
> 赞同：2
> 
> 时间：2012-09-03T13:45:05.017
> 
> 标签：forms, mobile

联系表单在桌面上运行良好，但在移动设备上失败的原因可能是什么？

我有一个联系表格作为 html 模板的一部分，我相信它使用 ajax 和 php 邮件程序向联系表格所有者发送电子邮件通知。

在台式机上测试这张卡时，它工作得很好，但在移动设备上却失败了。没有显示错误消息，但 URL 中充满了传递给表单的变量。按下按钮时，用户将被重定向到主 div，但不会处理联系表单。

有任何想法吗？

# blackberry - 黑莓推送服务

> ID：12249103
> 
> 赞同：0
> 
> 时间：2012-09-03T13:45:09.723
> 
> 标签：blackberry

嗨朋友们我正在开发一个应用程序来显示推送通知。我想知道天气它是收费推送通知必不可少的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:55:29.840

RIM 根据推送数据的频率和大小以及推送到的客户端数量收费。当您申请推送凭证时，会解释每种账户类型的限制和成本。当前信息可从[Push Service 站点](https://developer.blackberry.com/services/push/)获得。

# c# - PrincipalOperationException 1355 但 WireShark 指示成功

> ID：12249105
> 
> 赞同：4
> 
> 时间：2012-09-03T13:45:16.983
> 
> 标签：c#, directoryservices, userprincipal

我有一个在应用程序域之外执行`UserPrincipal`（和`GroupPrincipal`）的应用程序。`FindByIdentityWithType`这一直有效到上周。从那时起，我在我的开发机器上安装了 Visual Studio 2012，我的代码停止工作，并出现`PrincipalOperationException`{“无法检索有关域的信息 (1355)。”}。windows错误号为80131501

我不知道 VS2012 安装、一些安全更新和此错误的出现之间是否存在关联。

我在创建上下文时使用 SimpleBind，并且在 ADSIEdit 中使用相同的设置来访问域仍然有效。

我在应用程序测试期间捕获了 WireShark，并且： TCP/LDAP 包表明成功！我收到了 LDAP 搜索结果包，可以看到它在 Wireshark 中的内容是正确的。您可以在 wireshark 中看到 searchRequest 和 searchResponse - 请求的值是正确的，并且使用正确的目录对象回答了请求。在收到错误之前 3 或 4 个数据包，我可以看到我的客户端和 2008R2 服务器之间的 ldap 流量中有一个端口正在改变。客户端是 Windows7（我没有打开防火墙，我尝试禁用病毒扫描程序）。

我想稍后 System.DirectoryServices.AccountManagement 实例化 UserPrincipal 时可能会出现问题（我尝试了这个，因为我怀疑我的一些 UserPrincipalEx 属性可能是异常的原因）。这个猜测是基于 ldap 查询被执行并很好地回答的事实。

我知道`MemberOf`如果您的客户端不受该域的信任，您将永远无法在 DirectoryObject 上执行方法。但是 UserPrincipal 的简单实例化为我工作了几个月，直到今天。

我在开发环境中使用主机条目而不是 DNS。它工作了几个月。服务器没有客户端的 DNS 知识，也从来没有。

对解决方案的任何提示都会很棒！

主机条目：

```
192.168.19.101  mhvtest.loc #thats the domain (local vmware) entry
192.168.19.101  mhvdc1.mhvtest.loc #thats the domain controller entry
192.168.19.102  mhvex1.mhvtest.loc 
```

堆栈跟踪是：

```
 at System.DirectoryServices.AccountManagement.Utils.GetDcName(String computerName, String domainName, String siteName, Int32 flags)
   at System.DirectoryServices.AccountManagement.ADStoreCtx.LoadDomainInfo()
   at System.DirectoryServices.AccountManagement.ADStoreCtx.get_DnsDomainName()
   at System.DirectoryServices.AccountManagement.ADStoreCtx.GetAsPrincipal(Object storeObject, Object discriminant)
   at System.DirectoryServices.AccountManagement.ADStoreCtx.FindPrincipalByIdentRefHelper(Type principalType, String urnScheme, String urnValue, DateTime referenceDate, Boolean useSidHistory)
   at System.DirectoryServices.AccountManagement.ADStoreCtx.FindPrincipalByIdentRef(Type principalType, String urnScheme, String urnValue, DateTime referenceDate)
   at System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper(PrincipalContext context, Type principalType, Nullable`1 identityType, String identityValue, DateTime refDate)
   at System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithType(PrincipalContext context, Type principalType, String identityValue)
   at System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext context, String identityValue)
   at Idda2.ActiveDirectory.UserPrincipalEx.FindByIdentity(PrincipalContext context, String identityValue) in D:\Users\vogt\Documents\src\idda2\trunk\Idda2.ActiveDirectory\UserPrincipalEx.cs:line 130 
```

# c# - 数据模板项目在 Windows 8 Metro 应用程序中显示时的 OnShown 或任何其他事件

> ID：12249107
> 
> 赞同：0
> 
> 时间：2012-09-03T13:45:31.413
> 
> 标签：c#, xaml, windows-8, microsoft-metro, datatemplate

我正在开发 Windows 8 Metro 风格的应用程序。我的应用程序包含带有以下数据模板的页面。我将“NewsObject”集合绑定到模板。

```
<DataTemplate x:Key="NewsOverlayDataTemplate">
        <Grid Height="250" Width="250">
                <Grid.Background>
                    <Binding Path="IsView" Converter="{StaticResource headerColorConverter}"/>
                </Grid.Background>
            <TextBlock Text="{Binding Title}" Margin="10,3,10,0" TextTrimming="WordEllipsis" TextWrapping="Wrap"
                       Style="{StaticResource NewsTitleTextStyle}" HorizontalAlignment="Left" Foreground="Black"/>
            <StackPanel Orientation="Vertical" Background="BlueViolet" Height="90" VerticalAlignment="Bottom">
                <Grid  Margin="10,2,10,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="{Binding Provider}" Height="14" 
                       TextTrimming="WordEllipsis" HorizontalAlignment="Left" FontSize="9" Opacity="0.49"/>
                    <TextBlock Grid.Column="1" Height="14" 
                       TextTrimming="WordEllipsis" HorizontalAlignment="Right" FontSize="9" Opacity="0.49">
                        <TextBlock.Text>
                            <Binding Path="Time" Converter="{StaticResource dateFormatConverter}" ConverterParameter="year"  />
                        </TextBlock.Text>
                    </TextBlock> 
```

最初“NewsObject”仅加载其“标题”和“时间”属性。但是当显示的每个项目我也想加载项目“描述”。“描述”通过发送请求从服务器端获取。要发送该请求，我需要在每个项目显示（滚动）时“显示”或任何其他事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:45:50.893

如果您的内容显示在具有支持 UI 虚拟化的默认 ItemsPanel 的 ItemsControl（如 ListView）中 - 只有屏幕上显示的项目（可能还有一些相邻项目）才会生成其布局容器，因此 Loaded 事件可能就是您的正在找。您还可以假设当您的视图模型属性（如“Provider”）的 getter 被访问时 - 这些项目正在显示，但是您需要小心不要从 DataTemplate 以外的任何地方访问它们。

# asp.net-mvc-3 - 给一个类添加一个类

> ID：12249112
> 
> 赞同：5
> 
> 时间：2012-09-03T13:46:04.897
> 
> 标签：asp.net-mvc-3, webgrid

将一个类添加到 webgrid 中的 td 很容易，例如：

```
new WebGridColumn {
    ColumnName= "Owl.Species",
    Header= "Scientific Name",
    Style= "sci-name"
} 
```

样式标签将类“sci-name”添加到`td`. 如何在`th`不使用 jQuery 的情况下为该列添加一个类，这不是理想的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:25:05.330

我认为没有内置的方法可以做到这一点。您甚至不能扩展 WebGrid 类，因为它们的方法没有标记为虚拟的。我能想到的最好方法是使用一些 CSS，通过索引`nth-child`来定位元素。`th`

```
<style type='text/css'>
    table thead tr th:nth-child(2) {
        background: yellow;
    } 
</style> 
```

仍然不理想，但我认为比使用 JQuery 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:19:19.253

您可以为此使用参数的`headerStyle`属性`WebGrid.GetHtml`

例如：

![在此处输入图像描述](../Images/a8007d05d1000e31537a910b9f293a65.png)

希望这可以帮助！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T14:01:40.763

我们可以使用`Javascript`下面的代码来做到这一点，这是最简单的方法。

[JsFiddle 示例](http://jsfiddle.net/3fscqh5k/)

```
$("table tr th:nth-child(n)").addClass("col-md-1"); 
```

# html - 模块输出的数据类型

> ID：12249118
> 
> 赞同：0
> 
> 时间：2012-09-03T13:46:47.163
> 
> 标签：html, perl, module, ascii

我有一个脚本，可以在各种文本上运行以将 XHTML（例如，`&uuml;`）转换为 ASCII。例如，我的脚本是按以下方式编写的：

```
open (INPUT, '+<file') || die "File doesn't exist! $!";
open (OUTPUT, '>file') || die "Can't find file! $!";

while (<INPUT>) {
     s/&uuml/ü/g;
}

print OUTPUT $_; 
```

这按预期工作，并将 XHTML 替换为 ASCII 等效项。但是，由于这经常运行，我尝试将其转换为模块。但是，Perl 不返回“ü”，而是返回分解。
如何让 Perl 使用 ASCII 等价物返回数据（在我的常规 .pl 文件中运行和打印）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:47:49.143

没有ASCII。无论如何，在实践中没有，当然也没有在美国以外的地方。我建议您指定一个包含您可能遇到的所有字符的编码（ASCII 不包含`ü`，它只是一个 7 位编码！）。Latin-1 是可能的，但仍然不是最理想的，所以你应该使用**Unicode**，最好*是 UTF-8*。

如果你不想以 Unicode 输出，至少你的 Perl 脚本应该用 UTF-8 编码。`use utf8`在脚本顶部向 perl 解释器发出信号。

然后用这样的编码层打开输入文件：

```
open my $fh, "<:encoding(UTF-8)", $filename 
```

输出文件也是如此。只需确保在要使用编码时指定一个编码。

您可以使用 更改文件的编码`binmode`，只需查看[文档](http://perldoc.perl.org/functions/binmode.html)即可。

您还可以使用该[`Encode`模块](http://search.cpan.org/~dankogai/Encode-2.47/)将字节字符串转换为 unicode，反之亦然。有关在 Perl 中使用 Unicode 的更多信息，请参阅这个[出色的问题。](https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default)

如果你愿意，你可以使用现有的[`HTML::Entities`](http://search.cpan.org/~gaas/HTML-Parser-3.69/lib/HTML/Entities.pm)模块来处理实体解码，只关注 I/O。

# nlp - 从两个句子对齐的文本构建字典？

> ID：12249120
> 
> 赞同：2
> 
> 时间：2012-09-03T13:46:57.687
> 
> 标签：nlp, machine-translation

我有一个文本语料库，它已经通过构造在句子级别对齐 - 它是一对英语字符串及其翻译成另一种语言的列表。我有大约 10 000 个字符串，每个字符串 5 到 20 个单词及其翻译。我的目标是尝试建立一个翻译质量的衡量标准——当然是自动的，因为我正在处理我一无所知的语言:)

我想从这个翻译列表中构建一个字典，它将源英语字符串中的每个单词（最可能的）翻译成另一种语言。我知道这本词典远非完美，但我希望当一个词的翻译不一致时，我能有足够好的东西来标记，例如，如果我的词典说“Store”要由“Magasin”翻译成法语那么如果我发现某个地方“商店”被翻译为“精品店”，我就会怀疑有什么问题。

所以我需要：

1.  从我的语料库构建字典
2.  对齐字符串/翻译对中的单词

您对如何执行此操作有很好的参考吗？已知算法？我发现了许多关于文本对齐的链接，但它们似乎更多的是在句子级别而不是在单词级别......

任何其他关于如何自动检查翻译是否一致的建议将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:15:24.973

**GIZA++**是一个免费的（特别是 GPL 许可的）字对齐工具。我训练了其他答案中提到的著名 IBM 模型，以及其他统计模型。

您可以从[Google Code 的 GIZA++ 站点下载它，在](http://code.google.com/p/giza-pp/)[GIZA++ Apertium](http://wiki.apertium.org/wiki/Using_GIZA%2B%2B)上可以找到其用法的简要介绍。它归结为这个**过程**：

1.  创建你的平行语料库，句子对齐（你似乎已经有了）
2.  应用 GIZA++ 自带的`plain2snt`工具，提取 GIZA++ 格式的单词列表和句子列表
3.  （可选——仅用于某些模型：）使用该`mkcls`工具生成单词类（也包括在内）
4.  运行实际的单词对齐工具`GIZA++`。您可以使用各种可选配置设置来确定生成的模型的类型。

在执行此操作之前，您必须通过运行从源代码构建工具`make`。该代码是用 C++ 编写的，并且可以很好地与最新的 GCC 版本一起编译。

**最后的几点说明：**

*   每个单词都有不止一种可能的翻译；您不应该仅仅因为同一个词在另一个文本中的翻译不同，就认为在一个文本中找到的特定翻译必然是错误的假设；

*   一个词可以翻译成（不一定是连续的）几个词的序列，反之亦然。有些词根本没有翻译；

*   GIZA++ 是一种近似正确词对齐的统计工具；它生成的许多对齐方式都是有问题的或不正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T18:29:51.690

这是一个非常标准的统计机器翻译问题，称为“单词对齐”。
IBM 的研究人员开发了许多基于 EM 集群的模型，我认为它们是当今开发的大多数其他冷却器模型的基础。
谷歌搜索“ibm 单词对齐模型”以查找 IBM 模型 1 到 5。
这个演示文稿 - [http://www.stanford.edu/class/cs224n/handouts/cs224n-lecture-05-2011-MT.pdf](http://www.stanford.edu/class/cs224n/handouts/cs224n-lecture-05-2011-MT.pdf)似乎是一个开始的好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:55:55.160

你在单词之间使用空格吗？无论您使用什么字符，您都可以查看`slice`Linux 中的命令。它使您能够过滤空格和其他字符之间的单词。

# html - 选择标记内的文本垂直未对齐

> ID：12249122
> 
> 赞同：0
> 
> 时间：2012-09-03T13:47:07.677
> 
> 标签：html, css, html-select

我有一个选择标签，当其中有一个值时，它与底部垂直对齐。我检查了上面的 CSS，唯一的就是字体大小和字体。当我从页面中删除文档类型时，一切看起来都不错，但我假设这是因为浏览器更正了它。这个问题只出现在 IE8 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:08:01.590

我已经找到了这个问题的原因。在 IE8 中，它源于我两次将相同的样式应用于选择标签的事实。一旦在一个类中它继承自并且一次用于所有选择标签。

# google-maps - ReferenceError：谷歌未定义

> ID：12249136
> 
> 赞同：14
> 
> 时间：2012-09-03T13:47:54.923
> 
> 标签：google-maps

我在我的网站中使用谷歌地图的 api 来显示几个位置。谷歌地图在我的本地解决方案中工作得很好，但在我的网站上却不行。我改变了这个来源

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.5&sensor=false"> </script> 
```

到这个。我再次改变了这个

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"> </script> 
```

有了这个...

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"> </script> 
```

只有它说：**ReferenceError: google is not defined**

有没有人熟悉这样的问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T15:35:12.450

由于我的网站使用**https**进行连接，我不能使用[http://maps.google.com/maps/api/js?sensor=false](http://maps.google.com/maps/api/js?sensor=false)。当我调试整个页面时，此链接显示：警告：**页面 index.html 运行不安全内容**。所以我在谷歌上再次搜索并遇到了这个[问题](https://stackoverflow.com/questions/7309013/warning-the-page-index-html-ran-insecure-content)。所以基本上导致问题的原因是没有在源代码部分使用 https 链接，所以正确的链接将是（对我而言）

```
https://maps.google.com/maps/api/js?sensor=false 
```

现在一切正常！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-03T18:50:47.630

这是一个旧网址。如果您查看[**文档中的示例**](https://developers.google.com/maps/documentation/javascript/examples/)，几乎所有示例都使用：

```
 <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-08T10:38:12.200

对我来说，使用新的 Google Maps API，这个解决方案很有效：只需从 goolge 提供的脚本中省略“async defer”即可：

```
<script async defer src="https://maps.googleapis.com/maps/api/js?key={your_key}"></script> 
```

到

```
<script src="https://maps.googleapis.com/maps/api/js?key={your_key}"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-17T08:24:48.630

我在rails应用程序中遇到了这个问题。

对 googlemap 的请求来自 http 和 https 页面

它解决了：

```
= javascript_include_tag "//maps.google.com/maps/api/js?sensor=false" 
```

如果协议未定义 rails 自动插入

# mysql - 使用 GUID 与选择 WHERE 时选择更快？

> ID：12249137
> 
> 赞同：2
> 
> 时间：2012-09-03T13:47:55.720
> 
> 标签：mysql, database, query-optimization

我有一张包含数千条记录的表。我做了很多这样的选择来查找一个人是否存在。

```
SELECT * from person WHERE personid='U244A902' 
```

因为个人ID不是纯数字，所以我没有使用它作为主键并使用自增。但现在我正在重新考虑我的策略，因为我认为`SELECTS`随着桌子填满，我的速度会越来越慢。我在想这种缓慢背后的原因是因为`personid`不是主键。

所以我的问题是，如果我要通过重组表的麻烦并使用`personid`作为主键而不是自动增量，那会显着加快选择速度吗？我说的是现在有 200,000 条记录的表，完成后将填充约 500 万条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:49:54.820

缓慢是*间接*由于它不是主键这一事实，`personid`因为它没有被索引，因为它没有被定义为键。最快的解决方法是简单地索引它：

```
CREATE UNIQUE INDEX `idx_personid` ON `person` (`personid`); 
```

但是，如果它是唯一值，它*应该*是表的主键。没有真正需要单独的`auto_increment`密钥。

```
ALTER TABLE person DROP the_auto_increment_column;
ALTER TABLE person ADD PRIMARY KEY personid; 
```

但是请注意，如果您还在其他表中使用`the_auto_increment_column`as a`FOREIGN KEY`并将其删除以支持`personid`，则需要修改所有其他表以改为使用`personid`。这样做的困难可能并不完全值得你获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:50:53.733

您可以为 personid 创建一个索引。

```
CREATE INDEX id_index ON person(personidid) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:50:59.967

```
ALTER TABLE `person ` ADD INDEX `index1` (`personid`); 
```

尝试索引您正在使用 where 子句的列或选择列

# android - 如何在android中使用HttpDelete

> ID：12249138
> 
> 赞同：1
> 
> 时间：2012-09-03T13:47:56.220
> 
> 标签：android

我想通过 API 从服务器中的 android 手机中删除一些东西。我是新的。如何在 Android 中使用 HTTPDELETE。网址是这样的。 [http://api.someApi.net/v1/medium/6](http://api.someApi.net/v1/medium/6)。

# cmake - 为 CMake 查找包 Eigen3

> ID：12249140
> 
> 赞同：33
> 
> 时间：2012-09-03T13:48:02.803
> 
> 标签：cmake, eigen

CMake 找不到我的**Eigen3**包。我设置了一个名为

```
EIGEN3_INCLUDE_DIR 
```

指向路径在哪里`FindEigen3.cmake`。

然后在 CMakelists.txt 我写道：

```
find_package( Eigen3 REQUIRED )
include_directories( EIGEN3_INCLUDE_DIR ) 
```

我收到下一条错误消息：

```
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:91 (MESSAGE):
  Could NOT find Eigen3 (missing: EIGEN3_INCLUDE_DIR EIGEN3_VERSION_OK)
  (Required is at least version "2.91.0")
Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:252 (_FPHSA_FAILURE_MESSAGE)
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindEigen3.cmake:76 (find_package_handle_standard_args)
  test/test_quaternion/CMakeLists.txt:25 (find_package) 
```

知道我错过了什么或做错了什么吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-04T07:40:54.857

由于 Eigen3 完全只是标题，因此您只需要包含目录的路径。而这个，无论如何你已经在手动定义了。所以没有真正需要`FindEigen3.cmake`or`FIND_PACKAGE`调用。

只需使用

```
INCLUDE_DIRECTORIES ( "$ENV{EIGEN3_INCLUDE_DIR}" ) 
```

或者

```
SET( EIGEN3_INCLUDE_DIR "$ENV{EIGEN3_INCLUDE_DIR}" )
IF( NOT EIGEN3_INCLUDE_DIR )
    MESSAGE( FATAL_ERROR "Please point the environment variable EIGEN3_INCLUDE_DIR to the include directory of your Eigen3 installation.")
ENDIF()
INCLUDE_DIRECTORIES ( "${EIGEN3_INCLUDE_DIR}" ) 
```

几点注意事项：

1.  如果要访问 CMake 变量的*内容*，请确保使用`${...}`
2.  `$ENV{....}`访问环境变量。
3.  如果未设置环境变量，第二个示例将停止并出现错误（因此，EIGEN3_INCLUDE_DIR cmake 变量为空）
4.  如果变量可能包含空格，请小心在（评估的）变量周围使用引号。否则，CMake 会将其解释为列表。
5.  如果您想使用自定义查找模块，请确保将它们放在您的 CMake 安装中，或者正如@Fraser 上面指出的那样，确保指向`CMAKE_MODULE_PATH`它所在的目录。不确定，但可能是 CMake 也会自动检查当前目录（您`CMakeLists.txt`所在的位置。无论如何，设置`EIGEN3_INCLUDE_DIR`与`FindEigen3.cmake`
6.  但是，您的`FindEigen3`脚本可能会*评估*此变量以确定 Eigen3 安装的位置。
7.  或者，自建的基于 CMake 的项目通常提供`<PackageName>Config.cmake`. 如果将一个变量指向`<PackageName>_DIR`包含该文件的目录，则可以`FIND_PACKAGE( <PackageName> ...)`正常使用。有关详细信息，请参阅[FIND_PACKAGE](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:find_package)的文档。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-09-07T22:12:24.967

Eigen >= 3.3 具有直接的 CMake 集成，因此您的设置似乎不正确。

假设 Eigen 已安装到`/opt/eigen/3.3`默认设置。将位置附加或附加`/opt/eigen/3.3`到环境变量`CMAKE_PREFIX_PATH`中，例如在 bash 中：

```
export CMAKE_PREFIX_PATH="$CMAKE_PREFIX_PATH:/opt/eigen/3.3" 
```

然后 CMake 应该把它捡起来。

* * *

如果您正在编写自己的使用 Eigen 的 CMakeLists.txt，我建议使用如下代码：

```
find_package (Eigen3 3.3 REQUIRED)
add_executable (example example.cpp)
target_link_libraries (example Eigen3::Eigen) 
```

自 CMake 3 发布以来，您*不应该*使用`include_directories`- 只要可用，应该首选目标方法。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-02T23:21:53.250

首先，确保 Eigen 安装正确。请参阅`INSTALL`tarball 随附的文件。

其次，将`cmake/FindEigen3.cmake`文件从 tarball 复制到包含`CMakeLists.txt`.

在您的`CMakeLists.txt`添加中：

```
set(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR})
find_package(Eigen3 REQUIRED)
include_directories(${EIGEN3_INCLUDE_DIR}) 
```

现在你应该可以做例如`#include <Eigen/Core>`.

所有这些（大部分）都来自这个[来源](https://forum.kde.org/viewtopic.php?f=74&t=94166)。

这种方法的优势`include_directories("$ENV{EIGEN3_INCLUDE_DIR}")`在于它使用 CMake 的标准机制来查找外部依赖项，使其他人（或您未来的自己）更容易拿起项目，可能在另一个平台上。

（但是，如果 Eigen 本身安装了一个 EigenConfig.cmake 文件会很好，这样就可以通过`find_package`机制访问它而无需任何额外的路径。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-22T00:29:01.447

我在这里找到了另一个使用 pkg-config 文件的解决方案（[在此处](https://aur.archlinux.org/cgit/aur.git/diff/eigen3.patch?h=ros-jade-pcl-ros&id=f7816993efa9ca68137cde7e35f7c1b61635ca4a)[引用](https://github.com/ros-perception/perception_pcl/issues/106)） ：

```
find_package(PkgConfig)
pkg_search_module(Eigen3 REQUIRED eigen3) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-28T20:46:03.653

如果您尚未将 Eigen 库添加到环境变量中，请执行以下操作`CMakeLists.txt`：

```
cmake_minimum_required(VERSION 3.9)
project(ProjectName)

set(CMAKE_CXX_STANDARD 11)

# set EIGEN_DIR variable to Eigen Library Path
set(EIGEN_DIR "C:\\Eigendir\\Eigen")

# include the directory
include_directories(${EIGEN_DIR})

add_executable(ProjectName main.cpp)

target_link_libraries(ProjectName ${EIGEN_DIR}) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-01-01T11:46:41.090

作为约翰内斯最佳答案中**注释7的详细解释。**通过使用 CMake find_packate() 的“配置模式”而不是“模块模式”，只写

```
find_package( Eigen3 REQUIRED )
include_directories( EIGEN3_INCLUDE_DIR ) 
```

在 CMakeLists.txt 中就足够了。

请参考eigen源代码目录下的**INSTALL**指导文本文件（如从[官网](http://eigen.tuxfamily.org/index.php?title=Main_Page#Download)下载的eigen-3.3.7.ta​​r.gz中解压出来），其中写着：

```
Method 2\. Installing using CMake
********************************

Let's call this directory 'source_dir' (where this INSTALL file is).
Before starting, create another directory which we will call 'build_dir'.

Do:

  cd build_dir
  cmake source_dir   
  make install

The "make install" step may require administrator privileges.

You can adjust the installation destination (the "prefix")
by passing the -DCMAKE_INSTALL_PREFIX=myprefix option to cmake, as is
explained in the message that cmake prints at the end. 
```

就像在你的机器上安装常用的 CMake 项目一样。

与直接包含**/usr/include/eigne3**或**/usr/local/include/eigen3**目录的区别在于，一个名为**eigen3/cmake**的配置目录也将安装到**/usr/share**或**usr/local/share**。该配置目录包含**Eigen3Config.cmake**文件，CMake可以自动找到该文件来定位eigen3目录。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-04T00:46:13.027

您可以尝试将 设置为`CMAKE_MODULE_PATH`名为“cmake”的 Eigen 子目录的位置：

```
cmake . -DCMAKE_MODULE_PATH=<Eigen root dir>/cmake/ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-07T02:50:43.893

另一种不需要添加环境变量的简单方法是使用 cmake find_path 函数[https://cmake.org/cmake/help/v3.6/command/find_path.html](https://cmake.org/cmake/help/v3.6/command/find_path.html)简单地查找特征。示例代码在路径“/usr/include/”和“/usr/local/include”中找到目录“Eigen”，并在子目录“eigen3”中进行额外搜索。

```
find_path(EIGEN3_INCLUDE_DIRS "Eigen" paths "/usr/include" "/usr/local/include" path_suffixes "eigen3")
message(${EIGEN3_INCLUDE_DIRS})
if ( NOT EIGEN3_INCLUDE_DIRS )
    message(FATAL_ERROR "CMake variable EIGEN3_INCLUDE_DIRS not found.")
endif()
include_directories ( "${EIGEN3_INCLUDE_DIRS}" ) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-03T21:00:21.827

`cmake .. && make`当我在来自 github 的项目克隆上的 Google Colab 上运行时，我遇到了类似的问题。我通过编辑 CMakeLists.txt 文件并将这一行添加到它来修复它：

```
set(EIGEN3_INCLUDE_DIR "/usr/include/eigen3") 
```

如您所见，我的 eigen3 位于 /usr/include/eigen3 路径中（我已使用 安装它`!sudo apt-get install build-essential cmake libeigen3-dev`）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-30T15:57:07.043

在 Kubuntu 20.04 上安装时，请遵循 INSTALL 中的步骤：

做：

cd build_dir cmake source_dir make install

使用 -DCMAKE_INSTALL_PREFIX=/usr/local/eigen-3.4.0 和 sudo FindEigen3.cmake 未安装。但是，使用

设置（Eigen3_DIR“/usr/local/eigen/share/eigen3/cmake”）

似乎工作。FindEigen3.cmake 位于构建目录中，但未复制到安装目录树中。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-12-05T20:31:03.110

另一种简单的方法是：

如果 Eigen 库位于 /opt/eigen/3.3/Eigen

`include_directories(/opt/eigen/3.3)`

这相当于 Jai 的建议

```
set(EIGEN_DIR "/opt/eigen/3.3")
include_directories(${EIGEN_DIR}) 
```

# wcf - 枚举 WCF 服务器端点？

> ID：12249143
> 
> 赞同：0
> 
> 时间：2012-09-03T13:48:08.300
> 
> 标签：wcf

如何枚举我的 WCF 服务正在侦听的端点？我发现了几篇博文列举了已配置的端点（通过查看 App.config），但这并没有帮助。

我正在托管一个以编程方式配置自身的 WCF 服务，并且我想获取它正在侦听的端点列表，以便写入日志文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:01:34.410

```
var serviceHost = new ServiceHost(...);
var endpoints = serviceHost.Description.Endpoints; 
```

# json - 卷曲响应/github oauth

> ID：12249147
> 
> 赞同：1
> 
> 时间：2012-09-03T13:48:15.503
> 
> 标签：json, bash

我正在尝试在 bash 脚本中对 github 使用 OAUTH 身份验证。

这个：

```
curl -u $USER_NAME --silent -d '{"scopes":["repo"]}' \
    https://api.github.com/authorizations 
```

工作，结果我得到这样的回应：

```
"created_at": "2012-09-03T13:02:30Z",
"token": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
"updated_at": "2012-09-03T13:02:30Z",
"note_url": null,
"note": null,
"url": "https://api.github.com/authorizations/620793",
"app": {
    "url": "http://developer.github.com/v3/oauth/#oauth-authorizations-api",
    "name": "GitHub API"
},
"id": 620793,
"scopes": [
    "repo"
] 
```

但我需要将`"token":`' 值保存在变量中以备将来使用。我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:52:54.683

你可以使用 sed 和 grep 来得到你想要的：

```
curl -u $USER_NAME --silent -d '{"scopes":["repo"]}' "https://api.github.com/authorizations" | grep '"token":' | sed 's/.*:\s\+"\([^"]\+\).*/\1/g' 
```

我尝试设置建议工具 jsawk 以在此处发布另一个替代方案，但 jsawk 需要 spidermonkey-bin，现在您无法在 ubuntu 中获取 spidermonkey-bin，并且打包了此文件的 PPA 不再拥有它。现在您需要从源代码编译。太麻烦了，得到一个稍微清洁的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:00:10.477

我这样做是为了从不同的 json 响应中获取某些数据：

```
yourcodehere | grep token | awk '{ print $2 }' | sed s/\"//g | sed s/,//g) 
```

类似于 Onilton 所做的，但只是使用 awk 从该行中获取第二项，使用 sed 去除引号和逗号。我相信（可能不止一个）至少有一个 json 库或用于 bash 的东西来解析它以获得你想要的变量，但我什至没有看过它。我并不是说这比 Onilton 的方法更好，而只是另一种选择。有用。如果我有更好的 awk fu，我可能可以用 awk 完成这一切，并且不需要 sed，但我不需要。

# python - 如何记录每个请求的 Django 应用程序的内存使用情况

> ID：12249150
> 
> 赞同：19
> 
> 时间：2012-09-03T13:48:34.190
> 
> 标签：python, django, apache, memory-leaks

您知道记录每个请求的 django 应用程序的内存使用情况的有效方法吗？

我有一个 apache/mod_wsgi/django 堆栈，它通常运行良好，但有时一个进程最终会占用大量内存。服务器最终内存不足，交换了很多，并且服务速度大大减慢。

这种情况很难解决，因为我不知道该行为应该归咎于哪个请求，我无法重现它。

我想在生产中部署一些东西，以最小的开销记录每个请求之前和之后进程的内存使用情况。

* * *

在我开始重新发明轮子之前，我的 djangoists 社区是否知道任何现有的解决方案来解决这个问题？建议、中间件、片段或可能是 apache 日志配置赞赏。

我不需要的（我认为）是：

*   一套开发阶段的分析/调试工具，我已经知道一些，如果我知道要分析/调试什么，我会使用它们，看起来有点太多了，永远监控生产中运行的服务。最重要的是，这些 tol 通常显示的是代码碎片的 mem 使用报告，这将有助于查明错误的请求。
*   关于如何优化 django 应用程序的内存使用的一般建议，读起来总是很好，但这里的想法是“如何有效地跟踪需要优化的请求”。

我最接近的搜索结果：

*   [Django / WSGI - 如何分析部分请求？我的分析工具是按请求进行的，但在此之前应用程序内存不足](https://stackoverflow.com/questions/11348611/django-wsgi-how-to-profile-partial-request-my-profiling-tools-are-per-reque)
*   [每次请求都会增加 Django 内存使用量](https://stackoverflow.com/questions/2293333/django-memory-usage-going-up-with-every-request)
*   [每个请求的平均 php 内存使用量？](https://stackoverflow.com/questions/1749400/average-php-memory-usage-per-request)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-03T21:48:57.273

用于跟踪内存使用情况并立即生成可用结果的 Django 中间件需要挂钩进程请求和进程响应。换句话说，查看请求的开始和结束之间的差异，如果超过某个阈值，则记录警告。

一个完整的中间件示例是：

```
import os
import psutil
import sys

THRESHOLD = 2*1024*1024

class MemoryUsageMiddleware(object):

    def process_request(self, request):
        request._mem = psutil.Process(os.getpid()).memory_info()

   def process_response(self, request, response):
        mem = psutil.Process(os.getpid()).memory_info()
        diff = mem.rss - request._mem.rss
        if diff > THRESHOLD:
            print >> sys.stderr, 'MEMORY USAGE %r' % ((diff, request.path),)
        return response 
```

这需要安装“psutil”模块来进行内存计算。

是蛮力，可能导致多线程系统中的误报。由于延迟加载，您还会看到它在加载内容时针对新进程的前几个请求触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:04:03.420

这可能无法完全涵盖您的问题，但我建议尝试使用 nginx+uwsgi 而不是 apache2+mod_wsgi。在我的测试中，它变得更加稳定（mod_wsgi 在某些时候完全窒息），速度更快并且使用的内存更少（它可能完全解决了您的所有问题）。

关于跟踪内存使用情况，可以创建一个简单的中间件：

```
class SaveMemoryUsageMiddleware(object):
    def process_response(self, request, response):
        # track memory usage here and append to file or db
        return response 
```

并将其添加到您的中间件中。

对于内存跟踪代码，我建议查看： [Python 进程使用的总内存？](https://stackoverflow.com/questions/938733/total-memory-used-by-python-process)

但是，如果您可以避免在生产环境中执行此操作，可能会更好。只是为了开发和测试来追踪真正的问题。

# ios - NSFetchedResultsController：需要文档说明

> ID：12249151
> 
> 赞同：0
> 
> 时间：2012-09-03T13:48:38.853
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsfetchrequest

我需要 Apple 文档中的一些说明

> 提取请求必须至少有一个排序描述符。如果控制器生成节，则数组中的第一个排序描述符用于将对象分组为节；它的键必须与 sectionNameKeyPath 相同，**或者使用其键的相对顺序必须与使用 sectionNameKeyPath 的顺序匹配**。

我通过`NSFetchedResultsController`以下方式使用 with 部分

```
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:mainContext
                                      sectionNameKeyPath:@"paymentDate"
                                               cacheName:nil]; 
```

正如我从文档中了解到的那样，`NSFetchRequest`我传入的`NSFetchedResultsController`必须至少是一个排序描述符。但是由于我使用部分，所以排序描述符必须如下所示：

```
[fetchRequest setSortDescriptors:[NSArray arrayWithObjects:
        [NSSortDescriptor sortDescriptorWithKey:@"paymentDate" ascending:YES],
        [NSSortDescriptor sortDescriptorWithKey:@"paymentCode" ascending:YES],
        nil]]; 
```

如果我使用排序描述符，例如

```
[fetchRequest setSortDescriptors:[NSArray arrayWithObjects:
        [NSSortDescriptor sortDescriptorWithKey:@"paymentCode" ascending:YES],
        nil]]; 
```

我收到如下错误

> NSFetchedResultsController 错误：索引 X 处获取的对象的节名 Y 乱序。对象必须按节名排序'

就我而言，使用`[NSSortDescriptor sortDescriptorWithKey:@"paymentDate" ascending:YES]`，它可以让我克服这个问题。也许我只是幸运；）。

但是，这是什么意思，**或者使用其键的相对排序必须与使用 sectionNameKeyPath 匹配**？你能给我一个解释吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:12:49.740

如果您使用部分，则 FRC 需要知道如何对数据数组进行排序，以便它可以按部分对所有结果进行分组。因此，无论您在获取请求中指定为第一个排序描述符的任何内容，都必须与您的部分的分组方式相匹配，以便 FRC 可以正确执行此操作。

您不必指定它们的确切字段，但排序顺序应该相同。

例如，如果您的第一个排序描述符将按部分对数组进行分组，即使它没有引用该部分，那么它会很好。在大多数情况下，您应该明确指定您的 section 属性，以消除 FRC 混淆的任何可能性——否则它将引发异常。

**编辑**

例如，假设您有两个排序描述符：`sd1`和`sd2`. `sd1`使用与在 中提供给 FRC 相同的密钥`sectionNameKeyPath`。 `sd2`使用不同的密钥。

当您对整个数组进行排序时，如果它们都生成将实体分组在相同部分中的最终数组，那么您可以使用`sd1`或`sd2`作为第一个排序描述符。

基本上，他们 FRC 将根据实体将实体分组为部分，`sectionNameKeyPath` 因此它可以确定有多少部分，以及每个部分中有多少行。因此，它作为输入得到的数组必须被分类到类似的分组中，相对于`sectionNameKeyPath`.

当它遍历数组时，它会查看`sectionNameKeyPath`并期望看到特定数量的具有相同 的条目`sectionNameKeyPath`。因此，必须对数组进行排序以将所有部分保持在一起。

如果您可以在不指定与第一个排序描述符相同的键的情况下完成此操作，那么一切都会正常工作。如果不是，那么您应该使用与第一个排序描述符相同的节键。

# java - 如何在java中获取目录的最后修改日期和时间

> ID：12249155
> 
> 赞同：8
> 
> 时间：2012-09-03T13:49:02.520
> 
> 标签：java, windows, filesystems, metadata

*看，问题是在Java*中，我们可以通过`filename.lastModified()`. 但在 Windows 中，发生的情况是，每当修改文件时，只会修改该文件的日期和时间，而不是整个文件夹的日期和时间。所以我想知道最后一次使用Java在该文件夹中修改一个文件是什么时候？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T14:04:49.047

`lastModified()`在目录的[文件](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28%29)中找到最新的（最大的），或者如果没有，则使用目录本身：

```
public static Date getLastModified(File directory) {
    File[] files = directory.listFiles();
    if (files.length == 0) return new Date(directory.lastModified());
    Arrays.sort(files, new Comparator<File>() {
        public int compare(File o1, File o2) {
            return new Long(o2.lastModified()).compareTo(o1.lastModified()); //latest 1st
        }});
    return new Date(files[0].lastModified());
} 
```

仅供参考，此代码已经过测试（并且可以正常工作）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-14T11:05:04.953

我编写了一小段代码，它在所有子目录中进行递归搜索并返回最新的修改日期。它会进行深度搜索，因此您可能不想在根目录左右运行它。这是代码（我没有严格测试过）：

```
private static long getLatestModifiedDate(File dir) {
    File[] files = dir.listFiles();
    long latestDate = 0;
    for (File file : files) {
        long fileModifiedDate = file.isDirectory() 
                ? getLatestModifiedDate(file) : file.lastModified();
        if (fileModifiedDate > latestDate) {
            latestDate = fileModifiedDate;
        }
    }
    return Math.max(latestDate, dir.lastModified());
} 
```

它假定提供`File`的是一个目录，并且还返回一个`long`not a`Date`本身。如果需要（通常不需要），您可以使用的构造函数转换`long`为。`Date``Date`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-08T14:38:18.107

这是`Java 7`使用[`FileTime`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/FileTime.html)and的解决方案[`Path`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)：

```
import java.io.IOException;
import java.nio.file.*;
import java.nio.file.attribute.BasicFileAttributes;
import java.nio.file.attribute.FileTime;
import java.text.SimpleDateFormat;

import static java.nio.file.FileVisitResult.CONTINUE;

public class NewestFileVisitor extends SimpleFileVisitor<Path>
{
    private FileTime newestFileTime;
    private String targetExtension;

    public NewestFileVisitor(String targetExtension)
    {
        this.newestFileTime = FileTime.fromMillis(0);
        this.targetExtension = targetExtension;
    }

    @Override
    public FileVisitResult visitFile(Path filePath, BasicFileAttributes basicFileAttributes) throws IOException
    {
        if (filePath.toString().endsWith(targetExtension))
        {
            FileTime lastModified = Files.getLastModifiedTime(filePath);

            // Newer?
            if (lastModified.compareTo(newestFileTime) > 0)
            {
                newestFileTime = lastModified;
            }
        }

        return CONTINUE;
    }

    public String getLastModified()
    {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("MM/dd/yyyy hh:mm a");
        long milliseconds = newestFileTime.toMillis();

        return simpleDateFormat.format(milliseconds);
    }
} 
```

用法：

```
String folder = "...";
NewestFileVisitor fileVisitor = new NewestFileVisitor(".txt");
Files.walkFileTree(Paths.get(folder), fileVisitor);
System.out.println(fileVisitor.getLastModified()); 
```

示例输出：

```
07/08/2016 04:32 PM 
```

这是从[这里](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)的 Oracle 教程中得出的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-17T03:01:50.593

我相信这样您将无法获得文件夹的正确修改日期，因为有时会创建/修改文件然后从文件夹中删除。

然后上面的逻辑将仅根据文件夹中存在的文件显示最后修改日期。它不会考虑被删除的那个。

因此，当您比较 java 程序和操作系统的上次修改日期时，它可能会有所不同。

恕我直言，我们应该查询操作系统以获取文件夹的最后修改日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T13:58:49.013

好吧，如果它是系统或文件系统记录更新的方式，那么您可能需要在目录中执行递归循环。对于目录和任何子目录中的每个文件，执行`lastModified`并保留最新的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T13:59:04.800

在我看来，你可以写这样的东西（未经测试）：

```
long latestModified = 0;
File[] files = directory.listFiles();
for(File file : files) {
    if (latestModified < file.lastModified()) {
        latestModified = file.lastModified();
    }
} 
```

`latestModified`是您可以使用的变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T13:54:47.733

如果您使用的是[Java7](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)，则可以使用 WatchService。

# python - matplotlib：如何注释补丁/楔形

> ID：12249156
> 
> 赞同：1
> 
> 时间：2012-09-03T13:49:09.807
> 
> 标签：python, matplotlib

我需要绘制一个环形图（如[gnome baobab](http://www.marzocca.net/linux/baobab/baobab-ringschart.html)）。

目前我或多或少是这样做的：

```
patches = [
    Wedge((0.5,0.2), .4,  0, 45,  width=0.10, color='r'),
    Wedge((0.5,0.2), .3, 30, 120, width=0.10, color='g'),
    Wedge((0.5,0.2), .2, 60, 180, width=0.10, color='b'),
]

for p in patches:
    ax.add_patch(p) 
```

你可以看到这样我可以指定每个环部分的颜色。现在我需要为每个环部分设置一个标签；我想我可以在（x，y）楔形位置注释斧头。

我怎样才能得到每个楔子的中心位置？有没有更好的办法？

# java - 在java中调用随机类的随机方法

> ID：12249157
> 
> 赞同：1
> 
> 时间：2012-09-03T13:49:12.820
> 
> 标签：java, class, dynamic, reflection

我正在开发一个具有培训课程的培训计划，该培训课程具有返回随机方法（一种锻炼类型）的函数。

这个通用类由一些特定类扩展，其中包含不同类型的练习。

然后我创建了一个特定类的数组，并想随机选择一个，然后调用随机练习方法。

这是通用类

```
public class TrainingClasses {
Method[] mMethods;
Random randomGenerator; 
 public void TraningClasses() {
    randomGenerator = new Random();

    /* Store methods */
    mMethods= getClass().getDeclaredMethods();

}

 public void RandomExercise() {
    Random randGenerator = new Random();
    int rnd = randGenerator.nextInt(mMethods.length);

mMethods[rnd].invoke(this);

} 
```

这是特定培训课程的示例

```
 public class MatheMagic extends TrainingClasses{

public MatheMagic() { 
/*Something*/
 }

public String[] SomeExercise() { 
    /*Some code */
 }

public String[] SomeOtherExercise() { 
    /*Some code */
 }      
} 
```

在主要活动的这一点上，我想这样做：

```
private Object[] mTrainingClasses; 
private MatheMagic mMathMag;
/*eventually other training classes*/
mMathMag = new MatheMagic();
mTrainingClasses[0] = mMathMag;

Random randGenerator = new Random();
int rnd = randGenerator.nextInt(mTrainingClasses.length);
Object aTrain = mTrainingClasses[rnd];

/*Return exercise*/
String[] mRes = aTrain.RandomExercise(); 
```

这是代码的相关部分，现在仍然不完整......但是当我尝试存储动态调用方法的结果时，由于出现类型不匹配错误，我无法继续。很可能是项目结构不正确，我应该使用其他架构......但是，我还没有找到更好的主意。

感谢任何能够提供帮助的人。

–––––––––––––––––––––––––––––––––––––––––––––––––––––––––––</p >

谢谢你们的答案。这是可能需要的人的最终工作代码：

```
/** Common interface for all exercises */ 
public interface Exercise {
  public String[] run();
} 

/** Common interface for all training classes */
public abstract class TrainingClass {

  private Random rand = new Random();
  public ArrayList<Exercise> mExerciseTypes = new ArrayList<Exercise>();

  /** Run a random exercise */
  public String[] runRandomExercise() {
    int i = rand.nextInt(mExerciseTypes.size());
    return mExerciseTypes.get(i).run();
  }

}

/*Specific training class*/

public class MatheMagic extends TrainingClass {

 public MatheMagic() {

        class SomeExercise implements Exercise {

            public String[] run() {

                 String[] mRes = new String[2];
                  mRes[0] = "Question type 1";
                  mRes[1] = "Answer type 1";
                return mRes;
            }

        }

        class SomeOtherExercise implements Exercise {

            public String[] run() {

                 String[] mRes = new String[2];
                  mRes[0] = "Question type 2";
                  mRes[1] = "Answer type 2";
                return mRes;
            }

        }
        SomeExercise mN = new SomeExercise();

        SomeOtherExercise mS = new SomeOtherExercise();

        mExerciseTypes.add(mN);
        mExerciseTypes.add(mS);
 }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:10:45.697

我认为您可能应该重新考虑您的设计。在大多数情况下，通常应避免使用反射。只有当您动态加载和执行代码时才真正需要反射（例如，JUnit 框架在名称作为命令行参数传递的类中动态加载和执行测试）。

我建议不要在一个类中随机执行一个方法，而是创建一个`Exercise`具有公共接口的对象集合，随机选择其中一个然后运行它。这是我在想的一些骨架代码：

```
import java.util.ArrayList;
import java.util.Random;

/** Common interface for all training classes */
public abstract class TrainingClass {

  private Random rand = new Random();
  protected ArrayList<Exercise> exercises = new ArrayList<Exercise>();

  /** Run a random exercise */
  public String[] runRandomExercise() {
    int i = rand.nextInt(exercises.size());
    return exercises.get(i).run();
  }

}

/** Common interface for all exercises */ 
public interface Exercise {
  String[] run();
}

public class MatheMagic extends TrainingClass {

  /** Constructor creates all the exercises */
  public MatheMagic() {
    // Some exercise
    exercises.add(new Exercise {
      public String[] run() {
        // Code for some exercise ...
      }
    });
    // Some other exercise
    exercises.add(new Exercise {
      public String[] run() {
        // Code for some other exercise ...
      }
    });
    // etc ...
  }

} 
```

因为所有的练习都是类型的`Exercise`并且有一个共同的`run()`方法，所以不需要使用反射。声明有点冗长，因为您需要为每个练习创建一个*[匿名内部类](http://www.clear.rice.edu/comp310/JavaResources/anon_inner.html)*，但是为了避免反思，额外的冗长是值得的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:58:30.507

如果您手动创建训练类数组（即不是通过反射），您可以将保存类的数组类型更改为：

```
private TrainingClasses[] mTrainingClasses; 
```

以及您随机选择的课程类型：

```
TrainingClasses aTrain = mTrainingClasses[rnd]; 
```

这应该允许您`RandomExercise`在`aTrain`.

# java - 从 7:45 到 17:15 每 30 分钟用石英安排一次

> ID：12249168
> 
> 赞同：3
> 
> 时间：2012-09-03T13:49:45.253
> 
> 标签：java, cron, scheduling, quartz-scheduler

我在用石英安排我的工作时遇到问题......我找不到让我每半小时从 7:45 到 17:15 运行我的工作的表达式......我试过这个

```
 0 15/30 7-17 ? * * * 
```

但它在 17:45 触发，我不想要它。有没有人知道在不拆分表达式的情况下做到这一点的任何方法？我知道这些表达

```
 0 15 8-17 ? * * *
    0 45 7-16 ? * * * 
```

会合适，但如果可能的话，我宁愿使用一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:32:33.760

表达式**0 45/30 07-17 * * ?** 每 30 分钟触发一次，每天 7:45 开始，17: **45**结束。在我看来，仅使用**一个**cron 表达式来安排工作在 7:45 开始并在**17:15**结束是不可能的。

 **谢谢**

# asp.net-mvc - HTML.HiddenFor 值集

> ID：12249171
> 
> 赞同：54
> 
> 时间：2012-09-03T13:49:54.237
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html-helper, html.hiddenfor

```
@Html.HiddenFor(model => model.title, new { id= "natureOfVisitField", @value = '@Model.title'}) 
```

它不起作用！如何设置值？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-05-02T05:08:45.513

要在隐藏字段中设置值，请按以下方式进行：

```
@Html.HiddenFor(model => model.title, 
                new { id= "natureOfVisitField", Value = @Model.title}) 
```

它会工作

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-02-12T10:34:28.047

奇怪，但是，试试`@Value`，大写`"V"`

例如（在 MVC4 上工作）

```
@Html.HiddenFor(m => m.Id, new { @Value = Model.Id }) 
```

更新：

发现@Value（大写 V）正在创建另一个带有“Value”和“value”的属性，使用小的 @value 似乎也有效！

需要查看 MVC 源代码才能找到更多信息。

* * *

**更新，在了解了它的内部工作原理之后：**

首先忘记所有这些解决方法（为了保持连续性，我一直保留在这里），现在看起来很傻:)

基本上，它发生在发布模型并将模型返回到同一页面时。

使用以下代码片段在 InputHelper 方法 (InputExtensions.cs) 中访问该值（并形成 html）

```
string attemptedValue = (string)htmlHelper.GetModelStateValue(fullName, typeof(string)); 
```

GetModelStateValue 方法（在 Htmlelper.cs 中）将值检索为

```
ViewData.ModelState.TryGetValue(key, out modelState) 
```

这是问题所在，因为该值是从`ViewData.ModelState`字典中访问的。这将返回从页面发布的值而不是修改后的值！！

即，如果您发布的变量值（例如 Person.Id）为 0，但您在 httpPost 操作中设置了值（例如 Person.Id = 2），则 ModelState 仍保留旧值“0”，并且**尝试**值包含“0” ！所以渲染页面中的字段将包含“0”作为值！

如果您将模型返回到同一页面，解决方法：从 ModelState 中清除项目，

例如

```
ModelState.Remove("Id"); 
```

这将从字典中删除该项目，并且 **ViewData.ModelState.TryGetValue(key, out modelState) 返回 null** ，并且下一条语句（在 InputExtensions.cs 中）采用传递给 HiddenFor(m => m.Id的实际值 ( **valueParameter** ) )

这是在 InputExtensions.cs 的以下行中完成的

```
tagBuilder.MergeAttribute("value", attemptedValue ?? ((useViewData) ? htmlHelper.EvalString(fullName, format) : valueParameter), isExplicitValue); 
```

**概括：**

使用以下命令清除 ModelState 中的项目：

```
ModelState.Remove("..."); 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-09-03T13:51:25.793

您不需要在 attributes 参数中设置值。MVC 应该会自动为您绑定它。

```
@Html.HiddenFor(model => model.title, new { id= "natureOfVisitField" }) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-03T13:53:40.237

它只是价值，而不是@value.. 试试看。我不确定@Model.title，也许它只是Model.title

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-03T18:25:16.060

解决这个问题是因为我最近在尝试将相关属性添加到现有实体时遇到了这个问题。我刚刚完成了一个很好的扩展方法：

```
 public static MvcHtmlString HiddenFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, TProperty value)
    {
        string expressionText = ExpressionHelper.GetExpressionText(expression);
        string propertyName = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(expressionText);

        return htmlHelper.Hidden(propertyName, value);
    } 
```

像这样使用：

```
@Html.HiddenFor(m => m.RELATED_ID, Related.Id) 
```

请注意，这与内置的 HiddenFor 具有相似的签名，但使用通用类型，因此如果 Value 的类型为 System.Object，您实际上将调用框架中内置的类型。不知道为什么要在视图中编辑 System.Object 类型的属性...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-13T13:35:35.787

当您尝试设置的“事物”是关键字 c# 时，使用指定 HtmlAttributes 时的 @ 符号。所以例如单词类，你不能指定类，你必须使用@class。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-10-26T09:57:07.247

你可以这样做

```
@Html.HiddenFor(model=>model.title, new {ng_init = string.Format("model.title='{0}'", Model.title) }) 
```

# javascript - 在路线上使用 mousemove 获取鼠标坐标

> ID：12249178
> 
> 赞同：3
> 
> 时间：2012-09-03T13:50:23.610
> 
> 标签：javascript, google-maps, google-maps-api-3

在普通的谷歌地图上，我可以使用以下代码获取并显示鼠标点的地理坐标：

```
google.maps.event.addListener(map, "mousemove", function(event) {
  document.getElementById('message').innerHTML =
  'Geographical Coordinates: ' + event.latLng.lat() + ', ' + event.latLng.lng();
}); 
```

如果我使用 google 路线 API 计算路线并将鼠标移动到显示的路线上，则不会触发“mousemove”事件。当鼠标指针在路线上时，如何获取坐标？

我在[jsfiddle](http://jsfiddle.net/BYBK8/1/)上有一个正在运行的示例。当您使用鼠标跟随路线时，坐标不会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-05T11:28:04.850

这是一个在光标位置移动引导工具提示的示例：

```
 google.maps.event.addListener(poly,"mousemove",function(e){

        var _tooltipPolys = $("#tooltipPolys");
        if(_tooltipPolys.length == 0) {
            _tooltipPolys = $(' \
                <div id="tooltipPolys" class="tooltip top" role="tooltip"> \
                    <div class="tooltip-arrow"></div> \
                    <div class="tooltip-inner"></div> \
                </div> \
            ');
            $("body").append(_tooltipPolys);
            $("div.tooltip-inner", _tooltipPolys).text(this.title);
            _tooltipPolys.css({
                "opacity": ".9",
                "position":"absolute"
            });
        }

        var pageX = event.pageX;
        var pageY = event.pageY;
        if (pageX === undefined) {
            pageX = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
            pageY = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;
        }

        // Update the current tooltip position each time the cursor moves
        _tooltipPolys.css({
            "top":(pageY - _tooltipPolys.height() - 10)+"px",
            "left":(pageX - (_tooltipPolys.width() / 2))+"px"
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:10:42.417

我知道将鼠标悬停事件添加到路线本身的唯一方法是绘制折线（以便您可以访问它），然后向其添加鼠标悬停事件。

[例子](http://www.geocodezip.com/v3_directions_mouseover.html)

# python - 在 Python 中保护可变对象不被更改

> ID：12249179
> 
> 赞同：0
> 
> 时间：2012-09-03T13:50:36.310
> 
> 标签：python, global-variables

我正在尝试在这里进行一些防御性编程，以避免对象以不容易调试的方式更改状态，因此鉴于在 Python 中以下可能有一种方法可以保护 Foo.name 不被更改，以便强制我更明确地做到这一点？

```
class A(object):
    def __init__(self, foo):
        self.foo = foo

class B(object):
    def __init__(self, foo):
        self.foo = foo

    def rename(self, new_name):
        self.foo.name = new_name

class Foo(object):
    def __init__(self, name):
        self.name = name

if __name__ == '__main__':
    foo = Foo('Fooname')
    print 'A foo instance is born and baptized as %s' % foo.name
    ainstance = A(foo)
    print 'The foo instance is then passed to A and is still called %s' % foo.name
    binstance = B(foo)
    print 'But then the foo instance is passed to B'
    binstance.foo.name = 'Barname'
    print 'And in B it is renamed to %s' % foo.name 
```

这输出：

```
A foo instance is born and baptized as Fooname
The foo instance is then passed to A and is still called Fooname
But then the foo instance is passed to B
And in B it is renamed to Barname 
```

我知道我可以实现一个重命名 Foo 的方法，我可以强迫自己使用或者我可以使用名称修改，但这实际上仍然不能阻止我无意中更改`foo.name`，即使它被调用`foo._name`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:56:50.423

您可以像这样拦截任意属性的设置：

```
class Foo(object):
    def __init__(self, name):
        self.name = name

    def __setattr__(self, attrname, value):
        print "Intercepted: " + attrname + " attribute of Foo set to " + value
        super(Foo, self).__setattr__(attrname, value) 
```

每当有人设置`Foo`实例的任何属性时，它都会告诉您。显然，如果有人在意外时间设置了属性，您可以做任何您喜欢的事情`__setattr__`，包括终止程序。

[属性](http://www.python.org/download/releases/2.2/descrintro/#property)是对单个属性执行此操作的一种更简洁的方法：

```
class Foo(object):
    def __init__(self, name):
        self.__name = name

    def getname(self):
        return self.__name

    def setname(self, name):
        print "Intercepted: name attribute of Foo set to " + name
        self.__name = name

    name = property(getname, setname) 
```

但`__setattr__`允许您从一个地方截取所有属性设置。

# javascript - 使用流沙进行 jQuery 过滤

> ID：12249181
> 
> 赞同：0
> 
> 时间：2012-09-03T13:50:38.233
> 
> 标签：javascript, jquery, filter, quicksand

我用的是流沙的例子

[http://razorjack.net/quicksand/demos/one-set-clone.html](http://razorjack.net/quicksand/demos/one-set-clone.html)

它工作得很好。

但是他使用了一个过时的 jquery 版本。

```
<script src="../scripts/assets/jquery-1.4.1-and-plugins.min.js" type="text/javascript"></script> 
```

我尝试添加 JQuery + Quicksand 插件，但它完全停止工作。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
 <script src="http://cdn.jsdelivr.net/quicksand/1.2.2/jquery.quicksand.js" type="text/javascript"></script> 
```

如果单击过滤器，我会收到以下错误消息。

```
Uncaught TypeError: Object #<Object> has no method 'easeInOutQuad' jquery.min.js:2
cY.run jquery.min.js:2
i jquery.min.js:2
p.fx.timer jquery.min.js:2
cV jquery.min.js:2
p.fn.extend.animate.g jquery.min.js:2
p.extend.dequeue jquery.min.js:2
p.fn.extend.queue jquery.min.js:2
p.extend.each jquery.min.js:2
p.fn.p.each jquery.min.js:2
p.fn.extend.queue jquery.min.js:2
p.fn.extend.animate jquery.min.js:2
$.fn.quicksand jquery.quicksand.js:303
p.extend.each jquery.min.js:2
p.fn.p.each jquery.min.js:2
$.fn.quicksand jquery.quicksand.js:47
(anonymous function) one-set-clone.html:182
p.event.dispatch jquery.min.js:2
p.event.add.g.handle.h 
```

我试图删除`easing: 'easeInOutQuad'`，但没有任何反应。

知道出了什么问题吗？

更新1：

我想我只是错过了一个插件

```
<script src="http://cdn.jsdelivr.net/jquery.easing/1.3/jquery.easing.1.3.js" type="text/javascript"></script> 
```

但是现在如果我单击过滤器，一切都会隐藏起来，他们是否更改了 API？

# shopify - Shopify 批量 API 重定向

> ID：12249187
> 
> 赞同：0
> 
> 时间：2012-09-03T13:50:55.553
> 
> 标签：shopify

通过 HTTP 客户端使用 POST，我们在使用我们创建的私有应用程序通过 Shopify API 向我们的商店添加一些重定向时遇到了一些麻烦。

```
https://apikey:password@hostname/admin/redirects.xml 
```

我们收到 HTTP/1.1 400 错误请求，错误如下：

```
<error>Extra content at the end of the document</error> 
```

已尝试从 Shopify API 输入示例代码：http: [//api.shopify.com/redirect.xml.html#create](http://api.shopify.com/redirect.xml.html#create)

```
POST /admin/redirects.xml HTTP/1.1
Content-Type: application/xml

<?xml version="1.0" encoding="UTF-8"?>
<redirect>
  <path>/ipod</path>
  <target>/pages/itunes</target>
</redirect> 
```

如果我们一次做一个重定向，如果我们有多个重定向，那么它会失败，你如何批量重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:06:01.873

您一次只能创建一个，您需要循环并为每个发送一个请求。

# php - 动力产生破座

> ID：12249189
> 
> 赞同：1
> 
> 时间：2012-09-03T13:51:00.807
> 
> 标签：php

我正在做一个关于公共汽车旅行的问题。现在我遇到的问题是，我现在使用行程表信息来生成每 12 点的时间表。我的日程表与座位表和公共汽车表相连。所以它使座位有`bus_id`和`schedule_id`。如果我更新一个`seat_status`坏的。但是我的旅行不知道公共汽车座位是否坏了，除非我得到了`seat_status`之前的时间表`seat_status`。所以我想知道是我的数据库有问题还是我查看它的方式有问题。

座位有seat_id、seat_row、seat_col、seat_status、bus_id、schedule_id。我会将 seat_status 更新为 0（可用）1（不可用）2（损坏）。但我的行程是使用查询生成的

```
$row=array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W",‌​"X","Y","Z"); 
for($i=0; $i<(get_TotalSeat($s["bus_id"])/4); $i++)
 { 
for($x=1; $x<=4; $x++) 
{ 
mysql_query("insert into seat(seat_row,seat_col,seat_status,bus_id,schedule_id)values('$row[$i]','$x','0'‌​,'$s[bus_id]','$s[s_id]')"); 
}
 } 
```

不知道怎么得到哪个bus哪个座位坏了，seat_status = 2，在生成的时候插入seat_status是2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:00:57.443

您正在寻找以下方面的模型：

```
table    buses
columns  id, name

table    seats
columns  id, bus_id, row, number, status

table    schedules
columns  id, bus_id, start_time, end_time, info

table    seats_schedules
columns  id, schedule_id, seat_id, status 
```

您可以使用该`seats_schedules`表记录特定日程中每个座位的状态。

# xml - 如何使用 XSL 删除 XML 中的一个子标签

> ID：12249193
> 
> 赞同：1
> 
> 时间：2012-09-03T13:51:09.193
> 
> 标签：xml, xslt

我有一个如下所示的 xml。我需要您的帮助来转换以下 xml 以删除所有命名空间以及“返回”标签。感谢有人为我提供了正确的 xsl。

我厌倦了尝试几件事。

原始 XML：

```
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
<soapenv:Body>
<ns:Response xmlns:ns="http://demo.test.classes.com">
   <ns:return>
      <ns:person>
         <ns:personName></ns:personName>
         <ns:personAge></ns:personAge>
         <ns:personAddress>
            <ns:addressType>official</ns:addressType>
            <ns:addressLine1>official address line 1</ns:addressLine1>
         </ns:personAddress>
         <ns:personAddress>
            <ns:addressType>residence</ns:addressType>
            <ns:addressLine1>residence address line 1</ns:addressLine1>
         </ns:personAddress>         
      </ns:person>
   </ns:return>
</ns:Response>
</soapenv:Body>
</soapenv:Envelope> 
```

转换后的预期 XML：

```
<Response>
      <person>
         <personName></personName>
         <personAge></personAge>
         <personAddress>
            <addressType>official</addressType>
            <addressLine1>official address line 1</addressLine1>
         </personAddress>
         <personAddress>
            <addressType>residence</addressType>
            <addressLine1>residence address line 1</addressLine1>
         </personAddress>         
      </person>
</Response> 
```

这是 XSLT，我现在正在使用。但这并没有生成我需要的 xml。

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" />

    <xsl:template match="/|comment()|processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="@*|node()" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="@*">
        <xsl:attribute name="{local-name()}">
      <xsl:value-of select="." />
    </xsl:attribute>
    </xsl:template>

    <xsl:template match="Response/return" />

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:17:55.993

请记住，SOAP 不使用任何名称空间属性，因此您可以稍微简化一下。这个非常短的 XSLT 1.0 样式表可以解决问题。

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
    xmlns:ns="http://demo.test.classes.com"
    exclude-result-prefixes="xsl soapenv ns">
<xsl:output method="xml" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="*">
 <xsl:element name="{local-name()}">
  <xsl:apply-templates select="@*|node()" />
 </xsl:element>
</xsl:template>

<xsl:template match="ns:return|soapenv:Envelope|soapenv:Body">
  <xsl:apply-templates/>
</xsl:template>

</xsl:stylesheet> 
```

由于这是一个 SOAP 文档，您不太可能对评论和 PI 感兴趣。但是，如果您真的希望它们重新进入，那么调整是一件小事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:01:21.553

代替

```
<xsl:template match="Response/return" /> 
```

你需要

```
<xsl:template xmlns:ns="http://demo.test.classes.com" match="ns:return">
  <xsl:apply-templates/>
</xsl:template> 
```

这样，`ns:return`您编写的其他模板将处理 的子代和后代。

# rest - RESTful HTTP GET 上传 CSV 文件作为输入并等待 JSON/XML 格式的返回

> ID：12249194
> 
> 赞同：0
> 
> 时间：2012-09-03T13:51:10.310
> 
> 标签：rest, file-upload, http-get

是否可以使用 HTTP GET 上传文件，并等待服务器以 JSON 格式返回？

具体来说，我计划通过 HTTP GET 上传包含信息的 CSV 文件。现在一旦上传，后端模块将处理 CSV 文件中的信息，服务器将向用户发送 JSON 格式的返回。

# api - 通过 Shopify API 获取产品列表时，分页在服务器端如何工作？

> ID：12249196
> 
> 赞同：2
> 
> 时间：2012-09-03T13:51:16.053
> 
> 标签：api, shopify

场景：商店有 1000 种产品；需要全部下载。对产品的请求限制为每次调用最多 250 个产品，显然 API 可能会或可能不会返回请求的“限制”。例如，根据我的观察，limit=250 的调用可能返回少于 250 个项目。因此，要获得 1000 个产品，至少需要 4 次调用。

发出以下请求：

```
#1  GET /admin/products.xml?limit=250&page=1 (returned the first 250 products 1-250)
#2  GET /admin/products.xml?limit=250&page=2 (returned the next 250 products 251-500)
#3  GET /admin/products.xml?limit=250&page=3 (****returned only 200 products 501-700**)
#4  GET /admin/products.xml?limit=250&page=4 (****what does it return here?**) 
```

所以，问题是关于服务器上的分页，它将定义上面第 4 行中发生的情况：

1) API 是否执行智能分页，其中知道上一个请求仅返回 200 个产品，因此下一页必须返回一个以产品编号 701 开头的列表？

或者

2）它是否执行盲分页，其中对第 4 页的请求将始终以产品编号 751 开头，而不管上次调用中发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:46:55.717

使用 /admin/products/count.json 获取所有产品的数量。然后将该数字除以 250 得到总页数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-31T07:47:12.373

如果在 rails中，您可以使用[shopify api gem](https://github.com/Shopify/shopify_api)在shopify API 中传递参数，或者可以直接使用 Shopify API 发送参数。

```
ShopifyAPI::Product.find(:all, params: { page: parmas[:page], 
                                         limit: 10, 
                                         title: params[:search]
                                       }) 
```

# java - 在 Liferay 6.1 的 User_ 表中创建注册页面以创建用户帐户时出错？

> ID：12249198
> 
> 赞同：0
> 
> 时间：2012-09-03T13:51:24.233
> 
> 标签：java, jsp, web, liferay, portlet

我在 Liferay 6.1 中创建注册 portlet 并将用户帐户存储`User_`在数据库的默认表中时遇到问题。

我正在使用默认 Liferay 类`UserLocalServiceUtil`及其方法`UserLocalServiceUtil.addUser(creatorUserId, companyId, autoPassword, password1, password2, autoScreenName, screenName, emailAddress, facebookId, openId, locale, firstName, middleName, lastName, prefixId, suffixId, male, birthdayMonth, birthdayDay, birthdayYear, jobTitle, groupIds, organizationIds, roleIds, userGroupIds, sendEmail, serviceContext);`

我面临这个错误：

```
java.lang.NullPointerException
    at com.liferay.portal.security.pwd.PwdToolkitUtil.validate(PwdToolkitUtil.java:40)
    at com.liferay.portal.service.impl.UserLocalServiceImpl.validate(UserLocalServiceImpl.java:5405)
    at com.liferay.portal.service.impl.UserLocalServiceImpl.addUserWithWorkflow(UserLocalServiceImpl.java:592)
    at com.liferay.portal.service.impl.UserLocalServiceImpl.addUser(UserLocalServiceImpl.java:463)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:112)
    at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:108)
    at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:59)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:108)
    at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:59)
    at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:108)
    at com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:211)
    at $Proxy96.addUser(Unknown Source)
    at com.liferay.portal.service.UserLocalServiceUtil.addUser(UserLocalServiceUtil.java:445)
    at org.apache.jsp.register_jsp._jspService(register_jsp.java:123)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
    at com.liferay.portlet.PortletRequestDispatcherImpl.dispatch(PortletRequestDispatcherImpl.java:316)
    at com.liferay.portlet.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:105)
    at com.liferay.util.bridges.mvc.MVCPortlet.include(MVCPortlet.java:366)
    at com.liferay.util.bridges.mvc.MVCPortlet.include(MVCPortlet.java:382)
    at com.liferay.util.bridges.mvc.MVCPortlet.doDispatch(MVCPortlet.java:315)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:11:59.440

看起来您正试图从 portlet 的呈现状态直接从 jsp 调用此方法 - 您应该在呈现之前从操作状态执行此操作。在渲染期间，您不应该更改任何状态。

阅读有关 portlet 生命周期的详细信息，其中对此进行了更详细的解释。简而言之：如果您习惯于在 servlet 中从 jsps 做所有事情，那么您将不得不重新学习 portlet：action 和 render 是完全分离的状态。通常，portlet 呈现的频率比它实际处理动作的频率高得多（因为许多不同的 portlet 可以在一个页面上，所以只有一个可能会处理一个动作，而所有的 portlet 都可能显示/呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T15:26:41.510

您的 password1 或 password2 可能为空，并且 autoPassword 设置为 true。Liferay 尝试验证给定的密码，当比较空值时，会出现 NullPointerException。

# vagrant - Vagrant 错误：缺少 VT-x/AMD-V 硬件加速

> ID：12249200
> 
> 赞同：3
> 
> 时间：2012-09-03T13:51:32.393
> 
> 标签：vagrant

我想“提升”一个流浪者的盒子。但我收到以下错误：

```
VT-x/AMD-V hardware acceleration is not available on your system. Your 64-bit guest will fail to detect a 64-bit CPU and will not be able to boot. 
```

我的处理器：

```
# lshw -class processor
  *-cpu                   
       description: CPU
       product: Intel(R) Pentium(R) 4 CPU 3.20GHz
       vendor: Intel Corp.
       physical id: 4
       bus info: cpu@0
       version: Intel(R) Pentium(R) 4 CPU
       slot: U23
       size: 3200MHz
       capacity: 3200MHz
       width: 64 bits
       capabilities: fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx x86-64 constant_tsc pebs bts nopl pni dtes64 monitor ds_cpl cid cx16 xtpr lahf_lm 
```

我还尝试了`Debian squeeze 32`来自[http://vagrantbox.es](http://vagrantbox.es)的 Box 并带有相同的错误消息。

我可以尝试使用 vagrant 做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-18T04:47:10.673

如果您的 CPU 不支持 VT-x，则您无法运行来宾 64 位操作系统。如果 32 位来宾操作系统仍然没有以 vagrant up 启动，那么您应该在 Vagrantfile 中指定以下内容，以便为您的 vm 关闭硬件虚拟化：

```
config.vm.provider :virtualbox do |vb| 
  vb.customize ["modifyvm", :id, "--hwvirtex", "off"]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T12:11:59.127

检查 vagrant 后面的 VirtualBox 的日志，如果你有 VERR_VMX_IN_VMX_ROOT_MODE (Intel) 或 VERR_SVM_IN_USE (Amd) 消息，这意味着还有其他东西在使用处理器虚拟化功能。对我来说，[HAXM](http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager)就是那个丑陋的家伙（例如用于基于 x86 的 Android 模拟器）......

（我使用的是 Windows 7）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-10T16:17:59.530

我有一个类似的问题。我有一台使用 Windows 8 的旧笔记本电脑。这台机器在 BIOS 上没有 VT 配置。我的流浪汉无法运行，给了我同样的问题。我去了控制面板 - 程序和功能。然后我卸载功能“Hyper-V”。然后我就可以通过 vagrant 运行我的虚拟机了。

因为我的旧笔记本电脑甚至没有使用此功能，所以我可以使用此解决方案。

只要把这些信息放在那里，如果这对任何人都有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-28T17:14:28.647

如果（在我的情况下）这与 Hyper-V 无关，则值得检查您的 bios 设置，以防 Intel/AMD 虚拟化功能被禁用。我最近更新了我的 BIOS，似乎 VT-x 功能被禁用了。启用它可以解决问题。

请参阅 BIOS 设置部分：

[https://www.itworld.com/article/2981515/virtualization/virtualbox-diagnose-and-fix-vt-xamd-v-hardware-acceleration-errors.html](https://www.itworld.com/article/2981515/virtualization/virtualbox-diagnose-and-fix-vt-xamd-v-hardware-acceleration-errors.html)

# android - android setMargins

> ID：12249204
> 
> 赞同：0
> 
> 时间：2012-09-03T13:51:44.473
> 
> 标签：android, padding, margins

我正在开发一些秒表应用程序，与默认应用程序非常相似，我这样做只是为了确保我具备基本知识。我的问题：按下 Lap 按钮后，会创建一个新布局，并将 tvDisplay 的当前值（显示计时器的文本视图）放置在一个新的文本视图中（参见下面的代码）。它可以工作，但我想将动态添加的布局彼此分开，以使整个事情看起来更好。我试图为 nlap LinearLayout 设置填充，但它不起作用。我也没有找到 setMargins() 方法。我该怎么做才能在动态添加的线性布局之间添加一些 dp 的可用空间？

XML:

```
<ScrollView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/LapHost"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginBottom="25dp"
            android:layout_marginTop="20dp" >

             <LinearLayout
        android:id="@+id/lap"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

                 </LinearLayout>
        </ScrollView> 
```

爪哇：

```
 public void LapClick(View view) {

    LinearLayout lap = (LinearLayout) findViewById(R.id.lap);
    TextView disp = (TextView) findViewById(R.id.tvDisplay);
    TextView ms = (TextView) findViewById(R.id.timerMs);

    ScrollView.LayoutParams layoutParams = new ScrollView.LayoutParams(
            ScrollView.LayoutParams.MATCH_PARENT,
            ScrollView.LayoutParams.WRAP_CONTENT);

    LinearLayout nlap = new LinearLayout(this);
    nlap.setOrientation(LinearLayout.VERTICAL);
    nlap.setLayoutParams(layoutParams);
    nlap.setBackgroundColor(Color.parseColor("#C7C7C7"));

    TextView value = new TextView(this);
    value.setText(disp.getText().toString() + ms.getText().toString());
    value.setTextColor(Color.parseColor("#A60101"));
                value.setGravity(Gravity.CENTER);

    nlap.addView(value);
    lap.addView(nlap);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:04:07.980

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(0, 10, 0, 0); // 10 px from top 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:02:01.133

您可以通过以下方式设置边距`LayoutParams`：

```
layoutParams.topMargin = 25; 
```

# html - 设置正确的行高以避免剪切文本

> ID：12249206
> 
> 赞同：0
> 
> 时间：2012-09-03T13:51:49.007
> 
> 标签：html, css, overflow

我有一个显示`div`多*行*文本的文本，**我想避免剪切文本。**`overflow:hidden`

 ***下面是一个剪辑文本的示例：

![剪切文本示例](../Images/55cb35779d6c6af1be047599876ade8f.png)

我想在纯 CSS 中做到这一点。（没有Javascript）

如果我有固定的高度`div`，我可以`line-height`用于这个目的，就像[这样](http://jsfiddle.net/yDHUB/3/)。

但是，我`div`有`height:50%`……那么，如何在我的中尽可能多地显示*多行*`div`文本，同时避免文本剪辑？

**编辑：**目前，我正在使用[dotdotdot](http://dotdotdot.frebsite.nl/) ellipsis javascript 插件，我还测试了另一个插件（我不记得叫什么名字了）；但是它们太慢了，尤其是当有很多框要应用省略号时，尤其是在 iPad 和 Android 平板电脑上。（它们在 Windows 版 Chrome 中要快得多）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:57:58.017

将示例中#text div 的高度设置为 100%。然后它使用完整高度并在 div #container 中显示最大文本。

看到这个小提琴：[更新的小提琴](http://jsfiddle.net/yDHUB/4/)***

# node.js - 同步到 nodejs 的异步编译器

> ID：12249208
> 
> 赞同：0
> 
> 时间：2012-09-03T13:52:03.743
> 
> 标签：node.js

大约一年前，我看到一个 Node Js 包，它在 JavaScript 中添加了一些语法特性，通过以同步风格编写代码来支持异步编程。它有一个编译器，可以将代码编译成 JavaScript 异步风格。

有人知道这样的包裹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:22:52.920

你在想[IcedCoffeeScript](http://maxtaco.github.com/coffee-script/)吗？

您还可以学习使用[async](https://github.com/caolan/async)和函数，`series`并`parallel`自己编写更多看起来同步的异步代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:26:13.223

您可能会想到[kaffeine](http://weepy.github.com/kaffeine/docs/unwrapping_async_calls.html)或[streamline.js](https://github.com/Sage/streamlinejs)。

# c++ - 我需要一些 C++ 结构建议

> ID：12249209
> 
> 赞同：0
> 
> 时间：2012-09-03T13:52:08.097
> 
> 标签：c++, pointers

我有一个类 A 的实例。它有两个成员，对象 A 和对象 B。我需要创建对象 A 的一个实例（这是一个相当大的对象）和对象 B 的两个实例，然后给出两个实例对象 B 访问该对象 A。他们不需要更改对象 A，他们只需要访问它的信息。

现在，我通过将对象 A 创建为指针，将其传递给对象 B 的两个实例来完成所有工作，这两个实例都有自己的指针，然后指向内存中与对象 A 的指针相同的位置。这很好用，但我认为这是一个很大的不，不，对吧？因为一旦 A 类删除了原始指针，我就会有一些悬空指针，对吧？有一个更好的方法吗？

（仅供参考 - 对象 A 在我需要快速加载时间的程序中一次加载需要几秒钟，这就是为什么我必须只创建一个实例并将其传递给两个对象 B 而不是让对象 B 创建自己的对象 A 的实例。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:05:02.567

如果我正确地跟随你，你想要这样的东西：

```
// Class for "Object A" in your question
class Foo
{
    // ...
};

// Class for "Object B" in your question
class Bar
{
    Foo &foo_;

public:
    Bar(Foo &foo)
        : foo_(foo)
        {}
};

class A
{
    Foo foo_;
    Bar bar1_;
    Bar bar2_;

public:
    A()
        : bar1_(foo_),
          bar2_(foo_)
        {}
}; 
```

不使用指针，不使用分配，因此没有悬空指针/引用或内存泄漏。当`A`被销毁时`bar1_`，`bar2_`也会与 一起被销毁`foo_`，因此 的两个实例`Bar`也不会留​​下任何悬空引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:02:32.010

假设“B-things”的寿命不超过“它们都有一个指向的大对象”，那么当“大对象”被删除时，你就不会有一个悬空指针。

如果“A 类的一个实例”将这两个对象都作为数据成员，那么它们将同时被销毁（嗯，与它们在类中声明的顺序相反，但接近于同时） , 所以确保悬空指针永远不会被使用应该是相当容易的。

另一方面，如果你随意传递指向“大对象”的指针，将它们存储在生命周期未知的各种不同的地方，然后删除“大对象”——当然，这是一个禁忌。问题是“不择手段”——您需要保持控制并确保大对象比指向它的对象寿命长。

例如，以下是完全安全的：

```
struct Big {
    // big stuff
};

struct Little {
    Little(const Big *a) : bigthing(a) {}
    // stuff that uses bigthing
  private:
    const Big *bigthing;
};

struct Foo {
    Big onlybigthing;
    Little firstlittlething;
    Little secondlittlething;
    Foo() : 
        onlybigthing(), 
        firstlittlething(&onlybigthing), 
        secondlittlething(&onlybigthing) 
    {}
}; 
```

当然，前提是 的实例`Little`不会将其指向`Big`, 的指针分发给任何来请求它的人，然后将其存储在`Foo`对象的生命周期之外。同样`Foo`必须避免将实例的副本分`Little`发给可能存储这些实例的人（以及与它们一起的指针）。

但是你说你的类 A 有*两个*成员，而这里我有三个（一个`Big`和两个`Little`），因为你还说你创建了这两个对象的三个实例。我不明白那是什么意思。

这是另一个安全的例子：

```
int main() {
    Big big;
    Little little1(&big);
    Little little2(&big);
} 
```

这是安全的第三个示例：

```
struct Little {
    Little(const std::shared_ptr<Big> &a) : bigthing(a) {}
    // stuff that uses bigthing
  private:
    std::shared_ptr<Big> bigthing;
};

int main() {
    std::shared_ptr<Big> big(new Big());
    Little little1(big);
    Little little2(big);
    big.reset(); // release our shared ownership
    // safely do stuff using little1 and little2

    return 0;
    // on exit, little2 is destroyed first, then when little1 is destroyed
    // it releases the last shared ownership of the instance of `Big`,
    // which is destroyed.
} 
```

# ember.js - 使用 ember-data find() 和多个参数返回单个记录

> ID：12249211
> 
> 赞同：9
> 
> 时间：2012-09-03T13:52:10.240
> 
> 标签：ember.js, ember-data

我正在尝试在除 id 之外的其他参数上进行查找（使用 ember-data），实际上是两个参数。

但我得到的只是：

```
"Uncaught Error: assertion failed: Your server returned a hash with the key customer but you have no mappings". 
```

在代码中挖掘之后，我看到 find 方法在给定哈希时委托给**findQuery**方法，这会创建一个**DS.AdapterPopulatedRecordArray**但我只在我的 json 中返回一个客户对象：

```
{"customer":{
"id":24857,"name":"Kim Fransman","id_number":"XXXX","email":"email@domain.com","type":"Person"}} 
```

我可以通过将我的 json 包装在客户数组中并在我的车把视图中循环它们来解决这个问题，但这感觉非常错误。

今天有没有办法用 ember-data 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:16:30.570

我有一个类似的问题，我在这里提出了一个问题。基本上，这是 RESTAdapter 的未记录属性，您必须根据您的模型进行配置。您必须与此类似地定义它：

```
App.Store = DS.Store.extend({
  adapter: DS.RESTAdapter.create({
    bulkCommit: true,
    mappings: {
      // All your models will have to have a mapping defined,
      // like this...
      genres: 'App.Genre'
    }
  }),
  revision: 4
}); 
```

在这里检查我的问题：[Ember-Data：“映射”如何工作](https://stackoverflow.com/questions/12182866/ember-data-how-do-mappings-work)

我希望它有所帮助。

# android - Android触发特定路径

> ID：12249212
> 
> 赞同：0
> 
> 时间：2012-09-03T13:52:18.797
> 
> 标签：android, triggers, media, sd-card

我想触发媒体，但不是整个媒体（因为在某些设备上需要太多时间），我想触发的是**/mnt/sdcard/my_folder**。我正在使用触发我的媒体

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory()))); 
```

如何触发特定文件夹？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:28:15.497

“刷新或更新媒体”的正确方法是使用`MediaScannerConnection`and `scanFile()`，而不是发送应该由操作系统发送的广播。

# php - redbeanPHP 中的 postgresql 模式

> ID：12249216
> 
> 赞同：0
> 
> 时间：2012-09-03T13:52:21.260
> 
> 标签：php, postgresql, redbean

我正在从 MySQL 迁移到 PostgreSQL，我想在 PHP 中使用一些高级数据库层。RedbeanPHP 对我来说看起来真的很好，但我找不到如何使用不同的 postgres 模式。我只找到了一些[旧帖子](https://groups.google.com/forum/#!msg/redbeanorm/nPrHb5fGHw8/4Rdb0Zs-ZmYJ)，并且写到尚不支持模式，但那是 2 年前的事了。

如果 redbean 中真的不支持模式，你推荐哪一层？教义，推进还是其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:56:08.320

根据您要做的事情以及您对 Postgresql 功能的依赖程度，我建议您看看[Pomm](http://pomm.coolkeums.org)。它适用于 PHP >= 5.3 和 Pg >= 8.4

在任何情况下，无论您是否使用 ORM，您都必须重写查询以使其适应 ORM 或 Postgresql。

希望能帮助到你。

# javascript - Mongoose 查询嵌套文档或多或少某个日期

> ID：12249223
> 
> 赞同：11
> 
> 时间：2012-09-03T13:52:57.940
> 
> 标签：javascript, node.js, mongodb, mongoose

如何查询大于或小于某个日期的评论...

这是我的带有 Post 模型和 Comment 模型的架构：

```
var mongoose = require('mongoose');
var should = require('should');

mongoose.connect("localhost","test_db");

var CommentSchema = new mongoose.Schema({
  content:    {type:String},
  created_at: {type:Date, default:Date.now}

});

var PostSchema = new mongoose.Schema({
  title:    {type:String},
  content:  {type:String},
  comments: [CommentSchema]

    });

var Post = mongoose.model('Post',PostSchema);
var Comment = mongoose.model('Comment',CommentSchema);

var post = new Post({title:"hello world",comments:[{content:"1st comment"},{content:"2nd comment"}]});
// I saved it! and then I query for it

  var id = "5045d5be48af9f040f000002";
  Post.find({ _id:id,
              "comments.created_at":{ $gte:(new Date())}
                },function(err,result){
    console.log(result);
  }); 
```

我在查询嵌入式文档方面需要帮助...

好的，我编辑了我的代码以提供更多详细信息。

这将返回一个空数组。所以我想要或期望的是一个带有空评论数组的帖子。但是有了这个查询，我根本没有收到任何帖子。（当我用 $lte 交换 $gte 时，我（显然）得到了带有 2 条评论的帖子）。

但是我又该如何根据我上面的描述过滤细节呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T14:08:01.623

使用[点符号](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)进入嵌入式数组文档。例如，使用between和查询`Post`评论：`created_at``date1``date2`

```
Post.find({ "comments.created_at": { $gt: date1, $lt: date2 }}, function (err, docs) {
     ...
}); 
```

**更新**

感谢您的编辑；现在我了解到您正在尝试按`created_at`日期过滤单个帖子的评论。您不能直接使用 MongoDB 查询来执行此操作，但我相信您可以使用 2.2 聚合框架来执行此操作，如果您使用的是该版本。请查看Jira 上有关此[功能请求的讨论以获取示例。](https://jira.mongodb.org/browse/SERVER-828)

# android - 如何使用 AIR mobile 在 Android 上正确控制舞台方向？

> ID：12249226
> 
> 赞同：4
> 
> 时间：2012-09-03T13:53:18.407
> 
> 标签：android, mobile, air, device-orientation, android-orientation

我有一个希望锁定为横向的 AIR 应用程序。我从不希望应用程序旋转到纵向模式。Adobe 对这个问题的解决方案似乎是如下配置我的 *-app.xml 文件：

```
<!-- The initial aspect ratio of the app when launched (either "portrait" or "landscape"). Optional. Mobile only. Default is the natural orientation of the device -->
<aspectRatio>landscape</aspectRatio>
<!-- Whether the app will begin auto-orienting on launch. Optional. Mobile only. Default false -->
<autoOrients>false</autoOrients> 
```

这在大多数情况下都有效——但并非总是如此。例如，在某些类型的 Android 中（例如：2.x，在 Nook 平板电脑上运行），如果我的设备屏幕在 Flash Builder 打包和部署我的 APK 时关闭，则应用程序以半中断状态启动，其纵横比是横向的，但一切都是用纵向尺寸测量的。在其他设备上，例如我的 Google Nexus (Android 4.1)，应用程序可以正确启动（在横向模式下），但如果我关闭屏幕，将设备旋转到纵向模式，然后重新打开屏幕 - 我的 AIR 应用程序一直不可见再次旋转到纵向模式。更糟糕的是，甚至没有任何 StageOrientationEvent.ORIENTATION_CHANGE 事件被调度以表明这已经发生。

我尝试了上述方法的一种变体，即以编程方式设置设备方向：

```
private function onAddedToStage( event:Event ):void {
    stage.autoOrients = false;
    stage.setOrientation( StageOrientation.ROTATED_RIGHT );
} 
```

这种方法具有与上述相同的问题。

我也尝试过[这个其他 Stack Overflow 线程中提到](https://stackoverflow.com/questions/8900849/properly-preventing-orientation-change-in-flex-mobile-app)的方法。我没有禁用自动定向，而是尝试收听 StageOrientationEvent.ORIENTATION_CHANGE 并阻止设备进入纵向模式：

```
private function onAddedToStage( event:Event ):void {
    stage.addEventListener( StageOrientationEvent.ORIENTATION_CHANGE, onStageOrientationChange, true, int.MAX_VALUE );
}

private function onStageOrientationChange( event:StageOrientationEvent ):void {
    switch( event.afterOrientation ) {
        case StageOrientation.DEFAULT:
        case StageOrientation.UPSIDE_DOWN:
        case StageOrientation.UNKNOWN:
            event.preventDefault();
            break;
        case StageOrientation.ROTATED_RIGHT:
        case StageOrientation.ROTATED_LEFT:
            break;
    }
} 
```

这似乎也只在某些时候起作用。在许多情况下， event.preventDefault() 无效，并且应用程序无论如何都会旋转。

所以......我对其他 AIR 开发人员的问题是：有没有人知道可靠地将设备锁定到单一方向的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:55:13.903

这是我发现在 Android 2.3（Fire and Nook）和 4.1（Nexus 7）上对我有用的方法。我还没有测试更多的设备，但到目前为止它似乎很有希望。

首先，我将我的 -app.xml 配置设置如下：

```
<aspectRatio>landscape</aspectRatio>
<autoOrients>false</autoOrients> 
```

然后我将以下代码添加到我的 spark 应用程序中：

```
private function onAddedToStage():void {
    stage.addEventListener( Event.RESIZE, onStageResize );
    NativeApplication.nativeApplication.addEventListener( Event.ACTIVATE, onNativeApplicationActivate );
}

private function onStageResize( event:Event ):void {
    checkForOrientationChange();
}

private function onNativeApplicationActivate( event:Event ):void {
    checkForOrientationChange();
}

private function checkForOrientationChange():void {
    if ( height > width ) {
        if ( stage ) {
            stage.setOrientation( StageOrientation.ROTATED_RIGHT );
        } else {
            // The first ACTIVATE event occurs before the Application has been added to the stage
            callLater( checkForOrientationChange );
        }
    }
} 
```

# android - Android：将资源ID作为参数传递

> ID：12249227
> 
> 赞同：10
> 
> 时间：2012-09-03T13:53:21.947
> 
> 标签：android, android-resources

我有这个代码：

```
translateRight("iv1"); //iv1 is an id of an imageView

    private void translateRight(String st){

    ImageView img = (ImageView)findViewById(R.id.st);
        Animation a = AnimationUtils.loadAnimation(this, R.anim.translate_right);
        img.startAnimation(a);
    } 
```

我有“translateRight”，它是一种显示动画的方法，但在这种方法中，我应该传递一个资源 ID；我尝试了一个字符串，但它不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T13:58:19.060

资源 id - 是一个整数值。只需通过一个`int`：

```
private void translateRight(int resource){
    ImageView img = (ImageView) findViewById(resource);
    //stuff
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T13:57:11.760

资源 ID 是整数，而不是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-06T20:44:19.190

2.  第二种方法是直接传递 findViewById

    boolean tvStatus=status((CheckBox)findViewById(R.id.vn));

    ```
     public boolean status(CheckBox ch)
         {

             boolean ll=ch.isChecked() ;
             return  ll;
         } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-06T20:35:44.873

我认为可能有两种方法可以做到这一点。

1.  在方法中传递 id 名称。

这里 status 是方法， id_name 是您的 id 的名称（可以是任何东西）

你将如何收到这个？

```
 // This is how you call the method
 status(R.id.id_name)

 public boolean status(int id)
    {
      CheckBox ch = findViewById(id);
      boolean = ch.isChecked();
      return s;
    } 
```

希望如果有帮助...

# c# - Intellisense 未在 LINQ 查询上显示

> ID：12249228
> 
> 赞同：1
> 
> 时间：2012-09-03T13:53:30.173
> 
> 标签：c#, asp.net, linq, intellisense

我有以下代码用于从数据库中检索记录并将它们放入对象中。

一切正常，但 Intellisense 根本不工作。

我的代码片段，工作正常：

```
<%
    // Get the data context for the SMD-GROUP database
    SMDGroupDBDataContext db = new SMDGroupDBDataContext();

    // Query the database
    IEnumerable<BestSeller> best_sellers = from bs in db.TOELINE
                       where bs.CusRef == "247HO001"
                       select new BestSeller()
                       {
                           product_code = bs.ProdCode,
                           product_description = bs.ProdDescr
                       };

    // Loop through and show each line
    foreach (BestSeller best_seller in best_sellers)
    {
        Response.Write(best_seller.product_code + " - " + best_seller.product_description + "<br/>");
    }
 %> 
```

这是我的网络配置文件：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
    <connectionStrings>
        <add name="SMDPortalDbCon" connectionString="Data Source=smd-data;Initial Catalog=SMDPORTAL;User Id=**************;Password=**********;" providerName="SMDPortalMembershipProvider"/>
        <add name="SMD_GROUPConnectionString" connectionString="Data Source=****;Initial Catalog=SMD-GROUP;Persist Security Info=True;User ID=******;Password=*********" providerName="System.Data.SqlClient"/>
    </connectionStrings>
  <system.web>
    <compilation debug="true">
      <assemblies>
        <add assembly="UODOTNET, Version=2.2.5.7444, Culture=neutral, PublicKeyToken=335F3FBD4BE82339"/>
        <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
      </assemblies>
      <buildProviders>
        <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider"/>
      </buildProviders>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="Default.aspx" timeout="2880" cookieless="UseCookies"/>
    </authentication>
    <authorization>
      <deny users="?"/>
    </authorization>
    <membership defaultProvider="SMDPortalMembershipProvider">
      <providers>
        <clear/>
        <add name="SMDPortalMembershipProvider" type="SMDPortalMembershipProvider" connectionStringName="SMDPortalDbCon" applicationName="SmdPortal" passwordFormat="Hashed" requiresQuestionAndAnswer="false" enablePasswordRetrieval="false" enablePasswordReset="false" requiresUniqueEmail="false" minRequiredPasswordLength="3" minRequiredNonalphanumericCharacters="0"/>
      </providers>
    </membership>
    <roleManager defaultProvider="SMDPortalRolesProvider" enabled="true">
      <providers>
        <clear/>
        <add name="SMDPortalRolesProvider" type="SMDPortalRolesProvider" connectionStringName="SMDPortalDbCon"/>
      </providers>
    </roleManager>
    <customErrors mode="Off"/>
    <sessionState cookieName="smd_portal_session" timeout="100"/>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
            <remove name="ScriptModule"/>
            <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></modules>
        <validation validateIntegratedModeConfiguration="false"/>
        <handlers>
            <remove name="WebServiceHandlerFactory-Integrated"/>
            <remove name="ScriptHandlerFactory"/>
            <remove name="ScriptHandlerFactoryAppServices"/>
            <remove name="ScriptResource"/>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </handlers>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:57:51.863

您是否在页面顶部导入了 Linq 命名空间？

```
<%@ Import Namespace="System.Linq" %> 
```

**更新：**如果你想在 web.config 中注册命名空间，你可以这样做：

```
<system.web>
    ...
    <pages>
       <namespaces>
         <add namespace="System.Linq" />
       </namespaces>
    </pages>
</system.web> 
```

# java - Google drive api更改文件的所有权？

> ID：12249232
> 
> 赞同：4
> 
> 时间：2012-09-03T13:53:38.000
> 
> 标签：java, google-drive-api

我正在使用 google drive api 来管理多个用户的一些文件。现在我想知道如何将某些文件的所有权转让给另一个用户。

我正在查看 api 文档并注意到我需要一个“permissionId”。我不知道我需要哪一个。当前用户还是获得它的用户？）

我不知道哪些用户必须经过身份验证（使用驱动服务）获取文件的用户或提供文件的用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:23:21.093

您只需要被授权为拥有该文件的用户，您将向新所有者授予所有者权限，并通过电子邮件地址授予它。然后，您可以删除授权（以前的所有者）用户的所有者权限。您可以使用权限 ID 将其删除，该权限 ID 位于用户的 about feed 中。

请记住，所有权只能保留在域内。

# java - Java中的SecureRandom安全种子

> ID：12249235
> 
> 赞同：10
> 
> 时间：2012-09-03T13:53:52.040
> 
> 标签：java, security, encryption, random, cryptography

这段代码安全吗？

```
 SecureRandom randomizer = new SecureRandom(String.valueOf(new Date().getTime()).getBytes()); 
```

这是实例化安全随机种子的正确方法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-03T16:35:48.827

不，你应该避免`SecureRandom(byte[])`构造函数。它既不安全也不便携。

它是不可移植的，因为它在 Windows 和其他操作系统上的行为不同。

在大多数操作系统上，默认算法是“NativePRNG”，它从操作系统（通常`"/dev/random"`）获取随机数据并忽略您提供的种子。

在 Windows 上，默认算法是“SHA1PRNG”，它将您的种子与计数器结合起来并计算结果的哈希值。

这在您的示例中是个坏消息，因为输入（当前 UTC 时间，以毫秒为单位）的可能值范围相对较小。例如，如果攻击者知道 RNG 是在过去 48 小时内播种的，他们可以将种子缩小到小于 2 ^(28)个可能的值，即您只有 27 位熵。

另一方面，如果您`SecureRandom()`在 Windows 上使用了默认构造函数，它将调用本机`CryptoGenRandom`函数来获取 128 位种子。因此，通过指定您自己的种子，您已经削弱了安全性。

如果您真的想覆盖默认种子（例如用于单元测试），您还应该指定算法。例如

```
SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
sr.setSeed("abcdefghijklmnop".getBytes("us-ascii")); 
```

另请参阅[如何使用 Java SecureRandom 解决性能问题？](https://stackoverflow.com/q/137212/12048)
和这篇博文：[http ://www.cigital.com/justice-league-blog/2009/08/14/proper-use-of-javas-securerandom/](http://www.cigital.com/justice-league-blog/2009/08/14/proper-use-of-javas-securerandom/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:10:44.280

我认为最好让 SecureRandom 种子本身。这是通过在创建后立即调用 nextBytes 来完成的（调用 setSeed 会阻止这种情况）。

```
final byte[] dummy = new byte[512];
SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
sr.nextBytes(dummy); 
```

您想使用 SHA1PRNG，因为它保证了快速的非阻塞实现，即使在 Linux 上也是如此，默认情况下不是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:56:00.370

该代码是相当安全的，因为它不只是使用给定的种子来播种随机化器。

它并不比仅仅使用更随机。

```
SecureRandom randomizer = new SecureRandom(); 
```

# mysql - 带有 ORDER BY 的 MySQL 语句持续很长时间

> ID：12249238
> 
> 赞同：-1
> 
> 时间：2012-09-03T13:53:59.317
> 
> 标签：mysql, sql, database, join

我正在使用 mysql 数据库。查询直接通过工作台工具执行。查询如下所示：

```
SELECT records.received, data.value 
FROM product 
       JOIN records 
            on product.productId= records.productId 
       JOIN data 
            ON records.recordId = data.recordId 
       JOIN dataTypes 
            ON data.typeId = dataTypes.typeId 
ORDER BY records.received DESC 
```

数据表有 100 万个条目。该语句的执行持续 7 秒。原因似乎是 ORDER BY 子句。

有人可以给我一个提示如何加快速度。

编辑：对不起，我忘了添加结构：

products：PK 是 productId（它只有 5 个条目）

记录：PK 是 recordId，FK 是 productId

data：PK是dataId，FK是recordId和typeId

dataTypes：PK 是 typeId

Records.received 和所有 PK 和 FK 上都有一个索引。

这是解释的输出：

```
id,select_type,table,type,possible_keys,key,key_len,ref,rows,Extra
1,SIMPLE,products,const,PRIMARY,PRIMARY,4,const,1,"Using index
1,SIMPLE,dataTypes,const,PRIMARY,PRIMARY,4,const,1,"Using index"
1,SIMPLE,records,ref,"PRIMARY,productId",productId,4,const,127142,"Using where"
1,SIMPLE,data,ref,"recordId,typeId",recordId,4,top70.records.recordId,1,"Using where" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:57:45.613

```
ALTER TABLE `records` ADD INDEX `index1` (`received`);
ALTER TABLE `data` ADD INDEX `index2` (`value `); 
```

尝试索引您正在使用 where 子句的列或选择列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:04:09.697

尝试将查询更改为：

```
WHERE records.received > '2012-01-01' -- some date you are sure your values fit
ORDER BY records.received DESC 
```

并比较 EXPLAIN 语句的结果

# floating-point - (VHDL) 存储为 std_logic_vectors 的 IEEE 754 编码浮点值的算术运算

> ID：12249241
> 
> 赞同：2
> 
> 时间：2012-09-03T13:54:02.460
> 
> 标签：floating-point, vhdl

`std_logic_vector`我需要对存储为信号的 IEEE 754 浮点数进行操作。

例如：

```
signal a, b, ans : std_logic_vector( 63 downto 0 );
..
ans <= std_logic_vector(to_float(a) + to_float(b)); 
```

我怎样才能做到这一点？（我想我需要在转换过程中的某处定义位数？） 编辑：代码是可合成的，但我收到警告。代码：

```
variable tempfloat1, tempfloat2, tempfloat3 : float32;
..
tempfloat1 := to_float(s_do_ssc2wb, exponent_width => 8, fraction_width => 23 );
tempfloat2 := to_float(s_do_wb2ssc, exponent_width => 8, fraction_width => 23 );
tempfloat3 := tempfloat1 + tempfloat2; 
```

警告：

```
 "float_pkg_c.vhdl" line 1515: VHDL Assertion Statement with non constant condition is ignored.
    "float_pkg_c.vhdl" line 1600: Index value(s) does not match array range, simulation mismatch. 
```

我想知道它的正确语法是什么......“添加”函数不接受用户指南中示例中的参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T17:43:42.737

对于 VHDL 2008，使用内置的 float_pkg，它提供可与 std_logic_vector 相互转换的浮点类型。[对于早期版本的 VHDL，您可以使用来自http://www.vhdl.org/fphdl/index.html](http://www.vhdl.org/fphdl/index.html)的这些相同包的原始、预标准版本。

使用浮点类型时，它们的工作非常简单，类似于无符号类型：您可以对它们进行算术运算、调整它们的大小等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:47:18.580

最后，我使用了浮点 IP 内核，由 ISE 中的 IP 内核生成器生成。上面链接的浮点包实际上毫无价值，因为合成需要大约一个小时，而 Spartan3 上的最大频率仅为 ~6 MHZ。使用 IP 内核：40 MHz 和 3-5 分钟的合成时间。

# wcf - MSMQ 无法转换类型的对象

> ID：12249242
> 
> 赞同：1
> 
> 时间：2012-09-03T13:54:03.930
> 
> 标签：wcf, msmq

读取 MSMQ 消息时收到以下错误消息...

> 无法将“System.ServiceModel.MsmqIntegration.MsmqMessage`1[MSMQLibrary.MyEvents+Dashboard_Message]”类型的对象转换为“Dashboard_UserDetail”类型。

这里发生错误...

```
MyEvents.Dashboard_UserDetail messageTest =   
    (MyEvents.Dashboard_UserDetail)dashboardMessage; 
```

为什么是这样？

```
[OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
public void ProcessMSMQMessage(MsmqMessage<MyEvents.Dashboard_Message> msg)
{
    switch (msg.Body.GetType().Name)
    {
        case "DashboardTest":
            MyEvents.Dashboard_UserDetail messageTest = 
                (MyEvents.Dashboard_UserDetail)dashboardMessage;
            using (UpdateDashboardQueriesDataContext updateDashboardQueriesDataContext = new UpdateDashboardQueriesDataContext())
            {
                updateDashboardQueriesDataContext.UpdateData(messageTest.ID, messageTest.StartDate);
            }
            break;
        }
    }

public class MyEvents
{
    [Serializable]
    [DataContract]
    public class Dashboard_Message
    {
        public Dashboard_Message();
    }

    [Serializable]
    [DataContract]
    public class Dashboard_UserDetail : DashboardEvents.Dashboard_Message
    {
        public Dashboard_UserDetail();
        public Dashboard_UserDetail(string thisID, DateTime thisPeriod);

        public DateTime Period { get; set; }
        public string ID{ get; set; }
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:02:46.640

因为您没有告诉服务在请求中期望您的派生类型。该服务需要`Dashboard_Message`消息中的 type ，但它正在接收一个 type 的对象`Dashboard_UserDetail`。

您必须使用[ServiceKnownType](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)属性来指定您的服务应该期望请求中的其他类型。

# java - 对象组合生成

> ID：12249243
> 
> 赞同：0
> 
> 时间：2012-09-03T13:54:05.213
> 
> 标签：java, combinatorics

我有一个具有许多属性的对象，例如 5 个属性。每个属性都有预定义的值。例如：

> 对象 Y 具有属性 {A,B,C,D,E}
> 
> A 可以从集合 {1,2,3} 中取一个值
> 
> B 可以从集合 {5,8,9,10,12} 中取一个值
> 
> C 可以从集合 {8,9,10,12} 中取一个值
> 
> D 可以从集合 {12,20} 中取一个值
> 
> E 可以从集合 {1,3,5,6} 中取一个值

现在我想要的是：

> 输入：对象 Y= {2,5,?,?,5}

其中`?`是对应属性的未知值。我想返回包含所有替代品的所有可能对象。例如，对于对象 Y，它将返回：

> {2,5,8,12,5} , {2,5,8,20,5} , {2,5,9,12,5}, {2,5,9,20,5} ... ...

换句话说，它将替换`?`为所有可能的值。我想要这个东西动态（不管属性的数量，不管属性值的数量和`?`对象中的数量）

# macos - 如何在 Automator 应用程序中创建“文件存在”外壳

> ID：12249244
> 
> 赞同：0
> 
> 时间：2012-09-03T13:54:05.287
> 
> 标签：macos, shell, operating-system, command, automator

我正在 Mac Automator 中制作一个小型 Automator 应用程序，我想做的是：

*   如果 ModLoader.class 存在继续 Automator 工作流程

*   如果 ModLoader.class 不存在，请将 ModLoader.class 从不同的文件路径复制并粘贴到另一个文件路径

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:11:11.420

Could you add a shell script or AppleScript action?

```
f1="/path/to/ModLoaderClass.class"
f2="/path2/to/ModLoaderClass.class"

if [ ! -f "$f2" ]; then
    cp "$f1" "$f2"
fi 
```

`cp` also has an `-n` option which makes it not overwrite existing files: `cp -n /path/to/ModLoaderClass.class /path2/to/ModLoaderClass.class`.

# css - Safari 字体字母间距

> ID：12249246
> 
> 赞同：2
> 
> 时间：2012-09-03T13:54:19.153
> 
> 标签：css, fonts, font-face

因此，经过数周的故障排除后，我发现这呈现了所有浏览器中最好的字体：

```
@font-face {
font-family: 'GothamBook';
src: url('../fonts/gotham-book-webfont.eot');
src: url('../fonts/gotham-book-webfont.eot?#iefix') format('embedded-opentype'),
     url('../fonts/gotham-book-webfont.svg#gotham_bookregular') format('svg'),
     url('../fonts/gotham-book-webfont.woff') format('woff'),
     url('../fonts/gotham-book-webfont.ttf') format('truetype');
font-weight: normal;
font-style: normal;
} 
```

然而，由于大多数浏览器的首选字体现在`SVG`Safari 似乎处理起来有问题`letter-spacing`（如 - 它只是忽略它），但 Chrome 却没有。所以我看不出这是一个 Webkit 问题。

将 SVG 放在列表的底部会使 chrome 使用另一种格式，导致渲染非常糟糕，没有抗锯齿，所以这就是我更喜欢使用 SVG 的原因。

那么有没有办法解决 Safari 忽略 SVG 字体字母间距或重新排列字体源列表以便 SVG 仍在 Chrome 中使用但 Safari 会使用其他东西的问题？

谢谢。

# c - 多线程应用程序的数据结构（和 C 中的跨平台实现）

> ID：12249248
> 
> 赞同：2
> 
> 时间：2012-09-03T13:54:24.323
> 
> 标签：c, multithreading, data-structures, cross-platform

我正在寻找以下场景的数据结构：

1.  线程池应该对数据块的文件类型进行分类
2.  每个线程都从这个（阻塞的）数据结构中读取
3.  另一个线程（不是线程池的一部分）从存储设备中读取块并将它们馈送到数据结构中。
4.  如果没有更多数据可用，读取线程会通知（或中断）数据结构，以便池中的阻塞线程可以退出并关闭。

您认为阻塞 FIFO 队列在这里合适/足够吗？另一个要求是数据结构可以作为开源获得，并且可以针对不同的操作系统（至少是 Windows/Linux）进行编译。

乍一看，APR Util 库看起来很有希望，但 Visual Studio 的项目文件是为这个编译器套件的史前版本而设计的[。](http://apr.apache.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:21:26.370

生产者-消费者 FOFO 阻塞队列似乎是合理的。所有多线程操作系统都有合适的信号量/互斥量/condvars/任何东西来使 PC 排队，您​​可以在一个特定于操作系统的接口单元中定义它们。

我将使用的“数据结构”是 *SomeStruct 的队列，它可以包含数据块和处理该块所需的任何其他元数据。

在做这类事情时，我通常会创建一个大的“池队列”（另一个 PC 队列），在应用程序启动时填充了 malloced/calloced *SomeStruct。然后线程将只是将池中的 *SomeStructs 循环到读取线程，到线程池 FIFO，再到处理线程，最后返回到池队列。此流程控制数据，防止内存失控并消除连续的 malloc/free。

编辑：

是的，FOFO 是一个 FOOBAR。

我的设计使用两个 FIFO、线程安全、阻塞队列：

a) 池队列，在启动时填充固定数量的 malloced/calloced *SomeStructs。

b) 处理线程等待的处理队列。

读取线程从池队列中取出 *SomeStructs，加载它们，将它们排队到处理线程获取它们的处理队列，处理它们，然后在完成后将它们重新排队到池队列。

这意味着 SomeStructs 的数量仅限于启动时创建的数量，因此您无需在应用程序运行时再进行 malloc/calloc 或 free 操作。此外，如果读取线程试图“领先于”处理线程，则池队列将清空并且读取线程将阻塞它，直到处理线程返回一些“已使用”*SomeStructs 到池以供重用 -然后阅读线程将再次运行。

另一个优点是您不需要复杂的有界队列。由于 *SomeStruct 实例的总数仅限于启动时创建的数量，因此队列只需足够大以容纳该数量 - 它们永远不必再容纳。因此，一个简单的固定大小 *SomeStruct[CtotalInstances] 数组可以作为队列的基础，您无需检查索引是否已满或需要使用额外的信号量来计算 '空的空间'：）

哦 - 关机 - 我可能不会打扰关闭线程。如果他们无事可做，他们可以坐在那里，什么也不做，直到应用程序关闭。如果您确实需要关闭处理线程，请在告诉接收线程将药丸推回的队列上发送一条“毒丸”消息（空指针是一个很好的药丸 - 它不需要释放）队列，然后清理并退出 - 在短时间内，所有处理线程都会得到药丸并自杀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T18:19:57.747

当然，阻塞队列非常适合生产者-消费者模式。如果您想要一些便携的东西，请尝试 Intel TBB，特别是[tbb::concurrent_bounded_queue](http://threadingbuildingblocks.org/files/documentation/a00129.html)。

# javascript - 如何使这个 YouTube 链接在 iOS 上工作？

> ID：12249249
> 
> 赞同：1
> 
> 时间：2012-09-03T13:54:23.977
> 
> 标签：javascript, ios, youtube, html5-video, shadowbox

我正在使用 Shadowbox.js 来显示 YouTube 视频。

但是，在 iOS 设备上，当我单击播放视频时，它会返回一条消息，说明我的浏览器无法识别任何可用的支持格式。我认为这是因为它是闪存。

我的链接看起来像[这样](http://youtube.com/embed/4gfupvPFZPg)

我以为 YouTube 会将我转发到视频的 HTML5 版本，但事实并非如此。

知道如何格式化此链接以在 iOS 上播放吗？

我认为问题直接出在 Shadowbox 上，但即使我将它粘贴到移动 Safari 中，它也会显示此错误。

非常感谢，迈克尔。

PS - 我什至尝试附加`?html5=1`到 URL 的末尾，但仍然没有乐趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:14:57.950

并非所有视频都在 Youtube 上编码为 HTML5，因此可能只是没有 HTML5 版本。你真的不应该做任何事情来让它工作。

# haml - 使用 HAML 渲染 "<%%="

> ID：12249252
> 
> 赞同：2
> 
> 时间：2012-09-03T13:54:31.780
> 
> 标签：haml, erb

我有一个 Backbone.js 应用程序托管在 Sinatra 中，并通过 ERB 脚本呈现。主干模板使用下划线模板功能，因此变量在 ERB 中呈现，如下所示：

```
<div id="<%%= variable %>"> 
```

额外的“%”转义了该变量的呈现，并用一个“%”呈现它，这是下划线模板库将拾取的。

我在升级到 HAML 时尝试了以下操作：

```
#"<%= id %>" 
```

这没有用。如何使用 HAML 完成相同的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T18:16:21.823

首先，您不能使用`#`快捷方式来创建`id`具有这样的值的值，您必须做很长的路要走：

```
%div{:id => "<%= id %>"} 
```

默认情况下，Haml 将转义属性，因此这将产生如下内容：

```
<div id='&lt;%= id %&gt;'></div> 
```

这可能不是你想要的。[`:escape_attrs`您可以通过将选项](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#options)设置为 false来关闭属性转义。这将产生所需的输出：

```
<div id='<%= id %>'></div> 
```

请注意，此选项会影响文档中的*所有*属性。

另一种方法是[在您的模板中使用一组不同的分隔符](http://underscorejs.org/#template)。例如你可以使用`{{...}}`这个：

```
_.templateSettings = {
  interpolate : /\{\{(.+?)\}\}/g
}; 
```

现在 Haml 不会转义属性值。

# c - 自定义 GTK 小部件的背景呈现为纯黑色

> ID：12249257
> 
> 赞同：6
> 
> 时间：2012-09-03T13:54:52.447
> 
> 标签：c, gtk, gtk3

我正在尝试在 GTK 3 中创建一个自定义小部件。我注意到仅在某些 GTK 主题中出现的绘图问题，而所有其他主题都很好。我将问题缩小到通过调用绘制背景的代码上`gtk_render_background()`。对于某些主题，背景呈现为纯黑色，尽管这不是主题的默认背景颜色。下面是我的绘图功能的简化版本。

```
static void gtk_databox_ruler_draw_ticks(GtkDataboxRuler *ruler)
{
    GtkWidget *widget;
    GtkStateFlags state;
    cairo_t *cr;
    GtkStyleContext *style_context;
    gint width, height;

    if (!gtk_widget_is_drawable(GTK_WIDGET(ruler))) {
        return;
    }

    widget = GTK_WIDGET(ruler);
    state = gtk_widget_get_state_flags(widget);
    style_context = gtk_widget_get_style_context(widget);

    gtk_style_context_save(style_context);
    gtk_style_context_add_class(style_context, GTK_STYLE_CLASS_DEFAULT);
    gtk_style_context_set_state(style_context, state);

    /* <test-code> */
    GdkRGBA test;
    gtk_style_context_get_background_color(style_context, gtk_widget_get_state_flags(widget), &test);
    /* </test-code> */

    width = gtk_widget_get_allocated_width(widget);
    height = gtk_widget_get_allocated_height(widget);

    cr = cairo_create(ruler->priv->backing_surface);

    gtk_render_background(style_context, cr, 0, 0, width, height);

    gtk_style_context_restore(style_context);
    cairo_destroy(cr);
} 
```

我添加了一些测试代码来查询背景颜色并在 gdb 中设置断点：

使用 Ubuntu 的 Ambiance 主题时：

```
(gdb) print test
$1: test = {red = 0.94901960784313721, green = 0.94509803921568625, 
  blue = 0.94117647058823528, alpha = 1} 
```

使用 Ubuntu 的 HighContrast 主题时：

```
(gdb) print test
$1: test = {red = 0, green = 0, blue = 0, alpha = 0} 
```

我现在想知道我是否以错误的方式使用了新的 GtkStyleContext，或者主题是否损坏。如何缩小问题的根源？

如果有人能指出我对 GtkStyleContext 的良好介绍，我也将不胜感激。官方 API 文档对理解基本概念没有太大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-02T01:01:36.610

After more than one year has passed, I had to look into this problem again because it also occurs when using the GTK3 default (built-in) style, i.e. when my program is used on a system that has no themes etc. installed.

It looks like the source of the problem is that some GTK themes define a background color for the "default case" and others do not.

The [GTK3 default theme](https://git.gnome.org/browse/gtk+/tree/gtk/resources/theme/gtk-default.css):

```
…
* {
  color: @fg_color;
  border-color: shade (@bg_color, 0.6);
  padding: 2px;
  -GtkWindow-resize-grip-width: 0;
  -GtkWindow-resize-grip-height: 0;
  -GtkWindow-decoration-button-layout: 'icon:minimize,maximize,close';
}

GtkWindow, .button, .slider {
  background-color: @bg_color;
}
… 
```

The Adwaita theme:

```
…
* {
    /* inherit the color from parent by default */
    color: inherit;
    background-color: @theme_bg_color;
}
… 
```

To get the background drawn, I simply have to select a widget class that has a background color defined across all (most) themes. I use the button class for that:

```
gtk_style_context_add_class(style_context, GTK_STYLE_CLASS_BUTTON); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T18:17:12.120

您使用的是哪个版本的 Ubuntu 和 GTK3？

也许你需要打电话[`gtk_style_context_set_junction_sides()`](http://developer.gnome.org/gtk3/stable/GtkStyleContext.html#gtk-style-context-set-junction-sides)。

您可能还对来自 GTK 开发人员之一 Benjamin Otte 的信息感兴趣。 [GTK 样式的工作原理](https://mail.gnome.org/archives/gtk-devel-list/2012-January/msg00075.html)，也可以使用[GTK+3 样式](https://live.gnome.org/GTK%2B/GTKCSSStyling)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-30T17:45:02.363

这里的部分问题可能是越来越多的，不再一定有单一的背景颜色。

根据[https://developer.gnome.org/gtk3/stable/GtkStyleContext.html#gtk-style-context-get-background-color](https://developer.gnome.org/gtk3/stable/GtkStyleContext.html#gtk-style-context-get-background-color)的文档：

“这个功能远没有看起来那么有用，它不应该在新编写的代码中使用。CSS没有“背景颜色”的概念，因为背景可以是图像，或渐变，或任何其他图案，包括纯色颜色。”

# solr - NGram 中序搜索

> ID：12249258
> 
> 赞同：1
> 
> 时间：2012-09-03T13:54:53.433
> 
> 标签：solr, lucene, elasticsearch

几个月前，我[在这里](https://stackoverflow.com/questions/9421358/filename-search-with-elasticsearch)问了一个类似的问题。但是我无法让它正常工作：

我尝试构建一个简单的文件名搜索。我希望用户可以搜索文件名的任何部分。
假设以下文件名已编入索引：

```
[1] My_file_2012.01.12.txt
[2] My_file_2012.01.05.txt
[3] My_file_2012.05.01.txt
[4] My_file_2012.08.27.txt
[5] My_file_2012.12.12.txt
[6] My_file_2011.12.12.txt
[7] file_01_2012.09.09.txt 
```

然后用户可能会搜索：

```
"ile_20"                    (finds the first six documents)
"12.txt"                    (finds 1, 5, 6)
"12" followed by "01"       (finds 1, 2, 3 - NOT 7)
"2012" followed by "01"     (finds 1, 2, 3 - NOT 7) 
```

（注意：是的，用户可能真的会搜索像“ile_20”这样的字符串......例如因为复制和粘贴错误）

因此，我使用 nGram-tokenizer 来索引文件名的每个部分。到目前为止，这工作正常。为了支持上面提到的“跟随”搜索，我需要一个尊重术语顺序的查询，无论这两个术语之间有多少文本（好吧，假设最多 100 个字符）。

由于带有“slop”的“text_phrase”查询不正确地尊重术语的顺序，我决定使用“span_near”查询。这在大多数情况下都可以正常工作。

在这里查看我的完整示例索引，包括。错误描述：[点击](https://gist.github.com/3487909)

如上例所述，查询“'2012' 后跟 '01'”不起作用，因为 nGram 标记器为每个标记生成一个位置值，但这些值在用于“span_near”查询时不是很有用。在索引时，术语“2012”被分配给位置值（50），该位置值大于术语“01”的位置值（例如10）。由于 50 和 10 不按顺序排列，因此查询将没有结果。有序事物仅适用于具有相同长度的术语（例如“'12' 后跟 '01'”）或如果术语按长度排序（例如“'20' 后跟 '.12'” ）。

那么我怎样才能实现正确的搜索行为呢？我只希望能够在尊重术语顺序的同时搜索文件名的任何部分。
也许有一种方法可以告诉“span_near”不要使用该位置，而是使用“start_offset”？或者我可以使用另一个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:08:08.640

How about a wildcard search like this:

"12" followed by "01" -> 12*01

# php - PHP验证base64编码图像

> ID：12249260
> 
> 赞同：4
> 
> 时间：2012-09-03T13:55:13.010
> 
> 标签：php, base64, security, xss

我需要找到一种方法来验证用 PHP 编码的 base64 图像。

通过验证，我正在考虑 XSS 和其他类似的安全问题。

流程是：

用户有一些参数，其中一个 og 更多在 base64 编码图像字符串并将它们发布到我的网站。当我收到名为 img1 的参数 fx 时，使用 base64 编码的图像字符串作为值。

然后我想确保这个 base64 编码的字符串只包含图像并且没有任何标签和黑客会尝试使用的任何其他东西。

有谁知道任何可以帮助我的 PHP 函数或插件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-07-15T06:30:59.280

您可以使用以下代码验证文件类型：

```
$file = 'Your base64 file string';
$file_data = base64_decode($file);
$f = finfo_open();
$mime_type = finfo_buffer($f, $file_data, FILEINFO_MIME_TYPE);
$file_type = explode('/', $mime_type)[0];
$extension = explode('/', $mime_type)[1];

echo $mime_type; // will output mimetype, f.ex. image/jpeg
echo $file_type; // will output file type, f.ex. image
echo $extension; // will output extension, f.ex. jpeg

$acceptable_mimetypes = [
    'application/pdf',
    'image/jpeg',
];

// you can write any validator below, you can check a full mime type or just an extension or file type
if (!in_array($mime_type, $acceptable_mimetypes)) {
    throw new \Exception('File mime type not acceptable');
}

// or example of checking just a type
if ($file_type !== 'image') {
    throw new \Exception('File is not an image');
} 
```

在`$mime_type`你下面会得到类似的东西`application/pdf`or `image/jpeg`。

在`$file_type`你下面你会得到一个文件类型 f.ex。图片。

在`$extension`您下方，您将获得一个扩展名。

您可以使用`finfo_buffer`一些[预定义的常量](https://www.php.net/manual/en/fileinfo.constants.php)，这可能会为您提供更多信息。

使用这些信息，您可以简单地验证它是图像还是 pdf 或您想要检查的任何其他内容。[您可以在此页面](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types)中查看所有可用的 mimetype 。

* * *

手动的

[PHP: finfo_open](https://www.php.net/manual/en/function.finfo-open.php)

[PHP: finfo_buffer](https://www.php.net/manual/en/function.finfo-buffer.php)

[PHP: finfo_buffer - 预定义常量](https://www.php.net/manual/en/fileinfo.constants.php)

[base64_decode](https://www.php.net/manual/en/function.base64-decode.php)

[MIME 类型（IANA 媒体类型）](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T13:58:14.957

您可以尝试使用[imagecreatefromstring](http://php.net/manual/en/function.imagecreatefromstring.php)函数从字符串创建图像。

然后，您可以测试图像尺寸/类型。

如果您想更进一步，您可以创建一个新图像，然后尝试将用户图像复制到其上并将其用作最终图像。由于最终图像最初是由您创建的，因此任何黑客都很难通过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:17:57.310

> 我只会采用 base64 编码的字符串并将其放入图像标签中。但是在我正在构建的系统中，安全性是非常重要的事情，所以我只需要确保不能在 base64 编码图像中使用 XSS 之类的东西 :)

然后，您可以像处理任何其他用户输入一样执行此操作：[`htmlspecialchars`](http://php.net/htmlspecialchars)在将用户提供的文本放入 HTML 之前对其进行编码，以保持 HTML 的完整性。Base64 图像字符串也不例外。请参阅[伟大的逃避现实（或：使用文本中的文本需要知道的内容）](http://kunststube.net/escapism/)。

当然，一大堆图像数据可能会通过易受攻击的图像解析器让您面临完全不同的攻击向量。因此，您可能希望先将该图像字符串解码为图像资源，然后使用 gd 或 Imagick 函数再次保存，即打开并重新保存/重新编码图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-21T12:54:17.187

```
$str = 'your  base64 code' ;

if (base64_encode(base64_decode($str, true)) === $str && imagecreatefromstring(base64_decode($img))) {
echo 'Success! The String entered match base64_decode and is Image';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-09T10:00:08.920

试试这个库

[https://github.com/imaimai86/Intervention-Base64Image](https://github.com/imaimai86/Intervention-Base64Image)

它使用干预图像库来验证 base64 编码图像

# c# - 如何从代码以兼容模式执行程序？

> ID：12249263
> 
> 赞同：4
> 
> 时间：2012-09-03T13:55:23.647
> 
> 标签：c#, compatibility, windows-server-2008-r2

**环境：** *Windows Server 2008 R2 64 位*

我有一个适用于*Windows Server 2003 SP1* **兼容模式**的程序。但是，当我尝试使用 C# 执行此程序时，程序会出错。

我认为这是因为从另一个程序调用它时它没有以兼容模式运行。我使用`Process.Start(pathToExe)`from 我的代码来启动这个程序。

我尝试在兼容模式下运行调用程序，以检查这是否会使程序正常运行。

请注意，我已将程序集设置为**属性 |兼容性。兼容性**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:10:31.813

我不确定我是否完全理解您的问题，但如果您想始终在兼容模式下运行程序，您可以设置注册表以使其正常工作。

**注册表项：** `HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers`

添加一个新的字符串条目，
**名称**：完整的应用程序路径。
**类型**：REG_SZ
**数据**：必需的兼容值。我认为在你的情况下是`WIN2003`或`WIN2003SP1`。

`Example:`
C:\Program Files\System32\Notepad.exe REG_SZ WIN2003

您可以检查您正在运行的当前操作系统版本，您可以在调用程序之前设置和取消设置此注册表值。

# asp.net - ASP.Net Chart 命名空间错误

> ID：12249264
> 
> 赞同：0
> 
> 时间：2012-09-03T13:55:27.063
> 
> 标签：asp.net, charts

我在 .Net 4.5 中使用 VS2012，并添加了一个现有的 vb 类，它们都是 ASP.Net 图表控件的样式功能。System.Web.UI.DataVisualization.Charting 的 Import 语句呈红色波浪状，无法识别。我在网站上有对 system.web 的引用。我在添加引用区域的任何地方都找不到名为 System.Web.UI 的对象，我确实看到了 System.Web.DataVisualization 是否发生了变化？我四处搜索，并没有看到它注意到该命名空间发生变化的任何地方。System.Web.UI 的智能感知。甚至不再包含 DataVisualization 的选项

编辑：我从头开始创建了一个全新的网站，我的工具箱是空的，使用右键单击“选择项目”我什至无法将任何内容添加到我的工具箱中，这就是问题所在，它看不到图表控件或任何其他控件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:25:15.610

您可以添加参考`System.Web.DataVisualization.dll`

# php - php mysql左连接语法错误

> ID：12249265
> 
> 赞同：-2
> 
> 时间：2012-09-03T13:55:28.170
> 
> 标签：php, mysql, syntax, left-join

你好，我有一些错误，我看不到它，但是访问网站的成员，告诉我那里有错误

```
$query = mysql_query("
SELECT

m.member_id as member_id,
m.member_group_id as member_group_id,
m.members_display_name as members_display_name,
m.email as email,
m.joined as joined, 
m.member_login_key as member_login_key,
m.msg_count_new as msg_count_new,

p.pp_thumb_photo as pp_thumb_photo,
p.pp_photo_type as pp_photo_type

FROM        ".$forum_prefix."members m
LEFT JOIN   ".$forum_prefix."profile_portal p ON p.pp_member_id = m.member_id

WHERE m.member_id = ".$id."
") or die(mysql_error()); 
```

和错误

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 17 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:00:50.870

```
$forum_prefix = "table_name";// put table name here.its empty in your code
$id = 2;//put your id here and check
$query = mysql_query("
SELECT

m.member_id as member_id,
m.member_group_id as member_group_id,
m.members_display_name as members_display_name,
m.email as email,
m.joined as joined, 
m.member_login_key as member_login_key,
m.msg_count_new as msg_count_new,

p.pp_thumb_photo as pp_thumb_photo,
p.pp_photo_type as pp_photo_type

FROM        ".$forum_prefix."members m
LEFT JOIN   ".$forum_prefix."profile_portal p ON p.pp_member_id = m.member_id

WHERE m.member_id = ".$id."
") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:15:02.017

# javascript - 框架集 + cols IE10

> ID：12249268
> 
> 赞同：7
> 
> 时间：2012-09-03T13:55:58.217
> 
> 标签：javascript, frameset, internet-explorer-10

我在 IE10 中测试了一些脚本，似乎浏览器在设置属性时有问题`cols`。

例子：

```
parent.middle.document.getElementById("middle_frames").cols = "0,*" 
```

这适用于 SAF/Chrome/FF/IE7/IE8/IE9，但在 IE10 中不起作用。

有人帮忙吗？

* * *

我无法在我的项目中显示我的问题，但我制作了一个虚拟脚本来向您展示问题。制作 3 个文件（如下所示）并在 IE10 中运行它们，然后单击“更改列”按钮。适用于除 IE10 以外的所有浏览器。在我的示例中，您看到我使用了 doctype，也尝试了没有 doctype，同样的问题。

frameset_main.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Framesets</title>
    </head>
    <frameset id="framesets" cols="200,*" frameborder="0" border="0" framespacing="0">
        <frame src="frame1.html" name="frame1" id="frame1" scrolling="vertical" noresize="noresize">
        <frame src="frame2.html" name="frame2" id="frame2" scrolling="vertical" noresize="noresize">
    </frameset>
</html> 
```

框架1.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Frame 1</title>
    </head>
    <body style="background-color: green;">
    </body>
</html> 
```

框架2.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Frame 2</title>
        <!-- ONPAGE JAVASCRIPT -->  
        <script type="text/javascript">
        function dothis(){
            parent.document.getElementById("framesets").cols = "500,*";         
        }       
        </script>
    </head>
    <body style="background-color: red;">
    <div id="main_container" class="cls_main_container">
        <input type="button" id="btn_do_this" onclick="dothis();" value="change cols" />
    </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T08:41:52.357

对我来说，以下似乎有效（它有点像 Raads 修复）

```
parent.document.getElementById("framesets").cols="0,24%,*";
parent.document.getElementById("framesets").rows=parent.document.getElementById("framesets").rows;  //IE10 bug fix 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T20:16:46.280

Looks like it's IE 10 bug. No resolution so far.

[http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/dd6bdecf-5751-4343-8cfd-bcfd7a14b144](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/dd6bdecf-5751-4343-8cfd-bcfd7a14b144)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T10:36:01.177

## 我找到了解决方案

（这是一种解决方法，直到 Microsoft 解决 IE 10 错误）：

工作后，`.cols`我调用一个强制帧重绘的脚本，在您的示例中，结果应如下所示：

```
parent.document.getElementById("framesets").cols = "500,*";
$('#frame2').forceRedraw(true); 
```

该`forceRedraw`脚本可以在这里找到：[Howto: Force a browser redraw/repaint](http://www.pascalbeyeler.com/?p=327)，并且需要一个链接`jQuery`才能工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-16T09:21:07.973

我在IE10中遇到了同样的问题。它适用于 IE8 和 IE9，也适用于 IE11 预览版。所以它似乎是一个 IE10 错误。

我最简单的解决方法是一行，不需要插件或附加功能，如下所示：

```
$('#framesetId').hide().attr('cols', '50,*').show(); 
```

这个解决方案在 IE10 中适用于我，并且仍然适用于所有其他现代浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-26T07:23:14.190

经过一番研究，我解决了这个问题，即 10 个错误。我发现只有 'cols' 属性不适用于 iframe，但 'rows' 属性有效，所以我添加了一行，它对我有用。

```
var frameSet = document.getElementById("uxResultsFrameset");

if ($.browser.msie && $.browser.version == 10) 
     frameSet["rows"] = "100%"; //sets a row to overcome the issue in case of ie10 only

frameSet[orient] = "50%,50%"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T10:20:18.613

我通过在 cols 属性更新行之后添加这些行（使用 jquery）解决了这个 IE10 错误：

`$('#yourframeid').height( $('#yourframeid').height()+1 ); $('#yourframeid').height( $('#yourframeid').height()-1 );`

我希望它对你有用...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T18:33:01.450

## 这对我有用...

Emanuele 上面描述的重绘方法是正确的解决方案。但是，jQuery 插件站点上不再提供引用的插件。

这对我来说是强制 IE10 设置框架列属性的方法......

1) 创建一个小的 jQuery 插件，它可以立即隐藏和显示一个元素，有效地重绘它。

> ```
> (function ($) {
>     $.fn.redrawFrame = function () {
>         return $(this).each(function () {
>             $(this).hide();
>             $(this).show();
>         });
>     }
> })(jQuery) 
> ```

2) 在您的 JavaScript 中引用它，如下所示：

> ```
> $('#framesetId').attr('cols', '50,*').redrawFrame(); 
> ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T14:31:55.927

我花了很多时间在这上面。我想在不需要 jQuery 的情况下解决这个问题。
使用此代码使 Internet Explorer 10 对 cols 的更改生效：

```
parent.document.getElementById("framesets").removeAttribute("cols");
parent.document.getElementById("framesets").setAttribute("rows", "500,*");
parent.document.getElementById("framesets").removeAttribute("rows");
parent.document.getElementById("framesets").setAttribute("cols", "500,*"); 
```

# java - OpenGL ES 2.0 - 用纹理画线？

> ID：12249271
> 
> 赞同：2
> 
> 时间：2012-09-03T13:56:07.793
> 
> 标签：java, android, opengl-es-2.0

绘制具有特定纹理的线条的最佳方法是什么？

现在我正在尝试通过简单地绘制线条而不是另一个图元来绘制带有纹理的线条。

```
 setupMandatoryHandlers(shader);

    GLES20.glEnableVertexAttribArray(positionHandler);
    GLES20.glVertexAttribPointer(positionHandler, COORDS, GLES20.GL_FLOAT, false, STRIDE, vertexBuffer);

    if (texture != null)
        setupTextureData();     

    GLES20.glUniform4fv(colorHandler, 1, color, 0);

    GLES20.glUniformMatrix4fv(MVPMatrixHandle, 1, false, orthoMatrix, 0);       
    GLES20.glDrawElements(drawType, indices.length, GLES20.GL_UNSIGNED_SHORT, indexBuffer);

    GLRenderer.CheckGLError("Draw Elements");       

    GLES20.glDisableVertexAttribArray(positionHandler);

    if (texture != null)
        GLES20.glDisableVertexAttribArray(texCoordHandler); 
```

这是用纹理绘制线条的最有效方法还是我应该寻找其他地方？我应该使用`glDrawArrays`而不是`glDrawElements`换行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:03:49.797

你不能用简单的纹理来纹理一维线，因为据我所知，没有办法获得它当前正在绘制的片段着色器的线的当前像素位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:53:35.737

要在一条线上绘制纹理，您必须使用`PointSprites`或绘制带纹理的小四边形。在我的情况下，我使用`Triangle_Strips`并纹理化了它们，因为我的情况下的线可能很小并且看起来仍然像一条线。

如果有人有更好的解决方案或已实施上述解决方案，请随时发布答案！

# math - n 维快速傅里叶变换的计算复杂度？

> ID：12249275
> 
> 赞同：20
> 
> 时间：2012-09-03T13:56:27.520
> 
> 标签：math, fft, big-o

我正在尝试编写一些代码来预测在给定的 n 维数组上执行离散傅里叶变换所需的时间，但我正在努力理解 n 维 FFT 的计算复杂性。

据我了解：

*   长度向量的 1D FFT`N`应该取`k*(N*log(N))`一些`k`时间常数

*   对于`M*N`矩阵，2D FFT 应采用：

    `N*(k*M*log(M)) + M*(k*N*log(N)) = k*M*N*(log(M)+log(N))`

    因为它需要在每行和每列中进行 1D FFT

这如何推广到 ND 案例？是否应该如此`k*prod(dimensions)*sum(log(dimensions))`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-03T14:31:27.467

如果我们进一步推导您对 2D 的推导，就会清楚：

```
N*(k*M*log(M)) + M*(k*N*log(N)) = k*M*N*(log(M)+log(N)) 
```

变成：

```
 = k*M*N*(log(M*N)) 
```

对于 N 维（A、B、C 等），复杂度为：

```
O( A*B*C*... * log(A*B*C*...) ) 
```

从数学上讲，N 维 FFT 与 1-D FFT 相同，只是维度乘积的大小不同，只是[旋转因子](http://en.wikipedia.org/wiki/Twiddle_factor)不同。所以很自然地得出计算复杂度是一样的。

# java - java.util.Set.contains(Object o) 的奇怪行为

> ID：12249277
> 
> 赞同：7
> 
> 时间：2012-09-03T13:56:41.480
> 
> 标签：java, set, equals, contains

关于的[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#contains(java.lang.Object))说`java.util.Set.contains(Object o)`：

> 当且仅当此集合包含满足 (o==null ? e==null : o.equals(e)) 的元素 e 时返回 true。

也就是说，这是一个 POJO（如您所见，我覆盖了它的`equals`方法）：

```
public class MonthAndDay {

    private int month;
    private int day;

    public MonthAndDay(int month, int day) {
        this.month = month;
        this.day = day;
    }

    @Override
    public boolean equals(Object obj) {
        MonthAndDay monthAndDay = (MonthAndDay) obj;
        return monthAndDay.month == month && monthAndDay.day == day;
    }

} 
```

那么请，为什么下面的代码打印`false`而不是`true`？

```
Set<MonthAndDay> set = new HashSet<MonthAndDay>();
set.add(new MonthAndDay(5, 1));
System.out.println(set.contains(new MonthAndDay(5, 1)));
// prints false 
```

一个解决方案是重写`contains(Object o)`方法，但原来的应该（几乎）完全相同，我错了吗？

```
Set<MonthAndDay> set = new HashSet<MonthAndDay>() {

    private static final long serialVersionUID = 1L;

    @Override
    public boolean contains(Object obj) {
        MonthAndDay monthAndDay = (MonthAndDay) obj;
        for (MonthAndDay mad : this) {
            if (mad.equals(monthAndDay)) {
                return true;
            }
        }
        return false;
    }

};
set.add(new MonthAndDay(5, 1));
System.out.println(set.contains(new MonthAndDay(5, 1)));
// prints true 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T13:59:46.223

当您覆盖时，`equals(Object)`您还需要覆盖`hashcode()`.

具体来说，必须实现这些方法，以便 if `a.equals(b)`is `true`, then `a.hashcode() == b.hashcode()`is all `true`。如果不遵守此不变量，则`HashMap`和`HashSet`将`Hashtable`无法正常工作。

[对象](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)API中指定了行为方式`hashcode()`和`equals(Object)`行为方式的技术细节。

* * *

那么，如果你弄错了，为什么基于散列的数据结构会破坏呢？好吧，基本上是因为哈希表通过使用哈希函数的值来缩小要与“候选”进行比较的值集。如果候选对象的哈希码与表中某些对象的哈希码不同，那么查找算法可能不会与表中的对象进行比较……即使对象相等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T13:59:07.113

`HashSet``equals()` *仅当*元素共享相同时才会使用`hashCode()`，因此您需要覆盖两者。[这](http://www.docjar.com/html/api/java/util/HashMap.java.html)[`HashSet#contains()`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html#contains%28java.lang.Object%29)是由（注意`HashSet`由 a 支持）使用的代码的相关部分`HashMap`：

```
 355       /**
  356        * Returns the entry associated with the specified key in the
  357        * HashMap.  Returns null if the HashMap contains no mapping
  358        * for the key.
  359        */
  360       final Entry<K,V> getEntry(Object key) {
  361           int hash = (key == null) ? 0 : hash(key.hashCode());
  362           for (Entry<K,V> e = table[indexFor(hash, table.length)];
  363                e != null;
  364                e = e.next) {
  365               Object k;
  366               if (e.hash == hash &&
  367                   ((k = e.key) == key || (key != null && key.equals(k))))
  368                   return e;
  369           }
  370           return null;
  371       } 
```

不这样做违反了 的合同[`Object#hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)，该合同规定：

> 如果根据方法两个对象相等`equals(Object)`，则对两个对象中的每一个调用该`hashCode`方法必须产生相同的整数结果。

# iphone - 创建自定义 UITableViewCell

> ID：12249279
> 
> 赞同：0
> 
> 时间：2012-09-03T13:56:49.450
> 
> 标签：iphone, core-data, uitableview

创建自定义单元格时，我面临以下异常。

`*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<MasterTableView 0xb612b30> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key address.'`

我正在使用的委托函数如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) 
{

    NSArray *top=[[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:self options:nil];// on this line program received SIGABRT

    for (id current in top) {
        if ([current isKindOfClass:[UITableViewCell class]]) {
            cell=(CustomCell *)current;
            break;
        }
    }

}

// Configure the cell...
cell.name.text=@"name";
cell.address.text=@"Address";

return cell;
} 
```

除此之外，我还做了以下步骤：

1.  `CustomCell.xib`我已经给了to的文件所有者`MasterTableView.h`
2.  我已将自定义单元格的出口提供给`MasterTableView.h`
3.  我已经给这两个`UILabel`s提供了出口`CustomCell.h`
4.  我`Cell`在 IB 中作为 Cell Identifier给出

我在 Dropbox 中共享了整个项目，可在以下链接中找到。你也可以检查那个。我想知道它有什么问题。。

[下载链接](https://www.dropbox.com/s/dy2jusbwldly8px/CoreDataTest2.zip)

请告诉我缺少的步骤..提前谢谢你。

PS :- 我在我的项目中使用了 CoreData。没有核心数据，这些步骤给了我正确的期望输出，但在这个项目中没有。我已经检查了默认单元格。它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:07:59.860

在您的自定义单元格 xib 中，将单元格对象类型更改为`Customcell`，将 FileOwner 类型更改为`NSObject`. 然后设置单元格对象的出口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:31:30.300

我在一个示例项目中编译并运行了代码，它完全没有问题。如前所述，确保您已在 Interface builder 中连接了所有内容！

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray *top = [[NSBundle mainBundle]loadNibNamed:@"CustomCell" owner:self options:nil];

        for (id current in top) {
            if ([current isKindOfClass:[UITableViewCell class]]) {
                cell=(CustomCell *)current;
                break;
            }
        }
    }

    cell.title.text = @"Custom cell labels";

    return cell;
} 
```

编辑：

您在 Interface Builder 中连接了两次 IBOutlets，我附上了图片供您参考。他们不应该连接到文件的所有者，从文件的所有者中删除连接。

您还会注意到行的大小不正确，您必须在表格视图中指定行大小。

![在此处输入图像描述](../Images/70235c8a92439bc296425e243f578cf1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:18:32.010

Check whether you have set the class of your CustomCell from properties. ![enter image description here](../Images/6bb639e7909a5be7fdeae5ba45a4962d.png)

# jquery - jQuery - 水平页面幻灯片 - 包含示例

> ID：12249299
> 
> 赞同：1
> 
> 时间：2012-09-03T13:58:11.650
> 
> 标签：jquery

有谁知道页面滑块可以占用整个 div 并从左侧滑入？只是一个想法，我不擅长 jQuery（希望能改变）

感谢任何有任何建议的人，Necro

* * *

编辑：

[此处的示例](http://www.aivahthemes.com/themes/gracious/)这应该可以帮助你们：D 页面的底部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:02:30.383

我为其他问题做了一个例子。更新了它，让您简单地了解如何做到这一点。诀窍在于 CSS 属性“margin-left”。在以下位置查看解决方案：

[http://jsfiddle.net/pXy2C/1/](http://jsfiddle.net/pXy2C/1/)

# c# - 如何确认在我的单元测试中在我的 ServiceHost 上调用了 Open()

> ID：12249300
> 
> 赞同：1
> 
> 时间：2012-09-03T13:58:11.197
> 
> 标签：c#, unit-testing, mocking, rhino-mocks, servicehost

我有一个正在打开两个 WCF 服务的 Windows 服务。我想对 OnStart() 进行单元测试并断言 service1.Open() 和 service2.Open() 正在被调用。OnStart() 看起来像这样：

```
protected override void OnStart(string[] args)
{
    // host WCF services            
    _service1.Open();           
    _service2.Open();
} 
```

我在构造函数重载中注入服务，如下所示：

```
public WinService(ServiceHostBase service1, 
                                  ServiceHostBase service2)
{
    _service1 = service1;
    _service2 = service2;
    InitializeComponent();
} 
```

我正在使用 RhinoMocks 生成一个 ServiceHostBase 存根，如下所示：

```
[TestMethod()]
public void WinServiceOnStartCallsDependenciesAsExpected()
{
    ServiceHostBase service1 = MockRepository.GenerateStub<ServiceHostBase>();
    ServiceHostBase service2 = MockRepository.GenerateStub<ServiceHostBase>();
    WinService target = new WinService(service1, service2);
    WinService_Accessor privateTarget = new WinService_Accessor(new PrivateObject(target));     
    privateTarget.OnStart(null); 
```

当我的测试调用 OnStart() 时，我在调用 service1.Open() 时得到一个空引用异常。我已经确认 service1 在这一点上是一个模拟对象，并且它是 Open() 抛出空值。我知道 Open() 实际上是 System.ServiceModel.Channels.CommunicationObject 上的一个方法，我也尝试了 Stubbing 或 Mocking，但我仍然收到对象引用错误。它不是虚拟方法，所以我认为它只是没有被模拟版本覆盖，但是当我尝试设置 Expectation`reportservice.Stub(r => r.Open())`时，我得到一个不同的异常，即没有默认超时，就好像它正在运行实际的 CommunicationObject Open() 方法而不是抛出 null ref 的 RhinoMocky 方法。

综上所述，我只是在寻求有关如何确认在单元测试中在我的 ServiceHost 上调用 Open() 的帮助。=]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:26:41.803

`ServiceHostBase.Open`[`CommunicationObject.Open`](http://msdn.microsoft.com/en-us/library/ms405516)在引擎盖下调用。作为其实现的一部分，它做了很多不同的事情——比如验证对象的状态、创建其他对象、调用方法、属性等等。而且由于它不是虚拟的（您的假设是正确的），Rhino 将调用基类实现。

为了使其工作，您可能必须模拟和存根大量`CommunicationObject`依赖项，并且仍然不确定您是否会成功（某些类型/方法可能根本无法被 Rhino*模拟*，认为静态、密封或其他非-虚拟的）。这就是为什么您应该：

1.  将这种测试留给集成测试；然后，您将`.Open`在最终用户环境中进行测试
2.  引入一个[包装器](https://stackoverflow.com/a/9088455/343266)并`ServiceHostBase`通过接口将其作为依赖项传递；这涉及额外的工作（新接口和简单的包装类），但允许您做您想做的事

请记住，添加包装器只会将问题进一步委托（到包装器类的`Open`方法，它本质上会调用`ServiceHostBase.Open`- 你是否也应该对其进行单元测试？）。另一方面，集成测试可能无法像单元测试那样快速发现问题（假设您运行它们的频率较低）。根据您认为`OnOpen`的关键程度，您选择的方式或多或少是一种判断。

# objective-c - 如何设置模态呈现的 UIViewController 的背景？

> ID：12249305
> 
> 赞同：0
> 
> 时间：2012-09-03T13:58:26.897
> 
> 标签：objective-c, uiimageview, background-image

我有一个 UIViewController，它由页面卷曲过渡模态呈现。当我在呈现的控制器的视图中放置全屏 UIImageView 时，页面卷曲会上升到屏幕的上边缘。在这个模态呈现的视图中，我只想使用屏幕的一半，因此页面卷曲应该只出现到屏幕的一半。我想设置这个视图的背景，同时避免页面卷曲上升到屏幕的上边缘。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:24:05.877

找到了答案：self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]];

# ruby-on-rails - 嵌套多态资源的编辑路径

> ID：12249310
> 
> 赞同：0
> 
> 时间：2012-09-03T13:58:40.870
> 
> 标签：ruby-on-rails, rails-routing

我有一个嵌套的多态资源问题，它可能嵌套在考试下面。在 UI 中，我使用 POST 作为提交方法动态构建表单。这适用于新操作，POSTing to /exams/1/questions。

问题是，对于编辑操作，我收到路由错误（没有匹配的路由 [POST]）。我检查了路由，可以看到这是一个有效错误 - 有一条 PUT 路由连接到更新方法。

我的问题是为什么使用 POST 作为表单方法的脚手架模型的编辑操作可以正常工作，而我的表单提交会生成上面的路由错误。

以下是我的 routes.rb 中的路线：

```
 resources :exams do
    resources :questions
  end 
```

这是动态生成的表格

```
<form method="POST" action="/exams/1/questions/9">
    <input name="authenticity_token" type="hidden" value="XXYYZZ=">
    <input name="[question]template" value="Image Answers"><input name="[question]text" value="Which of these is a duck?">
</form> 
```

我知道我可以将 post :create 添加到问题的成员以手动映射它，但我想知道为什么这不能开箱即用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:34:08.113

一个快速测试应用程序显示标准 form_for 包含一个方法字段，其中指定了 put。将此字段添加到我动态生成的表单中解决了这个问题。

# xml - 如何使用 XQuery 函数解析源 XML 的特定部分？

> ID：12249314
> 
> 赞同：0
> 
> 时间：2012-09-03T13:58:43.413
> 
> 标签：xml, function, xquery

我需要在以下 XML 文件的基础上创建一个 DOT 图。

```
<layout>
 <layout-structure>
    <layout-root id="layout-root">
        <layout-chunk id="header-text">
             <layout-leaf xref="lay-1.01" location="row-1" area-ref="content"/>
             <layout-leaf xref="lay-1.02" location="row-2" area-ref="content"/>
        </layout-chunk>
        <layout-leaf xref="lay-1.03" location="row-3" area-ref="content"/>
    </layout-root>
    <layout-root id="layout-root-two">
        <layout-chunk id="header-text-two">
         <layout-leaf xref="lay-1.04"/>
             <layout-leaf xref="lay-1.05"/>
        </layout-chunk>
    </layout-root>
 </layout-structure>
<realization>
    <text xref="lay-1.01 lay-1.04"/>
    <text xref="lay-1.02 lay-1.05"/>
    <graphics xref="lay-1.03"/>
</realization>
<layout> 
```

为此，我使用以下查询为 XML 中的每个**布局根**元素生成 DOT 标记：

```
declare variable $newline := '&#10;';
declare variable $dotgraphics := '[shape="box", style="filled", color="#b3c6ed"]';

declare function local:ref($root) {
 string-join((
  for $chunk in $root/layout-chunk
  return (
  concat('  "', $root/@id, '" -- "', $chunk/@id, '";', $newline),
  local:ref($chunk)
  ),
 local:leaf($root)), "")
 };

declare function local:leaf($root) {
 for $leaf in $root/layout-leaf
 return concat('  "', $root/@id, '" -- "', $leaf/@xref, '";', $newline)
};

declare function local:gfx($doc) {
for $layout-leafs in $doc//layout-leaf
let $graphics := $doc/realization//graphics
where $graphics[contains(@xref, $layout-leafs/@xref)]
return concat('"', $graphics/@xref, '" ', $dotgraphics, ';', $newline)
};

let $doc := doc("layout-data.xml")/layout
for $root in $doc/layout-structure/*
return string-join(('graph "', $root/@id, '" { ', $newline,
local:gfx($doc),local:ref($root),'}', $newline), "") 
```

**两个layout-root**元素的查询结果如下所示：

```
graph "layout-root" { 
"lay-1.03" [shape="box", style="filled", color="#b3c6ed"];
"layout-root" -- "header-text";
"header-text" -- "lay-1.01";
"header-text" -- "lay-1.02";
"layout-root" -- "lay-1.03";
}
graph "layout-root-two" { 
"lay-1.03" [shape="box", style="filled", color="#b3c6ed"];
"layout-root-two" -- "header-text-two";
"header-text-two" -- "lay-1.04";
"header-text-two" -- "lay-1.05";
} 
```

如您所见，如果元素是**graphics**类型，查询使用以下函数来更改 DOT 标记的颜色和形状。

```
declare function local:gfx($doc) {
for $layout-leafs in $doc//layout-leaf
let $graphics := $doc/realization//graphics
where $graphics[contains(@xref, $layout-leafs/@xref)]
return concat('"', $graphics/@xref, '" ', $dotgraphics, ';', $newline)
}; 
```

但是，这不会产生想要的结果，因为它`"lay-1.03" [shape="box", style="filled", color="#b3c6ed"];`也为第二个图（名为*layout-root-two*）返回该线，尽管它应该只出现在第一个图（名为*layout-root*）中。

我应该如何修改该函数，以便在**layout-structure下的每个****layout-root的情况下检查****图形**元素？

 ****我尝试使用变量*$root*调用该函数，但这会导致静态错误。

想要的结果如下所示：

```
graph "layout-root" { 
"lay-1.03" [shape="box", style="filled", color="#b3c6ed"];
"layout-root" -- "header-text";
"header-text" -- "lay-1.01";
"header-text" -- "lay-1.02";
"layout-root" -- "lay-1.03";
}
graph "layout-root-two" { 
"layout-root-two" -- "header-text-two";
"header-text-two" -- "lay-1.04";
"header-text-two" -- "lay-1.05";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:31:03.087

您需要`realization`，它不在 的子树中`$root`。尝试只传入`graphics`节点：

```
declare function local:gfx($root, $graphics) {
  for $layout-leafs in $root//layout-leaf
  where $graphics[contains(@xref, $layout-leafs/@xref)]
  return concat('"', $graphics/@xref, '" ', $dotgraphics, ';', $newline)
};

let $doc := doc("layout-data.xml")/layout,
    $graphics := $doc/realization//graphics
for $root in $doc/layout-structure/*
return string-join(('graph "', $root/@id, '" { ', $newline,
         local:gfx($root, $graphics),local:ref($root),'}', $newline), "") 
```****

# java - Java - 按钮从arrayList和window（jframe）中删除当前项目/对象

> ID：12249326
> 
> 赞同：2
> 
> 时间：2012-09-03T13:59:26.033
> 
> 标签：java, arraylist

![在此处输入图像描述](../Images/d798568fa11ddc473259124b6f02c6c4.png)

我已经从原始帖子中更新了这个，现在我可以添加/删除项目，但是最后一个项目被卡住了......这似乎与按钮状态有关......最后一个项目的“del”按钮将变灰...单击时，“添加新项目”按钮似乎有时会影响这一点。另外，如果您对如何改进我可能的粗略代码有任何其他意见......

```
package com.jlab.inventory;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Item extends JPanel implements ActionListener {
    private static final long serialVersionUID = 1L;
    JTextField volume = new JTextField("#vol");
    JButton deleteItem = new JButton("-del");
    Inventory inventory;

    public Item(Inventory inv) {
            deleteItem.addActionListener(this);
            this.setBackground(Color.gray);
        this.setPreferredSize(new Dimension(400, 50));
        this.add(volume);
        this.add(deleteItem);
        inventory = inv;

    }
    public void actionPerformed(ActionEvent e) {
        System.out.println("item action");
        inventory.removeItem(this);

    }
}

package com.jlab.inventory;
import java.awt.Color;
import javax.swing.*;
import java.awt.*;
import java.util.ArrayList;
import java.awt.event.*;

public class Inventory implements ActionListener {
        JTextField volumeTotal = new JTextField("Volume Total Value"); // count total item Volume 
        JFrame window = new JFrame(); // new items to be added during run
        JButton newItemButton = new JButton("Add new item");
    public ArrayList<Item> itemList = new ArrayList<Item>(); // not static

    public static void main(String args[]) {
        Inventory store = new Inventory();
        store.runStore();
    }
    public Inventory() { // constructor initializes program's main interface and data
        newItemButton.addActionListener(this);
        window.setPreferredSize(new Dimension(460, 700));
        window.setLayout(new FlowLayout());
        window.add(volumeTotal);
        window.add(newItemButton);
        window.pack();
        window.setVisible(true);
    }
    public void runStore() {
        System.out.println("revalidating");
        window.revalidate();
    }
    public void actionPerformed(ActionEvent e) {
        System.out.println("adding new item");
        itemList.add(new Item(this));
        System.out.println(itemList.size());
        window.add(itemList.get(itemList.size()-1));
        runStore();

    }

public void removeItem(Item item) { // -removes Item passed in: from ArrayList + GUI
    itemList.remove(item);
    window.remove(item);
    runStore();
}
    //addItem(Item i) {
    // add item to arraylist
    // add item to gui
    //}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:32:59.900

修改可见容器的内容时​​，您必须验证并重新绘制它。所以我修改了你的`removeItem()`方法，如下所示，它现在可以工作了。

```
public void removeItem(Item item) { // -removes Item passed in: from ArrayList + GUI
    itemList.remove(item);
    window.remove(item);
    window.validate();
    window.repaint();
    runStore();
} 
```

# c# - 在两个下拉列表 mvc 4 之间连接

> ID：12249335
> 
> 赞同：5
> 
> 时间：2012-09-03T13:59:54.337
> 
> 标签：c#, asp.net-mvc-4

我有预付产品销售。经销商可以有子经销商经销商可以为每种产品设置价格，并且他对每种产品都有最大的义务。现在我喜欢在销售页面的 mvc c# 站点项目中拥有两个 DropDowmList，当我从第一个 ddl 获取产品时，我希望我的另一个 ddl（他必须销售多少产品）从我的数据库连接。

编辑：例如，经销商要出售三种产品： productA - 5 个单位出售 productB - 20 productC - 15 当他在第二个 ddl 或 textboxForNumber(min,max) 上选择 productB 时，他应该看到从 1 到 20 的范围

我尝试创建一个这样的新模型：

```
 public int ProductObligoByDealerID { get; set; }

    public int DealerID { get; set; }
    public virtual Dealer Dealer { get; set; }

    public int ProductID { get; set; }
    public virtual Product Product { get; set; }

    public uint MonthObligo { get; set; } 
```

但我无法将这两个 ddl 连接在一起。

编辑：

我尝试使用 ViewBag 来执行此操作，就像其他 ddl 资源列表一样。

```
var AllObligoProdact = db.ProductObligo.Where(p => p.DealerID == currentDealer.DealerID);

foreach (var item in AllObligoProdact)
 ViewBag.ProductObligo[item.Product.ProductID].max = item.MonthObligo; 
```

并在 cshtml 方面

```
 <div class="editor-label">
        @Html.LabelFor(model => model.DealerProductID)
    </div>
    <div class="editor-field">
        @Html.DropDownList("DealerProductID", string.Empty)
        @Html.ValidationMessageFor(model => model.DealerProductID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.NumOfMonth)
    </div>
    <div class="editor-field">
        @*Html.EditorFor(model => model.NumOfMonth)*@
         @Html.TextBoxFor(model => model.NumOfMonth , new {type="number",min="0",max=ViewBag.ProductObligo[Model.DealerProductID].max })

             @*.DropDownList("NumOfMonth", string.Empty)*@
        @Html.ValidationMessageFor(model => model.NumOfMonth)
    </div> 
```

但我仍然一无所获：/在数据库中使用新表是个好主意，或者也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T17:56:00.127

首先，我将摆脱`ViewBag`将数据（用于下拉列表）从控制器传输到视图。我会将其添加为我的 ViewModel 的属性。

```
public class ProductSale
{  
   public IEnumerable<SelectListItem> Products{ get; set; }
   public int SelectedProduct { get; set; }

   public IEnumerable<SelectListItem> SaleNumbers{ get; set; }
   public int SelectedSaleNumber { get; set; }

   //Other Existing properties also.

  public ProductSale()
  {
     Products=new List<SelectListItem>();
     SaleNumbers=new List<SelectListItem>();
  }
} 
```

现在在我的 GET 操作中，我将设置 Products 集合并将其发送到视图，

```
public ActionResult Add()
{
  var vm=new ProductSale();
  //The below code is hardcoded for demo. you mat replace with DB data.
  vm.Products= new[]
  {
    new SelectListItem { Value = "1", Text = "Product A" },
    new SelectListItem { Value = "2", Text = "Dealer B" },
    new SelectListItem { Value = "3", Text = "Product C" }
  };      
  return View(vm);
} 
```

在您的强类型视图中，

```
@model ProductSale
@using(Html.Beginform())
{
  @Html.DropDownListFor(x => x.SelectedProduct, 
     new SelectList(Model.Products, "Value", "Text"), "Select Product")

  @Html.DropDownListFor(x => x.SelectedSaleNumber, 
     new SelectList(Model.SaleNumbers, "Value", "Text"), "Select Number to sell")

  <input type="submit" />
} 
```

现在，当用户从下拉列表中选择一种产品时，我们需要一些 javascript 来加载要出售的数字。我们将在这个视图（或布局视图）中包含[jQuery](http://jquery.com/)库，并将这个 java 脚本添加到我们的视图中。

```
<script type="text/javascript">
    $(function () {
        $("#SelectedProduct").change(function () {
            var self = $(this);
            var items="";
            $.getJSON("@Url.Action("GetSaleNumbers","Product")/"+self.val(),
                                                                function(data){
              $.each(data,function(index,item){
                items+="<option value='"+item.Value+"'>"+item.Text
                                                                    +"</option>";
              });
              $("#SelectedSaleNumber").html(items);
            });
        });
    });
</script> 
```

它的作用是，它监听`change`第一个下拉菜单的事件，当它发生时，它使用[getJSON](http://api.jquery.com/jQuery.getJSON/)方法（写在我们包含的 jquery 库中）进行 GET 调用，并以`JSON`格式获取结果并解析它并将其附加到第二个下拉菜单。

Assuming`GetSaleNumbers`是控制器中的一个 Action 方法，它接受产品的 id 并以格式`Product`发送该产品的所有产品销售编号。`JSON`

```
public ActionResult GetSaleNumbers(int id)
{
  List<SelectListItem> saleNumbers=new List<SelectListItem>();
  //The below code is hardcoded for demo. you mat replace with DB data 
  //based on the  input coming to this method ( product id)
  saleNumbers.Add(new SelectListItem { Value="1" , Text="1" }, 
                  new SelectListItem { Value="2" , Text="2" }, 
                  new SelectListItem { Value="3" , Text="2" }
                 );
  return Json(saleNumbers,JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:03:41.683

您必须编写 javascript 并在第一个下拉列表更新（选择更改）时对服务器进行 ajax 调用以从数据库中获取数据以使用此数据更新第二个下拉列表。

# java - 从Java中的组合框中删除所有项目

> ID：12249336
> 
> 赞同：7
> 
> 时间：2012-09-03T13:59:54.833
> 
> 标签：java, swing, jcombobox

我需要从组合框中删除所有项目

```
int itemCount = combo.getItemCount();

for(int i = 0; i < itemCount; i++){
  combo.removeItemAt(0);
} 
```

此代码将删除除最后一项之外的所有项目。它给出了一个`NullPointerException`. 如何解决？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-03T14:01:31.323

问题中的代码通常可以工作。但是，它看起来像一个线程问题。另一个线程可能正在弄乱这些项目。

但是，我建议您最好使用以下`removeAllItems();`方法：

```
combo.removeAllItems(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:03:16.170

[JComboBox.removeAllItems()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html#removeAllItems%28%29)怎么样？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-12T19:47:30.920

您可以使用

***this.combo.removeAllItems();***

删除 JComboBox 中的所有项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-22T08:51:22.123

In second line:

`combo.removeItemAt(0)`;

I think instead of `0` it should be `i`.

do it in reverse order as:

```
for(int i=combo.getItemCount()-1;i>=0;i--){
    combo.removeItemAt(i);
} 
```

But in my case `combo.removeAllItems()` works fine

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T23:59:40.963

它与另一个线程相关的假设并不总是正确的。它可能是导致问题的线程本身。

可能会发生此异常，因为在删除组合项时触发了一个事件，并且在此事件处理方法中您仍然引用组合框项。

例如，当您在代码中的某个位置（除了在 actionPeformed() 中）使用 combo.removeItemAt(0) 或 removeAllItems() 从组合框中删除最后一项时，仍然会触发/执行事件 actionPerformed。但通常 actionPerformed() 方法包含对用户操作（用户单击组合框上的某处）做出反应的代码。因此，当最后一个项目被删除时，组合框中不再有项目，并且在 actionPerformed() 中对项目或索引的任何引用都会导致异常。

**对此的解决方案**是将代码从 actionPerformed() 移动到例如 mouseClicked() 或其他事件处理程序，具体取决于您想要执行的操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-03T14:08:14.020

使用 .removeAllItems() 方法从组合框中删除所有项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-21T06:07:17.310

removeAllItems() 它确实删除了所有东西，但是在将数据添加到组合框后它不会在那里显示，nullPointException 会显示

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-18T13:21:07.023

*使用它从组合框中删除所有元素：*

```
DefaultComboBoxModel model = (DefaultComboBoxModel) ComboBox.getModel();
model.removeAllElements(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-29T08:30:15.600

通常它发生是因为您有一个与 JComboBox 相关的事件。如果您在 JComboBox 中有控件项可以操作，则可以解决此问题，例如：

```
jComboBoxExample.addActionListener (new ActionListener () {
   public void actionPerformed (ActionEvent e) {
     do_run ();
   }
});

public void do_run() {
  int n=jComboBoxPerfilDocumentos.getItemCount(); <--THIS IS THE SOLUTION
  if (n> 0) { 
    String x = jComboBoxPerfilDocumentos.getSelectedItem (). ToString ();
  }
} 
```

# iphone - 在 TableView 的自定义单元格中添加单选按钮并且无法访问外部

> ID：12249337
> 
> 赞同：4
> 
> 时间：2012-09-03T13:59:58.517
> 
> 标签：iphone, objective-c, ipad, ios5, ios4

我在 UITableView 的自定义单元格中添加单选按钮并在其上调用方法来更改其图像或背景图像。我能够设置来自发件人的选定按钮图像，但我想将其他按钮设置为我无法设置的原始位置，因为以下功能需要看起来像单元格中的正确单选按钮

我在此方法中获取正确的索引路径时也面临问题 - (void) TableRadioButtonSelection:(id)sender;

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *RadioIdentifier = @"RadioCellIdentifier";

        RadioBtnCell *myRadiocell = (RadioBtnCell *)[tableView dequeueReusableCellWithIdentifier:RadioIdentifier];
        if(myRadiocell == nil) {
            [[NSBundle mainBundle] loadNibNamed:@"RadioBtnCell" owner:self options:nil];
            myRadiocell = radioCell;

            //[myRadiocell.radioBtn1 setBackgroundImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
            myRadiocell.radioBtn1.tag = ButtonTag;
            //[myRadiocell.radioBtn2 setBackgroundImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
             myRadiocell.radioBtn2.tag = ButtonTag1;
            //[myRadiocell.radioBtn3 setBackgroundImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
             myRadiocell.radioBtn3.tag = ButtonTag2;
            myRadiocell.tag = RadioTag;

            [myRadiocell.radioBtn1 addTarget:self action:@selector(TableRadioButtonSelection:) forControlEvents:UIControlEventTouchUpInside];
            [myRadiocell.radioBtn2 addTarget:self action:@selector(TableRadioButtonSelection:) forControlEvents:UIControlEventTouchUpInside];
            [myRadiocell.radioBtn3 addTarget:self action:@selector(TableRadioButtonSelection:) forControlEvents:UIControlEventTouchUpInside];

            myRadiocell.backgroundView.backgroundColor = [UIColor clearColor];
            self.radioCell = nil;

        }

return  myRadiocell;

}

- (void) TableRadioButtonSelection:(id)sender {

    //RadioBtnCell *buttonCell = (RadioBtnCell*)[[btn superview] superview];

    RadioBtnCell *cell = (RadioBtnCell *)[self.questionTblView viewWithTag:RadioTag];
    UIButton *mybtn = (UIButton *)[cell.contentView viewWithTag:ButtonTag];
    UIButton *mybtn1 = (UIButton *)[cell.contentView viewWithTag:ButtonTag1];
    UIButton *mybtn2 = (UIButton *)[cell.contentView viewWithTag:ButtonTag2];

    [mybtn setBackgroundImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
    [mybtn1 setBackgroundImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
    [mybtn2 setBackgroundImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];

     //NSLog(@"%@",[cell subviews]);
    UIView* mysubview = [cell.contentView viewWithTag:ButtonTag]; // Make sure your UITextField really *is* the last object you added.
    UIView* mysubview1 = [cell.contentView viewWithTag:ButtonTag1];
    UIView* mysubview2 = [cell.contentView viewWithTag:ButtonTag2];

   // I am unable to set Image of other buttons apart from sender.

    //for(UIView *item in [mysubview subviews]) {

        if ([mysubview isKindOfClass:[UIButton class]]) {
            UIButton *newBtn = (UIButton*)mysubview;
            UIButton *newBtn1 = (UIButton*)mysubview1;
            UIButton *newBtn2 = (UIButton*)mysubview2;

            NSLog(@"OK %@",newBtn);
            //[newBtn setBackgroundImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
            [newBtn setImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
            [newBtn1 setImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];
            [newBtn2 setImage:[UIImage imageNamed:@"radiobtn.png"] forState:UIControlStateNormal];

        }
    //}

    NSIndexPath *indexPath = [self.questionTblView indexPathForCell:cell]; 
    NSLog(@"%d",indexPath.row);

    //  Below code is setting Image of selected Button properly as checked but above code for making button onto original state is not setting button image or background image

    UIButton *btn = (UIButton *)sender;
    [btn setImage:[UIImage imageNamed:@"radiobtn_chk.png"] forState:UIControlStateNormal];
    //[btn setBackgroundImage:[UIImage imageNamed:@"radiobtn_chk.png"] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:38:04.350

尝试将此行更改为此；-

```
RadioBtnCell *cell = (RadioBtnCell *)[self.questionTblView viewWithTag:RadioTag];

to

     RadioBtnCell *cell = (RadioBtnCell *)[self.questionTblView cellForRowAtIndexPath:*indexPathofthecell*]; 
```

通过这种方式，您可以访问表格视图单元格。之后，您可以从单元格内容视图中获取按钮并进行进一步编码。

假设如果您不知道 indexPath，那么您可以从表格视图的 rowNumber 创建 indexPath（我认为您已将表格行号存储在 RadioTag 中，如果是，则可以将此字段用作参数）。

# javascript - 当在文档中拖动鼠标上/鼠标离开时，我想调用我的 Ajax 请求

> ID：12249342
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:00:36.167
> 
> 标签：javascript, jquery, ajax

对于滑块范围 - 当在文档中拖动和 mouseup/mouseleave 时，我想调用我的 Ajax 请求。

解释：当我鼠标向下滑动滑块时，我想说 isDown = "true" 但它不起作用。

谁能帮我解决这个问题，让我知道如何实现这一目标。

```
// Default 
isDown = false

$("#slider-range").find('a').mousedown(function(){
    isDown=true;
    console.log(isDown); // It works here!
});

console.log(isDown); // It doesn't works here

if(isDown)
{
    $(document).onmouseup(function() {
        return setAjaxRequest();
        isDown = false;
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:59:14.833

您需要在事件函数之外声明 isDown 以在这些函数之间共享它！尝试这个：

```
$(document).ready(function() {

    var isDown = false;

    // On a mousedown on a slide link
    $("#slider-range").find('a').mousedown(function(){
        isDown = true;
    });

    // on MouseUp on the document
    $(document).one('mouseup', function() {
        if (isDown) {
            return setAjaxRequest();
            isDown = false;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:36:07.677

这是最终的工作代码：

```
 $("#slider-range").find('a').mousedown(function(e){
        isDown=true;
        console.log(isDown);
            if(isDown)
            {
                $(document).one('mouseup',function(e) {
                        setAjaxRequest();
                        isDown = false;
                });
            }
            else
            {
                isDown = false;
            }
    }); 
```

# recursion - 找到这个序列的一般项

> ID：12249345
> 
> 赞同：1
> 
> 时间：2012-09-03T14:00:37.783
> 
> 标签：recursion, sequence, fibonacci, oeis

我一直面临着找到这个序列的一般术语或递归关系的挑战

5,18,44,96,195.... 我唯一的提示是这个序列是一个应用的斐波那契序列。有人可以建议找到复发或第n个术语的方法。我查看了 OEIS，但没有发现这个特定整数序列的注释。我搜索了很多地方，但都没有成功。另外，我认为这个序列的项可以用对数时间来确定。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T20:52:08.423

该序列的封闭形式是

```
a(n) = (n*Luc(n+6) - 4*Fib(n))/5 
```

其中`Luc(k)`是第`k`-个卢卡斯数，`Fib(k)`第`k`-个斐波那契数。由于`Luc(k) = Fib(k+1) + Fib(k-1)`，公式可以很容易地改写为仅使用斐波那契数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T19:56:17.797

你能提供更多的序列成员吗？

NVM，我明白了。

```
a[n] = a[n-1] + a[n-2] + Fibonacci[n+5] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:00:27.117

在 OEIS 上搜索序列 5、18、44 的一部分，得到[A037140](http://oeis.org/A037140)。该序列的形式为：

```
a(n) = F(n+9)-(29+8*n) 
```

尝试使用部分斐波那契数列的类似方法`F(n+k)-your_sequence(n)`给出：

```
F(n+10)-your_sequence(n) = 50, 71, 100, 137, 182 
```

该序列有很好的进展：`29+21*n+8*n*(n-1)/2`. 这个序列有介绍：

```
a(n) = F(n+10)-(29+21*n+4*n*(n-1)), n=0, 1, ... 
```

# f# - 如何对 2 条记录的字段进行模式匹配？

> ID：12249348
> 
> 赞同：3
> 
> 时间：2012-09-03T14:00:54.270
> 
> 标签：f#, pattern-matching

```
type A =
  {
    ...
    id: int;
    ...
  } 
```

我希望我能做到这一点

```
let Add (x:A) (y:A) =
     match x,y with
      | {x.id=0,y.id=1} -> ... 
```

如果我不关心`x`and的顺序`y`（因此函数是对称的），是否有任何技巧来定义函数，我也不介意参数是 a`tuple (x,y)`还是更高阶函数`x,y`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T15:01:29.087

另一个语法是：

```
let add x y =
    match x, y with
    | {id = 0}, {id = 1} | {id = 1}, {id = 0} -> ..
    | _ -> .. 
```

[请参阅http://msdn.microsoft.com/en-us/library/dd547125.aspx](http://msdn.microsoft.com/en-us/library/dd547125.aspx)上的记录模式部分

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T14:14:29.627

```
let add (x: A) (y: A) =
     match x.id, y.id with
     | 0, 1 | 1, 0 -> (* do some thing *)
     | _ -> (* do some thing else *) 
```

如果您只关心一个字段，请直接对其进行模式匹配。您可以使用[Or 模式](http://msdn.microsoft.com/en-us/library/dd547125.aspx)来获得对称功能。

# jquery - jQuery Mobile 和带有 changePage 的多个 ajax 请求

> ID：12249349
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:01:05.673
> 
> 标签：jquery, ajax, jquery-mobile

我在 JQM 应用程序中有两个不同的 ajax 请求，如下所示。第一个在页面表单提交上执行，数据写入数据库，显示警报，然后将用户重定向到发生相同序列的下一页。

第一个请求工作正常，但第二个请求执行两次（警报显示两次，数据库写入两次）。如果我添加第三个请求，它会执​​行三次等等。我需要做些什么来防止多次执行？

```
$(document).live('pagebeforeshow', function () {
  $("#Step1").click(function(){

    var formData = $("#step1").serialize();

    $.ajax({
        type: "POST",
        url: "scripts/script.php?type=Step1",
        cache: false,
        data: formData,
        success: function(data) {
          if(data.status == 'success') {
            alert('success Step1');
            //When finished redirect to the next step
            $.mobile.changePage('#Step2', {transition: "slideup"});
        }             
          else if(data.status == 'error') {
            alert('error');
              $("#notification").text(data.message);
          }
        },           
        //error: onError           
    });

    return false;
  });

  $("#Step2").click(function(){
    var formData = $("#step2").serialize();

    $.ajax({
        type: "POST",
        url: "scripts/script.php?type=Step2",
        cache: false,
        data: formData,
        success: function(data) {
          if(data.status == 'success') {
            alert('success Step2');
            //When finished redirect to the next step
            $.mobile.changePage('#Step3', {transition: "slideup"});
        }             
          else if(data.status == 'error') {
            alert('error');
              $("#notification").text(data.message);
          }
        },           
        //error: onError
    });

    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:55:04.620

我建议不要将事件处理程序绑定到`pagebeforeshow`DOM 中的每个页面的事件，而是使用该`pageinit`事件，因为它每页只运行一次（每次加载，因此如果刷新页面，它会再次触发）。

此外，`.live()`自 jQuery 1.7 起已弃用，因此开始使用`.on()`：

```
//run event handler for each pseudo-page as it initializes (runs once per pseudo-page)
$(document).on("pageinit", ".ui-page", function () {

    //bind event handler to #Step1, #Step2 click events
    $(this).find("#Step1").on("click", function () { /*event handler code here*/ });
    $(this).find("#Step2").on("click", function () { /*event handler code here*/ });
}); 
```

这样，您将只附加一次事件处理程序，并确保将它们附加到正确的元素（如果您在 DOM 中有多个伪页面，这将确保您获得正确的`#Step1`元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:53:33.743

由于每次显示页面时都运行这些单击绑定，因此您会收到多个请求 - 它们在每次触发 pagebeforeshow 事件时运行，因此您运行的每个 changePage() 都会将相同的函数添加到元素的单击回调中。

您需要做的是在应用程序启动时将它们绑定**一次。**通过查看您的代码，我假设您的应用程序同时在 DOM 中有多个页面，您可以通过 $.mobile.changePage() 函数更改它们。如果所有页面都存在，您可以在它们生成后绑定一次点击回调。更具体地说，摆脱`$(document).live('pagebeforeshow', function () {}`，只需在按钮存在时绑定单击事件。

# c# - SQL/存储过程问题

> ID：12249351
> 
> 赞同：0
> 
> 时间：2012-09-03T14:01:06.047
> 
> 标签：c#, sql, stored-procedures

我有一种情况，我正在执行一个存储过程并在我的 c# 代码中获取返回 55 条记录的结果，现在我在行中有一个列，由于执行另一个 sql 查询需要显示该列。我已经尝试了所有方法，但无法弄清楚如何实现。请帮忙。

我调用正常工作的过程的 C# 代码是：

```
public static MonthlyFinancialReportCollection GetList(SASTransaction withinTransaction)
{
    MonthlyFinancialReportCollection records = null;

    using (DataSet ds = Helpers.GetDataSet("ShowPremiumCalcReport", withinTransaction))
    {
        if (ds.Tables.Count > 0)
        {
            records = new MonthlyFinancialReportCollection();

            foreach (DataRow dr in ds.Tables[0].Rows)
            {
                if (!string.IsNullOrEmpty(dr[0].ToString())) 
                     records.Add(FillDataRecord(dr));                        
            }
        }
    }

    return records;
} 
```

现在我想针对上述函数中调用的过程运行一个查询，因此它将用查询的计算结果填充列之一。

```
select 
    Sum(WorkingHours.WHO_Amount * dbo.PremiumLevel.PLE_Premium) as Snr_Teaching_Amt
from policy, policyline, coveroption,
     premiumlevel, WorkingHours
where policy.pol_id=policyline.pli_pol_id 
and   policyline.pli_cop_seniorteachingcoverid=coveroption.cop_id 
and   premiumlevel.ple_own_id=policy.pol_own_id 
and   premiumlevel.ple_sca_id=coveroption.cop_sca_id 
and   WorkingHours.who_pos_id=policyline.pli_pos_id
and   pol_dcsf=row["snr teaching staff"]` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:10:06.597

这不是问题

**第一个选项**

```
 You execute the first stored procedure.
 Then foreach row 
    You execute the Second one with a parameter from the first one
 endfor 
```

**第二种选择：**

```
 You use a Cursor on the first stored procedure to get all the results in one call 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:26:36.000

最慢和最简单的方法：

*   使您的第二个查询成为接受“snr 教学人员”作为参数的存储过程。
*   从第一个查询中向 DataTable 添加一个新列：ds.Tables[0].Columns.Add("Snr_Teaching_Amt", typeof(decimal));
*   为您创建的第二个存储过程创建一个 SqlCommand 和一个 SqlParameter。
*   循环DataTable并将“snr教员”放入SqlParameter的值中。
*   使用 ExecuteScalar 运行 SqlCommand，返回值是第二个查询的结果，您可以将其保存在创建的列中。

但是我不推荐这种方式，因为您将有 55 + 1 个服务器往返，这并不酷。

中间的方式：

由于您的第二个查询返回单个值，因此将第二个查询设为 Sql 函数。您可以在第一个过程中调用它，例如：

```
SELECT *, dbo.MyFunction([snr teaching staff]) AS Snr_Teaching_Amt FROM ... 
```

这将具有更好的性能并且更易于维护。但是我同意马萨努的观点，您可以使用子查询组合这些过程。祝你好运;-)

# java - org.w3c.dom 节点 appendChild(Node newChild) 未删除现有元素

> ID：12249352
> 
> 赞同：0
> 
> 时间：2012-09-03T14:01:10.400
> 
> 标签：java, xml-parsing

在 java xml 文件中，我尝试使用 appendchild 将元素添加到连接节点。我希望现有的服务器节点被新值替换，但它没有发生。

我[在此功能的文档中](http://www.w3.org/2003/01/dom2-javadoc/org/w3c/dom/Node.html#appendChild_org.w3c.dom.Node_)看到现有节点将被删除。

win2k8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:08:38.353

[javadoc](http://www.w3.org/2003/01/dom2-javadoc/org/w3c/dom/Node.html#appendChild_org.w3c.dom.Node_)说：

> 将该节点添加`newChild`到该节点的子节点列表的末尾。**如果`newChild`已经在树中，则首先将其删除。**

这并不意味着将替换具有相同名称的标签。这意味着，如果`Node`对象已经在父对象中，它将首先被删除，并且它是关于传递对`Node`已经添加到父对象的 a 的引用，而不是关于 XML 标记。

如果你想用你自己的替换现有的 XML 元素，我建议首先找到（通过迭代[`NodeList`返回的表单`getChildNodes()`](http://www.w3.org/2003/01/dom2-javadoc/org/w3c/dom/Node.html#getChildNodes__)）并删除不需要的元素[`removeChild(node)`](http://www.w3.org/2003/01/dom2-javadoc/org/w3c/dom/Node.html#removeChild_org.w3c.dom.Node_)。

# c# - Syncfusion 功能区选项卡 - 向右对齐按钮

> ID：12249353
> 
> 赞同：1
> 
> 时间：2012-09-03T14:01:13.150
> 
> 标签：c#, winforms, syncfusion

`ribbonForm`我用`Syncfusion`winform构建应用程序。我希望在一个功能区选项卡中，它将是一个向右对齐的按钮（所有其他按钮向左对齐）。

我做了油漆来演示我在附图中的意思![在此处输入图像描述](../Images/91bd0c7b0d007f9995d0de8031cdbb78.png)。

我怎样才能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:41:53.953

的选项卡区域`RibbonControlAdv`是一个工具条列表项。默认情况下它的孩子是`ToolStripEx`，但我们可以添加其他控件，如按钮，通过将其添加到工具条面板的控件中。为了满足您的要求，该按钮已添加到功能区选项卡的右侧。

```
button = getButton();
this.toolStripTabItem1.Panel.Controls.Add(button);
this.toolStripTabItem1.Panel.Controls.SetChildIndex(button, this.toolStripTabItem1.Panel.Controls.Count - 1);
button.BringToFront(); 
```

您也可以[在此处](http://www.syncfusion.com/downloads/Support/DirectTrac/94034/WindowsFormsApplication661-1932340175.zip)下载示例。

# c# - 在文本框中键入时自动放置逗号和点

> ID：12249355
> 
> 赞同：0
> 
> 时间：2012-09-03T14:01:21.490
> 
> 标签：c#, wpf, textbox

我有一个 WPF 应用程序，其中有一个文本框，我希望当用户在那里键入整数时，它们应该通过放置 和 自动格式化为货币。

欢迎提出建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:05:31.437

我认为您想使用[Masked TextBox](http://visualstudiogallery.msdn.microsoft.com/ba94d841-80bf-4faa-9543-2fcad04f5998)。

# c# - Parallel.ForEach 性能不佳

> ID：12249356
> 
> 赞同：2
> 
> 时间：2012-09-03T14:01:23.660
> 
> 标签：c#, .net, performance, parallel-processing, parallel.foreach

我写了一个小程序，将一堆文件转换为 pdf。

该程序执行以下操作：

*   `FileInfo`从文件夹中获取对象数组 （10'000 文档）
*   对于每个`FileInfo`
    *   `FileInfo.CopyTo()`使用,创建备份副本
    *   使用一些 Aspose 库将文档转换为 PDF
    *   转换后，将 PDF 复制到新的目的地
    *   在 foreach 内部，一个事件由 WinForm UI 引发和处理以显示一些进度

根据文档的大小，文档的转换可能需要 0-3 秒。我认为这将是一个完美的候选人`Parallel.ForEach`，所以我修改了程序。

然而，转换需要 1 小时而不是传统的 foreach 1.5 小时`Parallel.Foreach`（我尝试过的服务器有 2 x Intel Xeon Procs）。

我做错了什么或者我需要考虑什么才能获得更好的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:18:16.533

我建议通过查看任务管理器中的 CPU 和资源监视器中的磁盘 I/O 响应时间/队列长度和/或查看各种可用的性能计数器来检查您的操作是否受 CPU 限制或 I/O 限制。

我怀疑您的问题很可能是您现在正在同时执行多个文件副本（用于创建备份和写入转换后的文件）。与随机访问相比，硬盘的顺序访问（如果您一次只写入/读取一个文件）要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:05:42.943

我可以考虑几个可能导致 Parallel.Foreach 变慢的问题：

1.  运行的线程多于处理器。
2.  Aspose 库不支持多线程。
3.  GUI线程的多种方法是线程安全的，不能同时从不同的线程访问。

我还建议您阅读我之前关于[任务并行库的答案 - 单核并行](https://stackoverflow.com/questions/12140201/task-parellel-library-parellelism-on-single-core/)

它谈论单核，但它可以反映您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:07:53.377

这将取决于很多事情。我当然会尝试将 MaxDegreeOfParallelism 设置为 2，希望如果转换是受 CPU 限制和单线程的，那么每个内核有一个应该接近理想，尽管肯定会进一步试验。

但是您的方法假设转换本身并没有很好地利用多个内核。如果确实如此，并且它受 CPU 限制，那么它已经在对您尝试引入的内核进行某种并行使用，并且您可能会因此而降低整个事情的效率。

编辑：根据 svick 的评论，想法变得更加清晰。如果库不支持多线程使用，那么它不太可能在不出错的情况下走到这一步，但它对多线程的支持可能涉及大量内部锁定，当偶尔有并发调用时可能会很好，但非常昂贵如果你有长期的重并发。

# hibernate - Hibernate 中基于角色的访问控制

> ID：12249357
> 
> 赞同：2
> 
> 时间：2012-09-03T14:01:23.740
> 
> 标签：hibernate, security, acl, rhino, access-control

我正在开发一个基于 vert.x 平台的简单 CRUD 应用程序。我将 Rhino/JavaScript 用于后端部分，这允许我使用 Java 类。所以，Hibernate 是我的 ORM。我使用“动态映射”作为实体模式，它允许我使用 HashMaps 而不是 Java 类来处理持久对象。

问题是如何在这个架构中实现实体/行级访问控制。

我读过一些关于拦截器的东西，但我没有得到如何在那里过滤不允许的内容（抛出异常？）。使用过滤器也是一种选择，但据我所知，我只能控制查询，而不是持久化它们。

我现在找到的唯一解决方案是在预处理/后处理期间过滤数据，但我担心这可能是那里的性能瓶颈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:41:27.323

好吧，如果您的数据是绝对独立的，那么 hibernate 4.1 具有多租户支持 (http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html)。但是，如果不是这种情况，我建议同时使用拦截器（在持久化数据之前标记数据）和过滤器（只查询你应该看到的数据）

# php - 将 JSON 发布到 PHP 脚本

> ID：12249358
> 
> 赞同：2
> 
> 时间：2012-09-03T14:01:28.733
> 
> 标签：php, javascript, json, post

`JSON`我在尝试将from发送`javascript`到脚本时遇到了很长时间`PHP`：发送很好（我可以看到`JSON`in fiddler）但我在以下内容中什么也没收到`PHP script`：

`javascript`：

```
var person = {
  name: 'yoel',
  age: 28
};
xmlhttp.open("POST","http://localhost:8888/statisticsdb.php",true);
xmlhttp.setRequestHeader("Content-Type", "application/json");
xmlhttp.send(JSON.stringify(person)); 
```

`php`：

```
echo 'trying to print ' . var_dump($_POST["name"]); 
```

我显然希望看到一些东西，但 var_dump 什么也没返回。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:04:18.407

尝试：

```
$data = json_decode(file_get_contents('php://input'));
var_dump($data->name); 
```

这样做的原因是，您的 POST 请求的正文是：

```
{"name":"yoel","age":28} 
```

但是，php 需要类似（[ref](http://en.wikipedia.org/wiki/POST_%28HTTP%29)）的东西：

```
name=yoel&age=28 
```

json 字符串无法正确解析，因此`$_POST`将为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:09:59.367

`$_POST`保存从请求中解码的值`Content-Type application/x-www-form-urlencoded`，即它解析：

```
param1=value1&param2=value2 
```

进入：

```
array( 'param1' => 'value1', 'param2' => 'value2') 
```

如果您以 json 格式发送数据，则必须从[原始 php 输入中对其进行](http://php.net/manual/en/wrappers.php.php)[json_decode](http://php.net/manual/en/function.json-decode.php)：

```
$input = file_get_contents('php://input');
$jsonData = json_decode($input); 
```

您将拥有一个 PHP 对象，其中填充了您的 json 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:08:02.760

添加这个：

```
xmlhttp.setRequestHeader("Content-length", JSON.stringify(person).length); 
```

# c++ - “空”可变参数模板特化的地址

> ID：12249361
> 
> 赞同：4
> 
> 时间：2012-09-03T14:01:40.650
> 
> 标签：c++, templates, c++11, variadic-templates

我有一个可变参数模板成员函数定义为：

```
template<typename ... Params>
 VAlgorithm* CreateAlgorithm(const char *objectName, const char *className, Params ... par) 
```

我想获取 Params 不包含类型的专用版本的地址（我称之为“空”专业化），即：

```
VAlgorithm* CreateAlgorithm(const char *objectName, const char *className) 
```

我尝试了几种方法。天真的方式：

```
&AlgorithmFactory::CreateAlgorithm<> 
```

（例如，因为 &AlgorithmFactory::CreateAlgorithm< int > 有效）和更明确的方式：

```
(VAlgorithm* (*)(const char*, const char*))AlgorithmFactory::CreateAlgorithm<> 
```

通过明确的方式，GCC 4.7.1 说：

```
error: insufficient contextual information to determine type 
```

编译器似乎不理解“空”特化，它将缺少的模板类型解释为缺少信息而不是“无类型”信息。这样做的正确方法是什么？（很抱歉这个可能很幼稚的问题，但我对可变参数模板还很陌生，我没有找到关于这个主题的文档）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:32:57.183

您的代码应该可以工作；参见例如[http://liveworkspace.org/code/6253cf45f416be60879b93aa74c24de8](http://liveworkspace.org/code/6253cf45f416be60879b93aa74c24de8)

以下所有语法都对我有用：

```
struct S {
  template<typename... Args> static int *foo(const char *, const char *, Args...);
};

int main() {
    (int *(*)(const char *, const char *))S::foo<>;
    (int *(*)(const char *, const char *))S::foo;
    (int *(&)(const char *, const char *))S::foo<>;
    (int *(&)(const char *, const char *))S::foo;
    int *(&f)(const char *, const char *) = S::foo<>;
    int *(&g)(const char *, const char *) = S::foo;
    int *(*h)(const char *, const char *) = S::foo<>;
    int *(*i)(const char *, const char *) = S::foo;
} 
```

# system - Google 的 Golang 是解释器还是编译器？

> ID：12249364
> 
> 赞同：43
> 
> 时间：2012-09-03T13:37:36.257
> 
> 标签：system, gcc, go

我一直在研究 Golang，发现它有一个编译器。但它是将 Go 编译成汇编级代码还是只是将其转换为 BYTECODES 然后调用该编译？我的意思是，即使在 PHP 中，我们也能够将其转换为 BYTECODES 并具有更快的性能。Golang 是系统级编程和编译的替代品吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-03T13:47:42.857

这确实是一个编译器（实际上它嵌入了 2 个编译器），它可以生成完全自给自足的可执行文件。您不需要任何补充库或任何类型的运行时来在您的服务器上执行它。你只需要为你的目标计算机架构编译它。

从[文档中](http://golang.org/doc/install/source)：

> 有两个官方的 Go 编译器工具链。本文档重点介绍 gc Go 编译器和工具（6g、8g 等）。有关如何使用 gccgo（使用 GCC 后端的更传统的编译器）的信息，请参阅设置和使用 gccgo。
> 
> Go 编译器支持三个指令集。不同架构的编译器质量存在重要差异。
> 
> **amd64（又名 x86-64）；6g,6l,6c,6a** 成熟的实现。编译器有一个有效的优化器（注册器）并生成好的代码（尽管 gccgo 有时可以做得更好）。
> 
> **386（又名 x86 或 x86-32）；8g,8l,8c,8a** 媲美amd64端口。
> 
> **手臂（又名 ARM）；5g,5l,5c,5a** 仅支持 Linux 二进制文件。没有其他端口广泛使用，因此没有经过全面测试。
> 
> 除了低级操作系统接口代码之外，所有端口的运行时支持都是相同的，包括标记和清除垃圾收集器、高效的数组和字符串切片，以及对高效 goroutine 的支持，例如堆栈按需增长和收缩。
> 
> 编译器可以针对 FreeBSD、Linux、NetBSD、OpenBSD、OS X (Darwin) 和 Windows 操作系统。完整的支持组合在下面的环境变量讨论中列出。

在服务器上，您通常会针对`amd64`平台。

请注意，Go 以编译速度着称。在部署我的服务器程序时，我不会在开发计算机上为不同的平台构建：我部署源代码并直接在生产服务器上编译。自 Go1 以来，我从来没有在一个平台上编译过代码，也没有在其他平台上编译过。

在 Windows`exe`上，我在我的开发计算机上制作并简单地将其发送`exe`给从未安装过任何 Go 相关内容的人没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-15T02:50:12.997

> Go 可以快速编译为机器码，但具有垃圾收集的便利性和运行时反射的强大功能。它是一种快速、静态类型的编译语言，感觉就像是一种动态类型的解释语言。

来源 - [golang.org](https://golang.org/)

# java - 有没有办法将 JSR303 注释添加到 cxf 生成的类？

> ID：12249366
> 
> 赞同：4
> 
> 时间：2012-09-03T14:01:50.497
> 
> 标签：java, jaxb, bean-validation

标题可能说明了一切，我想知道是否可以告诉 cxf-codegen-plugin 添加例如 xsd-patterns 作为`@Pattern`注释。模式验证很好，但有时我只想检查单个元素而不是无数的 xml 行。

因此，我想知道是否有一个技巧/选项/肮脏的黑客可以帮助我转身

```
<xs:simpleType name="string2000">
    <xs:restriction base="xs:string">
        <xs:maxLength value="2000"/>
        <xs:minLength value="1"/>
        <xs:pattern value="[\p{IsBasicLatin}\p{IsLatin-1Supplement}-[ \t\r\n]][\p{IsBasicLatin}\p{IsLatin-1Supplement}-[\t\r\n]]*"/>
    </xs:restriction>
</xs:simpleType> 
```

进入

```
@Pattern(regexp = "\\p{IsBasicLatin}\\p{IsLatin-1Supplement}-[ \\t\\r\\n]][\\p{IsBasicLatin}\\p{IsLatin-1Supplement}-[\\t\\r\\n]]*")
@Size(min = 1, max = 2000) 
```

因为手动添加它对于这么多的 xml 来说是不行的，而且它确实会让事情变得更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:05:54.310

我没有使用 cxf-codegen-plugin 的直接经验，但是我也需要在我的 JAXB 生成的类中包含`@Pattern`、、`@Size`和其他`<xs:restriction />`从 XSD 派生的注释，并最终使用了 krasa-jaxb-tool，它就是这样做的。

请参阅[Blaise Doughan](https://stackoverflow.com/users/383861/blaise-doughan)在[包括-xsrestrictions-as-annotations-in-moxy-generated-java-classes 中的](https://stackoverflow.com/questions/13396482/including-xsrestrictions-as-annotations-in-moxy-generated-java-classes)回答。

# xaml - Windows 8 货币验证

> ID：12249369
> 
> 赞同：0
> 
> 时间：2012-09-03T14:02:13.180
> 
> 标签：xaml, windows-8, textbox, currency

我正在寻找验证一种`TextBox`货币格式，并想知道最好的方法是什么。有没有办法在 XAML 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T23:30:39.067

您可以在`setter`您绑定的财产中执行此操作。但我想还有更好的方法。

[这](http://msdn.microsoft.com/de-de/library/system.windows.data.binding.validationrules.aspx)似乎是一个更好的解决方案。

# amazon-ec2 - pdflib@aws ec2

> ID：12249372
> 
> 赞同：0
> 
> 时间：2012-09-03T14:02:24.897
> 
> 标签：amazon-ec2, amazon-web-services, pdflib

是否可以在“亚马逊云”中安装 PHP 64 位的 .so 扩展？我不能在实例本身中这样做，因为我们使用了几个由 Amazon 随机启动和关闭的实例。我在配置控制台中找不到与此相关的任何内容。如果有人有答案会很高兴。

谢谢你和最好的问候伊冯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:44:41.493

尝试在最近的 Ubuntu AMI 中使用[CloudInit](https://help.ubuntu.com/community/CloudInit)包。您基本上指定了一个 shell 脚本，将其放入实例用户数据中，该脚本在实例启动时执行。在此 shell 脚本中，您可以安装 .so 扩展名。

# mysql - 视图存储在Mysql中的位置

> ID：12249379
> 
> 赞同：1
> 
> 时间：2012-09-03T14:02:35.280
> 
> 标签：mysql

我对观点有一些疑问-

1.  Mysql 在哪里创建/存储视图？或者它们只是虚拟的并在一段时间后被删除？

2.  视图的数据什么时候刷新？（当我们在实际表中插入数据时它会自动刷新还是我们每次都必须更新视图？）

3.  使用视图是好的还是我们应该每次都触发查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:07:57.260

1.  视图是纯元数据。MySQL 在创建视图的过程中不会复制任何数据，而且它也不会在一段时间后被删除。
2.  当您在视图上运行选择时，mysql（或任何其他数据库）运行在创建时定义的查询。
3.  在表或视图上运行查询之间没有性能差异（或几乎没有差异）。

一些数据库，例如 oracle，支持一种叫做[物化视图](http://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_6002.htm)的东西。这些视图确实复制了数据，因此必须刷新它们，这样数据才不会过时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-16T15:22:38.070

将其保留在 Google 结果中。

要查看 MySQL 中的视图定义，您可以使用以下查询：

```
SELECT * FROM information_schema.VIEWS; 
```

问候，

詹姆士

# svn - 詹金斯只有 svn:update 而不是 svn:checkout？

> ID：12249385
> 
> 赞同：0
> 
> 时间：2012-09-03T14:03:04.397
> 
> 标签：svn, jenkins

可以在 Jenkins 中设置他没有删除所有文件，当我输入新的 SVN URL 时...... Jenkins 应该总是进行 SVN 更新......这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:00:44.563

在项目的配置页面中，您应该有一个`Check-out Strategy`可以设置为的字段`Use 'svn update' as much as possible`。但是，我不得不说，执行完整的结帐可以更好地保证可重复性。

# magento - 更新销售订单表 - Magento 模型

> ID：12249387
> 
> 赞同：3
> 
> 时间：2012-09-03T14:03:25.433
> 
> 标签：magento

我想更新我正在使用的 magento 中的一个字段值

```
$data = array('xxx'=>$xxx);
$orderModel = Mage::getModel('sales/order')->load($orderId)->addData($data);
try {
    $orderModel->setId($orderId)->save();
    echo "Data updated successfully.";
} catch (Exception $e){
    echo $e->getMessage();
} 
```

但它不起作用，任何人都可以建议我在更新数据时创建问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:13:19.427

您的代码`setId($orderId)`看起来像是要明确设置订单`entity_id`（即创建订单），或者您只是不知道加载后不需要的事实，`setId($orderId)`如果您只想更新给定的订单.

如果您尝试创建订单：该`sales/order`模型通常*不允许*显式设置订单`entity_id`，因为它使用默认情况下自动递增的主键。

如果您尝试更新现有订单：`setId($orderId)`从`save()`链中删除。

其次，如果您希望能够将其值保存到数据库中，则需要先使用属性扩展`sales/order`模型。`xxx`

有几种方法可以扩展`sales/order`模型以具有自定义属性。例如，您可以在文件夹中拥有自己的安装脚本`app/code/local/Mycompany/Mymodule/sql/myresource/`：

```
// Mage_Eav_Model_Entity_Setup
$oInstaller = $this;

// Add EAV attribute
$oInstaller->startSetup();
$oInstaller->addAttribute(
    'order',
    'my_attribute',
    array(
        'type' => 'int'
    )
);
$oInstaller->endSetup();

// Add flat attribute
if (Mage::getVersion() >= 1.1) {
    $oInstaller->startSetup();
    $oConnection = $oInstaller->getConnection();
    $oConnection->addColumn(
        $oInstaller->getTable('sales_flat_order'),
        'my_attribute',
        'TINYINT(1) NOT NULL'
    );
    $oInstaller->endSetup();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:26:36.030

您可以执行**MAGIC**功能`get`和`set`功能

直接试试：

```
// if your attribute is column named is_active then you can getIsActive() or setIsActive(1)
$orderModel = Mage::getModel('sales/order')->load($orderId)->setYourAttribute($data);
// it means you can set and get column named by ['your_attribute']
try {
    $orderModel->setId($orderId)->save();
    echo "Data updated successfully.";
} catch (Exception $e){
    echo $e->getMessage();
} 
```

嗯。我不知道你为什么设置销售/订单模型的 entity_id。但它不起作用，因为 entity_id 可以是另一个表上的外键，例如：`sales_flat_order_payment`

# jquery - 在页面组件的鼠标悬停时将 Wicket 面板内容显示为工具提示

> ID：12249391
> 
> 赞同：3
> 
> 时间：2012-09-03T14:03:41.720
> 
> 标签：jquery, wicket

我有一个检票口 MultiLineLabel，其内容来自数据库。现在我需要将此 MultiLineLabel 文本显示为页面上悬停时的工具提示。

你能建议我怎么做吗（我是新来的检票口）。我应该使用 jquery 解决方案还是应该在我的页面上添加`onmouseover`和？`onmouseout` `AjaxEventBehaviors`

当我尝试[jquery 解决方案](http://www.mkyong.com/jquery/how-to-create-a-tooltips-with-jquery/)时，我不知道如何维护工具提示中的换行符。

请向我提供您拥有的任何示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:51:20.127

我已经使用标准标签对此进行了测试，并且可以正常工作：

```
Label ml;
String msg = "Hello! \n I'm here.";
add(ml = new Label("multiline",msg));
ml.add(AttributeModifier.append("title", msg)); 
```

**更新**

不幸的是，无法控制使用“标题”属性生成的工具提示的样式，因为它是操作系统原生组件。但是，您可以轻松地修改您在[http://www.mkyong.com/jquery/how-to-create-a-tooltips-with-jquery/](http://www.mkyong.com/jquery/how-to-create-a-tooltips-with-jquery/)找到的代码。您可以将工具提示的文本放在自定义属性中，我们称之为“toolTipText”：

```
String tooltipMsg = Strings.toMultilineMarkup(yourMsgFromDb).toString(); 
...
yourLabel.add(AttributeModifier.append("toolTipText", tooltipMsg)); 
```

请注意，您必须使用 toMultilineMarkup 来维护工具提示中的换行符。现在您应该稍微修改函数 showTooltip 以使用插入到自定义属性中的值：

```
var showTooltip = function(event) {
  $('div.tooltip').remove();

  $('<div class="tooltip">' + $(this).attr('toolTipText') +'</div>')
            .appendTo('body');

  changeTooltipPosition(event);
}; 
```

最后，您必须告诉 JQuery 对您的标签使用工具提示。您必须将“span#hint,label#username'”替换为与您的组件匹配的选择器。

我已经测试过了，它似乎工作。

# java - 生成初始化向量真的需要 SecureRandom 还是足够随机？

> ID：12249392
> 
> 赞同：5
> 
> 时间：2012-09-03T14:03:41.960
> 
> 标签：java, encryption, random, cryptography, initialization-vector

为了使流密码能够防止重复的密钥攻击，IV 不应该重复自己。但是 SecureRandom 在这方面是否比简单的非安全 Random 有好处（或者它只是用于生成不可预测的序列）？

假设我在 AES CBC 模式下使用固定大小的消息，并且我为每个 IV 生成一个新的 Random（使用当前的纳米时间作为种子），与 SecureRandom 相比，这会增加重复 IV 的概率吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T16:55:12.860

使用`Random`生成 IV 的最大问题不是它可能会重复，而是攻击者可以预测未来的 IV，这可以用来攻击 CBC。

相关：[https ://crypto.stackexchange.com/q/3515/2805](https://crypto.stackexchange.com/q/3515/2805)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:06:44.360

Random 使用 48 位密钥，因此它会重复大约每 2^48 个值。这意味着不会`long`产生所有可能的情况。这对您来说可能足够随机，也可能不够随机。如果对使用 SecureRandom 有疑问，您可以随时更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:13:42.540

IV 通常不需要不可预测，但需要一次性使用。这意味着不应使用使用弱种子或具有短周期的简单随机数生成器来生成 IV。

使用中最强的随机数发生器每秒只产生几十比特的熵。大多数算法将 IV 视为次要的密钥。因此，缓慢而强大的 RNG 应该留给密钥并为 IV 播种快速、长周期的 RNG。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T00:17:59.570

是的，IV 应该是完全随机的。如果您不使用完全随机，您可能会泄漏有关纯文本的信息。不要忘记随机数是与纯文本进行异或运算的。因此，如果 IV 具有可预测的结构，您可能会发现重复的密文，从而以与 ECB 相同的方式泄漏信息。如果攻击者可以影响要加密的纯文本，这将更加明显。

# mysql - Mysql - 一张表可以占用多少数据？

> ID：12249394
> 
> 赞同：0
> 
> 时间：2012-09-03T14:03:45.953
> 
> 标签：mysql, database

我正在建立一个包含这些产品的产品和图像的网站。每个图像都作为一个条目存储在数据库的表中。每个产品可以有任意数量的图像，但平均为 15 张图像。平均有 15 张图片的 1500 种产品（预计当前数量），我已经在一张表中找到了 22,500 个条目。什么时候一张桌子被认为是“满的”？在用户注意到减速之前，我应该在我的表中允许多少条目？

编辑：我应该提到我确实将图像存储在文件系统上，这些表只存储路径和文件名以及其他一些相关数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:05:16.357

以下是 MySQL 表大小的限制：

[http://dev.mysql.com/doc/refman/5.0/en/table-size-limit.html](http://dev.mysql.com/doc/refman/5.0/en/table-size-limit.html)

如果可以的话，您可能应该将图像存储在数据库之外。这将更好地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:05:34.707

在许多情况下，缓慢的结果是索引不佳或没有索引的结果。为了处理足够多的行，你应该为你的 PK 取一个 int 8 之类的东西。

而且，不要将图像存储在数据库中，而只是存储到服务器的文件系统中。

# javascript - 将美元兑换成任何货币

> ID：12249403
> 
> 赞同：0
> 
> 时间：2012-09-03T14:04:31.170
> 
> 标签：javascript, regex

我还是正则表达式的新手，请帮助我。

我有这个 html 文件，其中一些段落包含美元值（200 美元、300 美元等）。每当用户访问该文件时，它将这些值转换为他们自己的货币。

我想使用正则表达式来查找这些值并进行适当的转换。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:19:49.543

这是一个假设很少的工作示例。我相信你有转换因子，你可以用转换因子代替实际值。

**编辑：修改为仅允许转换匹配的数值。数值假定为正整数值。**

在这里[摆弄 http://jsfiddle.net/gbsandeep/eBQFE/](http://jsfiddle.net/gbsandeep/eBQFE/)

**例子：**

*   从货币“$”转换为带有符号“@”的假设货币

*   换算系数：0.05

**输入**

> 200 美元，一些 100 美元的内容在这里卖 300 美元

**输出**

> @10 一些@5 的内容在@15 这里

```
 function convert() {
     var replacedText = document.getElementById('myPara').innerText;
     var newCurrencySymbol = '@';
     var currencyConversionFactor = 0.05;
     var numberPattern = /\$\d+/g;
     var numbers = replacedText.match(numberPattern);
     for (var i = 0; i < numbers.length; i++) {
         // extract numerical value
         var num = numbers[i].match(/\d+/);
         // your currency conversion here
         var newNum = newCurrencySymbol + (num * currencyConversionFactor);
         replacedText = replacedText.replace(numbers[i], newNum);
     }
     document.getElementById('convertedPara').innerText = replacedText;
 } 
```

# android - 安卓移动数据/3G

> ID：12249405
> 
> 赞同：0
> 
> 时间：2012-09-03T14:04:40.493
> 
> 标签：android, mobile

如何在 Android 上禁用和启用移动数据（3G）？

我读到我需要使用连接管理器。但是，我仍然不明白如何启用和禁用移动数据？

我发现了这个，但是，它对我不起作用，

谁能解释我如何打开和关闭移动数据？

```
TelephonyManager telephonyManager = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
switch (telephonyManager.getDataState()) {
        case TelephonyManager.DATA_CONNECTED:
            setMobileDataEnabledMethod.invoke(iConnectivityManager, false);
            break;
        case TelephonyManager.DATA_DISCONNECTED:
            setMobileDataEnabledMethod.invoke(iConnectivityManager, true);
            break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:19:40.877

[如何在 Android 上禁用移动数据](https://stackoverflow.com/questions/3644144/how-to-disable-mobile-data-on-android)

您正在开发哪个 api 级别？正如 Siddharth 所建议的那样，Logcat ... 信息太少，可以帮助您适当

# symfony - 找不到 Symfony2 约束类

> ID：12249406
> 
> 赞同：1
> 
> 时间：2012-09-03T14:04:41.903
> 
> 标签：symfony, capistrano, capifony

在我本地机器上的开发环境中一切正常。但是，在我的新登台服务器上，我仅在注册页面上收到错误（据我所知）：

> PHP 致命错误：在 /var/www/sf-ysu/shared/vendor/symfony/symfony/src/Symfony/Component/Validator/Mapping/Loader/AbstractLoader 中找不到类“Symfony\Component\Validator\Constraints\notNull”。第 63 行的 php

我使用[capifony](http://capifony.org/)进行部署，这意味着我的供应商目录符号链接到另一个位置。这**可能**与它有关，但我不确定。

有人有线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:10:28.247

好像您的本地计算机上有 Windows，并且 Windows 不区分大小写。确保您使用`NotNull`约束 - 而不是`notNull`.

# java - OSGi 应用程序内的 REST 客户端

> ID：12249407
> 
> 赞同：6
> 
> 时间：2012-09-03T14:04:42.827
> 
> 标签：java, web-services, osgi, resteasy, apache-felix

我需要将 REST 客户端集成到使用 Apache Felix 实现的现有 OSGi 应用程序中。REST 服务基于 JAX-RS 的 RESTeasy 实现（版本 2.3.2.Final）。我创建了一个包含客户端依赖项的单独包，导出所需的 RESTeasy 包并将它们导入到使用客户端的包中，但不幸的是我无法让它在 OSGi 上下文中工作。

我尝试了两种不同的方法。第一个使用通用 ClientRequest：

```
ClientRequest request = new ClientRequest(MyService.URL_TEST+"/stats");
request.body(javax.ws.rs.core.MediaType.APPLICATION_XML, stats);
ClientResponse<String> response = request.post(String.class); 
```

在这种情况下我得到的错误很奇怪：

```
[java] java.lang.RuntimeException: java.lang.ClassCastException:
org.jboss.resteasy.client.core.executors.ApacheHttpClient4Executor cannot be cast to 
org.jboss.resteasy.client.ClientExecutor 
```

我确信 ApacheHttpClient4Executor 实现了 ClientExecutor 接口。

当我尝试在 RESTeasy 周围使用我自己的 REST 客户端包装器时，如下所示：

```
MyService myService = MyServiceClient.getInstance();
myService.saveStatistics(stats); 
```

我得到一个不同的例外：

```
[java] java.lang.LinkageError: ClassCastException: attempting to
castjar:file:/D:/Development/Eclipses/eclipse_4.2_j2ee_x64/lib/jaxrs-api-2.3.2.Final.jar
!/javax/ws/rs/ext/RuntimeDelegate.classtobundle:
//78.0:1/javax/ws/rs/ext/RuntimeDelegate.class 
```

据我了解，LinkageError 很可能与 RESTeasy 使用一些类加载器技巧初始化 RuntimeDelegate 的方式有关，这可能受到 OSGi 框架的限制。我怀疑首先提到的 java.lang.ClassCastException 具有相同的来源。

有什么方法可以让 RESTeasy 在 OSGi 中工作？

PS：关于 RESTeasy 的类似问题的讨论，但在 OSGi 之外：[java.lang.LinkageError: ClassCastException](https://stackoverflow.com/questions/8823844/java-lang-linkageerror-classcastexception)

**更新：** 这些是包含在 restclient 包中的**库**：activation-1.1.jar commons-codec-1.2.jar commons-httpclient-3.1.jar commons-io-2.1.jar commons-logging-1.0.4.jar flexjson-2.1。 jar httpclient-4.1.2.jar httpcore-4.1.2.jar javassist-3.12.1.GA.jar jaxb-api-2.2.3.jar jaxb-impl-2.2.4.jar jaxrs-api-2.3.2。 Final.jar jcip-annotations-1.0.jar jettison-1.3.1.jar jsr250-api-1.0.jar junit-4.10.jar log4j-1.2.14.jar resteasy-jaxb-provider-2.3.2.Final.jar resteasy -jaxrs-2.3.2.Final.jar resteasy-jettison-provider-2.3.2.Final.jar scannotation-1.0.3.jar slf4j-api-1.6.4.jar slf4j-log4j12-1.6.4.jar myservice- common-0.1.0.3.jar my-service-client-0.1.0.3-SNAPSHOT.jar stax-api-1.0-2.jar xmlpull-1.1.3.1.jar xpp3_min-1.1.4c.jar xstream-1.4.2.jar

这些是来自 restclient 包的**导出**：javax.ws.rs、javax.ws.rs.ext、javax.ws.rs.core、org.jboss.resteasy.client、org.jboss.resteasy.client.cache、org .jboss.resteasy.client.extractors, org.jboss.resteasy.client.marshallers, org.jboss.resteasy.client.core.executors, javax.xml.bind.annotation, org.jboss.resteasy.plugins.providers, org .jboss.resteasy.plugins.providers.jaxb、org.jboss.resteasy.spi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:16:49.747

看看[SpringSource Bundle Repo](http://ebr.springsource.com/repository/app/)，它有一些非常有用的预构建的通用库包，包括我们正在使用（与[gson](https://code.google.com/p/google-gson/)一起）进行 RESTful 通信的[Apache HTTP 客户端。](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.apache.httpcomponents.httpclient&version=4.2.1&searchType=bundlesByName&searchQuery=http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-12T02:04:21.613

这个问题不仅限于 RESTeasy。它也发生在泽西岛。

这是因为您在类路径上有两个 JAX-RS 类副本。
您可以在 LinkageError 中看到这一点：

> [java] java.lang.LinkageError: ClassCastException: 试图投射 jar:file:/D:/Development/Eclipses/eclipse_4.2_j2ee_x64/lib/jaxrs-api-2.3.2.Final.jar!/javax/ws/rs /ext/RuntimeDelegate.class 到 bundle://78.0:1/javax/ws/rs/ext/RuntimeDelegate.class

即一份来自：

> D:/Development/Eclipses/eclipse_4.2_j2ee_x64/lib/jaxrs-api-2.3.2.Final.jar

另一个来自 OSGI 包。

这会导致 RuntimeDelegate 类出现问题，默认情况下它使用系统类加载器来创建 RuntimeDelegate 实现（请参阅 javax.ws.rs.ext.FactoryFinder）。

如果通过两个不同的类加载器加载同一个 jar，也会出现此问题。

有几个解决方法：

*   从系统类路径中删除 jaxrs-api-2.3.2.Final.jar
*   在进行任何 JAX-RS 调用之前，将线程上下文类加载器设置为您的包的加载器。
    FactoryFinder 将使用它来加载 RuntimeDelegate。
    为避免调用 Thread.currentThread().setContextClassLoader(myBundleClassLoader) 污染您的代码，您可以使用代理包装您的 JAX-RS 客户端。例如参见[https://puredanger.github.io/tech.puredanger.com/2007/06/15/classloaders/的线程上下文类加载器部分](https://puredanger.github.io/tech.puredanger.com/2007/06/15/classloaders/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T15:10:29.603

（不幸的是，我项目的遗留模块仍然使用 OSGi，但现在使用 RESTeasy 3.0.16）

当我需要 OSGify 依赖项时，我现在首选的解决方案是使用出色的[Apache Ops4j Pax Tipi 项目](https://github.com/ops4j/org.ops4j.pax.tipi "Apache Ops4j Pax Tipi")来包装它。

该项目提供了一个预配置的 Maven 设置（父 POM 处理捆绑），您只需在带有`org.apache.ops4j.pax.tipi`前缀的 Tipi 子模块中调整原始项目的 GAV 坐标，并构建新的捆绑项目，该项目吸收原始依赖项，解包和将其包装为 OSGi 包。

您可以从与您的项目设置（依赖项等）最匹配的现有 Tipi 子项目开始，并调整任何缺少的 OSGi 导入/导出（大多数情况下，这些都是由 maven-bundle-plugin 自动创建的）。

只要原始项目不包含太多外来或格式错误的依赖项，这对我来说效果很好。

但是，根据我目前的经验，您可能会遇到[使用 root 包的传递依赖](https://techotom.wordpress.com/2014/10/21/fixing-the-default-package-is-not-permitted-by-the-import-package-syntax-with-maven-bundle-plugin/ "根包")等问题，这可能是一个真正的阻碍（找出哪个库是一个真正的噩梦）。

不幸的是，RESTeasy 似乎受此影响，因为我得到完全相同的错误（默认包，即使在将非测试和非提供的依赖项声明为可选之后：

> 默认包“。” Import-Package 语法不允许。

将 maven-bundle-plugin 升级到最新版本 3.0.1 会产生不同的错误（甚至不太有用）：

> [错误] 捆绑 org.ops4j.pax.tipi:org.ops4j.pax.tipi.resteasy-jaxrs:bundle:3.0.16.Final.1：无法从捆绑本机代码头解析名称：[错误] 错误（s ) 在捆绑配置中找到

*更新*似乎可以通过将 POM 中的 Tipi 版本升级到 1.4.0 来解决，测试......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T16:43:22.187

RESTEasy 是强制性的吗？我个人在 OSGi 中使用[jersey](https://jersey.java.net)，它作为客户端和服务器都运行良好。

# php - 禁止重复列

> ID：12249409
> 
> 赞同：1
> 
> 时间：2012-09-03T14:04:44.580
> 
> 标签：php, mysql, database

我有两张桌子：

*   `bpoint`-> 所有房屋的表格
*   `images`-> 房屋图片表（每栋房屋最多 3 张）。

这是我的 MySQL 连接查询，用于获取房屋信息及其图像：

```
SELECT 
    bpoint.*, bimages.iURL
FROM
    bpoint,
    bimages
WHERE
    bpoint.pointID  = bimages.pointID
AND bimages.pointID = '$tocka' 
```

由于图像行多于房屋行（始终只有一个房屋结果和 1-3 个图像结果），有没有办法删除每个图像附带的房屋结果双倍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:13:22.780

通过使用`GROUP BY`and a`JOIN`你可以得到你想要的结果；

```
SELECT bpoint.*, bimages.url FROM bpoint
LEFT JOIN bimages 
       ON bpoint.id = bimages.pointId
GROUP BY bpoint.id; 
```

[http://sqlfiddle.com/#!8/5d1fd/3/0](http://sqlfiddle.com/#!8/5d1fd/3/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:17:44.653

不，没有办法做到这一点，除非您使用两个单独的查询。如果有办法，您希望结果集看起来像第一所房子的第二张图片吗？

Anyway, what I would do here is add an `ORDER BY` clause to the query, to make sure all images from the same house are in sequence. Then, on the PHP display loop you just ignore the house information if you already printed it from the previous row.

# regex - 我需要检查正则表达式

> ID：12249410
> 
> 赞同：1
> 
> 时间：2012-09-03T14:04:44.863
> 
> 标签：regex

我有一个必须具有这种名称格式的 excel 文件，其中`xxx`是数字，yymmdd 是日期。只有`xxx`和`yymmdd`变化，其余的总是一样的。

```
CDFSDDRCxxxCurryymmdd.xls 
```

我可以用什么正则表达式来检查它是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:06:59.727

尝试使用以下正则表达式：

```
^CDFSDDRC\d{3}Curr\d{6}\.xls$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:49:37.833

在 C# 中，我认为你可以尝试这样的事情：

```
"CDFSDDRC(?<xxx>[0-9]+)Curr(?<yymmdd>[0-9][0-9][0|1][0-9][0-3][0-9])\.xls" 
```

但是您必须再次检查matches.Groups["yymmdd"].value 以检查特殊情况，例如`CDFSDDRC123Curr321539.xls`该匹配但包含不正确的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:03:05.747

我认为以下应该有效。

```
CDFSDDRC\d[3]Curr(([0-9]{2}(0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|([0-9]{2}(0[469]|1[1])(0[1-9]|[12][0-9]|30))|([0-9]{2}(02)(0[1-9]|1[0-9]|2[0-8]))|((((04|08|[2468][048]|[13579][26]))|00)(02)29))\.xsl 
```

我认为您必须转义 C# 字符串中的反斜杠。

```
"CDFSDDRC\\d[3]Curr(([0-9]{2}(0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|([0-9]{2}(0[469]|1[1])(0[1-9]|[12][0-9]|30))|([0-9]{2}(02)(0[1-9]|1[0-9]|2[0-8]))|((((04|08|[2468][048]|[13579][26]))|00)(02)29))\\.xsl" 
```

# delphi - 使用 WMI 获取附加信息

> ID：12249413
> 
> 赞同：2
> 
> 时间：2012-09-03T14:04:56.363
> 
> 标签：delphi, memory, wmi, motherboard, chipset

我有一个问题，如果你能得到高清速度（RPM），如果内存是 DDR1，DDR2，DDR3，如果 HD 是 SATA 或 IDE 插槽和芯片组和主板......如果有可能在 Delphi 中相

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T14:27:40.753

要检查内存是 DDR1、DDR2、DDR3，您可以使用[`Win32_PhysicalMemory`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394347%28v=vs.85%29.aspx)wmi 类和`MemoryType`属性。

要检查硬盘是 SATA 还是 IDE，您可以使用[Win32_DiskDrive](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)、[Win32_IDEController](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394155%28v=vs.85%29.aspx)和[Win32_SCSIController](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394400%28v=vs.85%29.aspx) WMI 类。

对于芯片组信息检查[`Win32_VideoController`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394512%28v=vs.85%29.aspx)类

对于主板信息，请使用[`Win32_BaseBoard`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394072%28v=vs.85%29.aspx)该类。

现在要使用 Delphi 代码访问这些 WMI 类，您可以使用[WDCC (WMI Delphi Code Creator)](http://code.google.com/p/wmi-delphi-code-creator/)工具。

# php - 整理图片标签

> ID：12249414
> 
> 赞同：1
> 
> 时间：2012-09-03T14:04:56.237
> 
> 标签：php, html, preg-replace

我有这个图像标签，我从一个有错误的天气源获得，输出不是 html 而是 wml/wap，所以当它出现时它会崩溃并烧毁。图片标签是这样出现的：

```
<img alt="FACE="Monospace,Courier">LRPatches, Sky clear, Q1020</FONT><Mist, >" src="http://www.vremea.com/images/fogshow.gif"  width="50" height="50"/> 
```

我希望它是这样的：

```
<img src="http://www.vremea.com/images/fogshow.gif"  width="50" height="50"/> 
```

我知道我必须使用`preg_replace`，但我似乎无法让它工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:17:34.860

如果 HTML 总是有完全相同的语法问题，这将有助于删除 和 之间的任何`<img`内容`src=`。如果 HTML 结构发生变化，这很容易被破坏，但因为它已经被破坏了......

```
$html = preg_replace('/(?<=<img ).*?(?=src=)/', '', $horribleHorribleHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:23:03.457

这个 ：

```
$imgTag = '<img alt="FACE="Monospace,Courier">LRPatches, Sky clear, Q1020</FONT><Mist, >" src="http://www.vremea.com/images/fogshow.gif"  width="50" height="50"/>';
$returnValue = preg_replace('/(<img)(.*)(src.*)/', '$1 $3',$imgTag); 
```

将输出：

```
'<img src="http://www.vremea.com/images/fogshow.gif"  width="50" height="50"/>' 
```

假设您的格式错误的`<img />`标签没有改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:18:31.727

It's not tested, but this should do it.

```
<?php
$sStr = '<img ... your image>'; // your string
$iStart = strpos('src="', $sStr); // find the src
$iEnd = strpos('"', $sStr, $iStart); // find the end
$sURL = substr($sStr, $iStart, $iEnd); // get the image
echo $sURL;
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T14:18:39.947

You can try to match on the attributes you want to save from your input, you can try to get the parts that look like an `<img>` tag first, and then cherry-pick the attribute looking parts of them you are interested in:

```
$input = 'some other content
    <img alt="FACE="Monospace,Courier">LRPatches, Sky clear, Q1020</FONT><Mist, >"
        src="http://www.vremea.com/images/fogshow.gif"  width="50" height="50"/>
        <span class="some"> more other content
    </span>

    <img alt="FACE="Monospace,Courier">LRPatches, Sky clear, Q1020</FONT><Mist, >"
        src="http://www.vremea.com/images/fogshow.gif"
        width="50"
        height="50"/> <span class="some"> more other content
    ';
preg_match_all('/<img.+?\/>/sim', $input, $img_parts);
foreach ($img_parts[0] as $img_part) {
    $attrs = array();
    preg_match_all('/(?<key>src|width|height)\s*=\s*"(?<value>[^"]+)/i', $img_part, $m);
    foreach ($m['key'] as $i => $key) {
        $attrs[] = "{$key}=\"{$m['value'][$i]}\"";
    }
    print "<img ".join(' ', $attrs)." />\n";
} 
```

# objective-c - NSString 和 isEqualToString 输出奇怪

> ID：12249415
> 
> 赞同：2
> 
> 时间：2012-09-03T14:04:58.497
> 
> 标签：objective-c, ios, nsstring

我的应用程序出现错误，当我尝试修复它时，我在调试我的方法时遇到了一个非常奇怪的行为。

检查以下代码：（`testString`是一个`NSString`）

```
NSLog(@"logging:AAAA%@AAAA",[testObject testString]);

if ([[testObject testString] isEqualToString:@"(null)"]) {
    NSLog(@"yeah im here!");
} 
```

及其印刷：

```
logging:AAAA(null)AAAA 
```

但它永远不会达到“是的，我在这里！”。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:07:01.397

的输出`testString`是`nil`。

`nil`NSLog 在传递一个对象时产生“（null）” 。然而，在 nil 对象上调用方法（如`isEqualToString`）再次评估为`nil`，因此在“if”中为 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:36:51.273

NSLog 总是打印对象的描述。

事实上它是 NS_FORMAT_FUNCTION。

```
FOUNDATION_EXPORT void NSLog(NSString *format, ...) NS_FORMAT_FUNCTION(1,2); 
```

所以：

```
NSString *stringForNSLog = [NSString stringWithFormat:@"%@",[testObject testString]]; 
```

`*stringForNSLog`应该完全是“（null）” 。

但是 testString 的值为 nil。

如果您正在研究 GNUStep，它是 Apple 的 Cocoa 的开源实现，您会发现如下内容：

所有的字符串格式的东西都写成`GSFormat.m`

并且在`GSFormat.m`

```
size_t len;
id obj;
NSString *dsc;

obj = args_value[specs[nspecs_done].data_arg].pa_object;

if (!obj) dsc = @"(null)";
else if ([obj respondsToSelector: @selector(descriptionWithLocale:)]) dsc = [obj descriptionWithLocale: locale];
else dsc = [obj description]; 
```

[http://svn.gna.org/svn/gnustep/libs/base/trunk/Source/NSString.m](http://svn.gna.org/svn/gnustep/libs/base/trunk/Source/NSString.m)

[http://svn.gna.org/svn/gnustep/libs/base/trunk/Source/GSFormat.m](http://svn.gna.org/svn/gnustep/libs/base/trunk/Source/GSFormat.m)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:11:59.480

因为 testString 方法返回 nil 并且在 nil 上调用方法什么都不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:29:14.577

```
if ((testObject==nil)||([[testObject testString] isEqualToString:@"(null)"])) {
    NSLog(@"yeah im here!");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T14:07:03.480

`NSLog``(null)`如果您的`NSString`is ，则打印文字`nil`。将您的测试更改为：

```
if ([[testObject testString] == nil) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T14:07:16.077

因为 testObject 本身是 nil 。

你可以测试：

```
if ((testObject==nil)||([[testObject testString] isEqualToString:@"(null)"])) {
    NSLog(@"yeah im here!");
} 
```

# java - 在 Java 中反序列化员工记录

> ID：12249417
> 
> 赞同：0
> 
> 时间：2012-09-03T14:05:02.663
> 
> 标签：java, serialization, file-io, record

下面是一个应该反序列化员工记录的程序。它会反序列化第一条记录，但不会反序列化用户添加的其他记录。

```
import java.io.*;
import java.util.*;

public class Employee implements Serializable {

    private Object name;
    private Object address;
    private Object ssn;
    private Object eadd;
    private Object number;  

    private void writeObject(ObjectOutputStream os) throws IOException {
        os.defaultWriteObject();
    }

    private void readObject (ObjectInputStream is) throws IOException, ClassNotFoundException {
        is.defaultReadObject();
    }

    public static void addEmployee() {
        try {

            Employee e = new Employee();
            BufferedReader buffer = new BufferedReader(new InputStreamReader(System.in));
            FileOutputStream fileOut = new FileOutputStream("employee.ser", true);
            ObjectOutputStream out =  new ObjectOutputStream(fileOut);
            System.out.println("Name: ");
            e.name = buffer.readLine();
            System.out.println("Address: ");
            e.address = buffer.readLine();
            System.out.println("SSN: ");
            e.ssn = buffer.readLine();
            System.out.println("Email: ");
            e.eadd = buffer.readLine();
            System.out.println("Number: ");
            e.number = buffer.readLine();

            out.writeObject(e +"#");
            out.close();
            fileOut.close();

        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void deserializeAll() throws ClassNotFoundException {
        Employee e = null;
        try {
            FileInputStream fileIn = new FileInputStream("employee.ser");
            ObjectInputStream in = new ObjectInputStream(fileIn);
            e = (Employee) in.readObject();
            in.close();
            fileIn.close();
            System.out.println("Deserialized Employee...");
            System.out.println("Name: " + e.name);
            System.out.println("Address: " + e.address);
            System.out.println("SSN: " + e.ssn);
            System.out.println("Email: " + e.eadd);
            System.out.println("Number: " + e.number);
        }
        catch (IOException e1) {
            e1.printStackTrace();
        }
    }

    public static void main(String[] args) throws ClassNotFoundException {
        int choice;
        Scanner input = new Scanner (System.in);    

        do {
            System.out.println("[1] Add an employee.");
            System.out.println("[2] Deserialize all.");
            choice = input.nextInt();
            switch (choice) {
                case 1: addEmployee(); break;
                case 2: deserializeAll(); break;
                default: System.exit(0);
            }
        } while (choice != 3);

    }

} 
```

`#`是每条记录的分隔符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:08:31.863

您不能附加到 ObjectOutputStream。一旦你关闭它，你就不能添加它。

相反，您需要重写整个文件或使用不同的文件格式（允许附加数据的格式）

顺便说一句：这不写对象

```
out.writeObject(e +"#"); 
```

当您反序列化它时，它会写入`e.toString() + "#"`which 是一个字符串，而不是原始对象。

我会让你的字段类型为 String 而不是 Object。

我会删除你的 writeObject 和 readObject 方法，因为它们什么都不做。

# php - 如何从一个表单将数据插入到两个表中？

> ID：12249418
> 
> 赞同：0
> 
> 时间：2012-09-03T14:05:10.343
> 
> 标签：php, mysql, forms

好吧，现在，我创建了一个表单，就是这样：

```
<html>
<body bgcolor="lightblue">

<form align="center" action="connect2.php"  method="post" style="bgcolor:red">

        <div style="margin-left:433px" >
        Registration No.: <input type="text" name="reg" /><br />
        </div>
        </br>
        Name: <input type="text" name="name" size="50" style="margin-left:7px" />  
        <span style="margin-left:6px">
        Date of Birth: <input type="text" name="birth" size="30" /></br>
        </span>
            <div style="margin-left:12px">
                Age: <input type="text" name="age" size="15" style="margin-left:7px" />
                <span style="margin-left:167px">
                Class at August 2012 <input type="text" name="class" size="30" />
                </span>
            </div>
        School: <input type="text" name="school" size="102" style="margin-left:5px" />
        </br></br>
        Father's Name: <input type="text" name="father" size="94" style="margin-left:5px" /> </br>
        Father's Occupation: <input type="text" name="focc" size="89" />
        </br></br>
        Mother's Name:<input type="text" name="mother" size="94" style="margin-left:3px" /> </br>
        Mother's Occupation: <input type="text" name="mocc" size="88" />
        </br></br>

        <center>

            <table bgcolor="pink" width="95" height="100"style="margin-left:0px; margin-top:5px" border="0">
                <tr>
                    <td colspan="3">
                    Siblings, if any:
                    </td>
                </tr>
                <tr align="center"style="font-weight:bold">
                    <td width="5"></td>
                    <td width="20">Name</td>
                    <td width="50">Age</td>
                    <td width="20">School</td>
                </tr>
                <tr align="right">
                    <td>1.</td>
                    <td align="center"><input type="text" name="ssname" size="44" /></td>
                    <td align="center"><input type="text" name="sage1" size="5" /></td>
                    <td align="center"><input type="text" name="sschool1" size="44" /></td>
                </tr>
                <tr align="right">
                    <td>2.</td>
                    <td align="center"><input type="text" name="sname2" size="44" /></td>
                    <td align="center"><input type="text" name="sage2" size="5" /></td>
                    <td align="center"><input type="text" name="sschool2" size="44" /></td>
                </tr>
                <tr align="right">
                    <td >3.</td>
                    <td align="center"><input type="text" name="sname3" size="44" /></td>
                    <td align="center"><input type="text" name="sage3" size="5" /></td>
                    <td align="center"><input type="text" name="sschool3" size="44" /></td>
                </tr>
            </table>
        </center>
        </br>
        Address: <input type="text" name="address" size="101" /> </br>
        <p align="left" style="margin-left:271px">
        Phone Number: <input type="text" name="phone" size="20" /> </br>
        Cell Number (Mother/Father): <input type="text" name="cp" size="20" /></br>
        Email (Mother/Father): <input type="text" name="email" size="28"/>
        </p>
        <input type="Submit" name="submit" value="submit" />

        </form>

</body>
</html> 
```

然后这是我的 php 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<body> 
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("sy_database", $con);

$sq$sql="INSERT INTO sy_form (reg_no, name, birth, age, sclass, school, fname, focc, mname, mocc, address, phone, cp, email)
VALUES('$_POST[reg]','$_POST[name]','$_POST[birth]','$_POST[age]','$_POST[class]','$_POST[school]','$_POST[fname]','$_POST[focc]','$_POST[mname]','$_POST[mocc]','$_POST[address]','$_POST[phone]','$_POST[cp]','$_POST[email]'),
INSERT INTO siblings(sname,sage,sschool) values('$_POST[ssname]','$_POST[sage1]','$_POST[sschool1]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }

echo "1 record added";

mysql_close($con);
?>
</body> 
</html> 
```

我需要从该单一表单将数据插入到两个表中。第一张桌子是给想要注册的人的，第二张桌子是给那个人的兄弟姐妹的。

为什么AGE不会出现？一月的课程也没有出现。手机号码永远是2147483647？

天哪，我被毁了！有人可以帮我吗？我真的很想学习。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:24:06.287

啊，你不能像那样合并查询。尝试关注

```
$sql1="INSERT INTO sy_form (reg_no, name, birth, age, sclass, school, fname, focc, mname, mocc, address, phone, cp, email)".
"VALUES('$_POST[reg]','$_POST[name]','$_POST[birth]','$_POST[age]','$_POST[class]','$_POST[school]','$_POST[fname]','$_POST[focc]','$_POST[mname]','$_POST[mocc]','$_POST[address]','$_POST[phone]','$_POST[cp]','$_POST[email]')";

$sql2="INSERT INTO  siblings(sname,sage,sschool)values('$_POST[ssname]','$_POST[sage1]','$_POST[sschool1]')";

if (!mysql_query($sql1,$con))
{
    die('Error: ' . mysql_error());
}
if (!mysql_query($sql2,$con))
{
    die('Error: ' . mysql_error());
} 
```

那么这才刚刚开始，让你的程序运行。有很多东西要学。

# android - Eclipse 上的 NoClassDefFoundError 异常

> ID：12249419
> 
> 赞同：0
> 
> 时间：2012-09-03T14:05:12.957
> 
> 标签：android, eclipse, noclassdeffounderror, user-defined-functions

我正在开发一个 Android 应用程序，在我的项目中使用`Java`并尝试使用我的用户定义类。`MarportWS`我已经把它们放到了 src 文件夹中，并且编译得很完美。但是在运行时，我收到异常，指出该类未定义。如果您有任何想法，请提供帮助。

顺便说一句，问题出在`gateOut`功能上，而不是 gateIn

这是我的代码：

```
package com.example.marport;

import java.io.IOException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;

public class Giriscikis extends Activity {

    final static String NAMESPACE = "http://webservice.marport.dcat.com/";
    final static String METHOD_NAME2 = "gateIn";
    final static String SOAP_ACTION2 = "http://webservice.marport.dcat.com/gateIn";
    final static String URL = "http://192.168.1.164:8070/mws/services/MarportWebServicePort?wsdl";

    public String denemecikis;
    private EditText cikis;
    private EditText giris;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.giriscikis);

        cikis = (EditText) findViewById(R.id.etCikis);
        giris = (EditText) findViewById(R.id.etGiris);

        SoapObject Request2 = new SoapObject(NAMESPACE, METHOD_NAME2);

        SoapSerializationEnvelope soapEnvelope2 = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapEnvelope2.dotNet = false;

        soapEnvelope2.setOutputSoapObject(Request2);

        HttpTransportSE aht = new HttpTransportSE(URL);

        //////////////////////////////////////////////////////// 
        MarportWS temp = new MarportWS();
        try {
            denemecikis = String.valueOf(temp.gateOut().intValue()) ;
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        cikis.setText(denemecikis);
        /////////////////////////////////////////////////////// 

        try {
            aht.call(SOAP_ACTION2, soapEnvelope2);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            SoapPrimitive result2 = (SoapPrimitive) soapEnvelope2.getResponse();
            giris.setText(result2.toString());
        } catch (SoapFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

和日志：

```
09-03 13:56:32.594: E/AndroidRuntime(751): FATAL EXCEPTION: main
09-03 13:56:32.594: E/AndroidRuntime(751): java.lang.NoClassDefFoundError: com.example.marport.MarportWS
09-03 13:56:32.594: E/AndroidRuntime(751):  at com.example.marport.Giriscikis.onCreate(Giriscikis.java:49)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.os.Looper.loop(Looper.java:123)
09-03 13:56:32.594: E/AndroidRuntime(751):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-03 13:56:32.594: E/AndroidRuntime(751):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 13:56:32.594: E/AndroidRuntime(751):  at java.lang.reflect.Method.invoke(Method.java:521)
09-03 13:56:32.594: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-03 13:56:32.594: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-03 13:56:32.594: E/AndroidRuntime(751):  at dalvik.system.NativeStart.main(Native Method) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:08:00.807

我已经回答了一个与您有关的问题。看看[这里](https://stackoverflow.com/a/11824038/940096)

是的，这是因为您的 .jar 文件没有正确导入。请按照以下步骤操作 -

1.  将 .jar 文件放在项目的 libs 文件夹中。

2.  将其导入您的项目。并且，GoTo 项目 -> 属性 -> Java 构建路径 -> 订单选项卡。

3.  检查您的 .jar 文件是否已检查并按第一顺序放置。这是主要的事情。

希望这些步骤对您有所帮助。看看下面的图片 -

![图片](../Images/c0ae3b4e8e26d0d580f816edc23be802.png)

# .net - 正则表达式列出所有 \w

> ID：12249422
> 
> 赞同：0
> 
> 时间：2012-09-03T14:05:23.127
> 
> 标签：.net, regex

在 .NET 中有没有一种方法可以枚举 \w 的所有值？

至于我为什么要从未知文件中解析单词。会遇到一些使用嵌入但非标准的文件。请参阅下面的示例

"PK!RýëÙ*[Content_Types].xml ¢(Ì?ÍNã0?÷Hó?·£Æ530Ì¨)?Y!@?ycß6VÛò5Ð¾=7)T*""""áM«üø?ïºÕ?Ïä|ÙØâ"" ï*&Ê1+À)¯?Wìÿý¿Ñ+0I§¥õ*¶dçÓoG?ûU,hµÃ?Õ)???£ª¡?Xú??Ì|ld¢Ë8çAª???O¹ò.K£Ôj° éä/Ìä£MÅå?n¯I?cÅÅú½Öªb2k?LÊ??~g2ò³?Q ½zlHºÄAj¬RcË 9Æ;H?CÆwzF°ØÏôuª?Vv`X??ßiôÚ'Oõºî???h4·2¦kÙÐì|iù³?ïå ~?¾[ÓmQÙHãÞ¸÷øw/#ï¾ÄÀ í|pO?ãL8~dÂñ3??L8N3áø? ÇY&¿3áã\@rIT?K¤?\2Uäª?T¹ÄªÈ%WÅW+Ð©9:i¯?[

我认为这是打印机文件的输出。

需要以某种方式消除我所说的垃圾词。它不需要是完美的。该计划是用索引中未包含的垃圾词标记文档，以便用户可以轻松地进行手动查看。

我可能会结束做的是从安全字符列表（a，b，c，...）中计数。就像它必须保留一个安全字符或超过 1/2 个安全字符。就像我想保留咖啡馆一样。垃圾词往往都是垃圾。这是一个垃圾词ª'_LLýú，恰好有一些安全字符。

在这一点上，我正在评估战场。

业务的性质可能是故意发送垃圾文件。

万一有人在乎我和我一起去

`rSafeChar = new Regex(@"[-_'@A-Za-z0-9]");`

玩弄`safeCharCount > unsafeCharCount`或`safeCharCount >= unsafeCharCount`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:15:08.020

To check what can be matched by \w one could use a string containing the whole ascii table and use the following regex :

```
(?:(?<wmatch>\w)*(?<wnotmatch>[^\w]*))* 
```

The resulting groups should contain the list of characters matched and not matched by \w.

Here is an example :

```
private void TestMatch()
{
  string ascii = "abcdef0934+_!1@_$14-195djsjfke1058446541";
  Regex r = new Regex(@"(?:(?<wmatch>\w)*(?<wnotmatch>[^\w]*))*");
  Match m = r.Match(ascii);
  if (m.Success)
  {
    string msg = "\\w matches :";
    foreach (Capture cap in m.Groups["wmatch"].Captures)
    {
      msg += cap.Value + ", ";
    }
    msg += Environment.NewLine + "\\w does not match: ";
    foreach (Capture cap in m.Groups["wnotmatch"].Captures)
    {
      msg += cap.Value + ", ";
    }
    MessageBox.Show(msg);
  }
} 
```

Shows :

```
\\w matches :a, b, c, d, e, f, 0, 9, 3, 4, _, 1, _, 1, 4, 1, 9, 5, d, j, s, j, f, k, e, 1, 0, 5, 8, 4, 4, 6, 5, 4, 1,  
\\w does not match: +, !, @, $, -, " 
```

# c# - CheckedComboboxEdit 检查项不能正常工作

> ID：12249430
> 
> 赞同：1
> 
> 时间：2012-09-03T14:05:59.773
> 
> 标签：c#, winforms, devexpress

我使用了 CheckedComboBoxEdit 控件。它由数据表填充。我以编程方式检查了一个项目。下图显示了输出：

![结果图片](../Images/d6754d5b93226cf0b859e3113b48aeaa.png)

它表明，在下拉菜单中没有选择任何项目。我不明白这个问题。

**编辑**：我找到了问题的根源。但是我不知道，我该如何解决这个问题以及它为什么会导致问题。

我的代码：

```
rHOP rGetir = new rHOP();
DevExpress.XtraEditors.Repository.RepositoryItemCheckedComboBoxEdit propertiesBaslattigiSurecler = cceBaslattigiSurecler.Properties;

DataTable dt = rGetir.GetirSurecTanim(0, 0);

dt.Columns.Add("Deger", typeof(string));

for (int i = 0; i < dt.Rows.Count; i++)
  dt.Rows[i]["Deger"] = dt.Rows[i]["Süreç No"].ToString()
                      + "," + dt.Rows[i]["Sürüm"].ToString();

propertiesBaslattigiSurecler.DataSource = dt;

propertiesBaslattigiSurecler.DisplayMember = "Süreç Ad";
propertiesBaslattigiSurecler.ValueMember = "Deger"; // this line causes the problem
cceBaslattigiSurecler.SetEditValue(null); 
```

dataTable dt 具有三列，分别为“Süreç Ad”、“Süreç No”、“Süreç Ack”。然后我将“Deger”列添加到数据表中。当我将 ValueMember 属性设置为“Deger”列时，就会出现问题。当我将 ValueMember 属性设置为另一列时，它可以正常工作。

# qt - 将 QVTKWidget 调整到窗口

> ID：12249432
> 
> 赞同：3
> 
> 时间：2012-09-03T14:06:09.943
> 
> 标签：qt, vtk, qvtkwidget

`QVTKwidget`当我让我的窗口扩大或缩小时，我该如何调整？

我的布局中有更多小部件。我希望它们保持不变，只是扩大缩小`QvtkWidget`. 我发现了一些关于布局的东西，但我不能在`QVTKWidget`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T14:57:53.857

假设这是一个表现相当好的小部件，您可以使用：

*   [QMainWindow](http://qt-project.org/doc/qt-4.8/qmainwindow.html)并将小部件设置为中央小部件 ( `setCentralWidget`)
*   使用*QVBoxLayout*等布局并确保将*QVTKWidget*小部件的`stretch`参数设置为**1**，将其他小部件的参数设置为**0**，请参阅[QBoxLayout::addWidget](http://qt-project.org/doc/qt-4.8/qboxlayout.html#addWidget)。

# c# - 将表列值获取到 C# 中的变量中

> ID：12249433
> 
> 赞同：1
> 
> 时间：2012-09-03T14:06:10.860
> 
> 标签：c#, asp.net, html-table, itemtemplate

我正在`itemtemplate`使用表格获取表单视图字段。我需要`username`进入一个变量，以便我可以删除一个特定`row.Username`的唯一性。

**这是我的代码：**

```
 <ItemTemplate>
    <table>
        <tr>
            <td align="right"><b>User Name:</b></td>
            <td><%# Eval("UserName") %></td>
        </tr>
        <tr>
            <td align="right"><b>Password:</b></td>
            <td><%# Eval("Password") %></td>
        </tr>
        <tr>
            <td align="right"><b>First Name:</b></td>
            <td><%# Eval("FirstName") %></td>
        </tr>
        <tr>
            <td align="right"><b>Last Name:</b></td>
            <td><%# Eval("LastName") %></td>
        </tr>
        <tr>
            <td colspan="2">
                <asp:LinkButton ID="EditButton"
                                    Text="Edit"
                                    CommandName="Edit"
                                    RunAt="server"/>
                &nbsp;
                <asp:LinkButton ID="NewButton"
                                    Text="New"
                                    CommandName="New"
                                    RunAt="server"/>
                &nbsp;
                <asp:LinkButton ID="DeleteButton"
                                    Text="Delete"
                                    CommandName="Delete"
                                    RunAt="server"/>
            </td>
        </tr>
    </table>
</ItemTemplate> 
```

我该怎么做`C#`？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:16:11.227

我会改用服务器控件，例如 a `Label`，然后您可以通过以下方式找到它`item.FindControl`：

aspx：

```
<tr>
    <td align="right"><b>User Name:</b></td><td>
        <asp:Label Id="LblUserName" runat="server"
             Text='<%# Eval("UserName") %>'></asp:label>
    </td>
</tr>
.......
<asp:LinkButton ID="DeleteButton"
    Text="Delete"
    CommandName="Delete"
    RunAt="server"
    OnCommand="DeleteButton_Command" /> 
```

代码隐藏：

```
void DeleteButton_Command(Object sender, CommandEventArgs e) 
{
    if(e.CommandName == "Delete")
    {
        LinkButton btnDelete = (LinkButton)sender;
        var item = (FormViewItem)btnDelete.NamingContainer;
        Label LblUserName = (Label)item.FindControl("LblUserName");
        String userName = LblUserName.Text;
    }
} 
```

# mysql - ruby on rails before_save 增加表的不同列

> ID：12249434
> 
> 赞同：0
> 
> 时间：2012-09-03T14:06:13.930
> 
> 标签：mysql, ruby-on-rails, associations, sql-update

这是我的**like.rb 模型**

```
class Like < ActiveRecord::Base
  attr_accessible :user_id, :post_id

  before_save :increment_post_total_likes

  before_destroy :decrement_post_total_likes

  scope :desc_ordered, :order => "created_at DESC"

  belongs_to :post
  belongs_to :user

  def increment_post_total_likes
    p = Post.find(self.post_id)
    p.increment!(:total_likes)
    p.save
  end

  def decrement_post_total_likes
    p = Post.find(self.post_id)
    p.decrement!(:total_likes)
    p.save
  end

  def self.alreadyLiked(post_id, user_id)
    where(:user_id => user_id, :post_id => post_id).any?
  end

  def self.already_liked?(user_id)
    exists?(:user_id => user_id)
  end

end 
```

问题是，当我喜欢一个帖子时，它会增加帖子`total_likes`列，但也会增加另一个表列，这两个列共享相关的列`post_id`，`user_id`我不明白为什么......

我只想在**likes**表上使用 before_save 和 before_destroy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:45:35.233

`increment!`将为[您保存记录](http://apidock.com/rails/ActiveRecord/Base/increment!)。试试没有爆炸。

# c# - C# 删除 datagridview 上的 bindinglist 项目对象导致异常

> ID：12249436
> 
> 赞同：0
> 
> 时间：2012-09-03T14:06:14.380
> 
> 标签：c#, datagridview, bindinglist

我很陌生`C#`。

我需要能够从我的对象中删除对象，`bindinglist`该对象是`datagridview`. 当我删除最后一项时，出现以下异常：

```
System.NullReferenceException: Object reference not set to an instance of an object.
 at System.Windows.Forms.DataGridViewRow.BuildInheritedRowStyle(Int32 rowIndex,              
DataGridViewCellStyle inheritedRowStyle)
 at System.Windows.Forms.DataGridViewRow.Paint(Graphics graphics, Rectangle clipBounds,   
Rectangle rowBounds, Int32 rowIndex, DataGridViewElementStates rowState, Boolean    isFirstDisplayedRow, Boolean isLastVisibleRow)
 at System.Windows.Forms.DataGridView.PaintRows(Graphics g, Rectangle boundingRect, 
Rectangle clipRect, Boolean singleHorizontalBorderAdded)
 at System.Windows.Forms.DataGridView.PaintGrid(Graphics g, Rectangle gridBounds, 
Rectangle clipRect, Boolean singleVerticalBorderAdded, Boolean singleHorizontalBorderAdded)
 at System.Windows.Forms.DataGridView.OnPaint(PaintEventArgs e)
 at System.Windows.Forms.Control.PaintWithErrorHandling(PaintEventArgs e, Int16 layer, Boolean disposeEventArgs)
 at System.Windows.Forms.Control.WmPaint(Message& m)
 at System.Windows.Forms.Control.WndProc(Message& m)
 at System.Windows.Forms.DataGridView.WndProc(Message& m)
 at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
 at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
 at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

这是我删除对象的代码：

研究是研究对象的绑定列表。

```
 private void removeComplete()
    {

        if (studies.Count == 0)
            return;

        // Create temp list of copleted studies
        List<study> completedStudies = studies.Where(s => s.isComplete() == true).ToList();

        if (studies.Count == 0)
        { 
           // do nothing
        }
        else
        {
            // If I don't use this line, every row produces the same exception 
            studies.RaiseListChangedEvents = false;

            foreach (study study in completedStudies)
            {
                try
                {
                    studies.Remove(study);
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
                break;
            }

            // Turn it back on after turning it off above
            studies.RaiseListChangedEvents = true;

            // This is the point where it fails
            studies.ResetBindings();
        }
    } 
```

据我所知，datagridview 似乎仍在尝试添加刚刚从源中删除的行。这对我来说真的很奇怪。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:06:45.927

感谢对我最初的问题的评论和更多的研究，我发现这是因为 removeComplete() 方法调用需要在 UI 线程上。为此，我使用了 BeginInvoke，如下所示：

```
public delegate void processDelegate();

private void processCompleted(object sender, EventArgs e)
{

    processDelegate simpleDelegate = new processDelegate(removeComplete);
    BeginInvoke(simpleDelegate);

} 
```

# c# - 为什么我们在尝试用另一个字符串替换它时使用带有“\”的@

> ID：12249437
> 
> 赞同：2
> 
> 时间：2012-09-03T14:06:15.173
> 
> 标签：c#, asp.net, string, forms

> **可能重复：**
> [C# 中字符串前面的@ 是什么？](https://stackoverflow.com/questions/556133/whats-the-in-front-of-a-string-in-c)

为什么我们使用 我正在使用Windows 应用程序`@`来替换`\`另一个字符串`string.replace(@"\","$$")``C#`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:07:56.850

字符串文字前面的`@`使其成为[*逐字字符串文字*](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)，因此反斜杠`\`不需要加倍。您可以使用`"\\"`代替来`@"\"`获得相同的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:07:45.210

因为如果你不这样做，你就不得不`\`带着`\\`

`@`习惯于所谓的[逐字字符串](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T14:08:16.263

在 C# 中，您可以为字符串添加前缀`@`以使其逐字显示，因此您无需转义特殊字符。

```
@"\" 
```

等同于

```
"\\" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T14:33:31.967

[C# 语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)2.4.4.5 字符串文字状态：

> C# 支持两种形式的字符串文字：常规字符串文字和逐字字符串文字。
> 
> 常规字符串文字由用双引号括起来的零个或多个字符组成，如 "hello"，并且可能包括简单的转义序列（如制表符的 \t）以及十六进制和 Unicode 转义序列。
> 
> 逐字字符串文字由一个 @ 字符后跟一个双引号字符、零个或多个字符以及一个结束双引号字符组成。一个简单的例子是@"hello"。在逐字字符串文字中，分隔符之间的字符被逐字解释，唯一的例外是引号转义序列。特别是，简单的转义序列以及十六进制和 Unicode 转义序列不会在逐字字符串文字中进行处理。逐字字符串文字可能跨越多行。

使用字符的逐字字符串文字`@`使得在实用上转义几乎所有字符变得更容易，否则您必须使用`\`字符串中的字符单独转义。

注意：`"`即使使用逐字模式，字符仍然需要转义。

所以我会用它来节省时间，不必通过一个长字符串来转义所有需要转义的必要字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T14:10:53.437

因为反斜杠被视为转义字符，如果不使用“@”，您将收到“无法识别的转义序列”错误。使用“@”告诉编译器忽略转义字符。[这](http://www.c-sharpcorner.com/uploadfile/hirendra_singh/verbatim-strings-in-C-Sharp-use-of-symbol-in-string-literals/)可能会有所帮助。

# xml - 如果 XPATH 中不存在节点，如何返回常量？

> ID：12249440
> 
> 赞同：3
> 
> 时间：2012-09-03T14:06:37.843
> 
> 标签：xml, xpath, ssis

我有一个问题，请考虑以下 XML：

```
<?xml version="1.0" encoding="UTF-16"?>
<APIDATA xmlns="api-com">
<ORDER EngineID="1" OrderID="66" OtherInfo="yes"><INSTSPECIFIER InstID="27" SeqID="17"/>     
</ORDER>
<ORDER EngineID="2" OrderID="67" OtherInfo="yes"><INSTSPECIFIER InstID="28" SeqID="18"/>    
</ORDER>
<ORDER EngineID="3" OrderID="68"><INSTSPECIFIER InstID="29" SeqID="19"/></ORDER>
</APIDATA> 
```

我必须与 SSIS 合作。我想在所有订单条目的每个循环中获取所有数据到 SSIS 变量。到目前为止，我可以在 SSIS 的控制流中使用 ForeachLoop 获取数据，其中包括：

```
EnumerationType:  ElementCollection
OuterXPathString: //*[name() = 'ORDER']
InnerElementType: NodeText
InnerXPathString: @*[name() = 'EngineID'] | @*[name() = 'OrderID'] | child::node()/@*[name() = 'InstID'] | child::node()/@*[name() = 'SeqID'] 
```

**我怎样才能以这种方式获取 OtherInfo 数据，即使节点不存在，它也总是会返回一些东西？**例如，如果节点不存在，则返回“No”。

在讨论方面，我需要这个，因为 SSIS 映射在结果集上使用整数索引。如果结果集可以是 4 或 5 长，我会得到 index out of bounds 错误。这是我规避问题的想法，始终返回固定长度的结果集。

如果无法做到这一点，另一个想法是使用默认值扩展 XML。因此，如果另一个问题是：**您能告诉我，如何使用 XPATH 将默认值添加到 XML 中吗？**示例：将上述 XML 设置为：

```
<?xml version="1.0" encoding="UTF-16"?>
<APIDATA xmlns="api-com">
<ORDER EngineID="1" OrderID="66" OtherInfo="yes"><INSTSPECIFIER InstID="27" SeqID="17"/>     
</ORDER>
<ORDER EngineID="2" OrderID="67" OtherInfo="yes"><INSTSPECIFIER InstID="28" SeqID="18"/>    
</ORDER>
<ORDER EngineID="3" OrderID="68" OtherInfo="defaultvalue"><INSTSPECIFIER InstID="29" SeqID="19"/></ORDER>
</APIDATA> 
```

或者在 SSIS 中有没有更优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T17:02:11.643

> **我怎样才能以这种方式获取 OtherInfo 数据，即使节点不存在，它也总是会返回一些东西？**例如，如果节点不存在，则返回“No”。

**`OtherInfo`如果此属性存在或字符串存在，`"no"`这是产生属性值的一种方法**：

```
 concat(@OtherInfo,
             substring('no',1 + 2*boolean(@OtherInfo))) 
```

**当在以下元素上评估此 Xpath 1.0 表达式时：**

```
 <ORDER EngineID="1" OrderID="66" OtherInfo="yes">
            <INSTSPECIFIER InstID="27" SeqID="17"/> 
```

结果是：

```
yes 
```

**但是当对相同的表达式求值时：**

```
 <ORDER EngineID="3" OrderID="68">
            <INSTSPECIFIER InstID="29" SeqID="19"/> 
```

那么结果是：

```
no 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*/*">
         <xsl:value-of select=
         "concat(@OtherInfo,
                 substring('no',1 + 2*boolean(@OtherInfo)))
         "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<APIDATA xmlns="api-com">
        <ORDER EngineID="1" OrderID="66" OtherInfo="yes">
                <INSTSPECIFIER InstID="27" SeqID="17"/>
        </ORDER>
        <ORDER EngineID="2" OrderID="67" OtherInfo="yes">
                <INSTSPECIFIER InstID="28" SeqID="18"/>
        </ORDER>
        <ORDER EngineID="3" OrderID="68">
                <INSTSPECIFIER InstID="29" SeqID="19"/>
        </ORDER>
</APIDATA> 
```

**针对每个元素评估 Xpath 表达式`ORDER`，并将评估结果复制到输出**：

```
yesyesno 
```

**说明**：

表达方式：

```
 concat(@OtherInfo,
             substring('no',1 + 2*boolean(@OtherInfo))) 
```

产生两个字符串的连接。

**如果上下文节点有一个名为 的属性`OtherInfo`，**则第二个字符串是空字符串，并且只生成第一个字符串（属性的值）。

**如果上下文节点没有名为 的属性`OtherInfo`**，则 的第一个参数`concat()`是空字符串，第二个参数被评估并输出。

在这两种情况下如何评估此子表达式：

```
substring('no',1 + 2*boolean(@OtherInfo)) 
```

1.  **如果`@OtherInfo`存在**。那么`2*boolean(@OtherInfo) = 2*true() = 2*1 = 2`因此，表达式等价于：`substring('no',3)`而this是空字符串，因为`"no"`长度只有2。

2.  **如果`@OtherInfo`不存在**。然后`2*boolean(@OtherInfo) = 2*false() = 2*0 = 0`。因此，表达式等价于:`substring('no',1)`并且计算结果为字符串`"no"`。

# ibm-midrange - 如何使用 AS400 DDS 在窗口中创建单个选择列表？

> ID：12249441
> 
> 赞同：0
> 
> 时间：2012-09-03T14:06:40.930
> 
> 标签：ibm-midrange

实际上，我并不是在询问有关实施的详细信息。我知道如何在整个屏幕中实现带有子文件的单个选择列表，但是当我尝试将相同的原理应用于窗口时，事情并没有按预期进行。这是窗口和子文件的 DDS：

```
A        R SWCCHK03                      SFL
A          S0AVAL        1Y  0H          SFLCHCCTL
A          S0OPTN       10A   O     
A        R SWCCHK04                      SFLCTL(SWCCHK03)
A                                        OVERLAY
A                                        SFLDSP
A                                        SFLDSPCTL
A 30                                     SFLCLR
A 31                                     SFLEND
A                                        SFLSIZ(0006)
A                                        SFLPAG(0005)
A                                        WINDOW(*DFT 13 32)
A                                        SFLSNGCHC(*RSTCSR *AUTOSLT)
A                                     1 3'Option' 
```

这是 RPGLE 中用于显示和处理所选选项的循环：

```
C      SR300      BEGSR
C      *IN12      DOWEQ      *OFF
C                 EXFMT      SWCCHK04
C      *IN12      IFEQ       *OFF
C                 GOTO       SR300E
C                 ENDIF
C                 READC      SWCCHK03
C      S0AVAL     IFEQ       4
C                 ITER
C                 ENDIF
                  .
                  .
                  .
C                 ENDDO
C      SR300E     ENDSR 
```

在某些情况下，我想将 S0AVAIL 设置为 4，这样单选列表中的某些选项将变得不可用，如果用户尝试选择此类选项，则窗口和单选列表将保留在屏幕上，光标位于第一个选项，直到用户选择退出窗口或选择可用选项。

如果用户选择可用选项，则此实现没有问题。但是如果用户选择了一个不可用的选项，窗口会根据需要保留在屏幕上，但是光标会移动到窗口的左上角，而不是停留在选择列表中的第一个选项上。即使我可以手动将光标移回该选项，下次选择不可用选项时，它也会再次转到窗口角落。这怎么发生的？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:01:00.227

这段代码如何编译？在 32 列宽的窗口中有一个 50 列的子文件字段 (S0OPTN)。确保您正在运行您认为应该运行的代码。

当我尝试类似的代码时，我*无法选择*S0AVAL=4 的行。你如何能够“选择”一个不可用的选项？如果我使用光标键，光标会跳过不可用的选择。如果我用鼠标单击，我会收到“输入禁止”键盘错误。你用的是什么终端模拟器？我正在使用适用于 Windows 的 Personal Communications 6.0。

工作代码如下：

```
 A*
 A          R SWCCHK03                  SFL
 A            S0AVAL         1Y 0H      SFLCHCCTL
 A            S0OPTN        10A  O  6 11
 A*
 A          R SWCCHK04
 A                                      SFLCTL(SWCCHK03)
 A                                      OVERLAY
 A  27                                  SFLDSP
 A N28                                  SFLDSPCTL
 A  28                                  SFLCLR
 A  29                                  SFLEND
 A                                      SFLSIZ(06)
 A                                      SFLPAG(05)
 A                                      CF12(12)
 A                                      WINDOW(*DFT 13 32)
 A                                      SFLSNGCHC(*RSTCSR *AUTOSLT)
 A            SFLRRN         4S 0H      SFLRCDNBR(CURSOR)
 A                                  1 10'Title'
 A            CHOICE         4S 0   3  1
 A                                  4  5'Choose one'                               

 h/copy qrpglesrc,stdhspec
 h* dbgview(*list)

 fsotest    cf   e             workstn
 f                                     SFILE(SWCCHK03:RRN)

 c* clear sfl
 c                   z-add     1             sflrrn
 c                   setoff                                       272829
 c                   seton                                        28
 c                   write     SWCCHK04
 c                   setoff                                       28
 c* load sfl
 c     1             do        9             rrn               4 0
 c                   movel     rrn           s0optn
 c                   if        rrn = 4
 c                   z-add     4             s0aval
 c                   else
 c                   z-add     0             s0aval
 c                   endif
 c                   write     SWCCHK03
 c                   seton                                        27
 c                   enddo

 C     *IN12         DOWEQ     *OFF
 C                   EXFMT     SWCCHK04

 C     *IN12         IFEQ      *ON
 C                   LEAVE
 C                   ENDIF

 C                   READC     SWCCHK03                               80
 C  n80              do
 C                   movel     rrn           choice
 C                   z-add     0             S0aval
 C                   update    SWCCHK03
 C                   enddo
 C                   ENDDO

 c                   seton                                        lr 
```

# python - 在 Paramiko (SSH) 上使用 python 模块

> ID：12249443
> 
> 赞同：0
> 
> 时间：2012-09-03T14:06:44.543
> 
> 标签：python, ssh, paramiko

我最近安装并使用 Paramiko 通过 SSH 连接到我域中的另一台计算机。

我最初想做的是通过 SSH 在远程计算机上连接和运行 python 模块，但现在我意识到 SSH 仅提供有限的功能，因此无法调用该模块。

我知道我可以在远程服务器上调用一个脚本并运行它来解决这个问题，但我不确定这样做的安全隐患。此外，从脚本中获取结果。目前，我正在使用脚本中的打印语句查找结果，并通过读取 stdout 中的行来查看结果。

例如

```
If x:
    print "Yes"
else:
    print "No" 
```

然后我通过 SSH 读取并查看结果。这是一种愚蠢的做法，还是我错过了一种更明显/更好的方式来了解我的脚本的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:15:59.960

For something simple, your method works fine. If you need something more complex, you might want to look at something that lets you do `RMI`, like [Pyro](http://pypi.python.org/pypi/Pyro4).

# r - 如何根据示例（R，ggplot2）在 ggplot2 中将前 10 行设为红色，其余行设为蓝色

> ID：12249444
> 
> 赞同：1
> 
> 时间：2012-09-03T14:06:57.880
> 
> 标签：r, ggplot2

ggplot2 库上有 E 的示例代码：

```
theme_set(theme_bw())

dat = data.frame(value = rnorm(100,sd=2.5))
dat = within(dat, { 
    value_scaled = scale(value, scale = sd(value))    
obs_idx = 1:length(value)
  })

ggplot(aes(x = obs_idx, y = value_scaled), data = dat) + 
  geom_ribbon(ymin = -1, ymax = 1, alpha = 0.1) +
  geom_line() + geom_point() 
```

有一个问题：`ggplot2`根据示例，我如何将前 10 行设为红色，其余行设为蓝色？我尝试使用某种层语法，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:21:51.213

首先，将另一列添加到您的数据框中`dat`。它对`0`前 10 行和`1`其余行具​​有价值。

```
dat$group <- factor(rep.int(c(0, 1), c(10, nrow(dat)-10))) 
```

生成图：

```
library(ggplot2)

ggplot(aes(x = obs_idx, y = value_scaled), data = dat) +
geom_ribbon(ymin = -1, ymax = 1, alpha = 0.1) +
geom_line(aes(colour = group), show_guide = FALSE) +
scale_colour_manual(values = c("red", "blue")) +
geom_point() 
```

该参数`show_guide = FALSE`抑制红线和蓝线的图例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:24:33.560

好的，我可以管理图层，代码是（不优雅，但有效）：

```
require(ggplot2)

value=round(rnorm(50,200,50),0)

nmbrs<-length(value) ##  length of vector
obrv<-1:length(value) ##  list of observations

#create data frame from the values
data_lj<-data.frame(obrv,value)
data_lj20<-data.frame(data_lj[1:20,1:2])
data_lj21v<-data.frame(data_lj[20:nmbrs,1:2])

#plot with ggplot

rr<-ggplot()+

layer(mapping=aes(obrv,value),geom="line",data=data_lj20,colour="red")+

layer(mapping=aes(obrv,value),geom="line",data=data_lj21v,colour="blue")

print(rr) 
```

# arrays - Visual C++/CLI 中的托管数组或托管对象数组

> ID：12249447
> 
> 赞同：0
> 
> 时间：2012-09-03T14:07:00.843
> 
> 标签：arrays, c++-cli, managed

练习吃豆人

```
array<bool>^ aEtats;             //declared: an array of true/false states

aEtats = gcnew array<bool>(100); //this array will correspond with an array of "Pills"

for each (bool b in aEtats)  
     b=true; 
```

我得到一个包含 100 个“假”的数组。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:15:31.503

The *bool* type is a value type, you get a copy of the value in the for-each statement, not a reference. So you are setting the copy to true, this doesn't propagate back to the array element. Use a simple for loop instead:

```
Etats = gcnew array<bool>(100);
for (int ix = 0; ix < Etats->Length; ++ix)
    Etats[ix] = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:56:44.493

或者只是将 for each 循环更改为使用引用，例如 for each（aEats 中的 bool% b）。——本·沃伊特

# codeigniter - 在 codeigniter 中禁用 cookie 的登录身份验证

> ID：12249449
> 
> 赞同：0
> 
> 时间：2012-09-03T14:07:13.400
> 
> 标签：codeigniter, session, cookies

如果在客户端浏览器上禁用了 cookie，如何继续会话 ID？

我们可以继续核心 as `session_id($_GET['session_id'])`。但是我们该怎么做`Codeigniter`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:20:58.560

如果未启用 cookie，则可以使用 GET 和 POST 参数，但不推荐使用它们。

在 codeigniter 的会话类中，会话 id 的值被加密，然后存储在 cookie 中。通过 GET 和 POST 直接使用会话 ID，您将使用 ini_set('session.use_only_cookies', true) 打开会话固定的大门。

在 codeigniter 中，您也可以以相同的方式传递值，或者将 url 作为参数添加。/控制器/方法/参数

浏览以下文章：-

[Codeigniter 的会话数据，它们只是 cookie 吗？](https://stackoverflow.com/questions/10943145/codeigniters-session-data-are-they-just-cookies)

[http://jctweb.net/2011/09/20/sessions-without-cookies-in-codeigniter/](http://jctweb.net/2011/09/20/sessions-without-cookies-in-codeigniter/)

# javascript - 动态内容和爬虫

> ID：12249450
> 
> 赞同：1
> 
> 时间：2012-09-03T14:07:15.460
> 
> 标签：javascript

`Javascript`搜索引擎爬虫会使用API 调用索引我动态加载的内容吗？`PHP`或者我必须通过服务器端编程（ 、、`ASP`等...）加载此内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:18:14.813

这已记录在谷歌开发者页面的[网站管理员部分](https://developers.google.com/webmasters/ajax-crawling/)。

简短的回答；不，但有解决方法。

# c# - c#如何正确渲染图像？

> ID：12249452
> 
> 赞同：2
> 
> 时间：2012-09-03T14:07:16.850
> 
> 标签：c#, image, image-processing

## 背景

我正在编写一个应用程序，它在点击时复制剪贴板的对象，`ctrl+c`这样`print screen`您不仅拥有当前内容，而且还有“旧”字符串图像文件等。

## 更多背景

我的应用程序有**3 个列表框**和**1 个 picBox**。PicBox 是一个预览窗口。如果用户双击图像（*将其粘贴到剪贴板*），他将获得预览（*这样他就可以确保它是正确的*）。

## 我想改进的

我测试了预览，并在 picBox 的边缘遇到了一些伪影：

![神器](../Images/9bbd5709e4e1a53d428ec2a630a0beae.png)

**第一行：**原始图像（以下称为图像 1/2/3）。

**第二行：**我点击图片的顺序。第二列和第三列中有一些工件。

**第三行：**如果我点击**image 1**然后点击**image 3**，我会得到你可以在**row 3 col 2**看到的图像。**row3 col3**显示相同的图像，但突出显示了伪影。

伪影似乎是第一张图像的遗留物，因为它们与第一张图像的“红线”位置相同

我使用的方法是：

```
 Graphics grx = Graphics.FromImage(pictureBox1.Image);
        grx.DrawImage(clipboardListImage[listBoxImg.SelectedIndex], new Rectangle      (new  Point(0,0), pictureBox1.Size));
        pictureBox1.Refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:57:56.570

好的，我想我有一个解决方案。如果我错了，请纠正我。

我正在使用 imageAttributes 并将 wrapmode 设置为 TileFlipXY。

```
 ImageAttributes imgattr = new ImageAttributes();
        imgattr.SetWrapMode(System.Drawing.Drawing2D.WrapMode.TileFlipXY); 
```

并在绘图功能中使用它。

```
grx.DrawImage(clipboardListImage[listBoxImg.SelectedIndex], new Rectangle(new Point(0, 0), pictureBox1.Size),0,0,
            clipboardListImage[listBoxImg.SelectedIndex].Width, clipboardListImage[listBoxImg.SelectedIndex].Height,
            GraphicsUnit.Pixel, imgattr); 
```

不是很方便，但它似乎正在工作；）

# c# - EF 5 中的表值函数？

> ID：12249455
> 
> 赞同：3
> 
> 时间：2012-09-03T14:07:36.080
> 
> 标签：c#, sql, entity-framework, entity-framework-5

抱歉，如果这不是很好的措辞，但在升级到 之后`VS2012/.NET 4.5`，我知道表值函数在实体框架 5 中是可能的。

我们使用自定义数据层/orm，我找不到任何不使用 EDMX 模型生成器的代码示例，因为这没有用。

作为一个非常疯狂的猜测，我会说一些定义表值函数的代码需要添加`OnModelCreating(DbModelBuilder modelBuilder)`。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:16:11.990

Code-First 策略不支持表值函数，仅适用于带 EDMX 的 Database-First：http: [//msdn.microsoft.com/en-us/hh859577](http://msdn.microsoft.com/en-us/hh859577)。引用：

> TVF 目前仅在 Database First 工作流程中受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T18:02:04.133

我能够使用 EF 5 轻松执行表值函数，如下所示：

```
int orderID = 100;
var query = context.Database.SqlQuery<Product>("Select * from [dbo].[tfn_GetOrderProducts](@p0)", orderID);
var results = query.ToList(); 
```

其中 Product 可以是任何 POCO 类，其成员名称与表值函数的结果匹配。

这不是一个完美的解决方案——它没有返回一个 IQueryable，所以你不能将它用作更大的 LINQ 查询的一部分；但是，在这种情况下，这就是我所需要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-02T03:22:04.133

以下建议已从此链接[http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-table-valued-functions-june-ctp.aspx](http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-table-valued-functions-june-ctp.aspx)中删除。我发现这些信息可能对您有用。

> **代码优先方法**
> 
> 实体框架 2011 年 6 月 CTP 不包括对 TVF 的 Code First 支持。但是，您可以对 TVF 使用 DbContext。您可以通过将 DbContext 模板添加到您的模型来完成此操作。添加模板的步骤如下：
> 
> *   打开 NorthwindModel.edmx 并右键单击画布
> *   点击添加代码生成项…</li>
> *   选择 ADO.NET DbContext Generator V4.2，输入模板名称，然后单击添加

# sql - 无键连接表

> ID：12249456
> 
> 赞同：2
> 
> 时间：2012-09-03T14:07:38.623
> 
> 标签：sql, oracle

我有一种情况，我想连接两个没有在 Oracle 8i 中链接它们的键的表。我有带有一些信息和日期时间的表 A 和带有一些信息和日期时间的表 B。我想要的是表 A 中的所有内容以及表 B 中表 A 中的相应数据，我将在下面对其进行模拟：

```
Table A                     |   Table B
John   31/07/2012 10:50:32  |   Travel to Library   31/07/2012 10:48:23
John   31/07/2012 10:55:49  |   Arrive at Library   31/07/2012 11:02:34
John   31/07/2012 11:00:15  |   Reading Book        31/07/2012 11:07:11
John   31/07/2012 11:05:23  |
John   31/07/2012 11:10:12  | 
```

我要创建的是这样的：

```
John   31/07/2012 10:50:32   Travel to Library   
John   31/07/2012 10:55:49   Travel to Library       
John   31/07/2012 11:00:15   Travel to Library            
John   31/07/2012 11:05:23   Arrive at Library
John   31/07/2012 11:10:12   Reading Book 
```

可能有人怀疑这与包含我每 5 分钟接收一次的 GPS 数据的表格和列出活动的另一个完全不相关的表格有关。到目前为止，我最接近的尝试是分两部分编写查询，第一部分是查看活动并返回活动日期和下一个活动日期，然后根据相关人员的姓名连接两个表并返回 GPS 数据当它在两个活动日期之间时，我也用 GPS 日期和下一个 GPS 日期以相反的方式完成它，如果它在这两个日期之间，则返回活动。两种方法都不会返回任何一组数据。

我觉得我的主要故障在于我使用跳跃/滞后函数来获取日期时间之前或之后。也许我只是忽略了明显的答案。

我真的可以使用一些帮助来为我指明正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:42:47.440

您使用的是 8i，它*真的很旧*。但是，如果您使用的是 8.1.6 或更高版本，则可以使用 LEAD() 分析函数获得所需的结果。您没有提供实际的表结构，所以我像这样模拟了它们：

```
create table A (name varchar2(10), dt date);           
create table B (event varchar2(20), dt date); 
```

鉴于这些列表，此查询将起作用：

```
select a.name, a.dt, b.event
from a 
     , ( select b.* 
         , lead (b.dt, 1, null) over
              (order by dt asc) as next_dt
        from b ) b
where a.dt >= b.dt
and ( a.dt < b.next_dt or b.next_dt is null) 
```

[SQL Fiddle 使用 11gR2](http://sqlfiddle.com/#!4/8fef6/6)，但此语法在 8i 上仍应有效。

注意：分析功能仅在 9iR1（9.0.1.3 或类似版本）的某个点发布之前使用 Enterprise Edition 获得许可，如果您对这些细节感到困扰的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:13:20.197

尝试这个：

```
select Name, Time, Activity from
(
    select
        a.Name, a.Time, b.Activity,
        row_number() over (partition by a.Time order by b.time desc) as rn
    from TableA a, TableB b
    where a.time >= b.time and a.Name = b.Name
)
where rn = 1; 
```

注意：我假设 GPS 数据在表中也带有一个名称。

# django - django-filebrowser 和 django-storages 的错误 哪个库有问题？

> ID：12249458
> 
> 赞同：3
> 
> 时间：2012-09-03T14:07:43.930
> 
> 标签：django, amazon-s3, boto, django-storage, django-filebrowser

我使用 django-filebrowser 和 django-storages (w/s3boto) 将文件嵌入到我的 django 项目的 tinyMCE 实现中。

最近我注意到有一个错误，当使用 S3 作为后端时，django-fileborwser 无法正确保存上传文件的缩略图版本。

我逐步完成了版本创建功能（在 django-filebrowser 中），发现了我认为的错误。

```
fp is at EOF. Use rewind option or seek() to data start. 
```

这是因为

```
# Rewing the file pointer back to 0, before saving to the storage object
tmpfile.seek(0) 
```

之前没有被调用

```
# Existing Code
site.storage.save(version_path, tmpfile) 
```

我通过问题跟踪器报告了我建议的修复程序的错误。然后 repo 的作者把我扔了一个循环并问：

> @fyaconiello 不应该将该片段作为 s3-storage 引擎（带有 django-storages）的一部分，而不是将其添加到文件浏览器中吗？

1.  我猜文件倒带可以在任一库中完成。但它属于哪个图书馆？
    *   django-storages 是否应该确保所有 tmpfile 指针都被重绕？
    *   它是 django-filebrowser 的工作，因为它是执行者吗？

[在这里查看我的完整问题](https://github.com/sehmaschine/django-filebrowser/issues/103)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:12:04.650

他们在这里提供了一个解决方案：[https ://github.com/sehmaschine/django-filebrowser/issues/40](https://github.com/sehmaschine/django-filebrowser/issues/40)

# jquery - 进行检查/取消选中复选框操作的更好方法

> ID：12249460
> 
> 赞同：2
> 
> 时间：2012-09-03T14:07:50.400
> 
> 标签：jquery, checkbox, jquery-selectors

我正在使用`jQuery`. 我写了一小段代码来让它工作。

当我选中`selectAll`复选框时，它应该选择所有复选框，而当我取消选中任何一个复选框时，它应该取消选中“全选”。而且，行为应该切换。

请检查此代码段[检查 - 取消选中](http://jsfiddle.net/bnDqb/2/)

不知何故，我不相信我的代码。推荐我是否可以以更好的方式做到这一点。TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:31:50.903

```
$(function() {
    var elems = $('input[type="checkbox"]');

    elems.first().on('change', function() {
        $(this).siblings(elems).prop('checked', this.checked);
    }).end().not(':first').on('change', function() {
        elems.first()
             .prop('checked', ((this.checked ? elems.length - 1 : elems.length) == $(elems)
             .filter(':checked').length));
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/bnDqb/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:33:16.653

1）你每次给的时候都在搜索 DOM

```
$(':checkbox').attr('checked', true);
$(':checkbox :first').click() 
```

等等...而不是存储在变量中并使用它

2）得到没有。选中的复选框（你不需要迭代和获取计数），

```
$(':checkbox').find(':checked').length 
```

# iphone - 删除 iOS 上 HTML 邮件右侧的 ~20px 间隙

> ID：12249470
> 
> 赞同：3
> 
> 时间：2012-09-03T14:08:04.327
> 
> 标签：iphone, ios, css

最近我一直在为我的[投资组合网站](http://blieque.comli.com)制作联系表格。该表单有效，我已成功将 HTML 邮件从托管的服务器发送到我的电子邮件地址。像我的大多数电子邮件一样，这些邮件将主要在我的 iPod Touch 上阅读，因此我基于邮件模板的主题是为屏幕设计`320px`的`480px`。

即使邮件容器元素`width:100%`在所有内部元素上都设置为相同，但屏幕右侧仍有约 20 像素的间隙，就好像那是文档的边缘：

![](../Images/682a116e70a92b70dd835b5ebed0f3ba.png)

这是供参考的脚本和样式表：

PHP（片段）`request_form.php`，：

```
...
$email_subject = "Graphic Request - ".clean_string($first_name);

$email_message .= '<html><head><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="http://blieque.comli.com/mail-styles.css" type="text/css"></head><body><table id="all" cellspacing="0" cellpadding="0">';
$email_message .= '<tr><td id="head"><h1>New Request</h1></td></tr>';
$email_message .= '<tr><td class="info"><span id="param">Name:</span> '.clean_string($first_name).'</td></tr>';
$email_message .= '<tr><td class="info sub"><span id="param">Email Address:</span> '.clean_string($email_from).'</td></tr>';
$email_message .= '<tr><td class="info sub"><span id="param">Service:</span> '.clean_string($service).'</td></tr>';
$email_message .= '<tr><td class="info sub jstfy"><span id="param">Details:</span> '.clean_string($request).'</td></tr>';
$email_message .= '<tr><td id="foot"></td></tr></table></body></html>';
... 
```

CSS `mail-styles.css`，：

```
body {
    margin: 0 !important;
    font-family: Arial, Helvetica, sans-serif;
    color: #242424 !important;
    text-decoration: none !important;
    }
#all {
    width: 110%;
    }
#head {
    background: #1393A1;
    color: #61BDC7;
    border-bottom: solid 0.5em #61BDC7;
    width: 100%;
    padding: 1em 0.5em;
    height: 20px;
    }
td.sub {
    border-top: solid 0.25em #1393a1;
    }
td.info {
    padding: 0.35em 0.5em;
    font-size: 12pt;
    }
td.jstfy {
    text-align: justify;
    }
span#param {
    color: #1393a1;
    font-weight: bold;
    }
td[class=info] {
    text-transform: capitalize;
    }
#foot {
    background: #1393a1;
    width: 100%;
    height: 20px;
    color: transparent;
    border-top: solid 0.5em #61BDC7;
    }
#line {
    background: #1393a1;
    width: 94%;
    height: 0.25em;
    margin-left: auto;
    margin-right: auto;
    } 
```

该电子邮件也不适用于在线电子邮件查看器，因为他们倾向于拥有自己的覆盖样式表，用于常见的标签，例如`<h1>`. 我希望解决方案是显而易见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T10:59:19.497

这对我有用：

```
html, body {
  width: 100%;
  padding: 0;
  margin: 0;
} 
```

当我使用`min-width`而不是`width`，内容变得太宽了。我的标题中也有这些视口设置：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:11:17.897

也许试试

```
html, body {
   margin: 0;
   padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T17:19:33.270

您可以尝试将 min-width: 100% 添加到`<body>`元素以处理间隙。

正如其他人所建议的那样，将样式移入内联应该可以解决其余的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:12:22.913

HTML 电子邮件不能很好地处理外部样式表，因此这可能是您的问题。

作为一般经验法则，您应该只在 HTML 电子邮件中使用内联样式。

这是一个很好的 HTML 电子邮件指南：http: [//kb.mailchimp.com/article/how-to-code-html-emails](http://kb.mailchimp.com/article/how-to-code-html-emails)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-29T22:03:49.253

发生这种情况是因为`body`在大多数浏览器上默认有填充。添加：

```
body{
    padding:0px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-07T23:43:39.507

我已经多次处理过这个问题。每次它发生时，我总是意识到它正在发生，因为我在我的一张桌子上错误地使用了 cellpadding。

例如，我今天有点赶上，因为在我正在处理的一封电子邮件的底部附近有一张桌子，上面有一个水平延伸到底部的新闻横幅，如下所示：

```
<center><!-- Press Banner -->
<table border="0" cellpadding="15" cellspacing="0" bgcolor="#ffffff">
    <tr>
        <td align="center">
            <a role="link" href="#" target="_blank" title="#">
                <span class="press">
                    <img class="desktop" src="#" border="0" style="display:block;">
                </span>
            </a>
        </td>
    </tr>
</table>
</center> 
```

该图像为 600 像素宽，并切换为用于移动布局的 320 像素宽的背景图像。我需要在该块和其他块之间添加一些垂直间距，因此我选择添加 cellpadding="15" 来这样做，但没有意识到 15 个像素也会水平拉伸。但是在 iOS 设备上，这是额外的空间只在右侧呈现，而不是在左侧，所以问题出在哪里并不明显。

为了修复它，我删除了单元格填充并在顶部和底部使用了表格间隔。

```
<tr>
    <td><table border="0" cellpadding="6" cellspacing="0"><tr><td height="4"><table border="0" cellpadding="0" cellspacing="0"><tr><td></td></tr></table></td></tr></table></td>
</tr> 
```

正如其他人已经提到的那样，还有许多其他原因可能会发生此问题，但只是为其他可能忽略我犯的相同错误的人添加了这个潜在原因。

* * *

此外，根据经验，您永远不应该在 HTML 电子邮件中导入 CSS，您应该内联尽可能多的样式，并尽可能使用已弃用的 CSS2 标签和老式 HTML 样式元素，以实现最高水平的跨设备、客户端兼容性。我最近将一个项目上传到[github(link)](https://github.com/dcondrey/html-email)，这是我在一段时间内构建电子邮件时创建的 html 电子邮件模板。它几乎是您在任何地方都能找到的最兼容的模板。

# ruby - 带有嵌套标签的水豚

> ID：12249475
> 
> 赞同：0
> 
> 时间：2012-09-03T14:08:16.787
> 
> 标签：ruby, nokogiri, capybara

鉴于此 HTML 片段

```
<ul>
  <li>Product 1<span><a href="#">Remove</a></span></li>
  <li>Product 2<span><a href="#">Remove</a></span></li>
</ul> 
```

将产品列表作为数组获取的干净方法是什么？：

```
['Product 1', 'Product 2'] 
```

我想要`li`元素的文本，而不是`span`标签的文本。

* * *

更新：

这有效：

```
all('ul li').map{|e| e.native.children.first.text} 
```

但可以改进吗？我不热衷于使用“本机”，因为它可能不适用于所有 Capybara 驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:46:40.140

这应该这样做：

```
all(:xpath, '//ul/li/text()[1]').map(&:text) 
```

# c# - 如何使用 Unity/PRISM 项目获得良好的模块化结构

> ID：12249478
> 
> 赞同：1
> 
> 时间：2012-09-03T14:08:34.097
> 
> 标签：c#, mvvm, prism, unity-container

我正在尝试使用`Unity`/`PRISM`基于相同`catalogModule`但具有不同行为的两个模块化项目。

我的问题是我想要完全相同的模块，但我的两个应用程序有一个登录屏幕（我的视图`module1`），我在登录后启动的第一个应用程序是我的视图，`Module2`我的第二个应用程序是其他模块的视图。但是为了获得这个，我包括：

`this.regionManager.TryRequestNavigate(RegionNames.MainRegion, "View1");`

但是通过这个操作，我没有完全相同的模块 1，因为我的第二个应用程序需要：

`this.regionManager.TryRequestNavigate(RegionNames.MainRegion, "View2");`

所以我想我需要创建包装器或其他操作。所以我可以要求您在使用 PRISM/Unity 处理项目模块化时如何进行？

在此先感谢您的回答！

盖特

# .net - 移至 Windows 8 得到“InvalidProgramException：公共语言运行时检测到无效程序”

> ID：12249482
> 
> 赞同：3
> 
> 时间：2012-09-03T14:08:59.220
> 
> 标签：.net, windows, windows-7, windows-8

我正在Windows 7 上使用[AutoMapper](https://github.com/AutoMapper)`.NET 4.0`开发应用程序。今天我从一台新的 Windows 8 机器获取源代码，构建然后运行该应用程序，它抛出了我：`SVN`

> InvalidProgramException：公共语言运行时检测到无效程序

我重建了源代码，它在所有其他三台 Windows 7 机器上运行良好。我想这对 Windows 8 很重要。我编写了以下小型控制台应用程序。我在 Windows 8 上构建了源代码，它在 Windows 7 上运行良好，但在 Windows 8 上运行良好。所以这与 Windows 8 上的运行时有关。似乎只是枚举类型有问题，其基础类型不是默认值类型，Int32。

谷歌搜索后，人们说这是关于 JIT 编译器，但我仍然不知道。我在 Windows 7 和 Windows 8 上都使用 VS 2010 目标 .NET 4.0。在 Windows 8 中对此有何改变？我正在阅读 AutoMapper 的源代码。我认为 C# 或 CLI 确实有问题。希望你给点线索。谢谢。

```
class Program
{
    enum PriorityModel  { High, Normal, Low }
    enum PriorityDto { High, Normal, Low }

    enum PriorityModel2 : byte { High, Normal, Low }
    enum PriorityDto2 : byte { High, Normal, Low }

    enum PriorityModel3 : short { High, Normal, Low }
    enum PriorityDto3 : short { High, Normal, Low }

    static void Main(string[] args)
    {
        Mapper.CreateMap<PriorityModel, PriorityDto>();  // OK
        Mapper.CreateMap<PriorityModel2, PriorityDto2>();  // [InvalidProgramException: Common Language Runtime detected an invalid program.]
        Mapper.CreateMap<PriorityModel3, PriorityDto3>();  // [InvalidProgramException: Common Language Runtime detected an invalid program.]

        Console.Read();
    }
} 
```

异常堆栈跟踪：

```
[InvalidProgramException: Common Language Runtime detected an invalid program.]
   System.Runtime.CompilerServices.RuntimeHelpers._CompileMethod(IRuntimeMethodInfo method) +0
   System.Reflection.Emit.DynamicMethod.CreateDelegate(Type delegateType, Object target) +43
   System.Linq.Expressions.Compiler.LambdaCompiler.CreateDelegate() +81
   System.Linq.Expressions.Compiler.LambdaCompiler.Compile(LambdaExpression lambda, DebugInfoGenerator debugInfoGenerator) +205
   AutoMapper.DelegateFactory.CreateGet(FieldInfo field) +156
   AutoMapper.Internal.FieldGetter..ctor(FieldInfo fieldInfo) +60
   AutoMapper.ReflectionHelper.ToMemberAccessor(MemberInfo accessorCandidate) +124
   AutoMapper.TypeMapFactory.CreateTypeMap(Type sourceType, Type destinationType, IMappingOptions options, MemberList memberList) +269
   AutoMapper.ConfigurationStore.CreateTypeMap(Type source, Type destination, String profileName, MemberList memberList) +86
   AutoMapper.ConfigurationStore.CreateMap(String profileName, MemberList memberList) +45
   AutoMapper.ConfigurationStore.CreateMap() +13
   AutoMapper.Mapper.CreateMap() +51 
```

# c# - DownloadFIleCompleted 和 DownloadProgressChanged 未在多线程 win 表单应用程序中触发

> ID：12249484
> 
> 赞同：0
> 
> 时间：2012-09-03T14:09:11.427
> 
> 标签：c#, winforms, multithreading, webclient

我在使用`WebClient`多线程应用程序（`DownloadFileCompleted`和`DownloadProgressChanged`）中的事件时遇到问题。我有创建计时器的主要方法。`DownloaderForm`每隔一段时间，我将创建一个线程，如果满足某个条件，它将弹出另一个窗体 ( )。

```
void TimerElapsed(object sender, System.Timers.ElapsedEventArgs e) {
    var thread = new Thread(SilentCheckingUpdate) {
        Name = "Update Checker",
    };
    thread.SetApartmentState(ApartmentState.STA);
    thread.Start();
} 
```

SilentChekingUpdate 方法检查更新。

```
bool found = _updater.UpdateRequired(currentConfig, out latestVersion);

if (found)
{
    _updater.ShowUpdateUI(latestVersion); 
} 
```

如果找到，它会从 win forms 类 Updater 调用另一个方法，该方法从 Downloader 调用 StartDownload。

```
public void ShowUpdateUI(Item currentItem)
{
    var downloader = new Downloader();
    downloader.StartDownload();
} 
```

下载器包含一个 WebBrowserControl。我做了一个调用 DownloadFileAsync 的方法。

```
public void StartDownload()
{          
    // start async download
    var client = new WebClient();

    client.DownloadProgressChanged += ClientDownloadProgressChanged;
    client.DownloadFileCompleted += ClientDownloadFileCompleted;
    var url = new Uri(_item.DownloadLink);

    client.DownloadFileAsync(url, _tempName);
} 
```

如果我从表单线程调用 StartDownload 函数，一切正常并且会触发事件。当我使用来自 TimerElapsed 的 StartDownload 工作线程时，DownloadFileAsync 的事件不再被触发。

你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:40:12.670

目前尚不清楚您为什么要启动一个基本上只是调用的线程--它会`DownloadFileAsync`异步下载文件。如果`DownloadFileAsync`是异步的，则没有太多理由启动另一个线程来调用它。

我认为我会考虑的是您正在方法中创建一个本地`client`对象`StartDownload`。这几乎立即让`client`超出范围并可能让 GC 收集它。如果发生这种情况，可能会导致问题。 *也许*制作`client`会员字段可能会有所帮助；但是，这是一个猜测。

您没有提供“有效*”的代码，因此很难说出为什么会有差异。

# sqlite - 最大和最小日期之间的 Sqlite 计数数据

> ID：12249485
> 
> 赞同：0
> 
> 时间：2012-09-03T14:09:14.177
> 
> 标签：sqlite, count

实现这种查询的正确方法是什么（不起作用）？

```
SELECT Min(mydates_col) as oldest, Max(mydates_col) as newest,
COUNT(oneparticular_column)  FROM  mytable WHERE mydates_col BETWEEN oldest AND newest 
```

我知道我可以使用 2 个连续查询来做到这一点，从第一个查询中获取最小和最大日期，然后使用这些数字来运行第二个查询，但我相信有一个更好的解决方案，但经过十几次尝试都没有找到。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:27:34.163

使用内部查询，不是很好（请参阅我的评论），但如果您需要：

```
SELECT COUNT(oneparticular_column)  FROM  mytable WHERE mydates_col BETWEEN (SELECT Min(mydates_col) FROM  mytable) AND (SELECT Max(mydates_col) FROM  mytable) 
```

# jboss - NameNotFoundException 使用 HornetQ ConnectionFactory 通过 JNDI 使用 EAR 启动 JBoss

> ID：12249491
> 
> 赞同：1
> 
> 时间：2012-09-03T14:09:49.250
> 
> 标签：jboss, jms, jndi, jboss6.x, hornetq

我目前正在尝试在 JBoss 6.1 上部署一个应用程序，其中包含一些 JMS MessageListeners。MessageListeners 通过`JNDI`（使用 Spring）获取连接工厂，我使用的`HornetQ`是名为`ConnectionFactory`. 我目前只使用以以下开头的默认`JMS Queues`值：和`JBoss``DLQ``ExpiryQueue`

当我通过应用程序部署时，`JMX`启动没有问题。

当我通过将应用程序复制到部署目录进行部署并启动服务器时，应用程序将无法启动并给出以下错误消息：`javax.naming.NameNotFoundException: ConnectionFactory not bound`. 这对我来说意味着该应用程序在启动之前`HornetQ`启动并且可以通过`JNDI`.

我已经研究过使用创建依赖项，`jboss-dependency.xml`但是我无法让它工作，我不确定这是否是正确的方法。

如何确保`HornetQ`在我的应用程序之前启动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T09:57:32.767

我昨天遇到了这个问题，这个问题是JBoss在注册ConnectionFactory和Queues之前启动你的应用程序引起的。

我发现我的应用程序完美地从 Eclipse 部署，它一直等到 JBoss 启动后才部署。

解决方案是修改文件，在bean 中`server/{node}/deploy/jbossweb.sar/META-INF/jboss-beans.xml`添加以下内容。`WebServer`

```
<depends>org.hornetq:module=JMS,name="NettyConnectionFactory",type=ConnectionFactory</depends>
<depends>org.hornetq:module=JMS,name="InVMConnectionFactory",type=ConnectionFactory</depends>  
<depends>org.hornetq:module=JMS,name="NettyThroughputConnectionFactory",type=ConnectionFactory</depends> 
```

这对我有用，我在这里找到了解决方案：http: [//edemmorny.com/2011/10/17/jboss-as-6-startup-connectionfactory-not-bound/](http://edemmorny.com/2011/10/17/jboss-as-6-startup-connectionfactory-not-bound/)

# string - 学习垃圾邮件发送者的名字

> ID：12249492
> 
> 赞同：3
> 
> 时间：2012-09-03T14:09:50.160
> 
> 标签：string, algorithm, machine-learning, similarity, feature-engineering

目前，一些垃圾邮件浪潮，尤其是在体育赛事发生时，正在充斥着互联网。

由于我强烈怀疑垃圾邮件发送者的用户名不是计算机生成的，我认为尝试以某种方式以编程方式学习垃圾邮件发送者名称可能会很有趣。

用户名应介于 2 到 15 个字符之间，以字母开头并且仅包含字母、数字`_`或`-`.

一个示例名称列表将是

```
riazsports0171
maya34444
thelmaeatons
tigran777
newlive100
darbeshbaba
litondina10
nithuhasan
newlive100
bankuali
lldztwydni554
monomala505
nasiruddin1500
lldztwydni554
ariful3032
nazmulhasan 
```

我只有相当基本的算法知识（来自大学）。我的问题是，我可以使用哪些机器学习算法和/或字符串指标来预测任意用户名是否可能是垃圾邮件发送者。我考虑过使用余弦字符串相似度，因为它相当简单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:19:56.993

有趣的。但我不认为*字符串相似性*算法是最好的解决方案。

我会尝试从名称中提取特征，并使用**[分类算法](http://en.wikipedia.org/wiki/Statistical_classification)**。[与其他分类算法相比， SVM](http://en.wikipedia.org/wiki/Support_vector_machine)通常提供非常好的结果，但也有其他算法（例如：[朴素贝叶斯](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)、[决策树](http://en.wikipedia.org/wiki/Decision_tree_learning)、[KNN](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)）各有优缺点。

棘手的部分是**提取特征**。你应该有创意。一些选项是：位数，连续字母的数量，连续辅音的数量，大写的使用，大写的正确使用，匹配某个正则表达式，...（您也可以使用字符串以外的其他功能，例如此用户发送给您的消息数量，....）

接下来，您需要**创建一个训练集**。此训练集将包含垃圾邮件发送者和非垃圾邮件发送者用户名，这些用户名手动标记为垃圾邮件发送者或非垃圾邮件发送者。

将训练集提供给您选择的算法，它将**创建一个分类器**，您可以使用它来预测新用户是否是垃圾邮件发送者。

您可以通过对数据使用[交叉验证来](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)**评估**每种算法的有效性。

# android - Android Imagebutton 改变 Image OnClick

> ID：12249495
> 
> 赞同：36
> 
> 时间：2012-09-03T14:09:59.703
> 
> 标签：android, image, imagebutton

我刚刚在文件`drawable`夹下添加了一个新文件`res`夹。在文件夹中，我从文件夹`drawable`中复制了文件。当我按下按钮时，我想通过新图像更改标准图像。我写了一些代码，但是当我启动应用程序时，它崩溃了。`ic_launcher.png``drawable-hdpi``ImageButton`

```
Button imgButton; 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    findViewById(R.id.imgButton).setOnClickListener(imgButtonHandler);      
}

View.OnClickListener imgButtonHandler = new View.OnClickListener() {

    public void onClick(View v) {

        imgButton.setBackgroundResource(R.drawable.ic_launcher);

    }
}; 
```

编辑：我改成了这个，这也行不通。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    imgButton = (Button) findViewById(R.id.imgButton);
    imgButton.setOnClickListener(imgButtonHandler);
}

View.OnClickListener imgButtonHandler = new View.OnClickListener() {

    public void onClick(View v) {
        imgButton.setBackgroundResource(R.drawable.ic_launcher);

    }
}; 
```

编辑 2：这行得通。谢谢大家。

```
ImageButton button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    button= (ImageButton)findViewById(R.id.imgButton);
    button.setOnClickListener(imgButtonHandler);
}

View.OnClickListener imgButtonHandler = new View.OnClickListener() {

    public void onClick(View v) {
        button.setBackgroundResource(R.drawable.ic_launcher);

    }
}; 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-01-08T21:36:38.953

这误导了我一点 - 它应该`setImageResource`代替`setBackgroundResource`:) !!

以下工作正常：

```
ImageButton btn = (ImageButton)findViewById(R.id.imageButton1);       
 btn.setImageResource(R.drawable.actions_record); 
```

而当使用`setBackgroundResource`实际的 imagebutton 的图像时，背景图像会保持不变，这会导致一个难看的 imageButton 对象

谢谢。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-27T06:41:53.083

```
<ImageButton android:src="@drawable/image_btn_src" ... /> 
```

image_btn_src.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" android:drawable="@drawable/icon_pressed"/>
<item android:state_pressed="false" android:drawable="@drawable/icon_unpressed"/>
</selector> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-03T14:12:33.687

那是因为 imgButton 为空。试试这个：

```
findViewById(R.id.imgButton).setBackgroundResource(R.drawable.ic_action_search); 
```

或者更容易阅读：

```
imgButton = (Button) findViewById(R.id.imgButton);
imgButton.setOnClickListener(imgButtonHandler); 
```

然后在onClick中：`imgButton.setBackgroundResource(R.drawable.ic_action_search);`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T14:27:03.977

您可以在您的 XML 文件中执行此操作：

```
android:onClick="@drawable/ic_action_search" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T14:14:52.187

您对`imgButton`变量有 assing 按钮：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    imgButton = (Button) findViewById(R.id.imgButton);
    imgButton.setOnClickListener(imgButtonHandler);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-24T16:32:49.590

要在单击 ImageButton 时在不同图像之间切换，我使用了如下布尔值：

```
ImageButton imageButton;
boolean buttonOn;

imageButton.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View v) {
         if (!buttonOn) {
             buttonOn = true;
             imageButton.setBackground(getResources().getDrawable(R.drawable.button_is_on)); 
         } else {
             buttonOn = false;
             imageButton.setBackground(getResources().getDrawable(R.drawable.button_is_off));
         }
     }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-22T09:23:29.683

这很简单

```
public void onClick(View v) {

        imgButton.setImageResource(R.drawable.ic_launcher);

    } 
```

使用设置背景图片资源将改变按钮的背景

# c# - 页面关闭事件或预览已卸载？

> ID：12249496
> 
> 赞同：2
> 
> 时间：2012-09-03T14:10:00.153
> 
> 标签：c#, wpf, xaml

首先，感谢您抽出宝贵时间阅读这篇文章。

让我直接回答我的问题。

如果 WPF 页面在关闭之前关闭，有什么方法可以捕获它？即某种PreviewClosing 事件？我注意到有一个 Unloaded 事件，但我需要在页面关闭之前触发一些东西。

我的应用程序有一个**Window**。**Window**的主体包含一个**Frame**，然后该框架用于导航到**Page**。

**WPF 窗口 XAML**

```
<Grid>
    <Frame x:Name="_mainFrame" />
</Grid> 
```

**C# 将我的窗口框架导航到名为 SpecEditor 的页面**

```
_mainFrame.Navigate(new SpecEditor(customerDetails)); 
```

当宿主窗口试图关闭时（即 PreviewClosing 事件），我需要一些方法来触发**SpecEditor 页面**中的事件，以便我可以执行各种检查。主要是提示用户保存任何未保存的工作。

由于页面似乎没有任何 PreviewClosing 或 PreviewUnloaded 事件，我如何解决这个问题的任何想法。

再次感谢您的宝贵时间。

****** *** ***编辑***** ** *** ******

 **好的，我已经设法弄清楚我需要什么。

在主窗口中，我分配 PreviewClosing 事件：

```
private void RadWindow_PreviewClosed(object sender, WindowPreviewClosedEventArgs e)
    {
    } 
```

要访问主窗口中的“框架”，您可以使用以下命令（注意我将框架命名为 _mainFrame）：

```
this._mainFrame.Content 
```

就我而言，Frame 中托管的页面名为“SpecEditor”，其中包含一个停靠控件。因此，要访问我的页面内容，我可以执行以下操作：

```
((SpecEditor)this._mainFrame.Content).radDocking 
```

它将我的框架（即页面）的内容转换为我的自定义页面类（SpecEditor），它允许我访问它的内容，例如我的停靠控件。

为了获得良好的编码，值得检查框架内容实际上是您尝试投射到的页面。你可以这样做：

```
if (this._mainFrame.Content is SpecEditor)
    {
      ((SpecEditor)this._mainFrame.Content).radDocking
      .... etc etc
    } 
```

我希望这有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-01T20:04:20.493

如果您真的在使用框架，这篇文章显示了另一种方法： [https ://highfieldtales.wordpress.com/2013/07/27/how-to-prevent-the-navigation-off-a-page-in-wpf/](https://highfieldtales.wordpress.com/2013/07/27/how-to-prevent-the-navigation-off-a-page-in-wpf/)

作者将事件用于框架的导航设施。**

# c# - 对象引用静态成员垃圾处理

> ID：12249505
> 
> 赞同：3
> 
> 时间：2012-09-03T14:10:47.097
> 
> 标签：c#, .net, static, garbage-collection

希望你不介意，我可能遗漏了一些东西；我只需要对以下情况进行一些说明：如果对象***a***包含对静态列表的引用以及该静态列表中的条目，并且对象***a***超出范围，它会被垃圾收集吗？我是否需要将对象***a***对静态列表的引用和对该列表中条目的引用设置为 null 才能使其符合条件？

我知道静态列表包含将在应用程序的生命周期中存在的对象，所以我在想，因为对象***a***仍然引用该静态列表中的条目，它仍然在仍然存在的对象的主要依赖对象图中？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:13:11.657

在您的情况下，静态列表将存在，但**将**被垃圾收集，因为您无法从任何其他地方访问它并且将其保存在内存中是没有意义的。您不需要对静态列表的引用为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:41:04.720

首先，对象不会超出范围，变量会。大多数情况下，区别是语义之一，但在这里很重要。

让我们为您所谈论的内容创建一个具体示例：

```
private static List<string> static_strings = new List<string>();//this won't be
                                                                //collected unless we
                                                                //assign null or another
                                                                //List<string> to static_strings
public void AddOne()
{
  string a = new Random().Next(0, 2000).ToString();//a is in scope, it refers
                                                   //to a string that won't be collected.
  static_strings.Add(a);//now both a and the list are ways to reach that string.
  SomeListHolder b = new SomeListHolder(static_strings);//can be collected
                                                        //right now. Nobody cares
                                                        //about what an object refers
                                                        //to, only what refers to it.
}//a is out of scope.
public void RemoveOne()
{
  if(static_strings.Count == 0) return;
  a = static_strings[0];//a is in scope.
  static_strings.RemoveAt(0);//a is the only way to reach that string.
  GC.Collect();//Do not try this at home.
  //a is in scope here, which means that we can write some code here
  //that uses a. However, garbage collection does not depend upon what we
  //could write, it depends upon what we did write. Because a is no
  //longer used, it is highly possible that it was collected because
  //the compiled code isn't going to waste its time holding onto referenes
  //it isn't using.
} 
```

正如这里所看到的，范围什么都不是，可达性就是一切。

对于引用静态的对象，它所引用的内容无关紧要，只有引用它的内容。

特别要注意，这意味着循环引用不会阻止项目被收集，这与*某些*引用计数垃圾收集方法不同。

# shell - sed 插入多行

> ID：12249509
> 
> 赞同：8
> 
> 时间：2012-09-03T14:10:57.790
> 
> 标签：shell, sed

我正在尝试使用 sed 进行插入（刚刚阅读过它）并且我试图插入多行而被难住了？

我目前正在做的是：

```
sed -i "${line} i\
        /* Name - ID */ \
        select  @ID = NULL \
        from    Animals \
        where   VrsnID = @VrsnID \
        and     Request= \"Request\" \
 \
" animalNames.txt 
```

注意`echo $line`== 131

**新问题**

输出中的所有内容都出现在一行上？（也缺少第一个缩进）

```
/* Name - ID */        select  @ID = NULL         from    Animals         where   VrsnID = @VrsnID         and     Request= "Request" 
```

**解决**

但这会引发：

```
sed: -e expression #1, char 47: unknown command: `
' 
```

知道为什么吗？

谢谢你的时间

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T14:47:05.007

在 shell 脚本中，反斜杠+换行符扩展为空。这是一种在字符串中实际上没有换行符的情况下继续下一行的方法。所以 sed 看到的只是一条大线。相比：

```
$ echo "foo\
> bar"
foobar
$ echo "foo
> bar"
foo
bar 
```

您需要向 sed 传递一个反斜杠和一个换行符，因此通过在反斜杠前面放置另一个反斜杠来避开反斜杠。

```
sed -i "${line} i\\
        /* Name - ID */ \\
        select  @ID = NULL \\
        from    Animals \\
        where   VrsnID = @VrsnID \\
        and     Request= \"Request\" \\

" animalNames.txt 
```

[如果您将标准输入上的脚本作为此处文档](http://en.wikipedia.org/wiki/Here_document)传递，这可能更具可读性。您需要将扩展​​保留在替换上`${line}`，因此您仍然需要将反斜杠加倍。

```
sed -i -f - animalNames.txt <<EOF
${line} i\\
        /* Name - ID */ \\
        select  @ID = NULL \\
        from    Animals \\
        where   VrsnID = @VrsnID \\
        and     Request= "Request" \\

EOF 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T14:40:45.670

对于新的麻烦：使用双反斜杠`\\`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T19:48:42.570

这可能对您有用：

```
sed ${line}'i\
    /* Name - ID */ \
    select  @ID = NULL \
    from    Animals \
    where   VrsnID = @VrsnID \
    and     Request= \"Request\"

' animalNames.txt 
```

# recaptcha - 安装 recaptcha 有困难

> ID：12249510
> 
> 赞同：0
> 
> 时间：2012-09-03T14:10:58.410
> 
> 标签：recaptcha

我正在尝试使用 recaptcha--client 安装 recaptcha。我试着打字`easy_install recaptcha-client`

有这个错误：

```
raceback (most recent call last):
  File "/usr/bin/easy_install-2.7", line 10, in <module>
    load_entry_point('setuptools==0.6c12dev-r85381', 'console_scripts', 'easy_install')()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 318, in load_entry_point
    """Locate distribution `dist_spec` and run its `script_name` script"""
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 2220, in load_entry_point 
```

不知道如何解决这个错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:23:12.257

从这个网站下载 recaptcha-client：http: [//pypi.python.org/pypi/recaptcha-client](http://pypi.python.org/pypi/recaptcha-client)和 cd 进入路径并输入`python setup.py install`

# xna - 查找数组中的最小像素

> ID：12249513
> 
> 赞同：1
> 
> 时间：2012-09-03T14:11:04.410
> 
> 标签：xna, shader, hlsl

我试图在 XNA 中将 X 的任意纹理减少 X 到 X 的 2。我尝试运行此代码：

```
int x;
int y;
float2 minim={1,1};
float2 current;
if(coords.x==0)
{
    for(x=0;x<=range/2;x=x+1)
    {
        coords.x=x;
        current=tex2D(input,coords);
        minim=min(minim,current);       
    }
}
if(coords.x==1)
{
    for(x=range/2;x<=range;x++)
    {
        coords.x=x;
        current=tex2D(input,coords);
        minim=min(minim,current);       
    }
}
return float4(minim,0,1); 
```

我在尝试编译时遇到了各种各样的问题，比如“无法展开循环”和“不能在循环中使用渐变”。

**第一个问题**：通过尝试在单个着色器通道中计算它，我是否走在正确的道路上，或者我应该通过乒乓球 RenderTargets 之间的日期以更小的步骤减少它？

**第二个问题**：如果这个想法是正确的，那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:34:35.633

**第二个问题：**无论你想用那个着色器做什么......编译器说它不能*展开循环*，因为它在编译时不知道“范围”的值。可能您的着色器模型版本需要编译时常量迭代计数，例如。您不允许在“for”条件下使用动态变量。

**第一个问题：**你当然可以一次完成你用文字提出的问题，但是着色器块太脱离上下文了，我无法回答问题 1...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:56:08.123

您是否探索过使用着色器以外的其他方法来实现这一目标？

在我的头顶上：

1) 在绘制这个纹理时，给源矩形的宽度为 2，高度为 X，因此只用 X 绘制 2 而不是 X 由 X 绘制。

2) 利用 GetData 和 SetData 提取您希望使用的纹理的 2 x X 部分。

# android - runOnUiTHread 代码未执行

> ID：12249517
> 
> 赞同：0
> 
> 时间：2012-09-03T14:11:34.977
> 
> 标签：android, android-asynctask

由于某种原因，我在 runOnUiThread 调用中的代码似乎没有执行：

```
 ((Activity) ctx).runOnUiThread(new Runnable() {
            public void run() {
                Log.d(TAG,"createAndDisplayDialog - Start dialog");
                progressDialog = new MyDialog(ctx);  
                progressDialog.show();
                Log.d(TAG,"createAndDisplayDialog - Started dialog");
            }
        }); 
```

该对话框根本不显示。

但是，为了使事情更加混乱，它在某些情况下确实有效，但在其他情况下无效。

我们拥有的是一个包含数据的列表。该列表包括一个“获取更多数据”按钮。然后，onclick 侦听器调用代码以获取更多数据并将其添加到适配器使用的列表中。当我填充第一批数据时，它会在前一个活动中获取，然后通过适配器发送到显示活动以在列表中显示。在这种情况下会显示对话框。但是，当我要求更多数据时，这些数据运行的代码与获取原始数据集时使用的代码相同，对话框不再显示。

在这两种情况下，数据的获取都是在 AsyncTask 中完成的。数据正常，但对话框根本不显示。

更令人困惑的是，我们还有其他未提前获取数据的屏幕。取而代之的是适配器完成所有工作——获取原始数据和请求的任何更多数据。在这种情况下，对话框出现没有任何问题。

我可能错过了一些简单的东西，但似乎找不到它。

# objective-c - 如何将 Google Protocol Buffer 集成到 xCode 项目中？

> ID：12249519
> 
> 赞同：2
> 
> 时间：2012-09-03T14:11:45.260
> 
> 标签：objective-c, xcode, serialization, marshalling, protocol-buffers

我目前正在尝试将这个第三方 Objective-C 版本的 Google Protocol Buffer 集成到我的 xCode 项目中，以便我可以编译它： [Objective-C implementation of Google Protocol Buffer](http://code.google.com/p/metasyntactic/wiki/ProtocolBuffers)

现在我已经成功地制作并安装了库以及与设置有关的所有内容。我的问题在于理解一些设置说明。更具体地说，在上面提供的链接下的**项目集成**下找到的分步列表。

> 在您的项目中添加对 /Classes/ProtocolBuffers.h 的引用，并将以下行添加到您的 pch 文件中：#import "ProtocolBuffers.h"

现在有了这个，我想这意味着简单地将头文件拖到您的项目中？不幸的是，当我这样做时，我得到的只是一个链接器错误，提示找不到文件。

> 获取有关您的构建目标的信息

我只是对这应该是什么意思感到困惑？

> 添加 ProtocolBuffers 作为构建目标的直接依赖项。

不幸的是，我在 xCode 中对这类工作并没有太多经验。我试图在谷歌上搜索，人们建议简单地将整个项目拖到您的主项目中，然后将其添加为您的目标的参考，但我永远无法真正做到这一点。任何人都可以向我指出一些关于如何做到这一点的好文章？

总而言之，我只是想弄清楚这一切，如果有人能澄清其含义或将我指向文章或其他论坛帖子来解释如何做到这一点，那就太棒了:)

谢谢大家的帮助：）

**[编辑]**

似乎安装程序所引用的名为 libProtocolBuffers.a 的库也丢失了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:00:25.607

我希望您已成功安装库并为测试 .proto 文件创建了 .pb.h 和 .pb.m 文件。

我正在使用[启用 ARC 的 iOS 5 版本](https://github.com/regwez/protobuf-objc-iOS5)的元语法项目。但我认为这些步骤或多或少是相同的。

*   将这些 .pb.h 和 pb.m 文件添加到您的项目中（简单地将文件添加到项目中）。构建时，您会在 .pb.h 文件中看到一个错误，指出该文件丢失。*因此，从install path -> src -> runtime -> Classes*添加该文件。并将*#import "ProtocolBuffers.h"*添加到您的 .pch 文件中。

*   再次构建将给出错误，指出无法找到某些 .h 文件。单击*项目目标 -> 构建设置选项卡 -> 搜索路径 -> 标题搜索路径*：添加“src”文件夹的路径并单击递归复选框

**现在添加目标依赖项**

在项目导航窗格中，*右键单击项目 -> 将文件添加到项目 -> 导航以安装路径 -> src -> 运行时：*添加 ProtocolBuffers.xcodeproj 文件。您应该能够在您自己的项目中看到整个 ProtocolBuffer 项目。

现在转到*项目目标 -> 构建阶段选项卡 -> 目标依赖项*：单击 +，您将能够看到 ProtocolBuffer 项目目标。单击 ProtocolBuffers 添加依赖项。

现在在同一个选项卡中点击“Link Binary with Libraries”，点击+。添加 libProtocolBuffers.a 文件并构建。

libProtocolBuffers.a 实际上并没有丢失，而是您刚刚添加的 ProtocolBuffers 项目的输出。

# jboss7.x - JBoss AS7 上的 EJB 2.1 子查询

> ID：12249520
> 
> 赞同：1
> 
> 时间：2012-09-03T14:11:50.790
> 
> 标签：jboss7.x, ejb-2.x, cmp

早上好，

我正在将 EJB 2.1 项目从 JBoss AS5 迁移到 AS7，但遇到了一些麻烦。该项目包含多个定义的 EJB 查询，其中一些无法正常工作，例如：

```
 <query>
    <query-method>
       <method-name>findByIdOwnershipMaxYear</method-name>
       <method-params>
         <method-param>java.lang.Long</method-param>
       </method-params>
    </query-method>
    <ejb-ql>SELECT OBJECT(o) FROM OwnershipHistory o WHERE o.id = ?1 and o.year = ( select max(oh.year) from OwnershipHistory oh where oh.id = ?1)</ejb-ql>
  </query> 
```

所有查询都在每个模块的*ejb-jar.xml文件中声明。*当我启动 JBoss 时，带有子查询的那些（如上）总是给出 org.jboss.as.cmp.ejbql.ParseException：

```
Encountered " "SELECT" "select "" at line 1, column 73.
Was expecting one of:
    "ABS" ...
    "LENGTH" ...
    "LOCATE" ...
    "SQRT" ...
    "MOD" ...
    "(" ...
    "+" ...
    "-" ...
    <INTEGER_LITERAL> ...
    <FLOATING_POINT_LITERAL> ...
    <NUMERIC_VALUED_PARAMETER> ...
    <NUMERIC_VALUED_PATH> ... 
```

我的疑问是，在以前的版本中，我可以在*标准 jbosscmp-jdbc.xml*文件中进行“支持子查询”的配置；有谁知道这在AS7上是否仍然可行？

我查看了[数据源配置指南](https://docs.jboss.org/author/display/AS71/DataSource+configuration)和[DD 部分](https://docs.jboss.org/author/display/AS71/Deployment+Descriptors+used+In+AS7.1)，但到目前为止我不知道在哪里可以做到这一点。

抱歉有任何拼写错误，英语不是我的母语

谢谢。

# c++ - 从 C++ 列表中删除一次

> ID：12249526
> 
> 赞同：0
> 
> 时间：2012-09-03T14:12:29.190
> 
> 标签：c++

我有以下示例：

```
// remove from list
#include <iostream>
#include <list>
using namespace std;

int main ()
{
  int myints[]= {17,89,89,7,14};
  list<int> mylist (myints,myints+5);

  mylist.remove(89);

  cout << "mylist contains:";
  for (list<int>::iterator it=mylist.begin(); it!=mylist.end(); ++it)
        cout << " " << *it;
  cout << endl;

  return 0;
} 
```

结果是：

```
17, 7, 14 
```

问题在于它删除了 89 的两个实例。有没有简单的方法来删除 89 的一个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:14:15.913

不，没有。但是，您可能会这样做：

```
mylist.erase(find(mylist.begin(), mylist.end(), 89)); 
```

# c# - 如何将 VB.NET 的 CType() 转换为 C#？

> ID：12249528
> 
> 赞同：10
> 
> 时间：2012-09-03T14:12:33.257
> 
> 标签：c#, .net, vb.net, casting

我在 VB.NET 中有这个代码段：

```
CType(pbImageHolder.Image, Bitmap).SetPixel(curPoint.X, curPoint.Y, Color.Purple) 
```

C# 中的适当代码是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T14:13:50.783

在 VB.Net`CType(object, type)`中，将对象转换为特定类型。

在 C# 中有两种方法可以实现这一点：

```
Bitmap image = pbImageHolder.Image as Bitmap;
image.SetPixel(curPoint.X, curPoint.Y, Color.Purple); 
```

或者

```
Bitmap image = (Bitmap)(pbImageHolder.Image);
image.SetPixel(curPoint.X, curPoint.Y, Color.Purple); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-03T14:13:42.717

```
((Bitmap)pbImageHolder.Image).SetPixel(curPoint.X, curPoint.Y, Color.Purple) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T10:40:51.897

嗨，这是将 VB 转换为 C# 代码后的代码：

```
((Bitmap)pbImageHolder.Image).SetPixel(curPoint.X, curPoint.Y, Color.Purple); 
```

如果你想从 VB 到 C# 的代码转换，反之亦然，请通过以下链接： http: [//www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-10-01T07:30:11.117

我很惊讶关于这个主题的答案都不正确，所以我决定在这里发帖。您可以通过反编译 VB.NET 程序来验证发生了什么。答案取决于要转换为的类型。

对于参考类型：

`Dim value = CType(x, ReferenceType)`

`var value = (ReferenceType)x;`

对于结构：

`Dim value = CType(x, StructType)`

`var value = (x != null) ? ((StructType)x) : default(StructType);`

对于预定义的演员表：

`Dim value = CDbl(x)`

`var value = Microsoft.VisualBasic.CompilerServices.Conversions.ToDouble(x)`

看起来像这样：

```
internal static double ToDouble(object Value, NumberFormatInfo NumberFormat)
{
    if (Value == null)
    {
        return 0.0;
    }
    IConvertible convertible = Value as IConvertible;
    if (convertible != null)
    {
        switch (convertible.GetTypeCode())
        {
        case TypeCode.Boolean:
            if (Value is bool)
            {
                return 0 - (((bool)Value) ? 1 : 0);
            }
            return 0 - (convertible.ToBoolean(null) ? 1 : 0);
        case TypeCode.SByte:
            if (Value is sbyte)
            {
                return (sbyte)Value;
            }
            return convertible.ToSByte(null);
        case TypeCode.Byte:
            if (Value is byte)
            {
                return (int)(byte)Value;
            }
            return (int)convertible.ToByte(null);
        case TypeCode.Int16:
            if (Value is short)
            {
                return (short)Value;
            }
            return convertible.ToInt16(null);
        case TypeCode.UInt16:
            if (Value is ushort)
            {
                return (int)(ushort)Value;
            }
            return (int)convertible.ToUInt16(null);
        case TypeCode.Int32:
            if (Value is int)
            {
                return (int)Value;
            }
            return convertible.ToInt32(null);
        case TypeCode.UInt32:
            if (!(Value is uint))
            {
                return convertible.ToUInt32(null);
            }
            return (uint)Value;
        case TypeCode.Int64:
            if (Value is long)
            {
                return (long)Value;
            }
            return convertible.ToInt64(null);
        case TypeCode.UInt64:
            if (!(Value is ulong))
            {
                return convertible.ToUInt64(null);
            }
            return (ulong)Value;
        case TypeCode.Decimal:
            if (Value is decimal)
            {
                return convertible.ToDouble(null);
            }
            return Convert.ToDouble(convertible.ToDecimal(null));
        case TypeCode.Single:
            if (Value is float)
            {
                return (float)Value;
            }
            return convertible.ToSingle(null);
        case TypeCode.Double:
            if (Value is double)
            {
                return (double)Value;
            }
            return convertible.ToDouble(null);
        case TypeCode.String:
            return ToDouble(convertible.ToString(null), NumberFormat);
        }
    }
    throw new InvalidCastException(Utils.GetResourceString("InvalidCast_FromTo", Utils.VBFriendlyName(Value), "Double"));
} 
```

# asp.net-mvc-3 - 如何在 MVC3 中使用 session 进行登录

> ID：12249531
> 
> 赞同：0
> 
> 时间：2012-09-03T14:12:48.380
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手，你能告诉我并展示一个示例，我如何使用 session 来检查用户是否在不同的视图中登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:19:28.840

如果您使用的是 asp.net 会员资格，则无需访问会话即可检查用户状态。

您可以使用 ：

```
Requrest.isAuthenticated //(HttpRequest.IsAuthenticated Property (System.Web)) 
```

如果用户已通过身份验证，则返回 true ，否则返回 false 。

**访问会话**

```
Session["variableName"] = "value"; 
```

# jquery - jquery ready 函数在 IE 中过早触发

> ID：12249532
> 
> 赞同：1
> 
> 时间：2012-09-03T14:12:52.257
> 
> 标签：jquery, asp.net, internet-explorer

我在 IE 中过早地触发了 jquery 就绪函数，但在 chorme 和 firefox 中没有

我有如下母版页

```
<%@ Master Language="C#" AutoEventWireup="true" Inherits="Site" EnableTheming="true"
    CodeBehind="Site.master.cs" %>

<%@ Register Src="Controls/WebStyle/Header.ascx" TagName="Header" TagPrefix="uc1" %>
<%@ Register Src="Controls/WebStyle/Footer.ascx" TagName="Footer" TagPrefix="uc2" %>
<%@ Register Src="Controls/WebStyle/OuterFooter.ascx" TagName="OuterFooter" TagPrefix="uc3" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="StyleSheet.css" rel="stylesheet" type="text/css" />
</head>
<body id="masterBody">
    <form id="form1" runat="server">
    <div id="container">
        <uc1:Header ID="Header1" runat="server" />
        <div style="padding: 10px;">
            <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
            </asp:ContentPlaceHolder>
        </div>
        <uc2:Footer ID="Footer1" runat="server" />
    </div>
    <uc3:OuterFooter ID="OuterFooter1" runat="server" />
    </form>
</body>
</html> 
```

在听者.ascx

```
<%@ Control Language="C#" AutoEventWireup="true" Inherits="Controls_Header" CodeBehind="Header.ascx.cs" %>
<div id="header">
    <div style="float: left;">
        <h1>
            Out Door Sport</h1>
    </div>
    <div style="float: left;">
        Shopping cart
    </div>
    <div style="clear: both;">
    </div>
    <div style="background-color: #fafafa; border: 1px solid #e5e5e5;">
        <div class="menu">
        </div>
        <div style="float: right; padding: 2px 10px 0 0;">
            <div style="float: left;">
                <input type="text" style="height: 24px; vertical-align: middle;" />
            </div>
            <div style="float: left;">
                <img src="Images/search.gif" />
            </div>
            <div style="clear: both;">
            </div>
        </div>
        <div style="clear: both;">
        </div>
    </div>
</div> 
```

在 site.js 中

```
$(function () {
    alert($('body').html());
}) 
```

在 default.aspx

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="UD.Web.App.Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <script src="Scripts/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.navigator.js" type="text/javascript"></script>
    <script src="site.js" type="text/javascript"></script> 
    <script src="Default.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <div>
    <div class="treeview"></div>
    </div>
</asp:Content> 
```

问题是表单标签结束并仅显示一些 asp.net 生成的东西。这发生了五分之一。警报代码如下

```
<form method="post" action="default.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1Mg9kFgJmD2QWAgIDD2QWBAIBD2QWAgIDD2QWAmYPFgIeC18hSXRlbUNvdW50AgIWBGYPZBYCAgEPDxYGHghJbWFnZVVybAUSfi9JbWFnZXMvZW4tVVMuZ2lmHg1BbHRlcm5hdGVUZXh0BQdFbmdsaXNoHgdUb29sVGlwBQVlbi1VU2RkAgEPZBYCAgEPDxYGHwEFEn4vSW1hZ2VzL3N2LVNFLmdpZh8CBQdTd2VkaXNoHwMFBXN2LVNFZGQCCw8WAh4JaW5uZXJodG1sBQItMWQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgIFQ2N0bDAwJE91dGVySGVhZGVyMSRTZWxlY3RDdWx0dXJlMSRkbENvdW50cmllcyRjdGwwMCRJbWFnZUJ1dHRvbkZsYWcFQ2N0bDAwJE91dGVySGVhZGVyMSRTZWxlY3RDdWx0dXJlMSRkbENvdW50cmllcyRjdGwwMSRJbWFnZUJ1dHRvbkZsYWfvfqd4cotpT4849hNOoTu9obRzdw==" />
</div>

<script type="text/javascript">
//<![CDATA[
    var theForm = document.forms['form1'];
    if (!theForm) {
        theForm = document.form1;
    }
    function __doPostBack(eventTarget, eventArgument) {
        if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
            theForm.__EVENTTARGET.value = eventTarget;
            theForm.__EVENTARGUMENT.value = eventArgument;
            theForm.submit();
        }
    }
//]]>
</script>

<script src="/WebResource.axd?d=YZToayqm_u92yQAeP-tJgEnhMpuABJ6Lcu4NHJQLuf3BVbwarcvFeGzQ4reAcVYOL3vG8GSIy16UR3eAxCbDP8Rnsew1&amp;t=634678095121673705" type="text/javascript"></script></form> 
```

# asp.net - 如何在asp .net中将大文件发送到请求流

> ID：12249533
> 
> 赞同：0
> 
> 时间：2012-09-03T14:12:54.533
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, wcf, rest

我想将大于 800 mb 的大文件发送到 cassansdra 存储。但我收到 **System.OutOfMemoryException**。

请在下面找到代码：

```
HttpWebRequest request = WebRequest.Create(postUrl) as HttpWebRequest;

Stream requestStream = request.GetRequestStream();

byte[] buffer = new byte[8 * 1024];

int len;
while ((len = fileToUpload.File.Read(buffer, 0, buffer.Length)) >0)
{
    requestStream.Write(buffer, 0, len);
    requestStream.Flush();
}
return request.GetResponse() as HttpWebResponse; 
```

请建议我代码的哪一部分需要改进？

fileToUpload 是来自 UI 的 800 MB 的确切流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:59:10.373

默认情况下，使用 HttpRequest 上传的文件的最大大小为 4 MB (4096 KB)。如果您可以访问接收端的代码，您可以在 web.config 中增加它，尽管我从未测试过 800+ MB 文件:) 请记住，Asp.Net 将在 180 秒后超时任何请求，因此实际上限制您可以上传的文件大小。

```
<httpRuntime
  executionTimeout="110" 
  maxRequestLength="4096" /> 
```

[在 ASP.NET 2.0 中上传文件](http://msdn.microsoft.com/en-us/library/aa479405.aspx)

恕我直言，您最好的选择是使用 HttpModule 分块发送文件。这些可能是有趣的：

[大文件上传使用 HttpHandler 还是 HttpModule？](https://stackoverflow.com/questions/10348554/large-file-upload-using-httphandler-or-httpmodule)

[用于文件上传、大文件、进度指示器的 HttpHandler 或 HttpModule？](http://forums.asp.net/t/55127.aspx/1/10)

祝你好运:)

# c# - 模拟不返回值的方法

> ID：12249539
> 
> 赞同：0
> 
> 时间：2012-09-03T14:13:15.393
> 
> 标签：c#, mocking

我有一个方法，其中包含对检查字符串输入是否为空或为空的方法的一系列调用。如果为空，则将第二个参数设置为 false；

```
public bool inputsContainData()
{
    bool validInputs = True;

    _helper.StringContainsData(_view.FilePath1, validInputs);
    _helper.StringContainsData(_view.FilePath2, validInputs);

    //...

    Return validInputs;
} 
```

StringContainsData() 方法在一个类中，该类被 DI 注入到演示者中。该方法不返回任何内容，因为结果变量是引用类型。

```
public void StringContainsData(string input, bool result)
{
    if( string.IsNullOrEmpty(input))
    {
        result = false;
    }
} 
```

我对此有一些问题，因为我无法模拟 StringContainsData() 并让它返回特定的结果。我能想到的唯一解决方案是，如果我包含第二个 If 语句，如下所示：

```
 public bool StringContainsData(string input, bool result)
    {
        if( string.IsNullOrEmpty(input))
        {
            if(result != false)
            {
                return false;
            }
        }
        else
        {
            if(result == false)
            {
                return false;
            }
        }
        return true;
    } 
```

从而阻止我拥有 True,False,True => final result = true 而不是 false。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:19:44.893

`bool`是一个[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch%28v=vs.71%29)，这意味着该值将被传递给方法而不是引用。

您有两个选择，您可以`bool`从这样的方法返回结果`StringContainsData`：

```
public bool StringContainsData(string input, bool result)
{
    return string.IsNullOrEmpty(input);
} 
```

或者你可以使用`ref`/`out`这可能不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:55:19.927

最简单的是重组以链接调用。

如果只需将先前的答案与新答案进行 AND 运算，则不需要另一个答案。

```
public bool StringContainsData(string aString, bool answerToDate) {
    return answerToDate && !string.IsNullOrWhiteSpace(aString);
}

public bool inputsContainData() {        
    bool validInputs = True;        

    validInputs = _helper.StringContainsData(_view.FilePath1, validInputs);        
    validInputs = _helper.StringContainsData(_view.FilePath2, validInputs);        

    return validInputs;        
} 
```

或者如果你想找点乐子

```
public bool inputsContainData() {        
    var inputs = new []{ _view.FilePath1, _view.FilePath2};
    return inputs.Aggregate(true, (ret, inp) => ret && !string.IsNullOrWhiteSpace(inp));        
} 
```

*笔记：*

最后一个版本本身看起来很复杂，但是如果您要添加更多文件路径来检查扩展数组比分配/调用行上的剪切/过去更简单/更安全。

在函数中，首先使用短路（&&）检查**ret**意味着如果我们已经失败，我们不需要检查当前输入。

# jquery - 如何在 MVC3 中将模型数据作为参数发送？

> ID：12249545
> 
> 赞同：0
> 
> 时间：2012-09-03T14:13:29.497
> 
> 标签：jquery, asp.net-mvc-3

我试图在我的 MVC 3 应用程序中将模型数据作为参数传递。我编写以下代码来实现功能

```
<script type="text/javascript">
     $(function () {
         var modelData = <%= Model.ToJson() %>;
     });

 </script> 
```

还要编写一个 JsonExtensions.cs 类来扩展该方法。在这里，我在 <% 符号之前收到**“预期表达式”**错误，并在运行应用程序时收到以下错误

**“Microsoft JScript 运行时错误：由于错误 80020101，无法完成操作。”**

我不确定我在这里缺少什么

# linux - 删除符号链接libc.so.6后如何恢复？

> ID：12249547
> 
> 赞同：31
> 
> 时间：2012-09-03T14:13:40.080
> 
> 标签：linux, shared-libraries, glibc

在我们的服务器中，指向的符号链接`libc.so.6`已被删除。现在系统中的所有二进制文件都不起作用。为了解决这个问题，我尝试了：

```
/bin/ln -s /lib/libc-2.11.3.so /lib/libc.so.6 
```

正如预期的那样，这给了我：

```
/bin/ln: error while loading shared libraries: libc.so.6: 
    cannot open shared object file: No such file or directory 
```

我也试过：

```
/lib/ld-linux-x86-64.so.2  --inhibit-rpath /lib/libc.so.6 \
   --library-path /lib/libc-2.11.3.so \
   /bin/ln -s /lib/libc-2.11.3.so /lib/libc.so.6 
```

结果相同。进一步不成功的尝试包括cp、mv、cat。

我是通过 ssh 连接的，我相信在关闭这个会话后我将无法打开另一个会话。有没有办法修复这个系统（也许使用 bash 内置插件）？

[**编辑**]我做了：

```
while read line; do echo $line; done < /lib/libc-2.11.3.so > libc.so.6 
```

复制文件并尝试：

```
/lib/ld-linux-x86-64.so.2  --inhibit-rpath libc.so.6 --library-path . \
  /bin/ln -s /lib/libc-2.11.3.so /lib/libc.so.6 
```

并得到：

```
/bin/ln: error while loading shared libraries: ./libc.so.6: ELF file OS ABI invalid 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-03T14:38:45.577

你可以简单地运行`ldconfig`. 大多数发行版都将其作为静态二进制文件提供。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-07T12:33:24.570

这对我有帮助（实际版本取决于您的库）：

```
ldconfig -l -v /lib/libc-2.13.so 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-05T01:55:40.887

尝试：

```
LD_PRELOAD=/lib/libc-2.17.so ln -s /lib/libc-2.17.so /lib/libc.so.6 
```

注意：实际版本取决于您的库。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-03T14:17:03.053

使用诸如 Knoppix 之类的 live cd 引导，并在将带有“损坏”系统的磁盘从正在运行的 live 系统中安装出来后修复丢失的链接。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-08T16:49:33.853

注意，对于 64 位：

`LD_PRELOAD=libc-2.13.so ln -s libc-2.13.so libc.so.6`

这对我很有用

如果您不在该目录中，那当然是这样的：
`LD_PRELOAD=/lib/x86_64-linux-gnu/libc-2.13.so ln -s /lib/x86_64-linux-gnu/libc-2.13.so /lib/x86_64-linux-gnu/libc.so.6`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-06T00:01:30.663

如果您之前执行过 ls 命令并且知道 libc 的版本是什么，

```
ldconfig -l -v /lib64/libc-2.x.so 
```

你的版本在哪里`x`工作。请注意，它可能是 lib64 或 lib，具体取决于您的版本。

我只是这样做了，它奏效了。

简而言之，永远不要删除链接。馊主意。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-12T03:00:33.977

如果您使用的是 Ubuntu，则 ldconfig 将不起作用。赶紧跑：

```
/sbin/ldconfig.real 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-18T12:54:40.020

非常感谢您的以下回答。它适用于根 ID。我们取消链接`libc.so.6`以链接到更高版本，但在取消链接 libc.so.6 服务器后突然变得无响应。 `ln -s`命令不起作用。没有其他用户能够通过 ssh 连接到服务器。但是当我们在命令下运行时，它起作用了。（服务器上存在 libc 版本）服务器开始正常运行。

下面一个是正确的命令和救生太......

```
LD_PRELOAD=/lib/libc-2.17.so ln -s /lib/libc-2.17.so /lib/libc.so.6 
```

注意：实际版本取决于您的库

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-21T13:17:31.260

我在尝试升级符号链接时不小心删除了文件 /lib64/libc.so.6 ......这很奇怪。ls、du、cd vim、su 等命令都不起作用

唯一能救我的是，我已经以 root 用户身份登录，所以运行“$ sln /lib64/libc.so-2.12 /lib64/libc.so.6”，这救了我的命

请参考此链接，它非常有帮助。而不是启动服务器和 [https://www.programmersought.com/article/2176688665/](https://www.programmersought.com/article/2176688665/) 只需确保您可以再次链接的符号链接与前一个相同

建议在重新启动等之前尝试所有操作，并且不要退出 bash 终端

# extjs - 如何应用自定义 CSS 将行选择到树网格面板到 Ext JS 4.1

> ID：12249549
> 
> 赞同：0
> 
> 时间：2012-09-03T14:13:42.907
> 
> 标签：extjs, extjs4.1, treegrid, treepanel

我是 ext js 的新手，我使用 Ext js 4.1 创建`treeGrid`面板，我们也为 ech 列使用不同的渲染函数。那么如何将 CSS 应用到 Selected Row 中`Treepanel`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:22:56.223

选定的原始 css 类是`x-grid-row-selected`，您可以覆盖它：

```
.x-grid-row-selected {
    background-color: red;
} 
```

在您的渲染器中，您可以使用元数据应用 css 类：

```
renderer: function( aValue, aMetaData, aRecord )
{
    aMetaData.tdCls = 'some-of-your-own';
} 
```

# apache - 如何使用 RewriteRule 中的子文件夹

> ID：12249553
> 
> 赞同：1
> 
> 时间：2012-09-03T14:13:50.720
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试使此重写规则起作用。我想要的是（传入的网址）：

```
http://hostname.com/mywebsite

http://hostname.com/mywebsite/test

http://hostname.com/mywebsite/something/another 
```

到（幕后）：

```
http://hostname.com/app.php

http://hostname.com/app.php/test

http://hostname.com/app.php/something/another 
```

常见的是需要忽略的“mywebsite”，但 url 仍然显示它

下面的重写规则不起作用，所以请帮忙

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^mywebsite(.*) /app.php/$1 [QSA,L] 
```

任何帮助都会非常好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:32:47.153

我认为一个更可靠且非常简单的解决方案如下：

考虑以下两种情况：

**案例 1：**如果您想要完整的 URL 重定向，请使用以下重写规则

```
RewriteEngine On
#Redirect to app.php/the-rest-of-param
RewriteRule ^mywebsite(.*)$ http://%{HTTP_HOST}/app.php$1 [R=301,L] 
```

*请注意，URL将更改如下*

[http://hostname.com/mywebsite](http://hostname.com/mywebsite)到[http://hostname.com/app.php](http://hostname.com/app.php)

[http://hostname.com/mywebsite/test](http://hostname.com/mywebsite/test)到[http://hostname.com/app.php/test](http://hostname.com/app.php/test)

[http://hostname.com/mywebsite/something/another](http://hostname.com/mywebsite/something/another)到[http://hostname.com/app.php/something/another](http://hostname.com/app.php/something/another)

**案例 2**：如果您不想要完全重定向（即不应更改 URL），那么您需要考虑以下几点。

1.  在这种情况下，请求的 URL 将被保留（即 url 应该类似于`http://hostname.com/mywebsite/test`）
2.  由于最终用户不应该知道内部发生了什么，`do not need to bypass your request to app.php/test`因此您没有服务器开销，*而是绕过您对 app.php 的请求*（我将在下面用 PHP 代码解释其余部分）

只需使用以下规则

```
RewriteEngine On
#No redirection, bypass request to app.php
RewriteRule ^mywebsite(.*)$ app.php 
```

现在您需要获取类似`/test`和`/something/another`正确的参数吗？使用以下代码块抓取它。

```
$param = '';
if (strpos($_SERVER['REQUEST_URI'], '/mywebsite') === 0) {
    //10 => length of "/mywebsite"
    $param = substr($_SERVER['REQUEST_URI'], 10);
}

echo 'URL PARAM: ' . $param; 
```

对于 URL [http://hostname.com/mywebsite](http://hostname.com/mywebsite) $param 将是空字符串

对于[http://hostname.com/mywebsite/test](http://hostname.com/mywebsite/test) $param 将是`/test`

对于[http://hostname.com/mywebsite/something/another/1234](http://hostname.com/mywebsite/something/another/1234) $param 将是`/something/another/1234`

*请注意，我刚刚避免了不需要的条件请求绕过，只是绕过了对 app.php 的所有请求，没有任何参数（因为参数与 URL 一起存在）*

你可以看到`$_SERVER['REQUEST_URI']`将保持价值类似于`/something/another/1234`并且`$_SERVER['PHP_SELF']`将类似于`/app.php/something/another/1234`

希望这可以解决您的问题...

# android - 相机布局上的面部皮肤

> ID：12249555
> 
> 赞同：0
> 
> 时间：2012-09-03T14:14:09.627
> 
> 标签：android, layout, camera, face-detection

嗨，我正在开发一个小应用程序，该应用程序使用`Android.Media.FaceDetector`库，但是，如果图片上的人没有看前面，则它不准确。在商店的一些应用程序中，我看到你拍照时有一个面部皮肤来指导你，所以我现在想知道如何修改相机布局来制作我自己的指导线。任何方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:23:15.073

我建议你试试

> 开放式CV

它是开源 SDK

[http://opencv.org/platforms/android.html](http://opencv.org/platforms/android.html)

# c# - Windows 8 Metro、移动和桌面应用程序之间的代码共享

> ID：12249557
> 
> 赞同：1
> 
> 时间：2012-09-03T14:14:23.513
> 
> 标签：c#, windows-8, microsoft-metro

我正在考虑将应用程序移植到 Windows 8 Metro。主引擎是一个`C++`库，所以我要做的就是创建 GUI（然后将其连接到`C++`引擎）。

我想知道如果创建 Metro 应用程序，我是否能够使用相同的代码并为桌面（Windows 7 等）构建它？如果有额外的工作多少钱？

同样在未来我将考虑创建一个 Windows 8 移动应用程序，我是否能够共享任何 Metro GUI 代码或者最好从头开始？

该项目是一个庞大的项目，因此代码重用是一个很大的积极因素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:28:04.300

每个平台的 UI 层都大不相同；但是，它们的处理方式有共同点。例如，C#/VB/XAML 可以在手机、Windows、桌面（甚至网络：Silverlight）中使用，但在特定功能、支持的属性等方面存在差异，因此很难“重新编译”

在我看来，你最好的选择是采用一种隔离差异的模式；[MVVM 是](http://channel9.msdn.com/blogs/kreekman/techdays-2010-understanding-the-model-view-viewmodel-pattern)跨平台的 GUI 应用程序的理想选择。它需要为每个目标使用不同的 UI 层 - 但无论如何您都希望利用外形、用户期望等。在每种情况下，代码都可以是 C#/VB XAML，尽管可能会重复使用许多构造和资产（即使通过复制和粘贴）。在幕后，“管道”可能完全相同，无论是内部业务对象层还是云中的 Web 服务。

在后端方面，也存在平台差异，[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)可以帮助缓解这些差异，尤其是在未来的工作中。展望未来，像[Windows 8 Shared Core](http://www.windows8update.com/2012/06/20/windows-phone-8-will-have-a-shared-windows-core/)这样的公告肯定会让这样的工作变得更容易。

有许多帖子和指南可用于跨平台（如 WPF 和 Silverlight）重用，并且许多主题将是相似的，尽管详细信息可能不特定于您的目标平台。这里有一些可能会帮助您构建您的方法，同样不要关注“Silverlight”的使用，而是关注文章中提到的技术和关注点。

[在 Silverlight 和 WPF 之间共享代码 在](http://msdn.microsoft.com/en-us/library/ff921109%28v=PandP.40%29.aspx)
[Windows Phone 7 中重用现有的 Silverlight 组件](http://mobile.dzone.com/articles/reusing-your-existing)

# jquery - 如何将 javascript 字符串数组转换为 json 字符串数组？

> ID：12249560
> 
> 赞同：1
> 
> 时间：2012-09-03T14:14:30.923
> 
> 标签：jquery, json

我目前正在编写一个需要通过 json 将字符串数组发送到 web 资源的查询。这是我需要调用的网络资源：

```
[WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]

Result API.ImportByNumbers(string[] _Numbers) {} 
```

现在我不知道如何形成我的 json 数据。我尝试发送一个包含所有数字的普通 javascript 字符串数组，但这给出了一个

> 无法处理子错误

当我尝试一组对象时

```
Data = '{"ID":"1", "ID":"2"}' 
```

webresource 中的值始终为空...

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:01:28.883

好的。我找到了解决方案：

```
var idArray = ...        array of strings    
var Data = {"_Numbers": idArray } 
```

然后在查询中：

```
Data = JSON.stringify() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:24:18.777

由于您的 webmethod 需要`string[] _Numbers`SO，因此您必须传递这样的 json 数据，该数据将发送数字字符串 .. 像这样的东西。

变种字符串={"1","2","3"};

```
var jsonData="{"+"_Numbers:"+"'"+string+"'"+"}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:15:20.660

看起来该服务期望接收一个数组，而不是一个对象，因此您应该尽量不要使事情复杂化并发送如下内容：

```
var json_str = "[1,2,3]" 
```

但是如果你真的需要一个 JSON 对象，那么你应该试试这个

```
var json_str='{"_Numbers":[1,2,3]}' 
```

# c++ - 如何用下标运算符中分配的值做一些事情？

> ID：12249565
> 
> 赞同：0
> 
> 时间：2012-09-03T14:15:01.283
> 
> 标签：c++, arrays, operator-overloading

假设我有数据数组 0,0,1,1,2,2,5,5,7,7,2,2 作为类中的数据成员，并且我想在它们中定义下标运算符

[i] 返回我 2*i 数组元素，但我也想让用户设置元素，所以

[i] = n，必须同时应用于 2*i 和 2*i+1。

是否可以通过仅向用户显示下标运算符来做到这一点？

```
0,0,1,1,2,2,5,5,7,7,2,2
[3] = 4;
0,0,1,1,2,2,4,4,7,7,2,2 
```

另一种解决方法？一般来说，它可能不仅仅是两个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:23:09.760

间接地，是的。

您可以使用基本上像函子一样工作的下标运算符返回一个专用类型，并根据您的规范负责分配值：

```
struct AssignFunctor {
  MyArrayType& parent;
  size_t index;
  AssignFunctor(MyArrayType& parent, size_t index) : parent(parent), index(index) {}
  AssignFunctor& operator=(int k) {
    parent.set(index,k);
    parent.set(index*2,k);
  }
  operator int() const {
    return parent.get(index);
  }
};

struct MyArrayType {
  AssignFunctor operator[](size_t index) {
    return AssignFunctor(*this,index);
  }
  int operator[](size_t index) const {
    return get(index);
  }
  void set(size_t,int);
  int get(size_t) const;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:42:46.673

我很确定您可以如上所述实现它。但是运算符重载有一个基本规则。 **不要改变运算符的含义**

从用户的角度来看，您正在设置一个元素，但它也适用于不同的元素。最好提供有意义的功能或更改数据结构的设计。

# sql-server - 更新 Oracle SELECT 中每一行的变量

> ID：12249568
> 
> 赞同：1
> 
> 时间：2012-09-03T14:15:11.210
> 
> 标签：sql-server, oracle, foreach

我通常使用 MS SQL。我有一段代码可能需要翻译成 Oracle SQL。在这段代码中，我为每一行更新了两个变量，以便找到并发用户的最大值。

我的问题是，是否可以像下面在 Oracle 的 MS SQL 代码中所做的那样做同样的事情？

```
-- The creation of this test table is not relevant to my question.
-- It is just there to make a working example
SELECT {ts '2012-09-03 10:12:00'} AS eventTime, 1 AS change
INTO #EVENTS
UNION ALL SELECT {ts '2012-09-03 10:24:00'}, 1
UNION ALL SELECT {ts '2012-09-03 10:25:00'}, 1
UNION ALL SELECT {ts '2012-09-03 11:02:00'}, -1
UNION ALL SELECT {ts '2012-09-03 11:25:00'}, 1
UNION ALL SELECT {ts '2012-09-03 11:34:00'}, 1
UNION ALL SELECT {ts '2012-09-03 12:15:00'}, -1
UNION ALL SELECT {ts '2012-09-03 13:50:00'}, -1
UNION ALL SELECT {ts '2012-09-03 14:20:00'}, -1
UNION ALL SELECT {ts '2012-09-03 14:44:00'}, -1

DECLARE @count int, @maxUsers int
SET @count = 0
SET @maxUsers = 0

-- This part is what is in question. Can you do something similar in Oracle?
-- Having calculation done for each row and store it in a variable for
-- the next row.
SELECT
    @count = @count + change,
    @maxUsers = CASE WHEN @count > @maxUsers THEN @count ELSE @maxUsers END
FROM #EVENTS
ORDER BY eventTime ASC

PRINT @maxUsers -- Prints the value 4

DROP TABLE #EVENTS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:35:54.657

Oracle 具有可用于获取诸如运行总计之类的分析功能。

```
SELECT MAX(CURRENTUSERS) FROM
(
  SELECT SUM(CHANGE) OVER (ORDER BY eventTime) AS CURRENTUSERS 
  FROM EVENTS
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:25:02.713

是的，你可以。使用 WITH 子句替换 #EVENTS，摆脱 DROP 并使用 select into 子句将其放入单个 SQL 语句中。为了进行 PRINT，请使用 dbms_output.put_line。我认为 ORDER BY 将不起作用，因此您必须使用 ROWNUMBER

# mysql - Integration between My SQL and Jasper Reports

> ID：12249569
> 
> 赞同：0
> 
> 时间：2012-09-03T14:15:14.093
> 
> 标签：mysql, eclipse, jasper-reports, jasperserver

I have MySQL server installed at `C:\[product name]\mysql-5.0.22-win` on my machine . But what should i specify in the JasperAssistant Data Source inside Eclipse for the following fields:-

```
- Name
- Driver
- URL 
```

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:50:01.020

我从未使用过 JasperAssistant ......但它肯定在寻找这个：

```
Name:   Some Connection Name (whatever you like)
Driver: com.mysql.jdbc.Driver
URL:    jdbc:mysql://localhost:3306/lotsodata 
```

您的数据库可能不称为“lotsodata”。您需要填写数据库的实际名称。

# c# - AutoQuarantine in Exchange Active Sync

> ID：12249570
> 
> 赞同：2
> 
> 时间：2012-09-03T14:15:20.237
> 
> 标签：c#, active-directory, exchange-server, mdm, activesync

I am doing a desktop application for Mobile Device Management which monitors Exchange Server activities. Specifically, i want to know which devices attempted to connect to Exchange active sync i.e "who had attempted to connect a mobile device to their mailbox". Upon detecting a new device i plan to perform an auto quarantine feature.

My problem is: How can i detect when a device is connected to Exchange through Active Sync in real time?

I am using Visual Studio 2010 and `C#` as a language.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:12:16.950

“实时”的唯一方法是让一些网络硬件在连接时检查流量。这些设备提供识别信息，因此您可以使用它来确定设备并将它们与用户联系起来。

您还可以通过 Powershell 查询 Exchange 以获取此信息，并且将其嵌入到您的应用程序中并不难。虽然不是实时的，但它非常准确，您还可以在此频道中触发隔离命令。

# c# - Comment box using jquery, ajax and asp.net?

> ID：12249571
> 
> 赞同：2
> 
> 时间：2012-09-03T14:15:22.297
> 
> 标签：c#, asp.net, ajax, jquery

I am working with ASP.Net web application. I need comment control such as [this](https://pinterest.com/) or [this](http://www.trippy.com/)

when we register on above site it's allow as to comment on deals.

Here I am able to make template like above site now I am facing problem with commenter option. If you have any idea please share

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:35:40.153

您可以使用[Facebook 评论插件](http://developers.facebook.com/docs/reference/plugins/comments/)，它非常好且很容易集成。

![在此处输入图像描述](../Images/4e7eaaf4b7541791b3acfc783751d53e.png)

**Facebook评论插件**

评论框是一个社交插件，可让用户在您的网站上发表评论。功能包括审核工具和分发。

社交相关性：评论框使用社交信号为每个用户提供最高质量的评论。评论被排序以向用户显示来自朋友、朋友的朋友以及最喜欢或最活跃的讨论线程的最相关评论，而标记为垃圾邮件的评论被隐藏起来。

分发：评论很容易与朋友或在 Facebook 上喜欢您主页的人分享。如果用户在发表评论时选中“发布到 Facebook”框，则她朋友的新闻提要上会出现一个故事，表明她在您的网站上发表了评论，该评论也将链接回您的网站。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-03T14:31:53.077

签出：[jQuery UI](http://jqueryui.com/)

他们有[自动完成功能](http://jqueryui.com/demos/autocomplete/)，并且有[watermark](http://code.google.com/p/jquery-watermark/)插件。

PS：您可能想在控件中列出您想要的功能，而不是让人们为您找出trippy.com上的文本框必须提供哪些功能......

# cakephp - cakePHP语言路由

> ID：12249573
> 
> 赞同：0
> 
> 时间：2012-09-03T14:15:29.867
> 
> 标签：cakephp, internationalization

我想要实现的是我只能更改 url 中的语言前缀，但是遇到问题......有我的路线：

```
$lang_regexp = implode('|', Configure::read('Config.languages'));
Router::connect('/', array('controller' => 'languages', 'action' => 'choose'));
Router::connect('/:lang/:controller/:action/*',
               array(),
               array('lang' => $lang_regexp));

// actual default page; can be any controller
    Router::connect('/:lang/pages/ajax_newsletter', array('controller' => 'pages', 'action' => 'ajax_newsletter'));
    Router::connect('/:lang/',
    array('controller' => 'pages', 'action' => 'index',  'home'),
    array('lang' => $lang_regexp));
    Router::connect('/:lang/:slug', array('controller' => 'pages', 'action' => 'pages'), array('lang' => $lang_regexp));
    Router::connect('/:slug', array('controller' => 'pages', 'action' => 'pages'), array('lang' => $lang_regexp));

    Router::connect('/:lang/special_offers', array('controller' => 'pages', 'action' => 'offers'));
    Router::connect('/:lang/special_offers/*', array('controller' => 'pages', 'action' => 'offers_city'));
    Router::connect('/:lang/news/*', array('controller' => 'pages', 'action' => 'news_article'));
    Router::connect('/:lang/news', array('controller' => 'pages', 'action' => 'news'));
    Router::connect('/:lang/:slug/:id/*', array('controller' => 'pages', 'action' => 'offers'), array('lang' => $lang_regexp));

    Router::connect('/cities/select', array('controller' => 'cities', 'action' => 'select'));
    Router::connect('/cities/select/*', array('controller' => 'cities', 'action' => 'select')); 
```

我的语言切换器：

```
$this->html->link($this->html->image('flag_ru.gif',  array("alt"=>"", "width"=>"14px", "height"=>"12px", "title"=>"")), array("lang" => "rus"), array('escape' => false)); 
```

`:lang/:slug`是菜单条目，所以如果我`localhost/eng/contact`在语言更改后有菜单，我会得到`localhost/rus/pages/pages`......如何只更改语言前缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:02:49.197

您可以访问`$this->request->controller`and `$this->request->action`，以及`pass`and`named`用于传递和命名的参数。

```
$this->html->link($this->html->image('flag_ru.gif',  array("alt"=>"", "width"=>"14px", "height"=>"12px", "title"=>"")), array("lang" => "rus", "controller" => $this->request->controller, "action" => $this->request->action), array('escape' => false)); 
```

例如，应该工作。

有关详细信息，请参见[此处](http://book.cakephp.org/2.0/en/controllers/request-response.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:41:22.713

本文： http: [//nuts-and-bolts-of-cakephp.com/2008/11/28/cakephp-url-based-language-switching-for-i18n-and-l10n-internationalization-and-localization/](http://nuts-and-bolts-of-cakephp.com/2008/11/28/cakephp-url-based-language-switching-for-i18n-and-l10n-internationalization-and-localization/)交易正是在这种创建一种语言路径以及自动将语言添加到所有链接的情况下。

# c# - How to get data into datagrid using dataset?

> ID：12249574
> 
> 赞同：0
> 
> 时间：2012-09-03T14:15:29.680
> 
> 标签：c#, c#-4.0

whats wrong with this code ? i want populate all users in datagridview1 but datagirdview showing nothing .

```
private void button4_Click( object sender, EventArgs e )
{
    dataGridView1.AutoGenerateColumns = true;
    dataGridView1.DataSource = db.todosUsuario("select usuario from usuarios");
}

//DB class
public DataSet todosUsuario(string query)
{
    DataSet dt= new DataSet();
    try
    {
        MySqlConnection cnn = new MySqlConnection(MysqlConnect());
        cnn.Open();
        MySqlDataAdapter da = new MySqlDataAdapter(query, cnn);
        da.Fill(dt,"Usuario");
        cnn.Close();
    }
    catch(Exception ed)
    {
        MessageBox.Show(ed.ToString());
    }
    return dt;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:29:34.780

您正在将 DataGridView 绑定到 DataSet。
在数据集中有多个表，因此您需要使用 DataMember 属性指定应在 DataGrid 中显示的表。（当您在表格集合中只有一个时也是如此）

```
dataGridView1.AutoGenerateColumns = true; 
DataSet ds = db.todosUsuario("select usuario from usuarios"); 
dataGridView1.DataMember = ds.Tables[0].TableName;
dataGridView1.DataSource = ds; 
```

您可以将代码绑定更改为单个表

```
dataGridView1.DataSource = ds.Tables[0]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T19:07:28.013

以下可能被认为是一个重要的评论而不是一个答案，这就是为什么我做出了CW的答案。

所呈现的代码存在许多问题。这些代表了早点失去的好习惯。

```
private void button4_Click(object sender, EventArgs e)
{
    try
    {
        dataGridView1.AutoGenerateColumns = true;
        dataGridView1.DataSource = db.todosUsuario("select usuario from usuarios");
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString(), "Exception");
    }
}

//DB class
public DataSet todosUsuario(string query)
{
    DataSet dt = new DataSet();
    using (MySqlConnection cnn = new MySqlConnection(MysqlConnect()))
    {
        cnn.Open();
        using (MySqlDataAdapter da = new MySqlDataAdapter(query, cnn))
        {
            da.Fill(dt, "Usuario");
        }
        cnn.Close();
    }
    return dt;
} 
```

连接和数据适配器对象都实现了`IDisposable`，因此应该包装在`using`块中。

此外，让每个方法都关注捕获异常并不是一个好主意，尤其是当您唯一能做的“处理”是显示错误消息时。特别是，通过`MessageBox.Show`在您的 DB 类中进行调用，您要求它在 Windows 窗体应用程序中运行，并且违反了关注点分离。

相反，我建议您在代码中将异常处理置于非常高的级别。对于 Windows 窗体应用程序，最好将异常处理保留在事件处理程序中，以免异常从事件中“逃脱”。更好的是在全球范围内进行这种最后的处理，但我从未在 WinForms 应用程序中这样做过，因此无法向您展示如何操作。

# android - TypeError 'undefined' is not an object (evaluating $ event)

> ID：12249575
> 
> 赞同：1
> 
> 时间：2012-09-03T14:15:38.457
> 
> 标签：android, jquery, jquery-mobile

I am trying to load a local HTML file in my Android application's webview. The HTML file references a local copy of `jquerymobile.js`. My problem is when the application is launched, the following error is thrown:

`TypeError 'undefined' is not an object (evaluating $ event)`

This happens even without any code written that uses the `jquery lib`.This error does not happen when I load the jquery library from their `CDN`.

Any ideas as to what I am doing wrong? Thanks for your time.

Added code for more clarity:

This is where the `WebView` loads the `url`

```
try {
        //this reads the jquerymobile as a string
        jmobile = readFileAsString();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
  wview1.setWebChromeClient(new WebChromeClient() {
        @Override
        public boolean onJsAlert(WebView view, String url, String message,           JsResult result) {
                    //Required functionality here
                    return super.onJsAlert(view, url, message, result);
           }   
  });
 wview1.setWebViewClient(new WebViewClient() {
        @Override
       public void onPageFinished(WebView view, String url) {
            super.onPageFinished(wview1, url);
              wview1.loadUrl("javascript:"+jmobile);
            // do your stuff here
        }
    });
    wview1.loadUrl("file:///android_asset/html/index.html"); 
```

The following works

```
<!DOCTYPE html> 
<html> 
    <head> 
<title>My Page</title> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

**But if I change the script src to a local copy of jquery.mobile-1.1.1.min.js, I get the type error**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:28:18.763

当您引用本地文件时，请按以下顺序放置这些引用：

1.  移动端 CSS
2.  jQuery核心的JS
3.  jQuery 移动端的 JS。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:18:25.963

我理解您的问题如下：您在本地有一个 HTML 文件和 JS 文件。现在你需要加载 HTML 和 JS。但是失败了。

你能告诉我如何加载 HTML 文件并将 jquerymobile.js 注入其中。

我通常这样做：

```
WebView.setWebViewClient(new myWebViewClient ());

clsss myWebViewClient extend WebViewClient{
     @Override
     OnPageFinished(View view, String Url){
          view.loadUrl("javascript:"+String in jquerymobile.js);
     }
}

WebView.loadUrl("test.html"); 
```

这会对你有帮助吗？

# matlab - Output text/numbers in MATLAB but overwrite same line in command window

> ID：12249579
> 
> 赞同：3
> 
> 时间：2012-09-03T14:15:44.643
> 
> 标签：matlab, formatting, printf

So I have a for-loop, and at every iteration, I would like to display formatted text, along with some numbers. Normally one could use disp or fprintf I suppose, but what I want to do, is have the *same* part of the command window output the text/numbers, just overwriting the old output.

How might I be able to do that? I have seen it in some other programs so I know it is possible, but not how.

As an example, lets say on the first iteration of a for-loop, I want this to be output on the command prompt:

```
>> Measurement1 : 0.33 0.23 0.34 -32.32
   Measurement2 : 433.2
   Text Stuff   : 'The cat who ate the rat' 
```

Now, on the second iteration of the loop, I DONT want a new line or lines, I simply want the old numbers and old text to be *replaced*, in the *same* place on the command window. So on teh second iteration, I might get this:

```
>> Measurement1 : -132.3 32.1 32.23 -320.32
   Measurement2 :  3.2
   Text Stuff   : 'The dog who ate the cat' 
```

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T10:22:50.613

我只是为了这个目的使用'dispstat'函数。它可以更新以前的输出，这是默认“disp”的缺失功能。使用非常简单。它可以从这里下载：http: [//www.mathworks.com/matlabcentral/fileexchange/44673-overwritable-message-outputs-to-commandline-window](http://www.mathworks.com/matlabcentral/fileexchange/44673-overwritable-message-outputs-to-commandline-window)

***示例用法：

```
 dispstat('','init'); % One time only initialization
 dispstat(sprintf('Begining the process...'),'keepthis','timestamp');
 for i = 97:100
     dispstat(sprintf('Progress %d%%',i),'timestamp');
     %doing some heavy stuff here
 end
 dispstat('Finished.','keepprev'); 
```

***输出：

```
11:25:37 Begining the process...
11:25:37 Progress 100%
Finished. 
```

一切顺利

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:58:06.803

[This](http://blogs.mathworks.com/loren/2007/08/01/monitoring-progress-of-a-calculation/) article表明您可以使用退格键来执行此操作，尽管它似乎也说它不适用于多行。

原则是在每次迭代中输出足够的退格字符以将光标移动到输出的开头，然后开始在旧输出上写入新输出。当您来回移动光标时，您必须跟踪光标位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T15:56:24.383

这是您正在寻找的示例：

```
%# Generate the data
Measurement1 = {[0.33 0.23 0.34 -32.32]; [-132.3 32.1 32.23 -320.32]};
Measurement2 = {433.2; 3.2};
TextStuff = {'The cat who ate the rat'; 'The dog who ate the cat'};
s = cell2struct([Measurement1, Measurement2, TextStuff], ...
    {'Measurement1', 'Measurement2', 'TextStuff'}, 2); 

str_format = @(tag, value)sprintf('%s:%s', tag, value);

%# Iterate over the data and print it on the same figure
figure
for i = 1:length(s)

    %# Clear the figure
    clf, set(gcf, 'color', 'white'), axis off

    %# Output the data
    text(0, 1, str_format('Measurement1', num2str(s(i).Measurement1)));
    text(0, 0.9, str_format('Measurement2', num2str(s(i).Measurement2)));
    text(0, 0.8, str_format('TextStuff', s(i).TextStuff))

    %# Wait until the uses press a key
    pause
end 
```

请注意，这会[`pause`](http://www.mathworks.com/help/techdoc/ref/pause.html)强制您在执行下一次迭代之前按下一个键。我把它放在那里，这样你就有机会在每次迭代中看到这个数字。

PS
基于[this answer](https://stackoverflow.com/a/12250222/1336150)（对您的另一个问题），您还可以输出LaTex方程。

* * *

**编辑**- 更多解释：

[`cell2struct`](http://www.mathworks.com/help/techdoc/ref/cell2struct.html)是将元胞数组转换为结构体数组的函数。在您的情况下，您有和`Measurement1`，每个都是一个单元格数组，其中包含有关不同字段的数据。 所有元胞数组都统一为一个*元胞数组数组*：。从每个单元格数组中获取每一行并形成一个结构，结果存储为*一个 structs 数组*，如下所示：`Measurement2``TextStuff`
*`[Measurement1, Measurement2, TextStuff]``cell2struct`*

 **```
s = 

2x1 struct array with fields:
    Measurement1
    Measurement2
    TextStuff 
```

您可以使用 提取第一组值`s(1)`，使用 提取第二组值，`s(2)`依此类推。比如`s(1).TextStuff`给你`'The cat who ate the rat'`。

我建议您`s`在 MATLAB 命令提示符中键入以查看其内容。

辅助函数是我创建`str_format`的一个[匿名函数，用于格式化每个字段的输出字符串。](http://www.mathworks.com/help/techdoc/matlab_prog/f4-70115.html)它的输入参数是`tag`（字段名称字符串）和`value`（字段值字符串），使用[`sprintf`](http://www.mathworks.com/help/techdoc/ref/sprintf.html)命令将它们连接在一起，类似于[`sprintf`](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)C/C++中的函数。**

# java - New in Java getting NullPointerException

> ID：12249580
> 
> 赞同：1
> 
> 时间：2012-09-03T14:15:50.610
> 
> 标签：java, nullpointerexception

I have declared:

```
Discursiva[] questoesDiscursivas = new Discursiva[10]; 
```

Which is:

```
public class Discursiva extends Questao{
    private String criteriosCorrecao;
} 
```

And Questao is:

```
public class Questao {
    private String pergunta;
    private double peso;
} 
```

So I just did:

```
str = JOptionPane.showInputDialog("Pergunta da Questao:");
questoesObjetivas[i].setPergunta(str); 
```

And got java.lang.NullPointerException.

> I have read in oracle docs: Thrown when an application attempts to use null in a case where an object is required. These include:
> 
> ```
> Calling the instance method of a null object. 
> Accessing or modifying the field of a null object. 
> Taking the length of null as if it were an array. 
> Accessing or modifying the slots of null as if it were an array. 
> Throwing null as if it were a Throwable value. 
> ```

And I dont get why I am receiving `NullPointerException`. Please dont bottomrate my question, Iam still learning Java, its like my first code in it and I would like your help, so please, how can I fix this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:17:39.833

您的数组中充满了`null`s。

您需要`new Discursiva()`在数组的每个插槽中放置一个，然后才能使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:17:35.633

在执行此操作之前，`questoesObjetivas[i]`请先执行此操作

```
 questoesObjetivas[i] = new Discursiva(); 
```

你会在[这里找到一篇好文章。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

如果声明对象数组，则数组仅包含对对象的引用。对象数组中的每个值都初始化为空。所以当你尝试访问它时，你会得到`NullPointerException`

因为数组`covariant` `[if Sub is a subtype of Super, then the array type Sub[] is a subtype of Super[] **Effective Java**]`本质上应该更喜欢`ArrayList`

```
ArrayList<Discursiva> questoesDiscursivas = new ArrayList<Discursiva>(10);
questoesDiscursivas.add(new Discursiva()); 
```

**您可以在有效的 Java**中阅读更多内容 **`Item 25: Prefer lists to arrays`**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T14:17:38.833

您需要在数组中创建对象：

```
Discursiva[] questoesDiscursivas = new Discursiva[10];

for (int i=0;i<10;i++){
    questoesDiscursivas = new Discursiva();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T14:20:30.533

您已声明 questoesObjetivas[i]，但未对其进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T14:18:24.180

Upon creation, all of the elements of object arrays are initialized to `null`, so `questoesObjetivas[i].setPergunta(str)` will give a `NullPointerException` since the `i`th element of that array is indeed `null`. Try filling the array with instances of the `Discursiva` class.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T14:18:45.413

猜测问题出在您给出的两行中：

`questoesObjetivas[i]`为空或`questoesObjetivas`为空

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T14:19:18.017

你需要实例化一个对象，这样你就可以把它放在你的数组中：

```
 questoesObjetivas[i] = new setPergunta(str); 
```**

# android - 如何从使用 ViewPager 的 FragmentActivity 重新启动 ListFragment 中的 Loader？

> ID：12249582
> 
> 赞同：0
> 
> 时间：2012-09-03T14:15:59.317
> 
> 标签：android, android-viewpager, android-loadermanager, android-loader

我有一个`ViewPager` `FragmentActivity`包含 3 个选项卡的选项卡，每个选项卡`ListFragment`都有一个加载器。在这个活动的初始化中，所有的加载器都加载了，到目前为止一切都很好。

`refresh()`我在片段中实现了一个公共方法来重新启动加载器：`getLoaderManager().restartLoader(0, null, this);`

当我从它抛出的父活动中调用它时`illegalStateException Fragment not attached to Activity`。任何想法如何重新启动加载程序？

编辑：

我的活动扩展`SherlockFragmentActicity`，其中我有一个适配器，可以扩展`FragmentPagerAdapter`以管理寻呼机中的选项卡。

```
public class UserPageFragmentActivity extends SherlockFragmentActivity{
   ...

    mTabsAdapter.addTab(mTabHost.newTabSpec(TAB_CHANNELS).setIndicator("Following"),
            UserPageListFragmentChannels.class, null);
   ...

     public void refresh(){

           switch (mTabHost.getCurrentTab()){
                     case CHANNELS:
                              ((UserPageListFragmentChannels)mTabsAdapter.getItem(CHANNELS)).refresh();
                              break;
        ...
           }

     }

} 
```

现在标签片段是：

```
public class UserPageListFragmentChannels extends SherlockListFragment implements
LoaderManager.LoaderCallbacks<Void> {

...
    public void refresh(){
        getLoaderManager().restartLoader(0, null, this);        
    }
...

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:53:09.553

因此，在深入挖掘之后，我从“barkside”中找到了解决方案：[Update data in ListFragment as part of ViewPager](https://stackoverflow.com/questions/7379165/update-data-in-listfragment-as-part-of-viewpager)

我在我的活动的刷新（）中实现它相同：

```
UserPageListFragmentChannels fragment =  
              (UserPageListFragmentChannels) getSupportFragmentManager().findFragmentByTag("android:switcher:"+R.id.pager+":0"); 
          if(fragment != null)  // could be null if not instantiated yet 
          { 
             if(fragment.getView() != null)  
             { 
                // no need to call if fragment's onDestroyView()  
                //has since been called. 
                fragment.refresh(); // do what updates are required 
             } 
          } 
```

# iphone - Cydia deb 包不会在主屏幕上创建快捷方式

> ID：12249583
> 
> 赞同：0
> 
> 时间：2012-09-03T14:16:01.723
> 
> 标签：iphone, ios, cydia

我有一个非常简单的项目，我使用`iosopendev.com`and创建`xcode`。该程序在`/Applications`文件夹中正确安装，但不会在主屏幕上创建快捷方式。

是的，我们谈论的是越狱的 iOS 5 iPhone。

我创建了一个`Info.plist`和图标并将它们打包，但即使应用程序安装在`/Apllications`文件夹中，iPhone 的主屏幕上也没有出现快捷方式。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:29:12.110

从Cydia`UIKitTools`获取。在设备上运行`uicache`。

如果这不起作用，请重新启动。

如果这不起作用，请重新启动。

如果这也不起作用，那么你搞砸了 - 可能 Info.plist 文件已损坏，或者可执行文件名与 Info.plist 中指定的文件名不匹配，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:27:27.717

您显示的[Info.plist 文件](http://i.imgur.com/WIN3C.png)中没有`CFBundleName`, 或 a `CFBundleDisplayName`。我猜 SpringBoard 需要看到那些（尤其是`CFBundleDisplayName`）才能在“主”屏幕上显示您的应用程序。

此外，您的`LSRequiresIPhoneOS`值`String`等于`1`。我本来期望`Boolean`等于`YES`。不确定这些差异是否是致命的，但由于您没有看到该图标，我会尝试修复它们，看看是否能解决您的问题。

您可以尝试查看[此 Apple 参考文档](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html%23//apple_ref/doc/uid/TP40009254-SW5)，了解您的 Info.plist 文件应具有哪些键和值。

# jquery - 在struts 2中导出为PDF：调用不同的动作类不会绑定表单值

> ID：12249591
> 
> 赞同：0
> 
> 时间：2012-09-03T14:16:35.740
> 
> 标签：jquery, jquery-ui, struts2, struts, struts-config

在我的应用程序中，我选择用户名（使用复选框）并单击“导出数据”按钮，这将打开一个弹出窗口（询问是否导出到`PDF`或`CSV`）。我曾经`jQueryUI`得到`modal-dialog`

**该复选框采用不同的形式，并且“导出数据”不在该形式中，因此当我使用 document.location.href 击中一个动作类时，我无法获取复选框值**

这就是在 JSP 中形成复选框的方式

```
<s:form action="dashboard" theme="simple">

<s:checkbox name="selectedStudents[%{#status.index}].studentId" id="student%{#status.index}" fieldValue="%{studentId}" value="0"/>

</s:form> 
```

单击“导出数据”按钮，我从 jquery 调用方法（用 struts-2 操作编写）。请看下面的jquery代码

```
$(function() {
        $("#exportStudentReports").click(function(){
            $( "#exportModalWindow" ).dialog({
                resizable: false,
                height: 50,
                width: 200,
                modal: true,
                hide: "explode",
                buttons:{
                    "Export": function() {
                        var link = "/web/teacher/exportReport!exportStudentReports.action?exportType=pdf" ;
                        document.location.href=link;
                        $("#exportModalWindow").dialog("close");
                    }
                }
            });
            var isOpened = $("#exportModalWindow").dialog("isOpen") ;
            if (!isOpened) {
                $("#exportModalWindow").dialog("open");
            }
            $("#exportStuReportPDF").attr("checked","checked") ;
        });

    }); 
```

这就是我的 struts-action-configuration 的方式

```
<action name="exportReport" class="com.hmco.ssms.action.teacher.ExportReportAction">
            <result name="studentReportPDF" type="stream">
                <param name="inputName">inputStream</param>
                <param name="contentType">application/pdf</param>
                <param name="contentDisposition">attachment;filename="sample.pdf"</param>
                <param name="bufferSize">1024</param>
            </result>
        </action> 
```

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:47:58.540

看起来很简单：

JSP：

```
<s:form id="exportForm" action="exportStudentReports.action" theme="simple">
    <s:checkbox name="studentId" value="%{}"/>
</s:form>

<a onclick="openDialog()"/> 
```

jQuery：

```
function openDialog(){
  $('#dialogWindow').dialog(){
    buttons: {
      "Export" : function(){
        $('#exportForm').submit();
      }
    }
  }
} 
```

# javascript - 使用 val() 在 jquery 循环中设置 html 字符串的 val

> ID：12249592
> 
> 赞同：1
> 
> 时间：2012-09-03T14:16:38.650
> 
> 标签：javascript, jquery

如何获取循环中的这个字符串 v 并使用 jquery 将值添加到输入 ID“MyInput”

这是我的代码的简化版本

```
var d='';

    $.each(row,function(i,v){

        //v = <div><p>gxsfsd</p><p>gxsfsd</p><input  type="hidden" id="Myinput" /><p>gxsfsd</p><p>gxsfsd</p><p>gxsfsd</p></div>"

    $(v).find("#MyInput").val("text set 1");

    d+= v;

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:22:09.340

你可以试试这个

```
var d='';

$.each(row,function(i,v){
   d += v;
   $('#MyInput').val(d);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:19:32.453

当您知道控件的 id 时，您可以直接访问元素而无需查找，只要 id 是唯一的。

试试这个，

```
var d='';

$.each(row,function(i,v){
   d+= v;
   $("#MyInput").val(d);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:24:31.787

如果您在页面中多次使用相同的 id，您将无法访问这些元素。

如果您使用属性选择器而不是 id 选择器，它仍然是可能的：

```
var d='';

$.each(row,function(i,v){

  //v = <div><p>gxsfsd</p><p>gxsfsd</p><input  type="hidden" id="Myinput" /><p>gxsfsd</p><p>gxsfsd</p><p>gxsfsd</p></div>"

  $(v).find("[id=MyInput]").val("text set 1");

  d+= v;

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T14:47:25.920

正如已经指出的那样，多次使用类而不是相同的 ID，或者如果您有上下文，甚至将它们都保留......我会做这样的[事情](http://jsfiddle.net/CrFzy/)：

```
var d = [], // collect in an array for better handling
    row = $('.row');

$.each(row, function(i,v){
    var input = $('input', $(v));
    input.val("text set "+i);
    d.push(v);
});

console.log(d); 
```

请注意，我的带有 .row div 的 HTML 仅作为示例，一旦我知道您的“行”是什么类型的对象，我可能会调整此解决方案。

# gwt - 与 IE 相比，FireFox 中的 Gwt 应用程序字体不兼容问题

> ID：12249595
> 
> 赞同：1
> 
> 时间：2012-09-03T14:16:43.853
> 
> 标签：gwt, gxt

我正在使用 Gwt 2.2.0 和 Gxt 2.2.3，当我在 Fire-Fox 中运行应用程序时，字体样式与 IE7 相比有点不同。如果我没记错的话，我也在[Gxt Gwt 演示](http://www.sencha.com/examples-2/#advancedcombobox)站点中看到了相同的不兼容问题。是 Gxt 问题还是我们有可能克服这个问题。请在下面找到屏幕截图。在这里我们可以很容易地观察到字体的差异。显示在“标题”面板顶部的标签在不同的浏览器中呈现不同。我已将以下样式应用于此标签：

```
font-family: Verdana, Sans-serif;
font-size: .8em;
color: #000000;
font-weight: bold; 
```

当我调试并检查 IE 和 FF 中的样式时，两者都是相同的。但是它们的渲染方式不同。

***在 IE 中：***

![在此处输入图像描述](../Images/80feb6c55e617c334789f8fc2707021f.png)

***在火狐中：***

![在此处输入图像描述](../Images/531d061d1a6b88bcd7c44930faa320f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:58:25.133

> 如果我没记错的话，我也在 Gxt Gwt 演示站点中看到了相同的不兼容问题。

我没有 IE7，但在 IE7 兼容模式下设置的 FF 和 IE8 之间没有区别。

关于您的问题，通常这可以通过`<body>`为浏览器中的父元素（或 parent-parent-... 元素）设置的不同默认字体大小和样式来解释。

简单来说，.8em - 等于“默认字体大小”乘以 0.8。

尝试为`<body>`、 或`<table>`或您用作基本容器的任何内容显式重置默认字体大小和样式。

快速谷歌搜索给出了解释： [http ://www.guistuff.com/css/css_units.html](http://www.guistuff.com/css/css_units.html)

> Ems 是一个相对测量单位。一个 'Em'(1em) 等于默认字体大小中大写字母“M”的高度。在 CSS 中应用时，Em 代表用户的默认字体大小，或者父元素的字体大小（如果可用）。使用 Ems 调整字体大小时，字体将根据浏览器的默认字体大小设置调整大小。

# ios - 当状态为“等待审核”时，我可以测试应用内购买吗？

> ID：12249602
> 
> 赞同：2
> 
> 时间：2012-09-03T14:17:24.883
> 
> 标签：ios, in-app-purchase, app-store-connect, storekit

我创建了几个“应用内购买”并提交了它们，认为它同样适用于测试。但是，它们不会出现在应用程序 (SKProductsResponse) 中。一旦产品被标记为“Waiting for Review”，您能否与适当的测试用户一起测试产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:21:56.527

据我所知，您应该能够轻松地测试您的应用内购买，甚至无需提交您的二进制文件，我已经为我工作的公司的项目多次这样做了。提交二进制文件不应该是必需的。

收到空产品响应时，我遇到的最常见问题是项目未使用正确的包标识符，因此请确保在 xCode 中正确设置它。您还应该使用正确的配置文件进行签名。

据我所知，如果您将应用程序发送给测试用户（如果这是您所处的情况），这也很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:53:16.650

感谢您的帮助，但我最终从“MyProjectName.xcodeproj”中删除了文件夹“xcuserdata”和文件“project.xcworkspace”。还从“DerivedData”中删除文件并重置模拟器。只有这对我有用。

# c - C - 在内存中创建文件

> ID：12249610
> 
> 赞同：23
> 
> 时间：2012-09-03T14:17:55.400
> 
> 标签：c, windows

我在这里用纯 C 语言编写小程序。我需要的是直接在内存中创建一个文件（不写在硬盘上）目前我可以`fopen("filename.txt,"wb")`用来写入文件。

我知道在 linux 中你可以使用`fmemopen()`. win32有类似的解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-04-29T13:59:12.917

[`fdopen`](https://linux.die.net/man/3/fdopen)在 POSIX.1-1990 中，Windows 以[`_fdopen`](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/fdopen-wfdopen). 将它与[`_get_osfhandle`](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/get-osfhandle)and一起使用，它允许从 Windows 文件[`_open_osfhandle`](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/open-osfhandle)构建一个与 C 标准库的其余部分一起使用的正确文件。另请参阅问题[是否有与 fdopen 等效的 Windows 用于 HANDLE？](https://stackoverflow.com/questions/7369445/is-there-a-windows-equivalent-to-fdopen-for-handles)有关这方面的更多信息。`FILE *``HANDLE`

现在，问题的其余部分是创建一个*内存支持的 Windows 文件*。事实证明，在 NT 下有不同的方法来近似这个。最常见的似乎是：

1.  创建临时文件；即非持久性。换句话说，使用从和可能[`CreateFile`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx)构建的路径。[`GetTempPath`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364992(v=vs.85).aspx)[`GetTempFileName`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364991(v=vs.85).aspx)

2.  ...具有[`FILE_ATTRIBUTE_TEMPORARY`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx#FILE_ATTRIBUTE_TEMPORARY)文件属性集 [1]；即尽可能多地支持内存。

3.  ...并[`FILE_FLAG_DELETE_ON_CLOSE`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx#FILE_FLAG_DELETE_ON_CLOSE)设置了标志 [2]；即暗示它永远不需要被写入，除非它不适合内存。

只要有足够的内存将文件保存在内存中（即内存压力足够低），磁盘就不会被使用。[请参阅Larry Osterman](https://blogs.msdn.microsoft.com/larryosterman/2004/04/19/its-only-temporary/)的这篇MSDN 博客文章，其中描述了这种方法。有趣的是，他称这些文件为*“临时”临时文件*。

请注意，这并不*完全*等同于[`fmemopen`](http://man7.org/linux/man-pages/man3/fmemopen.3.html)，如果文件不适合预定义的内存区域 [3]（即`fmemopen`设置一个纯内存支持的文件），它将失败。但是，对于许多用途来说，它已经足够接近（有时可能需要磁盘上的潜在支持）。

此外，有关这些文件属性和其他可能方法的一些讨论，请参阅[如何防止在 Windows 临时删除关闭文件上打开的内存映射刷新到磁盘讨论。](https://stackoverflow.com/questions/32635860/how-to-prevent-flushing-to-disk-of-a-memory-map-opened-on-a-windows-temporary-de)

最后，对于结合了这两个部分的完整示例（即创建内存支持的文件，然后将其包装在`FILE *`句柄中），请查看[fmem 库](https://github.com/Snaipe/fmem/blob/master/src/fmem-winapi-tmpfile.c)中的实现（它是为提供跨平台解决方案而编写的这个问题）或来自[libconfuse 库](https://github.com/martinh/libconfuse/blob/master/src/fmemopen.c)的问题。

* * *

[1]

> `FILE_ATTRIBUTE_TEMPORARY`如果有足够的高速缓存可用，指定该属性会导致文件系统避免将数据写回大容量存储器，因为应用程序会在句柄关闭后删除临时文件。在这种情况下，系统可以完全避免写入数据。尽管它不像前面提到的标志那样直接控制数据缓存，但该`FILE_ATTRIBUTE_TEMPORARY`属性确实告诉系统在不写入的情况下尽可能多地保存在系统缓存中，因此可能会引起某些应用程序的关注。

[2]

> 该文件将在其所有句柄关闭后立即删除，其中包括指定的句柄和任何其他打开或重复的句柄。

[3]

> 尝试将超过 size 字节写入缓冲区会导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:01:05.223

Windows 本身并不支持此类功能。但是，您可以重写高级 stdio 函数来访问内存缓冲区而不是文件，或者只实现类似 stdio 的函数。或者您可以实现一个[RAM 磁盘](http://code.msdn.microsoft.com/windowshardware/RAMDisk-Storage-Driver-9ce5f699)，但是安装 RAM 磁盘驱动程序本身可能不符合您的“不写入磁盘”规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:32:38.747

您可以使用 MapViewOfFile 实现一些接近的目标。您应该为此使用的 Win32 API 是：

> [创建文件（...）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)
> 
> [创建文件映射（...）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx)
> 
> [MapViewOfFile(...)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366761%28v=vs.85%29.aspx)

完成后不要忘记取消映射并关闭文件映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:22:33.753

我不会使用 fopen 因为这会创建一个文件。

要在内存中创建文件，您需要创建文件并以您认为合适的方式存储它。

您将需要创建一些数据类型的数组。我会使用 char* 但你可以使用任何你想对信息进行编码的东西。然后，您可以通过向数组添加信息来读取和写入文件。

# excel - 通过 VBA 更改 excel 选项

> ID：12249613
> 
> 赞同：0
> 
> 时间：2012-09-03T14:18:09.520
> 
> 标签：excel, vba

由于有些人误解了我的意思：这与储蓄无关。问题是另一个问题；）

我正在使用 excel 2007 并遇到问题。在我的宏中，我必须确保正确设置了一个选项。选项如下：office Symbol -> excel-options -> save 然后第一个下拉菜单/组合框定期设置为“.xls”，但必须为“.xlsx” 是否有任何VBA命令可以解决这个问题? 一种解决方法可能是我编写一个批处理文件来更改注册表，但我不想使用外部代码。

编辑：@hydev 好的，问题是。我正在从另一个 excel 文件中复制几张纸并进行大量操作。原始 excel 文件的格式是 .xlsm，如果我打开一个新工作簿，它会以 .xls 的形式打开（由于此配置），但不允许将工作表从 .xlsm 或 .xlsx 复制到 .xls，因为可能的列范围.xls 行要小得多。

而且我不能告诉 excel 我希望它是 .xlsx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:43:31.783

哇，我使用了宏记录器，它工作正常。认为它仅适用于非全局的 excel 设置。我自己的问题的解决方案是。

```
Application.DefaultSaveFormat = xlOpenXMLWorkbook 
```

将保存格式设置为 .xlsx

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:33:37.963

有一个[另存为](http://blogs.office.com/b/microsoft-excel/archive/2009/07/07/use-the-vba-saveas-method-in-excel-2007.aspx)功能，您可以使用它来选择他们将文件保存为的类型（看起来 51 是您想要的）

然后，您只需要覆盖 Save 调用即可使用所需的文件格式调用 SaveAs 函数。

编辑：

这是一个[覆盖保存事件](http://forums.autodesk.com/t5/Autodesk-Inventor-Customization/Run-VBA-macro-when-quot-Save-quot-is-pressed-on-quot-IPT-quot/td-p/2895818)的示例（第二个回复）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:28:18.047

可以问上下文吗？原因是您可以在 VBA 中将 SaveAs 设置为等于 xlsx。因此，您可以创建一个按钮，使用户能够根据您的要求进行保存。

麦克风

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T17:07:59.307

您后来的编辑表明起始格式不是 xls，而是 xlsm，这意味着它启用了宏。

Excel 2007 及更高版本将强制带有宏的文件具有 xlsm 扩展名。你可能不会绕过它的坚持。

如果您确实需要将其保存为 xls 扩展名，则必须在保存过程中删除宏。

# java - Getting the correct macaddress in Java 7

> ID：12249617
> 
> 赞同：1
> 
> 时间：2012-09-03T14:18:23.697
> 
> 标签：java, networking, mac-address

Tried to use the getHardwareAddress() method to get the mac address of my network card, however according to NetworkInterface.getNetworkInterfaces() I have over 20 network interfaces. Ive narrowed it down to one by checking other attributes, but is this going to work in all (or at least most cirumstances) and operating systems, only tried on a WIndows 7 PC.

And if a computer has two network cards, can I find out which one is actually being used for a current internet connection ?

```
Enumeration<NetworkInterface> e = NetworkInterface.getNetworkInterfaces();
while(e.hasMoreElements())
{
   NetworkInterface ni = e.nextElement();
   if(ni!=null && ni.getHardwareAddress()!=null &&ni.getInetAddresses().hasMoreElements() && ni.supportsMulticast())
   {
      String macAddress   = Hex.encodeHexString(ni.getHardwareAddress());
      System.out.println("MACADDRESSIS"+macAddress);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:24:46.163

如果您有 InetAddress，则可以使用[`NetworkInterface.getByInetAddress()`](http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html#getByInetAddress%28java.net.InetAddress%29).

# android - 以编程方式调用android中的帐户和同步设置

> ID：12249620
> 
> 赞同：0
> 
> 时间：2012-09-03T14:18:27.897
> 
> 标签：android, google-cloud-messaging

我已经制作了一个应用程序，它使用 GCM 推送消息框架从服务器获取推送消息。但问题是如果 Google 帐户未在设备中同步，应用程序将无法在 GCM 服务器上注册。所以我想要通知用户首先要同步一个帐户才能继续。

我可以使用以下代码获取帐户是否已同步：

```
AccountManager am = AccountManager.get(this);
Account[] accounts = am.getAccountsByType("com.google");        
boolean syncEnabled = ContentResolver.getSyncAutomatically(accounts[0], ContactsContract.AUTHORITY);

            Log.d("ACCOUNT SYNC", "syncStatusofaccount"+syncEnabled);

            if(!syncEnabled){
                setContentView(R.layout.login);
                AlertDialog alertForAccounrtSync=new AlertDialog.Builder(this).create();
                alertForAccounrtSync.setTitle("Account Sync");
                alertForAccounrtSync.setMessage("Sync your Gmail Account before proceed");
                alertForAccounrtSync.setCancelable(false);
 alertForAccounrtSync.setButton("Sync Account", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

    }

});
                alertForAccounrtSync.show(); 
```

现在按下按钮我只想直接调用帐户和同步设置，这样对用户来说将是一个很好的体验。

但问题是如何？我应该在 Onclick() 函数中写什么请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:22:56.230

我自己得到了分析器

```
Intent intent=new  Intent(Settings.ACTION_SYNC_SETTINGS);
startActivity(intent); 
```

谢谢你，它可能对其他人有用。

# ruby-on-rails-3.2 - 具有自定义默认路由的骨干路由器

> ID：12249624
> 
> 赞同：0
> 
> 时间：2012-09-03T14:18:42.610
> 
> 标签：ruby-on-rails-3.2, backbone-routing

我想在视图上启动一个主干应用程序，该应用程序已经由 Rails 呈现。

这是我的路由器代码

```
class App.Routers.Dashboard extends Backbone.Router
 routes:
  '': 'index'
  'locations/:id': 'showLocation'

  index: ->
     alert "Dashboard page"

  initialize: ->
    @route(/\/?/, 'index', @index); 
```

然后在渲染视图中，我启动应用程序

```
$ ->
 App.appRouter = new App.Routers.Dashboard()
 Backbone.history.start
  pushState: true
  root: "/dashboard" 
```

但是，如果我打开页面

```
http://localhost:3000/dashboard 
```

路由器不进入“索引”状态。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:43:12.110

`''`只有当 URL 位于根目录时，才会匹配默认路由。

在您的示例中，“索引状态”只会使用`http://localhost:3000/`.

完成此操作的推荐方法是使用“splat”路线`'*path': 'index'`。因为这条路线实际上说要匹配任何东西，所以您需要确保它是最后定义的路线。

# sql - Oracle CLOB 通过 DBLINK 到 varchar2

> ID：12249627
> 
> 赞同：0
> 
> 时间：2012-09-03T14:18:47.733
> 
> 标签：sql, oracle, clob, dblink, varchar2

我必须将一个数据库迁移到另一个。我有一个 dblink 让它更容易。知道我尝试从表格中复制列注释和描述。问题是类型是 CLOB。在新数据库中，我使用 VARCHAR2。我使用了一种解决方法并创建了一个全局临时表。

```
create global temporary table Comments
 (id number,description clob, comment clob) ON COMMIT PRESERVE ROWS; -

  insert into  Comments Select id,description,comment from database.test@DBLINK; 
```

现在我**在表中有 52K 行**。

现在我想在新数据库中创建新表测试。

```
CREATE TABLE "TEST"
(
"ID"             NUMBER(9,0) NOT NULL ENABLE,
"NAME"             VARCHAR2(255) ,
"DESCRIPTION"             VARCHAR2(4000) ,
"COMMENT"             VARCHAR2(4000) ,
CONSTRAINT "TEST_PK" PRIMARY KEY ("ID")
); 
```

现在我尝试插入这些值：

```
insert into TEST(ID, NAME,DESCRIPTION, COMMENT)
 select Test_seq.nextval,Name,
  (select dbms_lob.substr(DESCRIPTION, 4000, 1) from  Comments b where b.id =a.id),
(select dbms_lob.substr(COMMENT, 4000, 1) from  Comments b where b.id =a.id),
from database.test@DBLINK a; 
```

问题是插入值需要很长时间。我开始了它，但在 30 分钟后它没有完成。

有没有一种快速的方法可以在 varchar2 中转换 clob 并将它们插入到其他 Oracle 数据库中的表中？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:26:14.050

复制临时表上的所有列，然后您不应该查询主表：

```
CREATE GLOBAL TEMPORARY TABLE comments ON COMMIT PRESERVE ROWS 
    AS SELECT * FROM test@db;

SELECT INTO TEST(ID, NAME,DESCRIPTION, COMMENT)
SELECT ID, NAME, 
       dbms_lob.substr(description, 4000, 1), 
       dbms_lob.substr(description, 4000, 1)
  FROM comments; 
```

您的查询可能需要很多时间，因为您正在对没有索引的表进行内联连接（每行都需要一次 FULL SCAN ！）。

# c# - 应用程序无法正常工作后 标签被插入到 WPF 配置文件中

> ID：12249628
> 
> 赞同：0
> 
> 时间：2012-09-03T14:18:48.317
> 
> 标签：c#, wpf, application-settings

全部，

我有一个程序可以读取串行端口数据并执行一些操作。

这是执行此操作的一小段代码。

```
private void SerialDataReceivedEventHandler(object sender, SerialDataReceivedEventArgs e)
{
    try
    {

        SerialPort sp = (SerialPort)sender;
        Thread.Sleep(100);
        sCommdata = sp.ReadExisting();
        string[] splitter = new string[2];
        splitter = sCommdata.Split('\r');
        string switchMaker = splitter[0].Trim();
        switchMaker = switchMaker.Substring(0, 3);

        Dispatcher.Invoke(new UpdateKiosk(Reintialise), DispatcherPriority.Send, sCommdata);

    }
    catch (Exception ex)
    {
        //log data goes here
    }
} 
```

应用程序将在每次使用时自动重置，除非有人双击公司徽标并提供应用程序密码。输入正确的密码后，应用程序将完全退出。现在，我在 WPF app.config 中包含了以下代码，用于存储应用程序密码。这是 XML 代码。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
     <add key ="ApplicationPassword" value ="xxxxxxx"/> 
  </appSettings>
</Configuration> 
```

一旦我添加了上面的代码，下面的代码就会被执行，但是需要通知的方法（重新初始化）没有收到任何通知。

```
 Dispatcher.Invoke (new UpdateKiosk(Reintialise),DispatcherPriority.Send, sCommdata); 
```

Reinitialise 方法通过调用 Web 服务方法对应用程序进行所有初始设置。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:27:27.260

我建议您使用此代码和配置

```
<applicationSettings>
    <WpfApplication1.Properties.Settings>
        <setting name="ApplicationPassword" serializeAs="String">
            <value>xxxxxxx</value>
        </setting>
    </WpfApplication1.Properties.Settings>
</applicationSettings> 
```

并获得价值

```
var result  = WpfApplication1.Properties.Settings.Default.ApplicationPassword.ToString() 
```

# c - C数组数组

> ID：12249631
> 
> 赞同：4
> 
> 时间：2012-09-03T14:19:08.617
> 
> 标签：c, arrays

只是想了解我需要的健身功能的数组结构。它是一个数组数组：

```
double fitness[][2][9][11] 
```

根据我的理解，[2][9][11] 数组将是 2 x 9 x 11 3 暗淡数组。没关系，但是 [] 让我失望了。这对数组结构有何贡献？有人可以给我一个示例输入（或者也许像我发布的数组那样尺寸小得多，我们会很大）。

非常感谢。

编辑：这是在一个函数内

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:35:23.760

本质上，不必知道数组中有多少行。首先声明维度的原因是为了使计算机能够访问它使用以下二维数组中索引所指的内存位置（不确定您是否可以查找 4-D 数组）

地址 = Base + ((depthindex*col_size+colindex) * row_size + rowindex) * Element_Size

所以这是一个小例子说我们有以下

```
int myArray[2][2];
/* put some values in the array */
myFunc(myArray); 
```

然后我们去像这样的函数中访问它

```
void myFunc(int array[][2])
{
     printf("%d\n", &array[1][1]);
} 
```

本质上，对应于 myArray[1][1] 的 array[1][1] 的地址是使用上面的公式计算的，我们将读取 4 字节的地址解释为整数并将其打印到屏幕上。该函数不关心数组中有多少行的原因是C不做任何边界检查它只需要知道如何计算你使用公式给它的任何索引的内存地址，如果你看一下公式不需要行数（行大小基于列数），因此 C 非常乐意让您在方法声明中省略行数，因为它可以在没有该信息的情况下计算内存地址

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:47:55.270

如果减少维度的数量，它会变得更清晰一些。让我们大胆一点，删除除一个维度之外的所有维度，然后声明

```
 extern double foo[]; 
```

这样做是声明一个**不完整的类型**，一个未知数量的双精度数组。如果您给出明确数量的元素，则该类型将是完整的。不同之处在于您不能将 应用于`sizeof`不完整的类型：编译器无法知道它们的大小，因为它们是不完整的。

现在，如果我们声明一个数组数组，我们不能让两个维度都是未知的（如 in `double foo[][]`）。这是为什么？以前，编译器可以计算 的位置，`foo[42]`因为它知道 double 的大小（因为 double 是完整的类型）。要计算`foo[1][42]`它必须知道元素类型的大小。换句话说，元素类型必须是完整的。在 C 中，最右边的维度变化最快，所以这里的元素类型由除了最左边的维度之外的所有维度给出：`double [42]`在你原来的问题中它是`double [2][9][11]`.

最后，如果您不需要完整数组的大小，可以将最左边的维度留空。

# autofac - Autofac 垃圾收集 - BeginLifetimeScope

> ID：12249637
> 
> 赞同：5
> 
> 时间：2012-09-03T14:19:26.627
> 
> 标签：autofac

我创建了一个 Windows 服务来构建和发送电子邮件。我已经实现了依赖注入，并且我使用 Autofac 作为 DI 容器。

我的问题是，随着服务运行，分配的内存不断增长，目前已超过 1GB。[我阅读了这篇关于生命周期](http://nblumhardt.com/2011/01/an-autofac-lifetime-primer/)的文章， 并从中合并了 BeginLifetimeScope，而不是直接从容器中解析。但这并没有解决问题。任何建议表示赞赏。

下面是我的服务 onStart 方法中的 Autofac 配置。

```
ContainerBuilder builder = new ContainerBuilder();

//Register the Database context
builder.RegisterType<DbContainer>().As<IDbContainer>();

//Register a single shared instance of Email Manager which will be shared by all EmailProcessing instances
builder.Register(c => new EmailManager()).As<IEmailManager>()).SingleInstance();

//Register email processing classes
builder.Register(c => new EmailBuilder(c.Resolve<IDbContainer>(), c.Resolve<IEmailManager>())).As<IEmailBuilder>();

_container = builder.Build(); 
```

以下是每 5 秒运行一次的电子邮件计时器方法。

```
private void EmailTimerElapsed(object sender, System.Timers.ElapsedEventArgs e)
{
     using (var lifetime = _container.BeginLifetimeScope())
     {
          //Builder, and any of its disposable dependencies, will
          //be disposed of when the using block completes
          IEmailBuilder builder = lifetime.Resolve<IEmailBuilder>();
          //Execute the process emails method
          builder.ProcessEmails();
     }

     emailTimer.Start();
} 
```

我希望在每个电子邮件计时器迭代中都使用相同的 EmailManager 实例，但要使用其他所有内容的新实例。

**编辑**

有没有办法检查 EmailBuilder 及其所有依赖项是否已被处理并准备好进行 GC？

我的很多对象都进入了第 2 代并被保留。当生命周期结束时，它们不应该被丢弃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:25:29.397

Autofac 设置看起来不错。您确定 DbContainer 正在释放所有资源吗？

# matlab - 在命令窗口或独立绘图中通过 LaTeX 的 MATLAB 和数学方程？

> ID：12249639
> 
> 赞同：2
> 
> 时间：2012-09-03T14:19:29.287
> 
> 标签：matlab, latex, plot

我想做的是在一个完整且单独的图中输出数学公式（通过 LaTeX），专门用于数学方程，或者能够在命令窗口本身中显示数学方程（再次通过 LaTeX）。

这在 MATLAB 中可行吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T14:58:52.643

我不确定命令提示符，但您可以使用[`text`](http://www.mathworks.com/help/techdoc/ref/text.html).
例如，这个：

```
figure
set(gcf, 'color', 'white'), axis off     %# Remove axes and set white background
my_text = '$$f_n={x \over \sqrt{2}}$$';
text('units', 'inch', 'position', [-0.5 3.5], 'fontsize', 14, 'color', 'k', ...
    'interpreter', 'latex', 'string', my_text); 
```

应该给你这个：

![在此处输入图像描述](../Images/10747d0b30fba6b315751907923d38f4.png)

我还建议你阅读[这篇文章](http://www.mathworks.com/help/techdoc/creating_plots/f0-4741.html#bq558_t)。这应该让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:57:26.210

第一个可以使用 text 命令：

```
figure;
text(.1,.9,'\itAe^\alpha^t')
set(gca,'visible','off'); 
```

这是关于以这种方式使用 TeX/LaTeX的更完整[的文档集。](http://www.mathworks.com/help/techdoc/creating_plots/f0-4741.html)

# animation - 将 Maya 3D 动画文件导入现有 Cocos2D 项目：需要时间和资源

> ID：12249641
> 
> 赞同：0
> 
> 时间：2012-09-03T14:19:35.260
> 
> 标签：animation, cocos2d-iphone, sprite, maya

我看过[这篇](http://fbgpc.thedamarmada.com/2011/06/maya-to-cocos2d/)关于在 Cocos2D 项目中导入 Maya 动画文件的帖子。我注意到一些游戏开发人员已经使用这种或类似的技术在他们的游戏中使用 Maya 文件，例如[Mortal Skies](http://iphone-games.be/mortalskies.html)。

我吓坏了，因为我的游戏需要大量动画，到目前为止，我把所有的钱都花在了让 2D 设计师来绘制它们上。

考虑到我想在接下来的 4 个月内交付我的产品，我想如果我想使用 Maya 文件，我应该聘请 Maya 动画师并更改我所有角色的代码。那是多么昂贵的时间？你们通常团队合作来实现这一目标吗？

另外（这是一个与 Maya 相关的问题），一旦我有 2D 图形（精灵帧），是否可以将它们作为纹理应用于 Maya 对象，或者是否应该专门为 3D 使用而制作？（我想纹理贴图完全不同，据我记得我之前做过的一个小型 3D 项目..）

非常感谢阅读。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:03:51.457

Maya 是一个 3D 设计工具。我对 Mortal Skies 了解不多，但我猜它使用与许多 2D 游戏相同的方法。这些模型采用 3D 设计，并在 Maya 中以 3D 动画显示。

然后 Maya 会导出一系列编号的 2D 位图图像（TGA、PNG、JPG）。然后将这些图像文件用于 2D 引擎，通常将它们放入纹理图集（即使用 TexturePacker）。

通常 Maya 导出不是自动的，而是使用 Maya 自己的脚本语言编写脚本，以某种方式设置模型进行渲染，例如在渲染每个 2D 帧之前更改相机旋转、照明等。这为您提供了动画，例如飞机的侧向旋转，作为您想要的图像格式的一系列渲染 2D 图像。从那时起，2D 动画工作照常进行，从此以后与 Maya 无关。

在 cocos2d 等 2D 引擎中直接使用 Maya 源文件没有意义，因为这些文件存储 3D 模型数据。

对于直接支持 cocos2d 的 2D 动画工具，您可能需要查看[Spriter](http://www.brashmonkey.com/spriter.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T20:42:04.583

OP问题的第2部分是

> 一旦我有 2D 图形（精灵帧），是否可以将它们作为纹理应用到 Maya 对象，还是应该专门为 3D 使用而制作？

答案是肯定的 - 您可以在 Maya 中将精灵位图应用为纹理（动画或静态）。如果您在 Maya 场景中创建具有正确纵横比的几何体，则可以在应用精灵纹理的情况下对其进行动画处理，并获得分层的 2.5 d 动画。

如果您已经拥有完整的精灵集 - 例如，分解成手臂和腿等部分的角色 - 您可以在 Maya 中分层附加它们并为它们设置动画（如 OP 帖子中链接的示例）。从那里您可以将它们渲染出来以创建新的位图精灵帧 - 例如，对步行周期进行补间 -**或者**您可以导出 Maya 对象上的动画并使用这些动画来驱动游戏中的 2d 动画。但是，您需要创建自己的导出器路径来获取 Maya 分层动画并将其导出为 cocos 可以理解的形式。这似乎是 OP 的链接正在做的事情，但我找不到应该说明它在 Cocos 端如何工作的后续帖子。

# microsoft-metro - WinJS.Binding.List 中的数据是持久的吗？

> ID：12249645
> 
> 赞同：1
> 
> 时间：2012-09-03T14:19:47.593
> 
> 标签：microsoft-metro

我是 Windows 8 Metro 风格应用程序开发的新手，我来自`PHP`基于 Web 应用程序开发的背景。

现在，在我的应用程序中，我使用获取数据`WinJS.xhr`并将其添加到`WinJS.Binding.List`列表中。问题是当我重新访问该页面时，从以前的 xhr 代码中获取的旧数据仍然存在，新数据附加到此列表中。

如何纠正这种情况？

## 编辑

Homedeliverydata.js 文件

```
 var list = new WinJS.Binding.List();
        var groupedItems = list.createGrouped(
            function groupKeySelector(item) { return item.group.key; },
            function groupDataSelector(item) { return item.group; }
        );

        function getFeaturedRestaurants(city_id) {
            Utilities.featuredRestaurants(city_id, 'home_delivery').
                then(function onComplete(result) {
                    var restaurants = result.result;

                    for (var i = 0; i < restaurants.length; i++) {
                        restaurants[i].group = Groups[0];
                        restaurants[i].key = restaurants[i].id;
                        list.push(restaurants[i]);
                    }
                },
                function onError() {
                }, function onProgress() {
                });
        }
  function clearData() {
        list.splice(0, list.length);
        list._currentKey = 0;
    } 
```

HomeDelivery.js

```
 ready: function (element, options) {
            //code above this line removed
           HomeDeliveryListdata.GetSearchData(params).then(afterCall, function (req) { }, function (req) { });

        },
 unload: function () {
            HomeDeliveryListdata.clearData();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:03:19.017

该列表将持续分配给它的变量的生命周期。此外，如果您为您的应用程序使用单页模型（默认的推荐方式），那么包含列表的变量可能会在页面之间存在。

如果您希望每次访问页面时都替换现有列表，请确保您适当地确定列表的生命周期（通常将列表范围限定为 xhr 请求的成功承诺就足够了）或编写代码来清除和刷新列表。

如果没有示例代码，很难指出确切的解决方法，但希望这能帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T17:19:23.227

如果您希望它在不同的 WinJS.Navigations 之间可用，那么您**不**应该清除数据；只需在应用程序中的某处保留变量，当您再次需要它时，只需将其重新用作数据源。

*但是*，它不会在您的应用程序执行之间持续存在（例如，如果它被终止）。[为此，您需要使用文件](http://msdn.microsoft.com/en-us/library/windows/apps/hh464978.aspx)或[数据库](http://msdn.microsoft.com/en-us/library/windows/apps/hh441274.aspx)将数据写入磁盘（mozilla 有一个[很好的指南](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB)，[这里](https://github.com/grork/db.js)有一个很好的包装器）

# css - CSS3边框半径简写解决方案

> ID：12249648
> 
> 赞同：3
> 
> 时间：2012-09-03T14:19:52.570
> 
> 标签：css, shorthand

这是

```
border-radius:10px 10px 0 0; 
```

一个缩短版本，适用于所有识别它的浏览器：

```
border-top-left-radius:10px; border-top-right-radius:10px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:23:33.200

是的，第一种方法更好，因为它更短并且浪费更少的带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:22:24.120

是的，它们是相同的，就像有 padding-left 有border-top-left-radius 一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:29:45.433

如果您真的希望知道它可以在所有支持它的浏览器上运行，那么您应该使用[Compass](http://compass-style.org/reference/compass/css3/border_radius/)。

# textmate - 在新的 TextMate 中更改主题？

> ID：12249651
> 
> 赞同：11
> 
> 时间：2012-09-03T14:20:16.750
> 
> 标签：textmate

我是 TextMate 的新手。

双击 .tmTheme 文件不要安装并为我设置主题。

最近构建的 TextMate 中没有“字体和颜色”选项卡，我该如何更改主题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-03T14:27:40.913

在 TM2 中，您可以通过从视图菜单中选择主题来更改主题。

# dll - 如何使用 Marshal 类编译 C++ DLL

> ID：12249652
> 
> 赞同：2
> 
> 时间：2012-09-03T14:20:18.830
> 
> 标签：dll, c++-cli

我昨天刚开始使用 C++，但我被我怀疑是一个微不足道的问题困住了。主 DLL 类生成**错误 C2653: 'Marshal': is not a class or namespace name**。

我很确定我已经从 MSDN 页面中逐字复制了使用此类的语法。这是代码：

```
// VideoInfoAssembly.cpp
// compile with: /clr

using namespace std;
using namespace System;
using namespace System::Runtime::InteropServices;

#include "stdafx.h"
#include "VideoInfoAssembly.h"

#pragma managed

namespace VideoInfoAssembly
{
    short VideoInfo::GetWidth(System::String^ managedString)
    {
        // Marshal the managed string to unmanaged memory. 
        char* stringPointer = (char*) Marshal::StringToHGlobalAnsi(managedString).ToPointer();

        // Always free the unmanaged string.
        Marshal::FreeHGlobal(IntPtr(stringPointer));

        return 9001;
    }
} 
```

概括地说，我有一个 C# 应用程序需要读取视频文件的视频属性，而 Microsoft Media Foundation 需要 C++。我已经成功构建了 DLL，并让它返回超过 9000 作为测试。现在，我正在尝试将托管字符串传递给 DLL（这将是视频文件名）；但是，我已经努力了一个多小时才能让 Marshal 类发挥作用。如前所述，我一直在使用[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.stringtohglobalansi.aspx)页面但没有成功。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:56:06.403

这是由预编译的标头引起的问题。编译器将跳过所有内容，直到找到预编译头文件的#include。您犯的错误是没有放在`#include "stdafx.h"`文件的顶部。所以像这样修复它：

```
#include "stdafx.h"             // Has to be first
#include "VideoInfoAssembly.h"

using namespace std;
using namespace System;
using namespace System::Runtime::InteropServices;

// etc.. 
```

# javascript - 在 Knockout 中调用 ajax 后 ViewModel 未更新

> ID：12249656
> 
> 赞同：1
> 
> 时间：2012-09-03T14:20:34.973
> 
> 标签：javascript, asp.net-mvc, knockout.js

我正在尝试为我的项目制作一个带有淘汰赛的简单网格系统。但我无法正确更新我的视图模型

这是我的 JS；

```
$(function () {
    function AppViewModel(initialData) {
        var self = this;
        self.prices = ko.observableArray(initialData.Data);
        self.TotalCount = ko.observable(initialData.TotalCount);
        self.Page = new PageViewModel(initialData);
        self.GoTo = function (d) {
            $.getJSON("/prices/GetByFilterViaJSON?limit=3&page=" + d, function (data) {
                self.Page = new PageViewModel(data);
                self.prices(data.Data);
            });
        };
    };

    function PageViewModel(listData) {
        var self = this;
        ko.mapping.fromJS(listData.Page, {}, self);
    }

    $.getJSON("/prices/GetByFilterViaJSON?limit=3", function (data) {
        ko.applyBindings(new AppViewModel(data));
    });
}); 
```

和 HTML

```
<div class="section table_section">
<div class="section_inner">
    <div class="title_wrapper">
        <h2 data-bind="text: TotalCount">
            Prices</h2>
    </div>
    <div class="section_content">
        <div id="product_list">
            <div class="table_wrapper">
                <div class="table_wrapper_inner">
                    <table cellpadding="0" cellspacing="0" width="100%">
                        <tbody>
                            <tr>
                                <th>
                                    No.
                                </th>
                                <th>
                                    Tier
                                </th>
                                <th>
                                </th>
                            </tr>
                            <!-- ko foreach: prices -->
                            <tr data-bind="css:{first: $index % 2 == 0}">
                                <td data-bind="text: Id" style="width: 26px;">
                                </td>
                                <td data-bind="text: Tier" style="width: 35px;">
                                </td>
                                <td style="width: 120px;">
                                    <div class="actions_menu">
                                        <ul>
                                            <li><a class="edit" href="">edit</a></li>
                                            <li><a class="delete" href="">deny</a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <!-- /ko -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div><!-- PAGING NUMBERS -->
        <div class="pagination"><!-- HERE NOT UPDATING -->
            <span class="page_no" data-bind="text: Page.CurrentPage()"></span>
            <ul class="pag_list" data-bind="foreach: ko.utils.range(1, Page.TotalPage)">                   <!-- AND HERE NOT UPDATING -->
                <li><a href=""  data-bind="click: $root.GoTo, css:{current_page: $data==$root.Page.CurrentPage()}"><span><span data-bind="text: $data"></span></span></a>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

当我单击分页号码（viewModel 中的 GoTo 函数）时，self.Page 不会更新，因此页码类始终相同。那是我无法成功的。

你觉得我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:33:22.800

当您在方法中执行此操作时，Knockout 不知道您的新 PageViewModel `GoTo`：

```
 self.Page = new PageViewModel(data); 
```

UI 绑定到以前的 PageViewModel 并且不知道这个新的。您可能希望创建`self.Page`一个 observable 并使用当前的 PageViewModel 填充它。所以，那么你的`GoTo`方法会做：

```
self.Page(new PageViewModel(data))`. 
```

您最初将其定义为：

```
self.Page = ko.observable(new PageViewModel(initialData)); 
```

然后，在您的 UI 中，您需要`with: Page`围绕您的部分进行操作或访问诸如`Page().CurrentPage`.

# hadoop - 让 Amazon EMR 使用 S3 进行输入和输出

> ID：12249657
> 
> 赞同：2
> 
> 时间：2012-09-03T14:20:35.660
> 
> 标签：hadoop, amazon-web-services, amazon, emr, mapr

如何让 Amazon EMR (0.20.205 MapR) 使用 S3 存储桶进行输入和输出？

我尝试将以下内容添加到核心配置 xml 文件中（通过引导操作）：

```
<property>
        <name>fs.default.name</name>
        <value>s3n://</value>
</property>

<property>
        <name>dfs.name.default</name>
        <value>s3n://</value>
</property> 
```

但我总是得到类似的东西：

> 引起：java.io.IOException：无法解析路径：s3n://some_out_bucket/out at com.mapr.fs.MapRFileSystem.lookupClient(MapRFileSystem.java:219) at com.mapr.fs.MapRFileSystem.delete(MapRFileSystem .java:385) 在 cc.mrlda.ParseCorpus.run(ParseCorpus.java:192) 在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) 在 cc.mrlda.ParseCorpus.main(ParseCorpus. java:675) ... 10 更多

Hadoop新手在这里。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:52:43.780

除了上述问题中描述的配置步骤，我还修改了代码：

`FileSystem fs = FileSystem.get(URI.create(outputPath), new JobConf(SomeClass.class));`其中`outputPath`指向 S3 上的资源，例如`s3n://some_bucket`

使用`URI.create`，我现在可以直接从 S3 访问文件。

# security - 使用 powershell Set-GPPermissions cmdlet 设置 GPO 安全过滤器

> ID：12249658
> 
> 赞同：3
> 
> 时间：2012-09-03T14:20:38.690
> 
> 标签：security, powershell, filter, cmdlet, gpo

根据[微软](http://technet.microsoft.com/en-us/library/ee461038.aspx)的说法，cmdlet [Set-GPPermissions](http://technet.microsoft.com/en-us/library/ee461038.aspx)接受选项“-replace”：

> “这确保了现有的权限级别被新的权限级别所取代。”

我从 PowerShell 导入 GPO。之后我想设置安全过滤器。导入后，在设置安全过滤器之前，GPO的安全过滤为“Authenticated Users”。现在我想删除该过滤器选项并将其替换为“myGroup”。为此，我使用以下命令：

```
Set-GPPermissions -Name "myGPO" -PermissionLevel GpoApply -TargetName "myGroup" -TargetType Group -replace 
```

结果是添加了一个引用“myGroup”的新安全过滤器，但组“Authenticated Users”并未被删除。Powershell cmdlet 不是在*替换*过滤器，而是在*添加*它。

提示？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T18:02:16.117

如您引用的页面上所述，该命令将替换已经存在`permissions`的组“myGroup”。它不会用组“myGroup”的权限替换组“Authenticated Users”的权限。引自[Technet](http://technet.microsoft.com/en-us/library/ee461038.aspx)：

> -替换<开关参数>
> 
> 指定在设置新权限级别之前删除组或用户的现有权限级别。

您必须使用`Set-GPPermissions`授予“myGroup”`Set-GPPermissions -TargetName "Authenticated Users -PermissionLevel None`权限并删除“Authenticated Users”的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T06:24:41.440

我发现将 Authenticated User 权限级别设置为 none 就足够了，如下所示：

```
Set-GPPermissions -Name "MyGPO" -PermissionLevel None -TargetName "Authenticated Users" -TargetType Group 
```

这删除了“经过身份验证的用户”安全过滤器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-30T19:04:58.440

我认为您应该接受 Ansgar 或 user1458620 的回答；他们是正确的。这是包含相同内容的最终解决方案：

```
$gpo | Set-GPPermissions -Replace -PermissionLevel None -TargetName 'Authenticated Users' -TargetType group 
$gpo | Set-GPPermissions -PermissionLevel gpoapply -TargetName 'MyGroup' -TargetType group 
```

# java - 在到达 servlet 之前从一个过滤器映射到另一个过滤器

> ID：12249659
> 
> 赞同：0
> 
> 时间：2012-09-03T14:20:38.843
> 
> 标签：java, servlets, servlet-filters

在最终移动到*servlet s2*之前，我想通过 2 个过滤器，它们是*过滤器 1*，然后按顺序*过滤 2*。以下是执行这些映射的 xml 文件，但我不知道如何将 filter-1 映射到 filter-2，然后再映射到 servlet-2。我应该如何更改此 xml 以映射我的方式？

```
 <!-- filter tags -->

<filter>
    <filter-name>Filter-1</filter-name>
    <filter-class>Filters.Filter_1</filter-class>
</filter>

<filter>
    <filter-name>Filter-2</filter-name>
    <filter-class>Filters.Filter_2</filter-class>
</filter>

<filter-mapping>
    <filter-name>Filter-1</filter-name>
    <servlet-name>s2</servlet-name>
</filter-mapping>

<filter-mapping>
    <filter-name>Filter-2</filter-name>
    <servlet-name>s2</servlet-name>
</filter-mapping>

<!-- end of filter tags --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:34:20.010

有了这个配置

```
<filter-mapping>
    <filter-name>Filter-1</filter-name>
    <servlet-name>/*</servlet-name>
</filter-mapping>

<filter-mapping>
    <filter-name>Filter-2</filter-name>
    <servlet-name>/*</servlet-name>
</filter-mapping> 
```

如果您请求 /s2，您的请求将遵循以下步骤：

1.  过滤器 1
2.  过滤器 2
3.  s2
4.  过滤器 2
5.  过滤器 1

看看[文档](http://www.oracle.com/technetwork/java/filters-137243.html)。

过滤器的代码应如下所示：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException,
        ServletException {

    try {

        // your code for step 1 or 2

        chain.doFilter(request, response);

        // you code for step 4 or 5

    } catch (Exception e) {

        log.error("error" + e.toString());
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:29:53.660

web.xml中条目的顺序`<filter-mapping>`决定了它们在过滤器链中的顺序。

因此，当您拥有它时，它们应该以所需的顺序链接起来。

不过，让你的过滤器独立于这个顺序是个好主意。

# android - 图形类不适用于 AIR 移动应用程序？

> ID：12249660
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:20:46.520
> 
> 标签：android, flash, mobile, air, sprite

我正在尝试在 Air mobile 中使用 Graphic Class（在 Flahs Professional CS6 上构建），但我的 Sprite 无法在设备上运行，但在我的计算机上，在 Flash Player 上，它们运行良好。

什么问题？这个类在 AIR MOBILE 中不起作用吗？

谢谢 ;）

PS：我使用的是安卓设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:41:38.560

好的，我的问题解决了，是加载器加载图像 URL，在 android 上 EventListener`Event.COMPLETE`不起作用。我的代码需要一个位图来填充精灵，所以在我的 PC 上可以工作，但在设备上不行。我从 更改`Event.COMPLETE`为`Event.ACTIVATE`，它工作。

前：

```
loader.load(requestURL);    
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, desenharImagem); 
```

现在：

```
loader.load(requestURL);
loader.contentLoaderInfo.addEventListener(Event.ACTIVATE, desenharImagem); 
```

# xcode - 发送 HTTP GET 请求 xcode

> ID：12249662
> 
> 赞同：0
> 
> 时间：2012-09-03T14:20:56.213
> 
> 标签：xcode, http, get, request

我正在尝试将联系表的内容发送到我的网络服务。我的代码基于 StackOverFlow 主题，名为：在 Xcode 中发送 get 方法。

我想我遵守了规则，但它仍然不起作用。我不想让你浪费时间，但我开始生气了。

```
- (IBAction)send:(id)sender{

NSString *get = [[NSString alloc] initWithFormat:@"&Contact%%5BFirstName%%5D=%@+First&Contact%%5BLastName%%5D=%@+Last&Contact%%5BMail%%5D=%@&Contact%%5BPhone%%5D=%@&Contact%%5BMotivations%%5D=%@&Contact%%5BCommentaires%%5D=%@",prenomtxtfield.text,nomtxtfield.text,emailtxtfield.text,teltxtfield.text,pvController.mail.motiv,questiontxtview.text];

NSData *getData = [get dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *getLength = [NSString stringWithFormat:@"%d", [getData length] ];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:@"http://xxx.zfort.net/index.php?r=site/contactAdd"]];
[request setHTTPMethod:@"GET"];
[request setValue:getLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:getData]; 
```

我的字段是：姓氏、名字、邮件、电话、动机、问题。我的网络服务地址是：http: [//xxx.zfort.net/index.php](http://xxx.zfort.net/index.php)？

谢谢大家（即使你没有回应......你们过去都已经用你的评论帮助过我）

PS：这可能是编码值的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:44:04.557

您应该将方法更改为“POST”或

1.  将您的 get 参数附加到 url 参数
2.  将 content-length 设置为 0 并将 http body 设置为 nil

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:06:24.787

尝试这个：

```
NSString * sendstring=[NSString StringWithFormat:@"http://xxx.zfort.net/index.php?r=site/contactAdd&Contact%%5BFirstName%%5D=%@+First&Contact%%5BLastName%%5D=%@+Last&Contact%%5BMail%%5D=%@&Contact%%5BPhone%%5D=%@&Contact%%5BMotivations%%5D=%@&Contact%%5BCommentaires%%5D=%@",prenomtxtfield.text,nomtxtfield.text,emailtxtfield.text,teltxtfield.text,pvController.mail.motiv,questiontxtview.text];

[NSURLConnection initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:sendstring]] delegate:self]; 
```

然后你必须实施

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

和

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

从

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

# ajax - 在 iframe 中运行 AJAX - document.ready 不起作用

> ID：12249663
> 
> 赞同：3
> 
> 时间：2012-09-03T14:20:56.187
> 
> 标签：ajax, iframe, facebook-apps

我有一个使用 AJAX 的应用程序，但 AJAX 在 iframe 中无法正常工作。

这是我正在使用的 JS（这是在加载到 iframe 的页面内）。这 3 个函数各自调用一个填充应用程序的 AJAX 例程。我想要的是加载 iframe，然后让这个 JS 运行。它必须是在完成加载后调用此代码的 iframe，因为我无法控制加载它的页面（Facebook）。

```
<script type="text/javascript">
$(document).ready(function(){

    alert('HELLO!!!'); // Test to see if it working

    load_tab_content('<?php echo $load_tab_content_nonce; ?>');
    load_services('<?php echo $load_services_nonce; ?>');
    load_pages('<?php echo $load_pages_nonce; ?>');

});
</script> 
```

这是可能的，还是我做错了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:56:35.567

我推荐两种方法之一来实现这一点，第一种也是最简单的方法是在父页面中运行 onload 函数。您可能不会让 iframe 文档中的 onReady 正确执行。

```
<script>
  function notify_load() {
    //alert("now do something");
  }
</script>

<iframe src="http://someurl/" onload="notify_loaded()" /> 
```

第二个建议是在 iframe 页面中编写一个脚本来更改可以从主页查询的变量。或者您甚至可能想尝试直接调用父页面函数，即。parent.notify_load();

# javascript - 使用 Knockout.js 动态更改 facebook 数据-*

> ID：12249664
> 
> 赞同：0
> 
> 时间：2012-09-03T14:21:03.787
> 
> 标签：javascript, facebook, knockout.js

我想更改 facebook 之类的按钮设置，例如[wix.com](http://wix.com)的 HTML 编辑器。

我创建了一个视图模型：

```
<script>
    //Asynchronous JavaScript loading
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    var viewModel = {
        //Facebook Button
        LayoutStyles: ko.observableArray([
            { Title: "Standart", Value: "standart" },
            { Title: "Button", Value: "button_count" },
            { Title: "Box", Value: "box_count" }]),
        ColorSchemes: ko.observableArray([
            { Title: "Light", Value: "light" },
            { Title: "Dark", Value: "dark" }]),
        selectedStyleValue: ko.observable(),
        selectedColorValue: ko.observable(),
        withFaces: ko.observable(false),
        withSend: ko.observable(true),
        width: ko.observable(450)
    };
    ko.applyBindings(viewModel);
</script> 
```

我放置了一个这样的fb按钮：

```
<div id="fb-root">
</div>
<div class="fb-like" data-bind="attr:{ 'data-width':width,'data-send':withSend,'data-show-faces':withFaces}">
<h4>Facebook Like Button Settings </h4>
            <div class="control-group">
                <label class="control-label" style="white-space:nowrap;">Layout Style</label>
                <div class="controls">
                    <select class="" data-bind="options:LayoutStyles,optionsText:'Title',optionsValue:'Value',value:selectedStyleValue"></select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" style="white-space:nowrap;">Color Scheme</label>
                <div class="controls">
                    <select data-bind="options:ColorSchemes,optionsText:'Title',optionsValue:'Value',value:selectedColorValue"></select>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <label class="checkbox">
                        <input type="checkbox" data-bind="checked:withFaces" /> Show Faces 
                    </label>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Width</label>
                <div class="controls">
                    <input type="text" id="fbWidth" data-bind="value:width, valueUpdate:'afterKeyDown'" />

                </div>
            </div>

</div> 
```

我更改了宽度输入，但它在 fb 按钮中不起作用。我缺少什么。谢谢你的建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T18:10:25.393

绑定完成后，需要自定义绑定来强制 FB API 重新解析您的嵌入标签。查看本指南：

[http://weblogs.asp.net/jimwang/implementing-a-facebook-like-button-with-knockout-js](http://weblogs.asp.net/jimwang/implementing-a-facebook-like-button-with-knockout-js)

# c# - 我无法将数据从 c# 服务器传递到 GCM 应用程序

> ID：12249670
> 
> 赞同：0
> 
> 时间：2012-09-03T14:21:21.813
> 
> 标签：c#, android, google-cloud-messaging

所以我正在尝试将一些数据从我的 c# 服务器发送到我的 gcm android 应用程序。它工作得很好（经过一整天的工作），但我不知道如何实际发送一些数据（并接收它）。在我的 c# 方面，我有：

```
 using (var wc = new WebClient())
        {
            wc.Headers.Add("Authorization", "key=" + "key");
            var nameValues = new NameValueCollection
                     {
                         {"registration_id", "id"},
                         {"collapse_key", Guid.NewGuid().ToString()},
                         {"data.payload", "works!!!!!!"},
                         {"message", "YES it works!!!"}
                     };
            var resp = wc.UploadValues("https://android.googleapis.com/gcm/send",nameValues);
            var respMessage = Encoding.Default.GetString(resp);
            MessageBox.Show("Got respose from GCM: " + respMessage);
        } 
```

在我的 android 应用程序的 onmessage 方法中，我有：

```
 protected void onMessage(Context arg0, Intent arg1) {
    Log.i("Registration", "Got a message!");
    Log.i("Registration", arg0.toString() + " " + arg1.toString());
    String score =  arg1.getExtras().getString("message");
    score=arg1.getExtras().getString("data.payload"); 
```

问题是我的分数字符串始终为空：S

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:30:29.400

规则是名为“data.Foo”的 POST 字段作为名为“Foo”的意图附加信息传递。要检索一个名为“payload”的额外内容，您需要传递“data.payload”并检索 `arg1.getStringExtra("payload")。

顺便说一句，您检索分数两次 - 作为“消息”和“data.payload”。两者都不对。

# android - 自动填充 ListView 多选

> ID：12249671
> 
> 赞同：0
> 
> 时间：2012-09-03T14:21:24.103
> 
> 标签：android, listview, checkbox, android-listview

我有一个 listView 多项选择。listview 的每一行都有一个复选框。我还有一个带有 id 的数组列表哦 listView 的每个元素。

我需要在活动开始时自动填充listView，其中每个复选框的选中或未选中取决于arrayList 内部的id。

这是在活动的 onCreate 中完成的吗？但我怎么能做到这一点？我还没有关于这个问题的代码.....知道吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:49:34.073

首先使用复选框在 ListView 上工作

这是示例的链接

[链接1](http://www.marvinlabs.com/2010/10/custom-listview-ability-check-items/)

[链接2](http://www.vogella.de/articles/AndroidListView/article.html#singlemulti)

[链接 3](http://www.coderanch.com/t/513608/Android/Mobile/Multiple-Checkboxes-ListView)

下一步是根据 id.. 检查获取复选框，在 Adapter 的 getView() 方法中，您可以使用`setChecked()`

[在这里学习](http://developer.android.com/reference/android/widget/CheckBox.html)

# javascript - 如何检查光标是否在指定标签之间

> ID：12249673
> 
> 赞同：1
> 
> 时间：2012-09-03T14:21:28.220
> 
> 标签：javascript, jquery, internet-explorer, tags, cursor

里面有一些`formatted`文字`textarea`，光标在某个地方。我需要检查光标是否在某些特定标签之间。

示例： **foo `|`bar**。

```
isBetween(['b', 'strong']); // should return true in above case 
```

我有内部的回报`function`（有一些问题，但现在让我满意）。所以，我只需要那个。`position``cursor``textarea``IE``isBetween()` `function`

谢谢你的帮助！

**更新**：

```
<p>qwer<b>ty|ui</b>op</p>
isBetween(['p']); // should also return true, because the cursor in not only between 'b', it is between 'p' too 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:30:33.827

 您应该用标签将标签之间的空间括起来`span`。然后，在 jQuery 中，使用该[`.mouseover()`](http://api.jquery.com/mouseover/)函数。

例子：

```
<b>TAG1</b>
<span id="spacer">&nbsp;</span>
<strong>TAG2</strong>

<script type="text/javascript">
    $("#spacer").mouseover(function(){
        //Do stuff
    });
</script> 
```

跨度必须有一些东西，所以`&nbsp;`在那里放一个空间。

现场小提琴示例：http: [//jsfiddle.net/PrruT/](http://jsfiddle.net/PrruT/)

**更新：**

我不会为你完成整个功能，但我会告诉你，你可以像这样设置它：

```
/* I'm assuming you can figure out how to get the cursor position on your own, represented by var cursor */

function isBetween(selectorOne, selectorTwo){
    var left = $(selectorOne).position().left; //Left position of the object
    var right = $(selectorTwo).position().left + $(selectorTwo).width(); //Right XY position of the object
    if (cursor > left && cursor < right)
        return true;
    else
        return false;
} 
```

# javascript - 中文浏览器在预加载图像时抛出 javascript 错误

> ID：12249674
> 
> 赞同：1
> 
> 时间：2012-09-03T14:21:36.487
> 
> 标签：javascript

当尝试使用这样的 html-inline 脚本预加载图像时：

```
new Image().src="/path/to/image.png"; 
```

我偶尔会记录此错误：

```
由于出现错误 ffffffff 而导致此项操作无法完成。
 Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 2.0.50727) 
```

根据谷歌的中文翻译为：

```
This operation can not be completed due to an error ffffffff 
```

我从来没有在非中文浏览器上看到过这个错误，也无法重新创建它。显然，我没有给你太多继续，但任何见解都是值得赞赏的。

谢谢

更新：是的，我查看了记录的 IP（此处未包含），它似乎来自中国。

# iphone - 在iphone中滚动uitableview时隐藏的图像

> ID：12249678
> 
> 赞同：2
> 
> 时间：2012-09-03T14:21:55.313
> 
> 标签：iphone, grand-central-dispatch

我正在做这个代码

但是当我滚动 uitableview 图像时，我想要的图像一旦加载，它就会消失，然后它就不会消失。

请告诉我在这方面我能做什么。

```
__block NSData *image = nil;
dispatch_queue_t imageQueue = dispatch_queue_create("queueForCellImage", NULL);
dispatch_async(imageQueue, ^{
    NSString *thumbnailURL = @"http://www.bizfy.com/demo/biscoot/a1.png";
    image = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:thumbnailURL]];
    dispatch_async(dispatch_get_main_queue(), ^{
        cell.imageView.image = [UIImage imageWithData:image];
        [cell setNeedsLayout];
    });
});
dispatch_release(imageQueue); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:27:29.607

我建议不要将以前下载的图像保存在`NSMutableDictionary`或中，而是使用. 它提供了一个类似的接口（例如有一个方法），但您也可以配置应该缓存多少图像（通过或其他机制）。您可能还想添加一个观察者，以便在内存压力时清空缓存。`NSMutableArray`[`NSCache`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSCache_Class/index.html)`NSMutableDictionary``setObject:forKey:``countLimit``UIApplicationDidReceiveMemoryWarningNotification`

如果您想更上一层楼，在下载`UITableView`或中使用的图像时`UICollectionView`，我建议您确保 (a) 将可见图像优先于可能已滚出屏幕的图像；(b) 确保限制并发度以避免可能困扰 GCD 全局队列等的超时问题。实现这一点（以及`NSCache`行为）的最简单方法是使用已建立的异步图像检索`UIImageView`类别​​之一，例如正如[AFNetworking](https://github.com/AFNetworking/AFNetworking)或[SDWebImage](https://github.com/rs/SDWebImage)中包含的那些（或实现您自己的想法变体）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:51:56.623

您应该将图像存储在 NSArray、NSDictionary 甚至文件系统中。尝试存储在 NSMutableArray 中或保存到磁盘中，而不是仅设置`cell.imageView`，然后在下次`cellForRowAtIndexPath`调用时访问存储它的图像。

一些带有 NSMutableDictionary 解决方案的代码，假设您使用的是 ARC（尝试理解）：

在你的接口文件中，你声明一个`NSMutableDictionary *dictionaryImages;`

在您的实现文件中，在`viewDidLoad`方法中启动它：`dictionaryImages = [NSMutableDictionaryImages dictionary];`

现在，在您下载图像的地方，您还应该在字典中插入图像（我没有发布您的所有代码，只是该部分的相关部分）

```
NSString *thumbnailURL = @"http://www.bizfy.com/demo/biscoot/a1.png";
UIImage *imageForDictionary = [UIImage imageWithData:image];
[dictionaryImages setObject:imageForDictionary forKey:thumbnailURL]; 
```

然后，当`cellForRowAtIndexPath`被调用时，将其与图像相关联（当然，如果您有权访问 thumbnailURL）：

```
NSString *thumbnailURL = **get it from somewhere**;
UIImage *imageFromDictionary = [dictionaryImages objectForKey:thumbnailURL];
cell.imageView.image = imageFromDictionary; 
```

# php - 如何从某些新站点网页重定向回某些旧站点网页

> ID：12249683
> 
> 赞同：1
> 
> 时间：2012-09-03T14:22:08.917
> 
> 标签：php, wordpress, redirect, e-commerce

我有一个**新旧****版本**的网站。新版本是.php。前一个是基于wordpress的。目前，当输入旧域时，它会重定向到新的 php 页面。但是，旧站点上的某些页面仍然是新站点所需的，但没有加载。具体来说，这些是电子商务/支付页面。

 ****当在新**网站的产品页面上按下“购买”按钮而不是链接到旧的电子商务/支付页面时，就会出现问题，而是重定向到**新**的主页。更糟糕的是，用于**旧**网站的 wordpress 面板登录没有加载，所以我担心它是否仍然存在 - 考虑到这对我来说是多么辛苦和昂贵。

总而言之，有人可以阐明：

*   什么可能导致访问电子商务页面和**旧**网站 wordpress 登录页面出现问题？
*   如果仍然可能，如何**从新**站点重定向回**旧的电子商务页面？**

非常感谢您提供的任何解决方案。**

# php - 插入mysql时丢失post数据

> ID：12249687
> 
> 赞同：1
> 
> 时间：2012-09-03T14:22:29.480
> 
> 标签：php, jquery, wysiwyg

这个问题对我来说似乎很奇怪，因为它是间歇性的。我会很详细，所以请多多包涵。

[我有一个 textarea，它使用http://redactorjs.com](http://redactorjs.com)制成所见即所得的编辑器

我正在使用点击编辑功能 (http://redactorjs.com/docs/examples/click-to-edit/) 并使用 ajax 帖子保存数据。

mysql 数据库字段称为“信息”并设置为“blob”类型。

现在，如果我在 textarea 中输入以下文本并按保存，它可能会很好地存储它。

*“你好，我叫greg，我是一个非常好的演员。我也是一个烹饪爱好者，曾经在烹饪比赛中获得第二名。”*

然后，如果我单击编辑并添加到它

*“你好，我叫greg，我是一个非常好的演员。我也是一个烹饪爱好者，曾经在烹饪比赛中获得第二名。我也喜欢在星期四早上游泳！”*

我有时会看到只有像下面这样的东西会保存到数据库中。

*“你好，我叫greg，我是一个非常好的演员。我也是一个曾经来过的烹饪爱好者”*

然后，如果再次编辑它并重新添加相同的文本并再次保存，它会成功保存！？！？

让我给你看一些代码..

**视图.php**

回显信息数据

```
<script>
function ClickToEditInfo()
{ 
    var info =  ['formatting', '|', 'bold', 'italic', 'deleted', '|',
                    'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
                    'table', 'link', '|',
                    'fontcolor', 'backcolor', '|', 
                    'alignleft', 'aligncenter', 'alignright', 'justify', '|',
                    'horizontalrule']
    $('#info').redactor({ 
            focus: true,
            buttons: info,
            wym: true,
            fixed: true
    }); 
}

function ClickToSaveInfo()
{
    var html = $('#info').getCode();
    var item = <?php echo $item_id; ?>;

    $.ajax({
            type: 'POST',
            url: "ajax/clickToEditInfo.php",
            data: "item_id="+item+"&html="+html,
            error: function(xhr, status, error) {
                console.log(error);
            },
            beforeSend: function() {
                $("#ajax").show();
                $("#ajax").html('<span class="label label-info">Saving info.. please wait</span>');
            },
            success: function(html){
                console.log(html);
                $("#ajax").html('<span class="label label-success">Saved!</span>');
                $("#ajax").fadeOut(1000, function () {
                    $(this).hide();
                });
            }
    });

    $('#info').destroyEditor(); 
}
<?php 
    endif; // end check if user owns item
}
?>
</script>

        <div id="info">
            <?php echo $item->getMainField('info', $item_id); ?>
        </div> 
```

**clickToEditInfo.php**

```
<?php 
include_once('../classes/item.class.php');
if (!isset($_SESSION)) session_start();

$item_id = $_POST["item_id"];
$html = $_POST["html"];
$user_id = $_SESSION['jigowatt']['user_id'];

if( $item->checkUserOwns($user_id, $item_id) ) : //check user owns item

    $item->clickToEditInfo($user_id, $item_id, $html);

else : // user does not own it
    return false;
endif; // end check if user owns item
?> 
```

和

**item.class.php > clickToEditInfo**

```
public function clickToEditInfo($user_id, $item_id, $html) {
    $stmt = parent::query("UPDATE `item_main` SET `info` = '$html' WHERE `item_id` = $item_id AND `user_id` = $user_id");
} 
```

您能想出为什么发布在数据库中的数据会被间歇性截断的原因吗？

**更新：**

我找到了一种可靠地重现它的方法。就像我说的它是一个所见即所得的编辑器。

***“你好，我叫greg，我是一个非常好的演员。我也是一个烹饪爱好者，曾经在烹饪比赛中获得第二名。”***

例如，如果我突出显示竞争并单击超链接按钮并将其链接到谷歌。按保存并插入以下内容。

***“你好，我叫格雷格，我是一个很好的演员。我也是一个烹饪爱好者，曾经在烹饪中获得第二名”***

我已经编辑

```
<?php 
include_once('../classes/item.class.php');
if (!isset($_SESSION)) session_start();

$item_id = $_POST["item_id"];
$html = $_POST["html"];
$user_id = $_SESSION['jigowatt']['user_id'];

if( $item->checkUserOwns($user_id, $item_id) ) : //check user owns item

    $item->clickToEditInfo($user_id, $item_id, $html);

    **echo $html;**

else : // user does not own it
    return false;
endif; // end check if user owns item
?> 
```

并且 console.log(html) 正在显示

```
<p>Hello my name is greg and i am a very good actor. I am also a cooking enthusiast who once came 2nd in a cooking 
```

所以它没有发布所有数据，与html标签有关吗？

**更新2**

我已经完成控制台登录**var html = $('#info').getCode();** 并确认

```
<p>Hello my name is greg and i am a very good actor.</p><p>I am also a cooking enthusiast who once came 2nd place on Come dine with me :)&nbsp;<a href="goggle" target="">link</a>&nbsp;</p> 
```

已发布，但仅

```
<p>Hello my name is greg and i am a very good actor.</p><p>I am also a cooking enthusiast who once came 2nd place on Come dine with me :) 
```

在 clickToEditInfo.php 中收到

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:09:59.613

在通过 POST 发送之前转义发布数据

```
var html = escape($('#info').getCode()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:44:17.910

认为我可能在发布之前在 html 上使用 escape() 修复了它。

[http://www.w3schools.com/jsref/jsref_escape.asp](http://www.w3schools.com/jsref/jsref_escape.asp)

```
var html = $('#info').getCode();
    var item = <?php echo $item_id; ?>;
    var html = escape(html); 
```

# c# - 依赖类的构造函数注入

> ID：12249690
> 
> 赞同：0
> 
> 时间：2012-09-03T14:22:43.633
> 
> 标签：c#, .net, dependency-injection, ninject, ninject.web.mvc

我在我的 MVC 应用程序中使用 Ninject 并尝试实现工作单元存储库模式。

具体来说，我已经定义了一个通用的 IUnitOfWork 接口，然后我想在其他一些（业务逻辑类）的构造函数中使用这个接口的一个实例。这是我的控制器的开始......

```
public class CompanyController : Controller
{
    private readonly IUnitOfWork UnitOfWork;
    private readonly ICompanyService CompanyDb;
    private readonly IEmployeeService EmployeeDb;

    public CompanyController(IUnitOfWork unitOfWork)
        : base()
    {
        this.UnitOfWork = unitOfWork;
        // This following construction is the problem...
        this.CompanyDb = new ICompanyService(this.UnitOfWork);
        this.EmpoloyeeDb = new IEmployeeService(this.UnitOfWork);
    }

    // Rest of Controller implementation
} 
```

Controller 构造函数可以正常工作，但我想找到一种构建各种业务逻辑类的简洁方法，以便它们可以引用 UnitOfWork 对象中的存储库。

问题是我无法从接口实例化一个新的业务逻辑对象，即以下代码失败：

```
this.CompanyDb = new ICompanyService(this.UnitOfWork); 
```

因为没有任何东西可以将 ICompanyService 接口“连接”到具体的实现。我想做的是使用 DI (Ninject) 创建 ICompanyService 的实例，其中物理类的构造函数如下所示：

```
public class CompanyService : ICompanyService {

    private readonly UnitOfWork db;

    public CompanyService(IUnitOfWork unitOfWork) {
        this.db = unitOfWork as UnitOfWork;
    }
} 
```

最终解决方案 根据 Joshscorp 和 Dbaseman 的建议（谢谢），我的代码结构如下：

```
public class CompanyService : ICompanyService {

    private readonly UnitOfWork db;

    public CompanyService(IUnitOfWork unitOfWork) {
        this.db = unitOfWork as UnitOfWork;
    }

    // Rest of implementation
}

public class CodeFirstController : Controller {

    private readonly IUnitOfWork UnitOfWork;
    private readonly ICompanyService CompanyDb;
    private readonly IEmployeeService EmployeeDb;

    public CodeFirstController(
        IUnitOfWork unitOfWork,
        ICompanyService companyDb,
        IEmployeeService employeeDb
    ) : base() {
        this.UnitOfWork = unitOfWork;
        this.CompanyDb = companyDb;
        this.EmployeeDb = employeeDb;
    }

    // Rest of implementation
} 
```

Ninject 模块如下：

```
public class CodeFirstModule : NinjectModule {
    public override void Load() {
        string connectionString = ConfigurationManager
            .ConnectionStrings["CompanyConnection"]
            .ConnectionString;

        Bind<CodeFirst.DAL.IUnitOfWork>()
           .To<CodeFirst.DAL.EntityFramework.UnitOfWork>()
           .InRequestScope()
           .WithConstructorArgument("connectionString", connectionString);

        Bind<CodeFirst.DAL.ICompanyService>()
           .To<CodeFirst.DAL.EntityFramework.CompanyService>()
           .InRequestScope();

        Bind<CodeFirst.DAL.IEmployeeService>()
           .To<CodeFirst.DAL.EntityFramework.EmployeeService>()
           .InRequestScope();
   }
} 
```

IUnitOfWork 绑定上的“InRequestScope()”方法确保在依赖类 CompanyService 和 EmployeeService 的构造函数中使用 UnitOfWork 类的相同实例。

这正是我所寻找的——依赖服务类引用的 IUnitOfWork 对象的单个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:13:55.880

首先，您不能新建接口，只能新建具体类。

`new ICompanyService`永远不会工作。

其次，如果您通常是 MVC，我想您正在使用 DependencyResolver 来解析您的对象，根据某些人的说法，这是一种反模式。无论您使用什么来解决依赖关系，您都应该始终拥有应用程序的单一入口点，即 Global.asax 等中的每个请求......以及某种类型的引导程序来加载依赖关系对象图。

在您的示例中，我要更改的是构造函数，`ICompanyService`以及`IEmployeeService`，

```
public class CompanyController : Controller
{
    private readonly IUnitOfWork unitOfWork;
    private readonly ICompanyService companyDb;
    private readonly IEmployeeService rmployeeDb;

    public CompanyController(IUnitOfWork unitOfWork,
        ICompanyService companyDb, 
        IEmployeeService  employeeDb)
    {
        this.unitOfWork = unitOfWork;
        this.companyDb = companyDb;
        this.empoloyeeDb = employeeDb;
   }

    // Rest of Controller implementation
} 
```

`ICompanyService`假设您在应用程序的入口点注册了 Ninject 或任何 IoC 容器的具体实现，这是有原因的`IEmployeeService`（不熟悉 Ninject 并且不推荐它）

您可能想知道，`IUnitOfWork`实例是如何被注入到`ICompanyService`具体对象的构造函数中的？以同样的方式注入到`CompanyController`的构造函数中！

# html - HTML5 - 如何获取 SVG 文本元素的中心点？

> ID：12249691
> 
> 赞同：3
> 
> 时间：2012-09-03T14:22:46.510
> 
> 标签：html, svg, center, point

我遇到了 SVG 文本元素的问题。我想找到 SVG 文本的中心点。在 HTML 文件中：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <text x="300" y="300" style="font-size: 80px;" id="test">It is example text</text>
 </svg> 
```

在Javascript中，我有类似的东西：

```
var obj = document.getElementById('test').childNodes[1];
var box = obj.getBBox();

var centerPoint = new Object();
centerPoint.x = box.x + box.width / 2;
centerPoint.y = box.y + box.height/ 2; 
```

但它不起作用 - 中心点低于我的预期。可能我错过了一些东西，我确定还有一个文本属性需要从“centerPoint.y”中减去。“centerPoint.x”值似乎没问题。它在 IE9 浏览器、Chrome、Opera 和 Firefox 上进行了检查。结果是一样的。

或者，也许您有其他解决方案？

**编辑**

总结一下我的代码可以正常工作。我重写了整个代码，现在可以了。我不知道发生了什么，可能我的浏览器根本没有刷新脚本。将 line-height 设置为“0”是不必要的。getBBox 这就是我需要做的一切。

无论如何，感谢您的时间，对不起我的英语！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:56:22.477

如果您正在寻找更紧密的边界框，那么您可以遍历文本元素中的字符添加自己的更紧密的边界框，请参阅[getExtentOfChar](http://www.w3.org/TR/SVG11/text.html#__svg__SVGTextContentElement__getExtentOfChar) DOM 方法。但是，请注意，如果您有很多文本，这可能会很昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:25:43.010

行高可能是一个原因。文本的位置通常比它的中心高一点/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:26:10.193

并非所有字形都具有相同的高度。考虑“干草”这个词，h 比 a 高，y 下降到 h 和 a 的下方（y 有一个叫做下降器的东西）。当您获得 SVG 中的文本边界框时，它会为您提供字形单元格大小。这通常足以容纳上升的字符，即 h 和下降的字符，即 y 字符。这就是 SVG 规范所说的方式，这就是所有浏览器工作方式相同的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:35:15.657

在 chrome 中，`naturalHeight`似乎`naturalWidth`得到了正确的高度和宽度。试试看它们是否适合你？

```
var centrePoint = {
    x: obj.naturalWidth / 2,
    y: obj.naturalHeight / 2
} 
```

根据我对`SVG`元素的经验，是的，它们有时会在它们周围有一些奇怪的填充，比如行高，所以设置`line-height:0`会有所帮助。

此外，返回的对象`getBBox()`实际上并不是以像素为单位的。它相对于`viewbox`包含`SVG`元素的 - 不一定是像素。`SVG`我网站上的 s 可能有`viewbox`500 x 500 的大小，但其样式只有 25 x 25 像素。所以它可能与像素有很大不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-09T06:37:08.270

你可以使用`getBoundingClientRect()`代替`getBBox()`

```
var obj = document.getElementById('test').childNodes[1];
var box = obj.getBoundingClientRect();
var centerPointX = box.left + box.width / 2;
var centerPointY = box.top + box.height/ 2; 
```

# java - Java 线程不终止

> ID：12249698
> 
> 赞同：0
> 
> 时间：2012-09-03T14:23:12.790
> 
> 标签：java, multithreading, runnable, implements

当两个三角形被单击两次时，我正在尝试为三角形设置动画。一旦我单击它们两次三角形 0 开始移动，直到 moveX 达到 20，while(moveX < 20)，但它似乎没有达到终止状态，它不会进入内部：if(t.getState() == Thread.State.TERMINATED），有什么想法吗？

```
public class secondFrame extends JFrame implements Runnable {

}

public secondFrame(ChallengesDialog dialog) {

    component = new secFrameDrawComponent();
    createComponent();

    Thread t = new Thread(this);
    t.start();
}

private void createComponent() {

    sGen = new shapeGenerator(434, 231);

    createT();
}

class AddComponentListener implements MouseListener {

    public void mouseClicked(MouseEvent event) {

    for(int i = 0; i < count; i++) {
        if (component.getTri(i).contains(event.getX(), event.getY())) {
            component.setShapeFill("triangle", i);
            component.repaint();    

            countColors(i);

            setChallenge();
        }
...
MouseListener listener = new AddComponentListener();
component.addMouseListener(listener);                       

public void setChallenge() {

    //two red triangles
    if(challenge == 1 && triColorCount[1] == 2) {
        Thread t = new Thread(component);
        t.start();

        System.out.println("Thread's state: " + t.getState());

        if(t.getState() == Thread.State.TERMINATED) {
            //Unreachable
            System.out.println("Thread completed");
        }                   
    }
}
...

public void run() {

    while(threadFlag) { 
        ..
        timeLabel.setText("Elapsed time: " + elapsedTime);
        ..                      
    }
 }

public class secFrameDrawComponent extends JComponent implements Runnable {

    public void modTriangle(int x, int y) {

        sGen.setTriangleOffset(x, y);

        triangle[0] = sGen.getTriangle();
    }

    public void paintComponent(Graphics g) {

        Graphics2D g2 = (Graphics2D)g;

        draw(g2);       
    }

    public void run() {

        while(moveX < 20) {

            moveX+= 1;
            modTriangle(moveX, 0);
            repaint();

            try {
                Thread.sleep(170);
            } catch (InterruptedException e) {  
                e.printStackTrace();
            }
            System.out.println("moveX = " + moveX);
        }
        System.out.println("Thread completed exec");        
    }

    public void draw(Graphics2D g2) {

        g2.setStroke(new BasicStroke(2));

        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
            RenderingHints.VALUE_ANTIALIAS_ON);

        modTriangle(moveX, 0);
        g2.draw(triangle[0]);
        g2.draw(triangle[1]);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:29:36.843

仔细看看你在做什么。您启动一个新线程，然后**立即**检查它是否已终止。当然不会，动画完成需要一段时间。如果要等到线程完成，请使用该[`join()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)函数。但是请注意，这将阻塞调用线程，直到您“加入”的线程完成。

# python - 逐步安装 Swampy

> ID：12249701
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:23:29.010
> 
> 标签：python, package, swampy

我是编程新手，正在阅读“Think Python”一书。在第 4 章中，我需要安装“swampy”——python 包。过去几天我一直在尝试，但没有成功。我正在运行 Python 2.7 和 3.2。我的电脑运行 Windows 7 并且是 64 位的。

请问有人可以为我提供简单的分步说明来解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:25:31.507

你试过[这个](http://www.greenteapress.com/thinkpython/swampy/install.html)指令吗？

请尝试按照它并写下您的设置失败的步骤。

或尝试以下方法：

假设您的 Python 2.7 安装在 中`C:\Python27`，请打开命令提示符并键入： `C:\Python27\Scripts\easy_install.exe swampy`

# c# - 检查特定网站上的大型代理列表的最快方法是什么？

> ID：12249702
> 
> 赞同：2
> 
> 时间：2012-09-03T14:23:29.403
> 
> 标签：c#, .net-4.0, proxy, windows-applications

我有一大堆代理服务器（txt 文件，每行中的 Format = ip:port），并编写了下面的代码来检查它们：

```
 public static void MyChecker()
    {
        string[] lines = File.ReadAllLines(txtProxyListPath.Text);
        List<string> list_lines = new List<string>(lines);
        List<string> list_lines_RemovedDup = new List<string>();
        HashSet<string> HS = new HashSet<string>();
        int Duplicate_Count = 0;
        int badProxy = 0;
        int CheckedCount = 0;

        foreach (string line in list_lines)
        {
            string[] line_char = line.Split(':');
            string ip = line_char[0];
            string port = line_char[1];
            if (CanPing(ip))
            {
                if (SoketConnect(ip, port))
                {
                    if (CheckProxy(ip, port))
                    {
                        string ipAndport = ip + ":" + port;
                        if (HS.Add(ipAndport))
                        {
                            list_lines_RemovedDup.Add(ipAndport);
                            CheckedCount++;
                        }
                        else
                        {
                            Duplicate_Count++;
                            CheckedCount++;
                        }
                    }
                    else
                    {
                        badProxy++;
                        CheckedCount++;
                    }
                }
                else
                {
                    badProxy++;
                    CheckedCount++;
                }
            }
            else
            {
                badProxy++;
                CheckedCount++;
            }
    }

    public static bool CanPing(string ip)
    {
        Ping ping = new Ping();

        try
        {
            PingReply reply = ping.Send(ip, 2000);
            if (reply == null)
                return false;

            return (reply.Status == IPStatus.Success);
        }
        catch (PingException Ex)
        {
            return false;
        }
    }

    public static bool SoketConnect(string ip, string port)
    {
        var is_success = false;
        try
        {
            var connsock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            connsock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.SendTimeout, 200);
            System.Threading.Thread.Sleep(500);
            var hip = IPAddress.Parse(ip);
            var ipep = new IPEndPoint(hip, int.Parse(port));
            connsock.Connect(ipep);
            if (connsock.Connected)
            {
                is_success = true;
            }
            connsock.Close();
        }
        catch (Exception)
        {
            is_success = false;
        }
        return is_success;
    }

    public static bool CheckProxy(string ip, string port)
    {
        try
        {
            WebClient WC = new WebClient();
            WC.Proxy = new WebProxy(ip, int.Parse(port));
            WC.DownloadString("http://SpecificWebSite.com");
            return true;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

但我认为我应该重写这些代码，因为它们非常慢。
我在这些方面有严重的延误：
`WC.DownloadString("http://SpecificWebSite.com");`
而且
`PingReply reply = ping.Send(ip, 2000);`
这对于一个大名单来说并不好。
我是按照正确的方向编写这些代码还是应该更改它们（哪些部分）？
我怎样才能优化它们？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:31:54.603

有很多事情可以改进。

*   半秒内不要让线程休眠。
*   放弃 ping 检查（因为代理可能位于防火墙后面并且不响应 ping 但仍在工作）
*   将 DownloadString 替换为仅获取 HEAD 的 HttpWebRequest。
*   将 HttpWebRequest 的超时设置为低于默认值（无需等待那么长时间。如果代理在 10-20 秒内没有响应，那么您可能不想使用它）。
*   将您的大列表拆分为较小的列表并同时处理它们。

仅这些就可以大大加快您的流程。

根据要求，这是一个如何使用 HttpWebRequests 的示例

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Proxy = null;   // set proxy here
request.Timeout = 10000; 
request.Method = "HEAD";

using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    Console.WriteLine(response.StatusCode);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T07:18:09.463

我可能会做这样的事情：

```
public static bool TestProxy(string ipAddress, int port, out string errorMsg, out double connectionSeconds) {
  Stopwatch stopWatch = new Stopwatch();
  errorMsg = "";
  connectionSeconds = -1;

  try {
    stopWatch.Start();
    var client = new RestClient("https://webapi.theproxisright.com/");
    client.Proxy = new WebProxy(ipAddress, port);

    var request = new RestRequest("api/ip", Method.GET);
    request.Timeout = 10000;
    request.RequestFormat = DataFormat.Json;

    var response = client.Execute(request);
    if (response.ErrorException != null) {
      throw response.ErrorException;
    }
    return (response.Content == ipAddress);
  } catch (Exception ex) {
    errorMsg = ex.Message;
    return false;
  } finally {
    stopWatch.Stop();
    connectionSeconds = stopWatch.Elapsed.TotalSeconds;
  }
} 
```

使用类似 WhatIsMyIP 的 REST 服务（我使用来自[https://TheProxIsRight.com](https://TheProxIsRight.com)的服务）。

然后如上所述，我可能会尝试将它与类似的东西并行化：

```
 Task.Factory.StartNew(() => {
    try {
      string errorMsg;
      double connectionTime;
      var success = TestProxy("1.2.3.4",3128, out errorMsg, out connectionTime);

      //Log Result
    } catch (Exception ex) {
      //Log Error
    }
  }); 
```

请注意，也可以使用上述站点上的 REST API 来查询工作代理： [https ://theproxisright.com/#apidemo](https://theproxisright.com/#apidemo)

（披露，我在上述网站工作）

# javascript - javascript for循环随机返回

> ID：12249707
> 
> 赞同：2
> 
> 时间：2012-09-03T14:23:57.933
> 
> 标签：javascript, random, for-loop, while-loop

我有这个小代码源

```
for (i = 0; i < elements.length; i++) {
     console.log(i);
     (function (i) {
         if (elements[i]["id"] == id) {
             index = i;
             console.log(i);
         }
     })(i);
}

console.log(index); 
```

我想找到一个数组的元素索引，其中 sub element "id" = id; 但它有时会返回 0 次 1 次。此代码位于类内部的函数中。我两次调用同一个函数，但在类外使用不同的参数，所以首先它必须显示 0 和 1，但有时它显示 1 和 0。你能帮我吗？我也尝试过这种方法，但它不起作用。

```
var i = 0;
while (i < elements.length) {
    console.log(elements[i]["id"]);
    if (elements[i]["id"] == id) {
        index = i;
        break;
    } else if (elements[i]["id"] != id) {
        i++;
    }
}

console.log(index); 
```

[**这是我的测试页面**](http://www.myserver.net63.net/)，如果您使用 Chrome 打开它（有时会发生，但在 Firefox 中通常会发生），您会看到有时会出现小图像，但有时会在按下按钮时消失。您还可以在“检查元素 -> 控制台”中看到控制台输出

**编辑**

我更改了我的代码以获得更好的调试（正如兰多建议的那样）：

```
for (i in elements){
    console.log("comparing elements['"+ i +"']['id']: "+ elements[i]["id"] +" with id:' "+ id + "'");
        if(elements[i]["id"] == id){
            index = i;
        }
    }

console.log(index); 
```

并得到控制台输出：

```
comparing elements['0']['id']: id2 with id:' id1' Slideshow.js:140
comparing elements['1']['id']: id1 with id:' id1' Slideshow.js:140
1 Slideshow.js:147
comparing elements['0']['id']: id2 with id:' id2' Slideshow.js:140
comparing elements['1']['id']: id1 with id:' id2' Slideshow.js:140
0 
```

什么时候应该：

```
comparing elements['0']['id']: id1 with id:' id1' Slideshow.js:140
comparing elements['1']['id']: id2 with id:' id1' Slideshow.js:140
0 Slideshow.js:147
comparing elements['0']['id']: id1 with id:' id2' Slideshow.js:140
comparing elements['1']['id']: id2 with id:' id2' Slideshow.js:140
1 
```

**编辑 2**

在看到输出后，事实证明数组“元素”中的对象改变了位置，变成了`elements[0]["id"]`它`"id2"`应该在的地方，`"id1"`我仍然不能明确地说为什么会发生这种情况或如何解决它。因此，如果您有任何想法，请分享。

[这是我的 JSfiddle 链接](http://jsfiddle.net/PxfM8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:55:48.133

我认为您必须将代码更改为此，没有内部函数（闭包）（第一个 console.log 将帮助您调试代码（或者您可以只使用 firebug 并在该行设置断点）

```
for (i in elements){
    console.log("comparing elements['"+ i +"']['id']: "+ elements[i]["id"] +" with id:'"+ id + "'");
    if(elements[i]["id"] == id){
        index = i;
        console.log(i);
    }
}

console.log(index); 
```

请记住，javascript 数组不一定是从零开始的，甚至不一定是顺序的，因此“for in”将帮助您避免可能的错误。我删除了关闭，因为在这种情况下我看不到你真的需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:55:36.010

我发现了问题所在。似乎有时会加载小图像，第一个如此大的图像出现在顶部。这都是关于图像加载的。无论如何感谢您的回答，大家帮我调试问题。

# c - 为什么我的代码显示分段错误.. 对于 n = 1000000000

> ID：12249708
> 
> 赞同：0
> 
> 时间：2012-09-03T14:23:58.370
> 
> 标签：c

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>

#define mod 1000000007

int main()
{

    unsigned long long int n,i,j,k;
    unsigned long long int *power = (unsigned long long int *)malloc(sizeof(unsigned long long int) * (1000000000LL));
    power[0] = 1;
    for(i = 1;i <= 1000000000LL;i++){
        power[i] = (power[i-1] * 2 ) % mod;
    }

    int t;
    scanf("%d",&t);
    while(t--){

        scanf("%lld",&n);
        unsigned long long int f = 2;
        for(i=2; i<=n;i++){
            f = (f + power[i/2]) % mod;
        }

        printf("%llu\n",f);

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:25:39.117

肯定`power[1000000000]`是越界了！您的数组没有那么多元素。你需要`<`，而不是`<=`在循环中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T14:25:10.587

您应该检查是否`malloc`正确分配`power`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T14:25:39.150

因为您没有测试[malloc](http://linux.die.net/man/3/malloc)的返回值。它通过给出 NULL 失败（例如，当内存不足时）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:26:50.240

这不是一个好主意

```
for(i = 1;i <= 1000000000LL;i++){ 
```

无论如何，索引都是从零开始的，但是您应该将 a 替换为`<=`a`<`以防止读取超出数组的末尾

还考虑到您尝试分配的数组的大小，您应该检查您的`power`指针是否有效。

# regex - 为什么行首是“^”，行尾是“$”？

> ID：12249711
> 
> 赞同：7
> 
> 时间：2012-09-03T14:24:06.480
> 
> 标签：regex, line-endings, mnemonics, end-of-line, start-of-line

我不记得是否`^`匹配行的开头并`$`匹配它的结尾或相反。一个好的助记符是`$`符号总是在价格之前，因此它与一行的开头相匹配 - 不幸的是它是相反的。

那么有什么理由选择这两个字符作为行首和行尾？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T14:34:39.570

一个助记符：在拍卖中，投标人首先举起`^`他们的桨。价格`$`在最后确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T20:50:03.167

$ 过去在非常早期的编辑器（如 ed）中表示行尾。选择 ^ 可能是因为它是当时键盘上最后一个未使用的字符:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:26:01.670

我记`^`为：它指向它来自哪里，即上一行，所以它应该站在开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T14:28:43.530

这可能是由于这两个字符在 QWERTY 键盘上的相对位置：“^”在第一个位置（行首）和“$”在（行尾）之后。

编辑：我的错，这仅在法语键盘（[AZERTY](http://en.wikipedia.org/wiki/AZERTY)）上有效。它为 AZERTY 用户提供助记符，但不提供解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T14:38:13.737

`\A`并且`\Z`大致相同，除了它们与`^`/`$`相对于换行符略有不同。

因此，如果您记得这一点并且还记得`^`看起来最相似`A`并且`$`最相似的`Z`那可能就足够了助记符。

# objective-c - 从给定的 URL 获取部分 URL

> ID：12249712
> 
> 赞同：-4
> 
> 时间：2012-09-03T14:24:13.207
> 
> 标签：objective-c, ios, nsurl

> **可能重复：**
> [提取部分 URL](https://stackoverflow.com/questions/3308681/extract-part-of-url)

如何从整个 url 字符串中获取部分 url？

给定网址的示例：

```
http://example@url.com:7006/imageID = 45254 
```

必填部分：

```
http://example@url.com:7006 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:30:13.723

请参阅“访问 URL 的部分”的[NSURL 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)部分。你可能想要类似`[-NSURL baseURL]`or的东西`[-NSURL pathComponents]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:39:32.770

这将适用于一般情况：

```
NSString* str = @"http://example@url.com:7006/imageID=45254";
NSURL* url = [NSURL URLWithString:str];    
NSString* aaa = [str stringByReplacingOccurrencesOfString:[url path] withString:@""]; 
```

# spring - Spring mvc 3：如何在拦截器中获取路径变量？

> ID：12249721
> 
> 赞同：32
> 
> 时间：2012-09-03T14:24:53.067
> 
> 标签：spring, interceptor, path-variables

在 Spring MVC 控制器中，我可以使用 @PathVariable 获取路径变量，以获取在 @RequestMapping 中定义的变量的值。如何在拦截器中获取变量的值？

非常感谢！

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2014-05-05T08:52:27.627

Pao 所链接的主题对我来说是一种享受

在 preHandle() 方法中，您可以通过运行以下代码来提取各种 PathVariables

```
Map pathVariables = (Map) request.getAttribute(HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-12-30T07:12:00.310

添加拦截器。

```
import org.springframework.lang.Nullable;
import org.springframework.stereotype.Component;
import org.springframework.web.servlet.HandlerMapping;
import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.util.Map;
import java.util.TreeMap;

@Component
public class MyHandlerInterceptor extends HandlerInterceptorAdapter {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        Map map = new TreeMap<>((Map<String, String>) request.getAttribute(HandlerMapping.URI_TEMPLATE_VARIABLES_ATTRIBUTE));
        Object myPathVariableValue = map.get("myPathVariableName");
        // some code around myPathVariableValue.
        return true;
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable Exception ex) throws Exception {
    }
} 
```

注册拦截器。

```
import com.intercept.MyHandlerInterceptor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
@ConditionalOnProperty(name = "mongodb.multitenant.enabled", havingValue = "false")
public class ResourceConfig implements WebMvcConfigurer {

    @Autowired
    MyHandlerInterceptor webServiceTenantInterceptor;

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(webServiceTenantInterceptor);
    }
} 
```

有了这个，您将能够通过您为所有请求的路径变量指定的名称读取@PathVariable。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-06T14:04:18.570

几乎为时已晚 1 年，但是：

```
 String[] requestMappingParams = ((HandlerMethod)handler).getMethodAnnotation(RequestMapping.class).params()

         for (String value : requestMappingParams) {... 
```

应该有帮助

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-03T15:44:18.083

Spring论坛中有一个[帖子](http://forum.springsource.org/showthread.php?124720-Obtaining-PathVariable-in-an-interceptor)，有人说，没有“简单的方法”，所以我想你必须解析URL才能得到它。

# android - 如何处理自定义列表视图项目点击？

> ID：12249722
> 
> 赞同：0
> 
> 时间：2012-09-03T14:24:55.483
> 
> 标签：android, listview

我有自定义列表视图项目点击的问题。

在我的活动中，我有一个按钮和一个自定义 ListView，这样在单击按钮时，复选框会出现在每个项目的左侧，再次单击按钮时，复选框会消失。默认情况下，单击项目时，它应该显示 Toast1，然后单击按钮（启用复选框时），它应该显示 Toast2。因此该按钮的作用类似于切换按钮。

所以我`ListView.onitemclickListener`在Activity中写了显示Toast1，`convertView.setOnClickListener`在getView中写了显示Toast2。

在 getView() 中，我写道：

```
if(myFlag)
{
  convertView.setOnClickListener ... 
  {
      display Toast2
  }
} 
```

这里 myFlag 将根据切换按钮设置为真/假。

但是当单击切换按钮并单击列表视图项后，有时它会显示 Toast1，有时会显示 Toast2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:51:56.540

我使用 setTag()/getTag() 方法来获取项目的位置。**在列表适配器的 getView() 方法中，使用setTag("position")**方法将项目的位置设置为行项目的标记（在您的情况下为按钮）。
当单击任何一行中的按钮时，将为该按钮调用 onClick() 方法，在 onClick() 方法中，您可以使用**getTag()**方法来获取位置。对所有行按钮使用与 onClick 例程相同的方法。

示例代码：列表项可能是这样的

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="117dp"
    android:background="@drawable/grad"
    android:onClick="onButtonClick" /> 
```

getView() 方法可能是这样的：

```
public View getView (int position, View convertView, ViewGroup parent) {
    ...
    ...
    button.setTag(position);
    ...
} 
```

onClick 例程可能是这样的：

```
public void onButtonClick(View v) {
    String tag = v.getTag().toString();
    if(tag != null) {
         int position = Integer.parseInt(tag);
    }
    ...
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:40:19.040

在运行时添加不同的 OnClickListener 可能会导致一些问题，特别是如果您将其绑定到 getView() 方法。

如果您使用单个 onClickListener 并在那里检查您的标志，它应该以您想要的方式工作。

伪代码：

```
 convertView.setOnClickListener ... 
  {
       if(myFlag){
       hide checkbox;
       display Toast2;
       myFlag =false;
     }
      else {
       show checkbox;
       display Toast 1;
       myFlag =true;
     }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T17:31:56.010

最后我自己解决了这个问题。只需在 getView() 方法中将 convertView 的 setclickable() 设置为 true/false。如果设置为真 Toast2 将显示（），如果设置为假 Toast1 将显示。

# c - C中的openssl，多次哈希

> ID：12249729
> 
> 赞同：1
> 
> 时间：2012-09-03T14:25:08.780
> 
> 标签：c, hash, openssl

```
int main()
{
 SHA256_CTX context;
 unsigned char md[SHA256_DIGEST_LENGTH];
 char *input = NULL;
 printf("What to hash: ");
 scanf("%m[^\n]%*c", &input);
 size_t length = strlen((const char*)input);
 int i, n=0;
 SHA256_Init(&context);
 SHA256_Update(&context, (unsigned char*)input, length);
 SHA256_Final(md, &context);
 goto NORMAL;
 MORE:
 n++;
 SHA256_Update(&context, md, sizeof(md));
 SHA256_Final(md, &context);
 NORMAL:
 for(i=0; i<SHA256_DIGEST_LENGTH; i++){
   printf("%02x", md[i]);
 }
 printf("\n");
 if(n==5){free(input);exit(0);}
 goto MORE;
 return 0;
} 
```

为什么这个*意大利面条代码*不能正确生成多个哈希（sha256）？
我的输出：

```
What to hash: paolo
254835d73cc88095a30fc74133beabe9d8463b2954493227b205ea326c8a9c86
f8c9fd41c9aea21015b375af8e30c55df62a74e750f6381c704579b326bff2cd
dbbae564faab81da846c904659e993542fbb20643f7e2f57cc62934dade3ed87
a07424dbf030c30b76eb6db0f32a4ed4af084b4d1523cc2cacefbd19a3d0525d
33041103d21220c8906a3cc0b6369ab38428a440aceb1c5cac963ec471ec1aac
d529745ec47c77aea87d6a5f63ea509223cbd756d77326f232b0cd1d14681e24 
```

预期输出（感谢在线 sha256 计算器）：

```
string: paolo
254835d73cc88095a30fc74133beabe9d8463b2954493227b205ea326c8a9c86
afbdc26d1e74bf1e9f68f154883e0bf5a1b9878c5c631e78126b07fa21b79ecd
739efedfc55930ef8cb0d9df487a50ab5b06b7f66594e82e437723df1e6184a1
008f3e3942bfb4289ad8fbbd081e981c4e32ec6508d43d8c3ae10d1b42e792d0
5ec489fc8b5345f43d821b8bac6851d61dc5f4f1fb825a5b74cc18e7bbc3e1b3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:32:26.827

当您开始第二个和后续哈希时，您会留下`SHA256_CTX`之前循环中的全部剩余垃圾。您需要`SHA256_Init`再次调用以重置它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:32:33.917

问题是您正在重新散列生成的散列的*二进制*（字节）表示，而不是它的十六进制表示。您必须在每次迭代后将其转换为十六进制（可能使用`sprintf()`或类似的）。

正如 David Schwartz 正确指出的那样，您还必须重新`Init()`哈希上下文以清除它并且不会在其中留下其他错误数据。

# c# - Visual Studio 2012 部分发布

> ID：12249730
> 
> 赞同：9
> 
> 时间：2012-09-03T14:25:10.073
> 
> 标签：c#, asp.net, ftp, visual-studio-2012, publish

当我使用 Visual Studio 2012 发布我的 ASP.NET (webforms) 网站时，总是上传所有文件。甚至图像？

有没有办法只发布更改的文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-24T10:09:41.990

仅供参考：微软在 VS 2012 Update #2 中添加了该功能：

[http://www.west-wind.com/weblog/posts/2013/May/10/Publish-Individual-Files-to-your-Server-in-Visual-Studio-20122](http://www.west-wind.com/weblog/posts/2013/May/10/Publish-Individual-Files-to-your-Server-in-Visual-Studio-20122)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:51:22.250

作为记录，VS2012 的发布配置文件中的“仅发布更改的文件”复选框已从 VS2012 的发布配置文件中删除。前进一步，后退两步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T14:26:52.677

不，Visual Studio 中的发布向导不提供此功能。

一个建议是在本地发布并且仅手动更新更改的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T16:19:32.273

使用 node->npm->gulp watch 来跟踪它们。这样，它仅在文件更改时上传，您根本不需要跟踪变更集。无论如何，这些天我们都应该使用 gulp。

不得不单独手动管理所有资产，或者被迫上传整个发布的包，这简直是疯了。我简直不敢相信 Visual Studio，即使是最新的 2015 版，也没有更好的东西。真的很伤心。

这是我的 gulp 脚本，它来自（我刚刚清理了它）：

*   [http://loige.co/gulp-and-ftp-update-a-website-on-the-fly/](http://loige.co/gulp-and-ftp-update-a-website-on-the-fly/)
*   [https://discourse.roots.io/t/issue-with-gulp-watch-on-files-modified-through-ftp-how-to-delay-task/3479](https://discourse.roots.io/t/issue-with-gulp-watch-on-files-modified-through-ftp-how-to-delay-task/3479)

`

```
var gulp  = require('gulp'),
gutil = require('gulp-util'),
vftp = require('vinyl-ftp');

var fconfig {
    host: "127.0.0.1",
    port: "21",
    user: "root",
    password: "top-secret-tacos",
    simultaneous_connections: 5,
    file_lock_delay: 450, // ms to wait for lock release. "meh".
    local_path: ".",
    remote_path: "/my_path/as_seen/in_ftp/",
    globs: {
        "/assets/src/**/*.*css",
        "/assets/src/**/*.js",
        "/assets/dist/**/*",
        "/**/*.ascx", // track .net changes and upload instantly when saved.
        // don't track visual studio stuff.
        "!./obj/**/*",
        "!./bin/**/*",
        "!./packages/",
        "!./App_LocalResources/**/*",
        "!./vs/**/*",
        "!./properties/**/*",
        "!./node_modules/**/*"
    }
};

    // Add debounce to gulp watch for FTP
(function ftp_debounce_fix(){

  var watch = gulp.watch;

  // Overwrite the local gulp.watch function
  gulp.watch = function(glob, opt, fn){
    var _this = this, _fn, timeout;

    // This is taken from the gulpjs file, but needed to
    // qualify the "fn" variable
    if ( typeof opt === 'function' || Array.isArray(opt) ) {
      fn = opt;
      opt = null;
    }

    // Make a copy of the callback function for reference
    _fn = fn;

    // Create a new delayed callback function
    fn = function(){

      if( timeout ){
        clearTimeout( timeout );
      }
      console.log("Delayed Task setup[450].");
      timeout = setTimeout( Array.isArray(_fn) ? function(){
        _this.start.call(_this, _fn);
      } : _fn, fconfig.file_lock_delay);

    };

    return watch.call( this, glob, opt, fn );
  };

})();

function getFtpConnection() {  
    return vftp.create({
        host: fconfig.host,
        port: fconfig.port,
        user: fconfig.user,
        password: fconfig.pass,
        parallel: fconfig.simultaneous_connections,
        log: gutil.log
    });
}
gulp.task('deploy', function() {
    var conn = getFtpConnection();
    return gulp.src(fconfig.globs, { base: fconfig.local_path, buffer: false })
        .pipe( conn.newer( fconfig.remote_root ) ) // only upload newer files 
        .pipe( conn.dest( fconfig.remote_root ) )
    ;
});
gulp.task('deploy-watch', function() {
    var conn = getFtpConnection();

    gulp.watch(fconfig.globs)
    .on('change', function(event) {
      console.log('Changes detected! Uploading file "' + event.path + '", ' + event.type);

      return gulp.src( [event.path], { base: fconfig.local_path, buffer: false } )
        .pipe( conn.newer( fconfig.remote_root ) ) // only upload newer files 
        .pipe( conn.dest( fconfig.remote_root ) )
      ;
    });
});` 
```

# c# - 尝试在 InstalledLocation StorageFolder 中创建文件异步时访问被拒绝？

> ID：12249734
> 
> 赞同：9
> 
> 时间：2012-09-03T14:25:19.970
> 
> 标签：c#, file-io, windows-8, microsoft-metro

我在 InstalledLocation StorageFolder 中尝试 CreateFileAsync 时访问被拒绝

```
StorageFolder storageFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
StorageFile file = await storageFolder.CreateFileAsync("fileNmae", Windows.Storage.CreationCollisionOption.ReplaceExisting); 
```

我也试过

```
var storageFolder = await StorageFolder.GetFolderFromPathAsync("ms-appx:///"); 
```

并得到“值不在预期范围内”

我可以绕过然后`CreateFileAsync`进入InstalledLocation StorageFolder吗？`Windows.Storage.ApplicationData.Current.LocalFolder``CopyAsync`

```
StorageFolder storageFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
StorageFile file = await storageFolder.CreateFileAsync("fileName", Windows.Storage.CreationCollisionOption.ReplaceExisting);

StorageFolder installedLocationFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
var result = await file.CopyAsync(installedLocationFolder, "fileName", Windows.Storage.NameCollisionOption.ReplaceExisting); 
```

但`CreateFileAsync`在 InstalledLocation StorageFolder 中拒绝访问？是因为安全原因还是我在这里编码错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T14:59:56.757

应用程序的安装目录是只读位置。此外，不建议您将数据文件写入安装位置。如果您需要存储仅供应用程序使用的数据，您应该使用

```
StorageFolder localFolder = ApplicationData.Current.LocalFolder; 
```

或者

```
Windows.Storage.StorageFolder temporaryFolder = ApplicationData.Current.TemporaryFolder; 
```

取决于数据的生命周期。

# javascript - 从 $(document).ready 外部调用 $(document).ready 中定义的函数

> ID：12249740
> 
> 赞同：0
> 
> 时间：2012-09-03T14:25:41.880
> 
> 标签：javascript, jquery, function-calls

我想在移动设备方向改变时使用 $(window).resize 调用某个函数，我在 $(document).ready 中编写了所有代码，这在我使用 Android 设备时有效，但在第一次定向后使用 iPhone检测到它不再调用 $(window).resize 。当我将 (window).resize 函数放在 $(document).ready 之外时，它也适用于 iPhone。

在这个 $(window).resize 函数中，我必须调用 $(document).ready 块中定义的方法，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:33:17.317

由于您需要使用来自两个不同事件处理程序的内容，您应该将其移出事件处理程序。您无法在任一事件处理程序中创建方法，因为您无法知道是否`ready`或`resize`将首先触发。

例如，您可以创建一个包含方法的对象：

```
var commonMethods = {
  data: 42,
  someMethod: function() { alert(this.data); }
};

$(document).ready(function(){
  commonMethods.someMethod();
});

$(window).resize(function(){
  commonMethods.someMethod();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:36:40.777

`$(document).ready()`在块外定义您的方法。
然后只在整个代码中需要它们时调用它们。这样，您就可以从`$(document).ready()`和`$(window).resize()`块访问它们。

# regex - 为什么这个 URL 匹配的正则表达式会在等号处中断？

> ID：12249743
> 
> 赞同：0
> 
> 时间：2012-09-03T14:25:55.390
> 
> 标签：regex

我们应用程序中的一个模块检查用户为 URL 编写的状态更新，以便从 embed.ly 获得预览。在共享以下链接之前，一切似乎都运行良好：

[http://sic.sapo.pt/proj_queridajulia/Scripts/VideoPlayer.aspx?videoId=](http://sic.sapo.pt/proj_queridajulia/Scripts/VideoPlayer.aspx?videoId=) {C1BB1496-A37B-44B7-825C-78A9A0A0B9AE}

我复制了我们的正则表达式（不是我写的）和链接到[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)显然正则表达式只匹配等号。正则表达式是：

```
(^|[ \t\r\n])((ftp|http|https|gopher|mailto|news|nntp|telnet|wais|file|prospero|aim|webcal):(([A-Za-z0-9$_.+!*(),;/?:@&~=-])|%[A-Fa-f0-9]{2}){2,}(#([a-zA-Z0-9][a-zA-Z0-9$_.+!*(),;/?:@&~=%-]*))?([A-Za-z0-9$_+!*();/?:~-])) 
```

有人可以帮助我并指出错误所在，或者推荐另一个，最好是防弹的 URL 匹配正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:53:40.467

好的，我只是尝试了一下并让它工作。我在似乎是允许的字符组中添加了花括号。最终的正则表达式变成了这样：

(^|[ \t\r\n])((ftp|http|https|gopher|mailto|news|nntp|telnet|wais|file|prospero|aim|w‌​ebcal):(([A-Za- z0-9$_.+!*(){},;/?:@&~=-])|%[A-Fa-f0-9]{2}){2,}(#([a- zA-Z0-9][a-zA‌​-Z0-9$ *.+!(){},;/?:@&~=%-]))?([A-Za-z0-9$* +! *(){};/?:~-]))

我仍然不知道正则表达式的哪一部分负责什么。：/因此，如果有人想指出，我将不胜感激。

# php - 使用 PHP 中的 exec 函数发布和检索参数

> ID：12249752
> 
> 赞同：0
> 
> 时间：2012-09-03T14:26:18.620
> 
> 标签：php

我一直在做很多研究，但我还没有找到一个明确而简单的答案来解决我的问题。

我只想使用变量在另一个 php 脚本（这意味着使用 exec 函数）中执行几个 php 脚本。

我特别想使用 exec 命令的原因是我必须并行运行脚本。

即我有两个 php 脚本：`a.php`和`b.php`，我想做类似的事情

`a.php`

```
exec (/usr/bin/php b.php -variable = foo) 
```

`b.php`

```
echo foo. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:30:17.413

你说 ：

> 我只想在另一个 php 脚本中执行一个 php 脚本（这意味着使用 exec 函数）

阅读[包含](http://php.net/manual/fr/function.include.php)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:31:55.720

如果您想做类似的事情，使用 include 仍然是干净的解决方案

一个.php

```
exec (php b.php -v=foo) 
```

b.php

```
$arguments = getopt("v");
print_r($arguments); 
```

getopt[手册](http://php.net/manual/en/function.getopt.php)

# listbox - 通过从另一个列表框中选择项目来显示隐藏的文本框/列表框

> ID：12249754
> 
> 赞同：0
> 
> 时间：2012-09-03T14:26:20.380
> 
> 标签：listbox, hidden

我是 C#/.net 编程的新手，正在创建一个示例网站。我需要通过从另一个列表框中选择项目来显示隐藏文本框/列表框的代码。我尝试了不正确的代码，

```
 protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        ListBox1.Items.Add("Sales");
        ListBox1.Items.Add("Inventory");
        ListBox1.Items.Add("Employee");
        ListBox1.Items.Add("Cash Drop");
        TextBox1.Visible = false;
        if (ListBox1.SelectedItem.value == "Sales" )
        {
            TextBox1.Visible = true;  
        }    

     } 
```

任何人都可以帮助我吗！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:41:57.400

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            TextBox1.Visible = false;
            ListBox1.Items.Clear();
            ListBox1.Items.Add("Sales");
            ListBox1.Items.Add("Inventory");
            ListBox1.Items.Add("Employee");
            ListBox1.Items.Add("Cash Drop");
        }
    }
    protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (ListBox1.SelectedItem.Text == "Sales")
        {
            TextBox1.Visible = true; 
        }    
    } 
```

并且不要忘记上交`AutoPostBack="true"`您的 Listbox ：

```
<asp:ListBox ID="ListBox1" AutoPostBack="true"></asp:ListBox> 
```

# xamarin.ios - MvvmCross：与 MonoTouch.Dialog 的双向绑定

> ID：12249758
> 
> 赞同：1
> 
> 时间：2012-09-03T14:26:41.677
> 
> 标签：xamarin.ios, monotouch.dialog, mvvmcross

可以在此处找到此问题的完整来源：[https ://github.com/Cheesebaron/MvvmCross.SettingsSample](https://github.com/Cheesebaron/MvvmCross.SettingsSample)

我主要关心的是 SettingsView，我尝试绑定一些简单的 BooleanElements：

```
this.Root = new RootElement("Settings")
            {
                new Section("Test", string.Format("Choose to see your own location on the map.{0}Choose to allow shake gestures.{0}Choose whether you want to receive notifications.", Environment.NewLine))
                {
                    new BooleanElement("Show my location", ViewModel.ShowMyLocation).Bind(this, "{'Value':{'Path':'ShowMyLocation','Mode':'TwoWay'}}"),
                    new BooleanElement("Shake gestures", ViewModel.ShakeGestures).Bind(this, "{'Value':{'Path':'ShakeGestures','Mode':'TwoWay'}}"),
                    new BooleanElement("Notifications", ViewModel.Notifications).Bind(this, "{'Value':{'Path':'Notifications','Mode':'TwoWay'}}"),
                },
            }; 
```

我的问题在于绑定似乎只能以一种方式工作，即使我明确指定它是`TwoWay`. 这两种方式绑定似乎在 WP7 和 Android 上运行良好，所以我知道视图模型没问题。但是要么我缺少一些用于双向绑定的代码，要么框架中有错误或缺失。

`CheckboxElement`如果我尝试使用其他类型的元素，例如or ，也会出现此问题`StyledStringElement`。还有我自己制作的元素...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:48:54.230

根据上面的评论，感觉这是几个单独的问题：

*   BooleanElement 未正确链接到[MvxTouchDialogBindingSetup.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Dialog/MvxTouchDialogBindingSetup.cs) - 我希望现在已修复此问题 - 请参阅此提交 - [https://github.com/slodge/MvvmCross/commit/38e5f08acaffa6ac76d060d104f841f2765d234c](https://github.com/slodge/MvvmCross/commit/38e5f08acaffa6ac76d060d104f841f2765d234c) - 使用您的测试项目进行测试

*   StyledStringElement 可能只需要一个“踢”来强制它重绘 - 所以我们可能需要调用`cell.SetNeedsDisplay()`- 也许还有`cell.Backbground.SetNeedsDisplay()`- 我目前没有测试用例。

*   您的新单元格可能需要使用 Setup.cs 中的新绑定条目进行链接

感谢您报告这些问题 - 并跟进测试用例。我将看看我是否可以解决如何在 mvx 存储库中包含一些更正式的测试用例。

* * *

作为未来的工作项目，我也很想形式化`Value`和`ValueChanged`关系 - 我认为可以提供一个通用规则，以便所有具有 Value 和 ValueChanged 的​​元素都支持数据绑定 - 作为问题添加[https://github.com/slodge /MvvmCross/issues/26](https://github.com/slodge/MvvmCross/issues/26)。

# c# - 使用单个复选框动态禁用一堆文本框

> ID：12249767
> 
> 赞同：1
> 
> 时间：2012-09-03T14:27:15.200
> 
> 标签：c#, wpf, xaml

主窗口.xaml

```
<CheckBox Content="Enable" Height="16" HorizontalAlignment="Left" Margin="190,40,0,0" Name="checkBox_Enable" VerticalAlignment="Top" IsChecked="True" Unchecked="checkBox_Enable_Unchecked" Checked="checkBox_Enable_Checked" />
    <Label Content="Fullscreen:" Height="15" HorizontalAlignment="Left" Margin="227,63,0,0" Name="label3" VerticalAlignment="Top" Width="56" Padding="1" />
    <TextBox HorizontalAlignment="Right" Margin="0,86,243,0" Name="textBox_Hotkey_Fullscreen" Width="33" Height="18" VerticalAlignment="Top" />
    <Label Content="Custom field:" HorizontalAlignment="Left" Margin="227,110,0,136" Name="label5" Padding="1" />
    <TextBox Height="18" HorizontalAlignment="Left" Margin="227,131,0,0" Name="textBox_Hotkey_Customfield" VerticalAlignment="Top" Width="33" />
    <Label Content="Window-related:" HorizontalAlignment="Left" Margin="227,155,0,87" Name="label4" Padding="1" />
    <TextBox HorizontalAlignment="Left" Margin="227,0,0,112" Name="textBox_Hotkey_Windowrelated" Width="33" Height="18" VerticalAlignment="Bottom"  /> 
```

主窗口.xaml.cs

```
 private void checkBox_Enable_Unchecked(object sender, RoutedEventArgs e)
    {
        textBox_Hotkey_Fullscreen.IsEnabled = false;
        textBox_Hotkey_Customfield.IsEnabled = false;
        textBox_Hotkey_Windowrelated.IsEnabled = false;
    }

    //There are no problems after purging this function. However, the controls couldn't be "re-enabled", what obviously makes my concept pointless.  
    private void checkBox_Enable_Checked(object sender, RoutedEventArgs e)
    {

        textBox_Hotkey_Fullscreen.IsEnabled = true; 
        textBox_Hotkey_Customfield.IsEnabled = true;
        textBox_Hotkey_Windowrelated.IsEnabled = true;
    } 
```

为什么它在启动后立即抛出 NullReferenceException？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T14:41:05.720

我建议使用 Binding like（从 xaml 中删除事件处理程序）

```
 IsEnabled="{Binding ElementName=checkBox_Enable, Path=IsChecked}" 
```

对于您要使用复选框启用/禁用的每个控件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T14:35:42.043

> 为什么它在启动后立即抛出 NullReferenceException？

因为在`CheckBox`触发事件时并非所有控件都已加载。

* * *

我建议将[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)到`CheckBox`bool 并将其他控件`IsEnabled`绑定到那个（或[直接](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname.aspx)绑定到`CheckBox`）。

# php - 从访问控制列表中排除公共页面

> ID：12249769
> 
> 赞同：5
> 
> 时间：2012-09-03T14:27:16.970
> 
> 标签：php, symfony, acl

我在 Symfony2 中有两个角色的应用程序：ROLE_ADMIN 和 ROLE_PARTNER。我也有一些公共页面。所有公共页面都以 URL“/public/”开头。我想保护所有应用程序排除这些公共项目。

我目前的配置：

```
access_control:
    - { path: /.*, role: ROLE_PARTNER|ROLE_ADMIN }
    - { path: /public/.*, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

但它工作错误（循环重定向）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T14:32:25.267

更改顺序：

```
access_control:
    - { path: ^/public/, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, role: ROLE_PARTNER|ROLE_ADMIN } 
```

第二种选择是完全关闭公共部分的安全性：

```
firewalls:
    public:
        pattern: ^/public/
        security: false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:29:54.113

添加：

```
- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

[请参阅http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)中的“常见陷阱”

# api - 来自数据库表的 REST 资源

> ID：12249770
> 
> 赞同：2
> 
> 时间：2012-09-03T14:27:20.683
> 
> 标签：api, rest, asp.net-web-api

来自数据库表的 REST 资源

我最近学习了一些关于 REST 的东西（其中很多我部分理解）。我还做了一些简单的演示，它们不是很安静，但至少我尝试过一些 REST。但是当谈到从头开始开发一些现实世界的应用程序时，我一无所知。

我的问题是

我完全不知道，什么时候给了一堆桌子

1.  如何从它们中开始设计uris？
2.  如何决定什么是资源......？
3.  每张桌子都可以成为资源吗...？
4.  如何处理这些表之间的一对多、多对多关系..？

上面所有的问题都让我感到困惑。基本上当一堆桌子被扔到你面前进行 REST uri 设计时，从哪里开始 uri 设计！我知道 URI 设计并不是使它成为 REST API 的唯一部分，但它仍然很重要。

这个问题是我之前在 SO
[如何根据一些表格以宁静的方式决定资源的问题的延续](https://stackoverflow.com/questions/12141237/how-to-decide-a-resource-in-a-restful-way-based-on-some-tables)

请不要说没有这样的规定标准。应该有一个：| . **我只要求一种方法..只是一些从 db 表中设计 uri 的方向**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:26:49.723

阅读[REST 简介](http://www.infoq.com/articles/rest-introduction)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T14:58:18.210

[这](http://rest.elkstein.org/)是一个很棒的 REST 教程。它具有 REST 架构设计和许多示例。

# mod-rewrite - 不访问通配符子域文件夹

> ID：12249773
> 
> 赞同：0
> 
> 时间：2012-09-03T14:27:39.493
> 
> 标签：mod-rewrite, subdomain, wildcard, http-host

当我尝试加载通配符子域时，它正确指向我在根域 .htaccess 文件中提到的索引文件，如下所示

RewriteCond %{HTTP_HOST} ^(^. ).mydomain.com *RewriteRule (.* ) /mydomainfolder/index.php?username=%1

调用 url uswhat.mysomain.com > 它正确加载 mydomainfolder/index.php

但我需要加载通配符子域的子文件夹，如下所示

what.mysomain.com/myproject 通过调用我要加载的 mydomainfolder/myproject/index.php

但它仍然通过调用上面的方法加载 mydomainfolder/index.php。如何解决？它是一个带有共享主机的 Godaddy 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:22:49.040

Go Daddy 共享主机不支持通配符设置通配符子域。但是，如果您的共享主机帐户上有一个专用 IP，并且该域是该帐户的主域，那么您可以为指向您的共享主机帐户的专用 IP 地址的域添加通配符 DNS 记录。

# java - JTree 更新节点而不折叠

> ID：12249777
> 
> 赞同：12
> 
> 时间：2012-09-03T14:27:48.960
> 
> 标签：java, swing, jtree, defaulttablemodel

我有一个需要`JTree`更新节点的 Java SE 7 应用程序。从 Oracle 使用这个[线程](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)给出的教程中，没有给出关于如何更新代码上的标签（树上节点的显示文本）的提示。目前我正在`DefaultTreeModel`用作我的模型`JTree`和`DefaultMutableTreeNode`所述树的节点。

为了进一步详细了解我正在开发的应用程序，我正在开发一个聊天工具，其中显示每个帐户的联系人及其可用性状态（无论是在线、离线等）。

问题是，如何更新特定节点的显示文本而不（最多）将其从其父节点中删除并将其添加到其指定索引中。像一个`DefaultMutableTreeNode.setText("<new label>")`？

* * *

更新：2013 年 1 月 20 日

重新定义问题以进行澄清。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T19:13:38.343

也许如果你使用'nodeChanged()' 而不是'reload()' 你会得到你想要的效果。

DefaultTreeModel 类中有很多方法会导致树的各个部分被更改和重绘。DefaultTreeModel 上还有其他方法只会导致重绘发生。

您提到了“重新加载（节点）”并评论说当您调用它时它会导致树崩溃。'reload' 导致整个子树从该节点开始完全重绘。（但如果该节点不可见，则不会发生任何变化。）这称为“结构变化”。

'insertNodeInto()' 和 'removeNodeFromParent()' 通过添加或删除节点然后重绘来修改树结构。

我认为 'nodeChanged()' 是您需要的，因为它只是通知模型节点中的某些更改将导致它以不同的方式显示。也许可显示的文本现在与以前不同了。也许您更改了节点中的用户对象。那是您在节点上调用“nodeChanged()”的时候。

您应该在您自己的崩溃代码和提供的示例程序 vels4j 中尝试使用“nodeChanged()”来代替“reload()”调用。这可能会解决问题。

请注意，DefaultTreeModel 上还有另外两个用于其他情况的方法系列：

这些方法与树节点一起工作，并使用树路径来定义更改发生的位置。它们不会更改树下的数据结构，而是通知模型发生了某些更改，以便它可以通知实际重绘事物或以其他方式响应更改的侦听器。

`nodesWereInserted()` `nodesWereRemovde()` `nodesChanged()` `nodeStructureChanged()`

还有一组`fire...()`在 DefaultTreeModel 内部使用的方法以及您可以创建的任何子类。他们只是通知任何听众发生了一些变化。请注意，它们受到保护。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-20T10:58:09.877

愿这个简单且可执行的程序帮助您解决问题。

```
public class JTreeDemo  extends JPanel
    implements Runnable {

private JTree tree;
private DefaultTreeModel treeModel ;
private Random rnd = new Random();
private List<User> userList;
public JTreeDemo() {
    super( );

    //Create the nodes.
    DefaultMutableTreeNode top =
        new DefaultMutableTreeNode("Users");
    treeModel = new DefaultTreeModel(top);
    createNodes(top);

    //Create a tree that allows one selection at a time.
    tree = new JTree(treeModel);
    tree.getSelectionModel().setSelectionMode
            (TreeSelectionModel.SINGLE_TREE_SELECTION);

    //Create the scroll pane and add the tree to it. 
    JScrollPane treeView = new JScrollPane(tree);

    //Add the split pane to this panel.
    add(treeView);
}

public String getRandomStatus() {
    int nextInt = rnd.nextInt(100);
    if( nextInt%2==0) {
        return "Online";
    } else {
        return "Offline";
    }
}
@Override
public void run() {
     while(true) {
        try {   
          Thread.sleep(1000);
          int nextInt = rnd.nextInt(10);
          User user = userList.get(nextInt);
          user.setStatus(getRandomStatus());
          treeModel.nodeChanged(user);
        } catch (InterruptedException ex) {
            // handle it if necessary
        }
     }
}

private class User extends DefaultMutableTreeNode {
    public String userName;
    public String status;

    public User(String name) {
        userName = name;

    }

    public void setStatus(String status) {
        this.status = status;
    }

    public String getStatus() {
        return status;
    }

    @Override
    public String toString() {
        String color = status.equals("Online") ? "Green" : "Red";
        return "<html><b color='"+color+"'>"+
                userName +"-"+status +"</b></html>";
    }

}

private void createNodes(DefaultMutableTreeNode top) {
    userList = new ArrayList() ;
    for(int i=0;i<10;i++) {
        User u1 = new User("User " + (i+1));
        u1.setStatus("Online");
         top.add(u1);
         userList.add(u1);
    }
}

private static void createAndShowGUI() {

    JFrame frame = new JFrame("TreeDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //Add content to the window.
    JTreeDemo jTreeDemo = new JTreeDemo();
    frame.add(jTreeDemo);
    frame.pack();
    frame.setVisible(true);
    // update status randomly
    Thread thread = new Thread(jTreeDemo);
    thread.start();
}

 public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
 }
} 
```

我添加了一个线程来随机更新状态，希望您可以根据需要进行修改。

**输出 ：**
![在此处输入图像描述](../Images/2af7f0bf5c15cbb977f8f5fb64ffecad.png)

**编辑：**
1.根据建议，我删除`reload(node)`并添加了树模型重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T18:58:49.320

如果节点包含在树中唯一的对象并已实现方法`equals`和`hashCode`（例如，您显示字符串或数据库中具有唯一 ID 的对象），则很容易。首先，您遍历所有展开的节点，并将节点中的对象保存在集合中。然后您执行模型的更新。更新后迭代所有节点，如果它们在集合中，则展开树中的节点。
如果节点不是唯一的 - 您需要在集合中保存完整的树路径（例如作为列表）并在更新后检查它以展开节点。
如果对象既没有`equals`也没有`hashCode`（这两种方法都必须实现） - 不能使用此变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T17:54:10.560

只是为了记录（我投票给 Lee Meador），[DefaultTreeModel#nodeChanged(javax.swing.tree.TreeNode)](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeModel.html#nodeChanged%28javax.swing.tree.TreeNode%29) 是要走的路：

```
public class TestFrame extends JFrame {

    public TestFrame() {
        //create gui with simple jtree (and DefaultTreeModel)
        JButton changeBtn = new JButton();
        final JTree jTree = new JTree();
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        changeBtn.setText("update selected node");
        getContentPane().add(changeBtn, java.awt.BorderLayout.PAGE_END);
        DefaultMutableTreeNode treeNode1 = new DefaultMutableTreeNode("root");
        DefaultMutableTreeNode treeNode2 = new DefaultMutableTreeNode("blue");
        treeNode1.add(treeNode2);
        treeNode2 = new DefaultMutableTreeNode("violet");
        DefaultMutableTreeNode treeNode3 = new DefaultMutableTreeNode("red");
        treeNode2.add(treeNode3);
        treeNode3 = new DefaultMutableTreeNode("yellow");
        treeNode2.add(treeNode3);
        treeNode1.add(treeNode2);
        jTree.setModel(new DefaultTreeModel(treeNode1));
        getContentPane().add(jTree, BorderLayout.CENTER);
        pack();
        //add listener to button, to change selected node on button click
        changeBtn.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                DefaultMutableTreeNode dmt = (DefaultMutableTreeNode)jTree.getSelectionPath().getLastPathComponent();
                //update content/representation of selected node
                dmt.setUserObject("My update: " + new Date());
                //nodeChanged
                ((DefaultTreeModel) jTree.getModel()).nodeChanged(dmt);
            }
        });
    }

    public static void main(String args[]) {

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TestFrame().setVisible(true);
            }
        });
    }
} 
```

# java - 如何在 Java 中实现“数据流”——数据库交互？

> ID：12249778
> 
> 赞同：2
> 
> 时间：2012-09-03T14:28:00.290
> 
> 标签：java, database

语境：

1.  我有一个基于 Java 的应用程序，比如说 AppA
2.  它查询数据库，比方说 DataD
3.  它适用于该数据，发挥一些作用并将其传递给另一个应用程序，例如 AppB

问题：

1.  DataD中的数据量非常大。
2.  我的 AppA 并没有真正具备一次性处理所有数据的能力。
3.  我的 AppB 对一次性获取所有数据也不是很感兴趣。

解决方案：

1.  我想从 DataD 查询数据，但一次只能以 10,000 个（可配置）的形式查询。
2.  我将在 AppA 中处理该批次，将其传递给 AppB，然后在 DataD 上执行另一个查询。
3.  我将不得不告诉 DataD，我已经阅读了多少条记录，并要求它提供接下来的 10,000 条记录。所以不知何故，我的 AppA 需要跟踪最后读取的数字，并有一种巧妙的方式有效地查询 DataD 以获取一系列数据。
4.  我的 DataD 没有任何方法来记录它已经发回的内容（或维护标志）。它是一个数据库，也不可能在其上添加任何 SOA / REST 智能。因此，我的 AppA 必须足够智能才能查询特定范围。

问题：

1.  无需在核心 java 中使用太多杂耍，是否有可能使用任何框架来实现这一点 - 我喜欢称之为 - “数据流”？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:31:23.910

这听起来有点复杂，我建议你尽量让它尽可能简单。

我会让 AppA 执行查询并在获取每一行时对其进行处理，并将派生数据写入 AppB 正在侦听的 Socket。除非您知道这会导致性能问题，否则我不会让它变得更复杂。

# c# - IDataErrorInfo 错误消息触发，但未显示任何消息

> ID：12249782
> 
> 赞同：2
> 
> 时间：2012-09-03T14:28:40.287
> 
> 标签：c#, silverlight, xaml, mvvm, idataerrorinfo

各位程序员好。我在使用 IDataErrorInfo 的 Silverlight MVVM 模式上遇到了这个奇怪的问题。这是我在 StackOverflow 中提出的第一个问题，所以我希望我能够正确解释它。这是交易：

我有这个巨大的 Job Register ChildWindow，它有一些控件，只有在选中了一个名为 HasPrevision 的复选框时才应该启用这些控件。这个想法是：如果作业有一个Prevision，那么所有与prevision相关的控件都被启用，否则，它们被禁用。现在，如果有预置，用户必须在 PrevisionType ComboBox 中选择预置类型。因此，如果选中 HasPrevision 复选框，则必须选中 PrevisionType，但如果未选中 HasPrevision 复选框，则可以不选中 PrevisionType 组合框。

以下是这些控件的 XAML（我不会在此处显示所有 xaml，因为它相当大，但我相信只需显示这些行就可以解决问题）：

* * *

```
<!-- The HasPrevision CheckBox -->
<CheckBox Grid.Column="1"
  Grid.Row="3"
  x:Name="cbxHasPrevision"
  IsChecked="{Binding SelectedJob.HasPrevision, Mode=TwoWay}"
  Margin="0,20,2,0" />

<!-- The PrevisionType ComboBox -->
<telerik:RadComboBox Grid.Column="1"
  Grid.Row="4"
  x:Name="cmbPrevisionType"
  IsEnabled="{Binding HasPrevision, Converter={StaticResource ControlesCadastroProcessoConverter}, ConverterParameter=IsEnabled}"
  ItemsSource="{Binding PrevisionTypeList, Mode=OneWay}"                             
  SelectedItem="{Binding SelectedJob.PrevisionType , Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True, ValidatesOnExceptions=True, ValidatesOnNotifyDataErrors=True}"
  Margin="0,4,48,4"
  Height="22"
  DisplayMemberPath="DsPrevisionType"/> 
```

* * *

因此，如您所见，HasPrevision 和 PrevisionType 属性绑定到我的 ViewModel 中名为 SelectedJob 的属性。SelectedJob 是一个 Job 对象。我要做的就是在我的 Job Class 中使用 IDataErrorInfo 接口来识别是否选择了 PrevisionType。现在，如果 HasPrevision 属性为“true”，我只能要求 PrevisionType，因此我的作业类具有 IDataErrorInfo 的以下代码：

* * *

```
public string this[string columnName]
    {
        get
        {
            switch (columnName)
            {
                case "PrevisionType":                      
                    if (HasPrevision && (PrevisionType== null))
                        return "Select a PrevisionType";
                    break;
            }
            return null;
        } 
```

## }

这对我来说听起来很合乎逻辑。当我调试代码时，它实际上可以工作：开关识别列名，它输入大小写“PrevisionType”，它实际上在返回错误消息的 If 语句中运行返回代码，而不是默认的“return null”子句。但是错误消息不显示错误！更糟糕的是：组合框不会自动验证事件。单击“保存”按钮时，我会检查错误并将 PrevisionType 组合框设置为 InvalidFocused 状态。组合框周围有红色边框，表示它处于错误状态，但错误消息为空白。当我将鼠标悬停在控件上时，会出现一个空的红色小框，上面什么都没有。

更奇怪的是：如果我从 IF 语句中删除“HasPrevision”检查，将代码保留如下，则会显示消息并自动验证控件！！！

* * *

```
public string this[string columnName]
    {
        get
        {
            switch (columnName)
            {
                case "PrevisionType":                      
                    if (PrevisionType== null)
                        return "Select a PrevisionType";
                    break;
            }
            return null;
        }
    } 
```

* * *

我能想到的一切是，因为我试图根据另一个属性值验证一个属性，所以在 set 和 get 的中间某个地方，Silverlight 环境变得“混乱”？我不知道，我已经尝试了 2 天来解决这个问题，但没有成功。以下是我认为相关的其他一些代码。

我的工作类中的属性：

* * *

```
 private bool _HasPrevision;
    [DataMember]
    public bool HasPrevision
    {
        get { return _HasPrevision; }
        set
        {
            _HasPrevision= value;
            RaisePropertyChanged("HasPrevision");
        }
    }

    private PrevisionType.PrevisionType _PrevisionType { get; set; }
    [DataMember]
    public PrevisionType.PrevisionType PrevisionType
    {
        get { return _PrevisionType; }
        set
        {
            _PrevisionType = value;
            RaisePropertyChanged("PrevisionType");
        }
    } 
```

* * *

我的 ViewModel 中的 SelectedJob 属性是：

* * *

```
public const string SelectedJobPropertyName = "SelectedJob";
    private Objects.Register.Job.Job _SelectedJob = null;
    public Objects.Register.Job.Job SelectedJob
    {
        get
        {
            return _SelectedJob;
        }

        set
        {
            if (_SelectedJob == value)
                return;

            var oldValue = _SelectedJob;
            _SelectedJob = value;
            RaisePropertyChanged(SelectedJobPropertyName , oldValue, value, true);
        }
    } 
```

* * *

我的保存按钮代码是：

* * *

```
[...]

if(SelectedJob["PrevisionType"] != null)
{
    VisualStateManager.GoToState(cmbPrevisionTypeControl, "InvalidFocused", true);
    return;
}

[...] 
```

* * *

在此先感谢，如果我在解释这一点时有点困惑，我很抱歉。

编辑1：我已经在这里阅读了这些问题，但它们对我的帮助不大：

[IDataErrorInfo - 即使收到一条错误消息，也看不到任何错误消息](https://stackoverflow.com/questions/5788287/idataerrorinfo-not-seeing-any-error-message-even-though-one-gets-picked-up)

[Silverlight IDataErrorInfo 消息未显示在自定义控件的文本框中](https://stackoverflow.com/questions/5183249/silverlight-idataerrorinfo-message-does-not-show-in-custom-controls-textbox)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:11:52.833

我以类似的方式使用 Telerik RadComboBox，并且在显示错误消息时没有问题。这是我的 XAML 供您参考，希望对您有所帮助...

```
 <TextBlock Text="Select a User to Assign the Current Step To:" Grid.Row="3" Visibility="{Binding ShowAssigneeUser}"/>
            <telerik:RadComboBox x:Name="cmbAllActiveCrmUsers" 
                                 IsEditable="True" 
                                 Grid.Row="4"                   
                                 telerik:TextSearch.TextPath="FullName" 
                                 Text="{Binding FullName, Mode=TwoWay, ValidatesOnDataErrors=True, NotifyOnValidationError=True}"
                                 VerticalAlignment="Center"
                                 Visibility="{Binding ShowAssigneeUser}"
                                 ItemsSource="{Binding AllActiveCrmUsersExceptCurrentUser}" 
                                 SelectedIndex="{Binding DefaultAssigneeUserIndex, Mode=TwoWay}"
                                 ItemTemplate="{StaticResource ComboBoxMultilineTemplate}" 
                                 Style="{StaticResource ComboBoxStyle}"
                                 Command="{Binding AssignUserChangeCommand}"
                                 CommandParameter="{Binding SelectedIndex, ElementName=cmbAllActiveCrmUsers}"
                                  >
                <telerik:RadComboBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel />
                    </ItemsPanelTemplate>
                </telerik:RadComboBox.ItemsPanel>
            </telerik:RadComboBox> 
```

# jquery - jQuery 循环遍历 HTML5 数据属性

> ID：12249788
> 
> 赞同：5
> 
> 时间：2012-09-03T14:29:24.247
> 
> 标签：jquery, arrays, custom-data-attribute

> **可能重复：**
> [使用 javascript / jQuery 获取 data-* 属性列表](https://stackoverflow.com/questions/4187032/get-list-of-data-attributes-using-javascript-jquery)

我有一系列看起来都与此类似的对象：

```
<a data-type="file" data-path="/some/path" data-size="849858">Link</a> 
```

我想创建一个函数来动态提取每个数据属性，所以如果我添加类似“data-icon”或任何其他数量的属性，该函数仍会返回一个包含所有数据属性的数组，例如：

```
{
    "type" : "file",
    "path" : "/some/path",
    ...
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T14:59:18.737

**编辑**最初建议的答案是如果你想要 JSON 字符串/对象，我是根据你在问题中的输出字符串推断出来的。如果您只想获取键/值对，您可以简单地迭代数据属性集合。

**[现场演示](http://jsfiddle.net/LCM8S/57/)**

```
$.each($('a').data(), function(i, v) {
    alert('"' + i + '":"' + v + '",');
}); 
```

**最初建议的答案是假设您想要 JSON 字符串/对象**

您可以通过迭代数据属性集合来制作数据属性的键值对对象（json对象），使用`data()`它将给出数据属性的集合。生成 json 字符串后，我们可以使用 $.parseJSON 生成 JSON 对象，并使用循环从中获取键/值对。

**[现场演示](http://jsfiddle.net/rajaadil/LCM8S/36/)**

```
strJson = "{"
$.each($('a').data(), function(i, v) {
    strJson += '"' + i + '":"' + v + '",';
});
strJson = strJson.substring(0, strJson.length - 1);
strJson += '}';
var jsonObject = $.parseJSON( strJson );
for (var key in jsonObject) 
    alert(key + " : " + jsonObject[key]); 
```

# c# - 没有回发的中继器、链接按钮和 ModalPopupExtender

> ID：12249796
> 
> 赞同：1
> 
> 时间：2012-09-03T14:30:01.017
> 
> 标签：c#, asp.net, ajax, repeater

这是我的问题。

我有一个中继器。里面有很多文本框。在最右边的列中，有一个链接按钮。单击此链接按钮将显示一个 modalpopupextender，它将显示所选行的详细记录。

我让它工作得很好，但它很慢，因为当你点击链接按钮时，它会刷新整个页面。

我不想重新加载中继器，因为这是非常慢的部分。

我尝试添加一个 updatePanel（updatePanel 内的中继器），但当然，由于中继器位于 updatePanel 内，它仍会重新加载中继器。

所以问题是，我该怎么做，当点击链接按钮时，它不会重新加载转发器......

任何想法将不胜感激。顺便说一句，我正在使用 .net 2.0、c# 开发它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:28:21.363

```
Try this one.

<asp1:UpdatePanel ID="updatepanel4" runat="server" >
<ContentTemplate>
 <table id="AssignedRequest" class="tablecont" runat="server" style="width: 900px;" >
 <tr>
   <td>
  <div style=" display:block; width:900px; height:350px;overflow:scroll; ">
    <asp:Repeater runat="server" ID="RepeaterRequest"> 
     <HeaderTemplate >
     <table class="list_table" border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <th>Name</th>
        <th></th>
    </tr>
</HeaderTemplate>
<ItemTemplate>
  <tr>
    <td><%# Eval("NAME")%></td>

<td><a onclick="window.open(this.href,this.target,'directories=no,
     menubar=no,resizable=no,scrollbars=1,
     status=no,toolbar=no,addressbar=no,fullscreen=yes'); 
     return false;" href="View.aspx?name=<%#Eval("NAME")%>">View</a></td>
</tr>
</ItemTemplate>
<FooterTemplate>
</table>

</FooterTemplate>
</asp:Repeater>
</div>
</td>
 </tr>
</table>
 </ContentTemplate>
</asp1:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T07:32:08.043

Why not go for something like a master-child relationship. Do you require further interaction with the child data you are showing to the user? Please specify the nature if so.

Assuming that the child data that you are going to show is simple data meant to simply convey related data to user, you can go for a combination jQuery, and repeaters to accomplish your objective.

The first repeater you show your master data. Against each row in your repeater you show a show button here. You do not need a linkbutton here; just a simple anchor will do. You'd have to write js in it to toggle the correct child data.

All the child data should also be repeated. But not shown to the user at first. Only that particular child item should be shown - this is suitably triggered by the show anchor which is clicked on the master repeater. Rest is all js/css.

Below is a link to a sample project which demonstrates the concept.

[http://www.coderun.com/ide/?w=2ObqOpjZz0qt7OrXYmmxwA](http://www.coderun.com/ide/?w=2ObqOpjZz0qt7OrXYmmxwA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:34:31.607

在后面的代码中注册，此代码在您绑定后添加，例如在您的 Page_Load 中，（您也可以使用 ItemDataBound 或 ItemCreated 委托）。

```
 rpt.DataBind();
        foreach (RepeaterItem ri in rpt.Items)
        {
            if (ri.ItemType == ListItemType.Item || ri.ItemType == ListItemType.AlternatingItem)
            {
                LinkButton lnkButton1 = (LinkButton)ri.FindControl("lnkButton1");
                ScriptManager1.RegisterAsyncPostBackControl(lnkButton1);
            }
        } 
```

# spring - spring mvc pass & in queryString

> ID：12249799
> 
> 赞同：2
> 
> 时间：2012-09-03T14:30:14.703
> 
> 标签：spring, servlets, servlet-filters

我想像在 Spring MVC 中一样传入 queryString

```
?search="This &amp; That"&value=true 
```

但是，当我尝试访问 HttpServletRequest 时，它只为“search”参数返回“This”。知道如何实现这一目标吗？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:51:35.057

你的 queryString 应该是

```
?Search=This%20&amp%20That&value=true 
```

搜索**This & That**字符串

# java - 如何使用来自 Java 的命令字符串运行 cmd.exe？

> ID：12249802
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:30:31.220
> 
> 标签：java, shell, command-line, runtime.exec

Uff...试图谷歌但没有结果。

大家好。我需要通过 cmd.exe 运行来自 java programm 的下一个命令（javascript 语法）：

> "/c cd c:\prb && Processing.bat c:\prb ext.dat auto"

这意味着我需要将当前目录更改为 c:\prb，写入“Processing.bat c:\prb ext.dat auto”并按 Enter。

我的Java代码是：

```
String command = "cmd /c start cmd.exe /K cd c:\\prb Processing.bat c:\\prb prb ext.dat auto";
Process pr = Runtime.getRuntime().exec(command);
pr.waitFor(); 
```

但它不起作用。我想我错过了命令行中“c:\prb”和“Processing.bat”之间的一些代码。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:39:09.527

我可以看到至少一个错误：路径`c:\\prb Processing.bat`包含空格，因此必须引用：

`"cmd /c start cmd.exe /K cd \"c:\\prb Processing.bat\" c:\\prb prb ext.dat auto"`

我不确定`c:\\prb prb ext.dat`。是一条路径还是两个单独的参数？如果它是一个论点，也引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:41:58.573

这次我会根据我的记忆写一个应对，我像 8 年前一样使用过 :) 你想解决什么是不可能的，不，这不是正确的词，但是：你想用指定的工作启动 cmd目录，而不是启动一个 bat 文件。

据我记得：
启动.bat，但给其他工作目录一个参数

或者：启动 cmd（1 个进程）给一个参数来执行更改目录给另一个参数来执行 bat 文件。全部来自Java，它更复杂。

如何做到这一点是另一个问题。

如果您没有指定工作目录，那么命令应该是这样的：

字符串命令 = "cmd /c \"c:\prb\Processing.bat\"";

如果需要，不要忘记更改工作目录。8年前我做过，对不起，如果我抢了你的时间，只是想帮忙

# .net - 如何使 Url.Action 方法序列化内部属性？

> ID：12249803
> 
> 赞同：0
> 
> 时间：2012-09-03T14:30:31.673
> 
> 标签：.net, asp.net-mvc

考虑我有以下课程`ViewModels`

```
public class Address
{
    public String Street { get; set; }
}

public class Person()
{
    public Address Address { get; set; }
} 
```

如果我有一个 View which Model is `Person`，我可以这样做：

```
@Html.EditorFor(model => model.Address.Street) 
```

生成的输入名称将是`Address.Street`，当我将其发布到 Action 时，默认模型绑定器能够意识到输入的名称`Address.Street`实际上是指 property`Street`内的属性`Address`。

这很好用。

但是，当我尝试使用它时遇到问题：

```
this.Url.Action("MyAction", myPerson) 
```

我希望 Url 序列化程序能够像这样构建一个 queryString：`/person/edit?Address.Street=X`但它实际上并没有序列化该`Address`属性。

我可以做些什么来使 Url 序列化程序在这种情况下工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T16:25:23.677

我认为它没有默认解决方案，因为 Url.Actoin 在内部从您指定的对象（在您的情况下为 myPerson）创建 RouteValueDictionary。并且 RouteValueDictionary 使用以下方法填充键/值对：

```
 private void AddValues(object values) { 
        if (values != null) { 
            PropertyDescriptorCollection props = TypeDescriptor.GetProperties(values);
            foreach (PropertyDescriptor prop in props) { 
                object val = prop.GetValue(values);
                Add(prop.Name, val);
            }
        } 
    } 
```

作为地址的结果，您得到以下对 { "Address", person.Address } 最后路由只需将值转换为字符串并将其添加到查询字符串中，作为查询字符串的结果，您得到 ?Adress=[person.Address.ToString( )])

我认为最简单的方法是编写一个助手，它将以您需要的方式从对象构建 RouteValueDictionary。

# c++ - 超级简单的 C++ 构造函数查询

> ID：12249807
> 
> 赞同：2
> 
> 时间：2012-09-03T14:30:36.203
> 
> 标签：c++, constructor, parentheses

我每个人都有一个非常简单的问题。以下代码有什么区别？（参见“带括号”和“不带括号”）

```
class class_a{
    public:

        int a_int;

        class_a(){
           a_int = 0;
        }
}

int main( ... ){

    class_a instance_a_first; // Without Parentheses
    class_a instance_a_second(); // With Parentheses

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:32:22.287

第一个定义了一个名为 *instance_a_first* 的变量，类型为 *class_a*。

第二个声明了一个名为 *instance_a_second* 的函数，它返回一个 *class_a* 对象并且不接受任何参数。

这与写作相同：-

```
int one; 
```

对比

```
int func(); 
```

编辑：将第二句更改为声明而不是定义。

# c++ - C++：在文本文件中存储 char 数组时是否会存储 Null？

> ID：12249809
> 
> 赞同：1
> 
> 时间：2012-09-03T14:31:06.580
> 
> 标签：c++, arrays, char, fstream, ofstream

看看这段代码

```
ofstream obj("output.txt");
obj<<"Hello World"; 
```

这里我发送到文本文件“output.txt”字符数组“Hello World”

现在 char 数组的末尾有一个终止的 null 。

因此，当我将 char 数组发送到文本文件“output.txt”时，终止的 null 是否也被发送和存储，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:36:03.617

考虑一下如果你多次写入文件会发生什么：

```
ofstream output("myfile.txt");
output << "Hello";
output << " ";
output << "world"; 
```

如果每次向文件中写入内容时都添加了字符串终止符，那么当您第二次写入时，系统将不得不在文件中找到零，将其删除，然后在新文本之后再次添加。此外，系统必须以不同的方式实现以输出到例如控制台。

所以回答你的问题：不，终结符没有写。它仅由内存中的字符串用于函数了解字符串在内存中的结束位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:34:12.597

不，空终止正是 C/C++ 用来知道字符串在哪里结束的。

请注意，让它在您真正想要的字符之后写入一个 0x00 字节将是一个非常烦人的失控。然后，只写你想要的字符会有点麻烦。

# javascript - 我如何找到不是 20 个输入框的动态平均值

> ID：12249810
> 
> 赞同：0
> 
> 时间：2012-09-03T14:31:07.820
> 
> 标签：javascript, jquery, average

我如何找到不是 20 个具有“.num”类的输入框的动态平均值，甚至只是 20 个中的 5 个。我已经按照以下方式完成了它，但它不起作用

```
$.fn.sumValues = function() {
        var sum = 0; 
        this.each(function() {
            if ( $(this).is(':input') ) {
                var val = $(this).val();
            } else {
                var val = $(this).text();
            }
            sum += parseFloat( ('0' + val).replace(/[^0-9-\.]/g, ''), 10 );
        });
        return sum.toFixed(2);
    };

    $(document).ready(function() {
        $('input.price').bind('keyup', function() {
            $('span.total').html( $('input.price').sumValues()/$('.num').length );
        });
    }); 
```

# java - Rally API，创建测试用例结果 - 连接关闭异常

> ID：12249811
> 
> 赞同：1
> 
> 时间：2012-09-03T14:31:09.447
> 
> 标签：java, rally

我正在使用 java / groovy 进行开发，并且是 Rally API 的新手，我上周开始使用它。我希望能够使用 REST API 创建一个新的测试用例结果。星期五（我写这篇文章的时候是星期一），我使用下面的示例让它工作，使用参数将我想要的数据放入方法中。我在另一个网站上找到了这个例子。

今天，当我运行代码时，我认为我没有更改任何内容，我不断收到“ConnectionClosedException：内容长度分隔的消息正文过早结束（预期：1390；收到：1389）。

我再次重写了代码，这次没有更改示例中的任何内容，只是为了让它再次工作，我得到了同样的异常。这是我正在使用的代码：

```
public static void createTestCaseResults(){
        // Create and configure a new instance of RallyRestApi
        RallyRestApi restApi = new RallyRestApi(new URI("https://rally1.rallydev.com"),"username@company.com", "Password");
        restApi.setWsapiVersion("1.36");
        restApi.setApplicationName("Add Test Case Result");

        //Query User
        QueryRequest userRequest = new QueryRequest("User");
        userRequest.setFetch(new Fetch("UserName", "Subscription", "DisplayName"));
        userRequest.setQueryFilter(new QueryFilter("UserName", "=", "username@company.com"));
        QueryResponse userQueryResponse = restApi.query(userRequest);
        JsonArray userQueryResults = userQueryResponse.getResults();
        JsonElement userQueryElement = userQueryResults.get(0);
        JsonObject userQueryObject = userQueryElement.getAsJsonObject();
        String userRef = userQueryObject.get("_ref").getAsString();

        // Query for Test Case to which we want to add results
        QueryRequest testCaseRequest = new QueryRequest("TestCase");
        testCaseRequest.setFetch(new Fetch("FormattedID","Name"));
        testCaseRequest.setQueryFilter(new QueryFilter("FormattedID", "=", "TC7562"));
        QueryResponse testCaseQueryResponse = restApi.query(testCaseRequest);
        JsonObject testCaseJsonObject = testCaseQueryResponse.getResults().get(0).getAsJsonObject();
        String testCaseRef = testCaseQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").getAsString();

        try{
            //Add a Test Case Result
            System.out.println("Creating Test Case Result...");
            JsonObject newTestCaseResult = new JsonObject();
            newTestCaseResult.addProperty("Verdict", "Pass");
            newTestCaseResult.addProperty("Date", "2012-06-12T18:00:00.000Z");
            newTestCaseResult.addProperty("Notes", "Automated Selenium Test Runs");
            newTestCaseResult.addProperty("Build", "2012.05.31.0020101");
            newTestCaseResult.addProperty("Tester", userRef);
            newTestCaseResult.addProperty("TestCase", testCaseRef);

            CreateRequest createRequest = new CreateRequest("testcaseresult", newTestCaseResult);
            CreateResponse createResponse = restApi.create(createRequest);

            if(createResponse.wasSuccessful()){
                println(String.format("Created %s", createResponse.getObject().get("_ref").getAsString()));
                //Read Test Case
                String ref = Ref.getRelativeRef(createResponse.getObject().get("_ref").getAsString());
                System.out.println(String.format("\nReading Test Case Result %s...", ref));
                GetRequest getRequest = new GetRequest(ref);
                getRequest.setFetch(new Fetch("Date", "Verdict"));
                GetResponse getResponse = restApi.get(getRequest);
                JsonObject obj = getResponse.getObject();
                println(String.format("Read Test Case Result. Date = %s, Verdict = %s", obj.get("Date").getAsString(), obj.get("Verdict").getAsString()));
            } else {
                String[] createErrors;
                createErrors = createResponse.getErrors();
                System.out.println("Error occurred creating Test Case: ");
                for (int i=0; i<createErrors.length;i++) {
                    System.out.println(createErrors[i]);
                }
            }

        }
        finally{
            restApi.close()
        }
    } 
```

感谢您对此的任何帮助。谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:59:13.853

你今天还在发生这种情况吗？我刚刚在 rally1 和我们的演示系统上尝试了您的代码，并且每次都能可靠地运行（仅更改了用户名和密码，以及测试用例格式的 id）。

作为可能的下一步，我将在 RallyRestApi.doRequest 中设置一个断点，检查服务器响应代码并查看可用的其他信息 - 例如，响应代码以及响应的正文和标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:32:19.577

这很可能是底层 Apache HttpComponents 库中的一个错误。我刚刚升级到最新的 4.2.1 组件。你介意试试新的 1.0.2 jar 吗？

[https://github.com/RallyTools/RallyRestToolkitForJava](https://github.com/RallyTools/RallyRestToolkitForJava)

**更新：** 今天工具包的 1.0.4 版本已修复此问题： [https ://github.com/downloads/RallyTools/RallyRestToolkitForJava/rally-rest-api-1.0.4.jar](https://github.com/downloads/RallyTools/RallyRestToolkitForJava/rally-rest-api-1.0.4.jar)

# openid - 如何将 OpenID 集成到 MVC4 Web API

> ID：12249818
> 
> 赞同：14
> 
> 时间：2012-09-03T14:31:26.763
> 
> 标签：openid, asp.net-mvc-4, asp.net-web-api, dotnetopenauth

我正在使用 MVC4 编写一个 Web API，应该由多种客户端类型使用。我想使用 OpenID 进行身份验证。

我已经下载了 DotNetOpenAuth NuGet 包，但到目前为止，所有示例都是针对客户端应用程序，而不是 API。

我的问题很简单。我想让客户端向我的 API 发送身份验证请求。API 通过 OpenID 提供者进行身份验证。然后，API 设置它需要的任何内容，以便在整个 Web api 调用中使用 [Authorize] 标签。

我知道在 .NET 应用程序中可以调用 FormsAuthentication.SetCookie ，但这也是其他语言的易于实现的解决方案吗？

简而言之，这个问题。如何将 OpenID 集成到 MVC4 Web api 中，以允许使用可以被多种语言调用和使用的 Authorize 标签？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-03T21:21:07.837

您可能会混淆身份验证和授权的角色。听起来您的 Web API 需要*两者*。

让我们从授权开始。每个 API（即由浏览器以外的客户端应用程序访问的 Web URL）要么允许匿名访问，要么必须经过授权（即授权）。授权是*OAuth*的域。OAuth（大概是 v2）描述了客户端如何授权对您的 WebAPI 的调用。

大概作为授权过程的一部分，用户登录到您的服务。登录用户的这一步就是*认证*。它与授权正交。您是否通过 OpenID、用户名/密码、X.509 证书等对用户进行身份验证，应该与您的 WebAPI 调用的授权方式无关。换句话说，您的 WebAPI 方法不应该关心用户是如何进行身份验证的（阅读：没有任何 OpenID 绑定）。他们将拥有一个应用于他们的授权过滤器，用于验证传入请求的授权并将其转换为一些信息，包括授权访问的帐户的用户名、访问级别、授权的 ID客户端等

所以一步一步，整个场景可能会是这样的：

1.  操作第 3 方客户端应用程序的用户（为简单起见，我们假设此客户端应用程序是第 3 方 Web 应用程序）想要使用要求客户端以用户名访问您的 WebAPI 的功能。
2.  当客户端调用您的 WebAPI 时，客户端需要获得有限模拟用户的授权。它们从 OAuth 2 重定向到您服务的授权端点开始。如果这是使用 DotNetOpenAuth 实现的，则可以使用[WebServerClient](http://docs.dotnetopenauth.net/v4.1/html/T_DotNetOpenAuth_OAuth2_WebServerClient.htm)类。
3.  您的授权端点扮演 OAuth 2 授权服务器的角色，因此使用 DotNetOpenAuth 的[AuthorizationServer](http://docs.dotnetopenauth.net/v4.1/html/T_DotNetOpenAuth_OAuth2_AuthorizationServer.htm)类。它所做的第一件事是检查请求中是否包含 ASP.NET 表单身份验证 cookie。此 cookie 是用户是否已在其浏览器上登录您的服务的自然指示，如果已登录，该用户是谁。检查此 cookie 是对[Controller.User](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.user.aspx)的简单调用。请注意，您的授权端点是 MVC 而不是 WebAPI，因为它的响应是针对浏览器/用户，而不是客户端应用程序。让我们假设没有这样的 cookie 并且`Controller.User`为 null （或`User.Identity.IsAuthenticated`is `false`）。有关如何实现此端点的信息，请参阅 OAuthAuthorizationServer 示例。
4.  您的授权端点响应重定向到用户登录页面，包括`redirectUrl`查询字符串中的一个参数，该参数保留完整的传入 OAuth 2 授权请求 URL。
5.  您的用户登录页面是充当 OpenID 依赖方的 MVC 端点。此端点使用 DotNetOpenAuth 的[OpenIdRelyingParty](http://docs.dotnetopenauth.net/v4.1/html/T_DotNetOpenAuth_OpenId_RelyingParty_OpenIdRelyingParty.htm)类。请注意，此端点对 OAuth 2 或授权内容一无所知。它仅对用户进行身份验证。在对用户进行身份验证后，它会重定向回`redirectUrl`参数中的 URL。有关如何执行此操作，请参阅 OpenIdRelyingPartyMvc 示例。
6.  授权端点重复之前的步骤，除了这次有一个 FormsAuthentication cookie，因此它继续向用户显示一个页面，询问他们是否要授权客户端访问用户的数据。用户单击是。（注意：在此用户授权页面上实施 XSRF 和点击劫持缓解措施）。
7.  授权端点处理用户的肯定响应并调用`AuthorizationServer`以创建授权记录并将响应返回给客户端。此调用的结果之一是对客户端的重定向响应的制定，该响应为其提供授权代码。
8.  浏览器现在正在拉取客户端应用程序的 URL，该 URL 向其传递授权代码。然后，客户端使用`WebServerClient`该类将授权代码交换为访问令牌（通常也是刷新令牌）。
9.  客户端应用程序现在直接调用您的 WebAPI URL，包括它通过 HTTP 授权标头中的 OAuth 2 获得的访问令牌。
10.  您的 WebAPI 充当 OAuth2 资源服务器的角色，并且您应用于 WebAPI 方法以验证传入 OAuth 2 访问令牌的授权过滤器属性使用 DotNetOpenAuth [ResourceServer](http://docs.dotnetopenauth.net/v4.1/html/T_DotNetOpenAuth_OAuth2_ResourceServer.htm)类来完成其工作。您可以参考 OAuthResourceServer 示例，或者更好的是[David Christiansen 的 WebAPI 示例](https://github.com/DavidChristiansen/DotNetOpenAuth.WebAPI.40)，了解如何执行此操作。

这就是整个故事。是的，无论他们碰巧使用何种语言或库，客户角色都很容易编写。

顺便说一句，我提到的 DotNetOpenAuth 示例不是通过 NuGet 分发的。您[从 SourceForge 获得样本](http://sourceforge.net/projects/dnoa/files/latest/)。

# google-app-engine - 在 Google App Engine 上使用 Bottle 接收邮件

> ID：12249823
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:31:33.413
> 
> 标签：google-app-engine, bottle

我是编程新手。我在 GAE 上使用瓶子。我想接收和阅读邮件（如果可能的话）。

这是我的 app.yaml 文件：

```
- url: /_ah/mail/contact@appid.appspotmail.com
  script: main.py
  login: admin

inbound_services:
- mail 
```

这是（应该是）我在 main.py 文件中的邮件处理程序：

```
from google.appengine.api import mail
from google.appengine.ext.webapp.mail_handlers import InboundMailHandler

@route('/_ah/mail/contact@appid.appspotmail.com', method = 'POST')
def receive_mail():
    pass 
```

当我向日志中的上述地址发送电子邮件时，会出现：

```
 2012-09-03 17:03:00.878 /_ah/mail/contact@appid.appspotmail.com 200 187ms 0kb  
 0.1.0.20 - - [03/Sep/2012:07:03:00 -0700] "POST /_ah/mail/contact@appid.appspotmail.com HTTP/1.1" 200 59 
```

如何阅读/解析邮件？

提前感谢您的任何回答或评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:37:39.577

您应该能够使用`mail.InboundEmailMessage`like in解码 POST 正文[`webapp.InboundMailHandler`](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/ext/webapp/mail_handlers.py&q=InboundMailHandler%20package%3agoogleappengine%5C.googlecode%5C.com&l=65)

```
from google.appengine.api import mail

@route('/_ah/mail/contact@appid.appspotmail.com', method = 'POST')
def receive_mail():
    message = mail.InboundEmailMessage(request.body)
    logging.info("received email from: %s" % message.sender) 
```

# ruby - 需要使用 BigDecimal.new 方法吗？

> ID：12249824
> 
> 赞同：0
> 
> 时间：2012-09-03T14:31:39.293
> 
> 标签：ruby, bigdecimal

我在[BigDecimal 类的文档中](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)看到了以下代码：

> 相似地：
> 
> ```
> (::new(“1.2”) - BigDecimal(“1.0”)) == BigDecimal(“0.2”) -> true
> (1.2 - 1.0) == 0.2 -> false 
> ```

所以我想知道是否有必要使用这样的`new`方法：`BigDecimal.new 2.5, 2`. 还是使用 just 只是不好的做法`BigDecimal 2.5, 2`？当评估相同的 BigDecimal 值时，它们都会得到新的引用：

```
BigDecimal 2.5, 2
#=> #<BigDecimal:7ffa93e524b0,'0.25E1',18(36)> 
BigDecimal 2.5, 2
#=> #<BigDecimal:7ffa97236600,'0.25E1',18(36)> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:49:26.750

好吧，在最新的[内核文档](http://apidock.com/ruby/Kernel/BigDecimal/instance)中，我们可以看到 BigDecimal 方法如下所示：

```
static VALUE
BigDecimal_global_new(int argc, VALUE *argv, VALUE self)
{
    return BigDecimal_new(argc, argv, rb_cBigDecimal);
} 
```

换句话说，`BigDecimal.new`将在提供的参数上调用。所以，是的，没有必要明确地使用它。

# c# - Item vs BindItem：ASP.NET 4.5 中的数据绑定

> ID：12249826
> 
> 赞同：6
> 
> 时间：2012-09-03T14:31:42.600
> 
> 标签：c#, asp.net, .net, data-binding, asp.net-4.5

ASP.NET 4.5 引入了[强类型数据控件](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097385)。

据我所知，有两个选项如何访问数据项

```
<%# Item %> 
```

和

```
<%# BindItem %> 
```

不过我不太明白，这两者之间到底有什么区别？这只是命名的问题吗？它们可以互换使用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T14:42:13.563

情况是这样的：

`Item`: 用于单向绑定表达式。

`BindItem`: 用于双向数据绑定表达式。

# javascript - 未从 ajax 调用设置 Javascript 全局变量

> ID：12249833
> 
> 赞同：0
> 
> 时间：2012-09-03T14:32:06.907
> 
> 标签：javascript, jquery, global-variables

> **可能重复：**
> [从 $.ajax() 函数内部返回值](https://stackoverflow.com/questions/8187201/return-value-from-inside-of-ajax-function)

我正在开发一个使用广泛的 AJAX 调用控制器的 CakePHP 应用程序。我遇到了一个特定的 AJAX 调用，我试图将来自控制器的响应分配给一个 JS 全局变量。这是代码：

```
window.errors = "";

function setErrors(err) {
    window.errors = err;
}

function ajaxCall(u, t, d, dt) {
    var type = typeof t !== 'undefined' ? t : "post";
    var dataType = typeof dt !== 'undefined' ? dt : "json";
    var success = false;
    var err = "";
    $.ajax({url: url, data: "data=" + d, type: type, dataType: dataType,
        success: function(d){
                if(d.hasOwnProperty('success') === false) { //json response
                    for(var i in d) { //fetch validation errors from object
                        for(var j in i) {
                            if(typeof d[i][j] === "undefined") {
                                continue;
                            }
                            err += d[i][j] + "<br/>";
                        }
                    }
                    console.log(err); //<=== displays correct value
                    setErrors(err); //<=== but somehow this seems to be failing??
                }
                else {
                   if(d.success === "1") {
                       success = true;
                }
            }
        }
    });
    return success; //<=== I suspect this might be the culprit
} 
```

这就是 ajaxCall() 的使用方式：

```
function register() {
    var data = {};
    var $inputs = $("#regForm :input");
    $inputs.each(function(){
        data[this.name] = $(this).val();
    });
    data = {"User" : data }; //CakePHP compatible object
    data = JSON.stringify(data);

    //Here's the AJAX call
    if(ajaxCall('https://localhost/users/add', 'post', data, 'json')) {
        alert("Registered!");
    }
    else {
        alert(window.errors); // <=== empty string
        console.log("window.errors is: " + window.errors); // <=== empty string
    }
} 
```

但在 Chrome JS 控制台上，`window.errors`返回正确的值（非空，验证错误字符串）。

我发现了一个[类似的问题](https://stackoverflow.com/questions/8960803/javascript-global-variable-not-in-scope-after-being-defined-in-callback)，可能正在解决我的问题（`return success`紧随其后的是在回调`$.ajax()`之前执行）。`success:`如何在不大幅更改代码的情况下解决此问题（另外，我不想将其设为同步调用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:44:13.690

是的，您是对的，该`return`语句在成功回调之前运行。您不能从函数返回结果，因为函数必须在成功事件被处理之前返回。

向`ajaxCall`函数添加回调，并调用它而不是设置成功变量：

```
function ajaxCall(u, t, d, dt, callback) {
  var type = typeof t !== 'undefined' ? t : "post";
  var dataType = typeof dt !== 'undefined' ? dt : "json";
  $.ajax({url: url, data: "data=" + d, type: type, dataType: dataType,
    success: function(d){
      if(d.hasOwnProperty('success') === false) { //json response
        for(var i in d) { //fetch validation errors from object
          for(var j in i) {
            if(typeof d[i][j] === "undefined") {
              continue;
            }
            err += d[i][j] + "<br/>";
          }
        }
        callback(false, err);
      } else {
        callback(d.success === "1", "");
      }
    }
  });
} 
```

将处理结果的代码发送到`ajaxCall`函数中：

```
ajaxCall('https://localhost/users/add', 'post', data, 'json', function(success, err){
  if (success) {
    alert("Registered!");
  } else {
    alert(err);
  }
}); 
```

# android - 有没有让我的edittext突出显示？

> ID：12249835
> 
> 赞同：0
> 
> 时间：2012-09-03T14:32:20.313
> 
> 标签：android, android-edittext, highlight

我在我的应用程序中禁用了软键盘，因为我有自己的自定义键盘。但问题是当我单击编辑文本以通过我的自定义键盘输入数据时，编辑文本根本没有突出显示。甚至光标在相应单击的编辑文本中也不可见。为什么禁用软键盘时总是有副作用？我尝试了包括stackoverflow在内的所有源代码中的建议，但没有任何效果。我可以获得完美的解决方案以在单击时突出显示编辑文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:15:16.857

我不知道为什么会出现这些副作用，但是在[这篇文章](https://stackoverflow.com/questions/9977663/android-custom-edittext-not-showing-cursor-in-ics)中，有一种解决方法是如何禁用键盘并且仍然有光标。这对我有用，除了我还需要请求焦点，所以它是：

```
 //disable keypad
    et.setOnTouchListener(new OnTouchListener(){
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            int inType = et.getInputType(); // backup the input type
            et.setInputType(InputType.TYPE_NULL); // disable soft input
            et.onTouchEvent(event); // call native handler
            et.setInputType(inType); // restore input type
            et.requestFocus(); // request focus
            return  true; // consume touch even
        }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:48:25.673

您需要`textView.requestFocus()`在单击时调用这种方式您`editText`可以**突出显示**

不要忘记在您的**XML 文件**中 将此属性添加`android:focusableInTouchMode="true"`到您的`EditText`

# assembly - 在 x86 程序集中创建和调用函数（AT&T 语法）

> ID：12249842
> 
> 赞同：1
> 
> 时间：2012-09-03T14:32:45.530
> 
> 标签：assembly, x86, gnu-assembler, att

请给我一个非常简单的例子来**创建一个函数并在 x86 汇编（AT&T 语法）中调用它。**实际上，我正在尝试创建一个计算`factorial`数字的函数。这就是我所做的一切：

```
#include<syscall.h>
#include<asm/unistd.h>
# Calculates Factorial, Argument is passed through stack
.text
.global _start
_start:
    pushl $5       #factorial of this value will be calculated
    call Fact
    movl %eax, %ebx #eax contains the result, Result is the return val of the program
    movl $1, %eax
    int $0x80
    ret
Fact:
    popl %ebx     #Return address
    popl %edx
    movl $1, %ecx #Will be used as a counter
    movl $1, %eax #Result(Partial & complete) will be stored here
    LOOP:
        mul %ecx
        inc %ecx
        cmp %ecx, %edx
        jle LOOP
    pushl %ebx    #Restore the return address
    ret 
```

我**`Segmentation Fault`**一次又一次地收到错误。我正在使用**GAS**。`Ubuntu`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:25:12.797

你的代码不应该崩溃。确保您组装和链接为 32 位：

```
as --32 -o x.o x.s
ld -melf_i386 -o x x.o 
```

但是代码不正确。尤其：

*   'mul %ecx' 改变 %edx
*   'cmp' 的参数必须颠倒

这是一个更正的版本：

```
 .text
        .global _start
_start:
        pushl $5
        call fact
        addl $4, %esp

        movl %eax, %ebx
        movl $1, %eax        # sys_exit
        int $0x80

fact:
        movl 4(%esp), %ecx
        movl $1, %eax
1:
        mul %ecx
        loop 1b
        ret 
```

运行它：

```
./x; echo $? 
```

# core-data - CoreData - 获取帖子和只有他们未删除的评论

> ID：12249843
> 
> 赞同：0
> 
> 时间：2012-09-03T14:32:50.827
> 
> 标签：core-data, nspredicate, relationship, core-foundation

我有两个收藏：

```
- Post
- Comment

Post.comments = [comment1, comment2, ...] 
```

`comment.removed`是一个布尔值。

我想获取所有帖子，但不`comments`包括已删除的帖子。有没有办法在不迭代 OneToMany 关系的情况下做到这一点？

这是我尝试过的：

```
ANY comments.removed == FALSE  // Posts that have at least one removed comment
ALL comments.removed == FALSE  // Posts that only have unremoved comments
(SUBQUERY(comments, $x, $x.removed == FALSE).@count > 0) // Same as the first one 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:58:28.507

如果我正确理解您的问题，您希望获取所有“发布”对象，但`post.comments`不应该是核心数据存储中定义的整个评论集，而只是未删除的评论集。

这对于获取请求是不可能的（据我所知），因为获取请求的结果是托管对象上下文中的对象列表。获取请求不能返回与托管对象上下文中的原始对象*不同的**新*对象。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:06:45.213

解释一下您不想从 CD 中检索“已删除”评论的动机可能是值得的，因为当您需要使用它们时，您可以很容易地以编程方式将它们排除在外。卷是否足以成为性能负担？

在任何情况下，都应该可以创建一个`NSArrayController`, 依次绑定到每个评论集合，但设置一个 fetch 谓词以排除“已删除”的评论。

有关此主题的更多信息，请参阅[苹果文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html#//apple_ref/doc/uid/TP40001794-SW8)- 祝你好运！*

# iphone - iphone开发：如何检查一个物体是否位于手机屏幕上

> ID：12249851
> 
> 赞同：2
> 
> 时间：2012-09-03T14:33:26.467
> 
> 标签：iphone, objective-c, ios, uiimageview, scrollview

在我的应用程序中，我有一个滚动视图，其中包含一些对象，例如图像视图、按钮等，并且我的滚动视图具有巨大的内容，因此我需要垂直或水平滚动来探索它。我的问题是如何检查对象是否位于手机屏幕上的可见位置？

编辑：我想检测图像是否完全在滚动视图的框架中。然而`CGRectIntersectsRect(bottomScroller.bounds, selectImage_1.frame)`即使有一个小的交叉点也会返回 true。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:43:11.313

将您的对象（图像视图、按钮等）框架与`scrollView.bounds`：

```
if (CGRectIntersectsRect(scrollView.bounds, object.frame)) ... 
```

编辑：

如果要确保对象完全显示，则计算交点并将其与对象的框架进行比较：

```
CGRectEqualToRect(
      CGRectIntersection(scrollView.bounds, object.frame),
      object.frame); 
```

尽管您可能会找到一种优化的方法来进行该检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:52:20.280

如其他答案中所述，您将希望使用`CGRectIntersectsRect`它，因为仅当您的对象与滚动视图的可见框架相交时才会输出。但是，为了使这更完整，您应该使用`UIScrollViewDelegate's`允许`scrollViewDidScroll`您在滚动发生时或多或少地询问交叉点的方法。这是一个例子：

。H

```
<UIScrollViewDelegate> 
```

.m

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (CGRectIntersectsRect(mySubView.frame, scrollView.bounds)) {
        CGRect intersection = CGRectIntersection(mySubView.frame, scrollView.bounds);
        NSLog(@"%@",NSStringFromCGRect(intersection));
    }
} 
```

**编辑：**然后使用`CGRectIntersectsRect`你可以询问特定的交叉点，此时你所要做的就是根据你的需要编写类似`if(intersect.x > y)//do something`.

# python - 使用 shutil 模块删除目录

> ID：12249854
> 
> 赞同：2
> 
> 时间：2012-09-03T14:33:42.980
> 
> 标签：python

我正在尝试使用 python 删除目录，但我不想在此过程中递归删除整个目录路径：即

/home/dir/dir/dirtoberemoved

所以我不想只删除一个目录及其所有内容。我一直在寻找 stackoverflow 来研究这个问题，大多数答案都包括使用我不熟悉的 shutil 模块，查看它说“删除整个目录树”的模块的 python 文档

如果我做这样的事情：

```
 if os.path.exists("/home/dir/dir/dirtoberemoved");

        shutil.rmtree("/home/dir/dir/dirtoberemoved"); 
```

或者

```
 shutil.rmtree("/dirtoberemoved"); 
```

整个路径会被删除吗？如果是这样，有什么好方法可以在 python 中删除一个非空目录而不删除更高级别的目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:40:56.437

您需要指定要删除的目录的完整*路径*。只有路径的最后一部分将被删除，该`/home/dir/dir/`部分将保持不变。

*删除是指包含*在命名路径中的任何子目录，因此如果有`/home/dir/dir/dirtoberemoved/foo`子目录，它将与它的父目录一起被删除。

# objective-c - 带有回调问题的objective-c损坏的指针

> ID：12249857
> 
> 赞同：0
> 
> 时间：2012-09-03T14:33:56.810
> 
> 标签：objective-c, ios, pointers, memory-management

我在释放对象后指向垃圾的指针损坏时遇到问题。**objectA**是来自另一个对象**objectB**的回调的委托。
**objectA**经常被分配和释放（在我的应用程序中，它是一个菜单 UI 对象）。每次初始化**objectA**时，它都会初始化**objectB**并开始异步操作，然后通过 id 委托属性回调**objectA 。**如何阻止我的指针：id delegate 中断？

```
ObjA.m
-(void)dealloc{
     [super dealloc];
} 

+(id)init{
     ObjA *objectA = [[ObjA alloc]init];
     return objectA;
}
-(id)init{
     if (self == [super init]){
         ObjB *objectB = [ObjB initialiseWithDelegate:self];

     }
     return self;
}    
-(void)callback:(id)arg{
     //This callback is called from an asynchronous routine from  objectB 

}
-(void)terminate{
  //This is called when I want to remove/release objectA
  //Other logical termination code here
  [self release];
}

ObjB.m
@synthesize delegate;

+(id)initialiseWithDelegate:(id)delegate{
     ObjB *objectB = [[ObjB alloc]init];
     [objectB setDelegate:delegate];
     return objectB;
}
-(id)init{
     if (self == [super init]){
         [self beginAsynchronousOperation];

     }
     return self;
}
-(void)beginAsynchronousOperation{
     //Do asynchronous stuff here
}
-(void)finishedAsynchronousOperation{
     //Called when asynch operation is complete

     if (self.delegate) [self.delegate callback:someargument]; //EXC error. Pointer broke

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:37:20.337

简短的回答是，当您释放 objectA 时，您将`nil`取出 objectB 的`delegate`属性。正如您所看到的，因为委托是分配的，而不是保留的（明确地防止保留循环），所以当“拥有”对象消失时，委托引用可能会挂起。通常 objectA 将持有对 objectB 的保留引用，并且在 objectA's 期间`dealloc`，它将首先将 objectB's 设置`delegate`为`nil`，然后将`release`objectB 设置为。这将防止崩溃。当然，这假设（通常）您*不需要*对异步完成做任何事情。它还假设 objectB 可以在 objectA 处于异步操作中间时安全地释放。这通常适用于（比如说）动画，但如果您正在构建自己的任务，您可能需要注意这里的生命周期。

有关此代码段的一些注释可能会有所帮助：

1.  您的 objectA 在创建后实际上并没有持有对 objectB 的引用。这意味着您不能取消委托。您应该在创建 objectB 时保留对它的引用，以便执行此操作。

2.  您正在泄漏 objectB。ObjectA 创建它（alloc，init），但随后删除引用，因此即使完成后，似乎也没有人负责释放它。同样，握住它以便您可以释放它也可以解决此问题。

3.  您的`-terminate`on objectA 是一种反模式——一个对象永远不应该（只有一个例外：内部失败`init`）调用`-release`on `self`。一个对象应该由它的所有者释放，也就是最初创建*它*的人。

4.  您的模式`if (self == [super init])`通常用一个等号书写，这意味着您既要分配`self`结果又要检查`nil`. 这是 Cocoa 历史上的一个奇怪现象，在这里可能没有什么区别，但值得指出。

# c# - 是否需要在asp.net web应用程序中部署.cs和designer.cs文件

> ID：12249859
> 
> 赞同：3
> 
> 时间：2012-09-03T14:34:05.110
> 
> 标签：c#, asp.net, deployment, hosting

通过FTP将文件传输到部署服务器时是否需要部署.aspx页面的.cs和.designer.cs文件？或者应用程序dll可以处理它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T14:36:09.523

不，这不是必需的，`.cs`and`.designer.cs`文件被编译成一个`.dll`文件进行部署。

更多信息可以在这篇文章中找到：

[确定需要部署哪些文件 (C#)](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/determining-what-files-need-to-be-deployed-cs)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T14:36:30.973

DLL 和 aspx 页面应该是您唯一需要部署的东西。`.designer`和`.cs`文件供您继续开发。

# android - 需要在 Android 菜单中进行更深层次的嵌套

> ID：12249860
> 
> 赞同：2
> 
> 时间：2012-09-03T14:34:07.583
> 
> 标签：android, menu, nested

我有一个Android潮汐应用程序，需要用户选择一个潮汐站，还有其他几个菜单项，一共6个。我的进入潮汐站选项很笨拙，五十个或更多的选择太多了。因此，我想将其分解为列出各个地理区域的子菜单，然后每个子菜单都会列出该子区域中的站点。但是，我已经读过子菜单不能有更多的子菜单，这会阻止这种情况。

**问题：**在 Android 中完成此任务的最标准方法是什么？

**问题：**我是否可以有一个子应用程序，它是 APK 的一部分，从我的菜单中调用，然后再次提供完整的菜单选项数组；那么我可以将结果传回我的主应用程序吗？

# css - 请帮忙！CSS3 发光过渡问题

> ID：12249864
> 
> 赞同：0
> 
> 时间：2012-09-03T14:34:22.927
> 
> 标签：css, css-transitions

我正在尝试遵循本教程，因为我非常喜欢这种效果。

> [带有过渡效果的悬停时 CSS 文本发光](http://www.icodeya.com/2012/08/css-text-glow-on-hover-with-transition.html)

但问题是，我将背景颜色设置为白色。

```
<style>
.text-glow-hover-with-delay{
background: #FFFFFF;
color: #fff;
transition: text-shadow 3s;
-moz-transition: text-shadow 3s; /* Firefox 4 */
-webkit-transition: text-shadow 3s; /* Safari and Chrome */
-o-transition: text-shadow 3s; /* Opera */
}

.text-glow-hover-with-delay:hover{
text-shadow: 0 0 10px #fff;
}
</style>

<div class="text-glow-hover-with-delay">
Put your mouse over me and I will glow slowly.
</div> 
```

现在它不再发光了。我在这里是 CSS 的菜鸟。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:49:56.383

可能是你看不到阴影，因为它是白色的。但是，它的工作正常且顺利。只是减少时间，3秒太多了。

[**这是工作演示**](http://jsfiddle.net/wZJD3/1/)

或者，如果您只想要一个白色阴影，[**请参见此处**](http://jsfiddle.net/wZJD3/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:42:27.620

我删除了过渡 CSS，因为它似乎搞砸了，我将颜色更改为黑色：

[http://jsfiddle.net/Ce5SB/](http://jsfiddle.net/Ce5SB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:42:37.357

对于 css 转换，您必须从 A 点转到 B 点。

这意味着点 A 应该在您的默认类上有一个默认的文本阴影。

```
 .text-glow-hover-with-delay{
      text-shadow:0 0 0 #fff;/*This is the missing piece*/

      ....
 } 
```

有了上面的缺失部分，B 点就会知道从哪里过渡。

如果上述方法不起作用，请告诉我。您可能还想尝试转换为

```
 transition:all 300ms ease;/*just in case each browser wants to capture its browser specific text shadow property*/ 
```

# objective-c - 如何在 Mac App Contents/MacOS 文件夹中添加我的自定义 C++ 可执行文件

> ID：12249865
> 
> 赞同：0
> 
> 时间：2012-09-03T14:34:29.220
> 
> 标签：objective-c, xcode

我想将 C++ 可执行文件添加到我的应用程序的 MacOS 文件夹中。可执行文件不需要 plist 或任何东西来运行。它在没有任何其他文件支持的情况下运行。所以我尝试将此文件添加到我的 Xcode 项目中，当我构建我的应用程序时，二进制文件会生成资源文件夹。

该应用程序运行良好，但我希望可执行文件位于 Contents/MacOS 文件夹中。如何实现这一目标..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:38:07.387

在应用程序的目标中创建“复制文件”阶段。

# c - C中的哈希表项 目...取消引用指向不完整类型错误的指针

> ID：12249866
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:34:31.023
> 
> 标签：c, hashtable

我似乎在这个项目上兜圈子！我收到很多“取消引用指向不完整类型的指针”的错误，并且还有很多其他错误。似乎当我修复一个时，另一个会弹出来代替它！这是我第一次使用哈希表，我承认我很迷茫，但我认为我至少有一个很好的开始。关于如何解决我的“取消引用指向不完整类型的指针”问题的任何输入都会令人惊叹！

htable.c

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "htable.h"

struct htablerec {
   int size;
   int num_entries;
   hashing_t method;
   char **keys;       
   int *freqs;
   int *stats;
};

void *emalloc(size_t s) {
   void *result = malloc(s);
   if (NULL == result) {
      fprintf(stderr, "Memory allocation failed!\n");
      exit(EXIT_FAILURE);
   }
   return result;
}
/*moves pointer to point to something appropriate*/
htable htable_new(int capacity) {
   int i;
   htable ht = emalloc(sizeof *ht);
   ht->size = size;
   ht->method = method;
   ht->num_keys = 0;
   ht->keys = emalloc(size * sizeof ht->keys[0]);
   ht->freqs = emalloc(size * sizeof ht->freqs[0]);
   ht->stats = emalloc(size * sizeof ht->stats[0]);

   for(i = 0; i<size; i++){
      ht->keys[i] = NULL;
      ht->freqs[i] = 0;
      ht->stats[i] = 0;
   }

   return ht;
}

static unsigned int htable_step(htable h, unsigned int i_key){
   return 1 + (i_key % (h->size - 1));
}

static unsigned int htable_wtoi(char *word){
   unsigned int result = 0;
   while(*word != '\0') result = (*word++ +31 * result);
   return result;
}

static unsigned int htable_hash(htable h, unsigned int i_key){
   return i_key % h->size;
}

void htable_free(htable h) {
   int i;
   for(i = 0; i<h->size; i++){
      if(h->keys[i] != NULL){
         free(h->keys[i]);
      }
   }
   if(h->keys != NULL){
      free(h->keys);
   }
   if(h->freqs != NULL){
      free(h->freqs);
   }
   free(h);
}

static unsigned int htable_word_to_int(char *word) {
   unsigned int result = 0;
   while (*word != '\0') {
      result = (*word++ + 31 * result);
   }
   return result;
}

int htable_insert(htable h, char *str) {
   int num_collisions = 0;
   int i_key = htable_wtoi(key);
   int pos = htable_hash(h, i_key);
   int step = 1;

   if(h->method == DOUBLE)
      step = htable_step(h, i_key);

   while(h->keys[pos]!=NULL && 
         strcmp(h->keys[pos],key)!=0 &&
         num_collisions < h->size ){

      pos = htable_hash(h, pos + step);
      num_collisions++;
   }

   if(h->keys[pos] == NULL){
      h->keys[pos] = emalloc((strlen(key)+1) * sizeof h->keys[0][0]);
      strcpy(h->keys[pos],key);
      h->stats[h->num_keys] = num_collisions; 
      h->num_keys++;
   }

   if(num_collisions >= h->size) /* We must be full, so return zero.*/
      return 0; 

   return  ++(h->freqs[pos]);
}

static int htable_search(htable h, char *key){
   int num_collisions = 0;
   int i_key = htable_wtoi(key);
   int pos = htable_hash(h, i_key); 
   int step = 1;

   if(h->method == DOUBLE)
      step = htable_step(h, i_key);

   while(h->keys[pos]!=NULL && 
         strcmp(h->keys[pos],key)!=0 &&
         num_collisions < h->size ){

      pos = htable_hash(h, pos + step);
      num_keys++;
   }

   if(num_keys >= h->size)
      return 0;
   else 
      return h->freqs[pos];
}

void htable_print(htable h, FILE *stream){
   int i;
   for(i = 0; i<h->size; i++){
      if(h->keys[i] != NULL)
         fprintf(stream, "%d\t%s\n",i, h->freqs[i], h->keys[i]);
   }
}

void htable_print_entire_table(htable h, FILE *stream) {
   int i;
   for (i=0; loop < h->capacity; i++) {
      if (h->key[i] != NULL) {
         fprintf("%d\t%s\n", h->freqs[i], h->key[i]);
      }
   }
}

/**
 * Prints a line of data indicating the state of the hash table when
 * it is a given percentage full.
 * 
 * The data is printed out right justified (with the given field widths,
 * and decimal places) in this order:
 *
 * - How full the hash-table is as a percentage            (4)
 * - How many keys are in the hash-table at that point     (11)
 * - What percentage of those keys were placed 'at home'   (12, 1 dp)
 * - The average number of collisions per key placed       (12, 2 dp)
 * - The maximum number of collisions while placing a key  (12)
 *
 * @param h the hash-table to get data from.
 * @param stream the place to send output to.
 * @param percent_full the point at which to print the statistics.
 *                     If the hashtable is less full than that, then
 *                     nothing will be printed.
 */
static void print_stats_line(htable h, FILE *stream, int percent_full) {
   int current_entries = h->capacity * percent_full / 100;
   double average_collisions = 0.0;
   int at_home = 0;
   int max_collisions = 0;
   int i = 0;

   if (current_entries > 0 && current_entries <= h->num_keys) {
      for (i = 0; i < current_entries; i++) {
         if (h->stats[i] == 0) {
            at_home++;
         } 
         if (h->stats[i] > max_collisions) {
            max_collisions = h->stats[i];
         }
         average_collisions += h->stats[i];
      }

      fprintf(stream, "%4d%11d%12.1f%12.2f%12d\n", percent_full,
              current_entries, at_home * 100.0 / current_entries,
              average_collisions / current_entries, max_collisions);
   }
}

void htable_print_stats(htable ht, FILE *stream, int num_stats) {
   int i;
   fprintf(stream, "Percent   Current   Percent    Average      Maximum\n");
   fprintf(stream, " Full    Entries   At Home    Collisions   Collisions\n");
   fprintf(stream, "-----------------------------------------------------\n");

   for (i = 1; i <= num_stats; i++) {
      print_stats_line(ht, stream, 100 * i / num_stats);
   }

   fprintf(stream, "-----------------------------------------------------\n\n");
} 
```

htable.h

```
#ifndef HTABLE_H
#define HTABLE_H

#include <stdio.h>

typedef struct hashtable *htable;

typedef enum hashing_e { LINEAR, DOUBLE } hashing_t;

extern htable htable_new(int size);
extern void htable_destroy(htable ht);
extern int htable_insert(htable h, char *key);
extern int htable_search(htable h, char *key);
extern void htable_print(htable h, FILE *stream);
extern void htable_print_stats(htable ht, FILE *stream, int num_stats);

#endif 
```

main.c（由导师提供以适合项目）

```
/**
 * @file main.c
 * @author Iain Hewson
 * @date August 2012
 * 
 * This program is written to test the hash table ADT specified in
 * Cosc242 assignment two.  It creates a hash table which can use
 * linear-probing or double-hashing as a collision resolution
 * strategy.  Various options are provided which make it possible to
 * examine a hash table as well as see how it performs while being
 * filled.
 */

#include <stdio.h>
#include <stdlib.h>
#include <getopt.h>
#include "mylib.h"
#include "htable.h"

/* A boolean type which can be TRUE or FALSE */
typedef enum bool_e {FALSE, TRUE} bool_t;

/* function declarations */
static void usage(char *progname);
static void setup(int argc, char **argv, bool_t *double_hashing,
                      bool_t *entire_table, bool_t *print_stats,
                      int *snapshots, int *tablesize);

/**
 *
 * Creates a hash-table and inserts words into it read from stdin.
 * Arguments on the command line alter the behaviour of the program
 * as follows:
 *  -   -d       Use double hashing (linear probing is the default)
 *  -   -e       Display entire contents of hash-table on stderr
 *  -   -n NUM   Show NUM statistics snapshots (if -p is used)
 *  -   -p       Print stats info instead of frequencies & words
 *  -   -s SIZE  Use the first prime >= SIZE as htable size
 *  -   -h       Display this message
 *
 *  By default each word and it's frequency are printed to stdout.
 *      
 *  @param argc the number of command-line arguments.
 *  @param argv an array of strings containing the command-line arguments.
 *
 *  @return EXIT_SUCCESS if the program is successful.
 */
int main(int argc,char **argv) {
   bool_t entire_table = FALSE, double_hashing = FALSE, print_stats = FALSE;
   int tablesize = 0, snapshots = 0;
   char word[256];
   htable ht;

   setup(argc, argv, &double_hashing, &entire_table, &print_stats,
             &snapshots, &tablesize);

   ht = htable_new(tablesize, (double_hashing) ? DOUBLE_H : LINEAR_P);

   while (getword(word, sizeof word, stdin) != EOF) {
      htable_insert(ht, word);
   }
   if (entire_table) {
      htable_print_entire_table(ht, stderr);
   }
   if (print_stats) {
      htable_print_stats(ht, stdout, snapshots);
   } else {
      htable_print(ht, stdout);  /* print words and frequencies */
   }
   htable_free(ht);

   return EXIT_SUCCESS;
}

/**
 * Prints out a usage message to stderr outlining all of the options.
 * @param prog_name the name of the program to include in usage message.
 */
static void usage(char *prog_name) {
   fprintf(stderr, "Usage: %s [OPTION]... <STDIN>\n\n%s%s", prog_name,
      "Perform various operations using a hash-table.  By default read\n"
      "words from stdin and print them with their frequencies to stdout.\n\n"
      " -d       Use double hashing (linear probing is the default)\n"
      " -e       Display entire contents of hash-table on stderr\n",
      " -n NUM   Show NUM stats snapshots (if -p is used)\n"
      " -p       Print stats info instead of frequencies & words\n"
      " -s SIZE  Use the first prime >= SIZE as htable size\n\n"
      " -h       Display this message\n\n");
}

/**
 * Handle options given on the command-line by setting a number of
 * variables appropriately.  May call usage() if incorrect arguments
 * or -h given.
 *
 * @param argc the number of command-line arguments.
 * @param argv an array of strings contain the command-line arguments.
 * @param double_hashing set to TRUE if -d given
 * @param entire_table set to TRUE if -e given
 * @param snapshots set to NUM if -n NUM given and NUM > 0 else set to 10 
 * @param print_stats set to TRUE if -p given
 * @param tablesize set to SIZE if -t SIZE given and SIZE > 0 else set to 113
 */
static void setup(int argc, char **argv, bool_t *double_hashing,
                      bool_t *entire_table, bool_t *print_stats,
                      int *snapshots, int *tablesize) {
   const char *optstring = "dehpn:s:";
   char option;

   while ((option = getopt(argc, argv, optstring)) != EOF) {
      switch (option) {
      case 'd':
         *double_hashing = TRUE;
         break;
      case 'e':
         *entire_table = TRUE;
         break;
      case 'p':
         *print_stats = TRUE;
         break;
      case 'n':
         *snapshots = atoi(optarg);
         break;
      case 's':
         *tablesize = atoi(optarg);
         break;
      case 'h':
      default:
         usage(argv[0]);
         exit(EXIT_SUCCESS);
      }
   }
   /* set default values if nothing sensible entered */
   if (*tablesize < 1) *tablesize = 113;
   if (*snapshots < 1) *snapshots = 10;
} 
```

mylib.c

```
#include <stdlib.h>
#include "mylib.h"

/**************************
 *                        *
 *   emalloc              *
 *                        *
 **************************

 Used to handle new memory allocation to a pointer and handle exceptions 
 which may arrise if memory allocation fails, which happens all the time 
 when you try and enter negative values. 

 PARAMETERS: s       = calculated size of required memory. 

 RETURN VALUE: a pointer of any type.

*/

void *emalloc(size_t s){
   void *result = malloc(s);
   if(NULL == result){
      fprintf(stderr, "Memory allocation failed!\n");
      exit(EXIT_FAILURE);
   }
   return result;
}

/**************************
 *                        *
 *   erealloc             *
 *                        *
 **************************

 Handles the reallocation of an updated amount of memory to an existing
 with existing data attached.

 PARAMETERS: p       = the existing pointer we would like additional memory
                       allocated to.
             s       = calculated size of required memory. 

 RETURN VALUE: a pointer of any type.

*/

void *erealloc(void *p, size_t s){
   void *result = realloc(p,s);
   if(NULL == result){
      fprintf(stderr, "Memory allocation failed!\n");
      exit(EXIT_FAILURE);
   }
   return result;
}

/**************************
 *                        *
 *   getword              *
 *                        *
 **************************

 Is used to read input from the designated file stream (standard in for the 
 assignment). Getword removes white space with the first while loop. And only
 returns one word. Maintaining continous input is therefore the responsibility
 of the calling function.

 PARAMETERS: s       = the pointer to the character array.
             limit   = the maximum size a word can be.
              stream  = where to read from.

 RETURN VALUE: the integer value of the character at s[0]. The string s does
               not need to be returned, since it is an array and is passed as 
               a memory address. If no chars were read into the string s, then
                s[0] would have the '\0' [NULL] value which equates to 0 if used
                in a boolean equation.

*/

int getword(char *s, int limit, FILE *stream){
   int c;

   while(!isalnum( c = getc(stream)) && c != EOF);

   if(c == EOF)
      return EOF;
   else
      *s++ = tolower(c);

   while(--limit > 0){
      if(isalnum(c = getc(stream)))
         *s++ = tolower(c);
      else if('\'' == c) continue;
      else break;
   }
   *s = '\0';
   return s[0];
}

/**************************
 *                        *
 *   stoi                 *
 *                        *
 **************************

 Not using this function now.

 PARAMETERS: s       = string representation of a number. 

 RETURN VALUE: the integer value.

*/

int stoi(char *s){
   int i,j,r;
   int sign = 1;
   i=1;
   r=0;

   for(j=my_strlen(s)-1; j>=0; j--){
      if(j == 0 && s[j] == '-')
         sign = -1;
      else {
         if(s[j]>='0' && s[j]<='9'){
            r+=((s[j]-'0')*i);
            i*=10;
         } else {
            fprintf(stderr, "Invalid input for String to int\n");
            exit(EXIT_FAILURE);
         }
      }
   }
   return r * sign;
}

/**************************
 *                        *
 *   my_strlen            *
 *                        *
 **************************

 I am using my own string length function, but I wrote it with the stoi
 function, so am using it here. Perhaps not as safe as the library 
 functions?

 PARAMETERS: s       = a string delimited by the NULL character. 

 RETURN VALUE: the number of characters in the string.

*/

int my_strlen(char *s){
   int i=0;
   while(s[i]!='\0')
      i++;
   return i;
}

/**************************
 *                        *
 *   factors              *
 *                        *
 **************************

 Another unrequired function used to calculate the possiblity of factorisation.

 PARAMETERS: x       = An integer to be factored towards. 

 RETURN VALUE: 0 if x has factors, 1 if x is a prime number.

*/

static int factors(int x){
   int f = 2;
   while(f*f < x){
      if(x % f == 0){
         return 0;
      } else { 
         f++;
      }
   }
   return 1;
}

/**************************
 *                        *
 *   prime_gt             *
 *                        *
 **************************

 Used in conjunction with factors to find factorless integers. We increment
 bound until it is truely prime.

 Bound   - We start with bound, sending it to the factors function. If it is 
           a prime number, then stop searching. Otherwise loop until we find
            an prime integer larger than the input integer.

 PARAMETERS: s       = the input integer. 

 RETURN VALUE: Bound, for it is now a prime number.

*/

static int prime_gt(int s){
   int bound = s;
   while(bound > 0){
      if(factors(bound))
         break;
      else 
         bound++;
   }
   return bound;
}

/**************************
 *                        *
 *   relative_prime       *
 *                        *
 **************************

 Decides on a prime number to use to set the table size to.

 PARAMETERS: s       = the required size of the table. 

 RETURN VALUE: the newer beter prime number size for the table.

*/

unsigned int relative_prime(int s){
   return prime_gt(s);
} 
```

对不起，它太大了，如果它只是一个完全无法修复的混乱，那也没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:37:38.293

你似乎没有在`struct hashtable`任何地方定义。您需要在某处说明该结构实际​​上应该包含哪些字段，目前`htable.h`.

这样的前向声明只是说该类型存在，而不是它的外观。因此它被认为是一个*不完整的类型*，直到编译器看到它的完整定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:40:18.880

由于 的定义`struct hashtable`不存在，以下行创建了不完整指针类型 ( `htable`) 的别名。

```
typedef struct hashtable *htable; 
```

不可能尊重这样的指针（编译器不知道结构的不同字段）。

在您的文件`htable.c`中，也许您的意思是：

```
/* instead of struct htablered */
struct htable { 
   int size;
   int num_entries;
   hashing_t method;
   char **keys;       
   int *freqs;
   int *stats;
}; 
```

# c# - 如何使用 FormItem-getter 添加自定义验证

> ID：12249871
> 
> 赞同：1
> 
> 时间：2012-09-03T14:34:39.827
> 
> 标签：c#, asp.net, validation, enterprise-web-library

我需要将一个字段验证为邮政编码，并且我想使用`FormItem`为我正在为其构建表单的表生成的-getter。没有生成“ `GetZipCodeZipFormItem`” getter，但我注意到您可以使用该类`FormItem`验证邮政编码。`Validator`我只是用 my 手动添加它，`DataModification`但我没有对从' 控件`PostBackValueDictionary`获取值所需的引用。`FormItem`

如何将其验证`FormItem`为邮政编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:38:41.443

假设`yourModObject.ZipCode`是一个字符串：

```
yourModObject.GetZipCodeFormItem(
    true,
    ( value, label ) => new EwfTextBox( value ),
    ( control, pbv, subject, validator ) =>
        validator.GetZipCode( new ValidationErrorHandler( subject ),
                              control.GetPostBackValue( pbv ),
                              true ).FullZipCode,
    value: "",
    validationList: yourDataModification ) 
```

另一种方法是：

```
yourModObject.GetZipCodeTextFormItem(
    true,
    true, // allow empty
    value: "",
    additionalValidationMethod: ( subject, validator ) =>
        yourModObject.ZipCode = validator.GetZipCode( new ValidationErrorHandler( subject ),
                                                      yourModObject.ZipCode,
                                                      true ).FullZipCode,
    validationList: yourDataModification ) 
```

第二种方法的一个缺点是主要验证（即在 mod 对象中存储值的逻辑）不知道输入的是邮政编码，因此，例如，如果您的数据库字段的限制为九个字符（以容纳 ZIP+4）并且用户输入“12345-1234”，主要验证将失败，因为破折号将字符串推过长度限制。您甚至不会使用其他验证方法。第一种方法不存在这个问题。

# c++ - Linux C++：访问网络统计信息

> ID：12249873
> 
> 赞同：6
> 
> 时间：2012-09-03T14:35:05.813
> 
> 标签：c++, linux, networking, network-programming

我正在用 C++ 为 Linux 开发一个网络统计程序。

我想访问一些有关当前网络连接的统计信息。

例如：

*   数据包丢失，
*   传输的字节数（上传和下载），
*   当前网络负载（上传和下载），

**知道如何访问此类信息吗？**

* * *

所以，我一直在尝试使用 de /proc 来实现我的目标，我们可以找到很多信息，但是我需要一些缺失的信息。我正在考虑使用 LibPcap 开发一个简单的 C++ 混杂应用程序，它可以捕获我需要的网络流量并开始获取我想要的指标。

缺点是我认为这将是 CPU 密集型的，至少比需要的还要多……对此有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:48:02.227

所有这些信息都散布到`/proc/net`文件中（由内核更新）。最重要的文件是`/proc/net/netstat`. 进到`/proc/net/dev`有设备统计。您可以打开并解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:41:40.743

很多信息都可以从`/proc/net`.

`/proc/net/netstat`将是一个很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:58:38.670

AFAIK，可以通过[rtnetlink 接口](http://www.kernel.org/doc/man-pages/online/pages/man7/rtnetlink.7.html)以编程方式检索统计信息。有关示例，请参见例如[此邮件](http://lists.infradead.org/pipermail/libnl/2011-February/000200.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-24T16:28:25.013

您可以访问网络统计信息槽`/sys/class/net/NAME_OF_DEVICE/statistics`。

# python - MousePressEvent，QGraphicsView中的位置偏移

> ID：12249875
> 
> 赞同：7
> 
> 时间：2012-09-03T14:35:12.067
> 
> 标签：python, qt, pyqt, pyside, qgraphicsview

我对`QGraphicsView`和有一些困难`QGraphicsScene`。当我在场景中缩放/取消缩放并使用 mousePressEvent 创建项目时，我的位置有一个偏移量。如何避免这种情况？

`event.pos()`好像是问题。。

```
from PyQt4 import QtCore, QtGui

class graphicsItem (QtGui.QGraphicsItem):
    def __init__ (self):
        super(graphicsItem, self).__init__()
        self.rectF = QtCore.QRectF(0,0,10,10)
    def boundingRect (self):
        return self.rectF
    def paint (self, painter=None, style=None, widget=None):
        painter.fillRect(self.rectF, QtCore.Qt.red)

class graphicsScene (QtGui.QGraphicsScene):
    def __init__ (self, parent=None):
        super (graphicsScene, self).__init__ (parent)

class graphicsView (QtGui.QGraphicsView):
    def __init__ (self, parent = None):
        super (graphicsView, self).__init__ (parent)
        self.parent = parent
    def mousePressEvent(self, event):
        super (graphicsView, self).mousePressEvent(event)
        item = graphicsItem()
        position = QtCore.QPointF(event.pos()) - item.rectF.center()
        item.setPos(position.x() , position.y())
        self.parent.scene.addItem(item)
    def wheelEvent (self, event):
        super (graphicsView, self).wheelEvent(event)
        factor = 1.2
        if event.delta() < 0 :
            factor = 1.0 / factor
        self.scale(factor, factor)

class window (QtGui.QMainWindow):
    def __init__ (self, parent = None ) :
        super (window, self).__init__(parent)
        self.width = 800
        self.height = 600

        self.resize(self.width,self.height)
        self.mainLayout = QtGui.QVBoxLayout(self)

        self.view = graphicsView(self)
        self.scene = graphicsScene(self)
        self.view.setScene (self.scene)

        factor = 1
        self.scene.setSceneRect(0, 0, self.width * factor, self.height * factor)
        self.view.setMinimumSize(self.width, self.height)

        self.mainLayout.addWidget(self.view)

    def show (self):
        super (window, self).show() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T16:39:52.433

重新实现`mousePressEvent`场景，而不是视图。

这样，`event`参数将是 a [`QGraphicsSceneMouseEvent`](http://doc-snapshot.qt-project.org/4.8/qgraphicsscenemouseevent.html)，它有几个有用的附加功能 - 包括[`scenePos`](http://doc-snapshot.qt-project.org/4.8/qgraphicsscenemouseevent.html#scenePos)，它完全符合您的要求：

```
class graphicsScene(QtGui.QGraphicsScene):
    def __init__ (self, parent=None):
        super(graphicsScene, self).__init__ (parent)

    def mousePressEvent(self, event):
        super(graphicsScene, self).mousePressEvent(event)
        item = graphicsItem()
        position = QtCore.QPointF(event.scenePos()) - item.rectF.center()
        item.setPos(position.x() , position.y())
        self.addItem(item) 
```

# php - magento 1.3 的书还值钱吗？

> ID：12249876
> 
> 赞同：0
> 
> 时间：2012-09-03T14:35:15.500
> 
> 标签：php, magento

我正在深入研究 magento 编程，并且正在寻找结构化的介绍。不幸的是，我没有找到太多关于 magento 1.3 的书籍（我不是在寻找管理、主题或如何增加销量，我在寻找系统架构、扩展开发等）。

由于我来自typo3，我知道两年可以包括改变游戏规则（typo3 中的extbase）。

那么，1.3 的书还值得推荐吗？除了 HELLO WORLD，还有其他结构性资源吗？

编辑：我也在寻找有关 1.3 和 1.7 之间主要差距以及如何填补它们的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:05:53.320

我认为您需要从[Alan Storm 的 Magento 教程](http://alanstorm.com/category/magento)开始，然后阅读一本书。无论如何，如果你能在那些教程中存活下来，并且你有时间浏览 Magento 的源代码，你将能够用这个框架做很多事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T14:54:55.433

是的，买它们。当然，有些东西已经更改、删除或添加，但您在使用 magento 时接触到的核心功能仍然保持不变。您可以从一开始就了解有关文件夹结构和代码池的所有信息，例如，我相信除非有一个从头开始制作的新 magento 版本，这是永远不会改变的。所以请继续。

# iphone - UIImagePickerController allowedEditing = YES，修剪后得到未修剪的视频

> ID：12249878
> 
> 赞同：12
> 
> 时间：2012-09-03T14:35:15.457
> 
> 标签：iphone, ios, ipad, video, uiimagepickercontroller

**问题：**

当我在`UIImagePickerController`allowEditing设置为YES的情况下录制视频，然后使用视频捕获后的修剪界面修剪视频时，我会返回原始视频，而不是修剪过的视频。

**设置：**

我正在使用`UIImagePickerController`用于视频捕获的`allowsEditing`属性设置为 YES。在委托方法`didFinishPickingMediaWithInfo`中，我使用`UIImagePickerControllerMediaURL`from the info`NSDictionary`获取路径 URL。[不幸的是，Apple 官方文档](https://developer.apple.com/documentation/uikit/uiimagepickercontrollerdelegate)没有提及任何已编辑的视频 URL。

**代码：**

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

    if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0)
        == kCFCompareEqualTo) {

        self.tempVideoPath = [[info objectForKey:
                                UIImagePickerControllerMediaURL] path];
    }
} 
```

我意识到这个问题与 SO 上发布的[其他](https://stackoverflow.com/questions/10673269/uiimagepickercontroller-with-camera-source-with-allows-editing-yes-video-trimm) [问题](https://stackoverflow.com/questions/4133110/video-trimming-in-uiimagepicker)类似，但是没有明确的答案为什么它不起作用或为什么选项甚至在那里。如果是这样，我不明白为什么选择器有一个“allowsEditing”属性。

编辑：在我回来的信息字典中，有以下键：

```
info: {
    UIImagePickerControllerMediaType = "public.movie";
    UIImagePickerControllerMediaURL = "file://localhost/private/var/mobile/Applications/F12E4608-FE5A-4EE3-B4E2-8F7D2508C4C8/tmp/capture-T0x21d810.tmp.wabFCC/capturedvideo.MOV";
    "_UIImagePickerControllerVideoEditingEnd" = "5.498333333333333";
    "_UIImagePickerControllerVideoEditingStart" = "4.273402690887451";
} 
```

这是否意味着我们必须用这些数据自己修剪它？然后Apple文档对此不是很清楚。如果是这样，你知道一个好的做法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T09:09:23.773

看看这篇文章中突出显示的答案：

[如何使用 AVFoundation 修剪视频](https://stackoverflow.com/a/7141620/1557663)

我认为这正是你想要的。答案也使用 UIImagePickerController

希望它有帮助， **马里奥**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-10T20:23:44.927

这是一个快速而肮脏的 Swift 5 示例，说明如何从`UIImagePickerController`

```
extension ViewController: UIImagePickerControllerDelegate {
    func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : Any]) {
        let mediaType = info[.mediaType] as! String

        dismiss(animated: true) { [weak self] in
            // Handle a movie capture
            if mediaType == kUTTypeMovie as String {
                guard let videoURL = info[.mediaURL] as? URL else {
                    SwiftyBeaver.error("Could not get URL for movie")
                    return
                }

                let editingEnd = UIImagePickerController.InfoKey(rawValue: "_UIImagePickerControllerVideoEditingEnd")
                let editingStart = UIImagePickerController.InfoKey(rawValue: "_UIImagePickerControllerVideoEditingStart")

                let startMilliseconds: Double?
                let endMilliseconds: Double?

                if let start = info[editingStart] as? Double, let end = info[editingEnd] as? Double {
                    startMilliseconds = start
                    endMilliseconds = end
                } else {
                    startMilliseconds = nil
                    endMilliseconds = nil
                }

                let alert = UIAlertController(title: "Creating", message: "File is being processed", preferredStyle: .alert)
                self?.present(alert, animated: true)
                self?.process(srcVideoURL: videoURL, startSeconds: startMilliseconds, endSeconds: endMilliseconds) { (error) in
                    DispatchQueue.main.async {
                        if let error = error {
                            alert.title = "Whoops"
                            alert.message = "\(error)"
                            alert.addAction(UIAlertAction(title: "OK", style: .default, handler: { _ in
                                self?.dismiss(animated: true, completion: nil)
                            }))
                            return
                        }
                        self?.dismiss(animated: true, completion: nil)
                    }
                }
            }
        }
    }
}

enum VideoError: Error {
    case error(message: String)
}

extension ViewController {
    func process(srcVideoURL: URL, startSeconds: Double?, endSeconds: Double?, completed: @escaping (_ error: Error?) -> ()) {
        DispatchQueue.global(qos: .userInitiated).async {
            let dstVideoURL: URL // some URL for the destination
            do {
                try self.handleNewVideo(srcVideoURL: srcVideoURL, dstVideoURL: dstVideoURL, startSeconds: startSeconds, endSeconds: endSeconds)
                completed(nil)
            } catch {
                completed(error)
            }
        }
    }

    func handleNewVideo(srcVideoURL: URL, dstVideoURL: URL, startSeconds: Double?, endSeconds: Double?) throws {
        guard let start = startSeconds, let end = endSeconds else {
            print("No video editing information. Copying file.")
            try FileManager.default.moveItem(at: srcVideoURL, to: dstVideoURL)
            return
        }

        print("Video editing information. Processing start \(start) end \(end).")
        let videoAsset = AVURLAsset(url: srcVideoURL)
        let exportSession = AVAssetExportSession(asset: videoAsset, presetName: AVAssetExportPresetHighestQuality)!
        exportSession.outputURL = dstVideoURL
        exportSession.outputFileType = AVFileType.mov
        let timeRange = CMTimeRange(start: CMTime(seconds: start, preferredTimescale: 1000), duration: CMTime(seconds: end - start, preferredTimescale: 1000))
        exportSession.timeRange = timeRange

        var error: Error? = nil
        let dispatchGroup = DispatchGroup()
        dispatchGroup.enter()
        exportSession.exportAsynchronously(completionHandler: {
            switch exportSession.status {
            case .completed:
                break
            case .failed:
                error = exportSession.error ?? VideoError.error(message: "Unknown failed error")
            case .cancelled:
                error = exportSession.error ?? VideoError.error(message: "Video Cancelled")
            case .exporting:
                error = exportSession.error ?? VideoError.error(message: "Video still exporting")
            case .unknown:
                error = exportSession.error ?? VideoError.error(message: "Unknown unknown error")
            case .waiting:
                error = exportSession.error ?? VideoError.error(message: "Waiting error")
            @unknown default:
                error = exportSession.error ?? VideoError.error(message: "Future error")
            }
            dispatchGroup.leave()
        })
        dispatchGroup.wait()

        if let error = error {
            throw error
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:59:01.890

为此，您将需要使用 a [`UIVideoEditorController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIVideoEditorController_ClassReference/Reference/Reference.html#//apple_ref/occ/cl/UIVideoEditorController)。它的[委托协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIVideoEditorControllerDelegate_ProtocolReference/Reference/Reference.html#//apple_ref/doc/uid/TP40009028)指定了一种`videoEditorController:didSaveEditedVideoToPath:`似乎是您想要的方法。[此处](http://iphone-book-sample.googlecode.com/svn/trunk/Chapter12/UIVideoEditorControllerSample/)提供了示例代码，[如此 SO 问题](https://stackoverflow.com/questions/4130996/trimming-the-video-using-uivideoeditorcontroller)中所引用。

# safari - 为什么 Safari 无法连接到本地主机？

> ID：12249879
> 
> 赞同：2
> 
> 时间：2012-09-03T14:35:24.953
> 
> 标签：safari, localhost, hosts, symlink-traversal

我有一个适当的 /etc/hosts 文件，其中包含以下内容：

```
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost 
```

当我尝试访问我在本地计算机上运行的服务器时，无论是端口 80 上的 Apache，还是运行在另一个端口上的另一台服务器，我都无法在 Safari 中访问它。但是我可以在 Chrome 中很好地访问它们。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T14:35:24.953

结果我忘记了我已经为 /etc/hosts 建立了一个符号链接到我存储在其他地方的文件，所以如果我的系统崩溃等，我总是可以访问它。显然，Safari 不遵循 /etc/hosts 的符号链接. 我做了一个硬链接，所以我在别处有一个副本，现在 Safari 可以识别本地主机服务器。

# django - 安装 django-recaptcha

> ID：12249884
> 
> 赞同：0
> 
> 时间：2012-09-03T14:35:35.850
> 
> 标签：django, captcha, recaptcha, django-recaptcha

我正在尝试安装 django-recaptcha。我打了

```
pip install django-recaptcha==0.0.4 
```

我无法安装它。我面临的错误是这样的：

```
error: could not create '/Library/Python/2.7/site-packages/captcha': Permission denied

----------------------------------------
Command /usr/bin/python -c "import setuptools;__file__='/Users/Projects/drinker/build/django-recaptcha/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/x6/1rbbd59j1w7dx74lrrs181vh0000gn/T/pip-axdzU5-record/install-record.txt failed with error code 1 in /Users/Projects/drinker/build/django-recaptcha 
```

我在 settings.py 中添加了“验证码”，但它给了我这个错误：

```
Error: No module named captcha 
```

在这方面需要一些帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:40:38.497

尝试以 sudo 用户身份安装，因为它清楚地显示“权限被拒绝”，

sudo pip install django-recaptcha==0.0.4

# java - Java/Android HttpURLConnection setChunkedStreamingMode 不适用于所有 PHP 服务器

> ID：12249885
> 
> 赞同：8
> 
> 时间：2012-09-03T14:35:36.420
> 
> 标签：java, php, android

我花了最后一天左右的时间试图调试这个问题，但我没有想法。基本上我有一个 Android 应用程序将一些数据发布到 PHP/Apache Web 服务器。当我将它指向我的本地测试服务器时，这段代码似乎工作正常。当我将它指向我的生产服务器时，它似乎也可以正常工作，但只有当我注释掉该行时`conn.setChunkedStreamingMode(maxBufferSize);`。启用该行后，该帖子仅适用于我的本地测试服务器，但在发布到生产服务器时，PHP $_FILES 数组为空。我尝试将许多值传递给`setChunkedStreamingMode`（包括 0 和 1024），但这些似乎都不能解决问题。

在这一点上，我假设问题与配置生产服务器的 PHP 的方式有关，但据我所知，服务器上的所有重要参数都与我的测试实例上的相同。此外，它们都运行相同版本的 Apache 和 PHP。我的生产服务器由 Bluehost 运行。

这是我用来上传的 Java 代码：

```
HttpURLConnection conn = null;
DataOutputStream dos = null;
DataInputStream inStream = null;
String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary = "***************************************************";
int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 212144; // 1024*1024 = 1MB.  212144 is a quarter MB.
FileInputStream fileInputStream = null;
try
{
  // ------------------ CLIENT REQUEST
  fileInputStream = new FileInputStream(new File(existingFileWithFullPath));
  // open a URL connection to the Servlet
  URL url = new URL(BACKUP_POST_URL);
  // Open a HTTP connection to the URL
  conn = (HttpURLConnection) url.openConnection();
  // Allow Inputs
  conn.setDoInput(true);
  // Allow Outputs
  conn.setDoOutput(true);
  // Send in chunks (to avoid out of memory error)
  conn.setChunkedStreamingMode(maxBufferSize);
  // Don't use a cached copy.
  conn.setUseCaches(false);
  // Use a post method.
  conn.setRequestMethod("POST"); 
  conn.setRequestProperty("Connection", "Keep-Alive");
  conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="
      + boundary);
  conn.setReadTimeout(200000); // 200 seconds...
  dos = new DataOutputStream(conn.getOutputStream());
  dos.writeBytes(twoHyphens + boundary + lineEnd);
  dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
      + fileName + "\"" + lineEnd);
  dos.writeBytes(lineEnd);
  // create a buffer of maximum size
  bytesAvailable = fileInputStream.available();
  bufferSize = Math.min(bytesAvailable, maxBufferSize);
  buffer = new byte[bufferSize];
  // read file and write it into form...
  bytesRead = fileInputStream.read(buffer, 0, bufferSize);
  while (bytesRead > 0)
  {
    try {
      dos.write(buffer, 0, bufferSize);          
    } catch (OutOfMemoryError oome) {
      Log.e(CommonStatic.LOG_NAME, "Out of memory error caught...");
      oome.printStackTrace();
      fileInputStream.close();
      throw new Exception("Out Of Memory!");
    }
    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
  }
  // send multipart form data necesssary after file data...
  dos.writeBytes(lineEnd);
  dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
  fileInputStream.close();
  dos.flush();
  dos.close();

  // close streams
  Log.d(CommonStatic.LOG_NAME, "Backup file written to server successfully...");
}
catch (Exception ex)
{
  Log.e(CommonStatic.LOG_NAME, "Backup File Upload Error: " + ex.getMessage(), ex);
  throw new Exception (c.getString(R.string.SAVE_TO_CLOUD_ERROR));
} 
```

这是我在另一端用来接收的 PHP 代码：

```
$target = "userfiles/"; 
$target = $target . basename( $_FILES['uploadedfile']['name']);

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target)) 
{ 
  echo "SUCCESS";
} 
else 
{ 
  echo "FAIL";
} 
```

我`print_r($_FILES);`在脚本的最开始添加了 a 以确定 $_FILES 在生产实例上为空，但在测试实例上不是。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:40:01.117

不幸的是，我无法找到解决此问题的直接方法，但我找到了解决方法。而不是使用`conn.setChunkedStreamingMode`I used `conn.setFixedLengthStreamingMode`，我之前尝试过但没有成功。获得的关键`conn.setFixedLengthStreamingMode`工作是将您尝试发送的数据的全长（在本例中为文件）以及标头的长度传递给它。幸运的是，标题长度通常在这样的代码中是固定的，所以一旦你弄清楚你的标题有多大（记住文件名之类的东西，它在 Content-Disposition 下的标题中发送也是可变的）你可以把它在作为一个固定的数字。为了弄清楚我的标题长度，我首先运行了代码，但没有为标题指定任何长度。我收到的错误消息给了我发送的字节数的预期值和实际值，这使我能够计算标头长度。

# performance - Web 服务器基准测试的简单工具？

> ID：12249895
> 
> 赞同：3
> 
> 时间：2012-09-03T14:36:05.437
> 
> 标签：performance, load, webserver

我想为 Web 应用程序做一些简单的负载测试。

我记得我在某个阶段看到的并且我非常喜欢的工具之一是[Selenium](http://seleniumhq.org/)，但它旨在开发用于测试 Web 应用程序用户界面的用例。

我的需求比较简单，模拟并发用户。我见过 Apache Benchmark 'ab'，但我想做的一件事是**模拟一个场景，我们从 5 个用户开始并以 10、15 为增量……直到我们达到 50 个用户**（例如，每 10 秒增量） .

您是否为此用例推荐一个简单的工具？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:52:15.687

我选择了**[JMeter](http://jmeter.apache.org)**。它不像 Apache 或 httperf 的 ab 那样简单，但它也不是一个复杂的工具。

在 JMeter 文档中，我们可以看到[进行 Web 负载测试的简单教程](http://jmeter.apache.org/usermanual/build-web-test-plan.html)。对于增加用户数量的场景，有配置**Ramp-Up Period**告诉 JMeter 在启动每个用户之间延迟多长时间。

![测试线程配置](../Images/1ff97085a7504963a583442b6cdb7539.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-08T11:41:28.123

您可能会喜欢`curl-loader`它支持自定义的每秒用户数并测试不同的 URL。

还有一个名为 的工具`siege`，它与（apache benchmark）非常相似`ab`，试试看。

# performance - 关于超线程中 L1 缓存的自适应模式

> ID：12249902
> 
> 赞同：6
> 
> 时间：2012-09-03T14:36:39.193
> 
> 标签：performance, intel, cpu-architecture, cpu-cache, hyperthreading

我是一名最近在研究超线程的学生。我对这个特性有点困惑——L1 数据缓存上下文模式。

在[架构优化手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)中，描述了 L1 缓存可以在两种模式下运行：

*   一级缓存可以根据上下文 ID 位以两种模式运行：

    1.  共享模式：L1 数据缓存由两个逻辑处理器完全共享。

    2.  自适应模式：在自适应模式下，使用页目录的内存访问在共享 L1 数据缓存的逻辑处理器之间进行相同的映射。

但是，我很好奇缓存如何根据描述在自适应模式下进行分区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:01:33.543

在 Intel arch 上，值为 1`L1 Context ID`表示 L1 数据缓存模式可以设置为自适应模式或共享模式，而值为 0 表示不支持此功能。详情请查看`IA32_MISC_ENABLE MSR Bit 24`（L1 数据缓存上下文模式）的定义。

根据[英特尔® 64 和 IA-32 架构开发人员手册：卷。3A](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.html)（第 11 章/缓存控制），我在下面引用：

*   分享模式

> 在共享模式下，L1 数据缓存在逻辑处理器之间竞争共享。即使逻辑处理器使用相同的 CR3 寄存器和分页模式也是如此。在共享模式下，L1 数据缓存中的线性地址可以有别名，这意味着缓存中的一个线性地址可以指向不同的物理位置。解决混叠的机制可能会导致抖动。出于这个原因，IA32_MISC_ENABLE[bit 24] = 0 是基于支持英特尔超线程技术的英特尔 NetBurst 微架构的处理器的首选配置。

*   自适应模式

> 自适应模式有助于逻辑处理器之间的 L1 数据高速缓存共享。在自适应模式下运行时，如果出现以下情况，L1 数据缓存将在同一内核中的逻辑处理器之间共享：
> 
> • 共享高速缓存的逻辑处理器的CR3 控制寄存器是相同的。
> 
> • 共享高速缓存的逻辑处理器使用相同的分页模式。
> 
> 在这种情况下，每个逻辑处理器都可以使用整个 L1 数据缓存（而不是竞争共享）。如果共享 L1 数据缓存的逻辑处理器的 CR3 值不同，或者逻辑处理器使用不同的分页模式，则处理器会竞争缓存资源。这减少了每个逻辑处理器的高速缓存的有效大小。不允许缓存的别名（这可以防止数据抖动）。

我只是猜想没有明确的方法来划分 L1 数据缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:27:23.547

该文档只是指出，如果您使用自适应模式并且如果核心之间的 CR3 或分页模式不同，则缓存不会共享，并且核心会“竞争”缓存。它没有说明分区是如何工作的。

实现这一点的最直接方式是将数据缓存的一半路径静态保留给每个处理器。这实际上会将一半的数据缓存静态分配给每个处理器。

或者，他们可以在每个高速缓存行的虚拟标记中添加一个额外的位，以区分该行属于哪个处理器。这将允许缓存的动态分区。这比静态分区更适合缓存“竞争”的描述。

如果你真的需要知道，你可以设计一些微基准来验证这些方案是否被实际使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-01T13:51:14.547

L1 数据缓存在任何一种模式下都没有分区，并且总是竞争共享。

注意，手册中有一个明显的错误，模式不是由 context-ID 位决定的，而是由`IA32_MISC_ENABLE[24]`. 具有 HT 的 Northwood 和所有具有 HT 的 Prescott 处理器的后续步骤都支持此增强功能。默认值为零，表示自适应模式。但是，在某些处理器中，更新的 BIOS 可能会通过设置切换到共享模式，`IA32_MISC_ENABLE[24]`因为这些处理器中存在仅在自适应模式下发生的错误。

在使用 HT 的 Northwood 的早期步骤中，仅支持共享模式。在共享模式下，当向 L1 数据缓存发出加载请求时，该请求首先在“快速路径”上进行处理，这涉及根据线性地址的第 11-15 位进行路径预测并产生推测命中/结果错过信号。在具有 HT 的处理器中，还会比较逻辑内核 ID。部分标记和逻辑核心 ID 必须匹配才能获得推测性命中。一般来说，这有助于提高正确的投机命中率。

如果两个同级逻辑核心以相同的分页模式运行并且具有相同的 CR3 值，这表明来自两个核心的访问使用相同的页表（如果启用了分页），那么即使逻辑核心 ID 与缓存的快速路径不匹配。

在自适应模式下，每当分页模式或其中一个内核的 CR3 寄存器发生变化时，都会计算上下文 ID 值。如果寻呼模式和 CR3 值匹配，则上下文 ID 位设置为两个可能值之一。否则，将其设置为其他值。当向缓存发出加载请求时，会检查上下文 ID。如果指示内核具有相同的地址转换结构，则忽略逻辑内核ID比较结果，如果部分虚拟标签匹配，则产生推测命中。否则，逻辑核ID比较在共享模式下生效。

# sql - 为什么我应该“正常化（化）？”

> ID：12249904
> 
> 赞同：1
> 
> 时间：2012-09-03T14:36:41.320
> 
> 标签：sql, etl

我正在创建一个日志表，即使我是一名数据库程序员，而且我可能不想这样做，我正在创建该表，以便初始消息插入一个 guid 和 start_time——所有后续事务是对其他列的更新，这些列是数据加载的属性：ftp 连接，文件解压缩...

为什么这是个坏主意？我应该羞愧地低下头吗？我想要一张整洁、干净的桌子——一份工作，一行（我将构建我自己的逗号分隔的已处理文件列表（或者 id 列表怎么样？我将构建一个文件 id 列表）加入我下载的文件表...））

是/否？去公共汽车的后面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:47:02.087

这取决于您的插入和检索模式。如果您在一个事务中将所有文件插入到记录中，并且不需要查询单个文件名，那么您应该可以使用逗号分隔的文件。文件名列表是单个数据项，它不是非规范化的。

如果您在处理文件时将文件附加到日志记录，或者如果您需要查询/连接单个文件名，那么这些就是您的数据元素，您应该为它们准备一个表。

简而言之：有一个逗号分隔的列表是可以的，除非你必须附加到它，或者在某个时候拆分它。

我刚刚介绍了文件名，但在这种情况下，同样的想法也适用于其他类型的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:41:45.253

大多数时候我们使用日志**文件**而不是日志**表**的一个原因是：我们想知道发生了什么以及如何详细和按顺序进行。您的单一记录不**提供**这些详细信息...

# php - 将用户重定向到另一个网页后显示一条消息

> ID：12249906
> 
> 赞同：8
> 
> 时间：2012-09-03T14:36:51.340
> 
> 标签：php, javascript, html

我正在用 PHP 和 MySql 做 HTML。在用户执行了一些数据库操作后，我的系统将用户重定向到原始数据库页面，以便向他显示更新后的表。（我完成了这部分）。同时，我希望在原始页面（系统移动的那个页面）上向用户显示一条消息，以通知他操作成功。我怎么可能显示此消息？

这是我移动到其他页面的 php 代码。

```
Header( 'Location: Database.php'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T14:39:20.120

```
Header( 'Location: Database.php?success=1' ); 
```

在 Database.php 页面中：

```
if ( isset($_GET['success']) && $_GET['success'] == 1 )
{
     // treat the succes case ex:
     echo "Success";
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-03T14:42:48.123

将其存储在`session`“flash”消息中：

```
$_SESSION['message'] = 'success'; 
```

并`Database.php`在重定向后显示。显示后也删除其内容：

```
print $_SESSION['message'];
$_SESSION['message'] = null; 
```

这样做的好处是，每次用户刷新页面时都不会再次显示该消息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-03T14:41:14.283

你可以这样做：

```
$_SESSION['msg']="Updation successfully completed";
header("location:database.php"); 
```

在 database.php 上

```
echo $_SESSION['msg'];
unset($_SESSION['msg']); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-03T14:43:33.707

一种解决方案是将消息放在 php 文件中的 SESSION 中。所以在原始页面中，你会得到那个 SESSION 变量，并显示它。前任：

在你的 php 文件中：

```
session_start();
$_SESSION["message"]="MESSAGE OF SUCCESS" 
```

在您的原始文件中：

```
session_start();
    if(isset($_SESSION["message"]))
    {
        echo"SUCCESS OR THE MESSAGE SET IN THE VAR SESSION";
        unset($_SESSION["message"]);
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-17T11:43:26.560

解决这个问题的最好方法是在你的操作成功后在流程页面设置一个会话消息。然后在重定向页面中检查会话消息是否已设置。如果已设置，则只需回显该消息。下面的代码可能会对您有所帮助。

```
 $_SESSION['MSG']="Your data is saved";
 Header( 'Location: Database.php');
 exit;
 //now in the database.php page write at the top
  <?php
   if(isset($_SESSION['MSG'])){
   echo $_SESSION['MSG'];
   }
  ?>//its very simple,you can also format the message  by using different html attributes 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T14:41:17.147

在重定向到新页面之前，您可以设置一个带有您想要显示的消息的 cookie，在加载原始页面时，您将看到是否设置了这个特殊的 cookie，如果是，您可以显示存储在 cookie 中的成功消息。

# .net - 在高级版中打开终极版项目解决方案

> ID：12249907
> 
> 赞同：1
> 
> 时间：2012-09-03T14:36:57.543
> 
> 标签：.net, visual-studio, visual-studio-2010

是否可以在 Ultimate Edition 开发的 Visual Studio 2010 Premium Edition 中打开和使用 Project 文件？

Microsfot Visual Studio 2010 是否支持跨版本兼容性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:16:53.980

普通的 C# 或 VB.Net 项目可以正常打开，但仅在 Ultimate 中支持的架构建模等项目将无法在 Premium 中加载。但是这些项目通常不参与构建，因此您仍然可以构建高级解决方案。

# java - 在 AWT 上绘制图像并初始化 Graphics

> ID：12249914
> 
> 赞同：1
> 
> 时间：2012-09-03T14:37:52.487
> 
> 标签：java, graphics

如果没问题，我将首先告诉你我想做什么，因为我不确定我挣扎的路线甚至是实现我目标的最佳方式。

我有一个包含两个 JPanel 的 JFrame。一个包含许多按钮（buttonPanel），另一个最初是空白的（displayPane）。当按下按钮时，displayPanel 中显示的内容会发生变化。它的工作方式是每次按下按钮都会创建一个扩展 JPanel 的新对象，然后将其添加到 displayPane

因此，除了一种特殊情况外，以上所有内容都可以正常工作（尽管我坦率地承认这可能不是最好的方法）。

在这种特殊情况下，我需要创建一个 JLayeredPanel，然后在其上绘制一个剪切图像。JLayeredPanel 因为我想在它上面画一些东西，剪裁是因为我只想显示部分区域（确切的部分被传递给构造函数）。

现在，我遇到的问题是这个。我知道绘制剪切图像的唯一方法是通过`g=thingie.getGraphics(), g.setClip(Shape shape), g.drawImage(various)`. 然而，所有这些都依赖于能够获得图形。但是因为我首先组装对象，所以没有与 JLayeredPane 关联的图形对象（因为它没有显示），所以 getGraphics 返回 null 并`g.setClip()`抛出空指针异常。

显然，我以某种方式和某处做错了。任何帮助将不胜感激，如果问题令人困惑，对不起。我试图包含尽可能多的细节，现在我有点担心我把这个问题弄混了。我会密切关注这一点，并在需要时进行澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:04:26.617

## 警告！：错误答案，请参阅下面的行

为什么不直接创建一个新的 Graphics 对象，在其上绘画，然后将其与[`update()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#update%28java.awt.Graphics%29)方法一起使用？

```
Graphics g = new Graphics();
g.drawStuff();
thingie.update(g); 
```

* * *

## 这表明是正确的

如评论所述，先前的解决方案是错误的，但可以使用双缓冲区完成，创建缓冲图像并在其上绘制，然后覆盖 jLayeredPane 窗格的绘制方法以绘制图像。

```
 private void addStuff() {            
        BufferedImage bi =
            new BufferedImage(100, 100, BufferedImage.TYPE_4BYTE_ABGR);
        Graphics bufferedGraphics = bi.getGraphics();
        //Paint stuff
        bufferedGraphics.drawLine(0, 0, 50, 50);
        javax.swing.JLayeredPane layered;
        layered = new JLayeredPane() {
            @Override
            public void paint(Graphics g) {
                g.drawImage(bi, 0, 0, null);
            }
        };        
        this.add(layered);        
        this.validate();
        this.repaint();
    } 
```

# javascript - Ember.js 字符串到类

> ID：12249915
> 
> 赞同：0
> 
> 时间：2012-09-03T14:38:03.660
> 
> 标签：javascript, object, ember.js, objectinstantiation

我正在寻找一种将类名作为字符串实例化的新 ember 对象的方法：

```
App.MyObject = Ember.Object.extend({hello:'hello'});
//Try to do something like this.
App.myObject = Ember.create("App.MyObject", {hello:'Hello World!'});
console.log(App.myObject.hello); //productes 'Hello World!' 
```

有没有可能做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:38:50.127

我认为您不需要在特殊情况下使用 getter 和 setter。

你的解决方案是

```
Ember.get(window, "App.MyObject").create({hello:'Hello World!'}); 
```

但我认为一个简单的像：

```
var className = "MyObject";
App[className].create({hello:'Hello World!'}); 
```

将工作。

# url - Facebook url 被阻止时的 OAuth 对话框重定向 URL 选项

> ID：12249918
> 
> 赞同：2
> 
> 时间：2012-09-03T14:38:13.207
> 
> 标签：url, facebook-authentication, blocked

我们正在为一所私立学校创建一个应用程序。学校的技术团队已阻止学生访问 Facebook。对于我们的应用程序，我们必须对学校内的学生进行身份验证。是否有可用于访问 OAuth 对话框的备用 URL，以允许我们的应用程序在学校计算机上对用户进行身份验证，即使主要 Facebook URL 被阻止？

# php - CakePHP 和 suphp 套接字，由对等方重置连接

> ID：12249920
> 
> 赞同：0
> 
> 时间：2012-09-03T14:38:17.560
> 
> 标签：php, linux, apache, cakephp

在我的 Linux 服务器的日志中，我几乎每 5 分钟就有一次这个记录。我两周都找不到原因，如果你能推荐我一种诊断问题的方法，我会很高兴。

我的托管公司坚持认为问题出在我的代码中。我使用 CakePHP 2.2。但我找不到任何导致这个问题的东西。

记录在 error_log 文件中。我使用 php 5.3.8 和 litespeed。2012-09-03 16:01:28.399 [INFO] [95.7.223.91:63814-0#APVH_example.com 连接到 [/tmp/lshttpd/APVH_example.com_Suphp.sock。781]根据请求#151，确认，0，关联进程：845244，运行：0，错误：对等方重置连接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:51:24.237

请参阅下面的 URL，我认为可以解决您的问题：

[http://www.litespeedtech.com/support/forum/showthread.php?t=6125](http://www.litespeedtech.com/support/forum/showthread.php?t=6125)

如果没有解决您的问题，请告诉我。

**更新**

您可以通过 .htaccess 更改任何 PHP 设置，同样成功。如果要关闭“Zend Guard”，请在 .htaccess 文件中添加以下行。

代码：

```
php_value zend_optimizer.optimization_level = 0 
```

见以下网址：-

[http://forums.zend.com/viewtopic.php?f=57&t=7063](http://forums.zend.com/viewtopic.php?f=57&t=7063)

[http://www.webhostingtalk.com/showthread.php?t=947413](http://www.webhostingtalk.com/showthread.php?t=947413)

# ant - 如何在 ivy 中使用 [ext] 变量？

> ID：12249926
> 
> 赞同：1
> 
> 时间：2012-09-03T14:38:38.980
> 
> 标签：ant, ivy

我想使用 url 解析器来下载依赖。依赖是 JS 或 XML 文件。所以，我用：

> ```
> <url name="urlresolver">
>   <artifact pattern="http://[organisation]/[module]-[revision].[ext]" />
> </url> 
> ```

和

> ```
> <ivy:retrieve pattern="${build}/[module]-[revision].[ext]"/> 
> ```

该文件以 .jar 扩展名保存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T20:14:56.330

值得挖掘以下常春藤文档：

*   [术语](http://ant.apache.org/ivy/history/latest-milestone/terminology.html)
*   [主要概念](http://ant.apache.org/ivy/history/latest-milestone/concept.html)
*   [最佳实践](http://ant.apache.org/ivy/history/latest-milestone/bestpractices.html)

第一个问题是您的 url 解析器未配置为读取远程模块的 ivy 文件（忽略第一个建议，在 ivy 最佳实践中，对每个模块使用 ivy 文件）。如果没有模块元数据，常春藤将假定您正在尝试下载 JAR 文件。

第二个问题是您似乎没有使用 ivy 存储库来存储文件。以下依赖声明：

```
<dependency org="yourorg" name="module1" rev="9.1"/> 
```

将使用您当前的设置翻译成以下 URL：

```
http://yourorg/module1-9.1.jar 
```

“org”字段旨在指定发布模块的组织单位，而不是服务器主机名。

我怀疑您对构建文件存储库并不真正感兴趣，只是想说服 ivy 下载和缓存文件？在这种情况下，我建议阅读以下答案，该答案在[依赖项工件上使用](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency-artifact.html)[额外的属性](http://ant.apache.org/ivy/history/latest-milestone/concept.html#extra)来做类似的事情：

*   [使用 Ivy 解决 XSD](https://stackoverflow.com/questions/3132185/resolving-xsds-using-ivy/7492249#7492249)

# 例子

## 常春藤.xml

```
<ivy-module version="2.0" xmlns:e="http://ant.apache.org/ivy/extra">
    ..
    ..
    <dependency org="yourorg" name="yourmodule1" rev="9.1">
       <artifact name="file1"  e:hostname="www.server1.com" type="xml"/>
       <artifact name="file2"  e:hostname="www.server1.com" type="xml"/>
    </dependency>

    <dependency org="yourorg" name="yourmodule2" rev="9.1">
       <artifact name="file3"  e:hostname="www.server2.com" type="xml"/>
       <artifact name="file4"  e:hostname="www.server2.com" type="xml"/>
    </dependency>
    .. 
```

**笔记：**

*   每个依赖项声明每个工件的类型，以及附加的“主机名”属性。
*   如果远程模块有 ivy.xml，则[发布](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/publications.html)部分将存储此工件信息。
*   额外的工件展示了 ivy 在启用任何类型的自定义属性元数据方面的能力。

## 常春藤设置.xml

```
..
<url name="urlresolver">
      <artifact pattern="http://[hostname]/files/[organisation]/[module]-[revision].[ext]" />
</url>
.. 
```

演示解析器如何使用标准属性和自定义“主机名”。

# visual-studio-2012 - TFS 敏捷工作板定制

> ID：12249929
> 
> 赞同：4
> 
> 时间：2012-09-03T14:38:49.320
> 
> 标签：visual-studio-2012, tfs, agile, scrum

是否可以自定义工作板上显示的工作状态？

在 VS2012 之前，我们添加了一个新的“正在进行”的工作项状态，因此我们知道工作何时开始。

这些似乎不会显示在板上 - 只有处于活动状态的事物才会显示。

有没有办法解决？

我已经尝试修改`TaskWorkItems`元素——但板子保持不变，仍然只显示“活动”和“关闭”——它们也没有显示我们的 InProgress 任务：

```
 <TaskWorkItems category="Microsoft.TaskCategory">
    <States>
      <State type="Proposed" value="Active" />
      <State type="InProgress" value="InProgress" />
      <State type="Complete" value="Closed" />
    </States>
  </TaskWorkItems> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:37:21.280

我做了什么来管理这个（我不是 100% 确定它是 100% 正确的，TFS 是一个令人讨厌的过于复杂的野兽）。

您需要编辑任务工作流：在 Visual Studio 中，转到工具 | 流程编辑器 | 工作项类型 | 从服务器打开 WIT。选择任务并编辑布局以具有新状态和适当的转换。保存这个（不，它没有明显的方法 - 只需右键单击 VS 中的选项卡）。

然后导出您的常用配置：

```
witadmin exportcommonprocessconfig /collection:http://myserver:8080/tfs /p:"Test" /f:"CommonConfiguration.xml" 
```

像你一样编辑它，并将配置导入回服务器：

```
witadmin importcommonprocessconfig /collection:http://myserver:8080/tfs /p:"Test" /f:"CommonConfiguration.xml" 
```

如果您使用 TFS Power Tools，您可以在 Visual Studio 中更新这些以另存为模板，常见的配置是 ProcessTemplate.xml 中的选项卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:58:56.940

您可以在 MSDN上找到[自定义任务板所需的信息。](http://msdn.microsoft.com/en-us/library/hh739066.aspx)

该主题的关键信息如下：

> 任务板页面上显示的列标题对应于分配给任务类别的默认任务类型的工作流状态

检查默认任务工作项类型是什么以及您为其配置了什么状态。

# facebook - Facebook 上出现错误 191，但 URL 设置正确

> ID：12249930
> 
> 赞同：6
> 
> 时间：2012-09-03T14:38:50.413
> 
> 标签：facebook, api

我遇到了redirect_uri 的问题，但一切都设置正确。当它工作正常时，我将这段代码单独放置了一周，今天再次拿起它，这个错误就在那里，根本没有任何变化。

这是设置中应用程序的 URL：http: [//www.shifty.com.br/europa/quemtemboca/app/](http://www.shifty.com.br/europa/quemtemboca/app/) https://www.shifty.com.br/europa/quemtemboca/app/

这是应用程序页面： http: [//www.facebook.com/recifetest/](http://www.facebook.com/recifetest/)

共享工作得很好，现在它不是完全没有变化。很奇怪。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T14:57:49.747

这已被确认为最近的错误（但现在应该解决）。

[http://developers.facebook.com/bugs/273845842724431?browse=search_5044c4ed200421b93855472](http://developers.facebook.com/bugs/273845842724431?browse=search_5044c4ed200421b93855472)

你可以试试这个：

1 ) 将地址填入“Website with Facebook Login” => Site URL

2 ) 用您的域名填写“App Domains”。（如果您跳过第 1 步，您可能无法保存）

# c# - 表单在设计师中不断变白

> ID：12249931
> 
> 赞同：1
> 
> 时间：2012-09-03T14:38:51.820
> 
> 标签：c#, winforms, forms

当我执行以下步骤时，我的应用程序的主要形式在设计器中不断变白：

1）在设计模式下打开表单（此时所有控件都可见） 2）查看表单的源代码 3）切换回设计视图

执行上述步骤后，表单的设计模式下没有任何可见的内容（甚至是表单）。我的应用程序中只有一个表单存在这个问题，不幸的是，这是我的主要表单，其中有很多逻辑。解决方法是始终关闭表单并在设计模式下重新打开它，以显示所有组件再次可见。当我的可用内存不足时，我遇到了设计师的不稳定错误，但是这种形式总是会产生这种症状并且是唯一的一种。关于造成这种情况的任何想法？我想我总是可以创建一个新表单并尝试移动所有控件和逻辑，但是如果有更简单的选择，我宁愿避免这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:52:01.167

诊断是控件的 Paint 事件或 OnPaint 方法行为异常。这些方法在设计时运行，因此您将获得控件的准确可视化表示，例如，您可以在设计时看到 PictureBox 的 Image 属性。当这样的绘画事件陷入循环时，整个表单将停止正确渲染。除了一个简单的错误之外，典型的原因是代码在设计模式下被非标准的运行时环境弄糊涂了。您使用 DesignMode 属性来确保此类代码不会造成问题并在设计模式下被禁用。

找到行为不端的代码是一项挑战，尤其是当这些不是您自己编写的控件时。除了逐个删除控件以找到麻烦制造者之外，您还可以通过启动另一个 Visual Studio 实例并使用工具 + 附加到进程来附加到第一个实例来使用调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:17:22.067

根据个人经验，我可以确认这在 Visual Studio 2003 和 2005 中都是偶尔出现的问题，无论是使用 VB 还是 C#。我们将这两个版本都修补到了最新的服务包，甚​​至直接从 Microsoft 获得了修补程序，但都没有解决问题。

对于 Visual Studio 2003 中的 VB，控件的消失也删除了底层设计器代码，因此我们不得不从我们的版本控制系统中恢复已删除的代码。非常烦人 - 因为我们经常会丢失代码更改并且必须重新开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-05T10:45:05.497

您绝对应该检查下一个链接： [https ://weblog.west-wind.com/posts/2019/Feb/14/WPF-Hanging-in-Infinite-Rendering-Loop?fbclid=IwAR23ZnUrz7buVpFLXOX2qQin1WcifQ6h280EO25URO74NTGDkTedx1TDRb4](https://weblog.west-wind.com/posts/2019/Feb/14/WPF-Hanging-in-Infinite-Rendering-Loop?fbclid=IwAR23ZnUrz7buVpFLXOX2qQin1WcifQ6h280EO25URO74NTGDkTedx1TDRb4)

这是该页面的引用：

> 使用 StarDefinitionsCanExceedAvailableSpace Override 此设置会覆盖新的 GridRendering 行为，基本上可以让您在项目中使用 .NET 4.7.x 目标运行，但保留以前版本中使用的旧行为。
> 
> 可以在 app.config 中为您的应用程序设置一个配置设置：

```
<configuration>
     <runtime>
        <AppContextSwitchOverrides value="Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true"
     />
    </runtime>
</configuration> 
```

我可以验证使用该开关可以让我运行 4.7.1 并且在任何缩放模式下都看不到锁定。在我之后

> 在 4.6.2 中运行我的版本后，我再次在一个单独的分支中升级到 4.7.1 来尝试这一点，并且确实该开关使应用程序以 4.7.1 为目标运行。所以有一个hacky的解决方法。
> 
> 不过，这是一种解决方法。根据微软的说法，这个“修复”改进了网格渲染分配，提供更精确的大小，还提高了性能并减少了内存使用。在纸面上，这是一个很大的改进，但是......好吧，副作用
> 
> 我怀疑这个问题并不普遍，因为没有太多关于它的信息。我认为 Markdown Monster 提出了这个问题，因为启动序列有很多窗口操作。MM 使用 MahApps UI 框架，该框架为主窗口使用窗口动画和额外的渲染帧，并且 MM 本身将窗口移出屏幕以进行初始渲染，并在窗口不适合屏幕时根据屏幕尺寸和 DPI 设置调整窗口大小否则会在屏幕外。IOW，将初始窗口放到屏幕上比简单的 WPF 表单更有可能遇到此错误。
> 
> 所以我怀疑每个应用程序都需要担心这一点，但如果你有一个 4.7.x WPF 应用程序，那么在不同的分辨率和比例级别上尝试它可能是个好主意，只是看看它的表现如何。

# asp.net - Gridview还是更好？

> ID：12249936
> 
> 赞同：0
> 
> 时间：2012-09-03T14:39:11.693
> 
> 标签：asp.net, .net, linq

我知道我的帖子可能听起来有点傻，但是：我自己学习了 asp.net，现在我想知道是否有比 gridview 更好的方法来简单地使用具有排序/过滤/更新/插入/删除等功能的 linq 呈现数据。 ..

如果gridview仍然很常见，那么实现它们的最佳方法是什么？

提前感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:41:29.630

使用**ListView**，它可以让您更好地控制输出和行为。它与**DataSource**控件和**DataPager**完美结合。

[在这里](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)，您可以找到由 ASP.NET 大师 Scott Guthrie 编写的极其详细的教程。

# c# - 自定义字符串格式

> ID：12249938
> 
> 赞同：1
> 
> 时间：2012-09-03T14:39:22.160
> 
> 标签：c#, gridview, devexpress

我需要将布尔值格式化为字符串以支持多语言“Ja”/“Nein”。DisplayFormat 和 EditFormat 需要的正确格式字符串是什么？我在设计中使用 DevExpress 和 repositoryItemTextEdit 作为列编辑器，但我认为它与任何其他绑定字符串格式相同。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:31:32.897

您绝对应该将文字值“Ja”/“Nein”提取到本地化资源中。**老金**的反应很好，但我会用例子稍微扩展一下。

首先，定义自定义格式提供程序，它将以某种方式使用本地化

```
public class LocalizedBoolFormatter : IFormatProvider, ICustomFormatter
{
    public string Format(string format, object arg, IFormatProvider formatProvider)
    {
        bool value = (bool)arg;
        format = (format == null ? null : format.Trim().ToLower());

        switch (format)
        {
            case "yn":
                return GetLocalizedBool(value);
            default:
                return HandleDefaultFormat(arg, format, formatProvider);
        }
    }

    public object GetFormat(Type formatType)
    {
        if (formatType == typeof(ICustomFormatter))
            return this;
        else
            return null;
    }
} 
```

私有方法`LocalizedBoolFormatter` 可能如下所示：

```
private string HandleDefaultFormat(object value, string format, IFormatProvider formatProvider)
{
    if (value is IFormattable)
        return ((IFormattable)value).ToString(format, formatProvider);
    else
        return value.ToString();
}

private string GetLocalizedBool(bool value)
{
    //extract from localization resources  
    //or use CultureInfo.CurrentCulture for poors man localization 
    return value ? "Ja" : "Nein";
} 
```

然后您可以使用自定义格式化程序简单地格式化值，该格式化程序将由格式化程序本地化

```
bool f = false;
string formatted = string.Format(new LocalizedBoolFormatter(), "{0:yn}", f);
Console.WriteLine (formatted); 
```

使用 DevExpress [RepositoryItemTextEdit](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsRepositoryRepositoryItemTextEdittopic)，您可以使用[自定义格式](http://documentation.devexpress.com/#WindowsForms/CustomDocument2142)，如下所示：

```
repositoryItemTextEdit.DisplayFormat.Format = new LocalizedBoolFormatter();
repositoryItemTextEdit.DisplayFormat.FormatType = FormatType.Custom; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T14:48:10.767

布尔值无法自动转换为当前语言环境。您可以使用扩展方法来翻译它们：

```
public static string ToPrettyString(this bool value) {
    return value ? YourResource.TrueValue : YourResource.FalseValue;
} 
```

如果您需要更大的灵活性，请检查答案[Boolean Format String - Yes/No 而不是 True/False](http://forums.asp.net/t/1127044.aspx/3/10)，其中还有一个实施示例`IFormatProvider`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-19T18:55:28.810

最简单的方法是为格式化值使用不同的属性或列。您还可以使用数据绑定的 Parse/Format 事件：

```
repositoryItemTextEdit1.DataBindings[0].Format += new ConvertEventHandler(repositoryItemTextEdit1_Format);

repositoryItemTextEdit1.DataBindings[0].Parse += new ConvertEventHandler(repositoryItemTextEdit1_Parse);

void repositoryItemTextEdit1_Format(object sender, ConvertEventArgs e)
{
   return e.Value ? "Ja" : "Nein";
}

void repositoryItemTextEdit1_Parse(object sender, ConvertEventArgs e)
{
   return e.Value.Equals("Ja") ? yes : no;
} 
```

# c++ - allegro 5 以特定间隔执行事件

> ID：12249942
> 
> 赞同：4
> 
> 时间：2012-09-03T14:39:57.477
> 
> 标签：c++, allegro, allegro5

我正在制作我在 allegro 5 中的第一款游戏，这是一款蛇类游戏。为了移动蛇游戏，我想使用我制作的方形网格，所以蛇会定期移动。

如何使用计时器使事件在特定时间发生？

例如，我希望我的蛇每秒按设定的方向移动，我知道如何控制它，但我不知道如何创建一个以特定间隔发生的事件。我在 Windows XP SP3 中使用 Codeblocks IDE

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T17:23:59.073

大多数使用 Allegro 创建游戏的人都使用固定间隔计时系统。这意味着每秒 X 次（通常是 60 或 100 次），您处理输入并运行一个逻辑循环。然后，如果您有剩余时间，您可以绘制一帧图形。

要创建一个以 60 FPS 滴答作响的计时器并将其注册到事件队列中：

```
ALLEGRO_TIMER *timer = al_create_timer(1 / 60.0);
ALLEGRO_EVENT_QUEUE *queue = al_create_event_queue();

al_register_event_source(queue, al_get_timer_event_source(timer)); 
```

现在在你的主事件循环中的某个地方：

```
al_start_timer(timer);
while (playingGame)
{
  bool draw_gfx = false;

  do
  {
    ALLEGRO_EVENT event;
    al_wait_for_event(queue, &event);

    if (event.type == ALLEGRO_EVENT_TIMER)
    {
      do_logic();
      draw_gfx = true;
    }
    else if (event.type == ... )
    {
      // process keyboard input, mouse input, whatever
      // this could change the direction the snake is facing
    }
  }
  while (!al_is_event_queue_empty(queue));

  if (draw_gfx)
  {
    do_gfx();
    draw_gfx = false;
  }
} 
```

所以现在在 中`do_logic()`，您可以将蛇朝它所面对的方向移动一个单位。这意味着它将每秒移动 60 个单位。如果需要更多粒度，可以使用小数单位。

您可能想看看 Allegro 附带的一些演示，因为它们具有功能齐全的事件循环。作为一个单一的 SO 答案包含的内容太多了。

# php - 如何将所有相对图像路径替换为css的绝对路径

> ID：12249943
> 
> 赞同：0
> 
> 时间：2012-09-03T14:40:00.393
> 
> 标签：php, css

我想将所有相对背景图像路径替换为绝对路径。在尝试了这么多时间之后，我未能解决这个问题。我当前的代码只解决了最后一个图像路径。我在此代码中使用了路径解析器函数（来自此参考：[url_to_absolute()](http://publicmind.in/blog/urltoabsolute/)）。

```
<?php

require './url_to_absolute.php';
$css = "
    .selector1{
        background-image:url(../dir1/images/image.jpg);
        width:100%;
    }
    .selector2{
        background-image:url(\"../dir1/images/image2.jpg\");
        color:black;
    }
    .selector3{
        background-image:url( 'dir1/images/image3.jpg' );
        text-align:left;
    }
    .selector4{
        background-image:url( \"dir1/images/image4.jpg\" );
        text-align:left;
    }           
" ;
$base_url = 'http://www.example.com/'; 

$pattern  = "/(?<=\()(.*?)(?=\))/s";
preg_match_all($pattern, $css, $matches);

foreach($matches[1] as $url){
        $url = trim($url);
        $url = str_replace("\"", "", $url);
        $url = str_replace("'", "", $url);
        $full_path = url_to_absolute($base_url, $url);
        $new_css = str_replace($url, $full_path, $css);     
}
print $new_css;

?> 
```

它产生结果 -

```
.selector1{ background-image:url(../dir1/images/image.jpg); width:100%; } 
.selector2{ background-image:url("../dir1/images/image2.jpg"); color:black; } 
.selector3{ background-image:url( 'dir1/images/image3.jpg' ); text-align:left; } 
.selector4{ background-image:url( "http://www.example.com/dir1/images/image4.jpg" ); text-align:left; } 
```

请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T11:32:17.887

虽然我很欣赏公认的答案，但它可能是我在 PHP 中见过的最复杂的函数之一......

这个更容易掌握（根据您的需要调整正则表达式）：

```
function urlsToAbsolute($baseUrl, $html) {

    preg_match_all('/(href="|src=")([^"#]+)(")/i', $html, $matches);

    foreach ($matches[2] as $num => $match) {
        $codec[$match] = url_to_absolute($baseUrl, $match);
    }

    return strtr($html, $codec);
} 
```

# linux - Linux 设备文件丢失

> ID：12249945
> 
> 赞同：1
> 
> 时间：2012-09-03T14:40:10.350
> 
> 标签：linux, driver, linux-device-driver, device-driver

我在`/sys/class/graphic/XM_403` But in `/dev/`is no XM_403 文件中找到了驱动程序特定的东西。

这是相关的代码。

```
 graphic_class = class_create(THIS_MODULE,"graphic");
    device_create(graphic_class,NULL,MKDEV(MAJOR_NR,minor),NULL,"XM_403"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:11:46.253

[`device_create`](https://www.kernel.org/doc/htmldocs/device-drivers/API-device-create.html)在 sysfs 中创建一个文件，这正是您所看到的。

通常它[`udev`](http://doc.opensuse.org/documentation/html/openSUSE/opensuse-reference/cha.udev.html)会创建设备文件。

# winforms - 从编码的 UI 测试中的文本框中读取文本

> ID：12249948
> 
> 赞同：2
> 
> 时间：2012-09-03T14:40:12.940
> 
> 标签：winforms, coded-ui-tests

Coded UI Test`WinEdit`类中存在错误/限制：在覆盖`OnKeyDown`方法或订阅`KeyDown`文本框中的事件时，无法使用该`WinEdit.Text`属性。

也就是说，当你有这个...

```
private void myTextbox_KeyDown(object sender, KeyEventArgs e)
{
    // ...
} 
```

...这行不通：

```
var edit = new WinEdit(ancestor);
edit.SearchProperties[WinControl.PropertyNames.ControlName] = "myTextbox";
edit.Text = "New value"; // This doesn't work 
```

我找到了在[这里](http://social.msdn.microsoft.com/Forums/pl-PL/vsautotest/thread/224da6d4-47f3-44e6-a383-63b3e32bbfb4)设置值的解决方法：

```
var edit = new WinEdit(ancestor);
edit.SearchProperties[WinControl.PropertyNames.ControlName] = "myTextbox";
Mouse.Click(edit);
System.Windows.Forms.SendKeys.SendWait("New value"); 
```

**我的问题：**有人知道读取值的解决方法吗？

```
var edit = new WinEdit(Window);
edit.SearchProperties[WinControl.PropertyNames.ControlName] = "myTextbox";
string actual = edit.Text; // This doesn't work 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:35:08.080

我自己找到了一个解决方法：

```
[DllImport("user32.dll", EntryPoint = "SendMessage", CharSet = CharSet.Auto)]
public static extern bool SendMessage(IntPtr hWnd, int msg, int wParam, StringBuilder lParam);

const int WM_GETTEXT = 0x000D;

var edit = new WinEdit(Window);
edit.SearchProperties[WinControl.PropertyNames.ControlName] = "myTextbox";
var sb = new StringBuilder(1024);
SendMessage(edit.WindowHandle, WM_GETTEXT, sb.Capacity, sb);
string actual = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-15T14:18:07.367

解决方案是：

假设您有一个带有一个文本框的窗口窗体。

```
//Launch your Application
ApplicationUnderTest mainWindow = 
ApplicationUnderTest.Launch(@"D:\Samples\YourApplication.exe");

//Search Text box in your windows Form
var username = new WinWindow(mainWindow);
username.SearchProperties[WinControl.PropertyNames.ControlName] = "txtUserName";

//To Set Text or get, Initialize WinEdit object and asign searched object username to WinEdit object editUsername
WinEdit editUsername = new WinEdit(username) {Text = "Pakistan"};

//get text from textbox username
string text = editUserName.Text; 
```

谢谢，

# javascript - 谷歌地图检查圆圈区域是否在地图边界内可见

> ID：12249949
> 
> 赞同：0
> 
> 时间：2012-09-03T14:40:13.640
> 
> 标签：javascript, google-maps

我有一个包含圆形区域的谷歌地图。

我想知道圆圈当前是否在地图边界内可见。

到目前为止我发现的是检查圆的**中心**是否在边界内，但我想检查整个圆，而不仅仅是它的中心。

我检查地图当前中心是否在圆圈边界内的代码是：

```
 google.maps.event.addListener(map, 'bounds_changed', function() 
            {                    
                var circleBounds = circle.getBounds();
                console.log(circleBounds.contains(map.getCenter()));
            }); 
```

所以我想要的是这样的东西，这当然是不正确的：

```
circleBounds.contains(map.getBounds()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:10:34.703

1.  Determine what the northmost, southmost, westmost, and eastmost LATLNGs of the circle are. You can find this given the circle radius

2.  Determine if all points are inside the viewport bounds

3.  If true, then yes, the circle must be viewable!

and you really should go back to your old questions and ACCEPT them (click on the check mark outline next to the best answer). This is how you show your appreciation for the hard work your answerers provided.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-25T06:39:40.210

这是一个古老的问题——互联网时代的恐龙时代——但如果你要比较两个界限，那么下面*的问题更是如此*，*n'est-ce pas* ?：

```
if(a.getBounds().contains(b.getBounds().getNorthEast()) 
&& a.getBounds().contains(b.getBounds().getSouthWest()))
{console.log('B is within A... Bounds are RECTANGLES: \
              You only need to test two \ 
              diagonally-opposing corners')}; 
```

这是因为对于一个矩形 R，SW 是 ( `max(x),min(y)`)；NE 是 ( `min(x),max(y)`) - 因此`x,y`R 中的所有 ( ) 都包含在测试中。

我当然希望是这样 - 这就是我进行所有边界比较的方式......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:15:58.360

谢谢蒂娜 CG 霍尔。

以防万一其他人想要这个，这是我的问题的代码：

```
// Get the bounds
var circleBounds = circle.getBounds();      
var ne = circleBounds.getNorthEast(); // LatLng of the north-east corner
var sw = circleBounds.getSouthWest();
var nw = new google.maps.LatLng(ne.lat(), sw.lng());
var se = new google.maps.LatLng(sw.lat(), ne.lng());

google.maps.event.addListener(map, 'bounds_changed', function() 
{                    
    var mapBounds = map.getBounds();

    // Log whether the circle is inside or outside of the map bounds
    if(mapBounds.contains(ne))
    {
        console.log("northeast is viewable");
    }
    if(mapBounds.contains(sw))
    {
        console.log("southwest is viewable");
    }
    if(mapBounds.contains(nw))
    {
        console.log("northwest is viewable");
    }
    if(mapBounds.contains(se))
    {
        console.log("southeast is viewable");
    }
}); 
```

# asp.net - visual studio 2010 asp.net gridview 不是已知元素

> ID：12249952
> 
> 赞同：0
> 
> 时间：2012-09-03T14:40:17.740
> 
> 标签：asp.net, visual-studio-2010, gridview

我正在使用带有 SP1 的 VS2010 Pro。出于某种原因，它抱怨我所有的 Gridview 控件，仅此而已。我在标记中看不到任何错误。

到目前为止，我已经尝试了 2 件事

1.  按照此处的说明[http://www.gotknowhow.com/articles/fix-validation-element-not-supported-visual-studio-2010](http://www.gotknowhow.com/articles/fix-validation-element-not-supported-visual-studio-2010)

2.  删除我的解决方案 .suo 文件

这些都不起作用。我仍然遇到同样的问题。我通过谷歌找到的只是数百人在使用各种不同的控件时遇到了同样的问题。

还有什么我可以尝试的吗？

谢谢，

骏马。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:44:02.397

它出现在第三次尝试删除“ReflectedSchemes”文件夹时，问题就消失了。不管怎么说，还是要谢谢你。

# javascript - AJAX 加载器动画未显示

> ID：12249956
> 
> 赞同：0
> 
> 时间：2012-09-03T14:40:30.350
> 
> 标签：javascript, ajax

我有一个 AJAX 脚本，一旦执行就应该触发加载图像，然后在我从 Web 服务获得结果后将其隐藏，但是图像现在正在显示。

我的代码如下：

```
 <script type="text/javascript">
        function get_Code_Results() {
            document.getElementById("loader").innerHTML = "<img src=\'loading.gif\' />";
            var url = document.location;
            if (window.XMLHttpRequest) req = new XMLHttpRequest();
            else if (window.ActiveXObject) req = new ActiveXObject("Microsoft.XMLHTTP");
            req.onreadystatechange = processRequest;
    //      req.open("GET", url, true);
    //      req.send(null);
            req.open("POST",url,true);
            req.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            req.send("isbns="+document.getElementById("Code").value);
            function processRequest() {
        if (req.readyState == 4 && document.getElementById("1").checked == true) {
            document.getElementById("results").value = "myfirsturl.com" + req.responseText;
        }
        else if (req.readyState == 4 && document.getElementById("2").checked == true) {
            document.getElementById("results").value = "myurl.com" + req.responseText;
        }           
    }
}
    </script> 
```

我有一个位置，我希望显示加载器：

```
 <div id="loader"><img src="loading.gif" style="display:none;" /></div> 
```

我的代码哪里有错误？一些建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:45:30.307

```
 <div id="loader"><img src="loading.gif" style="display:none;" /></div> 
```

您需要更改`style="display:none;"`. 我建议您改为编写以下代码：

```
<div id="loader" style="display:none;"><img src="loading.gif" /></div> 
```

然后在需要时：

```
$('#loader').show(); // To show the laoding icon
$('#loader').hide(); // To hide it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:47:23.353

您的函数是嵌套的。我猜你假装写这样的东西：

```
function get_ISBN_Results() {
            document.getElementById("loader").innerHTML = "<img src=\'loading.gif\' />";
            var url = document.location;
            if (window.XMLHttpRequest) req = new XMLHttpRequest();
            else if (window.ActiveXObject) req = new ActiveXObject("Microsoft.XMLHTTP");
            req.onreadystatechange = processRequest;
    //      req.open("GET", url, true);
    //      req.send(null);
            req.open("POST",url,true);
            req.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            req.send("isbns="+document.getElementById("isbns").value);
}
function processRequest() {
        if (req.readyState == 4 && document.getElementById("book").checked == true) {
            document.getElementById("results").value = "myfirsturl.com" + req.responseText;
        }
        else if (req.readyState == 4 && document.getElementById("magazine").checked == true) {
            document.getElementById("results").value = "myurl.com" + req.responseText;
        }           
 } 
```

# java - 双击检查 Java

> ID：12249958
> 
> 赞同：0
> 
> 时间：2012-09-03T14:40:40.320
> 
> 标签：java, keyboard, awt

您如何应用按键监听器进行双击？也就是说，你打一次它就会打开，然后你再打一次它就会关闭。我可以通过 LWJGL 键盘做到这一点，但不能通过 AWT 的 KeyEvent 做到这一点。你怎么能用 AWT 做到这一点？

我的尝试：

```
public static void fullscreenKey(KeyEvent e2, JFrame frame)
{
    int key = e2.getKeyCode();
    if(key == KeyEvent.VK_F1)
    {
        fullscreen(false, frame);
        f1 = false;
    }
    if(key == KeyEvent.VK_F1 && !f1)
    {
        fullscreen(true, frame);
        f1 = true;
    }
} 
```

我还需要在其他类中调用这个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:48:39.550

看来你打`fullscreen`了两次电话：

```
public static void fullscreenKey(KeyEvent e2, JFrame frame)
{
    int key = e2.getKeyCode();
    if(key == KeyEvent.VK_F1)
    {
        // This always executes if VK_F1 is pressed,
        // setting f1 to false
        fullscreen(false, frame);
        f1 = false;
    }
    if(key == KeyEvent.VK_F1 && !f1)
    {
        // f1 is now false, so this will execute too!
        fullscreen(true, frame);
        f1 = true;
    }
} 
```

你也许应该尝试：

```
public static void fullscreenKey(KeyEvent e2, JFrame frame)
{
    int key = e2.getKeyCode();
    if(key == KeyEvent.VK_F1)
    {
        fullscreen(!f1, frame);            
        f1 = !f1;
    }     
} 
```

# layout - 带有拆分器的 Dojo dijit 布局 ContentPane - 以编程方式更改区域方向

> ID：12249965
> 
> 赞同：1
> 
> 时间：2012-09-03T14:41:11.083
> 
> 标签：layout, dojo, splitter, contentpane

我使用两个窗格（网格和细节）作为主细节模式。现在我正在尝试创建“右侧的详细信息”或“底部的详细信息”切换按钮。我通过更改 ContentPane 的区域属性来做到这一点，如下所示：

```
function toggleDetails() {
     if(dijit.byId("Details").region == "right") {
        dijit.byId("Details").set("region", "bottom");
        dojo.byId("Details").style.height = "200px";
     }
     else {
         dijit.byId("Details").set("region", "right");
         dojo.byId("Details").style.width = "400px";
     }
     dijit.byId("DetailsParent").resize();
 } 
```

窗格本身正在改变。**问题是我有一个用于详细信息窗格的拆分器。切换时，拆分器可以用于原始方向，但不能正确渲染备用方向。**任何基于 contentPane 区域刷新拆分器方向的解决方案？

我已经尝试以编程方式更改一些拆分器小部件属性，例如“水平”和“区域”，但没有真正修复备用方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-05T05:46:56.193

一个可能的解决方案是使用 removeChild 和 addChild 就像在这个例子中一样

```
 if (isVertical) {

            // vertical layout 

            this.ap_MainContainer.removeChild(this.ap_TopContainer);

            this.ap_TopContainer.region = 'top';

            this.ap_MainContainer.addChild(this.ap_TopContainer);

        } else {

            // horizontal layout

            this.ap_MainContainer.removeChild(this.ap_TopContainer);

            this.ap_TopContainer.region = 'left';

            this.ap_MainContainer.addChild(this.ap_TopContainer);
        } 
```

# php - Smarty gettext 本地化

> ID：12249966
> 
> 赞同：2
> 
> 时间：2012-09-03T14:41:12.657
> 
> 标签：php, smarty, gettext, setlocale

我在使用 gettext 时遇到问题。

这就是我设置语言环境的方式：

```
 $lang = 'romanian';

  putenv("LANG=$lang");
  $smarty->assign('lang',$lang);

  setlocale(LC_ALL, $lang); 
  if (setlocale(LC_ALL, $lang)==false) print ' false'; else print setlocale(LC_ALL, $lang); 

  bindtextdomain("messages", realpath("../locale")); 
  textdomain("messages"); 
```

这会打印`Romanian_Romania.1250`，所以我想 setlocale 函数运行正常。

我的 .tpl 文件中的示例：

```
{_('Login')}:<br>
<b style="color:blue;">{$user.name}</b>
<br>
<a href="logout.php">{_('Logout')}</a> 
```

我在文件夹中创建了一些带有翻译的`\locale`文件夹。`sk_SK`是我的默认语言 - 斯洛伐克语和罗马尼亚语，例如：`romanian`, `ro_RO`, `ro_RO.1250`, `Romanian_Romania`, `Romanian_Romania.1250`. 它们中的每一个都包含一个带有翻译的pot文件 - `\LC_MESSAGES\messages.pot`.

发生的情况是：文件夹中的任何翻译`sk_SK`都会被翻译。如果我重命名文件夹，我会正确翻译所有内容。但不管我做什么，没有其他文件夹被占用。我处理这个问题已经有一段时间了，我尝试了几种语言设置和很多不同的文件夹名称。

示例 1：

在 sk_SK 文件夹中，我有带有字符串“Login”-“SKSKSK”翻译的 pot 文件

在 ro_RO 文件夹中，我有带有字符串“登录”-“RORORO”的翻译的 pot 文件

在浏览器中我看到“SKSKSK”

示例 2：

在 sk_SK 文件夹中，我有带有字符串“登录”-“RORORO”的翻译的 pot 文件

在 ro_RO 文件夹中，我有带有字符串“登录”-“SKSKSK”翻译的 pot 文件

在浏览器中我看到“RORORO”

我想知道这个问题是否与Smarty有关。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:02:33.370

阅读并查看下面的 URL，我认为这对您很有帮助。

[本地化使用什么（php/smarty/pear 应用程序）？](https://stackoverflow.com/questions/3852242/what-to-use-for-localization-php-smarty-pear-application)

为了不依赖于 php 扩展的可用性，您应该回退到[http://launchpad.net/php-gettext](http://launchpad.net/php-gettext)，它提供了 gettext 的纯 php 实现。

gettext 还有一个很大的优势，那就是存在许多可以轻松翻译这些文件的工具。

# jquery - jQuery通过变量值改变css属性

> ID：12249967
> 
> 赞同：-2
> 
> 时间：2012-09-03T14:41:12.483
> 
> 标签：jquery, css, height

试图根据窗口大小获得 100% 的高度。

```
<script>
    $(document).ready(function(){
        var contHeight = $(window).height();
        $('#container').css("height",contHeight + "px");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:47:04.733

工作小提琴

[http://jsfiddle.net/mzpa4/](http://jsfiddle.net/mzpa4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:53:08.160

您也可以尝试：

```
$(window).on('load resize',function(){
    var contHeight = $(window).height();
    $('#container').css("height",contHeight + "px");
}); 
```

这样即使用户调整窗口大小，高度也会保持在窗口高度，正如@adeneo 建议的那样

[http://jsfiddle.net/mzpa4/3/show/](http://jsfiddle.net/mzpa4/3/show/)

# android - 适用于 Android 的 Facebook 代码

> ID：12249975
> 
> 赞同：2
> 
> 时间：2012-09-03T14:41:33.317
> 
> 标签：android, facebook, facebook-graph-api, android-layout

我想使用 Facebook 代码显示我的 android 应用程序当前播放的音频文件名，例如 spotify。我想随着音频文件更改而不断更改代码，我在谷歌上搜索我没有找到任何教程或示例。请分享我如何在我的应用程序中实现这个代码我是新人请指导我等待回复

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:47:48.273

您必须使用 Open Graph API 来实现您的应用程序。有一个称为“听”的内置操作。

[https://developers.facebook.com/docs/opengraph/actions/builtin/#listen](https://developers.facebook.com/docs/opengraph/actions/builtin/#listen)

# c++ - 在 C++ 中读取二进制文件

> ID：12249976
> 
> 赞同：1
> 
> 时间：2012-09-03T14:41:38.100
> 
> 标签：c++, binaryfiles

我正在尝试编写一个使用 C++ 读取二进制文件的程序。我遇到了一些不寻常的输出，我希望得到一些帮助。

我有一个以这 4 个字节开头的二进制文件：

A1 B2 C3 D4（使用 验证`hexdump -C`）

这是我用来读取这 4 个字节的代码：

```
#include <iostream> // for reading and writing files
#include <fstream>

using namespace std;

char * buffer;
unsigned int LENGTH = 4;

int main(int argc, char ** argv)
{
    // open the binary file
    ifstream infile ("dump", ios::binary | ios::in);

    // create a buffer
    buffer = new char[LENGTH];

    // read LENGTH bytes from the file
    infile.read(buffer, LENGTH);

    // append the null byte to terminate the string
    buffer[LENGTH] = '\0';

    // loop over the 4 bytes read, and print
    for(int i = 0; i < LENGTH; i++)
    {
       printf("Buffer[%d] is %X\n", i, buffer[i]);
    }

    delete[] buffer;
    infile.close();

    return 0;
} 
```

这个程序给了我这些实际结果：

```
Buffer[0] is FFFFFFA1
Buffer[1] is FFFFFFB2
Buffer[2] is FFFFFFC3
Buffer[3] is FFFFFFD4 
```

但是，我希望这些结果：

```
Buffer[0] is A1
Buffer[1] is B2
Buffer[2] is C3
Buffer[3] is D4 
```

谁能向我解释 3 0xFF 字节的来源？它似乎只影响文件的前 4 个字节，接下来的 4 个字节按预期打印出来，没有任何 0xFF 字节前面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T14:44:30.463

当`char` `buffer[i]`作为变量参数传递时，默认提升。要获得正确的值，请说`static_cast<unsigned char>(buffer[i])`.

此外，`buffer[LENGTH]`超出范围，因此行为未定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T14:42:57.390

您无法读取`LENGTH`内容字节，*并*`LENGTH`在size 的缓冲区中的偏移处终止`LENGTH`。这是一个错误的错误。

```
buffer = new char[LENGTH]; 
```

这为您提供了`LENGTH`字符空间，索引为 0 到`LENGTH - 1`. 所以这：

```
buffer[LENGTH] = '\0'; 
```

在分配的内存之外写入，调用未定义的行为。

# iis-7 - Windows 2008 - 找不到源，但无法搜索部分或全部事件日志

> ID：12249981
> 
> 赞同：0
> 
> 时间：2012-09-03T14:41:57.840
> 
> 标签：iis-7, asp-classic, windows-server-2008-r2

我一直在挖掘一个旧的经典 ASP 应用程序并将其安装在 Windows 2008 服务器上，但是当它应该抛出错误时，它似乎会抛出这个错误：

```
System

error '8013150a' 

The source was not found, but some or all event logs could not be searched. Inaccessible logs: Security. 
```

所以它似乎引发了进一步的错误，因为我无权写入事件查看器，所以我看不到原始错误是什么！我已经研究了很多关于此的答案，例如在 HKEY_LOCAL_MACHINE 中的 EventLog 和 Applications 文件夹上添加注册表权限，但没有成功。我想知道经典 asp 的情况是否有所不同 - 在此之前有没有人遇到过这个问题可以帮助我解决这个令人发指的错误？

谢谢

编辑 - 我在该服务器上运行其他 .NET 应用程序，这些应用程序写入事件查看器。它似乎仅限于经典的 asp 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:14:18.687

您的应用程序可能正在尝试写入不存在的事件源。您可以按如下方式创建事件源：[如何从命令行创建 Windows EventLog 源？](https://stackoverflow.com/questions/446691/how-to-create-windows-eventlog-source-from-command-line).

确定您的应用程序尝试写入的事件源并创建它。

# python - 如何使用 python 套接字模块读取 HTTP 响应？

> ID：12249984
> 
> 赞同：0
> 
> 时间：2012-09-03T14:42:06.297
> 
> 标签：python, sockets, proxy

我正在使用 python 套接字模块实现一个简单的网络代理。将客户端的 HTTP 请求转发到服务器后，我使用以下方法读取响应：

```
def _read_response(self):
    response = ''
    while True:
        (readable, _, error) = select.select([self.server], [], [self.server], 3)
        if error:
            break
        if readable:
            data = self.server.recv(BUFSIZE)
            if not data: break
            response += data
    return response 
```

上面的代码似乎在大多数情况下都可以工作，但是速度很**慢**。我将这个问题缩小到这一行：

```
data = self.server.recv(BUFSIZE) 
```

当不再有任何数据要接收时（当 data == '' 时），此调用需要 20 秒以上。

读取 http 响应的正确方法是什么，为什么调用 recv() 需要这么长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:49:53.410

在读取正文之前解析**内容长度标头。**然后从服务器只读取**内容长度**字节。

您可能希望通过以下方式设置套接字的非阻塞模式：

```
socket.setblocking(flag) 
```

或在套接字操作上设置超时：

```
socket.settimeout(value) 
```

# mysql - MySQL 更新 current_timestamp 不起作用

> ID：12249985
> 
> 赞同：0
> 
> 时间：2012-09-03T14:42:07.417
> 
> 标签：mysql

我有一个带有列的 mysql 表`updated_at default current_timestamp on update current_timestamp`。

每当我使用查询（直接或通过 php 代码）更新行时，值`updated_at`都会更新，但每当该行被其他表的触发器更新时，`updated_at`值都不会改变。我希望这也发生。

有什么建议么？这个问题的原因？

table1的相关行

```
Field             | Type             | Null | Key | Default           | Extra                       
updated_at        | timestamp        | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP 
```

每当表 2 中的某个列被更新时，表 2 中的触发器就会更新表 1 中的某些列。注意：时间戳不会在触发器中更新。我希望 MySQL 会自动执行此操作。

另外我正在使用主从复制，问题出在主从复制上。主从复制的日志格式是语句日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:37:50.287

这是使用触发器更新时间戳的简单示例：

首先你应该有两个（*简单的*）表：

表名为***`TriggerTable`***

```
#Field     #Type         #Function
 1  id      int(11)       AUTO_INCREMENT 
 2  data    varchar(52) 
```

表名为***`UpdatesHere`***

```
#Field     #Type         #Function
 1  id      int(11)       AUTO_INCREMENT 
 2  time    timestamp     NOW(), on update NOW() 
```

### 然后是触发

`TriggerTable`添加在每次更新 时执行的触发器：

```
CREATE TRIGGER `TriggerTableOnUpdate` 
    AFTER UPDATE ON `TriggerTable` 
    FOR EACH ROW 
    BEGIN 
        UPDATE `UpdatesHere` SET `time`=NOW() WHERE `id`=NEW.id; 
    END 
```

之后，如果您进行更新，`TriggerTable`它也应该更新`UpdatesTable`。它只是更新具有相同 ID 的列。

### 例如：

```
UPDATE  `TriggerTable` SET `data`='Hello World' WHERE `id`=1; 
```

`time`将在 table中用`id`1更新行中的列`UpdatesHere`。

***注意：***在定义触发器时更改分隔符`DELIMITER [`*`delimiter`*`]`

# php - ios 到 php EXC_BAD_ACCES 数据对象

> ID：12249986
> 
> 赞同：-1
> 
> 时间：2012-09-03T14:42:09.587
> 
> 标签：php, ios, exc-bad-access

我有个问题，

我需要将其发送到 php 文件。只有我得到一个 EXC_BAD_ACCES。

也许是因为我需要释放一个数据对象。但我不知道我的数据对象是什么。

我从[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)复制了这个。

也许你可以帮助我，这对你来说可能是一个很小的变化，但我看不到。

问候

```
 NSURL *url = [NSURL URLWithString:@"http://www.yourdomain.com/locatie.php"];

NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url
                                                            cachePolicy:NSURLRequestReloadIgnoringCacheData
                                                      timeoutInterval:60];

[theRequest setHTTPMethod:@"POST"];
[theRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

NSString *postData = [NSString stringWithFormat:@"longitude=%@&latitude=%@&stringFromDate=%@", longitude, latitude, stringFromDate];

NSString *length = [NSString stringWithFormat:@"%d", [postData length]];
[theRequest setValue:length forHTTPHeaderField:@"Content-Length"];

[theRequest setHTTPBody:[postData dataUsingEncoding:NSASCIIStringEncoding]];

NSURLConnection *sConnection = [NSURLConnection connectionWithRequest:theRequest   delegate:self];
[sConnection start];

if (sConnection) {
    // Create the NSMutableData to hold the received data.
    // receivedData is an instance variable declared elsewhere.
    theRequest = [[NSMutableData data] retain];
} else {
    // Inform the user that the connection failed.
}

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse   *)response
{
// This method is called when the server has determined that it
// has enough information to create the NSURLResponse.

// It can be called multiple times, for example in the case of a
// redirect, so each time we reset the data.

// receivedData is an instance variable declared elsewhere.
}
- (void)connection:(NSURLConnection *)connection
 didFailWithError:(NSError *)error
{
// release the connection, and the data object
[connection release];
// receivedData is declared as a method instance elsewhere

// inform the user
NSLog(@"Connection failed! Error - %@ %@",
      [error localizedDescription],
      [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection
 {
// do something with the data
// receivedData is declared as a method instance elsewhere
NSLog(@"Succeeded! Received bytes of data");

// release the connection, and the data object
[connection release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:50:06.187

[启用 NSZombies](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)以获得有关崩溃的更多诊断信息。这很可能与过度释放对象有关。

查看您的代码，我认为问题出在此处：

```
NSURLConnection *sConnection = [NSURLConnection connectionWithRequest:theRequest   delegate:self]; 
```

这是一个自动释放的对象，它将在声明它的范围（方法的）结束时消失。

修复将 NSURLConnection 引用存储在`retain`类的属性中。

# arrays - 初始化一个 100 点数组

> ID：12249990
> 
> 赞同：-2
> 
> 时间：2012-09-03T14:42:18.113
> 
> 标签：arrays, c++-cli, managed

引用其他帖子：

打电话`Graphics.FillPolygon()`。你需要刷子而不是钢笔，你必须把你的观点变成一个点`array Point[].`

来自 MSDN 的示例代码是这样的：

```
// Create solid brush.
SolidBrush^ blueBrush = gcnew SolidBrush( Color::Blue );  

// Create points that define polygon.  
Point point1 = Point(50,50);  
Point point2 = Point(100,25);  
Point point3 = Point(200,5);       
Point point4 = Point(250,50);  
Point point5 = Point(300,100);  
Point point6 = Point(350,200);  
Point point7 = Point(250,250);  
array<Point>^ curvePoints = {point1,point2,point3,point4,point5,point6,point7}; 
```

这太可怕了！我必须输入一百个等距点！

在屏幕上绘制多边形。

```
e->Graphics->FillPolygon( blueBrush, curvePoints ); 
```

我尝试了很多事情：

```
array<Point,2>^ aPoints;
//Points tabPoints[10][10];//= new Points[10][10];
Points = gcnew array<Point,2>(10,10);
//init des tableaux 

for (int i = 0;i<10;i++)
{
    for(int j =0;j<10;j++)
    {
    //tabPoints[i][j].pX =i*10;
    //tabPoints[i][j].pY = j * 10;
    // = new Points(i*10,j*10);
    aPoints[i,j]= new Point(i*20,j*20);
    }
} 
```

它们都不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:58:54.920

你现在得到的不是 100 点阵列，而是 10x10 2D 阵列。尝试`gcnew array<Point>(100)`，您将能够将其传递给 FillPolygon。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:25:55.343

二维数组不一定是您想要的，但您只需稍作更改即可使当前代码正常工作：

*   摆脱`new`循环内部。你想要一个`Point`值，而不是指向一个值的指针。

MSDN 已经有了正确的部分。

# java - 上次实际火灾时间和预定火灾时间之间的差异

> ID：12249994
> 
> 赞同：1
> 
> 时间：2012-09-03T14:42:38.323
> 
> 标签：java, quartz-scheduler

我想获得作业应该执行的时间与最近一次执行的实际执行时间之间的延迟。例如，如果一个作业应该在晚上 8 点触发，而它实际上是在晚上 8.10 触发的，那么结果应该是 10 分钟。

我知道我可以使用[Trigger.getPreviousFireTime()](http://quartz-scheduler.org/api/1.8.5/org/quartz/Trigger.html#getPreviousFireTime%28%29)来获取它最后一次*实际*执行的时间，但是我看不到任何方法来获取相应的预定时间（例如上面示例的晚上 8 点），这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:56:21.573

在您的工作中使用以下代码：

```
@Override
public void execute(final JobExecutionContext context) {
    long diffInMillis =
                new Date().getTime() - context.getScheduledFireTime().getTime();
    //...
} 
```

正如您可能猜到`context.getScheduledFireTime()`的那样，作业应该运行的时间（理想情况下，差异应该接近 0）。

请注意，如果您的工作迟到超过 10 分钟（可配置），它可能根本不会触发 - 这取决于您设置的失火指令。

# python - 如何在没有 Windows 管理员权限的情况下部署 django 应用程序？

> ID：12249995
> 
> 赞同：1
> 
> 时间：2012-09-03T14:42:41.520
> 
> 标签：python, django, windows, xampp

我正在尝试使用带有 Windows 作为服务器的 pc 开始开发一个简单的 crud 应用程序。由于我没有管理员权限，因此很难找到解决方案。我尝试使用带有 USB 的 xampp lite 并且我让服务器运行，问题是 xampp lite 不支持 python 解释。

谢谢你的帮助，我真的很感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:57:40.407

你不需要手动配置你的 apache 服务器来提供 python 文件。这可以用 mod_python 来完成（mod_fcgi 也是可能的，也许还有其他的）

有关 mod_python的**详细说明，**请参阅[http://blog.chomperstomp.com/installing-python-mod_python-on-xampp/](http://blog.chomperstomp.com/installing-python-mod_python-on-xampp/)。