# StackOverflow 问答 11750000-11750999

# php - 如何使用 PHP 让其他用户查看用户个人资料图片？

> ID：11750008
> 
> 赞同：2
> 
> 时间：2012-07-31T22:33:31.417
> 
> 标签：php, html

我正在寻找的是当运行以下代码并单击专辑或音乐链接时，它会发布到同一页面，对吗？因此 url 会根据单击的链接更改并在其末尾添加 href。那么点击链接时如何调用以下内容：

```
<?php echo 'Albums';?> 
```

原始代码：

```
if(isset($_GET['username']) === true && empty($_GET['username']) === false){
$username       = $_GET['username'];

if(user_exists($username) === true){
$user_id        = user_id_from_username($username);
$profile_data   = user_data($user_id, 'first_name','last_name','email');
?>

    <h1><?php echo $profile_data['first_name']; ?>'s Yor Page</h1>

<div id="navWrapper">

    <ul>
        <li>
            <a href="#"><img src="uploads/profile/blank_profile.gif" width="150" height="150" id="blank_profile"></a>
        </li>

        <nav>
            <ul>
                <li>
                    <a href="?albums">Albums</a>
                </li>
                <li>
                    <a href="?music">Music</a>
                </li>
            </ul>
        </nav>
    </ul>

</div>
<?php
}else{
    echo 'Sorry, that user doesn\'t exist';
}
}else{
header('Location: index.php');
exit();
}

include 'includes/overall/overall_footer.php';
?> 
```

现在我有链接设置，点击它返回 yorpage.com/lr/username?albums，当我点击这个链接并转到 url yorpage.com/lr/username?albums 时，如何调用 php 函数或语句？

所以一个简单的回声就可以用于演示目的，只是为了获得点击的回报是我正在寻找的。如果您需要更多信息，我认为您不需要我不是要求为我编写代码我可以返回图像或专辑等。我只是想了解如何处理该链接被单击并返回一个简单的回声单击专辑或音乐链接时。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:16:07.620

我有点迷茫，但据我了解，您的问题是：如何在 url 中传递参数，以便当我转到 URL [http://www.example.com/username/albums](http://www.example.com/username/albums)时，它会转到相册，对吗？

这是一个类似的例子：

```
 if (isset($_GET['page'])) {
        $pageArgs = explode('/', $_GET['page']);
        if(isset($pageArgs[0])) {
            $username = $pageArgs[0];   
        } else {
            header('Location: index.php');
            exit();     
        }
        $action = (isset($pageArgs[1])) ? $pageArgs[1] : false;
        switch($action)
        {
            case 'albums':
                print 'These are my albums <br/>';
                break;
            case 'music':
                print 'This is my music! <br/>';
                break;

            default:
                print '
                    <nav>
                        <ul>
                            <li><a href="'.$username.'/albums">Albums</a></li>
                            <li><a href="'.$username.'/music">Music</a></li>
                        </ul>
                    </nav>';
                break;
        }
    } 
```

根据您的需要调整它...

注意：请注意，我将参数更改为页面而不是用户名，因此您必须更新重写 mod 规则。我还使用 / 来分隔页面“参数”。您可以使用 ”？” （我想，不确定）如果你喜欢......

* * *

这遵循一个简单的 MVC

## 索引.php

```
// Find which page is requested
$pageIDs = pageSelector();
// namespaced pages. You can change to real namespaces with:
// $mPage = '\\Page\\' . $pageIDs[0];
$mPage = 'Page_' . $pageIDs[0];
array_shift($pageIDs);

// Path to Template file (the static elements common to all pages like
// header, footer, logo, navigation, etc...
$templatePath = 'templates/my_template.html';

if(!empty($pageIDs))
    $pageArgs = $pageIDs;
else
    $pageArgs = false;

//create Page Object, the dynamic content divided by sections
//for instance, content, columnA, columnB   
$page = new $mPage($pageArgs);

$template = new Template($templatePath, $page);

//Here's an example of a section
$template->addSection('subNavigation');

print $template;

// PageSelector Function
function pageSelector()
{
    if (isset($_GET['page'])) {
        $pIDs = explode('/', $_GET['page']);    
    } else {
        $pIDs = array('home');
    }
    $pagePath = 'pages/' . $pIDs[0] . '.php';
    if (file_exists($pagePath)) {
        require_once($pagePath);
        return $pIDs;
    } else {
        $pagePath = 'pages/home.php';
        require_once($pagePath);
        return array('home');
    }
}

//Template Object
class Template
{
    private $path, $page;
    private $sections = array('content');

    public function __construct($tPath, $page)
    {
        $this->path = $tPath;
        $this->page = $page;
    }

    public function addSection($newSectionName)
    {
        $this->sections[] = $newSectionName;
    }

    public function __toString()
    {
        $html = file_get_contents($this->path);
        foreach($this->sections as $section) {
            $html = str_replace('[%%'.$section.'%%]', $this->page->show($section), $html);
        }
        return $html;
    }
} 
```

* * *

## 文件页面/home.php

```
class Page_home
{
    public function __construct($args) {}

    public function show($section)
    {
        switch($section)
        {
            case 'content':
                return 'this is my main page';
            break;

            default:
                return '';
            break;
        }
    }   
} 
```

* * *

## 文件页面/user.php

```
class Page_user
{
    private $subPage;
    public function __construct($args)
    {
        if(isset($args[0])) 
            $this->username = $args[0];
        else {
            $this->username = false;
            return;
        }
        if(isset($args[1]))
            $this->subPage = $args[1];
        else {
            $this->subPage = false;
            return;
        }

    }

    public function show($section)
    {
        if($this->username)
        {
            switch($section)
            {
                case 'content':
                    $otp  = 'My username is ' . $this->username . '<br/>';
                    $otp .= $this->showSubPage();
                    return $otp;
                break;

                case 'subNavigation':
                    return $this->nav();
                break;

                default:
                    return '';
                break;
            }   
        } else {
            return 'username not found!';
        }
    }

    protected function nav()
    {
        return
        '<nav>
            <ul>
                <li><a href="user/'.$this->username.'/albums">Albums</a></li>
                <li><a href="user/'.$this->username.'/music">Music</a></li>
            </ul>
        </nav>';    
    }

    protected function showSubPage()
    {
        switch($this->subPage)
        {
            case 'albums':
                return 'These are my albums <br/>';
                break;
            case 'music':
                return 'This is my music! <br/>';
                break; 
        }
    }
} 
```

## 模板/my_template.html

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
    <div id="mainNav">myLink | Go | Here</div>
    <nav id="subNav">[%%subNavigation%%]</nav>
    <div id="content">[%%content%%]</div>
    <footer>my (c) copyright notice</footer>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:02:31.930

我可能会感到困惑（因为那是很多文字），但我认为您正在寻找的是关于 htaccess 的教程......使用重写规则静默转换 url：

```
http://domain/[username]/album 
```

到

```
http://domain.com?script.php?user=[username]&action=album 
```

... 或类似的东西。用户将看到第一个 url，但脚本将有权访问`user`并`action`在`$_GET`数组中......然后你可以检查

```
if(isset($_GET['action']) && $_GET['action']=='album'){ //do something... 
```

那里有大量的教程，但这是我找到的[第一个。](http://www.9lessons.info/2009/11/pretty-urls-with-htaccess-file.html)

# android - 缩放自定义布局

> ID：11750011
> 
> 赞同：0
> 
> 时间：2012-07-31T22:34:00.683
> 
> 标签：android, android-layout

我有一个从 RelativeLayout 派生的自定义布局。我希望自定义布局根据放置它​​的容器布局的大小进行缩放。

这是我到目前为止的自定义布局：

```
public class ScaledRelativeLayout extends RelativeLayout {

    private static final float HEIGHT = 460;
    private static final float WIDTH = 380;
    private float scale = 1.0f;
    private float pivotX = 0.0f;
    private float pivotY = 0.0f;
    Matrix matrix = new Matrix();

    public ScaledRelativeLayout( Context cxt, AttributeSet attrs ) {
        super( cxt, attrs );
    }

    @Override
    public void dispatchDraw( Canvas canvas ) {
        canvas.save();

        View parent = (View)getParent();
        int parentHeight = parent.getHeight();
        int parentWidth = parent.getWidth();

        float scaleX = (float)parentWidth / WIDTH;
        float scaleY = (float)parentHeight / HEIGHT;
        scale = Math.min( scaleX, scaleY );

        pivotX = (float)parentWidth / 2;
        pivotY = 0;

        canvas.scale( scale, scale, pivotX, pivotY );

        super.dispatchDraw( canvas );

        canvas.restore();
    }
} 
```

这几乎可以工作。问题是自定义视图由于某种原因在底部被裁剪。就好像在绘制视图时剪辑区域太小了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:40:39.800

这是因为你正在做一个统一的比例，`scale = Math.min( scaleX, scaleY );`这可能会导致宽度和高度的问题，因为它取决于两个最小值。

尝试非均匀缩放以缩放画布以适合屏幕

```
canvas.scale( scaleX, scaleY, pivotX, pivotY ); 
```

# javascript - javascript客户端ORM的框架？

> ID：11750019
> 
> 赞同：5
> 
> 时间：2012-07-31T22:34:38.980
> 
> 标签：javascript, node.js

我最近有点厌倦了使用 JSON/Rest 服务并在服务器上手动键入对数据库执行基本 CRUD 操作的方法。

我想做的是在javascript（基于ajax的应用程序）中做一些形式

```
var allStudents = students.getAllStudents(); // returns all items of the students table

var student = new student();
student.name = "Joe";
student.address = "123 Sesame st";
students.add(student); // commits it to the students table

var student = students.getStudentById(57); 
```

现在，作为任何 ORM，所有这些方法都将为我自动/编写。

另请注意，我并不是说 Javascript 应该直接与数据库对话。它仍然会进行 Restful 调用（在后台到服务器）。但我只是希望这些 crud 操作对我来说是自动化和透明的，这样我就不需要在服务器上手动写出这些操作。

你们知道任何有助于实现这一目标的框架吗？

我的主要后端是 Java/Spring3MVC。但我也想听听可能使用 Node.js 的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:52:50.617

与简单地写出 RESTful ajax 请求相比，我不确定这是否可以节省时间，但 Dojo 的[JsonRest 存储](http://dojotoolkit.org/reference-guide/1.7/dojo/store/JsonRest.html)是我见过的一种解决方案，它的工作原理与您所描述的类似。就我个人而言，我发现显式编写 ajax 请求更具可读性，但如果您不介意遵循 Dojo 关于如何构建请求的理念，您可能会喜欢这样。无论如何，这是该文档页面中的一些代码：

```
require(["dojo/store/JsonRest"], function(JsonRestStore){

  var store = new JsonRestStore({target: "/Table/" });

  store.get(3).then(function(object){
    // use the object with the identity of 3
  });

  store.query("foo=bar").then(function(results){
    // use the query results returned from the server
  });

  store.put({ foo: "bar" }, { id: 3 }); // store the object with the given identity

  store.remove(3); // delete the object

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:52:48.487

如果您可以使用 Backbone.js 或 Can.js（推荐）之类的东西来做您的接口并通过 RESTfull 服务与您的数据库无缝通信，如果您以前没有见过它，您会印象深刻。

[http://backbonejs.org/](http://backbonejs.org/) http://canjs.us/

两者都使用非常容易设置的 MVC 结构。查看演示和示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T23:17:52.593

寻找同样的东西，我偶然发现了[sproutcore 记录](http://guides.sproutcore.com/records.html)。看起来像一个 javascript orm 解决方案。

# perl - 无法使用 Strawberry-Perl 在 Windows 7 64 位上安装模块 pp

> ID：11750022
> 
> 赞同：3
> 
> 时间：2012-07-31T22:35:01.167
> 
> 标签：perl, perl-module, cpan, pp-perl-par-packager

我想从我的 perl 脚本创建 exe 文件，因此我尝试安装 modul pp。但是安装失败并显示此输出。

```
cpan> install pp
Database was generated on Tue, 31 Jul 2012 14:02:56 GMT
Running install for module 'pp'
Running make for R/RS/RSCHUPP/PAR-Packer-1.013.tar.gz
Checksum for C:\strawberry\cpan\sources\authors\id\R\RS\RSCHUPP\PAR-Packer-1.013
.tar.gz ok
Scanning cache C:\strawberry\cpan\build for sizes
............................................................................DONE

  CPAN.pm: Going to build R/RS/RSCHUPP/PAR-Packer-1.013.tar.gz

Checking if your kit is complete...
Looks good
Prototype mismatch: sub main::prompt: none vs ($;$) at C:/strawberry/perl/lib/Ex
tUtils/MakeMaker.pm line 219
Writing Makefile for par.exe
Writing MYMETA.yml and MYMETA.json
Writing Makefile for PAR::Packer
Writing MYMETA.yml and MYMETA.json
cp lib/App/Packer/PAR.pm blib\lib\App\Packer\PAR.pm
cp lib/PAR/Packer.pm blib\lib\PAR\Packer.pm
cp lib/PAR/Filter/Obfuscate.pm blib\lib\PAR\Filter\Obfuscate.pm
cp lib/PAR/Filter/PodStrip.pm blib\lib\PAR\Filter\PodStrip.pm
cp lib/PAR/StrippedPARL/Base.pm blib\lib\PAR\StrippedPARL\Base.pm
cp lib/PAR/Filter.pm blib\lib\PAR\Filter.pm
cp lib/PAR/Filter/PatchContent.pm blib\lib\PAR\Filter\PatchContent.pm
cp lib/PAR/Filter/Bytecode.pm blib\lib\PAR\Filter\Bytecode.pm
cp lib/pp.pm blib\lib\pp.pm
cp lib/PAR/Filter/Bleach.pm blib\lib\PAR\Filter\Bleach.pm
C:\strawberry\perl\bin\perl.exe file2c.pl -s ..\script\par.pl my_par_pl.c load_m
y_par_pl
C:\strawberry\perl\bin\perl.exe sha1.c.PL
gcc -c -s -O2 -DWIN32 -DHAVE_DES_FCRYPT  -DUSE_SITECUSTOMIZE -DPERL_IMPLICIT_CON
TEXT -DPERL_IMPLICIT_SYS -fno-strict-aliasing -DPERL_MSVCRT_READFIX  -I"C:\straw
berry\perl\lib\CORE"  -DPARL_EXE=\"parl.exe\" -s -O2 main.c
windres -F pei-i386 -i winres\pp.rc -o winres\pp.res
windres: can't open file `pp.manifest': No such file or directory
dmake:  Error code 129, while making 'ppresource.coff'
dmake.EXE:  Error code 255, while making 'subdirs'
  RSCHUPP/PAR-Packer-1.013.tar.gz
  C:\strawberry\c\bin\dmake.EXE -- NOT OK
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible
Failed during this command:
 RSCHUPP/PAR-Packer-1.013.tar.gz              : make NO 
```

有谁知道是什么原因？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:19:16.210

生成文件有问题`pp`。

1.手动下载PM（[这里](http://search.cpan.org/~rschupp/PAR-Packer-1.013/)）。

2.解压文件并找到`myldr/winres`文件夹。

3.会有文件之类的`pp.ico, pp.manifest, pp.rc`。将这些文件复制到`myldr/`目录。

4.手动运行安装。

```
 perl Makefile.pl
  dmake 
  dmake test 
  dmake install 
```

注意 - 可能存在依赖项，因此您可能必须手动安装它们或使用`CPAN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T20:08:33.553

我遇到了类似的问题，但这是因为我安装了 ActiveState Perl。我必须卸载 ActiveState 并编辑我的环境变量以删除对 ActiveState Perl 的任何引用。

# .net - 签名程序集似乎正在加载未签名（不使用反射）

> ID：11750025
> 
> 赞同：0
> 
> 时间：2012-07-31T22:35:17.093
> 
> 标签：.net, assemblies

我有三个 .NET 4.0 第三方程序集：

*   `Assembly.One`是无符号的并引用有符号`Assembly.Two`和无符号`Assembly.Three`。

*   `Assembly.Two`引用一个**已签名** `Assembly.Three`的.

我已经使用反射器验证了上述内容。

我得到了一个 unsigned `Assembly.One`，signed`Assembly.Two`和**unsigned** `Assembly.Three`。

我预计这会在部署时崩溃，因为签名`Assembly.Two`肯定无法加载未签名`Assembly.Three`，因为它专门从参考中寻找签名版本？然而，令我惊讶的是它有效。

`Assembly.Two`在它的清单中有对它的引用，`Assembly.Three`所以它必须使用它，否则编译器会把它去掉？我检查`Assembly.Three`了服务器上没有签名版本，并且使用 FUSLOGVW 它确实在加载未签名版本。

FUSLOGVW 中有两个条目用于加载 unsigned `Assembly.Three`，其中一个用于 (Unknown) 的调用程序集，显示如下。

> 部分指定的程序集绑定从应用程序目录成功。需要重新申请保单

是否存在潜在的“责任链”（由于缺乏更好的描述）允许我不知道这一点，因为发起者`Assembly.One`引用了 unsigned `Assembly.Three`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:21:00.533

app.config、Machine.Config 等中是否有任何“配置的程序集”执行重定向？或其他配置设置来改变行为？

检查以确保对程序集的引用中的“特定版本 = true”。您是否在项目中引用 Unsigned`Assembly.Three`来强制“复制”，但实际上并没有直接使用 Three？确保`Assembly.Two`在您的本地引用`Three`开始之前加载它，或者根本不引用三直接让`Two`做出决定。

在此处加载信息[运行时如何](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.100%29.aspx)从该信息中定位程序集 #2 可能是您正在发生的事情。

# facebook - 无法安装我自己的 Facebook 应用

> ID：11750032
> 
> 赞同：1
> 
> 时间：2012-07-31T22:36:04.457
> 
> 标签：facebook

我有一段时间没有做过 Facebook 应用了。今天我需要为客户创建一个简单的应用程序，但我仍然无法安装它。

该应用程序非常基本。这个想法是有一个额外的“选项卡”，应用程序将在其中简单地显示存储在外部服务器上的 jpg。

目前的主要问题是，当我以客户页面管理员身份登录并导航到应用程序页面时，它没有显示“将应用程序添加到页面”链接。

如何安装我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:05:26.813

[从https://developers.facebook.com/apps](https://developers.facebook.com/apps)检索您的应用程序 ID

在以下 URL 中替换您的应用程序 ID，其中显示 YOUR_APP_ID： [https ://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&display=popup&next=http://facebook.com](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&display=popup&next=http://facebook.com)

# php - 登录后 Yii 框架会话未保存

> ID：11750033
> 
> 赞同：0
> 
> 时间：2012-07-31T22:36:20.153
> 
> 标签：php, yii, session-state

我们在 /rpotected/components/UserIdentity.php 中有以下函数：

```
public function authenticate()
    {
            $username = $this->username;
            $password = $this->password;

            $user = Users::model()->find('username=? AND password=?', array($username, $password));
            if($user === NULL){
                    $this->errorCode=self::ERROR_UNKNOWN_IDENTITY;

            }else{
                    $this->username = $user->username;
                    sess('SESS_USER_INFO', $user->attributes);
                    //print_r(sess('SESS_USER_INFO'));
                    $this->errorCode=self::ERROR_NONE;
            }

            return !$this->errorCode;
    } 
```

这是来自 /protected/models/Users.php 的片段：

```
public function login()
{            
        if($this->_identity===null)
        {
                $username = $this->username;
                $password = md5($this->password);
                //echo "Username: ".$username."<br />Password:".$password;
                $this->_identity=new UserIdentity($username, $password);
                $this->_identity->authenticate();

        }
        if($this->_identity->errorCode===UserIdentity::ERROR_NONE)
        {
                $duration=$this->rememberMe ? 3600*24*30 : 60*20; // 30 days
                //print_r($this->_identity);
                Yii::app()->user->login($this->_identity,$duration);

                //echo "Login Successful";
                return true;
        }
        else{
                //echo "Error";
                $this->addError('password','Incorrect username or password.');
                return false;
        } 
```

问题：登录后，单击“我的个人资料”链接会提示再次登录。因此，会话似乎没有存储/保存登录凭据并在登录生命周期内携带它们。

应该如何修改身份验证功能，以便存储会话信息并结转登录凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T06:55:31.803

请检查php.ini 中的“ [session.cookie_lifetime ”值](http://php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)

```
session.cookie_lifetime = 2592000 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T05:25:27.740

您可以通过这种方式将登录凭据存储在 CWebUser 类的变量中**$this->setState(loogedInUser,$user);** 使用 setState 函数。

此信息存储在 cookie 中，而不是会话中，您可以在任何地方使用 **Yii::app()->user->loogedInUser**访问它。

# ansi - 解密 DUKPT 加密的轨道数据

> ID：11750036
> 
> 赞同：13
> 
> 时间：2012-07-31T22:36:34.253
> 
> 标签：ansi, encryption, jpos, credit-card-track-data

正如标题所说，我正在尝试解密来自启用 DUKPT 的扫描仪的 DUKPT 加密轨道数据。

我有 DUKPT 的 ANSI 标准 (X9.24)，并成功实现了从 KSN 和 BDK 生成 IPEK 的能力。此外，我已经成功实现了通过对 PIN 加密密钥进行异或来生成左右 MAC 请求和响应密钥的能力。最后，我能够生成 EPB。

从这里开始，我不明白如何从我生成的 L/R 密钥生成 MAC 请求和响应。

最后，一旦我到达那一步，接下来会发生什么？我什么时候才能真正拥有解密启用 DUKPT 的设备发送的轨道数据的密钥？

我知道泰雷兹模拟器和 jPOS。我的代码目前正在引用 Thales Simulator 来完成所有工作。但是，文件解密过程只是没有返回预期的数据。

如果有人可以提供一些有关解密轨道数据的见解，将不胜感激。

[http://thalessim.codeplex.com/](http://thalessim.codeplex.com/)

[http://jpos.org/](http://jpos.org/)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-03T23:17:42.823

我花了太多时间研究可怕的 X9.24 规范，最终让加密和解密都与我的供应商的示例一起工作，营销部门迅速决定更换供应商。因为它是一个标准，你会认为任何人的实现都是一样的。我希望。无论如何，事物的实现方式存在差异。您必须研究细则，以确保您的工作方式与另一方相同。

但这不是你的问题。

首先，如果您需要从信用卡中解密数据轨道，您可能有兴趣生成一个密钥，该密钥将根据原始超级机密 Base Derivation Key 解密数据。这与 MAC 生成无关，只是在那个可怕的规范中顺便提及。如果在 HSM 的完整密钥序列号的计数器部分设置了位，您需要为该密钥序列号和设备 ID 生成 IPEK，并重复应用规范中的“不可逆密钥生成过程”。

我的那部分代码如下所示：（抱歉，帖子中的长列表。）

```
/*
 * Bit "zero" set (this is a 21 bit register)(ANSI counts from the left)
 * This will be used to test each bit of the encryption counter
 * to decide when to find another key.
 */
testBit=0x00100000;
/*
 * We have to "encrypt" the IPEK repeatedly to find the current key
 * (See Section A.3).  Each time we encrypt (generate a new key),
 * we need to use the all prior bits to the left of the current bit.
 * The Spec says we will have a maximum of ten bits set at any time
 * so we should not have to generate more than ten keys to find the
 * current encryption key.
 */
cumBits=0;
/*
 * For each of the 21 possible key bits,
 * if it is set, we need to OR that bit into the cumulative bit
 * variable and set that as the KSN count and "encrypt" again.
 * The encryption we are using the goofy ANSI Key Generation
 * subroutine from page 50.
 */
for(int ii=0; ii<21; ii++)
{
    if( (keyNumber&testBit) != 0)
    {
        char ksr[10];
        char eightByte[8]={0};

        cumBits |= testBit;
        ksn.count=cumBits;   /* all bits processed to date */

        memcpy(ksr, &ksn,10);       /* copy bit structure to char array*/
        memcpy(crypt,&ksr[2],8);    /* copy bytes 2 through 9 */

        /*
         * Generate the new Key overwriting the old.
         * This will apply the "Non-reversible Key Generation Process"
         * to the lower 64 bits of the KSN.
         */
        keyGen(&key, &crypt, &key);
    }
    testBit>>=1;
} 
```

其中 keyNumber 是来自 ksn 的当前计数器 ksn 是一个 80 位结构，其中包含来自 HSM 的 80 位密钥序列号 crypt 是一个 64 位数据块，因为我使用的是 openSSL，所以我拥有 DES_cblock 类型的数据。key 是一个 128 位双 DES_cblock 结构。keyGen 例程几乎是从规范第 50 页的“不可逆密钥生成过程”本地子例程中逐字记录的。

最后，密钥变量将包含几乎可以用于解密的密钥。编写规范的家伙在关键点上添加了一些“变体”行为，让我们保持警觉。如果密钥要用于解密数据流（例如信用卡轨道），则需要将字节 5 和 13 与 0xFF 进行异或运算，并且三重 DES 会自行加密密钥（ECB 模式）。我的代码如下所示：

```
DOUBLE_KEY keyCopy;
char *p;
p=(char*)&key;
p[ 5]^=0xff;
p[13]^=0xff;
keyCopy=key;
des3(&keyCopy, (DES_cblock *)&key.left,  &key.left);
des3(&keyCopy, (DES_cblock *)&key.right, &key.right); 
```

如果您使用它来解密 PIN 块，则需要将字节 7 和 15 与 0xFF 进行异或。（我不是 100% 确定这也不应该应用于流模式，但我的供应商将其排除在外。）

如果是 PIN 块，将在 ECB 模式下使用 3-DES 加密。如果是数据流，则以CBC模式加密，初始化向量为零。

（我有没有提到我不太关心规范？）有趣的是，如果服务器端（上图）记住并拒绝具有以前用过。该技术非常整洁。ANSI 规范有一些不足之处，但技术没问题。

祝你好运。/鲍勃·布莱恩

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T21:28:13.460

对于数据加密，变体是`0000000000FF0000.0000000000FF0000`您需要对字节 5 和 13 而不是 7 和 15 进行异或运算。此外，您需要对每个密钥部分（左和右）进行额外的 3DES 自加密步骤。

这是jPOS中的相关代码 [https://github.com/jpos/jPOS/blob/master/jpos/src/main/java/org/jpos/security/jceadapter/JCESecurityModule.java#L1843-1856](https://github.com/jpos/jPOS/blob/master/jpos/src/main/java/org/jpos/security/jceadapter/JCESecurityModule.java#L1843-1856)

# java - 用于创建数据库、表、列和填充表的“解决方案”？

> ID：11750037
> 
> 赞同：0
> 
> 时间：2012-07-31T22:36:35.050
> 
> 标签：java, mysql, jdbc

我想编写执行此类任务的代码：

```
check if a given database exists.
1a-->if no, then create a DB, make some tables in it and some columns too.

   1.1-->Check if certain columns in a "list" exist. 
         Create those columns which don't exist yet.
   1.2--> once 1.1 is done, populate these tables with some test data. 

1b-->else check if certain tables exist and create them if they 
     don't exist. After that, do the stuff mentioned in 1.1 and 1.2 
```

我是自己编写代码还是有针对此类任务已经存在的“解决方案”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:43:12.730

我不知道您所要求的任何内置内容，但我相信您可以使用[LiquiBase](http://www.liquibase.org/)实现您所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:38:39.423

我可以推荐一些其他的[flyway](http://code.google.com/p/flyway/wiki/GettingStarted)，希望你会觉得它更容易掌握

# node.js - 如何在 node.js 中创建命名管道？

> ID：11750041
> 
> 赞同：35
> 
> 时间：2012-07-31T22:36:50.117
> 
> 标签：node.js, pipe, named-pipes

如何在 node.js 中创建命名管道？

PS：现在我正在创建一个命名管道，如下所示。但我认为这不是最好的方法

```
var mkfifoProcess = spawn('mkfifo',  [fifoFilePath]);
mkfifoProcess.on('exit', function (code) {
    if (code == 0) {
        console.log('fifo created: ' + fifoFilePath);
    } else {
        console.log('fail to create fifo with code:  ' + code);
    }
}); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-08-23T22:23:40.707

### 在 Windows 上使用命名管道

节点 v0.12.4

```
var net = require('net');

var PIPE_NAME = "mypipe";
var PIPE_PATH = "\\\\.\\pipe\\" + PIPE_NAME;

var L = console.log;

var server = net.createServer(function(stream) {
    L('Server: on connection')

    stream.on('data', function(c) {
        L('Server: on data:', c.toString());
    });

    stream.on('end', function() {
        L('Server: on end')
        server.close();
    });

    stream.write('Take it easy!');
});

server.on('close',function(){
    L('Server: on close');
})

server.listen(PIPE_PATH,function(){
    L('Server: on listening');
})

// == Client part == //
var client = net.connect(PIPE_PATH, function() {
    L('Client: on connection');
})

client.on('data', function(data) {
    L('Client: on data:', data.toString());
    client.end('Thanks!');
});

client.on('end', function() {
    L('Client: on end');
}) 
```

**输出：**

```
Server: on listening
Client: on connection
Server: on connection
Client: on data: Take it easy!
Server: on data: Thanks!
Client: on end
Server: on end
Server: on close
```

关于管道名称的注意事项：

> C/C++ / Nodejs:
> `\\.\pipe\PIPENAME` *CreateNamedPipe*
> 
> .Net / Powershell:
> `\\.\PIPENAME` *NamedPipeClientStream / NamedPipeServerStream*
> 
> 两者都将使用文件句柄：
> `\Device\NamedPipe\PIPENAME`

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-08-14T08:20:40.633

看起来 Node 核心不支持名称管道，也不会支持 - 来自 Ben Noordhuis 10/11/11：

> Windows 有一个命名管道的概念，但既然你提到`mkfifo`我假设你的意思是 UNIX FIFO。
> 
> 我们不支持并且可能永远不会支持（非阻塞模式下的 FIFO 有可能使事件循环死锁），但是如果您需要类似的功能，您可以使用 UNIX 套接字。

[https://groups.google.com/d/msg/nodejs/9TvDwCWaB5c/udQPigFvmgAJ](https://groups.google.com/d/msg/nodejs/9TvDwCWaB5c/udQPigFvmgAJ)

命名管道和套接字非常相似，但是，该`net`模块通过指定 a`path`而不是 a`host`和来实现本地套接字`port`：

*   [http://nodejs.org/api/net.html#net_server_listen_path_callback](http://nodejs.org/api/net.html#net_server_listen_path_callback)
*   [http://nodejs.org/api/net.html#net_net_connect_path_connectlistener](http://nodejs.org/api/net.html#net_net_connect_path_connectlistener)

例子：

```
var net = require('net');

var server = net.createServer(function(stream) {
  stream.on('data', function(c) {
    console.log('data:', c.toString());
  });
  stream.on('end', function() {
    server.close();
  });
});

server.listen('/tmp/test.sock');

var stream = net.connect('/tmp/test.sock');
stream.write('hello');
stream.end(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T11:47:03.330

也许使用`fs.watchFile`而不是命名管道？查看[文档](http://www.nodejs.org/api/fs.html#fs_fs_watch_filename_options_listener)

# c# - 使用 SqlReader 时出现异常

> ID：11750045
> 
> 赞同：4
> 
> 时间：2012-07-31T22:37:17.280
> 
> 标签：c#, database, ado.net

我试图从多个线程中调用此方法，试图从同一字符串中获取 ID。我总是在创建 SqlDataReader 的那一行遇到这个异常：

> 已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

我不知道问题出在哪里。我正在使用 lock() 语句，所以我只使用该命令一次，然后将其处理掉。对数据库编程有点陌生，所以我不知道我的错误在哪里。

谢谢！

```
public int UsernameGetID(string username)
{
    using (var command = new SqlCommand("SELECT user_id FROM " + ServerConstants.Database.TableUserInformation + " WHERE username = @Username", connection))
    {
        lock (command)
        {
            SqlParameter param = new SqlParameter("@Username", SqlDbType.VarChar, username.Length);
            param.Value = username;
            command.Parameters.Add(param);
            using (SqlDataReader reader = command.ExecuteReader())
            {
                if (reader.Read())
                {
                    return (int)reader[0];
                }
                else
                {
                    // username doesn't exists
                    return 0;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T22:42:31.583

锁定`command`是没有意义的，因为您正在方法中创建一个新命令 - 没有其他代码*可以*锁定它。

但是，您正在共享多个命令之间的*连接。*不要那样做 -在每次调用中创建一个新的`SqlConnection`（再次在声明中）。`using`不要担心效率方面 - 连接池将处理“真实”网络连接。

所以你要：

```
using (var connection = new SqlConnection(...))
using (var command = new SqlCommand(..., connection))
{
    connection.Open();
    ...
    using (var reader = command.ExecuteReader())
    {
        return reader.Read() ? (int) reader[0] : 0;
    }
} 
```

# c - 有什么方法可以让我的函数返回一个动态数组？

> ID：11750050
> 
> 赞同：9
> 
> 时间：2012-07-31T22:37:47.747
> 
> 标签：c, arrays, function, dynamic, return

所以目前我有一个返回静态数组的函数，为了提高效率，有没有办法让它返回一个动态数组？

```
#include <stdio.h>
#include <stdlib.h>
#include "header.h"

int *charpos(char *str, char ch)
{
    int *bff, bc, ec, i, strln;
    static int ret[255];
    bc = 0;
    ec = 0;

    for(i = 0; str[i] != '\0'; i++)
        ;

    strln = i;
    for(i = 0; i <= strln; i++)
    {
        if(str[i] == ch)
            ec++;
    }

    bff = malloc(sizeof(int)*ec);
    if(sizeof(bff) > sizeof(ret))
    {
        free(bff);
        return 0;
    }

    for(i = 0; i <= 255; i++) ret[i] = '\0';
    for(i = 0; i <= strln; i++)
    {
        if(str[i] == ch)
        {
            ret[bc] = i;
            bc++;
        }
    }

    free(bff);
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T22:39:43.633

函数不能返回数组，句号。您当然可以使用指针或指向调用者已分配的内存块的指针。所以，在你的情况下......

```
int *ret = malloc(255 * sizeof int);  // caller must deallocate! 
```

但是，这确实会改变代码的语义。函数的调用者现在负责调用`free()`返回的指针。如果他们不这样做，您将泄漏内存，因此这会增加一些以前不存在的复杂性。我更喜欢这样的东西：

```
void charpos(int *p, size_t size, const char *str, char ch) {
    // initialize the memory 
    memset(p, 0, size * sizeof int);

    // your other code here...

    size_t len = strlen(str);
    // fill the caller's memory
    for(i = 0; i < len; ++i)
    {
        if(str[i] == ch)
            p[bc++] = i;
    }
} 
```

您正在返回一个指向`int`静态分配数组的第一个元素的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T16:47:04.440

实际上，您可以使用 static int 分配更多空间，而不必担心动态。这是我解决它的方法：

```
//indefinite reads, actually only up to 20
int * readDataAD7142(int addr, int numRegs){
  static int data[20];
  int i = 0;

  //Do something with this data array. Something that requires less then 20 elements

  return data;  
} 
```

这是调用它的代码

```
 int *p;
 int i;
 p = readDataAD7142(0x0000, 6);

 for(i=0; i<6; i++){
  Serial.println(p[i], HEX);
 } 
```

如果你有更多的内存和很少的时间（你也需要有点懒惰），那就完美而简单。

# javascript - 我如何找到我的代码出了什么问题

> ID：11750054
> 
> 赞同：0
> 
> 时间：2012-07-31T22:38:05.700
> 
> 标签：javascript, jquery

我的 sql javascript 有这个功能

```
PATH="http://localhost/dhodia/";    
try{
                var tags=url.replace(PATH,"");
                var spl=tags.split("/");
                if(spl[0]=="i"){
                    if(spl.length>=2 && spl[1]=="hdd"){

                    }
                    addtoopen($("#"+spl[1]+"opn").attr("jso"));
                    menu_action(spl[1],url)   
                }
            }catch(err){
                var  txt="There was an error on this page.\n\n";
                txt+="Error description: " + err.message + "\n\n";
                txt+="Click OK to continue.\n\n";
                alert(txt);
            } 
```

我发现如果我将 url 用作**“http://localhost/dhodia/i/hdd”**它会替换，但如果我使用**“http://localhost/dhodia/i/hdd/tarun”**它会在替换语句中出现问题没有做替换

我想跟踪为什么它不在这一行进行替换

**编辑**

我在函数中使用它，如下所示

```
function hstppst(url){
    config.pre=url;
    if(url==PATH || url==PATH+"i/dashboard"){
        $E("#"+current.open).hide();
        unfixbox()
        $E("#dashboard").show();
        addtoopen(dsjsn);
        document.title="My DashBoard";
        current.open="dashboard";
    }else{
        var tags=url.replace(PATH,"");
        var spl=tags.split("/");
        if(spl[0]=="i"){
            if(spl.length>=2 && spl[1]=="hdd"){

            }
            addtoopen($("#"+spl[1]+"opn").attr("jso"));
            menu_action(spl[1],url)   
        }

    }     
} 
```

这个函数在 `window.onpopstate`变化时调用

在 onpopstate 我将 url 传递给这个函数

问题是代码在之后没有执行`var tags=url.replace(PATH,"");`，因为如果发生任何错误，我在 onpopstate 函数中使用这个函数，并且我正在跟踪我得到的错误是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:11:34.640

请看一下字符串对象的replace方法的用法： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)

您错误地使用了替换。

# c#-4.0 - 捕获在不同线程/回调上运行的异常

> ID：11750056
> 
> 赞同：0
> 
> 时间：2012-07-31T22:38:18.793
> 
> 标签：c#-4.0

我有一个函数执行一些代码就像，

```
Protected void XXXXfunc()
{
  //i register a callback for asynchronous operation below is just an example
  // not true to its operation 
  byte[] buffer = new byte[10];

  s.BeginReceive(buffer, 0, 10, SocketFlags.None,
      new AsyncCallback(OnMessageReceived), buffer);
}

// Callback function
XXXX callback OnMessageReceived(XXXX)
{
  //Something Goes wrong here i throw an exception 
  throw(exception);
} 
```

我在哪里以及如何捕获这个异常，或者这个异常在哪里被捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:44:51.893

在回调中，唯一*可以*捕捉到它的地方。

是的，这是一个*非常*尴尬的地方，因为回调在您没有启动的线程上运行，并且与您的其余代码完全异步运行。您必须以某种方式让程序中的主要逻辑知道出现问题并且需要采取纠正措施。这通常需要引发一个事件，该事件被编组回您的主线程。至少要让用户知道“它不起作用”。

这类问题是 C# 版本 4 中的 Task<> 类和添加到 C# 版本 5 中的 async/await 关键字的主要动机。它实际上并没有帮助用户处理随机故障，它只是让它更容易报告。

# html - 导航栏图像有空间

> ID：11750057
> 
> 赞同：0
> 
> 时间：2012-07-31T22:38:37.140
> 
> 标签：html, css, image, navigation, spaces

我决定从我的文本/链接更改为导航栏的图像链接，但现在我的图像之间有空格。[http://justxp.x10.mx/test/](http://justxp.x10.mx/test/) 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:47:48.157

```
#navlinks a {
    text-decoration: none;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:42:48.477

设置`display`为`inline-block`菜单的链接元素：

```
#navlinks a {
    display: inline-block;
    /* hack for old IEs */
    *display: inline;
    zoom: 1;
} 
```

![在此处输入图像描述](../Images/caaa39b2d551c44cf0237d8ee7a3d43c.png)

# sql - 如何使用 IN（具有许多数字 ID）使这个 SQL 查询更有效？

> ID：11750058
> 
> 赞同：6
> 
> 时间：2012-07-31T22:38:38.137
> 
> 标签：sql, sql-server, group-by, query-optimization

我已经为这个查询等待了一个多小时，所以我知道我可能做错了什么。有没有有效的方法来定制这个查询：？

```
select RespondentID, MIN(SessionID) as 'SID'
from BIG_Sessions (nolock)
where RespondentID in (
1418283,
1419863,
1421188,
1422101,
1431384,
1435526,
1437284,
1441394,
/* etc etc THOUSANDS */
1579244 )
    and EntryDate between
    '07-11-2011' and '07-31-2012'
GROUP BY RespondentID 
```

我知道我的日期范围很大，但我无法更改那部分（日期遍布各处）。

另外，原因`MIN(SessionID)`是因为否则我们会为每个受访者获得许多 SessionID，一个就足够了（它在 ach2a23a-adhsdx123 之类的字母数字 ID 上取 MIN ......并按字母顺序获取第一个）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T22:50:27.480

1.  将您的数千个数字放在一个临时表中。
2.  索引该表中的数字字段。
3.  **索引 BIG_SESSIONS 中的 RespondentID 字段**
4.  加入两个表

例如：

```
select RespondentID, MIN(SessionID) as 'SID' 
from BIG_Sessions (nolock) 
    inner join RespondentsFilterTable 
        on BIG_SESSIONS.RespondentID = RespondentsFilterTable.RespondentID
where EntryDate between '07-11-2011' and '07-31-2012' 
GROUP BY BIG_Sessions.RespondentID 
```

您也可以将索引添加到 EntryDate 和 SessionID，但如果您经常添加到 big_sessions，这可能会适得其反

通常，您可以通过研究估计的（或如果可能的实际）执行计划来获得有关如何提高查询性能的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:25:21.820

如果 IN 语句中的最小和最大 id 事先已知并且取决于表中有多少 id，那么`respondedID > [smallest_known_id-1] AND respondedID < [largest_known_id+1]`在 IN 语句之前添加一个将有助于限制问题

# java - System.out.println 重复自身

> ID：11750060
> 
> 赞同：1
> 
> 时间：2012-07-31T22:39:11.927
> 
> 标签：java, eclipse

谁能指出我正确的方向，为什么当我使用 for 循环时 println 函数在输出中出现两次。谢谢

```
public static void main(String[] args) {

    Scanner scan = new Scanner(System.in);
    System.out.println("Enter the number of employees to calculate:");
    int numberEmployees = scan.nextInt();

    for(int i=0; i<numberEmployees; i++){               
            System.out.println("Enter First Name:");
            name = scan.nextLine();
            System.out.println("Enter Last Name:");
            last = scan.nextLine();
            System.out.println("Enter Document #:");
            document = scan.nextInt();
            System.out.println("Enter Basic Salary");
            basicSalary = scan.nextInt();
            System.out.println("Enter # of Hours");
            hours = scan.nextInt();
    }
} 
```

**输出**

```
Enter the number of employees to calculate:
1
Enter First Name:
Enter Last Name:
daniel
Enter Document #: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:42:50.197

问题是，当您输入`1`新行时，该`nextInt()`函数不会删除您在 1\. 中输入的换行符。将您的调用更改`scan.nextInt()`为`Integer.parseInt(scan.nextLine())`，它应该按照您想要的方式运行。

进一步解释；这是来自 Java API 的东西。

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。然后可以使用各种 next 方法将生成的标记转换为不同类型的值。

和

> next() 和 hasNext() 方法及其原始类型的伴随方法（例如 nextInt() 和 hasNextInt()）首先跳过与分隔符模式匹配的任何输入，然后尝试返回下一个标记。hasNext 和 next 方法都可能阻塞等待进一步的输入。

所以，显然发生的事情（我没有在页面上看到任何确认）是在`next()`,`hasNext()`和它们的相关方法读入一个令牌之后，他们立即返回它，而不会在它之后吞噬分隔符（在我们的例子中是空格） . 因此，在它读入你的 1 之后，换行符仍然存在，所以下面的调用`nextLine()`有一个换行符来吞噬并这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:42:09.633

第一次输入后，换行符似乎仍保留在您的输入中。当请求下一个输入时，扫描器会看到一个换行符并将其解释为输入的结尾。这使它看起来跳过了所有其他输入请求。我建议查看 Java API 文档以了解`Scanner`' 方法的确切行为。

# ffmpeg - 如何使用 ffserver 将 rtsp h264 重新流式传输为 iO 的“实时 dvr”？

> ID：11750063
> 
> 赞同：4
> 
> 时间：2012-07-31T22:39:15.143
> 
> 标签：ffmpeg, wowza, ffserver

我想从提供 h264 编码 rtsp 流的 IP 摄像机中获取现有流，**并将**其重新流式传输到 iPhone/Ipad，用户将有机会及时跳回 aprox。1分钟。然后跳回“实时”提要。

实际上，我想在 wowza (http://www.wowza.com/addons/wowza-ndvr-addon) 中做同样的事情，但使用 ff** 软件。

感谢您的所有提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:49:42.490

我记得 ffserver 不支持 http 流协议，所以您将视频重新流式传输为什么。我知道 live555 服务器可以配置为 http 直播。

转换为 http 直播是我认为您想要重新流式传输的唯一可能原因。

有些框架可用于播放实时 rtsp 提要。

Dropcam 是其中之一，基于 live 555 ，我们这里有一个基于 ffmpeg

[https://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

这些都没有你想要的 x 秒的擦洗，但你可以轻松地取出提取的帧，将它们放入环形缓冲区并从缓冲区播放

看一下将视频（还不是音频）录制到新的 h264 mov 并将其存储在相册中的 ffplayer-tests

# c# - 如何访问列表中的类中的变量？

> ID：11750064
> 
> 赞同：1
> 
> 时间：2012-07-31T22:39:22.070
> 
> 标签：c#, class, arraylist

我正在尝试学习序列化 XML 文件，但在访问 List 中的 Class 中的变量时遇到了障碍。这是声明代码：

```
public class Library{
    public string name;
    public List<Book> books;
}

public class Book{
    public string name;
} 
```

这是我填充要序列化的列表的代码，但是每当我运行此代码时，所有的`library.books.name`最终总是等于我保存书的最后一件事，在本例中为“Xenocide”。

```
 public void MakeXML(){
        Library library = new Library();
        library.books = new List<Book>();       
        library.name = "Red";
        Book book = new Book();
        book.name = "Hobbit";
        library.books.Add(book);
        book.name = "Xenocide";
        library.books.Add(book);
    } 
```

我想知道是否有一种方法可以访问 List 书籍中 Class Book 中的变量名，但我似乎找不到任何东西。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:41:10.830

很简单：

```
library.books[0].name 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T22:44:09.320

您还遇到了一个问题，即您将同一本书添加到图书馆两次，并且只是在两者之间更改了它的名称。您需要创建两个单独的书籍对象并将每个对象添加到列表中。

```
 Book book1 = new Book();
    book1.name = "Hobbit";
    library.books.Add(book1);
    Book book2 = new Book()
    book2.name = "Xenocide";
    library.books.Add(book2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:34:11.527

您偶然发现了 OOP 的全部内容。正如 DGH 所说，您将同一本书添加到列表中两次，只是在两者之间更改名称。

您基本上是在创建一个`Book`名为的新对象`book`：

```
Book book = new Book(); 
```

然后，您将 name 字段分配`book`给“Hobbit”：

```
book.name = "Hobbit"; 
```

然后，您添加`book`到您的`Library.books`列表字段：

```
library.book.Add(book); 
```

然后，您将原书的名称字段***更改***为“Xenocide”并将其添加到列表中

```
book.name = "Xenocide"; 
```

上一行是我认为您忘记的内容。 `book`是单个对象。您可以将此特定*实例*传递`Book`给任何其他类或方法，并且始终使用相同的`book`. 您在此过程中所做的大多数更改总是会影响原书（有一些例外，但不多）

您需要随时创建一个新`Book`的`Book`. 这不是可选的，这是任何面向对象语言的要求。

# android - orientationchange JQM - Android 的值不正确

> ID：11750068
> 
> 赞同：1
> 
> 时间：2012-07-31T22:39:42.613
> 
> 标签：android, html, web-applications, jquery-mobile

我正在使用 JQM 并且我使用的方向更改：

```
$(window).bind('orientationchange', handleOrientationChange);

function handleOrientationChange() {
       var viewportWidth = 0;
           var viewportHeight = 0;

           // calculate map height and width
           if( typeof( window.innerWidth ) == 'number' ) {
               viewportWidth = window.innerWidth;
               viewportHeight = window.innerHeight;
           } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
               viewportWidth = document.documentElement.clientWidth;
               viewportHeight = document.documentElement.clientHeight;
           } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
               viewportWidth = document.body.clientWidth;
               viewportHeight = document.body.clientHeight;
} 
```

在 Android 中，当调用句柄函数时，我会在方向改变之前而不是之后获得尺寸。在 iPhone 上它工作正常。我需要添加一个 0.5/1 秒的小延迟......

有人知道原因或有更好的解决方案吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:47:06.563

我已经`setTimeout`成功地使用了这个想法。只要确保一次只设置一个超时：

```
var oc_timer;
$(window).bind('orientationchange', function () {
    clearTimeout(oc_timer);
    oc_timer = setTimeout(handleOrientationChange, 500);
}); 
```

我认为问题在于`orientationchange`事件在 Android 设备上被触发得太快，并且事件触发时视口尺寸尚未更新。我已经尝试绑定到`resize`事件，但它也需要超时。

# windows - 如何以编程方式启用“允许此设备唤醒计算机”？

> ID：11750071
> 
> 赞同：7
> 
> 时间：2012-07-31T22:39:45.510
> 
> 标签：windows, configuration, power-management, device

在某些计算机上，默认情况下，网络适配器配置为关闭“允许此设备唤醒计算机”选项。因此，局域网唤醒将不起作用。

我需要重新打开此选项，但我无法手动操作 - 计算机太多！所以，我需要能够通过 API 或脚本来完成。

（注意：这不是[如何以编程方式启用 LAN 唤醒](https://stackoverflow.com/questions/775006/how-to-enable-wake-on-lan-programmatically)的副本，因为这个问题是关于 BIOS 设置的，而这个问题是关于操作系统设置的。）

我已经使用批处理脚本得到了答案，但是非常欢迎替代解决方案，特别是如果他们使用 API。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T22:39:45.510

我在[The Old New Thing](http://blogs.msdn.com/b/oldnewthing/archive/2008/02/13/7658352.aspx)上找到了解决方案。该`powercfg`命令允许您操作电源设置，特别是您可以使用`-deviceenablewake`和`-devicedisablewake`打开和关闭“允许此设备唤醒计算机”选项。

您可以使用以下命令查看哪些设备能够执行此操作：

```
powercfg -devicequery wake_from_any 
```

您可以使用以下命令查看当前启用了该选项的设备：

```
powercfg -devicequery wake_armed 
```

综上所述，这是我刚刚开始用于启用 LAN 唤醒的批处理脚本：

```
powercfg -devicequery wake_from_any | findstr /i "network ethernet" >adapters.txt
for /F "tokens=*" %%i in (adapters.txt) do powercfg -deviceenablewake "%%i"
powercfg -devicequery wake_armed | findstr /i "network ethernet" || goto :failed 
```

在这种情况下，我选择在名称中包含单词“network”或单词“ethernet”的所有有效设备上启用该选项；当然，在某些情况下，您可能更愿意选择启用哪些设备。

# javascript - Javascript / jquery - 网站在 IE7 中根本没有加载，Google Adsense 在 IE8 中根本没有加载

> ID：11750079
> 
> 赞同：0
> 
> 时间：2012-07-31T22:40:46.857
> 
> 标签：javascript, jquery, internet-explorer

出于某种原因，以下网站在 IE7 中根本没有加载，而 Google AdSense 在 IE8 中根本没有加载。该网站在其他所有浏览器中都可以正常加载，包括 IE9、Firefox、Chrome。

该网站网址是： http: [//www.dog-health-guide.org](http://www.dog-health-guide.org)

在 IE 中使用 F12 开发人员工具控制台，我看到在 IE7 标准文档模式下 IE 抛出了一个 Javascript 错误（下面的屏幕截图）：

![来自 F12 开发人员工具的 IE7 文档模式下的 JS 错误](../Images/40802feb39b9fb5644e94bf25feec387.png)

任何关于我如何解决这个问题以弄清楚为什么它在 IE7 和 IE8 中出现问题的任何想法都非常感谢！

# qt - 如何从 Qt 导出完成的应用程序？

> ID：11750081
> 
> 赞同：3
> 
> 时间：2012-07-31T22:41:06.073
> 
> 标签：qt, user-interface, export

我有一个简单的基本应用程序，里面有一些 gui 的东西，我想用它向我的朋友吹嘘。我如何打包一个 .exe 或其他东西发送给他。我已经浏览了整个互联网，但找不到我正在寻找的东西。有人可以告诉我怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:49:59.063

这个过程称为[部署](http://doc.qt.nokia.com/4.7-snapshot/deployment.html)。也许您只是错过了正确的搜索关键字？

# java - 处理大量图像时“内存不足”

> ID：11750087
> 
> 赞同：2
> 
> 时间：2012-07-31T22:42:21.943
> 
> 标签：java, processing

我正在尝试运行一个草图，该草图应该在封面流动画中显示图像（png，大小在 100kb 和 1.5mb 之间，总共 55.4mb）。它适用于大约 10 张图像，但使用更多我会出现内存不足错误。我正在将图像文件名加载到一个字符串数组中，如下所示：

```
String[] names = {"00.jpg", "01.jpg", "02.jpg"}; 
```

然后他们像这样被加载到草图中：

```
covers = new Cover[names.length];
  for (int i = 0; i < covers.length; i++ ) {
  covers[i] = new Cover(names[i]);
}
initCovers(); 
```

涵盖类：

```
class Cover {
  PImage img;

Cover( String name ) {
img = loadImage(name);

public void drawCover() {
  beginShape();    
    textureMode(NORMALIZED);
    texture(img);
    vertex(-300, -300, 0, 0, 0);
    vertex( 300, -300, 0, 1, 0);
    vertex( 300,  300, 0, 1, 1);
    vertex(-300,  300, 0, 0, 1);
  endShape(); 
```

当我运行草图时，我的内存（8gb）在几秒钟内就被填满了，草图甚至没有加载，它只是崩溃了。当我用大约 10 张图像开始草图时，一切正常（大约 1.5gb 的 ram 使用量）。

我的问题是：为什么它使用这么多内存？正常吗？有没有办法让它运行时内存效率更高（例如，释放当前未显示的图像内存，因为我们一次只能在屏幕上看到大约 3 个图像）。

编辑：我认为问题在于在封面类中，每次调用它都会创建一个新的 PImage 。这可能吗？

**内存中的图像大小：**宽度 * 高度 *（颜色深度/8），所以对于我的图像（1575y1969，24 位）来说，这将是 8.9mb。乘以 91 图像：仅用于图像的内存使用量约为 807mb。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:08:51.653

现在我更好地理解了用例，我建议更改整个方法。

![盖流图形用户界面](../Images/d6b8ac85dc0a302820faf24c54512ebe.png)

您尝试模拟的[应用程序](http://adrianavarro.net/blog/quick-cover-flow-in-processing/)类型（例如上面看到的）***不会***在应用程序加载整个图像时立即加载。被呈现。相反，他们会首先阅读将要呈现给用户的一小部分图像。当用户接近该组的末尾时，软件会在序列开始时刷新一些图像（如果内存紧张）并在最后加载一些图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:50:55.373

尝试增加 JVM 堆空间

```
java -Xmx1024m 
```

（是的，我知道，1gig 是“有点”过度，但经过一些实验，这个值可以减少）

正如@millimoose 所说，Java 加载的图像在加载时会被解压缩到内存中，因此即使磁盘上 100kb 的小图像在解压缩时也会突然占用 mb 的 RAM。当您也开始处理 Alpha 通道时，它变得更加复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T23:00:24.930

压缩图像的大小不能很好地指导内存要求。

以像素为单位的大小更好。例如，具有 8 兆像素分辨率的现代相机照片需要至少 32mb 的内存来表示。如果您正在使用摇摆来处理这种尺寸的图像，那么至少是两倍或三倍。很容易吞噬大量内存。

此外，Java 的内部内存管理也不能很好地处理这种大小的块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T22:51:58.333

我会说尝试使用单个临时 Cover 作为句柄将它们绘制到一个组件上，而不是让 N 多个对象挂在周围？如果您需要在绘制时间后与图像交互，只需保留一些有关其绘制位置和尺寸的简单元数据，然后使用点击事件 x,y 等来查找给定图像以允许您使用它。

# unit-testing - 如何有效地对使用 ADO.NET 和 SQL Server 和 NUnit 的 DAL 进行单元测试？

> ID：11750088
> 
> 赞同：5
> 
> 时间：2012-07-31T22:42:23.517
> 
> 标签：unit-testing, c#-4.0, mocking, nunit, data-access-layer

因此，您在 C# 中有一个使用存储库模式的 DAL，并且每个存储库都有一个接口。它由 ADO.NET、MS SQL Server 和存储过程调用提供支持。

这非常适合在进行单元测试时在其他地方使用它的地方存根/模拟存储库，我喜欢它！

但是，我很想为 DAL 本身添加一些单元测试。最好使用带有 NUnit 的 Rhino Mocks。但是，如果可以证明它可以做一些 Rhino 在这个问题上不能做的事情，我愿意切换到 MoQ。

我宁愿在单元测试期间不让它与任何数据库对话，以保持它们更“纯”，同时仍然有效地测试 DAL 本身。但是，如果您不能真正有效地对 DAL 本身进行单元测试而不与数据库通信，那么在内存替换或基于可移植文件的替换中的替代方案是什么，这些替换与 SQL Server 以及相同的 SqlConnection 和 SqlCommand 调用兼容。

如果需要，可以重构 DAL 以使其更容易注入，只要它不会同时使设计过于复杂。已经在使用 Microsoft Unity，用于具有存储库模式的 DI。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T23:23:58.047

*这些单元测试*究竟会测试什么？考虑到典型的 DAL 代码，除了将实际工作委派给第 3 方数据访问代码（ADO.NET、EntityFramework、NHibernate）之外，几乎没有什么比这更重要的了。

我没有太多使用 ADO.NET，但我想这个 NHibernate 示例就足够了：

```
public User GetUser(int id)
{
    using (var session = sessionFactory.OpenSession())
    {
        return session.Get<User>(id);
    }
} 
```

当然，假设代码编写正确，所有依赖项（`sessionFactory`即）都将通过接口传递，因此很容易存根，因此编写单元测试**是可能的**（你只需要模拟很多东西来实现它） .

纯粹的方法是编写这样的单元测试，因为它是另一个数据点，证明您的代码确实符合您的假设（调用`Get`）。但是，请注意，这样的测试相当昂贵，因为您基本上必须对您的提供者进行的整个数据库访问进行存根（模拟`sessionFactory`以返回模拟会话，然后检查是否进行了调用）。

这是很难做出的决定（在这种情况下是否遵循纯粹的方法），因为无论如何您都必须使用真实数据库编写[集成测试。](http://en.wikipedia.org/wiki/Integration_testing)这些测试将涵盖与您编写的单元测试**完全相同的领域，但在真实环境中工作（而不是存根）。**

以我的经验，单元测试 DAL 通常不值得它提供的好处，特别是与它相当高的成本（为单元测试编写代码来存根数据库环境所花费的时间）和适当的集成测试套件的存在相比。

最后，我建议不要在任何类型的测试中使用内存数据库。原因如下：

*   它很慢
*   它有几个可能难以控制的故障点（ORM 配置、内存数据库设置、可能无效的测试数据）
*   给你做集成测试的错误感觉（虽然你不是；内存数据库的行为可能与你真正的生产数据库完全不同）

除非您可以将完全相同的数据库加载到内存中，否则请坚持适当的集成测试（这将是 DAL 测试的优先级）和独立的单元测试备份（只有在您有能力编写它们的情况下）。

# java - 如何使用java导出文件中的数据

> ID：11750089
> 
> 赞同：1
> 
> 时间：2012-07-31T22:42:25.140
> 
> 标签：java, list, arraylist, linked-list

我需要导出 4 列中的值。3 列的值正在正确填充。我在第 4 列出现问题，即组织列。它是多值列。即：它有多个值。

我试图将组织列的对象转换为字符串，但没有帮助。

请看下面的代码：

```
 String appname = "abc";
    String path = "//home/exportfile//";
    String filename = path+"ApplicationExport-"+appname+".txt";
    String ret = "false";

    QueryOptions ops = new QueryOptions();
    Filter [] filters = new Filter[1];
    filters[0] = Filter.eq("application.name", appname);
    ops.add(filters);

    List props = new ArrayList();
    props.add("identity.name");

    //Do search
    Iterator it = context.search(Link.class, ops, props);

    //Build file and export header row
    BufferedWriter out = new BufferedWriter(new FileWriter(filename));
    out.write("Name,UserName,WorkforceID,organization");
    out.newLine();          

    //Iterate Search Results
    if (it!=null)
    {                               
            while (it.hasNext()) {

                    //Get link and create object
                    Object [] record = it.next();
                    String identityName = (String) record[0];
                    Identity user = (Identity) context.getObject(Identity.class, identityName);

                    //Get Identity attributes for export
                    String workforceid = (String) user.getAttribute("workforceID");                 

                    //Get application attributes for export
                    String userid="";

                    List links = user.getLinks();
                    if (links!=null)
                    {
                            Iterator lit = links.iterator();
                            while (lit.hasNext())
                            {
                                    Link l = lit.next();
                                    String lname = l.getApplicationName();
                                    if (lname.equalsIgnoreCase(appname))
                                    {
                                              userid = (String) l.getAttribute("User Name");
                                              List orgList = l.getAttribute("Organization");

                                    }
                            }
                    }                               

                    //Output file
                    out.write(identityName+","+userid+","+workforceid+","+org);                             
                    out.newLine();                                                                          
                    out.flush();
            }                       
            ret="true";
    }
    //Close file and return
    out.close();
    return ret; 
```

这段代码的输出应该是：

例如：姓名、用户名、WorkforceID、组织 abc、abc、123、xy qwe、q01,234、xy

任何纠正此代码的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:06:26.387

**编辑：**

这应该给你你想要的输出：

out.write(identityName+","+userid+","+workforceid+","+Arrays.toString(orgList.toArray());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:47:35.393

您可能希望`List orgList`在 while 循环之外声明，因为每次创建它并且您正在使用 org 并且我在您的代码中的其他地方没有看到任何 org

# javascript - JSHint Backbone 未在 CodeKit 中定义

> ID：11750093
> 
> 赞同：8
> 
> 时间：2012-07-31T22:42:45.357
> 
> 标签：javascript, backbone.js, namespaces, jshint

一个小的测试应用程序是这样设置的：

`init.js`：

```
//@codekit-prepend "vendor/jquery-1.7.2.js"
//@codekit-prepend "vendor/underscore.js"
//@codekit-prepend "vendor/backbone.js"

// Setup namespace for the app
window.app = window.app || {};

//@codekit-append "models/Ride.js" 
```

`Ride.js`：

```
(function() {
    window.app.Ride = Backbone.Model.extend({

        initialize: function() {
            console.log("Ride initialized");
        }
    });
})(); 
```

CodeKit 的 JSHint 检查报告两者`Backbone`都`console`没有定义。我在这里想念什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T22:52:27.847

JSHint 不运行您的代码，因此它不知道您包含在其他文件中的任何模块。您必须明确告诉它您计划在`Ride.js`. 在您的情况下，它将是：`/*global Backbone */`。默认情况下是不允许的，因为用填充的调用`console`来发布你的软件不是一个好主意。`console.log`要删除此警告，您可以使用`/*jshint devel:true */`.

所以最后你的文件应该看起来像这样才能通过 JSHint 检查：

```
/*jshint devel:true */
/*global Backbone */

(function() {
    window.app.Ride = Backbone.Model.extend({

        initialize: function() {
            console.log("Ride initialized");
        }
    });
})(); 
```

更多信息在这里： http: [//www.jshint.com/options/](http://www.jshint.com/options/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T23:25:54.160

布莱恩在这里。CodeKit*确实*在一个完整的全局上下文中检查您的文件。（也就是说，它首先将它们组合起来，因此在较早文件中声明的变量将在以后的文件中有效。这假设您使用 CodeKit 来组合文件，或者使用 @codekit-prepend/append 语句或拖放导入链接集在 CodeKit 本身中）。如果您以其他方式（例如构建脚本）组合您的 JS 文件，那么 CodeKit 不知道这些文件是一起的，因此它会分别检查每个文件。

您可以使用上面答案中的注释标志，也可以直接在 CodeKit 中配置 JSHint 的选项。查看首选项窗口（或项目设置区域，如果您的项目使用项目级设置）。您也可以在那里输入自定义全局变量，这将删除这些警告。

干杯!

# c# - 在 Asp.net 中加载动态控制（Asp Page Lifecyle）

> ID：11750098
> 
> 赞同：-1
> 
> 时间：2012-07-31T22:42:57.660
> 
> 标签：c#, asp.net

我有一个加载用户控件的功能，它看起来像这样：

```
private void AddPopupControlToPage()
    {
        WidgetConfiguration popupControl = new WidgetConfiguration();
        popupControl = (WidgetConfiguration)LoadControl("~/Docking/Widgets/WidgetConfiguration.ascx");
        popupControl.ID = "PopupControlInput1";
        g_PopupControlId = popupControl.ClientID;
        popupControl.Attributes.Add("width", "150px");
        Form.Controls.Add(popupControl);
    } 
```

我有下拉菜单，允许我根据选择的模板更改页面布局。我应该能够从任何模板（页面）按调用弹出控件。根据我在此处阅读的内容 http://msdn.microsoft.com/en-us/library/ms178472.aspx 我应该能够在 Page_PreInit 事件中加载我的控件，但是此时未加载表单并且我得到一个空引用错误。关于我应该如何/在哪里加载弹出控件并将其保留在任何选定页面上的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:50:15.057

您应该加载一个始终覆盖 CreateChildControls 方法的控件

有点像

```
protected override void CreateChildControls()
    {
        base.CreateChildControls();
        //now load your control here
    } 
```

# asp.net - 如何使用asp.net在页面加载时设置下拉菜单的选定值和文本

> ID：11750099
> 
> 赞同：1
> 
> 时间：2012-07-31T22:43:09.897
> 
> 标签：asp.net, drop-down-menu

在 asp.net 页面中，我有一个预定义的下拉菜单

```
<asp:DropDownList CssClass="queryterm dropdownSpacer" ID="ddResultNum" runat="server">
     <asp:ListItem Text="10 Results " Value="10" />
     <asp:ListItem Text="20 Results" Value="20" />
     <asp:ListItem Text="30 Results" Value="30" />
     <asp:ListItem Text="40 Results" Value="40" />
     <asp:ListItem Text="50 Results" Value="50" />
     <asp:ListItem Text="100 Results" Value="100" />
</asp:DropDownList> 
```

在后面的代码中，我试图根据对数据库的查询来设置选定的值。

```
protected void SetResultsDropDown()
        {
            string selectCommand = String.Format("SELECT ResultsReturned FROM StoredFilters WHERE SecurityUserID = {0}", securityUserId);
            string resultValue = DatabaseUtilities.QueryDatabase(selectCommand, ConfigurationManager.AppSettings["informconnectstring"].ToString(), "ResultsReturned");
           //based upon the users id the db stores the set number from the drop down the default is 10 however if the number changes when the page loads I want the user to see what their current result set being returned is in the drop down vs. it defaulting to the first option
            ddResultNum.ClearSelection();
            switch (resultValue)
            {
                case "10":   
                    ddResultNum.Items[0].Selected = true; 
                    break;
                case "20":
                    ddResultNum.Items[1].Selected = true; 
                    break;
                case "30":
                    ddResultNum.Items[2].Selected = true;
                    break;
                case "40":
                    ddResultNum.Items[3].Selected =true;
                    break;
                case "50":
                    ddResultNum.Items[4].Selected = true;
                    break;
                case "100":
                    ddResultNum.Items[5].Selected = true;
                    break;
            }
        } 
```

我尝试使用 onInit 以及在页面加载期间调用此方法

```
protected override void OnInit( EventArgs e)
        {
            base.OnInit(e);
            // Extract an Inform User ID from the Token.
            IClaimsIdentity claimsIdentity = ((IClaimsPrincipal)(Thread.CurrentPrincipal)).Identities[0];
            securityUserId = Convert.ToInt64(claimsIdentity.Claims.Where(c =>
                c.ClaimType == AuthenticationConstants.INFORM_USER_ID_CLAIM_TYPE).First().Value);

            SetResultsDropDown();
        } 
```

当开关逐步通过并更新对象时，我从未在下拉菜单更新中看到文本。它始终保持设置为 10 个结果的第一项。

我尝试将控件包装在 udpatepanel 中，然后在面板上调用更新以查看是否可以在渲染和页面加载时强制刷新。

我也尝试过而不是使用`Items[0].Selected`我尝试将选定的索引设置为：

```
protected void SetResultsDropDown()
{
string selectCommand = String.Format("SELECT ResultsReturned FROM StoredFilters WHERE SecurityUserID = {0}", securityUserId);
string resultValue = DatabaseUtilities.QueryDatabase(selectCommand, ConfigurationManager.AppSettings["informconnectstring"].ToString(), "ResultsReturned");
ddResultNum.ClearSelection();
ddResultNum.SelectedIndex = ddResultNum.Items.FindByValue(resultValue);
} 
```

仍然没有运气。对于找出为什么此下拉菜单无法更新和表示/显示存储在数据库中的正确文本的任何帮助，我将不胜感激。

-干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:02:59.030

为什么不使用`DropDownList.SelectedValue`物业？？？

例如：

```
ddResultNum.SelectedValue = resultValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:53:31.687

您需要`SelectedIndex`在 DDL 本身上设置该属性。像这样（记住，索引是从零开始的）：

```
 switch (resultValue)
        {
            case "10":   
                ddResultNum.SelectedIndex = 0;
                break;
            case "20":
                ddResultNum.SelectedIndex = 1; 
                break;
            case "30":
                ddResultNum.SelectedIndex = 2;
                break;
            case "40":
                ddResultNum.SelectedIndex = 3;
                break;
            case "50":
                ddResultNum.SelectedIndex = 4;
                break;
            case "100":
                ddResultNum.SelectedIndex = 5;
                break;
        } 
```

# android - Android - 从动态创建的 Spinner 中获取所选项目

> ID：11750102
> 
> 赞同：2
> 
> 时间：2012-07-31T22:43:22.167
> 
> 标签：android, spinner

我根据我的应用程序的一些规则创建了一个 Spinner。因此，它是动态创建的。如何检索选择了哪个项目？

```
Spinner mySpinner = (Spinner)linearMoreInfo.getChildAt(1); 
```

使用此代码检索创建的动态微调器。但不知道如何处理它的点击/选择项目。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:47:25.920

我希望这个对你有用：

```
 mySpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
        {           
            Object obj = parent.getItemAtPosition(pos);
            ...         
        }
        public void onNothingSelected(AdapterView<?> parent) { }    
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:27:13.287

试试这个代码...

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int pos, long arg3) {
                // TODO Auto-generated method stub
                selected_item_position = pos;
                selected_item = spinner.getSelectedItem().toString();
                // You can insert your code...
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

# android - Android：很好地对齐许多按钮

> ID：11750104
> 
> 赞同：0
> 
> 时间：2012-07-31T22:43:35.267
> 
> 标签：android, button, android-relativelayout

我有一个带有 12 个按钮的 RelativeLayout，我想将它们很好地对齐在屏幕的中心，并且彼此之间的距离相等，并且左右边距相等（如计算器按钮或电话按钮）。我所做的是在这个 XML 文件和图片中的结果，但它仍然不完美。各位大神有没有更好的解决办法呢？

![在此处输入图像描述](../Images/a9626500624ee92303ca1ba05f518a39.png)

```
 <RelativeLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/tabview1">
    <TextView
        android:id="@+id/logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:text="www.fasttest.me" 
        android:textColor="@android:color/white"/>

    <Button
        android:id="@+id/ql0"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="100dp"
        android:layout_marginLeft="10dp"
        android:text="b0" />
   <Button
        android:id="@+id/ql1"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="100dp"
        android:layout_marginLeft="80dp"
        android:text="b1" />
   <Button
        android:id="@+id/ql2"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="100dp"
        android:layout_marginLeft="150dp"
        android:text="b2" />
    <Button
        android:id="@+id/ql3"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="100dp"
       android:layout_marginLeft="220dp"
        android:text="b3" />
    <Button
        android:id="@+id/ql4"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="180dp"
        android:layout_marginLeft="10dp"
        android:text="b4" />
   <Button
        android:id="@+id/ql5"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="180dp"
        android:layout_marginLeft="80dp"
        android:text="b5" />
   <Button
        android:id="@+id/ql6"
         android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="180dp"
        android:layout_marginLeft="150dp"
        android:text="b6" />
    <Button
        android:id="@+id/ql7"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="180dp"
        android:layout_marginLeft="220dp"
        android:text="b7" />
   <Button
        android:id="@+id/ql8"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="260dp"
       android:layout_marginLeft="10dp"
        android:text="b8" />
   <Button
        android:id="@+id/ql9"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="260dp"
        android:layout_marginLeft="80dp"
        android:text="b9" />
   <Button
        android:id="@+id/ql10"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="260dp"
       android:layout_marginLeft="150dp"
        android:text="b10" />
    <Button
        android:id="@+id/ql11"
        android:layout_width="@dimen/qlbutton_width"
        android:layout_height="@dimen/qlbutton_height"
        android:layout_marginTop="260dp"
       android:layout_marginLeft="2dp"
        android:text="b11" />
   </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:58:14.593

我建议您在 GridView 中使用按钮。为每个按钮赋予相同的重量，使其自行伸展：

```
<Button
    android:id="@+id/ql3"
    android:layout_height="@dime/button_height"
    android:layout_width="0dp"
    android:layout_weight="1"
    android:padding="@dimen/buttons_padding"
    android:text="b3" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:46:36.413

您可以使用来自 Romain Guy 的自定义 GridLayout。指定行数和列数。屏幕将被分成大小相等的单元格。

这是[链接](http://code.google.com/p/apps-for-android/source/browse/Photostream/src/com/google/android/photostream/GridLayout.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:56:42.803

我终于用按钮的gridview完成了。这是代码：

```
public class MainActivity extends Activity {
    public String[] filenames ={"B1","B2","B3","B4","B5","B6"};        
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);           
        GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new ButtonAdapter(this));  
        gridView.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> parent, 
            View v, int position, long id){                
                Toast.makeText(getBaseContext(), 
                        "pic" + (position + 1) + " selected", 
                        Toast.LENGTH_SHORT).show();
            }
        });        
    }

    public class ButtonAdapter extends BaseAdapter {
        private Context context;    
        public ButtonAdapter(Context c){
            context = c;
        }
        public int getCount() {
            return filenames.length;
        }
        public Object getItem(int position) {
            return position;
        }     
        public long getItemId(int position) {
            return position;
        }
        public View getView(int position, View convertView, ViewGroup parent){
              Button btn;  
                 if (convertView == null) {   
                  btn = new Button(context);  
                  btn.setLayoutParams(new GridView.LayoutParams(100, 100));  
                  btn.setPadding(8, 8, 8, 8);  
                  btn.setFOcusable(false);
                  btn.setClickable(false);
                  }else {  
                  btn = (Button) convertView;  
                 }               
                 btn.setText(filenames[position]);    
                 btn.setTextColor(Color.WHITE);  
                 btn.setId(position);       
                 return btn; 
        }
    }    
} 
```

# python - 如何保持列表列表中元素的顺序

> ID：11750106
> 
> 赞同：1
> 
> 时间：2012-07-31T22:43:51.227
> 
> 标签：python

假设我有一个清单

```
lst1 = [[(1, 1), (1, 2), (1, 3), (1, 4), (1, 5), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2)]] 
```

和另一个清单

```
lst2 = [['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)], ['b', (2, 1)], ['b', (2, 2)]] 
```

现在我如何确保在 lst1 中每个序列都应该保持原样，这意味着在 (1,1) 之前没有 (1,2) 或 (2,2) 之前没有 (2,3)

以及如何确保此顺序保留在 lst2 中，这意味着 ['a', (1,2)] 不应出现在 ['a', (1,1)] 或 ['b',(2,2 )] 不应该出现在 ['b', (2,1)] 之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:59:10.280

`lst1[0].sort(key=lambda tpl: tpl[0]*10 + tpl[1])`应该做的伎俩。

你也可以熟练地做到这一点`lst2`：`lst2.sort(key=lambda lst: lst[1][0]*10 + lst[1][1])`

**编辑：**

您想要达到的顺序显然是自然顺序。因此`lst1[0].sort()`，`lst2.sort()`并将按照您的问题中所述对列表进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:09:17.233

您可以实现自己的“ `compare`”功能并使用它。

例如，使用 lst2

```
lst2 = [['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)], ['b', (2, 1)], ['b', (2, 2)]]

def compareLst2(item1, item2):
    retval = 0
    retval = ord(item1[0])  - ord(item2[0]) 
    if retval == 0:
        for i in range(2):
            retval=item1[1][i] - item2[1][i]
            if retval != 0:
                return retval
    return retval

print sorted(lst2 , cmp=compareLst2) 
```

获取第一个位置的字符的 ascii 代码。( `'a' < 'b'`)。如果它们相等，则检查元组中的第一个数字（第二个位置），如果它们相等，则检查元组中的第二个数字...（“*元组*”是`itemWhatever[1]`）

这有点……嗯……愚蠢的方法，因为你不需要`ord`对字符进行排序，但你明白了，对吧？

# python - PIL - 无法读取打开的图像

> ID：11750107
> 
> 赞同：1
> 
> 时间：2012-07-31T22:43:53.547
> 
> 标签：python, python-imaging-library

我试图读取文件的格式，以便可以正确地为其分配一个新名称并将其写入磁盘，但是当 Image.open() 在图像上时，我无法将图像写入磁盘。例如：

这有效：

```
>>>file = open('708864.jpg')
>>> open('lala.jpeg', 'w').write(file.read()) 
```

但是，这不

```
>>>import Image
>>>im = Image.open('708864.jpg')
>>> im.format
>>> open('lala.jpeg', 'w').write(file.read()) 
```

它会创建一个损坏的文件 (lala.jpeg)，任何软件都无法打开该文件。我怀疑罪魁祸首是 Image.open()。在尝试找到 Image.close() 语句后，我找不到一个。您将如何“关闭”此图像，以便我仍然可以将其写入磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:47:26.307

正如我在评论中所建议的那样，这`im.save('lala.jpg')`是要走的路。

对于`Image`对象上的所有其他有趣的方法，您可以查看[文档](http://www.pythonware.com/library/pil/handbook/image.htm#methods)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:04:06.010

一些解决方法，这只是想法：

```
import Image
import StringIO

file = open('/home/mrok/1.jpg')
output = StringIO.StringIO(file.read())

im = Image.open('/home/mrok/1.jpg')
im.format

open('/home/mrok/2.jpg', 'w').write(output.getvalue())
output.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:45:26.513

正如评论中所说，我最终使用了一个我以前不知道的功能`Image.save()`，它很快解决了我的问题。

# c++ - 在类外声明静态函数不是定义

> ID：11750109
> 
> 赞同：3
> 
> 时间：2012-07-31T22:44:00.643
> 
> 标签：c++, static

使用 GCC 编译时出现此错误：

```
error: declaration of 'static int utils::StringUtils::SplitString(const std::string&, const std::string&, std::vector<std::basic_string<char> >&, bool)' outside of class is not definition 
```

**代码：**

**标题：**

```
namespace utils
{
    /*
    *   This class provides static String utilities based on STL library.
    */
    class StringUtils
    {
    public:
        /**
        *   Splits the string based on the given delimiter.
        *   Reference: http://www.codeproject.com/Articles/1114/STL-Split-String
        */
        static int SplitString( const std::string&              input, 
                                const std::string&              delimiter,
                                std::vector<std::string>&       results, 
                                bool includeEmpties =           true );
    };
}; 
```

**来源：**

```
namespace utils
{
    int StringUtils::SplitString(   const std::string&          input, 
                                    const std::string&          delimiter,
                                    std::vector<std::string>&   results, 
                                    bool                        includeEmpties );
    {
    ....
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T22:45:40.823

去掉源文件定义末尾的分号！复制粘贴错误=)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T22:47:01.333

我相信您需要在源文件中丢失该分号。应该：

```
namespace utils
{
    int StringUtils::SplitString(   const std::string&          input, 
                                    const std::string&          delimiter,
                                    std::vector<std::string>&   results, 
                                    bool                        includeEmpties ) // <--- No more semi-colon!
    {
    ....
    }
} 
```

# iphone - 搜索 NSDictionaries 的 NSArray

> ID：11750110
> 
> 赞同：0
> 
> 时间：2012-07-31T22:44:01.163
> 
> 标签：iphone, objective-c, ios

如果我 NSLOG() 我试图搜索的数组我得到这个......

```
(
    {
    id = 101323790;
    "screen_name" = AmyBurnett34;
},
    {
    id = 25073877;
    "screen_name" = realDonaldTrump;
},
    {
    id = 159462573;
    "screen_name" = ecomagination;
},
    {
    id = 285234969;
    "screen_name" = "UCB_Properties";
},
    {
    id = 14315150;
    "screen_name" = MichaelHyatt;
}
) 
```

这很好，但我需要做的是能够有一个方法让我输入一个 id，然后它将匹配的 screen_name 作为 NSString 返回。我怎么能这样做是调用数组。

我认为 NSPredicate 是我正在寻找的，但我不确定......

```
NSArray *twitterInfo; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:50:13.090

是的，NSPredicate 就是你想要的。像这样的东西：

```
NSString yourID; // assume this contains the id you want
NSPredicate *pred = [NSPredicate predicateWithFormat:@"id = %@", yourID];
NSString *screenName = [[[twitterInfo filteredArrayUsingPredicate:pred] lastObject] objectForKey:@"screen_name"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:20:41.827

我偏爱对块使用枚举（比谓词更容易理解:-)：

```
NSInteger desiredID = ...;
__block NSString *userName;

NSString *name = [twitterInfo enumerateObjectsUsingBlock:^(NSDictionary *dict, NSUInteger idx, BOOL *stop)
{
  NSInteger theID = [[dict objectForKey:@"id"] integerValue];
NSLog(@"Check ID %d against %d", theID, desiredID); // just to see its working
  if(theID == desiredID) {
    userName = [dict objectForKey:@"screen_name"];
    *stop = YES;
  }
} ]; 
```

如果最后 userName 为 nil，则找不到 id。

# c# - 使用类似 MS Word 的窗口对 WPF 应用程序进行编程

> ID：11750117
> 
> 赞同：0
> 
> 时间：2012-07-31T22:44:35.990
> 
> 标签：c#, wpf, ms-word, windowing

我想知道这是否可能？似乎一个 WPF 应用程序必须只有一个 MainWindow，它是应用程序的窗口。如果我创建其他窗口并显示它们，它们会像 MS Word 那样在任务栏中显示为单独的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:49:24.337

也许像这样简单：

```
// http://stackoverflow.com/questions/6417558/wpf-and-showdialog

Window window = new Window()
{
    Title = "Modal Dialog",
    ShowInTaskbar = true,                // show the dialog on the taskbar
    Topmost = true,                      // ensure we're Always On Top
    ResizeMode = ResizeMode.NoResize     // remove excess caption bar buttons
};

window.ShowDialog(Application.Current.MainWindow); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:20:27.560

WPF 建议使用非 MDI 接口，因为父窗口只保存 WinHandle（不像 Winforms 中的每个 MDI 子窗口都有自己的单独 WinHandle）。

如果您打算从 scartch 构建它，那么它会有点复杂，对您来说是一个大项目......我建议您使用`Dockmanagers`网络上的各种可用，例如 Infragistics \ Avalon Dock \ WPF Docking Library (CodeProject) 等.

这些**可以与 WinForms 中的 MDI 窗口类似地工作（即，它可以在父空间中包含子窗口，并且还可以在排列和停靠类似****Visual Studio**的东西时对它们进行制表符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:47:23.830

我有一个我现在正在开发的 WPF 应用程序，它有两个窗口。当应用程序运行时，任务栏中有两个项目，所以是的，这绝对是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T22:52:27.473

我认为您指的是MDI。

请阅读[这篇文章](http://blogs.msdn.com/b/nickkramer/archive/2005/07/08/436329.aspx)

另外（现在知道这是关于 MDI）[这个问题](https://stackoverflow.com/questions/5703954/alternative-to-mdi-in-wpf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T20:26:43.287

好像是我多虑了。我需要做的就是创建子窗口并调用`Window.Show()`.

当然，任何“MDI”都不会被加入，需要使用此解决方案手动管理。

# jquery - 编辑表单jqGrid后closeAfterEdit不起作用

> ID：11750121
> 
> 赞同：0
> 
> 时间：2012-07-31T22:45:03.500
> 
> 标签：jquery, asp.net-mvc, jqgrid, jqgrid-asp.net

我正在使用 jqgrid，唯一的问题是编辑表单在编辑后没有关闭，而添加表单和删除表单已关闭并正确重新加载。我认为我给出的选项顺序不正确，但我尝试了不同的排列但没有运气。任何人都可以看看我的javascript并提供任何建议吗？

```
$("#person").jqGrid('navGrid', '#personpager', { edit: true, add: true, del: true, search: true },
           { closeAfterEdit:true, reloadAfterSubmit: true },
           { closeAfterAdd:true, reloadAfterSubmit: true },
           { reloadAfterSubmit: true },
           { closeOnEscape:true, multipleSearch: true, closeAfterSearch: true },
           {}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T21:01:10.287

在尝试了我可能添加的每个地方之后，我才解决了这个问题`closeAfterEdit: true`。我在 colModel 中定义了 formatoptions 来打开模态进行编辑；看起来`formatoptions.editoptions`是我需要设置值的地方：

> ```
> colModel: [...{
>                   name: 'Edit',
>                   search: false,
>                   width: 60,                  
>                   sortable: false,
>                   edittype: 'button',
>                   formatter: 'actions',
>                   formatoptions: {
>                       editformbutton: true,
>                       editOptions: {
>                           **closeAfterEdit: true**
>                       },
>                       delOptions: {
>                           ... 
>                           },
>                           onclickSubmit: function (params, postdata) {
>                               var rowData = $(this).getRowData(postdata);
>                               return { TagId: rowData.TagId };
>                           }
>                       }
>                   },
>                   title: false
>               }, 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:12:03.107

这可能是您正在使用的 jqGrid 版本中的错误，顺便说一句，您正在使用的版本是什么......无论如何

看看这个解决方案，我认为这正是你所需要的

[jqgrid - 关闭表单对话框](https://stackoverflow.com/questions/9077864/jqgrid-close-form-dialog)

# ios - 如何使用不同的皮肤/品牌构建不同版本的应用程序？

> ID：11750124
> 
> 赞同：10
> 
> 时间：2012-07-31T22:45:19.553
> 
> 标签：ios, xcode

我正在创建一个通用应用程序，它将为不同的客户提供不同的构建。该应用程序对于每个客户来说都是 99.5% 的相同，不同之处在于每个客户都使用客户自己的特定图像和文本以及应用程序图标等进行标记。

显然，这可以使用以下标志来完成：

```
#if defined (CUSTOMER_A)
    NSString* text = @"Text for customer A";
    UIImage *image = [UIImage imageNamed:@"customerAImage"];
#elseif defined (CUSTOMER_B)
    NSString* text = @"Text for customer B";
    UIImage *image = [UIImage imageNamed:@"customerBImage"]; 
```

但显然我想避免这种情况，只需要：

```
 NSString* text = @"Text";
   UIImage *image = [UIImage imageNamed:@"image"]; 
```

（文本将是可本地化的，因此它将在最终版本中使用 NSLocalizedString）。

我想知道是否有一种可能的方法是将项目与许多静态库一起放入工作区，每个静态库都包含每个客户的特定文本和图像，然后使用不同的方案来创建不同的构建。因此，方案 A 将创建一个使用主项目和静态库 A 构建的目标。

我从一个小的概念证明开始，但在走得太远之前，我首先想检查一下这是一种可行且合理的方法，或者是否有更好的选择。如果可行，那么会想到几个问题：

*   如何从主项目中的代码访问静态库中的图像？是否必须创建一个包才能访问库的内容，这是如何完成的？

*   是否可以根据使用的方案更改应用程序桌面和市场图标？

*   是否可以为每个方案指定一组不同的分发证书等？

*   静态库不能包含本地化变体是真的吗？

这适用于 iOS，因此不可能为此使用框架。

感谢您的任何反馈。

（PS 构建系统将使用 Jenkins 自动化）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T23:05:04.537

您只需要在项目中创建多个目标并为每个目标（客户/品牌）拥有资源文件夹。以下是如何做到这一点：

1.  创建两个新的资源文件夹 Resources_Customer1 b. 资源_客户2
2.  将适当的资源复制到相应的文件夹中
3.  选择项目 -> 目标
4.  复制目标
5.  在 [Copy Build Resources] 中自定义资源名称，使其指向适当的
    客户/品牌
6.  根据所选目标测试和验证适当的目标运行。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T23:23:12.653

您计划支持多少种变体？如果您拥有多个目标/项目/等，那么拥有一个目标/项目/等就会变得笨拙。这大致就是我们所做的：

*   Jenkins 监控源代码控制并构建它看到的任何新提交。
*   Jenkins 将输出 .app 与“皮肤”集合一起归档
*   一个自制的网站与 Jenkins API 挂钩，并列出了（分支、皮肤）的所有排列。
*   “用户”选择一个（分支，皮肤），自制站点调用一个脚本，将皮肤“应用”到 .app 包，对其进行签名并将其打包成一个 .ipa，然后安装到用户的设备上。

皮肤“应用程序”过程基本上包括提供“皮肤”目录列表，这些目录是要复制到应用程序包中的文件。任何重复的文件都会被皮肤覆盖。应用程序的基础`Info.plist`与皮肤目录中指定的任何更改合并。

本质上，我们尝试尽可能地将皮肤与代码本身分开。我们发现，任何涉及 Xcode 本身的解决方案都需要手动从开发人员的头皮上自行去除头发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-25T22:25:07.447

在我现在的雇主大约 3 年的时间里，我们一直在应用一个部分受到 @SedateAlien 回答的启发的后期构建流程，我不得不说，如果您处理的不仅仅是几个品牌，这绝对是要走的路。

这并不完全是在公园里散步，但一旦你最终让一切正常工作，它将为你节省大量时间，同时让你的项目保持干净和简单。

这是我们采用的高级方法：

1.  使用将作为原型的单一目标来设计和构建您的应用程序项目，即只是一个单一品牌或“未剥皮”变体。您将针对此目标执行大部分开发，因此请确保它具有足够的基础资源以完全可用。
2.  在某处建立一个“品牌资源”存储库来保存不同的品牌资产。我们在每个品牌的目录中使用一个“brand.config”文件，其中包含各种品牌特定的信息，如应用名称、捆绑包 ID 等，以及将交换到捆绑包中的各种知名资源文件。
3.  设置构建服务器（我们使用 Jenkins）或 shell 脚本，以基于构建的原型 .app 执行品牌塑造过程。品牌流程如下：

4.  将整个原型 .app 包复制到新目录并删除所有代码签名。

5.  使用 Plistbuddy 根据 brand.config 中的参数修改捆绑包的 plist。
6.  将捆绑包中的知名资源（图像等）替换为品牌资源目录中的资源。
7.  对应用程序可执行文件进行协同设计，并将其打包并压缩为 .ipa。

最棘手的部分无疑是代码设计。您可能需要使用权利文件，并且还必须确保证书被正确识别并安装在您的构建机器上。

如果遇到问题，请不要放弃。我保证*是*可能的！我会尽力帮助解决人们在评论中遇到的任何具体问题，但我知道我已经有一段时间没有积极开发这个了，所以我不能说得太详细。

我还应该提到，我们在 App Store 提交的过程中从未遇到任何问题，而且我们提交了*很多*应用程序（每次更新 100 多个）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T23:02:36.423

我为一家公司做了同样的事情，所以我可以和你分享我是怎么做的。我一直和你在一起，直到你说 Jenkins，因为我使用了 Xcode，但也许你可以让它工作。

本质上，您创建了一个包含在“皮肤”应用程序项目中的库项目。皮肤包括任何特定于应用程序的图像、plist，甚至可能还有一些方法。您创建一个由框架使用的 .h 文件，该文件具有一个出售对象、函数或全局变量的类 - 您自己决定。该文件的标头包含在库中以允许构建库。

例如，假设它有“extern UIImage *mainBackgroundImage;”，并且您在库中引用它（即您检索它以进行显示）。

“皮肤”应用程序当然有 .m（或 .c）文件来解析您在 .h 文件中承诺的所有公共项目。

在 Xcode 中，您将创建一个库项目。您将在每个“皮肤”项目中包含它（请记住，您需要在“构建阶段”窗格中获得对库的依赖，并确保该库包含在“链接”阶段。如果您在库中使用您需要的类别通过在每个目标的项目中的链接标志中添加一个特殊行来强制加载库。

您可以在半小时内构建一个带有两个项目的小测试工具，以说服自己这很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-02T01:02:55.347

对于遇到这种困境的人来说，值得注意的是，iOS7 中资产目录的引入使得这个问题在 XCode 中很容易解决。我有具有多个目标的项目，资产目录可以轻松地在一个地方处理资源、自定义构建设置和代码签名问题。不仅如此，当 Apple 推出新的外形尺寸（例如 iPhone 6+）时，很容易看出哪些资产目录不是最新的（例如，缺少 iPhone 6+ 启动屏幕）。也非常灵活。假设您有 12 个目标需要剥皮，7 个是学校，5 个是工作场所。创建一个名为的新资产目录`SchoolMedia`和另一个名为`WorkMedia`. 在每个目录中添加一个名为`main_symbol`. 在您的 XIB 中，使用`main_symbol`. 使`SchoolMedia`学校目标的成员和`WorkMedia`工作目标的成员。右侧`main_symbol`将根据目标显示。排列是无穷无尽的，XCode 的可视化界面可以很容易地理解正在发生的事情（即使过去有点难以管理）

# grails - Grails - 无法为域类中的属性添加自定义验证器

> ID：11750130
> 
> 赞同：2
> 
> 时间：2012-07-31T22:46:32.873
> 
> 标签：grails, grails-orm, grails-domain-class, customvalidator

我正在尝试为字符串状态添加一个自定义验证器，它应该检查字符串国家是否是“美国”，那么状态应该是“其他”。如果国家不是“美国”而国家是“其他”，那么它应该抛出一个错误。

另外，我想为国家添加一个自定义验证器来做同样的事情。

请在下面找到我的域类的代码。

```
package symcadminidp

import java.sql.Timestamp

import groovy.transform.ToString

@ToString
class Account {

static auditable = [ignore:['dateCreated','lastUpdated']]

String organization
String organizationUnit 
String status
String address1
String address2
String zipcode
String state
String country

Timestamp dateCreated
Timestamp lastUpdated

Account(){
    status = "ENABLED"
}

static hasMany = [samlInfo: SAMLInfo, contacts: Contact]
static mapping = {
    table 'sidp_account_t'
    id column: 'account_id', generator:'sequence', params:[sequence:'sidp_seq']
    contacts cascade:'all'
    accountId generator:'assigned'

    organization column:'org'
    organizationUnit column:'org_unit'
    zipcode column:'zip'
    dateCreated column:'date_created'
    lastUpdated column:'date_updated'
}
static constraints = {
    organization size: 1..100, blank: false
    organizationUnit size: 1..100, blank: false, unique: ['organization']
    //The organizationUnit must be unique in one organization 
    //but there might be organizationUnits with same name in different organizations, 
    //i.e. the organizationUnit isn't unique by itself.
    address1 blank:false
    zipcode size: 1..15, blank: false
    contacts nullable: false, cascade: true
    status blank:false
    //state ( validator: {val, obj ->  if (obj.params.country.compareTocompareToIgnoreCase("usa")) return (! obj.params.state.compareToIgnoreCase("other"))})
        //it.country.compareToIgnoreCase("usa")) return (!state.compareToIgnoreCase("other"))}
}
} 
```

当我尝试添加上述注释掉的代码时，出现以下错误：

URI：/symcadminidp/account/index 类：groovy.lang.MissingPropertyException 消息：没有这样的属性：类的参数：symcadminidp.Account

我是 grails 和 groovy 的新手，希望能在这个问题上提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:53:30.940

验证器 (obj) 的第二个值是 Account 域类。

> 自定义验证器由最多三个参数的闭包实现。如果闭包接受零或一个参数，则参数值将是被验证的值（在零参数闭包的情况下为“它”）。如果它接受两个参数，第一个是值，第二个是正在验证的域类实例。

[http://grails.org/doc/latest/ref/Constraints/validator.html](http://grails.org/doc/latest/ref/Constraints/validator.html)

您的验证器应该类似于

```
state validator: { val, obj -> 
    return ( obj.country.toLowerCase() == 'usa' ) ?
           ( val.toLowerCase() != 'other' ) : 
           ( val.toLowerCase() == 'other' ) 
} 
```

# javascript - 在 Node.js 中使用第三方 JavaScript 文件

> ID：11750136
> 
> 赞同：0
> 
> 时间：2012-07-31T22:47:24.173
> 
> 标签：javascript, node.js

我有一个不是为 Node.js 编写的 JavaScript 文件。它实际上是我写的，但是如果你把它当作第三方库，这个问题可能会更容易理解。

通常，Node.js 模块仅将`module.exports`对象公开给外部代码。这需要在编写文件时考虑到 Node.js。

但是，该文件不是为 Node.js 编写的，但我想将它包含到 Node.js 模块中。我无法编辑此文件，因为它将在以后使用，独立于 Node.js。

我想我可以通过读取文件并调用`eval`内容来完成它，但是有更好的方法吗？

TL;博士

如何将 .js 文件包含到 Node.js 模块中，而无需重写它以使用特定于 Node.js 的代码`exports`？

PS 我想在 Node.js 中使用它的原因是在将它部署到其他地方之前进行一些测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:54:34.180

这取决于代码是如何写入该文件的。如果文件包含一个类或单个对象，那么您可以这样做：

```
(function(global) {

    function MyClass() {

    }

    MyClass.prototype = {
            ...
    };

    if( typeof module !== "undefined" && module.exports ) {
        module.exports = MyClass;
    }
    else if ( global ) {
        global.MyClass = MyClass;
    }

})(this); 
```

如果需要，您可以将全局分配修改为更深的命名空间。

# objective-c - 如何在drawAtPoint中改变NSString的颜色

> ID：11750137
> 
> 赞同：12
> 
> 时间：2012-07-31T22:47:24.317
> 
> 标签：objective-c, ios

我在这里有这段代码，它绘制了一个带有一个字符串的块：

```
CGContextDrawImage(context, CGRectMake([blok getLocation].x * xunit, [blok getLocation].y * yunit, 40, 40), [blok getImage].CGImage);
[[blok getSymbol] drawAtPoint:CGPointMake([blok getLocation].x * xunit+15, [blok getLocation].y * yunit) withFont:[UIFont fontWithName:@"Helvetica" size:24]]; 
```

它工作正常，但我一直在做一些布局更改，现在我需要它以便绘制的字符串是白色的。使用设置填充颜色和描边颜色的方法没有做任何事情。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-02-21T16:52:16.367

在属性中设置前景色并使用draw withAttributes函数

```
NSDictionary *attributes = [NSDictionary dictionaryWithObjects:
                            @[font, [UIColor whiteColor]]
                            forKeys:
                            @[NSFontAttributeName, NSForegroundColorAttributeName]];
[string drawInRect:frame withAttributes:attributes]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T22:49:03.920

你有没有尝试过：

```
CGContextSetFillColorWithColor(UIGraphicsGetCurrentContext(), textColor); 
```

例如：

```
CGContextDrawImage(context, CGRectMake([blok getLocation].x * xunit, [blok getLocation].y * yunit, 40, 40), [blok getImage].CGImage);
CGContextSetFillColorWithColor(UIGraphicsGetCurrentContext(), textColor);
[[blok getSymbol] drawAtPoint:CGPointMake([blok getLocation].x * xunit+15, [blok getLocation].y * yunit) withFont:[UIFont fontWithName:@"Helvetica" size:24]]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-31T22:50:18.703

这是我用于绘制标签的：

```
- (void)_drawLabel:(NSString *)label withFont:(UIFont *)font forWidth:(CGFloat)width 
           atPoint:(CGPoint)point withAlignment:(UITextAlignment)alignment color:(UIColor *)color
{
    // obtain current context
    CGContextRef context = UIGraphicsGetCurrentContext();

    // save context state first
    CGContextSaveGState(context);

    // obtain size of drawn label
    CGSize size = [label sizeWithFont:font 
                             forWidth:width 
                        lineBreakMode:UILineBreakModeClip];

    // determine correct rect for this label
    CGRect rect = CGRectMake(point.x, point.y - (size.height / 2),
                             width, size.height);

    // set text color in context
    CGContextSetFillColorWithColor(context, color.CGColor);

    // draw text
    [label drawInRect:rect
             withFont:font
        lineBreakMode:UILineBreakModeClip
            alignment:alignment];

    // restore context state
    CGContextRestoreGState(context);
} 
```

# android - onStop 开始活动时

> ID：11750141
> 
> 赞同：0
> 
> 时间：2012-07-31T22:47:47.280
> 
> 标签：android

我有一个问题。当我开始一项活动时，并不总是执行 onStop 方法。

有时我在开始活动后会得到以下信息：

onPause -> onStop -> onActivityResult -> onRestart -> onStart -> onResume

但其他时候我只得到这个：

onPause -> onActivityResult -> onResume

我使用了这段代码：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
pImageCaptureUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),
        "tmp_avatar_"+ String.valueOf(System.currentTimeMillis())+ ".jpg"));
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
        pImageCaptureUri);
intent.putExtra("return-data", true);
startActivityForResult(intent, PICK_FROM_CAMERA); 
```

我尝试使用 Intent.FLAG_ACTIVITY_CLEAR_TOP，但结果没有改变。

还有什么想法吗？

提前致谢。

# javascript - Javascript - 使用 for...in 遍历对象时遇到问题

> ID：11750145
> 
> 赞同：3
> 
> 时间：2012-07-31T22:48:22.397
> 
> 标签：javascript, jvectormap

我有一个动态生成的对象，如下所示：

```
colorArray = { 
    AR: "#8BBDE1", 
    AU: "#135D9E", 
    AT: "#8BBDE1",
    ... } 
```

我正在尝试在调用插件期间通过使用[此插件](http://jvectormap.com/documentation/javascript-api/ "jVectorMap")和“颜色”属性来为地图着色。像这样：

```
$('#iniDensityMap').vectorMap({
    backgroundColor: '#c2e2f2',
    colors: colorArray,
    ... (some other params)
}); 
```

但它不会在国家/地区着色。当我硬编码它时，它工作正常 - 但它必须为这个项目动态生成，所以这样的东西对我不起作用（尽管它确实为地图着色）：

```
$('#iniDensityMap').vectorMap({
    backgroundColor: '#c2e2f2',
    colors: { AR: "#8BBDE1", AU: "#135D9E", AT: "#8BBDE1" },
    ... (some other params)
}); 
```

我已经在插件中充分追踪了这个问题，发现它与这个循环有关：

```
setColors: function(key, color) {
  if (typeof key == 'string') {
    this.countries[key].setFill(color);
  } else {

    var colors = key; //This is the parameter passed through to the plugin

    for (var code in colors) {

      //THIS WILL NOT GET CALLED

      if (this.countries[code]) {
        this.countries[code].setFill(colors[code]);
      }
    }
  }
}, 
```

我也尝试过`colorArray`在插件之外自己迭代对象，我遇到了同样的问题。**for ( var x in obj )**中的任何内容都不会触发。我还注意到`colorArray.length`返回*undefined*。另一个重要的注意事项是，我`var colorArray = {};`在单独的调用中进行了实例化，试图确保它位于全局范围内并且能够被操纵。

我认为问题是：

1.  我动态填充对象的方式 - `colorArray[cCode] = cColor;`（在 jQuery .each 调用中）
2.  我再次混淆了javascript中Arrays()和Objects()之间的区别
3.  也许这是一个范围问题？
4.  以上所有内容的某种组合。

**编辑#1：**我已将关于 Firebug 控制台中的对象的附加问题移至新帖子[HERE](https://stackoverflow.com/questions/11763932/objects-in-firebug-console)。这个问题比我在这里询问的底层 JS 问题更具体地涉及 Firebug。

**编辑#2：附加信息** 这是我用来动态填充对象的代码：

```
function parseDensityMapXML() {
$.ajax({
    type: "GET",
    url: "media/XML/mapCountryData.xml",
    dataType: "xml",
    success: function (xml) {
        $(xml).find("Country").each(function () {
            var cName = $(this).find("Name").text();
            var cIniCount = $(this).find("InitiativeCount").text();
            var cUrl = $(this).find("SearchURL").text();
            var cCode = $(this).find("CountryCode").text();

            //Populate the JS Object
            iniDensityData[cCode] = { "initiatives": cIniCount, "url": cUrl, "name": cName };
            //set colors according to values of initiatives count
            colorArray[cCode] = getCountryColor(cIniCount);
        });
    }
});
} //end function parseDensityMapXML(); 
```

然后在页面上其他地方的复选框的单击事件上调用此函数。对象`iniDensityData`和`colorArray`在 html 文件的头部声明 - 希望将它们保持在全局范围内：

```
<script type="text/javascript">
    //Initialize a bunch of variables in the global scope
    iniDensityData = {};
    colorArray = {};
</script> 
```

最后，这是正在读取的 XML 文件的片段：

```
<?xml version="1.0" encoding="utf-8"?>
<icapCountryData>
  <Country>
    <Name>Albania</Name>
    <CountryCode>AL</CountryCode>
    <InitiativeCount>7</InitiativeCount>
    <SearchURL>~/advance_search.aspx?search=6</SearchURL>
  </Country>
  <Country>
    <Name>Argentina</Name>
    <CountryCode>AR</CountryCode>
    <InitiativeCount>15</InitiativeCount>
    <SearchURL>~/advance_search.aspx?search=11</SearchURL>
  </Country>
  ... and so on ...
</icapCountryData> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:32:10.477

**解决了！**最初，我正在调用该函数`parseDensityMapXML()`，然后在它调用另一个函数后立即调用另一个函数`loadDensityMapXML()`，该函数获取在第一个函数中动态创建的对象并迭代它。问题是，它不是作为第一个函数的**回调调用**的，所以在对象构建之前就被触发了。

为了解决这个问题，我刚刚修改了上面提到的第一个函数，以便在**.each()**完成创建对象*后调用第二个函数：*

 **```
function parseDensityMapXML() {
$.ajax({
    type: "GET",
    url: "media/XML/mapCountryData.xml",
    dataType: "xml",
    success: function (xml) {
        $(xml).find("Country").each(function () {
            var cName = $(this).find("Name").text();
            var cIniCount = $(this).find("InitiativeCount").text();
            var cUrl = $(this).find("SearchURL").text();
            var cCode = $(this).find("CountryCode").text();

            //Populate the JS Object
            iniDensityData[cCode] = { "initiatives": cIniCount, "url": cUrl, "name": cName };
            //set colors according to values of initiatives count
            colorArray[cCode] = getCountryColor(cIniCount);
        });

        /* and then call the jVectorMap plugin - this MUST be done as a callback
           after the above parsing.  If called separately, it will fire before the
           objects iniDensityData and colorArray are created! */
        loadDensityMapXML();
    }
});
} //end function parseDensityMapXML(); 
```**

# jms - 能够连接到远程队列管理器但不能创建主题连接

> ID：11750152
> 
> 赞同：2
> 
> 时间：2012-07-31T22:49:04.970
> 
> 标签：jms, ibm-mq

我正在尝试通过一种非常标准的机制将消息发布到远程 JMS 队列：

```
TopicConnection tc = null;
TopicSession ts = null;
TopicPublisher tp = null;
Properties p = new Properties();
String providerUrl = "iiop://servername:9810";
String contextFactory = "com.ibm.websphere.naming.WsnInitialContextFactory".trim();
p.put(javax.naming.Context.PROVIDER_URL, providerUrl );
p.put(javax.naming.Context.INITIAL_CONTEXT_FACTORY, contextFactory );
InitialContext ct = new InitialContext(p);

{                       
Topic topic = (Topic)ct.lookup( "jms/customer_event" );
TopicConnectionFactory tcf = (TopicConnectionFactory)ct.lookup( "jms/TopicFactory2" );
tc = tcf.createTopicConnection();
....
..
..
} 
```

现在， Topic 和 TopicConnectionFactory 查找很好，但是当涉及到 时`tcf.createTopicConnection()`，它会抛出：

```
javax.jms.JMSException: MQJMS2005: failed to create MQQueueManager for 'servername:QMGR1'
Inner exception(s):
com.ibm.mq.MQException: MQJE001: Completion Code 2, Reason 2059
java.net.ConnectException: Connection refused: connect 
```

我打开了 MQ 资源管理器，主题在远程队列管理器上。TopicCoonectionFactory 是否`TopicFactory2`也应该驻留在队列管理器上？因为它没有。错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:11:21.833

When connecting, the details of host, port and channel must be correct. If the host or port are wrong, then the TCP socket is refused. If the channel name is wrong, then the queue manager will refuse the connection and close the socket. It is possible that you have all the details correct but that the listener on the queue manager is not running.

If the connection is getting as far as the queue manager then you will have an error in the `[WMQ Install dir]/qmgrs/[QMgr name]/errors/AMQERR01.LOG` file. If the connection gets to WMQ but cannot resolve the queue manager's name or specifies the wrong QMgr then the error will be in `[WMQ Install dir]/errors/AMQERR01.LOG`. If there is no entry in either of these then the connection isn't making it to WMQ and you need to check the listener or the network.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:01:45.377

2059 连接被拒绝很可能是网络错误或 MQ 服务器主机名和/或端口中的类型。仔细检查您在 WebSphere 中的配置和网络连接。

ConnectException 的 JavaDoc 也说明了这个[http://docs.oracle.com/javase/6/docs/api/java/net/ConnectException.html](http://docs.oracle.com/javase/6/docs/api/java/net/ConnectException.html)

> Signals that an error occurred while attempting to connect a socket to a remote address and port. Typically, the connection was refused remotely (e.g., no process is listening on the remote address/port).

# python - 绘制两个不同长度的数组

> ID：11750156
> 
> 赞同：2
> 
> 时间：2012-07-31T22:49:33.197
> 
> 标签：python, arrays, matplotlib

所以我有一些数据

```
import pyfits
import matplotlib.pyplot
a = pyfits.getdata('data.fits')
x = a['time']
y = a['flux'] 
```

我的数组包含 NaN 值的一些数据存在问题。为了摆脱它们，我做了以下事情：

```
x = x[numpy.logical_not(numpy.isnan(x))]
y = y[numpy.logical_not(numpy.isnan(y))] 
```

从数组中删除所有 NaN 值`x`和`y`. 问题是它`x`并`y`没有包含相同数量的 NaN 值。

所以：

```
len(y) = 4275 
```

然而：

```
len(x) = 4313 
```

我希望能够做到这一点：

```
pyplot.plot(x,y) 
```

但是尝试绘制不同维度的数组存在问题。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:54:18.560

您可以压缩这两个数组，并丢弃`(x, y)`其中一个`x`或`y`的任何点`NaN`（我认为这是最有意义的）。现在我不熟悉 numpy 或者它是否提供了一种简短的方法来做到这一点，您可能需要自己实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:53:58.223

你是如何得到你的数据图的？我会假设在导入时你会让 x 或 y 为 0，这样每个 x 都有一个适当的 y？

# ios - 从控制器外部调用控制器方法

> ID：11750157
> 
> 赞同：1
> 
> 时间：2012-07-31T22:49:49.407
> 
> 标签：ios, methods, controller

我有一个`RenderTone`声音播放方法的实现，我想从那个方法调用控制器方法。我可以像这样访问控制器成员：

```
InstrumentGridViewController *viewController = (InstrumentGridViewController *)inRefCon;
viewController->count = 7; 
```

但我想做的是以同样的方式调用一个方法。我试过这个，但它不工作：

```
viewController->stopToneUnit; 
```

我的方法实现如下所示：

```
- (void) stopToneUnit{
    AudioOutputUnitStop(toneUnit);
    AudioUnitUninitialize(toneUnit);
    AudioComponentInstanceDispose(toneUnit);
    toneUnit = nil;
} 
```

我应该如何调用这个方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:24:28.637

在 Objective-C 中发送消息的语法是：

```
[viewController stopToneUnit]; 
```

# c# - asp.net 中的简单 Html 菜单 .. 损坏的 url 问题

> ID：11750162
> 
> 赞同：-1
> 
> 时间：2012-07-31T22:50:17.253
> 
> 标签：c#, asp.net, menu, navigation

当我使用在 html 中手动构建的简单菜单时，css 会出现导航问题。当我导航到文件夹内的页面时，当我导航到当前文件夹之外的某个位置时，上一个文件夹仍保留在 url 中，并且出现找不到页面的消息。我目前处于开发阶段。未部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:58:33.213

这是因为您尝试重定向时没有返回根目录

例如

我有一个不在文件夹中的名为 Default.aspx 的页面，在名为 SubFolder 的文件夹中有一个页面 Page.aspx。

您的 url 可能看起来像这样重定向： Default.aspx SubFolder/Page.aspx

当您尝试从 Page.aspx 重定向到 Default.aspx 时，您不会返回到根目录，因此代码会在文件夹 SubFolder 中查找名为 Default.aspx 的页面，但它不存在，这就是您的原因'得到一个找不到页面的错误。

你应该这样写你的网址：~/Default.aspx ~/SubFolder/Page.aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:00:45.233

听起来您需要使用绝对 URL，而不是相对 URL。所以：

[http://www.blah.com/category/page.html](http://www.blah.com/category/page.html)

要不就

/category/page.html

不是

page.html

# iphone - iOS UIScrollView 延迟加载

> ID：11750164
> 
> 赞同：0
> 
> 时间：2012-07-31T22:50:24.477
> 
> 标签：iphone, ios, xcode, uiscrollview, lazy-loading

我只是想知道是否有人可以为我解释这段代码，以便我可以从中学习。我试图让我的应用程序有一个滚动器，它可以从左到右滚动大量图片（来自互联网），但问题是，它必须具有延迟加载。所以我做了一些教程并想出了如何去做，但我真的不明白。所以我希望某个善良的灵魂会解释如何一步一步地延迟加载

这是我从教程中学到的代码：

```
-(void)scrollViewDidScroll:(UIScrollView *)myScrollView {
/**
 *  calculate the current page that is shown
 *  you can also use myScrollview.frame.size.height if your image is the exact size of your scrollview
 */
int currentPage = (myScrollView.contentOffset.y / currentImageSize.height);

// display the image and maybe +/-1 for a smoother scrolling
// but be sure to check if the image already exists, you can do this very easily using tags
if ( [myScrollView viewWithTag:(currentPage +1)] ) {
    return;
}
else {
    // view is missing, create it and set its tag to currentPage+1
}

/**
 *  using your paging numbers as tag, you can also clean the UIScrollView
 *  from no longer needed views to get your memory back
 *  remove all image views except -1 and +1 of the currently drawn page
 */
for ( int i = 0; i < currentPages; i++ ) {
    if ( (i < (currentPage-1) || i > (currentPage+1)) && [myScrollView viewWithTag:(i+1)] ) {
        [[myScrollView viewWithTag:(i+1)] removeFromSuperview];
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:31:50.703

关于滚动视图的延迟加载，我强烈建议改用 UITableView。苹果在这个组件的性能方面做得很好。

如果您想要连续滚动（pagingEnabled = NO;），您可以将它们水平放置（请参阅此[EasyTableView 代码](https://github.com/alekseyn/EasyTableView)，效果很好）并停止页面模式，这样您就可以获得您正在寻找的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:39:36.653

Lazy loading is basically fetching large pieces of data (lets say images in this example) only when you need them. In your code, you have a delegate method that is called when you scroll a UIScrollView.

The -(void)scrollViewDidScroll:(UIScrollView *)myScrollView function decides when to actually get data. So as your scrolling, you find out where you are in the scroll view (say you have 10 images you want to load-- you want to know if the screen is currently showing image number 1, 2, 3, etc.). This is what the currentPage integer holds.

Now that you know which page you're looking at, we want to actually fetch the image.

```
if ( [myScrollView viewWithTag:(currentPage +1)] ) {
    return;
} 
```

The code above checks if the image AFTER the image the person is currently looking at exists (hence the currentPage + 1). If it does, we've already fetched it and we quit the function. Otherwise:

```
else {
    // view is missing, create it and set its tag to currentPage+1
} 
```

Here, we lazy load the image. This is done, for example, by creating a new thread and downloading the image from a server. We do this while the view is not the currentPage because we don't want the image to "pop in" while the user is scrolling. The view to which we add the image gets a tag (UIView has a "tag" property); we set the tag to currentPage+1, which later allows us to index the view in case we need it.

Finally, we have:

```
/**
*  using your paging numbers as tag, you can also clean the UIScrollView
*  from no longer needed views to get your memory back
*  remove all image views except -1 and +1 of the currently drawn page
*/
for ( int i = 0; i < currentPages; i++ ) {
    if ( (i < (currentPage-1) || i > (currentPage+1)) && [myScrollView viewWithTag:(i+1)] )         {
        [[myScrollView viewWithTag:(i+1)] removeFromSuperview];
    }
} 
```

Here, we use our currentPage variable and iterate through all our views by indexing them by the tag we set. If the tag is not one off from the currentPage (remember, we don't want any pop in!) we remove it from the scrollview and free some memory up.

Hope that helped.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:18:45.603

也许这会对你有所帮助。

1.  从这里下载异步 ImageView 文件[https://github.com/nicklockwood/AsyncImageView/](https://github.com/nicklockwood/AsyncImageView/)并将它们包含到您的项目中。

2.  将 ImageView 拖到 xib 文件上并将其类更改为 AsynchronousImageView 而不是 UIImageView

3.  把它写在你的 .h 文件中

    IBOutlet AsynchronousImageView *_artworkImg;

4.  把它写在你的 .m 文件中

    [_artworkImg loadImageFromURLString:@"你的图片网址"];

# php - Smarty IE9 请求下载 index.php 文件（上传未发生后）？是我的代码有问题还是activecollab？

> ID：11750166
> 
> 赞同：5
> 
> 时间：2012-07-31T22:50:40.313
> 
> 标签：php, jquery, internet-explorer-9, smarty, activecollab

`smarty`好的，所以在使用in测试文件上传时，我从 Internet Explorer 收到了这个奇怪的意外响应`php`。

这里我的文件上传（`view`）的聪明代码，简化为主要问题，对于那些没有使用过activecollab的人来说，`Router::assemble`它只是形成一个带有从MVC读取的参数的url。

[![界面](../Images/bb655c6b8d3d26f39997bc5d386e5212.png)](https://i.stack.imgur.com/VAwPd.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/23bgy0fj.1cc.png)）]

```
 <div id="xero_invoice_manager_api">
 {form action=Router::assemble('xero_invoice_manager_api') method=post id="xero_invoice_manager" enctype="multipart/form-data"}
 <div class="content_stack_wrapper">

 <input type="file" name="file_1" /><br/>
 <input type="file" name="file_2" /><br/>
 {wrap_buttons}
 {submit success_event="api_updated" }Authenticate{/submit}
 {/wrap_buttons}
 {/form}
 </div></div> 
```

这是我的`view`.

```
 App.Wireframe.Events.bind('api_event_finished.content', function(event, settings) {
App.Wireframe.Flash.success(App.lang('Xero Invoice Manager has saved/uploaded your Xero API data.'));
 }); 
```

这是我的简化控制器（我发现问题出在 smarty 而不是 php）。

```
//api view
function api(){
    if ( $this->request->isSubmitted()) {
        $this->response->respondWithData(true);
    }
} 
```

这是我的控制器与上传发生..

```
//api view
function api(){
    $this->assignSmarty();
    if ($this->request->isSubmitted()) {
        $this->XeroAuthUpdate(); //update everything
        if(isset($_FILES)){
            $file_manager = new XeroFileManager();
            $file_manager->dumpFiles($_FILES);
            //upload the files
            foreach($_FILES as $file){
                $file_manager->handle_certificate_file($file);
            } //foreach add the headers
            if(function_exists('headers_list')){
                xeroDebugMode("[Controller] the headers to be sent are... ", headers_list());
            } //function check
        } //end if
        $this->response->respondWithData(array(
           // constraints
           'key_result'           => (bool)$this->checkValue(XeroAuths::getSetting('xero_consumer')),
           'secret_result'        => (bool)$this->checkValue(XeroAuths::getSetting('xero_secret')),
           // files secruity certificates
           'publickey'            =>  (bool)file_exists(XERO_PUBLIC_KEY_PATH),
           'privatekey'           =>  (bool)file_exists(XERO_PRIVATE_KEY_PATH),
           'xero_auth'            =>  (bool)validateXeroAuth(),
           //login constraints
           'install'              => !$this->checkInstallRequirements(),
        ));
    } //close the request
} 
```

这是来自 Firefox 的回复，`file_1`并且`file_2`不是空的。

[![火狐](../Images/bbbbb51f98cfbbfcc57b2b997eee7ab0.png)](https://i.stack.imgur.com/wUMuN.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/caqt4we4.cx0.png)）]

这是来自 Internet Explorer 9 的回复，带有`file_1`和`file_2` **空**的（到目前为止一切都很好）。

[![即空](../Images/b1a19b56851f2196d8b592eb2c1c2fb8.png)](https://i.stack.imgur.com/ESxLz.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/04njmgbv.a52.png)）]

这是来自 Internet Explorer 9的**有问题**`file_1`的响应，其中（即 publickey.cer）和`file_2`（即 privatekey.pem）**不为空**（下载 index.php 吧？）。

[![不是空的](../Images/3aa30f2d80663b9f858f8fe43d86acb7.png)](https://i.stack.imgur.com/1KQn0.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/dl4wb4d1.2oq.png)）]

我对 activecollab 的回应

> 你好迈克尔，
> 
> 这么晚才回复很抱歉。
> 
> 不幸的是，我们无法弄清楚问题出在哪里。看起来一切都写得很好，但如果不处理代码本身，我们几乎无能为力。在 IE 中处理 JSON 响应在 activeCollab 中运行良好（嗯，不是在 IE6 中），因为 aC 3 中的几乎所有内容都基于 JSON，这使您的问题变得具体，并且您的代码中可能有问题。
> 
> 问候， Oliver Maksimovic activeCollab 开发和支持
> 
> 一般和售前问题：1-888-422-6260（免费电话） 技术支持：support@activecollab.com

一位同事建议..

> 建议尝试以下操作：1）打开 IE -> 打开开发工具（按 F12）-> 单击菜单中的“缓存”-> 单击“清除浏览器缓存”...完成后单击“缓存”，然后单击“总是从服务器刷新”。
> 
> 这迫使 IE 不缓存任何东西，因为我有很多次 IE 缓存 ajax 请求并导致一些非常奇怪的行为。
> 
> 如果这可以解决您的问题，请告诉我，如果可以，我们可以在您的 ajax 响应中添加一些 php，以强制所有浏览器从不缓存响应。否则，如果仍然不起作用，可能需要在 IE 中进行一些 JS 调试，以查看发送的内容并将其与您的 FF firebug 结果进行比较。

`headers_sent()`出现空白

但是`headers_list`（就在之前`respondWithData`被调用），用于 Internet Explorer。

```
2012-08-08 06:50:16 the headers sent from this request is... Array
(
    [0] => X-Powered-By: PHP/5.3.8
    [1] => Set-Cookie: ac_activeCollab_sid_yhRk0xSZku=1%2Fhkykz0Rw0796e4lDykXekNXvhMMxC8pV4akJPMvA%2F2012-08-08+06%3A50%3A15; expires=Wed, 22-Aug-2012 06:50:15 GMT; path=/
    [2] => Content-Type: application/json
    [3] => Expires: Mon, 26 Jul 1997 05:00:00 GMT
    [4] => Cache-Control: no-cache, no-store, must-revalidate
    [5] => Pragma: no-cache
) 
```

`Raw`来自Fiddler 上的选项卡的响应标头，在 Internet Explorer 上

```
HTTP/1.1 200 OK
Date: Sat, 11 Aug 2012 08:08:46 GMT
Server: Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
X-Powered-By: PHP/5.3.8
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie:   ac_activeCollab_sid_yhRk0xSZku=11%2Fz8rWxiRchAh8EWinYO2d7a1mmvn2DMKUdse1vfKh%2F2012-08-11+0    8%3A08%3A46; expires=Sat, 25-Aug-2012 08:08:46 GMT; path=/
Content-Length: 107
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: application/json; charset=utf-8

 {"key_result":true,"secret_result":true,"publickey":true,"privatekey":true,"xero_auth":true,"install":true} 
```

`Raw`来自Firefox 选项卡的响应标头。

```
HTTP/1.1 200 OK
Date: Sat, 11 Aug 2012 08:13:45 GMT
Server: Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
X-Powered-By: PHP/5.3.8
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: ac_activeCollab_sid_yhRk0xSZku=12%2FO40CbXC9Vfa7OVnderlK2MFnvnpkyeckvO0Ab5NQ%2F2012-08-11+08%3A13%3A45; expires=Sat, 25-Aug-2012 08:13:45 GMT; path=/
Content-Length: 107
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: application/json; charset=utf-8

{"key_result":true,"secret_result":true,"publickey":true,"privatekey":true,"xero_auth":true,"install":true} 
```

关于我在 IE 上做错了什么的任何想法？以及为什么 Internet Explorer 通知用户下载`index.php`（当字段处于活动状态时）。请记住，服务器端没有实际上传（在初始测试期间，index.php 下载请求与 .php 无关`move_uploaded_file`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:05:45.593

我在使用 pupload 和 mvc3 时遇到了类似的问题。我知道我们使用不同的技术，但也许我的问题可以帮助你。我有这个：

```
 public JsonResult UploadDoc(string correlationId)
    {
        try
        {

           //upload code here
            return Json(new { message = "chunk uploaded", name = "test" });           

        }
        catch (Exception ex)
        {

            return Json(new { message = "chunk uploaded", name = "test" });  
        }

    } 
```

现在，每次我想尝试上传文件时，我都会让 IE 要求我打开或下载一个只包含上面那个 json 响应的文件。如果我将返回类型设置为“字符串”并将返回代码设置为：

```
 return "{\"respCode\" : \"200\", \"Msg\" : \"succussful\",\"mimeType\": \"" +  Request.Files[0].ContentType + "\", \"fileSize\": \"" + Request.Files[0].ContentLength + "\"}"; 
```

然后文件就成功上传了。失败时的响应标头： "Content-Type: application/json; charset=utf-8" 。使用“String”返回类型时的响应标头：“Content-Type: text/html; charset=utf-8”。希望有帮助，加油。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:21:40.723

由于缺乏答案，我认为我需要在我的 jquery 中采用不同的方法.. 直到找到实际的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:15:24.367

可能是 IE 特定代码有错误，因此返回的内容类型不同。如果您对某种 XML 或 JSON 数据发出 AJAX 请求，而是得到某种文件 HTML 错误响应，其内容类型或处置与预期不同，浏览器可能不知道如何处理它。

您可能想找到一种方法来查看或记录 Web 服务器发送的响应（而不是请求）标头。通常文件下载的提示来自内容处置头......虽然在这种情况下它可能只是因为它是来自异步请求的文件。

您可能还想看看：

[IE 提示从服务器打开或保存 json 结果](https://stackoverflow.com/questions/6114360/stupid-ie-prompts-to-open-or-save-json-result-which-comes-from-server) ， [如何说服 IE 简单地显示 application/json 而不是提供下载？](https://stackoverflow.com/questions/2483771/how-can-i-convince-ie-to-simply-display-application-json-rather-than-offer-to-do)

# actionscript-3 - 如何使用 AS3 从 Flash 中的前一帧中清除对象？

> ID：11750167
> 
> 赞同：0
> 
> 时间：2012-07-31T22:50:48.510
> 
> 标签：actionscript-3, flash, air

我在某个帧的舞台上有一个对象（MovieClip），在下一帧，即使该对象在视觉上被移除，它仍然存在（它有一个内部函数可以定期在舞台上生成一些东西，并且舞台对象*正在*生成）。我知道我可以在离开框架时简单地停止动作，但是对象会占用内存，甚至可能占用一些后台动作的 CPU 时间（这是一个 AIR 到 iOS 项目，所以我关心内存和性能）。我怎样才能完全摆脱这个物体？*如果它是设计器放置的对象（如果该对象不是*由 ActionScript 生成的），我希望当我导航到另一个框架时，所有内容都会被删除，情况就是这样，但它只会在视觉上被删除。

谢谢，坎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T23:43:24.353

只需将您的对象引用归空，它就是侦听器。

```
...
myMovieClip.removeListeners();//class function
myMovieClip.parent.removeChild(myMovieClip);
myMovieclip = null;
... 
```

# android - Android 自定义键盘密码记录

> ID：11750169
> 
> 赞同：3
> 
> 时间：2012-07-31T22:50:55.807
> 
> 标签：android, security

我一直在对 Android 自定义键盘的安全漏洞进行一些研究，并注意到一些有趣的事情。当我在我的 Sharp Aquos Gingerbread 手机上安装键盘时，它告诉我它“可能能够收集您输入的所有文本，*包括*密码”。但是，在我运行 ICS 的三星 Galaxy Tab 2 上，它显示“密码*除外”。*

我决定对此进行测试，并修改了 SoftKeyboard Android SDK 示例以包含一个键盘记录器，写入 SD 卡以使其更容易从其他应用程序访问：

```
public void onKey(int primaryCode, int[] keyCodes) {
    String keypress = String.valueOf((char)primaryCode);
    Log.d("Key Pressed",keypress);
    try{
        String SDCARD = Environment.getExternalStorageDirectory().getAbsolutePath();
        String FILENAME = "keylogger.txt";

        File outfile = new File(SDCARD+File.separator+FILENAME);
        FileOutputStream fos = new FileOutputStream(outfile,true);
        fos.write(keypress.getBytes());
        fos.close();
    }catch(Exception e) {
        Log.d("EXCEPTION",e.getMessage());
    } 
```

而且我能够记录文本，即使在 HTML 密码字段中也是如此。

因此，我的 Galaxy Tab 上的消息似乎不正确/具有误导性。

这是所有 ICS 设备上的相同消息，还是三星更改了库存 Android 版本的消息？有人知道为什么在很容易登录时会显示“密码除外”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:55:56.833

在 Galaxy Nexus 上，它说“包括密码和信用卡号码等个人数据”。您必须联系三星以获取真实信息，但除非他们不允许在密码字段上使用自定义键盘或类似的东西，否则您键入的所有内容都会在某个时候通过软件键盘进行，因此他们将能够记录它。

# php - PHP Async GET 请求在一台服务器上有效，但在另一台服务器上无效

> ID：11750170
> 
> 赞同：0
> 
> 时间：2012-07-31T22:50:58.790
> 
> 标签：php, asynchronous, get

**请参阅底部的编辑以获取更多信息！**

我有两台服务器。两者都应该能够通过 GET 请求相互调用。为了发出请求（它比实际发出请求更触发事件）我正在使用以下代码：

```
function URLCallAsync($url, $params, $type='POST')
{
      foreach ($params as $key => &$val) {
        if (is_array($val)) $val = implode(',', $val);
        $post_params[] = $key.'='.urlencode($val);
      }
  $post_string = implode('&', $post_params);

  $parts=parse_url($url);

  $fp = fsockopen($parts['host'],
      isset($parts['port'])?$parts['port']:80,
      $errno, $errstr, 30);

  // Data goes in the path for a GET request
  if('GET' == $type) $parts['path'] .= '?'.$post_string;

  $out = "$type ".$parts['path']." HTTP/1.1\r\n";
  $out.= "Host: ".$parts['host']."\r\n";
  $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
  $out.= "Content-Length: ".strlen($post_string)."\r\n";
  $out.= "Connection: Close\r\n\r\n";
  // Data goes in the request body for a POST request
  if ('POST' == $type && isset($post_string)) $out.= $post_string;

  fwrite($fp, $out);
  fclose($fp);
} 
```

我在两台服务器上为函数提供了完全相同的数据（但 url）（我复制了调用文件来测试它！！）但它只能在一个方向上工作！

我将对该函数的调用写入日志文件中，以便调查是否出现问题。

服务器 A -> 服务器 B，工作正常，服务器 A 的日志文件包含正确的 url

服务器 B -> 服务器 A，只打印服务器 B 的日志文件中的正确信息，但服务器 A 从未收到请求。

这样的事情可能是什么原因？

编辑：可能是不同类型的服务器吗？服务器 A 是 nginx，服务器 B 是 apache。服务器 A 的 url 中也有一个 '~' 符号，也许这就是问题所在？获取请求的参数是用 php 的“urlencode”编码的，这可能会产生问题吗？

我试了一下，但问题仍然是请求没有到达服务器 A。但是从浏览器它以某种方式完美地工作（假设我输入带有参数的正确 URL）。

edit2：如果我将“URLCallAsync”与“file_get_contents”交换，它会正常工作。但问题是 file_get_contents 被阻塞了！所以它只能是函数本身。但奇怪的是它在相反的方向工作:(

编辑3：“URLCallAsync”函数在没有错误、通知或其他任何内容的情况下运行。它只是没有被其他服务器接收。file_get_contents 到底有什么不同？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:27:14.063

我让它工作了。

经过大量摆弄wireshark后，我发现file_get_contents比我的异步函数还要简单！

它只是完全省略了 Content-Length 字段！它只提供“GET ...”和“Host”。它还使用 HTTP/1.0 而不是 1.1，但这并没有改变任何东西。

所以解决方案是：同时发布 Content-Length 标头（其值为 0，因为我使用了 GET）将以某种方式使服务器拒绝请求。我不确定是服务器拒绝了请求，还是其他东西，比如可能检测到“格式错误”请求的防火墙，但至少问题得到了解决。

所以下次发送请求时，如果不需要，请不要提供 Content-Length 标头:)

# java - Appcelerator Titanium Mobile 和 Airpush

> ID：11750171
> 
> 赞同：1
> 
> 时间：2012-07-31T22:51:09.377
> 
> 标签：java, android, mobile, sdk

我正在使用 Titanium Mobile 创建一个 Android 应用程序。

如何集成 Java 代码和库以实现“Airpush”等货币化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-15T07:56:15.583

您应该将项目导出到 Eclipse，而不是将 airpush sdk 添加到项目中。

# python - 使用 Python 修改 csv 中的特定列

> ID：11750173
> 
> 赞同：3
> 
> 时间：2012-07-31T22:51:55.150
> 
> 标签：python, csv

我有一堆`.csv`这样的数据：

```
-959.378170,-0.000026,-94.960000,1508.000000,9.000000,
-958.978170,-0.000026,-94.920000,1508.000000,9.000000,
-958.578170,-0.000026,-94.880000,1508.000000,10.000000,
-958.178170,-0.000026,-94.840000,1508.000000,10.000000,
-957.778170,-0.000026,-94.800000,1508.000000,10.000000, 
```

最后两列应该是时间。`15`是小时，`08`是分钟，`6`是秒。最终目标是加入他们，以便我得到类似的东西：

```
-958.978170,-0.000026,-94.920000,15:08:09,                
-958.578170,-0.000026,-94.880000,15:08:10, 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:53:24.547

使用`csv`模块读取`.csv`文件（参见[此处](http://docs.python.org/library/csv.html#csv.reader)的示例），以及[`datetime.strptime`](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)将两列解析为`datetime`对象的方法，然后您可以将其写入您想要的任何格式（使用`datetime.strftime`）。

有关更多详细信息，请参阅文档的[这一](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)部分。`datetime`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:28:54.030

我会使用一个[`regex`](http://docs.python.org/library/re.html)和[`fileinput`](http://docs.python.org/library/fileinput.html)

```
import fileinput
import re

# Assume the input file is foo.csv
for line in fileinput.FileInput('foo.csv', inplace=1):
    mm = re.search(r'^(.+?,.+?,.+?,)(\d{1,2})(\d{2})\.0+,(\d{1,2})\.0+',
        line)
    g1, g2, g3, g4 = mm.group(1), int(mm.group(2)), int(mm.group(3)), int(mm.group(4))
    print "%s%02i:%02i:%02i," % (g1, g2, g3, g4) 
```

在示例上运行它会导致...

```
-959.378170,-0.000026,-94.960000,15:08:09,
-958.978170,-0.000026,-94.920000,15:08:09,
-958.578170,-0.000026,-94.880000,15:08:10,
-958.178170,-0.000026,-94.840000,15:08:10,
-957.778170,-0.000026,-94.800000,15:08:10, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T01:39:22.433

查看 pandas (http://pandas.pydata.org/pandas-docs/stable/io.html#csv-text-files) 中的 read_csv() 方法。

它有一个很棒的日期解析实用程序，允许您将多个列中的字符串放在一起。

# class - 选择多个文本框

> ID：11750183
> 
> 赞同：0
> 
> 时间：2012-07-31T22:52:28.163
> 
> 标签：class, textbox, height, width, selector

我想知道是否有办法改变两个文本框的高度和宽度。我试过了：

```
.class{width:200px;height:100px;} 
```

但它没有效果。无论如何我可以选择两者而无需输入：

```
#firstname, #lastname{width:200px; height:100px;} 
```

这是代码：

```
<div class="info">
<input type="text" id="firstname" >
</div>
<div class="info">
<input type="text" id="lastname" >
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:54:55.813

```
.info input {width:200px;height:100px} 
```

# c# - 跨表 LinqToSQL 查询 WP7 C#

> ID：11750184
> 
> 赞同：2
> 
> 时间：2012-07-31T22:52:28.363
> 
> 标签：c#, windows-phone-7, linq-to-sql

基本上，我有三个表，我们称它们为 TableA、TableB 和 TableC。

表 A 和 B 有两列感兴趣，ID 和值。表 C 有三列，ID、A_ID 和 B_ID。

我正在寻找构建一个 LinqToSQL 查询：

*   返回表 A 和 B 的值，其中表 C 的记录包含 A 和 B 的 ID

例子：

![在此处输入图像描述](../Images/f14ff989a91473a1991ce3d608bef7d9.png)

返回的记录应该是特定类型的：

```
public class RecordClass
{
    string A_Value;
    string B_Value;
    public RecordClass()
    {
        A_Value = "";
        B_Value == "":
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:54:20.880

听起来你只想要一个内部连接：

```
 var query = from a in tableA
             from b in tableB
             join c in tableC on new { A_ID = a.ID, B_ID = b.ID } 
                          equals new { c.A_ID, c.B_ID }
             select new RecordClass { A_Value = a.Value, B_Value = b.Value }; 
```

编辑：或者，如果您的 LINQ to SQL 模型连接正确，它可能会简单得多：

```
var query = tableC.Select(c => new RecordClass { A_Value = c.A.Value,
                                                 B_Value = c.B.Value }); 
```

# outlook - 使用 Outlook Redemption 检索原始标头

> ID：11750185
> 
> 赞同：3
> 
> 时间：2012-07-31T22:52:43.443
> 
> 标签：outlook, outlook-2010, outlook-redemption

我正在开发一个 Outlook 自动化，它将邮件放在特定文件夹中并将其导出为 RFC822 格式的邮件消息。然后，此输出文件将被馈送到 SpamAssassin 工具 sa-learn.exe。

```
For Each oItem In oFolder.Items
    If TypeOf oItem Is RDOMail Then
        Set oMailItem = oItem

        ' Deptermine the fully qualified path to save the file
        sFilePath = GetFilePath(oMailItem, "//Mailbox/SpamAssassin/Spam") 

        'Save the RFC822 format message
        oMailItem.SaveAs sFilePath, rdoSaveAsType.olRFC822

        DoEvents

        oMailItem.UnRead = False
        oMailItem.Delete
    End If
    DoEvents 'Let the Outlook UI thread breathe a bit
Next 'for each 
```

以下是使用此代码保存的消息中的消息标头，其中包含经过编辑的电子邮件地址。

```
From: "Swift Learning" <**********@***.*************.***>
To: <*****@********.***>
Subject: Foreign Languages are easily learned in this program
Date: Tue, 31 Jul 2012 10:11:38 -0700
Message-ID: <8518205138200566845@smx.jacksonpotts2.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
    boundary="----=_NextPart_000_13AE_01CD6F0A.C9624870"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQF4Lq/07oPqx1sKGPa5FKQSalUQXg== 
```

这里缺少的是应该看起来像这样的中继标头。

```
Received: from [216.104.163.151] by mail.clarkzoo.org (ArGoSoft Mail Server .NET v.1.0.8.4) with ESMTP (EHLO smtp02-forward-1.daemonmail.net)
    for <*****@*********.***>; Tue, 31 Jul 2012 12:36:25 -0700
Received: from mxw03.daemonmail.net (unknown [216.104.161.13])
    by smtp02-forward-1.daemonmail.net (Postfix) with ESMTP id 4447681FDB;
    Tue, 31 Jul 2012 12:18:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
    by mxw03.daemonmail.net (Postfix) with ESMTP id 748CF6A0DD
    for <***@******************.***>; Tue, 31 Jul 2012 12:17:52 -0700 (PDT) 
```

如何捕获那些中继标头？

**更新：**

进一步研究这一点，Outlook 中 MailItem 中存储的原始标头与 Redemption 保存的 RFC822 格式完全不同。

这是一个并排的比较。

Outlook 中“属性”对话框中的原始标题。

```
Received: from [108.174.54.7] by mail.clarkzoo.org (ArGoSoft Mail Server .NET v.1.0.8.4) with ESMTP (EHLO upgraded.the-ameri-credit-review.com)
    for <*****@********.***>; Wed, 01 Aug 2012 07:34:15 -0700
Date: Wed, 1 Aug 2012 09:55:57 -0400
Subject: Your TransUnion, Equifax, and Experian Scores May Have Changed
From: "Credit Check" <info@the-ameri-credit-review.com>
To: <*****@********.***>
Message-ID: <132692318349a4a4158c108651c1428c@upgraded.the-ameri-credit-review.com>
Mime-Version: 1.0
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
SPF-Received: softfail
X-FromIP: 108.174.54.7 
```

RFC822 格式文件的标头：

```
From: "Credit Check" <info@the-ameri-credit-review.com>
To: <*****@********.***>
Subject: Your TransUnion, Equifax, and Experian Scores May Have Changed
Date: Wed, 1 Aug 2012 06:55:57 -0700
Message-ID: <132692318349a4a4158c108651c1428c@upgraded.the-ameri-credit-review.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
    boundary="----=_NextPart_000_011B_01CD6FC4.403990C0"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQIRB+hjg86/OeRgMx9VYijSdeLwhw== 
```

这些标题只是表面上相同。

*   缺少中继标头
*   日期和主题在不同的位置
*   日期标题已被修改以抑制本地时区
*   Content-Type 已从“text/html; charset=us-ascii”更改为“multipart/alternative;”
*   已添加标题并已删除标题

更好的问题是如何捕获消息的原始标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-13T12:47:10.733

我知道这是一篇旧帖子，但尝试另存为 rdoSaveAsType.olRFC822_Redemption 而不是 rdoSaveAsType.olRFC822。它似乎保留了所有标题。

# python - 如何制作一个python包？

> ID：11750186
> 
> 赞同：3
> 
> 时间：2012-07-31T22:52:44.747
> 
> 标签：python, package, directory-structure

这是我的结构，

```
main.py
folder1\
    button.py
    folder2\
        picturebutton.py
folder3\
     listbox.py
     folder4\
         customlistbox.py
         folder5\
             hyperlistbox.py 
```

现在，

我有一个名为“widget.py”的模块，我想让这里的所有模块都可以访问它，以便每个模块都可以说`import widget`或类似的东西。谷歌搜索后，看来我必须制作一个包才能做到这一点。

我无法使用在线示例，因为我不知道它们是如何工作的，我希望你们中的一个人能够帮助我解决我的问题。

编辑：所有文件夹（除了根文件夹）都有一个`__init__.py`文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:56:12.407

能够导入其他一些模块并不需要它是一个包，它需要将`widget`模块放在你的`PYTHONPATH`. 您通常会通过安装它来做到这一点（编写`setup.py`文件，请参阅标准库的`distutils`模块）。

如果你确实想要一个包，每个需要成为包的文件夹都需要有一个`__init__.py`文件（空的很好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T04:51:11.897

正确的方法是为你的包创建一个 setup.py 文件，但因为它可能需要一些时间。下面是快捷方式。

如果你想经常使用你的模块，就像在 script 中一样。简单的方法是在 bashrc/zshrc 文件中导出“PYTHONPATH”，并给出包含代码的目录的路径。

例如：

```
 export PYTHONPATH=$PYTHONPATH:$HOME/path/to/package 
```

使用检查终端

```
echo "$PYTHONPATH" 
```

快乐编码

# iphone - iOS UILabel 子视图有时比其他子视图显示得晚

> ID：11750188
> 
> 赞同：0
> 
> 时间：2012-07-31T22:52:48.767
> 
> 标签：iphone, ios, xcode, uilabel

我有一个奇怪的错误，我的 UILabel 是自定义对象的子视图，直到几秒钟后才显示所有其他子视图。

此外，如果用户在 UILabel 不可见时触摸屏幕，则 UILabel 会立即变为可见。

有没有人遇到过这种奇怪的行为？有关如何修复它的任何指示？

谢谢！

xcode 4.3.3、ios 5.0+、ARC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:18:01.097

可能是它没有与其余对象一起绘制（不知道为什么）。尝试在适当的情况下调用`setNeedsDisplay`the`UILabel`或其父级，例如 from `viewWillAppear`。

# workflow - 如何在 JIRA 工作流程中模拟“愿望清单”和“错误清单”？

> ID：11750190
> 
> 赞同：1
> 
> 时间：2012-07-31T22:53:21.747
> 
> 标签：workflow, jira

如何在 JIRA 工作流程中模拟“愿望清单”和“错误清单”？它们应该是状态还是决议？

“愿望清单”和“错误列表”问题从常规错误（或功能）开始。在被解决为无法修复后，它们最终会出现在错误列表/愿望列表中。例如，此错误不会在下一个版本中修复。我们不知道将在哪个版本中修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:49:33.973

你可以同时使用。这取决于您的需求以及您希望如何设置工作流程。

如果您选择该`resolution`字段，一旦将问题标记为`Won't Fix`您可以将其从问题列表中过滤掉。要获取所有问题的列表，`Won't Fix`可以使用以下 JQL：

```
project = TEST AND resolution = "Won't Fix" and issuetype = Bug
project = TEST AND resolution = "Won't Fix" and issuetype = "Feature Request" 
```

一旦准备好解决该问题，您可以更改`resolution`to`open`或类似的东西，使其再次处于活动状态。要控制用户何时可以设置问题，`Won't Fix`或者`Open`您需要在相关屏幕中显示/隐藏此字段。

另一方面，通过使用 a`Won't Fix`作为状态，问题的过滤是类似的：

```
project = TEST AND status = "Won't Fix" and issuetype = "Feature Request" 
```

为了让用户能够将问题`Won't Fix`从给定状态设置为状态，您需要创建从第一个状态到 `Won't Fix`. 同样，您需要创建从`Won't Fix`向外状态到您希望问题转到下一个状态的任何状态的转换。

基本上，主要区别不是将问题标记为`Won't Fix`，而是清除该标记。在第一种方法中，问题状态不必更改，因此一旦`Won't Fix`发生更改，问题就可以从当前状态恢复为活动状态。在第二种方法中，所有问题都将处于相同的状态，与它们以前的状态没有任何关系，并且它们都可以进入相同的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:13:35.387

问题类型。对错误使用“错误”，对愿望清单问题使用“新功能”或“改进”。为 JIRA 问题设置解决方案会告诉 JIRA，不会对该问题进行进一步的工作。带有“未来”版本的修复版本字段是保持问题处于活动状态但不在活动列表中的更好方法。

将分辨率设置为 Won't Fix 会使一些 JIRA 的小工具产生不需要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:55:30.443

我们将尝试使用“Deferred”里程碑模拟“Wish List”和“Bug List”。

# php - 相似的图像 - 如何比较它们

> ID：11750192
> 
> 赞同：4
> 
> 时间：2012-07-31T22:53:25.483
> 
> 标签：php, image, image-processing, similarity, fingerprint

我有超过 130 万张图像需要相互比较，而且每天会添加数百张。

我的公司拍摄图像并创建一个可供我们的供应商使用的版本。

这些文件通常彼此非常相似，例如，两家不同的公司可以向我们发送两张不同的图像，一张 JPG 和一张 GIF，都带有麦当劳的标志，提交间隔几个月。

正在发生的事情是，最后我们发现自己创建了两个不同时间的相同徽标，而我们可以简单地复制/粘贴已经创建的徽标，或者至少建议将其作为艺术家的可能起点。

我一直在寻找创建指纹的算法或其他允许我在上传新图像时进行简单查询的算法，时间相对不是问题，如果创建指纹需要 1 秒，则需要 150 天创建指纹，但我们甚至可能会获得 3 或 4 台服务器来做这件事，这将是一个很大的节省。

我精通 PHP，但如果算法是伪代码甚至 CI 可以读取它并尝试翻译（除非它使用一些 C 特定库）

目前我正在对所有图像进行 MD5 以捕捉完全相同的图像，当我考虑调整图像大小并在调整大小的图像上运行 md5 以捕捉那些已经被以不同的格式保存并调整大小，但我仍然没有足够好的识别。

如果我没有提到它，我会很高兴有一些只是建议可能的“相似”图像的东西。

**编辑**

请记住，检查需要每分钟进行多次，因此最好的解决方案是为每个图像提供一些值，以便我可以存储并在将来使用这些值与我正在查看的图像进行比较，而无需重新扫描整个服务器。

我正在阅读一些提到直方图的页面，或者将图像调整为非常小的尺寸，去除可能的标签，然后将其转换为灰度，对这些文件进行哈希处理并将其用于比较。如果我成功了，我会在这里发布代码/答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:56:41.593

尝试使用 file_get_contents 和： [http ://www.php.net/manual/en/function.hash-file.php](http://www.php.net/manual/en/function.hash-file.php)

如果哈希匹配，那么您知道它们完全相同。

**编辑：** 如果可能的话，我会认为存储图像哈希和数据库表中的图像路径可能会帮助您限制服务器负载。在初始图像上运行一次散列算法并将散列存储在表中要容易得多......然后当提交新图像时，您可以对图像进行散列，然后在数据库表上进行查找。如果散列已经存在，则丢弃它。您可以使用哈希作为表索引，因此一旦找到匹配项，您就不需要检查其余部分。

另一种选择是不使用数据库...但是您必须始终进行查找。那就是检查传入图像的哈希值，然后在内存中对所有保存的图像进行时间搜索。

**编辑#2：** 请在此处查看解决方案：[图像比较 - 快速算法](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:18:50.197

为了加快处理速度，请按大小对所有文件进行排序，并仅在两个大小相等时才比较内部结构。要比较内部数据，使用哈希比较也是最快的方法。希望这可以帮助。

# django - django - 迭代返回 render_to_response

> ID：11750197
> 
> 赞同：0
> 
> 时间：2012-07-31T22:54:07.053
> 
> 标签：django, subprocess, render-to-response

我想读取文件，更新网站，阅读更多行，更新网站等......逻辑如下，但它不起作用。它只显示日志文件的第一行并停止。有没有办法迭代'return render_to_response'？

### #django 视图调用远程 python 脚本，将输出附加到日志文件

```
proc = subprocess.Popen([program, branch, service, version, nodelist])
logfile = 'text.log'
fh = open(logfile, 'r')

while proc.poll() == None:
  where = fh.tell()
  line = fh.read()
  if not line:
     time.sleep(1)
     fh.seek(where,os.SEEK_SET)
  else:
     output = cgi.escape(line)
     output = line.replace('\n\r', '<br>')
     return render_to_response('hostinfo/deployservices.html', {'response': output}) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:13:27.320

实际上，您可以通过使您的函数成为生成器来做到这一点——也就是说，使用 'yield' 来返回每一行。

但是，您需要直接创建响应，而不是使用渲染来响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:07:47.010

`render_to_response`将第一批渲染到网站并停止。然后，如果您想发送下一批，网站必须以某种方式再次调用此视图。您还必须记录您在日志文件中的位置，以便可以从该点读取第二批。
我假设您在模板中有一些逻辑，因此 render_to_response 的第二个帖子不会覆盖第
一个.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T01:15:08.343

与其重新发明轮子，不如使用[`django_logtail`](https://github.com/alex2/django_logtail)

# ipad - 在手机和 ipad 上调出小键盘板

> ID：11750201
> 
> 赞同：0
> 
> 时间：2012-07-31T22:54:26.747
> 
> 标签：ipad, html, android-layout

我正在开发一个移动网站，并且我希望在用户到达该字段时出现小键盘。甚至可以转换为 ipad 和 android numpad 吗？..

我与一位朋友核实过，他告诉我我的字段是从数据库中调用的，它们被称为大小字段？

希望有人能给我一些提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:59:40.773

利用：

```
 <input type="number" /> 
```

# java - split() 分隔符之间没有任何内容 = 空字符串

> ID：11750202
> 
> 赞同：3
> 
> 时间：2012-07-31T22:54:31.127
> 
> 标签：java

想象一下你有：

```
String string = "A;B;;D";
String[] split = string.split(";"); 
```

我希望结果是：

```
split[0] = "A";
split[1] = "B";
split[2] = "";
split[3] = "D"; 
```

但结果是：

```
split[0] = "A";
split[1] = "B";
split[2] = "D"; 
```

有一个简单的正确方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T22:58:17.117

使用重载方法[`split(String regex, int limit)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)：

```
String string = "A;B;;D";
String[] split = string.split(";", -1); 
```

* * *

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)中：

```
The string "boo:and:foo", for example, yields the following results with these parameters:

    Regex   Limit   Result
    :   2   { "boo", "and:foo" }
    :   5   { "boo", "and", "foo" }
    :   -2  { "boo", "and", "foo" }
    o   5   { "b", "", ":and:f", "", "" }
    o   -2  { "b", "", ":and:f", "", "" }
    o   0   { "b", "", ":and:f" } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T22:57:00.100

我个人会使用[Guava](https://code.google.com/p/guava-libraries/)的[`Splitter`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Splitter.html)课程：

```
Iterable<String> bits = Splitter.on(';').split(string); 
```

如果您*希望*它省略空字符串，您只需使用：

```
Iterable<String> bits = Splitter.on(';').omitEmptyStrings().split(string); 
```

没有讨厌的隐式正则表达式，一切都按照它在锡上所说的那样做。好多了:)

在现实生活中，我可能会创建*一次*拆分器作为静态最终变量。（如果您认为为了单个类而导入 Guava 是多余的，请查看库的其余部分。它非常有用 - 没有它我不想在 Java 中开发。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:01:11.873

您只需要在 split 函数中包含第二个参数，这是您在拆分之间接受的最少字符数，在您的情况下为 0。

所以调用应该是这样的：

```
String[] split = string.split(";", 0); 
```

使用 0 的限制来丢弃尾随的空字符串，或者使用负值来保留它们。在此处查找文档：[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)

# symfony1 - 在操作中使用邮件模板

> ID：11750205
> 
> 赞同：0
> 
> 时间：2012-07-31T22:55:06.633
> 
> 标签：symfony1, symfony-1.4

使用 Symfony 1.4 框架，是否可以从 lib/mail 目录中获取模板并将其用作操作中的模板？我认为这不可能使用 setTemplate ，因为这是本机方法：

```
 public function setTemplate($name, $module = null)
    {
      if (sfConfig::get('sf_logging_enabled'))
      {   
        $this->dispatcher->notify(new sfEvent($this, 'application.log', array(sprintf('Change template to "%s/%s"', null === $module ? 'CURRENT' : $module, $name))));
      }   

      if (null !== $module)
      {                                                                                                                                                                                                                                       
        $name = sfConfig::get('sf_app_dir').'/modules/'.$module.'/templates/'.$name;
      }   

      sfConfig::set('symfony.view.'.$this->getModuleName().'_'.$this->getActionName().'_template', $name);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T09:11:59.210

如果您想在更多项目中使用模板，您可以为此制作一个插件，或者只是[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)模块/模板文件夹。

如果您使用符号链接，您仍然可以使用该`setTemplate()`功能，并且所有模板在每个项目上都将始终相同。

或者您可以重写该函数，以接受第三个`setTemplate()`参数并从`sf_lib_dir``sf_app_dir`

# c - 共享内存不与 C 中的进程共享

> ID：11750207
> 
> 赞同：2
> 
> 时间：2012-07-31T22:55:18.020
> 
> 标签：c, linux, operating-system, fork, shared-memory

在尝试解决一些调试问题时，我`printf`在代码中添加了一些 -s：

我使用了该代码：

```
struct PipeShm
{
    int init;
    sem_t sema;
        ...
        ...
}

struct PipeShm * sharedPipe = NULL; 
```

功能2：

```
int func2()
{
if (!sharedPipe)
{

    int myFd = shm_open ("/myregion", O_CREAT | O_TRUNC | O_RDWR, 0666);
    if (myFd == -1)
        error_out ("shm_open");

    // allocate some memory in the region in the size of the struct
    int retAlloc = ftruncate (myFd, sizeof * sharedPipe);
    if (retAlloc < 0)  // check if allocation failed
        error_out("ftruncate");

    // map the region and shared in with all the processes
    sharedPipe = mmap (NULL, sizeof * sharedPipe,PROT_READ | PROT_WRITE,MAP_SHARED , myFd, 0);

    if (sharedPipe == MAP_FAILED)  // check if the allocation failed
        error_out("mmap");

    // put initial value
    int value = -10;
    // get the value of the semaphore
    sem_getvalue(&sharedPipe->semaphore, &value);

    if (sharedPipe->init != TRUE) // get in here only if init is NOT TRUE !
    {
        if (!sem_init (&sharedPipe->semaphore, 1, 1)) // initialize the semaphore to 0
        {

            sharedPipe->init = TRUE;
            sharedPipe->flag = FALSE;
            sharedPipe->ptr1 = NULL;
            sharedPipe->ptr2 = NULL;
            sharedPipe->status1 = -10;
            sharedPipe->status2 = -10;
            sharedPipe->semaphoreFlag = FALSE;
            sharedPipe->currentPipeIndex = 0;
            printf("\nI'm inside the critical section! my init is: %d\n" , sharedPipe->init);

        }
        else
            perror ("shm_pipe_init");
        printf("\nI'm out the critical section! my init is: %d\n" , sharedPipe->init);

    }

}
return 1;   // always successful
} 
```

有了那个主要的：

```
int main()

{
    int spd, pid, rb;
    char buff[4096];
    fork();
    func2();
    return 0;
} 
```

得到了这个：

shm_pipe_mkfifo：文件存在

```
I'm inside the critical section! my init is: 1

I'm out the critical section! my init is: 1
Output:hello world!
I'm inside the critical section! my init is: 1

I'm out the critical section! my init is: 1 
```

好像共享内存不是那么共享的，为什么呢？

1.  由于该段在所有进程之间共享`MAP_SHARED | MAP_ANONYMOUS`，那么为什么两个进程具有相同的`before`和`after`值呢？

2.  似乎每个进程都有自己的信号量，即使它在它们之间共享，那么出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:10:49.030

由于您使用`MAP_ANONYMOUS`标志 to `mmap`，因此该`myFd`参数被忽略，并且您创建了两个独立的共享内存块，每个进程中都有一个，它们彼此没有关系。

> ```
>  MAP_ANONYMOUS
>           The mapping is not backed by any file; its contents are initial‐
>           ized to zero.  The fd and offset arguments are ignored; however,
>           some implementations require fd to be -1  if  MAP_ANONYMOUS  (or
>           MAP_ANON)  is specified, and portable applications should ensure
>           this.  The use of MAP_ANONYMOUS in conjunction  with  MAP_SHARED
>           is only supported on Linux since kernel 2.4. 
> ```

如果你摆脱了，`MAP_ANONYMOUS`那么你将只有一个共享内存块，但是你会遇到不调用`sem_init`. 在带有 NPTL 的 Linux 上，它实际上可以工作，因为将 sem_t 清除为所有 0 字节（这里的初始状态）相当于`sem_init(&sema, anything, 0);`（NPTL 忽略 pshared 标志），但这不能移植到其他系统。

根据 Karoly 对另一个答案的评论，公开电话中还有一个由于 O_TRUNC 引起的竞争条件。如果第二个线程`open`在第一个线程已经开始修改信号量之后调用，则 TRUNC 将破坏信号量状态。可能最好的解决方案是将创建、打开和映射共享内存的代码移至调用 fork 之前调用的不同函数。

**编辑**

要解决 O_TRUNC 问题，您不能有多个进程使用 O_TRUNC 调用 shm_open。但是如果你只是去掉 O_TRUNC，那么你就会遇到启动问题，如果共享内存对象已经存在（来自程序的先前运行），它可能无法处于可预测的状态。有可能是拆分 func2 的开头：

```
main() {
    func1();
    fork();
    func2();
}

func1() {
    int myFd = shm_open ("/myregion", O_CREAT | O_TRUNC | O_RDWR, 0666);
    if (myFd == -1)
        error_out ("shm_open");
    // allocate some memory in the region in the size of the struct
    int retAlloc = ftruncate (myFd, sizeof *sharedPipe);
    if (retAlloc < 0)  // check if allocation failed
        error_out("ftruncate");
    // map the region and shared in with all the processes
    sharedPipe = mmap (NULL, sizeof *sharedPipe, PROT_READ|PROT_WRITE, MAP_SHARED, myFd, 0);
    if (sharedPipe == MAP_FAILED)  // check if the allocation failed
        error_out("mmap");
}

func2() {
    // put initial value
    int value = -10;
    // get the value of the semaphore
    sem_getvalue(&sharedPipe->semaphore, &value);

    : 
```

或者，您可以保留相同的代码（只需去掉 O_TRUNC）并在 fork 之前添加清理：

```
main() {
    shm_unlink("/myregion");
    fork();
    func2(); 
```

在所有情况下，如果您同时运行程序的多个副本，您仍然会遇到问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:15:02.740

一些想法...

1.  我认为这是对 POSIX 信号量如何工作的根本误解。我没有看到对`sem_init`or的调用`sem_open`。如果不做比你做的更明确的事情，你不应该能够跨进程使用它们。

2.  我`mmap`对 Linux 上的实现以及如何`MAP_ANONYMOUS`影响这一点并不新鲜，但一般来说，写入映射区域并不是即时的。[linux.die 上](http://linux.die.net/man/2/mmap)的联机帮助页说：

> MAP_SHARED
> 共享此映射。映射的更新对于映射该文件的其他进程是可见的，并被传递到底层文件。在调用 msync(2) 或 munmap() 之前，该文件实际上可能不会被更新。

这样做的原因是您的内存访问陷入页面错误，此时内核将从文件描述符中填充内容，然后让您在 RAM 中进行写入，然后稍后内核将刷新回文件描述符。

# iphone - AirPrint 和 uiactionsheet - 如何？

> ID：11750209
> 
> 赞同：0
> 
> 时间：2012-07-31T22:56:06.117
> 
> 标签：iphone, xcode, uiactionsheet, airprint

我创建了一个在按下导航栏上的按钮时调用的操作表。它显示 3 个按钮（发送到电子邮件、打印和取消）。现在我不知道当按下操作表中的“打印”按钮时如何让 iPhone 打印 uiwebview。谁能帮我 ？或者也许有一些示例代码给我？我正在使用带有情节提要和 iPhone 编程的最新 Xcode 4.3。提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:28:35.210

改用 ActivitySheet...

```
 UIImage *yourImage = [UIImage imageNamed:@"yourImage"]; //the image you want to print
        NSArray *itemsToShare = @[yourImage];
        UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:itemsToShare applicationActivities:nil];
        activityVC.excludedActivityTypes = @[ UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll, UIActivityTypeMail, UIActivityTypeMessage, UIActivityTypePostToFacebook, UIActivityTypePostToTwitter, UIActivityTypePostToWeibo]; //or whichever you don't need >>> in this case we just have AirPrint
        [self presentViewController:activityVC animated:YES completion:nil]; 
```

# .net - 部署 IronPython 脚本或静态构建应用程序

> ID：11750213
> 
> 赞同：5
> 
> 时间：2012-07-31T22:56:13.617
> 
> 标签：.net, python, windows, ironpython, ironpython-studio

我创建了一个 IronPython 脚本，该脚本从 Python 库（例如 、 等）以及 .NET 库中`os`导入`sys`。

它在我的 Visual Studio IronPython 解决方案中运行得非常好，但我需要部署它，以便其他没有安装 IronPython 或 Python 的人可以运行它。

我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T22:56:13.617

要求：

*   `ipy.exe`在`C:\Program Files (x86)\IronPython 2.7.1\`

*   `pyc.py`在`C:\Program Files (x86)\IronPython 2.7.1\Tools\Scripts\`

*   `MyProgram.py`将是你的程序。

    1.  在您的项目文件夹中（在哪里`MyProgram.py`），创建一个名为“deploy”的文件夹。
    2.  在命令提示符下运行`cd deploy`。
    3.  跑`"C:\Program Files (x86)\IronPython 2.7.1\ipy.exe" "C:\Program Files (x86)\IronPython 2.7.1\Tools\Scripts\pyc.py" /main:..\MyProgram.py /target:exe`

这将为`deploy`文件夹中的 MyProgram 生成一个 dll 和一个 exe。

如果您尝试运行`MyProgram.exe`并且正在导入类似的库`os`，您可能会得到一个`No module named ...`.

因为，我正在使用`os`，我收到此错误：

如果您运行“MyProgram.exe”并使用标准库，则可能会`No module named...`出现错误。

就我而言，我得到了：

> 未处理的异常：IronPython.Runtime.Exceptions.ImportException：没有模块名为 os
> ...

要解决此问题，请将文件夹复制`Lib`到`C:\Program Files (x86)\IronPython 2.7.1\`您`deploy`刚刚创建的文件夹中。然后，在导入引发错误的库之前，请进行`MyProgram.py`如下修改：

```
import sys
sys.path.append("Lib")

# Followed by library imports that were causing you trouble:
import os 
```

最后一步，将以下文件也从文件夹复制`C:\Program Files (x86)\IronPython 2.7.1\`到`deploy`文件夹：

- `IronPython.dll`
- `IronPython.Modules.dll`
- `Microsoft.Dynamic.dll`
-`Microsoft.Scripting.dll`

现在您可以压缩您的`deploy`文件夹并发送它！

# astyanax - astyanax 如何使用复合列创建列族

> ID：11750216
> 
> 赞同：1
> 
> 时间：2012-07-31T22:56:20.877
> 
> 标签：astyanax

我需要在这些类型的每一列中创建 3 个具有复合名称的列族

1.  Col Family 1 需要 UTF8 和 byte[]
2.  Col Family 2 需要 BigDecimal 和 byte[]
3.  Col Family 3 需要 BigInteger 和 byte[]

如何在 astyanax 中创建列族。我看到一个 setComparatorType(String) 但我希望比较器是 UTF8、BigDecimal 或 BigInteger（即复合键的第一部分）......我不在乎 byte[] 的顺序是什么，这样可以是随机的......真的不在乎。

另外，我是否需要在 astyanax 的 ColumnFamilyDefinition 对象上设置任何其他内容才能创建此列族？

另外，我看到了将值与自创建的带注释的复合类型一起放置的示例。我假设我只是调用 colMutation.putColumn(compositeTypeInst, value, theTime) 将其放入 cassandra？

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:58:56.213

啊，实际上确实有效，复杂的异常来自于持久保存复合材料。列族的创建使用效果很好

```
 ColumnFamilyDefinition def = cluster.makeColumnFamilyDefinition()
            .setName(colFamily)
            .setKeyspace(keyspace.getKeyspaceName())
                        .setComparatorType("CompositeType(UTF8Type, BytesType)"); 
```

# python - 我正在尝试在 ndb 中使用带有 filter() 的 @classmethod 并收到错误。新开发银行新手

> ID：11750221
> 
> 赞同：1
> 
> 时间：2012-07-31T22:56:44.767
> 
> 标签：python, google-app-engine, app-engine-ndb

我有一个具有此类方法的自定义用户模型。：

```
@classmethod
def by_name(cls, name):
    u = User.query().filter('name =', name).get()
    return u 
```

我收到了这个错误：

```
TypeError('Cannot filter a non-Node argument; received %r' % arg) 
```

这是我第一次使用 NDB，代码与 db 和 all() 一起使用。所以我知道这是一个简单的修复。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T23:14:05.577

[NDB 备忘单](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/edit?pli=1)来拯救：

```
u = User.query(User.name == name).get() 
```

# select - selenium webdriver如何从列表菜单项中选择

> ID：11750222
> 
> 赞同：4
> 
> 时间：2012-07-31T22:56:55.057
> 
> 标签：select, selenium, menu, webdriver

一旦它显示为下拉菜单，如何在菜单项列表中选择一个项目？我尝试使用 sendKeys 输入“Brown Mustard”之类的文本，但是当我点击提交按钮时它会清除。我知道我应该可以在该字段中输入它，但 WebDriver sendKeys 不起作用，所以如果您对如何从列表菜单项中进行选择有任何建议，非常感谢！

这是文本字段的 html 片段和输入“B”时出现的菜单项

```
 <input id="combobox0-text" class="ui-autocomplete-input ui-widget 
     ui-widget-content tableRightFormTextField" autocomplete="off" 
     role="textbox" aria-autocomplete="list" aria-haspopup="true"> 

    <li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" 
    tabindex="-1">Bro<strong>w</strong>n Mustard</a></li>
    <li class="ui-menu-item" role="menuitem"><a class="ui-corner-all"    
    tabindex="-1">Bro<strong>w</strong>ntop</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T04:46:32.530

您可以尝试使用等待，

```
new WebDriverWait(driver, 60).until(ExpectedConditions.visibilityOfElementLocated(By.id("combobox0-text"))).clear();
driver.findElement(By.id("combobox0-text")).sendKeys("Brown Mustard");
new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector("li.ui-menu-item"))).click(); 
```

上面的代码将清除`input field`and`type in the required item`并等待菜单项出现在下拉菜单中......，第三条语句将点击`menu item`..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:02:24.307

输入 B 后，您可以创建菜单项的选择对象，然后根据可见文本选择项目

```
import org.openqa.selenium.support.ui.Select;

//your code before entering B
Select menu = new Select(driver.findElement(By.id("combobox0-text")));
menu.selectByVisibleText("Brown Mustard"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:35:08.213

这就是它的工作方式：

```
driver.FindElement(By.Id("combobox0-text")).Clear();
driver.FindElement(By.Id("combobox0-text")).SendKeys("bro");
driver.FindElement(By.CssSelector("li.ui-menu-item")).Click(); 
```

仅供参考：它应在发送密钥后选择第一个/顶部菜单项。因此，如果您想选择特定项目，请键入更多键。

# php - APC 用户缓存条目未过期

> ID：11750223
> 
> 赞同：5
> 
> 时间：2012-07-31T22:56:57.943
> 
> 标签：php, apc, ttl

每次运行此代码时，我都会看到 5 个输出：

```
<?php
$v = 5;
apc_store('vwxyz',$v,3);
$before = apc_fetch('vwxyz');
sleep(5);
$after = apc_fetch('vwxyz'); //should be false
echo $before;
echo "<br>";
echo $after;
$later = apc_fetch('vwxyz'); //OK this should definitely be false
echo "<br>";
echo $later; 
```

缓存的条目不应该从缓存中清除并返回false给apc_fetch()吗？APC 的 user_ttl 设置为 2。我仍在试图弄清楚 user_ttl 做了什么（文档非常神秘）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T23:02:04.490

从[手册](http://php.net/apc_store)：

> **生存时间**；将***var***存储在缓存中***ttl***秒。***ttl***通过后 ，存储的变量将从缓存中删除（ **在下一个请求中**）。如果未提供***ttl***（或者***ttl***为 0），则该值将一直存在，直到手动将其从缓存中删除，否则无法在缓存中存在（清除、重新启动等）。

所以它说该项目*在下一个请求*的 TTL*之后*从缓存中删除。因此，直到您的下一个请求，该项目才会从缓存中删除，这就是您不断获得 5 的原因。

# recursion - 递归方法的大 O

> ID：11750226
> 
> 赞同：19
> 
> 时间：2012-07-31T22:57:20.010
> 
> 标签：recursion, big-o

我很难确定简单递归方法的大 O。当一个方法被多次调用时，我无法理解会发生什么。我会更具体地说明我的困惑领域，但目前我正在尝试回答一些硬件问题，而不是不想作弊，我要求任何回复这篇文章的人提出一个简单的递归方法和提供对所述方法的大O的简单解释。（最好用 Java ......我正在学习的一种语言。）

谢谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-31T23:10:10.717

您也可以递归定义顺序。例如，假设您有一个函数 f。计算 f(n) 需要 k 步。现在您要计算 f(n+1)。假设 f(n+1) 调用 f(n) 一次，然后 f(n+1) 需要 k + 一些恒定步骤。每次调用都会额外采取一些恒定的步骤，所以这个方法是 O(n)。

现在看另一个例子。假设您通过添加前面的两个结果来天真地实现斐波那契：

```
fib(n) = { return fib(n-1) + fib(n-2) } 
```

现在假设您可以在大约 k 步中计算 fib(n-2) 和 fib(n-1)。要计算 fib(n)，您需要 k+k = 2*k 步。现在假设您要计算 fib(n+1)。因此，您需要的步数是 fib(n-1) 的两倍。所以这似乎是 O(2^N)

诚然，这不是很正式，但希望通过这种方式你可以得到一点感觉。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-31T23:15:08.537

您可能需要参考主定理来找到递归方法的大 O。这是维基百科的文章：[http ://en.wikipedia.org/wiki/Master_theorem](http://en.wikipedia.org/wiki/Master_theorem)

你想把递归问题想象成一棵树。然后，考虑树的每个级别和所需的工作量。问题通常分为 3 类，根重（第一次迭代 >> 树的其余部分）、平衡（每个级别有相等的工作量）、叶重（最后一次迭代 >> 树的其余部分）。

以归并排序为例：

```
define mergeSort(list toSort):
    if(length of toSort <= 1):
        return toSort
    list left = toSort from [0, length of toSort/2)
    list right = toSort from [length of toSort/2, length of toSort)
    merge(mergeSort(left), mergeSort(right)) 
```

可以看到，每次调用 mergeSort 又会再调用 2 个原长度 1/2 的 mergeSort。我们知道合并过程所花费的时间与被合并的值的数量成正比。

则递归关系为 T(n) = 2*T(n/2)+O(n)。这两个来自 2 个调用，而 n/2 来自每个调用，只有一半的元素。然而，在每一层都有相同数量的元素 n 需要合并，所以每一层的常数工作是 O(n)。

我们知道工作是均匀分布的（每个深度 O(n)），树的深度是 log_2(n)，所以递归函数的大 O 是 O(n*log(n))。

# xslt - Umbraco "alttemplate=templatename" | 内容问题

> ID：11750228
> 
> 赞同：2
> 
> 时间：2012-07-31T22:57:21.250
> 
> 标签：xslt, umbraco

我在 umbraco xslt 代码中的 url 末尾使用“？alttemplate=TemplateName”

这是示例：`<a href="{umbraco.library:NiceUrl(@id)}?alttemplate=CommunityVideo">Click here</a>`

当用户单击链接时，将触发一个弹出窗口（fancybox），并在其中呈现适当的内容。

此弹出窗口运行良好 - 唯一的问题是与 umbraco 中的节点关联的模板具有 RTE（富文本编辑器）。我在 RTE 中输入的内容没有显示，这很奇怪，因为我在“CommunityVideo”模板上有 umbraco 字段选择项。

从理论上讲，内容应该呈现，但事实并非如此。

这是填充内容的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title><umbraco:Item field="pageName" runat="server" /></title>
  <link rel="stylesheet" href="/css/main.css" type="text/css" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
</head>
<body id="popup">
  <div id="comm-video-wrap">
    <umbraco:Item field="bodyText" runat="server" />
  </div>
</body> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:06:37.267

有很多不太可能的原因。

首先，您在项目上拼错了别名-我猜文档类型上的名称是“Body Text”或“BodyText”或“bodyText”-所有这些都会生成bodyText的别名-如果不是这样可以成为问题。

其次，是否有隐藏渲染项目的样式表设置 - 使用萤火虫检查出来。

使用 alttemplate 应该可以工作 - 但您需要确保它运行您认为的模板。

可能是 RTE 中没有可用的文本，您可以通过添加[textIfEmpty 属性](http://our.umbraco.org/wiki/reference/templates/umbracoitem-element/additional-attributes/textifempty)来验证。

```
<umbraco:item field="bodyText" textIfEmpty="There is no commentary text" runat="server" /> 
```

还有其他 umbraco:item 属性可能有助于调试，尝试将 umbraco:item 语句调整为：

```
<umbraco:item field="bodyText" insertTextBefore="**BEFORE**" insertTextAfter="**AFTER**" htmlEncode="true" textIfEmpty="There is no commentary text" runat="server"/> 
```

如果您看不到任何文本，那么您认为正在运行的模板根本就不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:57:16.690

另一种可能性是您的模板名称不准确（大小写和全部）。fancybox 是否在执行 AJAX 调用来获取页面？它是在响应中从上面获取标记还是空白？

# android - 在eclipse中发布android测试项目

> ID：11750229
> 
> 赞同：-1
> 
> 时间：2012-07-31T22:57:24.183
> 
> 标签：android, eclipse, test-project

嗨，我正在 Eclipse 中开发一个 android 应用程序。我用测试项目创建了 android 项目。我从事安卓测试。现在主项目文件夹没有类和文件。只有清单。如何发布测试项目并将其转换为主项目？

我在 Eclipse 中创建了一个名为 Volume control 的新 android 应用程序。eclipse 自动创建了第二个名为 Volume controlTest 的项目。我在做第二个。我测试了它，它工作正常。现在我想发布它。如何传输音量控制项目中的文件？如果我重构并将名称更改为文件夹或包，我将丢失项目。如果我删除音量控制文件夹 eclipse 说我需要音量控制项目来运行音量控制测试。

我需要编写好的源代码才能在 GIT 上发布并打开应用程序。

请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:27:45.640

听起来您在测试项目中而不是在主项目中编写了您的 Android 应用程序。

Eclipse 创建两个项目，主项目和测试项目，其名称“Test”附加到您指定的任何名称。测试项目旨在保存您为测试主代码而编写的测试。

相反，您应该在主项目中编写代码，并在测试项目中编写测试。

由于您错误地将应用程序代码放入测试项目中，您应该能够通过操作系统的本机文件管理将其复制到主项目中，并且 Eclipse 应该会接收更改。您可能需要修复一些问题，例如路径、类名等，但您不应该丢失任何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:12:40.067

解决了：

1.  将测试项目保存到 Eclipse 工作区之外的文件夹中
2.  从eclipse中删除项目
3.  创建没有活动的新空“Android项目”
4.  将项目文件从文件管理器复制并粘贴到 eclipse
5.  从项目文件中删除所有单词“.test”。
6.  进入清单删除`<instrumentation android:name="android.test.InstrumentationTestRunner" android:targetPackage="....." />`和`<uses-library android:name="android.test.runner" />`

**很重要！！！！**在进行所有更改之前不要保存，否则eclipse更改项目并且您需要测试项目才能使用主项目

# python - 为什么 python 分配的内存似乎比 sys.getsizeof 占的更多？

> ID：11750234
> 
> 赞同：5
> 
> 时间：2012-07-31T22:58:04.890
> 
> 标签：python

例子：

```
import sys

class Test():
    def __init__(self):
        self.a = 'a'
        self.b = 'b'
        self.c = 'c'
        self.d = 'd'
        self.e = 'e'

if __name__ == '__main__':
    test = [Test() for i in range(100000)]
    print(sys.getsizeof(test)) 
```

在 Windows 任务管理器中：创建 100000 与 10 的列表时，我得到了约 20 MB 的跳跃。

使用 sys.getsizeoff()：对于 100000 的列表，我得到 412,236 字节；对于 10 个列表，我得到 100 个字节。

这似乎非常不成比例。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:05:40.200

分配的内存不是不成比例的；您正在创建 100,000 个对象！如您所见，它们占用了大约 34 MB 的空间：

```
>>> sys.getsizeof(Test())+sys.getsizeof(Test().__dict__)
344
>>> (sys.getsizeof(Test())+sys.getsizeof(Test().__dict__)) * 1000000 / 10**6
34.4 #megabytes 
```

您可以使用 获得较小的改进`__slots__`，但您仍需要大约 20MB 的内存来存储这 100,000 个对象。

```
>>> sys.getsizeof(Test2())+sys.getsizeof(Test2().__slots__)
200
>>> sys.getsizeof(Test2())+sys.getsizeof(Test2().__slots__) * 1000000 / 10**6
20.0 #megabytes 
```

（[感谢 mensi 的回答](https://stackoverflow.com/a/11750341/711085)，`sys.getsizeof`没有考虑引用。您可以自动完成以查看对象的大部分属性。）

请参阅 SO 答案：[使用 __slots__？](https://stackoverflow.com/questions/472000/python-slots) [http://docs.python.org/release/2.5.2/ref/slots.html](http://docs.python.org/release/2.5.2/ref/slots.html)

要使用`__slots__`：

```
class Test2():
    __slots__ = ['a','b','c','d','e']

    def __init__(self):
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:09:19.760

对于您的示例，每个实例都引用了一个 dict，它`__dict__`在我的机器上是 272 字节。乘以 100'000。

# xml - 具有值和属性的 XML 元素的 XSD 架构

> ID：11750239
> 
> 赞同：1
> 
> 时间：2012-07-31T22:58:17.643
> 
> 标签：xml, xsd

这个元素怎么可能是 XSD？

```
<Message isEnabled="true">Message body</Message> 
```

我在 Google 中搜索过，但只有**消息**是复杂类型的示例，而不是带有类型的元素。

或者这根本是 XML 的错误格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:05:16.777

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="Message">
  <xs:complexType>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="isEnabled" type="xs:boolean" />
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:element>

</xs:schema> 
```

# objective-c - Objective-C 宏 - 调用单例对象的方法

> ID：11750240
> 
> 赞同：0
> 
> 时间：2012-07-31T22:58:30.467
> 
> 标签：objective-c, ios, macros, singleton-methods

我正在使用单例对象/类，并且需要经常调用它的方法之一，并且需要从大型项目的许多地方调用。我需要定义一个宏来处理这个问题，但它目前不起作用。这也需要处理变量参数列表。这就是我为#define 所做的：

```
#define OldMethod(var, ...) [[MyClass getInstance] myMethod:var, ## __VA_ARGS__] 
```

我也试过这个：

```
#define OldMethod(var, ...) [[MyClass getInstance] myMethod:[NSString stringWithFormat:fmt, ## __VA_ARGS__]] 
```

结果是如下所示的编译器错误。

```
"_OBJC_CLASS_$_MyClass", referenced from:
Objc-class-ref-to-MyClass in AnotherClassDelegate.o
Symbole(s) not found
Collect2: Id returned 1 exit status 
```

作为旁注，这是我最近开始从事的一个现有项目，目前我不能过多地干预它的结构。将所有对“OldMethod”的调用替换为对新方法的调用或重写“OldMethod”会更容易，但我不能这样做。为什么？好吧，这很复杂，所以让我们假设我需要弄清楚如何为此使用宏......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:47:04.450

看起来您忘记将带有`MyClassName`or实现的文件添加`MyClass`到您的项目中（您用两个不同的名称引用它，所以不确定哪个是正确的）。

# java - ProGuard 不工作

> ID：11750244
> 
> 赞同：1
> 
> 时间：2012-07-31T22:58:54.443
> 
> 标签：java, android, proguard

我正在使用最新的 SDK 开发一个 Android APP。我正在为 Api 4 (android 1.6) 开发应用程序。

我的项目有一个**proguard-project.txt**文件（这是最新版本的 Android SDK 的 proguard 配置文件）并且 project.properties 文件取消了 proguard 行的注释，因此 proguard 被激活`(proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt)`

问题是我用proguard编译了apk文件，似乎proguard在文件中没有做任何事情，我反编译了apk并显示了与不使用proguard时相同的代码。我的**proguard-project.txt**也是空的。它只包含评论...

这是我自动生成的**proguard-project.txt**文件的内容：

```
 # To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#} 
```

我必须在这个文件中添加哪些行来混淆、优化和减小我的 apk 文件的大小？（至少可以混淆代码......）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:00:36.057

`ant release`Android SDK 仅在您使用或通过在 Eclipse 中导出 apk创建发布版本时应用 ProGuard 。

# java - 正则表达式匹配一个数字和 8 个字符的空格

> ID：11750247
> 
> 赞同：2
> 
> 时间：2012-07-31T22:59:11.297
> 
> 标签：java, regex

我想匹配一个包含的字符串，

空间

任意位数

空间

1-8 个字符 - （字母数字和特殊字符）

例子，

```
 01 Stack 
```

这是我试过的，

```
\\s\\d+\\s[^.]{1, 8} - i tried here except for ., 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:03:02.347

试试`\\s\\d+\\s[^.]{1,8}`？看起来这里唯一的问题是多余的空间。

此外，`\\S`适用于除空格之外的所有内容。`[^ ]`适用于除空间外的所有内容。`.`是为一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:10:16.700

试试这个，捕捉（并限制）标点符号和字母数字`\s\d+\s[\p{Punct}\p{Alnum}]{1,8}`：`^...$`如果您想要开始/结束线锚点，请将其全部包裹起来。

如果“任意位数”表示 1 个或多个数字，那么上面的模式就可以了。如果它的意思是“零个或多个数字”，那么`\d+`需要变成`\d*`.

顺便说一句，该模式`[^.]`将匹配任何不是句点的内容。我认为它包含了太多，而排除了太多。所以我选择了更具体的模式`[\p{Punct}\p{Alnum}]`。

请参阅[此处的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#sum)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T23:08:14.410

我不明白`[^.]`. 该字符`.`匹配“任何字符”。所以你要求它匹配“除任何字符*之外*的任何字符”。相反，您应该将非空格字符与`\\S`.

# javascript - php.js 序列化函数破坏实体字符 - UTF8 原因？

> ID：11750248
> 
> 赞同：0
> 
> 时间：2012-07-31T22:59:26.367
> 
> 标签：javascript, jquery, utf-8, character-encoding, special-characters

好的，在我的商务平台上，购物车数据作为序列化数组存储在会话中。今天出现了一个问题，其中一个项目的尺寸选项具有 1/4 和 1/2 尺寸的特殊字符，例如；7¼、7½ 等，但是在查看客户为此商品下的订单时，尺寸值显示如下：7Â½

对 101 进行故障排除后，我前往该站点并下达了与客户完全相同的订单……奇怪的是，一切都按预期工作，并且问题没有重现。然后我注意到订单是通过“电话订单”下达的，这是一个后端脚本，允许商店工作人员编译新订单并在一个屏幕上进行收费/最终确定。系统通过使用 jquery 和 ajax 来实现这一点，以将所有内容都保留在屏幕上，而不必拥有多个“结帐页面”。

无论如何，通过电话订单脚本下了相同的订单，问题重现得很好。深入研究后，我注意到在客户下订单的“站点”端，购物车数据使用 PHP 函数进行序列化，然后 base64_encoded 并将“COMPRESSED”与订单一起存储在数据库中。

在电话订单方面，序列化是通过 php.js 序列化函数完成的，该函数假设同样模拟 php 序列化函数。然后将序列化的数据连同客户信息等一起发布到处理程序。向 CC 收费，并将订单保存到数据库中，就像在站点端一样。

进一步研究它，我比较了双方的两个“序列化”字符串的相同顺序，并且存在差异。在 php 方面，值 7½ 显示为“s:2:7½”，Javascript 版本显示为“s:3:7½”...

我已在此过程中涉及的所有页面上验证了我网站的字符编码为西方 (iso-8859-1)。

我能够解决这个问题......一旦将“坏”序列化对象传递给 php 以保存订单，然后我取消序列化它，然后将生成的数组/对象传递给运行转换器函数的递归函数（ char2html) 在每个值上，它将任何特殊字符转换为其实体名称代码，本质上 ½ 变为 ½ 并且 Â 变成 Â。然后我使用 str_replace 删除任何“Â” 字符串，然后通过我的另一个函数（html2char）运行它，它覆盖了任何 &entityNames; 回到他们的实际性格。

一旦该函数完成运行，然后使用 php 的序列化函数重新序列化对象/数组，一切正常，电话订单脚本上的订单不再显示 Acric 字符。

因此，特别是我想弄清楚是否有某种方法可以在通过之前将javascript中½字符的UTF8版本强制转换为1字节版本（而不是javascript看到的两字节UTF8版本）到序列化函数，希望序列化函数将返回正确的字符串，不存在 UTF8 字符。

也有人说 php.js 序列化函数中有一些 UTF8ness 发生，但我的 JS 编码不够先进，无法确定序列化函数*内部*是否有某些东西在执行此操作......或者如何更改它如果有。

函数参考： [http ://phpjs.org/functions/serialize:508](http://phpjs.org/functions/serialize:508)

想法？

# android - Android 权限问题

> ID：11750249
> 
> 赞同：0
> 
> 时间：2012-07-31T22:59:26.817
> 
> 标签：android, audio, permissions

我正在编写一个简单的活动来记录和保存音频，最好保存到我的应用程序中的文件夹，但为简单起见，保存到 SD 卡。给我带来麻烦的代码行是

```
String path = Environment.getExternalStorageDirectory().toString() + "/" + "tempAppFiles/";
String filename = "test"+".mp4";
recorder.setOutputFile(path + filename); 
```

其中记录器是 MediaRecorder 的一个实例。

当我运行应用程序时，我收到一个权限错误，指出

```
07-31 15:51:51.810: W/System.err(13670): java.io.FileNotFoundException: /mnt/sdcard/tempAppFiles/test.mp4 (Permission denied) 
```

我查了一下这个问题，发现我需要在我的清单中添加几个权限标签，我添加了

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

我的清单。

我仍然遇到相同的权限问题，我找不到任何有类似问题的人。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:00:13.483

tempAppFiles 不适合我。似乎您应该写入您正在编写的应用程序的包名称下的目录...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:53:55.573

嗯......权限似乎是正确的，也许你把它们放在错误的地方，它们需要是[root note 的孩子。](http://developer.android.com/guide/topics/manifest/manifest-element.html)

接下来你[可以检查一下，是否可以](http://developer.android.com/reference/java/io/File.html#canWrite%28%29)通过检查来写入文件

```
boolean canIWrite = path.canWrite(); 
```

由于您还收到 FileNotFound 异常，您可以尝试...

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

...代替...

```
String path = Environment.getExternalStorageDirectory().toString(); 
```

如果这根本没有帮助，仍然有一个捕获音频的官方示例 - 您应该将您的代码与以下内容进行比较：http: [//developer.android.com/guide/topics/media/audio-capture.html](http://developer.android.com/guide/topics/media/audio-capture.html)

# python - 在 Python 中从解析的 XML 中提取值（仅限）

> ID：11750257
> 
> 赞同：0
> 
> 时间：2012-07-31T23:00:33.227
> 
> 标签：python, xml, beautifulsoup

我正在尝试使用 Beautiful Soup 从 Python 中的一些 XML 中提取一个值（但如果推荐的话，我会很高兴地将它转储为其他任何东西）。考虑以下代码；

```
global humidity, temperature, weatherdescription, winddescription

query = urllib2.urlopen('http://www.google.com/ig/api?weather="Aberdeen+Scotland"')
weatherxml = query.read()
weathersoup = BeautifulSoup(weatherxml)
query.close()

print weatherxml 
```

这会将苏格兰阿伯丁的天气预报打印为 XML（当前）因此（删除了很​​多 XML 以防止巨大的文本墙综合症）；

```
<?xml version="1.0"?><xml_api_reply version="1"><weather module_id="0"
tab_id="0" mobile_row="0" mobile_zipped="1" row="0" section="0"
><forecast_information><city data="Aberdeen, Aberdeen City"/><postal_code data="&quot;Aberdeen Scotland&quot;"/><latitude_e6
data=""/><longitude_e6 data=""/><forecast_date
data="2012-07-31"/><current_date_time data="1970-01-01 00:00:00
+0000"/><unit_system data="US"/></forecast_information><current_conditions><condition
data="Clear"/><temp_f data="55"/><temp_c data="13"/><humidity
data="Humidity: 82%"/><icon
data="/ig/images/weather/sunny.gif"/><wind_condition data="Wind: SE at
8 mph"/></current_conditions> 
```

例如，现在我希望能够使用此 XML 中的天气值填充变量，例如 make temperature = 13。解析它是一场噩梦。

如果我在weathersoup 上使用任何find 函数，我会得到整个标签（例如对于temp_c 它返回`"<temp_c data="13">`），其他各种函数什么也不返回，或者整个工作表，或者它的一部分。

我如何简单地返回任何给定 XML 标记的 VALUE，而没有混乱的“strip”，或者诉诸正则表达式，或者基本上是破解它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:08:34.700

`data`要访问element 中的属性`temp_c`：

```
weathersoup.temp_c['data'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:18:10.443

使用`lxml`，并与 XPath 友好相处。此示例中的某些内容对您提供的 XML 没有意义，因为它无法正确解析……但希望它能让您了解 XPath 的强大功能。

```
from lxml import etree
# xmlstr is the string of the input XML data
root = etree.fromstring(xmlstr)

# print the text in all current_date_time elements
for elem in root.xpath('//current_date_time'):
    print elem.text

# print the values for every data attribute in every temp_c element
for value in root.xpath('//temp_c@data'):
    print value

# print the text for only the temp_c elements whose data element is 'Celsius'
for elem in root.xpath('//temp_c[@data="Celsius"]'):
    print elem.text

# print the text for only the temp_c elements that are under the temperatures element, which is under the root.
for elem in root.xpath('/temperatures/temp_c'):
    print elem.text 
```

# performance - 有什么方法可以让这个片段更高效？

> ID：11750261
> 
> 赞同：0
> 
> 时间：2012-07-31T23:00:56.137
> 
> 标签：performance, assembly, masm

我刚开始玩 MASM 风格的程序集，玩了足够长的时间后，我设法做出了一种循环。这只是修修补补，所以我想知道是否有人可以就这段代码是否效率低下或如何改进提供任何见解和解释。

```
.386
.model flat, stdcall
option casemap:none
include \masm32\include\windows.inc
include \masm32\include\masm32.inc
include \masm32\include\user32.inc
includelib \masm32\lib\masm32.lib
includelib \masm32\lib\user32.lib

.data
MsgBxTitle db "Loop Step", NULL

.data?
Buff dd ?
MsgBxBody dd ?

.code
start:
XOR eax,eax
MOV Buff, eax 
lp:
invoke dw2hex, Buff, addr MsgBxBody
invoke MessageBox, NULL, addr MsgBxBody, addr MsgBxTitle, MB_OKCANCEL
.IF eax==IDCANCEL
RET
.ENDIF
INC Buff
CMP Buff,10
JL lp
RET
end lp
invoke ExitProcess, NULL
end start 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:58:02.943

使用 MessageBox 显示结果时，我认为效率或性能无关紧要。我对您的控制流有疑问。“RET”打算返回哪里？如果有的话，什么时候调用 ExitProcess？我不知道“end lp”做了什么，所以也许我错过了一些东西......

最好的，弗兰克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:39:52.807

您可以通过这种方式从代码中减少 16 个字节。将寄存器归零并将其推为零。为您的双字缓冲区使用寄存器。使用寄存器组装成更小的操作码并且比内存（标签）“更快”。

我个人不喜欢/使用高级别的东西。

```
start:
    xor     edi, edi
    xor     esi, esi
    mov     ebx, 10
lp:
    push    offset MsgBxBody
    push    edi
    call    dw2hex

    push    MB_OKCANCEL
    push    offset MsgBxTitle
    push    offset MsgBxBody
    push    esi
    call    MessageBox
    test    eax, IDCANCEL
    jnz     Done

    inc     edi
    dec     ebx
    jns     lp

Done:
    push    esi
    call    ExitProcess
end start 
```

# css - 在 spark textarea 中设置图像样式

> ID：11750263
> 
> 赞同：3
> 
> 时间：2012-07-31T23:01:03.860
> 
> 标签：css, apache-flex, textarea, flex4, flex-spark

此[示例](http://help.adobe.com/en_US/flex/using/WS19f279b149e7481c2028ff4112df207af8b-8000.html)显示如何在 spark TextArea 中包含图像并设置它们的`float`和`paddingLeft`/`paddingRight`属性：

```
<s:RichEditableText id="myRET1" width="300">
    <s:textFlow>
        <s:TextFlow columnWidth="290">
            <s:p id="p1">Images in a flow are a good thing. For example, here is a float. 
            <s:img id="image1" float="none" source="@Embed(source='../assets/bulldog.jpg')" paddingRight="10" paddingTop="10" paddingBottom="10" paddingLeft="10">
            </s:img>
            Don't you agree? It should show on the left. If it doesn't show up on the left, then it is a bug. You can submit bugs at http://bugs.adobe.com/jira/. You can set how the float is positioned within
            the paragraph by using the ComboBox below. You can select left, right, start, end, or none. This example does not use the clearFloats property. That is in a different example.</s:p>
        </s:TextFlow>
    </s:textFlow>
</s:RichEditableText> 
```

是否可以通过[Flex 的 CSS](https://stackoverflow.com/questions/9183290/flex-style-textarea-with-css)指定图像的浮动/填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:25:34.367

是的，可以通过 css 指定图像：

1）创建一个包含此图像和那些属性（填充）的皮肤

2）创建文件css包含组件的名称空间和调用类引用（作为参数皮肤传递的类）

3) 在文件 mxml 中定义样式名称等于步骤 1 中指定的名称空间

# javascript - 使用 Google Analytics 跟踪错误？

> ID：11750264
> 
> 赞同：0
> 
> 时间：2012-07-31T23:01:08.713
> 
> 标签：javascript, google-analytics

是否可以使用 Google Analytics 来跟踪用户何时收到 404、401 和其他类型的错误，并将其他数据与这些报告相关联，例如堆栈跟踪？

我进行了研究，[Google Analytics（分析）建议](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=86927)使用以下方法来跟踪用户何时收到 404 错误：

```
pageTracker._trackPageview("/404.html?page=" + 
 document.location.pathname +  
document.location.search + "&from=" +  
document.referrer); 
```

这对于跟踪点击非常有用，但它并不能真正帮助跟踪用户最初是如何到达页面的。是否可以将更多信息数据与页面视图相关联，例如堆栈跟踪？或者谷歌分析不是为了跟踪这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:15:47.043

请注意，您会收到*一些*您提到的方式 - 主要是 404 的引用页面。

关于您的其他观点：将堆栈跟踪嵌入到向用户显示的页面中存在**重大**安全问题（必须如此，因为 GA API 是客户端大小的 JS）。它会损害您的架构和其他重要的安全信息。

错误日志记录应该由服务器端语言完成，并且基本上每种语言都有一个，所以请选择 - 这可能就是为什么 GA 没有任何您要求的功能的原因。

# android - 带有滑动菜单的 Sherlock 操作栏

> ID：11750267
> 
> 赞同：5
> 
> 时间：2012-07-31T23:01:23.527
> 
> 标签：android, menu, actionbarsherlock, sliding

我正在制作一个视图和一个扩展 SherlockMapActivity 的活动，并使用 SlidingMenu 库使我的主视图像 Google+ 一样滚动。我已经通过 XML 添加了 SlidingMenu，我的视图滚动完美地显示了隐藏的菜单，但它只滚动了操作栏下方的视图。在 Google+ 应用程序中，它还会滚动操作栏，我看到有一个功能可以让我的操作栏滑动启用，但它不起作用。

让我的操作栏在全视图中滑动的最佳方法是什么？也许我没有扩展正确的课程？

这就是我将 SlidingMenu 添加到我的应用程序的方式：

XML 文件：

```
<com.slidingmenu.lib.SlidingMenu
    xmlns:sliding="http://schemas.android.com/apk/res-auto"
    android:id="@+id/slidingmenulayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    sliding:viewAbove="@layout/activity_main"
    sliding:viewBehind="@layout/menu_desplegado"
    sliding:behindOffset="120dip"
    sliding:behindScrollScale="0.25"
 /> 
```

这是结果：

![主布局截图](../Images/68f0b7159c34c9304f55dc01ee218fb7.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T09:53:37.883

我已经解决了我的问题。

为了使我的操作栏滑动，我必须以这种方式修改 SlidingMenu：

1.  签出 ActionBarSherlock 的干净副本并导入到您的 Eclipse 工作区。
2.  将 ActionBarSherlock 作为依赖项添加到 SlidingMenu。
3.  进入您计划使用的 SlidingActivity，使它们扩展 Sherlock__Activity 而不是 __Activity。

然后我从 SlidingMapActivity 扩展了我的 MainActivity，它工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:33:35.887

好的，我想我找到了你的答案。尝试在 github 上查看这个项目： [https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

这是它的视频： [http ://www.youtube.com/watch?v=8vNaANLHw-c&feature=youtu.be](http://www.youtube.com/watch?v=8vNaANLHw-c&feature=youtu.be)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T21:17:24.270

就我而言，我更喜欢在代码中添加此 slideMenu。

好吧，当您创建此 SlideMenu 时：

```
menu = new SlidingMenu(this);
menu.setMode(SlidingMenu.LEFT); 
```

然后也设置这一行：

```
menu.attachToActivity(this, SlidingMenu.SLIDING_WINDOW); 
```

这使魔术！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T01:58:35.317

这是我为简单的滑动菜单开发者开发的一个完整项目 [http://github.com/leonardosalles/shipp-sliding-menu](http://github.com/leonardosalles/shipp-sliding-menu)

# gwt - 如何获得画布的宽度/高度？

> ID：11750268
> 
> 赞同：3
> 
> 时间：2012-07-31T23:01:29.333
> 
> 标签：gwt

我想在我的 html 页面上有一个画布，宽度 = 100%。然后我想在运行时获取画布的宽度（以像素为单位）。就像是：

```
Canvas c = Canvas.createIfSupported();
c.setWidth("100%");
c.setHeight("100%");

// let's draw a rectangle to fill the whole canvas:
c.getContext2d().rect(0, 0, ?, ?); // <-- what's its actual width/height? 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:05:42.710

这是（令人惊讶的）

```
c.getContext2d().rect(0, 0, 299, 149); 
```

...无论画布的实际像素大小是多少。原因是，300x150 是默认**坐标空间**大小，请参阅[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element)

您可以通过使用`canvas.setCoordinateSpaceWidth()`和更改`canvas.setCoordinateSpaceHeight()`为您想要的任何内容。

通常，人们想要独立于画布的实际大小进行绘制，因此他们只需将坐标空间设置为 100x100 之类的东西，绘制的图像就会自动缩放。

但是，您可能想了解实际的画布像素大小：

```
Scheduler.get().scheduleDeferred(new ScheduledCommand() {

  @Override
  public void execute() {

    final int clientWidth = canvas.getElement().getClientWidth();
    final int clientHeight = canvas.getElement().getClientHeight();

    setupCoordinateSpace(canvas, clientWidth, clientHeight);
    drawMyImage(canvas);
  }
}); 
```

请注意，这必须在 中完成`scheduleDeferred`，因为只有在浏览器有机会执行布局之后才能知道客户端大小。

您可以使用此信息来调整纵横比以匹配画布（我建议这样做，否则您会得到扭曲的图像）

```
void setupCoordinateSpace(Canvas canvas, int clientWidth, int clientHeight) {
  final double aspect = (double) clientWidth / (double) clientHeight;
  canvas.setCoordinateSpaceHeight(
      (int) (myCoordinateSpaceWidth / aspect));
} 
```

或者，您也可以设置坐标空间以匹配像素大小，这样您就可以在 HTML5 画布上执行像素精确绘图：

```
void setupCoordinateSpace(Canvas canvas, int clientWidth, int clientHeight) {
  canvas.setCoordinateSpaceWidth(clientWidth);
  canvas.setCoordinateSpaceHeight(clientHeight);
} 
```

坐标空间设置好后，可以调用`drawMyImage()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:06:43.363

使用画布宽度和高度方法

```
var width = c.width;
var height = c.height; 
```

# uitableview - 访问没有标签的 uitextfield

> ID：11750270
> 
> 赞同：0
> 
> 时间：2012-07-31T23:01:46.083
> 
> 标签：uitableview, tags, subview

我有一个带有多个动态表格视图单元格的表格视图，并且在每个表格视图单元中我有多个文本字段。每个单元格都有不同的标签，但 texfields 没有！我需要检索用户稍后将插入的信息。我正在使用界面生成器。

是否可以访问未标记的 texfield？

我可以使用“用户定义的运行时属性”来管理它吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:28:02.927

这是从 iOS 开始时的常见错误。

您不应该直接引用文本字段来检索存储在其中的信息，**尤其是**在表格视图中。在表格视图中，当一个单元格从屏幕上滚出时，该单元格很可能会被重用，并且存储在那里的信息将永远消失。

相反，当用户完成编辑文本字段时，通过将视图控制器设置为文本字段委托，然后实现`textFieldDidEndEditing:`委托方法来存储文本：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    // Store the textField.text value somewhere for later use.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:18:35.567

您可以查看每个单元格子视图并检查它是否为 UITextField，例如：

```
for (UIView *subview in cell.subviews) {
    if ([subview isKindOfClass:[UITextField class]]) {
        // do something with the text field...
    }
} 
```

话虽如此，这可能不是最好的方法......给每个 textField 一个标签或使用具有 textFields 作为属性的自定义单元格子类化单元格，U 会做得更好。

# flash - 访问影片剪辑中的元件

> ID：11750271
> 
> 赞同：0
> 
> 时间：2012-07-31T23:01:46.443
> 
> 标签：flash, actionscript

我在 Flash 中创建了一个由各种不同矩形组成的场景。我为每个矩形命名为“AS Linkage”，并将所有矩形添加到我称之为的影片剪辑中`AllBoxes`。

我导出了这个影片剪辑并将其导入到我的 flash builder 项目中。然后我可以使用以下命令在动作脚本中显示场景：

```
var allBoxes:AllBoxes = new AllBoxes();
addChild(allBoxes); 
```

这很好。但是，是否可以选择构成场景的特定框之一。

例如，我是否可以将所有框都绘制到屏幕上，然后更改其中一个框的颜色。如何从影片剪辑中选择其中一个框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:25:56.120

在将矩形放置在父 MovieClip (AllBoxes) 中后，您需要为矩形的每个实例添加一个名称属性。 ![在此处输入图像描述](../Images/d914ad6465b7b36b1bf199353ba253aa.png)

然后，您可以将它们作为 AllBoxes 实例的属性进行访问。

因此，如果您将其中一个矩形命名为“rec1”，那么您可以像这样访问它：

```
allBoxes.rec1.transform.colorTransform = new ColorTransform(2); 
```

您还可以使用 allBoxes.getChildAt(i) 方法访问所有矩形，其中“i”是您想要的矩形的层索引（介于 0 - 最底部 - 和 allBoxes.numChildren 属性减去 1 是最前面的矩形） ;

# knockout.js - 淘汰赛JS异步

> ID：11750273
> 
> 赞同：2
> 
> 时间：2012-07-31T23:01:48.463
> 
> 标签：knockout.js, asp.net-web-api

谁能告诉我在以下代码中执行从淘汰赛到 .net WebAPI 的三个单独获取请求以绑定可观察数组的最佳方法？Firebug 显示加载时间为几毫秒，但实际上需要几秒钟。

在查看任何 javascript async 之前，我希望能得到一些指导。

```
 $(function () { 
        var model = new viewModel();
        model.todayTimes([]); 
        model.zones([]);
        model.dayTypes([]);

        $.get('../api/Zone', function (data) {
        model.zones(data);

        });

         $.get('../api/DayType', function (data) {
        model.dayTypes(data);

        });

        $.get('../api/TemplateTime/?dayTypeId='+model.dayType(), function (data) { 
            model.todayTimes(data); 
            ko.applyBindings(model); 
        }); 
```

编辑

```
function viewModel() {
        var self = this;
        self.dayType = ko.observable(1);
         self.todayTimes = ko.observableArray([]);
         self.dayTypes = ko.observableArray([]);
         self.zones = ko.observableArray([]);

//other code

  $.getJSON("/api/Zone", function(data) {
    self.zones(data);

    $.getJSON("/api/DayType", function(data) {
    self.dayTypes(data);
    }); 

       $.getJSON('../api/TemplateTime/?dayTypeId=1', function (data) { 
            self.todayTimes(data); 
        }); 

}
  $(function () { 
        ko.applyBindings(new viewModel());           
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:55:08.253

所以我会先问他们是否需要 3 次调用，因为在页面加载时发出三个单独的 ajax 请求是非常浪费的。几乎可以肯定有更好的方法来做到这一点。另外，这是一次性的，还是需要重复使用？

如果这是一次性的，我不得不想知道为什么会发生这种情况。该数据应由服务器收集并与初始页面请求一起发送。这是最优路径。如何做到这一点取决于您的服务器堆栈，但它们都支持模型序列化为 JSON，您可以在构建期间将其直接转储到您的视图模型中。

如果它需要可重用（这是发出这些 ajax 请求的唯一原因），那么它们真的需要 3 个单独的调用吗？它们看起来是相关的，并且*可能*会同时请求所有数据。将其组合成可重用的东西可能如下所示：

```
var ViewModel = function(initialData) {
    var self = this;
    self.dayType = ko.observable(initialData.dayType || []);
    self.todayTimes = ko.observableArray(initialData.todayTimes || []);
    self.dayTypes = ko.observableArray(initialData.dayTypes || []);
    self.zones = ko.observableArray(initialData.zones || []);

    self.getData = function() {
        $.getJSON("/api/timeInfo", function(data) {
            self.todayTimes(data.todayTimes || self.todayTimes()));
            self.dayTypes(data.dayTypes || self.dayTypes()));
            self.zones(data.zones || self.zones()));
        };
    };
}; 
```

如果他们真的需要3个单独的电话，你可以分开`getData`，但同样，只有当它们是*真正独立*的电话时才这样做。如果您确实拆分它们，我将遵循使它们在视图模型上起作用的模式。这允许它们在外部被调用，并被视图绑定。可重复使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T18:53:19.700

我同意@Tyrsius 的观点，即您需要将三个请求打包到一个“包装器 API 调用”中以克服延迟问题。

我建议详细说明上述视图模型，以便在内联数据/ ajax 请求数据中更加可重用：

```
function ViewModel(initialData) {
  // setup properties
  this.dayType = ko.observable();
  this.todayTimes = ko.observable();
  this.dayTypes = ko.observable();
  this.zones = ko.observable();

  if (initialData) {
    this.update(initialData);
  }
}

ViewModel.prototype.update = function(data) {
  data.todayTimes && this.todayTimes(data.todayTimes);
  data.dayTypes && this.dayTypes(data.dayTypes);
  data.zones && this.zones(data.zones);
};

ViewModel.prototype.load = function() {
  $.getJSON('/api/timeInfo', this.update.bind(this));
}; 
```

无论如何**，在不幸的情况下，您无法创建包装 API 端点**，但您想在加载所有必要数据时更新 UI，那么您将无法自拔，只能使用异步支持。

jQuery 为您提供了[延迟对象 API](http://api.jquery.com/category/deferred-object/)，但也有提供[并行任务 API](https://github.com/caolan/async#parallel)的 Async 库，在我看来它可以解决您的问题。

# oracle-adf - 为 ADF 查询动态赋值

> ID：11750274
> 
> 赞同：0
> 
> 时间：2012-07-31T23:01:49.157
> 
> 标签：oracle-adf

动态地给查询赋值 这里我们有两个查询
1.select eno,ename,sal,deptno from emp。我们使用这个查询并创建视图对象和

显示在 jsf 页面中，如 eno ename sal
1 aaa bbb
2 ccc ddd
2\. select dname,loc from dept where deptno=:deptno。这里 :deptno 在我们
点击 jsf 页面中的 eno 时出现（它以链接的形式显示）对应记录的 deptno 被分配给第二个查询。点击该链接后 jsf 页面看起来像

```
 eno   ename   sal   
                         1     aaa    bbb 
```

dname:marketing loc: newyork (in form type).here emp,dept 名称仅用于示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:45:44.393

您应该检查查看标准。示例： http: [//www.adftips.com/2010/10/adf-model-programmatically-executing.html](http://www.adftips.com/2010/10/adf-model-programmatically-executing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:03:24.623

这是一个简单的主表详细信息表单用例。如果您在 emp 和 dep 表之间定义视图链接 (emp.deptno = dept.deptno)，则此方法开箱即用。在您的应用程序模块中，您将 dept vo 添加为 emp 表下的子项。

# python - Matplotlib：如何将直方图转换为离散概率质量函数？

> ID：11750276
> 
> 赞同：3
> 
> 时间：2012-07-31T23:02:01.760
> 
> 标签：python, matplotlib, probability, histogram

我对 matplotlib 的 hist() 函数有疑问。

我正在编写代码来绘制值从 0 到 1 不等的数据直方图。例如：

```
values = [0.21, 0.51, 0.41, 0.21, 0.81, 0.99]

bins = np.arange(0, 1.1, 0.1)
a, b, c = plt.hist(values, bins=bins, normed=0)
plt.show() 
```

上面的代码生成了一个正确的直方图（我无法发布图像，因为我没有足够的声誉）。在频率方面，它看起来像：

```
[0 0 2 0 1 1 0 0 1 1] 
```

我想将此输出转换为离散概率质量函数，即对于上面的示例，我想获得以下频率值：

```
[ 0\.  0\.  0.333333333  0\.  0.166666667  0.166666667  0\.  0\.  0.166666667  0.166666667 ] # each item in the previous array divided by 6) 
```

我想我只需要将 hist() 函数中的参数更改为“normed=1”。但是，我得到以下直方图频率：

```
[ 0\.  0\.  3.33333333  0\.  1.66666667  1.66666667  0\.  0\.  1.66666667  1.66666667 ] 
```

这不是我所期望的，我不知道如何获得总和应该为 1.0 的离散概率质量函数。[在以下链接（链接到问题](https://stackoverflow.com/questions/5498008/pylab-histdata-normed-1-normalization-seems-to-work-incorrect)）中提出了类似的问题，但我认为问题没有得到解决。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T08:15:43.087

原因是`norm=True`给出了[概率密度函数](http://en.wikipedia.org/wiki/Probability_density_function)。在概率论中，概率密度函数或**连续**随机变量的密度描述了该随机变量取给定值的相对可能性。

让我们考虑一个非常简单的例子。

```
x=np.arange(0.1,1.1,0.1)
array([ 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1\. ])

# Bin size
bins = np.arange(0.05, 1.15, 0.1)
np.histogram(x,bins=bins,normed=1)[0]
[ 1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.]
np.histogram(x,bins=bins,normed=0)[0]/float(len(x))
[ 0.1,  0.1,  0.1,  0.1,  0.1,  0.1,  0.1,  0.1,  0.1,  0.1]

# Change the bin size
bins = np.arange(0.05, 1.15, 0.2)
np.histogram(x,bins=bins,normed=1)[0]
[ 1.,  1.,  1.,  1.,  1.]
np.histogram(x,bins=bins,normed=0)[0]/float(len(x))
[ 0.2,  0.2,  0.2,  0.2,  0.2] 
```

如上所示，x 位于`[0.05-0.15]`or`[0.15-0.25]`之间的概率，`1/10`而如果将 bin 大小更改为，`0.2`则它位于`[0.05-0.25]`or之间的`[0.25-0.45]`概率`1/5`。现在这些实际概率值取决于 bin 大小，但是，概率密度与 bin 大小无关。因此，这是执行上述操作的唯一正确方法，否则需要在每个图中说明 bin-width。

因此，在您的情况下，如果您真的想绘制每个箱的概率值（而不是概率密度），那么您可以简单地将每个直方图的频率除以总元素的数量。但是，我建议您不要这样做，除非您使用离散变量并且您的每个 bin 都代表该变量的单个可能值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-13T16:58:01.900

从直方图中绘制连续概率函数 (PDF) – 在 Python 中求解。有关详细说明，请参阅此[博客](http://howdoudoittheeasiestway.blogspot.com/2017/09/plotting-continuous-probability.html)。（[http://howdoudoittheeasiestway.blogspot.com/2017/09/plotting-continuous-probability.html](http://howdoudoittheeasiestway.blogspot.com/2017/09/plotting-continuous-probability.html)）否则您可以使用下面的代码。

```
n, bins, patches = plt.hist(A, 40, histtype='bar')
plt.show()
n = n/len(A)
n = np.append(n, 0)
mu = np.mean(n)
sigma = np.std(n)
plt.bar(bins,n, width=(bins[len(bins)-1]-bins[0])/40)
y1= (1/(sigma*np.sqrt(2*np.pi))*np.exp(-(bins - mu)**2 /(2*sigma**2)))*0.03
plt.plot(bins, y1, 'r--', linewidth=2)
plt.show() 
```

# git - 合并和变基远程分支

> ID：11750278
> 
> 赞同：0
> 
> 时间：2012-07-31T23:02:26.613
> 
> 标签：git, git-merge, git-rebase

我有一个本地分支`master`，并跟踪两个远程分支`master`和`dev-me`. 同时，另一个开发人员拥有自己的本地`master`，并跟踪同一个远程`master`和他自己的专用远程分支`dev-other`。

有时，我们每个人都会分别从自己的本地推`master`送到远程开发分支（即`dev-me`或`dev-other`）。然后我们想将我们的远程`dev-x`分支合并到远程`master`分支中。

我正在考虑执行以下操作：

1.  我们中的任何一个都将他的远程分支*合并*`dev-x`到远程`master`分支中。

2.  另一个人*从*这个合并的远程`master`分支变基到他自己的远程`dev-x`分支。

3.  步骤 2) 中的同一个人*合并*回远程`master`分支。

这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:14:33.493

您没有正确使用分支。看看我的帖子，你不应该关注什么 dev 有什么 master 和 main 分支。您应该专注于进行中的分支或功能分支，并使用其他分支来管理它们的集成：

[http://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T23:24:14.243

你把它复杂化了。将 git 中的所有内容都视为本地操作并忽略其他人，并将远程 repo 视为共享存储区域。

听起来（如果我没听错的话）你们每个人都在 master 工作，但同时推动 origin/master 和 origin/dev-something。这可行，但可能会令人困惑。如果您在 master 中工作，请推送到 master。如果您想推送到 dev-something，请在 dev-something**的本地副本中工作**。

听起来你有它，如果你想合并所有远程的东西，这样做：

```
git fetch --all
git checkout master
git merge origin/master origin/dev-me origin/dev-other
[resolve conflicts]
git push origin master:master 
```

如果您决定使用变基，则需要将每个远程分支按顺序变基到 master 上，这虽然为您提供线性历史记录，但并不能真正代表并行开发的现实。另外，您需要决定谁的更改“首先”。

我建议，如果你们每个人都在本地 dev-whatever 分支中工作并专门推送到该分支的上游版本，那会更好。当您想将代码导入 master 时，请检查 master 的本地副本，合并您的本地 dev-whatever 副本，然后将您的本地 master 备份。因此：

```
git checkout dev-whatever
git fetch --all
git merge origin/dev-whatever
[hack hack hack]
git commit -a
git push origin dev-whatever:dev-whatever
[decide you want to integrate what you've got into master]
git checkout master
git merge dev-whatever
git push origin master:master 
```

如果你们两个都这样做，那么你们将各自整合自己的更改。如果您的同事已经推送，您的推送与他/她自己的合并更改，您的推送将失败。不用担心，此时您需要做的就是：

```
 git fetch --all
 git merge origin/master
 [resolve conflicts]
 git push origin master:master 
```

在这种情况下，您可以将 merge 替换为 rebase，只需使用“他得到他们的第一个”方法来决定提交顺序。

# php - JQuery 的 $.post 有时工作有时会返回 403 禁止错误

> ID：11750284
> 
> 赞同：1
> 
> 时间：2012-07-31T23:02:49.910
> 
> 标签：php, jquery, ajax, post

有时我会收到 403 禁止错误，我看不出有什么问题。
这是我的 jQuery 代码：

```
 $.ajax({
        type: 'POST',
        url: './ajax-conf-editc.php',
        data: { conf_id: Id, conf_contenido: data },
        async: false,
        success: function(msg){
            if ( msg == '1' || msg == 1){
                var confname = $('#nameConf').val();
                $.cookie('SUCCESS', 'Se ha guardado el contenido de la configuración "' + confname + '".', { expires : 1, path : '/' });
                $(window.location).attr('href', 'index.php');
            } else {
                $('#conf-editc-form').removeAlertBoxes();
                $('#conf-editc-form').alertBox(msg, {type: 'error'});
            }
        }
    }); 
```

使用此数据可以正常工作：

> conf_id=11&conf_contenido=%2523tabs-0%253CtabContent%253E%253Cp%253EContenido%253C%2Fp%253E%253CtabTitle

但是当我发送这个时，失败并返回一个 403 Forbidden

> conf_id=11&conf_contenido=%2523tabs-0%253CtabContent%253E%253Cp%253E%253Ca%2520onclick%253D%2522javascript%253A%2524%2528%2520%2527%2523tabs%2527%2520%2529.tabs%2528%2529.tabs%2528%2 %257D%2529%253Bscroll%25280%252C0%2529%2522%2520href%253D%2522javascript%253Avoid%25280%2529%253B%2522%253EContenido%253C%2Fa%253E%253C%2Fp%253E%253Ctab3Titletab%253E%253Ctab33 %253E%2523tabs-1%253CtabContent%253E%253Cp%253EContenido%25201%253C%2Fp%253E%253CtabTitle%253Edos

我希望有人可以帮助我并告诉我为什么会这样？

这是我失败时收到的消息：

禁止的

您无权访问此服务器上的 /kidspc2/configuraciones/ajax-conf-editc.php。

此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

编辑： mod_security 可以这样做吗？我怎么查不到？

编辑：我解决了这个问题，在 Base64 中编码 conf_content 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T18:24:43.430

我猜您的 $.ajax 在很短的时间内被多次请求，这就是您收到此 404 错误的原因。您可以通过取消所有以前的 ajax 调用并为最新的 ajax 调用请求进行新的 ajax 调用来修复它。希望这可以帮助。

像下面的代码：

```
 if( this.ajax ){
            this.ajax.abort();
        }
        this.ajax=$.ajax({
        type: 'POST',
        url: './ajax-conf-editc.php',
        data: { conf_id: Id, conf_contenido: data },
        async: false,
        success: function(msg){
        if ( msg == '1' || msg == 1){
            var confname = $('#nameConf').val();
            $.cookie('SUCCESS', 'Se ha guardado el contenido de la configuración "' + confname +        '".', { expires : 1, path : '/' });
            $(window.location).attr('href', 'index.php');
        } else {
            $('#conf-editc-form').removeAlertBoxes();
            $('#conf-editc-form').alertBox(msg, {type: 'error'});
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:08:24.050

尝试删除网址中的点和斜杠

`./ajax-conf-editc.php` 把这个改成这个，`ajax-conf-editc.php`然后告诉我你得到了什么。

# powershell - 警报和检测防火墙活动

> ID：11750285
> 
> 赞同：1
> 
> 时间：2012-07-31T23:02:53.533
> 
> 标签：powershell

有什么方法可以使用 PowerShell 为防火墙活动（即阻止和允许、入站和出站）设置一种监控/警报/捕获？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:48:39.250

我想出了一堆关于 API 的信息来控制防火墙，但并没有真正监控它。PowerShell 可以更广泛地使用 .NET 可以使用的任何东西，我也看过那里。我能想到的最接近的选项可能是启用日志记录并使用日志文件来安装一些乱七八糟的东西。以下是如何启用日志记录的链接：

[http://blink.ucsd.edu/technology/security/firewall/windows7-a.html#4.-Enable-logging-to-view-denie](http://blink.ucsd.edu/technology/security/firewall/windows7-a.html#4.-Enable-logging-to-view-denie)

从那里您将在日志文件上使用 Get-Content ... 并且根据您要执行的操作，您必须解析文本，可能会执行一些操作，然后可能会将其记录到其他存储（ XML 或其他东西）用于处理的事件或将脚本的上次运行时间保存在某处，并将其与日志中事件的日期进行比较。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:25:18.017

这里有关于如何访问 Windows 防火墙的指南。这是 netsh advfirewall 的 Powershell 版本。 [http://technet.microsoft.com/en-us/library/hh831755.aspx](http://technet.microsoft.com/en-us/library/hh831755.aspx)

不确定这是否是您要找的东西？

# vim - 打开文件节点时如何不更改 NerdTree 中的 CWD？

> ID：11750286
> 
> 赞同：2
> 
> 时间：2012-07-31T23:02:53.493
> 
> 标签：vim, vim-plugin

当我打开文件节点时，如何防止 NERDTree 更改 CWD？

我通常打开一个项目文件夹

```
cd apps/project
vim . 
```

当我打开一个文件节点时，我希望 NERDTree 的当前工作目录与 (apps/project) 一起修复。

我试过`:let NERDTreeChDirMode=0`了，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:28:17.030

`let NERDTreeChDirMode=0`应该放在你的 ~/.vimrc.local 中用于 spf13 vim 插件分发，而不是在事后执行。还要确保它不在您的 ~/.vimrc.local 中`acd`。`autochdir`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T09:47:57.773

例如，在新安装时正确执行此操作的方法是将 设置`g_spf13_no_autochdir`为 1，on `.vimrc.before.local`（在加载所有 spf13 之前设置切换）

```
echo let g:spf13_no_autochdir = 1 >> .vimrc.before.local 
```

这将使您无需修改​​ spf13 的配置即可自定义 NERDTree 行为。

# objective-c - 如何在目标 C 中将方法转换为 MACRO

> ID：11750289
> 
> 赞同：0
> 
> 时间：2012-07-31T23:03:06.813
> 
> 标签：objective-c, c, macros

我有这种方法，它基本上将字母添加到数组中的内容中（演示）

```
- (NSMutableArray *) addTheLetterZ:(NSArray *)array {
    NSMutableArray *addedLetterArray = [[NSMutableArray alloc] init];
    [array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        [addedLetterArray addObject:[NSString stringWithFormat:@"%@ Y", obj]];
    }];
    [array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        [addedLetterArray addObject:[NSString stringWithFormat:@"%@ Z", obj]];
    }];
    return addedLetterArray;
} 
```

我有两个疑问：

1.  任何方法都可以转换为宏吗？

2.  将函数转换为宏时，是否有一般的经验法则可以遵循？

    我查看了其他[问题](https://stackoverflow.com/questions/5715021/objective-c-how-to-write-a-macro)，但即使在他们的解决方案中，当我尝试使用 do-loop 解决方案将此方法转换为宏时，我也会遇到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:35:08.187

你是说C宏吗？

```
#define macro_name(array, addedLetterArray, str)                        \
     [(array) enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) { \
        [(addedLetterArray) addObject:[NSString stringWithFormat:(str), obj]]; \
    }];

- (NSMutableArray *) addTheLetterZ:(NSArray *)array {
    NSMutableArray *addedLetterArray = [[NSMutableArray alloc] init];
    macro_name(array, addedLetterArray, @"%@ Y")
    macro_name(array, addedLetterArray, @"%@ Z")
    return addedLetterArray;
} 
```

对？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:35:47.423

您发布的链接是编写多行宏的正确方法。要回答您的问题：

1.  任何数量的代码行都可以转换成一个宏，包括一个方法。宏就像编辑器中的剪切和粘贴。
2.  使用宏有很多陷阱。该参考资料描述了至少 4 种[宏是邪恶的](http://www.parashift.com/c++-faq-lite/inline-vs-macros.html)方式。

如果您遇到问题，最好的方法是发布您对“宏观化”的尝试。

**但是：几乎没有情况应该使用宏来替换函数或方法调用。**大多数时候使用宏是出于错误的原因。例如，如果您正在重复一堆只有几行长的代码，并且您认为将这些行替换为宏而不是函数调用会更有效，那么您通常会出错。现代编译器在确定何时应内联函数方面非常有效，并有效地为您提供了与宏相同的优点而没有缺点。宏没有编译器对类型检查等内容的支持，容易出错，并且更难编写。

我不确定您的想法，但这里有一个来自您自己的代码的示例，说明如何使用函数而不是宏：

```
void AddLetterToArray(NSArray *array, NSMutableArray *addedLetterArray, NSString *aLetter)
{
    [array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        [addedLetterArray addObject:[NSString stringWithFormat:@"%@ %@", obj, aLetter]];
    }];
}

- (NSMutableArray *) addTheLetterZ:(NSArray *)array {
    NSMutableArray *addedLetterArray = [[NSMutableArray alloc] init];
    AddLetterToArray(array, addedLetterArray, @"Y");
    AddLetterToArray(array, addedLetterArray, @"Z");
    // ...
    return addedLetterArray;
} 
```

# perl - perl log db 查询错误到日志文件中

> ID：11750290
> 
> 赞同：1
> 
> 时间：2012-07-31T23:03:13.303
> 
> 标签：perl, dbi

所以我开始熟悉 Perl 并编写了我的第一个 Db 脚本。

现在我正在尝试从巨大的表中选择数据，并尝试根据某些标准插入汇总表。

现在有机会，选择查询可能会失败，或者插入查询可能由于超时或其他我无法控制的数据库问题而失败。

最终我的脚本将成为 cron 脚本。

我可以只记录我遇到的连接错误，插入并选择到脚本中生成的文件吗？

```
$logfile = $path.'logs/$currdate.log'; 
```

这是我的代码：

```
my $SQL_handled="SELECT  division_id,region_id, NVL(COUNT(*),0) FROM super_tab GROUP BY division_id,region_id;";
my $result_handled = $dbh->prepare($SQL_handled);
$result_handled->execute();
while (my ($division_id,$region_id,$count ) = $result_handled->fetchrow_array()){
    my $InsertHandled="INSERT INTO summary_tab (date_hour, division_id, region_id,volume) VALUES ('$current',$division_id,$region_id,$market_id,'$service_type','$handled',$count);";
    my $result_insert_handled = $dbh->prepare($InsertHandled);

    $result_insert_handled->execute();

} 
```

就像是

if(DBI-query failed ) { // 将错误记录到上述日志路径 }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:44:20.377

它通常是这样完成的

```
my $SQL_handled="SELECT  division_id,region_id, NVL(COUNT(*),0) FROM super_tab GROUP BY division_id,region_id;";
my $result_handled = $dbh->prepare($SQL_handled);
my $retval = $result_handled->execute();
if(!$retval){
    #open a log file and write errors 
    writelog();
    die "Error executing SQL SELECT - $dbh->errstr";
}
while(my ($division_id,$region_id,$count ) = $result_handled->fetchrow_array()){....
 }

---------------------------------

sub writelog{
   my $path = "/path/to/logfile";
   my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);
   $year += 1900; 
   $mon++;
   my $currdate = "$mon$mday$year";

   $logfile = $path . "/$currdate.log";
   open (OUT, ">>$logfile");
   print OUT "There was an error encountered while executing SQL- $dbh->errstr \n";
   close(OUT);
} 
```

您还可以使用`$dbh->err;`which 返回本机 Oracle 错误代码来捕获错误并相应地退出。

可以对`execute()`脚本中的每个方法调用执行上述基本异常处理。请记住，默认情况下`DBI`将`AutoCommit`设置为`1`（启用），除非明确禁用。因此，您的事务将在每次插入时自动提交，为了处理`ATOMICITY`整个事务，您可以禁用自动提交并在您想要提交时使用`$dbh->commit`和`$dbh->rollback`处理，或者可能使用一些自定义`commit point`（对于更大的数据集）。

或者可以在连接到数据库时使用以下内容

```
$dbh = DBI->connect( "dbi:Oracle:abcdef", "username", "password" , {
  PrintError => 0,   ### Don't report errors via warn(  )
  RaiseError => 1    ### Do report errors via die(  )
} ); 
```

这将通过自动报告所有错误`die`。默认情况下`RaiseError`通常是关闭的。

另外，如果我对您的理解正确，那么 cron 您的意思是您将从 shell cron 作业中调用它。在这种情况下，从 cron 本身调用 perl 脚本可以重定向到日志文件，如下所示

```
perl your_perl.pl >> out.log 2>> err.log 
```

`out.log`将包含常规日志`err.log`并将包含错误（特别是由 DBI`prepare() or execute()`方法抛出）。在这种情况下，您还需要确保使用适当的措辞`print`或`die`使日志看起来有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:37:19.863

首先，请记住，如果您将电子邮件地址放在 crontab 文件的顶部，则 cron 作业的任何输出都将通过电子邮件发送给您：

```
MAILTO=me@mydomain.com 
```

其次，如果您在连接时将 DBI 的[RaiseError](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#RaiseError)设置为 1，则无需检查每个调用，每当发生错误时，DBI 都会引发错误。

第三，DBI 有一个错误[处理回调](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#HandleError)。您注册一个处理程序，并且每当错误和错误文本等中的句柄发生错误时都会调用它。如果您从错误处理程序返回 false，DBI 将像没有处理程序一样工作并继续死亡或发出警告。因此，设置 RaiseError 和创建错误处理程序比 Annjawn 建议的要容易。

最后，如果您不想自己执行此操作，您可以使用[DBIx::Log4perl 之](http://search.cpan.org/~mjevans/DBIx-Log4perl-0.26/lib/DBIx/Log4perl.pm)类的东西，只需要求它记录错误即可。任何错误都将写入您的 Log4perl 文件，其中包括正在执行的 SQL、参数等。

# javascript - 仅当不包含“.isotope-hidden”时才获取上一个和下一个项目的 id

> ID：11750294
> 
> 赞同：1
> 
> 时间：2012-07-31T23:03:37.633
> 
> 标签：javascript, jquery, jquery-isotope

我正在努力用 jquery isotope 构建一个合适的项目过滤器。如果它们没有被“同位素隐藏”类隐藏，我只想获取上一个和下一个项目的 ID。我怎样才能做到这一点？

```
// Get the id's of previous and next projects
if ( $prev.length !== 0 && $next.length !== 0 ) {
    prev_item_id = $prev.find('.project-link').attr( "data-post_id" );
    next_item_id = $next.find('.project-link').attr( "data-post_id" );
}
else if ( $prev.length !== 0 ) {
    prev_item_id = $prev.find('.project-link').attr( "data-post_id" );
}
else if ( $next.length !== 0 ) {
    next_item_id = $next.find('.project-link').attr( "data-post_id" );
} 
```

* * *

问题是我需要把逻辑放在这里的某个地方。但我不知道如何调整它以排除被同位素隐藏类隐藏的项目。是这样的吗？

```
var post_id = $( this ).attr( "data-post_id" );
        current_post_id = post_id;

        var nonce = $( this ).attr( "data-nonce" );
 var $allitems = $('.project-link').not('isotope-hidden');
        var $prev = $allitems.[data-post_id="' + post_id + '"]' .parent().parent().prev('.portfolio-item');
        var $next = $allitems.[data-post_id="' + post_id + '"]' .parent().parent().next('.portfolio-item'); 
```

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:02:53.827

尝试以下操作：

```
function getHiddenIds($element) {
    return $('.project-link:not(.isotope-hidden)', $element).data('post_id');
}
var prev_item_id = getHiddenIds($prev);
var next_item_id = getHiddenIds($next); 
```

*参考资料*：

*   `:not()`：[http ://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)
*   `.data()`：[http ://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:29:58.580

您可以在分配点击事件之前简单地存储所有项目

```
$items = $('.item'); // to reference methods on all .item divs later 
```

然后在你的同位素逻辑中找到应用了 .isotope-hidden 类的那些

```
$items.find('.isotope-hidden').somemethod('someclass'); // do some stuff with them 
```

如果您有小提琴，则更容易理解您所追求的整体逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:14:14.483

我想这就是你想要的。只需使用[not()](http://api.jquery.com/not/)

```
$prev.find('.project-link').not('.isotope-hidden').attr( "data-post_id" );
$next.find('.project-link').not('.isotope-hidden').attr( "data-post_id" ); 
```

# c - 是否可以在二进制文件而不是整个二进制文件中的某些代码片段上使用 vtune？

> ID：11750297
> 
> 赞同：2
> 
> 时间：2012-07-31T23:03:50.270
> 
> 标签：c, linux, performance, profiling, intel-vtune

我正在将小型库的使用添加到现有的大型软件中，并希望分析（在查找器详细信息中，而不仅仅是 in&out rdtsc() 或 gettimeofday 调用）开销及其对小型库的归属。使用 rdtsc() 之类的东西，我可以了解调用我的库函数所具有的延迟，但我无法进行延迟归因，除非我还能够查看分支是否没有被很好地预测，缓存是否工作不正常等等。我研究了 PAPI，因为我想象着在更大的二进制文件的上下文中查看进出库中例程的某些硬件事件，但似乎我需要一个特定的内核模块才能让 PAPI 为我工作（Linux 2.6\. 18 && Intel Xeon 5570)...有专门为 Intel 处理器设计的 Vtune，但它看起来像

有没有办法让我使用 Vtune 来实现我的目标，或者可能有什么方法可以让我访问这些计数器而无需修补我的内核？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T07:02:27.067

Matias 是对的 - 您可以开始暂停分析（在 VTune-speak 中为“开始暂停”），然后在您的程序中使用 VTune API 中的 __itt_pause / __itt_resume API 将数据收集限制在感兴趣的代码区域。

您可能还想在项目属性中将“目标持续时间类型”设置为“不到一分钟”——这会使采样更加细粒度（10 KHz 而不是默认的 1 KHz 频率）。或者手动调整要收集的事件列表中的 Sample After 值。当您想要分析特定的东西（如预测错误的分支）时，后者通常更有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T00:41:04.420

无法在 vtune 中定义一个入口点来开始录制。

但是，您可以做的是在不记录的情况下启动跟踪，然后当您希望访问您的库时，您启动跟踪并让它记录调用。调用后，您可以再次停止它，现在可以使用 vtune 中的上下选项卡查找库调用。

有了它，您应该能够看到有关通话的所有信息，以及每个通话所花费的时间。

如果您想确保只在调用处于活动状态时进行跟踪，您可以在 gdb 下启动应用程序并在访问和离开您希望检查的函数时插入断点，然后适当地启动和停止分析器。

# spring - 使用 Spring 的 JdbcTempate 进行本机查询

> ID：11750300
> 
> 赞同：2
> 
> 时间：2012-07-31T23:03:55.250
> 
> 标签：spring

我正在使用 spring 的 JdbcDaoSupport 进行数据库调用。我想执行本机查询（sql 查询）来检索数据。JdbcTemplate 中是否有任何 API 可用于本机查询？我使用了 queryForObject，但如果没有数据，它会抛出异常，而我希望它在找不到数据时返回 null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:37:32.510

有许多选项可用于使用[`JdbcTemplate`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html). 链接的文档包含大量采用本机 sql 的方法，通常还有某种回调处理程序，它将完全满足您的要求。一个简单的想到的是[`query(String sql, RowCallbackHandler callback)`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#query%28java.lang.String,%20org.springframework.jdbc.core.RowCallbackHandler%29)。

```
jdbcTemplate.query("select * from mytable where something > 3", new RowCallbackHandler() {
    public void processRow(ResultSet rs) {
        //this will be called for each row.  DO NOT call next() on the ResultSet from in here...
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:35:44.680

Spring JdbcTemplate 的 queryForObject 方法期望您的 SQL 准确返回一行。如果没有返回行或返回的行超过 1 行，则会抛出 org.springframework.dao.IncorrectResultSizeDataAccessException。您必须使用 try catch 块包装对 queryForObject 的调用以处理 IncorrectResultSizeDataAccessException 并在引发异常时返回 null

例如

```
try{
   return jdbcTemplate.queryForObject(...);
}catch(IncorrectResultSizeDataAccessException e){
   return null;
} 
```

# java - 如何检查 Java 程序的文件句柄泄漏？

> ID：11750311
> 
> 赞同：4
> 
> 时间：2012-07-31T23:06:08.077
> 
> 标签：java

我的 java 代码似乎有句柄泄漏，哪个调试工具适合检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-08T00:13:44.410

由于没有给出示例，我添加了我的

```
package org.gradle;

import java.io.File;
import java.io.FileDescriptor;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;
public class FileDescriptorDemoOne {

    static int index_count;
    public static void main(String[] args) throws IOException {
        ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
        exec.scheduleAtFixedRate(new Runnable() {
          public void run() {
              index_count++;
            // do stuff
              File file = new File("/tmp/helloworld.txt");
                FileDescriptor fd;
                FileOutputStream fos1;
                try {
                    fos1 = new FileOutputStream(file);
                    fd = fos1.getFD();
                    //passing FileDescriptor to another  FileOutputStream
                    FileOutputStream fos2 = new FileOutputStream(fd);
                    fos2.write(index_count++);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
          }
        }, 0, 5, TimeUnit.SECONDS);
    }
} 
```

显然，上面的代码每隔几秒就会泄漏文件描述符。

抓住这个用途

> lsof | grep helloworld

```
java       6015 vic    8w     REG                1,4         12 86076888 /private/tmp/helloworld.txt
java       6015 vic    9w     REG                1,4         12 86076888 /private/tmp/helloworld.txt
java       6015 vic   10w     REG                1,4         12 86076888 /private/tmp/helloworld.txt 
```

也可以使用[File Leak Detector](http://file-leak-detector.kohsuke.org/)或[FLD Jenkin Plugin](https://wiki.jenkins-ci.org/display/JENKINS/File+Leak+Detector+Plugin)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T23:09:51.847

lsof 命令将列出与该程序关联的所有文件。

# hadoop - Hive QL - 限制每个项目的行数

> ID：11750312
> 
> 赞同：8
> 
> 时间：2012-07-31T23:06:09.733
> 
> 标签：hadoop, hql, hive, hiveql

如果我在 where 子句中列出了多个项目，如何将列表中每个项目的结果限制为 N？

前任：

```
select a_id,b,c, count(*), as sumrequests
from table_name
where
a_id in (1,2,3)
group by a_id,b,c
limit 10000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-06T05:05:05.070

听起来你的问题是每个 a_id 获得前 N 个。您可以使用 Hive 11 中引入的窗口函数来执行此操作。例如：

```
SELECT a_id, b, c, count(*) as sumrequests
FROM (
    SELECT a_id, b, c, row_number() over (Partition BY a_id) as row
    FROM table_name
    ) rs
WHERE row <= 10000
AND a_id in (1, 2, 3)
GROUP BY a_id, b, c; 
```

这将为每个 a_id 输出多达 10,000 个随机选择的行。如果您希望不仅仅按 a_id 进行分组，则可以进一步对其进行分区。您还可以在窗口函数中使用 order by，有很多示例可以显示其他选项。

# nsis - NSIS：找到链接的目标

> ID：11750315
> 
> 赞同：0
> 
> 时间：2012-07-31T23:06:38.633
> 
> 标签：nsis, shortcut

有没有办法使用 NSIS 检查链接的目标是什么？

[我想检查和更新桌面上的链接，但我很难检查它们是否属于我的应用程序，因为名称可能包含空格或其他东西，所以它可能不一样......

我还想删除不再使用的链接，指向我的文件夹。

所以...我想看看目标，但找不到任何给我的东西。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:01:43.820

您可以尝试使用[ShellLink 插件](http://nsis.sourceforge.net/ShellLink_plug-in)或直接使用系统插件调用 IShellLink+IPersistFile COM 接口，但通常卸载程序/更新程序只会处理它创建的快捷方式，而不是用户可能创建/重命名的内容......

# c# - 使用 Entity Framework 4 如何过滤引用的实体集合

> ID：11750318
> 
> 赞同：1
> 
> 时间：2012-07-31T23:07:13.613
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我正在使用带有 C# 的实体框架 4。我有`Contact`具有引用实体集合的对象`Addresses`。因此，一个人`Contact`可以拥有多个`Address`实体。我想要做的是将返回的`Addresses`与 a 关联的过滤器`Contact`仅来自多伦多市。

这是我正在使用的 LINQ 查询，但`Addresses`只要至少有一个，它就会返回所有`City == "Toronto"`. 我想将`Address`返回的实体限制为仅包含`Address`具有`City == "Toronto"`. 如何构建 LINQ 查询来执行此操作？

```
var vcontact = from c in context.Contacts
               orderby c.LastName
               where c.Addresses.Any(a => a.City == "Toronto")
               select c; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T23:14:10.427

```
var vcontact = from c in context.Contacts
               orderby c.LastName
               where c.Addresses.Any(a => a.City == "Toronto")
               select new Contact
               {
                   LastName = c.LastName;
                   // map all remaining properties of Contact
                   Addresses = c.Addresses.Where(a => a.City == "Toronto")
               }; 
```

# .net - 如何在不重新安装的情况下更新 Visual Basic 应用程序

> ID：11750321
> 
> 赞同：0
> 
> 时间：2012-07-31T23:07:22.757
> 
> 标签：.net, vb.net, installation, updates, uninstallation

我有一个简单的表单，点击时带有一个按钮说你好。

代码如下：

```
Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    MsgBox("hello")

End Sub 
```

结束类

我将它安装在我的机器上，现在我想知道如何在不重新安装整个东西的情况下对其进行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:36:13.513

您可以推出自己的更新程序应用程序，它会在 ftp 站点/网站上检查更新的文件。但它必须是一个单独的应用程序，因为如果不先停止它，您将无法更新当前正在运行的 exe。此外，文件的位置可能是一个问题，具体取决于权限等。

HansPassant 建议的更好选择是使用 ClickOnce 部署。这将为您处理上述所有内容，并允许您强制应用程序在运行之前检查更新，以便您知道您拥有最新版本。

[这是一个](http://msdn.microsoft.com/en-US/library/t71a733d%28v=vs.100%29.aspx)让你开始的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:28:21.837

如果您知道更新对各种环境没有问题（例如：框架、数据库等没有变化）并且您只是在“受控”的地方进行测试和工作，那么您可以简单地替换可执行文件。

但我当然更喜欢 ClickOnce :-)

一旦你设置它，它就会运行得非常好，以至于更新应用程序的时间只是比替换可执行文件多一点......而且你更安全

# php - PHP/PDO 奇怪的请求

> ID：11750322
> 
> 赞同：0
> 
> 时间：2012-07-31T23:07:25.847
> 
> 标签：php, mysql, database, pdo, database-connection

我想做一个 PDO 请求，该请求将从 2 个不同的表中获取信息，但事情很快变得困难，我解释说：

我有一个像这样组织的第一个数据库表（花）（但它确实比我向您展示的要大）：

```
ID;       name;              price of format 1; price of format 2; name of other format 3; price of other format 3;
FLOW0001; big yellow flower; ;                  15,99;             more big format;        34,99; 
FLOW0002; little red flower; 5,99;              8,99;              ;                       ; 
```

……就这样继续……

第二个表（树）是这样的：

```
ID;       name;            name of format;  price of format;
TREE0001; OMG BIG TREE !;  F*** big format; 599,99; 
TREE0001; OMG BIG TREE !;  F*** even bigger format; 899,99; 
TREE0002; litte ugly tree; little format;   20,99; 
```

……就这样继续……

问题是我想“合并”这两个表，并将它们显示在这样的页面中：

```
while ($datas =$response->fetch()) //fetching the tables, they will be togheter and ordered by (their biggest) price. So, trees and flowers will blend. 
{
    // then echo the fetched datas. I will need to separate the prices and show them... some if/else based on pregmatches of the ID to know if it's an TREE or FLOW. 
} 
```

如何混合这个？我没有想法。最糟糕的是，我需要做一个页面系统（每页 50 个）。在页面系统和页面中，所有重复的树都需要显示为唯一的树......帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:11:50.660

您可以使用 a`union`从两个表中获取数据。只要确保您在两个查询中都返回匹配的列。因此，如果在您的第​​一个查询中您有以下数据类型`int, text, varchar, decimal, decimal`，您将需要确保第二个查询获得相同的列类型，否则数据库将对它有一个 hissyfit。您可以在末尾使用 order by 子句对来自两个查询的数据进行很好的排序。

这样的事情应该可以解决问题：

```
select
    ID,
    name,
    price
from
    flowers
where
    // your clauses
union   
select
    ID,
    name,
    price
from
    trees
where
    // your clauses
order by 3 desc 
```

编辑：`group_concat()`如果需要，您可以在其中输入字段，是的，您可以`explode()`在 PHP 中对它们进行操作。默认的 group_concat 分隔符是 ,（逗号），因此如果您的字段中有逗号，您需要将其更改为某些内容，以便您的分解工作正常。

# java - Oracle 修改后的 MVC 示例中的静态属性值是否破坏了预期的解耦？

> ID：11750324
> 
> 赞同：0
> 
> 时间：2012-07-31T23:07:38.510
> 
> 标签：java, model-view-controller, properties, static, decoupling

我一直在关注 Oracle 在本文中提出的修改后的模型视图控制器示例。[使用 MVC 的 Java SE 应用程序设计](http://www.oracle.com/technetwork/articles/javase/index-142890.html)

在此示例中，DefaultController 类声明属性名称字符串，如下所示：

```
public static final String ELEMENT_TEXT_PROPERTY = "Text"; 
```

这些字符串在多个地方使用。

**在控制器中：**

AbstractController 使用反射在其模型中搜索名为 set+propertyName 的方法。

**在模型中：**

该模型具有调用此方法的 setter 方法：

```
firePropertyChange(Controller.NAME_PROPERTY, oldName, name); 
```

**在视图中：**

在 modelPropertyChange 方法中，

```
if(evt.getPropertyName().equals(Controller.NAME_PROPERTY) 
```

我关心的部分是模型引用了控制器的静态字段。我仍在尝试掌握 MVC，但我不确定此架构是否实现了 MVC 用于所需的解耦。所有三个类都引用控制器的静态字段是否重要？

**编辑：** 本教程中描述的架构（如编码）是否是 MVC 的无效表示？如果是这样，是否可以对其进行更改，以使模型/（模型层）不依赖于 DefaultController 类中定义的静态属性名称？

我意识到这篇文章“只是一个教程”，但是如果其中提供的代码没有反映所声称的解耦，我认为社区应该停止将它作为 MVC 的示例来引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:54:57.593

我不是 Java（甚至不是桌面应用程序）开发人员，所以对这一切持保留态度。

首先，`static`任何代码中的字段都代表一个全局状态，这完全违背了面向对象代码中的任何做法。

至于你的担心，教程中的代码违反了 SoC，你是对的。但话又说回来，它的目的是作为一个基本教程，而不是太高级的东西。目标是展示 MVC 三元组的各个部分，并至少对它们如何交互以及主要职责是什么进行表面理解。它并不意味着在生产代码中复制粘贴。

一旦清楚的迹象表明，此代码中存在一个“模型对象”。在现实世界中，情况模型将是一个层。

如果你想对 MVC 有更广泛的了解，我可以推荐三本阅读材料：

*   [企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)
*   [Smalltalk-80系统中模型-视图-控制器用户界面范式的描述](http://www.itu.dk/courses/VOP/E2005/VOP2005E/8_mvc_krasner_and_pope.pdf)
*   [图形用户界面架构](http://martinfowler.com/eaaDev/uiArchs.html)

# python - 我的代码运行不正常，那里有什么问题？

> ID：11750333
> 
> 赞同：0
> 
> 时间：2012-07-31T23:08:29.313
> 
> 标签：python, list, python-2.7

```
hand = ['A','Q']
points = 0
player_cards1 = ['2']
value1 = 2
player_cards2 = ['3']
value2 = 3
player_cards3 = ['4']
value3 = 4
player_cards4 = ['5']
value4 = 5
player_cards5 = ['6']
value5 = 6
player_cards6 = ['7']
value6 = 7
player_cards7 = ['8']
value7 = 8
player_cards8 = ['9']
value8 = 9
player_cards9 = ['T']
value9 = 10
player_cards10 = ['Q']
value10 = 10
player_cards11 = ['K']
value11 = 10
player_cards12 = ['J']
value12 = 10
ACE11 = ['A']
value13 = 11

for hand in player_cards1:
    flag = True
    if flag == True:
        points = points + value1
    for hand in ACE11:
        flag = True
        if flag == True:
            points = points + value13
        for hand in player_cards2:
            flag = True
            if flag == True:
                points = points + value2
            for hand in player_cards3:
                flag = True
                if flag == True:
                    points = points + value3
                for hand in player_cards4:
                    flag = True
                    if flag == True:
                        points = points + value4
                    for hand in player_cards5:
                        flag = True
                        if flag == True:
                            points = points + value5
                        for hand in player_cards6:
                            flag = True
                            if flag == True:
                                points = points + value6
                            for hand in player_cards7:
                                flag = True
                                if flag == True:
                                    points = points + value7
                                for hand in player_cards8:
                                    flag = True
                                    if flag == True:
                                        points = points + value8
                                    for hand in player_cards9:
                                        flag = True
                                        if flag == True:
                                            points = points + value9
                                        for hand in player_cards10:
                                            flag = True
                                            if flag == True:
                                                points = points + value10
                                            for hand in player_cards11:
                                                flag = True
                                                if flag == True:
                                                    points = points + value11
                                                for hand in player_cards12:
                                                    flag = True
                                                    if flag == True:
                                                        points = points + value12
                                                    print points 
```

它在前五个街区运行良好，然后它只给了我整个甲板的总价值（95）。我该如何解决？它应该只给我手牌的价值。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T23:24:11.813

您的线路：

```
for hand in player_cards1: 
```

可能没有做你期望它做的事情。看起来您认为它将比较 hand 和 player_cards1；相反，它所做的是在 player_cards1 上创建一个迭代器，您可以通过变量 hand 访问该迭代器（这意味着该手被重新分配，并且将不再是 ['A', 'Q']）。这是一个更简单的例子：

```
a = [1,2,3]
for item in a: //creates an iterator around a, with the variable item to refer to each list member
  print item 
```

该三行程序将输出：

```
1
2
3 
```

相反，您可能想要遍历手中的牌，例如：

```
for card in hand:
  //code here to look up the value of the card and add it to a running total 
```

我还建议重新考虑跟踪卡值的方式，因为它会非常麻烦。. . 提示：只有少数特殊情况是不能使用卡面值的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:15:45.080

**编辑以使答案更具教学性。**

使用 a[`dict`](http://docs.python.org/library/stdtypes.html#dict)存储每张卡片的分数。

```
card_points = { 'A': 11, '2': 2, ... } 
```

然后你可以遍历每个`card`in `hard`，在字典中查找它的值，然后将分数相加得到总数。

您可能想查看[`sum`](http://docs.python.org/library/functions.html#sum)此处可能有用的功能。

# ms-access - MS-Access 隐藏报表中的行

> ID：11750337
> 
> 赞同：0
> 
> 时间：2012-07-31T23:08:56.250
> 
> 标签：ms-access, ms-access-2007, vba

我正在尝试使用报告打印出带有姓名和唯一 ID 的用户列表。我正在使用的数据库的关键是有一个“活动”字段表示该用户是否仍在积极使用该服务。对于用户不活跃的情况，我想从报告中省略它们。

到目前为止，我已经尝试在遇到标志时将字段的值设置为 Null，但这会留下空白，这会使表单看起来稀疏并浪费空间。

我还尝试在 VBA 中将适当的 Visible 字段设置为 False，但到目前为止，我只能使任一列或整个报告消失。有什么办法可以使代表单个用户条目的行不可见？

这是我的 VBA 代码，相当简单，我只需要找出正确的项目放置在“隐藏行”的行中

注意：[Active] 链接到表单上的隐藏数据字段，该字段链接到我的表，告诉用户是否是活跃用户

`Private Sub Detail_Format(Cancel As Integer, FormatCount As Integer)`

 ````
If [Active] = False Then
    'Hide Row
End If 
```` 

`End Sub`

提前致谢！

-dbriggs

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:14:44.143

表单不是输出的最佳选择。创建排除相关行的查询并使用它来创建报告。

还可以基于所有记录创建报告，并使用带有[OpenReport的 where 语句](http://msdn.microsoft.com/en-us/library/office/bb238032%28v=office.12%29.aspx)

```
DoCmd.OpenReport "ReportName", acViewPreview, , "Active=True" 
```

# ruby - IO:Class (NoMethodError) 的 Ruby 未定义方法“binwrite”

> ID：11750338
> 
> 赞同：0
> 
> 时间：2012-07-31T23:09:00.757
> 
> 标签：ruby, file, io, nomethoderror

最近我在下面的代码行中遇到了一个非常奇怪的错误：

```
IO.binwrite(attachmentUploadFile, attachmentFileContent) 
```

这是完整的错误消息：

```
import.rb:326:in `block (3 levels) in <main>': undefined method `binwrite' for IO:Class (NoMethodError)
from /Users/juuro/.rvm/gems/ruby-1.9.2-p290/gems/zippy-0.2.1/lib/zippy.rb:144:in `open'
from import.rb:321:in `block (2 levels) in <main>'
from import.rb:320:in `each'
from import.rb:320:in `block in <main>'
from import.rb:167:in `each'
from import.rb:167:in `<main>' 
```

它之前完美运行。我的配置中没有任何更改。[我知道](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-binwrite)IO:Class 有一个方法“binwrite”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:24:43.147

我怀疑您环境中的 Ruby 解释器不是您期望的版本。

您已链接到支持 binwrite() 方法的 1.9.3 文档，但如果我查看错误消息中的路径，我会看到 1.9.2 版本，并且看起来 1.9.2 不支持[该方法](http://www.ruby-doc.org/core-1.9.2/IO.html#method-c-binwrite)从我所看到的。也许问你的 Ruby 解释器它是什么版本并在必要时升级？

# c# - 带有asp.net的jquery ajax无法正常工作

> ID：11750339
> 
> 赞同：6
> 
> 时间：2012-07-31T23:09:01.760
> 
> 标签：c#, jquery, asp.net, ajax, c#-2.0

我要拔掉我剩下的头发，所以如果你知道问题可能是什么，请帮助我......谢谢。我所有的谷歌搜索也没有得到回报。

首先，我使用 jquery-1.7.2.min.js 和 ASP.net 2.0 web 表单。

我正在尝试使用 jquery 进行 ajax 调用，但不断收到语法错误/解析错误消息。我尝试了许多不同的方法，但是当我将 dataType 设置为 json 时，它们都会导致错误。

这是我所拥有的：

```
$.ajax({
    type: "POST",
    url: "UserList.aspx/GetTestJson",
    data: {}, //have also tried "{}" and other options such as removing the line
    contentType: "application/json;charset=utf-8",
    dataType: "json",
    success: function(data, textStatus, jqXHR){
        alert('success');
    },
    //Using below instead of above makes no difference either
    //success: function(data){
    //  alert('success');
    //},
    error: function(jqXHR, textStatus, errorThrown){
        alert('errorThrown: ' + errorThrown);
    }
}); 
```

和aspx页面方法：

```
[WebMethod]
public static string GetTestJson()
{
    return "Hello My World";
} 
```

我也尝试过设置 Web 服务，但得到相同的结果。返回的响应似乎是页面的完整 html 或来自 Web 服务的 xml，因为我将 dataType 设置为 json，所以无法成功解析它。如果是这种情况，**如何将响应设置为仅返回 json？**

这是我在没有运气的情况下尝试过的其他东西：

```
[WebMethod]
public static string GetTestJson()
{
    HttpContext.Current.Response.ContentType = "application/json";
    string json = JavaScriptConvert.SerializeObject("Hello My World");
    return json;
} 
```

我通过 jQuery 收到的错误消息：

```
errorThrown.message = "Syntax error"
errorThrown.number = -2146827286
errorThrown.name = "SyntaxError"
textStatus = "parseerror"
jqXHR.status = 200
jqXHR.statusText = "OK"
jqXHR.readyState = 4
jqXHR.responseText = (the complete html of the page) 
```

有什么想法或建议吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T22:56:07.120

感谢@DaveWard 和@CodeRoller 的帮助，导致了这个解决方案：

1.  安装 ASP.NET Ajax 扩展（[这里](http://www.microsoft.com/en-us/download/details.aspx?id=883)）
2.  添加对 System.Web.Extensions.dll 的引用
3.  修改 web.config 以包含 ScriptModule httpModule（见下文）

我的 jQuery ajax 调用和 WebMethod 仍然和我原来的帖子一样。

我的 web.config 已修改如下：

```
 <system.web>
    <compilation debug="true">
      <assemblies>
        <!-- A bunch of other assemblies here-->
        <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Web.Extensions.Design, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </assemblies>
    </compilation>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </httpModules>
  </system.web> 
```

我希望其他人会发现这很有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-13T18:47:45.177

你应该在里面调用一个函数`PageLoad Function`

```
If(!Page.IsPostback){
   ...
} 
```

# c++ - 数组声明和大小初始化 (C++)

> ID：11750347
> 
> 赞同：1
> 
> 时间：2012-07-31T23:10:11.117
> 
> 标签：c++, arrays, header, size, declaration

我不确定如何提出这个问题，所以我将从一些示例代码开始：

```
//header file
class A
{
public:
    A();
private:
    int x;
    std::string arr[x];
}

//cpp file

class A
{
public:
    A()
    {
     /*code to get the value of x from a cmd call*/
    }
} 
```

此代码有效吗？更具体地说，我可以让我的头文件中的字符串数组的大小为 x，即使在创建 A 对象之前没有专门给 x 赋值？

如果这不起作用，我唯一的选择是使用动态分配的数组吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T23:12:13.720

代码无效。您应该改用向量。

```
class A
{
public:
    A();
private:
    int x;
    std::vector<std::string> arr;
};

A::A () : x(command_gets_x()), arr(x) {} 
```

由于`arr`正在由 的值初始化`x`，因此构造函数仅在 in 之前起作用（`x`就像在您的定义中一样）。但是，如果 的唯一目的是跟踪数组的大小，则没有必要，因为 a具有该方法。`arr``A``x``vector``size()`

```
class A
{
public:
    A() : arr(command_gets_x()) {}
    int x () const { return arr.size(); }
    //...
private:
    std::vector<std::string> arr;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T23:12:45.410

这是无效的。数组大小必须是常量表达式。是的，您必须使用动态分配，但不一定直接使用。您可以只使用 std::vector。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T23:12:36.237

不，这是不可能的，因为 C++ 没有可变长度数组，而且数组大小必须是编译时间常数。

您可以在构造函数中使用 分配一个数组`new`，或者更好地使用 a `std::vector`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T23:14:57.710

不，您不能使用非常量表达式初始化数组。这将起作用，并且接近您的初衷：

```
class A
{
   ...
   const int x = 3;
   std::string arr[x];
}; 
```

在 .cpp 文件中：

```
int A::x; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T23:54:58.693

我发现在我的 Mac 上，在 x-code 中我可以执行以下操作

```
int x = foo() // get some value for x at runtime
int array[ x ]; 
```

但这太不酷了！！我昨天刚读到一些编译器允许在堆栈上进行动态分配，但我建议您远离这一点。

如果直到运行时才知道 x 的值，那么直到运行时才能分配大小为 x 的数组。想想编译器做了什么：如果我们不知道 x 有多大，可以分配一个大小为 x 的数组吗？唯一剩下的选择是在运行时分配（也就是动态分配）。

# java - 格式标志转换不匹配异常

> ID：11750349
> 
> 赞同：9
> 
> 时间：2012-07-31T23:10:18.157
> 
> 标签：java, android

嗨，希望这符合成为一个写得很好的问题的标准。我是编程新手，我一直在尝试在 android 上为登山者编写一个应用程序，根据他们当前的训练能力告诉用户他们应该攀登什么。该应用程序要求用户输入他们的攀爬能力和墙壁的长度。

我已经为此设置了一个首选项菜单`SharedPrefences`，其中包含一个数字编辑文本字段和一个列表。最初我有一个类转换异常，因为我试图将编辑文本中的字符串用作浮点/双精度/整数（我尝试了所有三个！）。

我已经将字符串转换为 double 使用`Double = Double.valueof(StringFromPrefernce)` 它解决了该错误，但现在产生了`java.util.FormatFlagsConversionMismatchException: %o does not support ' '`我无法找到解决方案的错误。

该应用程序允许用户最初访问首选项菜单，但是一旦他们设置了一些值，任何访问首选项菜单的尝试都会产生这种强制关闭。

解决方案：

在我的preferences.xml 中，我引用了一个字符串。该字符串包含一个 % 符号，它负责强制关闭。删除 % 符号解决了这个问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-28T07:21:10.817

似乎是 Android 4 中的一个变化。将字符串中的 % 符号加倍似乎有效 - % 现在似乎是一个转义字符，因此使用 %% 进行自我转义对我来说是这样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-29T10:19:04.183

解决方案：

在我的preferences.xml 中，我引用了一个字符串。该字符串包含一个 % 符号，它负责强制关闭。删除 % 符号解决了这个问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-10T05:53:26.997

我得到这个是因为我正在使用一个工具来进行自动翻译。它被放入`% s`而不是`%s`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-01T04:42:42.490

你需要`formatted="false"`在你的字符串中添加属性

请参阅[Android XML 百分比符号](https://stackoverflow.com/questions/4414389/android-xml-percent-symbol)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T23:32:49.173

尝试修剪输入字符串：

```
Double d = Double.valueof(StringFromPrefernce.trim()); 
```

这应该从字符串的开头和结尾删除不必要的空格。此外，最好用 try/catch 包围您的呼叫，以避免无效输入：

```
Double d = 0;
try
{
    d = Double.valueof(StringFromPrefernce.trim());
}
catch(NumberFormatException e)
{
    e.printStackTrace(); 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-28T13:58:02.503

根据 RominaLiuzzi 的评论。您不需要删除 %。你可以用 %% 逃避它

# java - 轻松将列表中的值作为参数传递给方法

> ID：11750350
> 
> 赞同：0
> 
> 时间：2012-07-31T23:10:29.490
> 
> 标签：java

是否有任何简单的方法可以将任意长度列表中的所有值作为参数传递给方法。例如，在下面的代码中，我希望 method2 中的参数是位于参数列表中的值序列（但没有列表结构）。因为列表是任意长度的，所以我不能只运行一个循环并将列表中的每个值分配给一个变量，然后将这些变量传递给方法 2。

```
void method1( List<Double> params ){
    void method2(params...)
} 
```

谢谢！〜瑞安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:14:16.013

你可以声明

```
public void method2(Double... doubles) {
} 
```

有关详细信息，请参阅[Java 可变参数文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:34:36.833

要使 method2 能够接收可变数量的参数，您需要以这种方式声明它：

```
void method2(Double ... args) 
```

在这种情况下，args 将是一个 Double[]。

在method1中你需要做的就是将你的List转换成一个Double[]。

这是一个示例：

```
public static void main(String[] args) {

    List<Double> list = new ArrayList<Double>();

    list.add(1.0);
    list.add(2.0);
    list.add(3.0);

    method1(list);
}

public static void method1(List<Double> list) {
    method2(list.toArray(new Double[] {}));
}

public static void method2(Double... args) {

    for (int i = 0; i < args.length; i++) {
        System.out.println(args[i]);
    }
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:16:37.383

这条路怎么样？

```
void method1(Double... params ){
    method2(Arrays.asList(params));
} 
```

这将允许您执行以下操作

```
method1(1.0);
method1(1.0, 2.0);
method1(1.0, 2.0, 3.0);
method1(1.0, 2.0, 3.0, 4.0); 
```

# php - 从 PHP 表单进程触发 JS

> ID：11750351
> 
> 赞同：0
> 
> 时间：2012-07-31T23:10:36.083
> 
> 标签：php, javascript, forms, events, analytics

我有表格，假设它在 index.php 上。在提交时，它会通过 process.php，然后在thanks.php 上完成。我想触发一个分析事件，以便跟踪我的表单（不，我不想使用 URL 目标）。如果我将事件代码放在thanks.php 上，我担心如果人们刷新页面，它会重新触发并给我带来不好的结果。所以，我希望它以某种方式从 process.php 触发。在 process.php 的末尾，我将标题设置为：

```
header('Location: /thanks.php'); 
```

这是触发事件的代码：

```
_gaq.push(['_trackEvent', 'ClaimDomain', 'ConfirmationPage']); 
```

是否有某种方法可以将 JavaScript 调用与标头一起发送，以便仅在我们离开 process.php 时处理它，而不是在我们刷新thanks.php 时处理？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:19:30.253

并非如此，PHP 是服务器端，Javascript 是客户端。

不过，从阅读这方面的内容来看，这听起来可能不是问题：

> **唯一事件由唯一操作递增**
> 
> 每当用户与标有特定操作名称的对象交互时，初始交互都会被记录为该操作名称的唯一事件。与该用户会话的相同操作触发器的任何其他交互都不会影响该特定操作的唯一事件计算。即使用户离开该对象并开始与通过相同操作名称标记的另一个对象交互也是如此。

来源：[事件跟踪器指南 - 操作](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Actions)。

所以 GA 会知道他们是否碰巧两次登陆页面，这不会算作 2 个独特事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:27:27.740

根据我上面的评论和@drew 的研究，这不是问题。

如果您还想跟踪目标。使用“头部匹配”来做到这一点。

[http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=72285](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=72285)

# sql-server - 为什么使用参数时ssrs 2005报告需要很长时间才能执行？

> ID：11750352
> 
> 赞同：0
> 
> 时间：2012-07-31T23:10:43.003
> 
> 标签：sql-server, reporting-services, reportingservices-2005

我正在尝试执行一份 SSRS 2005 报告。该报告采用一个参数。如果我不使用参数并直接写入值，那么它将在 10 秒内运行。例如。

```
Select * from table1 where id = 122 
```

如果我使用参数，则需要很长时间，例如 10 到 15 分钟

```
Select * from table1 where id = @id 
```

我不知道为什么会发生这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T19:27:16.303

1）尝试用连接逻辑替换您的子查询。尽量做到最好。我知道很多时候子查询感觉更合乎逻辑，因为当我们在宏观视图中思考[这个结果集]得到[那个结果集]时，它使问题流过。2）也可以放索引。而且由于它的 int 会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:01:25.163

不可能回答所问的问题：只有*您*有信息来确定为什么事情表现不佳。

然而，我们可以做的是回答“如何调查 SSRS 性能问题？”这个问题。到目前为止，我发现的最好的工具之一是使用 ReportServer 目录数据库中的[ExecutionLog2 视图](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)。在您的情况下，要查看的重要列：

*   TimeDataRetrieval，用于连接到数据源和检索数据行所花费的时间
*   TimeProcessing，用于将数据行转换为报告所花费的时间
*   TimeRendering，用于创建最终输出（pdf、html、excel 等）所花费的时间

这将为您提供进一步调查的起点。最有可能（根据您的描述）我猜问题出在第一位。一个合适的后续步骤是分析 SSRS 执行的查询，可能使用执行计划。

# css - 在 div 之间添加边距

> ID：11750358
> 
> 赞同：1
> 
> 时间：2012-07-31T23:11:30.553
> 
> 标签：css

我想在页面中心创建大按钮样式的 div，并且在大多数情况下，它正在工作。唯一的问题是我希望它们之间有一些空间，但我似乎无法让它发挥作用。下面是我的CSS。我所做的是创建 1 个名为 Wrapper 的 div，然后在里面再创建 2 个 div，一个称为 topleft，另一个是 topright。在这个阶段，只有这 2 个 div，但是（以及内部 div 被称为顶部的原因）我可能想在同一行或稍后的下一行添加其他 div。

我一直在阅读保证金是这样做的方法，但它不适用于我现有的代码。是因为我已经在 WRAPPER 中使用它以使它们居中吗？我在让它按照我想要的方式对齐时遇到了一些麻烦，它看起来确实像我想要的那样，但我怀疑我的问题是因为如果这有意义的话，我可能会错误地将它们居中和对齐？

基本上，我的问题是如何在 topleft 和 topright 之间获得一些空间？

```
.wrapper {
    margin: 0 auto;
    width:600px;
}
.topleft {
    height: 200px;
    width: 300px;
    vertical-align: middle;
    display: table-cell;
    border-radius: 15px;
    background-color: rgb(0,178,219);
}
.topright {
    height: 200px;
    width: 300px;
    vertical-align: middle;
    display: table-cell;
    border-radius: 15px;
    background-color: rgb(134,197,73);
} 
```

我的 HTML 很简单：

```
<div class="wrapper">
  <div class="topleft"> <a href="energy.html">ENERGY</a> </div>
  <div class="topright"> <a href="minerals.html">MINERALS</a> </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:16:52.003

看看这个 jsfiddle

[http://jsfiddle.net/peter/YmKc4/](http://jsfiddle.net/peter/YmKc4/)

更新的 CSS

```
.wrapper {
    margin: 0 auto;
    width:600px;
}
.topleft {
    height: 200px;
    width: 280px;
    border-radius: 15px;
    background-color: rgb(0,178,219);
    float:left;
    line-height:200px;
    margin:0 5px 0;
}
.topright {
    height: 200px;
    width: 280px;
    border-radius: 15px;
    background-color: rgb(134,197,73);
    float:left;
    line-height:200px;
    margin:0 5px 0;
}​ 
```

当您将 a 设置`line-height`为与 div 相同的高度时，它将使内容垂直居中。我认为将 div 向左浮动比将其显示设置为表格单元要好一些。设置边距以考虑两边的边距像素时，您还需要减小宽度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:15:20.597

你的“包装”div 是 600px，每个内部 div 是 300px。这样就没有空间了？

# javascript - 来自 URL 的对象 ID

> ID：11750360
> 
> 赞同：0
> 
> 时间：2012-07-31T23:11:41.447
> 
> 标签：javascript, facebook-graph-api, facebook-comments

我正在尝试从 URL 获取 Facebook 对象 ID，以便向该对象发布评论。object_url 表上的以下 FQL 查询给出了错误的 ID：

```
SELECT id FROM object_url WHERE url="http://wonderwall.msn.com/music/bret-michaels-kristi-gibson-call-off-engagement-1696257.story" 
```

[http://graph.facebook.com/fql?q=select%20id%20from%20object_url%20where%20url%20%3D%20%22http%3A%2F%2Fwonderwall.msn.com%2Fmusic%2Fbret-michaels- Kristi-gibson-call-off-engagement-1696257.story%22](http://graph.facebook.com/fql?q=select%20id%20from%20object_url%20where%20url%20%3D%20%22http%3A%2F%2Fwonderwall.msn.com%2Fmusic%2Fbret-michaels-kristi-gibson-call-off-engagement-1696257.story%22)

即10151964793305004

从 paging.next 下给出的评论提要中可以看到正确的 ID：[http ://graph.facebook.com/comments?id=http%3A%2F%2Fwonderwall.msn.com%2Fmusic%2Fbret-michaels-kristi-吉布森-call-off-engagement-1696257.story](http://graph.facebook.com/comments?id=http%3A%2F%2Fwonderwall.msn.com%2Fmusic%2Fbret-michaels-kristi-gibson-call-off-engagement-1696257.story)

即10151964793330004

我需要数字 id 才能对此页面发表评论，但我不能简单地从第二个链接中获取它，因为如果没有评论，它将不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:34:24.337

事实证明，由于某种原因，facebook`comments_fbid`在`link_stat`表中调用了一个单独的“comments id”，所以第一个查询应该是这样的：

```
SELECT comments_fbid FROM link_stat WHERE url="http://wonderwall.msn.com/music/bret-michaels-kristi-gibson-call-off-engagement-1696257.story" 
```

# c# - 如何检查用户是否已经登录？

> ID：11750361
> 
> 赞同：4
> 
> 时间：2012-07-31T23:11:43.110
> 
> 标签：c#, asp.net, authentication, web-applications, login

我有一个 ASP.NET 站点。我想禁止用户从两台计算机上使用相同的登录名登录。如果有人登录并且其他人想使用相同的登录名登录，它应该向他显示该用户已经登录的消息。我没有任何表单身份验证或类似的东西。在“登录”按钮上，我只是连接到数据库并检查用户和密码是否有效。

我认为当用户登录时，我会更新他在数据库中的状态，当其他人尝试登录时，如果该用户已经登录，我会检查数据库，但这不是一个好主意，因为当用户没有不要单击“注销”按钮，它不会更新他在数据库中的状态，即他处于非活动状态。

如果没有表单身份验证和类似的东西，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:19:32.860

老实说，让 Microsoft 处理表单身份验证的细节会更容易，但如果我被“挑战”不使用表单身份验证，我会这样做。（还有其他方法，这只是我喜欢的一种）。

*   在登录时，我会为用户创建会话 cookie（比如 10 分钟），这个 cookie 将包含一个表的 id，我将在其中存储他们的用户 ID、登录时间和他们引用的 ip。我也会在 cookie 中包含这些信息（使用简单的加密），在每次页面加载时，我都会更新 cookie 以持续 10 分钟，并根据数据库检查凭据。这意味着如果用户没有每十分钟访问一次网站，会话就会超时。这还可以让您知道用户何时从另一个位置登录。

旁注：如果您对 Windows 窗体使用自定义身份验证，则几乎所有上述内容都会为您处理。使用 Windows 窗体身份验证意味着您不必担心超时和 cookie 管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:19:40.810

**没有完美的解决方案**

你不能可靠地解决这个问题，但你可以接近。在某些极端情况下，合法用户会对此限制感到沮丧。

**你可以做什么**

ASP.Net 成员资格提供程序跟踪给定用户的最后一次看到，即他们最后一次登录和访问页面的时间。您可以遵循类似的策略，同时注意用户的 IP 地址，也许还有浏览器的用户代理。

如果您在短时间内（例如 20 分钟）看到相同登录凭据的两个不同 IP 地址和/或用户代理，您可以假设它们很*可能*来自不同的设备。

**意识到**

正如我所说，在某些极端情况下你会出错。例如，移动设备上的某人会经常获得新的 IP 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T23:19:47.510

您可以在数据库中拥有用户`last_activity_time`文件，只要登录用户访问您的任何页面，该文件就会更新。您现在可以有一个窗口，例如 30 分钟（用户登录有效的一段时间）`last_activity_time`与当前时间进行比较，如果时间差大于所需的窗口（30 分钟），则认为用户不活动

# ios - RestKit：使用 [[RKClient sharedClient] post: usingBlock:] 时的每个请求对象映射

> ID：11750362
> 
> 赞同：2
> 
> 时间：2012-07-31T23:11:45.190
> 
> 标签：ios, post, restkit, background-process

我需要在后台将视频发布到服务器。到目前为止，我在发布时一直在使用这种模式：

```
- (BOOL)loginUser:(user *)user
{
    BOOL ret = NO;

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegate.waitView startWithMessage:@"Signing in ..."];

    [self.objectManager postObject:user usingBlock:^(RKObjectLoader *loader)
     {
         loader.delegate = self;
         loader.targetObject = nil;

         loader.objectMapping = [RKObjectMapping mappingForClass:[user class] usingBlock:^(RKObjectMapping *mapping)
                             {
                                 [mapping mapKeyPath:@"id" toAttribute:@"ID"];
                                 [mapping mapKeyPath:@"last_name" toAttribute:@"last_name"];
                                 [mapping mapKeyPath:@"first_name" toAttribute:@"first_name"];
                                 [mapping mapKeyPath:@"middle_name" toAttribute:@"middle_name"];
                                 [mapping mapKeyPath:@"email" toAttribute:@"email"];
                                 [mapping mapKeyPath:@"password" toAttribute:@"password"];
                                 [mapping mapKeyPath:@"authentication_token" toAttribute:@"authentication_token"];
                             }];

         loader.serializationMapping = [loader.objectMapping inverseMapping];
         loader.serializationMapping.rootKeyPath = NSStringFromClass([user class]);
     }];

    return ret;
} 
```

...但是这种模式似乎不允许我访问任何设置 backgroundPolicy 的 RKRequest 对象。所以，我看过像这样使用 RKClient ：

```
- (BOOL)postBigMediaFile:(NSString *)pathToBigFile
{
    BOOL ret = NO;

    NSString *resourcePath = @"/bigFile";

    [[RKClient sharedClient] post:resourcePath usingBlock:^(RKRequest *request)
     {
         request.backgroundPolicy = RKRequestBackgroundPolicyContinue;

         // how do I set up the object mapping?

     }];

    return ret;
} 
```

...但 RKRequest 对象似乎没有访问设置映射的 RKObjectLoader 的方法。如何使用对象映射在后台发布数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:17:17.137

愚蠢的我...... RKObjectLoader 是 RKRequest 的子类，所以我可以做 loader.backgroundPolicy = ... :-)

# c# - 将 winapi 事件转发到另一个窗口

> ID：11750365
> 
> 赞同：5
> 
> 时间：2012-07-31T23:11:59.413
> 
> 标签：c#, windows, winforms, winapi

我现在拥有的：我在 C# 中的应用程序是半透明的，并且不会捕获 winapi 事件 - 每次点击、拖动等都被底层窗口捕获，它是单独的应用程序（如 webbrower）。我用它来覆盖浏览器显示的信息。这是我的代码：

```
int exstyle = GetWindowLong(this.Handle, GWL_EXSTYLE);
exstyle |= WS_EX_TRANSPARENT;
SetWindowLong(this.Handle, GWL_EXSTYLE, exstyle);

IntPtr hwndf = this.Handle;
IntPtr hwndParent = GetDesktopWindow();
SetParent(hwndf, hwndParent); 
```

但是现在，我想将所有事件发送到我的应用程序窗口（顶部是半透明的）和网络浏览器（在我的应用程序下）。因此，例如，如果我单击，则单击在两个窗口中都有效，就好像它们在顶部一样。我想这样做的唯一方法是捕获所有事件，然后将它们转发到较低的窗口，但是有什么办法吗？我使用 winforms 作为窗口库。

* * *

我现在所做的并不那么重要，因为我想正常消费事件，然后将它们转发到底层窗口。所以这与我现在使用 WS_EX_TRANSPARENT 所做的完全不同。这样做的目的是同时在两个窗口中拖动内容。如果有更好的方法，我会很高兴听到它。

* * *

至少我需要将拖动事件传输到两个窗口，并将所有其他事件传输到底层窗口（不在我的控制之下）。因此，也许将我的窗口作为 WS_EX_TRANSPARENT （使事件传递到底层窗口）并简单地安装全局挂钩来接收拖动事件会更容易？你怎么看？

顺便说一句，我没有使用 Winapi 的经验，所以解决方案可能很明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T08:26:05.273

您可以在底层表单处理完事件后尝试转发事件。就像是

```
 protected override void OnDragOver(DragEventArgs drgevent)
 {
     base.OnDragOver(drgevent);
     MyControl.ForwardDragEvent(drgevent);
 } 
```

在 MyControl 中：

```
public void ForwardDragEvent(DragEventArgs drgevent)
{
     base.OnDragOver(drgevent);
     //Or call your own method to handle the event
} 
```

我已经用它来转发滚动事件，但是在我的情况下，只有一个控件处理了事件..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:02:45.823

您可以通过在表单上重载 WndProc 或通过调用来捕获发送您自己的表单的 Windows 事件`user32!GetMessage`

`user32!PostMessage`您可以通过或api将消息发送到其他 Windows 窗体`user32!SendMessage`（[请阅读 msdn 上的 PostMessage 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)）。

# c++ - 在 C++ 中获取 URL 的最后 N 段

> ID：11750367
> 
> 赞同：1
> 
> 时间：2012-07-31T23:12:10.303
> 
> 标签：c++, algorithm, stl

我需要编写一个函数来返回给定 URL 的最后 N 段，即给定**/foo/bar/zoo**和`N=2`，我希望返回**/bar/zoo**。边界条件应妥善处理。我用 C 做这件事没有问题，但我能想到的最好的 C++ 版本是这样的：

```
string getLastNSegments(const string& url, int N)
{
    basic_string<char>::size_type found = 0, start = path.length()+1;

    int segments = 2;
    while (start && segments && (start = path.find_last_of('/', start-1)) != string::npos) {
        found = start;
        segments--;
    }

return url.substr(found);
}

cout << "result: " << getLastNSegments("/foo/bar/zoo", 2) << endl; 
```

有没有更惯用的（STL+算法）方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:23:24.613

使用[`std::string`](http://www.cplusplus.com/reference/string/string/)和[`rfind()`](http://www.cplusplus.com/reference/string/string/rfind/)。

您`rfind`连续`N`多次调用最后一个索引作为参数。您现在有了要查找并用于`substr`提取子字符串的字符串的起始索引。

```
std::string x("http:/example.org/a/b/abc/bcd");
int N = 3;
int idx = x.length();
while ( idx >= 0 && --N > 0 )
{
   idx = x.rfind('/',idx) - 1;
}
std::string final = x.substr(idx); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:37:10.140

只使用循环没有错。不知道有任何 STL 字符串函数可以在一次调用中执行您想要的操作。

顺便说一句，当您要求最后 3 段时会发生什么`http://www.google.com/`？

叫我老派，但我个人不会在这里使用任何 STL 搜索......这是怎么回事：

```
if( N <= 0 || url.length() == 0 ) return "";

const char *str = url.c_str();
const char *start = str + url.length();
int remain = N;

while( --start != str )
{
    if( *start == '/' && --remain == 0 ) break;
}

return string(start); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T01:35:07.807

最后但同样重要的是，一个简单的升压拆分解决方案

```
string getLastNSegments(const string& url, int n)
{
    string selected;
    vector<string> elements;
    boost::algorithm::split(elements, url, boost::is_any_of("/"));

    for (int i = 0; i < min(n, int(elements.size())); i++)
        selected = "/" + elements.at(elements.size()-1-i) + selected;

    return selected;
} 
```

# ruby-on-rails - Geocoder gem 是否与谷歌 API 密钥一起使用？

> ID：11750370
> 
> 赞同：17
> 
> 时间：2012-07-31T23:12:34.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, geocoding, rails-geocoder

我正在为我的项目使用 ruby​​ geocoder gem，随着项目的发展，我开始考虑连接到 Google API 密钥。将其添加到项目后：

```
Geocoder.configure do |config|

# geocoding service (see below for supported options):
config.lookup = :google

# to use an API key:
config.api_key = 'my_key'

# geocoding service request timeout, in seconds (default 3):
config.timeout = 5

end 
```

我收到 Google Geocoding API 错误：请求被拒绝。当我启动应用程序时。通过阅读，如果其他人选择继续使用 gem，似乎他们会切换到雅虎。我可以将 gem 配置为使用 google api 密钥吗？主要是，我想留意每日查询的数量，以避免超出限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-20T04:01:36.247

Geocoder 仅支持 Google Premier 帐户的 Google api 密钥。

它在 github 上的自述文件中找到：[https ://github.com/alexreisner/geocoder#google-google-google_premier](https://github.com/alexreisner/geocoder#google-google-google_premier)

如果您有 Google Premier api 密钥，您只需将其放入初始化程序中：

```
# config/initializers/geocoder.rb
   Geocoder.configure(:lookup => :google_premier, :api_key => "...") 
```

您的地理编码器将使用您的首要密钥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-02T14:58:55.597

我今天遇到了这个问题并设法通过设置`use_https`例如

```
Geocoder.configure(
  timeout: 15,
  api_key: "YOUR_KEY",
  use_https: true
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-18T16:04:07.720

创建一个文件：`config/initializers/geocoder.rb`并像这样设置：

```
Geocoder.configure(
  lookup: :google_premier,
  api_key: ['api_key', 'client_id', 'client_id_type'],
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-18T19:39:17.757

Geocoder 可以很好地与他们的 Map API 的免费层一起工作。然而，为了让它工作，我必须**专门**使用这个页面注册一个密钥。

[https://console.developers.google.com/flows/enableapi?apiid=geocoding_backend&keyType=SERVER_SIDE](https://console.developers.google.com/flows/enableapi?apiid=geocoding_backend&keyType=SERVER_SIDE)

* * *

并设置配置

```
# config/initializers/geocoder.rb
Geocoder.configure(
  api_key: 'KEY_HERE',
  use_https: true
) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-01T16:15:39.410

默认情况下，Geocoder 使用 Google 的地理编码 API 来获取坐标和街道地址。所以，我认为 Google API 密钥应该在初始化程序上工作。

我希望这对你有用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-01T21:09:11.200

```
Geocoder.configure(
  # geocoding service
  lookup: :google,

  # geocoding service request timeout (in seconds)
  timeout: 3,

  # default units
  units: :km
) 
```

这对我有用。[您可以使用http://www.rubygeocoder.com/](http://www.rubygeocoder.com/)上的地理编码器文档从 Rails 控制台调用 API，而不是从视图 /my_map/show.html.erb 调用它替换地址或城市等`<%= @place.address %>`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-29T07:37:48.450

如果有人还在看这个，由于某种原因，Google API 发生了变化，Geocoder 不再适用于标准配置文件。但是，您可以简单地不使用 Geocoder gem 进行地理编码和反向地理编码（不要使用 Geocoder.search）并使用任何 http 请求 gem 直接调用 google api，此时使用 RestClient api 调用将是

```
response = RestClient.get 'https://maps.googleapis.com/maps/api/geocode/json?address=' + sanitized_query + '&key=' + your_key 
```

过滤后的查询可以是地址，也可以是用于地理编码或反向地理编码`Cupertino, CA`的`lat=x, lng=y`字符串。无需获得 Google Premier 帐户。

# javascript - 尝试在 javascript 正则表达式中捕获组（来自 c# 的端口）

> ID：11750373
> 
> 赞同：0
> 
> 时间：2012-07-31T23:12:47.873
> 
> 标签：javascript, regex

我有这个正则表达式

```
var mregex = /(\$m[\w|\.]+)/g;
string mstring= "$m.x = $m.y"; 
```

所以基本上捕获 $m.[+ 任意数量的字母数字或 . 直到另一个字符或结尾]

我有这个在 C# 中工作，但我试图将它移植到 javascript，所以删除了名称捕获。

```
var match = mregexp.exec(mstring); 
```

match 有 0: "$mx" 1: "$mx" // 不是我预期的 $my。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:20:51.783

您的正则表达式只匹配一次。返回数组的`[0]`元素是整个匹配的子字符串。该`[1]`元素是第一组，在您的情况下是相同的。您必须`.exec()`再次调用才能找到第二个实例。

您可以将函数传递给`.replace()`，我个人喜欢：

```
mstring.replace(mregexp, function(_, group) {
  console.log( group );
}); 
```

这将向您显示两个匹配的组。（该函数传递的参数与从 中返回的数组的元素具有相同的性质`.exec()`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:24:07.633

您将不得不重复`mregexp.exec()`，直到它返回`null`。

```
var match = []; //initialize a new array
while(mregexp.exec(mstring)){
    match.push(mregexp[1]);
} 
```

有关 Javascript 的正则表达式，请参见[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:24:09.007

您可以调用`mstring.match(mregexp)`以返回所有匹配项，但您只能看到匹配的子字符串（在这种情况下您可以简化`mregexp`为`/\$m[\w.]+/g`）。

# version-control - CodePlex TFS 服务

> ID：11750375
> 
> 赞同：4
> 
> 时间：2012-07-31T23:13:00.847
> 
> 标签：version-control, tfs, codeplex

我对 CodePlex 及其提供或不提供的 TFS 服务感到非常困惑。我将很快开始与几个使用 Visual Studio 2010 Professional 的朋友一起开发开源项目。因为 VS 与 TFS 结合得非常好，所以我们更喜欢使用 TFS。

但是，我们没有钱自己购买 TFS，因此我们将 CodePlex 作为替代方案。CodePlex 是否提供免费的 TFS 托管？我相信它确实如此，直到我遇到[这个](http://codeplex.codeplex.com/wikipage?title=Using%20TFS%20and%20Team%20Explorer%20with%20CodePlex#TFS-Features)让我相信它只提供 TFS 功能集的一部分。

（这是我第一次使用版本/源代码控制，所以请注意术语。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:59:41.953

CodePlex 提供免费的 TFS 托管，其中包含旨在托管开源项目的功能集。它的版本控制产品是完整的，但是 Team Foundation Server 是一个具有许多功能领域的平台，所以让我们看看这些：

**版本控制：** CodePlex 支持 TFS 版本控制的整个功能集。事实上，CodePlex 为 TFS 开创了一些版本控制工具，例如他们的[SVNBridge](http://svnbridge.codeplex.com)。

**工作项跟踪：** Team Foundation Server 允许自定义工作项跟踪模板，并提供了几个开箱即用的模板，以适应从 CMMI 到敏捷的开发流程。但是，CodePlex 提供了适用于开源项目且不允许自定义的单个工作项跟踪模板。

**持续集成：** CodePlex 目前不支持自动构建。不过，您可以针对源代码的 CodePlex 端点设置自己的持续集成构建。

**文档存储库：** CodePlex 中没有可用的 SharePoint 文档存储库。

**报告：** SQL Reporting Services 在 CodePlex 中不可用。

我会争辩说，对于一个小型开源项目，这些都不是交易破坏者。然而，对于一个非常大的项目，这些功能中的一些或全部可能是可取的。

如果您想使用 TFS 并且正在为小型项目寻找具有成本效益的解决方案，您可能还需要查看[Team Foundation Service](http://tfspreview.com)，该服务目前在预览状态下是免费的。（未来定价尚未公布。）

# objective-c - 缩放和中心 calayer 到 superview

> ID：11750382
> 
> 赞同：5
> 
> 时间：2012-07-31T23:14:06.670
> 
> 标签：objective-c, autolayout, calayer

当我缩放图层时，结果始终将原点设置为 CGPoint(0,0)。确保缩放后图层仍位于其超级图层中心的最佳方法是什么？

```
[CATransaction begin];
[CATransaction setAnimationDuration: 0];
[CATransaction setDisableActions: TRUE];

self.maskLayer.transform = CATransform3DScale(CATransform3DIdentity, .8, .8,1);
self.maskLayer.position = CGPointMake(kScreenWidth/2,kScreenHeight/2);

[CATransaction commit]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T23:18:49.820

您需要将图层的锚点设置为其中心：

```
self.maskLayer.anchorPoint = CGPointMake(0.5, 0.5); 
```

然后将其位置设置为其超层的中心

```
self.maskLayer.position = (CGPoint){CGRectGetMidX(superLayer.bounds), CGRectGetMidY(superLayer.bounds)}; 
```

# xcode - 链接静态库，共享另一个静态库

> ID：11750390
> 
> 赞同：16
> 
> 时间：2012-07-31T23:14:38.880
> 
> 标签：xcode, linker, static-libraries

我目前有一个用于非常大的代码库的 Xcode 项目，我将其称为**Project X**，我将其划分为一堆子项目（**项目 A、B、C**）。

到目前为止，这些项目中的每一个都可以自行编译。它们都产生静态库。**项目 B**和**项目 C**依赖于**项目 A**生成的静态库才能构建。

我有另一个 xcode 项目**Project Z**，它需要由**Projects B 和 C**生成的静态库。问题就在这里。当**项目 Z**进入链接器阶段时，事情就会爆炸——在**项目 B 和 C**的库中发现了它们最初在**项目 A**中链接的代码的重复符号！

我对静态库的世界还很陌生，我不确定如何继续使用**Project Z**，或者如何修改其他项目以便它们链接到同一个**Project A**库。我有一种感觉，这是不可能的。我在这里有什么选择？

编辑：

我应该澄清一下，**项目 B**和**项目 C**需要构建到单独的静态库中，因为某些客户端只需要一个或另一个。

此外，我在 OSX 和 iOS 平台上都遇到了这种困境。

我意识到我可以通过将项目构建为动态库来解决 OSX 上的这个问题。但是，我不想这样做，它仍然让我在 iOS 上遇到同样的问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T19:08:38.460

静态库不应包含其他静态库（或一般的第三方代码）。静态库只是粘合在一起的一束 .o 文件。所以如果你有多个相同信息的副本，它就会爆炸。

每个静态库都应该有自己的代码。最终的应用程序负责将所有需要的库链接在一起（包括库所需的库）。这样，每个链接的事物都只有一个副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:22:02.340

这听起来正是[CoacoaPods](http://cocoapods.org/)为解决的问题而创建的。如果您为这些项目中的每一个定义 pod，那么**Z**应该能够在不引入重复符号的情况下确定并链接到它的所有依赖项。

# security - Symfony 2 静态资产授权（防火墙后的 .js）

> ID：11750392
> 
> 赞同：4
> 
> 时间：2012-07-31T23:14:52.427
> 
> 标签：security, symfony, authorization, assetic

在防火墙后面保护静态资产（javascript 和 css）的程序是什么？我有一个大量使用 javascript 的管理部分。我真的不想向公众公开代码。

我目前使用资产将我所有的 javascript 编译到 /web/admin/js/xyz.js 中的文件

有没有一种我忽略的简单方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T22:33:58.193

您可以使用控制器来提供静态文件并保护该控制器。就像是：

```
/** 
 * Serves static javascript file. 
 * We have configured /secure to be secured by some firewall
 *
 * @Route("/secure/xyz.js", name="static_xyz")
 */
public function staticXyzAction()
{   

    $headers = array(
        'Content-Type' => 'text/javascript',
    );  

    return new Response(file_get_contents($this->get('kernel')
        ->getRootDir().'../web/admin/js/xyz.js'), 200, $headers);
} 
```

这只是您提供的数据的一个示例。显然，在您的最终代码中，所提供的文件应该位于 Web 服务器无法直接访问的某个目录中。

这种方法的明显缺点是性能。PHP 提供静态文件的速度比您的 Web 服务器慢得多，但根据您的负载，这可能不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:56:49.597

为什么要“隐藏”这些管理 js 文件？js 不应该执行关键的身份验证或检查权限，而只是与执行此操作的 Sf2 API / 控制器交谈，并且如果读取则不应该是关键的。这是一个概念问题。

如果你害怕 lambda 用户/黑客看到这些 js 文件，你可以在 Assetic 中设置一个非常复杂的随机 js 输出。Symfony .htaccess 仅允许用户在知道其确切 URL 的情况下访问静态文件，他们无法列出您存储构建资产的存储库，防火墙会捕捉到这一点。

最后一个安全措施，使用 yui-minifier 和 Assetic 来缩小和混淆你构建的 js 文件。

# xpages - 不使用 FT 搜索的替代搜索方法

> ID：11750397
> 
> 赞同：0
> 
> 时间：2012-07-31T23:15:36.967
> 
> 标签：xpages, lotus-domino

我目前正在使用视图控件中的“在视图结果中搜索”选项来为我的视图提供数据集（原因是要显示的数据集相当复杂，具体取决于用户 - 我无法使用矢量过滤来完成此操作）。

我遇到的问题是搜索是 FT 搜索，它不允许您搜索字段与字符串完全匹配的位置，而是在字段包含您的字符串的位置进行搜索。

有谁知道我可以在视图中搜索确切数据的方法？

提前致谢。

一种

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:15:35.960

如果您的数据库不是太大，您可以使用 database.search。它使用@Formula 来获取文档。它可能比 FT Search 慢一个数量级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:12:15.013

看看这段代码[http://openntf.org/XSnippets.nsf/snippet.xsp?id=build-a-search-query](http://openntf.org/XSnippets.nsf/snippet.xsp?id=build-a-search-query)我认为它可以帮助你做你正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T09:08:28.137

根据您想要做的事情，更好的选择是创建一个隐藏视图，其中包含您需要匹配的列。然后搜索该视图而不是 FTI 搜索。

# python - Python：pyplot - 绘制平滑曲线，减少杂乱，并在曲线上显示数据点

> ID：11750407
> 
> 赞同：0
> 
> 时间：2012-07-31T23:16:24.390
> 
> 标签：python, plot, matplotlib

我有三个浮点值列表，每个列表都很长，例如每个列表都有 250-300 个元素。我设法使用以下代码进行绘图，但不幸的是，将所有这些列表放在一个绘图中后，它真的很难阅读。

这是我的清单示例：

```
list1 = [0.607,0.157,0.242.............]
list2 = [0.992,0.296,0.237.............]
list3 = [0.231,0.079,0.256.............] 
```

任何这些元素的最高可能值为 1.0

这是我的代码段：我没有放我的整个代码，因为它有不必要的部分，我在迭代多个向量时构造这些列表。

```
plt.plot(list1, 'ro')
plt.plot(list2, 'bo')
plt.plot(list3, 'go')
plt.ylabel('cosine values')
plt.show() 
```

![这就是我当前情节的样子](../Images/2a8fec0d5f2cee6c41144fe8f2fd4bc8.png)

这就是我现在的情节的样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:23:55.763

我有一些建议，不确定它们是否包含答案，但这里有。

尝试使用`'.'`而不是`'o'`这样点占用更少的区域

由于数据似乎在底部浓缩，请尝试使用对数刻度进行绘图`yscale('log')`

```
plt.plot(list1, 'r.')
plt.plot(list2, 'b.')
plt.plot(list3, 'g.')
plt.ylabel('cosine values')
plt.yscale('log')
plt.show() 
```

您可能还需要考虑通过二次采样或平均来减少数据点的数量。

# sqlite - 从现有模式生成表关系图（对于 Sqlite 数据库）

> ID：11750408
> 
> 赞同：7
> 
> 时间：2012-07-31T23:16:25.247
> 
> 标签：sqlite

我有一个 sqlite 数据库模式...是否有任何可用的工具可以生成显示现有表及其关系的图表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:12:17.513

对于 Mac OS X，有[SQLEditor](http://www.malcolmhardie.com/sqleditor/)

在多个平台上，[Navicat](http://www.navicat.com/en/products/navicat_datamodeler/modeler_overview.html) Enterprise 将完成这项工作

[yEd Graph Editor](http://www.yworks.com/en/products_yed_about.html)可用于制作 ER 图，但我认为它不会导入架构。

# java - HttpClient 4.1 出现 SSL“Peer Not Authenticated”错误

> ID：11750413
> 
> 赞同：22
> 
> 时间：2012-07-31T23:16:55.560
> 
> 标签：java, ssl, httpclient, ssl-certificate

我正在构建一个简单的应用程序监视器来轮询我们的一个 API URL，如果它无法从响应中获取 HTTP 200 状态代码（这表明我们的 API 由于某种原因而关闭），则向我们发送电子邮件。

我正在使用 HttpClient **4.1**（这很重要，因为它的 API 与3.x有*很大不同）。*

我们的 API 使用 SSL 是安全的，但是输入：

> [http://example.com/our-api](http://example.com/our-api)

进入网络浏览器会将您重定向到

> [https://example.com/our-api](https://example.com/our-api)

不会造成任何错误。

当 HttpClient 尝试访问此 URL ( `http://example.com/our-api`) 时，它会失败并出现`javax.net.ssl.SSLPeerUnverifiedException`异常并显示一条消息：

> 对等体未通过身份验证

[正如这篇](https://stackoverflow.com/questions/2308774/httpget-with-https-sslpeerunverifiedexception)文章所证明的那样，我看到其他人经常发生这种情况（它还提供了一些规避这个问题的方法——事实上，我今晚将尝试实施的解决方案）。

这个其他帖子（以及其他类似的帖子）没有做的是首先解释为什么会发生这种情况！所以，与其问“我该如何解决这个问题？” 我想我会问“**为什么会发生这种情况？** ”在我继续提出建议的解决方案之一之前，我想知道我正在尝试解决的问题是什么 ;-)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-31T23:23:32.263

如果服务器的证书是自签名的，那么这是按设计工作的，您必须将服务器的证书导入您的密钥库。

假设服务器证书是由知名 CA 签署的，这是因为现代浏览器可用的 CA 证书集远大于 JDK/JRE 附带的有限集。

您提到的其中一篇文章中给出的 EasySSL 解决方案只是掩盖了错误，您将不知道服务器是否具有有效的证书。

您必须将正确的根 CA 导入您的密钥库以验证证书。使用现有的 SSL 代码无法解决这个问题是有原因的，这是为了防止您编写表现得好像它们是安全的但实际上并不安全的程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T23:26:34.083

这是抛出时

> ...对等方无法识别自己（例如；没有证书，正在使用的特定密码套件不支持身份验证，或者在 SSL 握手期间没有建立对等方身份验证）抛出此异常。

可能这个异常的原因（堆栈跟踪在哪里）会告诉你为什么抛出这个异常。Java 附带的默认密钥库很可能不包含（并且不信任）正在使用的 TTP 的根证书。

答案是检索根证书（例如，从您的浏览器 SSL 连接中），将其导入文件并使用Java JDK 提供的`cacerts`信任它。`keytool`否则，您将不得不以编程方式分配另一个信任库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-22T12:42:41.733

```
keytool -import -v -alias cacerts -keystore cacerts.jks -storepass changeit -file C:\cacerts.cer 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T17:32:18.987

我不是 Java 开发人员，但正在使用 Java 应用程序来测试 RESTful API。为了让我修复错误，我必须在网络服务器中安装中间证书以使错误消失。我使用的是 lighttpd，原始证书安装在 IIS 服务器上。希望能帮助到你。这些是我在服务器上丢失的证书。

*   CA.crt
*   UTNAddTrustServer_CA.crt
*   AddTrustExternalCARoot.crt

# objective-c - iOS 崩溃日志只是部分符号化

> ID：11750415
> 
> 赞同：1
> 
> 时间：2012-07-31T23:17:20.863
> 
> 标签：objective-c, xcode, crash-reports, symbolicate, symbolicatecrash

这就是问题所在。我拥有所有 DSYM 的 .xarchive，但无论出于何种原因，使用 symbolicatecrash 或 xcode 只会将一些符号转换为行，而其他符号未转换。有任何想法吗？我在 OS X Lion 上使用 xCode 4.3.2。

例如，来自 appstore
线程 0 名称的崩溃日志：调度队列：com.apple.main-thread
线程 0：0 libsystem_kernel.dylib 0x37f0e628 _semwait_signal + 24
1 libsystem_c.dylib 0x33d66b1a nanosleep
2 libsystem_c.dylib 0x33d71608 sleep
3 AudioToolbox 0x362b7abc AudioQueueNew(bool, AudioStreamBasicDescription const*, TCACallback const&, CACallbackTarget const&, unsigned long, OpaqueAudioQueue*)
4 AudioToolbox 0x362b77da AudioQueueNewOutput
5 AVFoundation 0x359b718e allocAudioQueue(AVAudioPlayer*, AudioPlayerImpl*)
6 AVFoundation 0x359b54b4 prepareToAudioPlayer*()
7 AVFoundation 0x359b5a3c playQueue(AVAudioPlayer*, AudioPlayerImpl*, AudioTimeStamp const*)
8 AVFoundation 0x359b58d2 -[AVAudioPlayer play]
**9 APP_ 0x00049ffe 0x00049ffe
10 APP_ 0x0004fbfe 0x0004fbfe
11 APP_ 0x00051b9a 0x00051b9a
12 APP_ 0x00016462 0x00016462**
13 Foundation 0x3704f92c _NSFireDelayedPerform
14 CoreFoundation 0x3156aa2c _CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__
15 CoreFoundation 0x3156a692 _CFRunLoopDoTimer
16 核心基础 0x31569268*CFRunLoopRun + 1200
17 CoreFoundation 0x314ec49e CFRunLoopRunSpecific
18 CoreFoundation 0x314ec366 CFRunLoopRunInMode
19 GraphicsServices 0x329c5432 GSEventRunModal
20 UIKit 0x317f1cce UIApplicationMain
**21 APP*** **0x000032c0 0x000032c0
22 APP_ 0x00003270 0x00003270**

Symbolicated:
Thread 0 name: Dispatch queue: com.apple.main-thread
Thread 0:
0 libsystem_kernel.dylib 0x37f0e628 _semwait_signal + 24
1 libsystem_c.dylib 0x33d66b1a nanosleep + 138
2 libsystem_c.dylib 0x33d71608 睡眠 + 40
3 AudioToolbox 0x362b7abc _ZL13AudioQueueNewbPK27AudioStreamBasicDescriptionRK11TCACallbackIPvS3_ERK16CACallbackTargetmPP16OpaqueAudioQueue + 680
4 AudioToolbox 0x362b77da AudioQueueNewOutput + 126
5 AVFoundation 0x359b718e _ZL15allocAudioQueueP13AVAudioPlayerP15AudioPlayerImpl + 86
6 AVFoundation 0x359b54b4 _ZL18prepareToPlayQueueP13AVAudioPlayerP15AudioPlayerImpl + 20
7 AVFoundation 0x359b5a3c *ZL9playQueueP13AVAudioPlayerP15AudioPlayerImplPK14AudioTimeStamp + 184
8 AVFoundation 0x359b58d2 -[AVAudioPlayer play] + 162
**9 APP*** **0x00049ffe 0x00049ffe
10 APP_ 0x0004fbfe 0x0004fbfe
11 APP_ 0x00051b9a 0x00051b9a
12 APP_ 0x00016462 -[BackpackSetupViewController scenario] (BackpackSetupViewController.m:167)**
13 Foundation 0x3704f92c _NSFireDelayedPerform + 408
14 CoreFoundation 0x3156aa2c _CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION_ + 8
15 CoreFoundation 0x3156a692 _CFRunLoopDoTimer + 358
16 CoreFoundation 0x31569268 *CFRunLoopRun + 1200
17 CoreFoundation 0x314ec49e CFRunLoopRunSpecific + 294
18 核心基础 0x314ec366 CFRunLoopRunInMode + 98
19 GraphicsServices 0x329c5432 GSEventRunModal + 130
20 UIKit 0x317f1cce UIApplicationMain + 1074
**21 APP*** **0x000032c0 main (main.m:14)
22 APP_ 0x00003270 0x00003270**

# c# - 页面范围设置不正确的打印选项

> ID：11750423
> 
> 赞同：1
> 
> 时间：2012-07-31T23:18:41.113
> 
> 标签：c#, asp.net, .net, winforms

```
PrinterSettings.FromPage = 1;
PrinterSettings.ToPage =2; 
```

每当我将 ToPage 的任何范围发送为 2 时，当我检查它的 ToPage 总是为 99 时，有什么想法吗？

```
PrintDialog PrintDialog1 = new PrintDialog();
PrintDialog1.AllowSomePages = true;
PrinterSettings.FromPage = 1;
PrinterSettings.ToPage =2; 
```

当我调试时，我也看到了

?PageSettings.PrinterSettings.PrintRange SomePages {2}

而不是 AllPages，所以 printrange 正在为某些页面设置属性，我需要设置什么才能让 ToPage 反映用户输入的数字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:32:16.507

您还必须设置`PrinterSettings.PrintRange = PrintRange.SomePages`

# javascript - 使用 javascript 修剪 URL

> ID：11750424
> 
> 赞同：0
> 
> 时间：2012-07-31T23:18:41.547
> 
> 标签：javascript, html, templates, anchor

我正在为自己制作一个 ebay 模板，我想使用名称锚点跳转到页面模板上的不同部分。但是 Ebay 在 URL 中添加了一些内容，因此破坏了名称锚点。
由于这似乎仅与 Firefox 相关，因此有人建议我需要从 URL 中删除“&bv=mozilla”然后它才会起作用。如果这里有任何 javascript 专家可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:26:03.307

```
var documentUrl = location.href;
var newUrl = documentUrl.replace("&bv=mozilla",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:35:10.307

尝试这个：

```
var url = location.protocol + '//' + location.host + location.pathname; 
```

或这个：

```
var url = location.protocol + '//' + location.host + ':' + location.port + location.pathname; 
```

如果它在同一页面上。

否则，你可以试试这个：

```
var url = 'insert URL here';
var new_url = url.substring(0, url.indexOf('?')); 
```

请参阅[substring](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)、[indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)和[window.location](https://developer.mozilla.org/en/DOM/window.location)。

# c# - 响应中的 asp.net 实体框架键

> ID：11750425
> 
> 赞同：0
> 
> 时间：2012-07-31T23:18:43.143
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在尝试使用 ASP.NET Web API 和实体框架在 C# 中编写我的第一个 RESTful API。

我的问题是从我的 EF 查询返回的列表被无用的实体键信息污染（我发现这是因为我的列如果认为它们都必须是键则可以为空）。

这是我从 API 调用中收到的 XML 响应的一部分

```
<syemploy z:Id="i1"><EntityKey z:Id="i2">
<d2p1:EntityContainerName>AbraHRMS_LiveEntities</d2p1:EntityContainerName>
<d2p1:EntityKeyValues>
    <d2p1:EntityKeyMember>
       <d2p1:Key>id_col</d2p1:Key>
       <d2p1:Value i:type="d5p1:int">15</d2p1:Value>
    </d2p1:EntityKeyMember>
    <d2p1:EntityKeyMember>
       <d2p1:Key>e_address1</d2p1:Key>
       <d2p1:Value i:type="d5p1:string">153 Townsend Street, Suite 9057</d2p1:Value>
    </d2p1:EntityKeyMember>
... 
```

如何从响应中删除实体键值？我的 c# 代码如下所示

```
 AbraHRMS_LiveEntities _db = new AbraHRMS_LiveEntities();

 # GET api/employee
 public List<MvcApplication1.DAL.syemploy> Get()
 {
    return _db.syemploys.ToList();
 } 
```

同样，这是我在 C# 中的第一个 API，所以如果有什么看起来很时髦，请随时指出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:52:25.067

默认情况下，您将拥有 XML 中实体的所有公共属性。为避免让它们响应，请尝试创建不包含不需要的字段的“新”类，然后将结果转换为“新”类型对象的列表。为此，您可以在 _db.syemployes 上使用 .Select() 或 .Cast() 。请记住，如果您想调用 Cast<> 方法，syemploy 类应该可以转换为“新”类。您可以[在此处](http://msdn.microsoft.com/en-us/library/09479473%28v=vs.110%29)阅读有关 C# 中的类型转换的信息。如果你使用 .Select() 然后在 select 的 lambda 表达式中构造新类型的对象。

# .net - Cooliris 墙不播放视频

> ID：11750427
> 
> 赞同：1
> 
> 时间：2012-07-31T23:18:53.390
> 
> 标签：.net, video, cooliris

我正在使用 Cooliris 墙来显示来自 picasa 网络相册的提要。

照片显示得很好，而视频根本没有播放（所有视频类型）。

我读了一些关于 crossdomain xml 的帖子，但我仍然不知道如何使它工作。我还阅读了一个下载蒸汽的建议（据我了解），但是这个选项被拒绝了，因为性能和成本（[由 Picassa 网络相册提供的 Cooliris 墙？](https://stackoverflow.com/questions/3179433/cooliris-wall-fed-by-picassa-web-albums?s=61e2b83a-0fbb-44b1-82eb-761406aaab58#new-answer)）一些帖子提到它可以与幻灯片一起使用，但在我的情况下它是根本没有播放（[FLV 视频没有在 Cooliris 嵌入墙中播放](https://stackoverflow.com/questions/1674240/flv-video-not-playing-in-cooliris-embed-wall)）

注意：-我正在使用 DOT NET -AWS 托管的站点

# javascript - Javascript - 杀死字符串前面的空格

> ID：11750429
> 
> 赞同：0
> 
> 时间：2012-07-31T23:19:15.183
> 
> 标签：javascript, string, space

我提出了一些服务器请求，服务器用一个字符串回复我，该字符串前面有很多空格。字符串是 USERNAME EXIST

我知道如何使用它：

```
String.prototype.killWhiteSpace = function() {
return this.replace(/\s/g, '');};

String.prototype.reduceWhiteSpace = function() {
return this.replace(/\s+/g, ' ');}; 
```

但第一个第一个回答我 USERNAMEEXISTS，第二个回答我“USERNAME EXIST”（字符串前面有一个空格）。有没有办法杀死字符串前后的所有空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:24:04.490

用于`^`匹配字符串的开头并`$`匹配正则表达式中的结尾：

```
String.prototype.killWhiteSpace = function() {
    return this.replace(/^\s*|\s*$/g, '');
}; 
```

通常剥离空白被称为[修剪](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim)，并且已经在现代浏览器中本地实现。所以你可能想用这个：

```
String.prototype.trim = String.prototype.trim || 
  function() {
      return this.replace(/^\s*|\s*$/g, '');
  }; 
```

[如果它不存在，它将创建一个用于修剪](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim)的 shim ，否则它将保留本机实现（这要快得多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:22:05.433

字符串修剪是一个有趣的主题。一些浏览器可以比其他浏览器更好地优化某些正则表达式。这是一篇好文章：http: [//blog.stevenlevithan.com/archives/faster-trim-javascript](http://blog.stevenlevithan.com/archives/faster-trim-javascript)

我通常使用那篇文章中的第一种方法：

```
String.prototype.killWhiteSpace = function() {
  return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
}; 
```

请注意，本文（和此解决方案）侧重于性能。这对您来说可能重要也可能不重要，这里的其他答案肯定符合要求。

# html - 如何定位 grails g:render 中的单个元素

> ID：11750436
> 
> 赞同：3
> 
> 时间：2012-07-31T23:20:03.487
> 
> 标签：html, css, grails

我创建了一个 grails g:render 标签，它引用代表我项目中用户最喜欢的电影、书籍、音乐等的图像。我遇到的问题是样式集合。我似乎无法针对特定收藏的单个图像，比如音乐。有人可以帮我找到一种方法来定位 g:render 中的图像以获取特定的集合吗？我已经为我的 gsp 文件和模板文件提供了代码。我的目标是设置这些图像的样式，以便每个类别显示为其各自图像的行，但是当我尝试在“like_content”div 上使用 float:left 时，整个集合都是浮动的，而不是其单个图像。任何帮助将不胜感激。

编辑：我尝试将 id 更改为模板图像的类，并且我也尝试了“.like_content1 img”方法，但两者都不适合我。我的最终目标是创建 3 行 3 个不同的集合（电影、音乐、书籍），每个集合中的 5 个图像在各自的行中对齐。我已经包含了一个我希望它看起来如何的模型图像。![这就是我想要的样子](../Images/41ce2624a7ffd7e7edbf59f2578945b2.png)

普惠制：

```
<div class="like_content1">

    <g:render template="favorites" collection="${movies}" var="fav"/>

</div>

<div class="like_content2">

    <g:render template="favorites" collection="${music}" var="fav"/>

</div>

<div class="like_content3">

    <g:render template="favorites" collection="${books}" var="fav"/>

</div> 
```

模板：

```
<div id="favdiv">
<g:if test="${fav != null }">
    <img id="favimg" src="${fav.picture}">
    <p id="favname">${fav.name}</p>
</g:if>
</div> 
```

CSS：

```
#favimg{
            width:150px;
            height: 150px;
            }               

            .like_content1{
            position: relative;
            left: 100px;
            bottom: 75px;
            }

            .like_content2{
            position: relative;
            left: 110px;
            bottom: 75px;

            }

            .like_content3{
            position: relative;
            left: 425px;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:28:57.797

首先，不要在模板中的元素上使用 id，因为在同一个 HTML 页面上不应该有多个具有相同 id 的元素。但是为了实现你想要的，你可以在你的 CSS 中使用后代选择器

```
.like_content1 img {
  float:left;
} 
```

此选择器匹配出现在具有 class 的元素内的所有 img 标签`like_content1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:41:08.890

您需要浮动图像：

```
.like_content1 img {
    float:left;
} 
```

然后你需要清除你的浮点数以开始下一行：

```
<div class="like_content1">
    <g:render template="favorites" collection="${movies}" var="fav"/>
    <br clear="all"/>
</div>

<div class="like_content2">
    <g:render template="favorites" collection="${music}" var="fav"/>
    <br clear="all"/>
</div>

<div class="like_content3">
    <g:render template="favorites" collection="${books}" var="fav"/>
    <br clear="all"/>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:29:20.667

据我了解，您需要将 CSS 规则指向 .like_content 中的图像。所以，而不是写

```
.like_content1{
    position: relative;
    left: 100px;
    bottom: 75px;
} 
```

你用

```
.like_content1 img {
    position: relative;
    left: 100px;
    bottom: 75px;
} 
```

**重要提示：** 为`id="xxx"`页面上的唯一标签保留。在您的情况下`class="xxx"`，也在模板中将其调整为 ，因为生成的 HTML 页面将对此模板进行多次替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T04:05:56.147

`float`封闭的 div，而不是 img

所以像，

```
 .like_content1 div {
        float: left;
    } 
```

# python - 在 python 单元测试中初始化记录器

> ID：11750437
> 
> 赞同：2
> 
> 时间：2012-07-31T23:20:06.947
> 
> 标签：python, unit-testing

```
import logging

class TestMyClass(unittest.TestCase):
       def __init__(self):
            self.logger = logging.getLogger('MyClassLog')

       def setUp(self): 
```

我正在尝试在构造函数中实例化记录器。但我收到此错误：... TypeError： **init** () 只需要 1 个参数（给定 2 个）

为什么是这样？如何正确实例化记录器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:22:41.463

你是压倒一切的`__init__`。你不能那样做`TestCase`，因为你的测试用例将由测试运行器实例化，传递给它的参数将是运行的方法，所以你已经取消了所有初始化需要完成（并且没有采取正确数量的论点）。

如果你想做一些日志记录，你可以在一个[`setUp`](http://docs.python.org/library/unittest.html#unittest.TestCase.setUp)方法中做，或者更有可能，只是在全局范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:23:19.130

你不应该有`__init__`方法；`setUp`而是在方法中做所有你需要做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T21:35:00.500

你可以试试这个。。

```
class TestMyClass(unittest.TestCase):
def __init__(self, methodName):
    super(TestMyClass, self).__init__(methodName)
    self.logger = logging.getLogger('MyClassLog') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T23:44:07.273

[`setUpClass()`](http://docs.python.org/library/unittest.html#unittest.TestCase.setUpClass)应该让您对测试用例中的所有测试进行初始化，并且应该只进行一次。

# javascript - 通过 POST 方法和 javascript 获取 URL 参数

> ID：11750438
> 
> 赞同：0
> 
> 时间：2012-07-31T23:20:17.820
> 
> 标签：javascript, url, post, parameters

您将如何通过 POST 方法提取 javascript 中的 URL 参数？

例如：localhost:8080/file.html/a/30/b/40

a 和 b 将是键，而 30 和 40 将是这些键的值

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:40:18.763

你的意思是 GET 吗？

`file.html?a=30&b=40`

从此 URL 中，您可以获取以下参数：

```
var param = {};
var s = window.location.search.substring(1).split('&');
for (var i = 0; i < s.length; ++i) {
    var parts = s[i].split('=');
    param[parts[0]] = parts[1];
}
console.log(param); 
```

* * *

**编辑：**

据我所知，您提供的 URL 不必与 POST 做任何事情，但如果您可以将其放入 JavaScript 变量中，您可以这样做：

```
var url = "file.html/a/30/b/40";

var param = {};
var parts = url.split("/");
for (var i = 1; i < parts.length; i += 2) {
    param[parts[i]] = parts[i+1];
}
console.log(param); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:35:16.147

使用这样的正则表达式怎么样？

```
​var url = document.URL;                             // get the current URL
var matches = url.match(/.*\/a\/(\d+)\/b\/(\d+)/);  // match it with a regex
var a = matches[1];                                 // the "a" number (as string)
var b = matches[2];                                 // the "b" number (as string) 
```

请注意，该`match`方法返回一个列表，其中第一个元素是整体匹配，其余项目是捕获的元素，即`(\d+)`正则表达式模式的两个部分。这就是为什么这个片段使用`matches[1]`and`matches[2]`而忽略`matches[0]`.

# javascript - jQuery.ajax：如何让数据轻松发送？

> ID：11750445
> 
> 赞同：0
> 
> 时间：2012-07-31T23:21:03.200
> 
> 标签：javascript, ajax, jquery

我正在从事的项目中有很多表格。

所有的表单几乎都通过 AJAX。

```
 $.ajax({
        type: "GET",
        cache: false,
        url: $(this).attr("action"),
        data: ???,
        success: function(msg){
        }
    }); 
```

我希望能够拦截这些 POST，而是通过 AJAX 运行它们。

代码被写入将被重用的方法。

所以问题是：如何选择所有将要传递的数据，将其转换为查询字符串并将其插入到`data: ???,`部件中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:27:20.553

您需要拦截该`submit`事件。`<form>`在您的元素上绑定事件处理程序。`false`遇到时，通过从该事件处理程序中返回来停止其传播及其默认行为。

现在，您可以`.ajax()`在该处理程序中创建您的请求。要将表单数据的序列化表单创建为查询字符串，请`.serialize()`在该表单上使用 jQuerys 方法。

例如：

```
$('#myFormId').on('submit', function( event ) {
    $.ajax({
        type: "GET",
        cache: false,
        url: $(this).attr("action"),
        data: $(this).serialize(),
        success: function(msg){
        }
    });

    return false;
}); 
```

或者只是将其创建为委托事件，它处理您的所有表单，例如

```
$(document).on('submit', 'form', function( event ) {
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:28:06.513

使用序列化方法：

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# selenium - 使用 Selenium 2 执行复制和粘贴

> ID：11750447
> 
> 赞同：27
> 
> 时间：2012-07-31T23:21:31.813
> 
> 标签：selenium, selenium-webdriver

有没有办法使用 Selenium 2 和 Python 绑定来执行复制和粘贴？

我已突出显示要复制的元素，然后执行以下操作

```
copyActionChain.key_down(Keys.COMMAND).send_keys('C').key_up(Keys.COMMAND) 
```

但是，突出显示的文本不会被复制。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-12-08T18:21:20.713

要在 Mac 和 PC 上执行此操作，您可以使用这些备用键盘快捷键进行剪切、复制和粘贴。请注意，其中一些在物理 Mac 键盘上不可用，但可以使用旧键盘快捷键。

### 在 Mac 上用于剪切、复制和粘贴的备用键盘快捷键

*   剪切 => 控制+删除，或控制+K
*   复制 => 控制+插入
*   粘贴 => shift+insert，或 control+Y

**如果这不起作用，请改用 Keys.META，这是替换命令 ⌘ 键的官方密钥**

*来源：* [https ://w3c.github.io/uievents/#keyboardevent](https://w3c.github.io/uievents/#keyboardevent)

这是一个功能齐全的示例：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.action_chains import ActionChains

browser = webdriver.Safari(executable_path = '/usr/bin/safaridriver')
browser.get("http://www.python.org")
elem = browser.find_element_by_name("q")
elem.clear()
actions = ActionChains(browser)
actions.move_to_element(elem)
actions.click(elem) #select the element where to paste text
actions.key_down(Keys.META)
actions.send_keys('v')
actions.key_up(Keys.META)
actions.perform() 
```

所以在 Selenium (Ruby) 中，这大致类似于选择元素中的文本，然后将其复制到剪贴板。

```
# double click the element to select all it's text
element.double_click 

# copy the selected text to the clipboard using CTRL+INSERT
element.send_keys(:control, :insert) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-01T08:53:43.590

其实很简单：

```
from selenium.webdriver.common.keys import Keys

elem = find_element_by_name("our_element")
elem.send_keys("bar")
elem.send_keys(Keys.CONTROL, 'a') # highlight all in box
elem.send_keys(Keys.CONTROL, 'c') # copy
elem.send_keys(Keys.CONTROL, 'v') # paste 
```

我想这可能也可以扩展到其他命令。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-08T23:49:12.160

而不是使用实际的键盘快捷键，我会让 webdriver 获取文本。您可以通过查找元素的内部文本来做到这一点。

```
WebElement element1 = wd.findElement(By.locatorType(locator));
String text = element1.getText(); 
```

这样您的测试项目实际上可以访问文本。这对于记录目的是有益的，或者只是为了确保文本说出您想要它说的内容。

从这里您可以将元素的文本作为一个字符串进行操作，这样您就可以完全控制您在要粘贴到的元素中输入的内容。现在只是

```
 element2.clear();
 element2.sendKeys(text); 
```

其中 element2 是将文本粘贴到的元素

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-09T09:13:54.260

```
elem.send_keys(Keys.SHIFT, Keys.INSERT) 
```

当您尝试粘贴某些内容时，它在 macOS Catalina 上运行良好。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-16T12:24:07.927

我目前无法在 OSX 上尝试这个，但它绝对适用于 FF 和 Ubuntu：

```
import os
import time

from selenium import webdriver
from selenium.webdriver.common.keys import Keys

with open('test.html', 'w') as fp:
    fp.write("""\
<html>
<body>
  <form>
    <input type="text" name="intext" value="ABC">
    <br>
    <input type="text" name="outtext">
  </form>
</body>
</html>
""")

driver = webdriver.Firefox()
driver.get('file:///{}/test.html'.format(os.getcwd()))
element1 = driver.find_element_by_name('intext')
element2 = driver.find_element_by_name('outtext')
time.sleep(1)
element1.send_keys(Keys.CONTROL, 'a')
time.sleep(1)
element1.send_keys(Keys.CONTROL, 'c')
time.sleep(1)
element2.send_keys(Keys.CONTROL, 'v') 
```

这些`sleep()`语句只是为了能够看到步骤，它们当然不是程序运行所必需的。

ActionChain`send_key`只是切换到所选元素并`send_keys`对其执行操作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-17T11:31:52.653

涉及发送密钥的解决方案在无头模式下不起作用。这是因为剪贴板是主机操作系统的一项功能，并且在无头运行时不可用。

然而，一切都不会丢失，因为您可以在 JavaScript 中模拟粘贴事件并在页面中使用`execute_script`.

```
const text = 'pasted text';
const dataTransfer = new DataTransfer();
dataTransfer.setData('text', text);
const event = new ClipboardEvent('paste', {
  clipboardData: dataTransfer,
  bubbles: true
});
const element = document.querySelector('input');
element.dispatchEvent(event) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-09-16T10:41:00.007

**适用于 Linux 和 MacOS 的解决方案**（适用于 Chrome 驱动程序，未在 FF 上测试）

@BradParks 的答案几乎对我适用于 MacOS，除了复制/剪切部分。因此，经过一番研究，我想出了一个适用于 Linux 和 MacOS 的解决方案（代码在 ruby​​ 中）。这有点脏，因为它使用相同的输入来预先粘贴文本，这可能会产生一些副作用。如果这对我来说是个问题，我会尝试使用不同的输入，可能会使用`execute_script`.

```
 def paste_into_input(input_selector, value)
    input = find(input_selector)
    # set input value skipping onChange callbacks
    execute_script('arguments[0].focus(); arguments[0].value = arguments[1]', input, value)
    value.size.times do
      # select the text using shift + left arrow
      input.send_keys [:shift, :left]
    end
    execute_script('document.execCommand("copy")') # copy on mac
    input.send_keys [:control, 'c'] # copy on linux

    input.send_keys [:shift, :insert] # paste on mac and linux
  end 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-10-01T05:05:06.733

如果要从表格中复制单元格文本并粘贴到搜索框中，

Actions 类：用于处理键盘和鼠标事件 selenium 提供的 Actions 类

///

```
/// This Function is used to double click and select a cell text , then its used ctrl+c

/// then click on search box then ctrl+v also verify

/// </summary>

/// <param name="text"></param>

public void SelectAndCopyPasteCellText(string text)

{

  var cellText = driver.FindElement(By.Id("CellTextID"));

  if (cellText!= null)

  {

    Actions action = new Actions(driver);

    action.MoveToElement(cellText).DoubleClick().Perform(); // used for Double click and select the text

    action = new Actions(driver);

    action.KeyDown(Keys.Control);

    action.SendKeys("c");

    action.KeyUp(Keys.Control);

    action.Build().Perform(); // copy is performed

    var searchBox = driver.FindElement(By.Id("SearchBoxID"));

    searchBox.Click(); // clicked on search box

    action = new Actions(driver);

    action.KeyDown(Keys.Control);

    action.SendKeys("v");

    action.KeyUp(Keys.Control);

    action.Build().Perform(); // paste is performed

    var value = searchBox.GetAttribute("value"); // fetch the value search box

    Assert.AreEqual(text, value, "Selection and copy paste is not working");

  }

} 
```

KeyDown()：此方法模拟特定键盘键需要按下时的键盘动作。

KeyUp()：使用 KeyDown() 方法按下的键盘键不会自动释放，因此使用 keyUp() 方法显式释放键。

SendKeys()：此方法将一系列击键发送到给定的 Web 元素。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-06T20:35:02.797

如果您使用的是 Serenity Framework，请使用以下代码段：

```
 withAction().moveToElement(yourWebElement.doubleClick().perform();
            withAction().keyDown(Keys.CONTROL).sendKeys("a");
            withAction().keyUp(Keys.CONTROL);
            withAction().build().perform();

            withAction().keyDown(Keys.CONTROL).sendKeys("c");
            withAction().keyUp(Keys.CONTROL);
            withAction().build().perform();

            withAction().keyDown(Keys.CONTROL).sendKeys("v");
            withAction().keyUp(Keys.CONTROL);
            withAction().build().perform();

            String value = yourWebElement.getAttribute("value");
            System.out.println("Value copied: "+value); 
```

然后将此值发送到您要发送的任何位置：

```
destinationWebElement.sendKeys(value); 
```

# ios - 如何在 NSString 中删除一个表情符号

> ID：11750450
> 
> 赞同：5
> 
> 时间：2012-07-31T23:21:57.040
> 
> 标签：ios

如何遍历 NSString 中的 emojis 有一个 NSString 方法用于遍历 NSString 的子字符串

```
 NSString *text = @"2012我们 ";
    [text enumerateSubstringsInRange:NSMakeRange(0, [text length]) options:NSStringEnumerationByComposedCharacterSequences  usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
    printf("%s- ",[substring UTF8String]);
}]; 
```

猜猜输出是什么？

输出是：

```
 2- 0- 1- 2- - 我- 们-  - - - - - - - - - - - -  - - 
```

而不是：

```
 2- 0- 1- 2- - 我- 们-  - - - - - - - - - - 
```

和美国国旗一样，它是由 和 组成的。国旗的长度似乎是 4，它们由两个长度为 2 的字符组成。虽然枚举了 NSString ，但它给了我而不是

当字符串在 UITextView 中时，键盘中的 BACKSPACE 被点击，它可以处理删除 emoji 而不是 .

在我的应用程序中，我制作了一个自定义表情符号键盘，并且有一个 DELETE 按钮。我想 DELETE 按钮就像键盘上的系统 BACKSPACE 按钮一样工作。

有谁知道如何处理它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T05:59:03.553

要删除 UITextView 中的最后一个字符，只需调用`-deleteBackward`

```
- (void)deleteButtonPressed:(id)sender
  {
     [self.textView deleteBackward];
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:54:16.447

我不是 unicode 专家，但我相信这里的问题是标志实际上是两个字符。它们是区域指示符号。例如，美国国旗是两个不同的字符：`REGIONAL INDICATOR SYMBOL LETTER U`和`REGIONAL INDICATOR SYMBOL LETTER S`。

[http://en.wikipedia.org/wiki/Regional_Indicator_Symbol](http://en.wikipedia.org/wiki/Regional_Indicator_Symbol)

您可能很幸运地要求文本输入系统为您进行标记化，因为它似乎理解（例如在删除时）它们应该被视为一个单元。尝试使用该`UITextInputTokenizer`方法`positionFromPosition:toBoundary:inDirection:`从字符串的末尾移动到前一个字符（即 pass `UITextGranularityCharacter`）。您可以从 UITextView 或 UITextArea 的`tokenizer`方法中获取标记器。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-30T18:15:35.073

下面是一个基于 Jesse Rusak 建议的解决方案，但是即使 UITextInputTokenizer 似乎也无法正确解析文本，除非当然是我的错误:)

```
+(void)parse:(UITextField *)textfield {
    id<UITextInputTokenizer> tokenizer = [textfield tokenizer];
    UITextPosition *pos = textfield.beginningOfDocument;

    while (true) {
        UITextRange *range = [tokenizer rangeEnclosingPosition:pos withGranularity:UITextGranularityCharacter inDirection:UITextStorageDirectionForward];
        NSString *oneCharacter = [textfield textInRange:range];

        NSLog( @"%@", oneCharacter );

        pos = [textfield positionFromPosition:pos offset:-1];

        if (pos == nil) break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-23T13:59:04.040

如果有人在现代遇到此问题，请知道该问题已在 iOS 10 或更早版本中修复。以下 Swift Playground 代码现在可以正确打印标志（区域指示符符号对）：

```
import Foundation

var str = "2017我们"

str.enumerateSubstrings(in: str.startIndex..<str.endIndex, options: .byComposedCharacterSequences) { (substr, range, enclRange, stop) in
    print(substr!)
} 
```

# asp.net-mvc - Firefox 中 TextBoxFor 行为不端的模式匹配

> ID：11750452
> 
> 赞同：1
> 
> 时间：2012-07-31T23:21:59.307
> 
> 标签：asp.net-mvc, razor, jquery-validate

[您可以在此处查看](https://myhealthonline.sutterhealth.org/mhoenroll/Enrollment)我的小型 ASP.NET MVC3/Razor 应用程序的实时示例。

文本框和文本区域都具有以下属性，只需要单词字符。该表单使用 jquery-validate.js。

```
pattern = @"\w{1,50}" //50 characters, etc. 
```

仅在 Firefox (v13.0.1) 中，当这些字段包含空格或点等字符时，这些字段会突出显示，就好像它们无效一样，这两者都应该是合法字符。为什么只有这个浏览器，我应该如何纠正它？我应该使用不同的模式吗？

**更新：**我意识到它是内置的 HTML5“模式”属性，它被 Firefox 以不同的方式处理，这就是表单仍然可以提交的原因。

# php - mod_rewrite 从 Amazon S3 获取文件？

> ID：11750455
> 
> 赞同：0
> 
> 时间：2012-07-31T23:22:36.703
> 
> 标签：php, mod-rewrite, amazon-s3

是否可以将 mod_rewrite 与 Amazon S3 一起使用，以便当用户键入诸如 www.example.com/link 之类的 url 时，它可以从 S3 中名为“link”的文件夹中检索/下载 index.php 文件？

例如：
www.example.com/user --> s3.amazonaws.com/mybuckname/user/index.php www.example.com/user/anotherfile.php --> s3.amazonaws.com/mybucketname/user/另一个文件.php

本质上，我希望 www.example.com 等于（可能不是正确的术语） s3.amazonaws.com/mybucketname

但是，我在用于托管实际“www.example.com”的 EC2 服务器上也有文件/文件夹，因此我想找到一个不会产生冲突的解决方案。

我对正则表达式很糟糕，我什至不知道这是否可以做到，所以一些帮助会很好。如果 mod_rewrite 不是要走的路，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:29:28.150

Amazon S3 根本不会运行 PHP 代码，因此您在此处执行的任何操作都可能不起作用。

# php - 用于使用函数标头中声明的所有参数的 NetBeans 代码模板

> ID：11750458
> 
> 赞同：6
> 
> 时间：2012-07-31T23:22:53.200
> 
> 标签：php, netbeans

是否可以编写一个 NetBeans 代码模板来**使用函数头中声明的所有参数**（例如，使用这些变量调用另一个函数）**？**参数的数量可以不同，所以看起来并不容易。

例如，有时我想打印出函数中的所有参数以进行调试。

* * *

这是一个示例用法（`dsm()`根据参数的数量多次调用函数）：

```
function testModule_theme($existing, $type, $theme, $path) {
  dsm($existing, '$existing in ' . __FUNCTION__ . '()');
  dsm($type, '$type in ' . __FUNCTION__ . '()');
  dsm($theme, '$theme in ' . __FUNCTION__ . '()');
  dsm($path, '$path in ' . __FUNCTION__ . '()');

  return array(
    // ......
  );
} 
```

这是另一个：

```
function testModule_block_view($delta = '') {
  dsm($delta, '$delta in ' . __FUNCTION__ . '()');
  $block = array();
  // .....
  return $block;
} 
```

如您所见，第一种情况有 4 个参数，而第二种情况只有 1 个。参数的名称也会根据给定的函数而变化。

我已经为使用`dsm()`函数编写了一个代码模板：

![ddsm 代码模板](../Images/cd814ca2b4c1a45f6af82ad5c982f818.png "使用 dsm() 的代码模板")

```
dsm($$${VARIABLE newVarName default="variables"}, '$$${VARIABLE} in '.__FUNCTION__.'()'); 
```

这样我只需键入`ddsm`，点击`Tab`，然后我必须键入变量的确切名称。所以它会打印出以下内容：

```
dsm($variables, '$variables in ' . __FUNCTION__ . '()'); 
```

之后，我可以更改`variables`部分，并键入另一个名称，并且在字符串中使用相同的名称。一个例子：

![使用 ddsm 代码模板](../Images/2b7c966f0f43a62727699afce2c20b07.png)

但是我仍然太落后而无法键入这些内容：D，而且我很好奇在 NetBeans 中使用代码模板时是否有一种方法可以使用给定函数的所有参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T13:05:45.413

这似乎真的很难。如果您知道在声明函数时将使用宏，则可以使用如下模板：

```
// shortcut dsmfun1
function ${FUNCTION_NAME}($$${PAR1}) {
  dsm($$${PAR1}, '$$${PAR1} in ' . __FUNCTION__ . '()');

  ${selection}${cursor}
}

...

// shortcut dsmfun4
function ${FUNCTION_NAME}($$${PAR1}, $$${PAR2}, $$${PAR3}, $$${PAR4}) {
  dsm($$${PAR1}, '$$${PAR1} in ' . __FUNCTION__ . '()');
  dsm($$${PAR2}, '$$${PAR2} in ' . __FUNCTION__ . '()');
  dsm($$${PAR3}, '$$${PAR3} in ' . __FUNCTION__ . '()');
  dsm($$${PAR4}, '$$${PAR4} in ' . __FUNCTION__ . '()');

  ${selection}${cursor}
} 
```

一对模板为您提供非常快速的声明，您只需键入一次参数的名称。

如果您稍后要添加这些宏，您可能希望查看[此文档](https://blogs.oracle.com/scblog/entry/define_your_own_code_template)并实现您想要的行为（即使这可能非常棘手）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:42:44.990

为什么不直接使用 get_defined_vars() 一次性传递它们？这样，您的宏只需要是一条静态行。

```
function dsm($func, array $args)
{
    foreach ($args as $name => $value) {
        echo "in $func, arg '$name' is $value\n";
    }
}

function testModule_theme($existing, $type, $theme, $path) {
    dsm(__FUNCTION__, get_defined_vars());
}

testModule_theme(1, 2, 3, 4); 
```

输出：

```
in testModule_theme, arg 'existing' is 1
in testModule_theme, arg 'type' is 2
in testModule_theme, arg 'theme' is 3
in testModule_theme, arg 'path' is 4 
```

# json - FF SecurityError：操作不安全

> ID：11750467
> 
> 赞同：1
> 
> 时间：2012-07-31T23:23:48.410
> 
> 标签：json, security, jquery

更新 ti IE9 后，我的代码突然停止工作，IE9 和 FF 都不起作用。

FF给我“SecurityError: The operation is insecure”就行了
`data: JSON.stringify(someVar),`

当我在做 jquery ajax 调用时

```
$.ajax({
        contentType: 'application/json, charset=utf-8',
        type: "POST",
        url: "/myPage/myMethod",
        data: JSON.stringify(someVar),        
        cache: false,
        dataType: "json",
...}); 
```

任何想法为什么会发生这种情况以及我能做些什么来防止这种情况发生？似乎它正在尝试发布到不同的域，但既然情况并非如此，为什么这突然成为一个安全问题？

# python - Python：list.sort() 似乎不起作用

> ID：11750469
> 
> 赞同：0
> 
> 时间：2012-07-31T23:23:56.277
> 
> 标签：python

```
>>> x = set(['216', '217', '214', '215', '212', '213', '210', '211', '165', '264', '218', '219', '133', '132', '131', '130', '137', '136', '135', '226', '139', '138', '166', '24', '25', '26', '27', '20', '21', '22', '23', '95', '28', '29', '222', '288', '346', '4', '161', '8', '163', '348', '119', '868', '258', '120', '121', '122', '260', '124', '125', '126', '127', '128', '129', '167', '118', '59', '58', '55', '54', '57', '56', '51', '50', '53', '52', '298', '292', '293', '164', '201', '199', '179', '200', '195', '194', '706', '134', '191', '190', '193', '192', '115', '114', '88', '89', '111', '110', '113', '176', '82', '83', '80', '81', '86', '87', '84', '85', '117', '198', '3', '177', '171', '7', '247', '309', '225', '306', '307', '178', '244', '108', '109', '241', '240', '102', '103', '100', '101', '106', '107', '104', '105', '39', '38', '33', '32', '31', '30', '37', '36', '35', '34', '642', '181', '393', '205', '223', '207', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '175', '174', '173', '172', '254', '170', '203', '249', '248', '182', '183', '180', '2', '162', '187', '184', '6', '220', '188', '189', '197', '202', '313', '196', '221', '185', '99', '98', '168', '169', '229', '228', '91', '90', '93', '92', '160', '94', '97', '96', '11', '10', '13', '12', '15', '14', '17', '16', '19', '18', '272', '250', '116', '204', '151', '150', '153', '152', '155', '154', '157', '156', '159', '158', '112', '279', '234', '235', '236', '237', '231', '232', '224', '48', '49', '46', '47', '44', '45', '42', '43', '40', '41', '1', '320', '5', '9', '146', '147', '144', '145', '142', '143', '140', '141', '208', '394', '148', '149', '77', '76', '75', '74', '73', '72', '71', '70', '79', '78', '263', '262', '472', '123', '276'])
>>> type(x)

    <type 'set'> 
```

现在我创建一个列表

```
>>> y = list(x)
>>> type(y)
<type 'list'> 
```

现在我排序

```
>>> y.sort()

>>> y

['1', '10', '100', '101', '102', '103', '104', '105', '106', '107', '108', '109', '11', '110', '111', '112', '113', '114', '115', '116', '117', '118', '119', '12', '120', '121', '122', '123', '124', '125', '126', '127', '128', '129', '13', '130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '14', '140', '141', '142', '143', '144', '145', '146', '147', '148', '149', '15', '150', '151', '152', '153', '154', '155', '156', '157', '158', '159', '16', '160', '161', '162', '163', '164', '165', '166', '167', '168', '169', '17', '170', '171', '172', '173', '174', '175', '176', '177', '178', '179', '18', '180', '181', '182', '183', '184', '185', '187', '188', '189', '19', '190', '191', '192', '193', '194', '195', '196', '197', '198', '199', '2', '20', '200', '201', '202', '203', '204', '205', '207', '208', '21', '210', '211', '212', '213', '214', '215', '216', '217', '218', '219', '22', '220', '221', '222', '223', '224', '225', '226', '228', '229', '23', '231', '232', '234', '235', '236', '237', '24', '240', '241', '244', '247', '248', '249', '25', '250', '254', '258', '26', '260', '262', '263', '264', '27', '272', '276', '279', '28', '288', '29', '292', '293', '298', '3', '30', '306', '307', '309', '31', '313', '32', '320', '33', '34', '346', '348', '35', '36', '37', '38', '39', '393', '394', '4', '40', '41', '42', '43', '44', '45', '46', '47', '472', '48', '49', '5', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '6', '60', '61', '62', '63', '64', '642', '65', '66', '67', '68', '69', '7', '70', '706', '71', '72', '73', '74', '75', '76', '77', '78', '79', '8', '80', '81', '82', '83', '84', '85', '86', '868', '87', '88', '89', '9', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99'] 
```

但是检查y中的元素，它们似乎没有排序。这里有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T23:26:17.420

如果您想将它们排序为`int`s，即按数字而不是按字典顺序，请使用`y = sorted(x, key=int)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T23:27:36.020

因为这些是您要排序的字符串，例如“1”、“2”和“100”，所以它们按组成字符串的字节排序......而不是字符串所代表的数字。

因为代表字符 '1' 的字节少于代表字符 '2' 的字节，所以所有以 '1' 开头的字符串都会排在第一位。等等等等

您需要将字符串转换为整数，然后对它们进行排序以使它们按数字顺序排序。

G。/

# mysql - MySQL 之间没有抢到结束日期？

> ID：11750473
> 
> 赞同：0
> 
> 时间：2012-07-31T23:24:04.333
> 
> 标签：mysql

我有一个查询：

```
SELECT ... FROM orders WHERE date_created BETWEEN '2012-07-30' AND '2012-07-30' 
```

它返回 0 个结果，尽管 date 有 1000 多个条目`2012-07-30`。我发现`BETWEEN`根本没有抓住 END 日期，所以如果是

```
BETWEEN '2012-07-28' AND '2012-07-30' 
```

...它应该抓住我 28、29 但不是 30 的条目。

我怎样才能让它自己也采取结束日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:27:00.337

告诉它一天的结束而不是开始。

```
'2012-07-30 23:59:59' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:38:20.620

永远不要使用`BETWEEN`日期（尤其是日期时间）。您可以使用：

```
WHERE date_created >= '2012-07-30' 
  AND date_created < '2012-07-31' 
---or:             < '2012-07-30' + INTERVAL 1 DAY
-------------------^-------------- notice the lack of the equal sign here 
```

它同样适用于`DATE`,`DATETIME`和`TIMESTAMP`数据类型。

请注意，建议的解决方案可能仍然会遗漏一些行`BETWEEN '2012-07-30' AND '2012-07-30 23:59:59'`。

有关详细说明，请阅读这篇不错的博客文章：

**[BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)**

该博客讨论了 SQL-Server 问题，但大多数部分`BETWEEN`也适用于 MySQL（除了尚不存在的毫秒支持，thanx @Ignacio 进行更正）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:26:58.147

在查询中为结束日期添加一天：

```
 BETWEEN('2012-07-28', DATE_ADD('2012-07-30', INTERVAL 1 DAY) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T23:27:42.543

你为什么不简单地使用

... WHERE date_created = '2012-07-30'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T00:28:14.870

只是为了在执行此操作 (min <= expr AND expr <= max) 之间添加更多信息，从[这里获取](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

正如其他人指出的那样，您错过了时间，最好是时间戳，除非日期用于诸如生日之类的事情

# jasper-reports - JasperReports：通过参数映射和详细记录传递列表，每条记录打印在新页面上

> ID：11750478
> 
> 赞同：5
> 
> 时间：2012-07-31T23:24:25.943
> 
> 标签：jasper-reports

我正在尝试为新车和二手车创建一个包含 2 个子报告的报告。

我已经按照 JavaBeans 规范定义了一个车辆 bean。我正在考虑使用参数映射通过主报告将此数据传递给子报告，如将[JRBeancollection 数据源传递到主报告和子报告](https://stackoverflow.com/questions/11426174/passing-jrbeancollection-datasourse-to-master-report-and-subreport)帖子中所述。

到目前为止，我采取的步骤如下：

***第一步***-*将集合作为参数传递*

```
Map<String, Object> jasperParameter = new HashMap<String, Object>();
jasperParameter.put("new_Vehicles", createNewVehicles()); //returns a collection of vehicles. 
```

***第二步***-*在我的主报告中创建一个参数`new_Vehicles`并将其设置为`Collection`数据类型*

***第三步***-*为子报表创建数据源表达式 `net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{new_Vehicles})`*

***第四步***-*在子报告中**创建一个字段（只是为了在我添加更多字段之前让它工作） 。`vehicleId`*

我遇到并希望得到任何帮助的问题/问题是：
a）当我编译时，它给了我一条错误消息，上面提到的数据源无法解析为一种类型。我做错了什么？

好的，所以我想我可能已经通过在数据表达式前面添加“新”来超越异常，`new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{new_Vehicles})`.

但是，现在如果我将两辆新车添加到列表中，它的打印分两页，基本上是列表中每个元素一页。我的列标题在***列标题***带中，我的字段在***详细信息***带中。

关于如何防止将列表中的每个元素放在不同页面上的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:36:09.483

删除未使用的波段和/或将详细波段调整为与字段相同的高度。

# jquery - 逃跑的剧本？

> ID：11750482
> 
> 赞同：0
> 
> 时间：2012-07-31T23:24:44.253
> 
> 标签：jquery, asp.net, ajax

我的 javascript 设置如下 -

```
function UpdateLevelRemove() {
  //Do something
    var ajaxCall = $.ajax({ data: { Svc: cntnrRoot,
        Cmd: 'updateLEvel',
        updatePrivacyAction: 'Remove'
    },
        dataType: "text",
        context: this,
        cache: false
    });

    $.when(ajaxCall).then(function () {
        updateLevelRemoveSuccess(recordID)
    });    
}

function updateLevelRemoveSuccess(recordID) {
    //Do something

    __doPostBack('', null);
} 
```

我觉得每次我调用具有这种结构的函数时，我的进程都会变慢并且我得到一个“停止运行脚本？” 错误。

我在正确的道路上还是可以添加一些东西来停止该脚本？喜欢处理 .done 还是 .always？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:43:59.130

脚本某处存在无限循环

Firebug 有一个“脚本运行中断”切换按钮，您可以单击该按钮并中断正在运行的脚本。打破后继续前进，直到找到错误或循环。

您还可以尝试运行 firebug 分析器以查看正在执行的函数。

# apache - mod rewrite 未在 2 级链接上显示内容

> ID：11750484
> 
> 赞同：0
> 
> 时间：2012-07-31T23:25:03.947
> 
> 标签：apache, mod-rewrite

您好，我在我建立的个人网站上有一个用于 seo 友好 url 的 mod_rewrite 脚本。该脚本运行良好，直到我注意到我无法访问我的管理文件夹，该文件夹是服务器上的真实目录。在我进行第一次更改之前，.htacsess 看起来像这样。

* * *

```
Options +SymLinksIfOwnerMatch
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteRule \.(css|jpe?g|gif|png|js)$ - [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ index.php?page=$1
RewriteRule ^(.*)/(.*)$ index.php?page=$1 
```

* * *

所以我修改了脚本并添加了第二组这两个规则：

RewriteCond %{REQUEST_FILENAME} !-d RewriteCond %{REQUEST_FILENAME} !-f

就在最后一条规则之前，所以它看起来像这样，没有前 4 行代码：

```
RewriteRule \.(css|jpe?g|gif|png|js)$ - [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ index.php?page=$1

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)/(.*)$ index.php?page=$1 
```

* * *

一旦我这样做了，我就能够访问管理目录，但现在内容不会显示在第二级链接上，所以看起来最后一条规则被忽略了。

任何人都可以帮我看看我做错了什么，我会非常感激。

瑞恩鲍尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:26:27.003

你不应该需要第二条规则。如果你真的想让它工作，它应该是 `RewriteRule ^(.*)/(.*)$ index.php?page=$1/$2`，因为第二个`(.*)`不是`$1`.

# objective-c - Objective -c 委托语法查询

> ID：11750486
> 
> 赞同：1
> 
> 时间：2012-07-31T23:25:06.490
> 
> 标签：objective-c, ios

我是 Objective-c 的新手，对委托的使用方式非常困惑。我遇到了这段代码，我想用它来澄清一些疑问。

```
#import <Foundation/Foundation.h>

@protocol ProcessDataDelegate <NSObject>

@required
- (void) processSuccessful: (BOOL)success;

@end

@interface ClassWithProtocol : NSObject 
{
  id <ProcessDataDelegate> delegate;
}

@property (retain) id delegate;

 -(void)startSomeProcess;

@end 
```

在这里，有 2 处对“代表”一词的引用，任何人都可以解释在“id 角括号委托角括号封闭”的上下文中使用它的含义吗？

同样，有一个名为 delegate 的属性。它不应该引起任何冲突吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:28:34.893

不，只有一个属性，由`@property (retain) id delegate`;定义的那个。另一个是*（某种）*私有变量，`NSObject`它不是objective-c意义上的属性......然后，你`@synthetize`的.m文件中有关键字，它扩展了属性。

另一种表示法`id<protocol>`是，委托应该符合某个协议。

您可以从班级访问两者，但您只能从外部访问属性。此外，对于一个属性，还会生成一些其他的东西——在保留（不使用 ARC 时）的情况下，内存管理例程。

为了完成*（混乱？）*讲座，有一个很好的方法来拥有类私有属性，当你在 .m 文件中定义它们而不是在匿名类别中的 .h 中定义它们时，例如：

```
@interface MyClass()

@property (nonatomic, retain) NSString privateString;

@end

@implementation
@synthetize privateString;

// ...

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:35:41.823

这一行：

```
id <ProcessDataDelegate> delegate; 
```

表示有一个名为 的实例变量`delegate`，它可以是您喜欢的任何类型的对象，只要该对象采用`ProcessDataDelegate`协议即可。

后面以@property 开头的行只是为该类声明一个Objective-C 2.0 属性，该属性恰好与实例变量具有相同的名称。这不是冲突。属性的声明只是委托实例变量的 getter/setter 方法的快捷方式。

更现代的 obj-c 用法是这样的：

```
@interface ClassWithProtocol : NSObject

@property (retain) id<ProcessDataDelegate> delegate;

- (void)startSomeProcess;

@end 
```

[您可以在Apple 的 Objective-C 语言文档](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html)中阅读有关这些内容的所有内容。

# java - Android UI 线程停止从其他线程更新

> ID：11750489
> 
> 赞同：0
> 
> 时间：2012-07-31T23:25:13.363
> 
> 标签：java, android, multithreading, bluetooth, achartengine

我正在编写一个连接到蓝牙设备的 Android 应用程序，读取从设备发送的数据，将其添加到[AChartEngine](http://achartengine.org)图表，并在 TextView 中显示数据。

我的蓝牙代码与 BluetoothChat 示例代码中的线程实现非常相似（它与 SDK 一起提供）。我可以在 LogCat 中看到`ConnectedThread`循环正在执行并因此获取新数据，但是**我的 TextView 在 7 行后停止更新，**并且**图形间歇性地暂停**（更不用说它只是间歇性地响应交互）。LogCat 中没有显示任何错误。此外，如果我删除图表，TextView 的问题仍然存在。

**为什么从我的其他线程更新时我的 UI 线程不工作？**

* * *

以下是我的代码的相关部分。通过蓝牙发送的每个字符串都被接收`ConnectedThread`并发送到`BluetoothController.addToGraph()`，然后`NewPoints` `AsyncTask`从`viewer`类中运行。

```
private class ConnectedThread extends Thread {
    public ConnectedThread(BluetoothSocket socket, String socketType) { ... } // Initialize input and output streams here

    public void run() {
        while (true) {
            Log.i(TAG, "READ mConnectedThread");
            // Read from the InputStream
            byte[] buffer = new byte[1024];
            bytes = mmInStream.read(buffer);

            // Send the obtained bytes to the UI Activity
            mHandler.obtainMessage(BluetoothController.MESSAGE_READ, bytes, -1, buffer)
                    .sendToTarget();
            Log.i(TAG, "LOOPEND mConnectedThread");
        }
    }
}
public class BluetoothController extends Activity {
    private viewer plotter;
    public static final int MESSAGE_READ = 2;
    // The Handler that gets information back from the BluetoothClass
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
                case MESSAGE_READ:
                    byte[] readBuf = (byte[]) msg.obj;
                    // construct a string from the valid bytes in the buffer
                    String readMessage = new String(readBuf, 0, msg.arg1);
                    addToGraph(readMessage);
                    break;
            }
        }
    };

    protected void addToGraph(String result) {
        // process the string, create doubles x and y that correspond to a point (x,y)
        plotter.new NewPoints().execute(x, y);
    }
}
public class viewer extends Activity {
    // initialize graph, etc.

    @Override
    protected void onResume() {
        // Create handlers for textview
        textHandler = new Handler();

        // Set scrolling for textview
        myTextView.setMovementMethod(new ScrollingMovementMethod());

    protected class NewPoints extends AsyncTask<Double, Void, Void> {
        @Override
        protected Void doInBackground(Double... values) {
            mCurrentSeries.add(values[0], values[1]); // x, y

            if (mChartView != null) {
                mChartView.repaint();
            }

            final Double[] messages = values;
            textHandler.post(new Runnable() {
                @Override
                public void run() {
                    myTextView.append("(" + messages[0].toString() + ", " + messages[1].toString() + ") \n");
                }
            });

            return null;
        }
    }
} 
```

是什么赋予了？如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:50:33.360

对我来说似乎倒退了......您的 AsyncTask 正在更新您的 textview 和 currentseries，但 AsyncTask 应该用于长时间运行的任务，例如与其他设备/网络通信。您的 UI 线程应该正在更新文本视图，而您却以相反的方式得到了它

doInBackground 应该包含与您的蓝牙设备对话的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:59:03.173

当然，这里有一个来自 Dropbox api，它展示了如何在您的任务在后台进行通信工作时实现进度条。您必须为自己的邪恶目的修改它，但它是后台任务的一个很好的例子。

```
 /**
 * Here we show uploading a file in a background thread, trying to show
 * typical exception handling and flow of control for an app that uploads a
 * file
 */
public class UploadFile extends AsyncTask<Void, Long, Boolean> {

    private DropboxAPI<?> mApi;
    private File mFile;

    private long mFileLen;
    private UploadRequest mRequest;
    private Context mContext;
    private final ProgressDialog mDialog;

    private String mErrorMsg;

public UploadFile(Context context, DropboxAPI<?> api, File file) {
    // We set the context this way so we don't accidentally leak activities
    mContext = context.getApplicationContext();

    mFileLen = file.length();
    mApi = api;
    mFile = file;

    mDialog = new ProgressDialog(context);
    mDialog.setMax(100);
    mDialog.setMessage("Uploading " + file.getName());
    mDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mDialog.setProgress(0);
    mDialog.setButton(Dialog.BUTTON_POSITIVE ,(CharSequence) "Cancel", new Dialog.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // This will cancel the putFile operation
            mRequest.abort();
        }
    });
    mDialog.show();
}

@Override
protected Boolean doInBackground(Void... params) {
    try {
        // By creating a request, we get a handle to the putFile operation,
        // so we can cancel it later if we want to
        FileInputStream fis = new FileInputStream(mFile);
        String path = mFile.getName();
        mRequest = mApi.putFileOverwriteRequest(path, fis, mFile.length(),
                new ProgressListener() {
            @Override
            public long progressInterval() {
                // Update the progress bar every half-second or so
                return 500;
            }

            @Override
            public void onProgress(long bytes, long total) {
                publishProgress(bytes);
            }
        });

        if (mRequest != null) {
            mRequest.upload();
            return true;
        }

    } catch (DropboxUnlinkedException e) {
        // This session wasn't authenticated properly or user unlinked
        mErrorMsg = "This app wasn't authenticated properly.";
    } catch (DropboxFileSizeException e) {
        // File size too big to upload via the API
        mErrorMsg = "This file is too big to upload";
    } catch (DropboxPartialFileException e) {
        // We canceled the operation
        mErrorMsg = "Upload canceled";
    } catch (DropboxServerException e) {
        // Server-side exception.  These are examples of what could happen,
        // but we don't do anything special with them here.
        if (e.error == DropboxServerException._401_UNAUTHORIZED) {
            // Unauthorized, so we should unlink them.  You may want to
            // automatically log the user out in this case.
        } else if (e.error == DropboxServerException._403_FORBIDDEN) {
            // Not allowed to access this
        } else if (e.error == DropboxServerException._404_NOT_FOUND) {
            // path not found (or if it was the thumbnail, can't be
            // thumbnailed)
        } else if (e.error == DropboxServerException._507_INSUFFICIENT_STORAGE) {
            // user is over quota
        } else {
            // Something else
        }
        // This gets the Dropbox error, translated into the user's language
        mErrorMsg = e.body.userError;
        if (mErrorMsg == null) {
            mErrorMsg = e.body.error;
        }
    } catch (DropboxIOException e) {
        // Happens all the time, probably want to retry automatically.
        mErrorMsg = "Network error.  Try again.";
    } catch (DropboxParseException e) {
        // Probably due to Dropbox server restarting, should retry
        mErrorMsg = "Dropbox error.  Try again.";
    } catch (DropboxException e) {
        // Unknown error
        mErrorMsg = "Unknown error.  Try again.";
    } catch (FileNotFoundException e) {
    }
    return false;
}

@Override
protected void onProgressUpdate(Long... progress) {
    int percent = (int)(100.0*(double)progress[0]/mFileLen + 0.5);
    mDialog.setProgress(percent);
}

@Override
protected void onPostExecute(Boolean result) {
    mDialog.dismiss();
    if (result) {
        showToast("File successfully uploaded");
    } else {
        showToast(mErrorMsg);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:10:16.003

我也在使用 achartengine 和 AsynkTask 编写一个类似的应用程序。您应该在 doInBackground 中管理蓝牙，并在收到新数据时调用 publishProgress 以在 onProgressUpdate 方法上更新您的 UI（TextView 和 Achartengine）。doInBackground 永远不应该更新 UI，奇怪的是它实际上对你有用！如果您正在绘制具有“低”刷新率的实时数据，那将是可行的。如果不是，我建议将蓝牙部分实现为服务并将您的数据广播到管理和更新 UI 的活动。如果您收到大量数据，您会发现通过广播发送数据会限制您的吞吐量，因为您必须将数据类设为 Parcelable，这非常慢，并且您很快就会遇到 Android 的 binder 架构的限制，该架构用于“Localmanager.

如果您打算使用 achartengine 进行快速实时绘图，您应该首先检查我的问题之一，关于您稍后会发现的问题：[achartengine 准备好进行实时绘图了吗？](https://stackoverflow.com/questions/14187716/is-achartengine-ready-for-realtime-graphing)

# svn - 颠覆忽略配置？

> ID：11750493
> 
> 赞同：1
> 
> 时间：2012-07-31T23:25:36.463
> 
> 标签：svn

今天早些时候安装 subversion 1.6.17 后，我按照本指南在我的服务器上设置 subversion：

[http://www.tonyspencer.com/2007/03/02/setup-a-subversion-server-in-4-minutes/](http://www.tonyspencer.com/2007/03/02/setup-a-subversion-server-in-4-minutes/)

（对于那些可能担心的人，我也确实在配置中添加了领域。）

但是，在使用 Dreamweaver 时，我能够从存储库下载所有文件，但在提交文件时继续获得错误的身份验证 (170001)。关于我做错了什么的任何想法？

到目前为止，我尝试过的最多的是将整个 repo 文件夹更改为 777 以确保所有内容都可以访问它。

编辑：

我正在使用内置 svn 1.6.9 的 Dreamweaver CS5.5。

另一方面，在指南中说应该提示我输入用户名和密码时，我没有。

# php - 如何使用 PHP 轻松发送 POST 请求并接收 + 解释 JSON

> ID：11750495
> 
> 赞同：1
> 
> 时间：2012-07-31T23:25:49.393
> 
> 标签：php, json, api, post, request

我正在使用 Foursquare API，我需要向他们的服务器发出请求，以便接收 JSON 格式的访问令牌（https://developer.foursquare.com/overview/auth）。如何使用 PHP 做到这一点？

我还没有在网上找到任何权威的教程，这就是我在这里问的原因。我已经看到了一些我不太了解的与 cURL 相关的东西，那么有什么简单的方法可以做到这一点吗？我在使用 AJAX 之前已经完成了它，它非常不言自明，但它在 PHP 中似乎非常复杂，远远超过它的外观:(

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:35:07.860

```
<?php

# url_get_contents function by Andy Langton: http://andylangton.co.uk/

function url_get_contents($url,$useragent='cURL',$headers=false,$follow_redirects=false,$debug=false) {

# initialise the CURL library
$ch = curl_init();

# specify the URL to be retrieved
curl_setopt($ch, CURLOPT_URL,$url);

# we want to get the contents of the URL and store it in a variable
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

# specify the useragent: this is a required courtesy to site owners
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);

# ignore SSL errors
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

# return headers as requested
if ($headers==true){
curl_setopt($ch, CURLOPT_HEADER,1);
}

# only return headers
if ($headers=='headers only') {
curl_setopt($ch, CURLOPT_NOBODY ,1);
}

# follow redirects - note this is disabled by default in most PHP installs from 4.4.4 up
if ($follow_redirects==true) {
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
}

# if debugging, return an array with CURL's debug info and the URL contents
if ($debug==true) {
$result['contents']=curl_exec($ch);
$result['info']=curl_getinfo($ch);
}

# otherwise just return the contents as a variable
else $result=curl_exec($ch);

# free resources
curl_close($ch);

# send back the data
return $result;
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:42:02.187

好吧，按照您提供的链接，试试这个：

重定向链接中的脚本（YOUR_REGISTERED_REDIRECT_URI）

```
if(isset($_GET['code']))
{
    $code = $_GET['code'];
    $url = "https://foursquare.com/oauth2/access_token?client_id=YOUR_CLIENT_ID&client_secret=YOUR_CLIENT_SECRET&grant_type=authorization_code&redirect_uri=YOUR_REGISTERED_REDIRECT_URI&code=$code";

    $ch = curl_init($url);

    curl_setopt($ch, CURLOPT_POST);

    $json = curl_exec($ch);

    var_dump($json);
} 
```

注意：阅读您提供的教程后，我没有看到任何对 POST 请求的引用，只有请求，所以您可以试试这个（而不是 cURL）

```
$json = file_get_contents($url); 
```

如果它是一个简单的 GET 请求，那么 file_get_contents 可能会起作用。

# ejb-3.0 - EJB3 远程调用抛出 ClassCastException

> ID：11750498
> 
> 赞同：0
> 
> 时间：2012-07-31T23:25:57.093
> 
> 标签：ejb-3.0, rmi, classcastexception

不知何故，当我尝试远程远程 EJB3 调用时，会抛出 ClassCastException。

**服务器：**

```
public interface CardManager extends Manager {
     public CardCheckResponse check(CardCheckRequest request);
}

@Remote
public interface RMICardManagerRemote extends CardManager {
     static String CARD_CHECK_RMI_REMOTE_JNDI = "CardCheckRMI/remote";
}

@Stateless
@RemoteBinding(jndiBinding = RMICardManagerRemote.CARD_CHECK_RMI_REMOTE_JNDI)
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
public class RealRMICardManager implements RMICardManagerRemote {
    private CardManager cardManager = injector.getInstance(CardManager.class);

    @Override
    public CardCheckResponse check(CardCheckRequest request) {
    return cardManager.check(request);
    }

} 
```

**客户：**

```
InitialContext remoteContext = new InitialContext(PropertiesUtil.getCardCheckProp());
RMICardManagerRemote rmiCardManagerRemote = (RMICardManagerRemote) remoteContext.lookup(RMICardManagerRemote.CARD_CHECK_RMI_REMOTE_JNDI);

//throws ClassCastException
CardCheckResponse cardCheckResponse = rmiCardManagerRemote.check(cardCheckRequest); 
```

**堆栈跟踪：**

```
java.lang.ClassCastException: com.cardcheck.dto.CardCheckResponse cannot be cast to com.cardcheck.dto.CardCheckResponse
    at $Proxy307.check(Unknown Source)
    at com.xxx.cardCheck(RechargeAdapter.java:267) 
```

我检查了它是否是重复的 jar，但事实并非如此。有没有人有任何想法来解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:52:59.170

解决了！

该问题是由 JBoss 的统一类加载器引起的。我解决了在 jboss-app.xml 中创建自定义加载器的问题：

```
<loader-repository> com.cardcheck loader = cardCheck heard </ loader-repository> 
```

# lucene - 如何从 Lucene 3.6 中的文档中提取 NumericField

> ID：11750501
> 
> 赞同：0
> 
> 时间：2012-07-31T23:26:12.880
> 
> 标签：lucene

我创建了一个用于记录的 Lucene 索引，其中每个日志记录都是一个文档。每个文档都有一个编码为 NumericField 的时间戳。创建索引和查询索引工作正常，我无法做的一件事是在我想显示文档时从文档中提取时间戳。在线 Lucene 文档说我需要使用 Fieldable 来检索 NumericFields，但我不知道如何从 Fieldable 到 NumericField。

任何人都可以指出一些文档或更好的例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:37:01.033

我认为这应该可行，您尝试过吗？：

```
NumericField num = (NumericField) theFieldable; 
```

# ruby-on-rails - 如何验证其他 rails 表中的字段？

> ID：11750505
> 
> 赞同：0
> 
> 时间：2012-07-31T23:26:18.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

好的，所以我有一个联系人模型

```
class Contact < ActiveRecord::Base
  has_one :profile
  validates_presence_of :first_name
  validates_presence_of :last_name
  validates_presence_of :email

class Profile < ActiveRecord::Base
   belongs_to :contact 
```

在我的表单上，我有来自该个人资料的字段，并且显示了联系人和联系人的验证，但我想验证个人资料中的字段。我假设将它添加到控制器会添加到错误消息中。

```
 @contact.errors.add(:base, "Profile Company cant be blank") 
```

有任何想法吗

我的表单是 form_tag BTW，由于各种原因我无法更改它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:01:15.293

我不确定这是否可行

```
class Contack < ActiveRecord::Base
  validates_associated :profile,
    :if => Proc.new { |a| a.profile.present? }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:33:12.257

如果要在保存拥有记录时检查关联记录的有效性：

```
 class Contact
        validates_associated :profile 
```

# xml - 使用 XSLT 从整个 XML 文件中删除属性

> ID：11750508
> 
> 赞同：2
> 
> 时间：2012-07-31T23:26:39.547
> 
> 标签：xml, xslt, xhtml, xslt-1.0

在使用 XSLT 将其转换为其他 XML 时，我必须从整个 XML 文件中删除特定属性。无论何时发生，我都必须从整个文档中删除“onclick”事件。

**输入文件：**

```
<?xml version="1.0" encoding="utf-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
    </head>  
    <body>
      <div class="iDev">
        <div class="q">
          T <input type="radio" name="o0" id="t0" onclick="getFeedback()"/> 
        </div>
        <div class="q">
          T <input type="radio" name="o1" id="t1" onclick="getFeedback()" /> 
        </div>
      </div>
    </body>
    </html> 
```

**我的 XSLT：** 我尝试了以下方法来删除此属性（在身份模板之后）：

```
<xsl:template match="xhtml:body//xhtml:input/@onclick /> 
```

在某些情况下，它删除了 'onclick' 事件，但是当我通过另一个模板来更改 'name' 和 'id' 属性的值并在输入标签内添加一个属性时，这个 'onclick' 事件仍然保持原样。请帮我解决这个问题。感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:45:49.413

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="http://www.w3.org/1999/xhtml"
 xmlns="http://www.w3.org/1999/xhtml" exclude-result-prefixes="x">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="@onclick"/>

 <xsl:template match="x:input">
  <xsl:element name="input" namespace="http://www.w3.org/1999/xhtml">
   <xsl:attribute name="name">
     <xsl:value-of select="concat('n',substring(@name,2))"/>
   </xsl:attribute>
   <xsl:attribute name="id">
     <xsl:value-of select="concat('i',substring(@id,2))"/>
   </xsl:attribute>
   <xsl:attribute name="someNew">newVal</xsl:attribute>
    <xsl:apply-templates select=
    "@*[not(name()='name' or name()='id')] | node()"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
    </head>
    <body>
        <div class="iDev">
            <div class="q">           T 
                <input type="radio" name="o0" id="t0" onclick="getFeedback()"/>
            </div>
            <div class="q">           T 
                <input type="radio" name="o1" id="t1" onclick="getFeedback()" />
            </div>
        </div>
    </body>
</html> 
```

**更改`name`and`id`属性并为每个`input`元素添加一个新属性。它还“删除”了`onclick`属性**：

```
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-type" content="text/html;  charset=utf-8"/>
   </head>
   <body>
      <div class="iDev">
         <div class="q">           T 
                <input name="n0" id="i0" someNew="newVal" type="radio"/>
         </div>
         <div class="q">           T 
                <input name="n1" id="i1" someNew="newVal" type="radio"/>
         </div>
      </div>
   </body>
</html> 
```

# java - 解析日志..只是想不通

> ID：11750517
> 
> 赞同：0
> 
> 时间：2012-07-31T23:27:45.913
> 
> 标签：java

好的，所以我应该制作一个脚本来解析来自 irc 频道的所有聊天日志，组合匹配名称的那些，然后按日期对聊天日志进行排序。

这是一个示例聊天记录：

```
 jul 29 19:20:53 <lol> lolfile3
    jul 31 19:20:53 <lol> lolfile3321
    aug 1 19:20:53 <lol> lolfile31324
    jul 30 19:20:53 <lol> lolfile32 
```

我需要按时间戳（7 月 30 日 19:20:53）订购它们，但是我已经尝试了几个小时但无济于事。

这是我已经拥有的代码（这是文件合并、文件写入和所有内容。时间戳是我需要做的最后一件事！）

我不知道如何在我的问题中添加代码，所以我将您链接到 pastebin： http: [//pastebin.com/2VrSRZZr](http://pastebin.com/2VrSRZZr)

如果您能通过发布代码来帮助我，非常感谢。显然我不希望被喂食，但一些代码会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:36:38.190

我不完全确定您示例中的“”是什么，因此这可能不完全正确，但它显示了如何将时间戳字符串转换为可比较的对象。希望这能让你走上正确的轨道。

```
DateFormat dateFormat = new SimpleDateFormat("MMM dd yyyy")
List<String> lines = readLines(); // use a function of your to read the lines
List<LogEntry> entries = new LinkedList<LogEntry>();
for ( String line : lines ) {
  int splitIndex = line.indexOf("<log>");
  String time = line.substring(0,splitIndex);
  Date date = dateFormat.parse(time);
  entries.add(new LogEntry(date,line.substring(splitIndex));
}

Collections.sort(entries);

// create a class to hold the log contents and the timestamp

class LogEntry implements Comparable<LogEntry> {
    private final Date time;
    private final String entry;

    public void compare(LogEntry other) {
       return time.compareTo(other.time);
    }
} 
```

编辑：我运行了您在 pastebin 中创建的代码，输出为

```
Fri Jul 29 17:09:50 EDT 2011 <phl0w> tes
Sun Jul 31 17:08:49 EDT 2011 <yyyy> alewrwae
Sun Jul 31 17:09:50 EDT 2011 <phl0w> tes
Sun Jul 31 17:10:49 EDT 2011 <Andy_> Speed
Sun Jul 31 17:10:51 EDT 2011 <Andy_> lol Speed
Sun Jul 31 17:11:51 EDT 2011 <xxxx> wrkjaer
Sun Jul 31 19:20:50 EDT 2011 <phl0w> lolfile1
Sun Jul 31 19:20:53 EDT 2011 <phl0w> lolfile3 
```

# objective-c - 使异步块在其他代码之前运行

> ID：11750518
> 
> 赞同：0
> 
> 时间：2012-07-31T23:27:51.233
> 
> 标签：objective-c, ios, xcode

我正在尝试从 ALAssetLibrary 获取视频，以便我可以用它做一些事情。我正在使用块来做到这一点：

```
NSMutableArray *assets = [[NSMutableArray alloc] init];

library = [[ALAssetsLibrary alloc] init];

NSLog(@"library allocated");

// Enumerate just the photos and videos group by using ALAssetsGroupSavedPhotos.

[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

    NSLog(@"Begin enmeration");

    [group setAssetsFilter:[ALAssetsFilter allVideos]];

    NSLog(@"Filter by videos");

    [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:[group numberOfAssets]-1]

                            options:0

                         usingBlock:^(ALAsset *alAsset, NSUInteger index, BOOL *innerStop) {

                             NSLog(@"Asset retrieved");

                             if (alAsset) {

                                 ALAssetRepresentation *representation = [alAsset defaultRepresentation];

                                 NSURL *url = [representation url];

                                 AVAsset *recentVideo = [AVURLAsset URLAssetWithURL:url options:nil];

                                 [assets addObject:recentVideo];

                                 NSLog(@"Asset added to array");

                             } 
                         }];
}

AVMutableComposition *composition = [[AVMutableComposition alloc] init];

NSLog(@"creating source");
AVURLAsset* sourceAsset = [assets objectAtIndex:0]; 
```

当我运行代码时，块被跳过，当我尝试访问数组中的元素时程序崩溃，因为它不存在。有人告诉我这是因为这些块是异步的，但我不确定如何让它们在其他所有操作之前运行。performSelectorOnMainThread 听起来它可能会这样做，但我真的找不到任何解释我将如何这样做的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:48:17.860

如果你想

```
AVMutableComposition *composition = [[AVMutableComposition alloc] init];

NSLog(@"creating source");
AVURLAsset* sourceAsset = [assets objectAtIndex:0]; 
```

在枚举之后发生`group`，然后将其放在第一个块内，但在枚举之后：

```
AVMutableComposition *composition = [[AVMutableComposition alloc] init];
__block AVURLAsset* sourceAsset = nil;
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

    // snip...

    [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:[group numberOfAssets]-1]
                            options:0
                         usingBlock:^{
                             // snip... 
                         }];
    sourceAsset = [assets objectAtIndex:0];
    // Now do other things that depend on sourceAsset being set 
}]; 
```

`__block`关键字允许将指针设置为块内的新对象；否则变量不可重新分配。

# javascript - 关闭模型的淘汰订阅者并重新打开它

> ID：11750519
> 
> 赞同：4
> 
> 时间：2012-07-31T23:28:05.940
> 
> 标签：javascript, knockout.js

我是淘汰赛新手，不知道我这样做是否正确

我有一个购物车编辑器，就像淘汰现场示例一样，只是我想要一个更高级的**产品选择器**。我的产品实际上有**两种**代码，用户必须能够输入其中一种并在他的购物车上获取产品的完整详细信息。所以我将为每种代码输入两个输入，当用户在其中任何一个输入代码时，我应该进行 ajax 调用并加载产品信息（包括 productId、productName、the_other_code 等）。

我尝试通过订阅 code1 和 code2 来实现这一点 - 在从服务器获取数据后进行 ajax 调用并设置模型的数据，但它会触发一种递归事件（订阅）并因此重复调用 ajax 方法。因此我相信如果可以在方法期间将淘汰订阅设置为OFF `SetData`，则不会发生递归行为。

```
function Product(data) 
{
    var self = this;

    self.ProductId = ko.observable();
    self.Code1 = ko.observable();
    self.Code2 = ko.observable();
    self.Title = ko.observable();

    self.SetData = function (itemdata) {
        self.ProductId (itemdata ? itemdata.ProductId : null);
        self.Code1(itemdata ? itemdata.Code1 : null);
        self.Code2(itemdata ? itemdata.Code2 : null);
        self.Title(itemdata ? itemdata.Title : null);
    };

    self.SetData(data);

    self.Code1.subscribe(function (value) 
    {
        var productInfo = Ajax_GetPartDataWithCode1(value);
        self.SetData(productInfo );
    });

    self.Code2.subscribe(function (value) {
        var productInfo = Ajax_GetPartDataWithCode2(value);
        self.SetData(productInfo );
    });
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:25:35.983

一个简单的布尔标志就足够了。进入时将其设置为 true，`SetData`退出时将其设置为 false，然后如果设置了标志，则在订阅回调中立即返回：

```
 var updatingData = false;

    self.SetData = function (itemdata) {
        updatingData = true;
        self.ProductId (itemdata ? itemdata.ProductId : null);
        self.Code1(itemdata ? itemdata.Code1 : null);
        self.Code2(itemdata ? itemdata.Code2 : null);
        self.Title(itemdata ? itemdata.Title : null);
        updatingData = false;
    };

    self.SetData(data);

    self.Code1.subscribe(function (value) 
    {
        if (updatingData) return;
        var productInfo = Ajax_GetPartDataWithCode1(value);
        self.SetData(productInfo);
    });

    self.Code2.subscribe(function (value) {
        if (updatingData) return;
        var productInfo = Ajax_GetPartDataWithCode2(value);
        self.SetData(productInfo);
    }); 
```

# php - 带有 PHP 的数组不会计算

> ID：11750521
> 
> 赞同：1
> 
> 时间：2012-07-31T23:28:06.090
> 
> 标签：php, arrays

我有一个`config.php`包含一些常量和方法的文件。
我有一个`test.php`文件，它调用`config.php`.
相关代码为：

```
$Questions = array(
    1 => "Is he/she nice?1",
    2 => "Is he/she sweet?2",
    3 => "Is he/she nice?3",
    4 => "Is he/she sweet?4",
    5 => "Is he/she nice?5",
    6 => "Is he/she sweet?6",
    7 => "Is he/she nice?7",
    8 => "Is he/she sweet?8",
    9 => "Is he/she nice?9",
    10 => "Is he/she sweet?10"
);

function PrintAnswersOnMe($uid)
{
    $uid = antiSQLi($uid);
    $query = "SELECT * FROM AnsAns WHERE fid='".$uid."'";
    $result = mysql_query($query);
    while($row = mysql_fetch_array($result))
    {
        $rrr = $row[2];
        echo $Questions[1];
        echo $rrr . ' ' . $Questions[$rrr];
        echo "You'r friend <img src='http://graph.facebook.com/".$row['uid']."/picture/' /> answered " . (($row['answer'] == 1) ? "yes" : "no") . " about wether you're ". $rrr.": " . $Questions[$rrr];
        echo "<br /> " . $Questions['2'] . "<br/>";
    }
} 
```

该`test`文件仅调用`PrintAnswersOnMe`. （它包括它）
一切正常的文件，除了*没有* `$Question[...]`评估到实际的 HTML 输出！
为了检查这一点，我添加了`$Questions[2]`- 而且`$Questions['2']`- 它们都没有产生 HTML 输出。该循环确实执行了，因为其他所有内容都进入了 HTML。
有趣的是，它内部`test.php`确实有效——`echo $Questions[...]`实际上是产品到 HTML 输出。有人知道这种神秘的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:34:13.790

```
function PrintAnswersOnMe($uid, $questions) {
//Code goes here
} 
```

然后你就可以访问了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:32:27.763

您需要在`global $Questions;`函数的开头添加`$uid = antiSQLi($uid);`.

# python - pymongo如何查询嵌套文档以忽略键但获取其值？

> ID：11750522
> 
> 赞同：0
> 
> 时间：2012-07-31T23:28:15.273
> 
> 标签：python, mongodb, pymongo

我在 mongoDB 中插入了一个文档，格式如下：

```
{'Name':{'Surname':{'JON':{'AGE':10}}}} 
```

在上面的示例中，我想构建一个查询以忽略“JON”但获取所有用户的 AGE 值。

我试过像：

```
db.names.find({'Name.Surname':{$regex:'.'}}) but didn't work.... 
```

我正在寻找的是这样的：

```
db.names.find({'Name.Surname.<matchanything>.AGE':{$gt:0}}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:43:20.313

我认为您拥有的文档方案将使您难以查询，即使 MongoDB 以这种方式支持通配符匹配（目前不支持）。基本上它会归结为进行大量的表扫描。

是否有理由将年龄作为姓氏的属性？

另一种方法是使文档结构更符合

```
{
    "_id" : ObjectId(),
    "Name" : "something",
    "Surname" : "JON",
    "Age" : 10
} 
```

这对于查询更方便：

```
db.user.find({"Name":"something"})
db.user.find({"Age":{"$gte":5}}) 
```

# algorithm - 可靠来源算法

> ID：11750525
> 
> 赞同：2
> 
> 时间：2012-07-31T23:28:50.757
> 
> 标签：algorithm, language-agnostic

“事实证明（惊喜）互联网上充斥着谣言和不可靠的信息。” - 阿诺德·施瓦辛格

虽然其中一些信息可以“即时”分析，例如本示例中的信息，但其他一些信息需要一段时间才能追溯到一个或多个可靠来源。

我在想是否可以制作一个自动检查算法，我们称之为“BS tagger”，例如，它作为一个 firefox 插件实现，可以确定所选文本的真实性以及与其所谓的作者匹配的真实性/来源。

我能想到的第一种实现这个算法的方法是做一个简单的谷歌搜索并检查结果的数量，但事实证明（令人惊讶的）流行度和真实性/真实性并没有那么强的相关性。

然后我想到了一些更详细的东西：某种，我们称之为“BSRank”算法，它的工作方式几乎相同，谷歌搜索等等，但只有当它找到一个“可靠”的来源复制文本时，它才会增加概率它的“真实性”（或真实性，如果只是检查所谓的鲍勃迪伦报价而不是所谓的原始可口可乐配方）。

然后我被卡住了：显然要使这个算法工作，我需要两件事：

- 可靠来源的动态“白名单”。

- 一些算法来识别和排名这个来源，webrep 风格，但比这更复杂，因为一个网站可以有许多用户或作者发布，一个网站不应该仅仅因为他们在旁边发布就给他们同样的可信度彼此。

所以算法里面的算法是这里真正的难点。我的疑虑太笼统了，我什至不知道它们是否属于这里，但我真的很感激一些意见：有什么建议吗？有没有人看到更好的方法来解决这个问题或任何相关项目，或者可以向我推荐一些关于这个主题的好文献？你认为这可以用学生业余时间的资源来完成，还是对于菜鸟程序员来说项目太大了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T00:34:51.523

这听起来像是一个有趣的项目，可以像您希望的那样简单/复杂。

### 简单版

*   手动创建源白名单。

*   在这些来源中查找目标短语和演说者。

（可能来源：[http](http://thinkexist.com) ://thinkexist.com ）

### 更复杂

*   创建源的白名单和黑名单。

*   搜索目标。

*   对于包含目标的页面，确定它们是否更类似于您的白名单来源或黑名单来源。

（您需要创建一种方法来获取两个网页之间的相似性。）

### 更复杂

使用监督机器学习：

*   首先手动将一些网页标记为可靠、不可靠或介于两者之间。

*   在该训练数据上训练机器学习系统。

*   现在机器学习系统可以预测新网页的类别。

### 更复杂的++

实际上是自己编写监督机器学习系统，基于几种方法并比较结果。

### 另一个想法

使用监督机器学习系统来报告目标短语本身是否可靠，而无需寻找任何其他来源。

### 整个 9 码

使用无监督机器学习系统仅基于几个种子关键字或短语来构建白名单/黑名单网页的集合。

### 整个 10 码（为什么人们只想去 9？）

编写您自己的无监督系统，可能基于引导。

### 最后的一些想法

我建议从简单开始，然后向上移动。

此外，构建一个测试设备，让您计算特定解决方案的效果，这样您就可以比较不同的方法。

您可能希望记录系统报告的假阳性、阳性阳性、假阴性、阴性阴性和未决定的数量。

这样您就可以确定准确度和召回率，并评估您的系统。

我会假设简单的方法会提供高准确率和低召回率。

但是更复杂的方法可能会产生一个比人类验证速度快得多的系统，但它的表现不如人类。

### 最后的事情

这个问题是一个老问题，几乎不可能达到完美。

这让我想起了我最近读到的几页：

*   [蒙克豪森三难困境](http://en.wikipedia.org/wiki/M%C3%BCnchhausen_Trilemma)

*   [乌龟一路下来](http://en.wikipedia.org/wiki/Turtles_all_the_way_down)

*   [Quis Custodiet Ipsos Custodes？](http://en.wikipedia.org/wiki/Quis_custodiet_ipsos_custodes%3F)

*   [无效证明技术](http://school.maths.uwa.edu.au/~berwin/humour/invalid.proofs.html)

# matlab - 在 matlab 中导入 SVG 文件

> ID：11750526
> 
> 赞同：0
> 
> 时间：2012-07-31T23:28:52.977
> 
> 标签：matlab, svg

我正在寻找一个用于在 matlab 中导入/导出 SVG 文件的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:45:41.887

[这](http://www.mathworks.com/matlabcentral/fileexchange/7401)是一个声称将图形导出为 SVG 格式的包。

# python - 芹菜导入和 SQS 连接问题

> ID：11750531
> 
> 赞同：0
> 
> 时间：2012-07-31T23:29:29.170
> 
> 标签：python, django, celery, amazon-sqs

我正在尝试按照文档开始使用 celery，但在示例代码中遇到了难以调试的问题。我不知道我遇到的是同一个问题的两个方面，还是两个独特的问题。我可以通过 shell 连接到 SQS 队列，但不能使用 django。我不知道这种行为与导入芹菜与导入任务的问题有什么关系。

这里的“入门”指南：http: [//celery.github.com/celery/getting-started/first-steps-with-celery.html#running-the-celery-worker-server](http://celery.github.com/celery/getting-started/first-steps-with-celery.html#running-the-celery-worker-server)

显示代码

```
from celery import Celery 
```

如果我从 python shell 运行此代码，则此代码有效，但是，如果我在 eclipse 的 tasks.py 中的 django 项目中执行此操作，则会收到错误 Unresolved Import: Celery。

这里有一个单独的指南：http: [//celery.github.com/celery/django/first-steps-with-django.html](http://celery.github.com/celery/django/first-steps-with-django.html) for django，而是使用

```
from celery import task 
```

但是，当我继续本教程并致电时，它可以很好地解决

```
add.delay(2, 2) 
```

我遇到连接失败，看起来它可能仍在尝试使用 rabbitmq 而不是 SQS 我有我的 django 项目设置来使用（它有效，我可以从亚马逊的 Web 界面看到 SQS 队列，我可以制作如果我使用 from celery import Celery 从 shell 执行所有操作，则连接）。这是相关的堆栈跟踪：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/celery/app/task.py", line 343, in delay
    return self.apply_async(args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/celery/app/task.py", line 458, in apply_async
    with app.producer_or_acquire(producer) as P:
  File "/usr/lib/python2.7/contextlib.py", line 17, in __enter__
    return self.gen.next()
  File "/usr/local/lib/python2.7/dist-packages/celery/app/base.py", line 247, in producer_or_acquire
    with self.amqp.producer_pool.acquire(block=True) as producer:
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 705, in acquire
    R = self.prepare(R)
  File "/usr/local/lib/python2.7/dist-packages/kombu/pools.py", line 54, in prepare
    p = p()
  File "/usr/local/lib/python2.7/dist-packages/kombu/pools.py", line 45, in <lambda>
    return lambda: self.create_producer()
  File "/usr/local/lib/python2.7/dist-packages/kombu/pools.py", line 42, in create_producer
    return self.Producer(self._acquire_connection())
  File "/usr/local/lib/python2.7/dist-packages/celery/app/amqp.py", line 160, in __init__
    super(TaskProducer, self).__init__(channel, exchange, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/kombu/messaging.py", line 83, in __init__
    self.revive(self.channel)
  File "/usr/local/lib/python2.7/dist-packages/kombu/messaging.py", line 174, in revive
    channel = self.channel = maybe_channel(channel)
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 879, in maybe_channel
    return channel.default_channel
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 617, in default_channel
    self.connection
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 610, in connection
    self._connection = self._establish_connection()
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 569, in _establish_connection
    conn = self.transport.establish_connection()
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/amqplib.py", line 279, in establish_connection
    connect_timeout=conninfo.connect_timeout)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/amqplib.py", line 90, in __init__
    super(Connection, self).__init__(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/amqplib/client_0_8/connection.py", line 129, in __init__
    self.transport = create_transport(host, connect_timeout, ssl)
  File "/usr/local/lib/python2.7/dist-packages/amqplib/client_0_8/transport.py", line 281, in create_transport
    return TCPTransport(host, connect_timeout)
  File "/usr/local/lib/python2.7/dist-packages/amqplib/client_0_8/transport.py", line 85, in __init__
    raise socket.error, msg
socket.error: [Errno 111] Connection refused 
```

在 settings.py 中，我使用我的 SQS url 正确配置了 BROKER_URL（并且密码中没有正斜杠，这在过去显然是一个问题）。

所以

1.  为什么“from celery import Celery”可以从 python shell 工作，但不能在 django 项目的 eclipse 中工作？
2.  为什么按照 django 教程中的说明会导致连接被拒绝错误（amqplib 引用是否意味着它正在尝试使用 rabbitmq 而不是 SQS）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:36:25.123

你怎么称呼这个任务，你在用`manage.py shell`吗？

你添加`import djcelery; djcelery.setup_loader()`到你的顶部了`settings.py`吗？

celery 和 django-celery 的 API 现在不同了，因为 django-celery 落后了。Celery 3.1 将支持开箱即用的 Django，因此新的 API 可以在任何地方使用。

关于 Eclipse 有趣的事情。Eclipse 是否有可能使用静态分析来查找模块中的符号？在这种情况下，将以下内容添加到 celery/ **init** .py 文件是否有帮助：

```
__all__ = ['Celery'] 
```

?

# java - 了解字符匹配和令牌匹配之间的区别

> ID：11750532
> 
> 赞同：0
> 
> 时间：2012-07-31T23:29:29.553
> 
> 标签：java, mysql, solr, lucene, full-text-search

使用子字符串/字符匹配实现的搜索功能和使用基于令牌的匹配实现的搜索功能有什么区别？我正在为产品规划目的寻找一种直观且不太技术性的解释。以下是我的解释，或多或少是正确的，但不直观或不完整。

答案与您选择的最小匹配单位有关：您是匹配单个字符，还是匹配单个单词？子串匹配示例：

```
"lady's hat".contains("l") == true
"lady's hat".contains("lady's hat") == true 
```

而令牌匹配可能类似于：

```
Array("lady", "s", "hat").contains("l") == false
Array("lady", "s", "hat").contains("lady") == true
Array("lady", "s", "hat").contains("lady's hat") == false 
```

显然，这是一个严重的过度简化，并引发了很多问题。我想我可能试图在错误的抽象级别上解释问题。

*背景：我正在使用 Java 开发 Web 应用程序的搜索和过滤功能。我们当前的方法使用`LIKE`运算符和 MySQL，并且遭受全表扫描的明显性能问题。我们正在考虑使用 Lucene、Solr 或非规范化我们的关系数据。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:15:27.673

**字符匹配**
字符匹配是昂贵的，并且总是 O(NP)，其中 N=要搜索的字符数，P=要搜索的词条数。

这是线性搜索的伪代码：

```
function linear_search(items, terms, match_mode) {
  matched_items = new array();
  for(item_idx=0, item_count=count(items);item_idx < item_count;++item_idx) {
      doc = items[item_idx];
      match_count = 0;
      for(term_idx=0, term_count=count(terms);term_idx < term_count;++term_idx) {
          term = terms[term_idx];
          for(i=0, doc_len = strlen(doc), term_len = strlen(term) ; i < doc_len; i += term_len) {
              if(substr(doc, i, term_len) == term) { 
                  if(mode == 'ANY') {
                      matched_items[]=item_idx;
                      continue 3;
                  }  
                  ++match_count;
                  break;
              }
          }
       }
       if(mode == 'ALL' && (match_count == count(items)) matched_items[]=item_idx;
  }
  return matched_items;
} 
```

必须使用线性搜索操作搜索每个文档（行），因此 N 实际上是数据集上的 sum(strlen(N))（每一行，也就是文档是 N）。O(NP) 对于大型文档或许多文档或两者兼而有之，是一个非常长的操作。

**倒排索引（令牌搜索）**
另一方面，基于令牌的搜索将数据预解析为令牌并创建“倒排索引”。每个文档（要搜索的文本）首先被分解为术语，然后这些术语被索引并指向文档。
例如，给定原始数据：

```
1, the quick brown fox
2, all cows eat grass
3, all the world 
```

创建倒排索引：

```
all => 2, 3
brown => 1
cows => 2
eat => 2
fox => 1
grass => 2
quick => 1
the => 1, 3
world => 3 
```

通常在令牌上创建 b 树。因此，一个令牌的查找是 O(log(N)) 以获得与该令牌匹配的文档列表。获取实际数据的查找通常是另一个 O(log(N)) 操作。
假设 b-tree 结构，这会导致倒排索引操作成本：

```
O(log(TERM_COUNT)) + O(log(DOC_MATCH_COUNT)) 
```

**词位分析**
通常索引会存储文档中的词位，以及匹配的文档。这允许位置分析，例如 'bar' 附近的 'foo'，而无需查阅文档本身：

```
all => 2:1, 3:1
brown => 1:3
cows => 2:2
eat => 2:3
fox => 1:4
grass => 2:4
quick => 1:2
the => 1:1, 3:2
world => 3:3 
```

**stemming**
另外，“stemming”，例如 Porter Stemmer (http://en.wikipedia.org/wiki/Stemming) 通常应用于索引之前和搜索之前的术语。

词干分析器会将诸如“品牌”和“品牌”之类的词转换为“品牌”，这样对品牌的搜索将返回与品牌或品牌或品牌匹配的文档。

# python - 为什么要在 Python 中结合 np.floor 函数和 // 运算符？

> ID：11750534
> 
> 赞同：2
> 
> 时间：2012-07-31T23:29:41.133
> 
> 标签：python, numpy, scikits

我正在阅读用 Python 编写的库 'scikits-image' 的源代码，我找到了下一行代码：

```
n_cellsx = int(np.floor(sx // cx)) 
```

我不知道他们为什么要加入 NumPy 函数`floor`和`//`运算符。有什么理由这样做吗？我看不见。我觉得这是两次做同样的事情。

项目在[这里](https://github.com/scikits-image/scikits-image/blob/master/skimage/feature/hog.py)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:40:21.953

没有理由这样做，`//`将返回整数或对应于整数的浮点数，因此`floor`什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-01T07:38:25.907

至于为什么要做整件事：他们可能想要削减*给定*数量的以下零......看看这个例子：

```
>>> int(np.floor(40 // 10))
Out[40]: 4 
```

如果一个人只是做 int，那么他会得到 40....

至于为什么 int 部分，

```
>>> (49 // 10.0)
Out[50]: 4.0 
```

然而， floor() 部分什么也不做，除非代码曾经有 / 而不是 //，或者程序员担心同事可能会用 / 代替 // ...

# javascript - 在没有 cookie 的情况下保留浏览器客户端 javascript/HTML 数据

> ID：11750535
> 
> 赞同：5
> 
> 时间：2012-07-31T23:29:44.137
> 
> 标签：javascript, html

我创建了一个使用 Python、HTML 和 javascript 的网站。主主页有 19 个可编辑的变量字段。如果我更改了这些字段值中的任何一个，然后离开页面（单击我的其他链接选项卡之一），然后返回我的主页，我的所有变量都会重置为默认值，因为页面会重新加载代码。需要明确的是，使用“返回”按钮会保留变量，但大多数时候，用户将单击“主页”链接。

我怎样才能让网站记住这些变量，至少在会话中？也就是说，当我关闭浏览器并重新启动网页时，它将具有默认值。我不想使用 cookie 或 AJAX。我读过一些关于该`window.name`属性能够存储变量的内容，但我不明白如何使用它，它似乎就像一个 cookie，因为它只能存储一个变量。

如果我理解正确，如果我使用 cookie，我必须为每个变量创建一个 cookie，对吗？这似乎很乱。

有什么简单的方法可以做到这一点？我应该使用 Python 创建一个临时文本文件来存储变量列表吗？或者有什么更简单的吗？

编辑：代码始终使用 document.getElementById 来初始化变量字段和启用/禁用元素。

这是我想出的解决方案...比 JAndy 发布的工作更多。原来 localStorage() 要求您将变量转换为字符串，存储它们，然后在检索它们时执行相反的操作。我创建了两个函数。一个用于保存，一个用于检索变量。我创建了一个对象来存储变量。每次单击输入字段时，我还必须更新本地 HTML 字段。我使用了 onchange="saveTheVars()" 并调用了我的保存函数。

```
varObjects = {Step:'step', Dwell:'dwell', Min:'min_att', Max:'max_att', Hold:'hold',  Roam:'roam', Dur:'duration', Clients:'n_client', TX:'tx' };

result = new Object(); // variable object to hold the retrieved data

function saveTheVars() {
            //fill up the object with the variables
            varObjects.Step = document.getElementById('step').value;
            varObjects.Dwell = document.getElementById('dwell').value;
            varObjects.Min = document.getElementById('min_att').value;
            varObjects.Max = document.getElementById('max_att').value;
            varObjects.Hold = document.getElementById('hold').value;
            varObjects.Dur = document.getElementById('duration').value;
            varObjects.Roam = document.getElementById('roamID').value;
            varObjects.Clients = document.getElementById('n_client').value;
            varObjects.TX = document.getElementById('tx').value;

            try{

                localStorage.setItem("theVars", JSON.stringify(varObjects)); // if localstorage id defined then save variables to it.

            } catch(e) {

                return false;
                } 
```

}

```
function retrieveTheVars() {

             try {
                    result = JSON.parse(localStorage.getItem("theVars"));

                if(result == null) // no object exist in memory so set defaults
                {
                    alert("Test variables not saved: Loading defaults"); 
                    document.getElementById('duration').value= '300';
                    document.getElementById('n_client').value= '0';
                    document.getElementById('manual').value= "";
                    document.getElementById('step').value= '1';
                    document.getElementById('dwell').value= '0.45';
                    document.getElementById('min_att').value= '0';
                    document.getElementById('max_att').value= '30';
                    document.getElementById('hold').value= '3';
                    document.getElementById('roamID').value= '10';
                    document.getElementById('tx').value= '15';

                    saveTheVars(); //save the newly created variables
                }
                else
                {

                    //update the page variables with the retrieved data

                    document.getElementById('dwell').value= result.Dwell;
                    document.getElementById('step').value= result.Step;
                    document.getElementById('min_att').value= result.Min;
                    document.getElementById('max_att').value= result.Max;
                    document.getElementById('hold').value= result.Hold;
                    document.getElementById('roamID').value= result.Roam;
                    document.getElementById('duration').value= result.Dur;
                    document.getElementById('n_client').value= result.Clients;
                    document.getElementById('tx').value= result.TX;
                }

            } catch(e) {

                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:32:03.313

使用[`localStorage`](https://developer.mozilla.org/en/DOM/Storage)跨浏览器 (IE8+) 广泛支持的对象。

```
localStorage.setItem( 'someData', 42 ); 
```

稍后（即使网站或浏览器关闭）

```
localStorage.getItem( 'someData' ) // === 42 
```

阅读 MDN 文档以获取快速操作方法和限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:16:37.023

一些想法：

1.  您不必为每个变量都创建一个 cookie。您可以将所有变量打包成一个变量。尝试为此使用 JSON 格式。
2.  让您的网站使用锚导航而不是真正的导航（使用 javascript 响应当前锚的更改以显示不同的内容），并且由于页面永远不会重新加载，因此您的所有变量状态仍然完好无损。

# java - 如何使Java不调用外部库

> ID：11750539
> 
> 赞同：0
> 
> 时间：2012-07-31T23:30:51.993
> 
> 标签：java, architecture

我有一个用 Java 编写的大型系统，它基本上由用户界面、应用程序的“核心引擎”和许多其他模块组成。我正在尝试创建一个仅包含“核心引擎”而不包含其他部分的小程序，因此我需要共享相同的代码库以跟上更新。我已经这样做并且效果很好，问题是在我不需要的其他部分中使用了很多外部jar，而小程序目前需要它们。

我没有调用需要外部 jar 的代码部分，当我调用类的构造函数时，堆栈跟踪给了我一个错误，所以我猜想它在这个类（我正在使用构造函数）已加载。但是我在互联网上读到 Java 只在需要时加载类，所以我不确定这里发生了什么。谁能给我一些建议，告诉我如何让它不需要这些罐子？

PS：我确信最好的方法是重构它，将功能分成清晰的层，这样我就可以更轻松地解决这个问题。问题是这是一个非常古老且庞大的代码库，并且现在进行这种大规模重构（尽管我愿意）是不可行的。

编辑 - 添加堆栈跟踪和更多信息之一：

```
java.io.FileNotFoundException: http://localhost:3000/applet/jess.jar
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getJarFileWithoutCache(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.downloadJarFileWithoutCache(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin.PluginURLJarFileCallBack.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.getJarFile(Unknown Source)
    at sun.net.www.protocol.jar.JarFileFactory.get(Unknown Source)
    at sun.net.www.protocol.jar.JarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFileInternal(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFile(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.getJarFile(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.access$1000(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.ensureOpen(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.<init>(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at my.package.MyClass.<init>(MyClass.java:187)
    at my.package.MyApplet.start(MyApplet.java:38)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.start(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

MyClass 第 187 行只是： MyClass2 obj = new MyClass2();

所有其他 FileNotFoundException 跟踪都是相同的，但缺少其他文件。另外，在这个系统上，我有多个版本（例如学术版和商业版），并且很多需要的 jar 不在学术版中，但我可以使用相同的代码编译其他版本，而无需需要这些罐子时遇到问题。

我知道提供帮助是一种艰难的情况，但我认为也许有人处于类似情况并且可以给我一个提示。

另外，有没有可能我有一些方法，比如：

```
public void myMethod() {
 ClassInOneOfTheJars c = new ClassInOneOfTheJars();
} 
```

但这种方法永远不可能让虚拟机尝试获取包含 ClassInOneOfTheJars 的 jar？（据我所知，答案似乎是“不”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:04:57.140

根据评论，发生的事情是，只有在尝试加载`MyClass2`时，JVM才会`less.jar`在搜索类路径时尝试访问。我的猜测是，仅在第一次需要类时才加载类，因此`.jar`仅当在以前的类中找不到类时才首先访问 s / 其他类路径条目。

解释您看到的行为的一种方法是您的类路径`.jar`按以下顺序包含这些 s：

1.  `a.jar`（当地的）
2.  `less.jar`（偏僻的）
3.  `b.jar`（当地的）

`MyClass`在哪里`a.jar`; 并且`MyClass2`在`b.jar`. 类加载器尝试加载`MyClass`、打开`a.jar`、在那里找到并加载它，然后开始运行构造函数。构造函数需要`MyClass2`，所以类加载器打开`a.jar`，在那里找不到类，然后移动到下一个类路径条目。这是`less.jar`，这是不可访问的，你得到了崩溃。当您`.jar`从类路径中删除不可访问的内容时，类加载器可以继续前进`b.jar`并找到`MyClass2`那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:51:26.110

原因是在 中`MyClass2`使用了一些东西`less.jar`，因此导致了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T02:13:45.600

注意线

```
at my.package.MyClass.<init>(MyClass.java:187) 
```

这意味着`MyClass`正在初始化一个类型的对象。我敢打赌，第 187 行是内联构造函数调用，构造函数主体内的一行，或者是默认字段值初始化。

初始化最终试图在 中加载一些东西`jess.jar`，这就是导致错误的原因。

# c++ - 如何（手动）对齐 C/C++ 中的单元格？

> ID：11750540
> 
> 赞同：0
> 
> 时间：2012-07-31T23:31:03.687
> 
> 标签：c++, c, alignment

当我测试我的应用程序时，它崩溃了。在调试之后，它把我带到了这段代码：

```
static cell AMX_NATIVE_CALL n_fblockwrite(AMX *amx, cell *params)
{
    cell *cptr;
    cell count;

    amx_GetAddr(amx,params[2],&cptr);

    if (cptr!=NULL)
    {
        cell max=params[3];
        ucell v;

        for (count=0; count<max; count++)
        {
            v=(ucell)*cptr++;
            if (StorageWriteFile((SolFSHandle)params[1],amx_Align32(&v),max*sizeof(cell),&g_amount_read)!=1)
            {
                break;/* write error */
            }
        }/* for */
    }/* if */
    return count;
} 
```

它似乎在以下位置崩溃：

```
 if (StorageWriteFile((SolFSHandle)params[1],amx_Align32(&v),max*sizeof(cell),&g_amount_read)!=1) 
```

正好在第二个参数：

```
amx_Align32(&v), 
```

带有 0x0 0x5 0x0 访问破坏异常

amx_Align32 东西的代码是外部的，所以我无法访问它的源代码，但在我的源代码中它看起来像这样：

```
#define NUDE _declspec(naked) 

NUDE uint32_t * AMXAPI amx_Align32(uint32_t *v)
{
    _asm mov eax, pAMXFunctions;
    _asm jmp dword ptr [eax+PLUGIN_AMX_EXPORT_Align32*4];
} 
```

以此作为出口的东西：

```
enum PLUGIN_AMX_EXPORT
{
    PLUGIN_AMX_EXPORT_Align16       = 0,
    PLUGIN_AMX_EXPORT_Align32       = 1,
    PLUGIN_AMX_EXPORT_Align64       = 2,
    PLUGIN_AMX_EXPORT_Allot         = 3,
    PLUGIN_AMX_EXPORT_Callback      = 4,
    PLUGIN_AMX_EXPORT_Cleanup       = 5,
    PLUGIN_AMX_EXPORT_Clone         = 6,
    PLUGIN_AMX_EXPORT_Exec          = 7,
    PLUGIN_AMX_EXPORT_FindNative    = 8,
    PLUGIN_AMX_EXPORT_FindPublic    = 9,
    PLUGIN_AMX_EXPORT_FindPubVar    = 10,
    PLUGIN_AMX_EXPORT_FindTagId     = 11,
    PLUGIN_AMX_EXPORT_Flags         = 12,
    PLUGIN_AMX_EXPORT_GetAddr       = 13,
    PLUGIN_AMX_EXPORT_GetNative     = 14,
    PLUGIN_AMX_EXPORT_GetPublic     = 15,
    PLUGIN_AMX_EXPORT_GetPubVar     = 16,
    PLUGIN_AMX_EXPORT_GetString     = 17,
    PLUGIN_AMX_EXPORT_GetTag        = 18,
    PLUGIN_AMX_EXPORT_GetUserData   = 19,
    PLUGIN_AMX_EXPORT_Init          = 20,
    PLUGIN_AMX_EXPORT_InitJIT       = 21,
    PLUGIN_AMX_EXPORT_MemInfo       = 22,
    PLUGIN_AMX_EXPORT_NameLength    = 23,
    PLUGIN_AMX_EXPORT_NativeInfo    = 24,
    PLUGIN_AMX_EXPORT_NumNatives    = 25,
    PLUGIN_AMX_EXPORT_NumPublics    = 26,
    PLUGIN_AMX_EXPORT_NumPubVars    = 27,
    PLUGIN_AMX_EXPORT_NumTags       = 28,
    PLUGIN_AMX_EXPORT_Push          = 29,
    PLUGIN_AMX_EXPORT_PushArray     = 30,
    PLUGIN_AMX_EXPORT_PushString    = 31,
    PLUGIN_AMX_EXPORT_RaiseError    = 32,
    PLUGIN_AMX_EXPORT_Register      = 33,
    PLUGIN_AMX_EXPORT_Release       = 34,
    PLUGIN_AMX_EXPORT_SetCallback   = 35,
    PLUGIN_AMX_EXPORT_SetDebugHook  = 36,
    PLUGIN_AMX_EXPORT_SetString     = 37,
    PLUGIN_AMX_EXPORT_SetUserData   = 38,
    PLUGIN_AMX_EXPORT_StrLen        = 39,
    PLUGIN_AMX_EXPORT_UTF8Check     = 40,
    PLUGIN_AMX_EXPORT_UTF8Get       = 41,
    PLUGIN_AMX_EXPORT_UTF8Len       = 42,
    PLUGIN_AMX_EXPORT_UTF8Put       = 43,
}; 
```

那么，如何对齐单元格中的数据呢？或者也许我不需要对齐数据？原来的代码是这样的：

```
 if (fwrite(aligncell(&v),sizeof(cell),1,(FILE*)params[1])!=1) 
```

我正在将其转换为与 SolFS 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:41:25.873

我的猜测是您创建的临时单元格未对齐，当您调用时您将结束它`amx_Align32`：

```
ucell v;   // Not aligned to 32-bit boundary 
```

因此，当您尝试阅读它时（在 期间`StorageWriteFile`），可能会发生该错误。但这里的另一个问题是您已经将数据写入可能未对齐的内存。在向内存写入数据之前，您需要对齐内存。

在不依赖编译器对齐编译指示等的情况下，您可以执行以下操作：

```
char buffer[sizeof(ucell)+4];
ucell *pv = (ucell*) (buffer + 4 - (buffer % 4));  // Align to 32-bit 
```

现在你有一个指向 a 的对齐指针`ucell`，你不需要调用`amx_Align32`. 而不是指针算术，你可以替代调用`amx_Align32`：

```
char buffer[sizeof(ucell)+4];
ucell *pv = (ucell*) amxAlign32( (uint32_t*)buffer ); 
```

现在您可以像往常一样放入数据（我假设该类型与您放入的类型`ucell`兼容）：`cell`

```
*(cell*)pv = *cptr++; 
```

哦，现在我一直到这里，我注意到你的电话`StorageWriteFile`是错误的。看看你每次在循环中写了多少字节：`max*sizeof(cell)`- 这肯定不是你想要的。

不管上面那一段如何，我所说的一切仍然是相关的。如果要正确使用内存对齐，则需要先获取对齐的指针，然后将数据写入正确的位置。此外，请注意缓冲区的末端是否耗尽。

# ruby-on-rails-3 - Rails 3如何在以编程方式完成POST时防止重定向

> ID：11750541
> 
> 赞同：0
> 
> 时间：2012-07-31T23:31:07.627
> 
> 标签：ruby-on-rails-3

下面显示的控制器创建方法在成功创建客户后重定向到显示方法。我希望在从浏览器发布帖子时发生这种重定向，但是当我从另一个程序发布帖子时不应该发生重定向。我怎么做？

```
def create
    @customer = Customer.new(params[:customer])

    respond_to do |format|
        if @customer.save
            format.html { redirect_to @customer, notice: 'Customer was successfully created.' }
            format.json { render json: @customer, status: :created, location: @customer }
        else
            format.html { render action: "new" }
            format.json { render json: @customer.errors, status: :unprocessable_entity }
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:33:17.613

从您的程序发送自定义 HTTP 标头以识别它，然后检查标头是否存在，如果它不重定向，或发送不同的响应。

# javascript - 是否可以在不上传文件的情况下从客户端的文件中获取信息？

> ID：11750542
> 
> 赞同：5
> 
> 时间：2012-07-31T23:31:14.507
> 
> 标签：javascript, jquery, html, file-upload, metadata

我允许我的用户上传 mp3 文件，以便我可以读取元数据并提取歌曲标题和歌手姓名。

目前我正在上传文件并使用[getId](http://getid3.sourceforge.net/)来读取元数据。上传当然会占用大量资源和带宽。上传 mp3 似乎有点浪费，因为我只需要 2 条信息，而且我什至不会对文件本身做任何事情。所以我后来删除了它。

是否可以在不将文件复制到我的服务器的情况下在客户端获取这两条信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T23:48:04.290

您只能在实现[FileReader](https://developer.mozilla.org/en/DOM/FileReader)接口的 HTML5 兼容浏览器中执行此操作（Firefox、Chrome、IE10、Safari 5.1+，不确定 Opera）。

您基本上使用 FileReader 将文件的内容放入内存，然后手动扫描（在客户端 javascript 中）以查找所需的 MP3 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:35:44.037

您只能从客户端文件中获取信息，方法是上传并在服务器上处理（您不想这样做），或者分发将在客户端处理文件并仅上传的客户端相关信息。选项 2 要求您开发（或共同选择）客户端应用程序并分发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:36:35.450

像这样你的意思是：**工作演示** [http://jsfiddle.net/9pfLJ/](http://jsfiddle.net/9pfLJ/)

好的链接：http: [//jquerybyexample.blogspot.com/2012/03/how-to-check-file-size-before-uploading.html](http://jquerybyexample.blogspot.com/2012/03/how-to-check-file-size-before-uploading.html)

[http://www.aibn.com/help/Learn/mimetypes.html](http://www.aibn.com/help/Learn/mimetypes.html)

希望它对您的事业有所帮助`:)`，请随时使用演示。

PS - 在演示中它也会提醒文件名。

**代码**

```
$(document).ready(function() {
   $("#flUpload").change(function () 
   { 
     var iSize = ($("#flUpload")[0].files[0].size / 1024); 

     alert("Name of file ===> " + $("#flUpload")[0].files[0].name);

     if (iSize / 1024 > 1) 
     { 
        if (((iSize / 1024) / 1024) > 1) 
        { 
            iSize = (Math.round(((iSize / 1024) / 1024) * 100) / 100);
            $("#lblSize").html( iSize + "Gb"); 
        }
        else
        { 
            iSize = (Math.round((iSize / 1024) * 100) / 100)
            $("#lblSize").html( iSize + "Mb"); 
        } 
     } 
     else 
     {
        iSize = (Math.round(iSize * 100) / 100)
        $("#lblSize").html( iSize  + "kb"); 
     }    
  }); 
});​ 
```

# c - 使用多个图像的 GTK2 应用程序内存泄漏

> ID：11750543
> 
> 赞同：1
> 
> 时间：2012-07-31T23:31:18.617
> 
> 标签：c, graphics, resources, gtk

[这是我关于 GTK2 处理资源使用的最后一个问题](https://stackoverflow.com/questions/11733352/placing-images-in-a-fixed-layout-gtk2)的后续。

该应用程序正在正确显示图像，但现在似乎每次`GtkImages`从磁盘加载并放置到固定框架上以进行绝对定位时都会泄漏一些内存。

我使用以下基本方法每隔几秒调用一次来加载和显示不同的图像集。

```
int DisplaySymbols( GameInfo *m )
{
    // variable declarations removed for brevity 
    // error checking needs to be added
    GtkWidget *image;

    pos_y = 150;
    for( y = 0; y < 3; y++ )
    {
    pos_x = 187;
        for( x = 0; x < 5; x++ )
        {
            image=gtk_image_new_from_file( fileName );
            gtk_fixed_put(GTK_FIXED(frame), image, pos_x, pos_y);
        pos_x += symbols[i].pixel_width;
        }
    pos_y += symbols[i].pixel_height;
    }
    gtk_widget_show_all(window);
    return( 0 );
} 
```

我已经阅读了`GTK+`有关资源使用的部分文档，但我无法弄清楚如何使用`API`调用来防止内存泄漏。

我有一些想法和/或问题：

*   我应该在固定框架中创建一些图像保存小部件以更轻松地管理放置在框架中的图像吗？
*   我的代码在做什么或不做什么会导致内存泄漏？我可能不会发布`GtkImage`小部件？
*   每次我需要使用它们时从磁盘加载图像似乎有点低效。如何将它们读入内存，然后根据需要将它们显示在框架中？

部分源码如下：

```
//Compile me with: gcc -o leak leak.c $(pkg-config --cflags --libs gtk+-2.0 gmodule-2.0)

// include files removed for brevity
/* GTK */
#include <gdk/gdkx.h>
#include <gtk/gtk.h>

typedef struct
{
    unsigned int pixel_width, pixel_height;
    gchar fileName[20];
}symbol_t;

static symbol_t symbols[] =
{
    /* only showing 2 of eight - brevity */
    { 118, 107, "images/LO.jpg" },
    { 118, 107, "images/L1.jpg" }
};

typedef struct
{
    char SpinResult[3][5];      // index of images pointing into symbols struct
}GameInfo;

GameInfo egm;

GtkWidget *frame;       /* for absolute positionining of widgets */
GtkWidget *window;

/**** prototypes ****/
    // remove for brevity
/********************/

// init random number generator
int Init( void )
{
    // create random number - brevity
}

// Determine spin outcome and store into egm.SpinResult array
int DoSpin( GameInfo *egm )
{
    // generate matrix of indexes into symbols structure
    // so we know what symbols to display in the frame
}

int DisplaySymbols( GameInfo *egm )
{
    // variable declarations removed - brevity
    GtkWidget *image;

    pos_y = 150;
    for( y = 0; y < 3; y++ )
    {
        pos_x = 187;
        for( x = 0; x < 5; x++ )
        {
            image = gtk_image_new_from_file( symbols[i].fileName );             
            gtk_fixed_put(GTK_FIXED(frame), image, pos_x, pos_y);
            pos_x += symbols[i].pixel_width;
        }
        pos_y += symbols[i].pixel_height;
    }
    gtk_widget_show_all(window);
    return( 0 );
} 

void btnSpin_clicked(GtkWidget *button, gpointer data)
{
    DoSpin( &egm );
    DisplaySymbols( &egm );
    return;
}

GtkWidget *SetupWindow(gchar *data, const gchar *filename)
{
    // window setup code removed for brevity    
    return(window);
}

int main (int argc, char *argv[])
{
    GtkWidget *btnSpin, *btnExit;
    float spinDelay = 2.0;     

    Init();    
    gtk_init (&argc, &argv);
    window = SetupWindow("Tournament", "images/Midway_Madness_Shell.jpg");
    g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK (destroy), NULL);

    frame = gtk_fixed_new();
    gtk_container_add(GTK_CONTAINER(window), frame);

    btnSpin = gtk_button_new_with_label("Spin");
    gtk_widget_set_size_request(btnSpin, 70, 40);
    gtk_fixed_put(GTK_FIXED(frame), btnSpin, 720, 540);
    g_signal_connect(G_OBJECT( btnSpin ), "clicked", G_CALLBACK(btnSpin_clicked), NULL );

    btnExit = gtk_button_new_with_label("Exit");
    gtk_widget_set_size_request(btnExit, 70, 40);
    gtk_fixed_put(GTK_FIXED(frame), btnExit, 595, 540);
    g_signal_connect(G_OBJECT( btnExit ), "clicked", G_CALLBACK(btnExit_clicked), NULL );

    DoSpin( &egm );
    DisplaySymbols( &egm );

    gtk_widget_show_all(window);
    gtk_main ();
    return( 0 );
} 
```

我将非常感谢有关如何解决此问题的详细说明以及一些示例代码，因为我很难理解如何应用我从`GTK2`似乎只是提供对象定义的文档中阅读的内容和函数调用。如果需要非常彻底的回应，可以提供丰厚的赏金。

**如果拥有所有代码有用**，[我已在此处提供。](http://pastebin.com/S573QSfK)

**编辑：内存泄漏以两种方式修复。**

1.  [按照nobar](https://stackoverflow.com/users/86967/nobar)`GtkFixed`的建议，在重绘图像之前销毁并重新创建容器。
2.  使用一个二维指针数组`GtkWidget`来保存指向每个图像的指针，因为它们被绘制。当需要重绘图像时，二维数组中的小部件指针首先被销毁，如下所示：

    int ReleaseImages( void ) { u_int8_t y,x;

    ```
    /* release images */
    for( y = 0; y < 3; y++ )
    {
        for( x = 0; x < 5; x++ )
        {
            gtk_widget_destroy( ptrImages[y][x] );
        }
    }
    return( 0 ); 
    ```

    }

    现在图片资源已经发布，可以重新绘制新的图片了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:11:06.350

从[GtkFixed 的文档中](http://developer.gnome.org/gtk/2.24/GtkFixed.html)：

> 对于大多数应用程序，您不应该使用此容器！它使您不必了解其他 GTK+ 容器，但会导致应用程序损坏。使用 GtkFixed，以下情况会导致文本被截断、小部件重叠和其他显示错误...

我想强调上面引用的*重叠小部件。*随着您的应用程序继续运行，您将继续向 GtkFixed 容器添加越来越多的图像。由于您永远不会从容器中删除图像，因此即使您再也看不到它们，它们也会继续需要内存。

对此不要说得太细，但是您看不到旧图像的原因是您已经用新图像覆盖了它们。就 GtkFixed 小部件而言，自应用程序开始以来您添加的每个图像都仍然存在。

要解决此问题，您需要删除旧图像。有很多方法可以做到这一点。最简单的方法可能是销毁整个容器，但这样做会带来一些复杂性，因为您还将按钮放入该容器中。

更好的解决方案可能是遵循上面引用的建议并且不要使用 GtkFixed——或者至少对你的应用程序进行分层，以便 GtkFixed 仅用于图像（你可以将按钮放在 GtkFixed 之外）。但如前所述，这可能需要您了解其他 GTK+ 容器（除非您只使用*第二个*GtkFixed 容器来保存图像，而第一个 GtkFixed 容器同时保存按钮和第二个容器）。

# c# - 给定 string.format 格式化字符串返回类型

> ID：11750544
> 
> 赞同：0
> 
> 时间：2012-07-31T23:31:21.883
> 
> 标签：c#, .net

是否可以对 string.format 格式化字符串进行反向类型查找。例如，我有 {0:0.00} 格式字符串。它用于格式化小数。我可以将它传递给一个函数并让它在这种情况下返回十进制类型。或者通过 {0:y yy yyy yy} 并让它返回 DateTime？

沿着这条线（[我可以检查格式说明符是否对给定的数据类型有效吗？](https://stackoverflow.com/questions/4408540/can-i-check-if-a-format-specifier-is-valid-for-a-given-data-type)）但是对于 String.Format 并且我无法传递我正在寻找的类型。我想我可以有一个类型列表来尝试。

有任何想法吗？

编辑：我正在从数据库中读取始终以字符串形式出现的数据。我不知道它的类型。我想将它放入其他一些我知道它应该是什么类型的数据库中。我知道类型的方式是因为有人提供了 string.format 参数。它们不只提供 string.format 参数的类型。因此，我试图查看是否可以从提供的格式中获取类型。我意识到这是一个糟糕的设计，但这就是我被迫做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:42:41.183

我从来没有遇到过这样的事情，也绝对不可能。一些格式字符串适用于不止一种类型。我要说的是，没有什么开箱即用的方法可以做到这一点。

如果您看[这里，](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)大多数数字格式都适用于任何数字类型，int、float、double、decimal ... 正如您指出的那样，少数格式只适用于日期，但很难设计一个好的 API 来描述那。

正如评论员所说，如果您发布的问题更广泛地反映了您正在努力实现的目标，您可能会得到一些更好的想法。

# java - 如何在 Eclipse on linux (debian) 中查看 JRE 的源代码

> ID：11750545
> 
> 赞同：18
> 
> 时间：2012-07-31T23:31:30.747
> 
> 标签：java, eclipse

我有一台Debian机器。我正在使用日食。通常在 Eclipse 上，要查看对象的代码源等，您只需单击`F3`该对象即可。但由于某种原因，当它是核心 java 类时，我得到了

```
 "Source not found" and an option to attach the source. 
```

debian 上的 JRE 源代码到底在哪里？当我执行 a`aptitude search "?provides(java-runtime)"`时，结果包含多个答案，其中包含子字符串`jre`，也没有路径。

有人可以告诉我确切的来源，以便我可以附上它。另外，我想让它适用于所有项目，而不仅仅是每个项目。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-31T23:55:52.110

这`JRE`纯粹是运行 Java 程序所需的运行时环境。对于Java程序的开发，你需要`JDK`（Java Development Kit）。

JDK 本身被分成几个包，包括 JRE、文档、演示和源文件。

假设您使用的是 Open JDK 6，`sudo apt install openjdk-6-source`将安装并链接您正在寻找的源代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-04T16:03:59.553

这在 Ubuntu 14.10 中对我有用，Eclipse Kepler 使用 openjdk-8

Window > Preferences > Java > Installed JREs > 点击你的 java-8-openjdk > Edit

对于 /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/rt.jar：

将源附件设置为：

```
/usr/lib/jvm/java-8-openjdk-amd64/src.zip 
```

将 Javadoc 位置设置为：

```
file:/usr/share/doc/openjdk-8-doc/api/ 
```

注意：如果您还没有 openjdk-8 java 文档，请安装：

```
sudo apt-get install openjdk-8-doc 
```

对于来源：

```
sudo apt-get install openjdk-8-source 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-27T23:06:53.790

sudo apt-get intall java-6-openjdk 在 Ubuntu 11.04 LTS 上对我来说是成功的。此外，如果您使用的是 Eclipse IDE，我通过 Window/Preferences/InstalledJREs/java-6-openjdk-amd64/Edit(find rt.jar) 然后添加外部文件 src.zip，如屏幕截图所示。![在此处输入图像描述](../Images/20e14a651bdbc375136acb06301695d5.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-12T10:56:40.333

在**Linux**中：单击“AttachSource”，然后选择外部文件位置。
**路径**：- 转到*计算机-> usr-> lib-> jvm-> openjdk-8 ->src.zip*

如果没有找到 openjdk-8 文件夹。你需要安装它。
在终端类型中：-
1) java -version ：*检查您的 java 版本。（如果 jdk 版本不是 8 则更改为适当的数字）*
2）sudo apt-get install openjdk-8-doc ：*用于安装文档。*
3)sudo apt-get install openjdk-8-source ：*用于安装源文件。*

**来源**：- **Bipin Bharathi** YoutubeChannel（查看他的视频（推荐））
[https://www.youtube.com/watch?v=X_NocC2TO2E](https://www.youtube.com/watch?v=X_NocC2TO2E)

# ios - 从加载的笔尖执行方法？

> ID：11750548
> 
> 赞同：0
> 
> 时间：2012-07-31T23:32:01.040
> 
> 标签：ios, objective-c, xcode, ipad

我是 ios 开发的新手，目前我在尝试从加载的类执行方法时遇到问题。

这是场景

我有一个名为“TV_kid”的类，TV_kid 将加载另一个名为“Cable_kid”的类，其中包含一个 nib 文件。

那部分不是问题，问题是我现在需要在 TV_kid 加载后使用 Cable_kid 笔尖上的按钮执行一个方法。

我虽然在 Cable_kid 类的 .h/.m 文件中连接和编码方法很简单，但我一直收到此错误“线程 1：EXC_BAD_ACCESS（代码 = 2，地址 = 0x18）”而没有更多详细信息。

任何想法或建议

这就是我如何将 Cable_kid 类加载到 TV_Kid 上的滚动视图中

注意：loadSection 只是一个包含多个项目的 plist

```
 id temp;
    int i=0;

    for(temp in loadSection){

       Cable_kid *cableKid = [[Cable_kid alloc]init];

       [TV_kid_container addSubview:cableKid.view];

  } 
```

这将使用 Cable_kid nib 类和功能将多个面板加载到 TV_kid Contanier...但问题是加载的面板的按钮不执行连接到 Cable_kid 类的方法...我该如何执行面板加载后的方法？？？

更新

这是一个编码示例项目，说明了我的实际问题

[http://dl.dropbox.com/u/20030125/SubViewMethod.zip](http://dl.dropbox.com/u/20030125/SubViewMethod.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:40:47.507

根本不要这样做：

```
[TV_kid_container addSubview:cableKid.view]; 
```

**首先将该视图作为子视图**放在的`TV_kid_container`视图中，或者通过使用. （例如。）`TV_kid_container`**`UIViewController``addChildViewController:`**

 **Apple 在 2011 年 WWDC 上有一个很好的视频：[https ://developer.apple.com/videos/wwdc/2011/#implementing-uiviewcontroller-containment](https://developer.apple.com/videos/wwdc/2011/#implementing-uiviewcontroller-containment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:32:39.163

我认为您`Cable_kit`的视图尚未初始化。

使用[`initWithNibName:bundle`](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSViewController_Class/Introduction/Introduction.html#//apple_ref/occ/instm/NSViewController/initWithNibName%3abundle%3a)代替`init`

```
Cable_kid *cableKid = [[Cable_kid alloc] initWithNibName:name bundle:bundle];

[TV_kid_container addSubview:cableKid.view]; 
```

或者[`- (void)loadView`](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSViewController_Class/Introduction/Introduction.html#//apple_ref/occ/instm/NSViewController/loadView)

```
Cable_kid *cableKid = [[Cable_kid alloc] init];
[cableKid loadView];

[TV_kid_container addSubview:cableKid.view]; 
```**

# python - 如何将值列表分配给 python netcdf4 变量对象？

> ID：11750552
> 
> 赞同：1
> 
> 时间：2012-07-31T23:32:14.557
> 
> 标签：python, numpy, netcdf

我正在尝试将 netCDF4 包与 python 一起使用。我想做一些我认为应该直截了当的事情，但我无法让它发挥作用，也找不到任何文档。我有一个列表，我只想将列表存储在 netCDF4.Variable 对象中。我认为这段代码会将“newlist”存储在 netCDF4.Variable 对象“x_data”中，它是 Dataset 对象“netdata”的一个组件：

```
netdata.variables['x_data'][:]=numpy.array(newlist) 
```

但这不行。我收到错误消息：

```
ValueError: setting an array element with a sequence. 
```

顺便说一句，我*已经*导入了 netCDF4 和 numpy。另外顺便说一句，如果我在不将 newlist 转换为 numpy 数组的情况下执行此操作，也会遇到同样的错误。

当然有办法做到这一点。有谁知道怎么做？谢谢。

附录：这个简单的改变让我摆脱了错误信息：

```
netdata.variables['x_data']=newlist 
```

但我还没有走出困境。数据肯定存储在 netdata.variables['x_data'] 中，但随后我关闭 netdata 并退出 python，并检查 netCDF 输出，但数据不存在。有任何想法吗？再次感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:03:58.837

好的，如果有人有兴趣，显然这样做的方法是：

```
netdata.variables['x_data'][:]=newlist[:] 
```

提示任何可能正在使用 netCDF4 python 包的人：它在很多方面都是一个很棒的包，但我在文档中的任何地方都找不到它。

# php - 如何防止php在页面刷新时提交短信？

> ID：11750554
> 
> 赞同：2
> 
> 时间：2012-07-31T23:32:22.547
> 
> 标签：php, sms, page-refresh

当潜在客户在其网页上提交查询表单时，我正在使用第 3 方短信网关向客户发送短信。我将 Aweber 用于自动回复系统，它发送一个包含潜在客户数据的查询字符串，我收集这些数据并将其发送给客户，同时向他的手机发送一条短信。

我有一切工作。但是，我需要防止客户端在同一会话中接收来自同一潜在客户的多条短信，这是由于刷新或点击浏览器上的 BACK 按钮引起的。

这是我正在使用的代码，它正在工作，除了这个问题：

```
 $name      = $_GET['name'];
   $email     = $_GET['email'];
   $address   = $_GET['address'];
   $phone     = $_GET['phone'];
   $phone_sms = preg_replace('/^1|\D/', "", $phone);

   $message   = "$name, $email, just submitted an inquiry for $address";

   $from      = "1212121212";   // Ph# txt message is received from
   $to        = "$phone_sms";   // Ph# txt message is sent to

   $url       = 'http://domain.com/of/api';

   $fields = array(
     'from'     =>urlencode($from),
     'to'       =>urlencode($to),
     'message'  =>urlencode($message),
   );

   foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
   rtrim($fields_string,'&');

   $ch = curl_init();

   curl_setopt($ch,CURLOPT_URL,$url);
   curl_setopt($ch,CURLOPT_POST,count($fields));
   curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

   $result = curl_exec($ch);

   curl_close($ch); 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:36:24.393

如果您在发布的脚本末尾发送`Location`标头以重定向到“成功”页面，则后退按钮不会加载该页面两次。

尝试：

```
// ... your code from the question
curl_close($ch);

header('Location: /sent.php');
exit; 
```

然后`sent.php`显示确认页面，让他们知道他们的消息已发送。如果您需要从他们的请求中发送特定数据，请在重定向之前将其添加到会话中，并从会话中读取该数据`sent.php`。

通过发送重定向，浏览器在使用后退按钮导航时将不会尝试再次重新发布相同的数据。它还将阻止刷新页面（在发送表单后）尝试再次重新发布数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:38:32.370

你能让它基于cookie吗？

所以基本上

```
if(cookie =='') { /*do the stuff - AND set the cookie*/}

if(cookie !=='') { /* don't do the stuff */ } 
```

# jsf - JSF - 消息包始终使用默认属性文件

> ID：11750556
> 
> 赞同：0
> 
> 时间：2012-07-31T23:32:40.370
> 
> 标签：jsf, internationalization, locale, resourcebundle

我无法让语言环境工作。

**系统**

耳朵和战争

Glassfish：3.12
Hibernate 4.2 - EAR 和 WAR
Mojarra 上的 jar：2.1.11
Primefaces：3.3
Omnifaces：1.1

**源文件夹中的属性文件：**

> messages_de.properties <- 使用德语
> messages.properties <- 使用英语

**面孔-config.xml：**

```
<locale-config>
    <default-locale>en</default-locale>
    <supported-locale>de</supported-locale>
</locale-config>
<message-bundle>messages</message-bundle>
<resource-bundle>
    <base-name>messages</base-name>
    <var>msg</var>
</resource-bundle> 
```

**问题：**

例如使用消息包的标签和所有其他文本都是错误的：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html">
    <f:view locale="de">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        </h:head>
        <h:body>
            <h:form>
                <h:outputLabel for="postalcode" value="#{msg.postalcode_u}: *"/>
                <h:inputText id="postalcode" label="#{msg.postalcode_u}" required="true"/>
                <h:commandButton value="#{msg.save_u}"/>
            </h:form>
        </h:body>
    </f:view>
</html> 
```

必需的验证消息：**默认验证消息使用正确的语言。**

错误信息：`Postalcode: Überprüfungsfehler: Wert ist erforderlich.`
应该是：`Postleitzahl: Überprüfungsfehler: Wert ist erforderlich.`

**设置：**

Glassfish 3.1.2
Mojarra 2.1.6 和 2.1.11 测试

**编辑：**

**1.**
使用`FacesContext.getCurrentInstance().getViewRoot().getLocale()`查看相同的消息资源包来显示一些自定义面孔消息不起作用。

**2.**
我还有第二个消息包，目前也在源文件夹中，只有 bean 访问它以显示错误消息：

> errorMessages_de.properties
> errorMessages_en.properties

在 bean 中创建的那些错误消息使用`FacesContext.getCurrentInstance().getViewRoot().getLocale()`!

**3.**
使用以下配置“强制”德语仍然不起作用。仍然`messages.properties`从而不是从 检索消息`messages_de.properties`。

```
<locale-config>
    <default-locale>de</default-locale>
    <supported-locale>de</supported-locale>
</locale-config> 
```

**新编辑：**

当我启动服务器时，我收到此警告：

```
Unexpected exception when attempting to tear down the Mojarra runtime
java.lang.NullPointerException
    at javax.faces.component.UIViewRoot.setLocale(UIViewRoot.java:1463)
    at com.sun.faces.config.InitFacesContext.getViewRoot(InitFacesContext.java:213)
    at com.sun.faces.application.ApplicationImpl.invokeViewListenersFor(ApplicationImpl.java:2026)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:291)
    at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:335)
    at org.apache.catalina.core.StandardContext.contextListenerStop(StandardContext.java:4840)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5584)
    at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)
    at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:1049)
    at com.sun.enterprise.web.WebContainer.unloadWebModule(WebContainer.java:2229)
    at com.sun.enterprise.web.WebContainer.unloadWebModule(WebContainer.java:2184)
    at com.sun.enterprise.web.WebApplication.stop(WebApplication.java:159)
    at org.glassfish.internal.data.EngineRef.stop(EngineRef.java:169)
    at org.glassfish.internal.data.ModuleInfo.stop(ModuleInfo.java:302)
    at org.glassfish.internal.data.ApplicationInfo.stop(ApplicationInfo.java:329)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.unload(ApplicationLifecycle.java:998)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.undeploy(ApplicationLifecycle.java:1024)
    at org.glassfish.deployment.admin.UndeployCommand.execute(UndeployCommand.java:330)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

**编辑2：**

上面的错误信息与问题无关。看我自己的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:56:58.970

属性文件中有一个条目值使用 utf-8 编码转义了德语变音符号。

`ü -> \u00FC`

问题是，我错过了最后`C`一个使属性文件不知何故不可读的！

不敢相信没有打印出适当的错误信息。如果它无法逃脱，为什么不像在许多情况下那样打印值。

但是该警告信息仍然存在。

# objective-c - 关于声明全局常量变量Objective C的条件语句

> ID：11750562
> 
> 赞同：0
> 
> 时间：2012-07-31T23:33:14.613
> 
> 标签：objective-c

我正在使用私有 SDK 我只能声明一个名为的 const 全局变量

const unsigned char KitApplicationKey[]= {0x1b,0 etc.}

我想检查一个条件（一个布尔变量，我保存在 appdelagate 中的用户默认值中）并根据布尔值修改 KitApplicationKey

类似的东西

如果 mybool 为真，则破折号（我不知道该怎么写）

const unsigned char KitApplicationKey[]= {0x1b,0 etc.} dash else const unsigned char KitApplicationKey[]= {0x2C,0x1b etc.} dash endif

你能帮我么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:46:05.370

您不能修改 a 的值`const char []`。如果你真的需要这个，你可能想使用一个简单的函数来在两个值之间切换：

```
const unsigned char appKey1[]= {0x1b, 0x0};
const unsigned char appKey2[]= {0x2c, 0x1b};

char* appKey() {
    return myBool ? appKey1 : appKey2;
} 
```

显然，您需要根据自己的目的对其进行修改以将其集成到您的代码中，但除此之外，它应该可以正常工作。

# jquery - Simplemodal 复选框和输入字段

> ID：11750570
> 
> 赞同：0
> 
> 时间：2012-07-31T23:34:23.480
> 
> 标签：jquery

我有一个问题，实际上是两个，关于 eric martins 简单模态。我尝试做的是，当有人单击按钮时，模式会弹出并显示该特定产品的不同变体。这是复选框，因此您可以选择“绿色”红色等颜色。不仅仅是红色或绿色。此外，还有输入字段，您可以在其中填写您想要的特定颜色的数量。所以1或20或一百万等等......

到目前为止一切顺利......问题是现在我需要将填写的数据和选中的复选框发送回服务器。我实际上不知道该怎么做。

所以：1）我如何检查一个复选框是否真的被选中？2）如何从输入字段中获取值？3）如何将此数据发送到服务器？

我所拥有的是：

```
$('.opener').click(function (event) {

 var url = $(this).attr("href")+'/?format=json';

 $('#formVariants').modal({ 

 onShow:function(dialog) {      

   $.getJSON(url, function(data) {           

     var contentHtml = '';

     $.each(data.product, function(index, product){

       var image = 'http://cdn.webshopapp.com/i/' + image_id_convert(data.product.image) + '/160x120x2/image.jpg';

       contentHtml = 
         '<img src="'+image+'"/>' +
         '<div class="variantsContainer">' +  
         '<h3>' + data.product.fulltitle + '</h3>';
       });

     $.each(data.product.variants, function(index, variant){

       //var variantId = ;
       //  " selected="selected"> - €0,00
       contentHtml = contentHtml + 
         '<div class="variants">' + 
         '<label><input type="checkbox" name="variant" value="' + variant.id + '"/>' + variant.title + '</label> ' +
         '<label style="float:right; margin-right:10px;">Aantal: <input type="text" name="quantity" id="formProductQuantity" value="1" /></label>';

       contentHtml = contentHtml +   
         '</div>';

     });

     $('#formProduct .formProductContent').html(contentHtml);

   });

 }
 });
 return false
 }) 
```

我的 HTML

```
 <div id="formVariants">
  <div class="formVariantsContent">
    <form class="formProduct" id="formProduct" action="{{ ('cart/add/' ~ product.vid ) | url }}" method="post">
      <div class="formProductContent"></div>
      <a class="button button grey simplemodal-close"><span>{{ 'Annuleren' | t }}</span></a>
      <a class="button blue opener" href="#" title="{{ 'Add to cart' | t }}"><span>{{ 'Add to cart' | t }}</span></a>
    </form>
  </div>
</div> 
```

我对 jquery 还很陌生，走到这一步，如果有人给我一些建议，我会很高兴。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:37:48.643

由于您使用的是表单，因此当您使用 method="post" 提交它时，它将为您的输入字段发送表单 key=name value=value 的键值对。例如：

```
<input type="text" name="quantity" id="formProductQuantity" value="1" /> 
```

在您的 POST 中，您将拥有 ['quantity'] = 1

在表单中 action= 导致在提交表单时将请求发送到该 url。

# vb.net - VB.NET 对一个类的 9 个实例使用递归，如何检查我在哪个实例上？

> ID：11750575
> 
> 赞同：1
> 
> 时间：2012-07-31T23:34:57.710
> 
> 标签：vb.net

**这与*Think-A-Dot*大学项目有关。**

我有一个 Flipper 类型的对象列表，如下所示：

```
flipper1, flipper2, flipper3... flipper8 
```

我的想法是做一个递归函数来遍历每个鳍状肢并单独处理每个鳍状肢，而不是处理许多 if 语句；我认为使用诸如递归函数之类的东西应该可以完成这项工作吗？

截至目前，我有以下功能：

```
Public Function Solve(ByRef flipper As Flipper) As Flipper

End Function 
```

我是否应该在函数中使用 if 语句来检查当前正在处理的翻转器并确保在翻转器 9 完成时递归退出？如何检查正在处理的对象，有没有办法验证传入的对象的名称以进行跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:54:38.540

从这个声明：

> 遍历每个鳍状肢并单独处理每个鳍状肢

听起来您不需要递归任何东西，但是您将这些变量替换为变量列表。

```
Private flippers As New List(Of Flipper) 
```

然后将您的鳍状肢对象添加到它们（示例）：

```
flippers.Add(New Flipper()) 
```

然后只需迭代集合：

```
For Each flip As Flipper In flippers

Next 
```

# authentication - .NET 基于 cookie 的身份验证，无需表单身份验证

> ID：11750580
> 
> 赞同：0
> 
> 时间：2012-07-31T23:35:23.220
> 
> 标签：authentication, cookies

.NET 世界中是否存在允许我在客户端浏览器上放置安全 cookie 的库？

我有一个网站的一个小节，它需要自己的身份验证，完全不干扰 .NET 中的内置身份验证机制。例如，当登录到子部分时，Request.Identity.Name 等必须保持不变。

我可以只使用我自己的函数来放置 cookie 并读取它们，但我不确定是否有任何我应该注意的安全问题，如果有的话，是否有一个库可以帮助我保持我的 cookie 安全?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:38:35.757

为什么不搭载表单身份验证来实现这一点，因为您已经在网站的其余部分使用它？

如果用户成功“登录”到网站的子部分，则设置一个会话变量，表明他们现在可以访问该特殊区域。检查该会话变量以控制访问。

# c# - C# - 将文本文件作为类加载

> ID：11750585
> 
> 赞同：5
> 
> 时间：2012-07-31T23:36:11.957
> 
> 标签：c#, class, namespaces, text-files, loading

有没有办法将 .txt 文件加载为一个类，然后我的主程序可以从中调用函数？我基本上是在尝试将 mod 支持添加到我的简单应用程序中，用户可以在其中从每个文件中选择选项。该文件遵循类似（但不相同）的格式，在主程序中调用了一堆空白（函数）。

我怎样才能做到这一点？考虑到它不会与程序的其余部分一起编译，这甚至可能吗（可能不是，回答我自己的问题？）？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T23:43:08.697

看我对这个问题的回答：[Compile a C# Array at runtime and use it in code?](https://stackoverflow.com/questions/11748867/compile-a-c-sharp-array-at-runtime-and-use-it-in-code/11748925#11748925)

本质上，您可能希望将文本文件拉入 CodeDom 并对其进行编译。之后，创建一些动态方法作为执行助手可能会有所帮助。

*   接收上传的文件
*   对文件执行任何需要的验证
*   将文件作为字符串读入 CodeDom
*   处理任何编译器/结构错误
*   使用 Linq 表达式树或动态方法创建辅助方法，以便新类和现有代码之间的链接通过编译对象桥接（否则，所有新方法都需要使用反射调用）

* * *

```
var csc = new CSharpCodeProvider( new Dictionary<string, string>() { { "CompilerVersion", "v4.0" } } );
var cp = new CompilerParameters() {
    GenerateExecutable = false,
    OutputAssembly = outputAssemblyName,
    GenerateInMemory = true
};

cp.ReferencedAssemblies.Add( "mscorlib.dll" );
cp.ReferencedAssemblies.Add( "System.dll" );

StringBuilder sb = new StringBuilder();

// The string can contain any valid c# code

sb.Append( "namespace Foo{" );
sb.Append( "using System;" );
sb.Append( "public static class MyClass{");
sb.Append( "}}" );

// "results" will usually contain very detailed error messages
var results = csc.CompileAssemblyFromSource( cp, sb.ToString() ); 
```

* * *

此外，请参阅此主题：[在 C# 中实现脚本语言](https://stackoverflow.com/questions/1394180/implementing-a-scripting-language-in-c-sharp)。[带有 DLR 的IronPython](http://blogs.microsoft.co.il/blogs/berniea/archive/2008/12/04/extending-your-c-application-with-ironpython.aspx)可能适合您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T23:41:38.527

您可以加载一个文本文件，然后使用一些编译器即服务（[Microsoft 的预发布 Roslyn 项目](http://www.microsoft.com/en-us/download/details.aspx?id=27746)或[Mono.CSharp](http://docs.go-mono.com/index.aspx?link=N%3aMono.CSharp)）。然后您可以获取已编译的输出并在您的程序中运行它们。

如果完全有可能让您的用户向您提供已编译的程序集而不是未编译的源文件，您应该考虑[托管可扩展性框架](http://mef.codeplex.com/)或[Mono.Addins](http://www.mono-project.com/Mono.Addins)。

第二种方法（扩展程序集）对我来说似乎更好，至少有两个原因：1）你的用户可以使用他们想要的任何开发环境，以确保他们的代码在交给你之前正确编译，2）你有更少验证输入和处理故障的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T23:40:24.960

**使用处理插件的框架**

托管可扩展性框架正是您正在寻找的

[http://mef.codeplex.com/](http://mef.codeplex.com/)

> 托管可扩展性框架 (MEF) 是 .NET 的组合层，可提高大型应用程序的灵活性、可维护性和可测试性。MEF 可用于第三方插件扩展，或者它可以为常规应用程序带来松散耦合的插件式架构的好处。

MEF 提供了一个定义明确的架构来支持您的应用程序中的插件。

**DLL 与文本（源代码）**

插件开发人员应提供包含插件代码的 DLL。[但是，如果需要，您可以使用Roslyn](http://www.microsoft.com/en-us/download/details.aspx?id=27746)将源代码编译成 DLL 供他们使用。请记住，如果您想支持接收插件源代码，您还必须提供支持以帮助用户处理编译器错误并在您的框架内调试插件。要求他们提供 DLL 可能更明智。

# sharepoint-2010 - SharePoint 标题列 DisplayName

> ID：11750589
> 
> 赞同：2
> 
> 时间：2012-07-31T23:36:51.260
> 
> 标签：sharepoint-2010

我正在使用 XML 为字段、内容类型和列表的定义创建一个功能。我对如何通过在设计器中编辑视图或使用代码或 PowerShell 更改任何内容来做我想做的事情并不特别感兴趣。

我创建了几个具有默认“标题”列的内容类型，但在内容类型定义中，我指定了“名称”的 DisplayName。太好了，这很容易！

因此，我使用 Visual Studio 2010 项目模板基于该内容类型创建了一个列表定义（和列表实例），并且在部署时，它到处都显示“标题”......在视图中，“标题”是列名。当我进入新的、编辑或显示表单时，“标题”是字段标签。不好了...

因此，在一天的大部分时间里都在玩这个，我发现如果我在列表定义的 MetaData 元素的 Fields 元素中指定 DisplayName 为“Name”的“Title”字段，那么它在绘制时会监听用于新建、编辑和显示的表单，但在显示列表时，仍然显示“标题”的列名。

在 ViewFields 元素中，LinkTitle 是被引用的字段，我已将 DisplayName 属性设置为 Name 并且它被忽略了。我也没有成功地尝试过 Alias 属性，它似乎没有任何 MSDN 文档，除了“可选文本”（很棒的工作人员）。

关于神奇的 XML 的任何想法，以获取列表视图中的标题列，以显示标题为“名称”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:54:08.427

我终于发现，如果我在列表定义中的 MetaData 元素的 Fields 元素中显式包含 LinkTitle 并将 Field 的 DisplayName 属性设置为“Name”，那么这就是我想要做的。

```
<Field Name="LinkTitle"
       ID="{82642ec8-ef9b-478f-acf9-31f7d45fbc31}"
       DisplayName="Name"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:22:53.527

```
 <?xml version="1.0" encoding="utf-8"?>
      <Elements xmlns="http://schemas.microsoft.com/sharepoint/">
                <!-- Parent ContentType: Item (0x01) -->

     <Field  ID="{87F3ABFD-2F63-4E10-802E-9BE7E1740137}"
      Name="Description"          
      DisplayName="Description"
      Group="My Custom Columns"
      Type="Note"
      DisplaceOnUpgrade="TRUE" />
    <ContentType ID="0x0100dcbde47be1774e64a169b55bc1c956b4"
           Name="AddUserToGroup - ContentType1"
           Group="Custom Content Types"
           Description="My Content Type"
           Inherits="FALSE"
           Overwrite="TRUE"
           Version="0">
<FieldRefs>
  <FieldRef ID="{13CF49E1-1961-4794-8FDD-B045F97D102F}" Name="Title"
  DisplayName="Name"      Required="TRUE" Sealed="TRUE" ShowInDisplayForm="TRUE"
  ShowInEditForm="TRUE" ShowInNewForm="TRUE"  />
  <FieldRef ID="{87F3ABFD-2F63-4E10-802E-9BE7E1740137}" 
  Name="Description" DisplayName="Description"/>
</FieldRefs> 
```

# hibernate - 如何强制 findAllBy 在 Grails 中返回数组以获得单个结果？

> ID：11750590
> 
> 赞同：2
> 
> 时间：2012-07-31T23:36:53.383
> 
> 标签：hibernate, grails

在我的代码中的几个地方，我使用查询 db`def results = Domain.findAllBySomething`并且我期望一个数组（我`results.size()`用来确定我有多少结果）。但是，如果 findAll 调用导致返回单个对象，则它不会作为数组返回，而是对该单个对象的引用。

有什么方法可以强制 grails 始终返回数组，无论有多少结果？

我正在使用 2.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:03:46.473

`findAll*`应该总是返回一个 Collection - 我在 2.1 中尝试了以下代码：

```
def person = Person.findAllByName('kelly')
println person.size()
println person.class
println person[0].name 
```

印刷

```
1
class java.util.ArrayList
kelly 
```

您可以添加一些代码来显示它返回单个实例吗？

# salesforce - Salesforce 长文本区域

> ID：11750591
> 
> 赞同：0
> 
> 时间：2012-07-31T23:36:56.970
> 
> 标签：salesforce

这是一个非常简单的问题，但我似乎找不到答案。我在 Salesforce 中创建了一个长文本区域并将可见行设置为 2：

![在此处输入图像描述](../Images/586f5e8937d2f066075b6cba0a02e555.png)

但是在查看潜在客户记录中的字段时 - 显示所有行：

![在此处输入图像描述](../Images/46219047f3c3d6fc6cdee0eeeeae8fa4.png)

参考可见线属性的文档：

> 对于长文本区域字段，设置要在编辑页面上显示的行数。

所以我可以在编辑页面设置可见行数没有问题，但是如何设置潜在客户详细信息页面上的文本区域长字段的可见行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:51:02.330

由于您[不能在公式中使用文本区域（长），](http://success.salesforce.com/ideaView?id=08730000000Br4g)您可以创建一个插入/更新前触发器以将缩短的值复制到仅在视图布局上显示的另一个自定义字段？

这种方法可能有点笨拙，并且还会破坏内联编辑。

# ios - 核心数据 - NSManagedObjectContext vs NSFetchedResultsController

> ID：11750594
> 
> 赞同：3
> 
> 时间：2012-07-31T23:37:31.637
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

根据苹果文档[`NSFetchedResultsController`](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFetchedResultsController)：

> 您使用获取的结果控制器来有效地管理从核心数据获取请求返回的结果，以便为 UITableView 对象提供数据。

根据以下文件[`NSManagedObjectContext`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)：

> 它的主要职责是管理托管对象的集合。

这两个类的目的似乎重叠。两者都“管理获取的托管对象”。也许措辞的差异确实意味着什么，但我不明白。在阅读了这两个文档之后，在我看来，所有数据获取、修改、提交、撤消/重做等都是由托管上下文处理的。我没有看到 nsfrc 存在的意义。

当我们已经管理上下文来处理数据时，任何人都可以解释为什么我们需要获取结果控制器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:06:45.287

A`NSFetchedResultsController`具有对 a 的引用`NSManagedObjectContext`。

FRC 有责任根据您给它的标准从其 MOC 中获取和排序所有对象。

FRC 是一个实用程序类，用于处理来自给定 MOC 的对象。

例如 `All People with firstName is 'John', sorted by lastName`

如果您向 FRC 引用的 MOC 添加一个新人`firstName = 'John'`，获取的结果控制器将解决它并发送一个委托回调。

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    //do some stuff 
} 
```

这`NSManagedObjectContext`是一桶东西。这`NSFetchedResultsController`是从那个桶中挑选特定东西的一种方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T11:48:39.760

这`NSManagedObjectContext`是核心数据的一个基本概念，类似于关系数据中的事务。您不仅可以获取对象，还可以创建、更新和删除它们，将它们保存回持久存储等。

你*不需要*`NSFetchedResultsController`. _ 它是一个实用程序类，旨在以一种易于在表格视图中使用的格式提供核心数据对象。在 an 中使用的获取对象`NSFetchedResultsController`将由 an 管理`NSManagedObjectContext`。

话虽如此，“实用类”严重低估了它。它自动管理底层数据源中的更新、插入和删除、缓存、部分等，这些都是手动处理的痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T23:41:01.097

获取的结果控制器仅获取一个集合并监视它的更改，以便可以自动更新表视图。您实际上并没有对`NSFetchedResultsController`直接进行任何更改。它链接到上下文（您可以在其中进行更改）和结果集。

# java - 如何将进度条同步到数据？

> ID：11750600
> 
> 赞同：3
> 
> 时间：2012-07-31T23:38:16.417
> 
> 标签：java, progress-bar, swt

我的程序从文件系统上的目录中读取文件。我有一个进度条，它的最小值设置为`0`，最大值设置为`n`（特定目录中的文件数）。上面是一段文本，显示迭代的进度......`1/100, 2/100, 3/100`等等。

我遇到的问题是显示的文本永远不会与进度条同步。`70%`当文本显示 时，进度条将在附近`100/100`。有人可以帮我吗？

```
pb1.setMinimum(0);
pb1.setMaximum(files2.size());

shell.getDisplay().asyncExec(new Runnable() {
    public void run() {
        if (pb1.isDisposed()) return;
        for(final File f : files2) {
            pb1.setSelection(pb1.getSelection() + 1);
            dialogShell.setText("Loading" + pb1.getSelection() +
                "/"+pb1.getMaximum());

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:02:54.420

尝试在您的线程中使用“计数器”，例如

```
pb1.setMinimum(0);
pb1.setMaximum(files2.size());

shell.getDisplay().asyncExec(new Runnable() {
    public void run() {
        int n = pb1.getMinimum();
        int d = pb1.getMaximum();

        if (pb1.isDisposed()) { return; }

        for(final File f:files2){
            pb1.setSelection(n);
            dialogShell.setText("Loading "+n+"/"+d);
            n++;
        }
    }
}); 
```

# android - 自定义组件类方法在调用时抛出错误

> ID：11750608
> 
> 赞同：1
> 
> 时间：2012-07-31T23:38:37.877
> 
> 标签：android, android-layout, custom-component

我在 layout/XML 中创建了一个自定义组件，它有 2 个 TextViews 和 2 个按钮。在它的支持类中，我只是让按钮增加和减少其中一个 TextViews 的值

```
public class NumberStepper extends LinearLayout implements View.OnClickListener {

//Define the elements (Children) of the compound view
public TextView tvStepperName, tvStepperValue;
public Button btnIncrement, btnDecrement;

private int statValue;
public NumberStepper(Context context, AttributeSet attrs) {
    super(context, attrs);
    //tvStepperName.setText(name);
    statValue = 0;

    LayoutInflater inflater = LayoutInflater.from(context);
    inflater.inflate(R.layout.numberstepper, this);
    loadComponents();

    }
private void loadComponents(){
    tvStepperName = (TextView) findViewById(R.id.tvStepperName);
    tvStepperValue = (TextView) findViewById(R.id.tvStepperValue);
    btnIncrement = (Button) findViewById(R.id.btnIncrement);
    btnDecrement = (Button) findViewById(R.id.btnDecrement);

    btnIncrement.setOnClickListener(this);
    btnDecrement.setOnClickListener(this);

    tvStepperValue.setText("" + statValue);

}

public void setLabel(String str){
    tvStepperName.setText(str);
}
public void onClick(View v) {
    switch(v.getId()){
    case R.id.btnIncrement:
            statValue++;
            tvStepperValue.setText("" + statValue);
            tvStepperName.setText("HELLO");
        break;
    case R.id.btnDecrement:
        if(statValue > 0){
            statValue--;
        }
        tvStepperValue.setText("" + statValue);
        break;
    }

}

} 
```

接下来，我创建了另一个 XML 布局，其中包含 5 或 6 个这样的复合组件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<com.nsholmes.bballStats.componets.NumberStepper
    android:id="@+id/ccOne"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"></com.nsholmes.bballStats.componets.NumberStepper>
<com.nsholmes.bballStats.componets.NumberStepper
    android:id="@+id/ccTwo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"></com.nsholmes.bballStats.componets.NumberStepper> 
```

在这个布局的支持类（它扩展了 Activity）中，我设置了复合组件变量 setContentView()，并尝试了以下操作：

```
ccOne = (NumberStepper)findViewById(R.id.ccOne);
    ccOne.setLabel("Label Name"); 
```

我收到一条错误消息 - 无法启动活动 ComponentInfo)。我只在调用 setLabel() 时收到此错误。

07-31 17:54:25.657: E/AndroidRuntime(11454): 致命异常: main
07-31 17:54:25.657: E/AndroidRuntime(11454): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. nsholmes.bballStats/com.nsholmes.bballStats.games.Game}：java.lang.NullPointerException
07-31 17:54:25.657：E/AndroidRuntime(11454)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970 )
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android .app.ActivityThread.access$600(ActivityThread.java:128)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android.os.Handler.dispatchMessage(Handler.java:99)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android. os.Looper.loop(Looper.java:137)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android.app.ActivityThread.main(ActivityThread.java:4514)
07-31 17:54: 25.657: E/AndroidRuntime(11454): 在 java.lang.reflect.Method.invokeNative(Native Method)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 java.lang.reflect.Method.invoke( Method.java:511)
07-31 17:54:25.657: E/AndroidRuntime(11454): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-31 17:54: 25.657: E/AndroidRuntime(11454): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-31 17:54:25.657: E/AndroidRuntime(11454): at dalvik.system.NativeStart.main(Native Method)
07-31 17:54:25.657: E/AndroidRuntime(11454): 引起：java.lang .NullPointerException 07-31 17:54:25.657: E/AndroidRuntime(11454): 在 com.nsholmes.bballStats.games.Game.loadComponents(Game.java:34)
07-31 17:54:25.657: E/AndroidRuntime( 11454): 在 com.nsholmes.bballStats.games.Game.onCreate(Game.java:27)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android.app.Activity.performCreate(Activity.java :4465)
07-31 17:54:25.657: E/AndroidRuntime(11454): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
07-31 17:54:25.657: E/AndroidRuntime(11454):在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
07-31 17:54:25.657: E/AndroidRuntime(11454): ... 11 更多

任何帮助将不胜感激，谢谢这是 numberstepper 的完整布局

```
<TextView
    android:id="@+id/tvStepperName"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="FreeThrow"
    android:layout_weight="10" />

<Button
    android:id="@+id/btnIncrement"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="30"
    android:text="@string/plusSign" />"

<Button
    android:id="@+id/btnDecrement"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="30"
    android:text="@string/minusSign" />

<TextView
    android:id="@+id/tvStepperValue"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="2"
    android:layout_weight="30" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:28:36.773

您的一个`findViewById`调用返回 null，这可能发生在以下几行中（您没有发布完整的布局和代码，所以我在这里盲目拍摄）：

```
ccOne = (NumberStepper)findViewById(R.id.ccOne);

tvStepperName = (TextView) findViewById(R.id.tvStepperName); 
```

编辑：

由于现在我们看到您的完整堆栈跟踪，因此错误位于您`loadComponents`函数的第 34 行。您在 NumberStepper 上调用 findViewById 来查找 R.id.tvStepperName 和 R.id.tvStepperValue，您确定在布局 xml 中有`View`带有这些名称的 s吗？`NumberStepper`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:55:33.170

问题可能在于您尝试查找视图的方式。据我了解，它`findViewById(..)`的工作原理是基于`setContentView(..)`您的类中没有设置内容视图，因此返回的视图为空。

也许您可以尝试从膨胀的视图中找到 TextView。

```
.....
private int statValue;
private View mView;

public NumberStepper(Context context, AttributeSet attrs) {
    super(context, attrs);
    //tvStepperName.setText(name);
    statValue = 0;

    LayoutInflater inflater = LayoutInflater.from(context);
    mView = inflater.inflate(R.layout.numberstepper, this);
    loadComponents();

}

private void loadComponents(){
    tvStepperName = (TextView) mView.findViewById(R.id.tvStepperName);
    tvStepperValue = (TextView) mView.findViewById(R.id.tvStepperValue);
    btnIncrement = (Button) mView.findViewById(R.id.btnIncrement);
    btnDecrement = (Button) mView.findViewById(R.id.btnDecrement);
.....
}
.....
..... 
```

# django - 如何将文件上传到 blobstore 或通过 django-filetransfer？

> ID：11750612
> 
> 赞同：2
> 
> 时间：2012-07-31T23:38:45.907
> 
> 标签：django, google-app-engine, djangoappengine

目前，我们使用 Google Cloud SQL 在应用引擎上托管的应用程序的默认 Django FileField 上传方法返回以下错误：

```
OSError
[Errno 38] Function not implemented: '/base/data/home/apps/s~app/attachment-1.360717349796013945/media' 
```

这可能是由于文件写入在应用程序引擎中受到限制，并且 mkdir 在 Django 调试模式下无法正常工作：

```
/base/python27_runtime/python27_dist/lib/python2.7/os.py in makedirs
makedirs(head, mode)
    except OSError, e:
        # be happy if someone already created the path
        if e.errno != errno.EEXIST:
            raise
    if tail == curdir:           # xxx/newdir/. exists if xxx/newdir exists
        return
mkdir(name, mode) ... 
```

因此，我尝试安装[django-filetransfer](http://www.allbuttonspressed.com/projects/django-filetransfers)并且 Appengine 上仍然存在相同的错误。

Django 设置：

**楷模**

```
class OrderItemAttachmentForm(ModelForm):
class Meta:
    model = OrderItemAttachment
    exclude = ('item',)
def __init__(self, *args, **kwargs):
    super(OrderItemAttachmentForm, self).__init__(*args, **kwargs) 
```

**意见**

```
def RFO(request):
    view_url = reverse('app.views.RFO')
    elif 'saveLine' in request.POST:
        order_attachment_form = OrderItemAttachmentForm(request.POST,request.FILES)
        if order_attachment_form.is_valid():
            order_attachment = order_attachment_form.save()
    upload_url, upload_data = prepare_upload(request, view_url) 
```

**模板**

```
{% load filetransfers %}
<form id="requestItemForm" name="requestItemSubmit" method="post" enctype="multipart/form-data" action="{{ upload_url }}">{% csrf_token %}{% render_upload_data upload_data %}
<div class="lineAttach">
<label for="id_attachment">Upload Attachment</label>
{{order_attachment_form.attachment}}
</div>
<button type="submit" id="saveLine" name="saveLine" class="btn grey doLoad right" value="Save Line Item">Save Line Item</button> 
```

我曾考虑使用[Blobstore python API](https://developers.google.com/appengine/docs/python/blobstore/)将文件存储为 blob 或使用 Google Cloud Storage，但不知道如何将其集成到 Django 模型中。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:35:26.987

我有同样的麻烦。我认为 django-filetransfer 需要 djangoappengine 才能正常运行。我现在正在采取不同的方法来解决这个问题。这么方便的工具我不能用，太可惜了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T01:12:39.823

我知道这是**很久**以前发布的，但答案非常简单（尽管它并不明显）：

您的 ModelForm 很好，但是您实际上可以删除该`__init__`函数，因为它所做的只是将详细信息传递给父类，无论如何都会发生这种情况。

您的视图需要做一些特定的事情：*prepare_upload*以获取正确的上传 URL，并处理 GET 和 POST 情况（一旦文件上传，Blobstore 将对您的表单执行回调。如果您使用基于类的视图，它可能看起来像这样：

```
class OrderAttachmentView(FormView):

    def get(self, request):
        upload_url, upload_data = prepare_upload(
            request,
            reverse('attachment-upload'),
            private=True,
            )
        form = OrderItemAttachmentForm()
        return render(
            request,
            'attachment_form.html',
            {
                'form': form,
                'upload_url': upload_url,
                'upload_data': upload_data,
            },
        )

    def post(self, request):
        form = OrderItemAttachmentForm(request.POST, request.FILES)
        order_item_attachment = form.save()
        return HttpResponseRedirect(reverse(
            'attachment-detail',
            kwargs={'pk': order_item_attachment.id},
            )) 
```

您的表单需要自定义操作参数：

```
{% load filetransfers %}

<form action="{{ upload_url }}" method="POST" enctype="multipart/form-data">
    ...
    <input type="submit" value="Upload" />
</form> 
```

# javascript - 如何让浏览器的“后退”按钮清除 d3.js 可视化的先前状态？

> ID：11750613
> 
> 赞同：1
> 
> 时间：2012-07-31T23:38:46.300
> 
> 标签：javascript, charts, d3.js, transitions, demo

我正在使用 D3从饼图布局和弧线中开发“[径向轮毂和轮辐图](http://bl.ocks.org/3169420)”（又名“[径向轮”）。](http://bl.ocks.org/3169420)我设置了轮子以启用所有带有 HTML 链接的弧线和节点，它们都可以正常工作。我还设置了滚轮以使用鼠标悬停事件来更改弧线和节点的颜色。

问题是当我将鼠标悬停在一个元素上并单击它以转到它所指向的 HTML 页面时，点击浏览器的“返回”按钮以返回 D3 可视化并不会清除鼠标悬停的最后状态。更具体地说，如果我将鼠标悬停在弧上，.on(mouseover...) 事件会调用一个函数来将弧变为深蓝色。然后我单击圆弧以转到它链接到的页面。当我点击浏览器的“返回”按钮返回可视化时，弧线仍然是深蓝色，而不是返回到原来的颜色。

有没有一种简单而干净的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:44:46.570

您是否考虑过重置 .on(click) 中的样式？如果您使用 CSS 类来更改颜色，这可能是最简单的。不错的图表，顺便说一句。

**更新**：我无法使用 Chrome、Firefox 或 Safari 中提供的链接重现此行为。它总是返回到浏览器返回的原始颜色。

# c++ - Boost 中使用 Posix 时间的线程超时

> ID：11750615
> 
> 赞同：3
> 
> 时间：2012-07-31T23:38:57.477
> 
> 标签：c++, boost

我使用 Boost Threads 库在 C++ 中创建了许多线程，我想使所有这些线程超时，我可以`timed_join()`在循环中使用，但这可以使总等待时间 = 线程数 * 时间-时差。

```
for(int i = 0; i < number_of_threads; ++i)
{
   threads[i]->timed_join(boost::posix_time::seconds(timeout_time));
} 
```

所以，我正在考虑使用内置的 posix_time 类来计算每个线程的截止日期。这样，总等待时间最多是给定的超时时间。

最简单和最直接的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T01:22:55.813

`thread::timed_join`使用需要绝对时间（即时间点）而不是持续时间的重载。将绝对时间期限设为当前时间加上您想要的任何超时时间。这将确保`thread::timed_join`循环中的所有调用都不会等待超过绝对时间期限。

在 Boost.Thread 的最新版本中（从 Boost 1.50 开始），Boost.Date_Time 现在已弃用，取而代之的是[Boost.Chrono](http://www.boost.org/doc/libs/release/doc/html/chrono.html)。这是为了更接近C++11中[std::thread](http://en.cppreference.com/w/cpp/thread/thread)的 API 。

此示例显示如何使用 Boost.Chrono 或 Boost.DateTime 指定绝对时间期限：

```
using namespace boost;

#if BOOST_VERSION < 105000

// Use of Boost.DateTime in Boost.Thread is deprecated as of 1.50
posix_time::ptime deadline =
    posix_time::microsec_clock::local_time() +
    posix_time::seconds(timeoutSeconds);

#else

chrono::system_clock::time_point deadline =
    chrono::system_clock::now() + chrono::seconds(timeoutSeconds);

#endif

for(int i = 0; i < number_of_threads; ++i)
{
    threads[i]->timed_join(deadline);
} 
```

文档中的此[页面](http://www.boost.org/doc/libs/release/doc/html/date_time/examples/general_usage_examples.html)显示了 Boost.Date_Time 示例用法。

文档中的这个[页面](http://www.boost.org/doc/libs/release/doc/html/chrono/users_guide.html#chrono.users_guide.tutorial)是关于 Boost.Chrono 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T19:46:07.083

```
int64_t mseconds = 60*1000; // 60 seconds 
```

只需使用

```
threads[i]->timed_join(boost::posix_time::milliseconds(mseconds )) 
```

你不需要使用绝对时间

# ruby-on-rails - 具有一对多关联的得墨忒耳定律

> ID：11750618
> 
> 赞同：2
> 
> 时间：2012-07-31T23:39:18.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对如何通过一对多关联避免违反 Demeter 法则感到困惑。假设我有一个这样的模型：

```
class Organization < ActiveRecord::Base
  has_one :address
  has_many :employees
end 
```

我相信这样做会违反得墨忒耳定律：

```
organization.address.street_name 
```

这可以通过使用 *address_street_name* 方法来避免。这是一个足够简单的解决方案。但是假设我们现在这样做：

```
organization.employees.each { |employee| puts employee.first_name } 
```

这似乎违反了得墨忒耳法则，尽管看起来并不那么明显。您仍然展示了对 Employee 内部结构的了解。避免此类违规行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:55:03.017

得墨忒耳法则的目标是避免暴露内部状态，并鼓励使用“告诉，不要问”原则，而不是`a.something.do_something`使用`a.do_something`（然后可以委托给其内部成员`something`）。

话虽如此，这并不是您永远不能违反的硬性规定。在这种情况下，没有真正的解决方法，因为您不是要求员工使用其名字做某事，而只是查询其名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:54:05.187

嗯。这是我的看法：

*   如果您在视图中使用两个示例，我会说上面的两个示例都可以，因为如果您正在创建一个显示来自多个模型的信息的视图，我想这很常见，那为什么不呢？很明显，rails 中的视图对数据结构/模型了解很多。

*   在第二个示例中，如果您对一个元素进行迭代（即执行一些逻辑），我会考虑将其放入另一个类，在这种情况下是员工。但同样，如果它在视图中，我宁愿不这样做，特别是如果这意味着从模型方法生成 html 代码。在我看来，Rails 模型更像是一种数据结构，而不是 Rob Martin 在“数据/对象反对称”一节中的 Clean Code 中描述的对象（第 95 页，就在 demeter 定律之前 ;-)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:05:18.640

得墨忒耳法则的动机是封装，而不是“减少点数”。

隐藏域对象中的行为是最有意义的，但对于在视图中显示数据来说意义不大——这不是你永远不能打破的规则。

这篇文章对这个主题给出了很好的解释：[得墨忒耳定律和点计数](http://haacked.com/archive/2009/07/14/law-of-demeter-dot-counting.aspx)

# ruby - 写入后读取文件的一部分

> ID：11750620
> 
> 赞同：0
> 
> 时间：2012-07-31T23:39:37.533
> 
> 标签：ruby, file-io, io

创建文件并向其中填充数据后，在关闭之前，需要读取部分数据并计算校验和。问题是您无法在关闭文件之前读取数据。代码片段如下。

我的问题是如何创建文件，写入数据，读取文件的一部分，然后关闭它？一种可能的解决方案是在写入文件之前使用缓冲区，但如果文件很大，例如 MB、GB、TB、PB，则不方便。

```
 begin
  File.open(@f_name,"w+") do |file|

    @f_old_size.times do
      file.write "1"
    end

    file.flush
    file.sync

    #################
    # read file fails
    # before close
    #################
    while line = file.gets
      puts line
    end

  end
  rescue => err
   puts "Exception: #{err}"
  end

  #####################
  # read file successfully
  # after close it
  #####################
  File.open(@f_name,"r") do |file|
    line = file.gets
    puts line
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:40:05.620

您遇到的问题是[Ruby IO](http://www.ruby-doc.org/core-1.9.3/IO.html)读取文件并跟踪它在文件中的位置。写出数据后，IO 对象的“搜索头”位于文件底部。当你问它下一行时，因为它在底部，你什么也得不到。

如果您将代码更改为包含 a `file.rewind`，则它可以工作：

```
#################
# read file fails
# before close
#################
file.rewind  # <--  THIS IS THE ADDED LINE
while line = file.gets
  puts line
end 
```

该`#rewind`方法将“搜索头”设置回文件的开头，这就是您要执行的操作。

# ios - 如何在 iOS 应用中获取亚马逊产品评论和排名信息？

> ID：11750621
> 
> 赞同：1
> 
> 时间：2012-07-31T23:40:02.323
> 
> 标签：ios, xcode, sdk, amazon

我想在 iOS 应用程序中显示用户亚马逊产品排名信息和产品评论，但我没有看到任何适用于 iOS 的亚马逊 SDK，那么有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:46:09.880

我不确定是否有 API 或 SDK 可以“正式”执行此操作。

在此处查看 Amazon 提供的开发人员 SDK：http: [//developer.amazon.com/](http://developer.amazon.com/)

你可能不得不刮掉他们的屏幕才能做到这一点..

# android - 应用程序仅在首次运行时正常工作

> ID：11750622
> 
> 赞同：0
> 
> 时间：2012-07-31T23:40:04.107
> 
> 标签：android, eclipse, opengl-es-2.0, avd

几天前，我开始开发我的第一个安卓游戏。我选择使用 OpenGL ES 2.0，因为它是最熟悉的替代方案。但是，我目前无法在真实设备上测试游戏，所以我决定改用 AVD，使用安装了 Intel HAXM 的 4.0.3 虚拟设备。这似乎工作得很好，但我现在遇到了一个非常奇怪的问题。

从 Eclipse 编译和运行游戏时，它工作得很好。但是，如果我再次运行游戏，无论是通过 AVD 还是从 Eclipse，除了背景颜色之外什么都没有绘制。如果我更改代码中的任何内容以使 Eclipse 必须重新编译应用程序，那么一切都会再次正常运行，但仅在第一次运行期间。

我不知道是怎么回事。如果我不得不猜测，我会说 AVD 以某种方式出现了问题，但有人知道解决这个问题的方法吗？如果需要，我会提供相关的源代码，但由于我不知道是什么导致了这种问题，所以我现在无法提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:13:15.777

您是否有任何代码正在保存或加载不起作用的应用程序状态。也许通过 onCreate/onStart/onPause 函数？当您暂停或关闭被错误读回的应用程序时，也许您正在写一些状态？调用 Application->Clear Data 将重置此状态，除非您正在写入公共区域，例如 sd 卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:52:25.533

当应用程序暂停时，似乎纹理被删除了，这导致它没有在屏幕上绘制任何东西。在函数中重新加载纹理`onResume`解决了这个问题。

# android - 从线程访问 sqllite db

> ID：11750625
> 
> 赞同：0
> 
> 时间：2012-07-31T23:40:46.227
> 
> 标签：android, multithreading, android-sqlite

已设置存储适配器（上下文）以帮助创建和管理单个数据库和表。尝试从新线程访问表以读取记录并在后台通过 HTTP 传输它们。对数据库的其他访问是基于活动的并且仅插入。尽管数据很小，但线程可能会根据可能的记录数运行几秒钟。无需与 UI 进行通信。

**StorageAdapter 类（SQL Lite 设置）**

```
private static SQLiteDatabase db;
private Context context;
private StorageOpenHelper dbHelper;

public StorageAdapter(Context _context) {
  this.context = _context;
  dbHelper = new StorageOpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
} 
```

以下线程的错误消息是：“构造函数 StorageAdapter(Worker) 未定义”

这是线程：

```
public void run () {
  // Does Storage Adapter need to be runnable           
  // Read DB ID's of committed (1) records into array
  **StorageAdapter storageAdapter = new StorageAdapter(this);**
  storageAdapter.open();
  cursor = storageAdapter.queueCommID();
  int i = 0;
  int currcnt = cursor.getCount();
  if (cursor.getPosition() == -1) cursor.moveToFirst();
  while (i < currcnt) {
    // Send single record to server
    sendrec(cursor);
i=i+1;
cursor.moveToNext();
  }
  storageAdapter.close();
  stop();
}; 
```

当然希望我没有混淆大家。几天一直在追我的尾巴，我很困惑。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:34:33.887

好像您正在从 Worker 实例中创建您的 StorageAdapter 实例。这意味着**this**引用了 Worker 而不是 Context。如果你的 Worker 是一个匿名类，你可以使用类似**MyActivity.this**而不是**this**的东西。

# javascript - 如何让 jQuery 查看多个 ID 的值

> ID：11750626
> 
> 赞同：3
> 
> 时间：2012-07-31T23:40:54.070
> 
> 标签：javascript, jquery, css, jquery-selectors

这在某种程度上是先前问题的延续。我已经弄清楚如何使用选择器指向特定的 ID 并查找 value=""，然后用红色背景填充它......即 -

**$('[id^="f04"][value=""]').css('背景色', '红色')**

我现在需要做的是在此基础上进行构建，以便查看 f04、f05 和 f06 的 value=""... 关于如何编写它的任何想法？我尝试了几种不同的方法都无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T23:43:37.820

非常简单.. 只需在该选择器中更改`f04`即可。`f0`运算符的`^=`意思是“开始于”。

如果它上升到 10 或更高，那么我猜就`^=f`必须这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:43:51.857

您使用的正是您将使用的 CSS 选择器：逗号：

```
$('#f04, #f05, #f06').filter('[value=""]').css('background-color', 'red');​​​​​​​​​​​ 
```

或更尴尬：

```
$('#f04:[value=""], #f05:[value=""], #f06:[value=""]')
   .css('background-color', 'red');​​​​​​​​​​​ 
```

[在小提琴中看到这个](http://jsfiddle.net/nHdCQ/2/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T23:44:05.507

要获取以“f0”开头的所有元素，您应该使用：

```
$("[id^=f0]") 
```

得到那些以“f0”结尾的

```
$("[id$=f0]") 
```

在你的情况下是这样的`:)`

```
$('[id^="f0"][value=""]').css('background-color', 'red') 
```

另请参阅[JQuery 文档](http://api.jquery.com/category/selectors/)

# logging - Oracle 应用服务器部署的应用程序抛出错误 - NoClassDefFoundError

> ID：11750629
> 
> 赞同：0
> 
> 时间：2012-07-31T23:41:35.590
> 
> 标签：logging, oracle10g, log4j, weblogic-10.x, oracle-application-server

我们已经部署了部署在 oracle 应用程序服务器 10 上的 Web 应用程序，并且在运行应用程序时遇到了这个错误。

```
 Caused by: java.lang.NoClassDefFoundError: org/apache/log4j/Category

 Caused by: org.apache.commons.logging.LogConfigurationException: No suitable Log constructor [Ljava.lang.Class;@12badee for org.apache.commons.logging.impl.Log4JLogger (Caused by java.lang.NoClassDefFoundError: org/apache/log4j/Category) 
```

我们将 log4j 捆绑在我们的 webapp WEBINF/lib 中，并且在我们的应用程序服务器库中也有一个用于 log4j 的共享库。由于这个共享库由许多应用程序共享，我们无法删除它。

我知道这两个 log4j 库之间存在一些类冲突。无论如何，我们可以排除这个共享库并在 Web 应用程序中使用捆绑的 log4j 吗？非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:47:24.500

@Viccari 我一直在寻找同样的东西，但寻找的是带有 OC4J 的旧应用程序服务器。解决方案是添加具有以下内容的 WEB-INF/orion-web.xml

```
<orion-web-app ...>
  ...
  <web-app-class-loader search-local-classes-first="true"
   include-war-manifest-class-path="true" />
  ...
</orion-web-app> 
```

由于我是通过 Enterprise Manager Console 部署应用程序，**因此上述解决方案不起作用**。您必须**在其部署设置中配置类加载**，禁用“继承父应用程序的共享库导入”选项。

另一种选择是使用 META-INF/orion-application.xml 文件创建一个 EAR，该文件具有以下内容并部署该文件

```
<?xml version="1.0" encoding="UTF-8"?>
<orion-application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://xmlns.oracle.com/oracleas/schema/orion-application-10_0.xsd"
    deployment-version="10.1.3.4.0" default-data-source="jdbc/OracleDS"
    component-classification="external" schema-major-version="10"
    schema-minor-version="0">

    <imported-shared-libraries>
        <remove-inherited name="*"></remove-inherited>
    </imported-shared-libraries>

</orion-application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:24:32.657

在应用程序描述符中使用[prefer-web-inf-classes](http://docs.oracle.com/cd/E12840_01/wls/docs103/programming/classloading.html#wp1082452)元素。 根据文件，`weblogic.xml`

> 将此元素设置为 True 会破坏类加载器委托模型，以便 Web 应用程序中的类定义优先于更高级别的类加载器中的类定义加载。这允许 Web 应用程序使用它自己的第三方类版本，它也可能是 WebLogic Server 的一部分。

[这](https://stackoverflow.com/questions/3376046/weblogic-10-3-1-0-is-using-com-bea-core-apache-commons-net-1-0-0-0-1-4-1-jar)是一个相关的问题，也可能对您有所帮助。

# ios - 如何在我的 iOS 项目中添加和执行 .sql 文件？

> ID：11750631
> 
> 赞同：4
> 
> 时间：2012-07-31T23:41:43.107
> 
> 标签：ios, database, xcode, sqlite

我找到了很多关于在 iOS 中使用 SQLite 数据库的教程，但没有找到任何直接引用 .sql 文件的内容。谁能告诉我如何将现有的 SQL 数据库链接到我的应用程序？

编辑：这是一个 MySQL 转储。我们有一个基于浏览器的抽认卡程序，我们现在正在为 Android 和 iOS 设备复制它。该文件已经包含创建表和填充数据的语句，但我不知道如何在应用程序中使用该数据。我可能想使用 NSSearchPathForDirectoriesInDomains 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:58:11.440

我将脚本作为 iOS 项目的一部分执行。我这样做的原因是创建数据库模式的同一系列脚本也会更新数据库模式（发布后，运行新的增量脚本以向前拉模式）。这里有详细解释：

[SQLITE with Android（建立数据库的最佳方法）](https://stackoverflow.com/questions/8663706/sqlite-with-android-best-methodology-for-setting-up-a-database/8663873#8663873)

我将脚本作为资源添加到项目中，然后执行它。有一些 EXxxx 记录调用，但在其他方面是通用的。注意tail的使用——sqlite在脚本循环时执行一条语句，tail作为它停止的标记。这是我用来执行的功能：

```
- (BOOL)executeScript:(NSString *)contents error:(NSError **)error
{
    ENHeading(@"executeScript");

    sqlite3_stmt *stmt = NULL;
    const char *zTail;
    int rc;

    zTail = [contents UTF8String];

    while(zTail != NULL && 0 < strlen(zTail)) 
    {
        ENDebug("zTail: \"%s\"\n", zTail);

        NSString *tailStr = [NSString stringWithUTF8String:zTail];
        NSString *trimmed = [tailStr stringByTrimmingCharactersInSet:
                             [NSCharacterSet whitespaceAndNewlineCharacterSet]];

        if ([trimmed length] == 0)
        {
            ENInfo("ignoring trailing whitespace");
            break;
        }

        // Temporarily hold this until the end of the loop in case we need to report an error
        const char *newzTail;

        rc = sqlite3_prepare_v2(_sqlite3, zTail, -1, &stmt, &newzTail);
        if(SQLITE_OK != rc) 
        {
            ENError(@"prepare err:%@", [self errorMessage]);
            if (error != NULL) {
                *error = [[[ENSqliteError alloc] initWithErrorCode:ENSqliteErrorInvalidSql 
                                                            reason:[self errorMessage]] autorelease];
            }

            return NO;
        }

        rc = sqlite3_step(stmt);
        ENDebug(@"rc=%d", rc);
        switch (rc)
        {
            case SQLITE_ROW:
                ENError(@"statement returns rows, script ignores");
                break;

            case SQLITE_OK:
            case SQLITE_DONE:
                break;

            default:
                ENError(@"error");
                ENError(@"prepare err:%@", [self errorMessage]);
                if (error != NULL) {
                    *error = [[[ENSqliteError alloc] initWithErrorCode:ENSqliteErrorReadingRows 
                                                                reason:[self errorMessage]] autorelease];
                }

                return NO;
        }

        // For next time around the loop
        zTail = newzTail;

        // Clear up since we're about to prepare another
        sqlite3_finalize(stmt);
    } 

    return YES;
} 
```

# prolog - 为什么我在 Prolog Fib/2 中的谓词总是说“超出本地堆栈”？

> ID：11750637
> 
> 赞同：4
> 
> 时间：2012-07-31T23:43:00.027
> 
> 标签：prolog, stack, fibonacci, failure-slice

我写了一个谓词 fib/2 来计算 Prolog 中的斐波那契数。虽然它有效，但它总是说“超出本地堆栈”，错误看起来像：

```
?- fib(10, F).
F = 55 ;
ERROR: Out of local stack 
```

我的谓词如下：

```
fib(0, 0).
fib(1, 1).
fib(N, NF) :-
    A is N - 1, 
    B is N - 2,
    fib(A, AF), 
    fib(B, BF),
    NF is AF + BF. 
```

任何人都知道这是为什么以及如何解决它以获得以下内容::

```
% or the search might stop immediately, without pressing space.
?- fib2(10, F).
F = 55 ;
false. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T23:49:28.833

该`out of local stack`错误意味着程序使用了过多的内存并超出了分配的空间；当程序陷入无限循环时，通常会发生这种情况。在您的情况下，这是跟踪：

```
[trace] 2 ?- fib(2,M).
   Call: (6) fib(2, _G671) ? creep
^  Call: (7) _G746 is 2+ -1 ? creep
^  Exit: (7) 1 is 2+ -1 ? creep
^  Call: (7) _G749 is 2+ -2 ? creep
^  Exit: (7) 0 is 2+ -2 ? creep
   Call: (7) fib(1, _G747) ? creep
   Exit: (7) fib(1, 1) ? creep
   Call: (7) fib(0, _G747) ? creep
   Exit: (7) fib(0, 0) ? creep
^  Call: (7) _G671 is 1+0 ? creep
^  Exit: (7) 1 is 1+0 ? creep
   Exit: (6) fib(2, 1) ? creep
M = 1 ;
   Redo: (7) fib(0, _G747) ? creep
^  Call: (8) _G752 is 0+ -1 ? creep
^  Exit: (8) -1 is 0+ -1 ? creep
^  Call: (8) _G755 is 0+ -2 ? creep
^  Exit: (8) -2 is 0+ -2 ? creep
   Call: (8) fib(-1, _G753) ? creep
^  Call: (9) _G758 is -1+ -1 ? creep
^  Exit: (9) -2 is -1+ -1 ? creep
^  Call: (9) _G761 is -1+ -2 ? creep
^  Exit: (9) -3 is -1+ -2 ? creep
   Call: (9) fib(-2, _G759) ? creep
^  Call: (10) _G764 is -2+ -1 ? creep
^  Exit: (10) -3 is -2+ -1 ? creep
... 
```

如您所见，在发现第二个斐波那契为 1（根据您的定义）后，您要求第二个解决方案；因为您没有指定第三个子句只能在 N>1 prolog 尝试通过计算 fib(-1)、fib(-2)、fib(-3) 等来找到第二个解决方案时使用。

要修复它，您必须`N>1`在第三个子句中添加或类似的规则

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T01:15:24.737

您可能会解决的一个问题是对斐波那契值进行不必要的重新计算。以下是您的代码的一个小改动，以解决此缺陷：

```
:- dynamic db_fib/2.

init_fib :-
    assertz( db_fib(0, 0) ),
    assertz( db_fib(1, 1) ).

fib(N, NF) :-
    A is N - 1,
    B is N - 2,
    get_fib(A, AF),
    get_fib(B, BF),
    NF is AF + BF.

get_fib(A, F) :-
    db_fib(A, F),
    !.

get_fib(A, F) :-
    fib(A, F),
    assertz( db_fib(A, F) ). 
```

例如，在 SWI Prolog 中，可以计算

```
?- init_fib, fib(1000,F). 
```

非常快，没有烟囱排气。

```
?- init_fib.
true.

?- fib(10,A).
A = 55.

?- fib(100,A).
A = 354224848179261915075.

?- fib(1000,A).
A = 43466557686937456435688527675040625802564660517371780402481729089536555417949051890403879840079255169295922593080322634775209689623239873322471161642996440906533187938298969649928516003704476137795166849228875. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T18:03:54.630

您的代码不是**tail-recursive**。适当的尾递归结构意味着可以应用 TRO（尾递归优化）。通过重用递归调用的现有堆栈帧，这实质上将您的递归转换为迭代。应用 TRO 后，每个递归调用都会在调用堆栈上推送一个新的堆栈帧。您应该像这样构建您的谓词（请注意，我还没有实际测试过这段代码，但它应该可以完成这项工作）：

```
% ------------------------------------------------------
% the public interface predicate
% ------------------------------------------------------
fib(1,1).          % first  element in the sequence is 1
fib(2,1).          % second element in the sequence is 1
fib(N,X) :-        % subsequent elements
  N > 2 ,          %   where N > 2
  fib(1,1,3,N,X)   %   are computed
  .

% --------------------------------------
% the private worker predicate for N > 2
% this predicate maintains a sliding 'window' on the fibonacci sequence
% as it computes it
% --------------------------------------
fib( V1 , V2 , N , N , X ) :- % compute the element at position N
  N > 2 ,                     % ensure N > 2
  X is V1 + V2                % value is the sum of the 2 prior elements
  .
fib( V1 , V2 , T , N , X ) :- % on backtracking, slide the window to the right:
  T > 2         ,             %  ensure N > 2
  T1 is T  + 1  ,             %  increment N
  V3 is V1 + V2 ,             %  compute the next value (V1+V2)
  fib(V2,V3,T1,N,X)           %  recurse
  . 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-01T20:09:55.123

程序不终止的原因可以通过只考虑程序的一个片段来最好地看到，称为[故障切片](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")，可以通过**`false`**在程序中添加目标来获得。

```
fib(0, 0) :-**假**的。
fib(1, 1) :-**假**的。
纤维（N，NF）：-
    A 是 N - 1,
    B 是 N - 2，
    fib(A, AF), false ,
     fib(B, BF) ,
     NF 是 AF + BF。

```

您的程序的所有~~删除~~部分对终止没有任何影响。它们可能会产生其他影响，例如您的程序何时成功或失败，但在终止时没有。

要使程序终止，必须更改可见部分中的某些内容。显然，第一个参数是无限减少的。

但是故障片也意味着许多其他程序实际上将具有相同的故障片。例如，将事实放在最后（如@RicardoMojica 所建议的那样）。可以以相同的方式删除这些事实，**`false`**从而产生相同的程序。因此：

> 更改子句的顺序对（通用）终止没有影响。

* * *

^(有限保修
所有这些声明仅适用于纯单调程序。不纯的非单调特征和副作用会破坏这些特性。)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T18:42:24.797

如果这样写，最有可能是订单（谁是先有鸡还是先有蛋）：

```
fib(N, NF) :- 
  A is N - 1, 
  B is N - 2,
  fib(A, AF), 
  fib(B, BF),
  NF is AF + BF.
fib(1, 1).
fib(0, 0). 
```

问题将得到解决。

# java - 如何正确显示自定义警报对话框

> ID：11750638
> 
> 赞同：0
> 
> 时间：2012-07-31T23:42:59.543
> 
> 标签：java, android, checkbox, dialog, popup

使此客户对话框看起来正确时遇到问题。

这是我的布局代码

```
<RelativeLayout

xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/layout_root"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent" >
<!--               android:padding="8dp" -->

<ImageView android:id="@+id/image"
           android:layout_width="wrap_content"
           android:layout_height="fill_parent"
           android:layout_marginRight="10dp"
           />

<ScrollView 
  android:paddingTop="2.0dip" 
  android:paddingBottom="5.0dip" 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content" >

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="#FFF"
    android:textSize="4dp"      
    android:padding="5.0dip" />

   </ScrollView>

   <CheckBox
     android:id="@+id/checkBox1"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:gravity="center_vertical"
     android:text="Do Not Show Me This Again"
     android:textColor="#FFF" >
    </CheckBox>

 </RelativeLayout> 
```

这是它看起来像 [http://dl.dropbox.com/u/68717396/sddsds.png](http://dl.dropbox.com/u/68717396/sddsds.png)的屏幕截图， 抱歉这条糟糕的线，但是这条线在哪里，这是滚动视图结束的地方，我想要它尽可能多地填充文本，并使复选框保持一点高度，（不裁剪或任何东西）只需利用所有空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:59:12.620

也许这可以帮助：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
<!--               android:padding="8dp" -->

<ImageView android:id="@+id/image"
       android:layout_width="wrap_content"
       android:layout_height="fill_parent"
       android:layout_marginRight="10dp"
       />

<ScrollView 
    android:paddingTop="2.0dip" 
    android:paddingBottom="5.0dip" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:layout_above="@id/checkBox1" >

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="#FFF"
    android:textSize="10dp"         
    android:padding="5.0dip" />

</ScrollView>

<CheckBox
     android:id="@+id/checkBox1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_centerVertical="true"     
     android:text="Do Not Show Me This Again"
     android:textColor="#FFF" >
</CheckBox>

</RelativeLayout> 
```

我不知道这是否是您正在寻找的结果。

# javascript - CodeMirror 2 中是否可以包含多种模式？

> ID：11750651
> 
> 赞同：3
> 
> 时间：2012-07-31T23:44:27.717
> 
> 标签：javascript, codemirror

是否可以在 CodeMirror 2 实例中包含两种或多种模式？

例如

```
var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
    value: "Hello World",
    mode: "css", "html", "javascript"
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:54:10.333

只需使用`htmlmixed`模式。这取决于`xml`和`javascript`模式`css`。

# ruby-on-rails - 超过 Heroku 上共享数据库的限制

> ID：11750652
> 
> 赞同：1
> 
> 时间：2012-07-31T23:44:31.740
> 
> 标签：ruby-on-rails, heroku

我今天注意到我的数据库超过了我用于 RoR 应用程序的共享数据库的 5MB 限制。

```
Addons:        New Relic Standard, PG Backups Basic, Shared Database 5MB
Database Size: 135M 
```

当他们发布新计划（开发、基本、起重机）时，他们现在是否关闭了限制？

还有其他人遇到这种情况吗？还没有收到任何通知、警告或任何东西......不过，看起来仍然像一个魅力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:05:28.417

数据库限制传统上一直是对共享数据库的软限制 - 但在新计划中，当您超过分配的行数时您会收到一封电子邮件（我已经收到了一封！）。

我猜旧的共享数据库将很快退役，您将不得不升级到新计划之一。

# excel - 将谷歌搜索结果中的前两个 URL 复制到电子表格

> ID：11750654
> 
> 赞同：0
> 
> 时间：2012-07-31T23:44:55.367
> 
> 标签：excel, search-engine, vba

我正在尝试根据要在 google 中搜索的 a、b 和 c 列运行搜索，并将前两个 url 复制到 d 和 e 列的同一张表中。

会有 ve 可变行，但列将是固定的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:47:55.510

或这个：

[http://translate.google.com/translate?u=http%3A%2F%2Fwww.tomasvasquez.com.br%2Fblog%2Fmicrosoft-office%2Fvba-interagindo-com-o-objeto-internet-explorer&sl=pt&tl= en&hl=en&ie=UTF-8](http://translate.google.com/translate?u=http%3A%2F%2Fwww.tomasvasquez.com.br%2Fblog%2Fmicrosoft-office%2Fvba-interagindo-com-o-objeto-internet-explorer&sl=pt&tl=en&hl=en&ie=UTF-8)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:46:46.717

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

要使用 API，请启动 GET 请求，如下所示：

```
Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP")
   URL = "http://www.google.com/whatever_the_api_tells_you_to_use"
   objHTTP.Open "GET", URL, False
   objHTTP.setRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"
   objHTTP.send ("") 
```

对于来自 API 的响应，访问`objHTTP.responseText`.

如果您编辑帖子以提供更多详细信息，我可以提供更具体的帮助。

# ruby - Ruby中按元素顺序对数组进行分组的最简单方法是什么？

> ID：11750656
> 
> 赞同：3
> 
> 时间：2012-07-31T23:45:10.467
> 
> 标签：ruby

Ruby中按元素顺序对数组进行分组的最简单方法是什么？换句话说，要获取所有第 0 个元素，然后是所有第 1 个元素，等等。

所以如果你从这个开始：

```
[[1,2], [:a, :b], [:alpha, :beta]] 
```

你会得到这个：

```
[[1, :a, :b], [2, :b, :beta]] 
```

我可以这样做`zip`：

```
arr = [[1,2], [:a, :b], [:alpha, :beta]]
arr[0].zip(arr[1], arr[2]) 
```

...但我想要一种更通用的方法，它适用于任意数量的任意长度的内部数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:53:10.237

我认为[Array#transpose](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-transpose)是你所追求的：

```
a = [[1,2], [:a, :b], [:alpha, :beta]]
p a.transpose #=> [[1, :a, :alpha], [2, :b, :beta]] 
```

# javascript - 将 JavaScript 数组转换为 JSON 对象

> ID：11750662
> 
> 赞同：1
> 
> 时间：2012-07-31T23:46:20.150
> 
> 标签：javascript, json, gmail, google-apps-script, inline-images

我正在修改 Google Apps 脚本中的邮件合并项目。我面临的问题是如何使电子邮件正文显示内联图像。目前，在调用 GmailApp.sendEmail() 后，原始电子邮件模板中存在的所有内联图像都显示为附件。

我的猜测是，如果我找到某种方法将 imgVars 数组转换为这样的 JSON 对象（取自[GAS 文档中的示例](http://developers.google.com/apps-script/class_gmailapp#sendEmail)），则可以显示内联图像：

```
 MailApp.sendEmail(
    "sg.appsscript@gmail.com",
    "Logos",
    "", 
    { htmlBody: 
      "inline Google Logo<img src='cid:googleLogo'> images! <br/> inline YouTube Logo   <img src='cid:youTubeLogo'>",
     inlineImages: 
     { googleLogo: googleLogoBlob,
       youTubeLogo: youtTubeLogoBlob
     }
    }
  ); 
```

所以我想做的是像这样转换一个数组：

```
var array = { item1, item2, item3 }; 
```

对于这样的 JSON 对象：

```
var json = { item1Name: item1,
             item2Name: item2,
             item3Name: item3
           }; 
```

这是我正在处理的邮件合并的代码片段：

```
 //---------------------------------------------------------------
  // If there are inline images in the body of the email
  // Find them and store them in an array, imgVars
  //---------------------------------------------------------------
  if(emailTemplate.search(/<\img/ != -1)) {  
  var inlineImages = {};

  // Extract all images from the email body
  var imgVars = emailTemplate.match(/<img[^>]+>/g);

  // For each image, extract its respective title attribute
  for (i in imgVars) {
    var title = imgVars[i].match(/title="([^\"]+\")/);
    if (title != null) {
    title = title[1].substr(0, title[1].length-1);
    for (j in attachments) {
       if (attachments[j].getName() == title) {
        inlineImages[title] = attachments[j].copyBlob();
        attachments.splice(j,1);
       }
    }
    var newImg = imgVars[i].replace(/src="[^\"]+\"/,"src=\"cid:"+title+"\"");
    emailTemplate = emailTemplate.replace(imgVars[i],newImg);
    }
  }
 }

 objects = getRowsData(dataSheet, dataRange);
 for (var i = 0; i < objects.length; ++i) {   
   var rowData = objects[i];
   if(rowData.emailSent != "EMAIL_SENT") {

     // Replace markers (for instance ${"First Name"}) with the 
     // corresponding value in a row object (for instance rowData.firstName).

     var emailText = fillInTemplateFromObject(emailTemplate, rowData);     
     var emailSubject = fillInTemplateFromObject(selectedTemplate.getSubject(), rowData);

     GmailApp.sendEmail(rowData.emailAddress, emailSubject, emailText,
                      {name: e.parameter.name, 
                       attachments: attachments, 
                       htmlBody: emailText, 
                       cc: cc, 
                       bcc: bcc, 
                       inlineImages: inlineImages}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:02:42.463

一些评论：

```
> var array = { item1, item2, item3 }; 
```

这在语法上是不正确的，数组文字应该是：

```
var array = [ item1, item2, item3 ]; 
```

[...]

```
> if (emailTemplate.search(/<\img/ != -1)) { 
```

前面的反斜杠`img`是不必要的，模式应该更好地使用尾随空格并且不区分大小写（因为 HTML 不区分大小写并且通常以大写字母显示标签名称），所以`/<img /i`

```
> var imgVars = emailTemplate.match(/<img[^>]+>/g); 
```

用正则表达式解析 HTML 不是一个好主意，最好将 HTML 转换为文档片段并处理它。

```
>  var imgVars = emailTemplate.match(/<img[^>]+>/g); 
```

注意*String.prototype.match*返回一个数组。

```
> for (i in imgVars) { 
```

出于多种原因，不建议将 for..in 与数组一起使用，例如成员可能不会以任何特定顺序返回（在不同的浏览器中可能会有所不同），并且 for..in 将返回数组的所有可枚举属性数组和它`[[Prototype]]`，所以如果你在一个已经`Array.prototype`被“垫片”或“猴子补丁”修改过的浏览器中，那么这些属性也将被枚举，所以：

```
> var title = imgVars[i].match(/title="([^\"]+\")/); 
```

很可能试图在其值为对函数的引用的属性上调用*match*并因此引发错误。至少应该包含一个*hasOwnProperty测试，但最好只使用一个普通的 for 循环。*

```
> for (j in attachments) { 
```

似乎*附件*也是一个数组，因此出于与上述相同的原因，此处也使用普通的 for 循环。*将 for..in （可能以意外顺序访问属性）与splice*一起使用也不是一个好主意，这表明您期待特定的顺序。请注意，在某些浏览器中，for..in 将按照数组成员添加到数组的顺序访问数组成员，而不是按数字顺序。其他浏览器将始终以特定顺序访问数字属性，而其他浏览器则不会。

如果将 HTML 转换为文档片段，其中大部分会简单得多，然后可以使用 DOM 方法提取 img 元素并访问它们的属性以构建对象。然后，如果需要，可以使用本机方法将对象转换为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:31:23.707

100% 保真度来自草稿或预设响应是完全可行的。此代码片段来自我扩展以支持内联图像（嵌入的 blob 和外部引用）和附件的工作邮件合并：

```
...
//selectedTemplate is a Gmail Message (draft/canned response) 
var emailTemplate = selectedTemplate.getBody(); 
var attachments = selectedTemplate.getAttachments();
var to = selectedTemplate.getTo();
var cc = selectedTemplate.getCc();
var bcc = Session.getActiveUser().getEmail();

if(emailTemplate.search(/<\img/ != -1)){  
    var inlineImages = {};
    var imgVars = emailTemplate.match(/<img[^>]+>/g);
    for(i in imgVars){
      var title = imgVars[i].match(/title="([^\"]+\")/);
      if (title) {
        title = title[1].substr(0, title[1].length-1);
        var titleEncoded = title.replace(/ /g,"-");
        for(j in attachments){
          if(attachments[j].getName() == title){
            inlineImages[titleEncoded] = attachments[j].copyBlob().setName(titleEncoded);
            attachments.splice(j,1);
          }
        }
        var newImg = imgVars[i].replace(/src="[^\"]+\"/,"src=\"cid:"+titleEncoded+"\"");
        emailTemplate = emailTemplate.replace(imgVars[i],newImg);
      }
    }
  }
...
GmailApp.sendEmail(....,
                  {attachments: attachments, ...,
                   inlineImages: inlineImages}); 
```

我每天都在与域用户一起工作。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T22:34:39.157

不幸的是，内嵌图像没有标题。它们有一个 alt=Inline Image 1，但这与附件的名称不同。img 标签中的唯一项目是 alt 和 src。

鉴于此，除了希望第一个内联图像是第一个附件等之外，似乎没有任何方法可以将内联图像与附件联系起来。

我应该注意，我正在使用 Gmail 网络界面来创建草稿，并通过“插入图像”实验室插入图像。

# php - 如何使用 PHP 用户身份验证保护我的模板/视图？

> ID：11750668
> 
> 赞同：0
> 
> 时间：2012-07-31T23:46:48.397
> 
> 标签：php, apache, .htaccess, authentication, httpd.conf

我有一个 web 应用程序，我将大部分 PHP 代码单独保存在控制器中。这些控制器在文件的开头有用户身份验证。如果用户通过身份验证，其余代码将运行，并且根据操作，将包含一个 HTML 模板/视图。这些模板文件具有命名方案 file.html.php。

所以我的问题是，我在控制器上有用户身份验证，但是是什么阻止了某人在 URL 中点击我的模板？请注意，这些模板是 100% 无用的，因为我的所有 PHP/数据库代码都在控制器中，因此没有从数据库中提取数据。

阻止这种情况的一种方法是将身份验证检查添加到我的模板文件中，但随后我会在常规页面加载时多次检查身份验证。

另一种方法是我考虑在 apache 中编辑我的 httpd.conf 以拒绝使用 reg 表达式访问这些文件，就像 .htaccess 文件被以下内容阻止一样。

```
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch> 
```

在我这样做之前，其他人在这种情况下会做什么？

# iphone - 从 UIViewController 推送到 UITableViewController 时崩溃

> ID：11750669
> 
> 赞同：0
> 
> 时间：2012-07-31T23:46:49.127
> 
> 标签：iphone, objective-c, xcode, uitableview

这是我的 SearchViewController 的代码。但是当我推送到 nextController 时，应用程序崩溃并且它没有到达 nextController，或者在某些情况下，我在崩溃之前瞥了一眼它。我在日志中收到错误“发送到选择器的错误实例”。SearchViewController 在情节提要中附加了一个 NavigationController，如您所见，我推动了导航控制器。

如果我将 'pushViewController' 更改为 'presentModalViewController' ，它现在可以加载 UITableViewController，但是如果我滚动（滑动）TableView（如果它填充了结果），它现在会崩溃。如果它是空的（没有匹配的结果），它不会崩溃。奇怪的。此外，TableView 上方没有导航栏。

你能告诉我我做错了什么并帮助我纠正它吗？感觉这是一个简单的问题。

SearchViewController.h

```
#import <UIKit/UIKit.h>

@interface SearchViewController : UIViewController

@property (nonatomic, strong) NSMutableArray *allObjectsArray;
@property (nonatomic, strong) NSMutableArray *resultObjectsArray;

@property (nonatomic, strong) IBOutlet UITextField *nameTextField;

-(IBAction)searchButtonPressed:(id)sender;

@end 
```

搜索视图控制器.m

```
-(IBAction)searchButtonPressed:(id)sender{  

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Wine" ofType:@"plist"];
    allObjectsArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

    NSString *nameString = [NSString stringWithFormat:@"%@", [nameTextField text]];

    resultObjectsArray = [NSMutableArray array];
    for(NSDictionary *wine in allObjectsArray)
    {
        NSString *wineName = [wine objectForKey:@"Name"];
        NSRange range = [wineName rangeOfString:nameString options:NSCaseInsensitiveSearch];
        if(range.location != NSNotFound)
        [resultObjectsArray addObject:wine];
    }

NSLog(@"Objects: %@", allObjectsArray);

ResultsTableViewController *nextController = [[self storyboard] instantiateViewControllerWithIdentifier:@"ResultsController"];

nextController.objectsArray = [[NSMutableArray alloc]initWithArray:resultObjectsArray];

NSLog(@"Results: %@", nextController.objectsArray);
[self.navigationController pushViewController:nextController animated:YES];
[nextController release];
} 
```

这是填充 UITableView 的 nextController 中的 objectsArray：

```
@property (nonatomic, strong) NSMutableArray *objectsArray; 
```

结果表视图控制器.m：

```
#import "ResultsTableViewController.h"

@interface ResultsTableViewController ()

@end

@implementation ResultsTableViewController

@synthesize objectsArray;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
 NSLog(@"%s", __FUNCTION__);

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [objectsArray count];
NSLog(@"%s", __FUNCTION__);
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSLog(@"%s", __FUNCTION__);
static NSString *CellIdentifier = @"searchResultCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    // Use the default cell style.
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"searchResultCell"] autorelease];
}

// Configure the cell...
cell.textLabel.text = [[objectsArray objectAtIndex:indexPath.row] valueForKey:@"Name"];

return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:25:24.763

*（作为答案发布 - 请参阅问题评论中的详细信息）*

您使用还是不使用 ARC？因为，你有一些 [UIViewController release] 那里......

*（至于 self.objectsArray）*

```
cell.textLabel.text = [[self.objectsArray objectAtIndex:indexPath.row] valueForKey:@"Name"]; 
```

*   在其他场合。然后，您将确保使用属性获取器...与设置值相同；`self.objectsArray = ...;`但仅限于您访问该物业时；提供，你有它正确`@synthesize`-d

*（还有一件事，只是挑剔）*

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

*   尽可能使用常量作为标识符，绝对是当你已经在范围内定义它时

顺便说一句，我刚刚注意到，您写道“您刚刚停用了 ARC 以使其他代码正常工作”……您不必这样做，您可以在每个文件的基础上禁用 ARC；如果您没有内存管理和 obj-c 经验，请不要在拥有 ARC 时禁用它。这是对 iPhone Obj-C 的一个很好的补充......请参阅我关于如何按类禁用 ARC 的帖子：[将 UIActivityIndi​​cator 添加到 UITableView](https://stackoverflow.com/questions/11747926/adding-uiactivityindicator-to-uitableview/11748008#11748008)

# c# - 从 LINQ 到 EF 查询包含 XML 列的 SQL 视图

> ID：11750672
> 
> 赞同：0
> 
> 时间：2012-07-31T23:47:03.893
> 
> 标签：c#, linq, sql-server-2008, entity-framework, sqlxml

我在 SQL Server 2008 中创建了一个表，如下所示：

**编辑**：我一直在做一些设置 ANSI_NULLS OFF 和 ON 的测试，我错误地粘贴了 ANSI_NULLS OFF 的 create table 语句，我已经尝试了两种方法，但我仍然得到错误但想解决这个问题。希望没有其他粘贴错误。

**编辑 2**：我忘了指出，如果我查询原始表 (TblValues) 一切正常，则有关 ANSI_NULLS 选项的错误仅在使用 db 视图 (TblValuesView) 时发生。

```
SET NUMERIC_ROUNDABORT OFF;
SET ANSI_PADDING, ANSI_WARNINGS, CONCAT_NULL_YIELDS_NULL, ARITHABORT,
    QUOTED_IDENTIFIER, ANSI_NULLS ON;
GO
CREATE TABLE TblValues
(
    Context nvarchar(8) NOT NULL,
    ParentID uniqueidentifier NOT NULL,
    RowSeq int NOT NULL,
    FieldValues xml NOT NULL,
    FieldProperties xml NOT NULL,
)  ON [PRIMARY]
 TEXTIMAGE_ON [PRIMARY] 
```

然后我将此表加载到我的数据模型中，并能够使用 LINQ to EF 对其进行查询。FieldValues 列中的 XML 内容旨在如下所示：

```
<FieldValues>  
  <FieldValue fieldName="txtName">
    <DataType>String</DataType>
    <FldValue>field value</FldValue>
  </FieldValue>
 ...
</FieldValues> 
```

由于我需要以更容易阅读的方式提供 xml 列中的值，因此我为此表创建了一个视图，如下所示：

```
SET NUMERIC_ROUNDABORT OFF;
SET ANSI_PADDING, ANSI_WARNINGS, CONCAT_NULL_YIELDS_NULL, ARITHABORT,
    QUOTED_IDENTIFIER, ANSI_NULLS ON;
GO
CREATE VIEW TblValuesView
WITH SCHEMABINDING
AS
    SELECT TblValuesView.Context,
           TblValuesView.ParentID, 
           TblValuesView.RowSeq, 
           FldValue.value('(@fieldName)[1]', 'nvarchar(30)') AS FieldName, 
           FldValue.value('(DataType)[1]', 'nvarchar(13)') AS DataType, 
           FldValue.value('(FldValue)[1]', 'nvarchar(max)') AS FldValue, 
    FROM   TblValues CROSS APPLY FieldValues.nodes('/FieldValues/FieldValue') AS FldValues(FldValue)
GO 
```

然后我也将此视图添加到数据模型中。现在，如果我从 SQL Server Management Studio 查询此视图，我会得到正确的值：

```
Context |  ParentID | RowSeq | FieldName | DataType | FldValue
----------------------------------------------------------------
Ctx         <id>       1        txtName     String     Field Value 
```

但如果执行以下 LINQ 查询：

```
var FldValueViewQuery = (from row in CTX.TblValuesView select row);
foreach(TblValuesView tblValue in FldValueViewQuery)
     System.Diagnostics.Trace.WriteLine(tblValue.FieldName); 
```

然后我得到以下异常：

```
System.Data.EntityCommandExecutionException: An error occurred while executing the command definition. See the inner exception for details.
System.Data.SqlClient.SqlException: SELECT failed because the following SET options have incorrect settings: 'ANSI_NULLS'. 
Verify that SET options are correct for use with indexed views and/or indexes on computed columns and/or filtered indexes and/or query notifications and/or XML data type methods and/or spatial index operations. 
```

如果我这样做，我只能从 SQL Server Mgmt studio 得到这个错误：

```
SET ANSI_NULLS OFF
select * from TblValuesView 
```

我已经搜索过 EF 是否在运行时更改了此选项，并且我已经检查了我的数据库是否启用了 ANSI_NULLS 并默认为 true。我还能检查什么？处理这种情况的资源并不多。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:24:27.980

首先，将表按原样带入 EF，但将 FieldValues 声明为私有（getter 和 setter）。添加以下代码：

```
 public partial class TblValues
 {
     private XElement fldXmlValues = null;
     public XElement FieldXmlValues
     {   
        get{
           if (fldXmlValues == null){
              fldXmlValues = XElement.Parse(this.FieldValues);
              fldXmlValues.Changed += (s,e) => this.FieldValues = fldXmlValues.ToString();
           }
           return fldXmlValues;
        }
        set{
           fldXmlValues = value;
           fldXmlValues.Changed += (s,e) => this.FieldValues = fldXmlValues.ToString();
           this.FieldValues = fldXmlValues.ToString();
        }
     }
  } 
```

然后您应该可以通过以下方式访问：

```
from t in context.TblValues
select t.FieldXmlValues.Attribute("fieldName").Value as FieldName 
```

等等....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:59:19.280

我找到了罪魁祸首。

感谢一位知道如何在我们的数据模型中设置连接的同事，我发现在打开与数据库的连接时正在执行 SET ANSI_NULLS OFF 命令，导致我们的所有命令都使用此设置运行，如下所示：

```
public class MyConnection : DbConnection
{
    ...
    public override void Open()
    {
        using (SqlCommand cmd = new SqlCommand("SET ANSI_NULLS OFF", (SqlConnection)this.WrappedConnection))
        {
            cmd.ExecuteNonQuery();
        }
    }
    ...
} 
```

给我的原因是 .NET 4 上的 EF 和 ANSI_NULLS 存在问题。但似乎需要这样的查询才能使用 ANSI_NULLS ON。

总而言之：**当使用节点（）时，包含 Xml 类型的视图在实体框架中可以工作**

# python - 如何使用 xlrd 或 xlwt 打开 Excel 应用程序？

> ID：11750680
> 
> 赞同：1
> 
> 时间：2012-07-31T23:48:20.833
> 
> 标签：python, excel, win32com, xlrd, xlwt

我知道我可以通过将 Visible 设置为 true 来使用 win32com 打开 MS Excel 应用程序 我可以使用 xlrd 或 xlwt 做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:46:44.293

xlrd 和 xlwt 都是用于读取 Excel 文件（即存储格式）的库 - 它们与实际的 Excel 可执行文件或库没有任何联系（它们甚至不需要 Excel 可以安装在相关系统上（我是使用它们，例如在 CentOS 机器上）。

如果您只是想启动 Excel，您可以使用[`subprocess`](http://docs.python.org/library/subprocess.html#module-subprocess)：

```
# Note, your path probably differs
subprocess.call(r"C:\Program Files\Microsoft Office\Office12\EXCEL.exe")

# The script will wait until Excel is closed and then continue 
```

# javascript - 更改谷歌地图标记位置

> ID：11750682
> 
> 赞同：0
> 
> 时间：2012-07-31T23:48:48.020
> 
> 标签：javascript, google-maps, google-maps-api-3

我想通过文本字段值（地址）更新标记位置并且我得到了功能

```
<script type="text/javascript">
var mapa;
var marker;

function initialize() {

if (GBrowserIsCompatible()) {

 mapa = new GMap2(document.getElementById("mapa"));
mapa.addControl(new GLargeMapControl());
mapa.addControl(new GMapTypeControl());
mapa.addControl(new GOverviewMapControl(new GSize(140,110)));
var center = new GLatLng({/literal}{if $mapa.lat ne "" && $mapa.lat ne "a"}{$mapa.lat}{else}51.919438{/if}, {if $mapa.lng ne "" && $mapa.lng ne "a"}{$mapa.lng}{else}19.145136{/if});
mapa.setCenter(center, {if $mapa.zoom ne "" && $mapa.zoom ne "a"}{$mapa.zoom}{else}6{/if}{literal});

marker = new GMarker(center, { draggable: true});

GEvent.addListener(marker, "dragstart", function() {
mapa.closeInfoWindow();
});

GEvent.addListener(marker, "dragend", function() {
document.getElementById('lat').value = marker.getPoint().lat();
document.getElementById('lng').value = marker.getPoint().lng();
document.getElementById('zoom').value = mapa.getZoom();
});

mapa.addOverlay(marker);

}

}
function getLocation() {
   var geocoder = new GClientGeocoder();
    address = document.getElementById("location").value;
     geocoder.getLatLng(
    address,
    function(point) {
      if (!point) {
        alert(address + " nie znaleziony");
      } else {
        alert(point);
        mapa.setCenter(point, 13);
        marker.setMap(mapa);
        marker.setPosition(point);
       // mapa.addOverlay(marker);

      }
    }
  );

}
</script> 
```

我不知道为什么标记没有移动，甚至没有添加另一个。一个保持在第一位置，但地图在类型地址上发生变化

# cron - 我可以指定一个 URL 作为 cron 的文件路径吗？

> ID：11750683
> 
> 赞同：1
> 
> 时间：2012-07-31T23:48:57.530
> 
> 标签：cron

我想让 cron 每分钟执行一个脚本。该脚本将根据脚本确定向不同的人发送电子邮件（我不希望 cron 通过电子邮件发送任何内容）。下面的代码会起作用，还是文件路径需要以不同的方式构造？

```
MAILTO=""
* * * * * http://www.mydomain.com/myfile.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:57:56.600

不，这行不通。要让 cron 执行您的 php 脚本，您有两个选择。

```
MAILTO=""
* * * * * lynx -dump http://www.mydomain.com/myfile.php 
```

或者

```
MAILTO=""
* * * * * /usr/local/bin/php /local/path/to/myfile.php 
```

您当然可以使用 curl 或其他 Web 客户端来代替 lynx。后者当然需要 php 脚本是本地的。

# c# - 运算符“&&”不能应用于“System.DateTime”和“System.DateTime”类型的操作数

> ID：11750686
> 
> 赞同：6
> 
> 时间：2012-07-31T23:49:09.627
> 
> 标签：c#

我认为这会起作用，但显然它没有。请问有什么建议吗？

```
if (c.ArrivalTime = DateTime.MinValue && c.ExpiryTime = DateTime.MinValue)
{

} 
```

然后我明白了，*运算符'&&'不能应用于'System.DateTime'和'System.DateTime'类型的操作数*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T23:49:57.727

您需要`==`在 C# 中使用相等运算。

请参阅 C# 语言规范中的第 1.4 节表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T23:50:38.753

你缺少相等运算符 ==

请用这种方式

```
if (c.ArrivalTime == DateTime.MinValue && c.ExpiryTime == DateTime.MinValue) 
```

# c# - List.AddRange 与 IEnumerable 参数不起作用？

> ID：11750688
> 
> 赞同：7
> 
> 时间：2012-07-31T23:49:35.837
> 
> 标签：c#, list, ienumerable, deferred, addrange

我有以下场景，我想将一些项目添加到列表中......

```
List<T> items = new List<T>();
IEnumerable<T> addItems = someCollection.Where(...);
items.AddRange(addItems); 
```

使用此代码，不会将任何项目添加到列表中，但如果我在 Linq 语句之后添加 .ToList() 则项目会正确添加。我猜这是由于延迟执行，但我会认为给定 List.AddRange 函数接受一个 IEnumerable ，它将枚举要添加的项目。

有人可以澄清为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:00:54.497

> 我猜这是由于延迟执行，但我会认为给定 List.AddRange 函数接受一个 IEnumerable ，它将枚举要添加的项目。

确实如此。有一个短路`ICollection<T>`（在这种情况下您不会遇到），这将导致它使用[`ICollection<T>.CopyTo`](http://msdn.microsoft.com/en-us/library/0efx51xw.aspx)而不是枚举项目，否则，它将枚举集合。

对于一个工作示例，请尝试：

```
using System;
using System.Linq;
using System.Collections.Generic;

internal class Program
{
    private static List<T> RunQuery<T>(IEnumerable<T> someCollection, Func<T, bool> predicate)
    {
        List<T> items = new List<T>();
        IEnumerable<T> addItems = someCollection.Where(predicate);
        items.AddRange(addItems);
        return items;
    }

    static void Main()
    {
        var values = Enumerable.Range(0, 1000);

        List<int> results = RunQuery(values, i => i >= 500);

        Console.WriteLine(results.Count);
        Console.WriteLine("Press key to exit:");
        Console.ReadKey();
    }
} 
```

这将使用您的确切代码，并将打印出 500（正确的项目数`List<T>`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T00:06:08.570

> 我原以为 List.AddRange 函数接受一个 IEnumerable ，它将枚举要添加的项目。

我尝试了以下方法并且`AddRange(IEnumerable<T>)`确实有效

```
List<string> someCollection = new List<string>{"A", "B", "C"};
List<string> items = new List<string>();
IEnumerable<string> addItems = someCollection.Where(x => x != "");
items.AddRange(addItems); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T00:01:25.060

它确实有效。这是一个证明它的单元测试：

```
[TestFixture]
public class AddRangeTest
{
    [Test]
    public void AddRange()
    {
        var list = new List<int>();
        var someCollection = new List<int> { 1, 2, 3 };
        var subItems = someCollection.Where(x => x > 1);
        list.AddRange(subItems);
        Assert.AreEqual(2, list.Count);
    }
} 
```

也许在您的特定场景中有些东西无法正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T02:24:14.027

感谢您的回复。我试图简化这个例子的代码，但像往常一样，魔鬼在细节中！

在 .Where() 语句和 AddRange() 调用之间，代码是（深入地）清除源（在本例中为“项目”）列表。开发人员没有意识到过滤器被推迟到 AddRange() 调用，此时他们已经清除了源列表。

很高兴知道我没有失去剧情:)

# java - 使用 Java 程序使用 XSLT 转换多个 XML/XHTML/HTML 文件

> ID：11750689
> 
> 赞同：0
> 
> 时间：2012-07-31T23:49:42.990
> 
> 标签：java, xml, xslt, xhtml

我想采用多个输入文件 (XML/HTML/XHTML) 和相应的 XSLT 来为相应的输入文件生成输出文件。如果只有一个输入 XML 文件和一个输入 XSLT 文件，那么我可以通过以下程序成功转换它。例如，在给定程序中，我的输入 (X)HTML 文件是 temp.html，输入 XSLT 是 temp.xsl，它产生的输出为 temp_copy.html。如果我有两个或多个输入文件 temp1.html 和 temp2.​​html 以及相应的 XSLT temp1.xsl 和 temp2.​​xsl，那么最好的方法是什么，那么如何使用相应的生成输出 temp1_copy.html 和 temp2_copy.html输入文件？感谢您！

**我当前的 Java 代码：**

```
 public class SimpleXSLT {
    public static void main(String[] args) {

        String inXML = "C:/tmp/temp.html";
        String inXSL = "C:/tmp/temp.xsl";
        String outTXT = "C:/tmp/temp_copy.html";
        SimpleXSLT st = new SimpleXSLT();
        try {
            st.transform(inXML,inXSL,outTXT);
            } catch(TransformerConfigurationException e) {
            System.err.println("Invalid factory configuration");
            System.err.println(e);
            } catch(TransformerException e) {
            System.err.println("Error during transformation");
            System.err.println(e);
        }
    }
    public void transform(String inXML,String inXSL,String outTXT)
    throws TransformerConfigurationException,
    TransformerException {
        TransformerFactory factory = TransformerFactory.newInstance();
        StreamSource xslStream = new StreamSource(inXSL);
        Transformer transformer = factory.newTransformer(xslStream);
        transformer.setErrorListener(new MyErrorListener());
        StreamSource in = new StreamSource(inXML);
        StreamResult out = new StreamResult(outTXT);
        transformer.transform(in,out);
        System.out.println("The generated XML file is:" + outTXT);
    }
}
class MyErrorListener implements ErrorListener {
    public void warning(TransformerException e)
    throws TransformerException {
        show("Warning",e);
        throw(e);
    }
    public void error(TransformerException e)
    throws TransformerException {
        show("Error",e);
        throw(e);
    }
    public void fatalError(TransformerException e)
    throws TransformerException {
        show("Fatal Error",e);
        throw(e);
    }
    private void show(String type,TransformerException e) {
        System.out.println(type + ": " + e.getMessage());
        if(e.getLocationAsString() != null)
        System.out.println(e.getLocationAsString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:48:02.510

您正在使用 JAXP 转换 API，也称为 TrAX，所以让我们坚持下去。如果您迁移到 XSLT 2.0 和 Saxon，那么使用 Saxon 的 s9api API 会更好，但只要您不需要高级 2.0 功能，Saxon 也支持 TrAX。

在 TrAX 中，表示“已编译”样式表的对象是 Templates 对象。所以你使用 TransformerFactory.newTemplates() 来编译你的样式表，然后你可以重复使用这个 Templates 对象来转换多个源文档。Templates.newTransformer() 为您提供了一个转换器，您可以使用它来执行转换。事实上，您可以重复使用变压器（串联但不能并联）来执行多个变换，但我的建议是每次都使用一个新的变压器。重用模板是您获得性能优势的地方；Templates 对象也是线程安全的。

至于 1.0 与 2.0。对于许多简单的转换，1.0 已经足够了，但是您很快就会发现自己正在做一些在 2.0 中更容易完成的事情，例如分组或字符串操作。由于有一个广泛使用的开源 XSLT 2.0 处理器可用于 Java 平台（即 Saxon），并且具有兼容的 API，因此现在几乎没有理由使用 XSLT 1.0。

许多人错误地认为样式表上的版本属性以某种方式用于选择 XSLT 1.0 或 2.0 处理器。通常情况并非如此（可能在某些 IDE 中，例如 XML Spy 除外）。相反，它用于通知处理器作者正在编写的 XSLT 规范的版本。如果您说 version="1.0" 并选择 2.0 处理器，那么它将以一种尝试最大程度地与 XSLT 1.0 兼容的“怪癖”模式运行，例如，即使您添加两个，它也会使用浮点运算整数。相反，当您说 version="2.0" 并选择 1.0 处理器时，处理器将在遇到它不理解的语言结构时尝试采取回退操作，而不是将这些作为编译时错误拒绝。

# amazon-s3 - 使用 EMR 跨不同账户复制 dynamoDB 表

> ID：11750694
> 
> 赞同：4
> 
> 时间：2012-07-31T23:50:20.723
> 
> 标签：amazon-s3, amazon-dynamodb, amazon-emr, emr

我在一个 DynamoDB 账户中有很多信息表，我想转移到另一个账户。我看到您可以使用 EMR 在一个帐户中复制表，如下所示：[http](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/EMRforDynamoDB.html) ://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/EMRforDynamoDB.html ，但是有没有办法跨不同的帐户进行转移？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-10T10:15:10.403

只需下载 S3 导出并将其上传到新帐户上的存储桶，然后您就可以使用 dynamodb 导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T13:57:03.430

我还没有为 Dynamo 尝试过这个（但适用于 S3）。您可以在此处阅读跨账户 IAM 详细信息：

使用 IAM 角色的跨账户 API 访问 - AWS 身份和访问管理：[http ://docs.aws.amazon.com/IAM/latest/UserGuide/cross-acct-access.html](http://docs.aws.amazon.com/IAM/latest/UserGuide/cross-acct-access.html)

# c# - ASP.NET C# MVC - 在 foreach 中捕获项目的值并传递给模式

> ID：11750699
> 
> 赞同：0
> 
> 时间：2012-07-31T23:51:42.503
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

这最终可能是一个比我想象的要简单得多的问题，但是这里......

我有一个**BookManager**类和一个**Book**类。BookManager 有很多书 - 这是使用 CodeFirst 通过 EntityFramework 设置的。

在 BookManager 的**详细信息**页面中，我使用**foreach**语句显示书籍列表**以及****编辑**特定书籍的链接。

这是代码：

```
@foreach (var item in Model.Books)
    {

        <tr>
           <td>
              @Html.DisplayFor(modelItem => item.BookName)
            </td>
            <td>
              @Html.DisplayFor(modelItem => item.BookNumber)
            </td>
            <td>                                   
              <a class="btn" data-toggle="modal" href="#BookEditModal" @{ViewBag.SelectedBook = item.BookID}>
              <i class="icon-edit"></i>
                 Edit       
              </a>                                

             </td>
         </tr>
      } 
```

这是棘手的部分：

```
<a class="btn" data-toggle="modal" href="#BookEditModal" @{ViewBag.SelectedBook = item.BookID} >
    <i class="icon-edit"></i>
       Edit       
</a> 
```

通常我会做这样的事情： `href="@Url.Action("Edit", "Book", new { id = item.BookID})`

但是，我正在使用**href**属性打开一个模式窗口，该窗口将使用**Html.RenderAction**来显示来自**Book**控制器的适当表单。

这是 BookManager 详细信息页面底部包含的模态窗口：

```
 <div class="modal hide fade in" id="BookEditModal" )>
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>Edit Book</h3>
          </div>
          @using (Html.BeginForm("Edit", "Book", FormMethod.Post))
          {
             <div class="modal-body">
               @{ Html.RenderAction("Edit", "Book", new { id = ViewBag.SelectedBook}); }
             </div>

          }
        </div> 
```

由于我需要将**id**传递给 RenderAction 以使 Edit 方法起作用，因此我需要在**foreach**中单击的**项目**的值——但这不再在范围内。

 **我尝试在 BookManager 的 Details 方法中创建 ViewBag.SelectedBook，但值不是选定的书，而是 foreach 语句循环遍历并且最终的值是`ViewBag.SelectedBook`书的计数。（例如，如果我在列表中有 3 本书，那么 ViewBag.SelectedBook 等于 3）。

我考虑过使用 JQuery 并在单击的项目上调用**$(this)**，但随后我必须使用 Javascript 收集 BookID 并将其转换回 C# 以便在 Html.RenderAction 中收集它 - 这对于我正在尝试做的事情。

我将如何收集单击的**项目**的值并将其传递给模式中的**Html.RenderAction**？

**谢谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:58:29.427

没有其他办法。

我的意思是..你试图让服务器端代码与客户端脚本交互。

由于您的模式对话框是在呈现页面时呈现的，因此您尝试的内容将不起作用。

我的建议是通过控制器操作加载整个模态对话框，可能像这样：

生成您的 foreach 链接，如下所示：

```
<a class="btn edit-book-link" data-toggle="modal" href="/ControllerName/BookForm/@item.BookID"> 
```

..使您的模态对话框 div 空白，如下所示：

```
<div class="modal hide fade in" id="BookEditModal" )>
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Edit Book</h3>
    </div>
    <div id="modalContent"></div>
</div> 
```

创建一个以整数作为模型的视图，例如 BookForm：

```
[HttpGet]
public ViewResult BookForm(int id) {
    return View(id);
} 
```

..然后，使用 jQuery 在每次点击时加载正确的表单：

```
$(function () {
    $('.edit-book-link').click(function (e) {
        $('#modalContent').load($(this).attr('href'), function() {
            // show your modal dialog here using whatever method you use..
        });
        e.preventDefault();
        return false;
    });
}); 
```

然后在您的 BookForm 视图中，您可以使用 ID 生成表单。

希望我正确理解了您的问题。**

# javascript - 当函数内部调用 close 方法时，即兴不是关闭对话框

> ID：11750701
> 
> 赞同：1
> 
> 时间：2012-07-31T23:51:49.863
> 
> 标签：javascript, jquery, impromptu

我被这样的代码困了4个小时：

```
$.loader = function (msg) {
    jQuery.prompt.close();
    $.prompt(msg, { buttons: { }, show: 'fadeIn', promptspeed: 50, overlayspeed: 'fast' });
}

function my_function() {
   jQuery.prompt.close(); 
   $.loader('saving..');
   $.ajax({ 
    type: "POST",
    url: dir + "save.php",
    data: form,
    success: function(html){
                 jQuery.prompt.close(); 
                 $.loader('loading..')
                 $.ajax({ 
             type: "POST",
             url: dir + "load.php",
             data: form,
             success: function(html){
                         jQuery.prompt.close(); 
                     }
            }
    })
}

$('#next').live('click', function () {
    $.loader('processing..');
    my_function()
}) 
```

任务很简单。单击#next 后，它应该首先显示带有“处理”对话框的对话框，稍后应该关闭它并显示“保存”。ajax 成功调用后，它应该使用“正在加载”对话框加载新数据，然后消失。一切都很完美，除了让我发疯的一件事——加载后出现带有“正在加载”文本的对话框，尽管我最后使用了 jQuery.prompt.close()。我为此奋斗了 4 个小时，我已经受够了……请帮忙……我做错了什么？我使用 jquery 1.7.1。

编辑：我找到了解决方案。不是真的，但它解决了我的问题：我发现 impromptu 使用 .jqimessage 类来获取对话框中显示的文本。我没有制作新对象然后再销毁它，而是先制作一次，然后再销毁它。同时，我只更改 .jqimessage 框中的一条消息。效果很好 - 看起来最简单的方法是最好的 :) 感谢您的帮助。

# javascript - javascript - 连接两个变量

> ID：11750703
> 
> 赞同：1
> 
> 时间：2012-07-31T23:51:58.543
> 
> 标签：javascript, variables, connection-string

我有几个（一百个）变量：

```
var image1 = 'xxxx';
var image2 = 'yyyy';
var image3 = 'zzzz'; 
```

ETC...

我正在尝试使用`while`循环将这些图像合并到这样的函数中：

```
i = 0;
while (i<100) {
    $("#somediv").append(image + i);
    } 
```

我理解为什么这不起作用，因为它首先会查找一个变量`image`，然后将变量附加`i`到该变量上。

我怎样才能做到这一点？首先将变量命名为数组？我对javascript不太熟悉，并且更了解PHP。在 PHP 中，我可以做`function $var($i)`并增加 $i++。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T23:54:58.320

不要为每个图像设置单独的变量，而是考虑使用一个数组并对其进行迭代。

```
var images = ['xxxx', 'yyyy', 'zzzz'];

for (var imageIndex = 0; imageIndex < images.length; imageIndex++) {
    $("#somediv").append(images[imageIndex]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:55:14.203

考虑使用数组文字：

```
var images = [
      'xxxx',
      'yyyy',
      'zzzz'
   ],
   somediv = $('#somediv');

for (i = 0, l = images.length; i < l; i += 1) {
   somediv.append(images[i]);
} 
```

# ruby-on-rails - 在 Ruby 中创建数组和搜索

> ID：11750705
> 
> 赞同：0
> 
> 时间：2012-07-31T23:52:22.233
> 
> 标签：ruby-on-rails, ruby, arrays

使用设计，rails 3.2。我试图弄清楚如何创建一个 id 数组，然后检查 current_user 的 id 是否包含在这个数组中。

我的用户通过 location_users 有很多位置。（位置通过相同的关系拥有许多用户。）

我可以毫无问题地获得与位置关联的 user_ids 列表：

```
 @location.users.each do |u|
   puts u.id 
```

但是，我假设我需要将 id 输出到一个数组并检查如下：

```
 - [user_ids].include? current_user.id 
```

我怎样才能实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:59:03.527

```
@location.users.map(&:id).include? current_user.id 
```

或者更确切地说

```
@location.users.include? current_user 
```

应该可以工作，但涉及加载所有 location.users 然后搜索数组。我会考虑编写一个让数据库处理这个的语句。

更新：这是一种让数据库处理它说你想检查用户 5 是否在位置 1 的方法：

```
LocationsUser.where(location_id: 1).find_by_user_id(5) 
```

这将返回关联（LocationsUser 的实例）或 nil。

# c# - 在静态类中获取对 IUnityContainer 的引用

> ID：11750706
> 
> 赞同：1
> 
> 时间：2012-07-31T23:52:23.580
> 
> 标签：c#, .net, unity-container

我正在尝试在我的域中的静态类中获取对我的容器的引用，以便我可以执行以下操作：

```
public static class DomainEvents
{
    public static IUnityContainer Container { get; set; }

    // ...

    public static void Do<T>(T args) where T : IMyInterface
    {
        foreach (var s in Container.ResolveAll<IDoSomething<T>>())
            s.DoSomething(args);
    }
} 
```

我显然不能通过构造函数注入它，有没有其他方法可以处理它，以便我可以解决他们的注册问题？阅读一些文档并没有真正的帮助。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:04:56.910

为什么不直接将容器作为参数传递给函数呢？甚至更好的是，这看起来是扩展方法的不错选择。如果您将函数头更改如下，那么您应该可以直接在容器上调用 Do。即：container.Do(args);

```
public static void Do<T>(this IUnityContainer container, T args) where T : IMyInterface
{
    foreach (var s in container.ResolveAll<IDoSomething<T>>())
        s.DoSomething(args);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:40:41.170

您可能正在练习领域驱动设计并`DomainEvents`从实体的方法中引用这个静态类。不幸的是，这使得对实体进行单元测试变得更加困难，因为您现在需要在测试中配置 Unity Container。

相反，在实体的方法上使用方法注入，并将`IDomainEvents`接口注入到需要它的方法中。虽然方法注入通常是次优的，但在处理实体时，构造函数和属性注入是不可能的，但方法注入使代码能够松散耦合：

```
public class Order
{
    public void CancelOrder(IDomainEvents de)
    {
        ...
    }
} 
```

# android - 带有PhoneGap的原生Android菜单项的jQuery Mobile changePage

> ID：11750707
> 
> 赞同：0
> 
> 时间：2012-07-31T23:52:54.200
> 
> 标签：android, jquery-mobile, cordova

我已经使用 jQuery Mobile 创建了一个 Web 应用程序。效果很好。我什至设法使用PhoneGap 构建了一个可用的APK。

我遇到的一件事是：

如何对原生菜`$.mobile.changePage()`单项的单击事件执行 a`changePage()`

我已经在 Eclipse 的 xml 文件中创建了菜单项，并且在我的搜索中，我发现了与 onOptionsItemSelected() 关联的 Java 代码，我认为这与我正在寻找的内容接近，但我对 Java 的经验为零. 我什至无法正确安装 Minecraft 模组。我想我基本上想知道如何在本机菜单项的 onclick 中执行 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:07:52.367

```
document.addEventListener("menubutton", yourCallbackFunction, false); 
```

您需要确保在代码中包含了 cordova.js 才能使用此事件

请参阅[http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#Events](http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#Events)

# jdbc - 连接关闭后关闭语句和结果集

> ID：11750708
> 
> 赞同：0
> 
> 时间：2012-07-31T23:53:03.220
> 
> 标签：jdbc

我最近搬到了一个项目，在那里我遇到了很多这种性质的代码——（这是使用 jdbc postgres 驱动程序）

```
try {
    Connection conn = pool.getAConnection(); //home-grown conn pool 
    PreparedStatement ps = ..;
    ResultSet rs = ..;
    rs = ps.executeQuery();
    ...
 } catch (SQLException se) {
    conn.close(); 
} finally {
    if (stmt != null) stmt.close();
    if (rs != null) rs.close();
} 
```

显然，这段代码已经投入生产了一段时间，没有引起任何问题。

我觉得很难理解的是，在异常流中，连接首先被关闭或返回到池中；然后尝试关闭语句和结果集。关闭父连接对象后执行此操作是否有意义？

由于代码的结构方式，连接释放必须在异常块中完成。这是无法改变的。话虽如此，在连接被释放到池之后，是否可以将 stmt.close() 和 rs.close() 留在最后？

为了进一步澄清，如果我的理解是正确的（即语句和结果集必须在连接关闭之前而不是之后关闭），我需要在 catch 和 finally 之间重复一些代码。修改后的代码现在如下所示。这可以简化吗？

```
try {
...
} catch(Exception ex){
      if (rs != null) {
         close(rs); rs = null; // close() method impl just calls rs.close() in try-catch block
      }
      if (ps != null) {
         close(ps); ps = null;
      }
      processException( ex, con); // This method logs and then either closes the connection or releases to pool, depending on some conditions. 
      con = null;
  } finally {
      if (rs != null) {
          close(rs); 
      }
      if (ps != null) {
          close(ps); 
      }             
      if (null != con) {
          close(con);
      }
  } 
```

只是为了透视，这段代码已经结束了——至少有 100 个左右的方法！如果可能的话，我想进一步简化这一点。感谢您的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:48:44.337

`finally`在块中释放连接是非常有意义的。关闭你的`Statement`和`ResultSet`在你的`finally`街区也是如此。

原因很简单：在成功执行和异常情况下，您都确保您的`Statement`and被关闭。`ResultSet`连接也是如此。`finally`我会在街区做这样的事情

```
try{

}catch(Exception exe){

}finally{
    if (stmt != null) stmt.close();
    if (rs != null) rs.close();

    //release connection to connection pool

} 
```

另外，我相信当 a`Statement`关闭时，它的电流`ResultSet`也关闭了。因此，如果`rs`与 相关联`stmt`，那么我相信它会在您执行时关闭`stmt.close()`

# ruby-on-rails - rspec 验证失败

> ID：11750715
> 
> 赞同：0
> 
> 时间：2012-07-31T23:54:05.593
> 
> 标签：ruby-on-rails, rspec

我有一个 meeting.rb 和 user.rb 模型

会议.rb

```
class Meeting < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location

  validates :requestor_id, presence: true
  validates :requestee_id, presence: true

  belongs_to :requestor, class_name: "User"
  belongs_to :requestee, class_name: "User"

end 
```

用户.rb

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    has_secure_password

    has_many :sent_meetings, :foreign_key => "requestor_id", :class_name => "Meeting"
    has_many :received_meetings, :foreign_key => "requestee_id", :class_name => "Meeting" 
```

我不知道如何防止我的 meeting_spec.rb 验证失败。出于某种原因，我的 sent_meetings 或 requested_meetings（会议类）没有链接到它们各自的请求者或被请求者（用户类）（最后两个代码块，“当 requestor_id 不存在时”，“当 requestee_id 不存在时”）。

会议规范.rb

```
require 'spec_helper'

describe Meeting do

  let(:requestee) { FactoryGirl.create(:user) }
  let(:requestor) { FactoryGirl.create(:user) }

  before { @received_meeting = requestee.received_meetings.build(intro: "Lorem ipsum") }
  before { @sent_meeting = requestor.sent_meetings.build(intro: "Lorem ipsum") }

  describe "sent meetings" do
    subject { @sent_meeting }
      it { should respond_to(:intro) }
      it { should respond_to(:requestor_id) }
      it { should respond_to(:requestor) }
      its(:requestor) { should == requestor }
      it { should be_valid }
  end

  describe "received meetings" do
    subject { @received_meeting }
      it { should respond_to(:intro) }
      it { should respond_to(:requestee_id) }
      it { should respond_to(:requestee) }
      its(:requestee) { should == requestee }
      it { should be_valid }
  end

  describe "accessible attributes" do
    it "should not allow access to requestor_id" do
      expect do
        Meeting.new(requestor_id: requestor.id)
      end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end

    it "should not allow access to requestee_id" do
      expect do
        Meeting.new(requestee_id: requestee.id)
      end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end
  end

  describe "when requestor_id is not present" do
    before { @sent_meeting.requestor_id = nil }
    it { should be_valid }
  end

  describe "when requestee_id is not present" do
    before { @received_meeting.requestee_id = nil }
    it { should be_valid }
  end
end 
```

这是我得到的 rspec 错误：

```
Failures:

  1) Meeting sent meetings 
     Failure/Error: it { should be_valid }
       expected valid? to return true, got false
     # ./spec/models/meeting_spec.rb:17:in `block (3 levels) in <top (required)>'

  2) Meeting received meetings
     Failure/Error: it { should be_valid }
       expected valid? to return true, got false
     # ./spec/models/meeting_spec.rb:26:in `block (3 levels) in <top (required)>'

Finished in 0.77435 seconds
42 examples, 2 failures

Failed examples:

rspec ./spec/models/meeting_spec.rb:17 # Meeting sent meetings 
rspec ./spec/models/meeting_spec.rb:26 # Meeting sent meetings 
```

非常感谢有关如何在用户（请求者、被请求者）和会议（sent_meeting、requested_meeting）之间建立这种关联的任何意见。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:25:11.077

在您的模型中，您要求同时存在两个 id

```
 validates :requestor_id, presence: true
  validates :requestee_id, presence: true 
```

因此，如果您按照规范将其中一个设为 nil

```
 describe "when requestor_id is not present" do
    before { @sent_meeting.requestor_id = nil }
    it { should be_valid }
  end 
```

它们是无效的，无效的，因为您在这种情况下声明它们无效。

# ios - 为什么 CGPDFDocumentRef 在视图上显示模糊的线条？（见图片）

> ID：11750716
> 
> 赞同：0
> 
> 时间：2012-07-31T23:54:09.003
> 
> 标签：ios, pdf, quartz-graphics, cgcontext, cgpdfdocument

我有一个非常奇怪和特殊的情况，我想在屏幕上显示 PDF。但是，问题是我的文档显示模糊的线条，而不是在 Acrobat Pro 程序中显示。

看这张图片：

[http://imgur.com/ws4Qi](http://imgur.com/ws4Qi)

这是我可以用 CGContext 修复（模糊的线条）还是分辨率问题。这是我的代码：

```
- (id)initWithFrame:(CGRect)frame {

self = [super initWithFrame:(CGRect)frame];
if (self) {
    self.backgroundColor = [UIColor clearColor];
    NSString *pathToPdfDoc = [[NSBundle mainBundle] pathForResource:@"myPDF" ofType:@"pdf"];
    NSURL *pdfUrl = [NSURL fileURLWithPath:pathToPdfDoc];
    document = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdfUrl);
    currentPage = 1;

}

return self;
}

+ (void) renderPage: (CGPDFPageRef) page inContext: (CGContextRef) context{
[viewPDF renderPage:page inContext:context atPoint:CGPointMake(0, 0)];
}

+ (void) renderPage: (CGPDFPageRef) page inContext: (CGContextRef) context atPoint:(CGPoint) point{
[viewPDF renderPage:page inContext:context atPoint:point withZoom:100];
}

+ (void) renderPage: (CGPDFPageRef) page inContext: (CGContextRef) context atPoint: (CGPoint) point withZoom: (float) zoom{

CGRect cropBox = CGPDFPageGetBoxRect(page, kCGPDFCropBox);
int rotate = CGPDFPageGetRotationAngle(page);

CGContextSaveGState(context);

// Setup the coordinate system.
// Top left corner of the displayed page must be located at the point specified by the 'point' parameter.
CGContextTranslateCTM(context, point.x, point.y);

// Scale the page to desired zoom level.
CGContextScaleCTM(context, zoom / 100, zoom / 100);

// The coordinate system must be set to match the PDF coordinate system.
switch (rotate) {
    case 0:
        CGContextTranslateCTM(context, 0, cropBox.size.height);
        CGContextScaleCTM(context, 1, -1);
        break;
    case 90:
        CGContextScaleCTM(context, 1, -1);
        CGContextRotateCTM(context, -M_PI / 2);
        break;
    case 180:
    case -180:
        CGContextScaleCTM(context, 1, -1);
        CGContextTranslateCTM(context, cropBox.size.width, 0);
        CGContextRotateCTM(context, M_PI);
        break;
    case 270:
    case -90:
        CGContextTranslateCTM(context, cropBox.size.height, cropBox.size.width);
        CGContextRotateCTM(context, M_PI / 2);
        CGContextScaleCTM(context, -1, 1);
        break;
}

// The CropBox defines the page visible area, clip everything outside it.
CGRect clipRect = CGRectMake(0, 0, cropBox.size.width, cropBox.size.height);
CGContextAddRect(context, clipRect);
CGContextClip(context);

CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);

CGContextSetLineJoin(context, kCGLineJoinRound);

CGContextFillRect(context, clipRect);

CGContextTranslateCTM(context, -cropBox.origin.x, -cropBox.origin.y);

CGContextDrawPDFPage(context, page);

CGContextRestoreGState(context);

}

 + (void) renderPage: (CGPDFPageRef) page inContext: (CGContextRef) context inRectangle: (CGRect) displayRectangle {
if ((displayRectangle.size.width == 0) || (displayRectangle.size.height == 0)) {
    return;
}

CGRect cropBox = CGPDFPageGetBoxRect(page, kCGPDFCropBox);
int pageRotation = CGPDFPageGetRotationAngle(page);

CGSize pageVisibleSize = CGSizeMake(cropBox.size.width, cropBox.size.height);
if ((pageRotation == 90) || (pageRotation == 270) ||(pageRotation == -90)) {
    pageVisibleSize = CGSizeMake(cropBox.size.height, cropBox.size.width);
}

float scaleX = displayRectangle.size.width / pageVisibleSize.width;
float scaleY = displayRectangle.size.height / pageVisibleSize.height;
float scale = scaleX < scaleY ? scaleX : scaleY;

// Offset relative to top left corner of rectangle where the page will be displayed
float offsetX = 0;
float offsetY = 0;

float rectangleAspectRatio = displayRectangle.size.width / displayRectangle.size.height;
float pageAspectRatio = pageVisibleSize.width / pageVisibleSize.height;

if (pageAspectRatio < rectangleAspectRatio) {
    // The page is narrower than the rectangle, we place it at center on the horizontal
    offsetX = (displayRectangle.size.width - pageVisibleSize.width * scale) / 2;
}
else { 
    // The page is wider than the rectangle, we place it at center on the vertical
    offsetY = (displayRectangle.size.height - pageVisibleSize.height * scale) / 2;
}

CGPoint topLeftPage = CGPointMake(displayRectangle.origin.x + offsetX, displayRectangle.origin.y + offsetY);

[viewPDF renderPage:page inContext:context atPoint:topLeftPage withZoom:scale * 100];
}

-(void)drawRect:(CGRect)inRect{                 
if(document) 

{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGPDFPageRef page = CGPDFDocumentGetPage(document, currentPage);
    [viewPDF renderPage:page inContext:ctx  atPoint:CGPointMake(10,10) withZoom:125];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:48:12.533

好的。该问题已通过 PDF 的源文件 Finale 解决。2012 版现在可以导出为 PDF 并按原样导出行。代码留在这里，以帮助任何想要在所有屏幕上显示 PDF 的人

# haskell - 在 Haskell 中绑定部分应用的函数

> ID：11750727
> 
> 赞同：2
> 
> 时间：2012-07-31T23:55:18.650
> 
> 标签：haskell, partial-application

我是 Haskell 新手，所以如果你觉得这个问题微不足道，请原谅：

我如何让 GHCi 接受这种声明：`let foo = fmap (*3) . fmap (+10)`？

我尝试向 foo ( `let foo :: [Int] -> [Int] =`etc) 添加类型声明以使仿函数类型显式但编译器会响应`Illegal Signature`。

谢谢！

编辑 - 显然有很多方法可以做到这一点。我选择了 Tikhon 的答案，因为他是第一个，而且相当直观。谢谢大家！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T00:04:31.387

在 ghci 中给出类型签名，不需要任何扩展的最好方法是用分号分隔签名和绑定，

```
let foo :: Num n => [n] -> [n]; foo = map (*3) . map (+ 10) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T00:00:04.227

您可以给表达式（即`fmap (* 3) . fmap (+ 10)`）一个签名，而不是给它`foo`。所以：

```
let foo = fmap (* 3) . fmap (+ 10) :: [Int] -> [Int] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T23:59:29.873

完整的错误读取

```
Illegal signature in pattern: [Int] -> [Int]
    Use -XScopedTypeVariables to permit it 
```

解决方案是运行

```
:set -XScopedTypeVariables 
```

现在你可以尝试运行你的`let foo :: [Int] -> [Int] = fmap (*3) . fmap (+10)`，它会工作的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T00:02:40.813

```
:set -XNoMonomorphismRestriction 
```

# c# - Creating directories and copying files at runtime

> ID：11750729
> 
> 赞同：0
> 
> 时间：2012-07-31T23:55:24.683
> 
> 标签：c#, winforms

I'm working on a winform application which creates directories and copies files to the user's local machine at runtime. My question is: Can my application create and copy files to the user's local machine even if he doesn't have administrative privileges? If not, how can I do that?
Thanks
EDIT: I'm asking because a user complained that some files weren't copied to his HD.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:59:38.263

You need elevated permissions only to copy to certain protected areas. This especially caused problems when Vista was introduced because programs used to maintaining data in the folder they were installed (e.g. and ini file) would no longer work with default permission settings.

Have a look at Environment.SpecialFolders

[http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

especially at the CommonApplicationData location.

It is wise to store your program data in a subfolder from that or a similar location intended for program specific storage.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:00:19.367

You can do anything you said.

But you need to give admin rights to your application.

Also see [this](http://victorhurdugaci.com/using-uac-with-c-part-1/) and [this](http://victorhurdugaci.com/using-uac-with-c-part-2/).

# ios - 在 iOS 5 中创建和使用流

> ID：11750732
> 
> 赞同：0
> 
> 时间：2012-07-31T23:55:30.050
> 
> 标签：ios, json

请耐心等待，我是一名新程序员。（我说的可能没有道理）

我正在尝试创建一个 inputStream 和 outPut 流，以便我可以使用类中其他地方的 JSON 对象对其进行写入...

我想知道我是否做得对。目前，我在 -(id)init{} 中打开流

```
 -(id)init{
_isNetworkAvailable = FALSE;
//kCFAllocatorDefault is the same thing as Null
CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, (__bridge CFStringRef)requestURL, port, &readStream, &writeStream);

NSInputStream *inputStream = (__bridge NSInputStream *)readStream;
NSOutputStream *outputStream = (__bridge NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open];
//There should really be some checking going on here, but we're going to forget it for now
//Call some checking method
_isNetworkAvailable = TRUE;

return self;
 } 
```

我的问题是：这是处理此类事情的正确方法吗？我应该在其他地方声明 NSInputStream 和 NSOutputStream 吗？

为什么我必须将我的 CFStreams 转换为 NSStreams？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:01:07.330

经过一些测试，这是创建流的正确方法。CFStreams 被转换为 NSStreams，因为 NSStreams 是 obj-c 原生的，并且提供了更多的选择和使用的灵活性。NSStream 实际上是基于 CFStream（它是 BSD 套接字的包装器）。

据我所知，这段代码应该总是异步运行，否则你会在运行时看到一些挂起的东西。

# oop - 需要一个包含单位的类型的简单示例

> ID：11750733
> 
> 赞同：1
> 
> 时间：2012-07-31T23:55:35.260
> 
> 标签：oop, design-patterns

我有一个处理角度的代码库，但有时输入有不同的角度格式。也就是说，有些格式是顺时针度数，有些是逆时针度数，有些是0到360，有些是-180到180，有些是弧度......

到目前为止，我已经成功地让它们在内部保持不变，但这总是令人担忧，而且出现的错误很难追踪。

我想创建一个角度类来跟踪单位和方向以及幅度，以便我可以以统一的方式处理它们而不必担心。

我的谷歌搜索出现了 Martin Fowler 的[Value Object](http://martinfowler.com/bliki/ValueObject.html)，但如果没有一个简单的示例可供参考，我无法理解他的语言。我还发现了一个似乎相关的[Java API](http://www.unitsofmeasurement.org/)，但它看起来也不是一个*简单*的例子......

谁能指出一个包含单元的类的简单示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T00:38:43.003

我会通过在内部以单一格式（例如，正弧度）存储值来解决这个问题，并提供静态工厂方法来从各种输入格式构造角度。例如：

```
public class Angle {
  private final double radians;

  private Angle(double radians) {
    this.radians = radians;
  }

  // Static factory methods

  public static Angle radians(double rad) {
    return new Angle(rad);
  }

  public static Angle degrees(double deg) {
    return radians(Math.toRadians(deg));
  }

  public static Angle degreesCCW(double deg) {
    return degrees(360 - deg);
  }

  ...

  // Operations

  public Angle plus(Angle other) {
    return new Angle((this.radians + other.radians) % (2 * Math.PI));
  }

  ...
} 
```

然后你可以像这样使用它：

```
Angle a1 = Angle.radians(0.5);
Angle a2 = Angle.degreesCCW(60);
Angle a3 = a1.plus(a2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T00:21:50.430

[scala 的 Duration](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.concurrent.util.Duration)是一个很好的例子，因为它接受各种单位（秒、毫秒等）的数字。不确定如何将其翻译成另一种语言，但有机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T00:25:46.087

你需要这样的东西：

```
class Measurement
{
    double amount;
    Unit   unit;
} 
```

金额将是“数字”，单位会告诉您如何解释该数字......您可能还需要在数字中实现一些逻辑，或者“表格转换”以便能够在不同单位之间进行转换......

顺便说一句：这是一个很棒的库，在 Smalltalk: [Aconcagua](http://sourceforge.net/projects/aconcagua/)中实现了它。它也有一张[纸](http://stephane.ducasse.free.fr/Teaching/CoursAnnecy/0506-M1-COO/aconcagua-p292-wilkinson.pdf)。这是 C++ 中另一个非常好的：[Boost units](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_units.html)。

# iphone - 如何从 Windows 上提取的 ipa 包中“解压”PNG？[png粉碎]

> ID：11750738
> 
> 赞同：2
> 
> 时间：2012-07-31T23:56:18.193
> 
> 标签：iphone, ios, ipad, ipa, pngcrush

一段时间以来，我一直试图解开从 ipa 中提取的 PNG，但似乎无法正常工作。

我没有任何 Apple 设备（除了 iPod Touch，朋友送的礼物），但我想要/需要一个仅为 iPad 发布的应用程序，我已经提取了 ipa 的内容，但我不能找到一种解压PNG的方法。

有什么办法可以在 Windows 上做到这一点？

我实际上可以使用 Mac 应用程序，因为我有一个正在运行的 Hackintosh，但是，它运行的是旧版本的 OS X（至少早于 10.6，但我无法检查它是否会崩溃）。

压碎的 PNG 示例：[http ://www.mediafire.com/?pe43no79aj8agsy](http://www.mediafire.com/?pe43no79aj8agsy)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:08:32.853

有关格式的详细信息和“取消粉碎”修改后的 PNG 的命令行在这里：

[iPhone 开发者维基](http://iphonedevwiki.net/index.php/CgBI_file_format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T14:52:43.350

由于我写了该问题评论中引用的博客文章，因此我将在此处发布答案（对于 Mac）：

它是（2012 年）

% mkdir 未粉碎 % /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/pngcrush -dir 未粉碎 -revert-iphone-optimizations -q *.png

由于开发人员文件已被移动，因此 pngcrush 现在位于：

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/pngcrush

# objective-c - cocos2d sigleton 数组没有添加对象

> ID：11750741
> 
> 赞同：0
> 
> 时间：2012-07-31T23:56:58.567
> 
> 标签：objective-c, arrays, cocos2d-iphone, ccsprite

对不起，我的英语不好

我在互联网上搜索，我看到了如何但由于某种原因没有添加对象；我想要做的是将我的电源精灵加载到一个图层上并将它们添加到一个数组中，并根据数组我将选择要显示哪些以及何时在不同的图层上显示。

我确信这是一个愚蠢的细节，但我不明白是什么。如果我创建一个本地数组并使用而不是单例正在工作。

我做了一个游戏经理课

```
//header

@interface GameManager : NSObject {
}

@property (nonatomic,retain) NSMutableArray *powerUpsArray;

+(GameManager*)sharedGameManager;
@end 
```

执行

```
@implementation GameManager

static GameManager* _sharedGameManager = nil;

@synthesize powerUpsArray=_powerUpsArray;

+(GameManager*)sharedGameManager {
@synchronized([GameManager class]) 
{
    if(!_sharedGameManager) 
        [[self alloc] init];
    return _sharedGameManager;
}
return nil;
}

-(id)init {
self = [super init];
if (self != nil) {
    self.powerUpsArray=[[NSMutableArray alloc]init];
}
return self;
}
@end 
```

我确实导入了标题并在我在init方法上执行的层上

```
[[GameManager sharedGameManager].powerUpsArray addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"bomb.png"]]]; 
```

我已经创建了batchnode，我从框架中做了framcache，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:00:47.150

尝试...

```
if(!_sharedGameManager) 
    _sharedGameManager = [[self alloc] init]; 
```

实际上，您正在创建对象，但没有用它们更新静态变量。

# javascript - Jquery/PunBB 用字符串替换数字

> ID：11750742
> 
> 赞同：0
> 
> 时间：2012-07-31T23:57:18.710
> 
> 标签：javascript, jquery, string, replace, punbb

在 Forumotion 上使用 PunBB 的想法是使用 Points 系统将显示的点数替换为一串文本。使用 span 类，我首先在代码周围定义了一个类“honorpoints”，显示用户拥有的点数。

```
<span class="honorpoints"><!-- BEGIN profile_field -->{postrow.displayed.profile_field.CONTENT}<!-- END profile_field --></span> 
```

在论坛上使用该代码时，它将根据用户的积分在用户名旁边显示一个数字。以下 jQuery 代码是我试图用来替换数字的代码。

```
$(".honorpoints").each(function(){
    var elm = $(this);
    var number = parseFloat(elm.text(), 10);
    if (number >= 1 && number <= 500) {
        state = "rank 1";
    } else if (number >= 500 && number < 3000) {
        state = "rank 2";
    }
    elm.text(state);
}); 
```

但是，这没有任何作用，并且数字仍然存在。它应该将 UserA : 234 和 UserB : 571 替换为 UserA : rank 1 和 UserB : rank 2 。但是，当在 jsFiddle 上使用并且仅使用数字而不是 {postrow.displayed.profile_field.CONTENT} 代码时，该代码确实有效. 帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:40:30.840

查看您在评论中提供的页面的来源，我相信您的`$('.honorpoints').each`方法在文档完全加载之前被调用（99546.js）。除非我遗漏了什么，否则您需要将该方法包装在一个`$(document).ready`函数中，以便仅在 DOM 准备好后才执行它：

```
$(document).ready(function() {
    $(".honorpoints").each(function(){
        var elm = $(this);
        var number = parseFloat(elm.text(), 10);
        var state = "";
        if (number >= 1 && number <= 500) {
            state = "rank 1";
        } else if (number >= 500 && number < 3000) {
            state = "rank 2";
        }
        elm.text(state);
    });
}); 
```

我还为变量添加了一个声明，`state`因为这是一个很好的做法（因为它目前在您的问题中，该`state`变量实际上是`window.state`因为它之前没有声明过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:15:46.750

以下行尝试解析`"UserA : 234"`，这就是您收到错误的原因。`parseFloat(elm.text(), 10);`

你必须修复你`if`的 s，两者都匹配`500`

您可以使用以下代码修复它：

```
$(".honorpoints").each(function(){
    $(this).text(function(i, text) {
        return text.replace(/\d+$/, function(match) {
            if(match >= 1 && match <= 500) return "rank 1";
            else if(match > 500 && match < 3000) return "rank 2";
        });
    });
}); 
```

解释：

`$`: 匹配字符串结尾；
`\d`: 只匹配数字；
`+`: 匹配匹配一次或多次，所以可以匹配`0`and `5000000`;

[演示](http://jsfiddle.net/fFR6d/1/)

*参考资料*：

*   `Regexp`：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)
*   `replace`：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)
*   `.text()`：[http ://api.jquery.com/text/](http://api.jquery.com/text/)

# ruby-on-rails - 这种客户端-服务器设计有意义吗？实用吗？

> ID：11750743
> 
> 赞同：0
> 
> 时间：2012-07-31T23:57:30.063
> 
> 标签：ruby-on-rails, ios, design-patterns, client-server

我一直在开发的应用程序的基本思想是允许用户组在闪存卡的“堆栈”上进行协作。最终，该应用程序将作为客户端-服务器系统运行（以 iOS 应用程序作为客户端，Rails 应用程序作为服务器）

**在我看来，这种设计的要求是这样的：**

1.  它需要平滑地处理编辑的合并。因为许多用户将编辑每个堆栈，并且因为每个客户端可能无法在完成后立即上传他们的更改，所以设计需要能够优雅地协调对共享数据的不一致更改。
2.  它需要高效。因为许多用户将通过他们的蜂窝连接访问应用程序，我需要最大限度地减少从服务器上传和下载的数据量，以确保应用程序在这些连接上快速运行，并减少已经有限的客户端的数据使用。

最初我只是走简单的路线，让客户端在每次同步时向服务器发送“批量”报告，这意味着将上传每个堆栈的整个本地副本，然后服务器将处理所有这些，将其与以前客户的编辑合并到自己的主副本中，然后将整个新数据集发送给客户，客户将保存此准确副本以供离线查看和编辑。

记住我的设计要求，我看到的问题主要是它非常低效。客户端应用程序不仅要浪费时间上传和下载所有这些数据，它还必须将所有新信息写入其本地数据存储，即使其中大部分与之前的副本相同。我也无法理解服务器如何以有效、合乎逻辑的方式理解冲突编辑。

**所以这就是我想出的：**

每当客户端对共享堆栈进行更改时，除了更改自己的数据库副本外，它还会在日志中记录更改，包括更改的内容、更改的方式、时间和由谁更改。下次客户端与服务器同步时，无论是在一秒钟内还是几天内，此操作“收据”都会发送到服务器，而不是整个本地数据副本。

在那里，服务器首先存储这些操作以供后代使用，然后再对服务器数据副本执行所有更改。然后，它使用这个收据数据库来获取自上次客户端与数据库同步以来对堆栈的所有相关更改。然后只有这些被发送回客户端，客户端在自己的本地副本上运行更改。

使用客户端所做的所有更改的日志，服务器可以决定哪些更改使哪些其他更改无效（例如，如果用户删除了一张卡片，然后在与此更改同步之前，另一个用户编辑了正常的卡片，那么删除将无效）。虽然实现起来很复杂，但理论上这将是我合并问题的理想解决方案。

**所以你怎么看？**

这是一个可行的解决方案吗？你看到我的总体规划中有什么明显的漏洞吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:46:01.187

需要注意的一件事是不信任来自设备的时间作为算法的一部分：

[我可以依靠 iOS 设备时钟正确吗？](https://stackoverflow.com/questions/8198833/can-i-rely-on-the-ios-device-clock-being-correct)

我在该线程上的回答谈到了这一点以及合并/交错操作。

您可能需要考虑两个用户是否在同一张卡上编辑相同的冲突数据。由于您无法信任时间，因此客户端确实知道上次同步时的最后一个“服务器时间标记”，因此您可以将所有更改记入上次同步服务器标记时的所有更改。这样做是奖励同步更频繁的客户端，因为它通过您唯一可以确定的事情（服务器的时间）交错更改。

希望有帮助。绝对是一个复杂的话题，要正确（和一般地）做。

# .net - .NET 扩展不能通过反射访问吗？

> ID：11750746
> 
> 赞同：0
> 
> 时间：2012-07-31T23:58:04.573
> 
> 标签：.net, xna, lua, extension-methods

我创建了一个 XNA 应用程序，它利用 LuaInterface（通过 Lua）来控制应用程序本身的许多方面。

`KeyboardState`我向 XNA 类（特别是对象）添加了扩展。问题是，如果我用 Lua 调用扩展函数，我会得到一个错误： ***尝试调用字段 'KeyDown' (a userdata value*** .

这是我的 Lua 脚本：

```
Game.Updated:Add(function(t)
    if Players.LocalPlayer.Controller.KeyboardState:KeyDown(KeyboardKey.W) then
        print("W key down")
    end
end) 
```

这是我扩展类的模块：

```
Imports System.Runtime.CompilerServices
Module XNAExtensions
    <Extension()> _
    Public Function KeyDown(ByVal this As Microsoft.Xna.Framework.Input.KeyboardState, ByVal e As Integer) As Boolean
        Return this.IsKeyDown(e)
    End Function
End Module 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:05:59.343

扩展方法是*编译器*的功能，而不是框架。为了从 Lua 调用它，你需要直接调用你的 XNAExtensions 模块作为静态方法。Lua 不理解扩展方法。

```
XNAExtensions:KeyDown(Players.LocalPlayer.Controller.KeyboardState, KeyboardKey.W) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T00:05:37.953

扩展方法不是类的实际扩展，就像子类化一样。这是 C# 和 VB 编译器在解析源文件时可以理解的东西，但编译后的字节码看起来仍然来自`XNAExtensions.KeyDown(keyboardState, e)`

要从您的 Lua 脚本中调用它，您必须从静态类访问该方法，而不是作为扩展方法。

# vb.net - “弹出菜单无效”错误

> ID：11750747
> 
> 赞同：0
> 
> 时间：2012-07-31T23:58:07.160
> 
> 标签：vb.net

在互联网上查看了几篇文章后，我无法弄清楚为什么会引发以下错误......

我的主页上有一个 WIP（正在进行的工作）网格，我有一个使用 Infragistics 的导出按钮，当我试图点击导出按钮并返回网格并点击网格上的任何内容时，会引发以下错误：

网页提示“弹出菜单无效”，代码如下：

```
//Call new page for export
string popupScriptAck = "<script language='javascript'>" +
   "window.open('ActionGridExporter.aspx?Location=" + this.Location +
   "', 'CustomPopUp', " +
   "'toolbar=yes, location=no, directories=no, status=no," +
   " menubar=yes, scrollbars=yes, resizable=yes, copyhistory=no," +
   " width=1024, height=620')" +
   "</script>";
this.Page.ClientScript.RegisterStartupScript(
   Type.GetType("System.String"),
   "PopupScriptAcknowledgement",
   popupScriptAck
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:03:15.023

如果`this.Location`其中有一个单引号，一个反斜杠作为最后一个字符（很可能，这将转义结束引号），甚至是 ，`</script>`怎么办？您需要正确地 URLEncode*和*javascript 字符串转义任何成为文字 javascript 的字符串。

# sql - PostgreSQL 交叉表/数据透视问题

> ID：11750755
> 
> 赞同：2
> 
> 时间：2012-07-31T23:59:26.430
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1, crosstab

我有一张`prefs`桌子，下面是相关的列：

```
mydb=> SELECT pref_id, pref_name, pref_value FROM prefs;
 pref_id |  pref_name   |   pref_value
---------+--------------+----------------
       1 | PagerNumber  | 2125551234
       2 | PagerCarrier | @att.com
       3 | PagerCarrier | @something.com 
```

我想制作这样的东西：

```
 section |  pager_number  | pager_carrier
---------+----------------+---------------
       1 | 2125551234     |
       2 |                | @att.com
       3 |                | @something.com 
```

所以我使用了交叉表，按照stackoverflow上的这个例子：[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query)

```
SELECT row_name AS section,
       category_1::text AS pager_number,
       category_2::text AS pager_carrier
FROM crosstab('select pref_id::bigint, pref_name::text, pref_value::text
    FROM prefs')
AS ct (row_name bigint, category_1 text, category_2 text); 
```

所有值都进入`pager_number`，并`pager_carrier`留空：

```
 section |  pager_number  | pager_carrier
---------+----------------+---------------
       1 | 2125551234     |
       2 | @att.com       |
       3 | @something.com | 
```

谁能看到发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:30:16.943

测试用例（提供样本数据的首选方式）：

```
CREATE TEMP TABLE prefs (pref_id int, pref_name text, pref_value text);

INSERT INTO prefs VALUES 
 (1, 'PagerNumber' , '2125551234')
,(2, 'PagerCarrier', '@att.com')
,(3, 'PagerCarrier', '@something.com'); 
```

询问：

```
SELECT *
FROM   crosstab(
       'SELECT pref_id, pref_name, pref_value
        FROM   prefs
        ORDER  BY 1, 2',

       $$VALUES ('PagerNumber'::text), ('PagerCarrier')$$
       )
AS x (section text, pager_number bigint, pager_carrier text); 
```

准确返回您的问题中描述的结果。如果 a`PagerNumber`可以不是有效`bigint`数字，请`text`改用。

您在问题中提到的答案已经过时，并且从一开始就永远不正确。我[在那里添加了一个带有解释和链接的正确答案。](https://stackoverflow.com/a/11751905/939860)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:12:49.897

代替：

```
SELECT row_name AS section, category_1::text AS pager_number, category_2::text
AS pager_carrier
FROM crosstab('select pref_id::bigint, pref_name::text, pref_value::text
    FROM prefs')
AS ct (row_name bigint, category_1 text, category_2 text); 
```

尝试：

```
SELECT *
FROM crosstab('select pref_id::bigint, pref_name::text, pref_value::text
FROM prefs ORDER BY 1,2')
AS prefs (row_name bigint, carrier_1 text, carrier_2 text); 
```

如果你有：

```
 pref_id |  pref_name   |   pref_value
   ---------+--------------+----------------
   1 | PagerNumber  | 2125551234
   2 | PagerCarrier | @att.com
   3 | PagerCarrier | @something.com
   2 | PageNumber   | 2332323232
   3 | PagerCarrier | @somethingelse.com 
```

你会得到：

```
 row_name |  carrier_1   |   carrier_2
   -----+--------------+----------------
   1 | 2125551234      |
   2 | @att.com        | 2332323232
   3 | @something.com  | @somethingelse.com 
```

[Postgress 交叉表参考](http://www.postgresql.org/docs/9.1/static/tablefunc.html%20Reference)

# vb.net - vb.net数据库查询值和目的字段个数不一样

> ID：11750759
> 
> 赞同：0
> 
> 时间：2012-07-31T23:59:41.970
> 
> 标签：vb.net

我有一个包含 16 个字段的数据库，我只想填写前 7 个字段。我正在使用这个命令

```
"INSERT INTO products (SupplierID, catalogid, ccode,cname,oprice,cprice,pother2) VALUES (" & reader("SupplierID").ToString() & "," & reader("catalogid").ToString() & "," & reader("ccode").ToString() & "," & reader("cname").ToString() & "," & reader("oprice").ToString() & "," & reader("cprice").ToString() & "," & reader("pother2").ToString() & ")" 
```

那么有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:06:05.533

只要您未填充的列被指定为可为空或分配了默认值（假设 SQL 服务器），只填充表中可用字段的子集就没有错。

但是，您构建命令的方式存在一些问题：您没有在看起来是字符串值（即 ccname）的周围加上引号，也没有保护免受 SQL 注入攻击。

[使用参数化查询](http://msdn.microsoft.com/en-us/magazine/ee236412.aspx)要好得多。

大致而言，您的代码将类似于：

```
Dim oCommand As New SqlCommand()

oCommand.Connection = oConnection

oCommand.CommandText = "INSERT INTO products (SupplierID, catalogid, ccode,cname,oprice,cprice,pother2) VALUES ("?, ?, ?, ?, ?, ?, ?)"

oCommand.Parameters(0).Value = reader("SupplierID")
oCommand.Parameters(0).Value = reader("catalogid")

etc... 
```

# python - 如何使用 wxPython 中的 AddSubclassFactory？

> ID：11750761
> 
> 赞同：6
> 
> 时间：2012-07-31T23:59:57.380
> 
> 标签：python, wxpython, wxwidgets, wxruby

我在网上找不到**任何**关于如何使用这种方法的例子。我认为这可能是我会使用的东西。有人可以给我一个关于如何使用这种方法的例子吗？

[http://wxpython.org/docs/api/wx.xrc.XmlResource-class.html](http://wxpython.org/docs/api/wx.xrc.XmlResource-class.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:59:08.603

根据源代码，我相信这就是您的做法。

源代码： [http ://wxwidgets2.8.sourcearchive.com/documentation/2.8.7.1/classxrc_1_1XmlResource_4a0466d7ef7ac98ef7a9b8135a0c9339.html](http://wxwidgets2.8.sourcearchive.com/documentation/2.8.7.1/classxrc_1_1XmlResource_4a0466d7ef7ac98ef7a9b8135a0c9339.html)

```
def AddSubclassFactory(*args, **kwargs):
    """AddSubclassFactory(XmlSubclassFactory factory)"""
    return _xrc.XmlResource_AddSubclassFactory(*args, **kwargs) 
```

所以你可以看到它正在寻找一个 XmlSubclassFactory 类型的对象。从文档（http://wxpython.org/docs/api/wx.xrc.XmlSubclassFactory-class.html）我们发现......

```
XmlSubclassFactory  __init__(self) 
```

我们可以看到 XmlSubClassFactory 的构造函数没有参数。所以我们创建一个 XmlSubclassFactory 的对象并创建一个资源来添加 SubClassFactory。

```
import wx
from wx import xrc

scf = xrc.XmlSubClassFactory()
resource = xrc.XmlResource("resource.xrc")
resource.AddSubclassFactory(scf) 
```

不幸的是，我找不到 Python 示例。但是，我认为 Perl 模拟非常接近。来自[http://permalink.gmane.org/gmane.comp.lang.perl.wxperl/477](http://permalink.gmane.org/gmane.comp.lang.perl.wxperl/477)

```
Wx::XmlResource::AddSubclassFactory( MyFactory->new ); // perl 
```

这与我们正在做的事情非常相似。因此，在阅读源代码和该示例之间，我相信片段是一个很好的起点。祝你好运！

# ruby - 什么时候使用 dup，什么时候在 Ruby 中使用 clone？

> ID：11750763
> 
> 赞同：13
> 
> 时间：2012-08-01T00:00:17.767
> 
> 标签：ruby, clone, idioms, dup

[Ruby 的 dup 和 clone 方法有什么区别？](https://stackoverflow.com/questions/10183370/whats-the-differences-between-ruby-dup-and-clone-method)描述 和 的行为`dup`差异`clone`。但是我应该什么时候使用`dup`，什么时候应该使用`clone`呢？

来自实际项目的示例讨论了为什么他们使用 dup 而不是 clone，反之亦然，对于这个问题来说是理想的。

或者，解释为什么存在两种不同的方法会有所帮助。这可能是指来自 Ruby 的创建者的陈述，或者是对影响 Ruby 的语言`dup`等方法的检查。`clone`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-28T20:11:22.083

确实会`clone`复制`frozen`对象的状态，而`dup`不会：

```
o = Object.new
o.freeze

o.clone.frozen?
#=> true

o.dup.frozen?
#=> false 
```

`clone`还将复制对象的单例方法，而`dup`不会：

```
o = Object.new
def o.foo
  42
end

o.clone.respond_to?(:foo)
#=> true

o.dup.respond_to?(:foo)
#=> false 
```

这导致我假设`clone`有时被理解为提供比`dup`. 以下是有关该主题的一些引用：

[`ActiveRecord::Base#initialize_dup`来自 Rails 3 的评论](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/base.rb#L529-L533)：

> 复制的对象没有分配 id 并被视为新记录。请注意，这是一个“浅”副本，因为它仅复制对象的属性，而不是其关联。“深”副本的范围是特定于应用程序的，因此留给应用程序根据其需要来实现。

[一篇关于 Ruby 中的深拷贝的文章](http://ruby.about.com/od/advancedruby/a/deepcopy.htm)：

> 还有一种方法值得一提，`clone`. 该`clone`方法的作用`dup`与一个重要区别相同：预计对象将使用可以进行深度复制的方法覆盖此方法。

[但话又说回来，`deep_dup`在 Rails 4 中有](https://github.com/rails/rails/blob/4-1-2/activesupport/lib/active_support/core_ext/object/deep_dup.rb)：

> 如果它是可复制的，则返回对象的深层副本。如果它不可复制，则返回`self`.

[以及在 Rails 4`ActiveRecord::Core#dup`中`#clone`](https://github.com/rails/rails/blob/8b364715010c25ddb28500d5b4a612386c437eb3/activerecord/lib/active_record/core.rb#L297-L321)：

> `clone`— 与 Ruby 的克隆方法相同。这是一个“浅”的副本。请注意，您的属性不会被复制。[...]如果您需要属性哈希的副本，请使用该`#dup`方法。

这意味着在这里，该词`dup`再次用于指代深层克隆。据我所知，社区似乎没有达成共识，除了你应该使用`clone`和`dup`在你需要任何一个特定副作用的情况下。

最后，我在 Ruby 代码中看到`dup`的比`clone`. `clone`到目前为止我从未使用过，直到我明确需要时才会使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T04:17:46.967

> DUP 和 CLONE 都可用于创建对象的浅表副本。两者都复制了 obj 的实例变量。但是我们需要有选择性地使用它们。
> 
> 这些之间几乎没有区别
> 
> 1) CLONE 复制对象的 FROZEN 和 TAINTED 状态，而 DUP 仅复制对象的 TAINTED 状态。
> 
> 2) 使用 CLONE，您可以复制对象的任何单例方法，但 DUP 不支持这一点。
> 
> CLONE 用于复制对象，包括其内部状态，DUP 通常使用后代对象的类来创建新实例。
> 
> 我在使用 DUP 复制 ActiveRecord 行时遇到了一些痛苦的经历，这最终导致丢失了与 CLONE 相同的原始行。

*当我把自己包裹起来时，我发现在一篇[文章中很清楚 Open Source is Wide Open](http://railsblogger.blogspot.com.br/2009/03/ruby-dup-vs-clone.html)*

# python - LPTHW：Ex48 单元测试（使用鼻子测试）、类、方法参数 TypeErrors

> ID：11750765
> 
> 赞同：1
> 
> 时间：2012-08-01T00:00:26.320
> 
> 标签：python

我是通过 LPTHW 工作的新手[这是它的链接](http://learnpythonthehardway.org/book/ex48.html)。在 ex48，我得到了很多代码作为单元测试，我应该编写相应的 my_code 来进行测试（使用nosetests，对不起，这句话中有很多测试。）

这是我的代码：

```
class lexicon(object):

    def __init__(self):
    #some initial stuff.

    def scan(self,stuff):
    #some cool code. 
```

这是 test.py 文件

```
from nose.tools import*
from Ex48.code import lexicon

def test_directions():    

    assert_equal(lexicon.scan("north"), [('direction', 'north')])
    ...#Unimportant details the above is enough. 
```

但是，当我运行鼻子测试时，我收到以下错误：

```
Traceback (most recent call last):
    File "c:\python31\lib\site-packages\nose'case.py", line 197, i runTest
    ... line x, in test_directions
    assert_equal(lexicon.scan("north"), [('direction', 'north')])
TypeError: scan() takes exactly 2 positional arguments (1 given) 
```

这很奇怪，因为这两个论点之一是自我论点，我认为不应该给出它。

为了解决这个问题，我尝试过：

```
@staticmethod
def scan(self,stuff): 
```

但这给了我相同的 typeError

接下来我尝试了：

```
assert_equal(lexicon.__init__(self).scan(...) 
```

但这也不起作用（我认为****.init**** (self) 应该在另一个类中使用，而不是只在词典中使用，而不是在 main 中）。

我最终决定：

```
lexicon1=lexicon()
def test_directions():    
    assert_equal(lexicon1.scan("north"), [('direction', 'north')]) 
```

但这不是练习应该如何进行的！

PS：我没有包括整个追溯，因为它可能没有必要（而且已经很晚了）。我没有包含我的部分代码，因为我确信它可以正常工作并且不会导致错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T02:22:53.283

我认为你这样做的方式（创建一个实例，然后使用它的方法——你的例子是 lexicon1）很好，对吧？

如果您想以第一种方式进行操作，您是否尝试过：

```
@classmethod
def scan(self, stuff): 
```

我也是新手（刚刚完成练习49），所以也许其他人可以回答得更好。不过，很好奇 @classmethod 装饰器是否符合您的要求。

# matlab - 计算矩阵中的平均值

> ID：11750767
> 
> 赞同：0
> 
> 时间：2012-08-01T00:00:33.500
> 
> 标签：matlab, matrix, average

我在 Matlab 中有一个模拟，它产生一个大小为 <103x11x6 double> 的 3D 矩阵（日期、起点、试验）。这是一个模拟，它返回 11 个不同起始值的 103 个时间步长的模拟利率。这重复6次。我希望简单地创建一个新矩阵来返回所有这些试验的平均值。即每个起点的单个时间序列，其中时间序列是每个时间点所有试验的平均利率。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:27:51.040

> 3D 矩阵（日期、起点、试验）

如果矩阵是 M，那么

```
A = mean(mean(M,3),2); 
```

然后`A`有一个维度`date`，每个值`A`是该日期 11x6 矩阵的平均值。 `mean(M,3)`是一个二维矩阵，然后你可以取其平均值。

有趣的是，

```
A = mean(M(:,:),2); 
```

会给你同样的结果。M(:,:) 将 M 折叠到 2 个维度，保留第一个维度，所有后续维度（在您的情况下只有第 2 个和第 3 个）折叠到一个维度。

# oracle - 如何在使用 DBMS_SCHEDULER.CREATE_JOB 创建的作业中运行复杂的 PL/SQL 代码

> ID：11750768
> 
> 赞同：1
> 
> 时间：2012-08-01T00:00:34.400
> 
> 标签：oracle, plsql, oracle11g, oracle-apex, database

我正在尝试在 Job 中运行 PL/SQL 代码，但即使它运行（如 user_scheduler_jobs 所示），它也不会进行查询。请注意，如果查询是独立运行的，则该查询有效。

```
Begin
DBMS_SCHEDULER.CREATE_JOB (
    job_name => 'INSERT_LOG',
    job_type => 'PLSQL_BLOCK',
    job_action => 'Begin
        INSERT INTO PORT_ACCIONES (ACCI_USUARIO, ACCI_NOMBRE_APLICACION, ACCI_ID_PAGINA, ACCI_NOMBRE_PAGINA, ACCI_FECHA, ACCI_HORA)
        SELECT APEX_USER, APPLICATION_NAME, PAGE_ID, PAGE_NAME, TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''DD-MM-YYYY''), TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''HH24:MI:SS'')
        FROM apex_workspace_activity_log
        WHERE APEX_USER, APPLICATION_NAME, PAGE_ID, PAGE_NAME, TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''DD-MM-YYYY''), TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''HH24:MI:SS'')
            NOT IN (SELECT ACCI_USUARIO, ACCI_NOMBRE_APLICACION, ACCI_ID_PAGINA, ACCI_NOMBRE_PAGINA, ACCI_FECHA, ACCI_HORA FROM PORT_ACCIONES)
        End;',
    repeat_interval => 'FREQ=MINUTELY;INTERVAL=1',
    start_date => SYSTIMESTAMP,
    enabled => TRUE,
    comments => 'Llenado de la tabla de logs de manera automatizada');
End; 
```

这是为了填补

```
CREATE TABLE  "PORT_ACCIONES" (
    "ACCI_USUARIO" VARCHAR2(255),
    "ACCI_NOMBRE_APLICACION" VARCHAR2(255) NOT NULL ENABLE,
    "ACCI_ID_PAGINA" NUMBER,
    "ACCI_NOMBRE_PAGINA" VARCHAR2(255),
    "ACCI_FECHA" VARCHAR2(255),
    "ACCI_HORA" VARCHAR2(255)
    ); 
```

使用 ApEx 提供的日志，确保它不会重复条目并从当前正在使用的应用程序中获取它们。

如果没有，我也可以尝试在 APEX_WORKSPACE_ACTIVITY_LOG 上进行新插入时将注册表添加到 PORT_ACCIONES 表的触发器作为解决方案，但是当我尝试

```
Create or Replace TRIGGER "PORT_LOGS_BI"
    before insert on apex_workspace_activity_log 
```

，它给了我信息

```
ORA-25001: cannot create this trigger type on this type of view. Any suggestions would be of great help. 
```

提前非常感谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:09:55.840

**:APP_ALIAS 是一个 oracle 顶点变量，它为在顶点会话期间**运行代码的应用程序提供指定的别名。但是，计划的作业**不会**在会话中，因此在运行查询时此变量将为空。

但是请注意，`:APP_ALIAS` **这不**等于应用程序名称！如果您没有更改应用程序属性中的别名，它们的别名将与名称不匹配。

从顶点（页面或应用程序）进程启动作业的更好方法是使用`APP_ID`, 并`application_id`在查询中使用。不能这样出错。

如果您想手动启动作业，那么您需要自己提供正确的值，因为您无权访问 apex 会话之外的 apex 替换字符串。

您应该更改为作业提供的 sql。假设您在 apex 会话中运行作业创建，请将 id 连接到：

```
job_action => 'Begin
               INSERT INTO PORT_ACCIONES (ACCI_USUARIO, ACCI_NOMBRE_APLICACION, ACCI_ID_PAGINA, ACCI_NOMBRE_PAGINA, ACCI_FECHA, ACCI_HORA)
               SELECT APEX_USER, APPLICATION_NAME, PAGE_ID, PAGE_NAME, TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), 'DD-MM-YYYY'), TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''HH24:MI:SS'')
               FROM apex_workspace_activity_log
               WHERE application_id='||:APP_ID ||'
               AND (APEX_USER, APPLICATION_NAME, PAGE_ID, PAGE_NAME, TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''DD-MM-YYYY''), TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''HH24:MI:SS''))
               NOT IN (SELECT ACCI_USUARIO, ACCI_NOMBRE_APLICACION, ACCI_ID_PAGINA, ACCI_NOMBRE_PAGINA, ACCI_FECHA, ACCI_HORA FROM PORT_ACCIONES)
               End;' 
```

或者，如果您想按名称引用：

```
WHERE application_name='''|| variable_holding_application_name ||''' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T00:17:35.027

你是如何处理`:APP_ALIAS`绑定变量的？可能是在提交作业之前未初始化。

另外，我可以看到第一个不`single quote`匹配`TO_CHAR()`

```
TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), 'DD-MM-YYYY') 
```

这应该如下所示，因为整个 PLSQL 块是字符串 text ( `VARCHAR`)

```
TO_CHAR(SYSTIMESTAMP - SECONDS_AGO / (60*60*24), ''DD-MM-YYYY'') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:10:39.133

:APP_ALIAS 看起来像一个绑定变量。替代从何而来？也许它是在它工作的环境中定义的。

另外，作业调度程序日志中是否有任何内容？您是否在调度程序中以与客户端相同的用户身份运行？

# php - 在 PHP 设置文件中动态写入定义

> ID：11750770
> 
> 赞同：0
> 
> 时间：2012-08-01T00:00:53.693
> 
> 标签：php, token

我有一个 PHP 配置文件，它存储如下设置：

```
 define("SETTING_1", "");
  define("SETTING_2", "");
  define("SETTING_3", ""); 
```

默认情况下，设置是空的，但是我有一个安装程序文件`install.php`，它基本上会提示用户进行设置。打开设置文件，找到每个设置的定义并插入值的最佳方法是什么？最后，需要将设置文件保存到磁盘。

我想避免使用正则表达式或简单的字符串搜索。我遇到了`token_get_all()`，使用它有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:07:45.253

`token_get_all()`并不能真正帮助您，因为它只会为您提供字符串中的所有解析标记。`token_get_all()`与您列出的其他方法相比，您将花费更多时间为结果编写状态机或解析器。

实现这一点的最简单方法是使用某种已知的独特占位符，如下所示：

```
define("SETTING_1", "{{SETTING_1}}");
define("SETTING_2", "{{SETTING_2}}");
define("SETTING_3", "{{SETTING_3}}"); 
```

然后，您打开文件，并使用它们的实际值替换所有这些占位符[`str_replace()`](http://php.net/str_replace)：

```
$file = file_get_contents( "config.php");
$config = str_replace( 
    array( '{{SETTING_1}}', '{{SETTING_2}}', '{{SETTING_3}}'),
    array( $setting1, $setting2, $setting3),
    $file
);
file_put_contents( 'config.php', $config); 
```

这就是它所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:04:02.407

define() 方式是确定的吗？

如果你真的需要 PHP 格式，使用 var_export() 和 include，另一方面这是完全不安全的......或者使用 INI 文件，即[创建 ini 文件，在 PHP 中写入值](https://stackoverflow.com/questions/1268378/create-ini-file-write-values-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:17:26.823

不要将常量用于用户设置。这是个坏主意。创建一个数组并使用 var_export 和第二个参数“true”存储在一个文件中。它是可读的，可以使用数组函数重新生成。

# objective-c - 将 NSString 与 AVAudioPlayer 一起使用

> ID：11750780
> 
> 赞同：0
> 
> 时间：2012-08-01T00:02:37.207
> 
> 标签：objective-c, ios, xcode

我在使用 AVAudioPlayer 时遇到问题，无法从其他视图获取声音。它与 AudioToolbox 完美配合，但不适用于 AVAudioPlayer。这是我的代码：

.h 文件：

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreText/CoreText.h>
#import "SimpleTableCelldetail.h"

int clicked;

@interface DetailViewController : UIViewController {

AVAudioPlayer *audioPlayer;
IBOutlet UIButton *start;

}

@property (strong, nonatomic) IBOutlet NSString *audioSon;

@end 
```

.m 文件

```
-(IBAction)play:(id)sender {

if(clicked == 0) {
    clicked = 1;
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:audioSon, [[NSBundle mainBundle] resourcePath]]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = 0;

    [audioPlayer play];
    [start setTitle:@"Stop" forState:UIControlStateNormal];
}
else {
    clicked = 0;
    [audioPlayer stop];
    [start setTitle:@"Ecouter" forState:UIControlStateNormal];
}
} 
```

当我运行此代码时，按钮不播放任何声音。audioSon 的值为“sound01.m4r”。

当我更换线路时

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:audioSon, [[NSBundle mainBundle] resourcePath]]]; 
```

和

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/sound01.m4r", [[NSBundle mainBundle] resourcePath]]]; 
```

它有效，但 xcode 向我显示错误：

```
2012-08-01 01:59:44.697 CustomTable[12709:3703] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:35:43.943

当您`stringWithFormat`应该使用`stringByAppendingPathComponent`. 如果您更改此设置，您将访问正确的文件并且您的程序应该可以工作。

```
NSURL *url = [NSURL fileURLWithPath:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:audioSon]; 
```

# jquery - jQuery UI Layout 调整窗格大小不会刷新其余部分

> ID：11750787
> 
> 赞同：0
> 
> 时间：2012-08-01T00:03:16.870
> 
> 标签：jquery, layout, jquery-plugins

我在东窗格上创建了​​一个 jqPlot。我更改了窗格的大小，以便为图表留出足够的空间。但是，似乎布局的某些部分根本没有刷新。如何通知布局的其余部分并使其刷新？提前致谢。

![在此处输入图像描述](../Images/228b163f03d5d09e7a3c5998789d9c7d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:34:56.087

只需使用 sizePane 让您的布局知道您刚刚调整了它的大小。

```
var your_layout = jQuery("#your_container").layout({...});
...
jQuery("#RightPane").width('400px');
your_layout.sizePane("east", 400); 
```

这是来自[https://groups.google.com/forum/?fromgroups#!topic/jquery-ui-layout/u6BsKaArFNY的原始答案](https://groups.google.com/forum/?fromgroups#!topic/jquery-ui-layout/u6BsKaArFNY)

# image - 如何在css3中旋转图像

> ID：11750790
> 
> 赞同：0
> 
> 时间：2012-08-01T00:03:20.980
> 
> 标签：image, css, rotation, image-rotation

我想做一个图像的旋转，所以我红色我们可以做那个宽度

```
.rotate {

-webkit-transform: rotate(-9deg);

-moz-transform: rotate(-9deg);

transform: rotate(-9deg);} 
```

但是，如果你想根据 z 轴旋转它（水平是 x，垂直 y，如果你明白我的意思，z 就会出现）

好的，我想在 x 或 y 轴上旋转它，给它一个 3d 效果。这在 css3 中可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:49:37.773

使用 CSS 透视图后，您可以做自己想做的事。这是一个例子：http: [//jsfiddle.net/joshnh/QHxzA/](http://jsfiddle.net/joshnh/QHxzA/)

重要的代码是（不要忘记使用浏览器前缀）：

```
img {
    transform: perspective(500px) rotateX(15deg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T00:06:24.010

CSS3 有[3D 变换](http://www.w3schools.com/css3/css3_3dtransforms.asp)。这可能就是你想要的。它在 Firefox、Chrome 和 IE10 上受支持，但不支持较旧的 IE 或 Opera。

更深入的一些：

[http://caniuse.com/transforms3d](http://caniuse.com/transforms3d)

[http://www.html5rocks.com/en/tutorials/3d/css/](http://www.html5rocks.com/en/tutorials/3d/css/)

[http://www.webkit.org/blog/386/3d-transforms/](http://www.webkit.org/blog/386/3d-transforms/)

Z轴也指深度轴（进入/离开屏幕）。围绕 Z 轴旋转只会导致正常的 2D 旋转（就像您将针插入卡片一样）。您正在寻找 X/Y 轴。

# javascript - Squarespace平台上的砌体安装

> ID：11750798
> 
> 赞同：2
> 
> 时间：2012-08-01T00:04:18.720
> 
> 标签：javascript, jquery-masonry, squarespace

我一直在尝试在我的 Squarespace 网站上安装 masonry.js 脚本，以使他们的图片库看起来更好。

我已经安装了脚本，并尽我所能按照砌体网站上的说明进行操作。但是，它显然没有正确显示。

然而在画廊页面上它只是没有它。html的区别是；在我使用 div 的 html 页面中，在画廊页面上，我试图将其应用于 ul 作为容器，然后应用于 li 元素，这是导致问题的原因吗？砌体“必须”仅是 div 吗？

我唯一能想到的另一件事是画廊页面上是否有其他脚本正在干扰砌体。

我希望这个问题的框架是正确的，我希望那里的人能指出我错过的（希望）愚蠢的简单的事情，因为我已经为此投入了好几个小时并且无法打破它。

* * *

更新我现在已经开始工作了，你可以在这里看到一个例子；[http://www.bpicni.com/member-galleries-advanced/donal-mccann-frps/](http://www.bpicni.com/member-galleries-advanced/donal-mccann-frps/)

可能有点hacky，但是，嘿，我会接受的。

基本我使用一些代码将 li 元素包装在 div 中，然后砌体开始打球。然后我遇到了重叠问题，并发现解决该问题的唯一方法是使用 $(window).load(function(){ }) 方法调用砌体函数。

我现在唯一的问题是 Squarespace 特定的问题，当我处于内容或结构模式时，砌体脚本会干扰画廊页面上的功能。我发现的一个快速修复方法是使用 adblock 扩展来停止砌体脚本的运行。这意味着我看不到脚本的全部好处，但允许我维护站点，所以很方便 :)

# c# - ServiceStack 中是否需要 ResponseStatus？

> ID：11750799
> 
> 赞同：12
> 
> 时间：2012-08-01T00:04:19.320
> 
> 标签：c#, error-handling, servicestack

是否需要响应状态？

wiki 说我们需要在响应 DTO 中有一个 ResponseStatus 属性来处理异常序列化：

[https://github.com/ServiceStack/ServiceStack/wiki/Validation](https://github.com/ServiceStack/ServiceStack/wiki/Validation)

但是，即使响应 DTO 中没有 ResponseStatus 属性，它看起来也会自动生成 ResponseStatus 。

我们需要 ResponseStatus 属性吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T00:04:19.320

[错误处理文档](http://docs.servicestack.net/error-handling)解释了如何控制哪些服务返回填充的DTO `ResponseStatus`，即：

### 错误响应类型

抛出异常时返回的错误响应取决于是否存在常规命名的`{RequestDto}Response`DTO。

如果存在：

`{RequestDto}Response`无论服务方法的响应类型如何，都会返回。如果`{RequestDto}Response`DTO 具有**ResponseStatus**属性，则会填充它，否则不会返回任何**ResponseStatus**。（如果您已经使用属性修饰了`{ResponseDto}Response`类和`[DataContract]/[DataMember]`属性，则还需要修饰**ResponseStatus以填充）。**

否则，如果没有：

`ErrorResponse`使用填充的**ResponseStatus**属性返回泛型。

[服务客户端](http://docs.servicestack.net//clients-overview)透明地处理不同的错误响应类型，对于像 JSON/JSV/等这样的无模式格式，在自定义或通用返回**ResponseStatus**之间没有实际可见的区别`ErrorResponse`——因为它们都在线路上输出相同的响应。

## 自定义例外

最终，所有 ServiceStack WebServiceExceptions 都只是带有填充的[ResponseStatus](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ResponseStatus.cs)的 Response DTO ，它返回一个 HTTP 错误状态。有许多不同的方法可以自定义异常的返回方式，包括：

### 启用堆栈跟踪

默认情况下，在响应 DTO 中显示 StackTraces 仅在调试版本中启用，尽管此行为可以通过以下方式覆盖：

`csharp SetConfig(new HostConfig { DebugMode = true });`

# iphone - 如何跨视图控制器链接插座？

> ID：11750803
> 
> 赞同：3
> 
> 时间：2012-08-01T00:04:38.353
> 
> 标签：iphone, objective-c, ios, xcode

我正在创建一个应用程序，目前有 6 个视图控制器，现在在视图控制器 6 中我有一个文本字段，当他们编辑它时，它需要在视图控制器 3 中编辑一个标签，我如何链接在 viewcontroller6.h 中声明的插座在情节提要中到视图控制器 3 中的内容？我知道它很复杂，但任何帮助都会非常棒！：） 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:58:23.577

首先，在您的 viewcontroller6 中，您需要 #import "viewcontroller3.h"。然后在viewcontroller6.m中，可以创建viewcontroller3的实例。然后，您可以访问 viewcontroller3 的所有数据。您可以从 viewcontroller6.m 设置 viewcontroller3 实例中的数据并推送到 viewcontroller3 的视图，您的数据应该在那里。

虽然如果它是一个标签，你可能需要在你的 viewcontroller3.h 中创建一个 NSString* stringText 的属性，并在你的 viewcontroller3.m 文件中合成它，然后在 view controller6 中，将该字符串设置为 viewcontroller6 中声明的出口值。在你将它推送到视图控制器 3 之后。在视图控制器 3 的 viewdidload() 中执行 label.text = stringText 之类的操作；

所以现在，您在 viewcontroller3 中的标签应该更新为 stringText.. 中的任何内容，它是从 viewcontroller6 设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:25:54.447

您不能在情节提要中将出口从 vc6 链接到 vc3。将数据从 vc6 传递到 vc3 有多种方法：

1.  使用委托模式（如 Dustin 所述）将文本字段数据从 vc6 传递到 vc3。但是，如果您的视图控制器按顺序从 vc3 到 vc4 到 vc5 到 vc6 链接，则使用这种方法可能会很乏味。

2.  使用共享实例（单例）。我使用[这里](http://www.galloway.me.uk/tutorials/singleton-classes/)的代码。如果您要传递大量数据，我会推荐这种方法。

3.  使用 NSUserDefault 记住文本字段数据，并在 vc3 中显示标签时，使用 [NSUserDefaults standardUserDefaults] 读回值。如果您只有很少的数据要传递，那就太好了。此方法的另一个优点是您可以记住此数据以供下次启动，并且可以在 vc6 中的文本字段显示给用户输入之前正确显示 vc3 中的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:31:00.950

我之前回答过类似的问题：

示例：[代表](https://stackoverflow.com/a/11580176/8047)。

快速的回答是，你不能真正将 vc6 中的插座“链接”到 vc3 中的某些东西，就像在 IB 中使用控制拖动一样。完成你想要的最好的方法是使用委托模式，我在链接的问题中概述了它。

这需要一些额外的工作，但这是一项非常重要的技能。

# .htaccess - 多个移动 htaccess 重定向 iphone/ipad

> ID：11750806
> 
> 赞同：0
> 
> 时间：2012-08-01T00:05:15.600
> 
> 标签：.htaccess, redirect, mobile, web

好的，所以我有一个网站**mywebsite.net** 我有 2 个子域**mobi.mywebsite.net**和**ipad.mywebsite.net**

使用 htaccess 重定向它适用于 iphone/android 但我想添加 ipad 并将其重定向到 ipad 子域这是我的代码：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} iPhone
RewriteRule .* http://mobi.Mywebsite.net/ [R] 
```

我为 ipad ( ) 找到了这个 rewritecond，`RewriteCond %{HTTP_USER_AGENT} "iPad" [NC,OR]`但是如果我添加它，我还可以添加另一个规则让它进入 ipad 子域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:10:59.583

您不需要`[OR]`用于重写条件的标志，但如果您收到重定向循环，则需要检查主机名：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} (iphone|android) [NC]
RewriteCond %{HTTP_HOST} !^mobi\. [NC]
RewriteRule ^ http://mobi.Mywebsite.net/ [L,R=301]

RewriteCond %{HTTP_USER_AGENT} ipad [NC]
RewriteCond %{HTTP_HOST} !^ipad\. [NC]
RewriteRule ^ http://ipad.Mywebsite.net/ [L,R=301] 
```

请注意，这些会将所有请求重定向到`mobi`and的根目录`ipad`，请求的 URI 不会被保留。这意味着如果您在 ipad 上访问**mywebsite.net/some/path/**，您将被重定向到**ipad.mywebsite.net/**。如果你想让它被重定向到**ipad.mywebsite.net/some/path/**，你需要将上面的 2 个`RewriteRule`指令更改为：

```
RewriteRule ^(.*)$ http://mobi.Mywebsite.net/$1 [L,R=301]

RewriteRule ^(.*)$ http://ipad.Mywebsite.net/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:29:30.207

您可以拥有任意数量的重写规则。您唯一需要注意的是您定义它们的顺序，但在您的情况下，这不会是一个问题。如果用户代理包含“iphone”或“android”字样，则以下内容将重定向到您的移动网站。如果用户代理包含“ipad”一词，它也会重定向到您的 ipad 站点。

```
RewriteEngine on

RewriteCond %{HTTP_USER_AGENT} "iPhone|android" [NC]
RewriteRule ^(.*)$ http://mobi.Mywebsite.net/ [R=301,L]

RewriteCond %{HTTP_USER_AGENT} "iPad" [NC]
RewriteRule ^(.*)$ http://ipad.Mywebsite.net/ [R=301,L] 
```

# javascript - IE 中的 jQuery Fancy Box pdf

> ID：11750809
> 
> 赞同：0
> 
> 时间：2012-08-01T00:05:49.733
> 
> 标签：javascript, jquery, internet-explorer, pdf, fancybox

我正在使用 jQuery Fancy Box 在触发时显示 PDF。它适用于 Firefox 和 Chrome，但不适用于 IE。Fancy Box 出现并显示它应该与 pdf 一样大以及所有内容，但是在框的左上角有一个红色的小 x，就像它无法加载整个文档一样。

这是我的 JS 启动 Fancy 框：

```
 //initialize fancybox for PDFs
$(document).ready(function() {
    $("a.pdf").click(function() {
        $.fancybox({
            'width': '70%',
            'height': '99%',
            'autoSize': false,
            'content': '<embed src="'+this.href+'#nameddest=self&page=1&view=FitH,0&zoom=0,0,0" type="application/pdf" height="99%" width="99%" />',
            'onClosed': function() {
                $("#fancybox-inner").empty();
            }
        });
        return false;
    }); // pdf 
}); // ready 
```

# java - DB2 中的 DAYS 和 DATE 子句

> ID：11750813
> 
> 赞同：1
> 
> 时间：2012-08-01T00:06:08.190
> 
> 标签：java, sql, db2

我想知道是否有人可以用 Java 解释这行 DB2 代码，尤其是 DAYS 子句的功能，因为通常我看到它像 DAYS(xxx) 一样使用：

```
dd.actual_date between DATE('"+startDate+"') - "+noDays+" DAYS AND DATE('"+startDate+"') 
```

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:24:10.223

根据[IBM DB2 信息中心：Date Arithmetic](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2z10.doc.sqlref%2Fsrc%2Ftpc%2Fdb2z_datearithmetic.htm)，此语法可用于从日期中添加或减去天数（或月或年）。查询将是这样的：

```
 dd.actual_date between DATE('20120801') - 3 DAYS 
                    AND DATE('20120801') 
```

# c++ - 在应用程序中嵌入 SSL 密钥

> ID：11750817
> 
> 赞同：4
> 
> 时间：2012-08-01T00:06:29.327
> 
> 标签：c++, c, openssl

是否可以通过 C/C++ API 将简单服务器应用程序的私钥和公钥嵌入其中？最好不要先破解整个 OpenSSL 库。

通过嵌入，我的意思是将字符串或 char* 之类的东西传递给 API，而不是直接从文件中读取。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:11:10.780

一般来说（不限于`openssl`），当我发现需要将文件之类的东西编码到内存中时，我不希望`open`/`read`或`mmap`它，我通常使用`objcopy`（前提是我可以访问给`binutils`定项目的 GNU）。它非常有效。

例如：

```
objcopy --input binary --output elf32-i386 --binary-architecture i386 resource.img resource.o 
```

`objcopy`创建包含数据的目标代码，`resource.img`并创建名为`_binary_resource_img_start`and `_binary_data_txt_end`(and ... `length`) 的符号。我可以`extern`声明这些变量并获取它们的地址，以便在内存中找到资源。瞧！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T03:22:43.210

您可以使用该`d2i_X509()`函数直接将 DER 编码的证书从`unsigned char *`缓冲区转换为 X509 对象：

```
const unsigned char cert_DER[] = /* ... */;

const unsigned char *p = cert_DER;
X509 *cert_X509 = d2i_X509(NULL, &p, sizeof cert_DER); 
```

其他 OpenSSL 对象也有类似`d2i_*()`的功能，例如键 - 例如。`d2i_RSAPrivateKey()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:40:30.713

是的。您使用为读取例程`BIO_new_mem_buf`创建输入`BIO`，然后调用适当的`PEM_read_bio_*`函数来提取密钥和证书。

```
BIO *in = BIO_new_mem_buf(pkey, pkey_len);
EVP_PKEY *ep = PEM_read_bio_PrivateKey(in, ...);

BIO *in = BIO_new_mem_buf(certs, cert_len);
X509 *x = PEM_read_bio_X509_AUX(in, ...); 
```

# objective-c - IBAction 对另一个 IBAction 执行操作

> ID：11750819
> 
> 赞同：1
> 
> 时间：2012-08-01T00:06:59.227
> 
> 标签：objective-c, xcode4, calculator

我对目标 c 非常陌生，并且刚刚开始编写我的第一段代码，所以请在您的回复中对我温柔。

我决定尝试做一个飞镖计算器作为我第一次编程的尝试，因为它本质上是一个简单的减法机。

在我的视图 controller.h 文件中，我有以下内容：

```
-(IBAction)subtractOne:(id)sender; 
```

在 viewController.m

```
-(IBAction)subtractOne:(id)sender

{
    accumulator -= 1;
    calculatorScreen.text = [NSString stringWithFormat:@"%i", accumulator];    
} 
```

我已经为所有 22 个评分按钮设置了这些，并设法让所有这些都正常工作。

然而，我现在的困难在于双键和高音按钮。我需要一个 -(IBAction) 将 nextButtonPressed 乘以 2 或 3，但我不确定如何进行。

我不是要求你为我编写代码，但如果你能指出我将如何做到这一点，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:10:42.447

```
-(IBAction) tripleMultiplier:(id)sender;

-(IBAction) tripleMultiplier:(id)sender {
    // Activate the triple multipler if it is inactive, otherwise deactivate it.
    tripleMultiplier = !tripleMultiplier;
} 
```

而在其他`IBACtions`

```
-(IBAction) subtractOne:(id)sender {
    // If the tripleMultipler is active: 
    accumulator -= (tripleMultipler ? 1 : 3);
    calculatorScreen.text = [NSString stringWithFormat:@"%i", accumulator];    
} 
```

# jquery - Safari 6 的 $.browser.version？

> ID：11750820
> 
> 赞同：0
> 
> 时间：2012-08-01T00:07:22.033
> 
> 标签：jquery, safari

我对 Safary < 6 有一点问题。我不是 Mac 用户，我的办公室里也没有 Mac。Safari 6 不适用于 Windows。我需要的是知道

```
$.browser.version 
```

适用于 Safari 6 网络浏览器。Mac 开发人员，你能告诉我这些信息吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:23:25.720

我确定您已经被警告过，浏览器嗅探通常不是首选方法。也就是说，`$.browser`解析用户代理字符串。浏览 www.useragentstring.com/pages/Safari/ 中的用户代理字符串，Safari 6 显示为：

`Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5355d Safari/8536.25`

之后的部分`AppleWebKit`是 jQuery 获取渲染引擎版本的地方。所以，在这种情况下，它是`536.26`. 您可以通过欺骗您的用户代理字符串来亲自尝试。在 Firefox 中，用户代理切换器是执行此操作的插件。去[http://whatsmyua.com](http://whatsmyua.com)看看 jQuery 看到了什么。

# javascript - PDF.js 插入图像

> ID：11750821
> 
> 赞同：3
> 
> 时间：2012-08-01T00:07:22.807
> 
> 标签：javascript, pdf, canvas, pdf-generation, pdf.js

顺便说一句，我已经开始使用[PDF.js](https://github.com/Marak/pdf.js/)了，这是一项出色的工作。

但现在我想在 pdf 页面上插入一个图像（来自一个画布元素）。这是我的代码：

```
var image = myCanvas.getContext('2d').getImageData(0,0,400,300),
doc = new pdf();
doc.setProperties({
    title: fileName,
    author: 'VirtuaLab®',
    creator: 'pdf.js'
});
doc.addPage();
data = doc.output(); 
```

但我还没有发现任何关于在 PDF.js 页面上插入图像的信息。

也许`doc.image()`或`doc.addImage`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:36:03.263

免责声明：我为[Bytescout工作](http://bytescout.com)

不幸的是，PDF.js 不能处理图像，这就是为什么我们[为 Javascript 开发 PDF Generator SDK](http://bytescout.com/products/developer/pdfgeneratorsdkjs/index.html)（非商业用途免费），您可以在其中添加图像（来自 url 或画布），如下所示：

```
// load image from local file
pdf.imageLoadFromUrl('image1.jpg');
// place this mage at given X, Y coordinates on the page
pdf.imagePlace(20, 40); 
```

重要的是，您可能会面临图像大小的限制，因为 BytescoutPDF.js 可能会消耗内存来处理大图像（此问题是由 javascript 的内存限制引起的）。

但是，如果您只需要在生成的 pdf 中插入徽标图像或小图片，脚本应该可以正常工作。

**更新**：最新版本的[jsPDF](http://jspdf.com/)（不要与 PDF.js 混淆）似乎适用于图像，请参阅[示例页面](http://jspdf.com/)上的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T18:31:38.337

如果我正确理解了你的问题，你想用 pdf.js`<img>`代替 a 。`<canvas>`

所以这是我对这个问题的修复，像往常一样将返回的图像插入到画布中，给画布一个`display: none;`.

然后使用`.toDataURL()`canvas元素的方法为你的img获取一个`src`。

```
var canvas = document.getElementById("myCanves");
var img = document.getElementById("myImg");
img.src = canvas.toDataURL(); 
```

我希望这有帮助。

# tfs - TFS 2010 性能缓慢的团队城市检查

> ID：11750824
> 
> 赞同：2
> 
> 时间：2012-08-01T00:07:54.303
> 
> 标签：tfs, teamcity

我有一个 Team City 服务器，以及其他服务器中带有 de TFS DB 的 TFS 2010。两者都是 ESX 服务器上的虚拟机（用于虚拟化的怪物服务器）

问题是，从 VS 2010 开始，签入、签出速度非常快，但是从团队 City 开始，构建配置的检查更改过程大约需要 15 分钟或更长时间，集合数据库的大小为 400 MB（它不是比大）项目的所有代码的 el 大小约 16 mb，包括包

一切都通过 LAN 配置运行

Team city server已经安装了VS team explorer 2010和net framework和SDK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:00:16.233

根据您的 TeamCity 版本，请查看此问题[http://youtrack.jetbrains.com/issue/TW-13046](http://youtrack.jetbrains.com/issue/TW-13046)

> TFS 检查构建代理更改的当前实现将根据包含规则启动“tfs-native.exe”进程。对于这个例子，在启动/停止、连接/断开、协商方面可能会产生巨大的开销。
> 
> 5.1.x 和早期 6.0 的解决方法可能是在 TeamCity 服务器上将“teamcity.tfs.use.remoting.server”属性设置为“true”。有关详细信息，请参阅[http://confluence.jetbrains.net/display/TCD5/TeamCity+Startup+Properties 。](http://confluence.jetbrains.net/display/TCD5/TeamCity+Startup+Properties)

它为我们解决了问题

# iphone - 在视图控制器加载后设置值

> ID：11750827
> 
> 赞同：0
> 
> 时间：2012-08-01T00:08:53.540
> 
> 标签：iphone, ios, delegates, nsstring, protocols

我想知道如何或是否可以重新加载整个视图，因为我正在接收一个我想在 UIView 上显示的 NSString，但是因为数据来自在另一个类中初始化的协议/委托而不是视图这将成为一个子视图..我无法让这个 NSString 显示在文本标签中，因为 ViewController 在数据被喷入委托/协议之前已经加载..这是我的代码，它很简单......我需要弄清楚如何在加载之前重新加载视图或将值传递给视图。

```
//These methods are declared inside ConnectionResponses.h as delegates to pass informatin to this view from ConnectioneResponses.
- (void)sendSeriesSearchArray:(NSArray *)array seriesToolBar:(NSString *)seriesToolBarString
{
    int arrayCount = [array count];
    NSLog(@"%i", arrayCount);

    manufactureToolBarLabel.text = seriesToolBarString;

} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:53:04.117

在您的 ViewController.m 中，在初始化时添加代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doSomething:) name:@"ValueChanged" object:nil]; 
```

当某些属性更改时，在您的委托/协议中添加代码：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ValueChanged" object:nil]; 
```

然后在方法 doSomething: 您可以根据需要更改 UI。

# callback - Mac 上的 GrowlNotification 和回调示例

> ID：11750829
> 
> 赞同：1
> 
> 时间：2012-08-01T00:09:01.180
> 
> 标签：callback, applescript, growl, growlnotify

我是 Growl 通知的新手。每当收到消息时，我的聊天应用程序都会显示一些咆哮消息。当用户单击咆哮消息时，我应该能够在窗口上弹出带有消息的应用程序窗口。

是否有 Growl 的示例或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:11:50.273

您的意思是像官方 Growl 文档[中的 Cocoa 应用程序页面中的实现 Growl 支持？](http://growl.info/documentation/developer/implementing-growl.php)

或者，由于您提到 AppleScript，也许您正在寻找[Sample AppleScript Notification](http://growl.info/documentation/applescript-support.php#simpleNotificationSampleCode)，也来自他们的文档。

# asp.net - 如何隐藏和显示一些按钮？

> ID：11750832
> 
> 赞同：0
> 
> 时间：2012-08-01T00:09:12.367
> 
> 标签：asp.net, vb.net

在标记页面上，我们隐藏了这些按钮：

```
 <asp:TextBox ID="searchBox" runat="server"></asp:TextBox><asp:Button ID="btnSearch" runat="server" Text="Search Site" /> 
    <br /><br /> 
   <asp:Button runat="server" ID="checkall" Text="Check All" OnClick="checkall_Click" /> 
   <asp:Button runat="server" ID="uncheckall" Text="Uncheck All" OnClick="uncheckall_Click" /> 
```

我们希望在页面加载时隐藏 checkall 和 uncheckall 按钮。

如果单击搜索按钮，则使 checkall 和 uncheckall 按钮可见。

到目前为止，我的努力效果不佳。

首先在 page_load(...) 事件中，我有这些：

```
'make them hidden by default
checkall.Visible = False
unckeckall.Visible = False 
```

然后在 btnSearch_click (...) 事件上，我想确保单击搜索按钮，然后使 checkall 和 uncheckall 按钮可见。

```
 If (btnSearch.ID = "btnSearch") Then
        checkall.Visible = True
        unckeckall.Visible = True
    End If 
```

到目前为止，它运行得并不好。

在页面加载时，checkall 和 uncheckall 按钮是隐藏的，就像我们想要的那样。

当用户单击搜索站点时，它们是可见的。那也很好。

问题是当我单击 checkall 以选中复选框时，checkall/uncheckall 按钮再次消失。

我们只希望它们在未单击搜索坐按钮时不可见。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:14:38.293

将您的初始化代码移动到`!IsPostBack`检查中：

```
if (!IsPostBack)
{
    checkall.Visible = False;
    unckeckall.Visible = False;
} 
```

更好的是，将其从 C# 中删除，使其具有声明性：

```
<asp:Checkbox ID="checkall" Visible="False" ... /> 
```

* * *

**编辑：** 或者，在 VB 中：

```
If Not IsPostBack Then
    checkall.Visible = False
    unckeckall.Visible = False
End If 
```

正确的？我的VB可能有点生疏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T00:17:34.140

尝试这个

```
'VB
If Not Page.IsPostBack Then

    'make them hidden by default
    checkall.Visible = False
    unckeckall.Visible = False

End If

//C#
If (!Page.IsPostBack) 
{

    'make them hidden by default
    checkall.Visible = false;
    unckeckall.Visible = false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:23:32.310

为 btnSearch 添加 OnClick 事件，如下所示

```
<asp:TextBox ID="searchBox" runat="server"></asp:TextBox>
<asp:Button ID="btnSearch" runat="server" Text="Search Site" OnClick="btnSearch_click" /> 
<br /><br /> 
<asp:Button runat="server" ID="checkall" Text="Check All" OnClick="checkall_Click" /> 
<asp:Button runat="server" ID="uncheckall" Text="Uncheck All" OnClick="uncheckall_Click" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-14T05:59:58.590

只是让它不可见。

```
 <asp:Button runat="server" ID="checkall" Text="Check All" OnClick="checkall_Click" style="display:none"/> 
 <asp:Button runat="server" ID="uncheckall" Text="Uncheck All" OnClick="uncheckall_Click" style="display:none"/> 
```

# maven - Maven 程序集：重命名解压文件

> ID：11750833
> 
> 赞同：6
> 
> 时间：2012-08-01T00:09:33.483
> 
> 标签：maven, maven-3

我使用 maven-assembly-plugin 的多个 Maven 项目需要将两个二进制文件复制到一个文件夹中。

这些是我所有项目共有的两个原始文件：

> 程序运行程序
> 
> 程序运行程序

我希望重用这组文件。它们可能来自诸如 JAR 或 ZIP 文件之类的依赖项，以便稍后在我的构建过程中解压缩它们。这样，如果我以后选择升级二进制文件，我可以创建我的公共项目的新版本，并将依赖项更改为我的公共项目。这样做的另一个原因是因为我想使用最小化单个项目中与构建相关的文件的数量。

现在，棘手的部分是我需要**在解压缩依赖项时重命名每个文件**。例如，对于项目 A，我需要将文件复制如下：

> bin/projectA_procrun.exe
> 
> bin/projectA_procrunw.exe

## 部分解决方案

我的部分解决方案是将这两个文件**放在每个 Maven 项目**的 src/main/build/bin 文件夹中。

这并不理想，但至少我能够重用[本页所述](http://maven.apache.org/plugins/maven-assembly-plugin/examples/sharing-descriptors.html)的通用程序集文件的内容：

```
 <assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>my_assembly</id>

    <formats>
        <format>zip</format>
    </formats>    

    <files>
        <file>
        <source>src/main/build/bin/procrun.exe</source>
        <outputDirectory>bin</outputDirectory>
        <destName>${myexecutable.name}.exe</destName>           
    </file>
    <file>
        <source>src/main/build/bin/procrunw.exe</source>
        <outputDirectory>bin</outputDirectory>
        <destName>${myexecutable.name}w.exe</destName>
    </file>
    </files>

    <!-- Additional details ommitted -->    
</assembly> 
```

## 尝试失败

Assembly 中的**outputFileNameMapping属性允许重命名工件，但不允许重命名程序集中的文件。**

一次失败的尝试是将每个文件注册为一个单独的 Maven 工件。这样，我可以在与我的每个工件相对应的部分内使用 outputFileNameMapping。

我遇到的问题是 Nexus 不喜欢将“exe”作为工件。

## 问题

关于如何通过增强我的局部或采用替代方法来实现预期结果的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:06:04.757

您可能无法告诉程序集插件解包并重命名。但是您可以在程序集插件运行后使用[antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)重命名文件。

在这之后你的 pom 看起来不会很漂亮。

但是话又说回来，您已经在处理自定义程序集，所以我猜您可能愿意接受:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-18T19:55:35.050

正如您所发现的那样，专门使用**outputFileNameMapping**并不适用于 JAR 的内容。你可以看到这个问题的血淋淋的细节：[MASSEMBLY-312](http://jira.codehaus.org/browse/MASSEMBLY-312)。

另一个相当老的问题：[MASSEMBLY-45](http://jira.codehaus.org/browse/MASSEMBLY-45)提出了一项增强功能，以允许 Ant 样式的文件名映射，这可能会给我们提供我们需要的功能。它已部分实施，但由于单元测试问题而从未完成。

我最终接受了 khmarbaise 的建议，并使用依赖项插件解压缩了我需要的文件，然后使用程序集重新打包它们。

# quartz-composer - 如何在 Quicktime 播放器中使用自定义插件播放石英作曲家电影

> ID：11750836
> 
> 赞同：0
> 
> 时间：2012-08-01T00:09:53.447
> 
> 标签：quartz-composer

我有一个应用程序，我需要使用 Quartz Composer 和自定义插件制作 Quartz 电影，并让它在能够播放 Quartz 电影的 3rd 方应用程序中运行。

作为第一步，我使用 Xcode 成功开发了我的自定义插件，并在 Quartz Composer 中“构建”了一个合成。我让这一切都在 Quartz Composer 中运行，这在 Quartz Composer 内的查看器中运行良好。

随后我尝试在 3rd 方应用程序中播放它，但它无法播放，电影的其他部分播放了，但我的插件根本不起作用。然后我尝试了 QuickTime 播放器，在一台机器上它的行为完全相同 - 播放了电影，但我的插件不起作用。在另一台机器上，我收到错误“Quicktime player 在使用“我的插件名称”插件时意外退出。

在这之后，我有点困惑，我阅读了论坛，我遇到了安全和不安全补丁的概念。我想知道这是否就是为什么我的补丁在 Quartz composer 以外的应用程序中不起作用的原因。

如果我启用“指示不安全补丁”菜单项，那么它会在插件上显示一个未锁定的挂锁图标，可能表明它实际上是不安全的。

一些问题：

我是否走在正确的轨道上，是否因为它被认为不安全而没有播放我的自定义插件？
我如何告诉“应用程序”或系统它是安全的？
实现我想要做的正确方法是什么？
欢迎任何其他想法，有用的信息。

谢谢你，
亲切的问候，
卡勒姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:02:33.540

[KinemeCore](http://kineme.net/KinemeCore)的“不安全模式”可用于绕过补丁和应用程序的指定组合的安全模式。

来自[http://kineme.net/wiki/SafeMode](http://kineme.net/wiki/SafeMode)：

> 安装 KinemeCore 后，启动 Quartz Composer，单击“K”菜单并选择 Preferences，然后配置 Unsafe Mode 以允许您需要在任何应用程序中使用任何 QC Patches。

# java - 如何跟踪可能重叠的应用程序的不同组件中的不同性能改进？

> ID：11750837
> 
> 赞同：1
> 
> 时间：2012-08-01T00:09:54.703
> 
> 标签：java, jakarta-ee, profiling, performance

所以这是一个普遍的问题。这是问题所在：

我目前正在与其他 5 人一起从事一个项目。在一个应用程序 (Java EE) 中，我们都被分配了不同的性能调整项目。但是，我们都需要报告与原始组件相比，我们真正实现了多少改进。现在，如果我们都在不同的时间检查我们的代码，我们如何必须在给定的时间内跟踪我们自己的个人性能改进？

我在想也许可以在我们的代码中添加标志并跟踪我所有的代码更改，但我觉得这太混乱了，因为例如让我们说改进就像使用原始数据类型而不是像整数对象一样，但是这个改进可能会转移到其他人的工作中。

谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T02:39:54.633

至于任何性能改进（无论是更好的速度还是更低的内存），您都应该设置一个测试平台。如果你不能用单元测试来做，如果它是一个 web 应用程序，试着写一个 JMeter 测试计划。

运行测试，始终使用相同的参数（相同的 JVM，以相同的最大堆开始，测试中相同的线程数等......）。

在未优化的应用程序上运行它，并使用一些工具导出一些基准数据（jdk中有很多，jvisualvm很容易但需要人工交互，jmap可以自动化）。

假设它使用 500Mb 的 ram 和 10 分钟来完成未优化版本的测试计划。

运行这些测试，每个开发人员都可以在检查源代码版本之前测试他所做的修改是否使情况变得更好，没有改变任何东西，甚至使情况变得更糟。

由于您签入代码，因此您知道谁签入了哪些修改，并且您可以（使用 git、svn 或任何其他现代源代码版本控制系统）签出特定版本。

针对各种版本运行测试，您可以查看您是否在降低 ram 消耗、时间或任何指标的任务中取得进展......以及作为副作用的还有谁为它做出了哪些贡献。

您甚至可以使用持续集成工具（如 Hudson、Jenkins 等）使其自动化。指示它检查、编译、部署、运行测试、收集数据、发送邮件，说明谁提交了什么以及如何更改数字，但拥有超级-计算机告诉谁是好人....不是最好的团队士气。

# java - 延迟来自客户端的并发请求，直到创建 HttpSession

> ID：11750838
> 
> 赞同：2
> 
> 时间：2012-08-01T00:10:11.740
> 
> 标签：java, session, jakarta-ee, servlet-filters, java-6

我有一个`servlet.Filter`实现，它在数据库表中查找客户端的用户 ID（基于 IP 地址），它将这些数据附加到一个`HttpSession`属性。过滤器在收到来自客户端的请求时执行此操作，而没有定义`HttpSession`.

换句话说，如果请求没有附加会话，过滤器将：

*   为客户端创建会话
*   对用户 ID 进行数据库查找
*   将用户 ID 作为会话属性附加

如果“无会话”客户端的请求之间有一段时间，这一切都可以正常工作。

但是，如果一个“无会话”客户端在几毫秒内发送 10 个请求，我最终会得到 10 个会话和 10 个数据库查询。它仍然“有效”，但出于资源原因，我不喜欢所有这些会话和查询。

我*认为*这是因为请求非常接近。当“无会话”客户端发送请求并在发送另一个请求之前获得响应时，我没有这个问题。

我的过滤器的相关部分是：

```
// some other imports

import org.apache.commons.dbutils.QueryRunner;
import org.apache.commons.dbutils.handlers.MapHandler;

public class QueryFilter implements Filter {

    private QueryRunner myQueryRunner;  
    private String myStoredProcedure;
    private String myPermissionQuery;
    private MapHandler myMapHandler;

    @Override
    public void init(final FilterConfig filterConfig) throws ServletException {
        Config config = Config.getInstance(filterConfig.getServletContext());
        myQueryRunner = config.getQueryRunner();
        myStoredProcedure = config.getStoredProcedure();
        myUserQuery = filterConfig.getInitParameter("user.query");
        myMapHandler = new MapHandler();
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
            throws ServletException {

        HttpServletRequest myHttpRequest = (HttpServletRequest) request;
        HttpServletResponse myHttpResponse = (HttpServletResponse) response;
        HttpSession myHttpSession = myHttpRequest.getSession(false);
        String remoteAddress = request.getRemoteAddr();

        // if there is not already a session
        if (null == myHttpSession) {

            // create a session
            myHttpSession = myHttpRequest.getSession();

            // build a query parameter object to request the user data
            Object[] queryParams = new Object[] { 
                myUserQuery, 
                remoteAddress
            };

            // query the database for user data
            try {
                Map<String, Object> userData = myQueryRunner.query(myStoredProcedure, myMapHandler, queryParams);

                // attach the user data to session attributes
                for (Entry<String, Object> userDatum : userData.entrySet()) {
                    myHttpSession.setAttribute(userDatum.getKey(), userDatum.getValue());
                }

            } catch (SQLException e) {
                throw new ServletException(e);
            }

            // see below for the results of this logging
            System.out.println(myHttpSession.getCreationTime());
        }

        // ... some other filtering actions based on session
    }
} 
```

以下是`myHttpSession.getCreationTime()`来自 ONE 客户端的日志记录（时间戳）结果：

```
1343944955586
1343944955602
1343944955617
1343944955633
1343944955664
1343944955680
1343944955804
1343944955836
1343944955867
1343944955898
1343944955945
1343944955945
1343944956007
1343944956054 
```

正如你所看到的，几乎所有的会话都是不同的。这些时间戳还可以很好地了解请求之间的间隔距离（20ms - 50ms）。

我无法重新设计所有客户端应用程序以确保它们在最初发送另一个请求之前至少获得一个响应，所以我想在我的过滤器中这样做。

另外，我不想只是让后续请求失败，我想找出一种处理它们的方法。

**问题**

*   有没有办法将来自同一客户端（IP 地址）的后续请求放入“limbo”，直到从第一个请求建立会话？

*   而且，如果我能做到这一点，当我之后打电话时，我怎样才能得到正确`HttpSession`的（我附加用户数据的那个）`aSubsequentRequest.getSession()`？我认为我不能为请求分配会话，但我可能是错的。

也许有一些更好的方法可以完全解决这个问题。我基本上只是想阻止此过滤器在 2 秒的时间段内不必要地运行查找查询 10 到 20 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:01:27.807

我认为您需要做的是要求您的客户首先（成功）进行身份验证，然后再提出其他请求。否则，它们会冒着生成多个会话的风险（并且必须单独维护它们）。这对 IMO 的要求来说还不错。

如果您能够依赖 NTLM 凭据，那么您或许可以设置一个 user->token 映射，在第一次连接时将令牌放入映射中，然后所有请求都会阻塞（或失败），直到其中一个成功完成身份验证步骤，此时令牌被删除（或更新，以便您可以使用首选会话 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:41:46.043

您正在处理雷鸣群问题。解决它的最佳方法是使用可以处理此问题的缓存实现。这是解决它的一种方法。

1.  在过滤器中使用 Google Guava 加载缓存并使用 SessionId 查找您想要的信息。Google guava 的设计是，如果一个键不在缓存中，并且一个线程同时访问缓存寻找一个对象，那么只有一个线程会调用 load 方法，而其他线程将阻塞，同时将项目带入缓存. 不要为此番石榴缓存设置上限，因为缓存的大小将与 http 会话的数量相同，因为您希望在会话中存储项目。如果问题是容器正在为同时到达的请求创建多个 httpSession，则根据请求中的某些内容进行缓存，这些内容不会更改此类用户 ID 或示例代码中 queryParams 中的某些字段。

2.  编写一个 HttpSessionListener，当会话过期或在 HtttpSessionListener 中失效时，servlet 容器会自动调用它，然后您可以在 Google guava 缓存上调用 invalidate 方法，这样您最终会在第一次请求时将项目添加到缓存中并获得会话到期时被踢出缓存。

3.  您还可以实现 HttpSessionActivationListener ，它会在 Web 容器将会话钝化到磁盘时通知您，这可能由于各种原因而发生，例如内存不足，或者客户端有一段时间没有发送请求但会话尚未过期所以它会被钝化。在钝化事件中，将您的项目从缓存中逐出并在激活事件中将其放回缓存中是有意义的。

4.  您必须确保放入缓存中的项目是线程安全的，我建议使用安全对象构造技术构建的不可变对象。

我在我的基于 Spring 的应用程序中使用了上述技术，所以我在做上面的一些细微的修改。

1.  我正在使用 Spring Application Context 事件来触发一个事件，当发生可以使缓存无效的事情时，缓存可以只侦听 Spring 应用程序上下文中的事件并使其状态无效。会话激活/钝化和创建/销毁触发事件，然后多个缓存可以做出反应。

2.  我不使用过滤器并使用自然键，例如使用配置文件缓存以用户 ID 为键，并且在有人询问用户 ID 12304 的用户配置文件之前不会填充它。

3.  我非常重视线程安全，并确保在所有缓存中使用不可变对象。这意味着您必须拥有不可变的数据结构，例如列表、地图……等等，这是 Google Guava 令人惊叹的另一个领域，您可以获得很多有用的数据结构。不可变列表、映射、集合、多映射...等。

如果您需要代码示例，请告诉我。

另一种可能性是您可以在过滤器中使用同步，这会降低性能但会使事情变得连续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T00:49:37.270

我会缓存数据库查找并找到某种方法在数据库更改或在缓存中使用超时时使缓存无效。例如，谷歌的 Gauva 有一个缓存，会在指定的时间后使条目无效。这是一些基本代码。在会话上设置具有相同值的属性应该没问题。当会话被销毁时，还可以使用 HttpSessionListener 使包含“userID”的特定缓存条目无效。

```
static LoadingCache<String, String> ipAddressToUserLookupCache = CacheBuilder.newBuilder()
        .maximumSize(10000)
        .expireAfterWrite(10, TimeUnit.MINUTES)
        .build(
            new CacheLoader<String, String>() {
              public String load(String ipAddress) throws Exception {
                // find the user ID
                return "<user id>";
              }
            });

@Override
public void doFilter(ServletRequest req, ServletResponse resp, FilterChain fc) throws IOException,
        ServletException {
    final String ipAddress = req.getRemoteAddr();
    final String userName = ipAddressToUserLookupCache.get(ipAddress);
    ((HttpServletRequest)req).getSession(true).setAttribute("username", userName);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T00:35:40.060

通过首先进行检查（查看请求是否有会话），您就有了竞争条件。

您应该改用：

```
request.getSession() 
```

如果您检查 HttpServletRequest 的 javadoc，您将看到：

***返回与此请求关联的当前会话，或者如果请求没有会话，则创建一个。***

`userID`如果您使用该方法，两个调用都应该返回相同的会话，那么您可以在尝试设置属性之前检查该属性是否存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T04:23:56.570

真正最简单的解决方案是使用提供自填充策略的几个缓存框架之一。

基本上，这意味着当您访问特定键的缓存时，如果该键不存在，则您提供了一个函数来为该键创建数据。

在执行该功能时，对相同键的任何其他访问都会被阻止。

因此，如果您尝试访问特定 IP 的缓存，缓存会发现它没有条目。然后它调用您的例程从数据库加载。在加载时，其他尝试相同 IP 的人只是等到例程完成，然后他们都返回相同的值。

ehcache 是一个支持这个的框架，当然还有其他的。

你想为此使用一个框架，因为他们已经为你经历了管理锁和争用等的所有痛苦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T18:25:47.027

1.  只是想问一下，你怎么能在实时世界中真正有这样的场景——多个请求（超过 2-3 个）是从同一个 IP 或同一个客户端发送的，只有 20 毫秒的差异？我正在使用的应用程序，当我尝试再次单击提交按钮时，它不会再次提交页面并且以智能方式运行。

2.  基本上，我们通常会确保申请是双重提交证明。请参阅此链接以获取更多信息。 [解决双重提交问题](https://stackoverflow.com/questions/4699352/solving-the-double-submission-problem)

我认为，如果您可以尝试避免来自同一客户端的重复提交或多次提交等情况，那么您的问题就不会出现。

# python - “PollAdmin.fields”指的是表单中缺少的字段“None”

> ID：11750839
> 
> 赞同：0
> 
> 时间：2012-08-01T00:10:15.037
> 
> 标签：python, django, forms, field

我正在尝试使用 Django 进行民意调查，但我对它很陌生，当我进入管理页面时，它会出现以下错误：

```
ImproperlyConfigured at /admin/polls/poll/1/
'PollAdmin.fields' refers to field 'None' that is missing from the form. 
```

我不太确定这意味着什么，但这是我认为导致错误的 admin.py 文件：

```
from django.contrib import admin
from polls.models import Poll

class PollAdmin(admin.ModelAdmin):
  fields = [
    (None,         {'fields': ['question']}),
    ('Date information', {'fields': ['pub date']}),

admin.site.register(Poll, PollAdmin) 
```

**编辑**：

如果这很重要，这是我的模型文件：

```
from django.db import models
import datetime
from django.utils import timezone

class Poll(models.Model):
  question = models.CharField(max_length = 200)
  pub_date = models.DateTimeField('date published')
  def __unicode__(self):
    return self.question
  def was_published_recently(self):
    return self.pub_date >= timezone.now() - datetime.timedelta(days = 1)

class Choice(models.Model):
  poll = models.ForeignKey(Poll)
  choice_text = models.CharField(max_length = 200)
  votes = models.IntegerField()
  def __unicode__(self):
    return self.choice_text 
```

**编辑（再次）**

现在我将我的 PollAdmin 类修复为：

```
class PollAdmin(admin.ModelAdmin):
  fieldsets = [
    (None,         {'fields': ['question']}),
    ('Date information', {'fields': ['pub_date']}),
  ] 
```

但它说：

```
DoesNotExist at /admin/polls/poll/1/
Site matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:15:47.457

使用字段集而不是字段：

```
class PollAdmin(admin.ModelAdmin):
  fieldsets = [
    (None,         {'fields': ['question']}),
    ('Date information', {'fields': ['pub_date']}), 
```

# ruby-on-rails - 通过 link_to 方法将文件名附加到 URL - Rails

> ID：11750840
> 
> 赞同：0
> 
> 时间：2012-08-01T00:10:32.827
> 
> 标签：ruby-on-rails, prawn

我需要通过 link_to 方法将文件名添加到 url。

我当前的网址看起来像

```
http://0.0.0.0:3000/vouchers/17/voucher_orders 
```

我在我的应用程序中使用虾 gem 来生成 PDF，但是要使用虾获取 PDF，我需要像这样将文件名附加到 URL 的末尾。

```
http://0.0.0.0:3000/vouchers/17/voucher_orders/17.pdf 
```

我的 link_to 方法看起来像这样。

```
<%= link_to "Printable Voucher (PDF)", voucher_voucher_orders_path(@voucher, format: "pdf") %> 
```

这给了我以下网址。

```
http://0.0.0.0:3000/vouchers/17/voucher_orders.pdf 
```

如何在 link_to 方法中将“/voucher id”附加到 URL 的末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:53:29.147

我认为您可以使用 + 号将其添加到链接中。它看起来像这样

```
<%= link_to "Printable Voucher (PDF)", voucher_orders_path(@voucher)+'voucher_orders'+@voucher.id+'.pdf' %> 
```

玩弄那个。它很丑，但你可能可以让它工作。

# ms-word - WordML 列表问题

> ID：11750844
> 
> 赞同：0
> 
> 时间：2012-08-01T00:10:54.850
> 
> 标签：ms-word, wordml

我需要从类似 HTML 的 xml 格式转换为 WordML。我对列表有疑问。单词列表只是包含列表属性的段落，通常是对列表的引用。列表在包含列表属性的新段落上自动以 1 或 A 开始，如果下一个段落具有相同的列表属性，则编号继续。
当单个列表项包含多个段落时，问题就开始了。例如：

```
<li>
  <-- multiple paragraphs -->
  <p></p>
  <p></p>
  <p></p>
</li>
<li>
  ...
</li> 
```

在列表项 1 中插入所有嵌套段落后，我希望继续在列表项 2 中编号。但是从 1 开始创建一个新列表，因为前一段不是列表项。`<w:br/>`由于某些原因，我无法使用 WordML标签。有什么建议么？
非常感谢，这真的会帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:20:52.747

有关编号的介绍，请参阅[http://msdn.microsoft.com/en-us/library/ee922775(office.14).aspx](http://msdn.microsoft.com/en-us/library/ee922775%28office.14%29.aspx)。

您可以继续上一个列表。

# python - 编写此代码的pythonic方式

> ID：11750845
> 
> 赞同：0
> 
> 时间：2012-08-01T00:11:09.807
> 
> 标签：python

我有这段丑陋的代码..

```
 orders = got_something_from_db()
 if orders:
    for order in orders:
        #print order
        event_id = order["event_id"]
        if event_id in event_id_dict: # something i grabbed earlier
            product_id = order["product_id"] # products in an event
            qty = order["qty"]
            if product_id in product_sku_dict: 
                sku_id =product_sku_dict[product_id]
                for i in range(qty):
                    sku_ids.append(sku_id) 
```

我如何使这个更pythonic（和简洁）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T01:02:11.767

首先，代码并不完全糟糕——它足够清晰，可以阅读和理解，因此您肯定已经通过了可维护性的第一个障碍。

如果有问题，那就是深层嵌套。我将通过创建许多函数来打破这一点，每个函数都以它们的名称表达了不同的业务目的：

```
def order_has_valid_event(order):
    """Returns True if the order was raised by an event
    in event_id_dict"""
    event_id = order["event_id"]
    return event_id in event_id_dict # something i grabbed earlier

def get_sku_from_order(order):
    """Return the SKU of the product in an order"""
    product_id = order['product_id']
    try:
        return product_sku_dict[product_id]
    except KeyError:
        raise KeyError("Product {0} is not in SKU dictionary".format(product_id))

def get_order_skus(order):
    """Returns a list of SKUs in an order"""
    sku_id = get_sku_from_order(order)
    qty = order["qty"]
    return [sku_id] * qty

# Modify got_something_from_db to always return a list, even if empty 
orders = got_something_from_db()
for order in orders:
    #print order
    if order_has_valid_event(order):
        try:
            sku_ids.extend(get_order_skus(order))
        except KeyError:
            continue 
```

如果名称与您的意图不完全匹配，请原谅此尝试 - 只需适当地重命名它们即可。

我尝试的改进：

*   `qty`您可以创建一个`qty`元素列表，而不是附加循环时间： ['a'] * 3 = ['a', 'a', 'a']
*   在业务层面，当产品 id 不在 SKU 字典中时，我会质疑默默忽略的错误。这很可能是一个真正的问题（在我工作过的行业中，所有产品都应该有一个 SKU）。如果是这样，让错误快速且“大声”地传播到适当的错误处理程序，或者更有可能是可以拒绝订单的地方。为了更清楚地支持这一点，我已经明白了`KeyError`并`get_sku_from_order`抛出了更明确的异常消息。
*   修改 got_something_from_db 以始终返回一个列表，即使为空。这简化了逻辑和流程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T00:28:17.320

在有限的背景下，这是我能做的最好的。

```
orders = got_something_from_db()
for order in orders: #make got something return empty iterable on failure
    if order["event_id"] in event_id_dict:
        product_id = order["product_id"]
        try:
            sku_id = product_sku_dict[product_id]
            #Change sku_ids to a collections.Counter (assuming order is unimportant)
            sku_ids[sku_id] += order["qty"] 
        except KeyError:
            pass 
```

此外，考虑将 event_id、product_id 等更改为属性。您可能在这里需要一个命名元组，而不是字典。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T00:32:24.523

我将其结构如下：

```
def add_product_to_skus(product_id, qty):
    if product_id in product_sku_dict: 
        sku_id = product_sku_dict[product_id]
        sku_ids.extend(qty*[sku_id])    

# ...

orders = got_something_from_db()
if not orders:
    return

valid_orders = (o for o in orders if o['event_id'] in event_id_dict)

for o in valid_orders:
    add_product_to_skus(o['product_id'], o['qty']) 
```

上面的一些打高尔夫球会给你：

```
orders = got_something_from_db()
if not orders:
    return
add_products_to_skus((o['product_id'], o['qty']) for o in orders 
                     if o['event_id'] in event_id_dict 
                     if o['product_id'] in product_sku_dict)
# ...  
def add_product_to_skus(product_qtys):
    for product_id, qty in product_qtys:
        sku_id = product_sku_dict[product_id]
        sku_ids.extend(qty*[sku_id]) 
```

但是从您的原始形式到这种形式的转换不一定清楚（甚至是正确的），并且列表理解可能值得一个解释过滤的评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T00:34:42.047

您可能希望引发异常，而不是默默地忽略丢失的 SKU 项目。这是如何成为最模块化和最优雅的，而不是必要的 Pythonic：

```
database = ...
productId_to_sku = {...}

def productIdToSku(product_id):
    try:
        return productId_to_sku[product_id]
    except IndexError:
        raise Exception('product id #{} not in SKU database; have a manager add it'.format(product_id))

def getSkusFromEvent(event_id):
    orders = database.fetch(event_id=event_id)
    for order in orders:
        yield (productIdToSku(order.PRODUCT_ID), order.QTY)

collections.Counter(getSkusFromEvent(YOUR_EVENT_ID)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T00:25:41.463

```
sku_ids = []
event_ids = get_event_id_dict()
orders = got_something_from_db()

for order in orders:
    if order["event_id"] in event_ids:
        try:
            sku_id = product_sku_dict[order["product_id"]]
        except KeyError:
            continue

        sku_ids.extend([sku_id] * order["qty"]) 
```

# backbone.js - Coffeescript + Backbone“每个”回调函数

> ID：11750848
> 
> 赞同：1
> 
> 时间：2012-08-01T00:11:57.403
> 
> 标签：backbone.js, coffeescript

我的咖啡脚本/骨干应用程序中有以下内容。问题是它在“每个”功能完成之前运行 console.log （换句话说，在它完成为每个集合执行 create() 之前）。我想知道的是，是否可以使用某种我不知道的成功回调，以便在创建完成后运行 console.log。提前致谢！

```
wishlist.each (model) ->
  id = model.get('id')
  lineitems.create({product_id: id})
console.log "do this when finished!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:29:50.283

我觉得你很困惑。s 上的`each`函数`Backbone.Collection`不是异步的，它不会触发任何 AJAX 调用。该`each`函数实际上来自与异步功能无关的下划线。

获取数据的异步 AJAX 调用被调用`fetch`，它确实有一个成功/错误回调：

```
wishlist.fetch
  success: -> console.log "success"
  error: -> console.log "error" 
```

**编辑**

好的，所以您想`console.log`在所有创建完成后执行。首先，我所说`fetch`的创造是真实的。您可以添加`success`和`error`回调。

```
lineitems.create {product_id: id}, 
    {success: @create_success, error: @create_error} 
```

我会考虑为每个增加一个计数`create`并减少每个`success`和`error`回调的计数。当您完成创建并且您的计数达到 0 时，您已经处理了所有创建，您可以将其回调。

# c# - C# winform，嵌入大型声音文件或将它们放在单独的文件夹中？

> ID：11750852
> 
> 赞同：1
> 
> 时间：2012-08-01T00:12:53.173
> 
> 标签：c#, winforms, embedded-resource

我有一个 C# winform 应用程序。它处理一些声音效果。

我想知道是否应该让它们嵌入资源或将它们放在应用程序目录的文件夹中。

我不希望我的应用程序的用户惹恼他们。这就是为什么我不想将它们放在文件夹中，而且我认为还有一个问题。它们的总大小约为 150 Migs，所以如果我要将它们嵌入，那么这个大小会影响我的应用程序的性能吗？

如果是这样，将它们压缩成 ZIP 文件真的有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:24:39.290

对此没有正确答案 - 但这是我的 0.02 美元。

我认为你应该把它们分开，如果用户把它们弄乱了也不用担心。如果他们永远不会更改真的很重要，请对文件进行哈希并存储哈希，然后如果他们更改则抛出错误。将它们包含在二进制文件中可能不会提高性能 - 并且可能会损害您的加载时间，但它会使您的 exe 变得更大，并使其更难以更新和部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T00:27:16.353

**您不应该在 exe 中嵌入 150MB 的声音文件！**

假设您将使用 Windows Installer (MSI)，将文件包含到安装程序中，您可以在调试模式和发布模式下播放文件：

```
string file = @"C:\TFS\DevProject\bin\Debug\Metallica.resources";
file = file.Replace("\bin\Debug\",string.Empty);
file = file.Replace(".resources",".mp3");
System.Diagnostic.Process.Start(file); 
```

注意：资源扩展名（而不是 mp3 等），所以除非他们进行[二进制分析](https://stackoverflow.com/a/8736109/495455)，否则用户不会知道如何打开它们。

如果您使用 ClickOnce 部署，请执行类似的操作。

在[更新您的应用程序](https://stackoverflow.com/a/11490003/495455)时不要包含媒体文件...

# android - 当我为 4.0 开发时，我是否应该将我的 Galaxy Nexus 升级到 4.1？

> ID：11750856
> 
> 赞同：1
> 
> 时间：2012-08-01T00:13:43.187
> 
> 标签：android

我的问题与升级到 JellyBean 时可能遇到的问题有关。我目前正在开发我的应用程序以在 Ice Cream Sandwich 上运行，但升级通知开始让我烦恼，而且我真的想要 4.1。但我仍在开发应用程序并仍在学习 android 开发。开发人员是否应该始终在目标 API 级别上开发他们的应用程序？有经验的开发人员是否认为我应该坚持使用 ICS 直到我完成？另外，有没有人在 Jelly Bean 上运行应用程序时遇到任何怪癖。我很感激我能在这个问题上得到的任何建议，因为它显然会帮助我理解这些情况下的最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:28:09.870

4.1 和 4.0 之间的差异一点也不显着，所以我说去吧。Jelly Bean 真的很棒，尤其是在 Galaxy Nexus 上！另外，您可以将您的`targetSdkVersion`设置保持为`14`or`15`并且手机会知道它不需要在应用程序运行时加载任何新的 API 16 方法。

唯一想到的是 Jelly Bean*不允许*您读取其他应用程序的日志（尽管可能还有其他安全机制）。总的来说，除非您的应用程序正在做一些非常奇怪/骇人听闻的事情，否则如果您的应用程序在 4.1 上正确运行但在 4.0 上没有运行，我会感到非常惊讶。如果您是从 2.3 升级到 4.0，我的回答可能会相反，因为 GB 和 ICS 是如此不同……另一方面，4.0 和 4.1 非常相似。

# android - XAMPP 的 HttpPost 地址

> ID：11750858
> 
> 赞同：0
> 
> 时间：2012-08-01T00:13:47.090
> 
> 标签：android, xampp

我在 Eclipse 中使用 XAMMP。如果我使用 android 模拟器一切正常，但如果我使用真手机，Eclipse 会说连接被拒绝。我用于连接：

```
http://10.0.2.2:80 
```

我需要其他地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:20:50.863

我很困惑，因为我不知道这个地址来自哪里（10.0.2.2），但最后我只是打开了 wifi，连接到我的 wifi 点并更改该地址，将我的电脑的子路由，本地 ip。(192.168.1.x)。对于任何想通过互联网连接的人，我发现了这个：

[从 Internet 访问 XAMPP 本地主机](https://stackoverflow.com/questions/822902/access-xampp-localhost-from-internet)

# objective-c - iPhone App用户登录认证与服务器

> ID：11750859
> 
> 赞同：-1
> 
> 时间：2012-08-01T00:13:55.630
> 
> 标签：objective-c, ios, web-services, rest, authentication

我必须采取哪些步骤来创建一个数据库服务器，以允许用户创建一个帐户来保存他们在应用程序中的进度？基本上，我希望用户能够登录并从上次打开应用程序时离开的地方开始。我不确定如何获取服务器，或者我是否可以只使用核心数据。我知道这个问题很简短，我只需要一个起点，比如一本书或一个例子。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:26:34.017

这在很大程度上取决于您的应用程序的范围。以我目前使用 Microsoft 的 .Net MVC 4 框架的经验来看，这是可行的方法。它允许您创建一个 RESTful Web api，然后您可以使用 iOS 框架（如 RESTkit 或 AFNetworking）以您喜欢的格式（json、xml、文本）访问和传输数据。然后，您可以将数据从 Web api 控制器写入后端数据库。这是创建企业 iOS 应用程序的好方法。另外 - 如果您使用开发的存储库模式，请查看反对意见，这是编写遵循 MVC（无论是否为 iOS）的应用程序的一个很好的补充。

查看 web api 教程[http://www.asp.net/web-api](http://www.asp.net/web-api)

# pytest - pytest 从父目录运行测试时如何在测试目录中找到 conftest.py 的输入文件

> ID：11750861
> 
> 赞同：1
> 
> 时间：2012-08-01T00:14:32.900
> 
> 标签：pytest

在 tests 目录中有 2 个子目录，例如 tests/api 和 tests/sanity。注意 tests/api 有 conftest.py 期望在 tests/api 目录中找到 input.conf。请注意，从 tests/api 运行测试可以正常工作。但是从父目录测试运行测试，它失败了：py.test --test_option=input.conf 用法：py.test [options] [file_or_dir] [file_or_dir] [...]

py.test：错误：没有这样的选项：--test_option

有人可以展示我如何构建我的测试，这样就可以了？我也尝试指定测试目录，如下所示，但找不到 input.conf。py.test --test_option=input.conf api/test_api.py

E IOError: [Errno 2] 没有这样的文件或目录：'input.conf'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:24:14.203

假设您的语法是正确的（我认为您是转置文件的名称和扩展名），您只需要正确指定文件的位置，包括相对或绝对路径：

代替：

```
py.test --test_option=input.conf 
```

做：

```
py.test --test_option=api/input.conf 
```

# html - 在不使用锚点的情况下创建指向网页顶部的链接

> ID：11750862
> 
> 赞同：54
> 
> 时间：2012-08-01T00:14:35.583
> 
> 标签：html, anchor

我有一个 HTML 文档，目前有一些使用锚点指向页面顶部的链接

```
<body id="topofpage">
   ...
   <a href="#topofpage">Go to top</a> 
```

但是，我不喜欢创建一个无用的 id 以及单击链接后“#topofpage”如何显示在 URL 中。在不使用 Javascript 的情况下，我还能做些什么来链接到页面顶部？我尝试完全删除锚点，`<a href="">`但这会导致页面刷新。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-08-01T02:22:40.030

[根据 HTML5](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-href)规范，空片段`#`和特殊片段`#top`将链接到页面顶部。

```
<a href="#">Go to top</a>

<a href="#top">Go to top</a> 
```

如果您使用这些特殊的片段名称，则无需创建匹配的锚点。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-01T00:23:27.200

您可以尝试使用 javascript

`<a onclick="scroll(0,0)">`

或者你可以使用 jQuery

```
$("#Top").click(function(){
 scroll(0,0);
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-01T02:32:40.113

I know that you said without using JavaScript, but I think that is really the only way to avoid using a real anchor. The following jQuery will replace anchors with the `#top` href and perform a nice animated scroll to the top without the URL changing (see the [original author](http://www.electrictoolbox.com/jquery-scroll-top/)'s page for more info).

```
$(document).ready(function() {
    $('a[href=#top]').click(function(){
        $('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });
}) 
```

[jsfiddle for completeness](http://jsfiddle.net/bYZaG/)

However, I would stick with [semantic HTML](http://en.wikipedia.org/wiki/Semantic_HTML) and use anchors for their purpose so that the proper meaning can be interpreted by the maximum number of browsers. Don't forget about people with disabilities that require screen readers or other special browsers. Anchors are guaranteed to work.

In addition to that, Google [announced in 2009](http://googlewebmastercentral.blogspot.ca/2009/09/using-named-anchors-to-identify.html) some new indexing features that directly take advantage of in-page anchors to provide additional context that the Web searcher might be looking for. In many cases, there might be a section of a page that a user is very interested in. Google can provide a direct link to that anchor of the page for optimum relevance.

Bottom line from my point of view - don't dis the anchors. Use them.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-22T02:41:14.000

另一种使用锚标记获取页面顶部的有用方法是

```
<a href='#top'> Go back to the top of the page.</a> 
```

像这样使用它会使您的页面自动滚动到当前页面的顶部。希望这对某人有用。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-08-01T15:22:41.710

`<a href="?">top</a>`会带你到那里。

# android - 在模拟器中启动 android 应用程序后，Eclipse 箭头键不起作用。为什么？

> ID：11750863
> 
> 赞同：1
> 
> 时间：2012-08-01T00:14:37.653
> 
> 标签：android, eclipse, android-emulator, editor

我正在学习使用 Eclipse 开发 Android 应用程序。一旦我在 android 模拟器中启动了我的应用程序（使用 Eclipse 中的运行按钮），我似乎无法再编辑我的任何源文件。箭头键在源文件中也不起作用。

为什么会这样，我怎样才能让箭头键和编辑工作？

我怀疑这可能是因为应用程序正在运行。但是，即使在我使用 DDMS 杀死在模拟器中运行的应用程序后，这种行为仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:20:03.157

我似乎记得这件事在某个阶段发生在我身上，但我这辈子都不记得那是什么了！！是否有在某处显示的日食对话框？尝试最小化 eclipse 或寻找运行应用程序时出现的对话框。或者，尝试将 android 插件更新到更高版本，以防这是他们已修复的错误。

# jquery - 用作提交时的表单值

> ID：11750865
> 
> 赞同：0
> 
> 时间：2012-08-01T00:14:44.103
> 
> 标签：jquery, ruby-on-rails, forms, html, twitter-bootstrap

我试图找出在`type=button`表单提交上显示按钮的“最佳”方法。这些不是提交按钮，但它们确实会触发一些用于计算的 js，但我还需要发布它们的名称和值。

我想我也可以有一个同名的复选框，jquery 更新这个选中的状态，但这似乎不专业，我还必须隐藏复选框。

**有没有一个优雅的解决方案？**

使用 Twitter Bootstrap、jquery、Ruby on Rails。

这种方法的主要目标是有几个大按钮作为复选框，以便在平板电脑等上轻松使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:19:40.063

恕我直言，隐藏输入没有什么不专业的。如果你不想隐藏复选框，你可以使用`type="hidden"`

工作[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/X5Gmy/)

```
<button type="button" data-name="myName" class="btn" data-toggle="btn-input" data-target="#myButtonState" value="myValue">Click me</button>
<input type="hidden" id="myButtonState" /> 
```

```
$('[data-toggle="btn-input"]').each(function() {
    var $this = $(this);
    var $input = $($this.data('target'));
    var name = $this.data('name');
    var active = false;                  // Maybe check button state instead
    $this.on('click',function() {
        active = !active;

        if(active) $input.attr('name', name).val($this.val());
        else       $input.removeAttr('name');

        $this.button('toggle');
    });
}); 
```

模仿复选框状态（`removeAttr`无论是否提交）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:46:44.270

您可以使用 ajax 来达到您的目的。在视图中，您只有一个带有文本框的按钮，输入一些输入并单击该按钮。IN Jquery onclick 方法被调用，值作为 ajax 传递，您的计算可以进行，结果存储在数据库中（如果需要）。

您的视图代码应该是这样的

```
<input type="button" id="submitt">
<div id="myDiv"> </div> 
```

你的jquery代码应该是这样的

```
 var content = '';
$(document).ready(function() {  
 $('#submitt').click(function(){

// do some calculations and store it in a variable nm
        $.ajax({url:"demo/"+nm, success:function(result){         
           myFunction(result);
           $("#myDiv").html(content);  // To output the result           
       }});
        return false;
});
});

    function myFunction(result)
{
             content = '';
            for (var i = 0; i < result.length; i++) {
                content += result[i].name;
                content += '<br/>';
            }
} 
```

在路由文件中

```
match 'demo/:nm' => 'demo#newsy' 
```

最后在控制器文件中

```
def newsy
    @name = request["nm"]  
    new_emp = Client.new
    new_emp.name = @name
    new_emp.save
    @myys = Client.all
    render :json => @myys
end 
```

# php - 图片上传php的问题：未定义的索引

> ID：11750866
> 
> 赞同：0
> 
> 时间：2012-08-01T00:15:10.587
> 
> 标签：php, mysql, image, undefined

我无法让图像上传功能在以下代码上工作，并出现以下错误消息：

*'第 135 行的脚本'/database.php' 中发生错误：未定义的索引：图像'*

这是这部分： **'if (is_uploaded_file ($_FILES ['image']['tmp_name'])) {'**

我之前做过一些 php/mysql 表单，但这是我第一次尝试使用图像上传。如果可能的话，我正在使用仅允许 pdf 和 jpeg 并将上传限制为 1.5 兆的表单。

表格的其余部分工作正常，除此之外，我已将服务器上上传文件夹上的 CHMOD 更改为 777。有什么想法或建议吗？

```
<?php # index.php
require_once ('./includes/config.inc.php');
$page_title = 'N-Club Battery: Add a Sale';
include ('./includes/header.html');
if (!isset($_SESSION['sp_user_id'])) {
$url = 'http://' . $_SERVER['HTTP_HOST']
. dirname($_SERVER['PHP_SELF']);
if ((substr($url, -1) == '/') OR (substr($url, -1) == '\\') ) {
$url = substr ($url, 0, -1); // Chop off the slash.
}
$url .= '/login.php'; 
ob_end_clean(); // Delete the buffer.
header("Location: $url"); 
exit(); // Quit the script.
}
$users = $_SESSION['sp_user_id'];
?>
<h1>Heading</h1>
<?php
if (isset($_POST['submitted'])) {// Handle the form.
require_once ('/database.php');
$errors = array(); // Initialize error array.

// Check for a quantity.
if (empty($_POST['npc_quantity'])) {
$errors[] = '<p>• You forgot to enter the Quantity.</p>';
} else {
$quantity = escape_data($_POST['npc_quantity']);
}

// Check for a customer name.
if (empty($_POST['npc_customer_name'])) {
$errors[] = '<p>• You forgot to enter the Customer Name</p>';
} else {
$customers = escape_data($_POST['npc_customer_name']);
}

// Check for an registration number
if (empty($_POST['npc_registration_no'])) {
$errors[] = '• You forgot to enter the Customer Rego Number.';
} else {
$rego = escape_data($_POST['npc_registration_no']);
}

// Check for an SUO number
if (empty($_POST['npc_suo_no'])) {
$errors[] = '• You forgot to enter the SUO Number';
} else {
$suo_no = escape_data($_POST['npc_suo_no']);
}

// Check for an A-Club number
if (empty($_POST['npc_amb_club_no'])) {
$errors[] = '• You forgot to enter the A-Club Number';
} else {
$amb_no = escape_data($_POST['npc_amb_club_no']);
}

// Check for a Repair Order
if (empty($_POST['npc_repair_order'])) {
$errors[] = '• You forgot to enter the Repair Order';
} else {
$rep_no = escape_data($_POST['npc_repair_order']);
}

// Check for a Invoice Number.
if (empty($_POST['npc_invoice_no'])) {
$errors[] = '<p>• You forgot to enter the Invoice Number.</p>';
} else {
$inv = escape_data($_POST['npc_invoice_no']);
}

// Check for a userdate.
if (empty($_POST['npc_entry_userdate'])) {
$errors[] = '<p>• You forgot to enter the entry userdate.</p>';
} else {
$inv_date = escape_data($_POST['npc_entry_userdate']);
}

// Check for an image.
if (is_uploaded_file ($_FILES ['image']['tmp_name'])) {
if (move_uploaded_file($_FILES ['image']['tmp_name'], 
"/uploadsfolder/{$_FILES['image']['name']}")) { // Move the file over.

echo '<p>The file has been uploaded!</p>';

} else { // Couldn't move the file over.
echo '<p><font color="red"> The thumbnail image could not be uploaded.</font></p>';
$i = FALSE;
}
$i = $_FILES['image']['name'];
} else {
$i = FALSE;
}

if (empty($errors)) { 

$uid = @mysql_insert_id(); 

// Add the user.
$query = "INSERT INTO npc_sales_list 
(npc_item_id , sp_user_id, npc_battery_n_code, npc_battery_other_code, npc_quantity , 
npc_customer_name, npc_registration_no , npc_suo_no, npc_amb_club_no , npc_repair_order, 
npc_invoice_no, npc_entry_userdate, npc_image_upload, npc_usertype, 
npc_points, npc_bonus_points, npc_entry_date) VALUES
('$uid', '$users', '$_POST[npc_battery_n_code]' , 
'$_POST[npc_battery_other_code]' , '$quantity' , '$customers', 
'$rego' , '$suo_no' , '$amb_no', '$rep_no', '$inv', '$inv_date', 
'$i' , Battery' , '5' , '0' , NOW())";
$result = @mysql_query ($query); // Run the query.

if (mysql_affected_rows() == 1) {

//Finish the page.
echo '<p>The sale with invoice number: <strong>' . $inv . '</strong><br />
is now registered into the system.</p>';
include ('./includes/footer.html'); // Include the HTML footer.
exit();

} else { // If it did not run OK.
echo '<p><font color="red" size="+1">You could not be
registered due to a system error. We apologize for any
inconvenience.</font></p>';
}

} else { // If one of the data tests failed.
echo '<p><font color="red" size="+1">Please check all mandatory fields are complete and try again.
</font></p>';
}

mysql_close(); // Close the database connection.

} // End of the main Submit conditional.
?>                          

<form action="logsales.php" method="post">

<table width="520" border="0" cellspacing="3" cellpadding="2">

<tr>
<td><div align="right">N-Club Battery No<span class="style2">*</span></div></td>
<td>            
<select  name="npc_battery_n_code" id="npc_battery_n_code">
<option value="None" <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == 'None') 
{echo 'selected="selected"';} ?>>None</option>
<option value="55D23L" <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '55D23L') 
{echo 'selected="selected"';} ?>>55D23L</option>
<option value="55D23R" <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '55D23R') 
{echo 'selected="selected"';} ?>>55D23R</option>                                
<option value="75D23R" <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '75D23R') 
{echo 'selected="selected"';} ?>>75D23R</option>
</select>
</td>
</tr>  

<tr>
<td width="184"><div align="right">Other Battery No<span class="style2">*</span></div></td>
<td width="323">
<select  name="npc_battery_other_code" id="npc_battery_other_code">
<option value="None"  <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == 'None') 
{echo 'selected="selected"';} ?>>None</option>
<option value="3"  <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '3') 
{echo 'selected="selected"';} ?>>3</option>
<option value="26" <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '26') 
{echo 'selected="selected"';} ?>>26</option>                                                               
<option value="29" <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '29') 
{echo 'selected="selected"';} ?>>29</option>
<option value="30" <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '30') 
{echo 'selected="selected"';} ?>>30</option>
</select></td>
</tr>

<tr>
<td><div align="right">Quantity <span class="style2">*</span></div></td>
<td><input type="text" name="npc_quantity" size="10" maxlength="10" 
value="<?php if (isset($_POST['npc_quantity'])) echo $_POST['npc_quantity']; ?>" /></td>
</tr>

<tr>
<td><div align="right">Customer Name <span class="style2">*</span></div></td>
<td><input type="text" name="npc_customer_name" size="30" maxlength="30" 
value="<?php if (isset($_POST['npc_customer_name'])) echo $_POST['npc_customer_name']; ?>" /></td>
</tr>

<tr>
<td><div align="right">Customer Rego number <span class="style2">*</span></div></td>
<td><input type="text" name="npc_registration_no" size="10" maxlength="7" 
value="<?php if (isset($_POST['npc_registration_no'])) echo $_POST['npc_registration_no']; ?>" /></td>
</tr>

<tr>
<td><div align="right">SUO Number <span class="style2">*</span></div></td>
<td><input type="text" name="npc_suo_no" size="20" maxlength="30" 
value="<?php if (isset($_POST['npc_suo_no'])) echo $_POST['npc_suo_no']; ?>" /></td>
</tr>

<tr>
<td><div align="right">A-Club ID <span class="style2">*</span></div></td>
<td><input type="text" name="npc_amb_club_no" size="20" maxlength="30" 
value="<?php if (isset($_POST['npc_amb_club_no'])) echo $_POST['npc_amb_club_no']; ?>" /></td>
</tr>

<tr>
<td><div align="right">Repair Order<span class="style2">*</span></div></td>
<td><input type="text" name="npc_repair_order" size="20" maxlength="30" 
value="<?php if (isset($_POST['npc_repair_order'])) echo $_POST['npc_repair_order']; ?>" /></td>
</tr>

<tr>
<td><div align="right">Invoice Number <span class="style2">*</span></div></td>
<td><input type="text" name="npc_invoice_no" size="20" maxlength="30" 
value="<?php if (isset($_POST['npc_invoice_no'])) echo $_POST['npc_invoice_no']; ?>" /></td>
</tr>

<tr>
<td><div align="right">Date of Invoice <span class="style2">*</span></div></td>
<td><input type="text" name="npc_entry_userdate" size="20" maxlength="10" 
value="<?php if (isset($_POST['npc_entry_userdate'])) echo $_POST['npc_entry_userdate']; ?>" /></td>
</tr>

<tr>
<td></td>
<td>
<span class="sml_italics">MM-DD-YYYY </span></td>
</tr>

<tr>
<td><div align="right">Invoice copy<span class="style2">*</span></div></td>
<td> 
<input type="file" name="image"  size="30" maxlength="60" /> <br />
</td>
</tr>

<tr>
<td></td>
<td><input type="submit" name="submit" value="Submit" /></p><input type="hidden" name="submitted" value="TRUE" />
&nbsp;</td>
</tr>
</table>

</form>

<p>footer</p>

<?php
include ('./includes/footer.html');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:16:59.690

你`<form>`没有`enctype`属性。

```
<form action="logsales.php" method="post"> 
```

它需要是：

```
<form action="logsales.php" method="post" enctype="multipart/form-data"> 
```

没有它，您的浏览器不知道如何将文件发送到您的服务器，因此没有`enctype`，它将无法工作。更多信息可在[W3](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-07T18:46:51.743

还要在您的上方添加另一个 if 条件，`if (is_uploaded_file ($_FILES ['image']['tmp_name']))`如下所示：

```
if (isset($_FILES['image']) && $_FILES['image']['tmp_name'] != ''){
  if(is_uploaded_file($_FILES['image']['tmp_name'])){  
  ................your logic here.............
  }
} 
```

# encryption - PGP/GPG 使用不同的密钥大小进行签名和加密

> ID：11750867
> 
> 赞同：-1
> 
> 时间：2012-08-01T00:15:15.550
> 
> 标签：encryption, gnupg, pgp

使用 gpg/pgp 加密文件时是否可能或兼容，我们的客户端使用 1024 位密钥（他们的私钥）对其进行签名，然后使用我们的 2048 位公共密钥对其进行加密？

这会导致任何问题吗？

谢谢，埃卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:44:57.890

Nope, no issues. The operations are completely separate. The signature is encrypting a hash of the message, and the encryption of the result operates on the message + hash combination as a single message. Nothing requires the key lengths to be related.

That said, 1024 bit keys are a bit short in the bits and long in the tooth. You should encourage them to upgrade to 4096 bit keys at their next opportunity.

# ios - iOS IBOutlet 项目未分配

> ID：11750870
> 
> 赞同：0
> 
> 时间：2012-08-01T00:15:39.620
> 
> 标签：ios, iboutlet

我在我的 xib 文件中设置了一堆 IBOutlet 项目，但后来我的程序发现它们都没有被分配。这是为什么？

在什么情况下不分配 IBOutlet 项目？仍然为此挠头。

它是内存不足并且不想分配吗？

这发生在 UIViewController 上。但是，如果我切换 UIView 它不会发生。

但我需要一个 UIViewCOntroller。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:19:11.737

你在某个地方犯了一个错误。您确定已将 IB 中的视图连接到它们的插座吗？你确定你保留了所有的插座属性（或者，如果在 ARC 下，它们是强大的属性）？你合成了所有的outlet属性了吗？

# php - 使用 php 将自定义标签添加到 DOMDocument

> ID：11750873
> 
> 赞同：3
> 
> 时间：2012-08-01T00:15:58.527
> 
> 标签：php, domdocument

也许我在谷歌搜索错误的关键字，但没有办法添加自定义标签，以便 DOMDocument 可以找到自定义标签。当我的 html 文件出现很多错误时，当然 getElementsByTagName 什么也不返回。

```
$dom = new DOMDocument();
$html = $dom->loadHTMLFile('my html file');
$dom->getElementsByTagName('un_welcome_text'); 
```

不会失败。我意识到这不是最佳实践，但是我必须解析的这段代码是无法更改的遗留代码。

html看起来像，我必须得到之间的一切

```
 <body>
   <u_top></u_top>
      <u_welcome_text>
       A BUNCH OF HTML
      </u_welcome_text>        
 </body> 
```

# javascript - Javascript str_replace 在正则表达式中使用“加号”和“减号”字符

> ID：11750874
> 
> 赞同：2
> 
> 时间：2012-08-01T00:16:00.900
> 
> 标签：javascript, regex, str-replace

我需要在所有实例中替换字符串中的两个不同字符，所以我找到了这个答案

```
<script type="text/javascript">
   var filter_out = eval("/1|3/ig");
   var myvar = "1 2 3";
   alert(myvar.replace(filter_out, "-"));
</script>

// - 2 - 
```

它有效，但是这个无效：

```
<script type="text/javascript">
   var filter_out = eval("/\+|\-/ig");
   var myvar="+ 2 -";
   alert(myvar.replace(filter_out, "-"));
</script>

//SyntaxError: invalid quantifier: /+|-/ig 
```

没关系，我喜欢它的工作原理，如果我使用

```
var filter_out = eval("/\\+|\\-/ig"); 
```

有人可以解释为什么它必须是双\？我也知道“g”代表全局 - 所有出现，“i”代表什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:19:27.560

不要使用 eval，使用[`RegExp`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/)对象：

```
var myvar = '+ 2 -';
alert(myvar.replace(/\+|\-/ig, '-')); 
```

结果：`- 2 -`

`i`意味着它将忽略大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:24:24.940

不要把你的`RegExp`内引号。那你就不需要了`eval`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:26:29.087

如前所述，尽量避免在正则表达式中使用字符串。虽然它看起来更清晰（我个人喜欢看 RegExp，因为它更清晰），但使用速记符号 /exp/switches 时遇到的问题会更少。

您可以在 RegExp 中使用三个（一个非常少见的）开关：

1.  i: 忽略大小写
2.  g：全局（多个匹配）
3.  m：多行（有时对于带有换行符的字符串是必需的）

注意：不要为此使用 eval()。事实上，您可能不应该在代码中的任何地方使用 eval —— 我想我已经有十年没有在 JS 中使用过它了。几乎总是不需要它（有些库在必要时会谨慎使用它）。

# javascript - 茉莉花中“上下文”和“触发器”的分离

> ID：11750876
> 
> 赞同：3
> 
> 时间：2012-08-01T00:16:18.240
> 
> 标签：javascript, bdd, jasmine, mspec, jasmine-jquery

假设我有一个简单的页面，通过单击页面标题来切换页面内容的可见性（现实吗？不，但这是一个包含 DOM 元素的简单测试）。我会为您省去 HTML 和 JS 实现，因为我相信您会在脑海中看到它。

我正在尝试使用 jasmine 对此进行测试，但遇到了代码重复问题，主要是围绕上下文的分离（此测试与它的兄弟不同）和触发器（正在测试的操作和捕获结果)

```
describe("Home", function () {
    describe("Selecting the page title", function () {
        beforeEach(function () {
            loadFixtures('Home.fixture.htm');
        });

        describe("when page content is visible", function () {
            it("should hide page content", function () {
                $('#pageTitle').trigger('click');

                expect($('#pageContent')).toBeHidden();
            });
        });

        describe("when page content is hidden", function () {
            it("should show page content", function () {
                $('#pageContent').hide();
                $('#pageTitle').trigger('click');

                expect($('#pageContent')).toBeVisible();
            });
        });
    });
}); 
```

如何将*触发器*（在这种情况下引发“点击”）与*上下文*（共享 = 加载夹具，特定 = 隐藏页面内容）分开以避免代码重复？

如果有帮助，这就是我在 MSpec（.NET 的上下文/规范框架）中要做的事情：

```
[Subject("Home")]
class when_selecting_the_page_title_when_page_content_is_visible : HomeContext
{
    It should_hide_page_content = () =>
        // Assert that page content is hidden
}

[Subject("Home")]
class when_selecting_the_page_title_when_page_content_is_hidden : HomeContext
{
    Establish context = () =>
        // Hide page content

    It should_show_page_content = () =>
        // Assert that page content is visible
}

class HomeContext
{
    Establish context = () =>
        // Load the fixture

    Because of = () =>
        // Fire the event
} 
```

免责声明：我不想在这里争论 C# 与 Javascript 或 MSpec 与任何东西，这只是为了提供我所追求的代码重用示例。我还跳过了 MSpec 的一些功能以保持示例简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:30:35.323

这就是为什么 describe 块可以嵌套，并且`beforeEach()`可以在仅适用于该级别及以下的任何级别调用。

我不会太担心测试中的代码重复。更多的间接意味着更少的可读性。在合理的范围内，测试中的冗长通常是一件好事。太多特定的宏函数只适用于你的代码的一小部分，你最终会得到一个巨大的脆弱测试球，很少有人能弄清楚如何改变。

```
describe("Home", function () {
    describe("Selecting the page title", function () {
        beforeEach(function () {
            loadFixtures('Home.fixture.htm');
        });

        describe("when page content is visible", function () {
            beforeEach(function() {
                $('#pageTitle').trigger('click');
            });

            it("should hide page content", function () {
                expect($('#pageContent')).toBeHidden();
            });
        });

        describe("when page content is hidden", function () {
            beforeEach(function() {
                $('#pageContent').hide();
                $('#pageTitle').trigger('click');
            });

            it("should show page content", function () {
                expect($('#pageContent')).toBeVisible();
            });
        });
    });
}); 
```

或者，如果必须，在该描述块中设置一个辅助宏函数，但这会很快变得丑陋。它开始在你的测试中加入太多的逻辑。最终，您需要为您的测试进行测试。哟呸...

```
describe("Home", function () {
    describe("Selecting the page title", function () {
        beforeEach(function () {
            this.loadHomeFixture = function(options) {
                options = options || {};
                loadFixtures('Home.fixture.htm');
                if (options.hidden) {
                    $('#pageContent').hide();
                }
            };
        });

        describe("when page content is visible", function () {
            it("should hide page content", function () {
                this.loadHomeFixture({ hidden: false });
                expect($('#pageContent')).toBeHidden();
            });
        });

        describe("when page content is hidden", function () {
            it("should show page content", function () {
                this.loadHomeFixture({ hidden: true });
                expect($('#pageContent')).toBeVisible();
            });
        });
    });
}); 
```

此外，有时我会先按状态组织测试，然后再按特征组织测试。允许您更清晰地将初始状态与操作分开。

以下是您可以如何以大纲形式执行此操作。

*   家
    *   `beforeEach: load home fixture`
    *   当页面内容可见时
        *   `beforeEach: make content visible`
        *   选择页面标题
            *   `beforeEach: click page title`
            *   应该隐藏页面内容
                *   `assert page content is hidden`
        *   *当页面内容可见时执行某些操作的其他操作*
    *   当页面内容被隐藏时
        *   `beforeEach: make content hidden`
        *   选择页面标题
            *   `beforeEach: click page title`
            *   应该显示页面内容
                *   `assert page content is visible`
        *   *隐藏页面内容时执行的其他操作*

这种结构允许您根据初始状态进行深入研究，因此如果您有更多依赖于页面可见性的功能，则很容易测试这些功能，因为您已经有一个具有该状态设置的位置，您可以在其中删除新测试。

虽然测试可能更像是一个矩阵（状态 × 特征），但大多数测试系统给了我们一棵树。是否按状态或功能从该树分支取决于您，并且取决于哪个具有更高的复杂性。

# switch-statement - Switch 语句总是解析为默认值而不是大小写

> ID：11750881
> 
> 赞同：3
> 
> 时间：2012-08-01T00:16:50.033
> 
> 标签：switch-statement, d, evaluate

所以我最近一直在尝试 D，因为我认识的许多程序员都建议我通过 C++ 学习它。

我正在使用 DMD Compiler v2.057，这是我的代码：

```
while(cliLoopC)
{
    write("?> ");
    string iPt_ = std.string.tolower(readln());
    switch (iPt_)
    {
        default: writeln(E_URECCOM); break;
        case "test":
            writeln("Hello!");
            break;
    }
} 
```

该程序是，每当我输入 时`test`，它应该转到`case`而不是`default`，它只打印 E_URECCOM 的内容（这是一个包含 的常量 char[] `UNRECOGNISED COMMAND\n`）。

我看不出发生了什么让它这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T00:25:01.560

是的，在 readln 的末尾有一个 \n。尝试使用`std.string.strip(readln());`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T00:21:30.320

嗯...我还没有尝试过 D，但也许 readln() 在字符串末尾包含了 CR、LF 或 CR/LF，它应该包含在比较字符串中吗？

案例“测试\ n”：

?

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T00:19:23.783

编辑： [Adam D. Ruppe](https://stackoverflow.com/users/1457000/adam-d-ruppe)的答案是正确的答案：

> 是的，在 readln 的末尾有一个 \n。尝试使用 std.string.strip(readln());

我只是想把它扔在那里，因为我的答案仍然有支票

我的回答：默认情况是包罗万象的情况，所以最后看起来最好（并且是常规的）

像这样

```
while(cliLoopC)
{
    write("?> ");
    string iPt_ = std.string.tolower(readln());
    switch (iPt_)
    {
        case "test":
            writeln("Hello!");
            break;
        default: writeln(E_URECCOM); break;
    }
} 
```

# php - php echo 无法打印

> ID：11750888
> 
> 赞同：0
> 
> 时间：2012-08-01T00:17:56.470
> 
> 标签：php, linux, echo

我是 PHP 新手。我正在Redhat下开发php。

index.html 是这样的：

```
<?php
    $myvar="AAAA";
    echo $myvar;
?> 
```

但是浏览器中没有任何输出。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:19:20.650

将文件重命名为 index.php，它应该可以工作。

如果这样可以解决问题，则问题是网络服务器（可能是 Apache）知道 .php 文件应该用 PHP 呈现，但它正确地忽略了 .html 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T00:19:46.643

据我所知，该文件被解释为 HTML 而不是 PHP。如果您看到页面的源代码，您将看到您的 PHP 代码。尝试将文件重命名为 index.php，如果您的服务器设置正确，它应该会解释 PHP 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:38:57.140

将文件扩展名从 .html 更改为 .php，您的代码将正常工作。

# php - 如何使用 mysql 在表中获取最大总和

> ID：11750889
> 
> 赞同：0
> 
> 时间：2012-08-01T00:18:05.623
> 
> 标签：php, mysql

我有一个带有如下表的 SQL 数据库：

```
ObjID 评级
123 1
333 0
123 0
123 1
567 1

```

一个 Ojbect ID 可以以不同的评级多次出现在表中，我需要一种方法来选择一个“不同的”ObjID 检查它的所有评级并将其与所有其他“不同的”ObjID 进行比较并比较这些评级。最后，我应该拥有所有评分最高的第 1 至第 3 个 ObjID，在此示例中，将打印出 123、567 和 333。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:21:49.693

那么每个对象的评分是表中该对象的所有评分的总和吗？

```
SELECT ObjID, SUM(Rating) AS TotalRating
FROM ObjectTable
GROUP BY ObjID
ORDER BY SUM(Rating) DESC
LIMIT 3 
```

# php - 如何在 htacess 中调用 $_GET 变量并解析 url 时回显文本？

> ID：11750890
> 
> 赞同：2
> 
> 时间：2012-08-01T00:18:08.027
> 
> 标签：php, html

我试图弄清楚如何在使用该`$_GET`功能单击链接时回显一行文本。这是我现在所拥有的：

```
<nav>
<ul>
    <li>
    <a href="?action=albums">Albums</a>
    </li>
    <li>
    <a href="?music">Music</a>
    </li>
</ul>
</nav>

<?php
if(isset($_GET['action']) && $_GET['action']=='albums'){
echo'<h1>Albums</h1>';
}
?> 
```

这是我的 htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /lr/profile.php?username=$1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T00:22:51.600

如果该代码不是 的一部分`index.php`，或者同样无法在 访问`http://yourhost/`，它将无法工作，因为`<a href="?action=albums">`不会转到您所在的任何文件，它会转到根目录。试试`<a href="<?php echo $_SERVER['SCRIPT_NAME']; ?>?action=albums">Albums</a>`。

如果您有一个`.htaccess`文件，请确保您`RewriteRule`的文件`[QSA]`末尾也有。此外，如果您使用s，`SCRIPT_NAME`代码将不起作用，因为您可以获得 PHP 脚本的真实文件名。`RewriteRule``SCRIPT_NAME`

# rrdtool - 转储和更新内存中的 RRD 文件

> ID：11750894
> 
> 赞同：1
> 
> 时间：2012-08-01T00:19:07.623
> 
> 标签：rrdtool, rrd

有没有办法在内存中转储和更新 rrd 文件。我知道我们可以将其转储为 xml 文件，然后读取 + 更新 + 将其恢复为 rrd。但这对我来说不是一种有效的方法，因为我可能必须更新/纠正大量“旧数据” [我参考这个讨论](https://stackoverflow.com/a/11573983/1413892)

它的文档页面将守护进程地址作为参数进行讨论，我可以使用它来更新内存中的 rrd 数据吗？我如何从守护进程读取数据？

```
 rrdtool dump --daemon unix:/var/run/rrdcached.sock /var/lib/rrd/foo.rrd 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:50:38.780

您可以通过一组管道转储/恢复，使用过滤程序修改数据......

```
rrdtool dump old.rrd - | filter | rrdtool restore - new.rrd 
```

如果您打算实际使用转储版本，您也可以转储到 tmpfs 分区。

# php - 如何计算我们在表中的行数

> ID：11750901
> 
> 赞同：-2
> 
> 时间：2012-08-01T00:19:47.403
> 
> 标签：php, mysql, pdo

我只是想计算表中的总行数。

我将把这个数字放在我网站侧边栏中类别名称右侧的括号中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T00:21:14.817

在 SQL 中

```
 SELECT COUNT(*) FROM your_table 
```

从 PHP

```
 $result = mysql_query('SELECT COUNT(*) AS count FROM your_table');
  $row = mysql_fetch_assoc($result);
  $count = $row['count']; 
```

或者，如果您要使用 PDO（没有准备好的语句）

```
 $count = (int) $pdo->query('SELECT COUNT(*) FROM your_table')->fetchColumn(); 
```

然后简单地回显它

```
 echo '(Rows: ' . $count . ')'; 
```

或者，如果您想花哨地使用`printf`

```
 printf('(Rows: %d)', $count); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:06:06.167

也可以使用 mysql_num_rows() 函数以另一种方式从 PHP 执行此操作。

例子：

```
$result = mysql_query('SELECT id FROM your_table');
$count = mysql_num_rows($result); 
```

# ruby - Ruby 多线程问题

> ID：11750903
> 
> 赞同：3
> 
> 时间：2012-08-01T00:19:54.110
> 
> 标签：ruby, multithreading

我已经开始研究 Ruby 中的多线程。

所以基本上，我想创建几个线程，并让它们全部执行，但在线程成功完成之前不显示任何输出。

例子：

```
#!/usr/bin/env ruby

t1 = Thread.new {
puts "Hello_1"
sleep(5)
puts "Hello_1 after 5 seconds of  sleep"
}

t2 = Thread.new {
puts "Hello_2"
sleep(5)
puts "Hello_2 after 5 seconds of  sleep"
}

t1.join
t2.join

puts "Hello_3"
sleep(5)
puts "Hello_3 after 5 seconds of  sleep" 
```

第一个 Hello_1 / Hello_2 立即执行。在线程成功完成之前，我不希望显示任何输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T00:24:57.587

因为将打印输出到单个输出流 (sysout)，所以如果要捕获每个线程的输出，则不能使用它。

您必须为每个线程使用单独的缓冲流，在每个线程中写入，然后在线程终止时将它们转储到 sysout 以查看输出。

下面是一个线程示例：

```
t = Thread.new() do
  io = StringIO.new
  io << "mary"
  io.puts "fred"
  io.puts "fred"
  puts io.string
end 
```

您必须将 io 传递给线程中的每个方法。

或者看看[这个](https://web.archive.org/web/20130220015140/http://blog.segment7.net/2006/08/16/setting-stdout-per-thread)创建一个为线程重定向标准输出的模块。

但是在您开始包装代码的每个线程中：

```
Thread.start do
  # capture the STDOUT by storing a StringIO in the thread space
  Thread.current[:stdout] = StringIO.new
  # Do your stuff.. print using puts
  puts 'redirected to StringIO'
  # print everything before we exit
  STDIO.puts Thread.current[:stdout].string
end.join 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:21:24.047

您可以共享缓冲区，但您应该“同步”对它的访问：

```
buffer = ""
lock = Mutex.new

t1 = Thread.new {
lock.synchronize{buffer << "Hello_1\n"}
sleep(5)
lock.synchronize{buffer << "Hello_1 after 5 seconds of  sleep\n"}
}

t2 = Thread.new {
lock.synchronize{buffer << "Hello_2\n"}
sleep(5)
lock.synchronize{buffer << "Hello_2 after 5 seconds of  sleep\n"}
}

t1.join
t2.join

puts buffer 
```

# php - 在 foreach 循环中输出 XML 项

> ID：11750908
> 
> 赞同：0
> 
> 时间：2012-08-01T00:20:47.650
> 
> 标签：php, loops, foreach

```
try{
    #connection string
        // $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=mycooldb',array(PDO::ATTR_PERSISTENT => true));
        $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=mycooldb','root','toshiba1',array(PDO::ATTR_PERSISTENT => true));
        $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=1 and leagID=20");
    #call stored proc
        $q->execute();
    #get the rows into an array
        $result = $q->fetchAll();
        $newsStory = array();
    foreach($result as $r){
        while($xmlUrl = $r['FW_ArtSrcLink']){
            // WHILE there is a link out of 11 matching the $dbconn above, load XML file and convert to channel->item
            $ConvertToXml = simplexml_load_file($xmlUrl);
            $newsStory[] = $ConvertToXml->channel->item;
            # -> Setup XML
        } //while
    }
    # -----> Load News Stories
        for($i = 0;$i<sizeof($newsStory); $i++){
            //// judging by your code, these are the things you wanted to echo
            # Source of Article Info-->
            echo $newsStory[$i]->item->title;
            echo $newsStory[$i]->item->link;

            # Actual News Article Info -->
            echo $newsStory[$i]->item->title;
            echo 'desc: '.$newsStory[$i]->item->description;
        }   // for()
} // try 
```

我需要上面代码的帮助。$ 查询有 11 个结果`dbconn`，但我需要加载每个结果并进行转换，`simplexml_load_file();`以便也可以加载具有 15-20 个链接的所有 11 条记录。总计约 *15*11= 165 个链接*

```
foreach($result as $r){
            while($xmlUrl = $r['FW_ArtSrcLink']){
                // WHILE there is a link out of 11 matching the $dbconn above, load XML file and convert to channel->item 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:50:09.927

您在 for 循环中启动了一个不需要的 foreach 循环，将其删除并将对变量 $story 的分配更改为回声。

```
////// modify your example code as follows:

# -----> Load News Stories

    //// if you haven't already, this is the place to send the content-type text/xml header
    header( "Content-Type: application/xml" ); //// if you've already sent this, then comment out this line
    //// note, many browsers will not display raw xml if it has not been styled - you may have to "view source" to see the xml - this is normal
    //// if you omit this header, the browser will probably assume it got text/HTML instead.

    for($i = 0;$i<sizeof($newsStory); $i++){

    //// judging by your code, these are the things you wanted to echo
# Source of Article Info-->
        echo $newsStory[$i]->title;
        echo $newsStory[$i]->link;

# Actual News Article Info -->
        echo $newsStory[$i]->title;
        echo $newsStory[$i]->description;

        //// foreach ($newsStory[$i] as $story){ //// remove this loop, you do not need it - the for($i) loop is already iterating through your news stories. :)

    }   // for() 
```

# oop - PHP将类属性设置为类定义中的std对象

> ID：11750909
> 
> 赞同：1
> 
> 时间：2012-08-01T00:20:48.943
> 
> 标签：oop, class, std, php

PHP中的类定义有没有办法将属性设置为具有设置属性的STD对象？

我在想你可以键入 cast 但它不允许用于类定义中的属性。

```
//example.
class Foo{
   private static $Obj = (object) ['bizz', 'bazz'];
} 
```

这将触发此错误：

`Parse error: syntax error, unexpected '(object)' (object) (T_OBJECT_CAST)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:27:06.790

您不能在声明期间为类属性分配非常量值。来自[http://php.net/language.oop5.properties](http://php.net/language.oop5.properties)

> ...初始化必须是一个常量值——也就是说，它必须能够在编译时进行评估，并且不能依赖运行时信息才能进行评估。

您将需要使用类方法来初始化属性，例如

```
class Foo {
    private static $Obj;

    private static getObj() {
        if (null === self::$Obj) {
            self::$Obj = (object) ['bizz', 'bazz'];
        }
        return self::$Obj;
    } 
```

# java - Java/Android：当我放一个 ScrollView 时 - 我得到一个软键盘。不能做出好的布局

> ID：11750913
> 
> 赞同：1
> 
> 时间：2012-08-01T00:21:37.277
> 
> 标签：java, android, scrollview

我的布局有问题。我想在我的活动底部放置一个文本编辑器和一个按钮。然后我想要一个 TextView 组件来填充我活动布局上的所有可用空间。

我在 bigText 组件中有一个大文本，这就是我需要使用 ScrollView 的原因。

我有几个问题：

1.  我不明白，为什么我在放置 ScrollView 组件时会得到一个软键盘？但是如果没有滚动视图，我就没有这个键盘！如果我关闭软键盘，如下所示：

    ```
    getWindow().setSoftInputMode( WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN ); 
    ```

    那么我该如何使用我的 EditText？

2.  你能帮我布置一下吗？问题是：当我使用 ScrollView - 它填满了所有手机的显示屏时，我什至看到了我的按钮和 EditText，它们应该放在 ScrollView 下方（我看不到布局的完全底部）。我怎样才能解决这个问题？

这就是我的布局尝试失败：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/bigText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </ScrollView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Search string: " />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:gravity="center_vertical|center_horizontal" >
        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Go >>" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:36:34.523

我不确定为什么添加 ScrollView 会使软键盘弹出，但它很容易解决。像这样以编程方式将其关闭：

```
 InputMethodManager manager = (InputMethodManager)
  getSystemService(Context.INPUT_METHOD_SERVICE);
  IBinder binder = view.getApplicationWindowToken();
  if (binder != null) {
  manager.hideSoftInputFromWindow(binder, 0);
  } 
```

view 可以是您的 ScrollView 或 TextView 或其他任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:42:15.273

简单地说：getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

# python - 如何在 GAE-Python 中的 Jinja2 create.HTML 模板中引用数据存储模型中的选择值？

> ID：11750921
> 
> 赞同：1
> 
> 时间：2012-08-01T00:23:13.690
> 
> 标签：python, google-app-engine, jinja2

> **可能重复：**
> [谷歌应用引擎中的选择属性](https://stackoverflow.com/questions/845685/choice-property-in-google-app-engine)

我是 App Engine 和 Python 的新手（我的经验是 ASP）。

[AppEngine 文档 ( https://developers.google.com/appengine/docs/python/datastore/datamodeling](https://developers.google.com/appengine/docs/python/datastore/datamodeling) )的 DataModeling 部分提供了一个示例，开头为：

```
class Pet(db.Model):  
    name = db.StringProperty(required=True)  
    type = db.StringProperty(required=True, choices=set(["cat", "dog", "bird"]), default="dog") 
```

如何在 Jinja2 PetCreate.html 模板中引用这些允许值？

我不确定选择选项是否只是与 Django 相关的结构（我没有使用 Django - 只有 Jinja2）

似乎必须将这些值硬编码到 html 选择结构中是没有意义的（如果我必须在每个创建和编辑案例中硬编码允许的值，为什么还要将其放入模型中）。

谁能给我一个例子，说明 PetCreate.html 模板在这个模型中可能看起来像什么？

我正在使用 Python2.7 并尝试将 Jinja2 用于模板并希望继续使用 Datastore（而不是 Cloud SQL）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:59:52.457

最后我最终不需要这个，因为我决定出于其他原因对表单进行硬编码。话虽如此，我看到了使用 NDB、jinja2 和 WTForms 的参考。

# python - 识别串口/usb设备python

> ID：11750926
> 
> 赞同：5
> 
> 时间：2012-08-01T00:23:58.807
> 
> 标签：python, serial-port, pyserial, usbserial

这个问题的解决方案可能很简单，但我是动态与设备交互的新手。我正在做的是我正在制作一个 python 可执行代码，所以用户不必在他们的计算机上或任何类型的 python 解释器上有空闲，这意味着我不知道设备将插入哪个 USB 端口到。该程序需要能够打开与通过串行到 USB 转换器连接的设备的连接。如何确定哪个连接的设备是打开端口的正确设备？我正在使用 pySerial 与设备进行交互。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T01:27:44.017

无论您如何配置您的设备，在某些时候您可能不得不询问用户端口在哪里，或者轮询所有串行设备以获得已知响应。（虽然投票有它的陷阱，所以请继续阅读！）。与 USB 设备不同，当您连接普通的旧串行设备时，操作系统不会知道供应商/设备 ID。

首先，您需要找到串行端口。这里有一个问题可能会有所帮助：[Python 中枚举串行端口（包括虚拟端口）的跨平台方法是什么？](https://stackoverflow.com/questions/11303850/what-is-the-cross-platform-method-of-enumerating-serial-ports-in-python-includi).

获得串行端口列表后，您可以询问用户是否知道要使用哪一个。如果他们这样做，问题就解决了！

如果他们不这样做，您可以提议使用一些数据轮询所有串行设备，您*知道*这些数据会从您的设备产生特定响应。请记住，如果用户连接了其他串行设备，您的“hello”字节字符串实际上可能是其他设备的自毁序列！因此，您应该警告用户轮询可能会干扰其他设备，并始终在您这样做之前提示他们。

如果不了解您的代码的更多信息（例如，您正在使用什么通信框架，如果有的话；您是在控制台中执行此操作还是使用 GUI 工具包等），不可能说出编写此代码的最佳方式可能。在最简单的情况下，您可以遍历所有串行设备，发送问候语并检查响应。（您也可以并行执行此操作：为问候语循环一次，然后再次循环以检查缓冲区中的内容。如果您想要比这更花哨，请使用适当的库。）

* * *

**旁注：**如果您有一个可以为其设置供应商/设备 ID 的内置转换器，您*也许可以解决这个问题，但任何现代操作系统仍会自动检测到该转换器并将其枚举为串行端口；*您将无法直接将其作为 USB 设备与之对话。可以确定哪个端口与哪个 ID 对应，但我从未尝试过这样做。但是，如果您不是选择转换器的人（例如，如果它是用户提供的电缆），则这种方法是无用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-17T15:51:01.737

这是我用来识别像 Arduino 这样的串行 USB 转换器设备的方式。它检查设备描述的“USB”字符串。

```
import serial as ser
import serial.tools.list_ports as prtlst

global COMs
COMs=[]
def getCOMs():
    global COMs
    pts= prtlst.comports()

    for pt in pts:
        if 'USB' in pt[1]: #check 'USB' string in device description
            COMs.append(pt[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T15:10:49.000

我认为解决探测未知设备问题的唯一方法是让设备不断发送未经请求的“你好”响应。那就是您可以连接到所有串行设备并收听“你好”。连接和收听串行设备不应该把它搞砸。

缺点是这些消息会使串行流混乱。你可以有一个“我现在在这里，stfu”命令，但你只能连接一次。

FTDI 芯片有一种识别方法，但您必须使用它们的库来访问数据。

# c# - 为下一个表格保存位置

> ID：11750938
> 
> 赞同：0
> 
> 时间：2012-08-01T00:25:33.583
> 
> 标签：c#, windows-forms-designer

好的，所以我正在使用打开新表单的下一个按钮做一些事情，令人讨厌的是新表单会弹出我不想在桌面上的某个地方。

我正在尝试使用下面的代码让新表单在旧表单的位置生成，不幸的是无论出于何种原因它根本不起作用，它们仍然以与以前相同的方式弹出。是的，我已经注册了这些活动。

表格1：

```
System.Drawing.Point LocationPoint = new System.Drawing.Point(200,200);
private void Installer_template_LocationChanged(object sender, EventArgs e)
{
    // Save the window location to the installer arts
    LocationPoint = this.Location;
}
private void NextButton_Click(object sender, EventArgs e)
{
    var NextForm = new Form2(LocationPoint);
    NextForm.Show();
    this.Hide();
} 
```

表格2

```
 public Form2(System.Drawing.Point LocationPoint)
    {
        InitializeComponent();
        this.Location = LocationPoint;
    } 
```

代码是这样的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:28:53.583

您是否尝试过设置新表单的[StartPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.startposition.aspx)，即

```
 this.StartPosition = FormStartPosition.Manual; 
```

或者

```
 this.StartPosition = FormStartPosition.CenterParent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:47:52.663

好吧，我修复了它，这是一堆问题。

1.  错误的属性，必须使用 DesktopLocation 而不是 Location 属性

2.  其次，我遇到了一些无法修改的静态成员问题或任何错误，我只是使用设置文件来保存我的位置

3.  Having that done, it still didn't work because you can't just do this.DesktopLocation = something, you have to use this.SetDesktopLocation(X, Y)

4.  Still didn't work, because it got overwritten by other code when loading the form so you had to use the Shown even of the form and run it in there..

# cakephp - Cake PHP 2 自定义表单->标签

> ID：11750942
> 
> 赞同：6
> 
> 时间：2012-08-01T00:26:09.537
> 
> 标签：cakephp, formhelper

我正在使用表单助手生成标签：

```
$this->Form->label('Contact.name', 'Name'); 
```

生成以下内容：

```
<label for="ContactName">Name</label> 
```

是否可以使用帮助程序生成以下内容：

```
<label for="ContactName"><span class="mandatory">*</span> Name</label> 
```

虽然我可以手动编写上面的 html，但当我使用自动生成标签的输入法时会变得有点困难。

例如：

```
$this->Form->input('Contact.forename',array('div' =>false,
                   'label' => array(
                   text'=> 'First Name',class =>'myclass'),
                   'class' => 'input','size' => '25' ,'tabindex' => '1')); 
```

这可能在蛋糕中还是我必须在页面加载时使用javascript手动注入html？我认为这是相当丑陋的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T08:02:50.447

如果您对必填字段使用模型验证，那么 cakephp 会自动在标签上应用“*”，否则您可以按如下方式使用帮助程序 -

```
echo $this->Form->label('name', '<span class="mandatory">*</span> Name'); 
```

如果您不希望标签自动生成，您可以在使用帮助程序时使用“label => false”。

```
echo $this->Form->input('Contact.forename',array('label' =>false)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T00:44:15.393

不确定 CakePHP 是否支持（无论如何它会变得有点混乱）。我能想到的最简单的解决方案是通过表单助手为标签分配一个“强制”类：

```
$this->Form->label('User.name', 'Your username', array('class'=>'mandatory')); 
```

这会产生类似的东西：

```
<label class="mandatory" for="ContactName">Name</label> 
```

然后其余的完全在 CSS 中完成：

```
label.mandatory:after {
    content: ' *';
    color: red;
    display: inline;
} 
```

避免使用任何额外的 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-08T19:22:05.703

我知道这是旧的，但也许有 Cakephp 3 的人有同样的问题。这就是为我解决的问题，没有任何内联代码。

```
<?php
echo $this->Form->input(
'renovate_old',
[
 'type' => 'checkbox',
 'label' => ['text' => __('Alte Wohnung'), 'class' => 'moCheckLabel']
]); ?> 
```

因此，您可以命名您的标签并使用 Databasefield 来编写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T11:59:17.340

你可以通过

```
echo $this->Form->input('whatever', array('between'=>'<label for="ContactName"><span class="mandatory">*</span> Name</label>','label'=>false)); 
```

# ruby-on-rails - Editing content that is nil

> ID：11750951
> 
> 赞同：0
> 
> 时间：2012-08-01T00:27:40.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

I want to edit a 3 model on has_many. My question is about the controller and how can I access the information

I have the following model

```
Customer          Book           Book_Manager
id                id             id
first             description    customer_id
last                             book_id
email                            visible
password 
```

The relationship his has follow

```
Customer
  has_many book_managers
  has_many books :through -> book_managers
Book
  has_many book_managers
  has_many customer :through -> book_managers
Book_managers
  belongs_to :customer
  belongs_to :book 
```

When a customer wants to edit the content, i want to be the latest one to be shown if any exist. The query i have at the moment doesn't seem to handle an empty case and not sure how to do it.

```
@book = current_customer.books.order("created_at DESC").first 
```

How should i declare it in a def edit of the customercontroller??

Update: I want to be able to see my data, unfoturnotly it doesn't seem to work here my

```
customer controller

        def create
        @customer = Customer.new(params[:customer])
            @book = @customer.books.build(params[:book])
        if @customer.save
        cookies[:auth_token] = @customer.auth_token
        redirect_to @customer, notice: "Thank you for signing up!"
        else
            render "new"
        end
    end
    def edit
        @customer = Customer.find(params[:id])
        if current_customer.books.length > 0
           @book = current_customer.books.order("created_at DESC").first
        else
           #Nor books were found, so create one that has the proper relationship to current_customer
           @book = current_customer.books.build
        end
        end 
```

I am rendering a partial from the book folder, should my create option be in the customer Controller or in bookControllers

Update: using customerController has my main create, when creating its say missing actions in books controller should i have more action in the book controller?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:33:31.507

All you need to do is a simple check in the controller to see if any books exist. If one does not exists then create a new one.

```
#Check if the books array contains anything. There are several ways to do this
if current_customer.books.length > 0
   @book = current_customer.books.order("created_at DESC").first
else
   #Nor books were found, so create one that has the proper relationship to current_customer
   @book = current_customer.books.build
end 
```

# c# - 试图在 XAML 中显示/隐藏用户控件

> ID：11750957
> 
> 赞同：0
> 
> 时间：2012-08-01T00:28:10.737
> 
> 标签：c#, xaml

我正在尝试显示和隐藏用户控件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:31:38.427

您应该能够做到这一点，只是不要更新该项目。如果该项目在可视树上，则已经有它的一个实例，如果它不在可视树上，那么在您新建后，请确保将其添加到可视树中的元素中。

# git - Git不会删除文件，总是认为工作目录是脏的

> ID：11750960
> 
> 赞同：0
> 
> 时间：2012-08-01T00:28:38.870
> 
> 标签：git

我试图在 Heroku 上放置一个新的 Rails 应用程序，并删除了默认索引文件 public/index.html。然而，令我惊讶的是，当我在 Heroku 上访问我的应用程序时，我看到的是默认索引页面，而不是我想要查看的索引。

好的，这有点奇怪，但我想可能有一些原因，比如 Git 没有从存储库中删除文件，即使我删除了它。所以我在网上查了如何强制Git从存储库中删除文件并想出了

`git filter-branch --tree-filter 'rm public/index.html' HEAD`

但是，当我运行它时，它说“无法用脏工作目录重写分支”。我不确定为什么我的工作目录很脏，因为我刚刚提交，当我运行`git status`它时说

```
# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    public/index.html 
```

这让我很困惑，因为我很久以前就删除了 public/index.html。为什么它应该是唯一剩下的变化？尽管如此，我还是跑了`git add .`，`git commit -m "..."`它说

```
# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    public/index.html
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

然后，我很生气，尝试`git add .`并`git status`看到根本没有添加更改。 `git add public/index.html`也`git rm public/index.html`没有为我做任何事情。然后我用谷歌搜索了这个问题，并想出了一个 StackOverflow 帖子，有人建议尝试`git stash`并`git stash apply`刷新。我这样做了，但事情仍然没有奏效。

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:31:33.027

我认为你基本上必须提交删除，所以做一个 git commit -a -m '[comment]' 然后它会接受你的删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:37:37.780

关于 git filter-branch，如果这是您想要的，它将从 repo 中的所有提交中删除该文件。只需在执行之前提交或存储您的更改。如果您只想从现在开始删除它，那么 seansmash 的答案可能就是您所需要的。

# java - 下载缩略图而不是整个图像

> ID：11750963
> 
> 赞同：0
> 
> 时间：2012-08-01T00:28:56.320
> 
> 标签：java, android, image, url, download

我有一个显示某些杂志首页的应用程序。这些图像是高分辨率的。如果我只想显示低分辨率图片，那么下载整个图像是无用的和电池/时间/数据消耗。所以问题是：如何从图像 URL 中获取缩略图 URL，这样我就不需要下载图像了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:37:04.057

使用服务器端进程（PHP、ASP...等）创建缩略图，然后从新 URL 下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T01:16:49.190

我认为 Dave 是对的，最佳解决方案是修改图像服务器端。但是，听起来您可能无法 100% 控制传给您的图像。在提取更少的数据方面，这并没有给您留下很多选择......

为了最大限度地减少设备上的内存使用量，您可以做的是将图像下采样到适当的大小，以便您保存在内存中并显示的图像与需要的大小一样大。

您可以使用如下所示的代码来做到这一点（记得清理您的流）：

```
 FileInputStream fis = new FileInputStream(new File(path));
        final BufferedInputStream is = new BufferedInputStream(fis);
        final Options opt = new BitmapFactory.Options();

        // THIS IS THE IMPORTANT LINE:
        opt.inSampleSize = sampleSize;

        Bitmap img = BitmapFactory.decodeStream(is, null, opt); 
```

您可以在此处阅读：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)以了解如何获得适当的样本大小和使用**inJustDecodeBounds**。

耐心点……算术很难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:37:38.360

如果图像被隔行扫描/用于渐进式下载，您可以想象只下载一些文件数据并使用它来创建缩略图，但这是一个非常专业的用例，不太可能得到广泛支持。

否则，鉴于对图像格式*和支持检索特定字节范围的服务器的**深入*了解，您可以选择性地仅下载必要的图像数据来创建缩略图，但这将*非常*困难。

 **很可能，**虽然您的想法很有趣并且可能有用，但没有办法做到这一点**。

根据杂志的数量，您可能会考虑使用单独的服务器来下载封面图像并准备它们的缩略图。然后，您的移动应用程序可以先查询该服务器，如果缩略图可用，则使用它而不是下载全尺寸图像。**

# ruby-on-rails - 我的 Rails 应用程序中的“select from”字样使其崩溃

> ID：11750964
> 
> 赞同：1
> 
> 时间：2012-08-01T00:28:56.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, apache, mod-security

好的，这绝对是令人恼火的调试，我终于弄清楚它是什么了。我不知道如何或为什么，虽然......

更糟糕的是，它不会影响我的开发环境，所以我无法对其进行测试。它只发生在生产中（apache/phusion 乘客）。

**此外**，无论出于何种原因，它都没有产生 500 错误，因此我可以阅读日志......它给出了这个错误，这没有帮助。引起我注意的第一件事是它寻找“500.shtml”，这不是我不相信500页的rails标准（这不只是500.html吗？）。它就像是由apache或其他东西生成的。

```
Started GET "/500.shtml" for **ip-address-here** at 2012-07-31 20:22:39 -0400

ActionController::RoutingError (No route matches [GET] "/500.shtml"):
  actionpack (3.2.7) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.7) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.7) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.7) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.7) lib/action_dispatch/middleware/request_id.rb:22:in `call' 
  ... continued ... 
```

如果我有任何与“select from”匹配的描述，它会将我的应用程序转发到 404 页面（不是上面缺少的 500.shtml）

你认为这可能与我服务器上的一些 apache 模块有关吗？这是我唯一能想到的

即使这个词不完全是“选择”，它仍然会这样做。它可能是“从这组零食中愉快地选择你的选择”，它仍然会触发它。

我有 root 访问权限，所以我可以和我的主机交谈，但我想了解更多关于什么可能导致这种情况的想法，因为他们不提供 rails 支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:30:07.927

看看这个链接：[http ://drupal.org/node/110219](http://drupal.org/node/110219)

您的虚拟主机可能为 mod_security 配置了极其严格的规则。

您可以尝试通过添加以下内容来关闭 mod_security 以`.htaccess`进行故障排除（确保这是导致它的原因）：

```
 # Turn off mod_security filtering.
 <IfModule mod_security.c>
   SecFilterEngine Off
 </IfModule> 
```

一个更安全的选择（假设这是一个 POST）：

```
# To disable POST filtering:
 <IfModule mod_security.c>
   SecFilterScanPOST Off
 </IfModule> 
```

[http://www.modsecurity.org/documentation/quick-examples.html](http://www.modsecurity.org/documentation/quick-examples.html)

# sql - 将 NAME 查询合并到第二个匹配 ID 号的查询中

> ID：11750966
> 
> 赞同：0
> 
> 时间：2012-08-01T00:29:19.140
> 
> 标签：sql, sql-server-2008

这里有两个简单的查询：

```
SELECT EntityID, EntityName FROM EntityRelations.Entities 
 WHERE EntityID IN (SELECT ModifiedByEntityID FROM EntityRelations.AssistanceFlags af WITH (nolock)
  JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId
WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM'
                       AND '8/1/12 2:59 AM')

SELECT EntityName, Note, ModifiedByEntityID, ModifiedDate FROM EntityRelations.AssistanceFlags af WITH (nolock)
  JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId
 WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM'
                        AND '8/1/12 2:59 AM'
 ORDER BY ModifiedDate ASC 
```

![在此处输入图像描述](../Images/79fe22b7d48c9cd964d4f4d4f96e508c.png) 第一个提供了一个小的名称表，我希望将其滑入 ModifiedByEntityID 字段的第二个查询中，显示名称而不是数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:37:23.290

```
SELECT EntityName, Note, X.EntityName , ModifiedByEntityID, ModifiedDate FROM EntityRelations.AssistanceFlags af WITH (nolock)
  JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId
LEFT OUTER JOIN (SELECT EntityID, EntityName FROM EntityRelations.Entities 
         WHERE EntityID IN (SELECT ModifiedByEntityID FROM EntityRelations.AssistanceFlags af WITH (nolock)
         JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId
         WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM'
                                AND '8/1/12 2:59 AM'))X ON X.EntityID = ModifiedByEntityID 
 WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM'
                        AND '8/1/12 2:59 AM'
 ORDER BY ModifiedDate ASC 
```

由 JerryB 编辑：我收到一条模棱两可的 EntityName 消息，所以我对其进行了调整，它运行良好，谢谢：

```
DECLARE @FROM DATETIME, @TO DATETIME

    SET @FROM = '6/1/12 3:00 AM'
    SET @TO   = '8/1/12 3:00 AM'

SELECT et.EntityName, Note, X.EntityName "CSR", ModifiedDate FROM EntityRelations.AssistanceFlags af WITH (nolock) 
  JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId 
LEFT OUTER JOIN (SELECT EntityID, EntityName FROM EntityRelations.Entities  
         WHERE EntityID IN (SELECT ModifiedByEntityID FROM EntityRelations.AssistanceFlags af WITH (nolock) 
         JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId 
         WHERE ModifiedDate BETWEEN @FROM AND @TO))X ON X.EntityID = af.ModifiedByEntityID  
 WHERE ModifiedDate BETWEEN @FROM AND @TO
 ORDER BY ModifiedDate ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T00:39:27.153

您可以`JOIN`将两个查询合二为一：

```
SELECT EntityName, Note, ModifiedByEntityID, e.EntityName, ModifiedDate 
FROM EntityRelations.AssistanceFlags af WITH (nolock)
JOIN EntityRelations.Entities et WITH (nolock) 
  ON af.EntityId = et.EntityId
LEFT JOIN 
(
  SELECT EntityID, EntityName 
  FROM EntityRelations.Entities 
  WHERE EntityID IN (SELECT ModifiedByEntityID 
                     FROM EntityRelations.AssistanceFlags af WITH (nolock)
                     JOIN EntityRelations.Entities et WITH (nolock) 
                        ON af.EntityId = et.EntityId
                     WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM' AND '8/1/12 2:59 AM')
) e
  ON ModifiedByEntityID = e.EntityID
WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM' AND '8/1/12 2:59 AM'
ORDER BY ModifiedDate ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T00:45:12.543

这样做的愚蠢方法是加入您的两个查询并获取您想要的字段。

```
select a.EntityName,a.Note,b.EntityID,a.ModifiedDate
from
(
SELECT EntityID, EntityName FROM EntityRelations.Entities 
 WHERE EntityID IN (SELECT ModifiedByEntityID FROM EntityRelations.AssistanceFlags af WITH (nolock)
  JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId
WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM'
                       AND '8/1/12 2:59 AM')
) as b
inner join 
(
SELECT EntityName, Note, ModifiedByEntityID, ModifiedDate FROM EntityRelations.AssistanceFlags af WITH (nolock)
  JOIN EntityRelations.Entities et WITH (nolock) ON af.EntityId = et.EntityId
 WHERE ModifiedDate BETWEEN '6/1/12 3:00 AM'
                        AND '8/1/12 2:59 AM'

) as a 
on b.EntityID = a.ModifiedByEntityID
 ORDER BY a. ModifiedDate ASC 
```

当然，这将是一个缓慢的查询，但如果您在小表上工作会很有帮助。

# php - 在 Magento 结帐过程中发现错误

> ID：11750982
> 
> 赞同：0
> 
> 时间：2012-08-01T00:32:43.120
> 
> 标签：php, zend-framework, magento, quote

我目前在 Magento 网站上工作，我们在结帐过程中遇到了一些问题。我们正在使用高级自定义选项插件，并且遇到了一些奇怪的问题，即我们无法对任何具有相关必需选项的项目进行结帐。它成功添加到购物车，但触发失败，并且 onepage 重定向回购物车。我已将其缩小到`$quote->getHasError()`在 OnepageController.php 第 169 行返回 1。有谁知道如何返回该错误。我对 Zend 并不太熟悉并且已经尝试过`$quote->getError()`，但没有任何回报。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:40:12.633

```
error_reporting(E_ALL|E_STRICT);
ini_set('display_errors', 'on'); 
```

维护这两行以在 zend 框架中打印错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:51:55.673

除了@Daya 建议你可以使用 XDebug，它会为你节省很多时间

# makefile - 在运行时使用 makefile 复制文件

> ID：11750983
> 
> 赞同：6
> 
> 时间：2012-08-01T00:33:00.887
> 
> 标签：makefile, copy, cp

*我曾经在 Windows 上使用批处理脚本编译我的程序，但我最近发现了效率更高的 makefile。*

我的文件中有这一行，它在运行时`.bat`将一些 dll 复制*到当前目录，并且运行良好。*

```
copy C:\lib\glfw\glfw.dll 
```

我在我的makefile中尝试了同一行，甚至尝试了替代方法，但是即使***文件位于我指定的位置，***`cp`我的终端也会打印此错误

 *```
process_begin: CreateProcess(NULL, copy C:\lib\glfw\glfw.dll, ...) failed
make (e=2): The system cannot find the file specified.
make: *** [core.exe] Error 2 
```

这是我正在使用的完整生成文件。请注意，如果没有复制行，它就像一个魅力..我做错了什么或者这可能吗？

```
EXEC = core.exe
OBJS = src/obp.o

CC = g++

CFLAGS  = -W -Wall
LIBS    = -lSOIL -lglew32 -lglfw -lopengl32
LDFLAGS =

$(EXEC): $(OBJS)
    $(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)
    copy C:\lib\glfw\glfw.dll

clean:
    rm -f $(EXEC) $(OBJS) *~ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T02:51:52.283

看起来你是从一个`MSYS`（或`MinGW`）环境中运行它的，它不知道`copy`. 相反，您可以使用

```
cp C:\lib\glfw\glfw.dll . 
```

如果你想避免 *nix like `cp`，那么你可以使用`xcopy`如下：

```
xcopy //Y C:\lib\glfw\glfw.dll 
```

请注意`//`转义`/`.

或者您可以在常规`MS-DOS`环境中运行它，在这种情况下，您的`clean`目标将无法工作，因为`rm`找不到，您应该使用`del`.

`DOS`使用您当前的设置，将找不到任何内置命令。请参阅[选择 shell](http://www.gnu.org/software/make/manual/html_node/Choosing-the-Shell.html)以了解如何`make`确定要使用的 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:34:46.083

您可能需要将反斜杠加倍`make`以了解您想要的内容：

```
copy c:\\lib\\glfw\\glfw.dll 
```

Make 来自 Unix 背景，文件分隔符为`/`，因此在 Windows 环境中使用它有时会有点尴尬。*

# perforce - Perforce P4 同步，需要在 clientspec 中检出“只是”部分映射

> ID：11750984
> 
> 赞同：0
> 
> 时间：2012-08-01T00:33:15.583
> 
> 标签：perforce

**Perforce repo:** //存储库

//repository 有“Block_A”、“Block_B”之类的目录。Block_A 有目录“开发”。Block_B 也是如此

**Perforce clinet 规范：** //repository/... //my_client_spec_dir_mapping/my_development/...

如果我执行“p4 同步”，整个“//repository”将位于“//my_client_spec_dir_mapping/my_development”中。我“只”希望“//repository/Block_A/development”下的所有内容都在“my_clientspec_dir_mapping/my_development”中

我确实“不”想更改客户端规格。

试过**“p4 sync -n //repository/Block_A/development/...”**。没用。我该怎么做。

# ruby - 使用 Ruby Sequel 清理关联定义

> ID：11750986
> 
> 赞同：3
> 
> 时间：2012-08-01T00:33:23.243
> 
> 标签：ruby, coding-style, sequel

我正在使用 Jeremy Evan 的[Sequel](http://sequel.rubyforge.org/)来使用从网页中抓取的数据填充（SQLite）数据库。该数据库涉及我用[Associations](http://sequel.rubyforge.org/rdoc/files/doc/association_basics_rdoc.html)表达的许多 many_to_many 关系。关联是在类定义中创建的，在脚本运行时总是会对其进行评估。重要的是，关联类定义需要有必要的表。因此，表创建方法应该在关联定义的顶层。这是一个例子：

```
module Thing
db = Sequel.Sqlite('data.sqlite')

db.create_table(:clients)
    String :client_id, :primary_key => true
    String :client_data
end

db.create_table(:orders)
    String :order_id, :primary_key => true
    String :order_data
end

db.create_table(:orders_clients)
    String :order_id
    String :client_id
    primary_key [:order_id,:client_id]
end

class Person < Sequel::Model
    unrestrict_primary_key
    many_to_many :orders
end

class Order < Sequel::Model
    unrestrict_primary_key
    many_to_many :orders
end
end 
```

首先，我认为这是一个相当肮脏的解决方案，因为我的方法调用和类定义位于同一个命名空间中。如果我尝试分离类定义，我会得到`No database associated with Sequel::Model`错误（这是有道理的，但我想推迟对关联定义的评估，在表调用之后，只要它们可能发生）。

我希望能够在方法调用中创建表和关联。因此，例如，我可以传递新数据库文件的名称：

```
def create_tables_and_schema (database_name)
    db = Sequel.Sqlite(database_name)
    db.create_table... #three of those, as above

class Person < Sequel::Model
    unrestrict_primary_key
    many_to_many :orders
end

class Order < Sequel::Model
    unrestrict_primary_key
    many_to_many :orders
end
end 
```

我认为需要的是一种不同的方式来表达表关系。

任何关于方法和风格的建议都值得赞赏。如果解释令人困惑，请要求澄清。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T15:19:05.713

Your method calls and class definitions do not need to sit in the same namespace, it's just that the tables need to be created before the model classes. An easy way to separate them is to move the table creation to a separate file. Also, usually you assign the database object to a constant.

create_tables.rb:

```
DB.create_table(:clients)
  String :client_id, :primary_key => true
  String :client_data
end

DB.create_table(:orders)
  String :order_id, :primary_key => true
  String :order_data
end

DB.create_table(:orders_clients)
  String :order_id
  String :client_id
  primary_key [:order_id,:client_id]
end 
```

models.rb:

```
DB = Sequel.sqlite('data.sqlite')
require 'create_tables'

class Person < Sequel::Model
  unrestrict_primary_key
  many_to_many :orders
end

class Order < Sequel::Model
  unrestrict_primary_key
  many_to_many :orders
end 
```

You mentioned that you want to create the tables and associations in a method call, but that doesn't make sense if you are creating classes with constants. The main reason to create them via a method call is to allow for multiple databases at runtime, but that wouldn't work with your model classes since they are defined with constant names.

If you don't need multiple databases at runtime, the example above should work if you just want to separate the table creation from the model creation.

If you do need multiple databases at runtime, then creating the tables and models via a method call makes sense, but you need to create anonymous model classes, as otherwise you will have problems.

# c - 快速覆盖 -Werror 标志的方法？

> ID：11750988
> 
> 赞同：11
> 
> 时间：2012-08-01T00:33:43.893
> 
> 标签：c, gcc, makefile, cc

如果 cc 配置设置为使用`-Werror`，是否有办法`-Werror`在使用 make 时从终端覆盖标志？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T00:41:30.183

您可以在调用 make 时设置标志：

```
CFLAGS=-Wno-error make 
```

# java - Java中的误解

> ID：11750989
> 
> 赞同：2
> 
> 时间：2012-08-01T00:34:15.237
> 
> 标签：java, class, static, field, non-static

我正在尝试静态和非静态方法和字段。我试图编译这个：

```
class main{
    public int a=10;
    static int b=0;
    public static void main(String[] args){
        b+=1; //here i can do anything with static fields.
    }
}

class bla {
    void nn(){
        main.a+=1; //why here not? the method is non-static and the field "main.a" too. Why?
    }
} 
```

编译器返回我：

```
try.java:10: non-static variable a cannot be referenced from a static context 
```

但为什么？方法和字段“a”都是非静态的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:40:52.647

您正在尝试以`a`静态方式访问。您首先需要实例化`main`才能访问`a`.

```
main m = new main();
m.a += 1; 
```

此外，为了便于阅读，您应该将类​​的名称大写，并将实例变量大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T00:41:00.887

该变量`a`不是静态的，因此如果没有`Main`

```
Main.b += 1; // This will work, assuming that your class is in the same package

Main main = new Main();
main.a += 1; // This will work because we can reference the variable via the object instance 
```

所以，假设我们有这个类

```
public class Main {

    public int a = 10;
    static int b = 0;

} 
```

现在我们一起来，假设这些类在同一个包中

```
public class Blah {

    void nn() {

        Main.a += 1; // This will fail, 'a' is not static
        Main.b += 1; // This is fine, 'b' is static

        Main main = new Main();
        main.a += 1; // Now we can access 'a' via the Object reference

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:37:34.940

您需要一个 main 类的实例来更改 a 因为它不是类变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T00:37:59.017

您尚未`main`在`nn()`方法中初始化 的实例。

# autofac - autofac：IEnumerable > --> Lazy.Value（带有运行时参数）？

> ID：11750990
> 
> 赞同：2
> 
> 时间：2012-08-01T00:34:33.647
> 
> 标签：autofac

使用 Autofac，我有多个 IFoo 组件，它们在构造函数中采用运行时参数。我正在使用类型中的一些元数据以及运行时参数来构造和管理正在运行的实例。

```
interface IFoo
{
    int RunTimeId { get; }
}

[FooMeta("ShaqFoo")]
class Foo1 : IFoo
{
    public Foo1 (int runtTimeId)
    {
        ...

}

[FooMeta("KungFoo")]
class Foo2 : IFoo
{
    public Foo2 (int runtTimeId)
    {
       ...
} 
```

模块/注册类似于：

```
 builder.Register<Func<int, Foo1>>(c => 
        { 
            var cc = c.Resolve<IComponentContext>(); 
            return id => cc.Resolve<Foo1>(TypedParameter.From<int>(id)); 
        })
        .As<Func<int, IFoo>>()
        .WithMetadata<IFooMetaData>(m => m.For(sm => sm.FooType, typeof(Foo1)));

    builder.Register<Func<int, Foo2>>(c => 
        { 
            var cc = c.Resolve<IComponentContext>(); 
            return id => cc.Resolve<Foo2>(TypedParameter.From<int>(id)); 
        })
        .As<Func<int, IFoo>>()
        .WithMetadata<IFooMetaData>(m => m.For(sm => sm.FooType, typeof(Foo2))); 
```

以及一个使用运行时参数和元数据创建新 Foos 的组件。我需要为给定的运行时参数创建所有 IFoos，并且需要在创建之前检查现有实例（基本上使用 Metadata + RunTimeId 作为键）。

```
public class FooActivator
{
    public FooActivator(IEnumerable<Lazy<Func<int, IFoo>, IFooMetaData>> fooFactories)
    {
        m_FooFactories = fooFactories;
    }

    private void HandleNewRunTimeIdEvent(int id)
    {
        CreateFoosForNewId(id);
    }

    private void CreateFoosForNewId(int id)
    {
        foreach (var fooFactory in m_FooFactories)
        {
            if (!FooWithThisMetadataAndIdExists(fooFactory.Metadata.FooType, id))
            {
                var newFoo = fooFactory.Value(id);
            }

        }
    }

} 
```

显然，我可以使用惰性枚举枚举所有 IFoo 并检查元数据，但不能将运行时参数传递给 Lazy.Value。似乎我需要以某种方式传入一个 Func<> 的 Enumerable，但无法弄清楚如何附加元数据。或者也许我需要一种完全不同的方法？

只是让我的头围绕着autofac，并希望有一种干净的方法来实现这一点。如果有一种简单的方法可以枚举所有它们（而不创建它们），我可以只使用具体的 Foo 类型（而不是元数据），而是使用类型 + 运行时 Id 作为我的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:33:21.780

使用有效的解决方案更新了代码。弄清楚如何使用元数据正确注册工厂。似乎工作。

# c#-4.0 - C# (WPF) 中的不间断字符

> ID：11750992
> 
> 赞同：0
> 
> 时间：2012-08-01T00:34:41.450
> 
> 标签：c#-4.0, wpf-controls

我有一个带有一些特殊字符的文本（'|'、'+'、'/'、'-'）；这些字符在 WPF 文本框控件中生成断线。如何将这些替换为非破坏性等价物？

错误的：

```
sdfsdasdf+
 asdfasdfsadfsdjhfjsdfj/
 kjsdkfhksdfsd|
 kdhfvkh

```

正确：

```
sdfsdasdf+asdfsdfsdfsd
 jhfjsdfj/kjsdkfhksdfsd|k
 dhfvkh

```

谢谢

# .net - 绑定到所有 IP 并生成有效链接

> ID：11750995
> 
> 赞同：0
> 
> 时间：2012-08-01T00:34:49.077
> 
> 标签：.net, wcf, binding

我有一个将在多台服务器上运行的应用程序。它公开了一个 WCF 端点。我希望端点可以同时使用环回和服务器拥有的任何其他 IP（我不想配置每个 IP 地址，特别是因为它们可能会改变）

该应用程序作为 Windows 服务和控制台应用程序运行。我知道我可以使用`http://0.0.0.0/<Blah>/`语法绑定到所有地址，但是 wsdl 中的链接等...引用 IP 地址，`0.0.0.0`无论请求页面时使用哪个 IP。

有什么方法可以让 WCF 使用所有 IP 并正确响应它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:51:19.703

这是一个动态绑定到所有可操作 IPV4 套接字的示例。当然，您仍然必须跟踪您要绑定的地址和端口，并将它们报告给正在实现您的 GetKnownNodes() 函数的任何服务。请注意，我正在更改端口以避免与环回地址和外部 IP 发生冲突。当然，这可以以不同的方式处理。

```
using System;
using System.Net.NetworkInformation;
using System.Net.Sockets;
using System.ServiceModel;

namespace Stackoverflow11750995
{
    [ServiceContract]
    public interface ITimeService
    {
        [OperationContract]
        string TimeAsString();
    }

    public class TimeService : ITimeService
    {
        public string TimeAsString()
        {
            return string.Format("The time is {0:f}", DateTime.Now);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            using (var host = new ServiceHost(typeof(Stackoverflow11750995.TimeService)))
            {
                int port = 12345;

                foreach (var adpt in NetworkInterface.GetAllNetworkInterfaces())
                {
                    if (adpt.OperationalStatus == OperationalStatus.Up)
                    {
                        foreach (var addr in adpt.GetIPProperties().UnicastAddresses)
                        {
                            if (addr.Address.AddressFamily == AddressFamily.InterNetwork)
                            {
                                string uri = string.Format("net.tcp://{0}:{1}/Service", addr.Address, port++);
                                host.AddServiceEndpoint(typeof(ITimeService), new NetTcpBinding(), uri);
                            }
                        }
                    }
                }

                host.Open();

                Console.WriteLine("Press any key to exit");
                Console.ReadKey();
            }
        }
    }
} 
```

# model-view-controller - hostgator 支持 zend 框架吗？

> ID：11750999
> 
> 赞同：1
> 
> 时间：2012-08-01T00:35:08.113
> 
> 标签：model-view-controller, zend-framework, hosting, shared-hosting

hostgator 在共享主机中是否支持 Zend 框架？如果不是，那么在共享主机上支持 zend 框架的其他优秀托管服务提供商有哪些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:37:48.497

我想纠正自己。Hostgator 支持 Zend 框架，但并非所有计划都支持。Zend Framework 未安装在共享或经销商服务器中。您可能需要升级到 VPS 或专用服务器才能安装 Framework。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:40:36.277

我用过[FatCow](http://www.fatcow.com/)和[BlueHost](http://www.bluehost.com/)。