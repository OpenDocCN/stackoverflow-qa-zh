# StackOverflow 问答 10101000-10101999

# c#-4.0 - 亮度方法显示“内存不足”异常

> ID：10101003
> 
> 赞同：0
> 
> 时间：2012-04-11T06:31:59.210
> 
> 标签：c#-4.0, memory-leaks, out-of-memory

要更改 c#.net 4 中图像的亮度，我使用了以下方法。

```
 public void SetBrightness(int brightness)
    {
        imageHandler.RestorePrevious();
        if (brightness < -255) brightness = -255;
        if (brightness > 255) brightness = 255;
        ColorMatrix cMatrix = new ColorMatrix(CurrentColorMatrix.Array);
        cMatrix.Matrix40 = cMatrix.Matrix41 = cMatrix.Matrix42 = brightness / 255.0F;
        imageHandler.ProcessBitmap(cMatrix);
    } 

      internal void ProcessBitmap(ColorMatrix colorMatrix)
          {
            Bitmap bmap = new Bitmap(_currentBitmap.Width, _currentBitmap.Height)

            ImageAttributes imgAttributes = new ImageAttributes();
            imgAttributes.SetColorMatrix(colorMatrix);
            Graphics g = Graphics.FromImage(bmap);
            g.InterpolationMode = InterpolationMode.NearestNeighbor;
            g.DrawImage(_currentBitmap, new Rectangle(0, 0, _currentBitmap.Width,   
            _currentBitmap.Height), 0, 0, _currentBitmap.Width, 
            _currentBitmap.Height,  GraphicsUnit.Pixel, imgAttributes);
            _currentBitmap = (Bitmap)bmap.Clone();

        } 
```

如果多次更改亮度，则会显示“内存不足”异常。我曾尝试使用“使用块”，但顺其自然。

有任何想法吗？

请参阅链接 [http://www.codeproject.com/Articles/227016/Image-Processing-using-Matrices-in-Csharp](http://www.codeproject.com/Articles/227016/Image-Processing-using-Matrices-in-Csharp) 并建议在方法中是否可以进行任何类型的优化（旋转、亮度、裁剪和撤消） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:36:26.367

我已经从 CodeProject 下载了项目，并且修复了内存泄漏。您需要`_currentBitmap`在覆盖之前处置 Graphics 对象和图像。此外，您需要停止使用`.Clone`.

如果`ProcessBitmap`用这段代码替换函数的内容，内存泄漏就消失了：

```
internal void ProcessBitmap(ColorMatrix colorMatrix)
{
  Bitmap bmap = new Bitmap(_currentBitmap.Width, _currentBitmap.Height);
  ImageAttributes imgAttributes = new ImageAttributes();
  imgAttributes.SetColorMatrix(colorMatrix);
  using (Graphics g = Graphics.FromImage(bmap))
  {
      g.InterpolationMode = InterpolationMode.NearestNeighbor;
      g.DrawImage(_currentBitmap, new Rectangle(0, 0, _currentBitmap.Width, _currentBitmap.Height), 0, 0, _currentBitmap.Width, _currentBitmap.Height, GraphicsUnit.Pixel, imgAttributes);
  }
  _currentBitmap.Dispose();
  _currentBitmap = bmap;
} 
```

此外，这里有一些进一步优化的提示：

*   停止使用`.Clone()`。我看过代码，它`.Clone()`无处不在。除非真的有必要，否则不要克隆对象。在图像处理中，您需要大量内存来存储大型图像文件。您需要在原地进行尽可能多的处理。
*   您可以在方法之间[通过引用](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)`Bitmap`传递对象。您可以通过这种方式提高性能并降低内存成本。
*   `using`处理`Graphics`对象时始终使用块。
*   当您确定不再需要这些对象时`.Dispose()`调用它们`Bitmap`

# java - 使用脚本从 *.jar 中删除文件

> ID：10101008
> 
> 赞同：2
> 
> 时间：2012-04-11T06:32:33.983
> 
> 标签：java, bash, cmd, ear

我有下一个包结构

webService.ear --dependency.jar --some.class

我可以使用 cmd 脚本和 bash 脚本从 .ear 中 删除**some.class吗？**

**解决方案：**
我为此编写了 cmd 脚本：

```
call unzip target\webService.ear -d tmp
call zip -d target\tmp\dependency.jar \com\mypackage1\MyClass1.class
call zip -d target\tmp\dependency.jar \com\mypackage2\MyClass2.class 
call jar cvfM target\webService.ear -C tmp . 
```

可能是，这对某人有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T06:38:33.250

该`jar`命令没有删除条目的选项。

但是，jar 格式可以使用 zip 工具处理，因此您应该能够使用命令行 zip（例如 GNU zip）来删除成员。

# php - mongoDb中使用哪个单位计算距离

> ID：10101009
> 
> 赞同：1
> 
> 时间：2012-04-11T06:32:38.947
> 
> 标签：php, mongodb

我在 mongodb 中有以下类型的记录

```
{
  "user_id" : 79102,
  "country_code" : "OR",
  "location" : [43.831111, -121.4912121]
} 
```

所以当我使用命令 geoNear 然后它给我距离但有人可以告诉我哪个单位距离是使用地理空间索引计算的？是公里，米，英里吗？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:36:13.500

如此处所述：

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-geoNearCommand)

[MongoDB地理距离/半径到有用单位](https://stackoverflow.com/questions/3470902/mongodb-geo-distance-radius-to-useful-units)

**所有距离都使用弧度**。这使您可以轻松地乘以地球的半径（约 6371 公里或 3959 英里）以获得您选择的单位的距离。反之，查询时除以地球半径。我们目前不处理极点处或经度从 -180° 到 +180° 的过渡处的环绕，但是我们会检测搜索何时会环绕并引发错误。虽然默认的类地边界为 [-180, 180)，但纬度的有效值介于 -90° 和 90° 之间。

# c++ - 指向指针的指针和指向数组的指针

> ID：10101014
> 
> 赞同：2
> 
> 时间：2012-04-11T06:33:33.660
> 
> 标签：c++, arrays, pointers

有人可以简要解释一下以下函数中发生的不同情况吗？

```
 void f1(data_t **d)
    {
        for (int i=0; i<MAXSIZE; i++)
        {
            (*d)[i].ival = i;
        }
    }

    void f2(data_t **d)
    {
        for (int i=0; i<MAXSIZE; i++)
        {
            (*d)->ival = i;
            (*d)++
        }
    }

    void f3(data_t *d)
    {
        for (int i = 0; i<MAXSIZE; i++)
        {
            d->ival = i;
            d++;
        }
    }

    void f4(data_t *d)
    {
        for (int i = 0; i<MAXSIZE; i++)
        {
            d[i].ival = i;
        }
    } 
```

特别是在 f2 中发生的事情有所不同。但显然不同的事情发生在每个人身上。

f1 和 f3 做同样的事情（但不同）。f2 完全失败，f4 有问题（在本例中有效，但是当我尝试将其他值放入其他指针（char *）时，字符串最终变得奇怪。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:06:35.823

```
void f1(data_t **d)
{
    for (int i=0; i<MAXSIZE; i++)
    {
        (*d)[i].ival = i;
    }
} 
```

d 似乎是指向 data_t 数组的指针（或者是 data_t 数组的 1 元素数组）。取消引用以恢复 data_t 的数组，然后修改该数组的第 i 个元素。

```
void f2(data_t **d)
{
    for (int i=0; i<MAXSIZE; i++)
    {
        (*d)->ival = i;
        (*d)++
    }
} 
```

这有点棘手，并且确实与第一种情况有所不同。有一个指向 data_t 数组的指针。这里我们有一个指向 data_t 的指针数组。取消引用指向第一个元素的指针以检索指向数据的指针。然后 -> 用于访问数据并修改值（ x->y = (*x).y ）。最后指针移动到主数组的下一个元素。

```
void f3(data_t *d)
{
    for (int i = 0; i<MAXSIZE; i++)
    {
        d->ival = i;
        d++;
    }
} 
```

这里我们有更简单的情况，d 只是一个由指针访问的 data_t 数组。在循环内部，通过 -> 访问一个元素，然后将 d 递增以指向数组的下一个元素。

```
void f4(data_t *d)
{
    for (int i = 0; i<MAXSIZE; i++)
    {
        d[i].ival = i;
    }
} 
```

与 f3 类似，元素由 [] 运算符修改。

请注意以下事实：

```
int[] =(def) int * 
```

如果 a 是 int * 类型并且 i 是任何整数类型，则：

```
*(a + i) =(def) a[i] 
```

此外，如果 a 指向数组的第一个元素，则

```
*a =(def) a[0] 
```

然后，在“a++”之后

```
*a =(def) a[1] 
```

...等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:08:05.017

让我们一次拿这些：

```
// f1
(*d)[i].ival = i; 
```

首先`(*d)`是解引用，它似乎是一个指向变量`d`数组的指针。`data_t`这允许访问实际数组，例如`[i]`访问数组的`i`第 -th 元素并分配`i`给它。

```
// f2
(*d)->ival = i;
(*d)++; 
```

`(*d)``d`就像第一个一样取消引用。但是，在继续之前，您应该了解有关数组的一项重要信息......

```
int j[2] = { 42, 50 };
int j0 = *j; // j0 is now 42
j += 1;
int j1 = *j; // j1 is now 50 
```

数组被实现为内存中“槽”中顺序定向的单个变量，数组实际上只是指向第一个槽的指针。因此，`*j`取消引用`j`当前指向第一个元素的`42`. Doing`j += 1`将指针推进一个“槽”，这样`*j`现在将导致`50`.

现在，回到`f2`. `(*d)->ival`就像在做一样`(**d).ival`。这与我上面给出的简单示例非常相似。下一行 ,`(*d)++`将指针推进到下一个“槽”。考虑一下内存中“正在发生”的简单图表：

```
 +------+------+
      |*(j+0)|*(j+1)|
j --->|------|------|
      |  42  |  50  |
      +------+------+ 
```

`j`指向第一个“插槽”，第一行中显示的取消引用，第二行中的值。

`f3`与 非常相似`f2`，只是它期望数组作为参数传递，而不是指向它的指针。因此，`d`只需要使用`->`操作符取消引用一次（再次，完全像`(*d).ival`）。

`f4`与 非常相似`f1`，只是它期望数组作为参数传递，而不是指向它的指针。因此，`d[i]`直接访问`i`数组的第 i 个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T07:25:33.507

```
 void f1(data_t **d) 
    { 
        for (int i=0; i<MAXSIZE; i++) 
        { 
            (*d)[i].ival = i; 
        } 
    } 
```

1.  你得到一个指向数组`**d`的指针`data_t`，哪个元素是一个结构，有一个字段`ival`
2.  访问数组`*d`
3.  迭代所有数组元素，逐个元素，更改索引。并`i`更新`ival`每个数组元素`i`

注意：你不要`t change the pointer`*d`，指向数组开头

```
void f2(data_t **d) 
{ 
    for (int i=0; i<MAXSIZE; i++) 
    { 
        (*d)->ival = i; 
        (*d)++ 
    } 
} 
```

1.  你得到一个指向数组`**d`的指针`data_t`，哪个元素是一个结构，有一个字段`ival`
2.  访问数组`*d`，它也是指向数组的指针（第一个元素）
3.  通过 to be更新`ival`（上面的）元素`i`，使用指针表示法`(*d)->ival = i;`
4.  提升指向下一个数组元素的指针`(*d)++`并返回`2.`从现在开始 *d 指向“已筛选”数组的开头。

    无效 f3(data_t *d)

    ```
    { 
       for (int i = 0; i<MAXSIZE; i++) 
       { 
          d->ival = i; 
          d++; 
       } 
    } 
    ```

    1.你得到一个数组`*d`，`data_t`哪个元素是sa结构，有一个字段`ival`。

    2.也可以认为你得到了一个指向数组第一个元素的指针。通过指针访问访问和更新`ival`为`i`：`d->ival = i;`

    3.提升指向下一个数组元素的指针`d++`

    无效 f4(data_t *d)

    ```
    { 
       for (int i = 0; i<MAXSIZE; i++) 
       { 
          d[i].ival = i; 
          d++; 
       } 
    } 
    ```

如 .但是您使用参考符号（按值）`f3`提升索引和更新`ival`

# c++ - 性能 std::strstr 与 std::string::find

> ID：10101015
> 
> 赞同：7
> 
> 时间：2012-04-11T06:33:35.867
> 
> 标签：c++, gcc, stdstring, strstr

> **可能重复：**
> [C++ string::find complex](https://stackoverflow.com/questions/8869605/c-stringfind-complexity)

最近我注意到该函数`std::string::find`比函数慢一个数量级`std::strstr`- 在我的 Linux 上使用 GCC 4.7 的环境中。性能差异取决于字符串的长度和硬件架构。

差异似乎有一个简单的原因：`std::string::find`基本上`std::memcmp`是循环调用 - 具有时间复杂度`O(m * n)`。相比之下，`std::strstr`它针对硬件架构进行了高度优化（例如，使用 SSE 指令）并使用更复杂的字符串匹配算法（显然是 Knuth-Morris-Pratt）。

我也很惊讶没有在语言文档（即草稿 N3290 和 N1570）中发现这两个函数的时间复杂度。我只发现`char_traits`. 但这无济于事，因为`char_traits`.

我希望，它`std::strstr`包含`memmem`具有几乎相同性能的类似优化。直到最近，我还假设在内部`std::string::find`使用`memmem`。

**问题是：**有什么好的理由，为什么`std::string::find`不使用`std::memmem`？它在其他实现中是否有所不同？

*问题不是：*这个功能的最佳实现是什么？如果 C++ 比 C 慢，那么它真的很难为 C++ 争论。如果这两种实现都很慢，我也无所谓。真正伤害的是性能差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:09:14.153

首先，什么是`memmem`？我在 C++ 标准和 Posix 标准（包含所有标准 C 函数）中找不到这个。

其次，任何测量值都取决于实际数据。例如，在很多情况下，使用 KMP 将是一种悲观；可能是使用成员函数的大多数情况`std::string`；建立必要表格的时间通常会超过直接算法的总时间。当字符串的典型长度很短时，类似`O(m*n)` 的事情并没有多大意义。

# java - Java如何实现ArrayList 按索引排序/排序？

> ID：10101019
> 
> 赞同：1
> 
> 时间：2012-04-11T06:34:04.687
> 
> 标签：java, android, arraylist

所以我有这个ArrayList：

```
list.get(0) == "love"  
list.get(1) == "foo"  
list.get(2) == "make"  
list.get(3) == "links" 
```

我想要的是：

```
list.get(0) == "links"  
list.get(1) == "make"  
list.get(2) == "foo"  
list.get(3) == "love" 
```

我试过这个但没有用：

```
public static void orderDescending(final ArrayList<String> list){
    Collections.sort(list, new Comparator<String>() {
        public int compare(String s1, String s2) {
            Integer i1 = list.indexOf(s1);
            Integer i2 = list.indexOf(s2);
            return i1.compareTo(i2);
        }
    });
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T06:38:02.533

你可以这样做：

```
Collections.reverse(list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:38:35.620

简单地，

```
Collections.reverse(list); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:38:51.687

这是一个简单的列表反转算法。如果您不关心算法，请使用[Collections.reverse()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#reverse%28java.util.List%29)。

```
public static void reverse(List<String> list) {

    if (list == null) {
        return;
    }

    int size = list.size();
    int mid = list.size() / 2;

    ListIterator<String> fwd = list.listIterator();
    ListIterator<String> rev = list.listIterator(size);

    for (int i = 0; i < mid; i++) {
        String tmp = fwd.next();
        fwd.set(rev.previous());
        rev.set(tmp);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T06:57:11.893

你犯了一个小错误，否则你几乎已经做到了。

您应该尝试过“return **i2** .compareTo( **i1** );”

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

public class Reverse {

    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<String>();
        list.add("love");
        list.add("foo");
        list.add("make");
        list.add("links");
        System.out.println(list);
        orderDescending(list);
        System.out.println(list);
    }

    public static void orderDescending(final ArrayList<String> list) {
        Collections.sort(list, new Comparator<String>() {
            public int compare(String s1, String s2) {
                Integer i1 = list.indexOf(s1);
                Integer i2 = list.indexOf(s2);
                // return i1.compareTo(i2);
                return i2.compareTo(i1);
            }
        });
    }
} 
```

# android - 任何 SMS API 都可用于 android 从 android 应用程序发送 SMS？

> ID：10101024
> 
> 赞同：6
> 
> 时间：2012-04-11T06:34:19.087
> 
> 标签：android, api, sms

在我的应用程序中，我想向用户发送短信，他们在没有用户交互的情况下注册到应用程序。在安卓中可以吗？是意味着如何做到这一点，因为我不想打开 android 中可用的默认 SMS 应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T12:10:52.500

使用android代码发送短信非常简单-

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(NUMBER, null, MESSAGE, null, null); 
```

如果您想捕获所有与 sms 相关的事件，例如已发送、已发送的 sms，那么您可以参考@Ian Newson 在上面的帖子中提供的链接。谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:38:40.503

查看以下链接，了解如何从 Android 应用发送 SMS 的详细信息

[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T06:38:54.700

如果您只是想从设备发送短信，那几乎不会比使用[SmsManager.sendTextMessage更简单了](http://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29)

# javascript - 当我使用它的 UI 时，如何在 jQuery Mobile 中切换点击的导航按钮颜色

> ID：10101027
> 
> 赞同：1
> 
> 时间：2012-04-11T06:34:30.860
> 
> 标签：javascript, jquery-mobile

我正在开发一个移动网站。我试图让网站看起来像普通的 iPhone 应用程序，所以我想在底部使用 jQuery Mobile 的导航 UI。但是当我添加/删除其颜色绑定以单击操作时，我遇到了问题。我添加了 JavaScript 如下

```
function collect () {
if ($("#collect").hasClass("ui-btn-active")) {
    $("#collect").removeClass("ui-btn-active");
    removeCollect();
} else {
    addCollect();
}
} 
```

JavaScript 不起作用。所以，我不知道我是否应该重写一些功能或采取其他方式来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:35:51.027

我只想创建一个自定义主题。我认为你上面的内容很好。包含这些按钮的元素是否有主题？如果您使用的是默认主题，我希望看到默认主题。我不确定这是否能回答你的问题。我们可能需要更多细节。

从我上面读到的内容来看，您似乎对按钮的活动状态不满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:50:34.900

如果我正确理解您的问题，您应该查看 JQuery Themeroller。[http://jquerymobile.com/themeroller/index.php](http://jquerymobile.com/themeroller/index.php)

# java - Webview 中的 Facebook 身份验证

> ID：10101030
> 
> 赞同：4
> 
> 时间：2012-04-11T06:34:33.293
> 
> 标签：java, android, facebook, authentication

我正在构建一个本机 android 应用程序，每次启动时都需要登录 Facebook。此身份验证使用 FB SDK (SSO) 完成。

稍后在应用程序中，用户打开一个 WebView 到 facebook 个人资料页面的移动版本（http://m.facebook.com/some 页面）。**我的问题是，当打开 webview 时，用户需要输入 facebook 站点的用户名和密码**。由于我已经有一个 facebook 访问令牌，并且用户可能已经安装了 facebook 应用程序，**我认为有一些方法可以跳过**在 webview 中登录 facebook 网站的这个烦人的阶段。

我在网上搜索并尝试了不同的解决方案，但没有成功。如果有人可以发布有效的解决方案代码，这将对我有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:41:48.970

Facebook 的开发人员网站上有用于单点登录 (SSO) 登录的教程。一个是[`using webview`](https://developers.facebook.com/docs/guides/mobile/web/#login)，另一个是[`using SDK`](https://developers.facebook.com/docs/mobile/android/build/#sso)。
虽然我认为如果用户选择记住密码复选框，它不应该再次要求登录。

# wpf - 自定义地图图像 Windows Phone 7

> ID：10101032
> 
> 赞同：1
> 
> 时间：2012-04-11T06:34:45.810
> 
> 标签：wpf, silverlight, windows-phone-7, map

我有具有特定高度和宽度的自定义地图图像。我需要将图像的 xy 坐标映射到可用的四个角纬度经度的纬度经度。

此要求是为了将用户的当前位置填充到自定义图像地图中。

关于图像的更多信息我在图像上有特定的几个点，基于用户的当前位置，我需要在 Windows Phone 应用程序中的图像上找到附近的点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:17:00.080

如果您使用 WP7 的[Bing 地图 Silverlight 控件](http://msdn.microsoft.com/en-us/library/ee681884.aspx)，则有您想要实现的 API。

例如[Map](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.map.aspx)类提供了用于转换坐标的方法[LocationToViewportPoint](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.core.mapcore.locationtoviewportpoint.aspx)和[ViewportPointToLocation 。](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.core.mapcore.viewportpointtolocation.aspx)

还有一个类[MercatorUtility](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.core.mercatorutility.aspx)，它提供了有用的方法，如[LocationToLogicalPoint](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.core.mercatorutility.locationtologicalpoint.aspx)和[LogicalPointToLocation](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.core.mercatorutility.logicalpointtolocation.aspx)。

但是，根据您对*自定义地图图像*的含义，除了您之外，没有人可能知道它是如何映射到视图坐标的。

# xpages - 您如何解决应用程序初始加载的加载时间长的问题

> ID：10101033
> 
> 赞同：2
> 
> 时间：2012-04-11T06:34:45.933
> 
> 标签：xpages

当没有用户打开应用程序中的任何页面时，它会在一段时间后从服务器上卸载应用程序。

当用户在应用程序中卸载页面后加载页面时，可能需要相当长的时间才能加载。

解决此问题的最简单方法是让代理每天早上在任何用户在线之前轮询应用程序中的页面。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T06:55:54.600

从 Notes 和 Domino 8.5.3 开始，您可以使用以下 ini 参数：

**XPagesPreload=1**

在服务器启动时预加载 XPages java 代码，以便在用户第一次访问 xpages 应用程序时它们已经在内存中。

**XPagesPreloadDB=servername!!path/mydb.nsf/myxpage.xsp,servername!!path/anotherdb.nsf**

为特定数据库中的特定 XPage 或数据库中的所有 XPage 预加载 XPage 引擎。

这两个参数都可以在 Domino 服务器和 Notes 客户机上使用。

据我所知，即使没有用户访问该应用程序，它也会保留在内存中。

# javascript - document.activeElement.id 不工作

> ID：10101034
> 
> 赞同：0
> 
> 时间：2012-04-11T06:34:46.850
> 
> 标签：javascript

我正在开发设备应用程序。我想知道当前的重点锚。

为此，我使用了**document.activeElement.id**。它在 webkit 上运行良好，但不适用于旧版浏览器。所以我用

```
 $(":a").focus(function () {
            id = this.id;
                }); 
```

它也不起作用。我浏览了很多网站，发现 .focus 方法仅适用于**输入**标签。

所以请给我这个问题的 IDea。如果它是纯粹的 javascript 会更好。

任何帮助将被应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:53:03.193

您可以执行以下操作：

```
$(document).on('focus','a', function(e) {
    id = this.id;
}); 
```

该`focus`事件并非在所有浏览器中都以原生方式冒泡，但 jQuery 应该对其进行规范化，从而可以将其委托给文档。

# coldfusion - cf9 ORM Computed Column - 它可以调用方法，还是包含通用 cfml 逻辑而不是 SQL

> ID：10101036
> 
> 赞同：1
> 
> 时间：2012-04-11T06:34:58.783
> 
> 标签：coldfusion, coldfusion-9

我的 Persistant 模型有一个“状态”字段，可以是 0 或 1。

我的模型中有一个名为 getStatusLabel() 的方法，它返回“Active”或“Retired”，具体取决于传递给它的状态。

```
public function getStatusLabel(required status){
        if (status eq 1)
            return "Active";
        else if (status eq 0)
            return "Retired";
    } 
```

我认为如果可以将其设置为计算列会很棒，但不能完全考虑如何做到这一点。所有计算列示例都有一个 SQL 语句作为公式。

是否可以将此（或其他）方法称为我的公式（通过我的模型更容易访问），或者公式是否需要是 SQL 语句？

或者，可以将方法的逻辑直接包含在“公式”中。

当我尝试任何一个时，我都会遇到错误：`Could not initialize collection`所以猜测这是不可能的，但如果可以的话，那就太好了，所以值得一问。

提前谢谢了！

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:28:06.490

如果您在 SQL Server 中使用计算列，则可以将列定义设置为：

```
CASE WHEN status = 1 THEN 'Active' ELSE 'Retired' END 
```

将列设置为持久化，这样就不必在每个查询中计算它，然后您应该能够在 ORM 中使用它。只要确保它被标记为不可更新或不可插入。

此外，您可以让 getStatusLabel 方法使用对象的状态属性，而无需将其作为参数传入：

```
public function getStatusLabel(){
    if (this.status eq 1)
        return "Active";
    else if (this.status eq 0)
        return "Retired";
} 
```

如果您使用该函数，仅引用本地状态属性，它会按您的预期工作吗？

# progress-4gl - 从浏览器获取列值

> ID：10101037
> 
> 赞同：0
> 
> 时间：2012-04-11T06:34:59.070
> 
> 标签：progress-4gl, openedge

我有一个显示客户详细信息的浏览器。当我在该浏览器中选择一行（即一个客户）时，我想获取该客户的客户编号。这样我就可以填充另一个浏览器“OrderBrowser”，它将显示所选客户的订单。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:13:55.080

你应该使用触发器

```
ON VALUE-CHANGED OF BrowserHandle DO:
  your code
END. 
```

# apache - 解决“HTTP 510 未扩展”错误

> ID：10101042
> 
> 赞同：3
> 
> 时间：2012-04-11T06:35:37.413
> 
> 标签：apache, http

我的服务器每周都会触发 510 HTTP 错误。重启apache后，问题就解决了。但这更像是解决此问题的一种解决方法。

任何想法，如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T06:24:01.573

遇到了同样的问题，我持有的网站之一也有同样的故事——萤火虫“510 未扩展”中的许多错误。

检查 apache 和服务器的配置，连接数和总传出流量带宽有限制。

# 当将其设置为无限制所有工作完美时，启用限制会出现此错误，需要在工作正常时找到中间并且所有流量设置都没有“无限制”。

我们设置此限制的原因是 - 服务器上的一个站点正在提高流量，达到整个服务器的限制 - 太多的连接和传出流量......我们没有找到这个站点，但添加了允许您管理流量和每个站点的连接限制。

因此，在我看来，当您的网站之一提高您的流量并且您开始遇到此错误时，您会遇到同样的问题 - 正如您所说的重新启动 apache - 这可以永久解决这个问题。

# haskell - Haskell: TVar: orElse

> ID：10101044
> 
> 赞同：12
> 
> 时间：2012-04-11T06:35:44.470
> 
> 标签：haskell, concurrency, ghc, stm, tvar

[`orElse`](http://www.haskell.org/ghc/docs/6.12.1/html/libraries/base/GHC-Conc.html#v%3aorElse)当由于另一个事务写入`TVar`它已读取的事务而重试事务时，是否调用“else”部分，或者仅在[`retry`](http://www.haskell.org/ghc/docs/6.12.1/html/libraries/base/GHC-Conc.html#v%3aretry)显式调用时调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T07:28:00.027

如果你有

> 或其他ab

then只有在被显式调用时`b`才会运行。否则本质上将变得不确定。（由 STM 运行时完成的事务重新运行是透明的，不应影响任何计算的结果。）`retry``a``orElse`

# yii - Yii 生成错误“无法解析请求 "

> ID：10101047
> 
> 赞同：15
> 
> 时间：2012-04-11T06:35:59.537
> 
> 标签：yii

登录成功后，Yii 不执行任何页面。

显示错误：

> 错误 404 无法解析请求“membersdet/index”

这`membersdet`是控制器 ID，`index`是一个动作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T22:50:53.157

确保控制器的文件名完全是“ **MembersdetController.php** ”。**它区分大小写。**

我猜你是在 Windows 操作系统下的本地机器上开发，而服务器在 *nix 系统上运行。对于新手开发人员来说，这是正常的问题，他们忘记了 *nix 中区分大小写的文件系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-22T08:26:57.047

这是因为给出了错误的控制器文件名，或者可能是`actionIndex()`方法不在您的控制器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-29T14:02:58.623

我遇到了类似的问题并解决了。在这种情况下，文件被正确命名，但类名拼写错误。当这两个不对应时，您也可能会收到此错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-11T09:39:10.083

准确检查您的控制器是否区分大小写：MembersdetController

使用控制器中的命名空间检查别名（config/main.php 中常见）映射

```
Yii::setAlias('@tienn2t', dirname(dirname(__DIR__)) . '/tienn2t'); 
```

在 MembersdetController.php 文件中

```
<?php
namespace tienn2t\controllers;

use Yii;
use yii\web\Controller;

class MembersdetController extends Controller{
    public function actionIndex(){
        echo 1;die;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T08:37:27.827

问题中没有足够的信息，但也许你的 .htaccess 不正确，或者如果你根本没有 htaccess，你应该使用 url：

```
http://host/index.php?r=membersdet/index 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T08:40:39.817

确保您在 /protected/controllers/ 中有 MembersdetController，并且此类“是”CController，并且有一个名为 actionIndex() 的公共方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-07T18:56:11.007

检查配置文件中的 errorHandler 块。我已经像这样修复了这个错误

```
'errorHandler' => [
    'errorAction' => 'error/index',
], 
```

顺便说一句，您的模块中应该有适当的 ErrorController，视图文件夹中应该有 /error/index.php 文件。希望能帮到你。

# php - 为什么这只是在回响 PHP 中的第一个字符？

> ID：10101057
> 
> 赞同：-1
> 
> 时间：2012-04-11T06:36:43.017
> 
> 标签：php, variables

```
$fr = "hammad";
$frhammad = "nuthing";
echo $fr{$fr};

Output:
h 
```

而预期的输出是

`"Nuthing"`

回显“Nuthing”的格式应该是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T06:40:31.437

因为 $x{$n} 是将字符串 $x 视为字符数组的标准语法，其中 $n 是该数组中字符的数字索引位置。在您的情况下，索引位置由 $fr 标识，这是一个非数字字符串，因此 PHP 的松散类型将其转换为整数 0，因此在位置 0 处回显字符...字符串的第一个字符

**编辑**

手册中的强制性报价：

**按字符访问和修改字符串**

可以通过使用方数组括号指定字符串后所需字符的从零开始的偏移量来访问和修改字符串中的字符，如 $str[42]。为此，将字符串视为字符数组。当您想要提取或替换超过 1 个字符时，可以使用函数 substr() 和 substr_replace()。

注意：也可以使用大括号访问字符串，如 $str{42}，用于相同目的。

**编辑#2**

要从评论中回答您的最新问题：

> 正如我在问题中给出的那样，我将如何连接变量的名称？

```
$fr = "hammad"; 
$frhammad = "nuthing"; 
$varName = 'fr'.$fr;
echo $$varName; 
```

或者

```
$fr = "hammad";
$frhammad = "nuthing";
echo ${'fr'.$fr}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:43:33.853

变量-变量插值的正确语法是：

```
$fr = "hammad";
$frhammad = "nuthing";
echo ${fr.$fr}; 
```

# c++-cli - 在 C# 项目中调试 C++/CLI dll 上的代码

> ID：10101058
> 
> 赞同：0
> 
> 时间：2012-04-11T06:36:45.140
> 
> 标签：c++-cli

在 C# 项目中使用的调试 dll (C++/CLI) 有问题。只有在完全重建 dll 项目后才启用调试。但是，如果我在我的 C# 项目中更改某些内容（例如添加一行代码）并构建它（我的 C# 项目） - 调试 dll 将不再可用:(。有人可以说我，为什么会这样？ （使用 vs2010，.net 4.0）

# android - 如何将画布绘图保存为图像？

> ID：10101060
> 
> 赞同：1
> 
> 时间：2012-04-11T06:36:52.890
> 
> 标签：android, image-processing, canvas, surfaceview

在我的 android 应用程序中，我将绘图保存为图像。我能够保存文件，但它不能完美地保存 100%，即，一些内容缺少空间即将到来。该函数在下面是我通过 onclick 调用的。请帮助我如何保存完美的屏幕截图，请访问以下链接： [http](http://www.flickr.com/photos/77093196@N03/7066979339) : //www.flickr.com/photos/77093196@N03/7066979339，http: [//www.flickr.com/photos/77093196@N03/ 7066979341](http://www.flickr.com/photos/77093196@N03/7066979341)

数字签名活动.java

```
private DrawingSurface drawingSurface;

    // To save file as Image
        public void saveDrawing(View v) throws IOException {

            File mediaStorageDir = new File(
                    Environment
                            .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                    "MySignatures");
             Bitmap nBitmap = drawingSurface.getBitmap();
            try {
                if (!mediaStorageDir.exists()) {
                    mediaStorageDir.mkdirs();
                }
                String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                        .format(new Date());
                File mediaFile = new File(mediaStorageDir.getPath()
                        + File.separator + "SIGN_" + timeStamp + ".png");
             FileOutputStream out = new FileOutputStream(mediaFile);

            nBitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
                out.flush();
                out.close();
                Toast.makeText(this, "Signature saved  to " + mediaFile,
                        Toast.LENGTH_LONG).show();
            } catch (Exception e) {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), "Not saved",
                        Toast.LENGTH_SHORT).show();
            }

        } 
```

绘图表面.java

```
public class DrawingSurface extends SurfaceView implements SurfaceHolder.Callback {
//some code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:00:26.823

我通过设置 canvas.drawColor(Color.WHITE, PorterDuff.Mode.DARKEN); 解决了 在 DrawingSurface.java 类中

# ruby-on-rails - Ruby on rails3 登录教程

> ID：10101062
> 
> 赞同：2
> 
> 时间：2012-04-11T06:37:02.110
> 
> 标签：ruby-on-rails, login

我是 Ruby on rails 的新手，跟随 railsforzombies.org 的实验室并通过了所有 5 个实验室。我正在为开始在 rails 3 中制作 CMS 寻找良好的简单帮助。首先，我想用会话实现简单的登录页面。哪位高手来指导一下。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:40:50.360

如果可以为它使用 gem，建议使用 Devise，它可以定制并且具有您需要的所有功能。

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

如果您想从头开始实施，

[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)

这个 railscast 看起来不错，该站点几乎包含您需要的有关 rails 的所有信息，应该添加书签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:14:48.333

在这里，您可以找到很好的 gem **authlogic**教程以及如何进行不显眼的登录（使用 Ajax）。

看看： http: [//net.tutsplus.com/tutorials/ruby/how-to-build-an-unobtrusive-login-system-in-rails/](http://net.tutsplus.com/tutorials/ruby/how-to-build-an-unobtrusive-login-system-in-rails/)

# java - 正则表达式如何获取子字符串？

> ID：10101066
> 
> 赞同：1
> 
> 时间：2012-04-11T06:37:29.270
> 
> 标签：java, regex

这是我的示例数据：

```
406/FG-2000

411/FA-2120

XX-226/2012-DFDF

OASDV-279/1016-FDFFD 
```

我如何在java中使用正则表达式（仅正则表达式）解析

```
406/FG-2000 -> 406 (from begining to /)

411/FA-2120 -> 411 (from begining to /)

XX-226/2012-DFDF -> 226 (from - to /)

OASDV-279/1016-FDFFD -> 279 (from - to /) 
```

这是两条规则。（从开始到 /）或（从 - 到 /）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:43:39.810

这段代码可以满足您的要求：

```
input.replaceAll(".*(^|-)(.*?)/.*", "$2") 
```

如果您只想将其限制为数字，请将匹配的正则表达式更改为`".*(^|-)(\\d*?)/.*"`

这是一个测试：

```
public static void main(String[] args) {
    String[] inputs = { "406/FG-2000", "411/FA-2120", "XX-226/2012-DFDF", "OASDV-279/1016-FDFFD" };
    for (String input : inputs)
        System.out.println(input.replaceAll(".*(^|-)(.*?)/.*", "$2"));
} 
```

输出：

```
406
411
226
279 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:47:30.357

试试这个：

```
(^|-)[0-9]+/ 
```

它将匹配从开头或从 - 到 / 的任何数字

# xml - 调用时从 VB.NET 中使用的 XML 读取的可配置方法

> ID：10101067
> 
> 赞同：0
> 
> 时间：2012-04-11T06:37:33.170
> 
> 标签：xml, vb.net, sendkeys

我有一个关于如何使用可配置的方法名称来调用的问题。例如

1.我有一个包含三个元素的 xml 文件，如下所示：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<root>
    <element attribute1="a" attribute2="b" attribute3="Send" />
</root> 
```

2.我正在使用一个列表（我创建了一个包含三个元素的类并创建了该类的对象类型列表）来存储 xml 文件中的元素。

3.然后使用 For 语句： For Each element As ClassList In GetList 我想从 xml 文件中调用可配置方法：

从理论上讲，我希望调用属性 3 的值而不是 SendWait（该值是 SendWait）。

而不是 SendKeys.SendWait("{ENTER}") 是这样的：

```
SendKeys.element.Thirdelement()("{ENTER}") 
```

*   element.Thirdelement() 的值为 SendWait

我知道attribute3 可以有2 个值：Send 或Sendwait 我应该使用if 语句，还是有任何可用的解决方案？

```
If element.ThirdElement() = "SendWait" Then
                                SendKeys.SendWait("{ENTER}")
                            Else
                                SendKeys.Send("{ENTER}") 
```

我是编程新手，所以如果上述陈述之一有偏差，请原谅！

LE：我有一个包含三个成员和属性的新类 ListClass1：

```
firstElement()
secondElement()
thirdElement() 
```

我正在使用这个类来存储来自 xml 文件的数据

```
<?xml version="1.0" encoding="iso-8859-1"?>
<root>
<element attribute1="a" attribute2="b" attribute3="Send" />
</root> 
```

因此，在我将值添加到列表后，例如： **element.ThirdElement()**将具有来自属性 3（“发送”）的值。**element.secondElement()**也将保留属性 2 的值，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:06:47.850

您可以使用反射来完成任务。首先定义一个包含您的方法的类：

```
Public Class MethodsToExecute
    Public Sub Send(par1)
       SendKeys.Send("{ENTER}") 
    End Sub
    Public Sub SendWait(par1)
       SendKeys.SendWait("{ENTER}")
    End Sub
End Class 
```

然后创建一个 Sub 进行处理：

```
Public Shared Sub ExecuteMethodByName(ObjectToInvoke As Object, MethodName As String, ParamArray Parameters() As Object) 
     Dim m As Reflection.MethodInfo = ObjectToInvoke.GetType.GetMethod(MethodName)
     m.Invoke(ObjectToInvoke, Parameters)
End Sub 
```

现在执行

```
dim mte as new MethodsToExecute 
```

迭代彻底的xml文件并执行

```
 ExecuteMethodByName(mte,element.ThirdElement(), element.firsElement(),element.secondElement()) 
```

问题是解决方案依赖于属性顺序而不是它们的名称，而是通过更广泛的反射使用，您也可以处理它。 [参数数组示例](http://www.daniweb.com/software-development/vbnet/threads/123239/paramarray-example)

可以理解吗？

# algorithm - 用于在两组之间映射元素的算法

> ID：10101068
> 
> 赞同：1
> 
> 时间：2012-04-11T06:37:35.960
> 
> 标签：algorithm, math, optimization

我有两组向量，集合 A 和集合 B。假设集合 A 包含 100 个向量，集合 B 包含 50 个向量。我有自己的方法来测量任何两个向量之间的距离。目标是将集合 A 中的向量映射到集合 B 中的距离在特定阈值内的向量。现在，如果两个向量之间的距离不在特定阈值内，则它们不是配对的。映射是一对一的，即集合 A 中的向量只能映射到集合 B 中的一个向量，反之亦然。

因此，最终可能会发生，来自集合 A 的 40 个向量映射到集合 B 中的 40 个向量。因此，集合 A 中的 60 个向量不与集合 B 中的任何向量配对。因此，集合 B 中的 10 个向量也未配对.

现在，如果我将集合 A 中的向量标记为 A1、A2、A3 ... A100 并将集合 B 中的向量标记为 B1、B2、B3 ... 等等，那么迭代这两个集合的最有效方法是什么并做这个配对。

如果需要进一步说明，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:43:54.197

您需要做的是首先查看 A 中的哪些向量可以与 B 中的哪些向量配对。这是通过 O(n^2) 复杂度完成的，并将创建一个二分图 - 你有两个顶点分区 - A 中的向量和 B 中的向量，当且仅当来自 A 的向量可以与来自 B 的向量配对时，您才有边。构建图之后，您需要找到最大二分匹配，这通常使用流来完成。以[这里](http://pages.cs.wisc.edu/~shuchi/courses/787-F09/scribe-notes/lec5.pdf)为例。我个人将[Dinitz](http://en.wikipedia.org/wiki/Dinic%27s_algorithm)算法用于流程。

希望这可以帮助。

# mysql - 如果 mySQL 中的表中存在列名/字段名，则搜索数据库

> ID：10101072
> 
> 赞同：19
> 
> 时间：2012-04-11T06:37:44.057
> 
> 标签：mysql, sql, database

如果mysql中的表中存在列名/字段名，有没有办法搜索数据库？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T06:38:21.330

使用 INFORMATION_SCHEMA 数据库及其表。

例如：

```
 SELECT *
FROM   information_schema.columns
WHERE  table_schema = 'MY_DATABASE'
       AND column_name IN ( 'MY_COLUMN_NAME' ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T06:40:32.807

```
SHOW COLUMNS FROM tablename LIKE 'columnname' 
```

玩得开心 ！:-)

*更新：*

如评论中所述，这仅搜索一个表，而不是整个数据库（每个表）。在这种情况下，请参考 DhruvPathak 的回答。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T06:48:22.133

如果您想在整个数据库中搜索，那么您应该尝试

```
SELECT * 
FROM information_schema.COLUMNS 
WHERE 
    TABLE_SCHEMA = 'db_name' 
AND COLUMN_NAME = 'column_name' 
```

如果您想在特定表中搜索，那么您应该尝试

```
SELECT * 
FROM information_schema.COLUMNS 
WHERE 
    TABLE_SCHEMA = 'db_name' 
AND TABLE_NAME = 'table_name' 
AND COLUMN_NAME = 'column_name' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-09T12:20:20.927

如果您想搜索两列或更多列，请使用下面提到的以下内容。

```
 SELECT DISTINCT TABLE_NAME 
        FROM INFORMATION_SCHEMA.COLUMNS
        WHERE COLUMN_NAME IN ('columnA','ColumnB')
            AND TABLE_SCHEMA='YourDatabase'; 
```

# c# - c#中Designer.cs文件的作用

> ID：10101073
> 
> 赞同：9
> 
> 时间：2012-04-11T06:37:49.633
> 
> 标签：c#, visual-studio

我在我的项目中获取 Designer.cs 文件，文件中的注释说它是由自动工具生成的。

这是一个现有的项目，所以我对此了解不多。它是为一个 schema.cs 生成的，它由数据库中所有表的模式组成。

我正在使用 SQLite 数据库。任何人都可以帮助我了解该`Designer.cs`文件在 C# 项目中的用途。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T09:35:01.463

Visual Studio 项目中有*多种*Designer.cs 文件。常见的有：

*   Properties\Resources.resx\Resources.Designer.cs 文件，将资源添加到 Project + Resources 选项卡时自动生成的代码
*   Properties\Settings.settings\Settings.Designer.cs 文件，将设置添加到 Project + Settings 选项卡时自动生成的代码
*   SomeForm.cs\SomeForm.Designer.cs，由 Winforms 设计器从您放置在表单上的控件生成的自动生成代码
*   SomeData.xsd\SomeData.Designer.cs，由数据集设计器生成的自动生成代码。

鉴于您在问题中命名了一个数据库，您很可能在谈论最后一个数据库。您应该从描述中看到模式，您使用 Visual Studio 中的可视化设计器小工具，它会生成在运行时执行一些有用的 C# 代码。通过在“解决方案资源管理器”窗口中双击其父节点，您可以从 Designer.cs 返回到设计器小工具。永远不要编辑 Designer.cs 文件，当设计器重新生成代码时，您将丢失所有内容。出于这个原因，它们在某种程度上隐藏在解决方案资源管理器中。如果您还没有找到它们：打开节点以查看它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T06:42:03.603

Designer.cs 包含 UI 控件的声明和初始化以及表单的布局。该表单是根据 Designer.cs 中提供的信息呈现的。在设计模式下创建表单时会自动生成此文件。

# iphone - 我可以将 IBActions 添加到 NSArray 吗？

> ID：10101085
> 
> 赞同：0
> 
> 时间：2012-04-11T06:38:34.530
> 
> 标签：iphone, nsarray, ibaction

我有一些 IBActions，比如

```
-(IBAction) doAdd; 
-(IBAction) doEdit; 
```

我想将它们添加到 NSArray 以将其作为函数的参数传递给某个类。我正在尝试

```
myArray=[[NSArray alloc] initWithObjects:doAdd, doEdit, nil]; 
```

但它不适合我。有什么办法可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:44:52.447

方法不是对象。您不能将方法添加为对象。您可以做的是添加一个指向该方法的指针，然后像[这里](https://stackoverflow.com/a/575321/986169)显示的那样使用它。

# ruby-on-rails - 请解释 Rails 缓存在这种情况下的行为

> ID：10101095
> 
> 赞同：0
> 
> 时间：2012-04-11T06:39:15.010
> 
> 标签：ruby-on-rails, caching

想象一下，我有 5 个标签：`tag1,tag2...tag5`. 如果我执行以下操作：

```
Rails.cache.fetch("all.tags") { Tag.all } 
```

然后我写`Rails.cache.fetch("all.tags")`了，我看到了 5 个标签。如果我添加另一个标签，并尝试再次从缓存中获取，新标签也会被加载。这是为什么？

编辑：这是我的实际代码：

```
Rails.cache.fetch("autocomplete.#{term}") { puts "Cache miss #{term}"; Tag.starting_with(term) } 
```

在哪里`starting_with`可以找到以某些字母开头的标签。这是我在控制台中得到的行为：

```
1.9.3p125 :046 > Rails.cache.read("autocomplete.ta")
  Tag Load (1.0ms)  SELECT "tags".* FROM "tags" WHERE (name like 'ta%')
 => [#<Tag id: 10, name: "tag1">, #<Tag id: 11, name: "tag2">, #<Tag id: 12, name: "tag3">, #<Tag id: 13, name: "tag4">]
1.9.3p125 :048 > Tag.create(name:"tag5")
   (0.2ms)  begin transaction
  SQL (1.0ms)  INSERT INTO "tags" ("name") VALUES (?)  [["name", "tag5"]]
   (150.9ms)  commit transaction
 => #<Tag id: 14, name: "tag5"> 
1.9.3p125 :049 > Rails.cache.read("autocomplete.ta")
  Tag Load (0.8ms)  SELECT "tags".* FROM "tags" WHERE (name like 'ta%')
 => [#<Tag id: 10, name: "tag1">, #<Tag id: 11, name: "tag2">, #<Tag id: 12, name: "tag3">, #<Tag id: 13, name: "tag4">, #<Tag id: 14, name: "tag5">] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:06:10.177

这是不可能的 。

缓存作用于键/值对。

```
Rails.cache.fetch("all.tags") { Tag.all } 
```

它将始终返回存储键 "all.tags" 的值。

您能否尝试读取是否存储在缓存中的值。然后添加新标签

```
Rails.cache.read("all.tags") 
```

根据您的问题，我知道这不是答案，但我也很想知道它为什么会发生。

你还在用缓存设置做其他事情吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:13:23.077

您没有显示代码，`Tag.starting_with_term`但我敢打赌它是一个范围或返回类似范围的东西，即类似于以下内容的东西

```
Tag.where(...) 
```

`Tag.all`这与你最初的问题根本不同：`Tag.all`是一个数组，但上面是一个范围。范围是懒惰地评估的，仅当您在范围上调用要求范围是实际数组的方法时才从数据库请求行。

这里发生的是您正在缓存实际范围，而不是范围将选择的行。另一种看待它的方式是说，此时您正在缓存构成查询的条件，而不是查询结果。

当您从缓存中读取时，您的范围将从缓存中检索，并且尝试显示它的行为会强制 rails 对其进行评估。此评估发生在从缓存中检索范围之后，因此您始终可以获得新的结果。

最简单的事情是强制评估范围，即类似

```
Rails.cache.fetch('cache_key') { Tag.starting_with(term).all } 
```

# maps - 谷歌地图 api 3 - 如何打开信息窗口，来自 FusionTables 的多边形，点击 html 元素

> ID：10101098
> 
> 赞同：0
> 
> 时间：2012-04-11T06:39:29.957
> 
> 标签：maps, infowindow

所以我有一个问题；我有调用 2 个 Fusion 表的 google api 3 代码，现在我想添加一些可单击的 html 元素，当单击时，它们会从 fusion 表中调用某些多边形并自动打开它们的（已经自定义的）信息窗口。

我的代码在这里：http: [//jsfiddle.net/zVaGN/1/](http://jsfiddle.net/zVaGN/1/)

我想得到这个效果： [http ://econym.org.uk/gmap/example_egeotestmon.htm](http://econym.org.uk/gmap/example_egeotestmon.htm)

我一直在看这段代码，但我找不到解决方案，因为我不擅长编码。我需要一些函数，通过调用一些属性（融合表中的列）从融合表中调用一个层，然后当用户单击一个 html 元素时，会弹出特定层的信息窗口。

请帮助伙计们！

更新：单击多边形时已经可以获取信息窗口，但我想获得在单击另一个 html 元素时打开信息窗口的效果，请看一下这个例子：jsfiddle.net/zVaGN 这里我放了顶部的链接，在地图之前，上面写着“Sisak”，现在我希望当我点击这个链接时，这个多边形的信息窗口（在我的 fusiontalbe 中名为 Sisak）会弹出。这可能吗？

更新 2：所以我已经有了在 fusiontables 中制作的自定义信息窗口，我只希望该函数使用 fusiontable 值查询 html 元素中的值并调用 infowindow 弹出窗口？你明白吗，所以我有我的多边形，我有每个多边形的自定义信息窗口，现在我想在我的 googlemap 之外制作一个 html 列表，以便当用户点击侧边栏列表中的特定名称时，然后是那个信息窗口多边形弹出？

我试过把这段代码调用 fusiontables 中的信息窗口，但我不工作。这是谷歌API：

```
 function izbor() {
var infowindow = google.maps.FusionTablesLayer({
    });
infowindow.open(map);

} 
```

稍后在 html 正文中，我尝试实现此功能：

```
<div style="position:absolute; top:700px; left:100px;" >
<a href="#" title="Sisak" value="Sisak" onclick="izbor()">Sisak</a><br />
</div> 
```

但是没有发生这种情况

我还尝试了这段代码来调用在具有 div class="googft-info-window" 的 fusiontables 中创建的 infowindow：

```
function izbor() {
var infowindow = new google.maps.InfoWindow({
query: {"SELECT '.googft-info-window' FROM" + tableid};
    });
infowindow.open(map);
} 
```

但什么也没有发生

还使用 ExtendedData 尝试了此代码，因为当我将 fusiontable 导出到 kml 时，它会将 infowindow 解析为 ExtendedData

```
function izbor() {
var infowindow = new google.maps.InfoWindow({
query: {" SELECT 'ExtendedData' FROM " + tableid};
    });
infowindow.open(map);
} 
```

但又没有:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:10:17.927

您的示例使用多边形，并且可以处理单击它。您也可以处理点击，但只能在您区域（图层）的边界上

```
google.maps.event.addListener(layer, 'click', function()
{
    // Your info window should be opened here
    alert("Clicked");
}); 
```

点击区域**边界**查看:)

**更新：**

```
function izbor() {
    layer.setOptions({
        query: "SELECT geometry FROM " + tableid + " WHERE Naziv = 'Sisak'"
    });

    var infowindow = new google.maps.InfoWindow({
        content: "Info"
        , position: new google.maps.LatLng(44.75324026267657, 16.810970306396484)
    });
    infowindow.open(map);
} 
```

# osx-lion - 我可以从 Xcode3.2 启动 Xcode 4 应用程序吗

> ID：10101099
> 
> 赞同：1
> 
> 时间：2012-04-11T06:39:30.237
> 
> 标签：osx-lion, osx-snow-leopard, xcode4.3, xcode3.2

考虑在 Lion 中在 Xcode 4.3 上开发的应用程序，并在该应用程序中使用 lion 的 api。我有另一个应用程序在雪豹的 Xcode 3.2 上运行。我可以从雪豹的 Xcode 3.2 启动 Xcode 4 应用程序吗？我认为我们需要处理已弃用的 api。除了已弃用的 api 之外，我是否需要注意任何其他预防措施。

# javascript - jQuery 选择器

> ID：10101108
> 
> 赞同：5
> 
> 时间：2012-04-11T06:40:01.303
> 
> 标签：javascript, jquery, jquery-selectors

在这里需要我的 jquery 一点帮助

我希望所有名称以“my-”开头并以“-press”结尾的按钮都有一个“click”事件。

```
<input type="button" id="my-button-x-press" name="my-button-x-name-press" /> 
```

动态添加到 DOM 的按钮应该具有相同的事件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T06:41:48.010

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

```
$('input[type=button][name^=my-][name$=-press]').click(function() {
   // code
}) 
```

要动态地将事件分配给元素，请使用`on` [http://api.jquery.com/on/](http://api.jquery.com/on/)并提供您的选择器作为正确`delegate`事件的第二个参数。

```
$('#container').on('click', 'input[type=button][name^=my-][name$=-press]', function() {
   // code
}) 
```

假设您将输入包装在 上`#container`，否则替换`#container`为`body`，但始终最好选择最接近的祖先`selector`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T06:43:52.997

您可以使用[属性 equals selector](http://api.jquery.com/attribute-equals-selector/)，[属性以 selector 开头，属性以 selector](http://api.jquery.com/attribute-starts-with-selector/)结尾[，](http://api.jquery.com/attribute-ends-with-selector/)以及[委托](http://api.jquery.com/delegate/)方法来捕获稍后添加的元素的事件：

```
$('body').delegate('input[type=button][name^="my-"][name$="-press"]', 'click', function(){
  ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:41:56.903

给他们上一堂课，然后做：

```
$('.classname').click(function(){etc.}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T06:45:15.787

你可以这样做

```
$('#my-'+dunamic_change_here+'-press').click(function(){
  // your code
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T06:45:42.680

在我的头顶上：

```
$('input[name^="my-"]input[name$="-press"]').click(function(){
    //Stuff to happen.
}); 
```

如果它们被动态添加到 dom 中：

```
$('input[name^="my-"]input[name$="-press"]').on('click', function(){
    //Stuff to happen.
}); 
```

Matpols 的答案可能是最简单的方法。

# android - 如何在android上通过TranslateAnimation逐步移动视图

> ID：10101116
> 
> 赞同：1
> 
> 时间：2012-04-11T06:41:19.317
> 
> 标签：android, android-animation, translate-animation

我想逐步将视图从 (-100, 0) 移动到 (-50, 1) 到 (10, 1) 到 (100, 2) 。我试过翻译动画。但我失败了。它只适用于第一步，之后移动不像我设置的那样。

这是我的代码：

```
x1 = (0-layoutW);
x2 = (45*Constant.metricW-layoutW);
y1 = layoutH;
y2 = ((356-layoutH)*Constant.metricH);
Animation step1 = new TranslateAnimation(
            Animation.ABSOLUTE, x1, Animation.ABSOLUTE, x2,
            Animation.ABSOLUTE, y1, Animation.ABSOLUTE, y2 );
step1.setStartOffset(300);
step1.setDuration(100);
step1.setInterpolator(new AccelerateInterpolator());
animationSet.addAnimation(step1);

x1 = (45*Constant.metricW-layoutW);
x2 = (86*Constant.metricW-layoutW);
y1 = ((356-layoutH)*Constant.metricH);
y2 = ((288-layoutH)*Constant.metricH);
Animation step2 = new TranslateAnimation(x1, x2, y1, y2);       
step2.setStartOffset(400);
step2.setDuration(100);     
step2.setInterpolator(new AccelerateInterpolator());
step2.setFillAfter(true);
animationSet.addAnimation(step2); 
```

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:20:44.453

我认为问题是布景一次执行所有动画

你可以试试

[http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)

添加下一步`onAnimationEnd()`

# sql-server-2008 - SQL Server 2008 中的逗号分隔值

> ID：10101119
> 
> 赞同：1
> 
> 时间：2012-04-11T06:41:32.403
> 
> 标签：sql-server-2008, csv

我有逗号分隔的值。我需要一个查询以插入具有不同行的 SQL Server 2008

> Bedford、Bloomfield、Broad Top、Colerain、Cumberland Valley、East Providence、East St. Clair、Harrison、Hopewell、Juniata、Kimmel、King、Liberty、Lincoln、Londonderry、Mann、Monroe、Napier、Snake Spring、Southampton、South Woodbury、 Union, West Providence, West St. Clair, Woodbury,Bedford, Coaldale, Everett, Hopewell, Hyndman, Manns Choice, New Paris, Pleasantville, Rainsburg, St. Clairsville, Saxton, Schellsburg, Woodbury,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:30:11.990

一种方法：

```
-- create a table to load the city names into
CREATE TABLE CitiesBulkLoad (CityName VARCHAR(100))

-- load the file into that staging table
BULK INSERT CitiesBulkLoad
FROM 'd:\commacities.txt'  -- replace with **YOUR** file name here!!
WITH
(
   FIELDTERMINATOR = ',',
   ROWTERMINATOR = ','
)
GO

-- now you should have the entries in that staging table 
SELECT * FROM CitiesBulkLoad 
```

# core-data - 处理 iCloud Core Data 错误

> ID：10101121
> 
> 赞同：2
> 
> 时间：2012-04-11T06:41:47.613
> 
> 标签：core-data, error-handling, icloud, transaction-log

我有一个图书馆风格的 iCloud + Core Data 设置。我正在开发的应用程序包含位于登录屏幕后面的用户数据。用户登录后，持久存储协调器被实例化，iCloud 存储被添加到其中。

这是我的用例和问题：

1）开始使用应用程序，数据正在存储到 iCloud 2）删除应用程序 3）再次构建到设备，登录应用程序，期望事务日志被调用并在本地存储中重新创建数据。4) 当使用慢速连接时，我在调试日志中出现错误，多次指出文件下载失败... 5) 应用程序是空的，现在看起来好像备份恢复失败。

我的配置确实是正确的，并且可以通过下降连接 100% 工作。

有没有办法强制 iCloud 立即重试下载这些文件？在允许用户进入应用程序之前，是否可以使用回调来确保这些文件已成功下载？

任何建议将被认真考虑！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:08:56.660

iCloud 是一项仍处于起步阶段的技术，尤其是与 Core Data 的集成。

iCloud 决定将内容推送到设备的时间间隔是不可预测的，不幸的是，目前无法强制 iCloud 检索数据。在苹果开发者论坛的某处，它说当 iCloud 内容下载失败时，它会稍后再试一次。

您现在也没有可以使用的回调，您的应用程序需要（如果可能）足够聪明，以便知道何时下载了正确的内容。根据您需要多少内容，您可以通过查看从通知中获得的数据来做一些清单： `NSPersistentStoreDidUpdateUbiquitousContentChangesNotification`如果有的话，并检查 userInfo 字典中插入（或更新、删除）的行。

我已经能够在应用程序中做类似的事情，当你的情况发生时，为用户加载本地商店，然后将商店迁移到无处不在的商店。

这些只是一些建议，您的情况可能会有很大不同。希望这至少在某种程度上有所帮助。

# c# - CS5001：没有定义入口点

> ID：10101124
> 
> 赞同：1
> 
> 时间：2012-04-11T06:41:50.780
> 
> 标签：c#

为什么我在编译时收到 CS5001: does not have an entry point defined 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:43:24.147

最常见的问题是您在定义 Main 方法时使用了小写的“m”。实现入口点的正确方法如下：

```
class test 
{
    static void Main(string[] args) 
    {
    } 
} 
```

# python - 即使我可以使用凭据进行 SSH，Fabric 也会要求输入密码

> ID：10101127
> 
> 赞同：23
> 
> 时间：2012-04-11T06:41:53.123
> 
> 标签：python, django, ssh, fabric

我在使用 Fabric 部署 Django 站点时遇到了一个奇怪的问题。我已经配置了两台服务器以使用密钥文件进行登录。我可以在没有密码的情况下通过 SSH 连接到两者。我可以正确运行一个工厂，

```
$ fab live pull
[mysite.com] Executing task 'pull'
[mysite.com] run: test -d proj
[mysite.com] run: test -d proj/.git
[mysite.com] run: git pull origin master
... 
```

而另一台服务器要求输入密码：

```
$ fab staging pull
[dev.mysite.com] Executing task 'pull'
[dev.mysite.com] run: test -d proj
[dev.mysite.com] Login password: 
```

fabfile 的设置非常明确

```
def staging():
    env.hosts = ['dev.mysite.com']
    env.user = 'bamboo'
    env.key_filename = '~/.ssh/id_dsa_bamboo' 
```

并直接从命令行运行 ssh

```
$ ssh bamboo@dev.mysite.com -i ~/.ssh/id_dsa_bamboo
Last login: Wed Apr 11 06:24:28 2012 from xxx.xxx.xx.xx
[bamboo@dev ~]$ 
```

我还尝试设置`env.use_ssh_config = True`并运行`~/.ssh/config`设置为

```
Host dev.mysite.com                                                                           
    User bamboo                                                                              
    IdentityFile ~/.ssh/id_dsa_bamboo                                                        
    ForwardAgent yes 
```

任何想法可能会发生什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-11T07:10:52.107

你可以加：

```
ssh.util.log_to_file("paramiko.log", 10) 
```

导入后到您的 fabfile 顶部，以获取有关授权过程的更多详细信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-27T01:16:09.507

对我来说，我必须使用以下命令重置 SSH 代理身份：

`ssh-add -D`

然后将我的密钥添加回来：

`ssh-add -K keyname`

小心，这将从 SSH 代理中删除所有身份。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-21T16:51:13.507

我不得不更新结构（可能在 osx 更新之后）：

```
sudo pip install --upgrade fabric 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T21:44:22.727

就我而言，我无法在日志文件中看到任何有用的信息。`ssh`但是，在第一次使用并启用 ssh-agent 转发连接到服务器后，我能够连接：

`ssh -A <user>@<host>`

然后我运行`fab`并连接，而没有按预期要求输入密码。

# java - 在 Table/TreeTable 上的 KeyPress 上搜索

> ID：10101138
> 
> 赞同：0
> 
> 时间：2012-04-11T06:42:58.300
> 
> 标签：java, swing, user-interface, jtable, jtree

我想搜索按键事件中的项目。像 JTree 一样，使用以下语句在按键上进行搜索 **setFocusTraversalKeysEnabled(false);**

JTable、JXTable、JXTreeTable 有什么方法吗？

我不想为此添加自己编写的代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:11:33.827

*   这对于[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)来说很简单，通过实现`RowFilter`，教程包含有关从中搜索的`JTextField`示例`JTable`

*   SwingX 有自己的 JXList、JXComboBox、JXTable（和/或 JXTreeTable???）装饰器

# python - Matplotlib 图例，跨列而不是向下添加项目

> ID：10101141
> 
> 赞同：36
> 
> 时间：2012-04-11T06:43:30.527
> 
> 标签：python, matplotlib, legend

对于下面的简单图，有没有办法让 matplotlib 填充图例，以便它从左到右填充行，而不是第一列然后第二列？

```
>>> from pylab import *
>>> x = arange(-2*pi, 2*pi, 0.1)
>>> plot(x, sin(x), label='Sine')
>>> plot(x, cos(x), label='Cosine')
>>> plot(x, arctan(x), label='Inverse tan')
>>> legend(loc=9,ncol=2)
>>> grid('on') 
```

![在此处输入图像描述](../Images/735ea7f65a6359d7d70ba79042843bdf.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-11T07:17:07.313

我能想到一种可能的方法。您可以随意[订购您的传奇物品](http://matplotlib.sourceforge.net/users/legend_guide.html#adjusting-the-order-of-legend-items)。您需要做的就是切换顺序，以便它会给您想要的结果。

```
import matplotlib.pyplot as plt
import numpy as np
import itertools

def flip(items, ncol):
    return itertools.chain(*[items[i::ncol] for i in range(ncol)])

x = np.arange(-2*np.pi, 2*np.pi, 0.1)
ax = plt.subplot(111)
ax.plot(x, np.sin(x), label='Sine')
ax.plot(x, np.cos(x), label='Cosine')
ax.plot(x, np.arctan(x), label='Inverse tan')

handles, labels = ax.get_legend_handles_labels()
plt.legend(flip(handles, 2), flip(labels, 2), loc=9, ncol=2)

plt.grid('on')
plt.show() 
```

![在此处输入图像描述](../Images/ec8903e4e78d32413b2e6dc4fffbc6c9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-11T22:23:20.067

默认情况下，图例将在添加新行之前填充所有分配的列。因此，您可以将句柄和标签重新排序在一起以利用这一点：

```
handles, labels = ax1.get_legend_handles_labels()
handles = np.concatenate((handles[::2],handles[1::2]),axis=0)
labels = np.concatenate((labels[::2],labels[1::2]),axis=0) 
```

# visual-studio-2010 - 在 Team Foundation Server 中结合“门控签入”和“持续集成”构建

> ID：10101144
> 
> 赞同：3
> 
> 时间：2012-04-11T06:43:34.133
> 
> 标签：visual-studio-2010, tfs, tfsbuild, gated-checkin

> 这个问题转移到 [如何防止门控签到将关键字 ***NO_CI*** 放在评论中](https://stackoverflow.com/questions/10106023/how-to-prevent-an-gated-chech-in-to-put-the-keyword-no-ci-in-the-comment)
> 
> 我用我获得的知识更详细地提出了这个问题

为了确保代码质量和单元测试，我已经在我的项目中建立了一个门控签入构建。

还有另一个构建定义要由签入（持续集成构建）触发，我希望在签入后构建它。

我的期望是，门控签入已执行，并且在成功构建和提交（由构建服务用户）之后触发另一个构建。

但这种情况并非如此。

有没有人知道我是如何让它工作的，持续集成构建也是由构建服务中的签入触发的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:31:04.110

一般来说，预计在 Gated-Build 发生并成功之后 - 之后不会自动发生任何其他事情。
TFS 延伸到实际上在提交注释中放置了一个预告片，臭名昭著`***NO_CI***`的实际上告诉 TFS 在此特定提交之后不要触发 CI 构建。
查看[此处](https://stackoverflow.com/questions/3829305/what-does-no-ci-stand-for)和[此处](https://stackoverflow.com/questions/8044776/why-is-no-ci-still-causing-a-continuous-intregration-build)以获取有关其工作原理的进一步说明。

实际上，如果您查看[此](https://stackoverflow.com/a/8054725/728929)答案，您可能会找到一种方法来获得您所追求的：@dkpatt 做错了什么，可能是您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T20:59:12.773

如何从构建中删除 NO_CI——

1.  在 WorkFlow 中打开构建模板（例如 DefaultTemplate）。

2.  搜索（当前文档/当前窗口）“NoCIOption”。

3.  Container 应标记为 SyncWorkspace 类型的“GetWorkspace”。

4.  打开属性 (F4)。

5.  将 NoCIOption 的值设置为 False。

6.  保存构建模板。

# c# - CheckBox Checked 事件抛出 NullReferenceException_

> ID：10101152
> 
> 赞同：1
> 
> 时间：2012-04-11T06:44:00.267
> 
> 标签：c#, wpf, xaml, checkbox

我有一个奇怪的情况，我不知道如何处理......在我的项目中，我有以下 TreeView，它在其 TreeViewItem 中包含复选框：

```
<DataGrid x:Name="dataGridVirtualMachinesInfo" ItemsSource="{Binding Path=SelectedItem.VMImagesInfo, ElementName=comboBoxUserName}"
                      Style="{DynamicResource RoundDataGridStyle}" RowDetailsVisibilityChanged="dataGridVirtualMachinesInfo_RowDetailsVisibilityChanged"
                      MouseLeftButtonUp="DataGrid_MouseLeftButtonUp" CanUserAddRows="False" Margin="24" AutoGenerateColumns="False" ClipToBounds="True"
                      AreRowDetailsFrozen="false" CanUserResizeRows="False" RowDetailsTemplate="{DynamicResource VMRowDetailsDataTemplate}"
                      Visibility="Visible" Background="White" VerticalAlignment="Top">
                <DataGrid.Resources>
                    <DataTemplate x:Key="VMRowDetailsDataTemplate">
                        <Border BorderThickness="2">
                            <Border.BorderBrush>
                                <SolidColorBrush Color="{DynamicResource ColorBorder}"/>
                            </Border.BorderBrush>
                            <Grid x:Name="gridRowDetail" Height="450" Width="Auto" Margin="0" Background="White" VerticalAlignment="Stretch" >
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="2*"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="10*"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="5*"/>
                                </Grid.RowDefinitions>
                                <Grid x:Name="gridCurrentVersion" Margin="0" Grid.RowSpan="1" Grid.Row="0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Label x:Name="lableCurrentVersion" Content="Current Version : " HorizontalAlignment="Left"
                                           Margin="5,0,0,0" VerticalAlignment="Center" Width="Auto" FontWeight="Bold"/>
                                    <TextBox x:Name="textBoxCurrentVersion" Text="{Binding CurrentVersion}" HorizontalAlignment="Left"
                                             Margin="105,0,0,0" TextWrapping="Wrap"  VerticalAlignment="Center" RenderTransformOrigin="0.432,0.365"
                                             Width="100" Height="Auto" Grid.Column="0" AcceptsReturn="True"/>
                                    <Button x:Name="buttonRestoreDefaults" Content="Restore Defaults" HorizontalAlignment="Right"
                                            Margin="0,2,95,2" VerticalAlignment="Center" Width="90" RenderTransformOrigin="0.213,-0.401" Grid.Column="0"
                                            d:LayoutOverrides="HorizontalAlignment, GridBox" Height="30" Grid.ColumnSpan="2"/>
                                    <Button x:Name="buttonSaveInfo" Content="Save Info" Click="buttonSaveInfo_Click" Width="90"
                                            Background="#FF2DD420"  Margin="0,2" HorizontalAlignment="Right" Height="30"
                                            VerticalAlignment="Center" RenderTransformOrigin="1.125,0.599" Grid.Column="1"/>
                                </Grid>
                                <GridSplitter x:Name="gridSplitterCurrVerAndSaveInfoButton" 
                                    ResizeDirection="Rows" 
                                    Grid.Column="0" 
                                    Grid.ColumnSpan="2" 
                                    Grid.Row="1" 
                                    Width="Auto" 
                                    Height="3" 
                                    HorizontalAlignment="Stretch" 
                                    VerticalAlignment="Stretch" 
                                    Margin="0">
                                    <GridSplitter.Background>
                                        <SolidColorBrush Color="{DynamicResource ColorBorder}"/>
                                    </GridSplitter.Background>
                                </GridSplitter>
                                <Grid x:Name="gridFeaturesAndProps" Margin="0" Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="3*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid x:Name="gridFeatures">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="2*"/>
                                            <RowDefinition Height="15*"/>
                                        </Grid.RowDefinitions>
                                        <Label x:Name="lableFeaturesSelection" Content="Features Selection" HorizontalAlignment="Left"
                                               VerticalAlignment="Top" FontWeight="Bold" Grid.Row="0" Margin="5,0,0,0"/>
                                        <TreeView x:Name="GroupViewFeaturesList" ItemsSource="{Binding Path=InstallPackage.Features.FeaturesTree}"
                                              ItemContainerStyle="{DynamicResource  TreeViewItemStyle}"
                                              Margin="5,0,0,5" FontFamily="Pescadero" BorderThickness="0" FontSize="13.333"
                                              Width="Auto" Height="Auto" Grid.Row="1" VerticalAlignment="Stretch" d:LayoutOverrides="GridBox">
                                            <TreeView.Resources>
                                                <Style x:Key="TreeViewItemStyle" TargetType="{x:Type TreeViewItem}">
                                                    <!--<Setter Property="Visibility" Value="{Binding Path=IsVisible, Mode=TwoWay, Converter={StaticResource boolToVis}}" />-->
                                                    <Setter Property="IsExpanded" Value="True" />
                                                </Style>
                                                <HierarchicalDataTemplate DataType="{x:Type nsMsiObjects:Feature}" ItemsSource="{Binding SubFeatures}">
                                                    <CheckBox x:Name="checkBoxFeatureSelection" Content="{Binding DisplayName}" Checked="checkBoxFeatureSelection_Checked"/>
                                                </HierarchicalDataTemplate>
                                            </TreeView.Resources>
                                            <TreeView.Background>
                                                <LinearGradientBrush EndPoint="1.204,0.5" StartPoint="0.056,0.5">
                                                    <GradientStop Color="White" Offset="1"/>
                                                    <GradientStop Color="#FFD4D7DB"/>
                                                </LinearGradientBrush>
                                            </TreeView.Background>
                                        </TreeView>
                                    </Grid>
                                    <GridSplitter x:Name="gridSplitterFeaturesAndInstallProps" 
                                        ResizeDirection="Rows" 
                                        Grid.Column="1" 
                                        Grid.RowSpan="2" 
                                        Grid.Row="0" 
                                        Width="3" 
                                        Height="Auto" 
                                        HorizontalAlignment="Stretch" 
                                        VerticalAlignment="Stretch" 
                                        Margin="4,0">
                                        <GridSplitter.Background>
                                            <SolidColorBrush Color="{DynamicResource ColorBorder}"/>
                                        </GridSplitter.Background>
                                    </GridSplitter>
                                    <Grid x:Name="gridInstallPropsAndExpendAdditionals" Margin="0" Grid.Column="2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid x:Name="gridInstallProps" Grid.Column="0" Margin="0" Width="Auto">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="2*"/>
                                                <RowDefinition Height="15*"/>
                                            </Grid.RowDefinitions>
                                            <Label x:Name="lableInstallationProperties" Content="Installation Properties" HorizontalAlignment="Left"
                                                   Margin="0" d:LayoutOverrides="GridBox" Grid.Row="0" Grid.Column="0" FontWeight="Bold" VerticalAlignment="Top"/>
                                            <ScrollViewer Grid.Row="1">
                                                <StackPanel x:Name="StackPanelInstallProps" Width="Auto" Height="Auto">
                                                    <!--<nsProject:ExpanderInstallProperties x:Name="expanderInstallProps" />-->

                                                </StackPanel>
                                            </ScrollViewer>

                                        </Grid>
                                    </Grid>
                                </Grid>
                                <GridSplitter x:Name="gridSplitterFeaturesAndComments" 
                                    ResizeDirection="Rows" 
                                    Grid.Column="0" 
                                    Grid.ColumnSpan="2" 
                                    Grid.Row="3" 
                                    Width="Auto" 
                                    Height="3" 
                                    HorizontalAlignment="Stretch" 
                                    VerticalAlignment="Stretch" 
                                    Margin="0">
                                    <GridSplitter.Background>
                                        <SolidColorBrush Color="{DynamicResource ColorBorder}"/>
                                    </GridSplitter.Background>
                                </GridSplitter>
                                <Grid x:Name="gridComments" HorizontalAlignment="Stretch" Margin="0" Width="Auto" Grid.Row="4">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="2*"/>
                                        <RowDefinition Height="10*"/>
                                    </Grid.RowDefinitions>
                                    <Label x:Name="lableComments" Content="Comments :" HorizontalAlignment="Left"
                                           VerticalAlignment="Top" Width="Auto" FontWeight="Bold" Grid.Row="0" Grid.RowSpan="1"
                                           Margin="5,0,33.866,-200" d:LayoutOverrides="Width"/>
                                    <TextBox x:Name="textBoxComments" Text="{Binding UserComments}" Margin="5" TextWrapping="Wrap"
                                             VerticalAlignment="Stretch" Height="Auto" VerticalScrollBarVisibility="Auto" Grid.Row="1"
                                             BorderThickness="3" AcceptsReturn="True" MaxWidth="{Binding ActualWidth, ElementName=gridComments}"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </DataGrid.Resources>
                <DataGrid.RowBackground>
                    <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                        <GradientStop Color="#FFB7CADE"/>
                        <GradientStop Color="#FF5F6264" Offset="1"/>
                    </LinearGradientBrush>
                </DataGrid.RowBackground>
                <DataGrid.Columns>
                    <DataGridTextColumn x:Name="dgTextColumnServerIP" Binding="{Binding VMServerIP}" Header="Server IP" IsReadOnly="True"/>
                    <DataGridTextColumn x:Name="dgTextColumnVMName" Binding="{Binding Name}" Header="Virtual Machine Name" IsReadOnly="True"/>
                    <DataGridTextColumn x:Name="dgTextColumnInstalledVersion" Binding="{Binding InstalledVersion}" Header="Installed Version"/>
                    <DataGridTemplateColumn x:Name="dgTemplateColumnUpgradeMajorVersion" Header="Upgrade Major Version">
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox x:Name="comboBoxMajorVersion" Height="Auto"
                                        SelectedIndex="0"
                                        ItemsSource="{Binding Path=InstallPackage.Versions,UpdateSourceTrigger=PropertyChanged}"
                                    />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox x:Name="comboBoxMajorVersion" Height="Auto"
                                          SelectedIndex="0"
                                    ItemsSource="{Binding Path=InstallPackage.Versions}"
                                    />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn x:Name="dgTemplateColumnUpgradeVersion" Header="Upgrade Version">
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox x:Name="comboBoxMinorVersion"
                                  SelectedIndex="0"
                                  ItemsSource="{Binding Path=SelectedItem.MinorBuildVersions, ElementName=comboBoxMajorVersion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  DisplayMemberPath="Version"
                                  SelectedValue="Version"
                                  SelectedValuePath="Version" 
                                  Margin="15,0,0,0" VerticalAlignment="Center" IsEditable="True" IsReadOnly="True"
                                  ToolTip="Choose user to display his virtual machines" Grid.Column="3" Width="220" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox x:Name="comboBoxMinorVersion"
                                  SelectedIndex="0"
                                  ItemsSource="{Binding Path=SelectedItem.Users, ElementName=comboBoxTeamName, UpdateSourceTrigger=PropertyChanged}"
                                  DisplayMemberPath="Name"
                                  SelectedValuePath="Name" 
                                  Margin="15,0,0,0" VerticalAlignment="Center" IsEditable="True" IsReadOnly="True"
                                  ToolTip="Choose user to display his virtual machines" Grid.Column="3" Width="220" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn x:Name="dgTemplateColumnUpgradeTypr" Header="Upgrade Type">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox Height="Auto" 
                                    ItemsSource="{StaticResource UpgradeTypeList}"
                                    SelectedItem="{Binding UpgradeType}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn x:Name="dgTemplateColumnExecuteUpgrade" Header="Execute Upgrade">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Style="{StaticResource GlassButton}" Content="Go!" Width="25" Height="25" Background="#FF2DD420"  Margin="2"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid> 
```

但是，当我突然扩展我的数据网格的行时，抛出了一个没有源代码的 NullReferenceException，所以我看不到它是从哪里抛出的。我认为由于某种原因它会在我设置 TreeView ItemsSource 时在创建复选框之前触发事件

这是用于设置 TreeView ItemsSource 的附加代码：

```
/// <summary>
    /// This function occur when selecting one of the rows from dataGridVirtualMachinesInfo
    /// opening its row details and setting its inner controls
    /// </summary>
    private void dataGridVirtualMachinesInfo_RowDetailsVisibilityChanged(object sender, DataGridRowDetailsEventArgs e)
    {
        string path = "Some Path.msi";
        TreeView featuresTree = dataGridVirtualMachinesInfo.GetRowDetailsInnerControl<TreeView>("GroupViewFeaturesList");
        if (featuresTree.Items.IsEmpty)
        {
            // get the selected row of dataGridVirtualMachinesInfo
            DataGridRow dgRow = dataGridVirtualMachinesInfo.GetSelectedRow(dataGridVirtualMachinesInfo.SelectedItem);
            VMImageInfo selectedRowVmInfo = dgRow.DataContext as VMImageInfo;
            selectedRowVmInfo.InstallPackage = new InstallationPackage();
            selectedRowVmInfo.InstallPackage.SetFeatures(path);          DisplayFeaturesGroupedByFeatures(selectedRowVmInfo.InstallPackage.Features.DisplayedFeaturesList);
        }
    } 
```

我该如何处理？我整天都在寻找答案，但找不到与此相关的东西

谢谢！

**更新：** 我已经按照您的要求添加了所有 DataGrid 及其详细信息另外您是对的，我不需要在后面的代码中设置 TreeView，所以我从那里删除了它并更改了 xaml 中的绑定路径。树视图是 DataGridRowDetails 模板的一部分 异常消息是：“对象引用未设置为对象的实例。” 由于源不可用，因此没有堆栈跟踪，可能发生在 xaml

再次感谢！

# c# - 以编程方式获取应用程序池标识

> ID：10101162
> 
> 赞同：37
> 
> 时间：2012-04-11T06:44:54.790
> 
> 标签：c#, iis, application-pool, applicationpoolidentity

如何在 C# 中以编程方式获取 appPool 的标识？我想要应用程序池用户而不是当前登录的用户。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-11T07:07:42.407

您可以使用`System.Security.Principal.WindowsIdentity.GetCurrent().Name`来标识当前应用程序正在其中运行的身份。[此链接](http://netpl.blogspot.com/2010/09/identity-of-application-pool-in-iis.html)提供了一个很好的实用程序，它显示了运行 aspx 的身份。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-30T10:55:24.163

您需要参考 Microsoft.Web.Administration（在 Microsoft.Web.Administration.dll 中）。Microsoft.Web.Administration.dll 位于 C:\Windows\System32\inetsrv。

```
//Add this to your using statements:
using Microsoft.Web.Administration;

//You can get the App Pool identity like this:    
public string GetAppPoolIdentity(string appPoolName)
{
    var serverManager = new ServerManager();

    ApplicationPool appPool = serverManager.ApplicationPools[appPoolName];
    appPool.ProcessModel.IdentityType = ProcessModelIdentityType.SpecificUser;
    return appPool.ProcessModel.UserName;            
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-08T12:58:35.483

另一种对我来说似乎可以正常工作并且不需要安装 Microsoft.Web.Administration 包及其军团依赖项的可能性：

```
string appPoolUserIdentity = WindowsIdentity.GetCurrent().Name; 
```

来自[forums.asp.net](https://forums.asp.net/t/1623599.aspx?Get%20the%20app%20pool%20identity%20user)

# html - 如何创建一个弹出窗口

> ID：10101167
> 
> 赞同：-2
> 
> 时间：2012-04-11T06:45:16.770
> 
> 标签：html, popup

许多网站都有非常好看的弹出窗口。例如结帐 [http://www.myntra.com](http://www.myntra.com)，当您将鼠标悬停在任何产品图像上时，它会显示 ** Quick View ** 按钮。我想知道如何实现这种类型的窗口。甚至 facebook 也有很好的发送消息界面。这些类型的窗口是否与新窗口不同。我知道如何创建一个新窗口。请告诉我这些叫什么？如何在 html 中开发类似的东西？

我尝试在网上搜索并使用 window.open() 方法创建了一个示例弹出窗口，但这给出了不同的外观

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:50:38.937

您可以尝试使用[jQuery 对话框](http://jqueryui.com/demos/dialog/)来实现该功能。例如： [演示](http://jsfiddle.net/4ntML/)

它有一个`Modal`属性，可以设置为true来实现模态对话框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:48:05.413

这种类型的“窗口”称为灯箱。例如，尝试查看[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T05:00:33.880

我已经尝试了上述选项，但是它们几乎没有问题，例如调整弹出窗口的高度和宽度，还更改了一些其他属性。我尝试了 jquery 对话框，然后我想到了创建一个 div 元素并将您的 html 内容放在 div 中，您只需将其 z-index 设置为非常高的级别并将其附加到 body 部分并查看它将作为弹出窗口，现在您可以轻松设置 div 或弹出窗口的属性。好吧，这对我来说很完美。每当我想要显示我的弹出窗口时，我都会使用 show() 和 hide() 方法。感谢以上所有答案，因为它们帮助我解决了问题并增加了我的知识。

# firefox - 没有插件容器的不同结果加载插件

> ID：10101170
> 
> 赞同：0
> 
> 时间：2012-04-11T06:45:48.593
> 
> 标签：firefox, npapi, browser-plugin

我正在尝试使用 VC2010-Express 的 npruntime-scriptable-plugin。

**没有插件容器的 Firefox。**

* * *

## 示例脚本插件

结果在这里：

NPN_Evaluate() 测试，document = [object HTMLDocument]

函数 bar([object Window]) 调用！

* * *

Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120407 Firefox/11.0

* * *

**带有插件容器的 Firefox**

* * *

## 示例脚本插件

结果在这里：

函数 bar([object Window]) 调用！

* * *

Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120407 Firefox/11.0

* * *

错过这条线

NPN_Evaluate() 测试，document = [object HTMLDocument]

这很重要，因为默认加载插件是启用插件容器的。怎么了？

2.) 插件崩溃（Firefox 关闭）使用------

modules/plugin/sdk/samples/npruntime/plugin.cpp 作者 Josh Aas Mon Nov 23 13:57:27 2009 -0500（在 Mon Nov 23 13:57:27 2009 -0500）

```
static LRESULT CALLBACK PluginWinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)

   745 {
   746   switch (msg) {   
   747     case WM_PAINT:
   ...
   756         if(p) {
   757           if (p->m_String[0] == 0) {
   758             strcpy("foo", p->m_String);
   759           }
   760 
   761           DrawText(hdc, p->m_String, strlen(p->m_String), &rc, DT_SINGLELINE | DT_CENTER | DT_VCENTER); 
```

我将第 758 行更改为

```
strcpy_s(p->m_String, 3+1, "foo"); 
```

如果版本字符串为空，Firefox 不会崩溃。这个更改/代码可以吗？

* * *

# cocos2d-android - 如何在 cocos2d android 中进行绘画？

> ID：10101173
> 
> 赞同：2
> 
> 时间：2012-04-11T06:46:01.730
> 
> 标签：cocos2d-android

我想像在原生 android 中那样在屏幕上绘画。这是 API 演示中的示例代码。[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)
我想在图层中做同样的事情。我也应该能够擦除油漆颜色。
请帮助我。提前致谢。

# android - 如何在android中获取和设置字符串资源值

> ID：10101174
> 
> 赞同：3
> 
> 时间：2012-04-11T06:46:18.050
> 
> 标签：android, string, android-resources

我已经声明了一个`String`：

```
<string name="Please">Please Select</string> 
```

在`res/values/Strings.xml`. 现在我想访问这个`String`值，但我能得到的可以去直到 id 不值，如：

```
 int i = findViewById(R.string.Please); 
```

但我想要的只是字符串的值`Please`。

感谢您的所有回答，但我的问题有点大

我想做的只是用 app_name 显示日期

从您的所有答案中，我可以获得 app_name 字符串，但我是否可以使用当前日期设置此 app_name

```
<string name="app_name">My app</string> 
```

我也要这样设置

```
My app(in Left alignment)             Date (in right aligment) 
```

并且在第一个活动开始时我想设置 app_name 而不是每个活动；

我认为它可能有用让我试试

```
setResource().setString(R.string.Please); 
```

但没有 setResource() 方法对不起。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T06:49:05.787

像这样试试

```
String temp = getResources().getString(R.string.Please); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T07:32:40.740

你不能设置一个字符串，它是静态的，并且不能在运行时改变，你想要做的是这样的

```
 Calendar cal = Calendar.getInstance();
        String date = cal.get(Calendar.DAY_OF_MONTH) + "/" + cal.get(Calendar.MONTH) + "/" + cal.get(Calendar.YEAR);
        setTitle(date); 
```

您试图将标题设置为日期吗？

要拥有两个标题有点困难，首先你需要一个布局，称之为 custom_title_1

这是该布局的 xml 代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/screen"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView android:id="@+id/left_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@string/custom_title_left" />
    <TextView android:id="@+id/right_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="@string/custom_title_right" />
</RelativeLayout> 
```

然后在您的代码中，在您调用 UI 之前，您需要调用它：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
```

然后设置你的内容视图

然后调用它来设置标题：

```
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title_1); 
```

现在您可以找到两个 textView 并设置文本：

```
TextView leftText = (TextView) findViewById(R.id.left_text);
TextView rightText = (TextView) findViewById(R.id.right_text);

Calendar cal = Calendar.getInstance();
String date = cal.get(Calendar.DAY_OF_MONTH) + "/" + cal.get(Calendar.MONTH) + "/" + cal.get(Calendar.YEAR);
String app_name = getString(R.string.app_name);
leftText.setText(app_name);
rightText.setText(date); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-11T06:50:53.553

试试这个。

```
String value = getResources().getString(R.string.Please); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T06:49:22.837

```
 String str = getResources().getString(R.string.Please); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T06:48:38.060

字符串资源不是视图。要使用字符串资源，您会这样做

```
@string/Please 
```

# database - PL/SQL: ORA-00942: 表或视图不存在 V$SQL

> ID：10101177
> 
> 赞同：9
> 
> 时间：2012-04-11T06:46:25.940
> 
> 标签：database, plsql, oracle10g, oracle11g

我创建了一个过程并在其中使用了以下语句。

```
select sql_id into v_sql_id from v_$sql where sql_text =v_sql; 
```

我收到以下错误`PL/SQL: ORA-00942: table or view does not exist`

我已经检查了它的所有者的同义词`PUBLIC`，所以它应该在这种情况下运行，但它不起作用。

另一件事我可以`select sql_id from v_$sql where sql_text =v_sql;`在简单的编辑器中完成。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T07:10:21.543

数据库字典相关或系统表（在本例中为 v_$sql）归 Oracle`sys`用户所有，需要特殊权限才能访问它们。您需要以身份登录 oracle 数据库`sysdba user`或获得这些特权（您的 DBA 可能会帮助您）才能访问数据字典视图。

如[本文所述](http://www.adp-gmbh.ch/ora/err/ora_00942.html)

```
The problem is that procedures don't respect roles; only directly granted rights 
are respected. So, that means that table_owner has to regrant the right to select 
```

因此，请尝试以下操作以在所有字典视图上授予 SELECT，以便您可以在 pl/sql 块中使用它。

```
grant select any dictionary to USERNAME 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:10:36.490

很可能您正在使用的用户通过角色而不是直接选择权限来访问视图。

不幸的是，通过角色获得的特权在运行 PL/SQL 时是无效的。

您需要让您的 DBA 直接将 SELECT 权限授予您的用户。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-09T14:34:36.397

[在这里](https://stackoverflow.com/questions/4098870/my-oracle-view-uses-a-table-that-doesnt-exist-but-i-can-still-query-it/20473024#20473024)查看我的答案。这可能是因为您在某处使用了特定的大写字母

# java - 从文件中查找所有未使用的静态变量

> ID：10101178
> 
> 赞同：1
> 
> 时间：2012-04-11T06:46:27.203
> 
> 标签：java, eclipse, static

我的 Eclipse 有 6 个相互依赖的项目（2 个成为 jar，其他 4 个是战争）实际上它是一个 jboss 项目，我有 4 个 portlet，现在我想检测一个类中的所有 stativ 变量（它基本上是一个常量文件）其他任何 ptoject 都没有使用它们

eclipse中是否有任何工具可以帮助我实现同样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:57:40.570

右键单击静态变量。你有2个选择。打开调用层次结构或引用 --> 工作区

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:00:57.883

选项 1：[依靠编译器](http://my.safaribooksonline.com/book/software-engineering-and-development/0131177052/how-do-i-know-that-i-m-not-breaking-anything/ch23lev1sec4)
假设您在该文件中有合理数量的常量，注释它们，并修复所有编译错误，取消注释使用的错误。
*这可能是更好地利用您的时间*

选项 2：[Eclipse](http://pmd-eclipse.sourceforge.net/)的[PMD](http://pmd.sourceforge.net/)。 你自己还没有尝试过这个特定的目的。

# xml - XSLT 生成文件夹

> ID：10101191
> 
> 赞同：5
> 
> 时间：2012-04-11T06:47:58.877
> 
> 标签：xml, xslt, xpath, xslt-2.0

我正在尝试将 XML 文件解析为较小的 XML 文件并将它们放入文件夹中。这些文件夹是根据 XML 中的一些元素生成的。

如何在 XSLT 中生成文件夹？我能够使用 xsl:result-document 生成文件，但到目前为止我还没有找到如何生成文件夹的运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:04:37.993

您不需要专门创建文件夹，只需提供完整的所需路径，例如`folder1/doc1.xml`. [例如](http://www.ibm.com/developerworks/xml/library/x-tipmultxsl/index.html)：

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<tests>
    <testrun run="test1">
        <test name="foo" pass="true" />
        <test name="bar" pass="true" />
        <test name="baz" pass="true" />
    </testrun>
    <testrun run="test2">
        <test name="foo" pass="true" />
        <test name="bar" pass="false" />
        <test name="baz" pass="false" />
    </testrun>
    <testrun run="test3">
        <test name="foo" pass="false" />
        <test name="bar" pass="true" />
        <test name="baz" pass="false" />
    </testrun>
</tests> 
```

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  version="2.0">

<xsl:output method="text"/>
<xsl:output method="html" indent="yes" name="html"/>

<xsl:template match="/">
<xsl:for-each select="//testrun">
<xsl:variable name="filename"
  select="concat('output1/',@run,'.html')" />
<xsl:value-of select="$filename" />  <!-- Creating  -->
<xsl:result-document href="{$filename}" format="html">
    <html><body>
        <xsl:value-of select="@run"/>
    </body></html>
</xsl:result-document>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T09:05:04.347

它可能依赖于实现，但是如果您使用 Saxon，那么`<xsl:result-document href="foo/bar/baz/sample.xml"/>`如果文件夹不存在，则将创建它们。

# ios - NSOpenPanel 是否在 ios 应用程序中不起作用

> ID：10101193
> 
> 赞同：-1
> 
> 时间：2012-04-11T06:48:05.983
> 
> 标签：ios, dialog, modal-dialog

你好。我是 ios 开发的新手。NSOpenPanel 必须做什么才能在 ios 应用程序中工作以打开对话框。有人可以帮我这样做吗？我对这个 NSOpenPanel 真的很震惊。我在这方面做了很多谷歌搜索。如果不是在ios应用程序中打开对话框必须使用什么。可以用我的例子解释一下吗？我也知道有模态视图控制器。可以请模态视图控制器的示例代码打开文件ios中的对话框..请....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:49:35.800

iOS 应用程序没有用户可见的文件系统，因此没有 NSOpenPanel。

# makefile - makefile 缩小文件

> ID：10101194
> 
> 赞同：0
> 
> 时间：2012-04-11T06:48:09.980
> 
> 标签：makefile

下面的代码不起作用，但旨在说明我想要实现的目标。我怎样才能使这段代码工作或者有更好的方法。我想将我所有的 CSS 文件合并到一个文件中，但想确保 BASE_CSS 下的所有文件都在该文件的顶部。

```
BASE_CSS = %reset.css %reset2.css %reset3.css
IGNORE_CSS = %main.min.css $(BASE_CSS)

CSS_FILES = $(filter-out $(IGNORE_CSS),$(wildcard \
  public/css/*.css \
  public/css/*/*.css \
  public/css/*/*/*.css \
))

minify:
  cat $(BASE_CSS) $(CSS_FILES) > public/css/main.min.css 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:34:50.260

这将做我认为你想要的：

```
# Note the ":=".
# If we use "=", it will run "find" every time ALL_CSS_FILES is mentioned.
ALL_CSS_FILES := $(shell find public/css -name *.css)

BASE_PATTERN = %reset.css %reset2.css %reset3.css

BASE_CSS = $(filter $(BASE_PATTERN), $(ALL_CSS_FILES))

CSS_FILES = $(filter-out $(BASE_PATTERN) %main.min.css, $(ALL_CSS_FILES))

minify:
        cat $(BASE_CSS) $(CSS_FILES) > public/css/main.min.css 
```

**编辑：**
要指定顺序，只需执行以下操作：

```
BASE_CSS = $(filter %reset.css, $(ALL_CSS_FILES))
BASE_CSS += $(filter %reset2.css, $(ALL_CSS_FILES))
BASE_CSS += $(filter %reset3.css, $(ALL_CSS_FILES)) 
```

# winforms - 是否可以在不显示控制台窗口的情况下运行 f# 脚本？

> ID：10101196
> 
> 赞同：4
> 
> 时间：2012-04-11T06:48:17.220
> 
> 标签：winforms, f#, f#-interactive

我有一个使用 Windows 窗体的 f# 脚本，我希望它在不显示控制台窗口 (fsi.exe) 的情况下运行。有可能吗？怎么做？下面是一个脚本示例。![控制台窗口截图](../Images/fcb17471caca8b9ea8d5f9fc88b9852b.png)

```
#r "mscorlib.dll"
#r "System.dll"

open System.IO
open System.Windows.Forms

let DoUsefulThing() = ()

let form = new Form()
let button = new Button(Text = "Do useful thing")
button.Click.AddHandler(fun _ _ -> DoUsefulThing())

form.Controls.Add(button)
form.ShowDialog() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T07:10:19.097

作为一种选择，您可以 PInvoke 并隐藏控制台窗口

```
#r "mscorlib.dll"
#r "System.dll"

open System.IO
open System.Windows.Forms

module FSI =
    [<System.Runtime.InteropServices.DllImport("user32.dll")>]
    extern bool ShowWindow(nativeint hWnd, int flags)
    let HideConsole() = 
        let proc = System.Diagnostics.Process.GetCurrentProcess()
        ShowWindow(proc.MainWindowHandle, 0)

FSI.HideConsole()

let DoUsefulThing() = ()

let form = new Form()
let button = new Button(Text = "Do useful thing")
button.Click.AddHandler(fun _ _ -> DoUsefulThing())

form.Controls.Add(button)
form.ShowDialog() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T08:16:09.270

`fsc`使用并编译成`.exe`不会显示控制台窗口的此类任务不是真正的答案。

我不认为`fsi`它是为你想要做的事情而设计的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T19:30:32.103

我猜你想运行 F# 可执行文件而不是脚本。在这种情况下，使用 Visual Studio（我使用的是 2017）创建 F# 控制台应用程序，并在 Project => Properties 中将输出类型设置为 Windows 应用程序（将编译器目标设置为 winexe）。

# model-view-controller - 使用从jsp获取的动态数据

> ID：10101200
> 
> 赞同：2
> 
> 时间：2012-04-11T06:48:33.723
> 
> 标签：model-view-controller, sencha-touch

在下面的代码中，我在嵌套列表中获取静态数据。但是代替静态数据，我想要动态数据，即从jsp获取的数据。我不知道该怎么做。

```
Ext.define('SenchaApp.store.Items', {
    extend: 'Ext.data.TreeStore',

    config: {
        model: 'SenchaApp.model.Item',
        defaultRootProperty: 'items',
        root: {
            items: [
            {
                text: 'Categories1',
                items: [
                    {
                        text: 'Subcategories1',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories2',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories3',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories4',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },

                ]
            },
            {
                text: 'Categories2',
                items: [
                    {
                        text: 'Subcategories1',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories2',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories3',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories4',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },

                ]
            },
             {
                text: 'Categories3',
                items: [
                    {
                        text: 'Subcategories1',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories2',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories3',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories4',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },

                ]
            },
             {
                text: 'Categories4',
                items: [
                    {
                        text: 'Subcategories1',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories2',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories3',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },
                    {
                        text: 'Subcategories4',
                        items: [
                            { text: 'Product1', leaf: true },
                            { text: 'Product2', leaf: true },
                            { text: 'Product3', leaf: true },
                            { text: 'Product4', leaf: true }
                        ]
                    },

                ]
            },
        ]
    }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:34:34.110

实际上你不必在这里使用 JSONP。将 Ajax 请求与 JSON 阅读器一起使用要容易得多。

根据您的代码，我想您的模型定义应该是这样的：

```
Ext.define('SenchaApp.model.Item', {
        extend: 'Ext.data.Model',
        config: {
            fields: ['text'],
        }
}); 
```

然后这将从服务器获取 JSONP 并填充您的商店：

```
Ext.define('SenchaApp.store.Items', {
    extend: 'Ext.data.TreeStore',

    config: {
        model: 'SenchaApp.model.Item',
        proxy: {
            type: 'ajax',
            url: enter_your_api_url_here,
            extraParams: {set your extra params if needed},
            reader: {
                type: 'json',
                rootProperty: 'items'
            }
        },
        autoLoad: true,
    }
}); 
```

希望能帮助到你。

PS：如果它不起作用，请在此处复制并粘贴您的 jsonp 文件链接，我会帮助您。

# c# - 不要将空字符串绑定到中继器控件

> ID：10101205
> 
> 赞同：0
> 
> 时间：2012-04-11T06:49:01.950
> 
> 标签：c#, asp.net, asp.net-3.5

我将字符串数组绑定到中继器控件，

```
string[] strPageSize = new string[25];

repPageSize.DataSource = strPageSize;
repPageSize.DataBind(); 
```

.aspx 页面代码

```
<asp:Repeater ID="repPageSize" runat="server">
                <ItemTemplate>                    
                    <a href="#" id="lnkPageIndex" rev="pageIndex" runat="server" onserverclick="lnkPageIndex_Click"><%#(string) (Container.DataItem)%></a>
                </ItemTemplate>
           </asp:Repeater> 
```

但是这个字符串数组可能包含`null`or`empty`字符串，我不想将它们绑定到我的控件。我怎样才能避免这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:56:04.893

您可以像这样使用 LINQ.Extensions 命名空间：

```
string[] strPageSize = new string[25];

repPageSize.DataSource = strPageSize.Where(s => !string.IsNullOrEmpty(s));
repPageSize.DataBind(); 
```

# android - 在android中解析jsonarray

> ID：10101209
> 
> 赞同：0
> 
> 时间：2012-04-11T06:49:11.310
> 
> 标签：android, json, parsing

我需要从下面的 json 解析 json 数组联系人

```
{

    },
    //Truncated for clarity
   ]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:08:52.683

解析很容易。首先获取[json-simple](http://code.google.com/p/json-simple/)并将其添加到您的项目中（或者您可以使用内置的 JSON 库，如果您喜欢该库中的所有内容都可以抛出 check `JSONException`）。

接下来，您的整个响应文本是一个有效的 JSON 对象。这样做：

```
JSONObject response = (JSONObject)JSONValue.parse(responseText); 
```

您的对象在“结果”键下有一组结果。你可以得到这样的：

```
JSONArray results = (JSONArray)response.get("result"); 
```

您的数组包含一组您想要迭代以获取每个对象的联系信息的对象。例如：

```
for (Object obj : results) {
    JSONObject entry = (JSONObject)obj;
    JSONArray contacts = (JSONArray)entry.get("contact");
    for (Object contact : contacts) {
        System.out.println(contact);
    }
} 
```

请注意，将 JSON 放在一起的人决定使用数组类型来保存每个单独的联系人条目。对象类型会更有意义，但按原样，`contact.get(0)`将为您提供联系人条目的类型代码（`t`、`w`等），并`contact.get(1)`为您提供实际的联系电话/地址/其他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:10:27.633

我认为这不是一个有效的 Json。正常的 Json 必须有一个`"Label"`: `"value"`。标签和值必须用冒号分隔`:`

```
"w","www.firmdale.com" 
```

应该是这样的

```
"w":"www.firmdale.com" 
```

[http://code.google.com/p/jsonvalidator/](http://code.google.com/p/jsonvalidator/)

已编辑：根据**Aroth更加清晰和具体**

```
object
    {}
    { members } 
members
    pair
    pair , members
pair
    string : value
array
    []
    [ elements ]
elements
    value
    value , elements
value
    string
    number
    object
    array
    true
    false
    null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:59:52.740

```
 private JSONObject jObject;
 jObject = new JSONObject(your response as string);
 //this will give you json object for HotelInformationResponse
 JSONArray menuitemArray = popupObject.getJSONArray("result"); 
 // loop through this array to get all values 
```

欲了解更多信息，[请查看此链接](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)

# asterisk - 星号：来自 PC 的呼出和呼入

> ID：10101218
> 
> 赞同：-1
> 
> 时间：2012-04-11T06:49:55.537
> 
> 标签：asterisk

在我的项目中，我遇到了与电话呼叫模块相关的要求。要求如下：

呼出电话：

1.  拨打的电话必须由计算机操作（单击鼠标）。
2.  系统在呼叫时应该能够以文本形式显示与被叫方的最后一次对话。
3.  呼叫者、通话（在.wmv文件中）、电话是否接听（标志值）、通话时间、通话时长、通话类型（内部或外部）等详细信息应放在以这样的方式数据库，以便可以在编程语言（具体来说，Java）中轻松提取它
4.  所有对话都应保存在 .wmv 文件中。

来电：

1.  系统应该能够从数据库中检测到呼叫者，从而在屏幕上显示数据。
2.  系统应该能够检测到呼叫者的位置。
3.  系统应通过调用链接到各个调用者的数据库，并一次提供调用者的所有相关信息（如果它存在于数据库中）。

其他需求：

系统应该足够智能，可以与简单的专用电话线、IP 电话和 IVRS 系统（特别是 IVRS DX-2000）一起工作；至少两个。

如果您能在这方面帮助我，我将非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:08:00.793

我认为这些页面可能对您有所帮助：

[http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

[http://www.voip-info.org/wiki/view/Asterisk+config+extensions.conf](http://www.voip-info.org/wiki/view/Asterisk+config+extensions.conf)

[http://shop.oreilly.com/product/9780596517342.do](http://shop.oreilly.com/product/9780596517342.do)

但实际上最好聘请星号专业人士。

# windows-7 - 我无法 ping Windows 7 adhoc 网络中的任何人

> ID：10101219
> 
> 赞同：0
> 
> 时间：2012-04-11T06:49:57.830
> 
> 标签：windows-7, ping, adhoc

我们尝试在 Win7 中创建一个 adhoc 网络。我们创建了它，但我无法将 pind 发送给我的同行，但他们可以并获得 ACK，所以您知道这是为什么吗？是不是和电脑的安全设置有关。我关闭了所有的防火墙和防病毒程序，但还是一样。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:58:02.057

首先检查您的驱动程序可能是驱动程序问题，如果一切正常，然后在防火墙外做一件事，尽管这不是强制性的

# java - 这个 PriorityQueue 有什么问题？

> ID：10101221
> 
> 赞同：0
> 
> 时间：2012-04-11T06:50:08.453
> 
> 标签：java

```
fringe = new PriorityQueue<Node>(10,new Comparator<Node>(){
            @Override
            public int compare(Node node1,Node node2)
            {
                if (f(node1)>f(node2))
                    return 1;
                else
                    return -1;
            }
        }); 
```

我声明了一个 PQ 来存储一些节点，我想根据 f 值以非递减顺序存储节点。函数 f(Node node) 是计算节点的 f 值。所以我覆盖了比较器，但现在我发现一些具有较大 f 值的节点被放置在队列中具有较小 f 值的节点之前，我检查了所有但仍然找不到问题所在，我假设它可能是 PQ 声明的问题。任何人都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T06:55:00.167

见[这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/PriorityQueue.html)。我引用：

`The Iterator provided in method iterator() is not guaranteed to traverse the elements of the PriorityQueue in any particular order. If you need ordered traversal, consider using Arrays.sort(pq.toArray()).`

所有可以保证的是，根据比较器，顶部元素是最小的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:00:59.313

正如@izomorphius 所说，PriorityQueue 不保证完全排序，只是头部总是最小的。

如果您想要完整订单 - 您可能想要选择以下可能性之一：

1.  使用[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)- 但请注意它不允许重复。`equals()`此外，正如@JoonasPulakka 所述，您可能还想在这里覆盖`hashCode()`。
2.  使用 a [`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)- 填充它[无序]，然后使用[`Collections.sort(List,Comparator)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)根据您的比较器对其进行排序
3.  使用一个数组 [ `Node[]`]，填充它 [unordered]，然后使用[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)它根据您的比较器对其进行排序。

**编辑：**
您编辑的 Comparator 不强制执行完整排序，因此使用它的结果是未定义的：
let `a`, `b`be two `Node`s 这样`f(a) == f(b)`

```
compare(a,b) == compare(b,a) == -1 
```

但是[javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html#compare%28java.lang.Object,%20java.lang.Object%29)指出：

> 实现者必须确保所有 x 和 y 的 sgn(compare(x, y)) == -sgn(compare(y, x))。

因此，使用这个 [已编辑] 比较器的结果是未定义的。

**EDIT2：**
您的评论表明您正在寻找第二个标准 - “增加时间”。您可以将另一个字段添加`long timestamp`到您的`Node`对象，并在您`Comparator`返回基于此字段的结果当且仅当`f(node1) == f(node2)`. 这将保证一致性，并实现所需的功能。

注意：当您第一次将元素添加到队列中[或创建对象时，如果它是一个选项]，此字段将被初始化一次[并且只有一次！]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:53:55.003

你也覆盖了`equals()`吗？[正如Comparator docs](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)中指出的那样，

> 当使用能够施加与等于不一致的排序的比较器来对排序集（或排序映射）进行排序时，应谨慎行事。假设带有显式比较器 c 的有序集合（或有序映射）与从集合 S 中提取的元素（或键）一起使用。如果 c 对 S 施加的排序与 equals 不一致，则有序集合（或有序映射）将表现得“奇怪”。特别是有序集合（或有序映射）将违反集合（或映射）的一般合同，它是根据等式定义的。

另请注意，当您覆盖时`equals()`，您还必须覆盖，正如[Object docs](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)`hashCode()`中所指出的那样。

即使`PriorityQueue`不是（排序的）集合，如评论中所指出的那样，如果您想切换可以按特定顺序迭代的数据结构（队列不能，排序集可以），那么最好有`compare()`,`equals()`和`hashCode()`完全按照建议实施。

# php - 简单的 ajax 星级评分与 php

> ID：10101227
> 
> 赞同：0
> 
> 时间：2012-04-11T06:50:43.503
> 
> 标签：php, javascript, jquery, ajax, mysqli

我试图建立一个简单的 5 星评级系统，并设法彻底挫败了自己。我已经在使用名为“place”的表中的一个 PHP 查询。我有第二张标有“投票”的桌子。我对“地方”表没有任何问题，这些元素填充得很好。唯一的问题是让 Ajax 请求与 PHP 一起工作，此时这让 PHP 陷入困境。

我一直在尝试使用以下教程，但我的所有努力似乎都无法弄清楚是什么阻止了我的代码正确执行？

[http://sandbox.ronggur.com/2010/01/19/jquery-tutorial-simple-ajax-star-rating-with-php-extended/](http://sandbox.ronggur.com/2010/01/19/jquery-tutorial-simple-ajax-star-rating-with-php-extended/)

任何帮助是极大的赞赏。

这是我的代码

```
 <div id="pagewrap">
        <div id="widgets">
<?php

$dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

   $query = "SELECT * FROM place";

        $data = mysqli_query($dbc, $query)
            or die("Error: ".mysqli_error($dbc));   

            while ($row = mysqli_fetch_array($data)) 
            {       
                echo '<div class="content">';                                           
                    echo '<p id="type"> ' . $row['free'] . $row['paid'] . '</p>';  
                    echo '<div id="holder">';

                    echo '<div id="loc_cont"><a href="site_info.php?id=' . $row['placeId'] . '"><img id="place_logo" alt="' . $row['placename'] . '" src="' . THUMBNAILS . $row['thumb'] . '" /></a>';

                        echo '</div>';

                        echo '<div class="info">';

                        echo '<p id="loc">' . $row['placename'] . ' - ' . $row['city'] . '</p>';

                        echo '</div>';
                   echo ' </div>';
                    echo '<div class="review">';
                    echo '<div class="rates">';
                    include_once('PHP/rating.php');
                        #$star = fetchStar();
                        #echo '<h2>Star Rater - '. $row['placeId'] .'</h2>';
                        echo '<ul class="star-rating" id="star-rating-<'. $row['placeId'] .'"';
                            echo '<li current-rating-<'. $row['placeId'] .'" style="width:getRating('. $row['placeId'] .')%"><!-- will show current rating --></li>';
                                echo '<span id="'. $row['placeId'] .'">';
                                    echo '<li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>';
                                    echo '<li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>';
                                    echo '<li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>';
                                    echo '<li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>';
                                    echo '<li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>';
                                echo '</span>';
                        echo '</ul>';
                    echo '</div>';
                    echo '</div>';
               echo '</div>';
          }                  

mysqli_close($dbc);

?>
        </div>
</div><!--End PageWrap div-->
    <?php
    if($_GET['do']=='rate'){
         // do rate and get id
         rate($_GET['placeId']);
            }else if($_GET['do']=='getrate'){
             // get rating and get id
             getRating($_GET['placeId']);
            }

    // function to retrieve
    function getRating($placeId){
      $sql= "select * from vote where placeId = '".$placeId."' ";
     $result=@mysql_query($sql);
     $rs=@mysql_fetch_array($result);
     // set width of star
     $rating = (@round($rs[value] / $rs[counter],1)) * 20;
     echo $rating;
    }

    // function to insert rating
    function rate($placeId){
     $text = strip_tags($_GET['rating']);
      $update = "UPDATE vote SET counter = counter + 1, value = value + ".$_GET['rating']."  WHERE placeId = '".$placeId."' ";

     $result = @mysql_query($update);
    }
    ?>

/

 / JavaScript Document
     $(document).ready(function() {
     // get rating function

     function getRating(id){
     $.ajax({
     type: "GET",
     url: "../PHP/rating.php",
     data: "do=getrate&placeId="+id,
     cache: false,
     async: false,
     success: function(result) {
     // apply star rating to element
     $("#current-rating-"+id+"").css({ width: "" + result + "%" });
       },
     error: function(result) {
     alert("some error occured, please try again later");
     }
     });
     }

     // link handler
     $('.rates li a').click(function(){
     // get the parent id
     var idStar = $(this).parent().parent().attr('id');
     $.ajax({
     type: "GET",
     url: "../PHP/rating.php",
     data: "rating="+$(this).text()+"&do=rate&placeId="+idStar,
     cache: false,
     async: false,
     success: function(result) {
     // remove #ratelinks element to prevent another rate
     $("#ratelinks").remove();
     // get rating after click
     getRating(idStar);
     },
     error: function(result) {
     alert("some error occured, please try again later");
     }
     });

     });
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:57:47.920

内森，我现在没有和我一起喝咖啡，所以无法查看你的代码。但可以指导您链接到代码提示可用的类似内容。

[点击这里](http://www.tutorialswindow.com/search/star/Web-Development/Javascript-tutorials/Creating-5-Star-Rating-System-Using-JQuery-PHP-MySQL-83.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:08:16.630

你可以试试这个[http://orkans-tmp.22web.net/star_rating/index.html](http://orkans-tmp.22web.net/star_rating/index.html) 它很容易实现。

# ruby-on-rails - ActiveRecord 未使用 .build 在 has_many 关联上设置外键

> ID：10101228
> 
> 赞同：4
> 
> 时间：2012-04-11T06:50:53.270
> 
> 标签：ruby-on-rails, validation, activerecord, has-many

我有一个带有以下（简化）模型的 Rails 应用程序：

```
# member.rb
class Member < ActiveRecord::Base
  has_many :member_roles, :dependent => :destroy, 
           :autosave => true, :inverse_of => :member
end 
```

...

```
# member_role.rb
class MemberRole < ActiveRecord::Base
  belongs_to :member, :inverse_of => :member_roles
  validates_presence_of :member_id
end 
```

如果我尝试`.build`在关联上使用该方法，则创建的对象没有设置外键。这会导致它验证失败，或者没有验证就无法与`Member`.

```
# Rails console
> m = Member.find(280)
> mr = m.member_roles.build(:role_id => Role.find_by_name("Crew Chief").id)
=> #<MemberRole id: nil, member_id: nil, role_id: 6697350, start_date: nil, \
   end_date: nil, memo: nil, created_at: nil, updated_at: nil>
> mr.save!
ActiveRecord::RecordInvalid: Validation failed: Member can't be blank
> mr.save(:validate => false)
> mr
=> #<MemberRole id: 1834, member_id: nil, role_id: 6697350, start_date: nil, \
   end_date: nil, memo: nil, created_at: "2012-04-11 06:37:00", \
   updated_at: "2012-04-11 06:37:00"> 
```

这与[Rails 指南](http://guides.rubyonrails.org/association_basics.html)冲突：

> collection.build 方法返回关联类型的一个或多个新对象。这些对象将从传递的属性中实例化，并通过它们的外键创建链接，但关联的对象尚未保存。

显然，手动设置 member_id 很容易解决。但我想避免这种情况。我相信这段代码在以前版本的 rails 中可以正常工作；以上是 Rails 3.2.3 的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:12:27.780

我将粗略回答中的代码作为初始值设定项：[可以将嵌套属性与继承结合使用吗？](https://stackoverflow.com/questions/2553931/can-nested-attributes-be-used-in-combination-with-inheritance)

将其更改为：

```
class ActiveRecord::Reflection::AssociationReflection
  def build_association(*options, &block)
    if options.first.is_a?(Hash) and options.first[:type].presence
      options.first[:type].to_s.constantize.new(*options, &block)
    else
      klass.new(*options, &block)
    end
  end
end 
```

解决了这个问题。

# java - 处理程序未从 Web 服务记录任何内容，甚至不会引发错误（在使用 metro 的 tomcat 上）

> ID：10101229
> 
> 赞同：0
> 
> 时间：2012-04-11T06:50:53.257
> 
> 标签：java, web-services, tomcat, handler, java-metro-framework

我阅读了很多用于记录 Web 服务请求/响应的教程，发现它们都在做同样的事情，但我无法记录请求，但事情似乎是正确的，它甚至没有抛出错误。在这里我给出了我的示例代码，如果有人能告诉我错误在哪里以及错误是什么，那就太好了。

```
My web service 

@WebService(endpointInterface = "com.sample.ws.SampleWS", serviceName = "SampleWS")
@HandlerChain(file="/com/sample/ws/handler.xml")
public class SampleWSImpl implements SampleWS {
 public SampleWSImpl() {}
 public String hello(String s) {
 return "Hello "+s;
 }
}

 my handler.xml.

<?xml version="1.0" encoding="UTF-8"?>
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee">
 <handler-chain>
 <handler>
 <handler-class>com.sample.LoggingHandler</handler-class>
 </handler>
 </handler-chain>
</handler-chains>

my log handler class .

public class LoggingHandler implements SOAPHandler<SOAPMessageContext> {

 @Override
 public Set<QName> getHeaders() {
 return null;
 }

 @Override
 public void close(MessageContext context) {
 }

 @Override
 public boolean handleFault(SOAPMessageContext context) {
  logToSystemOut(context);
  return true;

    }

     @Override
     public boolean handleMessage(SOAPMessageContext context) {
     logToSystemOut(context);
      return true;
     }

 private void logToSystemOut(SOAPMessageContext smc) {

  Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

  try {
   if (!outboundProperty.booleanValue()) {

   SOAPMessage message = smc.getMessage();

  System.out.println("Incoming message:");
  ByteArrayOutputStream stream = new ByteArrayOutputStream();
  message.writeTo(stream);

  System.out.println(stream.toString());
  System.out.println("=====================================");                
   }
  }
  catch (Exception e) {
  System.out.println("Exception in handler: " + e);
  }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:18:20.097

您可以实现一个 MessageHandler，它应该可以工作：

公共类 MyLoggingHandler 实现 MessageHandler { private static final Logger LOGGER = LoggerFactory.getLogger(MyLoggingHandler.class);

```
public boolean handleMessage(MessageHandlerContext mhc) {
    Message m = mhc.getMessage().copy();

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    XMLStreamWriter writer = XMLStreamWriterFactory.create(stream);
    try {
        m.writeTo(writer);
        if(stream.size() > 0) {
            LOGGER.debug(">> Message << \n{}", new String(stream.toByteArray()));
        }
    } catch (XMLStreamException e) {
        LOGGER.error("Could not log the incoming message, something wrong with the xml?", e);
        return false;
    }
    return true;
}

public boolean handleFault(MessageHandlerContext mhc) {

    return true;
}

public void close(MessageContext messageContext) {
}

public Set getHeaders() {
    return null;
} 
```

}

# asp.net - 通过托管在我的 Intranet 中的公共 IP 访问我的 Asp.Net 网站

> ID：10101233
> 
> 赞同：1
> 
> 时间：2012-04-11T06:51:07.310
> 
> 标签：asp.net, iis

迄今为止，我在本地基础设施中托管了一个 Intranet 网站。对于特定要求，我需要允许外部供应商应用程序通过 Internet 联系我的站点以通过查询字符串发布一些值，即外部供应商应用程序将通过查询字符串值将一些数据发布到我的 asp.net 网站中的 Asp.Net 页面. 我已要求我们的网络团队允许供应商应用程序连接到我们的 Intranet 站点。网络团队的人现在为服务器分配了一个公共 IP，并要求供应商使用公共 IP 地址来调用我们的应用程序。

即使分配了公共 ip，外部应用程序仍然无法调用该页面。我尝试ping公共IP并且它正在ping。我通过从服务器访问 www.whatismyip.com 检查了服务器的 IP 地址，并且我正确获得了新的公共 IP。我也手动尝试通过公共 ip(http://public_ip) 访问应用程序，而我的 asp.net 网站无法访问。可能是什么问题呢？我是否需要更改服务器或路由器上的任何内容以使我的 asp.net 站点通过公共 ip 工作？

我目前在 inetmgr>Website 选项卡的 IPAddress 下拉列表中只看到服务器私有 ip（用于识别 Intranet 中的服务器的 ip）。此处未列出公共 ip..这可能是个问题吗？

请注意，我可以像往常一样通过服务器的私有 IP 浏览我的页面。感谢你的协助。

问候，

巴拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T15:37:07.867

在 IIS 管理器中，单击（选择）您想要在 Internet 上访问的站点，然后在右侧单击“绑定”。

![IIS 管理器 --> 编辑站点 --> 绑定](../Images/f90a822a52806f8767bbc782df702a69.png)

确保有一个条目指定您希望网站响应的 IP 地址和主机标头。

![在此处输入图像描述](../Images/ce3ee3de949ab346036e782589550cea.png)

**重要的！**

听起来您的服务器在内部 LAN 上运行。您希望网站出现的公共 IP 地址很可能在您的服务器上不存在*！*听起来您的网络团队可能已将外部公共 IP 地址转发到服务器的内部 LAN 地址。

*如果是这种情况*，当您指定站点的绑定时，请勿使用公共 IP 地址。使用已转发公共 IP 地址的服务器上的内部 LAN 地址。如果您不确定地址，只需检查默认站点的 Web 日志，因为现在应该有您访问该站点时的日志条目。

您的问题是此时的绑定。如果您访问的是默认站点，那是因为您想要的站点没有绑定，而是访问了默认站点（它会捕获未绑定到其他地方的所有内容）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:55:31.510

问题可能是2：

1.  网络服务器未绑定到该 IP 地址（如果您有两个网卡）
2.  该网站绑定到一个 url，而不是 IP 地址（我不知道用英语怎么说）我的意思是，如果您在 iis 首选项中将其设置为 website.com，则如果通过 ip 访问它将无法工作地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:54:59.230

检查 IIS 中的网站绑定并确保它包含新的公共 IP 地址。

# jquery - 模糊功能不适用于输入类型日期

> ID：10101234
> 
> 赞同：0
> 
> 时间：2012-04-11T06:51:14.287
> 
> 标签：jquery

我有一个这样的输入类型日期

```
<input type="date" id="install_date" name="install_date" required="required" placeholder="Install Date" /> 
```

我想调用一个函数

```
$("#install_date").blur(function() {
   // my code

}); 
```

但这不起作用，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:55:59.263

```
protected void Page_Load(object sender, EventArgs e)
    {
        install_date.Attributes.Add("onblur", "function_name()");           
    } 
```

在脚本中，添加如下函数，

```
<script type="text/javascript">
function function_name() {
    //your code.
}
</script> 
```

希望这会帮助你。

# meteor - 车把例外

> ID：10101241
> 
> 赞同：0
> 
> 时间：2012-04-11T06:51:35.410
> 
> 标签：meteor

任何提示以下异常可能是什么？

运行在：[http://localhost:3000/](http://localhost:3000/) 包中没有依赖信息。文件系统监控已禁用。错误阻止启动：捆绑应用程序时出现异常：错误

```
at Object.<anonymous> (/usr/local/meteor/lib/node_modules/handlebars/lib/handlebars/utils.js:11:34)
at Module._compile (module.js:441:26)
at Object..js (module.js:459:10)
at Module.load (module.js:348:32)
at Function._load (module.js:308:12)
at Module.require (module.js:354:17)
at require (module.js:370:17)
at Object.<anonymous> (/usr/local/meteor/lib/node_modules/handlebars/lib/handlebars.js:6:1)
at Module._compile (module.js:441:26)
at Object..js (module.js:459:10) 
```

我的 HTML：

```
<head>
    <title>dinokiller</title>
</head>
<body>
    <div id="outer">
        <div>
            {{> dinostemp}}
        </div>
    </div>
</body>

<template name="dinostemp">
    {{#each dinos}}
                <div>
                    <img src="{{pix}}"/>
                </div>
    {{/dinos}}
</template> 
```

和 JS：

```
Dinos = new Meteor.Collection("dinos");
// On server startup, create some dinos if the database is empty.
if (Meteor.is_server) {
  Meteor.startup(function () {
    if (Dinos.find().count() === 0) {
      var dinoPix = ["https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcRwVgHngNuY25hibRmniM1xsVhSlyf_ksctjjVMZ11zmX_kxzfe8w",
                    "https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcRFcKunc_qEdRzqyPgKGMHdSbwaiaiqGYMr8rfoRtBKNVf_U8O-",
                   "https://encrypted-tbn1.google.com/images?q=tbn:ANd9GcQbBCccfaS4QqAWrvUSxqyATiKMIitU5YMkdxJfo6ax4dsUxGmmbA",
                   "https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcTGVyjyj76ppSFsXTF5xjiWLw77oR7d9fxmVkkaj4dhsBWQioRz"];

    Dinos.insert({pix:dinoPix[0], div:"11"});
    Dinos.insert({pix:dinoPix[1], div:"22"});
    Dinos.insert({pix:dinoPix[2], div:"31"});
    Dinos.insert({pix:dinoPix[3], div:"44"});
    }
  });
}

// Set up a collection to contain player information. On the server,
// it is backed by a MongoDB collection named "dinos."
if(Meteor.is_client){
    Template.dinostemp.dinos = function(){
        return Dinos.find();
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:56:46.810

您需要`{{/each}}`关闭循环，而不是`{{/dinos}}`.

围绕格式错误的模板进行错误处理仍在进行中。

# java - 使用 python 的 Android 应用程序

> ID：10101249
> 
> 赞同：2
> 
> 时间：2012-04-11T06:52:25.563
> 
> 标签：java, android, python, eclipse, sdk

我发现可以从链接[http://www.linuxplanet.com/linuxplanet/tutorials/7157/1](http://www.linuxplanet.com/linuxplanet/tutorials/7157/1)通过 Python 完成 Android 开发。我的问题是，Java 中可用的所有库是否在 python 中也可用。

你们中的任何人已经开始在 Android 上使用 python，如果是，请指出链接以帮助我们的小组加快速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:54:09.350

不，并非所有库都已公开。您可以查看[google-code 上的 SL4A 项目，](http://code.google.com/p/android-scripting/)以获取有关其支持的更多信息。

> **这是一个完整的 API 桥，还是有限制？**
> BeanShell、JRuby 和 Rhino 基本上为您提供了一个完整的 API 桥（您可以直接调用 Java 调用）。有关如何完成此操作的说明，请参阅这些解释器的文档。像 Lua 这样的交叉编译语言受到更多限制。他们只能访问通过 RPC 层公开的 API。有关当前支持的 API 列表，请参阅 API 参考。RPC 层易于扩展。

# visual-studio-2005 - 不能在项目中包含静态库

> ID：10101250
> 
> 赞同：2
> 
> 时间：2012-04-11T06:52:31.100
> 
> 标签：visual-studio-2005, lnk2019

我正在 MS Visual Studio 2005 的解决方案中开发一个子项目。该子项目是一个 Windows CE 6.0 服务（作为 DLL），它包含在 Windows CE 6.0 OS 项目中。在子项目中，我需要使用“ceosutil.lib”中的一些函数（svsutil.hxx 是标题），但我无法将它链接到我的子项目。构建时，我收到以下类型的错误：“错误 LNK2019：未解析的外部符号”。

有趣的是，当我将项目类型切换为静态库时，它编译没有问题。如果我启动一个新的 DLL 项目（独立项目，而不是子项目），它也可以工作（“ceosutil.lib”已经在项目的附加依赖项和所有配置中列出）。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:45:25.213

我已经找到了我自己的问题的答案。解决方案是将库的名称（“ceosutil.lib”，在空格之后）添加到子项目属性的“链接”选项卡中的“附加库”字段中：

在 MS Visual Studio 2005 中：鼠标右键单击子项目名称 -> 属性 -> 链接选项卡 -> 附加库。

默认值为：`$(_PROJECTROOT)\cesysgen\sdk\lib\$(_CPUINDPATH)\coredll.lib`

新值：`$(_PROJECTROOT)\cesysgen\sdk\lib\$(_CPUINDPATH)\coredll.lib ceosutil.lib`

更新：打开子项目（鼠标右键 btn -> 打开）并将路径粘贴到 TARGETLIBS 部分中的库更容易。结果将完全相同：

TARGETLIBS=\$(_PROJECTROOT)\cesysgen\sdk\lib\$(_CPUINDPATH)\coredll.lib\

# iphone - 一键隐藏按钮

> ID：10101253
> 
> 赞同：2
> 
> 时间：2012-04-11T06:52:44.797
> 
> 标签：iphone, objective-c, ios, xcode4.2

我想一键隐藏按钮。当用户触摸按钮时，该按钮应该隐藏但只需轻轻一按即可。按钮随机移动。移动按钮应在触摸时隐藏。我已经做到了，但在按了两三下后，它才被隐藏起来。我正在使用 touchupinside 事件。谁能帮我？

```
-(IBAction)clickButton1:(id)sender
{
    if (button1.tag==1)
    {
        button1.hidden=TRUE;
    }
    else
    {
        button1.hidden=FALSE;
    }
}
-(IBAction)clickButton2:(id)sender
{
    if(button1.hidden==TRUE && button3.hidden==FALSE) 
    {
        button2.hidden=TRUE;
    }
    else
    {
        button2.hidden=FALSE;
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:59:26.017

用这个按钮 touchUpInside 替换您的代码

```
-(IBAction)hide:(id)sender
{
    UIButton *tmp = (UIButton *)sender;
    tmp.hidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:31:38.150

您可以使用循环在 viewDidLoad 上创建按钮

```
-(void) viewDidLoad{
     for ( c = 0; c < 10; c++ ){
           Buttons[c] = [[UIButton alloc] init];
           Buttons[c].tag = c;
      }
} 
```

之后，您可以使用以下代码控制显示隐藏。

```
-(IBAction)yourActionMethod:(id)sender
{
    //your normal action codes here
    UIButton *tmp = (UIButton *)sender;
    if (tmp.tag == 0) {
          // some codes
    } else {....}

    //control buttons of the 

    for (int i = 0; i < tmp.tag; i++){
          Buttons[i].hidden = yes;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:00:48.447

用这个替换你的第一个 IBAction 方法：

```
 -(IBAction)clickButton1:(id)sender
{
  UIButton *button1 = (UIButton *)sender;
  if (button1.tag==1)
 {
   button1.hidden=TRUE;
 }
 else
 {
   button1.hidden=FALSE;
 }
} 
```

# iphone - 从子视图中关闭 ModalViewController

> ID：10101259
> 
> 赞同：2
> 
> 时间：2012-04-11T06:53:30.090
> 
> 标签：iphone, ios, xcode, modalviewcontroller, subview

我的函数调用有问题：

```
[self dismissModalViewControllerAnimated:YES]; 
```

在 MainViewController 中，我可以启动一个图像选择器并像往常一样通过单击取消按钮来关闭它。

```
(IBAction) LaunchInMain:(id)sender{

    MainAppDelegate *app = (MainAppDelegate *)[[UIApplication sharedApplication] delegate];

    //elcPicker is a customized image picker
    [app.viewController presentModalViewController:elcPicker animated:YES];
    [elcPicker release];
    [albumController release];

- (void)elcImagePickerControllerDidCancel:(ELCImagePickerController *)picker {
    [self dismissModalViewControllerAnimated:YES];
} 
```

现在，我不是直接在 Main 中启动它，而是先添加一个子视图，然后使用相同的启动方法从子视图启动图像选择器。

**问题：**

无法关闭图像选择器，并且无法再次显示子视图。因此，无论我点击什么，屏幕都将保留在图像选择器中。

我一直在尝试其他一些电话，例如没有任何成功：

```
[self dismissModalViewControllerAnimated:YES]; 
```

我很高兴有任何帮助或想法。如果您认为应该提供更多信息，我可以添加更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:02:45.007

可以试试

`[app.viewController dismissModalViewControllerAnimated:YES];`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T05:15:36.457

这可能对您有用：

```
[self.view dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T17:14:32.773

如果您从 UISplitViewController 呈现模态视图，则此方法有效。它还可以应用于许多其他方式...

首先，在您的 .h 文件中为您的 appDelegate 创建一个实例，( `AppDelegate_iPad *appDelegate`) 然后将其放入您的 viewDidLoad 或类似方法中：

```
ipadDelegate = (AppDelegate_iPad *)[[UIApplication sharedApplication] delegate]; 
```

现在，像这样呈现第一个模态视图：

```
 YOURVC *vc = [[YOURVC alloc] initWithNibName:@"YOURVC" bundle:nil];
    [ipadDelegate.splitViewController presentModalViewController:vc animated:YES];
    [vc release]; 
```

假设您有一个子视图，例如 UITableView，并且想要从 didSelectRowAtIndexPath 中关闭模式。使用子视图解除模式所需要做的就是在子视图的 .h 中创建另一个 ipadDelegate 实例（如果需要），再次引用 [[UIApplication sharedApplication] 委托]，然后解除：

```
[ipadAppDelegate.splitViewController dismissModalViewControllerAnimated:YES]; 
```

本质上，尽管可能很冗长，但如果您需要保持对presentingViewController 的持久引用，请使用您的appDelegate 的控制器来呈现和关闭模式......因为上述所有事情在我的情况下都不起作用。

如果您使用 ipadDelegate 进行演示，请确保检查 MainWindow_iPad.xib 中的演示模式。您的“过渡样式”应该是“Cover Vertical”，“Presentation”应该是“Current Context”，否则您的模态可能会出现在其他视图后面。

# c# - 如何在 C# 中实现 Dropbox 列表

> ID：10101262
> 
> 赞同：0
> 
> 时间：2012-04-11T06:53:57.017
> 
> 标签：c#, asp.net, drop-down-menu

我目前正在使用 ASP.NET 开发一个 C# 项目。我想实现一个保管箱列表。因此，用户从 Dropbox 开始并可以选择一种方法，并且在 Dropbox 旁边是一个 + 和 - 按钮，这使用户能够添加更多的 Dropbox。所以我想知道如何实现在 ASP.NET 中构建保管箱列表的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:37:04.917

您不需要任何服务器端代码，客户端脚本是满足您需求的理想解决方案。

拥有这样的 HTML：

```
<div id="MainPlaceholder">
    <div id="DropDownPlaceholder">
        <select name="myDropDown">
            <option value="1">First</option>
            <option value="2">Second</option>
            <option value="3">Third</option>
        </select>
        <button type="button" onclick="AddDropDown(this);">+</button>
        <button type="button" onclick="RemoveDropDown(this);">-</button>
    </div>
</div> 
```

您需要以下纯 JavaScript 才能使其工作：

```
<script type="text/javascript">
var added_counter = 0;

function AddDropDown(sender) {
    var parent = sender.parentNode;

    //make fresh clone:
    var oClone = parent.cloneNode(true);

    //append to main placeholder:
    parent.parentNode.appendChild(oClone);

    //store change in global variable:
    added_counter++;
}

function RemoveDropDown(sender) {
    //don't allow to remove when there is only one left
    if (added_counter <= 0) {
        alert("One drop down must exist");
        return;
    }

    var parent = sender.parentNode;

    //disable so value won't be passed when form submitted:
    parent.getElementsByTagName("select")[0].disabled = true;

    //hide:
    parent.style.display = "none";

    //store change in global variable:
    added_counter--;    
}
</script> 
```

代码有注释，但如果您需要任何进一步的解释，请随时询问。

[现场测试用例](http://jsfiddle.net/PmVJm/)。

**编辑**：由于您需要读取服务器端代码上的选定值，更好的方法是更改​​每个克隆下拉列表的名称：

```
var totalAddedCounter = 0;

function AddDropDown(sender) {
    var parent = sender.parentNode;

    //make fresh clone:
    var oClone = parent.cloneNode(true);

    //assign unique name:
    oClone.getElementsByTagName("select")[0].name += "_" + totalAddedCounter;

    //append to main placeholder:
    parent.parentNode.appendChild(oClone);

    //store change in global variable:
    added_counter++;
    totalAddedCounter++;
} 
```

现在棘手的部分是读取这些值。`dropboxlistID.Text`您将不得不遍历所有已发布的值来寻找您需要的东西，而不是普通的：

```
foreach (string key in Request.Form.Keys)
{
    if (key.StartsWith("dropboxlistID"))
    {
        string text = Request.Form[key];
        //.....
    } 
```

# extjs - 如何在 extjs 3.4 中定义全局变量

> ID：10101263
> 
> 赞同：1
> 
> 时间：2012-04-11T06:53:57.110
> 
> 标签：extjs, extjs3

我想声明一个全局变量，比如 var i=0; 在 extjs 3.4 中。为了检查“？”的最大出现次数 里面的按键监听器。我怎样才能做到这一点。

代码：

```
keypress: function(combo, e) {
            var i = 0;
            var charCode = e.getCharCode();
            if ( e.shiftKey && charCode === 63 ) {
                i = i+1;
                if(i=== 3){
                    alert('max three ?s allowed');
                }
            }
        } 
```

在这里，每次 i 变为零，所以我想将 i 声明为全局。

拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:57:20.510

如果您倾向于为您的应用程序使用 MVC 结构，只需在**app.js中定义它们**

注意：根据我的经验，全局变量应该是有意义的和大写的。例如：

`var MY_GLOBAL_VARIABLE = some_value;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:58:07.170

使用全局变量通常是个坏主意。

如果我是你，我会将我需要共享的变量封装在一个单例中。

PHP 代码：Ext.define('SahrdData', { singleton: true,

```
txt: 'myvalue', 
meh: 42 
```

});

# css - 通过另一个 Mixin 参数值包含一个 SASS Mixin

> ID：10101266
> 
> 赞同：3
> 
> 时间：2012-04-11T06:54:42.457
> 
> 标签：css, sass, mixins

我有这个：

![在此处输入图像描述](../Images/9adc33021ce805e3bb1828c9aa70e6f6.png)

正如你所看到的，我目前有一个包含按钮样式混合的条件，无论如何我可以*自动*包含一个吗？例如：

```
@mixin button($color)
  @include button-#{$color} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:50:51.267

看到上面的标记，我假设您已经尝试过插值并且它不起作用。只是一个想法-在这种情况下，[扩展](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend)不是更合适吗？`button-*`即以一定的*圆度*扩展单个mixins 。

话虽如此，您已经对按钮进行了`$color`参数化，但是您通过添加额外的复杂性来退后一步，即根据变量值包含预定义的 mixin！我假设您已经开始使用`button-blue`... `button-tree`mixins，然后出现需要`$circle`切换的要求？

实际上，如果您在mixin之外使用`button-blue`... ，我会说将“多个 ifs”切换逻辑抽象为一个函数指令是最易于维护的，例如`button-tree``button`

```
@function include-button-mixin($color) {
  @if $color == blue
    @include button-blue
  ...
} 
```

# ruby-on-rails-3 - Rails 3.1，从 habtm 关系中内化价值观？

> ID：10101268
> 
> 赞同：0
> 
> 时间：2012-04-11T06:54:54.890
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, internationalization, i18n-gem

我有一个 HABTM 类别的事件模型。这种关系工作正常，我可以毫无问题地从类别中插入/检索值。

我的问题是，有没有办法将这些类别的值进行国际化（I18n）。

类别模型

```
class Category < ActiveRecord::Base
 has_and_belongs_to_many :events
end 
```

事件模型

```
class Event < ActiveRecord::Base
....
has_and_belongs_to_many :categories
.... 
```

_form.html.haml（用于事件）

```
- Category.all.each do |category|
 .field
   = check_box_tag "category_ids[]", category.id, @event.category_ids.include?(category.id)
   = category.name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:08:21.023

我假设类别几乎是固定的（否则你将无法对它们进行任何 i18n）

一种解决方案是将数据库中的类别保存为键（带下划线），并为每个键添加 i18n 到您的语言环境文件：

```
en.yml

categories:
  some_category: "Some category text"
  some_other_category: "Some other category text"
  ...... 
```

如果你这样做`Category.all.map(&:name)`会导致`["some_category", "some_other_category", ....]`

在您看来：

```
- Category.all.each do |category|
 .field
   = check_box_tag "category_ids[]", category.id, @event.category_ids.include (category.id)
   = I18n.t("categories.#{category.name}") 
```

请注意，如果您尝试动态执行此操作，这不是一个好的解决方案（如果是这种情况，您将需要将翻译存储在数据库中，[这](https://stackoverflow.com/questions/1346939/rails-store-translations-in-database)可能会有所帮助）

# c# - MVC3。我如何使用它来检索 House Entity 中的数据？

> ID：10101274
> 
> 赞同：-1
> 
> 时间：2012-04-11T06:55:23.287
> 
> 标签：c#, nhibernate

```
public IList<House> GetFullList()
        {
            try
            {
                var session = SessionFactory.GetCurrentSession();

                return session.QueryOver<House>()
                    .OrderBy(x => x.Owner).Asc
                    .List<House>();  

            }
            catch (NHibernate.ADOException nex)
            {
                log.Error(System.Reflection.MethodBase.GetCurrentMethod().Name + " Error-- " + nex.ToString());
                throw new Exception(ExceptionConstants.ERR_DATABASE_ERROR);
            }
        } 
```

上面的代码在“PostService.css”上。现在我正在尝试使用该方法将我的所有数据从数据库中检索到一个名为 AllHouses() 的视图中。House 的实体包括。所有者、价格、位置和描述。如何将我的数据放入 GridView。我也想做“编辑”“删除”功能..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:03:14.280

只需遍历该方法返回的列表即可。因此，如果您在动作中将其称为表单：

```
// This code is in your controller

using  TemplateProject.Core.Entities;
// ...

public ActionResult HouseList()
{
   // call method to retrieve the list of houses
   var service = new PostService();
   var houses = service.GetFullList();

   // this will render the view called "HouseList", passing it the 
   // list of houses as view model
   return View(houses)
} 
```

例如，在`HouseList`视图 ( `HouseList.cshtml`) 中，您可以遍历房屋列表并将它们呈现在表格中：

```
@using TemplateProject.Core.Entities
@model IEnumerable<House>

<table>
   <thead>
      <th>Description</th>
      <th>Description</th>
   </thead>
   <tbody>
      @foreach(var house in Model)
      {
         <tr><td>@house.Description</td></tr>
         <tr><td>@house.Price</td></tr>
      }
   </tbody>
</table> 
```

如果您有一个 Grid 控件，您可以使用`Model`视图的属性来构建它。

# android - android eclipse中的警告

> ID：10101280
> 
> 赞同：1
> 
> 时间：2012-04-11T06:55:56.347
> 
> 标签：android, eclipse, warnings

谁能告诉我关于android eclipse中的以下警告。

“发生键绑定冲突。它们可能会干扰正常的加速器操作”。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:15:00.173

这意味着为两个不同的操作设置了快捷方式。如果您尝试执行相关的快捷方式，您将在右下角看到一个小框，您可以在其中选择要执行的操作。因此，对于某些有意义的操作来说，这不是一个严重的问题。

# image-processing - 钟形（高斯）曲线的统计分析

> ID：10101286
> 
> 赞同：0
> 
> 时间：2012-04-11T06:56:36.387
> 
> 标签：image-processing, opencv, statistics, plot, gaussian

在我的应用程序中，我正在获取包含屏幕上某些光源的投影的图像（由高速摄像机捕获）。

1-我的第一个任务是绘制光强度的 PDF 或强度分布图，它应该呈钟形或高斯分布，因为在中心，光强度将最大，而在末端它会减弱。像这样（例如，不是我的确切情况）： ![在此处输入图像描述](../Images/6820c8ef841d198412ec1541453e10f6.png)

在最坏的情况下，我将同时点亮一系列光源。在这种情况下，理论上我应该得到重叠的钟形曲线或高斯曲线，有些像这样：![在此处输入图像描述](../Images/815539d24374b5f290b85f665bee8a85.png)

给定光投影图像（如图中的那个），我如何绘制这样的曲线？

2-绘制高斯曲线后，接下来的工作就是分析相同的内容，例如找出曲线的宽度和高度。我该怎么做？

我想要这个应用程序的可执行文件，所以我的客户不接受 MATLAB 或类似工具提供的解决方案。我也希望解决方案能够实时或接近实时地工作。

我想 OpenCV 可以在这里使用。但在我开始之前，我想知道这个论坛上图像处理大师的意见。特别是对于上面的步骤-1，我需要一些输入。

这里有任何指示吗？

Rgrds,

赫什舍姆

注意：图片取自[http://pentileblog.com](http://pentileblog.com)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:47:02.437

要将 1D 高斯从 2D 中提取出来，您可以根据您的实际需要做几件事。- 你可以总结图像的每一列；- 您可以找到强度的局部最大值并仅复制该行图像的强度分布；- 您可以对图像进行阈值处理（以防您的最大值将饱和并因此处于平稳状态），确定剩余斑点的重心，并复制该行的强度分布；- 如果应用程序需要它（例如，如果斑点未水平对齐），您可以阈值、查找轮廓、确定多个局部最大值并获取多个强度配置文件。

要获得高度和宽度，这很容易，只需找到最大值以及曲线下降到最大值一半的左右点即可。标准差是两点之间的距离除以 2.35（[维基百科链接](http://en.wikipedia.org/wiki/Gaussian_function)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:48:41.937

好吧，我解决了它：

算法如下：

1-使用 cvSampleLine 读取图像的特定行

2- 使用 cvMinMaxLoc 知道一行中的最大像素值

3-注意这些线中的哪一条具有最高的像素值。让我们说行号。150

4- 绘制第 150 行的像素值。

我使用 MATLAB 来验证我的结果和图表，OpenCV 结果完全一样。谢谢你们的建议。

# xpath - 硒文件上传

> ID：10101287
> 
> 赞同：1
> 
> 时间：2012-04-11T06:56:38.327
> 
> 标签：xpath, selenium, selenium-rc

如何使用`selenium`.

如何给文件路径？

我`TextBox`的是只读的。我不能直接在`textbox`.

另外，如何停止 selinum 服务器，直到该文件完全上传。？

我的文件上传字段是一个不可见的字段。我使用 firebug add on 找到了它的代码。

添加文件之前的代码是这样的。

```
<input id="ctl00_ContentPlaceHolder1_AsyncfileUpload_ClientState" type="hidden" name="ctl00_ContentPlaceHolder1_AsyncfileUpload_ClientState" autocomplete="off" value="{'isEnabled':'true','uploadedFiles':[]}"> 
```

添加文件（doc文件）后。代码改为

```
<input id="ctl00_ContentPlaceHolder1_AsyncfileUpload_ClientState" type="hidden" name="ctl00_ContentPlaceHolder1_AsyncfileUpload_ClientState" autocomplete="off" value="{'isEnabled':'true','uploadedFiles':[{"fileInfo":{"FileName":"scope.docx","ContentType":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","ContentLength":12887},"metaData":"/wEFsAF7IlRlbXBGaWxlTmFtZSI6ImZyeWd1NGNqLmt1YSIsIkFzeW5jVXBsb2FkVHlwZU5hbWUiOiJUZWxlcmlrLldlYi5VSS5VcGxvYWRlZEZpbGVJbmZvLCBUZWxlcmlrLldlYi5VSSwgVmVyc2lvbj0yMDExLjEuNTE5LjM1LCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTEyMWZhZTc4MTY1YmEzZDQiffOraDjiYXPavAAMYOUAVVhGEKk8"}]}"> 
```

这里的 Xpath 是什么？

我尝试使用 xpath id="ctl00_ContentPlaceHolder1_AsyncfileUpload_ClientState"。我使用的代码是

`selenium.type("id="ctl00_ContentPlaceHolder1_AsyncfileUpload_ClientState","c:\\docfile1.doc");`

但它不起作用。

帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:13:06.867

您可以使用

```
selenium.type("xpath of text box","path of your file") 
```

或者对于 IDE

```
command=type
target=xpath_of_text_box
value=Path_of_your_file 
```

例子：

```
selenium.type("id=cvfile", "D:\\Automation\\resume.doc"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:50:41.227

对此的 XPath 表达式`input`将是`//input[@id='ctl00_ContentPlaceHolder1_AsyncfileUpload_ClientState']`.

但是，我担心这行不通，因为 Selenium 通常拒绝使用不可见的元素。此外，`hidden <inputs>`通常只是预填充数据的容器或脚本验证和编辑数据的容器。

您应该寻找`<input type='file' />`是否有一些，或者可能是 javascript 处理对封闭元素的点击（但坦率地说，通常情况并非如此 - 脚本倾向于对输入进行编辑，而不是在点击它们时） .

如果找不到，请发布更多代码。最好的东西是[SSCCE](http://sscce.org/)，所以获取页面的来源并使其裸露，从其中剥离我们不需要的所有内容。我们喜欢代码。我们喜欢任何裸露的东西。

And about the wait for the upload to be complete: There's no such default thing. If the file is sent during a usual form upload (by clicking the Submit button), then the browser will wait. If it is uploaded immediately, you'll have to wait smartly. Realize what changes after a successful upload, then wait for that element/message to appear. With Selenium 2 (WebDriver), this [can be done](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#implicitlyWait%28long,%20java.util.concurrent.TimeUnit%29) very [easily](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/Wait.html).

# android - 使用 Android Intent 与应用程序类中的数据对象传输数据

> ID：10101288
> 
> 赞同：1
> 
> 时间：2012-04-11T06:56:40.480
> 
> 标签：android, android-intent

我必须在活动之间转移对象。对象具有复杂的结构。我不确定该怎么做：将捆绑添加到意图或将数据存储在应用程序类中。哪种方法更好/性能和垃圾产生/？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T06:58:58.007

最安全的方法是将要传递的数据与`Intent`. 这将是可重用的，并避免混乱应用程序的全局对象空间。但是，此方法*稍微*耗时一些，因为您必须[`Serializable`](http://developer.android.com/reference/java/io/Serializable.html)为自定义类型实现或创建自定义[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html).

# objective-c - 如何在 NSTableView 中突出显示和编辑行（如 SnowLeopard 中的 iCal）？

> ID：10101294
> 
> 赞同：0
> 
> 时间：2012-04-11T06:57:01.337
> 
> 标签：objective-c, cocoa, nstableview

我想实现类似于 iCal 的实现。我想同时突出显示和编辑该行。我使用了基于单元格的表格视图。我尝试了以下事情。

```
 [self.tableView editColumn:0 row:[self.array count]-1 withEvent:nil select:YES];
 NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:[self.array count]-1 ];
 [self.tableView selectRowIndexes:indexSet byExtendingSelection:YES]; 
```

但是上面的代码突出显示了所有行，但没有突出显示当前行。我想突出显示当前行并想对其进行编辑。有什么提示可以做到这一点吗？

* * *

我想实现一些类似于**Mail**的东西。单击项目时，该行应突出显示，文本字段应突出显示。我不需要左侧的图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:27:09.030

```
Customized the TableViewCell and implemented the drawWithFrame.

-(void)drawWithFrame:(NSRect)cellFrame inView:(NSView*)controlView
{
    NSRect newFrame = cellFrame;
    newFrame.origin.x += 50;
    newFrame.origin.y += 2;
    newFrame.size.height -=4;
    [super drawWithFrame:newFrame inView:controlView];
} 
```

以下链接帮助我解决了这个问题。

[http://developer.apple.com/library/mac/#samplecode/SourceView/Introduction/Intro.html](http://developer.apple.com/library/mac/#samplecode/SourceView/Introduction/Intro.html)

# wpf - 如何从 TreeView 的 SelectedItem 中获取 TreeViewItem

> ID：10101300
> 
> 赞同：0
> 
> 时间：2012-04-11T06:57:53.130
> 
> 标签：wpf, treeview, selecteditem

当我有一个数据绑定的 TreeView 时，如何访问选定的 TreeViewItem？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-11T07:15:41.280

我找到了一种从 TreeView 获取选定 TreeViewItem 的简单方法，即使 TreeView 是 DataBound 也是如此。关键是有点反思。

```
private static FieldInfo _selectedContainer = typeof(TreeView).GetField("_selectedContainer", BindingFlags.NonPublic | BindingFlags.Instance);

public static TreeViewItem GetSelectedContainer(this TreeView treeView)
{
    return (TreeViewItem)_selectedContainer.GetValue(treeView);
} 
```

我希望这可以帮助别人。

# c++ - win32 线程在 activeX (C++) 中意外终止

> ID：10101307
> 
> 赞同：0
> 
> 时间：2012-04-11T06:58:24.437
> 
> 标签：c++, multithreading, activex, direct3d9

我正在开发一个 ActiveX 视频播放器。它是 DLL 中的进程内组件。我正在使用 Visual Studio 2010。

我需要它有一个单独的线程，它会在加载组件时启动一次，创建 Direct3D9 对象和 Direct3D9 设备，然后停止组件卸载并销毁这些对象。在组件运行时，如果需要，我希望该线程定期调用`TestCooperativeLevel`和重置 D3D 设备。

我这样做是因为客户端应用程序可以创建我的播放器的多个实例，但强烈建议只有一个 D3D9 对象和设备实例。

我已经声明了一个带有静态方法和成员的类，它的构造函数调用`_beginthreadex()`并启动线程。

这是代码摘录（有错误）。

```
// .h
class D3DManager {
    static mutex d3;  // mutex is my own class, just a wrapper around CriticalSection
    static LPDIRECT3D9 g_d3d;
    static LPDIRECT3DDEVICE9 g_d3ddev;
    static D3DPRESENT_PARAMETERS g_d3dpp;
    static int g_d3d_counter;
    static HANDLE hthread;
    static HANDLE exitev;
    static bool  exit_flag;
    static mutex exit_mutex;

 public:
    D3DManager();
    ~D3DManager();

    static unsigned int __stdcall thread(void *);
    static void stop(void)  { 
                       exit_mutex.lock(); 
                       exit_flag = true; 
                       SetEvent(exitev); 
                       exit_mutex.unlock(); }

    static bool exit_signal(void) { 
                       exit_mutex.lock(); 
                       bool result = exit_flag;
                       exit_mutex.unlock();
                       return exit_flag; }

    static void CreateD3DDevice(LPDIRECT3D9& d3dobj, LPDIRECT3DDEVICE9& d3ddev);
    static void DestroyD3DDevice(void);
    static void GetSwapChain(HWND hwnd, LPDIRECT3DSWAPCHAIN9& chain);
    static void release_d3d(void);
    static void LockDevice(void) { d3.lock(); };
    static void UnlockDevice(void) { d3.unlock(); };
};

//.cpp 

                    mutex D3DManager::d3;
              LPDIRECT3D9 D3DManager::g_d3d = NULL;
        LPDIRECT3DDEVICE9 D3DManager::g_d3ddev = NULL;
    D3DPRESENT_PARAMETERS D3DManager::g_d3dpp;
                      int D3DManager::g_d3d_counter = 0;
                   HANDLE D3DManager::hthread;
                   HANDLE D3DManager::exitev;
                    bool  D3DManager::exit_flag = false;
                    mutex D3DManager::exit_mutex;

          // this variable will be single and shared by all activeX instances
          static D3DManager d3dm;

    D3DManager::D3DManager() 
    {
        exitev = CreateEvent(NULL, true, false, NULL);
        hthread = (HANDLE)_beginthreadex(NULL, 0, thread, NULL, 0, NULL);
        _OutputDebugString("D3DManager: thread created handle %x\n", hthread);  // my wrapper around OutputDebugString

    }

    D3DManager::~D3DManager()
    {
        stop();
        HRESULT hr = WaitForSingleObject(hthread, 1000);
        if (hr == WAIT_ABANDONED) {
            TerminateThread(hthread, 0);
            release_d3d();
        }
        CloseHandle(exitev);
    }

    unsigned int __stdcall D3DManager::thread(void *) 
    {
        create_d3d9();
        while(!exit_signal()) {
             WaitForSignleObject(exitev, 500);
             d3.lock();
             HRESULT hr = g_d3ddev->TestCooperativeLevel();
             switch(hr) {
                 case S_OK:
                      break;
                 case D3DERR_DEVICENOTRESET : 
                      // Fill DISPLAYPARAMETERS
                      g_d3ddev->Reset();
                      break;
                 default:
                      break;
             }
             d3.unlock();
        }

    ///////// This text is never seen

        OutputDebugString("D3dManagert exit from while loop\n");

    ////////
        release_d3d();
        _endthreadex(0);
        return 0;
    } 
```

我的组件嵌入在 WindowsForms 表单中，用 C# 编写。

问题是当我关闭表单时，线程在 while 循环内终止，并且永远不会访问它之后的代码。我从未见过来自 的文本`OutputDebugString`，`release_d3d()`也从未调用过，而且我看到来自 d3d debug 的很多关于内存泄漏的消息。如果我设置断点，它永远不会被击中。

我看到的只是消息：

```
 The thread 'Win32 Thread' (0x1044) has exited with code 0 (0x0) 
```

当我在析构函数中设置断点时，我遇到了它，但是在有关视频内存泄漏的消息之后。

我还在 Studio 中启用了 C++ 异常和 Win32 异常的调试中断，但没有触发。

更新。在 MSDN 中读到所有线程都被终止，当它们中的任何一个调用`exit`,`_exit`或`abort`or`ExitProcess`并尝试在构造`atexit`函数处理程序中设置时：

```
 D3DManager::D3DManager() 
    {
         exitev = CreateEvent(NULL, true, false, NULL); 
         hthread = (HANDLE)_beginthreadex(NULL, 0, thread, NULL, 0, NULL);
         _OutputDebugString("D3DManager: thread created handle %x\n", hthread);
         atexit(&release_d3d);
     } 
```

仍然没有运气。`release_d3d`在我收到有关视频内存泄漏的消息后调用。此外，我有异常错误。

更新 2。

这是编辑后的代码

```
// .h
class D3DManager {
    static mutex d3;  // mutex is my own class, just a wrapper around CriticalSection
    static LPDIRECT3D9 g_d3d;
    static LPDIRECT3DDEVICE9 g_d3ddev;
    static D3DPRESENT_PARAMETERS g_d3dpp;
    static int g_d3d_counter;
    static HANDLE hthread;
    static HANDLE exitev;

 public:
    D3DManager();
    ~D3DManager();

    static unsigned int __stdcall thread(void *);
    static void stop(void)  { SetEvent(exitev); }

    static void CreateD3DDevice(LPDIRECT3D9& d3dobj, LPDIRECT3DDEVICE9& d3ddev);
    static void DestroyD3DDevice(void);
    static void GetSwapChain(HWND hwnd, LPDIRECT3DSWAPCHAIN9& chain);
    static void release_d3d(void);
    static void LockDevice(void) { d3.lock(); };
    static void UnlockDevice(void) { d3.unlock(); };
};

//.cpp 

                    mutex D3DManager::d3;
              LPDIRECT3D9 D3DManager::g_d3d = NULL;
        LPDIRECT3DDEVICE9 D3DManager::g_d3ddev = NULL;
    D3DPRESENT_PARAMETERS D3DManager::g_d3dpp;
                      int D3DManager::g_d3d_counter = 0;
                   HANDLE D3DManager::hthread;
                   HANDLE D3DManager::exitev;

          // this variable will be single and shared by all activeX instances
          static D3DManager d3dm;

    D3DManager::D3DManager() 
    {
        exitev = CreateEvent(NULL, true, false, NULL);
        hthread = (HANDLE)_beginthreadex(NULL, 0, thread, NULL, 0, NULL);
        _OutputDebugString("D3DManager: thread created handle %x\n", hthread);  // my wrapper around OutputDebugString

    }

    D3DManager::~D3DManager()
    {
        stop();
        HRESULT hr = WaitForSingleObject(hthread, 1000);
        if (hr == WAIT_TIMEOUT) {
            TerminateThread(hthread, 0);
            release_d3d();
        }
        CloseHandle(exitev);
    }

    unsigned int __stdcall D3DManager::thread(void *) 
    {
        create_d3d9();
        while(WAIT_TIMEOUT == WaitForSingleObject(exitev, 500)) {
             d3.lock();
             HRESULT hr = g_d3ddev->TestCooperativeLevel();
             switch(hr) {
                 case S_OK:
                      break;
                 case D3DERR_DEVICENOTRESET : 
                      // Fill DISPLAYPARAMETERS
                      g_d3ddev->Reset();
                      break;
                 default:
                      break;
             }
             d3.unlock();
        }

    ///////// This text is never seen

        OutputDebugString("D3dManagert exit from while loop\n");

    ////////
        release_d3d();
        _endthreadex(0);
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:48:08.410

我看到您的 exit_signal() 复制了该值但不返回它。在您退出同步代码块并且您的 exit_signal() 返回 false 后，变量 exit_flag 可能会发生更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:26:27.157

为什么要在停止对象上等待，然后，如果发出信号，仍然执行代码主体？尝试

```
while(WAIT_TIMEOUT==WaitForSingleObject(exitev, 500){
..
} 
```

另外，我不确定 !exit_signal() 和 exit_mutex 是干什么用的？为什么你需要一个互斥体，或者，当你已经有一个事件要发出信号时，你需要一个退出布尔值？除了停止之外，是否还有更多代码可以出于其他原因发出事件信号？我注意到你打错了 WFSO - 'WaitForSignleObject'，所以你没有发布你的真实代码。

也不起诉“如果（hr == WAIT_ABANDONED）”。我几乎从不等待线程终止，所以我不确定在等待线程句柄时是否/为什么会返回。

# google-maps-api-3 - 列作为变量

> ID：10101309
> 
> 赞同：0
> 
> 时间：2012-04-11T06:58:37.293
> 
> 标签：google-maps-api-3, google-fusion-tables

是否可以像变量一样传递列名。请编辑此代码。

```
 var columnname=hhSanitHouseType;
 var operator = ...;
 var textvalue = ...;
 layer.setQuery("SELECT 'geometry',hhSanitHouseType FROM " + tableid + " WHERE 'hhSanitHouseType'" + operator + " '" + textvalue + "'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:29:49.587

你似乎[一遍](https://stackoverflow.com/questions/10023791/fusion-table-column-name-query)[又一](https://stackoverflow.com/questions/10006357/googlemap-api-code-on-dropdown-and-text-box)[遍地问](https://stackoverflow.com/questions/9988662/javascript-and-fusion-table)[同样](https://stackoverflow.com/questions/9907101/fusion-table-query) 的[问题](https://stackoverflow.com/questions/10083120/fusiontable-query-for-where) [。](https://stackoverflow.com/questions/10006357/googlemap-api-code-on-dropdown-and-text-box)

我已经[给你答案了，](https://stackoverflow.com/a/10092118/549755)或者看看[Eric 的答案](https://stackoverflow.com/a/9941680/549755)。还是我错过了什么？

# php - 使用define()时对象的未定义属性

> ID：10101310
> 
> 赞同：0
> 
> 时间：2012-04-11T06:58:54.987
> 
> 标签：php

当我知道`myobject`将要声明 of 的属性时，为什么我不能执行以下操作：

`define('title','boats');`

`myobject->title`;

但这有效：

`myobject->boats`

这甚至是一种好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:04:13.017

你不能使用

```
$myobject->title 
```

因为这是试图访问`title`您的对象的属性。如果此属性不存在，则会触发错误。

您可以使用

```
$myobject->{title} 
```

但我宁愿看到你使用变量而不是常量，例如

```
$title = 'boats';
echo $myobject->$title; 
```

理想情况下，您将知道要访问哪个属性并适当地使用其名称

```
$myobject->boats 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:05:43.947

> 当我知道 myobject 的属性将被声明时，为什么我不能执行以下操作：

可能是因为 PHP 希望您使用方法名称来调用它。但是有一些选择：

```
<?php
define( 'METHOD', 'bar' );

class Foo {
    public function bar( ) {
        echo "Foo->bar( ) called.\n";
    }
}

$foo = new Foo;
call_user_func( array( $foo, METHOD ) );

// or
$method = METHOD;
$foo->$method( ); 
```

**编辑**：啊，我似乎误解了。我的版本是用于调用名称在常量中定义的方法，而您正在寻找一种调用属性的方法。好吧，无论如何我都会把它留在这里以备将来参考。

# jquery - .size()>1 的 Jquery 简写

> ID：10101313
> 
> 赞同：0
> 
> 时间：2012-04-11T06:59:00.760
> 
> 标签：jquery

我正在编写一个包含很多`$(".blahblah").size()>0`条件的代码。我想知道是否有一个 JQuery 速记它可以消除键入`>1`.

这里有一个建议：http: [//forum.jquery.com/topic/selector-exists-would-be-a-nice-addition](http://forum.jquery.com/topic/selector-exists-would-be-a-nice-addition)

类似的东西`$(...).exists()`可以派上用场。有这样的事吗？我在 Internet 上找不到它，我想知道是否有人知道技巧或 JQuery 团队中的任何人知道是否计划添加此类功能？

PS。我读过这个：[jQuery 有“存在”功能吗？](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:03:11.157

```
function moreThanOne(selector){
  return $(selector).length > 1;
} 
```

解决方案是为此使用函数，您也可以使用`length`而不是`size()`.

来自 Jquery 的文档

> .size() 方法在功能上等同于 .length 属性；**但是，首选**.length 属性，因为它没有函数调用的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:05:13.930

另一种选择是

```
if($(".blahblah")[0]) { ... } 
```

如果您的目标是减少打字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:01:14.607

您可以像这样创建自己的`exists`函数：

```
function exists(selector){
  return jQuery(selector).size() > 0;
} 
```

然后你可以像这样使用它：

```
if (exists(".blahblah")) {
  // it exists
} 
```

添加到 jQuery 中`fn`：

```
jQuery.fn.exists = function(){
    return this.length > 0;
} 
```

要使用：

```
if ($(".blahblah").exists()) {
  // it exists
} 
```

* * *

您还可以使用`length`不需要键入的属性`> 0`：

```
if ($(".blahblah").length) {
  // it exists
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:06:56.230

使用“有”选择器。

你可以写：

```
$(':has(.blahblah:eq(1))') 
```

# c# - 确定 Metro 应用程序正在 Windows 8 选项卡或台式电脑中运行

> ID：10101316
> 
> 赞同：13
> 
> 时间：2012-04-11T06:59:39.070
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我正在开发具有 Windows 8 Metro 风格的应用程序。与平板电脑相比，如果它在台式电脑上运行，此应用程序具有更多功能。但我的问题是如何检测应用程序是否在 PC 或 Tab 中运行。我不想为 PC 和 TAB 分别发布 2 版本。

请帮我。更新：GetSystemMatrics 是否可以做到这一点？在桌面上，我们的应用程序的行为类似于客户端和服务器，但在选项卡和移动设备中，它的行为仅类似于客户端

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T16:46:25.773

Windows.Devices 命名空间包含大量有关设备功能的信息。例如，要确定设备是否启用触摸，您可以使用：

```
var hasTouch = Windows.Devices.Input
                  .PointerDevice.GetPointerDevices()
                  .Any(p => p.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Touch); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T19:13:39.320

@Mahantesh：如果它专门在台式电脑和平板电脑（*不包括笔记本电脑*）之间，那么您可以检查**“电池属性”，例如交流电/电池供电、电池剩余电量等**，据我所知，这仅适用于使用电池运行的计算机电源和桌面当然不会那样做。

简而言之，电池通知不适用于我的台式电脑，而它适用于我的笔记本电脑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:22:34.293

我的建议是调用 CoreDLL 中的 GetSystemInfo API

这是一个示例调用：

```
 [DllImport("coredll")]
    static extern void GetSystemInfo(ref SYSTEM_INFO pSI); 

    public struct SYSTEM_INFO
    {
        public uint dwOemId;
        public uint dwPageSize;
        public uint lpMinimumApplicationAddress;
        public uint lpMaximumApplicationAddress;
        public uint dwActiveProcessorMask;
        public uint dwNumberOfProcessors;
        public uint dwProcessorType;
        public uint dwAllocationGranularity;
        public uint dwProcessorLevel;
        public uint dwProcessorRevision;
    } 
```

如果您从平板电脑获取此信息，它应该返回 2577 的处理器类型，因为我相信它运行在 ARM 处理器上。您可能需要找到目标处理器类型或传入目标处理器类型列表。

# arrays - 打印从 servlet 转发到 JSP 的数组

> ID：10101319
> 
> 赞同：0
> 
> 时间：2012-04-11T06:59:54.640
> 
> 标签：arrays, jsp, servlets, printing, jstl

我已将数组 userName[][] 从 servlet 转发到 JSP。我可以访问数组元素`${userName[2][3]}`，但我不能使用变量遍历数组。例如`${userName[i][j]}`或`${userName[<%=i>][<%=j>]}`不工作。

另外，我应该将我的索引变量声明为 var(JS)，因为我的代码也使用 JS 从数组中绘制图形，还是需要使用 JSTL？我是 JSP 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:10:28.753

以下是您在 JSTL 中遍历数组的方法（请注意，我将您的 userName 变量复数，因为它是一个数组）：

```
<c:forEach var="userName" items="userNames">
    // do something with the userName
</c:forEach> 
```

由于您的数组是数组数组，因此您可以嵌套两次迭代：

```
<c:forEach var="innerArray" items="userNames">
    <c:forEach var="element" items="innerArray">
         // do something with the element
    </c:forEach>
</c:forEach> 
```

请注意，JavaScript 在客户端执行，而 JSP 在服务器端执行。当 JS 代码执行时，它无权访问您的服务器端 Java 数组。如果您需要在客户端访问 Java 数组的内容，您应该使用 JSON 对其进行序列化，并在 JavaScript 中解析生成的 JSON 字符串。

# javascript - document.getElementById.innerHTML 只工作一次 - 如何配置全局复制元素？

> ID：10101321
> 
> 赞同：6
> 
> 时间：2012-04-11T07:00:10.633
> 
> 标签：javascript, jquery, html, document

我想创建一个外部 js 文件，我可以在其中配置我的 html 文件中几个元素的副本。我正在使用*document.getElementById("id").innerHTML = "what ever";* 将我的副本“注入”或“添加”到具有特定 ID 的 html 元素中。

这很好，但是当我的 html 文件中有多个具有相同 id 的元素时，我的 js 文件中的 html 只添加到第一个元素**，但我的 js 文件中的 html 应该添加到所有元素具有相同的 id**

**那是我的 html 构造：**

```
<html>
<head>
<script src="copy.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>

<div>
<strong id="back-button"></strong>
</div>

....

<div>
<strong id="back-button"></strong>
</div>

</body>
</html> 
```

**这就是我的 JS 文件：**

```
$(function() {
    $(document).ready(function addcopy() {

        /* global */
        document.getElementById("back-button").innerHTML = "go back";
});
}); 
```

非常感谢任何帮助或提示。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:07:16.183

您可以使用 class，因为`id`s 只能使用一次。

```
<html>
<head>
<script src="copy.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<div class="back-button">
</div>
....
<div class="back-button">
</div>
</body>
</html> 
```

在 javascript 中：

```
<script type="text/javascript">
     $(document).ready(function addcopy() {
         /* global */
         $(".back-button").html("<strong>go back</strong>");
     });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-20T14:28:31.420

在js中你可以这样做：

```
 document.getElementsByClassName('message')[0].innerHTML = "Good afternoon:)!"; 
```

然后你可以遍历这个类的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:01:51.037

`id`属性应该是唯一的，我知道在 JQuery 中如果你想使用多个选择器，你可以使用它`class`。

或者您可以使用Javascript 中为您提供一组元素`name`的函数。`getElementsByName()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:03:43.907

你有 jQuery，为什么不使用`$('#back-button').html('go back')`普通/原生 JS 呢？

但是，您有多个按钮，并且**ID*必须*是唯一的**，因此您不能为此使用 id。使用`class="back-button"`和下面的 jQuery 代码：

```
$('.back-button').html('go back'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T07:08:17.203

请使用 class 而不是 id 作为 HTML 元素，并使用 jquery 填写所需的文本。

```
<div>
<strong class="back-button"></strong>
</div>

$('.back-button').text('go back');   // OR
$('.back-button').html('go back'); 
```

# sql-server-2008 - SQL Server 2008中垂直过滤表（某些列）的双向复制类型的解决方案是什么

> ID：10101322
> 
> 赞同：4
> 
> 时间：2012-04-11T07:00:15.590
> 
> 标签：sql-server-2008, replication, merge-replication, transactional-replication

假设我们在两个数据库实例中有一个表，如下所示：

```
CREATE TABLE StudentList
(
     StudentId int NOT NULL PRIMARY KEY,
     StudentName nvarchar(255) NOT NULL,
     StudentGrade int
) 
```

我们希望在第一列和第二列（垂直过滤）上创建这两个 SQL Server 2008 实例之间的双向复制，**而不**删除第二个表中的第三列。

对等事务和合并复制不允许我们这样做。

解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:16:01.727

@mirza - 过滤的列正在订阅服务器上被删除，因为您正在使用快照进行初始化并且合并文章属性**@pre_creation_cmd**设置为**drop**。要完成垂直过滤并且在初始化时不删除列，您需要在[没有快照的情况下初始化合并订阅](http://msdn.microsoft.com/en-us/library/ms152488%28v=sql.105%29.aspx)。这样，列将不会在订阅服务器上被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:10:50.687

合并复制允许过滤文章，并且**您可以选择 [CHECK/UNCHECK] 要复制的列**。

尽量避免双向事务复制，因为此功能将在下一版本中删除：http: [//msdn.microsoft.com/en-us/library/ms151718.aspx](http://msdn.microsoft.com/en-us/library/ms151718.aspx)

# c - 制作排除目标？

> ID：10101324
> 
> 赞同：0
> 
> 时间：2012-04-11T07:00:27.130
> 
> 标签：c, gcc, makefile, gnu

我正在为 Windows 构建 coreutils。

您可以`su.exe`进行构建，但这是一个 hack。

我的第一个想法是跳过它

```
make basename.exe cat.exe cp.exe 
```

等等，但似乎你应该能够做类似的事情

```
make -su.exe 
```

以便它跳过该目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:43:44.597

尝试`-W`选项：`make -W su.exe`.

# c# - 在 C# 中更改 SQLite 中表的架构

> ID：10101327
> 
> 赞同：2
> 
> 时间：2012-04-11T07:00:32.713
> 
> 标签：c#, visual-studio, sqlite

我正在使用 SQLite DB 在我的 c# 项目中存储数据。我有一个现有的表，其中有一些记录。现在我想在现有表中再插入两列。如何使用我的 C# 代码为这两列插入数据。我是否需要再次创建表格或更改表格？该项目还具有与自动生成的该表相对应的 Designer.cs。我想知道这个文件是如何生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:53:59.920

要更改为 sqlite 中的模式，您需要在项目中的 .XSD 文件中进行适当的更改。这将自动更改designer.cs，并且您的架构将被更改。您可以在您的项目中搜索“.xsd”并继续。

# android - 当我关闭该应用程序时如何停止 NDEF_DISCOVERED 意图接收器？

> ID：10101331
> 
> 赞同：0
> 
> 时间：2012-04-11T07:00:54.047
> 
> 标签：android, nfc

我像这样过滤意图

```
<intent-filter>    
<action android:name="android.nfc.action.NDEF_DISCOVERED"/>
<category android:name="android.intent.category.DEFAULT"/>
<data android:mimeType="text/plain" /> 
```

现在的问题是，当我在我的手机附近发现 Ndef 标签时，我在我的应用程序中实现的事件正在运行（甚至我的应用程序处于关闭状态）。如何阻止这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:56:43.347

可能最好的解决方案是使用 NFC 前台调度。但是可以通过使用清单中的[`<activity-alias>`元素](http://developer.android.com/guide/topics/manifest/activity-alias-element.html)来关闭清单文件中的 Intent 过滤器。通过将 Intent 过滤器放在元素本身`<activity-alias>`而不是`<activity>`元​​素本身中，您可以在您的应用程序中随意禁用和启用它。

因此，假设您的清单中有：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="your.app.package">
  ...
  <activity-alias android:name=".yourActivityAlias"
      android:enabled="true" android:targetActivity=".yourActivity">
    <intent-filter>
      <action android:name="android.nfc.action.NDEF_DISCOVERED" />
      <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
  </activity-alias>
  ....
</manifest> 
```

然后，您可以通过以下方式禁用`<activity-alias>`应用程序中的活动：

```
PackageManager pkgMgr = getPackageManager();
ComponentName comp = new ComponentName("your.app.package", "your.app.package.yourActivityAlias");
pkgMgr.setComponentEnabledSetting(comp, PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
  PackageManager.DONT_KILL_APP); 
```

请注意，新设置仅在重新启动应用程序时生效（因此您可能需要考虑 0 而不是 PackageManager.DONT_KILL_APP）。此外，包管理器通常需要一段时间才能使新设置生效（可能取决于设备的处理速度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:39:41.543

使用 ForegroundDispatchSystem。

例子：

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/nfc/ForegroundDispatch.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/nfc/ForegroundDispatch.html)

# java - Perl 在 Java 中的 pack 函数等价物

> ID：10101332
> 
> 赞同：2
> 
> 时间：2012-04-11T07:00:56.123
> 
> 标签：java, perl, hex, pack

我有一些需要在 Java 中转置的 Perl 代码。在这段代码中，我必须处理 Perl 的[`pack`](http://perldoc.perl.org/functions/pack.html). Java中是否有等效的功能？Perl 代码如下所示：

```
$somevar = pack "H*", $vartopack; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:46:04.773

Perl 的`pack`/`unpack`函数是一个高度通用的转换实用程序，具有自己的[格式语法](http://perldoc.perl.org/functions/pack.html)（在`H*`这里使用，这使得它可以将任意长度的十六进制字符串作为输入），在 Java 世界中没有直接的等价物。但是，要翻译...

```
$somevar = pack "H*", $vartoconvert; 
```

...对于 Java，您可以例如使用：

```
byte[] somevar = javax.xml.bind.DatatypeConverter.parseHexBinary(vartoconvert); 
```

有关更多信息，请阅读 Javadocs 中的[`DatatypeConverter`类参考](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:16:49.847

```
String hex = "4a616d6573";
StringBuilder output = new StringBuilder();
for (int i = 0; i < hex.length(); i+=2) {
    String str = hex.substring(i, i+2);
    output.append((char)Integer.parseInt(str, 16));
}
System.out.println(output); 
```

# c# - LINQ 连接两个字符串数组中的元素

> ID：10101333
> 
> 赞同：3
> 
> 时间：2012-04-11T07:00:57.167
> 
> 标签：c#

我有两个字符串数组

```
Array1 = {"Paul","John","Mary"}
Array2 = {"12","13","15"} 
```

我想知道是否可以加入这些数组，以便生成的数组具有类似

```
{"Paul12","John13","Mary15"} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T07:03:59.197

```
 var Array3 = Array1.Zip(Array2, (a, b) => a + b).ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T07:05:08.507

您可以使用[`Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx).

```
var array1 = new[] {"Paul", "John", "Mary"};
var array2 = new[] {"12", "13", "15"};

var result = array1.Zip(array2, (a1, a2) => String.Concat(a1, a2)).ToArray(); 
```

# php - Android JSON 不工作

> ID：10101340
> 
> 赞同：1
> 
> 时间：2012-04-11T07:01:06.560
> 
> 标签：php, android, json, web-services

我有以下代码，我想在 JSON.getJSONfromURL() 方法中传递附加参数，但是当我检查 android 时它会抛出这个异常

> 04-11 11:58:18.929: E/AndroidRuntime(566): 致命异常: main 04-11 11:58:18.929: E/AndroidRuntime(566): java.lang.RuntimeException: 无法启动活动 ComponentInfo{cyclist.项目/cyclist.project.user_discussion}：java.lang.NullPointerException 04-11 11:58:18.929：E/AndroidRuntime(566)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 04-11 11： 58:18.929: E/AndroidRuntime(566): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.app.ActivityThread.access $2300(ActivityThread.java:125) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.os.Looper.loop(Looper.java:123) 04-11 11:58:18.929: E/AndroidRuntime(566): 在android.app.ActivityThread.main(ActivityThread.java:4627) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-11 11:58 :18.929: E/AndroidRuntime(566): at java.lang.reflect.Method.invoke(Method.java:521) 04-11 11:58:18.929: E/AndroidRuntime(566): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 04-11 11:58:18.929: E/AndroidRuntime(566): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 04 -11 11:58:18.929: E/AndroidRuntime(566): at dalvik.system.NativeStart.main(Native Method) 04-11 11:58:18.929: E/AndroidRuntime(566): Caused by: java.lang. NullPointerException 04-11 11:58:18。929: E/AndroidRuntime(566): 在 cyclist.project.JSON.getJSONfromURL(JSON.java:60) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 cyclist.project.user_discussion.setList(user_discussion .java:250) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 cyclist.project.user_discussion.onCreate(user_discussion.java:154) 04-11 11:58:18.929: E/AndroidRuntime(566 ): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 04- 11 11:58:18.929: E/AndroidRuntime(566): ... 11 更多929: E/AndroidRuntime(566): 在 cyclist.project.user_discussion.onCreate(user_discussion.java:154) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation .java:1047) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 04-11 11:58:18.929: E/AndroidRuntime(566 ): ... 11 更多929: E/AndroidRuntime(566): 在 cyclist.project.user_discussion.onCreate(user_discussion.java:154) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation .java:1047) 04-11 11:58:18.929: E/AndroidRuntime(566): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 04-11 11:58:18.929: E/AndroidRuntime(566 ): ... 11 更多

代码：

```
 JSONObject json;

    try {
        json = new JSONObject(
        JSON.getJSONfromURL("http://myweb.com/ws_cyc/events_service.php?action=get_chats&title=fsfbnn" ));
    JSONArray miles = json.getJSONArray("cyc");
    JSONObject rec;
    JSONObject rec2 = null; 

    for (int i=0; i<miles.length(); i++){
                rec = miles.getJSONObject(i);
                rec2 = rec.getJSONObject("cycObject");
                new discussion_item(rec2.getString("Chats").toString());
                ImgList.add( rec2.getString("image_path").toString() );
                list.add( rec2.getString("email").toString() + ": " + rec2.getString("Chats").toString() );
            }                                   
    } catch (JSONException e) {
            e.printStackTrace();
        } 
```

请指导我如何在 JSON.getJSONfromURL() 中传递其他参数以及 php 将如何获取它，我要捕获 jason 的 php 代码是

```
$titlez = json_decode($_GET['title']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:09:42.077

最好使用 Gson 来获取 JSON 数据，它既快速又高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:49:17.697

正如错误日志所说，它是由 null 值被传递并试图在文件的*第 154 行处理引起的*`user_discussion.java`

# bluetooth - 蓝牙连接状态

> ID：10101341
> 
> 赞同：1
> 
> 时间：2012-04-11T07:01:09.290
> 
> 标签：bluetooth, connection, status

是否有任何方法可以检查蓝牙连接状态是否从 pc j2se 程序连接到手机。我正在使用 bluecove2.1.1 进行蓝牙连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:24:57.733

如果您只想检查它是关闭还是打开，您可以使用*BluetoothConnectionAccessAdapter中的**isClosed*方法，该方法返回一个布尔值。

 *有关更多信息，请参阅文档：http: [//bluecove.org/bluecove/apidocs/index.html](http://bluecove.org/bluecove/apidocs/index.html)。*

# jsp - Spring MVC：向量 在 JSP 页面中？

> ID：10101346
> 
> 赞同：0
> 
> 时间：2012-04-11T07:01:31.847
> 
> 标签：jsp, spring-mvc

在我的项目中，我从数据库中删除数据

```
ResultSet result = req.executeQuery(); 
```

我将它们保存在字符串向量中

```
Vector<String[]> vecteur = new Vector<String[]>();
ResultSetMetaData rsmd = res.getMetaData();
int taille=rsmd.getColumnCount();

while(res.next()){
    String[] tab=new String[taille]; 
    for(int i=1;i<=taille-1;i++){
        tab[i]=res.getString(i);
    }
    vecteur.add(tab);
} 
```

我回来：

```
return new ModelAndView("resultat", "ajout", vecteur); 
```

我的问题是：如何在 JSP 页面中显示矢量的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T12:56:40.373

我已经对结果进行了测试

```
Vector<String[]> vecteur =abd.rechercheDonnees(recherche.getExpression(), recherche.getCritere());
Vector(vecteur) comes from
Vector<String[]> donnees =new Vector<String[]> ();

while(resultat.next()){
  java.sql.ResultSetMetaData metaData = resultat.getMetaData();
  int taille=metaData.getColumnCount(); 
    String[] ligne=new String[taille];
        for(int i=1; i<=taille; i++){
        ligne[i-1]=resultat.getString(i);   
        }               
    donnees.add(ligne);
}
return donnees; 
```

并显示在这里

```
abd.affichageDeResultats(vecteur);

public void  affichageDeResultats(Vector<String[]> result) throws SQLException{
        //Affichage resultats
        for(String[] tab:result){
            for(int i=0;i<tab.length;i++)
                System.out.println(tab[i]);
        }
} 
```

当我回来

```
return new ModelAndView("resultat", "donnees", vecteur); 
```

resultat.jsp 代码是

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:c="http://java.sun.com/jsp/jstl/core">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>resultat</title>
</head>
<body>
test
<c:forEach items="${donnees}" var="array" >
    <c:forEach items="${array}" varStatus="loop">  
      <c:out value="${array[loop.index]}"/>  
    </c:forEach> 
 </c:forEach>
</body>
</html> 
```

什么都没有显示。

# jsf-2 - JSF 表单值更改不起作用

> ID：10101350
> 
> 赞同：1
> 
> 时间：2012-04-11T07:01:53.063
> 
> 标签：jsf-2, webforms, primefaces

我有一个包含 4 个字段（2 个日期，2 个 selectOne）的表单。我的 Bean 是 SessionScoped。当我更改表单中的值并单击提交时，应用程序运行正常。但是当我想再次更改表单中的值时，什么也没有发生。没有改变也没有执行。

我的表格看起来像：

```
<ui:define name="sidebar">
    <p:panel header="Select Values">
        <h:form id="graphform">
            <p:growl id="msg" />
            <p:panelGrid columns="1">
                <h:outputLabel for="servervalue" value="Servervalue: " />
                <p:selectOneMenu value="#{graph.servervalue }" id="servervalue">
                    <f:selectItems value="#{formconst.SERVERVALUES}" />
                </p:selectOneMenu>
                <h:outputLabel for="startdate" value="Startdate: " />
                <p:calendar disabledWeekends="false" size="10" pattern="dd.MM.yyyy"
                    showOtherMonths="true" maxlength="10"
                    mindate="#{formconst.MINDATE }" maxdate="#{formconst.MAXDATE}"
                    showButtonPanel="true" navigator="true" readOnlyInputText="true"
                    id="startdate" value="#{graph.startdate }" showOn="button"
                    required="true" />
                <h:outputLabel for="enddate" value="Enddate: " />
                <p:calendar disabledWeekends="false" size="10" pattern="dd.MM.yyyy"
                    showOtherMonths="true" maxlength="10"
                    mindate="#{formconst.MINDATE }" maxdate="#{formconst.MAXDATE }"
                    showButtonPanel="true" navigator="true" readOnlyInputText="true"
                    id="enddate" value="#{graph.enddate }" showOn="button"
                    required="true" />
                <h:outputLabel for="filter" value="Filter: " />
                <p:selectOneMenu value="#{graph.filter }" id="filter">
                    <f:selectItems value="#{formconst.GENERALFILTER}" />
                </p:selectOneMenu>
            </p:panelGrid>
            <p:separator />
            <p:panelGrid columns="2">
                <p:commandButton value="Submit" update="@all"
                    action="#{ graph.updateChart }" />
                <p:commandButton value="Reset" update="@all"
                    action="#{ graph.resetChart }" />
            </p:panelGrid>
        </h:form>
    </p:panel>

</ui:define>
<ui:define name="content">
    <h:form id="linechart">
        <p:lineChart value="#{graph.cartesianChartBean.chartmodel }"
            enhancedLegend="true" legendPosition="nw" xaxisAngle="50" />
    </h:form>

</ui:define> 
```

当我将 SessionScoped 更改为 ViewScoped 或 RequestScoped 时，也会发生同样的情况。我只能更改一次值。

我在 WebSphere Application Server 8.0 上使用 primefaces 3.2 和 apache myFaces 2.0.2

最好的问候投票

# c# - WCF 日志记录，设置最大文件大小？

> ID：10101351
> 
> 赞同：12
> 
> 时间：2012-04-11T07:01:54.097
> 
> 标签：c#, wcf, logging, diagnostics

我使用 Microsoft 服务配置编辑器来设置诊断（WCF 日志记录），但我找不到任何方法来设置最大文件大小？

我找到了 MaxSizeOfMessageToLog 但对文件大小没有任何作用？

**编辑1：**根据这个： http: [//msdn.microsoft.com/en-us/library/aa395205.aspx](http://msdn.microsoft.com/en-us/library/aa395205.aspx) 在 sharedListeners 级别应该有一个 maxFileSizeKB 但是在添加标签中点击空间时我没有机会输入 maxFileSizeKB？

**编辑 2：**添加 maxFileSizeKB 时，服务将不再启动，而是我会得到以下异常：

*“maxFileSizeKB”不是“System.Diagnostics.XmlWriterTraceListener”类型的有效配置属性。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.Configuration.ConfigurationErrorsException：“maxFileSizeKB”不是“System.Diagnostics.XmlWriterTraceListener”类型的有效配置属性。源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。*

编辑 3：

我必须下载 Circular TraceListener 示例并将其包含在我的项目中，没有内置的 fileSize 限制器。

我的配置现在看起来像这样：

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel.MessageLogging" switchValue="Warning, ActivityTracing">
        <listeners>
          <add name="ServiceModelMessageLoggingListener"/>
        </listeners>
      </source>
      <source name="System.ServiceModel" switchValue="Warning,ActivityTracing"
        propagateActivity="false">
        <listeners>
          <add name="ServiceModelTraceListener"/>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="C:\My\MyRelease 0.31\Host\My.Host.Dev\web_messages.svclog"
        type="Microsoft.Samples.ServiceModel.CircularTraceListener,CircularTraceListener"
        name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp" maxFileSizeKB="1024">
        <filter type="" />
      </add>
      <add initializeData="C:\My\MyRelease 0.31\Host\My.Host.Dev\web_tracelog.svclog"
        type="Microsoft.Samples.ServiceModel.CircularTraceListener,CircularTraceListener"
        name="ServiceModelTraceListener" traceOutputOptions="Timestamp" maxFileSizeKB="1024">
        <filter type="" />
      </add>
    </sharedListeners> 
```

这是限制消息日志文件而不是跟踪日志文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T08:26:50.723

这是因为您提供的链接使用了自定义跟踪侦听器（“Microsoft.ServiceModel.Samples.CircularTraceListener”），它具有“maxFileSizeKB”属性。

没有限制/滚动 svclog 文件的内置功能，因此您确实需要使用自定义跟踪侦听器。您可以使用链接中使用的示例（在文章末尾阅读如何下载代码）。或者这是[另一个](http://www.codeproject.com/Articles/30956/A-Rolling-XmlWriterTraceListener)有用的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T17:44:11.977

只想添加到@Fabske 答案，以便使其正常工作

1) 下载 WCF 示例： http: [//go.microsoft.com/fwlink/ ?LinkId=150780](http://go.microsoft.com/fwlink/?LinkId=150780)

2) 打开 :\WF_WCF_Samples\WCF\Basic\Management\CircularTracing

3) 构建解决方案并获取 CircularTraceListener.dll

4）将该dll添加到您的项目引用中

5) 更新您的配置，如图所示[http://msdn.microsoft.com/en-us/library/aa395205(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/aa395205(v=vs.100).aspx)

# iphone - iPhone应用WeatherTunes如何实现后台运行

> ID：10101352
> 
> 赞同：0
> 
> 时间：2012-04-11T07:02:25.647
> 
> 标签：iphone, ios, daemon

> **可能重复：**
> [如何将音乐从我的应用程序切换到 ipod](https://stackoverflow.com/questions/7993236/how-to-switch-music-from-my-app-to-the-ipod)

在iPhone App中有一个名为WeatherTunes的iPhone应用程序，用关键词搜索“WeatherTunes”e，就出现了。您可以在 WeatherTunes 中添加闹钟，即使您将此应用程序切换到后台，它仍然会运行。我查看了它的 info.plist 文件，我注意到它设置了“所需的背景模式”，值为“App 播放音频”。但我仍然无法弄清楚它如何在后台运行？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:11:12.967

如果应用程序具有以下 5 个要求中的任何一个，则它们可以在后台运行：

*   在后台状态下播放音频的应用程序。一个很好的例子是播放播客时的 Instacast。
*   在后台跟踪您的位置的应用程序。例如，即使另一个应用程序处于活动状态，您仍然需要来自逐向 GPS 导航应用程序的语音提示。
*   侦听传入的 IP 语音 (VOIP) 呼叫的应用程序。如果您在 iOS 上使用 Skype，您可以在应用程序处于后台时接收 Skype 来电。
*   正在下载新内容的报亭应用。
*   在后台从外部附件接收持续更新的应用程序。

这个应用程序可能正在后台播放无声的音频文件，这是我以前见过的策略，但通常会被苹果商店拒绝。

# objective-c - Objective-C 是否在编译前转换为 C 代码？

> ID：10101355
> 
> 赞同：1
> 
> 时间：2012-04-11T07:02:49.337
> 
> 标签：objective-c

我知道目标 C 是 C 的严格超集，我们正在写同样的东西。但是当我写

```
@interface Myintf {}
@end 
```

它是否被转换为 C 结构，还是由 Objective c 编译器准备的数据结构 Myintf 的内存布局与 runtime.h 中定义的 C 结构的内存布局相同？

和关于 objc_msgsend 的相同问题

苹果文件说

> 在 Objective-C 中，消息直到运行时才绑定到方法实现。**编译器将消息表达式转换为对消息传递函数 objc_msgSend 的调用。** 该函数将接收者和消息中提到的方法的名称（即方法选择器）作为它的两个主要参数：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:53:16.983

> 它是否被转换为 C 结构

在过去它曾经是，但在现代运行时（OS X 10.5+ 64 位和 iOS），我认为它有点复杂。它不能使用传统`struct`的，因为[脆弱的实例变量](http://en.wikipedia.org/wiki/Objective-C#Non-fragile_instance_variables)问题已经解决。

> 和关于 objc_msgsend 的相同问题

是的。所有方法调用 - 或者更准确地说，所有消息发送 - 都被转换为调用`obj_msgsend()`（除了当`super`使用不同的 C 函数时用作接收器时）。

请注意，Objective-C 的早期实现是作为预处理器实现的，并生成 C 源代码作为中间步骤。现代编译器不会为此烦恼，而是直接从 Objective-C 源代码转换为目标代码格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:07:41.827

没有也没有。这两种情况最终都依赖于运行时。在某种程度上，它被转换为使用 C 接口，但引入了一个抽象级别——它不是完全静态的。

查看编译器生成的程序集以更详细地了解其工作原理将有所帮助。

鉴于声明：

```
id objc_msgSend(id theReceiver, SEL theSelector, ...); 
```

`objc_msgSend`当您的实现调用方法时，编译器会插入调用。它并没有简化为静态 C 函数调用，而是动态分派——如果您愿意这样想的话，它是另一个间接级别。

# java - 通过套接字接收字节数组

> ID：10101356
> 
> 赞同：0
> 
> 时间：2012-04-11T07:02:50.187
> 
> 标签：java

我有一个程序，它接受来自发送字节数组的手机的连接，我能够在连接时测试连接，但是我怎么知道我实际上正在接收什么东西？我如何“查看”是否有任何东西通过套接字发送。因为从我下面的代码中，我无法创建结果文件“saved.jpg”。这是否意味着它没有收到任何东西？

```
public class wpsServer {

    //vars
    private int svrPort = 3334;
    private ServerSocket serverSocket;
    private Image image = null;

    public wpsServer()
    {
        try {
             serverSocket = new ServerSocket(svrPort);
             System.out.println("Server started on "+svrPort);
        } 
        catch (IOException e) {
            System.out.println("Could not listen on port: "+svrPort);
            System.exit(-1);
        }
    }

    public void listenForClient()
    {
        Socket clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
            if(clientSocket.isConnected())
                System.out.println("Connected");

          byte[] pic = getPicture(clientSocket.getInputStream());
          InputStream in = new ByteArrayInputStream(pic);
          BufferedImage image = ImageIO.read(in);
          File outputfile = new File("saved.jpg");
          ImageIO.write(image, "jpg", outputfile);

        } 
        catch (IOException e) {

            System.out.println("Accept failed: "+svrPort);
            System.exit(-1);
        }

    }

    public byte[] getPicture(InputStream in) {
          try {
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            byte[] data = new byte[1024];
            int length = 0;
            while ((length = in.read(data))!=-1) {
                out.write(data,0,length);
            }
               return out.toByteArray();
            } catch(IOException ioe) {
            //handle it
           }
           return null;
         }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:05:54.170

只有在另一端关闭套接字时`in.read`调用才会返回。`-1`当套接字处于活动状态时，该调用将阻塞，直到有更多数据可用。

你需要做的是改变你的“协议”：客户端应该先发送数组大小，然后是数据。服务器应该读取该长度，并在完成后停止读取文件（例如返回等待下一个文件）。

# lotus-notes - XPages 中的 window.close()

> ID：10101357
> 
> 赞同：1
> 
> 时间：2012-04-11T07:02:53.173
> 
> 标签：lotus-notes, xpages, lotus-domino, lotus, serverside-javascript

我有一个带有一些链接的 Xpage。我的一个链接调用**EXIT**必须`window.close()`关闭浏览器中的当前选项卡。

在浏览器中，当我从视图中打开文档（Xpage 保存文档）并单击**EXIT**链接时，它会关闭当前选项卡/窗口。

然而，我正在使用`context.redirectToPage()`. 当我单击**EXIT**链接时，它不会关闭选项卡/窗口。

在 Javascript 控制台中：**脚本可能不会关闭不是由脚本打开的窗口**

任何人都可以帮助我。

提前致谢， 卡西克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T07:21:59.233

正如 Javascript 控制台所说：Window.close() 需要一个 window.open() 才能工作。

请参阅[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Whats_New_in_852_for_XPages#window.close%28%29+support](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Whats_New_in_852_for_XPages#window.close%28%29+support)

**更新：** 您可以使用客户端 JS 创建响应文档 - 包括打开窗口。以下将做到这一点：

```
// get parent document id    
docid='#{javascript:document.getNoteID()}';

// create the URL
url="response.xsp?action=newDocument&parentId="+docid;

// open a new window with the response document
window.open(url); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T08:39:03.190

“在 Javascript 控制台中：脚本可能无法关闭不是由脚本打开的窗口”

那就是你的问题的答案。Javascript 无法关闭不是由 javascript 创建的选项卡/窗口。

您可以尝试以下方法：

[如何关闭浏览器窗口](http://blogs.x2line.com/al/articles/350.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T01:06:29.273

你可以试试我正在使用的这个技巧。

```
window.open('', '_self', '');

window.close(); 
```

# windows-phone-7 - 为什么列表框选择更改在 Windows Phone 7 中无法正常工作？

> ID：10101360
> 
> 赞同：2
> 
> 时间：2012-04-11T07:03:02.893
> 
> 标签：windows-phone-7

```
private void PersonalInfoList_SelectionChanged(object sender, SelectionChangedEventArgs e)
            {
                System.Collections.IList list = e.AddedItems;
                if (e.AddedItems.Count == 1)
                {
                    IEnumerable<Category> categs = list.Cast<Category>();
                    Category em = categs.ElementAt<Category>(0);
                    int id = em.id;
                    int categoryid = em.categoryid;
                    string subcategoryname = em.subcategname;

                    NavigationService.Navigate(new Uri(String.Format("/SubCategories.xaml?id=" + id + "&categoryid=" + categoryid + "&subcategoryname=" + subcategoryname), UriKind.Relative));
                }
            } 
```

如果列表中有 2 个项目，如果单击第一项，则能够导航到子类别页面。但再次单击相同的第一项无法导航。如果单击第一项后单击 2 项，则能够导航到子类别页面。 ……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T07:06:45.020

您需要在调用 to 之前或之后设置`PersonalInfoList.SelectedIndex`to`-1`以`NavigationService.Navigate`重置所选项目。

如果您使用的是 LongListSelector，`SelectedItem`请将`null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:35:55.267

正如克劳斯在他的回答中提到的那样，您需要将 设置`PersonalInfoList.SelectedIndex`为`-1`。但是，如果您只是渲染一个用于导航的列表，我`NavigationList`为此创建了一个：

[一个快速加载的 Windows Phone 7 NavigationList 控件](http://www.scottlogic.co.uk/blog/colin/2011/04/a-fast-loading-windows-phone-7-navigationlist-control/)

这样做的好处是加载速度大约是 a 的两倍`ListBox`，而且您也不会遇到必须“重置”选定索引的问题。

# c# - 计算linq中两个数组中相同元素的数量

> ID：10101363
> 
> 赞同：11
> 
> 时间：2012-04-11T07:03:12.103
> 
> 标签：c#, arrays, linq

我有 2 个字符串数组：

```
A1: {"aa","bb","cc","dd","ee"}
A2: {"cc","dd,"ee","bla","blu"} 
```

如何计算和之间相同元素的数量`A1`（`A2`在本例中为 3）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-11T07:05:05.433

最短的可能是这样的：

```
A1.Intersect(A2).Count() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:10:05.417

以下效果很好，并且在使用列表时可能会产生更高的性能：

```
List<string> a1 = new List<string>() { "aa", "bb", "cc", "dd", "ee" };
List<string> a2 = new List<string>() { "cc", "dd", "ee", "bla", "blu" };

a1.Count(match => a2.Contains(match)); 
```

或者（感谢@BlueVoodoo）一个更短的解决方案，它的执行速度略快：

```
a1.Count(a2.Contains); 
```

但是这些解决方案也计算重复项，因此可以使用：

```
HashSet<string> a1 = new HashSet<string>() { "aa", "bb", "cc", "dd", "ee" };
HashSet<string> a2 = new HashSet<string>() { "cc", "dd", "ee", "bla", "blu" }; 
```

这避免了重复，因为 HashSet 只保留一个唯一的序列。

对上上述基准后，HashSet 与 a1.Count(a2.Contains); 提供最快的解决方案，即使有构造 HashSet 的开销。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:13:01.607

```
int[] id1 = { 44, 26, 92, 30, 71, 38 };
int[] id2 = { 39, 59, 83, 47, 26, 4, 30 };

id1.Intersect(id2).Count(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T07:14:46.397

以下代码应该可以解决问题

```
 var A1 = new[] { "aa", "bb", "cc", "dd", "ee"};
        var A2 = new[] { "cc", "dd", "ee", "bla", "blu" };

        var query = from one in A1
                    join two in A2 on one equals two
                    select one;
        var result = query.ToArray();//this should have { "cc", "dd", "ee" } 
```

# c# - excanvas js 在 IE8 中不起作用

> ID：10101372
> 
> 赞同：1
> 
> 时间：2012-04-11T07:04:04.887
> 
> 标签：c#, javascript, jquery, html, canvas

在 IE8 上出现以下错误

```
canvas.getContext("2d") Unexpected call to method or property access.Error 
```

我也加了

```
 if (typeof G_vmlCanvasManager != 'undefined') {
                G_vmlCanvasManager.initElement(canvas);
            } 
```

如何使用 ecanvas.js 在 IE8 中运行画布。我也有[支票](https://stackoverflow.com/questions/6362847/problem-getting-excanvas-to-use-getcontext-in-ie8)，但我没有运气。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:44:20.880

首先，您确定已将文件包含在标记中（根据文档）：

```
<head>
<!--[if IE]><script src="PATH_TO_JS_FILE"></script><![endif]-->
</head> 
```

你确定正确地实例化你的“画布”吗？如果您是动态执行的，那么：

```
var canvas = document.createElement('canvas');
G_vmlCanvasManager.initElement(canvas);
var context = canvas.getContext('2d'); 
```

或者，如果您已将画布添加到页面的标记中，您是否正在获取对它的引用：

```
var canvas = document.getElementsByTagName("canvas")[0]; 
```

您的浏览器不知道如何处理您的画布对象，因此看起来它没有正确实例化。

# sql-server - 是否有支持 opennetcf.orm 的可视化建模器，它也可以映射现有数据库？

> ID：10101376
> 
> 赞同：2
> 
> 时间：2012-04-11T07:04:30.987
> 
> 标签：sql-server, orm, sql-server-ce, opennetcf

使用 OpennetCf.ORM，我可以在 C# 类中定义实体及其关系，有没有一种方法可以使用更可视化的建模器创建这些实体和关系，也许还可以映射现有的 Microsoft SQL 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:58:52.370

使用作为版本一部分的 EntityGenerator 工具：http: [//orm.codeplex.com/releases/view/82434](http://orm.codeplex.com/releases/view/82434)

# pagination - php/mysql 分页参数无效

> ID：10101382
> 
> 赞同：0
> 
> 时间：2012-04-11T07:05:03.320
> 
> 标签：pagination

数据库连接后-

```
`$tbl_name="mytable";`
 $adjacents = 3;
 $query = "SELECT COUNT (*) as num FROM $mytable";
 $total_pages = mysql_fetch_array(mysql_query($query));  this is line 32
 $total_pages = $total_pages[num];
 $targetpage = "pagination.php";  (the name of this file)
 $limit = 20; 
```

我得到的错误是-

> 警告：mysql_fetch_array()：提供的参数不是第 32 行中的有效 MySQL 结果资源。

谁能帮忙？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:15:31.713

问题应该在您的查询中，它应该是：

```
 $query = "SELECT COUNT (*) as num FROM mytable"; 
```

或者

```
 $query = "SELECT COUNT (*) as num FROM ".$tbl_name.""; 
```

您正在引用以前未定义的变量 $mytable

# ruby-on-rails - 乘客最大池大小不工作

> ID：10101387
> 
> 赞同：1
> 
> 时间：2012-04-11T07:05:14.140
> 
> 标签：ruby-on-rails, nginx, passenger

我在 nginx.conf 文件中将passenger_max_pool_size 设置为 30，但是，在很多情况下，乘客产生了 30 多个进程，范围从 30 到 90 个进程。如果 max 是 30 它不应该有超过 30 个进程，我很困惑。任何提示都会很棒。谢谢！

这是我下面的 nginx.conf 设置

```
http {
    passenger_log_level 1;
    passenger_debug_log_file /var/log/nginx/passenger.log;
    passenger_root /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.11;
    passenger_ruby /usr/local/bin/ruby;

    passenger_max_pool_size 30;
    passenger_pool_idle_time 90;
    passenger_min_instances 20;
    passenger_max_requests 500; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:33:52.703

您使用什么方法来确定乘客流程的数量？你在使用乘客身份吗？我们有一个基于 apache 的设置，并且我们在 conf 文件中有乘客最大池大小指令，它从未失败过。

# node.js - 使用 node-couchdb-api 在 couchdb 中创建临时视图

> ID：10101389
> 
> 赞同：1
> 
> 时间：2012-04-11T07:05:28.220
> 
> 标签：node.js, couchdb

我正在尝试在nodejs级别使用node-couchdb-api连接couchdb，如以下链接[http://dominicbarnes.us/node-couchdb-api/](http://dominicbarnes.us/node-couchdb-api/.My)中所述。我的couchdb版本是1.1.1，nodejs版本是0.6.10 .

为了创建 api [http://dominicbarnes.us/node-couchdb-api/api/database/tempView.html](http://dominicbarnes.us/node-couchdb-api/api/database/tempView.html)中提到的临时视图，我编写了以下代码。

```
var couchdb = require("couchdb-api");
var server = couchdb.srv(localhost, 5984, false, false);
var db = server.db("test");
var map = function (doc) {
emit(null, 1);
};
var reduce = "_sum";
var query = { include_docs: true };
db.tempView(map, reduce, query, function (err, response) {
console.log(response);
}); 
```

但我面临以下问题。

```
C:\Program Files\nodejs\node_modules\couchdb-api>node server.js
node.js:201
throw e; // process.nextTick error, or 'error' event on first tick
          ^
TypeError: Cannot read property '0' of null
at C:\Program Files\nodejs\node_modules\couchdb-api\lib\util.js:24:39
at Array.map (native)
at Object.formatFunction (C:\Program Files\nodejs\node_modules\couchdb-api\lib\util.js:22:25)
at Object.tempView (C:\Program Files\nodejs\node_modules\couchdb-api\lib\database.js:285:28)
at Object.<anonymous> (C:\Program Files\nodejs\node_modules\couchdb-api\server.js:27:4)
at Module._compile (module.js:441:26)
at Object..js (module.js:459:10)
at Module.load (module.js:348:31)
at Function._load (module.js:308:12)
at Array.0 (module.js:479:10) 
```

请建议我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:39:31.357

很抱歉您遇到的问题。我是该模块的创建者，我刚刚将 1.1.2 版推送到 NPM 以解决您的问题。（并包括一个单元测试以确保它不会再次发生）

只需通过更新到最新版本`npm update couchdb-api`，您就可以开始使用了。如果您还有其他问题，请告诉我。

# python - Python 预定义变量名为 i?

> ID：10101390
> 
> 赞同：-1
> 
> 时间：2012-04-11T07:05:28.880
> 
> 标签：python

我是使用 Python 2.5.1 的新手，以下代码将起作用：

样本3.py

```
num = 23

while (i !=num ):
    print 'bingo !'
    break;

===> result:  bingo ! 
```

但是如果我将 i 更改为 j

样本3.py

```
num = 23

while (j !=num ):  <--- this is the only difference I changed i to j
    print 'bingo !'
    break;

===> result:  NameError: name 'j' is not defined 
```

任何人都可以告诉我变量名称“i”是在 Python 中预定义的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:08:26.100

不，`i`在 python 中没有预定义，在使用之前你的代码中必须有其他内容`i`

# c++ - 如何在不关闭正在运行的程序的情况下平滑重启 c++ 程序？

> ID：10101391
> 
> 赞同：0
> 
> 时间：2012-04-11T07:05:33.543
> 
> 标签：c++, parameters, restart

我有一个服务器程序，它应该每天全时运行。如果我想改变它的一些参数，有什么办法不是关闭然后重新启动吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:10:51.580

有很多方法可以做到这一点，包括但几乎可以肯定不限于：

1.  您可以在单独的文件中维护参数，以便程序定期检查该文件并更新其内部信息。

2.  与 (1) 类似，但您可以向应用程序发送某种信号以使其立即重新读取文件。

3.  您可以执行 (1) 或 (2)，但使用共享内存而不是配置文件。

4.  您可以让您的程序位于 IPC 对话的服务器端，以便客户端可以打开与它的连接以提供新参数。从简单的消息队列到成熟的 HTTP 服务器和相关页面的任何内容。

当然，所有这些都需要在您的程序中进行大量工作才能让它寻找新信息。

在做出决定时，您应该考虑到这一点。到目前为止，*最快*的解决方案是在晚上 11 点 55 分（干净地）终止进程，然后立即重新启动它。它更简单，因为您的代码可能已经*能够*在启动时加载信息，所以这可能是一个简单`cron`的单行。

有些人说懒惰是一件*坏事*，但情况并非总是如此:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:58:17.267

如果服务器维护许多来自客户端的活动连接，则重新启动服务器进程是您应该考虑的最后一种方式。除了重新加载配置文件，在客户端和服务器之间插入代理进程可以是另一种方式。

代理进程负责两件事。

一种。维护来自客户端的连接并将数据包转发到服务器进行处理。

湾。判断当前服务器进程（服务器 A）是否处于活动状态，如果没有，则自动切换到另一台服务器（服务器 B）。

然后您可以通过重新启动服务器来更改参数，而不必担心中断客户端，因为总是有两个（或更多）服务器在运行。

# mysql - 我必须在生产中使用 root

> ID：10101399
> 
> 赞同：1
> 
> 时间：2012-04-11T07:05:55.857
> 
> 标签：mysql, ruby-on-rails, deployment

这在我的 database.yml 中很奇怪我有以下内容

```
 production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: ajhezaty_production
  pool: 5
  user: myname
  password: "mygreatpassword"
  socket: /tmp/mysql.sock
  host: mysql.asdf.com
  timeout: 500 
```

当我在生产模式下本地运行 rails server

```
 11/lib/mysql2/client.rb:53:in `connect': Access denied for user 'root'@'c-71- (using password: YES) (Mysql2::Error) 
```

为什么它使用root！我在 database.yml 中有不同的用户名

当我访问 client.rb 并对用户名进行硬编码时，它就可以工作了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:26:05.497

尝试用户名而不是用户 ;-)

# javascript - 在 adobe air 中使用 js 进行长轮询而不会发生内存泄漏

> ID：10101402
> 
> 赞同：1
> 
> 时间：2012-04-11T07:06:08.850
> 
> 标签：javascript, jquery, ajax, air, comet

我正在制作 adobe air 桌面应用程序。我需要弄清楚如何进行长轮询 ajax 请求，而不会导致 adobe air 内存泄漏。

基本上我的功能是这样的（我正在使用jquery）

```
var stream = function() {
    $.ajax({
         url:"http://my-chat-server/stream",
         success:function(data) {
              //add recent msg to dom
              add_msg(data);
              stream();
         }
    });
} 
```

我当前的实现将在一小时内填充 10mb，这很糟糕。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:06:37.890

找到了，

使用 air.URLStream，描述here（滚动到底部，示例在那里）：

[http://help.adobe.com/en_US/air/reference/html/flash/net/URLStream.html#readUTF%28%29](http://help.adobe.com/en_US/air/reference/html/flash/net/URLStream.html#readUTF%28%29)

实现air.URLStream后，我的应用内存使用量没有增加！使用 jquery ajax 调用将导致 adobe air 泄漏内存 - 严重。

# ruby-on-rails-3 - 在模型更改重新渲染时，一些嵌套属性会消失

> ID：10101404
> 
> 赞同：4
> 
> 时间：2012-04-11T07:06:14.640
> 
> 标签：ruby-on-rails-3, backbone.js

我有以下消息骨干设置：

```
 class InboxItemView extends Backbone.View
    initialize: ->
      @model.on('change', @render, @)
    render: ->
      @$el.html JST['buy/messages/templates/received_message'](@model.toJSON())
      @

  class InboxListView extends Backbone.View
    items: []
    initialize: ->
      @collection.on('reset', @reset, @)
    reset: ->
      _.each @items, (item) -> item.remove()
      @items = _.map @collection.received(), (model) =>
        item = new InboxItemView(model: model)
        @$('tbody').append item.render().el
        item 
```

模型

```
 class Message extends Backbone.Model

  class Messages extends Backbone.Collection
    model: Message
    url: '/messages'
    received: -> @filter (message) -> message.get('receiver').id == gon.userId 
```

拉布尔：

```
object @message
attributes :id, :title, :body, :read_at, :created_at, :last_reply

node :path do |message|
  message_path(message)
end

child :sender => :sender do
  attributes :id, :nickname
end

child :receiver => :receiver do
  attributes :id, :nickname
end 
```

在初始渲染期间，一切都正确显示。但是，当我更改模型并且重新呈现列表项时，模型的发件人哈希变为空。因此渲染不会打印出发送者的名字。属性喜欢标题仍然显示，因为它们不是嵌套的。

为什么嵌套属性会消失？我在渲染一些中间模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:35:32.740

我们需要查看您的控制器进行确认，但我怀疑当您保存模型时，它会获得更新的响应，该响应通过与发布的模板不同的 rabl 模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T22:08:48.790

首先要尝试的是，在你`InboxItemView`的`render`方法中，`console.log(@model, @model.toJSON())`. 使用网络检查器或萤火虫，展开生成的对象，看看它们有什么不同，如果有的话。没有真正的理由会删除字段，因此您需要弄清楚模型中的内容以及`toJSON`.

# jquery - 需要无限滚动jquery的小逻辑

> ID：10101408
> 
> 赞同：1
> 
> 时间：2012-04-11T07:06:26.240
> 
> 标签：jquery

我想在用户将滚动条拖动到 rhw 结束时加载数据。基本上，当滚动条非常接近 div 或页面的末尾时，在触摸 div 或页面的末尾之前，我希望加载数据。

我在这里检测滚动条已到达 div 或页面末尾的逻辑如下：

## 第一个是页面结束

```
$(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() == $(document).height()) {
        var new_div = '<div class="new_block"></div>';
        $('.main_content').append(new_div.load('/path/to/script.php'));
    }
}); 
```

## 第二个是潜水

```
$('.some_element').bind('scroll', function(){
    if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight){
        var new_div = '<div class="new_block"></div>';
        $('.main_content').append(new_div.load('/path/to/script.php'));
    }
}); 
```

那么，我是否需要在上面的代码中进行修改，以使我的例程能够在滚动条非常接近页面或 div 端之前调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:28:45.893

更改`$(window).scrollTop() + $(window).height() == $(document).height()`为

```
$(window).scrollTop() + $(window).height() >= $(document).height() - 200 
```

减法意味着将视口的底部与更上方 200 像素的点进行比较。请注意，`==`也更改`>=`为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:18:05.163

我使用 nearBottomOfPage() 来实现这一点。我的完整代码如下，但我认为您只需要检查此方法的逻辑。

```
<script type="text/javascript">
  var page = 1;

  (function() {

    function nearBottomOfPage() {
      return $(".normal_url_block").scrollTop() > $(".normal_url_block #result").height() - $(".normal_url_block").height() - 100;
    }

    function finish() {
      finished = true;
    }

    $(".normal_url_block").scroll(function(){

      if (loading) {
        return;
      }

      if(nearBottomOfPage() && !finished) {
        loading=true;
        jQuery("#all_discussions_loader").show();
        page++;
        var current_value= jQuery("#discussion_sorting").val();
        var current_order= jQuery("#order_by").val();
        jQuery.get("load_discussion_as_per_time/"+current_value+"?order_by="+current_order+"&page="+page,function(data){
          jQuery("#result").append(data);
          if(data.length==0)
          {
            finished = true;
          }
          loading=false;
          jQuery("#all_discussions_loader").hide();
        });

      }
    });
  }());
</script> 
```

# testing - 如何使用 selenium 断言 Java 小程序的存在？

> ID：10101414
> 
> 赞同：0
> 
> 时间：2012-04-11T07:07:27.473
> 
> 标签：testing, selenium, automation

有谁知道如何使用 Selenium IDE 验证 java 小程序的存在。我想验证表单中是否存在 Ephox 文本编辑器，因此我可以验证该元素，但我如何断言它是 Ephox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:21:06.190

我不了解 Ephox 编辑器，但要回答您的 java 小程序问题：您可以让 selenium 验证该元素是否存在。

因此，如果小程序包含在此标记中：

```
<applet width="81" height="120" name="clock1" code="tz.class" codebase="applets/" style="background-color: transparent;"> 
```

我将在 Selenium IDE 中使用以下代码来验证它是否存在。

```
<tr>
    <td>verifyElementPresent</td>
    <td>css=applet</td>
    <td></td>
</tr> 
```

干杯，山姆

# php - 检查精确目标 API 中是否存在列表

> ID：10101421
> 
> 赞同：1
> 
> 时间：2012-04-11T07:08:00.020
> 
> 标签：php, soap, exacttarget

我计划使用 PHP 中的精确目标 SOAP API 创建列表并将用户详细信息添加为订阅者。[代码 api](http://docs.code.exacttarget.com/020_Web_Service_Guide/Technical_Articles/Creating_a_List)有关于创建列表的示例代码。我基于它构建了我的自定义逻辑，如下所示

```
public function createList($siteId, $siteDescription){
        try {
            $list = new ExactTarget_List();
            // $list->Description = "PHP Created List"; // List for the venue
            // $list->ListName = "PHP API Created List"; // Description about the list
            $list->Description = $siteDescription; // List for the venue
            $list->ListName = $siteId;
            $object = new SoapVar($list, SOAP_ENC_OBJECT, 'List', "http://exacttarget.com/wsdl/partnerAPI");
            $request = new ExactTarget_CreateRequest();
            $request->Options = NULL;
            $request->Objects = array($object);
            $results = $client->Create($request);
            if ($results->OverallStatus == 'OK') 
            {
                echo 'SUCCESS';
            }
            else
            {
            echo 'FAILED';
            }    
        }
        catch (SoapFault $e) {
            // var_dump(e);
            $this->success = 0;
        }
    } 
```

但是我的工作流程是这样的，如果列表已经存在，我应该继续下一步添加订阅者（doh！），否则首先创建列表并添加订阅者。我找不到任何示例代码片段来检查列表是否存在或不使用代码 API 文档，因此我想知道这是否可能。我对 SOAP 和 XML 的微薄了解在这里发挥了重要作用，因此请求是否有任何对此有更好的知识或想法的退伍军人分享一些关于它的细节以帮助我的事业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:58:28.157

您可以相当轻松地获取所有列表 - 例如，遵循以下 ET 技术文档中的代码：http: [//docs.code.exacttarget.com/020_Web_Service_Guide/Technical_Articles/Retrieving_a_List_from_an_Account](http://docs.code.exacttarget.com/020_Web_Service_Guide/Technical_Articles/Retrieving_a_List_from_an_Account)

这篇文章相当不错（当然是相对而言），我可以保证它的准确性。这是 PHP 部分的相关内容：

```
 $rr = new ExactTarget_RetrieveRequest();
    $rr->ObjectType = "List";   
    $rr->Properties =  array();
    $rr->Properties[] = "ID";
    $rr->Properties[] = "List.ListName";        
    $rr->Options = NULL;

    $rrm = new ExactTarget_RetrieveRequestMsg();
    $rrm->RetrieveRequest = $rr;        

    $results = $client->Retrieve($rrm);  
        var_dump($results); 
```

要获取特定列表，您创建一个 SimpleFilterPart 对象并将其附加到您的 RetrieveRequest （注意 - 这部分是错误的、未经测试的、糟糕的 PHP 代码 - 我用 Python 编写它然后在这里翻译它 - 如果你真的需要帮助部分，给我发消息）：

```
 $sfp=new ExactTarget_SimpleFilterPart;
    $sfp=>Property = "ListID";
    $sfp=>SimpleOperator = new ExactTarget_SimpleOperators->equals;
    $sfp=>Value = Array(contact_list);
    $retrieverequest=>Filter = $sfp; 
```

希望这可以为某人节省一些头痛。

# java - 在 JTree 节点摇摆处右键单击显示弹出框

> ID：10101428
> 
> 赞同：3
> 
> 时间：2012-04-11T07:08:26.407
> 
> 标签：java, swing, jtree, jpopupmenu

我只想在节点的右键单击上显示弹出框`JTree`，而不是整个`JTree`组件。当用户右键单击 JTree 节点时，会出现弹出框。如果他右键单击一个空白区域，`JTree`那么它不应该出现。因此，为此我如何仅检测`JTree`节点的鼠标事件。我在网上搜索了很多次，但找不到解决方案，所以请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T07:32:30.087

这是一个简单的方法：

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();

    final JTree tree = new JTree ();
    tree.addMouseListener ( new MouseAdapter ()
    {
        public void mousePressed ( MouseEvent e )
        {
            if ( SwingUtilities.isRightMouseButton ( e ) )
            {
                TreePath path = tree.getPathForLocation ( e.getX (), e.getY () );
                Rectangle pathBounds = tree.getUI ().getPathBounds ( tree, path );
                if ( pathBounds != null && pathBounds.contains ( e.getX (), e.getY () ) )
                {
                    JPopupMenu menu = new JPopupMenu ();
                    menu.add ( new JMenuItem ( "Test" ) );
                    menu.show ( tree, pathBounds.x, pathBounds.y + pathBounds.height );
                }
            }
        }
    } );
    frame.add ( tree );

    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-31T15:34:08.103

只是因为我最近偶然发现了这个，我认为它比现有的答案要容易一些：

```
public static void main(String[] args) {
    JFrame frame = new JFrame();
    final JTree tree = new JTree();

    JPopupMenu menu = new JPopupMenu();
    menu.add(new JMenuItem("Test"));
    tree.setComponentPopupMenu(menu);
    frame.add(tree);

    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
} 
```

# windows-phone-7 - 当我使用“PhotoChooserTask”并调用 Show() 时，我的项目崩溃了，我不知道。帮我

> ID：10101429
> 
> 赞同：2
> 
> 时间：2012-04-11T07:08:31.123
> 
> 标签：windows-phone-7

当我的项目从页面进入相册时，我没有选择图片，我的项目是崩溃的。这是我的代码，请帮助我。

```
PhotoChooserTask photoChooserTask = new PhotoChooserTask();
photoChooserTask.Show();
phoneChooserTask.Completed += (se, ev) => { //Nothing to do }; 
```

这是我的例外：

System.Runtime.Serialization.dll 中发生“System.Runtime.Serialization.InvalidDataContractException”类型的第一次机会异常 mscorlib.dll 中发生“System.Reflection.TargetInvocationException”类型的第一次机会异常“System”类型的第一次机会异常.Runtime.Serialization.InvalidDataContractException' 发生在 System.Runtime.Serialization.dll

ExceptionObject = {"Type 'System.Collections.Generic.Stack`1[System.String]' 不能被序列化。考虑用 DataContractAttribute 属性标记它，并用 DataMemberAttribute 属性标记你想要序列化的所有成员。"}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:30:06.623

问题是应用程序停用，而不是照片选择器任务。尝试按下`Start`按钮，您会看到相同的结果。

如前所述`Exception`，您有一个`Stack`班级正在尝试在停用时进行序列化。`Stack`不能用`Data Contracts`.

您可以禁用它的序列化`[IgnoreDataMemberAttribute]`或手动将其保存为一段`List`时间停用并将其恢复到`Stack`之后

# iphone - 为 UIView 定制 initWithFrame

> ID：10101431
> 
> 赞同：4
> 
> 时间：2012-04-11T07:08:40.207
> 
> 标签：iphone, objective-c, uiview, uikit

我正在尝试确定为 UIView 自定义初始化程序的最佳方法，以便可以将一个值传递给初始化程序，并立即将其作为 iVar 存储在 UIView 子类中，因为在`drawRect`.

目前我正在使用默认值，创建此 UIView 的类*在*调用`initWithFrame`后将其 iVar 设置为一个值，它实际上正在工作；不知何故，即使在 UIView 初始化*后设置了这个 iVar 的值。**`initWithFrame``drawRect`*

 **所以我需要两件事之一：

1）有信心知道这一点是可以的：我可以依靠`drawRect`某种方式延迟绘图，以便在 UIView 初始化后由另一个对象设置 iVar。在这种情况下，只是**在 UIView 初始化时才`drawRect`被调用？**

或者，

2）我需要在初始化期间传递值：这是创建自定义初始化程序的最佳方式`(CGRect)frame`吗`initWithFrame.`？

```
 myNewView=[[MyCustomView alloc] initWithFrame:myRect andMore:myValue]; 
```

然后在 MyCustomView.m 中：

```
 - (id)initWithFrame:(CGRect)frame andMore:(int)someValue
  {
     self = [super initWithFrame:frame];
     if (self) {
       myIvar=someValue;
       ... //continue as normal
     }
  } 
```

这段代码会是一个好方法吗？然后我会很舒服地知道该值在`drawRect`被调用之前就在那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:41:03.627

1.) 你可以依赖在`drawRect:`any 之后被调用`init`。事实上，`drawRect:`当视图绘制和合成完成时会被调用，这通常是作为核心动画提交的结果发生的（如果你修改任何 CALayer 或 UIView（它们总是由 CALayer 支持），则在运行循环结束时完成） ）。

2.) 从架构的角度来看，这种方法更好。如果你认为这个变量是你的类功能的一个组成部分（没有它类就不能正常工作），它绝对应该是一个 init 参数。您还可以考虑在其他 init-Methods 中抛出 NSInternalInconsistencyException（或任何其他异常）和/或将它们标记为已弃用（使用 调用时，超类的 init-Methods 仍然可以正常工作`super initWithFrame:`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:41:32.810

当您使用您指定的指定初始化程序以编程方式显式创建视图时，第二种方法是理想的。警告：如果视图是通过 NIB 构建的，则情况*并非如此。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T07:37:44.407

简短的回答：您的两种方法都应该可以正常工作。

更长的答案：

1.  该`drawRect:`方法在运行循环中调用，因此在您完成所有初始化然后将控制权交还给运行循环之前不会被调用。当然，如果您初始化视图然后立即设置属性，您将不会有问题。

2.  您的第二种方法应该几乎可以正常工作。

我会使用第二种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-03T14:24:45.947

**Martin Ullrich**恰当地解决了这个问题。但我想补充一点。

如果您调用`initWithFrame`或`init`在您的视图中。这不会`drawRect`调用方法。
当您将该视图添加到窗口时，`in the next runLoop it will call this method`会生成一个位图以显示在屏幕上。**

# xcode - 来自非托管项目的 Git 合并

> ID：10101433
> 
> 赞同：1
> 
> 时间：2012-04-11T07:08:53.847
> 
> 标签：xcode, git, version-control, dvcs

如果我在网站上下载了一个示例项目（不是 Git 管理的），我创建了一个分支并对该项目进行了一些提交。然后，原作者对这个项目进行了一些更新，并在网站上发布...

现在如何将这个更新（不是 Git 管理的）合并到我的 Git 管理的项目中？

我是 VCS/Git 的新用户。

谢谢。雷蒙德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:18:24.753

创建第二个分支，从您开始的原始 SHA 开始（在您进行任何更改之前）。

看看那个分支。

用新版本的外部代码替换工作目录的内容。

`git add .`并`git add -u`分阶段进行所有更改和删除。

犯罪。

检查您的原始分支，然后合并第二个分支。

# c++ - 通过队列传递信息时如何避免向下转换？

> ID：10101443
> 
> 赞同：2
> 
> 时间：2012-04-11T07:09:39.900
> 
> 标签：c++, .net, switch-statement, downcast

我正在编写一个工具，它使用户能够通过更改设置然后流式传输信息来与一些硬件进行交互。

为此，我运行了几个线程：`EquipmentInterface`它们`DataProcessor`通过`Queue`.

该`EquipmentInterface`线程具有更改设备设置的方法（例如），并将结果信息（和`Rotate`）添加到. 一旦设置正确，就会有方法，一旦开始流式传输，来自设备的数据就会被打包并添加到队列中。`Refocus``CurrentAngle``CurrentFocalDistance``Queue``StartStreaming``StopStreaming`

放置在队列上的所有信息都来自一个`BaseMessage`包含消息类型指示的类。然后，我导出了角度、焦距、开始和结束流媒体的消息类型，当然还有数据本身。

监听队列的`DataProcessor`另一端并根据当前角度/焦距处理后续数据。

现在，问题是，我在数据处理器中有一个函数，它使用 switch 语句对传入的消息进行类型检查。然后将这些消息向下转换为适当的类型并传递给适当的处理程序。实际上，不只是一个 DataProcessor 监听一个队列，而是多个队列上的多个监听器（一些存储到磁盘，一些在 gui 上显示信息）。每次我添加一些信息时，我都必须创建一个新的`BaseMessage`派生类，向该基类添加一个新类型，然后更新每个消费者中的 switch 语句以处理新消息。

这种架构的某些东西让我觉得不对劲，最近我读了很多关于向下转换的文章。从我所见，普遍的共识似乎是[我正在做的是一种糟糕的代码气味](http://codebetter.com/jeremymiller/2006/12/26/downcasting-is-a-code-smell/)。我看到[了一个使用 Boost 的建议](https://stackoverflow.com/questions/9321497/design-pattern-to-avoid-downcasting-in-message-passing)，但它们看起来并不比我的 switch 语句更干净（也许我遗漏了一些东西？）。

所以我的问题是：我是否应该尝试避免使用 switch-statement / downcasting 解决方案，如果是，如何？

我的实现是在 C++/CLI 中，所以 .net 或 C++ 解决方案都是我所追求的。

**编辑**- 根据 iammilind 和 stfaanv 的评论，您是否建议这样做：

```
class QueuedItem
{
public:
    QueuedItem() { }
    virtual ~QueuedItem() { }

};

class Angle : public QueuedItem
{
public:
    Angle() {}
    virtual ~Angle() { }
};

class FocalLength : public QueuedItem
{
public:
    FocalLength() {}
    virtual ~FocalLength() { }
private:

};

class EquipmentHandler
{
protected:
    virtual void ProcessAngle(Angle* angle) {}; 
    virtual void ProcessFocalLength(FocalLength* focalLength) {};   

public:
    void ProcessMessages(QueuedItem* item)
    {
        Angle* pAngle = dynamic_cast<Angle*>(item);
        if( pAngle != NULL )
        {
            ProcessAngle(pAngle);
        }
        FocalLength* pFocalLength = dynamic_cast<FocalLength*>(item);
        if( pFocalLength != NULL )
        {
            ProcessFocalLength(pFocalLength);
        }

    }
};

class MyDataProcessor : public EquipmentHandler
{
protected:
    virtual void ProcessAngle(Angle* angle) override { printf("Processing Angle"); }
    virtual void ProcessFocalLength(FocalLength* focalLength) override { printf("Processing FocalLength"); };   
};

int _tmain(int argc, _TCHAR* argv[])
{

    // Equipment interface thread...
    FocalLength* f = new FocalLength();
    QueuedItem* item = f; // This gets stuck onto the queue

    // ...DataProcessor thread (after dequeuing)
    QueuedItem* dequeuedItem = item;

    // Example of a DataProcessor implementation.
    // In reality, this would 
    MyDataProcessor dataProc;
    dataProc.ProcessMessages(dequeuedItem);

    return 0;
} 
```

...可以简化吗？感觉有点笨拙，`ProcessMessages`但这是我能看到的唯一方法，没有 switch 语句和基类中的某种枚举消息类型标识符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:14:09.673

您可以尝试访问者设计模式：[http ://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

每个 DataProcessor 都将继承自一个`BaseVisitor`类，该类定义了用于处理每种消息类型的虚拟方法。基本上这些方法只是noop。

当你定义一个新的消息类型时，你在`BaseVisitor`. 然后，如果子`DataProcessor`类想要处理此消息类型，则`DataProcessor`仅覆盖此中的虚拟方法。所有其他`DataProcessor`保持不变。

```
 #include <iostream>

    class FocalLength;
    class Angle;
    class EquipmentVisitor;

    class QueuedItem
    {
    public:
            QueuedItem() { }
            virtual ~QueuedItem() { }

            virtual void AcceptVisitor(EquipmentVisitor& visitor) = 0;
    };

    class EquipmentVisitor
    {
    public:
            virtual ~EquipmentVisitor() {}

            virtual void Visit(FocalLength& item) {}
            virtual void Visit(Angle& item)       {}

            void ProcessMessages(QueuedItem* item)
            {
                    item->AcceptVisitor(*this);
            }
    };

    class Angle : public QueuedItem
    {
    public:
            Angle() {}
            virtual ~Angle() { }

            void AcceptVisitor(EquipmentVisitor& visitor) { visitor.Visit(*this); }
    };

    class FocalLength : public QueuedItem
    {
    public:
            FocalLength() {}
            virtual ~FocalLength() { }

            void AcceptVisitor(EquipmentVisitor& visitor) { visitor.Visit(*this); }
    private:

    };

    class MyDataProcessor : public EquipmentVisitor
    {
    public:
            virtual ~MyDataProcessor() {}

            void Visit(Angle& angle)             { std::cout << "Processing Angle" << std::endl; }
            void Visit(FocalLength& focalLength) { std::cout << "Processing FocalLength" << std::endl; }
    };

    int main(int argc, char const* argv[])
    {
            // Equipment interface thread...
            FocalLength* f    = new FocalLength();
            QueuedItem*  item = f; // This gets stuck onto the queue

            // ...DataProcessor thread (after dequeuing)
            QueuedItem* dequeuedItem = item;

            // Example of a DataProcessor implementation.
            // In reality, this would
            MyDataProcessor dataProc;
            dataProc.ProcessMessages(dequeuedItem);

            return 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:05:44.193

根据我将 4 条消息发送到 2 个处理程序的最简单消息处理：

```
#include <iostream>
#include <queue>
#include <memory>

class HandlerA
{
public:
  void doA1() { std::cout << "A1\n"; }
  void doA2(const std::string& s) { std::cout << "A2: " << s << "\n"; }
};

class HandlerB
{
public:
  void doB1() { std::cout << "B1\n"; }
  void doB2(const std::string& s) { std::cout << "B2: " << s << "\n"; }
};

class BaseMsg
{
public:
  virtual ~BaseMsg() {}
  void send();
  virtual void handle() { execute(); }
  virtual void execute() = 0;
};

typedef std::shared_ptr<BaseMsg> Msg;
class Medium
{
  std::queue<Msg> queue;
public:
  void send(Msg msg) { queue.push(msg); }
  void process()
  {
    while (! queue.empty())
    {
      std::cout << "Processing\n";
      queue.front()->handle();
      queue.pop();
    }
  }
};

class BaseMsgHndlrA : public BaseMsg
{
protected:
  HandlerA& ha;
public:
  BaseMsgHndlrA(HandlerA& ha_) : ha(ha_) { }
};

class BaseMsgHndlrB : public BaseMsg
{
protected:
  HandlerB& hb;
public:
  BaseMsgHndlrB(HandlerB& hb_) : hb(hb_) { }
};

class MsgA1 : public BaseMsgHndlrA
{
public:
  MsgA1(HandlerA& ha_) : BaseMsgHndlrA(ha_) { }
  virtual void execute() { ha.doA1(); } 
};

class MsgA2 : public BaseMsgHndlrA
{
public:
  MsgA2(HandlerA& ha_) : BaseMsgHndlrA(ha_) { }
  virtual void execute() { ha.doA2("Msg A2"); } 
};

class MsgB1 : public BaseMsgHndlrB
{
public:
  MsgB1(HandlerB& hb_) : BaseMsgHndlrB(hb_) { }
  virtual void execute() { hb.doB1(); } 
};

class MsgB2 : public BaseMsgHndlrB
{
  std::string s;
public:
  MsgB2(HandlerB& hb_, const std::string s_) : BaseMsgHndlrB(hb_), s(s_) { }
  virtual void execute() { hb.doB2(s); } 
};

int main()
{
  Medium medium;
  HandlerA handlerA;
  HandlerB handlerB;

  medium.send(Msg(new MsgA1(handlerA)));
  medium.send(Msg(new MsgA2(handlerA)));
  medium.send(Msg(new MsgB1(handlerB)));
  medium.send(Msg(new MsgB2(handlerB, "From main")));

  medium.process();
} 
```

这仅使用虚函数通过一些参数调度到正确的处理程序。
handle() 函数不是严格需要的，但在定义消息层次结构时很有帮助。
通用消息可以包含一个可以用 bind 填充的 std::function，因此可以发送带有参数的实际函数，而不是为每个排队的操作创建一个消息类。
为了隐藏实际的发送，处理程序可以自己进行发送，因此可以立即从发送线程访问它们。

但是，如果需要将多个消息发送到更多处理程序，则可以使用双重调度（访问者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:20:52.243

您可以执行以下任何操作：

`case`将处理代码（如您的`switch`语句中的每个）委托给`Handler`对象——对象的层次结构`HandlerBase`或完全不相关的类型。

然后你让你的消息保持对`Handler`对象的引用（如果它是一个层次结构，你可以在`BaseMessage`级别上做，如果是不相关的对象，那么作为单独的专用消息类型的一部分），然后你可以在你的时候将它们传递给通过`BaseMessage::Handle()`方法处理它们。编辑：此方法不是虚拟的。

当然，如果你沿着`HandlerBase`层次结构的路径走，你仍然需要`static_cast`将消息返回到它们的任何类型，但这应该没问题：它们应该只用自己的 Handler 创建（应该知道它们的类型）反正。

例子：

```
// BaseMessage.hpp
#include <iostream>

class BaseMessage
{
public:
  BaseMessage(HandlerBase* pHandler);
  : m_pHandler(pHandler)
  {}

  virtual ~BaseMessage()
  {}

  void  SetHandler(HandlerBase* pHandler)
  {
    m_pHandler = pHandler;
  }

  void  Handle()
  {
    assert(m_pHandler != 0);
    m_pHandler->Handle(this);
  }

protected:
  HandlerBase*  m_pHandler; // does not own it - can be shared between messages
};

// HandlerBase.hpp
class HandlerBase
{
public:
  HandlerBase()
  {}

  virtual ~HandlerBase()
  {}

  virtual void Handler(BaseMessage* pMessage) =0;
}

// message and handler implementations
class AMessage: public BaseMessage
{
public:
  AMessage(BaseHandler* pHandler)
    : BaseMessage(pHandler)
  {}

  ~AMessage() {}

  void  DoSomeAness()
  {
    std::cout << "Being an A..." << std::endl;
  }
};

class AHandler
{
public:
  AHandler()
  {}

  virtual ~AHandler()
  {}

  virtual void Handle(BaseMessage* pMessage)
  {
    AMessage *pMsgA(static_cast<AMessage*>(pMessage));
    pMsgA->DoSomeAness();
  }
};

class BMessage: public BaseMessage
{
public:
  BMessage(BaseHandler* pHandler)
    : BaseMessage(pHandler)
  {}

  ~BMessage() {}

  void  DoSomeBness()
  {
    std::cout << "Being a B..." << std::endl;
  }
};

class BHandler
{
public:
  BHandler()
  {}

  virtual ~BHandler()
  {}

  virtual void Handle(BaseMessage* pMessage)
  {
    BMessage *pMsgB(static_cast<BMessage*>(pMessage));
    pMsgB->DoSomeBness();
  }
};

// the thread
static std::list<BaseMessage*> msgQueue;

int HandlerThread(void *pData)
{
  while(true)   // find some more sophisticated way to break
  {
    while(!msgQueue.empty())
    {
      msgQueue.front()->Handle();
      msgQueue.pop_front();
    }
    // delay and stuff
  }
  return 0;
}

int main(int argc, char** argv)
{
  start_thread(HandlerThread, 0); // your favorite API here

  AHandler  aHandler;
  BHandler  bHandler;

  msqQueue.push_back(new AMessage(&aHandler));
  msqQueue.push_back(new BMessage(&bHandler));
  msqQueue.push_back(new BMessage(&bHandler));
  msqQueue.push_back(new AMessage(&aHandler));
  msqQueue.push_back(new AMessage(&aHandler));
  msqQueue.push_back(new BMessage(&bHandler));
  msqQueue.push_back(new AMessage(&aHandler));
  msqQueue.push_back(new BMessage(&bHandler));

  return 0;
} 
```

编辑：是的，本质上，这是[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

# ipad - HTML5 音频持续时间问题

> ID：10101446
> 
> 赞同：-2
> 
> 时间：2012-04-11T07:09:42.797
> 
> 标签：ipad, html, html5-video, html5-audio, jplayer

我正在使用[jplayer](http://www.jplayer.org/)在 Ipad 中播放音频和视频文件，但问题是如果我更改视频或音频 url，有时我会得到持续时间 NaN。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:17:04.697

`onloadedmetadata`事件触发后，数据可用。

(c) [https://stackoverflow.com/a/7275714/492641](https://stackoverflow.com/a/7275714/492641)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:07:43.440

检查您的服务器是否启用了范围请求。

从Jplayer 网站上的[这个页面：](http://jplayer.org/latest/developer-guide/#jPlayer-server-response)

> 您的服务器必须启用 Range 请求。这很容易通过查看服务器的响应是否在其标头中包含 Accept-Ranges 来检查。大多数 HTML5 浏览器允许在下载期间寻找新的文件位置，因此服务器必须允许请求新的 Range。
> 
> 无法接受字节范围请求会导致某些 HTML5 浏览器出现问题。通常无法从文件中读取持续时间，因为某些格式要求读取文件的开头和结尾以了解其持续时间。如果服务器上未启用 Range 请求，Chrome 往往是问题最多的浏览器，但所有浏览器都会有一些问题，即使只是您必须等待所有媒体加载完毕才能跳到最后.

# mysql - MySQL“默认”结果

> ID：10101452
> 
> 赞同：0
> 
> 时间：2012-04-11T07:10:18.283
> 
> 标签：mysql, data-structures

我有一个 MySQL 表

```
id    |  text   |  category   |   active 
```

我选择了一条随机线

```
SELECT id, text 
FROM table
WHERE category = [category id] AND active = 1 
ORDER BY RAND()
LIMIT 1 
```

有时这不会返回任何结果（例如，如果特定类别中没有活动行）。在这种情况下，我需要做的是返回一个“默认”行。

我的问题是：最有效的方法是什么？我是否应该只创建一个相同的表，但只使用默认行，如果上面的查询没有结果，我会查询它吗？或者我应该在同一个表中添加默认行？你将如何查询它？

欢迎任何建议！

**编辑** 问题的一些更新：

1.  我排除了在 PHP 中生成默认文本的可能性，因为我希望它是可定制的，而不必去更改代码。

2.  每个类别将有一个默认行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:15:06.737

```
SELECT id, text 
FROM table
WHERE (category = [category id] AND active = 1 ) 
    OR ((DEFAULT CONDITION) AND NOT((category = [category id] AND active = 1 )))
ORDER BY RAND()
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:14:33.167

你想要的默认值是多少？表中的第一个 id？

```
SELECT id, text
FROM (  SELECT id, categori, active, text, 0 AS prio
        FROM table WHERE category = [category id] AND active = 1 
        UNION ALL
        SELECT id, categori, active, text, 1
        FROM table
        ORDER BY id ASC
        LIMIT 1) AS h
ORDER BY prio, RAND()
LIMIT 1 
```

如果您希望获得某个默认值，请添加一个名为的 ENUM 列`default('TRUE', 'FALSE')`：

```
SELECT id, text
FROM (  SELECT id, categori, active, text, 0 AS prio
        FROM table WHERE category = [category id] AND active = 1 AND default = 'FALSE'
        UNION ALL
        SELECT id, categori, active, text, 1
        FROM table
        WHERE category = [category id] AND default = 'TRUE'
        ORDER BY id ASC
        LIMIT 1) AS h
ORDER BY prio, RAND()
LIMIT 1 
```

**更简单的一个：**

```
SELECT id, text
FROM table
WHERE category = [category id] AND (active = 1 OR default = 'TRUE')
ORDER BY (default = 'FALSE') DESC, RAND()
LIMIT 1 
```

**说明：**
基本上，这个查询会获取您指望获取的所有行，并将其与默认行结合起来。他们每个都有一个优先价值，你在做之前订购它们`RAND()`。剩下的就是您希望如何存储默认行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:13:00.530

你是什​​么意思“默认行”？我不确定我是否明白你的意思。但是，如果您说无论如何都想输出某些东西-即使没有任何结果-，我也会以编程方式进行。

只需检查您是否有带有数据的结果集，如果没有，则通过脚本输出一些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:13:36.430

根据您使用的语言，您可以看到返回了多少行：

```
// php

$res = mysql_query("...");

if( mysql_num_rows($res) < 1 )
{
  // no result
}
else
{
  // do something
} 
```

# virtualization - 如何在非 Windows 驱动器中的 VirtualBox 中安装操作系统

> ID：10101462
> 
> 赞同：1
> 
> 时间：2012-04-11T07:10:38.900
> 
> 标签：virtualization, virtualbox

我在 C:\ 中只有 5GB 磁盘空间，对应于我的 Windows 驱动器。我正在尝试安装 VirtualBox 来享受 Fedora Linux 操作系统。我的要求是，我希望安装 C: 以外的 fedora linux。在 VirtualBox 中真的有可能吗？因为当我尝试时，它安装在 C:\

请建议我在 VirtualBox 之上安装多个操作系统的可能方法，以安装在非 Windows 驱动器中（C 除外：）

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:25:07.253

默认情况下，VirtualBox 将在您的 %USERPROFILE% 目录中创建新的机器定义及其关联的存储文件（在 4.x 版本之前，它曾经位于 .VirtualBox 文件夹中）。但是，您可以将文件放在您喜欢的任何位置。这里有两种方法：

在 Preferences, General 您可以将**Default Machine Folder**设置为 C:\ 以外的其他内容（我的当前设置为 E:\VirtualBox\Machines）。这将是修改此设置后创建的任何计算机（和存储）的新默认值。

当您使用**新建虚拟磁盘向导**创建新虚拟磁盘时，它会提示您输入驱动器的名称/位置和大小。只需在名称前加上您想要存储它的完整路径（或单击带有绿色向上箭头的小文件夹图标以导航到您想要的目的地），然后单击下一步。您的存储将在您选择放置的任何位置。

# c# - 发布 C# 控制台应用程序后更改数据库连接字符串

> ID：10101463
> 
> 赞同：3
> 
> 时间：2012-04-11T07:10:43.057
> 
> 标签：c#, connection-string

1.  我的 C# 控制台应用程序的 App.config 文件中有一个开发环境连接字符串。
2.  我需要的是能够在发布应用程序后更改连接字符串。
3.  每当我发布时，都会创建一个清单文件，其中包含一些哈希键，如果我尝试更改配置文件，它会抛出一个错误，指出`it has a different computed hash than specified in manifest`.

如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:51:55.210

我建议改为从数据库表中读取它。此外，如果将来其他应用程序将来可以使用此连接字符串，那么只需进行一次更改就很好了。您还可以在您的应用程序中使用相同的逻辑来检索连接字符串。如果这对您的情况来说听起来不合理，我同意 Simon 所说的“如果您需要定期更改 conn 字符串，那么可能考虑将其存储为字符串”。如果需要，您甚至可以尝试将其设置为环境变量。

# javascript - javascript样式更改onclick在IE中不起作用

> ID：10101470
> 
> 赞同：0
> 
> 时间：2012-04-11T07:10:57.883
> 
> 标签：javascript, internet-explorer, onclick, styles

我有两个 div，分别包含 Facebook Like Box 和 Twitter Profile Widget。我制作了两个按钮或“选项卡”，单击它们时，它们本身及其各自的 div 都会向右移动并进入屏幕（包含小部件和类似框的 div 使用定位隐藏在浏览器窗口之外）。

当我单击第一个按钮时，它工作正常。但是当我单击第二个按钮时，只有 div 移动，但按钮保持不变。使用 z-indexing，我能够将选项卡放在 div 的顶部。当我再次单击按钮时，按钮移出 - 但 div 移回。

两个 div 的代码完全相同，除了图像名称和 id （自然）。

这是-部分中包含的javascript：

```
function facebookToggle1() {
var fb = $('#facebooktab'); // save reference to element
if( fb.css('margin-left') === '-250px' ) {
    fb.css('margin-left', '0px');
    fb.css('margin-top', '-150px');
    fb.css('z-index', '2');
} else {
    fb.css('margin-left', '-250px');
    fb.css('margin-top', '-300px');
    fb.css('z-index', '0');
}
}

 function facebookToggle2() {
var fb2 = $('#facebooktoggle');
if( fb2.css('margin-left') === '0px' ) {
    fb2.css('margin-left', '250px');
} else {
    fb2.css('margin-left', '0px');
}
}

function twitterToggle1() {
var twi = $('#twittertab'); // save reference to element
if( twi.css('margin-left') === '-250px' ) {
    twi.css('margin-left', '0px');
    twi.css('margin-top', '-150px');
    twi.css('z-index', '2');
} else {
    twi.css('margin-left', '-250px');
    twi.css('margin-top', '-300px');
    twi.css('z-index', '0');
}
}

function twitterToggle2() {
var twi2 = $('#twittertoggle');
if( twi2.css('margin-left') === '0px' ) {
    twi2.css('margin-left', '250px');
} else {
    twi2.css('margin-left', '0px');
}
} 
```

这是HTML代码：

```
div id="facebooktab"> <!-- Contains facebook feed in static div on the left side of the screen -->
<div class="fb-like-box" data-href="http://www.facebook.com/pages/Torucon /115138348575729" data-width="250" data-height="300" data-show-faces="false" data-border- color="white" data-stream="true" data-header="false"></div>
</div>
<div id="facebooktoggle" onclick="facebookToggle1(); facebookToggle2();"> <!--Visible, click-able switch to show/hide the facebook feed -->
</div>
<div id="twittertab"> <!-- Contains twitter feed in static div on the left side of the screen -->
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
new TWTR.Widget({
version: 2,
type: 'profile',
rpp: 4,
interval: 30000,
width: 250,
height: 300,
theme: {
shell: {
  background: '#51c3e2',
  color: '#ffffff'
},
tweets: {
  background: '#ffffff',
  color: '#000000',
  links: '#ff0000'
 }
},
features: {
scrollbar: true,
loop: false,
live: true,
behavior: 'all'
}
}).render().setUser('ToruconOfficial').start();
</script>
</div>
<div id="twittertoggle" onclick="twitterToggle1(); twitterToggle2();"> <!-- Visible click-able switch to show/hide the twitter feed -->
</div> 
```

如果代码看起来很乱，我很抱歉 - div 之间有一些线条看起来更干净！如果您愿意，可以在[http://www.torucon.no/no/上查看代码](http://www.torucon.no/no/)

（以防愚蠢 - 对于像我这样的人 - 记得用 IE 查看页面以查看我的问题！）

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:56:03.147

这两个 CSS 文件对于 #twittertoggle 具有不同的 z-index 值：

torucon.css 有 z-index: 1 torucon_ie.css 有 z-index: 2

将 torucon_ie.css 更改为 z-index: 1 修复了 IE 中的问题。

# opencv - 从立体对获取深度图？

> ID：10101471
> 
> 赞同：0
> 
> 时间：2012-04-11T07:11:09.803
> 
> 标签：opencv, map, correlation, depth, stereo-3d

有没有人体验过从立体对中获取深度图？我想知道是否有任何方法可以在没有相机参数的情况下获取深度信息。我正在尝试从立体对中获取深度图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:33:16.003

如果没有准确的相机参数，您将无法获得准确的绝对深度信息。但是，您可以在不知道内在参数的情况下获得一些相对深度（正确的排序），前提是您有一些外在参数（您需要正确的旋转矩阵）。只需填写相机矩阵的估计值。如果视角偏离太多，远处的物体可能会映射到无穷远，但它应该适用于近处的物体。另外，请记住，结果的有用性取决于您忽略的镜头失真量。在带有广角镜头的廉价网络摄像头上，我的直觉说它无法正常工作。

OpenCV 代码中包含立体示例。

# android - 将参数传递给Android中的查询

> ID：10101475
> 
> 赞同：1
> 
> 时间：2012-04-11T07:11:56.957
> 
> 标签：android

我正在尝试将许多参数传递给 Android 中的查询。我正在做的是以下内容：

```
String final QUERY = "SELECT TA.ID FROM TAB TA LEFT JOIN PROP P ON P.ID = TA.ID LEFT JOIN LOC L ON L.ID = TA.ID LEFT JOIN TIME T ON T.ID = TA.ID  WHERE (COALESCE(LONG,?) - ?) * (COALESCE(LONG,?) - ?) + (COALESCE(LAT,?) - ?)  * (COALESCE(LAT,?) - ?) <=COALESCE(VALUE,0)*COALESCE(VALUE,0)  AND ? BETWEEN  COALESCE(BEGIN,0) AND COALESCE(END, 123456)";
String[] args= {"" + val1, "" + val2, "" + val3, "" + val4, "" + val5, "" val6, "" + val7, "" + val8, "" + val9}
cursor = db.rawQuery(QUERY,args); 
```

但它返回一个空游标。请问有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:33:18.557

从查询中删除表关键字。

并且您在查询对象中总共有 10 个（？），在 args 中您提供的参数有 9 个参数。

所以给出总共 10 个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:18:19.967

好吧，我不确定，但这可能是一个原因。**在表名**之前我从未见过任何使用**TABLE的查询**

 **代替

```
SELECT TA.ID FROM TABLE TA............. 
```

只需使用

```
SELECT TA.ID FROM TA.............. 
```

另一件事是你有**10 ？**在您的查询中，您传递一个包含**9 个元素**的字符串数组作为选择参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:20:35.333

也许空光标是正确的结果？您可能想去模拟器控制台并在那里执行相同的 sql 以确保。

正如他们在[http://developer.android.com/guide/developing/tools/adb.html](http://developer.android.com/guide/developing/tools/adb.html) “从远程外壳检查 sqlite3 数据库”中所写

```
$ adb -s emulator-5554 shell
# sqlite3 /data/data/com.example.google.rss.rssexample/databases/rssitems.db
SQLite version 3.3.12
Enter ".help" for instructions
.... enter commands, then quit...
sqlite> .exit 
```**

# jquery - 处理`` 只有一个动态生成的值 我有一个动态生成的 <option>..</option> 插入到 <select>当出现只有 1 个 <option>值的情况时，我不希望用户查看带有打算单击并期望更多值的组合框。由于只有一个值，我可以关闭</option></select> 的活动以产生像停用它一样的下拉菜单吗？这 - <select disabled="disabled">是否也意味着我无法在通过 $_POST 提交表单时 ID：10101477 赞同：1 时间：2012-04-11T07:12:03.560 标签：jquery, html 回答 #1 赞同：0 时间：2012-04-11T07:31:47.837 您可以在唯一选项中使用 selected ，而不是该选项的值： <select name="data" style=" disabled="disabled"> <option value="1" selected>1</option> </select> 使用以下代码，您可以检查选择有多少选项。 $('#data1').children().length 如果长度为 1，则添加禁用并选中： if($('#data1').children().length == 1) { $('#data1').attr('disabled', 'disabled'); $('#data1').children()[0].attr('selected', 'selected'); } 希望这可以帮助。 回答 #2 赞同：0 时间：2012-04-11T07:19:04.510 在伪代码中： switch (number of options) case 0: display nothing break; case 1: display the option as normal text (maybe in a simple <div>) break; default: create and display a combo box break; 不要忘记：Jquery 是 javascript！仍然允许您在 javascript 中执行的所有操作。</select>

# c# - 如何找出asp.net C#中数据表/数据集占用的大小？

> ID：10101482
> 
> 赞同：1
> 
> 时间：2012-04-11T07:13:02.853
> 
> 标签：c#, asp.net, memory-management, datatable, size

我对数据表或数据集占用的大小感到困惑。创建数据表对象时，该对象的大小是多少以及它如何根据需要增加大小。假设数据库中有一个 10 行的表，有 5 列，这个表将创建数据表，那么它在内存中的大小是多少。我只是对所有这些事情感到困惑。我做了一些谷歌搜索，但没有得到任何答案。如何在任何特定时刻找到数据表/数据集的大小。

# sql - Oracle中的删除语句非常慢

> ID：10101484
> 
> 赞同：10
> 
> 时间：2012-04-11T07:13:05.540
> 
> 标签：sql, oracle

我有一个包含大约 100k 记录的表，我想删除一些行，问题是该`DELETE`语句运行非常缓慢 - 它没有在 30 分钟内完成。但该`select`语句在 1 秒内返回。

`SELECT`声明如下：

```
select * from daily_au_by_service_summary 
    where summary_ts >= to_date('09-04-2012','dd-mm-yyyy') 
    order by summary_ts desc; 
```

声明`DELETE`如下：

```
delete from daily_au_by_service_summary 
    where summary_ts > to_date('09-04-2012','dd-mm-yyyy'); 
```

该表的唯一索引位于`summary_ts`。

可能是什么原因？

编辑：在我杀死锁定表的会话后，问题已经解决，感谢大家的帮助。

```
SESSION_ID ORACLE_USERNAME                OS_USER_NAME                   OBJECT OWNER                   OBJECT_NAME                                                                                                                      OBJECT_TYPE         LOCKED_MODE
---------- ------------------------------ ------------------------------ ------------------------------ -------------------------------------------------------------------------------------------------------------------------------- ------------------- -----------
       213 T03RPT                         elou                           T03RPT                         DAILY_AU_BY_SERVICE_SUMMARY                                                                                                      TABLE                         3 
       203 T03RPT                         elou                           T03RPT                         DAILY_AU_BY_SERVICE_SUMMARY                                                                                                      TABLE                         3 
       202 T03RPT                         elou                           T03RPT                         DAILY_AU_BY_SERVICE_SUMMARY                                                                                                      TABLE                         3 
       190 T03RPT                         elou                           T03RPT                         DAILY_AU_BY_SERVICE_SUMMARY                                                                                                      TABLE                         3 
       189 T03RPT                         elou                           T03RPT                         DAILY_AU_BY_SERVICE_SUMMARY                                                                                                      TABLE                         3 
       188 T03RPT                         elou                           T03RPT                         DAILY_AU_BY_SERVICE_SUMMARY                                                                                                      TABLE                         3 
       187 T03RPT                         elou                           T03RPT                         DAILY_AU_BY_SERVICE_SUMMARY 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T07:26:08.577

可能有很多原因：

*   服务器负载（不太可能是因为`SELECT`速度很快）
*   触发器（请参阅此处[如何为表格列出它们](http://www.shutdownabort.com/dbaqueries/Structure_Triggers.php)）。
*   外键（外键[列表和它们引用的表](https://stackoverflow.com/questions/1729996/list-of-foreign-keys-and-the-tables-they-reference)）
*   每行中有很多数据（`LOB`s，很多列）。
*   有人锁定了您要删除的表（或整个表）中的行。[请参阅此博客文章如何列出锁](http://www.vinodsr.com/myblog/2009/05/how-to-get-the-locked-tables-list-in-oracle/)。[这个讨论](https://forums.oracle.com/forums/thread.jspa?threadID=671163)也可能有帮助。

如果外键是问题，通常的解决方案是在外列上添加索引：对于每次删除，Oracle 需要检查这是否会违反外键关系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T07:31:10.100

删除意味着改变表格的内容。这意味着，在每个删除的行之后，必须更新所有索引，并且必须检查所有外键引用。这可能需要很长时间！

也许这有帮助：

在没有任何引用、触发器和其他索引的情况下复制该表。然后这样做：

```
insert into new_table (field1, field2, ...) values (
    select field1, field2, ...
    from daily_au_by_service_summary 
    where summary_ts < to_date('09-04-2012','dd-mm-yyyy') 
); 
```

如果表格中的字段以相同的顺序定义，这也可能有效：

```
insert into new_table values (
    select *
    from daily_au_by_service_summary 
    where summary_ts < to_date('09-04-2012','dd-mm-yyyy') 
); 
```

之后：

```
truncate daily_au_by_service_summary 
```

进而：

```
insert into daily_au_by_service_summary (field1, field2, ...) values (
    select field1, field2, ...
    from new_table; 
); 
```

不再需要新表：

```
drop new_table; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T07:20:21.487

显然，删除操作将比选择花费更长的时间，但这并不能说明您看到的差异。

听起来在删除时正在运行其他代码，这表明表上可能有触发器也在运行。你能检查一下吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:44:18.770

当 DML 操作需要很长时间时，使用剩余的行创建新表并删除以前的表，而不是删除。

我是说，

```
create table NEW_TABLE as
select * from daily_au_by_service_summary  
where summary_ts <= to_date('09-04-2012','dd-mm-yyyy'); 
```

这会更快，尤其是当您删除大量行时。（例如，占总行数的 %10。）

# javascript - 使用 jQuery 创建动画列表

> ID：10101485
> 
> 赞同：1
> 
> 时间：2012-04-11T07:13:06.273
> 
> 标签：javascript, jquery, html, css

我有一个由 分隔的文本列表`<br/>`，我想在每次点击事件后使用随机随机播放为它们中的每一个设置动画，每次点击后的顶部位置是随机确定的。

```
<html>
<body>
  <span id="text1">Text1</span>
  <span id="text2">Text2</span>
  <span id="text3">Text3</span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:15:33.937

尝试这个

```
$('body').on('click',function(e){
    $('span').eq((e.pageX+e.pageY)%3).appendTo($('#container_div'));
    }) 
```

其中 container_div 是包含这些跨度的 div 的 id ....在这种情况下，您可以只使用“body”

好吧，实际上它不是随机的，但考虑到用户的鼠标点击是随机的，它会给出随机的结果......

如您所见，我将鼠标单击的 x 和 y 位置的总和取值为 3，然后选择该跨度（模数为 0,1 或 2）移动到列表顶部

# vim - 在 Ubuntu 上从 Vim 剪切到系统剪贴板

> ID：10101488
> 
> 赞同：32
> 
> 时间：2012-04-11T07:13:22.907
> 
> 标签：vim, ubuntu

我正在使用附带的 Ubuntu 12.04 Beta 和 Vim。我正在尝试使用 Vim 将文本文件的内容复制到 Chrome 浏览器。我已经尝试过`+`，`*` `y`以及它的所有变体。我已经尝试`:set clipboard=unnamed`和`:set clipboard=unnamedplus`. 不工作。我不想使用 xclip、GVim 或任何其他。我尝试使用 xclip（不是 Ubuntu 12.04 中的标准包），但这也不起作用，也太费劲了。

如何将文本复制到剪贴板，然后粘贴到任何地方，例如 Chrome？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-11T10:13:14.697

你的 Vim 版本不支持 X，这是访问剪贴板所必需的。默认情况下，Ubuntu 提供了几个版本的 vim，只有 GUI 变体支持剪贴板访问。我总是从源代码重新编译 vim，以便单个 vim（带有 gvim 的符号链接等）支持所需的一切（包括`:gui`从命令行切换到 GUI 版本）。这真的很容易做到：

```
# Get the compile-dependencies of vim
sudo apt-get build-dep vim
# If you haven't got mercurial, get it
sudo apt-get install mercurial
# Get the source
hg clone https://vim.googlecode.com/hg/ vim_source
# Compile it
cd vim_source
./configure \
    --enable-perlinterp=dynamic \
    --enable-pythoninterp=dynamic \
    --enable-rubyinterp=dynamic \
    --enable-cscope \
    --enable-gui=auto \
    --enable-gtk2-check \
    --enable-gnome-check \
    --with-features=huge \
    --with-x \
    --with-compiledby="Your Name <youremail@domain.com>" \
    --with-python-config-dir=/usr/lib/python2.7/config
make && sudo make install 
```

这会将它安装在 中`/usr/local`，因此请确保它在您的`PATH` **之前** `/usr`版本中，并且它将被使用而不是 Ubuntu 版本。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-11T10:25:55.883

的输出`vim --version`应显示如下：

```
Huge version with GTK2-GNOME GUI.  Features included (+) or not (-): 
```

在输出的更下方，您应该会看到类似 +Xll 的内容：

```
+vreplace +wildignore +wildmenu +windows +writebackup +X11 -xfontset +xim 
+xsmp_interact +xterm_clipboard -xterm_save 
```

这意味着您的控制台 vim 可以从 X11 剪贴板复制/粘贴。

尝试`apt-get install vim-gtk`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-27T11:51:39.587

安装包`vim-gnome`而不是`vim`. 它带有`clipboard`启用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-16T08:46:40.533

您还可以在 vimrc 中添加快捷方式

```
# Copy and paste
vmap <C-c> "+yi
vmap <C-x> "+c
vmap <C-v> c<ESC>"+p
imap <C-v> <ESC>"+pa 
```

它将允许您通过 + 复制和通过`Ctrl`+`C`粘贴`Ctrl``V`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-17T19:06:48.783

如果您`configure`按照@DrAl 的说明运行，但仍然无法编译 GUI，并且您在输出中看到了这一点`./configure`

```
checking for X... (cached) no 
```

然后您可能必须删除`configure`创建的缓存文件。

```
find . -name config.cache -delete 
```

然后重新运行`configure`并再次`make`检查`src/vim --version`- 它应该显示现在包含 gui。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-09T16:20:52.443

你能行的; 只需管道到 xclip。

```
gg
V
G
:'<,'>w !xclip 
```

从这里：[在 vim 中使用 xclip，拉到剪贴板](https://stackoverflow.com/questions/5240473/in-vim-with-xclip-yank-to-clipboard)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-16T03:16:17.920

我会使用文件 URL 在浏览器中打开文件：

```
file:///home/dave/some-file 
```

不是超级优雅，但它有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-24T14:11:11.177

我真的很喜欢这组快捷方式：

```
" Add shortcut for clipboard registers
noremap <leader>p "*p
noremap <leader>y "+y
noremap <leader>d "+d 
```

这只是一种更简单的方法，然后每次都输入“*”和“+”。

# javascript - 具有多个值的自动完成

> ID：10101490
> 
> 赞同：3
> 
> 时间：2012-04-11T07:13:31.763
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我已经尝试了多个值的 jQuery 自动完成功能。它工作正常，但唯一的问题是，如果我在 textarea 中输入一个单词，然后转到 textarea 的开头并输入另一个单词，它会附加到文本区域的末尾而不是 CARET 位置。你能帮忙吗？

谢谢你

这是代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org     

     /TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
  <html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<script  type="text/javascript"> 
  //         document.domain = "toitl.com"; 
  //         alert(document.domain); 
</script> 
<title>Form Field Clear</title> 
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-

  ui.css"  
      rel="stylesheet" type="text/css"/> 
<script type="text/javascript"  src='../../../../libuser/toitldocumentdomain.js'>

    </script> 
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script> 
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.js"></script> 
  <meta charset="utf-8">
      <script>
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    function split( val ) {
        return val.split( / \s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $( "#tags" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" 

         ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 0,
            source: function( request, response ) {

                response( $.ui.autocomplete.filter(
                    availableTags, extractLast( request.term ) 

                        ) );
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );

                terms.push( "" );
                this.value = terms.join( " " );
                return false;
            }
        });
});
</script>

  </script> 
 </head> 
 <body> 
  <div class="demo">

  <div class="ui-widget"> 
<label for="tags">Tag programming languages: </label>
<textarea id="tags" cols="50" ></textarea>
 </div>

 </div>
 </body> 
 </html> 
```

# javascript - Javascript/Jquery 简单的用户体验功能

> ID：10101492
> 
> 赞同：1
> 
> 时间：2012-04-11T07:13:34.663
> 
> 标签：javascript, jquery, asp.net

我开始为我的网站编写一些 javascript 以创造更好的用户体验，但我对到底发生了什么有点困惑，也许其他人清楚地知道我做错了什么或遗漏了什么。我有两个 javascript 函数，在第一次使用后可以完美运行，如果你慢慢使用它（有时如果你按两个键太快，它会跳过下一个项目并且什么都不选择）。我觉得我缺少某种 $(document).ready(function() {}); 实施以确保每个流程在继续之前完成。我有两个文本框，用户输入两个数字，然后它移动到下一个选项卡元素（下一个文本框）。如果有任何影响，文本框也在 asp.net 更新面板中。

```
 function selectall(item) {
            $(item).focus().select();
    };

    function selectNext(textBox) {
        if ($(textBox).val().length == 2) {
            $(textBox).next().focus().select();
        }
    };

        <asp:TextBox ID="Text1" runat="server" Width="30px" AutoPostBack="True"  onkeyup="selectNext(this);" onclick="selectall(this);"
    Height="20px"></asp:TextBox>:
                <asp:TextBox ID="Text2" runat="server" Width="30px" AutoPostBack="True" onkeyup="selectNext(this);" onclick="selectall(this);"
    Height="20px"></asp:TextBox>
                 <asp:DropDownList ID="Text2" runat="server" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:27:43.580

为什么需要在 UpdatePanel 中包含文本框？

您在文本框上设置的 AutoPostback 可能会导致 jQuery 出现问题，因为每当 TextBox 控件失去焦点时都会发生页面回发。

我会将您的文本框从您的 UpdatePanel 中取出，删除 AutoPostback 并将您的 JavaScript 放在`document.ready`.

# 编辑

代码片段：

```
$(document).ready(function() {
    $("#fname").keyup(function() {
        selectNext($(this));
    });

    $("#fname").focus(function() {
        $(this).select();
    });

    $("#lname").keyup(function() {
        selectNext($(this));
    });

    $("#lname").click(function() {
        $(this).select();
    });
});

function selectNext(textBox) {
    if (textBox.val().length == 2) {
        setTimeout(function() {
            textBox.next().focus().select();
        }, 5);
    }
} 
```

# ios - 直接访问member和通过self.name访问的线程安全策略有什么区别吗？

> ID：10101496
> 
> 赞同：0
> 
> 时间：2012-04-11T07:14:08.753
> 
> 标签：ios, thread-safety, accessor

我有下面的代码。我想知道线程安全策略`self.value`和`_value`线程安全策略有什么区别吗？

```
//temp.h
@interface Temp:NSObject

@property(nonatomic, strong) NSInteger *value;

@end

//temp.m
@implementation Temp

@synthesize value = _value;

- (void)someMethod:(NSInteger)someValue {
    self.value = someValue;
}

- (void)someOtherMethod:(NSObject *)someValue {
    _value = someValue;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:16:47.710

就您所问的而言，它们完全相同。线程安全不受影响（如果你使用原子而不是非原子，IIRC）。

# javascript - 当我第二次点击链接时如何显示面板

> ID：10101497
> 
> 赞同：1
> 
> 时间：2012-04-11T07:14:15.083
> 
> 标签：javascript, jquery, html

当点击左侧链接时，下面对我来说很好，右侧面板动画像slideUp。但是当我再次点击同一个链接时，面板隐藏了。但我不想隐藏面板。请让我知道，我需要在上面的代码中更正什么。

```
$(function() {
    $('div.panel').hide();
    $('div.panel:first').addClass('active').show();
    $('li.link').click(function() {
        var id = $(this).attr('rel');
        var showing = $(id).is(':visible');
        $('div.panel').slideUp('slow');
        $('li.link').removeClass('active');
        if (!showing) {
            $(id).slideDown('fast', function() {
                $('html,body').animate({
                    scrollTop: 0
                }, 'slow')
            });
            $(this).addClass('active');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:24:31.087

将`.slideUp`调用移到`if`块内。如果您单击了与当前页面对应的链接以外的任何链接，您只想做一些事情。

```
$('li.link').click(function() {
    var id = $(this).attr('rel');
    var showing = $(id).is(':visible');
    $('li.link').removeClass('active');
    $(this).addClass('active');
    if (!showing) {
        $('div.panel').slideUp('slow');
        $(id).slideDown('fast', function() {
            $('html,body').animate({
                scrollTop: 0
            }, 'slow')
        });
        $(this).addClass('active');
    }
}); 
```

# php - 在 PHP 中解析 BIG XML

> ID：10101498
> 
> 赞同：1
> 
> 时间：2012-04-11T07:14:19.420
> 
> 标签：php, mysql, arrays, xml-parsing

我需要解析一个很大的 XML。f.ex 100mb（甚至可以更多）。

例如：Xml 看起来像这样：

```
<notes>
  <note>
    <id>cdsds32da435-wufdhah</id>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
  </note>

 x 1000000 different notes(or even more)

</notes> 
```

每个笔记都有唯一的 ID。当我解析 XML 时，我需要先查找特定 ID 的注释是否存在于 DB 中，如果不存在则插入它。

问题在于性能（需要 2 小时）。我尝试使用一个 SELECT 从数据库中获取所有 id（但也很大），所以我不会每次都询问数据库，而是将它们保存在 PHP 数组（内存）中。

```
$sql = "SELECT id FROM 'notes'";
...
$ids = Array with all ids 
```

我还在循环中使用 xml_parser 解析了一个 XML：

```
while($data = fread($Xml, '512')) {
    xml_parse($xmlParser, $data);
} 
```

我认为使用 simple_xml_parser 解析 XML 可能会生成一个太大的变量，PHP 无法处理它。

当我有一个便笺 ID 时，我会检查它是否存在于 $ids 中：

```
if (array_search($note->id, $ids) === FALSE) {
    //than insert it
} 
```

但是时间太长了。所以我发现 PHP 带有一个叫做 Juddy Arrays 的特殊数组 [http://php.net/manual/en/book.judy.php](http://php.net/manual/en/book.judy.php)但我不知道它们是否适合这个 - 我的意思是快速解析 BIG Arrays。

我也认为使用 Memcached 可以将 DB 中的 id 存储在许多变量中，但我想找到一个合适的解决方案。

在数据库表中也有索引，以加快进程。XML 每周都在增长 :) 并且每次都包含上一个 XML 中的所有注释以及新注释。

问题？如何在 PHP 中快速解析 BIG ARRAYS？Judy Arrays 适合这个吗？将数据库中的所有 id 存储在一个变量中是一个好的解决方案吗？- 一次对 PHP 来说可能会很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:33:21.923

当我解析[DMOZ 数据库](http://rdf.dmoz.org/) （2G xml）时，我一直在使用 Java 解决方案（SAX 解析器）。首先，我需要将大量数据从 XML（RDF 格式）传输到 MySQL 数据库中。我的 PHP 解决方案在 6 个小时内完成了这项任务。但是 Java 解决方案在 15 分钟后完成了类似的任务。所以我可以告诉你：尝试使用基于 SAX 解析器的 Java 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:16:57.923

您确定在插入之前需要查找该项目是否存在于数据库中吗？您可以告诉数据库“如果它不存在则插入它”：在 ID 上放置一个唯一键并使用[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.5/en/insert.html).

# c# - 错误：无法将 lambda 表达式转换为类型“int”，因为它不是委托类型

> ID：10101502
> 
> 赞同：5
> 
> 时间：2012-04-11T07:14:31.810
> 
> 标签：c#

这是源代码（我正在使用 CodeSmith 工具）：

```
public static int Delete(this System.Data.Linq.Table<EAccredidation.Data.Programs> table, int pKProgramID)
{
    return table.Delete(p => p.PKProgramID == pKProgramID);
} 
```

我收到此错误：

> 无法将 lambda 表达式转换为类型“int”，因为它不是委托类型 C:\Projects\New\EAccreditation.Data\Queries\ProgramsExtensions.Generated.cs

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:28:41.503

您已将您的方法规定为扩展方法，因此出于示例的目的，您可以忽略方法声明中的第一个参数。

因此，您唯一关心的参数是第二个参数`int pKProgramID`.

当您调用此方法时（递归），它需要一个 int，但您传递的是一个 lambda 委托 ( `p => p.PKProgramID == pKProgramID`)

而且，正如 Raymond Chen 在他的评论中暗示的那样，你的方法是递归的，所以你可能会有更多的痛苦！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:32:52.937

没有内置的基于谓词的删除。您将不得不使用：

```
table.DeleteAllOnSubmit(table.Where(p => p.PKProgramID == pKProgramID)); 
```

或者因为我们假设 PK 是唯一的：

```
var record = table.SingleOrDefault(p => p.PKProgramID == pKProgramID);
if(record != null) table.DeleteOnSubmit(record); 
```

您当然还需要`SubmitChanges()`在某些时候了解上下文。

# c# - MongoDB认证

> ID：10101506
> 
> 赞同：2
> 
> 时间：2012-04-11T07:14:49.333
> 
> 标签：c#, mongodb-.net-driver

如何通过官方 c# 驱动程序对 mongodb 使用身份验证？除了内部成员之外，我找不到任何用于身份验证的 API 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:23:20.467

应使用以下连接字符串格式在连接字符串中指定身份验证凭据：

```
mongodb://[username:password@]hostname[:port][/[database][?options]] 
```

[在MongoDB C# 驱动程序教程](http://docs.mongodb.org/ecosystem/tutorial/use-csharp-driver/#connection-strings)中查看完整的详细信息

# javascript - 如何包装构造函数？

> ID：10101508
> 
> 赞同：9
> 
> 时间：2012-04-11T07:14:52.200
> 
> 标签：javascript, oop, constructor

我有这个 JavaScript：

```
var Type = function(name) {
    this.name = name;
};

var t = new Type(); 
```

现在我想添加这个：

```
var wrap = function(cls) {
    // ... wrap constructor of Type ...
    this.extraField = 1;
}; 
```

所以我可以这样做：

```
wrap(Type);
var t = new Type();

assertEquals(1, t.extraField); 
```

**[编辑]**我想要一个实例属性，而不是类（静态/共享）属性。

在包装函数中执行的代码应该像我将其粘贴到真正的构造函数中一样工作。

的类型不`Type`应该改变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T07:24:59.733

更新：[这里的更新版本](http://jsfiddle.net/EsWbu/8/)

您实际上正在寻找的是将 Type 扩展到另一个类。在 JavaScript 中有很多方法可以做到这一点。我并不是真正喜欢构建“类”`new`的`prototype`方法（我更喜欢寄生继承风格），但这就是我得到的：

```
//your original class
var Type = function(name) {
    this.name = name;
};

//our extend function
var extend = function(cls) {

    //which returns a constructor
    function foo() {

        //that calls the parent constructor with itself as scope
        cls.apply(this, arguments)

        //the additional field
        this.extraField = 1;
    }

    //make the prototype an instance of the old class
    foo.prototype = Object.create(cls.prototype);

    return foo;
};

//so lets extend Type into newType
var newType = extend(Type);

//create an instance of newType and old Type
var t = new Type('bar');
var n = new newType('foo');

console.log(t);
console.log(t instanceof Type);
console.log(n);
console.log(n instanceof newType);
console.log(n instanceof Type); 
```

# php - 注册表类的目的是什么？

> ID：10101512
> 
> 赞同：2
> 
> 时间：2012-04-11T07:15:11.780
> 
> 标签：php, model-view-controller

有人可以解释为什么在 MVC 框架中需要一个注册表类吗？

是加载库吗？创建注册表背后的总体思路是什么？登记处应处理哪些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:17:17.923

直接来自[http://www.phppatterns.com/docs/design/the_registry](http://www.phppatterns.com/docs/design/the_registry)

> Registry 提供了一种以管理良好的方式在全球存储数据的机制，有助于防止全球崩溃。

基本上，这意味着注册表是一个在全局范围内存储您需要的变量/对象的地方，而不会污染应用程序的全局命名空间。它与 MVC 本身无关，但许多 MVC 框架也使用注册表模式。

它允许您将变量*存储*在一个地方并在另一个地方*检索*它，而无需求助于各种复杂的例程或魔法来检索您的变量。

以 Zend Framework 为例，您创建一个 Zend_Navigation 对象并将其存储在引导时的[Zend_Registry中。](http://framework.zend.com/manual/en/zend.registry.using.html)然后稍后您可以轻松地从其中一个控制器或其他类的注册表中检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:29:45.313

Registry 类更像是数据持有者对象加载器等等。您可以将数据添加到控制器中的注册表并从视图中获取。一个小例子。

```
 Class Registry
    {
         protected $data = array();
         private $loadClasses;

         public function getData($name){

            return isset($this->data[$name])?$this->data[$name]:null;
         }
         public function setData($name,$value)
         {
            $this->data[$name] = $value;
         }
         public function addData($name,$value)
         {
             $this->data[$name][] = $value;
         }

         public function &singletonLoad($class) 
         {
            if(isset($this->loadClasses[$class])) 
            {
               return $this->loadClasses[$class] ;  
            }
            if(class_exists($class)) 
            {
                return $this->loadClasses[$class] = new $class();
            }else 
            {
                return false;
            }
         }

    }

    class AController  extends Controller
    {
        public function indexAction() 
        {
            $this->registsry->setData('name','John')  ;
        }

    }

     class AView  extends View
    {
        public function getName() 
        {
            return  $this->registsry->getData('name') ;
        }

    } 
```

# java - 如何以 SYS 身份在 Java 中连接到 Oracle？

> ID：10101517
> 
> 赞同：32
> 
> 时间：2012-04-11T07:15:46.973
> 
> 标签：java, database, oracle, sys

我收到此错误：

```
java.sql.SQLException: ORA-28009: connection as SYS should be as SYSDBA or SYSOPER 
```

怎么修？（我需要`SYS`）。谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-11T18:04:20.893

试试这个 ：

```
import java.sql as jsql
import java.lang as lang
driver, url, user, passwd = (
"oracle.jdbc.driver.OracleDriver",
"jdbc:oracle:thin:@localhost:1234:xxx1",
"sys as sysdba",
"xxx1")
 lang.Class.forName(driver)
 c = jsql.DriverManager.getConnection(url,user,passwd) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-05T05:50:38.597

已经有了答案，

您正在尝试连接，`sys`但服务器允许

任何一个

```
sys as sysdba 
```

或者

```
sys as sysoper 
```

只需将用户参数更改为上面的任何一个

```
user='sys as sysdba' 
```

或者

```
user='sys as sysoper' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T17:56:34.397

此代码有效

```
String driverName = "oracle.jdbc.driver.OracleDriver";
Class.forName(driverName).newInstance();
String nameForConnect = "sys as sysdba";
String pass = "password";
String url = "jdbc:oracle:thin:@192.168.0.1:1521:ORCL";
Connection conn = DriverManager.getConnection(url, nameForConnect, pass); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-11T07:29:43.360

如果您尝试像这样连接到数据库：`connect SYS/<password>`您使用的语法不再有效（Oracle 9i 之后）。

而是尝试如下连接：

```
connect SYS/<password> as SYSDBA or connect SYS/<password> as SYSOPER 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T11:16:52.200

您可以使用 OracleDataSource 对象吗？

```
public class Database {    
    static OracleDataSource ods;    
    public static Connection openConnection(String URL, String user, String password,     String option) throws SQLException
    {
            Connection conn = null;
            Properties properties = new Properties();
            properties.put("user", user);
            properties.put("password", password);

            ods = new OracleDataSource();
            ods.setURL(URL);

            if(option != null)
            {
                properties.put("internal_logon", option);
            }

            ods.setConnectionProperties(properties);
            conn = ods.getConnection();

            return conn;
    }
} 
```

并这样称呼它：

```
Connection con = null;    
con = Database.openConnection("YourJDBCConnectionURL", "YourSYSUser", "YourSYSPassword", "sysdba"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-10T10:54:56.040

如果要将数据库与“sys”以外的用户连接为“sysdba”，则必须将驱动程序从“thin”更改为“oci”才能成功连接。

```
try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        String DB_URL="jdbc:oracle:oci:@localhost:1521:orcl";
        OracleDataSource ds1=new OracleDataSource();
        Properties prop1 = new Properties();
        prop1.setProperty("user","ravi");
        prop1.setProperty("password","******");
        prop1.setProperty("internal_logon","sysdba");
        ds1.setConnectionProperties(prop1);
        ds1.setURL(DB_URL);
        OracleConnection conn1 = (OracleConnection)ds1.getConnection();
        Statement stmt = conn1.createStatement();
        ResultSet rs = stmt.executeQuery("select * from dba_users");
        while (rs.next())
            System.out.println(rs.getString(1));
        conn1.close();
    } catch (Exception e) {
        System.out.println(e);
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-23T22:29:12.170

```
 /*It works for me*/
        /*also oci and thin is important if you want to connect with database which is installed in your clien (Computer) add oci if you want to install to server add thin*/

        String dbURL2 = "jdbc:oracle:oci:@172.16.24.123:1521:XE";
        String username = "sys as sysdba";
        String password = "XX Change it to your system password";

        try {
        Connection connection = DriverManager.getConnection(dbURL2, username, password);
            System.out.println("Connected to Oracle data");

    } catch (SQLException e) {
            System.out.println("Opps ! error");
            e.printStackTrace();

    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-11T12:36:28.553

您需要将 sysdba 与用户字符串参数一起放入，例如

```
String user="sys as sysdba" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-08T21:38:20.757

当我遇到同样的异常时，我的两分钱。以下为我做了诀窍：

```
 try (Connection conn = DriverManager.getConnection(
                "jdbc:oracle:thin:@myserverip:1521:XE", "sys as sysdba", "Hello123")) {   
           // this worked too - "jdbc:oracle:thin:@myserverip:1521:XE", "system"
              if (conn != null) {
                  System.out.println("Connected to the database!");
              } else {
                System.out.println("Failed to make connection!");
              }

            } catch (SQLException e) {
              System.err.format("SQL State: %s\n%s", e.getSQLState(), e.getMessage());
            } catch (Exception e) {
            e.printStackTrace();
           } 
```

# ip - 从 IP 地址获取子网掩码和网关

> ID：10101520
> 
> 赞同：2
> 
> 时间：2012-04-11T07:16:04.460
> 
> 标签：ip, ip-address, gateway, subnet

我如何计算`subnet mask`和`gateway`从`IP address`？

假设我的 IP 地址是`180.12.24.68`

那么如何计算这个IP的子网掩码和网关呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T08:04:16.900

您无法仅根据 IP 地址计算子网掩码*或*网关。

在给定 IP 地址和网络掩码的情况下，您可以计算潜在网关的范围。但是，范围基本上是（（我的 LAN 网段大小）- MyIP）。通常这将是大约 253 个 IP 地址，除非您在大型网络上。

给定网关和网络掩码，您可以计算出可以配置自己使用的潜在 IP 地址范围 - 但如果您手动配置，则有可能破坏现有 IP 地址。（这就是DHCP很好的原因）

给定网关和 IP 地址，您可以计算出足够多的网络掩码，以便路由流量 - 但根据子网配置，您可能无法与同一 LAN 网段上的其他机器通信。例如，如果您的网关是 10.1.3.254，而您将网络掩码配置为 255.255.255.0。网关（和 LAN）实际上可以被屏蔽为 255.255.254.0（基本上，连续段中的 2 个 C 类地址）。所以，你可以上网，但你可能无法上网与“本地机器”交谈。

总而言之，这些是可能的结果：

*   掩码 + 网关 = 可猜测但不确定的 IP 地址
*   掩码 + ip = 可猜测但不确定的 IP 地址范围，您可能会找到网关
*   ip + gateway = 可猜测但可能配置错误的网络掩码

# java - dbunit 数据集没有将布尔字段放入 db

> ID：10101521
> 
> 赞同：4
> 
> 时间：2012-04-11T07:16:09.800
> 
> 标签：java, integration-testing, dbunit

我使用 DbUnit 进行集成测试。我有以下数据集。

```
<?xml version='1.0' encoding='UTF-8'?>
<dataset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="dataset.xsd">
    <USERS ID="1" EMAIL="" LASTNAME="A" LASTMODIFIED="2001-01-01 00:00:00.0" />
    <USERS ID="2" EMAIL="" LASTNAME="D" LASTMODIFIED="2001-01-01 00:00:00.0" ACTIVE="true" />
</dataset> 
```

当我在测试中从数据库加载第二个用户时，不知何故没有在第二个用户上设置布尔字段 ACTIVE。

测试看起来像这样：

```
@SpringApplicationContext("component-context-test-dao.xml")
@DataSet
public class UserDaoImplIT extends UnitilsJUnit4 {

@SpringBeanByType
private UserDaoImpl userDao;

@Test
public void shouldReturnTrueIfFoundActiveUserWithEmail() throws InterruptedException {
    boolean exits = userDao.isEmailFromActiveUserInUsers("anEmailThatDoesNotExist@oeamtc.at");
    List list = HibernateUnitils.getSession().createQuery("from User").list();
    assertThat(exits, is(true));

}
} 
```

我在 Eclipse 中针对内存中的 h2 运行测试。

任何想法为什么除了布尔值之外的所有字段都被映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:11:38.730

因为值应该是`TRUE`或`FALSE`

[数据类型 - 布尔类型](http://www.h2database.com/html/datatypes.html#boolean_type)

# grails - 我想访问在过滤器中声明的变量

> ID：10101525
> 
> 赞同：0
> 
> 时间：2012-04-11T07:16:31.080
> 
> 标签：grails, filter, before-filter

```
def filters = {
     forUser(controller:'user', action:'*') {
         before = {
            user=springSecurityService.getCurrentUser()
            log.info("came to filter and the user is" + user)
         }
         after = {

         }
         afterView = {

         }
     }
} 
```

我想在用户控制器中访问这个用户变量。是否可以不创建会话变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:35:28.803

您可以使用请求范围变量：

```
request.setAttribute('user', user) 
```

并在 GSP 中用作：

```
${user} 
```

或在控制器中：

```
request['user']
//or
request.user 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:21:25.997

我会用

```
 params.user = user 
```

然后你可以在你的控制器中访问它

```
 params.user 
```

并在您的 gsp 中：

```
 ${params.user} 
```

非常简洁

# ios - 如何将 NSData 值转换为 UIImage

> ID：10101526
> 
> 赞同：6
> 
> 时间：2012-04-11T07:16:43.857
> 
> 标签：ios, uiimage, nsdata

> **可能重复：**
> [NSData 到 UIImage](https://stackoverflow.com/questions/2240765/nsdata-to-uiimage)

如何将 NSData 值转换为 UIImage？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-11T07:20:12.313

您可以从[NSData获取](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)[UIImage](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html) ，如下所示：

```
NSData *data = yourData;

UIImage *image = [UIImage imageWithData:data]; 
```

或者

```
NSData *data = yourData;

UIImage *image = [[UIImage alloc] initWithData:data];
....
[image release]; 
```

# c# - 在通过程序集引用的内容页面上引发 NullReferenceException 异常

> ID：10101529
> 
> 赞同：1
> 
> 时间：2012-04-11T07:16:58.877
> 
> 标签：c#, asp.net, .net, exception-handling, nullreferenceexception

尝试使用引用程序集中的 ASPX 页面时遇到此问题。此页面由内容页面及其母版页组成。仅当从另一个 Web 项目访问任何内容页面 web 控件时才会引发异常，但从它所属的同一项目访问该页面时不会发生这种情况。

起初，这些页面应该是常规的 ASPX 页面，然后它们运行良好（即没有发生此异常），但我们的上级决定将它们包装到 MasterPages 中，以实现一些可重用性或其他原因（这有点奇怪因为这个 ASPX 页面是自动生成的）。

所以，我们现在遇到了这个麻烦：/

编辑：我正在添加一些代码来帮助你帮助我:)

母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="MasterPage.master.cs"
Inherits="WebApplicationTemplate.MasterPage" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <asp:ContentPlaceHolder ID="headPlaceHolder" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form" runat="server">
        <asp:ContentPlaceHolder ID="formPlaceHolder" runat="server">
        </asp:ContentPlaceHolder>
    </form>
</body>
</html> 
```

内容页：

```
<%@ MasterType VirtualPath="~/MasterPage.Master" %>

<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.Master" AutoEventWireup="true"
    CodeBehind="TestPage.aspx.cs" Inherits="WebApplicationTemplate.TestPage" %>

<asp:Content ID="headContent" ContentPlaceHolderID="headPlaceHolder" runat="server">
</asp:Content>
<asp:Content ID="formContent" ContentPlaceHolderID="formPlaceHolder" runat="server">
    <asp:TextBox ID="id1" runat="server" Text="Text" MaxLength="40" Style="top: 100;
        left: 100; width: 100; height: 100; position: absolute;" />
</asp:Content> 
```

在后面的内容页面代码中引发异常的函数：

```
public void Foo()
{
id1.Text = "something"; //Object reference not set to an instance of an object.
} 
```

正如我之前所说，当我通过引用程序集从另一个项目访问此页面时，我才遇到此问题。我不知道是否必须在任何 web.config 中配置某些内容，无论是在母版页项目中还是在引用前一个项目的程序集的那个中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:20:53.057

当您缺少您正在访问其程序集的其他解决方案中存在的某些配置信息时，通常会发生此类错误。

您需要在当前项目中复制这些设置（例如 app.config 或 web.config），从该项目中您正在访问其他程序集。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:18:23.743

问题解决了。

内容页面的第一行搞砸了，所以现在看起来是这样的：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.Master" AutoEventWireup="true"
    CodeBehind="TestPage.aspx.cs" Inherits="WebApplicationTemplate.TestPage" %>
<asp:Content ID="headContent" ContentPlaceHolderID="headPlaceHolder" runat="server">
</asp:Content>
<asp:Content ID="formContent" ContentPlaceHolderID="formPlaceHolder" runat="server">
    <asp:TextBox ID="id1" runat="server" Text="Text" MaxLength="40" Style="top: 100;
        left: 100; width: 100; height: 100; position: absolute;" />
</asp:Content> 
```

因此，删除该`<%@ MasterType VirtualPath="~/MasterPage.Master" %>`行后，问题就解决了，尽管现在我们必须强制转换 Page.Master 属性，如果要从 ContentPage 访问其字段、属性、控件等...，原因是删除了上述行，我们不再知道我们指的是哪个 MasterPage 类。

像这样的东西：

```
 MasterPage MP;

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        //Setting the master page
        MP = ((WebApplicationTemplate.MasterPage)Master);
    }

    protected void Foo()
    {
        //Accessing a MasterPage control
        MP.Bar.Visible = false;
    } 
```

好吧，就是这样。无法猜测这如何解决我的问题，但确实如此。如果有人能对此有所了解并满足我的好奇心，我将非常高兴。这不太可能，但是，如果有人碰巧遇到这个问题，希望任何人都觉得这很有用。

# windows-ce - 如何在 Winsows CE 6.0 的开始菜单中添加一个项目？

> ID：10101533
> 
> 赞同：0
> 
> 时间：2012-04-11T07:17:10.097
> 
> 标签：windows-ce

我正在为 VIA 8237S 板构建 WinCE6.0 映像。我想在 WinCE 开始菜单中包含（关闭、注销、控制面板）之类的项目。请指导我如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:37:23.103

我有强烈的感觉，你在这里问之前没有做太多的搜索。“Windows CE 开始菜单”的排名第一的搜索结果是[Mike Hall 的 MSDN 文章，它准确地解释了您所追求的内容](http://blogs.msdn.com/b/mikehall/archive/2007/07/26/adding-applications-to-the-windows-ce-start-menu.aspx)。

# python - 在 Mac OS X 上 easy_install matplotlib 更新

> ID：10101540
> 
> 赞同：0
> 
> 时间：2012-04-11T07:18:17.100
> 
> 标签：python, macos, matplotlib, easy-install

我目前正在使用 matplotlib 1.0.1，运行 Python 2.7.1，但希望将其更新到至少 1.1.0。但是，当我尝试从下载 matplotlib-1.1.0-py2.7-python.org-macosx10.3.dmg

[http://sourceforge.net/projects/matplotlib/files/matplotlib/](http://sourceforge.net/projects/matplotlib/files/matplotlib/) ,

随后的安装状态“无法在此磁盘上安装matplotlib 1.1.0。matplotlib需要系统Python 2.7才能安装。”

或者，我在终端中尝试了 $easy_install matplotlib 并得到以下输出：

> install_dir /Library/Frameworks/Python.framework/Versions/7.0/lib/python2.7/site-packages/ 搜索 matplotlib 最佳匹配：matplotlib 1.0.1 将 matplotlib 1.0.1 添加到 easy-install.pth 文件
> 
> 使用 /Library/Frameworks/Python.framework/Versions/7.0/lib/python2.7/site-packages 处理 matplotlib 的依赖关系 完成处理 matplotlib 的依赖关系

并且 $easy_install upgrade matplotlib 得到以下错误：

> 构建 MATPLOTLIB matplotlib：1.1.0 python：2.7.1 |EPD 7.0-2（32 位）| (r271:86832, Dec 3 2010, 15:41:32) [GCC 4.0.1 (Apple Inc. build 5488)] 平台：darwin
> 
> 必需的依赖项 numpy：1.5.1 freetype2：找到，但未知版本（无 pkg-config）* 警告：在“.”、“./freetype2”的任何 * 中都找不到“freetype2”标头。
> 
> 可选的后端依赖 libpng：已找到，但版本未知（无 pkg-config） * 无法在任何“.”中找到“libpng”标头 Tkinter: Tkinter: 81008, Tk: 8.4, Tcl: 8.4 Gtk+: no * 为 Gtk+ 构建需要 pygtk；您必须能够 * 在您的构建/安装环境中“导入 gtk” Mac OS X 本机：是 Qt：否 Qt4：否 Cairo：否
> 
> 可选的日期/时区依赖日期时间：存在，版本未知 dateutil：1.5 pytz：2010o
> 
> 可选 USETEX 依赖项 dvipng：1.13 ghostscript：8.71 latex：3.1415926
> 
> [编辑 setup.cfg 以抑制上述消息] ======================================== ====================================== pymods ['pylab'] 包 ['matplotlib', ' matplotlib.backends'、'matplotlib.backends.qt4_editor'、'matplotlib.projections'、'matplotlib.testing'、'matplotlib.testing.jpl_units'、'matplotlib.tests'、'mpl_toolkits'、'mpl_toolkits.mplot3d'、' mpl_toolkits.axes_grid', 'mpl_toolkits.axes_grid1', 'mpl_toolkits.axisartist', 'matplotlib.sphinxext', 'matplotlib.tri', 'matplotlib.delaunay'] 警告：找不到匹配的文件 'KNOWN_BUGS' 警告：找不到匹配的文件“交互式”警告：找不到匹配“清单”的文件警告：找不到匹配的文件“**在里面**或在 src/ft2font.cpp:3 包含的文件中：src/ft2font.h:35：错误：'FT_Bitmap' 尚未声明 src/ft2font.h:35：错误：'FT_Int' 尚未声明 src/ft2font .h:35: 错误: 'FT_Int' 没有被声明 src/ft2font.h:91: 错误: 在'&' 之前需要',' 或'...' 令牌 src/ft2font.h:91：错误：ISO C++ 禁止声明没有类型 src/ft2font.h:138 的“FT_Face”：错误：“FT_Face”没有命名类型 src/ft2font.h:139：错误： “FT_Matrix”未命名类型 src/ft2font.h:140：错误：“FT_Vector”未命名类型 src/ft2font.h:141：错误：“FT_Error”未命名类型 src/ft2font.h： 142: 错误: 'FT_Glyph' 未在此范围内声明 src/ft2font.h:142: 错误: 模板参数 1 无效 src/ft2font.h:142: 错误: 模板参数 2 无效 src/ft2font.h:143 ： 错误：

对不起，如果这个问题太简单了，但我就是不知道错误可能出在哪里。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:28:09.523

如果您使用 x64 OS X 版本（Snow Leopard 或 Lion），只需下载[这个](http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-1.1.0/matplotlib-1.1.0-py2.7-python.org-macosx10.6.dmg/download)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:27:38.763

尝试使用 pypi！

已经有 matplotlib 1.1 [http://pypi.python.org/pypi/matplotlib/1.1.0](http://pypi.python.org/pypi/matplotlib/1.1.0)

# android - android语音识别支持哪些语言

> ID：10101543
> 
> 赞同：0
> 
> 时间：2012-04-11T07:18:25.350
> 
> 标签：android, speech-recognition

我想使用语音识别来实现搜索，但没有看到有关语音识别支持的语言的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:25:42.033

有关 Google Voice Search（它是 Google App 的一部分）支持的语言，请参阅[Wikipedia: Google Voice Search](https://en.wikipedia.org/wiki/Google_Voice_Search)。Google Voice Search 是 Android 手机上语音识别的主要提供商，但由于在 Android 上提供语音识别的 API 对所有人开放，因此您可能能够找到涵盖不同语言集的应用程序。

# java - 时间计算并比较Android中的最佳时间

> ID：10101548
> 
> 赞同：-1
> 
> 时间：2012-04-11T07:19:02.683
> 
> 标签：java, android

如何使用java计算在Android中玩游戏所花费的时间。您能指定您使用的是哪个计时器吗？以及如何比较用户所花费的时间来找出他的最佳成绩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:24:34.787

您的问题有点含糊...我假设您希望用户完成游戏或任何其他活动所花费的时间...话虽如此，您可以`System.currentTimeMillis()`这样使用：

```
long startTime = System.currentTimeMillis();
...
long duration = System.currentTimeMillis() - startTime(); //Duration in milliseconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:20:33.413

首先用于`System.currentTimeMillis();`查找当前时间，然后在变量中启动它，当游戏结束时再次调用此方法并减去您的变量值

```
long duration = System.currentTimeMillis() - startTime(); 
```

现在这将为您提供时间计算，以找出您必须为用户和 cpu 创建单独的最佳时间方法的最佳时间，就像您为用户所做的那样。这样您就可以轻松比较时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:01:39.287

感谢通过使用@npinti 的回答，现在很容易找到用户所花费的时间，我在这里提出我的逻辑，我是如何比较那些时间松弛的。

```
 public String userCompareTime(double cur_Time)
{
    double temp=0;
    if(temp == userBest_Time)
    {
        userBest_Time=cur_Time;
        temp+=1;
    }
    if(userBest_Time > cur_Time)
    {
        userBest_Time = cur_Time;
    }
    return String.valueOf(userBest_Time);
} 
```

# asp.net - WCF REST 服务模板 40 和 JSON 格式的实体框架返回空响应

> ID：10101550
> 
> 赞同：4
> 
> 时间：2012-04-11T07:19:06.063
> 
> 标签：asp.net, json, wcf, rest, entity-framework-4

我正在尝试使用 WCF REST 服务模板 40 和实体框架构建一个 Rest JSON 服务。

当我尝试创建常规对象并返回它时，一切正常，我得到 JSON 响应（GetEvent 方法）

当我尝试以 XML 格式返回从实体框架调用的对象时，一切正常（GetEvent3 方法）

但是当我尝试从从实体框架调用的对象返回 Json 响应时，我得到空响应（GetEvent2 方法）

知道为什么吗？

这是我的代码：

```
 [DataContract]
public class Event
{
    [DataMember]
    public int ID { get; set; }

    [DataType(DataType.Text)]
    [Display(Name = "Event Name")]
    [DataMember]
    public string Name { get; set; }

    [Display(Name = "Event StartTime")]
    [DataMember]
    public DateTime StartTime;

    [Display(Name = "Event EndTime")]
    [DataMember]
    public DateTime EndTime;
}

[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebGet(UriTemplate = "/GetEvent", ResponseFormat = WebMessageFormat.Json)]
    Event GetEvent();

    [WebGet(UriTemplate = "/GetEvent2", ResponseFormat = WebMessageFormat.Json)]
    Event GetEvent2();

    [WebGet(UriTemplate = "/GetEvent3", ResponseFormat = WebMessageFormat.Xml)]
    Event GetEvent3();
}

[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class Service1 : IService1
{
    private readonly EventsDB _db = new EventsDB();

    // This method return good response in Json format
    [WebGet(UriTemplate = "/GetEvent", ResponseFormat = WebMessageFormat.Json)]
    public Event GetEvent()
    {
        return new Event
        {
            ID = 1,
            Name = "A vs. B",
            StartTime = new DateTime(2012, 4, 10, 18, 00, 00),
            EndTime = new DateTime(2012, 4, 11, 18, 00, 00),
        };
    }

    // This method return no response
    [WebGet(UriTemplate = "/GetEvent2", ResponseFormat = WebMessageFormat.Json)]
    public Event GetEvent2()
    {
        Event e = _db.Events.ToList()[0];
        return e;
    }

    // This method return good response in XML format
    [WebGet(UriTemplate = "/GetEvent3", ResponseFormat = WebMessageFormat.Xml)]
    public Event GetEvent3()
    {
        Event e = _db.Events.ToList()[0];
        return e;
    }
} 
```

网络配置

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>

  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>

  <connectionStrings>
    <add name="EventsDB"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=EventsDB"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
  </system.webServer>

  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="false" defaultOutgoingResponseFormat="Json"/>
      </webHttpEndpoint>
    </standardEndpoints>
    <services>
      <service name="WcfRestService3.Service1">
        <endpoint address="http://localhost:50235/service1"
              binding="webHttpBinding"
              contract="WcfRestService3.IService1" />
      </service>
    </services>
  </system.serviceModel>

  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:33:38.243

您是否缺少方法的`[OperationContract]`属性`GetEvent2`？我可以看到“示例”部分中提到了该属性@ [http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webgetattribute.responseformat%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webgetattribute.responseformat%28v=vs.90%29.aspx)

**编辑：**您的`GetEvent`方法也`[OperationContract]`应用了一个属性，并且根据您的描述它有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:20:22.317

您是否考虑过将 asp.net mvc 用于您的休息服务？这真的很简单，安全和快速。这肯定会让你的生活变得更好。像您在此处发布的服务这样的服务可以在大约 20 分钟内完成，代码不超过 10 行。希望能帮助到你。

# oauth-2.0 - 首次登录和授权后，Google+ OAuth API 存储和检索令牌

> ID：10101551
> 
> 赞同：5
> 
> 时间：2012-04-11T07:19:25.333
> 
> 标签：oauth-2.0, google-plus

我已阅读有关如何使用 Google API 的文档、示例和教程，我已经运行了一个迷你应用程序，它显示了您的最新活动和信息，但我使用会话来存储令牌。

我的问题是，如何从数据库中存储和检索令牌，以便当用户（已注册）单击“登录”时，无需重复授权即可立即使用 API？请注意，我使用该示例作为我的迷你应用程序的起点。

这是一个代码片段：

```
$client = new apiClient();
$client->setApplicationName(APP_NAME);
$client->setClientId(CLIENT_ID);
$client->setClientSecret(CLIENT_SECRET);
$client->setRedirectUri(REDIRECT_URL);
$client->setDeveloperKey(DEV_KEY);

$plus = new apiPlusService($client);
$google_userinfo = new apiOauth2Service($client);

$message = "";

// In a real application this would be stored in a database, and not in the session!
if (isset($_SESSION['token']))
  $client->setAccessToken($_SESSION['token']);

$_SESSION['token'] = $client->getAccessToken();

if (isset($_GET['code'])) {
   $client->authenticate();
  // In a real application this would be stored in a database, and not in the session!
  $_SESSION['token'] = $client->getAccessToken();
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}
...
 //Somewhere here, I added a function that ties $_SESSION['token'] to the user's info.
...
<form action="" method="post" id="form1" name="form1">
   <fieldset>
      <div id="main-url-section" style="width: 50%;margin: 0px auto;text-align: center;">
         <?php
            $authUrl = $client->createAuthUrl();
            print "<p><a class='login' href='$authUrl'>Log me in!</a></p>";
         ?>                                 
      </div>
    </fieldset>
</form> 
```

非常感谢你的帮助！

问候，

约翰

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T01:41:18.990

If you'd like Google to skip the authorization prompt for people who have already authorized your application, add this code in your configuration block at the top:

```
$client->setAccessType("online");
$client-> setApprovalPrompt("auto"); 
```

There's one catch with this solution: you will not receive a refresh token when you complete your OAuth dance. This means that your users will be redirected to Google's authentication service every time their access token expires in order to fetch a new one. This will happen roughly every hour.

**Background Info**

By default the PHP client library is configured to provide [offline access](https://developers.google.com/accounts/docs/OAuth2WebServer#offline). You can see this in the [source code](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/Google_Client.php#233). When this mode is enabled the OAuth flow will yield a [refresh token](https://developers.google.com/accounts/docs/OAuth2WebServer#overview) that can be used to request new access tokens as needed. You may not even notice this happening. The PHP client library takes care of most of this for you.

This refresh token comes at a cost, though. You are responsible for storing it. If you lose it, your user must re-authorize your application for you to be issued another one. The way you store it depends a lot on the details of your implementation. Session data is a reasonable way to do this if you can make it durable enough.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-26T16:48:46.047

这是一个老问题，但在我看来，答案并不完整。

接受的答案以用户确实通过谷歌身份验证服务器的方式工作，只是看不到身份验证屏幕。问题是关于存储令牌并再次使用它而不将用户发送到 Google 服务器。

因此，如果这是您想要做的（并且它还允许您访问用户数据，即使他们当前没有使用您的应用程序），您需要做的就是请求一个包含刷新令牌的访问令牌。

您可以通过使用离线访问类型（顺便说一下，这不再是默认类型）来执行此操作 - 例如在 php:`$client->setAccessType("offline");`中。

请记住，您收到的访问令牌将仅在用户的第一次初始授权中包含刷新令牌，因此这就是您需要存储的内容。

然后，您可以只在客户端使用该访问令牌，即使它已过期，客户端也会负责刷新它并获取一个新令牌。

希望有帮助，阿莫斯

# javascript - “尝试在已清除的范围内运行 compile-and-go 脚本” - 使用 Google Graph api 在 Drupal 中出错

> ID：10101553
> 
> 赞同：1
> 
> 时间：2012-04-11T07:19:33.293
> 
> 标签：javascript, jquery, drupal, google-visualization

我正在尝试在我的 Drupal 7 模块（不是 google graph 模块）中包含 Google graph api。但是当我尝试调用该服务时，我得到：

*   “尝试在已清除的范围内运行 compile-and-go 脚本” - Firefox 中的错误。
*   “无法发送响应：每个 chrome.extension.onRequest 侦听器每个文档不能多次发送响应”-Chrome 中的错误。

代码如下：

```
(function ($) {

  Drupal.behaviors.exampleModule = {
    attach: function (context, settings) {
        // Load the Visualization API and the piechart package.
        google.load('visualization', '1.0', {'packages':['corechart']});
        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(drawChart);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart() {

          // Create the data table.
          var data = new google.visualization.DataTable();
          data.addColumn('string', 'Topping');
          data.addColumn('number', 'Slices');
          data.addRows([
            ['Mushrooms', 3],
            ['Onions', 1],
            ['Olives', 1],
            ['Zucchini', 1],
            ['Pepperoni', 2]
          ]);

          // Set chart options
          var options = {'title':'How Much Pizza I Ate Last Night',
                         'width':400,
                         'height':300};

          // Instantiate and draw our chart, passing in some options.
          var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
          chart.draw(data, options);
        }
        alert("test");
    }
  };

})(jQuery); 
```

我该怎么做才能让它发挥作用？-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:13:14.743

我修好了它：

`google.load('visualization', '1.0', {'packages':['corechart']});`应该首先调用该行，就在`(function ($) {`. 所以解决方案是：

```
(function ($) {
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});
  Drupal.behaviors.exampleModule = {
    attach: function (context, settings) {

        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(drawChart);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart() {

          // Create the data table.
          var data = new google.visualization.DataTable();
          data.addColumn('string', 'Topping');
          data.addColumn('number', 'Slices');
          data.addRows([
            ['Mushrooms', 3],
            ['Onions', 1],
            ['Olives', 1],
            ['Zucchini', 1],
            ['Pepperoni', 2]
          ]);

          // Set chart options
          var options = {'title':'How Much Pizza I Ate Last Night',
                         'width':400,
                         'height':300};

          // Instantiate and draw our chart, passing in some options.
          var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
          chart.draw(data, options);
        }
        alert("test");
    }
  };

})(jQuery); 
```

# ruby - 无法激活 feedzirra-0.1.3，因为 activesupport-3.2.3 与 activesupport (~> 3.1.1) 冲突 (Gem::LoadError)

> ID：10101554
> 
> 赞同：1
> 
> 时间：2012-04-11T07:19:42.170
> 
> 标签：ruby, rss, activesupport, feedzirra

我正在尝试使用 Feedzirra 解析 RSS 提要，但我无法同时拥有所需的 activesupport gem。它告诉我，两个版本的 activesupport 之间存在冲突。我有 activesupport(3.2.3) 和 feedzirra (0.1.3)。

这是我的代码的开头：

```
require 'rubygems'
require 'simple-rss'
require 'open-uri'
require 'json'
require 'rest-client'
require 'digest/sha1'
require 'mysql2'
require 'active_record' 
```

这是我运行文件时遇到的错误。

```
/Users/fil/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:1625:in `raise_if_conflicts': Unable to activate feedzirra-0.1.3, because activesupport-3.2.3 conflicts with activesupport (~> 3.1.1) (Gem::LoadError)
from /Users/fil/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:740:in `activate'
from /Users/fil/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems.rb:209:in `rescue in try_activate'
from /Users/fil/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems.rb:206:in `try_activate'
from /Users/fil/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:58:in `rescue in require'
from /Users/fil/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from wsj.rb:16:in `<main>' 
```

任何想法如何解决这一问题？真的很想使用这个宝石。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T07:35:40.550

看来您已经安装了 Rails（或 ActiveSupport 3.2.3）。Feedzirra 依赖于 3.1：

[https://github.com/pauldix/feedzirra/blob/master/feedzirra.gemspec#L29](https://github.com/pauldix/feedzirra/blob/master/feedzirra.gemspec#L29)

如果您还没有使用 Bundler，我建议您改用它；）

# vim - 如何在我输入 :q 命令退出窗口、选项卡或 vim 后自动关闭 vim 预览窗口？

> ID：10101556
> 
> 赞同：2
> 
> 时间：2012-04-11T07:19:49.490
> 
> 标签：vim

我进行了搜索，并得到了一个衣橱的答案表格[当我将光标移动到 Vim 中的另一个窗口后，如何自动关闭预览窗口？](https://stackoverflow.com/questions/6113316/how-can-i-automatically-close-preview-window-after-i-move-cursor-to-another-wind). 但是我发现它不适用于 taglist 插件。

这是从上面的链接中获取的代码：

```
autocmd WinLeave * pc

autocmd WinLeave * call ClosePreviewWindow()
function ClosePreviewWindow()
    if &pvw
        pclose
    endif
endfunction 
```

我正在使用一个名为 autopreview 的 vim 插件。通常它会调用 ptag 命令打开一个预览窗口并跳回缓冲窗口。问题来了，当它从缓冲窗口跳转到预览窗口并返回时，会触发两次WinLeave事件，然后预览窗口打开后立即关闭。所以一直没有出现。我试图用 TabLeave/BufLeave 替换 WinLeave，出现了其他问题。所以我来这里寻求帮助。

更新：
也许我应该使用 tabclose/qa 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:27:10.103

您是否尝试过使用 WinEnter 事件而不是 WinLeave？在处理程序中，您将检查是否正在进入预览窗口，如果是，则不执行任何操作，否则检查预览窗口是否打开并在必要时关闭它（如上面的代码）。

**编辑**

根据您的描述，为了完成这项工作，您需要检查*前一个*窗口是否是预览窗口。这个片段会告诉你：

```
if getwinvar(winnr("#"), "&pvw") == 1
    " do stuff, e.g. pclose
endif 
```

这就是说，“给我上一个窗口的选项值`pvw`（恰好是窗口本地）”，其中`winnr("#")`给出了前一个窗口的窗口编号。

# c - tcp_cubic.c 中的 printk

> ID：10101557
> 
> 赞同：0
> 
> 时间：2012-04-11T07:19:55.020
> 
> 标签：c, linux-kernel, kernel, printk

我在 tcp_cubic.c中包含了以下**printk语句**

```
static u32 bictcp_recalc_ssthresh(struct sock *sk)
{
  ..

  if (tp->snd_cwnd < ca->last_max_cwnd && fast_convergence)

      ca->last_max_cwnd = (tp->snd_cwnd * (BICTCP_BETA_SCALE + beta))
          / (2 * BICTCP_BETA_SCALE);
  else
      ca->last_max_cwnd = tp->snd_cwnd;

  ca->loss_cwnd = tp->snd_cwnd;

  printk(KERN_INFO "ssthresh is %s", snd_cwnd); // <<<--- here

  return max((tp->snd_cwnd * beta) / BICTCP_BETA_SCALE, 2U);

} 
```

但它不会打印 dmesg 或 syslog 中的值。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:29:27.090

在 Linux 3.1（例如）中，`DEFAULT_MESSAGE_LOGLEVEL`值为 4 和`KERN_INFO`6。尝试使用类似`KERN_ALERT`（值为 1）的内容进行打印。

您可以通过阅读/修改此 proc 文件来检查或更改默认日志级别：

```
cat /proc/sys/kernel/printk 
```

有关此文件的更多信息，请参阅`man 5 proc`。

# c# - 使用 WMI 创建具有两个节点的集群时出现一般故障

> ID：10101565
> 
> 赞同：1
> 
> 时间：2012-04-11T07:20:20.310
> 
> 标签：c#, wmi

请帮助..我正在尝试创建一个具有两个节点的集群（它们都是服务器 2008）并且我正在从 Windows 7 运行这个 C# 应用程序。在创建时我得到以下异常..

`Unhandled Exception: System.Management.ManagementException: Generic failure at System.Management.ManagementException.ThrowWithExtendedInfo(ManagementStat us errorCode) at System.Management.ManagementObject.InvokeMethod(String methodName, Managem entBaseObject inParameters, InvokeMethodOptions options) at Test.main.Main() in D:\Abhijit\Sandbox\BatonInstallerProject\BIM\windows\s ource\test\main.cs:line 202`

```
public void CreateCluster(String[] NodeNames, String ClusterName, String ClusterIP)
{
    string[] ipaddresses = new string[1];
    string[] subnetmasks = new string[1];
    subnetmasks[0] = "255.255.255.0"; 
    ipaddresses[0] = ClusterIP;
    ManagementPath mgmtPath = new ManagementPath("MSCluster_Cluster");
    ObjectGetOptions objGetOptions = new ObjectGetOptions();
    ManagementClass mgmtClass = new ManagementClass(conn.GetConnectionScope, mgmtPath, objGetOptions);
    ManagementBaseObject inParams = mgmtClass.GetMethodParameters("CreateCluster");
    inParams["ClusterName"] = ClusterName;
    inParams["NodeNames"] = NodeNames;
    inParams["IPAddresses"] = ipaddresses;
    inParams["SubnetMasks"] = subnetmasks;
    ManagementBaseObject retVal = mgmtClass.InvokeMethod("CreateCluster", inParams, null);
} 
```

在检查了 ManagementException 的 errorCode 的枚举类型后，它显示“失败”..我任何人都有任何解决方案，请分享它我被困了几天......

# android - 在平板电脑上绘制位图

> ID：10101569
> 
> 赞同：0
> 
> 时间：2012-04-11T07:20:50.403
> 
> 标签：android, android-animation

我用位图的精灵动画构建了一个应用程序，它在小型设备上运行良好（使用 480X320 位图），但如果我想让它在平板电脑上运行，我需要非常大的位图（1200X800），这使得应用程序运行非常缓慢，并且还产生了内存问题。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:36:22.177

大多数平板电脑将运行 Honeycomb 或更高版本，因此您应该在清单中激活硬件加速：

```
 android:hardwareAccelerated="true" 
```

为了解决内存问题，您可以尝试几件事

1.  使用 16 位位图。
2.  回收未使用的位图
3.  使用越来越少的位图
4.  切换到 Renderscript 或 OpenGL

# django - 如何在准确的时间运行 django-cron 作业

> ID：10101573
> 
> 赞同：0
> 
> 时间：2012-04-11T07:20:59.657
> 
> 标签：django, cron, django-cron

我不能在我的项目中使用 celery，只能使用 django-cron。我需要每天运行 2 次任务：

*   上午 11:59
*   晚上 11:59

我可以做吗？我发现只有 RUN_EVERY（以分钟或秒为单位）变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:29:14.553

我熟悉这个 django-cron： [https ://github.com/andybak/django-cron](https://github.com/andybak/django-cron)

您可以将驱动 django-cron 的实际 cronjob 设置为仅在这些时间运行（如果您希望它运行其他作业但适用于您描述的用例，这会降低它的有用性）。在这种情况下，您的 crontab 条目应类似于：

```
59 11,23 * * * /path/to/python /path/to/manage.py cronjobs 
```

使用该 crontab 条目，django cron 每天只会在上午 11:59 和晚上 11:59 运行两次，因此即使您指定每分钟运行一次作业，它也只会在这些时间运行。如果 cron-job 因任何原因失败，则在接下来的 12 小时内不会运行。

或者，您可以将作业设置为每 12 小时运行一次

```
HOUR * 12 
```

在它运行一次后，手动编辑数据库说最后一次运行是在晚上 11:59 或上午（以将来为准），然后它将在该时间之后每 12 小时开始运行一次，所以它应该总是在正好 11 点 59 分。在这种情况下，如果作业失败，它可能会在 12:00 或更晚开始运行，因为它试图赶上。

如果您使用的 django-cron 与我一开始提到的不同，那么其中一些想法可能适用，但可能不适用。如果您使用的是开头提到的版本，请确保您使用了它的最新版本，我在 5 天前对其进行了提交，这使得工作不会随着时间的推移而漂移（即在 61 分钟而不是 60 分钟后运行）等...），他们在某些情况下。

# python - 如何在 ubuntu 上安装 apache-libcloud

> ID：10101577
> 
> 赞同：1
> 
> 时间：2012-04-11T07:21:27.217
> 
> 标签：python, ubuntu, libcloud

我在使用 python 2.7.2 在 ubuntu 上安装 libcloud 时遇到问题

我从 apache libcloud 网站[http://libcloud.apache.org/downloads.html](http://libcloud.apache.org/downloads.html)安装了 libcloud 。apache-libcloud-0.9.1.zip 文件。

当我按照示例进行操作时，我可以导入 libcloud，但是在尝试从示例中导入库时，出现以下错误：

```
import sys
import os
import libcloud
from libcloud.compute.types import Provider
from libcloud.compute.providers import get_driver

Traceback (most recent call last):
  File "/home/ubuntu/workspace/rtbopsConfig/test_code/libcloud.py", line 3, in <module>
    import libcloud
  File "/home/ubuntu/workspace/rtbopsConfig/test_code/libcloud.py", line 4, in <module>
    from libcloud.compute.types import Provider
ImportError: No module named compute.types 
```

我确实安装了以前的版本，但是当我发现该软件包已过期时，我从源代码安装了它。我确实使用了包安装程序卸妆。

那么......如何解决这个问题？软件包位于 /usr/local/lib/python2.7/dist-packages/libcloud/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:56:13.163

使用 pip 安装 libcloud

```
pip install apache-libcloud 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T02:42:34.900

您将遇到此问题的 python 文件称为什么？如果你称它为 libcloud.py，它可能会导致这个确切的问题。

要修复，只需将您的文件命名为其他名称并尝试再次运行它。还要确保删除和 libcloud.pyc 文件在同一目录中。

发生的事情是 python 认为您的 libcloud.py 文件是您尝试导入的 libcloud，这显然不起作用，因为您没有定义计算等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:55:43.507

由于该文件`libcloud/compute/types.py`存在于您提到的存档中，因此安装版本似乎存在问题。（进口实际上对我有用。）

您可以尝试删除并重新安装它（确保首先删除使用 apt-get/aptitude 安装的所有相关软件包）。

```
$ sudo pip uninstall libcloud
$ cd /path/to/downloaded/archive
$ sudo python setup.py install 
```

如果要调试问题，通常可以使用获取库版本

```
>>> import libcloud
>>> print libcloud.__version__
0.9.1 
```

# java - 如何在java中为现有接口提供外观类

> ID：10101580
> 
> 赞同：0
> 
> 时间：2012-04-11T07:22:01.523
> 
> 标签：java, amazon-s3

我想为现有的[AmazonS3Client](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html)（比如 MyAmazonS3Client）提供一个外观类，以便我可以灵活地在现有客户端之外添加我的其他辅助方法。因此，MyAmazonS3Client 接口的最终用户应该能够实例化 MyAmazonS3Client 类，并且可以调用现有方法以及我们编写的辅助方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:43:49.510

如何扩展`AmazonS3Client`添加尽可能多的辅助方法？

# php - PHP回显输出有限的长字符串？

> ID：10101581
> 
> 赞同：0
> 
> 时间：2012-04-11T07:22:07.893
> 
> 标签：php, echo, partial, flush

我有一个包含诸如这些**名称****的数组变量**；

 **```
// Listing ENTITIES
$entitiesTable = array(
    1 => "user",
    2 => "group",
    3 => "customer",
    4 => "supplier",
    5 => "terminal",
    6 => "order",
    7 => "invoice",
    8 => "invoice detail",
    9 => "invoice offer",
    10 => "invoice offer detail",
    11 => "quotation",
    12 => "quotation detail",
    13 => "quotation offer",
    14 => "quotation offer detail",
    15 => "purchase order",
    16 => "purchase order detail",
    17 => "purchase order request",
    18 => "purchase order request detail",
    19 => "sales order",
    20 => "sales order detail",
    21 => "delivery order",
    22 => "delivery order detail",
    23 => "sales return",
    24 => "sales return detail",
    25 => "purchase return",
    26 => "purchase return detail",
    27 => "item",
    28 => "category",
    29 => "unit measurement",
    30 => "last activity",
    31 => "rack",
    32 => "alert",
    33 => "filter",
    34 => "prefix code",
    35 => "system",
    36 => "company profile"
); 
```

在我的 php 主体的中间，我创建了 For 循环。**迭代**数组，然后**回**显它们。

```
foreach ($entitiesTable as $singleEntity){
if(preg_match($regexUsed, $singleEntity)){
    $pluralEntity = preg_replace($regexUsed, 'ies', $singleEntity);
} else {
    $pluralEntity = $singleEntity . 's';    
}

// Replacing spaces with a dash character and capitalize the first word
$pluralEntityWOSpace = ucwords($pluralEntity);
$pluralEntityWOSpace = str_ireplace(" ","" , $pluralEntityWOSpace);

$pluralEntityWDash = str_ireplace(" ","-" , $pluralEntity);

$singleEntityWOSpace = ucwords($singleEntity);
$singleEntityWOSpace = str_ireplace(" ","" , $singleEntityWOSpace);

echo $singleEntityWOSpace . '<br/>';
} 
```

不知何故，我现在才意识到，**我得到的不是一个完整的名称**，因为它是前面从数组中列出的。相反，**我现在得到的只是这些名字的一小部分**。看！这是**我获得的输出名称**：

```
User
Group
Customer
Supplier
Terminal
Order
Invoice
InvoiceDetail
InvoiceOffer
InvoiceOfferDetail
Quotation
QuotationDetail
QuotationOffer
QuotationOfferDetail
PurchaseOrder
PurchaseOrderDetail
PurchaseOrderRequest
PurchaseOrderRequestDetail
SalesOrder
SalesOrderDetail
DeliveryOrder
DeliveryOrderDetail
SalesReturn
SalesReturnDetail
PurchaseReturn
PurchaseReturnDetail
Item
Category
UnitMeasurement
LastActivit 
```

我试图在我的**php 脚本**末尾写**FLUSH()**，并且这些名称的输出是好的。但它给了我**另一个错误**，因为我使用的是**Slim Framework**。**除了使用FLUSH()**之外，还有其他替代方法吗？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:31:59.900

我想你正在寻找有点叫做[CamelCase](http://en.wikipedia.org/wiki/CamelCase)，这是一个camelcase函数的字符串：

```
function to_camel_case($str, $capitalise_first_char = false) {
  if($capitalise_first_char) {
    $str[0] = strtoupper($str[0]);
  }
  $func = create_function('$c', 'return strtoupper($c[1]);');
  return preg_replace_callback('/_([a-z])/', $func, $str);
} 
```

取自： http: [//www.paulferrett.com/2009/php-camel-case-functions/](http://www.paulferrett.com/2009/php-camel-case-functions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:07:12.593

真正快速的答案是修改 php.ini 文件；

```
output_buffering = 4096
implicit_flush = Off 
```

然后重启APache服务器。我不知道为什么，但它有效。********

# javascript - 用图像删除表格中的空格

> ID：10101582
> 
> 赞同：3
> 
> 时间：2012-04-11T07:22:10.653
> 
> 标签：javascript, jquery, html

我有这样的html。

```
<td id="foo">
    <img src="foo.png" /> <img src="foo.png" /> <img src="foo.png" />&nbsp; 
</td> 
```

上面的 HTML 包含空格，而且`&nbsp;`我
想使用 jQuery 删除它。
怎么做？

已经尝试使用此脚本但无法正常工作。

```
$('#foo').text().replace(/ /g,''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:33:12.147

我认为您需要使用 contents() 然后过滤掉所有纯空格的 textNodes

```
var nodes = $("#foo").contents().filter(function() {
    return this.nodeType == 3 && /^(\s|&nbsp;)*$/.test(this.nodeValue);
}).remove();

//console.log($("#foo").html()); 
```

可能是这样的？如果你只有图像，那么你可以删除`&& this.data == " "`部分

我已经编辑它寻找空格，现在，jsfiddle 测试：http: [//jsfiddle.net/Rurn2/](http://jsfiddle.net/Rurn2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:24:14.160

你试过这个：`$('#foo').html($('#foo').html().replace(/ /g,''));`？您的代码将根据元素中的文本返回一个不含空格的字符串。但是如果你想覆盖元素的文本，你必须在大括号之间输入新的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:46:52.900

试试这个：

```
var html = '>' + $('#foo').html() + '<';
html = html.replace(/&nbsp;/g, '').replace(/>\s+</gm, '><');
$('#foo').html(html.substring(1, html.length-1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:48:12.727

最安全的方法是找到所有文本节点并将它们的 nodeValue 与您正在寻找的内容进行比较，然后删除仅包含空格的节点。直接对innerHTML 进行操作充满了困难，因为您必须确保您没有弄乱实际标签中的内容（例如，应该存在的空白）。对文本节点进行操作仅使用浏览器来保证您的安全。您可以像这样找到与您的条件匹配的所有文本节点：

```
$("#foo").contents().filter(function() {
    if (this.nodeType == 3) {
        return(this.nodeValue.replace(/\s|&nbsp;/g, "") == "");
    }
    return(false);
}).remove();​ 
```

你可以在这里看到它的工作：http: [//jsfiddle.net/jfriend00/RNTbT/](http://jsfiddle.net/jfriend00/RNTbT/)

仅供参考，这个版本甚至可以处理由空格和`&nbsp;`. 它的工作原理是删除所有空格，`&nbsp;`然后查看是否有任何剩余。如果不是，那么它是一个仅限空格的文本节点，因此应该将其删除。

# c++ - 如何查找字符串是否与在数组中找到的字符串匹配？

> ID：10101583
> 
> 赞同：2
> 
> 时间：2012-04-11T07:22:18.653
> 
> 标签：c++, arrays, string

将已知字符串与字符串数组进行比较以查看给定字符串是否与数组中的任何字符串匹配，最有效的方法是什么？

例如：你有

```
string String1 = "ID5";
string String2 = "ID7"; 
```

您想查看它们中的任何一个是否包含在以下内容中

```
string List[5] = {"ID1", "ID7", "ID10", "ID34", "ID62"} 
```

这样你就可以做到这一点

```
 if(#STRINGMATCHES) {
    // Do one thing
 }
 else {
    // Do another
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:32:01.740

如果您需要多次执行此搜索操作，这就是我的建议 - 使用一些哈希函数对所有字符串进行哈希处理，然后创建一个包含排序哈希的新数组。然后，当您需要检查数组中是否包含字符串时，请在已排序数组中对其哈希进行 binary_search。这将比 als 建议的仅执行 std::find 更有效，但取决于您需要执行足够多次搜索操作以使速度增益弥补排序开销的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:24:04.113

通过使用**[std::find](http://www.cplusplus.com/reference/algorithm/find/)**

```
std::find(List, List+5, String1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T07:28:33.640

如果数组已排序，您可以使用[`std::binary_search()`](http://en.cppreference.com/w/cpp/algorithm/binary_search)：

```
std::string List[] = { "ID1", "ID10", "ID7", "ID34", "ID62" };
if (std::binary_search(std::begin(List), std::end(List), "ID7"))
{
    std::cout << "found string\n";
} 
```

如果不是，则使用[`std::find()`](http://en.cppreference.com/w/cpp/algorithm/find)（如 Als 所述）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T07:40:55.157

最简单的解决方案是将您要查找的字符串放入一个数组并使用`std::find_first_of`：

```
std::string targetList[] = { "ID5", "ID7" };
std::string searchList[] = { "ID1", "ID2", "ID3", "ID4", "ID5" };

if ( std::find_first_of( begin( searchList ), end( searchList ),
                         begin( targetList ), end( targetList ) )
        != end( targetList ) ) {
    //  found...
} else {
    //  not found...
} 
```

这不一定是最有效的解决方案，因为 `find_first_of`不对数据做任何假设。例如，如果搜索列表很大并且没有变化，并且目标列表只包含几个元素，那么对搜索列表进行排序可能会更有效，并对目标列表中的每个元素进行二分搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T07:46:26.060

我有个主意。

首先，我们应该使 List 排序。就像 hmjd 描述的那样。

在比较两个字符串时，我们可以记录一些信息。

例如，

表二维数组差异记录两个字符串不同的索引。

```
string[2] = {"abc","abd"}
list[5] = {"aab","abb","abc","bcd","ef"} 
```

```
dif[0][0] = 1 ("abc" and "aab" differ at index 1) 
dif[0][1] = 2 ("abc" and "abb" differ at index 2) 
dif[0][2] = -1 ("abc" and "abc" are same, so we use -1 to represent two strings are same) 
dif[0][3] = 0 ("abc" and "bcd" differ at index 0) 
dif[0][4] = 0 ("abc" and "eg" differ at index 0) 
```

当我们需要将一个新字符串与列表中的字符串进行比较时。我们首先在已比较的字符串中找到最相似的字符串。例如，“abd”是需要判断的字符串。我们找到“abc”。"abd" 和 "abc" 在索引 2 处不同。因此，当我们比较 "adb" 和 list 中的字符串时，我们不需要比较在索引 2 之前的索引中不同 "abc" 的字符串。例如，我们不需要比较“abd”和“ef”，因为“abd”在索引 2 处与“abc”不同，而“abc”在索引 0 处与“ef”不同。

我的想法很粗略，有很多细节需要考虑。我认为它很有用，尤其是在大规模问题中。

# java - java文件从文档中间逆序读取

> ID：10101585
> 
> 赞同：-1
> 
> 时间：2012-04-11T07:22:19.483
> 
> 标签：java, file-io

我想在文件中查找关键字。找到关键字后，我想在这个关键字之前得到 50 个单词，在这个关键字之后得到 50 个单词。

我想知道是否有办法以相反的顺序读取文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:28:40.120

您仍然需要逐行逐字读取文件以找到您要查找的单词...您可以做的是拥有一个包含 50 个单词的缓冲区，例如字符串数组，然后加载您的文本，如果不是您要查找的单词，请将其放入缓冲区中，新单词会覆盖最旧的单词。如果你找到了你需要的东西，从你的缓冲区中取出所有的单词并阅读接下来的 50 个单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:00:55.797

请使用以下代码。

```
List<String> previousWords = new ArrayList<String>();
List<String> nextWords = new ArrayList<String>();
boolean foundKeyWord = false;

Scanner sc2 = null;
try {
    sc2 = new Scanner(new File("translate.txt"));
} catch (FileNotFoundException e) {
    e.printStackTrace();  
}
while (sc2.hasNextLine()) {
        Scanner s2 = new Scanner(sc2.nextLine());
    boolean b;
    while (b = s2.hasNext()) {
        String s = s2.next();
        if(!foundKeyWord) {
           if(s.equals(findKeyWord)) {
             foundKeyWord = true;
           }
        }
       //Keyword not found then add to the previouswords list
        if(!foundKeyWord) {
           previousWords.add(s);
        } else {
          //already key found now we need to add next 50 words
           if(nextWords.size <= 50) {
               nextWords.add(s);
           } else {
             //if 50 key words are added then break from the loop, if in case if there are less than 50 words in file after keyword then scanner will end.
             break;
           }

        }

    }
}

//Now we need to fix the previous 50 key words in case if keyword is found after 50th word.

  if(previousWords.size > 50){
     previousWords.subList(previousWords.size() - 50, previousWords.size());
  } 
```

# c# - 获取最大行数（Linq，NHibernate）

> ID：10101590
> 
> 赞同：2
> 
> 时间：2012-04-11T07:23:08.250
> 
> 标签：c#, sql, linq, nhibernate, linq-to-nhibernate

遇到一个问题，我希望上次导入数据以显示失败。我最终求助于 HQL，因为我必须执行两个查询，任何人都可以看到为什么这在 Linq to NHibernate 中不起作用（正确），这是 3.1 中的一个已知错误吗？

我要写的sql。

```
select JobImport.* from 
JobImportResult
inner join (
    select Max(JobImportResultId) as JobImportResultId 
    from JobImportResult
    group by JobImportId
)as tbl on tbl.JobImportResultId = JobImportResult.JobImportResultId
inner join JobImport on JobImport.JobImportId = JobImportResult.JobImportId
where ImportFailureReasonId is not null 
```

我最终写的 HQL。

```
select jir.JobImport from JobImportResult jir where jir.Id in 
(select max(mjir.Id) from JobImportResult mjir group by mjir.JobImport)
and jir.ImportFailureReason is not null 
```

有效的 Linq（但我认为在 2000 行之后会中断）

```
var innerQuery = Query<JobImportResult>()
    .GroupBy(jir=>jir.JobImport)
    .Select(jir=>jir.Max(jr=>jr.Id));

var innerQueryListed = innerQuery.ToList();

var resultQuery = Query<JobImportResult>()
    .Where(jir => innerQueryListed.Contains(jir.Id) && jir.ImportFailureReason != null)
    .Select(jir => jir.JobImport); 
```

不起作用的 Linq :(

```
var innerQuery = Query<JobImportResult>()
.GroupBy(jir=>jir.JobImport)
.Select(jir=>jir.Max(jr=>jr.Id));

var resultQuery = Query<JobImportResult>()
.Where(jir => innerQuery.Contains(jir.Id) && jir.ImportFailureReason != null)
.Select(jir => jir.JobImport); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:48:52.527

您使用的是 .NET 4 吗？如果是这样，试试这个：

```
var innerQuery = Query<JobImportResult>()
    .GroupBy(jir=>jir.JobImport)
    .Select(jir=>jir.Max(jr=>jr.Id))
    .ToList();

var resultQuery = Query<JobImportResult>()
    .Where(jir => innerQuery.Any(j => j == jir.Id)
        && jir.ImportFailureReason != null)
    .Select(jir => jir.JobImport)
    .ToList(); //only use this if you want to resolve the query 
```

或 .NET 3.5 将`resultQuery`部分更改为：

```
var resultQuery = Query<JobImportResult>()
    .Where(jir => innerQuery.Count(j => j == jir.Id) > 0
        && jir.ImportFailureReason != null)
    .Select(jir => jir.JobImport)
    .ToList(); //only use this if you want to resolve the query 
```

# emacs - Emacs：在窗口边缘换行——打开桌面保存模式时会删除小波浪箭头

> ID：10101594
> 
> 赞同：0
> 
> 时间：2012-04-11T07:23:51.760
> 
> 标签：emacs

我想为除文本模式缓冲区之外的所有缓冲区启用“在窗口边缘换行”（对于后者，我已通过打开自动填充`(add-hook 'text-mode-hook 'turn-on-auto-fill)`）。我无法做到这一点，最后逐步减少了我的 .emacs 文件的内容，以查看问题出在哪里。在我的设置下（见下文），我可以从一个空的 .emacs 开始，默认情况下获得（应该如此）如果一行被包裹，则在 Window Edge 处用小波浪线箭头包裹。一切都很好。现在我将单行添加`(desktop-save-mode 1)`到 .emacs。突然，默认切换到“自动换行（视觉线模式）”。如果我然后（手动）将其设置为“在窗口边缘换行”（通过选项-> 此缓冲区中的换行），我会获得正确的换行，但缺少小波浪线箭头。

怎么了？

我真的很想使用`desktop-save-mode`，但我不知道它对其他事物有如此广泛的影响。

这是我的设置：我使用 GNU Emacs 24.0.95.1 (x86_64-apple-darwin, NS apple-appkit-1038.36) [从 http:// 安装为 Emacs-pretest-24.0.91-universal-10.6.7.dmg emacsformacosx.com/builds] 在 Mac OS X 10.7.3 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:46:45.793

桌面库不仅从会话中恢复缓冲区，而且还设置了在该会话中处于活动状态的相同模式，以及一些变量。

因此，在您的 init 文件中所做的更改可能看起来没有生效，因为桌面文件中的更改前​​版本正在破坏它们。

详情见桌面库中的注释，以及手册：

*   `M-x` `find-library` `RET` `desktop` `RET`
*   `M-:` `(info "(emacs) Saving Emacs Sessions")` `RET`
*   `M-:` `(info "(elisp) Desktop Save Mode")` `RET`

对于单个文件缓冲区，简单地恢复/重新加载文件通常会解决问题。对于全局设置，更新设置并重新保存桌面文件通常就足够了。

从理论上讲，您应该能够使用以下方法将石板擦干净：
`M-x` `desktop-clear` `RET`

如果做不到这一点，请关闭 Emacs 并在重新启动之前删除`.emacs.desktop`和`.emacs.desktop.lock`文件。

# ruby-on-rails - 在 RoR 的第二天，运行服务器出现问题

> ID：10101597
> 
> 赞同：4
> 
> 时间：2012-04-11T07:24:20.810
> 
> 标签：ruby-on-rails, ruby, gemfile

我在 Lion 10.7.3 上运行，带有 Ruby 版本 1.9.3-p125 和最新版本的 Xcode。

当我尝试启动服务器时，出现以下错误：

> 在这台机器上可用的 gem 中找不到 gem 'rails (= 3.1.0) ruby​​'。运行`bundle install`以安装缺少的 gem。

所以我尝试运行 bundle install 并收到以下错误：

```
Bundler could not find compatible versions for gem "actionpack":   In
snapshot (Gemfile.lock):
    actionpack (3.1.0.rc4)   In Gemfile:
    meta_search (= 1.1.0) ruby depends on
      actionpack (~> 3.1.0) ruby

Running `bundle update` will rebuild your snapshot from scratch, using
only the gems in your Gemfile, which may resolve the conflict. 
```

然后我尝试运行捆绑更新，但收到以下错误：

> 安装 mysql2 (0.3.11) 时出错，Bundler 无法继续。`gem install mysql2 -v '0.3.11'`在捆绑之前确保成功。

我现在已经完全被困了几个小时......有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:28:03.203

问题解决：brew install mysql. 更新和重新安装的包和服务器现在可以工作了。

# python - 如何知道Django中数据库的当前名称？

> ID：10101602
> 
> 赞同：50
> 
> 时间：2012-04-11T07:24:50.663
> 
> 标签：python, django, unit-testing

我正在我的 django 项目中编写测试。目前，我有两个数据库连接：

```
(settings.py)
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'db_name'
        ...
    },
} 
```

以及与 MongoDB 的自定义连接：

```
import sys
from pymongo import Connection
from pymongo.errors import ConnectionFailure
try:
    connection = Connection(host="localhost", port=27017)
    db = connection['db_name']
    print "Connected successfully(Mongo, db_name)"
except ConnectionFailure, e:
    sys.stderr.write("Could not connect to MongoDB: %s" % e)
    sys.exit(1) 
```

我想知道我的项目何时运行

```
python manage.py test myapp 
```

因为当您运行测试时，django 会自动创建单独的数据库（名称类似于**test_db_name**），但在这种情况下，Mongo 仍将使用**db_name**运行。我试过：

```
import sys
from pymongo import Connection
from pymongo.errors import ConnectionFailure
from django.db import connections

try:
    connection = Connection(host="localhost", port=27017)
    db_name = connections['default'].settings_dict['NAME']
    db = connection[db_name]
    print "Connected successfully(Mongo, %s)" % (db_name,)
except ConnectionFailure, e:
    sys.stderr.write("Could not connect to MongoDB: %s" % e)
    sys.exit(1) 
```

但它不起作用

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2015-11-30T10:56:11.757

要使用最近的 Django 版本（尝试使用 1.8）获取数据库名称：

```
from django.db import connection
db_name = connection.settings_dict['NAME']
# Or alternatively
# db_name = connection.get_connection_params()['db'] 
```

请注意在初始化后读取此值，以便在运行单元测试时具有正确的值。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-20T19:54:57.343

你可以检查它`db.settings`：

```
from django import db
db.settings.DATABASES['default']['NAME'] 
```

要查看用于获取特定对象的数据库，您可以执行以下操作：

```
object._state.db 
```

这将为您提供配置中的数据库键，例如“默认”，因此如果您在配置中有多个数据库，您可以检查正确的一个。

当您运行测试时，`db.settings`应更新以包含特定于测试的数据库名称。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-12-03T07:52:39.917

在 django 1.9 中测试

进入贝壳。

```
./manage.py shell 
```

检查您的数据库。

```
from django import db
db.connections.databases 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-07-02T14:17:15.410

答案似乎已经过时了。

在 django 1.6 中，您可以执行以下操作：

```
from django import db
print db.connections.databases 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-09-23T17:31:22.233

IMO，最好的方法是使用以下未记录的 django 函数：

```
>>> from django.db import connection
>>> connection.vendor
'postgresql' or 'sqlite' 
```

感谢：[https ://stackoverflow.com/a/18849255/1237092](https://stackoverflow.com/a/18849255/1237092)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-11T08:17:40.550

尝试将以下内容放入您的设置文件中：

```
import sys

management_command = sys.argv[1] if len(sys.argv) > 1 else ""

TESTING = management_command.startswith("test") 
```

如果 TESTING 为 true，则您正在使用 python manage.py test myapp 运行。

编辑：你可能可以把它放在任何地方，不一定是你的设置文件。试一试，看看它是如何工作的！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-04T20:20:03.623

对我来说非常有用（在我的情况下字典是空的，因为我在使用`read_default_file`文件`settings.py`）只是执行以下 SQL 查询

```
SELECT DATABASE() 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-14T05:34:20.397

在 Django >= 1.10 版本中

**采用：**

```
from django.conf import settings
db_name = settings.DATABASES['default']['NAME'] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-20T13:13:34.807

在 Django >= 1.11

**采用：**

```
from django import db
db_name = db.utils.settings.DATABASES['default']['NAME'] 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-06T11:54:03.587

在 mysql 的情况下，通过 django 进行原始查询也可以是一个解决方案。

```
from django.db import connection
cursor = connection.cursor()
cursor.execute('select database()')
row = cursor.fetchone()

print row[0] 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-20T13:38:22.437

要获取数据库 conf 和 NAME，您可以在任何应用程序中使用任何模型

```
from someapp.models import ExampleModels

current_DB = ExampleModels.objects.db
print (current_DB) 
```

# javascript - 当我将dom不在IE中的视图中聚焦时，body scrollTop发生了变化

> ID：10101605
> 
> 赞同：1
> 
> 时间：2012-04-11T07:25:01.010
> 
> 标签：javascript, css, internet-explorer, dom, cross-browser

当我像这样聚焦 DOM 时，如何防止`scrollTop`IE 发生变化？

```
<html>
    <head>
        <title>demo</title>
        <script type="text/javascript">
            function test() {
                document.getElementById('div1').focus();
                //document.body.scrollLeft = 0;
                //document.body.scrollTop = 0;
            }
        </script>
    </head>
    <body onload="test()" scroll='no' style='overflow:hidden'>

        <div id="div0" style="width:1400px;height:700px;background:#333333;position:absolute;"> </div>

        <div id="div1" style="top:1500px;width:1500px;height:300px;background:#DDDDDD;position:absolute; "> </div>

    </body>
</html> 
```

我不想重置`scrollTop=0`，因为它会使身体颤抖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T18:31:39.203

这是你想要的效果吗？

```
<!DOCTYPE html>
<html>
<head>
    <title>demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #div0, #div1 {
            position: absolute;
            height: 100px;
            width: 100%;
        }

        #div0 {
            background: #333;
        }

        #div1 {
            background: #ddd;
        }
    </style>
</head>
<body>
    <div id="div0" style="height:700px;"> </div>

    <div id="div1" style="top:1500px;height:300px;"> </div>

    <script type="text/javascript">
        (function() {
            document.getElementById('div1').focus();
        })();
    </script>
</body>
</html> 
```

# mysql - 使用mysql在id周围选择前后行

> ID：10101606
> 
> 赞同：9
> 
> 时间：2012-04-11T07:25:02.290
> 
> 标签：mysql, sql

我需要使用 mySQL 获取 ID 周围的 ID。

例子：

表中的ID：

```
2, 4, 5, 9, 11, 15, 19, 22, 25 
```

例如，我需要知道 ID 9 周围的 5 个 ID。查询应返回：

```
4, 5, 9, 11, 15 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T07:29:01.587

一个可能的解决方案是

*   计算每个 id 减去你的 ID 的绝对值。
*   对结果进行排序并将结果集限制为 5 条记录。

**SQL 语句**

```
SELECT ABS(ID - 9), *
FROM   MyTable
ORDER BY
       ABS(ID - 9)
LIMIT  5 
```

**编辑** *（感谢 ypercube 指出此解决方案中可能存在的缺陷）*

如果意图是从左侧获取 2 个 id，从右侧获取 2 个 id，则可以将语句调整如下

```
SELECT * FROM MyTable WHERE ID <= 9 ORDER BY ID DESC LIMIT 3 
UNION ALL
SELECT * FROM MyTable WHERE ID > 9  ORDER BY ID ASC  LIMIT 2 
```

# birt - 哪种Birt图表适合以下数据

> ID：10101607
> 
> 赞同：0
> 
> 时间：2012-04-11T07:25:20.183
> 
> 标签：birt

我是 Birt 工具的新手

我的问题是我无法匹配适合我的数据的图表

请任何人建议我哪个图表适合我的数据

我的数据是

1) 月 | 提交 | 拒绝--------------> 每月报告

2) 日期 | 提交 | 拒绝--------------> 每日报告

3) 年 | 提交 | 拒绝------------> 每小时报告

高级感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:32:24.847

I like tube charts for this, but line charts can work also.

# php - 关联数组 Push Shift 项

> ID：10101608
> 
> 赞同：1
> 
> 时间：2012-04-11T07:25:20.737
> 
> 标签：php, arrays, algorithm

我在 PHP 中有一个关联数组。

```
$myarray = array(
                  "a"=>"News",
                  "b"=>"Articles",
                  "c"=>"images"
                ); 
```

我想在“a”键之后插入一些值。这样数组的结构就变成了

```
$myarray = array(
           "a"=>"News",
           "j"=>"Latest News",  
           "k"=>"Sports News",
           "l"=>"Entertainment",  
           "b"=>"Articles",
           "c"=>"images"
           ); 
```

我怎样才能得到这个功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:39:03.857

这个功能是[`array_splice`](http://php.net/manual/en/function.array-splice.php)，但你将不得不手动做一些工作，因为它不保留密钥。让我们这样做：

```
function search_and_insert($input, $afterKey, $newItems) {
    $keys = array_keys($input);
    $insertPosition = array_search($afterKey, $keys);
    if ($insertPosition === false) {
        return false;
    }
    ++$insertPosition;

    $newKeys = array_keys($newItems);
    array_splice($keys, $insertPosition, 0, $newKeys);
    array_splice($input, $insertPosition, 0, $newItems);
    return array_combine($keys, $input);
} 
```

这里的想法是你分别处理键和值，为每个数组拼接一次，然后使用[`array_combine`](http://php.net/manual/en/function.array-combine.php)得到最终结果。另一个好主意是使用相同的技术编写一个可重用的`array_splice_assoc`函数并使用它，而不是让一个只做这个特定的工作。

用法：

```
$myarray = array("a"=>"News", "b"=>"Articles", "c"=>"images");
$newItems = array("j"=>"Latest News", "k"=>"Sports News", "l"=>"Entertainment");
$insertAfter = "a";

print_r(search_and_insert($myarray, "a", $newItems)); 
```

**[看到它在行动](http://codepad.viper-7.com/U7yQbB)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:50:26.010

使用它在数组中的特定键之后插入新的键/值：

```
 function array_insert_after($key, array &$array, $new_key, $new_value) {
      if (array_key_exists($key, $array)) {
        $new = array();
        foreach ($array as $k => $value) {
          $new[$k] = $value;
          if ($k === $key) {
            $new[$new_key] = $new_value;
          }
        }
        return $new;
      }
      return FALSE;
    } 
```

用法 ：

```
$array = array("a"=>"News", "b"=>"Articles", "c"=>"images");

array_insert_after("a", $array, "j", "Latest News"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T07:38:56.540

使用 array_splice 时不保留数组键

```
<?php
$myarray = array(
                  "a"=>"News",
                  "b"=>"Articles",
                  "c"=>"images"
                );

$newarray = array(
                "j"=>"Latest News",
                "k"=>"Sports News",
                "l"=>"Entertainment");

var_dump($myarray);

array_splice($myarray, 1, 0, $newarray);

var_dump($myarray);
?> 
```

**输出**

```
array(3) {
  ["a"]=>
  string(4) "News"
  ["b"]=>
  string(8) "Articles"
  ["c"]=>
  string(6) "images"
}

array(6) {
  ["a"]=>
  string(4) "News"
  [0]=>
  string(11) "Latest News"
  [1]=>
  string(11) "Sports News"
  [2]=>
  string(13) "Entertainment"
  ["b"]=>
  string(8) "Articles"
  ["c"]=>
  string(6) "images"
} 
```

# xamarin.android - 安装 Mono Droid 框架平台时出错

> ID：10101618
> 
> 赞同：1
> 
> 时间：2012-04-11T07:27:02.860
> 
> 标签：xamarin.android

我正在尝试测试来自 Google 的新硬件加速图像 - Android Intel Atom x86，但没有成功。模拟器启动（大约 30 秒。这与前 5 分钟相比很棒）但我得到：

```
Detecting shared runtime location

Detecting package list location

Getting package list from device

Installing shared runtime package on device
484 KB/s (25872618 bytes in 52.172s)
    pkg: /data/local/tmp/Mono.Android.DebugRuntime-debug.apk
Success

Installing the platform framework
355 KB/s (16537132 bytes in 45.442s)
    pkg: /data/local/tmp/Mono.Android.Platform.apk
Failure [INSTALL_FAILED_OLDER_SDK]

Failed to install the platform framework 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:18:55.657

唯一的 x86 模拟器是 API 级别 10 (2.3.3)。看起来您的应用程序的目标 API 级别比这更高。您的应用程序需要以 10 或更低为目标。

# ruby-on-rails - 订单接受_nested_attributes_for 行

> ID：10101619
> 
> 赞同：0
> 
> 时间：2012-04-11T07:27:03.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在时间表和时间表之间有一个accepts_nested_attributes_for 关联。这很好用，但是当我想输出时间表时，这些行会根据时间表记录的 ID 进行排序。相反，我想订购“daynr”字段上的行。我怎样才能做到这一点？代码是这样的：

```
<% for timesheetline in timesheet.tms_timesheetlines %>
  <%= timesheetline.daynr %>
  <%= timesheetline.description %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:40:12.937

尝试：

```
<% for timesheetline in timesheet.tms_timesheetlines.order(:daynr) %> 
```

# oracle - 如何在 Oracle 中将文本的方向从右向左更改？

> ID：10101620
> 
> 赞同：2
> 
> 时间：2012-04-11T07:27:07.980
> 
> 标签：oracle, right-to-left

我正在尝试在 oracle 11g 中存储文本（我正在使用带有英文字符的阿拉伯语），并且我希望它们从右到左格式化。

我试图将 RLM 字符放在开头（格式化控制字符），但它显示为问号“？” 并且不会改变任何东西。

```
NLS_Characterset: AR8MSWIN1256

NLS_NCHAR_Characterset: AL16UTF16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:42:59.493

我认为最简单的解决方案是在特定字段上使用 REVERSE() 函数。AFAIK 没有数据库/会话范围的设置。

尝试：

```
SELECT REVERSE('Stackoverflow') FROM DUAL; 
```

# jqgrid - 如何将新记录附加到 jqGrid 中的现有记录？

> ID：10101624
> 
> 赞同：0
> 
> 时间：2012-04-11T07:27:33.723
> 
> 标签：jqgrid

我正在从 Grid1 中选择的记录中填充 Grid2。但是，每当我再次选择并添加时，添加的记录都会被来自 Grid1 的新记录集所取代。下面是我的代码。这仅适用于 UI。我想如下附加新记录。请使用正确的代码进行指导

```
 function StuffData(data) {
    var g = jQuery('#Grid2');
   var usersList = data;
   var totalRecords= jQuery('#Grid2').jqGrid('getGridParam','records');
   alert('Grid records' +totalRecords);
    if (usersList!=null) {
        g.jqGrid('clearGridData',false);            
       for(var i=0;i<=usersList.length;i++){
           // g.jqGrid('addRowData',i+1,usersList[i]);  
            g.jqGrid('addRowData',totalRecords+1,usersList[i]);
            totalRecords += 1;       
          // g.jqGrid('addRowData',0,usersList);        
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:25:32.640

调用`clearGridData`是从网格中删除旧行。从[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)：

> **清除网格数据**
> 
> 从网格中清除当前加载的数据。如果 clearfooter 参数设置为 true，则该方法会清除放置在页脚行上的数据。

如果你只想追加数据，你应该可以删除这行代码。还是我错过了什么？

# c# - 从 TFSPreview 下载代码

> ID：10101625
> 
> 赞同：0
> 
> 时间：2012-04-11T07:27:34.537
> 
> 标签：c#, tfs

我们使用 TFS 预览版进行版本控制。但问题是，我们没有该服务器的任何备份。

我们要做的是以下。在服务器上，我们将安排一些应用程序。将所有 TeamProjects 下载到一个文件夹（每天另一个文件夹）20121104 / 20121204 / 201213/04 / ... 所以我们总是有昨晚的代码。

我发现了一些东西，比如 workspace.Get() ，......

什么是最好的解决方案。

PS：编写语言是C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:10:50.780

你可以有多种解决方案，

[您可以使用Team Foundation Server 集成工具](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)安装本地 TFS 并将其与 TFS 服务同步，并针对您的本地备份运行计划备份，这也将对您有所帮助，因此如果 Internet 连接因任何原因不可用，您将继续工作

另一种创建计划任务的解决方案，该任务具有运行以获取最新的批处理文件或电源 shell 脚本

您还可以创建一个构建定义以触发计划并自定义构建以获取源并将其放入本地计算机

**更新**

![在此处输入图像描述](../Images/4d43a78217e5cf26bfa6f747fac5b0a9.png)

# iphone - 在 iphone Sdk 上允许自动锁定我的应用

> ID：10101627
> 
> 赞同：0
> 
> 时间：2012-04-11T07:27:38.137
> 
> 标签：iphone, ios, ios4

我想在我的应用程序处于活动状态时允许自动锁定..！

我正在尝试来自互联网的大量代码......！，所有代码都不起作用。

我尝试下面的代码：

```
[[UIApplication sharedApplication] setIdleTimerDisabled:NO]; 
```

但是，代码不起作用，此代码尝试视图控制器**viewdidload**事件..！，

但屏幕始终在我的应用程序中打开，我的应用程序处于活动状态不允许自动锁定。

我的 iphone 将自动锁定时间设置为 1 分钟...！

任何人都可以帮助我们..！

谢谢..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:25:32.477

确保您在没有调试器的情况下运行您的应用程序，并且没有使用 USB 电缆连接到计算机。当您使用调试器时，电话锁将永远不会被激活。

# vim - Vim：查看作用于当前单词/字符的突出显示规则？

> ID：10101631
> 
> 赞同：3
> 
> 时间：2012-04-11T07:27:45.467
> 
> 标签：vim, syntax-highlighting

是否可以在 vim 中查看为什么某个特定的单词会按原样突出显示？特别是，我有`set spell`，并且在某些情况下会出现一些奇怪的突出显示。显然，这不仅限于拼写检查。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:36:56.680

我的状态行中有这样的内容：

```
:echo synIDattr(synID(line("."), col("."), 1), "name") 
```

它显示 vim 如何解析光标下项目的语法，您可以使用它来找出突出显示的来源。

# javascript - HTML 5 动画符号

> ID：10101632
> 
> 赞同：0
> 
> 时间：2012-04-11T07:27:45.640
> 
> 标签：javascript, html

我需要制作动画符号来显示应该如何绘制符号。与此类似的东西：

[http://www.handwritingforkids.com/handwrite/cursive/animation/images/animation_a.gif](http://www.handwritingforkids.com/handwrite/cursive/animation/images/animation_a.gif)

我将如何在 HTML5 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:34:15.297

HTML5`<canvas>`元素就是你想要的。画布是一个可绘制的上下文，您可以在其中创建任意形状。

MDN 有一个 canvas API 入门教程：[https ://developer.mozilla.org/en/Canvas_tutorial](https://developer.mozilla.org/en/Canvas_tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:36:45.140

在纯 HTML（甚至 5 个）中，您不能这样做（注意：<canvas> 也需要 JavaScript）。也许，只是也许你可以在 HTML+CSS 中将它一起破解，但在 JavaScript 中更容易做到。

我建议[RaphaëlJS](http://raphaeljs.com/)矢量图形库

# asp.net - 关于下拉列表

> ID：10101633
> 
> 赞同：0
> 
> 时间：2012-04-11T07:27:46.173
> 
> 标签：asp.net, .net, drop-down-menu, postback, selectedindexchanged

我在 SQL 表中的 ASP.NET 绑定值中使用 DropDownList 控件。有些控件只有一个值，有些控件有多个值。SelectedIndexChanged 事件不会被触发，该控件只有一个值。

我将`AutoPostBack=true`第 0 项设置为选择。即使没有为该控件触发该事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:54:14.507

SelectedIndxChanged 事件仅在您更改选择并且 DDL 的 AUTOPOSTBACK 为 true 时触发。

如果您在 DDL 中只有一个值，那么您不需要此事件，您可以在绑定服务器端本身的下拉列表后编写您想要的代码。

如果您没有从服务器端绑定 DDL，您可以在 Page_Load 事件上或之后编写代码，您将获得选定的索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:59:15.000

SelectedIndexChanged 仅在选择更改时触发。如果下拉列表中只有一项，则永远无法触发它（无需更改）。

话虽如此，您可以在列表顶部（索引 0）添加一个空白项，在填充下拉列表的代码顶部添加以下内容：

```
MyDDList.Items.Add(""); 
```

这样，即使您的一件物品，您也可以选择一些东西。

# python - Python中的if语句

> ID：10101634
> 
> 赞同：0
> 
> 时间：2012-04-11T07:27:52.383
> 
> 标签：python, if-statement

我对python有一点怀疑。

```
x = ''
if x:
    print 'y' 
```

所以，它永远不会打印为'y'

如果我做 ：

```
x = 0
if x:
    print 'y' 
```

然后它也会做同样的事情。

那么如何区分我是否有 '' 值和 0 值如果我只需要考虑 0 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:38:35.700

那是因为对象起作用`__nonzero__()`并将`__len__()`用于评估条件。[从文档](http://docs.python.org/reference/datamodel.html)：

> `object.__nonzero__(self)`
> 
> 调用实现真值检测和内置运算`bool()`；应该返回`False`or `True`，或它们的整数等价物 0 或 1。如果未定义此方法，`__len__()`则调用该方法，如果已定义，则如果其结果为非零，则认为该对象为真。如果一个类既不定义`__len__()`也不定义`__nonzero__()`，它的所有实例都被认为是真的。

通过重载这些，您也可以用于为自定义类指定此类行为。

至于 if 条件，您可以准确指定要检查的内容：

```
if x: # evaluate boolean value implicitly
  pass
if x is 0: # compare object identity, see also id() function
  pass
if x == 0: # compare the object value
  pass 
```

至于隐式布尔评估的特殊情况：如果`int`对象非零，则考虑对象；如果对象的长度不为零，则考虑对象。`True``str``True`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T07:34:23.753

在 python 中，对于一个条件，一个空的可迭代（这里是字符串）被评估为 false。

如果您需要检查一个值是否`0`明确，您必须说`x==0`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:31:57.887

```
if x != '':
    print 'y' 
```

仅当 x 不是时才有效`''`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:41:51.113

我不清楚你真正想要什么 - 你的问题的措辞有点令人困惑 - 但这可能很有启发性：

```
>>> test_values = [0,0.00,False,'',None, 1, 1.00, True, 'Foo']
>>> for v in test_values:
    if (not v) and (v != ''):
        print "Got a logically false value, %s, which was not the empty string ''" % v.__repr__()

Got a logically false value, 0, which was not the empty string ''
Got a logically false value, 0.0, which was not the empty string ''
Got a logically false value, False, which was not the empty string ''
Got a logically false value, None, which was not the empty string '' 
```

# c# - Java 增强的 for 循环 VS .NET foreach 循环

> ID：10101635
> 
> 赞同：6
> 
> 时间：2012-04-11T07:27:52.660
> 
> 标签：c#, java, polymorphism, foreach

我有一个问题没有找到答案。假设我们在 java 或 c# 中有以下代码：

```
class Car {
   /* car stuff */
} 
```

然后在Java中

```
class Truck extends Car {
   /* truck stuff */
} 
```

和 C#

```
class Truck : Car {
   /* truck stuff again */
} 
```

在 C# 中，以下工作正常：

```
List<Car> carList = new List<Car>();
//add some objects to the collection
foreach(Truck t in carList)
     //do stuff with only the Truck objects in the carList collection 
```

这是因为 Truck 是 Car 的子类，简单来说，这意味着每辆 Truck 也是 Car。问题是，类型检查已完成，并且仅从 carList 中选择了卡车。

如果我们在 Java 中尝试同样的事情：

```
List<Car> carList = new ArrayList<Car>();
//add some objects to the collection
for(Truck t : carList)
     //**PROBLEM** 
```

由于增强循环内的代码，代码甚至无法编译。相反，我们必须这样做才能获得相同的效果：

```
for(Car t : carList)
   if(t instanceof Car)
      //cast t to Truck and do truck stuff with it 
```

这与在 C# 中工作没有任何问题的想法相同，但在 Java 中您需要额外的代码。甚至语法几乎相同！它在Java中不起作用有什么原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T07:31:48.323

> 问题是，类型检查已完成，并且仅从 carList 中选择了卡车。

不，不是。如果您的列表包含除`Truck`s 之外的任何内容，则 C# 中将发生运行时异常。基本上，在 C# 中，以下

```
foreach(Truck t in carList) {
    ...
} 
```

表现得像

```
foreach(object _t in carList) {
    Truck t = (Truck)_t;        // throws an InvalidCastException if _t is not a Truck
    ...
} 
```

另一方面，Java 变体是类型安全的：您必须自己进行类型转换和类型检查。

* * *

那么，为什么 Java 和 C# 的行为不同呢？这是我的猜测：

C# 在`foreach`泛型之前有关键字。因此，不可能有一个`List<Car>`. 如果 C# 选择了 Java 的方式`foreach`，你必须写

```
foreach(object _c in myArraylistContainingOnlyCars) {
    Car c = (Car)_c;
    // do something with c
} 
```

这很烦人。另一方面，扩展的 for 循环和泛型是在同一版本（Java 5）的 Java 中引入的，因此不需要自动转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T07:38:26.263

在 C# 中，当您编写

```
foreach(Truck t in carList) 
```

编译器理解的是（大致）：

```
var enumerator = carList.GetEnumerator();

while (enumerator.MoveNext())
{
    Truck t = (Truck)enumerator.Current;
    // do stuff
} 
```

如果 carList 包含非卡车汽车，则分配将在运行时失败。

您可以尝试以下控制台应用程序来说明：

```
namespace ConsoleApplication1
{
    class Car
    {
    }

    class Truck: Car
    {
    }

    class Program
    {
        static void Main(string[] args)
        {
            Car[] cars = new[] { new Car(), new Truck() };

            foreach (Truck t in cars)
            {
                Console.WriteLine("1 truck");
            }

            Console.Read();
        }
    }
} 
```

C# 和 java 编译器在这里表现不同，因为在设计语言时做出了不同的选择。奇怪的是，“尽可能快地失败，如果可能的话在编译时”是 C# 规范中的常见准则。这是一个未应用它的情况，尽管我喜欢 C# 语言，但我更喜欢 java 行为。

但是，在 C# 中，linq 提供了一种简单的方法来实现您认为它具有的功能：

```
foreach (Truck t in carList.OfType<Truck>())
{
    //do stuff
} 
```

这样，枚举将被过滤，只有卡车才能进入循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:45:22.293

```
List<Car> carList = new ArrayList<Car>();
//add some objects to the collection
for(Truck t : carList)
     //**PROBLEM** 
```

Java 5 中引入的 Java 泛型与 .NET 泛型有点不同。

长话短说——你不能写这样的代码——这是一个编译时错误。**你有一个汽车清单，你试图得到一个卡车清单——这听起来甚至是错误的**/

正确的方法是通过其接口使用`Truck`该类。`Car`如果你不能（没有足够的方法或方法有不同的含义），那么你可以过滤列表（在迭代之前）或者..重新设计你的类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T07:50:28.207

该程序将不会编译，因为您使用的是 Truck 类而不是 Car。

不需要这个

```
for(Car t : carList) {
    if(t instanceof Car)
        // Do stuff here
} 
```

你可以这样做：

```
for(Car t : carList) {
    // Do stuff here
} 
```

如果您这样做，它将起作用：

```
List<Truck> truckList = new ArrayList<Truck>();

for(Car car : truckList) {
    // Do stuff here
} 
```

或这个：

```
List<Car> carList = new ArrayList<Car>();

for (Iterator<Car> it = carList.iterator(); it.hasNext();) {
    Truck car = (Truck) it.next();
    // Do stuff here
} 
```

而不是这个：

```
List<Car> carList = new ArrayList<Car>();

for(Truck truck : carList) {
    // Do stuff here
} 
```

# grails - jquery-validation-ui 错误？

> ID：10101640
> 
> 赞同：0
> 
> 时间：2012-04-11T07:28:25.870
> 
> 标签：grails, jquery-validate

> **可能重复：**
> [“未捕获的 ReferenceError：未定义 JQueryValidatorUI”？](https://stackoverflow.com/questions/9639269/uncaught-referenceerror-jqueryvalidatorui-is-not-defined)

任何熟悉 grails 的 jquery-validation-ui 插件的人，当我使用它时，我在 chrome 脚本选项卡中收到错误，即找不到 JQueryValidatorUI。（“未捕获的 ReferenceError：未定义 JQueryValidatorUI”）

这是 chrome 抱怨的代码：

```
// amended from existing remote method
JQueryValidatorUI = {
  remote: function(validator, constraint, value, element, params) { 
            if ( validator.optional(element) ) 
```

可以在这里找到： [https ://github.com/limcheekin/jquery-validation-ui/blob/master/web-app/js/jquery-validation-ui/grails-validation-methods.js](https://github.com/limcheekin/jquery-validation-ui/blob/master/web-app/js/jquery-validation-ui/grails-validation-methods.js)

提前致谢， 米卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:00:08.533

删除了 JQueryValidatorUI 并留下了名为 remoteCall 的远程函数并调用了这个函数而不是 JQueryValidatorUI.remote 并且它可以工作......

# c++ - 删除 TCHAR 指针

> ID：10101651
> 
> 赞同：1
> 
> 时间：2012-04-11T07:29:03.490
> 
> 标签：c++, delete-operator

我正在尝试制作一个支持 Unicode 的 C++ hello world，但我有点卡住了。

我创建了一个指向 TCHAR [我认为它是一个 char 数组] 的指针，在使用它之后，我尝试删除它。它崩溃说`Expression: _BLOCK_TYPE_IS_VALID(pHead->nBlockUse)`。

上网查了一下，有人说是因为删错了。我尝试了两次删除，但它仍然给出了相同的消息。

我错过了什么明显的东西吗？

我试过的代码：

```
TCHAR *str=TEXT("おはよう, World!");
delete[] str; 
```

也试过：

```
TCHAR *str=TEXT("おはよう, World!");
delete str; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:30:30.103

```
TCHAR *str=TEXT("おはよう, World!"); 
```

你没有分配任何东西，所以没有必要删除内存。干脆不叫`delete[]`。`TEXT`是一个宏，而不是返回一些你应该自己管理的内存的函数。

这就像在之后调用 delete

```
char* x = "bla";
delete[] x; 
```

只是非法的，因为你不拥有内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T07:31:23.860

你只需要打电话，`delete`如果你打电话`new`，因为你没有。你不需要在`delete`这里打电话。
您在此处的字符串是在实现定义的内存区域而不是动态内存（又名堆）上创建的

# php - 在html中包含php

> ID：10101654
> 
> 赞同：0
> 
> 时间：2012-04-11T07:29:28.057
> 
> 标签：php, html

这是我创建的 HTML 脚本。我正在尝试包含一个 php 脚本，其中包含一个名为 $url 的变量，其中包含一个图片 url。当我回显 var 时，它什么也不显示。我究竟做错了什么？

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

</head>
<body>

<?php 

include("script.php"); 

?>

<img src= "<?php echo $url; ?>">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:50:25.837

通常您的服务器未配置为执行 HTML 文件中的 PHP 代码。

带有名称的文件`.php`由您的 Web 服务器专门处理，即作为 PHP 程序执行。

它是这样的：

```
Browser asks for file
            |
            v
Server looks at found file
    |               |
    v               v
  .html ?         .php ?
    |               |
    v               v
 send it to     give it to
 the browser    PHP and send,
 as-is          what returns 
```

您必须将 .html 文件重命名为 .php 才能使 PHP 在服务器的默认配置中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:35:14.730

因为在 script.php 中你有 var $url 等于一个 url。我猜你不支持php。您应该为 localhost 安装 xamp 或 wamp。

要对其进行测试，请将代码更改为此

```
<img src= "<?php echo "http://www.google.com//images/srpr/logo3w.png"; ?>"> 
```

并检查这是否有效，如果不是简单的安装 xamp，它将安装 php、apache 和 mysql :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:41:43.497

提供完整的 URL。

在包含的文件中，更改为：

```
$url = "http://www.google.com//images/srpr/logo3w.png"; 
```

# android - Android SMS_RECEIVED 广播接收器没有被调用

> ID：10101656
> 
> 赞同：1
> 
> 时间：2012-04-11T07:29:41.583
> 
> 标签：android

我的 bradcastreceiver 中的 onreceived 功能没有被触发。

我通过从不同手机发送短信对此进行了测试，但日志似乎没有显示任何活动。

这是接收器类

```
package nz.co.smstopc;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class SmsListener extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        //---get the SMS message passed in---
        Log.d("SmsListener", "new sms!!");
    }
} 
```

这是 minifest.xml

```
 <receiver android:name=".smstopc.SmsListener"> 
        <intent-filter>                                         
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 
```

这是我使用的权限。

```
 <uses-permission android:name="android.permission.RECEIVE_SMS"/> 
```

我已经尝试了一切来解决这个问题。我错过了要在 minifest 中添加的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:33:51.313

我也是这样做的，但是我的 Manifest-File 看起来有点不同：

```
<receiver android:name=".receiver.SmsBroadcastReceiver" >
     <intent-filter android:priority="99999999" >
          <action android:name="android.provider.Telephony.SMS_RECEIVED" />
     </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:34:18.460

您在接收器中的包名称可能与清单标签中的包属性冲突试试这个

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="your package name"
...
...
...
<receiver android:name="nz.co.smstopc.SmsListener"> 
        <intent-filter>                                         
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 
```

# zend-framework - zend 是否允许将控制权传递给位于 zend 文件夹之外的文件程序？

> ID：10101658
> 
> 赞同：0
> 
> 时间：2012-04-11T07:29:44.640
> 
> 标签：zend-framework, zend-db

zend 是否允许将控制权传递给位于 zend 文件夹之外的文件程序，并在完成程序执行后取回控制权？？？

我想访问位于另一个 sdk(aws sdk: amazone dynamo Db) 中的文件程序来访问 zend 框架工作的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:36:37.387

您可以使用标准的 PHP 函数，例如[exec](http://uk3.php.net/manual/en/function.exec.php)

也要注意[escapeshellarg](http://php.net/escapeshellarg)和[escapeshellcmd](http://php.net/escapeshellcmd)。

# css - 使用单个 http 请求加载多个 CSS 文件

> ID：10101669
> 
> 赞同：5
> 
> 时间：2012-04-11T07:30:24.643
> 
> 标签：css, http, yahoo

当我查看 yahoo mail 的源代码时，我看到一个`link`标签中有多个 css 文件，使用`&`如下所示的符号：

```
href="http://mail.yimg.com/zz/combo?kx/ucs/uh/css/271/yunivhead-min.css&kx/ucs/uh/css/221/logo-min.css&kx/ucs/avatar/css/17/avatar-min.css" 
```

有谁知道，他们如何分离每个文件并使用单个 http 请求将它们全部加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:35:59.680

在这种情况下，似乎有一个脚本将 css 文件连接成一个响应。

脚本的路径是`http://mail.yimg.com/zz/combo`. 它接受几个包含 CSS 文件路径的参数，然后将它们连接起来并可能缩小。

如果您使用 URL，您可以看到您可以`-min`从 URL 中删除 -Prefixes，并得到未缩小的 CSS 文件作为回报： http: [//mail.yimg.com/zz/combo ?kx/ucs/uh /css/271/yunivhead.css&kx/ucs/uh/css/221/logo.css&kx/ucs/avatar/css/17/avatar.css](http://mail.yimg.com/zz/combo?kx/ucs/uh/css/271/yunivhead.css&kx/ucs/uh/css/221/logo.css&kx/ucs/avatar/css/17/avatar.css)

周围有几个 CSS 缩小器，例如[CSSmin](http://code.google.com/p/cssmin/)。但由于这是一个 Yahoo 页面，他们可能使用自己的 CSS 压缩器[YUI](http://developer.yahoo.com/yui/compressor/)。有关其工作原理的详细信息，请参阅[http://developer.yahoo.com/yui/compressor/#work](http://developer.yahoo.com/yui/compressor/#work)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:37:08.927

不熟悉细节，但 URL 看起来像一个带有 CSS 文件作为未命名参数的查询字符串。

[http://mail.yimg.com/zz/combo](http://mail.yimg.com/zz/combo)将是一个加载 CSS 的服务，然后在返回给客户端之前连接并可能缩小文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:35:42.177

我的猜测是[http://mail.yimg.com/zz/combo](http://mail.yimg.com/zz/combo)是一个小程序/脚本，它收集所有参数（如 kx/ucs/uh/css/271/yunivhead-min.css、kx/ucs/uh /css/221/logo-min.css, kx/ucs/avatar/css/17/avatar-min.css)，将它们捆绑并最小化。

这类似于 MVC 的捆绑功能，您可以在[http://www.davidhayden.me/blog/asp.net-mvc-4-bundling-and-minification](http://www.davidhayden.me/blog/asp.net-mvc-4-bundling-and-minification)（或其他来源）上阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:36:58.567

如果你把 URL 拆开，你会看到它是一个名为“combo”的请求，它传递了各种查询字符串键（注意没有值），这些键是一些 CSS 文件的路径。

考虑到正在使用的服务器端语言，这些键将以标准方式提取，并且该 url 的 CSS 在完整返回到响应之前被解析为变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T07:41:44.607

对于他们的 yui 项目，yahoo 开发了一个名为 yuiloader 的项目。虽然主要是为 yui 设计的，但代码似乎也可以设置为服务其他文件。这比 COMBO 做得更多。它还可以解决依赖关系。使用 JS 和 CSS。由于 Yahoo 是 YUI 中的 Y，这可能是他们的 mail.yimg.com 的代码库。代码可以在[https://github.com/yui/phploader](https://github.com/yui/phploader)上找到。

# sharepoint - 如何检查 CurrentUser 是否是组 AD 的成员？

> ID：10101672
> 
> 赞同：1
> 
> 时间：2012-04-11T07:30:40.040
> 
> 标签：sharepoint

此代码不适合：

```
web.IsCurrentUserMemberOfGroup(web.Groups["Namegruop"].ID); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:06:41.460

您需要区分*AD 安全组*成员身份和*SharePoint 组*成员身份。

为了检查 AD 安全成员资格，您可以使用[`System.Security.Principal.WindowsPrincipal.IsInRole`](http://msdn.microsoft.com/en-us/library/4kc03hk7.aspx). 您不需要使用 SharePoint API：

```
using(WindowsIdentity identity = WindowsIdentity.GetCurrent())
{
  WindowsPrincipal p = new WindowsPrincipal(identity);
  if (p.IsInRole("DOMAIN\\GroupName")) // Alternative overloads with SecurityIdentifier available
  {
    // ...
  } 
} 
```

要检查当前用户是否是 SharePoint 组的成员，您可以使用 SharePoint API：

```
SPWeb web = // ...
SPGroup group = web.SiteGroups["GroupName"];
if (group.ContainsCurrentUser)
{
  // ...
} 
```

# java - 在画布上用鼠标画线：Java awt

> ID：10101673
> 
> 赞同：8
> 
> 时间：2012-04-11T07:30:41.633
> 
> 标签：java, swing, graphics, awt

尝试是在 awt 画布上使用鼠标启用图形绘制（现在是一条线）。我第一次尝试java图形。所以不知道该怎么做。这是我的第一次尝试：

```
package def.grafi;

import java.awt.Canvas;
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

  public class Dra {
  Frame f = new Frame();

public void disp() {
    f.setBounds(100, 100, 200, 200);
    MosL ml = new MosL();
    Can c = new Can();
    f.add(c);
    c.addMouseListener(ml);
    c.addMouseMotionListener(ml);
    f.setVisible(true);
}

public static void main(String[] args) {
    Dra d = new Dra();
    d.disp();
}

public class MosL extends MouseAdapter {
    int sx = 0;
    int sy = 0;
    boolean onDrag = false;

    @Override
    public void mouseDragged(MouseEvent e) {
        if (onDrag) {
            int x = e.getX();
            int y = e.getY();

            Canvas comp = (Canvas) e.getSource();
            Graphics g = comp.getGraphics();
                            // comp.repaint(); << for cleaning up the intermediate lines : doesnt work :(
            g.drawLine(sx, sy, x, y);
            return;
        }
        onDrag = true;
        sx = e.getX();
        sy = e.getY();

        System.out.println("Draggg");
    }

    @Override
    public void mousePressed(MouseEvent e) {
        System.out.println("Pressed");
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        System.out.println("Released");
        if (onDrag)
            onDrag = false;
    }
}

public class Can extends Canvas {
    @Override
    public void paint(Graphics g) {

    }
}
} 
```

问题：1）当窗口最小化并恢复时，绘制的线消失了（由于重新绘制）2）我想要的是线应该跟随鼠标（当它被拖动时）。最后一行应该从按下鼠标的点延伸到释放鼠标的点。仪式现在，当鼠标移动时，新的线条被绘制出来。我不确定如何清理画布上的中间线。

有人可以帮我解决这些问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T08:36:29.043

这是这种“绘画”的简单示例：

```
public static void main ( String[] args )
{
    JFrame paint = new JFrame ();

    paint.add ( new JComponent ()
    {
        private List<Shape> shapes = new ArrayList<Shape> ();
        private Shape currentShape = null;

        {
        MouseAdapter mouseAdapter = new MouseAdapter ()
        {
            public void mousePressed ( MouseEvent e )
            {
            currentShape = new Line2D.Double ( e.getPoint (), e.getPoint () );
            shapes.add ( currentShape );
            repaint ();
            }

            public void mouseDragged ( MouseEvent e )
            {
            Line2D shape = ( Line2D ) currentShape;
            shape.setLine ( shape.getP1 (), e.getPoint () );
            repaint ();
            }

            public void mouseReleased ( MouseEvent e )
            {
            currentShape = null;
            repaint ();
            }
        };
        addMouseListener ( mouseAdapter );
        addMouseMotionListener ( mouseAdapter );
        }

        protected void paintComponent ( Graphics g )
        {
        Graphics2D g2d = ( Graphics2D ) g;
        g2d.setPaint ( Color.BLACK );
        for ( Shape shape : shapes )
        {
            g2d.draw ( shape );
        }
        }
    } );

    paint.setSize ( 500, 500 );
    paint.setLocationRelativeTo ( null );
    paint.setVisible ( true );
} 
```

它会记住所有绘制的形状，并且只需稍加努力，您就可以扩展它以绘制您喜欢的任何其他形状。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T08:10:02.467

利用*AWT*包中的 Line2D 对象并执行以下步骤：

1.  为第一次和第二次单击创建鼠标**(X,Y)**值
2.  创建一个`boolean` `variable`以检查点击是第一次还是第二次
3.  制作一个`List`容器来容纳您的`Line2D`对象
4.  `Can`在您的对象中绘制它们
5.  通过鼠标侦听器的事件分配*前后**(* X , **Y)值**

步骤 5 可以通过以下方式实现：

1.  `e.getX()`
2.  `e.getY()`

其中 e 是鼠标事件，可以通过鼠标侦听器方法的参数访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:42:20.387

您应该使用 awt 包中的 Line2D 对象，为第一次单击和第二次单击创建 x 和 y 值，以及确定是第一次单击还是第二次单击的布尔值。然后制作一个 Line2D 的 ArrayList 并将它们绘制在您的 Can 对象中。因此，您可以使用 MouseEvent.getX() 和 getY() 在鼠标侦听器中为您的事件分配前后 x 和 y 值。

# facebook - 获取共享链接的所有 Facebook 评论

> ID：10101675
> 
> 赞同：2
> 
> 时间：2012-04-11T07:30:49.370
> 
> 标签：facebook, fb-graph

我想在特定链接上获取 Facebook 上的所有评论。看到这张图片：[http](http://cl.ly/062k1T380V1V3y2b1t0G) ://cl.ly/062k1T380V1V3y2b1t0G ，我想获得该链接的所有 55 条评论。有什么办法可以做到吗？

我试过graph.facebook.com/search?q=madhyamam.com，但是输出不准确，或者返回空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:13:36.980

您可以通过查询从页面链接的所有 url 来获取 url：

```
https://api.facebook.com/method/fql.query?query=SELECT link_id, created_time, title, url FROM link WHERE owner = YOUR_FACEBOOK_PAGE_ID&access_token=YOUR_ACCESS_TOKEN 
```

这应该会给你一个你的 url 和它们的 id 的列表。使用 id 你应该能够得到它的评论：

[https://graph.facebook.com/LINK_ID/comments](https://graph.facebook.com/LINK_ID/comments)

这将为您提供有关您的评论的所有信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T09:33:04.430

[yoo 可以通过这个 url https://graph.facebook.com/me?access_token=ACCESS_TOKEN](https://graph.facebook.com/me?access_token=ACCESS_TOKEN)轻松获取用户的手机号码......输出为 json 格式，之后你得到字符串，里面有键的值 ...“mobile_phone” 否则，这对您也有好处[https://graph.facebook.com/me?fields=address,mobile_phone&](https://graph.facebook.com/me?fields=address,mobile_phone&) access_token=ACCESS_TOKEN ...在这种情况下，您必须获得权限来自facebook api ..

谢谢

# actionscript-3 - 共享对象在 flex 中无法正常工作——移动

> ID：10101677
> 
> 赞同：1
> 
> 时间：2012-04-11T07:31:03.940
> 
> 标签：actionscript-3, apache-flex

我有一个非常简单的测试，使用移动设备的 flex 共享对象我有一个 person 类。

```
package
{
    import flash.display.MovieClip;

    public class Person extends MovieClip
    {
        var personsname:String="";
        public function Person(name:String)
        {
            personsname = name;
        }
    }
} 
```

然后在视图中添加一些简单的代码。

```
 var person1:Person;
                var person2:Person;
                var person3:Person;
                var person4:Person;
                var thePeople:Array=[];
                var so:SharedObject;
                function init():void{
                person1 = new Person("james");
                person2 = new Person("mike");
                person3 = new Person("Amanda");
                person4 = new Person("Shelly");
                thePeople.push(person1,person2,person3,person4);
                    //so = SharedObject.getLocal("savedData"); //clear it again
                ///so.clear(); // clear it again
                savePeople();
                getPeople();
                }

                private function savePeople():void{
                    so = SharedObject.getLocal("savedData");
                    if(so.data.thePeopleArray == null){
                        so.data.thePeopleArray = thePeople;
                        so.flush();
                    }
                }

                private function getPeople():void{
                    so = SharedObject.getLocal("savedData");
                    var thePeeps:Array = so.data.thePeopleArray;
                    trace(thePeeps);
            } 
```

我第一次运行它时，它会追踪 `[object Person]`4 次我关闭模拟器并重建并运行它

```
,,, 
```

如果我清除它，它会`[object Person]`再次显示，但注释掉得到`,,,`

共享对象甚至可以正确存储对象数组。我相信的persistanceManager也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:59:25.447

这里问题的根源是您试图将实例 MovieClip 保存到 SharedObject 中。由于 MovieClip 是一个内在对象（原生于 flash），它不能转换为可以存储的形式。这会导致闪存将数据转换为存储到磁盘的通用对象。我现在只能猜测到底是什么进入了 SharedObject 中。

它似乎是第一次工作，因为 flash 实际上并没有在 getPeople() 调用中加载共享对象，它只是使用已经在内存中的对象。应用程序第二次运行时，它会从磁盘读取通用对象并创建一个通用对象。

还有一个问题是，Flash 播放器在读取对象时不知道将数据传递给构造函数。

有一些可能的解决方法，其中一些是：

*   将数据存储为文本
*   将数据存储为 ByteArray
*   将数据存储在“数据对象”中

这些中的每一个都需要在读写过程中进行一些转换，但这可以使用接口来简化。这也增加了灵活性，以防您的对象发生更改，您仍然能够读取 SharedObject 中的数据。

# 1：文字

例如，您可以向`Person`对象添加两个方法，分别调用它们`serialise()`和`deserialise()`. 该`serialise()`方法将返回可以存储在共享对象中的文本。将`deserialise()`解析文本并填充对象的值。

这是一个示例来说明这一点：

```
class Person {
    private var name:String;
    private var age:int;

    public function serialise():String {
        return [name, age].join("\t");
    }

    public function deserialise(input:String):void {
        var tokens:Array = input.split("\t");
        name = tokens[0];
        age = parseInt(tokens[1]);
    }

    public static function create(name:String, age:int):Person
    {
        var output:Person = new Person();
        output.name = name;
        output.age = age;
        return output;
    }
} 
```

为了便于使用，我们可以创建一个类来管理人员集合：

```
class People {
    private var people:Vector.<Person> = new Vector.<Person>();

    public function clear():void {
        people.splice(0, people.length);
    }

    public function add(person:Person):void {
        people.push(person);
    }

    public function serialise():String {
        var output:Array = [];

        for each (var person:Person in people)
            output.push(person.serialise());

        return output.join("\n");
    }

    public function deserialise(input:String):void {
       var tokens:Array = input.split("\n");

       for each (var token:String in tokens) {
           var person:Person = new Person();
           person.deserialise(token);
           add(person);
       }
    }

    public function save():void {
        var so:SharedObject = SharedObject.getLocal("cookie");
        so.data.people = serialise();
        so.flush();
    }

    public function load():void
    {
        var so:SharedObject = SharedObject.getLocal("cookie");

        if (so.data.people != null)
            deserialise(so.data.people);
    }
} 
```

用法：

```
var people:People = new People();
people.load();
trace(people.serialise());

people.clear();
people.add(Person.create("Candy", 21));
people.add(Person.create("Sandy", 23));
people.add(Person.create("Randy", 27));
people.save();
trace(people.serialise()); 
```

此示例中的一个明显缺陷是 \n 和 \t 字符不能用作数据的一部分（即用于人名）。这是文本数据的常见缺点。

** 更新：查看内置[JSON](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html)方法以获得将对象序列化到文本和从文本序列化的一致方法。

# 2：字节数组

非常类似于上面描述的文本方法，除了序列化/反序列化方法将接受一个字节数组的附加参数，对象将写入该参数。然后将从共享对象中保存和加载 ByteArray。这种方法的优点是生成的数据通常比文本方法紧凑且通用。

Flash 还定义了可以在此处使用的[IDataInput](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/IDataInput.html)和[IDataOutput接口。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/IDataOutput.html)

# 3：数据对象

如果您仍然更喜欢直接存储对象，那么您可以创建一个代理对象，其唯一目的是承载数据。数据对象（又名 DO）是一个只有变量而没有方法的对象。例如：

```
class PersonDO {
    public var name:String;
} 
```

它会像这样使用：

```
 var person2:Person;
            var person3:Person;
            var person4:Person;
            var thePeople:Array=[];
            var so:SharedObject;
            function init():void{
            person1 = new Person("james");
            person2 = new Person("mike");

            // store the people data into data objects
            person1DO = new PersonDO();
            person1DO.name = person1.name;

            person2DO = new PersonDO();
            person2DO.name = person2.name;

            thePeople.push(person1DO,person2DO);
            savePeople();

            // load the people into data objects
            getPeople();
            person1 = new Person(thePeople[0].name);
            person2 = new Person(thePeople[1].name);

            private function savePeople():void{
                so = SharedObject.getLocal("savedData");
                if(so.data.thePeopleArray == null){
                    so.data.thePeopleArray = thePeople;
                    so.flush();
                }
            }

            private function getPeople():void{
                so = SharedObject.getLocal("savedData");
                var thePeeps:Array = so.data.thePeopleArray;
                trace(thePeeps);
        } 
```

尽管这可能看起来比其他方法更简单，但直接存储对象也有缺点： - 存储的数据非常脆弱 - 如果您更改对象，那么您的数据将变得不可用，除非您有每个对象的多个版本。- 您需要确保将对数据对象的引用编译到应用程序中。- 共享对象的一个​​常见使用场景是从一个 SWF 保存数据对象，然后将它们加载到另一个 SWF 中。您需要确保两个 SWF 使用相同版本的保存和加载的类。

希望有帮助。

# java - Eclipse 链接替代 @PreUpdate 注释？

> ID：10101678
> 
> 赞同：0
> 
> 时间：2012-04-11T07:31:05.543
> 
> 标签：java, jpa, orm, entity, eclipselink

我一直在研究一个实体，oneToMany 关系，问题是每当我使用它时：

```
//Parent class    

@OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE}, fetch = FetchType.EAGER, 
        targetEntity = FeedbackCategory.class, mappedBy = "parent")    
@PrivateOwned
@OrderBy("category ASC")
private List<Child> children;

//... other code here, i.e. getters-setters

@PrePersist
@PreUpdate
void prePersistUpdate() {

  // set the foreign key of child to this.ID
  if(children != null && !children.isEmpty())
  {
      for(Child ch: children)
      {
          ch.setParent(this);       
      }          
  }
} 
```

在更新 Parent.class 时，尤其是在干净更新实体时，Parent 的 Id 没有与子实体（作为外键）一起保存。请帮忙...

似乎@PreUpdate 不起作用，@PrePersist 完全起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:42:14.453

一般来说，正确维护您的模型会更好。

添加一个 addChild() 方法，用于添加子项并设置父项。那么你的模型就不会腐败了。

@PreUpdate 发生在提交过程的后期（在确定需要更新对象之后）。我认为没有更早的 JPA 事件，但您可以使用 EclipseLink PreWrite 事件。为此，您将需要使用 DescriptorEventListener，它的配置方式与 EntityListener 相同。

# c++ - 当 cond 为真时，在以下情况下，锁会发生什么？

> ID：10101682
> 
> 赞同：0
> 
> 时间：2012-04-11T07:31:12.627
> 
> 标签：c++, thread-safety, mutex, locks

我有这个代码，考虑到 cond 是真的，现在任何人都可以回答在以下情况下锁会发生什么： -

```
for (;;) {
static mutex m;
Lock lock(m);
if (cond)
break;
... 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T07:32:41.973

假设`Lock`类遵循[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)原则，它将解锁互斥锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:56:57.760

RAII 允许在作用域的末端解锁互斥锁。

这是另一个示例[Scooped Lock](http://developer-resource.blogspot.fr/2009/01/boost-scoped-lock.html)

# c# - 如何检查表中是否存在值，如果存在则删除它？

> ID：10101687
> 
> 赞同：0
> 
> 时间：2012-04-11T07:31:34.217
> 
> 标签：c#, mysql, sql, database, mysql-connector

我有一个名为 customer 的简单数据库，带有一个表数据。我想检查数据库中是否存在客户名称，如果我想删除它。我正在为此使用 MYSQL 连接器。

```
EDIT:
I want to make sure the value is present before deleting to display
a simple user message. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:34:36.483

为什么不直接删除呢？

```
DELETE FROM customers WHERE customer_name = 'John Smith'; 
```

如果存在，它将被删除。否则不会影响任何行。

**编辑：**

如果您需要更复杂的过程，那么我建议（按顺序）：

1.  创建`ON DELETE FOR EACH ROW`触发器，将在删除时自动更新标志；
2.  为此目的开发功能/程序；
3.  在事务块中执行一组操作，例如：

```
 START TRANSACTION;
    UPDATE flag_table SET is_deleted = 1 WHERE customer_name = 'John Smith';
    DELETE FROM customers WHERE customer_name = 'John Smith';
    COMMIT; 
```

如果您可以提供有关您的设计的更多详细信息，将更容易回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:00:26.517

您可以为此使用触发器，如果​​在插入时发现任何重复，mysql 将删除。

# openlayers - 如何处理 OSM 上覆盖 WMS 的问题？

> ID：10101695
> 
> 赞同：0
> 
> 时间：2012-04-11T07:31:58.977
> 
> 标签：openlayers, openstreetmap

我试图在 OSM 底图上覆盖 WMS，但在缩放时没有显示 WMS，而是在 zoomToMaxExtent(); 它被显示。现在我想在 OSM 的缩放中显示 WMS。我的仓库管理系统 EPSG：4326。以下是代码：

```
 var layer = new OpenLayers.Layer.OSM("OpenStreet Map");
     map.addLayer(layer);

     var mah2 = new OpenLayers.Layer.WMS("Nature Layer",
                    "http://localhost:8080/geoserver/trypoles/wms", 
                    {layers: "maharashtra_natural",transparent: true},               {isBaseLayer:false});
     map.addLayer(mah2);
//for zooming
   map.setCenter(new OpenLayers.LonLat(8461018,2120810),6.75); 
```

让我知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:46:10.607

您需要将投影从 EPSG:4326(WGS84) 转换为 EPSG:900913(spherical mercator)。这是可以帮助您的代码 [http://wiki.openstreetmap.org/wiki/OpenLayers_Simple_Example](http://wiki.openstreetmap.org/wiki/OpenLayers_Simple_Example)

# iphone - 当 ViewController 被解除时，本地创建的对象会被释放吗？

> ID：10101699
> 
> 赞同：0
> 
> 时间：2012-04-11T07:32:07.967
> 
> 标签：iphone, ios, xcode, ipad

我通过一个循环将大约 50 个 UIImageViews 扔到一个视图中，看起来像这样（照片只是我的子类）：

```
Photo *photoImage = [[Photo alloc] initWithImage:photo];
[self.view addSubview:photoImage]; 
```

我当前的设计流程使用`presentViewController`and`dismissViewController`来移动视图。当我决定关闭这个视图时，这些对象是否从内存中删除并清理了？另外，当 viewController 被解除时，我的数组对象是否被删除，或者我想使用 viewDidUnload？

我正在使用 ARC 顺便说一句。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:49:22.107

使用自动释放

照片 *photoImage = [[照片分配] initWithImage:photo]Autorelease];

[self.view addSubview:photoImage];

# python - 将 matplotlib 图例移到轴外使其被图形框截断

> ID：10101700
> 
> 赞同：263
> 
> 时间：2012-04-11T07:32:08.943
> 
> 标签：python, matplotlib, legend

我熟悉以下问题：

[Matplotlib savefig 带有图外的图例](https://stackoverflow.com/questions/8971834/matplotlib-savefig-with-a-legend-outside-the-plot)

[如何将传说从情节中剔除](https://stackoverflow.com/questions/4700614/how-to-put-the-legend-out-of-the-plot)

似乎这些问题的答案具有能够摆弄轴的精确缩小以使图例适合的奢侈。

然而，缩小坐标轴并不是一个理想的解决方案，因为它会使数据变小，实际上更难以解释；特别是当它很复杂并且有很多事情发生时......因此需要一个大的传说

文档中的复杂图例示例说明了这样做的必要性，因为他们图中的图例实际上完全掩盖了多个数据点。

[http://matplotlib.sourceforge.net/users/legend_guide.html#legend-of-complex-plots](http://matplotlib.sourceforge.net/users/legend_guide.html#legend-of-complex-plots)

**我想要做的是动态扩展图形框的大小以适应扩展图形图例。**

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(-2*np.pi, 2*np.pi, 0.1)
fig = plt.figure(1)
ax = fig.add_subplot(111)
ax.plot(x, np.sin(x), label='Sine')
ax.plot(x, np.cos(x), label='Cosine')
ax.plot(x, np.arctan(x), label='Inverse tan')
lgd = ax.legend(loc=9, bbox_to_anchor=(0.5,0))
ax.grid('on') 
```

请注意最终标签“逆棕褐色”实际上是如何在图形框之外的（并且看起来很严重 - 不是出版质量！） ![在此处输入图像描述](../Images/60969bd888d47aa9c2aded9d52cf35b7.png)

最后，我被告知这是 R 和 LaTeX 中的正常行为，所以我有点困惑为什么这在 python 中如此困难......有历史原因吗？Matlab 在这件事上是否同样糟糕？

[我在 pastebin http://pastebin.com/grVjc007](http://pastebin.com/grVjc007)上有这个代码的（只是稍微）更长的版本

* * *

## 回答 #1

> 赞同：352
> 
> 时间：2012-04-14T15:26:20.747

抱歉，EMS，但实际上我刚刚从 matplotlib 邮件列表中收到了另一个回复（感谢 Benjamin Root）。

我正在寻找的代码正在将 savefig 调用调整为：

```
fig.savefig('samplefigure', bbox_extra_artists=(lgd,), bbox_inches='tight')
#Note that the bbox_extra_artists must be an iterable 
```

这显然类似于调用tight_layout，但您允许 savefig 在计算中考虑额外的艺术家。实际上，这确实根据需要调整了图形框的大小。

```
import matplotlib.pyplot as plt
import numpy as np

plt.gcf().clear()
x = np.arange(-2*np.pi, 2*np.pi, 0.1)
fig = plt.figure(1)
ax = fig.add_subplot(111)
ax.plot(x, np.sin(x), label='Sine')
ax.plot(x, np.cos(x), label='Cosine')
ax.plot(x, np.arctan(x), label='Inverse tan')
handles, labels = ax.get_legend_handles_labels()
lgd = ax.legend(handles, labels, loc='upper center', bbox_to_anchor=(0.5,-0.1))
text = ax.text(-0.2,1.05, "Aribitrary text", transform=ax.transAxes)
ax.set_title("Trigonometry")
ax.grid('on')
fig.savefig('samplefigure', bbox_extra_artists=(lgd,text), bbox_inches='tight') 
```

这会产生：

![](../Images/eb99feaf7b2cd27c39fbcf57e54a485d.png)

[编辑] 这个问题的目的是完全避免使用任意文本的任意坐标位置，这是这些问题的传统解决方案。尽管如此，最近的许多编辑都坚持将它们放入，通常以导致代码引发错误的方式。我现在已经解决了这些问题并整理了任意文本，以展示如何在 bbox_extra_artists 算法中考虑这些问题。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-13T06:42:13.110

**补充：**我发现了一些可以立即解决问题的方法，但下面的其余代码也提供了一种替代方法。

使用`subplots_adjust()`函数将子图的底部向上移动：

```
fig.subplots_adjust(bottom=0.2) # <-- Change the 0.02 to work for your plot. 
```

`bbox_to_anchor`然后在图例命令的图例部分中使用偏移量，以获取所需的图例框。`figsize`设置和使用的某种组合`subplots_adjust(bottom=...)`应该为您生成高质量的图。

**替代方案：** 我只是改变了这一行：

```
fig = plt.figure(1) 
```

到：

```
fig = plt.figure(num=1, figsize=(13, 13), dpi=80, facecolor='w', edgecolor='k') 
```

并改变了

```
lgd = ax.legend(loc=9, bbox_to_anchor=(0.5,0)) 
```

到

```
lgd = ax.legend(loc=9, bbox_to_anchor=(0.5,-0.02)) 
```

它在我的屏幕（24 英寸 CRT 显示器）上显示良好。

这里`figsize=(M,N)`将图形窗口设置为 M 英寸乘 N 英寸。只是玩这个，直到它看起来适合你。将其转换为更具可扩展性的图像格式，并在必要时使用 GIMP 进行编辑，或者`viewport`在包含图形时使用 LaTeX 选项进行裁剪。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-08T07:06:30.667

这是另一个非常手动的解决方案。您可以定义轴的大小并相应地考虑填充（包括图例和刻度线）。希望它对某人有用。

示例（轴大小相同！）：

![在此处输入图像描述](../Images/891106a76da9c2c55e8c3fabaa100204.png)

代码：

```
#==================================================
# Plot table

colmap = [(0,0,1) #blue
         ,(1,0,0) #red
         ,(0,1,0) #green
         ,(1,1,0) #yellow
         ,(1,0,1) #magenta
         ,(1,0.5,0.5) #pink
         ,(0.5,0.5,0.5) #gray
         ,(0.5,0,0) #brown
         ,(1,0.5,0) #orange
         ]

import matplotlib.pyplot as plt
import numpy as np

import collections
df = collections.OrderedDict()
df['labels']        = ['GWP100a\n[kgCO2eq]\n\nasedf\nasdf\nadfs','human\n[pts]','ressource\n[pts]'] 
df['all-petroleum long name'] = [3,5,2]
df['all-electric']  = [5.5, 1, 3]
df['HEV']           = [3.5, 2, 1]
df['PHEV']          = [3.5, 2, 1]

numLabels = len(df.values()[0])
numItems = len(df)-1
posX = np.arange(numLabels)+1
width = 1.0/(numItems+1)

fig = plt.figure(figsize=(2,2))
ax = fig.add_subplot(111)
for iiItem in range(1,numItems+1):
  ax.bar(posX+(iiItem-1)*width, df.values()[iiItem], width, color=colmap[iiItem-1], label=df.keys()[iiItem])
ax.set(xticks=posX+width*(0.5*numItems), xticklabels=df['labels'])

#--------------------------------------------------
# Change padding and margins, insert legend

fig.tight_layout() #tight margins
leg = ax.legend(loc='upper left', bbox_to_anchor=(1.02, 1), borderaxespad=0)
plt.draw() #to know size of legend

padLeft   = ax.get_position().x0 * fig.get_size_inches()[0]
padBottom = ax.get_position().y0 * fig.get_size_inches()[1]
padTop    = ( 1 - ax.get_position().y0 - ax.get_position().height ) * fig.get_size_inches()[1]
padRight  = ( 1 - ax.get_position().x0 - ax.get_position().width ) * fig.get_size_inches()[0]
dpi       = fig.get_dpi()
padLegend = ax.get_legend().get_frame().get_width() / dpi 

widthAx = 3 #inches
heightAx = 3 #inches
widthTot = widthAx+padLeft+padRight+padLegend
heightTot = heightAx+padTop+padBottom

# resize ipython window (optional)
posScreenX = 1366/2-10 #pixel
posScreenY = 0 #pixel
canvasPadding = 6 #pixel
canvasBottom = 40 #pixel
ipythonWindowSize = '{0}x{1}+{2}+{3}'.format(int(round(widthTot*dpi))+2*canvasPadding
                                            ,int(round(heightTot*dpi))+2*canvasPadding+canvasBottom
                                            ,posScreenX,posScreenY)
fig.canvas._tkcanvas.master.geometry(ipythonWindowSize) 
plt.draw() #to resize ipython window. Has to be done BEFORE figure resizing!

# set figure size and ax position
fig.set_size_inches(widthTot,heightTot)
ax.set_position([padLeft/widthTot, padBottom/heightTot, widthAx/widthTot, heightAx/heightTot])
plt.draw()
plt.show()
#--------------------------------------------------
#================================================== 
```

# matlab - Matlab 3d 索引数据图

> ID：10101701
> 
> 赞同：0
> 
> 时间：2012-04-11T07:32:14.453
> 
> 标签：matlab, 3d, plot

我正在尝试绘制一个非常大的 CT 数据集的 3d 视图。我的数据位于 2000x2000x1000 维度的 3d 矩阵中。该对象被空气包围，在我的矩阵中设置为 NaN。

我希望能够看到物体表面的灰度值（无等值面），但我无法完全弄清楚如何在 Matlab 中做到这一点。任何人都可以帮助我吗？

鉴于我正在处理一个巨大的矩阵并且我只对对象的表面感兴趣，有没有人知道如何减小我的数据集大小的好技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:07:13.907

我会尽力给你一些想法。我假设缺少直接的 3D“表面检测器”。

由于您有一个 3D 矩阵，其中 XY 平面是 CT 扫描切片并且每个切片都是图像，因此我会尝试使用 edge 找到每个切片的[边缘](http://www.mathworks.com/help/toolbox/images/ref/edge.html)。这将需要一些预处理，例如首先对每个切片图像进行阈值处理。然后我可以使用[scatter3](http://www.mathworks.com/help/techdoc/ref/scatter3.html)将边缘数据显示为 3D 点云，或者使用[delaunay3](http://www.mathworks.com/help/techdoc/ref/delaunay3.html)将边缘数据显示为表面。

我希望这将帮助您实现您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:36:35.987

我设法让它工作：

```
function [X,Y,Z,C] = extract_surface(file_name,slice_number,voxel_size)
LT          = imread(file_name);%..READ THE 2D MAP
BW          = im2bw(LT,1);%..THRESHOLD TO BINARY
B           = bwboundaries(BW,8,'noholes');%..FIND THE OUTLINE OF THE IMAGE
X           = B{1}(:,1);%..EXTRACT X AND Y COORDINATES
Y           = B{1}(:,2);
indices     = sub2ind(size(LT),X,Y);%..FIND THE CORRESPONDING LINEAR INDICES
C           = LT(indices);%..NOW READ THE VALUES AT THE OUTLINE POSITION
Z           = ones(size(X))*slice_number; 
```

然后我可以用

```
figure
scatter3(X,Y,Z,2,C) 
```

现在我唯一可以改进的就是让散点图中的所有这些点与一个表面相连。您为此建议的@upperBound `delaunay3`- 我无法弄清楚如何做到这一点。你有小费吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T11:45:02.377

函数 surf(X,Y,Z) 允许您绘制 3d 数据，其中 (X,Y) 给出 xy 平面中的坐标，而 Z 给出 z 坐标和表面颜色。

默认情况下，该函数不会为 NaN 条目绘制任何内容，因此您应该很好地使用 surf 函数。

要将 surf 函数设置为使用灰度绘图，请使用：

```
surf(matrix3d);
colormap(gray); 
```

这会在曲面图中绘制矩阵并将颜色图设置为灰度。

此外，据我了解您的数据，您可能能够消除矩阵中的整个平面段。例如，如果平面 A(1,1:2000,1:1000) 在所有条目中均为 NaN，则您可以消除所有这些条目（因此条目 X=1 中的整个 Y、Z 平面）。然而，这将需要一些繁重的 for 循环，这可能超出了顶部。这取决于您将多少数据矩阵与每个矩阵需要多少不同的绘图进行比较。

# linux - 从我的 bash 脚本执行 ssh IPAddressA -l user "ssh -l IPAddressB ls" 时遇到问题

> ID：10101707
> 
> 赞同：1
> 
> 时间：2012-04-11T07:32:33.813
> 
> 标签：linux, bash, ssh, openssh

从我的 bash 脚本执行命令时，我目前面临一个奇怪的问题。

我的脚本有这个命令，

```
ssh IPAddressA -l root "ssh -l root IPAddressB ls" 
```

其中 IPAddressA 和 IPAddressB 将替换为可相互访问的两台机器的硬编码 IP 地址。

用户将在被询问时输入密码。但是，我在输入 IPAddressA 的密码后收到此错误。

```
root@IPAddressA's password: 
Permission denied, please try again.
Permission denied, please try again.
Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).
]$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:47:19.250

有一个更好的技巧。

在 ~/.ssh/config 中为 IPAddressA 添加一个主机条目，配置如下：

```
Host IPAddressA
    User someguy
    ProxyCommand ssh -q someguy@IPAddressB nc -q0 %h 22 
```

这种方法的巧妙之处在于，您可以 scp/sftp 到 IPAddressB，而在您的 shell 命令行上没有任何奇怪的东西。

要获得奖励积分，请为自己生成一个公钥对并将公钥放在 ~/.ssh/authorized_keys 中的 IPAddressA 和 IPAddressB 上。如果您不输入密码，您甚至都不会费心输入密码。

此外，如果您尝试访问只有一个入口点的远程 LAN - SSH 实际上可以充当 VPN 客户端，通过代理主机桥接您。当然，远程端需要支持tap/tun设备（就像你的本地机器一样）......但如果它已经全部存在......超级无痛机制来桥接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:41:46.417

当提示内部 ssh 密码时，没有可用的交互式键盘。你可以通过 ssh 隧道获得你想要的东西。

```
ssh root@IPAddressA -L2222:IPAddressB:22 -Nf
ssh root@localhost -p2222 
```

第一行打开一个隧道，所以你的 localhost`2222`端口指向`IPAddressB:22`andd 将 ssh 进程带入后台（`-f`）而不执行命令（`-N`）
第二行`IPAddressB:22`通过新打开的隧道连接

# ruby-on-rails - Backbone.js 路由没有被触发

> ID：10101708
> 
> 赞同：1
> 
> 时间：2012-04-11T07:32:34.717
> 
> 标签：ruby-on-rails, backbone.js, routes

我有一个带有 Backbone.js 的 Rails 3.2.3 应用程序，我在我的 Backbone.history 上使用 pushState。

**问题**

当我点击一个显示“/foo”的链接以显示 ID：1 的约会时，Backbone 路由器首先到达那个位置，我可以在 Rails 路由器接管并抱怨没有 /foo 的路由之前快速看到它.

**我的 Backbone.js 代码**

这是我的骨干路由器。

```
window.AppointmentApp = new (Backbone.Router.extend({
    routes: {
        "": "index",
        "foo": "foo",
        "appointments": "index",
        "appointments/:id": "show"
    },
    foo: function(){
        $("#app").append("foo<br />");
    },
    initialize: function() {
        this.appointments = new Appointments();
        this.appointmentListView = new AppointmentListView({ collection: this.appointments });
        this.appointmentListView.render();
    },
    start: function() {
        Backbone.history.start({pushState: true});
    },
    index: function() {
        $("#app").html(this.appointmentListView.el);
        this.appointments.fetch();
    },
    show: function(id) {
        console.log("Enter show");
    }   
})); 
```

它应该保持在同一页面上并在#app div 的末尾附加一个“foo”，但它永远不会这样做。

**骨干索引查看器**

```
window.AppointmentListView = Backbone.View.extend({
    template: JST["appointments/index"],
    events: {
        "click .foo": function(){Backbone.history.navigate("foo");},
    },
    comparator: function(appointment){
        return appointment.get('topic');
    },
    initialize: function(){
        this.collection.on('reset', this.addAll, this);
    },
    render: function(){
        this.$el.html(this.template);
        this.addAll();
        return this;
    },
    addAll: function() {
        this.collection.forEach(this.addOne, this);
    },
    addOne: function(appointment){
        var appointmentView = new AppointmentView({model: appointment});
        this.$el.append(appointmentView.render().el);
    }
}); 
```

**应用程序/资产/模板/约会/Index.jst.ejs**

```
<h1>Appointments</h1>
<a href="/foo" class="foo">Say Foo</a>
<a href=appointments/add>Add</a>
<div id="app"></div> 
```

我使用的是 pushState，因为它允许我保留历史记录和后退按钮功能。

Backbone.history.navigate 不调用我的 Backbone 路由，而是调用 Rails 路由。我该如何解决这个问题？

我应该尝试将 Backbone 设置为接受诸如“约会/1”之类的路由并进行控制，还是必须像上面那样使用带有 Backbone.history.navigate 调用的点击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:40:09.727

您需要从`click .foo`事件处理程序中返回 false，否则浏览器将继续运行，就像您正常单击链接并`/foo`从服务器请求实际页面一样。

我认为您也收到了`Backbone.history.navigate("foo");`错误的调用-据我从文档中可以看出，`Backbone.history`它没有功能。`navigate`您实际上应该在您的`Backbone.Router`实例上调用 .navigate ，并传入`trigger`选项以使其调用触发路由。例如：

```
window.AppointmentApp.navigate("foo", { trigger : true } ); 
```

您可能已经知道这一点，但是如果您打算使用 pushState，那么您应该真正更新您的服务器端以支持您的客户端所做的所有 URL。否则，如果用户决定将 URL 复制并粘贴到另一个选项卡中，他们只会遇到 rails 抱怨没有路由。

# r - 使用R从向量中提取指定单词

> ID：10101711
> 
> 赞同：3
> 
> 时间：2012-04-11T07:32:52.283
> 
> 标签：r

我有一个文本，例如

```
text<- "i am happy today :):)" 
```

我想从文本向量中提取 :) 并报告它的频率

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T07:44:45.737

这是一个很容易概括的想法：

```
text<- c("i was happy yesterday :):)",
         "i am happy today :)",
         "will i be happy tomorrow?")

(nchar(text) - nchar(gsub(":)", "", text))) / 2
# [1] 2 1 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T07:50:58.317

我假设您只想要计数，还是您也想`:)`从字符串中删除？

对于计数，您可以执行以下操作：

```
length(gregexpr(":)",text)[[1]]) 
```

这给出了 2。字符串向量的更通用的解决方案是：

```
sapply(gregexpr(":)",text),length) 
```

# 编辑：

Josh O'Brien 指出，这也返回 1 of there is no since return`:)`在这种情况下。要解决此问题，您可以使用：`gregexpr``-1`

```
sapply(gregexpr(":)",text),function(x)sum(x>0)) 
```

这确实变得不那么漂亮了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T07:43:03.163

这可以解决问题，但可能不是最直接的方法：

```
mytext<- "i am happy today :):)"

# The following line inserts semicolons to split on
myTextSub<-gsub(":)", ";:);", mytext)

# Then split and unlist
myTextSplit <- unlist(strsplit(myTextSub, ";"))

# Then see how many times the smiley turns up
length(grep(":)", myTextSplit)) 
```

**编辑**

要处理长度 > 1 的文本向量，请不要取消列出：

```
mytext<- rep("i am happy today :):)",2)
myTextSub<-gsub(":\\)", ";:\\);", mytext)
myTextSplit <- strsplit(myTextSub, ";")

sapply(myTextSplit,function(x){
  length(grep(":)", x))
}) 
```

但我更喜欢其他答案。

# android - “不能引用内部类中的非最终变量”如何根据复选框的状态操作 TextView？

> ID：10101715
> 
> 赞同：0
> 
> 时间：2012-04-11T07:33:00.913
> 
> 标签：android, android-arrayadapter, onclicklistener

虽然我很清楚我不可能在我的 onClick 方法中引用非最终变量，但我很想知道如何解决我目前面临的问题。

我有一个 ArrayAdapter。如果用户按下复选框 AsyncTask 并且用户订阅或取消订阅队列，这取决于复选框是否被选中。

我希望此状态反映在我的 txtStatus TextView 文本中的每个项目中。如何根据复选框的状态设置 TextView 的文本？

这是我的 getView 方法的部分代码：

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    View row = convertView;

    final CheckBox queueCBox;
    userControl = new UserController(context);
    final String queueName = data[position].label; 
    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        final QueueHolder holder = new QueueHolder();
        holder.queuecbox = (CheckBox)row.findViewById(R.id.queues_item_checkbox);
        queueCBox = (CheckBox)row.findViewById(R.id.queues_item_checkbox);
        holder.txtLabel = (TextView)row.findViewById(R.id.queues_item_label);
        holder.txtStatus = (TextView)row.findViewById(R.id.queues_item_status);

        holder.queuecbox.setOnClickListener(new OnClickListener() 
        {
            @Override
            public void onClick(View v) 
            {
                final String[] param = new String[1];
                param[0] = queueName;

                if(queueCBox.isChecked())
                {
                    holder.txtStatus.setText("Tilmeldt");
                    Log.d("ClickTest","SWITCH ON");
                    new JoinQueueTask().execute(param);

                }   
                else
                {
                    holder.txtStatus.setText("Frameldt");
                    Log.d("ClickTest","SWITCH OFF");
                    new LeaveQueueTask().execute(param);
                }   
            }
        });
        row.setTag(holder);
    }
    else
    {
        final QueueHolder holder = (QueueHolder)row.getTag();
    }

    QueueItem queue = data[position];
    String name = queue.label.replace("-", " "); 
    holder.txtLabel.setText(name);    // holder cannot be resolved
    holder.queuecbox.setChecked(queue.value);  // holder cannot be resolved

    return row;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T07:37:08.853

保持原样。只是为了设置 onClickListener，尝试这样做，

```
QueueHolder holder = null;
if(row == null)
{
    LayoutInflater inflater = ((Activity)context).getLayoutInflater();
    row = inflater.inflate(layoutResourceId, parent, false);

    holder = new QueueHolder();
    holder.queuecbox = (CheckBox)row.findViewById(R.id.queues_item_checkbox);
    queueCBox = (CheckBox)row.findViewById(R.id.queues_item_checkbox);
    holder.txtLabel = (TextView)row.findViewById(R.id.queues_item_label);
    holder.txtStatus = (TextView)row.findViewById(R.id.queues_item_status);
    row.setTag(holder);
}
else
{
    holder = (QueueHolder)row.getTag();
}

QueueItem queue = data[position];
String name = queue.label.replace("-", " "); 
holder.txtLabel.setText(name);    // holder cannot be resolved
holder.queuecbox.setChecked(queue.value);  // holder cannot be resolved

final QueueHolder fianlHolder = holder;

finalHolder.queuecbox.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            final String[] param = new String[1];
            param[0] = queueName;

            if(queueCBox.isChecked())
            {
                finalHolder.txtStatus.setText("Tilmeldt");
                Log.d("ClickTest","SWITCH ON");
                new JoinQueueTask().execute(param);

            }   
            else
            {
                finalHolder.txtStatus.setText("Frameldt");
                Log.d("ClickTest","SWITCH OFF");
                new LeaveQueueTask().execute(param);
            }   
        }
    });
return row;
} 
```

# php - Javascript：在另一个 php 文件中调用一个 js 文件的 document.ready() 函数

> ID：10101717
> 
> 赞同：0
> 
> 时间：2012-04-11T07:33:03.530
> 
> 标签：php, javascript, jquery, css

我有 progress.js 文件，其中包含以下代码

```
 $('#text_area_input').keyup(function()
            {
                var text_area_box =$(this).val();//Get the values in the textarea
                var max_numb_of_words = 160;//Set the Maximum Number of characters
                var main = text_area_box.length*100;//Multiply the lenght on words x 100
                var value= (main / max_numb_of_words);//Divide it by the Max numb of words previously declared
                var count= max_numb_of_words - text_area_box.length;//Get Count of remaining characters
                if(text_area_box.length <= max_numb_of_words)
                {
                    $('#progressbar').css('background-color','#5fbbde');//Set the background of the progressbar to blue
                    $('#count').html(count);//Output the count variable previously calculated into the div with id= count
                    $('#progressbar').animate(//Increase the width of the css property 'width'
                    {
                        'width': value+'%'
                    }, 1);//Increase the
                }
                else
                {
                    $('#progressbar').css('background-color','yellow');
                    //If More words is typed into the textarea than the specified limit ,
                    //Change the progress bar from blue to yellow
                    var remove_excess_characters =text_area_box.substr(0,max_numb_of_words);
                    $('#text_area_input').val(remove_excess_characters);
                    //Remove the excess words using substring
                }
                return false;
            });
        }); 
```

我必须在我的 php 文件中调用该函数。我怎样才能使它正确？我在我的项目中包含了所有必要的 css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:35:32.827

您可以将您的 jquery 代码放在一个单独的文件中，然后使用 include 将其包含在您的其他页面中

[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:42:49.317

那么有一个很好的解决方案。而不是在文档中使用它 .ready 像这样工作

```
<input type = 'button' onkeyup = 'my_function();' id = 'text_area_input'> 
```

你的脚本应该包含这个

```
 <script type = 'text/javascript'>
 function my_function(){
 // you code here
 }
 <script> 
```

如果您在此文件中调用其他 php 文件，则此函数也可用于新的 php 文件。另一种解决方案是将代码复制到另一个 php 文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:02:46.047

> 我有一个 header.php 文件，在 header.php 中我插入了一些和 head 标签，还包括 body 标签。但是在webpage.php 文件中，我有一个文本区域，我应用了一些jquery 来动态获取进度条。所以我必须在那个webpage.php 中调用$document.ready 函数。但问题是，我有很多 $document。header.php 中的 ready 函数，我包含在 pages.php 中。还有一件事我在webpage.php中有另一个head标签，用于获取JQGrid

据我了解，您已经有多个 document.ready 块，而不是您只想调用特定块。

你应该从

```
$(document).ready(
    //code for block 1
)

$(document).ready(
    //code for block 2
)

$(document).ready(
    //code for block 3
) 
```

to function codeblock1(){ //块 1 的代码 }

```
function codeblock2(){
    //code for block 2
}

function codeblock3(){
    //code for block 3
}

$(document).ready(
    codeblock1();
    codeblock2();
    ///
) 
```

所以现在你可以在其他脚本中调用你想要的任何块

# tomcat - 无法加载 JDBC 驱动程序类“com.mysql.jdbc.Driver”

> ID：10101723
> 
> 赞同：8
> 
> 时间：2012-04-11T07:33:39.213
> 
> 标签：tomcat

嗨，我在 linux 机器上的 tomcat 中部署我的应用程序 bt 我收到错误......我已将 mysql-connector-java-5.1.18-bin.jar 放入 tomcat/server/lib 文件夹中..

```
org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.mysql.jdbc.Driver'
        at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:766)
        at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:540)
        at jdbchandler.JDBCHelp.getConnection(JDBCHelp.java:24)
        at requesthandlers.HandleLoginRequest.handleRequest(HandleLoginRequest.java:98)
        at web.Controller.doPost(Controller.java:38)
        at web.Controller.doGet(Controller.java:24)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:210)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:775)
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:704)
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:897)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:685)
        at java.lang.Thread.run(Thread.java:595)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:164)
        at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:760)
        ... 23 more 
```

请帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T07:42:44.683

没有什么叫`tomcat/server/lib`

如果是 Tomcat 5.5.x 那么路径应该是`tomcat/common/lib`

对于其他版本：`tomcat/lib`

因此，将您的 jar 文件放在正确的路径中。

# c# - 尝试在 sql server 中插入日期和时间但出现错误

> ID：10101724
> 
> 赞同：1
> 
> 时间：2012-04-11T07:33:40.303
> 
> 标签：c#, sql-server

以下代码有什么问题？我将日期 n 时间存储到 sql server 中的 datetime 字段中。

```
private void button1_Click(object sender, EventArgs e)
    {
        string d = DateTime.Now.ToShortDateString();
        cmd.CommandText = "insert into trans values("+label9.Text+",'d');";
        cmd.Connection = con;
        con.Open();
        int x= cmd.ExecuteNonQuery();
        MessageBox.Show("Attendance recorded succesfully"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:38:50.583

这是一个非常糟糕的方法，因为它为 sql-injections 开放。你最好使用 SqlParameter。

```
cmd.CommandText="insert into trans values(@label, @date)";
cmd.Parameters.AddWithValue("label", int.Parse(label9.Text));
cmd.Parameters.AddWithValue("date", DateTime.Now);
cmd.Connection = con;
con.Open();
int x= cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:37:09.363

`CommandText`字符串中有错误输入。改用这个

```
cmd.CommandText="insert into trans values("+label9.Text+","+DateTime.Now.ToString()+");"; 
```

**编辑：**

完整编辑的代码将是这样的。请注意，`using`语句会处理您的更新，但是这段代码仍然很糟糕，并且是**sql-injections**的房子。如果您想要安全的代码，则必须使用参数。

```
private void button1_Click(object sender, EventArgs e)
{
    using (System.Data.SqlClient.SqlConnection connection = new System.Data.SqlClient.SqlConnection("Data Source=localhost; Initial Datalog=myDatabase; Integrated Security=TRUE;")) 
  {
      using (System.Data.SqlClient.SqlCommand command = new System.Data.SqlClient.SqlCommand("insert into trans values("+label9.Text+","+DateTime.Now.ToString()+");", connection)) 
    {
        connection.Open();
        command.ExecuteNonQuery();
        connection.Close();
     }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T07:38:26.607

除了您使用的是内联 SQL 之外，这很糟糕。您应该`@param1`在查询中使用语法，然后向其中添加参数（因此也回避了这个问题）。更好的是 - 使用像 Linq to Sql 或实体框架（或 nHibernate 或其他）这样的 ORM。

SQL Server 通常希望它的时间为 yyyymmdd 格式，而且您真的应该检查标签的值是否确实是一个整数，并且只有在它是时才运行查询：

```
int labelValue = 0;
if(int.TryParse(label9.Text, out labelValue))
{
  cmd.CommandText="insert into trans values("+ labelValue +
    ", '" + DateTime.Now.ToString("yyyyMMdd");"')"; 
  cmd.Connection = con;      
  con.Open();      
  int x= cmd.ExecuteNonQuery();      
  MessageBox.Show("Attendance recorded succesfully");
} 
```

我还要说你真的需要检查你对连接/命令的使用 - 你在哪里`Dispose`？从这段代码来看，我猜你没有？

总而言之，即使有了这些修复，我也不建议您以这种方式做事——按照 Harm 建议的方式去做——+5（或更多）是应得的。

# actionscript-3 - 向 Alternativa3d 添加文本？

> ID：10101736
> 
> 赞同：1
> 
> 时间：2012-04-11T07:34:35.733
> 
> 标签：actionscript-3, flash, 3d

我正在使用 Alternativa3d (8.17.0) 创建一个应用程序，并想为一些多维数据集添加标签。但似乎 Alternativa API 没有提供一种方法来做到这一点......

现在我知道我可以：

*   以正常方式将TextField添加到Flash显示列表中
*   预先将文本渲染为位图并作为资源上传到 GPU
*   在运行时将文本渲染为位图，并作为资源上传到 GPU

但我需要将内容直接添加到 Alternativa 多维数据集（排除第一个选项），并且文本是动态的（即在编译时未知 - 排除第二个），而第三个只是感觉 hacky。

有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:41:26.877

根据您希望文本显示的方式，您可以做很多不同的事情..

您可以使用 Sprite3D 并将呈现为位图的文本添加。您可以将 sprite3d 放置在立方体附近，它将始终面向相机，因此当您在立方体周围移动时，它们将出现在 3d 空间中，但始终面向您。

另一种选择是按照 danii 的建议使用影片剪辑将其添加到实际的立方体中。但是，该 MovieClipMaterial 的链接不再有效，实际上是用于 Alternativa 的先前版本而不是版本 8。我在这里为版本 8 创建了自己的电影剪辑材料（[http://davidejones.com/blog/1392-moviematerial-alternativa3d- 8/](http://davidejones.com/blog/1392-moviematerial-alternativa3d-8/) ) 如果你想这样做。

最后，您可以将文本渲染为位图并将其与立方体位图合并，以便文本在顶部分层，然后将此材质设置到立方体上。

Personallt 我会使用 sprite3d 方法更容易，我认为会产生更好的效果。看看这个使用相同效果的例子（[http://gkb40.ur.ru/web/map40a3d.swf](http://gkb40.ur.ru/web/map40a3d.swf)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:26:53.540

只需将您的 TextField 放入 MovieClip 中，然后使用类[MovieClipMaterial](http://alternativaplatform.com/en/docs/client/alternativa/engine3d/materials/MovieClipMaterial.html)将该 MovieClip 设置为立方体一侧的材质。

# .net - WM_CLOSE 和 SC_CLOSE 的区别

> ID：10101742
> 
> 赞同：1
> 
> 时间：2012-04-11T07:34:54.343
> 
> 标签：.net, winforms, windows-messages

我只想知道这两个消息传递常量之间有什么区别。覆盖时我应该在方法中使用哪一个`WndProc`来处理关闭按钮消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T07:48:48.733

[`WM_CLOSE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617%28v=vs.85%29.aspx)每当请求以任何方式关闭窗口时，都会作为窗口消息发送。

`SC_CLOSE`[`WM_SYSCOMMAND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360%28v=vs.85%29.aspx)当用户按下关闭按钮（或从窗口的控制菜单中选择关闭）时，作为消息的参数发送。

你听哪一个取决于你试图拦截/处理的动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:49:14.473

根据 msdn，SC_CLOSE 是[WM_SYSCOMMAND](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360%28v=vs.85%29.aspx)消息的 wParam 值之一。

> 当用户从窗口菜单（以前称为系统或控制菜单）中选择命令或用户选择最大化按钮、最小化按钮、恢复按钮或关闭按钮时，窗口会收到此消息。

[WM_CLOSE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617(v=vs.85).aspx)本身就是一条消息。

> 作为窗口或应用程序应该终止的信号发送。

因此，当窗口接收到参数值为 SC_CLOSE 的 WM_SYSCOMMAND 时，您可以关闭窗口（发送 WM_CLOSE 消息）。

更新（如果您想让用户优雅地关闭窗口）：应用程序可以在销毁窗口之前提示用户确认，方法是处理 WM_CLOSE 消息并仅在用户确认选择时调用 DestroyWindow 函数。

顺便说一句，如果您使用 C#，您可以处理`FormClosing`事件并在那里工作。如果您需要取消关闭，那么只需设置`e.Cancel = true`事件参数。

# android - 如何获取电话的通话记录按钮的ID？

> ID：10101743
> 
> 赞同：1
> 
> 时间：2012-04-11T07:35:00.740
> 
> 标签：android

如何获取电话的通话记录按钮的ID，以检查其是否被点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:06:28.667

您可以使用[Activity类的](http://developer.android.com/reference/android/app/Activity.html)[onKeyDown](http://developer.android.com/reference/android/app/Activity.html#onKeyDown%28int,%20android.view.KeyEvent%29)或[onKeyUp](http://developer.android.com/reference/android/app/Activity.html#onKeyUp%28int,%20android.view.KeyEvent%29)方法来获取按键的keyCode。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    // Your logic here.

    return false;
} 
```

# c# - 如何获取列表中资源文件的名称？

> ID：10101752
> 
> 赞同：1
> 
> 时间：2012-04-11T07:35:40.533
> 
> 标签：c#, asp.net-mvc, resx

Asp.net Mvc 应用程序。在项目中有一个resource.resx 文件，其中有信息。从资源文件中，我想获取名称列表。大家可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:16:32.677

`ResourceManager.GetResourceManagerSet()`您应该能够通过该方法遍历资源来做到这一点 。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/2041000/loop-through-all-the-resources-in-a-resx-file)...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T16:08:46.543

试试这个代码

```
string[] fileEntries = Directory.GetFiles(Application.StartupPath.Replace("bin\\\Debug", "Resources"));
           foreach (string fileName in fileEntries)
               comboBox1.Items.Add(Path.GetFileName(fileName)); 
```

# django - “django-admin startapp”有什么魔力，测试运行者需要找到我的tests.py

> ID：10101758
> 
> 赞同：2
> 
> 时间：2012-04-11T07:35:55.060
> 
> 标签：django, testing, django-admin

我遇到了一个问题，即 django 测试运行程序没有找到我的应用程序的测试，比如这个：

[Django 测试运行程序找不到测试](https://stackoverflow.com/questions/2037364/django-test-runner-not-finding-tests)

该线程上的一条评论建议使用 django-admin.py 创建一个新应用程序并查看测试是否在那里运行。例如

```
django-admin.py startapp delme 
```

然后

```
adding "delme" to my INSTALLED_APPS 
```

然后

```
copying my tests.py from the app where it wasn't getting found into delme/ 
```

和中提琴！测试确实运行了。所以，好吧，我有工作，但我不明白。我重新阅读了我认为应该是 django 文档的相关部分，但一分钱拒绝放弃。

顺便说一句，该应用程序通过 runserver 和 wsgi 工作，因此似乎没有任何严重的配置问题。而且我的测试都从他们的新家通过，所以我显然需要更多测试:)

具体来说，我在 virtualenv 中运行 django，所以我在我希望运行测试的（激活的）virtualenv 中运行了“django-admin.py startapp”。这不会使测试在我的其他 virtualenvs 中运行，我仍然有旧的症状（Ran 0 测试）。我有大量的 virtualenvs，由非平凡的摊铺机脚本管理。一种使用“path.copytree”来部署项目，重写 apache 配置文件，重新启动 apache，使用适当的 virtualenv 写入 wsgi 文件等。另一种使用 PIP/GCC/aptitude/etc 来引导/拆除不同的环境，更新包根据配置等。所以我想了解 django-startapp 和简单地复制文件之间的区别，所以我可以修复这些 paver 脚本，以便测试可以在我想要的任何环境中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:42:26.507

阅读您的描述后，对我来说唯一有意义的是现有应用程序的路径位置。您能否确认以下几点：

1.  您的应用与 delme 应用位于同一文件夹级别
2.  您的应用程序文件夹包含一个`__init__.py`文件
3.  `INSTALLED_APPS`您的应用在设置中列出

我猜这是一个丢失的`__init__.py`文件，因为这会让一些人绊倒。要回答您的具体问题，django-admin startapp 并没有做任何神奇的事情。它只是在正确的位置创建正确的文件夹和文件。

您的文件夹结构应该是...

```
my_project/
    __init__.py
    manage.py
    settings.py
    my_app/
        __init__.py
        tests.py
        models.py
    delme/
        __init__.py
        tests.py
        models.py 
```

另请注意[此评论](https://stackoverflow.com/questions/2037364/django-test-runner-not-finding-tests#comment1964261_2037364)

> 您不能轻易地直接命名 TestCase 类。您命名应用程序，Django 运行程序通过查看 models.py 和 tests.py 来完成它的发现工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:57:29.887

解决了（仍然有一点魔法）。

`diff`表明我的旧应用程序没有models.py，但新应用程序（“delme”，工作）有。我不认为旧应用程序需要一个，它正在从其他地方导入它的所有域类。

在我的旧应用程序中触摸一个空白即可`models.py`修复它，现在测试运行程序找到`tests.py`并且一切都按预期工作。结论 - 如果应用程序没有 models.py，django 测试运行器将找不到应用程序的 tests.py。

我所说的不在不同的 virtualenvs 中工作是假的（红鲱鱼），我对我的部署脚本在做什么有点困惑。

# c# - 为什么 C# 在类/方法级别上不支持 const？

> ID：10101763
> 
> 赞同：27
> 
> 时间：2012-04-11T07:36:11.990
> 
> 标签：c#, constants, language-design

我一直想知道为什么 C# 不支持`const`类或方法级别。我知道 Jon Skeet 长期以来一直希望支持不变性，并且我认为使用函数 const 的 C++ 语法可以帮助实现这一点。通过在类级别添加 const 关键字，我们将获得完全支持。

现在，我的问题是，C# 团队没有开发这种支持的原因是什么？

我想一切都可以通过编译时检查或通过属性来创建，而无需更改 CLR。我不介意代码能够通过反射覆盖 const 行为。

想象一下：

```
const class NumberContainer
{
    public int Number { get; }
} 
```

.. 这样的类只能在构造时填充，所以我们需要一个构造函数来接收一个 int。

另一个例子是方法级别的 const ：

```
public int AddNumbers(NumberContainer n1, NumberContainer n2) const
{
   return n1.Number + n2.Number;
} 
```

常量级方法不应该能够改变它们自己的类或传递给它们的引用类型实例中的状态。此外，const 级函数只能在其范围内调用其他 const 级函数。

我不太确定 lambda 和委托是否会让一切变得太难（或不可能）实现，但我相信在语言和编译器设计方面有更多经验的人可以告诉我。

正如史蒂夫 B 在评论中指出的那样， 的存在`readonly`使事情变得更加复杂，因为 const 和`readonly`during 接近相同`runtime`，但是`readonly`在编译时无法确定值。我想我们可以拥有`const`和`readonly`水平，但这可能太混乱了？

那么，不执行此操作的原因是什么？可用性问题（新用户通常很难理解 C++ 中的常量）、语言设计问题（无法完成）或简单的优先级问题（不变性嗡嗡声的时代已经结束）......？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-11T08:36:23.567

冒着有点循环解释的风险，C# 不支持 const 因为 CLR 不支持它。CLR 不支持它，因为它完全不符合 CLS。

很少有语言有这个概念。C 语言支持 const，这在 C# 中通过*readonly*关键字得到了很好的支持。但最重要的当然是 C++，它对 const 有更广泛的适用性，毫无疑问是你要找的那个。我将避免确定 const 应该是什么意思，这本身就是一个虫洞，只谈论“const-ness”，即应用 const 的属性。

const-ness 的问题在于它需要被*强制执行*。当任意*其他*语言可以使用 C# 类并完全忽略 const-ness 只是因为该语言不支持它时，这是 C# 中的一个问题。仅仅因为 C# 支持它就将它固定到所有其他 CLS 语言上当然是非常不切实际的。

可执行性也是 C++ 中的一个问题。因为该语言还支持 const_cast<>。任何客户端代码都可以快速且无法诊断地消除 const-ness。你不应该这样做，但有时你必须这样做。因为有两种 const-ness，strict 和 observable。大致类似于私有常量和公共常量。*mutable*关键字后来被添加到语言中，以尝试处理对可观察 const 的需求，因此至少可以避免 const_cast<> 的不可避免的使用。有人说C++是一门难学的语言。很少听到 C# 的说法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T07:41:02.933

您说 CLR 不需要更改，但考虑到在编译的程序集中没有标准的方式来表达这种“常量”——而且这些程序集可能不会被 C# 代码使用。这不是你可以*只*为 C# 做的事情 - 你必须为所有 .NET 语言做这件事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:41:05.663

正如我所相信的那样，`const`与 C++ 相比，C# 中的含义不同。

在 C# 中，您可以使用`readonly`关键字从`const`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T14:56:23.593

我曾经对以下情况感到惊讶：

```
class Vector
{
    private double[] m_data;
    public int Dimension {get;set;}

    public double this[int i]
    {
        get {return m_data[i];}
        set {m_data[i] = value;}
    }

    public Vector(int n)
    {
        this.Dimension = n;
        this.m_data = new double(n);
    }

    public static Vector Zero(int n)
    {
        Vector v = new Vector(n);
        for (int i = 0; i < n; i++)
        {
            v[i] = 0.0;
        }

        return v;
     }

    public static readonly Vector Zero3 = Zero(3);
} 
```

你 Vector.Zero3 是只读的，你不能分配给它，你仍然可以访问它的组件，然后发生以下愚蠢的事情：

```
Vector a = Vector.Zero3;
a[0]     = 2.87; 
```

现在，由于只是*对*Vector.Vector3 的引用，因此后者也有 Vector.Vector3[0] == 2.87！

有一次掉进这个坑后，我发明了一个很简单的hack，虽然不优雅，但实现了它的功能。

即，在我想生成静态只读“常量”的类中，我引入了一个布尔标志：

```
class Vector
{
    private double[] m_data;
    public int Dimension {get;set;}
    private bool m_bIsConstant = false;
    ...

    public double this[int i]
    {
        get {return m_data[i];}
        set 
        {
           if (!m_bIsConstant)
           {
                m_data[i] = value;
           }
        }
    }
    ...
    public static Vector Zero(int n)
    {
        Vector v = new Vector(n);
        for (int i = 0; i < n; i++)
        {
            v[i] = 0.0;
        }

        v.m_bIsConstant = true;
        return v;
     }
     ...
} 
```

这个 hack 保证你的静态只读变量永远不会被修改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T07:58:38.780

在您提出 const-class 的情况下，您说：

> 这样的类只能在构造时填充，所以我们需要一个构造函数来接收一个 int

但是无论如何，通过将所有属性设为只读，您已经实现了您所说的。

我不能代表 C# 语言设计者说话，但也许没有`const`应用于许多其他构造的原因是因为添加它根本不值得付出努力，您可以通过其他方式解决这个问题（如上所述和其他答案/评论）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T08:00:09.343

我无法从您的问题中看出，`const`关键字的这种重载将如何特别有益。

您的第一个示例可以合法地重写为

```
public class NumberContainer
{
    private readonly int number;

    public NumberContainer(int number)
    {
        this.number = number;
    }

    public int Number
    {
        get { return number; }
    }
} 
```

也许，如果编译器无法辨别此类的不变性（我不知道），那么某些属性可能有用吗？

在你的第二个例子中，我不明白你在说什么。如果一个函数返回一个常量值，那么它可以被一个常量字段替换。

# eclipse - 安装 SNA 包时出错

> ID：10101765
> 
> 赞同：-1
> 
> 时间：2012-04-11T07:36:26.823
> 
> 标签：eclipse, r

我一直在尝试安装 SNA 软件包，但总是出现下一个错误，

```
> install.packages("sna")
Installing package(s) into ‘/home/rvaca/R/i486-pc-linux-gnu-library/2.14’
(as ‘lib’ is unspecified)
--- Please select a CRAN mirror for use in this session ---
Loading Tcl/Tk interface ... done
trying URL 'http://cran.cnr.Berkeley.edu/src/contrib/sna_2.2-0.tar.gz'
Content type 'application/x-gzip' length 273329 bytes (266 Kb)
opened URL
==================================================
downloaded 266 Kb

The downloaded packages are in
    ‘/tmp/Rtmp7iF3Qz/downloaded_packages’
> library(sna)
starting httpd help server ... done
Error in attr(helpObj, "call") <- this.call : 
  attempt to set an attribute on NULL
Error: package/namespace load failed for ‘sna’
> library("sna")
Error in attr(helpObj, "call") <- this.call : 
  attempt to set an attribute on NULL
Error: package/namespace load failed for ‘sna’
> library('sna')
Error in attr(helpObj, "call") <- this.call : 
  attempt to set an attribute on NULL
Error: package/namespace load failed for ‘sna’ 
```

发生了什么？提前致谢

放假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:10:19.020

使用or加载`sna`包时，该函数（仍然）被调用。此函数现在是基本包中的已失效函数之一（请参阅 参考资料），但这不是重点。`library(sna)``require(sna)``.First.lib()``?.First.lib`

查看 sna 的源文件，`.First.lib()`在文件 zzz.R 中定义并包含该行

```
ehelp <- help(package="sna")$info[[1]]. 
```

如果不是，这将无法正常`getOption("help_type")`工作`"text"`。因此，您可以在加载包之前尝试设置此选项以查看是否有效。

```
options(help_type="text")
library(sna) 
```

这仍然会产生错误吗？

**编辑**

由于上面仍然给出错误，并且由于包具有正在逐步淘汰的属性（即，没有命名空间和 using `.First.lib()`），我建议联系包的维护者（也许参考 SO 上的这个问题）：

```
packageDescription("sna")$Maintainer 
```

同样，我怀疑问题在于在函数中创建对象`ehelp`，`.First.lib()`因为没有指定包命名空间，所以调用该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:52:14.487

好的，这是 sessionInfo() 的结果，（我忘了评论我在 Eclipse 中运行它）

```
> sessionInfo()
R version 2.14.2 (2012-02-29)
Platform: i486-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8          LC_NUMERIC=C                 
 [3] LC_TIME=en_US.UTF-8           LC_COLLATE=en_US.UTF-8       
 [5] LC_MONETARY=en_US.UTF-8       LC_MESSAGES=en_US.UTF-8      
 [7] LC_PAPER=en_US.UTF-8          LC_NAME=en_US.UTF-8          
 [9] LC_ADDRESS=en_US.UTF-8        LC_TELEPHONE=en_US.UTF-8     
[11] LC_MEASUREMENT=en_US.UTF-8    LC_IDENTIFICATION=en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] Cairo_1.5-1    igraph_0.5.5-4 rj_1.0.3-7    

loaded via a namespace (and not attached):
[1] rj.gd_1.0.3-3 sna_2.2-0     tools_2.14.2 
```

# java - 有没有一种简单的方法可以更改 ActioMode“取消”按钮的文本？

> ID：10101770
> 
> 赞同：0
> 
> 时间：2012-04-11T07:36:49.143
> 
> 标签：java, android, android-actionbar

我正在使用 ActionMode 来显示 ListView 的上下文函数列表。我有 ActionMode 栏工作，但默认情况下，它会在左上方放置一个“取消”按钮。对我来说，这对用户来说有点误导。我不希望他们认为这个按钮会撤消操作。

有没有一种简单的方法可以将此按钮文本更改为“完成”或“完成”之类的内容？我查看了源代码，发现这似乎与主题样式有关。我希望不必修改主题，但如果需要可以。

我的目标是 3.2 或更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:39:10.293

我有理由确定这只能使用主题进行调整。当然，没有任何方法`ActionBar`可以`ActionMode`进行这种改变。人们*希望*它至少可以通过一个主题来实现——我没有尝试筛选所有主题内容来找到要更改的实际值，因此它可能根本无法更改（这很糟糕）。

# android - Android parcelable and Intent: redBundle: bad magic number

> ID：10101771
> 
> 赞同：1
> 
> 时间：2012-04-11T07:36:49.680
> 
> 标签：android, android-intent, bundle, parcelable

我有一个对象数组列表，我正在使用此示例将此 arrayList 从一个活动获取到另一个活动：[http ://androidideasblog.blogspot.in/2010/02/passing-list-of-objects-between.html](http://androidideasblog.blogspot.in/2010/02/passing-list-of-objects-between.html)

这是我的代码的一部分：

活动一：

```
Intent myIntent = new Intent(context, JournalArticles.class);

         Bundle b = new Bundle();
         b.putParcelableArrayList("articles", articles);

         myIntent.putExtras(b);
         startActivityForResult(myIntent,0); 
```

活动二：

```
Bundle b = this.getIntent().getExtras();
ArrayList<Article> articles = b.getParcelableArrayList("articles"); 
```

但是在这里我收到一个错误，这是日志：

```
04-11 13:35:03.548: D/AndroidRuntime(2686): Shutting down VM
04-11 13:35:03.548: W/dalvikvm(2686): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
04-11 13:35:03.598: E/AndroidRuntime(2686): FATAL EXCEPTION: main
04-11 13:35:03.598: E/AndroidRuntime(2686): java.lang.RuntimeException: Unable to start activity ComponentInfo{milos.mdpi/milos.mdpi.JournalArticles}: java.lang.RuntimeException: Parcel android.os.Parcel@4055e378: Unmarshalling unknown type code 6357106 at offset 196
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.app.ActivityThread.access$1500(ActivityThread.java:135)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Looper.loop(Looper.java:150)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.app.ActivityThread.main(ActivityThread.java:4389)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at java.lang.reflect.Method.invokeNative(Native Method)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at java.lang.reflect.Method.invoke(Method.java:507)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at dalvik.system.NativeStart.main(Native Method)
04-11 13:35:03.598: E/AndroidRuntime(2686): Caused by: java.lang.RuntimeException: Parcel android.os.Parcel@4055e378: Unmarshalling unknown type code 6357106 at offset 196
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Parcel.readValue(Parcel.java:1913)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Parcel.readListInternal(Parcel.java:2092)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Parcel.readArrayList(Parcel.java:1536)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Parcel.readValue(Parcel.java:1867)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Parcel.readMapInternal(Parcel.java:2083)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Bundle.unparcel(Bundle.java:208)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.os.Bundle.getParcelableArrayList(Bundle.java:1144)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at milos.mdpi.JournalArticles.onCreate(JournalArticles.java:138)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
04-11 13:35:03.598: E/AndroidRuntime(2686):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
04-11 13:35:03.598: E/AndroidRuntime(2686):     ... 11 more 
```

这是我的文章类：

```
public class Article implements Parcelable 
```

{

```
private Integer _ArticleID;
public Integer getArticleID(){
    return _ArticleID;
}
public void setArticleID(Integer value){
    _ArticleID = value;
}
private Integer _JournalID;
public Integer getJournalID(){
    return _JournalID;
}
public void setJournalID(Integer value){
    _JournalID = value;
}
private Integer _Volume;
public Integer getVolume(){
    return _Volume;
}
public void setVolume(Integer value){
    _Volume = value;
}
private Integer _Issue;
public Integer getIssue(){
    return _Issue;
}
public void setIssue(Integer value){
    _Issue = value;
}
private Integer _Firstpage;
public Integer getFirstpage(){
    return _Firstpage;
}
public void setFirstpage(Integer value){
    _Firstpage = value;
}
private Integer _Lastpage;
public Integer getLastpage(){
    return _Lastpage;
}
public void setLastpage(Integer value){
    _Lastpage = value;
}
private String _PublishDate;
public String getPublishDate(){
    return _PublishDate;
}
public void setPublishDate(String value){
    _PublishDate = value;
}
private String _Title;
public String getTitle(){
    return _Title;
}
public void setTitle(String value){
    _Title = value;
}
private String _Abstract;
public String getAbstract(){
    return _Abstract;
}
public void setAbstract(String value){
    _Abstract = value;
}
private String _Keywords;
public String getKeywords(){
    return _Keywords;
}
public void setKeywords(String value){
    _Keywords = value;
}

public int describeContents() {
return 0;
}

public void writeToParcel(Parcel dest, int flags) {

    dest.writeInt(_ArticleID);
    dest.writeInt(_JournalID);
    dest.writeInt(_Volume);
    dest.writeInt(_Issue);
    dest.writeInt(_Firstpage);
    dest.writeInt(_Lastpage);
    dest.writeString(_PublishDate);
    dest.writeString(_Title);
    dest.writeString(_Abstract);
    dest.writeString(_Keywords);
}

public static final Parcelable.Creator<Article> CREATOR = 
        new Parcelable.Creator<Article>() { 
        public Article createFromParcel(Parcel in) { 
            Article article = new Article();
            article._Abstract = in.readString();
            article._ArticleID = in.readInt();
            article._Firstpage = in.readInt();
            article._Issue = in.readInt();
            article._JournalID = in.readInt();
            article._Keywords = in.readString();
            article._Lastpage = in.readInt();
            article._PublishDate = in.readString();
            article._Title = in.readString();
            article._Volume = in.readInt();      

        return article;
        }

        public Article[] newArray(int size) {
        return new Article[size];
        }
        }; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:41:28.243

确保您的物品`Article`是可包裹的。如果没有，则实现 Article 的 parcelable 接口，然后尝试。ArrayList 是可打包的，但您放入其中的对象也需要可打包才能正常工作。

**编辑**

将您的代码更改为此并尝试。你的写作顺序和阅读顺序不同。我认为这就是导致您出现问题的原因。

```
article._ArticleID = in.readInt();
article._JournalID = in.readInt();
article._Volume = in.readInt();
article._Issue = in.readInt();
article._Firstpage = in.readInt();
article._Lastpage = in.readInt();
article._PublishDate = in.readString();
article._Title = in.readString();
article._Abstract = in.readString();
article._Keywords = in.readString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:51:28.500

浏览这个[博客](http://prasanta-paul.blogspot.in/2010/06/android-parcelable-example.html)，他解释了在两个活动之间传递数组列表

# crontab - crontab 不能正常工作？

> ID：10101774
> 
> 赞同：0
> 
> 时间：2012-04-11T07:37:05.010
> 
> 标签：crontab

我有这个 crontab，

```
* * * * * php /etc/raddb/overloaded.php 
```

但它运行不正常，这意味着它不会每分钟都运行，但是当我手动将其输入终端（php /etc/raddb/overloaded.php）时，脚本可以工作

谢谢你们

PS：我使用的是centos 32位。我也使用“crontab -e”插入和保存 crontab，但看起来 crontab 没有运行？我输入了“crontab -e”，但出现了 (* * * * * php /etc/raddb/overloaded.php)。问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:46:44.317

crontab 语法是正确的。请检查您的 cron 守护程序是否正在运行，您可以检查日志，也许它包含一些有用的信息。我认为最可能的问题是 cron 有自己的环境设置。尝试使用完整路径运行 php，例如

```
/sbin/php 
```

或您拥有的路径

# c# - 自动处理对象

> ID：10101778
> 
> 赞同：5
> 
> 时间：2012-04-11T07:37:14.447
> 
> 标签：c#, .net, dispose

例如我有一个方法

```
SomeMethod(Graphics g)
{
    ...
} 
```

如果我以某种方式调用此方法

```
SomeMethod(new Graphics()) 
```

我的图形对象会自动处理还是应该`g.Dispose()` 在方法结束时手动调用？

```
SomeMethod(Graphics g)
{
    ...
    g.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T07:39:42.317

一次性对象不会被自动处理（它们最接近的方法是实现一个`Dispose`在必要时调用的终结器）。您必须通过调用`Dispose()`或将其与`using`块一起使用来手动执行此操作。

如果你想自动处理对象，你可以这样做：

```
using (var g = new Graphics()) {
    SomeMethod(g);
} 
```

using 块确保`Dispose()`在块结束后立即自动调用该方法（因此在这种情况下，after`SomeMethod`返回或抛出异常）。

注意：如果可能，您应该将对象放置在您创建它的位置附近。接收一个有效的对象并在方法中处理它可能会导致混淆。

`Dispose()`当调用终结器时，图形和可能大多数（如果不是全部）实现此接口的 BCL 类也将调用。这是正确实施的一部分`IDisposable`。但是，您永远不知道何时调用终结器，如果您需要确定性地处理您的对象，则不应依赖此实现细节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T07:50:51.480

使用一次性物品的正确方法是将它们包装在`using`块中：

```
using (var g = new Graphics()) {
  SomeMethod(g);
} 
```

当执行离开`using`块时，`Graphics`即使抛出异常，也会正确处理。

但是，如果您不使用`using`块显式或隐式处理对象，则在垃圾收集时对象**仍将被处理**（假设终结器正确调用了`Dispose`它应该的）。当这种情况发生时不在您的控制范围内，这就是为什么您应该确保在不再需要一次性对象以释放对象占用的资源时立即正确处置它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T07:41:12.080

您可能应该使用 using 语句

```
using (var graphicsObject = new Graphics()) {
    SomeMethod(graphicsObject);
} 
```

即使发生异常，该对象也会在 using 语句的末尾自动释放。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T07:47:30.257

检查[图形类](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)

```
public sealed class Graphics : MarshalByRefObject, 
    IDeviceContext, IDisposable 
```

它实现了`IDisposable`接口，因此如果您将`using`语句与 Graphics 对象一起使用，那么它将自动释放。

在你的例子中

```
SomeMethod(Graphics g)
        {
        ...
        g.Dispose();
        } 
```

它将使用`g.Dispose`, 但最佳做法是`using`声明。

例子：

```
using (Graphics g = this.CreateGraphics())
{
//Do some graphics operation.
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T09:10:55.343

在您的示例中，您不应该处理作为参数提供给您的对象。这是不可取的，因为该对象可以在您的方法之外使用。实用程序对象的处置应该（通常）以您创建它的相同方法进行。类范围对象或状态对象的例外。

与其他答案一样，用于`using`创建和处置对象。这仅在使用一些有价值的资源（如数据库连接）的对象上才是真正需要的。话虽如此，如果对象实现它，您应该始终调用`Dispose()`（显式或通过`using`），因为这意味着它使用非托管或大量资源。

您不调用`Dispose`（无论哪种方式）的所有 .NET Framework 对象**最终都**将由垃圾收集器自动处理。接口的正确实现`IDisposable`应该具有调用`Dispose`. 这是为了确保有价值的资源不会因为糟糕的代码而丢失。你的资源会在很久以后才被释放，但它们会，这很重要。这就是 .NET 中所有一次性类的实现方式以及所有类应该如何实现的方式`IDisposable`。

您的代码应如下所示：

```
using(Graphics g = new Graphics())
{
    SomeMethod(g)
    {
        ...
    }
} 
```

检查[此](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)Microsoft 对`IDisposable.Dispose`方法的建议。

# vb.net - SSRS 报告表达式 - null 被视为零？

> ID：10101784
> 
> 赞同：0
> 
> 时间：2012-04-11T07:37:57.090
> 
> 标签：vb.net, reporting-services, null, ssrs-2008

考虑这个 SSRS 值表达式：

```
=IIF(First(Fields!MyCol.Value, "MyDataSet")=0, "yes", "no") 
```

MyCol 是一个 Nullable 列。我希望仅在 MyCol 等于 0 时输出“yes”。当 MyCol 为 0 时，上面的代码正确地计算为“yes”。但是，当 MyCol 为 Nothing（即 SQL Server 中的 NULL）时，它也计算为“yes”。这是预期的行为吗？

我不得不求助于以下更长的表达式来获得所需的结果：

```
=IIF(Not(First(Fields!MyCol.Value, "MyDataSet") is Nothing) And First(Fields!MyCol.Value, "MyDataSet")=0, "yes", "no") 
```

是否有更短的版本也可以使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:23:59.130

看起来这只是由于 VB.NET 的工作原理，而不是由 SSRS 所做的任何事情引起的。

例如，这是一些直接的 VB.NET 代码：

```
Dim obj As Object = Nothing

If (obj = 0) Then
    MessageBox.Show("obj = 0 : true")
End If

If (obj Is Nothing) Then
    MessageBox.Show("Obj is nothing")
End If 
```

这会在运行时显示两条消息。

# regex - 纯英文特殊字符的正则表达式

> ID：10101787
> 
> 赞同：-2
> 
> 时间：2012-04-11T07:38:34.493
> 
> 标签：regex, regular-language

我需要一个正则表达式来匹配`a-zA-Z0-9`空格和特殊字符，但只包括英文空格/特殊字符，而不包括法语或西班牙语等其他语言的字符。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:47:57.353

编写匹配英语但不匹配法语、西班牙语和其他语言的正则表达式是不可能/不切实际的。

如果您真的想测试一个单词是否来自英语，您可以编写一些代码在英语词典中查找它。那应该很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T11:55:48.613

根据正则表达式引擎，您可以使用：

```
^\p{IsBasicLatin}*$ 
```

只允许[Basic Latin 字符集中](http://jrgraphix.net/r/Unicode/0020-007F)的字符，其中包括标准英语语言标点符号（即可以直接在美国键盘上输入的字符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T06:31:12.950

我正在寻找一个匹配常规英文文本的正则表达式（并且可能避免 html/xml/url 等）并登陆此页面。我认为提问者只是想避免其中包含语音信息的字符，但允许使用英文标点符号。最后我自己看着键盘写了一些东西

[A-Za-z\d,.?;:\'"!$%() ]*

我并不声称这对每个人都有效，但对我来说已经足够了。

# php - 发送多维对象->最后一部分丢失

> ID：10101790
> 
> 赞同：0
> 
> 时间：2012-04-11T07:38:46.863
> 
> 标签：php, jquery

我正在发送一个带有 ajax 发布请求的多维对象，但有时对象的最后一部分会丢失？您可以发送多少数据是否有某种限制？

## --------

## 更新

`data.accounts`在 ajax 发布之前计算孩子时，数字是 221，而`data.accounts`在成功处理程序中计算时，数字仍然是 221

## 发送的数据最大10kb

* * *

当我在使用 ajax 发送对象之前执行此操作时，所有数据都被表示

```
var arr = [];
for(var key in obj){
    arr[arr.length] = key+' = '+obj[key];
}

alert(arr.join('\n')); 
```

但是在后端执行此操作时，数据的最后一部分会丢失

```
print_r($data); 
```

数据结构（有超过 200 个孩子，`data.accounts`但只收到 198 个）

```
 Array
    (
        [account_id_] => 0
        [name] => 1
        [type] => 2
        [type_pl] => Drift
        [type_b] => Status
        [type_p] => 
        [type_h] => Tekst
        [type_t] => Sum
        [att_sumfrom] => 4
        [vatcode] => 3
        [accounts] => Array
            (
                [0] => Array
                    (
                        [account_id_] => 1
                        [name] => OMS�TNING
                        [type] => 3
                        [att_sumfrom] => 
                        [vatcode] => 
                    )

                [1] => Array
                    (
                        [account_id_] => 1000
                        [name] => Varesalg
                        [type] => 0
                        [att_sumfrom] => 
                        [vatcode] => S25
                    )

                [2] => Array
                    (
                        [account_id_] => 1200
                        [name] => Udf�rt arbejde
                        [type] => 0
                        [att_sumfrom] => 
                        [vatcode] => S25
                    )
....... 
```

发送数据

```
this.send = function(){
    var jqxhr = $.ajax({
            url : this.url,
            data : this.data,
            timeout : this.no_timeout ? 0:this.timeout,
            cache : this.cache,
            dataType : this.dataType,
            type : this.type,
            global : this.global
        }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:02:04.097

每个请求可以发送多少数据是有限制的，具体取决于您使用的方法。如果您使用`POST`PHP 作为后端，请查看 PHP.ini[`memory_limit`](http://php.net/manual/en/ini.core.php#ini.sect.resource-limits)和[`post_max_size`](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)，其中前者是脚本内存占用，后者是通过 post 请求可以发送多少数据。默认值分别为 128M 和 8M。

如果您发送的数据过多，服务器不允许处理，数据将按照说明进行剪切。

## 更新

没有所有相关代码就很难调试。在打印阵列之前，您是否在后端做任何其他事情，或者您只是在做`print_r($_POST['data'])`？因为如果你不做任何其他事情，它听起来仍然像是服务器上的内存设置。

**轶事**

我记得有一个项目，我有大约 400 行数据，每行有 7 列（大量文本），我通过 AJAX 对象发送，最后一行中的大约 70 行被删掉了。加倍后，[`post_max_size`](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)所有数据都被正确发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:01:57.843

这可能与您的问题有关，也可能与您的问题无关，但是您应该使用“push”函数，而不是根据数组长度附加数组项，它将一个项添加到数组的末尾：

```
for(var key in obj){
    arr.push(key+' = '+obj[key]);
} 
```

# embedded - 嵌入式设备的 SSL 算法

> ID：10101794
> 
> 赞同：4
> 
> 时间：2012-04-11T07:39:03.887
> 
> 标签：embedded, openssl

我在带有慢速 ARM-CPU 的嵌入式设备上有一个 SSL 客户端。

我正在尝试通过缩短密码列表来加快 SSL 连接设置。通过添加 !DH 禁用 DiffieHellman 进行了改进。

我想知道是否有其他算法可以禁用以提高速度。当然没有大的安全权衡。

另一种可能性是切换到不同的 SSL 库（gnutls、matrixssl、yaSSL 等）。您对其他 SSL 库的体验如何，尤其是在嵌入式设备上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:42:54.953

CyaSSL 在嵌入式设备方面有着良好的记录，并且已多次用于支持 ARM 的嵌入式设备。

至于加快与 CyaSSL 的连接，您可以使用快速数学 ( **--enable-fastmath** ) 加快公钥操作，这将利用汇编优化来加快握手时间。您还可以切换到其他密码，例如**HC-128**，这是 CyaSSL 最快的密码（[流密码](http://yassl.com/yaSSL/Blog/Entries/2010/8/25_The_Benefit_of_Stream_Ciphers.html)）。

CyaSSL 开箱即用也非常便携。[产品页面](http://www.yassl.com/yaSSL/Products-cyassl.html)声明支持以下操作系统：

> Win32/64、Linux、Mac OS X、Solaris、ThreadX、VxWorks、FreeBSD、NetBSD、OpenBSD、嵌入式 Linux、Haiku、OpenWRT、iPhone (iOS)、Android、Nintendo Wii 和 Gamecube 通过 DevKitPro、QNX、MontaVista、OpenCL、NonStop , TRON/ITRON/µITRON, Micrium 的 µC/OS, FreeRTOS, Freescale MQX, Nucleus

它的占用空间也非常小（<100kB），这是另一个优点。

# c# - c#中sql查询列中的无限小数值

> ID：10101797
> 
> 赞同：5
> 
> 时间：2012-04-11T07:39:25.280
> 
> 标签：c#, sql, oracle, decimal, type-conversion

我在尝试在 NET (c#) 中获取这个简单 sql 查询的结果时遇到了一个问题：

```
select 1/3 as col from dual 
```

`OracleDataReader.GetValue(i)`抛出异常：

> ```
> Arithmetic operation resulted in an overflow.
> at Oracle.DataAccess.Types.DecimalConv.GetDecimal(IntPtr numCtx)
> at Oracle.DataAccess.Client.OracleDataReader.GetDecimal(Int32 i)
> at Oracle.DataAccess.Client.OracleDataReader.GetValue(Int32 i) 
> ```

我发现当数字精度超过 28 位时会发生此错误，因此会导致错误：

```
select round(1/3,29) as col from dual 
```

但这不会

```
select round(1/3,28) as col from dual 
```

尝试将 c# 中的列值视为 Double 得到错误“无效转换”

除了无处不在的数字列四舍五入之外，有谁知道避免这种情况的任何方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:11:19.943

由于数据类型是十进制，它必须是精确的。不可能以十进制类型存储 1/3 无限小数。一般来说[，如果转换结果不能表示为 Decimal ，则从 Single 或 Double 到 Decimal 的转换会引发 OverflowException](http://msdn.microsoft.com/en-us/library/system.decimal%28v=vs.80%29.aspx)。因此，我需要将此值读取为双精度值，或者确保它是正确的小数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T11:20:30.973

您应该先检查以下链接，可能需要添加补丁。

[http://www.chriscolotti.us/vmware/gotcha-upgrading-vcenter-4-1-to-5-0-with-oracle-11gr2-may-need-client-patch/](http://www.chriscolotti.us/vmware/gotcha-upgrading-vcenter-4-1-to-5-0-with-oracle-11gr2-may-need-client-patch/)

# java - 如何使用退出按钮销毁应用程序及其所有活动

> ID：10101800
> 
> 赞同：1
> 
> 时间：2012-04-11T07:39:46.900
> 
> 标签：java, android

单击退出按钮时，我想销毁整个应用程序....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:41:28.437

*Android*中没有**退出**按钮的概念。只需调用你的活动来摧毁它们。*`finish();`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:20:55.893

最直接的方法是

```
finish();
System.exit(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:17:24.250

尝试使用此代码关闭您的应用程序及其所有活动

```
finish();
        Intent intent = new Intent(Intent.ACTION_MAIN); 
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        intent.addCategory(Intent.CATEGORY_HOME); 
        startActivity(intent); 
```

[关闭应用程序并在 Android 上启动主屏幕](https://stackoverflow.com/questions/2042222/close-application)*

# sql - Oracle如何选择表中最后插入的记录

> ID：10101809
> 
> 赞同：2
> 
> 时间：2012-04-11T07:40:40.213
> 
> 标签：sql, oracle, version, range, date-range

我知道有 operator `VERSIONS BETWEEN TIMESTAMP MINVALUE AND MAXVALUE`，但它不正确。询问

```
SELECT VERSIONS_ENDTIME, VERSIONS_OPERATION FROM mytable VERSIONS BETWEEN TIMESTAMP MINVALUE AND MAXVALUE 
```

返回空字段：`VERSIONS_ENDTIME`和`VERSIONS_OPERATION`。

![在此处输入图像描述](../Images/a6a6412158cf649b11a1bc1cb28fa890.png)

**也许有另一种方法可以选择上周表中最后插入的记录？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:15:55.807

您可以尝试使用[Flashback Queries](http://psoug.org/reference/flash_query.html)，但这种方法对于生产系统是不可行的。这种方法应该用于恢复或管理查询。

在正常情况下，你应该有一些其他的方法来检测何时插入了一行，例如你可以`date`在你的表中添加一列并`SYSDATE`在每个`insert`.

# java - 生产者和消费者线程挂起

> ID：10101812
> 
> 赞同：1
> 
> 时间：2012-04-11T07:40:54.823
> 
> 标签：java, multithreading, command-line

所以这是我第一次涉足线程，到目前为止它让我发疯。我的问题似乎是某种导致我的消费者线程挂起的同步错误。我查看了其他代码以及几乎所有我能找到的东西，但我找不到我的错误是什么。在 Eclipse 中执行的代码和通过命令行中的 javac 执行的代码之间似乎也存在差异。

意图 - 使用有界缓冲区（具有 1000 个插槽）创建和消耗 1,000,000 个双精度数。仅使用通知和等待。

问题 - 在 Eclipse 中，消费者线程偶尔会挂起大约 940,000 次迭代，但其他时候会完成。在命令行中，消费者线程总是挂起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:03:35.210

`Wait()`方法可以以虚假方式中断（即不通知），请参阅[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29)。因此，您需要替换所有`if (condition) { wait(); }`to `while (condition) { wait(); }`。也许这就是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:26:28.580

你搞砸了`addPlace`and `getPlace`。为了清楚起见，我将它们重命名`nextWrite`为`nextRead`. 所以这是你的 add()

```
if ((nextWrite + 1) == nextRead) {
  wait();
}
buff[nextWrite] = someRandomNumber;
nextWrite = (nextWrite + 1) % 1000;
notify(); 
```

这是你的 get()

```
if (nextRead == nextWrite) {
  wait();
} 
```

逻辑错误很明显：since `nextWrite`is in the range [0; 999]，`nextWrite + 1`将在 [1; 1000]，但`nextRead`只能在[0；999]。每次 `nextWrite`is`999`或`nextRead`is `0`，`wait`调用**将永远不会被执行**，并且 Producer*可能会覆盖*尚未读取的数据。

生产者可能会在某个时候停止覆盖，但实际上在一个虚拟的多核机器上，其中一个核心比另一个快一百万倍，生产者将完成其`run()`并将终止，因为它仅在`nextWrite + 1 == nextRead`.

在我们想象的机器上，Consumer 将立即挂起（因此等于`nextRead`，Producer 上次设置的值，因为它运行恰好一百万次迭代，并且您的缓冲区计数器定义为），因为在那一刻它会收到通知Producer，但由于它已终止，因此永远不会收到任何通知。`0``nextWrite``0``i % 1000``wait()`

[这是您的代码的改进](http://pastebin.com/b6NC7dbz)（和工作）版本

**编辑** 我只是忘记了（微不足道的）解决方案：

```
public synchronized void add(double randomNumber) throws InterruptedException {
    if((nextWrite + 1) % 1000 == nextRead)
      wait();
    buff[nextWrite] = randomNumber;
    nextWrite = (nextWrite+1)%1000;
    notify();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:03:46.563

几点：

*   在 Java 中，通常第一个类名 char 必须是大写的：所以调用你的class`Producer`和.`Consumer``Buffer`
*   当你说你在 Eclipse / 命令行上尝试这个时，这意味着你在 Eclipse 中运行生产者，在命令行中运行消费者，反之亦然？如果这样它不能工作，`buffer`则不会在两个进程之间共享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:02:26.127

好吧，我想我在你的程序中看到了逻辑问题。在标准的 Produce-Consume 例程中，您可以随心所欲地生产，但只有在生产了某些东西时才能消费。

在你的实现中，你生产，等到它的消费，然后再生产。

我认为这不是你打算做的。

从 add 方法中删除 wait() 块，并从 get() 方法中删除 notify()。另外，我不认为线程 join() 在 main 中是必需的。

~~编辑：你的 get() 方法总是进入 wait()。即使 Producer 已经完成了它的工作。想想看。如果 Producer 已经完成了它的工作，你不会得到 notify()。~~

# android - 如何通过代码使 SoundPool 静音？

> ID：10101818
> 
> 赞同：3
> 
> 时间：2012-04-11T07:41:22.017
> 
> 标签：android, soundpool, mute

我正在尝试在网上搜索以使我在程序中声明的 Soundpool 静音.. 有任何 android 代码吗？例如，我使用 If-else 语句来确定情况，是否应将声音池静音......我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:30:48.080

`onPause()`当和`onResume()`被调用时，我在活动中做类似的事情。要暂停当前播放的所有流，然后继续播放它们，您可以分别调用`autoPause()`和`autoRestore()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-15T06:39:20.730

根据[文档，您可以使用 SoundPool 对象的](http://developer.android.com/reference/android/media/SoundPool.html)[setVolume](http://developer.android.com/reference/android/media/SoundPool.html#setVolume%28int,%20float,%20float%29)方法使特定的 streamID 静音，如下所示：

```
if (someBoolean)//insert your check here
    soundpool.setVolume(streamID, 0f, 0f); //0f sets volume to zero 
```

（soundpool 是一个 SoundPool 对象，streamID 是 .play 方法的返回值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:43:19.977

静音意味着听不到声音，但它仍在播放。您可以尝试静音声音流吗？

# c# - 如何在asp.net页面中刷新验证码图像

> ID：10101821
> 
> 赞同：0
> 
> 时间：2012-04-11T07:41:28.953
> 
> 标签：c#, asp.net, captcha

我用[那篇](http://www.codeproject.com/Articles/169371/Captcha-Image-using-C-in-ASP-NET?fid=1615350&df=90&mpp=25&noise=3&prof=False&sort=Position&view=Quick)关于代码项目的文章来创建自己的验证码图像，有没有办法让图像刷新？我注意到在 IE 9 上，图像在服务器验证期间不会刷新，但在 chrome 上，图像会刷新。很奇怪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:46:54.473

这是因为浏览器缓存

每次动态添加一个随机 QueryString 到图像 url 。

在文章链接中，我可以看到 Image1 在 aspx 本身中给出了 ImageURL。

您可以更改代码并使其成为服务器端以在所有刷新时附加动态查询字符串

例如

```
Image1.ImageUrl = "~/CImage.aspx?random=" + DateTime.Now.Ticks.ToString(); 
```

我在图像方面遇到了类似的问题，我尝试禁用缓存和其他技巧，但它们并非在所有浏览器上运行，也没有保证缓存始终禁用，而这个技巧对我来说很好，因为每次你的图像发送新请求（不同图片网址）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:46:29.910

这是由于浏览器缓存策略造成的，尝试让浏览器不缓存图像[w3c](http://www.w3schools.com/tags/att_meta_http_equiv.asp) 不确定它是否适用于 ie，但值得尝试。

# php - php set_include_path 错误，zend

> ID：10101829
> 
> 赞同：1
> 
> 时间：2012-04-11T07:41:47.273
> 
> 标签：php, zend-framework

看代码

```
echo get_include_path().'<br/>';
echo set_include_path( '/home/testserver/public_html/development/library' ); 
```

我有两个仅包含上述代码的 test.php 文件。一个在主服务器上，一个在主服务器上的子域上运行正常，但在子域上它没有运行并给出错误致命错误：允许的内存大小为 134217728 字节用尽（试图分配 351121536 字节）在第 0 行的未知

如果我打印使用 memory_get_usage() 占用的内存，那么它的打印大小在 3-5 MB 之间。

我的 php.ini 设置是。memory_limit = 32M

可能是什么原因，有什么想法吗？

请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:24:49.563

更改包含路径不会导致系统尝试分配超过 133 Mb 的内存，这是一个非常大的默认分配。您的系统需要超过 350Mb 意味着您的系统有一些非常独特的地方。

> 仅包含上述代码...如果我打印使用 memory_get_usage() 占用的内存

那么您显示的代码**不是**文件中*唯一*的代码吗？

把它放在一边——*阅读错误信息*。它发生在未知的第 0 行 - 所以 PHP 甚至还没有弄清楚它需要处理什么脚本 - 你的 PHP 配置中有一些非常损坏的东西 - PHP 是通过 CGI 调用的吗？mod_php？快速 CGI？看起来它正在尝试加载错误的扩展/解析不是 CGI 数据的东西。

# c# - 表达式中的逆变

> ID：10101834
> 
> 赞同：8
> 
> 时间：2012-04-11T07:42:21.170
> 
> 标签：c#, expression, expression-trees, covariance, contravariance

我正在尝试创建一个通用操作代表

```
 delegate void ActionPredicate<in T1, in T2>(T1 t1, T2 t2); 
```

和

```
public static ActionPredicate<T,string> GetSetterAction<T>(string fieldName) 
    {

        ParameterExpression targetExpr = Expression.Parameter(typeof(T), "Target");
        MemberExpression fieldExpr = Expression.Property(targetExpr, fieldName);
        ParameterExpression valueExpr = Expression.Parameter(typeof(string), "value");

        MethodCallExpression convertExpr = Expression.Call(typeof(Convert), "ChangeType", null, valueExpr, Expression.Constant(fieldExpr.Type));

        UnaryExpression valueCast = Expression.Convert(convertExpr, fieldExpr.Type);
        BinaryExpression assignExpr = Expression.Assign(fieldExpr, valueCast);
        var result = Expression.Lambda<ActionPredicate<T, string>>(assignExpr, targetExpr, valueExpr);
        return result.Compile();
    } 
```

这是我的来电者

```
 ActionPredicate<busBase, string> act = DelegateGenerator.GetSetterAction<busPerson>("FirstName"); 
```

这是业务对象

```
 public abstract class busBase 
{

}
public class busPerson : busBase
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }

    public string GetFullName()
    {
        return string.Format("{0} {1}", FirstName, LastName);
    }
} 
```

这是我在编译过程中得到的错误

```
Cannot implicitly convert type 'BusinessObjects.ActionPredicate<BusinessObjects.busPerson,string>' to 'BusinessObjects.ActionPredicate<BusinessObjects.busBase,string>'. An explicit conversion exists (are you missing a cast?) 
```

我的 GetSetterAction 正在返回 ActionPerdicate ，因为这里 T 是 busPerson ，我试图将它存储在 ActionPredicate 中，记住逆变。但它失败了。我不知道如何进一步进行。请帮忙..！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T08:00:55.443

通用逆变*不允许*您将委托分配给委托`D<TDerived>`，`D<TBase>`原因如下所示（`Action<T1>`在此处使用）：

```
Action<string> m1 = MyMethod; //some method to call
Action<object> m2 = m1; //compiler error - but pretend it's not.
object obj = new object();

m2(obj);  //runtime error - not type safe 
```

如您所见，如果我们被允许执行此分配，那么我们将破坏类型安全，因为我们将能够尝试通过传递 and和 not`m1`的实例来调用委托。然而，换一种方式，即将委托引用复制到其参数类型比源更派生的类型是可以的。 [MSDN 有一个更完整的通用 co/contra variance 示例](http://msdn.microsoft.com/en-us/library/dd799517.aspx#DelegateVariantTypeParameters.)。`object``string`

因此，您将需要更改 to 的声明，`act`或者`ActionPredicate<busPerson, string> act`更有可能考虑编写`GetSetterAction`始终返回的方法`ActionPredicate<busBase, string>`。如果你这样做，你还应该添加类型约束

```
where T1 : busBase 
```

对于该方法，您还需要更改表达式的构建方式，将前两行替换如下：

```
ParameterExpression targetExpr = Expression.Parameter(typeof(busBase), "Target");
//generate a strongly-typed downcast to the derived type from busBase and
//use that as the type on which the property is to be written
MemberExpression fieldExpr = Expression.Property(
  Expression.Convert(targetExpr, typeof(T1)), fieldName); 
```

添加通用约束是一个很好的接触，以确保这种向下转换将始终对任何`T1`.

稍有不同 -`Action<T1, T2>`代表出了什么问题？它似乎和你做的一模一样？:)

# css - 如何根据子DIV中的内容自动调整父DIV高度？

> ID：10101841
> 
> 赞同：6
> 
> 时间：2012-04-11T07:42:58.217
> 
> 标签：css, html

我在父 DIV 中有一个父 DIV 我有两个 DIV 一个在左侧，第二个在父 DIV 的右侧当我在左侧或右侧 div 标签中写入任何内容时，父 DIV 将根据高度自动调整左或右 DIV 标签..

如何编写 .css 文件来执行此操作？

主 DIV 不会根据设计视图中的子 div 进行调整：

请检查我的代码：

```
<div style="padding: 8px; overflow: hidden; background-color: #FFFFFF;">
    <div style ="float:left">
        <p>Hi, Flo!</p>
      </div>
      <div style ="float:right; height: 180px;"> 
        <p>is</p>
        <p>this</p>
        <p>what</p>
        <p>you are looking for?</p>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T07:45:53.950

如果两个子 div 是浮点数，那么您可以使用：

```
div.parent{ overflow: hidden; } 
```

没有指定高度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T18:06:00.363

```
div.parent{ 
     display:  inline-block;
     width:    100%;
} 
```

I found this to be a very nice solution. If you had floating children and non floating children, the height will automatically be adjusted to the min amount of space needed. The width is set to 100% to expand to the parent of the parent's width.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:46:18.403

div 大小会根据它所包含的内容自动调整，除非您为内部 div 指定一些浮动。如果您有浮动 div，则可以使用此解决方案：[类似问题](https://stackoverflow.com/questions/1017880/expand-div-to-max-width-when-floatleft-is-set)

# matlab - 找到最大值时索引超出矩阵维度

> ID：10101847
> 
> 赞同：1
> 
> 时间：2012-04-11T07:43:18.833
> 
> 标签：matlab

我一直在尝试从数组中找到最大值。但我不断收到以下错误。请指教。

```
scores = [19212       56722       73336       44805       47268]

max(scores)

??? Index exceeds matrix dimensions. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T08:03:25.890

**您是否定义了一个名为max**的数组？

```
scores = [19212       56722       73336       44805       47268 ]

max(scores)

ans = 73336 
```

如果我定义一个名为 max 的数组

```
max=[1:10]

max(scores)

??? Index exceeds matrix dimensions. 
```

使用 which 函数检查

```
which max

max is a variable. 
```

它应该是

```
which max

built-in (C:\Program Files\MATLAB\R2009a\toolbox\matlab\datafun\@logical\max)  % logical method 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-11T08:02:16.343

您可能有一个名为`max`. 尝试

```
clear max
max(scores) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T07:52:47.517

获取最大值的索引：scores=1:10；查找（分数 == 最大值（分数））

如果您有两个最大值：

```
clear max
scores=10:-1:1;
scores=[scores 10];
find(scores == max(scores))

ans =

     1    11 
```

正如您可能猜到`max`的那样，返回`max`一个数组：

```
>> max(scores)

ans =

    10 
```

# javascript - 将数组信息分离到每个 div 中

> ID：10101849
> 
> 赞同：0
> 
> 时间：2012-04-11T07:43:30.223
> 
> 标签：javascript, jquery, html

我有一系列信息可以放在不同的 div 中。我的 div 的构造没问题，但所有信息都加载到第一个 div 中。

如何将每个数组项放入相应的 div 中？

请参阅下面的 JavaScript 代码：

```
$(document).ready(function() {

var works = {

  facebook : {
    image : 'facebook.png',
    description : 'Description One.',
    website : 'http://www.facebook.com'
  },// End facebook
  google : {
    image : 'google.png',
    description : 'Description Two.',
    website : 'http://www.google.com'
  },// End google
  adobe : {
    image : 'adobe.png',
    description : 'Description Three.',
    website : 'http://www.adobe.com'
  }// End adobe

};// End var works

for ( var i in works ){

// Construct the tree of div
$('<div/>', {
    'id' : 'workId' + i,
    'class' : 'work'
}).appendTo("#workListId");

$('<div/>', {
    'id' : 'workFlipId' + i,
    'class' : 'workFlip'
}).appendTo("#workId" + i);

$('<div/>', {
    'id' : 'workDataId' + i,
    'class' : 'workData'
}).appendTo("#workId" + i);

$('<div/>', {
    'id' : 'workDescriptionId' + i,
    'class' : 'workDescription'
}).appendTo("#workDataId" + i);

$('<div/>', {
    'id' : 'workURLId' + i,
    'class' : 'workURL'
}).appendTo("#workDataId" + i);

// Insert the content in each div
var pathBegin = '<img src="img/works/';
var pathEnd = '"/>';

$("#workFlipId" + i).html(pathBegin + works[i].image + pathEnd);
$("#workDescriptionId" + i).html('<p>' + works[i].description + '</p>');
$("#workURLId" + i).html('<a href="' + works[i].website + '">Read more...</a>');

}//End for

$(".work").bind("click",function(){

    var $this = $(this);

    if($this.data('flipped'))
    {
        $this.revertFlip();
        $this.data('flipped',false)
    }// End if

    else
    {
        $this.flip({
            direction:'lr',
            color: '#454545',
            speed: 200,
            //content: $('.workData').html(),

            onBefore: function(){

                $this.html($this.siblings('.workData').html());
            }

        });// End $this.flip

        $this.data('flipped',true);

    }// End else
});//End function

}); // End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:13:24.670

就像我在评论中说的那样，我会使用一个对象来代替，它会让你的生活更轻松。阅读这样的意大利面条式代码并真正理解您要实现的目标非常困难，因此这几乎不是一个解决方案，而是一种不同的 IMO 更好方法的建议。首先，您的`works`数组可以这样表示：

```
var works = {
    facebook : {
        image : 'facebook.png',
        description : 'The biggest social network in the world.',
        website : 'http://www.facebook.com'
    }
    ...
}; 
```

然后你会像这样生成html：

```
for (var work in works) {

    var img = '<img src="img/works' + works[work].image + '"/>',
        description = '<p>' + works[work].description + '</p>',
        website = '<a href="' + works[work].website + '">Link</a>';

    ...

} 
```

另外，由于您使用的是 jQuery，所以我会完全使用它。以此为例：

```
var work = document.createElement('div');
work.id = 'workId';
work.className = 'work';
...
document.getElementById("workListId").appendChild(work); 
```

所有这些都可以用 jQuery 编写为：

```
$('div', {
    'id' : 'workdId',
    'class' : 'work'
}).appendTo("#workListId"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:58:45.797

您正在为每个数组元素创建一个具有相同 id 的 div。将编号添加到 id 中，它应该可以工作。这是 jsFiddle 中代码的修改版本：http: [//jsfiddle.net/u5GcE/4/](http://jsfiddle.net/u5GcE/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:33:25.390

这个（[JSFiddle](http://jsfiddle.net/7mSGg/)）怎么样？

```
var $works = new Array();
$works[0] = new Array('facebook.png', 'The biggest social network in the world.', 'http://www.facebook.com/');
$works[1] = new Array('adobe.png', 'The leading software developer targeted at web designers and developers.', 'http://www.adobe.com/');
$works[2] = new Array('microsoft.png', 'One of the top software companies of the world.', 'http://www.microsoft.com/');
$works[3] = new Array('sony.png', 'A global multibillion electronics and entertainment company ', 'http://www.sony.com/');
$works[4] = new Array('dell.png', 'One of the biggest computer developers and assemblers.', 'http://www.dell.com/');
$works[5] = new Array('ebay.png', 'The biggest online auction and shopping websites.', 'http://www.ebay.com/');
$works[6] = new Array('digg.png', 'One of the most popular web 2.0 social networks.', 'http://www.digg.com/');
$works[7] = new Array('google.png', 'The company that redefined web search.', 'http://www.google.com/');

var $more = "Read more";

//Random works
var shuffle = false;

$works.sort(function() {
    if (shuffle == true) {
        return 0.7 - Math.random();
    } else {
        return false;
    }
});
//End random works

function loadWorks()
{
    for (var $loop = 0; $loop < $works.length; $loop++) {
        var $work = $("<div>");
        $work.attr("id", "work"+$loop).attr("class", "work");
        var $workFlip = $("<div>");
        $workFlip.attr("id", "workFlip"+$loop).attr("class", "workFlip");
        $workFlip.html('<img src="img/works/'+$works[$loop][0]+'" >');
        var $workData = $("<div>");
        $workData.attr("id", "workData"+$loop).attr("class", "workData");
        var $workDescription = $("<div>");
        $workDescription.attr("id", "workDescription"+$loop).attr("class", "workDescription");
        $workDescription.html($works[$loop][1]);
        var $workURL = $("<div>");
        $workURL.attr("id", "workURL"+$loop).attr("class", "workURL");
        $workURL.html('<a href="'+$works[$loop][2]+'">'+$more+'</a>');
        $workData.append($workDescription).append($workURL);
        $work.append($workFlip).append($workData);
        $("body").append($work);        
    }
}

$(document).ready(function() {
    loadWorks();
});
​ 
```

# solr - Solr：不正确的 numFound 值

> ID：10101854
> 
> 赞同：0
> 
> 时间：2012-04-11T07:43:50.743
> 
> 标签：solr

我尝试将 MySQL 数据库添加到 solr 索引。完成数据导入过程后，显示“1428760”文件已更新。但 solr 完整搜索查询显示 `numFound="546195"`。

问题是什么？为什么会出现这种不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:54:43.647

我猜 1,428,760 来自管理面板或 CoreAdmin API 等权威机构，而 546,195 是通配符搜索的匹配数。

检查你的标题。是否有`partialResults`设置为 true 的标志？如果是这样，那么 Solr`timeAllowed`在扫描索引时遇到了内部超时，并且只返回了所有匹配文档的一部分。

这是展示 Solr 对性能的偏好的一项功能。它试图尽快为您的查询提供最相关的结果。当大量文档与查询匹配时，它假定它可以节省一些时间并快速返回，而不会过多影响相关性。因为谁会通过 50 万次点击进行分页？

无论如何，没有更多细节，这只是一个猜测和简要说明`partialResults`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:57:25.060

在这里检查：

[http://lucene.472066.n3.nabble.com/Changing-value-of-start-parameter-affects-numFound-td2460645.html](http://lucene.472066.n3.nabble.com/Changing-value-of-start-parameter-affects-numFound-td2460645.html)

有人说关于 solr 中的重复文档。看起来您应该在重新索引之前明确删除文档。

# ios - 如何在一段时间内更改 UIButton 的颜色

> ID：10101856
> 
> 赞同：1
> 
> 时间：2012-04-11T07:44:07.577
> 
> 标签：ios, uibutton

如何在一段时间内更改 UIButton 颜色，如 5-6 秒？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T08:03:09.107

请按照以下步骤操作：

1.  将 2 张图片添加到您的资源文件夹（比如红色和蓝色）。

2.  在 XIB 上拖动一个按钮，将其属性更改为自定义按钮，并设置其背景图像（为 blue.png）。

3.  在方法中执行此`viewDidLoad`操作：

    ```
    [NSTimer scheduledTimerWithTimeInterval:0.8 
                                     target:self 
                                   selector:@selector(changeColor:) 
                                   userInfo:nil 
                                    repeats:NO]; 
    ```

4.  实现这个方法：

    ```
    -(void)changeColor:(id)sender
    {
        [btnTemp setBackgroundImage:[UIImage imageNamed:@"red.png"] 
                           forState:UIControlStateNormal] ;
    } 
    ```

这是找到的好方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T07:50:12.807

像这样的东西：

```
 [button setBackgroundColor:[UIColor coloryouneed]];
  [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:5]];
  [button setBackgroundColor:[UIColor previousColor]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:51:40.137

在 .h 文件中创建 NSTimer 的属性，而不是在 .m 文件中编写以下代码

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil

{

self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {

self.timer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(changebtncolor) userInfo:nil repeats:YES];

    }

    return self;
} 
```

现在你可以用 changebtncolor 方法改变颜色

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T07:47:16.110

你 NSTimer。为按钮设置颜色。`[button setBackgroundColor:[UIColor redColor]];`. 安排一个 NSTimer 来重置它。

```
[NSTimer timerWithTimeInterval:5 target:self selector:@selector(resetColor) userInfo:nil repeats:NO]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T07:48:51.317

创建一个改变颜色的线程。通过使用`sleep(randomValue);`你可以让你的间隔。

# android - Android：倒计时后隐藏图库

> ID：10101857
> 
> 赞同：2
> 
> 时间：2012-04-11T07:44:10.393
> 
> 标签：android, android-layout, android-gallery

我有一个画廊查看器（按照[本](http://saigeethamn.blogspot.com/2010/05/image-switcher-view-android-developer.html)教程），我需要在 5 秒后隐藏缩略图，并在用户触摸屏幕时再次显示它们。基本上，当缩略图被隐藏时，它只会显示已选择的图像。

我的代码如下：

```
package com.xs2theworld.sundio;

import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;

public class GalleryView extends Activity {
    Integer[] pics = { R.drawable.antartica1, R.drawable.antartica2, R.drawable.antartica3, R.drawable.antartica4, R.drawable.antartica5, R.drawable.antartica6, R.drawable.antartica7,
            R.drawable.antartica8, R.drawable.antartica9, R.drawable.antartica10 };
    ImageView imageView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery_view_layout);

        Gallery ga = (Gallery) findViewById(R.id.GalleryThumbnails);
        ga.setAdapter(new ImageAdapter(this));

        imageView = (ImageView) findViewById(R.id.GalleryImage);

        // We show the first image when creating the view gallery
        imageView.setScaleType(ImageView.ScaleType.CENTER);
        imageView.setImageResource(pics[0]);

        ga.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                imageView.setScaleType(ImageView.ScaleType.CENTER);
                imageView.setImageResource(pics[arg2]);
            }
        });
    }

    public class ImageAdapter extends BaseAdapter {

        private Context ctx;
        int imageBackground;

        public ImageAdapter(Context c) {
            ctx = c;
            TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
            imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
            ta.recycle();
        }

        public int getCount() {

            return pics.length;
        }

        public Object getItem(int arg0) {
            return arg0;
        }

        public long getItemId(int arg0) {
            return arg0;
        }

        public View getView(int arg0, View arg1, ViewGroup arg2) {
            ImageView iv = new ImageView(ctx);
            iv.setImageResource(pics[arg0]);
            iv.setScaleType(ImageView.ScaleType.FIT_XY);
            iv.setLayoutParams(new Gallery.LayoutParams(200, 120));
            iv.setBackgroundResource(imageBackground);
            return iv;
        }
    }
} 
```

我怎么能这样做？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:22:01.620

使用 TimerTask 在 5 秒后在预定时间隐藏图库...

```
Timer timer = new Timer();

  timer.scheduleAtFixedRate(new TimerTask()
  {
     public void run()
     {
       //Do your task here
     }

  },delay,period); 
```

或者你可以使用这个...

```
 View v = new View(this);
            v.postDelayed(new Runnable(){
                public void run() {
                    // TODO Auto-generated method stub
                    // Hide your Gallery here
                }
             }, (long) 5000.0); 
```

希望它会帮助你。

# qunit - Qunit asyncTest 无法解决

> ID：10101860
> 
> 赞同：0
> 
> 时间：2012-04-11T07:44:22.100
> 
> 标签：qunit

嗨，我正在设置一些异步测试 - 在检查一切是否正常之前，我已经从 jquery 站点复制了以下内容。

```
asyncTest("a test", function() {

      setTimeout(function(){
        start();
        ok(true, "always fine");
      }, 13);
    }); 
```

测试只是运行和运行。

runner 只是表明测试正在运行；

```
Running Server Tests: a test 
Running: 
Server Tests: a test 
```

我想知道我哪里出错了。我在页面上有 require.js 但在这种情况下肯定没关系。非常感谢任何建议/指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:03:07.800

对于其他有问题的人。这为我修好了。

```
asyncTest("a test", 1, function() {

  setTimeout(function(){
    QUnit.start();
    ok(true, "always fine");
  }, 10);

}); 
```

就我而言，我在页面上有一个名为 start 的函数 - 哎呀！

# haskell - 没有死锁或资源匮乏的并发通用数据结构

> ID：10101861
> 
> 赞同：39
> 
> 时间：2012-04-11T07:44:25.937
> 
> 标签：haskell, concurrency, deadlock, stm

我最近问了一些关于 的问题`TVar`，但我仍然对活锁感到担忧。

于是我想到了这个结构：

1.  每个事务都有一个唯一的优先级（可能按创建顺序分配）。
2.  事务尝试获取它们访问的数据的读/写锁。自然，同时读取是可以的，但是一个写入锁会排除所有其他锁（读取和写入）。
3.  假设事务 A 比事务 B 具有更高的优先级。如果 A 持有锁，B 等待，但如果 B 持有锁并且 A 想要它，则 B 从锁中启动，A 获得它，然后事务 B 重新启动（如 with `TVar`）。然而，B 保持其当前的重试优先级。
4.  当一个锁被释放并且有事务在等待时，它会转到最高优先级的事务，其余的继续等待。

我相信这个系统可以防止死锁，但也可以防止饥饿（不像`TVar`）。我想知道是否有人实施了这样的系统，因为它似乎相当明显，我不想重新发明轮子。

当然，这种方法可以很容易地扩展为允许用户指定优先级。

Priority 可以是 pair `(user_supplied_prio, auto_increment)`，具有`user_supplied_prio`优先权，但同等优先级的任务按 FIFO 顺序解决。

**评论/解决方案：**

实际上，当我想到它时，我所描述的已经存在于 Haskell 中，只需使用一个`IORef`包裹所有数据的方法，并且仅使用`atomicModifyIORef`. 这`atomicModifyIORef`将确保按顺序应用事务。然而，有人可能会认为这意味着数据结构是顺序的（即实际上仅限于一个线程），但由于惰性，它实际上是并行的。

为了解释这一点，考虑一个昂贵的函数`f`。我们将把它应用到`Data.Map`键为“foo”的数据上。

这替换`(foo -> x)`为`(foo -> future(f x))`. 该线程将继续解决`(f x)`实际情况，但同时我们可以将 g 应用于“bar”。由于将g应用于“bar”不需要“foo”的结果，我们可以同时解决这个问题。

没有死锁，没有饥饿，最终所有事务都将被处理（大致按照它们被接收的顺序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:22:01.717

您可以设置一个工作线程以确定性方式处理所有请求，因此没有人会挨饿。这种策略将相当有效并且不受活锁的影响。

```
-- yes, this is a horrible name
createManagerFactory :: a -> IO ((IO a), IO (((a -> a) -> IO a))) 
```

IO a 是一种使用只读 STM 动作安全快速地查询值的动作。(a -> a) 是一个修改值的纯函数，因此 ((a -> a) -> IO a) 是一个接受修饰函数，安全地修改值并返回新值的动作。

运行一次以初始化工厂。

```
(query, modifierFactory) <- createManagerVactory initValue 
```

然后为每个线程运行它以生成一个新的修饰符。

```
myModify <- modifierFactory 
```

createManagerFactory 将执行以下操作：

*   创建一个包含 initValue 的 TVar（称之为 valueTVar）。
*   创建一个包含一个空的 TVar 集合的 TVar (Either a (a -> a)) (称之为 modifyTVarCollection)
*   返回（原子地 $ readTVar valueTVar）作为“查询”结果
*   返回一个知道 modifyTVarCollection 的 modifierFactory

modifierFactory 会这样做：

*   创建一个新的 TVar (Either a (a -> a)) (称之为 modifyTVar)，用 valueTVar 的当前值将其初始化为 (Left a)，并将其添加到 modifyTVarCollection
*   返回一个修改器操作，在一个 STM 操作中将 (Right (a -> a)) 加载到 modifyTVar 中，然后在另一个 STM 操作中重试，直到 modifyTVar 包含 (Left a) 结果值，然后返回该值。

工作线程将运行此循环：

*   在一个操作中，从 modifyTVarCollection 中获取所有查询 TVar，并检查它们的值。如果它们都包含 (Left a) 值，则重试（这将阻塞，直到某个其他线程使用修改器函数加载它们的 modifyTVar，或者修改器工厂创建了一个新的修改器TVar 并将其添加到集合中）。返回包含 Right (a -> a) 的所有 modifyTVars 的列表
*   遍历所有返回的 modifyTVars。对于每个 TVar，执行读取修改函数的操作，安全地执行修改，并将结果作为 a（左 a）放回 modifyTVar

# jquery - 部分选择器和匹配

> ID：10101863
> 
> 赞同：0
> 
> 时间：2012-04-11T07:44:50.563
> 
> 标签：jquery, jquery-selectors

我在网页上列出了十个产品，并使用下面的代码绑定 css 类以显示选择。如您所见，我为每个产品都复制了相同的代码。我不擅长 jQuery，也许有人可以建议优化以摆脱重复代码？

```
$('.product1').bind('mouseenter mouseleave', function () {     
  $('.product1').has('div').closest("tr").children("td").not('.product1').toggleClass('product1-selected');
});

$('.product2').bind('mouseenter mouseleave', function () {  
     $('.product2').has('div').closest("tr").children("td").not('.product2').toggleClass('product2-selected');
});

$('.product3').bind('mouseenter mouseleave', function () {    
   $('.product3').has('div').closest("tr").children("td").not('.product3').toggleClass('product3-selected');
});

//and so on 
```

HTML

```
<table class="product-table">
    <tr>
        <th>
        </th>
        <th class="product1">
            Free
        </th>
        <th class="product2">
            Basic
        </th>
        <th class="product3">
            Premium
        </th>
        <th class="product4">
            Elite
        </th>
    </tr>
    <tr>
        <td>     
        </td>
        <td class="price product1">
        </td>
        <td class="price product2">
            5.00 USD/Month
            <br />
            <br />
            <input type="button" name="btnSignUp" value="Sign Up 
 PayPal &raquo;" onclick="window.location='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=8VVZ8YWHZGNGC&amp;custom_user_id='" />
            <br />
            <br />
            <input type="button" name="btnSignUp" value="Sign Up 
 Plimus &raquo;" onclick="window.location='https://www.plimus.com/jsp/buynow.jsp?contractId=2296795&amp;custom_user_id='" />
        </td>
        <td class="price product3">
            15.00 USD/Month
            <br />
            <br />
            <input type="button" name="btnSignUp" value="Sign Up 
 PayPal &raquo;" onclick="window.location='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=NZ7TR9A3ZHZHS&amp;custom_user_id='" />
            <br />
            <br />
            <input type="button" name="btnSignUp" value="Sign Up 
 Plimus &raquo;" onclick="window.location='https://www.plimus.com/jsp/buynow.jsp?contractId=2296795&amp;custom_user_id='" />
        </td>
        <td class="price product4">
            25.00 USD/Month
            <br />
            <br />
            <input type="button" name="btnSignUp" value="Sign Up 
 PayPal &raquo;" onclick="window.location='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=W5VU287ZC2USQ&amp;custom_user_id='" />
            <br />
            <br />
            <input type="button" name="btnSignUp" value="Sign Up 
 Plimus &raquo;" onclick="window.location='https://www.plimus.com/jsp/buynow.jsp?contractId=2296805&amp;custom_user_id='" />
        </td>
    </tr>
    <tr>
        <td class="feature">
            Instant activation
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            For personal use
        </td>
        <td class="feature-marker product1">
            <div>X</div>
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            For organizational & business needs
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
        </td>
        <td class="feature-marker product3">
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Number of conversions per month
        </td>
        <td class="feature-marker product1">
            <div>30</div>
        </td>
        <td class="feature-marker product2">
            <div>100</div>
        </td>
        <td class="feature-marker product3">
            <div>Unlimited</div>
        </td>
        <td class="feature-marker product4">
            <div>Unlimited</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            PDF by e-mail usage
        </td>
        <td class="feature-marker product1">
            <div>30</div>
        </td>
        <td class="feature-marker product2">
            <div>100</div>
        </td>
        <td class="feature-marker product3">
            <div>Unlimited</div>
        </td>
        <td class="feature-marker product4">
            <div>Unlimited</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Create up to 20 additional memberships for free
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
        </td>
        <td class="feature-marker product3">
        </td>
        <td class="feature-marker product4">
        </td>
    </tr>
    <tr>
        <td class="feature">
            Removed Web2PDF logo from PDF's
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Remove ads
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Set and Save PDF options
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Conversion statistics
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            You will help us to keep this service running, add more features and grow
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Personal support
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
            <div>X</div>
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            New features on demand
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
        </td>
        <td class="feature-marker product3">
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Integration support
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
    <tr>
        <td class="feature">
            Priority in development queue
        </td>
        <td class="feature-marker product1">
        </td>
        <td class="feature-marker product2">
        </td>
        <td class="feature-marker product3">
            <div>X</div>
        </td>
        <td class="feature-marker product4">
            <div>X</div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:54:07.113

我建议对 product1、product2 等使用 id 属性，然后给每个产品一个“产品”类。然后您可以将单个事件附加到所有产品，如下所示：

```
<th id="product1" class="product">
    Free
</th>

<th id="product2" class="product">
    Basic
</th>

<td id="price1" class="price">
</td>
<td id="price2" class="price">
</td> 
```

```
$('.product').bind('mouseenter mouseleave', function () {     

    var $product = jQuery(this);
    var id = $product.attr('id');
    var num = id.replace("product", "");

    // Your desired logic follows:

    $('#price'+num).addClass('selected');

    $('.price').not('#price'+num).removeClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:57:00.420

使用您的确切 jQuery 代码，您可以将其简化为这个更易读的版本：

```
for (var i = 1, len = 3; i < len; i++) {
    var $product = $('.product' + i);
    $product.hover(function () {
        $product
            .has('div')
            .closest('tr')
            .children('td')
            .not($product)
            .toggleClass('product'+ i +'-selected');
    });
} 
```

但我认为必须有一种不同的、更好的方法来处理你想要做的事情。我会从使用一个通用类开始，`.product`并使用一个 id 作为每个产品的名称或编号。跟班一样`selected`。然后我很确定这个选择器可以改进，虽然不能用你的代码来判断。

```
$('.product1').has('div').closest("tr").children("td").not('.product1').toggleClass('product1-selected'); 
```

# android - 自定义对话框在 Android 2.3.3 中“仍然”失败，但在 2.2 和 4.0.3 中失败（使用兼容包 v4）

> ID：10101866
> 
> 赞同：1
> 
> 时间：2012-04-11T07:45:10.337
> 
> 标签：android, xml, dialog

我之前问过，但没有得到任何许可...

我已将我的应用程序升级到 Android 4.0 的标准，并添加了兼容包 v4 以使其仍然适用于旧设备。结果，不知何故，自定义对话框是 2.3 中的即时 1 行，但不是 2.2 或 4.0。显示一些图像。 ![这是带有 4.0 和兼容性包的应用程序](../Images/42ce8b0dba06d4b814c665d84b7a4e2e.png)

![Heres 应用程序在 4.0 之前和兼容性之前](../Images/6958cec7c401eb8bd42ee837efd1162f.png)

对话框的 XML 文件是......非常基本的恕我直言

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:orientation="horizontal"
    android:padding="10dp" >

        <TextView
            android:id="@+id/text"
            style="@style/DialogText"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:autoLink="phone|web|email"
            android:linksClickable="true"
            android:scrollbars="vertical"
            android:scrollHorizontally="false" 
            android:text="@string/about_text_big"
            android:textColor="#ff000000"
            android:textSize="14.0sp" />

</LinearLayout> 
```

请帮帮我，显然代码没有问题？还是“根本”？:S

# mysql - SQL - 如何一次选择一行？

> ID：10101867
> 
> 赞同：0
> 
> 时间：2012-04-11T07:45:16.290
> 
> 标签：mysql, perl, select

我想执行某个选择（正如我在 sqldeveloper 中测试的那样）将检索大量数据（约 350,000 行）。最终，我想将这些行写入文件。

我打算编写一个 PERL 代码来完成它，我想知道是否有办法一次检索一行，将其写入我的输出文件并继续下一行。

也就是说，我希望获得与我原来的选择相同的结果，但更小块。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:47:17.840

如果您认为可以多次执行查询，则可以使用

```
SELECT .... FROM ...
WHERE ....
LIMIT 0, 100 // index_from, amount 
```

第一次，下次向索引添加数量

```
SELECT .... FROM ...
WHERE ....
LIMIT 100, 100 
```

您可以`LIMIT 0,1`一次获得一条记录，但您有 350k 条记录……这太疯狂了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T07:51:34.380

你说：

> 我想知道是否有办法一次检索一行，将其写入我的输出文件并继续下一行。

如果您只是想将数据导出到文件，您应该考虑使用[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/refman/5.6/en/select-into.html).

它将比运行每个查询快得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:57:01.183

你只需要使用

```
$dbh->{'mysql_use_result'} = 1; 
```

告诉 MySQL 驱动程序不要将整个结果加载到内存中。

接下来，您只需处理每个结果行

```
while ( my $ary_ref  = $sth->fetchrow_arrayref ) {

....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:48:31.467

创建一个循环

```
SELECT * FROM my_table LIMIT 0, 1 
```

然后下一次将你的限制增加一个

```
SELECT * FROM my_table LIMIT 1, 1 
```

# javascript - 我是否以正确的方式构建我的应用程序？- 骨干.js

> ID：10101873
> 
> 赞同：0
> 
> 时间：2012-04-11T07:46:07.990
> 
> 标签：javascript, backbone.js, backbone-relational, backbone-views

我对 Javascript 和backbone.js 很陌生。在 AS3 中使用 RobotLegs 开发了一个应用程序，需要将其移植到 Javascipt。对于客户端 MVC，我开始研究 Backbone.js。这些概念看起来很简单，但我有点不确定以“正确”的方式做事。还有一些我卡住的地方...

所以基本上，我有这个 Web 服务（非 RESTful），我需要从中获取一个带有应用程序配置的 JSON 对象。理想情况下，我认为进行此调用的最佳方法是使用 Backbone 模型，但我不确定如何覆盖 URL 和 Parse 方法以使其与非 Restful 服务一起使用。所以现在我从 App.js 中的模型外部对其进行 Ajax 调用（代码共享如下）。

从 JSON 调用中获取数据后，我想将其存储在 ConfigModel（SingleTon 模型）对象中，我可以从模块中查询该对象以检索最终填充某些视图的值对象。我这里有 2 个问题。

1) 我不知道如何使用 Backbone.js 实现单例模型 2) 我不知道如何将我的 ConfigModel 进一步划分为更小的模型/集合，以及我是否需要将它们也设为单例或者只是将它们传递给视图构造函数。

我正在使用 Require.js 来定义（[]）特定视图/模型等的依赖模块。现在我不确定加载模块的范围。如果我需要使它们成为单例，那么我应该只在某个地方加载它们一次，然后将依赖项注入到其他类/模块对象中。如何使用 Backbone.js 执行此操作？？？

最后，我想在整个框架中使用自定义事件。我可以全局调度并从模型/视图等中收听的框架事件。

正如你所看到的，我对范围/单例以及所有这些如何与 Backbone.js 和 Require 相适应感到非常困惑。

这是我现在的应用程序结构...

1) 我的 index.html 文件使用 Require.js 加载“Main.js”

2) 在 Main.js 中，我加载 App.js 并在其上调用 init。Init 调用 getConfig() 函数，该函数对 Web 服务进行 AJAX 调用，并获取和解析 JSON 文本文件。我想将其存储在单例 ConfigModel 中。但是，我现在对此发表了评论，因为我开始尝试使用我的 ConfigModel 本身进行 web 服务调用的方法......这不起作用。

3) 然后我有一个带有默认 URL 映射的路由器。在成功接收来自 Web 服务的 JSON 后，我初始化了路由器。我不确定这是否正确，或者我应该从路由器进行 Ajax 调用？

这是代码： http: [//pastebin.com/HHRF88Tq](http://pastebin.com/HHRF88Tq)

我知道我到处都是，但如果有人能引导我朝着正确的方向前进，我会非常感激......

谢谢一堆。

萨米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:51:42.307

您想查看骨干模式以获得最佳实践（例如引导您的模型！）

[http://ricostacruz.com/backbone-patterns/](http://ricostacruz.com/backbone-patterns/)

并查看主干基础知识，以获得对主干架构 ( wip ) 的完整概述

[http://addyosmani.github.com/backbone-fundamentals/](http://addyosmani.github.com/backbone-fundamentals/)

# iphone - AES解密示例代码

> ID：10101874
> 
> 赞同：1
> 
> 时间：2012-04-11T07:46:08.730
> 
> 标签：iphone, aes, encryption-symmetric

从过去一周开始，我试图解密在 java 服务器中加密的数据，我的值如下

> 解密值-->管理员
> 密码-->2020a7db17ca8071de72ef439405b570
> 加密数据--f118404f2b7d98a744d2fa24c0d21167

我的代码是

```
 NSString* cipherText = @"f118404f2b7d98a744d2fa24c0d21167";
    NSLog(@"CipherText = %@",cipherText);
    NSString* expectedText = @"admin";
    NSLog(@"expexted text = %@",expectedText);
    Cipher* cipher = [[Cipher alloc] initWithKey:@"2020a7db17ca8071de72ef439405b570"];
    NSLog(@"cipher = %@",cipher);
    NSData* cipherTextData = [NSData dataWithBase64EncodedString:cipherText];
     NSLog(@"ciphertextdata= %@",cipherTextData);
    NSData* plainTextData = [cipher decrypt:cipherTextData];
     NSLog(@"plaintextdata= %@",plainTextData);
    NSString* plainText = [[NSString alloc] initWithData:plainTextData encoding:NSUTF8StringEncoding];
    NSLog(@"plaintext= %@",plainText); 
```

但我无法获得价值`cipherTextData`和`plainTextData`。它总是显示为空。任何人请帮助

# ruby - 无法编译 ruby -dbi

> ID：10101879
> 
> 赞同：0
> 
> 时间：2012-04-11T07:46:32.340
> 
> 标签：ruby, compilation, dbi, freetds

对于遗留项目，我必须安装 ruby​​-dbi ( `dbi-0.1.1`)。当我尝试运行`sudo ruby setup.rb setup`时，出现以下安装错误：

```
eianni@ianni-desktop:~/Desktop/ruby-dbi$ sudo ruby setup.rb setup
entering setup phase...
setting #! line to "#!/usr/bin/ruby1.8"
setting #! line to "#!/usr/bin/ruby1.8"
make clean
/usr/bin/ruby1.8 extconf.rb
creating Makefile
make
gcc -I. -I/usr/lib/ruby/1.8/x86_64-linux -I/usr/lib/ruby/1.8/x86_64-linux -I. -I/usr/local/freetds/include    -fPIC -fno-strict-aliasing -g -g -O2  -fPIC   -c dbd_sybase.c
dbd_sybase.c:29:17: error: tds.h: No such file or directory
dbd_sybase.c:33: error: expected specifier-qualifier-list before ‘TDSSOCKET’
dbd_sybase.c:62: error: expected declaration specifiers or ‘...’ before ‘TDSSOCKET’
dbd_sybase.c:63: error: expected ‘)’ before ‘*’ token
dbd_sybase.c: In function ‘dh_init’:
dbd_sybase.c:82: error: ‘TDSSOCKET’ undeclared (first use in this function)
dbd_sybase.c:82: error: (Each undeclared identifier is reported only once
dbd_sybase.c:82: error: for each function it appears in.)
dbd_sybase.c:82: error: ‘tds’ undeclared (first use in this function)
dbd_sybase.c:102: error: expected expression before ‘)’ token
dbd_sybase.c:107: error: ‘TDS_SUCCEED’ undeclared (first use in this function)
dbd_sybase.c: In function ‘dh_do’:
dbd_sybase.c:122: error: ‘TDSSOCKET’ undeclared (first use in this function)
dbd_sybase.c:122: error: ‘tds’ undeclared (first use in this function)
dbd_sybase.c:124: error: expected expression before ‘)’ token
dbd_sybase.c:126: error: ‘TDS_SUCCEED’ undeclared (first use in this function)
dbd_sybase.c: In function ‘dh_disconnect’:
dbd_sybase.c:155: error: ‘TDSSOCKET’ undeclared (first use in this function)
dbd_sybase.c:155: error: ‘tds’ undeclared (first use in this function)
dbd_sybase.c:157: error: expected expression before ‘)’ token
dbd_sybase.c: In function ‘rh_new’:
dbd_sybase.c:170: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:170: error: ‘TDSSOCKET’ undeclared (first use in this function)
dbd_sybase.c:170: error: expected expression before ‘)’ token
dbd_sybase.c:171: error: ‘SYBRESULT’ has no member named ‘sqlstring’
dbd_sybase.c: In function ‘rh_init’:
dbd_sybase.c:192: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:192: error: ‘SYBRESULT’ has no member named ‘sqlstring’
dbd_sybase.c:192: error: ‘TDS_SUCCEED’ undeclared (first use in this function)
dbd_sybase.c:204: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:206: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:209: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:216: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:217: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:226: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:226: error: too many arguments to function ‘value_as_string’
dbd_sybase.c:233: error: ‘TDS_FAIL’ undeclared (first use in this function)
dbd_sybase.c:237: error: ‘TDS_NO_MORE_ROWS’ undeclared (first use in this function)
dbd_sybase.c:249: error: ‘TDS_NO_MORE_RESULTS’ undeclared (first use in this function)
dbd_sybase.c: In function ‘rh_fetch_fields’:
dbd_sybase.c:276: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c:279: error: ‘SYBRESULT’ has no member named ‘tds’
dbd_sybase.c: In function ‘tdsl_new’:
dbd_sybase.c:303: error: ‘TDSLOGIN’ undeclared (first use in this function)
dbd_sybase.c:303: error: ‘login’ undeclared (first use in this function)
dbd_sybase.c: In function ‘tdsl_init’:
dbd_sybase.c:318: error: ‘TDSLOGIN’ undeclared (first use in this function)
dbd_sybase.c:318: error: ‘login’ undeclared (first use in this function)
dbd_sybase.c:322: error: expected expression before ‘)’ token
dbd_sybase.c: In function ‘tdss_new’:
dbd_sybase.c:344: error: ‘TDSLOGIN’ undeclared (first use in this function)
dbd_sybase.c:344: error: ‘login’ undeclared (first use in this function)
dbd_sybase.c:345: error: ‘TDSSOCKET’ undeclared (first use in this function)
dbd_sybase.c:345: error: ‘tds’ undeclared (first use in this function)
dbd_sybase.c:352: error: expected expression before ‘)’ token
dbd_sybase.c: At top level:
dbd_sybase.c:383: error: expected declaration specifiers or ‘...’ before ‘TDSSOCKET’
dbd_sybase.c: In function ‘value_as_string’:
dbd_sybase.c:389: error: ‘tds’ undeclared (first use in this function)
dbd_sybase.c:396: error: ‘SYBNTEXT’ undeclared (first use in this function)
dbd_sybase.c:396: error: ‘SYBTEXT’ undeclared (first use in this function)
dbd_sybase.c:401: error: ‘SYBVARCHAR’ undeclared (first use in this function)
dbd_sybase.c: At top level:
dbd_sybase.c:406: error: expected ‘)’ before ‘*’ token
make: *** [dbd_sybase.o] Error 1
setup failed
'system make' failed 
```

找不到是什么鬼`tds.h`。我正在运行 Ubuntu 10.04，我刚刚找到`freetds`但没有找到开发包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:46:40.570

您正在尝试访问 Sybase 数据库？您可以在此处从 freetds 下载稳定版本：http: [//ibiblio.org/pub/Linux/ALPHA/freetds/stable/freetds-stable.tgz](http://ibiblio.org/pub/Linux/ALPHA/freetds/stable/freetds-stable.tgz) 或此处的当前版本：http: [//ibiblio.org/pub/Linux /ALPHA/freetds/current/freetds-current.tgz](http://ibiblio.org/pub/Linux/ALPHA/freetds/current/freetds-current.tgz) 他们应该包括 tds.h

# c++ - 如何停止 gSOAP 操作

> ID：10101880
> 
> 赞同：3
> 
> 时间：2012-04-11T07:46:43.620
> 
> 标签：c++, windows, linux, gsoap

在我的应用程序中，我在单独的线程中使用 gSOAP。连接、发送和接收的超时设置为 10 秒。当我想停止应用程序（或只是暂停该线程以更改某些设置）时，有时我必须等待整整 10 秒（例如当 IP 设置为一些废话时）。如何避免？如何（从不同的线程）告诉 gSOAP 代理中止当前操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T07:30:26.460

恕我直言，诀窍是操纵 gSoap ( `soap->socket`) 的内部套接字。你也可以看看这里，也许它有帮助： http: [//markmail.org/message/dkghy2jtvasr6g5y](http://markmail.org/message/dkghy2jtvasr6g5y)。

但我真的认为这取决于你的线程模型。也许另一个想法是触发 gsoap 调用，每个调用都在不同的线程中，并从第二个线程管理它们。

祝你好运！

# android - 如何在展开的列表视图项中获取复选框的 ID？

> ID：10101882
> 
> 赞同：5
> 
> 时间：2012-04-11T07:46:49.800
> 
> 标签：android, checkbox

我有一个扩展的列表视图，在父节点和子项中都有复选框。所有数据都来自网络服务，因此它是动态的。

附图片：

![在此处输入图像描述](../Images/117aee408dac69ce079d54447f46aa8d.png)

现在在菜单项上单击我想获取所有复选框状态。请指导我如何获取其中使用的复选框的 ID。

附上代码：

```
/**
 * 
 */

    public class Object_SecurityActivity extends ExpandableListActivity {
        @Override
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            // TODO Auto-generated method stub
            return super.onChildClick(parent, v, groupPosition, childPosition, id);
        }

        @Override
        public void onContentChanged() {
            // TODO Auto-generated method stub
            super.onContentChanged();
        }

        private AndroidClientEntity obj_android_client;
        private static final String LOG_TAG = "ElistCBox2";
        private String username, password, clientname;

        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            //setContentView(R.layout.main);
            Intent security_intent = getIntent();
            String id = security_intent.getStringExtra("id");
            obj_android_client = (AndroidClientEntity) getApplicationContext();
            username = obj_android_client.getUsername();
            password = obj_android_client.getPassword();
            clientname = obj_android_client.getClientName();
            new Securityasync().execute(username, password, clientname, id);

        }

        class Securityasync extends AsyncTask<String, String, String> {
            String sesurity_response = null;
            ProgressDialog dialog;
            private Expandable_list_Adapter expListAdapter;

            @Override
            protected String doInBackground(String... params) {
                if ((isOnline(Object_SecurityActivity.this).equals("true"))) {
                    Security_service security_obj = new Security_service();
                    try {
                        sesurity_response = security_obj.getUsersRoles(params[0],
                                params[1], params[2], params[3]);
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (JSONException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                return null;
            }

            @Override
            protected void onPostExecute(String result) {
                if (isOnline(Object_SecurityActivity.this).equals("true")) {

                    setContentView(R.layout.layout_expandable_listview);
                    ArrayList<String> groupNames = new ArrayList<String>();
                    ArrayList<String> sub = new ArrayList<String>();
                    ArrayList<ArrayList<String>> child = new ArrayList<ArrayList<String>>();
                    ArrayList<String> sub_id = new ArrayList<String>();
                    ArrayList<String> objrid = new ArrayList<String>();
                    try {
                        JSONArray json = new JSONArray(sesurity_response);
                        // JSONArray json_child=new JSONArray(sesurity_response);
                        for (int i = 0; i < json.length(); i++) {
                            JSONObject json_obj = json.getJSONObject(i);
                            if (json_obj.getString("PRid").equalsIgnoreCase("0")) {

                                String ObjectRid = json_obj.getString("ObjectRid");
                                int m=0;
                                objrid.add(m,ObjectRid);
                                m++;
                                groupNames.add(json_obj.getString("Name"));
                                for (int j = 0; j < json.length(); j++) {

                                    JSONObject json_child = json.getJSONObject(j);
                                    if (ObjectRid.equalsIgnoreCase(json_child
                                            .getString("PRid"))) {
                                        int n=0;
                                        sub_id.add(n,json_child.getString("ObjectRid"));
                                        sub.add(json_child.getString("Name"));
                                    }

                                }
                                child.add(sub);

                            }

                        }
                        expListAdapter = new Expandable_list_Adapter(getBaseContext(),
                                groupNames, child);
                        setListAdapter(expListAdapter);
                        Log.e("size in error", "son " + json.length());
                    } catch (JSONException e) {
                        Log.e("", "", e);
                        Toast.makeText(getBaseContext(), "parsing error",
                                Toast.LENGTH_LONG).show();
                    }
                    Log.e("sizeof list", ""+sub_id.size());
                    Iterator itr=objrid.iterator();

                    while(itr.hasNext()){
                        Log.e("id","value "+itr.next());
                    }

                }
            }

            @Override
            protected void onPreExecute() {
                super.onPreExecute();

            }
        }

    } 
```

和适配器类：

```
public class Expandable_list_Adapter extends BaseExpandableListAdapter implements OnCheckedChangeListener {

    private Context context;
    private ArrayList<String> groupNames;
    private ArrayList<ArrayList<String>> child;
    private LayoutInflater inflater;

    public Expandable_list_Adapter(Context context, 
                        ArrayList<String> groupNames,
                        ArrayList<ArrayList<String>> child ) { 
        this.context = context;
        this.groupNames= groupNames;
        this.child = child;
        inflater = LayoutInflater.from( context );
    }

    public Object getChild(int groupPosition, int childPosition) {
        return child.get( groupPosition ).get( childPosition );
    }

    public long getChildId(int groupPosition, int childPosition) {
        return (long)( groupPosition*1024+childPosition );  // Max 1024 children per group
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        View v = null;
        if( convertView != null )
            v = convertView;
        else
            v = inflater.inflate(R.layout.child_row, parent, false); 
       String c = (String)getChild( groupPosition, childPosition );
        TextView color = (TextView)v.findViewById( R.id.childname );
        if( color != null )
            color.setText( c );

        CheckBox cb = (CheckBox)v.findViewById( R.id.check1 );

        //cb.setChecked(false);
        cb.setOnCheckedChangeListener(this);
        return v;
    }

    public int getChildrenCount(int groupPosition) {
        return child.get( groupPosition ).size();
    }

    public Object getGroup(int groupPosition) {
        return groupNames.get( groupPosition );        
    }

    public int getGroupCount(){
         return groupNames.size();
    }
    public long getGroupId(int groupPosition) {
        return (long)( groupPosition*1024 );  // To be consistent with getChildId
    } 

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        View v = null;
        if( convertView != null )
            v = convertView;
        else
            v = inflater.inflate(R.layout.group_row, parent, false); 
        String gt = (String)getGroup( groupPosition );
        TextView colorGroup = (TextView)v.findViewById( R.id.childname );
        if( gt != null )
            colorGroup.setText( gt );
        CheckBox cb = (CheckBox)v.findViewById( R.id.check2 );
        cb.setChecked(false);
        return v;
    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        Log.e("is group checked","group "+groupPosition);
        Log.e("selectable","has" +childPosition);
        return true;
    } 

    public void onGroupCollapsed (int groupPosition) {}
    public void onGroupExpanded(int groupPosition) {}

    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // TODO Auto-generated method stub

    }
public void isChecked(){

}

} 
```

子.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
      android:background="#21415A"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView android:id="@+id/childname"
         android:paddingLeft="50px"
         android:focusable="false"
         android:textSize="14px"
         android:textStyle="italic"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"/>

    <TextView android:id="@+id/rgb"
         android:focusable="false"
         android:textSize="14px"
         android:textStyle="italic"
         android:layout_width="100px"
         android:layout_height="wrap_content"/>

    <CheckBox
        android:id="@+id/check1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:focusable="false" />

</RelativeLayout> 
```

parent.xml 与孩子相同。

请指导我如何获取复选框的 ID，因为在选择的菜单项上我必须对此进行操作基础。

编辑：我试图 setTag() 和 getTag() 。但现在可扩展列表视图显示出奇怪的行为。当我选择一个复选框并展开另一个组时，所有 chekbok 框都设置为默认值。在这种情况下我必须做什么。我不知道为什么它不保存状态。我面临与[Expandablelistview 中的奇怪行为相同的问题 - Android](https://stackoverflow.com/questions/3633823/strange-behaviour-in-expandablelistview-android) Plz guide

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:23:07.973

实际上，您在运行时复制的列表或网格上添加的任何控件都具有与您在设计时声明的相同的 ID

例如：在你的情况下，这些是 childname,rgb,check1

因此，如果您需要知道哪个复选框是唯一的，您应该使用 for 循环一一进行

如果你想做某事为什么不这样做

在复选框单击事件上

```
public void onClickevent(View v)
{
private CheckBox ch = (CheckBox) findViewById(v.getId());
    if (ch.IsChecked){
    //do some thing
     }
} 
```

或者，您应该按照我的方式添加一个独特的字段，例如

```
 <TextView
        android:id="@+id/txtComp1_ID"
        android:layout_width="0sp"
        android:layout_height="40sp"
        android:textSize="1pt" >
    </TextView> 
```

因为它的宽度为零，所以它不可见，但它拥有该行的 id

现在为列表视图中的所有项目运行 for 循环

findview 你复选框，然后找到它的父，然后再找到它的子（文本视图）这个 id 字段，所以现在你有 id 和复选框检查状态，这样你就可以得到这个

查看示例

```
v = (LinearLayout) findViewById(R.id.LinearNotebookList);
            TextView _id, ID, Name;
            for (int i = 0; i < nCount; i++) {
                v = (LinearLayout) NotebookList.getAdapter().getView(i, null,
                        null);
                _id = (TextView) v.findViewById(R.id.txt_Notebook_ID);

                Available = (CheckBox) v
                        .findViewById(R.id.chkboxNotebookAvailable);
                Display = (CheckBox) v.findViewById(R.id.chkboxNotebookDisplay);
                Demo = (CheckBox) v.findViewById(R.id.chkboxNotebookDemo);
                str_id = (String) _id.getText();

                if (Available.isChecked()) {
                    strAvailable = "YES";
                } else {
                    strAvailable = "NO";
                }
                if (Display.isChecked()) {
                    strDisplay = "YES";
                } else {
                    strDisplay = "NO";
                }
                if (Demo.isChecked()) {
                    strDemo = "YES";
                    } else {
                        strDemo = "NO";
                    }
} 
```

你可以根据你的需要改变它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:59:16.033

只需使用 setTag(int) 和 getTag() 方法来设置 id 并获取控件的 id。像EditText，复选框等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T05:46:13.433

采用

```
cb.setId(groupPosition+childPosition); 
```

设置 ID 并检索使用：

```
cb.getId(); 
```

组位置+子位置将为您提供项目的确切位置。

在 onClick 中，您可以获得在创建复选框时设置的 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T10:12:59.087

终于解决了我的问题。适配器类：

```
 public class Expandable_list_Adapter extends BaseExpandableListAdapter implements OnCheckedChangeListener {

    private Context context;
    private ArrayList<String> groupNames;
    private ArrayList<ArrayList<String>> child;
    private LayoutInflater inflater;

    public Expandable_list_Adapter(Context context, 
                        ArrayList<String> groupNames,
                        ArrayList<ArrayList<String>> child ) { 
        AndroidClientEntity.objHasmap.clear();
        this.context = context;
        this.groupNames= groupNames;
        this.child = child;
        inflater = LayoutInflater.from( context );
    }

    public Object getChild(int groupPosition, int childPosition) {
        return child.get( groupPosition ).get( childPosition );
    }

    public long getChildId(int groupPosition, int childPosition) {
        return (long)( groupPosition*1024+childPosition );  // Max 1024 children per group
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        View v = null;
        if( convertView != null )
            v = convertView;
        else
             v = inflater.inflate(R.layout.child_row, parent, false); 
       String c = (String)getChild( groupPosition, childPosition );
       Log.e("hiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii",c);

        TextView label = (TextView)v.findViewById( R.id.childname );
        if( label != null )
            label.setText( c );

        CheckBox cb = (CheckBox)v.findViewById( R.id.check1);
        //cb.setId(childPosition);
        cb.setTag(groupPosition+"child"+childPosition);
        cb.setChecked(false);
        if(AndroidClientEntity.objHasmap.get(groupPosition+"child"+childPosition)!=null)
        {
        cb.setChecked(AndroidClientEntity.objHasmap.get(groupPosition+"child"+childPosition));
        }
    //    cb.setOnCheckedChangeListener(this);
        return v;
    }

    public int getChildrenCount(int groupPosition) {
        return child.get( groupPosition ).size();
    }

    public Object getGroup(int groupPosition) {

        return groupNames.get( groupPosition );        
    }

    public int getGroupCount(){
         return groupNames.size();
    }
    public long getGroupId(int groupPosition) {
        return (long)( groupPosition*1024 );  // To be consistent with getChildId
    } 

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        View v = null;
        if( convertView != null )
            v = convertView;
        else
            v = inflater.inflate(R.layout.group_row, parent, false); 
        String gt = (String)getGroup( groupPosition );
        TextView colorGroup = (TextView)v.findViewById( R.id.childname );
        if( gt != null )
            colorGroup.setText( gt );
        CheckBox cb = (CheckBox)v.findViewById( R.id.check2 );
        cb.setTag(groupPosition+"cbgroup");
        //Object_SecurityActivityobjHasmap.put(groupPosition+"cbgroup", false);
        cb.setChecked(false);
        return v;
    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        Log.e("is group checked","group "+groupPosition);
        Log.e("selectable","has" +childPosition);
        return true;
    } 

    public void onGroupCollapsed (int groupPosition) {}
    public void onGroupExpanded(int groupPosition) {}

    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // TODO Auto-generated method stub

    }
public void isChecked(){

}

} 
```

和活动类：

```
public class Object_SecurityActivity extends ExpandableListActivity implements OnClickListener{

@Override
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
    // TODO Auto-generated method stub
    CheckBox cb=(CheckBox) v.findViewWithTag(groupPosition+"child"+childPosition);
//Boolean state=objHasmap.get(groupPosition+"child"+childPosition);
    cb.toggle();
    if(cb.isChecked())
    {
        AndroidClientEntity.objHasmap.put(groupPosition+"child"+childPosition,true );

    }else
    {AndroidClientEntity.objHasmap.remove(groupPosition+"child"+childPosition);

    }

    //add value in set
//cb.setEnabled(state);
    return super.onChildClick(parent, v, groupPosition, childPosition, id);
}

private AndroidClientEntity obj_android_client;
private static final String LOG_TAG = "ElistCBox2";
private String username, password, clientname;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    //setContentView(R.layout.main);
    Intent security_intent = getIntent();
    String id = security_intent.getStringExtra("id");

    obj_android_client = (AndroidClientEntity) getApplicationContext();
    username = obj_android_client.getUsername();
    password = obj_android_client.getPassword();
    clientname = obj_android_client.getClientName();
    new Securityasync().execute(username, password, clientname, id);

}

public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(getApplication()).inflate(R.menu.context_menu_security,
            menu);
    return (super.onPrepareOptionsMenu(menu));
}
public boolean onOptionsItemSelected(MenuItem item) {
    // startDownload();
    if (item.getItemId() == R.id.setsecurity) {
        //code here 
        Log.e("hiiiiiiiiiiiiiiii","scejkkl yu menu pressed");
         }
    return (super.onOptionsItemSelected(item));
}
class Securityasync extends AsyncTask<String, String, String> {
    String sesurity_response = null;
    ProgressDialog dialog;
    private Expandable_list_Adapter expListAdapter;

    @Override
    protected String doInBackground(String... params) {
        if ((isOnline(Object_SecurityActivity.this).equals("true"))) {
            Security_service security_obj = new Security_service();
            try {
                sesurity_response = security_obj.getUsersRoles(params[0],
                        params[1], params[2], params[3]);
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (JSONException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        if (isOnline(Object_SecurityActivity.this).equals("true")) {

            setContentView(R.layout.layout_expandable_listview);
            ArrayList<String> groupNames = new ArrayList<String>();
            ArrayList<String> sub = new ArrayList<String>();
            ArrayList<ArrayList<String>> child = new ArrayList<ArrayList<String>>();
            ArrayList<String> sub_id = new ArrayList<String>();
            ArrayList<String> objrid = new ArrayList<String>();
            try {
                JSONArray json = new JSONArray(sesurity_response);
                // JSONArray json_child=new JSONArray(sesurity_response);
                for (int i = 0; i < json.length(); i++) {
                    JSONObject json_obj = json.getJSONObject(i);
                    if (json_obj.getString("PRid").equalsIgnoreCase("0")) {

                        String ObjectRid = json_obj.getString("ObjectRid");
                        int m=0;
                        objrid.add(m,ObjectRid);
                        m++;
                        groupNames.add(json_obj.getString("Name"));
                        for (int j = 0; j < json.length(); j++) {
                            JSONObject json_child = json.getJSONObject(j);
                            if (ObjectRid.equalsIgnoreCase(json_child
                                    .getString("PRid"))) {
                                int n=0;
                                sub_id.add(n,json_child.getString("ObjectRid"));
                                sub.add(json_child.getString("Name"));
                            }

                        }
                        child.add(sub);

                    }

                }
                expListAdapter = new Expandable_list_Adapter(getBaseContext(),
                        groupNames, child);
                setListAdapter(expListAdapter);
                Log.e("size in error", "son " + json.length());
            } catch (JSONException e) {
                Log.e("", "", e);
                Toast.makeText(getBaseContext(), "parsing error",
                        Toast.LENGTH_LONG).show();
            }
            Log.e("sizeof list", ""+sub_id.size());
            Iterator itr=objrid.iterator();

            while(itr.hasNext()){
                Log.e("id","value "+itr.next());
            }

        }
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

    }
}
public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

}

感谢 pallavi、amit rai 和 Photon。

# android - 自定义 listView 行，带有复选框和旋转时的储蓄复选标记

> ID：10101885
> 
> 赞同：4
> 
> 时间：2012-04-11T07:47:13.513
> 
> 标签：android, listview, checkbox

**所以情况是：** - listview 行的布局包含一个复选框（和几个 o textviews） - 我这样设置 id .. 就像在 android.R.layout.simple_list_item_multiple_choice

```
<CheckBox 
       android:id="@android:id/text1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content/> 
```

*   在涉及的其他对象下方：我的适配器：

    私有类 SelectCartAdapter 扩展 ArrayAdapter <SelectCartListItem> ...

*   和我的实现 Checkable 的 SelectCartListItem！

    公共类 SelectCartListItem 实现 OnClickListener、Checkable ...

*   和具有多项选择的列表视图

*   以及 onCreate 中的一些列表视图设置：

    m_ListView.setItemsCanFocus(false); m_ListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

所以很明显我想保存轮换支票..我所有的试验都没有成功

这不打印任何ID！

```
@Override
public void onSaveInstanceState(Bundle args) {
    Log.d(">>>onSaveInstanceState","<<<<<<<<<<<<<<<<<<<<<<<<<");
    long[] toSave = m_ListView.getCheckItemIds();//TODO: save!
    for(int i=0;i<toSave.length;i++){
        Log.d(">>>>"+i+"]",toSave[i]+"");
    }
    super.onSaveInstanceState(args);
} 
```

那么我错过了什么..想法..有人吗？

更新：我的解决方案：我在一个新对象 Map<String, Boolean>.. 中创建了一个静态地图，其中将包含我的检查/取消检查情况 + 添加/获取检查状态的静态方法.. 它不是那么漂亮，但可以工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:54:56.237

//将数组添加到bundle

```
@Override
public void onSaveInstanceState(Bundle args) {
    Log.d(">>>onSaveInstanceState","<<<<<<<<<<<<<<<<<<<<<<<<<");
    long[] toSave = m_ListView.getCheckItemIds();//TODO: save!
     //add it to the bundle 
   args.putLongArray("mycheck",toSave );
    for(int i=0;i<toSave.length;i++){
        Log.d(">>>>"+i+"]",toSave[i]+"");
    }
    super.onSaveInstanceState(args);
} 
```

让他们进来`onRestoreInstanceState()`

```
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
 Long [] arr = savedInstanceState.getLongArray("mycheck");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:56:50.557

如果选中，则可以将视图的 TAG 设置为 1，如果未选中，则可以将其设置为 0，然后在适配器中查找它。

# xml - 有没有办法让 Visual Studio 2010 支持 XML Schema 1.1

> ID：10101889
> 
> 赞同：3
> 
> 时间：2012-04-11T07:47:23.123
> 
> 标签：xml, visual-studio, xsd, xsd-1.1

所以我正在做一个需要 xml 模式的副项目，我对此很不熟悉。

我希望能够设置架构以在两组属性之间进行选择，根据我的研究，这在 XSD 1.0 中是不可能直接实现的，但显然是 XSD 1.1 的一个特性。

目前我正在使用 Visual Studio 来完成我的工作，它似乎停留在 XSD 1.0 模式下，这是有道理的，因为 XSD 1.1 显然是最近的开发。

我的问题是，是否有可用的插件/扩展可以让我在 Visual Studio 中使用 XSD 1.1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:17:52.977

来自维基百科：“XSD 1.1 于 2012 年 4 月成为 W3C 推荐标准，这意味着它是经批准的 W3C 规范。” [资源](http://en.wikipedia.org/wiki/XML_Schema_%28W3C%29#Version_1.1)

因此，如果它是最近才完成的，Visual Studio 还没有提供支持是很自然的。因此，您可以选择 a) 使用 XSD 1.0 编写应用程序，b) 使用 XSD 1.1 编写应用程序，希望在为时已晚之前发布对它的支持。更安全的选择是暂时坚持使用 XSD 1.0，除非您有关于何时发布 1.1 支持的可靠信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T09:36:04.083

不，Microsoft 没有支持 XSD 1.1（或 xslt2、xpath2 或 xquery3）的产品

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T06:00:14.033

There isn't currently but if enough of us [vote for it on this MSDN site](http://social.msdn.microsoft.com/Forums/vstudio/en-US/428e8380-32b3-4b5b-894a-044b2bf65e10/xsd-11-support-in-net?forum=netfxbcl) maybe it will happen sooner?

# java - 检查 EntityManagerFactory

> ID：10101890
> 
> 赞同：2
> 
> 时间：2012-04-11T07:47:27.007
> 
> 标签：java, jpa, eclipselink

我使用 eclipselink 作为 JPA 的实现，我想知道是否可以检查我的 EntityManagerFactory 是否“活着”

例如，如果连接参数无效，当我创建 EMF 时，在开始事务之前我没有任何异常

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:37:30.090

EclipseLink 默认延迟部署以改善服务器启动时间。

您可以将部署配置为在服务器开始使用时发生，

“eclipselink.deploy-on-startup”=“真”

在您的 persistence.xml 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:29:12.927

使用 entityManagerFactory 您只能获取 EntityManager 并向数据库发送检查查询，但在这种情况下，我认为最好的解决方案是使用验证器配置连接池。

这样，从池中创建或检索的每个连接都通过 JDBC API 或简单查询进行验证。例如，在数据源配置中的 JBoss 中，您可以添加以下行：

```
<!-- sql to call when connection is created    -->
<new-connection-sql>some arbitrary sql</new-connection-sql>

<!-- sql to call on an existing pooled connection when it is obtained from pool     -->
<check-valid-connection-sql>some arbitrary sql</check-valid-connection-sql> 
```

或（对于 Postgres，但每个 DBMS 都有示例）

```
<validation>
  <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker"></valid-connection-checker>
  <exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter"></exception-sorter>
</validation> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:01:18.640

目前我使用这段代码：

```
try {
  emf = Persistence.createEntityManagerFactory(pu, properties);
} catch (Exception e) {
  throw new DaoException("cannot open entity manager factory", e);
}

EntityManager em = null;
try {
  em = emf.createEntityManager();
} catch (Exception e) {
  throw new DaoException("cannot open entity manager", e);
} finally {
  if (null!=em && em.isOpen()) {
    em.close();
  }
} 
```

我会尝试你的建议谢谢

# c# - EF Code First：包括不处理可选关系

> ID：10101895
> 
> 赞同：9
> 
> 时间：2012-04-11T07:47:48.167
> 
> 标签：c#, entity-framework, lazy-loading, code-first, eager-loading

我的代码中有一个特定查询，它需要急切加载所有相关实体（->1 FK 和 ->N FK），因为在此之后将立即处理上下文。

我做了一个通用的“查询”方法，`params Expression<Func<MyItem, object>>[] includes`然后在内部链接它们。那部分工作正常。

查询如下所示：

```
var item = facade.Query<MyItem>(
                c => c.Childs.Select(x => x.Parent),
                c => c.Childs.Select(x => x.SubChild1),
                c => c.Childs.Select(x => x.SubChildNotWorking),
                c => c.Childs.Select(x => x.SubChild2),
                c => c.Childs.Select(x => x.SubChild3),
                c => c.Childs.Select(x => x.SubChildrens)
                ).FirstOrDefault(c => c.Name == name); 
```

not working 属性的映射（放置在 SubChildNotWorking 的配置中）：

```
this.HasMany(scnw => scnw.Childs).WithOptional(c => c.SubChildNotWorking).HasForeignKey(c => c.MyForeignKey); 
```

在所有包含中，只有`SubChildNotWorking`实际不起作用。当使用调试器检查返回的对象时，我看到了所有属性的代理。打开代理为我提供了所有其他关系的正确数据，以及该属性的“对象上下文已被处理异常” `SubChildNotWorking`。

我能够发现的唯一区别是它`SubChildNotWorking`是一个可为空的 FK（在 DB 上具有可为空的列，在 dbcontext 中具有 WithOptional 配置），而所有其他的都是配置有 WithRequired 的不可为空的 FK。

该数据库也是一个遗留数据库，不是使用 Code First 创建的，也没有遵循其约定，我只是在 DbContext 中进行了映射。其他一切正常。

我试图弄清楚急切加载是否不适用于可为空的 FK，但我找不到任何有关此的文档。

这是一个错误，还是预期的行为？但最重要的是，我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T17:25:12.003

你定义了吗

```
[DataContract] 
```

在你的班级（实体）上？如果是这样，不要忘记用

```
[DataMember] 
```

或者当您对实体执行 GET 调用时，它可能最终会加载但不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T15:47:46.747

当您使用 include 方法时，您谈论的是急切加载模式。具有关系的实体将作为集合加载。对于任何不可为空的外键，都有一个从空开始的普通集合，但对于可空的外键，则没有。在 Code First 中，您可以将导航属性设为虚拟，但这不是您的情况。您可以尝试直接在 Context 上加载它，例如：

```
var someEntity = context.someEntities.Find(1);
context.Entry(someEntity ).Reference(e => e.EntityWithFKNullable).Load(); 
```

或更短的版本：

```
context.EntitiesWithFKNullable.Load(); 
```

# ajax - MVC 3 AJAX Post，列表中充满了对象，但对象属性为空

> ID：10101896
> 
> 赞同：9
> 
> 时间：2012-04-11T07:47:52.963
> 
> 标签：ajax, asp.net-mvc-3, jquery, model-binding

我有以下问题：

在按钮单击上，我将一些数据发布到服务器。我的控制器动作如下所示：

```
public ActionResult Accept(List<MyViewModel> entries)
{
    //here entries HAS 2 MyViewModel-Instances in it.
    //The entries are not null, but the values of the instances are!
    //entries[0].ParamA is null
} 
```

MyViewModel 如下所示：

```
public class MyViewModel
{
    public string ParamA { get; set; }
    public string ParamB { get; set; }
} 
```

AJAX-Call 如下：

```
var myEntries = { entries: [{ ParamA: "A", ParamB: "B" }, { ParamA: "C", ParamB: "D" }] };

$.ajax({
    type: 'POST',
    url: url,
    cache: false,
    data: myEntries,
    dataType: 'text' }); 
```

**我已经尝试做的事情：**

*   将数据类型更改为“json”
*   使用：传统：真
*   试过 var myEntries = JSON.stringify(...);
*   试过 var myEntries = { entries : [JSON.stringify({ ... }), JSON.stringify({ ... })] };
*   与上面相同，但使用 jQuery.param(..., true);
*   使用 IEnumerable 或 MyViewModel[] 而不是列表。
*   以上任意组合

我在这里做错了什么？

非常非常感谢您提前帮助我！

**编辑**

我的 (Razor)View 目前并不有趣，因为它与任何事情都无关。我没有使用任何 HTML.TextBoxFor（或类似）方法来填充 myEntries-Variable。它实际上是动态填充的（因为有很多很多条件）。为了这个问题（以及我自己的测试），我对变量进行了硬编码。:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T07:35:09.140

有了你的回答和使用的`JSON.stringify`方法，它对我有用

```
var myEntries = { entries: [{ ParamA: "A", ParamB: "B" }, 
                            { ParamA: "C", ParamB: "D" }] };

$.ajax({
        type: 'POST',
        url: '/{controller}/{action}',
        cache: false,
        data: JSON.stringify(myEntries),
        dataType: 'json', 
        contentType: 'application/json; charset=utf-8'
    }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T06:55:03.153

我得到了答案！

jQuery 有时会让人感到困惑。

dataType 是指定要从服务器返回什么的参数。contentType 是指定您发送到服务器的内容的参数。

因此，从上面的示例中，如果您添加：

内容类型：'应用程序/json；字符集=utf-8',

在 AJAX 调用中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T12:34:12.203

只是为了补充有关如何创建将回发到控制器的列表的答案。那是因为您不需要用列表的名称包装数组。它看起来很难看，并且使用内置函数无法管理。这个例子是为了展示如何回发 MVC 可以理解并解释为 List 的 JSON。（但即使 Array 被包装了它仍然可以工作，但这是静态内容并且难以管理）

这个例子使用了 jQuery 的 sortable 插件。我想用新的排序索引将整个列表模型发回以保存在数据库中。

```
update: function (event, ui) {

 img = { key: 0, order: 0, url: '' }; //Single image model on server
 imgs = new Array(); //An array to hold the image models.

 //Iterate through all the List Items and build my model based on the data.
 $('#UploaderThumbnails li').each(function (e) {
      img.key = $(this).data('key');  //Primary Key
      img.order = $(this).index();  //Order index
      imgs.push(img); //put into "list" array
 });

 //And what is in the answer - this works really great
 $.ajax({
     url: '/Image/UpdateOrder',
     data: JSON.stringify(imgs),
     type: 'POST',
     contentType: 'application/json; charset=utf-8'
  });

} 
```

我的 MVC 控制器就像...

```
 [HttpPost]
  public ActionResult UpdateOrder(List<Models.Image> images)
  {
     //Images at this point is a proper C# List of Images! :) Easy!

      return Content("");
  } 
```

# javascript - Onclick 事件被自动调用

> ID：10101899
> 
> 赞同：13
> 
> 时间：2012-04-11T07:48:09.923
> 
> 标签：javascript, onclick

我写了一个 JavaScript 类`MyClass`，我在其中定义了一个方法`closeThis`

```
MyClass = function() {
  this.closeThis = function() {
    document.getElementById("hidePane").style.display = 'none';
  }
} 
```

现在，在我的 html 中，我试图将其称为如下......

```
<script type="text/javascript">
  function callThis() {
    var myclassObj = new MyClass();
    document.getElementById("closeButton").onclick = myclassObj.closeThis();
  }
</script> 
```

`callThis`当我单击一个按钮时，将调用上述内容。这里的问题是，页面加载时会自动调用`onclick`顶部的事件。`clsoeButtion`这有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-11T07:50:41.950

您正在立即调用该函数。

当您在函数引用上留下括号时，您基本上是在说：

> 评估 closeThis 函数并将结果分配给 onclick

当您真正想要做的是将函数引用分配给单击处理程序时：

```
document.getElementById("closeButton").onclick = myclassObj.closeThis; 
```

省略括号，您会将 closeThis 函数绑定到 onclick。这反而说的是：

> 将函数 closeThis 分配给单击处理程序。

您实际上是将函数作为一等对象或对函数的引用分配给变量。

顺便说一句，我个人的偏好是始终使用匿名函数包装器。有时您需要能够将参数传递给您的函数，这确保您可以更轻松地做到这一点：

```
document.getElementById("closeButton").onclick = 
    function() {
        myclassObj.closeThis();
    }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T07:53:38.843

应该 `document.getElementById("closeButton").onclick = myclassObj.closeThis;` 不是 `myclassObj.closeThis();`

`myclassObj.closeThis()`将调用该函数，然后将值分配给 onclick

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:51:00.110

您需要从中删除`()`，否则它会立即被调用，因为这就是您通过后缀调用函数的方式`()`，因此只需删除这些大括号：

```
document.getElementById("closeButton").onclick = myclassObj.closeThis; 
```

# android - mime4j为什么不出现getBody

> ID：10101911
> 
> 赞同：1
> 
> 时间：2012-04-11T07:48:57.000
> 
> 标签：android, mime

我将 mime4j jar 添加到我的 Android 项目中，但是对于这段代码，Eclipse 不允许编写。我的意思是没有属性或其他东西属于 mime4j jar。

```
public static Part findFirstPartByMimeType(Part part, String mimeType)
            throws MessagingException {
        if (part.getBody() instanceof Multipart) {  // It says there is no getBody
            Multipart multipart = (Multipart)part.getBody();
            for (int i = 0, count = multipart.getCount(); i < count; i++) {
                BodyPart bodyPart = multipart.getBodyPart(i);
                Part ret = findFirstPartByMimeType(bodyPart, mimeType); 
                if (ret != null) {
                    return ret;
                }
            }
        } 
```

或者无论如何都可以使用 mime4j 接收邮件正文？

# cakephp - Cakephp 2.1 手动保存关联对象

> ID：10101919
> 
> 赞同：1
> 
> 时间：2012-04-11T07:49:56.227
> 
> 标签：cakephp, cakephp-2.1, cakephp-model

Mycakephp 版本是 2.1.1。

我正在尝试使用 saveAll() 函数手动保存关联模型

**模型**

*   员工有一个地址
*   员工所属部门

所以表

> 员工（名字，姓氏，年龄，性别，部门ID）
> 
> 地址（first_line，second_line，城市，州，employee_id）

现在员工创建 add.ctp 有一个接收员工和地址输入的表单

我知道

> $this->Employee->saveAll($this->request->data);

这将保存模型，但
我想手动保存关联

我在[这里](http://book.cakephp.org/2.0/en/models/model-attributes.html)浏览了官方 cakephp 文档 ，我尝试过这样的事情

```
 $this->Employee->saveAll($data, array(
            'fieldList' => array(
            'Employee' => array('first_name','last_name','age','sex','department_id'),
            'Department' => array('first_line', 'second_line','city','state','employee_id')
            )
        )); 
```

它不工作，并引发以下错误

> 注意（8）：未定义变量：数据 [APP\Controller\EmployeesController.php，第 118 行]
> 
> 警告 (2)：array_keys() 期望参数 1 为数组，给定 null [CORE\Cake\Model\Model.php，第 1996 行]

我是 cakephp 初学者。请帮我。

> $this->request->data: 数组

(

```
[Employee] => Array
    (
        [first_name] => Jack
        [last_name] => Robert
        [age] => 32
        [sex] => 0
        [Department] => Development
    )

[Address] => Array
    (
        [first_line] => HSR Layout
        [second_line] => 1st Cross
        [city] => Najem
        [state] => Barel
    )

[Department] => Array
    (
        [id] => 3
    ) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:54:56.823

`fieldList`尝试在参数中仅使用一个数组：

```
$this->Employee->saveAll($this->request->data, array('fieldList' => array('Employee.first_name', 'Employee.last_name', 'Employee.age', 'Employee.sex', 'Department.first_line', 'Department.second_line', 'Department.city', 'Department.state', 'Department.employee_id'))); 
```

根据手册，`fieldList`期望“您要允许保存的字段数组”。我认为不接受多维数组。

`$this->request->data`是您表单的所有字段，您可以使用`debug($this->request->data)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:56:43.063

在做了一些研究后，我发现了它。

```
 $data = array(
         'Employee' => array(
         'first_name' => $this->request->data['Employee']['first_name'],
         'last_name'=>$this->request->data['Employee']['last_name'],
         'age'=>$this->request->data['Employee']['age'],
         'sex'=>$this->request->data['Employee']['sex'],
         'department_id'=>$this->request->data['Department']['id']
        ),
         'Adress' => array(
         'first_line' => $this->request->data['Adress']['first_line'],
         'second_line'=>$this->request->data['Adress']['second_line'],
         'city'=>$this->request->data['Adress']['city'],
         'state'=>$this->request->data['Adress']['state']
        )

    );

            $this->Employee->saveAll($data, array('deep' => true)) 
```

这会做到的。

# erlang - 如何运行这个 Erlang 示例？

> ID：10101920
> 
> 赞同：1
> 
> 时间：2012-04-11T07:49:57.053
> 
> 标签：erlang

有人可以帮助我完成这个简单的分布式 erlang 示例。我如何运行这个 erlang 程序来查看它是如何工作的？我用 erl -sname pc1、erl -sname pc2 和 erl -sname server 盯着 3 个 shell 并且还从 pc1 和 pc2 服务器 ping 以在它们之间建立连接。现在我还需要做什么才能测试这个程序？

```
-module(pubsub2).
-export([startDispatcher/0, startClient/0, 
     subscribe/2, publish/3]).

startClient() ->
    Pid = spawn(fun clientLoop/0),
    register(client, Pid).

clientLoop() ->
    receive {Topic, Message} ->
        io:fwrite("Received message ~w for topic ~w~n",
              [Message, Topic]),
        clientLoop()
    end.

subscribe(Host, Topic) ->
    {dispatcher, Host} ! {subscribe, node(), Topic}.

publish(Host, Topic, Message) ->
    {dispatcher, Host} ! {publish, Topic, Message}.

startDispatcher() ->
    Pid = spawn(fun dispatcherLoop/0),
    register(dispatcher, Pid).

dispatcherLoop() -> 
    io:fwrite("Dispatcher started\n"),
    dispatcherLoop([]).
dispatcherLoop(Interests) ->
    receive
    {subscribe, Client, Topic} ->
        dispatcherLoop(addInterest(Interests, Client, Topic));
    {publish, Topic, Message} ->
        Destinations = computeDestinations(Topic, Interests),
        send(Topic, Message, Destinations),
        dispatcherLoop(Interests)
    end.

computeDestinations(_, []) -> [];
computeDestinations(Topic, [{SelectedTopic, Clients}|T]) ->
    if SelectedTopic == Topic -> Clients;
       SelectedTopic =/= Topic -> computeDestinations(Topic, T)
    end.

send(_, _, []) -> ok;
send(Topic, Message, [Client|T]) ->
    {client, Client} ! {Topic, Message},
    send(Topic, Message, T).

addInterest(Interests, Client, Topic) ->
    addInterest(Interests, Client, Topic, []).
addInterest([], Client, Topic, Result) ->
    Result ++ [{Topic, [Client]}];
addInterest([{SelectedTopic, Clients}|T], Client, Topic, Result) ->
    if SelectedTopic == Topic ->
        NewClients = Clients ++ [Client],
        Result ++ [{Topic, NewClients}] ++ T;
       SelectedTopic =/= Topic ->
        addInterest(T, Client, Topic, Result ++ [{SelectedTopic, Clients}])
    end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:04:36.590

我建议你这样做：[http ://www.erlang.org/doc/getting_started/conc_prog.html](http://www.erlang.org/doc/getting_started/conc_prog.html)

无论如何，假设你所有的节点共享相同的 cookie，启动 3 个不同的 shell

```
erl -sname n1
(n1@ubuntu)1> pubsub2:startClient().

erl -sname n2
(n1@ubuntu)1> pubsub2:startDispatcher().

erl -sname n3
(n1@ubuntu)1> pubsub2:startClient(). 
```

在 n1 做：

```
(n1@ubuntu)1> pubsub2:startClient().
(n1@ubuntu)2> pubsub2:subscribe('n2@ubuntu', football). 
```

在 n3 做：

```
(n3@ubuntu)1> pubsub2:startClient(). 
(n3@ubuntu)1> pubsub2:publish('n2@ubuntu', football, news1). 
```

在 n1 你应该得到：

```
Received message news1 for topic football 
```

当然，您可以根据需要扩展它。

# php - array_rand 是否使用 Mersenne Twister 算法？

> ID：10101923
> 
> 赞同：3
> 
> 时间：2012-04-11T07:50:08.733
> 
> 标签：php, random, mersenne-twister

在 PHP 中，我们可以选择[mt_rand()](http://php.net/manual/en/function.mt-rand.php)和[rand()](http://php.net/manual/en/function.rand.php)，其中`mt_rand()`使用 Mersenne Twister 算法并`rand()`使用 libc 随机生成器。

我想使用[array_rand](http://php.net/manual/en/function.array-rand.php)从数组中选择一个随机项。但是，是否`array_rand`使用 Mersenne Twister 算法？

`array_rand`实现我自己的using非常简单`mt_rand`，但如果 array_rand 使用 Mersenne Twister，那就更好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-04T02:35:11.557

[现在可以了](https://github.com/php/php-src/commit/ab834f4)，从 PHP 7.1 开始；有关更多详细信息，请参阅[此 RFC](https://wiki.php.net/rfc/rng_fixes)和此[错误报告](https://bugs.php.net/bug.php?id=45301)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:54:18.373

可能不是这种情况，因为`array_rand()`过去的结果[根本不是随机的](https://bugs.php.net/bug.php?id=45301)。它已在最新版本中得到修复（有关详细信息，请参阅[Vaxquis 的答案](https://stackoverflow.com/a/47625739/13508)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:01:12.100

似乎在内部[`array_rand`](https://github.com/php/php-src/blob/master/ext/standard/array.c#L3958)使用[`php_rand()`](https://github.com/php/php-src/blob/master/ext/standard/rand.c#L63)，这似乎是旧~~的~~非 mt 版本。

# sql-server - SQL Server中Oracle的CONNECT BY PRIOR模拟...在子查询中

> ID：10101926
> 
> 赞同：0
> 
> 时间：2012-04-11T07:50:13.980
> 
> 标签：sql-server, sql-server-2008

这个问题是对上一个问题[Simulation of CONNECT BY PRIOR of ORACLE in SQL SERVER](https://stackoverflow.com/questions/959804/simulation-of-connect-by-prior-of-oracle-in-sql-server)的扩展。

由此我知道如何在 SQL Server 中进行 CONNECT BY。在 Oracle 中，您可以在子查询中轻松使用连接。

因此，在 Oracle 中，我可以选择 * from t1 where t1.id in（通过查询从连接中选择）。

在 SQL Server 中也可以吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:53:10.197

在 SQL Server（以及其他数据库）中，您将需要使用[递归公用表](http://msdn.microsoft.com/en-US/library/ms175972%28v=sql.90%29.aspx)表达式，例如：

```
with some_tree as ( 
    select ...
    union all
    select ...
)
select * 
from t1 
where t1.id in (select some_id from some_tree); 
```

由于版本 11.2 Oracle 还支持递归公用表表达式（因此您可以在两个数据库上使用相同的语法）

# php - 在类内设置变量

> ID：10101927
> 
> 赞同：0
> 
> 时间：2012-04-11T07:50:14.447
> 
> 标签：php, pear

我正在使用 PEAR S3 包，我想设置 $useSSL = true。我避免编辑实际的包，尽管我可以。

$s3->useSSL->真；pr $s3->useSSL(true); 不工作。

S3.php：[http](http://pastebin.com/4sZ19mR4) ://pastebin.com/4sZ19mR4 191行

我的示例代码：

```
require_once 'Services/Amazon/S3.php';

$key    = 'xxx';
$secret = 'xxx';
$bucket = 'flyers';

$s3     = Services_Amazon_S3::getAccount($key, $secret);
$s3->useSSL->true;
print $s3->getURL();
$bucket = $s3->getBucket($bucket); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:51:43.787

如果 useSSL 确实是 的公共属性`$s3`，则可以执行以下操作：

```
$s3->useSSL = true; 
```

作为旁注，您`$s3->useSSL(true)`仅使用 if`useSSL`定义为 类中的函数`$s3`，而`$s3->useSSL->true`这意味着您正在尝试访问`true`在`useSSL`object in 中命名的属性`$s3`，我很确定这不是您想要的。

# ruby-on-rails - 在 Rails 控制器中获取环境设置

> ID：10101928
> 
> 赞同：8
> 
> 时间：2012-04-11T07:50:18.253
> 
> 标签：ruby-on-rails

我在 development.rb 中有一些电子邮件设置，我想在我的控制器中访问。

中的设置`development.rb`是：

```
config.notify_submited_transaction = 'anil@swiftsetup.com,anildbest83@gmail.com'
config.notify_approved_transaction = 'anil@swiftsetup.com' 
```

在我的控制器/动作中，我正在尝试这个：

```
 @to = Rails.env.notify_submited_transaction
  @subject = 'AM - Vendor Submitted Transaction'
  AmMailer.vendor_submited_transaction(@to, @subject, current_user).deliver 
```

这虽然会导致错误：

```
 undefined method `notify_submited_transaction' 
```

我不确定如何获取我设置的配置值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T08:12:05.480

只是一个旁注：Rails.env 是特殊的字符串对象，它允许您获取当前环境（它不像 Rack 的 env）：

```
puts Rails.env # => "production"
puts Rails.env.test? # => false 
```

它并不意味着返回配置设置。

当您想将自定义设置放在 下时，这可能会派上用场`/config/initializers/*`，并且为了清楚起见，在某些情况下这是一种更好的方法（建议不要将您的自定义设置弄乱 rails 环境文件）。例如：

```
# config/initializers/mailer_settings.rb
if Rails.env.production?
  ActionMailer::Base.smtp_settings = {
    :address              => "smtp.gmail.com",
    ...
  }
else
  #different settings
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T07:55:58.110

尝试访问：

```
Rails.application.config.notify_submited_transaction
Rails.application.config.notify_approved_transaction 
```

似乎类似于：[对于 Rails，如何访问或打印配置变量（作为实验或测试/调试）](https://stackoverflow.com/questions/5288476/for-rails-how-to-access-or-print-out-config-variables-as-experiment-or-test)

# objective-c - 如何找到活动 AirPlay 设备的 IP 地址？

> ID：10101935
> 
> 赞同：6
> 
> 时间：2012-04-11T07:50:34.837
> 
> 标签：objective-c, ios, airplay

我想知道是否可以获取我的 iOS 应用当前正在使用的播放设备的 IP 地址。

要么是那个，要么是网络上所有支持播放的设备的 IP 地址。

先感谢您！

编辑：虽然我现在有一个公认的答案，但我很想知道如何获取当前播放的播放设备的 IP。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T09:34:55.590

您必须使用 NSNetServiceBrowser 来使用该协议搜索设备。我对打印机做了同样的事情，我的代码如下所示：

```
 _netServiceBrowser= [[NSNetServiceBrowser alloc] init];
    _netServiceBrowser.delegate= self;
    [_netServiceBrowser searchForServicesOfType:@"_pdl-datastream._tcp" inDomain:@"local."]; 
```

您必须更改`@"_pdl-datastream._tcp"`要搜索的协议，您可以在此处找到协议列表：http: [//developer.apple.com/library/mac/#qa/qa1312/_index.html](http://developer.apple.com/library/mac/#qa/qa1312/_index.html)

之后，您必须编写协议的功能：

```
#pragma mark - NSNetServiceBrowserDelegate

-(void)netServiceBrowserWillSearch:(NSNetServiceBrowser *)aNetServiceBrowser{
     //prepare the start of the search
}

-(void)netServiceBrowser:(NSNetServiceBrowser *)aNetServiceBrowser didFindService:(NSNetService *)aNetService moreComing:(BOOL)moreComing{
//Find a service, remember that after that you have to resolve the service to know the address

[_printers addObject:aNetService];
aNetService.delegate=self;
[aNetService resolveWithTimeout:5.0];

//More coming says if it has find more services, in case of more service are in queue wait to reload your interface
if (!moreComing) {
    [self.tableView reloadData];   
}
}

-(void)netServiceBrowser:(NSNetServiceBrowser *)aNetServiceBrowser didNotSearch:(NSDictionary *)errorDict{
//Do what you want in case of error
}

-(void)netServiceBrowserDidStopSearch:(NSNetServiceBrowser *)aNetServiceBrowser{

//End search!
}

- (NSString *)getStringFromAddressData:(NSData *)dataIn {
//Function to parse address from NSData
struct sockaddr_in  *socketAddress = nil;
NSString            *ipString = nil;

socketAddress = (struct sockaddr_in *)[dataIn bytes];
ipString = [NSString stringWithFormat: @"%s",
            inet_ntoa(socketAddress->sin_addr)];  ///problem here
return ipString;
}

- (void)netServiceDidResolveAddress:(NSNetService *)sender
{
//delegate of NSNetService resolution process
[_addresses addObject:[self getStringFromAddressData:[sender.addresses objectAtIndex:0]]];
[self.tableView reloadData];
} 
```

一个有用的网站：http: [//www.macresearch.org/cocoa-scientists-part-xxviii-bonjour-and-how-do-you-do](http://www.macresearch.org/cocoa-scientists-part-xxviii-bonjour-and-how-do-you-do)

希望对你有帮助

# html - 如何安装电话间隙并为 iphone 运行任何网站应用程序

> ID：10101937
> 
> 赞同：-3
> 
> 时间：2012-04-11T07:50:43.540
> 
> 标签：html, cordova

我想安装电话间隙并想测试一个网站。我安装了 phonegap 但它显示在创建新项目而不是 phone gap 时安装了“cordova 框架”。如何测试html索引文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:23:12.360

创建新项目 -> 基于 Cordova 的应用程序。之后选择项目文件并“在查找器中显示”，在同一个文件夹中应该是名为 www 的文件夹（它不在那里），所以在那个位置创建 www 文件夹并将你的 index.html 放在那里。将创建的 www 文件夹拖到 xcode 中。www 文件夹在 xcode 中必须显示为蓝色，而不是黄色。要做到这一点，请确保选中“创建对任何添加的文件夹的文件夹引用”。

# c++ - 时序图生成器

> ID：10101949
> 
> 赞同：1
> 
> 时间：2012-04-11T07:51:35.880
> 
> 标签：c++, c, visual-c++

有谁知道基于 C/C++ 代码执行创建时序图的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:59:16.267

不完全确定您的意思，但 Visual Studio 包含一些很好的[性能分析工具](http://msdn.microsoft.com/en-us/library/aa728806%28v=vs.71%29.aspx)。您可以获得有助于在代码中查找性能热点的信息（例如在函数中花费的包含和独占时间）。当然还有许多其他工具取决于您要实现的目标，我建议您查看维基百科上[的 C/C++ 工具列表](http://en.wikipedia.org/wiki/List_of_performance_analysis_tools#C_and_C.2B.2B)作为起点。

![在此处输入图像描述](../Images/255963f3d188b7e2a779da1c253a1afd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:56:36.623

如果您想知道计算机花费多少时间执行每个功能，我相信您正在寻找分析工具。谷歌应该为您指出一个可以与您的工具（编译器、调试器等）一起使用的工具。

[在Wikipedia](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)上查看此链接

# iphone - 是否可以通过一次下载在多个 Mac 上安装 Xcode 4.3.2？

> ID：10101954
> 
> 赞同：6
> 
> 时间：2012-04-11T07:51:56.117
> 
> 标签：iphone, ios, xcode, installation

我最近通过应用商店在我的 macbook 上将 xcode 更新为 4.3.2。由于这里的互联网连接非常差，我花了 12 个多小时才完成这项工作，现在我必须在其他开发机器上复制它。

有没有办法将完成的安装移动到其他系统？也许系统上某个地方存在一个临时安装程序，我可以存档以备将来使用？

值得注意的是，这个问题：

[我可以在多台 Mac 上从 App Store 安装 Xcode 4 吗？](https://stackoverflow.com/questions/5356736/can-i-install-xcode-4-from-the-app-store-on-multiple-macs)

不涉及我的问题，因为 4.3.2 不包含“安装 xcode.app”文件。

还是我注定要从每台机器上的mac应用商店重新下载？:-(

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T10:39:34.797

对于开发者计划的成员，Xcode 也可以[从 Apple 网站下载](https://developer.apple.com/downloads/index.action)，无需 App Store。我知道你不想再下载了。我只是提到这一点，因为您从那里获得的下载只是一个包含 Xcode.app 的磁盘映像。要安装，您只需将该 Xcode.app 拖到您喜欢的任何位置，就像任何普通的 Mac 应用程序一样。

这向我强烈建议您也可以复制从 Mac App Store 获得的 Xcode.app。也就是说，它也可能会尝试下载其他内容。例如，文档集和命令行工具组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T05:22:38.513

正如@KenThomases 提到的，Xcode 可以在 App Store 之外下载。如果您想在多台 Mac 上部署它而无需使用 Apple ID，这是推荐的方法。

另外，现在有一个应用程序：[xcode-installer gem](http://rubygems.org/gems/xcode-installer)

# php - 搞砸了编码

> ID：10101958
> 
> 赞同：1
> 
> 时间：2012-04-11T07:52:09.017
> 
> 标签：php

您好，我在ISO上的网站上设置UTF8犯了一个错误，数据像这样进入数据库`ï¿½ï¿½ï¿½ï¿½ï¿½2012å¹´4ï¿½19ï¿½ï¿½(ï¿½ï¿½ï¿½)`有什么解决方案可以理解这句话的含义吗？它是正常的汉字。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T07:54:59.673

您可以尝试将编码更改为二进制，然后更改为 iso（但一定要备份）

```
ALTER TABLE `yourtablename` CHANGE `fieldname` `fieldname` TEXT CHARACTER SET BINARY NULL ; 
ALTER TABLE `yourtablename` CHANGE `fieldname` `fieldname` TEXT CHARACTER SET latin1 NULL ; 
```

或转为 utf ..

```
ALTER TABLE `yourtablename` CHANGE `fieldname` `fieldname` TEXT CHARACTER SET utf8 COLLATE utf8_bin NULL ; 
```

# ruby - 虾表中的单词如何换行

> ID：10101961
> 
> 赞同：8
> 
> 时间：2012-04-11T07:52:51.513
> 
> 标签：ruby, prawn

我想创建一个虾表，其中单元格文本由单词而不是字母包裹。我已经在使用shrink_to_fit，但似乎虾是根据字母包装的。理想情况下，我希望它仅包含单词（single_line 不是一个选项，因为每个单元格可以有 2-3 个单词）。

任何人都知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T10:03:22.337

也许您的表格包含对于单个表格单元格来说太长的单词？据我所知，Prawn 表格中的表格单元格使用应该自动换行文本的边界框。以下示例对我来说很好：

```
Prawn::Document.generate 'example.pdf' do
  data = [['Pig','Oink '*10],
          ['Cow','Moo '*10],
          ['Duck','Quack '*10]]
  table data do |table|
    table.column_widths = [50,150]
  end
end 
```

[如果没有任何效果，您可以尝试使用多个text_box](http://prawn.majesticseacreature.com/docs/0.11.1/Prawn/Text.html#method-i-text_box)调用来构建自己的表格， 而不是使用内置的[Prawn 表格方法](http://prawn.majesticseacreature.com/docs/0.11.1/Prawn/Table.html)，这当然有点麻烦。`text_box`将请求的文本绘制到一个框中。该`:overflow`参数控制文本量超过可用空间时的行为，可用选项为`:truncate`、`:shrink_to_fit`或`:expand`。

```
text_box(txt, :at => [x,y], :width => width, :height => height, :size => size,
              :overflow => :shrink_to_fit,..) 
```

# android - 离线调试 Android 应用程序

> ID：10101962
> 
> 赞同：3
> 
> 时间：2012-04-11T07:52:52.713
> 
> 标签：android, debugging

我正在开发一个使用位置服务的应用程序。我需要使用调试应用程序，`Log.d()`但这需要设备一直连接到计算机。这对我来说是不可能的。我将在旅行中测试该应用程序大约两个小时。我当时无法将其连接到 PC。

有什么办法可以保存手机中的登录信息，稍后再检索，可以看到LOG数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:08:45.373

引入你自己的`Logger`类，一个类的包装器`android.util.Log`，它将输出重定向到文件和控制台：

```
public class Logger {

    public static PrintWriter printWriter = null;

    private static void init() {
        ...
        // Check if external media is writable
        ...

        if (printWriter == null) {
            try {
                File dir = new File(Environment.getExternalStorageDirectory() + LOG_DIR);
                dir.mkdirs();
                printWriter = new PrintWriter(new FileWriter(new File(dir, LOG_FILE), true));
            }
            catch (IOException e) {
                Log.e(Logger.class.getName(), "initExternal() -> IOException", e);
            }
        }
    }

    private static synchronized int log(int priority, String tag, String msg) {
        int res = Log.println(priority, tag, msg);

        init(); // May be called just once, depending on your requirements

        printWriter.print(tag + "   ");
        printWriter.print(msg + "\r\n");
        printWriter.flush();
        return res;
    }

    // Duplicates of standard android.util.Log methods:
    public static int v(String tag, String msg) {
        return log(Log.VERBOSE, tag, msg);
    }
    public static int v(String tag, String msg, Throwable tr) {
        return log(Log.VERBOSE, tag, msg + '\n' + Log.getStackTraceString(tr));
    }
    public static int d(String tag, String msg) {
        return log(Log.DEBUG, tag, msg);
    }
    public static int d(String tag, String msg, Throwable tr) {
        return log(Log.DEBUG, tag, msg + '\n' + Log.getStackTraceString(tr));
    }

    ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:04:41.747

有些应用程序可以抓取日志的最后几百行，并通过电子邮件发布到您要发送到的任何电子邮件。我使用过日志收集器 [https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS54dHJhbG9naWMuYW5kcm9pZC5sb2djb2xsZWN0b3IiXQ](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS54dHJhbG9naWMuYW5kcm9pZC5sb2djb2xsZWN0b3IiXQ) .. 并且可以推荐它，你需要做的工作吗为你做：D

# memory-management - Monotouch Memory Profiler：“总内存”这个数字代表什么？

> ID：10101963
> 
> 赞同：2
> 
> 时间：2012-04-11T07:52:58.470
> 
> 标签：memory-management, xamarin.ios

我目前在模拟器中运行我的应用程序时正在查看 Monotouch 内存分析器的输出。我可以看到这些数字：

```
Object count: 154.043
Total memory: 5.099.648 bytes 
```

“总内存”是否意味着我占用了大约 5MB 的 RAM？Instruments 向我显示分配了大约 30MB，这就是我要问的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T10:30:01.747

`Total memory`是所有托管对象使用的内存量。分析器只是将每个对象使用的内存相加。

这不是进程中使用的内存总量，原因有两个：

*   MonoTouch 不会为每个对象分配内存。MonoTouch 以块的形式分配内存，当一个新对象被创建时，它通常会被分配已经分配的内存。在任何情况下，这通常是您可以忽略分析器报告的总内存与您的应用程序使用的实际内存量之间的差异（这不是使用的 5MB 托管内存和 30MB 仪器报告之间存在差异的原因）。

*   MonoTouch（以及它的分析器）不知道本机代码分配的任何内存。例如，如果您创建一个 UIImage，则图像数据完全保存在本机代码中，并且不会显示在我们的分析器中（您将在分析器中看到 UIImage 实例，但每个使用的内存将是使用的托管内存，其中不包括图像数据）。另一个例子是，如果您从 xib 加载视图：如果您不以某种方式从托管代码访问对象树，则不会为树中的任何对象创建托管对象，并且托管中不会显示任何内容探查器。这是托管分析器的 5MB 和 30MB 仪器报告之间的真正区别。

还要记住，MonoTouch 本身在模拟器中将使用比在设备上更多的内存，因为在模拟器上它被调整为快速编译（以使调试尽可能快），而在设备上它被调整为更好的运行时性能。

# java - 检查 double 类型的变量是否为空，生成错误

> ID：10101964
> 
> 赞同：0
> 
> 时间：2012-04-11T07:52:59.017
> 
> 标签：java, android

我只是在检查一个双变量的值是否为空，奇怪的是，一个错误提示“operator == is undefined for double”？

**代码**：

```
public double getGyro_X() {
    if (this.gyro_X == null) {
        Toast.makeText(this, ""+gyro_XIsNullText, ToastdurationShort).show();
    } else {
    return this.gyro_X;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:55:12.280

那么它的类型`double`而不是类型`Double`.. 并且 double 不能为 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:57:18.470

this.gyro_X 显然是一个实例变量，它会自动初始化为 0。

如果您希望能够检查 null，则必须使用 Double（= double 的包装类）。

只是为了清楚起见：双打是原语，双打是对象。基元不能为空，因此您不能将它们与空进行比较。可以与 null 进行比较的对象。

# cakephp - cakephp中的主页重定向

> ID：10101966
> 
> 赞同：0
> 
> 时间：2012-04-11T07:53:03.290
> 
> 标签：cakephp, cakephp-2.0

当用户访问我的网站[http://xyz.com/](http://xyz.com/)时，可能会发生以下两种情况之一：

1.  用户未登录
    *   我希望用户重定向到`users/login`
2.  用户登录（活动会话）
    *   我希望用户重定向到`dashboard/`

我修改了路线：

```
Router::connect('/', array('controller' => 'users', 'action' => 'login')); 
```

登录重定向工作正常并重定向到仪表板，但是当我点击主页时，它带我去`users/`

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:28:05.673

尝试这个

```
$this->redirect(array('controller' => 'users', 'action' => 'login')); 
```

# ruby - 在 ruby 中，如何序列化数组并保留每个元素的数字/字符串类型？

> ID：10101967
> 
> 赞同：2
> 
> 时间：2012-04-11T07:53:03.397
> 
> 标签：ruby, serialization

我的应用程序导入了一些 csv 数据，然后我构建了一个数组，对其进行序列化，并将其保存在数据库字段中。我以序列化形式保存它，因为每次导入的数据具有不同的结构......有时是 3 列，有时是 10 列，等等。

[[“水果”, “价格”, “重量”], [“苹果”, 1.23, 4.5], [“橙子”, 5.2, 3.3]]

导入的数据在字符串周围有引号，在数字周围没有引号，因此在导入期间我能够保留每个元素的类型。

但是当我序列化它（保存在数据库字段中）时，`ActiveSupport::JSON.encode(csv_data)` 每个元素都保存为字符串

[[“水果”、“价格”、“重量”]、[“苹果”、“1.23”、“4.5”]、[“橙子”、“5.2”、“3.3”]]

因此，当我对其进行反序列化时，数值已转换为字符串，但我需要将它们作为数字进行后处理。

问题是，每个数据导入都是不同的……有时它都是数字，有时第一列是字符串，有时 2 或 3 列可能是字符串。

我不在乎我是否使用 JSON——我只需要一种对数据进行编码和解码的方法，这样我就可以将其填充到数据库字段中，而不会在解码期间丢失“类型”。

我应该使用某种 xml 方法而不是 JSON 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:34:12.900

[元帅](http://www.ruby-doc.org/core-1.9.3/Marshal.html)来救援！

```
tmp = [["fruit", "price", "weight"], ["Apple", 1.23, 4.5], ["Orange", 5.2, 3.3]]
dmp = Marshal.dump(tmp)
p Marshal.load(dmp)
# => [["fruit", "price", "weight"], ["Apple", 1.23, 4.5], ["Orange", 5.2, 3.3]] 
```

# android - 活动中的片段

> ID：10101968
> 
> 赞同：1
> 
> 时间：2012-04-11T07:53:06.393
> 
> 标签：android, fragment

我不知道为什么，我无法覆盖后退按钮：我尝试了我所知道的一切来覆盖我的后退按钮。

并且`fragment.addToBackStack(null)`不工作。

有人有解释吗？

我正在使用 android 3.0，并且我有包含 4 个 frameLayout 的活动，我在其中关联片段。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            return false;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:00:38.720

如果您已经处理了关键事件，您应该返回 true，这将停止任何回调传播到 android 操作系统以处理事件。 [http://developer.android.com/reference/android/view/View.html#onKeyDown(int](http://developer.android.com/reference/android/view/View.html#onKeyDown(int) , android.view.KeyEvent) 所以从 return false 改变；返回真；你应该很好。并在那里输入一些日志以明确正在执行的路径:)

# ruby-on-rails-3 - Cocoon 的 ClientSideValidations

> ID：10101971
> 
> 赞同：0
> 
> 时间：2012-04-11T07:53:13.743
> 
> 标签：ruby-on-rails-3, client-side-validation, cocoon-gem

我正在使用 client_side_validations(3.2.0.beta.3) 和 client_side_validations-formtastic (2.0.0.beta.3) 在表单上，​​我在 cocoon gem (https://github.com) 的帮助下添加了嵌套字段。 com/nathanvda/cocoon) 和验证抛出错误'验证器未定义'我认为问题是来自 cocoon 的嵌套字段的 FromBuilder 不为 client_side_validations 所知。有没有人遇到这个问题并找到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:12:04.130

我遇到了同样的问题。我对此进行了深入研究，似乎没有针对以下组合的有效解决方案：1）简化的表单构建器（simple_form 或 formtastic），2）嵌套表单（nested_form 或 cocoon），以及 3）客户端验证。

我试图让这个[演示](https://github.com/umerkulovb/formtastic-cocoon-client-side-validations-demo)工作，但无济于事。

[此处](https://github.com/nathanvda/cocoon/issues/56)和[此处](https://github.com/bcardarella/client_side_validations/issues/71)的讨论似乎表明有人正在研究解决方案，尽管现在似乎没有解决方案。

只是希望这可以在将来节省一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T13:31:43.193

在某处添加这个JS，它应该工作：

```
$(form_selector).on('cocoon:after-insert', function() {
    $(form_selector).enableClientSideValidations();
}); 
```

# symfony - 带有 OpenID 的 Symfony 2.0 FOSUserBundle

> ID：10101976
> 
> 赞同：0
> 
> 时间：2012-04-11T07:53:48.033
> 
> 标签：symfony, openid, fosuserbundle

我尝试将 FOSUserBundle 与 FpOpenIDBundle 集成，但是在进行身份验证时遇到了问题。我收到错误

> 不支持“Alef\UserBundle\Entity\User”的实例。

我的课看起来像这样

```
<?php

namespace Alef\UserBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\Common\Collections\Collection;
use FOS\UserBundle\Entity\User as BaseUser;
use FOS\UserBundle\Model\GroupInterface;
use Doctrine\ORM\Mapping as ORM;

 /**
 * User Entity
 *
 * @ORM\Entity
 * @ORM\Table( name="alef_users" )
 * 
 * @author James Morris <james@jmoz.co.uk>
 * @package SecurityBundle
 */
class User extends BaseUser implements \FOS\UserBundle\Model\GroupableInterface
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToMany(targetEntity="Alef\UserBundle\Entity\Group")
     * @ORM\JoinTable(name="alef_user_groups",
     *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id")}
     * )
     */
    protected $groups;

    /**
     * @var string
     *
     * @ORM\Column(name="firstname", type="string", length=255)
     */
    protected $firstname;

    /**
     * @var string
     *
     * @ORM\Column(name="lastname", type="string", length=255)
     */
    protected $lastname;

    /**
     * @var string
     *
     * @ORM\Column(name="facebookId", type="string", length=255)
     */
    protected $facebookId;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    public function serialize()
    {
        return serialize(array($this->facebookId, parent::serialize()));;
    }

    public function unserialize($data)
    {
        list($this->facebookId, $parentData) = unserialize($data);
        parent::unserialize($parentData);
    }

    /**
     * @return string
     */
    public function getFirstname()
    {
        return $this->firstname;
    }

    /**
     * @param string $firstname
     */
    public function setFirstname($firstname)
    {
        $this->firstname = $firstname;
    }

    /**
     * @return string
     */
    public function getLastname()
    {
        return $this->lastname;
    }

    /**
     * @param string $lastname
     */
    public function setLastname($lastname)
    {
        $this->lastname = $lastname;
    }

    /**
     * Get the full name of the user (first + last name)
     * @return string
     */
    public function getFullName()
    {
        return $this->getFirstName() . ' ' . $this->getLastname();
    }

    /**
     * @param string $facebookId
     * @return void
     */
    public function setFacebookId($facebookId)
    {
        $this->facebookId = $facebookId;
        $this->setUsername($facebookId);
        $this->salt = '';
    }

    /**
     * @return string
     */
    public function getFacebookId()
    {
        return $this->facebookId;
    }

    /**
     * @param Array
     */
    public function setFBData($fbdata)
    {
        if (isset($fbdata['id'])) {
            $this->setFacebookId($fbdata['id']);
            $this->addRole('ROLE_FACEBOOK');
        }
        if (isset($fbdata['first_name'])) {
            $this->setFirstname($fbdata['first_name']);
        }
        if (isset($fbdata['last_name'])) {
            $this->setLastname($fbdata['last_name']);
        }
        if (isset($fbdata['email'])) {
            $this->setEmail($fbdata['email']);
        }
    }

    public function __construct()
    {
        parent::__construct();
        $this->facebookId = 0;
    }

} 
```

我知道这是继承问题，因为 FpOpenId 继承了原始的 symfony 安全用户类，但 FOSUSer 没有从它继承。有没有办法更新 FPOpenIDBundle 以实际使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:09:53.313

我的配置如下：

```
use FOS\UserBundle\Model\User as BaseUser;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\Security\Core\Role\RoleInterface;
use Symfony\Component\Security\Core\User\UserInterface as SecurityUserInterface;

class User implements UserInterface, GroupableInterface
{
} 
```

由于超自定义功能，我正在覆盖整个班级。

只需添加

```
class User extends BaseUser implements UserInterface, GroupableInterface 
```

问候， 马克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:45:34.717

```
use FOS\UserBundle\Model\GroupableInterface;
use FOS\UserBundle\Model\GroupInterface;

class User extends BaseUser
{
    public function addGroup(GroupInterface $group)
    {
        parent::addGroup($group);
    }
} 
```

# html - max-height:100% 在 Firefox 和 IE 上不起作用

> ID：10101981
> 
> 赞同：1
> 
> 时间：2012-04-11T07:54:03.247
> 
> 标签：html, internet-explorer, firefox, css

我想使用 css 调整图像并将图像扩展到浏览器的最大高度，但 max-height:100% 在 Firefox 和 IE 上不起作用。两者都是最新版本。在 FF 和 IE 上，图像以原始大小显示。所以它太大了。max-height:100% 仅对 chrome 有效？或者有什么解决方案吗？

它不适用于背景图像，因此 background-size:cover 不是我想知道的。

PS：我不需要适合浏览器宽度的图像。只有最大高度：100%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:01:46.297

希望这可以帮助！！

```
#background{
position:absolute;
height:100%;
width: 100%;
top:0px //Adjust this value
margin-left:0px; //Adjust this value
} 
```

# php - php代码显示而不是运行

> ID：10101986
> 
> 赞同：0
> 
> 时间：2012-04-11T07:54:18.357
> 
> 标签：php

我正在使用带有 wampserver 的 php 5.2.4。一切顺利。我在几天内完成了几项工作。没有问题。

但我面临一个特殊的问题。我为该页面编写的脚本正在显示而不是呈现的网页。我的页面在这里给出：

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "abdrhm30@yahoo.com";
    $email_subject = "Your email subject line";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $first_name = $_POST['first_name']; // required
    $last_name = $_POST['last_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

     echo "<br>";
     echo $email_from + $email_to + $email_message;
      echo "<br>";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n".
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
}
?> 
```

当我从 phpmyadmin 运行它时，它在页面的左上角显示 0。我检查了 short_tag ，重新启动了服务器两次。但没有结果。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:10:55.140

创建一个文件 phpinfo.php 并在其中添加以下代码：

```
phpinfo(); 
```

如果您仍然能够看到代码，请重新安装您的 wampserver 并确保 Apache 服务器正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:37:01.557

您对字符串连接如何与 javascript 一起工作感到困惑。我的意思是这一行：

```
echo $email_from + $email_to + $email_message; 
```

将其替换为

```
echo $email_from . $email_to . $email_message; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:37:13.460

检查空格

还 - 从您的 PHP 文件末尾删除 ?>，这也可能导致输出错误

# java - 如何通过 JBoss HttpRouter 向端点发送带有参数的 POST 请求？

> ID：10101988
> 
> 赞同：0
> 
> 时间：2012-04-11T07:54:49.280
> 
> 标签：java, jboss, httprequest, esb

我正在处理一个 ESB 项目，我需要使用 POST 请求调用 REST 服务。HttpRouter 似乎是正确的方法，因为它同时支持 GET 和 POST 方法，但我找不到在调用中注入参数的方法。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:16:35.973

您可以尝试[Apache HTTP 库](http://hc.apache.org/index.html)。它非常易于使用，并且具有操作 HTTP 请求所需的全面类集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:29:03.910

找到了答案......这很愚蠢。您需要做的就是在 Message 对象中注入参数，它们将在请求的正文中。这是由 JBoss 创建的示例代码，它是从 HttpRouter 的单元测试中找到的：

```
 final ConfigTree tree = new ConfigTree("WrappedMessage");
    tree.setAttribute("endpointUrl", "http://127.0.0.1:8080/esb-echo");
    tree.setAttribute("method", "post");
    tree.setAttribute("unwrap", "false");
    tree.setAttribute("MappedHeaderList", "SOAPAction, Content-Type, Accept, If-Modified-Since");

    HttpRouter router = new HttpRouter(tree);
    Message message = MessageFactory.getInstance().getMessage(type);
    message.getBody().add("bar");

    Message response = router.process(message);
    String responseBody = (String)response.getBody().get();
    String responseStr = null;
    if (deserialize)
        responseStr = Encoding.decodeToObject(responseBody).toString();
    else
        responseStr = responseBody;

    return responseStr; 
```

# java - 从 C++ 堆栈类创建 java 泛型堆栈类

> ID：10101990
> 
> 赞同：0
> 
> 时间：2012-04-11T07:54:53.683
> 
> 标签：java, templates, generics

```
#include <cstdlib>
#include<iostream>
using namespace std;
template <typename T>
class stack
{
  public:
  T arr[100];
  int top;
  stack()
  {
    top=-1;
  }
  public:
  void push(T x)
  {
    if(top==99)
        cout<<"overflow";
    else
        arr[++top]=x;
  }
  public :
  T pop(void)
  {
    if(top==-1)
        return 0;
    else
        return arr[top--];
  }

};
int main(int argc, char** argv) 
{
  stack <int> s;
  int x;
  cout<<"\nEnter no : ";
  cin>>x;
  s.push(x);
  x=s.pop();
  cout<<"Element popped : "<<x;
  return 0;
 } 
```

这是我的可变数据类型堆栈类的 C++ 代码。它做pop、push的基本功能。我想将此代码转换为 java generics 。因为我对 java 泛型不是很熟悉。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:07:57.527

```
 import java.util.EmptyStackException;
import java.util.Vector;

public class Stack  extends Vector{

```
 /**
 * Creates an empty Stack.
 */
public Stack() {

}

public E pop() {
    E   obj;
    int len = size();

    if (len == 0)
        throw new EmptyStackException();
    obj = elementAt(len - 1);
    removeElementAt(len - 1);
    return obj;
}

public void push(E e) {

    if(e==null)
        throw new NullPointerException();
    addElement(e);

}

public int size() {
    return elementCount;
}

public static void main(String args[]){

Stack<Integer>  integerStack= new Stack<Integer>();

//(7,1,3,3,5,1,2,4,3)
integerStack.push(7);
integerStack.push(1);
integerStack.push(3);
integerStack.push(3);
integerStack.push(5);
integerStack.push(1);
integerStack.push(2);
integerStack.push(4);
integerStack.push(3);

System.out.println("STACK WITH INTEGER ELEMENTS");
//Size
System.out.println("Size of the Stack is : "+integerStack.size());

// String Stack
Stack<String>  stringStack= new Stack<String>();

//("abc","def","acd","fgi","fth","lmn","zxy","cde","adr")
stringStack.push("abc");
stringStack.push("def");
stringStack.push("acd");
stringStack.push("fgi");
stringStack.push("fth");
stringStack.push("lmn");
stringStack.push("zxy");
stringStack.push("cde");
stringStack.push("adr");

System.out.println("STACK WITH STRING ELEMENTS");
//Size
System.out.println("Size of the Stack is : "+stringStack.size());

//pop
stringStack.pop();

//Size after pop
System.out.println("Size of the Stack After pop is : "+stringStack.size()); 
```

}

} 
```

# cxf - 在 JAX-RS CXF 中通过上下文传递自定义对象

> ID：10101994
> 
> 赞同：3
> 
> 时间：2012-04-11T07:55:08.030
> 
> 标签：cxf, interceptor, cxfrs

我有一个 InInterceptor 从 HTTPHeaders 获取一些信息并创建一个自定义对象

```
public void handleMessage(Message message) throws Fault {
    final HttpServletRequest request = (HttpServletRequest) message
            .get(AbstractHTTPDestination.HTTP_REQUEST);
    String a= request.getHeader("A");
    String b= request.getHeader("B");
    message.put("CustomObject", new CustomObject(a,b));
} 
```

然后在服务方法中，我使用下面的代码来获取自定义对象

```
final Message message = PhaseInterceptorChain.getCurrentMessage();
final CustomObject customObject=(CustomObject)message.getContextualProperty("CustomObject"); 
```

我想知道是否有可能通过@Context ..

```
@GET
@Path("/custom")
@Produces("application/json")
public List<Node> getA(@Context("CustomObject") String user) throws XYZException; 
```

谢谢

# xml - 从 Universe 数据库生成 XML 文档

> ID：10101997
> 
> 赞同：0
> 
> 时间：2012-04-11T07:55:26.440
> 
> 标签：xml, xslt, universe

我需要从 Universe 数据库生成 XML 文档。这些 XML 文件是 SSIS 包的来源。所以首先我必须生成 XML 文件。为此，我正在使用以下命令。SELECT FIRST 1000 LIST TOXML ELEMENTS 它返回 1000 条记录，很好。我在这里有一些问题，1.我如何指定一个条件来选择只满足的记录a。名称如“S%”（SQL Server）的示例 2\. 某些字段具有多个值，例如

```
<RECORD>
<BRANCH>A</BRANCH>
<SUB_BRANCH>A1</SUBBRANCH>
<SUB_BRANCH>A2</SUBBRANCH>
<SUB_BRANCH>A3</SUBBRANCH>
</RECORD>
<RECORD>
<BRANCH>B</BRANCH>
<SUB_BRANCH>B1</SUBBRANCH>
<SUB_BRANCH>B2</SUBBRANCH>
</RECORD>
<RECORD>
<BRANCH>C</BRANCH>
<SUB_BRANCH>C1</SUBBRANCH>
</RECORD> 
```

从这里我想根据

如下所示：

```
<RECORD>
<BRANCH>A</BRANCH>
<SUB_BRANCH>A1</SUBBRANCH>
</RECORD>
<BRANCH>A</BRANCH>
<SUB_BRANCH>A2</SUBBRANCH>
</RECORD>
<BRANCH>A</BRANCH>
<SUB_BRANCH>A3</SUBBRANCH>
</RECORD>
<RECORD>
<BRANCH>B</BRANCH>
<SUB_BRANCH>B1</SUBBRANCH>
</RECORD>
<BRANCH>B</BRANCH>
<SUB_BRANCH>B2</SUBBRANCH>
</RECORD>
<RECORD>
<BRANCH>C</BRANCH>
<SUB_BRANCH>C1</SUBBRANCH>
</RECORD> 
```

这可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:35:55.703

我不明白选择的事情，所以只是在这里评论 XSL 部分。在处理方面，您的源 XML 存在一些问题。首先，您需要一个根元素才能处理它。其次，您的 SUB_BRANCH 似乎以 SUBBRANCH 结束（没有下划线），因此您的 XML 无效。假设这些是固定的：

```
<xsl:template match="RECORD">
    <xsl:element name="RECORD">
    <xsl:for-each select=".//SUB_BRANCH">
        <xsl:element name="BRANCH">
            <xsl:value-of select="../*"/>
        </xsl:element>
        <xsl:element name="SUB_BRANCH">
            <xsl:value-of select="node()"/>
       </xsl:element>

    </xsl:for-each>
        </xsl:element>
</xsl:template> 
```

将是在输出中为您提供所需内容的一种方式，但我强调，它只有在您修复源数据时才有效（并且如果它是自动生成的，无论生成它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:46:25.410

您的 SELECT 可能看起来像这样

SELECT filename WITH fieldname LIKE ...something... AND WHEN mvfieldname = somethingelse

WITH 子句将处理单值字段和多值字段中子值的 WHEN 子句