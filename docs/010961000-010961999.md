# StackOverflow 问答 10961000-10961999

# android - 嵌套目录创建者：Phonegap

> ID：10961000
> 
> 赞同：8
> 
> 时间：2012-06-09T12:28:19.777
> 
> 标签：android, cordova, directory

如何使用此 API 在 Phonegap 中创建嵌套目录？

```
fileSystem.root.getDirectory("Android/data/com.phonegap.myapp/dir_one/dir_two/", {create:true}, gotDir, onError); 
```

我在 Android 2.2 中使用 Phonegap 1.8.0。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T14:26:41.963

此功能将帮助您创建嵌套目录。

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    console.log("device is ready");
    window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function fail() {
    console.log("failed to get filesystem");
}

function gotFS(fileSystem) {
    window.FS = fileSystem;

    var printDirPath = function(entry){
        console.log("Dir path - " + entry.fullPath);
    }

    createDirectory("dhaval/android/apps", printDirPath);
    createDirectory("this/is/nested/dir", printDirPath);
    createDirectory("simple_dir", printDirPath);
}

function createDirectory(path, success){
    var dirs = path.split("/").reverse();
    var root = window.FS.root;

    var createDir = function(dir){
        console.log("create dir " + dir);
        root.getDirectory(dir, {
            create : true,
            exclusive : false
        }, successCB, failCB);
    };

    var successCB = function(entry){
        console.log("dir created " + entry.fullPath);
        root = entry;
        if(dirs.length > 0){
            createDir(dirs.pop());
        }else{
            console.log("all dir created");
            success(entry);
        }
    };

    var failCB = function(){
        console.log("failed to create dir " + dir);
    };

    createDir(dirs.pop());
} 
```

有关完整示例，请查看此[要点](https://gist.github.com/2901135)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T09:31:54.450

只是为 dhaval 的功能添加一些东西：对于任何兼容 Javascript 文件系统的浏览器来说，它都不是防弹的。如果您将它与 Chrome 一起使用并且您的路径是一个空字符串，它将失败，因为显然，对于 Chrome，在空字符串上使用 split() 会返回一个元素数组，一个元素本身就是一个 epmty 字符串，这会导致目录创建失败。我对其进行了修改以纠正问题（出于我自己的目的，还有一些其他不相关的更改）：

```
function createPath(fs, path, callback) {
    var dirs = path.split("/").reverse();
    var root = fs.root;

    var createDir = function(dir) {
        if (dir.trim()!="") {
            root.getDirectory(dir, {
                create: true,
                exclusive: false
            }, success, function(dir) {
                error("failed to create dir " + dir);
            });
        } else {
            callback();
        }
    };

    var success = function(entry) {
        root = entry;
        if (dirs.length > 0) {
            createDir(dirs.pop());
        } else {
            callback();
        }
    };

    createDir(dirs.pop());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T16:51:43.500

这段代码应该做你想做的事：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(filesys) {
    filesys.root.getDirectory("story_repository", {create: true, exclusive: false}, function(dirEntry) {
        dirEntry.getDirectory("dir_name", {create: true, exclusive: false}, function(dirName) {
            dirName.getDirectory("img", {create: true, exclusive: false}, function(imgDir) {
                console.log("img creation worked");
            }, function(error) {
                console.log("create img failed");
            });
            dirName.getDirectory("res", {create: true, exclusive: false}, function(imgDir) {
                console.log("res creation worked");
            }, function(error) {
                console.log("create res failed");
            });
        }, function(error) {
            console.log("create dir_name failed");
        })
    }, function(error) {
        console.log("create story repository failed");
    });
}, function(error) {
    console.log("request file system failed");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-05T16:56:33.350

有一个用于 cordova-phoengap 的简单文件管理器，您可以执行此操作以及更多功能：

[https://github.com/torrmal/cordova-simplefilemanagement](https://github.com/torrmal/cordova-simplefilemanagement)

您可以递归地创建目录：

```
//CREATE A DIRECTORY RECURSIVELY as simple as:

new DirManager().create_r('folder_a/folder_b',Log('created successfully')); 
```

让我知道它是否有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-15T18:18:43.503

我正在使用这个：

```
function recursiveGetFile(root, path, opts, success, fail) {
    function dir(entry) {
        var name = path.shift();
        if (path.length > 0)
            entry.getDirectory(name, opts, dir, fail);
        else
            entry.getFile(name, opts, success, fail);
    }
    path = path.split('/');
    dir(root);
}, fail); 
```

# php - 反码。PHP中的字符串指南

> ID：10961001
> 
> 赞同：0
> 
> 时间：2012-06-09T12:28:23.847
> 
> 标签：php

> **可能重复：**
> [反转 MD5 哈希](https://stackoverflow.com/questions/1471654/reversing-an-md5-hash)

我有一些代码用于从字符串创建 Guid。

代码工作正常，但我现在需要反转它创建的 Guid 并将其转换回字符串。

这是我用来将字符串转换为 Guid 的代码：

```
$s = strtoupper(md5($myString));
$guidText = 
substr($s,0,8) . '-' . 
substr($s,8,4) . '-' . 
substr($s,12,4). '-' . 
substr($s,16,4). '-' . 
substr($s,20); 

echo $guidText; 
```

如何反转此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:31:08.527

您只能将其反转回 MD5 哈希。您不能真正将*MD5*哈希恢复为原始字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T12:33:01.257

您正在寻找的是`encryption/decryption`功能，而不是`hash function`（例如`md5`）。哈希函数是不可逆的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T12:31:18.663

`md5()`是一个哈希函数。哈希函数不可逆

# javascript - 如何在 Firefox 中使用 href 刷新页面

> ID：10961010
> 
> 赞同：6
> 
> 时间：2012-06-09T12:29:27.537
> 
> 标签：javascript, refresh

我正在使用以下代码通过链接刷新我的页面：

```
<a href="javascript:history.go(0)"> 
```

这适用于 Safari（即页面刷新为新内容）。然而，在 Firefox 中，我得到了缓存页面。有没有办法让它在所有浏览器中工作，或者我需要不同的方法？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T12:31:52.240

您可以使用：

```
<a href='#' onclick='location.reload(true); return false;'>click me</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-28T18:06:40.957

您可以将 href 保留为空，它将重新加载当前页面。

```
<a href=''>Reload</a> 
```

不需要 onclick 事件或 #.

# mysql - 在 MySQL 中统一异构表

> ID：10961020
> 
> 赞同：0
> 
> 时间：2012-06-09T12:30:33.833
> 
> 标签：mysql, sql, database-design

在我的 MySQL 数据库中，我有一个`products`表格

```
id | type | name | weight | base_price | [...] 
```

where`id`是主键，`type`是`ENUM('personal','industrial')`. 个人和工业产品都在`products_personal`和`products_industrial`表中存储了一些附加信息。两者都是形式

```
pid | additional info [...] 
```

`pid`外键在哪里和`products.id`的附加信息不同。在我的表中，我有两个函数（通过）和. 这些函数使用和一些附加信息来计算最终价格。`products_personal``products_industrial``CREATE FUNCTION``PRICE_PERSONAL(...)``PRICE_INDUSTRIAL(...)``base_price`

我希望为`id | type | name | [...] | price`我的所有产品创建一个视图。我现在的候选人是

```
CREATE VIEW foo AS

SELECT id, type, name, [...], PRICE_PERSONAL(params) AS price
FROM products
INNER JOIN products_personal ON products.id = products_personal.pid

UNION

SELECT id, type, name, [...], PRICE_INDUSTRIAL(params) AS price
FROM products
INNER JOIN products_industrial ON products.id = products_industrial.pid 
```

但这很笨重，似乎会导致性能不佳`ORDER BY`（因为它需要对未索引的`UNION`结果进行排序）。

是否有更简洁的表或查询结构来完成此类查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T22:59:27.707

没有实际测试它，但尝试这样的事情：

```
CREATE VIEW foo AS

SELECT id, type, name, [...], PRICE_PERSONAL(params) AS price
FROM products
INNER JOIN products_personal ON products.id = products_personal.pid
WHERE type = 'personal'

UNION ALL

SELECT id, type, name, [...], PRICE_INDUSTRIAL(params) AS price
FROM products
INNER JOIN products_industrial ON products.id = products_industrial.pid
WHERE type = 'industrial' 
```

这个想法是通过过滤来尽早切断“错误”行`products.type`。另外，我应该感谢@ypercube 的发现`UNION ALL`。

下的字段是什么`ORDER BY`？他们可能应该被索引。

# java - 将 JLabel 移到前面

> ID：10961023
> 
> 赞同：1
> 
> 时间：2012-06-09T12:30:37.247
> 
> 标签：java, image, jlabel, image-manipulation

我正在放置两个图像。一张应该是背景图片，另一张应该是简笔画的图片。我想把简笔画放在背景前面。我可以通过插入代码来将背景图片放在代码之后以显示棒图来实现这一点。我想知道是否有办法通过在背景代码之后插入简笔画代码来完成同样的事情，这样我就可以继续将新的 JLabels 放在背景之上。

有效的代码：

```
 guy.setBounds(0,0,100,100);
    panel.add(guy);

    backgroundPic.setBounds(0,0,550,550);
    panel.add(backgroundPic);

    setVisible(true); 
```

我想要工作的代码：

```
 backgroundPic.setBounds(0,0,550,550);
    panel.add(backgroundPic);

    guy.setBounds(0,0,100,100);
    panel.add(guy);

    setVisible(true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:12:51.773

如果您只担心一张背景图片，那么我建议您扩展 JPanel，覆盖paintComponent 并绘制背景图片。

如果您必须关心几个组件的 Z 顺序，那么[JLayeredPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLayeredPane.html)是您的最佳选择。

这是一个显示第一个选项的小片段：

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Point;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test2 {
    private static class PanelWithBackground extends JPanel {

        private Image backgroundImage;
        private Point backgroundLocation = new Point();

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (getBackgroundImage() != null) {
                g.drawImage(getBackgroundImage(), backgroundLocation.x, backgroundLocation.y, this);
            }
        }

        public Image getBackgroundImage() {
            return backgroundImage;
        }

        public void setBackgroundImage(Image backgroundImage) {
            this.backgroundImage = backgroundImage;
            repaint();
        }

        public Point getBackgroundLocation() {
            return backgroundLocation;
        }

        public void setBackgroundLocation(Point backgroundLocation) {
            this.backgroundLocation = backgroundLocation;
            repaint();
        }
    }

    protected static void initUI() throws MalformedURLException {
        JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        PanelWithBackground panelWithBackground = new PanelWithBackground();
        panelWithBackground.setLayout(null);
        panelWithBackground.setBackgroundImage(new ImageIcon(new URL(
                "http://2.bp.blogspot.com/-PqKuKt5mRmc/Tvi-K-4FVVI/AAAAAAAACKg/YwzkME5gGvk/s1600/black+background.jpg")).getImage());
        JLabel guy = new JLabel(new ImageIcon(new URL(
                "http://www.clipproject.info/Cliparts_Free/Menschen_Free/Clipart-Cartoon-Design-04.gif")));
        // Next 2 lines should rather be performed by a LayoutManager
        panelWithBackground.setPreferredSize(new Dimension(1024, 768));
        guy.setBounds(50, 200, guy.getPreferredSize().width, guy.getPreferredSize().height);

        panelWithBackground.add(guy);
        frame.add(panelWithBackground);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:37:06.323

您可以使用 Z 顺序来指示组件应呈现的顺序：

```
java.awt.Container.getComponentZOrder(Component) 
```

根据文件：

> 返回容器内组件的 z 顺序索引。组件在 z 顺序层次结构中的位置越高，其索引就越低。具有最低 z 顺序索引的组件最后绘制，高于所有其他子组件。
> 
> 参数：**comp**被查询的组件
> 
> 返回： 组件的 z 顺序索引；如果组件为 null 或不属于容器，则返回 -1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:38:23.907

我不会声称自己是 Java 专家，也不会声称这是正确的，只是猜测，但请尝试删除

> .setBounds()

如果这没有效果，请尝试使用

> .setSize()

祝你好运:)

# html - Firefox td 宽度不会随第一行的 td 变化

> ID：10961024
> 
> 赞同：0
> 
> 时间：2012-06-09T12:30:39.277
> 
> 标签：html, firefox, html-table, resize, row

我有一张有 4 列和**几**行的表。
问题是在 Firefox 中，如果我将**第一行**中的第**一个 TD**从**80px 调整**为**120px ，则其他行中****第一个**TD的宽度**不会**随着第一行中的 TD 而改变（这意味着其他 TD 保持 80px 不变）。（在 IE 中一切正常。）

 ******我记得如果在任何 TD 上设置了宽度，那么整个列都会有这个宽度。但似乎 Firefox 没有遵循这个规则。

与该表相关的 CSS 如下所示：

```
.grid .body_table
{
    table-layout:fixed;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:36:35.303

为了做到这一点，给第一个 td 一个类，就像`<td class="first">`在 CSS 中一样，请做`td.first { width:120px }`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T03:19:50.743

[这听起来与https://bugzilla.mozilla.org/show_bug.cgi?id=735579](https://bugzilla.mozilla.org/show_bug.cgi?id=735579)非常相似，如果是这样，应该在 Firefox 14 中修复。******

# mysql - mysql - 是否有工具可以显示 mysql 引擎接收到的所有 sql 命令的实时日志？

> ID：10961025
> 
> 赞同：2
> 
> 时间：2012-06-09T12:30:40.993
> 
> 标签：mysql

使用 mysql - 是否有工具可以显示 mysql 引擎接收到的所有 sql 命令的实时日志？

一个。查看 DML 命令的解释计划会很有帮助。
湾。如果可以在 mysql 服务器上打开和关闭它而无需重新启动服务，那将很有帮助。
C。像mysql本身一样开源/免费会很好。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:35:45.247

您首先需要激活[通用查询日志](http://dev.mysql.com/doc/refman/5.0/en/query-log.html)。必须有一些工具可以帮助您解析此日志，我最喜欢的是：

```
tail -f /path/to/mysql.log 
```

;)

不幸的是，这可能不会被动态禁用，您需要重新启动服务器才能激活/禁用日志。

不过要小心，激活此日志会对性能产生严重影响。不要在生产中使用它。

# sfml - 使用 c# 时用于 smfl 的 gui 库

> ID：10961027
> 
> 赞同：0
> 
> 时间：2012-06-09T12:31:07.940
> 
> 标签：sfml, cegui

存在[CEGUI](http://www.cegui.org.uk/wiki/index.php/Main_Page)，这是一个很好的 GUI 库，可用于 SFML。现在的问题是 SFML 有 C# 绑定，但 CEGUI 没有可用的 - 看起来......

是否有任何其他 GUI 库，与 SFML 一起工作，我可以在 C# 中使用？

我想避免仅仅因为没有可用的 GUI 库而跳到 C++...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:10:36.680

我不能保证，但我在搜索与 SFML .Net 绑定一起使用的 GUI 库时偶然发现了这个：[gwen-dotnet](http://code.google.com/p/gwen-dotnet/)

# django - django - 理解 LocaleMiddleWare (translation.deactivate)

> ID：10961030
> 
> 赞同：1
> 
> 时间：2012-06-09T12:31:20.413
> 
> 标签：django, internationalization

我使用 django.middleware.locale.LocaleMiddleware 来获取 i18n'ed 网站并通过[set_language redirect](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#the-set-language-redirect-view)制作语言“切换器” 。

我只是无法理解几件事：

1.  为什么它在 process_responce 期间调用`translation.deactivate`（[github 上的源代码）？](https://github.com/django/django/blob/master/django/middleware/locale.py#L42)

2.  这是否意味着我不能使用这个中间件？（它只显示一次不同语言的页面，然后切换回来。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:49:08.560

`translation.deactivate`被调用是因为当前语言存储在全局（线程本地）变量中。它在请求进入时设置，并且在该请求完成时必须取消设置，以防止它“泄漏”到下一个请求中（例如，假设一个线程处理一个必须本地化为葡萄牙语的请求，然后另一个请求在未设置本地化。如果未禁用葡萄牙语本地化，则下一个请求也将本地化为葡萄牙语）。

# android - Android - 如何使用 ListView 在布局上启用整页滚动？

> ID：10961036
> 
> 赞同：0
> 
> 时间：2012-06-09T12:32:04.643
> 
> 标签：android, android-layout

我有一个带有 ListView 的布局。列表滚动良好，但有时页面上的其他内容需要更大，并且列表或其他内容占用了太多屏幕，所以我需要全部滚动。

可以这样做吗？

这是我到目前为止的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>    

<TextView
    android:id="@+id/view_name"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Business:"
    />       

<TextView
    android:id="@+id/business_privacy"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Loading..."
    />     

<TextView
    android:id="@+id/think"    
    android:layout_width="fill_parent"
    android:layout_marginTop ="5dp"
    android:textColor="@color/light_best_blue"
    android:paddingLeft="10px"   
    android:layout_height="wrap_content"
    android:text="Fill out each section below"
    />     

    <ListView
    android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px"
       >        
    </ListView>

</LinearLayout> 
```

即使文本占据了整个屏幕，有什么方法可以让用户轻松查看文本和列表？我可以使文本可滚动吗？它在水平视图中尤其糟糕，所以我认为必须有一些 ux 模式才能让它发挥得很好。

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:41:22.920

1-将具有较大文本的文本视图放在列表视图的标题中，以便它与列表一起滚动...

或者

2-将文本视图放在其他固定大小的滚动视图中，如屏幕的 1/3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:42:25.537

您可以进行内容包装，也可以使用`HorizontalScrollView`. 可以在[此处](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)找到有关它的 Android 文档。

# iphone - 动画 CGContextFillRect

> ID：10961037
> 
> 赞同：0
> 
> 时间：2012-06-09T12:32:14.657
> 
> 标签：iphone, objective-c, ios

我有一个进度视图，我正在尝试为正在进行的更改设置动画。你怎么做呢？下面是绘制进度的代码。

提前致谢

```
- (void)drawRect:(CGRect)rect {
    // Drawing code.
    CGContextRef context = UIGraphicsGetCurrentContext();

    // draw the background
    CGContextSaveGState(context);
    UIBezierPath *outerPath = [UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:0];
    [outerPath addClip];

    CGPoint backgroundStartPoint = CGPointMake(0.0f, 0.0f);
    CGPoint backgroundEndPoint = CGPointMake(0.0f, CGRectGetHeight(rect));
    CGContextDrawLinearGradient(context, _backgroundGradient, backgroundStartPoint, backgroundEndPoint, 0);

    CGContextRestoreGState(context);

    // draw the progress
    CGContextSaveGState(context);
    UIBezierPath *innerPath = [UIBezierPath bezierPathWithRoundedRect:CGRectInset(rect, 1.0f, 1.0f) cornerRadius: 0];
    [innerPath addClip];

    [_glossTintColor setFill];
    CGRect progressRect = CGRectMake(0, 0, CGRectGetWidth(rect)*_progress, CGRectGetHeight(rect));
    CGContextFillRect(context, progressRect);

    CGContextRestoreGState(context);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:34:35.887

每当进度发生变化时，使用触发重绘`[view setNeedsDisplay];`

请参阅 上的UIView[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)`setNeedsDisplay`。

例如，假设您创建的自定义视图有一个名为 的属性`progress`，实例变量名为`_progress`。让我们还假设属性被某个事件/计时器/附加线程更新。

```
- (void)setProgress:(float)progress
{
    _progress = progress;
    [self setNeedsDisplay];
} 
```

这会覆盖原始设置器并添加上述功能。

# android - 在列表视图中动态显示图像

> ID：10961039
> 
> 赞同：0
> 
> 时间：2012-06-09T12:32:35.710
> 
> 标签：android

我在列表视图中再次显示 text1、image 和 text2。该图像与 text1 相关。并非所有 text1 都包含图像。因此，如果 text1 包含图像，它将显示或不显示。当图像存在时，text1、image 和 text2 显示良好。但是当图像不存在时，text2 不会显示。只有 text1 显示在列表中。我哪里出错了？帮我解决这个问题......

我的代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
--
 ---
---
---
((TextView) view.findViewById(R.id.text1)).setText(listItem.gettext1());
imageUrl = "http://server.com//folder/"+ ret.get(0);(ret.get(0) is the name of the image along with extension)
imView = (ImageView)view.findViewById(R.id.img);
drawable = LoadImageFromWebOperations(imageUrl);
imView.setImageDrawable(drawable);
((TextView) view.findViewById(R.id.text2)).setText(listItem.gettext2());

}

private Drawable LoadImageFromWebOperations(String url) {
try {
    InputStream is = (InputStream) new URL(url).getContent();
    Drawable d = Drawable.createFromStream(is, "src-name");
    return d;
    } catch (Exception e) {
        System.out.println("Exc=" + e);
        return null;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:36:36.623

请在此处使用延迟加载，请参阅下面的示例，它可能会对您有所帮助。

[延迟加载列表视图](https://github.com/thest1/LazyList)

# javascript - jquery mobile popup-服务器端

> ID：10961041
> 
> 赞同：1
> 
> 时间：2012-06-09T12:32:49.633
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用这样的 jquerymobile 弹出窗口`<div id="dialogs" data-role="popup">......</div >` ，从一个愤怒的标签调用它，它工作正常。我如何从（ASP.net）服务器端显示这个弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:05:59.873

您可以像这样从 ASP.NET 中发送 JavaScript 代码：

```
void MyButton_Click(object sender, EventArgs e)
{
    Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "popup", "$(document).ready(function() { $('#dialogs').popup(); });", true);

} 
```

单击`MyButton_Click`服务器端按钮时运行，它应该会导致您的弹出窗口自动出现。

编辑：在您的特定情况下，这是工作代码：

```
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "popup", "$(document).ready(function() {$.mobile.changePage('#dialogs', {transition: 'pop', role: 'dialog'});});", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:10:32.043

实现这一目标有不同的机制：

*   轮询长
*   轮询
*   网络套接字

您需要使用其中之一从您的服务器回调您的 JavaScript (jquery)。老实说，两种轮询机制都是浏览器-> 服务器的一种方式，而长轮询则利用了延长的超时时间。只有 websockets 是双向浏览器 <-> 服务器。

拍

# c# - 不同 DataGrid 行的不同选择颜色

> ID：10961044
> 
> 赞同：2
> 
> 时间：2012-06-09T12:33:08.460
> 
> 标签：c#, wpf, xaml, multidatatrigger

我正在尝试根据行的类型以及是否选择它来为数据网格中的不同行设置不同的颜色：

```
<Style TargetType="DataGridCell" x:Key="ActiveCellStyle">
    <Setter Property="Foreground" Value="Black"/>
    <Style.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                 <Condition Binding="{Binding Type}" Value="0"/>
                 <Condition Property="IsSelected" Value="False"/>
            </MultiDataTrigger.Conditions>      
            <Setter Property="Background" Value="#FFDFE6ED"/>
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                 <Condition Binding="{Binding Type}" Value="0"/>
                 <Condition Property="IsSelected" Value="True"/>
            </MultiDataTrigger.Conditions>      
            <Setter Property="Background" Value="#FF6CAFF1"/>
        </MultiDataTrigger>
        ...
    </Style.Triggers>
</Style> 
```

当我运行它时，我得到 ArgumentException: key cannot be null。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:16:31.687

With `MultiTrigger`you use`Property`和 with `MultiDataTrigger`you use `Binding`，你不能把它们结合起来。所以改变

```
<Condition Property="IsSelected" 
```

至

```
<Condition Binding="{Binding RelativeSource={RelativeSource Self},
                             Path=IsSelected}" 
```

它应该可以工作

```
<Style TargetType="DataGridCell" x:Key="ActiveCellStyle">
    <Setter Property="Foreground" Value="Black"/>
        <Style.Triggers>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding Type}" Value="0"/>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Self},
                                                 Path=IsSelected}"
                                       Value="False"/>
                </MultiDataTrigger.Conditions>
                <Setter Property="Background" Value="#FFDFE6ED"/>
            </MultiDataTrigger>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding Type}" Value="0"/>
                <Condition Binding="{Binding RelativeSource={RelativeSource Self},
                                             Path=IsSelected}"
                           Value="True"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Background" Value="#FF6CAFF1"/>
        </MultiDataTrigger>
    </Style.Triggers>
</Style> 
```

# eclipse - 面临 GWT 设计器模式的问题

> ID：10961047
> 
> 赞同：0
> 
> 时间：2012-06-09T12:33:39.080
> 
> 标签：eclipse, gwt

我正在使用 Eclipse Helios 3.6（32 位）。我安装了 GWT 插件并创建了一个新的 Web 应用程序。在客户端文件夹中，我试图用 GWT 设计器打开一个文件，但不幸的是我收到了一个错误：

> 内部错误遇到意外的内部错误。这可能是由错误或错误配置问题、冲突、部分更新等引起的。
> `java.lang.UnsupportedClassVersionError: Bad version number in .class file`

堆栈跟踪：

```
java.lang.UnsupportedClassVersionError: Bad version number in .class file   
    at java.lang.ClassLoader.defineClass1(Native Method)  
    at java.lang.ClassLoader.defineClass(ClassLoader.java:620)  
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)  
    at java.net.URLClassLoader.access$100(URLClassLoader.java:56)  
    at java.net.URLClassLoader$1.run(URLClassLoader.java:195)  
    at java.security.AccessController.doPrivileged(Native Method)  
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)  
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)  
    at java.lang.ClassLoader.loadClass(ClassLoader.java:299)  
    at java.lang.ClassLoader.loadClass(ClassLoader.java:251)  
    at com.google.gdt.eclipse.designer.hosted.tdt.HostedModeSupport.loadImpl
        (HostedModeSupport.java:110)  
    at com.google.gdt.eclipse.designer.hosted.tdt.HostedModeSupport.<init>
        (HostedModeSupport.java:83)
    at com.google.gdt.eclipse.designer.hosted.tdt.HostedModeSupportFactory.create
        (HostedModeSupportFactory.java:32)
    at com.google.gdt.eclipse.designer.model.widgets.support.GwtState.getHostedModeSupport
        (GwtState... (missing part here)
    ...org.eclipse.wb.internal.core.editor.errors.ExceptionComposite$3.widgetSelected
        (ExceptionComposite.java:129) 
```

- - ETC

我在项目属性 1.6 和首选项-> java-> 使用 1.6 安装的 JDK/JRE 中有 JavaCompiler。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:17:24.897

通常，当 JavaCompiler 项目属性中有任何问题时，它会抛出主要/次要版本 51.0 的错误。所以这里很可能通过检查系统中安装的java版本和你正在使用的版本是不同的。使它们都兼容，错误将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T00:09:51.460

我不确定具体细节，但很可能您正在尝试使用 JDK 1.5 运行设计器。这就是该错误的原因。我会重新检查一切。

此外，我还想验证 32 位与 64 位 java sdk。

# hibernate - 标准中的 setResultTransformer

> ID：10961048
> 
> 赞同：24
> 
> 时间：2012-06-09T12:33:44.607
> 
> 标签：hibernate, criteria, hibernate-criteria

条件 API 中 setResultTransformer 方法的用途是什么？有人可以用一个简单的例子来解释吗？我阅读了 javadocs，但我无法清楚地理解它们。

问候，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T15:09:25.940

不使用 setProjections() 的 Criteria 查询的默认 ResultTransformer 将是`ROOT_ENTITY`.

如果我们有 Student 与 Department 的多对多关系，则查询可能如下所示...

```
 Session session = (Session) getEntityManager().getDelegate();
    Criteria crit = session.createCriteria(Student.class)
        .createAlias('departments', 'department'); 
```

此查询将返回重复项。但是设置`ResultTransformer`为...

```
 crit.setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY); 
```

现在，当 Hibernate 编组结果时，结果将是不同的。（或者我的意思是解组？）

如果您不希望 Hibernate 将查询作为 a 返回，`List<Student>`但更愿意将结果作为 a 处理，`List<Object[]>`则

```
 crit.setResultTransformer(CriteriaSpecification.PROJECTION) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-22T12:49:41.520

简单地说：当您执行标准时：您希望结果集成为特定对象，您可以像这样使用它：例如：

```
 .setResultTransformer(Transformers.aliasToBean(Employee.class)); 
```

`Employee` 应该与 `ResultSet`实体匹配。

# objective-c - 从 UITableView 和对应文件中删除单元格

> ID：10961051
> 
> 赞同：0
> 
> 时间：2012-06-09T12:34:09.367
> 
> 标签：objective-c, xcode

我有一个包含许多单元格的表格视图。如果我在其中任何一个上滑动，就会出现一个删除按钮，如果我按下它，单元格就会消失，但是当我重新加载表格时，它会重新出现。从中加载的文件是这种 txt 文件：

```
row1, row2, row3, row4, row5... 
```

如何从文件中删除其中一行，例如删除 row3 ...

……并且有……

```
row1, row2, row4, row5... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:52:45.427

```
// Example file contents
NSString *fileContents = @"row1, row2, row3, row4, row5";

// Separate the titles into an array
NSMutableArray *titles = [[fileContents componentsSeparatedByString:@", "] mutableCopy];

// Remove row3 (at index 2 because indexes start from 0
[titles removeObjectAtIndex:2];

// Combine the array back into a string
NSString *result = [titles componentsJoinedByString:@", "];

// Log the result for debugging
NSLog(@"%@", result); 
```

印刷：`row1, row2, row4, row5`

此示例代码创建一个看起来像您的文本文件的字符串，将其拆分为一个数组，删除一个索引，然后将修改后的数组组合回一个字符串。

希望您会发现其中的一些代码很有用（我猜您可能已经使用了其中的一些或类似的东西）。

# php - 访客柜台

> ID：10961061
> 
> 赞同：1
> 
> 时间：2012-06-09T12:36:05.200
> 
> 标签：php, mysql, session, visitor-pattern

当用户打开页面并刷新它时，我有下面的代码插入，我想通过单击页面内移动到另一个页面的任何链接或单击 X 来更新访问表集 leaveTime=$time 当用户离开页面时或按 ALT+F4 ......这是我的尝试：

```
session_start();
if (!isset($_SESSION["visits"]))
    $_SESSION["visits"] = 0;
    $_SESSION["visits"] = $_SESSION["visits"] + 1;
if ($_SESSION["visits"] > 1){
    mysql_query("INSERT INTO najd_visit( visit_userId, visit_staticId, visit_page, visit_enterTime,visit_refreshTime)VALUES ('$userId', '$Sid', '$title','$Stime' ,'$date') ");
    echo "You hit the refresh button!";}else{
    mysql_query("INSERT INTO najd_visit( visit_userId, visit_staticId, visit_page, visit_enterTime)VALUES ('$userId', '$Sid', '$title', '$date') ");
    echo "This is my site".$_SESSION["visits"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:48:13.933

无法注册离开页面的用户。您可以根据用户的活动进行估计，但仅此而已。

但是，您可以做的是检测用户来自哪里。如果用户在 1:00 从 index.php 开始并在 1:02 到达 page2.php，您可以检查 $_SERVER-superglobal 以检测用户来自 index.php 并更新该特定统计信息。

但除此之外，知道用户何时离开您的页面并不是很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T12:48:37.273

PHP 无法检测到访问者何时离开您的网站。

但是，您可以使用 JavaScript 检测页面`unload`事件，然后快速发出 AJAX 请求来记录离开……这并不总是有效，因为网络延迟可能会导致您的脚本在浏览器开始加载时被“跳过”下一页。

要检测站点偏离您自己页面上的链接，您可以让所有链接转到服务器上的一个小型重定向脚本；这记录了访问者离开另一个站点。

在所有其他情况下，您只需假设 5 分钟左右后访问的最后一页是“出发页”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:12:36.453

要检查用户何时离开，您可以执行此操作。

## 在客户端

[每 10 秒对http://www.yousite.com/update_user.php?userID=](http://www.yousite.com/update_user.php?userID=) *user_id*执行一次 ajax 请求。

该脚本将更新您的 mysql 数据库上的一行，它应该看起来像这样。

```
UPDATE online_user SET last_check=NOW() WHERE user_id=$_GET['userID'] 
```

## 在服务器端

> 每分钟启动一个 cron。它将检查女巫用户没有更新他们的行（让我们花 20 秒来确保安全）

```
SELECT user_id FROM online_user WHERE last_check <= *NOW() - 20 seconds* 
```

然后，您可以在任何地方编辑行，只要您想在他的“last_check”和 +10 秒之间说出与 user_id 相对应的用户，如果需要精确，您可以每 1 或 2 秒执行一次请求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-08T15:28:23.967

如果您只想创建访问计数器，请参阅本教程，它非常适合您 [http://talkerscode.com/webtricks/create-a-simple-pageviews-counter-using-php-and-mysql.php](http://talkerscode.com/webtricks/create-a-simple-pageviews-counter-using-php-and-mysql.php)

首先你必须创建数据库

```
CREATE TABLE `pageview` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`page` text NOT NULL,
`userip` text NOT NULL,
 PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=latin1 
```

// 全视图

```
CREATE TABLE `totalview` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`page` text NOT NULL,
`totalvisit` text NOT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=latin1 
```

每当新访问者访问网页时更新表格

```
$user_ip=$_SERVER['REMOTE_ADDR'];

$check_ip = mysql_query("select userip from pageview where page='yourpage' and userip='$user_ip'");
if(mysql_num_rows($check_ip)>=1)
{

}
else
{
  $insertview = mysql_query("insert into pageview values('','yourpage','$user_ip')");

  $updateview = mysql_query("update totalview set totalvisit = totalvisit+1 where page='yourpage' ");
} 
```

就这样

# php - PHP post数组不能回显

> ID：10961063
> 
> 赞同：0
> 
> 时间：2012-06-09T12:36:10.393
> 
> 标签：php, post, foreach

我在html中有代码：

```
<input type="text" name="product[0][name]" value="name of product 1"/>
<input type="text" name="product[1][name]" value="name of product 2"/>
<input type="text" name="product[2][name]" value="name of product 3"/>
<input type="text" name="product[3][name]" value="name of product 4"/> 
```

我尝试通过 $_POST 发送这个。当我使用

```
print_r($_POST['product']); 
```

我得到了我的产品清单：

```
Array
(
    [product] => Array
        (
            ['201'] => Array
                (
                    ['name'] => J5313 BEŻOWE
                    ['price'] => 14.99
                    ['quantity'] => 1
                    ['size'] => 36
                    ['product_subtotal'] => 14.99
                )

            ['200'] => Array
                (
                    ['name'] => J5313 SZARE
                    ['price'] => 14.99
                    ['quantity'] => 1
                    ['size'] => 37
                    ['product_subtotal'] => 14.99
                )

        )

) 
```

一切都很好，但是如果我想回显我的数组变量，我有空变量！它是我的代码：

```
foreach($_POST['product'] as $key => $value){
        echo "product key: $key, product name: ".$value['name']."";
} 
```

php 在文档中写的内容：

```
product key: 0, product name:
product key: 1, product name:
product key: 2, product name:
product key: 3, product name: 
```

$key 变量不为空，但 $value 为空！我尝试更改 $value var 的名称，但它不能解决我的问题。任何人都知道我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:57:00.507

由于不清楚，根据您的代码，为什么您会遇到此问题，您可以采取一些调试步骤：

**显示所有警告**

```
error_reporting(-1);
ini_set('display_errors', 'On'); 
```

将这两行添加到您的脚本并运行它；如果有任何明显的问题，例如缺少索引，它将在您的页面中回显警告。

**添加更多调试**

由于您的循环可以找到键，因此您应该`var_dump($value);`在循环内确定您是否打错了字（尽管这会通过显示所有警告来显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:11:06.330

```
foreach($_POST['products'] as $value)
        foreach($value as $k => $v)
                echo $k." -> ".$v['name']; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T12:48:02.150

试试这个：

```
 foreach($_POST['product'] as $key => $value){
     echo "product key: $key, product name: " . $_POST['product'][$key]['name'];
 } 
```

# mysql - 如何在 mysql 中创建具有 BLANK 值的唯一键？

> ID：10961075
> 
> 赞同：0
> 
> 时间：2012-06-09T12:37:25.413
> 
> 标签：mysql

我有一张`mysql`桌子`users`。

名为`Email`包含`NULL`值的列。

我无法`unique`在`email`. 它显示一个错误说`duplicate value ''`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:54:55.153

那是因为您在 email 列上有多个记录，其值为空：`''`

如果你使用 InnoDB 你可以有多个`NULL`值，但你不能有多个空值`''`。

尝试使用清除空值，`UPDATE users SET email = NULL WHERE email = ''`然后创建唯一键。

# javascript - 使用滑动动画将文本框“转换”为文本区域

> ID：10961077
> 
> 赞同：1
> 
> 时间：2012-06-09T12:37:35.027
> 
> 标签：javascript, jquery, jquery-animate, positioning

我正在尝试制作一个带有展开箭头的文本框，单击该箭头会删除文本框并将其替换为更大的文本区域，并使用 jQuery 提供漂亮的滑动动画。问题是，右侧相对定位的箭头和左侧的标签随着文本框的展开而向下滑动。我一直在尝试,和其他 CSS 属性的各种组合`vertical-align`，试图将它们保持在顶部，但无济于事。有趣的是，该设计适用于 Firefox，标签和箭头停留在我想要的位置，但不适用于 Chrome 或 IE。你可以在[这里](http://sha1.in/expand.php)看到工作。`display``padding`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:01:51.960

您需要设置`vertical-align: top;`为您的文本区域，并且在制作动画时不要更改它。我在 Chrome 调试器中尝试过，它工作正常。

`<input type="text" />`另外，你为什么用 a交换`<textarea>`？为什么不`<textarea>`从一开始就拥有，只是给它一个小的高度？

**UPD。**也分配`vertical-align: top;`给您的`<input>`元素，以便标签和箭头在您将其交换到 textarea 时保持在同一位置。如果需要，使用`top`或`margin-top`将它们稍微向下推。

*//我手头没有 IE，所以目前无法为您提供帮助...建议更改后 IE 中发生了什么？*

# java - 我可以将会话 bean 与另一个注入的类一起使用吗？

> ID：10961080
> 
> 赞同：0
> 
> 时间：2012-06-09T12:37:47.757
> 
> 标签：java, jakarta-ee, dependency-injection, ejb, stateless-session-bean

我有一个由消息驱动 bean 和几个会话 bean 组成的应用程序。其中之一有一个 DAO 对象，负责访问数据库或 FTP 服务器。

我需要有两个应用程序。它们之间的唯一区别是 DAO 类的实例。我可以在部署阶段指定该实例吗？

我的目的是避免代码重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:53:31.933

如果 DAO 只是一个 POJO，那么如果您使用的是 EE6，我建议使用 Class env-entry（如果不是，则建议使用 String env-entry，然后自己执行 Class.forName）：

```
<env-entry>
  <env-entry-name>daoClass</env-entry-name>
  <env-entry-type>java.lang.Class</env-entry-type>
  <!-- Specify a default, override at deployment time. -->
  <env-entry-value>com.example.project.DefaultDAO</env-entry-value>
</env-entry>

@Resource(name="daoClass")
private void setDAOClass(Class<com.example.project.DAO> daoClass) {
    this.dao = daoClass.newInstance();
} 
```

或者，如果您的 DAO 实现是 EJB，那么您可以使用`@EJB`注入，并在部署时指定绑定名称。

# python - python中的'\a'如何等于'\7'？

> ID：10961081
> 
> 赞同：5
> 
> 时间：2012-06-09T12:37:55.463
> 
> 标签：python

```
a = '\a'
>>> b = '\7'
>>> a == b
True
>>> 
```

怎么可能`a`和`b`平等？有人可以给出原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T12:41:35.150

`\a`是控制字符 BEL 的转义字符序列（a 表示警报）。字符的 ASCII 码也恰好是 7，与转义序列中的**八进制**`\7`值相匹配。

参考：

[http://en.wikipedia.org/wiki/Bell_character](http://en.wikipedia.org/wiki/Bell_character)

[http://docs.python.org/reference/lexical_analysis.html#string-literals](http://docs.python.org/reference/lexical_analysis.html#string-literals)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T12:41:46.850

它们是相等的，因为`\a`表示 Python 中的 ASCII 贝尔字符。查看[ASCII 表](http://www.asciitable.com/)，该字符的值为 7。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T12:40:49.160

```
ord('\a')
7

ord('\7')
7 
```

因此两者相等。

此[ASCII 表](http://www.ascii-code.com/)将显示`\a`(BEL) 具有*八进制*字符代码 7

同样，但也许现在并不那么令人惊讶，

```
a = ('\t')
b = ('\11')  # octal character code for tab

a == b
True 
```

如果您查阅 ASCII 表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T12:41:45.147

事实证明`\a`并`\7`具有相同的值：

```
>>> a = '\a'
>>> b = '\7'
>>> a
'\x07'
>>> b
'\x07' 
```

`\a`是 ASCII[贝尔 (BEL) 字符](https://en.wikipedia.org/wiki/Bell_character)( [source )，它在 ASCII 表 (](http://docs.python.org/release/2.5.2/ref/strings.html) [ASCII 表](http://www.asciitable.com/))中确实具有值 7 。

# visual-studio-2010 - visual c++ cURL网页源到String^

> ID：10961087
> 
> 赞同：0
> 
> 时间：2012-06-09T12:38:35.153
> 
> 标签：visual-studio-2010, visual-c++, curl, c++-cli

我正在寻找解决方案如何将网站读取到 system::String^

我发现 curl 到 std::string 的想法，但在转换链接器后有一些错误；/

这是我的代码：

```
using namespace std;

string contents; 
size_t handle_data(void *ptr, size_t size, size_t nmemb, void *stream) 
{ 
    int numbytes = size*nmemb; 
    // The data is not null-terminated, so get the last character, and replace 
    // it with '\0'. 
    char lastchar = *((char *) ptr + numbytes - 1); 
    *((char *) ptr + numbytes - 1) = '\0'; 
    contents.append((char *)ptr); 
    contents.append(1,lastchar); 
    *((char *) ptr + numbytes - 1) = lastchar;  // Might not be necessary. 
    return size*nmemb; 
} 
```

..

```
 CURL* curl = curl_easy_init(); 
if(curl) 
    { 
       // Tell libcurl the URL 
       curl_easy_setopt(curl,CURLOPT_URL, "google.com"); 
       // Tell libcurl what function to call when it has data 
       curl_easy_setopt(curl,CURLOPT_WRITEFUNCTION,handle_data); 
       // Do it! 
       CURLcode res = curl_easy_perform(curl); 
       curl_easy_cleanup(curl); 
    textBox2->Text = gcnew String(contents.c_str());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:26:25.510

如果您使用的是 .Net，为什么不使用它进行下载？

```
using namespace System;
using namespace System::Net;

int main(array<System::String ^> ^args)
{
    WebClient web;
    String^ text = web.DownloadString("http://www.google.de");
    Console::WriteLine(text);
    return 0;
} 
```

如果由于某些原因必须使用 cURL，这应该可以

```
std::vector<char> LoadFromUrl(const char* url)
{
    struct Content
    {
        std::vector<char> data;
        static size_t Write(char * data, size_t size, size_t nmemb, void * p)
        {
            return static_cast<Content*>(p)->WriteImpl(data, size, nmemb);
        }

        size_t WriteImpl(char* ptr, size_t size, size_t nmemb)
        {
            data.insert(end(data), ptr, ptr + size * nmemb);
            return size * nmemb;
        }
    };

    Content content;

    CURL* curl = curl_easy_init();
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &content);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &Content::Write);
    curl_easy_setopt(curl, CURLOPT_URL, url);
    curl_easy_perform(curl);

    content.data.push_back('\0');

    return content.data;
}

int main(array<System::String ^> ^args)
{
    auto content = LoadFromUrl("http://www.google.de");
    String^ text = gcnew String(&content.front());

    Console::WriteLine(text);
    return 0;
} 
```

# python - 如何使用 Python Regex 查找后跟符号的所有单词？

> ID：10961090
> 
> 赞同：3
> 
> 时间：2012-06-09T12:39:10.710
> 
> 标签：python, regex, whitespace

我需要`re.findall`检测后面的单词`a "="`

所以它适用于一个例子

```
re.findall('\w+(?=[=])', "I think Python=amazing") 
```

但它不适用于“我认为 Python = Amazing”或“Python =amazing”......我不知道如何正确地整合空格问题。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T12:42:42.480

```
'(\w+)\s*=\s*'
re.findall('(\w+)\s*=\s*', 'I think Python=amazing')   \\ return 'Python'
re.findall('(\w+)\s*=\s*', 'I think Python = amazing') \\ return 'Python'
re.findall('(\w+)\s*=\s*', 'I think Python =amazing')  \\ return 'Python' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T13:12:35.760

您说“再次陷入正则表达式”可能是参考您之前的问题[寻找一种在脚本](https://stackoverflow.com/questions/10955665/looking-for-a-way-to-identify-and-replace-python-variables-in-a-script)中识别和替换 Python 变量的方法，您可以在其中得到您所问问题的答案，但我认为您没有问这个问题你真的很想知道答案。

您正在寻求重构 Python 代码，除非您的工具*理解*Python，否则它将产生误报和误报；也就是说，查找`variable =`不是分配的实例和缺少与您的正则表达式不匹配的分配。

[在您为 Python 使用哪些重构工具](https://stackoverflow.com/questions/28796/what-refactoring-tools-do-you-use-for-python)中提供了部分工具列表？使用“重构 Python your_editing_environment”进行更一般的搜索将产生更多结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T12:44:44.087

只需在之前添加一些可选的空格`=`：

```
\w+(?=\s*=) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T12:42:14.850

**改用这个**

```
 re.findall('^(.+)(?=[=])', "I think Python=amazing") 
```

**解释**

```
# ^(.+)(?=[=])
# 
# Options: case insensitive
# 
# Assert position at the beginning of the string «^»
# Match the regular expression below and capture its match into backreference number 1 «(.+)»
#    Match any single character that is not a line break character «.+»
#       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
# Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=[=])»
#    Match the character “=” «[=]» 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T12:44:23.340

您需要在单词和之间允许空格`=`：

```
re.findall('\w+(?=\s*[=])', "I think Python = amazing") 
```

您还可以通过在单词周围使用捕获组来简化表达式，而不是在等号周围使用非捕获组：

```
re.findall('(\w+)\s*=', "I think Python = amazing") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-09T12:50:49.327

`r'(.*)=.*'`也会这样做...

你有任何东西#1，后面`=`跟着任何东西#2，你得到任何东西#1。

```
>>> re.findall(r'(.*)=.*', "I think Python=amazing")
['I think Python']
>>> re.findall(r'(.*)=.*', "  I think Python =    amazing oh yes very amazing   ")
['  I think Python ']
>>> re.findall(r'(.*)=.*', "=  crazy  ")
[''] 
```

然后您可以`strip()`返回列表中的字符串。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-09T15:11:22.837

```
re.split(r'\s*=', "I think Python=amazing")[0].split() # returns ['I', 'think', 'Python'] 
```

# java - Java中有二进制文字吗？

> ID：10961091
> 
> 赞同：31
> 
> 时间：2012-06-09T12:39:38.337
> 
> 标签：java, syntax, binary, literals

我想用二进制文字声明我的整数。在Java中可能吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-09T12:41:17.443

从 Java 7 开始，您可以将整数直接表示**为二进制数**，使用`0b`(或`0B`) 后跟一个或多个二进制数字（0 或 1）的形式。例如，`0b101010`是整数 42。与八进制和十六进制数一样，二进制文字可能表示负数。

如果您没有 Java 7，请使用：

```
int val = Integer.parseInt("001101", 2); 
```

还有其他输入整数的方法：

1.  作为十进制数，如`1995`, `51966`。负十进制数，例如`-42`实际上是由整数文字和一元否定运算组成的表达式。

2.  作为八进制数，使用前导 0（零）数字和一个或多个附加八进制数字（0 到 7 之间的数字），例如 077。八进制数可以计算为负数；例如`037777777770`实际上是十进制值-8。

3.  作为十六进制数，使用形式 0x（或 0X）后跟一个或多个十六进制数字（从 0 到 9、a 到 f 或 A 到 F 的数字）。例如，`0xCAFEBABEL`是长整数 3405691582。与八进制数一样，十六进制文字可能表示负数。

更多细节可以[在这个 Wikibook](http://en.wikibooks.org/wiki/Java_Programming/Literals/Numeric_Literals/Integer_Literals)中找到。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-06-09T12:41:34.607

在 JDK 7 中可以：

```
int binaryInt = 0b101; 
```

只需在您的号码前加上`0b`.

# python - 使绘图中的颜色连续（如果可能，通过识别和勾勒边界）

> ID：10961093
> 
> 赞同：2
> 
> 时间：2012-06-09T12:40:42.373
> 
> 标签：python, matplotlib

给定二维空间中的一个点，

我有一个函数可以赋予该函数所属的“区域”。区域编号为 '1, 2, 3, ...

使用这个函数，我在 2D 空间中随机选取了很多点，并为每个区域着色。他们每个人都从中心（正方形）开始，这是第一个区域（蓝色）第二个区域（绿色），从内到外依次类推。它看起来像这样： ![在此处输入图像描述](../Images/59acc25d197c5ed08bbdf868a4f0060b.png)

**我怎样才能让这个情节看起来连续而不看起来像很多点？**（每个区域都有一个平滑的颜色）

我用过：

```
import matplotlib.pyplot as plt
for zone in zones:
    plt.plot(X, Y, 'o')  # picks a different color automatically
plt.show() 
```

其中 zone 是形式的字典

```
{zone:[X, Y]} 
```

例如：{1:[[x1, x2, ...], [y1, y2, y3, ...]], 2:[[x11, x22, ...} 其中 (x1, y1), ( x2, y2), ... 属于第一个区域 (x11, y11), ... 属于第 2 个区域等等...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:48:17.307

三个快速建议：

1.  删除标记边框（`Gaby aka G. Petrioli`如前所述）。
2.  使用较小的标记 - 这样可以减少边缘重叠。
3.  使用更多的标记 - 所以空间被均匀地覆盖（当你增加标记的大小时，你当然需要更多来覆盖该区域，无论如何）。

像这样：

![在此处输入图像描述](../Images/56b161611b137dfdf95a8e4f9ecfbff9.png)

由此：

```
import matplotlib.pyplot as plt
import numpy as np

data1 = np.random.random_sample((2, 10000))
data2 = np.random.random_sample((2, 100000))
plt.plot(data1[0], data1[1], 'o',markersize=10, markeredgewidth=1)
plt.plot(data1[0], data1[1]+1, 'o',markersize=10, markeredgewidth=0)
plt.plot(data2[0], data2[1]+2, 'o',markersize=1, markeredgewidth=0)

plt.xlim((-0.5,1.5))
plt.ylim((-0.5,3.5))
plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:08:05.543

如果您删除标记的黑色边框，它肯定会有所改善..

尝试`plt.plot(X, Y, marker='o', markeredgewidth=0)`

# jquery - 我的测试站点中缺少 JQuery 源文件？

> ID：10961099
> 
> 赞同：0
> 
> 时间：2012-06-09T12:41:23.963
> 
> 标签：jquery

我在[w3schools.com](http://w3schools.com/)上测试了以下代码；但是，当我在本地机器上尝试它时，它不起作用。我有一种感觉，原因是我没有 jquery.js 文件。我在想它只是 jquery 脚本声明的一部分，仅此而已。jquery.js 中写了什么？有没有我可以包含的替代文件？

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
    $(this).hide();
  });
});
</script>
</head>

<body>
<button>Click me</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:44:01.717

W3Schools 链接到称为[jquery](http://jquery.com/)的通用 javascript 库。您需要将其下载并本地存储到您的站点以便您可以引用它，或者您可以使用 gooole api 版本：[ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:47:49.890

您可以更改此行

```
<script type="text/javascript" src="jquery.js"></script> 
```

至

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

它将从谷歌 CDN（内容交付网络）加载 jQuery 库。还有其他几个 CDN，在这里查看列表[http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)

或者

在浏览器中加载[https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)`jquery.js`并将文件保存在上述文件所在的目录中，您的代码将正常工作。

查看本教程以获取更多详细信息[http://docs.jquery.com/How_jQuery_Works](http://docs.jquery.com/How_jQuery_Works)

# android - Android - 从操作栏中删除“更多操作”按钮

> ID：10961107
> 
> 赞同：3
> 
> 时间：2012-06-09T12:41:58.767
> 
> 标签：android, android-actionbar

我有一个 ActionBar 应该以自定义方式显示操作按钮。为此，我创建了一个自定义视图并将其附加到 ActionBar。

值得一提的是，我正在使用**menu.xml 资源**文件来加载选项菜单并在智能手机上显示它们，但不要在平板电脑上显示它们，而是使用自定义视图。为此，我将 xml 中的每个菜单项营销为：`android:showAsAction="never"`

一切看起来都很好，除了一个仍然保留在 ActionBar 右侧的小东西——“更多”按钮。

我怎样才能删除它？

![在此处输入图像描述](../Images/77e77c53ce1c2e812cedfd843b0b6039.png)

我试过这个：

```
ActionBar bar = activity.getActionBar();
bar.removeAllTabs(); 
```

但“更多”按钮仍然存在。

**编辑：**
这是我的 menu.xml 文件：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_username"
        android:icon="@drawable/menu_username"
        android:orderInCategory="0"
        android:showAsAction="never"
        android:title="@string/menu_username">
        <menu>
            <item
                android:id="@+id/menu_logout"
                android:title="@string/menu_logout"/>
        </menu>
    </item>

    <item
        android:id="@+id/menu_settings"
        android:icon="@drawable/menu_settings"
        android:orderInCategory="1"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>

    <item
        android:id="@+id/menu_search"
        android:icon="@drawable/menu_search"
        android:orderInCategory="1"
        android:showAsAction="never"
        android:title="@string/menu_search"/>

</menu> 
```

**请注意，我仍然想在智能手机上扩展此菜单，但不想在平板电脑上使用它。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:34:39.793

设置`showAsAction="never"`将强制菜单项溢出。为什么不检查 onCreateOptionsMenu(...) 设备是平板电脑，如果它只是不膨胀菜单？像这样的东西：

```
public boolean onCreateOptionsMenu(Menu menu) {
    if (getResources().getConfiguration().smallestScreenWidthDp >= 600) {
        //It's a tablet, don't inflate, only create the manual view
        manualMenuCreation();
    } else {
        getMenuInflater().inflate(R.menu.menu, menu);
    }
    return true;
} 
```

不要忘记`smallestScreenWidthDp`仅在 3.2 或更高版本中可用，因此您必须考虑到这一点。

# mysql - mysql 查询中的 DATE_ADD 问题

> ID：10961109
> 
> 赞同：3
> 
> 时间：2012-06-09T12:42:10.873
> 
> 标签：mysql, sql, date

我需要显示**今天**和**下周五**`DATE`之间的表格中的所有数据，

 ****为此，我运行了一个查询：

```
Select * 
FROM table 
WHERE

  date_row BETWEEN now()+1 
  and DATE_ADD(now(), INTERVAL 
    (9 - IF(DAYOFWEEK(CURDATE())=5, 8, DAYOFWEEK(now()))) DAY) 
```

Result set 不返回**Next Friday**的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:04:59.093

MySQL 从 1（星期日）开始几天。使用`CURDATE()`而不是`NOW()`截断时间部分，因此您只使用日期并调用`DATE(date_row)`在此处截断它。

如果今天是星期五，则增加 7 天。如果今天不是星期五而是在星期五之前，则添加 (6 - 今天的工作日)。如果今天是星期六，则增加 6 天。

```
WHERE
  DATE(date_row) BETWEEN CURDATE() AND
    DATE_ADD(CURDATE(), INTERVAL (
      /* It's Friday, add 7 */
      IF(DAYOFWEEK(CURDATE())=6, 7, 
      /* It's Saturday, add 6 */
      IF(DAYOFWEEK(CURDATE())=7, 6,
      /* All other days, add 6 - weekday */
      (6 -DAYOFWEEK(CURDATE())))))
   DAY ) 
```

如果你的意思是说你想要*下周*的 Friday而不是*下一个 Friday*，那么 Friday 和 Saturday 是一样的，但其他日子是 (7 + (6 - today's weekday))

```
WHERE
  DATE(date_row) BETWEEN CURDATE() AND
    DATE_ADD(CURDATE(), INTERVAL (
      /* It's Friday, add 7 */
      IF(DAYOFWEEK(CURDATE())=6, 7, 
      /* It's Saturday, add 6 */
      IF(DAYOFWEEK(CURDATE())=7, 6,
      /* All other days, add 6 - weekday + 7*/
      (7 + (6 -DAYOFWEEK(CURDATE()))))))
   DAY ) 
```

然后你可以在没有`IF()`逻辑的情况下简化它，因为星期五 6 + 7 + (6-6) = 7，星期六 7 + 7 + 6 - 7 = 6。

```
WHERE 
  DATE(date_row) BETWEEN CURDATE() AND
    DATE_ADD(CURDATE(), INTERVAL (7 + (6 - DAYOFWEEK(CURDATE()))) DAY) 
```

### 最终更新：

如果今天是星期五不想返回，则不能`CURDATE()`在`BETWEEN`. `OR`如果是星期五，则添加要执行的条件。

```
WHERE
  /* If today is Friday, exclude today, and start counting tomorrow */
  (DAYOFWEEK(CURDATE()) = 6 
     AND DATE(date_row) BETWEEN DATE_ADD(CURDATE(), INTERVAL 1 DAY) AND DATE_ADD(CURDATE(), INTERVAL 7 DAY)
  )  
  OR ( 
    DATE(date_row) BETWEEN CURDATE() AND
    DATE_ADD(CURDATE(), INTERVAL ( 
      /* It's Saturday, add 6 */
      IF(DAYOFWEEK(CURDATE())=7, 6,
      /* All other days, add 6 - weekday + 7*/
      (7 + (6 -DAYOFWEEK(CURDATE())))))
    DAY )
  ) 
```****

# java - 重定向操作导致 struts2 不起作用

> ID：10961116
> 
> 赞同：0
> 
> 时间：2012-06-09T12:42:59.923
> 
> 标签：java, struts2

```
<action name="doLogin" class="controller.LoginAction">
    <result name="input">login.jsp</result>
    <result name="error">login.jsp</result>
    <result name="success" type="redirectAction">
        <param name="actionName">doStartIndex</param>
    </result>
    <result name="adminpage" type="redirect">adminPage.jsp</result>
</action>

<action name="doStartIndex" class="controller.IndexingAction" method="autoAllocate">
    <result>home.jsp</result>
</action> 
```

注意：我使用的是 struts2.2.1

通过使用它，我试图从一个动作转移到另一个动作，但我得到以下 404：

> localhost:80801/ai/
> 请求的资源 (/ai/) 不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:00:11.657

在我的一个场景中，我需要创建一个 bean 类，但由于操作类具有与我想在我的新 bean 类中创建的相同的 bean 元素，但参数化构造函数除外。

所以我正在测试使用插入的动作类来创建一个新的bean类。首先我错了，动作类也可以具有参数化构造函数，当我尝试使用我的动作时，它无法工作并返回到我启动该动作的同一页面，甚至我也没有得到任何堆栈跟踪。

所以人们要记住，我们不应该在没有创建默认构造函数的情况下尝试为动作类创建参数化构造函数。我希望最后一行我是正确的，如果我需要任何更正，请纠正我。

# javascript - 使用 Three.js 变形

> ID：10961117
> 
> 赞同：6
> 
> 时间：2012-06-09T12:43:06.087
> 
> 标签：javascript, webgl, three.js

我正在使用 Three.js 开发一个在线工具，更准确地说，它是关于变形和缩放 3d 对象的各个部分。[我询问是否有一种方法可以像http://nervous.com/cellCycle/](http://n-e-r-v-o-u-s.com/cellCycle/)一样在 Three.js 中变形一个对象（带有从上到右的栏），所以是免费的。

以及如何对像 Torus 一样的网格进行建模，但其截面为矩形而不是圆形。有人遇到过这种问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:51:06.250

如果您正在考虑创建程序几何，您可以尝试查看[http://mrdoob.github.com/three.js/examples/webgl_geometries2.html](http://mrdoob.github.com/three.js/examples/webgl_geometries2.html)

它们也可以动画，查看[http://jsdo.it/zz85/rVta中的代码](http://jsdo.it/zz85/rVta)

# html - 使用浏览器调整图像大小

> ID：10961119
> 
> 赞同：0
> 
> 时间：2012-06-09T12:43:15.993
> 
> 标签：html, css, image, browser, resize

我想在调整浏览器大小时调整图像大小，但这样做时我想在图像的左侧和底部保持 30px 的边框。像这样： http: [//www.jennyvansommers.com/non-commissioned/corner/#347](http://www.jennyvansommers.com/non-commissioned/corner/#347) 有没有使用 CSS 的简单方法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:21:23.227

我会尝试将图像放在容器内，容器具有 100% 的宽度和高度，左侧和底部的填充为 30px，其中的图像也具有 100% 的宽度和高度。

例如

```
<div id="imageWrapper">
  <img src="imageurl" />
</div>

<style> 
    #imageWrapper{width:100%;height:100%;padding:0 0 30px 30px}
    #imageWrapper img{width:100%;height:100%;}
</style> 
```

包装器应该填充窗口，图像应该填充包装器到填充。如果图像的形状与窗口的形状不同，这很可能会拉伸您的图像。如果您想保持图像的纵横比，请尝试仅设置 img 的宽度或高度，但不能同时设置。

希望这可以帮助 ：）

编辑：不确定是否要填充屏幕，如果您希望图像保持其自然大小，则使用 img{max-width:100% 和 img{max-height:100% 而不是宽度和高度，除非窗口是比它还小。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:47:30.780

我希望将最小宽度和最小高度设置为 30 像素，相对宽度和高度为 50%，或者您想要的任何相对大小都可以达到这种效果

```
.image-resize {
  min-hieght:30px;
  min-width:30px;
  height:50%;
  width:50%;
} 
```

抱歉误读了您的问题，边界？还是保证金？有点像

```
margin-left:30px;
margin-bottom:30px; 
```

而不是高度和宽度，你可以使用border-left和border-bottom我想使用透明边框，但我更喜欢边距。但我认为相对尺寸是你想要的？所以它会随着浏览器调整大小，或者实际上是相对于其父级调整大小，所以取决于它在 dom 中的位置

# c - 可以使用单个 Epoll fd 来监视不同类型套接字上的事件吗？

> ID：10961120
> 
> 赞同：0
> 
> 时间：2012-06-09T12:43:16.807
> 
> 标签：c, linux

我一直在构建一个多线程服务器，每个线程都有一个 epoll fd 来管理传入的 tcp 连接。对于线程间通信，我使用了 unix 域套接字，目的是利用现有的每线程 epoll。

但似乎，如果还添加了 unix 域套接字，Epoll 将停止返回网络套接字事件。

我的问题是可以使用一个 Epoll 实例来跟踪 tcp 套接字和 unix 域套接字上的事件吗？这是预期的行为吗？我没有遇到任何文献表明这一点。还是我需要一个单独的 Epoll 实例来跟踪这两种不同类型的套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:10:54.817

epoll、poll 和 select 被设计用来监控多个文件描述符。它不限制在任何时候只监视一个文件/套接字描述符实例。

是否可以使用一个 Epoll 实例来跟踪 tcp 套接字和 unix 域套接字上的事件？是的，使用 epoll 没有具体限制。

看看示例 epoll 程序，[你能推荐一些关于 Linux 上 Epoll 的指南吗](https://stackoverflow.com/questions/27247/could-you-recommend-some-guides-about-epoll-on-linux/6150841#6150841)

# objective-c - 将 twitter 搜索添加到 tableview 中的自定义单元格

> ID：10961122
> 
> 赞同：0
> 
> 时间：2012-06-09T12:43:21.763
> 
> 标签：objective-c, uitableview, twitter, nsdictionary, custom-cell

我有一个 TWRequest，它创建了一个名为 dict 的字典输出。我想将此结果输出到 tableView 中的自定义单元格中。诀窍是每个单独的推文然后被拆分（因为它的“文本”将被分成由冒号分隔的部分）并放入一个数组我正在努力解决如何将“文本”组件从字典中取出并应用这个到桌面视图。这是我的代码...任何建议将不胜感激。提前致谢。

```
 - (void)fetchTweets
{
    // Do a simple search, using the Twitter API
    TWRequest *request = [[TWRequest alloc] initWithURL:[NSURL URLWithString:
                                                         @"http://search.twitter.com/search.json?q=myhashtagforsearchgoeshere"] 
                                             parameters:nil requestMethod:TWRequestMethodGET];

    // Notice this is a block, it is the handler to process the response
    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
    {
        if ([urlResponse statusCode] == 200) 
        {
            // The response from Twitter is in JSON format
            // Move the response into a dictionary and print
            NSError *error;        
            NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];
            NSLog(@"Twitter response: %@", dict);                           
        }
        else
            NSLog(@"Twitter error, HTTP response: %i", [urlResponse statusCode]);
    }];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"MyCell";
        // I'm using a custom cell
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        // then I want to grab the text part only from the tweets
        NSString *tweetText = [[dict objectForKey:@"text"]objectAtIndex:indexPath.row];  
        // then I place the output into an array (the tweet is carved up into 3 components separated by a colon
    NSArray *tweetComponents = [tweetText componentsSeparatedByString:@":"]; 
                    NSLog(@"Tweettext: %@", tweetText);  

    // then I link this to my labels in my custom cell using objectatindex
        cell.myHeader.text = [tweetComponents objectAtIndex:0];
        cell.myDetails.text = [tweetComponents objectAtIndex:1];
        cell.myDate.text = [tweetComponents objectAtIndex:2];

        return cell;
    } 
```

# c++ - 远程线程执行

> ID：10961124
> 
> 赞同：0
> 
> 时间：2012-06-09T12:43:38.253
> 
> 标签：c++, multithreading, distributed-computing

我有一个用 C++ 和 MFC 编写的大型多线程数学应用程序。我正在寻找一种方法来跟踪线程执行（线程启动）并从本地机器获取它（在执行和移动之前停止它）并在远程机器上运行，因为所有 bin 文件和内存堆都已传输。也不可能对应用程序的源代码进行严重修改。

我知道 MPI 正在做类似的工作，对程序进行了一些修改。

你能给点建议吗？感谢所有想法和链接。我还应该读什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:31:43.350

假设他们使用 CThread 创建/启动他们的线程，您*可能*可以编写自己的 CThread 版本来远程创建/启动线程。

我的猜测是，让事情从那里开始工作可能并不容易。Windows 线程（像大多数其他线程一样）与父线程共享内存空间，因此线程可以（例如）父/子线程可以通过传递指针来共享对公共内存的访问。在远程机器上模拟共享内存比在那里创建/运行线程要*复杂*得多。

# html - 上传的文件名未显示在自定义文件输入中

> ID：10961125
> 
> 赞同：0
> 
> 时间：2012-06-09T12:43:40.513
> 
> 标签：html, file-upload, input

我使用下面的代码来自定义文件输入类型，

```
<form class="example" action="#">
<!--<input type="file" class="required-entry filename file" name="filename[]" />-->
<div class="fileinputs">
    <input type="file" class="file hidden">
<div class="fakefile"><input><img src="ravi/images/button_select.gif" /></div></div>
</form> 
```

样式.css

```
<style type="text/css">
    body{
        color: black;
        font-family: arial;
        font-size: 13px;
    }
form.example input {
    background: url('ravi/images/input_boxes.gif') no-repeat 0 -58px;
    border: none;
    width: 241px;
    height: 20px;
    padding-left: 3px;
    padding-top: 3px;
}

form.example input:focus {
    background-color: transparent;
}

form.example div.fileinputs {
    position: relative;
    height: 30px;
    width: 300px;
}

form.example input.file {
    width: 300px;
    margin: 0;
}

form.example input.file.hidden {
    position: relative;
    text-align: right;
    -moz-opacity:0 ;
    filter:alpha(opacity: 0);
    opacity: 0;
    z-index: 2;
}

form.example div.fakefile {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 350px;
    padding: 0;
    margin: 0;
    z-index: 1;
    line-height: 90%;
}

form.example div.fakefile input {
    margin-bottom: 5px;
    margin-left: 0;
}

</style> 
```

页面显示如下，

![在此处输入图像描述](../Images/6e1bb34ec1fb5954e31c033a9ae41a00.png)

当我单击选择按钮时，会出现浏览文件夹，然后我选择图像文件。但在输入文件中，上传的图像标题未显示..

我从`http://www.quirksmode.org/dom/inputfile.html`

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:15:12.930

您需要按照您引用的页面上的说明添加 JavaScript 代码。

如果您在测试中使用的代码基本上由您发布的 HTML 和 CSS 代码组成，那么您使用的是页面上描述的方法的“纯 CSS”版本。在解释基本版本的编号列表中，它也使用 JavaScript，第 5 项描述了“纯 CSS”版本中缺少的功能。该功能是“当用户选择一个文件时，可见的虚假输入字段应显示该文件的正确路径”。

（它实际上不会显示正确的*路径*。出于安全原因，浏览器不会透露真实路径。但它们确实让您显示*文件名*部分。）

# jquery - 更改空白背景颜色

> ID：10961128
> 
> 赞同：0
> 
> 时间：2012-06-09T12:43:54.697
> 
> 标签：jquery, html, css

如果仅是空白，是否可以更改 div 中文本的背景颜色`&nbsp`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:45:19.483

是的。将它放在一个`span` 元素中，使元素不大于文本，并设置该元素的背景颜色。

```
<div><span style="background-color:red;">&nbsp;</span></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:55:42.447

是的，为什么不呢？你尝试了什么？例如，以下工作正常：

```
<div style="background-color: green">&nbsp;</div> 
```

即使元素的内容完全为空，也可以设置背景颜色，`<div></div>`. 它的高度默认为零，所以背景颜色没有影响，但是如果你将`width`属性设置为非零，你会看到颜色集中的背景。

# android - 如何通过 Android O/S 禁用日志记录 - Seek API

> ID：10961140
> 
> 赞同：0
> 
> 时间：2012-06-09T12:45:50.763
> 
> 标签：android, api, logging, seek

我想知道如何禁用由于 Android O/S API 而不是我的支付应用程序本身而发生的日志记录。

[http://code.google.com/p/seek-for-android/](http://code.google.com/p/seek-for-android/)

我无法控制它，因为它依赖于 O/S 本身并且它写入 logcat 文件。

任何建议高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:51:32.140

> 我想知道如何禁用由于 Android O/S API 而不是我的支付应用程序本身而发生的日志记录。

这将需要修改固件本身。欢迎其他应用程序，包括那些属于固件的应用程序，将他们想要的任何内容记录到 LogCat。您的“支付应用程序”无权影响其他应用程序记录的信息。因此，“禁用日志记录”的唯一方法是完全禁用 LogCat，没有任何 SDK 应用程序可以做到这一点。

# arrays - 在 R 中设置 3D 矩阵并访问某些元素

> ID：10961141
> 
> 赞同：37
> 
> 时间：2012-06-09T12:45:53.243
> 
> 标签：arrays, r, element

我正在尝试在 R 中设置一个 3D 矩阵。我想这很容易。但是，到目前为止我还没有找到解决方案。假设我们要创建一个 365x6x4 矩阵。对我来说也很重要的是如何更改矩阵中的一个条目。假设我们要将值 204 分配给元素 [304,5,2]。我非常感谢您的回答！

谢谢！最好的，F

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-09T12:56:04.347

试试这个：

```
ar <- array(someData, c(365, 6, 4));  
ar[304,5,2] <- 204; 
```

`someData`可能在 哪里

```
someData <- rep(0, 365*6*4); 
```

甚至更好

```
someData <- rep(NaN, 365*6*4); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-09T12:55:42.523

矩阵是数组的特殊二维情况。（从帮助中引用`?matrix`）。

所以，你需要`array`：

```
x <- array(rep(1, 365*5*4), dim=c(365, 5, 4))
str(x)
num [1:365, 1:5, 1:4] 1 1 1 1 1 1 1 1 1 1 ... 
```

设置特定值：

```
x[305, 5, 2] <- 204 
```

打印一片：

```
x[305, , ]
     [,1] [,2] [,3] [,4]
[1,]    1    1    1    1
[2,]    1    1    1    1
[3,]    1    1    1    1
[4,]    1    1    1    1
[5,]    1  204    1    1 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-09T12:54:53.417

试试这个简单的例子（已经使这个例子变得相当小，所以很清楚发生了什么 - 我在下面解释如何针对您的精确问题调整它！）...

```
m = array(1:60, dim=c(3,4,5))

m[2,1,5]
[1] 50

m[2,1,5] = -50

m[2,1,5]
[1] -50 
```

键入`m`以查看整个 3d 数组 :)

在您的示例中，您将初始数组设置为`m = array(NA, dim=c(365,6,4))`（这将用 NAs 开始填充它 - 您是否有数据可以填充它？）`m[304,5,2] = 204`当然，分配是 :)

# javascript - TextArea 返回错误值

> ID：10961144
> 
> 赞同：1
> 
> 时间：2012-06-09T12:46:11.000
> 
> 标签：javascript, jquery, textarea

我有一些文本区域

```
<textarea>Default Value</textarea>
<textarea>Default Value</textarea> 
```

用户输入一些文本，我想在 JavaScript 中获取他们的新值：

```
$('textarea').each(function(index, item) {
    alert(item.value);
}); 
```

这听起来很简单，但我得到的只是“默认值”。

我试过了：

```
item.nodeValue, 
item.textContent, 
item.innerHTML. item.innerText, 
item.value, 
$(item).val() in jQuery 
```

我总是得到“默认值”。尽管萤火虫甚至在 HtmlTextAreaElement => 值中显示了新值。那应该是`item.value`吧？我觉得自己很笨，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:11:26.403

> 用户输入一些文本，我想在 JavaScript 中获取他们的新值：

这应该这样做：

```
$('textarea').keyup(function(){
   alert(this.value);
}); 
```

要读取**已输入的值**（而不是在用户键入时），请使用：

```
$('textarea').each(function(index, item) {
    alert(this.value);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:48:00.747

在 textarea 中它不是 item.value，它是 innerHTML

jquery 的 val() 虽然有效

```
<input type="text" value="some text" />
<textarea id="something" name="something">some text</textarea> 
```

你可以做：

```
$('textarea').each(function(index, item){
    console.log($(item).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:59:46.643

给你的文本区域一个“名称”属性

`<textarea name="name">innterHTML</textarea>`

并使用

> item.innerHTML

正如建议的那样，对于 textarea 它是 innerHTML，而不是 value :)

# browser-cache - 如何知道哪些文件存储在浏览器缓存中

> ID：10961146
> 
> 赞同：0
> 
> 时间：2012-06-09T12:46:33.913
> 
> 标签：browser-cache

浏览器如何确定哪些文件存储在缓存中？我想在我的网站上实现一个检查互联网速度的功能，我将通过计算下载一些小文件所需的时间来做到这一点。问题是，如果这些文件存储在缓存中，那么我的算法将不起作用。此外，如果我使用 aspx 创建一个大文件，该文件中唯一变化的是时间，那么也许我应该将其拆分为两个文件，以便可以将不更改的部分存储在缓存中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:17:30.033

您应该注意 HTTP 标头[HTTP 标头](http://en.wikipedia.org/wiki/HTTP_header)。在 ASP.net 的 c# 中：

```
Response.CacheControl = "no-cache";
Response.AddHeader("Pragma", "no-cache"); 
```

但也许您将无法更改它们（取决于您的网络托管服务）。然后，如果一个 HTML 文档：

```
<meta http-equiv="Expires" content="Tue, 01 Jan 2010 00:00:00 GMT">
<meta http-equiv="Pragma" content="no-cache"> 
```

最后，您可以简单地更改名称。添加一个随机参数大部分时间都可以解决问题：

```
..."http://example.org/myresource.extension?time=1213232322"... 
```

# windows - 如何制作原生 Windows 应用程序？

> ID：10961149
> 
> 赞同：5
> 
> 时间：2012-06-09T12:46:55.243
> 
> 标签：windows, native

我的大部分开发工作都是针对 Android 平台进行的，过去也开发过针对 Windows 的应用程序。但是，当我开发 Windows 应用程序时，我总是使用 .NET 框架。这要求最终用户在他们的机器上安装 .NET 框架。

我可以使用哪些编程语言和相关工具来创建可以在 Windows PC（XP 和更高版本）（欢迎使用其他操作系统）上运行的应用程序，而无需先安装 .NET 和 Java 等框架？

非常感谢，托德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T13:05:29.727

大多数 Ms Windows 应用程序都是使用 C++（或 C）开发的，例如访问用于 GUI 的 Win32 API。您还可以使用其他一些编译成 x86 代码的语言，并且如果您需要它们能够访问常规 Win32 DLL（对于输入、GUI 等，请参阅[Win 32 API](http://en.wikipedia.org/wiki/Windows_API)），例如 Pascal。

构建具有某些窗体的 MS Windows 应用程序的第二常用工具必须是 VB 到 VB 6（即在 VB.net 之前），然后可能是 Delphi。

# formatting - 如果代码的格式不符合某些规则，如何使您的代码不可编译？

> ID：10961159
> 
> 赞同：-1
> 
> 时间：2012-06-09T12:48:46.193
> 
> 标签：formatting, compiler-errors

如果其格式与某些规则不匹配，如何使您的代码无法编译？例如（C# 语言）：

```
if (a < b)
{
                  // <-- build error with message "empty line"
     k = j + h;
} 
```

或者

```
public void Method(int a, int name) // <-- build error with message "parameter name 'a' is too short"
{
    //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:54:28.310

如果您专门寻找 C# 样式检查，您是否尝试过[stylecop](http://stylecop.codeplex.com/)？

对于样式检查器的完整列表，[维基百科](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis)是您的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:32:16.247

如果它不符合标准，您可以让您的版本控制系统拒绝签入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:52:02.917

除非编译器有特定的标志来拒绝某些类型的语法，否则你不能让编译器这样做。但是您可以添加一个代码分析脚本，在编译之前分析源代码。您可以在该脚本中实现各种编码风格规则，它会在实际编译之前拒绝源代码。

# iphone - 第一次点击时按钮动作不完美？

> ID：10961164
> 
> 赞同：1
> 
> 时间：2012-06-09T12:49:49.397
> 
> 标签：iphone

我有一个应用程序，其中我的 xib 中有一个 UIView（Zbarsdk 阅读器视图）。点击按钮时，应加载该视图。但实际上，当点击按钮时，前一个视图首先正在加载（我从中进入了我的视图）。但是在运行一次然后再次运行之后，正确的视图正在加载吗？（从登录我回到家。在家里我有一个按钮来加载我的xib中单独的一个视图，但是当第一次运行时它再次加载登录屏幕。但是当你在模拟器中再次运行该代码时不会删除该构建正在加载正确的视图）。有人知道为什么吗？

```
- (IBAction) tappressed
{
    // ADD: present a barcode reader that scans from the camera feed
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    [reader willRotateToInterfaceOrientation:UIInterfaceOrientationPortrait duration:0];
    //[self.readerView willRotateToInterfaceOrientation:orient duration:0];
    //reader.supportedOrientationsMask = ZBarOrientationMask(UIInterfaceOrientationLandscapeRight);

    // [reader shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeRight];
    //reader.supportedOrientationsMask = ZBarOrientationMask(UIInterfaceOrientationLandscapeLeft);
    reader.sourceType=UIImagePickerControllerSourceTypeCamera;
    // UIImageView *overlayImage=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"overlaygraphic.png"]];
    //overlayImage.bounds=CGRectMake(50, 75, 320-100, 480-150);

    reader.cameraOverlayView=cameraOverlay;
    ZBarImageScanner *scanner = reader.scanner;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance

    [scanner setSymbology: ZBAR_I25
             config: ZBAR_CFG_ENABLE
             to: 0];

    // present and release the controller
    [self presentModalViewController:reader animated:YES];

    // [self.view addSubview:reader.view];
    [reader release];
} 
```

# mysql - 为什么 MySQL 和 UTF-8 不识别编码？

> ID：10961168
> 
> 赞同：0
> 
> 时间：2012-06-09T12:50:34.313
> 
> 标签：mysql, encoding, pdo

`PDO`我使用和状态连接到数据库`"SET NAMES":`

```
$db = new PDO('mysql:host=localhost;dbname=gs', 'root','', array(
    PDO::ATTR_PERSISTENT=>true,
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'
)); 
```

我的数据库设置为`"utf8_general_ci"`. 而且，当我从我的站点插入记录（使用 POST）时，它可以工作。但是，当我使用 PHPMyAdmin（或 Admin）插入记录时，**编码失败**。

使用查询插入`INSERT`在网站上给了我很好的编码，但在数据库中，它有所有奇怪的符号。

我该怎么做才能在任何地方都有正确的编码符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:52:53.300

我解决了“案例”，但我看不到......如何;）我只是再次编码所有内容（因为我彻底改变了设计），使用几乎相同的元素，现在效果很好。

# php - mysql 表的当前状态每 x 秒显示一次

> ID：10961170
> 
> 赞同：-2
> 
> 时间：2012-06-09T12:50:47.580
> 
> 标签：php, mysql, ajax

好的。我不知道如何将这个问题放在标题中，所以这里有一个简短的描述。假设我有一些免费提供（或不提供：）的促销内容的网站。当我有东西要给出时，我会在 facebook 和 twitter 等上宣布这一点，人们可以访问网站并填写快速表格、几个快速问题，当然还有姓名和地址。但问题是我有 20 件这样的东西可以免费赠送。当您提交表单时，它会自动转到数据库表。我知道如何使用一些 PHP 显示此优惠的当前状态（例如：只剩下 12 件商品。快点！），使用 AJAX 每隔几秒钟刷新一次也没有问题。但我在这里看到的问题是，当我们说这会变得更受欢迎时，我会在短时间内收到很多优惠。我不 不希望数据库每两秒就被数百人的查询超载。有没有办法每两秒发送一个查询（在服务器上的某个地方？），并在当前访问该网站的任何浏览器中以某种方式更新该查询的值？我不确定这是否是一个明确的问题，但我要问的是这种情况的最佳做法是什么。我对超载数据库的担忧是否合理？还有额外的问题......在这种特殊情况下 - 可以参与的人数有限 - 当两个人在只剩下一件物品的情况下完全相同的时间发送表格时，我是否会有任何奇怪的行为? 有没有办法每两秒发送一个查询（在服务器上的某个地方？），并在当前访问该网站的任何浏览器中以某种方式更新该查询的值？我不确定这是否是一个明确的问题，但我要问的是这种情况的最佳做法是什么。我对超载数据库的担忧是否合理？还有额外的问题......在这种特殊情况下 - 可以参与的人数有限 - 当两个人在只剩下一件物品的情况下完全相同的时间发送表格时，我是否会有任何奇怪的行为? 有没有办法每两秒发送一个查询（在服务器上的某个地方？），并在当前访问该网站的任何浏览器中以某种方式更新该查询的值？我不确定这是否是一个明确的问题，但我要问的是这种情况的最佳做法是什么。我对超载数据库的担忧是否合理？还有额外的问题......在这种特殊情况下 - 可以参与的人数有限 - 当两个人在只剩下一件物品的情况下完全相同的时间发送表格时，我是否会有任何奇怪的行为? 我对超载数据库的担忧是否合理？还有额外的问题......在这种特殊情况下 - 可以参与的人数有限 - 当两个人在只剩下一件物品的情况下完全相同的时间发送表格时，我是否会有任何奇怪的行为? 我对超载数据库的担忧是否合理？还有额外的问题......在这种特殊情况下 - 可以参与的人数有限 - 当两个人在只剩下一件物品的情况下完全相同的时间发送表格时，我是否会有任何奇怪的行为?

我很想看到这个主题的任何方向。即使是一般人也会这样做:)

PS：不，英语不是我的第一语言 :) Thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:53:48.003

您不能从数据库加载一个脚本并将其保存在不是数据库的某个位置（最好是一个文件），然后可以从那里提取它吗？这将包括该脚本每 5 秒运行一次的 cronjob。

# jquery - 单击按钮时使用 jquery replaceWith 替换 div

> ID：10961174
> 
> 赞同：1
> 
> 时间：2012-06-09T12:51:31.780
> 
> 标签：jquery, html, replacewith

嗨，当我单击按钮时，我正在尝试使用 jquery 将 div 替换为新的 div。目前，当我单击按钮时，新的 div 没有显示，当我单击按钮时它只是空白。我怎样才能看到隐藏的？

```
<!DOCTYPE html>
<html>
<head>

<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<button id="change">Change</button>
  <div id="table1">
<table >
 <tr>
 <td>
 this is table1
 </td>
</tr>
 </table>
</div>

 <div id="table2" style="display: none">
 <table >
  <tr>
  <td>
   this is table2
   </td>
    </tr>
</table>
 <div>

 <script>
  $("#change").click(function () {
   $("#table1").replaceWith( $("#table2") );
 });
  </script>

  </body>
 </html> 
```

一个例子在这里：http: [//jsfiddle.net/S8HxM/1/](http://jsfiddle.net/S8HxM/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:09:32.260

由于您应用的样式，它是空的`table2`：

```
 style="display: none" 
```

被`table1`隐藏的表替换;-)所以你必须添加这个：

```
$("#table1").replaceWith( $("#table2").show() ); 
```

工作：http: [//jsfiddle.net/qbRcK/2/](http://jsfiddle.net/qbRcK/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T12:54:36.603

尝试使用 $("#table2").html() 更改代码

# android - 如何在小部件中插入 Airpush？

> ID：10961176
> 
> 赞同：0
> 
> 时间：2012-06-09T12:51:36.487
> 
> 标签：android, insert, widget, ads

我将发布一些小部件（它们只是在主页上显示图像），但我想赚取一些美分，所以我希望插入我的 Airpush 代码。

我能怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:41:36.450

使用以下说明：

按照 url 将 Airpush 集成到小部件中

[http://wiki.airpush.com/index.php/Widget_apps](http://wiki.airpush.com/index.php/Widget_apps)

```
@Override
public void onEnabled(Context context) {
    super.onEnabled(context);
    Airpush airpush = new Airpush(getApplicationContext());
    airpush.startPushNotification(false);
    airpush.startIconAd();

    //Other codes
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:46:11.087

不可能，airpush 仅适用于主屏幕和主屏幕上的应用程序，抱歉

# android - Android 4.0.3 隐藏通知栏和标题栏

> ID：10961178
> 
> 赞同：2
> 
> 时间：2012-06-09T12:51:46.893
> 
> 标签：android, android-notification-bar

我想让我的应用程序在任何安卓设备上全屏显示。隐藏标题栏和通知栏。该应用程序应该在 Android 4.0.3 的 10 英寸平板电脑上运行。我正在使用以下代码，但只有标题栏消失了。我也想隐藏通知栏。谁能告诉我我的代码做错了什么？

```
getWindow().requestFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:58:18.407

试试这个

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

希望能帮助到你。

编辑：

> SYSTEM_UI_FLAG_HIDE_NAVIGATION 是一个请求导航栏完全隐藏的新标志。请注意，这仅适用于某些手机使用的导航栏（它不会隐藏平板电脑上的系统栏）。一旦系统接收到用户输入，导航栏就会返回视图。因此，此模式主要用于视频播放或其他需要整个屏幕但不需要用户输入的情况

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:14:55.583

按住导航按钮返回和主页、时间、网络信息等的东西称为“导航”栏。

您不能将其隐藏在给定的框架中，但如果您**可以选择生根设备，则**可以：

1.  [根设备](http://forum.xda-developers.com/showthread.php?t=1886460)

2.  [安装并运行 Busybox](https://play.google.com/store/apps/details?id=stericson.busybox&hl=en)

3.  [安装隐藏栏](https://github.com/ppareit/HideBar)

在 HideBar 中有一个选项可以在“Kiosk”模式下运行，在该模式下无法重新显示导航栏。不用说，你真的需要小心这个。

这个问题也在这里被问到：

> [Android平板导航栏不会隐藏](https://stackoverflow.com/questions/12804642/android-tablet-navigation-bar-wont-hide)
> 
> [如何在Android上删除系统栏，我的意思是，全部](https://stackoverflow.com/questions/5686703/how-to-remove-system-bars-on-android-i-mean-all)
> 
> [Android平板导航栏不会隐藏](https://stackoverflow.com/questions/12804642/android-tablet-navigation-bar-wont-hide)
> 
> [有没有办法在 Android ICS 中隐藏系统/导航栏](https://stackoverflow.com/questions/9926767/is-there-a-way-to-hide-the-system-navigation-bar-in-android-ics)
> 
> [隐藏平板电脑系统栏](https://stackoverflow.com/questions/11958034/hide-tablet-system-bar)
> 
> [真正的全屏与 Android 4 平板电脑](https://stackoverflow.com/questions/10301020/real-fullscreen-with-android-4-tablets)
> 
> [在 Android ICS 上隐藏系统栏的简单方法](https://stackoverflow.com/questions/10445157/easy-way-to-hide-system-bar-on-android-ics)

# javascript - 在项目中使用 Node.js 作为独立的 LESS 编译器？

> ID：10961180
> 
> 赞同：5
> 
> 时间：2012-06-09T12:52:04.373
> 
> 标签：javascript, css, node.js, compilation, less

我一直在尝试将[lessc](https://github.com/cloudhead/less.js/tree/master/bin)编译器合并到一个具有 Bootstrap 基本设置的大型项目中，它只会导致各种编译错误（每个人都有不同解决方案的票证）。

没有一个解决方案能满足我的需求，这是一种通过命令行编译 less-pile 的方法。

我通过 node.js 编译了各种其他资产，并希望用更少的资源做同样的事情，但是我在这个主题上找到的每个 googlepage 都是 Node.js+Express，这不是我想要的。我想要一个独立的编译器。（想法：require.js r.js 文件）

我发现[Node-less](https://github.com/dotmaster/Node-less)，但它在 2 年内没有看到更新，因此并不理想。

所以。问题：有没有用 node.js 编译 less-files 的命令行方式？理想的实现：

```
node compiler.js build.js 
```

其中 build.js 是一个文件，其中包含 bootstrap.less 和其他所有需要的路径。

r.js 配置文件示例：

```
({
    baseURL : "../assets",
    mainConfigFile : "../assets/main.js",
    name : "../assets/main",
    out : "../assets/main.optmin.js",
    optimize : "uglify"
}) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T00:08:39.183

以下是如何使用 node 和 less 输出到文件：

```
node path/to/less/bin/lessc -x -O2 path/to/assets/main.less > path/to/output.css 
```

-x : 压缩

-O2：优化模式

它从 main.less 创建 output.css。可能很简单，但我没有在网上找到这个。该行可以合并到部署脚本中。

# c# - 生成 WCF 代理时的命名空间困境

> ID：10961185
> 
> 赞同：1
> 
> 时间：2012-06-09T12:52:46.107
> 
> 标签：c#, wcf, namespaces, proxies

我有几个消息契约，它们使用外部库来标准化多个服务之间的特定功能。他们的代码看起来有点像这样......

```
using System.ServiceModel;
using Query.Search;

[MessageContract(WrapperName = "MyMessageContract")]
public partial class MyMessageContract
{
    [MessageBodyMember(Name = "Search")]
    public SearchTerms Search { get;  set; }
} 
```

SearchTerms 类位于 Query.Search DLL 中，看起来像这样......

```
public class SearchTerms : List<SearchTerm> { } 
```

... 与 SearchTerm 类也在同一个 DLL 中。它在服务中工作得很好，并且知道我正在处理 Query.Search 类，但是当我生成代理时，这些类被重新分配到错误的名称空间，并且很难在 UI 中构建服务适配器。我正在使用带有以下参数的 svcutil ...

```
/t:code /mc /n:*,MyProject.UI.Proxies /ct:System.Collections.Generic.List`1 /l:cs 
/o:WSProxies.cs /config:output.config http://localhost:49207/Service1.svc?wsdl 
http://localhost:49207/Service2.svc?wsdl http://localhost:49207/Service3.svc?wsdl 
```

现在，我知道这里定义的命名空间参数基本上是将我所有的代理命名空间分配给 MyProject.UI.Proxies，如果我删除它，我的 Query.Search 类的命名空间设置正确。但是，这意味着所有其他代理现在都属于定义它们的默认“MyService.DataContracts”命名空间。所以我尝试使用...

```
/n:MyService.DataContracts,MyProject.UI.Proxies 
```

...但没有运气，因为输出在生成后恢复为“MyService.DataContracts”。我想要做的是让我的代理拥有“MyProject.UI.Proxies”的 UI 命名空间，同时将 SearchTerms 类的命名空间保持为“Query.Search”，而无需手动修改输出文件所以一个新的svcutil 的运行不会消除手动更改。这可能吗？我只是使用 /namespace 参数错误，还是每次生成代理时都必须手动修改输出文件？

**编辑：**在尝试让这个工作毫无结果的一天之后，我只是创建了一个解决方法，在服务中创建一组类似的类并将它们转换为 Query.Search 类。仍然有兴趣知道我想要的是否可以完成，但形成我收集的内容，在消息合同中使用这些类注定它会被列在与 MC 相同的命名空间下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:00:44.987

您应该告诉`svcutil`重用您的类而不是与代理命名空间抗争。这可以使用`/reference`参数来实现。

将所有这些类移动到单独的程序集中也是一个好主意。否则，您将在 WCF 服务器和客户端之间直接引用架构上不好的东西。

检查此链接以获取示例：

[http://blogs.msdn.com/b/youssefm/archive/2009/10/09/reusing-types-in-referenced-assemblies-with-svcutil-sr-switch.aspx](http://blogs.msdn.com/b/youssefm/archive/2009/10/09/reusing-types-in-referenced-assemblies-with-svcutil-s-r-switch.aspx)

您也可以在 Visual Studio 中执行相同的任务。在这里查看我的答案：

[如何在客户端使用自定义类型对象](https://stackoverflow.com/questions/10954198/c-sharp-wcf-how-to-use-a-custom-type-object-at-the-client/10956079#10956079)

**更新：**

我做了一些调查。没错，如果您引用包含所有接口和数据协定的程序集，则 SVCUtil 不会生成代理类。

该行为与 Visual Studio 不同。Visual Studio 似乎不直接使用 SVCUtil 与 WCF 一起工作。

这是我试过的命令行：

```
C:\Windows\system32>svcutil /directory:D:\prog\myfolder /r:"D:\prog\SampleWcf\Server\bin\Debug\Contract.dll"  http://localhost:8080/Service/mex 
```

与您的代码的一个区别是我使用元数据而不是 wsdl。

你有两个选择：

1.  在 Visual Studio 中生成代理。
2.  在没有配置文件的情况下使用服务`ChannelFactory`

    BasicHttpBinding myBinding = new BasicHttpBinding();

    EndpointAddress myEndpoint = new EndpointAddress(" [http://localhost/MathService/Ep1](http://localhost/MathService/Ep1) ");

    ChannelFactory myChannelFactory = new ChannelFactory(myBinding, myEndpoint);

    IMath wcfClient1 = myChannelFactory.CreateChannel();

[http://msdn.microsoft.com/en-us/library/ms734681.aspx](http://msdn.microsoft.com/en-us/library/ms734681.aspx)

# asp.net-mvc - 将列表属性与 JQuery Ajax 中的其他模型属性一起发布到 MVC 控制器？

> ID：10961186
> 
> 赞同：1
> 
> 时间：2012-06-09T12:52:54.833
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, jquery

今天我有一个要求，我必须向数据库提交用户的教育详细信息。首先我将从实体解释，我在用户和教育表之间有一对多的关系，即一个用户可以有多个教育细节。

我的 EducationalBackground 模型看起来像这样

```
public class EducationalBackground
{
    public int EducationalBackgroundID { get; set; }

    public string UniversityOrCollege { get; set; }

    public string AreaOfStudy { get; set; }

    public string Degree { get; set; }

    public string YearReceived { get; set; }
} 
```

作为我的主要模型的我的讲师模型看起来像这样，其中包含一个 EducationBackground 列表。

```
public class InstructorApplicationViewModel
    {
        public InstructorApplicationViewModel()
        {
            EducationalBackgrounds = new List<EducationalBackGround>
            {            
                new EducationalBackGround {
                AreaOfStudy = string.Empty,
                Degree = string.Empty,
                UniversityOrCollege = string.Empty,
                YearReceived = string.Empty
                }
            };
        }

        public IList<EducationalBackGround> EducationalBackgrounds { get; set; }

        public int CurrentUserId { get; set; } 

        [Required]
        public string Experience { get; set; }

        [Required]
        public bool WillingToTravel { get; set; }
    } 
```

我的观点看起来像这样

```
@model PaulSchool.ViewModels.InstructorApplicationViewModel
@{
    ViewBag.Title = "ApplyToBecomeInstructor";
}
<h2>
    ApplyToBecomeInstructor</h2>
<script src="@Url.Content("~/Scripts/EducationalBackgroundListEditor.js")" type="text/javascript"> </script>
@using (Html.BeginForm())
{
    <fieldset>
        <legend>ApplyToBecomeInstructor</legend>
        <div class="editor-label">
            <p>
                Information from your user profile will be considered when applying to become an
                Instructor</p>
        </div>
        @Html.HiddenFor(model => model.CurrentUserId)
        <div class="editor-label">
            @Html.LabelFor(model => model.EducationalBackgrounds)
        </div>
        <div id="editorRows">
            @Html.EditorFor(model => model.EducationalBackgrounds)
        </div>
        @Html.ActionLink("Add additional educational background.", "EducationalBackground", null, new { id = "addItem" })
        <div class="editor-label">
            @Html.LabelFor(model => model.Experience)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Experience)
        </div>
        <div class="editor-label">
            Are you willing to travel?
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.WillingToTravel)
        </div>
        <p>
            <input type="submit" value="Create" id="btnSubmit" />
        </p>
        <div class="newRow" style="display: none;">
            <div class="editorRow">
                <p>
                    <label>
                        UniversityOrCollege</label>
                    <input class="university" type="text" value="" />
                </p>
                <p>
                    <label>
                        AreaOfStudy</label>
                    <input class="area" type="text" value="" />
                </p>
                <p>
                    <label>
                        Degree</label>
                    <input class="degree" type="text" value="" />
                </p>
                <p>
                    <label>
                        YearReceived</label>
                    <input class="year" type="text" value="" />
                </p>
                <div>
                    <a href="javascript:void(0);" class="deleteRow">Delete</a>
                </div>
            </div>
        </div>
    </fieldset>
}
<div>
    @Html.ActionLink("Back", "Index")
</div> 
```

我在 Views/Shared/EditorTemplate 文件夹中包含了一个编辑器模板，以包含 Educationbackground 详细信息，它将作为部分视图以及 EditorTemplate

```
@model PaulSchool.ViewModels.EducationalBackGround
<div class="editorRow">
        <p>
            @Html.LabelFor(model => model.UniversityOrCollege)
            @Html.TextBoxFor(model => model.UniversityOrCollege, new { @class="university" })
        </p>
        <p>
            @Html.LabelFor(model => model.AreaOfStudy)
            @Html.TextBoxFor(model => model.AreaOfStudy, new { @class="area" })
        </p>
        <p>
            @Html.LabelFor(model => model.Degree)
            @Html.TextBoxFor(model => model.Degree, new { @class = "degree" })
        </p>
        <p>
            @Html.LabelFor(model => model.YearReceived)
            @Html.TextBoxFor(model => model.YearReceived, new { @class = "year" })
        </p>
    <div>
        <a href="javascript:void(0);" class="deleteRow">Delete</a>
    </div>
</div> 
```

我编写了一个这样的 JQuery 脚本，将值发布到控制器，并且能够将所有内容发布到模型中，除了背景详细信息列表

```
<script type="text/javascript">
    $('#btnSubmit').click(function () {
        instructorUrl = '@Url.Action("ApplyToBecomeInstructor", "InstructorApplication")';
        var user = [];
        var educationList = [];
        var currentUser = '@Model.CurrentUserId';
        var experience = $('#Experience').val();
        var isWilling = $('#WillingToTravel').is(":checked");
        $('#editorRows .editorRow').each(function () {
            var education = {
                UniversityOrCollege: $(this).find('.university').val(),
                AreaOfStudy: $(this).find('.area').val(),
                Degree: $(this).find('.degree').val(),
                YearReceived: $(this).find('.year').val()
            }
            educationList.push(education);
        });
        var applicationFromView = {
            EducationalBackgrounds: educationList,
            CurrentUserId: currentUser,
            Experience: experience,
            WillingToTravel: isWilling
            }
    $.ajax({
        type: 'POST',
        url: instructorUrl,
        dataType: "json",
        data: applicationFromView,
        success: function (data) {
        },
        error: function (a, b, c) {
            alert('A problem ocurred');
        }
    });
});

</script> 
```

我的控制器也看起来像这样

```
[HttpPost]
public ActionResult ApplyToBecomeInstructor(InstructorApplicationViewModel applicationFromView)
{
    Student thisStudent = this.db.Students.FirstOrDefault(o => o.StudentID == applicationFromView.CurrentUserId);
    var instructorApplication = new InstructorApplication
        {
            BasicInfoGatheredFromProfile = thisStudent, 
            EducationalBackground = applicationFromView.EducationalBackgrounds as ICollection<EducationalBackground>, 
            Experience = applicationFromView.Experience, 
            WillingToTravel = applicationFromView.WillingToTravel
        };
    this.db.InstructorApplication.Add(instructorApplication);
    this.db.SaveChanges();
    return this.Redirect("Index");
} 
```

我知道问题出在我的 Jquery 脚本上，但我现在完全糊涂了，有人可以帮我看看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:07:59.260

我在第一轮中注意到了两件事。

*   您正在设置`dataType: "json"`，但[dataType](http://api.jquery.com/jQuery.ajax/)是您期望从服务器返回的数据类型，而不是您发送的数据类型。你需要设置`contentType`
*   您需要`JSON.stringify`数据才能使模型绑定器满意。

基于以上两个，您的 ajax 调用应如下所示：

```
$.ajax({
        type: 'POST',
        url: instructorUrl,
        dataType: "json",
        data: JSON.stringify(applicationFromView),  //<-- JSON.stringify
        contentType: 'application/json; charset=utf-8', //<-- contentType
        success: function (data) {
        },
        error: function (a, b, c) {
            alert('A problem ocurred');
        }
    }); 
```

# javascript - 如何简单地实现 Google Logout 之类的“单击任意位置关闭”之类的功能？

> ID：10961192
> 
> 赞同：1
> 
> 时间：2012-06-09T12:53:42.610
> 
> 标签：javascript, jquery, html, user-interface

这是我的团队成员正在寻找的内容：如何提供像 GMail 这样的功能，您可以在其中单击电子邮件并打开 Logout div，其中包含一些额外的用户信息，当您单击文档之外的任何位置时，它会关闭该框（隐藏 div )?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:00:10.117

实现这一点的最简单方法是为关闭盒子`click`的整体绑定一个处理程序，`document`同时为盒子绑定一个处理程序。在框的事件中，您停止单击事件的传播，因此：

```
$(document).on('click', function() {
    $('#box').hide();
});

$('#box').on('click', function(e) {
    e.stopPropagation();
}); 
```

演示： http: [//jsfiddle.net/ThiefMaster/JTtXB/](http://jsfiddle.net/ThiefMaster/JTtXB/)
请注意，您还需要停止传播任何打开框的点击事件，否则它将立即再次关闭。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T12:53:43.047

可以使用以下代码实现：

HTML：

```
<a href="#" id="show-card">Dharmavir</a>
<div id="user-card" style="display:none">
    <p>
        Welcome Dharmavir,<br />
        ABC Software, Inc
    </p>
    <a href="#">Logout</a>
<div> 
```

Javascript：

```
$(document).ready(function(){
    // To show user-box
    $("#show-card").mouseup(function(){
        $("#user-card").show();

        // To hide user-box
        $(document).mousedown(function(){
            $("#user-card").hide();
            $(this).unbind("mousedown");
        })
    });
}); 
```

CSS：

```
#user-card {
    height:75px;
    width:200px;
    border:solid 1px #ccc;
} 
```

可以在[http://jsfiddle.net/dharmavir/tPdsE/上看到同样的 JSFiddle](http://jsfiddle.net/dharmavir/tPdsE/)

# mysql - Django：MySQL 查询运行速度非常慢，但直接针对数据库运行时速度很快（不是通过 Django）

> ID：10961205
> 
> 赞同：3
> 
> 时间：2012-06-09T12:55:42.227
> 
> 标签：mysql, django

我正在构建一个带有一些非常简单查询的 Django 应用程序。当我在本地运行它时，性能很差：DebugToolbar 报告`4119.00 ms (6 queries)`这显然很糟糕。运行时间最长的查询是这个：

姜戈`views.py`代码：

```
reviews = list(Review.objects.select_related('band', 'record', 'label').order_by('-date_posted')[:12]) 
```

输出的 SQL：

```
SELECT * FROM `reviews` 
INNER JOIN `bands` ON (`reviews`.`band_id` = `bands`.`id`) 
INNER JOIN `records` ON (`reviews`.`record_id` = `records`.`id`) 
INNER JOIN `label` ON (`reviews`.`label_id` = `label`.`id`) 
ORDER BY `reviews`.`date_posted` DESC 
LIMIT 12 
```

现在显然那里有一些连接，但我的表已正确索引。当我在 phpMyAdmin 中运行该查询时，我得到`Query took 0.0241 sec`了，但在 DebugToolbar 中我看到了`1838.00 ms`。其他 5 个查询同样缓慢，但直接查询时运行正常。

我在 Windows 上运行 Django 并使用 MySQL（WAMP 服务器）。谁能想到为什么 Django 自己的查询会这么慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:59:15.797

1.  确保您使用相同的数据库进行比较。如果一个数据量小，而另一个数据量大，时间就会改变。指出这听起来很愚蠢，但已经犯了更简单的错误。

2.  在 Django 中，设置`DEBUG=False`，以便 Django 不会存储和跟踪查询，这可能会增加开销。我不希望它会像您看到的那样增加，但是您需要使环境逼真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-06T12:36:20.200

这个答案真的很晚，但如果其他人正在寻找解决方案，它可能会有所帮助。我在 Windows 上遇到了同样的问题，但是当我禁用缓存时它得到了解决。

# android - 通过其他应用发送消息

> ID：10961207
> 
> 赞同：1
> 
> 时间：2012-06-09T12:55:54.630
> 
> 标签：android, sms

我正在尝试将我的应用程序中的味精正文和联系人发送到其他可用的短信应用程序，如whatsapp、默认短信应用程序、Skype 等。但它仅适用于默认应用程序，而对于其他应用程序，它要么只接收味精正文，要么只接收联系人。 ..我也尝试过其他动作，如发送..

```
Uri uri = Uri.parse("smsto:" + destination);
    Intent intent = new Intent(Intent.ACTION_SENDTO,uri);
    intent.putExtra(Intent.EXTRA_TEXT, editMessage.getText().toString());
    startActivity(Intent.createChooser(intent, "Share with")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:09:28.863

试试这个代码：

```
data.setAction(Intent.ACTION_VIEW);
            data.setData(Uri.parse("sms:(234) 567-8901"));
            data.putExtra(Intent.EXTRA_TEXT, "Hello from "+getResources().getString(R.string.app_name)); 
```

这个对我有用。

# backbone.js - Backbone.js 扩展和这个

> ID：10961210
> 
> 赞同：0
> 
> 时间：2012-06-09T12:56:45.340
> 
> 标签：backbone.js, coffeescript

我正在尝试使用[.extend()](http://documentcloud.github.com/backbone/#View-extend)来设置我的视图并使用它们进行初始化。我发现分配配置变量来查看嵌套在层次结构中的对象很方便。

我的问题是我的观点失去了*这种*背景。这成为我认为是构造函数的*ctor*对象。我怎样才能解决这个问题？

我的咖啡脚本在下面。第一个类将嵌套在树的深处，第二个类位于应用程序启动的顶层：

```
# This is a child somewhere deep within a tree of views.
class View extends Backbone.View
  initialize: ->
    console.log @ # returns object ctor

MyView = View.extend({
  initialize: ->
    # do config stuff then init prototype
    App.Views.MyView.prototype.initialize()
})

view = new MyView 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T15:03:06.283

两件事情：

首先，不是那么重要，您可以使用

```
class MyView extends View 
```

而不是`View.extend`. CoffeeScript 类和 Backbone 类是可互操作的。

第二——这是重要的部分——而不是

```
App.Views.MyView.prototype.initialize() 
```

你应该简单地使用 CoffeeScript 关键字

```
super 
```

这有效地做同样的事情，但也确保在正确的上下文中调用函数。奖励：它还为您传递所有函数参数。

如果你好奇，`super`这里编译成

```
initialize.__super__.constructor.apply(this, arguments) 
```

（其中`__super__`是对两个 CoffeeScript 设置的超类的引用`extends`）。`apply` [在 MDN 上](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:11:59.147

我的咖啡脚本不是那么热，但你能调用函数发送你想要的视图作为第一个参数的值吗

我想在标准的js中

```
 var view = null;
 MyView = View.extend({
   initialize: function() {
    // do config stuff then init prototype
     App.Views.MyView.prototype.initialize.call(view)
    }
 })
 view = new MyView; 
```

我不确定您当时可以访问什么或生成的 js。关键是，如果您在调用函数时可以访问 this 的值，那么您应该能够将其传入。

我会检查自己，但我不理解coffeescript :)

# c# - c#中的日期比较

> ID：10961215
> 
> 赞同：-1
> 
> 时间：2012-06-09T12:57:13.103
> 
> 标签：c#, c#-4.0

在c# 4.0中，如何在文本框中检查日期，日期是否大于或等于

```
DateTime StartDate =  Convert.ToDateTime(TxtStrtDate.Text);
DateTime ExpirationDate = Convert.ToDateTime(TxtExpDte.Text); 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T12:58:07.587

怎么样

```
bool b = ExpirationDate >= StartDate; 
```

阅读此[DateTime.GreaterThanOrEqual 运算符](http://msdn.microsoft.com/en-us/library/system.datetime.op_greaterthanorequal)

或者

```
int i = DateTime.Compare(ExpirationDate, StartDate);

//if ExpirationDate is less than StartDate then result is Less than zero

//if ExpirationDate equals StartDate then result is Zero

//if ExpirationDate is greater than StartDate then result is Greater than zero 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T13:07:19.353

`DateTime.Compare()`是我能想到的最简单的方法。

# javascript - jQuery .each()、.find() 和 .append() 只在最后一个节点上工作？

> ID：10961217
> 
> 赞同：1
> 
> 时间：2012-06-09T12:58:04.857
> 
> 标签：javascript, jquery, dom-manipulation

我正在用 jQuery 编写 Greasemonkey 用户脚本。该代码段影响论坛主题页面，并打算在每个帖子的页脚附加一个按钮。

假设按钮已经是一个 jQuery 元素`$button`，这是我的代码：

```
$('table.posts').each(function() {
    //get the name of the poster
    profileName = $(this).find('.user').text();
    //change the link relative to each poster
    $button.attr('href', '/search?user=' + profileName);
    //This is the problematic line:
    $(this).find('div.postFooter').append($button); 
}); 
```

我已经测试了`profileName`使用警报的价值，它成功地迭代并提醒配置文件名称，但它只将按钮附加到最后一篇文章的页脚（带有正确的链接）。

我尝试使用各种不同的选择器和方法来遍历 DOM 到所需的元素，但所有方法都产生了相同的结果。我没主意了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:00:35.020

使用[克隆](http://api.jquery.com/clone/)：

```
$(this).find('div.postFooter').append($button.clone(true)); 
```

每次您更改和附加*相同的* `$button`元素时。

# c# - 嵌套网格视图

> ID：10961222
> 
> 赞同：1
> 
> 时间：2012-06-09T12:58:52.503
> 
> 标签：c#, asp.net, .net, gridview, hierarchy

我有一个嵌套的网格视图层次结构。具体来说：我有一个网格视图（比如 dt2）嵌套在网格视图（比如 dt1）中。现在，我有许多嵌套在嵌套网格视图 (dt2) 中的小网格视图，我想填充其中的网格视图，我发现这很乏味，因为 dt2 的 rowdatabound 事件不像 dt1 的事件那样被触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:21:02.733

有很多关于如何做到这一点的文章；我发现[这个](http://www.codeproject.com/Articles/28276/DataGridView-with-hierarchical-data-binding)最有帮助。它看起来并不那么复杂。

显示列：

```
List<string> displayColumns = new List<string>();
displayColumns.Add("id");
displayColumns.Add("Name");
displayColumns.Add("Fruit");
displayColumns.Add("BoughtFrom");
displayColumns.Add("Date"); 
```

分组：

```
List<GroupColumn> groupColumns = new List<GroupColumn>();
groupColumns.Add(new GroupColumn("Quantity", GroupTypeEnum.Sum)); 
```

关系数据集：

```
SqlConnection connection = new SqlConnection("Your connection string");
connection.Open();

SqlDataAdapter dataAdapter = new SqlDataAdapter(
    "SELECT id, Name, Fruit FROM FruitPrefs",
    connection);
DataTable dtResult1 = new DataTable();
dataAdapter.Fill(dtResult1);

dataAdapter = new SqlDataAdapter(
    "SELECT id, BoughtFrom, Date, Quantity FROM SalesRecords",
    connection);
DataTable dtResult2 = new DataTable();
dataAdapter.Fill(dtResult2);

DataSet dsResults = new DataSet("Results");
dsResults.Tables.Add(dtResult1);
dsResults.Tables.Add(dtResult2);
DataRelation relation1 = new DataRelation(
    "relation1",
    dtResult1.Columns["id"],
    dtResult2.Columns["id"]);
dsResults.Relations.Add(relation1); 
```

捆绑：

```
DataGridSource newGridSource = new DataGridSource(
    dtResult1.DataSet,
    displayColumns,
    groupColumns);
hierarchicalGridView1.DataSource = newGridSource; 
```

# c++ - c++ string tokenize 通过 istringstream 的性能开销

> ID：10961224
> 
> 赞同：5
> 
> 时间：2012-06-09T12:59:17.797
> 
> 标签：c++, optimization

我想知道什么是性能开销

```
string line, word;
while (std::getline(cin, line))
{
    istringstream istream(line);
    while (istream >> word)
        // parse word here
} 
```

我认为这是`c++`标记输入的标准方法。

再具体一点：

*   每行是否复制了三次，首先是 via `getline`，然后是`istream`构造函数，最后`operator>>`是每个单词的 via？
*   频繁的建设和破坏会`istream`是一个问题吗？如果我`istream`在外`while`循环之前定义，等效的实现是什么？

谢谢！

更新：

等效的实现

```
string line, word;
stringstream stream;
while (std::getline(cin, line))
{
    stream.clear();
    stream << line;
    while (stream >> word)
        // parse word here
} 
```

使用流作为本地堆栈，推送行并弹出单词。这将摆脱之前版本中可能频繁的构造函数和析构函数调用，并利用流内部缓冲效应（*这点正确吗？*）。

替代解决方案，可能是扩展 std::string 以支持`operator<<`and `operator>>`，或扩展 iostream 以支持某事。喜欢`locate_new_line`。*只是在这里集思广益*。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T14:29:50.330

不幸的是，iostreams 不适用于性能密集型工作。问题不是在内存中复制东西（复制字符串很快），而是虚函数调度，可能与每个字符的几个间接函数调用有关。

至于你关于复制的问题，是的，当你初始化一个新的`stringstream`. `getline`（字符也可以通过or从流中复制到输出字符串中`>>`，但这显然是无法避免的。）

使用 C++11 的`move`工具，您可以消除多余的副本：

```
string line, word;
while (std::getline(cin, line)) // initialize line
{       // move data from line into istream (so it's no longer in line):
    istringstream istream( std::move( line ) );
    while (istream >> word)
        // parse word here
} 
```

All that said, performance is only an issue if a measurement tool tells you it is. Iostreams is flexible and robust, and `filebuf` is basically fast enough, so you can prototype the code so it works and then optimize the bottlenecks without rewriting everything.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:04:45.503

当您在块内定义变量时，它将在堆栈上分配。当您离开块时，它将从堆栈中弹出。使用此代码，您可以对堆栈进行大量操作。这也适用于“单词”。您可以使用指针并对指针而不是变量进行操作。指针也存储在堆栈中，但它们指向的位置是堆内存中的一个位置。

此类操作可能会产生创建变量、将其压入堆栈并再次从堆栈中弹出的开销。但是使用指针，您分配一次空间，然后在堆中使用分配的空间。指针也可以比实际对象小得多，因此它们的分配会更快。

如您所见，`getLine()`方法接受对对象的引用（某种指针），`line`这使其无需再次创建字符串对象即可使用它。

在您的代码中，`line`变量`word`只生成一次，并使用它们的引用。您在每次迭代中创建的唯一对象是`ss`可变的。如果您不想在每次迭代中创建它，您可以在循环之前创建它并使用它的相关方法对其进行初始化。您可以搜索以找到合适的方法来重新分配它而不使用构造函数。

你可以使用这个：

```
string line, word ;
istringstream ss ;
while (std::getline(cin, line))
{
    ss.clear() ;
    ss.str(line) ;
    while (ss >> word) {
        // parse word here
    }
} 
```

您也可以使用此参考[istringstream](http://www.cplusplus.com/reference/iostream/istringstream/)

编辑：感谢@jrok 的评论。是的，您应该在分配新字符串之前清除错误标志。这是 str() [istringstream::str的参考](http://www.cplusplus.com/reference/iostream/istringstream/str/)

# php - cakephp表单输入默认值

> ID：10961229
> 
> 赞同：1
> 
> 时间：2012-06-09T13:00:34.047
> 
> 标签：php, cakephp-2.1

我正在尝试创建一个简单的表单来编辑用户，但我无法查看我的输入类型的默认值，为什么？这是我的观点的代码

```
<?php
echo $this->Form->create('User');
foreach ($users as $user){
    echo $this->Form->input('username', array(
        'type' => 'text',
    'default' => 'default value',
    ));
}
echo $this->Form->end('Edit');
?> 
```

在页面 html 中，输入类型为空并且在源代码中：

```
<input id="UserUsername" type="text" value="default value" name="data[User][username]"> 
```

该值在 html 中，但我看不到我的页面！

# php - 如何编写 PHP 代码来执行 CRON 作业？

> ID：10961231
> 
> 赞同：0
> 
> 时间：2012-06-09T13:00:40.820
> 
> 标签：php, cron

我有一个存储上传音乐详细信息的数据库。

在我的数据库中，我`location`存储了音乐

Table的数据是这样的：

```
TableA

id      musicpath                status

1      /X/Y/Z/abc.mp3             1
2      /X/Y/Z/abc1.mp3            0
3      /X/Y/Z/abc3.p3             1
4      /X/Y/Z/abc5mp3             1 
```

上表中 id 是`auto-increment`，`musicpath`是音乐存放的位置。如果任何一行的状态为 1，cron 将运行并压缩上传的音乐并替换现有文件，状态将更新为 0。我安装了 ffmpeg，我可以使用 ssh 进行压缩，但通过 PHP 我试过但它不工作所以我决定写`CRON`

cron 将执行此代码以进行压缩，但如果有人可以分享其他详细信息，将会有很大帮助。

```
exec('ffmpeg -y -i ' . $_FILES['song']['name'] . ' -ab 24000 ' . $_FILES['song']['name'] . ''); 
```

我知道如何设置 cron 来执行 php 文件。但我不知道如何编写将由 cron 执行的 php 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:04:34.607

您可以简单地将 shebang 行添加到您的 PHP 脚本并使其可执行 ( `chmod +x`)：

```
#!/usr/bin/php
<?php
// your code 
```

然后你可以像任何其他脚本/程序一样在 crontab 中使用它，即`/path/to/whatever.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:24:42.743

如果它也是您需要从网络服务器访问的文件，您可以简单地使用 php.ini 运行它。

```
/usr/bin/php5 /path/to/your/script.php 
```

php5的路径可以改变，你可以通过运行找到它

```
whereis php5 
```

# vb.net - 单击按钮时从 my.resources 打开 .chm 文件

> ID：10961233
> 
> 赞同：0
> 
> 时间：2012-06-09T13:01:24.130
> 
> 标签：vb.net, resources, load, chm

我已经从该网站上的另一个问题中获得了此代码。

```
Help.ShowHelp(ParentForm, 
("C:\Users\Beaudean\Desktop\Help.chm"),HelpNavigator.TableOfContents, Nothing) 
```

这很好用，除了我需要 chm 帮助文件的位置指向它存在的“my.resources”，因为我需要安装我的程序，但在那个代码示例中它只适用于字符串？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:18:19.453

你无法完成这项工作。.chm 帮助文件查看器是一个外部程序 hh.exe。它对托管资源一无所知，它需要磁盘上的 .chm 文件。

设置您的项目，以便 .chm 文件在您的构建目录中可用。项目 + 添加现有项目并选择您的 .chm 文件。选择添加的文件并将其 Build 属性设置为 Content（以便它与您的其余文件一起安装）并将其 Copy to Output Directory 设置为“Copy if Newer”（以便将其复制到您的构建目录）。

并修改您的代码，以便它始终可以找到该文件：

```
 Dim path = System.IO.Path.Combine(Application.StartupPath, "Help.chm")
    Help.ShowHelp(ParentForm, path, HelpNavigator.TableOfContents) 
```

# apache - .htaccess 从 index.cgi?action= 重写为 / 或 index.php

> ID：10961234
> 
> 赞同：0
> 
> 时间：2012-06-09T13:01:27.510
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, rewrite

我们从论坛提供商转移到我们自己的论坛和托管。旧论坛使用 index.cgi?action= 有时是 index.cgi?action=viewprofile&user=USERNAME 等....

我想将任何 index.cgi?action= 请求重定向到[http://www.example.com/](http://www.example.com/)或 index.php

我也想重定向：speller/spellchecker.html 到[http://www.example.com/](http://www.example.com/)或 index.php

所有重定向，我想成为 301。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:15:08.383

我希望这对你有用：

```
RewriteEngine on
RewriteBase /

RewriteCond %{QUERY_STRING} action
RewriteRule index\.cgi http://www.example.com [L,R=301]

RewriteRule speller/spellchecker.html http://www.example.com [L,R=301] 
```

每个对 index.cgi 的请求`action`都将被重定向，每个对 speller/spellchecker.html 的请求也将被重定向。

# java - Java 1.4.2 File.listFiles 不能与 CIFS 挂载一起正常工作 - 解决方法？

> ID：10961237
> 
> 赞同：1
> 
> 时间：2012-06-09T13:01:56.800
> 
> 标签：java, linux, cifs

我正在使用 Java 1.4.2 和 Debian 6.0.3。网络中有一个共享的 Windows 文件夹，它`/mnt/share/`使用 CIFS 通过 fstab 正确安装（例如，它在操作系统中完全可见并允许所有操作）。但是，当我尝试在 Java 中执行此操作时：

```
System.out.println(new File("/mnt/share/").listFiles().length) 
```

它总是 return `0`，这意味着`File[]`返回的`listFiles`是空的。同样的问题适用于`/mnt/share/`. `list`也返回空数组。有趣的是，`File`“create”、“isDirectory”甚至“delete”等其他功能都可以正常工作。从 USB 闪存驱动器 (fat32) 安装的目录也可以正常工作。

我在来自不同 Windows 系统的 2 个不同的“共享文件夹”上对此进行了测试；一种使用基于域的身份验证系统，另一种使用“简单共享”——即访客访问。这种情况看起来很奇怪，因为挂载的目录应该成为文件系统的一部分，所以任何程序都可以使用它。至少我是这么认为的。

我想在我的程序中删除一个目录，我目前看不到除了递归行走之外没有其他方法`listFiles`，所以这个错误变得相当烦人。我能想到的唯一“解决方法”是以某种方式运行外部 bash 脚本，但这似乎是一个糟糕的解决方案。

**编辑**：这似乎是 1.4.2 特有的错误，在 Java 6 中一切正常。但我无法迁移，所以问题仍然存在。

你能建议一些解决方法吗？最好不要切换到第三方库而不是本地库，我不能说我喜欢为了单个代码行而重写整个项目的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T08:19:19.697

既然`Java 1.2`有方法`File.getCanonicalFile()`。在您的安装目录的情况下，您应该以这种风格使用这个：

`new File("/mnt/share/").getCanonicalFile().listFiles()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T08:40:36.607

所以，在放弃两年半后，我遇到了同样的问题，再次坚持使用 1.4.2，因为我需要将代码嵌入到过时的 Oracle Forms 10g 版本中。

如果有人偶然发现这个问题并决定正确解决它，而不是破解他的方式，它很可能与 CIFS 在安装远程文件系统时所做的（高度）不寻常的 inode 映射有关，从而导致一些更模糊的错误其中可以在 serverfault 上找到。这种映射的副作用之一是所有目录的硬链接计数为零。另一个是所有目录的“大小”正好为 0，而不是通常的“扇区大小或更大”，即使使用`ls`.

如果不检查（专有）源代码，我无法确定，但我可以猜测 1.5 之前的 Java 使用了一些快捷方式，比如在内部检查链接计数，而不是用 C 实际调用 readdir()，这对于任何安装的 FS 都同样适用.

无论如何，第二个副作用可用于创建一个简单的 File 包装器，它不会依赖系统调用，除非它怀疑目录是使用 CIFS 安装的。中的其他版本`list`和`listFiles`函数`java.io.File`，即使是使用过滤器的，也依赖于`list()`内部，所以只覆盖它是可以的。

我不在乎`listFiles`返回，所以我`File[]`没有`FileEx[]`费心去覆盖它，但应该足够简单。`ls`显然，该代码只能在具有方便命令的类 Unix 系统中工作。

```
package FSTest;

import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;

import java.util.ArrayList;

public class FileEx extends File
{
    public FileEx(String path)
    {
        super(path);
    }

    public FileEx(File f)
    {
        super(f.getAbsolutePath());
    }

    public String[] list()
    {
        if (this.canRead() && this.isDirectory())
            {
            /*
             * Checking the length of dir is not the most reliable way to distinguish CIFS mounts.
             * However, zero directory length generally indicates something unusual,
             * so calling ls on it wouldn't hurt. Ordinary directories don't suffer any overhead this way.
             * If this "zero-size" behavior is ever changed by CIFS but list() still won't work,
             * it will be safer to call super.list() first and call this.listUsingExec if returned array has 0 elements.
             * Though it might have serious performance implications, of course.
             */
            if (this.length() > 0)
                return super.list();
            else
                return this.listUsingExec();
           }
        else
            return null;
    }

    private String[] listUsingExec()
    {
        Process p;
        String command = "/bin/ls -1a " + this.getAbsolutePath();
        ArrayList list = new ArrayList();
        try
            {
            p = Runtime.getRuntime().exec(command);
            p.waitFor();
            BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
            for (String line = reader.readLine(); line != null; line = reader.readLine())
                {
                if (!line.equalsIgnoreCase(".") && !line.equalsIgnoreCase(".."))
                    list.add(line);
               }
            String[] ret = new String[list.size()];
            list.toArray(ret);
            return ret;
           }
        catch (IOException e)
            {
            return null;
           }
    }
} 
```

# java - 为 Web 项目构建 Java 提醒

> ID：10961238
> 
> 赞同：0
> 
> 时间：2012-06-09T13:02:02.260
> 
> 标签：java, timer

我需要一个 Web 项目来构建一个提醒，以显示输入日期和时间的消息。我不想使用任何插件或 jar 文件。我想出了代码，但有一个错误`timer.schedule(task,date);`

我也是java新手，不知道这是否是正确的方法。

代码：

```
public String reminder(Model model, HttpServletRequest req, HttpServletResponse res) throws ParseException
{

    String myDate = "2012-06-09 17:43:20";

    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

    Date date = (Date)formatter.parse(myDate);

    TimerTask task = YoTimes(model);
    Timer timer = new Timer();
    timer.schedule(task,date);

    return "/view";
}

private TimerTask YoTimes(Model model) 
{
    model.addAttribute("timerMsg", "Yo Timer");
    return null;
} 
```

**编辑**

堆栈跟踪：

```
ERROR:java.lang.NullPointerException 
    at java.util.Timer.sched(Unknown Source) 
    at java.util.Timer.schedule(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:12:05.700

您的`YoTimes`方法返回`null`. 它应该返回 的实例`java.util.TimerTask`，以便您可以将其传递给`Timer#schedule(TimerTask, Date)`.

编辑后的`yoTimes`方法（请注意，作为最佳实践/约定，Java 方法应以小写字符开头）：

```
private TimerTask yoTimes(Model model) {
    model.addAttribute("timerMsg", "Yo Timer");
    return new MyTimerTask();
} 
```

新创建的`MyTimerTask`类：

```
public class MyTimerTask extends TimerTask {
    public void run() {
        // Whatever the task should be
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T13:11:12.453

```
private TimerTask YoTimes(Model model) 
{
    model.addAttribute("timerMsg", "Yo Timer");
    return null; // ************
} 
```

请看看你在这里返回什么！

那么这将导致 NPE 也就不足为奇了。也许您想返回一个实际的 TimerTask 对象。;-)

因此，改为创建并返回您的 TimerTask：

```
private TimerTask YoTimes(final Model model) 
{
    model.addAttribute("timerMsg", "Yo Timer");
    return new TimerTask() {
       public void run() {
          // whatever code you want called by the timer
       }
    };
} 
```

# facebook - Facebook 网站网址 - 重定向到同一域中的不同网址

> ID：10961239
> 
> 赞同：1
> 
> 时间：2012-06-09T13:02:25.437
> 
> 标签：facebook

我在developers.facebook.com 上创建了一个facebook 应用程序，并为我的网站指定了一个网站网址。当我网站上的用户使用 facebook 登录时，它会将他们重定向回我在 facebook 应用程序设置中指定的网站 URL（例如 example.com）。

我还有一个拥有 facebook 登录的移动网站，但是当用户从移动网站 (mobile.example.com) 登录时，它仍然会重定向到主站点 (example.com)。

如何根据 facebook 登录请求的来源将 facebook 重定向到 example.com 或 mobile.example.com？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:18:14.097

Facebook 允许您将一个名为的变量传递`state`给身份验证对话框。Facebook 会在成功或失败时返回此值。

该`state`变量的目的是防止人们通过伪造请求访问您的站点。但是，您可以向状态变量添加一个字符串，该字符串对来自移动站点的人来说是唯一的。在使用您的应用程序注册的重定向页面上，您只需添加代码来检查`state`变量并重定向用户（如果其中包含“mobile”字符串）。

# java - nio 或 io 用于服务器处理 1000 个并发文件上传/下载？

> ID：10961240
> 
> 赞同：2
> 
> 时间：2012-06-09T13:02:31.897
> 
> 标签：java, io, scalability, nio

所以人们说 NIO 比 IO 更快，扩展性更好。对于处理 1000 个并发 GET/PUT 的服务器来说，它会是一样的吗？

每个模型的简单线程最大限度地利用多个核心。NIO在这方面站在哪里？

有没有办法将这两者结合起来？如果是这样，任何关于细节的链接会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:41:23.553

几十年前，NIO 的扩展性比 IO 好得多，主要是因为您可以有效使用的线程数量相对较少。尤其是在 Linux 系统上。例如几百个线程。今天，临界点要高得多，例如大约 10,000。如果你需要 100,000 个连接，使用 NIO 是个好主意。但是，如果您只有几千个，您可能会发现磁盘或网络性能等其他问题更为关键。

我几乎总是使用 NIO，每个阻塞连接都有一个线程。事实上，Java 7 中 NIO2 之前的默认行为是阻塞套接字和文件。BTW NIO2 使用线程池来支持它的“异步”IO。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:55:15.063

除了@Kumar 发布的链接之外，我发现这个很有帮助（几周前正在做这项研究）：[http://paultyma.blogspot.com/2008/03/writing-java-multithreaded-servers.html](http://paultyma.blogspot.com/2008/03/writing-java-multithreaded-servers.html)。

有关更详细的统计信息，请参阅相关幻灯片。他提出了 java.io 方法的论点。当然，与所有事情一样，这取决于用例。

# codeigniter - 设计 - 两个控制器中的相同功能

> ID：10961241
> 
> 赞同：0
> 
> 时间：2012-06-09T13:02:47.750
> 
> 标签：codeigniter

我的 CI 应用程序中有两个控制器。

*   admin_controller.php 和
*   用户控制器.php

在 中`user_controller.php`，有一个`show_message()`这样的函数：

```
class User_controller extends Controller{    
    function show_message(){
        echo "your message";
    }    
} 
```

并且，在 中`admin_controller.php`，我想编写一个类似的函数`show_message()`。

我的问题是，在两个控制器中使用一个功能的最佳方法是什么？`show_message`我应该像这样重写函数`admin_controller.php`吗？

```
class Admin_controller extends Controller{    
    function show_message(){
        echo "your message";
    }    
} 
```

还是应该在文件帮助程序中创建该函数并在控制器管理员和用户中调用该函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:24:50.077

```
Class MY_Controller extends CI_Controller
{
     function show_message(){
     echo "your message";
}    

Class Admin extends MY_Controller {}
Class User extends MY_Controller {}

$this->admin->show_message();   // Result: "Your message"
$this->user->show_message();   // Result: "Your message" 
```

# iphone - 如何使 UILocalNotification 像 ios 默认时钟应用程序中的闹钟一样重复

> ID：10961246
> 
> 赞同：1
> 
> 时间：2012-06-09T13:03:32.503
> 
> 标签：iphone, ios, uilocalnotification, clock, alarm

我已经在 ios 中设置了像闹钟默认设置的闹钟，但我不知道如何在 ios 的默认时钟应用程序中让 UILocalNotification 像闹钟一样重复。这意味着闹钟在一周内重复某些天。谢谢

像图片一样重复：http: [//i594.photobucket.com/albums/tt22/hungknorton/RepeatClock.png](http://i594.photobucket.com/albums/tt22/hungknorton/RepeatClock.png)

# magento - 自动安装 Magento

> ID：10961247
> 
> 赞同：1
> 
> 时间：2012-06-09T13:03:34.240
> 
> 标签：magento

我正在考虑以自动方式安装magento。我想我需要创建一些脚本或其他东西......但我想我不是第一个需要它的人。那么您知道任何好的资源或解决方案如何吗？它适用于 Windows 和 Linux 操作系统。谢谢。雅罗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:42:13.127

可能还有其他人，但这里有一个快速而肮脏的脚本，我不时使用表单来安装 Magento，检查我的 svn repo 并初始化 modman。如果需要，它可以扩展到创建数据库等，但它对我来说很好：

```
#!/bin/bash

# Required Script Variables
DB_NAME=
DB_USER=
DB_HOST=
DB_PASS=
URL=
MAGENTO_VERSION="1.7.0.0"
ADMIN_FIRSTNAME=
ADMIN_SURNAME=
ADMIN_EMAIL=
ADMIN_USER=
ADMIN_PASS=
SVN_REPO=

# Download and install Magento
wget http://www.magentocommerce.com/downloads/assets/$MAGENTO_VERSION/magento-$MAGENTO_VERSION.tar.gz

printf "\n\nUnpacking and preparing to install Magento...\n" 

tar -zxvf magento-$MAGENTO_VERSION.tar.gz
mv magento/* magento/.htaccess .
chmod -R o+w media var
chmod o+w app/etc
rm -rf downloader/pearlib/cache/* downloader/pearlib/download/*
rm -rf magento/ magento-$MAGENTO_VERSION.tar.gz

printf "\n\nInstalling Magento...\n"

/usr/local/bin/php -f install.php -- \
    --license_agreement_accepted "yes" \
    --locale "en_GB" \
    --timezone "Europe/London" \
    --default_currency "GBP" \
    --db_host "$DB_HOST" \
    --db_name "$DB_NAME" \
    --db_user "$DB_USER" \
    --db_pass "$DB_PASS" \
    --url "$URL" \
    --use_rewrites "yes" \
    --use_secure "no" \
    --secure_base_url "" \
    --use_secure_admin "no" \
    --skip_url_validation "yes" \
    --admin_firstname "$ADMIN_FIRSTNAME" \
    --admin_lastname "$ADMIN_SURNAME" \
    --admin_email "$ADMIN_EMAIL" \
    --admin_username "$ADMIN_USER" \
    --admin_password "$ADMIN_PASS"

# Setup svn and modman
modman init
mkdir .modman/modules
svn co $SVN_REPO .modman/modules
modman update-all 
```

# apache2 - Apache 停止处理请求（mod_wsgi？）

> ID：10961257
> 
> 赞同：0
> 
> 时间：2012-06-09T13:05:02.570
> 
> 标签：apache2, mod-wsgi, ubuntu-10.04

在某些时候，我的网站在 Apache2 上运行 mod_wsgi 只是*停止处理请求*。与服务器的*连接保持不变，客户端等待*响应，但它永远不会被 apache 返回。此时服务器处于*0% CPU*状态，没有任何处理。我认为，apache 只是将请求发送到队列并且永远不会让它们离开那里。当我执行时`apache2ctl graceful`，问题**没有**解决。只有之后`apache2ctl restart`。

我的站点是 Pyramid 的 4 个实例 wsgi 应用程序和 Zope 3 的 2 个实例。据我所知，它运行正常并且没有速度问题。

版本：Ubuntu 10.04 apache2 2.2.14-5ubuntu8.9 libapache2-mod-wsgi 2.8-2ubuntu1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:00:21.167

听起来您正在使用嵌入式模式来运行多个应用程序，并且您正在使用在子解释器中有问题的第三方 C 扩展，从而导致潜在的死锁。否则，您的代码会在内部死锁或阻塞外部服务并且永远不会返回，从而导致可用进程/线程耗尽。

首先，您应该考虑使用守护进程模式并将每个 Web 应用程序委托给不同的守护进程组，然后强制每个进程在主解释器中运行。

看：

[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Delegation_To_Daemon_Process](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Delegation_To_Daemon_Process) http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API

否则使用以下描述的调试提示：

[http://code.google.com/p/modwsgi/wiki/DebuggingTechniques](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques)

用于获取有关应用程序正在做什么的堆栈跟踪。

# css - 按行链接文本框，显示思维导图

> ID：10961258
> 
> 赞同：0
> 
> 时间：2012-06-09T13:05:23.863
> 
> 标签：css

我必须显示简单的思维导图，为此我必须显示简单的文本框并将它们与某些行链接，但我不知道该怎么做，是否有任何 CSS 属性可以帮助我？

# z3 - 线性整数算术中量词消除的工具

> ID：10961259
> 
> 赞同：1
> 
> 时间：2012-06-09T13:05:26.387
> 
> 标签：z3, quantifiers

除了 Z3 之外，是否还有其他可用（并且仍然受支持）的 SMT 工具可以为线性整数算术执行量词消除？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:04:07.567

你可以试试Philipp Rümmer 的[Princess](http://www.philipp.ruemmer.org/princess.shtml)。它支持量词消除并得到积极维护。

# c++ - 如何反转 std::vector<> 中每个谓词的含义？

> ID：10961262
> 
> 赞同：1
> 
> 时间：2012-06-09T13:05:36.640
> 
> 标签：c++, functional-programming, predicate

我有两个谓词向量：

```
typedef std::function<bool(int)> pred;

vector<pred> v1;
vector<pred> v2; 
```

我需要将它们合并为一个，但来自第二个向量的谓词应该被反转（即它们应该`true`在它们正常返回的情况下返回`false`）。所以，实际上我需要一种“反转”包装器。

我创建了一个反转函数和一个包含原始谓词并反转其值的结构：

```
struct inverted
{
  pred pr;
  inverted(pred pr_) : pr(pr_) {}

  bool operator () (int i) {return !pr(i);}
};

pred CreateInverted(pred pr)
{
  return inverted(pr);
} 
```

使用它，向量谓词的反转可能如下所示：

```
transform( v2.begin(), v2.end(), v2.begin(), CreateInverted ); 
```

但我想知道是否有更好的解决方案，特别是基于标准库？

没有 C++11，允许使用 Boost。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T13:23:37.360

如果您的谓词遵循某些约定，您可以使用它`std::not1`来创建倒置谓词。这是一个例子：

```
struct foobar : std::unary_function<bool, int>
{
    bool operator()(int value) const { return value > 42; }
};

do_something_if(values.begin(), values.end(), std::not1(foobar()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T13:31:47.873

标准库有一个`std::not1`谓词，它接受一元谓词并产生参数的否定，因此无需为此提供您自己的函子[代码未经测试，您可能需要更正语法]：

```
std::transform( v.begin(), v.end(), v.begin(), 
                std::not1< std::function<bool(int)> > ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T13:14:41.417

我想不出更好的方法来解决你的问题。

您实际上将一个`transformer`函数与`stl::transform`应该完全用于您的目的的函数一起使用。

这几乎是可观的参考代码！

# php - 使用表进行配置

> ID：10961263
> 
> 赞同：0
> 
> 时间：2012-06-09T13:05:37.153
> 
> 标签：php, mysql

我正在为一个小社会管理一个简单的网站。我们轮流保持我们的环境清洁，直到现在，这都是通过在纸日历上写下我们的名字来处理的。

现在我们希望能够在线进行，我已经使用 MySQL 数据库制定了一个可行的、可预订的时间表。为此，我想添加一个简单的功能，以赋予负责清洁计划的人员一些管理权限，例如能够锁定计划以进行进一步的“预订”。

为了实现这一点，我正在考虑创建一个“schedule_admin”表，其中某些值可以用作标志来指示例如计划是否被锁定。

伪代码将是这样的：

```
SELECT appropriate_col_name FROM schedule_admin
if flag == 'locked'
schedule is read/write
else
schedule is read only 
```

或者，如果您想锁定/解锁表，它会像：

```
Press button LOCK then
UPDATE schedule_admin VALUE('locked')

Press button UNLOCK then
UPDATE schedule_admin VALUE('unlocked') 
```

或者这种方式完全是香蕉？

编辑：我想我有点不清楚。我真正想要的是某种配置表，PHP 脚本可以从中提取数据。（锁定 = 0 - 允许预订，锁定 = 1 - 不允许预订）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:44:12.220

您可以添加一个新列“锁定”。然后检索“锁定”值，如果它为 1（真），则仅显示选项以查看它。如果它是 0（假）显示选项来预订新的日子。

# android - 调用画廊带回图像

> ID：10961264
> 
> 赞同：-1
> 
> 时间：2012-06-09T13:05:43.063
> 
> 标签：android

我正在为我的应用程序编写代码，但我被困在试图解决这个问题的过程中。

我想`GALLERY`通过应用程序调用，然后如果用户选择一个图像，该图像会**被带回我的应用程序以进行进一步操作**，而不是通过图库打开它。

请帮我编码，在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:34:10.637

```
startActivityForResult(new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI), SELECT_IMAGE); 
```

获取 SD Card.Uri 上的图像将是

`android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI`

onActivityResult 方法：

```
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    if (resultCode == RESULT_OK) {
        Uri photoUri = intent.getData();

        if (photoUri != null) {
            try {
                Bitmap bitmap = MediaStore.Images.Media.getBitmap(this
                    .getContentResolver(), photoUri);

                //Now you can upload this bitmap to server or do something else.
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:16:21.680

在此处查看答案：[从图库中选择一张图片](https://stackoverflow.com/questions/2791545/pick-an-image-from-the-gallery?rq=1)

```
Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType("image/*");
//intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(intent, 1); 
```

# mysql - 为什么mysql中的表有无效的默认值

> ID：10961265
> 
> 赞同：4
> 
> 时间：2012-06-09T13:05:54.517
> 
> 标签：mysql

我执行了下面的查询

```
ALTER TABLE `users` CHANGE `phone` `phone` VARCHAR( 20 ) 
    CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL DEFAULT NULL 
```

结果是……

```
#1067 - Invalid default value for 'phone' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T13:07:45.870

您不允许它为 null，然后将其设置为 null 作为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:09:54.090

您为不能为 NULL 的列设置了默认值 NULL

# c# - 创建位图以按像素比较两个图像

> ID：10961266
> 
> 赞同：0
> 
> 时间：2012-06-09T13:06:30.820
> 
> 标签：c#

我正在尝试按像素比较两个图像。我在谷歌上搜索过位图，但我并不清楚。

我的代码显示错误`Parameter is not valid`。

我试过这个；

var a = new Bitmap(imageurl);

但它不起作用。

我也参考这个网站进行图像比较：

[http://www.c-sharpcorner.com/uploadfile/prathore/image-comparison-using-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/prathore/image-comparison-using-C-Sharp/)

我试过的：

但在这条线上显示错误`parameter is not valid`。

```
var img1 = new Bitmap(fileone);
var img2 = new Bitmap(filetwo); 
```

我在这两个变量中有这样的存储路径，

```
fileone=C:\image\a.jpg:
filetwo=c:\image\b.jpg;

var img1 = new Bitmap(fileone);
var img2 = new Bitmap(filetwo);

if (img1.Width == img2.Width && img1.Height == img2.Height)
{
   for (int i = 0; i < img1.Width; i++)
   {
       for (int j = 0; j < img1.Height; j++)
       {
           img1_ref = img1.GetPixel(i, j).ToString();
           img2_ref = img2.GetPixel(i, j).ToString();

           if (img1_ref != img2_ref)
           {
              count2++;
              flag = false;
              break;
           }

           count1++;
        }
        // progressBar1.Value++;
    }

    if (flag == false)
       Response.Write("Sorry, Images are not same , " + count2 + " wrong pixels found");
    else
       Response.Write(" Images are same , " + count1 + " same pixels found and " + count2 + " wrong pixels found");
}
else
   Response.Write("can not compare this images");

this.Dispose(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T16:14:33.647

> ```
> fileone=C:\image\a.jpg:
> filetwo=c:\image\b.jpg; 
> ```

这不是有效的 C#。并且如何引用文件名非常重要，因为反斜杠是转义字符。

也许你的真实代码看起来像

```
fileone="C:\image\a.jpg";
filetwo="C:\image\b.jpg"; 
```

然后`\b`变成退格字符，不是你想要的。您可以使用 @-literal 来避免转义处理：

```
fileone=@"C:\image\a.jpg";
filetwo=@"C:\image\b.jpg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:15:33.043

如果您遇到错误

```
var img1 = new Bitmap(fileone); 
```

很可能您的文件不存在，请确保 `C:\image\a.jpg`存在。

# objective-c - [NSXMLParser initwithcontentsofurl:...] 加载时是否锁定？

> ID：10961270
> 
> 赞同：1
> 
> 时间：2012-06-09T13:07:00.523
> 
> 标签：objective-c, nsxmlparser

我正在从 URL 加载一个相当简单的 XML 文件。我想在解析器加载文件时显示网络活动指示器，但显然不是在解析时。

问题：从 url 加载文档时，initWithContentsOfUrl: 方法是否会锁定程序执行？换句话说，下面的代码是否正确？

对我来说，这似乎很明显，但我想 100% 确定。

```
NSString* const urlString = @"...";
NSURL* url = [NSURL URLWithString:urlString];
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
NSXMLParser* parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:00:21.067

这篇文章很好地解释了它[http://akosma.com/2010/05/28/initwithcontentsofurl-methods-considered-harmful/](http://akosma.com/2010/05/28/initwithcontentsofurl-methods-considered-harmful/)：

> 当然，这些方法的主要问题是它们是**同步**的；这意味着执行它们的线程（通常是 UI 线程）**将完全阻塞，直到它们返回**，并且在大多数应用程序中，这意味着您实际上阻塞了整个应用程序一段未知的时间。这意味着没有按钮或 UI 小部件会对输入做出反应，无法进行导航，不会传递或执行触摸事件，在网络操作完成之前什么都不会发生。
> 
> 更糟; 使用initWithContentsOfURL:时，没有超时，网络故障没有有意义的反馈，用户也没有办法取消当前的网络操作。最后一个因素本身就证明不使用 initWithContentsOfURL: 是合理的；您绝不能发布导致糟糕用户体验的代码。您的用户会对此感到不满并抱怨！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:53:54.837

是的，它确实阻塞了。因此，您的活动指示符将不会显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T13:24:28.797

如果您想显示下载进度，您需要自己使用类似的东西下载文件`NSURLConnection`，然后将本地文件路径传递给 XML 解析器。

# ruby-on-rails - rails - 如何在 ui 中显示使用多对多关联模型创建的多对多数据模型？

> ID：10961275
> 
> 赞同：0
> 
> 时间：2012-06-09T13:07:27.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个食谱、成分、成分_食谱模型

食谱有

```
has_many :ingredient_recipes
has_many :Ingredients, :through => :RecipeIngredient 
```

成分有

```
has_many :ingredient_recipes
has_many :Recipes, :through => :RecipeIngredient 
```

成分_配方有

```
belongs_to :recipes
belongs_to :ingredients 
```

在我的用户界面中，这不再起作用

```
<% @recipe.ingredients.each do |ingredient| %> 
```

编辑

```
 ActionView::Template::Error (uninitialized constant Recipe::Ingredients):  
97:                       </td>
98:                     <tr>
99:                       <td >
100:                         <% @recipe.ingredients.each do |ingredient| %>
101:                             ingredient.name
102:                         <% end %>
103:                       </td > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:11:26.810

改变：

```
has_many :Ingredients, :through => :RecipeIngredient 
```

至

```
has_many :ingredients, :through => :ingredient_recipes 
```

不要大写 :ingredients ，并且 :through 需要引用您正在经历的关联而不是模型。

对于：食谱：

```
has_many :recipes, :through => :ingredient_recipes 
```

# ruby-on-rails - Faye，websocket连接问题：无法与ws://localhost:9292/faye建立连接

> ID：10961280
> 
> 赞同：1
> 
> 时间：2012-06-09T13:07:51.027
> 
> 标签：ruby-on-rails, websocket, faye

我已经设置了我的 Faye 服务器，与我的 Rails 服务器一起运行，就像本教程告诉我的那样：http: [//net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real- time-push-server-in-rails/](http://net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real-time-push-server-in-rails/)

没有奇怪的行为，直到我取消注释该行

```
var client = new Faye.Client('http://localhost:9292/faye'); 
```

然后 Firebug 给了我这个问题标题中的错误。访问 localhost:9292/faye 和 /faye.js 给了我我所期望的，并且（显然）引用该 .js 文件的 javascript_include_tag 没有任何问题。

当我开始 faye 时，我必须使用 bundle exec，根据这个错误消息：

`$ rackup ./config.ru -E production -s thin -p 9292 /Users/newcreation/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.0.21/lib/bundler/runtime.rb:31:in ``block in setup': You have already activated rack 1.4.1, but your Gemfile requires rack 1.3.0\. Using bundle exec may solve this. (Gem::LoadError)`

我的 config.ru 看起来像这样：

```
require 'rubygems'
require 'bundler'
Bundler.require
require 'faye'

require File.expand_path('../config/initializers/faye_token.rb', __FILE__)

faye_server = Faye::RackAdapter.new(:mount => '/faye', :timeout => 45)
run faye_server 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T23:47:34.353

显然，您至少需要 0.7 版才能支持 websocket。 [http://blog.jcoglan.com/2011/11/28/announcing-faye-websocket-a-standards-compliant-websocket-library/](http://blog.jcoglan.com/2011/11/28/announcing-faye-websocket-a-standards-compliant-websocket-library/) 这意味着更新 ruby​​gems，对我来说，并重新运行捆绑安装。我还需要更改我的 .ru 文件以包含以下内容：

```
Faye::WebSocket.load_adapter('thin') 
```

# c# - 如何更改我的 web 服务的 mime 类型？

> ID：10961281
> 
> 赞同：1
> 
> 时间：2012-06-09T13:07:55.423
> 
> 标签：c#, asp.net, json, web-services, web

我有一个休息服务实现如下：

```
 public string GetMenuItemById(string itemID)
 {
   MenuItemsRepository menutemsRepository = new MenuItemsRepository();
   string json = menutemsRepository.GetMenuItemById(itemID);
   .....
 } 
```

我想返回 JSON 字符串，但响应中的内容类型不应该是 application/json 而是 text/json 或 html/json。我怎样才能做到这一点？

# jsf - 在 JSF 中使用消息包时从验证消息中删除组件 ID

> ID：10961284
> 
> 赞同：2
> 
> 时间：2012-06-09T13:08:06.343
> 
> 标签：jsf

我正在练习JSF。我创建了一个带有用户 ID 和密码字段的登录屏幕。现在两个输入字段都需要="true"。我创建了 message.properties 文件并向其中添加了以下验证 ID，

> **javax.faces.component.UIInput.REQUIRED= {0} 是必填字段**

我在 faces-config.xml 中添加了消息包。

不，当我在没有给出任何字段值的情况下单击提交时，显示的消息如下，

> **j_idt13:userid 是必填字段**

我想从消息中删除作为组件 ID 的**j_idt13 。**怎么做？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T13:11:24.110

在输入组件中，使用属性`label`而不是 id 来显示：

```
<h:inputText .. label="User Id" /> 
```

# sql - 使用 korma 和 clojure 生成查询子句

> ID：10961285
> 
> 赞同：3
> 
> 时间：2012-06-09T13:08:10.277
> 
> 标签：sql, clojure, korma

我正在尝试根据传递给函数的列和值的映射生成 korma 查询条件。

我发现当一张空地图被传递到 korma's where 时：

```
(select "things"
  (where conditions)) 
```

生成带有空 WHERE 的查询，这会导致 SQL 错误：

```
SELECT * FROM things WHERE () LIMIT 10 
```

但是使用这种形式：

```
(select "things"
  (if-not (empty? conditions) 
    (where conditions))) 
```

导致错误：“传递给的参数 (1) 数量错误：core$where”

是否有一种惯用的方式来处理 korma 中的动态子句？

更新

以下工作，但很笨拙（注意奇怪的必要 if 格式）

```
(defn do-select []
  (->  (select* "things") 
    (fields :id :data)
    (limit 10)))

(defn add-constraints [query conditions]
  (if (empty? conditions) 
      query
      (where query (conditions-to-clause-map conditions))))

(select (do-select) 
  (add-constraints conditions)           
  (where (is_owner? owner))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:16:43.967

我不认为如果不查看 korma 的引擎盖并尝试调用一些私有 API 就可以生成动态查询，但这是一个坏主意。你的第二个代码的问题`select`是`where`宏。select 的作用是：

```
(defmacro select
    [ent & body]
      `(let [query# (-> (select* ~ent)
                     ~@body)]
         (exec query#))) 
```

如您所见，它将`select*`返回值线程化到下一个表单，并且如果您引入`if`导致该线程中断并`where`仅获取一个值（这是您的映射）而不是获取 select* 和映射的值的子句，因此会出现错误说错误的参数数量。

到目前为止，似乎`eval`有一些动态代码生成是你的朋友。就像是：

```
(eval `(select "things"
       ~(if (empty? conditions) 
           `identity
           `(where conditions)))) 
```

我还没有尝试过，但我希望它能给你这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T20:07:39.100

您可能已经找到了解决此问题的方法，但我会插话。就个人而言，我最终使用 cond-> 宏，如果您使用 Clojure 1.6+，则该宏可用。

[您可以在此处](https://github.com/clojure/clojure/blob/master/changes.md#24-new-threading-macros "新的线程宏")找到有关新线程宏的信息。

生成的代码如下所示：

```
(let [query (->(select* "things") 
                 (fields :id :data)
                 (limit 10))]
  (-> (cond-> query
         conditions (where conditions)
         more-conditions (where more-conditions))
      (exec))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T21:15:37.543

一开始有点奇怪，但牢记“代码即数据”的口头禅，我创建了一个“my-where”函数，它要么传递无条件的原始查询，要么插入一个真正的 korma where 子句作为结果。

就像是：

```
(defn my-where [query conditions]
  (if-not (nil? conditions)
    (-> query (where conditions))
    query)) 
```

然后你可以使用：

```
(select "things"
  (my-where conditions)) 
```

希望这会有所帮助，
格雷格

# javascript - 绘制图表的奇怪递归代码

> ID：10961286
> 
> 赞同：0
> 
> 时间：2012-06-09T13:08:15.137
> 
> 标签：javascript, html

我很难弄清楚这段以粗体标记的代码。请有人给我解释一下这些台词

```
function growBars() {
    var barStartX = 0;
    var barStartY = 0;
    var barHeight = 0;
    var barValue = 0;

    <!-- ********** Start Unable to understand -->
    barValue = parseInt(chartData.bars[i].value);
    barHeight = (barValue * chartHeight / maxValue) / numSteps * idxStep;
    barStartX = chartMargin + chartAxisSpace + (i * (barWidth + barMargin)) + barMargin;
    barStartY = chartMargin + (chartHeight - barHeight);
    drawBar(barStartX, barStartY, barWidth, barHeight);
}
if (idxStep < numSteps) {
    idxStep++;
    setTimeout('growBars()', growSpeed);
}
} < -- * * * * * * * * * * * * * End till here-- >

function drawBar(barX, barY, barW, barH) {
    context.fillStyle = '#00c';
    context.fillRect(barX, barY, barW, barH);
    context.shadowOffsetX = 3;
    context.shadowOffsetY = -3;
    context.shadowBlur = 3;
    context.shadowColor = 'rgba(200, 200, 200, .3)';
    context.strokeStyle = '#000';
    context.lineWidth = 1;
    context.strokeRect(barX, barY, barW, barH);
} 
```

如您所见，上面的代码在图表上绘制了条形图。我无法理解的是这个递归函数的使用方式。那段代码有什么作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:15:55.900

```
1\. barValue = parseInt(chartData.bars[i].value);
2\. barHeight = (barValue * chartHeight / maxValue) / numSteps * idxStep;
3\. barStartX = chartMargin + chartAxisSpace + (i * (barWidth + barMargin)) + barMargin;
4\. barStartY = chartMargin + (chartHeight-barHeight);
5\. drawBar(barStartX, barStartY, barWidth, barHeight); 
```

1.  将 chartData.bars[i].value 转换为整数
2.  设置条形高度；我不确定 numSteps 或 idxStep 是 3/4。设置 bar x,y 开始坐标
3.  使用上面计算的值调用 drawBar 函数。

它不是递归的，尽管您不需要调用函数，除非您计划在图表上说明数据的增长

```
function growBars() { //START OF FUNCTION
    var barStartX = 0;
    var barStartY = 0;
    var barHeight = 0;
    var barValue = 0;

    <!-- ********** Start Unable to understand -->
    barValue = parseInt(chartData.bars[i].value);
    barHeight = (barValue * chartHeight / maxValue) / numSteps * idxStep;
    barStartX = chartMargin + chartAxisSpace + (i * (barWidth + barMargin)) + barMargin;
    barStartY = chartMargin + (chartHeight - barHeight);
    drawBar(barStartX, barStartY, barWidth, barHeight);
} //END OF FUNCTION
if (idxStep < numSteps) { //START OF IF STATEMENT
    idxStep++;
    setTimeout('growBars()', growSpeed);
} //END OF IF STATEMENT
} < -- * * * * * * * * * * * * * End till here-- > // UNPAIRED CLOSE BRACKET

function drawBar(barX, barY, barW, barH) {
    context.fillStyle = '#00c';
    context.fillRect(barX, barY, barW, barH);
    context.shadowOffsetX = 3;
    context.shadowOffsetY = -3;
    context.shadowBlur = 3;
    context.shadowColor = 'rgba(200, 200, 200, .3)';
    context.strokeStyle = '#000';
    context.lineWidth = 1;
    context.strokeRect(barX, barY, barW, barH);
} 
```

正如您从我的评论中看到的那样，增长条不是从自身内部调用的，因此它不是递归的

# c# - 如何将 html 标签/脚本作为文本插入到 sql 中？

> ID：10961290
> 
> 赞同：0
> 
> 时间：2012-06-09T13:09:00.533
> 
> 标签：c#, asp.net, sql-server, webforms

我正在尝试开发一个“练习”应用程序，其中文本框值将被插入到数据库中。

当我插入 textbox.text 值时会发生什么。

前任。文字=

```
 <script>alert('Hello')</script> 
```

我收到一个错误：从客户端检测到具有潜在危险的 Request.Form 值 (TextBox1="alert('XSS')...")。

我已经在使用 sql 参数，所以像 ' " /// \\ 这样的值现在还不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:13:41.940

为您的页面设置**ValidateRequest="false"**，以允许使用 html。

在页面级别：

```
<%@ Page Language="c#"  ValidateRequest="false" AutoEventWireup="false" CodeBehind="TestPage.aspx.cs" Inherits="TestPage" %> 
```

此外，对于 ASP.NET 4.0，您需要将以下内容添加到您的 web.config：

```
<httpRuntime requestValidationMode="2.0" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:21:23.887

如果仅用于测试目的，您可能会禁止 ASP.NET 验证器，因此它将停止寻找可能具有潜在危险的 HTML/XML 标记。为此，请在您的 aspx 页面中将 ValidateRequest 设置为 false。

```
<%@ Page Title="" Language="C#" ValidateRequest="false" 
```

这不建议用于生产环境，但在您的情况下可以做到这一点。以下[MSDN 链接中的更多信息](http://msdn.microsoft.com/en-us/library/ff647397.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T13:40:42.223

这不是 asp.net 警告的（潜在）sql 问题。当您接受该值并稍后在您的页面中显示它**而不进行编码**时，该不需要的脚本将被触发。

此时它会显示一个无害的警报，但是如果您允许任何用户输入这些值，那么谁知道会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T13:45:23.843

您可以在连接字符串中插入中断的标签。像：

```
Insert into table values('<'+'h2'+'>'+'Another One'+'<'+'/'+'h2'+'>') 
```

# javascript - 如何从纯文本 URL 中检测和转换 URL 图像和视频？

> ID：10961291
> 
> 赞同：3
> 
> 时间：2012-06-09T13:09:27.823
> 
> 标签：javascript, jquery, html, regex, image

嗨，我需要从纯文本 url 检测和转换 url 图像和视频

html

```
<div id="content-url">
 Hello World<br>
 http://www.goalterest.com/  <br>
 http://www.esotech.org/wp-content/uploads/2011/12/jquery_logo.png
 http://www.esotech.org/wp-content/uploads
</div> 
```

jQuery

```
var urlRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
var photoRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]).(?:jpg|gif|png)/ig;

  var url_url= $('#content-url').html().match(urlRegex);
var url_photo= $('#content-url').html().match(photoRegex);

  var convert_url='<a href="'+url_url+'">'+url_url+'</a>';
var convert_photo='<img src="'+url_photo+'" width="150" height="150" alt="Nba">';
$('#content-url').append(convert_url);
$('#content-url').append(convert_photo); 
```

这里演示 [http://jsfiddle.net/nqVJc/3/](http://jsfiddle.net/nqVJc/3/)

在演示中，我得到了检测并转换为 url 和照片的方法，但是当存在多个 url 时，问题就出现了 Urls 没有分开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:14:18.617

您没有遍历匹配的元素：

```
$.each( url_url, function(i,value){
   var convert_url='<a href="'+url_url[i]+'">'+url_url[i]+'</a>';
   var convert_photo='<img src="'+url_photo[i]+'" width="150" height="150" alt="Nba">';
   $('#content-url').append(convert_url,convert_photo)
}); 
```

这是**[演示](http://jsfiddle.net/FpsxC/)**。

要删除匹配的 url，您需要在之前添加以下行`$.each`：

```
$('#content-url').html( $('#content-url').html().replace(urlRegex,''));

//$.each goes here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:46:36.133

您的正则表达式可以改进。[URI.js](http://medialize.github.com/URI.js/)提供[URI.withinString()](http://medialize.github.com/URI.js/docs.html#static-withinString)来提取 URL。此处使用的 Regex 是[gruber 修订版](http://rodneyrehm.de/t/url-regex.html#gruber+revised)：

```
/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig 
```

# android - 如何访问时间选择器按钮？

> ID：10961297
> 
> 赞同：-2
> 
> 时间：2012-06-09T13:09:55.643
> 
> 标签：android

我在其他方面看到了如何使用 .OnDismissListener 访问时间选择器上的取消按钮，但没有关于如何访问时间选择器的设置按钮我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:32:58.333

[在此处](http://developer.android.com/resources/tutorials/views/hello-timepicker.html)查看 TimePicker Android 教程。

您添加一个`OnTimeSetListener`，在调用 set 按钮时调用它。

例如（来自教程）：

```
// the callback received when the user "sets" the time in the dialog
private TimePickerDialog.OnTimeSetListener mTimeSetListener =
    new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            mHour = hourOfDay;
            mMinute = minute;
            updateDisplay();
        }
    }; 
```

# jquery - 使用 jquery 滑动/移动 div

> ID：10961298
> 
> 赞同：0
> 
> 时间：2012-06-09T13:09:55.853
> 
> 标签：jquery, jquery-ui, html, slider

我对 jquery 很陌生，在以下问题上没有找到任何帮助。想象一下这段 html 代码：

```
<div id="slideLeft">Click here to slide left</div>
<div id="main">
    <div id="div1">Content</div>
    <div id="div2">Content</div>
    <div id="div3">Content</div>
    <div id="div4">Content</div>
</div>
<div id="slideRight">Click here to slide right</div> 
```

每个 div 都有固定的高度和宽度，但主 div 一次只能显示两个 div。在这个主 div 的左侧和右侧，有按钮或其他任何东西（在此示例中只是其他 div），它们在单击时滑动内容 div。

默认情况下，我们会看到 div1、div2。当我单击“向右滑动”时，它应该移动 div，所以我们会在滑动后看到 div2、div3。等等等等。

我见过很多带有滑块的示例（看起来像滚动条），但这并不是我真正要寻找的。

感谢您的输入，我希望我的问题足够清楚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:07:01.070

我前段时间写了这个（并根据您的需要稍微调整了它）。工作小提琴在这里可用：

[http://jsfiddle.net/ben1729/CtNsE/2/](http://jsfiddle.net/ben1729/CtNsE/2/)

# ms-access - 在图片框内的图像中写入文本

> ID：10961299
> 
> 赞同：2
> 
> 时间：2012-06-09T13:10:01.650
> 
> 标签：ms-access, vba, ms-access-2007

我是 MSAccess 的菜鸟，但我只需要完成一项特定的任务。

我有一张图片（一张地图）和一个图片框。我将地图加载到图片框中，现在我需要在地图内的某些坐标中写入一些文本。我无法定位标签，因为稍后图像必须可以与此文本一起保存。

你能给我一些关于我该怎么做的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:56:21.260

您只能通过真正修改图像本身来完成此操作。

如果您在执行此操作后打印表单或报告，则在地图顶部放置标签对您有用。例如，您可以通过这种方式将其保存为 PDF，并且仍然可以在地图顶部进行测试。

# ruby-on-rails - 没有为名称为“image_filename”的模型配置字段

> ID：10961300
> 
> 赞同：0
> 
> 时间：2012-06-09T13:10:04.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, solr, sunspot

我有一个具有 2 个属性的模型：

```
:image_filename 
:yt_video_id 
```

我的控制器中有这段代码：

```
def index
   @search = Model.solr_search do |s|
   s.fulltext params[:search]
   s.paginate :page => params[:page], :per_page => 2
   s.with(:image_filename || :yt_video_id)
   end
   @model = @search.results
   respond_to do |format|
    format.html # index.html.erb
  end
 end 
```

在我的`model.rb`模型中，我有这个`searchable`：

```
searchable do
    string :image_filename, :yt_video_id
  end 
```

我想要过滤器`:image_filename` **或** `:yt_video_id`任何不是`"nil"`。我的意思是，这两个属性都必须具有强制值。

但我得到了错误：

```
Sunspot::UnrecognizedFieldError in ModelsController#index

No field configured for Model with name 'image_filename' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:15:19.117

通过以下步骤解决了该问题：

（这个解决方案对我来说很好。我希望这个解决方案也可以帮助你。）

在**model.rb**你不能写这个语法：

```
searchable do
    string :image_filename, :yt_video_id
  end 
```

您必须编写以下语法：

```
searchable do
      string :image_filename
      string :yt_video_id
     end 
```

在 index 操作中的**models_controller.rb**中：

```
def index
   @search = Model.solr_search do |s|
   s.fulltext params[:search]
   s.paginate :page => params[:page], :per_page => 2
   s.any_of do
      without(:image_filename, nil)
      without(:yt_video_id, nil)
     end
   end
   @model = @search.results
   respond_to do |format|
    format.html # index.html.erb
   end
 end 
```

我已经使用了该`any_of`方法。

**要使用 OR 语义组合范围，请使用 any_of 方法将限制分组为析取：**

```
Sunspot.search(Post) do
  any_of do
    with(:expired_at).greater_than(Time.now)
    with(:expired_at, nil)
  end
end 
```

您可以在[https://github.com/sunspot/sunspot/wiki/Scoping-by-attribute-fields中看到](https://github.com/sunspot/sunspot/wiki/Scoping-by-attribute-fields)

# mongodb - mongodb中的$或查询不起作用

> ID：10961302
> 
> 赞同：0
> 
> 时间：2012-06-09T13:10:14.193
> 
> 标签：mongodb, nosql

我已经在数据库中有这个文件：

```
 > db.test.find()
{ "_id" : ObjectId("4fd349242b153bfbd95a15a8"), "nombre" : "Javier", "apellido" : "Roger" } 
```

现在我执行这个查询：

```
db.test.find({"nombre": "Javier"})
{ "_id" : ObjectId("4fd349242b153bfbd95a15a8"), "nombre" : "Javier", "apellido" : "Roger" } 
```

它按预期工作。

但是当我执行这个查询时，mongodb 没有返回任何结果：

```
db.test.find({$or:[{"nombre": "Javier"}, {"apellido": "Javier"}]}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:16:51.313

当我插入该文档时，您的语法对我有用。

`$or`是 MongoDB v1.6 中的新功能。您是否可能正在运行一个非常旧的版本？

# python - 使用提取的信息映射 xml 文件

> ID：10961303
> 
> 赞同：1
> 
> 时间：2012-06-09T13:10:27.373
> 
> 标签：python, xml-parsing, lxml, elementtree, minidom

我正在尝试基于配置文件（也可以是 xml 文件）将一个 xml 文件映射到另一个。

## 输入

```
<ia>
    <ib>...</ib>
    <ic>...</ic>
</ia> 
```

## 输出

```
<oa>
    <ob>...</ob>
    <oc>...</oc>
</oa> 
```

## 配置

```
<config>
    <conf>
        <input>ia</input>
        <output>oa</output>
    </conf>
    <conf>
        <input>ib</input>
        <output>ob</output>
    </conf>
    .....
</config> 
```

因此，目的是解析一个 xml 文件并检索我感兴趣的信息，然后写入另一个 xml 文件，其中在配置文件中指定了映射信息。

由于脚本性质（以及稍后使用插件扩展）以及对 xml 处理的支持，我正在考虑使用 python。刚学了语言的语法和基础，开始了解[lxml](http://lxml.de/index.html)

这样做的一种方法

1.  解析配置文件（其中，标签可以有我感兴趣的节点的xpath）
2.  读取输入文件
3.  使用基于配置文件的[etbuilder](http://infohost.nmt.edu/tcc/help/pubs/pylxml/web/builder.html)写入输出

作为 python 新手，没有看到对 etbuilder 的 xpath 支持，我想知道这是最好的方法。也不确定所有的例外情况。有没有更简单的方法，或者任何其他库中的原生支持。如果可能的话，我不想在这项任务上花费太多时间，因为我可以专注于核心任务。

提前感谢ins。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:15:11.270

如果您希望将一个 XML 文件转换为另一个 XML 文件，那么[XSLT](https://en.wikipedia.org/wiki/XSLT)就是为此目的而设计的。您必须定义一个`.xslt`文件来描述 XML 内容的转换以及最终输出应该是什么样子。这是一种方法。

您还可以使用 读取 XML 文件`lxml`并生成输出 XML `lxml.etree.ElementTree`。我不熟悉，`etbuilder`但我认为生成所需的输出并不难。解析输入文件后，您可以构建配置 XML 并将其写入文件。

XPath 主要用于读取 XML 内容，您不需要它来构建 XML 文件。事实上，如果您使用适当的 XML 解析器，那么您也不需要 XPath 来读取文件内容，尽管 XPath 可以让生活更轻松一些。

# c - 整数的快速排序，rand() 中的分段错误

> ID：10961305
> 
> 赞同：0
> 
> 时间：2012-06-09T13:10:45.573
> 
> 标签：c, srand

我正在为整数编写一个快速排序算法，但在 srand 函数中出现了一个奇怪的段错误。以下是 sort.h 中的代码：

```
int distributePivot (int *a, int left, int pivot, int right) {
    int i, j;
    if (pivot != right)
        swapInt(&pivot, &right);
    i = left;
    j = right - 1;
    while (i < j) {
        while (i < j && a[i] <= a[right])
            i++;
        while (j > i && a[j] >= a[right])
            j--;
        if (i < j)
            swapInt(&a[i], &a[j]);
    }
    if (i < right)
        swapInt(&a[i], &a[right]);
    return i;
}

void intArrayQuickSort (int *a, int left, int right) {
    int pivot;
    if (left < right) {
            pivot = rand() % (right - left +1) + left;
        pivot = distributePivot(a, left, pivot, right);
        intArrayQuickSort (a, left, pivot -1);
        intArrayQuickSort (a, pivot, right);
    }
} 
```

这是来自 sort-test.c 的调用：

```
 srand(time(NULL));
    intArrayQuickSort(temp, 0, n - 1); 
```

where`temp`是指向整数的指针。

这是我在 gdb 中执行它时遇到的错误：

```
 Program received signal SIGSEGV, Segmentation fault.
    0x00007ffff77e9884 in rand () from /lib64/libc.so.6 
```

你能帮我么？

非常感谢。

编辑：这是 swapInt 函数：

```
void swapInt (int *a, int *b) {
    int aux = *a;
    *a = *b;
    *b = aux;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:50:16.463

程序逻辑有错误。
eg
in main
array = [1,2]
call intArrayQuickSort(array, 0, 1);// a:array, left:0, right:1
in intArrayQuickSort
pivot = 1 //`rand() % (right - left +1) + left;`
调用distributePivot(a, 0, 1, 1)
indistributePivot
not swap (pivot, right) because pivot == right
i = 0 //left
j = 0 //right - 1
not execute while block because i == j
execute swap (a[i],a [right]) 因为 i < right // 0 < 1
//a = [2, 1] //!!NG
return 0
//已经非法状态
intArrayQuickSort
pivot = 0 ;//从返回值: 0
call intArrayQuickSort ( a, 0, -1);//left:0, pivot -1 :-1
no operation return
call intArrayQuickSort (a, 1, 1);//pivot + 1:1, right : 1
no operation return in main
result:a = [2, 1] //NG！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:07:10.273

实际上我已经找到了解决方案，但我不知道它为什么会起作用。第二个递归调用应该是：

```
intArrayQuickSort (a, pivot + 1, right); 
```

这对算法有意义，但我不明白为什么 rand() 会出现错误。有什么解释吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T07:37:05.467

我认为修改版

```
int distributePivot (int *a, int left, int pivot, int right) {
    int i, j;
    if (pivot != right)
        swapInt(&a[pivot], &a[right]);
    i = left;
    j = right - 1;
    while (1) {
        while (i < right && a[i] < a[right])
            i++;
        while (left <= j && a[j] >= a[right])
            j--;
        if (i < j)
            swapInt(&a[i], &a[j]);
        else
            break;
    }
    if(i < right)
        swapInt(&a[i], &a[right]);
    return i;
}
void intArrayQuickSort (int *a, int left, int right) {
    int pivot;
    if (left < right) {
        pivot = rand() % (right - left +1) + left ;
        pivot = distributePivot(a, left, pivot, right);
        intArrayQuickSort (a, left, pivot - 1);
        intArrayQuickSort (a, pivot + 1, right);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-09T13:13:22.330

```
pivot = rand() % (right - left +1) + left; 
```

应该：

```
pivot = left + rand() % (right - left +1); 
```

甚至可能：

```
pivot = left +1 + rand() % (right - left); 
```

# header - “系统需要 8 字节标头”是什么意思

> ID：10961312
> 
> 赞同：1
> 
> 时间：2012-06-09T13:11:32.653
> 
> 标签：header, system

我看到了这个 www.spec.org/cpu2006/Docs/481.wrf.html 它说

```
If your system requires 8-byte headers, please set  wrf_data_header_size = 8 
```

请你告诉我怎么知道的。提前致谢。

更多信息：我正在尝试使用 spec2006 wrf 程序，它是该程序的 2.1 版本。我无法运行该程序，尽管它使用 runspec 编译。错误是

```
At line 6744 of file module_ra_rrtm.fppized.f90 (unit = 10, file = 'RRTM_DATA') 
Fortran runtime error: End of file

*** Miscompare of rsl.out.0000, see /path/rsl.out.0000.mis
'rsl.out.0000' short
 Error: 1x481.wrf 
```

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:14:30.323

您只需添加`wrf_data_header_size = 8`用于构建/运行 WRF 基准测试的 SPEC CPU 配置文件。

请参阅`config/Example-linux64-amd64-gcc41.cfg`SPEC CPU2006 附带的示例配置文件。

# java - 在另一个缓冲图像上绘制缓冲图像

> ID：10961313
> 
> 赞同：3
> 
> 时间：2012-06-09T13:11:36.923
> 
> 标签：java, swing, bufferedimage, graphics2d

我的目标是将一些缓冲图像绘制到另一个上。然后所有这些东西都会绘制到其他一些缓冲图像上，依此类推。最后把它画在一个面板上。现在我正在尝试将缓冲图像绘制到面板上，但没有任何效果。我的缓冲图像看起来完全是白色的：

```
public class Main2 {
    public static void main(String[] args) {
        JFrame frame = new JFrame("asdf");
        final JPanel panel = (JPanel) frame.getContentPane();
        frame.setSize(500,500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        panel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                somepaint(panel);
            }
        });
    }

    private static void somepaint(JPanel panel) {
        BufferedImage image = new BufferedImage(200,200,BufferedImage.TYPE_INT_ARGB);
        image.getGraphics().setColor(Color.red);
        image.getGraphics().fillRect(0, 0, 200, 200);

        Graphics2D graphics = (Graphics2D) panel.getGraphics();
        graphics.setColor(Color.magenta);
        graphics.fillRect(0, 0, 500, 500);
        graphics.drawImage(image, null, 0, 0); // draws white square instead of red one
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T13:16:19.800

关于：

```
private static void somepaint(JPanel panel) {
    BufferedImage image = new BufferedImage(200,200,BufferedImage.TYPE_INT_ARGB);
    image.getGraphics().setColor(Color.red);
    image.getGraphics().fillRect(0, 0, 200, 200);

    Graphics2D graphics = (Graphics2D) panel.getGraphics(); 
```

这不是您在 JPanel 或 JComponent 内部绘制的方式。

不要调用`getGraphics()`组件，因为返回的 Graphics 对象将是短暂的，并且用它绘制的任何东西都不会持久。`paintComponent(Graphics G)`而是在其方法覆盖内进行 JPanel 的绘图。您将需要创建一个扩展 JPanel 的类以覆盖`paintComponent(...)`.

最重要的是，要了解如何正确地做 Swing 图形，不要猜测。您需要先阅读[Swing 图形教程](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)，因为它会要求您抛弃一些不正确的假设（我知道这是我必须做的才能让它正确）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T13:15:29.783

您需要在`drawImage()`调用中更正您的参数。改变这个：

```
graphics.drawImage(image, null, 0, 0); 
```

到

```
graphics.drawImage(image, 0, 0,null); 
```

查看[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)以获取更多详细信息。

# objective-c - 系统：job_mig_spawn() 找不到它的会话

> ID：10961314
> 
> 赞同：1
> 
> 时间：2012-06-09T13:11:55.263
> 
> 标签：objective-c, c, cocoa, unix, launchd

我想从特定用户的根进程启动可可应用程序。所以我正在更改我的应用程序的所有者和权限。

如果 s 权限组设置了用户位（对应于 u+s），那么无论何时任何人执行该程序，该进程都会获得拥有它的人的权限。

```
sudo chown -R test myApp
sudo chmod u+s /Contents/MacOS/myApp
system([@"open myApp" UTF8String]);  //inside root process
//-rwsr-xr-x  1 test  myApp 
```

错误：

```
com.apple.launchd[1]: System: Bug: launchd_core_logic.c:8760 (24498):0
com.apple.launchd[1]: System: job_mig_spawn() can't find its session!
open[24459]: spawn_via_launchd() failed, errno=5 label=[0x0-0x274274].
rootProcess[23127]: LSOpenURLsWithRole() failed with error -10810 for the file /Applications/myApp.app/. 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:39:46.210

您应该阅读所有[Technical Note TN2083: Daemons and Agents](https://developer.apple.com/library/mac/#technotes/tn2083/_index.html)，但特别是它说：

> 我们在 [Apple Developer Technical Support] 中遇到的一个常见问题是“如何从我的守护进程启动 GUI 应用程序？” 答案是你不能。

# c# - 刷新类绑定表数据monotouch

> ID：10961319
> 
> 赞同：1
> 
> 时间：2012-06-09T13:12:25.760
> 
> 标签：c#, iphone, uitableview, xamarin.ios, monodevelop

在我的 MonoDevelop 项目中，我有一个 iPhone 应用程序。我有两种不同的看法。每个视图都包含一个 UITable。对于视图 1，我将类 1 作为数据源 1 连接到 UITableViewController。该类在 UITableViewController 类属性的 Interface Builder 中指定。

对于视图 2，我将类 2 连接为数据源 2。还连接到 UITableViewController 类属性的界面构建器中。两个类（即数据源）都为表格提供数据。View 2 也有一个自定义单元格，因此加载是异步的。

我使用 linq to xml 从 2 个 xml 文件中获取数据。一切正常，数据加载良好。我需要知道的是根据视图 1 中所做的选择在数据源 2 中加载数据。为此，我需要将视图 1 中的 ID 传递给类（数据源）2。这很好用，并且所选的数据ID 加载。问题是当我点击导航控制器并在第一个屏幕上更改我的选择 (ID) 时，显示的数据完全相同，这告诉我 UITable 不会用新选择刷新。

加载回合（ID）的数据源代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using System.Data;

namespace CurrieCup2012
{
    [MonoTouch.Foundation.Register("FixturesTableViewController")]

    public partial class MyTableViewController : UITableViewController
    {
        static NSString CellID = new NSString ("MyIdentifier");
        List<Fixtures> Fixtures;

        // Constructor invoked from the NIB loader
        public MyTableViewController (IntPtr p) : base (p)
        {

        }

        // The data source for our TableView
        class DataSource : UITableViewDataSource
        {
            MyTableViewController tvc;

            public DataSource (MyTableViewController tableViewController)
            {
                this.tvc = tableViewController;
            }

            public override int RowsInSection (UITableView tableView, int section)
            {
                return tvc.Fixtures.Count;
            }

            public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
            {
                var cell = tableView.DequeueReusableCell (CellID);
                if (cell == null)
                {
                    cell = new UITableViewCell (UITableViewCellStyle.Default, CellID);
                }

                // Customize the cell here...

                Fixtures fixtures = tvc.Fixtures.ElementAt(indexPath.Row);
                cell.TextLabel.Text = fixtures.RoundID;

                cell.Accessory = UITableViewCellAccessory.DisclosureIndicator;

                return cell;
            }
        }

        // This class receives notifications that happen on the UITableView
        class TableDelegate : UITableViewDelegate
        {
            MyTableViewController tvc;

            public TableDelegate (MyTableViewController tableViewController)
            {
                this.tvc = tableViewController;
            }

            DetailFixturesViewer detailsViewController;
            //SelectedRound round = new SelectedRound();

            public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
            {
                if (detailsViewController == null)
                detailsViewController = new DetailFixturesViewer();

                Fixtures fixtures = tvc.Fixtures.ElementAt(indexPath.Row);
                //Console.WriteLine(fixtures.RoundID);
                detailsViewController.CurrentFixtures = fixtures;
                IntPtr vd;
                MyTableViewController2 mtv = new MyTableViewController2(vd);
                mtv.round = fixtures.RoundID;

            //  round.RoundID =  tvc.Fixtures.ElementAt(indexPath.Row).RoundID;

            //  Console.WriteLine("Set Selected round on row selected: " + round.RoundID);

                //SelectedRound selround = new SelectedRound();
                //selround.RoundID = fixtures.RoundID;

                SelectedRound.RoundID = fixtures.RoundID;

                //Console.WriteLine(round.RoundID);
                //Console.WriteLine(indexPath.Row.ToString());
                //Console.WriteLine(newsArticle.Headline.ToString());
                //Console.WriteLine(newsArticle.Link.ToString());
                tvc.NavigationController.PushViewController(detailsViewController, true);
                tvc.NavigationController.ViewWillAppear(true);
                detailsViewController.CurrentFixtures.RoundID = fixtures.RoundID;
                detailsViewController.CurrentFixtures.Date = fixtures.Date;
                detailsViewController.Title = fixtures.RoundID;
            }
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
            //Console.WriteLine("Linq");
            XDocument rss =
            XDocument.Load("http://curriecup.dutch-vegas.com/XML/rounds.xml");

            var query = from item in rss.Descendants("Round")
                select new Fixtures 
                       {
                            RoundID = "Round " + (string) item.Element("roundid"),
                            Date = (string) item.Element("date")
                            /*GameID = (string) item.Element("gameid"),
                            Team1 = (string) item.Element("team1"),
                            Team2 = (string) item.Element("team2"),
                            Team1Image = (string) item.Element("team1image"),
                            Team2Image = (string) item.Element("team2image"),
                            Date = (string) item.Element("date"),
                            Location = (string) item.Element("location")*/
                       };

            Fixtures = query.Distinct().ToList();

            TableView.Delegate = new TableDelegate (this);
            TableView.DataSource = new DataSource (this);
            Title = "Rounds";

        }
    }
} 
```

根据从数据源 1 中选择的轮次 (ID) 加载详细数据的数据源：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using System.Data;
using System.IO;

namespace CurrieCup2012
{
    [MonoTouch.Foundation.Register("DetailFixturesTableViewController")]

    public partial class MyTableViewController2 : UITableViewController
    {
        static NSString CellID2 = new NSString ("MyIdentifier2");
        List<DetailFixtures> DetailFixtures;

        public string round{ get; set; }

        // Constructor invoked from the NIB loader
        public MyTableViewController2 (IntPtr p) : base (p)
        {

        }

        // The data source for our TableView
        class DataSource : UITableViewDataSource
        {

            MyTableViewController2 tvc;

            public DataSource (MyTableViewController2 tableViewController)
            {

                this.tvc = tableViewController;
            }

            public override int RowsInSection (UITableView tableView, int section)
            {
                return tvc.DetailFixtures.Count;
            }

            public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
            {
                Dictionary<int,FixturesCell> _cellControllers = new Dictionary<int, FixturesCell>();
                var cell2 = tableView.DequeueReusableCell (CellID2);
                FixturesCell fixtureCell = null;
                DetailFixtures detailfixtures = tvc.DetailFixtures.ElementAt(indexPath.Row);

                if (cell2 == null)
                {
                    //cell2 = new UITableViewCell (UITableViewCellStyle.Default, CellID2);
                    fixtureCell = new FixturesCell();
                    cell2 = fixtureCell.Cell;
                    cell2.Tag = Environment.TickCount;
                    _cellControllers[cell2.Tag] = fixtureCell;
                }
                else
                {
                    fixtureCell = _cellControllers[cell2.Tag];
                }

                // Customize the cell here...

                fixtureCell.Team1 = detailfixtures.Team1;
                fixtureCell.Team2 = detailfixtures.Team2;
                fixtureCell.Location = detailfixtures.Location;
                fixtureCell.Date = detailfixtures.Date;

                if(!string.IsNullOrEmpty(detailfixtures.Team1Image))
                {
                    if(File.Exists("Images/"+detailfixtures.Team1Image))
                    {
                        fixtureCell.Team1Image = UIImage.FromFile("Images/"+detailfixtures.Team1Image); 
                    }
                }

                if(!string.IsNullOrEmpty(detailfixtures.Team2Image))
                {
                    if(File.Exists("Images/"+detailfixtures.Team2Image))
                    {
                        fixtureCell.Team2Image = UIImage.FromFile("Images/"+detailfixtures.Team2Image); 
                    }
                }

                /*DetailFixtures detailfixtures = tvc.DetailFixtures.ElementAt(indexPath.Row);
                cell2.TextLabel.Text = detailfixtures.Team1;

                //cell.Accessory = UITableViewCellAccessory.DetailDisclosureButton;*/

                return cell2;
            }
        }

        // This class receives notifications that happen on the UITableView
        class TableDelegate : UITableViewDelegate
        {
            MyTableViewController2 tvc;

            public TableDelegate (MyTableViewController2 tableViewController)
            {
                this.tvc = tableViewController;
            }

            public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
            {
                /*if (detailsViewController == null)
                detailsViewController = new DetailFixturesViewer();

                DetailFixtures detailFoxtures = tvc.DetailFixtures.ElementAt(indexPath.Row);
                detailsViewController.CurrentFixtures = fixtures;
                //Console.WriteLine(indexPath.Row.ToString());
                //Console.WriteLine(newsArticle.Headline.ToString());
                //Console.WriteLine(newsArticle.Link.ToString());
                tvc.NavigationController.PushViewController(detailsViewController, true);
                tvc.NavigationController.ViewWillAppear(true);*/
            }
        }

        public override void ViewDidLoad ()
        {
            //SelectedRound selround = new SelectedRound();

            string selectedRound = SelectedRound.RoundID.Replace("Round ", "");
            Console.WriteLine("read selected Round viewdidload table class: " + selectedRound);

            base.ViewDidLoad ();

            XDocument rss =
            XDocument.Load("http://curriecup.dutch-vegas.com/XML/fixtures.xml");

            var query = from item in rss.Descendants("Game") where (string) item.Element("roundid") == selectedRound
                select new DetailFixtures 
                       {
                            //RoundID = "Round " + (string) item.Element("roundid")
                            GameID = (string) item.Element("gameid"),
                            Team1 = (string) item.Element("team1"),
                            Team2 = (string) item.Element("team2"),
                            Team1Image = (string) item.Element("team1image"),
                            Team2Image = (string) item.Element("team2image"),
                            Date = (string) item.Element("date"),
                            Location = (string) item.Element("location")
                       };
            //Console.WriteLine("test");
            DetailFixtures = query.Distinct().ToList();
            TableView.Delegate = new TableDelegate (this);
            TableView.DataSource = new DataSource (this);
            //Title = "Fixtures";
            Console.WriteLine("Reload");
        }
    }
} 
```

我曾尝试在表上调用 ReloadData() 方法，但无济于事。我是单声道触摸的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:51:17.547

最简单的尝试是每次都创建 View2 的新实例，而不是尝试重用现有实例。

重用 View2 并没有错，只是需要更多的调试才能准确找出问题所在。

# c# - 调用 LINQ 方法后调用实例方法的简洁语法

> ID：10961328
> 
> 赞同：1
> 
> 时间：2012-06-09T13:13:18.927
> 
> 标签：c#, linq, extension-methods

我有一个类型，它包含一个`IEnumerable<T>`并包含一些额外的逻辑，实现了一个我们将调用的接口`IMyIterable<T>`。一方面，我希望人们使用 LINQ 方法来过滤和处理（通过将它们实际应用到*底层*`IMyIterable<T>`对象），但另一方面，我仍然希望在已应用 LINQ 方法。例如`IMyIterable<T>`

 *```
var query = myIterable.Select(x => x.whatever);
//query is now of a completely different type than IMyIterable<T>
var result = query.MyCustomThingy(); 
//But I really want MyCustomThingy to work too. 
```

我知道一个解决方案是：

```
var query = myIterable.Linq(x => x.Select(y => y.Whatever)); 
```

但是额外的括号对我来说不合适。我还有其他方法可以做到这一点吗？我实际上并没有要求`Select()`返回自定义类的方法（尽管如果有巧妙的方法可以做到这一点，例如涉及代码生成，我肯定会加入），只是一些更简洁的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:44:22.453

LINQ 不绑定到 IEnumerable。您可以在 IMyIterable 本身上实现所需的 LINQ 方法（作为实例方法或作为扩展方法）。这样，您甚至可以直接在 IMyIterable 类型的变量上使用 linq 语法。

例如：

```
public interface IMyIterable<T>
{
    IMyIterable<TOut> Select<TOut>(Func<T, TOut> selector);
    IMyIterable<T> Where(Func<T, bool> predicate);
    // ...
} 
```

这将允许您编写如下内容：

```
 IMyIterable<T> source = ...;

 var query = from item in source 
             where item.X == Y
             select new {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:25:06.940

您能否将 IMyIterable 上的方法实现为 IEnumerable 的扩展方法？不知道这个接口到底做了什么，很难想出一个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:33:01.070

您可以在 IMyIterable 上创建一堆等效方法（返回 IMyIterable）并将它们转发到内部 IEnumerable 实例，而不是从 IEnumerable 派生。

然而，围绕一个演员阵容似乎需要做很多工作。我猜您建议的 .Linq() 解决方案可以正常工作。*

# jquery - 用户名可用性有效，但在不可用的情况下仍会提交表单

> ID：10961332
> 
> 赞同：0
> 
> 时间：2012-06-09T13:13:56.490
> 
> 标签：jquery

我有表格来检查用户名可用性只有在用户名可用时表单才应该提交数据，但在这两种情况下表单提交数据都是代码。

```
<script type="text/javascript">
$(document).ready(function () //When the dom is ready 
{
  $("#username").change(function () { //if theres a change in the username textbox
    var username = $("#username").val(); //Get the value in the username textbox
    if (username.length > 3) //if the lenght greater than 3 characters
    {
      $("#availability_status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');
      //Add a loading image in the span id="availability_status"
      $.ajax({ //Make the Ajax Request
        type: "POST",
        url: "http://localhost/Testtt/wp-content/plugins/Realestate Redirection/check_realitycode_availablity.php",
        //file name
        data: "username=" + username,
        //data
        success: function (server_response) {

          $("#availability_status").ajaxComplete(function (event, request) {

            if (server_response == '0') //if ajax_check_username.php return value "0"
            {
              $("#availability_status").html('<img src="available.png" align="absmiddle"> <font color="Green"> Available </font>  ');
              //add this image to the span with id "availability_status"
            } else if (server_response == '1') //if it returns "1"
            {
              $("#availability_status").html('<img src="not_available.png" align="absmiddle"> <font color="red">Not Available </font>');

            }

          });
        }

      });

    } else {

      $("#availability_status").html('<font color="#cc0000">Username too short</font>');
      //if in case the username is less than or equal 3 characters only 
    }

    return false;
  });

});
</script> 
```

这是用于检查可用性的 JQuery。

这是我的表格

```
<form action="<?php echo str_replace( '%7E', '~', $_SERVER['REQUEST_URI']); ?>" name="reality" method="post" id="reality_form" >
            <input type="hidden" name="reality_hidden" value="Y">  
            Website Url:<input type="text" name="website_url" value="" />
            Listing Code: <input type="text" name="rlt_code" id="username" /><span id="availability_status"></span>
            <input type="submit" name="submit" value="submit" id="submit" />
</form> 
```

我试图从过去几个小时中找到解决方案，但没有结果。请告诉我需要在代码中添加什么`if(server_response == '1')`以防止在这种情况下提交表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:24:19.097

`<form>`好吧，您最初可以做一些事情，比如用一个类来标记：

```
<form class='no-submit' action="<?php echo str_replace( '%7E', '~', $_SERVER['REQUEST_URI']); ?>" name="reality" method="post" id="reality_form" > 
```

然后您的“更改”处理程序将在成功时清除它：

```
$("#username").change(function () {
  $('#reality_form').addClass('no-submit');
  // ...
  if (server_response == '0')
    $('#reality_form').removeClass('no-submit'); 
```

然后，为表单添加一个“提交”处理程序：

```
$('#reality_form').submit() {
  if ($(this).hasClass('no-submit'))
    return false;
}); 
```

无论如何，您都必须检查用户名在服务器上是否可用，因为您不能 100% 确定在提交表单时 AJAX 检查是否已经完成。

# multithreading - TerminateThread 到我创建的所有线程，但程序仍然不会关闭？

> ID：10961333
> 
> 赞同：0
> 
> 时间：2012-06-09T13:13:59.270
> 
> 标签：multithreading, visual-c++

我关闭了所有线程，对话框消失了，但它仍在运行……我可以将其视为仍在运行的进程。所以我必须杀死这个过程。

`exit(0)`可能不是关闭应用程序的最佳方式。还有其他方法吗，或者这是最好的方法？谢谢

* * *

下面的代码帮助了调试器，否则它会崩溃 OnClose。

```
void CServerDlg::OnClose() 
{
    TerminateThread(this->hThread_TcpIp, 0);
    TerminateThread(this->hThread_ReadData, 0);
    TerminateThread(this->hThread_ReadSetup, 0);

    //exit(0); //<-- not good to use
    CDialog::OnClose();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:45:23.373

**没有：**

您永远不应该使用 exit() 来终止 Windows 应用程序。

您不应该直接调用消息处理程序，因为大多数消息（包括 WM_CLOSE）是系统在执行某些步骤后发出的。

根据 MSDN，您永远不应该使用 TerminateThread：

***TerminateThread 是一个危险的函数，只能在最极端的情况下使用。***

你不应该在没有终止所有线程的情况下关闭应用程序，因为每个线程都必须执行一些清理。例如可用内存和 Windows 句柄。这不是一个好的编程习惯，因为终止进程可能会释放内存，但很可能不会释放所有 Windows 资源（用户和系统）。

**你应该做什么：**

如果您正在使用工作线程，请使用同步机制来终止线程。为此，我建议使用事件对象。您只能将 PostQuitMessage 用于具有消息队列的线程，通常是 GUI 线程。

请求线程终止后，您应该使用 WaitForMultipleObjects 函数，线程终止后，终止主线程。

如果您的对话框是模态主应用程序窗口，请调用 EndDialog。对话终止后，您应该从应用程序 InitInstance 返回 FALSE。

如果您的对话框不是模态对话框，则在终止线程后，您应该调用 DestroyWindow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:24:58.657

如果 CCatsServerDlg 是应用程序的主对话框，只需调用 OnOK() 或 OnCancel() 即可终止应用程序。无需终止每个线程。当进程退出时，它们将自动终止。

您也可以尝试*PostQuitMessage*。

# resize - Raphael - 如何使纸张大小适合浏览器的窗口大小？

> ID：10961338
> 
> 赞同：0
> 
> 时间：2012-06-09T13:14:41.697
> 
> 标签：resize, window, raphael, fullscreen, scaling

我想更改 Raphael 的纸张（对象基础）大小以适应窗口大小调整。[使用 Firefox_13.0、Raphael_2.1.0、WindowsXP]

如果可用，我想适合全屏模式。

====================================================

（脚步）

我创建了论文：paper = Raphael(0, 50, 800, 600); // 初始宽度和高度分别为 800 和 600。

我把物品放在纸上。

浏览器的窗口大小由 windowW = window.innerWidth 和 winnowH = window.innerHeight （在 Firefox 上）检查。

缩放值由 sv = windowW/800 计算；

并通过 paper.scale(sv, sv); 缩放纸张

====================================================

（剧本）

window.onload = 函数（）{

```
paper = Raphael(0, 50, 800, 600);   
var background = paper.rect(0, 0, 800, 600).attr({fill:'#669999'});

// placing the objects
var circle = ...;
var rect = ...;
var ellipse = ...;

winowW = window.innerWidth;
winowH = window.innerHeight;
sv = winowW/800.

paper.scale(sv, sv); 
```

}

====================================================

（结果）

虽然 circle.scale(sv)、rect.scale(sv, sv) 和 ellipse.scale(sv, sv) 有效，但 paper.scale(sv, sv) 和 background.scale(sv, sv) 无效。

为什么会发生这种情况？我可以通过 window.onresize = function() {...} 实时获取窗口大小。如果有更好的方法，请告诉我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:07:44.883

我通过以下两点成功：

1）“纸”本身不是操纵对象。我认为我们应该将其视为广告牌。

2）使用 st = paper.set() 并将对象（圆形，矩形，...）放入其中。并使用 st.scale(sv, sv, 0, 0);

***第三个和第四个参数(0, 0) 很无能。

（警告）

串行调整大小操作不适用于函数“scale()”。因为每个调整大小的系数都堆积成一个数字的幂。因此，当一个人做了 5 次 1.1 次调整大小操作时，比例将为 1.1^5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T07:28:22.153

使用 setViewBox()

它应该做的工作 [http://raphaeljs.com/reference.html#Paper.setViewBox](http://raphaeljs.com/reference.html#Paper.setViewBox)

# c# - 通过多个参数过滤 ac# 集合，其中一些参数可能为空

> ID：10961339
> 
> 赞同：1
> 
> 时间：2012-06-09T13:14:51.353
> 
> 标签：c#, linq, linq-to-objects

如果这是一个重复的问题，我很抱歉，我找到了一些类似的问题，但没有一个可以解决我的问题。我有一组具有各种参数的对象，我想使用来自 ComboBoxes 和 TextBoxes 的数据过滤它们。

```
 var query = from zaj in zajezdy
                    where zaj.Zeme == (String)zemeCombo.SelectedValue
                    && zaj.Oblast == (String)oblastCombo.SelectedValue
                    && zaj.Stredisko == (String)strediskoCombo.SelectedValue
                    && zaj.Doprava.Contains((String)dopravaCombo.SelectedValue)
                    && zaj.Strava.Contains((String)stravaCombo.SelectedValue)
                    && zaj.CenaOd > Int32.Parse(cenaOdText.Text)
                    && zaj.CenaOd < Int32.Parse(cenaDoText.Text)
                    select zaj; 
```

如果正确选择了所有组合，则此代码有效。但是，如果用户留下一些未选择/空的，则查询返回时包含零个对象。如何检测哪些参数为空，以便查询忽略它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:19:47.383

我认为这是[规范](http://martinfowler.com/apsupp/spec.pdf)使用的一个很好的例子。

创建对象，它将代表`zajezd`规范：

```
public interface ISpecification<T>
{
    bool IsSatisfiedBy(T value);
}

public class ZajezdSpecification : ISpecification<Zajezd>
{
    private string _zeme;
    private string _oblast;
    private string _stredisko;
    private string _doprava;
    private string _strava;
    private int _cenaOd;
    private int _cenaDo;

    public ZajezdSpecification(string zeme, string oblast, string stredisko, 
        string doprava, string strava, int cenaOd, int cenaDo)
    {
        _zeme = zeme;
        _oblast = oblast;
        _stredisko = stredisko;
        _doprava = doprava;
        _strava = strava;
        _cenaOd = cenaOd;
        _cenaDo = cenaDo;
    }

    public bool IsSatisfiedBy(Zajezd zajezd)
    {
        if (!String.IsNullOrEmpty(_zeme) && zajezd.Zeme != _zeme)
            return false;

        if (!String.IsNullOrEmpty(_oblast) && zajezd.Oblast != _oblast)
            return false;

        // ... verify anything you want

        return _cenaOd < zajezd.CenaOd && zajezd.CenaOd < _cenaDo;
    }
} 
```

并使用 UI 中的值对其进行初始化：

```
ZajezdSpecification spec = new ZajezdSpecification(
   (string)zemeCombo.SelectedValue,
   (string)oblastCombo.SelectedValue,
   (string)strediskoCombo.SelectedValue,
   ...
   Int32.Parse(cenaDoText.Text)
); 
```

使用此规范过滤您的集合：

```
var query = from zaj in zajezdy
            where spec.IsSatisfiedBy(zaj)
            select zaj; 
```

PS 尝试在您的代码中使用英文名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:21:08.263

首先，尝试为每个 combo\text 引入单独的变量并使用它。使用 String.IsNullOrEmpty 检查字符串。还要尽量避免 Type.Parse() - 改用 Type.TryParse()。样本 ：

```
 var query = from c in dc.Customers select c;
 //filter the result set based on user inputs
 if ( !string.IsNullOrEmpty( countryFilter ) )
   query = query.Where ( c=>c.Country == countryFilter );
 if ( !string.IsNullOrEmpty( cityFilter ) )
   query = query.Where ( c=>c.City == cityFilter ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T16:51:11.707

您也可以像这样过滤它们，具体取决于参数是否`name`返回`null`所有项目，否则仅返回具有指定的元素`name`：

```
myList.Where(x => name == null || x.Name == name)
      .Where(x => id == null || x.Id == id); 
```

# c# - 定时器在C#中连续触发，无法停止

> ID：10961341
> 
> 赞同：0
> 
> 时间：2012-06-09T13:15:04.620
> 
> 标签：c#, .net, timer

任何人都可以帮助我在 Windows 窗体 C3 应用程序中停止我的计时器吗？我使用设计器在表单中添加了计时器，间隔设置为 1000；我想在按钮单击后等待 5 秒后执行一些操作。请检查代码并告诉我。现在的问题是我无限地得到 MessageBox2 并且永远不会让计时器停止。

```
static int count;

public Form1()
        {
            InitializeComponent(); 
            timer1.Tick += timer1_Tick;
        }
public void button1_Click(object sender, EventArgs e)
        {

        timer1.Enabled = true;

        while(count>5)
         {
          ....dosome actions...
         }

        }
private void timer1_Tick(object sender, EventArgs e)
        {
            count1++;
           MessageBox.Show("Messagebox2");
           if (count1 == 5)
           {
               //timer1.Enabled = false; timer1.Stop(); 
               ((System.Timers.Timer)sender).Enabled = false;
               MessageBox.Show("stopping timer");
           }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:18:39.970

我会渲染`count`无用的，只使用该`timer 1 interval`属性并将您的操作放入`timer1_Tick`事件中。

```
 public void button1_Click(object sender, EventArgs e)
    {
          timer1.Interval = 5000;
          timer1.Enabled = true;
    }

   private void timer1_Tick(object sender, EventArgs e)
   {
        timer1.Enabled = false;  
        MessageBox.Show("stopping timer");
        // Your other actions here
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:51:32.870

你用哪个定时器？因为 C# 支持来自两个不同命名空间的类 Timer。一个来自 Forms，另一个来自 System.Timers。我建议您使用另一个 - System.Timers.Timer。

```
 Timer t = new Timer(20000); // created with 20seconds
            t.Enabled = true; // enables firing Elapsed event
            t.Elapsed += (s, e) => {
                \\do stuff
            };

            t.Start(); 
```

在这个简短的代码中，您可以看到如何创建和启用计时器。通过注册 Elapsed 事件，您可以明确说明时间过去后要做什么。这仅完成一次。当然，如果用户在达到限制之前单击按钮，则需要进行一些更改。但这在很大程度上取决于您要求的操作的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:19:14.910

您正在递增`count1`和检查`count`.

```
while(count1 > 5)
{
    ...dosome actions...
} 
```

# c# - 检查2表中是否有重叠

> ID：10961344
> 
> 赞同：0
> 
> 时间：2012-06-09T13:15:24.713
> 
> 标签：c#, asp.net, sql, sql-server

我有 2 张桌子，StudentRegsitre 和 Agenda，

议程表有 (AgendaId, MatirelId, InstructorId, ClassId, addedDate, Semester, StartTime, EndTime, DaySchedule) StudentRegsitre (Id, AgendaId, UserId)

需要通过从 ASP.NET C# 传递 studentId 检查 StartTime 、 EndTime、 DaySchedule 、 classid 来检查 studentRegsitre 中是否存在重叠
我试试这个：

```
GO
 Create procedure [dbo].[SP_OverLappingExists] (@AgendaId uniqueidentifier ,@UserId uniqueidentifier  )
 As Begin 
 Declare @CurrentAgendaId uniqueidentifier;
 declare @MatirelId uniqueidentifier;
 declare @InstructorId  uniqueidentifier;
 declare @ClassId  uniqueidentifier;
 declare @Semester nchar(10);
 declare @StartTime time(7);
 declare @EndTime time (7);
 declare @DaySchedule varchar(50);
 declare @UserIdNew uniqueidentifier;
 declare @AgendaIdNew uniqueidentifier;

        if exists (SELECT @CurrentAgendaId = Agenda.AgendaId,@MatirelId= Agenda.MatirelId,
              @InstructorId= Agenda.InstructorId,@ClassId= Agenda.ClassId,@Semester= Agenda.Semester,
              @StartTime= Agenda.StartTime,@EndTime= Agenda.EndTime,@DaySchedule= Agenda.DaySchedule, 
                         @UserIdNew= StudentReg.UserId, @AgendaIdNew= StudentReg.AgendaId 
    FROM         Agenda INNER JOIN
                          StudentReg ON Agenda.AgendaId = StudentReg.AgendaId
                           where StudentReg.UserId = @UserId
      )
      begin
      return 1 
      end 
```

但它在@currentAgendaId = Agenda.AgendaId 附近出现错误“'=' 附近的语法不正确”有什么帮助，如果有更好的想法，请与我分享。！

ps：是Study case。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:33:49.217

`EXISTS`查询不返回任何列，因此您不能将列值分配给变量。

这是使用星号指定所有列不会影响性能的一种情况。常见的用法是：

```
if exists ( select * from ... ) 
```

这相当于：

```
if exists ( select 42 from ... ) 
```

# c# - 非常简单的 C# 程序生成一个 `NullReferenceException was unhandled` 错误

> ID：10961348
> 
> 赞同：1
> 
> 时间：2012-06-09T13:15:35.760
> 
> 标签：c#, winforms, configuration, datagridview

我有一个简单的 WinForm，我用它来帮助我处理 ADO.NET。它有一个数据网格视图

我在名为的项目中添加了一个紧凑的 sql server 数据库`experiment.sdf`

在 App.config 文件中，我添加了以下内容。我使用以前的项目应用程序文件作为基础，所以这里可能有错误？：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
</configSections>
<connectionStrings>
  <add name="DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg"
      connectionString="Data Source=|DataDirectory|\experiment.sdf"
      providerName="Microsoft.SqlServerCe.Client.3.5" />
</connectionStrings>
</configuration> 
```

我添加了对配置库的引用。

表单后面是以下代码：

```
 SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DatabaseDGVexperimentsConnStg"].ConnectionString); 
```

当它到达这条线时，`SqlConnection conn = ...`我得到一个错误`NullReferenceException was unhandled`。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T13:18:40.170

改变这个：

```
name="DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg" 
```

到：

```
name="DatabaseDGVexperimentsConnStg" 
```

或改变这个：

```
ConfigurationManager.ConnectionStrings["DatabaseDGVexperimentsConnStg"] 
```

到：

```
ConfigurationManager.ConnectionStrings["DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:19:10.077

```
ConfigurationManager.ConnectionStrings["DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg"].ConnectionString 
```

请注意，您需要将名称命名为

`DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg`

不像

`DatabaseDGVexperimentsConnStg`

## 编辑：

您需要使用`SqlCeConnection`和`SqlCeDataAdapter`使用 SqlServerCe 数据库，添加引用`System.Data.SqlServerCe`，然后代码应如下所示。

```
using (var conn = new SqlCeConnection(ConfigurationManager.ConnectionStrings["DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg"].ConnectionString))
{
    conn.Open();
    using (var myAdapt = new SqlCeDataAdapter("SELECT * FROM experiment.dbo.helloworld", conn))
    {
        DataSet mySet = new DataSet();
        myAdapt.Fill(mySet, "AvailableValues");
        DataTable myTable = mySet.Tables["AvailableValues"];
        this.uxExperimentDGV.DataSource = myTable;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:19:18.627

您在代码中使用了与 web.config 不同的键值。字符串需要完全匹配。

# javascript - Google Marker 上的缩放设置

> ID：10961351
> 
> 赞同：0
> 
> 时间：2012-06-09T13:16:01.047
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我想知道是否有人可以帮助我。

我正在使用[此](http://www.mapmyfinds.co.uk/development/index.php)页面来允许用户查看保存在 MySQL 数据库中的标记并对新的标记位置进行地理编码/反向地理编码。

我能够正确地将地图放在从数据库加载的标记上，但我遇到的问题是地图放大到它的最大设置，而我希望能够手动设置它。

我尝试在我的脚本中添加另一个缩放控件：

```
// add marker
var bounds = new google.maps.LatLngBounds(); 
var loc = new google.maps.LatLng(las[i],lgs[i]);
var marker = new google.maps.Marker({
position: loc, 
map: window.map,
zoom: 8,
title: nms[i]
});
bounds.extend(loc);
map.fitBounds(bounds); 
```

不幸的是，这没有影响。我很感激对某些人来说这可能是一个非常小的修复，但我已经研究了一段时间，但我似乎无法找到解决方案。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了？

**发布更新**

我已经使用现有代码和@Andrew Leach 建议的解决方案制定了解决方案。工作解决方案是：

```
// add marker
var bounds = new google.maps.LatLngBounds(); 

var loc = new google.maps.LatLng(las[i],lgs[i]);
var marker = new google.maps.Marker({
position: loc, 
map: window.map,            
title: nms[i]
});
bounds.extend(loc);
map.fitBounds(bounds);
map.setZoom(16); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:35:25.250

删除对`bounds`.

您向地图添加一个标记，并创建一个*仅*`LatLngBounds`包含该*单*点的对象。然后，您要求地图放大以使边界适合地图的视口。将单个位置拟合到视口中将始终尽可能放大，即使这样，单个点也永远无法填满整个视口。

 **但是，添加`zoom`到标记选项也不起作用，因为`zoom`它不是一个有效的选项。[文档](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

相反，请在设置地图时使用`map.setZoom(8)`或通过在**地图**`zoom`选项中包含该选项来明确设置地图的缩放比例。**

# c++ - 无法比较字符串中的空间

> ID：10961355
> 
> 赞同：2
> 
> 时间：2012-06-09T13:16:22.617
> 
> 标签：c++, string, atoi

我正在制作一个从用户那里获取输入的程序，而每个输入都包含用空格分隔的整数。例如“2 3 4 5”。

我很好地实现了 atoi 函数，但是，每当我尝试在字符串上运行并在空格上“跳过”时，都会出现运行时错误：

```
for(int i=0, num=INIT; i<4; i++)
    {
        if(input[i]==' ')
            continue;

        string tmp;
        for(int j=i; input[j]!=' '; j++)
        {
            //add every char to the temp string
            tmp+=input[j];

            //means we are at the end of the number. convert to int
            if(input[i+1]==' ' || input[i+1]==NULL)
            {
                num=m_atoi(tmp);
                i=j;
            }
        }
    } 
```

在 'if(input[i+1]==' '.....' 行中，我得到了一个例外。基本上，我试图只插入“2 2 2 2”。我意识到，每当我尝试比较字符串中的真实空格和''，引发异常。

我试图与空间的 ASCII 值 32 进行比较，但也失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:23:45.253

问题是您没有在主循环中检查字符串的结尾：

```
for(int j=i; input[j]!=' '; j++) 
```

应该：

```
for(int j=i; input[j]!=0 && input[j]!=' '; j++) 
```

另外，不要`NULL`用于 NUL 字符。您应该使用`'\0'`或简单地使用`0`. 该宏`NULL`应仅用于指针。

也就是说，在您的情况下，使用`strtol`or`istringstream`或类似的东西可能更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T18:01:10.173

### 不是问题的答案。

但有两个大的评论。

您应该注意 C++ 流库会自动从空格分隔的流中读取和解码 int：

```
int main()
{
    int value;
    std::cin >> value; // Reads and ignores space then stores the next int into `value`
} 
```

因此，要读取多个整数，只需将其放入循环中：

```
 while(std::cin >> value)   // Loop will break if user hits ctrl-D or ctrl-Z
   {                          // Or a normal file is piped to the stdin and it is finished.
        // Use value
   } 
```

读取单行。包含空格分隔的值只需将行读入字符串（将其转换为流然后读取值。

```
 std::string line;
   std::getline(std::cin, line);            // Read a line into a string
   std::stringstream linestream(line);      // Convert string into a stream

   int value;
   while(linestream >> value)               // Loop as above.
   {
        // Use Value
   } 
```

# qt - 在 QTextEdit 子类中连接信号和插槽？

> ID：10961361
> 
> 赞同：2
> 
> 时间：2012-06-09T13:16:37.927
> 
> 标签：qt, signals, qtextedit, slot

我从 QTextEdit 派生了一个类并将其用作“日志”。我为它配备了一个插槽来接收日志消息。

```
class CLogbook : public QTextEdit
{
   Q_OBJECT;
    public:
    void log(QString msg) {append(msg)};

    public slots:
    void recvLogSignal(const QString message)
    {    
         append("hallo");
         std::cout << "signal received.\n";    
         log(message);
    } 
```

};

然后另一个类发出这样的信号：

```
// in the header
signals:
    void logMessage(const QString);

// in the implementation
    emit logMessage("qt is cute");
    std::cout << "if you can read this the logMessage was emitted\n"; 
```

我也将信号连接到插槽

```
connect(tableeditor, SIGNAL(logMessage(const QString)), logbook, SLOT(recvLogSignal(const QString))); 
```

但是，该消息从未显示在“日志”中。我在这里想念什么？

已解决：发出信号后调用连接方法:-(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T18:07:05.270

如果没有完整的示例，很难确切地看出您的实现有什么问题。有时，如果一个对象没有在堆上初始化，超出范围，信号或槽就会失败。

它可能失败的另一种方式是，如果您的 QApplication 尚未到达 exec() 调用。

我没有尝试过在信号和槽调用中使用 const，而且我之前在任何示例中都没有看到它，所以这可能会导致问题；但在下面的示例中似乎工作正常。

## 带有 QTextEdit 派生类的工作示例

![示例截图](../Images/d5adbc2a79e1157e8dab5a843978ef3a.png)

这是我放在一起的一个简单示例，它使用按钮和行编辑进行一些基本的日志记录。

这是标题：

```
#ifndef WIDGET_H
#define WIDGET_H

#include <QtGui/QWidget>
//#include <QTextEdit>
#include "clogbook.h"
#include <QLineEdit>

class Widget : public QWidget
{
    Q_OBJECT

public:
    Widget(QWidget *parent = 0);
    ~Widget() {}
public slots:
    void on_pushButton();
    void on_lineEditReturn();
private:
    CLogBook * text_edit_log;
    QLineEdit * line_edit;
};

#endif // WIDGET_H 
```

这是来源：

```
#include "widget.h"

#include <QBoxLayout>
#include <QPushButton>
#include <QTimer>

Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    QBoxLayout * box_layout = new QBoxLayout(QBoxLayout::TopToBottom);

    text_edit_log = new CLogBook;
    line_edit = new QLineEdit("Type Here and press Enter.");
    QPushButton * push_button = new QPushButton("Click to Add To Log");
    text_edit_log->setText("My Log Book");
    box_layout->addWidget(text_edit_log);
    box_layout->addWidget(line_edit);
    box_layout->addWidget(push_button);

    this->setLayout(box_layout);

    QObject::connect(push_button, SIGNAL(clicked()), this, SLOT(on_pushButton()));
    QObject::connect(line_edit, SIGNAL(returnPressed()), this, SLOT(on_lineEditReturn()));
}

void Widget::on_pushButton()
{
//    text_edit_log->append("Push Button Logging Test");
    text_edit_log->recvLogSignal("Push button test.");
}

void Widget::on_lineEditReturn()
{
//    text_edit_log->append(line_edit->text());
    text_edit_log->recvLogSignal(QString("LineEdit: ") + line_edit->text() );
    line_edit->clear();
} 
```

这是主要的：

```
#include <QtGui/QApplication>
#include "widget.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Widget w;
    w.show();

    return a.exec();
} 
```

这是 CLogBook 类：

```
#ifndef CLOGBOOK_H
#define CLOGBOOK_H

#include <QTextEdit>
#include <iostream>

class CLogBook : public QTextEdit
{
    Q_OBJECT
public:
    explicit CLogBook(QWidget *parent = 0) : QTextEdit(parent) { }
    void log (QString msg) { append(msg); }

public slots:
    void recvLogSignal(const QString message)
    {
        append("hallo");
        std::cout << "signal received.\n" << std::endl;
        log(message);
    }

};

#endif // CLOGBOOK_H 
```

# performance - 插件的性能

> ID：10961363
> 
> 赞同：1
> 
> 时间：2012-06-09T13:17:00.933
> 
> 标签：performance, plugins, browser

我只是想问一下，是否有任何解释或者是否有可能：

1.  操作系统会影响 Web 浏览器插件在呈现多媒体内容时的性能吗？
2.  Web 浏览器会影响 Web 浏览器插件在呈现多媒体内容时的性能？

# synchronization - 如何将 Google 日历从 Galaxy S3 同步到 Web 日历

> ID：10961365
> 
> 赞同：0
> 
> 时间：2012-06-09T13:17:02.850
> 
> 标签：synchronization, google-calendar-api

谁能告诉我如何将 Google 日历从 Galaxy S3 同步到 Google Web 日历 - 它适用于 Google Web 日历到 Galaxy S3 设备，但不能以其他方式运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:16:50.237

我从另一个论坛上得到了这个，它对我有用：

这样做，它应该工作。

```
settings > account and sync > uncheck background sync (OFF) 
```

然后去：

```
settings > applications > manage applications 
```

找到联系人存储，选择它并清除数据

然后返回帐户并同步并检查后台同步（ON）

然后选择您的 gmail 帐户并检查联系人，然后重新启动。等待 5-10 分钟，您会看到联系人开始出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T20:14:41.683

我的妻子刚刚对她的感觉有这个确切的问题。打开您的 g-mail-打开日历-打开日历设置-打开移动设置-输入电话#并按照提示操作，您应该会收到一个确认文本。这对她有用，我们当然希望这对你有用。希望您在世界任何地方都过得愉快 :) 真诚的，圣地亚哥

# php - 找到 attr('href') 并在页面上隐藏的 iframe 中打开，然后 show() iframe (jQuery + PHP)

> ID：10961366
> 
> 赞同：1
> 
> 时间：2012-06-09T13:17:03.570
> 
> 标签：php, javascript, jquery, function, dynamic

语言：**PHP 和 jQuery**

我想要做的是当用户点击它时弹出一个动态链接。
我不希望该页面在新窗口中打开，而是在一个覆盖在当前页面上的模态窗口中打开。

因此，对于 javascript，当用户单击此链接时，操作是找到链接的属性`href`并为该链接制作代码，使其位于模态窗口内的 iframe 内。

带有动态 PHP 链接 的**HTML ：**

```
 <a href="http://www.facebook.com/share.php?u=<?php echo $root_url; ?>?id=<?php echo $rows['id']; ?>&title=<?php echo urlencode($rows['keyword']); ?>" style="border: none;" onclick="return false;" class="fblink" target="iframe"><img src="./img/Facebook.png" style="float: right; margin-top: 0px;" title="Share on Facebook" alt="Share on Facebook" id="<?php echo $rows['id']; ?>"></a> 
```

**jQuery**脚本 ：

```
 var makePop = function() {
    link = $(this).attr('href');
    return '<div class="the_box" id="box" style="display: block;"><a class="boxclose" id="boxclose"></a>
    <iframe src="' + link + '" height="500px" width="600px" id="" name="iframe"></iframe></div>';
    } // End of Function.

    $("a.fblink").click(makePop); 
```

我不知道如何做到这一点......这不起作用。
有人吗？**:o)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:22:53.147

从事件处理函数返回字符串是没有意义的，它不会做任何事情。

您需要实际创建模态窗口。为此尝试使用[jQuery UI](http://jqueryui.com/demos/dialog/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:17:58.400

以下应该提供您正在寻找的内容。但是需要考虑 XHR 'load' 调用的同源策略等问题。

请参阅以下示例： http: [//jsfiddle.net/qeXea/2/](http://jsfiddle.net/qeXea/2/)
**注意：**由于相同的来源政策，iframe 无法填充内容，只需在您的网站上设置您自己的页面并使用您自己的 url 来查看.

HTML

```
<a href="http://www.yoururl.com" onclick="launchUrl(this); return false;">Click Here</a>
<div id="fade"></div>
<iframe id="dialog" src=""></iframe>
<script type="text/javascript">
function launchUrl(owner) {
    $('#fade').show();
    var link = $(owner).attr('href');
    $('#dialog').load(link, function(response) {
        $('#dialog').show();
    });
}
</script> 
```

CSS

```
#fade {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 100;
    display: none;
    position: absolute;
    background-color: rgba(255, 255, 255, 0.5);
}

#dialog {
    top: 100px;
    left: 100px;
    width: 200px;
    height: 200px;
    z-index: 101;
    display: none;
    position: absolute;
} 
```

* * *

选择

HTML

```
<a href="" onclick="launchUrl('http://www.yoururl.com'); return false;">Click Here</a>
<div id="fade"></div>
<iframe id="dialog" src=""></iframe>
<script type="text/javascript">
    function launchUrl(link) {
        $('#fade').show();
        $('#dialog').load(link, function(response) {
            $('#dialog').show();
        });
    }
</script> 
```

# c - 覆盖在artoolkit中的视频上

> ID：10961370
> 
> 赞同：2
> 
> 时间：2012-06-09T13:17:36.473
> 
> 标签：c, xcode, opengl, artoolkit

我需要在 ARToolKit 的 simpleVRML 示例中显示一些信息并在视频上创建一些多边形。我可以创建一个 openGL 窗口并在 simpleVRML 的视频层上创建一个覆盖窗口吗？我怎样才能做到这一点？

# android - 不同机器上的Activity和远程服务之间的连接

> ID：10961374
> 
> 赞同：0
> 
> 时间：2012-06-09T13:18:24.933
> 
> 标签：android, sockets, service, android-activity, aidl

我已经实现了一个带有活动和远程服务的 android 程序。Activity 使用 AIDL 与服务进行通信和交互，但在同一台机器上，并且知道它们使用 IPC 机制相互通信。现在，我想将它们放在不同的机器上并在它们之间建立连接。我正在尝试使用套接字进行连接，但我不知道该怎么做。如何启动/停止和绑定与活动在不同机器上运行的服务？插座是这种情况下的最佳选择还是有其他更好的解决方案？我是否需要更改 Android 操作系统上的 Binder 类来处理这个问题？如果您能帮助我找到解决方案，我将不胜感激。

谢谢，拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:59:48.603

> 如何启动/停止和绑定与活动在不同机器上运行的服务？

你没有。

> 插座是这种情况下的最佳选择还是有其他更好的解决方案？

由于 NAT 限制等原因，通常无法通过 Internet 进行直接的设备到设备通信，除非它们都在同一个 WiFi 路由段上。这与直接 PC 到 PC 通信的问题没有什么不同，增加的挑战是您通常无法控制所涉及的防火墙。大多数解决方案都涉及在中间使用服务器，充当代理或代理。

> 我是否需要更改 Android 操作系统上的 Binder 类来处理这个问题？

你不需要使用`Binder`. `Binder`是 IPC（进程间通信），而不是 RPC（远程过程调用）。

# python - 如何使用 Python 生成 html 目录列表

> ID：10961378
> 
> 赞同：18
> 
> 时间：2012-06-09T13:18:40.967
> 
> 标签：python, html, flask, jinja2

我在使用 Python 生成 html 文档时遇到了一些问题。我正在尝试创建目录树的 HTML 列表。这是我到目前为止所拥有的：

```
def list_files(startpath):
    for root, dirs, files in os.walk(startpath):
        level = root.replace(startpath, '').count(os.sep)
        if level <= 1:
            print('<li>{}<ul>'.format(os.path.basename(root)))
        else:
            print('<li>{}'.format(os.path.basename(root)))
        for f in files:
            last_file = len(files)-1
            if f == files[last_file]:
                print('<li>{}</li></ul>'.format(f))
            elif f == files[0] and level-1 > 0:
                print('<ul><li>{}</li>'.format(f))
            else:
                print('<li>{}</li>'.format(f))
    print('</li></ul>') 
```

如果只有根目录，一级子目录和文件，似乎效果很好。但是，添加另一级子目录会导致出现问题（因为我认为最后关闭标签的输入次数不足）。但我很难理解它。

如果不能以这种方式完成，有没有更简单的方法呢？我正在使用 Flask，但我对模板非常缺乏经验，所以也许我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-09T14:54:49.277

您可以将目录树生成及其呈现为 html 分开。

要生成树，您可以使用简单的递归函数：

```
def make_tree(path):
    tree = dict(name=os.path.basename(path), children=[])
    try: lst = os.listdir(path)
    except OSError:
        pass #ignore errors
    else:
        for name in lst:
            fn = os.path.join(path, name)
            if os.path.isdir(fn):
                tree['children'].append(make_tree(fn))
            else:
                tree['children'].append(dict(name=name))
    return tree 
```

要将其呈现为 html，您可以使用 jinja2 的循环`recursive`功能：

```
<!doctype html>
<title>Path: {{ tree.name }}</title>
<h1>{{ tree.name }}</h1>
<ul>
{%- for item in tree.children recursive %}
    <li>{{ item.name }}
    {%- if item.children -%}
        <ul>{{ loop(item.children) }}</ul>
    {%- endif %}</li>
{%- endfor %}
</ul> 
```

将html放入`templates/dirtree.html`文件中。要对其进行测试，请运行以下代码并访问`http://localhost:8888/`：

```
import os
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def dirtree():
    path = os.path.expanduser(u'~')
    return render_template('dirtree.html', tree=make_tree(path))

if __name__=="__main__":
    app.run(host='localhost', port=8888, debug=True) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-07-26T19:04:52.720

# 此脚本将通过覆盖所有 index.html 文件来销毁它们。它还列出了隐藏文件（.DS_Store）/ .gt...您可以稍作修改以防止这种行为，但这就是我使用它的方式。

它产生一个 moc 目录结构布局：

[![在此处输入图像描述](../Images/2ac927fb77efc9afaaf37f0adc1e4331.png)](https://i.stack.imgur.com/WRhyk.jpg)

```
 #!/usr/bin/env python3
# ---

# -handle symlinked files and folders: displayed with custom icons

#  -h, --help: show this help message and exit.
#  -f, --filter: only include files matching glob
#  -o filename, --output-file filename: Custom output file (by default generates "index.html")
#  -r, --recursive: recursively process nested folders/directories (False by default).
#  -v, --verbose: verbosely list every processed file. 

import argparse
import datetime
import os
import sys
from pathlib import Path
from urllib.parse import quote

DEFAULT_OUTPUT_FILE = 'index.html'

def process_dir(top_dir, opts):
    glob_patt = opts.filter or '*'

    path_top_dir: Path
    path_top_dir = Path(top_dir)
    index_file = None

    index_path = Path(path_top_dir, opts.output_file)

    if opts.verbose:
        print(f'Traversing dir {path_top_dir.absolute()}')

    try:
        index_file = open(index_path, 'w')
    except Exception as e:
        print('cannot create file %s %s' % (index_path, e))
        return

    index_file.write("""<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    * { padding: 0; margin: 0; }
    body {
        font-family: sans-serif;
        text-rendering: optimizespeed;
        background-color: #ffffff;
    }
    a {
        color: #006ed3;
        text-decoration: none;
    }
    a:hover,
    h1 a:hover {
        color: #319cff;
    }
    header,
    #summary {
        padding-left: 5%;
        padding-right: 5%;
    }
    th:first-child,
    td:first-child {
        width: 5%;
    }
    th:last-child,
    td:last-child {
        width: 5%;
    }
    header {
        padding-top: 25px;
        padding-bottom: 15px;
        background-color: #f2f2f2;
    }
    h1 {
        font-size: 20px;
        font-weight: normal;
        white-space: nowrap;
        overflow-x: hidden;
        text-overflow: ellipsis;
        color: #999;
    }
    h1 a {
        color: #000;
        margin: 0 4px;
    }
    h1 a:hover {
        text-decoration: underline;
    }
    h1 a:first-child {
        margin: 0;
    }
    main {
        display: block;
    }
    .meta {
        font-size: 12px;
        font-family: Verdana, sans-serif;
        border-bottom: 1px solid #9C9C9C;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .meta-item {
        margin-right: 1em;
    }
    #filter {
        padding: 4px;
        border: 1px solid #CCC;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    tr {
        border-bottom: 1px dashed #dadada;
    }
    tbody tr:hover {
        background-color: #ffffec;
    }
    th,
    td {
        text-align: left;
        padding: 10px 0;
    }
    th {
        padding-top: 15px;
        padding-bottom: 15px;
        font-size: 16px;
        white-space: nowrap;
    }
    th a {
        color: black;
    }
    th svg {
        vertical-align: middle;
    }
    td {
        white-space: nowrap;
        font-size: 14px;
    }
    td:nth-child(2) {
        width: 80%;
    }
    td:nth-child(3) {
        padding: 0 20px 0 20px;
    }
    th:nth-child(4),
    td:nth-child(4) {
        text-align: right;
    }
    td:nth-child(2) svg {
        position: absolute;
    }
    td .name {
        margin-left: 1.75em;
        word-break: break-all;
        overflow-wrap: break-word;
        white-space: pre-wrap;
    }
    td .goup {
        margin-left: 1.75em;
        padding: 0;
        word-break: break-all;
        overflow-wrap: break-word;
        white-space: pre-wrap;
    }
    .icon {
        margin-right: 5px;
    }
    tr.clickable { 
        cursor: pointer; 
    } 
    tr.clickable a { 
        display: block; 
    } 
    @media (max-width: 600px) {
        * {
            font-size: 1.06rem;
        }
        .hideable {
            display: none;
        }
        td:nth-child(2) {
            width: auto;
        }
        th:nth-child(3),
        td:nth-child(3) {
            padding-right: 5%;
            text-align: right;
        }
        h1 {
            color: #000;
        }
        h1 a {
            margin: 0;
        }
        #filter {
            max-width: 100px;
        }
    }
    </style>
</head>
<body>
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="0" width="0" style="position: absolute;">
    <defs>
        <!-- Go-up -->
        <g id="go-up">
            <path d="M10,9V5L3,12L10,19V14.9C15,14.9 18.5,16.5 21,20C20,15 17,10 10,9Z" fill="#696969"/>
        </g>
        <!-- Folder -->
        <g id="folder" fill-rule="nonzero" fill="none">
            <path d="M285.22 37.55h-142.6L110.9 0H31.7C14.25 0 0 16.9 0 37.55v75.1h316.92V75.1c0-20.65-14.26-37.55-31.7-37.55z" fill="#FFA000"/>
            <path d="M285.22 36H31.7C14.25 36 0 50.28 0 67.74v158.7c0 17.47 14.26 31.75 31.7 31.75H285.2c17.44 0 31.7-14.3 31.7-31.75V67.75c0-17.47-14.26-31.75-31.7-31.75z" fill="#FFCA28"/>
        </g>
        <g id="folder-shortcut" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="folder-shortcut-group" fill-rule="nonzero">
                <g id="folder-shortcut-shape">
                    <path d="M285.224876,37.5486902 L142.612438,37.5486902 L110.920785,0 L31.6916529,0 C14.2612438,0 0,16.8969106 0,37.5486902 L0,112.646071 L316.916529,112.646071 L316.916529,75.0973805 C316.916529,54.4456008 302.655285,37.5486902 285.224876,37.5486902 Z" id="Shape" fill="#FFA000"></path>
                    <path d="M285.224876,36 L31.6916529,36 C14.2612438,36 0,50.2838568 0,67.7419039 L0,226.451424 C0,243.909471 14.2612438,258.193328 31.6916529,258.193328 L285.224876,258.193328 C302.655285,258.193328 316.916529,243.909471 316.916529,226.451424 L316.916529,67.7419039 C316.916529,50.2838568 302.655285,36 285.224876,36 Z" id="Shape" fill="#FFCA28"></path>
                </g>
                <path d="M126.154134,250.559184 C126.850974,251.883673 127.300549,253.006122 127.772602,254.106122 C128.469442,255.206122 128.919016,256.104082 129.638335,257.002041 C130.559962,258.326531 131.728855,259 133.100057,259 C134.493737,259 135.415364,258.55102 136.112204,257.67551 C136.809044,257.002041 137.258619,255.902041 137.258619,254.577551 C137.258619,253.904082 137.258619,252.804082 137.033832,251.457143 C136.786566,249.908163 136.561779,249.032653 136.561779,248.583673 C136.089726,242.814286 135.864939,237.920408 135.864939,233.273469 C135.864939,225.057143 136.786566,217.514286 138.180246,210.846939 C139.798713,204.202041 141.889234,198.634694 144.429328,193.763265 C147.216689,188.869388 150.678411,184.873469 154.836973,181.326531 C158.995535,177.779592 163.626149,174.883673 168.481552,172.661224 C173.336954,170.438776 179.113983,168.665306 185.587852,167.340816 C192.061722,166.218367 198.760378,165.342857 205.481514,164.669388 C212.18017,164.220408 219.598146,163.995918 228.162535,163.995918 L246.055591,163.995918 L246.055591,195.514286 C246.055591,197.736735 246.752431,199.510204 248.370899,201.059184 C250.214153,202.608163 252.079886,203.506122 254.372715,203.506122 C256.463236,203.506122 258.531277,202.608163 260.172223,201.059184 L326.102289,137.797959 C327.720757,136.24898 328.642384,134.47551 328.642384,132.253061 C328.642384,130.030612 327.720757,128.257143 326.102289,126.708163 L260.172223,63.4469388 C258.553756,61.8979592 256.463236,61 254.395194,61 C252.079886,61 250.236632,61.8979592 248.393377,63.4469388 C246.77491,64.9959184 246.07807,66.7693878 246.07807,68.9918367 L246.07807,100.510204 L228.162535,100.510204 C166.863084,100.510204 129.166282,117.167347 115.274437,150.459184 C110.666301,161.54898 108.350993,175.310204 108.350993,191.742857 C108.350993,205.279592 113.903236,223.912245 124.760454,247.438776 C125.00772,248.112245 125.457294,249.010204 126.154134,250.559184 Z" id="Shape" fill="#FFFFFF" transform="translate(218.496689, 160.000000) scale(-1, 1) translate(-218.496689, -160.000000) "></path>
            </g>
        </g>
        <!-- File -->
        <g id="file" stroke="#000" stroke-width="25" fill="#FFF" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
            <path d="M13 24.12v274.76c0 6.16 5.87 11.12 13.17 11.12H239c7.3 0 13.17-4.96 13.17-11.12V136.15S132.6 13 128.37 13H26.17C18.87 13 13 17.96 13 24.12z"/>
            <path d="M129.37 13L129 113.9c0 10.58 7.26 19.1 16.27 19.1H249L129.37 13z"/>
        </g>
        <g id="file-shortcut" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="file-shortcut-group" transform="translate(13.000000, 13.000000)">
                <g id="file-shortcut-shape" stroke="#000000" stroke-width="25" fill="#FFFFFF" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0,11.1214886 L0,285.878477 C0,292.039924 5.87498876,296.999983 13.1728373,296.999983 L225.997983,296.999983 C233.295974,296.999983 239.17082,292.039942 239.17082,285.878477 L239.17082,123.145388 C239.17082,123.145388 119.58541,2.84217094e-14 115.369423,2.84217094e-14 L13.1728576,2.84217094e-14 C5.87500907,-1.71479982e-05 0,4.96022995 0,11.1214886 Z" id="rect1171"></path>
                    <path d="M116.37005,0 L116,100.904964 C116,111.483663 123.258008,120 132.273377,120 L236,120 L116.37005,0 L116.37005,0 Z" id="rect1794"></path>
                </g>
                <path d="M47.803141,294.093878 C48.4999811,295.177551 48.9495553,296.095918 49.4216083,296.995918 C50.1184484,297.895918 50.5680227,298.630612 51.2873415,299.365306 C52.2089688,300.44898 53.3778619,301 54.7490634,301 C56.1427436,301 57.0643709,300.632653 57.761211,299.916327 C58.4580511,299.365306 58.9076254,298.465306 58.9076254,297.381633 C58.9076254,296.830612 58.9076254,295.930612 58.6828382,294.828571 C58.4355724,293.561224 58.2107852,292.844898 58.2107852,292.477551 C57.7387323,287.757143 57.5139451,283.753061 57.5139451,279.95102 C57.5139451,273.228571 58.4355724,267.057143 59.8292526,261.602041 C61.44772,256.165306 63.5382403,251.610204 66.0783349,247.62449 C68.8656954,243.620408 72.3274172,240.35102 76.4859792,237.44898 C80.6445412,234.546939 85.2751561,232.177551 90.1305582,230.359184 C94.9859603,228.540816 100.76299,227.089796 107.236859,226.006122 C113.710728,225.087755 120.409385,224.371429 127.13052,223.820408 C133.829177,223.453061 141.247152,223.269388 149.811542,223.269388 L167.704598,223.269388 L167.704598,249.057143 C167.704598,250.87551 168.401438,252.326531 170.019905,253.593878 C171.86316,254.861224 173.728893,255.595918 176.021722,255.595918 C178.112242,255.595918 180.180284,254.861224 181.82123,253.593878 L247.751296,201.834694 C249.369763,200.567347 250.291391,199.116327 250.291391,197.297959 C250.291391,195.479592 249.369763,194.028571 247.751296,192.761224 L181.82123,141.002041 C180.202763,139.734694 178.112242,139 176.044201,139 C173.728893,139 171.885639,139.734694 170.042384,141.002041 C168.423917,142.269388 167.727077,143.720408 167.727077,145.538776 L167.727077,171.326531 L149.811542,171.326531 C88.5120908,171.326531 50.8152886,184.955102 36.9234437,212.193878 C32.3153075,221.267347 30,232.526531 30,245.971429 C30,257.046939 35.5522422,272.291837 46.4094607,291.540816 C46.6567266,292.091837 47.1063009,292.826531 47.803141,294.093878 Z" id="Shape-Copy" fill="#000000" fill-rule="nonzero" transform="translate(140.145695, 220.000000) scale(-1, 1) translate(-140.145695, -220.000000) "></path>
            </g>
        </g>
    </defs>
    </svg>
<header>
    <h1>"""
                     f'{path_top_dir.name}'
                     """</h1>
                 </header>
                 <main>
                 <div class="listing">
                     <table aria-describedby="summary">
                         <thead>
                         <tr>
                             <th></th>
                             <th>Name</th>
                             <th>Size</th>
                             <th class="hideable">
                                 Modified
                             </th>
                             <th class="hideable"></th>
                         </tr>
                         </thead>
                         <tbody>
                         <tr class="clickable">
                             <td></td>
                             <td><a href=".."><svg width="1.5em" height="1em" version="1.1" viewBox="0 0 24 24"><use xlink:href="#go-up"></use></svg>
                 <span class="goup">..</span></a></td>
                             <td>&mdash;</td>
                             <td class="hideable">&mdash;</td>
                             <td class="hideable"></td>
                         </tr>
                 """)

    # sort dirs first
    sorted_entries = sorted(path_top_dir.glob(glob_patt), key=lambda p: (p.is_file(), p.name))

    entry: Path
    for entry in sorted_entries:

        # don't include index.html in the file listing
        if entry.name.lower() == opts.output_file.lower():
            continue

        if entry.is_dir() and opts.recursive:
            process_dir(entry, opts)

        # From Python 3.6, os.access() accepts path-like objects
        if (not entry.is_symlink()) and not os.access(str(entry), os.W_OK):
            print(f"*** WARNING *** entry {entry.absolute()} is not writable! SKIPPING!")
            continue
        if opts.verbose:
            print(f'{entry.absolute()}')

        size_bytes = -1  ## is a folder
        size_pretty = '&mdash;'
        last_modified = '-'
        last_modified_human_readable = '-'
        last_modified_iso = ''
        try:
            if entry.is_file():
                size_bytes = entry.stat().st_size
                size_pretty = pretty_size(size_bytes)

            if entry.is_dir() or entry.is_file():
                last_modified = datetime.datetime.fromtimestamp(entry.stat().st_mtime).replace(microsecond=0)
                last_modified_iso = last_modified.isoformat()
                last_modified_human_readable = last_modified.strftime("%c")

        except Exception as e:
            print('ERROR accessing file name:', e, entry)
            continue

        entry_path = str(entry.name)

        if entry.is_dir() and not entry.is_symlink():
            entry_type = 'folder'
            if os.name not in ('nt',):
                # append trailing slash to dirs, unless it's windows
                entry_path = os.path.join(entry.name, '')

        elif entry.is_dir() and entry.is_symlink():
            entry_type = 'folder-shortcut'
            print('dir-symlink', entry.absolute())

        elif entry.is_file() and entry.is_symlink():
            entry_type = 'file-shortcut'
            print('file-symlink', entry.absolute())

        else:
            entry_type = 'file'

        index_file.write(f"""
        <tr class="file">
            <td></td>
            <td>
                <a href="{quote(entry_path)}">
                    <svg width="1.5em" height="1em" version="1.1" viewBox="0 0 265 323"><use xlink:href="#{entry_type}"></use></svg>
                    <span class="name">{entry.name}</span>
                </a>
            </td>
            <td data-order="{size_bytes}">{size_pretty}</td>
            <td class="hideable"><time datetime="{last_modified_iso}">{last_modified_human_readable}</time></td>
            <td class="hideable"></td>
        </tr>
""")

    index_file.write("""
            </tbody>
        </table>
    </div>
</main>
</body>
</html>""")
    if index_file:
        index_file.close()

# bytes pretty-printing
UNITS_MAPPING = [
    (1024 ** 5, ' PB'),
    (1024 ** 4, ' TB'),
    (1024 ** 3, ' GB'),
    (1024 ** 2, ' MB'),
    (1024 ** 1, ' KB'),
    (1024 ** 0, (' byte', ' bytes')),
]

def pretty_size(bytes, units=UNITS_MAPPING):
    """Human-readable file sizes.
    ripped from https://pypi.python.org/pypi/hurry.filesize/
    """
    for factor, suffix in units:
        if bytes >= factor:
            break
    amount = int(bytes / factor)

    if isinstance(suffix, tuple):
        singular, multiple = suffix
        if amount == 1:
            suffix = singular
        else:
            suffix = multiple
    return str(amount) + suffix

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description='''DESCRIPTION:
    Generate directory index files (recursive is OFF by default).
    Start from current dir or from folder passed as first positional argument.
    Optionally filter by file types with --filter "*.py". ''')

    parser.add_argument('top_dir',
                        nargs='?',
                        action='store',
                        help='top folder from which to start generating indexes, '
                             'use current folder if not specified',
                        default=os.getcwd())

    parser.add_argument('--filter', '-f',
                        help='only include files matching glob',
                        required=False)

    parser.add_argument('--output-file', '-o',
                        metavar='filename',
                        default=DEFAULT_OUTPUT_FILE,
                        help=f'Custom output file, by default "{DEFAULT_OUTPUT_FILE}"')

    parser.add_argument('--recursive', '-r',
                        action='store_true',
                        help="recursively process nested dirs (FALSE by default)",
                        required=False)

    parser.add_argument('--verbose', '-v',
                        action='store_true',
                        help='***WARNING: can take longer time with complex file tree structures on slow terminals***'
                             ' verbosely list every processed file',
                        required=False)

    config = parser.parse_args(sys.argv[1:])
    process_dir(config.top_dir, config) 
```

* * *

## 或者，这是一个更简单的脚本：

#### 结果如下所示：

[![在此处输入图像描述](../Images/a3cc5ebeb6a391ed57a8c7f28b53008c.png)](https://i.stack.imgur.com/tcpNw.jpg)

```
import os

indexTextStart = """<!DOCTYPE html>
<html>
<head><title>Index of {folderPath}</title></head>
<body>
    <h2>Index of {folderPath}</h2>
    <hr>
    <ul>
        <li>
            <a href='../'>../</a>
        </li>
"""
indexTextEnd = """
    </ul>
</body>
</html>
"""

def index_folder(folderPath):
    print("Indexing: " + folderPath +'/')
    #Getting the content of the folder
    files = os.listdir(folderPath)
    #If Root folder, correcting folder name
    root = folderPath
    if folderPath == '.':
        root = 'Root'
    indexText = indexTextStart.format(folderPath=root)
    for file in files:
        #Avoiding index.html files
        if file != 'index.html':
            indexText += "\t\t<li>\n\t\t\t<a href='" + file + "'>" + file + "</a>\n\t\t</li>\n"
        #Recursive call to continue indexing
        if os.path.isdir(folderPath+'/'+file):
            index_folder(folderPath + '/' + file)
    indexText += indexTextEnd
    #Create or override previous index.html
    index = open(folderPath+'/index.html', "w")
    #Save indexed content to file
    index.write(indexText)

#Indexing root directory (Script position)
index_folder('.') 
```

* * *

##你也可以使用

1.)[目录](https://www.rlvision.com/snap2html/about.php) 2.) [Snap2Html](https://www.portablefreeware.com/index.php?id=308)

##### 以获得大致相同的效果。

* * *

* * *

## 最后，如果你想要一个简单的无序列文件列表，你也可以使用这个 bash 脚本：

```
 #!/bin/sh

# find ./ | grep -i "\.*$" >files
find ./ | sed -E -e 's/([^ ]+[ ]+){8}//' | grep -i "\.*$">files
listing="files"

out=""

html="index.html"
out="basename $out.html"
html="index.html"
cmd() {

  echo '  <!DOCTYPE html>'
  echo '<html>'
  echo '<head>'

  echo '  <meta http-equiv="Content-Type" content="text/html">'

  echo '  <meta name="Author" content="Bryan Guner">'
  echo '<link rel="stylesheet" href="./assets/prism.css">'
  echo ' <link rel="stylesheet" href="./assets/style.css">'
  echo ' <script async defer src="./assets/prism.js"></script>'

  echo "  <title> directory </title>"

  echo ""
  echo '<style>'

echo '    a {'
echo '      color: black;'
echo '    }'
echo ''
echo '    li {'
echo '      border: 1px solid black !important;'
echo '      font-size: 20px;'
echo '      letter-spacing: 0px;'
echo '      font-weight: 700;'
echo '      line-height: 16px;'
echo '      text-decoration: none !important;'
echo '      text-transform: uppercase;'
echo '      background: #194ccdaf !important;'
echo '      color: black !important;'
echo '      border: none;'
echo '      cursor: pointer;'
echo '      justify-content: center;'
echo '      padding: 30px 60px;'
echo '      height: 48px;'
echo '      text-align: center;'
echo '      white-space: normal;'
echo '      border-radius: 10px;'
echo '      min-width: 45em;'
echo '      padding: 1.2em 1em 0;'
echo '      box-shadow: 0 0 5px;'
echo '      margin: 1em;'
echo '      display: grid;'
echo '      -webkit-border-radius: 10px;'
echo '      -moz-border-radius: 10px;'
echo '      -ms-border-radius: 10px;'
echo '      -o-border-radius: 10px;'
echo '    }'
echo '  </style>'
  echo '</head>'

  echo '<body>'

  echo ""

  # continue with the HTML stuff

  echo ""

  echo ""

  echo "<ul>"

  awk '{print "<li><a href=\""$1"\">",$1,"&nbsp;</a></li>"}' $listing

  # awk '{print "<li>"};

  #     {print " <a href=\""$1"\">",$1,"</a></li>&nbsp;"}' \ $listing

  echo ""

  echo "</ul>"

  echo "</body>"

  echo "</html>"

}

cmd $listing --sort=extension >>$html 
```

# javascript - html表单使用javascript和离线解决方案填充pdf文本字段

> ID：10961379
> 
> 赞同：-1
> 
> 时间：2012-06-09T13:18:47.173
> 
> 标签：javascript, html, forms, pdf, offline

我有一个静态 HTML 应用程序，在第一页（姓名/地址/电话号码/邮件）使用简单的 HTML 表单保存了使用 Javascript 的 cookie

```
<form name="myForm" method="post" onsubmit="return storeValues(this);">
    <fieldset>
        <label>Field 1</label>
        <span>
            <input type="text" size="32" name="**field1**" value="">
        </span>
        <label>Field 2</label>
        <span>
            <input type="text" size="32" name="**field2**" value="">
        </span>
        <label>Field 3</label>
        <span>
            <input type="text" size="32" name="**field3**" value="">
        </span>
        <label>Field 4</label>
        <span>
            <input type="text" size="32" name="**field4**" value="">
        </span>
        <span>
            <input type="submit" value="Valider">
            <input type="button" onclick="clearCookies();" value="Effacer ">
        </span>
    </fieldset>
</form> 
```

大约有 100 个静态 HTML 页面连接到该第一页，其中在不同页面上有大约 10 个 PDF 文件可供下载，并具有相同的预制文本字段**（字段 1、字段 2、字段 3、字段 4）。**

当查看者想要下载此 PDF 文件时，4 个文本字段需要获取之前以 HTML 形式填写的正确信息。

我不知道我是否可以使用**javascript、离线、没有服务器且不打开 PDF**来做到这一点。

**PDF 文件下载后需要保持原样。**

最终的 HTML 应用程序也将被编译为 EXE 应用程序。（这个 HTML 应用是一个基于 JPEG 背景的 jQuery 区域链接。）

互联网上有几种使用不同 SDK 的解决方案：PDFKit、Easy PDF 等，但我需要让它离线工作，如果可能的话使用 Javascript，因为我有点理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:50:37.773

Mozilla 开发人员目前正在使用 HTML 5 和 Javascript 开发 PDF 阅读器。如果您在[andreas gal](http://andreasgal.com/2011/06/15/pdf-js/)的博客上查看名为[pdf-js](https://github.com/mozilla/pdf.js)的项目，将会很有趣。

# android - Android 从彩信中获取 person_id

> ID：10961382
> 
> 赞同：0
> 
> 时间：2012-06-09T13:19:04.630
> 
> 标签：android, sms, android-contentprovider, mms

我在构建一个简单的自定义 SMS/MMS 内容提供程序包装类时遇到了很大的麻烦，只要它不存在适用于 android 平台的官方类。显然，为了获取数据，我使用游标查询“content://sms”和“content://mms”内容提供者。

我发现 SMS 相当简单，因为列名称非常容易理解，并且包含典型程序员在其应用程序中需要的所有数据（“人”用于获取短信发送者/接收者联系人 ID，“地址”用于获取发送者/接收者电话号码，“类型”以获取短信是否为收件箱、发件箱、草稿、已发送短信等...）

不幸的是，使用 MMS，我发现了很多麻烦。这些列有难以理解的名称（例如“d_tm”、“ct_cls”、“retr_st”、“d_rpt”等）和我需要的基本信息，例如联系人 ID、电话号码、彩信类型等...似乎错过了。

如何通过 MMS 获取此信息？我搜索了内容提供者的所有 32 列，但没有找到我需要的内容。

提前致谢！

PS我知道谷歌建议避免对没有一系列官方类来访问它们的内容提供者进行这种“低级”操作，但我想像HandCent这样在sms/mms管理中运行的软件公司或 Go Dev 团队，已经使用我正在使用的相同方法构建了自己的内容提供程序。我是对的还是存在管理 SMS/MMS 的非官方库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:13:28.537

我用谷歌搜索了更多，最后我发现获取有关 MMS 的联系人 ID、电话号码、类型等信息的正确方法是将内容提供程序打开到以下内容

```
 URI: "content://mms/{MmsId}/addr" 
```

> （{MmsId} 是彩信“_id”列值）。

在这里我找到了我需要的所有信息。

希望能帮助到你！！！

# python - PNG块类型代码位#5

> ID：10961384
> 
> 赞同：1
> 
> 时间：2012-06-09T13:19:10.263
> 
> 标签：python, png, file-format, bit

我正在尝试用 Python 编写我自己的小 PNG 阅读器。[文档](http://www.libpng.org/pub/png/spec/1.2/png-1.2.pdf)中有一些我不太明白的东西。在第 3.3 章（处理块的地方）它说：

> 类型代码的四位，即每个字节的位 5（值 32），用于传达块属性。这种选择意味着人类可以根据类型代码的每个字母是大写（第 5 位为 0）还是小写（第 5 位为 1）来读取分配的属性。然而，解码器应该通过数值测试指定位来测试未知块的属性；测试一个字符是大写还是小写是低效的，如果使用特定于语言环境的大小写定义，甚至是不正确的。

好的，所以它明确表示**不**应该测试一个字节是大写还是小写。那么，我如何检查那个*位 5*？

此外，文件指出

> 辅助位：第一个字节的第 5 位
> 0（大写）= 关键，1（小写）= 辅助。

我有以下函数将整数转换为比特流：

```
def bits(x, n):
    """ Convert an integer value *x* to a sequence of *n* bits as a string. """
    return ''.join(str([0, 1][x >> i & 1]) for i in xrange(n - 1, -1, -1)) 
```

举个例子，取`sRGB`大块。小写`s`表示该块是辅助的。`S`但是比较大写和小写的比特流`s`

```
01110011
01010011 
```

我们可以看到在这两种情况下第 5 位都是零。

我想我对计算位数确实有错误的理解。由于唯一改变的是第三个（即用 2 索引），我认为这是我正在寻找的位？它也是从右边开始的第 6 位，并以**5**为索引（当然是从右边开始）。这就是我要寻找的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:25:20.713

Python 确实有按位操作。当他们已经给了您位掩码（32 或 0x20）时，您正在以艰难的方式进行操作。

```
is_critical = (type_code & 0x20) == 0 
```

或者，等效地：

```
is_critical = (type_code & (0x1 << 5)) == 0 
```

（为清楚起见，带有额外的括号）

# android - getDrawingCache() 返回一个尺寸为 -1 的位图

> ID：10961391
> 
> 赞同：0
> 
> 时间：2012-06-09T13:19:47.067
> 
> 标签：android, android-canvas, android-view

正如标题所说，getDrawingCache 函数返回一个宽度和高度都设置为-1 的位图。我看到了几篇关于函数返回 null 的帖子，但不是 -1 的维度。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:57:37.010

确保`view.setDrawingCacheEnabled(true)`在创建布局后调用，并`view.buildDrawingCache();`在获取缓存之前调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T19:55:50.163

现在好了。问题出在我的坐标翻译上……

# javascript - 这个 javascript 在 Magento 中定义在哪里？

> ID：10961393
> 
> 赞同：1
> 
> 时间：2012-06-09T13:20:08.827
> 
> 标签：javascript, magento

我正在尝试根据 W3C 使我的网站 100% 有效。

我的网站是：www.theprinterdepo.com

验证报告在这里： http://validator.w3.org/check?uri=http%3A%2F%2Fwww.theprinterdepo.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent= [W3C_Validator%2F1 .3](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.theprinterdepo.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.3)

我需要根据该页面修复一个 javascript 代码，但我找不到它的位置 我已经在我的模板文件夹中尝试了 header.phtml 和 head.phtml 但它不存在

js是这样的：

```
<script type="text/javascript">window.HDUSeed='6780a8396c4a7207c8e81d509cbafa79';
window.HDUSeedIntId = setInterval(function(){
if (document.observe) {
document.observe('dom:loaded', function(){
for (var i = 0; i < document.forms.length; i++) {
if (document.forms[i].getAttribute('action') && document.forms[i].getAttribute('action').match('contacts/index/post')) {
var el = document.createElement('input');
el.type = ('hidden');
el.name = 'hdu_seed';
el.value = window.HDUSeed;
document.forms[i].appendChild(el);
}
}
});
clearInterval(window.HDUSeedIntId)
}
}, 100)</script> 
```

问题是我可以在哪个 magento 文件中检查并修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:58:18.637

Jürgen Thelen 在他的评论中是正确的 - 看起来你正在使用第 3 方扩展 - 很可能来自 Ahead Works：[http](http://ecommerce.aheadworks.com/magento-extensions/help-desk-ultimate.html) ://ecommerce.aheadworks.com/magento-extensions/help-desk-ultimate.html -所以你可能想请他们解决这个问题。或者，如果您确实解决了它，那么也许可以将修复反馈给他们。

不管怎样，只要在你正在寻找的代码中找到一些独特的东西（也许是：'hdu_seed'），然后在你的源代码中用 grep 搜索它。以下递归 grep 并显示任何匹配的文件名（从您的 Web 根目录运行）：

```
grep -lr "hdu_seed" . 
```

如果由于某种原因无法使用命令行进行 grep，请使用 notepad++ 或 netbeans 等工具来执行搜索。

To narrow down your search, the code you are looking for will most likely be in a js file, js_skin file, template file or being generated in a Block.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T17:03:50.557

```
grep -r "clearInterval(window.HDUSeedIntId)" * 
```

If that doesn't work you can use

```
 echo "<larger part of script>"
 read var_name
 grep -r $var_name * 
```

# javascript - 用Javascript在IE8中读取用户参数文件

> ID：10961396
> 
> 赞同：0
> 
> 时间：2012-06-09T13:21:00.953
> 
> 标签：javascript, internet-explorer-8

好的，伙计们-所有建议都被欣然接受。我是一个相对的新手，用头撞在坚硬的砖墙上。

基本上我正在做的是读取用户参数文件以生成多个报告。我使用 AddEventListener 和 FileReader 函数在 Firefox 中完美运行。IE8 不允许我这样做 - 我已经尝试过 AttachEvent（请参阅[Javascript 中的 MSIE 和 addEventListener 问题？](https://stackoverflow.com/questions/1695376/msie-and-addeventlistener-problem-in-javascript)），它会列出文件，但不允许我读取用户选择的文件。（为什么微软认为这是一个安全漏洞，而 Mozilla 并没有让我感到困惑。）

我不希望用户必须将所有数据输入到表单中，因为我希望数据可重复使用，即我设想用户经常对一小部分参数进行小幅更改并重新运行。

除了检查 IEx 并告诉他们使用其他浏览器之外，还有其他人会推荐的方法吗？

感谢期待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:27:19.113

嗨，基本上我有一个平面参数文件，我想从用户计算机（以指定格式）读取该文件，然后生成报告。必要性是发明之母，我想出了另一种读取文件的解决方案。也就是把文件内容复制到一个文本区，然后用来处理

```
<textarea id="myTextarea" cols="45" rows="20">Copy in here</textarea>

<br />
<button type="button" onclick="readParameters()">then click here</button>
<script>
function readParameters()
{contents=document.getElementById("myTextarea").value;}
</script> 
```

不如选择文件那么整洁，但至少它适用于 IE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T17:43:13.733

User1446214 有正确的想法，我通过使用 and if 语句添加了兼容性检查，如果文件读取器失败，则将文本区域放在 JQuery 对话框中：

```
if (window.File && window.FileReader && window.FileList && window.Blob) {
// load file code
} else {
//open jquery dialog box with text area
$("#fileInputDialog").dialog("open"); 
```

}

# java - jButton 具有非常奇怪的行为

> ID：10961403
> 
> 赞同：2
> 
> 时间：2012-06-09T13:21:49.437
> 
> 标签：java, swing, user-interface, jbutton, actionlistener

我开发了一些桌面应用程序，基于 netbeans GUI 创建者，我遇到了 jButton 行为的奇怪问题，每次单击它时，它都会执行 7 次：

```
jButton7.addActionListener(new ButtonListener());
class ButtonListener implements ActionListener {
ButtonListener() {
}
    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals("pushToTest")) {
            System.out.println("Button1 has been clicked");
            }
      }
} 
```

输出如下：

```
Button1 has been clicked
Button1 has been clicked
Button1 has been clicked
Button1 has been clicked
Button1 has been clicked
Button1 has been clicked
Button1 has been clicked 
```

只需单击一下。它发生在我所有的按钮上，我无法发布 gui 的代码，它就像 1700 行，甚至没有人会费心阅读它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T13:26:02.087

事实上，我会让我的评论成为答案：

我的猜测-您的问题出在未显示的代码中，并且您可能会将 ActionListener 添加到每个 JButton 7 次。您是否使用 for 循环来执行此操作？您需要仔细检查您的代码，现在，我们无法帮助您，因为有问题的代码尚未显示。

编辑：您的 pastebin 帖子表明您实际上在 for 循环中做了很多 GUI 初始化工作，这个循环：`for (int ii = 0; ii < holder2.size() / 3; ii++) {`. 查看右花括号的位置：

```
 setComponent(mainPanel);
     setMenuBar(menuBar);
     setStatusBar(statusPanel);
  }// </editor-fold>  // *** here *** 
```

在这些大括号之间有***大量***的代码，包括大部分的 GUI 初始化代码。这可能是导致您将 ActionListener 7 次添加到按钮的原因。我的猜测是你真的不希望 for 循环调用所有代码，你的错误在于没有在正确的位置添加循环的结束括号。

此外，考虑重构那个怪物程序并使用具有逻辑意义的变量名，您会发现调试程序会容易得多。对我们来说也一样。

# .net - Neo4JClient：如何创建关系？

> ID：10961405
> 
> 赞同：2
> 
> 时间：2012-06-09T13:22:11.493
> 
> 标签：.net, neo4j

我看到一个标题相同的帖子，但不幸的是通过查看给定的示例找不到解决方案

我已经按照以下方式创建了节点：

```
private static void createExampleNetwork(GraphClient client)
    {
        try
        {
            //CypherQuery cq = new CypherQuery();
            //string createNodeQuery = "CREATE (a {name : 'Andres'}) RETURN";
            //string response = cq.CreateRequest(createNodeQuery);

            var myNodeReferenceA = client.Create(new ExampleNode { Name = "A" });
            var myNodeReferenceB = client.Create(new ExampleNode { Name = "B" });
            var myNodeReferenceC = client.Create(new ExampleNode { Name = "C" });
            var myNodeReferenceD = client.Create(new ExampleNode { Name = "D" });
            var myNodeReferenceE = client.Create(new ExampleNode { Name = "E" });
            var myNodeReferenceF = client.Create(new ExampleNode { Name = "F" });
            var myNodeReferenceG = client.Create(new ExampleNode { Name = "G" });
        }
        catch (Exception ex)
        {

        }
    } 
```

我想创建以下关系： A--B A--C A--D C--D B--G

但不知道如何。

我查看了示例 [http://hg.readify.net/neo4jclient/src/4693da483a90/Test/RelationshipTests.cs](http://hg.readify.net/neo4jclient/src/4693da483a90/Test/RelationshipTests.cs) 和 [http://hg.readify.net/neo4jclient/src/4693da483a90/Test/ApiUsageIdeas.cs](http://hg.readify.net/neo4jclient/src/4693da483a90/Test/ApiUsageIdeas.cs)

但仍然不知道关系是如何建立的。

如果有人能举一个有用的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T13:44:23.567

我找到了解决方案

```
private static void createExampleNetwork(GraphClient client)
    {
        try
        {

            var myNodeReferenceA = client.Create(new ExampleNode { Name = "A" });
            var myNodeReferenceB = client.Create(new ExampleNode { Name = "B" });
            var myNodeReferenceC = client.Create(new ExampleNode { Name = "C" });
            var myNodeReferenceD = client.Create(new ExampleNode { Name = "D" });
            var myNodeReferenceE = client.Create(new ExampleNode { Name = "E" });
            var myNodeReferenceF = client.Create(new ExampleNode { Name = "F" });
            var myNodeReferenceG = client.Create(new ExampleNode { Name = "G" });

            client.CreateRelationship(myNodeReferenceA, new NodeKnows(myNodeReferenceB));
            client.CreateRelationship(myNodeReferenceA, new NodeKnows(myNodeReferenceC));
            client.CreateRelationship(myNodeReferenceA, new NodeKnows(myNodeReferenceD));
            client.CreateRelationship(myNodeReferenceA, new NodeKnows(myNodeReferenceE));
            client.CreateRelationship(myNodeReferenceB, new NodeKnows(myNodeReferenceF));
            client.CreateRelationship(myNodeReferenceB, new NodeKnows(myNodeReferenceG));
            client.CreateRelationship(myNodeReferenceC, new NodeKnows(myNodeReferenceD));
            client.CreateRelationship(myNodeReferenceE, new NodeKnows(myNodeReferenceF));
        }
        catch (Exception ex)
        {

        }
    }

 public class NodeKnows :Relationship, IRelationshipAllowingSourceNode<ExampleNode>, IRelationshipAllowingTargetNode<ExampleNode>
{
    public NodeKnows(NodeReference targetNode)
        : base(targetNode)
    {
    }

    public const string TypeKey = "KNOWS";
    public override string RelationshipTypeKey
    {
        get { return TypeKey; }
    }
} 
```

# ruby - 安装 libroutez git

> ID：10961406
> 
> 赞同：1
> 
> 时间：2012-06-09T13:22:48.063
> 
> 标签：ruby, rvm

我正在尝试安装[libroutez git](https://github.com/wlach/libroutez)。

我安装了所有依赖项。当我尝试运行时`./configure`（第 2 点），它会出现这些行（我省略了以前的那些与 ruby​​ 无关的行，它们没有显示任何问题）

```
checking for the mkmf Ruby package... yes
checking for Ruby include path... -e:1: Use RbConfig instead of obsolete and deprecated Config.

-I/Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0
checking for Ruby library path... -e:1: Use RbConfig instead of obsolete and deprecated Config.
-lruby.1.9.1

checking for Ruby site-packages path... -e:1: Use RbConfig instead of obsolete and deprecated Config.
/Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/x86_64-darwin11.4.0
checking ruby extra libraries... -e:1: Use RbConfig instead of obsolete and deprecated Config.

checking consistency of all components of ruby development environment... no
configure: error:
  Could not link test program to Ruby. Maybe the main Ruby library has been
  installed in some non-standard library path. If so, pass it to configure,
  via the LDFLAGS environment variable.
  Example: ./configure LDFLAGS="-L/usr/non-standard-path/ruby/lib"
  ============================================================================
   ERROR!
   You probably have to install the development version of the Ruby package
   for your distribution.  The exact name of this package varies among them.
  ============================================================================ 
```

我无法指定找到库的正确路径。如果有帮助，命令`gem environment`输出

```
 RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin11.4.0]
  - INSTALLATION DIRECTORY: /Users/giorgio/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/giorgio/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-11
  - GEM PATHS:
     - /Users/giorgio/.rvm/gems/ruby-1.9.3-p194
     - /Users/giorgio/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

--- mpapis 回答后编辑

该命令输出

```
checking for gcc... gcc
checking for C compiler default output file name... 
configure: error: C compiler cannot create executables
See `config.log' for more details. 
```

该文件包含

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by libroutez configure 0.1.0, which was  
generated by GNU Autoconf 2.61\.  Invocation command line was

$ ./configure LDFLAGS=-lruby.1.9.1 CFLAGS=-I/Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1

## --------- ##
Platform. ##
## --------- ##

hostname = 192-168-1-5.tpgi.com.au
uname -m = x86_64
uname -r = 11.4.0
uname -s = Darwin
uname -v = Darwin Kernel Version 11.4.0: Mon Apr  9 19:32:15 PDT 2012; root:xnu-1699.26.8~1/RELEASE_X86_64

/usr/bin/uname -p = i386
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = Mach kernel version:
 Darwin Kernel Version 11.4.0: Mon Apr  9 19:32:15 PDT 2012; root:xnu-            1699.26.8~1/RELEASE_X86_64
Kernel configured for up to 4 processors.
2 processors are physically available.
4 processors are logically available.
Processor type: i486 (Intel 80486)
Processors active: 0 1 2 3
Primary memory available: 4.00 gigabytes
Default processor set: 69 tasks, 322 threads, 4 processors
Load average: 0.37, Mach factor: 3.62
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /Users/giorgio/.rvm/gems/ruby-1.9.3-p194/bin
PATH: /Users/giorgio/.rvm/gems/ruby-1.9.3-p194@global/bin
PATH: /Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/bin
PATH: /Users/giorgio/.rvm/bin
PATH: /usr/bin
PATH: /bin
PATH: /usr/sbin
PATH: /sbin
PATH: /usr/local/bin
PATH: /usr/X11/bin
PATH: /usr/local/git/bin

## ----------- ##
Core tests. ##
## ----------- ##

configure:1758: checking for gcc
configure:1774: found /usr/bin/gcc
configure:1785: result: gcc
configure:2023: checking for C compiler version
configure:2030: gcc --version >&5
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2033: $? = 0
configure:2040: gcc -v >&5
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2335.15~25/src/configure --disable-checking --enable-werror --prefix=/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2335.15~25/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)
configure:2043: $? = 0
configure:2050: gcc -V >&5
llvm-gcc-4.2: argument to `-V' is missing
configure:2053: $? = 1
configure:2076: checking for C compiler default output file name
configure:2103: gcc -I/Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1  -            lruby.1.9.1 conftest.c  >&5
ld: library not found for -lruby.1.9.1
collect2: ld returned 1 exit status
configure:2106: $? = 1
configure:2144: result: 
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME "libroutez"
| #define PACKAGE_TARNAME "libroutez"
| #define PACKAGE_VERSION "0.1.0"
| #define PACKAGE_STRING "libroutez 0.1.0"
| #define PACKAGE_BUGREPORT "libroutez@googlegroups.com"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:2151: error: C compiler cannot create executables
See `config.log' for more details.

## ---------------- ##
Cache variables
## ---------------- ##

ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=set
ac_cv_env_CFLAGS_value=-I/Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXCPP_set=
ac_cv_env_CXXCPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value=-lruby.1.9.1
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_PYTHON_VERSION_set=
ac_cv_env_PYTHON_VERSION_value=
ac_cv_env_RUBY_set=
ac_cv_env_RUBY_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_prog_ac_ct_CC=gcc

## ----------------- ##
Output variables. ##
## ----------------- ##

AWK=''
CC='gcc'
CFLAGS='-I/Users/giorgio/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1'
CPP=''
CPPFLAGS=''
CXX=''
CXXCPP=''
CXXFLAGS=''
DEFS=''
ECHO_C='ECHO_N=''
ECHO_T=''
EXEEXT=''
GREP=''
INSTALL_DATA=''
INSTALL_PROGRAM=''
INSTALL_SCRIPT=''
LDFLAGS='-lruby.1.9.1'
LIBOBJS=''
LIBS=''
LTLIBOBJS=''
OBJEXT=''
OS=''
PACKAGE_BUGREPORT='libroutez@googlegroups.com'
PACKAGE_NAME='libroutez'
PACKAGE_STRING='libroutez 0.1.0'
PACKAGE_TARNAME='libroutez'
PACKAGE_VERSION='0.1.0'
PATH_SEPARATOR=':'
PYTHON=''
PYTHON_CPPFLAGS=''
PYTHON_EXTRA_LDFLAGS=''
PYTHON_EXTRA_LIBS=''
PYTHON_LDFLAGS=''
PYTHON_SITE_PKG=''
PYTHON_VERSION=''
RUBY=''
RUBY_CPPFLAGS=''
RUBY_EXTRA_LIBS=''
RUBY_LDFLAGS=''
RUBY_SITE_PKG=''
RUBY_VERSION='ruby-1.9.3-p194'
SED=''
SHELL='/bin/sh'
SWIG=''
ac_ct_CC='gcc'
ac_ct_CXX=''
bindir='${exec_prefix}/bin'
build=''
build_alias=''
build_cpu=''
build_os=''
build_vendor=''
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='NONE'
host=''
host_alias=''
host_cpu=''
host_os=''
host_vendor=''
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='NONE'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target=''
target_alias=''
target_cpu=''
target_os=''
target_vendor=''

## ----------- ##
confdefs.h. ##
## ----------- ##

#define PACKAGE_NAME "libroutez"
#define PACKAGE_TARNAME "libroutez"
#define PACKAGE_VERSION "0.1.0"
#define PACKAGE_STRING "libroutez 0.1.0"
#define PACKAGE_BUGREPORT "libroutez@googlegroups.com"

configure: exit 77 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T03:24:03.133

在 Linux 上使用：

```
./configure \
  LDFLAGS="$(ruby -rrbconfig -e 'puts  RbConfig::CONFIG["LIBRUBYARG"]')" \
  CFLAGS="-I$(ruby -rrbconfig -e 'puts RbConfig::CONFIG["rubyhdrdir"]')" 
```

在 OSX 上使用：

```
./configure \
  LDFLAGS="-L$(ruby -rrbconfig -e 'puts RbConfig::CONFIG["libdir"]')" \
  CFLAGS="-I$(ruby -rrbconfig -e 'puts RbConfig::CONFIG["rubyhdrdir"]')" 
```

# javascript - 如何检查 jQuery 验证引擎是否附加到表单？

> ID：10961408
> 
> 赞同：2
> 
> 时间：2012-06-09T13:23:02.993
> 
> 标签：javascript, jquery, forms, validation

我不仅希望能够确定[jQuery Validation Engine](http://posabsolute.github.com/jQuery-Validation-Engine/#actions/hideall)插件是否已加载，而且它是否正在某个表单上使用。最快的方法是什么？

我知道我可以[隐藏所有提示](http://posabsolute.github.com/jQuery-Validation-Engine/#actions/hideall)，[验证](http://posabsolute.github.com/jQuery-Validation-Engine/#actions/validate)（返回真/假），然后再次[显示所有提示](http://posabsolute.github.com/jQuery-Validation-Engine/#actions/showprompt-prompttext-type-promptposition-showarrow)，但这并不好（特别是因为它可能原本打算显示所有提示）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:17:02.580

jQuery 验证引擎是否已加载？

```
if (jQuery().validationEngine) 
```

它是否用于某种形式？

```
if ($('#formID').data('jqv')) 
```

# facebook - Facebook 在应用程序中打开/关闭社交阅读

> ID：10961410
> 
> 赞同：1
> 
> 时间：2012-06-09T13:23:19.187
> 
> 标签：facebook, facebook-graph-api, facebook-social-plugins

我尝试了社交插件“推荐栏”，它可以工作。它具有激活和停用社交阅读功能的内置功能。我想在我的简单应用程序中使用“read”publish_actions 启用此功能。我不想使用 cookie 或 session var 来做到这一点，这是一种错误的方式。用户必须选择在哪篇文章中打开/关闭社交阅读，并即时更改他的偏好。

用户登录：scope="publish_actions, email"

我知道：$facebook->api("/me/permissions"); $facebook->api("/me/news.reads?limit=10");

我可以发布阅读：FB.api('/me/news.reads', 'post', { 'article': 'xxxxxx', 'access_token': 'xxxxx' }, function(response)

并删除它： FB.api(id, 'delete', function(response)

API调用启用/禁用社交阅读功能的任何想法？如何为已安装应用的用户设置 publish_actions 权限值为 0/1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:30:06.003

> 我不想使用 cookie 或 session var 来做到这一点，这是一种错误的方式。

是的，用户的个人资料将是一个更好的保存位置，这样他下次访问您的网站时就不必再次做出该决定。

> 如何为已安装应用的用户设置 publish_actions 权限值为 0/1？

您不能通过应用程序撤销权限。我不明白你为什么想要。如果用户在您的网站上禁用了社交阅读（最好将其保存在他们的个人资料中），那么不要代表他们发布任何内容。

# matlab - Matlab x=[x[i]]; means?

> ID：10961421
> 
> 赞同：0
> 
> 时间：2012-06-09T13:24:37.690
> 
> 标签：matlab

I'm trying to understand a matlab code, but I'm not familiar with matlab much. Can someone please tell me what the meaning of x = [ x[i] ] is?

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:32:04.647

Your expression really must be read as

```
x = [ x [i] ] 
```

Focusing on the right side, you are making a joined matrix (i.e., joining columns) of x along with a 1x1 matrix given by `i` (which may be a matrix itself, obviously). Then you are assigning it to another variable, `x` in this case.

I must remind you that access to indices is made using round parentheses.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T13:32:26.770

`[]` is used to concatenate matrices. e.g.:

```
a = 3;
b = 2;
c = [a b]

c = 
       3     2 
```

Your code can be written with spaces to clarify:

```
x = [x [i]]; 
```

i.e. there are two nested uses of the concatenation operator. But doing something like `[i]` is pointless; it's equivalent to just `i`. i.e. your code is equivalent to:

```
x = [x i]; 
```

i.e. it concatenates `x` with `i`, and then assigns the result back to `x`.

# c++ - cpp unix 多线程套接字阻塞和非阻塞。什么是阻塞？

> ID：10961424
> 
> 赞同：2
> 
> 时间：2012-06-09T13:24:51.917
> 
> 标签：c++, multithreading, sockets, unix

在我的多线程应用程序中，我使用 AF_UNIX 类型的套接字。似乎默认情况下它的阻塞。问题是“阻塞”是什么意思？它在应用程序上执行或调用或**所有线程**时阻塞**线程**（就像这样做）？`::recv``::send`**`fgets`**

 **如果它阻塞所有线程/整个应用程序，我猜需要使用非阻塞套接字？如果是这样，请举例说明如何设置 AF_UNIX 非阻塞套接字以及何时需要设置非阻塞模式（以及如何设置）。怎么做`::recv`？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T13:32:40.230

阻塞调用使线程等待操作完成。当您的线程在操作完成之前无法继续时使用它们，例如由于接收到的输入的数据依赖性。

一旦信息被缓冲以进行传输，或者启动读取操作，非阻塞调用就会返回。当没有数据依赖时使用它们。

一般来说，*阻塞*总是意味着“阻塞当前线程”，而不是“阻塞我进程中的所有线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T13:27:23.277

它只阻塞进行*recv*调用的线程。**

# javascript - IE9 没有运行 javascript onload

> ID：10961430
> 
> 赞同：4
> 
> 时间：2012-06-09T13:25:21.867
> 
> 标签：javascript, internet-explorer-9

出于某种原因，当浏览器第一次启动该会话时，IE9 没有运行我的 JavaScript 代码 onload。它似乎只在用户刷新页面后运行 onload 。它还将在调试控制台打开时运行 JavaScript。

如何使 JavaScript 在浏览器打开后运行 onload？这只是IE9的错误吗？

我将重申这一点，以便您了解：如果您在启动新的浏览器会话后访问该站点，则代码**不会运行。**如果您在新选项卡中打开站点、重新加载页面或打开调试控制台，代码**会运行**

这是我用来运行脚本 onload 的函数（在***NORMAL***浏览器中运行良好）：

```
(function (i) {
  var u = navigator.userAgent;
  var e = /*@cc_on!@*/
  false;
  var st = setTimeout;
  if (/webkit/i.test(u)) {
    st(function () {
      var dr = document.readyState;
      if (dr == "loaded" || dr == "complete") {
        i()
      } else {
        st(arguments.callee, 10);
      }
    }, 10);
  } else if ((/mozilla/i.test(u) && !/(compati)/.test(u)) || (/opera/i.test(u))) {
    document.addEventListener("DOMContentLoaded", i, false);
  } else if (e) {
    (function () {
      var t = document.createElement('doc:rdy');
      try {
        t.doScroll('left');
        i();
        t = null;
      } catch (e) {
        st(arguments.callee, 0);
      }
    })();
  } else {
    window.onload = i;
  }
})(init); //init is the function to call onload 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T22:29:00.370

我遇到了与您完全相同的问题。我有一组图像，我想确保在开始幻灯片放映之前预先加载这些图像。我正在利用

```
$(window).load(function(){
    //All my code
}); 
```

这正是我所面临的。

*   当我在 IE 中复制并粘贴 URL 时，onload 事件似乎没有触发。
*   如果我使用 F12 打开控制台，然后在浏览器中输入 URL 并按下回车键，一切似乎都正常。
*   现在我至少打开了一次控制台，
    *   如果我关闭控制台然后重新加载页面，则 onload 正在触发。
    *   如果我输入 URL 然后按回车键，onload 就会触发。

我花了几天时间才真正弄清楚我做错了什么。

问题出在 console.log 语句上。在我的代码中的很多地方，我做了很多控制台日志记录。甚至我使用的插件之一 - jplayer 在代码中的某处都有一条未注释的控制台消息。

问题是，除非您在 IE 中至少打开一次控制台，否则控制台对象不可用。这意味着代码将在遇到的第一个 console.log 中失败。

现在，我没有心情为了在 IE 中测试它而注释掉我所有的 console.log 语句。所以，这就是我所做的。在我的 document.ready jquery 函数的顶部，我编写了这段代码。

```
if(!window.console){
    console={};
    console.log = function(){};
} 
```

它的基本作用是创建一个虚拟的 console.log 函数占位符，以便代码可以在 IE 中运行，但只有在 console.log 是您在代码或插件中使用的唯一控制台函数时，它才会起作用.

只是我的2美分。在这个问题上拉我头发的时间比我愿意承认的要长。我希望这至少对某人有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T13:53:42.497

您需要弄清楚代码是否根本没有运行，即从未进入您的函数，或者它是否在函数内的某些特定行上失败。IE9 是否显示任何警告或 js 错误？

最简单的做法是在代码中粘贴一堆 alert() 语句，以查看它在哪里停止并缩小到该行。

如果它从未进入您的函数，那么您需要查看更高的位置，即进行调用的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T14:57:23.873

只是一个小笔记；当您使用任何调试关键字（如 console.log）或任何相关内容时，当且仅当调试器未打开（使用 F12）时，IE9 才会转义此 JS 函数

实际上我不知道还有什么导致问题，但对我来说，我的问题是“console.log”这个词，而调试器在 IE9 中没有打开......我知道这已经是一个已回答的问题，但我觉得它需要为人所知。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T15:54:48.843

好吧，我想通了。它与 IE 处理 IF 语句的一些奇怪方式有关。

在我的 init 函数中，我有两个 IF 语句，一个检查变量是否存在，然后记录该变量的值。另一个检查相同变量的值是否等于任意字符串。

删除第一个 IF 语句后，一切似乎都正常工作。我还决定使用不同的 onload 函数，如下所示：

```
if (document.addEventListener) {
    document.addEventListener('DOMContentLoaded', init, true);
} else if (document.all && !window.opera){ //Crude test for IE
//Define a "blank" external JavaScript tag
    document.write('<script type="text/javascript" id="contentloadtag" defer="defer" src="javascript:void(0)"><\/script>');
    var contentloadtag=document.getElementById("contentloadtag");
    contentloadtag.onreadystatechange=function(){
        if (this.readyState=="complete") {
            init();
            //ie('open');
        }
    }
} 
```

# unix - 为什么总是 ./configure; 制作; 进行安装；作为3个单独的步骤？

> ID：10961439
> 
> 赞同：125
> 
> 时间：2012-06-09T13:26:34.867
> 
> 标签：unix, makefile, configure, make-install

每次从源代码编译某些东西时，都会经历相同的 3 个步骤：

```
$ ./configure
$ make
$ make install 
```

我理解，将安装过程分成不同的步骤是有意义的，但我不明白，为什么这个星球上的每个编码人员都必须一遍又一遍地编写相同的三个命令才能完成一项工作。从我的角度来看，让`./install.sh`包含以下文本的源代码自动交付一个脚本是完全有意义的：

```
#!/bin/sh
./configure
make
make install 
```

为什么人们会分别做这三个步骤？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-06-09T13:44:13.207

因为每一步做不同的事情

## 准备（设置）构建环境

```
./configure 
```

这个脚本有很多你应该改变的选项。喜欢`--prefix`或`--with-dir=/foo`。这意味着每个系统都有不同的配置。还`./configure`检查应该安装的缺少的库。这里的任何错误**都会导致无法构建您的应用程序**。这就是为什么发行版的软件包安装在不同的地方，因为每个发行版都认为将某些库和文件安装到某些目录会更好。据说运行`./configure`，但实际上你应该总是改变它。

例如，看看[Arch Linux 软件包站点](http://www.archlinux.org/packages/)。在这里，您将看到任何包都使用不同的配置参数（假设它们使用构建系统的自动工具）。

## 构建系统

```
make 
```

这实际上`make all`是默认的。每个品牌都有不同的行动要做。有些是在构建，有些是在构建后进行测试，有些是从外部 SCM 存储库中检出。通常你不必提供任何参数，但有些包再次以不同的方式执行它们。

## 安装到系统

```
make install 
```

这会将软件包安装在 configure 指定的位置。如果您愿意，您可以指定`./configure`指向您的主目录。但是，许多配置选项都指向`/usr`or `/usr/local`。这意味着你必须实际使用`sudo make install`，因为只有 root 可以将文件复制到 /usr 和 /usr/local。

* * *

现在您看到每个步骤都是下一步的先决条件。每一步都是为使事情顺利进行的准备工作。发行版使用这个比喻来构建包（如 RPM、deb 等）。

在这里你会看到每一步实际上都是不同的状态。这就是为什么包管理器有不同的包装器。下面是一个包装器示例，可让您一步构建整个包。但请记住，每个应用程序都有不同的包装器（实际上这些包装器的名称类似于 spec、PKGBUILD 等）：

```
def setup:
... #use ./configure if autotools is used

def build:
... #use make if autotools is used

def install:
... #use make all if autotools is used 
```

`./configure`这里可以使用自动工具，即`make`和`make install`。但另一个可以使用 SCons、Python 相关设置或其他不同的东西。

正如您所见，拆分每个状态使维护和部署变得更加容易，尤其是对于包维护者和发行版。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-09T13:47:09.643

首先，应该是`./configure && make && make install`因为每个都取决于前者的成功。部分原因是进化，部分原因是开发工作流程的便利。

最初，大多数`Makefile`s 只包含编译程序的命令，而安装则留给用户。一个额外的规则允许`make install`将编译后的输出放在一个可能正确的地方；您可能仍然有很多充分的理由不想这样做，包括不是系统管理员，根本不想安装它。此外，如果我正在开发软件，我可能不想安装它。我想进行一些更改并测试我目录中的版本。如果我将有多个版本，这将变得更加突出。

`./configure`去检测环境中可用的和/或用户想要的，以确定如何构建软件。这不是需要经常更改的东西，而且通常需要一些时间。同样，如果我是一名开发人员，不值得花时间不断地重新配置。更重要的是，由于`make`使用时间戳来重建模块，如果我重新运行`configure`，标志可能会发生变化，现在我的构建中的一些组件将使用一组标志进行编译，而其他组件将使用一组不同的标志进行编译，这可能会导致不同的，不相容的行为。只要我不重新运行`configure`，我就知道我的编译环境保持不变，即使我更改了源代码。如果我重播`configure`，我应该`make clean`首先，删除任何已构建的源以确保统一构建事物。

三个命令连续运行的唯一情况是用户安装程序或构建软件包时（例如，Debian 的 debuild 或 RedHat 的 rpmbuild）。并且假设可以给包装一个 plain `configure`，这通常不是包装的情况，至少`--prefix=/usr`是需要的。`make install`包装商在做这个部分时喜欢处理假根。由于有很多例外，因此`./configure && make && make install`对于许多更频繁地这样做的人来说，制定规则会很不方便！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T13:37:58.073

`configure`如果发现缺少依赖项，可能会失败。

`make`运行默认目标，即 Makefile 中列出的第一个目标。这个目标通常是`all`，但并非总是如此。所以只有`make all install`当你知道那是目标时，你才能做到。

所以 ...

```
#!/bin/sh

if ./configure $*; then
  if make; then
    make install
  fi
fi 
```

或者：

```
./configure $* && ./make && ./make install 
```

之所以包含，`$*`是因为通常必须提供`configure`.

但为什么不让人们自己做呢？这真的是一场大胜吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-09T13:38:34.890

首先，./configure 并不总能找到它需要的所有东西，或者在其他情况下，它会找到它需要的所有东西，但不是它可以使用的所有东西。在这种情况下，您会想知道它（并且您的 ./install.sh 脚本无论如何都会失败！）从我的角度来看，具有意外后果的非失败的经典示例是编译大型应用程序，如 ffmpeg 或 mplayer。如果它们可用，它们将使用库，但如果它们不可用，它们仍然会编译，从而禁用某些选项。问题是您稍后会发现它是在不支持某种格式的情况下编译的，因此需要您返回并重做它。

./configure 以交互方式做的另一件事是让您可以选择自定义应用程序将在系统上安装的位置。不同的发行版/环境有不同的约定，您可能希望遵守系统上的约定。此外，您可能希望在本地安装它（仅供您自己使用）。传统上 ./configure 和 make 步骤不以 root 身份运行，而 make install（除非它是为您自己安装的）必须以 root 身份运行。

特定的发行版通常会提供以对发行版敏感的方式执行此 ./install.sh 功能的脚本 - 例如，[源 RPMs + spec 文件 + rpmbuild](http://fedoraproject.org/wiki/How_to_create_an_RPM_package)或[slackbuilds](http://slackbuilds.org/howto/)。

（脚注：话虽如此，我同意 ./configure; make; make install; 会变得非常乏味。）

# mercurial - 通过 SSH 访问 Mercurial 存储库

> ID：10961444
> 
> 赞同：3
> 
> 时间：2012-06-09T13:27:39.327
> 
> 标签：mercurial, ssh

我可以使用 hgweb.cgi 通过 http:// 成功访问存储库：

```
$ hg clone http://mydomain.com/scgi-bin/hgweb.cgi/myrepo 
```

我还可以使用密码成功 ssh 进入 mydomain.com。

```
$ ssh myname@mydomain.com
myname@mydomain.com's password:  xxxxxx
Last login: Sat Jun 9 .....
myname@mydomain.com [~]# ls public_html/scgi-bin
./ ../ hgweb.cgi*, hgweb.config 
```

但是我无法推断如何通过 SSH 提供存储库。例如，这不起作用：

```
$ hg clone ssh://myname@mydomain.com/public_html/scgi-bin/hgweb.cgi/myrepo
myname@mydomain.com's password: xxxxx
remote: stdin: is not a tty
remote: bash: hg: command not found
abort: no suitable response from remote hg! 
```

我的结论是，与 http:// 不同，ssh:// 不知道如何运行 cgi 脚本，这是正确的吗？有针对这个的解决方法吗？

（顺便说一句：这是在共享主机上，http 的根目录是 public_html/，ssh 的根目录是上一个目录。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T23:28:27.080

HTTP 与 SSH 不同。HTTP 是一种无状态的、基于请求的传输协议。SSH 是一种在两台机器之间建立永久、有状态连接的协议。

您的 HTTP URL 看起来像是一个存储库的完整路径，但它通过一个 Web 服务器，该服务器正在执行 hgweb.cgi 脚本，并将 myrepo 作为参数传递给它。hgweb.cgi 脚本在服务器上针对 myrepo 存储库运行 Mercurial（它从服务器上的配置文件中提取实际位置）。命令链如下所示：

```
Local Mercurial -> HTTP -> Web Server -> hgweb.cgi > Server Mercurial 
```

您在第二个示例中使用的 SSH URL 告诉 Mercurial 以 身份登录`mydomain.com`服务器`myname`，它可以在`/public_html/scgi-bin/hgweb.cgi/myrepo`. 很可能，这不是您的回购所在的位置。命令链如下所示：

```
Local Mercurial -> SSH -> Server file system 
```

您需要更改 SSH URL 以使用服务器上存储库的绝对路径：

```
hg clone ssh://myname@mydomain.com/path/to/myrepo 
```

看起来服务器也找不到 Mercurial 可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:35:50.857

使用 hg 的“详细”选项后，发现了两个问题：

1.  当通过 ssh 调用时，hg 会自动尝试运行 hg 服务器，因此无需通过 hgweb.cgi。
2.  hg 命令的路径（在 .bash_profile 中设置）没有用于非交互式 SSH 命令。我不得不将 hg 的路径放在某个地方，例如 .bashrc。

修复所有这些，以下命令按预期工作：

```
hg clone ssh://myname@mydomain.com/public_html/myrepo 
```

# entity-framework - 无法将 SQL 查询转换为等效的 LinqToEntities 代码？

> ID：10961451
> 
> 赞同：2
> 
> 时间：2012-06-09T13:28:57.107
> 
> 标签：entity-framework, tsql, c#-4.0, linq-to-entities

**简而言之：** 总结这个问题的一种更简单的方法是，你能在 linq 的连接上应用条件吗？

我有以下 sql 查询：

```
select cdm.cashID, cdm.DateTimeTillOpened, cdm.DateTimeTillClosed, o.OrderID, o.OrderDate
from CashDrawsMonies cdm
join Orders o on o.OrderDate >= cdm.DateTimeTillOpened
              AND o.OrderDate <= cdm.DateTimeTillClosed
join Users u on o.UserID = u.UserID
where u.UserID = 'C3763CC6-D1C5-4EF3-9B83-F7AB3BF8827A'
group by cdm.cashID, cdm.DateTimeTillOpened, cdm.DateTimeTillClosed, o.OrderID, o.OrderDate
order by o.OrderDate desc 
```

***替代 SQL@***

```
select *
from CashDrawsMonies cdm
where exists
(
    select * 
    from Orders o 
    join Users u on o.UserID = u.UserID
    where 
        o.OrderDate >= cdm.DateTimeTillOpened and 
        o.OrderDate <= cdm.DateTimeTillClosed and
        u.UserID = 'C3763CC6-D1C5-4EF3-9B83-F7AB3BF8827A'
) 
```

我可以转换大多数查询，但在 Linq 中的连接上，它总是要求一个相等的关键字，而不是像 >= 或 <= 这样的东西，它允许我在 sql 中对连接设置一个条件。这就是让我挠头的原因，我该如何转换它呢？

我在代码（c#）中的 linq-To-Entites 模型设置为：

```
Cache.Model.Orders
Cache.Model.CashDrawMonies
Cache.Model.Users 
```

感谢帮助。

***尝试1：***

```
 var results = from o in Cache.Model.Orders
                          from c in Cache.Model.CashDrawMoneys
                          join u in Cache.Model.Users on o.UserID equals u.UserID
                          where c.DateTimeTillOpened >= o.OrderDate
                          && c.DateTimeTillClosed <= o.OrderDate
                          select c; 
```

***尝试2：***

```
 var results = from c in Cache.Model.CashDrawMoneys
                          from o in Cache.Model.Orders
                          where c.DateTimeTillOpened >= o.OrderDate
                          && c.DateTimeTillClosed <= o.OrderDate
                          group c by new { c.cashID, c.DateTimeTillOpened, c.DateTimeTillClosed, o.OrderID, o.OrderDate, o.UserID } into temp
                          from t in temp
                          join u in Cache.Model.Users on t.UserID equals u.UserID
                          where t.UserID == selectedUser.UserID
                          select t; 
```

不返回任何结果....：S

***更新：***

我重新编写了我的 sql，第二段 sql 正是我想知道的。只是需要有人以某种方式为我转换它？？？

使用 Linqer 转换的 SQL 版本 2：

```
from cdm in db.CashDrawMoneys
where
    (from o in db.Orders
    join u in db.Users on o.UserID equals u.UserID
    where
      o.OrderDate >= cdm.DateTimeTillOpened &&
      o.OrderDate <= cdm.DateTimeTillClosed &&
      u.UserID == new Guid("C3763CC6-D1C5-4EF3-9B83-F7AB3BF8827A")
    select new {
      o,
      u
    }).FirstOrDefault() != null
select new {
  cdm.UserID,
  cdm.DateTimeTillClosed,
  cdm.DateTimeTillOpened,
  cdm.LooseChange,
  cdm.Fivers,
  cdm.Tens,
  cdm.Twenties,
  cdm.Fifties,
  cdm.IsOpen,
  cdm.IsClosed,
  cdm.ClosingValue,
  cdm.OpeningValue,
  cdm.cashID
} 
```

编译 nbut 会产生以下错误：

“DbIsNullExpression 的参数必须引用原始类型或引用类型。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:45:43.890

第一次尝试的连接看起来是正确的。但是你把比较运算符转过来了吗？

`where c.DateTimeTillOpened **>=** o.OrderDate` `&& c.DateTimeTillClosed **<=** o.OrderDate`

**更新：**

您不能在 LINQ2EF 中创建新对象，因为它不知道如何将其转换为 sql。

```
u.UserID == new Guid("C3763CC6-D1C5-4EF3-9B83-F7AB3BF8827A") 
```

您必须在 linq 语句之前定义 GUID，然后使用变量

```
var gid = new Guid("C3763CC6-D1C5-4EF3-9B83-F7AB3BF8827A")

from cdm in db.CashDrawMoneys
where
    (from o in db.Orders
    join u in db.Users on o.UserID equals u.UserID
    where
    o.OrderDate >= cdm.DateTimeTillOpened &&
    o.OrderDate <= cdm.DateTimeTillClosed &&
    u.UserID == gid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:04:13.857

以下是我设法得到的：

```
 var results = from cdm in Cache.Model.CashDrawMoneys
                          where (from o in Cache.Model.Orders
                                join u in Cache.Model.Users on o.UserID equals u.UserID
                                where o.OrderDate >= cdm.DateTimeTillOpened && o.OrderDate <= cdm.DateTimeTillClosed &&
                                    u.UserID == selectedUser.UserID
                                select o).FirstOrDefault() != null
                          select cdm; 
```

它与您得到的非常接近，并且不必担心 guid，因为它已经为我创建了，因为我有一个“selectedUser”对象。

最后一行可能是：

```
 select o).Any()
                          select cdm; 
```

但我并不大惊小怪，我得到了两种变体，但我会坚持我的第一个版本。

# html - 如何让 css 支持旧版本的浏览器

> ID：10961452
> 
> 赞同：2
> 
> 时间：2012-06-09T13:28:59.247
> 
> 标签：html, internet-explorer, css, browser-support

> **可能重复：**
> [如何使用 CSS 在 IE8 中制作圆角边框？](https://stackoverflow.com/questions/4130460/how-to-make-rounded-border-in-ie8-with-css)

我将此代码设置为边框。我需要为这个边框设置圆角。

此代码适用**于 E9**，我需要它**在 IE6、IE7、IE8 等旧浏览器中工作**

我的**CSS代码**

```
 border-radius: 11px 11px;
 border:1px solid #373737;
 -webkit-border-radius: 11px;
 -moz-border-radius: 11px; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T13:31:06.467

我建议 CSS3 PIE - [http://css3pie.com/](http://css3pie.com/)

> PIE 使 Internet Explorer 6-9 能够呈现几个最有用的 CSS3 装饰功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T13:31:20.450

旧浏览器不支持`border-radius`，您必须使用**[CSS3Pie](http://css3pie.com/)**之类的脚本才能使其在它们中运行。

请注意，在您的 CSS 中，您将不得不使用`behaviour`无效的属性，这将导致您的 CSS 无法针对 W3C Validator 进行验证。

# c# - ASP.NET MVC 设计问题

> ID：10961453
> 
> 赞同：2
> 
> 时间：2012-06-09T13:28:59.573
> 
> 标签：c#, asp.net, asp.net-mvc-3

1.  模型和视图模型有什么区别？我应该同时使用它们还是最好跳过其中一个？谁从数据库中获取数据？

2.  我想知道从数据库中获取数据的最佳/正确方法是什么。

一种选择是有一个 DAL（数据访问层）并在每个控制器中实例化它，用它填充视图模型，如：

```
var viewmodel = Dal.GetArticles(); 
```

另一种选择是让模型本身从数据库中获取信息：

```
var model = new ArticlesModel();
model.GetArticles();

public void GetArticles()
{
var context = new DbContext();
_articles = context.Articles
} 
```

另一个类似的选择是拥有一个静态 DAL，这样您就可以在每个模型中访问它，因此每个模型都有一个使用静态 DAL 类获取数据的方法（其中包含一个 DbContext 类来访问数据库）

```
public void GetArticles()
{
_articles = DAL.GetArticles();
} 
```

所以一般的问题是模型本身是否需要从数据库中获取数据，或者控制器本身是否可以访问 DAL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:01:14.987

当有人在写一个更有用的答案时，我会很快解决你的观点。

**`Model`是您要显示的*数据。***

通常，您会希望使用对象关系映射，以便您的大多数业务对象类对应于数据库表，而您不必手动构造查询。

有很多可用的 ORM 解决方案，包括实体框架、NHibernate 和（现在正在死去的）LINQ to SQL。

还有一个很棒的 micro-ORM，称为[Dapper](http://code.google.com/p/dapper-dot-net/)，如果更大的框架对您的解决方案感到不必要的臃肿，您可能会喜欢它。

确保您了解它们之间的差异。

**[DAL 在 .NET 中比“知道”如何加载自己的类](http://en.wikipedia.org/wiki/Active_record_pattern)更惯用。**

（虽然在实践中你的解决方案很可能是两种方法的混合——关键是，像往常一样，保持平衡。）

我的建议是，只要你的 ORM 允许并且不会给调用代码增加额外的复杂度， 就尽量让你的模型保持[普通的旧 CLR 对象。](http://en.wikipedia.org/wiki/Plain_Old_CLR_Object)

这些对象，只要有可能（并且是明智的——任何规则都有例外！），不应该绑定到特定的数据库或 ORM 实现。

如果需要，将您的代码迁移到另一个 ORM 将只是重写数据访问层的问题。
但是，您应该明白，这**不是**分离 DAL 的主要原因。

您不太可能在项目中间更改 ORM，除非您最初的选择确实不适合该目的，或者您突然吸引了 100,000 名用户并且您的 ORM 无法处理它。**一开始就对此进行优化是非常愚蠢的，因为它会分散您的注意力，使您无法创建能够吸引您正在优化的点击量的一小部分的出色产品。**（免责声明：我以前走过这条路。）

相反，DAL 的好处是您的**数据库访问变得总是明确的并且被限制在您希望它发生的某些地方。**例如，接收到要显示的模型对象的视图不会试图从数据库中加载某些内容，因为实际上这是控制器的工作。

将诸如业务逻辑、表示逻辑和数据库逻辑之类的东西分开通常也很好。很多时候，它会产生更好、更少错误的代码。另外：您可能会发现很难对依赖于从数据库加载的对象的任何代码进行单元测试。另一方面，使用 LINQ 创建一个“假”的内存数据访问层是微不足道的。

请记住，**这条规则也有例外**，例如由许多 ORM 生成的惰性属性，它们会在运行中加载关联的对象——即使在视图中调用也是如此。因此，重要的是您应该做出明智的决定，何时允许数据访问以及为什么。语法糖可能很有用，但如果您的团队不知道从 ORM 加载 20,000 个对象的性能影响，这将成为一个问题。

在使用任何 ORM 之前，[请先了解它是如何工作的](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)。

在 Active Record 风格的对象和 DAL 之间进行选择主要取决于品味、.NET 中的常见习语、团队习惯以及 DAL 最终可能不得不被替换的可能性。

**最后，`ViewModel`s 是另一种野兽。**

试着这样想它们：

1.  视图中不应该有任何比`if-then-else`.
2.  然而，在*展示*事物时往往*有*一些复杂的逻辑。 考虑分页、排序、在一个视图中组合不同的模型、了解 UI 状态。

 *这些是视图模型可以处理的事情。
在简单的情况下，它只是将几个不同的模型组合成一个“视图模型”：

```
class AddOrderViewModel {
    // So the user knows what is already ordered
    public IEnumerable<Order> PreviousOrders { get; set; }
    // Object being added (keeping a reference in case of validation errors)
    public Order CurrentOrder { get; set; }
} 
```

模型*只是数据*，控制器组合数据并引入一些逻辑来描述*要*在视图模型中显示的数据，而视图只是呈现视图模型。

视图模型也可以作为一种文档。他们回答了两个问题：

1.  **我可以在视图中使用哪些数据？**
2.  **我应该在控制器中准备哪些数据？**

不要将对象传递到`ViewData`并记住它们的名称和类型，而是使用[通用视图](https://stackoverflow.com/questions/1079035/using-asp-net-mvc-with-generic-views)并将内容放入`ViewModel`的属性中，这些属性是静态类型的，可用于 IntelliSense。

此外，您可能会发现创建`ViewModel`层次结构很有用（但不要走极端！）。例如，如果您的站点范围的导航从面包屑更改为其他内容，那么只需替换*基本视图模型*上的属性、显示它的*局部视图*以及在*基本控制器**中构造它的逻辑就*很酷。保持理智。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T13:56:28.203

模型代表您喜欢数据的结构，而不关心可能使用它的视图。模型的意图纯粹是表示结构的意图。

模型可能包含与使用它的视图无关的属性。

视图模型的设计考虑了视图。视图模型旨在与视图建立一对一的关系。视图模型仅包含其预期视图所需的基本字段和属性。

通常，您会让控制器联系存储库（在您的示例中为 DAL）获取数据，然后使用结果填充模型或视图模型，将其发送到视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T14:08:32.457

**模型（领域模型）**：是应用程序的核心，代表了最大和最重要的业务资产，因为它捕获了所有复杂的业务实体、它们的关系和它们的功能。

**ViewModel**：位于 Model 之上的是 ViewModel：ViewModel 的两个主要目标是 1\. 使 View 易于使用 Model 和 2\. 将 Model 与 View 分离和封装。

例如。

模型：

```
public class Product
{
...............
}

public class Category
{
...........
} 
```

视图模型：

```
public class ProductViewModel
    {
        public ProductViewModel(List<Product> products, List<Category> categories)
        {
            this.Products = products;
            this.Categories = categories;
        }

        public List<Product> Products { get; set; }
        public List<Category> Categories { get; set; }

    } 
```**

# python - 检查 isinstance 会出现奇怪的错误

> ID：10961454
> 
> 赞同：0
> 
> 时间：2012-06-09T13:29:22.507
> 
> 标签：python

当我在我的一个函数中对一个对象执行 isinstance 调用时，我遇到了一个奇怪的错误：

```
def subtotals_to_decimal_string(obj):
    """
    Converts subtotals to decimal strings
    """
    if isinstance(obj, list):
        for cr in obj:
            sub = cr['subtotal']
            cr['subtotal'] = Decimal(str(sub)).quantize(Decimal('0.01')).to_eng_string()
        return obj 
```

我得到的错误类似于这篇文章中的错误：http: [//bit.ly/MmkObr](http://bit.ly/MmkObr)

奇怪的是我能够在一个单独的 python 文件中执行这个调用。这是怎么回事？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:31:07.650

最有可能的是，您有一个名为 的全局变量`list`，它隐藏了内置的 name `list`。不要使用内置类的名称作为变量名（或者甚至更好，根本没有内置名称）。

# css - [selector] > * 真的那么慢吗

> ID：10961455
> 
> 赞同：4
> 
> 时间：2012-06-09T13:29:32.597
> 
> 标签：css, performance, css-selectors

所以我正在构建一组 JavaScript (jQuery) 小部件，我想确保这些小部件的所有元素都在使用`box-sizing: border-box`（是的，我知道这意味着我只能支持 8 或更高版本的 IE 版本我很好）。

现在我听说做 a`[selector] > *`很慢，但到底有多慢？

我的意思是对于其中一个小部件，我有这个选择器来确保所有元素都具有正确的框大小：

```
.jg-grid-wrap,
.jg-grid-content-outer-wrap,
.jg-grid-colum-actions a,
.jg-grid-content-wrap,
.jg-grid-wrap .hide,
.jg-grid-wrap ul,
.jg-grid-wrap ul li,
.jg-grid-header-wrap,
.jg-grid-header-wrap li,
.jg-grid-header-wrap .sort-indicator,
.jg-grid-row,
.jg-grid-row li,
.jg-grid-footer-wrap,
.jg-grid-footer-wrap .column-selection
.jg-grid-wrap .controls,
.jg-grid-wrap .controls .first-page-link,
.jg-grid-wrap .controls .previous-page-link,
.jg-grid-wrap .controls .next-page-link,
.jg-grid-wrap .controls .last-page-link,
.jg-grid-wrap .controls .column-selection-link,
.jg-grid-wrap .controls .set-page-link,
.jg-grid-wrap .controls .total-page-count,
.jg-grid-wrap .controls .record-counts,
.jg-grid-wrap .controls .record-display-text
{
    box-sizing: border-box;
} 
```

但是写起来会更小更容易：

```
.jg-grid-wrap *
{
    box-sizing: border-box;
} 
```

另外，如果我添加一个元素，我现在必须记住将它添加到带有星号的巨大选择器中，我不必担心它。

真的值得我花时间单独列出每个可能的元素，因为`[selector] > *`它真的那么慢吗？

**更新**

最后，我将继续：

```
[class^=jg-] *
{
    box-sizing: border-box;
} 
```

基于谷歌浏览器，这个选择器有大约 14% 的总 4 毫秒。其他的稍微小一点（~4%），但是考虑一下，CSS 将是我可能需要担心性能的最后一个地方（我的 javascript 和服务器端代码将成为瓶颈的主要部分）。如果我真的需要优化我的 CSS chrome 分析器，我需要它时就在那里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T13:35:49.853

如果你真的想要标记有该类的容器下的*所有元素，你会想要*

```
.jg-grid-wrap * 
```

运算符将`>`匹配限制为直接子级。

性能影响源于这样一个事实，即当以相关方式更新布局时，必须测试每个元素。您可以通过以下方式使它变得更好：

```
.jg-grid-wrap div, .jg-grid-wrap form, .jg-grid-wrap ul 
```

等等，以及您真正关心的任何块级元素。（也就是说，你真的关心你的`<span>`标签是否有“box-sizing”属性吗？）

Chrome 的 CSS 分析器对于查找昂贵的 CSS 规则非常有帮助。这应该是您在过分担心之前进行经验调查的事情；现代 CSS 引擎非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:58:07.107

当页面被（重新）绘制时，浏览器从右到左评估 CSS：

```
.jg-grid-wrap > * 
```

这基本上会首先匹配页面上的所有元素；然后它检查所有元素的直接祖先并比较类。

听起来很糟糕，但情况可能更糟：

```
.jg-grid-wrap * 
```

对于它下面的元素`.jg-grid-wrap`来说还不错，但是其他元素会导致浏览器一直遍历元素树`html`以找到祖先。

其中一些逻辑可以进行一些优化，但最好避免它。因此，诀窍是使 CSS 规则的最右侧部分尽可能具体。

所以我的结论是：不要管代码，人眼看来最佳的东西对于糟糕的浏览器可能是灾难性的:)

# ruby-on-rails - 如何从 Rails 应用程序中的任何位置访问 facebook.yml 凭据？

> ID：10961465
> 
> 赞同：1
> 
> 时间：2012-06-09T13:31:37.193
> 
> 标签：ruby-on-rails

在 Rails 3.2 应用程序中，我有一个 facebook.yml、twitter.yml 等，其中包含用于开发、生产、登台环境的相关令牌。

然后我有诸如

```
CONFIG = YAML.load_file(Rails.root.join("config/facebook.yml"))[Rails.env]
FB_APP_ID = CONFIG['app_id']
FB_SECRET = CONFIG['secret_key']
FB_NAMESPACE = CONFIG['name_space'] 
```

我应该如何以及在哪里设置这些方法，以便我可以从我的应用程序中的其他任何地方访问 FB_APP_ID：控制器、模型、视图等？

这是模块进来的地方吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T07:32:38.290

最后我创建了一个 config.yml 文件

```
development:
  facebook: 
    app_id:  #####
    secret: ###
  twitter:
    --
production:
  ---
etc 
```

添加了初始化程序/config.rb

```
CONFIG = YAML.load_file(Rails.root.join("config/config.yml"))[Rails.env]

module Facebook
  APP_ID = FB_CONFIG["facebook"]['app_id']
  SECRET = FB_CONFIG["facebook"]['secret']
end

module Twitter
  --
end 
```

现在我可以使用任何地方访问这些值

```
Facebook::APP_ID 
```

不确定这是否是最好的方法，但它现在有效。

# objective-c - 从一个类访问另一个从服务器接收消息的方法

> ID：10961469
> 
> 赞同：0
> 
> 时间：2012-06-09T13:31:47.880
> 
> 标签：objective-c, xcode, macos

如果您需要进一步的解释或详细信息，我会尽我所能解释，请发表评论..

我在我的计算机上运行了一个本地 python 服务器，它根据请求向客户端提供消息。

我有一个 MAC 客户端应用程序，其中有 3 个类 -

1.  Chatlogic 类——该类初始化连接并发送和接收来自服务器的消息。

2.  登录类 - 这维护用户对应用程序的登录，在这个类中我有一个 Chatlogic 类的实例，我可以通过这样的 chatlogic 类的对象发送消息 [chatLogicObject sendmessage: *something* ]

我的问题是这个=当我收到它时，它来自 chatLogic 类实例而不是 LoginClass 所以我在登录类中有一个名为 -(void)messageReceived 的方法，它应该覆盖 chatLogic 类中的相同方法（但这不会工作）。我如何在 Loginclass 中接收方法？

为了避免混淆，我添加了我的聊天逻辑类

```
#import <Foundation/Foundation.h>

@interface chatLogic : NSObject <NSStreamDelegate>

@property (copy)NSOutputStream *outputStream;
@property (copy)NSInputStream *inputStream;
@property (copy)NSString *streamStatus;

-(void)initNetworkCommunications;
-(void)sendMessage:(id)sender;
-(void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)streamEvent;
-(void)messageReceived:(NSString*)message;  //i want this method to be used in some other classes

@end 
```

实现文件如下

# 导入“chatLogic.h”

@实现聊天逻辑

@synthesize 输入流；@synthesize 输出流；@synthesize 流状态；

-（id）初始化{

```
if (self == [super init]) {

}
return self; 
```

}

-(void)initNetworkCommunications{

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"192.168.1.22", 80, &readStream, &writeStream);

inputStream = (__bridge NSInputStream *)readStream;
outputStream = (__bridge NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open]; 
```

}

-(void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)streamEvent{

```
switch (streamEvent) {
    case NSStreamEventOpenCompleted:
        NSLog(@"Stream opened");
        streamStatus = [[NSString alloc]initWithFormat:@"Stream opened"];
        break;
    case NSStreamEventHasBytesAvailable:
        if (aStream == inputStream) {

            uint8_t buffer[1024];
            int len;

            while ([inputStream hasBytesAvailable]) {

                len = (int)[inputStream read:buffer maxLength:sizeof(buffer)];
                if (len > 0) {
                    NSString *output = [[NSString alloc]initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                    if (nil != output) {
                        NSLog(@"server said: %@",output);
                        [self messageReceived:output];
                    }
                }
            }
        }
    case NSStreamEventErrorOccurred:
    {
        NSLog(@"cannot connect to the host!");
        break;

    }

    case NSStreamEventEndEncountered:
    {
        break;
    }

    default:
    {   
        NSLog(@"unknown event!!");
    }
} 
```

}

-(void)sendMessage:(id)sender{

}

-(void)messageReceived:(NSString*)message{

```
NSLog(@"the received message in chat logic class"); 
```

}

-(无效)dealloc{

```
[inputStream close];
[outputStream close];
[inputStream release];
[outputStream release];
[super dealloc]; 
```

}

@结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:13:52.753

我认为您希望在多个班级实例中收到相同的消息。最好的方法是使用 NSNotificationCentre。一旦在一个班级中收到消息，您就可以发布一个通知，然后所有注册该通知的听众都会听到该通知。e

委派也很好，但通常在您确定谁将成为听众时使用（我不确定您的情况发生了什么。）。希望这会有所帮助。

**更新：**

是的，您也可以发送一个包含一些信息的对象。您可以使用此链接[https://stackoverflow.com/a/4127535/919545查看如何发布带有对象的通知](https://stackoverflow.com/a/4127535/919545)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:45:56.807

如果我正确理解了所有内容，那么您在这里谈论的是委托。您应该使用 ( ) 之类的方法定义 ChatLogicDelegate 协议，`-(void)didReceiveMessage:(NSString*)message`向 ChatLogic 类添加委托属性，并在实例化它时将 loginClassObject 设置为*chatLogicObject**的*委托。在 ChatLogic 类中，在需要时调用，*loginClassObject*将获取消息。*`[delegate didReceiveMessage:json]`*

 **[Apple 关于委托的文档](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)**

# c# - 从名称作为变量传入的表中使用 simple.data 检索数据？

> ID：10961471
> 
> 赞同：2
> 
> 时间：2012-06-09T13:31:58.417
> 
> 标签：c#, simple.data

是否可以使用 simple.data 查询一个表，该表的表名是从其他地方传入的。

例如：

```
string tableToUse = "MyTable";
var test = db.tableToUse.All(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T13:43:19.943

是的，您可以将字符串索引器用于对象名称而不是动态属性：

```
string tableToUse = "MyTable";
var test = db[tableToUse].All(); 
```

这也适用于列名，所以你可以这样做：

```
var table = "MyTable";
var keyColumn = "Id";
int id = 42;
var entity = db[table].Find(db[table][keyColumn] == id); 
```

# java - 如何（在 Hadoop 中）将数据放入正确类型的 map 和 reduce 函数中？

> ID：10961474
> 
> 赞同：3
> 
> 时间：2012-06-09T13:32:31.430
> 
> 标签：java, hadoop, mapreduce

我对 Hadoop 中的数据如何放入地图和减少功能有一点难以理解。我知道我们可以定义输入格式和输出格式，然后定义输入和输出的键类型。但是举个例子，如果我们想要一个对象作为输入类型，Hadoop 在内部是如何做到的呢？

谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T22:27:41.990

您可以使用 Hadoop InputFormat 和 OutputFormat 接口来创建您的自定义格式..一个示例可能是将 MapReduce 作业的输出格式化为 JSON..类似这样的东西 -

```
public class JsonOutputFormat extends TextOutputFormat<Text, IntWritable> {
    @Override
    public RecordWriter<Text, IntWritable> getRecordWriter(
            TaskAttemptContext context) throws IOException, 
                  InterruptedException {
        Configuration conf = context.getConfiguration();
        Path path = getOutputPath(context);
        FileSystem fs = path.getFileSystem(conf);
        FSDataOutputStream out = 
                fs.create(new Path(path,context.getJobName()));
        return new JsonRecordWriter(out);
    }

    private static class JsonRecordWriter extends 
          LineRecordWriter<Text,IntWritable>{
        boolean firstRecord = true;
        @Override
        public synchronized void close(TaskAttemptContext context)
                throws IOException {
            out.writeChar('{');
            super.close(null);
        }

        @Override
        public synchronized void write(Text key, IntWritable value)
                throws IOException {
            if (!firstRecord){
                out.writeChars(",\r\n");
                firstRecord = false;
            }
            out.writeChars("\"" + key.toString() + "\":\""+
                    value.toString()+"\"");
        }

        public JsonRecordWriter(DataOutputStream out) 
                throws IOException{
            super(out);
            out.writeChar('}');
        }
    }
} 
```

# cuda - CUDA 计算能力之间有什么区别？

> ID：10961476
> 
> 赞同：35
> 
> 时间：2012-06-09T13:32:46.233
> 
> 标签：cuda

计算能力 2.0 比 1.3、2.1 比 2.0 和 3.0 比 2.1 增加了什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-09T14:34:17.250

计算能力指定不同的架构。一般来说，较新的架构运行 CUDA 程序和图形的速度都比以前的架构快。但请注意，上一代的高端卡可能比后一代的低端卡更快。

来自 CUDA C 编程指南（v6.0）：

![计算能力表](../Images/edb1140b737d6f499a42ddfaa690dc35.png)

# redirect - JSF2 使用 inputText 的值自动更新 commandButton 的重定向页面

> ID：10961477
> 
> 赞同：0
> 
> 时间：2012-06-09T13:32:51.890
> 
> 标签：redirect, button, jsf-2, input

我在 JSF 页面中有一个 inputText 和一个 commandButton。用户输入一些内容，然后在结果页面中被重定向，该页面也具有具有相同功能的 inputText 和 commandButton。commandButton 应该在单击并重定向到 REST url（结果页面）时执行一些操作，该 REST url 是通过将 inputText 值附加到基本 URL 来构建的。我尝试了很多东西，但我没有设法在第二页中完成这项工作。到目前为止我尝试的是：

1.  在 commandButton 的操作中，我调用我的方法，然后返回重定向的 URL，因为我的 bean 中有 inputText 值。我使用 AJAX 在 keyup 事件上呈现 commandButton。这适用于第 1 页，但不适用于第 2 页。问题是每次用户键入一个字母时，都会呈现按钮并调用我不想要的方法，因为我只想在用户单击按钮时调用它们.

2.  我在我的 bean 中创建了一个方法，我将所有方法都放入其中。我尝试创建 PostConstruct 方法并使用 preRenderView 使用 f:event 来调用该方法。同样，对于 AJAX，这不起作用，因为每次用户键入内容时都会调用该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:13:03.710

> *问题是每次用户键入一个字母时，都会呈现按钮并调用我不想要的方法，因为我只想在用户单击按钮时调用它们。*

只是不要渲染按钮。也许您在`<f:ajax render>`as 之类的属性中使用了过于笼统的客户端标识符`@form`。只需将其替换为不包括按钮的更具体的内容。

* * *

> *同样，对于 AJAX，这不起作用，因为每次用户键入内容时都会调用该方法。*

只需检查它是否不是 ajax 请求。

```
if (!FacesContext.getCurrentInstance().getPartialViewContext().isAjaxRequest()) { 
    // Not an ajax request.
} 
```

# java - 托管 bean 注销不起作用

> ID：10961480
> 
> 赞同：0
> 
> 时间：2012-06-09T13:33:05.810
> 
> 标签：java, session, jakarta-ee, managed-bean

在我的 java ee 应用程序中，我无法实现注销功能。当我尝试实现它时会发生这种情况：我有一个 header.xhtml，其中包含我的应用程序的 header css 部分：header.xhtml:(注销代码)

```
<div class="userid-link"><img src="images/app.png" alt=""/><p><a href="#{loginBean.logoutAction()}">Logout</a></p></div> 
```

注销代码：loginBean.java

```
 public String logoutAction()
    {
        HttpServletRequest req=(HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
try{
    HttpSession session=req.getSession();
    session.invalidate();
      //  req.logout();
        }
catch(Exception e)
        {

        }
        return"equityVolume.xhtml";
    } 
```

错误：

```
SEVERE: Error Rendering View[/ClientTemplate/userWatch.xhtml]
javax.el.ELException: /ClientTemplate/userWatch.xhtml @44,62 value="#{watchBean.ut}": java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)

...
INFO: Exception when handling error trying to reset the response.
java.lang.IllegalStateException: PWC3999: Cannot create a session after the response has been committed
    at... 
```

主页正确加载，但是当我尝试登录时，userWatch.xhtml 未正确呈现，并且出现上述错误，css 也未应用。

watchBean.java

```
 public List<UserTrack> getUt() {
        HttpServletRequest req=(HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
    HttpSession session=req.getSession();// debugged and found that the session is null, this methos executes after login i.e. on the userWatch.xhtml that is redirected after login from homePage
    this.uname=(String)session.getAttribute("uname");
        ut=getAllUserTrack(uname);
    return ut;
    } 
```

当我从 header.xhtml 中删除 logOutAction 方法调用时，一切正常，除了注销时出现 viewExpired 错误：

```
<div class="userid-link"><img src="images/app.png" alt=""/><p><a href="#/homePage">Logout</a></p></div> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T22:39:58.143

To invalidate session if your loginBean is a SessionScoped managed bean and logout method is a method of that managed bean:

```
public void logout() {
    // Invalidate session of a sessionscoped managed bean
    FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
    try {
        // Redirect to page you want after logout
        FacesContext.getCurrentInstance().getExternalContext().redirect("<INSERT HERE THE PAGE YOU WANT TO REDIRECT(just the name like 'homepage')");

    } catch (IOException ex) {
        Logger.getLogger(TravelerSession.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

You can either redirect to page you want on the method or return the name of the page you want to go. I think it's safer by doing in the method of the bean.

On the webpage you should have something like this:

```
<h:commandButton class="btn btn-info" action="#{loginBean.logout}" value="Log out" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:11:40.937

这是尝试在托管 bean 中调用方法的错误方法。你可能想要：

```
<h:commandLink action="#{loginBean.logoutAction()}" value="Logout" /> 
```

还有，你是怎么登录的？如果您使用自己的登录机制，那么使会话无效可能没问题，但如果您使用 web.xml 安全约束，那么您应该使用 Java EE 6 用于 servlet 的编程登录 API。

# android - 关闭应用程序中的先前页面

> ID：10961481
> 
> 赞同：0
> 
> 时间：2012-06-09T13:33:34.453
> 
> 标签：android, applicationpage

我正在制作一个大约有 5 个页面和一个起始屏幕的应用程序，我知道如果我`finish()`在该 `onPause()`方法中编写，一旦用户转到下一页，页面就会被破坏。

我的要求是我不希望 AppPage 1 被销毁，直到我到达应用程序的第 3 页，但是一旦用户进入应用程序的第 4 页，我想销毁所有的 1,2,3我的应用程序的 AppPages，以便通过单击后退按钮无法访问它们并直接到达我的应用程序的启动屏幕，我不会在应用程序启动时杀死它。

所以我想问一下，当用户点击第 3 页的转到下一页按钮时，是否有可能杀死我的应用程序的 1、2、3 页。

谢谢

==== 编辑 =====

开始屏幕 -> AppPage1 -> AppPage2 --> AppPage3 --> AppPage4 (Kill AppPage1,2,3 here, so if back is clicked user到达starting screen) --> Appage 5 (Kill AppPage4)

==== 编辑 2 =====

AppPage1.java

```
public class AppPage1 extends Activity{

Button goToAppPage2;
BroadcastReceiver logout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.apppage1);

    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction("com.closing.application.pages.AppPage1");

    logout = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
          finish();
        }
    };

    registerReceiver (logout, intentFilter);

    goToAppPage2 = (Button) findViewById(R.id.goToAppPage2);
    goToAppPage2.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent i1 = new Intent(AppPage1.this, AppPage2.class);
            startActivity(i1);
        }
    });  

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    unregisterReceiver(logout);
} 
```

}

AppPage2.java

```
public class AppPage2 extends Activity{

Button goToAppPage3;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.apppage2);

    Intent intent = new Intent("kill");
    intent.setType("spartan!!!");
    sendBroadcast(new Intent(this, AppPage1.class));

    goToAppPage3 = (Button) findViewById(R.id.goToAppPage3);
    goToAppPage3.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent i1 = new Intent(AppPage2.this, AppPage3.class);
            startActivity(i1);

        }
    });    
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:49:16.443

您可以通过广播消息来实现这一点。在活动依赖于用户登录的情况下，我自己使用它，所以当他注销时，所有这些活动都应该完成，只剩下登录屏幕。

首先，在应该完成的活动中注册广播。如果活动的数量很大，你可以从另一个可以扩展的地方创建一个父活动，这样你就不必重复这个代码这么多次了：

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction("com.example.ACTION_LOGOUT");
BroadcastReceiver logout = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
      finish();
    }
};
registerReceiver (logout, intentFilter); 
```

不要忘记取消注册它 onDestroy()：

```
unregisterReceiver(logout); 
```

当您希望完成之前的活动时发送广播：

```
Intent broadcastIntent = new Intent();
broadcastIntent.setAction("com.example.ACTION_LOGOUT");
sendBroadcast(broadcastIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:39:42.193

试试这个，

用于`startActivityForResult(intent,0)`从 Activity 1 调用 Activity 2 并在 Activity 1 中编写以下代码

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case 0:
            if (resultCode == RESULT_OK) {
                finish();
            }
        }
    } 
```

在活动 2 中进行类似操作，并使用`startActivityForResult`.

最后在调用 Activity 4 之前形成 Activity 3 你应该调用 just `finish()`。如果在Activity 3中调用finish()，`onActivityResult`前一个Activity编写的回调方法会被执行，它会自行完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:39:52.033

```
YourActivityName.this.finish();
                 ^^^^ 
```

试试这个，这将不允许用户回到那个活动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T14:12:42.563

您可以在第 4 页覆盖 onBackPressed() 方法，这样当用户按下后退键时，他将被强制返回主页或您需要的任何内容。

```
 public void onBackPressed() {
        //code here, like calling back the main page of your app
    } 
```

潜伏着我发现了这个问题，也许第三个答案可以帮助你：

[如何关闭我的应用程序的所有活动？](https://stackoverflow.com/questions/5453206/how-to-close-all-the-activities-of-my-application)

# haskell - Haskell：重复函数（+）和（++），mappend

> ID：10961483
> 
> 赞同：12
> 
> 时间：2012-06-09T13:34:03.223
> 
> 标签：haskell, operator-overloading, monads, typeclass, monoids

`(+)`并且`(++)`只是`mappend`; 我对吗？为什么需要它们？这是无用的重复，因为 Haskell 有这些强大的类型类和类型推断。假设我们为了视觉方便和打字增益而删除`(+)`和`(++)`重命名。`mappend` `(+)`对于初学者来说，编码会更直观、更短、更容易理解：

```
--old and new
1 + 2
--result
3

--old
"Hello" ++ " " ++ "World"
--new
"Hello" + " " + "World"
--result
"Hello World"

--old
Just [1, 2, 3] `mappend` Just [4..6]
--new
Just [1, 2, 3] + Just [4..6]
--result
Just [1, 2, 3, 4, 5, 6] 
```

（这让我做梦。）。对于一个坚持抽象和诸如 Haskell 之类的东西的美丽语言来说，为同一事物提供三个甚至更多的函数并不是一件好事。我还看到了与monad相同的重复：与, , , , ,`fmap`是否相同或几乎相同... Haskell 委员会是否对此有所计划？它会破坏一些代码，但我听说，虽然我不确定，有一个即将到来的版本会有很大的变化，这是一个很好的机会。太可惜了……至少，叉子买得起吗？`map``(.)``liftM``mapM``forM``fmap`

**编辑** 在我读到的答案中，有一个事实是，对于数字，要么适合，`(*)`要么`(+)`适合`mappend`. 事实上，我认为这`(*)`应该是的一部分`Monoid`！看：

目前，忘记功能`mempty`和`mconcat`，我们只有`mappend`.

```
class Monoid m where
    mappend :: m -> m -> m 
```

但我们可以这样做：

```
class Monoid m where
    mappend :: m -> m -> m
    mmultiply :: m -> m -> m 
```

它会（也许，我对此还不够了解）的行为如下：

```
3 * 3
mempty + 3 + 3 + 3
0 + 3 + 3 + 3
9

Just 3 * Just 4
Just (3 * 4)
Just (3 + 3 + 3 +3)
Just 12

[1, 2, 3] * [10, 20, 30]
[1 * 10, 2 * 10, 3 * 10, ...]
[10, 20, 30, 20, 40, 60, ...] 
```

实际上 'mmultiply' 只会根据 'mappend' 来定义，所以对于`Monoid`没有必要重新定义它的实例！然后`Monoid`更接近数学；也许我们也可以在课堂上添加`(-)`和`(/)`！如果这行得通，我认为它将解决`Sum`and`Product`以及函数重复的情况：`mappend`变得`(+)`和新`mmultiply`的只是`(*)`. 基本上我建议用“上拉”重构代码。哦，我们还需要一个新`mempty`的 for `(*)`。我们可以将这些运算符抽象到一个类中`MonoidOperator`并定义`Monoid`如下：

```
class (Monoid m) => MonoidOperator mo m where
    mempty :: m
    mappend :: m -> m -> m

instance MonoidOperator (+) m where
    mempty = 0
    mappend = --definition of (+)

instance MonoidOperator (*) where
    --...

class Monoid m where
    -... 
```

好吧，我还不知道该怎么做，但我认为所有这些都有一个很酷的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T14:57:39.130

您正在尝试在这里混合一些不同的概念。

算术和列表连接是非常实用的直接操作。如果你写：

```
[1, 2] ++ [3, 4] 
```

...你知道你会得到`[1, 2, 3, 4]`结果。

* * *

[Monoid](http://en.wikipedia.org/wiki/Monoid)是一个更抽象的数学代数概念。这意味着这`mappend`不一定是字面意思“将这个附加到那个；” 它可以有许多其他含义。当你写：

```
[1, 2] `mappend` [3, 4] 
```

...这些是该操作可能产生的一些有效结果：

```
[1, 2, 3, 4] -- concatenation, mempty is []

[4, 6]       -- vector addition with truncation, mempty is [0,0..]

[3, 6, 4, 8] -- some inner product, mempty is [1]

[3, 4, 6, 8] -- the cartesian product, mempty is [1]

[3, 4, 1, 2] -- flipped concatenation, mempty is []

[]           -- treating lists like `Maybe a`, and letting lists that
             -- begin with positive numbers be `Just`s and other lists
             -- be `Nothing`s, mempty is [] 
```

为什么`mappend`for 列表只是连接列表？因为这只是编写 Haskell 报告的人选择作为默认实现的 monoid 的定义，可能是因为它对列表的所有元素类型都有意义。实际上，您可以通过将列表包装在各种新类型中来为列表使用替代的 Monoid 实例；例如，对于列表执行笛卡尔积，有一个替代的 Monoid 实例。

“Monoid”的概念在数学中具有固定的含义和悠久的历史，在 Haskell 中更改其定义将意味着偏离数学概念，这是不应该发生的。Monoid 不仅仅是对空元素和（字面）追加/连接操作的描述；它是遵循 Monoid 提供的接口的广泛概念的基础。

* * *

您正在寻找的概念特定于数字（因为您无法为所有实例定义类似`mmultiply`或可能`mproduce`/的东西），这是一个已经存在的概念，在数学中称为[Semiring](http://en.wikipedia.org/wiki/Semiring)（好吧，您并没有真正涵盖您的问题中的关联性，但无论如何您在示例中的不同概念之间跳跃-有时坚持关联性，有时不坚持-但总体思路是相同的）。`mproduct``Maybe a`

Haskell 中已经有 Semirings 的实现，例如在[`algebra`](http://hackage.haskell.org/packages/archive/algebra/latest/doc/html/Numeric-Algebra.html#t:Semiring)包中。

但是，Monoid 通常不是半环，特别是对于实数，除了加法和乘法之外，还有多种半环的实现。不应该仅仅因为它“会很整洁”或“会节省一些击键次数”而向定义非常明确的类型类（如 Monoid）添加广泛的通用添加；`(++)`我们有，`(+)`并且`mappend`作为单独的概念是有原因的，因为它们代表了完全不同的计算思想。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-09T15:07:04.760

**将 mappend 重命名为`(+)`/`(*)`**

虽然`(+)`和`(*)`都是幺半群，但它们有额外的分配律*，*将这两个操作联系起来，以及*抵消*律，例如 0*x = 0。本质上，`(+)`并`(*)`形成一个[环](http://en.wikipedia.org/wiki/Ring_%28mathematics%29)。其他类型的两个幺半群可能不满足这些环（甚至更弱的半环）属性。`(+)`运算符的命名`(*)`暗示了它们的附加（相互关联）属性。因此，我会避免通过重命名`mappend`来颠覆传统的数学直觉，`+`或者`*`因为这些名称暗示了可能不具备的附加属性。有时过多的重载（即过多的概括）会导致直觉的丧失，从而导致可用性的丧失。

如果您确实有两个形成某种环的幺半群，那么您可能希望从中派生一个实例`Num`，因为名称“ `+`”和“ `*`”暗示了其他属性。

**关于合并 (++) 和 mappend**

重命名`mappend`为`(++)`可能更合适，因为`(++)`. 事实上，由于列表是*自由幺半群*（即没有附加属性的幺半群），那么使用传统的列表连接运算符`(++)`来表示幺半群的二元运算似乎不是一个糟糕的主意。

**关于为一种类型定义多个幺半群**

正如您所指出的，两者`(+)`都是`(*)`幺半群，但两者都不能成为`Monoid`相同类型的实例`t`。您提供一半的一种解决方案是在类中添加一个额外的类型参数`Monoid`来区分两个幺半群。请注意，类型类只能按类型参数化，而不是您在问题中显示的表达式。一个合适的定义是这样的：

```
class Monoid m variant where
 mappend :: variant -> m -> m -> m
 mempty :: variant -> m

data Plus = Plus
data Times = Times

instance Monoid Int Plus where
    mappend Plus x y = x `intPlus` y
    mempty = 0

instance Monoid Int Times where
    mappend Times x y = x `intTimes` y
    mempty = 1

(+) = mappend Plus
(*) = mappend Times 
```

为了将`mappend`/的应用程序`mempty`解析为特定的操作，每个都必须采用一个值来见证指示特定 monoid “变体”的类型。

旁白：你的问题的标题提到`mconcat`。这是一个完全不同的操作`mappend`-`mconcat`是从自由幺半群到一些其他幺半群的幺半群同态，即用 mappend 替换*cons* *，*用 mempty替换*nil*。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T15:02:07.173

如果您查看 Hackage，您会发现[许多](http://hackage.haskell.org/package/numeric-prelude) [旨在](http://hackage.haskell.org/package/yap)[解决](http://hackage.haskell.org/package/simpleprelude)[这些](http://hackage.haskell.org/package/ClassyPrelude)[问题](http://hackage.haskell.org/package/gofer-prelude)[的](http://hackage.haskell.org/package/prelude-plus)[替代](http://hackage.haskell.org/package/np-extras) [Prelude](http://hackage.haskell.org/package/prelude-extras) [实现](http://hackage.haskell.org/package/prelude-generalize) 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-09T13:48:57.147

那么有两个用于数字的 Monoids -你`Product`会`Sum`如何处理呢？

> 对于一门坚持抽象和诸如 Haskell 之类的东西的美丽语言来说，为同一事物提供三个甚至更多的函数并不是一件好事。

抽象不是为了消除代码重复。算术和 Monoid 操作是两种不同的想法，尽管它们共享相同的语义，但合并它们并没有任何好处。

# python - python中的变量范围

> ID：10961484
> 
> 赞同：1
> 
> 时间：2012-06-09T13:34:53.840
> 
> 标签：python, variables, scope

我的问题可能很简单，但我真的不知道我哪里出错了。我想将一个变量从一个函数传递给另一个函数。因此，我使用 return 但我总是收到一条错误消息，即我的变量未定义。

我的代码是：

```
url = "http://www.419scam.org/emails/2004-01/30/001378.7.htm"

def FirstStrike(url):
    ...
    return tokens

def analyze(tokens):
    ...

if __name__ == "__main__":
    FirstStrike(url)
    analyze(tokens) 
```

如果我运行它，我会收到一条错误消息：NameError: name 'tokens' is not defined。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T13:37:11.617

运行代码时，您尚未将结果分配`FirstStrike`给变量：

```
if __name__ == "__main__":
    tokens = FirstStrike(url)
    analyze(tokens) 
```

这是必要的，因为 else`tokens`在您调用时未定义`analyze`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T13:38:18.843

```
tokens = FirstStrike(url) 
```

您必须在调用 analyze(tokens) 之前将 FirstStrike 返回值分配给 tokens 变量

# objective-c - 在 Cocoa 中同时显示多个工具提示

> ID：10961485
> 
> 赞同：0
> 
> 时间：2012-06-09T13:35:16.693
> 
> 标签：objective-c, macos, cocoa, tooltip

我想在我的 Mac 应用程序中添加一项功能，灵感来自 iPhoto for iPad 中的帮助模式，如下图所示。我很想使用内置 API 来做到这一点，所以我不必构建自己的类似工具提示的视图。我有什么办法可以同时显示多个工具提示，或者使用 实现类似的东西`NSHelpManager`？

![iPhoto 帮助](../Images/4aa62d9ca6a68d5d38192dc40b683855.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:26:00.217

如果您的目标是 10.7 或更高版本，您可以使用`NSPopover`. 您将不得不创建相当多的弹出窗口，但这并不难。

# javascript - 用于用多个替换文本的 Javascript 和正则表达式

> ID：10961486
> 
> 赞同：0
> 
> 时间：2012-06-09T13:35:18.137
> 
> 标签：javascript, regex

我想用正则表达式替换一些单词。

例如：

```
var str ="hello world |bo hello world bo| hello world  |co hello world co| hello world,hello world |jp hello world hello world jp| "

var n=str.replace("world","stackoverflow"); 
```

但是 , 里面的内容`|bo ... bo|`不`|co ... co|`应该`|jp ... jp|`修改 world 到 stackoverflow。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:38:13.577

用于`/g`表示全局替换：

```
var n=str.replace(/world/g,"stackoverflow"); 
```

这是一个要演示[的工作小提琴。](http://jsfiddle.net/7dKU5/)

**附加信息**

查看[MDN 以获取](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)有关 RegEx 标志的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:49:13.030

考虑一下，它将“bb”替换为“xx”，但当“bb”被“a”包围时则不然。

```
t = "bb abba bb abba bb";
t = t.replace(/(?!a)bb(?!a)/g, "xx");
// t === "xx abba xx abba xx" 
```

# file - 通过 FTP 将数据传输到文件夹名称中包含空格

> ID：10961491
> 
> 赞同：4
> 
> 时间：2012-06-09T13:36:09.430
> 
> 标签：file, file-upload, ftp

如何使用 FTP 通过命令提示符上传到远程目录。

当我尝试使用命令连接时，目录名称为“TEST DIR”

```
ftp>cd TEST DIR
it is throwing no such directory found error 
```

请建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T13:49:07.607

尝试用引号 (") 将您的目录括起来，如下所示：

> cd“测试目录”

# java - 带有富客户端框架的 Spring MVC

> ID：10961494
> 
> 赞同：2
> 
> 时间：2012-06-09T13:37:24.010
> 
> 标签：java, spring, model-view-controller, primefaces, richfaces

我有几个应用程序，其结构如下

```
DataComponent

WebComponent
ThickClientComponent
WebServices 
```

DataComponent 具有访问应用程序数据所需的所有功能，因此它包含 DAO 和 JPA 实体。其他三个模块是：

*   WebComponent - 一个使用 DataComponent 进行数据访问的 Spring MVC 应用程序
*   ThickClientComponent - 使用 DataComponent 进行数据访问的 Swing 应用程序
*   WebServices - 基于 SOAP 的服务，也使用 DataComponent。

所有三个项目都将 DataComponent 作为其 Maven POM 文件中的依赖项。

我想使用 RichFaces、icefaces 或 primefaces 等富客户端框架，因为我需要能够使用富客户端框架中提供的丰富组件（即树、面板、拖放等）。

我环顾四周，似乎找不到 Spring MVC 应用程序使用富客户端平台的示例。是否可以？富客户端平台是否是一个框架，意味着我必须使用 Spring MVC 或富客户端平台，但不能同时使用两者？

DataComponent 模块是基于弹簧的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:00:03.130

也许这个模块会帮你解决：

[http://static.springsource.org/spring-webflow/docs/2.0-m1/reference/spring-faces.html](http://static.springsource.org/spring-webflow/docs/2.0-m1/reference/spring-faces.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T16:35:15.997

您可以尝试使用 ext-js 创建客户端界面。它大量基于 java 脚本/ajax，但这可能会满足您的需求。它并不真正关心您支持的技术是什么，因为它完全通过 javascript 和 ajax 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T05:52:33.640

我建议你去[GWT](https://developers.google.com/web-toolkit/)。它是一个非常好的富客户端框架，它有大量可用的组件，包括拖放。它还提供与 Spring Framework 的集成。您可以查看[此](http://technophiliac.wordpress.com/2008/08/24/giving-gwt-a-spring-in-its-step/)链接和[此](http://forum.springsource.org/showthread.php?74460-Spring4gwt-fresh-approach-at-Spring-GWT-integration)链接以了解有关其集成的更多信息。

我还在我的一个项目中使用**了 smartGWT**，它是 GWT 组件的扩展，该项目在 Spring 框架中有后端。

希望这对您有所帮助。干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T15:57:30.653

是的，您可以将 Spring MVC 与 PrimeFaces 一起使用，但您必须将它与 spring JSF 2 实现一起使用。

如果您正在考虑使用某些人脸框架，请务必使用 PrimeFaces。

您可以将 SpringMVC 与 JSF 一起使用，但我也建议您不要使用 SpringMVC JSF 实现。将 MyFaces JSF 2 实现与 Primefaces 一起使用，然后将支持 bean 与 spring 链接。

根据我的经验，这是最好的。

但我想任何其他选择也很好。

# lua - Lua 读取文本文件到数组

> ID：10961501
> 
> 赞同：1
> 
> 时间：2012-06-09T13:38:17.123
> 
> 标签：lua

我怎样才能读取这样的文件：

```
11111
10001
10001
10001
11111 
```

对于这样的二维数组：

```
{{1, 1, 1, 1, 1},
 {1, 0, 0, 0, 1},
 {1, 0, 0, 0, 1},
 {1, 0, 0, 0, 1},
 {1, 1, 1, 1, 1}} 
```

在卢亚？

这是我想到的：

```
for i = 1, number_of_lines do
  current_line = map_file:read("*line")
  character_array = {}
  for i = 1, #current_line do
    table.insert(character_array, current_line[i])
  end
end 
```

但是，我不知道如何获取“number_of_lines”，即使用 Lua 的文本文件中的行数。我该怎么做？

另外，如果有其他更简单的方法，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T15:06:21.263

您不需要获取行数。继续前进，直到你用完线。

```
local line_data = {}
for line in map_file:lines() do
  local character_array = {}
  for i = 1, #line do
    character_array[#character_array + 1] = line[i];
  end
  line_data[#line_data + 1] = character_array
end 
```

# c++ - SSA 表单在多大程度上允许具有非平凡复制的类型？

> ID：10961506
> 
> 赞同：0
> 
> 时间：2012-06-09T13:39:30.907
> 
> 标签：c++, llvm, ssa

我一直在研究使用 SSA 指定的 IR 代码，尤其是以这种形式生成 LLVM IR。但是，我很困惑当呈现具有非平凡复制语义的类型时这是否有效。例如，

```
void f() {
    std::string s = "Too long for you, short string optimization!";
    std::string s1 = s + " Also, goodbye SSA.";
    some_other_function(s1);
} 
```

在这种 SSA 形式中，至少在最明显的层面上，这会导致令人讨厌的副本混乱（即使对于 C++）。LLVM 之类的优化器真的可以准确地优化这种情况吗？SSA 是否适用于具有非平凡复制/分配/等语义的类型？

编辑：问题是，如果我使用 LLVM SSA 寄存器来表示复杂类型（在本例`std:string`中`+=`为并避免讨厌的副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:56:41.287

SSA 表示单一静态分配。这是一种处理应用于寄存器的值语义的方法。每个对象都是一个机器指令的结果。

LLVM 提供了一个通用的“移动”指令，这很有用，因为在整个架构范围内有许多指令可以移动 8、32、N 个字节。它还提供结构化数据类型和数组，因为将这些东西提升到寄存器很有用，并且它们可用于表示古怪的高级机器构造。目的不是为 OOP 建模。

# html - 不工作边界半径 IE8

> ID：10961510
> 
> 赞同：2
> 
> 时间：2012-06-09T13:40:06.777
> 
> 标签：html, internet-explorer-8, css

为了在 IE8 中实现边界半径，我使用了**border-radius.htc**

正确工作的块realzovat边界半径：

```
.mc-button
{
    -moz-transition: all 0.218s ease 0s;
    -moz-user-select: none;
    background-color: #CBCBCB;
    background-image: -moz-linear-gradient(center top , #CBCBCB, #DCDCDC);
    border: 1px solid #DCDCDC;
    color: #FFFFFF;
    cursor: default;
    display: inline-block;
    font-size: 11px;
    font-weight: bold;
    height: 29px;
    line-height: 29px;
    min-width: 70px;
    padding: 0 8px !important;
    text-align: center;
    overflow: visible;
    font-family: inherit;
    font-size: inherit;
    float: left;
    text-decoration: none;
    display: block;
    -webkit-border-radius: 5px;
    -khtml-border-radius: 5px;
    -moz-outline-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    font-family: Arial, Sans-Serif !important;
    behavior:url(Content/border-radius.htc);
} 
```

根据附件列表**-border-radius.htc**连接到页面

你能告诉我如何解决这个问题吗？

**更新（2012 年 6 月 13 日）**

如果代码被按钮替换：

```
.mc-button
{
    border: 1px solid #696;
    height: 29px;
    line-height: 29px;
    min-width: 70px;
    text-align: center;
    padding: 0 8px !important;
    overflow: visible;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    float: left;
    display: block;
    background: #00ADEE;
    background: -webkit-gradient(linear, 0 0, 0 bottom, from(#00ADEE), to(#0078A5));
    background: -webkit-linear-gradient(#00ADEE, #0078A5);
    background: -moz-linear-gradient(#00ADEE, #0078A5);
    background: -ms-linear-gradient(#00ADEE, #0078A5);
    background: -o-linear-gradient(#00ADEE, #0078A5);
    background: linear-gradient(#00ADEE, #0078A5);
    -pie-background: linear-gradient(#00ADEE, #0078A5);
    behavior: url("Content/PIE.htc");
} 
```

并声明为：

```
<a id="login_button" class="mc-button mc-button-submit ">SomeText</a>

.mc-button-submit
{
    border: 0px solid #0076A3;
    background: #00ADEE;
    background: -webkit-gradient(linear, 0 0, 0 bottom, from(#00ADEE), to(#0078A5));
    background: -webkit-linear-gradient(#00ADEE, #0078A5);
    background: -moz-linear-gradient(#00ADEE, #0078A5);
    background: -ms-linear-gradient(#00ADEE, #0078A5);
    background: -o-linear-gradient(#00ADEE, #0078A5);
    background: linear-gradient(#00ADEE, #0078A5);
    -pie-background: linear-gradient(#00ADEE, #0078A5);
    color: #FFFFFF;
    text-align: center;
} 
```

四舍五入就消失了。添加到**.mc-button-submit**行**行为： url ("Content / PIE.htc");** 没有帮助。

你能告诉我如何连接第二个类和背景的参数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:47:18.307

独立**的 .htc** hack 不能同时用于背景`gradient`和`border-radius`两者。

尝试`gradient`用简单的图像替换 css。这个技巧会奏效。

你也可以使用[css3pie](http://css3pie.com/)（感谢@dop-trois）——这个纯 Javascript 工具比独立`.htc`文件更完美。

**PS。**Inset`box-shadow`无法在两种解决方案中实现。

**PPS：**您需要的代码在这里：（我对其进行了一些更改以使其更有效和正确）：

```
.mc-button {
    font: bold 11px/29px Arial, Helvetica, sans-serif !important;
    text-align: center;
    text-decoration: none;
    color: #FFFFFF;

    border: 1px solid #DCDCDC;
    height: 29px;
    min-width: 70px;
    padding: 0 8px !important;
    overflow: visible;
    display: block;

    float: left;

    /* Unique link for this gradient — http://www.colorzilla.com/gradient-editor/#cbcbcb+0,dcdcdc+100;Custom */
    background-color: #CBCBCB;
    background: -moz-linear-gradient(top,  rgba(203,203,203,1) 0%, rgba(220,220,220,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(203,203,203,1)), color-stop(100%,rgba(220,220,220,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(203,203,203,1) 0%,rgba(220,220,220,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(203,203,203,1) 0%,rgba(220,220,220,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(203,203,203,1) 0%,rgba(220,220,220,1) 100%); /* IE10+ */
    background: linear-gradient(top,  rgba(203,203,203,1) 0%,rgba(220,220,220,1) 100%); /* W3C */

    /* css3 stuff below: (via css3please.com) */
    /* no one prefix except `-webkit` is needed nowadays for `border-radius` */
    -webkit-border-radius: 5px;
            border-radius: 5px;
    -webkit-transition: all 0.218s ease-out;
       -moz-transition: all 0.218s ease-out;
        -ms-transition: all 0.218s ease-out;
         -o-transition: all 0.218s ease-out;
            transition: all 0.218s ease-out;

    /* PIE specific accordingly http://css3pie.com/documentation/q-and-a/ */
    behavior: url(PIE.htc);
} 
```

### 您应该确保已`PIE.htc`正确包含（重要！）

### 相关问题

*   [在 IE8 中使用 CSS3Pie htc 作为边框半径](https://stackoverflow.com/questions/4326363/using-css3pie-htc-for-border-radius-in-ie8)
*   [CSS3 PIE - 给 IE 边框半径支持不起作用？](https://stackoverflow.com/questions/3522145/css3-pie-giving-ie-border-radius-support-not-working/)
*   [CSS3 PIE - 给 IE 边框半径支持不起作用？](https://stackoverflow.com/questions/3522145/css3-pie-giving-ie-border-radius-support-not-working/)

因此，回答可能的问题可能是 mime 类型（“text/x-component”）。

也可能的解决方案是：

```
position: relative;
z-index: 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T14:00:23.880

要应用渐变和边框半径，我推荐**[CSS3 Pie](http://css3pie.com/)**。这是我所知道的**最强大的工具**，可以在 IE 中应用 CSS3 属性。

### 在 IE 中应用渐变）：

```
#myElement {
    background: #CCC; /*fallback for non-CSS3 browsers*/
    background: -webkit-gradient(linear, 0 0, 0 100%, from(#CCC) to(#EEE)); /*old webkit*/
    background: -webkit-linear-gradient(#CCC, #EEE); /*new webkit*/
    background: -moz-linear-gradient(#CCC, #EEE); /*gecko*/
    background: -ms-linear-gradient(#CCC, #EEE); /*IE10*/
    background: -o-linear-gradient(#CCC, #EEE); /*opera 11.10+*/
    background: linear-gradient(#CCC, #EEE); /*future CSS3 browsers*/
    -pie-background: linear-gradient(#CCC, #EEE); /*PIE*/
    behavior: url(PIE.htc);
}​ 
```

### 在 IE 中应用边框半径）：

```
#myAwesomeElement {
    border: 1px solid #999;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    behavior: url(path/to/PIE.htc);
}​ 
```

你需要 PHP 才能让它工作。

CSS3 Pie 网站上的**[现场演示。](http://css3pie.com/)**

顺便说一句：使用此工具可以同时应用边框半径和渐变；）

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T10:52:56.400

要应用渐变、框阴影和边框半径，我推荐 CSS3 Pie。我在 cook&smile 项目中使用了它，它完全可以在 IE 中运行。

```
*{ behavior:url(path/PIE.htc);}

.border_radius_div{ position:relative; -webkit-border-radius: 10px; -moz-border-radius: 10px;  border-radius: 10px;}

.gradient_div{ position:relative; 
background: #EEFF99;
background: -webkit-gradient(linear, 0 0, 0 bottom, from(#EEFF99), to(#66EE33));
background: -webkit-linear-gradient(#EEFF99, #66EE33);
background: -moz-linear-gradient(#EEFF99, #66EE33);
background: -ms-linear-gradient(#EEFF99, #66EE33);
background: -o-linear-gradient(#EEFF99, #66EE33);
background: linear-gradient(#EEFF99, #66EE33);
-pie-background: linear-gradient(#EEFF99, #66EE33); } 
```

访问此网站以进一步探索自己。

[http://css3pie.com](http://css3pie.com/)

笔记：

1.  不要忘记在我们使用边框半径、渐变和框阴影的地方使用位置（相对或绝对）。

2.  不要忘记使用`behavior:url(xhtml_folder/PIE.htc);`

3.  重要的是不要忘记将 PIE.htc 放在 xhtml 文件夹中。

# r - 合并多个 CSV 文件并删除 R 中的重复项

> ID：10961512
> 
> 赞同：5
> 
> 时间：2012-06-09T13:40:26.733
> 
> 标签：r, csv, merge, duplicates

我有近 3.000 个格式相同的 CSV 文件（包含推文），我想将这些文件合并到一个新文件中并删除重复的推文。我遇到过讨论类似问题的各种主题，但是文件数量通常很少。我希望您能帮助我在 R 中编写代码，以高效且有效地完成这项工作。

CSV 文件具有以下格式：

CSV 格式的图像： ![CSV 文件示例](../Images/0aa87d073ded48574d127c5a0687810c.png)

我将（在第 2 列和第 3 列中）用户名（在 Twitter 上）更改为 AE，将“实际名称”更改为 A1-E1。

原始文本文件：

```
"tweet";"author";"local.time"
"1";"2012-06-05 00:01:45 @A (A1):  Cruijff z'n met-zwart-shirt-zijn-ze-onzichtbaar logica is even mooi ontkracht in #bureausport.";"A (A1)";"2012-06-05 00:01:45"
"2";"2012-06-05 00:01:41 @B (B1):  Welterusten #BureauSport";"B (B1)";"2012-06-05 00:01:41"
"3";"2012-06-05 00:01:38 @C (C1):  Echt ..... eindelijk een origineel sportprogramma #bureausport";"C (C1)";"2012-06-05 00:01:38"
"4";"2012-06-05 00:01:38 @D (D1):  LOL. \"Na onderzoek op de Fontys Hogeschool durven wij te stellen dat..\" Want Fontys staat zo hoog aangeschreven? #bureausport";"D (D1)";"2012-06-05 00:01:38"
"5";"2012-06-05 00:00:27 @E (E1):  Ik kijk Bureau sport op Nederland 3\. #bureausport  #kijkes";"E (E1)";"2012-06-05 00:00:27" 
```

不知何故，我的标题搞砸了，他们显然应该向右移动一列。每个 CSV 文件最多包含 1500 条推文。我想通过检查第二列（包含推文）来删除重复项，因为它们应该是唯一的并且作者列可以相似（例如，一位作者发布多条推文）。

是否可以将合并文件和删除重复文件结合起来，或者这是在自找麻烦，是否应该将进程分开？作为起点，我在 Hayward Godwin 的两个博客中包含了两个链接，其中讨论了合并 CSV 文件的三种方法。

[http://psychwire.wordpress.com/2011/06/03/merge-all-files-in-a-directory-using-r-into-a-single-dataframe/](http://psychwire.wordpress.com/2011/06/03/merge-all-files-in-a-directory-using-r-into-a-single-dataframe/)

[http://psychwire.wordpress.com/2011/06/05/testing-different-methods-for-merging-a-set-of-files-into-a-dataframe/](http://psychwire.wordpress.com/2011/06/05/testing-different-methods-for-merging-a-set-of-files-into-a-dataframe/)

显然，这个站点上也有一些与我的问题相关的主题（例如[Merging multiple csv files in R](https://stackoverflow.com/questions/10209056/merging-multiple-csv-files-in-r)），但我没有找到任何讨论合并和删除重复项的内容。我真的希望你能帮助我和我有限的 R 知识应对这个挑战！

尽管我尝试了一些在网上找到的代码，但这实际上并没有产生输出文件。大约 3.000 个 CSV 文件具有上述格式。我的意思是尝试了以下代码（用于合并部分）：

```
filenames <- list.files(path = "~/")
do.call("rbind", lapply(filenames, read.csv, header = TRUE)) 
```

这会导致以下错误：

```
Error in file(file, "rt") : cannot open the connection 
In addition: Warning message: 
In file(file, "rt") : 
  cannot open file '..': No such file or directory 
```

**更新**

我尝试了以下代码：

```
 # grab our list of filenames
 filenames <- list.files(path = ".", pattern='^.*\\.csv$')
 # write a special little read.csv function to do exactly what we want
 my.read.csv <- function(fnam) { read.csv(fnam, header=FALSE, skip=1, sep=';',     col.names=c('ID','tweet','author','local.time'), colClasses=rep('character', 4)) }
 # read in all those files into one giant data.frame
 my.df <- do.call("rbind", lapply(filenames, my.read.csv))
 # remove the duplicate tweets
 my.new.df <- my.df[!duplicated(my.df$tweet),] 
```

但我遇到以下错误：

在第三行之后，我得到：

```
 Error in read.table(file = file, header = header, sep = sep, quote = quote,  :  more columns than column names 
```

在第 4 行之后，我得到：

```
 Error: object 'my.df' not found 
```

我怀疑这些错误是由 csv 文件的写入过程中的一些失败引起的，因为有些情况下 author/local.time 在错误的列中。在他们应该在的位置的左侧或右侧，这会导致额外的列。我手动调整了 5 个文件，并在这些文件上测试了代码，我没有收到任何错误。然而，它似乎什么也没发生。我没有从 R 得到任何输出？

为了解决额外的列问题，我稍微调整了代码：

```
 #grab our list of filenames
 filenames <- list.files(path = ".", pattern='^.*\\.csv$')
 # write a special little read.csv function to do exactly what we want
 my.read.csv <- function(fnam) { read.csv(fnam, header=FALSE, skip=1, sep=';',   col.names=c('ID','tweet','author','local.time','extra'), colClasses=rep('character', 5)) }
 # read in all those files into one giant data.frame
 my.df <- do.call("rbind", lapply(filenames, my.read.csv))
 # remove the duplicate tweets
 my.new.df <- my.df[!duplicated(my.df$tweet),] 
```

我在所有文件上都尝试了这段代码，虽然 R 显然开始处理，但我最终得到了以下错误：

```
 Error in read.table(file = file, header = header, sep = sep, quote = quote,  : more columns than column names
 In addition: Warning messages:
 1: In read.table(file = file, header = header, sep = sep, quote = quote,  : incomplete final line found by readTableHeader on 'Twitts -  di mei 29 19_22_30 2012 .csv'
 2: In read.table(file = file, header = header, sep = sep, quote = quote,  : incomplete final line found by readTableHeader on 'Twitts -  di mei 29 19_24_31 2012 .csv'

 Error: object 'my.df' not found 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T15:55:47.333

首先，通过位于文件所在的文件夹中来简化问题，并尝试将模式设置为仅读取文件结尾为“.csv”的文件，例如

```
filenames <- list.files(path = ".", pattern='^.*\\.csv$')
my.df <- do.call("rbind", lapply(filenames, read.csv, header = TRUE)) 
```

这应该会为您提供一个包含所有推文内容的 data.frame

一个单独的问题是 csv 文件中的标题。谢天谢地，你知道所有文件都是相同的，所以我会处理这样的事情：

```
read.csv('fred.csv', header=FALSE, skip=1, sep=';',
    col.names=c('ID','tweet','author','local.time'),
    colClasses=rep('character', 4)) 
```

NB。已更改，因此所有列都是字符，并且 ';' 分开的

如果需要，我会稍后解析时间...

另一个单独的问题是 data.frame 中推文的唯一性 - 但我不清楚您是否希望它们对用户是唯一的或全局唯一的。对于全球唯一的推文，类似

```
my.new.df <- my.df[!duplicated(my.df$tweet),] 
```

对于作者的独特性，我会附加这两个字段 - 虽然很难知道没有真实数据的情况下什么是有效的！

```
my.new.df <- my.df[!duplicated(paste(my.df$tweet, my.df$author)),] 
```

因此，将所有这些放在一起，并在此过程中假设一些事情......

```
# grab our list of filenames
filenames <- list.files(path = ".", pattern='^.*\\.csv$')
# write a special little read.csv function to do exactly what we want
my.read.csv <- function(fnam) { read.csv(fnam, header=FALSE, skip=1, sep=';',
    col.names=c('ID','tweet','author','local.time'),
    colClasses=rep('character', 4)) }
# read in all those files into one giant data.frame
my.df <- do.call("rbind", lapply(filenames, my.read.csv))
# remove the duplicate tweets
my.new.df <- my.df[!duplicated(my.df$tweet),] 
```

根据第 3 行之后的修订警告，这是具有不同列数的文件的问题。这通常不容易修复，除非您建议在规范中有太多列。如果您删除规范，那么当您尝试将 data.frames rbind() 一起使用时会遇到问题......

这是一些使用 for() 循环和一些调试 cat() 语句的代码，以更明确地说明哪些文件已损坏，以便您可以修复问题：

```
filenames <- list.files(path = ".", pattern='^.*\\.csv$')

n.files.processed <- 0 # how many files did we process?
for (fnam in filenames) {
  cat('about to read from file:', fnam, '\n')
  if (exists('tmp.df')) rm(tmp.df)
  tmp.df <- read.csv(fnam, header=FALSE, skip=1, sep=';',
             col.names=c('ID','tweet','author','local.time','extra'),
             colClasses=rep('character', 5)) 
  if (exists('tmp.df') & (nrow(tmp.df) > 0)) {
    cat('  successfully read:', nrow(tmp.df), ' rows from ', fnam, '\n')
    # now lets append a column containing the originating file name
    # so that debugging the file contents is easier
    tmp.df$fnam <- fnam

    # now lets rbind everything together
    if (exists('my.df')) {
      my.df <- rbind(my.df, tmp.df)
    } else {
      my.df <- tmp.df
    }
  } else {
    cat('  read NO rows from ', fnam, '\n')
  }
}
cat('processed ', n.files.processed, ' files\n')
my.new.df <- my.df[!duplicated(my.df$tweet),] 
```

# java - 为什么 catch 块不运行？

> ID：10961513
> 
> 赞同：0
> 
> 时间：2012-06-09T13:40:26.860
> 
> 标签：java

我有以下方法将数组写入文本文件。如果给出了现有的文本文件，那么它可以正常工作，但如果给出不存在的文件，则 try-catch 都不会运行代码来重新启动该方法。我没有得到任何错误或任何东西，但 catch 块不会运行。我认为我不需要捕获 IOException，但如果我不这样做，代码甚至都不会运行。所以，是的，有人知道我怎样才能让它工作吗？

编辑：忘了提到 getInput 方法提示用户输入。

```
private static void openFileWriter(String prompt, boolean append, int wordsperline, String[] story) {
  try {
    try {
      save = new PrintWriter(new FileWriter(getInput(prompt), append));
      wordsperline = 0;
      save.println("");
      save.println("");
      save.println("Story start");
      for (int x = 0; x <= story.length-1; x++) {
        if (story[x] == null) {
        } else {
          if (wordsperline == 21) {
           save.println(story[x]);
           wordsperline = 0;
          } else {
           save.print(story[x]);
           wordsperline++;
          }
        }
      }
      save.close();
    } catch (FileNotFoundException e1) {
    openFileWriter("File not found", append,wordsperline,story);
    } 
  } catch (IOException e) {
    // TODO Auto-generated catch block
    openFileWriter("File not found", append,wordsperline,story);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:45:05.433

如果文件不存在，则无法写入，在您的 catch 块中，您试图将错误写入不存在的文件。另外，我认为您在这里只需要 1 个 catch 块，并注意 if 语句块之一是空的。

尝试这个：

```
try
{
    save = new PrintWriter(new FileWriter(getInput(prompt), append));
    wordsperline = 0;
    save.println("");
    save.println("");
    save.println("Story start");
    for(int x = 0; x <= story.length-1; x++)
    {
        if (story[x] == null)
        {
        }
        else
        {
           if (wordsperline == 21)
           {
             save.println(story[x]);
             wordsperline = 0;
           }
           else
           {
             save.print(story[x]);
             wordsperline++;
           }
       }
    }
    save.close();
}
catch (FileNotFoundException e1)
{
   System.err.println(e1.getMessage());
}   
catch (IOException e)
{
   System.err.println(e.getMessage());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:04:53.283

尝试此版本并在收到异常时发送堆栈跟踪：

```
public static List<String> splitByLength(String filename, int length) {
    List<String> splitWords = new ArrayList<String>();

    for (int i = 0; i < str.length(); i += length) {
        splitWords
                .add(str.substring(i, Math.min(str.length(), i + length)));
    }
    return splitWords;
}

private static void openFileWriter(String prompt, boolean append,
        int wordsperline, String[] story) {
    PrintWriter save = null;
    try {
        save = new PrintWriter(new FileWriter("c:\\test.txt", append));
        wordsperline = 0;
        save.println("");
        save.println("");
        save.println("Story start");
        for (int x = 0; x <= story.length - 1; x++) {
            if (story[x] != null) {
                List<String> splitWords = splitByLength(story[x], 21);
                for (String line : splitWords) {
                    save.println(line);
                }
            }
        }

    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (save != null) {
            save.close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T14:58:33.627

请参阅[`FileWriter`javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)。

引用构造函数文档：

> 抛出：IOException - 如果指定文件存在但为目录而非常规文件、不存在但无法创建或因任何其他原因无法打开

如果您向它传递一个不存在的文件名，但它是您有权写入的位置的合法文件名，它只会创建该文件。

如果您将目录传递给它，您的代码实际上确实会到达 catch 块（有点奇怪，它`FileNotFoundException`在这种情况下为我捕获了 a 而不是记录在案的`IOException`）。

要检查文件是否存在，请参阅[`File`javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#exists%28%29)

# vim - 如何在 MacVim 中隐藏这些恼人的排水沟？

> ID：10961516
> 
> 赞同：4
> 
> 时间：2012-06-09T13:40:47.913
> 
> 标签：vim, macvim

我搜索了 Google 和 SO 以寻求答案，但真的找不到，可能是因为我不知道这些东西的真实名称。

[烦人的排水沟](https://www.evernote.com/shard/s139/sh/b1fee4ab-85c5-47cb-bd71-6666a57ee4cd/58a8696cd0a4994a2baefec8727d3ab7/res/315dfd08-bc20-43f1-bb17-223cc9ed3ef4/gutter-macvim-20120609-153858.png)

这些排水沟表示嵌套级别和折叠选项，几乎没有优点和缺点，对我来说完全没用，并且占用了大量空间，尤其是在拆分视口中工作时。

你知道如何摆脱它们吗？

仅供参考，我正在使用[Janus 分布](https://github.com/carlhuda/janus)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T14:12:37.120

那个“排水沟”是折叠栏。您可以通过以下方式关闭它

```
:set foldcolumn=0 
```

但是，这通常是由插件或文件类型插件设置的，因此它可能会再次发生。您可以通过以下方式找出是谁做的

```
:verbose set foldcolumn? 
```

如果它是由文件类型插件*foo*设置的，您可以将关闭它的命令放入`.vim/after/ftplugin/foo.vim`. 如果它是一个插件，请阅读它的文档。*（这就是像Janus*这样的预制 Vim 发行版的缺点！）

# ios - 在基于 UITabBarController 的应用程序中启动配置向导

> ID：10961520
> 
> 赞同：2
> 
> 时间：2012-06-09T13:42:48.413
> 
> 标签：ios, uitabbarcontroller, wizard

我有一个`UITabBarController`基于应用程序。我想在第一次启动应用程序时启动配置指南 - 一系列视图。这当然与正常的选项卡导航无关，我希望配置视图覆盖整个屏幕。

我有一个支持该`UIApplicationDelegate`协议的类，我尝试`application:didFinishLaunchingWithOptions`使用以下代码从该方法启动我的配置视图：

```
UIViewController *vc = [[self.mainViewController storyboard] instantiateViewControllerWithIdentifier:@"StartupWelcomeViewController"];
[self.mainViewController presentModalViewController:vc animated:YES]; 
```

（mainViewController 是对 UITabBarController 的引用）

显然`application:didFinishLaunchingWithOptions`是`viewDidLoad`在标签栏视图之前调用的。如果我将上面的代码移动到`viewDidLoad`它工作后调用的函数。

`UIApplicationDelegate`我在协议或标签栏视图中`UITabBarController`的方法之后调用的类中找不到方法。`viewDidLoad`

哪里是启动我的配置指南的好地方，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T22:33:51.640

*（老问题，但为了存档......）*

如果您希望启动向导出现在选项卡视图控制器的顶部，那么选项卡视图控制器应该显示它；你会从类似的地方做到这一点`viewDidLoad`。如果您不喜欢在标签栏控制器中包含该代码，则将其放入例如应用程序委托中，然后让标签栏控制器调用它。

一个可以说是更干净的替代方案是在您的应用程序中没有自动显示的视图，而是从应用程序委托中编排所有内容 - 它检查配置向导是否已运行并选择显示该向导或选项卡栏控制器，因此相关的用户界面。在任何一种情况下，实例化代码都会以您的问题中显示的方式从情节提要中检索相关的命名对象。启动向导将在使用您自己设计的非常简单的委托协议完成后回调应用程序委托，这可能会通过调用相同的 show-tabs 方法为您提供显示选项卡栏所需的提示无论选项卡栏是立即显示还是在配置完成后显示都被调用。

第二种方法确实意味着您的故事板做的工作更少，而您的代码做的工作更多。以我目前的经验来看，随着应用程序的成熟，它的功能开始扩展到自动化情节提要行为提供的相对基本的流程选项之外，这似乎不可避免地会发生。

*脚注*

*   当您选择当前用于此目的的任何控制器时，您可以通过关闭 XCode 的故事板编辑器的属性检查器 (Command-Option-4) 中的*Is Initial View Controller选项来防止故事板在启动时显示任何视图。*它将位于故事板编辑器区域的最左侧，并有一个从左到右“从无到有”的箭头指向它。一旦你这样做了，你会得到一个构建警告，这很烦人；您可能决定添加一个虚拟的空白视图控制器并将其设置为初始视图，纯粹是为了避免警告。

# iphone - AVCaptureSession 没有提供良好的照片质量和良好的分辨率

> ID：10961521
> 
> 赞同：17
> 
> 时间：2012-06-09T13:43:03.177
> 
> 标签：iphone, objective-c, ios5, camera, avcapturesession

我正在与`AVCaptureSession`捕获图像。它工作正常，但没有给出好的分辨率。我将它与 iPhone 相机拍摄的图像进行了比较，我发现 iPhone 相机图像比`AVCaptureSession`图像好得多。

我在 stackOverflow 上看到了 3-4 个关于此的链接，但找不到任何解决方案。

我也试过所有的预设

```
AVCaptureSessionPresetPhoto, 
AVCaptureSessionPresetHigh, 
AVCaptureSessionPresetMedium, 
AVCaptureSessionPresetLow, 
AVCaptureSessionPreset352x288, 
AVCaptureSessionPreset640x480, 
AVCaptureSessionPreset1280x720, 
AVCaptureSessionPreset1920x1080, 
AVCaptureSessionPresetiFrame960x540, 
AVCaptureSessionPresetiFrame1280x720, 
```

但静止图像质量较差。如果我的问题不够清楚或者我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T20:46:39.517

当使用带有 AVCaptureStillImageOutput 的预设 AVCaptureSessionPresetPhoto 时，我能够在 iPhone 4S 上以 3268x2448 的分辨率捕获图像，这与内置相机应用程序产生的分辨率完全相同。iPhone 4、Retina iPad 等设备也是如此，因此如果您使用带有静止图像输入的预设，您将从`-captureStillImageAsynchronouslyFromConnection:completionHandler:`原始相机分辨率返回样本缓冲区。

关于照片质量，请记住，内置相机应用程序能够通过快速获取不同曝光级别的图像来捕捉高动态范围 (HDR) 照片。我们无法通过标准的 AV Foundation API 访问它，所以我们得到的只是一张处于定义曝光级别的图像。

如果你关闭 HDR，图像质量看起来和我一样。这是使用 AVCaptureStillImageOutput 捕获的照片的放大部分：

![AVCaptureStillImage 输出图像](../Images/2a4e33bf617ca140f5a385700d92c5ff.png)

这是内置照片应用程序中的一个：

![内置照片图像](../Images/a6c1db23e9cadcfb742aef40841aaf64.png)

忽略由于相机方向的微小变化而导致的轻微照明差异，两种方式拍摄的图像的分辨率和保真度似乎是相同的。

[我使用开源 GPUImage 框架](https://github.com/BradLarson/GPUImage)中的 SimplePhotoFilter 示例应用程序捕获了第一张图像，将默认的 GPUImageSketchFilter 替换为 GPUImageGammaFilter，该 GPUImageGammaFilter 没有调整任何伽玛，只是充当传递。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-14T21:30:55.793

只需在文件中添加这行代码

```
self.captureSession.sessionPreset = .photo 
```

你会得到一个很棒的分辨率，就像来自苹果的集成相机应用程序一样。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-09T14:45:43.200

使用该代码参考时我们遇到了同样的问题。使用 iPad 前置摄像头的照片尤其糟糕。

我们通过在设置捕获管理器和调用捕获图像方法之间添加 1 秒延迟来修复它。它对我们产生了足够大的影响，我们对结果感到满意。看来相机需要一些时间来打开快门并执行自动对焦/白平衡默认选项。

```
[NSTimer scheduledTimerWithTimeInterval:1.0 
    target:self.captureManager 
    selector:@selector(captureStillImage) 
    userInfo:nil repeats:NO]; 
```

# php - MySQL多参数

> ID：10961523
> 
> 赞同：1
> 
> 时间：2012-06-09T13:43:07.213
> 
> 标签：php, mysql

所以这是我的问题。我有一个用于 URL 标题和类型的歌曲表。我有一个用户输入字段，用户可以在其中选择他想要的音乐类型。众所周知，一首歌永远不会只有一种类型，所以每首歌都有不止一种类型。所以我的问题是有一种方法可以搜索用户选择的内容。

例如：

用户正在搜索：朋克、技术。

表格中有一首歌曲类型：punk techno 和 rap

我想选择这一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:01:38.090

[这](http://sqlfiddle.com/#!2/6d9a0/7)是想法:)希望我有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:51:36.657

您必须使用多对多关系，因此您必须使用这些列创建一个名为“song_type”之类的“中间”表：

*   id （如果您使用列旁边的列创建组合主键，则此列是可选的）
*   歌曲编号
*   type_id

这样您就可以拥有与多种类型相关的多首歌曲。

# ruby-on-rails - 用于基于 JS 的 Web 应用程序的最佳内容回退实践是什么？

> ID：10961525
> 
> 赞同：0
> 
> 时间：2012-06-09T13:43:28.560
> 
> 标签：ruby-on-rails, spine.js

我正在构建我的第一个 Spine.js 应用程序。对于不支持 javascript 的浏览器，大多数人都不在乎回退吗？我确定这是个案。最好的实现是什么？我应该在页面上显示静态内容并在可用时用 JS 隐藏它吗？另一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:43:37.730

接受的情况通常是显示最少量的内容，主要用于搜索引擎。

我似乎“大多数”较小的应用程序并不关心后备，只是告诉浏览器需要 JS。

# android - 将盐与加密文件一起存储会破坏安全性吗？

> ID：10961528
> 
> 赞同：7
> 
> 时间：2012-06-09T13:43:50.767
> 
> 标签：android, security, aes, salt

我正在编写一个旨在使用 AES 256 加密和解密文件的 Android 应用程序。我正在使用 AES-CBC 模式和 PBKDF2 从用户输入的密码中获取 AES 密钥。此外，我正在为每个文件的加密密钥生成一个安全的伪随机盐。我将 IV 和 salt 与加密文件一起存储，因此我可以稍后重新读取它们并重新生成密钥以便能够解密文件。

我的问题：将盐与加密文件一起存储是否会破坏安全性以及盐本身的任何含义？知道盐和IV的攻击者不能对加密文件进行离线暴力攻击以找出加密密钥吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T16:19:52.137

盐的主要目的不是保密，而是确保攻击者在尝试暴力破解密码时不能使用快捷方式，例如使用彩虹表（即一个现有表，或一个新表用于多个加密文件），或一次暴力破解多个收集的文件（应该有不同的盐）。

只要你的密码有足够的熵并且你的密钥推导函数的迭代次数足够高，用密文存储盐是没有问题的。单独的盐不允许任何人解密文件。

此外，如果你想对盐保密（它通常被称为“胡椒”而不是盐），你必须考虑一些机制来为合法进行解密的人提供正确的盐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T14:02:33.707

Salt用于单向功能，例如散列密码。

随机 IV 用于双向功能，例如加密以后可以解密的数据。

它们都是随机字节，用于防止同一条信息在被函数应用后产生相同的结果。因此，如果两个人选择相同的密码来存储他们的数据并存储相同的信息，那么加密的字节就会不同。

您可以将它们与加密文件一起存储。

还要对 PBKDF2 使用超过 1 次迭代，否则它相当没用。根据[Wikipedia](http://en.wikipedia.org/wiki/PBKDF2) ， iOS 3 使用了 2,000 次迭代，而 iOS 4 使用了 10,000 次。

# silverlight - 动态加载 Silverlight 用户控件

> ID：10961529
> 
> 赞同：0
> 
> 时间：2012-06-09T13:43:57.513
> 
> 标签：silverlight, architecture

我正在制作一个 silverlight 5 应用程序，我需要在其中提供一种插件架构。它适用于类似程序的仪表板，可以插入不同的“演示文稿”。我有一个简单的数据源，但需要能够为使用系统的每个用户插入不同的用户控件。例如。第一版系统有条形图和折线图。第二版有条形图、折线图和现在的饼图。我想制定我的解决方案，这样我就不必每次都构建整个 Silverlight 应用程序。这样我就可以简单地“插入”一个新的图表类型。

有没有办法在 Silverlight 中构建类似功能的插件？如果silverlight客户端在启动时下载东西就可以了，我想只有在事情发生变化时才会这样做（一个插件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T15:28:58.600

哈哥们

你应该检查棱镜。

[http://msdn.microsoft.com/en-us/magazine/dd943055.aspx](http://msdn.microsoft.com/en-us/magazine/dd943055.aspx)

# linux - 如何将 TESSERACT_PATH 添加到我的环境中？

> ID：10961535
> 
> 赞同：3
> 
> 时间：2012-06-09T13:44:34.110
> 
> 标签：linux, unix, path, cygwin

我对 linux/unix 命令行非常陌生，并且在使用 cygwin 时遇到了一些困难。

我有一组要构建的 src 文件，并且我在不同的目录中也有 ndk 文件（所有路径的名称中都没有空格）

每次我导航到我的源文件并输入我的 ndk-build 文件的完整路径时，它都会显示

> 您必须将 TESSERACT_PATH 变量设置为 Tesseract 源目录。

请问有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:55:49.653

在`bash%`提示符下，您可以键入

```
export TESSERACT_PATH=/home/SkyR/path/to/tesseract/src 
```

或者您可以编辑您的 /home/SkyR/.profile 文件以添加同一行，以便它始终可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:58:36.390

这可能是您需要在 shell 中设置的[环境变量。](http://www.gnu.org/software/bash/manual/bashref.html#Environment)如果是这样，您可以在命令行或 ~/.bashrc 中设置它：

```
export TESSERACT_PATH=/path/to/tesseract/source 
```

# php - 上传非常大的文件（5gb 到 15gb）

> ID：10961538
> 
> 赞同：2
> 
> 时间：2012-06-09T13:45:36.103
> 
> 标签：php, ruby, node.js, large-file-upload

我试图找出不同的方法来实现非常大的文件上传/下载。我是 node.js 的新手，看起来它可能是我问题的答案，但在深入研究之前，我需要确保通过这种方式我可以管理文件上传（5 到 15 Gb），而不会出现任何内存问题或类似问题。我可以考虑使用 php / ruby​​ 或 .net 作为技术（我对 node.js 了解不多，但如果它有效，我会学习足够的知识来解决我的问题）。

你的意见/经验是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:58:53.713

诀窍是将文件分成块，然后处理这些块。

我见过有人使用 mongodb gridFS (http://fuz.io)

看看[http://www.componentix.com/blog/13/file-uploads-using-nodejs-once-again](http://www.componentix.com/blog/13/file-uploads-using-nodejs-once-again)因为它可能会给你一些想法。

# c++ - 发送事件被忽略

> ID：10961540
> 
> 赞同：0
> 
> 时间：2012-06-09T13:46:42.030
> 
> 标签：c++, qt, event-handling

我在`QHeaderView`子类中有一个子`QTreeView`类，标题向代表提供信息，这些信息会影响他们如何绘制自己。标头接收控制这些值的鼠标事件。

我还希望我的委托编辑器小部件提供相同的功能，但不是复制和粘贴将鼠标值转换为标题可以使用的值的代码，我认为将其重新发送`QMouseEvent`到它会更容易。

因此，我复制了该事件并将其发送（如[文档](https://qt-project.org/doc/qt-4.8/qcoreapplication.html#sendEvent)中所述）：

```
QMouseEvent e( event->type(), event->pos(), event->button(),
               event->buttons(), event->modifiers() );
Sy_application::sendEvent( &header_, &e ); 
```

只是`header_`永远不会收到。发布事件具有相同的效果：

```
QMouseEvent* e = new QMouseEvent( QEvent::MouseButtonPress, event->pos(),
                                  event->button(), event->buttons(),
                                  event->modifiers() );
Sy_application::postEvent( &header_, e ); 
```

为什么`header_`没有收到事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:46:38.137

看来我的评论，关于父类中没有导致这种情况的评论，一定是错误的。作为一个实验，我`event(QEvent* event)`在我的头类中覆盖以手动调用鼠标处理程序，现在它可以完美地工作：

```
bool Sy_timeLineHeader::event( QEvent* event )
{
    switch ( event->type() ) {
    case QEvent::MouseButtonPress:
        mousePressEvent( static_cast< QMouseEvent* >( event ) ); break;
    case QEvent::MouseButtonRelease:
        mouseReleaseEvent( static_cast< QMouseEvent* >( event ) ); break;
    case QEvent::MouseMove:
        mouseMoveEvent( static_cast< QMouseEvent* >( event ) ); break;
    default:
        return QHeaderView::event( event );
    }

    return true;
} 
```

它并没有影响标头的正常运行方式，至少就我使用它的方式而言。

# macos - 无法在 R qplot 中显示 x 轴标签

> ID：10961541
> 
> 赞同：1
> 
> 时间：2012-06-09T13:46:51.553
> 
> 标签：macos, r, ggplot2

尽我所能，我似乎无法让 qplot 在使用构面时打印 x 轴标签。可重现的玩具示例（需要我认为 ggplot2 附带的 diamonds 数据集）：

```
dsmall <- diamonds[sample(nrow(diamonds), 100), ]
qplot(color,price,data=dsmall ,facets=cut~.,xlab="TEST") 
```

如何为此添加 x 轴标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T23:28:29.940

调整窗口大小（只需单击右下角并拖动一点使其变小）或将绘图保存为 PDF 以查看 x 轴标签。

我认为这可能是 Mac 版本的 R 中的一个错误。也许是 Lion 的问题与它更高级的窗口有关？似乎没有其他人注意到这个问题。在 Mac OS X 10.7.4 上使用带有 ggplot2 0.9.1的[Mac R64 二进制](http://cran.r-project.org/bin/macosx/)2.15.0得到其他人的确认会很高兴，我将提交一份错误报告。

调整 Quartz 窗口大小之前： ![没有明显 x 轴标签的绘图](../Images/46f8b1d681d2bf785fd8b8f27ce11df5.png) 调整大小后，标签神奇地出现： ![带有 x 轴标签的绘图](../Images/cd9d3a3a4335ef56430eebd37460b2ca.png)

# javascript - 创建一个有返回值的对象

> ID：10961548
> 
> 赞同：1
> 
> 时间：2012-06-09T13:47:59.563
> 
> 标签：javascript, object

我想知道这是否可能。

```
number = function(n){

  var num = n;

  this.add = function(x){
    return num + x;
  }

  return num;

}

alert(number(7)); //returns 7

seven = new number(7);
alert(seven.add(3)); // returns 10
alert(seven); // want this to return 7, but will return [object Object] 
```

我不需要 number(7) 来返回 7，但这会很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T13:54:34.203

首先`return num;`对您的代码没有影响。函数返回的对象是`this`. 如果构造函数没有显式返回对象，它将始终隐式返回`this`（参见[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)中的步骤 3 ）。

也就是说，您可以覆盖两种方法，即[`toString` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/toString)和[`valueOf` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/valueOf)：

```
function MyNumber(n){
  this.num = n;
}

MyNumber.prototype.add = function(x){
    return this.num + x; // or `this + x` since we implemented `valueOf`
};

// Is called whenever the object has to be converted to a string
// e.g. alert(myNumber) ; myNumber + " is the answer to all questions"
MyNumber.prototype.toString = function() {
    return this.valueOf().toString(); // or `this.num.toString()`
};

// Is called whenever the object has to be converted to a primitive value
// e.g. myNumber + 42 ; myNumber == 42
MyNumber.prototype.valueOf = function() {
    return this.num;
}; 
```

覆盖的额外好处`valueOf`是 JavaScript 将在内部调用此方法，将对象转换为原始值。

例如，在正常加法中使用实例作为操作数也可以（而不是调用`.add`）：

```
> var n = new MyNumber(7);
> n + 10
  17 
```

* * *

也就是说，如果您只想为原始类型创建一个包装器，请不要这样做。

[正如 pimvdb 在他的评论中提到的那样](https://stackoverflow.com/questions/10961548/javascript-create-an-object-with-a-return-value/10961587#comment14310622_10961548)，严格比较会失败（例如）。`Number`这是意料之中的，也是避免原始值（ , `String`, ）的对象版本的原因之一`Boolean`（即`"foo" === new String("foo")`也是`false`如此）。对象的行为根本不像原语，混合这些会创建更复杂的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T13:54:02.717

给它一个“toString”：

```
number = function(n){

  var num = n;

  this.add = function(x){
    return num + x;
  }

  this.toString = function() {
    return num + "";
  };

  return num;

} 
```

你也可以给它一个“valueOf”函数：

```
 this.valueOf = function() { return num; } 
```

这会让你做：

```
alert(seven + 7); // 14 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T13:52:40.933

为了能够重用`Number`你需要在构造函数中返回对函数的引用：

```
var number = function(n) {

  var num = n;

  this.add = function(x){
    return num + x;
  };

  this.value = function() {
      return num;
  };
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T13:54:21.510

覆盖`toString`：

```
number = function(n){

  var num = n;

  this.add = function(x){
    return num + x;
  };

  this.toString = function(){
    return num;
  };

  return num;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-09T14:09:50.150

如果我做对了，你希望一个对象表现得像一个对象，除非它被传递给一个函数？您示例中的变量`seven`是一个对象，因此在`7`任何地方引用它时都不会简单地返回。

更`num`重要的是，本质上是一个私有变量。所以使用`for...in`和`JSON.stringify`欺骗对你没有任何好处。您应该做的是将`num`变量设为对象属性 ( `this.num`) 或创建成员函数 ( `this.getNum(){return num};`)。

之后，您可以自由使用该属性/方法：

```
alert(seven.num);//alerts 7, but requires num to be declared as a property
alert(seven.getNum());//alerts 7, requires the method 
```

我建议在这种情况下使用一种方法，因为您显然将此函数用作构造函数和常规函数（我可以补充一下，这不是一个好主意）。
稍微有点迂腐的说明：习惯于将构造函数的第一个字母大写，并且不使用可能与 JS 原生类型（字符串、数字、对象、函数...）冲突的名称

```
function MyNumber(n)
{
    this.num = n;//as a property
    this.add = function(x)
    {
        return this.num + x;
    }
}

var seven = new MyNumber(7);
alert(seven.num);//alerts 7 
```

不过，如果 num 不应该被改变——我猜这里就是这种情况——一个额外的功能是我要采取的路线：

```
function MyNumber(n)
{
    var num = n;
    this.add = function(x)
    {
        return num + x;
    };
    this.getNum = function()
    {
        return num;
    };
}
alert(seven.getNum()); 
```

如果您仍打算将构造函数用作常规函数，则最好检查函数/构造函数的调用方式：

```
function MyNumber(n)
{
    var num = n;
    if (!(this instanceof MyNumber))
    {//not called as constructor
        return num;//or a function, or something else (treat this as a closure)
    }
    //Same code as above goes here
} 
```

我在这里可能有点跑题了，但我不禁认为您可能想阅读 JavaScript 中的闭包、对象和构造函数。

# asp.net - 在 asp.net 页面中存储数据（不是会话）

> ID：10961562
> 
> 赞同：0
> 
> 时间：2012-06-09T13:49:59.533
> 
> 标签：asp.net, maintainability, persistent-storage

我正在创建 4 个 asp.net 页面。前三页有“继续”按钮，最后一页有“提交”按钮。我不允许使用 Sessions 来存储前三页数据。我需要在最后三页上使用“返回”按钮。当我单击“返回”按钮时，我需要维护用户输入的上一页数据。

由于我的页面进行了一些回发，我无法使用 javascript.history 函数。

我的限制是：

由于应用程序是从 Web 场提供的，因此不能使用会话对象。但是，出于本练习的目的，将会话对象视为类似数据库的持久空间，您可以在其中存储数据。您的代码应该显示一种切换到不同持久空间的简单方法。

什么是持久空间之类的数据库以及如何编写代码以切换到不同的持久空间？...

请给我一些关于如何进行的想法....

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:58:36.017

`ASP.Net Wizard`在您的情况下，控制可以是一种选择。因为所有`Next`和`Previous`导航都由控件本身管理，并且为每个`Next` `Previous`和`Finish`按钮定义了事件。控件状态将自动存储在`Viewstate`向导控件本身中并由其管理，您无需一次又一次地重新填充控件。

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/fs0za4w6.aspx)文章中找到更多详细信息或在此处查看[示例](http://www.4guysfromrolla.com/articles/061406-1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:00:38.810

我可以提出两种解决方案。第一个为会话使用数据库持久存储，因为这解决了网络农场的反需求。这很容易做到，并且需要零代码，只需要配置（当然还有数据库）。唯一（在 99% 的情况下是微不足道的）警告是，您在会话中存储的任何内容都必须是 [Serializable]。这使得网络农场问题变得无关紧要，因为所有节点都将共享同一个数据库，这使得问题没有实际意义。在这里查看：http: [//msdn.microsoft.com/en-us/library/ms972429.aspx](http://msdn.microsoft.com/en-us/library/ms972429.aspx)

第二个是相当自定义的，使用一些隐藏字段或其他控件来存储信息（本质上是使用 Viewstate 来传输数据）和页面之间的交叉发布（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T22:36:07.937

我为 Web 表单编写了一个导航项目，您会发现它很有趣，因为它采用了一种新方法来记住访问过的页面和输入的数据，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)

我还在上个月的 MSDN 杂志上写了一篇介绍性文章， http: [//msdn.microsoft.com/en-gb/magazine/hh975349.aspx](http://msdn.microsoft.com/en-gb/magazine/hh975349.aspx)

如果您有兴趣或需要任何帮助，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T14:08:50.367

您是否考虑过通过一些 Web 服务调用或其他方式将数据存储在数据库中？为什么不每次导航到新页面时都调用 Ajax 来存储和检索数据？

```
 $(document).ready(function () {
    $.ajax({
              type: "POST",
              url: "/Services/SomeServiceService.asmx/GetData",
              data: "{ 'myval' : 'someval'}",
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              error: function (resp) { alert("ERROR\n" + resp.responseText); },
              success: function (data) {
             }
    });
    $(".next").click(function(event){
      $.ajax({
               type: "POST",
               url: "/Services/SomeServiceService.asmx/SaveData",
               data: "{ 'myval' : 'someval'}",
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               error: function (resp) { alert("ERROR\n" + resp.responseText); },
               success: function (data) {
              }
     });
    });
  }); 
```

# asp.net - MVC 3 从不同控制器的索引视图中引用视图

> ID：10961563
> 
> 赞同：0
> 
> 时间：2012-06-09T13:50:30.143
> 
> 标签：asp.net, asp.net-mvc-3, views, partial

我是 MVC 新手，目前正在学习 asp.net MVC 3，“仍在上学”。在我的主页控制器的索引页面上，我想显示来自我的新闻模型的新闻项目。我确信有一种简单的方法可以使用部分视图执行此操作，但到目前为止，每次我尝试使用默认的脚手架列表模板来创建视图时，我总是得到一个空引用错误。我想知道是否有人有我可以使用的好例子或有用的步骤。我首先创建了数据库，所以我使用实体框架。提前致谢。这是我主页的控制器：

```
public class HomeController : Controller
    {

        public ActionResult Index()
        {
            return View();
        }

        public ActionResult About()
        {
            return View();
        }

    } 
```

这是它的观点：

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2> 
```

下面是我的论坛的控制器：

```
public class ForumController : Controller
    {
        private OEPEntities db = new OEPEntities();

        //
        // GET: /Forum/

        public ViewResult Index()
        {
            return View(db.Fora.ToList());
        }

        //
        // GET: /Forum/Details/5

        public ViewResult Details(int id)
        {
            Forum forum = db.Fora.Find(id);
            return View(forum);
        }

        //
        // GET: /Forum/Create

        public ActionResult Create()
        {
            return View();
        } 

        //
        // POST: /Forum/Create

        [HttpPost]
        public ActionResult Create(Forum forum)
        {
            if (ModelState.IsValid)
            {
                db.Fora.Add(forum);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            return View(forum);
        }

        //
        // GET: /Forum/Edit/5

        public ActionResult Edit(int id)
        {
            Forum forum = db.Fora.Find(id);
            return View(forum);
        }

        //
        // POST: /Forum/Edit/5

        [HttpPost]
        public ActionResult Edit(Forum forum)
        {
            if (ModelState.IsValid)
            {
                db.Entry(forum).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(forum);
        }

        //
        // GET: /Forum/Delete/5

        public ActionResult Delete(int id)
        {
            Forum forum = db.Fora.Find(id);
            return View(forum);
        }

        //
        // POST: /Forum/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {            
            Forum forum = db.Fora.Find(id);
            db.Fora.Remove(forum);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    } 
```

我想做的是在我的主页视图上显示一个论坛列表，该列表将链接到每个论坛的详细信息。

# asp.net-mvc - 辅助方法 DropDownListFor 中的奇怪行为

> ID：10961569
> 
> 赞同：1
> 
> 时间：2012-06-09T13:51:43.620
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html-helper, html.dropdownlistfor

我看到一个奇怪的东西`DropDownListFor`。这是我的观点的一部分：

```
1:<dt>
2:  @Html.LabelFor(model => model.MainModel.DefaultAreaId)
3:</dt>
4:<dd>
5: @Html.DropDownListFor(model => model.MainModel.DefaultAreaId, Model.FKs["DefaultAreaId"].Items, new { @class = "Areadd" })
6: @Html.ValidationMessageFor(model => model.MainModel.DefaultAreaId, null, new { @class = "invalid-side-note" })
7:</dd> 
```

我签入调试控制器的最后一行：`return View(model);`值`Model.FKs["DefaultAreaId"].Items`是：

```
 0: {Title="t1", value=13, Selected = false},
 1: {Title="t2", value=15, Selected = false},
 2: {Title="t3", value=17, Selected = false},
 3: {Title="t4", value=16, Selected = true} 
```

另外我在上面视图的第 2 行检查它并且值是相同的，但是在第 5 行之后`DropDownListFor`的值更改为：

```
 0: {Title="t1", value=13, Selected = false},
 1: {Title="t2", value=15, Selected = false},
 2: {Title="t3", value=17, Selected = false},
 3: {Title="t4", value=16, Selected = false} 
```

我无法理解发生了什么`DropDownListFor`以及我的模型值？我也在同一视图中使用相同的方式：

```
11:<dt>
12:  @Html.LabelFor(model => model.MainModel.DefaultControllerId)
13:</dt>
14:<dd>
15: @Html.DropDownListFor(model => model.MainModel.DefaultControllerId, Model.FKs["DefaultControllerId"].Items, new { @class = "Controllerdd" })
16: @Html.ValidationMessageFor(model => model.MainModel.DefaultControllerId, null, new { @class = "invalid-side-note" })
17:</dd> 
```

一切都很好，我也改变了名字，`DefaultAreaId`但没有任何改变。那么有人对此有任何解释吗？这里发生了什么？如果需要，我可以复制我所有的视图、控制器和模型。

**更新**

在控制器中：

```
List<SelectListItem> Areas = new List<SelectListItem>();
Areas.Add(new SelectListItem { Text = "t1", Value = "13", Selected = false });
Areas.Add(new SelectListItem { Text = "t2", Value = "15", Selected = false });
Areas.Add(new SelectListItem { Text = "t3", Value = "17", Selected = false });
Areas.Add(new SelectListItem { Text = "t4", Value = "16", Selected = true });

Model.FKs.Add("DefaultAreaId", new ForeignKey { Title = "area", Items = Areas }); 
```

`Fks`：

```
public Dictionary<string, ForeignKey> FKs { get; set; } 
```

并且`ForeignKey`是：

```
public class ForeignKey {
    public string Title { get; set; }
    public List<SelectListItem> Items { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:05:00.480

在将模型发送到视图之前，您应该在控制器中分配默认**值。**`model.MainModel.DefaultAreaId`

***更新 ：***

* * *

***然而，这是一种更好的方法“我假设:)”*** 我有一个帮助方法来在列表中设置 Selected Item，如下所示：

```
public static IEnumerable<SelectListItem> SetSelected(this IEnumerable<SelectListItem> selectList, object selectedValue)
{
    selectList = selectList ?? new List<SelectListItem>();
    if (selectedValue == null)
        return selectList;
    var vlaue = selectedValue.ToString();
    return selectList.BuildList(m => m.Text, m => m.Value, null, m => String.Equals(m.Value, vlaue, StringComparison.CurrentCultureIgnoreCase));
} 
```

***在这里，如果您想要 BuildList 助手，并且您可以在需要 SelectItem 列表时使用它***

```
public static IEnumerable<SelectListItem> BuildList<T>(IEnumerable<T> items, Func<T, string> text, Func<T, string> value = null, string optionalText = null, Func<T, bool> selected = null)
{
    var list = items.Select(x => new SelectListItem
                                     {
                                             Text = text.Invoke(x),
                                             Value = value == null
                                                             ? text.Invoke(x)
                                                             : value.Invoke(x),
                                             Selected = selected != null && selected.Invoke(x)
                                     }).ToList();
    if (optionalText != null)
        list.Insert(0, new SelectListItem() {Value = "", Text = optionalText});
    return list;
} 
```

在控制器中什么也不做，只为模型设置你想要的值：

```
public ActionResult Edit(){
   var model = new YourModel();
   model.CategoryId = 4;
   //.. set the dropdownlist items in the ViewData or in your model in your case
   return View(model);
} 
```

并在视图中像往常一样调用 DropDownListFor 并调用`SetSelected`辅助方法：

```
@Html.DropDownListFor(model => model.CategoryId, ((IEnumerable<SelectListItem>)ViewData["Categories"]).SetSelected(model.CategoryId)) 
```

这将在您的示例中：

```
@Html.DropDownListFor(model => model.MainModel.DefaultAreaId, Model.FKs["DefaultAreaId"].Items.SetSelected(model.MainModel.DefaultAreaId)) 
```

只是不要忘记在控制器中设置默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T16:17:17.740

当您创建 SelectList 时，您是在此处传递所选值还是通过选择列表项分配它。

```
var selectList = new SelectList([select list items], "[Key]", "[Value]", [SelectedValue]);
var selectList = new SelectList(list, "Id", "Name", 2); 
```

谢谢，

# c - 尝试使用 iw_statistics 结构但遇到问题？

> ID：10961570
> 
> 赞同：1
> 
> 时间：2012-06-09T13:51:45.577
> 
> 标签：c, linux-kernel, kernel-module

我正在编写一个内核，我需要从`iw_statistics`结构中读取某些统计信息，这是代码：

```
struct net_device *dev; 
struct iw_statistics *wi_stats;
wi_stats = dev->wireless_handlers->get_wireless_stats(dev); 
```

代码编译正确，但是当尝试运行它时，模块卡住而不是被删除......我使用的是 linux 内核 2.6.35 并且我的无线设备已启动并正在运行，因此结构中必须有一些值.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:50:52.047

您需要确保首先初始化 dev。要初始化 dev，您可以执行以下操作：

```
static struct net_device* getdev()
{
   struct net_device *dev; 
#ifndef CONFIG_WIRELESS_EXT
   return NULL;
#endif     
   dev = first_net_device(&init_net);
   while (dev) {  
         if (dev->wireless_handles != NULL)
                 break;
         dev=next_net_device(dev);
   } 
   return dev; // if not found dev is NULL;
} 

struct iw_statistics *wi_stats=NULL;
struct net_device *dev = getdev();
if (dev) 
    wi_stats = dev->wireless_handlers->get_wireless_stats(dev);
else 
    printk("error finding wireless device");
if (!wi_stats)
    return;  // error wi_stats not configured. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:40:29.530

@ajpyles 的答案可能不起作用

因为检查设备名称并不意味着它是无线采用者，这就是为什么`wireless_handlers`会`NULL`导致系统崩溃或模块卡在 linux 内核中的原因

# c# - 如何从 C# 中由多行组成的数据中读取单行？

> ID：10961571
> 
> 赞同：1
> 
> 时间：2012-06-09T13:51:49.047
> 
> 标签：c#, .net, excel

我需要处理富文本框中的数据以输出到精确的单元格范围，并且我需要将每一行数据处理到单个单元格。

Richtextbox 中的数据总量为 52 行，我希望将每个数据（每行）放在单个单元格区域中（C17:C42,H17:H42）

我已经用我的代码试过了：

```
range = objSheet.get_Range("C17:C42,H17:H42", Missing.Value);
range.set_Value(Missing.Value, richTextBoxReceive); 
```

但我在每个单元格中得到 52 个数据，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:10:15.393

它会工作

```
string s = richTextBox1.Text;
        var k = Regex.Split(s, "\\n", RegexOptions.Multiline);

        foreach (string str in k)
        {
            //do what you want
            MessageBox.Show(str);
        } 
```

# asp.net - 删除被添加到 Asp.net ajax 组合框列表中的键入项目？

> ID：10961574
> 
> 赞同：1
> 
> 时间：2012-06-09T13:53:02.130
> 
> 标签：asp.net, ajax, drop-down-menu, combobox

我的一个页面中有一个 ASP.NET AJAX ComboBox。我从数据库绑定数据。现在当我运行它时，因为它是一个组合框，我们可以在里面输入。但是在键入后，如果您单击任何按钮，键入的项目将被添加到组合框列表中。我不想添加那个？我该如何解决这个问题？

```
<asp:ComboBox ID="ddlAccounts" runat="server" Width="130px" MaxLength="0" 
            meta:resourcekey="ddlAccountsResource1" style="display: inline;" 
            AutoCompleteMode="SuggestAppend" ItemInsertLocation="OrdinalText">
        </asp:ComboBox> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T22:54:25.037

您应该使用 `AutoCompleteMode="Suggest"`is 而不是`AutoCompleteMode="SuggestAppend"`.

看看例子[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)。

# php - 在不使用这个 ?id=77 的情况下从 PHP 中的 url 获取数据

> ID：10961578
> 
> 赞同：0
> 
> 时间：2012-06-09T13:53:54.093
> 
> 标签：php, url

我是制作网站的新手。作为一个个人项目，我想做一个 URL 缩短服务。一切都很好，除了一件事。

我无法处理传入的请求。

例如。如果有人键入 www.examp.le/Dnd5Je，我希望能够从 URL 中获取最后 6 个字母，然后在数据库中查找它。

问题是如果不使用 $_GET 数组并在 URL 中使用诸如 ?id=77 之类的标识符，我无法弄清楚如何获取字母。

我有点迷茫，如果对如何提取最后 6 个字母有任何帮助，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:57:36.437

您可以在文件中重写 URL `.htaccess`：

```
RewriteEngine On
RewriteRule ^([^/.]+)/$ index.php?target=$1
RewriteRule ^$ index.php 
```

上面的代码将重写一个 URL，例如`www.examp.le/foobar123/`to `www.examp.le/index.php?target=foobar123`。然后，您可以使用该`$_GET`变量来读取 的值`$_GET['target']`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:57:35.530

你可以使用[basename()](http://us3.php.net/basename)

```
$str = basename($url); 
```

[这里的工作示例](http://codepad.org/9QTmx1az)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T13:57:41.137

尝试使用`$_SERVER['REQUEST_URI']`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T13:59:36.750

$_GET 数组没有被填充的原因是因为在 www.examp.le/Dnd5Je 中接收的是一个没有 GET 信息的有效 URL。GET 信息位于问号 (?) 之后作为键/值对

为了实现您想要实现的目标，您需要让您的网络服务器“重写”URL。如何执行此操作取决于您使用的 Web 服务器。对于 Apache，可以在此处找到文档

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T13:59:56.047

你可以使用`$_SERVER['REQUEST_URI']`. 它将包含前导斜杠，即`/Dnd5Je`来自您的示例，您可以轻松删除它。

有关更多信息，请考虑[$_SERVER 手册](http://php.net/manual/en/reserved.variables.server.php)

# c# - SqlTransaction“对象引用未设置为对象的实例”？

> ID：10961581
> 
> 赞同：1
> 
> 时间：2012-06-09T13:54:03.200
> 
> 标签：c#, transactions, sql-server-2008-r2

我在我的项目中使用了许多事务：像这样：

```
bool retVal = true;
string errorCode = string.Empty;
try
 {
   result = RecordsDal.ReadAllDoneRecords();
   retVal = Export(result, out errorCode);
 }
catch
 {
    Errorlog(errorCode, ex.Message);
    MessageBox.Show("Error Export "+ Environment.NewLine + ex.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Stop);
    return false;            
 } 
```

出口：

```
 public static bool Export(List<Record> result,  out string error)
    {
        bool retVal = true;
        error = "sqlCeConnection";
        SqlCeConnection sqlCeConnection = null;
        error = "Initializiong";
        SqlTransaction trans = null;
        try
        {
           error = "Begin";
           .......
           error = "End";
        }
        catch (Exception ex)
        {
            trans.Rollback();
            retVal = false;                
        }
    } 
```

我使用错误日志来了解我的问题所在，

该应用程序在许多客户端中都可以正常工作，但是我在新客户端中安装了该应用程序，并且文件日志出现错误，出现代码错误和异常 ex.Message

> 初始化：对象引用未设置为对象的实例

这一行的错误：`SqlTransaction trans = null;`

**抱歉，我找到了真正的问题，没有安装 sqlCe，并且有 ex.innerexception = null 日志保存了这个错误而不是真正的错误**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:18:45.590

如果创建事务时出错，则永远不会设置变量：

```
trans = connection.BeginTransaction(System.Data.IsolationLevel.ReadUncommitted) 
```

`trans`也会如此`null`。正如`catch`你期望`trans`存在的那样，你正在创建这个吞没真实异常的新异常。

为了得到实际的异常，在之前添加这一行`trans.Rollback()`：

```
if(trans == null) throw; 
```

这意味着：如果出现错误并且未创建事务，则抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:46:05.753

抱歉，我发现了真正的问题，没有安装 sqlCe，并且有 ex.innerexception = null 日志保存了这个错误而不是真正的错误

# opencv - 在 Fisherfaces.train() 方法中出现 OpenCV 错误“图像步骤错误”

> ID：10961586
> 
> 赞同：2
> 
> 时间：2012-06-09T13:54:25.490
> 
> 标签：opencv

我正在使用 OpenCV v2.4.1

这是我正在使用的代码

```
#include "opencv2/opencv.hpp"
#include <iostream>
#include <fstream>
#include <sstream>

using namespace cv;
using namespace std;

Mat toGrayscale(InputArray _src) {
    Mat src = _src.getMat();
    // only allow one channel
    if(src.channels() != 1)
        CV_Error(CV_StsBadArg, "Only Matrices with one channel are supported");
    // create and return normalized image
    Mat dst;
    cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC1);
    return dst;
}

void read_csv(const string& filename, vector<Mat>& images, vector<int>& labels, char separator = ';') {
    std::ifstream file(filename.c_str(), ifstream::in);
    if (!file)
        throw std::exception();
    string line, path, classlabel;
    while (getline(file, line)) {
        stringstream liness(line);
        getline(liness, path, separator);
        getline(liness, classlabel);
        images.push_back(imread(path, 0));
        labels.push_back(atoi(classlabel.c_str()));
    }
}

int main(int argc, const char *argv[]) {
    // check for command line arguments
    /*if (argc != 2) {
        cout << "usage: " << argv[0] << " <csv.ext>" << endl;
        exit(1);
    }*/
    // path to your CSV
    string fn_csv = string("at.txt");
    // images and corresponding labels
    vector<Mat> images;
    vector<int> labels;
    // read in the data
    try {
        read_csv(fn_csv, images, labels);
    } catch (exception&) {
        cerr << "Error opening file \"" << fn_csv << "\"." << endl;
        exit(1);
    }
    // get width and height
    //int width = images[0].cols;
    int height = images[0].rows;
    // get test instances
    Mat testSample = images[images.size() - 1];
    int testLabel = labels[labels.size() - 1];
    // ... and delete last element
    images.pop_back();
    labels.pop_back();
    // build the Fisherfaces model
    Ptr<FaceRecognizer> model = createFisherFaceRecognizer();
    model->train(images, labels);
    // test model
    int predicted = model->predict(testSample);
    cout << "predicted class = " << predicted << endl;
    cout << "actual class = " << testLabel << endl;
    // get the eigenvectors
    Mat W = model->eigenvectors();
    // show first 10 fisherfaces
    for (int i = 0; i < min(10, W.cols); i++) {
        // get eigenvector #i
        Mat ev = W.col(i).clone();
        // reshape to original size AND normalize between [0...255]
        Mat grayscale = toGrayscale(ev.reshape(1, height));
        // show image (with Jet colormap)
        Mat cgrayscale;
        applyColorMap(grayscale, cgrayscale, COLORMAP_JET);
        imshow(format("%d", i), cgrayscale);
    }
    waitKey(0);
    return 0;
} 
```

at.txt 输入文件的内容：

./at/s10/2.pgm;9 ./at/s10/7.pgm;9 ./at/s10/6.pgm;9 ./at/s10/9.pgm;9 ./at/s10/ 5.pgm;9

现在的问题是，只要我使用这个 pgm 文件，它就可以正常工作。但是当我指定任何 jpg 文件而不是 pgm 时，我会收到以下错误

OpenCV Error: Image step is wrong (The matrix is not Continuous, 因此它的行数不能改变) in unknown function, file ......\src\opencv\modul es\core\src\matrix.cpp , 第 801 行

到目前为止，我能够追踪到错误来自 Fisherfaces.train() --> cv::Mat.reShape()

但我一无所知，可能是什么原因。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:22:08.247

[这个解决方案](http://www.stackoverflow.com/questions/2623163/)对我有用！

早些时候，我在项目属性中添加了发布和调试库。现在我已经删除了所有已发布的库，它可以完美地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T03:11:11.557

当您构建渔脸模型时。

```
Ptr<FaceRecognizer> model = createFisherFaceRecognizer(); 
```

你需要传递两个参数

```
createFisherFaceRecognizer(int num_components=0, double threshold=DBL_MAX); 
```

[此页面包含有关 createFisherFaceRecognizer 如何工作的更多信息](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html)

# c - C & socket.h 中的 Linux 蓝牙编程

> ID：10961592
> 
> 赞同：4
> 
> 时间：2012-06-09T13:55:20.577
> 
> 标签：c, linux, bluetooth, bluez, lego

我是新的 stackoverflow 用户！我之所以写，是因为在我的 KUbuntu 12.04 上使用 C 编程蓝牙时遇到了一些问题。

我正在尝试通过我在此 pdf 中找到的程序（启动连接）将设备（LEGO Mindstorm Brick）连接到我的笔记本： [NXT_Bluetooth_Handout](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&sqi=2&ved=0CIYBEBYwBQ&url=http://www.cs.uleth.ca/~benkoczi/3720/data/NXT_Bluetooth_handout-jeremy.pdf&ei=STzTT9njJI2SswaVurWdDw&usg=AFQjCNHIUOUffS_5qdMpONbLRoRrbUzOmQ&sig2=jLAX57opI2qOdDKNJJ01hA)

我安装了以下软件包： - bluez-hcidump，通信调试工具 - bluez，Linux 蓝牙堆栈和相关工具 - libBluetooth3，BlueZ 库 - libBluetooth-dev，用于链接到 BlueZ 库的开发文件

```
// Socket, used for Bluetooth socket
#include <sys/socket.h>
#include <sys/types.h>
// Bluetooth headers
#include <bluetooth/bluetooth.h>
#include <bluetooth/rfcomm.h> 
```

主要是我遇到了两个问题：1）如果我只是尝试编译我得到的程序：

```
$ gcc -lm -lbluetooth nxt_bt_connect.c -o nxt_bt_connect
/tmp/ccSLdkpn.o: In function `init_bluetooth':
nxt_bt_connect.c:(.text+0x60): undefined reference to `str2ba'
collect2: ld returned 1 exit status 
```

str2ba 是一个 BlueZ 函数，它应该可以工作...... ba2str 是这个库提供的另一个函数，它可以正常工作。

2）如果我修改代码以使用 ba2str 而不是 str2ba 函数，则会收到与套接字相关的错误：

```
$ gcc -lm -lbluetooth 1.c -o nxt_bt_connect2
1.c: In function ‘main’:
1.c:101:23: error: called object ‘socket’ is not a function 
```

问题是我没有套接字头是 sys/，实际上如果我运行：

```
find /usr/include/ -name socket.h
 /usr/include/gtkmm-2.4/gtkmm/socket.h
 /usr/include/linux/socket.h
 /usr/include/asm-generic/socket.h
 /usr/include/giomm-2.4/giomm/socket.h
 /usr/include/x86_64-linux-gnu/sys/socket.h
 /usr/include/x86_64-linux-gnu/asm/socket.h
 /usr/include/x86_64-linux-gnu/bits/socket.h 
```

有没有人知道如何解决这些问题？我希望以足够清晰的方式描述所有情况......我为我糟糕的英语道歉！

非常感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:00:15.487

对于第二个问题：您必须发布您编写的代码。否则我们无法弄清楚什么是坏的。

对于第一个问题：您需要在调用 GCC 时将库链接器标志作为最后一个参数：

```
gcc nxt_bt_connect.c -o nxt_bt_connect -lm -lbluetooth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:46:06.617

假设 KUbuntu 使用 Debian 打包，`<sys/socket.h>`也就是包`/usr/include/sys/socket.h`附带`libc6-dev`。

# javascript - 获取 0 作为状态

> ID：10961594
> 
> 赞同：5
> 
> 时间：2012-06-09T13:56:03.603
> 
> 标签：javascript, html, xml, ajax, http

我有一个简单的 HTML 文件，它从服务器获取数据并输出：

```
<html>
    <head>
        <script type="text/javascript">
        var xmlhttp = new XMLHttpRequest();
        function startRequest() {
            xmlhttp.onreadystatechange = handleStateChange;
            xmlhttp.open("GET", "http://new-host-2.home/test.html", true);
            xmlhttp.send(null);
        }
        function handleStateChange() {
            if (xmlhttp.readyState == 4) {
                if (xmlhttp.status == 200) {
                    alert("The server replied with: ", xmlhttp.responseText);
                }
                else {
                    alert(xmlhttp.status);
                }
            }
        }
        </script>
    </head>
    <body>
        <form>
            <input type="button" value="Woooo" onclick="startRequest()"/>
        </form>
    </body>
</html> 
```

服务器上的文件 test.html 如下所示：

```
<h1>Data received!</h1> 
```

尽管在控制台中，它说一切都很好，但我一直得到 0 作为状态，并给出 200 状态。当我更改`if (xmlhttp.status == 200)`为 时`if (xmlhttp.status == 0)`，它只是输出`The server replied with:`。为什么是这样？我在搞砸什么吗？ **编辑**：它可能只是我的服务器，我要切换到不同的服务器。标头可能会有所帮助：

```
Response Headers
Accept-Ranges   bytes
Connection  Keep-Alive
Content-Length  13
Content-Type    text/html
Date    Sat, 09 Jun 2012 14:17:11 GMT
Etag    "267749b-d-4c20a6d0ef180"
Keep-Alive  timeout=15, max=100
Last-Modified   Sat, 09 Jun 2012 13:52:22 GMT
Server  Apache/2.2.19 (Unix) DAV/2
Request Headers
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Host    new-host-2.home
Origin  null
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:13.0) Gecko/20100101 Firefox/13.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:06:36.627

alert 函数只需要一个参数，你传递了 2。

试一试：

```
var xmlhttp = new XMLHttpRequest(); 
function startRequest() { 
    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState==4)
        {
            if(xmlhttp.status==200)
                alert("The server replied with: " + xmlhttp.responseText);
            else
                alert(xmlhttp.status);
        }
    }
    xmlhttp.open("GET", "http://new-host-2.home/test.html", true); 
    xmlhttp.send(); 
} 
```

如果它仍然不起作用，则可能是安全问题： [http ://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/282972/why-am-i-getting-xmlhttprequest.status0](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/282972/why-am-i-getting-xmlhttprequest.status0)

如果它在 Safari 中有效，请尝试在您的请求中删除域以使路径相对。Firefox 可能认为您正在尝试一些跨域的东西。

```
var xmlhttp = new XMLHttpRequest(); 
function startRequest() { 
    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState==4)
        {
            if(xmlhttp.status==200)
                alert("The server replied with: " + xmlhttp.responseText);
            else
                alert(xmlhttp.status);
        }
    }
    xmlhttp.open("GET", "/test.html", true); 
    xmlhttp.send(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:41:35.593

很难说这里到底是什么问题。以下是我怀疑可能是的事情

1) 相同的主机策略。确保您请求它的页面位于**完全相同的**主机上。例如，一个可能是`www.`，另一个不是。最简单的方法是在发出 AJAX 请求时省略 URL 的主机部分。
`xmlhttp.open("GET", "/test.html");`应该可以工作。

2) 范围问题。也许您正在从与发出请求的对象不同的对象中读取状态？通过从传递给回调的事件中获取相同的对象，确保您正在读取相同的对象。顺便说一句`XMLHttpRequest`，无论如何都不能重用，所以不要认为通过使其全局化来节省一些资源。`startRequest`在函数内部声明它要容易得多。
然后像这样更改回调：

```
function handleStateChange(e)
{
    var xmlhttp = e.target;
    if (xmlhttp.readyState == 4)
    {
        if (xmlhttp.status == 200)
            alert("The server replied with: " + xmlhttp.responseText);
        else
            alert(xmlhttp.status);
    }
} 
```

有一些非常好的包装器可用于发出 AJAX 请求（尤其是 jQuery），但如果您一心想要自己制作（或只是学习内部知识），那么这大约是您想要的：

```
function startRequest(url, callback)
{
    var xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
    xmlhttp.onreadystatechange = function(e)
    {
        if (xmlhttp.readyState == 4 && xmlhttp.status >= 200 && xmlhttp.status < 300)
            callback(xmlhttp.responseText);
    };
    xmlhttp.open("GET", url);
    xmlhttp.send(null);
}

startRequest("/test.html", function(response) {alert("The server replied with: " + response);}); 
```

# android - Android Python 缺少基本模块

> ID：10961596
> 
> 赞同：2
> 
> 时间：2012-06-09T13:56:18.597
> 
> 标签：android, python

我是安卓新手。我正在运行带有 ICS 的 ASUS Eee Pad Transformer TF101。我安装了终端 IDE 应用程序并运行`python`. 表面上，我正在运行 2.6.2。但是，当我跑步时

```
>>> import random 
```

它给了我一个`ImportError`.

是什么赋予了？我是否必须 root 我的设备才能使用基本的 2.6 模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T22:39:52.053

有同样的问题，我偶然发现了[这个链接](http://tinyrobot.co.uk/blog/python-in-terminal-ide-for-android/)，它提供了一个简单的“python”脚本......但我不太确定这样的东西有多有用。

> 请注意，以下内容仅将 python 与终端 IDE 一起使用，并且我没有将任何内容链接到 /system/bin，因为不是每个安装了终端 IDE 的人都希望拥有 root，因此我们的 python 脚本保存在终端 IDE 的家中，然后将其添加到 .bashrc 中的路径中。

将以下文件创建为 ~/python：

```
#!/system/bin/sh
BASE=/data/data/com.googlecode.pythonforandroid/files/python
export PYTHONPATH=${PYTHONPATH}:${BASE}/lib/python2.6/lib-dynload
export PYTHONHOME=${BASE}
export LD_LIBRARY_PATH=${BASE}/lib
${BASE}/bin/python "$@" 
```

然后使其可执行并在 ~/.bashrc 中将 ~/ 添加到我的 $PATH 中：

```
terminal++@127.0.0.1:~$ chmod +x ~/python
terminal++@127.0.0.1:~$ echo export PATH=$PATH:~/ >> ~/.bashrc 
```

现在，当您重新启动终端 IDE 时，您应该能够输入“python”来获取交互式 python 解释器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:52:48.793

据我所知，Play Store 上的终端仿真器都没有访问标准库的权限。我终于找到了一个名为 SL4A 的系统。我安装了它，并在此处遵循用户指南：

[http://code.google.com/p/android-scripting/wiki/UserGuide](http://code.google.com/p/android-scripting/wiki/UserGuide)

我已经安装了 Python 解释器并成功导入了`random`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T13:40:28.907

在[lankycyril.com](http://blog.lankycyril.com/post/39473303019)上的博客文章之后，我最终遇到了 Python 实际运行的相同问题，但找不到它附带的任何基本模块。博客文章似乎也没有解决手头的问题。

玩了一会儿之后，在定义 PYTHONPATH 时，你真正需要做的就是添加模块本身的路径，所以修改这个（来自博客）：

```
export PYTHONHOME=/data/data/com.googlecode.pythonforandroid/files/python
export PYTHONPATH=~/py:${PYTHONHOME}/lib/python2.6/lib-dynload
export LD_LIBRARY_PATH=${PYTHONHOME}/lib 
```

对此（注意第二行）：

```
export PYTHONHOME=/data/data/com.googlecode.pythonforandroid/files/python
export PYTHONPATH=~/py:${PYTHONHOME}/lib/python2.6/lib-dynload:${HOME}/sdcard/com.googlecode.pythonforandroid/extras/python
export LD_LIBRARY_PATH=${PYTHONHOME}/lib 
```

PYTHONPATH 中缺少的只是模块本身的路径，因此 Python 不知道从哪里加载它们。添加这些模块的路径为我解决了这个问题。

希望这可以帮助。

# python - 如何配置 pyChecker 以读取字符串？

> ID：10961613
> 
> 赞同：0
> 
> 时间：2012-06-09T13:59:03.273
> 
> 标签：python, pychecker

我试图让 pyChecker 检查字符串的语法。

```
s="""
print "hi"
print "hello"
print 3/0
""" 
```

无论如何我可以做到这一点，我试图更改 pyChecker 的源代码以读取字符串，但这太令人困惑了。我可能会错过一种内置的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:12:50.690

从[文档中](http://pychecker.sourceforge.net/)：

> PyChecker 以多种方式工作。首先，它导入每个模块。如果出现导入​​错误，则无法处理该模块。

由于`import`在幕后做了很多工作，包括 PyChecker 需要完成它的技巧的完整编译过程，我猜你会做得更好，写入`s`文件。替代方案将重新发明一些复杂的轮子。

# asp.net-mvc - 在 asp.net 中弹出的模式上从左到右对齐控件

> ID：10961618
> 
> 赞同：0
> 
> 时间：2012-06-09T13:59:47.550
> 
> 标签：asp.net-mvc

我无法让我的文本框在模态弹出窗口中从左到右对齐。这是 . 我应该改变什么。

```
<asp:UpdatePanel runat="server" ID="ModalPanel1" UpdateMode="Conditional"> 
                    <ContentTemplate>
                        <!-- shadow container -->
                        <div class="shadowContainer">
                                <h1><asp:Label runat="server" id="xyz" Text="Make" /></h1>
                                <tr style="width:1000px;">
                                <td colspan = "2" style="width:100px;"> 
                                <div>Name1</div>
                                 <asp:TextBox  runat="server" id="Name1" MaxLength="40"/>
                                      <span id="Span1" style="color:Red;">
                                        <asp:CustomValidator ID="Val1" runat="server"
                                            OnServerValidate="Val1_ServerValidate" ControlToValidate="Name1" ValidateEmptyText="true" ValidationGroup="thisGroup"></asp:CustomValidator>
                                      </span>   
                                 <div>Name2</div>  
                                  <asp:TextBox runat="server" id="TextBox1" MaxLength="40"/><br />
                                      <span  id="Span2" style="color:Red;">
                                        <asp:CustomValidator ID="CustomValidator1" runat="server"
                                            OnServerValidate="CustomValidator1_ServerValidate" ControlToValidate="TextBox1" ValidateEmptyText="true" ValidationGroup="thisGroup"></asp:CustomValidator>
                                      </span>                                      
                                </td>
                            </tr>                                                

                        </div>
                    </ContentTemplate>
                </asp:UpdatePanel> 
```

我修改了我之前帖子中的代码。此外，如果模式弹出窗口上有一个 SAVE 按钮，我如何确保点击 SAVE 不会更改对齐的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:04:17.963

你有你需要的一切。我能看到的唯一问题是你没有为你的 td 设置宽度；因此，默认情况下它可能创建得不够宽。确保将其设置为足够大以包含所有内容的宽度。

```
<td colspan="2" style="width:500px;"> 
```

**编辑**：

我相信问题是你在你的 td 上设置的宽度。现在您已经更新了代码，我可以看到您只有 td 的宽度设置为`100px`. 这将导致控件在不同的行上中断。

# php - 允许用户在网站内添加网页

> ID：10961623
> 
> 赞同：0
> 
> 时间：2012-06-09T14:00:09.933
> 
> 标签：php, mysql, html, ftp

我正在尝试确定是否有一种方法可以在我的网站上实现一项功能，该功能允许用户/访客创建一个新的网页，该网页将存储在服务器上，而无需直接通过 FTP。我目前正在寻找真正的基本功能，只是一种基本形式，它允许任何人提交网页名称，然后将其存储在服务器的根目录中。有谁知道这是否可能？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:30:49.107

你可以使用维基。试试[MediaWiki](http://mediawiki.org)，它可以让您的用户创建新页面。默认情况下，跟随功能启用为“观看页面”，并且还可以使用速率功能（如在 WikiPedia 中）与一些扩展（查找文章反馈扩展或类似扩展）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T19:07:30.247

要通过表单自动生成 html 页面，您需要学习脚本语言，例如 php。

# c - 使用运行 ubuntu 的 VM Player 在 Windows for Linux 上交叉编译 C 源代码

> ID：10961625
> 
> 赞同：0
> 
> 时间：2012-06-09T14:00:16.563
> 
> 标签：c, cross-compiling, simulink

我有一个项目，它具有从 Simulink 模型（使用 RTW）生成的 .C 代码。需要为 LynxOS RTOS 生成可执行文件，我使用 cygwin，但它太慢了，编译和链接大约 650 个 .C 代码文件和库需要几个小时。

我想知道是否可以将这些源和库放在运行任何 Ubuntu 或任何其他 linux 风格的 VMware Player（在 Windows 上）上共享，然后生成可执行文件？这会更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:02:31.617

这绝对是可能的，尽管它的速度在很大程度上取决于其他条件。在不知道任何其他细节的情况下，我会说原生方法最有可能比虚拟化方法更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:20:58.927

从最快到最慢列出的解决此问题的方法：

1.  本机 Linux 通过双引导和共享磁盘
2.  具有分布式版本控制的 Virtualbox/VMWare 播放器，用于拉取 VM 磁盘上的源。
3.  具有共享或网络文件夹的 Virtualbox/VMWare Player。
4.  赛格温。

2 和 3 之间的权衡是磁盘访问。共享文件夹或网络驱动器速度很慢，尤其是出于编译目的。除非有一些琐碎的事情，否则我总是选择选项 2。

# php - 目录列表到关联数组

> ID：10961629
> 
> 赞同：1
> 
> 时间：2012-06-09T14:00:34.320
> 
> 标签：php, regex, directory

> **可能重复：**
> [PHP 将字符串拆分为整数元素和字符串](https://stackoverflow.com/questions/4537994/php-split-string-into-integer-element-and-string)

我有一个包含这些文件的目录

```
FILEA10.TXT
FILEB20.TXT
FILEC5.TXT 
```

我需要将列表读入数组：

```
filea => 10
fileb => 20
filec => 5 
```

最快的方法或功能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:15:40.133

```
$arr = array();
foreach (glob('*.TXT') as $file) {
   list($name,$num) = preg_split('/\.|(?<=\D)(?=\d+)/', $file);
   $arr[$name] = $num;
} 
```

# ruby-on-rails - 使用数据库中的值路由 URL？

> ID：10961634
> 
> 赞同：2
> 
> 时间：2012-06-09T14:01:28.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个控制器`streams_controller`和一个模型`streams`。

```
class StreamsController < ApplicationController
  def new
    @stream = Stream.new
  end

  def create
    @stream = Stream.new(params[:stream])
    if @stream.save
        flash[:success] = "Welcome!"
        redirect_to @stream
    else
        render 'new'
    end
  end

  def show
    @stream = Stream.find(params[:id])
  end
end 
```

和

```
class Stream < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    before_save { |stream| stream.name = name.downcase }

    has_secure_password
.
.
. 
```

基本上要使用 show 方法，我必须去`localhost/streams/[id]`哪里 [id] 是特定 Stream 的 id。是否可以将 URL 重新路由到如下所示：`localhost/[name]`其中 [name] 是 Stream 模型的 :name 属性？

所以基本上每次创建新 Stream 时都会创建一个新 URL，它对应于数据库中 Stream 的名称。

我将如何实施呢？

无论如何，非常感谢任何帮助或想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:30:58.503

该行将`match '/:name' => 'streams#show'`为您提供 params[:name] 并路由到流中的 show 动作。如果碰巧与控制器名称发生冲突，您可以将此行放在 routes.rb 文件的末尾，以便适当的控制器操作优先。当然，最好首先确保这些冲突不会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:27:25.787

我会使`streams`url 的部分尽可能短，但不能为空（以避免在仅使用名称而不是 id 的情况下发生冲突）。

```
resources :streams, path: 's' 
```

网址`/s/stream-a`不是那么大的妥协。

关于在您的 url 中使用 name 而不是 id ，请参阅[此 Railscast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T14:29:37.500

您可以在路由中加载流。例如：

```
begin
  streams = Streams.all.map{|s| s.slug}
  match '/:stream' => 'streams#show', :stream => Regexp.new( "(#{streams.join('|')})" )
rescue Exception => e
  logger = Logger.new STDOUT
  logger.warn e.message
end 
```

请注意，我使用`slug`了 name 而不是 name - 在这里使用安全词很重要。所以你可以创建一个`slug`基于`name`流的。此外，它们不应覆盖其他路由。

# spring - Java EE 模式：授权和 RESTful 服务实现

> ID：10961636
> 
> 赞同：0
> 
> 时间：2012-06-09T14:02:19.780
> 
> 标签：spring, jakarta-ee, tomcat

我想使用 Tomcat 实现一个基本的 RESTful 服务。API 需要授权才能使用。授权将通过请求帐户“资源”来实现，例如

```
some.domain.com/rest/accounts?user=ABC&password=XYZ 
```

如果凭据有效，则会将适当的帐户资源作为 JSON 重新调整，否则将返回 403 类型的空响应。授权完成后，客户端可以访问API（例如）：

```
some.domain.com/rest/secure/bookings
some.domain.com/rest/secure/friends 
```

但是，我对所有实施选项感到迷茫。我知道我想使用 Spring，但 Jackson 似乎更简单、更容易返回 JSON 对象。

问题：

1.  即使使用 Jackson 的类也是一种控制器，我是否应该实现 Spring Controller？或者，如果我使用 Jackson，是否不需要 Sping 控制器？

2.  是否应该使用 Spring-Security、Tomcat 过滤器或带有 Spring 的 AOP 来执行身份验证？

似乎有很多方法可以做事，但我的首要任务是保持简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:39:04.380

Probably the most brain-damaged way to perform authentication I have ever seen. Authentication is **not** the concern of the REST API but of the underlying framework/server with Basic, Digest, Negotiate, etc. As duffymo already said, Spring Security is the most natural way to do so.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:06:00.850

Jackson是JSON序列化；我看不出它与身份验证/授权有什么关系。

如果您已经在使用 Spring，那么 Spring Security 是很自然的。

还有另一种观点：保持简单。基本身份验证和带有用户名和加密、加盐密码的数据库并不难编写。一个 DAO，你就很好。

是的，身份验证/授权是横切关注点。最佳放置位置问题的答案取决于您需要在哪里应用和使用它。Tomcat 过滤器需要 HTTP。你会在控制器或服务层进行身份验证吗？或两者？基于角色的授权呢？这可能很棘手。

# javascript - JavaScript 数字继承

> ID：10961639
> 
> 赞同：2
> 
> 时间：2012-06-09T14:02:39.073
> 
> 标签：javascript, numbers, prototypal-inheritance

所以假设我想在 JS 中创建一个简单的 Price 类。它基本上是一个数字，所以我想我会从一个数字继承。这是一些代码：

```
Number.prototype.toMoney = function (precision, decimals, thousands) {
    // Formats number...
}

function Price(val) {
    Number.call(val); // Based on MozillaDN
}

Price.sufix = ' EUR'; // To print with every Price

// Price.prototype = Number.prototype;
Price.prototype = new Number(); // any difference?

Price.prototype.toString = function() {
    return this.toMoney() + Price.sufix; // Of course it does not work.
}

var price = new Price(100.50);
alert(price.toString()); // Gives: undefined EUR
alert(price); // This fail. I thought it should work as it works with Numbers. 
```

我可能做错了什么，但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-24T23:25:42.267

当我在寻找几乎相同问题的答案时，我找到了这个页面。由于这有助于我得出最终结论，因此我很乐意与您分享。确实可以从 Number 继承自己的对象。

```
function Price(val) {
    Number.call(this, val);
} 
```

这是您通常调用父对象的构造函数的方式，但在这种情况下它不起作用，因为构造函数返回`val`自身。当您尝试阅读时`val`，会收到“Number.prototype.valueOf is not generic”错误。

```
alert(price.toString()); // Gives: undefined EUR
alert(price); // This fail. I thought it should work as it works with Numbers.
alert(price.valueOf()); // This fails too! () 
```

相反，您应该在 Price 类中创建一个名为`val`.

```
function Price(val) {
    this.val = val;
}

Price.sufix = ' EUR'; // To print with every Price

// Price.prototype = Number.prototype;
Price.prototype = new Number(); // any difference? 
```

在 JavaScript 中有一种方法可以做一个继承对象，`Object.create()`方法。而且因为构造函数对象现在指向父构造函数，...

```
Price.prototype = Object.create(Number.prototype);
Price.prototype.constructor = Price; 
```

最后，您可以覆盖`valueOf()`读取值的方法：

```
Price.prototype.valueOf = function(){
    return this.val;
    }

var price = new Price(100.50);
alert(price); //should work now 
```

但是，有一个副作用：如果您需要 Number 对象中的方法，则必须像这样调用它们：

```
alert(price.valueOf().toFixed(2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:07:27.530

我认为您在这一行中有一个错字：

```
Price.prototype - new Number(); // any difference? 
```

您正在分配一个新 Number 作为 Price 的原型，因此您需要使用 = 符号而不是减号。

它应该是：

```
Price.prototype = new Number(); // any difference? 
```

说了这么多，还是不行。我不明白您为什么要尝试从 Number 继承。

这有效：

```
function Price(val) {
    this.val = val;                
}
Price.suffix = ' EUR'; // To print with every Price

Price.prototype = {
    toString: function() {
        return this.toMoney() + Price.suffix;
    },
    toMoney: function(precision, decimals, thousands){
        //fancy code here to format the number
        return "formatted number " + this.val;
    }
};

var price = new Price(100.50);
alert(price.toString()); // returns: formatted number 100.50 EUR
alert(price); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T14:31:51.137

你的构造函数没有按照你的想法做：

```
function Price(val) {
    Number.call(val); // Based on MozillaDN
} 
```

当作为构造函数调用时，上面将返回一个普通对象（函数的`this`对象），而不是`Number.call(val)`原始值 +0 返回的值，无论`val`. 所以即使你试图返回它，构造函数仍然会返回它的*this*，因为构造函数**总是**返回一个对象，即使你试图返回其他东西。

如果[Number 作为函数调用](http://es5.github.com/#x15.7.1)，它会进行类型转换。由于没有值传递给它（值`val`作为它的*this*对象传递，没有提供值），表达式返回 +0。

那有什么意义呢？您是否尝试创建一个值为 的 Number 对象`val`？你可能最好给*Price.prototype*自定义*toString*和*valueOf*方法来返回适当的值。*模仿Number.prototype*的同名方法是有意义的。

```
> // Price.prototype = Number.prototype; 
> Price.prototype = new Number();
> // any difference? 
```

`[[Prototype]]`是的，第二个在链上为 Price 实例添加了一个额外的 Number 对象。这意味着您可以在不影响 Number.prototype 的情况下向 Price.prototype 添加属性和方法。

这是一个示例实现：

```
function Price(value, symbol) {
  this.value = value;
  this.symbol = symbol;
}

Price.prototype = {
  toString: function() {
    return '' + this.symbol + this.valueOf();
  },

  valueOf: function() {
    return this.value.toFixed(2);
  }
}

var x = new Price(10.50, '$');

alert(x + '\n' + (1*x)); // $10.50  10.5 
```

# android - 我的第一个安卓应用。我认为 onCreate 方法或整个类都没有被调用。可能是什么原因？

> ID：10961640
> 
> 赞同：0
> 
> 时间：2012-06-09T14:02:58.967
> 
> 标签：android, eclipse, adt

我已经为 android“Hello android”创建了我的第一个应用程序。使用 Eclipse、ADT 和 android sdk。第一次使用所有 3。我有以下代码。

```
package helloandroid.test;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class TestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           TextView tv = new TextView(this);
           tv.setText("Hello, Android");
           setContentView(tv);
       }
} 
```

当我运行它时，出现一个空白的移动屏幕（也打开 3-4 个命令提示符），一段时间后该黑屏开始看起来像典型的 android 移动屏幕。移动屏幕工作正常，但我在任何地方都看不到“你好，Android”。可能是什么原因。即使我正在放置调试器，但控制并没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:16:32.113

我知道了。我必须在移动屏幕上继续“菜单”，然后在“自定义代码”上看到我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:12:05.840

正确、完整地遵循教程[Android Hello World 。](http://developer.android.com/resources/tutorials/hello-world.html)

看起来你有问题

```
TextView tv = new TextView(this); 
```

或在您的 androidManifest.xml 中。

按照指南一步一步来。

# java - 本科论文的 Flash/Flex/Actionscript

> ID：10961642
> 
> 赞同：0
> 
> 时间：2012-06-09T14:03:14.240
> 
> 标签：java, php, actionscript

我正在为我的本科论文主题寻找一个好的项目提案。我们的老师分配给我们两个建议供我们选择。语言模拟器和交互式图像检索。两者都可以在 www.1000projects.org 上找到。这里的坏事是我对Java几乎一无所知。我有信心使用 Actionscript 开发我的项目，所以我遇到了以下问题：

1.) 使用 Actionscript（不是游戏）的好项目提案。我的老师希望我们开发一些使用算法和数据操作的东西。

2.）如果我选择交互式图像检索（我找不到一个好的动作驱动示例），是否可以使用动作脚本作为开发工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:14:44.390

Actionscript 本身就是一种功能齐全的编程语言。您可以像使用任何其他语言一样使用它进行数据操作、语言模拟和交互式图像检索。

无论如何，我个人发现 actionscript 比 java 快得多。

我不是说你**应该**选择 actionscript，但我可以保证你**可以**。

编辑：另外，由于在 actionscript 中函数是一流的对象，赋予它一些功能，因此构建语言模拟器实际上可能比在 java 中更容易，因为您几乎可以直接将语言规则转换为代码。

（我假设您的意思是解析编程语言的东西）

# linux - 我可以在没有合成管理器的情况下创建非矩形窗口吗？

> ID：10961643
> 
> 赞同：1
> 
> 时间：2012-06-09T14:03:25.470
> 
> 标签：linux, window, x11, xorg

我想创建自定义形状的窗口。我只需要指定必须绘制哪些像素。

使用合成管理器时，我可以使用 alpha 通道，但没有它我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:09:40.280

如果你真的想要，你可以使用[xshape扩展:)](http://en.wikipedia.org/wiki/Shape_extension)

# sql-server - 连接到 sql server 时出现空白页 - 经典 asp

> ID：10961644
> 
> 赞同：3
> 
> 时间：2012-06-09T14:03:28.730
> 
> 标签：sql-server, asp-classic

我需要帮助我在连接到经典 asp 中的数据库时得到一个恒定的空白页。**出于安全目的，我更改了一些连接字符串。**我知道这个字符串有效，因为我可以在 vb.net 中连接到它。

```
 <%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Search Test</title>
</head>

<body>
<% 
Set Conn = Server.CreateObject("ADODB.Connection")
Conn.Open "Data Source=ServerIP;Initial Catalog=Database;User ID=Username;Password=Password"

strSql = "SELECT * FROM categories Where idParentcategory=1 ORDER BY categorydesc ASC"

Set rs = Conn.Execute(strSql)

If rs.eof Then
   Response.write("No records returned")
End If

do until rs.eof
   Response.write(rs("categorydesc") &  "<br>")
   rs.movenext
loop

Conn.Close
Set Conn = Nothing
 %>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:53:26.283

如果它显示一个空白页，是否有可能`on error resume next`我们看不到（也许它在包含文件中）？

我会通过检查来处理这个问题`eof`，然后只在结果集不为空时才循环访问它*。*

```
Set rs = Conn.Execute(strSql)

If rs.eof Then
  Response.write("No records returned")
Else
  do until rs.eof
    Response.write(rs("categorydesc") &  "<br>")
    rs.movenext
  loop
End If

rs.Close : set rs = nothing
Conn.Close : set Conn = Nothing 
```

这与@03Usr 的回答并没有什么不同，除了：

1.  您应该能够确定页面出现空白的原因。
2.  除了关闭和处置您的连接对象外，您还应该关闭并处置您的记录集对象（即使它是空的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:43:29.177

尝试这个：

```
If not rs.eof then
Do while not rs.eof or rs.bof 
      Response.write(rs("categorydesc") &  "<br>")
    rs.movenext
    Loop
 Else
      Response.Write "No records found"
 End If 
```

# apache - Apache HTTP 重定向到 Tomcat (LiferaY)

> ID：10961646
> 
> 赞同：2
> 
> 时间：2012-06-09T14:04:12.990
> 
> 标签：apache, tomcat, redirect, configuration, liferay

我对网络服务器有疑问，有什么更好的：

*   在端口 80 中安装服务器 HTTP 服务器重定向到端口 8080 中的 tomcat (Liferay)
*   直接在80端口安装tomcat。

在 Tomcat 之前使用 HTTP 有什么好处？这种重定向的最佳配置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:32:16.580

老实说，这取决于您的环境和应用程序需求。如果您有一个面向外部的 DMZ 的 n 层架构，那么将 Apache 放在 DMZ 中是有意义的，这反过来将流量重定向到 tomcat。这将提高您的应用程序的安全性。
如果您的应用程序有很多静态内容，并且您希望将这些静态内容卸载到 Apache 而不是让 tomcat 提供服务，那么 Apache 也很有意义。
但是，如果您想快速设置它，比如在您的桌面上，那么设置只监听端口 80 的 tomcat 会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T15:33:30.653

将 Web 服务器放在前面更有意义，您可以将静态内容放入其中，然后直接从 apache 提供服务。

此外，如果您打算拥有集群环境，那么它可以用作负载均衡器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T21:08:34.007

为了安全起见，我建议将 Apache 放在 Tomcat 前面（使用特定版本的 Apache 的人比使用特定版本的 Tomcat 的人多，因此一些丢失的安全漏洞在那里等待的机会更少）。

您也可以使用 Apache 或 Varnish Cache 来缓存静态内容。

# c# - c#项目中的sql server compact sdf文件 - SQLException问题

> ID：10961648
> 
> 赞同：0
> 
> 时间：2012-06-09T14:04:26.593
> 
> 标签：c#, sql-server, winforms, datagridview

这个问题与这个先前的[SO问题有关](https://stackoverflow.com/questions/10961348/very-simple-c-sharp-program-generates-a-nullreferenceexception-was-unhandled-e#comment14310238_10961348)

我已经修复了程序中使用的字符串，所以它现在运行那行代码。

为什么下面的失败就行`myAdapt.Fill(mySet, "AvailableValues");`了，有错误`SQLException was Unhandled; A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections`

数据库是项目的一部分，那么为什么连接会有困难呢？

*   我试过在 sql 文件中运行 sql 字符串，它运行正常。
*   我尝试从 DGV 中删除所有列。

    ```
    void PopulateGridView()
    {
        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg"].ConnectionString);
        SqlDataAdapter myAdapt = new SqlDataAdapter("SELECT refText FROM helloworld", conn);
        DataSet mySet = new DataSet();
        myAdapt.Fill(mySet, "AvailableValues");
        DataTable myTable = mySet.Tables["AvailableValues"];
        this.uxExperimentDGV.DataSource = myTable;
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:07:53.093

您是否尝试使用 SqlConnection 打开 SqlCE 文件 (SDF)？
我认为您应该使用 SqlCeConnection 和特定于 Sql Compact 的 ADO.NET 类

```
using System.Data.SqlServerCe;
.....

void PopulateGridView() 
{ 
    SqlCeConnection conn = new SqlCeConnection(ConfigurationManager.ConnectionStrings["DatabaseDGVexperiments.Properties.Settings.DatabaseDGVexperimentsConnStg"].ConnectionString); 
    SqlCeDataAdapter myAdapt = new SqlCeDataAdapter("SELECT refText FROM helloworld", conn); 
    DataSet mySet = new DataSet(); 
    myAdapt.Fill(mySet, "AvailableValues"); 
    DataTable myTable = mySet.Tables["AvailableValues"]; 
    this.uxExperimentDGV.DataSource = myTable; 
} 
```

# php - 如何在 YII Web 应用程序前创建 Android 类型的锁屏

> ID：10961649
> 
> 赞同：0
> 
> 时间：2012-06-09T14:04:45.967
> 
> 标签：php, jquery, yii

提前感谢您的任何建议。

我是长期的开发人员，但对网络东西很陌生，所以请原谅任何无知。

我正在尝试创建一个 android 类型的锁屏（您可以在其中以正确的顺序将鼠标移到块上以创建密码）。之后它将显示我的 yii 应用程序的登录页面。

这将用于我们安装在客户位置以管理我们的东西的盒子。所以客户端只能通过 http web 访问它——不用担心密码嗅探等。

我有一个锁定屏幕的模型，我有一个基本的 yii 应用程序，如果未通过身份验证，它默认为登录屏幕。我假设我需要合并我的模型和登录页面。如果用户在登录屏幕上通过身份验证，也不会显示我的锁定屏幕。

问题：

1.  如何安全地将锁屏密码传递给后端进行身份验证（我在考虑点击按钮时的 POST 方法）
2.  认证时如何隐藏锁屏（在yii/php中决定使用是否认证）
3.  任何更好的想法都会被优雅地接受:-) 3。

**编辑**如果用户输入错误的密码也想重置，你认为另一个按钮/左键单击网格是什么？

假设使用 yiic 创建的示例登录页面。

我的示例锁屏

```
<!DOCTYPE html>
<html>
<head>
   <title></title>
   <style type="text/css">

.untouched {
   background: green;
}

.touched {
   background: blue;
}

.button {
   padding: 12px;
   height: 100px;
   width: 100px;
}
   </style>
   <script src="/jquery.js"></script>
</head>
<body>
   <table>
      <tr>
         <td id="1" class="button untouched"></td>
         <td id="2" class="button untouched"></td>
         <td id="3" class="button untouched"></td>
         <td id="4" class="button untouched"></td>
      </tr>
      <tr>
         <td id="5" class="button untouched"></td>
         <td id="6" class="button untouched"></td>
         <td id="7" class="button untouched"></td>
         <td id="8" class="button untouched"></td>
      </tr>
      <tr>
         <td id="9" class="button untouched"></td>
         <td id="10" class="button untouched"></td>
         <td id="11" class="button untouched"></td>
         <td id="12" class="button untouched"></td>
      </tr>
      <tr>
         <td id="13" class="button untouched"></td>
         <td id="14" class="button untouched"></td>
         <td id="15" class="button untouched"></td>
         <td id="16" class="button untouched"></td>
      </tr>
   </table>
   <h1 id="password"></h1>
   <script>
      $(document).ready(function(){
      });

      $(".untouched").mouseenter(function(){
         if($(this).hasClass("untouched"))
         {
            $("#password").text($("#password").text() + ' ' + $(this).attr("id"));
         }
         $(this).removeClass("untouched").addClass("touched");
      });
   </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:12:07.397

1.  `POST`方法是验证用户的正确方法，永远不要考虑，`GET`因为任何人都可以看到用户名和密码。
2.  您可以`localStorage`使用 javascript 在（首选）或 cookie 中保存 Session ID 或类似内容，以了解用户是否通过 AJAX 验证并访问页面 API，当 API 抛出带有 header 的错误时`401 Unauthorized`，让您的应用再次提示登录页面。
3.  如果您的应用程序需要与您的服务器交互，您可以查看基于 OAuth 的应用程序是如何工作的。

[现场小提琴示例](http://jsfiddle.net/PpFrf/5)

# html - 如何隐藏页面源中的实际内容

> ID：10961653
> 
> 赞同：0
> 
> 时间：2012-06-09T14:06:06.050
> 
> 标签：html, browser, web-scraping, response

我试图隐藏页面源中的实际内容。例如，如果用户通过浏览器访问第一个或第二个等页面，则用户可以查看不同的信息，但是当用户访问第二个页面并右键单击并转到页面源时，用户只能看到第一页信息。这应该适用于“n”页。我有很多网站都是这样做的。我想知道如何做到这一点。我想避免人们抓取我的网站。我想避免响应中的实际数据或信息。我的问题是可以这样做吗？如果可以怎么办？请告诉我是网络域的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:10:24.547

您不能向人们提供内容并阻止他们抓取它。

您可能的意思是，许多现代网站使用 AJAX 从 Web 服务器请求信息，然后用于修改现有页面。它会使刮擦工作多一点，但只是轻微的。一个坚定的人仍然可以从您的网站上抓取内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:08:36.793

这个常见问题有一个长答案和一个简短答案。

简短的回答是……**不，你不能阻止网站刮板**。

长答案.. 你真的，真的，真的，真的，真的，真的，真的，真的，真的，
没有雪球的机会在地狱停止一个坚定的网站刮板。

一旦页面代码进入访问者的网络浏览器，您将失去对其的所有控制。

# c# - 如何确定我的 Windows 用户是域用户？

> ID：10961655
> 
> 赞同：5
> 
> 时间：2012-06-09T14:06:46.373
> 
> 标签：c#, active-directory

我需要找出我的 windows currentuser 是域用户还是本地用户？我得到了我的 CurrentPrincipal ：

```
 System.Threading.Thread.CurrentPrincipal = new WindowsPrincipal(WindowsIdentity.GetCurrent()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T15:04:15.020

通常，Windows 非域用户没有 UPN 名称。如下所示如果我使用 /upn 触发 WHOAMI：

```
C:\>WHOAMI /UPN
ERROR: Unable to get User Principal Name (UPN) as the current logged-on user
       is not a domain user. 
```

基于此使用下面的代码，我们可以找到用户是否是域用户。

```
 var upnName = System.DirectoryServices.AccountManagement.UserPrincipal.Current.UserPrincipalName;
    if (upnName == null)
    {
        //not a domain user
    } 
```

另一种冗长的方法是获取 SAM 格式的用户名。然后使用 DirectoryEntry、DirectorySearcher 和其他 AD API 遍历机器的所有加入域，并查找用户是否在我们迭代的任何域中。

[查找机器ex1](https://stackoverflow.com/questions/4697002/finding-all-domains-for-a-machine-in-c-sharp)和[ex2](https://stackoverflow.com/questions/2633751/get-all-domain-names-on-network)的所有域

[这是如何在 C# 中从 Active Directory 获取域用户信息](http://weblogs.asp.net/jpinquie/archive/2008/02/06/how-to-get-domain-user-information-from-active-directory-in-c.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T15:17:56.390

我没有可供我使用的广告，但我希望这可能会奏效：

```
public bool IsDomainUser()
{
  bool isDomain = false; 
  foreach (var grp in WindowsIdentity.GetCurrent().Groups)
  {
      if (grp.IsValidTargetType(typeof(SecurityIdentifier)))
      {
        SecurityIdentifier si = 
                (SecurityIdentifier)grp.Translate(typeof(SecurityIdentifier));
        // not sure if this is right, but I'm not in a domain and don't have this SID
        // I do have LocalSID however, so you might need to turn it around,
        // if you have LocalSid you are not using a domain acount
        if (si.IsWellKnown(WellKnownSidType.BuiltinDomainSid))
        {
            isDomain = true;
        }
      }
   }
   return isDomain;
 }

   // for debugging list SIDS for current user and its groups
   foreach (var obj in Enum.GetValues(typeof(WellKnownSidType)))
   {

    if (WindowsIdentity.GetCurrent().User.IsWellKnown((WellKnownSidType)obj))
    {
        Debug.WriteLine("User:" + obj.ToString());

    }

    foreach (var grp in WindowsIdentity.GetCurrent().Groups)
    {
        if (grp.IsValidTargetType(typeof(SecurityIdentifier)))
        {
            SecurityIdentifier si = 
                 (SecurityIdentifier) grp.Translate(typeof(SecurityIdentifier));
            if (si.IsWellKnown((WellKnownSidType)obj))
            {
                Debug.WriteLine("Grp: " + grp.ToString() + " : " + obj.ToString());
            }
        }
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-10T16:31:15.827

```
using System.DirectoryServices.AccountManagement;

bool IsDomainUser()
{
    return UserPrincipal.Current.ContextType == ContextType.Domain;
} 
```

# java - android java opencv 2.4 凸壳凸缺陷

> ID：10961660
> 
> 赞同：7
> 
> 时间：2012-06-09T14:07:17.343
> 
> 标签：java, android, opencv, convex-hull

**Open-CV 2.4 Android-Java：**

我搜索了这样的轮廓（MatofPoint 列表）：

```
Imgproc.findContours(roi_mat, contours, hierarchy, cfg.retMode, cfg.apxMode); 
```

然后是凸**包（必须是 MatofInt 的列表）**

```
for (int k=0; k < contours.size(); k++){

     Imgproc.convexHull(contours.get(k), hull.get(k));
} 
```

*凸包想要一个 MatofInt，但 drawcontours 想要一个 MatofPoint.. 那么该怎么办呢？*

提前谢谢..

* * *

**编辑**：@OpenCV4Android

```
for (int k=0; k < contours.size(); k++){
    Imgproc.convexHull(contours.get(k), hullInt);

    for(int j=0; j < hullInt.toList().size(); j++){
        hullPointList.add(contours.get(k).toList().get(hullInt.toList().get(j)));
    }

    hullPointMat.fromList(hullPointList);
    hullPoints.add(hullPointMat);   
}

Imgproc.drawContours( mROI, hullPoints, -1,  new Scalar(255,0,0, 255), 1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T15:35:52.097

看起来 OpenCV Java API 缺少另一个 convehull() 签名：

```
convexHull(MatOfPoint points, MatOfPoint hull); 
```

就像可以在 C++ 中调用一样。

虽然我们没有添加它，但您需要手动创建**MatOfPoint**格式的**船体：**

 ***   使用`MatOfPoint::toArray()`or`MatOfPoint::toList()`获取轮廓点
*   使用`MatOfInt::toArray()`或`MatOfInt::toList()`获取他们的船体索引
*   创建一个新的`Point[]`或`List<Point>`仅具有船体点
*   将其转换为`MatOfPoint`via`MatOfPoint::fromArray()`或`MatOfPoint::fromList()`
*   称呼`Core.drawContours()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T07:29:44.897

在为轮廓添加列表点之前，我们需要**清除 hullPointList**

```
hullPointList .clear();
for(int j=0; j < hullInt.toList().size(); j++){
        hullPointList.add(contours.get(k).toList().get(hullInt.toList().get(j)));
    } 
```**

# c# - 行动 与标准回报

> ID：10961663
> 
> 赞同：6
> 
> 时间：2012-06-09T14:07:28.213
> 
> 标签：c#, design-patterns, asynchronous, task-parallel-library

我不是 C# 人，我更像是 Objective-C 人，但最近我看到了很多实现：

```
public void Method(Action<ReturnType> callback, params...) 
```

代替：

```
public ReturnType Method(params...) 
```

其中一个例子是 MVVM Light Framework，开发人员使用第一种方法实现数据服务合同（和实现），所以我的问题是：为什么会这样？只是喜欢的问题，或者是默认异步的第一种方法（给定函数指针）。如果这是真的，那是标准的回归死亡吗？我问是因为当我看到 API 时，我个人更喜欢第二种方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T14:13:15.483

与返回的 API 不同`ReturnType`，带有回调的版本可以立即返回，并在稍后执行回调。当要返回的值不能立即获得并且获得它需要相当长的延迟时，这可能很重要。例如，从 Web 服务请求数据的 API 可能需要相当长的时间。当结果数据不需要继续时，您可以发起调用，并提供异步回调。这样，调用者将能够立即继续，并在通知可用时处理通知。

考虑一个 API，它获取图像的 URL，并返回图像的内存表示。如果您的 API 是

```
Image GetImage(URL url) 
```

并且您的用户需要提取十张图像，他们要么需要等待每个图像完成加载，然后再请求下一张，要么显式启动多个线程。

另一方面，如果您的 API 是

```
void Method(Action<Image> callback, URL url) 
```

然后您的 API 的用户将同时启动所有十个请求，并在图像异步可用时显示它们。这种方法极大地简化了用户需要进行的线程编程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T14:13:43.173

第一种方法很可能是异步方法，该方法立即返回，一旦操作完成就调用回调。

第二种方法是在 C# 中为（同步）方法执行方法返回的标准方法。

当然，API 设计者可以自由地制作他们认为合适的任何签名。并且可能还有其他基础细节来证明回调样式的合理性。但是，根据经验，如果您看到回调样式，则希望该方法是异步的。

# arduino - 从 xbee 读取模拟值（非串行）

> ID：10961664
> 
> 赞同：1
> 
> 时间：2012-06-09T14:07:37.933
> 
> 标签：arduino, xbee

我正在尝试将模拟值从 xbee 发送到另一个 xbee（已连接到 ARDUINO）。但我不想连续读取这个值（`x=Serial.read();`）。

我想从 arduino 的模拟输入（`x=analogRead(A0);`）中读取这个值。我可以将模拟值从第一个 xbee 输入引脚传递到第二个 xbee 输出引脚并将此引脚与 ex.arduino 的模拟输入 (A0) 连接并进行处理吗？如果可以做到，这是如何发生的？（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:09:23.633

这确实是可能的。Xbee 具有 DAC 和数字线路支持。查看本手册中的用户[手册](ftp://ftp1.digi.com/support/documentation/90000982_A.pdf)

您将需要的信息在第 12 页。这是针对第一系列 xbee 的。

对于系列 2 xbee 的过程是不同的，可以在第 41 页的本手册中找到 [。](ftp://ftp1.digi.com/support/documentation/90000866_C.pdf)祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:12:35.260

我怀疑您最好使用 xbee API 并执行 AT 命令来读取引脚，然后通过串行 TX 将其传输到 arduino RX 输入。

# iphone - 如何调整 CGImageRef 的亮度和对比度

> ID：10961666
> 
> 赞同：0
> 
> 时间：2012-06-09T14:07:43.270
> 
> 标签：iphone, objective-c, core-graphics, quartz-2d

我需要调整`CGImageRef`CoreGraphics/Quartz 的对比度和亮度。

任何想法如何做到这一点？

Quartz Guildeline 和在线搜索没有给出很多结果。

请不要参考OpenGL解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T03:02:01.130

你想要[核心图像](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Conceptual/CoreImaging/)。用于您的过滤器是[CIColorControls](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIColorControls)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T13:22:42.837

如果你想改善你可以使用 GCD 的行为，享受吧！

```
CIContext *ctxt63 = [CIContext contextWithOptions:nil];
        CIFilter *filter63 = [CIFilter filterWithName:@"CIColorControls"];
        [filter63 setDefaults];
        [filter63 setValue:input forKey:kCIInputImageKey];
        [filter63 setValue:@1.8 forKeyPath:kCIInputSaturationKey];
        [filter63 setValue:[NSNumber numberWithFloat:0.8] forKey:@"inputBrightness"];
        [filter63 setValue:[NSNumber numberWithFloat:3.0] forKey:@"inputContrast"];

        CIImage *output63 = [filter63 outputImage];

        //Aplicar el filtro en segundo plano
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            CGImageRef res63 = [ctxt63 createCGImage:output63 fromRect:[output63 extent]];

            dispatch_async(dispatch_get_main_queue(), ^{                   
                UIImage *img63 = [UIImage imageWithCGImage:res63];
                CGImageRelease(res63);
                self.photoView.image = img63;           
            });
        }); 
```

# node.js - 有没有办法阻止 Node.js 中的输入？

> ID：10961667
> 
> 赞同：0
> 
> 时间：2012-06-09T14:07:45.323
> 
> 标签：node.js

[readline](http://nodejs.org/api/readline.html#readline_rl_setprompt_prompt_length)库和大多数其他模块都面向异步/基于事件的用户输入处理。

在继续之前，我需要我的应用程序阻止并等待输入。有没有办法做到这一点，或者这在 Node.js 中根本不支持？

我知道这违背了 Node.js 的理念，但这不是我担心的——我正在开发的应用程序不是传统的 Web 应用程序，我只是使用 Node.js 来开发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:26:04.687

有许多用于 javascript 的库可以更轻松地使用异步。您可以在这里查看一个示例：[https](https://github.com/creationix/step) ://github.com/creationix/step 。

我的大部分 node.js 编程都是使用 CoffeeScript 进行的，并且有一个名为 IcedCoffeeScript 的官方编译器的分支，它支持 await 和 defer 关键字，它允许您编写 CPS/回调风格的编程，而无需无休止地级联回调。你可以在这里找到它：http: [//maxtaco.github.com/coffee-script/](http://maxtaco.github.com/coffee-script/)。

最后，免费小费。当/如果您开始编写自己的模块时，您可能会难以确定是否应该以 CPS/回调样式编写它。当你为这个选择而苦恼时，总是以 CPS/callback 风格编写它，并使用 await/defer 或任何其他 javascript 库使其看起来和感觉像传统的同步编程。以非回调风格编写自己的函数并使用主要支持回调风格编程的库是灾难的根源。

# java - 将一行文本转换为 int 值

> ID：10961670
> 
> 赞同：2
> 
> 时间：2012-06-09T14:08:40.813
> 
> 标签：java, string, int

我正在制作一个需要一个值来播种随机数生成器的游戏。我想拥有它，以便您可以输入文本并将其转换为`long`种子的值`Random()`。

该程序在命令行中运行，我假设我需要使用`Scanner`，我**可以**使用它。

我想知道的是如何把`Scanner`得到的东西变成一个`long`价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:20:18.370

不确定您是否只想从任何文本生成种子。这是一个建议：

```
 String str = "Sample string";
    long seed = 0;
    for (int i = 0; i < str.length(); i++) {
        char ch = str.charAt(i);               
        seed = seed + (long)ch;
    }

    Random ran = new Random(seed); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-31T03:37:52.523

您可以使用该`String.hashCode()`方法。这就是 Java 版本的 Minecraft 所做的。

**编辑：**这实际上返回 a`int`而不是 a `long`，但我会保留它以防它对任何人都有帮助。

# php - 没有内部类的 PHP Builder 模式

> ID：10961673
> 
> 赞同：15
> 
> 时间：2012-06-09T14:08:51.177
> 
> 标签：php, design-patterns, builder

我一直在阅读 Joshua Bloch 的 Effective Java。我也在 PHP 中开发，我想实现第[2 项中概述的构建器模式](https://stackoverflow.com/questions/5007355/builder-pattern-in-effective-java)，但是 PHP 没有内部类。有没有办法在 PHP 中实现这种模式，保持产品的构造函数私有？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-09T17:53:24.317

由于[PHP 不支持内部类](https://stackoverflow.com/questions/4351782/how-do-i-use-inner-classes-in-php)，因此产品类上必须有一个公共方法来创建它的实例。考虑以下 PHP 类：

```
<?php
class NutritionalFactsBuilder {
    private $sodium;
    private $fat;
    private $carbo;

    /**
     * It is preferred to call NutritionalFacts::createBuilder
     * to calling this constructor directly.
     */
    function __construct($s) {
        $this->sodium = $s;
    }

    function fat($f) {
        $this->fat = $f;
        return $this;
    }

    function carbo($c) {
        $this->carbo = $c;
        return $this;
    }

    function getSodium() {
        return $this->sodium;
    }

    function getFat() {
        return $this->fat;
    }

    function getCarbo() {
        return $this->carbo;
    }

    function build() {
        return new NutritionalFacts($this);
    }
}

class NutritionalFacts {
    private $sodium;
    private $fat;
    private $carbo;

    static function createBuilder($s) {
        return new NutritionalFactsBuilder($s);
    }

    /**
     * It is preferred to call NutritionalFacts::createBuilder
     * to calling this constructor directly.
     */
    function __construct(NutritionalFactsBuilder $b) {
        $this->sodium = $b->getSodium();
        $this->fat = $b->getFat();
        $this->carbo = $b->getCarbo();
    }
}

echo '<pre>';
var_dump(NutritionalFacts::createBuilder(10)->fat(23)->carbo(1)->build());
echo '</pre>';
?> 
```

请注意，在上面的示例中，构造函数`NutritionalFacts`是公共的。然而，由于语言的限制，拥有一个公共构造函数一点也不坏。由于必须使用 a 调用构造函数`NutritionalFactsBuilder`，因此实例化的方法数量有限`NutritionalFacts`。让我们比较一下：

```
// NutritionalFacts Instantiation #0
$nfb = new NutritionalFactsBuilder(10);
$nfb = $nfb->fat(23)->carbo(1);
$nf0 = new NutritionalFacts($nfb);

// NutritionalFacts Instantiation #1
$nfb = new NutritionalFactsBuilder(10);
$nf1 = $nfb->fat(23)->carbo(1)->build();

// NutritionalFacts Instantiation #2
$nf2 = NutritionalFacts::createBuilder(10)->fat(23)->carbo(1)->build();

// NutritionalFacts Instantiation #3
// $nf3 = (new NutritionalFactsBuilder(10))->fat(23)->carbo(1)->build(); 
```

为了最大限度地利用函数链接，“`NutritionalFacts`实例化#2”是首选用法。

~~“`NutritionalFacts`实例化#3”展示了 PHP 语法的另一个细微差别；[不能在新实例化的对象上链接方法。](https://stackoverflow.com/questions/2188629/php-how-to-chain-method-on-a-newly-created-object)~~ **更新：**在 PHP 5.4.0 中，现在[支持](http://docs.php.net/manual/en/migration54.new-features.php)“`NutritionalFacts`实例化 #3”中的语法。虽然我还没有测试过。

* * *

**使构造函数私有**

您可以将构造函数设为私有，但我不建议这样做。如果将构造函数设为私有，则需要一个公共的静态工厂方法，如以下代码片段所示。看下面的代码，我们不妨将构造函数设为公开，而不是仅仅为了让构造函数私有而引入间接。

```
class NutritionalFacts {
    private $sodium;
    private $fat;
    private $carbo;

    static function createBuilder($s) {
        return new NutritionalFactsBuilder($s);
    }

    static function createNutritionalFacts($builder) {
        return new NutritionalFacts($builder);
    }

    private function __construct($b) {
        $this->sodium = $b->getSodium();
        $this->fat = $b->getFat();
        $this->carbo = $b->getCarbo();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-11T20:13:20.160

不变性是好的，而且绝对值得努力，这适用于 PHP，就像它适用于任何其他语言一样。不变性让您确信您不必担心实例会在您不知情的情况下突然发生变异。

话虽如此，即使没有内部类，也有一种简单的方法可以实现构建器模式来构建不可变对象（尽管现在可以使用 PHP 7）。

第一个重要的构建块是实际不可变类和构建器的公共基类。这允许他们访问彼此的属性。也称为友元类或可通过其他语言的扩展访问修饰符解决的东西，PHP 没有。请注意，克隆能力受到限制，克隆不可变对象是没有意义的，但`protected`稍后会详细介绍修饰符。

```
abstract class NutritionalFactData {

    protected $sodium = 0;
    protected $fat = 0;
    protected $carbo = 0;

    protected function __clone() {}

} 
```

不可变类很简单，带有愚蠢的示例 getter 和默认构造函数。请注意`final`类本身的修饰符，并且它根本不知道构建器类。

```
final class NutritionalFacts extends NutritionalFactData {

    public function getSodium() {
        return $this->sodium;
    }

    public function getFat() {
        return $this->fat;
    }

    public function getCarbo() {
        return $this->carbo;
    }

} 
```

现在是实际的构建器实现。请注意我们如何直接对不可变类的实例进行操作，并且在调用 build 方法时我们只是简单地克隆它。这确保了以后对构建器的设置器的调用不会改变先前构建的实例，并确保此类实例的接收者不必自己处理克隆。

```
final class NutritionalFactBuilder extends NutritionalFactData {

    private $nutritional_facts;

    public function __construct() {
        $this->nutritional_facts = new NutritionalFacts;
    }

    public function build() {
        return clone $this->nutritional_facts;
    }

    public function setSodium($sodium) {
        $this->nutritional_facts->sodium = $sodium;
        return $this;
    }

    public function setFat($fat) {
        $this->nutritional_facts->fat = $fat;
        return $this;
    }

    public function setCarbo($carbo) {
        $this->nutritional_facts->carbo = $carbo;
        return $this;
    }

} 
```

为了完整起见，使用示例：

```
var_dump(
    (new NutritionalFactBuilder)
        ->setSodium(21)
        ->setFat(42)
        ->build()
); 
```

这是[可运行的示例](https://repl.it/@Spyryto/Builder-Pattern)。

我认为很明显，我们现在可以实现任意数量的构建器实现。这个例子并不真正需要，但我们可以考虑涉及更多属性的其他构造。就像维基百科的（非常糟糕的）建造者模式文章中给出的汽车示例。我们可能希望为已知汽车类别预先配置构建器。

```
abstract class CarParts {}

final class Car extends CarParts {}

abstract class CarBuilder extends CarParts {
    abstract public function build(): Car;
}

final class CompactCarBuilder extends CarBuilder {}

final class SportsCarBuilder extends CarBuilder {}

final class RaceCarBuilder extends CarBuilder {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-30T10:05:34.740

在 Builder 模式的四人帮描述中，您会发现不需要内部类。关键特性是 Director 和 Builder 接口之间的聚合关系，它为组合一系列 Product 实现提供了“蓝图”。

你可以在这里找到很多 PHP Builder 模式的例子：

[http://www.php5dp.com/category/design-patterns/builder/](http://www.php5dp.com/category/design-patterns/builder/)

干杯，比尔

# go - 从 Go 中的字符串中解析多个整数？

> ID：10961674
> 
> 赞同：3
> 
> 时间：2012-06-09T14:08:59.430
> 
> 标签：go

对不起标题，我不知道怎么说

我对此代码有疑问

```
func ip2long(ip string) (ret int64) {
  p:= strings.Split(ip, ".")
  n, _:= strconv.Atoi(p[0])
  ret += int64(n)*16777216 
  n, _= strconv.Atoi(p[1])
  ret += int64(n)*65536 
  n, _= strconv.Atoi(p[2])
  ret += int64(n)*256
  n, _= strconv.Atoi(p[3])
  ret += int64(n)

  return 
} 
```

我想将IP地址转换为整数

你看我写了这么丑的代码

首先从 strconv.Atoi 检索数字，然后将其转换为 int64

如何简化这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T18:02:07.050

如果要从字符串中解析多个整数，请尝试使用 Sscanf 函数，如下所示：

```
func main() {
    var ip [4] uint32
    addr := "192.168.0.1"
    _, err := fmt.Sscanf(addr, "%d.%d.%d.%d", &ip[0], &ip[1], &ip[2], &ip[3])
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(ip)
    fmt.Println(ip[0]<<24 + ip[1]<<16 + ip[2]<<8 + ip[3])
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T14:50:48.397

这个结构很重，但如果您可能应该捕获解析错误，则看起来更自然。

话虽这么说，该确切问题的正确解决方案是使用 `net.ParseIP`构建[IP的现有功能](http://golang.org/pkg/net/#IP)

```
func ParseIP(s string) IP 
```

如果您必须保留当前的函数原型，我建议：

```
func ip2long(s string) (ret int64) {
    bip := ([]byte)(net.ParseIP(s).To4())
    return (int64)(bip[0]) * (1 << 24) + (int64)(bip[1]) * (1 << 16) + (int64)(bip[2]) * (1 << 8) + (int64)(bip[3])
} 
```

请注意，您可以在 ParseIP 的返回上添加一个测试（如果出现错误，则为 nil）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T15:21:45.977

我不推荐它，因为你会忽略错误，但你可以编写一个函数来给你第一个值：

```
func first(x int, _ error) int {return x;} 
```

然后`first(strconv.Atoi(p[0]))`在您的代码中使用。

不过，对于您列出的特定代码，我将使用（经过充分测试！）标准库的 net.ParseIP() 和 net.To4() 函数：

```
// WARNING untested code!!

type InvalidIP string
func (InvalidIP ipStr) Error() string {
    return "Invalid IPv4 address: "+ipStr
}

func ip2long(ipStr string) (ret int64, err error) {
    var ip net.IP
    if ip = net.ParseIP(ipStr); ip == nil {
        return 0, InvalidIP(ip)
    }
    if ip = ip.To4(); ip == nil {
        return 0, InvalidIP(ip)
    }
    for b := range ip {
        ret <<= 8
        ret += b
    }
    return ret, nil
} 
```

请注意，上面的代码添加了错误检查，并且还接受 IPv6 格式的 v4 地址“::FFFF:C0A8:0101”。考虑您是否真的需要一个 int64 类型来表示 IP 地址，或者标准库的 net.IP 类型是否足以满足您的目的。

# tfs - 如何将 MSF 敏捷转换为 Scrum 2.0

> ID：10961677
> 
> 赞同：4
> 
> 时间：2012-06-09T14:09:38.070
> 
> 标签：tfs, tfs-2012

我刚刚从 TFS 2010 迁移到 TFS 2012 RC。

由于内置的​​升级功能，我还更新了我的团队项目到 MSF Agile 6，但我想使用 SCRUM 模板而不是使用 MSF Agile。

我还没有找到实现这一目标的方法。

您对如何做到这一点有任何想法，还是我坚持 MSF 敏捷流程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T14:38:15.717

You can fully move from one process template to another.

I have detailed 7 ways to achieve this with all of the pros and cons in a blog post:

*   [Upgrading your Process Template in Team Foundation Server](http://nakedalm.com/do-you-know-how-to-upgrade-a-process-template-but-still-keep-your-data-intact/)

Now you, I think are looking at #7 as an in-place move from MSF Agile to the Visual Studio Scrum Template. If you follow the instructions for #7 by renaming Work Items and importing new ones then you should be good. I am doing this for a customer today and I have actioned it a number of times and it works well.

*   [Process Template Upgrade #7 – Rename Work Items and Import new ones](http://nakedalm.com/process-template-upgrade-7-overwrite-retaining-history-with-limited-migration/)
*   [Configure features in Team Foundation Server](http://nakedalm.com/configure-features-in-team-foundation-server-2013/)

Depending on how you decide to do this there is some data loss. You can't get away with from that whatever you do, but this minimises that loss and allows you to fully move over to the new Process Template. Make sure that you add all of the fields that do not exist in the old template and you may want to then rename those old fields with some tag so that you can find them later...

Here is a clean (and most recent) Agile (whatever version) to Visual Studio 2.0 script. Make sure you read the blog posts as well as they define what you are trying to achieve with each step.

```
SET TP="Mt=yTeamProject"
SET COLLECTION="http://myTFSServer:8080/tfs/myCollection"
SET PTROOT=C:\temp\Microsoft Visual Studio Scrum 2.0

witadmin listwitd /collection:%COLLECTION% /p:%TP%
witadmin renamewitd /collection:%COLLECTION% /p:%TP% /n:"User Story" /new:"Product Backlog Item"
witadmin renamewitd /collection:%COLLECTION% /p:%TP% /n:"Issue" /new:"Impediment"

witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\Bug.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\CodeReviewRequest.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\CodeReviewResponse.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\FeedbackRequest.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\FeedbackResponse.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\Impediment.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\SharedStep.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\ProductBacklogItem.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\Task.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\ProductBacklogItem.xml"
witadmin importwitd /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\TypeDefinitions\TestCase.xml"

witadmin importcategories /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\Categories.xml"
witadmin importcommonprocessconfig /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\Process\CommonConfiguration.xml"
witadmin importagileprocessconfig /collection:%COLLECTION% /p:%TP% /f:"%PTROOT%\WorkItem Tracking\Process\AgileConfiguration.xml"

tfpt addprojectreports  /collection:%COLLECTION% /teamproject:%TP% /processtemplate:"Visual Studio Scrum 2.0" 
```

**This script is used at your own risk and should only be used against a test server until you are satisfied that you have a working process.**

There is also a built in feature in 2012 and 2013 to 'enable the new features' that injects what is needed to make your process template work.

*   [Configure features in Team Foundation Server](http://nakedalm.com/configure-features-in-team-foundation-server-2013/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T16:54:23.913

这可以通过[TFS 集成工具包](http://tfsintegration.codeplex.com/)实现。请查看此[SO 线程](https://stackoverflow.com/questions/2222200/can-we-migrate-to-a-new-tfs-process-template-and-keep-history/9235958#9235958)以获取更多信息。

# opengl - 在单个 Begin-End 块中绘制许多 OpenGL 点的有效方法？

> ID：10961678
> 
> 赞同：0
> 
> 时间：2012-06-09T14:09:41.317
> 
> 标签：opengl, rendering, points

如果您开始渲染点，渲染大量顶点，然后结束，您将获得明显更好的性能，而不是您开始点，渲染顶点，结束并重复大量时间（例如，在平移和缩放操作期间重绘） ，比如说，200,000 点更平滑）。

我想这可能是有道理的，但它令人失望。有没有办法恢复性能，同时仍然在自己的开始-结束块中渲染每个点？

背景：

我想设计一个控件，它可以包含大量（在极端情况下超过一百万）“对象”，每个对象都进行自己的渲染。许多这些对象将自己表示为点。

如果我让十万个点分别在自己的开始-结束块中呈现自己，我会受到重大的性能影响（而不是在单个开始-结束块中呈现它们）。因此，似乎我可能必须让容器知道对象呈现自己的方式（例如，开始点，告诉所有需要呈现点的东西，然后结束）。

这弄乱了我想要的显示对象关系的独立性。它还会通过选择来搞乱命中测试，因为我认为您不能在开始-结束点块*内的顶点中添加名称，对吗？*

仅供参考（如果这有帮助）我的项目将显示 2D 场景（使用正射投影）并且需要命中测试以确定用户可能单击的相关对象。通常，对象将表示“轨迹”，其中包含用线连接的各个点。位置数据通常是静态的，但点和轨迹颜色以及显示表示可能会因用户设置和选择信息而改变。一个例外——“回放”模式可能允许用户一次只能看到一个轨迹点（回放中的“当前”点），并从一个点到下一个点逐步进行时间。但是，即使在那种情况下，我也假设我会根据播放中的当前时间简单地更改每个轨道上实际显示的点（在其“静态”位置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:01:28.977

为了解决这个问题，我开始使用 VBO（它确实加快了速度）。然后，我允许我的“轨道”对象分别绘制自己的一组点以及连接这些点的线（每个轨道使用两个 DrawArray：一个用于线带，一个用于点）。每个点不必独立于其他点来绘制自身——这是主要的性能改进。

但是，我仍然需要针对这些点进行命中测试，所以..

最后，我需要允许每个显示的对象（在本例中为轨道）执行自己的选择例程，以便每个对象都可以执行有效选择所需的操作。对于轨道，他们采取了两个步骤。首先，轨道用一个名称 (0) 为其整个线带命名并执行选择。如果导致命中，则轨道会进行第二次渲染，命名每个单独的点和线段以针对轨道的每个部分进行命中测试。这使得对每个点的命中测试非常快。

顺便说一句，我正在使用 .Net (C#) 进行编程。有了它，我创建了一个`SelectEventArgs`派生自的类 ( )`EventArgs`来描述正在显示的对象的选择标准。我的`SelectEventArgs`班级包括一个旨在填充选定对象的列表。然后显示类有一个`EventHandler<SelectEventArgs>`事件。将对象添加到显示时，它会订阅该事件。当事件触发时，每个对象确定它是否被选中，并用其信息填充所选对象的列表（在事件中传递的 SelectEventArgs 中）。事件触发后，我可以访问`SelectEventArgs`实例中返回的对象列表来处理用户交互。我发现这是创建灵活的显示对象和选择工具的一个很好的模式。

# makefile - 编写和运行 make 文件

> ID：10961680
> 
> 赞同：0
> 
> 时间：2012-06-09T14:10:01.157
> 
> 标签：makefile

我在 Windows 机器上，我下载了一个带有 1 个 cpp、1 个标头和一个 makefile 的程序。现在同一个程序有几个 cpp 和头文件位于源和头文件夹（包括原始 cpp）。我如何编辑 make 文件以对应此更改，以及如何运行它（我以前从未运行过 make 文件）。

这是原始的makefile ...

```
 Code.exe: code.cpp
    cl /nologo $** 

clean: dummy
    -@del code.exe
    -@del code.obj

dummy: 
```

# java - 多线程客户端-服务器聊天，使用套接字

> ID：10961683
> 
> 赞同：0
> 
> 时间：2012-06-09T14:10:45.467
> 
> 标签：java, sockets, client-server

服务器和客户端使用我自己的协议进行通信，该协议看起来像 XMPP。我应该实现聊天应用程序。因此，当一个用户写入 String 时，它应该立即通过服务器发送到其他客户端。我在服务器上有方法 sendToAll。但是用户只有在按下回车时才能看到其他用户的消息。 **用户如何在不按回车键的情况下接收消息？**

所以这是我的客户：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;

import org.apache.log4j.Logger;

import dataart.practice.protocols.XMLProtocol;

public class Client {
public static final String SERVER_HOST = "localhost";
public static final Integer SERVER_PORT = 4444;
public static final Logger LOG = Logger.getLogger(Client.class);
private static BufferedReader in;
private static PrintWriter out;
private static BufferedReader inu;

public static void main(String[] args) throws IOException {

    System.out.println("Welcome to Client side");
    XMLProtocol protocol = new XMLProtocol();
    Socket fromserver = null;

    fromserver = new Socket(SERVER_HOST, SERVER_PORT);

    in = new BufferedReader(new InputStreamReader(fromserver.getInputStream()));

    out = new PrintWriter(fromserver.getOutputStream(), true);

    inu = new BufferedReader(new InputStreamReader(System.in));

    String fuser, fserver;
    while (true){
        if(in.ready()){//fserver = in.readLine()) != null) {
        System.out.println("asdasdsd");

        fuser = inu.readLine();
        if (fuser != null) {
            if (fuser.equalsIgnoreCase("close"))
                break;
            if (fuser.equalsIgnoreCase("exit"))
                break;

            protocol.setComId((long) 0);
            protocol.setContent(fuser);
            protocol.setLogin("Guest");

            try {

                JAXBContext jaxbContext = JAXBContext.newInstance(XMLProtocol.class);
                Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
                jaxbMarshaller.setProperty(Marshaller.JAXB_FRAGMENT, false);
                jaxbMarshaller.marshal(protocol, out);
                out.flush();

            } catch (JAXBException e) {
                LOG.error("Error while processing protocol" + e);
            }
        }
        }

    }

    out.close();
    in.close();
    inu.close();
    fromserver.close();
}

} 
```

以及带有 ServerThread 的服务器。

```
public static void main(String[] args) throws IOException {

    LOG.trace("Server started");
    ServerSocket s = new ServerSocket(SERVER_PORT);

    try {
        while (true) {
            LOG.trace("Waiting for connections...");
            Socket socket = s.accept();
            try {
                // new ServerThread(socket);
                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
                userCounter++;
                addUser("Guest" + userCounter, out);
                LOG.trace("User " + userCounter + " has been added!");
                exec.execute(new ServerThread(socket, in, out));

            } catch (IOException e) {
                socket.close();
            }
        }
    } finally {
        s.close();
    }
} 
```

服务器线程。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.StringReader;
import java.net.Socket;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;
import javax.xml.transform.stream.StreamSource;

import org.apache.log4j.Logger;

import dataart.practice.protocols.XMLProtocol;
import dataart.practice.serverUtils.Commands;

public class ServerThread implements Runnable {
    private static final Logger LOG = Logger.getLogger(ServerThread.class);

    private XMLProtocol protocol;
    private Socket socket;
    private BufferedReader in;
    private PrintWriter out;
    private String buffer = "";// may be exist another. way but it's not working
    private Boolean login = false;

    public ServerThread(Socket s, BufferedReader in, PrintWriter out) throws IOException {
        this.in = in;
        this.out = out;
        out.println("</XMLProtocol>");
        socket = s;
        new Thread(this);       
    }

    public void run() {
        try {
            while (true) {              
                if ((buffer = in.readLine()) != null) {
                    if (buffer.endsWith("</XMLProtocol>")) {
                        protocol = getProtocol(buffer);
                        //Server.onlineUserList.put(protocol.getLogin(), out);
/*                      if (!login){
                            out.println("Maybe login first?");

                        }
*/                      
                        LOG.trace("Getting message from user: " + protocol.getLogin() + " recived message: " + protocol.getContent());
                        ///out.println(protocol.getLogin() + " says:" + protocol.getContent());
                        Server.sendToAll(protocol.getContent()+"</XMLProtocol>");

                    } else {
                        LOG.trace("Nop protocol do not send with it end");
                    }
                }
            }
        } catch (IOException e) {
            LOG.error("Error in reading from stream: " + e);
        } catch (JAXBException e) {
            LOG.error("Error in Marshalling: " + e);
        } finally {
            try {
                socket.close();
                LOG.trace("Socket closed");
            } catch (IOException e) {
                LOG.error("Socket no closed" + e);
            }
        }
    }

    public XMLProtocol getProtocol(String buffer) throws JAXBException {
        JAXBContext jaxbContext = JAXBContext.newInstance(XMLProtocol.class);
        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        return (XMLProtocol) jaxbUnmarshaller.unmarshal(new StreamSource(new StringReader(buffer)));
    }

    public Boolean loginIn(XMLProtocol protocol) {

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:09:14.960

您将需要对客户端和服务器进行多线程处理。客户端将需要一个线程来侦听来自服务器的消息并将它们写入他/她的屏幕，以及一个等待他/她的键盘输入并将其发送到服务器的线程。同样，对于与服务器的每个连接，它都需要一个线程等待来自客户端的输入，以及一个线程将其他用户的输出发送到客户端。

在您按 Enter 之前看不到传入消息的原因是由于客户端的 while 循环。它现在已被注释掉，但看起来您的循环曾经：
- 从服务器读取传入消息
- 从键盘读取输入
- 将输入发送到服务器

因此，您从服务器读取任何可用的内容，然后客户端在再次从服务器读取之前等待更多的键盘输入（在下一次迭代中）。

根据我的理解，另一个建议是，创建 JAXBContext 可能是一项昂贵的操作。您无需在每次发送消息时都重新创建它。考虑在您的服务器和客户端中初始化一个，然后为每个编组/解组重用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T15:56:52.903

试试这个，

Do `Not use BufferedReader() with PrintWriter`..... `PrintWriter`本身就是字节级套接字数据和字符形式之间的桥梁。

例如：

我正在为单个客户端显示，对 n 个客户端使用 while 循环

```
ServerSocket s = new ServerSocket(4444);

Socket incoming = s.accept();

OutputStream output = s.getOutputStream();

PrintWriter pw = new PrintWriter(output,true); 
```

System.out.println(pw.write(new Scanner(System.in).nextLine()));

# wordpress - Wordpress：分类法的动态查询

> ID：10961684
> 
> 赞同：1
> 
> 时间：2012-06-09T14:11:07.577
> 
> 标签：wordpress, search, taxonomy

我有一个**搜索表单**，其中包含几个“选择”，其中列出了**分类的各种****术语**（“州”）。通过按下提交按钮，我将信息传递到构建查询的搜索结果页面。

 **问题是我需要***动态构建查询***，因为不必为每个“选择”选择值。所以有些值发送为空。

例如：

```
$country = $_POST["country"];
$city = $_POST["city"]; 
```

如果 $city 为空，则查询应如下所示：

```
$my_query = new WP_Query(array(
    'state' => $country
    )
); 
```

但是如果 $country 和 $city 不为空，则 de 查询应该是这样的：

```
$my_query = new WP_Query(array(
    'state' => $country,
    'state' => $city
    )
); 
```

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T01:44:48.370

我会这样做：

```
$city = isset($_POST['city']) ? $_POST['city'] : null;
$country = isset($_POST['country']) ? (isset($_POST['city']) ? ' ('. $_POST['country'] .')' : $_POST['country']) : null;

$state = $city . $country; 
```

此代码将显示：

*   城市和国家：加拉加斯（委内瑞拉）
*   唯一城市：加拉加斯
*   唯一国家：委内瑞拉

你的查询：

```
$my_query = new WP_Query(array(
        'state' => $state,
    )
); 
```**

# .net - 继承和复合外键 - 一部分在基类中，另一部分在派生类中

> ID：10961690
> 
> 赞同：17
> 
> 时间：2012-06-09T14:12:21.143
> 
> 标签：.net, entity-framework, inheritance, ef-code-first, table-per-type

我在为以下示例数据库架构（在 SQL Server 中）创建实体框架代码优先映射时遇到问题：

![具有复合外键的数据库模式](../Images/c77a5e3b95560c783e9cc5408b29fb2d.png)

每个表都包含一个`TenantId`作为所有（复合）主键和外键（多租户）的一部分。

A`Company`是 a`Customer`或 a `Supplier`，我尝试通过 Table-Per-Type (TPT) 继承映射对此进行建模：

```
public abstract class Company
{
    public int TenantId { get; set; }
    public int CompanyId { get; set; }

    public int AddressId { get; set; }
    public Address Address { get; set; }
}

public class Customer : Company
{
    public string CustomerName { get; set; }

    public int SalesPersonId { get; set; }
    public Person SalesPerson { get; set; }
}

public class Supplier : Company
{
    public string SupplierName { get; set; }
} 
```

使用 Fluent API 进行映射：

```
modelBuilder.Entity<Company>()
    .HasKey(c => new { c.TenantId, c.CompanyId });

modelBuilder.Entity<Customer>()
    .ToTable("Customers");

modelBuilder.Entity<Supplier>()
    .ToTable("Suppliers"); 
```

基表与一个（每个公司都有一个地址，无论是客户还是供应商）具有`Companies`一对多的关系，我可以为这个关联创建一个映射：`Address`

```
 modelBuilder.Entity<Company>()
     .HasRequired(c => c.Address)
     .WithMany()
     .HasForeignKey(c => new { c.TenantId, c.AddressId }); 
```

外键由主键的一部分 - the `TenantId`- 和一个单独的列 - the组成`AddressId`。这行得通。

正如您在数据库模式中看到的那样，从数据库的角度来看，和之间的关系`Customer`基本上与和之间`Person`的一对多关系相同——外键再次由（主键的一部分）和列组成. （只有一个客户有一个销售人员，而不是一个，因此这次关系在派生类中，而不是在基类中。）`Company``Address``TenantId``SalesPersonId``Supplier`

我尝试以与以前相同的方式为这种与 Fluent API 的关系创建映射：

```
modelBuilder.Entity<Customer>()
    .HasRequired(c => c.SalesPerson)
    .WithMany()
    .HasForeignKey(c => new { c.TenantId, c.SalesPersonId }); 
```

但是当 EF 尝试编译模型时，`InvalidOperationException`会抛出一个：

> 外键组件“TenantId”不是“客户”类型的声明属性。验证它没有被明确地从模型中排除，并且它是一个有效的原始属性。

显然，我无法从基类中的属性和派生类中的另一个属性组成外键（尽管在数据库模式中，外键由派生类型表中*的*`Customer`列组成）。

我尝试了两项修改以使其正常工作：

*   `Customer`将和之间的外键关联`Person`改为独立关联，即去掉属性`SalesPersonId`，然后试映射：

    ```
    modelBuilder.Entity<Customer>()
        .HasRequired(c => c.SalesPerson)
        .WithMany()
        .Map(m => m.MapKey("TenantId", "SalesPersonId")); 
    ```

    它没有帮助（我真的不希望，它会），例外是：

    > 指定的架构无效。...类型中的每个属性名称都必须是唯一的。已定义属性名称“TenantId”。

*   将 TPT 更改为 TPH 映射，即删除了两个`ToTable`调用。但它抛出了同样的异常。

我看到两种解决方法：

*   `SalesPersonTenantId`在课堂上引入 a `Customer`：

    ```
    public class Customer : Company
    {
        public string CustomerName { get; set; }

        public int SalesPersonTenantId { get; set; }
        public int SalesPersonId { get; set; }
        public Person SalesPerson { get; set; }
    } 
    ```

    和映射：

    ```
    modelBuilder.Entity<Customer>()
        .HasRequired(c => c.SalesPerson)
        .WithMany()
        .HasForeignKey(c => new { c.SalesPersonTenantId, c.SalesPersonId }); 
    ```

    我对此进行了测试，并且可以正常工作。但除了. `SalesPersonTenantId`_ 此列是多余的，因为从业务角度来看，两列必须始终具有相同的值。`Customers``TenantId`

*   `Company`放弃继承映射，在and 和and`Customer`之间创建一对一的映射。那么必须成为一个具体的类型，而不是抽象的，我将在. 但是这个模型不能正确地表达一个公司*要么*是客户*要么*是供应商，并且不能同时是两者。我没有测试它，但我相信它会起作用。`Company``Supplier``Company``Company`

 **如果有人喜欢尝试它，我会将我测试过的完整示例（控制台应用程序，参考 EF 4.3.1 程序集，通过 NuGet 下载）粘贴到此处：

```
using System;
using System.Data.Entity;

namespace EFTPTCompositeKeys
{
    public abstract class Company
    {
        public int TenantId { get; set; }
        public int CompanyId { get; set; }

        public int AddressId { get; set; }
        public Address Address { get; set; }
    }

    public class Customer : Company
    {
        public string CustomerName { get; set; }

        public int SalesPersonId { get; set; }
        public Person SalesPerson { get; set; }
    }

    public class Supplier : Company
    {
        public string SupplierName { get; set; }
    }

    public class Address
    {
        public int TenantId { get; set; }
        public int AddressId { get; set; }

        public string City { get; set; }
    }

    public class Person
    {
        public int TenantId { get; set; }
        public int PersonId { get; set; }

        public string Name { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<Company> Companies { get; set; }
        public DbSet<Address> Addresses { get; set; }
        public DbSet<Person> Persons { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Company>()
                .HasKey(c => new { c.TenantId, c.CompanyId });

            modelBuilder.Entity<Company>()
                .HasRequired(c => c.Address)
                .WithMany()
                .HasForeignKey(c => new { c.TenantId, c.AddressId });

            modelBuilder.Entity<Customer>()
                .ToTable("Customers");

            // the following mapping doesn't work and causes an exception
            modelBuilder.Entity<Customer>()
                .HasRequired(c => c.SalesPerson)
                .WithMany()
                .HasForeignKey(c => new { c.TenantId, c.SalesPersonId });

            modelBuilder.Entity<Supplier>()
                .ToTable("Suppliers");

            modelBuilder.Entity<Address>()
                .HasKey(a => new { a.TenantId, a.AddressId });

            modelBuilder.Entity<Person>()
                .HasKey(p => new { p.TenantId, p.PersonId });
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());
            using (var ctx = new MyContext())
            {
                try
                {
                    ctx.Database.Initialize(true);
                }
                catch (Exception e)
                {
                    throw;
                }
            }
        }
    }
} 
```

**问题：有没有办法将上面的数据库模式映射到具有实体框架的类模型？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T16:59:36.977

好吧，我似乎无法评论任何事情，所以我将其添加为答案。

我为这个问题在 CodePlex 上创建了一个问题，希望他们能尽快调查。敬请关注！

[http://entityframework.codeplex.com/workitem/865](http://entityframework.codeplex.com/workitem/865)

* * *

CodePlex 问题的结果（同时已关闭）是问题中的场景不受支持，目前没有计划在不久的将来支持它。

来自 CodePlex 实体框架团队的引述：

> 这是 EF 不支持在基类型中定义属性然后将其用作派生类型中的外键的更基本限制的一部分。不幸的是，这是一个很难从我们的代码库中移除的限制。鉴于我们没有看到很多对此的请求，因此我们不打算在现阶段解决此问题，因此我们将关闭此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:34:13.870

不是解决方案，而是解决方法（*）：一个不错的选择是使用单个 Id 列（as），通常是自动递增的，并使用外键、唯一索引等提供数据库完整性。更复杂的数据完整性可以通过触发器，所以也许您可能会朝着那个方向前进，但您可能会将其留给应用程序业务逻辑级别，除非应用程序真的以数据为中心。但是由于您使用的是实体框架，因此可以安全地假设这不是您的情况......？

(*) 由 ivowiblo 建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:27:12.043

我认为拥有 Table --> TableId (PK) --> 其他列（包括 FK）更简单并降低了复杂性。

因此，在您的示例中 - 将 CustomerId 列添加到 Customers 表将解决您的问题。**

# javascript - Javascript 和 jQuery 使 div 成为基于选项卡的内容页面

> ID：10961694
> 
> 赞同：4
> 
> 时间：2012-06-09T14:12:43.500
> 
> 标签：javascript, jquery, html, css

我最近对仅使用 Javascript 和 jQuery 的工作申请进行了 30 分钟的测试。不必设计得很好或任何东西。我用 Javascript 和 jQuery 创建了一个非常基本的“30 分钟”页面，我认为它是“好的”。我只是想获得一些反馈，如果有更有效/更好的方法来做到这一点？事实证明，我没有得到这份工作.. 一直在学习，而且这份工作离我住的地方很远。

无论如何，给出的原始 HTML 页面如下，然后是我将基本 HTML 转换为基于选项卡的内容页面的谦虚尝试 - 再次在 30 分钟内。

```
<html>
<head>

<!-- stylesheet, javascript, etc. here -->

</head>
<body>

<h1>My Page</h1>

<h2 class="subheading">The first section</h2>
<div class="content">
    <p>Lorem ipsum...</p>
</div>

<h2 class="subheading">The second section</h2>
<div class="content">
    <img src="/some_image" alt="Image" title="Image"></img>
    <p>Some other text</p>
</div>

<h2 class="subheading">The third section</h2>
<div class="content">
    And some more text here
</div>

<div class="footer">
    This is at the foot of the page
</div>

</body>
</html> 
```

好的，所以我的谦虚尝试如下：

```
<html>
<head>
    <title>Test JS page</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <style type="text/css">
        #tabs
        {
            width:457px;
            height:60px;
        }
        #tab1, #tab2, #tab3
        {
            width:150px;
            border:1px solid #ccc;
        }
        #tab1
        {
            float:left;
        }
        #tab3, #tab2
        {
            float:right;
        }
        #tab2_content, #tab3_content
        {
            display:none;
        }
        .clear
        {
            clear:both;
        }
        #content
        {
            height:300px;
        }

    </style>

    <script type="text/javascript">
    $(document).ready(function () {

        $('#tab1_link').click(function (e) {
            e.preventDefault();
            clearContent();
            $('#tab1_content').show();
        });

        $('#tab2_link').click(function (e) {
            e.preventDefault();
            clearContent();
            $('#tab2_content').show();
        });

        $('#tab3_link').click(function (e) {
            e.preventDefault();
            clearContent();
            $('#tab3_content').show();
        });

    });

    function clearContent() {
        $("div[id*='_content']").each(function() {
            $(this).hide();
        });
    }

    </script>

</head>

<body>

<h1>My Page</h1>

<div id="tabs">
    <div id="tab1"><a id="tab1_link" class="subheading">The first section</a></div>
    <div id="tab2"><a id="tab2_link" class="subheading">The second section</a></div>
    <div id="tab3"><a id="tab3_link" class="subheading">The third section</a></div>
</div>

<div class="clear">
</div>

<div id="content">

    <div id="tab1_content" class="content">
        <p>Lorem ipsum...</p>
    </div>

    <div id="tab2_content" class="content">
        <img src="/some_image" alt="Image" title="Image"></img>
        <p>Some other text</p>
    </div>

    <div id="tab3_content" class="content">
    And some more text here
    </div>    

</div>

<div class="footer">

This is at the foot of the page

</div>

</body>
</html> 
```

如您所见，不太确定.. 样式表和脚本一样是内联的，但是这是一个测试，以显示您是否知道 Javascript/jQuery 足以执行任务.. 我认为它不是很棒，但也不算太糟糕..

我将不胜感激任何有关其他方法以达到预期结果的反馈。再次，它不必很漂亮，只是功能性..当然所有这些都在 30 分钟内..

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T14:44:18.287

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">The First Section</a></li>
        <li><a href="#tabs-2">The Second Section</a></li>
        <li><a href="#tabs-3">The Third Section</a></li>
    </ul>
   <div id="tabs-1" class="content">
        <p>Lorem ipsum...</p>
   </div>

   <div id="tabs-2" class="content">
       <img src="/some_image" alt="Image" title="Image"></img>
   </div>

   <div id="tabs-3" class="content">
      <p>Some other text</p>
   </div>
</div>

<script>
   $(function() {
    $("#tabs").tabs();
   });
</script> 
```

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:39:25.777

在不了解公司的情况下，您正在参加考试，因为很难说出他们在寻找什么。

一般来说，雇主不是在寻找完美的代码，而是在寻找解决问题的方式。例如，您可以说他们正在查看您是否会盲目地遵循他们的指示，或者坚持添加外部样式/脚本引用的约定和良好实践，或者只是干净、符合标准、简洁的代码。

我是一个完全的新手，所以请不要把我说的任何话都当回事，但我会尝试创建一些可重用的简洁代码，这些代码将/可以在维护友好的同时非常快速和轻松地重用和扩展（只是因为它的文本没有这并不意味着你可以忘记这些事情）。

只是这样做非常粗暴，而且我的头顶，但是像这样：

```
$('#tab-menu').click(function(e) {
   e.preventDefault();
   clearContent();
   $(this).show();
}); 
```

如果是一家涉及移动设备的公司，您可能希望绑定事件以便获得相同的功能。

我一直在做的事情是提供一个假设文档，即使它在记事本中也是如此。它总是被积极看待，因为它表明你正在停下来思考你必须做什么，而不是去开枪。

总的来说，我认为你做得很好！您的态度很好，只需从这些经验中学习，改进并变得更好！今天的晚辈就是明天的专家！如果我们足够努力

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:01:03.943

你不需要 jQuery UI。

## 演示[http://jsbin.com/atogil/2/edit](http://jsbin.com/atogil/2/edit)

## HTML

```
<div class="tabs">
    <nav class="tab-btns">
        <a href="#tab1">tab btn 1</a>
        <a href="#tab2">tab btn 2</a>
        <a href="#tab3">tab btn 3</a>
        <a href="#tab4">tab btn 4</a>
    </nav>
    <div class="tab-contents">
        <div id="tab1">tab content 1</div>
        <div id="tab2">tab content 2</div>
        <div id="tab3">tab content 3</div>
        <div id="tab4">tab content 4</div>
    </div>
</div> 
```

## JS

```
$.fn.myTabs = function(settings){
  return this.each(function() {

/*
save cached version of the first elements inside the containers. 
by calling the first elements of each container you are not limitng 
the plugin user to any specific class or elememt.
*/
    var btns = $(settings.nav, this).children(),
        tabs = $(settings.tabs, this).children();

/* 
we relying on the order of the elements as the conection between 
the buttons and the tabs notice that .each() get the index of the btn..
we are useinf it to find the current tab.
*/

        btns.each(function(index){
            var btn = $(this),
                tab = tabs.eq(index);

            btn.click(function (e){
                /* prevent unnesscry work by checking 
                   if the button clicked is already active  */
                if(btn.is('.active')) return false;

                /* notice that first filter to find the last 'active' 
                   button before we remove the 'active' class  otherwise it 
                   remove the class for every button. 
                   unnesscry work prevented again */
                btns.filter('.active').removeClass('active');

                /* hide previus tab.. */
                tabs.filter(':visible').hide();

                btn.addClass('active');
                tab.show();

                return false;
            });
        });

        // emulate click on the first tab button;
        btns.first().click();
  });
}; 
```

并像这样调用你的脚本；

```
$(function() {

  $('.tabs').myTabs({
    // container of navigation inside '.tabs'
    nav : '.tab-btns',
    // container of contents inside '.tabs'
    tabs : '.tab-contents'
  });

}); 
```

# java - 谷歌应用引擎中的 Struts2 Tiles

> ID：10961696
> 
> 赞同：1
> 
> 时间：2012-06-09T14:12:54.163
> 
> 标签：java, google-app-engine, struts2, tiles

我正在尝试使用 Google App Engine 中的 struts2 和磁贴构建一个 Java Web 应用程序。下面是我的tiles.xml 文件

```
<!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">

<tiles-definitions>

<definition name="baseLayout" template="BaseLayout.jsp">
    <put-attribute name="title" value="" />
    <put-attribute name="header" value="Header.jsp" />
    <put-attribute name="body" value="" />
    <put-attribute name="footer" value="Footer.jsp" />
</definition>

<definition name="/welcome.tiles" extends="baseLayout">
    <put-attribute name="title" value="Welcome" />
    <put-attribute name="body" value="Welcome.jsp" />
</definition>

</tiles-definitions> 
```

但是当我运行应用程序时，我没有收到任何错误。它只打印“Header.jsp Welcome.jsp Footer.jsp”。它不显示实际的 jsp 页面。请告知需要做什么。

提前致谢

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T16:35:12.017

您忘记放置`"/"`包含的 jsp 文件，因此不是获取相关文件的内容，而是将它们显示为文本。

正确的格式应如下所示：

```
<!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">
<tiles-definitions>
    <definition name="baseLayout" template="BaseLayout.jsp">
        <put-attribute name="title" value="" />
        <put-attribute name="header" value="/Header.jsp" />
        <put-attribute name="body" value="" />
        <put-attribute name="footer" value="/Footer.jsp" />
    </definition>

    <definition name="/welcome.tiles" extends="baseLayout">
        <put-attribute name="title" value="Welcome" />
        <put-attribute name="body" value="/Welcome.jsp" />
    </definition>
</tiles-definitions> 
```

# javascript - 如何使用 JavaScript 更新/更改 HTML 内容并防止页面刷新？

> ID：10961697
> 
> 赞同：3
> 
> 时间：2012-06-09T14:13:06.263
> 
> 标签：javascript, jquery, html, forms

我是脚本的新手。我想用 JavaScript 更新 HTML 内容，但是你可以看到网页不断刷新。

如何防止页面刷新？

**Javascript：**

```
function showResult(form) {
var coba=form.willbeshown.value;
var coba2=coba+2;
document.getElementById("showresulthere").innerHTML=coba2;
} 
```

**HTML**

```
<form>
<input type="text" name="willbeshown" value="">
<button onclick="showResult(this.form)">Ganti1</button>
</form>
<p id="showresulthere">Result will be shown here</p>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:35:33.453

根本不要使用表格。您没有向服务器提交任何表单数据。要在浏览器中处理数据，您不需要表单。使用表单只会使事情复杂化（尽管可以通过`type=button`在`button`元素中使用来解决此类问题，以防止其充当提交按钮）。

```
<input type="text" id="willbeshown" value="">
<button onclick=
  "showResult(document.getElementById('willbeshown'))">Ganti1</button>
<p id="showresulthere">Result will be shown here</p>
<script>
function showResult(elem) {
  document.getElementById("showresulthere").innerHTML = Number(elem.value) + 2;
}
</script> 
```

我已经使用转换为数字，`Number()`因为我想您想以数字方式将 2 添加到字段值，例如 42 + 2 使 44 而不是字符串， 42 + 2 使 422 （如果您只使用默认情况下会发生这种情况输入元素的值并向其添加一些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:15:06.793

你的按钮应该是

```
<button onclick="showResult(this.form); return false;">Ganti1</button> 
```

**Javascript**

```
function showResult(form) {
  var coba=form.willbeshown.value;
  var coba2=coba+2;
  document.getElementById("showresulthere").innerHTML=coba2;
  return false; // prevent form submission with page load
} 
```

**[演示](http://jsfiddle.net/QStkd/187/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T14:22:46.130

其他人将解释您应该如何使用 jQuery，但这将解释为什么它在您的原始代码中不起作用。

该`<button>`标签提交表单，因此您必须在表单标签中添加它以防止表单提交：

```
<form onsubmit="return false"> 
```

顺便说一句，即使没有为您的表单提供明确的操作，它也会使用当前页面提交；很容易认为它不采取行动就不会做任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T14:24:55.667

如果您定义 a`<button />`而不定义其类型，它将像`submit`按钮一样工作。只需添加`type="button"`到您的按钮标记，表单将不会被提交。

```
<button type="button" onclick="showResult(this.form)">Ganti1</button> 
```

通过此更改，您将不需要任何`return false`“`.preventDefault()`解决方法”

# json - Migrate a Jackson JsonDeserializer from 1.9 to 2.0

> ID：10961701
> 
> 赞同：1
> 
> 时间：2012-06-09T14:13:32.923
> 
> 标签：json, parsing, jackson

I have to migrate the following code from Jackson 1.9 to 2.0

```
public class ObjectIdDeserializer extends JsonDeserializer<ObjectId> {
    @Override
    public ObjectId deserialize(JsonParser jp, DeserializationContext context) {
        JsonNode oid = jp.readValueAsTree().get("$oid");
        return new ObjectId(oid.getTextValue());
    }
} 
```

Because the return type of `readValueAsTree()` has change from `JsonNode` to `TreeNode` I'm not able anymore to access to its value. I've tried `hasCurrentToken()`, `nextToken()` and others strange methods like those without finding a way to access gracefully to the tree nodes. The `get` method that I was using rely on a `map`, so it does not need any iteration.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:46:53.253

According to [`ObjectMapper`](https://github.com/FasterXML/jackson-databind/blob/master/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java#L1429) class from Jackson :

```
public <T extends TreeNode> T readTree(JsonParser jp) throws IOException, JsonProcessingException
{
    /* ... */
    JsonNode n = (JsonNode) _readValue(cfg, jp, JSON_NODE_TYPE);
    if (n == null) {
        n = getNodeFactory().nullNode();
    }
    @SuppressWarnings("unchecked")
    T result = (T) n;
    return result;
} 
```

`readTree` method is called by `readValueAsTree` method, and as `JsonNode` implements `TreeNode`, just cast the `TreeNode` object returned to an `JsonNode` object and you'll get the result that you expect !

```
@Override
public ObjectId deserialize(JsonParser jp, DeserializationContext context) {
    JsonNode oid = ((JsonNode)jp.readValueAsTree()).get("$oid");
    return new ObjectId(oid.asText());
} 
```

# vb.net - 防止 Directory.GetFiles() 搜索短文件名

> ID：10961704
> 
> 赞同：2
> 
> 时间：2012-06-09T14:13:56.323
> 
> 标签：vb.net, file, pattern-matching, filenames, wildcard

假设我有一个目录“C:\Test”，其中包含三个文件：

```
A23456789.txt
A1.txt
G 5.txt 
```

我运行这个命令：

```
Dim FileArr = Directory.GetFiles("C:\Test", "*1.txt", SearchOption.AllDirectories) 
```

返回所有三个文件。

我知道这是设计使然，.NET 也会搜索 8.3 短文件名。
但是有没有办法覆盖它并只搜索实际的文件名？

当然，在这个时代，必须有一个功能来做到这一点。还是我必须自己写？
我希望搜索功能具有与 Windows 资源管理器相同的行为以保持一致性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:17:43.657

我认为最好的方法是从 LINQ 中删除过滤`GetFiles`器并使用 LINQ 将其过滤掉，您可以在其中拥有更多控制权：

```
Dim FileArr = Directory.GetFiles("C:\Test", "*.txt", SearchOption.AllDirectories)
Dim filtered = From f In FileArr Where Path.GetFileName(f).EndsWith("1.txt") 
```

或一些等价物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T17:06:27.330

这使用 LINQ：

```
Dim FileArr = IO.Directory.GetFiles("C:\Test", "*.txt", SearchOption.AllDirectories). _
    Where(Function(s) s Like "*1.txt") 
```

# jquery - 使用 jQuery 对下拉菜单的不良影响

> ID：10961706
> 
> 赞同：0
> 
> 时间：2012-06-09T14:14:20.137
> 
> 标签：jquery, drop-down-menu

我正在建立一种下拉菜单，显然我希望我的子菜单项保持隐藏状态，直到用户将鼠标悬停在适当的元素上并使它们显示出来。我的问题是我得到了这种讨厌的淡入淡出效果，我无法让它工作，谁能帮我解决这个问题？[你可以在这里找到我的代码](http://jsfiddle.net/9umKx/)。

HTML 代码：

```
<nav id="mainNav">
    <ul>
        <li class="topMenu"><a href="#">Section #1</a></li>
        <li class="topMenu"><a href="#">Section #2</a></li>
        <li class="topMenu"><a href="#">Section #3</a>
            <ul>
                <li><a href="#">SubMenu Item #1</a></li>
                <li><a href="#">SubMenu Item #2</a></li>
                <li><a href="#">SubMenu Item #3</a></li>
            </ul>
        </li>
        <li class="topMenu"><a href="#">Section #4</a>
            <ul>
                <li><a href="#">SubMenu Item #1</a></li>
                <li><a href="#">SubMenu Item #2</a></li>
                <li><a href="#">SubMenu Item #3</a></li>
                <li><a href="#">SubMenu Item #4</a></li>
                <li><a href="#">SubMenu Item #5</a></li>
            </ul>
        </li>
        <li class="topMenu"><a href="#">Section #5</a>
            <ul>
                <li><a href="#">SubMenu Item #1</a></li>
                <li><a href="#">SubMenu Item #2</a></li>
            </ul>
        </li>
        <li class="topMenu"><a href="#">Section #6</a></li>
    </ul>
</nav> 
```

​</p>

CSS

```
body {
    width: 960px;
    margin: 0 auto;
}

a {
    text-decoration: none;
}

div#menu {
    width: 960px;
    height: 50px;
    background-color: #000;
    border-bottom: 2px solid #ff0078;
}

div#menu nav#mainNav a {
    font-family: 'BebasNeueRegular', 'Arial, Helvetica, sans-serif';
    color: #e4e4e4;
    text-transform: uppercase;
    font-size: 20px;
}

div#menu nav#mainNav ul li {
    top: 17px;
    left: 25px;
    margin-right: 30px;
    display: inline;
    position: relative;
}

div#menu nav#mainNav ul li ul {
    display: none;
    position: absolute;
    top: 25px;
    width: 150px;
}

div#menu nav#mainNav ul li ul li {
    display: block;
    left: 0;
    margin-bottom: 5px;
    padding: 5px;
    background: #000;
}

div#menu nav#mainNav ul li ul li:hover {
    border-bottom: 1px solid #ff0078;
}

div#menu nav#mainNav ul li ul li a {
    display: block;
}​ 
```

JS 脚本

```
$(document).ready(function() {
    var menuItems = $('div#menu nav#mainNav ul').find('li.topMenu');

    menuItems.on('mouseover', function() {
        var submenu = $(this).find('ul');
        $(this).find('ul').fadeIn();
    });

    menuItems.on('mouseout', function() {
        var submenu = $(this).find('ul');
        $(this).find('ul').fadeOut();
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T22:02:04.343

在为属性设置动画之前，您应该始终停止以前运行的动画，否则您会得到*令人讨厌的效果*。

查看新的[jsFiddle](http://jsfiddle.net/thomas_peklak/9umKx/1/)

```
$(document).ready(function() {
    var menuItems = $('div#menu nav#mainNav ul').find('li.topMenu');

    menuItems.on('mouseover', function() {
        var submenu = $(this).find('ul');
        $(this).find('ul').stop().fadeIn();
    });

    menuItems.on('mouseout', function() {
        var submenu = $(this).find('ul');
        $(this).find('ul').stop().fadeOut();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:19:31.097

试试这个js：

```
$(document).ready(function() {
    var menuItems = $('div#menu nav#mainNav ul').find('li.topMenu');

    menuItems.hover(
        function() {
            var submenu = $(this).find('ul');
            $(this).find('ul').fadeIn();
        },
        function() {
            var submenu = $(this).find('ul');
            $(this).find('ul').fadeOut();
    });
}); 
```

​</p>

# php - 根据父选择显示从数据库中选择的选项

> ID：10961707
> 
> 赞同：2
> 
> 时间：2012-06-09T14:14:28.880
> 
> 标签：php, javascript, jquery, mysql, html

我有一个带有 2 个选择框的表单，这两个框都通过 php 从我的数据库中提取它们的选项。

第一个显示按其 ISBN 排序的书籍列表，如下所示：

`<ISBN> - <Book name>`

现在，第二个选择框将列出之前选择中所选书籍的所有版本（基于 ISBN），并仅显示每个版本的版本号。

我在此表单中所做的是在数据库中插入带有特定版本及其序列号的所选书籍的特定副本。

我试图做的是`onChange`检索从第一个选择的 ISBN`select`并使用它来显示第二个选择的选项。

我使用该功能`dropdown()`显示书籍`select`和`dropdownEdition()`版本选择：

```
function dropdown($intIdField, $strNameField, $strTableName, $strOrderField, 
         $strNameOrdinal, $strMethod="asc") {
   echo "<select name=\"$strNameOrdinal\">\n";
   echo "<option value=\"NULL\">Select Value</option>\n";

   $strQuery = "select $intIdField, $strNameField
               from $strTableName
               order by $strOrderField $strMethod";

   $rsrcResult = mysql_query($strQuery);

   while($arrayRow = mysql_fetch_assoc($rsrcResult)) {
       $strA = $arrayRow["$intIdField"];
       $strB = $arrayRow["$intIdField"] . " - " . $arrayRow["$strNameField"];
       echo "<option value=\"$strA\">$strB</option>\n";
   }
   echo "</select>";
}

function dropdownEdition($intId1Field, $intId2Field, $strTableName, $strOrderField, 
         $strNameOrdinal, $strMethod="asc") {      

   echo "<select name=\"$strNameOrdinal\">\n";
   echo "<option value=\"NULL\">Select Value</option>\n";

   $strQuery = "SELECT $intId1Field, $intId2Field
               FROM $strTableName
               ORDER BY $strOrderField $strMethod";

   $rsrcResult = mysql_query($strQuery);

   while($arrayRow = mysql_fetch_assoc($rsrcResult)) {
       $strA = $arrayRow["$intId1Field"];
       echo "<option value=\"$strA\">$strA</option>\n";
   }

   echo "</select>";
} 
```

我基本上想做的是通过`onChange`. 的变量`$intId2Field`中的, 传递先前选择的 ISBN `dropdownEdition()`。

问题是我搜索了教程，但我什么都不懂，因为我从未使用过 jQuery、Javascript 或 AJAX，而且我是一个非常新手的网络程序员。这就是我在这里寻求帮助的原因。

以下是这 2 个函数的调用方式：

```
 <?php dropdown("book_ISBN", "book_title", "book", "book_ISBN", "book"); ?>

 <?php dropdownEdition("edition_no", "???????", "edition", "edition_no", "edition"); ?>` 
```

这 ？？？？是 book_ISBN，因为我不知道如何传递它。

以下是表的连接方式：

![在此处输入图像描述](../Images/a91ab5dcf8c252a682cd27b3b5b019ce.png)

参考 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:00:47.163

听起来您已经想通了，但是您需要向服务器发出异步请求，将 ISBN 传递给 PHP 脚本，该脚本将执行您的 mySQL 查询。

您的 PHP 脚本将返回 mysql 结果，可能作为 JSON 对象，然后可以使用 JS 解析并格式化为 HTML。

这是我拼凑起来演示的一些代码。

HTML：

```
<select name="isbn-select" id="isbn-select">
  <option value="">Select an ISBN</option>
  <option value="isbn1">isbn1</option>
  <option value="isbn2">isbn2</option>
  <option value="isbn3">isbn3</option>
</select> 
```

JS：

```
$('#isbn-select').on('change', function() {
  isbn = $('#isbn-select').val();
  $.getJSON('get_editions.php',
  {
  isbn: isbn
  },
  function(data) {
    var editions = [];
    $.each(data, function(index, val) {
      editions.push('<option value="' + val + '">' + val + '</option>');
    });
    $('<select/>', {
      'id': 'editions-select',
      'name': 'editions-select',
      html: editions.join('')
    }).appendTo('body');
  });
}); 
```

PHP：

```
<?php
// Code to select editions from your database goes here....
// Your isbn can be accessed as $_GET['isbn']
$editions_arr = array('editon1', 'edition2', 'edition3');
echo json_encode($editions_arr);
?> 
```

我使用 jQuery 的`getJSON`方法从`get_editions.php`. 然后将结果格式化为 a`select`并附加到 HTML 文档中。为了简单起见，我没有进行任何错误检查或验证。

我希望这可以帮助您走上正轨！

**编辑：**

如果您希望返回格式化的 HTML 而不是 JSON 对象，您可以这样做。

JS：

```
$('#isbn-select').on('change', function() {
  isbn = $('#isbn-select').val();
  $.get('get_editions.php',
  {
  isbn: isbn
  },
  function(data) {
    $('body').append(data);
  });
}); 
```

PHP：

```
<?php
// Code to select editions from your database goes here....
// Your isbn can be accessed as $_GET['isbn']
$editions_html = '<select id="editions-select" name="editions-select">';
$editions_html .= '<option value="edition1">edition1</option>';
$editions_html .= '<option value="edition2">edition2</option>';
$editions_html .= '<option value="edition3">edition3</option>';
$editions_html .= '</select>';
echo $editions_html;
?> 
```

你可以在这里阅读 jQuery 的 AJAX 函数：http: [//api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

# jquery - 在某些元素上禁用 JQuery UI Drop Disable

> ID：10961711
> 
> 赞同：1
> 
> 时间：2012-06-09T14:14:49.363
> 
> 标签：jquery, jquery-ui, drag-and-drop, jsplumb

我有一个 jQuery UI 可拖动代码，我用 jslumb 编写。

**问题是用户可以将圆圈放在另一个圆圈上，我不想允许它，只是如果用户将圆圈拖放到另一个圆圈上，我需要还原。**

我为此写了一些代码。但是这对我不起作用，它总是恢复掉线。这是我的示例网址

[http://webxtreams.net/demoprofiles004/circledragger.html](http://webxtreams.net/demoprofiles004/circledragger.html)

这是我在火灾错误上运行的 js 代码

```
$(".circle").draggable({
    revert: 'invalid'
});

$(".circle").droppable({
    accept: function(el) {        
        return el.hasClass('.circle');
    }
}); 
```

请帮我这样做。

还有一个小问题 - 我们可以在此跟踪还原事件吗，我需要在还原圆圈时重新绘制线条:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T12:24:07.583

**这是工作的[jsFiddle](http://jsfiddle.net/3QGKC/)**

首先为您的可拖动事件设置选项：

```
 var revTest=false;
    var options = {
                revert: function(socketObj){
                if(socketObj === false){ //when circle is not over circle 
                    revTest = false; //we don't want to revert
                    return false;
                }else{    //when circle is over circle
                     revTest = true; //revert the action
                     return true;
                }
            },
            scope:"Circle",
            stop: function(e , ui){
                   if(revTest === true){
                      alert("Circle cannot overlay Circle");
                      jsPlumb.repaint(this.id); // needed if the element is associated with jsPlumb endpoints or connections
                   }
            }
        }; 
```

现在将选项包含到您的可拖动元素中：

```
jsPlumb.draggable($("#Circle2"),options); 
```

对于可丢弃事件：

```
$("#Circle1").droppable({scope:"Circle"}); 
```

# javascript - 替换/删除数组中的空条目

> ID：10961712
> 
> 赞同：4
> 
> 时间：2012-06-09T14:14:53.250
> 
> 标签：javascript, jquery, arrays, replace

我有这个数组：`[home, info, mail,,,, something, stuff, other]`

但我想删除或`,,`替换`,`

我试过：`allIDs.replace(",,", ",");`但它似乎不适用于数组

有空条目的原因是：

```
$(document).find('DIV').each(function(){
    allIDs.push(this.id); }) 
```

我正在索引所有 DIV 的 ID 名称，以检查是否有重复项，然后重命名当前生成的 DIV ID..

或者，我`find()`只想定义定义了 ID 的 DIV。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T07:21:06.290

这非常有效：

```
theArray = theArray.filter(function(e) { return e; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T14:27:04.337

试试`$('div[id]')`吧。它将选择所有定义了属性`div`的元素。`id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T14:26:44.760

把你的`id`聚会改成这样……

```
var allIDs = $(document).find('DIV')
                        .map(function(){ return this.id || undefined })
                        .toArray(); 
```

如果 , 上没有 ID `DIV`，`undefined`将返回，并且不会将任何内容添加到结果数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T14:22:22.143

你想要的是从数组中删除空值，而不是`,,`用`,`我想的替换。

[在这里](https://stackoverflow.com/questions/281264/remove-empty-elements-from-an-array-in-javascript)试试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T14:31:13.590

尝试只获取`div`定义了 ID 的 s：

```
$(document).find('div[id]').each(function(){
    allIDs.push(this.id); });
}); 
```

但是如果你想清理数组：

```
allIDs = clean_up(allIDs);

function clean_up(a){
    var b = []
    for(i in a) if(a[i] && a[i].length) a.push(a[i]);
    return a;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-09T15:44:51.320

在 javascript 中，您不能只删除数组中的 ',,,' 来解决问题。

你的意思是数组 ['home', 'info', '', '', '', '', 'mail', 'something', 'stuff', 'other']？

假设有一些空字符串，并且您想删除它们。

您可以使用一个简单的 javascript 函数：

```
allIDs = ["home", "info", "", "", "", "", "mail", "something", "stuff", "other"];

remove_empty_str = function(arr) {
  new_array = [];
  for (ii = 0, len = arr.length; ii < len; ii++) {
    item = arr[ii];
    if (item !== "" || item !== null || item !== (void 0)) {
      new_array.push(item);
    }
  }
  return new_array;
};

newIDs = remove_empty_str(allIDs);

alert(newIDs); 
```

我认为在执行任何 jQuery 输出之前处理数组是更好的做法。

您也可以在其他应用程序中重复使用 remove_empty_str() 。

# java - 如何正确停止Java中的线程？

> ID：10961714
> 
> 赞同：304
> 
> 时间：2012-06-09T14:15:06.777
> 
> 标签：java, multithreading, listener

我需要一个解决方案来正确停止 Java 中的线程。

我有`IndexProcessor`实现 Runnable 接口的类：

```
public class IndexProcessor implements Runnable {

    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);

    @Override
    public void run() {
        boolean run = true;
        while (run) {
            try {
                LOGGER.debug("Sleeping...");
                Thread.sleep((long) 15000);

                LOGGER.debug("Processing");
            } catch (InterruptedException e) {
                LOGGER.error("Exception", e);
                run = false;
            }
        }

    }
} 
```

我有`ServletContextListener`启动和停止线程的类：

```
public class SearchEngineContextListener implements ServletContextListener {

    private static final Logger LOGGER = LoggerFactory.getLogger(SearchEngineContextListener.class);

    private Thread thread = null;

    @Override
    public void contextInitialized(ServletContextEvent event) {
        thread = new Thread(new IndexProcessor());
        LOGGER.debug("Starting thread: " + thread);
        thread.start();
        LOGGER.debug("Background process successfully started.");
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        LOGGER.debug("Stopping thread: " + thread);
        if (thread != null) {
            thread.interrupt();
            LOGGER.debug("Thread successfully stopped.");
        }
    }
} 
```

但是当我关闭 tomcat 时，我的 IndexProcessor 类中出现异常：

```
2012-06-09 17:04:50,671 [Thread-3] ERROR  IndexProcessor Exception
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at lt.ccl.searchengine.processor.IndexProcessor.run(IndexProcessor.java:22)
    at java.lang.Thread.run(Unknown Source) 
```

我正在使用 JDK 1.6。所以问题是：

如何停止线程而不抛出任何异常？

**PS**我不想使用`.stop();`方法，因为它已被弃用。

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-06-09T16:27:28.370

使用`Thread.interrupt()`是一种完全可以接受的方式。事实上，它可能比上面建议的标志更可取。原因是，如果您处于可中断的阻塞调用中（例如`Thread.sleep`或使用 java.nio 通道操作），您实际上可以立即摆脱这些调用。

如果使用标志，则必须等待阻塞操作完成，然后才能检查标志。在某些情况下，无论如何您都必须这样做，例如使用不可中断的标准`InputStream`/ 。`OutputStream`

在这种情况下，当线程被中断时，它不会中断 IO，但是，您可以在代码中轻松执行此操作（并且您应该在可以安全停止和清理的关键点执行此操作）

```
if (Thread.currentThread().isInterrupted()) {
  // cleanup and stop execution
  // for example a break in a loop
} 
```

就像我说的那样，主要优点`Thread.interrupt()`是您可以立即中断可中断的呼叫，而使用标志方法则无法做到这一点。

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2012-06-09T14:21:55.287

在`IndexProcessor`类中，您需要一种设置标志的方法，该标志通知线程它将需要终止，类似于`run`您在类范围内使用的变量。

当您希望停止线程时，您设置此标志并调用`join()`线程并等待它完成。

通过使用 volatile 变量或使用与用作标志的变量同步的 getter 和 setter 方法，确保标志是线程安全的。

```
public class IndexProcessor implements Runnable {

    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);
    private volatile boolean running = true;

    public void terminate() {
        running = false;
    }

    @Override
    public void run() {
        while (running) {
            try {
                LOGGER.debug("Sleeping...");
                Thread.sleep((long) 15000);

                LOGGER.debug("Processing");
            } catch (InterruptedException e) {
                LOGGER.error("Exception", e);
                running = false;
            }
        }

    }
} 
```

然后在`SearchEngineContextListener`：

```
public class SearchEngineContextListener implements ServletContextListener {

    private static final Logger LOGGER = LoggerFactory.getLogger(SearchEngineContextListener.class);

    private Thread thread = null;
    private IndexProcessor runnable = null;

    @Override
    public void contextInitialized(ServletContextEvent event) {
        runnable = new IndexProcessor();
        thread = new Thread(runnable);
        LOGGER.debug("Starting thread: " + thread);
        thread.start();
        LOGGER.debug("Background process successfully started.");
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        LOGGER.debug("Stopping thread: " + thread);
        if (thread != null) {
            runnable.terminate();
            thread.join();
            LOGGER.debug("Thread successfully stopped.");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-04-22T21:44:29.660

简单的答案：您可以通过以下两种常见方式之一在内部停止线程：

*   run 方法命中一个返回子例程。
*   Run 方法完成，并隐式返回。

您还可以从外部停止线程：

*   调用`system.exit`（这会杀死你的整个过程）
*   调用线程对象的`interrupt()`方法 *
*   查看线程是否有一个听起来可以工作的已实现方法（如`kill()`或`stop()`）

*：期望这应该停止一个线程。但是，发生这种情况时线程实际执行的操作完全取决于开发人员在创建线程实现时所写的内容。

您在 run 方法实现中看到的常见模式是 a `while(boolean){}`，其中布尔值通常是名为的东西`isRunning`，它是其线程类的成员变量，它是易失的，并且通常可由其他线程通过各种 setter 方法访问，例如`kill() { isRunnable=false; }`. 这些子例程很好，因为它们允许线程在终止之前释放它持有的任何资源。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-09T14:22:40.797

您应该始终通过检查`run()`循环中的标志（如果有）来结束线程。

您的线程应如下所示：

```
public class IndexProcessor implements Runnable {

    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);
    private volatile boolean execute;

    @Override
    public void run() {
        this.execute = true;
        while (this.execute) {
            try {
                LOGGER.debug("Sleeping...");
                Thread.sleep((long) 15000);

                LOGGER.debug("Processing");
            } catch (InterruptedException e) {
                LOGGER.error("Exception", e);
                this.execute = false;
            }
        }
    }

    public void stopExecuting() {
        this.execute = false;
    }
} 
```

然后你可以通过调用来结束线程`thread.stopExecuting()`。这样线程就干净了，但这最多需要 15 秒（由于你的睡眠）。如果它真的很紧急，您仍然可以调用 thread.interrupt() - 但首选方法应该始终是检查标志。

为了避免等待 15 秒，您可以像这样拆分睡眠：

```
 ...
        try {
            LOGGER.debug("Sleeping...");
            for (int i = 0; (i < 150) && this.execute; i++) {
                Thread.sleep((long) 100);
            }

            LOGGER.debug("Processing");
        } catch (InterruptedException e) {
        ... 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-11-27T10:31:53.440

通常，线程在被中断时终止。那么，为什么不使用本机布尔值呢？试试 isInterrupted()：

```
Thread t = new Thread(new Runnable(){
        @Override
        public void run() {
            while(!Thread.currentThread().isInterrupted()){
                // do stuff         
            }   
        }});
    t.start();

    // Sleep a second, and then interrupt
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {}
    t.interrupt(); 
```

ref-[我怎样才能杀死一个线程？不使用 stop();](https://stackoverflow.com/questions/5915156/how-can-i-kill-a-thread-without-using-stop/5915430?noredirect=1#comment93838957_5915430)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-09T14:52:01.807

对于同步线程，我更喜欢使用`CountDownLatch`它来帮助线程等待正在执行的进程完成。在这种情况下，worker 类设置了一个`CountDownLatch`具有给定计数的实例。`await`由于调用方法或达到超时设置，对方法的调用将阻塞，直到当前计数达到零`countDown`。这种方法允许立即中断线程，而无需等待指定的等待时间过去：

```
public class IndexProcessor implements Runnable {

    private static final Logger LOGGER = LoggerFactory.getLogger(IndexProcessor.class);

    private final CountDownLatch countdownlatch;
    public IndexProcessor(CountDownLatch countdownlatch) {
        this.countdownlatch = countdownlatch;
    }

    public void run() {
        try {
            while (!countdownlatch.await(15000, TimeUnit.MILLISECONDS)) {
                LOGGER.debug("Processing...");
            }
        } catch (InterruptedException e) {
            LOGGER.error("Exception", e);
            run = false;
        }

    }
} 
```

当你想完成另一个线程的执行时，在线程上执行 countDown`CountDownLatch`到`join`主线程：

```
public class SearchEngineContextListener implements ServletContextListener {

    private static final Logger LOGGER = LoggerFactory.getLogger(SearchEngineContextListener.class);

    private Thread thread = null;
    private IndexProcessor runnable = null;
    private CountDownLatch countdownLatch = null;

    @Override
    public void contextInitialized(ServletContextEvent event) {
        countdownLatch = new CountDownLatch(1);
        Thread thread = new Thread(new IndexProcessor(countdownLatch));
        LOGGER.debug("Starting thread: " + thread);
        thread.start();
        LOGGER.debug("Background process successfully started.");
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        LOGGER.debug("Stopping thread: " + thread);
        if (countdownLatch != null) 
        {
            countdownLatch.countDown();
        } 
        if (thread != null) {
            try {
                thread.join();
            } catch (InterruptedException e) {
                LOGGER.error("Exception", e);
            }
            LOGGER.debug("Thread successfully stopped.");
        } 
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-08-11T21:03:06.260

一些补充信息。Java 文档中建议使用标志和中断。

[https://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html](https://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)

```
private volatile Thread blinker;

public void stop() {
    blinker = null;
}

public void run() {
    Thread thisThread = Thread.currentThread();
    while (blinker == thisThread) {
        try {
            Thread.sleep(interval);
        } catch (InterruptedException e){
        }
        repaint();
    }
} 
```

对于等待很长时间（例如，输入）的线程，使用`Thread.interrupt`

```
public void stop() {
     Thread moribund = waiter;
      waiter = null;
      moribund.interrupt();
 } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-07T10:42:29.837

我没有让中断在Android中工作，所以我使用了这种方法，效果很好：

```
boolean shouldCheckUpdates = true;

private void startupCheckForUpdatesEveryFewSeconds() {
    threadCheckChat = new Thread(new CheckUpdates());
    threadCheckChat.start();
}

private class CheckUpdates implements Runnable{
    public void run() {
        while (shouldCheckUpdates){
            System.out.println("Do your thing here");
        }
    }
}

 public void stop(){
        shouldCheckUpdates = false;
 } 
```

# objective-c - zbarsdk ZBarReaderViewController - 为 ipad 设置全屏

> ID：10961718
> 
> 赞同：2
> 
> 时间：2012-06-09T14:15:31.500
> 
> 标签：objective-c, ipad, zbar-sdk

我无法在 iPad 上全屏显示 zbarsdk 阅读器。

它一直显示在左上角。

我试过以下

```
reader.wantsFullScreenLayout = YES;
reader.cameraOverlayView.frame=CGRectMake(0, 0, X, Y); //X and Y are iPad dimensions
[reader.cameraOverlayView sizeToFit]; 
```

我们欢迎所有的建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T02:49:58.307

好的，解决方案确实来自 zbar sourceforge 论坛。只有最新的 beta 版本才支持 iPad 全屏支持。要获得这个，请访问[http://sourceforge.net/projects/zbar/files/iPhoneSDK/beta/](http://sourceforge.net/projects/zbar/files/iPhoneSDK/beta/)并下载最新的测试版（我使用的是 ZBarSDK-1.2.2.dmg）

我用这些替换了我项目中现有的 ZBarSDK 文件，它工作得很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:23:25.507

希望这有助于[http://zbar.sourceforge.net/iphone/sdkdoc/tutorial.html](http://zbar.sourceforge.net/iphone/sdkdoc/tutorial.html)并看看这个：来自[http://www.scandit.com/](http://www.scandit.com/)的 Scandit SDK 条码扫描器。他们的最新版本已更新，以最佳地支持 iPad 2。

# javascript - 响应 Backbone 关系中的类别模型变化

> ID：10961720
> 
> 赞同：0
> 
> 时间：2012-06-09T14:15:42.930
> 
> 标签：javascript, backbone.js, backbone-relational

我与 Backbone Relational 建立了模型关系，其中 an`Item`属于`Column`. *将*项目添加到列中效果很好，但是**如何引用项目的现有视图，以便将其从旧列中删除？**（因此，项目当前跨列重复。）

请参阅此 JSFiddle - [http://jsfiddle.net/geVPp/1](http://jsfiddle.net/geVPp/1)（我认为代码需要在`ColumnView` `removeItem`事件处理程序中实现，但我可能错了）。

（示例实例位于脚本的底部，因为我还没有 UI 控件。）

这是小提琴中的 ColumnView：

```
var ColumnView = Backbone.View.extend({
className: 'column',
tagName: 'div',
template: Handlebars.compile($('#column-template').html()),
initialize: function() {
  _.bindAll(this, 'render', 'renderItem', 'removeItem');
  this.model.bind('change', this.render);
  this.model.bind('reset', this.render);
  this.model.bind('add:items', this.renderItem);
  this.model.bind('remove:items', this.removeItem);
},
render: function() {
  return $(this.el).html(this.template(this.model.toJSON()));
},
renderItem: function(item) {
  var itemView = new ItemView({model: item});
  this.$('.items').append($(itemView.render()));
},
removeItem: function(item) {
  // @todo -- How do I reference the item model's view, in order to remove the DOM element?
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:59:40.330

不幸的是，Backbone 没有内置方式；您必须手动跟踪您的子视图（以及它们映射到的模型）。

[Backbone.Marionette](https://github.com/derickbailey/backbone.marionette)有一个 CollectionView 类，可以为您自动执行此操作。或者你可以推出自己的类似于[UpdatingCollectionView](http://liquidmedia.ca/blog/2011/02/backbone-js-part-3/)。

如果您想要快速修复，您可以保留对视图的引用作为模型对象的变量，但这很糟糕，因为它会阻止您显示同一模型的多个视图。

# javascript - 适用于 Android 的 HTML5 应用程序可以在主屏幕上有一个小部件吗？

> ID：10961722
> 
> 赞同：3
> 
> 时间：2012-06-09T14:16:02.037
> 
> 标签：javascript, android, html

我正在研究用 HTML5 构建一个应用程序，并且需要知道是否可以让应用程序在 phonegap/titanium（或任何平台）包装器之外工作（如果这是正确的术语？）在主屏幕上有一个小部件? 或发出定时警报？

例如，如果我制作了一个显示游戏分数的应用程序，我可以让小部件显示当前游戏或类似性质的东西吗？然后在游戏结束时提醒用户？

不确定 HTML5 是否可以处理这个问题，或者它是否需要是原生的。

因为我在做前端开发，所以我使用 html5 有什么价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:44:36.387

是和否。您可以将 HTML5 页面作为主屏幕上的小部件，但您必须确定一种在页面之间传递信息的方式。要制作 HTML5 小部件，必须制作一个 WebView 小部件（在 Java 中），并将其指向 HTML 页面。

# api - 提高推特限速

> ID：10961729
> 
> 赞同：2
> 
> 时间：2012-06-09T14:17:39.207
> 
> 标签：api, twitter, tweets, posting

我有构建的网络产品（第三方），建立了大约 10 万用户的增长，并且所有人都验证了他们的 Twitter 帐户。但是 twitter 将我限制为 350 req/h。

有没有办法为 API 调用申请更高的限制，或者这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T15:53:42.443

自发布此问题以来，费率已发生变化。在`OAuth v1.1`速率限制中每 15 分钟测量一次。根据您所称的限制是 15、30、180（`user_timeline`这是大多数人想要的）和每 15 分钟块 300。

有关限制，请参阅[此](https://dev.twitter.com/rest/public/rate-limits)表

您可以使用 来查看您还剩多少个呼叫以及何时重置限制`application/rate_limit_status`。

# php - Chrome 连接到 mysql

> ID：10961730
> 
> 赞同：1
> 
> 时间：2012-06-09T14:17:40.723
> 
> 标签：php, mysql, google-chrome-extension

我做了一个连接到 mysql 的 chrome 扩展，然后显示结果。

我有脚本（ajax.js、consulta.php 和consulta_empleados.html）。当我离开时它可以工作， `http://localhost/ajax/consulta_empleados.html`但是当我执行扩展时它不会向我显示结果，它会向我显示 php 代码并且它会显示查询结果。

看到这个： ![在此处输入图像描述](../Images/8da1222745364f749b3d2528b54949e4.png)

我怎么能这样做？

这里的代码（简单的ajax和php）：

显现

```
{
"name": "demo",
"version": "1.0",
"description": "Making your first Google Chrome extension.",
"icons":{
    "128":"icon_128.png"
},

"browser_action":   {
    "default_icon": "icon.png",
    "popup": "consulta_empleados.html"
} 
```

}

Consulta_empleados.html

```
<html>

    <head>

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

    <title>Consulta Registro con AJAX</title>

  <!-- referenciamos al archivo ajax.js donde se encuentra nuestra funcion objetoAjax-->

    <script language="JavaScript" type="text/javascript" src="ajax.js"></script>

    </head>

    <body onLoad="MostrarConsulta('consulta.php')">

  <div id="resultado"></div>

  </body>

</html> 
```

ajax.js

```
// JavaScript Document function objetoAjax(){
        var xmlhttp=false;
        try {
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
                try {
                   xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (E) {
                        xmlhttp = false;
                }
        }

        if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
                xmlhttp = new XMLHttpRequest();
        }
        return xmlhttp; }

function MostrarConsulta(datos){
        divResultado = document.getElementById('resultado');
        ajax=objetoAjax();
        ajax.open("GET", datos);
        ajax.onreadystatechange=function() {
                if (ajax.readyState==4) {
                        divResultado.innerHTML = ajax.responseText
                }
        }
        ajax.send(null) } 
```

咨询.php

```
<?php //Configuracion de la conexion a base de datos $bd_host = "localhost";  $bd_usuario = "root";  $bd_password = "";  $bd_base = "tic"; 

$con = mysql_connect($bd_host, $bd_usuario, $bd_password); 

mysql_select_db($bd_base, $con); 

//consulta todos los empleados

$sql=mysql_query("SELECT name FROM usuarios",$con);

//muestra los datos consultados echo "</p>Nombres </p>"; while($row = mysql_fetch_array($sql)){
        //echo "<p>".$row['nombres']." - ".$row['departamento']." - ".$row['sueldo']."</p> n";      echo "<p>".$row['name']."</p>"; } ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:36:33.010

出色地。实际答案是：这是因为您尝试加载相对于扩展程序的基本 URL 的“consulta.php”。只有从 http://localhost/... 而不是 chrome-extension://yourExtensionId/... 调用您的 php 代码才能执行

其次 - 无需实现 ActiveX 对象来获取 XMLHttpRequest 对象 - 您可以在 Google Chrome 中使用**新的 XMLHttpRequest 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:25:11.167

您需要网络上的服务器或用于数据的在线服务器，然后在 manifest.json 上为您的服务器设置权限。

首先，删除扩展的“consulta.php”文件，因为这个文件不能自己工作，所以你不需要它进入扩展。

然后，您可以像这样编辑其他文件：

**清单.json**

```
{
  "name": "demo",
  "version": "1.0",
  "description": "Making your first Google Chrome extension.",
  "icons": {
      "128": "icon_128.png"
  },
  "browser_action": {
      "default_icon": "icon.png",
      "default_popup": "consulta_empleados.html"
  },
  "permissions": [
    "http://localhost/"
  ]
} 
```

**Consulta_empleados.html**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Consulta Registro con AJAX</title>
<script src="ajax.js"></script>
</head>
<body>
<div id="resultado"></div>
</body>
</html> 
```

在这里，我删除了 body`onload`事件，因为：

> 由于 Content-Security-Policy，拒绝执行内联事件处理程序。

**ajax.js**

```
window.onload = function() {
  var XHR = new XMLHttpRequest;
  XHR.open('GET', 'http://localhost/consulta.php', true);
  XHR.onreadystatechange = function () {
    if (4 == this.readyState) {
      var status = this.status;
      if (400 > status) {
        var responseText = this.responseText;
        if (responseText) {
          document.getElementById('resultado').innerHTML = responseText;
        }
      }
    }
  };
  XHR.send();
} 
```

这里我们使用`window.onload`加载数据，需要使用XMLHttpRequest，因为不能动态加载外部脚本，否则会提示：

> 由于 Content-Security-Policy，拒绝从“ [http://localhost/consulta.php ”加载脚本。](http://localhost/consulta.php)

最后，像这样编辑您的服务器“consulta.php”：

**咨询.php**

```
<?php
// Configuracion de la conexion a base de datos
define('MYSQL_HOST', 'localhost');
define('MYSQL_USER', 'root');
define('MYSQL_PASS', '');
define('MYSQL_DB', 'tic');

$con = mysql_connect(MYSQL_HOST, MYSQL_USER, MYSQL_PASS);
mysql_select_db(MYSQL_DB, $con);

// Consulta todos los empleados
$sql = mysql_query('SELECT `name` FROM `usuarios`', $con);

// Almacena los datos consultados en una matriz
$output = array('<p>Nombres</p>');
while ($row = mysql_fetch_assoc($sql)) {
  $output[] = '<p>' . $row['nombres'] . ' - ' . $row['departamento'] . ' - ' . $row['sueldo'] . '</p><p>' . $row['name'] . '</p>';
}

// Imprimir los datos directamente
echo implode('', $output);
?> 
```

你得到了这个：

![截屏](../Images/2f2957a8db253b455055007d93524d21.png)

**请记住将服务器 URL 更改为“ajax.js”文件。**

* * *

**更新：**

正如其他帖子中的很多答案所说，您应该使用 PDO 而不是 MySQL 扩展，因为[不推荐使用MySQL 扩展，因此](http://news.php.net/php.internals/53799)**Consulta.php**的新代码如下所示：

```
<?php
// Configuracion de la conexion a base de datos
define('PDO_DSN', 'mysql:host=127.0.0.1;dbname=tic');
define('PDO_USER', 'root');
define('PDO_PASS', '');

$pdo = new PDO(PDO_DSN, PDO_USER, PDO_PASS);

// Consulta todos los empleados
$query = $pdo->query('SELECT `name` FROM `usuarios`');

// Almacena los datos consultados en una matriz
$output = array('<p>Nombres</p>');
while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
  $output[] = '<p>' . $row['nombres'] . ' - ' . $row['departamento'] . ' - ' . $row['sueldo'] . '</p><p>' . $row['name'] . '</p>';
}

unset($pdo, $query);

// Imprimir los datos directamente
echo implode('', $output);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:46:11.607

我不得不改变这一行：

```
// Imprimir funcion de javascript 'MostrarDatos()'
echo "MostrarDatos('", implode('', $output), "')"; 
```

至

```
// Imprimir funcion de javascript 'MostrarConsulta()'
echo "MostrarConsulta('", implode('', $output), "')"; 
```

# node.js - 找不到方法错误

> ID：10961735
> 
> 赞同：0
> 
> 时间：2012-06-09T14:18:40.187
> 
> 标签：node.js, mongoose

我是 node.js 和 mongo db 的新手。我想做的是从 index.js 调用我的 model.js 中的有序函数，但我有一个抱怨

> 对象函数模型（）没有方法ordered（）

路线/index.js

```
var pics_ = models.Picture.ordered(); 
```

模型.js

```
Picture.prototype.ordered = function() {
var ordered = mongoose.Picture.find().sort({points:-1}).toArray()
console.log(ordered);
return ordered;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:39:47.657

如果你想为你的模型添加方法，你应该使用 Mongoose 支持的方法来做到这一点。见[http://mongoosejs.com/docs/methods-statics.html](http://mongoosejs.com/docs/methods-statics.html)

# java - 必须有更好的编码方式:(

> ID：10961737
> 
> 赞同：3
> 
> 时间：2012-06-09T14:19:30.033
> 
> 标签：java, design-patterns, generics

有人告诉我“为数据库对象建模一个抽象容器，该容器构造接受子变量的可变参数，然后在不重复代码的情况下公开一些子检查功能”。

这暗示了“计算孩子的数量”、“按标识符查找”等内容。

为简单起见，下面的代码只有一个来自基本抽象 DatabaseObject 类型的字段（即名称），但真正的代码具有诸如“标识符”之类的东西和一些复杂的元数据查找噱头。

这个想法当然很有用，但只要看看我开始编写的代码就让我想吐：如果我继续沿着这条路走下去，那将是一个纠缠的弗兰肯斯坦。有什么办法可以把它变成像样的Java？有什么设计模式可以参考吗？（想到复合...）

前提：要共享的实际功能很有用，并且确实适用于任何潜在的可嵌套类型（模式有表，表有列，复合索引有子索引等），尤其是标识符查找......

...但是“必须有更好的方法”。我感觉到我内心的声音在说“每当你写这样的代码时，就给自己一巴掌”。

帮助 ：）

```
public abstract class DatabaseContainerObject<ChildType extends DatabaseObject>
    extends DatabaseObject {
  protected List<ChildType> children;
  public DatabaseContainerObject(String name, ChildType... children) {
    super(name);
    this.children = new ArrayList<ChildType>(children.length);
    this.children.addAll(Arrays.asList(children));
  }
  protected List<ChildType> getChildren() {
    return Collections.unmodifiableList(children);
  }
  ... count ...
  ... find ...
  ... sort ...
  ... remove ...
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:50:24.460

想想策略模式（http://en.wikipedia.org/wiki/Strategy_pattern）。原因：

1.  解耦数据和数据操作。
2.  您可以在运行时更改算法（“count # of children”、“find by identifier”）。

我想，它是这样的：

```
public abstract class DatabaseContainerObject<ChildType extends DatabaseObject>
extends DatabaseObject {

    protected List<ChildType> children;

    private DataOperator dataOperator;

    public Object find(){
         return dataOperator.find(children);
    }

}

public interface DataOperator{
     public <ChildType extends DatabaseObject> find(List<ChildType> childList);
}

public Class GeneralDataOperator extends DataOperator{
    public <ChildType> find(List<ChildType> childList){
        //implements find; 
    }
} 
```

然后，您可以使用依赖注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:42:28.697

Composite 很快就浮现在脑海中，但您还应该研究装饰器模式。

Find 显然是递归的，但是 Count eg 在叶子对象上非常有限，在所有类型的节点上都差不多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:37:15.040

来自第 18 条建议的复合模式（**骨架实现**） ：来自*Effective Java 2nd Edition的**Prefer Interfaces to Abstract Classes*。

 **   *使用count()*、*find()*、*sort()*、*remove()*等方法定义一个 iterface ( *EntityCollection )*
****   抽象类*DatabaseContainerObject*实现*EntityCollection*接口*   *Schema*、*Table*、*CompositeIndex*类扩展*DatabaseContainerObject*并实现*EntityCollection*接口。这里*Schema* , *Table* , *CompositeIndex*是 Composite Pattern 中的 *Component*s***

 **优点是未来的类可以扩展*DatabaseContainerObject*或实现*EntityCollection****

# performance - Symfony 1.4 改进了学说 save() 方法

> ID：10961743
> 
> 赞同：1
> 
> 时间：2012-06-09T14:20:01.313
> 
> 标签：performance, symfony1, doctrine, symfony-1.4, doctrine-1.2

我的数据库中有 500 个条目。在我的后端，我有行动。例如：

```
 public function executeMyAction(sfWebRequest $request) {

 // Get some data from table
 $templates = Doctrine_Core::getTable('SeoTemplates')->findOneByEntity('training');

//Get data from other table(500 items)
 $trainings = Doctrine::getTable('Training')->getTraining();

  // Make some operations with data
  foreach ($trainings as $training) {

       $training->setSomeValue1('some_data');
       $training->setSomeValue2('some_data');
       $training->setSomeValue2('some_data');

  }

// Problem part (try to save)
$trainings->save();
} 
```

save() 执行了很长时间。如何解决这个问题呢？是否可以？

在我的问题部分，我有所有已知的错误**致命错误：超过 30 秒的最大执行时间**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:43:00.847

保存每条记录而不是集合

```
$templates = Doctrine_Core::getTable('SeoTemplates')->findOneByEntity('training');
$trainings = Doctrine::getTable('Training')->getTraining();
foreach ($trainings as $training) {
   $training->setSomeValue1('some_data');
   $training->setSomeValue2('some_data');
   $training->setSomeValue2('some_data');
   $training->save();
} 
```

或使用 Doctrine 使用查询更新记录

```
$q = Doctrine_Query::create()
   ->update('TABLE')
   ->set($val1, '?', $val1)
   ->set($val2, '?', $val2)
   ->set($val3, '?', $val3)
   ->where('id = ?', $id)
   ->execute(); 
```

# windows-phone-7 - 将 WP7 应用程序从免费更改为付费

> ID：10961744
> 
> 赞同：4
> 
> 时间：2012-06-09T14:20:10.720
> 
> 标签：windows-phone-7

我正在考虑将我的应用程序从免费转换为付费，以进一步支持开发。如果进行此更改并启用试用版，现有用户在从市场更新应用程序后会发生什么？他们将拥有完整的付费版本还是处于试用期？如果他们被困在审判中，这似乎不公平。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T00:51:44.743

任何在免费时安装您的应用程序的人基本上都免费购买了您的应用程序。因此，如果您更新价格，它不会影响这些用户，因为他们已经“购买”了该应用程序。他们将收到您的应用完整版的任何进一步更新。

# android - OpenGL法线矩阵

> ID：10961746
> 
> 赞同：3
> 
> 时间：2012-06-09T14:20:23.593
> 
> 标签：android, opengl-es, opengl-es-2.0

我一直在尝试使用 OpenGL ES 2.0 为 Android 创建简单的漫反射光照着色器，并从 OpenGL 4.0 着色语言食谱中获取知识，但它并没有说明太多关​​于普通矩阵的信息，我很确定问题来自它，因为“模型“我一直在使用在 WebGL 中完美运行，我可以使用我在 Java 中找不到的漂亮 glMatrix 库。

我不确定如何从模型视图矩阵中获取正常矩阵，但我读到它只是倒置 3x3 模型视图矩阵的转置，太糟糕的 Android Matrix 类只能让你使用 4x4 矩阵（对吗？）所以我一直在分裂着色器中的矩阵可能是我出错的地方。

所以我所做的就是这样：

```
 float[] nMatrix = new float[4 * 4];
    Matrix.invertM(nMatrix, 0, mvMatrix, 0);
    Matrix.transposeM(nMatrix, 0, nMatrix, 0);

    glUniformMatrix4fv(shader.getUniformPointer("nMatrix"), 1, false, nMatrix, 0); 
```

然后在我的顶点着色器中我这样做：

```
tNorm = normalize(mat3(nMatrix) * vNormal).xyz; 
```

其余代码基本上来自书中，结果如下

![在此处输入图像描述](../Images/c7d066cf9d6b3da6814a7cec7e25a1e7.png)

正如你所看到的，立方体的某些侧面完全是黑暗的，我确信我得到了所有的正常情况，即使我不知道任何 Android GL 调试器，但如果你知道，请随时告诉我。

所以问题是，我怎样才能从我的模型视图矩阵中正确获取正常矩阵？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T15:26:17.960

我没有在哪里可以找到 Java 中的 Matrix 库来帮助您解决这个问题。

但是，只要您的 modelView 矩阵不包含*非均匀*比例，您就可以安全地使用您的 modelView 矩阵而不是 normalMatrix。

这可以帮助您开始并确保您的问题没有隐藏在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T08:44:02.640

这可能有用

> glm库一些有用的mat3函数的移植

```
package com.CosmicCreations;

public class Mat3x3 {
public static float determinant(float []m){
return 
        + m[0] * (m[4] * m[8] - m[7] * m[5])
        - m[3] * (m[1] * m[8] - m[7] * m[2])
        + m[6] * (m[1] * m[5] - m[4] * m[2]);
}
public static void Mat3(float []m4, float[]m){
m[0]=m4[0]; m[1]=m4[1]; m[2]=m4[2];
m[3]=m4[4]; m[4]=m4[5]; m[5]=m4[6];
m[6]=m4[8]; m[7]=m4[9]; m[8]=m4[10];
}
/*
    Inverse[0][0] = + (m[1][1] * m[2][2] - m[2][1] * m[1][2]);
    Inverse[1][0] = - (m[1][0] * m[2][2] - m[2][0] * m[1][2]);
    Inverse[2][0] = + (m[1][0] * m[2][1] - m[2][0] * m[1][1]);
    Inverse[0][1] = - (m[0][1] * m[2][2] - m[2][1] * m[0][2]);
    Inverse[1][1] = + (m[0][0] * m[2][2] - m[2][0] * m[0][2]);
    Inverse[2][1] = - (m[0][0] * m[2][1] - m[2][0] * m[0][1]);
    Inverse[0][2] = + (m[0][1] * m[1][2] - m[1][1] * m[0][2]);
    Inverse[1][2] = - (m[0][0] * m[1][2] - m[1][0] * m[0][2]);
    Inverse[2][2] = + (m[0][0] * m[1][1] - m[1][0] * m[0][1]);
    Inverse /= Determinant;
 */
public static void inverse(float []m, float[] Inverse, int offset){

float Determinant = Mat3x3.determinant(m);
Inverse[offset+0] = + (m[4] * m[8] - m[7] * m[5])/ Determinant;
Inverse[offset+3] = - (m[3] * m[8] - m[6] * m[5])/ Determinant;
Inverse[offset+6] = + (m[3] * m[7] - m[6] * m[4])/ Determinant;
Inverse[offset+1] = - (m[1] * m[8] - m[7] * m[2])/ Determinant;
Inverse[offset+4] = + (m[0] * m[8] - m[6] * m[2])/ Determinant;
Inverse[offset+7] = - (m[0] * m[7] - m[6] * m[1])/ Determinant;
Inverse[offset+2] = + (m[1] * m[5] - m[4] * m[2])/ Determinant;
Inverse[offset+5] = - (m[0] * m[5] - m[3] * m[2])/ Determinant;
Inverse[offset+8] = + (m[0] * m[4] - m[3] * m[1])/ Determinant;
}
public static void transpose(float []m, int offset, float[]result){
result[0] = m[offset+0];
result[1] = m[offset+3];
result[2] = m[offset+6];

result[3] = m[offset+1];
result[4] = m[offset+4];
result[5] = m[offset+7];

result[6] = m[offset+2];
result[7] = m[offset+5];
result[8] = m[offset+8];
}
} 
```

应该这样使用——

```
// Invert + transpose of mvmatrix
    float []temp = new float[18];
    Mat3x3.Mat3(mMVMatrix, temp);
    Mat3x3.inverse(temp, temp, 9);
    Mat3x3.transpose(temp, 9, normalMatrix); 
```

# java - 井字游戏java

> ID：10961749
> 
> 赞同：1
> 
> 时间：2012-06-09T14:20:32.007
> 
> 标签：java

我是学习 Java 编程的初学者，我正在玩井字游戏。

当我完成游戏后，我无法继续玩游戏，因为程序会退出。我应该在这段代码中添加什么。由于我没有使用paint方法，所以无法使用repaint()。

```
import java.awt.*;  
import java.awt.event.*;
import javax.swing.*;

public class TicTacToeV1 implements ActionListener {
    /*Instance Variables*/
    private JFrame window = new JFrame("Tic-Tac-Toe");
    private JButton button1 = new JButton("");
    private JButton button2 = new JButton("");
    private JButton button3 = new JButton("");
    private JButton button4 = new JButton("");
    private JButton button5 = new JButton("");
    private JButton button6 = new JButton("");
    private JButton button7 = new JButton("");
    private JButton button8 = new JButton("");
    private JButton button9 = new JButton("");

    private String letter = "";
    public static int count = 0;
    public TicTacToeV1(){           
        /*Create Window*/
        window.setSize(300,300);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setLayout(new GridLayout(3,3));

        /*Add Buttons To The Window*/
        window.add(button1);
        window.add(button2);
        window.add(button3);
        window.add(button4);
        window.add(button5);
        window.add(button6);
        window.add(button7);
        window.add(button8);
        window.add(button9);

        /*Add The Action Listener To The Buttons*/
        button1.addActionListener(this);
        button2.addActionListener(this);
        button3.addActionListener(this);
        button4.addActionListener(this);
        button5.addActionListener(this);
        button6.addActionListener(this);
        button7.addActionListener(this);
        button8.addActionListener(this);
        button9.addActionListener(this);

        /*Make The Window Visible*/
        window.setVisible(true);

        String input = JOptionPane.showInputDialog("Please select ur pawn: \n1) X\n2) O");
        int pawn = Integer.parseInt(input);
        if ( input.equals("2")){
              setCount(1);
        }
    }

    public static void setCount (int co){
        count = co;            
    }

    public void actionPerformed(ActionEvent a) {    
        count++;

        /*Calculate Who's Turn It Is*/
        if(count == 1 || count == 3 || count == 5 || count == 7 || count == 9|| count == 11){
            letter = "X";

        } else if(count == 2 || count == 4 || count == 6 || count == 8 || count == 10){
            letter = "O";
        }

        /*Display X's or O's on the buttons*/
        if(a.getSource() == button1){
            button1.setText(letter);
            button1.setEnabled(false);
        } else if(a.getSource() == button2){
            button2.setText(letter);
            button2.setEnabled(false);
        } else if(a.getSource() == button3){
            button3.setText(letter);
            button3.setEnabled(false);
        } else if(a.getSource() == button4){
             button4.setText(letter);
             button4.setEnabled(false);
        } else if(a.getSource() == button5){
             button5.setText(letter);
             button5.setEnabled(false);
        } else if(a.getSource() == button6){
             button6.setText(letter);
             button6.setEnabled(false);
        } else if(a.getSource() == button7){
             button7.setText(letter);
             button7.setEnabled(false);
        } else if(a.getSource() == button8){
             button8.setText(letter);
             button8.setEnabled(false);
        } else if(a.getSource() == button9){
             button9.setText(letter);
             button9.setEnabled(false);
        }       
    }

    public static void main(String[] args){           
            new TicTacToeV1();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:41:37.730

创建一个名为 reset 的方法（或类似的方法）并使其执行以下操作：

1.  重置每个文本值。
2.  将计数重置为 0。

您可能希望为按钮创建一个数组 []（或 2D 数组，如果您知道如何 >> [][]），并使其更易于管理。这样可以更好地管理许多按钮，并消除当前代码中的大量无用重复。

示例代码：

```
public static void reset() {
    button1.setText("");
    button1.setEnabled(true);
    //etc...
    count = 0;
} 
```

然后在游戏结束时调用 reset() （您可能还想让它检查谁赢了）。

希望这对 DFTBA 有所帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T15:38:00.107

a）您的整个代码适合 50 行。b）您没有检测获胜者或完成游戏的方法，所以我只是在 count == 9 之后添加了代码。

```
import java.awt.*;  
import java.awt.event.*;
import javax.swing.*;

public class TicTacToeV1 extends JFrame implements ActionListener {
    private JButton [] button  = new JButton [9];
    private int count = 0;

    public TicTacToeV1 () {           
        super ("Tic-Tac-Toe");
        setSize (300, 300);
        setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        setLayout (new GridLayout (3, 3));
        init ();
    }

    private void init () {           
        count = 0;
        for (int i = 0; i < 9; ++i) {
            button [i] = new JButton ("");
            button [i].addActionListener (this);
            add (button [i]);
        }
        setVisible (true);
    }

    public void actionPerformed (ActionEvent a) {    
        String letter = (++count % 2 == 1) ? "X" : "O";
        /*Display X's or O's on the buttons*/
        for (JButton jb : button) 
        if (a.getSource () == jb) {
            jb.setText (letter);
            jb.setEnabled (false);
        }
        if (count == 9) {
            for (JButton jb : button) 
                remove (jb) ;
            init ();
        }
    }

    public static void main (String [] args) {           
        new TicTacToeV1 ();
    }
} 
```

我将变量部分放入它自己的方法（init）中，并从Ctor或游戏结束方法调用它。

当然你也可以从那里调用一个新的Ctor。或者只是重置按钮状态和计数器。去罗马的方式有很多。虽然它不应该发挥作用，但避免使用所有按钮在内存中结束 100 场游戏可能会节省 10kb 左右的内存。

# javascript - Twitter Bootstrap 复选框 JavaScript

> ID：10961752
> 
> 赞同：-1
> 
> 时间：2012-06-09T14:20:42.720
> 
> 标签：javascript, checkbox, twitter-bootstrap

我正在为 Bootstrap 制作复选框/收音机/切换组，但我的复选框失败了 - 你能帮我让它们工作吗？

HTML：

```
<form id="edit-accounts" class="form-horizontal" method="post">
    <fieldset>

        <div class="control-group">
            <label class="control-label">Radio Group:</label>
            <div class="controls btn-group" data-toggle="buttons-radio" data-toggle-name="radio_group">
                <button type="button" value="1" class="btn" data-toggle="button">first</button>
                <button type="button" value="2" class="btn" data-toggle="button">second</button>
                <button type="button" value="3" class="btn" data-toggle="button">third</button>
            </div>
            <input type="hidden" name="radio_group" value="1" />
        </div>

        <div class="control-group">
            <label class="control-label">Checkbox Group:</label>
            <div class="controls btn-group" data-toggle="buttons-checkbox" data-toggle-name="checkbox_group">
                <button type="button" value="1" class="btn" data-toggle="button">js</button>
                <button type="button" value="2" class="btn" data-toggle="button">fiddle</button>
                <button type="button" value="3" class="btn" data-toggle="button">alpha</button>
            </div>
            <input type="hidden" name="checkbox_group" value="1" />
        </div>

        <div class="control-group">
            <label class="control-label">Toggle:</label>
            <div class="controls btn-group" data-toggle="button" data-toggle-name="button_group">
                <button type="button" value="1" class="btn" data-toggle="button">on/off</button>
            </div>
            <input type="hidden" name="button_group" value="1" />
        </div>
    </fieldset>
</form>​ 
```

JavaScript：

```
$(function () {
    $('div.btn-group[data-toggle-name=*]').each(function () {
        var form = $(this).parents('form').eq(0);
        var name = $(this).attr('data-toggle-name');
        var hidden = $('input[name="' + name + '"]', form);
        var type = $(this).attr('data-toggle');
        var check = [];
        $('button', $(this)).each(function () {
            $(this).live('click', function () {
                if($(this).val() == hidden.val()) {
                    switch(type) {
                    case 'button':
                        $(this).removeClass('active');
                        hidden.val(0);
                        break;
                    case 'buttons-checkbox':
                        $(this).removeClass('active');
                        break;
                    default:
                        hidden.val($(this).val());
                    }
                } else {
                    switch(type) {
                    case 'button':
                        $(this).addClass('active');
                        hidden.val(1);
                        break;
                    case 'buttons-checkbox':
                        $(this).addClass('active');
                        break;
                    default:
                        hidden.val($(this).val());
                    }
                }
            });
            if($(this).val() == hidden.val()) $(this).addClass('active');
        });
    });
});​ 
```

[工作原型](http://jsfiddle.net/tkXBg/ "看看工作原型")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T00:41:43.247

这就是我重写您的代码以使其与复选框组一起工作的方式：

```
jQuery(function($) {
     $('div.btn-group[data-toggle-name]').each(function(){
            var group   = $(this);
            var form    = group.parents('form').eq(0);
            var name    = $(this).attr('data-toggle-name');
            var hidden  = $('input[name="' + name + '"]', form);
            var type    = group.attr('data-toggle');
            var check   = (hidden.val() != '') ? hidden.val().split(',') : [];
            $('button', group).each(function() {
                var button = $(this);
                button.live('click', function() {
                    switch(type) {
                        case 'buttons-checkbox':
                            if(check.indexOf(button.val()) == -1){
                                button.addClass('active');
                                check.push(button.val());
                            }else{
                                check.splice(check.indexOf(button.val()),1);
                                button.removeClass('active');
                            }
                            hidden.val(check.toString());
                            break;
                        case 'button':
                            if(button.val() == hidden.val()) {
                                button.removeClass('active');
                                hidden.val(0);
                            } else {
                                button.addClass('active');
                                hidden.val(1);
                            }
                            break;
                        default:
                            hidden.val(button.val());
                            break;
                    }
                });
                switch(type) {
                    case 'buttons-checkbox':
                        for (i=0;i<check.length;i++) {
                            if(button.val() == check[i]) {
                                button.addClass('active');
                            }
                        }
                        break;
                    default:
                        if(button.val() == hidden.val()) {
                            button.addClass('active');
                        }
                        break;
                }

            });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:51:27.453

HTML 代码似乎有效。问题出在你的 JS 上。我已经通过[JSHint](http://www.jshint.com)运行了您的代码，JSHint 是 JS 的在线 linter。它返回了以下问题。

```
Line 2: $('div.btn-group[data-toggle-name=*]').each(function () {
Missing "use strict" statement.

Line 10: if($(this).val() == hidden.val()) {
Expected '===' and instead saw '=='.

Line 36: if($(this).val() == hidden.val()) $(this).addClass('active');
Expected '===' and instead saw '=='.

Line 36: if($(this).val() == hidden.val()) $(this).addClass('active');
Expected '{' and instead saw '$'.

Line 39: });​
Unexpected '​'. 
```

希望这对 DFTBA 有所帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:16:45.133

为什么不使用 bootstrap-button.js

[http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)

# ruby-on-rails - Rails：制作这条路线的正确 RESTful 方式是什么？

> ID：10961761
> 
> 赞同：0
> 
> 时间：2012-06-09T14:22:01.297
> 
> 标签：ruby-on-rails, rest, has-many

所以我有一个 Carts 模型，其中包含`has_many`Items。当我在`Carts#show`页面上时，我想要一个指向从购物车中删除项目的操作的链接，换句话说，它会找到该项目并将其设置`cart_id`为 nil。

我应该给这个动作起什么名字？它应该在哪个控制器中 -`CartsController`或`ItemsController`？最后......我如何在我的`routes.rb` *（请为此提供代码）中指定这条路线*

**编辑**

我应该更明确一点：当我从一个人的购物车中取出一件物品时，我不想破坏它。每个项目都是独一无二的，因此销毁它会破坏列表......这是不可取的。请注意，这也意味着这*不是*HABTM 关系......物品不能属于多个购物车。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:24:03.890

路线：

```
resources :carts do
  resources :items
end 
```

这会生成以下路线：

```
cart_items GET    /carts/:cart_id/items(.:format)          items#index
               POST   /carts/:cart_id/items(.:format)          items#create
 new_cart_item GET    /carts/:cart_id/items/new(.:format)      items#new
edit_cart_item GET    /carts/:cart_id/items/:id/edit(.:format) items#edit
     cart_item GET    /carts/:cart_id/items/:id(.:format)      items#show
               PUT    /carts/:cart_id/items/:id(.:format)      items#update
               DELETE /carts/:cart_id/items/:id(.:format)      items#destroy
         carts GET    /carts(.:format)                         carts#index
               POST   /carts(.:format)                         carts#create
      new_cart GET    /carts/new(.:format)                     carts#new
     edit_cart GET    /carts/:id/edit(.:format)                carts#edit
          cart GET    /carts/:id(.:format)                     carts#show
               PUT    /carts/:id(.:format)                     carts#update
               DELETE /carts/:id(.:format)                     carts#destroy 
```

所以你在描述物品 - 购物车关系方面真的很明确。

您可以像往常一样使用控制器。

我不知道您为什么要将其设置`cart_id`为`nil`而不是删除它，但这就是您的做法：

```
# in items_controller.rb

def destroy
    @item = Item.find(params[:id])
    @item.update_attributes(:cart_id => params[:cart_id])

    respond_to do |format|
      format.html { redirect_to items_url }
      format.json { head :no_content }
    end
end 
```

# haskell - 如何将 IO 操作清晰地编织到使用自定义 Monad 的两个函数之间的调用堆栈中？

> ID：10961762
> 
> 赞同：2
> 
> 时间：2012-06-09T14:22:18.210
> 
> 标签：haskell, error-handling, monads

我正在练习与我的错误处理保持一致，并且我一直希望看到我编写的代码开始缩小。但是我构建了一个具有领域意义的持久性函数，而我必须编写的代码量只是为了进行 monad 处理和自定义错误处理是惊人的。

*   对于“编程错误”，我只是调用`error "assertion blown"`
*   对于真正平凡的事情，我返回 Nothing（请求的对象不存在）
*   对于应该处理的错误，我`Either E V`通过创建一个`Control.Monad.Error`实例来处理它来返回或等效。

我在我的应用程序中有多个函数，我称之为原语，但它们可以捕获某些错误并将引发它们我抛出 DBError 类型的值。所以，我这样定义它们：

```
data DBError = ConversionError ConvertError
         | SaveError String
         | OtherError String 
         deriving (Show, Eq)

instance Error DBError where
    noMsg = OtherError "No message found"
    strMsg s = OtherError s

type DBMonad = ErrorT DBError IO

selectWorkoutByID :: IConnection a => UUID -> a -> DBMonad (Maybe SetRepWorkout)
insertWorkout :: IConnection a => SetRepWorkout -> a -> DBMonad () 
```

在调用应用程序级别，Workout 是一个持久保存到数据库的唯一对象，因此应用程序只调用 saveWorkout，它本身以您期望的方式使用 selectWorkoutByID、insertWorkout 和 updateWorkout：

```
saveWorkout :: IConnection a => SetRepWorkout -> a -> DBMonad ()
saveWorkout workout conn =
    r <- liftIO $ withTransaction conn $ \conn -> runErrorT $ do
        w_res <- selectWorkoutByID (uuid workout) conn
        case w_res of
            Just w -> updateWorkout workout conn >> return ()
            Nothing -> insertWorkout workout conn >> return ()
    case r of
        Right _ -> return ()
        Left err -> throwError err 
```

这很丑陋。我必须运行并解包 DBMonad，在 IO monad 中运行它，将 IO 提升回 DBMonad，然后检查结果并在 DBMonad 中重新包装结果。

**如何使用更少且更易于阅读的代码来做到这一点？**

我期望使用我的自定义应用程序 monad 来处理可恢复的错误将帮助我*减少*我必须编写的代码量，但这恰恰相反！

以下是一些额外的问题：

*   有没有更好的方法来构建应用程序语义错误？
*   我应该改用 Control.Exception 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:15:05.887

在查看了[http://en.wikibooks.org/wiki/Haskell/Monad_transformers](http://en.wikibooks.org/wiki/Haskell/Monad_transformers)之后，这是第一个真正帮助我理解 Monad Transformers 的文档，我找到了一个不错的解决方案。

saveWorkout 函数的新版本如下所示：

```
saveWorkout :: IConnection a => SetRepWorkout -> a -> DBMonad ()
saveWorkout workout conn =
    ErrorT $ liftIO $ withTransaction conn $ \conn -> runErrorT $ do
        w_res <- selectWorkoutByID (uuid workout) conn
        case w_res of
            Just w -> updateWorkout workout conn >> return ()
            Nothing -> insertWorkout workout conn >> return () 
```

交易是这样的：

withTransaction 正在返回`IO Either DBError ()`。 `liftIO`有类型`MonadIO m => IO a -> m a`。ErrorT 是所有 ErrorT monad 的标准构造函数，我将 DBMonad 定义为该 monad。所以，我正在使用这些类型：

```
withTransaction conn $ <bunch of code> :: IO (Either DBError ())
liftIO :: MonadIO m => IO (Either DBError ()) -> m (Either DBError ())
ErrorT :: IO (Either DBError ()) -> ErrorT IO DBError () 
```

理想情况下，由于 ErrorT/DBMonad 是 MonadTrans 类的一部分，我会简单地使用`lift`它来提升`IO (Either DBError ())`到 ErrorT monad，但此时我无法让它真正正确地进行类型检查。然而，这个解决方案仍然通过删除我之前拥有的冗余重新包装来使代码更好。

# visual-c++ - HaarTraining 与 OpenCV 错误

> ID：10961763
> 
> 赞同：3
> 
> 时间：2012-06-09T14:22:21.780
> 
> 标签：visual-c++, image-processing, opencv

我有大约 15000 张带有感兴趣对象（正样本）的裁剪图像和 7000 张负图像（非感兴趣对象）。裁剪后的图像分辨率为 48x96，并放置在文件夹中。包含正样本的 .txt 文件如下所示：picture1.pgm 1 0 0 48 96 表示图片 1 从 (0,0) 到 (48, 96) 有 1 个正样本。同样，我有一个用于负面图像的 .txt 文件。

训练命令如下： `c:\libraries\OpenCV2.4.1\opencv\built\bin\Debug>opencv_haartrainingd.exe -data d ata/cascade -vec data/positives.vec -bg c:/users/gheorghi/desktop/daimler/pedest rian_stereo_extracted/nonpedestrian/nonpedestrian/c0/negatives.txt -npos 15660 - nneg 7129 -nstage 14 -mem 1000 -mode ALL -w 18 -h 36 -nonsym`

但在某些时候我总是会收到这个错误：

```
 Parent node: 0

*** 1 cluster ***
OpenCV Error: Assertion failed (elements_read == 1) in unknown function, file C:
\libraries\OpenCV2.4.1\opencv\apps\haartraining\cvhaartraining.cpp, line 1858 
```

我该如何克服这个？？？任何帮助表示赞赏。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:54:40.733

我发现问题可以通过两种方式解决。您可以减少正面的数量或增加负面的数量。无论哪种方式，事实证明，具有较小的正负比率会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:06:59.950

[我在这里](https://stackoverflow.com/a/14543283/1201501)回答了这个问题。它可能会有所帮助。

许多其他人发布了相同的问题，我使用了[此处](http://code.opencv.org/issues/1834)给出的建议。

# jquery - jQuery缓存元素

> ID：10961769
> 
> 赞同：2
> 
> 时间：2012-06-09T14:22:53.470
> 
> 标签：jquery, variables

我有一个使用缓存元素（el）来更改**2 divs**的字体大小的函数。当函数执行时，我需要根据它是哪个 div（`tagCommon`或`tagLatin`）确保字体不会太小或太大。那么如何在函数中确定通过哪个元素传递给它`el`呢？

我想我可能是在想这件事或做错了，这有点像我在**入侵**它……而且通常当我觉得有什么不对劲的时候。

```
var cb               = $('#tagCommon');
var lb               = $('#tagLatin'); 
changeFontSize(cb,1,'up');

function changeFontSize(el,amount,UporDown){
   var size = parseFloat($(el).css("font-size").replace(/px/, ""));
   // do some stuff here

   // ????????
   if(el == $('#tagCommon')) //check font size and alert if too small
   if(el == $('#tagLatin')) //check font size and alert if too small
} 
```

感谢您的时间。

托德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:25:20.457

使用 jQuery [is()](http://api.jquery.com/is/)方法

> 根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。

```
if(el.is('#tagCommon'))
    {
      //  your code here
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:26:19.817

```
function changeFontSize(el,amount,UporDown){
   var size = parseFloat($(el).css("font-size").replace(/px/, "")),
       id = el.attr('id'); // or el[0].id

   if(id == 'tagCommon') //check font size and alert if too small
   if(id == 'tagLatin') //check font size and alert if too small

   // OR
   if(id == 'tagCommon')
   if(id == 'tagLatin')

   // OR
   if(el.is('#tagCommon'))
   if(el.is('#tagLatin'))
} 
```

`.attr('id')`将检索 id 并与提供的匹配

`.is()`与选择器、元素或 jQuery 对象匹配的元素集。返回值布尔值真/假。

# android - 尝试删除 textBox 和 Spinner 时出现空指针错误

> ID：10961770
> 
> 赞同：0
> 
> 时间：2012-06-09T14:23:04.540
> 
> 标签：android, android-layout

大家好，我正在尝试制作一个动态可滚动的 selectiondata 列表，用户可以在需要时添加或删除微调器和 editText。我添加了 Spinner 和 editText 没有问题，但是当我尝试删除列表底部的那个时..我收到一个空指针错误。

起初我认为这是因为我没有正确引用它们（相关的editText和微调器数据保存在哈希图中）但是我已经打印出键名并且它们看起来是正确的。

这是代码..

变量

```
int count = 0;
HashMap<String,Spinner> spinnerMap = new HashMap<String,Spinner>();
HashMap<String,EditText> editTextMap = new HashMap<String,EditText>();
LinearLayout horzLayout;
LinearLayout layout; 
```

addRow 方法

```
 public void addRow()
    {
        Toast.makeText(getApplicationContext(), "editText"+count, Toast.LENGTH_SHORT).show();
        layout = (LinearLayout) findViewById(R.id.scrollerLayout);  
        LinearLayout horzLayout = new LinearLayout(this);
        LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT
        );
        editTextMap.put("editText"+count, new EditText(this));
        editTextMap.get("editText"+count).setWidth(100);
        editTextMap.get("editText"+count).setHeight(40);
        spinnerMap.put("spinner"+count, new Spinner(this));
        List<String> spinnerItems = new ArrayList<String>();
        spinnerItems.add("Super Duper Bad Evil Weed");
        spinnerItems.add("Super Duper Edible Weed");
        spinnerItems.add("Funky Looking Weed");
        spinnerItems.add("Special Weed");

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, spinnerItems);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinnerMap.get("spinner"+count).setAdapter(dataAdapter);
        horzLayout.setOrientation(LinearLayout.HORIZONTAL);
        layout.addView(horzLayout, p);
        horzLayout.addView(spinnerMap.get("spinner"+count));
        horzLayout.addView(editTextMap.get("editText"+count));
        count++;

    } 
```

RemoveRow 方法

```
 public void removeRow()
{
    count--;
    Toast.makeText(getApplicationContext(), "editText"+count, Toast.LENGTH_SHORT).show();
    horzLayout.removeView(spinnerMap.get("spinner"+count));
    spinnerMap.remove("spinner"+count);
    horzLayout.removeView(editTextMap.get("editText"+count));
    editTextMap.remove("editText"+count);

} 
```

确切的错误消息..

```
> 06-09 23:48:33.369: E/AndroidRuntime(560): FATAL EXCEPTION: main
06-09 23:48:33.369: E/AndroidRuntime(560): java.lang.NullPointerException
06-09 23:48:33.369: E/AndroidRuntime(560):  at org.unisa.paddockpad.ScreenTwo.removeRow(ScreenTwo.java:83)
06-09 23:48:33.369: E/AndroidRuntime(560):  at org.unisa.paddockpad.ScreenTwo$2.onClick(ScreenTwo.java:52)
06-09 23:48:33.369: E/AndroidRuntime(560):  at android.view.View.performClick(View.java:3511)
06-09 23:48:33.369: E/AndroidRuntime(560):  at android.view.View$PerformClick.run(View.java:14105)
06-09 23:48:33.369: E/AndroidRuntime(560):  at android.os.Handler.handleCallback(Handler.java:605)
06-09 23:48:33.369: E/AndroidRuntime(560):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-09 23:48:33.369: E/AndroidRuntime(560):  at android.os.Looper.loop(Looper.java:137)
06-09 23:48:33.369: E/AndroidRuntime(560):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-09 23:48:33.369: E/AndroidRuntime(560):  at java.lang.reflect.Method.invokeNative(Native Method)
06-09 23:48:33.369: E/AndroidRuntime(560):  at java.lang.reflect.Method.invoke(Method.java:511)
06-09 23:48:33.369: E/AndroidRuntime(560):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-09 23:48:33.369: E/AndroidRuntime(560):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-09 23:48:33.369: E/AndroidRuntime(560):  at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助将不胜感激！

*更新*

在该方法中创建视图后，我可以立即删除它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:55:24.167

horzLayout 在 addRow 中初始化（作为局部变量）但不在删除行中（它是全局的）...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T14:49:37.787

这似乎是与按钮绑定的危险代码。也就是说`count--`，如果用户在 count=0 时单击按钮，则可以得到 count = -1，这可能会导致您的 NPE ...

# php - 加入 IP2C 表的最快方法是什么？

> ID：10961771
> 
> 赞同：1
> 
> 时间：2012-06-09T14:23:18.990
> 
> 标签：php, mysql, sql, join

我总共有三张表，一张是玩家姓名和他们的最后一次登录，另一张是玩家姓名和他们的 IP。这些来自游戏服务器，但它是服务器的两个独立“插件”，因此我无法将它们合并到一个表中。

我成功地将这两个加入`playername`列中，如下所示：

```
SELECT
 u.`user` as `ign`,
 lb.`lastlogin` as `date`,
 lb.`ip`
FROM `mcmmo_users` u
 LEFT JOIN `lb-players` lb
  ON u.`user`=lb.`playername` 
```

这些产生以下数组：`Array(ign,date,ip);`

但是，我也有一个 IP2C（IP-Country）表，我想同时获得这些结果。但是，这个表非常大，如果我执行标准的 LEFT JOIN，会大大减慢查询速度。

有没有更快的加入方式？我宁愿不查询数据的每个 PHP 循环。

我正在使用 MySQL 和 PHP

IP2C数据库布局如下：

```
begin_ip | end_ip | begin_ip_num | end_ip_num | country_code | country_name 
```

并查询如下：

```
$IPNUM = sprintf("%u",ip2long($ip));

SELECT `country_code` 
  FROM `cpanel_ip2c` 
 WHERE `$IPNUM` BETWEEN `begin_ip_num` AND `end_ip_num` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:23:32.780

`between`很难为数据库优化条件。相反，请考虑查询大于或等于用户 IP 的第一个 IP 块：

```
select  *
from    mcmmo_users u
left join
        `lb-players` lb 
on      u.user = lb.playername
left join
        cpanel_ip2c ip
on      ip.begin_ip_num = 
        (
        select  begin_ip_num
        from    cpanel_ip2c ip
        where   ip.begin_ip_num <= inet_aton(lb.ip)
        order by
                ip.begin_ip_num desc
        limit   1
        )
        and inet_aton(lb.ip) <= ip.end_ip_num 
```

使用 上的索引`cpanel_ip2c(begin_ip_num )`，可以通过索引查找来解决国家/地区问题。

这是一个[关于 SQL Fiddle 的示例](http://sqlfiddle.com/#!2/e19d4/5)`mcmmo_users`，为简单起见省略了该表。

# iphone - 如何使用执行选择器选择随机方法？

> ID：10961772
> 
> 赞同：1
> 
> 时间：2012-06-09T14:23:25.247
> 
> 标签：iphone, objective-c, ios, random, performselector

在我的应用程序中，我`performSelector`用来调用方法。我的应用程序中有三种不同的方法，我希望随机分配这三种方法中的一种来执行选择器。这是我的代码。

```
[self performSelector:@selector()]; 
```

这是我的三个方法..

```
-(void)Act1
{
}

-(void)Act2
{
}

-(void)Act3
{
} 
```

现在我想每次随机分配一种方法给选择器。谁能指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:31:22.733

这应该这样做：

```
int rand = (arc4random() % 3) + 1;
[self performSelector:NSSelectorFromString([NSString stringWithFormat:@"Act%d",rand])]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T14:32:36.770

使用选择器数组，`SEL`是它们的类型。

```
SEL mySelectors[3] = { @selector(Act1), @selector(Act2), @selector(Act3) };
[self performSelector:mySelectors[rand() % 3]]; 
```

您可能希望抑制 ARC 发出的有关潜在内存泄漏的警告，因为您的方法是`void`. 像这样使用`objc_msgSend`或包装代码：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [self performSelector:mySelectors[rand() % 3]];
#pragma clang diagnostic pop 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-09T14:27:27.083

您可以将 3 个字符串放入表示您的方法的数组中，随机选择一个并使用 Nsselectorfromstring 来获取您的选择器

# objective-c - NSRegularExpression enumerateMatchesInString:options:range:usingBlock: 给出一个空结果？

> ID：10961779
> 
> 赞同：5
> 
> 时间：2012-06-09T14:24:39.487
> 
> 标签：objective-c, regex, nsregularexpression

我在解析器中使用正则表达式，但是，它似乎给出了一个结果，这是我的代码：正则表达式：

```
self.seatSelectRegex = [NSRegularExpression regularExpressionWithPattern:@"Seat ([0-9]{1,2}): (.*) \\([$£€]?([0-9.]+) in chips\\).*$" options:NSRegularExpressionAnchorsMatchLines error:&error]; 
```

代码：

```
NSMutableDictionary *players = [[NSMutableDictionary alloc] init];
[self.seatSelectRegex enumerateMatchesInString:input options:NSMatchingCompleted range:NSMakeRange(0, input.length) usingBlock:
 ^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) 
{

    NSLog(@"%lu", result.range.length);
    Player *p = [[Player alloc] init];

    p.name = [input substringWithRange:[result rangeAtIndex:2]];
    p.seatNumber = [input substringWithRange:[result rangeAtIndex:1]].intValue;
    p.stack = [input substringWithRange:[result rangeAtIndex:3]].doubleValue;

    [players setValue:p forKey:p.name];
}]; 
```

我期望我的输入有 3 个结果，但是，我得到 4，其中最后一个结果的范围是 location = 0 和 length = 0（前三个都是正确的）。这是常见的行为，我应该只检查范围的位置和长度，还是某处有错误？

对于它的价值，这是我的输入：

```
PokerStars Hand #81669312371:  Hold'em No Limit ($0.01/$0.02 USD) - 2012/06/08 16:57:33 CET [2012/06/08 10:57:33 ET]
Table 'Icarus III' 6-max Seat #2 is the button
Seat 2: SanderDecler ($2 in chips) 
Seat 3: ehrli87 ($0.90 in chips) 
Seat 4: umar.11 ($1.60 in chips) 
ehrli87: posts small blind $0.01
umar.11: posts big blind $0.02
*** HOLE CARDS ***
Dealt to SanderDecler [Kh 7d]
SanderDecler: raises $0.04 to $0.06
ehrli87: folds 
umar.11: calls $0.04
*** FLOP *** [Jc Tc Jh]
umar.11: checks 
SanderDecler: bets $0.08
umar.11: raises $0.24 to $0.32
SanderDecler: folds 
Uncalled bet ($0.24) returned to umar.11
umar.11 collected $0.28 from pot
*** SUMMARY ***
Total pot $0.29 | Rake $0.01 
Board [Jc Tc Jh]
Seat 2: SanderDecler (button) folded on the Flop
Seat 3: ehrli87 (small blind) folded before Flop
Seat 4: umar.11 (big blind) collected ($0.28) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T15:07:27.907

这是因为您将`NSMatchingReportCompletion`选项与`enumerateMatchesInString:options:range:usingBlock:`. 从[苹果文档](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRegularExpression/enumerateMatchesInString:options:range:usingBlock:)：

> 如果指定了 NSMatchingReportCompletion 匹配选项，则在匹配完成后将调用 Block 对象一次，结果为零，并且在传递给 Block 的标志中设置 NSMatchingCompleted 匹配标志，以及 NSMatchingHitEnd、NSMatchingRequiredEnd 中的任何其他相关“NSMatchingFlags” ，或 NSmatchingInternalError。

您将最后一个块调用视为位置和长度设置为 0 的范围的原因是因为您发送的消息`nil`将返回`nil`（即整数 0）。

# url - 地点详细信息中的照片项目响应缺少 url

> ID：10961784
> 
> 赞同：2
> 
> 时间：2012-06-09T14:25:28.517
> 
> 标签：url, foursquare, photos

不确定这是否是尚未在更改日志中发布的最近更改。[我在对https://api.foursquare.com/v2/venues/VENUE_ID/photos](https://api.foursquare.com/v2/venues/VENUE_ID/photos)的 photos.item 的响应中没有看到“url”字段

根据以下文档：

[https://developer.foursquare.com/docs/responses/photo](https://developer.foursquare.com/docs/responses/photo)

当前响应包含前缀/后缀 - 连​​接它们不会给我一个有效的 url：

{

```
id: "4fd2d8ebe4b0191b9baa0f27"
createdAt: 1339218155
source: {
    name: "Instagram"
    url: "http://instagram.com"
}
prefix: "https://irs3.4sqi.net/img/general/"
suffix: "/6HAKqu62Rs08SA91kcigymvft2D3NliwE12D0JtJWbo.jpg"
width: 612
height: 612
user: {
    id: "579544"
    firstName: "Nick"
    lastName: "J."
    photo: {
        prefix: "https://irs2.4sqi.net/img/user/"
        suffix: "/VDJ3TVMKB03IGDYD.jpg"
    }
}
visibility: "public" 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:45:33.990

关于同一问题还有另外两个问题：
[how to get profile pic forfoursquare user based on the object](https://stackoverflow.com/questions/10967413/how-to-get-profile-pic-for-foursquare-user-based-on-the-object)
[Foursquare API for place user image error](https://stackoverflow.com/questions/10977100/foursquare-api-for-venue-user-image-error)

这些是他们在 20120609 更新中所做的更改，使用此处建议的修复（[prefix]/original/[suffix]）或降低版本号（'v' 参数）

Foursquare 可能会很快发布一些关于此的文档。

# c# - 将 C# 代码包装为 ActiveX

> ID：10961785
> 
> 赞同：0
> 
> 时间：2012-06-09T14:25:59.110
> 
> 标签：c#, com, interop, activex, wrapper

我编写了一个 C# 类库并想在 vbscript 中使用它。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.PointOfService;
using System.Runtime.InteropServices;
using Microsoft.Win32;
using System.Reflection;
using System.ComponentModel;

namespace IndigoDynamic
{
    #region class implements IAsyncResult
    [ProgId("IndigoDynamic.VirtualManager")]
    [ClassInterface(ClassInterfaceType.AutoDispatch)]
    [ComVisible(true)]
    public class AsyncResult : IAsyncResult
    {
        object _state;
        private bool m_completed;
        private System.Threading.ManualResetEvent m_handle;
        private Exception m_exception;

        public bool IsCompleted
        {
            get { return m_completed; }
            set { m_completed = value; }
        }

        public System.Threading.WaitHandle AsyncWaitHandle
        {
            get { return m_handle; }
            set { m_handle = (System.Threading.ManualResetEvent)value; }
        }

        public object AsyncState
        {
            get
            {
                if (Exception != null)
                {
                    throw Exception;
                }
                return _state;
            }
            internal set
            {
                _state = value;
            }
        }

        public bool CompletedSynchronously { get { return IsCompleted; } }

        internal Exception Exception
        {
            get { return m_exception; }
            set { m_exception = value; }
        }
    }
    #endregion

    #region extends CashDrawer
    [ProgId("IndigoDynamic.VirtualManager")]
    [ClassInterface(ClassInterfaceType.AutoDispatch)]
    [ComVisible(true)]
    public class MyCashDrawer
    {
        private CashDrawer me;
        public delegate void status_callback(int newstatus);

        private status_callback myF;

        public MyCashDrawer(CashDrawer param)
        {
            me = param;
            me.StatusUpdateEvent += new StatusUpdateEventHandler(this.StatusUpdate);
        }

        [ComVisible(true)]
        public void Claim(int timeout) { me.Claim(timeout); }

        [ComVisible(true)]
        public void Close() { me.Close(); }

        [ComVisible(true)]
        public void Open() { me.Open(); }

        [ComVisible(true)]
        public void OpenDrawer() { me.OpenDrawer(); }

        [ComVisible(true)]
        public void Release() { me.Release(); }

        [ComVisible(true)]
        public void Release(int timeout, int freq, int duration, int delay)
        {
            me.WaitForDrawerClose(timeout, freq, duration, delay);
        }

        [ComVisible(true)]
        public int StatusClosed() { return CashDrawer.StatusClosed; }

        [ComVisible(true)]
        public int StatusOpen() { return CashDrawer.StatusOpen; }

        [ComVisible(true)]
        public bool Claimed() { return me.Claimed; }

        [ComVisible(true)]
        public bool DeviceEnabled() { return me.DeviceEnabled; }

        [ComVisible(true)]
        public bool DrawerOpened() { return me.DrawerOpened; }

        [ComVisible(true)]
        public ControlState State() { return me.State; }

        [ComVisible(true)]
        public void addStatusCallback(status_callback f)
        {
            myF = f;
        }

        [ComVisible(true)]
        public void removeStatusCallback(status_callback f)
        {
            if (myF == f)
                myF = null;
        }

        [ComVisible(true)]
        private void StatusUpdate(object sender, StatusUpdateEventArgs arg)
        {
            if (myF != null)
                myF(arg.Status);
        }
    }
    #endregion

    [ProgId("IndigoDynamic.VirtualManager")]
    [ClassInterface(ClassInterfaceType.AutoDispatch)]
    [ComVisible(true)]
    class VirtualManager : ISynchronizeInvoke
    {
        private readonly object _sync;

        // Constructor
        public VirtualManager()
        {
            _sync = new object();
        }

        #region implements methods of ISynchronizeInvoke
        public IAsyncResult BeginInvoke(Delegate method, object[] args) {
            AsyncResult result = new AsyncResult();

            System.Threading.ThreadPool.QueueUserWorkItem(delegate {
                result.AsyncWaitHandle = new System.Threading.ManualResetEvent(false);
                try {
                    result.AsyncState = Invoke(method, args);
                } catch (Exception exception) {
                    result.Exception = exception;
                }
                result.IsCompleted = true;
            });

            return result;
        }

        public object EndInvoke(IAsyncResult result) {
            if (!result.IsCompleted) {
                result.AsyncWaitHandle.WaitOne();
            }

            return result.AsyncState;
        }

        public object Invoke(Delegate method, object[] args) {
            lock (_sync) {
                return method.DynamicInvoke(args);
            }
        }

        public bool InvokeRequired {
            get { return true; }
        }
        #endregion

        [ComVisible(true)] 
        public MyCashDrawer getCashDrawer()
        {
            PosExplorer posExplorer = new PosExplorer(this);
            DeviceInfo deviceInfo = posExplorer.GetDevice(DeviceType.CashDrawer);
            if (deviceInfo == null)
            {
                //<report failure >
                return null;
            }
            else
            {
                CashDrawer cd = posExplorer.CreateInstance(deviceInfo) as CashDrawer;

                return new MyCashDrawer(cd);
            }
        }

        [ComVisible(true)]
        public MyCashDrawer getCashDrawer(String name)
        {
            PosExplorer posExplorer = new PosExplorer(this);
            DeviceInfo deviceInfo = posExplorer.GetDevice(DeviceType.CashDrawer, name);
            if (deviceInfo == null)
            {
                //<report failure >
                return null;
            }
            else
            {
                CashDrawer cd = posExplorer.CreateInstance(deviceInfo) as CashDrawer;
                return new MyCashDrawer(cd);
            }
        }

        [ComRegisterFunction()]
        public static void RegisterClass(string key)
        {
            StringBuilder sb = new StringBuilder(key);
            sb.Replace(@"HKEY_CLASSES_ROOT\", "");

            RegistryKey k = Registry.ClassesRoot.OpenSubKey(sb.ToString(), true);

            RegistryKey ctrl = k.CreateSubKey("Control");
            ctrl.Close();

            RegistryKey inprocServer32 = k.OpenSubKey("InprocServer32", true);
            inprocServer32.SetValue("CodeBase", Assembly.GetExecutingAssembly().CodeBase);
            inprocServer32.Close();

            k.Close();
        }

        [ComUnregisterFunction()]
        public static void UnregisterClass(string key)
        {
            StringBuilder sb = new StringBuilder(key);
            sb.Replace(@"HKEY_CLASSES_ROOT\", "");

            RegistryKey k = Registry.ClassesRoot.OpenSubKey(sb.ToString(), true);

            if (k == null)
            {
                return;
            }
            k.DeleteSubKey("Control", false);

            RegistryKey inprocServer32 = k.OpenSubKey("InprocServer32", true);
            inprocServer32.DeleteSubKey("CodeBase", false);
            inprocServer32.Close();
            k.Close(); 
        }
    }
} 
```

构建后，我使用 RegAsm 但它抛出警告没有类型被注册。然后我在 vbs 中编写了一个示例代码，但它说 ActiveX 无法创建对象。

```
Sub main
    set objTest = CreateObject("IndigoDynamic.VirtualManager")
end sub

call main 
```

有人说我必须检查 AssemblyInfo.cs 并确保我有

```
[assembly: ComVisible(true)] 
```

我当然有，但问题仍然没有解决。谁能告诉我一个解决方案？

* * *

我像那样更改我的代码。更简单，没有线程，没有接口，都是公开的。但它仍然不起作用。拜托，我真的需要帮助。

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.PointOfService;
using System.Runtime.InteropServices;
using Microsoft.Win32;
using System.Reflection;
using System.ComponentModel;

namespace IndigoDynamic
{            
    [ProgId("IndigoDynamic.VirtualManager")]
    [ClassInterface(ClassInterfaceType.AutoDispatch)]
    [ComVisible(true)]
    public class VirtualManager
    {   
        public VirtualManager()
        {
        }

        [ComVisible(true)] 
        public CashDrawer getCashDrawer()
        {
            PosExplorer posExplorer = new PosExplorer();
            DeviceInfo deviceInfo = posExplorer.GetDevice(DeviceType.CashDrawer);
            if (deviceInfo == null)
            {
                //<report failure >
                return null;
            }
            else
            {
                CashDrawer cd = posExplorer.CreateInstance(deviceInfo) as CashDrawer;
                return cd;
            }
        }

        [ComVisible(true)]
        public CashDrawer getCashDrawer(String name)
        {
            PosExplorer posExplorer = new PosExplorer();
            DeviceInfo deviceInfo = posExplorer.GetDevice(DeviceType.CashDrawer, name);
            if (deviceInfo == null)
            {
                //<report failure >
                return null;
            }
            else
            {
                CashDrawer cd = posExplorer.CreateInstance(deviceInfo) as CashDrawer;
                return cd;
            }
        }

        [ComRegisterFunction()]
        public static void RegisterClass(string key)
        {
            StringBuilder sb = new StringBuilder(key);
            sb.Replace(@"HKEY_CLASSES_ROOT\", "");

            RegistryKey k = Registry.ClassesRoot.OpenSubKey(sb.ToString(), true);

            RegistryKey ctrl = k.CreateSubKey("Control");
            ctrl.Close();

            RegistryKey inprocServer32 = k.OpenSubKey("InprocServer32", true);
            inprocServer32.SetValue("CodeBase", Assembly.GetExecutingAssembly().CodeBase);
            inprocServer32.Close();

            k.Close();
        }

        [ComUnregisterFunction()]
        public static void UnregisterClass(string key)
        {
            StringBuilder sb = new StringBuilder(key);
            sb.Replace(@"HKEY_CLASSES_ROOT\", "");

            RegistryKey k = Registry.ClassesRoot.OpenSubKey(sb.ToString(), true);

            if (k == null)
            {
                return;
            }
            k.DeleteSubKey("Control", false);

            RegistryKey inprocServer32 = k.OpenSubKey("InprocServer32", true);
            inprocServer32.DeleteSubKey("CodeBase", false);
            inprocServer32.Close();
            k.Close(); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:16:36.137

不幸的是，您*与*可行的解决方案相去甚远。警告是准确的，您在 [ComVisible] 上创建的任何类都不能由 COM 客户端创建。MyCashDrawer 缺少所需的默认构造函数，COM 客户端应用程序无法将参数传递给构造函数。VirtualManager 不是公共的，并且派生自一个不是 [ComVisible] 的接口

该代码还缺少使 ActiveX 组件在 ActiveX 主机窗口上工作的接口所需的实现，例如 IOleObject、IOleInPlaceObject、IOleInplaceActiveObject、IOleWindow、IViewObject 等。此外，您正在公开 ActiveX 对象无法处理的实现细节，COM 中的线程模型与 .NET 中的非常不同。

您将需要一种截然不同的方法。考虑从 System.Windows.Forms.Control 派生可见对象，它负责最低 ActiveX 接口实现要求。*并让你的*问题线程化，不要让客户来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:34:00.837

regasm 警告不是问题。也许是因为 VirtualManager 类不是公开的。尝试将您的课程公开。

# mysql - MySQL：如何插入表并重写信息

> ID：10961790
> 
> 赞同：0
> 
> 时间：2012-06-09T14:26:16.150
> 
> 标签：mysql

我已经写了一个看起来像这样的表：

```
用户名 | 密码 | 列表内容
尖酸刻薄|(未显示)| 修剪草坪，做作业，做早餐

```

当用户输入新任务时，我想覆盖/添加到表的 ListContents 字段。这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:29:07.297

是的，有可能做到。看这里[MySQL UPDATE](http://dev.mysql.com/doc/refman/5.0/en/update.html)

编辑：您应该认真考虑您的帖子中有关规范化表格的评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:31:41.137

我相信您想将新输入与 ListContents 字段中的先前值连接起来。

`UPDATE table SET ListContents = concat(ListContents, ",newInput") WHERE Username = "snarky"`

如果您不能/不想规范化表格，我建议您至少尝试以某种`JSON`格式存储值。

# html - HTML5 画布和游戏编程

> ID：10961795
> 
> 赞同：4
> 
> 时间：2012-06-09T14:26:45.200
> 
> 标签：html, canvas

我希望这不会太开放。

我想知道是否有更好（对电池更友好）的方式来做到这一点——

我有一个小型 HTML 5 游戏，绘制在画布上（比如说 500x500）。我有一些对象的位置我每 50 毫秒左右更新一次。我当前的实现每 50 毫秒重新绘制整个画布。我无法想象这对移动平台上的电池寿命非常有益。

有一个更好的方法吗？这一定是游戏的常见模式。

编辑：

根据要求，这里有更多更新：

现在，对象是通过弧线和直线绘制的几何图元。我不反对制作这些小的 png/jpg/gif 文件，而不是这样做会有所帮助。这些是小图形——只有 15x15 左右。

随着游戏的进行，画面的变化越来越多。但是，在开始时，屏幕变化相对较慢（对象每 50 毫秒随机移动几个像素）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T15:17:49.943

几乎每一个像这样连续动画的游戏都会重绘每一帧的所有内容；聪明的更新算法仅适用于屏幕的一小部分发生变化并且有一个很好的规则来找出与该部分重叠的部分。

以下是一些通用的优化建议：

*   确保尽可能多的图形由 GPU 而不是 CPU 处理。（如果用户的浏览器不使用 GPU 进行 2D 画布渲染，这可能是不可能的，但随着 HTML5 游戏的普及，升级可能会改变这一点。）

    *   这意味着你应该避免复杂的聪明算法，而倾向于在 JS 代码中做尽可能少的工作——除非在很容易确定它不可见时（例如在屏幕边界之外）避免执行大量绘图一般是值得的。

    *   如果您的目标平台支持它（当前移动设备通常不支持），请尝试使用 WebGL 而不是 2D Canvas。您将不得不做更多的细节工作，但 WebGL 允许您使用更可能由 GPU 硬件有效提供的操作。

*   如果你的游戏变得空闲——也就是说，此时实际上没有任何动画——停止重绘。停止更新循环，直到用户与游戏交互或发生超时。

将您正在绘制的图形类型的详细信息添加到您的问题中可能会有所帮助（例如，您使用的是精灵还是几何图元？您是在绘制旋转/缩放的图像吗？大部分屏幕会发生变化还是只有几个小对象？您是否混合了许多图层？）甚至可能是一两个屏幕截图；然后我们可以建议哪种优化适合您的特定游戏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T19:22:11.533

不要绘制背景，将其设为图像并设置画布的 CSS background-image。

使用 requestAnimationFrame 应该有助于延长电池寿命。

[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

仅在实际发生更改时才进行重绘。如果您还没有，请介绍失效的概念。（即，画布是有效的，因此在移动之前不会重绘。在画布窗口内移动的任何东西都会导致画布变得无效，因此需要重绘）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T16:35:33.487

如果您想对电池友好，可以使用[Crafty](http://craftyjs.com/)。该游戏引擎使用现代 CSS3 技术，因此不需要一直更新画布。[在此处](http://craftyjs.github.com/tutorial/games/pong/pong.html)查看此示例游戏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T11:02:18.037

您不想每帧重绘整个画布的方式，只能是“脏检查”或“脏矩阵”算法。

脏检查似乎比整个重绘更有效。但我认为这取决于您的渲染实现。

如果您使用 canvas2D 进行渲染，则无需使用它。几乎每个游戏都有复杂的精灵和动画。如果您使用脏检查，当精灵或背景图的一部分需要更新时，您必须弄清楚这部分重叠的是什么。然后clearRect这小块画布，然后重绘每一个精灵或地图。等等，什么是重叠的。这意味着由于重叠部分，您必须比正常渲染实现更多次运行画布渲染 API。Canvas2d 的渲染性能通常听起来并不高效。

但是如果你使用 WebGL，那可能会有很大的不同。尽管我不是 WebGL 的家人，但我知道这可能更有效。Dirty-Check 应该是与您的提议相匹配的好选择。

# c++ - 尽管切片，为什么 static_cast 仍然可以使用空指针？

> ID：10961798
> 
> 赞同：4
> 
> 时间：2012-06-09T14:27:06.867
> 
> 标签：c++, casting, null, static-cast, object-slicing

如果我们使用多重继承，切片将使父对象的地址与叶对象的地址不同：

```
struct X {int x};
struct Y {int y};
struct Z : X, Y {int z}; 
```

所以如果我们有一个`Z`对象`z`，它的地址`&z`不会和它*的*`Y`父地址重合：`static_cast<Y*>(&z)`比 . 高四个字节`&z`。

好处`static_cast`是它是静态的，所以不占用运行时间（与 相比`dynamic_cast`）。但是，如果我们有一个`Z*`指向 的`0`，那么每个对父级的强制转换也应该*并且确实会*产生一个空指针。为什么这个工作以及它是如何实施的？这是否意味着每一个都`static_cast`引入了一个分支指令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T14:38:33.643

是的，从指向派生类的指针到指向基类的指针的隐式转换和`static_cast`返回都必须保留空指针值。这意味着对于基类地址与派生类地址不一致的多重继承情况，生成的代码中通常需要一个分支。

从理论上讲，实现可以在“零”地址周围保留一系列地址来表示空指针并避免在这种情况下分支，但其代价是增加了对空指针比较的额外检查。

# visual-studio-2010 - 如何在visual studio 2010中为每个新项目设置警告级别？

> ID：10961802
> 
> 赞同：2
> 
> 时间：2012-06-09T14:27:21.857
> 
> 标签：visual-studio-2010, properties, warning-level

正如标题已经提到的，我想为每个新创建的项目设置一个属性（更具体地说：警告级别）为 4。

到目前为止我所做的：1.打开`Property Manager->Microsoft.Cpp.Win32.User` 2.在`C/C++`：将警告级别更改为 4 并将所有警告视为错误 3.单击保存图标

这应该已经完成​​了，但是每次我创建一个新的空项目并向其中添加一个新的 c++ 文件时，当我现在打开项目设置时：警告级别回到标准值（3）......当我现在再次打开属性页它仍然设置为 4（就像我想要的那样）...

为什么 VS 不对我的新项目应用正确的设置？

# macos - 有没有办法确定 CGLFlushDrawable 对后台缓冲区做了什么？

> ID：10961803
> 
> 赞同：0
> 
> 时间：2012-06-09T14:27:24.233
> 
> 标签：macos, cocoa, opengl, buffer, wgl

根据 Apple 的文档，`CGLFlushDrawable`或者它的 Cocoa 等价物`flushBuffer`可能会以几种不同的方式表现。通常对于窗口应用程序，后台缓冲区的内容被复制到可见缓冲区，如下[所述](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGL_OpenGL/Reference/reference.html#//apple_ref/c/func/CGLFlushDrawable)：

> **CGLFlushDrawable**
> 
> 将双缓冲上下文的后缓冲区复制到前缓冲区。

我假设绘图缓冲区的内容保持不变（请参阅问题 1。）。即使我错了，也可以通过将`kCGLPFABackingStore`属性传递给`CGLChoosePixelFormat`.

但进一步阅读显示，在某些情况下，缓冲区可能会被交换而不是执行复制：

> 如果后备存储属性设置为 false，则可以交换而不是复制缓冲区。在全屏模式下经常出现这种情况。

[这](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/OpenGL-MacProgGuide/opengl_fullscreen/opengl_cgl.html)也说明了

> 当全屏窗口上方没有内容时，Mac OS X 会自动尝试优化此上下文的性能。例如，当您的应用程序调用对象`flushBuffer`时`NSOpenGLContext`，系统可能会交换缓冲区，而不是将后台缓冲区的内容复制到前台缓冲区。(...) 因为系统可能选择交换缓冲区而不是复制它们，所以您的应用程序必须在每次调用`flushBuffer`.

这是我的问题：

1.  如果复制了后台缓冲区，是否可以保证即使没有后台存储属性也可以保留其内容？
2.  如果缓冲区被交换，后缓冲区是否获得前缓冲区的内容，或者它是否未定义所以它也可以得到随机的东西？
3.  系统*可能会*选择交换缓冲区，但有什么方法可以确定它是否 *确实*选择了这样做？
4.  在任何这些情况下，有没有办法确定缓冲区是否被保留、与前缓冲区交换或被搞砸了？

此外，任何关于它是如何在 WGL、GLX 或 EGL 中制作的信息都将不胜感激。我特别需要问题 4 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:29:20.953

1.  不，不能保证。
2.  可能是随机的。
3.  不，我不相信。
4.  不。如果你不指定`kCGLPFABackingStore`or `NSOpenGLPFABackingStore`，那么你不能对后台缓冲区的内容做任何假设，这就是为什么文档说你必须从头开始重绘每一帧。

我不确定您对 WGL、GLX 和 EGL 的要求是什么。

# java - Eclipse indigo Struts 2 安装

> ID：10961806
> 
> 赞同：1
> 
> 时间：2012-06-09T14:27:40.047
> 
> 标签：java

我是 J2EE 新手，谁能告诉我如何在 Eclipse Indigo 中安装 Struts 2？我尝试了很多网址，但都没有奏效。谁能给我一个有效的网址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:32:44.310

您没有“在 Eclipse 中安装 Struts 2”，您有一个在 Eclipse 中*使用*Struts 2 的项目。

你要么：

1.  自己获取所有依赖项并将它们添加到您的项目中，或者
2.  使用 Maven，让计算机做计算机擅长的事情。

对于选项 1，我建议使用发行版附带的 struts-blank 应用程序。或者，您可以阅读一些[手动创建 Struts 2 应用程序的内容](http://struts.apache.org/2.x/docs/create-struts-2-web-application-with-artifacts-in-web-inf-lib-and-use-ant-to-build-the-application.html)，这通常对入门很有用。

对于选项 2，您可以尝试使用 Eclipse 的 Maven 插件之一（例如[m2eclipse](http://www.sonatype.org/m2eclipse)），并可能遵循使用 Maven文档[创建 Struts 2 项目。](http://struts.apache.org/2.x/docs/create-struts-2-web-application-using-maven-to-manage-artifacts-and-to-build-the-application.html)

# json - Restlet POST 表单通过 JSON 发送到客户端资源

> ID：10961807
> 
> 赞同：0
> 
> 时间：2012-06-09T14:28:15.803
> 
> 标签：json, google-app-engine, post, restlet

通过 JSON 向另一个客户端资源发送表单条目时出现 415 错误。我下面代码中的目标 URI（“/message”）在不使用表单时有效（即用测试模拟对象点击“/message”）。

这是我获取表单值并将发布到目标资源的代码。我错过了需要做的事情吗？

我正在使用以下内容：

*   Restlet：2.1 RC5
*   盖伊：1.6.1

表格 Restlet：

```
@Post
public void handlePost(Representation entity) {

    final Form webForm = new Form(entity);
    MessageEntity newMessage = new MessageEntity();

    String subject = webForm.getFirstValue("subject");
    String sendto = webForm.getFirstValue("email");
    String message = webForm.getFirstValue("message");

    newMessage.setCategoryID(subject);
    newMessage.setAccountID(sendto);
    newMessage.setMessageText(message);

    ClientResource cr = new ClientResource(getRootRef()+ "/message");
    cr.post(newMessage, MediaType.APPLICATION_JSON);
} 
```

目标资源（“/消息”）

```
 @Post("json")
   public void HandleRequest(MessageEntity messageEntity) {

   // Logic here

   } 
```

如果您需要更多信息，请告诉我

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T23:36:16.590

我的代码与您的代码非常相似，可以正常工作。我也在运行类似版本的 Restlet 和 GAE。我的第一个问题是您的目标资源中是否还有其他 @Post 方法，因为有时排序很重要。

这是我可以使用的两个版本的代码.... 1）

```
public Representation postHandler() {    
  Reference commitsRef = new Reference(Consts.RESOURCE_BASE + "commitments/");    
  ClientResource commitsResource = new ClientResource(getContext(), commitsRef);
  ....
  Representation commitsRep = commitsResource.post(commitForm); 
```

那是将表单发布到同时处理 @Post("json") 和 @Post("form") 的 Target 资源

2)

```
public Representation doPostFromGet() {   
  Reference takeActRef = new Reference(Consts.RESOURCE_BASE + "commitment/"
      + commitmentId + "/userActs/");     
  ClientResource takeActResource = new ClientResource(getContext(), takeActRef);
  ...
  Representation takeActRep = takeActResource.post(newAct); 
```

那就是将 Java 对象发布到使用我称之为“Peierls 魔法”的表单中。请参阅： [http](http://tembrel.blogspot.com/2012/03/converting-forms-in-restlet-to-pojos.html) ://tembrel.blogspot.com/2012/03/converting-forms-in-restlet-to-pojos.html 它允许您在目标中有一个 post() 并接受表单和 pojos。

顺便说一句，如果您正在发帖以添加新消息，那么 url 应该是“/messages/”（复数） - 也许某处有错字？（不太可能，但我想我会提到它）。

祝你好运，

RB

# symfony - 如何从外部遗留系统访问 Symfony2 服务？

> ID：10961808
> 
> 赞同：2
> 
> 时间：2012-06-09T14:28:43.993
> 
> 标签：symfony

我们正在慢慢地将我们当前的系统迁移到 Symfony2，但大部分代码库仍然在内部框架中。我想从旧的遗留框架的类中利用 Symfony2 中内置的一些功能。有没有一种简单的方法可以从 Symfony 框架之外访问 Symfony2 服务？

```
class MyOldClass extends SomethingOld
{
    public function getSomethingViaSymfony()
    {
        $service = new SomeSymfonyService();
        $results = $service->getResults();
    }
} 
```

我的假设是这将是失败的，因为不会注入依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:01:42.477

你需要初始化 symfony 而不发送任何动作。这基本上意味着从 web/index.php 中的 symfony 前端控制器文件中获取代码，对其进行一些修改并将其粘贴到旧应用程序的一些初始化文件中。

```
// legacy/init.php
require_once 'PATH_TO_SYMFONY/app/bootstrap.php.cache';
require_once 'PATH_TO_SYMFONY/app/AppKernel.php';

$kernel = new AppKernel('dev', true);
$kernel->loadClassCache();

$GLOBALS['service_container'] = $kernel->getContainer(); 
```

请注意，此代码未经测试，但我很确定它会工作，因为 symfony 很棒；）

你也可以考虑一种不同的策略，将遗留动作嵌入到 symfony 中，而不是相反。

您必须实现一个遗留控制器，并在路由定义的末尾给它一个捕获所有路由。此控制器可以初始化遗留应用程序并向其发送操作。之后，您可以在路由文件的顶部依次定义新路由并使用 symfony 调度它们。

恕我直言，这种策略要好得多，因为您可以让遗留应用程序几乎不受影响并逐个杀死它。

# bash - 如何在前台循环访问交互式 SSH 连接？

> ID：10961814
> 
> 赞同：2
> 
> 时间：2012-06-09T14:30:02.513
> 
> 标签：bash, ssh

我正在尝试在 bash 脚本中通过 SSH 进行连接。

这是我的脚本：

```
file_table="${HOME}/.scripts/list.txt"

    while read line; do  
  user=$(echo $line | cut -d\= -f1)

  if [ "$1" = "$user" ]; then
        ip=$(echo $line | cut -d\= -f2)
        ssh -t -t -X "$ip"  
  fi
done < $file_table

exit 1 
```

我在 list.txt 中保存了一些别名，例如：“name1=192.168.1.1”、“name2=127.0.0.1”等等。

问题： SSH 连接没有等待。它只是要求输入密码，如果建立连接，它会在脚本处继续（退出 1）。我尝试了命令“等待”或使用后台作业和“fg %1”，但没有任何效果。

注意：我不想在建立连接后执行命令。在我退出之前，我不会保持连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:19:42.123

### SSH 可能出现的问题

也许您有一个别名或函数将 SSH 发送到后台，或者您的 SSH 配置文件中发生了其他事情。我用一个显式关闭别名的简化循环进行了测试，它在 shell 提示符下对我来说很好：

```
# Loop without the other stuff.
while true; do
    command ssh -o ControlPersist=no -o ControlPath=none localhost
done 
```

您总是可以尝试`set -x`查看 Bash 对您的命令行做了什么，并`ssh -v`获得更详细的输出。

### Shell 重定向可能出现的问题

在考虑了一个替代答案后，我同意另一个相关问题是标准输入的重定向。这对我有用，即使标准输入重定向到循环中：

```
# Generic example of bullet-proofing the redirection of stdin.
TTY=$(tty)
while true; do
    ssh  -o ControlPersist=no -o ControlPath=none localhost < $TTY
done < /dev/null 
```

考虑到这一点，您的原始循环可以被清理并重写为：

```
TTY=$(tty)    
while IFS== read -r user ip; do
    [[ "$user" == "$1" ]] && ssh -ttX "$user@$ip" < $TTY
done < "${HOME}/.scripts/list.txt" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T16:14:06.283

当 ssh 在`while`stdin 重定向的循环中运行时，它可能会挂起。尝试以下方法之一：

```
ssh -t -t -n -X "$ip" 
```

或者

```
ssh -t -t -X "$ip" </dev/null 
```

或者

```
ssh -t -t -f -X "$ip" 
```

顺便说一句，`cut`您可以`read`直接进入变量，而不是使用：

```
while IFS== read -r user ip 
```

你为什么要这样做`exit 1`？非零表示失败。

# javascript - 使用多个选择器查找 prev() 标签

> ID：10961817
> 
> 赞同：6
> 
> 时间：2012-06-09T14:30:35.447
> 
> 标签：javascript, jquery, xpath, jquery-selectors

让我们面对这种情况：

```
<ul>
  <li>data</li>
  <li class="selector">data2</li>
  <li class="selector2">data3</li>
</ul> 
```

我想要做的是 match`li`要么有`selector`class 要么有 class 属性`undefined`，像这样：

```
jQuery(function($) {
  $('.selector2').prevAll('li.selector OR li[class==""]');
}); 
```

因此，如果我在 上运行`prevAll()`，`.selector2`它应该返回 2 个列表项。如果我运行它`.selector`，它应该返回第一个列表项。

那么有没有办法替换那个 OR ... ？

*PS：xpath 可能对我也有用，因为我正在为现代浏览器开发*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T14:32:02.733

```
jQuery(function($) {
  $('.selector2').prevAll('li.selector, li:not([class])');
}); 
```

**[演示](http://jsfiddle.net/QStkd/189/)**

### 添加来自@pimvdb 的重要评论

> 这是正确的，但要小心 - 类似于 `.addClass("foo").removeClass("foo")`将类属性留在后面，尽管您（可能）希望它处于初始状态。所以和 不太一样`[class='']`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T14:37:48.450

> 我想要做的是匹配`li`具有“选择器”类或类属性未定义的

**此 XPath 表达式等效于问题中的伪代码**：

```
/ul/li[@class='selector2']/preceding-sibling::li[@class='selector' or not(@class)] 
```

**但是，引用要求的*字面*翻译是**：

```
/ul/li[@class='selector' or not(@class)] 
```

# c# - 一个简单数据库的C#-mySQL连接程序，1个表执行基本操作

> ID：10961819
> 
> 赞同：1
> 
> 时间：2012-06-09T14:30:41.730
> 
> 标签：c#, mysql, .net

我正在复制我的程序 (VS 2008) 的代码。我是初学者，我创建了一个数据库测试，其中有 1 个表 emp，其中有 3 个字段 e_name、e_id、age。调试 .cs 文件后，我得到错误 - 不包含适合入口点的静态“主”方法。请问你能帮帮我吗？

代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using MySql.Data.MySqlClient;

namespace ConnectCsharppToMySQL
{
    public  class DBConnect
    {
        private MySqlConnection connection;
        private string server;
        private string database;
        private string uid;
        private string password;

        //Constructor
        public DBConnect()
        {
            Initialize();
        }

        //Initialize values
        private void Initialize()
        {
            server = "localhost";
            database = "test";
            uid = "root";
            password = "";
            string connectionString;
            connectionString = "SERVER=" + server + ";" + "DATABASE=" +
            database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

            connection = new MySqlConnection(connectionString);
        }

        //open connection to database
        private bool OpenConnection()
        {
            try
            {
                connection.Open();
                return true;
            }
            catch (MySqlException ex)
            {
                //When handling errors, you can your application's response based 
                //on the error number.
                //The two most common error numbers when connecting are as follows:
                //0: Cannot connect to server.
                //1045: Invalid user name and/or password.
                switch (ex.Number)
                {
                    case 0:
                        MessageBox.Show("Cannot connect to server.  Contact administrator");
                        break;

                    case 1045:
                        MessageBox.Show("Invalid username/password, please try again");
                        break;
                }
                return false;
            }
        }

        //Close connection
        private bool CloseConnection()
        {
            try
            {
                connection.Close();
                return true;
            }
            catch (MySqlException ex)
            {
                MessageBox.Show(ex.Message);
                return false;
            }
        }

        //Insert statement
        public void Insert()
        {
            string query = "INSERT INTO emp (e_name, age) VALUES('Pooja R', '21')";

            //open connection
            if (this.OpenConnection() == true)
            {
                //create command and assign the query and connection from the constructor
                MySqlCommand cmd = new MySqlCommand(query, connection);

                //Execute command
                cmd.ExecuteNonQuery();

                //close connection
                this.CloseConnection();
            }
        }

        //Update statement
        public void Update()
        {
            string query = "UPDATE emp SET e_name='Peachy', age='22' WHERE name='Pooja R'";

            //Open connection
            if (this.OpenConnection() == true)
            {
                //create mysql command
                MySqlCommand cmd = new MySqlCommand();
                //Assign the query using CommandText
                cmd.CommandText = query;
                //Assign the connection using Connection
                cmd.Connection = connection;

                //Execute query
                cmd.ExecuteNonQuery();

                //close connection
                this.CloseConnection();
            }
        }

        /*     //Delete statement
             public void Delete()
             {
                 string query = "DELETE FROM tableinfo WHERE name='John Smith'";

                 if (this.OpenConnection() == true)
                 {
                     MySqlCommand cmd = new MySqlCommand(query, connection);
                     cmd.ExecuteNonQuery();
                     this.CloseConnection();
                 }
             }
     */

        //Select statement
        public List<string>[] Select()
        {
            string query = "SELECT * FROM emp";

            //Create a list to store the result
            List<string>[] list = new List<string>[3];
            list[0] = new List<string>();
            list[1] = new List<string>();
            list[2] = new List<string>();

            //Open connection
            if (this.OpenConnection() == true)
            {
                //Create Command
                MySqlCommand cmd = new MySqlCommand(query, connection);
                //Create a data reader and Execute the command
                MySqlDataReader dataReader = cmd.ExecuteReader();

                //Read the data and store them in the list
                while (dataReader.Read())
                {
                    list[0].Add(dataReader["e_id"] + "");
                    list[1].Add(dataReader["e_name"] + "");
                    list[2].Add(dataReader["age"] + "");
                }

                //close Data Reader
                dataReader.Close();

                //close Connection
                this.CloseConnection();

                //return list to be displayed
                return list;
            }
            else
            {
                return list;
            }
        }

        public static void main(String[] args)
        {
            DBConnect db1 = new DBConnect();
            Console.WriteLine("Initializing"); 
            db1.Initialize();
            Console.WriteLine("Inserting a record into table");
            db1.Insert();
            Console.WriteLine("Updating the record");
            db1.Update();
            Console.WriteLine("Displaying the table :");
            db1.Select();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:33:19.553

C# 区分大小写！

主要<---坏

主要<---很好

检查您的主要方法标识符并更正它！;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:34:52.227

改变：

```
public static void main(String[] args) 
```

至：

```
public static void Main(String[] args) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T14:44:40.790

将基本代码更改为

```
public static void Main(String[] args) 
```

后面的部分定义了为什么您无法在屏幕上看到任何内容

你写

```
Console.WriteLine("Inserting a record into table"); 
```

它以**DOS格式的****CONSOLE**格式运行，使您易于理解

 **我猜你正在运行*GUI*程序，它是一个图形程序，可以使用*表单*和*鼠标运行*

谢谢你。

转换

```
 Console.WriteLine("Inserting a record into table"); 
```

至

```
 MessageBox.Show("Inserting a record into table"); 
```**

# php - 使用比特洪流协议（磁铁）的 Sha 1 哈希及其长度？

> ID：10961820
> 
> 赞同：2
> 
> 时间：2012-06-09T14:30:43.853
> 
> 标签：php, hash, sha1, packed

我正在抓取网站以获取信息，它涉及获取磁铁链接的 sha1 哈希值。

我得到了一个简单的所有磁铁链接，`preg_match_all`但在我的结果中，我得到了奇怪的结果，我知道十六进制形式的磁铁哈希是 40 个字符长，但我也得到返回 32 个字符长的字符串的结果，其中包含其他非十六进制值。

我的结果中的两个示例，首先是磁力链接中的普通 40 十六进制哈希，

```
array
    0 => string 'F5AD2D170C033736FD987106F04C3ABD6DF41D14' (length=40) 
```

还有其他奇怪的结果，我不明白哈希在哪里是 32 非十六进制值，

```
array
    0 => string 'VPR33QQM3L6BFU5FGOZXMBNORAFFSZWW' (length=32) 
```

哈希是否以某种方式打包？我知道它没有完成，`pack('H*', $hash)`因为它返回哈希的二进制文件？磁铁链接确实有效，因为我已经对其进行了测试。

更多这样你就可以在这个网站上看到这些哈希值的使用

[http://eztv.it](http://eztv.it)

通过将鼠标悬停在磁铁链接上并查看磁铁哈希。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:46:18.370

磁铁链接中的哈希可以使用[Base32](http://en.wikipedia.org/wiki/Base32)进行编码。在你的例子中，

```
VPR33QQM3L6BFU5FGOZXMBNORAFFSZWW 
```

变成

```
ABE3BDC20CDAFC12D3A533B37605AE880A5966D6 
```

这是一个有效的 SHA-1 哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:43:50.033

基本上它不是一个有效的 torrent 信息散列，只有 sha1（40 字节）是有效的，如果你将它作为 torrent 散列传递，一个 torrent 客户端或 bencode 脚本将会失败。

它似乎与：

`http://eztv.it/magnet:?xt=urn:btih:VPR33QQM3L6BFU5FGOZXMBNORAFFSZWW` 这是值得注意的。

# delphi - 如何使用 Delphi 和 Indy 跟踪 URL 重定向？

> ID：10961831
> 
> 赞同：4
> 
> 时间：2012-06-09T14:32:08.707
> 
> 标签：delphi, url, redirect, query-string, indy10

我收到了几封带有 url 链接的营销电子邮件，这些电子邮件从一个站点重定向到另一个站点。我想编写一个程序来使用 Delphi 和 Indy 跟踪每个 URL 重定向。我想遍历每个 URL，记录完整的 QueryString 以及在此过程中可能已设置的任何 Cookie。

我如何使用 D2010 附带的 Indy 组件来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T16:34:05.103

首先，您需要一个 HTTP 客户端，它`TIdHTTP`位于 Indy 中。

现在你需要一个数据结构来保存你的结果：

```
 TRedirection = record
    queryString: String;
    cookies: TStrings;
  end;

  TRedirectionArray = array of TRedirection; 
```

创建一个完成工作的类（需要一个类，因为事件函数定义为`procedure of object`）：

```
 TRedirectionTester = class
    private
      FRedirData: TRedirectionArray;
      procedure redirectEvent(Sender: TObject; var dest: string;
        var NumRedirect: Integer; var Handled: boolean; var VMethod: TIdHTTPMethod);
      procedure newCookie(ASender: TObject; ACookie: TIdCookie; var VAccept: Boolean);
    public
      function traverseURL(url: String): TRedirectionArray;
      property RedirData: TRedirectionArray read FRedirData;
  end; 
```

这提供了基本功能 - 您可以`traverseURL`使用 URL 调用，它会返回一个`TRedirectionArray`包含查询字符串和 cookie 的内容。

然后实现`OnRedirect`事件：

```
procedure TRedirectionTester.redirectEvent(Sender: TObject; var dest: string;
  var NumRedirect: Integer; var Handled: boolean; var VMethod: TIdHTTPMethod);
var
  redirDataLength: Integer;
begin
  Handled := True;

  redirDataLength := Length(FRedirData);
  SetLength(FRedirData, redirDataLength + 1);

  FRedirData[redirDataLength].queryString := dest;
  FRedirData[redirDataLength].cookies := TStringList.Create;
end; 
```

这将在数​​组中添加一个条目，并存储重定向的查询字符串。由于此重定向本身不包含 cookie（在请求重定向页面时设置了 cookie），因此您还不能在此处添加任何 cookie。

这就是为什么你需要一个`OnNewCookie`处理程序：

```
procedure TRedirectionTester.newCookie(ASender: TObject; ACookie: TIdCookie; var VAccept: Boolean);
var
  redirDataLength: Integer;
begin
  VAccept := True;

  redirDataLength := High(FRedirData);
  if (Assigned(FRedirData[redirDataLength].cookies)) then
    FRedirData[redirDataLength].cookies.Add(ACookie.CookieText);
end; 
```

这只是将 添加`CookieText`到数据集中。该字段包含 cookie 的“摘要”——它是请求页面时发送的实际字符串数据。

最后，通过实现`traverseURL`函数把它放在一起：

```
function TRedirectionTester.traverseURL(url: String): TRedirectionArray;
var
  traverser: TIdHTTP;
begin
  traverser := TIdHTTP.Create();
  traverser.HandleRedirects := True;
  traverser.OnRedirect := redirectEvent;
  traverser.CookieManager := TIdCookieManager.Create();
  traverser.CookieManager.OnNewCookie := newCookie;

  SetLength(FRedirData, 1);
  FRedirData[0].queryString := url;
  FRedirData[0].cookies := TStringList.Create;

  traverser.Get(url);

  Result := FRedirData;
end; 
```

它做的不多：它创建所需的对象，并分配事件处理程序。然后它添加第一个 url 作为第一个重定向（即使它不是真正的重定向，我添加它是为了完整性）。然后调用`Get`发送请求。它将在最终页面被网络服务器定位并返回后返回。

我用[http://bit.ly/Lb2Vho](http://bit.ly/Lb2Vho)对其进行了测试。

但是，这仅处理由 HTTP 状态代码 301 或 302 引起的重定向。据我所知，它不处理通过`<meta>`标签或 javascript 完成的重定向。要添加该功能，您必须检查对 的调用结果`Get`，并对其进行解析以搜索此类重定向。

# php - 登录后评论中的用户照片

> ID：10961835
> 
> 赞同：0
> 
> 时间：2012-06-09T14:32:56.517
> 
> 标签：php, image, session, login

我正在设计视图页面上制作评论功能，如果用户注册，我只有一个关于显示图片的问题。

如果他/她已登录，我想显示用户个人资料图片。最好的方法是什么？如果用户已登录，我是否可以在评论表单上设置`<input type="hidden" name="userid" value="1" />`并自动填充名称输入字段，或者最好的方法是什么？

当用户登录登录功能中的以下字段时：

```
$_SESSION["user_id"] = $row["user_id"];
$_SESSION["user_name"] = $row["name"];
$_SESSION["user_logged_in"] = 1; 
```

未注册或未登录用户发表评论时，将显示剪影而不是普通图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:58:48.197

你为什么不简单地把 if..else

要添加登录用户的姓名，您只需将他/她的姓名存储到 $_SESSION['name'] 中并在评论框的名称输入字段中显示它，如果您不想让他们更改名称，您可以禁用输入字段。

按照下面给出的代码：

```
if($_SESSION['user_logged_in']==1) {
//show the proper profile pic of user along with name in name input field.
     <img src="$path_to_profile_pic" height="anything" width="anything" />
     <input type="text" name="name" value="<?php echo $_SESSION['name']; ?>" disabled="disabled" />
}else{
// show silhouette image along with name Anonymous. 
      <img src="$path_to_silhouette _pic" height="anything" width="anything" />
      <input type="text" name="name" value="anonymous" />
 } 
```

# oop - 如何为 S4 类定义子集运算符？

> ID：10961842
> 
> 赞同：25
> 
> 时间：2012-06-09T14:33:58.523
> 
> 标签：oop, r, subset, s4

我无法找出为 S4 类定义 、 和子集运算符`[`的`$`正确方法。`[[`

谁能为我提供一个为 S4 类定义这三个的基本示例？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-09T14:55:26.873

发现泛型，以便我们知道我们的目标是什么

```
> getGeneric("[")
standardGeneric for "[" defined from package "base"

function (x, i, j, ..., drop = TRUE) 
standardGeneric("[", .Primitive("["))
<bytecode: 0x32e25c8>
<environment: 0x32d7a50>
Methods may be defined for arguments: x, i, j, drop
Use  showMethods("[")  for currently available ones. 
```

定义一个简单的类

```
setClass("A", representation=representation(slt="numeric")) 
```

并实现一个方法

```
setMethod("[", c("A", "integer", "missing", "ANY"),
    ## we won't support subsetting on j; dispatching on 'drop' doesn't
    ## make sense (to me), so in rebellion we'll quietly ignore it.
    function(x, i, j, ..., drop=TRUE)
{
    ## less clever: update slot, return instance
    ## x@slt = x@slt[i]
    ## x
    ## clever: by default initialize is a copy constructor, too
    initialize(x, slt=x@slt[i])
}) 
```

在行动：

```
> a = new("A", slt=1:5)
> a[3:1]
An object of class "A"
Slot "slt":
[1] 3 2 1 
```

支持（隐式）许多签名有不同的策略，例如，您可能还希望支持逻辑和字符索引值，可能同时支持 i 和 j。最直接的是“门面”模式，其中每个方法对常见类型的子集索引进行一些初步强制，例如，`integer`允许索引条目的重新排序和重复，然后使用`callGeneric`调用单个方法子集类的工作。

没有概念上的差异`[[`，除了要尊重返回内容的语义而不是`[`. 因为`$`我们有

```
> getGeneric("$")
standardGeneric for "$" defined from package "base"

function (x, name) 
standardGeneric("$", .Primitive("$"))
<bytecode: 0x31fce40>
<environment: 0x31f12b8>
Methods may be defined for arguments: x
Use  showMethods("$")  for currently available ones. 
```

和

```
setMethod("$", "A",
    function(x, name)
{
    ## 'name' is a character(1)
    slot(x, name)
}) 
```

和

```
> a$slt
[1] 1 2 3 4 5 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T15:14:25.027

我会按照@Martin_Morgan 为您提到的运营商建议的那样做。不过我要补充几点：

1）我会小心定义一个`$`运算符来访问 S4 插槽（除非您打算从存储在特定插槽中的数据帧中访问列？）。一般建议是编写访问器函数`getMySlot()`，并`setMySlot()`获取您需要的信息。您可以使用`@`运算符从这些插槽访问数据，尽管 get 和 set 最好用作用户界面。使用`$`可能会让用户感到困惑，他们可能会期望 data.frame。有关这些问题的深入讨论，请参阅Christophe Genolini 的[此S4 教程。](http://cran.r-project.org/doc/contrib/Genolini-S4tutorialV0-5en.pdf)如果这不是您打算使用的方式`$`，请忽略我的建议（但本教程仍然是一个很好的资源！）。

2) 如果您要定义`[`并`[[`从另一个类继承，例如vector，您还需要定义`el()`（等价于`[][[1L]]`，或子集的第一个元素`[]`）和`length()`。我目前正在编写一个从数字继承的类，数字方法将自动尝试从您的类中使用这些函数。如果课程是为了更有限的或您自己的个人用途，这可能不是问题。

抱歉，我会将此作为评论留下，但我是 SO 新手，我还没有代表！

# c# - DatagridView 新行添加错误

> ID：10961848
> 
> 赞同：1
> 
> 时间：2012-06-09T14:35:11.570
> 
> 标签：c#, datagridview

我想在 Datagrid 中添加新行但有错误。

**错误：当控件绑定数据时，无法以编程方式将行添加到 DataGridView 的行集合。**

```
 row = new string[] { "0", "1", hesab_nomresi,soyad,ad,ataadi,vesiqe,teskilat_kodu,tevellud,nomre,cins };
     kartsifarishiGridView.Rows.Add(elaveEtme.row);

     AllowUserToAddRow = false; 
```

**数据源：（**从*作者的评论中添加*）

```
string sqlSorgu = "SELECT" + " customer.id, + " IIf (customer.cins = 'M','Kişi','Qadın') AS Cins " + " FROM customer ORDER BY customer.id ASC";
OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sqlSorgu, Program.esas.bazayaQosul); 
DataTable dataTable = new DataTable(); 
set = new DataSet(); 
set.Tables.Add(dataTable); 
dataAdapter.Fill(dataTable);

kartsifarishiGridView.DataSource = dataTable; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:52:17.193

您可以将新行直接添加到要绑定到网格的数据源并调用 kartsifarishiGridView.DataBind();

```
new string[] { "0", "1", hesab_nomresi,soyad,ad,ataadi,vesiqe,teskilat_kodu,tevellud,nomre,cins }; 
```

这个想法是您不能向绑定的 datagridview 添加行。您必须将其添加到 datagridview 绑定到的结构（数据表）中。

**例子：**

```
 string sqlSorgu = "SELECT" + " customer.id," + " IIf (customer.cins = 'M','Kişi','Qadın') AS Cins " + " FROM customer ORDER BY customer.id ASC"; 

        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sqlSorgu, Program.esas.bazayaQosul); 
        DataTable dataTable = new DataTable(); 
        set = new DataSet(); 
        set.Tables.Add(dataTable); 
        dataAdapter.Fill(dataTable);

        //  Here is the code for adding new row
        dataTable.Rows.Add(new string[]
                               {
                                   "0", "1", hesab_nomresi, soyad, ad, ataadi, vesiqe, teskilat_kodu, tevellud, nomre,
                                   cins
                               });

        kartsifarishiGridView.DataSource = dataTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T08:50:35.937

以下是如何以通用方式解决此问题：

```
myDataGridView.BindingContext[dg.DataSource, dg.DataMember].AddNew(); 
```

# c# - 如何在组合框中添加 2 列？

> ID：10961850
> 
> 赞同：1
> 
> 时间：2012-06-09T14:35:39.410
> 
> 标签：c#, winforms, ado.net, combobox

我认为在组合框中显示列的原因是表单设计者中的这个字符串：

```
this.ComboBox1.DisplayMember = "name"; 
```

但是，我无法在“名称”附近添加任何内容，组合框显示在所有字符串中：`System.Data.DataRowView`

也许是错的，请告诉我如何做到这一点？

我只是从数据源中将表格拖动为组合框：

表单加载时：

```
private void frmCheck_Load(object sender, EventArgs e)
{        
 this.ttzTableAdapter.Fill(this.dbDataSet.ttz, Convert.ToInt32(idFromWork.Text));
} 
```

所以组合框显示，只是列表中的“名称”，我希望他在列表中显示“数字”和“名称”。

```
"Convert.ToInt32(idFromWork.Text)" 
```

显示名称的参数，其中 id_ttz(ID) = @idwork

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:44:10.533

`DisplayMember`是[一个字符串，它指定对象属性的名称，该对象属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)包含在由 DataSource 属性指定的集合中。您不能指定要显示的多个属性。如果您尝试这样做，将找不到您的“复合属性”，并且将通过`ToString()`实现显示对象（这就是您看到`System.Data.DataRowView`字符串的原因）。

如果您需要显示对象的多个属性，您可以[创建自定义多列组合框](http://www.codeproject.com/Articles/3206/Multi-Column-ComboBox)并将其弹出为 ListView 或 DataGridView。

更新：您可以创建自己的匿名类型，而不是直接绑定到 DataView 的 DataTable，它将提供格式化文本以供显示：

```
ComboBox1.DataSource = tdbDataSet.ttz.AsEnumerable()
          .Select(row => new 
               { 
                 Text = String.Format("{0,5} | {1}", row["id_ttz"], row["name"]),
                 Value = row["id_ttz"]
               })
         .ToList();

ComboBox1.DisplayMember = "Text";
ComboBox1.ValueMember = "Value"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T14:48:57.387

您不能在组合框中添加两列。您如何连接两个对象的值。看到这个[带有多列的 WinForms 组合框（C#）？](https://stackoverflow.com/questions/1091414/winforms-combobox-with-multiple-columns-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T14:46:40.173

在您的查询中添加一个计算列

```
 select name, ..., name+' '+number as colToDisplay... 
```

并像这样使用它

```
 this.ComboBox1.DisplayMember = "colToDisplay"; 
```

或者，如果您将组合绑定到`custom object`

添加一个新的属性，它结合了您需要显示的列

```
 public string PropertyToShow
 {
   get{return name+" "+otherProp;}
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T14:55:15.787

你有几种可能性。如果您不指定 a `DisplayMember`，则组合框使用该`ToString`方法获取字符串。所以一个选择自然是覆盖`ToString`你的类的方法，如果你在它的控制之下。或者您可以添加一个返回适当字符串的属性并在`DisplayMember`.

一种完全不同的方法是通过从`ComboBox`. 然后将`DrawMode`组合框的更改`OwnerDrawFixed`为项目是否具有相同的高度或`OwnerDrawVariable`它们可能具有不同的高度。您将不得不覆盖`OnDrawItem`并执行自己的绘图逻辑。如果您指定`OwnerDrawVariable`，您还必须覆盖`OnMeasureItem`以告知每个项目的组合框高度。

使用第二种方法，您可以创建真正的列并绘制垂直分隔符等等。您可以使用不同的背景和文本颜色、不同的字体等来绘制图标。

# jquery - div到达某个点时如何固定它的位置

> ID：10961852
> 
> 赞同：2
> 
> 时间：2012-06-09T14:36:11.947
> 
> 标签：jquery, css-position

我不是 100% 确定问题标题是否准确，所以如果有人能准确解释我想要做什么，我愿意改变。

我有一个包含图像的 div，并为第一个图像下的每个“项目”复制，我想要做的是位置：当项目的第一个图像到达某个点时修复 div，到目前为止，我已经管理了它页面向右滚动。

这个怎么运作

它检查 div 的左侧位置是否与最初固定的 div 相对移动，然后如果它足够接近而不比 (fixedLeft+400) 更近，则类交换，原来被卡住的 div 继续前进，而新的 div 坚持下去。

它工作得很好，虽然没有经过全面测试，但我必须调试一下，但我正在尝试让它回到原路。

这是我的小提琴 - 大版本 = 图像可能太大[http://fiddle.jshell.net/tara_irvine/d5VdF/12/show/](http://fiddle.jshell.net/tara_irvine/d5VdF/12/show/)

和代码[http://jsfiddle.net/tara_irvine/d5VdF/12/的小提琴部分](http://jsfiddle.net/tara_irvine/d5VdF/12/)

该代码删除了很多内容，因为我的内容是动态的，并且所有内容（内容和副本）都基于隐藏的导航，因此可能会被忽略。

即使有人可以告诉我它应该如何工作的逻辑，这也会有所帮助。

我真的希望有人能提供帮助。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:54:13.290

为每个 li 元素添加一个行为似乎是解决问题的一种奇怪方法。我宁愿最初将第一个副本容器设置为固定副本，然后`$(window).scroll`在其中有一个`$(document).ready`并跟踪它的偏移量。一旦达到某个阈值，就改变类。这也应该更容易逆转。

更新：这对我有用

```
$(document).ready(function(){
    $(window).scroll(function (){   
        var offset = $(".fixed-copy").offset().left;
        $(".fixed-copy").find(".offsetLeftGroupPrev").html(offset);     
        var next = $(".fixed-copy").parents("ul").next("ul.imgGroup").find(".copy-container");      
        var prev = $(".fixed-copy").parents("ul").prev("ul.imgGroup").find(".copy-container");  

        if(offset > next.offset().left){
            $(".fixed-copy").removeClass("fixed-copy");
            next.addClass("fixed-copy");
        }   

        if(prev!=null && prev.offset() != null){    
            if(offset < prev.offset().left){
                $(".fixed-copy").removeClass("fixed-copy");
                prev.addClass("fixed-copy");
            }
        }
   });  
}); 
```

# c# - ObjectListView 的 TreeListView 单元格编辑非常非常慢

> ID：10961855
> 
> 赞同：2
> 
> 时间：2012-06-09T14:36:30.090
> 
> 标签：c#, treeview, objectlistview

我正在使用 TreeListView (ObjectListView) [http://objectlistview.sourceforge.net/cs/index.html](http://objectlistview.sourceforge.net/cs/index.html) - 并用许多项目填充它。

我在双击用户输入时可编辑的列之一。

不幸的是，编辑速度非常慢，**从“数量”列中的一个单元格编辑（见下图）到下一个单元格编辑每次大约需要 5-10 秒。**此外，单元格编辑器需要一段时间才能出现和消失。

下面是我用来填充 TreeListView 的代码：

```
 TreeListView.TreeRenderer renderer = this.treeListView.TreeColumnRenderer;
        renderer.LinePen = new Pen(Color.Firebrick, 0.5f);
        renderer.LinePen.DashStyle = DashStyle.Solid;
        renderer.IsShowLines = true;

        treeListView.RowFormatter = delegate(OLVListItem olvi)
        {
            var item = (IListView)olvi.RowObject;
            if (item.ItemType == "RM")
                olvi.ForeColor = Color.LightSeaGreen;
        };

        treeListView.CanExpandGetter = delegate(object x)
        {
            var job = x as IListView;
            if (job != null)
            {
                if (job.ItemType == "PA" || job.ItemType == "JC")
                {
                     var rm = job.ItemPart.GetRawMaterial();
                    var subParts = job.ItemPart.SubParts.Where(v => v != null).ToList();
                    if (rm.Count > 0|| subParts.Count > 0)//
                        return true;

                }

            }

                return false;
        };

        this.treeListView.ChildrenGetter = delegate(object x)
        {
            try
            {
                var job = x as IListView;
                if (job != null)
                {
                    if (job.ItemType == "PA" || job.ItemType == "JC")
                    {
                        var part = job.ItemPart;
                        var rm = part.GetRawMaterial();
                        var subParts = part.SubParts.Where(v => v != null).ToList();
                        var items = new List<IListView>();

                        items.AddRange(subParts.GetRange(0, subParts.Count).ToList<IListView>());
                        items.AddRange(rm.GetRange(0, rm.Count).ToList<IListView>());
                        return items;
                    }

                }
                return null;

            }
            catch (UnauthorizedAccessException ex)
            {
                MessageBox.Show(this, ex.Message, "ObjectListViewDemo", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
                return null;
            }
        };
        var lItems= jobs.ToList<IListView>();
        treeListView.SetObjects(lItems );

        Expand(lItems[0]);
        treeListView.RebuildAll(true);

    }

    public void Expand(object expItem)
    {
       treeListView.ToggleExpansion(expItem);

        foreach (var item in treeListView.GetChildren(expItem))
        {
            Expand(item);
        }

    } 
```

这是单元格编辑的图片：

![在此处输入图像描述](../Images/cf6e2858b44199886a4afb7541fdb13a.png)

为什么编辑这么慢？难道我做错了什么？我该怎么做才能让它更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-16T11:09:24.450

在您的代表中，您正在使用线性搜索和几个列表副本（也是线性的）。这是针对每个项目的。糟糕的表现是可以预料的。

如果您想对此进行改进，您可以改为预先计算结果。

# php - preg_replace_callback (regex) 如果字符串不包含字符

> ID：10961858
> 
> 赞同：1
> 
> 时间：2012-06-09T14:36:57.093
> 
> 标签：php, regex, preg-replace-callback

我试图让 preg_replace_callback 仅在不包含某个字符时才返回匹配项。

因此，如果字符串包含：

```
{xxxx} 
```

返回匹配。如果它包含：

```
{xxxx|xxxx} 
```

不要返回匹配项。

这是我的尝试：

```
\{(.*?!\|.*)} 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:40:08.637

您正在寻找[字符类](http://php.net/manual/en/regexp.reference.character-classes.php)。*这是“除* ”之外的任何字符`|`：

```
[^|] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:42:02.597

应该是`/{([^|])*}/`。它将匹配任何没有`|`字符的字符串，甚至是空字符串。

这更像是一种“黑名单”方法。如果您知道有效字符是什么，则应使用“白名单”方法（字符类中允许的字符列表`[]`），因为当前方法也允许`#$!@~<?>":'{}[]`字符串中的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T15:08:36.297

您的完整模式将是这样的：

```
/{([^|]*)}/ 
```

匹配任何不是管道的字符，用花括号包裹。

# c# - 是否可以有一个特定于 Windows Azure 的 Web.config？

> ID：10961862
> 
> 赞同：0
> 
> 时间：2012-06-09T14:38:06.423
> 
> 标签：c#, asp.net, azure, web-config

我有一个解决方案，有两个项目，一个是**web 应用程序**，一个是**windows azure 项目**。
要链接这两者，我在解决方案中的角色>添加>Web角色项目中单击鼠标右键。

到目前为止一切都很好。如果我单击在浏览器中查看， 我可以**通过计算模拟器**在多个实例上测试应用程序并**在本地测试它。**

我的目标是保持相同的代码在本地和云中运行，因此，仅 azure 代码包含在诸如 `if(RoleEnvironment.IsAvailable) { } else { }`

**问题之类的块中：** Web.config 文件对于**Web 应用程序**和**azure 项目**以及某些配置是通用的，例如TableStorageSessionStateProvider 将无法在本地工作，所以我的问题是......

```
<sessionState mode="Custom" customProvider="TableStorageSessionStateProvider">
    <providers>
        <clear/>
            <add name="TableStorageSessionStateProvider" type="Microsoft.Samples.ServiceHosting.AspProviders.TableStorageSessionStateProvider"/>
    </providers>
</sessionState> 
```

**问题：**我可以拥有两个 web.config 文件吗？当我在本地浏览网站时调用一个，当我在计算模拟器中测试我的应用程序或将解决方案部署到 Microsoft 云时使用一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:41:22.763

[试试这个类似问题的答案](https://stackoverflow.com/a/10915401/12570)。您也许可以使用[Web.config 转换](http://blogs.msdn.com/b/webdevtools/archive/2009/05/04/web-deployment-web-config-transformation.aspx)。

这个想法是让你的本地测试`Web.config`，然后有一个单独的配置`Web.cloud.config`用于云部署。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T16:02:25.420

不，您不能拥有多个 web.config。彼得提到的转换不起作用，因为转换不是天蓝色包装过程的一部分。

如果可能，尽量使用代码和 RoleEnvironment.IsAvailable 进行设置。除此之外，您应该尽量避免让您的配置依赖于您的机器。

如果真的没有办法，并且您绝对需要不同的配置文件，您可以设置一个额外的构建后任务，以在发布模式下编译时将 web.config 文件替换为不同的文件。

# c - ap_log_error 未登录我的 apache 模块

> ID：10961866
> 
> 赞同：5
> 
> 时间：2012-06-09T14:38:42.910
> 
> 标签：c, apache, logging

我在我正在处理的 apache 模块中有这段代码，它是使用 ap_hook_child_init() 注册的：

```
static class_name *mc;

static void child_init(apr_pool_t *pool, server_rec *s)
{
    ap_log_error(APLOG_MARK, APLOG_INFO, 0, s, "this pointer should be null: %pp", mc);
    mc  = mc_alloc();
    ap_log_error(APLOG_MARK, APLOG_INFO, 0, s, "this pointer should not be null: %pp", mc);
} 
```

问题：我没有看到这些日志消息！

我确信这个函数正在被调用并且调用`mc_alloc()`正在工作，因为当我从模块的其他部分（如在请求处理程序中）登录时，我看到了日志消息并获得了指针的有效结果。这也告诉我日志记录正在工作。

是我的代码错误还是我的期望？在 ap_hook_child_init 回调期间不能发出日志消息吗？如果没有，我还能如何记录一个孩子被初始化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T02:19:07.977

所以事实证明这不是代码问题，而是配置问题。

在`/etc/apache2/sites-enabled/my_site.conf`我已经`LogLevel Info`在我的`<VirtualHost>`部分中设置，这显然没有为整个服务器设置它。

我通过从更改为 发现了这`APLOG_INFO`一点`APLOG_CRIT`。一旦我这样做了，消息就会出现在日志中。所以我知道*服务器*正在正确记录并且我的代码正在运行。

这使我相信存在单独的可能的 LogLevel 设置，并且我可能对我的位置过于具体。显然需要在该部分之外添加一个`LogLevel Info`指令`<VirtualHost>`来设置整个服务器以记录比默认更多的消息。

# javascript - 在移动浏览器中调用事件的问题

> ID：10961868
> 
> 赞同：0
> 
> 时间：2012-06-09T14:38:55.217
> 
> 标签：javascript, android, browser, mobile-safari, kineticjs

在 KineticJS 3.8.5 中调用移动浏览器内的事件时遇到问题。事件不会被调用。我已经在 Chrome、Mobile Safari 和 Android 2.3 浏览器中对此进行了测试，并且在单击文本时不会调用 alert()，而这显然应该调用。这是[JSFiddle](http://jsfiddle.net/zja2R/6/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:49:01.227

我弄清楚了这个问题。我写的是“touchdown”而不是“touchstart”

# jquery - XML 中的 JQuery 选择器

> ID：10961874
> 
> 赞同：0
> 
> 时间：2012-06-09T14:39:48.303
> 
> 标签：jquery, xml, jquery-selectors

我正在尝试从 XSD 文档中获取一组元素。我已经下载并且正在使用最新版本的 jQuery (1.7.2)。引用的 xsd 是[http://www.w3.org/2001/XMLSchema.xsd](http://www.w3.org/2001/XMLSchema.xsd)的本地副本，我使用的代码如下：

```
var xml;
$(function(){
    $.ajax({
        type:"GET",
        url:"http://www.w3.org/2001/XMLSchema.xsd",//"xml/XMLSchema.xsd",
        dataType: 'xml',
        success:function(result){
            xml = $(result);
        }
    });
}); 
```

这使我能够按预期将 xsd 加载到“xml”变量中，但是当我去查询它时，我最终会得到一些令人困惑的结果。使用：

```
$('complexType[name=simpleType]', xml).attr("name")
$('complexType[name="simpleType"]', xml).attr("name") 
```

返回“未定义”，但是开头、结尾和开头和结尾返回正确的结果：

```
$('complexType[name^="simpleType"]', xml).attr("name")
$('complexType[name$="simpleType"]', xml).attr("name")
$('complexType[name$="simpleType"][name^="simpleType"]', xml).attr("name") 
```

这就是名称“simpleType”。= 不起作用有什么原因吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:51:32.033

我认为您对名称空间的使用有疑问。你可以尝试使用

```
$('xs\\:complexType[name=simpleType]', xml).attr("name") 
```

[（请参阅此处](http://api.jquery.com/category/selectors/)的元字符转义）而不是

```
$('complexType[name=simpleType]', xml).attr("name") 
```

# ios5 - 科尔多瓦（前 phonegap）电话：链接在 ios5 中不起作用

> ID：10961875
> 
> 赞同：5
> 
> 时间：2012-06-09T14:40:04.110
> 
> 标签：ios5, hyperlink, cordova, jqmobi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T00:11:00.650

我的解决办法是：没有办法。但是一个插件： [https ://github.com/mchristie/PhoneGap-ios-PhoneDialer/](https://github.com/mchristie/PhoneGap-ios-PhoneDialer/)

如果您使用cordova，请务必检查您必须更改的4行（cordova而不是phonegap）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T21:55:15.107

实际上有一个解决方案，或者至少对我来说有一个解决方案，这里是：

在 HTML 中：

```
<input type="button" href="tel:+1-800-555-1234“ class="phone-number" value="1-800-555-1234"/> 
```

在 Javascript 中：

```
$(‘.phone-number’).bind(click, function(e) {
    e.preventDefault()
    var phoneLink = $(e.currentTarget).attr('href');
    window.open(phoneLink, '_system', 'location=yes’);
} 
```

附录...有人建议进行编辑，我将“.phone-number”更改为“.phone”并删除“location=yes”。我不知道这会对这段代码产生什么影响，因为我不再从事这个项目并且代码在我拥有的仓库中，但我可以告诉你某些将 .phone-number 更改为 .phone 会绝对行不通，因为那不是我在输入字段中所说的类。至于 location=yes 被删除，我也不知道会有什么影响，因为我不再有代码了。然而，他们确实指出我使用了不正确的左右引号。这可能只是我的一个剪切粘贴错误，但谁知道呢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T15:10:54.400

# javascript - jQuery - 在表单上查找指定的组件

> ID：10961880
> 
> 赞同：2
> 
> 时间：2012-06-09T14:40:33.050
> 
> 标签：javascript, jquery

我在我的表单上搜索`inputs`并将它们添加到`inputs`变量中：

```
var inputs = $(this).parents("form").eq(0).find(".input:visible:enabled"); 
```

如何扩展对其他组件的搜索，例如`select`. 因此，按照在?上找到它们的顺序添加`inputs`和`selects``form`

就像是

```
var inputs = $(this).parents("form").eq(0).find(".input:visible:enabled OR .select"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:41:49.240

```
$(this).parents("form").find(".input:visible:enabled, .select"); 
```

**多个选择器将用逗号( `,`) 分隔。**

更多请看[这里](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:42:13.267

您可以使用逗号 ( `,`)分隔选择器

[jQuery 多重选择器](http://api.jquery.com/multiple-selector/)

# jquery-mobile - 对于我的情况，Codeigniter 2 会是一个不错的选择吗？如下所述？

> ID：10961882
> 
> 赞同：0
> 
> 时间：2012-06-09T14:40:57.293
> 
> 标签：jquery-mobile, codeigniter-2, php

花了一周时间尝试围绕 Yii 框架进行学习，但虽然我确实感受到了它的优雅，但与我在 Codeigniter 上花费的 2 天相比，我发现学习曲线相当陡峭。我的背景是 Unix 系统编程（通信堆栈），没有接触过 MVC，并且只知道基本的 PHP（发现它相当简单直接）。

我考虑过无框架的方法，但发现它更令人生畏，因为我几乎没有 Web 开发经验。一个框架，至少会在架构和设计方面提供指导。

我可能是在自取其辱，但由于加速的最后期限很紧，并且交付了一个有点复杂的 Web 应用程序，我需要真正快速地提高工作效率。

所以想知道社区是否可以指导我，如果 Codeigniter 2.x 对我来说是一个不错的选择，考虑到以下要求 -

1.  易于学习，能够快速交付，功能强大。因此需要有广泛的、易于使用的文档、教程（除了简单的博客）和一个非常活跃的社区。

2.  框架需要使集成功能变得容易，例如 -

    *   使用验证码进行用户注册
    *   使用手机发送的随机验证密钥进行用户验证
    *   发送电子邮件、短信到手机
    *   与支付网关集成
    *   有重要的没有。（接近一百个）可能的 CRUD 操作
    *   不会妨碍使用 AJAX（如果不是让它变得容易的话），例如时间线演示 - 包括音频片段、照片、视频片段
    *   不会妨碍 Web 应用程序在移动设备（如智能手机）上的访问（如果不是让它变得容易的话）
3.  具有合理的性能。不一定是最快的，但性能是一个问题，尽管是次要的。

当然，我不需要第一天的所有功能，并且愿意花一些时间阅读/学习框架，但不想先阅读整本手册。

请注意，我已经搜索了 Codeigniter 论坛，并找到了有关一些必需功能的讨论，但是大多数有趣的库似乎仅在 Codeigniter 1.7 上可用，并且几乎没有确认那些也可用于 Codeigniter 2.1 的库！此外，所有 Codeigniter 书籍都适用于 1.7，而没有适用于 2.1。这是否意味着 2.x 没有足够的采用和社区支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:38:32.187

是的。CodeIgniter 2*是*一个不错的选择。

1.  它*非常*易于使用和学习。不过，我建议总体上了解 MVC 架构。它们的官方文档很棒，尽管有时我渴望直接的 API 格式。你会注意到它们并没有显示函数预先接受的所有可用参数。有时您必须阅读整个页面才能找出所有可用选项。注意：您会发现在 CI 中使用模型没有一种方法或标准。它们与您手动编码它们一样有用。
2.  有大量的库和助手可以做几乎任何你需要的事情，以及如何做的教程。不知道您所说的*通过手机发送的验证码*是什么意思。AJAX 不是问题。CI 有这个非常方便[`is_ajax_request()`](http://codeigniter.com/user_guide/libraries/input.html)的功能，非常有用。[注意： AJAX 请求过期会话](http://codeigniter.com/forums/viewthread/102456/)曾经存在问题。不确定这是否仍然是一个问题。就使其可用于移动设备而言，您会发现前端的问题多于后端。
3.  基线（处女 CI）性能相当不错。保持精简取决于您（您的代码和查询）。

您找到的许多库可能会*说*它们是为 1.7 制作的，但可能适用于 2.x。如有必要，您可以尝试自己更新它们。我们很乐意提供帮助。请注意，“插件”在 CI 2 中已被弃用，您必须将*插件*转换为*帮助*程序或*库*（取决于您的需要）。CI 1.7 比 CI 2 领先 3 年。“社区”需要一些时间才能赶上。

希望这可以帮助。

# javascript - Why JavaScript Compressors replace single quotes with double quotes?

> ID：10961883
> 
> 赞同：3
> 
> 时间：2012-06-09T14:41:14.920
> 
> 标签：javascript, quotes, minify

Making some Bookmarklet, I tried to use JavaScript minifier like [Google Closure Compiler](http://closure-compiler.appspot.com/home) or [YUI Compressor](http://www.refresh-sf.com/yui/). However, I didn't use these because they replace every single quotes with double quotes. I can't use a code which has double quotes, as I should enclose the code with double quotes like:

```
<a href="javascript:alert('hello')">hello</a> 
```

So, I used [MinifyJavascript](http://www.minifyjavascript.com/) for minifying. I wonder why other minifiers replace quotes. Replacing quotes doesn't minify codes. Coding style is not important for minified code. Then what is the reason for this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:50:25.553

Pure speculation in this answer:

*   Enforce style consistency.
*   Consistency reduces size when gzip'ed, because of repeating character sequences.

Can't really think of anything else. They could have chosen single quotes instead of double, though.

# c# - 为什么当我将 PictureBox 的 BorderStyle 设置为 FixedSingle 时，我的位图缩放比例会发生变化？

> ID：10961889
> 
> 赞同：0
> 
> 时间：2012-06-09T14:41:39.773
> 
> 标签：c#, .net, winforms, drawing, gdi

我有一个大小为 1000、20 的 PictureBox，我在 Form_Load 事件中设置它的位图：

```
void Form1_Load ( object sender, EventArgs e )
{
    SetProgressBar ( pictureBox1, 25 );
}

void SetProgressBar ( PictureBox pb, int progress )
{
    Bitmap bmp = new Bitmap ( 100, 1 );

    using ( Graphics gfx = Graphics.FromImage ( bmp ) )
    using ( SolidBrush brush = new SolidBrush ( System.Drawing.SystemColors.ButtonShadow ) )
    {
        gfx.FillRectangle ( brush, 0, 0, 100, 1 );
    }

    for ( int i = 0; i < progress; ++i )
    {
        bmp.SetPixel ( i, 0, Color.DeepSkyBlue );
    }

    // If I don't set the resize bitmap size to height * 2, then it doesn't fill the whole image for some reason.
    pb.Image = ResizeBitmap ( bmp, pb.Width, pb.Height * 2, progress );
}

public Bitmap ResizeBitmap ( Bitmap b, int nWidth, int nHeight, int progress )
{
    Bitmap result = new Bitmap ( nWidth, nHeight );

    StringFormat sf = new StringFormat ( );
    sf.Alignment = StringAlignment.Center;
    sf.LineAlignment = StringAlignment.Center;
    Font font = new Font ( FontFamily.GenericSansSerif, 10, FontStyle.Regular );

    using ( Graphics g = Graphics.FromImage ( ( Image ) result ) )
    {
            // 20 is the height of the picturebox
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor;
        g.DrawImage ( b, 0, 0, nWidth, nHeight );
        g.DrawString ( progress.ToString ( ), font, Brushes.White, new RectangleF ( 0, -1, nWidth, 20 ), sf );
    }
    return result;
} 
```

在我将 BorderStyle 设置为 FlatSingle 之前，一切看起来都很棒。它在最后创造了一个差距。我该如何解决这个问题，让它看起来仍然是全彩色的？

编辑：这就是它的外观：

![在此处输入图像描述](../Images/3954fccee40f2af82b9203799b559f69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T21:32:58.273

似乎添加边框会增加图片框的大小。我将您的示例设置为 BorderStyle 设置为 FixedSingle、None 和 Fixed3D，每个结果都不同。这些 PictureBox 中的每一个都从相同的位置开始，您可以看到可见宽度实际上已经改变。

![在此处输入图像描述](../Images/efa978d1fd53ea151472c7f797bb5eef.png)

它在 FixedSingle 上约为 4 像素，在 Fixed3D 上约为 2 像素。我不确定引擎盖下发生了什么，但你应该能够像这样围绕它进行编码。

```
 if (pb.BorderStyle == BorderStyle.FixedSingle)
     pb.Image = ResizeBitmap(bmp, pb.Width + 4, pb.Height * 2, progress);
 else if (pb.BorderStyle == BorderStyle.Fixed3D)
     pb.Image = ResizeBitmap(bmp, pb.Width + 2, pb.Height * 2, progress);
 else 
     pb.Image = ResizeBitmap(bmp, pb.Width, pb.Height * 2, progress); 
```

这给出了一个看起来像这样的结果。

![在此处输入图像描述](../Images/80e08fe0469e132bb2b314d2384ae75f.png)

* * *

如果您查看[DisplayRectangle](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.displayrectangle.aspx)属性，您将看到您的客户矩形在您更改 BorderStyle 时正在发生变化：

> BorderStyle.None = 1000 像素
> BorderStyle.Fixed3D = 996 像素
> BorderStyle.FixedSingle = 998 像素

# internet-explorer - 如何拦截 IE 中的上下文菜单项选择？SPY++ 在任何 IE 窗口上都没有收到 WM_COMMAND

> ID：10961890
> 
> 赞同：3
> 
> 时间：2012-06-09T14:41:41.643
> 
> 标签：internet-explorer, ieaddon

一旦用户在 IE 中的某个网页上单击右键，就会向用户显示一个上下文弹出菜单，其中包含一些项目，如打印、查看源代码和一些其他自定义项目。

现在我知道如何在此上下文菜单中添加一些条目，但我的要求是在此弹出菜单上拦截菜单选择（如右键单击 - >打印）...

因此，我开始使用 SPY++ 在 IE 窗口上捕获消息，并且我能够使用 WM_MENUSELECT 消息唯一地确定上下文菜单项突出显示。（id:27 用于突出显示打印项目）。但是，一旦我选择了打印项目（鼠标单击或键盘 Enter），在任何 IE 窗口上都没有收到 WM_COMMAND ...也没有 WM_MENUCOMMAND ...

所以我只是想知道 IE 如何在不使用标准 WM_COMMAND 消息的情况下实现其菜单选择处理？有没有其他选择，或者我错过了什么？

所以到目前为止，我唯一剩下的选择是保存 MENUSELECT 事件的状态，然后在下一个 LBUTONCLICK/键盘输入事件中检查这个状态......还有其他干净的方法吗？请建议...

# php - PHP正则表达式清理空标签

> ID：10961897
> 
> 赞同：0
> 
> 时间：2012-06-09T14:42:51.457
> 
> 标签：php, regex

在我的一个站点中使用 WYSIWYG HTML 编辑器有一个 ahref 清洁器，可以去除坏的 href= url，但它为每个清洁的实例留下了什么。

```
<a>some text here</a> 
```

文本块中有时不止一个，所以我正在寻找的是一个 preg_replace _all 表达式，它将保持原样，`<a href-"...">` 但会清除上面的示例。

IE。`<a>some text here</a>`

会变成`some text here`

基本上我需要在进入和/或离开数据库的大块代码上运行它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:47:54.450

我会尽量保持简单：

```
$result = preg_replace('%<a>(.*?)</a>%s', '\1', $subject); 
```

这假设`</a>`每个标签实际上都有一个匹配的`<a>`标签，并且它们没有嵌套（无论如何它们都不应该嵌套）。

# javascript - 如何将屏幕位置转换为等距位置

> ID：10961899
> 
> 赞同：2
> 
> 时间：2012-06-09T14:43:00.537
> 
> 标签：javascript, html, math, canvas, isometric

如何将屏幕位置（X，Y）转换为等距位置？

我有将等距位置转换为屏幕位置的代码：http: [//jsfiddle.net/CR3JS/](http://jsfiddle.net/CR3JS/)

这是公式轴：[http ://s15.postimage.org/xyxfukxkp/iso_Axis.jpg](http://s15.postimage.org/xyxfukxkp/iso_Axis.jpg)

我的问题是：如何将屏幕位置（X，Y）转换为等距位置？

就像是：

```
screenToIsometric(144, 88) -> X: 10, Y: 0, Z: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:24:36.460

您不能只有一个 X、Y、Z 点，因为一个 2D 屏幕位置将映射到多个不同的图块 - 每个不同的 Z 级别都有一个图块。如果您试图弄清楚用户在等轴测视图中单击了什么对象，最简单但有点脏的方法就是从上到下遍历所有 Z 级别，在示例函数中使用公式的反向并检查是否有任何适合单击位置，如果该位置为空，则继续下层。

# php - php编码字符串，反之亦然

> ID：10961901
> 
> 赞同：4
> 
> 时间：2012-06-09T14:43:19.163
> 
> 标签：php, encryption, encode

我有一些实体（对象），每个实体都有一个 id（唯一）和一个名称。
当我想显示其中一个时，我有一个类似 www.domain.com/view/key:xxx 的 url。
键只是用base64_encode编码的实体的id，所以从url中不能直接看出id是什么。

我现在要做的（由于项目规范）是让密钥只包含数字和字母（base64_encode 提供类似于`eyJpZCI6IjM2In0=`或`eyJpZCI6IjM2In0%3D`在 url 编码之后的结果）。

有一个简单的替代方案吗？这不是一个高安全性问题 - 可以通过多种方式显示 id - 我只需要一个仅包含由实体 ID 生成的字母和数字的密钥（可能与其名称相结合）解码给我回ID。

我发现的所有不同的编码方法也可以包含特殊字符。
这里有什么帮助吗？
提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T14:48:41.487

这个答案并没有真正应用加密，但因为你的问题也被标记为编码......

从 PHP 5 开始，您可以使用`bin2hex`：

```
$s = base64_decode('eyJpZCI6IjM2In0=');
echo bin2hex($s); 
```

输出：

```
7b226964223a223336227d 
```

解码：

```
$s = hex2bin($data); 
```

或者：

```
$s = pack('H*', $data); 
```

顺便说一句，如果它`id`很敏感，您可能需要考虑防篡改作为全面加密的替代方案。

* * *

忘了提及如何使`base64`编码数据 URL 安全：

```
function base64_url_encode($input)
{
    return strtr(base64_encode($input), '+/=', '-_,');
}

function base64_url_decode($input)
{
    return base64_decode(strtr($input, '-_,', '+/='));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:46:31.797

有许多 PHP 编码/解码函数。[你可以在这里](http://www.crypo.com/tools/index.php)和[这里](http://hackers.co.id/esab-46.php)找到很多。

或者，只需去掉 base64_encode 末尾的 = 并将其添加到 PHP 代码中，以便 base64_decode 找到 ID。

# modx - Chrome 开发工具中的 Modx Revilution 错误“Uncaught SyntaxError: Unexpected token < lang.js.php:1”

> ID：10961903
> 
> 赞同：1
> 
> 时间：2012-06-09T14:43:32.860
> 
> 标签：modx, modx-revolution

安装 ModX Revo 2.2.2 并登录后，我只能看到无法正常工作的菜单。我的 Chrome 控制台中也有几个错误：

```
Uncaught SyntaxError: Unexpected token < lang.js.php:1
Resource interpreted as Script but transferred with MIME type application/octet-stream: "/connectors/layout/modx.config.js.php?action=&wctx=mgr". /manager/:16
Uncaught SyntaxError: Unexpected token < modx.config.js.php:1
Uncaught ReferenceError: _ is not defined index.php:103
(anonymous function) index.php:103
Uncaught ReferenceError: _ is not defined index.php:1
Uncaught TypeError: undefined is not a function ext-all.js:7
Uncaught ReferenceError: _ is not defined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:18:23.257

如果您有一些压缩模块，请尝试关闭它们。就我而言，它是

```
php_flag zlib.output_compression On
php_value zlib.output_compression_level 5 
```

在 .htaccess 中。

# java - 设备休眠后，OpenGL游戏android不重绘

> ID：10961905
> 
> 赞同：-1
> 
> 时间：2012-06-09T14:43:59.070
> 
> 标签：java, android, opengl-es, sleep

我正在构建一个简单的 OpenGl 游戏（在阅读了《开始 android 4 游戏》一书之后），我正在使用唤醒锁来防止平板电脑进入睡眠状态，但如果我强制它进入睡眠状态，则在唤醒应用程序时只会显示白屏（清晰的颜色）

游戏框架和书中的完全一样，我只是想一步一步地构建我的游戏，就像 Super Jumper（第 9 章）一样，如果有人能帮助我，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:46:49.680

您也可以简单地调用 View.setKeepScreenOn(boolean) 来保持屏幕处于活动状态并且设备处于活动状态。除此之外......当你失去你的opengl上下文时，你将不得不重新加载你的纹理。

# asp.net-mvc-4 - ASP.NET MVC 4 Web API 中单个控制器中没有参数的两个 Get 方法？

> ID：10961906
> 
> 赞同：1
> 
> 时间：2012-06-09T14:44:00.770
> 
> 标签：asp.net-mvc-4

有没有办法在 ASP.NET MVC 4 Web API 的单个控制器中包含两个具有不同名称但没有任何输入参数的 Get 方法？

例如，我想要两个 GetBookXXX 方法——一个返回一个只包含书名的列表，另一个返回一个包含所有书籍详细信息（标题、作者、ISBN 等）的列表。到目前为止，我看到的方法是使用两个单独的控制器，但我更愿意使用一个，而不是重复管道代码两次。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:17:00.433

就在这里。如下定义您的方法：

```
[ActionName("GetBookXXX")]
public ActionResult BookTitles()
{
    return View();   
}

[ActionName("GetBookXXX")]
public ActionResult BookDetails(int id)
{
    return View();   
} 
```

如需进一步参考，请参阅[http://haacked.com/archive/2008/08/29/how-a-method-becomes-an-action.aspx](http://haacked.com/archive/2008/08/29/how-a-method-becomes-an-action.aspx)。

# codeigniter - 尝试在控制器中调用无效时自定义 404 不起作用

> ID：10961907
> 
> 赞同：2
> 
> 时间：2012-06-09T14:44:09.043
> 
> 标签：codeigniter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:57:26.377

只需在 config/routes.php 中设置正确的路由：

```
$route['404_override'] = 'your_controller/show_404'; 
```

相应的控制器看起来像这样：

```
class Your_controller extends CI_Controller {

    function __construct() {
        parent::__construct();
    }

    function show_404() {
        $this->output->set_header("HTTP/1.1 404 Not Found");
        $this->load->view ('common/errors/404'); //wherever your view is
    }
} 
```

那应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:10:34.493

阅读该教程的评论，许多人对该代码有同样的问题。您是否将第 10 行的 parent::CI_Router() 更改为 parent::__construct()？

但是为什么不直接设置 $route['404_override'] 变量呢？

# jsf - 导入 javax.faces.bean.ManagedBean 时出现错误“包 javax.faces.bean 不存在”

> ID：10961916
> 
> 赞同：10
> 
> 时间：2012-06-09T14:44:53.530
> 
> 标签：jsf, netbeans

我正在从[Oracle 在线教程](http://docs.oracle.com/cd/E19798-01/821-1841/bnadr/index.html)学习 JSF 。在 netbeans 上构建其示例“hello1”时，它在该行给出以下错误`import javax.faces.bean.ManagedBean;`：

> 包 javax.faces.bean 不存在

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-02T12:14:34.837

在项目的 pom.xml 文件中添加这 2 个依赖项

```
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-api</artifactId>
  <version>2.1.7</version>
</dependency>
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-impl</artifactId>
  <version>2.1.7</version>
</dependency> 
```

这将解决您的依赖问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-30T05:12:38.117

您必须将 javax.faces.api jar 文件添加到您的项目中。[你可以在这里](http://mvnrepository.com/artifact/javax.faces/javax.faces-api/2.1)找到这个库。

下载此文件后，您必须将其导入您的项目并将其添加到您的工件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-02T12:30:26.663

对于 gradle ：

'com.sun.faces:jsf-api:2.2.8'

'com.sun.faces:jsf-impl:2.2.8'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T11:08:45.230

如果您使用**Netbeans**，您可以在此应用程序的同一文件夹中搜索库 javax.faces.jar，您可能会在如下文件夹中找到它：C:\Program Files\NetBeans 7.3.1\enterprise\modules\ext\ jsf-2_2。

现在，右键单击**Netbeans**中的 yourProject/libraries，然后选择**Add JAR/Folder...**命令添加 javax.faces.jar 文件。

[添加 javax.faces.jar 库](http://i.stack.imgur.com/L8ZYA.jpg)

在同一个弹出菜单中，您可以使用**Add Library**并**从 GlassFish 添加 Java EE**

[从 GlassFish 库添加 Java EE](http://i.stack.imgur.com/xwJRg.jpg)

祝你好运。

# php - php if else 表单字段错误

> ID：10961919
> 
> 赞同：0
> 
> 时间：2012-06-09T14:45:17.290
> 
> 标签：php, forms, if-statement

我的表单有一个输入文件类型字段。

```
<input type="file" name="file" size="80" value=""> 
```

当提交并且此字段为空时，应跳过我的 php 脚本的文件上传部分。这似乎没有发生。我得到的是错误的文件类型消息弹出。表单上的字段中没有填充任何内容，那么为什么不遵循我的 if/else 语句？我究竟做错了什么？

```
<?php
// connect to datebase
require "master.db.php";

// this if(empty statement is not working?
// should be checking to see if the form field 'file' is populated if so check file
// type if not skip and update sql database with information in form field 'test'
if(!empty($_FILES))
{
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] < 2097152))
    {
        // code here works - function is to upload the file - not part of my current problem
    }

    // currently this else statement is displayed regardless of 'file' input
    // wrong function for its intended purpose
    else
    {
        // wrong file type
        echo "Invalid file <br />";
        echo "Tryed to upload: " . $_FILES["file"]["name"] . "<br />";
        echo "Type: " . $_FILES["file"]["type"] . "<br />";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb Max 2Mb <br />";
        echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";
        die;
    }
}
else 
{
// update other data in mysql database
$sql="UPDATE `characters` SET test='$test' WHERE ID='$id'";
$result=mysql_query($sql);

    // if successfully updated mysql.
    if($result){
        echo "<b>Update successful</b> <br />";
        echo "<a href='test.html'>View result</a>";
        touch('master.html');
        clearstatcache();
    }
    else
    {
        echo "Whoops: " . mysql_error(); ;
    }
    mysql_close();
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:49:57.533

浏览器仍会发送输入值，即使该值为空。因此，PHP 将使用以下内容填充 $_FILES 数组：

```
Array
(
    [file] => Array
        (
            [name] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )

) 
```

因此，我猜你应该使用 PHP 的原生 is_uploaded_file 方法，而不是检查 isset/empty。有关检查是否提供了可选文件输入的更多信息，请参阅[此SO 帖子。](https://stackoverflow.com/questions/946418/how-to-check-if-user-uploaded-a-file-in-php)

我会尽力澄清我的答案。我刚刚给出的参考建议使用 file_exists 和 is_uploaded_file。根据 PHP 手册，仅使用 is_uploaded_file 就足够了。事实上，我可以想象 is_uploaded_file 无论如何都会查找文件（所以内部已经做了类似 file_exists 的操作）。

请注意，您确实应该使用 tmp_name-key 而不是 name-key。'name' 键指定客户端 PC 上文件的名称，但 tmp_name 指定服务器上的名称。在某些情况下，服务器会重命名文件，因此与用户 PC 上的名称不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:55:36.570

请务必添加

```
enctype="multipart/form-data" 
```

表单标签中的属性。并按照[@Martijn](https://stackoverflow.com/a/10961956/1377943)指南检查以下代码，它必须有效。一定要定制。

```
 <?php
 // connect to datebase
 require "master.db.php";

 // this if(empty statement is not working?
 // should be checking to see if the form field 'file' is populated if so check file
 // type if not skip and update sql database with information in form field 'test'

 if(!empty($_FILES)) // MEANS form is valid ( have valid file and other data) 
 {
$sql="UPDATE `characters` SET test='$test' WHERE ID='$id'";
$result=mysql_query($sql);

  if (((($_FILES["file"]["type"] == "image/gif")
  || ($_FILES["file"]["type"] == "image/jpeg")
  || ($_FILES["file"]["type"] == "image/pjpeg"))
  && ($_FILES["file"]["size"] < 2097152)) && $result ))
{
    // code you need to execute
    echo "<b>Update successful</b> <br />";
    echo "<a href='test.html'>View result</a>";
    touch('master.html');
    clearstatcache();
   }

   else
   {
    // wrong file type
    echo "Invalid file <br />";
    echo "Tryed to upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb Max 2Mb <br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";
    die;
    }
    }
   else 
   { 
echo "data is not valid";
    }
  ?> 
```

# objective-c - 如何在视图控制器之间进行淡入淡出/无过渡

> ID：10961926
> 
> 赞同：63
> 
> 时间：2012-06-09T14:45:48.053
> 
> 标签：objective-c, ios, uistoryboardsegue

是否可以在 Storyboard 中的视图控制器之间进行淡入和淡出转换。或者没有过渡。

如果可能，它的代码是什么？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-06-10T14:40:45.947

如果呈现模态视图控制器，您可以指定一个[`modalTransitionStyle`](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621388-modaltransitionstyle)of [`UIModalTransitionStyleCrossDissolve`](https://developer.apple.com/documentation/uikit/uimodaltransitionstyle)。如果在情节提要中使用 segue 执行此操作，请选择 segue 的属性检查器，并在此处指定过渡样式：

![在此处输入图像描述](../Images/b12eff575a2dd597da23186a483cc081.png)

如果以编程方式呈现视图控制器，您可以在情节提要中的视图控制器之间使用“Cross Dissolve”的“Transition”定义模态转场，然后让源视图控制器执行此转场：

```
[self performSegueWithIdentifier:@"presentSegue" sender:sender]; 
```

或者，如果您正在调用`presentViewController`：

```
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"YourStoryboardID"];
controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:controller animated:YES completion:nil]; 
```

* * *

在 iOS 7 中，Apple 提供了一项新技术，可为高度自定义的过渡提供丰富而强大的控制。有关详细信息，请参阅 WWDC 2013 视频[Custom Transitions Using View Controllers](https://developer.apple.com/videos/wwdc/2013/?id=218)。

但是，例如，如果您想自定义 iOS 7 中的 push 和 pop 动画以淡出，您可以`delegate`为导航控制器指定 a

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.navigationController.delegate = self;
} 
```

然后，您将实现`animationControllerForOperation`指定用于推送和弹出的动画器对象：

```
- (id<UIViewControllerAnimatedTransitioning>)navigationController:(UINavigationController *)navigationController
                                  animationControllerForOperation:(UINavigationControllerOperation)operation
                                               fromViewController:(UIViewController*)fromVC
                                                 toViewController:(UIViewController*)toVC
{
    if (operation == UINavigationControllerOperationPush)
        return [[PushAnimator alloc] init];

    if (operation == UINavigationControllerOperationPop)
        return [[PopAnimator alloc] init];

    return nil;
} 
```

您显然必须实现自定义推送和弹出动画师，例如：

```
@interface PushAnimator : NSObject <UIViewControllerAnimatedTransitioning>

@end

@implementation PushAnimator

- (NSTimeInterval)transitionDuration:(id <UIViewControllerContextTransitioning>)transitionContext
{
    return 0.5;
}

- (void)animateTransition:(id<UIViewControllerContextTransitioning>)transitionContext
{
    UIViewController* toViewController   = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];

    [[transitionContext containerView] addSubview:toViewController.view];

    toViewController.view.alpha = 0.0;

    [UIView animateWithDuration:[self transitionDuration:transitionContext] animations:^{
        toViewController.view.alpha = 1.0;
    } completion:^(BOOL finished) {
        [transitionContext completeTransition:![transitionContext transitionWasCancelled]];
    }];
}

@end 
```

和

```
@interface PopAnimator : NSObject <UIViewControllerAnimatedTransitioning>

@end

@implementation PopAnimator

- (NSTimeInterval)transitionDuration:(id <UIViewControllerContextTransitioning>)transitionContext
{
    return 0.5;
}

- (void)animateTransition:(id<UIViewControllerContextTransitioning>)transitionContext
{
    UIViewController* toViewController   = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];
    UIViewController* fromViewController = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];

    [[transitionContext containerView] insertSubview:toViewController.view belowSubview:fromViewController.view];

    [UIView animateWithDuration:[self transitionDuration:transitionContext] animations:^{
        fromViewController.view.alpha = 0.0;
    } completion:^(BOOL finished) {
        [transitionContext completeTransition:![transitionContext transitionWasCancelled]];
    }];
}

@end 
```

自定义模态转换也有一种类似但略有不同的技术（尽管如果您只是做一张脸，您可能只会使用`modalTransitionStyle`上面讨论的方法，除非您想采用其他一些细微的自定义）。有关更多信息，请参阅前面提到的[使用视图控制器的自定义转换](https://developer.apple.com/videos/wwdc/2013/?id=218)。

归根结底，iOS 7 的自定义转换是一种稍微复杂但非常强大的方法，可以对转换的动画提供巨大的控制。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-15T16:34:58.747

为了创建自定义 Segue，创建 UIStoryboard segue 的子类。例如：

```
// MCFadeSegue.h
#import <UIKit/UIKit.h>

@interface MCFadeSegue : UIStoryboardSegue

@end

// MCFadeSegue.m
#import <QuartzCore/QuartzCore.h>
#import "MCFadeSegue.h"

@implementation MCFadeSegue

- (void)perform
{
  CATransition *transition = [CATransition animation];
  transition.duration = 0.5;
  transition.type = kCATransitionFade;

  [[[[[self sourceViewController] view] window] layer] addAnimation:transition
      forKey:kCATransitionFade];

  [[self sourceViewController]
      presentViewController:[self destinationViewController]
      animated:NO completion:NULL];
}

@end 
```

然后在 MainStoryboard.storyboard 中选择 segue 并设置 Style:Custom 和 Class:MCFadeSegue。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-07-13T19:09:34.493

在 Swift 中推送/弹出 UIVIewController FadeIn/FadeOut

```
class FadeInPushSegue: UIStoryboardSegue {

    var animated: Bool = true

    override func perform() {

        if var sourceViewController = self.sourceViewController as? UIViewController, var destinationViewController = self.destinationViewController as? UIViewController {

            var transition: CATransition = CATransition()

            transition.type = kCATransitionFade; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
            sourceViewController.view.window?.layer.addAnimation(transition, forKey: "kCATransition")
            sourceViewController.navigationController?.pushViewController(destinationViewController, animated: false)

        }
    }

}

class FadeOutPopSegue: UIStoryboardSegue {

    override func perform() {

        if var sourceViewController = self.sourceViewController as? UIViewController, var destinationViewController = self.destinationViewController as? UIViewController {

            var transition: CATransition = CATransition()

            transition.duration = 0.4
            transition.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
            transition.type = kCATransitionFade; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade

            sourceViewController.view.window?.layer.addAnimation(transition, forKey: "kCATransition")
            sourceViewController.navigationController?.popViewControllerAnimated(false)
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-03-30T06:17:51.530

试试这个。

```
 let transition: CATransition = CATransition()
    transition.duration = 0.4
    transition.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
    transition.type = kCATransitionFade
    self.navigationController!.view.layer.addAnimation(transition, forKey: nil)

    let vc = self.storyboard?.instantiateViewControllerWithIdentifier("vcID") as! My_ViewController
    self.navigationController?.pushViewController(vc, animated: false) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-02-10T02:38:22.020

无需创建自定义 segue，我将这段代码放在一起来呈现视图......

```
UIViewController *nextView = [[UIStoryboard storyboardWithName:@"Main" bundle:nil] instantiateViewControllerWithIdentifier:@"YOUR_VIEW_CONTROLLER_STORYBOARD_NAME"];

nextView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

[self.navigationController presentViewController:nextView 动画：YES 完成：nil];
//（对于交叉溶解，设置动画：YES。对于无过渡，设置动画：NO。）

```

希望这对遇到这个问题的人有所帮助！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-01-13T19:23:44.243

我的 Swift 版本，带有可选的检查课程！

```
 let storyboard = UIStoryboard.init(name: "Main", bundle: nil)
    if let stView = storyboard.instantiateViewControllerWithIdentifier("STVC") as? STVC {
        stView.modalTransitionStyle = UIModalTransitionStyle.CrossDissolve
        self.navigationController?.presentViewController(stView, animated: true, completion: nil)
    } 
```

只需确保在 IB 中设置“视图控制器”的 Storyboard ID

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-11T06:33:49.737

**Swift 3**语法中的 Push/Pop UIVIewController FadeIn/FadeOut ，基于[Eugene Braginets](https://stackoverflow.com/users/1624912/eugene-braginets)的[回答](https://stackoverflow.com/a/31391500/3659227)

```
class FadeInPushSegue: UIStoryboardSegue {

    var animated: Bool = true

    override func perform() {

        let sourceViewController = self.source
        let destinationViewController = self.destination

        let transition: CATransition = CATransition()

        transition.type = kCATransitionFade; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade
        sourceViewController.view.window?.layer.add(transition, forKey: "kCATransition")
        sourceViewController.navigationController?.pushViewController(destinationViewController, animated: false)

    }

}

class FadeOutPopSegue: UIStoryboardSegue {

    override func perform() {

        let sourceViewController = self.source

        let transition: CATransition = CATransition()

        transition.duration = 0.4
        transition.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
        transition.type = kCATransitionFade; //kCATransitionMoveIn; //, kCATransitionPush, kCATransitionReveal, kCATransitionFade

        sourceViewController.view.window?.layer.add(transition, forKey: "kCATransition")
        _ = sourceViewController.navigationController?.popViewController(animated: false)
    }

} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-07-28T12:51:15.000

**斯威夫特 5：**

在花费数小时寻找正确的解决方案后，[Rob 的](https://stackoverflow.com/a/10969582/4036390)解决方案满足了我的所有需求，经过一些调整后，它是完美的。

创建淡入淡出视图控制器类：

```
class FadeViewControllerTransition: NSObject, UIViewControllerAnimatedTransitioning {

    var fadeOut: Bool = false

    func transitionDuration(
        using transitionContext: UIViewControllerContextTransitioning?) -> TimeInterval {
        return 0.5
    }

    func animateTransition(using transitionContext: UIViewControllerContextTransitioning) {

        if fadeOut {
            animateFadeOut(using: transitionContext)
            return
        }

        let toViewController = transitionContext.viewController(forKey: UITransitionContextViewControllerKey.to)!
        transitionContext.containerView.addSubview(toViewController.view)
        toViewController.view.alpha = 0.0
        UIView.animate(withDuration: transitionDuration(using: transitionContext), animations: {
            toViewController.view.alpha = 1.0
        }, completion: { _ in
            transitionContext.completeTransition(!transitionContext.transitionWasCancelled)
        })
    }

    func animateFadeOut(using transitionContext: UIViewControllerContextTransitioning) {

        let toViewController = transitionContext.viewController(forKey: UITransitionContextViewControllerKey.to)!
        let fromViewController = transitionContext.viewController(forKey: UITransitionContextViewControllerKey.from)!
        transitionContext.containerView.insertSubview(toViewController.view, belowSubview: fromViewController.view)
        UIView.animate(withDuration: transitionDuration(using: transitionContext), animations: {
            fromViewController.view.alpha = 0.0
        }, completion: { _ in
            transitionContext.completeTransition(!transitionContext.transitionWasCancelled)
        })
    }
} 
```

在导航控制器的第一个视图控制器中：

```
class MainViewController: UIViewController, UIViewControllerTransitioningDelegate, UINavigationControllerDelegate {

    private let fadeVCTransition = FadeViewControllerTransition()

    func navigationController(_ navigationController: UINavigationController, animationControllerFor operation: UINavigationController.Operation, from fromVC: UIViewController, to toVC: UIViewController) -> UIViewControllerAnimatedTransitioning? {
        fadeVCTransition.fadeOut = (operation == .pop)
        return fadeVCTransition
    } 
```

就是这样。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-03-27T02:37:11.157

我所做的是在 Interface Builder 中使用 Storyboard，连接了您需要移入/移出和移回的两个视图控制器（按住 ctrl 并将单击从源视图控制器拖动到目标视图控制器），并更改了 segue 属性。我使用了以下内容：

[![在此处输入图像描述](../Images/f6e17babd5d239109478e8c070ccdcd6.png)](https://i.stack.imgur.com/loU2u.png)

然后我使用了以下内容：

```
[self performSegueWithIdentifier:@"showMovieDetailSegue" sender:self]; 
```

当你想删除它时，只需从源视图控制器调用它：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

简单而且非常快速。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-13T06:46:15.797

这让我疯了几个小时。这些解决方案似乎都不是我想要的，我正在失去理智。最后想出了以下方法，它使用淡出/淡入转换在单个 NSWindow 中交换视图控制器。首先它执行淡出，然后在完成处理程序中，它将窗口的视图设置为新视图并执行淡入。也许有更好的方法来做到这一点，但这是我可以一起破解的最简单的方法.

```
class CustomSegue : NSStoryboardSegue {
    override func perform() {
        guard let fromController = sourceController as? NSViewController else {
            return;
        }
        guard let toController = destinationController as? NSViewController else {
            return;
        }
        let animationDuration = 0.5;
        NSAnimationContext.runAnimationGroup({
            $0.duration = animationDuration;
            fromController.view.animator().alphaValue = 0.0;
        }, completionHandler: {
            fromController.view.window?.contentViewController = toController;
            toController.view.alphaValue = 0.0;
            NSAnimationContext.runAnimationGroup({
                $0.duration = animationDuration;
                toController.view.animator().alphaValue = 1.0;
            })
        });

    }
} 
```

Apple 文档中缺少示例让我想绞尽脑汁，Objective C 和 Swift 的混合无处不在……呸！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-10T00:17:29.310

**在没有过渡的情况下呈现：**

*   在情节提要中选择您的转场
*   在属性检查器中取消选中“动画”

# database - 与另一个模型或父模型的多态关联

> ID：10961930
> 
> 赞同：2
> 
> 时间：2012-06-09T14:46:22.253
> 
> 标签：database, ruby-on-rails-3, activerecord, polymorphism, models

我在 Rails 中有一个名为 Recipe 的模型。配方模型包含成分。每个成分行都与食物模型或另一个食谱相关联。所以基本上我想要一个与 Food 模型和 Recipe 模型的多态关联。但是，当我进行更改时，成分类中的 recipe_id 始终为空。协会中有什么明显的错误吗？

```
class Recipe < ActiveRecord::Base
  has_many :ingredients, :as => :element
end

class Food < ActiveRecord::Base
  has_many :ingredients, :as => :element
  has_many :recipes, :through => :ingredients
end

class Ingredient < ActiveRecord::Base
  belongs_to :element, :polymorphic => true
  belongs_to :recipe
end 
```

因此，基本上一个食谱的成分行可以包含另一个食谱或食物表中的一个元素（并且每个食谱可以包含任意数量的成分行）。

这是一张代表我想要的图：

![表格的绘制](../Images/e9b3164c9dbdfc5f1dc3c291df741f04.png)

以下是 RubyMine 中当前模式的外观：

![红宝石图](../Images/f8706d03ee7e5d533e09d5fe7d1714a2.png)

问题是成分行（即父表）中的 recipe_id 现在为空，所以当我开始实现多态关联时，关系已经停止工作。

这是我保存食谱时的插入行：

```
 SQL (3.4ms)  INSERT INTO "recipes" ("created_at", "description", "directions", "name", "owner", "recipe_source_type_id", "servings", "source", "time", "updated_at", "visibility") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["created_at", Sun, 10 Jun 2012 13:43:12 UTC +00:00], ["description", "Þetta er önnur prufuuppskrift"], ["directions", "Já, og leiðbeiningar"], ["name", "Prufuuppskrift II"], ["owner", 1], ["recipe_source_type_id", 1], ["servings", 3], ["source", "aaa"], ["time", 3], ["updated_at", Sun, 10 Jun 2012 13:43:12 UTC +00:00], ["visibility", 0]]
  SQL (0.9ms)  INSERT INTO "ingredients" ("created_at", "description", "element_id", "element_type", "order", "qty", "recipe_id", "unit_type_id", "updated_at", "user_entered_qty") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["created_at", Sun, 10 Jun 2012 13:43:13 UTC +00:00], ["description", "abc"], ["element_id", 9], ["element_type", "Recipe"], ["order", nil], ["qty", 2.0], ["recipe_id", nil], ["unit_type_id", 1], ["updated_at", Sun, 10 Jun 2012 13:43:13 UTC +00:00], ["user_entered_qty", "2 gramm"]] 
```

我之后要解决的另一个问题是 element_type 在这种情况下应该是 Food 而不是 recipe。我不确定在哪里设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:18:43.880

据我了解，一种成分既可以属于食物，也可以属于食谱。如果是这种情况，那么您的多态关联 Element 将负责这一点。

它将在您的成分表中创建 2 个字段，一个名为`element_type`and `element_id`，其中`element_type`将包含它与哪个表相关，并将包含所引用`element_id`表中记录的 id 。`element_type`

这会让你变得`belongs_to :recipe`多余。实际上，当您将成分分配给配方时，Rails 会为您填充“多态字段”，而不是填充 recipe_id，因为您已经告诉它通过设置来填充多态字段`:polymorphic => true`。

我希望这能解释你的困境。记住我告诉过你的内容，看看这个[RailsCast on Polymorphic Associations](http://railscasts.com/episodes/154-polymorphic-association)，事情应该会搞清楚。

希望我有所帮助。

# android - 进度条动画

> ID：10961933
> 
> 赞同：1
> 
> 时间：2012-06-09T14:46:32.360
> 
> 标签：android, animation, progress-bar

我想在一个 ProgressBar 中使用不同的动画。初始化和设置动画的代码：

```
progressBar = (ProgressBar) this.view.findViewById(R.id.progressBar);
progressBar.setIndeterminate(true);
progressBar.setIndeterminateDrawable(this.getResources().getDrawable(R.anim.progress_small)); 
```

当我只想要这段代码时，一切都运行良好，但是当我设置新动画时

```
 `progressBar.setIndeterminateDrawable(this.getResources().getDrawable(R.anim.progress_small))` 
```

它不起作用。如何使用一个 ProgressBar 来获得更多动画？`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:39:07.450

您正在从资源中检索动画`getDrawable()`。

我可能弄错了，但我认为除了非常快速地将进度更改为您想要的值之外，没有办法在进度条中“动画化”进度更改。[我为类似的问题](https://stackoverflow.com/questions/6097795/android-make-a-progress-bar-update-smoothly)编写了一些示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T06:29:02.603

```
progress.setProgressDrawable(getActivity().getResources().getDrawable(R.drawable.graph_blue_green));
ObjectAnimator anim = ObjectAnimator.ofInt(progress, "progress", 0, 5000);
anim.setDuration(1000);
anim.setInterpolator(new DecelerateInterpolator());
anim.start(); 
```

# java - pam 共享哈希

> ID：10961937
> 
> 赞同：2
> 
> 时间：2012-06-09T14:47:08.850
> 
> 标签：java, security, jaas, pam

我正在研究如何将 PAM 模块设计为我自己的 JAAS LoginModule 的指南。令我惊讶的一件事是，尽管用于访问散列密码的方法大多与散列方法本身正交，但我无法找到任何可以充分利用此属性的 PAM 模块。是因为我忽略了一些安全问题，还是只是一些尚未探索的问题？

为了进一步解释我的意思，假设我们有 3 种不同的方法来访问散列密码（LDAP、SQL、普通文件）和 2 种散列方法（MD5、SHA1）。目前，每种访问方法都有一个或多个 PAM 模块，每个模块都实现一种或多种这些散列方法。添加新的哈希方法（比如 BCrypt）意味着所有这些访问方法都需要修改以支持新的哈希类型。更好的设计是为每种访问方法使用一个 PAM 模块，使用用户名简单地检索散列密码，然后使用一组单独的 PAM 模块进行散列验证，并在模块之间共享散列值（如密码是）。因此，如果我使用数据库存储密码，并使用 MD5 验证密码，我的配置将如下所示：

```
password  required  pam_sql.so
password  required  pam_md5.so 
```

在此配置中，pam_sql 从数据库中检索散列密码（如果用户名不存在，则失败）。然后 pam_md5 将散列密码与要测试的密码进行比较，如果不匹配则失败。在使用 Bcrypt 的不同配置中，我只需将 pam_md5 替换为 pam_bcrypt，而无需等待 pam_sql 的开发人员将其更新为新的哈希方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T15:22:23.863

PAM 不了解密码散列或比较密码的方法（无论是否散列）。PAM 为模块提供了与用户进行“对话”的设施，即向他们提问并从他们那里得到答案。常见的问题当然是“你的用户名是什么？” 和“你的密码是什么？”，但它们不必是。对于所有 PAM 关心，某些模块可能会在决定身份验证过程的结果之前询问用户 5 个问题或一个问题。

您要求的是比 PAM 更低层的抽象，它为处理散列密码的 PAM 模块子集提供通用服务。

你有什么问题？您想实现这样的抽象并将其作为标准进行推广吗？

# c++ - C++ IPv6 端口问题

> ID：10961939
> 
> 赞同：0
> 
> 时间：2012-06-09T14:47:42.483
> 
> 标签：c++, networking, port, ipv6

好的 - 所以我正在尝试使用 C++ 为 IPv6 运行一个受欢迎的套接字。问题是每次我启动程序时它监听的端口似乎都会改变。

```
#include <iostream>
#include <stdlib.h>
#include <string>
#include <string.h>
#include <arpa/inet.h>

int main(int argc, char *argv[]){
  //Setting up the serverAddr:
  struct sockaddr_in6 serverAddr;
  memset((char *)&serverAddr, 0, sizeof(sockaddr_in6));
  serverAddr.sin6_family  = AF_INET6;     // IP6 is best current practise.
  serverAddr.sin6_addr    = in6addr_any;  // Don't care for interfaces.
  serverAddr.sin6_port    = htons(7979);  // FIXME change port later.
  //Opening the welcomeSocket:
  std::cout << "Opening socket:\t";
  int welcomeSocket = socket(AF_INET6, SOCK_STREAM, 0);
  if(welcomeSocket < 0){
    std::cout << "[FAIL]" << std::endl;
    return 1;
  }else{
    std::cout << "[ OK ]" << std::endl;
  }
  //Listening for clients:
  while(welcomeSocket >= 0){
    std::cout << "Listening for connections…" << std::endl;
    listen(welcomeSocket, 1);
    struct sockaddr_in6 clientAddr;
    memset((char *)&clientAddr, 0, sizeof(sockaddr_in6));
    int clientAddrLength = sizeof(clientAddr);
    int clientSocket = accept(welcomeSocket, (struct sockaddr*) &clientAddr, (socklen_t*) &clientAddrLength);
    char caddr[INET6_ADDRSTRLEN]; //caddr is not lisp here.
    inet_ntop(AF_INET6, &clientAddr, caddr, INET6_ADDRSTRLEN);
    std::cout << "Request from '" << caddr << "'" << std::endl;
    shutdown(clientSocket, SHUT_RDWR);
    clientSocket = -1;
    shutdown(welcomeSocket, SHUT_RDWR);
    welcomeSocket = -1;
  }
  return 0;
} 
```

我通过 g++ server.cpp -o server 编译代码，当我运行 ./server 时，我得到以下输出：

```
$ ./server 
Opening socket: [ OK ]
Listening for connections…
Request from 'a00:c158::' 
```

为了测试我运行 nmap 的代码：

```
$ nmap -6 -p 1-65535 ::1

Starting Nmap 5.21 ( http://nmap.org ) at 2012-06-09 16:43 CEST
Nmap scan report for ip6-localhost (::1)
Host is up (0.00023s latency).
Not shown: 65532 closed ports
PORT      STATE SERVICE
22/tcp    open  ssh
631/tcp   open  ipp
56160/tcp open  unknown

Nmap done: 1 IP address (1 host up) scanned in 1.41 seconds 
```

我想我忽略了一些简单的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T15:08:46.030

是的，我想你也是。在您可以将套接字用于任何事情之前，您必须进行一些其他调用。如果你想成为一个服务器，你必须调用`bind()`设置本地地址，并`listen()`通知操作系统这是一个服务器。然后你可以使用接受。有时候有点疼。

*   [绑定（2）手册页](http://linux.die.net/man/2/bind)
*   [听（2）手册页](http://linux.die.net/man/2/listen)
*   Beej.us 提供的关于 Linux/Unix/Winsock 编程的精彩[指南](http://beej.us/guide/bgnet/)。它提供了很好的示例，并以完全分类的 PDF 格式提供。

# javascript - 原型对象继承

> ID：10961941
> 
> 赞同：2
> 
> 时间：2012-06-09T14:48:03.050
> 
> 标签：javascript, oop, inheritance, prototype

我是[Codeyear](http://www.codecademy.com/)研究员，不幸的是没有解释原型对象的概念。我在谷歌上搜索并找到了[教程](http://helephant.com/2009/01/18/javascript-object-prototype/)。经过学习，我的理解是我们使用原型对象继承来节省内存并在对象之间共享公共属性。**我对吗 ？**如果是，你不认为下面的代码是*不好的做法*。由于汽车构造函数已经定义了价格、速度和 & getPrice，为什么我们需要再次定义相同的东西，因为我们使用了继承的概念。请解释 。下面是代码。

```
function Car( listedPrice ) {
    var price = listedPrice;
    this.speed = 0;

    this.getPrice = function() {
        return price;
    };
}

Car.prototype.accelerate = function() {
    this.speed += 10;
};

function ElectricCar( listedPrice ) {
    var price = listedPrice;
    this.speed = 0;

    this.getPrice = function() {
        return price;
    };
}

ElectricCar.prototype = new Car(); // Please also explain why car constructor 
                                   // is not thowing error since we are not passing
                                   // listedPrice parameter

myElectricCar = new ElectricCar(500);

console.log(myElectricCar instanceof Car); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T15:16:30.750

构造函数和原型是两个独立的概念。当您使用 应用原型继承时`ElectricCar.prototype = new Car();`，它仅继承对象及其原型上定义的方法，而不是构造函数本身。

您实际上可以通过一些快速`console.log()`调用看到它的工作方式：

```
console.log(ElectricCar);
console.log(ElectricCar.prototype);
console.log(ElectricCar.prototype.__proto__); 
```

这将返回：

```
[Function: ElectricCar]
{ speed: 0, getPrice: [Function] }
{ accelerate: [Function] } 
```

第一行是构造函数。

第二个是实际原型，`ElectricCar.prototype = new Car();`如上所述。请记住，在 , 的构造函数中`Car`设置了`this.speed`and `this.getPrice`，它解释了`ElectricCar.prototype.speed`和的值`ElectricCar.prototype.getPrice`。

可能最不明确的是最后一行，`ElectricCar.prototype.__proto__`. 这是原型的原型。`Car`objects 有一个`prototype`在其中`accelerate`定义的对象。该原型被复制到`ElectricCar`其内部`__proto__`属性中的原型。这称为[原型链接](https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_and_the_prototype_chain)。

因为构造函数不是原型的一部分，而原型是你继承的全部，所以构造函数`Car`已经被复制并粘贴到`ElectricCar`. 正如您所指出的，肯定有更清洁的方法可以做到这一点。这是一个替代方案：

```
function ElectricCar( listedPrice ) {
    Car.apply(this, arguments);
}

ElectricCar.prototype = new Car(); 
```

有关[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)更多详细信息，请参阅。

至于您的最后一个问题（为什么不`new Car()`抛出错误），正如其他答案所说，这就是 JavaScript 的工作方式。如果您为函数提供的参数少于它的参数，则任何未设置（可以这么说）的参数都将设置为`undefined`. 展示：

```
function returnMe(a) {
    return a;
}

console.log(returnMe(5));
console.log(returnMe(2+2));
console.log(returnMe());
console.log(returnMe(undefined)); 
```

这将返回：

```
5
4
undefined
undefined 
```

如您所见`undefined`，它实际上是一个可以传递的变量（如 中`returnMe(undefined)`）。有关这方面的更多信息，请参阅[`undefined`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/undefined)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T15:01:31.947

`getPrice``price`是在其外部范围内创建对 var的闭包的方法，有效地创建`price`一个私有成员，为每个不同的实例*分开*，只有这个函数可以访问。

构造函数不会抛出错误，因为在 JavaScript 中向函数提供参数从来都不是强制性的。您提供尽可能多的内容，只要有命名参数，首先从您提供的列表中分配给该名称。

# ruby-on-rails - Ruby - 如何将复选框中的值保存到数据库

> ID：10961942
> 
> 赞同：0
> 
> 时间：2012-06-09T14:48:03.793
> 
> 标签：ruby-on-rails, ruby, checkbox

我有一个值数组，例如：

```
- @colors.each do |color|
  = check_box_tag 'colors[]', color.id 
```

每次，当我从数据库表中的那些复选框更新值时，我都是这样做的：

```
 UserColor.delete_all(['user_id = ?'], current_user.id) #delete all user's rows

    unless params[:colors].nil?
      params[:colors].each do |color|
        UserColor.create(:user_id => current_user.id, :color_id => color)
      end
    end 
```

这是可行的解决方案，但我不太喜欢它。这就是为什么我想问你，你如何解决这个问题，如果不存在任何更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:35:46.853

我会在用户模型中定义一个方法

```
def update_colors!(new_color_ids)
    # get an array of the current color ids
    old_color_ids = user_colors.map(&:color_id)

    # destroy colors that appear in the old list but not in the new
    user_colors.where(color_id: old_color_ids - new_color_ids).destroy_all

    # add colors that appear in the new list but not in the old
    (new_color_ids - old_color_ids).each do |add_color_id|
        user_colors.create!(color_id: add_color_id)
    end
end 
```

从控制器，只需调用

```
 current_user.update_colors!(params[:colors]) 
```

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T15:36:11.637

```
class User
  has_many :colors, through: :user_colors
end 
```

在控制器中

```
if params[:colors]
  user = current_user
  user.color_ids = params[:colors]
  user.save
end 
```

或者你可以试试

```
current_user.update_attribute(:color_ids, params[:colors]) if params[:colors] 
```

# android - 在 Android 中处理 50 个 EditText 字段

> ID：10961944
> 
> 赞同：0
> 
> 时间：2012-06-09T14:48:18.240
> 
> 标签：android, sqlite, android-edittext

我想创建一个包含近 50 个编辑文本字段的 Android 应用程序。在按下提交按钮时，我应该将在编辑文本字段中输入的数据存储在 sqllite 中，并在按下检索按钮时检索存储在 sqllite 中的数据。

现在我不明白，如何处理上述 senerio 中的 50 个 EditText 字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:52:45.710

您应该以编程方式添加 EditText 并为每个 editText 设置 id 是更好的方法。

```
for(int i=0;i<50;i++){

     EditText et = new EditText(this);
     et.setId(i);  
     layout.addView(et,params);
} 
```

*   使用 EditText 的 id 从所有 editText 获取文本。并添加到 sqlite.and`also set id in sqlite using id of edittext and retrieve value from sqlite using id of edittext.`

# sql - 将过程输出参数传递给触发器主体

> ID：10961945
> 
> 赞同：0
> 
> 时间：2012-06-09T14:48:29.633
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试将过程的输出传递给触发器主体。下面是我对我认为可能是一个非常简单的答案的尝试。谢谢！

```
INSTEAD OF INSERT 
AS BEGIN
SET NOCOUNT ON; 

DECLARE @id INT, @num_ids INT; 
EXEC [dbo].[i14_get_ids] 2, 1, @id OUTPUT, @num_ids OUTPUT; 
INSERT dbo.tbl_Events(
Event_ID, Location_ID, Event_Group_ID, 
Protocol_Name, Start_Date, 
ObjectID
)
SELECT 
a.Event_ID, a.Location_ID, a.Event_Group_ID, 
a.Protocol_Name, a.Start_Date, 
b.ObjectID
From
(SELECT 
Event_ID, Location_ID, Event_Group_ID, 
Protocol_Name, Start_Date
--deosn't work    
--ObjectID as @id

    --**********************************
FROM inserted) AS a 
--doesn't work
    @id ;

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T15:45:50.710

你的语法有点不对劲。您在变量中有一个值，您不必为了访问它而组成一些表或别名。

```
ALTER TRIGGER dbo.Name_Of_Trigger_You_Left_Out
ON dbo.Name_Of_Table_You_Left_Out
INSTEAD OF INSERT 
AS 
BEGIN
   SET NOCOUNT ON; 

   DECLARE @id INT, @num_ids INT; 

   EXEC [dbo].[i14_get_ids] 2, 1, @id OUTPUT, @num_ids OUTPUT; 

   INSERT dbo.tbl_Events
   (
      Event_ID, Location_ID, Event_Group_ID, 
      Protocol_Name, Start_Date, ObjectID
   )
   SELECT 
      Event_ID, Location_ID, Event_Group_ID, 
      Protocol_Name, Start_Date, ObjectID = @id
   FROM inserted;
END
GO 
```

别名不是必需的`ObjectID =`，我只是想明确表明它是一个变量。您有`ObjectID as @id`-这是倒退的，您是在说“使用别名@id呈现列ObjectID”-您的真正意思是`@id AS ObjectID`-但同样，在这种情况下，它只是选择列表中包含的一个值，没有严格的需要在这里提供别名。

如果您打算仅依靠这种处理单行插入，您可能应该考虑通过`inserted`在继续之前检查行数来在触发器中强制执行该操作。仅仅因为应用程序逻辑受到限制并不意味着此触发器不会触发您的应用程序逻辑控制之外发生的插入，或者您的应用程序逻辑中永远不会出现错误。

**编辑**

如果请求的应用程序由其连接字符串标识为“我的酷应用程序”，则完全绕过逻辑：

```
ALTER TRIGGER dbo.Name_Of_Trigger_You_Left_Out
ON dbo.Name_Of_Table_You_Left_Out
INSTEAD OF INSERT 
AS 
BEGIN
   SET NOCOUNT ON; 

  IF NOT EXISTS 
  (
    SELECT 1 FROM sys.dm_exec_sessions 
    WHERE session_id = @@SPID
    AND program_name = 'My Cool Application'
  )
  BEGIN
    DECLARE @id INT, @num_ids INT; 

    EXEC [dbo].[i14_get_ids] 2, 1, @id OUTPUT, @num_ids OUTPUT; 

    INSERT dbo.tbl_Events
    (
       Event_ID, Location_ID, Event_Group_ID, 
       Protocol_Name, Start_Date, ObjectID
    )
    SELECT 
       Event_ID, Location_ID, Event_Group_ID, 
       Protocol_Name, Start_Date, ObjectID = @id
    FROM inserted;
  END
END
GO 
```

或者，如果它是通过登录识别的，你可以检查`IF SUSER_SNAME() <> 'MyMultiRowLogin'`或类似的东西......

# hibernate - 查询 Grails 域类导致 Hibernate QueryException

> ID：10961950
> 
> 赞同：0
> 
> 时间：2012-06-09T14:49:15.763
> 
> 标签：hibernate, grails

我在执行此代码时遇到问题 org.hibernate.QueryException: could not resolve property

```
def show = {
    def results = PM.createCriteria().list() {
        eq("id_car_info", params.id.toLong())
    }
    def vehicleInfoInstance = VehicleInfo.get(params.id)
    if (!vehicleInfoInstance) {
        flash.message = "${message(code: 'default.not.found.message', args: [message(code: 'vehicleInfo.label', default: 'VehicleInfo'), params.id])}"
        redirect(action: "list")
    } else {
        [vehicleInfoInstance: vehicleInfoInstance, results:results]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T16:05:55.753

您正在查询的域类（具有奇怪的名称`PM`）没有属性`id_car_info`。这就是 Hibernate 告诉你的，但它是个例外。

*请记住在 StackOverflow 上发布时提供更多代码和完整的异常。它可以帮助其他人为自己的问题找到解决方案，并更容易为您提供更好的答案。*

# iphone - 如何在 UIButton 上创建通知

> ID：10961951
> 
> 赞同：1
> 
> 时间：2012-06-09T14:49:19.893
> 
> 标签：iphone, ios, xcode, notifications, uibutton

我是 iOS 编程的新手。我想把通知放在上面`UIbutton`（例如在它的角落显示点击计数），很快它就会通知一些在`UIButton`.

可能吗？请给出一些想法或一些简短的代码，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:08:26.453

Flex_Addicted 在我的问题中分享该链接，我想在这里分享更明显。在该示例中，准确显示了我的要求，只需在项目中添加 h 和 m 文件就很容易了。[如何将徽章添加到标准 UIButton？](https://stackoverflow.com/questions/4722669/how-can-i-add-a-badge-to-a-standard-uibutton)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T02:07:39.440

在头文件中添加

```
 {
  IBOutlet UIButton *counterbutton;
  }

  -(IBAction)pushed:(id)sender; 
```

在 .m 文件中的 int 计数；

```
 -(IBAction)pushed:(id)sender
 {
    count = count + 1;
    counterbutton.text = [NSString stringWithFormat:@"count is %i",count];
 } 
```

在界面构建器中，将按钮连接到 IBAction 和 IBOutlet 的视图控制器。

# java - 替换方括号java

> ID：10961957
> 
> 赞同：4
> 
> 时间：2012-06-09T14:50:05.220
> 
> 标签：java, replace, brackets

我想用java中的“”替换方括号中的文本：

例如我有句子

`"Hello, [1] this is an example [2], can you help [3] me?"`

它应该变成：

“你好，这是一个例子，你能帮帮我吗？”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T14:52:19.107

```
String newStr = str.replaceAll("\\[\\d+\\] ", ""); 
```

这样做是用空字符串替换所有出现的正则表达式。

正则表达式是这样的：

```
\\[  // an open square bracket
\\d+ // one or more digits
\\]  // a closing square bracket
     // + a space character 
```

这是第二个版本（不是 OP 要求的，而是更好地处理空白）：

```
String newStr = str.replaceAll(" *\\[\\d+\\] *", " "); 
```

这样做是用一个空格字符替换所有出现的正则表达式。

正则表达式是这样的：

```
 *   // zero or more spaces
\\[  // an open square bracket
\\d+ // one or more digits
\\]  // a closing square bracket
 *   // zero or more spaces 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T14:52:31.530

这应该有效：

```
.replaceAll("\\[.*?\\]", "").replaceAll(" +", " "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T11:07:51.783

请用这个，

```
String str = "[How are you]";
str = str.replaceAll("\\[", "").replaceAll("\\]",""); 
```

# matlab - 在 Matlab 中的 .txt 文件的第一行添加“x,y,z”

> ID：10961959
> 
> 赞同：0
> 
> 时间：2012-06-09T14:50:13.030
> 
> 标签：matlab, file-io

我正在使用将坐标写入文本文件的 Matlab 代码，如下所示：

```
838959.41800,4713239.59000,1.00000,841305.41800,4708452.59000,1.00000,839175.41800,4712582.59000,1.00000 
```

过去，我必须单独打开每个文件并将以下内容添加到 .txt 文档的第一行：

```
x,y,z,
838959.41800,4713239.59000,1.00000,841305.41800,4708452.59000,1.00000,839175.41800,4712582.59000,1.00000 
```

`x,y,z,`关于如何通过嵌入将“ ”写入Matlab输出的第一行的代码来自动化这个过程的任何想法？

非常感谢，

-亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:59:12.720

这是一个例子：

```
x = rand(1,3);
y = rand(1,3);
z = rand(1,3);

fid = fopen('data.txt','wt');
fprintf(fid, 'x,y,z,\n');
fprintf([repmat('%.6f,',[1 8]) '%.6f\n'], x,y,z)
fclose(fid); 
```

输出文件：

### 数据.txt

```
x,y,z,
0.694829,0.317099,0.950222,0.034446,0.438744,0.381558,0.765517,0.795200,0.186873 
```

# node.js - 使用 knox 和 nodejs 在 Amazon S3 中打开服务器端加密并获取对象版本

> ID：10961962
> 
> 赞同：0
> 
> 时间：2012-06-09T14:50:40.830
> 
> 标签：node.js, amazon-s3, knox-amazon-s3-client

到目前为止，我已经能够成功地使用 node.js、express 和 knox 在 Amazon S3 中添加/更新/删除/检索对象。试图将事情提升到一个新的水平我试图弄清楚如何使用诺克斯（如果可能的话）做两件事：

1) 设置对象在添加/更新对象时使用服务器端加密。

2) 获取对象的特定版本或获取对象的版本列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T18:26:51.010

我知道这是一个老问题，但是可以通过指定标头使用服务器端加密使用 knox 上传文件：

```
client.putFile('test.txt', '/test.txt', {"x-amz-server-side-encryption": "AES256"}, function(err, res) {
    //Do something here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:30:36.377

安迪（写了 AwsSum）在这里。

使用 AwsSum，当您放置一个对象时，只需将“ServerSideEncryption”设置为您想要的值（目前 S3 仅支持“AES256”）。简单的！:)

例如

```
var body = ...; // a buffer, a string, a stream

var options = {
    BucketName    : 'chilts',
    ObjectName    : 'my-object.ext',
    ContentLength : Buffer.byteLength(body),
    Body          : body,
    ServerSideEncryption : 'AES256'
};

s3.PutObject(options, function(err, data) {
    console.log("\nputting an object to pie-18 - expecting success");
    console.log(err, 'Error');
    console.log(data, 'Data');
}); 
```

# angularjs - 如何在 AngularJS 中访问 c ookie？

> ID：10961963
> 
> 赞同：237
> 
> 时间：2012-06-09T14:50:48.053
> 
> 标签：angularjs, angular-cookies

AngularJS 访问 cookie 的方式是什么？我已经看到了对 cookie 的服务和模块的引用，但没有示例。

有，还是没有 AngularJS 规范的方法？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-06-11T18:47:24.847

此答案已更新以反映最新的稳定 angularjs 版本。一个重要的注意事项是`$cookieStore`周围有一层薄薄的包装纸`$cookies`。它们几乎相同，因为它们仅适用于会话 cookie。虽然，这回答了最初的问题，但您可能希望考虑其他解决方案，例如使用 localstorage 或 jquery.cookie 插件（这将为您提供更细粒度的控制并执行服务器端 cookie。当然，在 angularjs 中这样做意味着您可能希望将它们包装在服务中并用于`$scope.apply`通知模型更改的角度（在某些情况下）。

另一个注意事项是，根据您是用于`$cookie`存储值还是`$cookieStore`. 当然，您真的想使用其中一个。

除了添加对 js 文件的引用之外，您还需要将其注入`ngCookies`到您的应用定义中，例如：

```
angular.module('myApp', ['ngCookies']); 
```

然后你应该很高兴。

这是一个功能最小的示例，我在其中展示了它`cookieStore`是 cookie 的薄包装：

```
<!DOCTYPE html>
<html ng-app="myApp">
<head>
   <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
</head>
<body ng-controller="MyController">

  <h3>Cookies</h3>
  <pre>{{usingCookies|json}}</pre>
  <h3>Cookie Store</h3>
  <pre>{{usingCookieStore|json}}</pre>

  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular-cookies.js"></script>
  <script>
    angular.module('myApp', ['ngCookies']);
    app.controller('MyController',['$scope','$cookies','$cookieStore', 
                       function($scope,$cookies,$cookieStore) {
      var someSessionObj = { 'innerObj' : 'somesessioncookievalue'};

    $cookies.dotobject = someSessionObj;
    $scope.usingCookies = { 'cookies.dotobject' : $cookies.dotobject, "cookieStore.get" : $cookieStore.get('dotobject') };

    $cookieStore.put('obj', someSessionObj);
    $scope.usingCookieStore = { "cookieStore.get" : $cookieStore.get('obj'), 'cookies.dotobject' : $cookies.obj, };
    }
  </script>

</body>
</html> 
```

步骤是：

1.  包括`angular.js`
2.  包括`angular-cookies.js`
3.  注入`ngCookies`您的应用程序模块（并确保您在`ng-app`属性中引用该模块）
4.  向控制器添加`$cookies`或`$cookieStore`参数
5.  使用点 (.) 运算符访问 cookie 作为成员变量 -- 或 --
6.  `cookieStore`使用 put/get 方法访问

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-04-04T17:18:43.630

这是您可以设置和获取 cookie 值的方式。当我发现这个问题时，这就是我最初寻找的。

注意我们使用`$cookieStore`而不是`$cookies`

```
<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <script src="http://code.angularjs.org/1.0.0rc10/angular-1.0.0rc10.js"></script>
  <script src="http://code.angularjs.org/1.0.0rc10/angular-cookies-1.0.0rc10.js"></script>
  <script>
    angular.module('myApp', ['ngCookies']);
    function CookieCtrl($scope, $cookieStore) {
      $scope.lastVal = $cookieStore.get('tab');

      $scope.changeTab = function(tabName){
          $scope.lastVal = tabName;
          $cookieStore.put('tab', tabName);
      };
    }
  </script>
</head>
<body ng-controller="CookieCtrl">
    <!-- ... -->
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2015-05-12T21:54:43.200

Angular在 1.4.x 版本中**已弃用** ，因此如果您使用的是最新版本的 Angular，请改用。&的语法保持不变： `$cookieStore``$cookies``$cookieStore``$cookies`

```
$cookies.put("key", "value"); 
var value = $cookies.get("key"); 
```

有关API 概述，请参阅[文档。](https://docs.angularjs.org/api/ngCookies/service/$cookies)还请注意，cookie 服务已通过一些新的重要功能得到增强，例如设置过期（请参阅[此答案](https://stackoverflow.com/a/28854854/1446845)）和域（请参阅[CookiesProvider 文档](https://docs.angularjs.org/api/ngCookies/provider/$cookiesProvider#defaults)）。

请注意，在 1.3.x 或更低版本中，$cookies 的语法与上述不同：

```
$cookies.key = "value";
var value = $cookies.value; 
```

此外，如果您使用的是 bower，请确保正确输入您的包名称：

```
bower install angular-cookies@X.Y.Z 
```

其中 XYZ 是您正在运行的 AngularJS 版本。bower“angular-cookie”中还有另一个包（没有“s”），它不是官方的 angular 包。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-07-11T15:47:22.930

仅供参考，我使用`$cookieStore`两个控制器 a`$rootScope`和 AngularjS 1.0.6 组合了一个 JSFiddle。如果你在搞乱这个，它在 JSFifddle 上作为[http://jsfiddle.net/krimple/9dSb2/作为基础......](http://jsfiddle.net/krimple/9dSb2/)

它的要点是：

**Javascript**

```
var myApp = angular.module('myApp', ['ngCookies']);

myApp.controller('CookieCtrl', function ($scope, $rootScope, $cookieStore) {
    $scope.bump = function () {
        var lastVal = $cookieStore.get('lastValue');
        if (!lastVal) {
            $rootScope.lastVal = 1;
        } else {
            $rootScope.lastVal = lastVal + 1;
        }
        $cookieStore.put('lastValue', $rootScope.lastVal);
    }
});

myApp.controller('ShowerCtrl', function () {
}); 
```

**HTML**

```
<div ng-app="myApp">
    <div id="lastVal" ng-controller="ShowerCtrl">{{ lastVal }}</div>
    <div id="button-holder" ng-controller="CookieCtrl">
        <button ng-click="bump()">Bump!</button>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-06-09T20:40:35.800

[http://docs.angularjs.org/api/ngCookies.$cookieStore](http://docs.angularjs.org/api/ngCookies.%24cookieStore)

确保包含[http://code.angularjs.org/1.0.0rc10/angular-cookies-1.0.0rc10.js](http://code.angularjs.org/1.0.0rc10/angular-cookies-1.0.0rc10.js)以使用它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-02T03:19:41.867

AngularJS 提供了 ngCookies 模块和 $cookieStore 服务来使用浏览器 Cookie。

我们需要添加 angular-cookies.min.js 文件来使用 cookie 功能。

这是AngularJS Cookie的一些方法。

*   获取（键）；// 此方法返回给定 cookie 键的值。

*   获取对象（键）；//此方法返回给定cookie键的反序列化值。

*   得到所有（）; //此方法返回一个包含所有cookie的键值对象。

*   放（键，值，[选项]）；//此方法为给定的cookie键设置一个值。

*   删除（键，[选项]）；//此方法删除给定的cookie。

**例子**

**html**

```
<!DOCTYPE html>
<html ng-app="myApp">
<head>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.1/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.1/angular-cookies.min.js"></script>
</head>
<body ng-controller="MyController">
{{cookiesUserName}} loves {{cookietechnology}}.
</body>
</html> 
```

**JavaScript**

```
var myApp = angular.module('myApp', ['ngCookies']);
myApp.controller('MyController', ['$scope', '$cookies', '$cookieStore', '$window', function($scope, $cookies, $cookieStore, $window) {
$cookies.userName = 'Max Joe';
$scope.cookiesUserName = $cookies.userName;
$cookieStore.put('technology', 'Web');
$scope.cookietechnology = $cookieStore.get('technology'); }]); 
```

我已从[http://www.tutsway.com/simple-example-of-cookie-in-angular-js.php](http://www.tutsway.com/simple-example-of-cookie-in-angular-js.php)参考。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-30T06:01:11.623

添加 angular cookie 库：angular-cookies.js

您可以将 $cookies 或 $cookieStore 参数用于相应的控制器

主控制器添加此注入“ngCookies”：

```
angular.module("myApp", ['ngCookies']); 
```

像这样在控制器中使用 Cookie：

```
 app.controller('checkoutCtrl', function ($scope, $rootScope, $http, $state, $cookies) { 

//store cookies

 $cookies.putObject('final_total_price', $rootScope.fn_pro_per);

//Get cookies

 $cookies.getObject('final_total_price'); } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-10T20:56:14.833

最初接受的答案提到[jquery.cookie plugin](https://github.com/carhartl/jquery-cookie)。几个月前，它被重命名为[js-cookie](https://github.com/js-cookie/js-cookie)并删除了 jQuery 依赖项。原因之一只是为了便于与其他框架集成，比如 Angular。

现在，如果你想将[js-cookie](https://github.com/js-cookie/js-cookie)与 angular 集成，就像这样简单：

```
module.factory( "cookies", function() {
  return Cookies.noConflict();
}); 
```

就是这样。没有 jQuery。没有 ngCookies。

* * *

您还可以创建自定义实例来处理以不同方式编写的特定服务器端 cookie。以 PHP 为例，它将`服务器端的空格转换为加号`+`，而不是对其进行百分比编码：`

 ````
module.factory( "phpCookies", function() {
  return Cookies
    .noConflict()
    .withConverter(function( value, name ) {
      return value
            // Decode all characters according to the "encodeURIComponent" spec
            .replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
            // Decode the plus sign to spaces
            .replace(/\+/g, ' ')
    });
}); 
```

自定义 Provider 的用法是这样的：

```
module.service( "customDataStore", [ "phpCookies", function( phpCookies ) {
  this.storeData = function( data ) {
    phpCookies.set( "data", data );
  };
  this.containsStoredData = function() {
    return phpCookies.get( "data" );
  }
}]); 
```

我希望这对任何人都有帮助。

请参阅此问题中的详细信息：[https ://github.com/js-cookie/js-cookie/issues/103](https://github.com/js-cookie/js-cookie/issues/103)

有关如何与服务器端集成的详细文档，请参见此处：[https ://github.com/js-cookie/js-cookie/blob/master/SERVER_SIDE.md](https://github.com/js-cookie/js-cookie/blob/master/SERVER_SIDE.md)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-20T15:20:10.047

这是一个使用 $cookies 的简单示例。单击按钮后，cookie 被保存，然后在页面重新加载后恢复。

应用程序.html：

```
<html ng-app="app">
<head>
    <meta charset="utf-8" />
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.3/angular.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.6.3/angular-cookies.js"></script>
    <script src="app.js"></script>
</head>
<body ng-controller="appController as vm">

    <input type="text" ng-model="vm.food" placeholder="Enter food" />

    <p>My favorite food is {{vm.food}}.</p>

    <p>Open new window, then press Back button.</p>
    <button ng-click="vm.openUrl()">Open</button>
</body>
</html> 
```

应用程序.js：

```
(function () {
    "use strict";

    angular.module('app', ['ngCookies'])
    .controller('appController', ['$cookies', '$window', function ($cookies, $window) {
        var vm = this;

        //get cookie
        vm.food = $cookies.get('myFavorite');

        vm.openUrl = function () {
            //save cookie
            $cookies.put('myFavorite', vm.food);
            $window.open("http://www.google.com", "_self");
        };
    }]);

})(); 
````

# php - 将数据插入多个表 PHP MySQL

> ID：10961967
> 
> 赞同：3
> 
> 时间：2012-06-09T14:51:35.170
> 
> 标签：php, mysql, dataset

我有一个用于存储食谱的基本数据结构。它由以下三个表组成：

**表 1 - 食谱（recipe_id、recipe_name）**

**表 2 - 成分（ingredient_id、成分名称）**

**表 3 - Recipe_Ingredients (recipe_id, ingredients_id)**

我在添加新配方时遇到了一个问题，想知道插入的最佳做法。

目前，在提交我插入到**Recipes**表中的表单时，recipe_id 是自动生成的。然后我插入到**成分**表中，再次自动生成成分 ID。提交的第三步是然后插入到**Recipe_Ingredients**表中，但是我如何获取刚刚创建的食谱和成分 ID 的值以便将它们插入到**Recipe_Ingredients**表中？

我目前有单独的 PHP 函数可以插入到**食谱**和**成分**表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:57:24.130

您必须在每次插入操作后获取插入的 id 值。

获取最后插入id的函数是：[mysql_insert_id()](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:57:26.413

`mysql_insert_id()`将为您提供刚刚插入的行的自动生成的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T15:00:33.857

在每次插入之后，`mysql_insert_id()`我想，所以它会取回前一个插入的插入 id。

# android - 如何更改我有权访问特定文件夹的 ftp 代码

> ID：10961968
> 
> 赞同：-1
> 
> 时间：2012-06-09T14:51:54.273
> 
> 标签：android, ftp

我正在开发一个 FTP 项目，将相机拍摄的照片发送到 FTP 服务器。

现在有可能，我的图片将保存在文件夹中：/sdcard/ftp/

我必须如何更改我的 FTPActivity 中的代码，以便发送文件夹中的文件？

希望有人能给我举个例子。或发布更改的代码。这对我很有帮助。

这是我的 FTP 客户端代码：

```
package de.android.datenuebertragung;

import java.io.ByteArrayInputStream;
import java.io.IOException;

import org.apache.commons.net.ftp.FTPClient;

import android.app.Activity;
import android.util.Log;

public class FTPManager extends Activity{
    FTPClient con = new FTPClient();{

    try
    {
        con.connect("host");
        if (con.login("user", "password"))
        {

            con.enterLocalPassiveMode(); // important!
            String data = "Test 09.06.2012";
            ByteArrayInputStream in = new ByteArrayInputStream(data.getBytes());
            boolean result = con.storeFile("/FTPTest.txt", in);
            in.close();
            if (result) Log.v("upload result", "succeeded");
            System.out.println("Test ok ..."); 

        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    try
    {
        con.logout();
        con.disconnect();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:26:08.077

这是伪代码。我没有测试过语法或任何错误。

```
// in application never use hardcoded paths
File folder = new File("/sdcard/ftp/");
File tempFile = null;
FTPFile[] tempFTPFile = null;

//get all files in folder
for(String fileInDir : folder.list()){
    tempFile = new File(fileInDir);
    tempFTPFile = ftpConnection.listNames(tempFile.getName);

    if(tempFTPFile!=null || tempFTPFile.length<=0){
        ftpConnection.upload(fileInDir);
    }
} 
```

# database - 如何在 Google AppEngine 上使用 JDBC

> ID：10961969
> 
> 赞同：1
> 
> 时间：2012-06-09T14:51:54.173
> 
> 标签：database, google-app-engine, jdbc, relational-database

我有一个使用 JDBC 来操作其数据的应用程序。我正在寻找一种在 Appengine 上运行应用程序的方法。不幸的是，除了数据存储（我只是无法习惯）之外，似乎没有太多选择。

我尝试使用嵌入式 JavaDB，但 Appengine 阻止了 FileOutputStream（在初始驱动程序加载时抛出异常“java.io.FileOutputStream 是一个受限类”）。因此，我没有尝试过 Sqlite。

我还尝试使用 Jiql，这是一个为 Datastore 提供 JDBC 接口的新项目。但是，我似乎无法建立“连接”。尽管他们网站上的示例很少，但我有点不清楚如何使用 jiql（例如：您提供什么用户/通行证？）。

我查看了 Google Cloud SQL 并最终注册了它。这似乎是我们问题的完美解决方案，直到我意识到这是一项付费服务​​（一旦离开测试阶段，它将很快支付）。我宁愿不付钱（还），因为我仍在测试和评估 GAE 的潜力。

--

你会推荐什么，记住想将 JDBC 用于应用程序的持久层？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T00:30:51.617

GAE 支持两个持久性框架，JPA 和 JDO。很少有框架可以很好地与像[Objectify](http://code.google.com/p/objectify-appengine/)这样的 GAE 规则配合使用。但要从数据存储开始，您也可以在 google 教程[GAE DATASTORE](https://developers.google.com/appengine/docs/java/datastore/)中学习。如果您需要了解与 JPA 的关系以及对 JDBC 持久性的支持，请查看此[链接](https://stackoverflow.com/questions/2560500/hibernate-or-jpa-or-jdbc-or)

# playframework - 播放框架 WS 执行异常 [IOException: Remotely Closed [id: 0x46, /localhost:port :> remote-hostname/remote-ipAddress:remote-port id]]

> ID：10961970
> 
> 赞同：3
> 
> 时间：2012-06-09T14:51:56.010
> 
> 标签：playframework

Play 应用程序工作正常，但突然停止工作。我开始在浏览器中看到以下异常

执行异常

`[IOException: Remotely Closed [id: 0x4628a18a, /ipaddress:port :> remote-hostname/remote-ipaddress:remote-port]]`

在我的应用程序中，我使用 WS api 来调用远程机器的 rest api。

下面是完整的堆栈垃圾。

```
! @6aj8e9cd9 - Internal server error, for request [GET /] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[IOException: Remotely Closed [id: 0x4628a18a, /ipaddress:port :> remoteHostName/remoteIPaddress:port]]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.1]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.1]
    at akka.actor.Actor$class.apply(Actor.scala:311) [akka-actor.jar:2.0.1]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.1]
    at akka.actor.ActorCell.invoke(ActorCell.scala:619) [akka-actor.jar:2.0.1]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:196) [akka-actor.jar:2.0.1]
java.io.IOException: Remotely Closed [id: 0x4628a18a, /ipaddress:port :> remotehostname/remoteIPaddress:port]
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider.channelClosed(NettyAsyncHttpProvider.java:1352) ~[async-http-client.jar:na]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:93) ~[netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) ~[netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:777) ~[netty.jar:na]
    at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java:143) ~[netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) ~[netty.jar:na] 
```

我完全一无所知。寻求您的帮助。提前致谢。

# javascript - 将此代码重写为以缓动而不是淡入的方式飞行

> ID：10961972
> 
> 赞同：0
> 
> 时间：2012-06-09T14:52:14.167
> 
> 标签：javascript, jquery

如何重写这段代码，让它随着缓动而飞入，而不仅仅是淡入。

代码 -

```
jQuery('#swiftslider-slide-'+newSlide).addClass('active').fadeIn('300'); 
```

你能给我一个完整的例子吗？我知道我必须使用 .animate() 但如果我这样做 -

```
jQuery('#swiftslider-slide-'+newSlide).addClass('active').animate({opacity: "show"}, { duration: "slow", easing: "easein" });; 
```

它不起作用。

希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:34:37.580

谢谢，Sparky672。

> 它不起作用，因为默认情况下，jQuery 中没有像 easein 这样的东西。在不使用您自己的函数或插件的情况下，仅有的两个默认 jQuery 动画缓动选项是摇摆和线性。请参阅此问题以了解有关缓动函数的更多信息。

# jquery - 如何使用 jquery 设置日期选择器？

> ID：10961976
> 
> 赞同：-2
> 
> 时间：2012-06-09T14:52:29.007
> 
> 标签：jquery, jquery-ui

我正在尝试在开始日期和结束日期控件上使用 jquery 创建日期功能。我想选择开始日期，当在开始日期之前到达结束日期时，前一个日期将作为禁用我的代码如下。

```
$( "#" + TxtStrtDate,"#" + TxtExpDte" ).datepicker({
    defaultDate: "+1w",
    changeMonth: true,
    numberOfMonths: 3,
    onSelect: function( selectedDate ) {
        var option = this.id == "abc" ? "minDate" : "maxDate",

        instance = $( this ).data( "datepicker" ),
        date = $.datepicker.parseDate(
            instance.settings.dateFormat ||
        $.datepicker._defaults.dateFormat,
        selectedDate, instance.settings );

        dates.not( this ).datepicker( "option", option, date );
    }
}); 
```

请提出我的代码中的错误是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:59:32.627

假设`TxtStrtDate`和`TxtExpDte`是变量，那么您引用元素的方式是无效的。

**对此进行更新：**

```
$("#"+TxtStrtDate+", #"+TxtExpDte).datepicker({
...
}); 
```

[这个带有建议代码的小提琴](http://jsfiddle.net/zuul/PQfDc/)工作得很好！

[这个没有当前代码的小提琴](http://jsfiddle.net/zuul/PQfDc/1/)证明它不起作用！

* * *

**如果它们实际上是元素 ID，请使用：**

```
$("#TxtStrtDate, #TxtExpDte").datepicker({
...
}); 
```

请参阅此[工作小提琴](http://jsfiddle.net/zuul/PQfDc/2/)示例！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T15:05:51.523

由于您提到这些是服务器控件，因此我假设您使用的是 ASP.NET。如果是这种情况并且您使用的是 MasterPages，MasterPages 会破坏控件的 id，因此您必须执行以下操作：

```
$('#<%= TxtStrtDate.ClientID %>, #<%= TxtExpDte.ClientID %>').datepicker({
...
}); 
```

否则，您的选择器中有一个额外的 " 并且您的 id 需要在引号内，除非它们实际上是 javascript 变量：

```
$( "#" + TxtStrtDate,"#" + TxtExpDte" ) 
```

应改为：

```
$("#TxtStrtDate, #TxtExpDte")
// or if they are javascript variables
$("#" + TxtStrtDate + ", #" + TxtExpDte) 
```

**编辑**：

根据您的评论，您似乎想使用 jquery datepicker 的日期范围版本。为此，您必须执行以下操作：

```
$( "#TxtStrtDate" ).datepicker({
    defaultDate: "+1w",
    changeMonth: true,
    numberOfMonths: 3,
    onSelect: function( selectedDate ) {
        $( "#TxtExpDte" ).datepicker( "option", "minDate", selectedDate );
    }
});
$( "#TxtExpDte" ).datepicker({
    defaultDate: "+1w",
    changeMonth: true,
    numberOfMonths: 3,
    onSelect: function( selectedDate ) {
        $( "#TxtStrtDate" ).datepicker( "option", "maxDate", selectedDate );
    }
}); 
```

查看jquery ui 站点上的[日期范围演示以获取更多信息。](http://jqueryui.com/demos/datepicker/#date-range)

# java - Netbeans 7.1.2 JavaFX UnsatisfiedLinkError

> ID：10961980
> 
> 赞同：0
> 
> 时间：2012-06-09T14:52:45.057
> 
> 标签：java, netbeans, javafx, java-7

我刚刚将我的 Netbeans 升级到 7.1.2，因为我认为我会在一些 JavaFX 开发中大吃一惊，但是我没有很多乐趣。

首先，我下载了最新的 Netbeans 并安装了它，一切正常。

然后 Netbeans 告诉我我没有 JavaFX 支持，所以我从 Oracle 下载了 jdk-7 和 netbeans JavaFX 插件，现在我可以创建 JavaFX 应用程序了。

但是，每当我尝试编译 JavaFX 应用程序时，都会收到以下错误：

```
Error: failed to msvcr100.dll java.lang.UnsatisfiedLinkError: C:\Program Files (x86)\Java\JavaFX 2.1 Runtime\bin\msvcr100.dll: Can't find dependent libraries

Exception in thread "main" java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: C:\Program Files (x86)\Java\JavaFX 2.1 Runtime\bin\glass.dll: Can't find dependent libraries 
```

现在这两个提到的文件都存在，并且它们位于提到的位置，我假设问题与我的类路径和/或我之前的 Sun/Oracle Netbeans 安装有关。

我真的懒得卸载/重新安装我所有的 Java 东西，所以我想知道是否有人对如何解决这个问题有任何建议？

我读过的一些文章提到将某些 DLL 直接复制到项目工作区中，但这对我来说听起来不对。

任何意见或建议将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T15:30:52.043

右键单击您的 Netbeans 项目并单击“属性”。导航到“库”并确定当前项目使用哪个“Java 平台”（在下拉列表中选择一个）。点击附近的“Manage Platforms...”，选择确定的Java平台。转到 JavaFX 选项卡，然后检查 JavaFX 是否已启用并指向文件系统中正确的 SDK 和运行时路径。
还可以考虑重新启动 Netbeans 甚至 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:30:53.623

如果您使用的是 MacOS，即使安装了 Java 7，默认的 SDK 仍然是 Java 6，尽管可以激活 FX。只需添加JDK7，它应该可以解决问题。

# ruby-on-rails-3 - ActionMailer 在测试模式下发送真实电子邮件！- 如何关闭？

> ID：10961982
> 
> 赞同：23
> 
> 时间：2012-06-09T14:52:57.453
> 
> 标签：ruby-on-rails-3, actionmailer, rspec-rails, sendgrid

我的小应用程序的新注册用户必须得到管理员（我）的批准才能访问该站点。我已经成功地在我的用户模型中生成了这样的电子邮件`after_create :send_admin_email`，效果很好。我的问题是我在测试期间生成了多个用户（使用 FactoryGirl），并且创建的每个测试用户都会发送一封真实的电子邮件。运行我的测试就像在一月份倒糖蜜，我必须删除发送到我收件箱的数百封电子邮件。我该如何关闭它？

[Rails Guides](http://guides.rubyonrails.org/index.html)中的[Action Mailer Basics](http://guides.rubyonrails.org/action_mailer_basics.html)告诉我“默认情况下，Action Mailer 不会在测试环境中发送电子邮件。它们只是添加到 ActionMailer::Base.deliveries 数组中。”

此外，在`config/environments/test.rb`我有：

```
config.action_mailer.delivery_method = :test 
```

除此之外，`config/environment.rb`还有：

```
# Configuration for using SendGrid on Heroku
ActionMailer::Base.smtp_settings = {
  :address        => 'smtp.sendgrid.net',
  :port           => '587',
  :authentication => :plain,
  :user_name      => 'app[my app number]@heroku.com',
  :password       => '[something super secret]',
  :domain         => '[let's get this party started!.com]',
  :enable_starttls_auto => true
}
ActionMailer::Base.delivery_method = :smtp 
```

我确定我缺少一些简单而基本的东西。我已经四处搜索，相关的问题和帖子涉及如何测试 ActionMailer 实际发送的电子邮件。

提前对任何想法或帮助表示谦卑的感谢。

附录：以下对类似问题的回答[是否可以在开发中进行黄瓜测试时关闭 ActionMailer 电子邮件？](https://stackoverflow.com/questions/10609113/is-it-possible-to-turn-off-actionmailer-emails-when-cucumber-testing-is-happenin)我能够阻止电子邮件发送的疯狂。不过，我不得不添加`ActionMailer::Base.delivery_method = :test`到几个 rspec 文件。有没有办法可以在全球范围内关闭它？有人对发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-10T15:48:57.367

所以我想通了。将 config/environment.rb 中的行`ActionMailer::Base.delivery_method = :smtp`覆盖`ActionMailer::Base.delivery_method = :test`在 config/environments/test.rb 中。

因此，`ActionMailer::Base.delivery_method = :smtp'` 从 config/environment.rb 中删除该行并将其放在 config/environments/production.rb 中。这允许您放置`ActionMailer::Base.delivery_method = :test`在 config/environments/test.rb 和您想要的版本在 config/environments/development.rb 中。`:test`当我使用 Faker 填充我的数据库并将其更改为时，我制作了 development.rb ，`smtp`因此我确信真实的电子邮件是作为附加检查发送的。

**注意**：您必须重新启动服务器才能使这些更改生效。

**另一个注意事项**： [Heroku 当前的 SendGrid 指令](https://devcenter.heroku.com/articles/sendgrid)将 SendGrid Heroku 配置代码放在一个新的 config/initializers/mail.rb 文件中，这可能需要删除其最后一行并将所需的版本放置在每个 config/environments/[production.rb, development. rb，test.rb]

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-06-14T01:09:23.470

也许有用...

我的 config/environment.rb**不**包含`ActionMailer::Base.delivery_method = :smtp`，我的 config/environments/test.rb**确实**包含`ActionMailer::Base.delivery_method = :test`，但 Rails 在测试时仍然发送邮件。

我只是将以下内容添加到 config/environments/test.rb 来修复：

```
config.action_mailer.perform_deliveries = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-22T05:52:20.593

我在 Rails4.2（ActiveJob 与 ActionMailer 的集成）中遇到了类似的情况，即使我**没有**在 config/environment.rb 中编写 delivery_method = :smtp。

就我而言，这里的问题发生在使用“resque”作为后台工作人员之后。最后，我发现以下配置是**错误**的：

配置/初始化程序/active_job.rb：

```
Rails.application.config.active_job.queue_adapter = :resque   # here is WRONG 
```

...因为它也影响了测试模式。

所以，我只在 config/environments/{development,production.rb} 中设置了“queue_adapter = :resque”。现在，这按我的预期工作。

# fonts - CFDocument (CF9) 有人成功使用“FREE3OF9.TTF”（条形码字体）吗？

> ID：10961986
> 
> 赞同：1
> 
> 时间：2012-06-09T14:53:44.837
> 
> 标签：fonts, coldfusion, barcode, cfdocument

我正在尝试使用 CFDocument 创建带有条形码的 pdf。（条码字体已加载。可以在 CF 管理员中看到。）发现一大群人抱怨字体无法识别，但在任何地方都没有解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T15:05:36.343

好的，对于其他遇到此问题的人，这是我所做的：

> 我首先在服务器的控制面板“字体”应用程序中添加了字体。然后我在 CF 管理员中添加了字体。我注意到字体和字体系列都被列为“新”。我重新启动，当它出现时，它们仍然被列为“新”。我打开了 TTF 文件，查看名称实际列出的内容。然后我在我的css中使用了这个名字，就像“font-family:Free 3 of 9 Extended;”。有效。
> 
> 我现在可以使用 flashpaper 打印条形码标签。出于某种原因，PDF 仍然希望将所有内容都设为纵向，即使我指定了横向。

*（来自[http://www.mail-archive.com/cf-talk@houseoffusion.com/msg290047.html](http://www.mail-archive.com/cf-talk@houseoffusion.com/msg290047.html)）*

CF 将字体列为“free 3 of 9”（带空格）。确保在 cfdocument 中嵌入字体！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-02T16:06:17.843

在服务器控制面板（Windows）中添加字体。在 CF admin 字体管理中添加字体（在服务器设置下）。重启服务器（注意：不要跳过服务器的重启，否则它将不起作用）。以下是“免费 3 of 9 扩展”的工作示例代码

`<cfdocument format="pdf" filename="#expandpath('.')#\barcode.pdf" pagetype="letter" overwrite="yes" backgroundvisible="yes" margintop=".33" marginright=".33" marginbottom=".33" marginleft=".33" fontembed="yes"> <p style="font-family:Free 3 of 9 extended;font-size:75px;"> content here </p></cfdocument>`

# javascript - 如何使用 SpyOnEvent 通过 jquery-jasmine 监视事件

> ID：10961988
> 
> 赞同：3
> 
> 时间：2012-06-09T14:54:11.820
> 
> 标签：javascript, jquery, unit-testing, jasmine, jasmine-jquery

我正在使用[jQuery-Jasmine](https://github.com/velesin/jasmine-jquery)扩展来监视事件，但我无法获得正确的语法。

```
// Get a button
var $button = $( '#ai1ec_subscribe_users' );
// Call the function
utility_functions.block_all_submit_and_ajax( $button.get(0) );
// check that all submit are disabled
var first_multi = $( '.ai1ec-facebook-refresh-multiselect:first' );
spyOnEvent( '.ai1ec-facebook-refresh-multiselect:first', 'click' );
first_multi.click();
expect( 'click' ).toHaveBeenTriggeredOn( '.ai1ec-facebook-refresh-multiselect:first' ); 
```

这让我回来了

> 在 .ai1ec-facebook-refresh-multiselect:first 上触发了预期的事件点击

但我在检查前点击了它，所以我一定做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T16:20:48.983

问题是我没有以正确的方式触发事件。

这有效：

```
it( "Prevent all ajax functionality", function() {
        // Get a button
        var $button = $( '#ai1ec_subscribe_users' );
        // Call the function
        utility_functions.block_all_submit_and_ajax( $button.get(0) );
        // check that all submit are disabled
        spyOnEvent( $( '.ai1ec-facebook-refresh-multiselect:first' ), 'click' );
        $( '.ai1ec-facebook-refresh-multiselect:first' )[0].click();
        expect( 'click' ).toHaveBeenTriggeredOn( $( '.ai1ec-facebook-refresh-multiselect:first' ) );
} ); 
```

# mysql - 在mysql存储过程中执行保证和失败时回滚

> ID：10961990
> 
> 赞同：2
> 
> 时间：2012-06-09T14:54:36.073
> 
> 标签：mysql, sql, database, stored-procedures, consistency

**MySQL 存储过程**

```
DELIMITER $$

USE `RMS`$$

DROP PROCEDURE IF EXISTS `posTransactionEntry`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `posTransactionEntry`(OUT trxID INT)
BEGIN

DECLARE trxID INT;

INSERT INTO `RMS`.`transaction`
(`MemberID`,`UserID`,`Type`,`UID`)
VALUES (NULL,1,0,'56c54e5c-075d-458d-9845-cf410f8a60ec');

SET trxID=(SELECT ID FROM `transaction` WHERE `transaction`.`UID`='56c54e5c-075d-458d-9845-cf410f8a60ec');
INSERT INTO `RMS`.`transactionentry`
        (
         `TransactionID`,
         `ItemID`,
         `Quantity`,
         `Unitcost`,
         `Price`,
         `SoldPrice`,
         `ReasonID`)
VALUES (trxID,28,10,23.23,10,10,NULL);
UPDATE `transaction` SET `transaction`.`UID`=0 WHERE `transaction`.`ID`=trxID;

END$$

DELIMITER ; 
```

此存储过程中有四个语句。如果发生错误，我们如何找到是由于哪个语句错误而出现的，以及特定语句执行成功的原因。如果出现错误，我们如何知道哪个语句产生了错误，以及我们如何相应地回滚所有已执行的语句。

意味着一致性和保证，我们如何才能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:14:58.013

将您认为可以通过错误的每个语句放在一个`BEGIN and END`块中。

您可以捕获块中抛出的错误，并且可以分配一个变量来告诉您错误真正发生的位置。

`BEGIN and END`可以在[此处](http://dev.mysql.com/doc/refman/5.0/en/begin-end.html)找到文档和示例。

列表 `error codes`可以在[这里](http://dev.mysql.com/doc/refman/5.5/en/error-messages-server.html)找到。

`UPDATE`可以在[这里](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)找到知道语句更新了多少行的函数。

# ruby-on-rails - 使用 Git 和 Rails 进行自动部署，它是如何工作的？

> ID：10961993
> 
> 赞同：3
> 
> 时间：2012-06-09T14:55:10.283
> 
> 标签：ruby-on-rails, git, bitbucket

我在 bitbucket 中有一个 Git 存储库，在我的 live rails 服务器上有另一个，我怎样才能做到，所以每当我推送到 bitbucket 时，实时服务器也会从 bitbucket 中提取它？

我在网上找到了这个片段，我把它放在我的实时服务器的 git 钩子上`post-receive`，但我不知道下一步该怎么做：

```
#!/bin/sh
name=$1
if [ -z "$name" ] ; then
        echo "need to give name of checkout dir on command line"
        exit 1
fi

dir=/srv/web/$name
if [ ! -d $dir ] ; then
        echo "the directory $dir does not exist"
        exit 1
fi

cd $dir
env -i git pull
rake db:migrate
touch $dir/tmp/restart.txt 
```

谁能指出我应该怎么做才能做到这一点？我在 bitbucket 上看到过 post hooks（类似于 github），但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T00:40:52.827

### 分析

BitBucket 有许多[服务挂钩](https://confluence.atlassian.com/display/BITBUCKET/Managing+bitbucket+Services)，但我使用的没有一个明确用于触发部署脚本。[您可以使用BitBucket 代理 API](https://confluence.atlassian.com/display/BITBUCKET/Writing+Brokers+for+bitbucket)扮演自己的角色，但这通常不是正确的做法。

公认的智慧是使用来自持续集成的部署脚本，这样您只部署成功的构建。请注意，我说的是“部署”而不是“推送”，因为您无法推送到具有工作树的存储库。

[但是，如果没有持续集成、接收后挂钩或Capistrano](https://github.com/capistrano/capistrano/wiki)等部署工具，当然也可以触发 Rails 更新 。轮询是一种选择。

### 解决方案

虽然 post-receive 或 service hook 可以在提交时触发任意操作，但*最简单*的事情就是从您的 Web 服务器轮询 Git。例如，您可以每分钟运行一次 cron 作业，以将当前的 master 分支拉入您的 Web 根目录下的工作树中。

首先，安装并测试您的轮询脚本。我通常使用这个的变体：

```
#!/bin/bash
# Script:
#     git_poll.sh <appname>
# Purpose:
#     Poll your Rails repository for changes.

set -e

WEBROOT='/var/www'
MY_RAILS_APPNAME="$1"
shift

# Use the flock(1) utility to guard against long-running fetch or merge
# operations using the flock(2) system call. On Debian-based systems,
# this tool is found in the util-linux package.
(
    flock -n 9 

    cd "$WEBROOT/$MY_RAILS_APPNAME"
    git fetch origin master

    # Check if heads point to the same commit.
    if ! cmp --quiet <(git rev-parse master) <(git rev-parse origin/master)
    then
        git pull --force origin master
        touch "$WEBROOT/$MY_RAILS_APPNAME/tmp/restart.txt"
    fi
) 9> "/var/lock/polling4${MY_RAILS_APPNAME}" 
```

此脚本假设您使用的是[Phusion Passenger](http://www.modrails.com/)。如果您正在使用其他东西，您可能需要修改脚本以在 Git 从远程存储库中提取后执行一些其他操作。

接下来，确保脚本是可执行的。`chmod 755 /usr/local/bin/git_poll.sh`应该这样做。

最后，使用类似于以下内容的内容更新您的 Rails 用户或系统 crontab：

```
* * * * * /usr/local/bin/git_poll.sh example_app 
```

由于我们在脚本中使用独占锁定，所以每分钟轮询一次应该没问题。如果您不使用锁定，或者想减少系统负载，请在您的 crontab 中设置更长的轮询间隔。

就是这样！现在，当您从开发或 QA 推送到*源*时，您的 Rails 服务器应该会在一分钟左右内自行更新。这通常足以满足大多数目的，希望你也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T15:43:01.467

如果您希望在推送到 bitbucket 时发生事情，我认为您需要以某种方式使用他们的[经纪人支持](https://confluence.atlassian.com/display/BITBUCKET/Write+brokers+(hooks)+for+Bitbucket)。也许将更新的 refs 发布到服务器上的某些服务，这些服务会拉取、重置等。

但是如果你直接推送到你自己的服务器，你可以使用标准的 git post-receive 钩子。