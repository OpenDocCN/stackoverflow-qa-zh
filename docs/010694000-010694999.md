# StackOverflow 问答 10694000-10694999

# plsql - 在 plsql 上，触发器上的 NEW 变量的值不变

> ID：10694003
> 
> 赞同：1
> 
> 时间：2012-05-21T23:37:53.763
> 
> 标签：plsql, triggers, oracle11g

我正在使用数据表通过 Oracle Apex 实用程序加载数据。

我想创建一个触发器，从加载的数据中检查表上的值，然后根据它获得的内容进行更改。

该表有 4 列：id、name、email、type

要加载的数据是这样的：姓名、电子邮件、类型

现在我的触发器：

```
create or replace TRIGGER  BI_USER
before insert ON USER               
for each row  

declare
begin   
  if :NEW.ID is null then
    select USERID_SEQ.nextval into :NEW.ID from dual;
  end if;
 :NEW.TYPE := 'something else';
end; 
```

ID 很好用，它从序列中获取一个数字，但是 :new.type 不起作用，它不会改变。我还单独运行 SQL 插入，并且发生了同样的情况。

编辑：new.type 类型是 char(1)，我这样写只是为了测试，但它并没有改变......啊我对自己很失望，它在读取数据后抛出错误并且从不触发扳机。

我试图做的是它将具有 TYPE 列的名称，并将该表中的 id 放入 NEW.type

有没有办法改变新的类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T01:56:53.240

我明白你想做什么。您希望您的表接受包含不适合其中一个字段宽度的数据的插入记录，并且您希望使用触发器来“修复”数据以使其适合。

不幸的是，此触发器对您没有帮助，因为在触发触发器之前验证了数据。

解决此问题的另一种方法可能是使用带有替代触发器的视图。该视图将有一个基于长度为 9 的字符串的“TYPE”列；而不是触发器会将其转换为 CHAR(1) 以插入到基础表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:47:27.813

试试这个：

```
select 'something else' into :NEW.TYPE from dual; 
```

如果此语法适用于`ID`它也应该适用于`TYPE`

# c++ - 在 C++ 中识别文件类型

> ID：10694008
> 
> 赞同：3
> 
> 时间：2012-05-21T23:38:27.350
> 
> 标签：c++

我为这个问题实现了一个解决方案，它意味着跨平台并遵循 C++ 标准库。

```
bool isdir(const char *string) {
   ofstream file(string, ios::out);
   return file.fail();
} 
```

但是，如果该文件实际上是可写的，则程序会`string`在其工作目录中打开一个名称为空的文件。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:42:30.767

没有标准的方法来检测文件是否是 C++ 中的目录。但是您可以使用[Boost.Filesystem](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm)。它的便携性很好。

**编辑：**似乎这个问题已经在[这里](https://stackoverflow.com/a/328958/426288)得到了回答。

# ios - 将值作为参数从视图控制器传递给实体类的方法

> ID：10694010
> 
> 赞同：0
> 
> 时间：2012-05-21T23:38:36.027
> 
> 标签：ios, uitextfield, parameter-passing

我有一个带有 UITextField 的 ViewController。用户在 textField 中输入字符串，单击完成按钮，然后将该值传递给实体类中的方法。我知道我需要将此值作为参数传递，但我被卡住了。

我试图通过在完成按钮的 clickDone IBAction 末尾添加一个参数来传递此值，但没有成功。感谢您即使是最小的帮助或指出正确的方向。

```
- (IBAction)doneClicked:(NSString*) name {
...
} 
```

我尝试在我的实体类 h 文件中为 ViewController 创建一个 ivar，但 Xcode 询问“未知类型名称‘ViewController’；你的意思是 UIViewController 吗？

```
@interface EntityClass : NSManagedObject{
ViewController* refVC;
UITextField* textBox;
} 
```

然后使用

```
self.name = self.refVC.textBox.text; 
```

在我的实体类 m 文件中的方法中返回 NSString self.name

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T23:44:14.070

不要将 ViewController 传递给实体对象。相反，在您的 doneClicked 操作中更新实体对象的属性。

```
- (IBAction)doneClicked:(NSString *)name {
   myObject.name = name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T22:09:08.897

我想到了。这是我的最终代码。有用。不再需要帮助。

谢谢！

```
- (IBAction)doneClicked:(NSString*) name {
...

superClass.name = headingText.text;  //headingText is UITextField on ViewController

[superClass doSomething];
...
} 
```

# python - 使用组合框扩展 QGIS 插件生成器结果无法引用新对象

> ID：10694015
> 
> 赞同：0
> 
> 时间：2012-05-21T23:40:28.327
> 
> 标签：python, qt, qgis

我已经使用 Qt Creator 扩展了 Plugin builder 生成的 UI 文件。刚刚在表单中添加了一些复选框和一个名为 layercombo 的组合框。该应用程序名为 jacktest.py。它使用中间文件 jackdialog.py（从插件生成器生成，保持不变）。

编译了 UI 文件和资源文件。然后在插件中添加了一些代码并进行了测试。在 QMessagebox 中获取可用的层名称是没有问题的。但是如何将这些添加到组合框中？应该很简单，但没有选项成功引用组合框。

错误消息：AttributeError：jacktest 实例没有属性“layercombo”。

我最近尝试的结果：

```
# run method that performs all the real work
def run(self):

    # create and show the dialog
    dlg = jacktestDialog()
    # show the dialog
    dlg.show()
    result = dlg.exec_()
    for layer in self.iface.legendInterface().layers():
        if layer.type() == QgsMapLayer.VectorLayer:
           QMessageBox.information( self.iface.mainWindow(), "Info", layer.name())
           self.layercombo.Items.Insert(0, layer.name())
    # See if OK was pressed
    if result == 1:
        # do something useful (delete the line containing pass and
        # substitute with your code
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:05:06.143

当您设置 layercombo 项目时，您正在尝试引用当前类（这不是您的对话框）

代替：

```
self.layercombo.Items.Insert(0, layer.name()) 
```

和

```
dlg.ui.layercombo.Items.Insert(0, layer.name()) 
```

但是您的代码仍然无法正常工作，因为`exec_()`阻塞并等待它返回，因此您将项目添加到不可见的对话框中。

试试这个：

```
# create and show the dialog
dlg = jacktestDialog()
# show the dialog
for layer in self.iface.legendInterface().layers():
    if layer.type() == QgsMapLayer.VectorLayer:
       QMessageBox.information( self.iface.mainWindow(), "Info", layer.name())
       dlg.ui.layercombo.Items.Insert(0, layer.name())
result = dlg.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:45:12.337

继续在 run 模块中开发 Signal（代码：def run (self):)

QObject.connect(dlg.ui.layercombo,SIGNAL('currentIndexChanged (int)'),self.select_one)

select_one 的代码是：

```
def select_one(self):
    comboindex = dlg.ui.layercombo.currentIndex()
    QMessageBox.information(self.iface.mainWindow(), "Info", comboindex) 
```

错误信息：

comboindex = dlg.ui.layercombo.currentIndex() NameError: global name 'dlg' is not defined

假设我必须在函数调用中引用 dlg 作为参数，但这直到现在才起作用。

# ruby-on-rails - Ruby 1.9.3 和 Rails 3.2.2 序列化哈希不能反序列化

> ID：10694017
> 
> 赞同：1
> 
> 时间：2012-05-21T23:40:44.870
> 
> 标签：ruby-on-rails, hash, yaml, ruby-on-rails-3.2, ruby-1.9.3

基本上，我将 1.8.7@rails2 应用程序升级到 1.9.3@rails3.2

当尝试`.each_pair`在序列化哈希上使用时，我最终得到

```
syntax error, unexpected ',', expecting keyword_end
       @measure.coefficients.each_pair |key, value| 
```

当试图访问 rails 控制台来加载它时`measure.coefficients`，它给了我一个字符串。如果我`YAML.load(serialized_string)`按照以下答案 rails 错误的指示尝试在“psych”或“syck”中 运行[，则无法解析 YAML](https://stackoverflow.com/questions/4980877/rails-error-couldnt-parse-yaml)

我最终得到

```
ArgumentError: syntax error on line 21, col 5: `'
from /Users/user/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/syck.rb:135:in `load' 
```

使用“心理”引擎时的类似结果。有什么线索吗？

以下是字符串格式的哈希示例：

```
"--- !map:HashWithIndifferentAccess \n\"1092\": \"\"\n\"869\": \"\"\n\"1039\": \"\"\n\"2492\": \"\"\n\"1389\": \"\"\n\"1200\": \"\"\n\"600\": \"\"\n\"1928\": \"\"\n\"1767\": \"\"\n\"1498\": \"\"\n\"899\": \"\"\n\"711\": \"\"\n\"1124\": \"\"\n\"1312\": \"\"\n\"1500\": \"\"\n\"900\": \"\"\n\"1152\": \"\"\n\"1232\": \"\"\n\"1340\": \"\"\n\"1420\": \"\"\n\"123" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T23:59:54.407

当您实际打印该值时，它会产生：

```
--- !map:HashWithIndifferentAccess 
"1092": ""
"869": ""
"1039": ""
"2492": ""
"1389": ""
"1200": ""
"600": ""
"1928": ""
"1767": ""
"1498": ""
"899": ""
"711": ""
"1124": ""
"1312": ""
"1500": ""
"900": ""
"1152": ""
"1232": ""
"1340": ""
"1420": ""
"123 
```

这显然不是有效的 YAML，因为它以未终止的字符串结尾。

# java - 如果一个 ServerSocket 被垃圾回收，它的相关端口绑定会发生什么？

> ID：10694018
> 
> 赞同：3
> 
> 时间：2012-05-21T23:40:56.990
> 
> 标签：java, networking, serversocket

我想创建一个可以检测自身其他实例并阻止它们运行的​​应用程序。为了实现这一点，我正在考虑在某个特定于应用程序的端口上打开一个新`ServerSocket`端口，然后依靠如果我尝试多次绑定到同一个端口来“检测”并杀死重复的应用程序时应该抛出的异常实例。我知道我可以做一些事情，比如将一个文件写入当前工作目录并“检测”它以完成同样的行为，但我真的不想这样做（如果应用程序死了会发生什么） t 删除文件？），这就是我选择这`ServerSocket`条路线的原因。

假设我有以下代码：

```
public class MyClass{
    public static void main(String[] args) throws IOException{
        new ServerSocket(1234);

        new Thread(){
            //This is a non-daemon thread. Assume its run() method never returns.
        }.start();
    }
} 
```

**问题**

如果没有创建`ServerSocket`，我的应用程序永远不需要再次使用它，因为它的存在使我能够检测到我的应用程序的另一个实例何时尝试启动。因此，保存对 said 的引用`ServerSocket`将导致编译警告（未使用的引用）。我是一个整洁的怪胎，所以如果可以避免的话，我宁愿不保存参考。我的问题是，这个`ServerSocket`实例是否会在所有非守护线程退出之前被垃圾收集（假设应用程序没有失败或以其他方式退出），如果是这样，它的关联端口是否会因此变得未绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T00:19:15.910

我很困惑：你是一个“整洁的怪胎”，但宁愿让套接字关闭垃圾收集器的心血来潮，也不愿在正常退出的情况下在应用程序的控制下关闭程序？（我认为是这种情况，因为要建立这样的机制，您需要持有参考，从而消除您认为的问题。）

对于它的价值，如果您不坚持参考，我认为实际上不会有问题：

*   在内部，可能会在绑定套接字时保留引用
*   ServerSocket 的 close() 方法很可能会在垃圾收集时被调用。它在 AbstractPlainSocketImpl 的 finalize() 方法中调用，因此原则上会被调用，但不能保证任何 finalize 方法都会被实际调用。
*   如果应用程序异常终止，则无法*保证*套接字会立即解除绑定*，*尽管在最近的 O/S 上可能会（最好对此进行测试）。

但是，我真的建议为您的应用程序完全关闭的情况编写一个“干净的”关闭机制，为此您需要保留对套接字的引用。因此，我认为您确实在为自己发明一个问题，如果您只是使用明智的编程实践，那么这个问题就不需要存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:05:12.143

好吧，让我试着从我之前的错误理解中解脱出来。您提到的文件锁定和套接字技术被广泛使用，但还有另一种 - 有一个观察者将保留您的程序的当前实例（通过方法注册和注销）。

如果一个新实例尝试注册，而另一个实例正在运行，则注册过程将失败，您的应用程序可以正常关闭。

然后，您的应用程序可以实现一个 Observable 接口，该接口将包含一个方法 beObserved 以便您的观察者知道您的应用程序仍然存在。因此，如果您的应用程序崩溃，定期检查将失败，它会自动注销崩溃的应用程序。

# android - 如何在 Android 的 ServiceTestCase 中使用真正的 Application 对象

> ID：10694019
> 
> 赞同：3
> 
> 时间：2012-05-21T23:41:06.850
> 
> 标签：android, testing, servicetestcase

我正在尝试测试需要真实 Application 对象的服务，而不是 ServiceTestCase 提供的 MockApplication 。

如何在我的 ServiceTestCase 中创建一个真正的 Application 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:14:50.443

一个服务有两个固有的依赖关系，它的`Context`和它的关联的`Application`。该`ServiceTestCase`框架允许您注入这些依赖项，从而在隔离环境中执行具有受控依赖项的单元测试。

你不应该在你的测试中使用真实`Application`的，但如果你知道你在做什么，你可以使用[ServiceTestCase.setApplication()](http://developer.android.com/reference/android/test/ServiceTestCase.html#setApplication%28android.app.Application%29)注入它。

# php - PHP 矩阵在数组中向右、向下、向左、向上查看

> ID：10694022
> 
> 赞同：1
> 
> 时间：2012-05-21T23:41:35.817
> 
> 标签：php, arrays, multidimensional-array, matrix

我有一个 3x3 矩阵`PHP`：

```
2 4 6
5 4 7
8 5 7 
```

假设我在`[0,0]`元素上 2\. 将我在多维数组中的位置存储在变量 $current 中的最佳方法是什么？我正在考虑指针，但不确定如何在 PHP 中执行此操作。

```
$current = $data[0][0]; 
```

没有帮助，因为它不存储上下文。

其次，假设 $current 被存储，那么代码向右、向下、向左和向上查看（窥视）的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T23:44:56.910

PHP 中没有指针，您将无法对引用进行指针运算。

您可以使用[`next()`](http://php.net/next)and[`prev()`](http://php.net/prev)函数在数组中前进和后退，您可以使用它[`key()`](http://php.net/key)来找出您所在的位置。[`current()`](http://php.net/current)将返回存储在数组中当前位置的值（有点像取消引用指针）。

这些都在单一深度级别上工作，因此您无法在多维数组中找到位置。

使用多维数组的最佳方法可能是简单地存储和递增/递减标识数组中位置的 X 和 Y 值。由于 PHP 中的数组在内部实现为哈希，因此无论包含什么和包含什么，引用`$data[$x][$y]`都非常快。`$x``$y`

例如，如果您在矩阵中的当前位置是 (1, 1)，您可以有一个变量来存储它：

```
$current = ['x' => 1, 'y' => 1]; 
```

要找出那里存储的内容，请查看：

```
$x = $current['x'];
$y = $current['y'];
$data[$x][$y]; 
```

要找出该位置左上角存储的内容，您可以通过简单地从当前位置的坐标中减去 1 来获得该位置，然后查找该位置：

```
$x = $current['x'] - 1;
$y = $current['y'] - 1;
$data[$x][$y]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T23:46:14.490

只需使用单个值作为索引，并且`value % 3 = row`,`(int)(value / 3) = column`为您服务。往上减 3，往下加 3，左减 1，右加 1。还要确保你总是在边界上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T23:49:41.090

你能把你当前的位置存储为一个二元素数组吗？

```
$current = array(0,0) 
```

然后您将使用以下命令访问位置 $current 的变量：

```
$array[$current[0]][$current[1]] 
```

如果您正在遍历数组——我假设使用一对嵌套循环——您只需`$current[0]`在外循环中递增`$current[1]`并在内循环中递增（并在外循环中将其设置为零）。请注意，这会将您的“垂直”位置存储在 $current 的第一个元素中。如果您希望顺序像标准笛卡尔坐标一样是 (x,y)，只需反转这两个元素。

# php - 从 mysql_query 插入中获取结果

> ID：10694025
> 
> 赞同：2
> 
> 时间：2012-05-21T23:41:58.753
> 
> 标签：php, mysql

将值插入新行后，我需要该查询的结果。 `mysql_query()`仅在执行 INSERT 命令时返回 true 或 false。对于这样的事情，我能想到的唯一解决方案是在 PHP 中创建一个临时编号/ID 并将其插入到自己的列中。然后使用第二个命令获取该行。但是，我的随机 id 可能不够随机，以至于在多次执行脚本时不小心选择了错误的行。

有没有办法在`mysql_query()`调用时执行 INSERT 命令以返回创建的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T23:44:14.523

听起来您应该使用[`AUTO_INCREMENT`](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)and [`mysql_insert_id()`](http://us2.php.net/manual/en/function.mysql-insert-id.php)。`AUTO_INCREMENT`将自动为每一行创建一个唯一 ID，您可以使用`mysql_insert_id()`;

# cookies - 显示 Colorbox Onload 页面加载

> ID：10694028
> 
> 赞同：0
> 
> 时间：2012-05-21T23:42:21.733
> 
> 标签：cookies, colorbox, onload

我正在编写代码，该代码将为首次使用 ColorBox 的访问者发送消息。我一直在引导代码，这就是我到目前为止所拥有的......

```
<html>
<head>
<script type="text/javascript">
<script src="../colorbox/jquery.colorbox.js"></script>
<script type="text/javascript" src="scripts/jquery.cookies.2.2.0.min.js"></script>

<script>

function loadMsg()
{
$(document).ready(function(){
if ($.cookie('newsletter') != '0') {
$.colorbox({href:"newsletter.html"});
$.cookie('newsletter', '1', { expires: 60}); }
}}

</script>
</head>

<body onload="loadMsg()">
<h1>Hello World!</h1>
</body>
</html> 
```

这会阻止弹出窗口第二次出现。你能帮我弄清楚我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:15:38.800

你用什么插件做cookies？我怀疑 $.cookie('newsletter') 在不存在 cookie 时返回字符串值 '0' 。我想它会返回一个错误的值。你确定它不应该是这样的：

```
if (!$.cookie('newsletter')) {
    $.colorbox({href:"newsletter.html"});
    $.cookie('newsletter', '1', { expires: 60}); }
} 
```

或者删除 cookie 插件并编写您自己的 cookie 检测代码。像这样的一次性用例并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T17:52:00.620

上面的代码可能会吐出*不是函数*并且*是未定义*的错误。

这是今天应该可以使用的**更新代码**（请注意，我正在使用[jQuery Cookie 库](http://plugins.jquery.com/cookie/)）：

```
<html>
<head>

<script type="text/javascript" src="/js/colorbox/jquery.colorbox-min.js"></script>
<script type="text/javascript" src="/js/jquery-cookie/jquery.cookie.js"></script>

<script type="text/javascript">

    function loadMsg(){

        jQuery.noConflict();
        jQuery(document).ready(function(){
            if (!jQuery.cookie('popupcookie')) {
                jQuery.colorbox({href:"newsletter.html", width: 640, height: 460});
                jQuery.cookie('popupcookie', '1', { expires: 1}); }
        })}

</script>
</head>

<body onload="loadMsg()">
  <h1>Hello World!</h1>
</body>

</html> 
```

这应该让你继续前进。顺便说一句，在此示例中，到期时间设置为 1 天。

# ios - 向 UITableView 添加第二个后退按钮

> ID：10694035
> 
> 赞同：0
> 
> 时间：2012-05-21T23:43:28.797
> 
> 标签：ios, uitableview

我已经在左上角有自动生成的后退按钮，但我想添加一个 UIButton 在我的视图底部执行相同的操作。

那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T23:50:38.110

如果您使用的是 UINavigation 控制器，您可以注册一个按钮处理程序并添加代码

```
[[self navigationController] popViewControllerAnimated:YES]; 
```

这将提供与将视图添加到视图堆栈时生成的后退按钮相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T23:50:50.327

是的，只需将按钮连接到调用`[self.navigationController popViewControllerAnimated:YES]`（或`NO`，取决于您的意愿）的方法。

# asp.net - 资源修改未重新编译

> ID：10694036
> 
> 赞同：0
> 
> 时间：2012-05-21T23:43:32.293
> 
> 标签：asp.net, .net-3.5, resources, embedded-resource

我正在尝试对[此处](http://sourceforge.net/projects/teamlab/files/Teamlab%20v6.0/)可用的 TeamLab 应用程序进行一些小的更改，特别是版本 teamlab.v6.0.31115

我试图做的只是修改`Resource.resx`位于 App_GlobalResources 文件夹中的文件，但不幸的是无济于事。在应用程序内部，我试图修改的资源是这样访问的。

```
string ResourceValue = Resources.Resource.ResourceName; 
```

我只是通过 Visual Studio 导航到 resx 文件，进行了所需的更改并尝试运行该程序。但是，在我调试时没有出现任何更改，并且旧的资源值仍然出现。

我试图将当前设置为内容的资源文件构建操作更改为资源和嵌入式资源，但都没有帮助。我意识到这是一个非常广泛的问题，但我有点没有想法。任何人都可以就我可能做错的事情提供任何指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:49:38.297

事实证明，尽管 TeamLab 项目有一个资源文件，但它使用其数据库作为资源文本。

对于任何感兴趣的人来说，大部分资源文本都在一个名为 res_data 的表中

# c - 不使用递归或堆栈的树的后序遍历

> ID：10694037
> 
> 赞同：1
> 
> 时间：2012-05-21T23:43:41.870
> 
> 标签：c, algorithm

> **可能的重复：**
> [没有递归的二叉树的后序遍历](https://stackoverflow.com/questions/1294701/post-order-traversal-of-binary-tree-without-recursion)

我正在研究莫里斯的二叉树中的中序遍历算法。有人可以建议是否有一种方法可以在`postorder`不使用递归和堆栈的情况下进行遍历？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T23:54:04.227

您可以使用[线程树](http://en.wikipedia.org/wiki/Threaded_binary_tree)来执行此操作。以下是该方法的概述（取自[此处](http://gabrielistrate.weebly.com/uploads/2/5/2/6/2526487/curs7.pdf)— 参见幻灯片 31）：

*   后序：创建的虚拟节点，其根为左后代。
*   变量可用于检查当前操作的类型。
*   如果动作是左遍历并且当前节点有左后代，则遍历后代。否则动作改为右遍历。
*   如果 action 是右遍历且当前节点有左后代，则 action 更改为左遍历。否则操作更改为访问节点。
*   如果动作是访问节点：访问当前节点，之后必须找到它的后序后继节点。
*   如果当前节点的父节点可通过线程访问（即当前节点是父节点的左子节点），则遍历设置为继续父节点的右后代。
*   如果当前节点没有右后代，则这是右扩展节点链的末端。
*   第一：通过当前节点的线程到达链的开头。
*   第二：链中节点的正确引用被颠倒。
*   最后：向后扫描链，访问每个节点，然后将右引用恢复为之前的设置。

正如上面的参考资料继续显示的那样，如果您对树结构使用临时修改，也可以在不使用线程的情况下完成。

# awk - 是否可以在 awk 中将带引号的字符串转换为整数，同时对未带引号的字符串透明？

> ID：10694044
> 
> 赞同：1
> 
> 时间：2012-05-21T23:44:36.940
> 
> 标签：awk, gawk

假设我的输入文件的一行如下所示：

```
7162    "cw_107373" 65  65  0.197606944 328.935809057398    "91.67" "11/12" "0.89"  "47/53" 0   N/A Active 
```

您会观察到一些数字字段被引用，而另一些则没有。我希望能够与它们进行数值比较，同时忽略引号。

例如，我目前不能

```
awk "$7 > 90{print}" Input.tsv 
```

因为 $7 是一个带引号的数字字符串

我知道我可以预处理文件以删除所有引号，但我想知道直接使用 awk 是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T23:47:18.407

您需要去掉引号。您可以使用`gsub("\"", "")`. 这将影响整个生产线。您可以像这样指定字段：`gsub("\"", "", $7)`

# wcf - wcf 返回无效数据

> ID：10694049
> 
> 赞同：0
> 
> 时间：2012-05-21T23:45:34.193
> 
> 标签：wcf, iis-7, entity-framework-4

我有一个基于 EF4 模型并在 IIS7.5 上发布的测试 wcf webservice (REST)。基本查询之一是

```
 public CfgUser GetUser(string fspId, string userName)
     {
     return _context.Users.FirstOrDefault(a => a.FspID == fspId && a.UserName == userName && a.WadtDeleted == false);
     } 
```

然后我在 ie9 中使用以下 url 进行测试调用：

```
https://10.201.2.70/webservices/service.svc/rest/GetUser(EDS,kern) 
```

XML 数据正确返回。SQL 探查器显示

```
exec sp_executesql N'SELECT TOP (2) 
[Extent1].[UserId] AS [UserId], 
[Extent1].[FSP] AS [FSP], 
[Extent1].[UserGroupId] AS [UserGroupId], 
[Extent1].[ContactID] AS [ContactID], 
[Extent1].[UserName] AS [UserName], 
[Extent1].[UserPassword] AS [UserPassword], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[MidName] AS [MidName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[CommonName] AS [CommonName], 
[Extent1].[enumUserType] AS [enumUserType], 
[Extent1].[enumActive] AS [enumActive], 
[Extent1].[CreatedBy] AS [CreatedBy], 
[Extent1].[wadtDeleted] AS [wadtDeleted], 
[Extent1].[wadtModifiedBy] AS [wadtModifiedBy], 
[Extent1].[wadtModifiedOn] AS [wadtModifiedOn], 
[Extent1].[wadtModifiedOnDTOffset] AS [wadtModifiedOnDTOffset], 
[Extent1].[wadtRowID] AS [wadtRowID], 
[Extent1].[CreatedOn] AS [CreatedOn], 
[Extent1].[CreatedOnDTOffset] AS [CreatedOnDTOffset], 
[Extent1].[Email] AS [Email], 
[Extent1].[isDeviceUser] AS [isDeviceUser], 
[Extent1].[rowguid] AS [rowguid], 
[Extent1].[PasswordHash] AS [PasswordHash], 
[Extent1].[PasswordModifiedOn] AS [PasswordModifiedOn]
FROM [dbo].[cfgUsers] AS [Extent1]
WHERE (''EDS'' = [Extent1].[FSP]) AND ([Extent1].[UserName] = @p__linq__0) AND (0 = 
[Extent1].[wadtDeleted])',N'@p__linq__0 varchar(8000)',@p__linq__0='kern' 
```

如果我再用 url 立即调用：

```
https://10.201.2.70/webservices/service.svc/rest/GetUser(recserv,recserv-admin) 
```

我收到请求错误。似乎 EF linq 查询保留了传递给原始 fspId 参数的值，即“EDS”。SQL 探查器显示

```
exec sp_executesql N'SELECT TOP (2) 
[Extent1].[UserId] AS [UserId], 
[Extent1].[FSP] AS [FSP], 
[Extent1].[UserGroupId] AS [UserGroupId], 
[Extent1].[ContactID] AS [ContactID], 
[Extent1].[UserName] AS [UserName], 
[Extent1].[UserPassword] AS [UserPassword], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[MidName] AS [MidName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[CommonName] AS [CommonName], 
[Extent1].[enumUserType] AS [enumUserType], 
[Extent1].[enumActive] AS [enumActive], 
[Extent1].[CreatedBy] AS [CreatedBy], 
[Extent1].[wadtDeleted] AS [wadtDeleted], 
[Extent1].[wadtModifiedBy] AS [wadtModifiedBy], 
[Extent1].[wadtModifiedOn] AS [wadtModifiedOn], 
[Extent1].[wadtModifiedOnDTOffset] AS [wadtModifiedOnDTOffset], 
[Extent1].[wadtRowID] AS [wadtRowID], 
[Extent1].[CreatedOn] AS [CreatedOn], 
[Extent1].[CreatedOnDTOffset] AS [CreatedOnDTOffset], 
[Extent1].[Email] AS [Email], 
[Extent1].[isDeviceUser] AS [isDeviceUser], 
[Extent1].[rowguid] AS [rowguid], 
[Extent1].[PasswordHash] AS [PasswordHash], 
[Extent1].[PasswordModifiedOn] AS [PasswordModifiedOn]
FROM [dbo].[cfgUsers] AS [Extent1]
WHERE (''EDS'' = [Extent1].[FSP]) AND ([Extent1].[UserName] = @p__linq__0) AND (0 = 
[Extent1].[wadtDeleted])',N'@p__linq__0 varchar(8000)',@p__linq__0='recserv-admin' 
```

如果我重新启动 IIS 服务，那么第二个请求将起作用，那么显然某处与 IIS 有联系？FSP 和用户之间存在一对多关联。

任何帮助/指针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:20:09.873

```
 public CfgUser GetUser(string fspId, string userName)
     {
     return _context.Users.FirstOrDefault(a => a.FspID == fspId && a.UserName == userName && a.WadtDeleted == false);
     } 
```

如果这是来自您的应用程序的真实代码示例，那么您不应该像我所看到的那样将上下文视为创建的每个服务实例中的创建实例。

您应该更改上下文以使用 using 语句创建实例，以便在返回所需数据后进行处理。这应该可以解决您的错误。

```
public CfgUser GetUser(string fspId, string userName)
     {
        using (MyEntities _context = new MyEntities())
        {
     return _context.Users.FirstOrDefault(a => a.FspID == fspId && a.UserName == userName && a.WadtDeleted == false);
        }
     } 
```

# php - 如何在 PHP 中上传 .txt 文件并在另一页上逐行读取？

> ID：10694050
> 
> 赞同：9
> 
> 时间：2012-05-21T23:45:36.410
> 
> 标签：php, file-upload

我的目标是在表单上上传一个 .txt 文件（浏览），将文件发布到另一个 php 页面，然后逐行读取该文件。

到目前为止，我的代码在这里。文件 1：HTML 上传：

```
<form action="TestParse.php" method="post" enctype="multipart/form-data">
   <label for="file">Filename:</label> <input type="file" name="file" id="file"/>
<input type="submit" value="Submit">
</form> 
```

文件 2：阅读文件

```
 if ($_FILES["file"]["error"] > 0)
{
echo "Error: " . $_FILES["file"]["error"] . "<br />";
}
elseif ($_FILES["file"]["type"] !== "text/plain")
{
echo "File must be a .txt";
}
else
{
$file_handle = fopen($_FILES["file"]["name"], "rb");
} 
```

如我所见，第二个文件将验证没有错误并且上传的文件是.txt。然后它将 fopen() 文件，然后我可以使用 fgets() 读取（我已经设法让所有这些工作）。

但是，仅当上传的 .txt 文件恰好与 PHP 文件位于同一目录中时，此代码才有效。否则我会收到很多错误消息。而且，当您无法上传不在 PHP 文件文件夹中的文件时，它首先就违背了拥有文件上传系统的目的。

有人能告诉我这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T12:04:39.437

逐行阅读，它对我有用这个代码：

```
$fp = fopen($_FILES['uploadFile']['tmp_name'], 'rb');
    while ( ($line = fgets($fp)) !== false) {
      echo "$line<br>";
    } 
```

你不需要保存它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T23:52:24.160

改为使用`$_FILES["file"]["tmp_name"]`。并获取文件的内容

```
$contents = file_get_contents($_FILES['file']['tmp_name']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T23:48:02.710

您需要*先将*文件移动到您希望它去的位置，然后才能使用它。看看[`move_uploaded_file()`](http://us2.php.net/manual/en/function.move-uploaded-file.php)这是如何做到的。另请参阅PHP 文档中的[处理文件上传，特别](http://us2.php.net/manual/en/features.file-upload.php)[是显示如何使用](http://us2.php.net/manual/en/features.file-upload.post-method.php)您正在执行的 POST 的页面。

```
<?php
// In PHP versions earlier than 4.1.0, $HTTP_POST_FILES should be used instead
// of $_FILES.

$uploaddir = '/var/www/uploads/';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

echo '<pre>';
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo "File is valid, and was successfully uploaded.\n";
} else {
    echo "Possible file upload attack!\n";
}

echo 'Here is some more debugging info:';
print_r($_FILES);

print "</pre>";

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-24T18:06:04.477

您可以使用 php explode fn 将整个文本文件读入一个数组。

```
eg. $wholeTextFile = explode("\n", file_get_contents('textFileName.txt')); 
```

`sizeOf`然后通过计数数组得到总行数。

```
eg. $totalLinesinFile = sizeOf($wholeTextFile); 
```

`for`现在，当您在循环或循环中迭代数组时`forEach`，每次迭代都会给您 1 行。

```
eg.

for ($i = 0; $i < $totalLinesinFile ; $i++) {
   echo "Line number is ".$i."<br>";
   echo wholeTextFile[$i]."<hr>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T23:54:24.827

会不会有 open_basedir 限制？

open_basedir 限制 PHP 在目录树中可以打开的文件。

[http://www.php.net/manual/en/ini.core.php#ini.open-basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)

# grails - 使用自定义 AuthenticationProvider 时，Grails springSecurityService.getCurrentUser() 为 Null

> ID：10694052
> 
> 赞同：0
> 
> 时间：2012-05-21T23:45:41.307
> 
> 标签：grails, spring-security

我的应用程序中的一个控制器需要由针对外部数据库进行身份验证的用户访问。

我已经设置了一个自定义用户对象，

```
class CustomUserDetails extends GrailsUser {

    final String externalId

    CustomUserDetails(String username, String password, boolean enabled,
        boolean accountNonExpired, boolean credentialsNonExpired,
        boolean accountNonLocked,
        Collection<GrantedAuthority> authorities,
        long id, String externalId) {

        super(username, password, enabled, accountNonExpired,
        credentialsNonExpired, accountNonLocked, authorities, id)

        this.externalId = externalId 
    }       
} 
```

和一个自定义的 AuthenticationProvider

```
class CustomAuthenticationProvider implements AuthenticationProvider {
    def springSecurityService

    Authentication authenticate(Authentication customAuth) {

    /* Do stuff to validate the user's credentials here */

        def userDetails = new CustomUserDetails(customAuth.getPrincipal(), customAuth.getCredentials(), true, true, true, true, 
                [new GrantedAuthorityImpl('ROLE_SPECIAL_USER')], 9999999, "externalDatabaseIdString")

        def token = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.authorities)

        return token
    }

    boolean supports(Class authentication) {
        return true
    }
} 
```

我在 Config.groovy 中创建了条目以将其添加到 springsecurity.providerNames 列表中，并将以下内容添加到 conf/spring/resources.groovy

```
beans = {
customAuthenticationProvider(info.proadvisors.auth.CustomAuthenticationProvider){ bean ->   bean.autowire = "byName" }

userDetailsService(org.codehaus.groovy.grails.plugins.springsecurity.GormUserDetailsService){ bean -> bean.autowire = "byName" }
} 
```

这是问题所在 - 在我的控制器中，正在注入 springSecurityService 但 springSecurityService.getCurrentUser() 为空，并且当我尝试访问应该在经过身份验证的用户对象上的 externalId 属性时返回空指针异常。

如果在我的 CustomAuthenticationProvider 中，我没有创建 CustomUserDetails 的实例，而是使用 GormUserDetailsS​​ervice 给我一个 GrailsUser 对象并使用它来构建令牌，则控制器可以正常工作并且 getCurrentUser() 可以正常工作。

关于为什么这不起作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:54:09.813

springSecurityService.getPrincipal() 给了我我正在寻找的东西。

不知道为什么 getCurrentUser() 不起作用而 getPrincpal() 起作用，但它就是这样。

# c# - 应用程序块缓存查询

> ID：10694055
> 
> 赞同：0
> 
> 时间：2012-05-21T23:46:10.043
> 
> 标签：c#, caching, application-blocks

这是关于 MS 企业应用程序块缓存的。

有没有办法根据键查看缓存中的内容？我试图找出是否有办法查询缓存对象并找出其中存储了哪些键。然后，一旦我有了密钥，我就可以查询密钥并查看其中存储的内容。请让我知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:12:01.710

您需要创建自己的 BackingStore，从 IBackingStore 实现。然后你可以在那里做任何你想做的事情，例如，维护一个包含所有键的列表，每个添加/删除问题到你自己的 BackingStore。示例如下：

```
public class MyBackingStore : IBackingStore
{
    public List<string> keys = new List<string>();

    public void Add(CacheItem newCacheItem)
    {
        keys.Add(newCacheItem.Key);
    }

    public void Remove(string key)
    {
        keys.Remove(key);
    }
} 
```

# javascript - 绕过 javascript 的 chrome 和 FF 背景选项卡处理错误

> ID：10694056
> 
> 赞同：0
> 
> 时间：2012-05-21T23:46:13.070
> 
> 标签：javascript, firefox, google-chrome, slideshow, undefined

好吧，我真的坚持了一整天都在做这件事，我就是不能把它弄出来。

我有一个使用 setTimeout() 的 javascript 幻灯片。我知道在 chrome 和一些 FF 版本中，它会放慢速度以减少 CPU 使用率，然后在我返回幻灯片时加快速度以赶上它认为应该在幻灯片中显示的位置。

然而，这样做不仅加快了速度，而且还忽略了我的代码中的一些问题以跳出我的图像数组，从而导致短暂的未定义错误。这简直令人难以置信一旦它赶上它然后运行良好？？？我坚持任何想法，我该如何解决这个问题以及如何阻止它加速？这是我使用的代码。

```
<script type="text/javascript"> 
```

```
<?php 
$fetch_images = mysql_query($Aquery);
$fetch_title = mysql_query($Bquery);
$fetch_text = mysql_query($Cquery);
$num_rows =  mysql_num_rows($fetch_images);
?>
var i=0;
var products  = [<?php while($image = mysql_fetch_array($fetch_images)){echo "'".$image['imageurl']."',";}?>];
var productstitle  = [<?php while($title = mysql_fetch_array($fetch_title)){echo "'".$title['title']."',";}?>];
var productstext  = [<?php while($text = mysql_fetch_array($fetch_text)){echo "'".stripslashes($text['strapline'])."',";}?>];
function slideShow<?php echo $timerTag;?>(){
    if (i<=(products.length-1)){
        $('#headerslideimage').fadeTo("slow", 0, function() {
        <?php if(page('pageurl') != 'home'){?>
            document.getElementById('headerslidetitle').innerHTML=productstitle[i];
            document.getElementById('headerslidetext').innerHTML=productstext[i];
        <?php }?>
        document.getElementById('headerslideright').innerHTML="<img id='headerslideimage' src='"+products[i]+"' alt='"+productstitle[i]+"'/>";
        i++;
        $('#headerslideimage').fadeTo(4000, 100, function() {});
    });
} else {
    i = 0;
    $('#headerslideimage').fadeTo("slow", 0, function() {
    <?php if(page('pageurl') != 'home'){?>
    document.getElementById('headerslidetitle').innerHTML=productstitle[i];
    document.getElementById('headerslidetext').innerHTML=productstext[i];
    <?php }?>
    document.getElementById('headerslideright').innerHTML="<img id='headerslideimage' src='"+products[i]+"' alt='"+productstitle[i]+"'/>";
    i++;
    $('#headerslideimage').fadeTo(4000, 100, function() {});
});
}
setTimeout("slideShow<?php echo $timerTag;?>()", 5000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:46:34.953

在您的函数中使用[Page Visibility API](https://developer.mozilla.org/en/DOM/Using_the_Page_Visibility_API)来检查页面当前是否可见。如果它没有跳过执行该迭代的任何内容。当他们不与您的页面交互时，这将有一个额外的好处，即使用更少的用户资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:33:50.683

您的动画功能之一最终会调用`requestAnimationFrame`吗？ `setInterval`&`setTimeout`当您最小化或切换选项卡时不要停止运行，但`requestAnimationFrame`确实如此。结果是，如果您`requestAnimationFrame`从间隔（或链式超时）任务中调用，您将不断排队新任务，`requestAnimationFrame`以便在选项卡再次获得焦点时快速播放。

查看这个相关问题：[Jquery setInterval on minimize](https://stackoverflow.com/questions/7739657/jquery-setinterval-on-minimize)

# php - 从字符串位置 x 到字符串位置 y 计数字符

> ID：10694060
> 
> 赞同：0
> 
> 时间：2012-05-21T23:46:22.993
> 
> 标签：php

我如何找到一个字符串的位置到另一个字符串的位置之间有多少个字符

例如，字符串可能是： brown fox

我如何找到'r'和'f'之间有多少个字符？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T23:48:21.773

```
$r_pos = strpos($str, 'r');
$distance = strpos($str, 'f', $r_pos) - $r_pos - 1;
echo $distance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:48:30.027

使用`strpos`（或`stripos`用于*不区分大小写*的搜索），得到“r”的位置和“f”的位置。然后，减去两者。

```
$phrase = "brown fox";
echo stripos( $phrase, "f" ) - stripos( $phrase, "r" ); 
```

如果您的句子可以在“r”之前包含“f”，则可以通过将“r”的位置作为第三个参数传递给“f”来提供偏移量`stripos`：

```
$r = stripos( $phrase, "r" );
$f = stripos( $phrase, "f", $r );

echo $f - $r; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T23:49:49.483

```
$str = "brown fox";
strpos($str,'f') - strpos($str,'r'); 
```

# android - Android Maps api 发布密钥不起作用

> ID：10694071
> 
> 赞同：1
> 
> 时间：2012-05-21T23:48:33.257
> 
> 标签：android

我查看了与此相关的所有 stackoverflow 问题，但没有任何效果。对不起，如果这已经被问到了。

我将 Google 地图 api 集成到我的应用程序中，并且在开发中一切正常。我得到了一个基于 debug.keystore 文件的调试 api 密钥，它工作得很好。

然后我继续并根据我用来签署应用程序的密钥库文件获得了一个发布 api 密钥。但是，我看到的只是灰色瓷砖 - 地图没有显示。我在清单中的**应用程序标记**内有**使用库标记。**我在清单中拥有互联网许可，以及**android:debuggable="false"**（尽管这似乎没有改变任何东西）。

 ****我还能错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T11:57:47.680

您应该从另一个链接创建一个 Release 密钥。Debug 键和 Release 键是不同的。请参阅此处了解“如何以不同方式创建调试密钥和发布密钥”：[http ://chocotech.blogspot.com/2012/10/get-debug-key-and-release-key-for.html](http://chocotech.blogspot.com/2012/10/get-debug-key-and-release-key-for.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:35:46.560

我有同样的问题。

**我是如何解决的：**

为您的发布密钥库创建一个新的（！）API 密钥很重要，因为为调试密钥库生成的旧 API 密钥不适用于发布密钥库。这是如何执行此操作的过程： [https ://developers.google.com/maps/documentation/android/mapkey#getfingerprint](https://developers.google.com/maps/documentation/android/mapkey#getfingerprint)

简而言之：

1.  为您的密钥库制作指纹（MD5），例如通过此批处理文件：

    @echo off "c:\Program Files\Java\jdk1.7.0\bin\keytool.exe" -v -list -keystore my-release-key.keystore > my-release-md5-fingerprint.txt

    回显您保存到文件 my-release-md5-fingerprint.txt 的 google api 密钥 (md5)

    暂停

2.  转到生成 APi 的 google 站点： [http ://code.google.com/android/maps-api-signup.html](http://code.google.com/android/maps-api-signup.html)

并将您的 MD5 指纹复制粘贴到适当的字段，如下所示 94:1E:43:49:87:73:BB:E6:A6:88:D7:20:F1:8E:B5:98 （没有额外的允许空格或附加符号）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T00:15:11.357

In your MapView you have to specify your ApiKey :

```
<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:apiKey="@string/mapKey"
    android:layout_below="@+id/email"
    android:clickable="true"
    android:enabled="true" >
</com.google.android.maps.MapView> 
```

where mapKey is you ApiKey (here I define it in my Strings).****

# z3 - 将 Z3 用于 MAX-SAT 的问题

> ID：10694072
> 
> 赞同：3
> 
> 时间：2012-05-21T23:48:40.687
> 
> 标签：z3

我对 MAX-SAT 很感兴趣，并希望 Z3 将其作为内置功能。在不久的将来有没有计划这样做？

在没有上述内容的情况下，我尝试从命令行使用示例 maxsat 应用程序。不幸的是，每当我执行 exec.sh "filename.z3" 时，我总是得到以下响应：“检查硬约束是否可以满足......结果：0”。我究竟做错了什么？我向您保证，此响应似乎与文件的实际内容完全无关。

最后，maxsat 示例中的注释没有明确说明如何将约束标记为硬或软。硬约束应该是前面有 :formula 的公式，而软约束应该是前面有 :assumption 的公式。那么，要将 "(assert (> x 0))" 标记为软，我们究竟将 ":assumption" 放在哪里呢？（我已经阅读了关于硬约束和软约束的查询，但问题/响应似乎更多地是在寻找不可满足的核心的背景下，而不是不可满足的公式的“最大可满足核心”。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:07:09.163

Z3 发行版中的 MaxSAT 示例演示了如何使用 Z3 API 实现两个 MaxSAT 算法。该示例仍然使用旧的（已弃用的）API 来断言约束，但可以轻松修改它以使用新的求解器 API。示例应用程序读取 SMT 1.0 文件。但是，MaxSAT 函数可用于使用 C API 创建的公式。该脚本假定`:assumption`字段是软约束并且`:formula`是硬约束。这是一个小例子，其中`(> x 0)`、`(> y 0)`和是软约束，而和`(< x y)`是硬约束。示例应用程序返回. 也就是说，最多可以满足三个软约束。`(> x (- y 1))``(> (+ x y) 0)``(< (- x y) 100)``3`

```
(benchmark ex
  :extrafuns ((x Int))
  :extrafuns ((y Int))
  ;; Soft Constraints
  :assumption (> x 0)
  :assumption (> y 0)
  :assumption (< x y)
  :assumption (> x (- y 1))
  :formula 
  (and 
  ;; Hard Constraints
  (> (+ x y) 0)
  (< (- x y) 100)
)) 
```

话虽如此，我们没有计划在 Z3 API 中直接支持 MaxSAT。在未来的版本中，我们可能会将 MaxSAT 示例移植到其他 API（.NET、Python 和 C++）。

# ide - 为什么人们使用textmate？

> ID：10694076
> 
> 赞同：0
> 
> 时间：2012-05-21T23:49:25.783
> 
> 标签：ide, textmate

我最近被介绍给 text mate，我承认它是一个不错的编辑器，具有颜色编码和适应不同语言（PHP、HTML、Java、C++ 等）的能力，但对我来说最重要的节省时间是代码完成。我不相信 textmate 有任何插件可以像 Xcode for Objective-C 或 Eclipse for Java 那样完成代码完成，这可以极大地提高生产力。那么为什么textmate这么受欢迎呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T23:51:59.857

因为它可以比完整的 IDE 更快地打开文本文件。这就是为什么当我只想快速编辑文件时使用[程序员的记事本（我在 Windows 上）](http://www.pnotepad.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T09:50:23.903

TextMate 之所以受欢迎，是因为它早在 2006 年就单独向编程人群介绍了许多很酷的想法：

*   带有标签扩展的智能片段机制
*   Cmd+T 模糊文件导航
*   通过捆绑包的可扩展性
*   其他的？

这些原创想法以及其他不太原创的想法的执行方式使其很快成为真正的编码器磁铁。我记得当时许多 Windows 用户认为 TextMate 是切换到 Mac 的一个很好的理由。这是一个非常巧妙的 UI 设计示例。

对我来说，来自 DreamWeaver 的 TextMate 是一炮而红。

现在，TM 有限制，就像所有工具一样：

*   没有代码意识（用于完成、语法检查或重构）
*   静态完成而不是更好的动态完成
*   难以处理非常大的文件
*   其他的？

但是，最重要的是，它的作者从未将 TextMate 作为一个成熟的 IDE 进行营销，甚至从未假装它具有不存在的功能。TextMate 是一个文本编辑器，而不是 IDE。

如果您*需要*智能补全、重构和其他简洁的东西，TextMate 不适合您。

如果您不需要所有这些简洁的辅助工具，TextMate 是一款出色的文本编辑器。

在 2012 年，实际上很难理解 TextMate 在 2006 年是如何改变格局的。TM 已经很老了，并且以未能快速发展和提供新功能而闻名，许多文本编辑器填补了这一空白。以 TextMate 的突破性设计为底线（所有艰巨的概念工作已经完成），在过去的 5/6 年中出现了许多其他文本编辑器：Espresso、Coda、Sublime Text……以及许多其他编辑器/IDE 导入了 TM 的概念。

在此期间，我个人已切换到 Vim。

# c# - C# 脚本 - 添加自定义类

> ID：10694079
> 
> 赞同：0
> 
> 时间：2012-05-21T23:49:46.923
> 
> 标签：c#, execution, .net-assembly

我正在制作一个脚本系统，我需要一些帮助。我有我的班级`Script.cs`和我的班级`Person.cs`。

在第`Person.cs`一次程序运行时设置（并且可以在执行期间再次设置）。我想获得`Person.cs`在我的脚本上使用的方法，看看它：

**个人.cs**

```
//constructors

public string getName() { return m_name; }
public string getAge() { return m_age; } 
```

**主文件**

```
//constructors
Person ps;
public void Run()
{
    ps = new Person("name", "10");
} 
```

**脚本.cs**

> 在脚本执行时我可以如何“运行”人...

对不起，如果我没有很好地表达自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:31:55.993

您应该查看[Roslyn](http://msdn.microsoft.com/en-US/roslyn)，它允许您使用 C# 作为脚本语言。这是一篇帮助您入门的[CodeProject 文章。](http://www.codeproject.com/Articles/113169/C-As-A-Scripting-Language-In-Your-NET-Applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:15:14.073

I think what you're looking for is to change `Run` to `Main`, see [http://msdn.microsoft.com/en-us/library/acy3edy3(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/acy3edy3(v=vs.71).aspx). Be sure to set your project to use your `Main` class as the entry point.

Also, it looks like `Name` and `Age` should be properties in `Person`. See [http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)

# entity-framework - EF CodeFirst 与单个模型对象的多个 FK 关联

> ID：10694081
> 
> 赞同：0
> 
> 时间：2012-05-21T23:49:51.353
> 
> 标签：entity-framework, ef-code-first

使用 EF Code First 我有一个模型对象，它具有与单个模型对象关联的多个属性：

```
public class Job 
{
    public int Id { get; set; }
    public int Company1Id { get; set; }
    public int Company2Id { get; set; } // References CompanyId
    public int Company3Id { get; set; } // References CompanyId
    ...

    public virtual Company Company1Info { get; set; }
    public virtual Company Company2Info { get; set; }
    public virtual Company Company3Info { get; set; }
 }

 public class Company
 { 
    public int CompanyId { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
 } 
```

JobMap 类中的关系

```
 this.HasRequired(t => t.Company1Info)
            .WithMany()
            .HasForeignKey(d => d.Company1Id);
        this.HasRequired(t => t .Company2Info)
            .WithMany()
            .HasForeignKey(d => d.Company2Id);
        this.HasRequired(t => t.Company3Info)
            .WithMany()
            .HasForeignKey(d => d.Company3Id); 
```

我的仓库中获取数据的方法

```
 public Job GetById(int id)
    {
        return _dbContext.Set<Job>()
            .Include(t => t.Company1Info)
            .Include(t => t.Company2Info)
            .Include(t => t.Company3Info)
            .First(x => x.Id == id);
    } 
```

当我运行应用程序时， Company2Info 和 Company3Info 为空。我尝试在上下文中为每家公司设置一个新的 DbSet 实例，但我得到了一个`Unsupported Exception`.

谢谢！

更新：这是同一问题的答案，但这对我不起作用[Entity Framework Code First - 来自同一个表的两个外键](https://stackoverflow.com/questions/5559043/entity-framework-code-first-two-foreign-keys-from-same-table)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:07:45.503

**解决方案：**

我在问题中的设置和链接中的解决方案是正确的。由于键不存在，我创建实例的对象模型为空——换句话说，我试图引用的公司的 ID 不存在。

我所做的唯一更改是添加`WillCascadeOnDelete`方法并将其设置`false`为默认值为 true ——注意我在 JobMap 类中使用 Fluent API 而不是 Context ModelBuilder。

JobMap 类中的关系

```
 this.HasRequired(t => t.Company1Info)
        .WithMany()
        .HasForeignKey(d => d.Company1Id)
        .WillCascadeOnDelete(false);
    this.HasRequired(t => t .Company2Info)
        .WithMany()
        .HasForeignKey(d => d.Company2Id)
        .WillCascadeOnDelete(false);
    this.HasRequired(t => t.Company3Info)
        .WithMany()
        .HasForeignKey(d => d.Company3Id)
        .WillCascadeOnDelete(false); 
```

高温高压

# ruby-on-rails - Rails 从目录链接文件

> ID：10694094
> 
> 赞同：0
> 
> 时间：2012-05-21T23:52:16.233
> 
> 标签：ruby-on-rails, ruby, file, upload

红宝石-v 1.8.7，导轨-v 2.3.8

我正在尝试将文件从公共/数据链接到视图，这让我很头疼。我知道我自己应该能够做到这一点，但是我丢失了我的旧 Rails 书并从亚马逊订购了一本新书，它应该会在一周内到达.... :*(

我确实阅读了上传文件教程。

我的问题：我有大约 3000 个文件夹；每个文件夹有大约 3~5 个文件。

我的问题：

*   我应该创建一个数据库迁移只是为了跟踪文件的地址吗？以便可以轻松访问？（即 order.data_file.address；我猜“是”）

*   上传文件后，如何链接文件，以便为视图正确链接文件。

所以无论如何我得到了这个：

```
<% @files = Dir.glob("public/data/*") %>
<% for m in @files %>
<% new_file = m.to_s %>
<li><%= link_to m.to_s, new_file %> </li>
<% end %> 
```

该文件的链接最终为：localhost:3000/public/data/temp.pdf

但这不起作用并返回：

```
 No route matches "/public/data/temp.pdf" with {:method=>:get} 
```

我猜我在 routes.rb 中需要一些东西才能让它工作......

```
 map.datafile '#{RAILRS_ROOT}/public/data/:id', :controller => 'upload' 
```

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:35:37.077

不需要特殊的 map.resources 路线。没有特殊的控制器方法 send_to。

只需通过省略公共部分来纠正链接，它就可以工作。我从另一个问题中使用了以下代码。

```
 <% Dir["public/files/*.pdf"].each do |file| %>
    <li><%= link_to 'Letter', file[/\/.*/] %></li>
    <% end %> 
```

# php - Removing PHP extension and re-writing query string with .htaccess

> ID：10694095
> 
> 赞同：2
> 
> 时间：2012-05-21T23:52:21.743
> 
> 标签：php, .htaccess, url-rewriting

I'm trying to restructure an existing website and, at the same time, re-write the URLs to a more user-friendly format. What I have now is `http://example.com/test_vars.php?test_var1=value1&test_var2=value2` and, ideally, what I would like is `http://example.com/test_vars/test_var1/value1/test_var2/value2`

Admittedly, I'm new to modifying htaccess files, however have done my research and tried out a few things. The closest I've come to what I'm looking for (admittedly is not that close), but I've enclosed the code below:

```
Options +FollowSymLinks
Options +Indexes
RewriteEngine on
DirectoryIndex index.html

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(([^/]+/)*[^.]+)$ /$1 [L]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# otherwise forward it to index.html
RewriteRule .* index.html 
```

With this, I end up with a URL of `http://example.com/test_vars.php/test_var1/value1/test_var2/value2` however, none of the variables are being passed to the page.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T23:58:44.530

In your `test_vars.php`, you have to manually parse the parameters. The `$_SERVER['REQUEST_URI']` will contain `/test_var1/value1/test_var2/value2`. Write a simple function to parse the string with `explode()`, for example.

And to have your URL without the ".php" extension, change this line

```
RewriteRule ^(([^/]+/)*[^.]+)$ /$1 [L] 
```

To this:

```
RewriteRule ^test_vars test_vars.php 
```

Now you have your pretty URL: [http://example.com/test_vars/test_var1/value1/test_var2/value2](http://example.com/test_vars/test_var1/value1/test_var2/value2)

# java - 在jframe上调整cubiccurve的大小

> ID：10694103
> 
> 赞同：0
> 
> 时间：2012-05-21T23:53:58.933
> 
> 标签：java, swing, graphics, java-2d, paintcomponent

我有这个曲线形状，我希望宽度和高度相对于我的 JFrame 的大小相应地调整大小，例如我的 JFrame 大小是 setSize(440, 300); - 然后，如果我最大化我的 JFrame，我希望曲线形状也可以调整大小，以便形状保持其实际形状。任何帮助，提前感谢。谢谢，

这是我的代码：

```
float offset = (float) Math.sin(Math.PI);

x1 = offset;
y1 = (height/4.0f) - 4.0f;

x1ctl = ((width/4) - 140) + 90.0f;
y1ctl = ((height/4) - 100) + 20.0f;

x2ctl = ((width/4) - 10.0f) + 60.0f;
y2ctl = ((height/4) - 8.0f) + 1.0f;

x2 = (width/2.0f) - 20.0f;
y2 = offset - 4.0f;

curve = new CubicCurve2D.Float(
        x1,y1,
        x1ctl,y1ctl,
        x2ctl,y2ctl,
        x2,y2);

g2d.draw(curve); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:07:25.050

您可以覆盖`paintComponent`和使用组件的尺寸。这是基于问题中的论点的示例：

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.CubicCurve2D;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class CubicCurveComponentTest extends JComponent {

    public void paintComponent(Graphics g) {

        float offset = (float) Math.sin(Math.PI);

        float x1 = offset;
        float y1 = (getHeight()/4.0f) - 4.0f;

        float x1ctl = ((getWidth()/4) - 140) + 90.0f;
        float y1ctl = ((getHeight()/4) - 100) + 20.0f;

        float x2ctl = ((getWidth()/4) - 10.0f) + 60.0f;
        float y2ctl = ((getHeight()/4) - 8.0f) + 1.0f;

        float x2 = (getWidth()/2.0f) - 20.0f;
        float y2 = offset - 4.0f;

        CubicCurve2D curve = new CubicCurve2D.Float(
                x1,y1,
                x1ctl,y1ctl,
                x2ctl,y2ctl,
                x2,y2);

        Graphics2D g2 = (Graphics2D) g;
        g2.draw(curve);
    }

    private static void createAndShowGUI() {    
        JFrame f = new JFrame("Cubic Curve Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(440, 300);
        f.add(new CubicCurveComponentTest());
        f.setVisible(true);
    }

    public static void main(String args[]) {
        Runnable doCreateAndShowGUI = new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        };
        SwingUtilities.invokeLater(doCreateAndShowGUI);
    }
} 
```

***编辑：坐标示例***

以下是从容器的给定初始尺寸 (440, 300) 和原始计算中使用的幻数得出的坐标示例：

```
 float x1 = 0;
    float y1 = getHeight() * 0.24f;

    float x1ctl =  getWidth() * 0.125f;
    float y1ctl = 0;

    float x2ctl = getWidth() * 0.24f;
    float y2ctl = getHeight() * 0.22f;

    float x2 = getWidth() * 0.45f;
    float y2 = -getHeight() * 0.013f; 
```

# git - 使用 git 和 capistrano 和 cakephp 进行网站换肤的工作流程

> ID：10694106
> 
> 赞同：1
> 
> 时间：2012-05-21T23:54:20.620
> 
> 标签：git, cakephp, capistrano

这个问题有两个部分。第一个是，我想对我想出的一个工作流程进行一次调查，以对大量网站进行代码版本控制。我有一个包含一个千篇一律的网站的大师，以及一系列处理每个网站的视图和配置文件夹更改的分支。每个站点的模型和控制器都是相同的。如果我对 master 进行更改，是否可以将这些更改合并到每个分支中。这对我来说听起来很糟糕。我计划使用 capistrano 来部署站点，并且可能会提出一个贯穿每个站点的脚本，并将 master 合并到分支中，我不确定。每个站点都有自己的部署脚本并指向特定的分支或站点。我还没有深入了解部署脚本的细节，但在开始之前，我想看看我的工作流程是否可行。

如果其他人有不同的方法，我很乐意听到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:45:46.957

我会阅读由git的维护者直接编写的[git 分支哲学。](http://gitster.livejournal.com/42247.html)

这对我来说听起来是个好主意。据我了解，如果分支的目的`site-1`是“客户 1 的网站，客户 1 的确切需求”，那么如果客户 1 想要/需要您对分支所做的更改`site-template`，那么“git 哲学”就可以了可以将这些更改推送到所有单个站点的脚本。

# php - 从 javascript POST 到 PHP

> ID：10694108
> 
> 赞同：1
> 
> 时间：2012-05-21T23:54:31.477
> 
> 标签：php, javascript, html

目前我有一个 HTML 页面，其中包含许多需要通过 Javascript 验证的文本框。一旦他们都被验证，我想通过 controller.php 创建一个用户帐户

我的问题是：如何从 Javascript 函数中 POST 到 PHP 文件。我收集到我可以使用 AJax，但是如果可能的话，我想在没有这个的情况下使用它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:00:54.493

使用 post 方法创建一个表单并让它指向 php 脚本。如果您像下面这样设置它，则不需要从 javascript 函数发布，因为 html 表单的默认行为将为您完成发布。对于没有启用 javascript 的人来说，它也会优雅地降级。

```
<form action="/path.to.your.php.file.php" method="POST" onSubmit="return validate();">
 ... your fields...
 <input type="submit" value="validate and submit"/>
</form>

<script>
  function validate(){
    // do your validation here
    return true; // return true if validation was ok, false otherwise
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:59:24.250

如果您想使用 AJAX，使用 JQuery 库，您可以执行以下操作来发布到页面

```
$.ajax({
   type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

或者

```
$.post('controller.php', function(data) {
    //do something with the result
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T23:59:54.813

为您的表单指定一个名称，如下所示...

```
<form name="myForm" id="form1" method="post" action="phpScriptToPostTo.php"> 
```

...然后运行这个javascript：

```
document.forms["myForm"].submit(); 
```

...或者在 jQuery 中：

```
$('#form1').submit(); 
```

...或者在 jQuery over ajax 中：

```
$.post('server.php', $('#form1').serialize()) 
```

# python - 等待函数结束以在 Python 中继续程序

> ID：10694109
> 
> 赞同：1
> 
> 时间：2012-05-21T23:54:36.827
> 
> 标签：python, function, loops, return, wait

我在 Python 中实现 kmeans，我正在循环移动质心的部分，直到没有移动，但是 lCentroides 和 lCentroidesPrevious 的比较即使它们会不同也会返回 True，因为主函数不会等到repartePixelesEnClusters() 函数结束（并重新分配 lCentroides），因此它们都是相同的。这是代码：

```
def main():
    lCentroidesPrevious = []
    while centroidesIguales == False:   
        infoClusters = initInfoClusters()
        lCentroides, infoClusters = repartePixelesEnClusters(lCentroides, infoClusters) 
        centroidesIguales = lCentroides == lCentroidesPrevious
        lCentroidesPrevious = lCentroides 
```

有小费吗？我读过一些带有线程的东西，但我不想使用它们......还有其他方法吗？

# python - 在 Django Admin 中上传图片

> ID：10694110
> 
> 赞同：0
> 
> 时间：2012-05-21T23:54:43.940
> 
> 标签：python, django, image, admin, thumbnails

我有一个充满城市的 Django 数据库。我想使用 Django 管理面板将每个城市的多张图片上传到我的服务器中的某个文件夹中，例如 /images/country_name/state/city/。这可能会被添加到城市管理表单中，因此图像和信息都可以在一个页面上进行编辑。我还需要选择一个主图像并将其转换为缩略图，以便可以在搜索结果中使用它。实现此类功能的好方法是什么？有没有好的 django 插件可以帮助我完成这些任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T00:22:58.610

你可以做几个相互关联的模型，然后`TabularInline`在 django-admin 中添加图像，比如：

```
# models.py
class City(models.Model):
    # your fields

class CityImage(models.Model):
    city = models.ForeignKey('City', related_name='images')
    image = models.ImageField(upload_to=image_upload_path)

# admin.py
from django.contrib import admin
from myapp.models import City, CityImage

class CityImageInline(admin.TabularInline):
    model = CityImage

class CityAdmin(admin.ModelAdmin):
    inlines = [CityImageInline]

admin.site.register(City, CityAdmin) 
```

至于缩略图，您需要在`City`模型中确定要将哪些相关图像用作缩略图，然后执行以下操作：

```
import Image
try:
    from cStringIO import StringIO
except ImportError:
    from StringIO import StringIO
from django.core.files.base import ContentFile

# other imports and models

class City(models.Model):
    # your fields

    def get_thumbnail(self, thumb_size=None):
        # find a way to choose one of the uploaded images and
        # assign it to `chosen_image`.
        base = Image.open(StringIO(chosen_image.image.read()))  # get the image

        size = thumb_size
        if not thumb_size:
            # set a default thumbnail size if no `thumb_size` is given
            rate = 0.2  # 20% of the original size
            size = base.size
            size = (int(size[0] * rate), int(size[1] * rate))

        base.thumbnail(size)  # make the thumbnail
        thumbnail = StringIO()
        base.save(thumbnail, 'PNG')
        thumbnail = ContentFile(thumbnail.getvalue())  # turn the tumbnail to a "savable" object
        return thumbnail 
```

我希望这会派上用场！:)

# windows - 如何在 Windows 上找出它为连接计算的 ssthresh 和 cwnd

> ID：10694111
> 
> 赞同：2
> 
> 时间：2012-05-21T23:54:45.063
> 
> 标签：windows, tcp

我想知道 ssthresh 和 cwnd 为连接计算了哪些 Windows。

例如在 Linux 上我可以做

```
ip route show cache 
```

查看计算值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:03:49.830

您可以在 Windows 中执行此操作，但您必须自己编程。看看这个：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb485738%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb485738%28v=vs.85%29.aspx)

GetPerTcpConnectionEStats 函数（从 Vista 开始可用）可以获得各种信息，如 cwnd、ssthresh、dupack、rtt、sack 以及更多关于 TCPv4 连接的信息。对 TCPv6 使用 GetPerTcp6ConnectionEStats。

**编辑**：SDK 有一个实用程序可以向您显示此信息。它位于 c:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\tcpanalyzer.exe 中。我认为这是 Microsoft 的 Platform SDK ( [http://www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279) )。

# php - 正则表达式 - 匹配

> ID：10694113
> 
> 赞同：-3
> 
> 时间：2012-05-21T23:54:54.423
> 
> 标签：php, regex

我需要匹配一个字母数字单词。它可以包含“-”，但不能在结尾或开头，并且“-”不能重复（如“--”），字长必须在 2 到 24 个字符之间。

一些例子：

```
adfg
asd-asdasd
asd-asd-asd 
```

这些不应该匹配：

```
-asd
asd-
-asd-
-asd--asd- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:34:31.960

使用正则表达式最困难的事情之一就是抵制过度聪明的诱惑。你有两个独立的、不兼容的测试要执行。长度：

```
/^.{2,24}$/ 
```

...和组成：

```
/^[A-Z0-9]+(?:-[A-Z0-9]+)*$/i 
```

虽然*可能*想出一个可以一次性执行两个测试的正则表达式，但没有必要。只需执行其中一项作为前瞻：

```
/^(?=.{2,24}$)[A-Z0-9]+(?:-[A-Z0-9]+)*$/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:58:46.137

试试这个 PCRE reg exp：

```
/^(([0-9a-z]+-)*[0-9a-z]){2,24}$/i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T00:02:14.563

正则表达式取决于您使用的平台，并且它们不太适合匹配大小（如果您尝试确定特定长度，您可能会失去灵活性，除非您检查更标准化的输入，例如日期：`\d{2}/\d{2}/\d{4})`。但是类似：

```
[a-z]+(-[a-z]+)* 
```

可能会给你一个关于你的问题的想法。

# c++ - C++ 构造函数参数

> ID：10694116
> 
> 赞同：3
> 
> 时间：2012-05-21T23:55:24.780
> 
> 标签：c++, constructor

因此，在为一个简单的坐标系休息了很长时间之后，我今天写了一些 C++，我想我想要一个构造函数接受 2 个值，这样我就可以写出像“坐标 c = 新坐标（1,2）；”这样的东西。

```
struct Coordinates {
   int x;
   int y;

   Coordinates(int a, int b) {
      x = a;
      y = b;
   }
}; 
```

在 Cygwin 中编译时，我得到：

> $ g++ -o Adventure Adventure.cpp Adventure.cpp:36: 错误：没有匹配函数调用 `Coordinates::Coordinates()' Adventure.cpp:22: 注意：候选人是：Coordinates::Coordinates(const Coordinates&) Adventure .cpp:26: 注意: Coordinates::Coordinates(int, int)

不知道这里出了什么问题，我找不到关于 C++ 结构构造函数的太多信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T23:59:53.313

在代码的第 36 行（您没有显示）中，您正在创建此类的一个对象，但您没有将任何参数传递给构造函数。唯一有效的构造函数是带有两个整数的构造函数，或者是默认的复制构造函数。`a`添加一个不带参数的构造函数，或者更改要传递`b`给构造函数的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T00:02:44.547

通过编写显式构造函数，您禁用了默认构造函数的自动创建，该构造函数在定义没有构造函数参数的对象时使用，如`Coordinates coords;`. 您必须像这样明确地提供它：

```
struct Coordinates {
  int x;
  int y;

  Coordinates(int a, int b) {
    x = a;
    y = b;
  }

  Coordinates(): x(0), y(0) {}
}; 
```

注意我在默认构造函数中初始化了成员变量；这不是强制性的，但这是一个好主意，因为否则即使在使用编译器生成的构造默认初始化它们的情况下，它们也将是未定义的。

另请注意，我`: x(0), y(0)`在构造函数主体中使用了成员初始值设定项（部分）而不是赋值。这是一种很好的风格，因为类对象通常会提供更好的性能，并且在某些情况下是初始化成员的唯一方法（例如，如果它是`const`类型或没有默认构造函数）。

请注意，在 C++11 中，您可以告诉编译器生成与没有其他构造函数时相同的默认构造函数，只需编写

```
Coordinates() = default; 
```

在类定义中。

# ruby-on-rails - 将带有 url2png 的屏幕截图保存到自己的服务器的最佳方法是什么？

> ID：10694117
> 
> 赞同：2
> 
> 时间：2012-05-21T23:55:26.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, image, ruby-on-rails-3.1

我有一个网站将使用 url2png.com 生成屏幕截图。我不喜欢每 30 天需要重新渲染所有屏幕截图的事实，计入您的限制。

理想情况下，我想生成它们，完成后，我想将其保存到我自己的服务器上，然后在那里查看。

我想我什至不确定从哪里开始，特别是..

1.  如何让它们进入某种队列，直到图像渲染并返回（我之前使用过 redis/resque/resque_pool 但这很复杂，我不愿意在这个应用程序上采用非常复杂的路线，因为我认为它会被很多人使用。我更喜欢更简单的东西，不容易搞砸）

2.  如何从rails实际获取图像

3.  如何将图像存储到具有特定文件名的特定目录

4.  如何在我的实际应用中引用资产

5.  如何处理模型/控制器视图中的屏幕截图。它应该只是分配给资源的一个额外属性，例如 Resource.screenshot_url 吗？

他们确实提供了一个 Ruby gem，但我不相信我会使用它，因为它唯一的选择是从他们的服务器获取图像，而不是我将使用他们的 URL 格式从中获取图像，然后以某种方式生成我自己的网址。

`http://api.url2png.com/v3/<API_KEY>/<TOKEN>/<BOUNDING-BOX>/<URL>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:23:04.917

URL2PNG api 相当快，新请求会立即处理，通常在 10 秒或更短的时间内返回一个 png。

跟踪每个请求并轮询状态的系统可能是矫枉过正。如果您正在寻找一份背景工作，那就另当别论了。

第 2、3、4 和 5 部分将由回形针宝石轻松处理。我建议从这里开始：[通过回形针从 URL 保存图像](https://stackoverflow.com/questions/4049709/save-image-from-url-by-paperclip)

我首选的解决方案是缓存反向代理。 [https://serverfault.com/questions/30705/how-to-set-up-nginx-as-a-caching-reverse-proxy](https://serverfault.com/questions/30705/how-to-set-up-nginx-as-a-caching-reverse-proxy)

有一个类似的 apache 模块称为“mod_disk_cache”。ymmv。 [http://httpd.apache.org/docs/2.2/mod/mod_disk_cache.html](http://httpd.apache.org/docs/2.2/mod/mod_disk_cache.html)

它是如何工作的：你的应用程序会请求

```
http://url2png.yourdomain.com/v3/<API_KEY>/<TOKEN>/<BOUNDING-BOX>/<URL> 
```

代理会检查请求是否在缓存中。如果没有找到，请求将被转发到 url2png.com 服务器。

# facebook - 一键式电子邮件中的 Facebook Like 按钮

> ID：10694118
> 
> 赞同：1
> 
> 时间：2012-05-21T23:55:32.310
> 
> 标签：facebook, facebook-like, email

我一直在四处寻找，但没有成功。目前是否可以在电子邮件中实现 Facebook 点赞按钮，并且只需单击一次即可让某人喜欢内容？

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:11:44.410

Facebook 点赞按钮有以下两种方式之一：

1.  Facebook 显示正确代码的 Iframe（最常用）
2.  通过需要 javascript 的 Facebook SDK

上述两种方法都不能在电子邮件中使用，所以我的回答是：不，不可能。

# c# - 使用正则表达式在匹配前插入字符

> ID：10694121
> 
> 赞同：8
> 
> 时间：2012-05-21T23:55:40.907
> 
> 标签：c#, regex

我知道我可以使用 RegEx 将所有出现的“a”、“b”或“c”替换为字符串中的黑斜线字符，如下所示：

```
string result = Regex.Replace(input, "[abc]", "\\"); 
```

但是如何用反斜杠替换每个匹配项，然后是匹配的字符？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T00:00:06.093

您可以使用[MatchEvaluator](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)委托[和](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)[Replace](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx) ...

```
Regex.Replace(input, @"[abc]", m => string.Format(@"\{0}", m.Value)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-31T09:57:47.623

无需使用 any `MatchEvaluator`，`Regex.Replace`提供专用方法来访问替换模式中的整个匹配值：`$&`. 请参阅[*替换整个匹配*](https://docs.microsoft.com/en-us/dotnet/standard/base-types/substitutions-in-regular-expressions#EntireMatch)：

> 替换包括替换字符串中的`$&`整个匹配。通常，它用于在匹配字符串的开头或结尾添加子字符串。例如， ( `$&`) 替换模式在每个匹配项的开头和结尾添加括号。如果没有匹配，则`$&`替换无效。

采用

```
var result = Regex.Replace(input, @"[abc]", @"\$&"); 
```

[C# 演示](https://ideone.com/XspHAS)：

```
var s = "abcd";
var result = Regex.Replace(s, @"[abc]", @"\$&");
Console.WriteLine(result);
// => \a\b\cd 
```

# iphone - 动态正确定位子视图所需的数学

> ID：10694126
> 
> 赞同：0
> 
> 时间：2012-05-21T23:56:21.947
> 
> 标签：iphone, objective-c, macos, math, logic

漫长的一天，我的大脑似乎不想再与我合作了……

我为子视图数组中的每个视图迭代了一个 for 循环。每个子视图高度为 100 像素。当数组中有 1 项时，视图的 y 值需要设置为 0。当数组中有 2 项时，索引 0 处的视图需要 y 值为 100，索引处的项1 的值必须为 0。依此类推：

```
1 item: 0 = 0
2 items: 0 = 100, 1 = 0
3 items: 0 = 200, 1 = 100, 2 = 0
4 items: 0 = 300, 1 = 200, 2 = 100, 3 = 0 
```

我需要能够仅根据数组中的项目数正确地动态处理这个问题。这是我到目前为止的代码：

```
for (int i = 0; i < [subViews count]; i++) {
    NSView *v = (NSView *)[subViews objectAtIndex:i];
    [v setFrameOrigin:NSMakePoint(copy.view.frame.origin.x, i * 100)];//This gives me the opposite of what I want...
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:00:09.137

在循环之前插入：
`int subviewCount = [subViews count];`

而`[subViews objectAtIndex: (subviewCount - i - 1)]`不是`[subViews objectAtIndex: i]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:18:37.640

这将起作用：

```
y = 100 * ([subViews count] - 1 - i) 
```

另外，仅供参考，请尝试使用`for`以下格式的循环：

```
for(NSView *thisView in subViews)
{
    int i = [subViews indexOfObject:thisView]; //To get the "i position"
    //The rest of the code can be the same
} 
```

这样做的原因是因为如果 subViews 为空，一个`for(int i = 0; i < [subViews count]; i++)`循环至少会运行一次，执行时会崩溃`NSView *v = (NSView *)[subViews objectAtIndex:i];`

如果 subViews 为空，`for(NSView *thisView in subViews)`则不会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T00:42:12.730

```
int n = [subViews count];
for (NSView *v in subViews) {
    n--;
    [v setFrameOrigin:NSMakePoint(copy.view.frame.origin.x, n * 100)];
} 
```

# image-processing - 让蓝牙相机在处理中工作

> ID：10694127
> 
> 赞同：1
> 
> 时间：2012-05-21T23:56:36.277
> 
> 标签：image-processing, bluetooth, camera, processing

我想在处理草图中从我的 Ecamm BT-1 捕获视频。

我浏览了 BT-1 和[超媒体](http://ubaa.net/shared/processing/opencv/javadoc/hypermedia/video/package-summary.html)文档，并认为我已经得出结论，我需要在处理中使用蓝牙。但是，由于我对蓝牙的经验很少，我想知道我**是否有可能从蓝牙相机捕捉视频？**

..如果是这样，我应该从哪里开始学习处理中的蓝牙？

# php - 可以以数字开头命名 cookie 吗？

> ID：10694128
> 
> 赞同：2
> 
> 时间：2012-05-21T23:56:51.050
> 
> 标签：php, cookies, rfc, specifications

我想知道是否可以以数字开头命名 cookie。实际上，我已经使用 Apache2.2.21、PHP 5.3.8 和 Chrome 19.0.1084.46 测试了以下代码：

```
setcookie('1test', 'a value'); 
if (isset($_COOKIE['1test'])) echo $_COOKIE['1test']; 
```

在这些条件下它工作得很好，但我想知道：**是否有任何规范或 RFC 建议不要这样做？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T23:59:58.477

[我在规范](http://www.faqs.org/rfcs/rfc6265.html)中没有看到任何内容表明您不能使用数字作为 cookie 名称中的第一个字符。

# c - 这个操作有什么不合法的

> ID：10694132
> 
> 赞同：2
> 
> 时间：2012-05-21T23:57:01.770
> 
> 标签：c, sequence-points

即与此类似的代码，使打印输出未定义。

```
int a=41; a++ & printf("%d\n", a); 
```

我不知道这个操作到底叫什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T23:58:35.310

问题是它没有指定首先评估哪个， the`printf`或 the `a++`，并且因为一个对另一个有副作用（你要么读`a`然后写然后再读，或者读然后读然后写），你得到未定义的行为。

# php - 提醒脚本的 Cron 作业方法

> ID：10694133
> 
> 赞同：0
> 
> 时间：2012-05-21T23:57:09.213
> 
> 标签：php, linux, cron

我有一个类似于提醒/待办事项应用程序的 php 脚本。用户安排他们的警报，脚本会相应地通过电子邮件发送给他们。

我是新近接触 cron 作业的，但并不精通它的工作原理。请告诉我如何做到这一点。用户可以在 24 小时内随时设置提醒。假设我的脚本只能运行 30 秒，我是否必须每 30 秒发送一次 cron 作业以检查是否有人安排发送电子邮件？会不会太过分了？

# css - 外部 div 的高度不会根据内部 div 和元素而变化

> ID：10694134
> 
> 赞同：2
> 
> 时间：2012-05-21T23:57:13.067
> 
> 标签：css

我有一个 div（maincontent），它位于另一个 div（容器）中。这些 div 位于 aspx 页面中，并且我在内部 div（maincontent）中有许多 asp.net 控件。但它是如此有趣，该网站看起来像这样；

![在此处输入图像描述](../Images/6d1d9016dde6cd52bee14754fb3f8038.png)

[http://i.stack.imgur.com/omahx.jpg](https://i.stack.imgur.com/omahx.jpg)

白色部分（maincontent）应根据里面的元素调整大小。但它的高度显示为0px。

这里是maincontent和container的css；

```
#container
{
background: #FFF;
width: 1000px;
height:auto;
margin-right: auto;
margin-left: auto;
border-right: 2px solid #B0AA94;
border-left: 2px solid #B0AA94;
border-bottom: 2px solid #B0AA94;
border-radius: 0px 10px 0px 10px;
}

#maincontent
{
height: auto;
font-family: Trebuchet MS;
font-size: 10px;
color: Black;
margin-left: 30px;
margin-top: 40px;
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T23:59:22.020

这些容器中可能有很多浮动元素。你需要清除它们。您可以通过将容器的溢出属性设置为“自动”或“隐藏”来清除浮动元素。

小提琴：http: [//jsfiddle.net/JyAMb/](http://jsfiddle.net/JyAMb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T00:02:40.030

浮动 div 使其脱离正常的元素流。在浮动 div 之后添加`<div style="clear:both">`以清除它们。

# ruby-on-rails - 如何使自定义主机为设计邮件程序工作？

> ID：10694135
> 
> 赞同：4
> 
> 时间：2012-05-21T23:57:26.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有一个域名为“www.mysite.com”的应用程序，它托管着 Drupal，而“app.mysite.com”则托管着 Rails 应用程序。

我的情况是设计邮件 url 指向“www.mysite.com”而不是“app.mysite.com”。

在 devise.rb 中，我的设置如下所示：

```
config.mailer = "Devise::Mailer"
ActionMailer::Base.default_url_options = { :host => 'app.mysite.com' } 
```

在 production.rb 中：

```
config.action_mailer.default_url_options = { :host => 'app.mysite.com' } 
ActionMailer::Base.smtp_settings = 
{
  :address   => 'smtp.sendgrid.net',    # SendGrid SMTP server
  :domain    => 'mysite.com',           # SendGrid account domain name 
  :user_name => 'username',             # SendGrid user name
  :password  => 'password',             # SendGrid password
  :enable_starttls_auto => true,
  :port => 587, 
  :authentication => :plain,
} 
```

在 views/devise/mailer/reset_password_instructions.html.erb 中，确认链接如下所示：

```
<%= link_to 'Change my password', edit_password_url(@resource, :reset_password_token => @resource.reset_password_token) %> 
```

单击忘记密码链接后，它成功发送了电子邮件，并且在 localhost 上的工作方式类似于魅力，但 url 主机指向`www.mysite.com`而不是`app.mysite.com`并引发 404 错误。

我怎样才能将它指向正确的主机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T00:06:21.393

看起来设计中的默认行为是从主域发送。

这是一个可能有帮助的页面： [https ://github.com/plataformatec/devise/wiki/How-To:-Send-emails-from-subdomains](https://github.com/plataformatec/devise/wiki/How-To:-Send-emails-from-subdomains)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T02:45:25.933

在查看了设计 wiki 中描述的使用子域辅助方法发送电子邮件的代码后，我让它工作了。

```
module SubdomainHelper
  def with_subdomain(subdomain)
    subdomain = (subdomain || "")
    subdomain += "." unless subdomain.empty?
    host = Rails.application.config.action_mailer.default_url_options[:host]
    [subdomain, host].join
  end

  def url_for(options = nil)
   if options.kind_of?(Hash) && options.has_key?(:subdomain)
       options[:host] = with_subdomain(options.delete(:subdomain))
   end
   super
  end
end 
```

这个辅助方法所做的就是检查子域哈希是否存在。如果它存在，则该方法在主机之前添加子域并定义新主机名，否则为默认主机名。我没有经历这个过程，因为由于某种原因它在 rails 3.2 上不起作用，而且由于严格的时间限制，我不想浪费我的时间进一步深入研究它。

我想等等，我为什么不在邮件程序 url_for 方法中明确定义主机名，而不是遍历所有这些方法。

因此，我所做的只是在邮件程序中使用哈希键定义 link_to`host`并将值作为我的子域传递。之后它就像一个魅力:)。

在 views/devise/mailer/reset_password_instructions.html.erb 中，确认链接如下所示：

```
<%= link_to 'Change my password', edit_password_url(@resource, :reset_password_token => @resource.reset_password_token, :host => 'app.mysite.com') %> 
```

# maven - Maven 3.0 的“mvn release:perform”不喜欢不在其 git repo 根目录中的 pom.xml

> ID：10694139
> 
> 赞同：9
> 
> 时间：2012-05-21T23:58:12.903
> 
> 标签：maven, maven-3, pom.xml, maven-release-plugin

我有一个关于 Maven、maven-release-plugin、git 集成、pom.xml 以及在 repo 本地副本的子目录中而不是在根目录中的 pom.xml 的问题。

这是设置：

*   我有一个私人存储库数量有限的 github 帐户
*   我想（正在学习）使用 Maven 来组织我的构建/发布
*   我可能需要创建许多 Maven “项目”，每个 git 存储库有几个项目
*   每个 maven 项目都需要一个“pom.xml”来定义它的特性
*   我不能，或者至少不方便，将所有项目 pom.xml 文件放在 git 存储库的根目录中
*   所以我最终得到了这个项目的文件夹布局：
    *   git_repo_root_dir
        *   **project_A**文件夹
            *   pom.xml
            *   其他代码
        *   **project_B**文件夹
            *   pom.xml
            *   其他代码
        *   **等等**
        *   ...
*   我可以成功进入目录 git_repo_root_dir/project_A 并执行“mvn release:prepare”
*   我在 git_repo_root_dir/project_A 中的这一步失败了：“mvn release:perform”
    *   问题似乎是 git-tagged 代码已成功签出到 git_repo_root_dir/project_A/target/checkout/project_A 以准备发布构建，但是在签出之后“maven-release”插件进入目录 git_repo_root_dir/project_A /目标/结帐/。而不是 git_repo_root_dir/project_A/target/checkout/project_A/。进行实际构建，并且在尝试弄乱 pom.xml 之前，无法告诉“maven-release”插件进入源的特殊标记副本的子目录
*   问题：有没有办法解决这个问题？是否可以选择以某种方式告诉“mvn release:perform”转到子目录？

这是我在此过程中遇到的实际错误：

```
[INFO] --- maven-release-plugin:2.0:perform (default-cli) @ standard_parent_project ---
[INFO] Checking out the project to perform the release ...
[INFO] Executing: /bin/sh -c cd "/Users/___/DEV c8ion 01/maven_based_code/0maven/standard_parent_project/target" && git clone git@github.com:clarafaction/0maven.git '/Users/___/DEV c8ion 01/maven_based_code/0maven/standard_parent_project/target/checkout'
...
/* note, the pom.xml the build should go out of at this point is at
   '/Users/___/DEV c8ion 01/maven_based_code/0maven/standard_parent_project/target/checkout/standard_parent_project/pom.xml'
*/
...
[INFO] [ERROR] The goal you specified requires a project to execute but
    there is no POM in this directory
    (/Users/___/DEV c8ion 01/maven_based_code/0maven/standard_parent_project/target/checkout).
    Please verify you invoked Maven from the correct directory. -> [Help 1] 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T14:42:26.350

这应该可以解决问题：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>2.3.2</version>
    <executions>
        <execution>
            <id>default</id>
            <goals>
                <goal>perform</goal>
            </goals>
            <configuration>
                <pomFileName>your_path/your_pom.xml</pomFileName>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T03:24:00.487

您可以按照通常[告诉 Maven 从其他地方的 POM 运行](http://www.sonatype.com/books/mvnref-book/reference/running-sect-options.html#running-sect-custom-locations-option)的相同方式执行此操作：`-f`选项。`mvn --help`如此描述它：

```
-f,--file <arg>    Force the use of an alternate POM
                   file. 
```

要在发布中做到这一点，您只需将适当的选项传递给发布插件。您可以使用[执行目标的“参数”属性](http://maven.apache.org/plugins/maven-release-plugin/perform-mojo.html#arguments)来执行此操作。这个属性只是告诉发布插件一些额外的参数来附加到`mvn`它在发布时运行的命令。`-D arguments="-f path/to/pom"`您可以通过在发布插件配置的 pom 中附加或永久设置它来从命令行设置它，例如

```
<plugin>
    <artifactId>maven-release-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <arguments>-f path/to/pom</arguments>
    </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-22T06:29:00.303

首先要了解 git，它的约定是每个项目都有自己的存储库。接下来的事情是 Maven 有它的约定，将 pom.xml 放到它的项目的根目录中是最明显的。此外，您正试图与 Maven 对抗，我预测您将输掉这场战斗，让您的生活变得不轻松。如果您的项目 A 和 B 在某种程度上是相关的（相同的版本号或相同的发布时间），您应该考虑一个多模块构建，它会产生如下结构：

```
root (Git Repos)
  +-- pom.xml
       +--- projectA (pom.xml)
       +--- projectB (pom.xml) 
```

并且您可以从根目录一步完成 projectA（最好称其为模块）和模块 b 的发布。

# sql - 从 SQL Server 2008 迁移到 SQL Server 2012 Express

> ID：10694140
> 
> 赞同：0
> 
> 时间：2012-05-21T23:58:13.750
> 
> 标签：sql, sql-server-2008, sql-server-2012-express

我正在将一个应用程序从 SQL Server 2008 移动到 SQL Server 2012 Express，一切都很好，但有几个存储过程说我有语法错误。我在网上查看并没有找到答案 - SQL Server 2008（标准）中是否支持但在 SQL Server 2012 Express 中不支持的语法类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T02:03:33.700

我想有一种可能性，如果在 2008 年您使用的是 2000 兼容模式，并且您的存储过程具有旧式外连接：

```
SELECT o.name, c.name
FROM sys.objects AS o, sys.columns AS c
WHERE o.[object_id] *= c.[object_id]; 
```

此语法在 SQL Server 2000 中有效，但从那时起已被弃用。在 2005、2008 和 2008 R2 中，如果您使用 80 兼容模式，您可以将其插入。从 SQL Server 2012 开始，您不能再使用 80 兼容模式，因此上述代码将失败并显示：

> 消息 102，级别 15，状态 1，第 3 行
> '*=' 附近的语法不正确。

在 2008 年，您会收到以下错误消息：

> 消息 4147，级别 15，状态 1，第 3 行
> 查询使用非 ANSI 外连接运算符 ( `"*=" or "=*"`)。要在不修改的情况下运行此查询，请使用 ALTER DATABASE 的 SET COMPATIBILITY_LEVEL 选项将当前数据库的兼容级别设置为 80。强烈建议使用 ANSI 外连接运算符（LEFT OUTER JOIN、RIGHT OUTER JOIN）重写查询。在 SQL Server 的未来版本中，即使在向后兼容模式下也不支持非 ANSI 连接运算符。

但是，如果您按照错误消息中的建议更改数据库，它将起作用：

```
ALTER DATABASE foo SET COMPATIBILITY_LEVEL = 80; 
```

这似乎有点牵强。但是没有一些真实的信息，这是我唯一的猜测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T16:20:38.200

以下是SQL Server 2012 中已弃用的功能[列表——请特别查看 T-SQL 部分。](http://msdn.microsoft.com/en-us/library/ms143729.aspx)您还可以使用 SSDT (SQL Server Data Tools)，创建数据库的脱机副本，然后将版本定位设置为 SQL Server 2012 - 输出将显示版本之间的许多语法不兼容。[我写了一篇关于 SSDT 的博客，在这里](http://lynnlangit.wordpress.com/2011/11/21/sql-server-2012sql-server-data-tools/)可能会有所帮助。

# android - Android 的 SQLite 更新方法

> ID：10694142
> 
> 赞同：0
> 
> 时间：2012-05-21T23:58:38.160
> 
> 标签：android, sqlite, methods

我的问题是如何调用这样的方法。我已经知道如何实现它。下面是方法内容：

```
 public boolean updateDebt(long updateId, String debtName, String debtTotal,
        String debtApr, String paymentGoal) {

     ContentValues values = new ContentValues();
     values.put(MySQLiteHelper.COLUMN_DEBT_NAME, debtName);
     values.put(MySQLiteHelper.COLUMN_DEBT_TOTAL, debtTotal);
     values.put(MySQLiteHelper.COLUMN_APR, debtApr);
     values.put(MySQLiteHelper.COLUMN_PAYMENT, paymentGoal);
     String whereClause = MySQLiteHelper.COLUMN_ID + " = ?";
     String[] whereArgs = new String[]{ String.valueOf(updateId) };
     return database.update(MySQLiteHelper.TABLE_DEBT, values, whereClause, whereArgs) > 0; 
```

我的问题在于**调用**这个 updateDebt 方法。

想象一个带有四个字段和一个更新按钮的对话框。这些字段预先填充了表格数据。用户更改字段数据并点击更新，表应该更改。

这是调用之前的代码。请记住，我是通过 onListItemClick 内的对话框中的 onClick 调用它的。

（我已经编辑了很多不相关的东西）

```
List<Debt> values;
MyArrayAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.debts);

    datasource = new DebtDataSource(this);
    datasource.open();
    values = datasource.getAllDebt();
    adapter = new MyArrayAdapter(this, values);
    setListAdapter(adapter);

  }

 protected void onListItemClick(ListView l, View v, final int position, long id) {

    Debt item = values.get(position);

    final long boxId = item.getId();
    final String BoxName = item.getName();
    final String BoxBalance = item.getBalance();
    final String BoxApr = item.getApr();
    final String BoxPayment = item.getPayment();

 // (edited out: setting up EditText fields here with data from above)

    // set up button
    Button button = (Button) dialog.findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            datasource.updateDebt(Long.valueOf(boxId), BoxName, BoxBalance,
                    BoxApr, BoxPayment);
            values = datasource.getAllDebt();
            adapter.notifyDataSetChanged();
            dialog.dismiss();

        }
    });

    dialog.show();
} 
```

简单地说，当我点击更新时没有任何反应。对话框消失了，就是这样。logcat中什么都没有。我已经在 updateDebt() 方法中的更新方法之前注销了变量。我已经把它们烤回来了，所有的变量都完美匹配。数据库没有改变！这几天苦苦挣扎......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:46:36.407

试试这个：

```
public boolean updateDebt(long updateId, String debtName, String debtTotal, 
    String debtApr, String paymentGoal) {
    ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_DEBT_NAME, debtName);
    values.put(MySQLiteHelper.COLUMN_DEBT_TOTAL, debtTotal);
    values.put(MySQLiteHelper.COLUMN_APR, debtApr);
    values.put(MySQLiteHelper.COLUMN_PAYMENT, paymentGoal);
    return mDb.update(MySQLiteHelper.TABLE_DEBT, values, MySQLiteHelper.COLUMN_ID + "=" + updateId, null) > 0; 
```

并检查返回的布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:23:37.737

我终于想出了答案。这就是我正在做的事情：

1.  为特定债务行中的每一列创建一个字符串变量。
2.  使用该变量预先填充对话框中的字段。
3.  然后将相同的变量传递给更新方法

例如（简化）：

```
 String name = null;
 EditText et;

 name = debt.getName();
 et.setText(name);

 onclick {
     datasource.updateDebt(name);
 } 
```

我错过了 2 和 3 之间的步骤。在 onClick 方法中再次设置变量。一旦用户按下更新按钮，该变量必须重新设置为 EditText 字段的新值。像这样：

```
 String name = null;
 EditText et;

 name = debt.getName();
 et.setText(name);
 onclick {
     ***name = et.getText().toString();***
     datasource.updateDebt(name);
 } 
```

# apache - 在 Apache Web 服务器中替换 HTML 文件时不会更新

> ID：10694147
> 
> 赞同：0
> 
> 时间：2012-05-21T23:59:16.220
> 
> 标签：apache

我遇到的问题是，当我尝试用更新的 HTML 文件的新副本替换当前 HTML 文件时，当我尝试导航到页面时它不会替换它。

例如，我将输入 localhost/orderform.html 并获得一个页面。当我将 htdocs 文件夹中的 orderform.html 替换为同名的更新文件并导航回 localhost/orderform.html 时，它仍然是未更新的同一页面。

谁能帮我弄清楚如何解决这个问题？

# python - Python 在一个守护进程中运行两个具有不同计时器的函数

> ID：10694150
> 
> 赞同：1
> 
> 时间：2012-05-21T23:59:26.047
> 
> 标签：python, linux, timer, daemon, runner

我在两个不同的脚本中使用[此处讨论的模板 python 守护程序](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)来启动两个单独的守护程序。我想将它们组合成一个具有一个锁定文件等的守护程序脚本。但是，每个都有不同的循环计时器，一个在 1 分钟，另一个在 5 分钟。我从这个开始：

```
import os
import subprocess
import time
from daemon import runner

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/test.pid'
        self.pidfile_timeout = 5
    def run(self):

        try:
            while True:

                print "hello!"

                # set the sleep time for repeated action here:
                time.sleep(1)

        except Exception, e:
            raise

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

显而易见的事情是创建另一个类，但我希望 pidfile 之类的基本内容保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:16:15.070

我不完全明白你为什么要这样做，但这应该可行：

make`run_A`和`run_B`functions 做两个独立的事情（显然不是那些名字），包括 sleep 等等。这并不重要，但将这些放在`App`课堂之外可能是有意义的。

然后创建一个`run`如下所示的函数：

```
def run(self):
    threads = [
         threading.Thread(target=run_A),
         threading.Thread(target=run_B)
    ]

    for thread in threads:
         thread.start()
    for thread in threads:
         thread.join() 
```

这将为每个作业生成一个单独的线程，然后可以继续其愉快的方式。如果您在作业之间有任何共享资源，您将不得不担心锁定。

这假设作业执行速度很快，并且确切的时间并不重要；由于 CPython 的[GIL](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)，一次只有一个线程会运行 Python 语句，因此如果它们同时弹出，它们的运行速度会慢一些。`multiprocessing`如果您希望它们能够并行运行，您可以非常简单地将其切换为使用。

这将导致一些“计时器漂移”，因为您正在使用`sleep`（如果独立运行，您的守护程序也会如此）。如果这很重要，您可以改用中断，或者计算直到下一个五分钟倍数的时间，而不是仅仅休眠五分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:45:35.583

如果您的较长延迟不需要准确按时执行，您可以使用一个简单的累加器来跟踪较短操作的几个周期使用了多少时间。如果 LONG_DELAY 是 SHORT_DELAY 的整数倍，下面的代码将完美运行。如果它不是一个精确的倍数，则较长的周期仍将平均按请求的周期执行，但延迟可能会更短或更长，最多为 SHORT_DELAY 在任何给定的传递：

```
SHORT_DELAY = 60 # 1 minute
LONG_DELAY = 300 # 5 minutes

accum = LONG_DELAY

while True:
    do_short_delay_action()

    if accum >= LONG_DELAY:
        do_long_delay_action()
        accum -= LONG_DELAY

    time.sleep(SHORT_DELAY)
    accum += SHORT_DELAY 
```

# javascript - 我应该如何命名我的 javascript 库函数，以便它们与普通的旧 javascript 区分开来？

> ID：10694151
> 
> 赞同：1
> 
> 时间：2012-05-21T23:59:36.903
> 
> 标签：javascript

我正在用 js 编写自定义 UI 构建器。它使用工厂的实现来构建元素。为了确保清楚哪些函数是库的一部分，哪些是普通的旧 javascript 的一部分，我使用了`function _FunctionName()`. 但是，我发现总是做`Factory._FunctionName()`.

我应该删除命名约定（`function FunctionName()`）还是坚持它？

关于制作这样的库，是否有命名约定常见/最佳实践？

编辑：

```
var __PanelFactory = function () {
 //"private"
 var Panels = [];
 //exposed
 function _GetPanel(id) {
  //etc
 }
 return {
    _GetPanel: _GetPanel,
 };
};

var Factory = new __PanelFactory();
Factory. //this will show certain plain javascript functions 
         //like toString, constructor, hasOwnProperty, isPrototypeOf, etc...

//note that even jQuery can have the previous list used with something like
$(selector).

//So to differentiate I made sure my functions start with _
Factory._GetPanel(1);

//Should I just make it easy on myself and allow
Factory.GetPanel(1);

//Or is there value in leaving the naming convention in? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T00:50:20.983

以下是 javascript 中一些非常常见的约定。

## 常数

通常在 ALL_CAPS_WITH_UNDERSCORES

```
var MAX_COUNT = 100;
var BASE_URL = "http://example.com/api/"; 
```

## 变量

通常为小驼峰式

```
var currentCount = 0;
var userName = "timrwood"; 
```

## 构造函数

通常为大写驼峰式

```
function Factory(){}
var factory = new Factory(); 
```

## 方法

通常为小驼峰式

```
Factory.prototype.getPanel = function(){};
var factory = new Factory();
var panel = factory.getPanel(); 
```

## 私有变量/方法

通常在_lowerCamelCaseWithAUnderscorePrefix；

```
Factory.prototype._fetchPanel = function(){};
Factory.prototype.getPanel = function() {
    return this._fetchPanel();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:52:54.523

SO上已经有一个问题链接到一个关于Javscript编码约定（包括命名）的好文档：

*   [javascript 命名约定](https://stackoverflow.com/questions/921133/javascript-naming-conventions)
*   [http://javascript.crockford.com/code.html](http://javascript.crockford.com/code.html)

您询问的关键位：

*   使用命名空间（带有初始大写名称）。

这在某种程度上是可选的，因为`PanelFactory`不会与纯 Javascript 冲突。但是，如果您正在制作一个供第三方使用的公共 API，它可能会与其他库发生冲突：

```
var MyApp = MyApp || {};
MyApp.__PanelFactory = function () { // ... 
```

*   去掉`_`所有函数名前的下划线 ()。

您不需要下划线，因为已经使用 JavaScript 一段时间的人知道每个对象（`toString`等）中内置的默认实例范围函数：

```
MyApp.PanelFactory = function () {
  // ...
  function GetPanel(id) {
    //etc
  } 
```

*   使用初始大写名称命名对象构造函数，但使用初始小写名称命名全局或命名空间范围的函数和实例范围的函数：

这只是一个标准约定。它无助于区分内置函数，但正如我在上一项中所说，您不需要。

```
MyApp.PanelFactory = function () {
  // ...
  function getPanel(id) {
    //etc
  } 
```

*   使用初始小写名称命名局部变量：

这将帮助您区分命名空间、对象构造函数和对象的实例（您希望存在自定义实例范围的函数，通常称为“方法”）。

```
var factory = new MyApp.PanelFactory();
var panel = factory.getPanel(); 
```

# backbone.js - 主干.js 绑定到一个呈现的按钮

> ID：10694152
> 
> 赞同：0
> 
> 时间：2012-05-21T23:59:51.750
> 
> 标签：backbone.js

我已经开始使用backbone.js 创建一个Web 应用程序并且遇到了一些问题。它允许我创建新项目，完全没有问题。但是，它不会将事件绑定到在 render() 方法上创建的按钮。基本上，每次我添加一个新项目时，我都会得到一个编辑和删除按钮，我想将模型绑定到它们，以便我可以回顾性地编辑或删除该特定项目。

我的骨干观点：

```
ClientView = Backbone.View.extend({
    el: $("body"),
    initialize: function () {
        this.clients = new Clients(null, { view: this });
    },
    events: {
        "click #add-client": "AddClient",
        "click .edit-client": "EditClient",
        "click #save-client": "SaveNewClient"
    },
    render: function (model) {
        var compiled_template = _.template($("#Client-Template").html());
        $("#client-rows").append(compiled_template(model.toJSON()));
        $("input:button", $("#client-rows")).button();
        $("#addClientModal").modal("hide");
        return this;
    },
    AddClient: function (model) {
        $("#addClientModal h3").text("Add Client");
        $("#addClientModal").modal("show");
    },
    EditClient: function (model) {
        $("#addClientModal h3").text("Edit Client");
        $("#addClientModal").modal("show");
    },
    SaveNewClient: function () {
        var client_firstName = $("#clientFirstName").val();
        var client_lastName = $("#clientLastName").val();
        var client_email = $("#clientEmail").val();
        var client_address = $("#clientAddress").val();
        var client_model = new Client({ FirstName: client_firstName, LastName: client_lastName, Email: client_email, Address: client_address });
        this.clients.add(client_model);
        $("#clientFirstName, #clientLastName, #clientEmail, #clientAddress").val("");
        $("#addClientModal").modal("hide");
    }
}); 
```

我的模板：

```
<script id="Client-Template" type="text/template">
<tr>
    <td><%=FirstName%></td>
    <td><%=LastName%></td>
    <td><%=Address%></td>
    <td>
        <input type="button" class="btn btn-info .edit-client" value="Edit" />
        <input type="button" class="btn btn-danger" value="Delete" />
    </td>
</tr>
</script> 
```

不幸的是，我无法粘贴整个应用程序，但如果幸运的话，应该相对简单地注意到我提供的内容哪里出错了。显然，如果您需要我提供更多详细信息，请务必询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:04:13.810

您的按钮上的类属性中有一个错误的点 (.)

```
.edit-client 
```

应该

```
edit-client 
```

# iphone - 从循环中识别 UIButton

> ID：10694165
> 
> 赞同：0
> 
> 时间：2012-05-22T00:00:50.210
> 
> 标签：iphone, loops, uibutton

我已经看到一个问题/答案的结果与我正在寻找的结果相似，但所讨论的代码比我现在要复杂得多。

我正在使用 for() 循环从数组中创建一堆按钮。然后，我有一个动作，但我无法识别该按钮。所以：

```
NSArray *numbers = [NSArray arrayWithOjbects:@"1", "2", "3", nil];

for (int i = 0; i <  [numbers count]; i++) {

   button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
   [button addTarget:self action:@selector(recognize:) forControlEvents:UIControlEventTouchDown];
   [button setTitle:[numbers objectAtIndex:i] forState:UIControlStateNormal];
   button.frame = CGRectMake(x, y, w, l);

   } 
```

然后：

```
-(void) recognize:(id)sender {

   NSLog (button.titleLabel.text);

 } 
```

但是，无论是否按下按钮，我都只能得到数组的最后一个成员 (3)。我想我在 -(void)recognize:(id)sender... 中遗漏了一个步骤...我应该知道...但它现在完全逃离了我。

/弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:12:12.313

循环的每次迭代都分配给`button`变量。当循环退出时，它只会保存您分配给它的最后一个值。该`button`变量似乎是一个实例变量——它是类的实例所独有的，而不是按钮所独有的。

做你想做的事的便捷方法是访问`sender`iOS 为你的方法提供的变量。这包含产生相关事件的对象，在本例中为按钮。

```
NSLog (@"%@", ((UIButton *)sender).titleLabel.text); 
```

另请注意，以这种方式记录文本值是不可接受的。如果它包含一个格式字符串（例如`%@`），它将期待一个进一步的参数，它没有得到，并且会崩溃。 **这可能是一个安全漏洞。** 当您有一个要记录的字符串变量时，请使用`%@`它来记录它，如上所述。Xcode 应该已经警告过你了。不要忽视警告。

# javascript - 使用 jquery 或 javascript 拆分具有不同分隔符的字符串

> ID：10694168
> 
> 赞同：0
> 
> 时间：2012-05-22T00:01:28.333
> 
> 标签：javascript, jquery, split

我们可以使用 javascript split 方法将字符串拆分为子字符串数组。例子：

```
var timeformat="HH:MM:SS";
var timeformatarray=timeformat.split(":"); 
```

如果分隔符不是常量，是否有一种简单的方法来拆分字符串。实际上，我必须拆分可能以任何格式出现的时间格式，例如：

```
var timeformat="HH hr : MM min : SS sec";
var timeformat="HHhour:MMminute:SSsecond";
var timeformat="HHh MMm SSs"; 
```

唯一不变的是 HH、MM 和 SS。Timeformat 是一个选项，用户可以指定他们想要显示的时间格式。“HH”、“MM”和“SS”是常量文本（不是数字），这三个是不会改变的固定常量。唯一可以改变的是时间格式字符串中的后缀和分隔符，如上面的示例所示。

我想要一种将时间格式字符串拆分为数组的方法，以便我可以处理它。我希望结果是：

```
timeformat[0] = "HH"
timeformat[1] = " hr : " <- with spaces (if any)
timeformat[2] = "MM"
timeformat[3] = " min : "
timeformat[4] = "SS"
timeformat[5] = " sec" 
```

使用这个数组，我将格式化时间并添加相应的后缀和分隔符。我尝试了各种方法，使用正则表达式并遍历每个字符，但它们效率不高且不直接。我在这里先向您的帮助表示感谢。

**解决方案：** 我能够通过使用正则表达式、拆分和数组创建一个适用于格式字符串的方法来解决该问题。我相信会有更好的解决方案，但我什么也得不到，所以这是我解决问题的方法。我会感谢`Stephen C`正则表达式的方向。

```
function GetTimeFormatArray(timeformatstring){
        var timesuffixes = timeformatstring.split(/HH|MM|SS/);
        timesuffixes= $.grep(timesuffixes,function(n){
            return(n);
        });

        var pattern = timesuffixes.join('|');
        var timeprefixes = timeformatstring.split(new RegExp(pattern));
        timeprefixes = $.grep(timeprefixes,function(n){
            return(n);
        });

        var timeFormatArray = [];
        for(var i = 0; i < timesuffixes.length; i++){
            timeFormatArray.push(timeprefixes[i]);
            timeFormatArray.push(timesuffixes[i]);
        }
        return timeFormatArray;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:19:24.663

如果我在 Java 中执行此操作，我会从[look-aheads 和 look-behinds](http://www.regular-expressions.info/lookaround.html)组成分隔符正则表达式。不幸的是，Javascript 正则表达式不支持后视。

我认为你需要以艰难的方式做到这一点。将字符串与类似的东西匹配

```
 /(.*)HH(.*)MM(.*)SS(.*)/ 
```

然后索引匹配器返回的数组。如果`HH`//可以以任何顺序出现，等等，您可能需要一个更复杂的正则表达式，如下所示`MM`：`SS`

```
 /(.*?)(?:(HH|MM|SS)(.*?))*/ 
```

这是使用非急切匹配和非捕获组。您必须处理诸如“HHMMSS”（即“分隔符”之间没有空格）和“SS one SS”（同一“分隔符”的多个实例）之类的情况。另请注意，这种模式相当危险，因为精心设计的输入会触发大量的回溯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:05:30.300

该函数[`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)可以将正则表达式作为分隔符。[这是一个示例](http://jsfiddle.net/TK42y/1/)，但我不是正则表达式方面的专家，因此可能不会对其进行优化。

```
var test = 'HH hr : MM min : SS sec';

//split by ":" or space with optional leading and trailing space
console.log(test.split(/\s?[\s:]\s?/));​
//["HH", "hr", "MM", "min", "SS", "sec"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T00:21:54.303

```
var rx = /^(\d{2})(.*?)(\d{2})(.*?)(\d{2})(.*?)$/
var timeformat = [
    "11 hr : 22 min : 33 sec",
    "11hour:22minute:33second",
    "11h 22m 33s"
];

for (var i = 0; i < timeformat.length; i++) {
    console.log(timeformat[i])
    try {
        for (var j = 0; j < timeformat[i].match(rx).length; j++) {
            console.log('\tmatch['+j+'] = ',timeformat[i].match(rx)[j]);
        }
    } catch(e) {}
} 
```

# iphone - iPhone - 确定 ImageView 显示的图像

> ID：10694169
> 
> 赞同：0
> 
> 时间：2012-05-22T00:01:41.333
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

> **可能重复：**
> [UIImageView - 如何获取分配的图像的文件名？](https://stackoverflow.com/questions/1740274/uiimageview-how-to-get-the-file-name-of-the-image-assigned)

我不知道如何找到图像视图正在显示的图像文件，或者它是否正在显示。例如，假设我有一个图像视图。通过图像视图的标签，我希望能够确定通过图像视图显示的文件（文件名）？

我似乎无法找到我认为是一个非常简单的问题的答案......

我知道我可以像这样更改图像视图的图像...

```
[(UIImageView*)[self.view viewWithTag:ImageViewTag] setImage:[UIImage imageNamed:imageTitle]]; 
```

但是我怎样才能看到图像视图已经显示的图像呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T00:20:05.267

正如本评论中的链接所解释的，没有本地方法可以做到这一点。但是，您可以自己轻松地创建此行为。

您可以继承 UIImageView 并添加一个新的实例变量：

```
NSString* imageFileName; 
```

然后你可以覆盖 setImage，首先将 imageFileName 设置为你正在设置的图像的文件名，然后调用 [super setImage:imageFileName]。像这样的东西：

```
-(void) setImage:(NSString*)fileName
{
   imageFileName = fileName;
   [super setImage:fileName];
} 
```

仅仅因为它不能在本地完成并不意味着它是不可能的:)

# android - 将所有不在 Android 播放列表中的音乐作为列表查找

> ID：10694173
> 
> 赞同：0
> 
> 时间：2012-05-22T00:02:15.403
> 
> 标签：android, sqlite, playlist, android-contentprovider, android-cursorloader

我想使用 CursorLoader 获取不在给定播放列表中的所有音乐。是否可以？

我们可以使用以下代码获取列表中的所有音乐

```
loader = new CursorLoader(context, MediaStore.Audio.Playlists.Members
                .getContentUri("external", playlistID), proj,
                MediaStore.Audio.Media.IS_MUSIC + " != 0 ", null, ORDER_BY); 
```

但我需要做相反的事情，即获取所有不在给定播放列表中的音乐。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:42:00.720

我不能帮你解决你的问题`LowAcceptRateException`——这是一个严重的故障，从长远来看可能会干扰问题的回答——但是如果你不介意做一些难以维护的事情并滥用`MediaProvider`你可以做的内部功能像这样获取*不在*（特定）播放列表中的歌曲。

```
loader = new CursorLoader(context, Audio.Media.EXTERNAL_CONTENT_URI, proj,
            Media._ID + " NOT IN (SELECT audio_id FROM audio_playlists_map WHERE playlist_id=?) AND " + 
            MediaStore.Audio.Media.IS_MUSIC + " != 0 ", 
            new String[]{String.valueOf(playlistID}, ORDER_BY); 
```

**编辑：**更正`audio_playlist_map`为`audio_playlists_map`

# ruby - 在 Ruby 中实现 ECMA-376 sheetProtection 哈希算法

> ID：10694174
> 
> 赞同：1
> 
> 时间：2012-05-22T00:02:38.600
> 
> 标签：ruby, excel, password-encryption

[ECMA-376 规范](http://www.ecma-international.org/publications/standards/Ecma-376.htm)的第 1 部分 （参见 18.3.1.85 sheetProtection）详细说明了以下三个属性，以生成用于工作表保护的密码哈希：

算法名称

（默认为 SHA-1）

盐值

指定在使用上述属性值定义的散列算法对其进行散列以生成 hashValue 属性之前添加到用户提供的密码之前的盐，并且在尝试生成散列之前也应将其添加到用户提供的密码比较值。

自旋计数

当尝试比较用户提供的密码，其值存储在 hashValue 属性中。

我希望这样的工作：

```
def hash_password(v)
  require 'digest/sha1'
  spin_count = 10
  salt_value = Digest::SHA1.hexdigest(rand(36**8).to_s(36))
  salty = salt_value + v
  hash_value = nil
  spin_count.times do |count|
    hash_value = Digest::SHA1.hexdigest((hash_value ||= salty ) +  Array(count).pack('V'))
  end
 hash_value 
```

结尾

如果有人能指出我在这里做错了什么，我将不胜感激。

编辑：提供更多背景信息：

此伪代码是从 axlsx gem 中提取的，用于创作 xlsx 电子表格。[您可以在此处](https://github.com/randym/axlsx/blob/master/lib/axlsx/workbook/worksheet/sheet_protection.rb)查看第 155 行左右的实际代码

我们已经能够根据 OpenOffice [http://www.openoffice.org/sc/excelfileformat.pdf](http://www.openoffice.org/sc/excelfileformat.pdf)，修订版 1.42，第 115 页 (21.05.2012)的 Daniel Rentz 提供的算法实现更旧版本的密码散列但是，这与规范中列出的内容非常不同。

如果你 fork 存储库，你可以运行 examples/sheet_protection.rb 来创建一个包含两张工作表的工作簿，一张使用 ECMA 规范，另一张使用 OpenOffice 的版本。如果您单击“工具”->“保护”->“禁用保护”（此处从日语翻译，实际菜单文本可能不同）并输入密码 - ECMA 版本失败。

# 更新：2012.05.23

再深入一点，规范的第四部分（15.3.1.5、15.3.1.6）表明有一个可选的密码属性，它符合“过渡一致性类”的旧样式表保护生成

密码 (Password) 指定编辑此图表工作表所需的密码的哈希值。哈希是使用 workbookProtection 元素的 revisionPassword 属性中定义的逻辑生成的（第 1 部分，第 18.2.29 节）

这至少解释了为什么 OpenOffice 算法仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:30:42.443

该算法是否假设您从零或一开始？

```
irb(main):006:0> 3.times do |t| p t; end
0
1
2
=> 3 
```

也许试试

```
1.upto(10) do |count| 
```

反而？

另外，你确定你的号码是小端序的吗？您可能需要一个不同的 pack 指令来确保 little-endian-ness。

[https://img.skitch.com/20120522-gcsbh4eap247eh2jrubm4qm9tm.jpg](https://img.skitch.com/20120522-gcsbh4eap247eh2jrubm4qm9tm.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-20T14:58:51.190

我在尝试重新实现 Excel 2013 的密码哈希算法时发现了这一点，所以我把它放在这里是为了将来帮助自己。

Excel 执行以下操作：

*   连接`saltValue`+ 密码的字节（作为 UTF-16 字节）。
*   根据`algorithmName`salt + 密码（现在默认为 SHA512）计算哈希。
*   将循环计数（从 0 开始）作为四个 little-endian 字节附加到散列结果中。
*   计算最后一个结果的哈希值 + 循环计数。
*   重复计算`spinCount`次数。

最终的哈希结果是它存储在`hashValue`.

所以像下面这样的东西应该可以工作。

```
def hash_password(v)
  require 'digest/sha1'
  spin_count = 10
  salt_value = Digest::SHA1.hexdigest(rand(36**8).to_s(36))
  salty = salt_value + v
  hash_value = Digest::SHA1.hexdigest(salty)
  spin_count.times do |count|
    hash_value = Digest::SHA1.hexdigest(hash_value + Array(count).pack('V'))
  end
hash_value 
```

# javascript - WP jspPane 宽度错误

> ID：10694179
> 
> 赞同：1
> 
> 时间：2012-05-22T00:04:16.120
> 
> 标签：javascript, wordpress

我在我的 wordpress 上安装了名为“WP jScrollPane”的插件。当我将 div 的宽度设为 1140px 时，正如您在窗格中看到的图像宽度变为 124px。我该如何解决这个问题？

截图：[http ://s16.postimage.org/694o99qnp/jsppane.jpg](http://s16.postimage.org/694o99qnp/jsppane.jpg)

直播：http: [//goo.gl/Vg9dx](http://goo.gl/Vg9dx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:22:03.580

将杂散值 vh (width-height) 替换为 0

# mysql - 如何进行更快的 best-n-per-group 查询？

> ID：10694181
> 
> 赞同：1
> 
> 时间：2012-05-22T00:04:20.940
> 
> 标签：mysql, greatest-n-per-group

我正在使用这个查询：

```
SELECT district, id
FROM adverts ls
GROUP BY district, id
HAVING (

SELECT count( * )
FROM adverts
WHERE district = ls.district
AND id > ls.id
) <5
ORDER BY district, id DESC ;

LIMIT 0 , 30 
```

大约需要 35 秒。这是解释：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   PRIMARY     ls  range   NULL    i_id    5   NULL    16166   Using index for group-by; Using temporary; Using f...
2   DEPENDENT SUBQUERY  ilan_genel  ref     PRIMARY,i_id,i_ozellik_id,i_tip_fiyat,i_tip_id,i_d...   i_durum_id  2   func    25  Using where; Using index 
```

有没有办法让它更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:27:46.767

试试这个：

```
SELECT    district, id, COUNT(b.district)
FROM      adverts a INNER JOIN adverts b
              ON a.district = b.district
WHERE     b.id > a.id
GROUP BY  district, id 
HAVING    COUNT(b.district) < 5
ORDER BY  district, id DESC 
```

根据定义，`Joins`比**快**。`subqueries`

# objective-c - 使用 Unity、Mono 和 P/Invoke 将 Objective-C 编组到 C#

> ID：10694183
> 
> 赞同：1
> 
> 时间：2012-05-22T00:05:05.653
> 
> 标签：objective-c, mono, pinvoke, unity3d

我正在尝试从 Objective-C 端调用 Unity C# 脚本。带有 void 参数的函数可以工作。如果另一端的脚本是 Javascript，则带有字符串参数的函数可以工作。

如果另一端的脚本是 C#，则带有字符串参数的函数会崩溃。崩溃是 BAD_EXEC。

我很确定我没有正确地编组参数。网络上确实没有太多关于此的文档。

我已经阅读了 Embedding Mono 并查看了 Github 上非常古老的示例。

[http://www.mono-project.com/Embedding_Mono](http://www.mono-project.com/Embedding_Mono) https://github.com/mono/mono/tree/master/samples/embed

类型和函数声明如下：

```
typedef void* MonoDomain;
typedef void* MonoAssembly;
typedef void* MonoImage;
typedef void* MonoClass;
typedef void* MonoObject;
typedef void* MonoMethodDesc;
typedef void* MonoMethod;
typedef void* MonoString;
typedef int   gboolean;

MonoDomain*     mono_domain_get();
MonoAssembly*   mono_domain_assembly_open(MonoDomain* domain, const char *assemblyName);
MonoImage*      mono_assembly_get_image(MonoAssembly* assembly);
MonoMethodDesc* mono_method_desc_new(const char* methodString, gboolean useNamespace);
MonoMethodDesc* mono_method_desc_free(MonoMethodDesc* desc);
MonoMethod*     mono_method_desc_search_in_image(MonoMethodDesc* methodDesc, MonoImage* image);
MonoObject*     mono_runtime_invoke(MonoMethod* method, void* obj, void** params, MonoObject** exc);
MonoClass*      mono_class_from_name (MonoImage *image, const char* name_space, const char *name);
MonoString*     mono_string_new(MonoDomain* domain, const char* str); 
```

然后声明变量：

```
@interface UnityObject : NSObject
{
    MonoDomain*     domain;
    NSString*       assemblyPath;
    MonoAssembly*   monoAssembly;
    MonoImage*      monoImage;
    MonoMethodDesc* runChallengeDesc;
    MonoMethod*     runChallengeMethod;
}
@end 
```

然后在初始化中：

```
- (id)init
{
    if ((self = [super init]))
    {
        assemblyPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"Data/Managed/Assembly-CSharp-firstpass.dll"];
        domain = mono_domain_get();
        monoAssembly = mono_domain_assembly_open(domain, assemblyPath.UTF8String);
        monoImage = mono_assembly_get_image(monoAssembly);
        runChallengeDesc = mono_method_desc_new("Marshal:RunChallenge(string)", FALSE);
        runChallengeMethod = mono_method_desc_search_in_image(runChallengeDesc, monoImage);
        mono_method_desc_free(runChallengeDesc);
    }

    return self;
} 
```

以上所有工作都按预期工作。

然后调用该方法：

```
NSString *msg = @"Some message string";
MonoString *str = mono_string_new(domain, msg.UTF8String);
void *args[1];
args[0] = &str;
if (runChallengeMethod)
    mono_runtime_invoke(runChallengeMethod, NULL, args, NULL); 
```

我很确定我没有正确地编组参数。崩溃是 BAD_EXEC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:16:18.440

我建议您详细说明您发布的代码。使用您发布的代码，假设“...”已正确实现，您正在执行一个带有 1 个未定义参数的*静态*方法。

你至少需要这样做：

```
void* args[1];

args[0] = mono_string_new(domain, msg.UTF8String);

mono_runtime_invoke (method, NULL, args, NULL); 
```

我只能猜测从你的真实代码到这个问题的转录做得很差，因为你发布的几乎 0 代码是有效的。

[http://www.mono-project.com/Embedding_Mono#Creating_objects](http://www.mono-project.com/Embedding_Mono#Creating_objects)上的代码显示了如何在 Mono 字符串未输出或通过 ref 时传递它们。

# asp.net - 动态显示谷歌地图图标而不是位置

> ID：10694190
> 
> 赞同：0
> 
> 时间：2012-05-22T00:06:03.063
> 
> 标签：asp.net, google-maps, gridview

我正在开发一个应用程序，该应用程序根据 GPS 设备发送的信号显示车辆的位置。我在 ASP.Net 中有一个 gridview，它使用存储过程根据参数显示该信息，然后使用以下内容填充 gridview：

```
DataSetTableAdapters.sp_GetPositionTableAdapter gp = new DataSetTableAdapters.sp_GetPositionTableAdapter
gridview.DataSource=  gp.GetData(parameters) 
```

这些列是：到达时间、地址、位置（纬度、经度）。但是，我不想显示这样的位置>>“32.546750000000000，-116.947848333333000”，而是显示一个重定向到谷歌地图页面的图标，并标记了车辆的位置。或者可能会显示一个弹出窗口。

做这个的最好方式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:00:14.597

使用 href='http://maps.google.com/maps?q=32.546750000000000, -116.947848333333000' 输出锚标记的最简单方法

最好的方法是学习如何使用 Google Maps API 并在地图上的适当位置创建标记。

简单的例子：

```
<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?sensor=false">
</script>
<style type="text/css">
    #map_canvas { height: 100%; }
    @media print {
        html, body { height: auto; }
        #map_canvas { height: 650px; }
    }
</style>

<script type="text/javascript">
function initialize() {
    var myLatlng =
        new google.maps.LatLng(32.546750000000000, -116.947848333333000);
    var myOptions = {
        zoom: 4,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(
        document.getElementById("map_canvas"), myOptions);
    var marker = new google.maps.Marker({
        position: myLatLng, 
        map: map,
        title: "Hello World!"
    });
}

if (window.addEventListener) { // W3C standard
    window.addEventListener('load', initialize, false); // NB **not** 'onload'
}
else if (window.attachEvent) { // Microsoft
    window.attachEvent('onload', initialize);
} 
</script>

<div id="map_canvas" style="height: 400px; width: 800px;"></div> 
```

# ruby - 如果“require sinatra”在另一个文件中，为什么无法加载 sinatra？

> ID：10694192
> 
> 赞同：4
> 
> 时间：2012-05-22T00:06:15.637
> 
> 标签：ruby, require

我有 web.rb 文件可以正常工作。我想将所有需要文件移动到一个 requires.rb 文件中，并从我的所有 .rb 文件中调用此文件，并使用基于调用者文件名的条件来要求所需的内容。

我在**'require pp'**、**'ruby-growl'**上对其进行了测试，并且效果很好。`require sinatra`但如果 sinatra在另一个文件中，则不会加载。

我可以`require sinatra`在不同的文件中吗？或者一般来说我可以在不同的文件中有更好的要求吗？

使用

*   ruby 1.8.7 (2010-08-16 补丁级别 302) [i386-mingw32]
*   西纳特拉 (1.3.2)
*   宝石 1.3.7

*   从dos窗口运行脚本`ruby script_name.rb`

下面是我的 requires.rb 中的几行。当我运行 web.rb 时，我可以看到文本“加载网络需要”。请注意，所有 .rb 文件都需要“rubygems”。如果我评论 `require 'sinatra' 我会收到一条错误消息 'web.rb:17: uninitialized constant Rack (NameError)'。如果没有注释 require ，则 ruby​​ 完成后屏幕上没有任何消息，也没有错误消息。

```
called_from=caller[0].split(":")[0]
puts "loading web 'requires' for file: #{called_from} ..." if (["web"].any?{|s| called_from[s]})

require "c:\\edutester\\others\\settings.rb"

require 'rubygems'
require 'sinatra'           if (["web"].any?{|s| called_from[s]}) 
```

# 更新

我简化了测试用例。我有两个文件。如果我在文件中只使用 test.rb 和 require 。一切正常。如果我使用 test_require.rb 文件，我可以看到“正在加载”文本，我会说正在加载或正在处理某些内容，因为完成 test.rb 需要一秒钟左右的时间

测试.rb

```
#require "c:\\edutester\\playground\\test_require.rb"

require 'rubygems' 
require 'sinatra'

get '/' do

    "yes"
end 
```

和 test_require.rb

```
puts "loading..."
require 'rubygems' 
require 'sinatra' 
```

* * *

Sinatra 无法加载 = 我没有得到通常的内容

```
== Sinatra/1.3.2 has taken the stage on 4567 for development with backup from Thin 
>> Thin web server (v1.2.7 codename No Hup) 
>> Maximum connections set to 1024 
>> Listening on 0.0.0.0:4567, CTRL+C to stop 
```

我无法从浏览器访问 Web 服务器。而且根本没有消息。嗯，有一个空行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T02:16:31.717

当您直接使用类似的东西运行 Sinatra 程序时`ruby my_app.rb`，Sinatra 可以自动启动 Web 服务器。Sinatra通过检查[设置](http://www.sinatrarb.com/configuration.html#__enabledisable_the_builtin_web_server)[是否为 来确定是否运行此内置服务器`:run``true`](http://www.sinatrarb.com/configuration.html#__enabledisable_the_builtin_web_server)。

value 的默认值`:run`是通过检查`:app_file`设置是否与正在执行的 Ruby 文件相同来确定的，即`$0`.

Sinatra[通过使用执行的第一个文件来](https://github.com/sinatra/sinatra/blob/v1.3.2/lib/sinatra/main.rb#L6-L9)[确定`:app_file``require 'sinatra'`](https://github.com/sinatra/sinatra/blob/v1.3.2/lib/sinatra/main.rb#L6-L9). 在这种情况下，当您在then is`require 'sinatra'`的顶部时，Sinatra 会启动内置服务器。当您使用, is时，需要 Sinatra 的文件，因此, is ，并且由于它们不匹配，因此不会启动内置服务器。`test.rb``:app_file``$0``test_require.rb``$0``test.rb``:app_file``test_require.rb`

`:app_file`要解决此问题，您可以在您的`test.rb`（或任何地方）中明确设置`web.rb`：

```
set :app_file, __FILE__ 
```

在您需要 Sinatra*之后，*您需要执行此操作。您也可以直接 set `:run`，尽管这会不太灵活，因为它每次都会运行内置服务器，`config.ru`例如，如果您使用的是您不希望的：

```
enable :run 
```

尽管这应该可以解决您的问题，但我个人认为将其`require 'sinatra'`与 Sinatra 代码保持在一起会更好。

# jquery - Ajax在hashchange之前保存div的滚动位置（BBQ插件）

> ID：10694193
> 
> 赞同：0
> 
> 时间：2012-05-22T00:06:16.133
> 
> 标签：jquery, ajax, cookies, jquery-bbq

我正在为我的 ajax hashchange 事件和历史状态使用 jquery BBQ 插件。我的问题是它不保存滚动位置，所以当我使用后退按钮时，滚动条没有定位在 hashchange 之前的位置，而是与按下后退按钮之前相同的像素位置。我已经看到这对许多人来说都是一个问题，有些人提到使用 cookie，但我不知道如何使用 BBQ 插件，因此感谢所有帮助。理想情况下，我希望这样当页面正常导航到时，滚动条位于顶部，但是当按下后退按钮时，滚动条位于该页面上的位置。这是我的代码：

```
$(function(){

var cache = {
    '': $('.content')
};

$(window).bind( 'hashchange', function(e) {
    var url = $.param.fragment();
    var scroll = $('#wrapper').scrollTop();
    $( '.contentarea' ).children( ':visible' ).hide();
    if ( cache[ url ] ) {
        cache[ url ].show();
    } else {
        $( '.content-loading' ).show();
        cache[ url ] = $( '<div class="pageURL"/>' )
        .appendTo( '.contentarea' )
        .load( url, function(){
            $( '.content-loading' ).hide();
        });
    }
})

$(window).trigger( 'hashchange' );

$('#btn-back').click(function(){
    parent.history.back();
    return false;
});
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:04:13.757

找到了一种更简单的方法来解决问题并获得所需的结果。

与其将内容直接加载到容器 div 中，不如在正在加载的页面的模板文件中，将整个页面内容包装在它自己的容器 div 中。使其宽度和高度为 100%，使其与内容加载到的容器 div 的大小完全相同，并在新容器 div 上启用溢出（最好在原始容器 div 上将溢出设置为隐藏）。

这样做，原始容器 div 将永远不会有滚动位置，但模板文件中的新容器会有滚动位置，即 div 和滚动位置将与页面一起自动保存在浏览器历史记录中。现在，前进然后后退将保持新容器的位置，并且用户将完全位于离开页面之前的位置。

;-)

# javascript - IE9 问题：动态创建（通过 innerHTML）选项按钮和复选框不起作用

> ID：10694198
> 
> 赞同：5
> 
> 时间：2012-05-22T00:07:06.010
> 
> 标签：javascript, jquery, internet-explorer

我正在做一个项目，该项目要求我能够从页面中获取 html 并将其插入到主网页中。它完全可以在 Chrome 和 Firefox 中运行，但在 IE 9 中失败。这是我使用的代码的一部分。

> ```
>  if (!element.data('cache')) {
> 
>        $('#contentHolder').html('<img src="ajax_preloader.gif" width="64" height="64" class="preloader" />');
> 
>       $.get(element.data('page'), function (msg) {
>          $('#contentHolder').html(msg);
> 
>          /* After page was received, add it to the cache for the current hyperlink: */
>             element.data('cache', msg);
>             setTimeout("checkonbox()", 100);
>         });
>     }
>     else {
>          $('#contentHolder').html(element.data('cache'));
>         setTimeout("checkonbox()", 100);
>     } 
> ```

注入的 HTML 是

```
<table style="width:400px; height: 388px; text-align: left;" align="left">
<tr>
<td><input id="Checkbox0" type="checkbox"  onclick="changebuttons();" checked="true">  
Exclusive.</input></td>
</tr>
</table> 
```

加上更多的选项按钮。

一切看起来都很完美，但我无法单击复选框或选项按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:16:52.037

代替

```
element 
```

和

```
$(element) 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:33:58.170

我在您的问题中看不到完整的代码。但我假设您没有将代码放在初始化程序中：

```
 $(function () {
      // your jQuery code here.
    }); 
```

这将帮助浏览器初始化与其元素关联的事件。试试这个并检查是否发生任何变化。

如果javascript有任何错误，也尝试消除。尝试使用可用的浏览器进行调试。我遇到过的最好的 javascript 调试器是**FireBug**，它是一个 firefox 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T08:42:41.453

任何动态添加到 dom 的内容在加载到页面后都必须绑定动作。仅通过 AJAX 将代码放入其中不会使其运行。

尝试在您的函数中执行此操作：

```
$.get(element.data('page'), function (msg) {
         $('#contentHolder').html(msg);

         //this will bind your input field  via javascript
         $('input#Checkbox0').click(changebuttons);

         /* After page was received, add it to the cache for the current hyperlink: */
            element.data('cache', msg);
            setTimeout("checkonbox()", 100);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T05:34:22.807

我从来没有见过这样写的输入标签。我还没有早上喝咖啡，但我相当肯定它应该是自动关闭的，在这种情况下，看到 IE 对你所拥有的东西大喊大叫，我一点也不感到惊讶。

我想这个想法是制作“独家”。标签可点击，在这种情况下，您需要在输入周围添加标签标签，如下所示：

```
<label for="Checkbox0"><input id="Checkbox0" type="checkbox"  onclick="changebuttons();" checked="true" />Exclusive.</label> 
```

试一试。

# ruby-on-rails - Ruby 常量查找

> ID：10694200
> 
> 赞同：7
> 
> 时间：2012-05-22T00:07:17.960
> 
> 标签：ruby-on-rails, ruby

这可能是一个简单的问题，但我试图从值中查找 Ruby 中的常量名称。例如：

```
class Xyz < ActiveRecord::Base
  ACTIVE    = 1
  PENDING   = 2
  CANCELED  = 3
  SENT      = 4
  SUSPENDED = 5
end 
```

我的数据库中有一个状态`1`。我想`ACTIVE`基于此进行检索，以便可以在视图中显示它。

这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T01:19:34.727

```
class Module
  def constant_by_value( val )
    constants.find{ |name| const_get(name)==val }
  end
end

class Xyz
  ACTIVE    = 1
  PENDING   = 2
  CANCELED  = 3
  SENT      = 4
  SUSPENDED = 5
end

p Xyz.constant_by_value(4)
#=> :SENT 
```

但是，我不会这样做：使用编程名称作为*视图*的值似乎是个坏主意。您可能会遇到想要更改显示名称的情况（*可能“暂停”应显示为“暂停”*），然后您必须重构代码。

我会使用模型中的常量在您的视图或控制器中放置一个映射：

```
status_name = {
  Xyz::ACTIVE    => "Active",
  Xyz::PENDING   => "Pending", 
  Xyz::CANCELED  => "Canceled", 
  Xyz::SENT      => "Away!", 
  Xyz::Suspended => "On Hold"
}
@status = status_name[@xyz.status_id] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T00:14:55.670

我会把它放到一个常量数组中。

```
class xzy < ActiveRecord::Base
  STATUSES = %w{ACTIVE PENDING CANCELLED SENT SUSPENDED}

  def get_status
    STATUSES[self.status-1]
  end

  def get_status_id(name)
    STATUSES.index(name) + 1
  end
end 
```

#get_status 中的负 1 和 #get_status_id 中的 + 1 用于零索引数组。我添加了第二种方法，因为我发现自己不时需要它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T00:23:23.753

如果您的常量并不总是从小整数中提取，您也可以尝试：

```
class Xyz < ActiveRecord::Base
  class << self
    def int_to_status(x)
      constants.find{ |c| const_get(c) == x }
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T14:23:53.553

```
class Xyz < ActiveRecord::Base

  STATUSES = { 
    1 => ACTIVE,
    2 => PENDING,
    3 => CANCELED,
    4 => SENT,
    5 => SUSPENDED
  }

  def status_name
    STATUSES[ status ]   
  end

  def status_by_name( name )
    STATUSES.key( name ) 
  end

end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T04:44:34.150

扩展@Phrogz 我认为这也是一个选择：

```
module Xyz
  ACTIVE    = 1
  PENDING   = 2
  CANCELED  = 3
  SENT      = 4
  SUSPENDED = 5      

  def self.constant_by_value( val )
    constants.find{ |name| const_get(name)==val }
  end
end

Xyz.constant_by_value(2)
#=> :PENDING 
```

我提到这一点是因为有时我发现将常量与特定类完全隔离很方便。

# python - 一点编程数学

> ID：10694204
> 
> 赞同：1
> 
> 时间：2012-05-22T00:08:13.750
> 
> 标签：python, animation, math, nuke

只是想知道是否有人可以帮助我解决我遇到的一些编程数学问题。

我要创建的是 Nuke (vfx) 的提交脚本（使用 python 和 .bat）。我遇到的问题是我无法弄清楚如何将剩余的帧添加到已经计算的堆栈中。

为了更清楚...

在 Nuke 中，我必须渲染 20 帧。我有 16 个线程。Nuke 仅使用 1 个线程。我想编写一个脚本，它需要帧数并将其除以线程数，然后使用 python 写出一个 bat 文件。问题来了，当我有剩余时。我想取剩余部分并将其应用回渲染堆栈。

示例（第一个循环）

```
thread1 = 1 frame
thread2 = 1 frame
thread3 = 1 frame
thread4 = 1 frame
thread5 = 1 frame
thread6 = 1 frame
...
thread16 = 1 frame 
```

完成此操作后...余数为 4。我希望将余数分配给线程。所以...

示例（第二个循环）

```
thread1 = 2 frame
thread2 = 2 frame
thread3 = 2 frame
thread4 = 2 frame
thread5 = 1 frame
thread6 = 1 frame
...
thread16 = 1 frame 
```

4 被添加到前几个线程中，总共 20 帧。

我将非常感谢任何人提供的任何帮助、提示和评论。:)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T00:22:42.303

这是[Bresenham 算法](https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)的经典用法：

```
def partition(lst, n):
    increment = len(lst) / float(n)
    last = 0
    i = 1
    results = []
    while last < len(lst):
        idx = int(round(increment * i))
        results.append(lst[last:idx])
        last = idx
        i += 1
    return results

for i, frames in enumerate(partition(range(20),16)):
    if len(frames)>1:
        print 'thread'+str(i+1),'=', len(frames),'frames'
    else:
        print 'thread'+str(i+1),'=', len(frames),'frame' 
```

分区位来自[这个答案](https://stackoverflow.com/a/2660040/648852)。

它打印：

```
thread1 = 1 frame
thread2 = 2 frames
thread3 = 1 frame
thread4 = 1 frame
thread5 = 1 frame
thread6 = 2 frames
thread7 = 1 frame
thread8 = 1 frame
thread9 = 1 frame
thread10 = 2 frames
thread11 = 1 frame
thread12 = 1 frame
thread13 = 1 frame
thread14 = 2 frames
thread15 = 1 frame
thread16 = 1 frame 
```

如果您不介意前面加载的两个框架线程，您也可以使用[Mark Dickinson 的解决方案。](https://stackoverflow.com/a/2660138/648852)

然后你有：

```
def partition(lst, n):
    q, r = divmod(len(lst), n)
    indices = [q*i + min(i, r) for i in xrange(n+1)]
    return [lst[indices[i]:indices[i+1]] for i in xrange(n)] 
```

打印：

```
thread1 = 2 frames
thread2 = 2 frames
thread3 = 2 frames
thread4 = 2 frames
thread5 = 1 frame
thread6 = 1 frame
thread7 = 1 frame
thread8 = 1 frame
thread9 = 1 frame
thread10 = 1 frame
thread11 = 1 frame
thread12 = 1 frame
thread13 = 1 frame
thread14 = 1 frame
thread15 = 1 frame
thread16 = 1 frame 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:43:47.120

`frames`可以是任何对象的列表，例如 dict 或“Frame”对象。在这里，我刚刚使用了整数

```
>>> frames = range(20)
>>> threads = 16
>>> [frames[x::threads] for x in range(threads)]
[[0, 16], [1, 17], [2, 18], [3, 19], [4], [5], [6], [7], [8], [9], [10], [11], [12], [13], [14], [15]] 
```

我认为您最好将帧放入其中`Queue`，因为某些帧可能比其他帧渲染得更快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:18:34.603

```
frames=20
tPos=16
Ts=divmod(frames,tPos)
threads=[Ts[0]+1 if i < Ts[1] else Ts[0] for i in range(tPos)]

>>> threads    
>>> [2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1] 
```

If you are having trouble with list comprehensions, the same thing can be written this way:

```
threads=[]
for i in range(tPos):
    threads.append(Ts[0]+1 if i<Ts[1] else Ts[0]) 
```

Then to format it, do something like:

```
for i,e in enumerate(threads):
    print 'thread{} {}frames'.format(i,e) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:20:11.557

这就是我最终使用的......谢谢你帮助大家。

```
frames=20 
tPos=16 
Ts=divmod(frames,tPos) 
threads=[] 
for i in range(tPos): 
    threads.append(Ts[0]+1 if i<Ts[1] else Ts[0])

start = 1
end = 0
x=1
while x <= (tPos):
    end = start +(threads[x-1]-1)
    print (start, "-", end)
    start = end + 1
    x+=1

prints:
1 - 2
3 - 4
5 - 6
7 - 8
9 - 9
10 - 10
11 - 11
12 - 12
13 - 13
14 - 14
15 - 15
16 - 16
17 - 17
18 - 18
19 - 19
20 - 20 
```

# wix - Wix，Windows 安装程序重启管理器阻止服务卸载？

> ID：10694205
> 
> 赞同：0
> 
> 时间：2012-05-22T00:08:22.723
> 
> 标签：wix, windows-installer

我有一个基于 WiX 的 Windows 安装程序，安装的一部分是启动服务。这是在 Windows 7 上运行的，因此使用 Windows Installer v5.0。

安装时一切似乎都正常——所有文件都安装在正确的位置。我已经设置好了，所以我可以避免打开服务（ServiceControl 标记中没有“开始”属性）。但是，当我重新运行 msiexec /i 并从修改对话框中选择“删除”时，除了服务（在服务控制面板中）和服务 .exe 文件之外的所有内容都将被删除，然后重新启动管理器会尝试重新启动服务！

在过去的三天里，我一直在查看日志，寻找解决方案来解决为什么会发生这种情况：为什么没有卸载服务 .exe，以及为什么重新启动管理器尝试重新启动它，因为它没有被明确排除。包含该服务的组件由于某种未知原因未出现在日志中，被标记为 Null 以执行操作，而安装中的所有其他文件都被标记为删除。

任何人都知道重新启动管理器是否会以某种方式干扰在卸载期间标记为删除的服务？我假设重新启动管理器正在尝试重新启动服务，因为包含它的组件不会消失，但也希望确认或拒绝。

任何帮助或信息将不胜感激！戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:57:22.613

您是否指定停止服务并在卸载时删除？这就是我设置需要在停止状态下启动并在卸载时删除的服务的方式：

```
<ServiceControl Id="MyService"
                Name="MyService"
                Stop="both"
                Remove="uninstall" /> 
```

# jquery - 使用 jQuery 删除自动生成的样式属性

> ID：10694211
> 
> 赞同：1
> 
> 时间：2012-05-22T00:09:32.733
> 
> 标签：jquery

你好，

我有一个

```
<span style="display: none; "> 
```

这是在我的代码中生成的，我无法弄清楚为什么“显示：无；” 已设置。

我试过使用：

```
$('span').removeAttr('style'); 
```

和

```
$('span').attr('style', '') 
```

...但他们都没有工作。

不知何故

```
$('span').removeAttr(style); 
```

正在工作，但由于缺少 '' 风格，当然会出现错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:21:13.080

`$('span').show()`应该删除显示：无

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:12:54.110

尝试

```
$('span').css('display', 'inline'); 
```

# c# - .NET 中弱类型对象的 XML 反序列化

> ID：10694212
> 
> 赞同：0
> 
> 时间：2012-05-22T00:09:33.577
> 
> 标签：c#, xml, serialization, xml-serialization, xmlserializer

对不起一个蹩脚的标题。随意将其更改为更好的。

问题是这样的：我需要读取一组如下所示的 XML 文件：

```
<rootElement>
   <header>
      <!-- some stuff here -->
   </header>
   <businessContent>
      <oneOfSeveralAllowedSubNodesHereLikeCustomer />
   <businessContent>
</rootElement> 
```

我必须`xsd.exe`从我拥有的模式文件中生成 C# 类，它就是这样做的（简化的）：

```
public class rootElement
{
   public header header {get;set;}
   public object businessContent {get;set;}
}
// other classes like header and classes for the values
// allowed within business content, say customer 
```

请注意，类型`businessContent`是`System.Object`足够公平的。该模式没有明确说明可以实际放入的内容。但后来我有一个 xml 文件，其中有`customer`一个`businessContent`. customer 在 xsd 中定义，并`xsd.exe`为其生成了一个类。我希望创建此类的一个实例并将其作为我的`businessContent`，但是当我阅读 XML 时：

```
var serializer = new XmlSerializer(typeof(rootElement));
var root = (rootElement)serializer.Deserialize(stream));
var customer = (customer)root.businessContent; 
```

我得到一个例外，因为`root.businessContent`is`XmlNode[]`和 not的类型`customer`。

那么如何使序列化程序完全反序列化我的对象，即在内部`customer`而不是`XmlNode[]`内部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:43:41.860

[序列化和恢复未知类](https://stackoverflow.com/questions/590658/serializing-and-restoring-an-unknown-class)

```
var extraTypes = new[] { typeof(customer), typeof(otherAllowedSubnodeTypes) };
var serializer = new XmlSerializer(typeof(rootElement), extraTypes); 
```

# javascript - 将页面动态加载到jquery mobile时保持javascript不变

> ID：10694215
> 
> 赞同：0
> 
> 时间：2012-05-22T00:09:51.270
> 
> 标签：javascript, jquery, jquery-mobile

在 jquery 移动页面中，我创建了一个链接来动态加载另一个页面：

```
<a href="advertiser.php" data-role="button" data-inline="true" data-theme="b">Add New Advertiser</a> 
```

当页面被加载时，页面中的 javascript`<head>`被剥离。

有没有办法让 jquery mobile 保持加载页面的脚本完好无损？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:09:29.877

如果页面不是很重，那么您可以在同一个文档中创建下一页（要打开），即

```
 <div data-role="advertiser" id="Login"> 
```

并用链接打开它

```
<a data-role="button" data-transition="slide" data-direction="forward" data-theme="a" href="#advertiser" data-icon="home" data-iconpos="left">Add New Advertiser</a> 
```

这样即使你来回走，你的脚本也不会刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:10:27.790

I'm sure there is a way to do exactly what your talking about. I do however believe there is a simpler way to accomplish the same goal. Check out this answer [here](https://stackoverflow.com/questions/10681125/how-to-show-loader-in-non-ajax-navigation-in-jquery-mobile/10682189#10682189). It should solve your problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T00:25:17.640

I'm not sure if this will help you because of lack in details. Try to add: data-prefetch to your link.

```
<a href="prefetchThisPage.html" data-prefetch> ... </a> 
```

# php - mysql不喜欢我的说法

> ID：10694218
> 
> 赞同：1
> 
> 时间：2012-05-22T00:10:24.203
> 
> 标签：php, mysql

我正在尝试从我的数据库中的关系表中调用书籍详细信息，mysql 使用代码的语法引发错误。上一页是

```
 <html>
    <head>
    <title>Retrieve Relationships</title>
    </head>
    <body>

    <dl>

    <?php
    // Connect to database server
    mysql_connect("localhost","","") or die (mysql_error ());

    // Select database
    mysql_select_db("test") or die(mysql_error());

    // Get data from the database depending on the value of the id in the URL
    $title = (isset($_GET['title']) && is_string($_GET['title'])) ? $_GET['title'] : null;
$sTitle = mysql_real_escape_string($title);
$strSQL = "SELECT relationships.bookone, relationships.booktwo, relationships.relationship
FROM relationships, books
WHERE books.bookid=relationships.bookone AND relationships.bookone='{$sTitle}'";
     $rs = mysql_query($strSQL)
    // Loop the recordset $rs

    while($row = mysql_fetch_array($rs)){

        // Write the data of the person
        echo "<dt>Book One:</dt><dd>" . $row["bookone"] . "</dd>";
        echo "<dt>Book Two:</dt><dd>" . $row["booktwo"] . "</dd>";
        echo "<dt>Relationship:</dt><dd>" . $row["relationship"] . "</dd>";
        echo "<dt>Likes:</dt><dd>" . $row["relationshiplikes"] . "</dd>";
        echo "<dt>Dislikes:</dt><dd>" . $row["relationshipdislikes"] . "</dd>";

    }

    // Close the database connection
    mysql_close();
    ?>

    </dl>
    <p><a href="search.php">Return to the list</a></p>

    </body>

    </html> 
```

我试图让页面显示的是 bookone 的代码和 booktwo 的代码，其中 bookones id = booksid

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:15:39.427

它应该是：

```
$strSQL = "SELECT relationships.bookone, relationships.booktwo, relationships.relationship
FROM relationships, books
WHERE books.bookid=relationships.bookone AND relationships.bookone='{$_GET['bookone']}'"; 
```

虽然，*真的*，它应该是：

```
$title = (isset($_GET['title']) && is_string($_GET['title'])) ? $_GET['title'] : null;
$sTitle = mysql_real_escape_string($title);
$strSQL = "SELECT relationships.bookone, relationships.booktwo, relationships.relationship
FROM relationships, books
WHERE books.bookid=relationships.bookone AND relationships.bookone='{$sTitle}'"; 
```

[SQL注入](http://en.wikipedia.org/wiki/SQL_injection)相当糟糕:)。

（更不用说如果用户搜索标题中带有撇号的书，它也会无害地破坏。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:30:13.657

看来您不需要此表的联接。您实际上根本没有使用书桌。看起来您只需要：

```
SELECT r.bookone, r.booktwo, r.relationship FROM relationships AS r WHERE r.bookone='{$sTitle}' 
```

但后来您正在使用列`relationshiplikes`，`relationshipdislikes`并且您没有通过此查询获得这些列。所以也许你真正想要的是：

```
SELECT r.* FROM relationships AS r WHERE r.bookone='{$sTitle}' 
```

# c# - WAV 播放后的 C# SoundPlayer 静态

> ID：10694220
> 
> 赞同：1
> 
> 时间：2012-05-22T00:10:45.060
> 
> 标签：c#, .net, audio, wav, soundplayer

我正在使用此代码从资源中播放 WAV 文件，并且音频播放正确，但是在播放后（大约 1/2 秒）我得到了短暂的静态爆炸：

```
//System.Media.SystemSounds.Beep.Play();
SoundPlayer sndPlayer = new SoundPlayer();
sndPlayer.Stream = Resources.Notify;
sndPlayer.Play(); 
```

如果我取消注释`System.Media.SystemSounds.Beep.Play()`上面的行，那么来自我的资源的哔声和通知声音都可以正确播放，并且没有静态。我已经尝试了上述代码的一些不同变体，并且总是得到静态的。我尝试将所有变量设为静态，以防与早期垃圾收集有关，但这并没有帮助。

WAV 文件只是我从`c:\WINDOWS\Media\ding.wav`（在 Windows XP 上）复制的一个文件，它在 Windows Media Player 中播放良好。另外，如果我使用 new `SoundPlayer("c:\WINDOWS\Media\ding.wav")`，它会从文件中正确播放。

我想这与那个`UnmanagedMemoryStream`有关`Resources.Notify`，也许我需要先将它加载到托管流中？我知道如果我不使用`new Bitmap(Resource.MyPNG)`并尝试`Resource.MyPNG`直接使用 PNG 文件，我会遇到问题，所以可能与 WAV 资源类似？

**更新：**我最初以为每次播放声音时都会发生这种情况，但现在看来它只发生在我第一次在我的应用程序中播放声音时。所以也许需要做一些初始化？

我也试过这个，同样的问题：

```
SoundPlayer sndPlayer = new SoundPlayer(Resources.Notify);
sndPlayer.Play(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:28:59.210

只是一台PC上的问题。从来没有弄清楚，其他应用程序似乎没有这个问题，但如果到目前为止仅在 1 台 PC 上（可能已测试 15 台）不值得我花时间。如果我得到一个，我会报告一个更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:39:36.400

这是 MS 使用*My.Audio.Play()*的内部实现，看看他们如何实例化 SoundPlayer 类，他们利用了重载的构造函数，该构造函数采用如下所示**的 filePath****或流**：

[http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)

```
public void Play(string location, AudioPlayMode playMode)
{
    this.ValidateAudioPlayModeEnum(playMode, "playMode");
    SoundPlayer sound = new SoundPlayer(this.ValidateFilename(location));
    this.Play(sound, playMode);
} 
```

您可以在实例化 SoundPlayer 时尝试传入流吗？

# jquery - 为什么这些带有 htmlfor 的 jQuery 选择器会以这种方式工作？

> ID：10694222
> 
> 赞同：0
> 
> 时间：2012-05-22T00:11:10.733
> 
> 标签：jquery, jquery-selectors

鉴于此 HTML：

```
<p htmlfor="afield">This field is required.</p> 
```

这个 jQuery 选择器会找到 p 标签：

```
var filtered = $("*").filter("[for='afield']"); 
```

而这个不会：

```
$("p").filter("[for='afield']"); 
```

为什么第一个匹配？HTML 中的属性是“htmlfor”，而选择器中的属性是“for”。

而且，为什么第二个*不*匹配？

这是一个小提琴（带有警报，抱歉......）。

[http://jsfiddle.net/f7v4h/1/](http://jsfiddle.net/f7v4h/1/)

从评论中编辑解释我为什么关心：

我正在使用 jquery-validate 插件。`[for='afield']`是插件代码使用的语法，它也是生成 HTML 的插件。我只是想了解发生了什么，以便修复我网站上的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:25:43.410

Upgrade jQuery validate to 1.9.0 to see if it resolves the concern. You can live-link it from Microsoft's CDN: [http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js)

EDIT:

It seems that upgrading jQuery and jQuery.validate resolved the "it isn't working" but not the "why". Attempting to answer the "why":

[http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-213157251](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-213157251) seems to suggest that these properties are exceptions and are thus renamed in awkward ways. Perhaps this is another great example of jQuery abstracting away annoying browser abnormalities so we can just get the job done.

# c# - 在 WPF C# 中设置多个 DataContexts

> ID：10694223
> 
> 赞同：0
> 
> 时间：2012-05-22T00:11:26.523
> 
> 标签：c#, wpf, xaml, mvvm, datacontext

如何设置多个dataContexts？我有 Model 和 ViewModel -例如，我可以在 Windows.DataContext 中的 XAML 中编写**一个数据上下文**

```
<Window.DataContext>
    <v:FacebookViewModel/>
</Window.DataContext> 
```

然后在构造函数或按钮上单击我可以写`_faceViewModel = (FacebookViewModel)this.DataContext;`. 这将设置 dataContext。

我的问题：我有 2 个 ViewModel，我想通过单击按钮或者如果您有更好的主意，更改我的第二个 ViewModel TwitterViewModel 的数据上下文 - 怎么做？我现在正在学习 WPF，对此我真的很陌生...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:52:18.083

您可以使用 DataContext 属性以编程方式更改它。我认为更好的方法是为您的 ViewModel 编写一个 DataTemplates 并将它们设置在所需的容器中（如果您的 viewmodel 具有不同的外观）。如果您的虚拟机具有相同的外观，那么您可能应该考虑在一个视图模型后面封装不同的逻辑。

```
class VM 
{
  private IVMImplementation manager = null;

  public VM(IVMImplementation manager) { this.manager = manager; }

  public SetManager(IVMImplementation manager) { this.manager = manager; }
}
class TwitterVMManager : IVMImplementation  {}
class FacebookVMManager : IVMImplementation  {} 
```

我相信它会比更改数据上下文更快。

# bash - Bash的scanf等价物？

> ID：10694224
> 
> 赞同：4
> 
> 时间：2012-05-22T00:11:27.053
> 
> 标签：bash, terminal, scanf

如何在 bash shell 中从键盘查找用户输入？我在想这会行得通，

```
int b;

scanf("%d", &b); 
```

但它说

> -bash：/Users/[name]/.bash_profile：第 17 行：意外标记 `"%d",' 附近的语法错误
> 
> -bash：/Users/[name]/.bash_profile：第 17 行：`scanf("%d", &b);'

**编辑**

```
backdoor() {
   printf "\nAccess backdoor Mr. Fletcher?\n\n"
   read -r b
   if (( b == 1 )) ; then
     printf "\nAccessing backdoor...\n\n"
   fi   
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T00:14:54.153

Just use the `read` builtin:

```
read -r b 
```

No need to specify type (as per `%d`), as variables aren't typed in shell scripts unless you jump through (needless) hoops to make them so; if you want to use a value as a decimal, that's a question of the context in which it's evaluated, not the manner in which it's read or stored.

For instance:

```
(( b == 1 )) 
```

...treats `$b` as a decimal, whereas

```
[[ $b = 1 ]] 
```

...does a *string comparison* between b and `"1"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T00:19:29.337

虽然您可以在 Bash 中将变量声明为整数，但结果不会如您所愿。非整数值将被转换为零，这可能不是您想要的。这是确保您收集整数的更安全的方法：

```
while read -p "Enter integer: " integer; do
    [[ "$integer" =~ [[:digit:]]+ ]] && break
    echo "Not an integer: $integer" >&2
done 
```

当您想告知用户*为什么*拒绝某个值，而不仅仅是重新提示时，这尤其有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T00:32:16.400

You're trying to mix C-like syntax with Bash syntax.

```
backdoor() {

    printf '\n%s\n\n' 'Access backdoor Mr. Fletcher?'

    read -r b

    if ((b == 1))
    then
        printf '\n%s\n\n' 'Accessing backdoor...'
    fi
} 
```

# ruby-on-rails - Rails：在活动记录集合中查找记录

> ID：10694225
> 
> 赞同：1
> 
> 时间：2012-05-22T00:11:35.590
> 
> 标签：ruby-on-rails, activerecord

我有一个产品表和该产品的一组变体。我想加载给定产品的所有变体，然后更新单个记录。

所以说产品 X 有 100 个变体，我想编辑其中一个变体。我查询该产品存在的所有变体。

```
vars = Variation.where(:product_id => 1) # => select * from variations
                                         #       where product_id = 1 
```

选择 count = 1。
我调整第一条记录
更新计数 = 1

现在我想编辑这个集合中 id = 10 的记录，但我不想回到数据库拉下记录。我为什么要？从第一次选择开始，我就已经在内存中了，对吧？

我也可能想从记录中读取一些数据。说出变化的价格。

我绝对不想在数据库中查询我已经在内存中拥有的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T00:45:13.793

结果集实现了可枚举，所以你可以做这样有趣的事情：

```
my_collection = vars.find_all { |var| var.product_id == 10 } 
```

这将产生一个子集作为一个数组，你可以继续做任何你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:40:46.650

当您将条件传递给 时`where`，您是在告诉 ActiveRecord 构建一个查询以仅从数据库中检索匹配的记录，因此当您请求时，`Variation.where(:product_id => 1)`您肯定没有将那些 product_id 等于 10 的记录加载到内存中。

如果您确实想将所有记录加载到内存中，然后更新它们，那么您应该简单地使用`Variation.all`, 并迭代结果。假设您知道任何给定的 product_id 值应该只有一个变体，那么您还可以将它们加载到以 product_ids 作为键的哈希中：`Hash[ Variation.all.map{|v| [v.id, v]} ]`。

编辑

这并没有完美地解决最初的问题，因为我没有通过“id”得到它，Dave 实际上是指“id”而不是“product_id”。我很高兴哈希技巧在答案方面仍然有帮助。

# annotations - 需要澄清 Resharper NotNullAttribute 的含义

> ID：10694228
> 
> 赞同：12
> 
> 时间：2012-05-22T00:12:09.643
> 
> 标签：annotations, resharper, notnull

考虑以下代码：

```
 public static void Foo()
    {
        Bar(null);
    }

    public static void Bar([NotNull] string s)
    {
        if (s == null)
            throw new ArgumentNullException("s");
    } 
```

该`[NotNull]`属性用于`Bar`告诉调用者`s`不应为空。这工作正常，当我将 null 传递给`Bar`（*可能的 'null' 分配给标有 'NotNull' 属性的实体*）时，我会收到警告。

但它实际上并没有阻止我传递 null，所以`Bar`仍然必须检查是否`s`为 null。**那么为什么我也会收到警告`if (s == null)`（*表达式始终为假*）**？

据我所知，这个属性的含义不明确；根据上下文，它可能意味着两种不同的东西：

*   对于调用者：*不要传递空参数*
*   对于被调用者：*此参数不为空*

我是否正确使用了这个属性，或者我错过了什么？

顺便说一句，我使用的是 Resharper 7 EAP，所以它可能是一个错误；但是我想在报告之前确保我的用法是正确的......

* * *

编辑：在工作中用 R# 5.1 尝试了同样的事情；它在调用站点上显示警告，但不在方法中。我会在 Jetbrain 的 Youtrack 上报告它。

* * *

EDIT2：[此处报告的错误](http://youtrack.jetbrains.com/issue/RSRP-304111)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T07:34:56.140

据我所知，您使用它是正确的，而 ReSharper 错误地告诉您比较总是`false`. 该`[NotNull]`属性只不过是文档，您的代码可以正确检查输入值。这不是 ReSharper 第一次提出错误或愚蠢的建议。JetBrains 最酷的地方在于，他们有[一个公共错误跟踪器](http://youtrack.jetbrains.com/issues/RSRP)，您可以在其中报告此问题并直接从开发人员那里获得反馈。

就是说，（如果您知道的话，请原谅我），[C# 4.0 的代码合同](http://msdn.microsoft.com/en-us/library/dd264808.aspx)使这变得简单、可预测且可靠：

```
Contract.RequiresAlways(s != null); 
```

# objective-c - iOS：Tapku 日历库颜色编码日期

> ID：10694230
> 
> 赞同：1
> 
> 时间：2012-05-22T00:12:22.923
> 
> 标签：objective-c, ios, tapku

我正在我的应用程序中实现`Tapku calendar`，我想根据一些信息`iOS`将某个**日期/图块**的颜色更改为**红色/任何其他颜色。**我可以更改整个瓷砖（当然不是周围的瓷砖）或放置在瓷砖上的标记。其他人问过这个，但我还没有找到回应或有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:04:29.763

尝试以下链接

[https://stackoverflow.com/a/9288689/1099453](https://stackoverflow.com/a/9288689/1099453)用于更改平铺颜色。

[这里](http://dl.dropbox.com/u/65213224/CalDemo%202.zip)有一个例子。（tapku日历的自定义）

# actionscript-3 - Flash AS3 多个 If 语句

> ID：10694231
> 
> 赞同：0
> 
> 时间：2012-05-22T00:12:41.687
> 
> 标签：actionscript-3, flash, if-statement

是否可以执行多个 if 语句？我正在尝试使以下内容起作用：

```
stop();

continueb_lilmine3.addEventListener(MouseEvent.CLICK, overHandler);

function overHandler(evt:MouseEvent):void
{
      if(MovieClip(root).lilmine_cell4.currentFrame == 3)
      if(MovieClip(root).lilmine_cell2.currentFrame == 3)
      {MovieClip(parent).gotoAndStop(5);

  }else{
{gotoAndStop(3);
}}} 
```

ifs 似乎有效，但 else 无效。它说卡在 continueb_lilmine3 MC 的第 2 帧上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:27:06.280

Your syntax is a bit off. An `if` statement should have a code block (or a single line of code) after it.

**[Edit]**

I believe your code seems to work, because according to the compiler, your first `if` statement is followed by exactly one statement -- the if/else construct. So in effect, perhaps your code is doing this:

```
if(MovieClip(root).lilmine_cell4.currentFrame == 3)
{
    if(MovieClip(root).lilmine_cell2.currentFrame == 3)
    {
        MovieClip(parent).gotoAndStop(5);

    }
    else {
        {gotoAndStop(3);} // unnecessary brackets here?
    }
} 
```

And thus the else never executes.

**[end]**

**[Edit #2]** Here is what you are probably after:

```
if (MovieClip(root).lilmine_cell4.currentFrame == 3 && MovieClip(root).lilmine_cell2.currentFrame == 3)
{
    MovieClip(parent).gotoAndStop(5);
}
else
{
    gotoAndStop(3);
} 
```

# java - 如何在java类中添加链接？

> ID：10694232
> 
> 赞同：-2
> 
> 时间：2012-05-22T00:12:43.953
> 
> 标签：java, eclipse, hyperlink

我正在开发一个项目（在 Eclipse 中）并且遇到了问题。我创建了一个带有单个按钮的菜单，当用户按下该按钮时，他的浏览器将打开并转到指定的地址。我不知道该怎么做。如何在 java 文件中创建指向页面的链接？这是在“我的世界”游戏中。这是我的一些代码：

```
if (par1GuiButton.id == 6 //That is what the button's target will be)
    {
   // I want to put a link here

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:20:46.800

尝试这个：

```
final String targetUrl = "http://www.stackoverflow.com";

java.awt.Desktop.getDesktop().browse(java.net.URI.create(targetUrl)); 
```

为此，您需要 Java 6+。

[http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#browse(java.net.URI)](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)

# postgresql - Postgresql 8.4->9.1 pg_upgrade 失败，因为数据库'template0'存在

> ID：10694234
> 
> 赞同：2
> 
> 时间：2012-05-22T00:12:54.920
> 
> 标签：postgresql, database-migration, postgresql-9.1, postgresql-8.4

我一直在努力将 Postgresql 数据库从 8.4 升级到 9.1。我遇到了无数问题（可能与 Ubuntu 的文件放置有关），但我想我看到了终点线。Pg_upgrade 几乎可以工作，但是当它到达第一个数据库“template0”时它失败了，因为它“已经存在”。

```
psql:/var/lib/postgresql/pg_upgrade_dump_globals.sql:36: ERROR:  database "template0" already exists

There were problems executing "/usr/lib/postgresql/9.1/bin/psql" --set ON_ERROR_STOP=on --no-psqlrc --port 5432 --username "postgres" -f "/var/lib/postgresql/pg_upgrade_dump_globals.sql" --dbname template1 >> "/dev/null"
Failure, exiting 
```

这个 template0 数据库当然是每个新集群的一部分，不能删除。我尝试在新集群上重命名 template0 和 template1（为了安全起见）（在重新创建它之后），但随后的 pg_upgrade 调用也失败了，但这次抱怨新集群上不存在 template1。

```
"/usr/lib/postgresql/9.1/bin/pg_ctl" -w -l "/dev/null" -D "/var/lib/postgresql/9.1/main" -o "-p 5432 -b" start >> "/dev/null" 2>&1

connection to database failed: FATAL:  database "template1" does not exist

unable to connect to new postmaster started with the command: "/usr/lib/postgresql/9.1/bin/pg_ctl" -w -l "/dev/null" -D "/var/lib/postgresql/9.1/main" -o "-p 5432 -b" start >> "/dev/null" 2>&1
Failure, exiting 
```

我再次尝试仅重命名 template0 并再次失败，但这次来自 postgres 本身的一些断言问题。

```
executing: SELECT datcollate, datctype FROM     pg_catalog.pg_database WHERE    datname = 'template0' 

pg_upgrade: /build/buildd/postgresql-9.1-9.1.3/build/../contrib/pg_upgrade/check.c:310: set_locale_and_encoding: Assertion `PQntuples(res) == 1' failed.
Aborted (core dumped) 
```

健全性检查注意事项：如果有人认为“只做一个完整的 sql 转储并恢复它”也不能正常工作，这就是我试图让 pg_upgrade 工作的原因。每次升级失败时，我还确保删除并重新创建集群，以防止过去的任何故障遗留物继续破坏升级。该数据库位于 Amazon 卷上，因此我不能真正破坏任何东西并且总是有备份。我在 ubuntu 12 上并排安装了两个数据库。

我目前没有不涉及进入 postgresql 源代码的想法，并且非常感谢任何关于下一步尝试的帮助和建议。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T06:45:54.393

停止。泡一杯茶/咖啡，然后坐下。

1.  确保同时安装了 9.1 和 8.4。Debian 允许这样做，所以大概 ubuntu 也这样做。
2.  使用 pg_dump 的 9.1 版本，从 8.4 中转储每个数据库，然后为用户提供一个 dumpall 或手动重新创建它们。
3.  使用 9.1 pg_restore，将您的数据库恢复为用户 postgres 以及 --create 标志。

如果这些步骤中的任何一个存在特定问题，您需要记下它们并提供详细信息。哦 - 详细的分步建议的最佳位置可能是 postgresql-general 邮件列表（有关详细信息，请参阅网站）。你可以在那里慢慢来，把每一步都做好。

猜测您正在尝试将 pg_upgrade 执行到现有的 initdb-ed 目录中，我认为这不是它所期望的。在任何情况下，dump+restore 是最干净的方法——它还为您提供数据库的备份副本。

# java - 如何在禁用按钮的情况下启动程序 - Java？

> ID：10694235
> 
> 赞同：1
> 
> 时间：2012-05-22T00:13:59.383
> 
> 标签：java, button

如何在禁用三个按钮和启用一个按钮的情况下启动一个程序（具有四个按钮）。此外，当按下启用的按钮时，我希望它被禁用，而其他三个被启用。忽略添加和删除方法，但这是我到目前为止所拥有的，我应该添加和/或更改什么？

```
private void initButtonActionPerformed(java.awt.event.ActionEvent evt) 
{
initButton.setEnabled(false);
}

private void displayButtonActionPerformed(java.awt.event.ActionEvent evt) 
{

}

private void addButtonActionPerformed(java.awt.event.ActionEvent evt) 
{
cdcollection.add(cdtitleInput.getText());
}

private void removeButtonActionPerformed(java.awt.event.ActionEvent evt) 
{
cdcollection.remove(cdcollection.size()-1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:16:59.737

我错过了什么吗？您不能`setEnabled()`在创建按钮时直接调用它们吗？

要再次更改侦听器中的状态，只需调用`setEnabled()`相关按钮即可。

也许您应该查看单选按钮-听起来这就是您要模仿的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:17:28.323

您可以使用该方法编写您正在寻找的逻辑`setEnabled()`：如果您传递它，`false`它将禁用您调用该方法的按钮，`true`启用它。所以可以设置三个禁用。然后您可以在按钮上注册一个按钮单击侦听器并将相反的逻辑添加到该处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T00:18:05.037

您可以在 JButtons 上使用[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。

```
JButton button = new JButton();
button.setEnabled(true);
button.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent ae) {
        button.setEnabled(false);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T00:29:28.950

执行此操作的快速书面基本示例：

```
 private void initComponents() {

        controls = new Container();
        controls = getContentPane();
        controls.setLayout(new FlowLayout());

        one = new JButton("Enable buttons");

        two = new JButton("Second");
        two.setEnabled(false);

        three = new JButton("Third");
        three.setEnabled(false);

        four = new JButton("Fourth");
        four.setEnabled(false);

        one.addActionListener(
                new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {

                    one.setEnabled(false);

                    if (!one.isEnabled()) {
                        two.setEnabled(true);
                        three.setEnabled(true);
                        four.setEnabled(true);
                    } 
                }
        });

        controls.add(one);
        controls.add(two);
        controls.add(three);
        controls.add(four);
    } 
```

# c - 构建一个 C shell。execvp 返回“没有这样的文件”错误。使用 malloc 即时创建 argv 数组

> ID：10694238
> 
> 赞同：5
> 
> 时间：2012-05-22T00:14:41.293
> 
> 标签：c, shell, malloc, process, execvp

我正在构建一个 shell，但系统调用“execvp”遇到了一些问题。我看到了有关此主题的其他一些问题，但它们含糊不清，似乎没有得到完全解决（提出这些问题的人都没有提供太多信息，也没有得到好的答案）。

显然我有自己的命令行，我正在从标准输入读取用户输入，比如

```
mysh some/path $ ps -a 
```

我正在构建一个 args 数组作为 char ** 并且数组本身可以工作（我认为），因为当我打印出函数中的值时它显示

```
args[0] = 'ps'
args[1] = '-a'
args[2] = '(null)' 
```

所以，我在我的进程中调用 fork 和 execvp(cmnd, args)，其中 cmnd 是“ps”，args 如上所述，perror 等。

我明白了

```
'Error: no such file or directory.' 
```

我需要放入 $PATH 变量吗？我在做其他奇怪的事情吗？

这是我生成 args 数组的代码：

```
char ** get_args(char * cmnd) {
int index = 0;
char **args = (char **)emalloc(sizeof(char *));
char * copy = (char *) emalloc(sizeof(char)*(strlen(cmnd)));
strncpy(copy,cmnd,strlen(cmnd));
char * tok = strtok(copy," ");
while(tok != NULL) {
    args[index] = (char *) emalloc(sizeof(char)*(strlen(tok)+1));
    strncpy(args[index],tok,strlen(tok)+1);
    index++;
    tok = strtok(NULL," ");
    args = (char**) erealloc(args,sizeof(char*)*(index+1));
}
args[index] = NULL;
return args;
} 
```

（emalloc 和 erealloc 只是内置错误检查的 malloc 和 realloc）

那么我这样做：

```
void exec_cmnd(char*cmnd, char**args) {
pid_t pid;
if((pid=fork())==0) {
    execvp(cmnd, args);
    perror("Error");
    free(args);
    free(cmnd);
    exit(1);
}
else {
    int ReturnCode;
    while(pid!=wait(&ReturnCode)) {
        ;
    }
}
} 
```

就像我上面说的，当在我的进程中调用 execvp 时，当我提供任何参数但没有它们时它会失败（即当 argv == {'ps', NULL} 时）

如果您需要更多信息，请随时询问。我需要解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T01:11:23.827

It think you passed whole command line in first argument to `execvp`

you have to separate first token(command name) from `cmnd` to pass as first argument of `execvp`

You can call it as

`execvp(args[0], args);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:46:13.850

请注意，由于以下原因，您有一个未终止的字符串：

```
char * copy = (char *) emalloc(sizeof(char)*(strlen(cmnd)));
strncpy(copy, cmnd, strlen(cmnd)); 
```

`strncpy()`当您这样使用它时，不会为您终止。您还需要为空值再分配一个字节。`strdup()`如果您可以使用，请考虑使用。如果没有，请考虑编写它。即使使用 和 的错误检查版本，这种错误分配也是一个`emalloc()`问题`erealloc()`。

# tcp - 在任何具有高延迟的网络上从 Windows 发送数据都很慢，但 linux 速度很快

> ID：10694244
> 
> 赞同：0
> 
> 时间：2012-05-22T00:15:21.310
> 
> 标签：tcp

通过网络以高延迟将数据从 Windows 机器发送到 Windows 或 Linux 会占用 10% 的链路容量。同时，从 Linux 通过同一网络发送相同数据的速度几乎快了十倍。即使仅通过延迟数据包在低延迟连接上模拟高延迟，问题也是一样的。

似乎它会影响我尝试过的所有应用程序。在 Windows 7 和 Windows Server 2003 上进行了测试，并观察到了相同的行为。

从 tcpdump 可以看出，Windows 在快速突发中发送了大约 10 个数据包，然后等待 ACK，而 Linux 发送大约 100 个数据包而不等待 ACK。

我试图在没有改进的情况下启用 Compound TCP。

我正在寻找有关如何找出正在发生的事情的任何建议。以及如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T23:51:19.627

通过增加 Windows 注册表中 TCP 发送和接收缓冲区的大小（需要重新启动），我能够完全解决我的问题：

```
[HKEY_LOCAL_MACHINE \SYSTEM \CurrentControlSet \Services \Afd \Parameters]
DefaultReceiveWindow = 1024000
DefaultSendWindow = 1024000 
```

如果这些键不存在，则两者的默认值为 8KB，这是 Windows 等待 ACK 之后的数据量。

还要确保

```
netsh interface tcp show global 
```

不显示

```
Receive Window Auto-Tuning Level    : disabled 
```

否则 TCP Window Scaling 不仅对接收而且对发送都被禁用，这将显着限制连接速度。要启用 TCP Window Scaling，请将 Auto-Tuning 级别设置为正常：

```
netsh interface tcp set global autotuninglevel=normal 
```

# bash - Bash：根据名称的第一个字母移动文件

> ID：10694246
> 
> 赞同：5
> 
> 时间：2012-05-22T00:15:33.003
> 
> 标签：bash

我有大量文件，我试图按字母顺序将它们组织成三个文件夹。我正在尝试将一个 bash 脚本放在一起，该脚本能够获取文件的第一个字母，然后根据该第一个字母将其移动到文件夹中。

例如：

文件 -> 文件夹名称

苹果-> AG

香蕉 -> AG

番茄 -> HT

斑马-> UZ

任何提示将不胜感激！蒂亚！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T00:27:34.160

```
#!/bin/bash
dirs=(A-G H-T U-Z)
shopt -s nocasematch

for file in *
do
    for dir in "${dirs[@]}"
    do
        if [[ $file =~ ^[$dir] ]]
        then
            mv "$file" "$dir"
            break
        fi
    done
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T00:27:04.567

您需要[子字符串扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)和[case 语句](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)。例如：

```
thing=apples
case ${thing:0:1} in
    [a-gA-G]) echo "Do something with ${thing}." ;;
esac 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T14:39:15.733

添加我的代码 - 这是基于 Dennis Williamson 的 99% - 我刚刚添加了一个 if 块以确保您没有将目录移动到目标目录中，并且我希望每个字母都有一个目录。

```
#!/bin/bash
dirs=(A B C D E F G H I J K L M N O P Q R S T U V W X Y Z)
shopt -s nocasematch

for file in *
do
    for dir in "${dirs[@]}"
    do

     if [ -d "$file" ]; then
      echo 'this is a dir, skipping'
      break
     else
      if [[ $file =~ ^[$dir] ]]; then
       echo "----> $file moves into -> $dir <----"
       mv "$file" "$dir"
       break
      fi
     fi
  done
done 
```

# cocoa - 为什么我不能在 Lion 中使用下载的语音进行语音合成？

> ID：10694249
> 
> 赞同：0
> 
> 时间：2012-05-22T00:15:47.617
> 
> 标签：cocoa, speech-synthesis

这让我发疯了，所以我想我会在这里记录答案。

要选择一种声音，你给 -[NSSpeechSynthesizer initWithVoice] 反向 DNS 格式的标识符，例如 com.apple.speech.synthesis.voice.Agnes 但是如果用户下载了一个，比如 Paolo，你就不能得到它一样的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:15:47.897

答案是 Apple 将其命名为“voice.premium”，因此您可以通过 com.apple.speech.synthesis.voice.paolo.premium 访问 Paolo。因此，即使我得到了 [NSSpeechSynthesizer availableVoices] 的列表，我也只打印了最后一个单词，并没有注意到列表中添加了溢价。要在avalabVoices 中获取voiceIdentifier 的真实可打印名称（而不是查看最后一个单词），请使用：

```
[[NSSpeechSynthesizer attributesForVoice:voiceIdentifier] 
    valueForKey: NSVoiceName] 
```

# php - 加载时打印一些结果

> ID：10694251
> 
> 赞同：0
> 
> 时间：2012-05-22T00:15:50.653
> 
> 标签：php, apache

我不知道这是否是 PHP 或 APACHE 中的问题，但即使脚本仍在运行，我也想打印一些结果。

我的意思是，因为我的 for 循环是一个长脚本，我想在那个 for 循环上打印一些完成的结果。但是发生的情况是，它只会加载页面，不回显任何内容，并且只会在脚本加载完成时立即显示内容。

PS 那是在使用 wamp 时...当我在我的网站上在线加载脚本时，它会打印一些结果并添加更多结果，直到脚本完成加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:42:07.927

如果你有输出缓冲然后添加

```
ini_set("implicit_flush", "1"); 
```

在脚本的开头将其关闭，这只影响它所在的​​脚本。
如果您想`output_buffering = Off`在 php.ini中设置的整个站点将其关闭，
您也可以在 .htaccess 文件中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:27:46.593

在单独的脚本中完成所有长时间的工作并使用 AJAX 加载所需的内容，您也可以将加载部分分成几部分。 `jQuery.get`是启动[http://api.jquery.com/jQuery.get/的最简单方法](http://api.jquery.com/jQuery.get/)

示例代码会将数据加载到具有的元素中`id=result`（当然您需要包含 jQuery [http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)）

```
$.get('long_script.php', function(data) {
  $('#result').html(data);
}); 
```

当然，这比在循环中回显结果要困难一些，但这保证可以在任何服务器/浏览器设置上工作，并且整个页面在长任务期间加载，无论如何不会限制您使用 html/css

# c++ - gdb 关于符号的问题

> ID：10694252
> 
> 赞同：2
> 
> 时间：2012-05-22T00:15:53.330
> 
> 标签：c++, gdb, symbols

我是 gdb 的新手。当我调试我的程序时，我只会得到如下所示的回溯。

```
Program received signal SIGSEGV, Segmentation fault.
0x000000003075a238 in ?? ()
(gdb) backtrace
#0  0x000000003075a238 in ?? ()
#1  0x00007fff72825da8 in ?? ()
#2  0x0000000000000008 in ?? ()
#3  0x000000003063c340 in ?? ()
#4  0x0000000000000000 in ?? ()
(gdb) 
```

我想缺少一些符号信息。我收到这条消息

```
Reading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found). 
```

所以我在 gdb 启动时尝试了（gdb）符号文件 /usr/lib/debug/lib/x86_64-linux-gnu/ld-2.13.so 它没有帮助。

我如何知道缺少哪些符号信息？整个项目的代码是用 gcc -g 编译的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:38:11.493

当您静态编译应用程序（gcc 中的 -static）时，可能会发生此问题。在这种情况下，构建机器的库可能与执行机器的库不同，gdb 找不到构建机器库的符号。

我遇到了这个问题，唯一对我有用的解决方案是在它正在执行的同一台机器上构建应用程序。

请参阅：[GDB 无法显示堆栈并显示“#1 0x0000000000000000 in ?? ()”](https://stackoverflow.com/questions/6862672/gdb-cannot-show-the-stack-and-shows-1-0x0000000000000000-in)

# c++ - cmath vs math.h（以及类似的 c 前缀 vs .h 扩展头文件）

> ID：10694255
> 
> 赞同：72
> 
> 时间：2012-05-22T00:16:17.487
> 
> 标签：c++, header, include

我已经看到了一些关于`iostream`vs 之类的东西之间差异的信息`iostream.h`。根据我从这些收集到的信息，它们之间的区别在于，没有`.h`扩展名的版本不会填充命名空间，而有扩展名的版本会。

这与`cmath`vs相同`math.h`吗？为什么`cmath`（以及许多其他类似的文件）以 a 为前缀，`c`而不仅仅是 being `math`？他们之间有更多的区别吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-22T00:28:23.787

> 我已经看到了一些关于 iostream 与 iostream.h 之类的东西之间差异的信息。

[iostream.h] 不是标准头文件。

这不是您提出的问题的示例。

[cmath] 定义`std`命名空间中的符号，也可以定义全局命名空间中的符号。[math.h] 在全局命名空间中定义符号，也可以在`std`命名空间中定义符号。如果您包含前者并使用非限定符号，则它可以用一个编译器编译，但不能用另一个编译器编译。因此使用 [math.h] 是个好主意。通常，对于此类标头对，使用 [.h] 版本。

c++98 提供了 c`xxx`标头不污染全局命名空间的正式保证。也许这就是他们被定义的原因。然而，这比污染更难实现，所以在实践中，我所知道的没有标准库实现在这方面遵循标准，所以它最终被改变以反映 c++11 中的现实。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-10T12:14:31.873

也许这会有所帮助：

> C++ 库包含与以相同头文件结构组织的 C 语言库相同的定义，但有以下区别：
> 
> 1 - 每个头文件与 C 语言版本具有相同的名称，但带有“c”前缀且没有扩展名。例如，C 语言头文件 <stdlib.h> 的 C++ 等效项是 <cstdlib>。
> 
> 2 - 库的每个元素都在 std 命名空间中定义。

[c 前缀与 .h 扩展标头](http://www.cplusplus.com/reference/clibrary/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T00:19:26.560

名称以开头`c`的头文件派生自 C 标准库的头文件。`c`删除前缀并添加后缀的相应头文件与`.h`C 标准库头文件相同（或几乎相同）。

`<cmath>`定义命名空间下的相关符号`std`；`<math.h>`全局定义它们。

（我刚刚了解到这并不那么简单；请参阅 Alf 的回答。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-20T12:10:01.080

`<cmath>`并且任何`<cxxx>`标头都是标准 C++，这意味着您可以有力地保证这些标头中支持的内容以及其中的函数如何工作，如 C++ 标准中所述。它们在命名空间中定义了一系列函数，`std`仅此而已。

`<math.h>`并且任何`<xxx.h>`头文件**都不**是标准的 C++，尽管每个主要实现都支持。***但是***，由于它们已被弃用，因此当您将它们包含在您的实现中时，***无法***保证这些标头中的内容。事实上，在某些实现中已经观察到它们提供的功能与版本*不同*`<cxxx>`。

因此，在编写 C++ 时应始终使用`<cxxx>`，并用 来限定函数的名称`std::`，例如`std::malloc`.

# css - 停用 ios 上的默认 a:active 行为

> ID：10694258
> 
> 赞同：2
> 
> 时间：2012-05-22T00:16:29.893
> 
> 标签：css, ios, pseudo-class

在带有 ios 的 safari 中单击链接时，链接周围会出现一个灰色的半透明矩形。是否可以停用此行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:44:52.663

你当然可以，最简单的方法是使用以下方法：

```
-webkit-tap-highlight-color: transparent;
        tap-highlight-color: transparent;
```

您也可以将其更改为您想要的任何颜色。请记住，指示已按下链接对用户很有帮助。

# c# - 关于向下转换的通用继承说明

> ID：10694264
> 
> 赞同：0
> 
> 时间：2012-05-22T00:17:26.123
> 
> 标签：c#, generics, inheritance

我有一个通用接口层次结构，它描述了其他通用类型的一些控制器，我很难在脑海中澄清为什么特定的强制转换场景无效。

简化代码如下；

```
// 'DTO' interfaces
public interface IBase
{ }

public interface IDerived : IBase
{ }

// 'DTOs'
public class Base : IBase
{ }

public class Derived : Base, IDerived
{ }

// controller interfaces
public interface IBaseController<T> where T : class, IBase
{ }

public interface IDerivedController : IBaseController<IDerived>
{ }

// controllers
public class BaseController<T> : IBaseController<T>
    where T : class, IBase
{ }

public class DerivedController : BaseController<IDerived>, IDerivedController
{ } 
```

现在，我遇到的问题是这样的；

```
IDerivedController x = new DerivedController();
bool is1 = x is IDerivedController;   // true
bool is2 = x is IBaseController<IDerived>; // true
bool is3 = x is IBaseController<IBase>; // false ??? 
```

最后一行是我的困惑所在。控制器接口与“DTO”正确关联。但不是两者都在一起......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:23:21.320

想一想，如果你有一组形状，这意味着什么： is a`Collection<Triagle>`与 ( *is-a* )相同`Collection<Shape>`吗？如果是这样的话，我们可以将任何形状放入我们的三角形集合中。OTOH 如果`Collection<Shape>`是 ( *is-a* ) `Collection<Triangle>`，那么我们可以把 a`Square`放在那里（毕竟，它是一个形状的集合），并期望只得到`Triangle`s 。

对你来说也是如此`BaseController<Iderived>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:26:08.017

有关变体通用接口的信息，请参阅[http://msdn.microsoft.com/en-us/library/dd997386](http://msdn.microsoft.com/en-us/library/dd997386)，这是您所问问题的核心。您必须声明 an`IBaseController<IDerived>`实际上可以用作 an`IBaseController<IBase>`以便它可以这样使用。

出于这个原因，请考虑尝试使用 a `List<string>`as an`IList<object>`与尝试使用 an `IEnumerable<string>`as an `IEnumerable<object>`。转换没问题，因为您可以毫无问题`IEnumerable`地将项目用作s，但不能将任何项目添加到 a ，因为它会包含除s 之外的其他内容。`object``object``List<string>``string`

如果将其更改为`public interface IBaseController<out T> where T : class, IBase`，则`x is IBaseController<IBase>`变为`true`。如果编译器抱怨你不能做`T`一个`out`参数，那么你就不能做你想做的转换（除非你改变接口以使其兼容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T00:27:33.690

这是因为`IBaseController`不是[协变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的。您可以通过像这样声明它来使其成为协变的：

```
public interface IBaseController<out T> where T : class, IBase
{
} 
```

但那时`T`只能用于输出位置。

想象一下你的界面是这样的：

```
public interface IBaseController<T> where T : class, IBase
{
    void DoSomething(T x);
} 
```

在`IBaseController<IDerived>`中，方法签名将是：

```
void Something(IDerived x) 
```

现在，如果`IBaseController<IDerived>`可以分配给`IBaseController<IBase>`，您可以执行以下操作：

```
public class Derived2 : Base
{ }

IDerivedController x = ...
IBaseController<IBase> y = x;
y.DoSomething(new Derived2()); // oops! Derived2 doesn't implement IDerived 
```

# javascript - 如何在页面加载后立即触发滑动切换？

> ID：10694267
> 
> 赞同：1
> 
> 时间：2012-05-22T00:18:12.450
> 
> 标签：javascript, jquery, slidetoggle

让我以我不了解 JS 的事实作为开头，因此非常感谢任何帮助。

我有一个滑动开关，我想在页面加载 3 秒后打开它。这是我目前的幻灯片切换：

```
$(function(){
  // hide/show header
  $('#close-open-top a').bind('click', function() {
    if($('header:visible').length) {
      $('img', this).attr('src', 'img/open.png');
    } else {
      $('img', this).attr('src', 'img/close.png');
    }
    $('header').slideToggle('slow');

    return false;
  }); 
```

目前它加载关闭，当我单击箭头时它会打开。我希望它在页面加载后 3 秒自动打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:20:33.413

在准备好的文档中尝试以下操作：

```
$('header').delay(3000).slideToggle('slow'); 
```

该[`.delay()`方法](http://api.jquery.com/delay/)延迟动画队列中的后续项目（注意，您不能使用它来延迟非动画方法）。

或者，如果您希望执行单击处理程序中的所有代码（包括设置图像 src），那么最简单的方法是在 3 秒延迟后以编程方式触发单击，因此将以下内容添加到文档就绪处理程序的末尾（在点击处理程序的绑定之后）：

```
setTimeout(function() { $('#close-open-top a').trigger('click'); }, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:27:23.817

Well, I think i didn't get you totally..but maybe I can help you

to get a delay use setTimeout like:

```
setTimeout(function(){ $('header').slideToggle('slow');
},3000); 
```

so inside of the function you can put the code to be executed. The second parameter has to be chosem as the milliseconds you want to be waited before the function is called. If you want to do it automatically 3 seconds after Pageload use this:

```
$(document).ready(function(){
    setTimeout(function(){ $('header').slideToggle('slow');
    },3000);  
}); 
```

# javascript - 在javascript中引用的文本中插入换行符

> ID：10694269
> 
> 赞同：3
> 
> 时间：2012-05-22T00:18:36.113
> 
> 标签：javascript, textarea, line-breaks

使用 JavaScript 进行一些文本交换（推荐淡入/淡出），并希望`<br/>`在引号内插入等价的 a，以便引号的作者在下一行。在下面的代码中，我尝试按照[JavaScript 中的说明进行操作：如何向 HTML 文本区域添加换行符？](https://stackoverflow.com/questions/863779/textarea-line-breaks-javascript)，但不确定如何插入`/\n\r?/g`以使其工作。

```
<script type="text/javascript">
    var text = document.forms[0].txt.value;
    text = text.replace(/\n\r?/g, '<br />');
</script>

<script type="text/javascript">

    window.testimonials = [
        '"This was a great experience" /\n\r?/g - Max Cameron, ThinkTank',
        '"This was a great experience" /\n\r?/g - Max Cameron, ThinkTank',
        "source code"
    ];
</script> 
```

有没有办法强制它进入下一行？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:26:33.827

你在这里做了一些很奇怪的事情。为什么要在变量中插入“正则表达式”？

小提琴：http:
[//jsfiddle.net/4Fheu/](http://jsfiddle.net/4Fheu/)

尝试这个：

```
<script type="text/javascript">
    var text = window.testimonial; // or maybe: document.forms[0].txt.value;
    text = text.replace(/\n\r?/g, '<br />');
    alert(text);
</script>

<script type="text/javascript">

    window.testimonials = [
        '"This was a great experience" \n - Max Cameron, ThinkTank',
        '"This was a great experience" \n - Max Cameron, ThinkTank',
        "source code"
    ];
</script> 
```

`/\n\r?/`是一个正则表达式，它表示：“换行”后跟 0 或 1“回车”。

该值`'/\n\r?/'`是一个可能如下所示的字符串：

//
_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:22:19.170

[借用您链接到的内容：](https://stackoverflow.com/a/863806/465546)

```
window.testimonials = [
'"This was a great experience" /\n\r?/g - Max Cameron, ThinkTank'.replace(/(\n\r?)|(,)/g, '<br />');,
'"This was a great experience" /\n\r?/g - Max Cameron, ThinkTank'.replace(/(\n\r?)|(,)/g, '<br />');,
"source code"]; 
```

# c# - C# 多个 BackgroundWorker

> ID：10694271
> 
> 赞同：11
> 
> 时间：2012-05-22T00:18:38.923
> 
> 标签：c#, backgroundworker

我正在尝试设置多个`BackgroundWorker`s 来完成工作，并且在不忙的时候开始做下一点工作。我似乎无法让它们正常工作。我有下面的代码。

当我设置为`FilesToProcess`等于或小于`MaxThreads`它时，它可以完美地工作，尽管如果我把它设置得更高，应用程序就会冻结。

我确信这很简单，但我就是看不到它。

```
using System;
using System.ComponentModel;
using System.Threading;
using System.Windows.Forms;

namespace bgwtest
{
    public partial class Form1 : Form
    {
        private const int MaxThreads = 20;
        private const int FilesToProcess = 21;
        private BackgroundWorker[] threadArray = new BackgroundWorker[MaxThreads];

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1Load(object sender, EventArgs e)
        {
            InitializeBackgoundWorkers();
        }

        private void InitializeBackgoundWorkers()
        {
            for (var f = 0; f < MaxThreads; f++)
            {
                threadArray[f] = new BackgroundWorker();
                threadArray[f].DoWork += new DoWorkEventHandler(BackgroundWorkerFilesDoWork);
                threadArray[f].RunWorkerCompleted += new RunWorkerCompletedEventHandler(BackgroundWorkerFilesRunWorkerCompleted);
                threadArray[f].WorkerReportsProgress = true;
                threadArray[f].WorkerSupportsCancellation = true;
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            for (var f = 0; f < FilesToProcess; f++)
            {
                var fileProcessed = false;
                while (!fileProcessed)
                {
                    for (var threadNum = 0; threadNum < MaxThreads; threadNum++)
                    {
                        if (!threadArray[threadNum].IsBusy)
                        {
                            Console.WriteLine("Starting Thread: {0}", threadNum);

                            threadArray[threadNum].RunWorkerAsync(f);
                            fileProcessed = true;
                            break;
                        }
                    }
                    if (!fileProcessed)
                    {
                        Thread.Sleep(50);
                    }
                }
            }
        }

        private void BackgroundWorkerFilesDoWork(object sender, DoWorkEventArgs e)
        {
            ProcessFile((int)e.Argument);

            e.Result = (int)e.Argument;
        }

        private static void ProcessFile(int file)
        {
            Console.WriteLine("Processing File: {0}", file);
        }

        private void BackgroundWorkerFilesRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Error != null)
            {
                MessageBox.Show(e.Error.Message);
            }

            Console.WriteLine("Processed File: {0}", (int)e.Result);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T01:11:06.353

问题似乎是您的工人永远不会完成。为什么会这样，我不确定；它与您运行它们的方法（和线程）本身并未完成这一事实有关。我能够通过创建另一个工作人员将文件分配给工作人员数组来解决问题：

```
 private BackgroundWorker assignmentWorker;

    private void InitializeBackgoundWorkers() {
        assignmentWorker = new BackgroundWorker();
        assignmentWorker.DoWork += AssignmentWorkerOnDoWork;
        // ...
    }

    private void AssignmentWorkerOnDoWork( object sender, DoWorkEventArgs doWorkEventArgs ) {
        for( var f = 0; f < FilesToProcess; f++ ) {
            var fileProcessed = false;
            while( !fileProcessed ) {
                for( var threadNum = 0; threadNum < MaxThreads; threadNum++ ) {
                    if( !threadArray[threadNum].IsBusy ) {
                        Console.WriteLine( "Starting Thread: {0}", threadNum );

                        threadArray[threadNum].RunWorkerAsync( f );
                        fileProcessed = true;
                        break;
                    }
                }
                if( !fileProcessed ) {
                    Thread.Sleep( 50 );
                    break;
                }
            }
        }
    }

    private void button1_Click( object sender, EventArgs e ) {
        assignmentWorker.RunWorkerAsync();
    } 
```

我对这个答案不满意，因为我不知道为什么，确切地说，它不像你最初设计的那样工作。也许其他人可以回答...？至少这会给你一个工作版本。

编辑：您的原始版本不起作用，因为在与（UI 线程）`BackgroundWorkerFilesRunWorkerCompleted`相同的线程上运行。`button1_Click`由于您没有释放 UI 线程，因此该线程永远不会被标记为完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-01T14:05:13.190

在完成 Ethan Brown 的回答后，问题实际上来自您在 UI 线程内运行一个永远繁忙的循环这一事实。

如果`filesToProcess`低于最大线程数，则循环将每个文件分配给一个线程并退出。那里没有问题。

但是如果你的文件比线程多，那么看看当你在所有线程都在运行时尝试处理文件时会发生什么：

*   你检查是否所有线程都忙，是的。
*   您通过执行线程睡眠来等待。

问题是当后台工作人员完成时，它会将消息发布到 UI 线程消息队列中。而您的 UI 线程实际上正忙于检查您的线程并等待。

要解决这个问题：

*   要么将循环放在另一个线程中（作为 Ethan Brown 的解决方案）
*   您可以在 Thread.Sleep() 之前或之后添加`Application.DoEvents()`，以强制您的 UI 线程处理消息。这不是很好的做法，但很好地说明了这里的问题。

# c# - 以大数组作为成员元素的列表中的对象的高效查找

> ID：10694272
> 
> 赞同：0
> 
> 时间：2012-05-22T00:18:45.817
> 
> 标签：c#, arrays, performance, list

嗨，我有一门课如下

```
class State
{
    int[] some_array;
    //some other members
} 
```

现在我需要比较两个 State 对象是否相同。如果**它们具有相同的状态`some_array`** ***，而与对象的其他成员无关，***我将它们定义为相同的状态。

现在我有一个包含数千个 State 对象的列表。如何有效地获取一个状态并通过查找找出列表中存在的另一个类似状态？

我可以将`some_array`列表中每个状态元素的数组与给定的状态对象进行比较。但这需要大量计算 O(N*size of some_array)。如何以最少的计算量做到这一点？

注意：在每种情况下，除了一个数组权利之外的所有权利几乎相同。因此，查找可以深入到数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:23:36.607

I'm not sure if it's possible, but creating a hash of the contents in your array sounds like a good solution to me. That way you can just compare the hashes instead of iterating the whole array and comparing every individual value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:25:09.293

Assuming order matters, your algorithm is O(N) *worst case*. If values tend to be different for different states, the test will generally fail very early while comparing elements of two candidates. If the data were completely random, the performance to compare two states to each other would approach O(1)... the very first array elements would differ most of the time, odds of first two being identical would be much smaller, etc. If you know something about the structure of the data in the array (e.g. maybe most likely to differ at the end?) you can exploit that. Of course of the array lengths can be different, check that before anything else.

If the array is not going to change after initialization, you can precalculate a hash of the array elements. However, unless my first statement does not apply (you will generally get far into the array before detecting a difference), a hash may not be the best option.

# python - 使用 unicode 文件名上传文件

> ID：10694277
> 
> 赞同：3
> 
> 时间：2012-05-22T00:19:31.163
> 
> 标签：python, django

我有一个带有 unicode 名称的文件（例如中文字符）。我得到一个 UnicodeEncodeError。我在 ubuntu lucid 64 上使用带有 utf8 的 postgres 数据库和 django 开发服务器。我错过了什么？我执行以下操作，其中 filename 是 models.py 中文件的 unicode 名称：

```
def get_upload_path(instance,filename):
    return filename # Unicode error if filename has non latin 1 characters

class Kind (models.Model):
    style = models.ForeignKey(Style)
    kind_file = models.FileField(upload_to=get_upload_path) 
```

从外壳：

![在此处输入图像描述](../Images/ea8b58688a12122d5eb235dd2a9d1351.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T00:49:50.880

我相信问题出在您的字符串格式上。在 python2 中，它会自动在`str`类型（即一系列字节）和`unicode`类型之间进行转换，类型表示 unicode 代码点的抽象系列。

我假设你`filename`的类型是`unicode`.

`"tmp/%s/%s"`是一个字节字符串，所以 python 会尝试自动将你*编码*`unicode`为`str`匹配。问题是它使用`ascii`编码来做到这一点，它不能保存你的数据。

将您的语句更改`return`为使用`temp2`而不是`filename`应该可以工作，因为现在您正在一起使用正确的类型。

* * *

对于未来，我还建议观看我在评论中链接到的演示文稿，因为它提供了避免此类问题的几种策略。主要的一个是你应该**只在程序外发送数据时使用字节**。一旦你从外部世界接收到字节，`decode`它们就会变成 unicode，并且只有`encode`当你从程序中发送数据时。您还应该在内部使用 unicode 字符串文字（`u""`而不是`""`）。

我还推荐比`tempN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:19:29.737

Django 附带一些有用的功能，您可以在此处使用：[https ://docs.djangoproject.com/en/dev/ref/unicode/#conversion-functions](https://docs.djangoproject.com/en/dev/ref/unicode/#conversion-functions)

我认为`smart_str`是你需要的。

另一种方法是重命名用户上传的文件。

# ruby-on-rails - 如何在 Rails 3.2.3 下使用 Rack::Directory 服务目录

> ID：10694281
> 
> 赞同：1
> 
> 时间：2012-05-22T00:20:06.787
> 
> 标签：ruby-on-rails, rack

我有一个 Rails 应用程序（版本 3.2.3），我想提供一些有意不在公共目录中的静态文件。这个应用程序只是一个正在进行的工作，我只是用它来比较我在开发过程中的反应。

我已经设置了以下使用 Rails 自动加载的迷你 Rack 应用程序：

```
APISchemaSampleServer = Proc.new do |env|
  Rack::Directory.new(Rails.root + "/spec/support/schema_definitions")
end 
```

在我的路由文件中，我安装了小型 Rack 应用程序：

```
mount APISchemaSampleServer, at: '/samples' 
```

我的目录是一个现有目录，其中包含我在 Rails 应用程序中`spec/support/schema_definitions`浏览时想要提供的几个文件。`/samples`

但是，当访问上面的路径时，我收到以下错误：

```
NoMethodError

undefined method `[]' for nil:NilClass 
```

我一直在浏览[Rack::Directory 文档](http://rack.rubyforge.org/doc/Rack/Directory.html)并尝试了几种不同的方法，但这似乎仍然不起作用。

任何帮助是极大的赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:27:58.310

找出问题所在。我忘记`Rack::Directory`在`APISchemaSampleServer`. 正确的实现如下所示：

```
APISchemaSampleServer = Proc.new do |env|
  Rack::Directory.new('spec/support/schema_definitions').call(env)
end 
```

（注意额外的`.call(env)`方法。）

`Rack::Directory`此外，还可以删除构造函数参数中的 Rails.root 前缀，因为它`Rack::Directory`会从当前 Rack 应用程序中查找路径。

# ios - CGBitmapContextGetData 什么都不返回？

> ID：10694285
> 
> 赞同：0
> 
> 时间：2012-05-22T00:20:40.500
> 
> 标签：ios, core-graphics

我有一些名为 originalFrame 的 CGImageRef 充满了数据。使用它，我想做以下事情：

*   使图像灰度化
*   旋转图像
*   裁剪图像
*   将生成的像素数据馈送到外部库

但是，当我这样做时，无论我做什么，像素缓冲区都是*完全空的：*

```
 // Convert to grayscale, translate, rotate, crop.
    CGColorSpaceRef graySpace = CGColorSpaceCreateDeviceGray();
    uint8_t *croppedData = (uint8_t *)malloc( sizeof(uint32_t)*CROPPED_WIDTH*CROPPED_HEIGHT );
    memset( croppedData, 0, sizeof(uint32_t)*CROPPED_WIDTH*CROPPED_HEIGHT );

    context = CGBitmapContextCreate( croppedData, CROPPED_WIDTH, CROPPED_HEIGHT, 8, height*sizeof(uint32_t), graySpace,  kCGImageAlphaNoneSkipFirst );
    CGContextClipToRect(context, CGRectMake( 0, 0,  CROPPED_WIDTH, CROPPED_HEIGHT ) );
    CGContextTranslateCTM( context, 0, width );
    CGContextRotateCTM( context, -M_PI/2 );
    CGContextDrawImage( context, CGRectMake( 0, 0, width, height ), originalFrame );

    CGImageRef tempDisplayImage = CGBitmapContextCreateImage( context );
    [self.displayLayer performSelectorOnMainThread:@selector(setContents:) withObject:(id)tempDisplayImage waitUntilDone:YES];

    CGImageRelease( tempDisplayImage );
    CGContextRelease( context );
    CGColorSpaceRelease( graySpace );

    CGImageRelease( originalFrame ); 
```

我知道平移、旋转和裁剪工作正常，因为正确的图像显示在我的 displayLayer 中。尽管上下文正确绘制了图像，但为什么croppedData 缓冲区仍然为空的任何想法？

# database - WordPress 推荐

> ID：10694286
> 
> 赞同：0
> 
> 时间：2012-05-22T00:20:43.087
> 
> 标签：database, wordpress, plugins, registration, user-registration

我非常擅长 Wordpress 和通过 PHP 处理数据库，但我很难为客户想出一个解决方案。

客户想要一个 Wordpress 网站，允许其用户注册他们正在举办的年度高尔夫锦标赛。注册有两个功能。

首先，实际的注册过程。其次，通过单独的表格，可以使用已经注册的用户创建四人组。

有谁知道接近执行这些功能的 Wordpress 插件？还是我必须从头开始写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:27:17.077

我个人能找到的最接近的是[Event Registration Plugin](http://wordpress.org/extend/plugins/event-registration/)，但我怀疑它是否能完全满足您的需求。

但是，您正在寻找的东西听起来并不复杂，所以我会从头开始构建它。

# spring - 在 Spring MVC 中管理 HTML 资源（CSS、JS 文件）

> ID：10694289
> 
> 赞同：2
> 
> 时间：2012-05-22T00:21:17.953
> 
> 标签：spring, grails, spring-mvc, resources

是否可以在类似于 grails-resources 的 Spring MVC 中管理 HTML 资源？

与此类似： [http ://www.anyware.co.uk/2005/2011/09/12/optimising-your-application-with-grails-resources-plugin/](http://www.anyware.co.uk/2005/2011/09/12/optimising-your-application-with-grails-resources-plugin/)

例如：在 Grails 中，模块被指定为

```
modules = {  
     common {  
        resource url:"css/main.css"  
        resource url:"js/jquery.js"  
     }  
} 
```

在 HTML 中，这个标签是用模块名称指定的，用于加载所有文件。

```
<r:require module="common"/> 
```

`<mvc:resources>`所以我想知道有什么方法可以在 Spring MVC 中使用或任何其他选项来做类似的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T07:56:09.217

**简短的回答：当然**。但我认为真正的问题是“如何？” :)

Spring MVC 是 Grails 构建的基础，所以它可以做 Grails 可以做的事情。Grails-resources 只是 Grails 为帮助更轻松地开发工作而开发的实用程序。如果你想在 Spring 中做同样的事情，你必须做一些工作。

首先，Spring MVC 有一种公开资源的方法（[参考](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-static-resources), 第 17.15.6 章，“配置资源服务”）；例如：

```
<mvc:resources mapping="/images/**" location="/images/"/> 
```

上面的行将每个文件公开`[Web folder]/images/`为资源，并且可以由 Web 浏览器请求。

其次，要像 Grails 一样简单地将资源嵌入到 HTML 中，您必须将 Spring[与其他一些视图技术](http://static.springsource.org/spring/docs/2.5.x/reference/view.html)结合起来，例如 sitemesh、freemarker/velocity/JSP...（Grails 在幕后为您做这些）。现在你有***freemarker 或 Velocity 的宏***，而不是***grails 标签***。但我建议编写一些您自己的自定义宏，因为内置宏并不总是好的。

 *我使用过 Grails 和 Spring MVC。我很欣赏 Grails 为使开发人员的生活更轻松所做的努力，但使用 Spring 时情况有所不同。使用 Spring，您将编写更多代码，做出更多选择（在 Grails 中，它们被选为“默认”，如果您不想自定义，它们是“不可见的”）。作为回报，你**被迫**更加了解底层机制，这是一件好事。

我已经使用 sitemesh 进行布局，并使用 freemarker 作为 HTML 渲染引擎用于几个 Web 项目，它们运行良好。

* * *

**更新：**

我想明确指出这`mvc:resources`不是您问题的完整答案。这只是***将***Web 资源公开以供浏览器获取的一部分。对于 Grails，这已经是默认设置了，但对于 Spring 来说并非如此。您必须指定文件夹 'images' 中的内容是资源，并且可以通过 url 访问它们`http://your-domain-name/context-name/images/image-name`。话说，Spring 比 Grails 明确得多。

另一件事是模板引擎。在使用 Spring 时，Library Sitemesh 是一个流行的选择（它也是 Grails 的默认设置），所以它并没有太大的不同（主要是关于语法）。**模板引擎的主要目的是用动态数据“填充”您的 html**，我将向您展示......其中的一些内容。

请注意，制作满足您示例的教程超出了答案的范围。此外，Spring 启用了许多相关的解决方案，这意味着不同的开发人员可能有不同的组织/配置方式。但是为了给你一个感觉，我会做一个简单的例子（我正在使用 freemarker 做这个例子）：

在文件：common.ftl 中，我有：

```
<#macro commonInclude>
<script type="text/javascript" src="${rc.getContextUrl('/js/jquery.js')}"></script>     
<link rel="stylesheet" type="text/css" href="${rc.getContextUrl('css/main.css')}" />
</#macro> 
```

再加一点配置，然后在视图文件中我可以调用：

```
<@common.commonInclude /> 
```

它会呈现你想要的代码。

如您所见，主要区别在于它们的语法。Grails 允许更简洁的样式，而 Spring 为您提供更“明确”的样式，如果您想自定义事物，这将受益。

*   奖励：如果您正在寻找 的替代品`Grails layout`，请快速搜索“Spring and Sitemesh”，您可能会找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T03:42:49.820

> grails-app/conf/spring/resources.groovy

```
import org.springframework.web.servlet.handler.SimpleUrlHandlerMapping
import org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter
import org.springframework.web.servlet.resource.ResourceHttpRequestHandler

// Place your Spring DSL code here
beans = {

    resourceHttpRequestHandler(ResourceHttpRequestHandler) {
        locations = ['file:/D:/fupload/']
    }

    resourceHandlerAdapter(HttpRequestHandlerAdapter)

    resourceHandlerMapping(SimpleUrlHandlerMapping) {
        urlMap = ['/fupload/**':'resourceHttpRequestHandler']
    }
} 
```*

# c# - 在什么条件下实现部分类？

> ID：10694290
> 
> 赞同：0
> 
> 时间：2012-05-22T00:21:26.687
> 
> 标签：c#, mvvm, partial-classes

> **可能重复：**
> [部分类的用途是什么？](https://stackoverflow.com/questions/6747154/what-is-the-use-of-a-partial-class)

在我的代码中，有一个用于创建新公司的部分类。我无法理解要在哪个条件下部分实施。

```
public partial class NewCompanyWindow : Window
{
    List<Company> _companies;
    public event EventHandler<CompanyAddedEventArgs> CompanyAdded;

    public NewCompanyWindow()
    {
        InitializeComponent();

        Closing += new
          System.ComponentModel.CancelEventHandler(NewCompanyWindow_Closing);
    }

    void NewCompanyWindow_Closing(object sender,
         System.ComponentModel.CancelEventArgs e)
    {
        StartupWindow w = new StartupWindow();
        w.Show();
    }

    public NewCompanyWindow(List<Company> companies)
        : this()
    {
        _companies = companies;
    }

    private void CreateButton_Click(object sender, RoutedEventArgs e)
    {.. 
```

谁能说在哪种情况下使用部分类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:36:51.247

当你想将一个类的实现拆分到多个代码文件时，应该使用部分类。通常，当您有一个部分是用户定义和部分生成的类（例如 Windows 窗体）时，这种方法是有保证的。

部分类在 Form1.cs 中定义，设计器生成的代码在 Form1.designer.cs 中。这两个类都包含 Form1 类的实现，但通常开发人员不会编辑“设计器”文件中的代码，但仍然可以通过编辑 Form1.cs 文件来自定义 Form1 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:11:36.213

部分类可以扩展。它用于将一个类分解为多个文件。

# javascript - Jquery ui选项卡正在换行到另一行

> ID：10694304
> 
> 赞同：1
> 
> 时间：2012-05-22T00:23:19.700
> 
> 标签：javascript, jquery

我的网站上有 jquery 选项卡，但在较小的屏幕上，选项卡换行到另一行有没有办法让选项卡不这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:44:58.020

我点击了 NAVEED 的链接，它很乱。如果您只能使用支持实现 inline-block 的浏览器，请尝试：

```
jQuery('#mytabs')
    .tabs()
    .find('.ui-tabs-nav')
        .css('white-space','nowrap')
        .css('overflow','hidden')
        .find('li')
            .css('display','inline-block')
            .css('float','none')
            .css('vertical-align','bottom'); 
```

快速和肮脏，未经测试。

小提琴（js）：http: [//jsfiddle.net/yxPa6/4/](http://jsfiddle.net/yxPa6/4/)

小提琴（css）：http: [//jsfiddle.net/kUuTE/2/](http://jsfiddle.net/kUuTE/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T13:32:26.940

添加滚动按钮是隐藏不适合一行的选项卡的不错选择。这可以使用[jquery-ui-tabs-paging](http://code.google.com/p/jquery-ui-tabs-paging/)插件轻松完成，请查看示例[页面](http://www.seyfertdesign.com/jquery/ui.tabs.paging.html)。

# actionscript-3 - 如何在 Flash Professional CS6(AS3) 中单击一个按钮来播放下 x 帧或前 x 帧

> ID：10694308
> 
> 赞同：0
> 
> 时间：2012-05-22T00:23:36.593
> 
> 标签：actionscript-3, flash, flash-cs5

我必须设计一个简单的动画，它应该通过单击前进按钮播放下一个 X 帧，并通过单击后退按钮播放前 X 帧（以相反的顺序）。我在 AS3 方面有丰富的经验，但我似乎不知道从哪里开始使用 Flash Professional。

我设法在屏幕上获得了一个按钮和一些动画，单击按钮时我得到了正确的跟踪，但我没有得到任何进一步的信息......

谢谢你的帮助

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:42:34.827

您可以尝试使用一个ticker 变量来计算要播放的帧数。只需在单击按钮时设置此变量。然后使用 enterframe 处理程序每​​帧转到正确的帧。例子：

```
var maxFramesToPlay:int = 20;
var framesToPlay:int = 0;

addEventListener(Event.ENTER_FRAME, enterFrameHandler);
forwardButton.addEventListener(MouseEvent.CLICK, forwardClickHandler);
backButton.addEventListener(MouseEvent.CLICK, backClickHandler);

private function forwardClickHandler(e:MouseEvent):void 
{
    framesToPlay = maxFramesToPlay;
}

private function backClickHandler(e:MouseEvent):void 
{
    framesToPlay = -maxFramesToPlay;
}

private function enterFrameHandler(e:Event):void 
{
    if (framesToPlay > 0) 
    {
        MovieClip(this).nextFrame();
        framesToPlay--;
    }
    else if (framesToPlay < 0) 
    {
        MovieClip(this).prevFrame();
        framesToPlay++;
    }
    else 
    {
        // framesToPlay is zero, so don't do anything.
    }
} 
```

您可以将此功能放入扩展 MovieClip 的类中，然后在 Flash 中将其设置为 Document Class。

# java - 致命例外：主要错误 - Android 开发

> ID：10694310
> 
> 赞同：3
> 
> 时间：2012-05-22T00:23:52.460
> 
> 标签：java, android, eclipse, fatal-error

我目前正在制作一个 android 应用程序并试图解决这个问题。每当我编译我的代码并将其加载到模拟器上时，它最初都会加载以下错误：

```
05-22 00:12:54.753: W/dalvikvm(1631): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-22 00:12:54.783: E/AndroidRuntime(1631): FATAL EXCEPTION: main
05-22 00:12:54.783: E/AndroidRuntime(1631): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3938)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.ActivityThread.access$1300(ActivityThread.java:123)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.os.Looper.loop(Looper.java:137)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at java.lang.reflect.Method.invokeNative(Native Method)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at java.lang.reflect.Method.invoke(Method.java:511)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at dalvik.system.NativeStart.main(Native Method)
05-22 00:12:54.783: E/AndroidRuntime(1631): Caused by: java.lang.NullPointerException
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
05-22 00:12:54.783: E/AndroidRuntime(1631):     at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
05-22 00:12:54.783: E/AndroidRuntime(1631):     ... 11 more 
```

然后它用强制关闭将我踢出应用程序，但它很快就会自动启动并运行良好。如果我关闭应用程序并杀死它，它不会强制关闭或任何东西。就在它最初在模拟器上启动时。我想知道这是什么原因。以下是第二次加载后弹出的消息：

```
05-22 00:13:07.113: D/dalvikvm(1664): GC_FOR_ALLOC freed 38K, 3% free 9110K/9347K, paused 61ms
05-22 00:13:07.165: I/dalvikvm-heap(1664): Grow heap (frag case) to 12.525MB for 3732496-byte allocation
05-22 00:13:07.263: D/dalvikvm(1664): GC_CONCURRENT freed 1K, 2% free 12754K/12999K, paused 5ms+5ms
05-22 00:13:07.543: D/dalvikvm(1664): GC_FOR_ALLOC freed <1K, 2% free 12755K/12999K, paused 37ms
05-22 00:13:07.573: I/dalvikvm-heap(1664): Grow heap (frag case) to 14.502MB for 2073616-byte allocation
05-22 00:13:07.753: D/dalvikvm(1664): GC_CONCURRENT freed <1K, 2% free 14780K/15047K, paused 5ms+5ms
05-22 00:13:08.033: D/gralloc_goldfish(1664): Emulator without GPU emulation detected. 
```

我将为您提供你们需要的任何和所有编码，但不幸的是我不知道这个错误会出现在哪里？我的程序中有很多文件，所以如果可能的话，我宁愿不发布所有文件。

抱歉，这个问题没有提供太多信息，我只是不知道该给您什么信息（如果有意义的话？）请回复并告诉我您需要哪些信息，并感谢您的任何和所有帮助

## 编辑

这是我的splash.java

```
package com.food;

import com.food.odu.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

//creating a splash effect so the company logo appears for a few seconds before the program
public class Splash extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);  //defined the reference id 'splash' in the splash.xml file

        Thread timer = new Thread(){    //creates a new timer for our splash effect
            public void run(){   //runs the splash program
                try{
                     sleep(5000);    //attempts to run the splash picture for 5000 milliseconds (5 seconds)
                   } catch(InterruptedException e){
                      e.printStackTrace();    //if that doesn't work, this line is debugging information
                      }finally{
                        Intent openStartingPoint = new Intent("com.rhodes.jacob.COM.FOOD.ODUACTIVITY"); //creating an intent which is basically a reference to the Android Manifest
                        startActivity(openStartingPoint);                                               //file saying that when this intent is called, to go to the address at that name in the Android Manifest file
                      }
                  }

        };

        timer.start();

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }

} 
```

* * *

这是我的 oduActivity.java （我想我的主要）

```
package com.food;

import com.food.odu.R;
//import com.food.odu.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class oduActivity extends Activity {
    /** Called when the activity is first created. */

    Button Cafe1201, Legends, Rogers, Faculty;
    TextView display;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);        
        setContentView(R.layout.main);

        Button Cafe1201 = (Button)findViewById(R.id.cafe1201);
        Button Legends = (Button)findViewById(R.id.legends);
        Button Rogers = (Button)findViewById(R.id.rogers);
        Button Faculty = (Button)findViewById(R.id.fac_n_staff);

  //    Button Legal = (Button)findViewById(R.id.legal);
  //    Button Other = (Button)findViewById(R.id.other);
  //    Button About = (Button)findViewById(R.id.aboutUs);
        //Button Mainpage = (Button)findViewById(R.id.main_page);

        //Changes page to the cafe1201 page
        Cafe1201.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent whichCafe = new Intent(oduActivity.this,cafe1201.class);
                startActivity(whichCafe);

            }
        });

         //changes page to the legends page
          Legends.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    Intent whichCafe = new Intent(oduActivity.this,legends.class);
                    startActivity(whichCafe);

                }
            }); 

          //changes page to the rogers page
          Rogers.setOnClickListener(new View.OnClickListener() {
              public void onClick(View v) {
                  Intent whichCafe = new Intent(oduActivity.this,rogers.class);
                  startActivity(whichCafe);

              }
          }); 

          //changes page to the faculty page
          Faculty.setOnClickListener(new View.OnClickListener() {
              public void onClick(View v) {
                  Intent whichCafe = new Intent(oduActivity.this,faculty.class);
                  startActivity(whichCafe);

              }
          }); 

    }

    //Options menu
    @Override
    public boolean onCreateOptionsMenu(android.view.Menu menu) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu);
        MenuInflater blowUp = getMenuInflater();
        blowUp.inflate(R.menu.menu, menu);
        return true;

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        switch(item.getItemId()){

        case R.id.main_page:

            Intent whichOption = new Intent(oduActivity.this,oduActivity.class);
            startActivity(whichOption);
            break;
        case R.id.other:

            whichOption = new Intent(oduActivity.this,menu.class);
            startActivity(whichOption);
            break;
        case R.id.aboutUs:

            whichOption = new Intent(oduActivity.this,aboutUs.class);
            startActivity(whichOption);
            break;
        case R.id.legal:

            whichOption = new Intent(oduActivity.this,legal.class);
            startActivity(whichOption);
            break;

        }
        return false;
    }

     //   display = (TextView) findViewById(R.id.tvDisplay);
  //  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:32:46.013

我在这里看到空指针。您应该设置断点并尝试使用另一个模拟器...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:06:43.150

为什么不试试这个，

```
Intent openStartingPoint = new Intent(Splash.this,ODUACTIVITY.class); //creating an intent which is basically a reference to the Android Manifest
                        startActivity(openStartingPoint); 
```

# java - 嵌套 JSF 表达式字符串

> ID：10694311
> 
> 赞同：4
> 
> 时间：2012-05-22T00:23:55.827
> 
> 标签：java, jsf-2, el

我想使用值表达式的动态参数来实现这一点：

```
<h:dataTable value="#{someBean.someValue}" var="field">
    <h:column>#{anotherBean[field]}</h:column>
</h:dataTable> 
```

`field`在哪里`'user.name'`或`'location.address.zip'`或...

是否可以？

请注意，这是一个简单的示例，我感兴趣的`ValueExpression`不是`dataTable`组件。

**UPDATE** 现在的问题是：如何替换标准的BeanELResolver？

在 ELUtils 中查找：

```
 ...
    composite.addRootELResolver(IMPLICIT_RESOLVER);
    composite.add(FLASH_RESOLVER);
    composite.addPropertyELResolver(COMPOSITE_COMPONENT_ATTRIBUTES_EL_RESOLVER);
    addELResolvers(composite, associate.getELResolversFromFacesConfig());
    addVariableResolvers(composite, FacesCompositeELResolver.ELResolverChainType.Faces,
            associate);
    addPropertyResolvers(composite, associate);
    composite.add(associate.getApplicationELResolvers());
    composite.addRootELResolver(MANAGED_BEAN_RESOLVER);
    composite.addPropertyELResolver(RESOURCE_RESOLVER);
    composite.addPropertyELResolver(BUNDLE_RESOLVER);
    ... 
```

但我还没有完全理解解析器链......所以我会去学习:)

**更新 2**

此代码有效；）

```
public class ExtendedBeanELResolver extends BeanELResolver
{
    @Override
    public Object getValue(ELContext context, Object base, Object property) throws NullPointerException, PropertyNotFoundException, ELException
    {
        try
        {
            return super.getValue(context, base, property);
        }
        catch(PropertyNotFoundException e)
        {
            try
            {
                Object value = base;

                for(String part : property.toString().split("\\."))
                {
                    value = super.getValue(context, value, part);
                }

                return value;
            }
            catch(PropertyNotFoundException e1)
            {
                context.setPropertyResolved(false);
            }
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T04:23:12.313

默认情况下不支持此功能。你需要在`ELResolver`这里定制。最简单的就是扩展现有的[`BeanELResolver`](http://docs.oracle.com/javaee/6/api/javax/el/BeanELResolver.html).

这是一个启动示例：

```
public class ExtendedBeanELResolver extends BeanELResolver {

    @Override
    public Object getValue(ELContext context, Object base, Object property)
        throws NullPointerException, PropertyNotFoundException, ELException
    {
        if (property == null || base == null || base instanceof ResourceBundle || base instanceof Map || base instanceof Collection) {
            return null;
        }

        String propertyString = property.toString();

        if (propertyString.contains(".")) {
            Object value = base;

            for (String propertyPart : propertyString.split("\\.")) {
                value = super.getValue(context, value, propertyPart);
            }

            return value;
        }
        else {
            return super.getValue(context, base, property);
        }
    }

} 
```

要让它运行，请在以下位置注册它`faces-config.xml`：

```
<application>
    <el-resolver>com.example.ExtendedBeanELResolver</el-resolver>
</application> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-02T16:51:22.420

在这个主题上所做的工作非常有趣，但并不完整。

如果您在此组件中设置的复合组件中传递值，则它不起作用。

例子 ：

```
<composite:interface>
    <composite:attribute name="value" type="java.lang.Boolean" required="true"  />
</composite:interface>
<composite:implementation>
        <h:inputText id="inputValue" value="#{cc.attrs.value}" 
        </h:inputText>
</composite:implementation> 
```

使用 ExtendedBeanElResolver，当我设置值时它会抛出 PropertyNotFoundException。

因此，我花了几个小时来寻找解决方案，这是可行的解决方案，以便能够使用 ExtendedBeanElResolver 并能够在复合组件中设置值：

```
public class ExtendedBeanELResolver extends BeanELResolver {

    private static final String PRIMEFACES_RESOURCE_PREFIX = "primefaces:";
    private static final String RESOURCES_HANDLER = "class org.omnifaces.resourcehandler.GraphicResourceHandler";
    private static final String PRIMEFACES_EXT_RESOURCES_HANDLER = "class org.primefaces.extensions.application.PrimeFacesExtensionsResourceHandler";

    @Override
    public Object getValue(ELContext context, Object base, Object property) {

            if (property == null || base == null || base instanceof ResourceBundle || base instanceof Map || base instanceof Collection
                    || property.toString().startsWith(PRIMEFACES_RESOURCE_PREFIX) || base.getClass().toString().equals(RESOURCES_HANDLER)
                    || base.getClass().toString().equals(PRIMEFACES_EXT_RESOURCES_HANDLER)) {
                return null;
            }
            String propertyString = property.toString();
            if (propertyString.contains(".")) {
                Object value = base;

                for (String propertyPart : propertyString.split("\\.")) {
                    value = super.getValue(context, value, propertyPart);
                }

                return value;
            } else {
                Object v = super.getValue(context, base, property);
               return v;
            }
    }

    @Override
    public void setValue(ELContext context, Object base, Object property, Object val) {
        if (base != null && !(base instanceof ResourceBundle) && !(base instanceof Map) && !(base instanceof Collection))
            super.setValue(context, base, property, val);
    }
} 
```

（我添加了“setValue”部分）。

现在它可以工作了。不要犹豫，给我你的反馈，因为这是我在这个网站上的第一篇文章！

# javascript - Javascript mathematics

> ID：10694313
> 
> 赞同：2
> 
> 时间：2012-05-22T00:24:17.423
> 
> 标签：javascript, math, charts

Hey I have an equation that I need to figure out it is chart based math where you have two points on the chart and need to get the rest of the values:

I am building a javascript page that takes the takes the two points on a chart but needs to spit out any position on the chart.

It is for extrapolating the sight settings on an archery site based on knowing two distances and sight settings:

Max Setting on sight: Var = 120;

```
Distances
18M
20M
25M
30M
35M
40M
45M
50M
55M
60M
70M
90M

```

The user would provide the following via form elements.

Shortest recorded sight setting Yardage and Site setting position E.G. 45M = 50 Longest recorded sight setting Yardage and Site setting position E.G. 70M = 105

Max Setting on site = 120

Distance they would like to get an estimation for (same list as above)

What the equation would do is guess the site setting for the yardage selected as long as they have entered the two previous settings.

For some reason I am lost trying to figure out the math for this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:52:07.633

首先，真的很酷的问题！

我通常依赖肯塔基州的风向，但这似乎是一种更精确的方法！

我有一个解决方案，我没有费心创建表单输入，而是创建了一些静态输入。

```
var max = {"distance" : 70,"sight" : 105};
var min = {"distance" : 45,"sight" : 50};
var calculateSightSetting = function(dist,min,max){
  var distRange,distFactor,sightRange,returnDistance;
  if (dist < min.distance){
      throw "Distance provided must be at least " + min.distance + " M Long";
  }else{
      distRange = max.distance - min.distance;
      distFactor = ((dist-min.distance)/distRange);
      sightRange = max.sight-min.sight;
      returnDistance = min.sight + (sightRange * distFactor);
  }
  return returnDistance;
}                  
console.log(calculateSightSetting(60,min,max)); 
```

我还创建了一个 JSFiddle，因此您可以运行它并查看它是否按预期执行。

[http://jsfiddle.net/marteljn/rtYRZ/4/](http://jsfiddle.net/marteljn/rtYRZ/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:23:57.277

感谢大家的意见和建议，

我想我已经弄清楚了，您可以在以下位置查看解决方案

[http://matthewchitty.com/archery](http://matthewchitty.com/archery)

（请注意它是 javascript，因此您可以查看源代码并查看代码。）

最终变得非常简单，我想出了插值。

# php - Symfony2：在哪里设置用户定义的时区

> ID：10694315
> 
> 赞同：7
> 
> 时间：2012-05-22T00:24:44.220
> 
> 标签：php, symfony, timezone

我对当前项目的要求之一是允许用户为其帐户选择一个时区，然后将这个时区用于整个站点的所有与日期/时间相关的功能。

在我看来，我有两个选择：

*   为每个新的 DateTime 传递一个 DateTimeZone 对象到 DateTime 的构造函数
*   使用 PHP 设置默认时区`date_default_timezone_set()`

似乎使用 date_default_timezone_set 是要走的路，但我不确定我应该在哪里设置它。因为时区因用户而异，并且整个站点都使用 DateTime，所以我需要将其设置在会影响所有页面的位置。

也许我可以编写一个事件监听器，在成功登录后设置它？如果我采用这种方法，它会在所有页面上保持设置还是仅在每页的基础上设置？

我很想听听其他人会如何处理这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-22T09:35:20.433

是的，您可以使用事件侦听器来挂钩`kernel.request`事件。

这是我的一个项目中的听众：

```
<?php
namespace Vendor\Bundle\AppBundle\Listener;

use Symfony\Component\Security\Core\SecurityContextInterface;
use Doctrine\DBAL\Connection;
use JMS\DiExtraBundle\Annotation\Service;
use JMS\DiExtraBundle\Annotation\Observe;
use JMS\DiExtraBundle\Annotation\InjectParams;
use JMS\DiExtraBundle\Annotation\Inject;

/**
 * @Service
 */
class TimezoneListener
{
    /**
     * @var \Symfony\Component\Security\Core\SecurityContextInterface
     */
    private $securityContext;

    /**
     * @var \Doctrine\DBAL\Connection
     */
    private $connection;

    /**
     * @InjectParams({
     *     "securityContext" = @Inject("security.context"),
     *     "connection"      = @Inject("database_connection")
     * })
     *
     * @param \Symfony\Component\Security\Core\SecurityContextInterface $securityContext
     * @param \Doctrine\DBAL\Connection $connection
     */
    public function __construct(SecurityContextInterface $securityContext, Connection $connection)
    {
        $this->securityContext = $securityContext;
        $this->connection      = $connection;
    }

    /**
     * @Observe("kernel.request")
     */
    public function onKernelRequest()
    {
        if (!$this->securityContext->isGranted('ROLE_USER')) {
            return;
        }

        $user = $this->securityContext->getToken()->getUser();
        if (!$user->getTimezone()) {
            return;
        }

        date_default_timezone_set($user->getTimezone());
        $this->connection->query("SET timezone TO '{$user->getTimezone()}'");
    }
} 
```

# perl - 取消引用哈希值

> ID：10694319
> 
> 赞同：3
> 
> 时间：2012-05-22T00:25:21.490
> 
> 标签：perl, hash, reference

这不起作用：

```
 my %y = ("lkj",34);
 my %i = ("lkj",66);
 my @e = (\%y, \%i);
 my $u = ${%{$e[0]}}{"lkj"}; 
```

但这确实：

```
 my %u = %{$e[0]};
         print $u{"lkj"}; 
```

如果我不想输入额外的行，我该怎么办。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T00:28:18.947

您使用`->`运算符：

```
$e[0]->{"lkj"} 
```

你可以为 arrayrefs 做类似的事情，它甚至可以链接：

```
my $eref = \@e;
print $eref->[0]->{"lkj"} 
```

作为奖励，您也可以使用`{}`arrayrefs 的简写在一行中完成所有设置：

```
my @e = ( { lkj => 34 }, { lkj => 66 } ); 
```

# bash - bash 脚本，调用函数作为条件测试

> ID：10694323
> 
> 赞同：3
> 
> 时间：2012-05-22T00:25:56.953
> 
> 标签：bash, scripting

有人可以告诉我为什么第 7 行（if 语句）会产生错误：

```
test.sh: line 7: [: command_exists: unary operator expected 
```

谢谢！

```
#!/usr/bin/env bash

command_exists () {
  command -v "$1" &> /dev/null ;
}

if [ ! command_exists ruby ]; then  # test.sh: line 7: [: command_exists: unary operator expected
  echo 'found ruby'
else
  echo 'ruby not found'
fi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T00:33:53.840

```
if ! command_exists ruby; then 
```

在 Bash 中，`if`执行命令并根据其返回值进行操作。`[`恰好是一个命令。

# c# - MVC4 _Layout.cshtml Bundles For Scripts

> ID：10694325
> 
> 赞同：2
> 
> 时间：2012-05-22T00:26:02.773
> 
> 标签：c#, asp.net-mvc, partial-views, asp.net-mvc-4, bundles

In the head section of my _Layout.cshtml page I have this line of code...

```
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

I check the scripts directory and jquery-ui is in there just fine. I'm fairly new to MVC and especially MVC4\. I've worked with 3 and I don't believe there was anything to do with Bundles from what I recall, or at least used. From what I get, this bundles up all the scripts into a tightly typed up text format taking out spaces and whatnot. So what I'm assuming is that jquery-ui is going to be added to each page since it's a shared page like a Master Page in Web Forms.

Now in my Index.cshtml file that uses this shared layout page I have at the top.

```
$(function () {
    $('#DateOfBirth').datepicker();
}); 
```

I've added a partial view with this code as well in my Index.cshtml file.

```
@Html.Partial("_SignUp", Model) 
```

The partial view contains the field I'm trying to add it to. Unfortunately, it isn't adding the datepicker to the input field of type=text, and yes, the id="#DateOfBirth" for this field. What's the deal?

Edit: I do get this error - "Uncaught TypeError: Object [object Object] has no method 'datepicker'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:29:52.353

我看到的情况是，如果我将 javascipt 代码排除在外

```
<script type="text/javascript">
$(function () {
    $('#StartDateTime').datepicker();
});
</script> 
```

并将其放在 _Layout.cshtml 下方

```
@Scripts.Render("~/bundles/jquery","~/bundles/jqueryui")
@RenderSection("scripts", required: false) 
```

行（注意我必须包含 jqUi 包）它工作正常！！！

但我希望它以我希望它工作的方式工作。所以文档准备好在脚本完全加载之前被触发？

更新：只需用@section scripts {} 包围您的脚本，这将在页面底部的 jquery.js 文件下方呈现。

```
@section scripts {
<script type="text/javascript">
    $(function () {

        // Accordion
        $("#accordion").accordion({ header: "h3", active: 0, fillSpace: false });
        $("#bidTabs").tabs();
        $("#jobTabs").tabs();
        $("#settingsTabs").tabs(); 
    });
</script>
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T06:06:13.683

我看不出您的代码有任何问题，并且无法重现该问题（ASP.NET MVC 4 Beta）。以下对我来说很好：

1.  使用 Internet 模板创建一个新的 ASP.NET MVC 4 项目
2.  添加视图模型：

    ```
    public class MyViewModel
    {
        public DateTime DateOfBirth { get; set; }
    } 
    ```

3.  家庭控制器：

    ```
    public class HomeController : Controller
    {
         public ActionResult Index()
         {
            return View(new MyViewModel
            {
                DateOfBirth = DateTime.Now
            });
        }
    } 
    ```

4.  `Index.cshtml`：

    ```
    @model MyViewModel

    <script type="text/javascript">
    $(function () {
        $('#DateOfBirth').datepicker();
    });
    </script>

    @Html.Partial("_SignUp", Model) 
    ```

5.  `_SignUp.cshtml`

    ```
    @model MyViewModel
    @Html.EditorFor(x => x.DateOfBirth) 
    ```

6.  结果：

![在此处输入图像描述](../Images/8ecd6f835e560ba1d47e790cdae8c09e.png)

所以我想现在问题变成了，你做了什么不同的事情？

# php - 在预定义的打印表单上打印来自数据库的信息

> ID：10694326
> 
> 赞同：0
> 
> 时间：2012-05-22T00:26:05.797
> 
> 标签：php, html, forms, printing

我想在预定义的打印表单上打印数据库中的信息。

我有一个打印的表格，并且我在数据库中获得了与该表格相关的所有信息。我想在表格的适当位置打印该信息。我只想打印信息而不是其他预定义的说明。例如，在下面的表格中，只有蓝色文本会从数据库中更改

![在此处输入图像描述](../Images/432394ebb44c0a469bec425f82e8ba1f.png)

谁能建议一种方法来做到这一点？感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:25:49.247

您可以使用许多 pdf 课程之一来做到这一点。首先将 pdf 放在后台，然后从数据库中调用文本并将其放置在您想要的位置。我是[EZPDF Class](http://www.ros.co.nz/pdf/)的粉丝。它易于使用，有据可查，并且完全符合您的要求。我已经做过很多次了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T05:37:56.080

您可以在网页上使用 CSS 对齐和定位数据。正如 Ryan 之前所说，PDF 课程将帮助您完成此任务。您的数据是否在从数据库中检索后直接用于打印？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:53:59.430

感谢 Ryan 建议 EZPDF 课程和其他所有人的回复。

我发现 EZPDF 类（由 Ryan 建议）有点棘手，并认为这可能需要很多时间。所以，我采用了不同的方法。我创建了带有可填写表格的 pdf（使用 Adob​​e Acrobat），然后使用[createFDF](http://koivi.com/fill-pdf-form-fields/tutorial.php)填写了这些地方并打印了表格

问候

# php - 如何查找在给定时间段内一周中特定日期发生的次数

> ID：10694329
> 
> 赞同：4
> 
> 时间：2012-05-22T00:27:01.133
> 
> 标签：php

我正在尝试处理每周一次、每月两次或每月一次的团体 - 在一周中的任何一天。我想计算任何给定配置在给定时间范围内生成的出现次数。

例如，假设一个小组每周五开会，从 1 月 1 日到 6 月 30 日，他们会开几次会？或者，如果一个小组从 1 月 1 日到 6 月 30 日每隔一周在星期二开会，他们会开几次会？等等。

这在php中可能吗？我在[DateInterval 手册](http://www.php.net/manual/en/class.dateinterval.php)中没有看到解决方案。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:41:47.910

好吧，首先，你知道如果两个日期之间有 N 天，那么一周中的每一天至少有 floor(N/7) 天。但它可能不止于此。

例如，从今年（2012 年）的 1 月 1 日到 6 月 30 日是 182 天（假设两个端点都包括在内）。那正好是 26 周，所以一周中的每一天正好有 26 天。然而，从 1 月 1 日到明年 6 月 30 日，只有 181 天，即 25 周加 6 天。它也恰好是 26 个星期五，但只有 25 个星期一。

我从上面的“可能重复”链接中推荐@philmccull 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:54:47.487

所以，我认为它的要点是

1) 计算出跨度中有多少个“周期”（因此，如果跨度为 35 天，并且会议每隔一周召开一次，那么您有两套完整的时间段（28 天））

2）调查一个完整周期之外的剩余天数（基本上是模数）

然后总数为：（期间数）*（每个期间的会议天数）+（剩余的会议天数）

我并不是说这是最有效的代码（也没有输入验证），但这是实现它的一种方法：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<?php
if(isset($_REQUEST["start"])){
    $cycle=$_REQUEST["recur"]*604800;//number of weeks to seconds
    $start=strtotime($_REQUEST["start"]);
    $end=strtotime($_REQUEST["end"])+(24*60*60);//end has been extended to be inclusive
    $duration=$end-$start;
    $periods=floor($duration/$cycle);
    $remainder_start=$start+($periods*$cycle);
    $number_of_days=($end-$remainder_start);
    while($number_of_days>604800){//this piece reduces the set to test to just the final week of the remainder (if a meeting is every three weeks, you don't need to test the first 14 days of the remainder)
        $number_of_days=$number_of_days-604800;
        $remainder_start=$remainder_start+604800;
        }
    $number_of_days=$number_of_days/(24*60*60);
    $d=getdate($remainder_start+1);
    $rem_start_day=$d["wday"];//0=sunday

    $days=0;
    if($_REQUEST["sunday"]=='true'){$sunday=true;$days++;}
    if($_REQUEST["monday"]=='true'){$monday=true;$days++;}
    if($_REQUEST["tuesday"]=='true'){$tuesday=true;$days++;}
    if($_REQUEST["wednesday"]=='true'){$wednesday=true;$days++;}
    if($_REQUEST["thursday"]=='true'){$thursday=true;$days++;}
    if($_REQUEST["friday"]=='true'){$friday=true;$days++;}
    if($_REQUEST["saturday"]=='true'){$saturday=true;$days++;}

    $total=$days*$periods;
    $n=$number_of_days;
    for($i=0; $i<$n; $i++){
        switch($rem_start_day){
            case 0:if($sunday){$total++;}break;
            case 1:if($monday){$total++;}break;
            case 2:if($tuesday){$total++;}break;
            case 3:if($wednesday){$total++;}break;
            case 4:if($thursday){$total++;}break;
            case 5:if($friday){$total++;}break;
            case 6:if($saturday){$total++;}break;
        }
        $rem_start_day++;
        $rem_start_day=$rem_start_day%7;
    }
    echo "NUMBER OF INSTANCES:".$total."<br/>";
}
else{
?>
<form action="" method="post">
Start:<input type="text" name="start" placeholder="YYYY-MM-DD"/><br/>
End:<input type="text" name="end" placeholder="YYYY-MM-DD"/><br/>
<table>
<tr><td>Sn</td><td>M</td><td>T</td><td>W</td><td>R</td><td>F</td><td>St</td></tr>
<tr><td><input type="checkbox" name="sunday" value="true"/></td><td><input type="checkbox" name="monday"  value="true"/></td><td><input type="checkbox" name="tuesday"  value="true"/></td><td><input type="checkbox" name="wednesday"  value="true"/></td><td><input type="checkbox" name="thursday"  value="true"/></td><td><input type="checkbox" name="friday"  value="true"/></td><td><input type="checkbox" name="saturday"  value="true"/></td></tr></table>
Occurs Every <input type="text" name="recur" style="width:30px"/> Week(s)<br/>
<input type="submit" id="button" value="Go" />
<?php
}
?>
</body>
</html> 
```

# java - 效率 ？这些代码之间有什么区别吗？

> ID：10694334
> 
> 赞同：1
> 
> 时间：2012-05-22T00:27:23.877
> 
> 标签：java

> **可能重复：**
> [i==0 和 0==i 之间有区别吗？](https://stackoverflow.com/questions/10656419/is-there-a-difference-between-i-0-and-0-i)

以下编码风格有什么好处，它们之间有什么区别吗？

```
int i;

// more code

if (i == 0) {...} 
```

对比

```
if (0 == i) {...} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T00:29:04.517

完全没有区别。

我一直觉得后一个例子的可读性较差，而且我很少看到它，但有些人似乎喜欢它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T00:28:57.917

没有区别，选择一个并坚持下去以保持一致性。这`(value == variable)`是旧语言的遗物，您可能会不小心将值分配给 if 中的变量`(a = 0)`，而不是`(a == 0)`

它们都将变成（有效地）相同的机器指令，因此根本不会有任何性能差异

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T00:31:30.817

效率上没有区别，但是为了可读性，这种风格是首选：

```
if (i == 0) {...} 
```

另一个版本是[Yoda condition](https://stackoverflow.com/a/2430307/201359)`if (0 == i) {...}`的一个例子，它被认为是一种糟糕的编程习惯。引用链接：

> “尤达条件”——使用 if (constant == variable) 而不是 if (variable == constant)，例如 if (4 == foo)。因为这就像说“如果天空是蓝色的”或“如果男人是高的”。

![在此处输入图像描述](../Images/9bb8c63d8d720706be65923976de5481.png)

# java - 模拟器像控制台吗？

> ID：10694338
> 
> 赞同：-1
> 
> 时间：2012-05-22T00:27:36.623
> 
> 标签：java, eclipse, android-emulator, console

java 的控制台是否基本上与模拟器为 android 提供的目的相同。控制台中显示的任何内容都会显示在实际应用程序中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:35:02.767

控制台只显示文本。模拟器运行您的应用程序，就像您的应用程序在安卓智能手机上运行一样。您可以几乎完全按照在手机上的使用方式来使用您的应用程序，只是速度要慢得多。

对于调试，您将使用 Log.d() 打印到模拟器日志而不是 system.out.print

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:36:03.850

不，控制台只是基于字符的 IO。模拟器是假装它是一个完全不同的环境的东西。

不，Android 默认不公开控制台，大多数交互都是通过 GUI 组件进行的。

# c# - window.external 有什么用？

> ID：10694341
> 
> 赞同：21
> 
> 时间：2012-05-22T00:27:50.493
> 
> 标签：c#, javascript, asp.net, vb.net

window.external 有什么用？这是否用于从 JavaScript 调用 C#/VB.NET (ASP.NET) 中的服务器端函数/方法？你能指出我正确的方向吗？

代码：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm1.aspx.vb" Inherits="WebApplication1.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input type="button" name="button1" value="Click" 
               onclick="javascript:window.external.SayHello('Mike');" />
    </div>
    </form>
</body>
</html> 
```

```
Public Class WebForm1
    Inherits System.Web.UI.Page

    Public Sub SayHello(ByVal name As String)
        Response.Write("Hello :- " & name)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-22T00:42:38.693

这主要取自这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/a0746166.aspx)，但`window.external`可用于允许您`WebBrowserControl`执行客户端 Windows 窗体应用程序的公共方法。

例如，在您的表单中，您可能具有以下功能：

```
public void HelloFromTheForm()
{
    MessageBox.Show("Hi client, thanks for calling me!");
} 
```

在加载到您的 html 中，`WebBrowserControl`您可能有一个如下所示的按钮：

```
<button onclick="window.external.HelloFromTheForm()">
    Say hi to the form
</button> 
```

因此，关于“这是否用于调用服务器端函数？”的问题，您的表单不是“服务器端”，但它确实允许您从嵌入式网页调用表单的 C#/VB.NET 代码.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-22T00:42:59.887

它是一些浏览器/操作系统供应商用来促进在浏览器内运行的 javascript 和在用户设备或机器上运行在浏览器“外部”的代码之间的通信的约定。

例如，如果您为 Android 或 Windows Phone 编写了托管 Web 浏览器控件的本机应用程序，则周围的本机移动框架可能会提供 window.external 作为在 Web 控件内的网页上运行的 javascript 调用的一种方式到您的应用程序的本机代码功能。（可以在此处找到如何为 Android 执行此类操作的示例：[Listen to javascript function invocation from java - Android](https://stackoverflow.com/questions/9306801/listen-to-javascript-function-invocation-from-java-android)）

另一方面，如果您希望在用户 Web 浏览器上运行的 javascript 和服务器上运行的 C# 代码之间进行通信，那么您将希望研究 AJAX 样式调用（通常与窗口。外部）。可以在 ASP.Net 站点上找到设置此类内容的示例。例如[http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-web-services](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-web-services)

# svg - 缩放独立元素

> ID：10694347
> 
> 赞同：2
> 
> 时间：2012-05-22T00:28:47.267
> 
> 标签：svg

我有一个（2D）计算几何库我正在研究，我希望能够吐出图片来帮助调试。我想要的图元是点、线段和文本。但我事先不知道我有兴趣查看什么比例（可能只有一小部分多边形无法正常工作），所以我还需要能够缩放和平移图像。

当我在 Chrome 中查看生成的图像时，我连接了[SVGPan](http://code.google.com/p/svgpan/)以平移和缩放生成的图像，但是（可以理解）所有基元都随着缩放进行缩放，因为 SVGPan 仅通过使用缩放变换来工作。因此，放大并不能帮助弄清楚在非常小的特征区域中发生了什么。

我找到了[矢量效果](http://www.w3.org/TR/SVGTiny12/painting.html#VectorEffectProperty)属性，它通过让我指定像素宽度来很好地修复线段。但这并不能帮助我管理文本。理想情况下，无论变换比例有多大，它都是 12 pt。

而且我仍然对绘制点感到茫然。我以为我可以使用圆圈，但半径也会缩放，所以如果你放大得太远，它看起来就像一堆圆圈而不是点。如果我使用矢量效果属性，圆的笔划宽度将不再缩放，但圆的半径仍然存在。所以我最终得到了带有细轮廓的大圆圈，而不是半径一两个像素的小圆圈。

有没有办法只缩放元素的位置，也许？我真的总是希望线条、点和文本无论比例如何都显示相同的大小，并且只有它们的位置比例。我的 SVG 文件都是机器生成的，严格来说是为了帮助我编码，所以我不介意奇怪的 hack，如果有人有任何想法的话。或者，如果有另一种技术而不是 SVG 对这个用例更有意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T05:37:30.720

我在这些问题中更深入地回答了这个问题：

*   [如何使用 Javascript 在 SVG 中绘制不可缩放的圆](https://stackoverflow.com/questions/10473328/how-to-draw-non-scalable-circle-in-svg-with-javascript)
*   [在缩放父元素时保留后代元素的大小](https://stackoverflow.com/questions/8880668/preserve-descendant-elements-size-while-scaling-the-parent-element/10713883#10713883)

简而言之，您希望 (a) 用于`transform="translate(…,…)`定位未缩放元素，并且 (b) 每次调整某些包装器上的转换时（如 SVGPan 所做的），将您想要不缩放的每个元素传递给此函数：

```
// Copyright 2012 © Gavin Kistner, !@phrogz.net
// License: http://phrogz.net/JS/_ReuseLicense.txt

// Counteracts all transforms applied above an element.
// Apply a translation to the element to have it remain at a local position
function unscale(el){
  var svg = el.ownerSVGElement;
  var xf = el.scaleIndependentXForm;
  if (!xf){
    // Keep a single transform matrix in the stack for fighting transformations
    xf = el.scaleIndependentXForm = svg.createSVGTransform();
    // Be sure to apply this transform after existing transforms (translate)
    el.transform.baseVal.appendItem(xf);
  }
  var m = svg.getTransformToElement(el.parentNode);
  m.e = m.f = 0; // Ignore (preserve) any translations done up to this point
  xf.setMatrix(m);
} 
```

上面第一个问题的答案还描述了一个设计用于直接使用 SVGPan 的辅助方法，因此您所要做的就是包含我的库（两个函数），`noscale`为每个标记添加一个类，然后编写如下内容：

```
unscaleEach('#viewport .noscale'); 
```

# python - 十六进制十进制浮点 Python

> ID：10694352
> 
> 赞同：3
> 
> 时间：2012-05-22T00:29:14.297
> 
> 标签：python, base-conversion

我正在从二进制文件中读取数据。我有一份文件可以让我知道信息是如何存储的。为了确定这一点，我使用 XVI32。

我正确地提取了信息字符串和 int 数据，直到遇到浮点数据类型。

根据这个文件：

```
00800000 = 0.0
7AFBDD35 = 0.061087
9BF7783C = -0.003491
00FBFCAD = 0.031416 
```

我试图解决这个问题：

```
struct.unpack('!f', my_float.decode('hex'))[0] 
```

以及其他不同的方式......

我使用一些在线工具测试了这些信息，例如： [http](http://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml) ://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml和[http://www.binaryconvert.com/result_float.html?decimal=048046048054049048056055](http://www.binaryconvert.com/result_float.html?decimal=048046048054049048056055)，但是根据原始结果，所有这些方式都会给我带来不同的价值。

我开始怀疑浮点信息被加密或类似的东西，但为什么 string 和 int 没有被加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:35:33.480

有趣的谜题。使用文档我想出了这个：

```
def byteswap(x):
    return ((x & 0x00ff00ff) << 8) | ((x & 0xff00ff00) >> 8)

def tms320_float(raw):
    s = (raw >> 23) & 1
    mantissa = (raw & 0x007fffff)
    exponent = raw >> 24
    if exponent >= 128:
        exponent -= 256
    if exponent == -128:
        return 0.0
    return (((-2) ** s) + float(mantissa) / float(1 << 23)) * (2.0 ** exponent)

>>> tms320_float(byteswap(0x00800000))
0.0
>>> tms320_float(byteswap(0x7AFBDD35))
0.06108652427792549
>>> tms320_float(byteswap(0x9BF7783C))
-0.003490658476948738
>>> tms320_float(byteswap(0x00FBFCAD))
0.031415924429893494 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:04:22.733

我的老板给我发了答案，浮点数据不是 IEEE 格式。

数据类型为TMS320浮点

出于某种原因，十六进制数据的实际值每 2 个字节混合，我的意思是：

```
80000000 = 0.0
FB7A35DD = 0.061087
F79B3C78 = -0.003491
FB00ADFC = 0.031416 
```

谢谢大家支持我

# ruby-on-rails - How to use Ruby MiniTest::Spec with Rails for API integration tests?

> ID：10694355
> 
> 赞同：12
> 
> 时间：2012-05-22T00:29:56.030
> 
> 标签：ruby-on-rails, ruby, specifications, minitest

I'm building an app including a Rails API and want to use Ruby MiniTest::Spec to test.

What's a good way to set it up?

For example, good directory organization, good way to include files, etc.?

I'm using the guidelines in the book Rails 3 In Action which uses RSpec and has a great chapter on APIs. The big change is preferring MiniTest::Spec.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-22T00:47:59.937

回答我迄今为止发现的内容，以防它对其他开发人员有帮助......

### 规范/api/items_spec.rb

```
require 'spec_helper'

class ItemsSpec < ActionDispatch::IntegrationTest

  before do
    @item = Factory.create(:item)
  end

  describe "items that are viewable by this user" do
    it "responds with good json" do
      get "/api/items.json"
      response.success?.must_equal true
      body.must_equal Item.all.to_json
      items = JSON.parse(response.body)
      items.any?{|x| x["name"] == @item.name}.must_equal true
    end
  end

end 
```

### 规范/spec_helper.rb

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
gem 'minitest'
require 'minitest/autorun'
require 'action_controller/test_case'
require 'capybara/rails'
require 'rails/test_help'
require 'miniskirt'
require 'factories'
require 'mocha'

# Support files                                                                                                                                                                                                                                                                  
Dir["#{File.expand_path(File.dirname(__FILE__))}/support/*.rb"].each do |file|
  require file
end 
```

### 规格/工厂/item.rb

```
Factory.define :item do |x|
  x.name { "Foo" }
结尾

```

### 应用程序/控制器/api/base_controller.rb

```
class Api::BaseController < ActionController::Base
  respond_to :json
end 
```

### 应用程序/控制器/api/items_controller.rb

```
class Api::ItemsController < Api::BaseController
  def index
    respond_with(Item.all)
  end
end 
```

### 配置/路由.rb

```
MyApp::Application.routes.draw do
  namespace :api do
    resources :items
  end
end 
```

### 宝石文件

```
组：开发，：测试做
  gem 'capybara' # 在网站上模拟用户的集成测试工具。
  gem 'capybara_minitest_spec' # MiniTest::Spec 对 Capybara 节点匹配器的期望。
  gem 'mocha' # 用于 Ruby 测试替身的模拟和存根库。
  gem 'minitest', '>= 3' # Ruby 的核心 TDD、BDD、模拟和基准测试。
  gem 'minitest-capybara' # 将 Capybara 驱动切换参数添加到 minitest/spec.
  gem 'minitest-matchers' # 用于 minitest 的 RSpec/Shoulda 风格的匹配器。
  gem 'minitest-metadata' # 使用元数据键值对注释测试。
  gem 'minitest-spec-rails' # 加入 MiniTest::Spec 对 Rails 3 的支持。
  gem 'miniskirt' # 与 minitest 一起使用的工厂创建者。
  gem 'ruby-prof' # 带有原生 C 代码的 Ruby 快速代码分析器。
结尾

```

# css - CSS inconsistancy, image not displaying correctly

> ID：10694360
> 
> 赞同：1
> 
> 时间：2012-05-22T00:30:51.893
> 
> 标签：css

The link to the content can be seen here: [http://bit.ly/K6jRGI](http://bit.ly/K6jRGI)

The issue is that our black line divider is not showing between Home and Guide.

The divider is showing for all apart from the first two buttons.

Does anyone know why this is, and what I'm missing?

```
.top_menu ul li{
list-style: none;
background: url("images/bg_li.gif") no-repeat right center transparent;
float: left;
padding-top: 2px;
margin-left: 0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:36:41.767

According to Firebug, on line 241 of `style.css`:

```
.top_menu ul li:first-child {
    background: none;
} 
```

# python - Inserting Geolocation Coordinates Into Django Meta Form Field

> ID：10694364
> 
> 赞同：1
> 
> 时间：2012-05-22T00:31:55.170
> 
> 标签：python, django, django-forms

I'm wading – carefully – into some basic geolocation using HTML5\. I currently have a meta form for my first Django application that has space for lat and long coordinates and have found the proper code to obtain those coordinates using the Google Maps API (pretty simple stuff).

Next step: inserting those coordinates automatically into the meta form when a user access the application. The application would ideally allow users to make posts and store their coordinates for future reference and filtering (that part is the big endeavor; one step at a time).

Using JavaScript (which I know very little) with Django in this manner seems to be the most efficient manner to accomplish this and was looking to see if there's a straightforward method for doing this. I found some ways to accomplish this that may work using jQuery, but with the meta form automatically setting up the form's structure it doesn't seem as if there's a simple way to add an "id" to the form (researched but can't seem to find a means).

Any insight or experience that can shared would be greatly appreciated.

```
Model:
    class Story(models.Model):
        objects = StoryManager()
        title = models.CharField(max_length=100)
        topic = models.CharField(max_length=50)
        copy = models.TextField()
        author = models.ForeignKey(User, related_name="stories")
        zip_code = models.CharField(max_length=10)
        latitude = models.FloatField(blank=False, null=False)
        longitude = models.FloatField(blank=False, null=False)
        date = models.DateTimeField(auto_now=True, auto_now_add=True)
        pic = models.ImageField(upload_to='pictures', blank=True)
        caption = models.CharField(max_length=100, blank=True)

        def __unicode__(self):
            return " %s" % (self.title)

Form:

class StoryForm(forms.ModelForm):
    class Meta:
        model = Story
        exclude = ('author',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:01:51.533

Django 通常指向[RESTful](http://ru.wikipedia.org/wiki/REST)应用程序，因此每个现有对象都应该有自己的 URL 来编辑（即使它是 AJAX）。如此好的 URL 看起来像是`/obj/123/edit/`用于编辑现有对象和`/obj/create/` 创建新对象。实际上，在完美的 REST 中，您可以对所有 CRUD 活动使用很少的 URL，但这也足够了。因此，您的 URL 中有对象 ID，无需在表单中复制它。

或者，您始终可以在表单中显示隐藏的输入，`value="{{ form.instance.pk }}"`并在视图中手动处理它。

# windows - Win Svr 2008 R2 - first instance of Windows Explorer opening selected folders in new windows

> ID：10694366
> 
> 赞同：0
> 
> 时间：2012-05-22T00:31:58.250
> 
> 标签：windows, 64-bit

Well it looks like a question related to this was asked and then closed in 2010, but it is a new problem with running my server so I'm going to ask it again.

I cannot remember the exact time it started, but during the past 2 months Windows Explorer has been opening folders in new windows - from the first instance only - even though I have quadruple-checked the settings, and they are set to open in the same window.

After I click a folder or drive, the next Explorer window that opens behaves as expected, but the first instance of Explorer always does this annoying-as-hell behavior.

I've seen this problem cropping up intermittently according to Google since 2007, but I'm not inclined to go screwing with my registry if I didn't do anything there in the first place - and I didn't.

I generally install all critical Windows Updates once a month and none of the optional ones. So, is there any help out there for this?

THANKS sF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:54:40.013

我在某处读到这是由 IE8 的更新引起的，所以我安装了 IE9，问题就消失了！

# c++ - 如何在包装类（来自 C++）中覆盖 __setattr__？

> ID：10694367
> 
> 赞同：2
> 
> 时间：2012-05-22T00:32:05.607
> 
> 标签：c++, python, boost-python

使用`boost::python`，我已经能够包装一个`Node`具有一些虚函数的类 ( )，这很麻烦，但现在我正在尝试覆盖`setattr/getattr`该类。我必须`boost::python`调用我自己的`setattr`实现，但我不知道如何避免发生的递归。

所以我有一`Node`堂课，我希望能够写：

```
node1.param1 = 5          # Call node.SetParam
node1.plain_member = 7    # Call object.__setattr__ 
```

到目前为止，我有（非常精简）：

```
namespace bpy = boost::python;

struct NodeWrap : vcNode, bpy::wrapper<Node> {
  ...  
  static void setattr(bpy::object obj, std::string attr, bpy::object val)
  {
     NodeWrap const& node = bpy::extract<NodeWrap const&>(obj)();
     ParamRef p = node.FindParam(attr);
     if (p)
        py_to_param(p, val); //This part works fine
     else
     {
        obj.attr(attr) = val; //Problematic line - recurses indefinitely
     }
  }
}; 
```

然后在该`BOOST_PYTHON_MODULE`部分中，我有：

```
bpy::class_<NodeWrap, boost::shared_ptr<NodeWrap>, boost::noncopyable>("Node")
  ...
  .def("__setattr__". &NodeWrap::setattr); 
```

正如我所说，它编译得很好，并且会正确设置任何节点“参数”，但是如果我尝试设置一个非参数，例如`self.plain_old_member = 7`我得到一个“递归深度超出”错误，因为我收集`boost::object::attr`将调用该类'`__setattr__`方法

在 python 中，我会通过使用来解决这个问题

```
super(Node).__setattr__(self, attr, val) 
```

在问题行中，但我无法从 boost::python 中弄清楚如何做到这一点。如果必须，我不介意使用 C API（事实上，我尝试过使用`PyObject_SetAttrString`但无济于事），但我只是不知道如何从这里到达那里。

干杯，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:42:01.743

我相信你想要的 Python C-API 函数是`PyObject_GenericSetAttr`；也就是说，您应该将“问题行”替换为：

```
bpy::str attr_str(attr);
if (PyObject_GenericSetAttr(obj.ptr(), attr_str.ptr(), val.ptr()) != 0)
    bpy::throw_error_already_set(); 
```

我认为这相当于`object.__setattr__(self, attr, val)`在 Python 中调用，这与调用`__setattr__`基类不同，但区别仅在基类也覆盖`__setattr__`. 如果是这种情况，您需要执行以下操作：

```
bpy::object cls(bpy::handle<>(PyObject_Type(obj.ptr())));
bpy::object base_cls = cls.attr("__bases__")[0];
base_cls.attr("__setattr__")(obj, attr, val); 
```

# ios - Grouped UITableView loses border lines when scrolling

> ID：10694368
> 
> 赞同：-1
> 
> 时间：2012-05-22T00:32:06.433
> 
> 标签：ios, xcode, uitableview

I have a grouped UITableView with 3 sections, a section header only on section 1, 3, 2, and 5 cells in the sections. When scrolling, the border lines sometimes.

The cells of the table view is a custom cell with a label and a text field. It does not set the cell view background color.

There is no background view or color specified -- all standard.

Typically the borders disappear for the last 2 rows of the last section, and the 2 rows of the 2nd section, but I've seen them all disappear at one point or another.

This is an app where the user enters data in each row. Typically if they just go row by row it works fine, but if they scroll around it fails!

This is happening with Xcode 4.3.2 and iOS 5.1.1\. Happens on both iPhone and iPad, but app has been designed so that little scrolling necessary on iPad.

I can't see how this is not an Apple bug, but I'd love for someone to prove me wrong!

The following screen shows the text of the section header, the 2nd group, and the 1st 3 cells of the 3rd group. Note the missing lines!

![](../Images/948c264bbdb5ad0d58ab12bf039ecf39.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:24:57.270

我的 cellForRowAtIndexPath 方法包含一个：

`cell.backgroundView = nil;`

删除该语句使线条正确显示。

如果我没记错的话，我添加了它来更改单元格的背景颜色。我现在使用：

```
cell.backgroundColor [UIColor white]; 
```

# javascript - modify rails object after save based on some javascript

> ID：10694369
> 
> 赞同：0
> 
> 时间：2012-05-22T00:32:14.017
> 
> 标签：javascript, ruby-on-rails, json, controller

Im wondering on how to approach this. For simplicity lets say I submit a link from a website through javascript to my rails server. I want my rails server to create a page based off that link and pull out the logo from that page. Right now I have the code to find a logo off a webpage but not sure how I can link the two together.

My controller takes in the json post request and saves a page object but how would I know ask it to run my js and save that image location in the page object as well?

Any help would be great thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:18:58.407

如果我理解这个问题：您想在服务器通过链接获取徽标后添加一个页面？页面将使用此徽标创建。如果是这样，那么服务器本身应该使用例如[mechanize](http://mechanize.rubyforge.org/)跟踪该链接，并在那里找到指向徽标的链接。例如：

```
require 'mechanize'
...
def create
  @page = Page.new(params[:page])
  link = @page.link
  agent = Mechanize.new
  page = agent.get link
  img_src = page.search("#logo").first.attributes['src']
  @page.logo = img_src
  if @page.save
  ...
end 
```

更复杂的例子：[http ://caldeas.com/2010/08/01/using-mechanize-to-download-images-from-stock-exchange/](http://caldeas.com/2010/08/01/using-mechanize-to-download-images-from-stock-exchange/)

这可能不是您想要的，但它会解决您的问题。

# c# - Centralized live collaborative editing in Visual Studio

> ID：10694373
> 
> 赞同：14
> 
> 时间：2012-05-22T00:32:55.310
> 
> 标签：c#, visual-studio-2010, version-control, real-time, code-sharing

Now before you shoot me for bringing up a duplicate question on SOF, let me first acquaint you with exactly what I'm looking for, and I will address other questions and answers and why it is insufficient.

**Question #1**:

I'm looking for a way to perform live collaborative edits, while the source is maintained on a centralized source control server. For example, if Me and Joe Blow are editing file `X.cs` at the same time, we should be able to see each-other's edits as we type. Almost as if we were sitting together at the same computer. Now take the following scenario: Me and Joe go offline, and Nimha Smith decides she wants to update some code. When I come back online the following day, I get pushed the code that Nimha updated while I was sleeping/away from the server.

This is a combination of the idea of live collaboration, and a source control system like SVN, etc.

**Addressing of the possible duplicates:**

There was a similar question, here: [Collaborative editing for .NET development - what are the possibilities](https://stackoverflow.com/questions/2302744/collaborative-editing-for-net-development-what-are-the-possibilities), however it does not give me anything useful and I'll explain why:

*   [VsAnywhere](http://www.vsanywhere.com): It runs through a central public server (right direction..?) except all parties involved need to have the exact same code on their machine before joining a session, and once you go offline the session is destroyed.
*   [SourceMeet](http://www.sourcemeet.com/): Runs with a P2P system, so no server to keep track of changes while offline etc. Have not tried it, so I can not attest to how well it can merge code (if it can at all)
*   [CollabEdit](http://collabedit.com/): Not VisualStudio
*   [Cloud 9](http://ci.io): Not VisualStudio

And there is obviously [this question](https://softwareengineering.stackexchange.com/questions/940/what-are-your-favorite-version-control-systems) and [this one](https://stackoverflow.com/questions/4682254/collaborative-coding-net) that are questions directly about source control software such as SVN or GIT. Now, I tried to get VSAnywhere and SVN to play nice together, (SVN for getting changes made while offline, and VSAnywhere for the online developers) but it simply does not work.

**`<edit>`**

I recently found this bachelor thesis project named [Collab](http://collab.codeplex.com/), and it seems like a good idea, but I could not seem to get it working to try it. If anyone else has any success with it please let me know what you did. It looks like if I can get this collab project working it seems like it would be a good start into creating something to fit my needs.

**`<edit2>`**

I've also come across [BeWeeVee](http://www.beweevee.com/) which had a Visual Studio extension for it's service, but all the links for it have gone dead. And [CodeALike](http://codealike.com/) which was probably their replacement for VS real-time collaboration has a FAQ entry explaining that it's real-time features have been removed and will be re-implemented in the "future".

**Question #2:**

Now this brings me to the second part of my question because I fully realise there may not be a program out there that fits my tall order. Where could I start implementing software such as this myself? Are there some existing open-source source-control / real-time editing code that I can begin to build off of to create this? Or am I pretty much stuck starting from scratch if I want to implement this. And I'm sure you can see by the tags that I would like to tackle a task like this in C#, if I have to tackle it at all.

## Update 2017

As there has been some continued interest expressed in the comments I've created a gitter where we can gather anyone interested and potentially make this a reality: [https://gitter.im/sof-centrailized-collab-editing/Lobby](https://gitter.im/sof-centrailized-collab-editing/Lobby).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T19:11:40.637

如果您想自己解决这个问题，您可能希望将其作为 Visual Studio 扩展来完成。请注意，有两种不同类型的插件：“附加组件”和“扩展”。我个人认为你应该编写一个*extension*，但无论哪种方式，你都可以用 C# 编写它们。

您需要连接到 Visual Studio 的文本编辑器。您可以通过谷歌搜索如何执行此操作，或者只查看现有示例：[弹性制表位的 Visual Studio 扩展](http://visualstudiogallery.msdn.microsoft.com/ccff2b55-201f-4263-aea5-3e66024d6c0e)。您的扩展程序必须在您进行更改时监控您的更改，然后通过您设计的某种协议将它们发送到服务器。您必须自己编写服务器，但在第一个版本中，它所要做的就是将您的编辑发送给使用该扩展的其他所有人。然后，该扩展程序将使每个人都在其他人的编辑器中进行编辑。

如果有人使用旧版本的代码连接到服务器，则扩展程序可以从服务器下载最新版本。但是，如果用户在*离线*时（即未连接到服务器时）进行了编辑，那么您将需要进行一些巧妙的合并。这不是微不足道的，但我知道该怎么做，因为我以前做过。如果你问得很好，我会为你写合并算法。然后，您只需为其提供三个文本文件：基本文件（上次与服务器同步的版本）和两个编辑的版本（一个离线编辑的和服务器的最新版本）。

如果你设法让它发挥作用，你可能会创造出非常有用的东西。请务必宣传您的作品！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T00:07:48.843

好吧，Google Wave 已经完成了查看其他人输入内容然后在编辑器中与他们进行光标大战的操作。Iirc 在项目本身失败后，它被作为开源或其他东西推出。不过，它确实可以解决您所有的更新问题，并且建立在从计算机科学角度来看非常强大和可靠的底层更新模型之上。它提供历史和各种类似于源代码系统的东西。

您可以在此之上实现您想要的特殊编辑小部件。如果您做得好，您可以让 Google Wave 成为一个有用且用途广泛的协作编辑平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T21:47:47.077

关于 VS Anywhere，可能在您尝试 VSA 时（大约 5 月），软件版本是 Release Candidate 2（=buggy），因此您发现 SVN 集成存在一些问题以及 TFS 和 Git 存在未解决问题是正常的.

目前，在最新的 RC3 上，其中一些 SVN 问题已得到解决，我们希望很快为最终版本做好一切准备

有可能在您的 LAN 中运行您自己的 VS Anywhere 服务器实例，因此您真的不需要使用我们的公共服务器，如果您是学生或者您有开源项目，VS Anywhere 客户端和服务器对您是免费的，如果不是用于商业用途，您应该支付少量费用。

正如 Timwi 所说，从离线编码重新同步是不平凡的，并且实现起来非常复杂，我们认为 SCM 是完成这项工作的正确工具，这是因为我们还没有朝这个方向工作，我们的意见至少在我们之前在这方面工作，您可以在设置会话之前使用标准 SCM 提取最新更改并与本地副本合并

VSA 将简化引导会话的过程，允许您 1) 检查与远程 Visual Studio 副本的差异，以及 2) 如果有的话，在打开会话时将它们合并到本地副本中以处于正确状态。（“1）”实现“2）”即将到来）

会话管理不是微不足道而且非常复杂的东西，有很多可能的场景，这是因为我们在完成时清理了会话，但是您可以随时单击重新开始会话......

希望这些信息对您有所帮助，如果您有更多问题，请随时联系 VS Anywhere 支持

关于如果您想开始一个项目来实现这样的插件，我们可以为您提供有关如何做事的信息，一个很好的起点是了解操作转换，因为您将需要这种方法来实现并发编辑，您还需要 P2P 或客户端/服务器协议，用于在客户端之间传输数据。

# c# - WPF/Xaml ContextMenu ItemContainerStyle 行为

> ID：10694375
> 
> 赞同：2
> 
> 时间：2012-05-22T00:33:11.363
> 
> 标签：c#, wpf, xaml

我的窗口的 DataContext 是一个 IDictionary>。

谁能向我解释为什么这很好用：

```
<Style x:Key="MenuItemStyle">
    <Setter Property="MenuItem.Header" Value="{Binding Ticker}"/>
</Style>
<Style x:Key="ContextMenuStyle">
    <Setter Property="MenuItem.Header" Value="{Binding Key}"/>
    <Setter Property="MenuItem.ItemsSource" Value="{Binding Value}"/>
    <Setter Property="MenuItem.ItemContainerStyle" Value="{StaticResource MenuItemStyle}"/>
</Style>
<ContextMenu ItemContainerStyle="{StaticResource ContextMenuStyle}" ItemsSource="{Binding Quotes}" /> 
```

但这不会：

```
<Style TargetType="{x:Type ContextMenu}" x:Key="ContextMenuStyle">
    <Setter Property="MenuItem.Header" Value="{Binding Key}"/>
    <Setter Property="MenuItem.ItemsSource" Value="{Binding Value}"/>
    <Setter Property="MenuItem.ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="{x:Type MenuItem}">
                <Setter Property="Header" Value="{Binding Ticker}"/>
            </Style>
        </Setter.Value>
    </Setter>
</Style>
<ContextMenu ItemContainerStyle="{StaticResource ContextMenuStyle}" ItemsSource="{Binding Quotes}" /> 
```

编辑：如果我删除 T'argetType="{x:Type ContextMenu}"'，它工作正常。但是，我不清楚为什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:54:03.700

您需要将`TargetType`from的值更改`ContextMenu`为`MenuItem`。的`ItemContainerStyle`属性`ContextMenu`将样式设置为您的容器元素`ContextMenu`，在本例中为`MenuItem`. 但是，您将样式的目标类型设置为`ContextMenu`使其无法工作。有关更多详细信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)。

# sql - SQL如何处理多对多关系

> ID：10694376
> 
> 赞同：4
> 
> 时间：2012-05-22T00:33:12.410
> 
> 标签：sql, database, many-to-many, relationship

我有两个具有多对多关系的表：

```
Player(personID, school)
Team(teamID, name) 
```

我将使用什么代码来创建名为 playerTeam 的关联实体表。

我尝试了以下方法：

```
CREATE TABLE
(
playerID INT NOT NULL, 
teamID INT NOT NULL,
PRIMARY KEY(playerID, teamID)
); 
```

在这种情况下，我不知道如何连接表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T00:53:00.857

试试这个：

```
CREATE TABLE teamPlayer
(
playerID INT NOT NULL, 
teamID INT NOT NULL,
PRIMARY KEY(playerID, teamID)
);

alter table teamPlayer
add constraint 
    fk_teamPlayer__Player foreign key(playerID) references Player(personID);

alter table teamPlayer
add constraint 
    fk_teamPlayer__Team foreign key(teamID) references Team(teamID); 
```

或这个：

```
CREATE TABLE teamPlayer
(
playerID INT NOT NULL, 
teamID INT NOT NULL,
PRIMARY KEY(playerID, teamID),

constraint fk_teamPlayer__Player
foreign key(playerID) references Player(personID),

constraint fk_teamPlayer__Team 
foreign key(teamID) references Team(teamID)

); 
```

如果您不需要显式命名外键，则可以使用：

```
CREATE TABLE teamPlayer
(
playerID INT NOT NULL references Player(personID), 
teamID INT NOT NULL references Team(teamID),
PRIMARY KEY(playerID, teamID)
); 
```

* * *

所有主要的 RDBMS 在关系 DDL 上都非常符合 ANSI SQL。每个人都是一样的

CREATE THEN ALTER（显式命名的外键）：

*   Postgresql：[http ://www.sqlfiddle.com/#!1/0a096](http://www.sqlfiddle.com/#!1/0a096)
*   MySQL：[http ://www.sqlfiddle.com/#!2/0a096](http://www.sqlfiddle.com/#!2/0a096)
*   甲骨文：[http ://www.sqlfiddle.com/#!4/0a096](http://www.sqlfiddle.com/#!4/0a096)
*   SQL 服务器：[http ://www.sqlfiddle.com/#!3/0a096](http://www.sqlfiddle.com/#!3/0a096)

CREATE（显式命名的外键）：

*   Postgresql：[http ://www.sqlfiddle.com/#!1/46ebb](http://www.sqlfiddle.com/#!1/46ebb)
*   MySQL：[http ://www.sqlfiddle.com/#!2/46ebb](http://www.sqlfiddle.com/#!2/46ebb)
*   甲骨文：[http ://www.sqlfiddle.com/#!4/46ebb](http://www.sqlfiddle.com/#!4/46ebb)
*   SQL 服务器：[http ://www.sqlfiddle.com/#!3/46ebb](http://www.sqlfiddle.com/#!3/46ebb)

CREATE（自动命名的外键）：

*   Postgresql：[http ://www.sqlfiddle.com/#!1/82742](http://www.sqlfiddle.com/#!1/82742)
*   MySQL：[http ://www.sqlfiddle.com/#!2/82742](http://www.sqlfiddle.com/#!2/82742)
*   甲骨文：[http ://www.sqlfiddle.com/#!4/82742](http://www.sqlfiddle.com/#!4/82742)
*   Sql 服务器：[http ://www.sqlfiddle.com/#!3/82742](http://www.sqlfiddle.com/#!3/82742)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:41:33.320

创建表时不要指定一种关系，除非您使用 FOREIGN KEY。在您的情况下，您实际上在查询中缺少表名，应该是这样的

```
CREATE TABLE `playerTeam`
(
`playerID` INT NOT NULL, 
`teamID` INT NOT NULL,
PRIMARY KEY(`playerID`, `teamID`)
); 
```

# draggable - Confine dragging of Google Maps V3 Marker to Polyline

> ID：10694378
> 
> 赞同：13
> 
> 时间：2012-05-22T00:33:42.377
> 
> 标签：draggable, google-maps-markers, arcgis, google-polyline

I've created a Google Map and have drawn a polyline on it. I've then added a marker to the start of the polyine (same coords as the starting coords of the polyline).

What I'd like to be able to do, is grab and drag the marker but have it "stick" to the polyline such that you can only drag it along the polyline and not away or to the side of it.

Is it possible to confine a draggable marker to a path in GM V3? If not, can anyone think how this might be done? There's the possibility of snapping the marker to the nearest point on the path when the user drops it, but I'd prefer a smoother "drag along the path" effect.

Happy to have ArcGis suggestions too. Have not provided code as this is more of an in theory question.

Let me know if I need to explain further.

Thanks in advance

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T01:38:34.880

好的，所以我设法解决了这个问题。它并不完全优雅，我相信它可以改进，但这是我提出的一般概念：

我从 GPX 文件创建了一个 latlng 点数组，但它们仅每 20 秒左右记录一次点。这对我的目的来说粒度不够，所以我所做的是在 gpx 记录的每对点之间用大约 10 个点（在一条直线上）填充点数组：

```
$.each(array_of_points_to_pad, function(key, pt) {
    var current_point = pt;//The current point
    var next_point = array_of_points_to_pad[key + 1];//The point immediately after the current point

    //Check that we're not on the last point 
    if (typeof next_point !== 'undefined') {
        //Get a 10th of the difference in latitude between current and next points
        var lat_incr = (next_point.lat() - current_point.lat()) / 10;

        //Get a 10th of the difference in longitude between current and next points
        var lng_incr = (next_point.lng() - current_point.lng()) / 10;

        //Add the current point to a new padded_points array
        padded_points.push(current_point);

        //Now add 10 additional points at lat_incr & lng_incr intervals between current and next points (in the new padded_points array)
        for (var i = 1; i <= 10; i++) {
            var new_pt = new google.maps.LatLng(current_point.lat() + (i * lat_incr), current_point.lng() + (i * lng_incr));
            padded_points.push(new_pt);
        }
    }
}); 
```

现在我有了更精细的点数组，我用它来绘制折线。填充的折线看起来与没有填充的折线没有什么不同，因为所有附加点都位于现有点之间的线性“as-the-crow-flies”线上。

```
var line = new google.maps.Polyline({
    path: polyline_path_points_padded,
    strokeColor: '#ff0000',
    strokeOpacity: 1.0,
    strokeWeight: 2
});
line.setMap(map); 
```

现在我在行首添加一个可拖动的标记：

```
var latLng = new google.maps.LatLng(startlat,startlng);
var marker = new google.maps.Marker({
  position: latLng,
  map: map,
  draggable:true
}); 
```

剩下要做的就是控制这个标记的拖动和拖动事件：

```
google.maps.event.addDomListener(marker,'dragend',function(e){
    marker.setPosition(find_closest_point_on_path(e.latLng,padded_points));
});

google.maps.event.addDomListener(marker,'drag',function(e){
    marker.setPosition(find_closest_point_on_path(e.latLng,padded_points));
}); 
```

在这里，我们只是在拖动和放下标记时将标记的 latLng 发送到函数 find_closest_point_on_path()。我们将填充的点数组作为搜索路径发送。

该函数如下所示：

```
function find_closest_point_on_path(marker_pt,path_pts){
    distances = new Array();
    distance_keys = new Array();
    $.each(path_pts,function(key, path_pt){
        var R = 6371; // km
        var dLat = (path_pt.lat()-marker_pt.lat()).toRad();
        var dLon = (path_pt.lng()-marker_pt.lng()).toRad();
        var lat1 = marker_pt.lat().toRad();
        var lat2 = path_pt.lat().toRad();

        var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
        var d = R * c;
        //Store the key of the point on the path that matches this distance
        distance_keys[d] = key; 

    });
            //Return the latLng pt on the path for the second closest point 
    return path_pts[distance_keys[_.min(distances)]+1];
} 
```

这个函数的作用（借助度数到弧度函数）是找到标记位置和线上所有点之间的距离。然后它找到离标记最近的点，并返回紧随其后的下一个最近点的坐标。这样，当您拖放标记时，它会“捕捉”到下一个点（而不是卡在一个点上）。

下面的工作JS小提琴：

[http://jsfiddle.net/Z5GwW/4/](http://jsfiddle.net/Z5GwW/4/)

没有跨浏览器测试。在 Chrome 最新版本中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T09:25:05.560

**感谢您提供此解决方案。**

为了让它在没有依赖关系的情况下工作，我不得不修改几行：

首先，检查 toRad() 函数是否存在：

```
if (typeof(Number.prototype.toRad) === "undefined") {
	  Number.prototype.toRad = function() {
	    return this * Math.PI / 180;
	  }
	}
```

而且，删除_。通过替换返回码的依赖：

```
return path_pts[distance_keys[ Math.min(...distances) ]+1];
```

最后，在 distancekeys[] 之前包含 distances[]

```
distances[key] = d;
distance_keys[d] = key; 
```

# objective-c - iOS UIButton outside Frame not firing touchinside event

> ID：10694382
> 
> 赞同：4
> 
> 时间：2012-05-22T00:34:12.440
> 
> 标签：objective-c, ios, xcode, cocoa-touch, uibutton

I have a three view controllers and a view.

one contains the main view, the other contains the customized navigation bar, and the third contains the view(aka subview of the third view controller).

when the app is loaded, navigationbar view will be visible along with the subview. Inside the subview I have a button that i want to place on top of the navigationbar view. Unfortunately i cannot do this straightforward using something like navigationitem.setrightbutton...or any other such methods (everything is coded, no nibs).

So what i am doing is setting my button frames y value to a negative value. This means that the button is out of the frame bounds of the subview, but it achieves what i want which is placing the button on top of the navigationbar.

Unfortunately no click events are passed to the button as it is outside the subview frame bounds...

I have tried overriding pointinside and hittest of the view but nothing is working.

I hope I have made myself clear. Any code that would solve this issue would be much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:40:11.677

触摸事件仅在视图范围内传播。尽管可以将子视图放置在其父视图之外并且仍然可以看到它，但不会将事件传递给它。

处理事件的底层机制是 UIView 的以下方法：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event 
```

此方法负责决定给定的触摸事件应该转到哪个视图。当您触摸屏幕时，会调用根视图（窗口）的 hitTest 方法，它会在其子视图上调用该方法，然后它们将在其子视图上调用该方法，依此类推。

原则上，您可以创建一个自定义窗口类并覆盖窗口中的 hitTest 方法，以强制它将事件转发到按钮，即使它超出了其父级的范围，但要正确地做到这一点是相当繁琐的。它会是这样的：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    CGRect rect = WORK_OUT_WHERE_THE_BUTTON_RECT_IS_RELATIVE_TO_THE_WINDOW;
    if (CGRectContainsPoint(rect, point))
    {
        return theButtonView;
    }
    else
    {
        return [super hitTest:point withEvent:event];
    }
} 
```

相反，我建议您省去很多麻烦，并通过将按钮添加为导航栏的子视图来改变应用程序的工作方式，而不是使用负定位将其放置在那里。

# php - How to auto-resize images of various kinds using PHP?

> ID：10694385
> 
> 赞同：0
> 
> 时间：2012-05-22T00:34:19.537
> 
> 标签：php, image, resize

Users on my site upload images of various dimensions. Some might be huge some might be small so resizing to a default image might work but small images being resized would look ugly. Is there anything i can do to resize all images to one size and make the quality clear without making it look crappy?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:43:27.663

您将无法制作“高清”小图像。没有图像可以缩放到更大的尺寸而不会失去清晰度（矢量图形除外，但我猜这不是你正在使用的）。但是，您可以将较大的图形调整为较小的图形。

尝试[phpThumb](http://phpthumb.sourceforge.net/)以获得出色的图像处理库，或查看 JohnPS 的答案以获得重新调整较大图像大小的好解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:39:13.587

您可以安装一个 PHP PEAR 包[Image_Transform来对图像进行基本的调整大小。](http://pear.php.net/package/Image_Transform)

这个包包含一个函数`fit`，可以缩小图像以适应盒子（宽度和高度），但如果它已经足够小，则保持相同的大小。请参阅[缩放函数文档](http://pear.php.net/manual/en/package.images.image-transform.scaling.php)。

# android - Android：ViewPagerIndicator - 为不同的页面创建不同的布局

> ID：10694388
> 
> 赞同：3
> 
> 时间：2012-05-22T00:34:31.037
> 
> 标签：android, android-viewpager, viewpagerindicator

我需要创建四种不同的布局，每一种布局到 ViewPagerIndicator 的一页。我怎样才能做到这一点？ViewPagerIndicator 已经在工作，但我正在使用来自[http://viewpagerindicator.com](http://viewpagerindicator.com)的示例，并且为所有页面创建了一个简单的 TextView。

请参阅示例（TestFragment.java）：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    TextView text = new TextView(getActivity());
    text.setGravity(Gravity.CENTER);
    text.setText(mContent);
    text.setTextSize(20 * getResources().getDisplayMetrics().density);
    text.setPadding(20, 20, 20, 20);

    LinearLayout layout = new LinearLayout(getActivity());
    layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    layout.setGravity(Gravity.CENTER);
    layout.addView(text);

    return layout;
} 
```

我需要识别当前页面（位置）并参考相关的资源布局（XML）。是否可以？

我还需要确保在我创建活动时，所有页面的所有 Views 只加载一次，以便稍后更新值。

我很感激任何帮助！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T05:48:21.960

我找到了一个适合我的简单解决方案。这就是我所做的。

**测试片段类**

```
 public static TestFragment newInstance(String content) {
        TestFragment fragment = new TestFragment();
//
//        StringBuilder builder = new StringBuilder();
//        for (int i = 0; i < 20; i++) {
//            builder.append(content).append(" ");
//        }
//        builder.deleteCharAt(builder.length() - 1);
        fragment.mContent = content;

        return fragment;
    } 
```

在此处注释掉 for 循环。只需获取我们将用作标志的**mContent 。**

现在在你的`onCreateView()`改变如下，

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
//        TextView text = new TextView(getActivity());
//        text.setGravity(Gravity.CENTER);
//        text.setText(mContent);
//        text.setTextSize(20 * getResources().getDisplayMetrics().density);
//        text.setPadding(20, 20, 20, 20);
//
//        LinearLayout layout = new LinearLayout(getActivity());
//        layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
//        layout.setGravity(Gravity.CENTER);
//        layout.addView(text);
        Log.i("mContent",mContent);
        View view=null;
        if(mContent.equalsIgnoreCase("title1"))
        {
            view = inflater.inflate(R.layout.one, container, false);

        }
        else if(mContent.equalsIgnoreCase("title2"))
        {
            view = inflater.inflate(R.layout.two, container, false);
        }
        else if(mContent.equalsIgnoreCase("title3"))
        {
            view = inflater.inflate(R.layout.three, container, false);
        }
        return view;

    } 
```

仅此而已。现在您将能够根据我们用作标志的标题名称来扩展您的视图。

# mysql - List with artistnames sorted by average rating from MySQL tables

> ID：10694391
> 
> 赞同：2
> 
> 时间：2012-05-22T00:35:02.420
> 
> 标签：mysql, sql, rating, average

I have this table "Ratings" containing an USER_ID, Artist_ID and a Rating (int, the score assigned by a user). And of course a table "Artists" with among others a field "ID" and "Name".

I am trying to get a **descending list with artistnames, sorted by the AVG score per artists**. First I thought this wouldn't be this hard, but I keep on fiddling...

Here's where I'm stuck. I have to figure out how it can calculate the AVG() of the id's that occur multiple times. And I've tried a variety of queries using the DISTINCT keyword but gained no success.

For example:

```
SELECT Name, Rating
FROM Artists as a
INNER JOIN Ratings as r
ON a.ID = r.Artists_ID 
ORDER BY r.Rating DESC; 
```

Gives me the result:

```
Name                Rating
"The Mars Volta"    9.5
"Simon Felice"      9.0
"Laura Gibson"      8.0
"Calexico"          7.0
"Mira"              7.0
"Guido Belcanto"    6.0
"Guido Belcanto"    1.0 
```

As you can see, the artist "Guido Belcanto" has more than 1 rating. I have no clue at the moment on how to calculate the AVG() of those ID's that occur more than once. It's probably basic MySQL but I'm maybe searching in the wrong direction

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T00:39:50.207

您在查询中忘记了 a`GROUP BY`并实际计算了您获得的平均评分（使用`AVG`函数）：

```
SELECT Name, AVG(Rating) AS AVGRating
FROM Artists as a
INNER JOIN Ratings as r
    ON a.ID = r.Artists_ID
GROUP BY Name
ORDER BY AVGRating DESC; 
```

尽管在艺术家表的键上进行分组可能更好（有足够的数据，有几个同名的艺术家并不是不可想象的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:40:43.010

按艺术家对评分进行分组，以便您可以计算每个组的评分平均值，并将其与 Artists 连接以获得与每个 id 关联的名称。

# c# - 如何在该图像上使用鼠标位置放大

> ID：10694397
> 
> 赞同：1
> 
> 时间：2012-05-22T00:36:20.740
> 
> 标签：c#

我有一个 userControl 库，它由主面板和一个 PictureBox 组成，我想做一个可缩放的 PictureBox 工具，我使用主面板的 mouseWheel 事件放大和缩小，我无法弄清楚我该怎么做的问题通过图像上的鼠标位置放大，所以每当我放大时，缩放都会转到面板的左上角，那么我该如何解决呢？

```
private double ZOOMFACTOR = 1.15;   // = 15% smaller or larger
private int MINMAX = 5;
void picPanel_MouseWheel(object sender, MouseEventArgs e)
    {
        if (e.Delta > 0)
        {
            ZoomIn();
        }
        else
        {
            ZoomOut();
        }
    }

    private void ZoomIn()
    {
        if ((picBox.Width < (MINMAX * this.Width)) &&
            (picBox.Height < (MINMAX * this.Height)))
        {
            picBox.Width = Convert.ToInt32(picBox.Width * ZOOMFACTOR);
            picBox.Height = Convert.ToInt32(picBox.Height * ZOOMFACTOR);
        }
    } 
    private void picBox_MouseEnter(object sender, EventArgs e)
    {
        if (picBox.Focused) return;
        picBox.Focus();
    } 
```

**更新 ：**

我试过这个，它看起来像工作，但不完全是应该的！有任何想法吗？

```
 private void ZoomIn()
    {
        if ((picBox.Width < (MINMAX * this.Width)) &&
            (picBox.Height < (MINMAX * this.Height)))
        {
            picBox.Width = Convert.ToInt32(picBox.Width * ZOOMFACTOR);
            picBox.Height = Convert.ToInt32(picBox.Height * ZOOMFACTOR);

            Point p = this.AutoScrollPosition;
            int deltaX = e.X - p.X;
            int deltaY = e.Y - p.Y;
            this.AutoScrollPosition = new Point(deltaX, deltaY);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:41:25.870

问题是你的控件就像一个视口 - 原点在左上角，所以每次你从那个角落拉伸图像时 - 结果是你最终放大到左上角，你需要偏移拉伸的图像并将用户放大的点居中。

*   图像大小：200,200
*   用户点击 100,50 并放大 x2
*   拉伸图像
*   图像大小为 400,400，用户点击的位置现在有效为 200,100
*   您需要将图像向左滑动 100 px 并向上滑动 50 px 以纠正重新调整图像大小

您需要覆盖`paint`事件处理程序以绘制图像偏移量：

```
 RectangleF BmpRect = new RectangleF((float)(Offset.X), (float)(Offset.Y), (float)(ZoomedWidth), (float)(ZoomedHeight));
  e.Graphics.DrawImage(Bmp, ViewPort , BmpRect, GraphicsUnit.Pixel); 
```

*Bmp是你的形象；ViewPort 是由您的图片框控件定义的 Rectangle*

这是一个可能有帮助[的线程。](http://qa.social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/136ba4f8-a487-4e21-b146-300ec4738d2e)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-12T07:47:20.700

这是鼠标位置缩放图像的示例......经过测试验证。

```
protected override void OnMouseWheel(MouseEventArgs ea)
{
    //  flag = 1;
    // Override OnMouseWheel event, for zooming in/out with the scroll wheel
    if (picmap1.Image != null)
    {
        // If the mouse wheel is moved forward (Zoom in)
        if (ea.Delta > 0)
        {
            // Check if the pictureBox dimensions are in range (15 is the minimum and maximum zoom level)
            if ((picmap1.Width < (15 * this.Width)) && (picmap1.Height < (15 * this.Height)))
            {
                // Change the size of the picturebox, multiply it by the ZOOMFACTOR
                picmap1.Width = (int)(picmap1.Width * 1.25);
                picmap1.Height = (int)(picmap1.Height * 1.25);

                // Formula to move the picturebox, to zoom in the point selected by the mouse cursor
                picmap1.Top = (int)(ea.Y - 1.25 * (ea.Y - picmap1.Top));
                picmap1.Left = (int)(ea.X - 1.25 * (ea.X - picmap1.Left));
            }
        }
        else
        {
            // Check if the pictureBox dimensions are in range (15 is the minimum and maximum zoom level)
            if ((picmap1.Width > (imagemappan.Width)) && (picmap1.Height > (imagemappan.Height)))
            {
                // Change the size of the picturebox, divide it by the ZOOMFACTOR
                picmap1.Width = (int)(picmap1.Width / 1.25);
                picmap1.Height = (int)(picmap1.Height / 1.25);

                // Formula to move the picturebox, to zoom in the point selected by the mouse cursor
                picmap1.Top = (int)(ea.Y - 0.80 * (ea.Y - picmap1.Top));
                picmap1.Left = (int)(ea.X - 0.80 * (ea.X - picmap1.Left));
            }
        }
    }
} 
```

# ios - Nsdictionary 作为数据类型

> ID：10694399
> 
> 赞同：0
> 
> 时间：2012-05-22T00:36:47.320
> 
> 标签：ios, nsdictionary

nsdictionary 是否是一种很好的数据类型，可用于将长字符串值存储为键描述的值和名称？或者不同的数据类型会更有效吗？我将它用于动物，并让数组保存所有数据，然后使用字典指向动物的名称和描述。我只是好奇这是否用于较小的数据，例如州和首都

或者我应该只使用`#Define @"rhino description"`

```
[Animal animalObj:@"rhino" location:@"the water" description:[[self setGenericAnimals] valueForKey:@"Rhino"]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:03:24.640

NSDictionary 可以做到这一点。使用 NSDictionary 的好处是您可以将数据作为 JSON 保存在一个单独的文件中，然后在需要时将其序列化到一个 NSDictonary 中。这将使您更容易管理所有数据，并将其与您的应用程序分开。

这是如何将 JSON 转换为 NSdictionary 的良好开端。 [http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

请记住，尽管整个 NSDictionary 必须适合内存，因此如果您要拥有数千个字符串，您可能希望将其分隔为不同的 JSON 文件，然后在需要时将它们序列化为字典。

要记住的另一件事是，如果您想对对象进行简单的比较和排序选项，则最好使用 CoreData，因为这允许您存储大量字符串并轻松访问它们。

# mysql - 如何对 MySQL 进行基准测试？

> ID：10694400
> 
> 赞同：5
> 
> 时间：2012-05-22T00:36:48.347
> 
> 标签：mysql, benchmarking, mysql-workbench

我目前正在使用 MySQL 工作台。我希望看到随着表中行数的增加而产生的性能差异。我想专门测试和比较1000行、10,000行、100,000行、1,000,000行和10,000,000行。

那么，是否有任何工具可以让我执行此操作并提供有关磁盘 I/O、内存使用、CPU 使用和完成查询时间的统计信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T20:16:46.833

是的。Benchmark 是你最好的选择，我猜对他们中的一些人来说

您可以进行简单的查询，例如：

```
jcho360> select benchmark (10000000,1+1);
+--------------------------+
| benchmark (10000000,1+1) |
+--------------------------+
|                        0 |
+--------------------------+
1 row in set (0.18 sec)

jcho360> select benchmark (10000000,1/1);
+--------------------------+
| benchmark (10000000,1/1) |
+--------------------------+
|                        0 |
+--------------------------+
1 row in set (1.30 sec) 
```

总和比除法快（你可以用你能想象到的所有事情来做到这一点。

我建议你看看这个程序，它将帮助你完成这部分的性能。

*   Mysqlslap（它就像基准，但您可以自定义更多结果）。
*   SysBench（测试 CPU 性能、I/O 性能、互斥争用、内存速度、数据库性能）。
*   Mysqltuner（您可以使用它分析一般统计信息、存储引擎统计信息、性能指标）。
*   mk-query-profiler（执行 SQL 语句分析）。
*   mysqldumpslow（很高兴知道女巫查询会导致问题）。

其中一些是第三方的，但我很确定你可以通过谷歌搜索应用程序的名称找到大量信息

# ios - iOS OpenGL ES - 仅根据请求绘制

> ID：10694402
> 
> 赞同：1
> 
> 时间：2012-05-22T00:37:08.827
> 
> 标签：ios, performance, opengl-es, frame-rate, redraw

我正在使用 OpenGL ES 在 iOS 上编写自定义 UI 框架。用例是针对应用程序的，例如不会在每帧基础上更新的东西（例如游戏）。从我目前所见，似乎 GLKViewController 的默认行为是以大约 30fps 的速率重绘屏幕。UI 通常只在必要时重绘自身以减少资源使用，并且我不想在用户不做任何事情时通过使用 GPU 来消耗额外的电池电量。

我尝试只清除和绘制一次屏幕作为测试，并从分析器收到警告说正在显示未初始化的颜色缓冲区。

调查它，我发现了这个文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/EAGLDrawable_Ref/EAGLDrawable/EAGLDrawable.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/EAGLDrawable_Ref/EAGLDrawable/EAGLDrawable.html)

文档指出，有一个标志 kEAGLDrawablePropertyRetainedBacking，当设置为 YES 时，将允许后台缓冲区保留在前一帧中绘制到它的内容。但是，它还指出不建议这样做，并且会导致性能和内存问题，这正是我首先要避免的。

我计划尝试两种方式，绘制每一帧而不是，但我很好奇是否有人遇到过这种情况。你会推荐什么？这不是我认为的每帧重新绘制所有内容 30 次那么重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:39:10.297

在这种情况下，您不应该使用`GLKViewController`，因为它的目的是在主循环上提供一个简单的动画计时器。相反，您的视图可以由 UIViewController 的任何其他子类拥有（包括您自己创建的一个），并且您可以依赖`setNeedsDisplay/drawRect`所有其他 UIKit 视图使用的常用系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:44:20.547

保留图像的不是后备缓冲区，而是一个单独的缓冲区。可能是专门为您的视图创建的单独缓冲区。

您可以随时设置`paused`暂停`GLKViewController`渲染循环。

# makefile - GNU 制造。为什么要使用这种复杂的语法来生成依赖项？

> ID：10694403
> 
> 赞同：6
> 
> 时间：2012-05-22T00:37:15.240
> 
> 标签：makefile, gnu-make

我正在阅读使用 GNU Make 管理项目，并在第 2.7 章 - 自动依赖生成中找到了这个示例。作者从 GNU 手册中说：

```
%.d: %c
        $(CC) -M $(CPPFLAGS $< > $@.$$$$; \
              sed s',\($*\)\.o[ :]*,\1.o $@ : ,g' < $@.$$$$ > $@; \
              rm -f $@.$$$$ 
```

但是，我可以用这个做同样的事情（注意`sed`）：

```
-include $(subst .c,.d,$(SOURCES))

%.d: %.c
          @$(CC) -M $(CPPFLAGS) $<  | sed 's|:| $*.d : |'  > $@; 
```

所有这些行都是生成依赖项，然后添加`*.d`名称。他们不得不将第一行从：

```
 foo.o: bar.h foo.h fubar.h 
```

到 foo.o foo.d : bar.h foo.h fubar.h

我的更简单，似乎工作得很好，但我认为 GNU 人有他们的`sed`命令的理由。还：

*   为什么要将文件重定向到`sed`? 为什么不简单地将其作为常用参数
*   为什么不完全跳过中间文件？

我知道 GNU 的人也可以想到这些，但出于某种原因，他们选择了更复杂的设置。我只是想了解他们的推理，所以我可以在飞行中做这些。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T10:26:47.360

实际上，即使是规则本身也没有必要。在Paul D. Smith 撰写的[Advanced Auto-Dependency Generation](http://make.mad-scientist.net/autodep.html)文章中，对生成 Make 样式依赖项的不同方法进行了很好的概述。

毕竟，以下规则就足够了（在使用 GCC 的情况下）：

```
%.o: %.c
    $(CC) $(CPPFLAGS) $(CFLAGS) -MMD -MP -o $@ -c $<

-include $(SOURCES:.c=.d) 
```

## UPD。

我之前也[回答](https://stackoverflow.com/a/10456349/545027)过类似的问题。它包含`-MMD -MP`选项的解释（引用 GCC 手册）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T01:27:23.327

一个更简单的解决方案是完全摆脱 sed 调用，因为 gcc 可以直接完成您需要的一切：

```
%.d: %.c
        $(CC) -M $(CPPFLAGS) -MF $@ $< -MT "$*.o $@" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T19:48:51.837

解决问题：`Why do a redirect of the file into sed?` 如果您这样做：

```
@$(CC) -M $(CPPFLAGS) $<  | sed 's|:| $*.d : |'  > $@; 
```

并且编译失败（错误输出并且不生成输出），您将创建一个空目标文件。再次`make`运行时，它会看到新创建的空文件并且不会重新生成它，从而导致构建错误。使用中间文件是避免意外创建空目标的常见防御策略。

# objective-c - 我可以让 AFNetworking 自动将 NULL 解析为 nil 吗？

> ID：10694404
> 
> 赞同：22
> 
> 时间：2012-05-22T00:37:39.660
> 
> 标签：objective-c, ios, afnetworking

我们在我们的移动应用程序中使用 AFNetworking 并且很多时候我们会返回 JSON，其中某些值具有 null。

我厌倦了以下操作。

```
if ([json objectForKey:@"nickname"] isKindOfClass:[NSNull class]]) {
    nickname = nil;
} else {
    nickname = [json objectForKey:@"nickname"];
} 
```

如果 JSON 响应中的值为 null，我们可以做些什么来让 AFNetworking 自动将对象设置为 nil 或将数字设置为 0？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-03-13T15:32:50.823

您可以在 AFHTTPSessionManager 响应序列化程序中将标志 setRemovesKeysWithNullValues 设置为 YES：

```
AFHTTPSessionManager *manager = [[AFHTTPSessionManager alloc]initWithBaseURL:url sessionConfiguration:config];
AFJSONResponseSerializer *serializer = [AFJSONResponseSerializer serializer];
[serializer setRemovesKeysWithNullValues:YES];
[manager setResponseSerializer:serializer]; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-22T01:05:43.780

这实际上是不可能的，因为字典不能包含`nil`作为键的对象。为了获得您想要的行为，必须完全忽略密钥，这以自己的方式是不可取的。

假设您无法控制正在接收的数据并且不知道 JSON 中存在哪些键。如果您想将它们全部列出，或者将它们显示在表格中，并且空对象的键被排除在字典之外，那么您将看到一个不正确的列表。

`NSNull`是 Cocoa 集合的“无”占位符，这就是在这种情况下使用它的原因。

您可以使用宏使您的打字更容易：

```
#define nilOrJSONObjectForKey(JSON_, KEY_) [[JSON_ objectForKey:KEY_] isKindOfClass:[NSNull class]] ? nil : [JSON_ objectForKey:KEY_]

nickname = nilOrJSONObjectForKey(json, @"nickname"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-10T11:12:41.307

DV_ 的回答非常适合 AFHTTPSessionManager。但是，如果您使用的是 AFHTTPRequestOperation 而不是管理器，请尝试以下操作：

```
AFHTTPRequestOperation *op = [[AFHTTPRequestOperation alloc] initWithRequest:request];
AFJSONResponseSerializer *serializer = [AFJSONResponseSerializer serializer];
serializer.removesKeysWithNullValues = YES;
op.responseSerializer = serializer; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-28T17:08:57.180

有一个名为 Minced [https://github.com/hyperoslo/Minced](https://github.com/hyperoslo/Minced)的漂亮 cocoapod 可以帮助您处理来自 JSON 响应的 NULL。它放置空字符串而不是 NULL。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T00:44:13.840

如果您将默认的 NSJSONSerialization 替换为 SBJSON，它将解决您的问题。

SBJSON 使对象为零，而不是 NSJSONSerialization 选择“null”

查看您可以使用的不同 JSON 解析器的要求。 [https://github.com/AFNetworking/AFNetworking#requirements](https://github.com/AFNetworking/AFNetworking#requirements)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-14T07:23:43.750

您可以在此功能上自定义 AFNetworking。将任何值默认设置为 NULL 的对象

```
static id AFJSONObjectByRemovingKeysWithNullValues(id JSONObject, NSJSONReadingOptions readingOptions) {
if ([JSONObject isKindOfClass:[NSArray class]]) {
    NSMutableArray *mutableArray = [NSMutableArray arrayWithCapacity:[(NSArray *)JSONObject count]];
    for (id value in (NSArray *)JSONObject) {
        [mutableArray addObject:AFJSONObjectByRemovingKeysWithNullValues(value, readingOptions)];
    }

    return (readingOptions & NSJSONReadingMutableContainers) ? mutableArray : [NSArray arrayWithArray:mutableArray];
} else if ([JSONObject isKindOfClass:[NSDictionary class]]) {
    NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionaryWithDictionary:JSONObject];
    for (id <NSCopying> key in [(NSDictionary *)JSONObject allKeys]) {
        id value = (NSDictionary *)JSONObject[key];
        if (!value || [value isEqual:[NSNull null]]) {
            // custom code here
            //[mutableDictionary removeObjectForKey:key];
            [mutableDictionary setObject:@"" forKey:key];
        } else if ([value isKindOfClass:[NSArray class]] || [value isKindOfClass:[NSDictionary class]]) {
            mutableDictionary[key] = AFJSONObjectByRemovingKeysWithNullValues(value, readingOptions);
        }
    }

    return (readingOptions & NSJSONReadingMutableContainers) ? mutableDictionary : [NSDictionary dictionaryWithDictionary:mutableDictionary];
}

return JSONObject; 
```

}

# php - 在从数据库加载的图像上添加水印 - php

> ID：10694407
> 
> 赞同：-1
> 
> 时间：2012-05-22T00:37:55.350
> 
> 标签：php

我有下面的代码从数据库加载图像。有 600 多行图像已插入数据库。我需要可以执行这些操作的脚本：

步骤 1) 从数据库加载图像步骤 2) 通过放置水印处理图像步骤 3) 将图像输出到浏览器。

我有下面的代码，加载并显示图像。但我不知道如何做水印。

```
$dbconn = @mysql_connect($mysql_server,$mysql_manager_id,$mysql_manager_pw) or exit("SERVER Unavailable"); 
@mysql_select_db($mysql_database,$dbconn) or exit("DB Unavailable"); 

$sql = "SELECT type,content FROM upload WHERE id=". $_GET["imgid"]; 

$result = @mysql_query($sql,$dbconn) or exit("QUERY FAILED!"); 

$contenttype = @mysql_result($result,0,"type"); 
$image = @mysql_result($result,0,"content"); 

header("Content-type: $contenttype"); 
echo $image;

mysql_close($dbconn); 

?> 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:50:21.033

您可以从 php.net 自行学习如何操作图像，或者您只需获得一个如下所示的包：http: [//pear.php.net/package/Image_Tools](http://pear.php.net/package/Image_Tools) （常用图像操作的工具集合。可用的扩展是混合、边框、选取框、蒙版、交换、缩略图和**水印**。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:49:45.217

以与 SELECT 类型内容相同的方式调用图像怎么样？

从您的数据库中选择带有图像路径的图像，然后对其进行样式设置，使其浮动在您的信息上。您还可以对水印图像进行硬编码，因为它始终是您可以重复的相同图像。您不会看到您的信息，但如果您在图像上设置不透明度，您可以看穿它：

```
#img.watermark {
    float:left;
    opacity:0.1;
    z-index:1;
} 
```

这只是关于如何做到这一点的一个想法，但应该工作得很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:09:21.453

看一眼

```
imagecopymerge() 
```

从 php 的图形库中，它应该可以满足您的需求。

[http://www.php.net/manual/en/function.imagecopymerge.php](http://www.php.net/manual/en/function.imagecopymerge.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T03:55:40.753

最后我得到了解决方案，这是代码：

```
<?php

$dbconn = @mysql_connect($mysql_server,$mysql_manager_id,$mysql_manager_pw) or exit("SERVER Unavailable"); 
@mysql_select_db($mysql_database,$dbconn) or exit("DB Unavailable"); 

$sql = "SELECT id, original_name, type, content FROM upload WHERE id=". $_GET["imgid"]; 

$result = @mysql_query($sql,$dbconn) or exit("QUERY FAILED!"); 

$fileID = @mysql_result($result,0,"id");
$contenttype = @mysql_result($result,0,"type"); 
$filename = @mysql_result($result,0,"original_name");
$image = @mysql_result($result,0,"content"); 

$fileXtension = pathinfo($filename, PATHINFO_EXTENSION);
$finalFileName = $fileID.".".$fileXtension;

// put the file on temporary folder
$filePutPath = "/your/temporary/folder/".$finalFileName;

// put the contents onto file system
file_put_contents($filePutPath, $image);

// get the watermark image
$stamp = imagecreatefrompng('../images/watermark.png');

switch($fileXtension)
{
  case 'JPEG':
  case 'JPG' :
  case 'jpg' :
  case 'jpeg':
    $im = imagecreatefromjpeg($filePutPath);
  break;

  case 'gif' :
  case 'GIF' :
    $im = imagecreatefromgif($filePutPath);
  break;

  case 'png' :
  case 'PNG' :
    $im = imagecreatefromgif($filePutPath);
  break;

  default :
  break;
}

list($width, $height) = getimagesize($filePutPath);

// set area for the watermark to be repeated
imagecreatetruecolor($width, $height);

// Set the tile (Combine the source image and the watermark image together)
imagesettile($im, $stamp);

// Make the watermark repeat the area
imagefilledrectangle($im, 0, 0, $width, $height, IMG_COLOR_TILED);

header("Content-type: $contenttype"); 

// free the memory
imagejpeg($im);
imagedestroy($im);

// delete the file on temporary folder
unlink($filePutPath);

mysql_close($dbconn); 
?> 
```

# asp.net - 从 ASP.Net 页面传递 Active Directory 凭据以检索 Web 内容

> ID：10694409
> 
> 赞同：0
> 
> 时间：2012-05-22T00:38:10.037
> 
> 标签：asp.net, windows-authentication

我有一个最近从表单身份验证转换为 Windows 身份验证的站点。我终于让它正常工作了。我遇到了一个尚未找到合适解决方法的问题。我们有几个页面从后端代码中调用其他页面并从返回的页面中检索内容部分。由于代码正在调用其他页面，我收到拒绝访问错误（代码无法通过身份验证）。我尝试了几种通过请求传递 Windows 凭据的方法，但都失败了。

我愿意为此功能创建一个 AD 用户，并使用请求对用户名和密码进行硬编码，以便可以检索信息。谁能给我允许我这样做的代码，到目前为止我一直没有成功。谢谢。

-编辑-我不记得全部了，但这是我尝试的最后一个：

```
Dim wc As New WebClient()  
Dim credential As NetworkCredential = New NetworkCredential(ADusername, ADPwd, ADDomain)  
wc.Credentials = credential  
Dim strXML As String = wc.DownloadString(RssFeedUrl) 
```

这会导致页面返回 (401) Unauthorized。

我尝试的另一件事......其中一个“检索”是 RSS 提要，这是提要的位置。

```
 <location path="RSS.ashx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location> 
```

它似乎没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:28:47.990

事实证明，经过更多测试，我发现上面的代码确实有效。我将它复制到一个 Windows 应用程序并在几台机器上运行它。除了我想在其上托管代码的服务器外，所有这些都正常工作。是否对事件查看器进行了一些挖掘，并且有一些失败的安全审计。使用此信息，我发现服务器上有一个“环回检查”。使用[Microsoft 知识库文章 896861](http://support.microsoft.com/kb/896861)，我禁用了站点的环回检查，瞧！它现在正在工作。

# linq - 如何使用 linq to entity 检查最后 10 个条目中的值

> ID：10694410
> 
> 赞同：1
> 
> 时间：2012-05-22T00:38:10.643
> 
> 标签：linq, entity-framework

我有一种方法，我需要使用 EF 检索数据库中的最后十个条目，并检查值和当前术语之间是否匹配。这是我到目前为止所拥有的

```
public static int ValidatePassword(string username, string password, int securityUserId)
        {
                int validResult = 0;
                /*Need to pass to client a value based upon success or failure of validation
                 * 0 - success
                 * 1 - password has already been used in the last 10 entries
                 * 2 - password does not meet CJIS requirements
                 */
                IEnumerable<string> oldpassword = null;
                // Create a Regular Expression to determine whether or not special characters are present.
                Regex regularExpression = new Regex("[^a-z0-9]");

                //if id exists pull last ten passwords
                if (securityUserId > 0)
                {
                    long id = Convert.ToInt64(securityUserId);

                    using (var context = new SecurityEntities(string.Empty))
                    {
                        try
                        {
                            oldpassword = (from p in context.SecurityAudits
                                           where p.SecurityUserId == id &&
                                           p.OldPassword == password
                                           orderby p.ActionDate descending
                                           select p.OldPassword.Take(10).ToString()).ToList();
                        }
                        catch (Exception ex)
                        {
                            string err = string.Format("ValidateCJISPassword() was unable to return an object msg:{0}", ex.Message);
                            throw new Exception(err, ex.InnerException);
                        }
                        finally
                        {
                            context.Dispose();
                        }
                    }
                }

                else if (oldpassword == null)
                {
                    //no matching record found now check other requirements
                    if ((password.Length >= DEFAULT_CJIS_PASSWORD_MIN_LENGTH) && regularExpression.IsMatch(password) && (password != username))
                    {
                        //success
                        validResult = 0;
                    }
                    else
                    {
                        //password does not meet standard CJIS requirements
                        validResult = 2;
                    }
                }
                else
                {
                    //matching record was found
                    validResult = 1;
                }
                return validResult;
            }
} 
```

我目前挂断的地方是查询在 ToString() 方法上引发异常

*`LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression.`*

我仍在学习 EF 以及 linq 的工作原理，所以我不确定这里最好的方法是什么。我应该尝试将结果设置为 IEnumerable 以外的其他值，例如数组或列表，还是应该考虑另一种方法？

提前致谢，

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:42:34.837

改变这个

```
oldpassword = (from p in context.SecurityAudits
                   where p.SecurityUserId == id &&
                   p.OldPassword == password
                   orderby p.ActionDate descending
                   select p.OldPassword.Take(10).ToString()).ToList(); 
```

对此

```
oldpassword = (from p in context.SecurityAudits
               where p.SecurityUserId == id &&
               p.OldPassword == password
               orderby p.ActionDate descending
               select p.OldPassword).Take(10).ToList(); 
```

问题是您的`Take(10)`子句不是整个结果的一部分，而是在实际的 linq 语句中..它在它的外部占据整个结果集的前 10 个..然后你这样做`ToList()`会将整个事情变成一个大批

下一个问题是您刚刚创建了一个数组并将其分配给`oldpassword`

我在这里看不到任何对数组有任何作用的东西......

您需要执行以下操作：

1.  声明你的字符串数组
2.  将数组分配给 linq 查询的返回值
3.  评估 > 0 个结果的回报
4.  如果 > 0 则密码已在最近 10 次中使用
5.  如果 = 0 那么新密码应该没问题，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:54:15.003

现在我已经了解了我在查询中需要什么，我还可以更新 linq 语句，如下所示：

```
 var lastTenPassword = (from p in context.SecurityAudits.Take(10)
                                     orderby p.ActionDate descending
                                     where p.SecurityUserId == id
                                     select p.OldPassword).ToList();

   string oldpassword = lastTenPassword.Where(a => a == password).FirstOrDefault(); 
```

测试更进一步，但现在通过在查询中移动 .Take() 方法，我明确地抓取了前十名，因为我的第一次尝试将检索所有记录，然后抓取前十名。

为了进行测试，您还可以查看我在哪里打破了最初的 where() 以首先按 id 获取所有记录，然后通过在该集中查找匹配的密码对该集执行过滤器。

再次感谢您的帮助

# c++ - 如何与父命名空间中的模板类成为朋友？

> ID：10694416
> 
> 赞同：0
> 
> 时间：2012-05-22T00:39:08.613
> 
> 标签：c++, templates, namespaces, visual-studio-2005, visual-c++-2005

我正在努力让我的班级成为其父命名空间中模板的朋友。有人可以解释我做错了什么：

以下是我在 MSVC8 (Visual Studio 2005) 上的尝试及其错误：

* * *

```
namespace a {
namespace b {

    template<typename T>
    class x;

    namespace c {

        class y
        {
            template<typename T>
            friend class x;
            ...
        };

    }
}} 
```

错误 C2888: `a::b::x`: 符号不能在命名空间中定义`c`

* * *

```
namespace a {
namespace b {

    template<typename T>
    class x;

    namespace c {

        class y
        {
            template<typename T>
            friend class ::a::b::x;
            ...
        };

    }
}} 
```

错误 C2888: `a::b::x`: 符号不能在命名空间中定义`c`

* * *

```
namespace a {
namespace b {

    namespace c {

        class y
        {
            template<typename T>
            friend class ::a::b::x;
            ...
        };

    }
}} 
```

错误 C2039: `x`: 不是`a::b`

* * *

我不能只包含包含的头文件，`class x`因为它取决于`class y`导致循环包含。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:32:58.743

hack 解决方法：如果您知道模板将被实例化的所有特定类型，请与每个实例化而不是模板成为朋友。例如：

```
namespace a {
namespace b {

    template<typename T>
    class x;

    namespace c {

        class y
        {
            friend class x<char>;
            friend class x<wchar_t>;
            ...
        };

    }
}} 
```

# awk - 在 awk 中，将条件放在括号外还是放在括号内之间是否存在功能差异？

> ID：10694418
> 
> 赞同：0
> 
> 时间：2012-05-22T00:39:35.120
> 
> 标签：awk

据我所知，这是：

```
$2 > 50{print} 
```

功能与此完全相同：

```
{if ($2 > 50) print} 
```

我什么时候应该使用一个与另一个，还是风格问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:50:57.460

主要是风格。第一个例子是规范的 AWK。当然，有时`if`需要声明。

考虑一下：

```
$2 > 50 {foo; print} 
```

需要 20 个字符，而以下内容需要 27 个字符：

```
{if ($2 > 50) {foo; print}} 
```

如果删除空格，则为 16 对 22 个字符。

因此，如果您对经济感兴趣（无论是在实际角色方面还是在视觉方面），前者更可取。

正如 potong 所指出的，`if`如果有多个语句（如我在上面的第二个示例中所示），则表单需要花括号。如果只有一个语句，它们是可选的。如果它是在没有添加的情况下编写的，并且稍后添加了额外的语句而不添加大括号，这就是微妙错误的来源。此外，对于脚本的读者来说，如果包含大括号，则意图会更加清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T00:43:06.377

在我看来，第二个更具可读性（特别是对于可能必须维护您的代码的非 awk 专家）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T00:50:53.117

是的，它们是一样的。与大多数语法替代品一样，也有权衡取舍。

我主要同意 John3136 的观点，即第二种形式更有可能被具有 c、c++、C#、java 等背景的人理解。

正如丹尼斯威廉姆森指出的那样，有时您必须使用`if (...)`表格。

对于单行，我认为第一种形式是有用的、可接受的，并且有助于加强 awk 的主要设计，即 [pattern]-[action]（可选或提供默认行为）。

如果您查看 comp.lang.awk，您会发现老用户大多更喜欢样式 1。

在我看来，样式 1 的大块代码很难阅读，但确实具有 lex 代码的外观。

所以.... 取决于 ;-) .... 您是否正在编写最终将由可能的非 awk 专家维护的代码？然后坚持 w 风格 2。为自己写作？两者都用，以免生锈！

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T03:53:11.530

是的，它们是一样的。

在第一个表单中，您可以省略`{ print }`，因为它是默认操作。所以，这也有效：

```
$2 > 50 
```

# javascript - .slideDown() 似乎不起作用

> ID：10694420
> 
> 赞同：5
> 
> 时间：2012-05-22T00:39:38.920
> 
> 标签：javascript, jquery

[**使用.append()**](http://api.jquery.com/append/)将 textarea 的值附加到 div后， JQuery 的[**.slideUp()**](http://api.jquery.com/slideUp/)不起作用。**HTML：**[](http://api.jquery.com/append/)

 ****```
<html>
    <body>
        <div id="cont">
            <textarea id="txt"></textarea>
            <button onclick="click()">Click</button>
        </div>
    </body>
</html> 
```

**JavaScript：**

```
function click(){
    var txt = $('#txt').val();
    var html = document.createElement('div');
    $(html).hide().html(txt);
    $('#cont').append(html);
    $(html).slideUp(500);
} 
```

我不知道问题出在哪里，因为当我使用**.show()**而不是**.slideUp()**时，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T00:44:00.853

好吧...slideDown 让元素显示，slideUp 让它隐藏。尝试

```
 $(html).slideDown(500) 
```

* * *

## @Philip Hardyhis 说：解决了我的问题。但是，有没有办法让它从底部向上滑动而不必使用 .animate()

我不这么认为，但我认为这很容易：只需在 html 中放置一个 div 元素（使用 $(html) 将很难处理）让我们称之为“myDiv”并将每个内容myDiv 中的 html

然后将 div 移到窗口外并执行动画（注意将其移到底部之外，您需要暂时禁用窗口滚动）

```
$(document).css('overflow','hidden');
$("#myDiv").css({'top':$(document).height(), 'opacity':'0'});
/*outside of the window and transparent*/
$("#myDiv").animate({
    'opacity':'1',
    'top':'0'
},2000, function(){$(document).css('overflow','auto');}); 
```

我认为它应该像这样工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:54:23.757

另外，L. Monty 已经指出，您可以通过使用 jQuery 的链接来大大压缩您的函数。

```
$('button').on('click', function() {
    $('<div>')
       .html($('#txt').val())
       .appendTo('#cont')
       .slideDown(0).slideUp('slow');
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T00:42:04.963

在添加新 div 之前隐藏它`#cont`- 然后调用`.slideDown`它来显示：

```
// When the button is pressed
$("button").on("click", function(){
    // Create a new DIV with our text as its content
    $("<div>", { text: $("#txt").val() } )
         // Make it invisible, append it, and then slide it into view
        .hide().appendTo("#cont").slideDown(500); 
});​ 
```

小提琴：http: [//jsfiddle.net/7Zp5w/1/](http://jsfiddle.net/7Zp5w/1/)****

# ruby - 使用 RMagick gem 具有透明背景的 flatten_images

> ID：10694421
> 
> 赞同：1
> 
> 时间：2012-05-22T00:39:42.550
> 
> 标签：ruby, imagemagick, transparency

好像我能找到这个，但什么都找不到。有一个简短的脚本：

```
require 'rubygems'
require 'RMagick'

img = Magick::ImageList.new("public/images/dev_banner_background.png")
gc = Magick::Draw.new

img.annotate(gc, 0,0,15,130, "| #{ENV['SERVER_TYPE']} Server |") do
  self.pointsize = 13
  self.rotation = -45
  self.kerning = 1
  self.stroke = "#ffffff"
  self.fill = "#ffffff"
end

picture = img.flatten_images

picture.write("public/images/dev_banner.png") 
```

dev_banner_background.png 是一个透明背景的小横幅，类似于 Github 的“Fork me on Github”横幅。

可以很好地将此文本覆盖在横幅上（希望覆盖在开发/登台服务器上）。但是生成的图像具有白色背景。假设它在 flatten_images 调用中，但无法弄清楚如何使其具有透明度。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:26:59.313

找到了。

```
 img = Magick::ImageList.new("public/images/dev_banner_background.png")
  img.background_color = "none"
  gc = Magick::Draw.new 
```

我试图在`flatten_images`, 和`annotate`方法中设置背景颜色。我没有意识到它直接`ImageList`有一个`background_color`属性，因为我没有在[实例方法和属性](http://www.imagemagick.org/RMagick/doc/ilist.html)列表中看到它。也许我只是错过了。

# iphone - 发送带有帐户信息的图片，例如 accountID(ios)

> ID：10694424
> 
> 赞同：1
> 
> 时间：2012-05-22T00:40:06.243
> 
> 标签：iphone, ios, nsurlrequest, content-disposition

我想发送一张带有帐户信息的图片，例如 accountID。现在我已经完成了发送图片，但未能发送 accountID，因为我对 NSURLRequest.setHttpBody 有点熟悉。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:33:25.287

确保图片发送到哪里，并了解服务器提供的 API（例如 facebook）。然后在 HTTPBody 中添加所有相关信息，例如您的 accountID。这个[链接](https://stackoverflow.com/questions/6422835/how-to-upload-photos-on-twitter-in-iphone)可能有帮助，祝你好运！

# arrays - 在 Perl 中声明具有增量值的数组

> ID：10694426
> 
> 赞同：8
> 
> 时间：2012-05-22T00:40:20.217
> 
> 标签：arrays, perl, shortcut

我知道可以像这样声明一个数组：

```
my @array = ( 5 .. 10 ); 
```

这相当于：

```
my @array = ( 5, 6, 7, 8, 9, 10 ); 
```

但是当增量值大于一时是否有类似的速记，例如

```
my @array = ( 5, 10, 15, 20, 25 );
my @array = ( 100, 200, 300, 400, 500 ); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-22T00:44:11.263

```
my @array = map 5*$_, 1..5; 
```

和

```
my @array = map 100*$_, 1..5; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T06:38:51.193

更普遍：

```
my $start = 5;
my $stop = 25;
my $increment = 5;
my @array = map $start+$increment*$_, 0..($stop-$start)/$increment; 
```

或者：

```
chomp(my @array = `seq $start $increment $stop`); 
```

（只是在开玩笑。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T09:15:05.427

您还可以使用 Damian Conway 的[List::Maker](http://p3rl.org/List%3a%3aMaker)。

```
use List::Maker;
my @list = <0..100 x 5>; 
```

# asp.net-mvc-3 - 使用默认绑定器将发布的值绑定到视图模型 - MVC3

> ID：10694427
> 
> 赞同：0
> 
> 时间：2012-05-22T00:40:23.913
> 
> 标签：asp.net-mvc-3, entity-framework, model-binding

MVC 中的模型绑定器可以将发布的值绑定到包含层次结构的视图模型对象吗？

我有一个 Customer、Order 和 OrderItem 表。OrderItem.OrderID 指向 Order.ID；并且 Order.CustomerID 指向 Customer.ID，即常见的 Customer -> Order -> OrderItem 设置。

我有一个视图模型——Customer，它包含 Order 对象和 OrderItem 对象。

我已经使用 VS 中的设计器工具创建了 EF 模型对象。（首先在 SQL 中创建数据库表，然后使用 EF 工具自动创建类）

假设在单个页面（视图）上，我将允许用户创建一个新的客户记录、一个订单和一些 OrderItem。

当用户填写表单时（在这个视图上创建一个新的 Customer、Order 和 OrderItems），点击提交按钮；默认活页夹会将所有值从发布的值移动到我的视图模型吗？（视图模型类在层次结构中承载 Customer、Order、OrderItem 的属性，即 Order 是 Customer 中的属性，OrderItem 是 Order 中的属性）。EF 是否足够聪明，可以将发布的值映射到这样的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:50:44.463

是的，MVC 足够聪明来处理这个绑定。在 MVC 中构建一个“复杂的”视图模型是相当常见的，它由几个属性组成，这些属性本身就是模型。绑定到集合和字典更难，但完全有可能。

在 EF 中，您可以轻松地定义对象之间的关系（例如，客户和订单之间存在一对多的关系），并且 EF 会处理得很好。“使用订单和订单项目创建客户”的代码（我想）将相当简单，但我不是 EF 专家，所以我必须将详细答案留给其他人。

但是，“编辑客户和/或订单和/或项目”屏幕的 EF 代码实际上会非常复杂 - 因此您最好将它们拆分为单独的操作，因为这会大大简化代码.

# mesa - OpenGL 4.2 标头、Mesa 3D、扩展 - 它是如何组合在一起的？

> ID：10694432
> 
> 赞同：3
> 
> 时间：2012-05-22T00:41:19.550
> 
> 标签：mesa, opengl-4

现在，我很难找到有关 OpenGL 标头和扩展以及如何访问最新功能的信息。OpenGL.org 没有涉及任何这些，Mesa（2006 年更新！）或任何人都没有——但我想我不是唯一一个想要理解这一点的人。

我正在使用 Nvidia 驱动程序在 Archlinux 上开发 - 支持 4.2 - 这显然不附带 OpenGL 头文件（无论如何都不是存储库的头文件）。这就是问题和混乱开始的地方。我读到我应该使用 Mesa3D 标头——目前支持 OpenGL 3.0。这是我现在安装的。

现在，我在某处读到核心 OpenGL 4.2 头文件 - gl.h - 仅公开了 OpenGL 1.2 的功能。其余部分（最高 4.2）可通过扩展加载获得——这意味着即使我针对 4.2 进行开发，这些 3.0 标头也可以——我将加载所有 4.2 核心功能作为扩展。

我在其他地方读到 gl.h 标头确实暴露了 4.2 和 3.0 之间的不同功能 - 我无法验证任何东西，因为我发现了很多过时的文章并且没有可靠的信息。

有人能解释一下这一切是如何结合在一起的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T21:42:49.997

您最好的选择可能只是使用第三方扩展管理器，如[GLEW（OpenGL 扩展牧马人库）](http://glew.sourceforge.net/)。它非常易于使用，并且包含所有最新的扩展。

# javascript - Jeditable 和 .live() 抑制第一次点击

> ID：10694436
> 
> 赞同：3
> 
> 时间：2012-05-22T00:42:04.187
> 
> 标签：javascript, jquery, jeditable, jquery-click-event

我有由 AJAX 更新的 jeditable 字段，因此我将**.live** () 与 Jeditable 结合使用，以便能够在 AJAX 更新后持久绑定 jeditable 字段。但是，通过使用 live() 它会抑制第一次“点击”，而第二次点击使该字段可编辑。

有趣的是（也许是解决方案的关键）是，如果我使用**“this”**作为参考，那么每个单独的 jedtxt 类字段的第一次点击都会被抑制（即需要点击两次进入字段 A jedtxt，然后再次点击两次进入编辑字段 B jedtxt），但如果我使用类名**“.jedtxt”**，则第一次点击只会被抑制一次（需要点击 2 次才能输入字段 A，但之后可以通过单击输入字段 B - 似乎“记住”第一次点击整个班级。

使用 $(this) 抑制**每次**单击jedtxt 类元素时的第一次单击：

```
$('.jedtxt').live('click', function() {
$(this).editable('/post/somewhere',{ // note use of $(this)
'submit': 'OK',});}); 
```

使用 $('.jedtxt') 抑制第一次点击**，只有**一个 jedtxt 类被点击：

```
$('.jedtxt').live('click', function() {
$('.jedtxt').editable('/post/somewhere',{ // note use of $('.jedtxt')
'submit': 'OK',});}); 
```

jedtxt 元素如下：

```
<div id="ni-50" name="ni-50" class="jedtxt">somevalue to edit</div> 
```

虽然第二种情况稍好一些，但我仍在寻找点击编辑以直接在第一次点击时工作。注意我尝试了双击或其他事件触发器，问题是一样的。这是一个普通的测试页面，没有其他事件链接到 div 元素。

在此先感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:01:55.493

我建议你阅读这个主题：

[带有 live() 函数的 jQuery 就地编辑问题.. 需要一个忍者](https://stackoverflow.com/questions/6991465/problem-with-jquery-edit-in-place-with-live-function-need-a-ninja)

第二个解决方案中的那个人用

```
$(this).trigger('click');
    $('.editable').live('click',function() {

    $('.editable').editInPlace({
        callback: function(unused, enteredText) { return enteredText; },
        bg_over: "#cff",
        field_type: "textarea",
        textarea_rows: "5",
        textarea_cols: "3",
        saving_image: "./images/ajax-loader.gif"
    });  
    $(this).trigger('click');
 }); 
```

# php - 使用算法发送 cron 作业？

> ID：10694440
> 
> 赞同：-1
> 
> 时间：2012-05-22T00:42:19.143
> 
> 标签：php, cron

我正在使用 php 开发一个网站。是否可以在算法定义的时间发送 cron 作业？我可以在控制台中添加这样的功能还是从我的 php 脚本中发送它？我还没有使用cron。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:48:55.960

想到的第一件事 - 每分钟使用 php 脚本运行一个 cron 作业，该脚本生成随机数，以检查是否运行其余的作业。crontab 中的这一行将每分钟运行一次 cron 作业（用你的替换路径）

```
*/1 * * * * /usr/bin/php /path/to/job.php 
```

或者如果你不能直接调用 php，你可以使用 curl 或 wget 之类的

```
*/1 * * * * /usr/bin/curl --silent --compressed http://yoursite.com/job.php 
```

在你的 php 文件中做任何你想做的检查是否是时候运行剩下的工作了，就像这样：

```
if(rand(1, 60)==1)
{
 include 'the_actual_job.php';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:56:28.450

例如，将您的 PHP 脚本设置为每小时执行一次。然后将此代码添加到脚本的顶部

```
sleep(rand(1, 60)); 
```

现在您的脚本将每小时 + 几秒钟执行一次。这是随机的:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T01:29:07.827

如果您想在特定时间安排作业，您可以使用“cron”的朋友“ [at](http://www.linuxjournal.com/article/4087) ”，它将在请求的时间安排脚本。

您只需触发如下命令：

```
$reqtime = '17.00'
system('at -f yourscript.sh ' . $reqtime); 
```

yourscript.sh 将在今天 17:00 神奇地运行

# php - 推荐按钮在 Firefox 中不显示

> ID：10694441
> 
> 赞同：0
> 
> 时间：2012-05-22T00:42:25.120
> 
> 标签：php, facebook-like, facebook-recommendations

我在我的网站上使用 Facebook 推荐按钮，但它似乎没有出现在 FireFox 浏览器中。它适用于 IE、Chrome、Safari，但不适用于 FireFox……我将它显示在一个 twitter 按钮旁边，该按钮在所有浏览器中都能正常显示。知道会发生什么吗？

Javascript：

```
 <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=324704914260494";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script> 
```

它应该显示在哪里：

```
 <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.example.com/index/billdets.php?billnum=<?php echo $billnum?>" data-text="Check this out!" data-count="none">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <div class="fb-like" data-href="http://www.example.com/index/billdets.php?billnum=<?php echo $billnum?>" data-send="true" data-layout="button_count" data-width="200" data-show-faces="true" data-action="recommend"></div> 
```

就像我说的那样，它适用于除 Fire Fox 之外的所有浏览器……知道吗？我尝试打开 Fire Bug，我得到了这个：

```
document.defaultView.getComputedStyle(a, null) is null
http://connect.facebook.net/en_US/all.js
Line 67 
```

我有一种感觉，可能是我正在使用 Jquery 和 wowwindow 在弹出窗口中打开此页面，但不确定为什么它只在一个浏览器中中断。

# php - 纬度和经度值保存为字符串或数字？

> ID：10694443
> 
> 赞同：1
> 
> 时间：2012-05-22T00:42:32.197
> 
> 标签：php, mysql, objective-c, xcode

这是关于我的另一个问题：[Saving Latitude and Longitude values to a MySQL Database iOS](https://stackoverflow.com/questions/10693276/saving-latitude-and-longitude-values-to-a-mysql-database-ios)

你能告诉我这段代码是否将我的纬度和经度值保存为字符串或数字。如果它保存为字符串，你能告诉我如何将它们保存为数字吗？

我还为它们设置了 mysql 字段作为浮点类型。

PHP

```
<?php

$username = "username";
$database = "database";
$password = "password";

mysql_connect(localhost, $username, $password);

@mysql_select_db($database) or die("unable to find database");

$name = $_GET["name"];
$address = $_GET["address"];
$city = $_GET["city"];
$county = $_GET["county"];
$country = $_GET["country"];
$postcode = $_GET["postcode"];
$date = $_GET["date"];
$time = $_GET["time"];
$latitude = $_GET["latitude"];
$longitude = $_GET["longitude"];

$query = "INSERT INTO map VALUES ('', '$name', '$address', '$city', '$county', '$country', '$postcode', '$date', '$time', '$latitude', '$longitude')";

mysql_query($query) or die(mysql_error("error"));
mysql_close();

?> 
```

AddSessionViewController.h

```
#import <UIKit/UIKit.h>

#define kpostURL @"http://myurl.com/map.php"
#define kname @"name"
#define kaddress @"address"
#define kcity @"city"
#define kcounty @"county"
#define kcountry @"country"
#define kpostcode @"postcode"
#define kdate @"date"
#define ktime @"time"
#define klatitude @"latitude"
#define klongitude @"longitude"

@interface addSessionViewController : UIViewController {

IBOutlet UITextField *nameText;
IBOutlet UITextField *addressText;
IBOutlet UITextField *cityText;
IBOutlet UITextField *countyText;
IBOutlet UITextField *countryText;
IBOutlet UITextField *postcodeText;
IBOutlet UITextField *dateText;
IBOutlet UITextField *timeText;
IBOutlet UITextField *latitudeText;
IBOutlet UITextField *longitudeText;
NSURLConnection *postConnection;

}

-(IBAction)post:(id)sender;
-(IBAction)getLatLon:(id)sender;

-(void) postMessage:(NSString*) postcode withName:(NSString *) name withAddress:(NSString *) address withCity:(NSString *) city withCounty:(NSString *) county withCountry:(NSString *) country  withDate:(NSString *) date withTime:(NSString *) time withLatitude:(NSString *) latitude withLongitude:(NSString *) longitude; 
```

添加SessionViewController.m

```
-(void) postMessage:(NSString*) postcode withName:(NSString *) name withAddress:(NSString *) address withCity:(NSString *) city withCounty:(NSString *) county withCountry:(NSString *) country withDate:(NSString *) date withTime:(NSString *) time withLatitude:(NSString *)latitude withLongitude:(NSString *)longitude; {

if (name != nil && address != nil && city != nil && county != nil && country != nil && postcode !=nil && date != nil && time != nil && latitude != nil && longitude != nil){

    NSMutableString *postString = [NSMutableString stringWithString:kpostURL];

    [postString appendString:[NSString stringWithFormat:@"?%@=%@", kname, name]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kaddress, address]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kcity, city]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kcounty, county]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kcountry, country]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kpostcode, postcode]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kdate, date]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", ktime, time]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", klatitude, latitude]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", klongitude, longitude]];

    [postString setString:[postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString]];
    [request setHTTPMethod:@"POST"];

    postConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

}

}

-(IBAction)post:(id)sender{

[self postMessage:(NSString*) postcodeText.text withName:nameText.text withAddress:addressText.text withCity:cityText.text withCounty:countyText.text withCountry:countryText.text withDate:dateText.text withTime:timeText.text withLatitude:latitudeText.text withLongitude:longitudeText.text];

[postcodeText resignFirstResponder];
nameText.text = nil;
addressText.text = nil;
cityText.text = nil;
countyText.text = nil;
countryText.text = nil;
postcodeText.text = nil;
dateText.text = nil;
timeText.text = nil;
latitudeText.text = nil;
longitudeText.text = nil;
[[NSNotificationCenter defaultCenter] postNotificationName:@"Test2" object:self];
}

-(IBAction)getLatLon:(id)sender{

NSString *eventName = [nameText text];
NSString *eventAddress = [addressText text];
NSString *eventCity = [cityText text];
NSString *eventCountry = [countryText text];
NSString *eventCounty = [countyText text];
NSString *eventDate = [dateText text];
NSString *eventPostCode = [postcodeText text];
NSString *eventTime = [timeText text];

// Use this to build the full event string
NSString *addressString = [NSString stringWithFormat:@"%@,%@,%@,%@,%@,%@,%@,%@", eventName, eventAddress, eventCity, eventCounty, eventCountry, eventPostCode, eventDate, eventTime];

// A search can't inlude the event and time and hour as it means nothing to MapKit
// The geocodeAddressString simply contains the address info
NSString *geocodeAddressString = [NSString stringWithFormat:@"%@,%@,%@,%@,%@", eventAddress, eventCity, eventCounty, eventCountry, eventPostCode];

//NSLog(@"Hello %@",addressString);
CLGeocoder *geocoder = [[CLGeocoder alloc] init]; 

[geocoder geocodeAddressString:geocodeAddressString completionHandler:^(NSArray* placemarks, NSError* error){
    // Check for returned placemarks
    if (placemarks && placemarks.count > 0) {
        CLPlacemark *topResult = [placemarks objectAtIndex:0];

        //NSLog([topResult locality]);
        //NSLog([topResult location]);
        //MKCoordinateRegion region;
        //double *value = topResult.region.center.latitude;

        CLLocationDegrees latitude = topResult.region.center.latitude;
        CLLocationDegrees longitude = topResult.location.coordinate.longitude;

        NSString *latitudeString = [NSString stringWithFormat:@"%f",latitude];
        NSString *longitudeString = [NSString stringWithFormat:@"%f",longitude];

        latitudeText.text = latitudeString;
        longitudeText.text = longitudeString;

        NSLog(@"Lat: %f", latitude);
        NSLog(@"Long: %f", longitude);
    }
}];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:55:51.887

当城市名称中有撇号时会发生什么？您可能想查看 mysql_real_escape_string。

无论如何，它们将被存储为浮点数。数据始终存储为列的数据类型（好吧，除非您将 null 计为数据类型：p）。

如果查询中的纬度和经度周围的引号是浮点数，则它们实际上是不必要的（尽管您希望在删除引号之前确保它们实际上是浮点数，否则您将打开 SQL 注入孔）。

现在会发生的是，当查询被执行时，MySQL 会默默地将字符串转换为浮点值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:57:15.197

它们将以 DB 字段的格式保存。因此，如果你有“int”，它们将被转换为整数，如果你有浮点数，它们将被四舍五入到最接近的浮点数，如果你有它作为 VarChar，它将被保存为一个字符串。

要保存为数字，请将表结构中的字段类型转换为数字 - 假设您已将条目验证为数字，那么相同的 SQL 查询就足够了（但在其他人指出之前可以改进:)）

# c++ - C++：数组的构造函数初始化列表？

> ID：10694447
> 
> 赞同：8
> 
> 时间：2012-05-22T00:42:39.847
> 
> 标签：c++, arrays

我有一个基本问题。我有一个带有数据成员的类：`double _mydata[N]`。（N 是模板参数）。使用构造函数初始化列表将这些数据初始化为零的语法是什么？`_mydata({0})`根据 C++ 标准（以及所有编译器）可以吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T00:48:59.950

不，在 C++11 之前，您需要这样做来默认初始化数组的每个元素：

```
: _mydata() 
```

你写它的方式是行不通的。

对于 C++11，更推荐使用统一的初始化语法：

```
: _mydata { } 
```

这样，您实际上可以将以前无法放入的东西放入数组中：

```
: _mydata { 1, 2, 3 } 
```

# math - 如何存储多项式？

> ID：10694452
> 
> 赞同：8
> 
> 时间：2012-05-22T00:43:56.503
> 
> 标签：math, variables, language-agnostic, polynomial-math, representation

整数可用于存储单个数字，但不能用于存储数学表达式。例如，假设我有以下表达式：

> 6x^2 + 5x + 3

我将如何存储多项式？我可以创建自己的对象，但我不知道如何通过成员数据来表示多项式。我不想创建一个函数来评估传入的参数，因为我不仅需要评估它，还需要操作表达式。

**矢量是我唯一的选择还是有更合适的解决方案？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T00:50:26.503

一种简单但低效的方法是将其存储为系数列表。例如，问题中的多项式如下所示：

```
[6, 5, 3] 
```

如果缺少一个术语，请在其位置放置一个零。例如，多项式`2x^3 - 4x + 7`将表示如下：

```
[2, 0, -4, 7] 
```

多项式的次数由列表的长度减一给出。这种表示有一个严重的缺点：对于稀疏多项式，列表将包含很多零。

稀疏多项式的项列表更合理的表示是非零项的列表，其中每个项是包含项的阶和该阶的系数的列表；多项式的次数由第一项的阶数给出。例如，多项式`x^100+2x^2+1`将由以下列表表示：

```
[[100, 1], [2, 2], [0, 1]] 
```

作为这种表示的有用性的一个例子，[SICP](https://rads.stackoverflow.com/amzn/click/com/0262011530)一书使用上述多项式的第二种表示构建了一个简单但非常有效的[符号代数系统。](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-18.html#%_sec_2.5.3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T00:50:24.243

列表不是唯一的选择。

您可以使用映射（字典）将指数映射到相应的系数。

使用地图，您的示例将是

```
{2: 6, 1: 5, 0: 3} 
```

（系数，指数）对的列表是非常标准的。如果你知道你的多项式是密集的，也就是说，所有的指数位置都是 0 到某个小的最大指数范围内的小整数，你可以使用数组，正如我看到的 Óscar Lopez 刚刚发布的那样。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T00:55:43.380

您可以将表达式表示为表达式树。参见例如[.NET 表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)。

这允许比简单多项式更复杂的表达式，并且这些表达式也可以使用多个变量。

在 .NET 中，您可以将表达式树作为树来操作，并且可以将其作为函数进行评估。

```
 Expression<Func<double,double>> polynomial = x => (x * x + 2 * x - 1);
        double result = polynomial.Compile()(23.0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T02:27:32.323

面向对象的方法会说多项式是单项式的集合，而单项式将系数和指数封装在一起。

当您有这样的多项式时，此方法有效：

```
y(x) = x^1000 + 1 
```

对于这种病态情况，将数据结构与多项式阶数联系起来的方法将是非常浪费的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T00:50:45.130

向量/数组是显而易见的选择。根据表达式的类型，您可能会考虑某种稀疏向量类型（自定义，即基于字典甚至链表，如果您的表达式有 2-3 个非零系数 5x^100+x ）。

在任何一种情况下，通过自定义类/接口公开都是有益的，因为您可以稍后替换实现。如果您计划编写大量表达式操作代码，您可能希望提供标准操作（+、-、*、等于）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T00:52:13.757

您需要存储两件事：

1.  多项式的次数（例如“3”）
2.  包含每个系数的列表（例如“{3, 0, 2}”）

在标准 C++ 中，“std::vector<>”和“std::list<>”两者都可以。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T00:57:56.227

只需将系数存储在数组或向量中。例如，在 C++ 中，如果您只使用整数系数，您可以使用`std::vector<int>`, 或对于实数，`std::vector<double>`. 然后你只需按顺序推动系数并通过可变指数数访问它们。

例如（再次在 C++ 中），要存储 5*x^3 + 9*x - 2 你可以这样做：

```
 std::vector<int> poly;
   poly.push_back(-2); // x^0, acceesed with poly[0]
   poly.push_back(9);  // x^1, accessed with poly[1]
   poly.push_back(0);  // x^2, etc
   poly.push_back(5);  // x^3, etc 
```

如果您有大型、稀疏的多项式，那么您可能想要使用地图而不是向量。如果您有固定大小的长度，那么您可能会使用固定长度的数组而不是向量。

我以 C++ 为例，但同样的方案可以用在任何语言中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-22T01:06:46.107

您还可以将其转换为[反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)：

> 6x^2 + 5x + 3 -> x 2 ^ 6 * x 5 * + 3 +

where`x`和 numbers 被“推送”到堆栈中，操作 (^,*,+) 从堆栈中获取两个最顶层的值并将它们替换为操作的结果。最后你得到堆栈上的结果值。

在这种形式下，很容易计算任意复杂的表达式。

这种表示也接近于表达式的树表示，其中非叶树节点表示操作和函数，叶节点用于常量和变量。

树的好处是您还可以轻松地评估表达式，还可以对它们进行符号微分之类的操作。两者都具有递归性质。

# objective-c - 用于 NSNumber 列表的 NSArray 或 NSMutableArray

> ID：10694455
> 
> 赞同：1
> 
> 时间：2012-05-22T00:44:09.483
> 
> 标签：objective-c, xcode, arrays, nsarray, nsnumber

好的，所以我想做这样的事情：

```
int array[] = {1, 2, 3, 4, 5}; 
```

如果我想使用 NSArray 和 NSNumbers 而不是整数，我该怎么做？

**笔记：

我不想要类似的东西

```
NSMutableArray *array = [[NSMutableArray alloc] init];
[array addObject: ]; 
```

我需要能够将它们全部放在一个用逗号分隔的集合中。（很奇怪，但它使我的程序更容易以这种格式处理。我正在模仿一些经常这样做的 java 代码，因此它可以更容易地遵循本教程。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T00:48:41.530

如果您想一次添加所有元素，并且您不打算更改它，那么我们使用 NSArray。你可以这样填写：

```
NSArray *array = [NSArray arrayWithObjects:[NSNumber numberWithInt:1],[NSNumber numberWithInt:2],[NSNumber numberWithInt:3],[NSNumber numberWithInt:4],[NSNumber numberWithInt:5],nil]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-05T10:30:40.303

```
NSArray *array = @[@1,@2,@3,@4]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T00:47:56.380

你可以这样做

```
NSArray* array = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:1],[NSNumber numberWithInt:2],[NSNumber numberWithInt:3],[NSNumber numberWithInt:4], nil]; 
```

# javascript - 单击时将索引值重置为零

> ID：10694464
> 
> 赞同：0
> 
> 时间：2012-05-22T00:45:40.813
> 
> 标签：javascript, jquery, html, video, html5-video

确实存在问题，但是，如何在点击时将索引的值重置为零？

我有一个视频列表，其中任何一个都可以通过单击来播放。视频完成后，它将播放下一个视频。

它可以工作，但是如果您单击一个然后另一个，而不是播放下一个视频，它将在刚刚播放的视频之后播放两个视频。如果您第三次单击，则会播放第三次。我知道这是因为调用了该函数，`ended`并且每次单击要播放的新视频时，上一个视频都会结束并增加其价值。

我如何让它停止这样做？

播放下一个视频的函数是：

```
$("#myVid").bind("ended", function() {
            $("#bigPic").removeClass("move");
            $("#MyT").fadeIn(250);
            function playArray(ele, array) {
                index++;
                if (index >= array.length) {
                    index = i;
                }
                ele.src = array[index];
                ele.load();
                ele.play();
            }
            playArray(document.getElementById("myVid"), videos);
        }); 
```

ps 我试图通过添加`index--`onclick 来降低值，但这只是循环播放视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:25:51.943

您正在将视频列表保存在数组中，对吗？！所以有两个动作： 1.用户点击一个视频，所以你的索引应该是你选择的一个 2.视频已经结束，如果存在则跳转到列表中的下一个。

```
var index = 0;

$("YourVideoList").bind("click", function() {
   index = "yourCurrentSelectedItem"     
});

$("#myVid").bind("ended", function() {
        $("#bigPic").removeClass("move");
        $("#MyT").fadeIn(250);
        function playArray(ele, array) {
            index++;
            if (index >= array.length) {
                index = 0;   //replaced "i" with 0, to play first video in list
                //return;    //break, if you want the list to stop at the end of the last video
            }
            ele.src = array[index];
            ele.load();
            ele.play();
        }
        playArray(document.getElementById("myVid"), videos);
    }); 
```

应该这样做！

# java - Java：weakhashmap 如何确定密钥是否“过时”？

> ID：10694467
> 
> 赞同：0
> 
> 时间：2012-05-22T00:47:03.080
> 
> 标签：java, weakhashmap

它怎么知道这把钥匙是旧的并准备扔掉？为什么是字符串文字？

例如，

```
 private static WeakHashMap<<? extends Object>, String> m = 
                             new WeakHashMap<<? extends Object>, String>();

  public static void A(){

       Point p = new Point();
       m.put(p, "a");

  } 
```

这是否意味着一旦 A() 返回，'p' 键就会消失？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T00:49:23.027

`WeakHashMap`没有做出这样的决定；相反，正常的 Java 垃圾收集过程会删除未引用的键。`p`一旦触发 Java 垃圾回收，密钥就会消失。

它的作用是`WeakHashMap`使用弱引用来引用键，因此垃圾收集器知道不`WeakHashMap`将对映射键的引用算作“持有”内存中的键对象。

# google-maps-api-3 - Google Maps API - 路线中点

> ID：10694472
> 
> 赞同：4
> 
> 时间：2012-05-22T00:48:37.177
> 
> 标签：google-maps-api-3, map-directions

我一直在玩谷歌地图/谷歌方向 API。有没有人知道我如何能够找到沿路线的中点，而不是地理中点。

理想情况下，我想找到这个中点的经纬度值。

有什么想法吗？我有点难过，希望我能找到一个建议，而不会疯狂地试图自己找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T11:37:32.663

您可以使用来自[Gisgraphy](https://code.google.com/p/gisgraphy/source/browse/trunk/gisgraphy/src/main/webapp/scripts/v3_epoly.js?r=86)的 GetPointAtDistance 原型。原型返回沿折线指定距离的 LatLng。以下代码：

1.  定义多段线
2.  确定这条折线的半长
3.  使用原型返回中点LatLng
4.  从中点 LatLng 中提取 Lat 和 Lng

* * *

```
var polyline = new google.maps.Polyline({
      path: [ new google.maps.LatLng(..., ...),
              new google.maps.LatLng(..., ...),
              ... ];
    }),                                                                //1.
    midDistanceLength = polyline.getPath().getLength() / 2,            //2.
    midDistanceLatLng = polyline.GetPointAtDistance(midDistanceLength),//3.
    midDistanceLat    = midDistanceLatLng.lat(),                       //4.
    midDistanceLng    = midDistanceLatLng.lng();                       //4.

//The prototype from Gisgraphy:
google.maps.Polygon.prototype.GetPointAtDistance = function(metres) {
  // some awkward special cases
  if (metres == 0) return this.getPath().getAt(0);
  if (metres < 0) return null;
  if (this.getPath().getLength() < 2) return null;
  var dist=0;
  var olddist=0;
  for (var i=1; (i < this.getPath().getLength() && dist < metres); i++) {
    olddist = dist;
    dist += google.maps.geometry.spherical.computeDistanceBetween (
      this.getPath().getAt(i),
      this.getPath().getAt(i-1)
    );
  }
  if (dist < metres) return null;
  var p1= this.getPath().getAt(i-2);
  var p2= this.getPath().getAt(i-1);
  var m = (metres-olddist)/(dist-olddist);
  return new google.maps.LatLng( p1.lat() + (p2.lat()-p1.lat())*m, p1.lng() + (p2.lng()-p1.lng())*m);
}
google.maps.Polyline.prototype.GetPointAtDistance = google.maps.Polygon.prototype.GetPointAtDistance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T04:32:56.423

最简单的方法是您可以首先：

1) 使用 GMSGeometryDistance 计算路径的总距离，通过 GMSGeometryDistance 函数计算每两个后续点之间的距离，然后将所有距离相加。

2）然后你再次计算，并在每一步求和。当总和约为总距离的一半时，您就在中间点。示例代码如下：

```
func findTotalDistanceOfPath(path: GMSPath) -> Double {

        let numberOfCoords = path.count()

        var totalDistance = 0.0

        if numberOfCoords > 1 {

            var index = 0 as UInt

            while index  < numberOfCoords{

                //1.1 cal the next distance

                var currentCoord = path.coordinateAtIndex(index)

                var nextCoord = path.coordinateAtIndex(index + 1)

                var newDistance = GMSGeometryDistance(currentCoord, nextCoord)

                totalDistance = totalDistance + newDistance

                index = index + 1

             }

        }
return totalDistance

    }

func findMiddlePointInPath(path: GMSPath ,totalDistance distance:Double) -> CLLocationCoordinate2D? {

    let numberOfCoords = path.count()

    let halfDistance = distance/2

    let threadhold = 10 //10 meters

    var midDistance = 0.0

    if numberOfCoords > 1 {

        var index = 0 as UInt

        while index  < numberOfCoords{

            //1.1 cal the next distance

            var currentCoord = path.coordinateAtIndex(index)

            var nextCoord = path.coordinateAtIndex(index + 1)

            var newDistance = GMSGeometryDistance(currentCoord, nextCoord)

            midDistance = midDistance + newDistance

            if fabs(midDistance - halfDistance) < threadhold { //Found the middle point in route

                return nextCoord

            }

            index = index + 1

        }

    }
    return nil //Return nil if we cannot find middle point in path for some reason
} 
```

还有更多功能需要优化。[我在这里](http://cungcode.com/how-to-find-midpoint-of-route-in-swift/)用 Swift 写了一个详细的答案

# android - ViewpagerIndicator 与 SherlockFragmentActivity 或 ListFragment 一起使用

> ID：10694473
> 
> 赞同：1
> 
> 时间：2012-05-22T00:48:39.460
> 
> 标签：android, actionbarsherlock, viewpagerindicator

在我的项目中，我使用[actionBarSherlok](http://actionbarsherlock.com/)库并且工作正常。我想实现google play app，漂亮的小部件效果。为此，我找到了以下[库](http://viewpagerindicator.com/)。

而且也有效。但我的问题是如何将 secod 库与 listfragment 或 SherlockFragmentActivity （我更喜欢）结合使用。

示例代码： - TestFragment 只是一个 Fragment 类。getItem 是返回当用户在屏幕上移动手指时将显示的片段的方法，对吗？如果它是 @override 方法，我如何在屏幕上显示除 Fragment 之外的其他类？我是否需要创建一个适配器，如果是这种情况，我怎么知道我必须记住什么？或者有这种类型的东西吗？

我想我错过了一些东西。

```
class GoogleMusicAdapter extends TestFragmentAdapter implements TitleProvider {
    public GoogleMusicAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(SampleTabsDefault.CONTENT[position % SampleTabsDefault.CONTENT.length]);
    }

    @Override
    public int getCount() {
        return SampleTabsDefault.CONTENT.length;
    }

    @Override
    public String getTitle(int position) {
        return SampleTabsDefault.CONTENT[position % SampleTabsDefault.CONTENT.length].toUpperCase();
    }
} 
```

问候。

# jquery - jQuery Tablesorter 第一次排序点击降序

> ID：10694475
> 
> 赞同：2
> 
> 时间：2012-05-22T00:48:47.677
> 
> 标签：jquery, tablesorter

所以我知道您可以使用 tablesorter 设置特定列的默认排序顺序。这有点不同。

如果单击任何未排序的列，则第一个排序始终是**^** (asc)。我希望第一次点击是**V** (desc)。

知道 API 中的这个选项是什么吗？我似乎找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T00:53:34.117

看起来像个骗子。

```
<script type="text/javascript">
    $(document).ready(function() 
    { 
      $("#theTable").tablesorter({ 
        sortInitialOrder: 'desc',
        sortList: [[3,1]] // etc.

       }); 
    } 
    ); 
</script> 
```

[如何让jQuery Tablesorter默认降序排序？](https://stackoverflow.com/questions/1614390/how-to-get-jquery-tablesorter-to-sort-descending-by-default)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-22T14:25:00.930

我刚刚遇到了同样的问题。这里或其他地方的答案都没有让我满意。深入研究 tablesorter 代码会发现另一个名为 sortRestart 的选项，它似乎会强制对列的任何新单击以根据 sortIntialOrder 进行排序，即使这些列之前已被单击：

```
table.tablesorter({
  sortInitialOrder: 'desc',
  sortRestart: true,
  sortList: [[2,1]]
}); 
```

以上对我有用。

# python - 为什么 pygame 窗口不能正常关闭？

> ID：10694480
> 
> 赞同：5
> 
> 时间：2012-05-22T00:49:22.487
> 
> 标签：python, pygame

当我关闭程序窗口时，程序冻结，然后我被迫强制退出程序。为什么单击 X / Close 按钮​​时程序没有关闭。如果这很重要，我也在使用 python 2.7。

```
import pygame
import os, sys
from itertools import *
from oryxsprites import *
from oryxbackground import *

running = True

while running:

    backgroundmain()
    pygame.display.set_caption('OryxGame')
    #pygame.display.set_icon(biggrasstile)

    for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T00:52:32.327

引用与[您的运动代码非常相似的文章](http://www.petercollingridge.co.uk/pygame-physics-simulation/creating-pygame-window)：

> 窗口现在在“运行”等于 True 时持续存在，直到您关闭窗口（通过单击 X）。请注意，如果您使用 IDE 进行 Python 编程，那么它可能会干扰 Pygame。这通常不是一个主要问题，但它可以阻止 Pygame 窗口正常关闭。如果是这样，添加 pygame.quit() 应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T14:01:09.090

对于 Python 3.2，pygame 1.9 win32`sys.exit()`是没用的（见在线教程）。 `pygame.quit()`完美运行

# recursion - F# 使用函数式编程将列表减半

> ID：10694505
> 
> 赞同：3
> 
> 时间：2012-05-22T00:53:30.627
> 
> 标签：recursion, f#, functional-programming

我正在尝试在函数中输入一个列表，它会向我发送一个列表，其中包含使用 f# 和以下递归删除的前半部分元素，但我一直遇到一个我无法弄清楚的基本情况问题。有什么想法吗？我正在使用第二个影子列表来计算我需要走多远，直到我进入列表的一半（通过一次删除两个元素）

```
let rec dropHalf listToDrop shadowList = 
    match shadowList with
    | [] -> listToDrop
    | shadowHead2::shadowHead1::shadowTail -> if shadowTail.Length<=1 then listToDrop else 
                                    match listToDrop with 
                                    |[] -> listToDrop
                                    |listToDropHead::listToDropTail -> dropHalf listToDropTail shadowTail 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:31:26.053

```
let rec dropHalf listToDrop shadowList = 
    match shadowList with
    | [] -> listToDrop
    | shadowHead2::[] -> listToDrop   (* odd number! *)
    | shadowHead1::shadowHead2::shadowTail -> 
        match listToDrop with 
        | [] -> listToDrop   (* should never happen? *)
        | listToDropHead::listToDropTail -> dropHalf listToDropTail shadowTail 
```

恐怕我不使用 F#，但它类似于 ocaml，所以希望以下内容接近您正在寻找的内容（也许评论格式已更改？！）。这个想法是，当你耗尽阴影时，你就完成了。您的代码几乎就在那里，但影子尾巴上的长度测试毫无意义。

我想强调的是，这不像任何人都会写“在现实生活中”，但听起来你正在与一些奇怪的要求作斗争。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:13:48.473

因为您使用与原始列表长度相同的影子列表，并以不同的速率从这些列表中删除元素，所以最好创建一个辅助函数：

```
let dropHalf xs =
    let rec dropHalf' ys zs =
      match ys, zs with
      | _::_::ys', _::zs' -> dropHalf' ys' zs'
      | _, zs' -> zs' (* One half of the shadow list ys *)
    dropHalf' xs xs 
```

如果您不想遍历列表两次，则以下解决方案更简单：

```
let rec drop n xs =
   match xs, n with
   | _ when n < 0 -> failwith "n should be greater or equals to 0"
   | [], _ -> []
   | _, 0 -> xs
   | _::xs', _ -> drop (n-1) xs'

let dropHalf xs =
    xs |> drop (List.length xs/2) 
```

另一个简单的解决方案需要一些额外的空间，但不必使用递归：

```
let dropHalf xs = 
    let xa = Array.ofList xs
    xa.[xa.Length/2..] |> List.ofArray 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T16:29:38.153

作为一般的经验法则，如果您正在调用`Length`列表，那么很可能有更好的方法来做您正在做的事情。 `Length`必须迭代整个列表，因此是 O(n)。

```
let secondHalf list =
    let rec half (result : 'a list) = function
        | a::b::sx -> half result.Tail sx
        // uncomment to remove odd value from second half
        // | (a::sx) -> result.Tail 
        | _ -> result

    half list list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T01:31:38.453

这是您所描述的示例。

```
open System
open System.Collections.Generic

let items = seq { 1 .. 100 } |> Seq.toList

let getBackOfList ( targetList : int list) = 
    if (targetList.Length = 0) then 
        targetList
    else
        let len = targetList.Length
        let halfLen = len / 2
        targetList |> Seq.skip halfLen |> Seq.toList

let shortList = items |> getBackOfList

("Len: {0}", shortList.Length) |> Console.WriteLine

let result = Console.ReadLine() 
```

希望这可以帮助

# svn - svn合并修订范围内的特定文件

> ID：10694513
> 
> 赞同：0
> 
> 时间：2012-05-22T00:55:39.170
> 
> 标签：svn, merge

我正在为具有 DEV 代码库和 PROD 代码库的现有环境设置 SVN。DEV 有大量待定更改，因此代码库存在显着差异。

我建立了一个基于 prod 的 TRUNK repo。然后，我将该 repo 签出到 DEV 并提交到一个新的 DEV 分支。

所以 TRUNK 看起来像：REV 1 - 初始代码导入

和 DEV 看起来像： REV 1 - 初始代码导入 REV 2 - 添加开发更改

我的问题是我希望能够合并从 DEV 到 TRUNK 的更改，以获得特定的文件集，这些文件是 REV 2 的一部分，仅用于这些文件。

换句话说，假设开发人员完成了一个项目并将 FILE1 作为 REV3 提交给 DEV。但当我创建存储库时，他也在处理 FILE1，因此它包含在 REV2 中。当他从 DEV 合并到 TRUNK 并选择修订范围时，如果他只选择 REV3，他将不会获得所有更改。但如果他选择 REV2 和 REV3，他将获得尚未准备好用于 PROD 的其他文件的所有 DEV 更改。

希望我在这里有点道理。如何仅指定某些文件进行合并？还是有另一种更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:13:12.037

如果您合并修订，它们会采用其中包含的所有更改，因此您没有一种直接的方式来做您正在寻找的事情。

你可以

1.  从主干创建一个新分支，
2.  将 Rev3 合并到该分支的工作目录中，
3.  还原您不想包含的文件，
4.  将更改提交到此分支
5.  合并到主干

如果您按照上述步骤操作，那么稍后当您尝试将 Dev 分支完全合并回主干时，您很可能必须处理树冲突。

# macos - vim + COPY + mac 通过 SSH

> ID：10694516
> 
> 赞同：65
> 
> 时间：2012-05-22T00:55:48.357
> 
> 标签：macos, vim, ssh

我通过 ssh 访问服务器，在该服务器上运行 vim 来编辑文件。当我尝试使用 y 或 "+y 将 vim 中的文本拉到我的 mac（lion）本地的编辑器中时，它不起作用。我最终得到了我最后在本地复制的文本。如果我只在其中使用 p 它确实有效vim 好的。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-22T13:26:46.810

扩展 Ray 的答案……</p>

当您通过 SSH*在*远程服务器上使用 Vim 时，您在 Vim 中所做的一切都是在远程服务器上完成的。远程服务器*和*您在其上运行的远程 Vim 对本地计算机及其系统剪贴板的实际知识为零。

因此，`y`永远不会将被拉出的文本放在本地剪贴板中。

为了将一段文本*从*远程 Vim复制*到*本地机器的剪贴板，你有三个选项：

*   用鼠标选择文本并像在任何 Mac OS X 应用程序中一样按`Cmd`+ 。`C`

    显然，它似乎是最简单的，但它至少有三个限制：

    1.  它仅限于当前屏幕。如果您要拉出的文本没有完全显示，您将无法复制所有内容。

    2.  它不能很好地与`set mouse=a`. 使用此选项，任何使用鼠标选择某些内容的尝试都将导致无法使用+复制的*视觉*模式选择。作为一种解决方法，您可以使用+mouse 选择文本而不进入*可视*模式，或者直接从遥控器中删除此设置。`Cmd``C``Alt`*`~/.vimrc`*

    **   行号也会被复制。* 
**   将抽出的文本放在一个临时文件中，`scp`将其放到您的本地计算机上，然后用于`pbcopy`将其放入系统剪贴板中。

    这个解决方案似乎有点令人费解，但它确实有效（而且问题本身也有点令人费解）。多年来，我看到了很多不同的实现，从简单的单列到客户端/服务器设置。[这是一个](http://endot.org/2011/12/04/remotecopy-copy-from-remote-terminals-into-your-local-clipboard/)，随意谷歌周围的其他人。

    *   如果可用，请使用 X-forwarding 将本地剪贴板连接到远程剪贴板。* 

 ** * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-05-26T22:08:10.337

我在 stackoverflow 上的第一个答案，但我觉得这是一个很酷（虽然很小）的技巧，值得发布。所以这就是我所做的：

```
cat <filename> 
```

当文本打印到终端时，我用鼠标选择所有文本（鼠标滚动工作，因为我们在终端窗口上）。`Cmd`然后用+复制该文本`C`并粘贴到我的本地文本编辑器中。

这个技巧的唯一缺陷是，如果您的文件有数万行长，那么使用它是不切实际的，因为用鼠标选择所有行本身就是一项任务。但是对于约 2k 行的文件，它运行良好。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-02-24T08:31:02.860

有这个问题 - 通过 SSH 从 OSX 登录到 linux 机器，无法从用 vim 打开的文件中复制文本。

我的解决方法是`:set mouse=i`

默认情况下，鼠标在所有模式下都启用。当您将其设置为仅在插入模式下启用时，您可以在不编辑时滚动和复制（正常模式）但是当您开始编辑（通过按 I 或插入键）并进入插入模式时，鼠标充当光标放置你不能从终端复制。

您可以在 ~/.vimrc 中设置该选项

有关可以设置的值和模式的更多信息，请参阅 :help mouse。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-03-25T18:45:57.733

我的首选解决方案是通过 scp 从本地计算机使用 vim 编辑文件。

```
:e scp://remoteuser@server.tld//path/to/document 
```

这使您的缓冲区保持在本地，并可以轻松复制到本地剪贴板。

另一个优点是您可以使用本地 vim 设置（.vimrc 设置、插件等）

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-03-24T06:28:49.607

iTerm2 Shell Utilities 附带`it2copy`允许从远程服务器复制到客户端剪贴板。在远程服务器上安装 Shell Utilities 并确保已`Applications in terminal may access clipboard`检查。 [![在此处输入图像描述](../Images/794d7f1f2e36a35dcc1134a3a819b792.png)](https://i.stack.imgur.com/UIvNL.png)

然后，进入`visual mode`，选择文本并执行`<,'>:w !it2copy`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-22T00:57:47.237

在`vi`您 ssh 进入的终端中拉动，将这些行复制到远程机器上 vi 的内部缓冲区中，而不是复制到 Mac 的剪贴板中。

用你的鼠标。:)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-21T09:05:56.740

在 MacOS 上，当从机器 A SSH 到机器 B 并在机器 B 中使用 vim 时，我将其添加到`.vimrc`机器 B 中：

```
nmap yr :call system("ssh $machineA_IP pbcopy", @*)<CR> 
```

这样，在正常模式下，如果您将某些内容复制到 * register，然后键入`yr`，则 vim@machine_B 中 register 的内容将`*`复制到机器 A 的本地剪贴板，假设您已正确设置 Vim`+clipboard`并`*`注册

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-23T14:16:43.310

这是来自 romainl 的解决方案 #2 的更新。它创建 ssh 命令的别名，并在 remotecopyserver 未运行时启动它，并将 remotecopy(rclip) 安装在远程服务器中。简而言之，除了将下面的代码片段粘贴到您的 bash_profile 之外，您无需执行任何操作。

```
######################## For SSH Remote Copy #########################
export LC_SETUP_RC='command -v rclip >/dev/null 2>&1 || { echo "executing"; mkdir -p /usr/local/bin; if [ ! -f /usr/local/bin/rclip ];then wget https://raw.githubusercontent.com/justone/remotecopy/master/remotecopy -P /usr/local/bin/; ln -s /usr/local/bin/remotecopy /usr/local/bin/rclip; chmod +x /usr/local/bin/remotecopy; fi; if [[ \":\$PATH:\" == *\"/usr/local/bin:\"* ]]; then export PATH=/usr/local/bin:$PATH; fi } > /var/log/rclip.log 2>&1 || echo "Some error occured in setting up rclip. check /var/log/rclip.log"'

ssh_function() {
count="`ps -eaf | grep remotecopyserver | grep -v grep | wc -l`";
if [ "$count" -eq "0" ]; then 
   mkdir -p $HOME/bin;
   if [ ! -f $HOME/bin/remotecopyserver ]; then 
      wget https://raw.githubusercontent.com/justone/remotecopy/master/remotecopyserver -P $HOME/bin;
      chmod +x $HOME/bin/remotecopyserver;
   fi;
   nohup $HOME/bin/remotecopyserver & 
fi;
ssh_cmd=`which ssh`
PARAMS=""
for PARAM in "$@"
do
  PARAMS="${PARAMS} \"${PARAM}\""
done
bash -c "ssh ${PARAMS} -R 12345:localhost:12345 -t 'echo \$LC_SETUP_RC | sudo bash; bash -l'"
}
alias ssho=`which ssh`
alias ssh=ssh_function
alias ssh2=ssh_function

vssh_function() {
ssh_config=`vagrant ssh-config`;
if [ "$?" -eq "1" ]; then
echo "Problem with Vagrant config. run 'vagrant ssh-config' to debug"
return 1
fi
PORT=`echo "$ssh_config" | grep Port | grep -o "[0-9]\+"`; 
ID_FILE=`echo "$ssh_config" | grep IdentityFile | awk '{print $2}'`
ssh2 -q -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o PasswordAuthentication=no -i $ID_FILE vagrant@localhost -p $PORT "$@"
}
alias vssh=vssh_function 
```

激活别名后，您通常可以使用 ssh 并且当您需要从 vim 复制到本地剪贴板时，请使用

```
:w !rclip 
```

将整个文件复制到剪贴板

```
:'<,'> !rclip 
```

从视觉模式复制选定的行。每当它要求提供密钥时，您都必须按“Cmd+V”或“Ctrl+V”。

# 奖金

对于那些在 Vagrant 上工作的人，有一个包装器***vssh***它将执行***vagrant ssh***但也会启动和安装必要的组件。

# 参考

最新代码片段在这里 - [https://gist.github.com/ningsuhen/7933b206b92fc57364b2](https://gist.github.com/ningsuhen/7933b206b92fc57364b2)

[http://endot.org/2011/12/04/remotecopy-copy-from-remote-terminals-into-your-local-clipboard/](http://endot.org/2011/12/04/remotecopy-copy-from-remote-terminals-into-your-local-clipboard/)

[https://github.com/justone/remotecopy](https://github.com/justone/remotecopy)

# 注意事项

别名包装了 ssh 命令，可能会出现一些意想不到的问题。`ssho`如果您需要在没有整个 remotecopyserver 的情况下执行 ssh，则可用。或者，您可以使用别名 ssh2 并保持 ssh 命令不变。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-03-08T07:09:34.020

如果行数很少溢出我的屏幕，我在使用鼠标复制 vim 文本期间经常使用的一个技巧是*最小化*(Cmd + '-') 文本。:) 尽量减少到您无法用眼睛看到的程度，但您可以一次性复制所有文本。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-28T11:36:43.590

或者，从终端写入`less [filename]`以将其写入终端。然后在按住 - 键的同时开始用鼠标进行选择`down-arrow`。然后你可以选择整个一堆。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-07-19T21:03:05.653

[https://github.com/ojroques/vim-oscyank](https://github.com/ojroques/vim-oscyank) + iTerm2 + tmux 在我的情况下工作，这是我的工作流程：

*   ssh 进入远程主机
*   打开一个新的 tmux 会话
*   打开 vim（或 neovim），并按照文档所述安装并配置[https://github.com/ojroques/vim-oscyank](https://github.com/ojroques/vim-oscyank)

我的 .vimrc 的某些部分

```
Plug 'ojroques/vim-oscyank'  " clipboard over ssh through tmux

" yank operation don't need to use the *" register (system clipboard)
set clipboard+=unnamedplus

autocmd TextYankPost * if v:event.operator is 'y' && v:event.regname is '' | OSCYankReg " | endif 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-06T21:20:31.990

我希望在这里改进我​​的解决方案，但会分享它，因为它似乎与其他一些解决方案相当。

在 Mac 上使用 iTerm2，连接到机器，运行 tmux，然后使用 Vim 编辑时，我在 Mac 上有一个垂直拆分的 iTerm2 窗口，我将它一直拉到一边以使其尽可能瘦。

然后，当我想从 Vim 复制文本时，我将单击 iTerm2 窗口的一小部分，然后返回并突出显示，然后从 Vim 复制文本。这对单行文本最有效。

如果有 tmux 垂直分割，高亮显示 Vim 缓冲区中的多行将无法正确换行，并将从另一个 tmux 窗口复制文本，但否则这对于复制我需要的 90% 非常有用，而无需退出 Vim , cat 文件，或做其他事情。

我也有充足的水平窗口空间，使小的 iTerm2 窗口不占空间。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-29T09:34:40.177

只需使用 MobaXterm。
我尝试了很多方法，但没有一个是容易的。所以我能找到的唯一解决方案是使用 MobaXterm。您可以查看所有文件并以任何您想要的方式打开它们。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-19T17:02:59.710

复制到本地机器最简单的方法是通过鼠标选择然后`CMD + c`复制。正如在[另一个答案](https://stackoverflow.com/a/10703012/2410203)中指出的那样，这有一些限制/缺点。因此，我寻找了替代方案，但在尝试了几个小时（未成功）使 X11 转发工作后，我想出了以下简单的解决方法（至少对于行号警告）来帮助鼠标复制。

添加以下内容以`.vimrc`轻松切换行号以进行鼠标复制：

```
nnoremap L :set invnumber <CR> 
```

您可以轻松地将 更改为`L`您希望成为快捷键的任何键。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2012-05-22T09:25:14.197

尝试其他剪贴板寄存器 - `"*y`.*

# objective-c - 检查 Flickr 提供的照片尺寸

> ID：10694518
> 
> 赞同：0
> 
> 时间：2012-05-22T00:56:06.907
> 
> 标签：objective-c, ios, flickr

我正在使用 objectiveflickr 从 flickr.photos.search 查询中提取图像列表。

我让它在我拉入缩略图和大尺寸图像的地方工作，但是有时图像没有可用的大尺寸，因此在应用程序中它显示 flickr 的图像不可用图像。我检查了通过 flickr API 返回的内容，并且 URL 是常规的 flickr URL，因此无法判断图像是否会以这种方式具有大图像。

我能想到的唯一方法是创建另一个目标 flickr 委托并让它执行 flickr.photos.getSizes API 调用并检查每张照片。

有人有其他建议吗？

这是我的代码：

```
- (void)flickrAPIRequest:(OFFlickrAPIRequest *)inRequest didCompleteWithResponse:(NSDictionary *)inResponseDictionary
{
    int requestedPhotoTotal = [[[inResponseDictionary objectForKey:@"photos"] valueForKey:@"perpage"] intValue];

    for (int i=0; i < requestedPhotoTotal; i++) 
    {
        NSDictionary *photoDict = [[inResponseDictionary valueForKeyPath:@"photos.photo"] objectAtIndex:i];

        NSString *title = [photoDict valueForKey:@"title"];
        NSURL *photoURL = [context photoSourceURLFromDictionary:photoDict size:OFFlickrLargeSize];
        NSURL *thumbURL = [context photoSourceURLFromDictionary:photoDict size:OFFlickrThumbnailSize];
        NSURL *photoSourcePage = [context photoWebPageURLFromDictionary:photoDict];

        Photo *p = [[PhotoStore sharedStore] createPhoto];
        [p setURL:photoURL];
        [p setThumbURL:thumbURL];
        [p setSource:photoSourcePage];
        [p setTitle:title];
        NSLog(@"%@ - %@", title, [photoURL absoluteString]);
    }

    [self showGallery];

} 
```

# javascript - Google maps API v3，多个自定义标记，具有不同的信息窗口

> ID：10694520
> 
> 赞同：0
> 
> 时间：2012-05-22T00:56:24.270
> 
> 标签：javascript

我一直在抨击这里的代码， [http://www.michiganwxsystem.com/tropics/active.html](http://www.michiganwxsystem.com/tropics/active.html)

```
function initialize() {
var myLatlng = new google.maps.LatLng(19.09, -99.09);
var myOptions = {
zoom: 3,
center: myLatlng,
mapTypeId: google.maps.MapTypeId.HYBRID
}

var map = new google.maps.Map(document.getElementById("trop_canvas"), myOptions);

var invest = new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/invest.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));

var tdimage = new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/td.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));

var tsimage = new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/ts.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));

var h1image =  new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/h1.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));
var h2image = new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/h2.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));
var h3image = new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/h3.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));
var h4image = new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/h4.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));
var h5image = new google.maps.MarkerImage("http://images.michiganwxsystem.com/symbols/h5.png",
new google.maps.Size(19, 22),
new google.maps.Point(0,0),
new google.maps.Point(9, 11));

var all = [[ "Tropical Storm Alberto","9", "2100 UTC MON MAY 21 2012", "1006","EAST","7","34.8", "30.5","-77.9","tsimage"],
[ "Tropical Depression Two-e","4", "2100 UTC MON MAY 21 2012", "1005","WESTNORTHWEST","5.2","30.4", "9.6","-101.0","tdimage"],
[ "Tropical Storm Three","3", "2100 GMT MON MAY 21 2012", "N/A","NORTHWEST","8","35", "12.4","144.4","tsimage"],
 ];
 var infoWindow = new google.maps.InfoWindow;
 function infoCallback(infowindow, marker) { 
      return function() {
        infowindow.open(map, marker);
      };
    }
  function setMarkers(map, all) {   
      for  (var i in all) {                                             
        var name    = all[i][0];
        var adv = all[i][1];
        var advdate     = all[i][2];
        var press   = all[i][3];
        var mvt     = all[i][4];
        var speed   = all[i][5];
        var maxwind     = all[i][6];
        var lat  = all[i][7];
        var lng = all[i][8];
        var mapicon = all[i][9];
        var latlngset;
        latlngset = new google.maps.LatLng(lat, lng);

        var marker = new google.maps.Marker({
    position: latlngset,
    map: map,
    icon:  mapicon ,
    draggable: false,
    });

        var content = '<div class="info"> ' + name + 
'<div style="text-align:left; font-size:.77em;">Adv# ' + adv + ' Date ' + advdate + '<br />' +
'Pressure: ' + press + '<br />' +
'Movement: ' + mvt + ' @ ' + speed + '<br />' +
'Winds: ' + maxwind + ' </div></div>';      

        var infowindow = new google.maps.InfoWindow();
          infowindow.setContent(content);
          google.maps.event.addListener(marker,'click',infoCallback(infowindow, marker)
          );
      }
    }

    // Set all markers in the all variable
    setMarkers(map, all);
   };

     google.maps.event.addDomListener(window, 'load', initialize); 
```

任何人都有任何想法，如果我删除自定义图标并使用默认图钉它可以工作，但这不是我想要的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:17:33.230

If you debug your program by inserting a temporary `console.info( mapicon );` in your loop, you'll see that the `mapicon` variable is a **string** (having values of "tsimage", "tdimage" and "tsimage"). In other words, mapicon is **not** a variable of the type google.maps.MarkerImage but it should be.

Alter your `var all` variable and change "tsimage" into tsimage (remove quotes, so it's not a string), so it points to your previous variable. Something (reduced version) like this:

```
var all = [
    [
        "Tropical Storm Alberto"
        ...
        "30.5",
        "-77.9",
        tsimage
    ],
... 
```

See this jsfiddle for a working example: [http://jsfiddle.net/RjDDg/](http://jsfiddle.net/RjDDg/)

# ruby-on-rails-3 - form_tag 或 form_for 用于更新外部 API？导轨 3.2

> ID：10694522
> 
> 赞同：2
> 
> 时间：2012-05-22T00:56:36.330
> 
> 标签：ruby-on-rails-3, shopify

当连接到外部 json api 并提交表单以更新资源时，使用 form_for 或 form_tag 更好吗？

具体来说，我正在使用 Shopify API [http://api.shopify.com/](http://api.shopify.com/)

在 config/routes.rb 中，我使用 resources :variants 创建了默认资源路由，现在我正在尝试制作一个更新变体资源的表单，但无法将表单配置为具有正确的操作。

==== 更新 ====

是的，有一个 shopify API gem：[https](https://github.com/Shopify/shopify_api) ://github.com/Shopify/shopify_api完成了大部分繁重的工作 - 只是无法弄清楚如何使其工作。

要更新 @variant 对象，我需要在此处放置：`PUT /admin/variants/#{id}.json`

但我不能完全正确地构造 form_tag。我有这些路线：

```
rake routes:

variants     GET    /variants(.:format)           variants#index
             POST   /variants(.:format)           variants#create
new_variant  GET    /variants/new(.:format)       variants#new
edit_variant GET    /variants/:id/edit(.:format)  variants#edit
variant      GET    /variants/:id(.:format)       variants#show
             PUT    /variants/:id(.:format)       variants#update
             DELETE /variants/:id(.:format)       variants#destroy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T12:21:14.533

您的应用程序是否定义了模型？如果是这样，您应该可以使用**form_for**。如果没有，那么您必须使用**form_tag**。

**form_for**将 Model 实例作为参数（因此得名）。表单字段的输出更简洁，因为**form_for**可以从模型中推断出很多信息。您还可以使用**fields_for**进行嵌套表单。

如果使用**form_tag**，则需要编写更多代码来正确构造 HTTP 参数，以便 Rails 可以在服务器上重建 params 哈希。

# sql - Sql 连接表示法：这相当于内部连接还是完全连接？

> ID：10694527
> 
> 赞同：4
> 
> 时间：2012-05-22T00:57:33.087
> 
> 标签：sql, syntax

```
 select  a.somefield, b.someotherfield
 from    a, b
 where   a.key = b.key 
```

以上是否等同于：

```
 select  a.somefield, b.someotherfield
 from    a join b on a.key = b.key 
```

或者：

```
 select  a.somefield, b.someotherfield
 from    a full join b on a.key = b.key 
```

我很确定它相当于一个内部连接，但只是意识到我以前从未真正考虑过它。另外我想知道是否有任何边缘情况不是100％等效的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T01:00:59.633

最初的概念等价于内连接。

使用“where”语法，任何外连接（左外连接、右外连接、全外连接）都没有标准等效项。Oracle 支持“+”语法，表示左外连接和右外连接。

此外，在 where 子句中省略条件相当于交叉连接。

但是，您应该习惯在 from 子句中使用连接语法。一旦习惯了它，查询的意图就会更加清晰，并且更不容易出错。

# java - 索引越界异常：无法弄清楚发生了什么？作业

> ID：10694528
> 
> 赞同：1
> 
> 时间：2012-05-22T00:57:35.417
> 
> 标签：java, arrays, arraylist, indexoutofboundsexception

这是我第一次使用 stackoverflow 来解决我需要问的问题，所以希望我能得到一些帮助。这是我正在做的一项学校作业，虽然我已经把它上交了，并且很快就会彻底改变代码，但我想先弄清楚哪里出了问题。这基本上是一个购买历史程序，其中存储了过去的购买，并且可以通过“下一步”和“返回”按钮作为收据进行访问。没有文件访问，所有数据都是随机生成的。随机数据生成不是作业的要求，但我想这样做作为一种学习体验。

关于这个问题，这个错误是怎么回事？

```
 Exception in thread "AWT-EventQueue-0" java.lang.IndexOutOfBoundsException: Index: 9, Size: 9
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at farmmark.Storage.getItems(Storage.java:36)
at farmmark.Gui.buttonActionNext(Gui.java:415)
at farmmark.Gui$ButtonHandler.actionPerformed(Gui.java:632)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6290)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6055)
at java.awt.Container.processEvent(Container.java:2039)
at java.awt.Component.dispatchEventImpl(Component.java:4653)
at java.awt.Container.dispatchEventImpl(Container.java:2097)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4575)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4236)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4166)
at java.awt.Container.dispatchEventImpl(Container.java:2083)
at java.awt.Window.dispatchEventImpl(Window.java:2482)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:648)
at java.awt.EventQueue.access$000(EventQueue.java:84)
at java.awt.EventQueue$1.run(EventQueue.java:607)
at java.awt.EventQueue$1.run(EventQueue.java:605)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$2.run(EventQueue.java:621)
at java.awt.EventQueue$2.run(EventQueue.java:619)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:618)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
    BUILD SUCCESSFUL (total time: 6 seconds) 
```

代码很多，可能这里发的太多了，所以这里附上源码的链接： [http ://www.mediafire.com/?3ogc334vwh6t7k6](http://www.mediafire.com/?3ogc334vwh6t7k6)

以下是发生错误的代码点：

在farmmark.Storage.getItems（Storage.java:36）

```
public static String[] getItems(int select)
{
    return itemList.get(select);
} 
```

在farmmark.Gui.buttonActionNext(Gui.java:415)

```
String items[] = Storage.getItems(counter); 
```

在farmmark.Gui$ButtonHandler.actionPerformed(Gui.java:631)

```
else if(sel.equals("Next"))
        {
            jtxtItems.setText(null);
            jtxtPrices.setText(null);
            jtxtSkus.setText(null);
            jtxtCase.setText(null);
            jtxtVend.setText(null);
            panel.removeAll();
            buttonActionNext();
        { 
```

任何帮助都会很棒，请记住，我只用 Java 编程了 8 周：P。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:05:35.310

您需要查看`farmmark.Gui$ButtonHandler.actionPerformed(Gui.java:632)`并看到该值被传递给`Gui.buttonActionNext()`，因为该值被传递给`Storage.getItems()`最终命名一个大于列表大小 (-1) 的索引。

也有可能列表 ( `Storage.itemList`) 中没有项目开始，在这种情况下，无论传递的值如何，您都会收到此异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:06:10.910

这里是看的地方：

```
at farmmark.Storage.getItems(Storage.java:36) 
```

这是方法：

```
public static String[] getItems(int select)
{
    return itemList.get(select);
} 
```

的值`select`小于零或大于`(itemList.length-1)`。

在调试器中运行，在该行设置断点，然后查看发生了什么。

我看不到 itemList 或 select 的设置位置。看看这些方法。

只是好奇-为什么该方法是静态的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:06:31.627

嗯，看来你有很多东西要学。在您尝试访问您的列表项之前，先做一个小检查，如下所示：

```
public static String[] getItems(int select)
{
    if (select < itemList.size()) {
        return itemList.get(select);
    } else {
        throw RuntimeException("We cannot access an item that does not exist");
    }
} 
```

然后，尝试找出调用代码尝试访问不存在的项目的原因。阅读堆栈跟踪，它会准确地告诉您问题出在哪里。

# c# - 访问标签文本属性在 asp.net 中给出错误

> ID：10694535
> 
> 赞同：1
> 
> 时间：2012-05-22T00:58:11.230
> 
> 标签：c#, asp.net

我正在从后面的代码中生成 10 个标签，当我运行页面时我可以看到它们。但是当我尝试访问 label.text 属性时它会出错。它给出了这个错误 System.NullReferenceException: Object reference not set to an instance of an object。

```
for (int hf = 1; hf <= dfta2.Rows.Count; hf++)
                    {
                        Label lbl = new Label();
                        lbl.ID = "labeltest" + hf;
                        lbl.Text = "1";
                        lbl.ClientIDMode = System.Web.UI.ClientIDMode.Static;                                        
                        form1.Controls.Add(lbl);
                    }
     string variable3 = "labeltest" + i;

     Label lbl2 = form1.FindControl(variable3) as Label;

     lbl2.Text = "2"; 
```

每次单击按钮时，i 都会增加 1。知道为什么它为 null 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:06:53.737

您发布的代码必须放在 Page_Load 或 Page_Init 事件中并验证变量*i*的值。

你试一试，

```
i=2;
string variable3 = "labeltest" + i;
Label lbl2 = form1.FindControl(variable3) as Label; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:08:26.307

确保上面代码中的变量 i == hf

# php - PHP解析对象（stdClass）响应

> ID：10694542
> 
> 赞同：2
> 
> 时间：2012-05-22T00:59:28.947
> 
> 标签：php, parsing

我正在使用 wsdl 文件，并从整个过程中学到了很多东西。

我正在实例化 SoapClient：

```
$webservice = new SoapClient("mainwsdl.wsdl");
var_dump($webservice->AccountsGetXML()); 
```

下面是回复，我对解析数据还是有点陌生​​。

```
object(stdClass)#2 (3) {
  ["AccountsGetXMLResult"]=>
  object(stdClass)#3 (1) {
    ["any"]=>
    string(391) "<AccountsWSDS xmlns=""><ERRORS><ERROR_ID>1</ERROR_ID><TABLE_NAME>Accounts</TABLE_NAME><TABLE_ID>NoID</TABLE_ID><ROW_ID>-1</ROW_ID><COLUMN_ID>EXCEPTION</COLUMN_ID><ERROR_TYPE>E</ERROR_TYPE><ERROR_CODE>0</ERROR_CODE><ERROR_TEXT>Error connecting to database - please contact ABC Customer Services.  Msg: Object reference not set to an instance of an object.</ERROR_TEXT></ERRORS></AccountsWSDS>"
  }
  ["rowCount"]=>
  NULL
  ["pageCount"]=>
  NULL
} 
```

我以前没有玩过 object(stdClass) 响应。或者，如果我有，我已经忘记了。

我想我需要解析 ["AccountsGetXMLResult"] 以获取特定信息，还需要解析 ["rowCount"] 和 ["pageCount"]。

我很困惑＃2（3）是什么。

无论如何，这是我解析数据的尝试。我从 AccountsGetXMLResult 开始：

```
echo $webservice->AccountsGetXMLResult; 
```

这是我回来的。
**PHP 注意：未定义的属性：SoapClient::$AccountsGetXMLResult in /apache/test.php on line 23**

很明显，我需要帮助来分析反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:16:40.670

`$webservice->AccountsGetXML()` *返回*`stdClass`具有您在 var 转储中看到的属性的类型对象。`stdClass`只是一个“空占位符类”，没有任何自己的预定义属性或方法。要访问您看到的属性，请处理的*返回*值`$webservice->AccountsGetXML()`：

```
$obj = $webservice->AccountsGetXML();
var_dump($obj->AccountsGetXMLResult);
var_dump($obj->AccountsGetXMLResult->any); 
```

这也像这样工作：

```
echo $webservice->AccountsGetXML()->AccountsGetXMLResult->any; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T00:54:06.207

试试这个：

```
$result = json_decode(json_encode(simplexml_load_string($webservice->AccountsGetXML()->AccountsGetXMLResult->any)),TRUE);

print_r($result); 
```

# openssl - 如何使用 openssl 从电子邮件验证 DKIM 签名？

> ID：10694544
> 
> 赞同：4
> 
> 时间：2012-05-22T00:59:46.420
> 
> 标签：openssl, dkim

我已经为我的 postfix 设置了 opendkim，现在所有外发邮件都有 DKIM-Signature 标题。我想要做的是手动验证，没有 DNS 和外部实用程序，最好只使用 openssl，消息正在获得正确的签名。所以作为输入数据我有：

*   电子邮件的 DKIM 签名标头
*   DKIM 选择器，DKIM 域
*   DKIM 私钥
*   DKIM 公共签名，如果我需要将记录的形式放入 DNS

问题是如何使用诸如 openssl 之类的 CLI 实用程序使用 DKIM 公共签名解密和/或验证 DKIM 签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-02T18:24:59.273

## 直接从电子邮件的来源验证

*   下载电子邮件，通常是一个`.eml`文件

*   安装蟒蛇

*   `pip install dkimpy`

*   `dkimverify < email_file.eml`

    或者，您可以

    *   `dkimverify`
    *   粘贴源
    *   `Ctrl`+`D`

[来源](https://github.com/madacol/knowledge/blob/master/How%20to%20verify%20email%20DKIM%20signatures.md)

## 其他方法

*   Install **thunderbird**, configure your account, and install the Add-on [Dkim verifier](https://addons.thunderbird.net/en-US/thunderbird/addon/dkim-verifier/)
*   If you want to massively verify an **mbox** archive [https://github.com/associatedpress/verify-dkim](https://github.com/associatedpress/verify-dkim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T23:45:55.790

可以做到，但它很复杂，实用程序是最好的方法，但如果你坚持，这里是如何做到的。

1.  准备验证所需的标头，并在末尾添加 dkim-signature，但不包含实际的签名哈希。

2.  根据使用的规范化算法规范化标头。

3.  如果为主体设置了限制，则需要将其剪切然后将其规范化。

4.  计算正文哈希，如果它与 dkim 签名中的相同，则继续。

5.  使用 OpenSSL 通过提供以下参数来验证标头哈希：

    一种。标头哈希。

    湾。规范化的标头。

    C。公钥

    d。使用的散列算法（SHA1 或 SHA256）。

我无法为您提供示例命令，因为我使用了 PHP 的 openssl_verify() 函数来执行此操作。

***如果您告诉我您是否已经这样做以及如何做到这一点，我将不胜感激。***

# mysql - if else 在 mysql 查询中

> ID：10694545
> 
> 赞同：2
> 
> 时间：2012-05-22T00:59:59.233
> 
> 标签：mysql, if-statement, identifier

假设我想在表中插入一条记录。每条记录都有一个 ID（不是唯一的）我想检查两列（比如说名字和姓氏），如果这些列已经在我的表中，则使用该 ID，除非为新记录使用另一个 ID。
换句话说，我想说如果名称是新的，则分配一个新的 ID，否则分配该记录的 id。（不用担心新的 id，假设我每条记录都有一个原始 id）
例如假设我的表中有以下记录：

```
FirstName | LastName  | Location | Age ... | ID
John      | Smith     | Canada   | 12 ...  | 1234
John      | Smith     | US       | 21 ...  | 1234 
```

现在我想添加另一个 John Smith。所以我想要新记录的相同 ID。如果我想添加 Paul Smith，我想要一个新的 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:56:39.460

```
INSERT INTO YourTable (FirstName, LastName, Location, ID)
SELECT new.FirstName, new.LastName, new.Location, IFNULL(present.ID, new.ID)
FROM 
(SELECT 'John' AS FirstName
 , 'Smith' AS LastName
 , 'UK' AS Location
 , 1111 AS ID) AS new
LEFT OUTER JOIN YourTable AS present
ON present.FirstName = new.FirstName
AND present.LastName = new.LastName
ORDER BY present.ID DESC
LIMIT 1; 
```

[SQLFiddle](http://sqlfiddle.com/#!2/4ce02/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:35:37.410

您可以使用[`IFNULL`](http://dev.mysql.com/doc/refman/4.1/en/control-flow-functions.html#function_ifnull)获取当前值或在缺少该值时使用新值。

```
INSERT INTO your_table (id, first_name, last_name, other_stuff) VALUES (
    ( SELECT IFNULL (
        ( SELECT id FROM your_table WHERE first_name = 'John' AND last_name = 'Doe'),
        'new_id'
        ),
    ),
    'John',
    'Doe',
    'Your other data'
) 
```

尽管在我看来，您正在尝试为每个名字/姓氏组合分配一个唯一的 ID。根据您的用例，可能有更好的方法来做到这一点（如果我是对的），例如，将 id <-> 名称映射保留在单独的表中，并且只使用您所指的表中的 id这个帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:16:44.040

```
INSERT .... ON DUPLICATE KEY UPDATE 
```

您还可以为重复键指定不同的操作以满足您的需要。我相信您要检查的字段需要被索引才能工作。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T01:26:26.487

```
CASE WHEN EXISTS (SELECT * FROM `names` WHERE `first`=$first AND `last`=$last) THEN (SELECT MAX(`id`) FROM `names` WHERE `first`=$first AND `last`=$last) ELSE $new_id 
```

...是您问题的最接近的字面答案。但是，在您的情况下，这可能会更好：

```
IFNULL(SELECT MAX(`id`) FROM `names` WHERE `first`=$first AND `last`=$last, $new_id) 
```

`CASE WHEN`是一个实际的 if-then-else 结构，而`IFNULL`（或等效地，`COALESCE`）仅在未找到任何内容时提供默认值。

# php - jquery ajax在被调用后将不起作用

> ID：10694546
> 
> 赞同：1
> 
> 时间：2012-05-22T01:00:10.573
> 
> 标签：php, jquery, ajax

以下 jquery 将不起作用，因为它被另一组 ajax 调用。单选按钮显示，但选择后，它不会打开 URL calendar.html。但是，如果我试图打开这个文件而不让另一组 ajax 调用它，它工作得非常好，并且 URL calendar.html 会很好地打开。

有人可以帮忙吗？我听说过 bind 和 live 但对成功合并它的了解还不够。谢谢

```
$(document).ready(function() {

$('.button').click(function() {
    var valueSelected = this.value;
    var buttonSelected = this.id.replace(valueSelected + '_','');
    //alert('Button Selected: ' + buttonSelected + "\nValue Selected: " + valueSelected);
    $.ajax({

    url: 'calendar.html',           
        data:  '',
        cache: false,
    async: false,
        success: function(result) {
            $('#ajaxDiv').html(result);

        },
        error: function (response, desc, exception) {
            // custom error
        }
    });

}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:05:11.803

好吧，对于初学者来说，您不需要 data 属性，默认情况下它是空的。

没有任何错误突然出现在我身上，但您应该确保您拥有正确的 calendar.html 路径（确保它与 JavaScript 加载到的 .html 文档相关）。

# objective-c - NSMutableArray 包含要包含的特定对象类

> ID：10694548
> 
> 赞同：0
> 
> 时间：2012-05-22T01:00:22.693
> 
> 标签：objective-c, nsmutablearray

有什么方法可以指定可以包含哪些特定类型的对象`NSMutableArray`？

**编辑**更具体地说...*有没有办法限制对象必须属于的类？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:59:57.330

好吧，你总是可以继承子类`NSMutableArray`，但正如其他人所说，很难想象有什么好的理由这样做......

从[文档中的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)**子类化注释**中，您基本上必须覆盖以下函数并检查正确的类：

*   插入对象：atIndex：
*   添加对象：
*   替换ObjectAtIndex：withObject：
*   NSArray 类的原始方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:21:03.460

您可以在将对象添加到数组之前检查对象的类。

```
NSMutableArray *myArray = [NSMutableArray alloc] init];

if ([someObject isKindOfClass:[ClassYouWantInArray class]]){

    [myArray addObject:someObject];
} 
```

# c++ - 在编写 C++ 成员定义时，是否有任何理由更喜欢将它们放在命名空间块中而不是完全限定它们，反之亦然？

> ID：10694549
> 
> 赞同：1
> 
> 时间：2012-05-22T01:00:39.073
> 
> 标签：c++, fully-qualified-naming

在 C++ 类中，我们可以用两种风格中的任何一种来编写我们的成员。我们可以将它们放在命名空间块内，或者我们可以完全限定每个。

**有什么理由更喜欢一种风格而不是另一种风格？**

头文件如下所示（bar.h）：

```
namespace foo
{
    class Bar
    {
    public:
        Bar();
        int Beans();
    };
} 
```

样式 1 (bar.cpp) -*命名空间块内的声明*：

```
#include "bar.h"
namespace foo
{
    Bar::Bar()
    {
    }

    int Bar::Beans()
    {
    }
} 
```

样式 2 (bar.cpp) -*完全限定声明*：

```
#include "bar.h"

foo::Bar::Bar()
{
}

int foo::Bar::Beans()
{
} 
```

所以我的问题，再次，是：**有什么理由更喜欢一种风格而不是另一种风格？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:21:37.330

Here's a possible answer that was posted by James Kanze in answer to [another similar question](https://stackoverflow.com/a/6984606/385094). *(edit: note from the comment thread, this only applies to non-member functions)*.

Prefer the fully qualified form (style 2).

Functions written in this style are explicitly a definition, not a declaration.

That is to say, using Style 2, if you accidentally define a function with incorrect arguments, you'll get a compiler error alerting you to that fact.

Using Style 1, if you define a function with incorrect arguments it will define a different function. It will compile fine, but you'll get a linker error explaining that the method is not defined. This will probably be harder to diagnose than the compiler error resulting from Style 2.

# php - 无法移动/罚款 APC 上传的文件

> ID：10694550
> 
> 赞同：0
> 
> 时间：2012-05-22T01:00:50.737
> 
> 标签：php, javascript, wordpress, apc

由于 Javascript 表单的后续操作[不会提交](https://stackoverflow.com/questions/10678784/javascript-form-wont-submit/)（要查看我正在使用的代码，请访问该链接），我现在遇到了一个问题，即我找不到已上传的文件。

我已添加`$files = apc_fetch('files_'.$_POST['APC_UPLOAD_PROGRESS']);`到页面顶部，这是`print_r($files);`

```
Array
(
    [theFile] => Array
        (
            [name] => tt1.mp4
            [type] => video/mp4
            [tmp_name] => /tmp/php2BEvy7
            [error] => 0
            [size] => 1050290
        )
) 
```

但是，当我尝试运行以下代码时：

```
if (file_exists($files['theFile']['tmp_name'])) {

    $webinarType = strcmp($files['theFile']['type'], 'video/mp4');

    if($webinarType == 0) {

        $webinarFile = $fileTitle;
        $webinarTempName = $files['theFile']['tmp_name']; 

    } else {

        echo 'Webinar must be .mp4';

    }

} else {

    echo "No File";

} 
```

我得到了`No File`输出。

我已经 ssh'd 进入服务器并且文件不在`/tmp/`，`/path/to/public_html/tmp/`或者`path/to/file/tmp/`所有这些都存在。

我曾尝试使用`move_uploaded_file()`，但由于这是在所有输入上执行的，由于我对 javascript 的了解有限，`file`我无法动态获得。`tmp_name`

tl;博士版; 我的文件去哪儿了，我怎样才能找到它？

笔记; 这种形式在 APC 发明之前确实有效，我正在运行 wordpress 以防影响任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:45:45.660

我自己也修复了这个。

在`progress.php`文件中（在另一个问题上找到）我`elseif`用这个修改了语句：

```
elseif(($s_progressId = $_POST['APC_UPLOAD_PROGRESS']) || ($s_progressId = $_GET['APC_UPLOAD_PROGRESS']))
{
    // If the file has finished uploading add content to APC cache
        $realpath = realpath($PHP_SELF); 
        $uploaddir = $realpath . '/tmp/';
        foreach ($_FILES as $file) {            

            if(!empty($file['name'])) {

                $uploaded_file = $file['name'];
                $moveme = $uploaddir.$uploaded_file;

                move_uploaded_file($file['tmp_name'], $moveme);

            }    

        }

        apc_store('files_'.$s_progressId, $_FILES);
        die();
} 
```

这样我就可以在不知道输入名称的情况下遍历`$_FILES`数组。我注意到它循环了几次，因此`if(!empty())`事后看来它可能是最佳实践。

# asp.net - 如何验证用户登录的密码

> ID：10694551
> 
> 赞同：0
> 
> 时间：2012-05-22T01:00:57.157
> 
> 标签：asp.net, asp.net-membership

我有以下代码来检查有效用户：

```
protected void Login_LoginError(object sender, EventArgs e) {
    //See if this user exists in the database 

    MembershipUser userinfo = Membership.GetUser(Login.UserName);

    if (userinfo == null || !userinfo.IsApproved || userinfo.IsLockedOut) {
        //The user entered an invalid username/password...
        Login.FailureText = "Invalid User/Password";
    } else {
        Login.FailureText = string.Empty;
    }
} 
```

当用户的密码错误时，此代码不会显示失败文本，我需要代码隐藏逻辑来验证用户和密码！任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:15:17.130

您应该在登录控件上使用 Authenticate 处理程序。有关更多阅读，请参阅[此链接](http://www.c-sharpcorner.com/uploadfile/raj1979/login-control-in-Asp-Net-3-5/)

如果您使用开箱即用的 MembershipProvider，您可以使用Authenticate 处理程序中的[Membership.ValidateUser 方法对您的用户进行身份验证。](http://msdn.microsoft.com/en-us/library/system.web.security.membership.validateuser.aspx)

# javascript - JQuery - 使用 .on 插入元素

> ID：10694557
> 
> 赞同：6
> 
> 时间：2012-05-22T01:02:33.983
> 
> 标签：javascript, jquery

我有一个为特定对象创建工具提示的函数。目前，我在 ajax 插入后运行一个工具提示函数来创建和附加新的工具提示对象。我很好奇是否有办法使用 .on() 在插入时自动运行工具提示功能，而不是手动运行它。

例如：

```
 $('[title]').on('inserted', function(){
     tooltip(this);
 }); 
```

我做了一些阅读，看起来自定义触发器可能是要走的路，但如果存在这样的东西我会很高兴:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:13:15.000

这是根据请求的**伪代码。**

```
$(document).ready(function() {
    $('body').on('added','*',function() {
        console.log($(this),'has been added');
    });
    $('body').append('<div>This is the first div</div>');
});

(function($) {
    fncs = {
        append:$.fn.append,
        appendTo:$.fn.appendTo
        // etc.
    }
    // we're assigning the original functions in this
    // object to be executed (applied) later
    $.fn.append = function() {
        fncs.append.apply(this,arguments);
        $(this).children().last().trigger('added');
        return $(this);
    }
    $.fn.appendTo = function() {
        fncs.appendTo.apply(this,arguments);
        return $(this);
        // no need to trigger because this function calls the one
        // above for some reason, and it's taking care of the
        // triggering the right element(s I think)
    }
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:40:01.100

这不是您要查找的响应，但我不会直接在元素上附加工具提示。相反，我会为我希望工具提示在鼠标悬停时显示的类使用一个类，并`.on()`以下列方式使用事件处理程序：

```
$('body').on('mouseover','.tooltip',function() {
    // show tooltip
    console.log($(this).data('tooltip'));
    return false;
}).on('mouseout','.tooltip',function() {
    // hide tooltip
    return false;
}); 
```

因此，无论您添加到正文中（不一定是直接子级）都会触发此事件处理程序。

我可能只是创建一个附加函数来将工具提示数据与类一起分配给每个元素。

```
$.fn.extend({
    tooltip:function(text) {
        text = text || '';
        return $(this).each(function() {
            $(this).data('tooltip',text).addClass('tooltip');
        });
    }
});

$('#someID').tooltip("Click me!");
$('button').tooltip("I'm a button"); 
```

# c# - 为什么 TweetSharp 总是只返回 100 个关注者？

> ID：10694566
> 
> 赞同：2
> 
> 时间：2012-05-22T01:04:27.590
> 
> 标签：c#, twitter, tweetsharp

我在 .NET 4 (C#) 应用程序中使用[TweetSharp库。](https://github.com/danielcrenna/tweetsharp)

这是我构建的一个帮助方法，它返回给定用户的关注者。

```
public static void FindFollowersForUser(TwitterUserModel twitterUser)
{
                                            //A simple string for screen name.
    var followers = service.ListFollowersOf(twitterUser.TwitterName);
    foreach (var follower in followers)
    {
                   //Followers is a simple List<string>.
        twitterUser.Followers.Add(follower.ScreenName);
    }
} 
```

代码运行良好，但使用断点我发现即使用户有超过 100 个关注者（我在官方网站上查看），我的应用程序中的对象也只有 100 个。

有没有办法使用 TweetSharp 为 Twitter 用户获取所有关注者？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T01:16:40.407

您需要通过光标：

```
var followers = service.ListFollowersOf(twitterUser.TwitterName, -1);
while (followers.NextCursor != null)
{
    followers =  service.ListFollowersOf(user_id, followers.NextCursor);
    foreach (var follower in followers)
    {
         twitterUser.Followers.Add(follower.ScreenName);
    }
} 
```

您可以在一些测试中看到这一点：[https ://github.com/danielcrenna/tweetsharp/blob/master/src/net40/TweetSharp.Next.Tests/Service/TwitterServiceTests.cs](https://github.com/danielcrenna/tweetsharp/blob/master/src/net40/TweetSharp.Next.Tests/Service/TwitterServiceTests.cs)

# android - 出版商的 Android 市场搜索中断？

> ID：10694568
> 
> 赞同：3
> 
> 时间：2012-05-22T01:04:39.973
> 
> 标签：android

许多应用程序刚刚崩溃，也许谷歌改变了一些东西？[http://developer.android.com/guide/publishing/publishing.html](http://developer.android.com/guide/publishing/publishing.html)上的文档说

```
 <URI_prefix>search?q=pub:<publisher_name> 
```

应该工作，并且直到最近才工作。其他人有这个问题吗？使用市场：// 链接？它没有找到任何结果，我也尝试过其他出版商。我的 Google Play 应用程序可能有问题，还是这会影响所有人？也许他们破坏了转移到 Google Play 的东西？

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T01:42:58.350

**更新：文档现在似乎已经[修复](http://developer.android.com/distribute/tools/promote/linking.html#OpeningPublisher)。** *感谢@Meh 在他的评论中指出这一点。*

> 要创建链接，您需要知道您的*发布者名称*，该名称可从[Developer Console](https://play.google.com/apps/publish/)获得。
> 
> 从一个网站：
> 
> > [http://play.google.com/store/search?q=pub](http://play.google.com/store/search?q=pub)：
> 
> 从 Android 应用程序：
> 
> > `market://search?q=pub:<publisher_name>`
> 
> 这是一个例子：
> 
> > [https://play.google.com/store/search?q=pub:Google Inc.](https://play.google.com/store/search?q=pub:Google%20Inc.)
> 
> 有关如何在 Android 应用程序中发送链接的详细信息，请参阅[从 Android 应用程序链接](http://developer.android.com/distribute/tools/promote/linking.html#android-app)。

**以前的答案：**

我找到了造成你麻烦的原因。当专门使用发布者名称时，它现在需要区分大小写。例如，这有效：[http ://play.google.com/store/search?q=pub:Zynga](http://play.google.com/store/search?q=pub:Zynga)

但这不是：[http ://play.google.com/store/search?q=pub:zynga](http://play.google.com/store/search?q=pub:zynga)

但是，如果您只是一般地搜索 zynga，即使您的搜索词全部为小写，它仍然有效。[http://play.google.com/store/search?q=zynga](http://play.google.com/store/search?q=zynga)

现在的行为是如此不一致。我会说这是一个错误（或者如果不是错误，那么至少应该在文档中阐明这种古怪的行为）。

# javascript - 验证我的 node.js 实例是 dev 还是 production

> ID：10694571
> 
> 赞同：74
> 
> 时间：2012-05-22T01:04:52.970
> 
> 标签：javascript, node.js, express, cloud9-ide, joyent

现在，每当我想将 node.js 服务器部署到我的生产服务器时，我都需要更改所有 IP/DNS/用户名/密码，以便与我的数据库和外部 API 进行各种连接。

这个过程很烦人，有没有办法验证当前运行的 node.js 实例是在 cloud9ide 还是我的生产joyent smartmachine？

如果我能够确定（在我的运行代码中）我的 node.js 实例正在哪个服务器上运行，我将添加一个将值设置为 prod 或 dev 的条件。

谢谢

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-05-22T09:27:49.857

通常，您应该像这样在生产中运行节点应用程序：

`NODE_ENV=production node app.js`

使用 Express、Socket.IO 和其他应用程序`process.env.NODE_ENV`来找出环境。

在开发中，您可以省略它并使用`node app.js`.

您可以像这样在代码中检测环境：

```
var env = process.env.NODE_ENV || 'development';
loadConfigFile(env + '.json', doStuff); 
```

资源：

[如何检测 express.js 应用程序中的环境？](https://stackoverflow.com/questions/8449665/how-do-you-detect-the-environment-in-an-expressjs-app)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-22T03:12:34.647

我认为设置环境的最简单方法是将命令行参数传递给您的应用程序。

```
node ./server.js dev 
```

在您的脚本中，您需要处理此参数并设置您需要的配置。

```
var env = process.argv[2] || 'dev';
switch (env) {
    case 'dev':
        // Setup development config
        break;
    case 'prod':
        // Setup production config
        break;
} 
```

另外，我创建了一个[模块](https://github.com/baryshev/configjs)，使配置过程更容易一些。也许它会帮助你。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-27T08:07:19.750

实际上，我不建议将数据库连接信息、密码、访问令牌等配置值存储在实际应用程序代码中，原因如下：

1.  硬编码这些值使得以后很难更改它们。您必须发布新版本的应用程序才能更改这些值。

2.  这是严重的安全违规，因为生产级配置数据和密码不应该存储在代码中。泄露这些敏感数据非常容易。

更好的方法是将这些数据外部化并在执行期间将其传递给您的应用程序。这通常通过环境变量来完成。您只需为需要在不同环境之间更改的每个数据和平定义唯一的环境变量。

例如：`DB_HOST`, `DB_USER`, `DB_PASSWORD`。然后您可以通过这种方式将这些值传递给生产中的应用程序：

```
$ NODE_ENV=production DB_HOST=1.2.3.4 DB_USER=someusername DB_PASSWORD=somerandompassword /bin/node app.js 
```

实际上，这些值可以被加密并添加到代码库中，然后在部署期间解密。但是，请确保解密密钥安全地存储在部署系统中或由发布工程师以交互方式提供。[Shippable 允许](http://docs.shippable.com/ci/env-vars/#secure-variables)开箱即用。

在开发环境中它变得更简单，因为你可以使用非常方便的[`dotenv`模块](https://github.com/motdotla/dotenv)。只需在项目的根目录中创建一个`.env`文件并将所有变量添加到其中：

```
DB_HOST=1.2.3.4
DB_USER=someusername
DB_PASSWORD=somerandompassword 
```

但是，请确保将其从您的 VCS 中排除，因为每个开发人员可能都希望拥有个人配置。您可以创建一个`.env.dist`文件来包含默认配置，以后可以将其用作模板：`cp .env.dist .env`.

# forms - 如何从 ExtJS 4 中的商店动态创建 form.Fields

> ID：10694580
> 
> 赞同：1
> 
> 时间：2012-05-22T01:05:43.737
> 
> 标签：forms, extjs4, store

我有两家商店，`Assessor.store.Question`和`Assessor.store.Choice`，以及它们各自的模型和代理。按预期从服务器加载数据。我也有一个`Assessor.view.QuizCards`具有“卡片”布局的面板。这很好用，我可以创建虚拟卡，并使用控制器`Assessor.view.QuestionCard`很好地浏览它们。`Assessor.controller.Quiz`

我需要帮助的是以编程方式在我的`QuizCards`面板中填充来自`Questions`和`Choices`商店的问题和选择。我已经尝试了基于文档我能想到的所有东西，但绝对没有成功。

具体来说，我希望on a`"value"`成为商店/模型的属性。中的值应该来自关联的商店/模型。`"displayfield"``QuestionCard``"text"``Question``"boxlabel"``"radiogroup"``Choice`

详细代码如下。感谢您提供的任何指导。

```
Ext.define('Assessor.controller.Quiz', {
    extend: 'Ext.app.Controller',
    itemId: 'quizcontroller',
    models: ['Question', 'Choice'],
    stores: ['Question', 'Choice'],
    views: ['QuestionCard'],
// Constants, kinda
    NUM_QUESTIONS: 4,
// Custom Functions
    /**
     * create store instances
     */
    createStores: function(){
        if (Ext.getStore('questionstore') == null) {
            var qs = Ext.create('Assessor.store.Question');
            qs.load();
        };
        if (Ext.getStore('choicestore') == null) {
            var cs = Ext.create('Assessor.store.Choice');
            cs.load();
        };
    }, //end createStores
    /**
     * update buttons
     */
    updateButtons: function(){
        var index = this.getCardIndex();
        var nb = Ext.ComponentQuery.query('#nextbutton')[0];
        var pb = Ext.ComponentQuery.query('#prevbutton')[0];
        var fb = Ext.ComponentQuery.query('#finishbutton')[0];
        if (index<this.NUM_QUESTIONS) {
            nb.enable();
            fb.disable();
        } else {
            nb.disable();
            fb.enable();
        };
        if (index>0){
            pb.enable();
        } else {
            pb.disable();
        };
    }, //end updateButtons
    /**
     * get active question card index
     */
    getCardIndex: function(){
        return (Ext.ComponentQuery.query('quizcards')[0].getLayout().activeItem.itemId.split('-')[1]);
    },
    /**
     * set active question card index
     */
    setCardIndex: function(index){
        Ext.ComponentQuery.query('quizcards')[0].getLayout().setActiveItem('questioncard-'+index);
    },
    /**
     * start the quiz
     */
    startQuiz: function(args) {
        this.createQuestionCards();
        var sb = Ext.ComponentQuery.query('#startbutton')[0];
        sb.disable();
        this.updateButtons();
    },
    /**
     * create the UI cards with questions from server.
     */
    createQuestionCards: function() {
        var qc =  Ext.ComponentQuery.query('quizcards')[0];
        for (i=0; i<this.NUM_QUESTIONS; i++) {
            card = Ext.create('Assessor.view.QuestionCard');
            card.itemId = 'questioncard-' + i.toString();
            qc.add(card);
        };
        this.updateButtons();
    },
    /**
     * finishQuiz -- finishes and scores the quiz
     * @param {Object} args
     */
    finishQuiz: function(args) {
        this.localState.set('quizFinished', true);
    },
    //
    nextQuestion: function(args) {
        console.log('\nnextQuestion');
        var cardlayout = Ext.ComponentQuery.query('quizcards')[0].getLayout();
        var activeIndex = cardlayout.activeItem.itemId.split('-')[1];
        console.log(activeIndex);
        if (activeIndex < this.NUM_QUESTIONS) {
            activeIndex++;
            this.setCardIndex(activeIndex);
        };
        this.updateButtons();
    },
    //
    prevQuestion: function(args) {
        console.log('\nprevQuestion');
        var cardlayout = Ext.ComponentQuery.query('quizcards')[0].getLayout();
        var activeIndex = cardlayout.activeItem.itemId.split('-')[1];
        console.log(activeIndex);
        if (activeIndex > 0) {
            activeIndex--;
            this.setCardIndex(activeIndex);
        };
        this.updateButtons();
    },
     //
     init: function(){
         this.control({
            '#nextbutton': {
                click: this.nextQuestion
            },
            '#prevbutton': {
                click: this.prevQuestion
            },
            '#startbutton': {
                click: this.startQuiz
            },
            '#finishbutton': {
                click: this.finishQuiz
            },
        })
    }
})

Ext.define('Assessor.view.QuizCards', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.quizcards',
    itemId: 'quizcards',
    layout: 'card',
    activeItem: 0,
    items: []
})

Ext.define('Assessor.view.QuestionCard', {
    extend: 'Ext.form.Panel',
    alias: 'widget.questioncard',
    layout: 'anchor',
    items: [{
        xtype: 'displayfield',
        itemId: 'questionfield',
        name: 'questionfield',
        fieldLabel: 'Question',
        value: ''
    }, {
        xtype: 'radiogroup',
        itemId: 'choicegroup',
        columns: 1,
        vertical: true,
        items: [{
            boxLabel: '',
            name: 'choice',
            value: 1
        }, {
            boxLabel: (100*Math.random()),
            name: 'choice',
            value: 2
        }, {
            boxLabel: (100*Math.random()),
            name: 'choice',
            value: 3
        }]
    }]
})

Ext.define('Assessor.store.Question', {
    extend: 'Ext.data.Store',
    autoLoad: true,
    autoSync: true,
    model: 'Assessor.model.Question',
    storeId: 'questionstore'
})

Ext.define('Assessor.model.Question', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id', type: 'int'},
        {name: 'text', type: 'string'},
        {name: 'resource_uri', type: 'string'}
    ],
    proxy: {
        type: 'rest',
        url: '/api/v1/question/',
        headers: {
            'accept':'application/json',
            'content-type':'application/json'
        },
        noCache: false,
        reader: {
            type: 'json',
            root: 'objects',
            idAttribute: 'id'
        },
        writer: {
            type: 'json'
        }
    }
}) 
```

选择模型和商店相似，如果需要我会发布它们。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:17:25.710

我首先建议的是变得`Assessor.view.QuestionCard`更聪明。我会`initComponent`在那里重写并在施工期间从商店传递记录。这样，您将拥有在内部创建特定 UI 元素的所有逻辑，`Assessor.view.QuestionCard`并可以这样称呼它：

```
card = Ext.create('Assessor.view.QuestionCard', {
   questionRecord: rec,
   lastQuestion: true/false...
   ... whatever else you need 
}) 
```

# java - CardLayout 与手动添加/删除 JPanel 有什么特别之处？

> ID：10694584
> 
> 赞同：15
> 
> 时间：2012-05-22T01:06:13.877
> 
> 标签：java, swing, jpanel, layout-manager, cardlayout

在 StackOverflow 上有很多次用户问这样的问题......

> 我有一个`JPanel`包含 child的 main `JPanel`。当用户单击一个按钮时，孩子`JPanel`应该更改为不同的`JPanel`. 我怎样才能做到这一点。

很多时候，用户实际上已经尝试过实现这个问题，但不能让它工作。

每当我回答这个问题时，我都会告诉他们做这样的事情（简单地说）......

```
JPanel myFrame = new JPanel();
myFrame.remove(oldPanel);
myFrame.add(newPanel); 
```

我认为这是一个相当合理的答案，而且我个人在我自己的许多 Java 项目中都使用过它，没有任何问题。但是，我的回答总是遭到反对，每个人都只是说“使用 a `CardLayout`”。

所以我的问题是，为什么每个人都如此着迷`CardLayout`，以至于我的回答值得一票否决？为什么我应该选择使用 a`CardLayout`而不是使用上面的代码添加/删除面板？

作为另一个问题，您是否仍然建议`CardLayout`使用具有动态 JPanel 的接口。例如，我的大多数程序都实现了一个自定义插件框架，其中可能有数百个`JPanels`，但我只加载和显示实际需要的面板。对于程序的正常使用，大多数面板实际上永远不会被加载或需要。对于这种类型的场景，我的编码方法会是最好的解决方案吗？据我所知，`CardLayout`这需要我实际创建所有的，`JPanels`即使大多数永远不会被使用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-22T01:16:28.793

*   使用 CardLayout，松散耦合更容易（尽管使用自己的滚动并非不可能）
*   对于 CardLayout，持卡人的首选尺寸是其持有的最大卡的尺寸。
*   CardLayout 更难实现，并且允许几乎微不足道的连续组件交换其`next()`和`prev()`方法。
*   您可以轻松地将所需的组件与常量相关联——无需`Map<String, Component>`为此目的创建一个，因为它已经为您准备好了。我并没有不经常为此使用枚举。
*   无需记住调用`repaint()`和`revalidate()`交换组件时。
*   它专为并允许轻松重用组件而设计。

不过，我无法解释拒绝投票的原因，除非他们不高兴，否则您没有提到需要记住打电话`repaint()`和`revalidate()`交换组件时。您必须询问反对者是否有足够的勇气做出回应。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T01:18:33.877

`CardLayout`已经过彻底测试并证明有效。它正确获取[组件树锁](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getTreeLock%28%29)并执行组件[验证](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#validate%28%29)，以确保不会出错。您的解决方案虽然在大多数情况下可能有效，但在某些情况下会失败。

这一切都归结为重新发明轮子：当这样一个久经考验的课程已经可用时，你为什么要这样做？

# iphone - 使用 uiwebview 创建富文本 uitableviewcell

> ID：10694585
> 
> 赞同：1
> 
> 时间：2012-05-22T01:06:30.163
> 
> 标签：iphone, ios, uitableview, uiwebview

好吧，基本上我试图将一个字符串传递给恰好是 html 格式的 uiwebview，但是我使用**loadHTMLString:myHTML 将它传递给 uiwebview**。

我遇到的问题是我根本看不到任何文字。我已经设置了一个自定义视图，然后我删除了该视图，添加了一个 uitableviewcell，然后在单元格内我添加了一个 uiwebview。然后，我将相关类设置为我想在其中显示 tableviewcell 的类，然后将我的 getter/setter 链接到 tableviewcell 和 tableviewcell 内的 uiwebview。

然后这是我尝试设置uiwebview的富文本的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (indexPath.section == 0) {
        if (indexPath.row == 0) {

            // Set cell height
            [self tableView:tableView heightForRowAtIndexPath:indexPath];

            // Configure the cell using custom cell
            [[NSBundle mainBundle] loadNibNamed:@"SearchCellHtml" owner:self options:nil];
            cell = searchCellHtml;

            // pass in some data into myHTML
            myUIWebView = [[UIWebView alloc] init];

            NSString *myHTML = @"<html><body><h1>Hello, world!</h1></body></html>";
            [myUIWebView loadHTMLString:myHTML baseURL:nil];

            //Disclosure Indicator
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        } 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:12:04.763

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (indexPath.section == 0) {
        if (indexPath.row == 0) {

            [self tableView:tableView heightForRowAtIndexPath:indexPath];

            // load the cell ?
            cell = [[NSBundle mainBundle] loadNibNamed:@"SearchCellHtml" owner:self options:nil];

            myUIWebView = [[[UIWebView alloc] init] autorelease]; // autorelease

            NSString *myHTML = @"<html><body><h1>Hello, world!</h1></body></html>";
            [myUIWebView loadHTMLString:myHTML baseURL:nil];

            //add webView to your cell
            myUIWebView.frame = cell.bounds;
            [cell addSubview:myUIWebView];

            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        } 
```

# lotus-notes - 如何在 XPage 中显示版权符号？

> ID：10694587
> 
> 赞同：5
> 
> 时间：2012-05-22T01:06:43.330
> 
> 标签：lotus-notes, xpages

这似乎应该很简单。当我将其作为文本输入时，使用转义序列`&copy;`不起作用。XPages 引擎不断转义 & 字符，导致字符串被写为文字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T03:26:49.953

XPages 是 XML，它不知道 HTML 转义字符，因此`&copy;`符号的“转义”。在设计输出 HTML 的 XSLT 样式表时，我偶然发现了同样的问题。应该工作的是：`&#169;`. 您是在 XPage 的源代码中植入代码还是计算它？如果您计算它，请确保选择“HTML”选项（转义=false），而不是纯文本。

让我们知道怎么回事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T01:11:21.190

Can you use the copyright symbol directly? © (Unicode code point U+00A9.)

[Wikipedia has several other options that may also work](http://en.wikipedia.org/wiki/Copyright_symbol).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T07:44:48.973

您可以在 xp:text 上关闭转义

```
<xp:text escape="false">
   <xp:this.value><![CDATA[&copy]]></xp:this.value>
</xp:text> 
```

# gwt - 如何将 GWT 的 Editor Framework 与 gwt-platform 一起使用？

> ID：10694589
> 
> 赞同：8
> 
> 时间：2012-05-22T01:06:50.850
> 
> 标签：gwt, gwt-platform, gwt-editors

我正在使用 gwt-platform 并尝试实现 GWT 的编辑器框架。但我不能从演示者内部得到它。网上有一些答案，说我必须以某种方式将 EditorDriver 注入 Presenter，但我不知道该怎么做......

目前我尝试了这个但没有成功：

```
public class MyPresenter extends Presenter<MyPresenter.MyView, MyPresenter.MyProxy> implements MyUiHandlers {
    public interface MyView extends View, HasUiHandlers<MyUiHandlers>, Editor<MyModel> {}

    @ProxyStandard
    @NameToken(NameTokens.myPage)
    @NoGatekeeper
    public interface MyProxy extends ProxyPlace<MyPresenter> {} 

    interface Driver extends SimpleBeanEditorDriver<MyModel, MyView> {}
    private Driver editorDriver;
    DispatchAsync dispatcher;

    @Inject
    public MyPresenter(EventBus eventBus, MyView view, MyProxy proxy, DispatchAsync dispatcher) {
        super(eventBus, view, proxy);
        getView().setUiHandlers(this);
        this.dispatcher = dispatcher;

        MyModel m = new MyModel();
        m.setId(1L);
        m.setUsername("username");
        m.setPassword("password");

        editorDriver = GWT.create(Driver.class);
        editorDriver.initialize(this.getView());
        editorDriver.edit(m);
    }

    ...
} 
```

如果我明确指定 ViewImplementation，它就可以工作，但这不是 MVP 应该工作的方式：

```
interface Driver extends SimpleBeanEditorDriver<MyModel, MyViewImpl> {}

...

editorDriver.initialize((MyViewImpl) this.getView()); 
```

如果有人能给我一个如何做正确的例子，我会很好。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T09:31:09.983

类似于早期版本的[费用示例](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/expenses/src/main/java/com/google/gwt/sample/expenses/client/place/ProxyEditView.java?r=8946)中使用的方法对我有用：

视图应该实现的接口。使用通配符是为了让演示者不需要知道具体的视图实现：

```
import com.google.gwt.editor.client.Editor;
import com.gwtplatform.mvp.client.View;

/**
 * Implemented by views that edit beans.
 *
 * @param <B> the type of the bean
 */
public interface BeanEditView<B> extends View, Editor<B> {

  /**
   * @return a new {@link SimpleBeanEditorDriver} initialized to run
   *         this editor
   */
  SimpleBeanEditorDriver<B, ?> createEditorDriver();
} 
```

您的演示者现在应该看起来像这样：

```
public class MyPresenter extends Presenter<MyPresenter.MyView, MyPresenter.MyProxy> implements MyUiHandlers {
    public interface MyView extends BeanEditView<MyModel>, HasUiHandlers<MyUiHandlers> {}

    @ProxyStandard
    @NameToken(NameTokens.myPage)
    @NoGatekeeper
    public interface MyProxy extends ProxyPlace<MyPresenter> {} 

    private SimpleBeanEditorDriver<MyModel, ?> editorDriver;
    DispatchAsync dispatcher;

    @Inject
    public MyPresenter(EventBus eventBus, MyView view, MyProxy proxy, DispatchAsync dispatcher) {
        super(eventBus, view, proxy);
        getView().setUiHandlers(this);
        this.dispatcher = dispatcher;

        MyModel m = new MyModel();
        m.setId(1L);
        m.setUsername("username");
        m.setPassword("password");

        editorDriver = getView().createEditorDriver();
    }

    ...
} 
```

以及视图实现：

```
public class MyViewImpl extends ViewWithUiHandlers<MyUiHandlers> implements
    MyPresenter.MyView {

  public interface Binder extends UiBinder<Widget, MyViewImpl> { }
  private static Binder uiBinder = GWT.create(Binder.class);

  /**
   * The driver to link the proxy bean with the view.
   */
  public interface EditorDriver extends SimpleBeanEditorDriver<MyModel, MyViewImpl> { }

  private final Widget widget;

  public MyViewImpl() {
    widget = uiBinder.createAndBindUi(this);
  }

  @Override
  public SimpleBeanEditorDriver<MyModel, ?> createEditorDriver() {
    EditorDriver driver = GWT.create(EditorDriver.class);
    driver.initialize(this);
    return driver;
  }

  @Override
  public Widget asWidget() {
    return widget;
  }

  ...
} 
```

这与我使用 GWT 的编辑器框架所能达到的 MVP 一样接近。我找不到让视图实现不知道模型的方法，但我认为这不是真的必要。

如果有人对此有任何改进，我很高兴听到。

* * *

在 GWT Editors 上找到了一些额外的评论。似乎不可能完全分离模型。[正如 Thomas Broyer 在回答](https://stackoverflow.com/a/7915674/862411)另一个编辑问题时所说：

> “MVP 不是一成不变的（甚至没有定义；它是由 Martin Fowler 创造的，但他放弃了这个术语，转而支持两种更具体的模式），所以你只是违反了你给自己制定的规则。换句话说，编辑器框架作为一个整体可以被视为违反 MVP：每个编辑器都知道模型，不一定知道它正在编辑的确切实例（如 ValueAwareEditor 或 LeafValue），但至少知道它是编辑器的对象类型。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:57:36.193

问题是 Driver.class 传递给 GWT.create

```
editorDriver = GWT.create(Driver.class); 
```

必须是包含所有子编辑器的具体类，即所有 uibinded 小部件。

一种解决方案如下：

视图接口扩展了模型对象的编辑器接口

```
public interface MyView extends View, ..., Editor<MyModel> 
```

视图实现 MyViewImpl 定义了一个驱动类型

```
interface MyDriverImpl extends SimpleBeanEditorDriver<MyModel,MyViewImpl> 
```

驱动程序在 MyViewImpl 中由

```
SimpleBeanEditorDriver<MyModel,MyView> driver = GWT.create(MyDriverImpl.class); 
```

父类型

```
SimpleBeanEditorDriver<MyModel,MyView> 
```

可用于将驱动程序的引用传递给演示者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:55:08.793

MVP 说您使用演示器将模型与视图完全分离。此外，我想说您的方法将逻辑放在视图中......我希望有另一种解决方案；）

# c++ - 如何从 Cocoa 中“脱离”并使用 C/C++ 开发 Mac OpenGL 应用程序？

> ID：10694594
> 
> 赞同：6
> 
> 时间：2012-05-22T01:07:31.720
> 
> 标签：c++, xcode, macos, opengl, glut

我希望开始使用 C 或 C++ 进行一些 3D 编程。我遇到的问题是，我可以找到的唯一适用于 Mac OS 的教程似乎使用了 Objective C 和 Cocoa 框架。我想或多或少地获得与 Windows 用户相同的环境。

如果我尝试使用文本编辑器和 g++ 编译器，我会丢失标题，但是，如果我尝试使用 Xcode，我将不得不与 Cocoa 作斗争，这让我很沮丧。我真的不明白为什么预装在 Mac 上的 OpenGL/GLUT 会强迫我使用 Xcode，但没有它我似乎无法获得头文件。

我如何才能通过所有 Apple 的“开发人员友好”界面来编写一些具有完全跨平台可移植性的老式代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:31:34.970

如果您想使用 OSX/Cocoa 的最新优势，Objective-C 的某些部分是不可避免的。将现有应用程序移植到 MacOS 的最简单方法如下：

1.  在 Objective-C 中编写“基本”的 nibles 应用程序。它只是一个 AppDelegate 类和 main() 函数中的一些设置
2.  在 AppDelegate 的 didFinishLaunching 事件处理程序中创建的窗口中添加自定义 NSGLView 后代
3.  在 NSGLView 初始化中设置 CVDisplayLink 和渲染回调
4.  在 CVDisplayLink 的回调中使用现有的 OpenGL 渲染代码

现在是有趣的部分：从哪里获得所有这些？

令人惊讶的是，OSX 的 QEMU 端口（是的，模拟器）的 UI 是一个很好的简单应用程序示例。Apple 的官方 GLEssenstialPractices 演示还显示了设置 OpenGL 渲染管道所需的所有信息。其余的都取决于你。

可以在 Mark Dalrymple 的“Advanced Mac OS X Programming”一书中找到对系统级 OSX 编程的详细而现代的介绍。它解释了很多事情，在阅读了所有这些之后，我已经理解了操作系统中的大部分设计决策（如果你从性能的角度考虑，它真的会让你接受所有“非标准”的事情）。

为了完成“nibless”编程，我建议你阅读这样的博客文章[http://blog.kleymeyer.com/2008/05/creating-cocoa-applications-programatically-ie-nib-less/](http://blog.kleymeyer.com/2008/05/creating-cocoa-applications-programatically-ie-nib-less/)谷歌搜索有很大帮助。

相同的技巧适用于 CocoaTouch/iOS，并且在 SO 上回答了很多问题，例如[Cocoa touch/Xcode - generate NIB-less graphics context](https://stackoverflow.com/questions/4016621/cocoa-touch-xcode-generating-nib-less-graphics-context)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T15:23:54.080

如果您想创建跨平台应用程序，您可以使用命令行工具模板创建一个项目。接下来，导入 OpenGL 和 GLUT 框架。这将为您提供一个带有所需 OpenGL 和 GLUT 标头的“空白”C++ 项目。

Lighthouse 3D 为您提供了一些关于可移植性以及如何启动您的第一个项目的提示。 [http://www.lighthouse3d.com/tutorials/glut-tutorial/initialization/](http://www.lighthouse3d.com/tutorials/glut-tutorial/initialization/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-17T18:16:59.770

我创建了一个软件层（名为`cocoglut`），它允许将基本或基本的 GLUT 调用转换为 COCOA。这个库允许从 C/C++ 应用程序创建/销毁窗口并注册回调，只需使用 GLUT 调用，而不需要 nib 文件或 XCode 项目文件（并且可以从命令行编译）。此选项使用全视网膜显示分辨率。源代码在[GitHub 上](https://github.com/carlos-urena/cocoglut/wiki)。

# php - PHP/AJAX：单击图像时更改数据库（mysql）中的值

> ID：10694595
> 
> 赞同：1
> 
> 时间：2012-05-22T01:07:33.920
> 
> 标签：php, javascript, ajax, onclick, phpmyadmin

我目前正在从事一个几乎完成的项目，但还有一个问题需要解决，这非常关键。

**我要做的是在我单击某个图像时更改数据库中的值（activeID）。**

我知道我需要 php 和 javascript，但是我的 javascript 技能不是很好，如果有人可以帮助我，那就太棒了！

为了帮助大家理解，这里是**数据库中表的结构：**

```
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

CREATE TABLE IF NOT EXISTS `artikel` (
  `Titel` varchar(100) CHARACTER SET utf8 NOT NULL,
  `ArtikelID` int(255) NOT NULL,
  `content` text CHARACTER SET utf8 NOT NULL,
  `imagepath` varchar(255) CHARACTER SET utf8 NOT NULL,
  `activeID` int(11) NOT NULL,
  `thumbpath` varchar(255) CHARACTER SET utf8 NOT NULL,
  `shortcontent` text CHARACTER SET utf8 NOT NULL,
  `categorie` varchar(10) CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`ArtikelID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `artikel` (`Titel`, `ArtikelID`, `content`, `imagepath`, `activeID`, `thumbpath`, `shortcontent`, `categorie`) VALUES
('Zware hinder op E313 door dodelijk ongeval in Geel', 1, 'Het ongeval gebeurde rond 12 uur. Er had zich een file gevormd doordat de afrit Geel-West is afgesloten wegens werken.', 'images/bin1.jpg', 0, 'images/bin1thumb.jpg', 'Op de E313 richting Antwerpen is vandaag ter hoogte van de afrit Geel-West.', 'bin'),
('België geeft 12 miljoen voor heropbouw Afghanistan na 2014', 2, 'Eind 2014 trekt de NAVO zich terug uit Afghanistan. De militairen dragen dan de verantwoordelijkheid voor de veiligheid definitief over aan de Afghaanse veiligheidstroepen.', 'images/bin2.jpg', 0, 'images/bin2thumb.jpg', 'Na de terugtrekking van de Belgische militairen uit Afghanistan eind 2014 zal België voor maximaal 12 miljoen euro bijdragen aan de heropbouw van het land.', 'bin'),
('Oppositie hekelt gebrek aan visie en groei in debat begrotingscontrole', 3, 'De controle was nodig omdat de regering bij de initiële begroting 2012 uitgegaan was van een economische groei van 0,8% van het bbp, terwijl dat cijfer in de economische begroting van februari teruggebracht werd 0,1%.', 'images/bin3.jpg', 0, 'images/bin3thumb.jpg', 'De plenaire Kamer buigt zich vandaag over de begrotingscontrole die het begrotingstekort voor 2012 moet beperken tot 2,8 procent van het bbp, overeenkomstig het stabiliteitsprogramma. Daarvoor was een inspanning van 1,8 miljard euro nodig.', 'bin')

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

这是**我用于数据库的连接：**

```
<?php 

        session_start();

        $sHost = "localhost";
        $sUser = "root";
        $sPassword = "";
        $sDatabase = "project";

        $link = mysqli_connect($sHost, $sUser, $sPassword, $sDatabase) or die("MySQL Error: " . mysqli_error());  

?> 
```

**这是我必须从数据库中获取内容的 php 和 html 代码，请注意，通过每个记录的路径调用了一个图像**（只有您看到的第一个 select 语句与该主题相关，因为我已将其余的 HTML 代码以保持主题简短）：

```
 <?php

                //session_start();

                //include("classes/connection.php");
                include_once("classes/connection.php");

                $getBinnenland = mysqli_query($link,"SELECT * FROM artikel WHERE categorie = 'bin';");
                //$getBuitenland = mysqli_query($link,"SELECT * FROM artikel WHERE categorie = 'bui';");
                //$getSport = mysqli_query($link,"SELECT * FROM artikel WHERE categorie = 'spo';");
                //$getPolitiek = mysqli_query($link,"SELECT * FROM artikel WHERE categorie = 'pol';");
                //$getMilieu= mysqli_query($link,"SELECT * FROM artikel WHERE categorie = 'mil';");
                //$getBizar = mysqli_query($link,"SELECT * FROM artikel WHERE categorie = 'biz';");

                ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
                <html xmlns="http://www.w3.org/1999/xhtml">
                <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <title>Digital Press overview</title>
                <link rel="stylesheet" href="style.css" type="text/css" />
            </head>

            <body>

                <div id="wrapper">
        <ul id="Binnenland">            
                    <?php
                    if(mysqli_num_rows($getBinnenland) > 0)
                    {       
                        while($Binnenland = mysqli_fetch_assoc($getBinnenland))
                        {
                            echo "<li><a href='#'><h3>".$Binnenland['Titel']."</h3><img src='". $Binnenland['thumbpath'] ."' alt='thumbnail'/></a><p>".$Binnenland['shortcontent']. "</p>";

                        }
                    }
                    else
                    {
                        echo "<li>Nog geen designs</li>";   
                    }

                    ?>
        </ul>
</div>
</body> 
```

**所以现在的问题：如果我单击某个图像，我希望它将该记录的 activeID 更改为 1 而不是 0，如果我再次单击它，我希望它变回 0**

我不知道如何开始这个，所以非常欢迎任何帮助，提前感谢所有帮助我的人！问候

# 编辑

我已经实现了下面答案中的代码，没有错误，但数据库也没有更改 activeID。有谁知道我能做些什么来解决这个问题？

onclick 事件：

```
echo "<li><a href='#'><h3>".$Binnenland['Titel']."</h3><img onClick = 'javascript: setActive();' src='". $Binnenland['thumbpath'] ."' alt='thumbnail'/></a><p>".$Binnenland['shortcontent']. "</p>"; 
```

的JavaScript：

```
 <script type="text/javascript">
function setActive()
{
if (window.XMLHttpRequest)
   {
   xmlhttp=new XMLHttpRequest();
   }
 else
   {
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   } 
 xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
         //Return Value. Handle as you wish. Display or ignore.
         var x = xmlhttp.responseText;
     }
   }
 xmlhttp.open("POST","setActive.php",true);
 xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
 xmlhttp.send(p_str);
  }
</script> 
```

setActive.php 文件：

```
<?php            

    session_start();           

    $sHost = "localhost";           
    $sUser = "root";           
    $sPassword = "";           
    $sDatabase = "project";           

    $link = mysqli_connect($sHost, $sUser, $sPassword, $sDatabase) or die("MySQL Error: " . mysqli_error());             

     $res = mysqli_fetch_row(mysqli_query($link,"select activeID from artikel"));
     $active = $res[activeID];
     $activeID = ($active == 0) ? 1 : 0; 
     $res = mysqli_query($link,"update artikel set activeID = $activeID");
     if ($res) echo "Success, ActiveID = $activeID";
          else echo "Failure, unable to update ActiveID to $activeID";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:49:33.700

**这里是 Artikel.php。太平洋标准时间 12:40 最新发布**

```
<?
mysql_connect("xxxxxxxxxxx", "xxxxxxxxxx", "xxxxxxxxx");  
mysql_select_db("xxxxxxxx");  

$res = mysql_query("select * from artikel");  
$fcount = mysql_fetch_assoc(mysql_query("select count(*) as count from artikel"));  

while ($Binnenland =  mysql_fetch_assoc($res)) { 
    $jS = '"'.$Binnenland[ArtikelID].'"'; 
    echo "<font size=2 face='Century Gothic'><center><li><b>ARTICLE ID: ".$Binnenland['ArtikelID']."</b><br><font size=2><a href='#'><h3>".$Binnenland['Titel']."</h3><a href='javascript:setActive(".$jS.")'> <img src='$Binnenland[thumbpath]' width=75 style='border: 0px; -moz-border-radius: 8px; border-radius: 8px' alt='thumbnail'></a><p>".$Binnenland['shortcontent']. "</p></center>"; 
    echo "<span style='color: black;' id='".$Binnenland[ArtikelID]."'><center><font face='Century Gothic'>ActiveID: ".$Binnenland[activeID]."</font></center><br><br><hr></span>";
} 

?> 

<script type="text/javascript">  

function setActive(ObjID)  {  

if (window.XMLHttpRequest)  {  
    xmlhttp=new XMLHttpRequest();  
}  
else  
{  
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");  
}   

xmlhttp.onreadystatechange=function()   {  

if (xmlhttp.readyState==4 && xmlhttp.status==200)  
      {  

        //Return Value. Handle as you wish. Display or ignore.  
        var x = xmlhttp.responseText; 

        if (document.getElementById(ObjID).style.color == 'black') document.getElementById(ObjID).style.color='red';
                else document.getElementById(ObjID).style.color='black';

        document.getElementById(ObjID).innerHTML = '<center><font face="Century Gothic">ActiveID: ' + x + '</font></center><br><br><hr>'; 
      }  
}  
    var p_str = "a="+ObjID; 
    xmlhttp.open("POST","setActive.php",true);  
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");  
    xmlhttp.send(p_str);  
}  

</script> 
```

**这里是 setActive.php**

```
<?php              

mysql_connect("xxxxx", "xxxxx", "xxxxxx");  
mysql_select_db("xxxxx"); 
$ArtikelID = $_REQUEST[a]; 

$res = mysql_query("select activeID from artikel where ArtikelID = ".$ArtikelID);  
$row = mysql_fetch_assoc($res); 

$active = $row[activeID];  
$activeID = ($active == 0) ? 1 : 0;   
$res = mysql_query("update artikel set activeID = $activeID  where ArtikelID = ".$ArtikelID);  

if ($res) echo $activeID;  
       else echo "Failure, unable to update ActiveID to $activeID";  
?> 
```

# python - How do I debug Python Google API interface?

> ID：10694597
> 
> 赞同：2
> 
> 时间：2012-05-22T01:07:50.960
> 
> 标签：python, google-api, google-api-python-client

I am trying to debug my interface with Google Calendar API v3\. I am writing my code in python and using the API examples I can find. I want to make sure that I am sending the correct html string to the API. I see how the code is building the string and inserting parameters, but I don't know what the actual string is getting sent in the `execute()` command.

Is there a way to print the html string that is getting sent rather than executing? Examples please.

```
http = httplib2.Http(cache=".cache")
http = credentials.authorize(http)

service = build("moderator", "v1", http=http)

series_body = {
    "description": "Share and rank tips for eating healthy and cheap!",
    "name": "Eating Healthy & Cheap",
    "videoSubmissionAllowed": False
    }

# How Do I print the string rather than execute?
series = service.series().insert(body=series_body).execute()
print "Created a new series" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:27:16.597

您可以设置`httplib2.debuglevel = 4`在标准输出上打印标题和请求/响应正文：

[http://code.google.com/p/google-api-python-client/wiki/Debugging](http://code.google.com/p/google-api-python-client/wiki/Debugging)

# linux - Bash 概念问题

> ID：10694600
> 
> 赞同：2
> 
> 时间：2012-05-22T01:09:20.783
> 
> 标签：linux, bash

我是 linux 和 bash 的新手，我正在处理一些不同的脚本，但我有一些概念性的问题需要回答，以帮助我找到我想做的最佳方法。

1.  将数据存储在 bash 脚本中并将其另存为文件的最有效方法是什么，另一个脚本可以快速解析？

2.  有哪些彩色 bash 菜单的好例子？如何在 bash 中拥有多列菜单？

3.  我可以在 bash 中显示图像还是将图像信息发送到（比如说通知发送）并让它显示任何图像会更好？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:18:40.127

那是一大堆问题:-)

`bash`首先，在脚本中存储数据的最有效方式*完全*取决于数据和您想要对其进行的处理。如果处理将自行完成`bash`，它可能会在`bash`变量中更快（大小允许）。如果外部程序喜欢`grep`，`sed`或者`awk`将在 的指导下处理它`bash`，一个文件可能会更好。

但这是一个*非常*普遍的指导方针——您需要分析数据及其使用，特别是因为*它*在文件中的存储方式也很重要。例如，如果我单独处理固定长度的记录，我不会将其存储为 XML 文件`bash`，因为这意味着我必须为 shell 编写大量的 XML 处理代码。我可能只是将它作为固定长度的记录存储在一个平面文件中。

其次，我没有给你的例子，因为它`bash`往往是一个命令行驱动的东西，或者最多是一个非常简单的基于菜单的东西。它通常不用于花哨的 UI 工作。

你可以很容易地拥有多列菜单，最简单的形式是：

```
echo "1\. Enter new contact.       4\. Find contact"
echo "2\. Edit contact             5\. Exit"
echo "3\. Delete contact" 
```

最后，`bash`它本身不支持显示比 ASCII 艺术更复杂的图像：

```
 |\_/|
 / @ @ \
( > º < )
 \__V__/
 /  O  \ 
```

因此，如果您需要比这更复杂的东西，您可能会将其传递给外部程序。

# mysql - 跨不同数据库创建视图

> ID：10694601
> 
> 赞同：22
> 
> 时间：2012-05-22T01:09:41.550
> 
> 标签：mysql, database, view

如果我有数据库`D1`和数据库`D2`，以及数据库下的表和数据库`T1`下的`D1`表，是否可以在 MySQL中创建数据库下的视图。如果是这样，你能告诉我语法吗？`T2``D2``T1``D2`

两个数据库都在同一台机器上。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-22T01:13:49.207

```
CREATE VIEW `D2`.`example` AS SELECT * FROM `D1`.`T1`; 
```

# python - 调用如何在 Python 中工作？

> ID：10694608
> 
> 赞同：6
> 
> 时间：2012-05-22T01:11:37.167
> 
> 标签：python, programming-languages

对于我正在进行的一个项目，我正在实现一个链表数据结构，它基于一对的想法，我将其定义为：

```
class Pair:
    def __init__(self, name, prefs, score):
        self.name = name
        self.score = score
        self.preferences = prefs
        self.next_pair = 0
        self.prev_pair = 0 
```

其中`self.next_pair`和`self.prev_pair`分别是指向前一个和下一个链接的指针。

要设置链接列表，我有一个如下所示的安装功能。

```
def install(i, pair):
    flag = 0
    try:
        old_pair = pair_array[i]
        while old_pair.next_pair != 0:
            if old_pair == pair:
                #if pair in remainders: remainders.remove(pair)
                return 0
            if old_pair.score < pair.score:
                flag = 1
                if old_pair.prev_pair == 0: # we are at the beginning
                    old_pair.prev_pair = pair
                    pair.next_pair = old_pair
                    pair_array[i] = pair
                    break
                else: # we are not at the beginning
                    pair.prev_pair = old_pair.prev_pair
                    pair.next_pair = old_pair
                    old_pair.prev_pair = pair
                    pair.prev_pair.next_pair = pair
                    break
            else:
                old_pair = old_pair.next_pair
        if flag==0:
            if old_pair == pair:
                #if pair in remainders: remainders.remove(pair)
                return 0
            if old_pair.score < pair.score:
                if old_pair.prev_pair==0:
                    old_pair.prev_pair = pair
                    pair.next_pair = old_pair
                    pair_array[i] = pair
                else:
                    pair.prev_pair = old_pair.prev_pair
                    pair.next_pair = old_pair
                    old_pair.prev_pair = pair
                    pair.prev_pair.next_pair = pair
            else:
                old_pair.next_pair = pair
                pair.prev_pair = old_pair
        except KeyError:
            pair_array[i] = pair
            pair.prev_pair = 0
            pair.next_pair = 0 
```

在该程序的过程中，我正在建立这些链接列表的字典，并从一些链接中删除链接并将它们添加到其他链接中。在修剪和重新安装之间，链接存储在中间数组中。

在调试这个程序的过程中，我开始意识到我对 Python 将参数传递给函数的方式的理解是有缺陷的。考虑我写的这个测试用例：

```
def test_install():
    p = Pair(20000, [3, 1, 2, 50], 45)
    print p.next_pair
    print p.prev_pair
    parse_and_get(g)
    first_run()
    rat = len(juggler_array)/len(circuit_array)
    pref_size = get_pref_size()
    print pref_size
    print install(3, p)
    print p.next_pair.name
    print p.prev_pair 
```

当我运行这个测试时，我得到以下结果。

```
0
0
10
None
10108
0 
```

我不明白为什么第二次调用`p.next_pair`产生的结果（`10108`）与第一次调用（`0`）不同。`install`不返回一个`Pair`可以覆盖传入的对象（它返回`None`），而且好像我在传递`install`一个指针。

我对按值调用的理解是解释器将传递的值复制到函数中，而调用者的变量保持不变。例如，如果我说

```
def foo(x):
     x = x+1
     return x

baz = 2
y = foo(baz)
print y
print baz 
```

然后`3`和`2`应该分别打印。事实上，当我在 Python 解释器中测试它时，就会发生这种情况。

如果有人能在这里指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T01:35:17.330

将变量传递给函数时，Python 不会复制任何内容。它既不是按值调用也不是按引用调用，但在这两者中，它更类似于按引用调用。您可以将其视为“按值调用，但值是参考”。

如果将**可变**对象传递给函数，则在函数内部修改该对象将影响该对象出现的任何位置。（如果您将**不可变**对象传递给函数，例如字符串或整数，那么根据定义，您根本无法修改该对象。）

这在技术上不是按引用传递的原因是您可以*重新绑定*名称，以便该名称完全引用其他内容。（对于不可变对象的名称，这是您唯一可以对它们执行的操作。）重新绑定仅存在于函数内部的名称不会影响可能存在于函数外部的任何名称。

在您使用`Pair`对象的第一个示例中，您正在修改一个对象，因此您可以看到函数之外的效果。

在您的第二个示例中，您没有修改任何对象，您只是将名称重新绑定到其他对象（在这种情况下为其他整数）。 `baz`是一个名称，它指向一个值为 2 的整数对象（在 Python 中，一切都是对象，甚至是整数）。当您传递`baz`到 时`foo(x)`，该名称在堆栈上`x`的函数内部本地创建，并设置为指针它被传递到函数中——与 . 相同的指针。但是和不是一回事，它们只包含指向同一个对象的指针。上线，被反弹指向一个值为 3 的整数对象，并且该指针是从函数返回并用于将整数对象绑定到 y 的指针。`foo``x``baz``x``baz``x = x+1``x`

如果您重写第一个示例以根据传递给它的 Pair 对象的信息在函数内显式创建一个新的 Pair 对象（无论这是您随后修改的副本，还是创建一个修改构造数据的构造函数）那么你的函数不会有修改传入的对象的副作用。

编辑：顺便说一句，在 Python 中，您不应该将`0`其用作占位符来表示“我没有价值”——使用`None`. 同样，您不应该使用`0`to 来表示`False`，就像您似乎在做的那样`flag`。但是所有的`0`,`None`并在布尔表达式中`False`求`False`值，所以无论你使用哪一个，你都可以说`if not flag`而不是`if flag == 0`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T01:45:18.763

在 Python 中，一切都是对象。简单分配将对分配对象*的引用存储*在分配对象名称中。因此，更直接地将 Python 变量视为分配给对象的名称，而不是存储在命名位置的对象。

例如：

```
baz = 2 
```

...存储在指向存储在其他地方`baz`的整数对象的指针或引用中`2`。（由于类型`int`是不可变的，Python 实际上有一个小整数池，并且在`2`任何地方都重用了同一个对象，但这是一个实现细节，我们不需要过多关注。）

当您调用 时`foo(baz)`，`foo()`的局部变量首先`x`也指向整数对象`2`。也就是说，`foo()`-local 名称`x`和全局名称`baz`是同一个对象的名称，`2`. 然后`x = x + 1`被执行。这将更`x`改为指向不同的对象：`3`.

重要的是要理解：`x`不是一个持有 的盒子，`2`然后`2`递增到`3`。不，`x`最初指向 ，`2`然后该指针更改为指向`3`。自然，由于我们没有改变对象`baz`指向的对象，它仍然指向`2`。

另一种解释方式是，在 Python 中，所有参数传递都是按值传递的，但所有值都是对对象的引用。

一个反直觉的结果是，如果一个对象是可变的，它可以通过任何引用进行修改，并且所有引用都将“看到”更改。例如，考虑一下：

```
baz = [1, 2, 3]

def foo(x):
   x[0] = x[0] + 1

foo(baz)
print baz
>>> [2, 2, 3] 
```

这*似乎*与我们的第一个示例非常不同。但实际上，参数以相同的方式传递。`foo()`接收到`baz`名称下的指针`x`，然后对其执行更改它的操作（在这种情况下，列表的第一个元素指向不同的`int`对象）。不同之处在于名称`x`永远不会指向新对象。它`x[0]`被修改为指向不同的对象。`x`本身仍然指向与 相同的对象`baz`。（事实上​​，在幕后赋值`x[0]`变成了一个方法调用：`x.__setitem__()`。）因此`baz`“看到”对列表的修改。怎么可能没有？

你看不到整数和字符串的这种行为，因为你不能改变整数或字符串；它们是不可变类型，当您修改它们时（例如`x = x + 1`），您实际上并没有修改它们，而是将您的变量名绑定到一个完全不同的对象。如果您更改`baz`为元组，例如`baz = (1, 2, 3)`，您会发现这`foo()`会给您一个错误，因为您无法分配给元组的元素；元组是另一种不可变类型。“更改”一个元组需要创建一个新元组，然后赋值将变量指向新对象。

你定义的类的对象是可变的，所以你的`Pair`实例可以被它传入的任何函数修改——也就是说，属性可以被添加、删除或重新分配给其他对象。这些东西都不会重新绑定指向您的对象的任何名称，因此当前指向它的所有名称都将“看到”更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T01:45:54.697

我建议您忘记实现链表，而只需使用 Python 的实例`list`。如果您需要默认 Python 以外的其他`list`内容，也许您可​​以使用 Python 模块中的某些内容，例如`collections`.

跟随链表中的链接的 Python 循环将以 Python 解释器的速度运行，也就是说，速度很慢。如果你简单地使用内置`list`类，你的列表操作将发生在 Python 的 C 代码中，你将获得速度。

如果你需要一个类似列表但快速插入和快速删除的东西，你能做一个`dict`工作吗？如果有某种 ID 值（字符串或整数或其他）可用于对您的值进行排序，您可以将其用作键值并获得闪电般的快速插入和删除值。然后，如果您需要按顺序提取值，您可以使用`dict.keys()`方法函数获取键值列表并使用它。

但是如果你真的需要链表，我建议你找别人编写和调试的代码，并根据你的需要进行调整。谷歌搜索“python 链表配方”或“python 链表模块”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T01:22:50.170

我将提出一个稍微复杂的因素：

```
>>> def foo(x):
...   x *= 2
...   return x
... 
```

使用我知道的数字、列表和字符串支持的方法定义稍微不同的函数。

首先，用字符串调用它：

```
>>> baz = "hello"
>>> y = foo(baz)
>>> y
'hellohello'
>>> baz
'hello' 
```

接下来，用列表调用它：

```
>>> baz=[1,2,2]
>>> y = foo(baz)
>>> y
[1, 2, 2, 1, 2, 2]
>>> baz
[1, 2, 2, 1, 2, 2]
>>> 
```

对于字符串，参数不会被修改。使用列表，参数会被修改。

如果是我，我会避免修改方法中的参数。

# google-apps-script - Cloning a Collection in google app script

> ID：10694611
> 
> 赞同：0
> 
> 时间：2012-05-22T01:13:13.233
> 
> 标签：google-apps-script

I'm looking to allow certain users to clone a collection, and all of it's child collections and folders to a new 'parent' collection.

I think I've got the overall design down, but after reading many timeout issues, I wanted to see if anyone here has any 'gotcha' things to stick clear of. I'm going to allow them to select a single collection from a Listbox and give them the chance to name the new 'parent' Collection and the folder it should belong to.

However, where I'm concerned is that iterating through parent>Collection1>Collection2>Collection3.. etc.

I'm thinking of feeding the folders into arrays then create the new folder and then copy docs from source to the new folder. Sound reasonable? Anyone already invent this wheel?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:21:24.020

我认为这里没有任何问题。但是，根据您要复制的集合和文件的数量，您可能会达到我们也限制的一些[各种配额。](https://docs.google.com/macros/dashboard)

如果这适合您的用例，我不知道，但您可能必须将您的工作负载分成小块并在多次运行中执行，将您的脚本设置为稍后继续（取决于配额，第二天）使用[脚本服务](https://developers.google.com/apps-script/service_script)API。

# antlr - 简单的 antlr 模板重写

> ID：10694612
> 
> 赞同：0
> 
> 时间：2012-05-22T01:13:47.960
> 
> 标签：antlr, language-translation

我对antlr完全陌生。我正在尝试使用 antlr 进行一些语言翻译。我认为我使用了正确的语法，但我遇到了异常。

以下是语法的一部分：

```
primary
:   parExpression
|   'this' ('.' Identifier)* identifierSuffix?
|   'super' superSuffix
|   literal
|   'new' creator
|   Identifier ('.' Identifier)* identifierSuffix?
|   primitiveType ('[' ']')* '.' 'class'
|   'void' '.' 'class'
; 
```

我添加了一个重写规则，例如

```
|   'new' creator -> 'mynew' creator 
```

发生异常：

```
[11:11:48] error(100): rjava_new_rewrite.g:851:26: syntax error: antlr: NoViableAltException(58@[921:1: rewrite_alternative options {k=1; } : ({...}? => rewrite_template | {...}? => ( rewrite_element )+ -> {!stream_rewrite_element.hasNext()}? ^( ALT[LT(1),"ALT"] EPSILON["epsilon"] EOA["<end-of-alt>"] ) -> ^( ALT[LT(1),"ALT"] ( rewrite_element )+ EOA["<end-of-alt>"] ) | -> ^( ALT[LT(1),"ALT"] EPSILON["epsilon"] EOA["<end-of-alt>"] ) | {...}? ETC );])
[11:11:48] error(100): rjava_new_rewrite.g:851:34: syntax error: antlr: MissingTokenException(inserted [@-1,0:0='<missing SEMI>',<52>,851:33] at creator)
[11:11:48] error(100): rjava_new_rewrite.g:852:5: syntax error: antlr: MissingTokenException(inserted [@-1,0:0='<missing COLON>',<54>,852:4] at |)
[11:11:48] error(100): rjava_new_rewrite.g:0:1: syntax error: assign.types: MismatchedTreeNodeException(0!=3)
[11:11:48] error(100): rjava_new_rewrite.g:0:1: syntax error: assign.types: MismatchedTreeNodeException(3!=28)
[11:11:48] error(100): rjava_new_rewrite.g:0:1: syntax error: assign.types: MismatchedTreeNodeException(3!=27)
[11:11:48] java.util.NoSuchElementException: can't look backwards more than one token in this stream
    at org.antlr.runtime.misc.LookaheadStream.LB(LookaheadStream.java:159)
    at org.antlr.runtime.misc.LookaheadStream.LT(LookaheadStream.java:120)
    at org.antlr.runtime.RecognitionException.extractInformationFromTreeNodeStream(RecognitionException.java:144)
    at org.antlr.runtime.RecognitionException.<init>(RecognitionException.java:111)
    at org.antlr.runtime.MismatchedTreeNodeException.<init>(MismatchedTreeNodeException.java:42)
    at org.antlr.runtime.tree.TreeParser.recoverFromMismatchedToken(TreeParser.java:135)
    at org.antlr.runtime.BaseRecognizer.match(BaseRecognizer.java:115)
    at org.antlr.grammar.v3.AssignTokenTypesWalker.grammar_(AssignTokenTypesWalker.java:388)
    at org.antlr.tool.CompositeGrammar.assignTokenTypes(CompositeGrammar.java:337)
    at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:605)
    at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createNewGrammar(ANTLRGrammarEngineImpl.java:192)
    at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createParserGrammar(ANTLRGrammarEngineImpl.java:225)
    at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createCombinedGrammar(ANTLRGrammarEngineImpl.java:203)
    at org.antlr.works.grammar.antlr.ANTLRGrammarEngineImpl.createGrammars(ANTLRGrammarEngineImpl.java:165)
    at org.antlr.works.grammar.engine.GrammarEngineImpl.getGrammarLanguage(GrammarEngineImpl.java:115)
    at org.antlr.works.components.GrammarWindowMenu.getEditTestRigTitle(GrammarWindowMenu.java:244)
    at org.antlr.works.components.GrammarWindowMenu.menuItemState(GrammarWindowMenu.java:529)
    at org.antlr.works.components.GrammarWindow.menuItemState(GrammarWindow.java:440)
    at org.antlr.xjlib.appkit.menu.XJMainMenuBar.refreshMenuItemState(XJMainMenuBar.java:175)
    at org.antlr.xjlib.appkit.menu.XJMainMenuBar.refreshMenuState(XJMainMenuBar.java:169)
    at org.antlr.xjlib.appkit.menu.XJMainMenuBar.refreshState(XJMainMenuBar.java:153)
    at org.antlr.xjlib.appkit.menu.XJMainMenuBar.refresh(XJMainMenuBar.java:145)
    at org.antlr.works.grammar.decisiondfa.DecisionDFAEngine.refreshMenu(DecisionDFAEngine.java:203)
    at org.antlr.works.components.GrammarWindow.afterParseOperations(GrammarWindow.java:1179)
    at org.antlr.works.components.GrammarWindow.access$200(GrammarWindow.java:96)
    at org.antlr.works.components.GrammarWindow$AfterParseOperations.threadRun(GrammarWindow.java:1553)
    at org.antlr.works.ate.syntax.misc.ATEThread.run(ATEThread.java:152)
    at java.lang.Thread.run(Thread.java:680) 
```

任何人都可以给出任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T07:26:52.610

> ***qinsoon 写道:***
> 
> *我认为我使用了正确的语法，但我遇到了异常。*

你想错了。:)

您不能将解析器不匹配的内容放入重写规则中。所以在你的情况下：

```
|   'new' creator -> 'mynew' creator 
```

`'mynew'`是错误的，因为解析器从未遇到过这样的令牌/规则。如果您想在解析器未遇到的 AST 中插入标记（它们在 ANTLR 中称为虚构标记），则需要在`tokens {...}`语法中定义它们，如下所示：

```
grammar YourGrammarName;

options {
  output=AST;
}

tokens {
  MYNEW;
}

primary
:   ...
|   'new' creator -> ^(MYNEW creator)
|   ...
; 
```

这将插入一个类型为`MYNEW`innner-text的节点`"MYNEW"`。如果要在节点中关联一些自定义文本，请执行以下操作：

```
primary
:   ...
|   'new' creator -> ^(MYNEW["mynew"] creator)
|   ...
; 
```

从上面可以看出，我创建了一个根节点为 的 AST `MYNEW`。如果我做：

```
|   'new' creator -> MYNEW creator 
```

ANTLR 将从该规则返回 2 个节点。如果该规则成为另一个（子）树的根，您将遇到麻烦：毕竟，您可以获得具有 2 个根的 AST！始终努力让重写规则产生单个 AST/节点：

```
rule
 : subrule ';' -> subrule // omit the semi-colon
 ; 
```

或者当需要创建更多节点时，使用单个根节点制作适当的 AST：

```
rule
 : AToken subrule1 subrule2 ';' -> ^(AToken subrule1 subrule2) // AToken is the root
 ; 
```

# php - Jquery使用参数加载动态内容

> ID：10694615
> 
> 赞同：1
> 
> 时间：2012-05-22T01:14:38.580
> 
> 标签：php, jquery

我正在尝试根据单击的 href 加载 div 内容并传入参数。例如，链接 1 单击链接 1 会将值“3”传递给 process.php，并返回值“apple is good for you”。

但是，如果没有提交按钮，我似乎无法传递值。无论如何，我可以将参数传递给另一个 php 文件进行处理，并返回值？

```
$(document).ready(function(){
     $("#testing a").live("click", function(evt){
         var id= $(this).attr('id');
        $.post("process.php", { id: id },
        function(data) {
          alert(data);
                    $('#result').load(data);
        });
     })

}); 
```

下面是我的 HTML

```
<div id="testing">
<a href="" id="11"> hello </a>
</div>

<div id="result"></div> 
```

感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:20:52.807

您不应该使用数字作为`id`值。相反，可以在它们前面加上一个字母，或者考虑将它们添加到`data-`元素的属性中。

此外，`$.live()`已弃用，我们鼓励`$.on()`从这里开始使用事件委托。我已经在下面的代码中处理了这个问题，但`id`问题仍然存在。

最后，`$.load()`和`$.html()`不一样。如果要*加载* `data`到元素中，则不要调用 load 方法（尽管名称可能会导致混淆）。

```
// Short-hand version of $(document).ready();
$(function(){
  // Handle anchor clicks on #testing
  $("#testing").on("click", "a", function(e){
    // Prevent links from sending us away
    e.preventDefault();
    // POST our anchor ID to process.php, and handle the response
    $.post("process.php", { 'id': $(this).attr("id") }, function(data){
      // Set the response as the HTML content of #result
      $("#result").html(data);
    });
  });
}); 
```

从您的`process.php`文件中，您可能具有以下内容：

```
$msg = array( 
    "...chirp chirp...",
    "This is response number 1",
    "And I am the second guy you'll see!",
    "Apples are good for you!" 
);

$num = $_POST["id"] || 0;

echo $msg[ $num ]; 
```

# javascript - 与正则表达式连接

> ID：10694623
> 
> 赞同：1
> 
> 时间：2012-05-22T01:16:30.457
> 
> 标签：javascript, jquery, regex, text, replace

我有一个获取 URL 路径并将其添加为正文类的 JQuery 函数：

```
var pathname = window.location.pathname;
var pathSlashesReplaced = pathname.replace(/\//g, " ");
var pathSlashesReplacedNoFirstDash = pathSlashesReplaced.replace(" ","");
var newClass = pathSlashesReplacedNoFirstDash.replace(/\(\d*\)/g, '').replace(/\s/, '-');

    $("body").addClass(newClass);
    if ( $("body").attr("class") == "") 
    {   

        $("body").addClass("class");

    } 
```

.. 因此，如果 url 类似于 /myapp/user/list，则正文类最终为：

```
<body class="myapp-user list"> 
```

问题是我希望所有三个单词都带有破折号，所以应该是：

```
<body class="myapp-user-list"> 
```

..然后我可以使用CSS主题：

```
.myapp-user-list {

} 
```

我很确定我的 RegEx 存在问题，但我不知道在哪里。我尝试了各种文本函数，但问题是它从页面中抓取了所有文本并将其作为正文类放入：

```
var text = $(this).text();
var newClass  = $.trim(text.replace(/\(\d*\)/g, '').toLowerCase()).replace(/\s/, '-'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:27:45.363

尝试 ：

```
var newClass = location.pathname.split('/').join('-').replace(/(^-|-$)/g,''),
    $body = $("body").addClass(newClass);

if ($body.attr("class") == "") {   
    $body.addClass("class");
} 
```

我会避免类名`class`。它可能会带来问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:23:25.240

尝试将`g`修饰符添加到第二个替换以替换所有空格，而不仅仅是第一个。

```
var newClass = pathSlashesReplacedNoFirstDash.replace(/\(\d*\)/g, '').replace(/\s/g, '-'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:31:32.243

我认为应用这两个正则表达式就可以了。

```
"/\//-/g"   Will change all slashes to -
"/-//"      Will only remove the first - 
```

# sql - Rails - 未缓存的控制器操作与序列化属性混淆

> ID：10694624
> 
> 赞同：1
> 
> 时间：2012-05-22T01:16:38.520
> 
> 标签：sql, ruby-on-rails, caching

我有一个控制器操作，它调用一个模型方法，该方法生成从另一个模型数据库中提取的数据的序列化列表。我需要这样做，`uncached`因为 SQL 查询应该是随机数据拉取。

这是我的代码的总体思路（请注意`User` `has_one` `Foo`，`Bar`是数据的任意模型，`:data_list`类型为`text`，并且数据库是 SQLite）：

`# app/models/foo.rb`

```
class Foo < ActiveRecord::Base
  serialize :data_list

  def generate_data
    list = []
    for i in 1..4
      data = Bar.find(:first, :order => "Random()")
      list << data
    end
    self.data_list = list
  end
end 
```

`# app/controllers/users_controller.rb`

```
class UsersController < ApplicationController
  def generate_action
    ...
    uncached do
      @user.foo.generate_data
    end
    @user.foo.save
  end
end 
```

`# app/views/user/show.html.erb`

```
...
<% @user.foo.data_list.each do |data| %>
  <%= data %><br />
<% end %> 
```

无论何时`uncached do ... end`删除，一切正常，视图打印 `show`出. 不幸的是，由于 Rails 的 SQL 缓存，它最终看起来像这样：`Bar``@user.foo.data_list`

> 随机
> 数据点8 随机
> 数据点8 随机数据点8
> 随机数据点8

当我需要看起来像这样时：

> 随机
> 数据点 7 随机
> 数据点 13 随机数据点 2
> 随机数据点 21

应该注意的是，`user.foo.generate_data`从 Rails 命令行运行与随机化完美配合。只有从控制器调用时才会开始缓存。

我的研究建议我`uncached`在控制器中使用来删除缓存，但是它似乎破坏了我的数据序列化并且我收到了错误：

`undefined method 'each' for #<String:0x007ff49008dc70>`

事实上，即使我追溯添加`uncached`（已成功生成`data_plan`没有`uncached`事先的 a ）并保存控制器，它也会这样做，但不要调用`generate_action`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:43:38.500

**编辑**
我相信这个问题实际上与我在哈希中存储一个对象的事实有关。切换到对象`id`解决了这个问题。我的另一个关于此的 SO 问题可以在这里找到： [Rails - Accessing serialized data from console](https://stackoverflow.com/questions/10711696/rails-accessing-serialized-data-from-console)

保留以下内容只是因为语法可能仍然可以帮助人们，但我不认为这是问题的实际原因。

* * *

我通过转移`uncached`到模型解决了这个问题。作为参考，我最初用来解决这个问题的来源是这个链接：[http ://railspikes.com/2008/8/18/disabling-activerecord-query-caching-when-needed](http://railspikes.com/2008/8/18/disabling-activerecord-query-caching-when-needed)

我忽略的是他放入`uncached`了模型，而不是控制器。此外，语法需要有点不同：

```
# app/models/foo.rb

self.class.uncached do
   ...
end 
```

代替

```
uncached do
  ...
end 
```

语法更正的来源是这个 SO 响应：[https ://stackoverflow.com/a/967690/337903](https://stackoverflow.com/a/967690/337903)

# jquery - 我正在尝试制作一个迭代的 jQuery 滚动动画，该动画滚动浏览同一 div 类的多个实例，在两者之间暂停

> ID：10694634
> 
> 赞同：1
> 
> 时间：2012-05-22T01:17:39.347
> 
> 标签：jquery, animation, settimeout, scrolltop, iteration

此功能的工作方式：

**1)**用户点击ID为“surf”的按钮，动画开始

**2)**函数找到第一个具有“threadboard”类的 div 实例，在那里暂停 1.5 秒，然后平滑向下滚动到具有“threadboard”类的 div 的下一个实例，在那里暂停 1.5 秒，然后平滑滚动到接下来，以此类推

**3)**该函数应该通过所有具有“线程板”类的 div 实例来执行此操作，然后结束

我正在尝试将 jQuery 与方法, 和`scrollTop()`到目前为止`each()`混合使用成功。这是我到目前为止所拥有的（**编辑：**包括工作但不完美的代码）：`animate()``setTimeout()`

 **```
var currentIndex = 0;
var numDivs = 18;

$(window).load(function() {
    $('#surf').click(
        function(){start();}
    );
});

function start() {
//if (numDivs > 0) {
    var winY = window.screenY;
            $("body").animate({ scrollTop: 225 * currentIndex}, 1100);
    //
    currentIndex = (currentIndex + 1) % numDivs;
    setTimeout(start, 3000);
//}
} 
```

现在我意识到我通过估计每个实例相距一定数量的像素来使用盗版方法，并且在实例数量中进行了硬编码，这并不理想。编写此函数的最佳方法是什么？代码将在[http://cornellhub.com/board/上实现](http://cornellhub.com/board/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:03:10.223

这是我的镜头：

[http://jsfiddle.net/3aBx9/](http://jsfiddle.net/3aBx9/)

基本上，我检查每个存在的顶部位置`.threadboard`，遍历每一个，向计时器添加一个值并让它运行。

创建取消按钮应该像`clearTimeout()`.

**由原始海报最终编辑，修改后的代码适用于所有浏览器。**最终的解决方案是使用or`body, html`代替`body`or `html`，前者适用于 webkit 浏览器，后者适用于非 webkit 浏览器。函数和超时也必须移出`$(document).ready(function () {`. 下面的代码现在反映了编辑后的解决方案：

```
var timeOut = 1500;

function startSurf(winY) {
//new timeout function
setTimeout(function () {
    //the page neesd to be animated (relative of course, careful)
    $('body').animate({

        //animate the scroll
        scrollTop: winY

        //scroll speed
    }, 'fast');

    //our timer needs to be declared outside the functin so it doesn't just jump to the end.
}, timeOut);

//add 1.5 seconds for each iteration loop or it will try to jump to the end.
timeOut += 1500;
}
$(document).ready(function () {
$('#surf').click(function () {
    var numThreads = $('.threadboard');

    $.each(numThreads, function (index, obj) {
        //the position of the object
        var position = $(obj).position();

        //the top position of the object (relative of course, careful)
        var winY = position.top;

        //on the first iteration
        if (index == 0) {
            $('body').animate({
                scrollTop: winY
            }, 'fast');

            //for every iteration after
        } else {
            startSurf(winY);
        }
    });
});
}); 
```**

# java - Randomly Distribute percentages to each words

> ID：10694638
> 
> 赞同：0
> 
> 时间：2012-05-22T01:18:18.620
> 
> 标签：java, random

```
Percentage:70 - CommandA  Data:Previous/New(80/20)    User:true/false(50/50)
Percentage:30 - CommandB  Data:Previous/New(50/50)    User:true/false(30/70) 
```

Above is my Text File in which I am printing CommandA 70% of the time and CommandB 30% of the time from the logic **that I wrote below by getting advice here from StackOverflow**. Now what I want is that if CommandA is being printed 70% of the time, then 80% of the 70$ of time, it should also prints Previous and 20% of the 70% of time it should print New. Similarly it should print 50% of the 70% of time true and 50% of the time false. So Basically problem is like this- Problem Statement

* * *

> Print "CommandA" 70% of the time, and out of those 70% print 80% "Previous" and print 20% "New". And out of those 70% print 50% "true" and print 50% "false" Likewise, for CommandB print "CommandB" 30% of the time, and out of those 30% print 50% "Previous" and print 50% "New". And out of those 30% print 30% "true" and print 70% "false"

* * *

So currently in my below code I am printing 70% of CommandA and 30% of CommandB. I am not sure how should I add the code for above requirements.

```
public static void main(String[] args) {
        commands = new LinkedList<Command>();
        values = new ArrayList<String>();
        br = new BufferedReader(new FileReader("S:\\Testing\\Test2.txt"));
        while ((sCurrentLine = br.readLine()) != null) {
            percentage = sCurrentLine.split("-")[0].split(":")[1].trim();
            values = Arrays.asList(sCurrentLine.split("-")[1].trim().split("\\s+"));
            for(String s : values) {
                if(s.contains("Data:")) {
                // Here data contains **Previous/New(80/20)**
                    data = s.split(":")[1];
                } else if(s.contains("User:")) {
                // Here userLogged contains **true/false(50/50)**
                    userLogged = s.split(":")[1];
                } else {
                    cmdName = s;
                }
            }

            Command command = new Command();
            command.setName(cmdName);
            command.setExecutionPercentage(Double.parseDouble(percentage));
            command.setDataCriteria(data);
            command.setUserLogging(userLogged);
            commands.add(command);
        }

        executedFrequency = new Long[commands.size()];

        for (int i=0; i < commands.size(); i++) {
            executedFrequency[i] = 0L;
        }

        for(int i = 1; i < 10000; i++) {
            Command nextCommand = getNextCommandToExecute();
    // So by my logic each command is being printed specified number of percentage times                    
    System.out.println(nextCommand.getName()); 

/*
 * What I want is that if Command A is executed 70% of time, then according 
 * to properties  file 80% times of 70% of CommandA it should print Previous 
 * and 20% times of 70% of CommandA it should print New Likewise same thing 
 * for User. It should print 50% times of 70% of CommandA true and 50% to false.
 * 
 */

        }
    } 

}

// Get the next command to execute based on percentages
private static Command getNextCommandToExecute() {
    int commandWithMaxNegativeOffset = 0; // To initiate, assume the first one has the max negative offset
    if (totalExecuted != 0) {
        // Manipulate that who has max negative offset from its desired execution
        double executedPercentage = ((double)executedFrequency[commandWithMaxNegativeOffset] / (double)totalExecuted) * 100;
        double offsetOfCommandWithMaxNegative = executedPercentage - commands.get(commandWithMaxNegativeOffset).getExecutionPercentage();

        for (int j=1; j < commands.size(); j++) {
            double executedPercentageOfCurrentCommand = ((double)executedFrequency[j] / (double)totalExecuted) * 100;
            double offsetOfCurrentCommand = executedPercentageOfCurrentCommand - commands.get(j).getExecutionPercentage();

            if (offsetOfCurrentCommand < offsetOfCommandWithMaxNegative) {
                offsetOfCommandWithMaxNegative = offsetOfCurrentCommand;
                commandWithMaxNegativeOffset = j;
            }
        }
    }

    // Next command to execute is the one with max negative offset
    executedFrequency[commandWithMaxNegativeOffset] ++;
    totalExecuted ++;

    return commands.get(commandWithMaxNegativeOffset);
} 
```

P.S. The logic that I wrote for percentage execution is from the posting that I did on the stackoverflow.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:40:16.187

您可以使用`java.util.Random`该类生成随机数。该`Random.nextDouble()`方法返回一个介于 0 和 1 之间的值，因此如果将其乘以 100，则会得到一个百分比。然后将数字与命令的所需百分比进行比较（例如 70 表示`CommandA`）

由于您知道命令所需的百分比，您可以生成另一个随机数或使用刚刚生成的随机数来选择命令。

1.  *生成一个新数字*：（参见上面的生成），然后您可以将百分比与所需的二级分布（例如 80 `Previous`）进行比较

2.  *重用相同的数字*：计算命令选择阈值的适当部分并将数字与该数字进行比较。例如，`CommandA`阈值为 70。假设您生成了 69（小于 70，因此`CommandA`被选中）。所以你计算 70*80%=56。69 大于那个，所以你选择`New`（而不是`Previous`）

*注意*：即使您保留当前选择命令的逻辑，您也可以采用方法 1)

更新：代码示例：

```
Random rnd = new Random();
double percent = rnd.getNextDouble()*100;
for (Command c : commands) {
  if (percent < c.getExecutionPercentage()) {
    // we select the current command
    percent = rnd.getNextDouble()*100;
    if (percent < command.getDataCriteria().getPreviousPercentage()) {
      // we select Previous
    } else {
      // we select New
    }
    break;
  } else {
    percent -= c.getExecutionPercentage();
  }
} 
```

*注意*：上面的代码假设所有`Command`s的总和`getExecutionPercentage()`是（至少）100

更新：制作了一个`Random`对象，因为方法不是静态的

# php - Return a simeple true or false to conditions - Ubercart Conditional Actions

> ID：10694639
> 
> 赞同：0
> 
> 时间：2012-05-22T01:18:27.117
> 
> 标签：php, action, conditional, ubercart

I'm trying to set up a conditional action for shipping quotes in Ubercart. I need check the hour of day as a condition. I'm using the execute custom PHP condition. If the php returns true I just want the predicate to continue onto the actions. If it returns false I want it to stop. I tried:

```
 if (date('G') >14 && date('G') < 18){
       return true;
    }
    else{
       return false;
    } 
```

When I tried this the shipping estimator just never delivered a quote.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:56:03.947

这段代码是正确的。问题一定出在其他地方。

# java - GAE getting started in Java, Eclipse Indigo - can't compile as 1.6

> ID：10694648
> 
> 赞同：2
> 
> 时间：2012-05-22T01:20:00.383
> 
> 标签：java, eclipse, google-app-engine, eclipse-indigo, facet

I feel like I keep going in circles with this one. I followed the Getting Started guide for Google App Engine ([https://developers.google.com/appengine/docs/java/gettingstarted/](https://developers.google.com/appengine/docs/java/gettingstarted/)) in Eclipse and everything went relatively well until I uploaded it to the App Engine.

I was getting 500 errors so I checked the logs and found this: "guestbook/SignGuestbookServlet : Unsupported major.minor version 51.0]"

I then search for this problem (on stackoverflow, of course) and found this solution: [Google App Engine and Java Version?](https://stackoverflow.com/questions/8139477/google-app-engine-and-java-version)

So I set the compliance level to 1.6 and then at the bottom of the dialog I get the warning that "When selecting 1.6 compliance, make sure to have a compatible JRE installed and activated (currently 1.7)".

I happy click OK, and it prompts for a rebuild. After the rebuild I then get this new error: "Java compiler level does not match the version of the installed Java project facet."

Not having knowingly used any facets in the project I do a search for some help (again on stackoverflow) and find this: ["Faceted Project Prblem (Java Version Mismatch)" error message](https://stackoverflow.com/questions/2239959/faceted-project-prblem-java-version-mismatch-error-message)

Unfortunately it is not even close to being helpful because I am not used Maven, and when I bring up the properties of the project there is no Project Properties -> Project Facets panel for me to change a version on.

So it seems that I am stuck with something that either cannot be compiled in Eclipse or cannot be deployed to App Engine. I know that I am probably missing something obvious here but I can't quite put my finger on it.

UPDATE: I have uninstalled all JREs and JDKs, and reinstalled only jdk1.6.0_32\. The problem continues exactly the same.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T20:07:40.043

我有同样的问题。我能够通过使用 Navigator 视图并编辑 .settings/org.eclipse.wst.common.project.facet.core.xml 来解决，更改为：

```
<?xml version="1.0" encoding="UTF-8"?>
<faceted-project>
  <installed facet="java" version="1.6"/>
</faceted-project> 
```

在此更改之后，错误消失了，我可以使用 jre1.7 但 java 1.6 合规级别在 DevMode 中成功运行 GWT 项目。

似乎确实应该有一种方法可以通过项目配置来编辑这个 java 方面，但我在 Juno 中找不到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:40:12.393

在解决这个问题几个小时之后，删除我在 war 文件夹中的 nocache.js 是最后一块拼图。

与上面的答案相反，在 1.7 中创建应用程序后，我能够成功降级到合规级别 1.6

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T05:39:16.280

至少在我的情况下，答案似乎是，如果您在创建 Web 应用程序时将 Eclipse 默认编译器级别设置为 1.7，那么您将无法成功将其切换到 1.6。

**示例 1：**使用 JRE 1.6

1.  在 Eclipse 中设置 Preferences->Java->Installed JREs to jdk 1.6.0_32
2.  将 Preferences->Java->Compiler 设置为合规级别 1.6
3.  使用 google 插件创建“新 Web 应用程序”
4.  在本地运行 - 成功
5.  部署到应用引擎，远程运行 - 成功

**示例 2：**使用 JRE 1.7

1.  在 Eclipse 中设置 Preferences->Java->Installed JREs to jdk 1.7.0_04
2.  将 Preferences->Java->Compiler 设置为合规级别 1.7
3.  使用 google 插件创建“新 Web 应用程序”
4.  在本地运行 - 成功
5.  上传到应用引擎 - 失败（不支持的 major.minor 版本 51.0）
6.  在 Eclipse 中，将 Preferences->Java->Compiler 设置为合规级别 1.6 - 失败（不会在本地编译（Java 编译器级别与已安装的 Java 项目方面的版本不匹配）。

**解决方案：**

在使用 google 插件创建 Web 应用程序之前，将 JRE 和编译器级别切换到 1.6（如示例 1 所示）。

如果您的项目已经存在，那么希望您还没有走得太远，可以再次创建它。

# joomla - 如何覆盖 Joomla 2.x 的根媒体文件夹中的设置

> ID：10694650
> 
> 赞同：1
> 
> 时间：2012-05-22T01:20:17.117
> 
> 标签：joomla, joomla-extensions

基本上我安装了一个模块，它也在模块文件夹中，但我需要更改的 css 在媒体文件夹中。如何覆盖它，我是否以某种方式使用模板文件夹中的 HTML 文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:24:46.737

可能最简单的方法是在模板中使用特定的 CSS 文件，并使用覆盖标准模块 CSS 的选择器。不幸的是，Joomla 没有检查模块或组件 CSS 的模板版本的标准方法，就像它检查视图文件的方式一样。

使用 CSS 层次结构在默认模块 CSS 规则之后加载您的覆盖 CSS 规则，它们将优先。确保您的覆盖 CSS 文件是模板加载的最后一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:12:30.760

原始 CSS 文件是如何加载的？模块是否将其加载到其模板文件或其他地方？如果它在模板中加载，只需覆盖模板文件并更改加载该文件的行。如果它没有加载到模板中，它可能是在渲染模板之前加载的。在这种情况下，解决方案也是覆盖模板并加载您自己的 css 文件，该文件将包含覆盖原始文件中的规则的规则。在这种情况下，不幸的是，除了您的 css 文件之外，还将加载原始文件。这相当于一个额外的 http 请求，但可能没什么大不了的。

# jquery - 如何在使用 jQuery 查询之前等待图像加载

> ID：10694651
> 
> 赞同：0
> 
> 时间：2012-05-22T01:20:19.733
> 
> 标签：jquery

示例：http: [//jsfiddle.net/forgetcolor/rZSCg/3/](http://jsfiddle.net/forgetcolor/rZSCg/3/)

给定一个设置为溢出：自动的 div，它将（可能）包含一个大于其窗口的图像，我试图找出一种方法来等待该图像在查询其属性之前加载。我追求的属性是它的内部宽度，减去它的滚动条。感谢之前的stackoverflow问题（http://stackoverflow.com/questions/10692598/how-to-get-innerwidth-of-an-element-in-jquery-without-scrollbar）我有一种技术可以做到这一点，但这仅适用于小图像或缓存中的图像。当它获得大图像时，执行查询的代码会在图像加载完成之前执行。

我想要的是一种在执行查询之前等待该图像加载的方法。有任何想法吗？

完整示例：http: [//jsfiddle.net/forgetcolor/rZSCg/3/](http://jsfiddle.net/forgetcolor/rZSCg/3/)

Javascript：

```
// using a random appended to the URL to simulate non-cached
// varying images
var r = Math.floor((Math.random()*100000)+1);
$('#box1').html("<img src='http://lorempixel.com/output/fashion-q-c-1920-1920-4.jpg?"+r+"' />");
var helperDiv = $('<div />');
$('#box1').append(helperDiv);
$('#iw').text("inner width is: " + helperDiv.width());
helperDiv.remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:26:56.603

把你想做的一切都放进去

```
$("img").load(function(){...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:44:24.510

```
 var r = Math.floor((Math.random()*100000)+1);
   var newImage = new Image()
   $(newImage).load(function(){
        $('#iw').text("inner width is: " + newImage.width);
   });
   newImage.src = 'http://lorempixel.com/output/fashion-q-c-1920-1920-4.jpg?'+r 
```

您遇到的问题有点复杂。来自 DOM 的图像具有奇怪的加载行为，其中 onload 事件并不总是触发。因此，将图像放入 div 然后等待 DOM 元素触发 onload 是行不通的。

因此，我们需要内置的 javascript 图像对象。（最近了解到）这个对象将解决您的两个问题。首先，只要在设置图像源之前设置 .load 侦听器，它就会在每个浏览器中每次触发 onload。加载发生后，因为它是一个图像对象，你不需要将它添加到页面来获取它的高度和宽度，这些属性是内置的。

# c# - Sorting a List filled with anonymous types without LINQ Random r = new Random(); List myList = new List(); for (int i = 0; i < 100; i++) myList.Add(new { A = r.Next(), B = r.Next() }); m 问问题 问问题 2012-05-22T01:20:57.770 4954 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Random r = new Random(); List myList = new List(); for (int i = 0; i < 100; i++) myList.Add(new { A = r.Next(), B = r.Next() }); myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); The above code defines a generic List an populates it with 100 anonymous variables with two members, A and B. Let's say I want to sort myList on A. The final line attempts to sort the list, however this code clearly doesn't compile because the compiler doesn't know what the list of objects contains. Without using LINQ, is it possible to somehow sort this list using a lambda or similar? Having trouble solving an exercise from CodeChef [easy] So, basically I'm feeling incredibly dumb, because of this exercise, I've spent like 4 or 5 hours trying to code it, and so far I've not been successful. I have come to the realization that this one is easier to solve with a tree traversal using the Longest Path approach, But I'm not sure (Could you please confirm this to me.), could be over-kill since it's supposed to be one of the easy problems, So Could you please help me with some guidance or basic steps or algorithm approaches on how to solve this one? all kinds of help is certainly appreciated. PS. I usually post some code about what I've done so far, but I believe that to this point everything has been so wrong that I prefer to start from scratch, at least in terms of ideas. Thanks. As per-request, here's the Code I typed according to the accepted answer to solve the Exercise: def get_max_sum(matrix) (1...matrix.length).each do |index| flag = 0 matrix[index].each_with_index do |e, i| add = (matrix[index-1][flag] > matrix[index-1][flag+1]) ? matrix[index-1][flag] : matrix[index-1][flag+1] e += add matrix[index][i] = e flag = flag + 1 end end matrix[-1][0] end Where the matrix param is an array of arrays, each one representing a row from the triangle. c#listsortinglambda 4 3 回答 3 This answer is useful 6 只要您设法使用var语法将列表声明为匿名类型的对象列表，或者愿意使用，就可以在没有 LINQ 的情况下对其进行排序dynamic： Random r = new Random(); List <dynamic>myList = new List(); for (int i = 0; i < 100; i++) myList.Add(new { A = r.Next(), B = r.Next() }); myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); 于 2012-05-22T01:28:03.257 回答 This answer is useful 2 首先，如果您非常小心地使用隐式类型，则可以使用 LINQ： var myList = Enumerable.Range(0, 100) .Select(index => new { A = r.Next(), B = r.Next() }) .ToList(); myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); 其次，如果您愿意使用dynamic，请将列表键入为a List<dynamic>，然后您可以直接使用LINQ。 但是，我真的不明白您为什么坚持使用匿名类型。只需创建一个标称类型并享受强类型、编译时安全和 LINQ 的荣耀！ 于 2012-05-22T01:26:48.700 回答 This answer is useful 1 LINQ 没有魔法——您可以查看所有方法签名并了解类型是如何计算出来的。 您想要这样的东西来创建您的类型列表（类似于ToList()扩展名）： List <t>NewList<t>(T ignored) { return new List<t>(); } 并将其用作 Random r = new Random(); var myList = NewList(new { A = r.Next(), B = r.Next() }); for (int i = 0; i < 100; i++) myList.Add(new { A = r.Next(), B = r.Next() }); myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); 于 2012-05-22T01:33:45.733 回答 Related 1 boost-asio - 我需要多少个对象 boost::asio::ip::tcp::acceptor 才能接受多个线程中的连接？ 1 javascript - i18n Javascript 设置 0 python - 如何使用python访问语音引擎 2 c++ - C++ 错误对于字符来说太大了 1 ember.js - 延迟路由更改，直到在 Ember 中加载数据 2 ios - 有没有类似 AXML for iOS 的东西？ 1 javascript - 使用 JavaScript/Node.js 从 IP 地址获取两个字母的大陆代码 0 cakephp - CakePHP：多重验证规则 - 不要在选择选项中显示强制提示 1 javascript - 获取所有孩子的当前值/内容，和, 的 1 javascript - Chrome 不支持使用 javascript 的表格宽度设置 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10694654
> 
> 赞同：4
> 
> 时间：
> 
> 标签：c#, list, sorting, lambda

```
Random r = new Random();
List<object> myList = new List<object>();

for (int i = 0; i < 100; i++)
  myList.Add(new { A = r.Next(), B = r.Next() });

myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); 
```

The above code defines a generic `List` an populates it with 100 anonymous variables with two members, A and B.

Let's say I want to sort myList on A. The final line attempts to sort the list, however this code clearly doesn't compile because the compiler doesn't know what the list of objects contains.

Without using LINQ, is it possible to somehow sort this list using a lambda or similar?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T01:28:03.257

只要您设法使用`var`语法将列表声明为匿名类型的对象列表，或者愿意使用，就可以在没有 LINQ 的情况下对其进行排序`dynamic`：

```
Random r = new Random();
List<dynamic> myList = new List<object>();

for (int i = 0; i < 100; i++)
    myList.Add(new { A = r.Next(), B = r.Next() });

myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T01:26:48.700

首先，如果您非常小心地使用隐式类型，则可以使用 LINQ：

```
var myList = Enumerable.Range(0, 100)
                       .Select(index => new { A = r.Next(), B = r.Next() })
                       .ToList();
myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); 
```

其次，如果您愿意使用`dynamic`，请将列表键入为a `List<dynamic>`，然后您可以直接使用LINQ。

但是，我真的不明白您为什么坚持使用匿名类型。只需创建一个标称类型并享受强类型、编译时安全和 LINQ 的荣耀！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T01:33:45.733

LINQ 没有魔法——您可以查看所有方法签名并了解类型是如何计算出来的。

您想要这样的东西来创建您的类型列表（类似于`ToList()`扩展名）：

```
List<T> NewList<T>(T ignored)
{
    return new List<T>();
} 
```

并将其用作

```
Random r = new Random();
var myList = NewList(new { A = r.Next(), B = r.Next() });

for (int i = 0; i < 100; i++)
  myList.Add(new { A = r.Next(), B = r.Next() });

myList.Sort( (obj1, obj2) => obj1.A.CompareTo(obj2.A) ); 
```</t></t></t></dynamic></dynamic>

# php - PHP 和 Apache - 我如何停止将这么多东西写入日志

> ID：10694655
> 
> 赞同：0
> 
> 时间：2012-05-22T01:21:06.780
> 
> 标签：php, apache

我有一个有点过时的托管公司。我有一个 PHP/Apache 设置。

出于某种原因，它不断向日志文件写入大量内容。有两个日志文件：

access_log 和 error_log

我从不查看访问日志，那么是否有一些可以打开或关闭的 apache 配置会停止对访问日志的所有写入？

对于error_log，我非常随机地得到了很多东西。

```
[Sun May 20 00:56:28 2012] [error] [client 92.96.145.124] PHP Notice:  Undefined index:  photo_path in /home/webadmin/problemio.com/html/utils/api/somefile.php on line 398
[Sun May 20 00:56:28 2012] [error] [client 92.96.145.124] PHP Notice:  Undefined index:  photo_path in /home/webadmin/problemio.com/html/utils/api/somefile.php on line 398 
```

但那些是通知。我怎样才能让它向我显示警告和错误？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:23:20.357

我曾经面临同样的问题。我问了CS，他们只是回答“不能”。我最终编写了一个 cron 脚本来删除那些垃圾文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:39:52.820

在页面/标题的顶部包括这两个之一，这应该注意通知（根据您想要看到的内容）。

```
// Turn off all error reporting
error_reporting(0);

// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T02:21:04.930

未定义时使用此变量

> /home/webadmin/problemio.com/html/utils/api/somefile.php 中的 photo_path 位于第 398 行

你需要找到文件。发现错误。

# algorithm - 解决 CodeChef 的练习时遇到问题 [简单]

> ID：10694656
> 
> 赞同：3
> 
> 时间：2012-05-22T01:21:09.687
> 
> 标签：algorithm, graph-algorithm

所以，基本上我感觉非常愚蠢，因为[这个练习](http://www.codechef.com/problems/SUMTRIAN)，我花了大约 4 到 5 个小时来尝试编写它，但到目前为止我还没有成功。

我已经意识到，使用[最长路径](http://en.wikipedia.org/wiki/Longest_path_problem)方法通过树遍历更容易解决这个问题，但我不确定（**请你向我确认一下。**），可能会过度杀戮，因为它应该是一个简单的问题，所以你能帮我一些指导或基本步骤或算法方法来解决这个问题吗？各种帮助当然不胜感激。

PS。我通常会发布一些关于我到目前为止所做的代码，但我相信到目前为止一切都非常错误，以至于我更愿意从头开始，至少在想法方面。

谢谢。

根据要求，这是我根据接受的答案键入的代码来解决练习：

```
def get_max_sum(matrix)
  (1...matrix.length).each do |index|  
    flag = 0  
    matrix[index].each_with_index do |e, i|    
      add = (matrix[index-1][flag] > matrix[index-1][flag+1]) ? matrix[index-1][flag] : matrix[index-1][flag+1]
      e += add
      matrix[index][i] = e
      flag = flag + 1
    end    
  end
  matrix[-1][0]
end 
```

其中矩阵参数是一个数组数组，每个数组代表三角形中的一行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T04:04:35.720

如果您从底部开始并逐步向上，则此问题很容易。考虑三角形

```
 1
  1 2
 4 1 2
2 3 1 1 
```

查看倒数第二行。如果通过三角形的某些路径到达 4，您将向右移动到 3，总和为 7（加上它上面路径中的任何内容）。如果您已达到 1，您将向左移动到 3，总和为 4（加上其上方路径中的任何内容）。如果你在 2，你可以移动任何一种方式，总和为 3（加上它上面路径中的任何东西）。因此，通过用总和替换倒数第二行，三角形

```
 1
 1 2
7 4 3 
```

将具有与原始三角形相同的最大和路径。现在对缩小的三角形递归地执行相同的过程。从倒数第二行的 1 向左移动到 7，总和为 8，从 2 向左移动到 4，总和为 6。缩小的三角形现在看起来像

```
 1
8 6 
```

最后，从倒数第二行的 1 向左移动到 8，总和为 9，这就是问题的答案。

还有一种自上而下的工作方法。在每个步骤中，您将三角形中的每个数字替换为通向该数字的任何路径的最大和。从顶部开始，三角形开始

```
1 
```

然后第二行被它的总和替换

```
 1
2 3 
```

然后第三排

```
 1
 2 3
6 4 5 
```

最后是第四排

```
 1
  2 3
 6 4 5
8 9 6 6 
```

答案是最下面一行中最大的和，即 9。我一直发现自上而下的方法比自下而上的方法更难管理，但是这两种算法是对偶的，所以你可以选择哪个来实施。自上而下的方法确实有一个优势，即您可以在读取数据时累积下一行；使用自下而上的方法，您必须在计算任何总和之前读取并存储整个输入。

我会留给你写代码。当你这样做时，记住你一次只需要存储两行，前一行和下一行。哪个是上一个，哪个是下一个取决于您是自上而下还是自下而上工作——上一行是您刚刚填写的行，下一行是您当前正在处理的行，这意味着如果您自上而下工作，则下一行的总和比上一行多，如果您自下而上工作，则下一行的总和比前一行少一个。请在您开始工作时发布您的代码，以便其他人可以从您的工作中学习。

顺便说一句，这个问题最初来自[Project Euler](http://projecteuler.net/problem=18)。Code Chef 从他们那里偷走了它，显然没有注明出处，这真的不是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:08:02.800

注意：原始帖子中的问题陈述假设一个严格的直角三角形：

```
on each path the next number is located on the row below,
more precisely either directly below or below and one place to the right. 
```

另请查看他们提供的示例以确认这一点。

回答：

*   1]使用二维数组来存储三角形

*   根据规则重新计算三角形

*   走三角形的最后一行——即底边——找到最大值。

代码：

```
import java.util.Arrays;

public class NumberTriangle {

    //MAIN IS FOR TESTING ONLY
public static void main(String[] ars) {
    int[][] input = { { 1 }, { 4, 8 }, { 9, 8, 7 }, { 1, 3, 6, 9 },
            { 7, 5, 2, 7, 3 } };

    int max = compute(input);// answer: max length
    // not necessary; but shows new triangle
    for (int[] A : input)
        System.out.println(Arrays.toString(A));

    // print the answer
    System.out.println("Largest number: " + max);
}

    //THIS IS THE SOLUTION
public static int compute(int[][] input) {
    //compute new triangle
    for (int y = 1; y < input.length; y++)
        for (int x = 0; x < input[y].length; x++) {
            int first = x - 1 > 0 ? x - 1 : 0;
            int last = x < input[y - 1].length ? x
                    : input[y - 1].length - 1;
            int max = Math.max(input[y - 1][last], input[y - 1][first]);
            input[y][x] += max;
        }
    //extract max value;
    int max = -1;
    int lastRow = input[input.length - 1].length;
    for (int x = 0, y = input.length - 1; x < lastRow; x++)
        if (max < input[y][x])
            max = input[y][x];
    return max;
}// compute
} 
```

测试用例答案：

```
[1]
[5, 9]
[14, 17, 16]
[15, 20, 23, 25]
[22, 25, 25, 32, 28]

Largest number: 32 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:29:34.457

最长路径查找方法对我来说感觉是错误的方法，因为每条路径都会有 N-1 条边长。我想我会通过假装输入是二叉树并找到树中最大的元素来开始该方法 - 找到底部两行的最大总和，在倒数第二行中记住结果，然后向上移动另一个排。（我希望这有某种意义......）

# c# - 如何使用 Oracle 的实体框架支持强制帕斯卡案例？

> ID：10694659
> 
> 赞同：1
> 
> 时间：2012-05-22T01:22:53.673
> 
> 标签：c#, oracle, entity-framework, orm

Oracle 的实体框架支持使所有类名大写并保留下划线。所以 ORDER_ITEMS 表在类名中变为 ORDER_ITEMS。但我想对类名使用 Pascal 大小写。

ORDER_ITEMS ==> 需要 OrderItems。

如何更改默认命名规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-05T20:15:11.017

大约 2 周前，我的任务是摆脱 Linq Connect 作为我们的数据提供者，将 EF 用于我们的 ORM 操作。好吧，众所周知，当微软和甲骨文参与进来时，事情从来都不是一件容易的事，因为它们不能很好地合作。精明的开发人员需要为 Pascal 大小写和复数找到解决方案，以便从 Oracle 数据库生成的实体符合我们的标准。我们不希望带有下划线的表名出现在我们的模型上。经过一番思考和开发，最终得出了一个好的解决方案。最终结果是操作 EDMX 文件，然后运行 ​​T4 模板以使奇迹发生。我们的最终结果将所有实体及其属性转换为 Pascal 套管。它还将所有存储函数转换为 Pascal 大小写。集合的导航属性也都是多元化的。以下是要遵循的步骤和代码片段。希望这对编码社区中的某些人有所帮助，您可以随时通过 Twitter 上的 seafarer_007 与我联系，提供有用的意见或建议。这里是： 1\. 使用 EF 数据模型项生成 EDMX。我在 Visual Studio 2012 中使用了 EF 5.0。 2\. 编写一个控制台应用程序来操作 EDMX 和设计器文件。我在 App Config 中添加了对两者的引用。3\. 应该就是这样，您将拥有 Pascal 大小写和复数实体。您可以随时根据自己的需要调整 Pascal 案例方法。4\. 我在 Visual Studio 2012 和 EF 5.0 上测试了代码。5\. 警告：仅适用于没有点的单字命名空间，基本上你不能为模型使用 OrgName.DeptName.Namespace，它只会处理 OrgName，但是，

控制台应用程序代码如下：

```
 static void Main(string[] args)
    {

        string pathFile = string.Empty;
        string designFile = string.Empty;

        //EDMX File location
        if (ConfigurationManager.AppSettings["EDMX"] != null)
        {
            pathFile = ConfigurationManager.AppSettings["EDMX"].ToString();
        }

        //Designer location for EF 5.0
        if (ConfigurationManager.AppSettings["EDMXDiagram"] != null)
        {
            designFile = ConfigurationManager.AppSettings["EDMXDiagram"].ToString();
        }

        XDocument xdoc = XDocument.Load(pathFile);

        const string CSDLNamespace = "http://schemas.microsoft.com/ado/2009/11/edm";
        const string MSLNamespace = "http://schemas.microsoft.com/ado/2009/11/mapping/cs";

        XElement csdl = xdoc.Descendants(XName.Get("Schema", CSDLNamespace)).First();
        XElement msl = xdoc.Descendants(XName.Get("Mapping", MSLNamespace)).First();

        #region CSDL
        foreach (var entitySet in csdl.Element(XName.Get("EntityContainer", CSDLNamespace)).Elements(XName.Get("EntitySet", CSDLNamespace)))
        {
            entitySet.Attribute("Name").Value = PascalCase(entitySet.Attribute("Name").Value);
            entitySet.Attribute("EntityType").Value = PascalCase(entitySet.Attribute("EntityType").Value);
        }
        foreach (var associationSet in csdl.Element(XName.Get("EntityContainer", CSDLNamespace)).Elements(XName.Get("AssociationSet", CSDLNamespace)))
        {
            foreach (var end in associationSet.Elements(XName.Get("End", CSDLNamespace)))
            {
                end.Attribute("EntitySet").Value = PascalCase(end.Attribute("EntitySet").Value);
            }
        }

        foreach (var funtionSet in csdl.Element(XName.Get("EntityContainer", CSDLNamespace)).Elements(XName.Get("FunctionImport", CSDLNamespace)))
        {

            funtionSet.Attribute("Name").Value = PascalCase(funtionSet.Attribute("Name").Value);

        }

        foreach (var entityType in csdl.Elements(XName.Get("EntityType", CSDLNamespace)))
        {
            entityType.Attribute("Name").Value = PascalCase(entityType.Attribute("Name").Value);

            foreach (var key in entityType.Elements(XName.Get("Key", CSDLNamespace)))
            {
                foreach (var propertyRef in key.Elements(XName.Get("PropertyRef", CSDLNamespace)))
                {
                    propertyRef.Attribute("Name").Value = PascalCase(propertyRef.Attribute("Name").Value);
                }
            }

            foreach (var property in entityType.Elements(XName.Get("Property", CSDLNamespace)))
            {
                property.Attribute("Name").Value = PascalCase(property.Attribute("Name").Value);
            }

            foreach (var navigationProperty in entityType.Elements(XName.Get("NavigationProperty", CSDLNamespace)))
            {
                navigationProperty.Attribute("Name").Value = PascalCase(navigationProperty.Attribute("Name").Value, true, true); 
            }

        }
        foreach (var association in csdl.Elements(XName.Get("Association", CSDLNamespace)))
        {
            foreach (var end in association.Elements(XName.Get("End", CSDLNamespace)))
            {
                end.Attribute("Type").Value = PascalCase(end.Attribute("Type").Value);
            }               

            foreach(var refs in association.Elements(XName.Get("ReferentialConstraint", CSDLNamespace)))
            {

                foreach (var pri in refs.Elements(XName.Get("Principal", CSDLNamespace)))
                {

                    foreach (var proref in pri.Elements(XName.Get("PropertyRef", CSDLNamespace)))
                    {

                        proref.Attribute("Name").Value = PascalCase(proref.Attribute("Name").Value);
                    }

                }

                foreach (var pri in refs.Elements(XName.Get("Dependent", CSDLNamespace)))
                {

                    foreach (var proref in pri.Elements(XName.Get("PropertyRef", CSDLNamespace)))
                    {

                        proref.Attribute("Name").Value = PascalCase(proref.Attribute("Name").Value);
                    }

                }

            }

        }
        #endregion

        #region MSL

        foreach (var entitySetMapping in msl.Element(XName.Get("EntityContainerMapping", MSLNamespace)).Elements(XName.Get("EntitySetMapping", MSLNamespace)))
        {
            entitySetMapping.Attribute("Name").Value = PascalCase(entitySetMapping.Attribute("Name").Value);

            foreach (var entityTypeMapping in entitySetMapping.Elements(XName.Get("EntityTypeMapping", MSLNamespace)))
            {
                entityTypeMapping.Attribute("TypeName").Value = PascalCase(entityTypeMapping.Attribute("TypeName").Value);
                foreach
                (var scalarProperty in
                (entityTypeMapping.Element(XName.Get("MappingFragment", MSLNamespace))).Elements(XName.Get("ScalarProperty", MSLNamespace))
                )
                {
                    scalarProperty.Attribute("Name").Value = PascalCase(scalarProperty.Attribute("Name").Value);
                }

            }
        }
        foreach (var associationSetMapping in msl.Element(XName.Get("EntityContainerMapping", MSLNamespace)).Elements(XName.Get("AssociationSetMapping", MSLNamespace)))
        {
            foreach (var endProperty in associationSetMapping.Elements(XName.Get("EndProperty", MSLNamespace)))
            {
                foreach (var scalarProperty in endProperty.Elements(XName.Get("ScalarProperty", MSLNamespace)))
                {
                    scalarProperty.Attribute("Name").Value = PascalCase(scalarProperty.Attribute("Name").Value);
                }
            }
        }

        foreach (var functionSetMapping in msl.Element(XName.Get("EntityContainerMapping", MSLNamespace)).Elements(XName.Get("FunctionImportMapping", MSLNamespace)))
        {
            functionSetMapping.Attribute("FunctionImportName").Value = PascalCase(functionSetMapping.Attribute("FunctionImportName").Value);
        }
        #endregion

        xdoc.Save(pathFile);

        XmlDocument designXml = new XmlDocument();

        designXml.Load(designFile);      

        XmlNamespaceManager dsMan = new XmlNamespaceManager(designXml.NameTable);
        dsMan.AddNamespace("edmx", "http://schemas.microsoft.com/ado/2009/11/edmx");
        dsMan.AddNamespace("d", "http://schemas.microsoft.com/ado/2009/11/edmx");

        #region Designer

        XmlNodeList entitySet1 = designXml.DocumentElement.SelectNodes("//d:Diagrams", dsMan);

        foreach (XmlNode xn in entitySet1)
        {

            foreach (XmlElement xp in xn.ChildNodes)
            {

                foreach (XmlElement z in xp.ChildNodes)
                {

                    if (z.Attributes[0].Name == "EntityType")
                    {

                        z.Attributes[0].Value = PascalCase(z.Attributes[0].Value.ToString(), true);

                    }

                }

            }

        }

        designXml.Save(designFile);

        #endregion

    }

    #region Pluralization

    public static string Pluralize(string name)
    {

   return System.Data.Entity.Design.PluralizationServices.PluralizationService.CreateService(new CultureInfo("en-US")).Pluralize(name);
    }

    #endregion

    #region Pascal Casing

    public static string PascalCase(StructuralType type, bool sanitizeName = true)
    {
        if (type == null)
        {
            return null;
        }

        return PascalCase(type.Name, sanitizeName);
    }

    public static string PascalCase(EdmMember member, bool sanitizeName = true)
    {
        if (member == null)
        {
            return null;
        }

        return PascalCase(member.Name, sanitizeName);
    }

    public static string PascalCase(string name, bool sanitizeName = true, bool pluralize = false)
    {

       // if pascal case exists
       // exit function

        Regex rgx = new Regex(@"^[A-Z][a-z]+(?:[A-Z][a-z]+)*$");

        string pascalTest = name;

        if (name.Contains("."))
        {
            string[] test  = new string[]{};
            test = name.Split('.');

            if(rgx.IsMatch(test[1].ToString()))
            {
                return name;
            }

        }
        else
        {

            if (rgx.IsMatch(name))
            {
                return name;
            }

        }

        //Check for dot notations in namespace

        bool contains = false;
        string[] temp = new string[] { };
        var namespc = string.Empty;

        if (name.Contains("."))
        {
            contains = true;
            temp = name.Split('.');
            namespc = temp[0];

        }

        if (contains)
        {
            name = temp[1];
        }

        name = name.ToLowerInvariant();

        string result = name;
        bool upperCase = false;

        result = string.Empty;
        for (int i = 0; i < name.Length; i++)
        {
            if (name[i] == ' ' || name[i] == '_')
            {
                upperCase = true;
            }
            else
            {
                if (i == 0 || upperCase)
                {
                    result += name[i].ToString().ToUpperInvariant();
                    upperCase = false;
                }
                else
                {
                    result += name[i];
                }
            }
        }

        if (contains)
        {

            result = namespc.ToString() + "." + result;

        }

        if (pluralize)
        {
            result = Pluralize(result);
        }

        return result;
    }
    #endregion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:12:36.240

它还不可用。 [https://forums.oracle.com/forums/thread.jspa?messageID=9681138](https://forums.oracle.com/forums/thread.jspa?messageID=9681138)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-13T18:38:14.777

如果它是代码优先方法，假设您正在使用任何内联查询，只包括命名对象之前和之后的引号转义序列。它将允许。

# javascript - document.getElementById().value return undefined in chrome

> ID：10694661
> 
> 赞同：14
> 
> 时间：2012-05-22T01:23:02.260
> 
> 标签：javascript

```
<div id="hour" style="display: none">2</div> 
```

JavaScript code:

```
<script type="text/javascript">
    var _h = document.getElementById('hour').value
    alert(_h);
</script> 
```

Chrome returns `undefined`. What is the problem?

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-22T01:31:21.727

该`.value`属性适用于表单元素（输入），而不是 div。获取 div 元素内容的最简单方法是`.innerHTML`：

```
document.getElementById('hour').innerHTML; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T01:27:12.117

```
document.getElementById("hour").innerText 
```

或者

```
document.getElementById("hour").innerHTML 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T01:28:41.247

div 没有值。它不是输入。

您想使用innerHTML 或innerText/textContent。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-05T01:35:09.800

利用

```
document.getElementById() method for displaying text on google console. 
```

正如其他 OP 所说， div 没有 .value 属性。

您可以在此链接中查看所有 HTML DOM 属性： [https ://www.w3schools.com/JSREF/DEFAULT.ASP](https://www.w3schools.com/JSREF/DEFAULT.ASP)

# php - PHP 评估变量寻找最佳拟合

> ID：10694665
> 
> 赞同：1
> 
> 时间：2012-05-22T01:24:14.427
> 
> 标签：php

假设我有四个值：

```
$right 
$down
$left
$up 
```

我想从四个中选择最好的。这些值可以是`false`、`0`、`1-9`或`D`。

False 是最差的，0 次之，1-9 明显不同，9 是最好的，最后 D 是最好的（双排）。

在 PHP 中检查这个的最好方法是什么？我正在考虑首先检查所有变量中的 D 。如果没有 D，则在所有四个中寻找最大的数字，然后寻找 0，最后寻找 false。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:32:29.983

在我看来，您似乎对 , 或 最后的结果感兴趣`up`，因此`down`将这些*值*保留为数组中的值与它们的“强度”值配对并简单地对它们进行排序是有意义的。未经测试的粗略草稿：`left``right`

 *```
$values = array(
    array('type' => 'right', 'value' => false),
    array('type' => 'down',  'value' => 3)
    ...
);

usort($values, function ($a, $b) {
    static $order = array(false, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'D');

    $a = array_search($a['value'], $order, true);
    $b = array_search($b['value'], $order, true);
    return $a - $b;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:46:48.583

这应该会给你你正在寻找的答案。

```
$test['up'] = false;
$test['down'] = 4;
$test['left'] = 'D';
$test['right'] = 0;

// for display only
print_r($test);

asort($test,SORT_STRING);

// for display only
print_r($test);

// Array key of the last value in array / best
echo array_pop(array_keys($test)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:39:43.017

我首先将它转换为一个数组（你可以使用[`compact()`](http://php.net/manual/en/function.compact.php)它，或者只是存储在一个数组中），然后你可以使用[`uasort()`](http://php.net/manual/en/function.uasort.php)用户定义的比较函数：

```
function myCompare($a, $b)
{
    // Convert false and D to -1 and 10, respectively.
    $a = ($a === false ? -1 : ($a == 'D' ? 10 : $a));
    $b = ($b === false ? -1 : ($b == 'D' ? 10 : $b));

    return ($b - $a);
}

$arr = compact('right', 'down', 'left', 'up');

uasort($arr, 'myCompare'); 
```

或者在 PHP 5.3+ 上，您可以使用闭包：

```
$arr = compact('right', 'down', 'left', 'up');

uasort($arr, function ($a, $b) {
    // Convert false and D to -1 and 10, respectively.
    $a = ($a === false ? -1 : ($a == 'D' ? 10 : $a));
    $b = ($b === false ? -1 : ($b == 'D' ? 10 : $b));

    return ($b - $a);
}); 
```*

# c# - 由于访问级别保护，无法访问变量

> ID：10694666
> 
> 赞同：0
> 
> 时间：2012-05-22T01:24:19.670
> 
> 标签：c#

我有以下课程：

```
class Department
{
 private string departmentId;
 private string departmentName;
 private Hashtable doctors = new Hashtable();//Store doctors for 
                                                //each department
public Hashtable Doctor
{
 get { return doctors; }
}
} 
```

我有一个包含部门对象的数组列表：

```
private static ArrayList deptList = new ArrayList();
public ArrayList Dept
{
 get { return deptList; }
} 
```

我正在尝试从每个部门获取所有医生（部门类中的哈希表）：

```
foreach (Department department in deptList) 
        {
foreach (DictionaryEntry docDic in department.Doctor)
        {
foreach (Doctor doc in docDic.Value)//this is where I gets an error
{

if (doc.ID.Equals(docID))//find the doctor specified
{
}
}
}
} 
```

但我无法编译程序。它给出了一个**错误**：

```
foreach statement cannot operate on variables of type 'object' because
'object' does not contain a public definition for 'GetEnumerator' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:29:59.700

您正在尝试遍历字典条目的`Value`字段，将其视为`Doctor`s 的集合。的迭代`docDic`应该已经完成​​了您正在寻找的事情，只需要`Value`转换`docDic` `DictionaryEntry`.

```
Doctor doc = (Doctor) docDic.Value; 
```

更好的是，您可以使用泛型并在地图声明时表示字典键/值的类型：

```
private Hashtable<string, Doctor> doctors = new Hashtable<string, Doctor>(); 
```

（该`Doctor`领域的类似变化）

那么你根本不需要上面的铸件。

*注意*：我假设您正在从医生的 id（键）映射到`Doctor`对象（值），并且 id 是一个字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:33:38.283

**使用公共**访问修饰符为您的课程添加前缀

```
 public  class Department
{
private string departmentId;
private string departmentName;
private Hashtable doctors = new Hashtable();//Store doctors for 
                                            //each department
 public Hashtable Doctor  
{
 get { return doctors; }
  }
 } 
```

# javascript - javascript生成50个不重复的随机数

> ID：10694668
> 
> 赞同：0
> 
> 时间：2012-05-22T01:24:28.983
> 
> 标签：javascript

我想用javascript生成50个不重复的随机数，数字在1到50之间。我怎么实现呢？50个数字存储在一个数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:29:42.663

首先生成一个有序列表：

```
var i, arr = [];
for (i = 0; i < 50; i++) {
    arr[i] = i + 1;
} 
```

然后随机播放。

```
arr.sort(function () {
    return Math.random() - 0.5;
}); 
```

我测试了上面的方法，效果很好。但是，ECMAScript 规范不需要`Array.sort`以这种方法生成真正随机列表的方式实现 - 所以虽然它现在可能有效，但结果可能会在没有警告的情况下发生变化。下面是 Fisher-Yates shuffle 的实现，它不仅保证产生合理的随机分布，而且比劫持排序更快。

```
function shuffle(array) {
    var p, n, tmp;
    for (p = array.length; p;) {
        n = Math.random() * p-- | 0;
        tmp = array[n];
        array[n] = array[p];
        array[p] = tmp;
    }
} 
```

# google-chrome - Chrome 浏览器不接受带有 @ 的 URL 中的用户凭据

> ID：10694671
> 
> 赞同：1
> 
> 时间：2012-05-22T01:24:44.570
> 
> 标签：google-chrome, browser

我正在尝试通过 URL 传递用户凭据来将用户登录到另一个应用程序。它一直是这样设置的，

[http://username:password@status.domain.com:8080](http://username:password@status.domain.com:8080)

但是，chrome 不喜欢这样。要在 IE 中修复它，我们需要在用户浏览器中添加密码。

有任何想法吗？

# objective-c - 使用ARC为ios声明只读属性的正确方法是什么

> ID：10694676
> 
> 赞同：18
> 
> 时间：2012-05-22T01:25:17.890
> 
> 标签：objective-c, object, properties, automatic-ref-counting, readonly

一般来说，我是 iOS 开发的新手，从未处理过手动引用计数（保留、释放、自动释放）。因此，我对魔术 ARC 的表现不太了解。

我以为我明白了，直到有人问我应该为指向对象的只读属性赋予什么类型的所有权（ `weak`, `strong`,等），例如：`assign`

```
@property (readonly,nonatomic) NSString* name; 
```

我在这里阅读了 有关 ARC中[只读 @property 的问题，](https://stackoverflow.com/questions/8716840/questions-about-a-readonly-property-in-arc)除非您在属性时指定支持变量，否则不会实际编译`strong`/ ；我只是碰巧指定了一个像这样的支持 ivar：`weak``@synthesize`

```
@synthesize name = _name; 
```

现在我知道变量的默认“生命周期限定符”很强大，从这里开始：http: [//developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref /doc/uid/TP40011226-CH1-SW4](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)

所以长话短说 - 我间接地将我的属性定义`(readonly,nonatomic,strong)`为`_name`ivar 被隐式​​声明为`__strong`.

我有几个问题：

1.  是否`strong`使用正确的生命周期限定符？我假设是这样，否则支持 my 的对象`NSString*`将不会在任何地方拥有，因此会被自动释放（来自 Java 领域这是有道理的，因为默认情况下所有引用都是强的）。

2.  在这种情况下是否有任何其他修饰符有意义，例如`copy`or `assign`？

3.  将属性声明为`(readonly,nonatomic,strong)`并对使用该*属性*`(readonly,nonatomic)`的代码有任何影响吗？例如。在没有关键字的情况下声明它会导致对象指针存储为属性将存储在指针中的位置吗？*`strong``__unsafe_unretained``strong``__strong`*

 *谢谢！

**编辑**

据我所知，以下适用于只读属性：

*   对于非 NSObject* 类型（int、float、void* 等），请使用`(readonly, assign)`.
*   对于对象指针，使用`(readonly, strong)`or `(readonly, copy)`- 这些功能与只读属性相同，但如果您扩展/子类并将属性重新声明为`readwrite`.
*   对于对象指针，`(readonly, weak)`只有当您要在该属性中存储一个已经很弱的指针时才有意义（该指针在其他地方必须是强的，否则对象将被释放）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T01:41:10.303

1.  `strong`如果您想保持对您所指向的任何内容的强（拥有）引用，则使用是正确的。通常，您确实需要强引用，但为了防止循环引用（特别是在父/子关系中，如果父指向子，子指向父，它们将永远不会被释放）有时需要使用弱引用. 此外，如果你想保留一个指向你不拥有的对象的指针，但希望它只在*它存在时才*有效，那么你想使用弱指针，因为当它被所有者释放时，你的指针将自动设置为`nil`并且不会指向不应该指向的内存。

2.  `assign`与标量值一起使用，并且是默认设置器。 `copy`如果您想自动制作对象的副本并将指针设置为副本而不是指向原始对象，那么这是有意义的。仅当您有特定需求时才有意义（通常是因为您不希望对象在您身上发生变异）。

3.  您提供的链接显示 __strong 是默认值（因此您不需要指定它）是指变量**而**不是**声明的****属性**。声明属性的默认值是`assign`这样，它肯定会有所作为。但是，如果您想要`assign`，无论您是否指定它都没有区别（只是为了清楚它是您想要的）。 **编辑**：但是，正如 Jacques 所指出的，这随着 LLVM 3.1 的变化而变化，默认值从***更改***`assign`为`strong`。在这种情况下，您是否指定绝对没有区别`strong`如果您愿意，可以将其排除在外。我个人认为最好把它拼出来（特别是因为不同版本之间存在冲突），以便每个看代码的人都在同一页面上。不过，其他人可能不同意这一点。:)

我建议在这里阅读**Objective-C 编程语言的****声明属性**部分：.**`<document removed by Apple with no direct replacement>`**

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T03:54:18.370

另外一点：属性可以从`readonly`to重新声明`readwrite`。例如，子类可以将超类的只读属性变为可读写，类似于有多少 Cocoa 类具有添加可变性的子类。同样，一个属性可能是公开只读的，但该类可以将其重新声明为可读写，以便在类扩展中内部使用。因此，当类设置自己的属性时，它可以利用合成的 setter 正确地进行内存管理并发出适当的 Key-Value Observing 更改通知。

按照目前的情况，该属性的所有其他属性都必须保持一致。可以想象编译器可以放宽这个要求。（有些人认为这是一个错误。）无论如何，这是声明`readonly`具有所有权属性（如`strong`、`copy`或 weak）的属性的一个原因——这样它就可以匹配`readwrite`其他地方的重新声明。

关于您的问题 3，您是否在问所有权限定符是否会影响调用 getter 的代码？不，它没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T19:45:23.437

这两行代码对我有用：

.h 文件：

```
@property (nonatomic, readonly, copy) NSString *username; 
```

.m 文件：

```
@property (nonatomic, readwrite, copy) NSString *username; 
```***

# c++ - 有什么办法可以在内部镜像 Microsoft 的符号服务器？

> ID：10694677
> 
> 赞同：2
> 
> 时间：2012-05-22T01:25:18.347
> 
> 标签：c++, visual-studio, pdb-files, symbol-server

我们有一个无法访问互联网的内部隔离实验室网络。我们经常在此网络上的 PC 上运行各种工具，这些工具需要与这些 PC 上安装的 Windows/MSVC(pp)/MFC 二进制文件相对应的符号。我们运行的工具之一是 Visual Studio 独立分析器（即 vsperfcmd/vsperfreport/etc）。目前我们可以很容易地获得我们公司的符号......并且通过在 Internet 暴露的 PC 上挖掘我们的本地符号缓存，我可以手动找到与实验室网络中 PC 上的二进制文件相对应的符号。这是一个非常乏味、容易出错的过程，而且非常烦人。我想找到一种更好的方法来自动从我们的实验室网络中查找符号。

理想情况下，我想在实验室网络可见的常规网络上设置某种符号服务器，以便这些工具可以正常工作。有没有公​​认的方法来做到这一点？我可以镜像 MS 符号服务器或为本地网络提供某种代理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:39:26.890

听起来您的实验室并非完全孤立，因为您的机器既连接到常规 Intranet 网络，也连接到实验室网络。

在此配置中，您可以使用 SymProxy： http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff558846](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558846(v=vs.85).aspx) (v=vs.85).aspx 。您必须将它安装到从实验室可见的双网卡机器上，并且能够从互联网上获取文件。

# iphone - UIWebView 中如何处理图像

> ID：10694680
> 
> 赞同：2
> 
> 时间：2012-05-22T01:25:47.380
> 
> 标签：iphone, ios, uiwebview, uiimage

我正在考虑编写一些自定义 UITableViewCells，这些 UITableViewCells 将 UIWebView 喷入其中。我希望有几个图标将出现在 uiWebview 的 html 中，图像本地存储在设备上。

我想知道在为不同设备构建时这些是否被视为普通图像。即遵循视网膜显示器的命名约定@2x.png？

是否将其转换为 uiwebviews？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:18:06.070

UIWebView 可以解释和显示 HTML 告诉它的任何内容。简而言之，答案是否定的，webview 会将 EXACT 链接的图像显示到屏幕上。我已经在我开发的应用程序中实现了 UIWebViews，它只显示内部 HTML。我对这些所做的只是提供 2X 图像并让 webview 处理大小。

解决此问题的另一种方法是在内部识别（这是可能的）如果您正在使用视网膜显示器并提供调用 @2x 图像的 HTML。因此，您基本上将提供 myhtml.html 和 myhtml@2x.html 并自己执行视网膜识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:24:57.233

您需要使用 CSS 和媒体查询来告诉 Web 视图显示您的 @2x 图像。然后，您还需要明确设置所需的大小。

所以，假设你有一个通常是 25px 和 50px @2x 的背景图像，那么你会为视网膜显示做这样的事情：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) {
    .nav-bar-button-right button .button-icon {
        background-image: url(myImage@2x.png);
        background-size: 25px 25px;
    }
} 
```

根据您的使用情况进行调整，但这就是想法。我希望它有所帮助。

# ios - ios 5 - 反映故事板的代码

> ID：10694683
> 
> 赞同：0
> 
> 时间：2012-05-22T01:25:55.880
> 
> 标签：ios, interface-builder, storyboard

当您使用 Storyboard（或普通 IB）创建界面时，代码是在编译时为应用程序生成的。换句话说，它不会更新它链接到的 ViewController 的文件。

是否有允许这样做的设置？对我来说，我认为这是一个很好的学习工具。

就像我在 UIView 中的某个位置放置一个按钮，在代码中会是什么样子？

干杯杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:34:21.107

不幸的是，没有这样的设置。XIB 和 Storyboard 存储为 XML 文件，并在运行时呈现到 UI 中。另一方面，当您以编程方式创建 UI 时，您使用 Cocoa Touch 类在 Objective C 中编写代码。在开发过程中没有直接的方法可以将 XML 转换为 Objective C。

# c++ - 如何在 C++ 对象中初始化数组

> ID：10694689
> 
> 赞同：14
> 
> 时间：2012-05-22T01:27:09.170
> 
> 标签：c++, arrays, class, initialization

在阅读[How to initialize an array in C](https://stackoverflow.com/questions/201101/how-to-initialize-an-array-in-c)之后，特别是：

> 但是，不要忽视明显的解决方案：
> 
> int myArray[10] = { 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 };

我试过这样的事情：

```
#include <iostream>

class Something {
private:

int myArray[10];

public:

Something() {
    myArray[10] = { 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 };
}

int ShowThingy(int what) {
    return myArray[what];
}

~Something() {}
};

int main () {
   Something Thing;
    std::cerr << Thing.ShowThingy(3);
} 
```

我得到：

```
..\src\Something.cpp: In constructor 'Something::Something()':
..\src\Something.cpp:10:48: error: cannot convert '<brace-enclosed initializer list>' to 'int' in assignment 
```

在这种情况下，显而易见的事情并不那么明显。我真的希望我的阵列的启动也更加动态。

我累了：

```
private:
    int * myArray;

public:
    Something() {
            myArray = new int [10];
            myArray = { 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 };
} 
```

这对我来说看起来很时髦，对编译器来说也是如此：

```
..\src\Something.cpp: In constructor 'Something::Something()':
..\src\Something.cpp:11:44: error: cannot convert '<brace-enclosed initializer list>' to 'int*' in assignment 
```

这也不起作用：

```
private:
int myArray[10] = { 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 }; 
```

和：

```
 ..\src\Something.cpp:6:20: error: a brace-enclosed initializer is not allowed here before '{' token
 ..\src\Something.cpp:6:51: sorry, unimplemented: non-static data member initializers
 ..\src\Something.cpp:6:51: error: 'constexpr' needed for in-class initialization of static data member 'myArray' of non-integral type 
```

我一直做得很好，学习什么不起作用，但不太好学习什么起作用。

那么，如何为类中的数组使用初始化列表 {value, value, value}？

一段时间以来，我一直试图弄清楚如何做到这一点，并且非常卡住，我需要为我的应用程序制作许多此类列表。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-22T01:37:19.133

需要在构造函数初始化列表中初始化数组

```
#include <iostream>

class Something {
private:

int myArray[10];

public:

Something()
: myArray { 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 }
{
}

int ShowThingy(int what) {
    return myArray[what];
}

~Something() {}
};

int main () {
   Something Thing;
    std::cerr << Thing.ShowThingy(3);
} 
```

> ..\src\Something.cpp:6:51：抱歉，未实现：非静态数据成员初始化器

C++11 also adds supports for inline initialization of non-static member variables, but as the above error message states, your compiler has not implemented this yet.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:34:08.360

除非我弄错了，否则只有在声明期间初始化变量时才允许使用初始化列表——因此得名。您不能将初始化列表分配给变量，就像您在大多数示例中所做的那样。

在上一个示例中，您尝试将静态初始化添加到非静态成员。如果您希望数组成为该类的静态成员，您可以尝试以下操作：

```
class Derp {
private:
    static int myArray[10];
}

Derp::myArray[] = { 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 }; 
```

如果要添加类成员，可以尝试制作静态数组`const`并将其复制到构造函数中的成员数组中。

# ios - 将简单的应用程序转换为具有标签栏

> ID：10694691
> 
> 赞同：0
> 
> 时间：2012-05-22T01:27:16.987
> 
> 标签：ios, interface-builder, uitabbarcontroller

我有一个类似于这个[SO question](https://stackoverflow.com/questions/6398161/converting-an-utility-application-2-view-controllers-to-a-tab-bar-application)的问题，但略有不同（或者我的技能不允许我自信地遵循指示）。我有一个现有的游戏应用程序，它有一个视图控制器和一个笔尖，并且工作正常。我想将其转换为具有标签栏控制器。我希望原始的现有视图控制器位于第一个选项卡上，我为第二个选项卡编写了一个新的视图控制器和一个新的 nib，它们将专用于游戏设置。在这个阶段，应用程序在项目中使用新的 nib 和视图控制器构建和运行良好（但没有进一步的编辑——没有尝试添加标签栏控制器等）。修改后的应用程序应该只有两个视图，每个视图都可以从两个选项卡之一访问。

对不起，很长的时间。我正在关注上述问题的公认答案。我已经完成或可以完成的前 4 个步骤。第五步是`Delete the old version of your Main View Controller from the NIB file and also remove the IBOutlet property from the Application Delegate`。我认为我的应用程序中没有这样的`IBOutlet`应用程序（与 OP 的应用程序不同）。我应该删除此列表中显示的对象视图控制器吗？还是我在这里走错了路？

![在此处输入图像描述](../Images/ba2efa2e10c0c99f968c99ee5ef43b18.png)

**附加信息**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Set up view controller & load a clean view

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    self.viewController = [[P3ViewController alloc] initWithNibName:@"P3ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;

    NSLog(@"P3ViewController now active");

    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:46:14.633

这应该会让你朝着正确的方向前进......

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    UITabBarController *tbc = [[UITabBarController alloc] init];
    YourNewViewController *ynvc = [[YourNewViewController alloc] initWithNibName:@"YourNewViewController" bundle:nil];
    YourCurrentViewController *ycvc = [[YourCurrentViewController alloc] initWithNibName:@"YourCurrentViewController" bundle:nil];
    [tbc setViewControllers:[NSArray arrayWithObjects:ynvc, ycvc, nil]];
    self.window.rootViewController = tbc;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

# ember.js - 使用 Ember.js 将文本输入框添加到 HTML 页面

> ID：10694695
> 
> 赞同：0
> 
> 时间：2012-05-22T01:27:40.310
> 
> 标签：ember.js

我是 Ember 的新手，很可能我错过了一些非常简单的东西。无论如何，这是我的问题：

我尝试通过以下方式向 HTML 页面添加一个空输入框...

```
 ...

    var view = Ember.View.create({
          templateName: 'say-hello',
    });
    view.append();

    ...

    <script type="text/x-handlebars" data-template-name="say-hello">
        {{view App.TextField}}
    </script> 
```

但是我没有得到输入框。反馈表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:15:02.863

`Ember.TextField`代替`App.TextField`

# c# - 在 windows mobile 6.5 中打开 SQLite 数据库文件的问题

> ID：10694696
> 
> 赞同：0
> 
> 时间：2012-05-22T01:27:44.600
> 
> 标签：c#, windows-mobile-6.5

有谁知道如何在 windows mobile 6.5（模拟器）中打开 sqlite 数据库？我尝试使用以下代码打开它，但没有成功。它说“无法打开数据库”。

```
private SQLiteConnection con;

public void OpenDB(){

con = new SQLiteConnection(@"Data Source=C:\Documents and Settings................\Data\iPhysioMobile");

con.open();

} 
```

我曾经使用数据库文件的完整路径。有谁知道它为什么会发生？或任何其他建议？

问候，

SW刘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:22:36.843

难怪这段代码不起作用。

路径无效。windows mobile中没有C:\这样的驱动器。

您的计算机和 windows mobile 共享的位置`("C:\Documents and Settings................\Data\iPhysioMobile")`是从计算机的角度而不是 windows mobile 的角度来看的。

要了解运行应用程序的 Windows Mobile 中的文件夹，请使用`Directory.GetCurrentDirectory`. 然后从该位置打开 .db 文件。

# php - WordPress - 带有时间列表的自定义查询，凌晨 1:00 是在下午 2:00 之前 - 如何正确订购？

> ID：10694698
> 
> 赞同：0
> 
> 时间：2012-05-22T01:27:47.513
> 
> 标签：php, wordpress

我在 WordPress 中有一个自定义查询，它正在提取分配给自定义元字段中帖子项目的时间。时间按以下格式输入：

*上午 1:00、上午 2:00、下午 1:00、下午 2:00、下午 3:00 等*

查询按时间顺序显示帖子，但是，它显示它们是无序的，如下所示：

*上午 1:00、下午 1:00、上午 2:00、下午 2:00、上午 3:00、下午 3:00 等。*

我需要它以正确的顺序显示它们，例如： 1: *00am、2:00am、3:00am....11:00am、12:00pm、1:00pm、2:00pm、3:00pm 等*

我想过简单地切换到 24 小时制，但有些用户并不熟悉。

这是我的查询，有人可以帮助我解决问题：

```
<ul>
<?php
$args=array(
  'taxonomy' => 'day',
  'term' => 'monday',
  'post_type' => 'schedule',
  'meta_key' => 'tr_show_time', 
  'orderby' => 'tr_show_time', 
  'order' => 'asc',  
  'posts_per_page' => 24,
  'caller_get_posts'=> 1
);
$my_query = null;
$my_query = new WP_Query($args);
if( $my_query->have_posts() ) {
while ($my_query->have_posts()) : $my_query->the_post(); ?>
      <?php $show_name = get_post_meta( get_the_ID(), 'tr_show_name', true ); ?>
      <?php $show_time = get_post_meta( get_the_ID(), 'tr_show_time', true ); ?>
      <li>
        <?php echo $show_time;?> - <?php echo $show_name;?>
      </li>
      <?php endwhile; } wp_reset_query(); ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:52:41.957

正如 jprofit 在评论部分所说，为您的元值使用 24 小时制。然后，要格式化为 12 小时字符串，您需要执行以下操作：

```
<?php
function twentyfourToTwelve($time)
{
    return date('g:i:sa', strtotime($time));
}
?> 
```

以及你需要显示时间的地方，

```
<?=twentyfourToTwelve($postTime)?> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-22T15:23:54.420

我最终使用 jQuery 来解决这个问题，因为就我个人而言，我发现它比 PHP 更容易做到。

我使用了这个脚本和下面的代码：

[http://benalman.com/projects/jquery-replacetext-plugin/](http://benalman.com/projects/jquery-replacetext-plugin/)

```
$("#whats-on-container *").replaceText( /00:00/gi, "12:00am" );
$("#whats-on-container *").replaceText( /01:00/gi, "1:00am" );
$("#whats-on-container *").replaceText( /02:00/gi, "2:00am" );
$("#whats-on-container *").replaceText( /03:00/gi, "3:00am" );
$("#whats-on-container *").replaceText( /04:00/gi, "4:00am" );
$("#whats-on-container *").replaceText( /05:00/gi, "5:00am" );
$("#whats-on-container *").replaceText( /06:00/gi, "6:00am" );
$("#whats-on-container *").replaceText( /07:00/gi, "7:00am" );
$("#whats-on-container *").replaceText( /08:00/gi, "8:00am" );
$("#whats-on-container *").replaceText( /09:00/gi, "9:00am" );
$("#whats-on-container *").replaceText( /10:00/gi, "10:00am" );
$("#whats-on-container *").replaceText( /11:00/gi, "11:00am" );
$("#whats-on-container *").replaceText( /12:00/gi, "12:00pm" );
$("#whats-on-container *").replaceText( /13:00/gi, "1:00pm" );
$("#whats-on-container *").replaceText( /14:00/gi, "2:00pm" );
$("#whats-on-container *").replaceText( /15:00/gi, "3:00pm" );
$("#whats-on-container *").replaceText( /16:00/gi, "4:00pm" );
$("#whats-on-container *").replaceText( /17:00/gi, "5:00pm" );
$("#whats-on-container *").replaceText( /18:00/gi, "6:00pm" );
$("#whats-on-container *").replaceText( /19:00/gi, "7:00pm" );
$("#whats-on-container *").replaceText( /20:00/gi, "8:00pm" );
$("#whats-on-container *").replaceText( /21:00/gi, "9:00pm" );
$("#whats-on-container *").replaceText( /22:00/gi, "10:00pm" );
$("#whats-on-container *").replaceText( /23:00/gi, "11:00pm" );
$("#whats-on-container *").replaceText( /24:00/gi, "12:00am" ); 
```

# browser - 如何获取 Web 应用程序的屏幕截图

> ID：10694699
> 
> 赞同：2
> 
> 时间：2012-05-22T01:27:47.407
> 
> 标签：browser, screenshot

谷歌在 youtube 上达成了一项关于通过留下反馈在他们的网站上分享问题的协议。当您单击它时，它会截取当前页面的屏幕截图。如何在我的应用程序中执行此操作，以便查看用户遇到的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:44:41.047

使用 Usersnap ( [http://usersnap.com](http://usersnap.com) )，您可以从用户那里获取屏幕截图。他们不必安装任何插件或浏览器扩展，它适用于所有主要浏览器（阅读：包括 Internet Explorer！）。

安装 usersnap 就像安装 Google Analytics 一样简单，即将一个小的 JavaScript 片段添加到您的页面。

PS：我是usersnap 的联合创始人——如果您还有任何问题，请随时提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:58:25.813

使用 ASP.NET，您可以执行以下操作（请参阅*“使用 IHttpHandler 方法调用”*）： http: [//www.codeproject.com/Articles/95439/Get-ASP-NET-C-2-0-Website -缩略图-屏幕截图](http://www.codeproject.com/Articles/95439/Get-ASP-NET-C-2-0-Website-Thumbnail-Screenshot)

然后，您的按钮将向处理程序提交请求（可能通过 AJAX），您可以使用处理程序本身存储答案，或者将结果再次回发到您的处理表单。

# android - 有没有办法通过更新的应用程序版本删除旧版本的 android 应用程序

> ID：10694702
> 
> 赞同：0
> 
> 时间：2012-05-22T01:28:39.513
> 
> 标签：android

请允许我解释这个问题，我构建并发布了使用谷歌地图的安卓应用程序。用于签署该应用程序的证书已丢失，因此我无法以与以前的谷歌播放规则相同的名称发布下一个更新。

出于这个原因，我被迫使用新证书签署应用程序并重命名应用程序。现在，以前的用户正在报告相同的双重实例的问题。除了用于签署它们的名称和证书之外，这两种情况确实没有太大区别。

所以我的问题是，如何为我的用户简化过渡工作，我知道卸载旧版本并安装新版本可以解决问题，但我只是想知道是否可以通过设置代码实现某种程度的控制在 google play 中让应用程序用户更清晰、更轻松？另外，如果您认为我对问题的看法也是错误的，请提出更好的建议。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:24:46.680

这个问题：[隐含意图卸载应用程序？](https://stackoverflow.com/questions/7868460/implicit-intent-to-uninstall-application)

将向您展示如何使用和触发将为用户启动卸载过程的意图。

您可以使用 PackageManager 找出是否存在旧版本。如果它是创建并启动卸载意图。也许在启动意图之前告诉用户您将通过对话或其他方式来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:27:47.533

也许您可以检测您的旧应用程序是否已安装并阻止用户使用您的新应用程序，直到它被卸载。前任。在您的主要活动上使用“if”语句，如果它检测到您的旧软件包已安装并指示用户在继续之前将其卸载，则会创建一个警报对话框。只是一个想法！

[Android - 检查是否存在其他应用程序](https://stackoverflow.com/questions/3694267/android-check-for-presence-of-another-app)

# browser - 用真实版本号区分 chrome 和 safari？

> ID：10694704
> 
> 赞同：0
> 
> 时间：2012-05-22T01:28:52.833
> 
> 标签：browser, version, blocking

我尝试了[使用 jQuery.browser 将 Chrome 与 Safari 区分开来](https://stackoverflow.com/questions/3303858/distinguish-chrome-from-safari-using-jquery-browser)的解决方案，但它不起作用。这个解决方案可以，但我没有任何方法可以获得真实的版本号：

```
$.browser.chrome = $.browser.webkit && !!window.chrome;
$.browser.safari = $.browser.webkit && !window.chrome; 
```

我需要检测完整的版本号，以便我可以阻止这些旧版本（因为它们的速度慢/错误，而不是功能）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T01:31:01.053

您*可以*使用直接的 Javascript：

```
if(navigator.userAgent.toLowerCase().indexOf('Chrome'))
{
  var n=navigator.userAgent.split(" ");
  var curVersion="";
  for (var i = 0; i < n.length; i++)
  {
     if(n[i].indexOf("Chrome"))
     {
        curVersionTmp=n[i].split("/");
        curVersion = curVersionTmp[1];   
     }
  }
}
else if(navigator.userAgent.toLowerCase().indexOf('applewebkit'))
{
  var n=navigator.userAgent.split(" ");
  var curVersion="";
  for (var i = 0; i < n.length; i++)
  {
     if(n[i].indexOf("Version"))
     {
        curVersionTmp=n[i].split("/");
        curVersion = curVersionTmp[1];   
     }
  }
} 
```

[http://www.useragentstring.com/pages/Safari/](http://www.useragentstring.com/pages/Safari/)

# java - 如何判断两个圆形扇区是否相互重叠

> ID：10694709
> 
> 赞同：10
> 
> 时间：2012-05-22T01:29:48.933
> 
> 标签：java, algorithm

每个扇区可以表示为 (x,y,r,a,d)，其中 x,y 是位置，r 是半径，d 是方向，a 是角度。给定两个圆形扇区的这些信息，如何确定它们是否相互重叠？有没有有效的算法来解决它？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T01:38:12.373

我知道一种非常快速的方法来降低这种可能性，因为我以前用它来进行圆形碰撞。

计算出两个中心之间的距离，然后，如果它大于半径之和，则不会发生碰撞。为了提高效率，不要使用平方根，只需直接处理平方值：

```
if (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1) > (r1 + r2) * (r1 + r2):
    # No chance of collision. 
```

为圆段计算会有点困难。

* * *

您选择的方法取决于您需要的准确度。如果你正在做实际的数学，你可能需要高精度。但是，例如，如果您正在为计算机游戏之类的东西这样做，那么足够接近可能就足够了。

如果是这种情况，我会考虑将弧线转换为一系列直线（其中的数量可能取决于`a`弧线的“扩展” - 你可能会用几条线来逃避一个弧度的传播，但对于 180 度来说效果不太好）。

直线碰撞检测是一种更广为人知的方法，尽管您必须处理比较次数可能会迅速增加的事实。

* * *

如果您不想使用线段，那么下面是要遵循的过程。它使用圆碰撞算法来找出整个圆的零、一个或两个碰撞点，然后检查这些点以查看它们是否在两个弧内。

首先，运行上面的检查以检测不可能发生碰撞的情况。如果圆之间不可能发生碰撞，那么弧也不会发生碰撞。

其次，检查圆圈是否有一个碰撞点。如果是这样的话：

```
(x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1) == (r1 + r2) * (r1 + r2) 
```

当然，在合适的误差范围内。现在我们都应该知道，比较浮点数是否相等应该使用某种增量比较。

如果是这种情况，您有一点要检查，您可以很容易地找出那一点。它是沿从to or`r1`的直线上的点单位，将其视为沿该线移动一些分数：`(x1,y1)``(x2,y2)`

```
(x1 + (x2-x1) * (r1+r2) / r1, y1 + (y2-y1) * (r1+r2) / r1) 
```

否则，有两点需要检查，您可以使用此类问题的答案来[确定](https://stackoverflow.com/questions/1736734/circle-circle-collision)这两点是什么。

一旦你有一些碰撞点，这是一种[更简单的方法](https://stackoverflow.com/questions/3712729/calculate-point-and-circle-segment-collision)来确定这些点是否在一个弧上，记住候选点需要在*两个*弧上才能碰撞，而不仅仅是一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T01:52:51.897

有两个步骤。首先是确定两个中心是否足够接近以允许发生碰撞，这可以通过将它们之间的距离与其半径之和进行比较来完成：

```
if (((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2)) > ((r1 + r2) * (r1 + r2)))
    // No collision. 
```

然后您需要检查中心之间的线是否落在由您的各种角度定义的弧内：

```
float angle1to2 = Math.atan2(y2 - y1, x2 - x1);
if (angle1to2 < (d1 - a1/2) || angle1to2 > (d1 + a1/2))
    // No collision
float angle2to1 = angle1to2 + Math.PI;
if (angle2to1 < (d2 - a2/2) || angle2to1 > (d2 + a2/2))
    // No collision 
```

如果您通过这些检查而没有排除碰撞的可能性，那么您已成功检测到碰撞。

警告：此代码根本没有经过测试。特别是，`atan2`调用可能需要根据您的坐标系进行一些调整。

**编辑：**刚刚意识到这错过了一个重要的角落案例，其中弧线不是“指向”彼此但仍然重叠。会对此深思熟虑并返回...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T01:41:20.947

由于我们有圆形扇区，因此如果您实时执行此操作，角度和方向并不重要。以下仅适用于全圆扇区，或者如果两个扇区相互指向。

您可以按照以下步骤操作：

1）找到每个扇区之间的距离，2）将两个半径减去该距离，3）如果结果为负，则两个扇区之间发生了碰撞。否则，它的碰撞距离。

例如，我们有两个扇区，都具有 50 个单位半径。它们的中心点之间的距离是 80。减去 80-50-50 = -20，所以你知道发生了 20 个单位距离的碰撞。

否则，如果距离是 500，500-50-50 = 400，一个正值，现在您知道这两个扇区相距 400 个单位。

现在，如果圆圈太近，比如相隔 1 个单位，1-50-50 = -99，这意味着它们几乎完全重叠。

**对于您在评论中指定的真正分段圆形扇区**，您应该使用 paxdiablos 或 Macs 答案。

# android - 如何打开保存在 SD 卡 Android 上的目录

> ID：10694711
> 
> 赞同：2
> 
> 时间：2012-05-22T01:29:55.003
> 
> 标签：android, file-io, notepad

我正在编写一个记事本 android 应用程序，但我的“打开”按钮遇到了困难。我如何实现它，以便当我单击它时，会出现一个对话框，其中包含保存在我在 SD 卡上创建的文件夹中的 .txt 文件？另外，我如何将所选文件加载到我当前的活动中？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T04:39:00.790

尝试以下，

```
File f = new File(Environment.getExternalStorageDirectory() +"/"+ dirname);
if(f.isDirectory())
{
    ArrayList<String> files= new ArrayList<String>();
    File file = new File(Environment.getExternalStorageDirectory() +"/"+ dirname+"/");
    File fileList[] = file.listFiles();
    for(int i=0;i<fileList.length;i++)
    {
        files.add(filelist[i].getAbsolutePath());
        //here you can get all files.
    }
} 
```

# javascript - 如何从我的 phonegap 应用程序调用服务器 api？

> ID：10694716
> 
> 赞同：0
> 
> 时间：2012-05-22T01:30:32.927
> 
> 标签：javascript, cordova

我正在努力理解一些我确信是非常基本的东西。我到处搜索，找不到解决问题的方法。

我发现的最相关的 stackoverflow 问题是：[如何使用 Phonegap for Android 调用远程 API？](https://stackoverflow.com/questions/9464563/how-do-i-call-remote-api-using-phonegap-for-android)

那篇文章看起来很有希望，但仍然对我不起作用。我正在构建我的第一个 PhoneGap 应用程序并尝试使用 Grouped api。

我从概念上不了解如何从 PhoneGap 发送和接收数据。我在本地构建所有东西，所以我想这在技术上与 PhoneGap 无关。

这是我的api调用：

```
http://grouped.com/api?f=user_exists&email=ryan@ensomniac.com 
```

应该返回

```
{"msg": true} 
```

但是我在本地测试时得到的只是带有空数据的“错误 200”。我感觉像这样的人：

```
http://www.youtube.com/watch?list=UU4_bwov47DseacR1-ttTdOg&feature=player_detailpage&v=GsqUZkmO-zk 
```

我正在从 'localhost' 在 Linux 上的 Firefox 10.0.1 中进行测试。我假设在本地运行与 PhoneGap 尽可能相似，但可能是错误的。

这是我现在拥有的代码，我认为应该可以工作（但显然不行）：

```
function makeRequest() {
    var request = new XMLHttpRequest();
    request.open("GET", "http://www.grouped.com/api?f=user_exists&email=ryan@ensomniac.com", true);
    request.onreadystatechange = function() {
        if (request.readyState == 4) {
            if (request.status == 200 || request.status == 0) {
                console.log(request);
            }
        }
    }
    request.send();
}
makeRequest(); 
```

我究竟做错了什么？

谢谢你的帮助，总是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:05:49.170

问题是您正在从 FireFox 中的文件协议进行测试。FireFox 阻止您的请求工作，因为它是一个[跨站点 XMLHttpRequest](https://developer.mozilla.org/En/Using_XMLHttpRequest#Cross-site_XMLHttpRequest)。某些版本的 FireFox 将允许您[启用跨站点 XHR](http://dirolf.com/2007/06/enabling-cross-domain-ajax-in-firefox.html)，但我很确定这不适用于 10.0.1。

如果您可以修改服务器以[允许来自您的域的请求，](https://developer.mozilla.org/en/HTTP_access_control#Access-Control-Allow-Origin)那将是一种解决方案。

如果您无权访问服务器，那么您应该切换到使用 Chrome 进行开发。如果你像这样启动 Chrome：

```
chrome.exe --disable-web-security 
```

您将能够执行跨站点 AJAX 请求。Chrome 也基于 webkit，因此行为将更接近您在 Android、iOS 和 BB 上看到的，它们都部署了基于 webkit 的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:50:38.393

您可能遇到了跨域限制。你在哪个平台上开发？在 iOS 上，您可能必须将类似的内容添加到您的`Cordova.plist`:

```
<key>ExternalHosts</key>
<array>
    <key>grouped</key>
    <string>www.grouped.com</string>
</array> 
```

对于 Android，它有问题，最好的办法是使用 jQuery 和 JSONP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:33:38.783

我刚跑

[http://www.grouped.com/api?f=user_exists&email=ryan@ensomniac.com](http://www.grouped.com/api?f=user_exists&email=ryan@ensomniac.com)

通过我的网络浏览器并得到正确的 JSON 响应。您的本地主机必须与真实的万维网通信有问题，或者您的代码中的某些内容阻止了响应。不过，我并没有真正查看代码来检查错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T10:32:14.870

您应该使用`request.responseText`从服务器获取响应正文。

# c# - 获取不可见的boundfield的值

> ID：10694717
> 
> 赞同：0
> 
> 时间：2012-05-22T01:30:38.683
> 
> 标签：c#, asp.net

我的 gridview 中有以下两个 BoundFields

```
<asp:BoundField DataField="ProductId" HeaderText="ID" HeaderStyle-HorizontalAlign="Left" Visible = "false" />
 <asp:BoundField DataField="ProductDescription" HeaderText="product Description" HeaderStyle-HorizontalAlign="Left" /> 
```

如果将第一个绑定字段设置为可见 false，如何获取该字段的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:34:08.357

您无法访问不可见的 BoundField 的值。您必须在其中使用`TemplateField`和添加`HiddenField`控件并绑定其 Value 属性。

标记，

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:HiddenField ID="HiddenField1" runat="server" 
                    Value='<%# Eval("ProductId") %>' />
                 ....
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

后面的代码从每行第一个单元格的 HiddenField 控件中获取值。

```
 foreach (GridViewRow row in GridView1.Rows)
  {
    if (row.RowType == DataControlRowType.DataRow)
      {
       HiddenField productid = row.Cells[0].FindControl("HiddenField1") as HiddenField;
       ...
       }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:33:59.463

使用 ID 最好`DataKeyNames`在 GridView 上使用属性

```
DataKeyNames="ProductId" 
```

然后在后面的代码中你可以得到它

```
GridView1.DataKeys[row_index]["ProductId"] 
```

# linux - 在 Linux 中，模拟慢速传入流量到端口，例如 54000

> ID：10694730
> 
> 赞同：7
> 
> 时间：2012-05-22T01:33:21.443
> 
> 标签：linux, networking, tcp

Linux 中有没有一种方法可以模拟在特定端口入站到我的服务器的慢速流量？我查看了 NETEM，但它似乎只适用于广域网。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T01:55:25.483

限制所有流量匹配 tcp（协议 6）目标端口 54000 在 256Kbits 入站到 的示例`eth0`，使用`tc`...

作为根...

```
tc qdisc add dev eth0 handle ffff: ingress
tc filter add dev eth0 parent ffff: protocol ip prio 50 u32 \
    match ip  protocol 6 0xff \
    match ip dport 54000 0xffff police rate 256kbit burst 10k drop \
    flowid :1 
```

你可以像这样监控它...注意下面的`dropped`数字`ffff`

```
[mpenning@Bucksnort ~]$ sudo tc -s qdisc show
qdisc pfifo_fast 0: dev eth0 root refcnt 2 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1
 Sent 17796311917 bytes 5850423 pkt (dropped 0, overlimits 0 requeues 0)
 rate 0bit 0pps backlog 0b 0p requeues 0
qdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------
 Sent 140590 bytes 1613 pkt (dropped 214, overlimits 0 requeues 0)
 rate 0bit 0pps backlog 0b 0p requeues 0
qdisc pfifo_fast 0: dev eth1 root refcnt 2 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 rate 0bit 0pps backlog 0b 0p requeues 0
[mpenning@Bucksnort ~]$ 
```

要删除所有入口流量过滤器：

```
tc qdisc del dev eth0 ingress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:26:12.210

看看[JMeter](http://jmeter.apache.org/)。根据您需要的流量类型，它可能已经提供了该功能。

# jquery - 通过提交奇怪的错误来停止表单

> ID：10694731
> 
> 赞同：0
> 
> 时间：2012-05-22T01:33:27.750
> 
> 标签：jquery

我只是通过提交测试此代码以停止表单...

jQuery部分...

```
 $("#request_quote").submit(function(e){
        e.preventDefault(); 
    }); 
```

HTML部分...

```
<form id="#request_quote" method="POST" action="request_quote/requestSubmit" >
  <div>
    <label for="b_name">What is your Business name</label>
    <input id="b_name" name="b_name" type="text" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:37:41.333

您的表单 ID 不正确：应该是`id="request_quote"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:41:05.063

您显示的代码应该可以正常工作，假设它在表单被解析并添加到 DOM 之后运行 - 否则它将无法找到具有指定 id 的任何元素。因此，要么将该代码放在表单之后的某个脚本块中（例如，就在结束`</body>`标记之前），要么将其放在文档就绪处理程序中：

```
$(document).ready(function() {
    $("#request_quote").submit(function(e){
        e.preventDefault(); 
    }); 
}); 
```

**编辑：**糟糕，刚刚注意到史蒂夫在他的回答中指出的内容，即`#`html 标记中的 id 中有一个 - 应该删除它，*然后*如果仍然存在问题，我对 JS 代码位置的评论将适用.

# wordpress - 分别针对不同的pc和mac，调用不同的样式表

> ID：10694735
> 
> 赞同：0
> 
> 时间：2012-05-22T01:33:48.793
> 
> 标签：wordpress, cross-platform

首先是网站的链接：www.fish-fry.com

我知道这被认为是不好的做法，但我已经处理这个问题大约一个月了，我建立的网站现在已经 100% 完成，除了这个问题，在解决之前我无法获得报酬。

从 Mac 查看时，网站在所有主要浏览器上看起来都不错，从 PC 查看时，我的导航菜单和搜索栏输入低 2px。

我发现一些代码似乎可以让我在等待平台时调用不同的样式表，但它对我不起作用，想知道这里是否有人有任何见解：

```
<script type="text/javascript">
} if (navigator.userAgent.indexOf('Windows NT')) {
    document.write('<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/style-windows.css" />');
}
else {
    document.write('<link rel="stylesheet" type="text/css" href="<?php     bloginfo('template_directory'); ?>/style.css" />');
}
</script> 
```

任何帮助是极大的赞赏！

* * *

@sarnold，没有验证错误。

尽管删除右括号似乎也不起作用。最初它搞砸了事情在 mac 上的样子，所以我把它改成了这样：

```
<script type="text/javascript">
if (navigator.userAgent.indexOf('Windows NT')) {
    document.write('<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/style-windows.css" />');
}
elseif (navigator.userAgent.indexOf('Mac OS')) {
document.write('<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/style.css" />');
}
</script>` 
```

但是，当我从 Windows 打开 chrome 或 firefox 时，它仍在从默认样式表中读取。

* * *

有人熟悉上面的脚本吗？不知道为什么我的电脑仍在引用 Mac 样式表。提前感谢您的帮助！

* * *

我也试过这个脚本，似乎仍然，两个平台都只引用'style.css'

```
<script type="text/javascript">

/***********************************************
* Different CSS depending on OS (mac/pc)- © Dynamic Drive (www.dynamicdrive.com)
* This notice must stay intact for use
* Visit http://www.dynamicdrive.com/ for full source code
***********************************************/

var csstype="external" //Specify type of CSS to use. "Inline" or "external"

var mac_externalcss='http://www.fish-fry.com/dev/wp-content/themes/FISH-FRY-MUSIC-AND-SOUND-CUSTOM-THEME/style.css' //if "external", specify Mac css file here
var pc_externalcss='http://www.fish-fry.com/dev/wp-content/themes/FISH-FRY-MUSIC-AND-SOUND-CUSTOM-THEME/style-windows.css' //if "external", specify PC/default css file here

///////No need to edit beyond here////////////

var mactest=navigator.userAgent.indexOf("Mac")!=-1
if (csstype=="inline"){
document.write('<style type="text/css">')
if (mactest)
document.write(mac_css)
else
document.write(pc_css)
document.write('</style>')
}
else if (csstype=="external")
document.write('<link rel="stylesheet" type="text/css" href="'+ (mactest? mac_externalcss : pc_externalcss) +'">')

</script> 
```

有什么帮助吗？这让我发疯：|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:35:14.320

您的问题是脚本开头的杂散右括号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:40:05.030

作为对未来项目的建议，您可能希望使用重置样式表来同步所有浏览器。这将有助于避免观看头痛。其中任何一个都是一个很好的起点：

*   [http://html5doctor.com/html-5-reset-stylesheet/](http://html5doctor.com/html-5-reset-stylesheet/)
*   [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)
*   [http://www.cssreset.com/scripts/html5-doctor-css-reset-stylesheet/](http://www.cssreset.com/scripts/html5-doctor-css-reset-stylesheet/)
*   [http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)

雅虎的重置可能是最古老和最过时的。搜索过去一年中最新、最流行的重置样式表，寻找您选择的毒药。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:03:36.517

我猜从上面的评论中你发现了样式表中的问题并修复了它——这是个好消息。

但是对于那些浏览器有问题的情况，Thematic 开发人员使用的方法非常优雅：

他们在主题中创建了一些不错的代码，可以将样式添加到*正文*中，如果需要，您可以将样式挂接到整个站点中。这是一个真实的例子：

```
<body class="home page page-id-5 page-template-default windows firefox ff1"> 
```

这意味着您可以拥有一个带有 css 的样式表，例如：

```
.firefox #menu { margin-top: 2px; }
.IE6 #menu { margin-top: 4px; } 
```

如果您想与不同的用户代理一起玩，请查看 Thematic 主题网站，或者如果您更喜欢访问[我的网站](http://www.achaleon.com)。

# ruby - 划分一个数组以创建多维数组

> ID：10694744
> 
> 赞同：2
> 
> 时间：2012-05-22T01:35:09.523
> 
> 标签：ruby, arrays

我正在寻找一种将一维数组除以数字 n 的方法，以创建一个多维数组，每个元素（最多）长度为 n。例如

```
[1,2,3,4,5,6] / 3 
```

应该导致：

```
[[1,2,3],[4,5,6]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T01:37:51.217

这个应该做...

```
chunkedArr = arr.each_slice(3).to_a; 
```

# winapi - GetTextExtentPoint32 返回值有点偏离，字形被截断

> ID：10694747
> 
> 赞同：2
> 
> 时间：2012-05-22T01:35:28.587
> 
> 标签：winapi, fonts, gdi, typography

对于所有字符串，GDI 函数`GetTextExtentPoint32`似乎返回的宽度总是比`ExtTextOut`显示的小一点：

![y 被截断](../Images/0cc1a1ce7dd72b417f31bc1644637aef.png)

在右红色箭头上方，“buggy”显示为一个带有`ExtTextOut`：没问题的块。

在左红色箭头上方，“buggy”用 显示`ExtTextOut`，然后“,”在`width`像素后面显示，其中`width = GetTextExtentPoint32("buggy")`。`width`似乎有点太小了。

使用更大的字体大小和深色背景：

![在此处输入图像描述](../Images/c17e15fec40e3e123d691cc2eb84ebdb.png)

同样，“00”和“()”在不同的`ExtTextOut`调用中显示，`GetTextExtentPoint32("00")`它们之间有像素。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-29T12:35:24.427

在处理等宽 True Type 字体（Lucida Console）和 OPAQUE 背景模式时，我发现了同样的问题。问题似乎是您使用正确的 x 坐标调用 ExtTextOut，但该函数从 x-1 开始绘制背景，这是我没想到的。较大的字体大小可能会产生较大的负偏移。字形最终被正确定位，但除非选择透明背景模式，否则“过度绘制”是一个问题。以前，我认为我不需要指定 rc 参数，因为我根本不需要剪辑，因为所有字符运行都是不重叠的，但最终我不得不提供一个明显多余的 RECT 和 ETO_CLIPPING 标志，只是以防止这种水平负重绘。

# extjs4 - 在 ExtJS 中定义视图。“未捕获的类型错误：无法调用未定义的方法‘子字符串’”

> ID：10694750
> 
> 赞同：0
> 
> 时间：2012-05-22T01:36:18.190
> 
> 标签：extjs4

我正在尝试定义视图，但出现错误

> 未捕获的类型错误：无法调用未定义的方法“子字符串”

`/app/view/Sidebar.js`

```
Ext.define('SimpleTodo.view.Sidebar', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.sidebar',
    config: {
        title: 'Projects & Todo Lists',
        tbar: [
            {
                xtype: 'button',
                text: 'Add Project'
            },
            {
                xtype: 'button',
                text: 'Add Todo List'
            }
        ],
        //store: Ext.data.StoreManager.lookup('projects'),
        html: 'Hello world',
        width: 200
    }
}); 
```

然后尝试在我的`app.js`

```
Ext.application({
    name: 'SimpleTodo',
    views: [
        'Sidebar'
    ],
    appFolder: 'app',
    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: {
                type: 'hbox',
                pack: 'start',
                align: 'stretch'
            },
            items: [
                {
                    xtype: 'sidebar' //  <---- here
                },
                {
                    xtype: 'panel',
                    id: 'detailsView',
                    flex: 1,
                    layout: 'card',
                    items: [
                        {
                            xtype: 'panel',
                            id: 'todoDetails',
                            title: 'Todo Details'
                        },
                        {
                            xtype: 'panel',
                            id: 'addProject',
                            title: 'Add project',
                        }
                    ]
                }
            ]
        })
    }
}); 
```

我错过了什么？我是否定义了我的观点并正确使用了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:24:44.067

其实应该是这样的：

```
Ext.application({
        name: 'SimpleTodo',
        requires:[
         'SimpleTodo.view.Sidebar'
        ],
        appFolder: 'app',
        launch: function() {
          Ext.onReady(function(){
            Ext.create('Ext.container.Viewport', {
                layout: {
                    type: 'hbox',
                    pack: 'start',
                    align: 'stretch'
                },
                items: [
                    {
                        xtype: 'sidebar' //  <---- here
                    },
                    {
                        xtype: 'panel',
                        id: 'detailsView',
                        flex: 1,
                        layout: 'card',
                        items: [
                            {
                                xtype: 'panel',
                                id: 'todoDetails',
                                title: 'Todo Details'
                            },
                            {
                                xtype: 'panel',
                                id: 'addProject',
                                title: 'Add project',
                            }
                        ]
                    }
                ]
            })
        });
      }
    }); 
```

# iphone - 是否有任何方法将事件从 UIButton 转发到 UIScrollView？

> ID：10694751
> 
> 赞同：4
> 
> 时间：2012-05-22T01:36:29.933
> 
> 标签：iphone, uiscrollview, uibutton, drag

当按钮被按下并拖动到里面时，我想将事件从滚动视图中的按钮转发到滚动视图。

通过使用按钮的“addTarget：action：forControlEvent”功能，我可以接收按钮按下和拖动事件，也可以在拖动时移动滚动视图。

但问题是滚动视图不像原始滚动视图的滚动那样反应。这意味着当我完成拖动时没有加速动画。

我正在寻找将事件转发到scrollView的方法，以便scrollview可以在拖动时做出反应，即使来自scrollview上的按钮的事件也是如此。

有没有人知道这个？

# php - 我会用 PHPMailer 发送很多电子邮件，我应该保持连接打开吗？

> ID：10694752
> 
> 赞同：1
> 
> 时间：2012-05-22T01:36:47.307
> 
> 标签：php, phpmailer

好吧，我将使用 PHPMailer 通过 cron 发送大量电子邮件。

我应该只打开一次与 smtp 服务器的连接吗？还是每次发送都打开和关闭它？

我会做类似的事情：

```
while( ...
{
OPEN SMTP

SEND

CLOSE SMTP
} 
```

或者

```
OPEN SMTP
while( ...
{

SEND

}
CLOSE SMTP 
```

我的意思是关于性能。

谢谢。

obs：这不是相同的味精，每封电子邮件都会收到不同的味精。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:01:29.263

一个连接应该可以正常工作。Havin multiple 会使服务器处理器过载

# html - 当窗口宽度减小时，具有多个定位的元素的宽度 100% 页脚绝对不会随布局的其余部分移动

> ID：10694757
> 
> 赞同：1
> 
> 时间：2012-05-22T01:37:47.000
> 
> 标签：html, css, css-position

这是网站在全尺寸窗口中的外观：

这是网站在窗口宽度减小时的外观：

您会注意到，一旦窗口的宽度减小到足以触及道路的左边缘，整个页脚部分（即道路、黑匣子、地面上的岩石）就会停止与布局的其余部分一起移动并保持到位。

理想情况下，我希望页脚与布局的其余部分一起移动，以便页脚中的黑框与其上方三个框的网格相匹配，如下所示：

我已经尝试修复这个问题几个小时，我想我可以使用一些帮助。如果有人有耐心帮助我解决这个问题，我将不胜感激。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:37:48.983

你这张图片的问题

[http://yourdailylaughz.com/wp-content/themes/ydl/images/footer.png](http://yourdailylaughz.com/wp-content/themes/ydl/images/footer.png)

您应该将此图像裁剪为 2 个不同的切片 1 个切片用于桥 bg，第二个切片用于内容 bg，您的问题将得到解决..

# iphone - 如何在 iOS 5 的耳机和扬声器上播放单独的音频

> ID：10694758
> 
> 赞同：8
> 
> 时间：2012-05-22T01:37:47.477
> 
> 标签：iphone, audio, ios5

我想在 iOS5 中同时在耳机和扬声器上播放不同的声音。

具体来说，我正在使用耳机输出来控制机器人的 R/C 伺服电机。我想通过扬声器播放音效。由于机器人是自平衡的，需要连续耳机输出来平衡，因此无法在扬声器和耳机之间切换。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:33:39.547

不是现在。iOS 仅通过库存设备上的任何公共 API 向应用程序公开一个立体声音频路由。您将不得不使用另一种连接方法来获得第二个音频输出，例如 MFi 设备、wifi、gamekit 到第二个 iPhone 等。

# java - 如何获取 Java 数组对象 O(1) 的大小？

> ID：10694766
> 
> 赞同：1
> 
> 时间：2012-05-22T01:38:16.067
> 
> 标签：java

我刚开始学习Java，听说获取数组的大小是O(1)。为什么不是 O(n)？

java虚拟机不是必须统计数组中的项数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T01:40:07.020

不，数组中的项目数在创建时是固定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T01:47:20.460

> java虚拟机不是必须统计数组中的项数吗？

那是没有必要的。一个数组的 JVM 表示有一个特殊的字段，它给出了数组实例的长度，以及一个用于访问它的特殊字节码。当它需要长度时，JVM 会使用这些长度。

（在创建数组时，数组的长度也是固定的……但这并不能直接回答问题。假设 JVM仍然*可以*计算元素。但是，我发现很难看到 JVM将决定在哪里/何时停止计算元素。它如何知道它正在查看的位何时不代表数组基类型的有效值？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T01:54:29.510

如上所述，它是一个特殊的字节码函数：

[http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings)

arraylength be arrayref → length 获取数组的长度

# python - 使用 Python 的 libxml2 从 XML 节点读取文本

> ID：10694767
> 
> 赞同：2
> 
> 时间：2012-05-22T01:38:49.867
> 
> 标签：python, xml, python-3.x

我是第一次使用的`XPath`用户，需要能够获取这些不同元素的文本值。例如`time`，`title`等。我`libxml2`在 Python 中使用该模块，到目前为止，只获得我需要的文字。下面的代码只返回元素标签..我需要值..任何帮助将不胜感激！

我正在使用这段代码：

```
doc = libxml2.parseDoc(xmlOutput)
result = doc.xpathEval('//*') 
```

使用以下文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE SCAN_LIST_OUTPUT SYSTEM "https://qualysapi.qualys.com/api/2.0/fo/sca/scan_list_output.dtd">
<SCAN_LIST_OUTPUT>
<RESPONSE>
<DATETIME>2012-01-22T01:21:53Z</DATETIME>
<SCAN_LIST>
  <SCAN>
    <REF>scan/2343423</REF>
    <TYPE>Scheduled</TYPE>
    <TITLE><![CDATA[customer 1 5/20/2012]]></TITLE>
    <USER_LOGIN>user1</USER_LOGIN>
    <LAUNCH_DATETIME>2012-02-21T04:11:05Z</LAUNCH_DATETIME>
    <STATUS>
      <STATE>Finished</STATE>
    </STATUS>
    <TARGET><![CDATA[13.3.3.2, 13.8.8.10, 13.10.12.60, 13.10.12.11...]]></TARGET>
  </SCAN>
</SCAN_LIST>
</RESPONSE>
</SCAN_LIST_OUTPUT> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T01:59:22.430

您可以调用`getContent()`每个返回`xmlNode`的对象来检索关联的文本。请注意，这是递归的——要以非递归方式访问 libxml2 中的文本内容，您需要检索元素下的关联文本节点，然后*调用*`.getContent()`.

 *也就是说，如果您使用`lxml.etree`（更高级别的 Python API，仍然支持 C libxml2 库）而不是 Python libxml2，这会更容易；在这种情况下，只需`element.text`将相关内容作为字符串进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:59:42.650

看看 Mark Pilgrim 的*Dive Into Python 3*，[第 12 章。XML](http://getpython3.com/diveintopython3/xml.html)

本章从 XML 的短期课程开始（一般性讨论，但使用 Atom Syndication Feed 示例），然后继续介绍标准`xml.etree.ElementTree`并继续介绍使用相同接口实现更多功能的第三方[lxml](http://getpython3.com/diveintopython3/xml.html#xml-lxml)（完整的 XPATH 1.0，基于 libxml2）。*

# javascript - 关于更改 CSS 中显示属性的 Chrome I JavaScript 问题

> ID：10694769
> 
> 赞同：1
> 
> 时间：2012-05-22T01:39:13.513
> 
> 标签：javascript, google-chrome, cross-browser, styles

我一直在使用一些 JavaScript 来更改我网站的显示属性。它适用于 Firefox 和 IE，但 Chrome 和 Safari 根本没有响应。我正在尝试将显示从“无”更改为“阻止”，或者相反。这是代码：

```
 function setStyleClass (classesOff,classesOn) {
    var classOn;
      if (document.all) {
        for (var s = 0; s < document.styleSheets.length; s++) {
  for (var r = 0; r < document.styleSheets[s].rules.length; r++){
    if (document.styleSheets[s].rules[r].selectorText.indexOf(classesOff,0) > -1) {
        document.styleSheets[s].rules[r].style.display = "none";
        }
      for(var j = 0; j < classesOn.length; j++){
               classOn = classesOn[j];
          if (document.styleSheets[s].rules[r].selectorText == '.' + classOn) {
              document.styleSheets[s].rules[r].style.display = "block";
            }
        }
      }
  }
 }
else if (document.getElementById) {
 for (var s = 0; s < document.styleSheets.length; s++) {
  for (var r = 0; r < document.styleSheets[s].cssRules.length; r++) {
    if (document.styleSheets[s].cssRules[r].selectorText.indexOf(classesOff,0) > -1) {
        document.styleSheets[s].cssRules[r].style.display = "none";
            }
      for(var j = 0; j < classesOn.length; j++){
               classOn = classesOn[j];
        if (document.styleSheets[s].cssRules[r].selectorText == '.' + classOn) {
            document.styleSheets[s].cssRules[r].style.display = "block";
            }
      }
    }
  }
 }
} 
```

当它被调用时，它会给出一个要关闭的样式 ID 列表，以及要“打开”的样式。这是电话：

```
 onClick="setStyleClass('book','book2_nl','book3_nl','book4_nl','B1_List_01_20','B1_Link_21_40']); 
```

其工作方式是“关闭”任何名称中带有“book”的样式，以及 book2_nl、book3_nl 和 book4_nl。最后两种样式被“打开”。因此，我将一个“页面链接列表”替换为另一个不同的列表。上面的代码在 IE 和 FF 中运行良好，但我在 Chrome 和 Safari 中看不到任何内容。样式看起来都是这样的：

```
.B4_Link_21_40    {
display:  none;
color: #f8fb24;
font : 90% Book Antiqua;
}
.B4_List_21_40    {
display:  none;
color: #f8fb24;
font : 90% Book Antiqua;
} 
```

当我单击相应的链接时，我想打开这些样式。我的代码中是否有任何明显的错误可能导致这种情况？

好的，你已经看到了上面的问题，现在我已经想出了如何返回并为你添加 html :)

```
<html>
<head></head>
<title></title>
<script> //the script posted above </script>
<style>
.book1 {
    position: absolute;
    left:0px;
    top:410px;
    width:200px;
    height:40px;
    display: block;
}
.book2 {
    position:absolute;
    left:0px;
    top:450px;
    width:200px;
    height:40px;
}
.B1_Link_01_20 {
display: none;
color: #f8fb24;
font : 90% Book Antiqua;
}
.B1_List_01_20 {
display: block;
color: #f8fb24;
font : 90% Book Antiqua;
}
.B1_Link_21_40    {
display:  block;
color: #f8fb24;
font : 90% Book Antiqua;
}
.B1_List_21_40    {
display:  none;
color: #f8fb24;
font : 90% Book Antiqua;
}

</style>

<div align="justify" align="center" class="mainBody"
<p>Here's some content...</p>
</div>

<div class="book1">
    <a href="#" target="_self"
    onClick="setStyleClass('book',['B1_List_01_20','B1_Link_21_40']);
    switchStyleClass('B2_Li');
    onMouseOut="window.status=''; return true;">
    </a>
</div>
<div class="book2">
    <a href="#" target="_self"
    onClick="setStyleClass('book',['B2_List_01_20','B2_Link_21_40']);
    switchStyleClass('B1_Li');
    onMouseOut="window.status=''; return true;">
    </a>
</div>

<div class="B1_List_01_20">
<a href=Link To Page 1.shtml>1\. Link To Page 1</a><br>
<a href=Link To Page 2.shtml>2\. Link To Page 2</a><br>
<br></div>
<div class="B1_List_21_40">
<a href=Link To Page 21.shtml>21\. Link To Page 21</a><br>
<a href=Link To Page 22.shtml>22\. Link To Page 22</a><br>
<br></div>

<div class="B1_Link_01_20">
<a ONCLICK="setStyleClass('B1_Li',['B1_List_01_20','B1_Link_21_40']);" href="#">List of Links 1 - 20</a><br><br>
</div>

<div class="B1_Link_21_40">
<a ONCLICK="setStyleClass('B1_Li',['B1_List_21_40','B1_Link_01_20','B1_Link_41_60']);" href="#">List of Links 21 - 40</a><br><br>
</div>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:47:26.937

首先，如果您只是想更改链接，那么我会将不同的链接放在位于同一位置的 2 个容器中，`position: absolute`然后我将拥有一个默认样式为 none 的容器。单击按钮时，您甚至不必将任何内容传递给您的方法，因为您只处理 2 个容器并且您知道它们的 id。

然后不要浏览样式表，只需使用`document.getElementById('container_1').style.display = 'block';` `document.getElementById('container_2').style.display = 'none';`

只要您的容器是块级别的，例如 div，那么这将更改它们在每个浏览器中的显示属性。

如果您想通过更改他们的类名来做到这一点，那么您可以这样做。

```
function changeStyles(){
    document.getElementById('container_1').className = 'classOn';
    document.getElementById('container_2').className = 'classOff';
    //rest of your javascript
} 
```

*这仍然假设您使用两个容器而不是尝试更改每个链接的单独样式

**编辑：**

因此，不知道您实际上拥有什么 html 会使回答您的评论变得更加困难，但这里就是这样。

您的 html 可能如下所示：

```
<div class='classOn' id='container_1'>
    <a href='some_link'>some link</a>
    <a href='some_link2'>some link2</a>
    <a href='some_link3'>some link3</a>
    <a href='some_link4'>some link4</a>
</div>
<div class='classOff' id='container_2'>
    <a href='different_link'>different link</a>
    <a href='different_link2'>different link2</a>
    <a href='different_link3'>different link3</a>
    <a href='different_link4'>different link4</a>
</div>
<button onclick='changeStyles()>See new Links!</button> 
```

然后你的CSS：

```
.classOn{
     display: block;
     position:absolute;
     margin: 10px 10px 10px 10px;
     //rest of your css
}
.classOff{
    display: none;
    position: absolute;
    margin: 10px 10px 10px 10px;
    //rest of your css
} 
```

请注意两个类如何具有完全相同的边距，由于绝对位置属性，它们可以具有这一点。它有效地占用了他们将要使用的页面空间。现在，当`changeStyles()`通过按下按钮调用该函数时，第一个 div 被隐藏，第二个 div 显示在完全相同的位置上的新链接。希望有帮助。

好的，所以我上面的示例适用于您刚刚制作`class='classOn'`并`class='B1_List_01_20'`制作并使用上面`class='classOff'`的`class='B1_Link_21_40'`功能，它应该在它们之间切换就好了。

# apache-flex - 如何阻止带有 keyEquivalents 的 FlexNativeMenu 窃取我的击键？

> ID：10694778
> 
> 赞同：0
> 
> 时间：2012-05-22T01:40:23.230
> 
> 标签：apache-flex, keystroke

我有一个本机菜单项，其中包含一个简单字母（如“F”）的快捷方式。

```
<s:menu> 
    <mx:FlexNativeMenu id="mainMenu"
                       dataProvider="{menuData}"  
                       labelField="@label"  
                       keyEquivalentField="@keyEquivalent"  
                       showRoot="false" /> 
</s:menu> 

<fx:Declarations>
    <fx:XML format="e4x" id="menuData"> 
        <root> 
            <menuitem label="Edit"> 
                <menuitem label="Frame Selection" keyEquivalent="f"/>
            </menuitem> 
        </root> 
    </fx:XML>
</fx:Declarations> 
```

这很好用，但是当我尝试在应用程序的任何文本字段或 textInput 中键入文本时，我无法键入 f。

如何阻止菜单窃取我的键盘输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:52:39.893

菜单加速器的更好模式可能是使用控制键，例如您的示例中的 CTRL+F。

因此，您的菜单项将包括`controlKey="true"`

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx">

    <s:menu>
        <mx:FlexNativeMenu id="mainMenu"
                           dataProvider="{menuData}"
                           labelField="@label"
                           keyEquivalentField="@keyEquivalent"
                           showRoot="false" />
    </s:menu>

    <fx:Declarations>
        <fx:XML format="e4x"
                id="menuData">
            <root>
                <menuitem label="Edit">
                    <menuitem label="Frame Selection"
                              keyEquivalent="f"
                              controlKey="true" />
                </menuitem>
            </root>
        </fx:XML>
    </fx:Declarations>

    <s:TextInput />

</s:WindowedApplication> 
```

# javascript - 为什么javascript函数的返回值未定义？

> ID：10694779
> 
> 赞同：2
> 
> 时间：2012-05-22T01:40:54.047
> 
> 标签：javascript, jquery

我有一个检测图像大小的函数，我希望它返回一个包含宽度和高度的对象。*在下面的代码中，函数中*的sz.width 和 sz.height保存了值，但是在它们返回值之后它是未定义的。我错过了什么？

```
 function getImgSize(imgSrc) {
        var newImg = new Image();

        newImg.onload = function() {
          var height = newImg.height;
          var width = newImg.width;

          function s() {}
          sz = new s();
          sz.width = width;
          sz.height = height;
          $('#infunc').text("in function, w = "+sz.width+", h = "+sz.height);
          return sz;
        }
        newImg.src = imgSrc; // this must be done AFTER setting onload
      }

var sz = getImgSize("http://lorempixel.com/output/fashion-q-c-1920-1920-4.jpg");
$('#outfunc').text("outside function, w = "+sz.width+", h = "+sz.height); 
```

jsfiddle：http: [//jsfiddle.net/forgetcolor/LbxA3/](http://jsfiddle.net/forgetcolor/LbxA3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T01:51:09.693

该函数`getImgSize`设置图像加载，然后终止。稍后，当图像加载时，匿名 onload 函数被调用并正确计算大小，然后将其返回给一个不关心的 DOM 引擎......

你可能想知道如何*做*你想做的事。简短的回答：你不能。这是您可以获得的最接近的：

```
 function getImgSize(imgSrc, callback) {
    var newImg = new Image();

    newImg.onload = function() {
      ... // blah-blah blah
      callback(sz);
    }
    newImg.src = imgSrc;
  }
  getImgSize("http://lorempixel.com/output/fashion-q-c-1920-1920-4.jpg",
            function(sz) {
              $('#outfunc').text("in callback, w = "+sz.width+
                                 ", h = "+sz.height);
            }); 
```

其实我是来写的：

> // 这必须在设置 onload 之后完成

这就是我敢打赌你的问题所在。// 这必须在设置 onload 之后完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T01:51:01.110

这是不可能的。您正在尝试获取异步调用的返回值。

考虑：

```
var i = 0;
setTimeout(function() { i = 1; }, 1000); //1 second later
alert(i); 
```

这将发出警报`0`，因为该值仅在一秒钟内更改，而不是立即更改。

### [不相信我？](http://jsfiddle.net/a4b5s/)

你试图做的是同样的事情。您不能使用尚未发生的值。为了完成你想要做的事情，你需要使用回调。

# c - C for/while 循环不求和

> ID：10694786
> 
> 赞同：1
> 
> 时间：2012-05-22T01:41:51.277
> 
> 标签：c, for-loop, while-loop, sum

```
for (i = 0; i < n; i++)
    {
        x[i] = (float) (i * step);
        k = 5;
        sum = 0;
        while(k > 0)
        {
            sum = sum + (1/k) * sin((k*PI*x[i])/5);
            k = k - 2;
        }
        y1[i] = (4/PI)*sum;

        y2[i] = 0*(4/PI)*sin((PI*x[i])/5);
    } 
```

当调试除 1 以外的每个 k 值时，总和显示为等于 0，我是否正确实现了循环？

编辑1：

```
int k;
double sum; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T01:44:19.560

由于 1 和 k 都是整数 - 1/k 是**[整数除法](http://mathworld.wolfram.com/IntegerDivision.html)**，因此如果 k > 1，它总是为 0。因此，总和不会添加任何内容。您希望 1/k 执行浮点除法。尝试`1.0 / k`代替 1/k。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:46:02.057

1/k 将给出 0。因为它是整数除法。你必须给 1.0/k 或 1/(float)k

# eclipse - Eclipse 可乐插件的源代码

> ID：10694790
> 
> 赞同：0
> 
> 时间：2012-05-22T01:43:28.857
> 
> 标签：eclipse, eclipse-plugin

在哪里可以找到 Eclipse Cola 插件的源代码？是否有 git 或 cvs 存储库？

最好只包含插件而不包含其他任何内容，但如果它是大型存储库的一部分，那也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:51:45.013

你试过这个：

[http://wiki.eclipse.org/RT_Shared_Editing#The_Cola_Source](http://wiki.eclipse.org/RT_Shared_Editing#The_Cola_Source)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:52:07.940

一个简单的[谷歌搜索](http://bit.ly/K6sMIc)显示它实际上是[开源](http://wiki.eclipse.org/RT_Shared_Editing#The_Cola_Source)的。

*   主机：ecf1.osuosl.org
*   存储库路径：/ecf
*   模块：applications/org.eclipse.ecf.example.sharededitor.cola
*   用户名：匿名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T23:49:23.277

这些存储库的链接实际上已经失效。我从以下网站得到可乐：[https ://github.com/eclipse/ecf/tree/8803dcc3dbe11e5125e034323e2eb2ebb87bd168/framework/bundles/org.eclipse.ecf.docshare](https://github.com/eclipse/ecf/tree/8803dcc3dbe11e5125e034323e2eb2ebb87bd168/framework/bundles/org.eclipse.ecf.docshare)

# css - 有没有办法为独立的 TableView 列设置样式？

> ID：10694792
> 
> 赞同：0
> 
> 时间：2012-05-22T01:43:40.783
> 
> 标签：css, tableview, javafx

我可以使用 CSS 来设置单元格的样式，但是如果我想要一个不同的样式（比如使用不同的文本颜色）只为一列怎么办。

也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:29:41.510

您应该使用[TableColumn#setCellFactory()](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableColumn.html#setCellFactory%28javafx.util.Callback%29)自定义单元格项目呈现。
例如，具有这样的[Person 类](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJADAHAH)的数据模型：

```
// init code vs..
TableColumn firstNameCol = new TableColumn("First Name");
firstNameCol.setMinWidth(100);
firstNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("firstName"));
firstNameCol.setCellFactory(getCustomCellFactory("green"));

TableColumn lastNameCol = new TableColumn("Last Name");
lastNameCol.setMinWidth(100);
lastNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("lastName"));
lastNameCol.setCellFactory(getCustomCellFactory("red"));

table.setItems(data);
table.getColumns().addAll(firstNameCol, lastNameCol);

// scene create code vs.. 
```

和常用`getCustomCellFactory()`方法：

```
private Callback<TableColumn<Person, String>, TableCell<Person, String>> getCustomCellFactory(final String color) {
        return new Callback<TableColumn<Person, String>, TableCell<Person, String>>() {

            @Override
            public TableCell<Person, String> call(TableColumn<Person, String> param) {
                TableCell<Person, String> cell = new TableCell<Person, String>() {

                    @Override
                    public void updateItem(final String item, boolean empty) {
                        if (item != null) {
                            setText(item);
                            setStyle("-fx-text-fill: " + color + ";");
                        }
                    }
                };
                return cell;
            }
        };
    } 
```

# ruby-on-rails - Rails：具有多个条件的 Postgresql 连接（多态）

> ID：10694796
> 
> 赞同：0
> 
> 时间：2012-05-22T01:44:50.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord, join

大家好，这是我的代码：

```
class Tailor < ActiveRecord::Base
    has_many    :tailor_items
    has_many    :order_items

    [:collars, :sexes, :sleeves].each do |attribute|
        has_many    attribute, through: :tailor_items, source: :item, source_type: attribute.to_s.classify

    end
 end

class TailorItem < ActiveRecord::Base
  belongs_to        :tailor
  belongs_to        :item, polymorphic: true
end

class Collar < ActiveRecord::Base
end 
```

我需要做的是：对于给定的衬衫，我需要选择裁缝。衬衫可以有领子，男/女或某种类型的袖子。一些裁缝可以制作所有的领子，但只能制作几个袖子，其他裁缝只能制作男性的东西，等等。对于这个例子，优先级无关紧要。这个想法是我最终得到了 1 个裁缝。

我试过这个：

```
tailors = Tailor.joins(:tailor_items).where("(item_id = ? and item_type = ?)",1,"Collar")
if tailors.count > 1
  tailors.where("(item_id = ? and item_type = ?)",2,"Sleeve")
  if tailors.count > 1
     # and so forth.
  end
end 
```

但我从来没有得到一排回来。如果我说：

```
Tailor.find(1).tailor_items 
```

我得到两个结果（为简单起见，sudo 代码）

```
<id: 1, item_type: "Collar"><id:2, item_type:"Sleeve"> 
```

对于第二个裁缝：

```
Tailor.find(2).tailor_items 
```

我得到两个结果（为简单起见，sudo 代码）

```
<id: 1, item_type: "Collar"><id:3, item_type:"Sleeve"> 
```

但是当我尝试将它们链接到查询中时，它不起作用......即使我把它们全部放在一个地方：

```
Tailor.where("(item_id = 1 and item_type = 'Collar') and (item_id = 2 and item_type = 'Sleeve')") 
```

我仍然得到 0 个结果。

```
Tailor.where("item_id = 1 and item_type = 'Collar'") returns: Tailor #1
Tailor.where("item_id = 2 and item_type = 'Sleeve'") returns: Tailor #1 
```

但他们一起没有回报。

```
Tailor Load (0.0ms) SELECT "tailors".* FROM "tailors" INNER
JOIN "tailor_items" ON "tailor_items"."tailor_id" = "tailors"."id" WHERE ((tailo
r_items.item_id = 1 and tailor_items.item_type = 'Collar') and (tailor_items.ite
m_id = 2 and tailor_items.item_type = 'Sleeve')) 
```

我很困惑..

谢谢你的帮助。

我运行：Win XP Postgresql Rails 3.2.2

PS：在多态连接之后唯一缺少的就是一点 XML。:P 否则它只是不够企业化..

编辑：实施 Rob di Marcos 范围，我得到这个 SQL：

```
SELECT "tailors".* FROM "tailors" WHERE 
(EXISTS(SELECT * FROM tailor_items WHERE tailor_items.item_id = 1 and tailor_items.item_type = 'Collar')) 
AND (exists(select * from tailor_items where tailor_items.item_id = 2 and tailor_items.item_type = 'Sleeve')) 
```

这将返回 2 名裁缝，而不是只有 1 名可以同时做的裁缝（而裁缝 2 不能做袖子 #2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:01:32.623

问题是 where 需要在两行上匹配。我通常会使用子查询来测试这一点。所以像

```
Tailor.where("exists (select 'x' from tailor_items where 
         tailor_id = tailors.id and tailor_items.item_id = ? and 
         tailor_items.item_type=?)", 1, 'Collar').
       where("exists (select 'x' from tailor_items where 
         tailor_id = tailors.id and tailor_items.item_id = ? and 
         tailor_items.item_type=?)", 2, 'Sleeve') 
```

在此示例中，我对要查找的每个裁缝商品都有一个子查询。我可以轻松地将其作为 Tailor 的范围，例如：

```
class Tailor
  # ....
  scope :with_item, lambda{ |item_id, item_type | 
      where("exists (select 'x' from tailor_items where 
     tailor_id = tailors.id and tailor_items.item_id = ? and 
     tailor_items.item_type=?)", item_id, item_type)
     } 
```

然后能够链接我的裁缝请求

```
Tailor.with_item(1, 'Collar').with_item(2, 'Sleeve') 
```

# apache - url重写不起作用

> ID：10694800
> 
> 赞同：1
> 
> 时间：2012-05-22T01:45:35.480
> 
> 标签：apache, .htaccess, mod-rewrite

我试图通过以下代码段重写 url download.php 以转换为更友好的 url

```
RewriteEngine on
RewriteRule ^download-([0-9]+)\.html$ download.php?id=$1 
```

或者

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule download-id-(.*)\.htm$ download.php?id=$1 
```

下载.php

```
<?php
include "funcs.php";
    if(!isset($core->id))
        die("404 - Not found!"); // Add a header() line of code to make it a real 404
    if(!$download = $core->fetchDownload())
        die("404 - Not found!");

$download = $core->fetchDownload(true);         

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns:fb="http://ogp.me/ns/fb#">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> <?=$download['title']?></title>
<meta name="keywords" content="Place your keywords here" />
<meta name="description" content="Place your description here" />

<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/jquery.google_menu.js"></script>
<link rel="stylesheet" type="text/css" href="css/google_menu.css"/>

<script>
        $('document').ready(function(){
            $('.menu').fixedMenu();
        });

<!--
  function calcHeight()
  {
//find the height of the internal page
var the_height=
document.getElementById('resize').contentWindow.
document.body.scrollHeight;

//change the height of the iframe
document.getElementById('resize').height=
the_height;
}
//-->
</script>

</head>

<body>

<!--facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=132097543481293";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!--facebook -->

<div class="menu">
    <ul>
      <li class="single-link"><!-- Using class="single-link" for links with no dropdown -->
        <!--<a target="_blank" href="#"><h2 dir="rtl"><?=$download['title']?></h2><br /></a>-->
        </li>
        <!-- Using class="current" for the link of the current page -->
      <li class="current">
        <a target="_blank" href="#"><small dir="rtl">فى قسم : <?=$download['type']?>  </small></a>
        </li>
      <li class="single-link"><!-- Using class="single-link" for links with no dropdown -->
        <a target="_blank" href="#">المشاهدات: <?=$download['views']?></a>
        </li>

      <li class="single-link"><!-- Using class="single-link" for links with no dropdown -->
        <a href="http://<?=$download['surl']?>" target="_top" > <?=$download['sname']?> </a>
        </li>

         <li class="single-link"><!-- Using class="single-link" for links with no dropdown -->
        <a href="<?=$download['url']?>" target="_top" > عرض الصفحة كاملة </a>
        </li>

          <li class="single-link"><!-- Using class="single-link" for links with no dropdown -->
        <div id="fbook"> <fb:like send="false" layout="box_count" width="40" show_faces="false"></fb:like></div>
        </li>

    </ul>

    <a href="contact_us.php" ><img style="margin:10px 0 0 5px;" src="adsimg/topleft.jpg" width="389" height="73" /></a>
</div>

<iframe  onLoad="calcHeight();" scrolling="yes" frameborder="1" width="100%" height="2000" name="resize" id="resize"  src="<?=$download['url'] ?>"  />

<?=$core->templateVar("downloadRating")?>
</body>

<?php

?> 
```

但它没有用，虽然 apache 和 rewrite 模块运行良好，但脚本 url 没有任何变化

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:49:31.357

mod_rewrite 用于后端。这就是它在服务器上的样子。它不是 301 或 302 重定向。

# jasper-reports - 在 iReports 2.0.2 中使用 excel 预览和 excel 预览（使用 J ExcelApi）有什么不同的预览报告？

> ID：10694803
> 
> 赞同：0
> 
> 时间：2012-05-22T01:46:03.730
> 
> 标签：jasper-reports, ireport

我仍然是 Jasper 报告的新手。我仍然混淆了 iReports 2.0.2 中使用 excel 预览和 excel 预览（使用 J ExcelApi）的不同预览报告。人们使用哪种更常见？我们生成报告时有什么影响吗？谁能告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:35:49.827

Jasperreports 支持多种导出格式（xls、pdf、csv 等）。使用 iReport 开发报告后，您可以生成任何这些导出格式的报告。查看这些报告的最佳方式是使用您可以映射的外部应用程序。例如，xls 报告与 Excel 相关联，pdf 报告与 Adob​​e Reader 相关联。新版本的 iReport 支持使用应用程序本身生成这些报告（预览版）。但是，无论您是使用外部查看器还是内部使用 iReport“预览”查看，后台发生的事情都是相同的。就个人而言，我更喜欢使用外部查看器。导出的报告缓存在编译目录中。

# javascript - 使用javascript将html文件加载到div中？

> ID：10694808
> 
> 赞同：1
> 
> 时间：2012-05-22T01:46:46.633
> 
> 标签：javascript

我有一个 div，我想用来自我的服务器的不同 html 文件填充它。有没有一种简单的方法可以做到这一点？我所找到的只是 jquery 示例，我不想使用库。

我试过这个：

```
 document.getElementById('main').innerHTML = 'menu.html'; 
```

但这显然只是加载了文本！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T01:48:50.827

一些简单的 Ajax 将为您解决问题。这是未经测试的，但应该给你正确的想法：

```
var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
    document.getElementById("main").innerHTML=xmlhttp.responseText;
  }
}

xmlhttp.open("GET","menu.html",true);
xmlhttp.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:49:31.090

最简单的方法是使用一个库，整个点，他们为你编写了代码。正确的？使用 jQuery 示例。它和它一样好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:50:31.767

有*简单*的方法吗？不，不是没有图书馆。话虽如此，如果你愿意，你可以自己做——这可能是你爬回 jQuery 怀抱的所有必要条件；）

资源：[Mozilla 开发者网络上的 XHR](https://developer.mozilla.org/en/XMLHttpRequest)

# android - 在 Surfaceview 中显示\隐藏 AdMob

> ID：10694816
> 
> 赞同：0
> 
> 时间：2012-05-22T01:47:54.457
> 
> 标签：android, interface, callback, admob, surfaceview

我在我的游戏中实现了 admob，但我的游戏使用表面视图来显示图形。

如何从 Surface 视图中“访问” AdMob 视图？

**编辑2：**

试图实现回调：

**MainActivity.class**

```
interface AdMobInterface {
public void HideAd();
public void ShowAd();
}

public class MainActivity extends Activity implements AdListener {

 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    layout = new RelativeLayout(this);
    engine = new Engine(this);
    layout.addView(engine);

    if(engine.IsDemoVersion) {
        SetupAdMob();
    }

    setContentView(layout);

}

public void ShowAd() {
         ///Execute this from Engine.class
}

public void HideAd() {
          ///Execute this from Engine.class 
}

private void SetupAdMob() {
    String AdMobPublisherID = "XXXXXXXXXX";
    adView = new AdView(this, AdSize.BANNER, AdMobPublisherID);
    RelativeLayout.LayoutParams params = new    RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    layout.addView(adView, params);
    layout.bringChildToFront(layout.getChildAt(1));
    adView.loadAd(new AdRequest());
}

} 
```

**引擎类**

```
 public class Engine extends SurfaceView implements
    SurfaceHolder.Callback, SensorEventListener, AdMobInterface {

AdMobInterface AdMob;

  public Engine(Context context, AdMobInterface admob) {
    super(context);

   AdMob = admob;

 }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:08:25.240

使用`FrameLayout`并显示表面视图顶部的添加。像这样的东西：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">
    <SurfaceView android:layout_width="fill_parent"
                 android:layout_height="fill_parent" />
    <AdView id="@+id/ad" 
            android:layout_width="wrap_content" 
            android:layout_height="fill_parent" />
</FrameLayout> 
```

然后您需要做的就是通过 ID 找到 AdView 并将其从父布局中删除。

```
View adView = findViewById(R.id.ad);
FrameLayout root = (FrameLayout)findViewById(R.id.root);
root.removeView(adView); 
```

最好从活动内部执行此操作，您的“引擎”无需了解广告或布局。

# php - 计算字符串中的php数组出现次数

> ID：10694819
> 
> 赞同：1
> 
> 时间：2012-05-22T01:48:47.013
> 
> 标签：php

我有一个字符串和一个值数组，我想检查数组中的项目出现在字符串中的次数。

这是最快的方法吗？

```
$appearsCount = 0;

$string = "This is a string of text containing random abc def";
$items = array("abc", "def", "ghi", "etc");

foreach($items as $item)
{
    $appearsCount += substr_count($string, $item);
}

echo "The item appears $appearsCount times"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:46:18.057

您可能会发现正则表达式很有用：

```
$items = array('abc', 'def', 'ghi', 'etc');
$string = 'This is a string of text containing random abc def';

$appearsCount = count(preg_split('/'.implode('|', $items).'/', $string)) - 1; 
```

当然，您必须注意不要使正则表达式无效。`$items`（即，如果值在正则表达式的上下文中包含特殊字符，则需要正确转义它们。）

这与您的多个子字符串计数*并不*完全相同，因为基于正则表达式的拆分不会将重叠项目计算两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T01:58:09.623

最快的，可能 - 至少你不太可能通过任意输入获得更快的速度。但是，请注意，您可能并不[完全正确](http://php.net/manual/en/function.substr-count.php)：

```
$appearsCount = 0;

$string = "How many times is 'cac' in 'cacac'?";
$items = array("cac");

foreach($items as $item)
{
    $appearsCount += substr_count($string, $item);
}

echo "The item appears $appearsCount times"; 
```

# facebook - 如何使用 FQL 或 Graph API 检索仅包含一个标记用户的照片或照片？

> ID：10694822
> 
> 赞同：4
> 
> 时间：2012-05-22T01:49:04.547
> 
> 标签：facebook, facebook-graph-api, tags, facebook-fql, photos

我已经尝试使用 FQL 和 Graph API 来完成此操作。

我首先尝试了这个 FQL 调用：

```
$fql = "SELECT pic, src_big FROM photo WHERE pid IN (SELECT pid FROM photo_tag WHERE subject = me())"; 
```

从这里我收到的结果包括包含给定用户标签的图像（在本例中：me()）。但是，这些图像可能包括不止一个标记的用户。我希望通过使用 SQL HAVING 子句和 COUNT (http://stackoverflow.com/a/3710501/1406986) 来解决这个问题。不幸的是，我认为 FQL 不支持此功能，因为当我尝试此调用时：

```
$fql = "SELECT pic, src_big FROM photo WHERE pid IN (SELECT pid FROM photo_tag HAVING COUNT(subject) = 1"; 
```

我收到了来自 Facebook 的错误消息。如果 FQL 实际上支持此功能，请纠正我。

为了尝试使用 Graph API 解决这个问题，我提出了以下请求：

```
$userPics = $facebook->api('/me/photos'); 
```

这将返回用户的照片，但是，从这一点开始，我被迫遍历每张照片，寻找只包含一个标签的照片。我发现这是不切实际的，例如，如果我需要为用户的每个朋友找到只包含他们的朋友而不包含其他朋友的图像。为此，我需要单独检索他们朋友的所有照片，然后遍历所有照片。

我仍在寻找一个好的解决方案。请发表您的想法和解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T17:42:58.247

好吧，我已经设法为这个问题创建了一个 FQL，但它一点也不漂亮

```
SELECT object_id, pid, src_big FROM photo WHERE pid IN
  (SELECT pid FROM photo_tag 
    WHERE pid IN (SELECT pid FROM photo_tag WHERE subject = me()) 
    AND NOT (pid IN 
      (SELECT pid  FROM photo_tag WHERE pid IN 
        (SELECT pid FROM photo_tag WHERE subject = me()) 
      AND subject != me())
    )
  ) 
```

**解释：**

第一个很简单，获取当前用户的 photo_tags

```
SELECT pid FROM photo_tag WHERE subject = me() 
```

下一张我加入了同一张桌子，但这一次我想要我和某人在一起的照片

```
SELECT pid  FROM photo_tag WHERE pid IN 
  (SELECT pid FROM photo_tag WHERE subject = me()) 
AND subject != me() 
```

我再次加入同一张桌子（是的 3 次加入同一张桌子），但这次我想要我作为主题的 photo_tags 并且**不在**我之前得到的列表中（我和某人作为主题的照片） ，因此此查询返回所有 photo_tags，其中用户是该照片中唯一被标记的人

```
SELECT pid FROM photo_tag 
WHERE pid IN (SELECT pid FROM photo_tag WHERE subject = me()) 
   AND NOT (pid IN 
     (SELECT pid  FROM photo_tag WHERE pid IN 
        (SELECT pid FROM photo_tag WHERE subject = me()) 
      AND subject != me())
   ) 
```

查询的最后一个添加只是从照片的照片表中获取信息的连接，我是唯一被标记的人

```
SELECT object_id, pid, src_big FROM photo WHERE pid IN
  (SELECT pid FROM photo_tag 
    WHERE pid IN (SELECT pid FROM photo_tag WHERE subject = me()) 
    AND NOT (pid IN 
      (SELECT pid  FROM photo_tag WHERE pid IN 
        (SELECT pid FROM photo_tag WHERE subject = me()) 
      AND subject != me())
    )
  ) 
```

# asp.net - 在 ASP.Net 网络场中，数据库依赖缓存是一种好方法吗？

> ID：10694823
> 
> 赞同：0
> 
> 时间：2012-05-22T01:49:25.310
> 
> 标签：asp.net, caching, web-farm, sqlcachedependency

我正在研究为网络农场 ASP.Net 应用程序使用**具有数据库依赖性的数据缓存。**因此，一旦数据库值发生变化，网络场中的每个网络服务器都会自动刷新其缓存值。这似乎可以使 Web 服务器上的所有缓存值保持同步。这听起来是个好主意还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:09:17.180

不，这并不意味着一旦数据库中的值刷新，所有服务器都会刷新，除非您使用 SqlCacheDependency 之类的东西。看看@以下链接：[http ://www.asp.net/web-forms/tutorials/data-access/caching-data/using-sql-cache-dependencies-vb](http://www.asp.net/web-forms/tutorials/data-access/caching-data/using-sql-cache-dependencies-vb)

否则，该机制只涉及查看数据库并从那里获取值。可能有可能*刷新*值的 sql 作业。因此，它与上面不同。

注意：对于 SqlCacheDependency，您需要使用 MSsql 2005+ 服务器。

另一种技术是在您的解决方案中使用网络挂钩......

# .htaccess - apache（centOS）上的符号链接

> ID：10694824
> 
> 赞同：1
> 
> 时间：2012-05-22T01:49:27.527
> 
> 标签：.htaccess, permissions, centos, symlink

我有一个用于托管站点的 VPS，我试图让 Apache 遵循符号链接，但无法弄清楚。在过去的几个小时里，我用谷歌搜索，一切似乎都很混乱。我对 htaccess mod_rewrite 引擎一无所知，因此不可用。

基本上，我有一个不在其中一个站点的根目录中的资源文件夹，它在另一个目录中，但我希望在根目录中有一个符号链接，以便它看起来既在根目录中又在另一个目录中。

所以原来是 /sub/resources 我想要一个符号链接 /resources 链接到 /sub/resources

我尝试的所有操作都会收到 Apache 权限被拒绝错误。我正在使用 ln -s 与 root 用户创建符号链接，并将符号链接的权限设置为 755。

我尝试将 Options +FollowSymlinks 添加到我的根 .htaccess 文件中。还尝试访问 httpd.conf 文件并确保它具有

```
<Directory />
    Options FollowSymLinks
    AllowOverride Indexes
</Directory> 
```

非常令人沮丧。有什么建议么？

谢谢，

斯科特

# sql - SQL 查询仅限制记录的子集

> ID：10694828
> 
> 赞同：1
> 
> 时间：2012-05-22T01:50:04.873
> 
> 标签：sql, postgresql

假设我有一张人桌，其中有`name`、`gender (M/F)`和`age`。

返回的 SQL 查询会是什么样子：

*   所有女性
*   最多5名男性
*   按年龄排序的人

注意。这是一个人为的例子。此外，欢迎使用 Postgres 特定的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T01:59:33.390

```
SELECT name, gender, age
  FROM ( SELECT name, gender, age
           FROM people
           WHERE gender = 'F'
         UNION ALL
         ( SELECT name, gender, age
             FROM people
             WHERE gender = 'M'
             LIMIT 5  
         )
       ) x
  ORDER BY age 
```

请注意，上述解决方案没有选择任何特定的男性。如果需要，将排序应用于男性子查询。

这个在修剪发生之前按年龄对雄性进行排序：

```
SELECT name, gender, age
  FROM ( SELECT name, gender, age
               ,ROW_NUMBER() OVER (PARTITION BY gender ORDER BY age) gender_count
           FROM people
        ) x
   WHERE gender = 'F'
      OR gender_count <= 5 
```

顺便说一句，我发现“性别”通常用于语法参考。在这种情况下，“性”将是我会使用的术语。

# c++ - 如何在 C++/CX 中创建单例？

> ID：10694831
> 
> 赞同：2
> 
> 时间：2012-05-22T01:50:17.173
> 
> 标签：c++, visual-c++, singleton, windows-runtime, c++-cx

如何在 C++/CX 中创建单例类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:50:13.830

首先，[考虑你是否真的需要一个单例。](https://stackoverflow.com/a/1020384/151292)

与普通 C++ 相比，在 C++/CX 中实现单例的方式没有真正的区别。您需要做两件事：(1) 防止构造多个实例，以及 (2) 提供对对象的单个全局实例的访问。

这是一个简单的例子：

```
namespace Component
{
    public ref class Singleton sealed
    {
    public:

        static property Singleton^ Instance
        {
            Singleton^ get()
            {
                static Singleton^ instance = ref new Singleton();
                return instance;
            }
        }

    private:

        Singleton() { }
    };
} 
```

我为单例实例使用了一个局部静态变量，以避免命名空间范围的静态初始化排序问题。Visual C++ 尚不支持 C++11 的线程安全静态初始化，因此如果您可能正在使用来自多个线程的单个实例，那么您将需要考虑使用命名空间范围的静态变量并处理任何潜在的初始化顺序问题，或者您需要调查[同步初始化](http://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:08:38.493

我这样做的方法是有一个静态变量，用于指向初始化为 NULL 的单例类的指针和一个私有构造函数。然后使用静态 Create(...) 方法来构建实例。在静态 Create 方法中检查静态变量并仅在其为 NULL 时构建实例

```
class Foo
{
  public:
    Foo* Create();
  private:
    Foo(); //private ctor
    static Foo* M_ClassDataP;
};

Foo* Foo::M_ClassDataP = NULL; //initialize class data ptr to null

Foo* Foo::Create()
{
    if (NULL != M_ClassDataP)
    {
        M_ClassDataP = new Foo();
    }
    return M_ClassDataP;
} 
```

# android-layout - 强制应用以缩放模式运行以填充平板电脑的兼容模式

> ID：10694832
> 
> 赞同：0
> 
> 时间：2012-05-22T01:50:27.163
> 
> 标签：android-layout, android

我正在创建一个最小 SDK 版本 = 7 的应用程序。由于应用程序的限制，对于 SDK 版本 11 或更高版本，我不希望平板电脑大小的设备可以选择拉伸以填满屏幕，所以我想强制它在所有这些超大屏幕的兼容模式下运行。我试图阅读文档，但我仍然对如何始终强制执行兼容模式感到有些困惑，以便它始终缩放以填满屏幕，而不向用户提供可供选择的选项。这是我的清单的相关部分：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mytest.HelloWorld"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <supports-screens android:smallScreens="true"
                      android:normalScreens="true"
                      android:largeScreens="true"/> 
```

我是否为我的 SDK 版本正确执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:20:49.630

这些属性（uses-sdk 和 supports-screens）仅影响 Android Market，而不影响设备的运行时行为。您应该包括一个针对平板电脑的布局：layout-xlarge，这样就不需要任何兼容模式，也不会向用户显示缩放选项。查看文档中的[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html#DensityConsiderations)，它很好地描述了支持的尺寸以及如何定位它们：平板电脑是“超大”的。

# javascript - 使用 AJAX 在 Rails 上加载 CSRF 令牌

> ID：10694841
> 
> 赞同：4
> 
> 时间：2012-05-22T01:51:39.740
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, csrf

我决定只加载一个页面来实现我的 Rails 站点，并通过 AJAX 完成其他所有操作。问题是生成的 CSRF 令牌`meta`一旦用于提交注册或登录表单就会失效。如何在不重新加载页面的情况下更新它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:56:55.673

在每个 ajax 请求中：

添加到数据：

authenticity_token: '<%= form_authenticity_token %>'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:16:50.007

我不认为 Rails 在每次请求（或发布或其他任何内容）之后都会使 CSRF 元令牌无效（如果没有，像主干.js 这样的框架将很难:)。

[https://github.com/rails/rails/blob/7fb99e5743d88c04357e09960d112376428a6faa/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L100](https://github.com/rails/rails/blob/7fb99e5743d88c04357e09960d112376428a6faa/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L100)

您可能在您认为没有正确令牌的*无效*请求之前发出请求，因此 rails 会删除您的会话，并且后续请求即使传递了先前正确的令牌，也会被标记为无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T12:10:42.790

您可以在您的 ajax 调用中使用 beforeSend 如下所示的 put、post 方法。 `$.ajax({ type: 'POST', beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))}, url: your url, data: data });`

# ruby - Sinatra 中带有 HAML 的模板函数

> ID：10694843
> 
> 赞同：2
> 
> 时间：2012-05-22T01:51:55.730
> 
> 标签：ruby, sinatra, haml

我希望能够在本身包含 haml 的 Sinatra HAML 模板中创建模板函数。有没有办法做到这一点或类似的事情？如果它也可以与降价一起使用，那就太酷了。

**foo.haml**

```
def foo(x)
   %h2 something
   %p something about #{x}

%h1 Herp de derp
= foo("mary")
= foo("us") 
```

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:10:45.257

实际上，您可以执行以下操作：

```
# app.rb    

require 'sinatra'
require 'haml'
helpers do
  def foo(name)
    haml = <<-HAML
#hello_block
   Hello, #{name}
HAML
    engine = Haml::Engine.new(haml)
    engine.render
  end
end

get '/' do
  haml :index
end

# index.haml
= foo 'World' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:49:20.677

功能很接近，您真正需要的是所谓的**partial**。这些是您可以放置​​在其他视图中的预定义模板。例如，您可能有一个*评论部分*来显示评论的作者、时间戳、内容等。然后您可以为特定帖子的每个评论呈现此部分。

本质上，您将得到以下结果

```
# _foo.haml.erb
%h2 somthing
%p= x

# index.haml.erb
%h1 Herp de derp
= render :partial => "foo", :locals => { :x => "mary" }
= render :partial => "foo", :locals => { :x => "us" } 
```

# java - java线程不同的流

> ID：10694846
> 
> 赞同：0
> 
> 时间：2012-05-22T01:52:27.603
> 
> 标签：java, multithreading

此代码从不同的蒸汽数据中读取数字，并输出总和。这段代码有问题吗？我该如何解决？

```
public class Thr extends Thread{
static int numThr=100, sum=0;
private int num;
private Thr(int num){this.num =num;}
public void run() {
    int k = IntegerReader.get(num);
    int count=0;
    while(k>0) {
        if(count%numThr==num) sum+=k;
        count++;
        k=IntegerReader.get(num);
    }
}
public static void main(String[] a) throws Exception {
    thr[] st =new thr[numThr];
    for(int i=0; i<numThr; i++) st[i] = new Thr(i);
    for(int i=0; i<numThr; i++) st[i].start();
    System.out.println("sum = "+sum);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:05:59.240

一开始就有很多事情是错误的。

1.  Sum 在多个线程之间共享并在多个线程中递增，这意味着您可以获得不一致的值，因为递增值不是原子操作。

    最简单的解决方法是将 sum 的声明更改为： `private static AtomicInteger sum = new AtomicInteger(0);`

    并以这种方式添加： `sum.getAndAdd(k)`

2.  “numThr”在多个线程之间共享，由多个线程读取。由于 numThr 不是 final、synchronized 或 volatile，因此无法保证其他线程会看到它的值已被初始化。numThr 应声明为`private static final int numThr=100`

3.  你`System.out.println("sum = "+sum);`将在你的线程完成执行之前被打印出来。在打印总和之前，您需要在线程上“加入”（即等待它们完成）。添加：`for(int i=0; i<numThr; i++) st[i].join();`在您的系统输出之前。

我认为您应该阅读 Java 内存模型和 Java 并发。这是一个基本教程，但你真的需要一本关于这个主题的书：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:03:20.477

是的，这段代码有几个问题。解决它的一种方法是花时间阅读和理解[Java 教程](http://docs.oracle.com/javase/tutorial/)。另一种方法是请其他人为您修复它，但请注意，这种事情不会在这里得到很好的解决。

# html - CSS 流体确保盒子适合

> ID：10694849
> 
> 赞同：0
> 
> 时间：2012-05-22T01:52:52.257
> 
> 标签：html, css, fluid-layout

这是我的包装器 div。这是一个父div。我希望这个 div 始终适合窗口。width:60% 使盒子变得流畅，它会根据它的宽度变得越来越小，但我希望盒子根据它的高度变得越来越小，这样我总是可以确保它适合页面。我怎样才能实现我正在寻找的东西？

```
#wrapper {
    width:auto;
    height:auto;
    margin:50px auto 0 auto;
    z-index:100;
    min-width:640px;
    max-width:1150px;
    width:60%;
} 
```

# javascript - 使用javascript将描边路径转换为形状

> ID：10694851
> 
> 赞同：1
> 
> 时间：2012-05-22T01:53:46.333
> 
> 标签：javascript, raphael, d3.js

有没有办法使用 javascript 将描边路径转换为形状？是否有任何库将其作为内置功能提供？

我知道 Illustrator 有这个功能，所以一个可能的解决方案是复制屏幕上的 SVG 图像并将其移动到 Illustrator，但如果你能这样做，你会丢失所有存储为属性的相关元数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T04:29:41.670

> *[我]有没有办法使用 JavaScript 将描边路径转换为形状？*

是的，有一种方法可以将 SVG 路径笔划转换为轮廓形状。不幸的是，它不是 SVG 中内置的预打包函数。这样做的方法称为数学。您需要考虑贝塞尔曲线、斜接设置、linecaps、linejoins 和 dasharrays。正如@inhan 指出的那样，您可能会使用各种函数来帮助您或近似它，但它们都不会为您做数学计算。这是*可能的*，但绝不是*简单*的……在 JavaScript 中。

> *[W] 有没有办法将屏幕上的 svg 图像复制到 Illustrator 中？*

当然，这很容易。

1.  在 Web 浏览器中打开基于 D3.js SVG 的插图。
2.  打开开发者工具（或 Firebug）。
3.  找到您想要的元素，右键单击并选择“复制为 HTML”或“复制 SVG”。
4.  将代码粘贴到文本编辑器中并用 SVG 包装。
5.  在 Illustrator 中打开 SVG。
6.  勾勒出你想要的路径。
7.  另存为 SVG
8.  将 Illustrator 导出的 SVG 代码复制/粘贴到……任何你想要的地方。

但这对你有什么好处？当然，没有任何东西适用于您的 D3.js 可视化。

> *但如果你能做到这一点，你会丢失所有作为属性存储的相关元数据吗？*

你*在*说什么？如果您在讨论源代码中的属性，那么只有在不将属性复制/粘贴到结果中时才会丢失它。如果您谈论的是绑定到在 Web 浏览器中运行的可视化的 JavaScript 数据，那么如果您往返于 Adob​​e Illustrator，您**当然会丢失数据。**

你的问题对我来说毫无意义，我觉得我一定错过了你的需求/目标。你*真正*想要完成什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:33:15.187

在 Raphaël 中使用`Element.getTotalLength()`和函数以及函数中该路径的 stoke **-width**和**stroke-dasharray**属性可能会给出结果。`Element.getSubpath()`

# javascript - 我想将一个变量从提示框传回日期字符串

> ID：10694853
> 
> 赞同：0
> 
> 时间：2012-05-22T01:54:13.927
> 
> 标签：javascript, html

我想将一个变量从提示框传回日期字符串。因此，如果一个人增加 5 天，则日期将增加 5 天。我是 javascript 新手，这是我的第一个测试脚本，您可以在答案中列出任何资源，我将继续阅读。

```
<html>

 <head>
   <script type="text/javascript">
     var currentTime = new Date();
     var month = currentTime.getMonth() + 1;
     var day = currentTime.getDate();
     var year = currentTime.getFullYear();
     var dateString = "Today's Date " + month + "/" + day + "/" + year;
     function loadDate(){
       document.getElementById('dateSpan').innerHTML = dateString;
     }

   </script>

 </head>
 <body onload='loadDate()'>
   <form name=myform>
     <span id='dateSpan'></span><input type=button value="add days" onclick="var name=prompt('How many days do you want to add?','5 or 6')"/>
   </form>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:37:08.350

我会使用 date.js 库。

这使得日期更容易使用，并且它也有据可查。

[http://www.datejs.com/](http://www.datejs.com/)

然后，一旦您有要添加的天数，您就可以轻松地增加日期。

```
//Assuming Xdays is a var with your number of days.
var today = Date.today();
var past = Date.today().add(-Xdays).days();
var future = Date.today().add(Xdays).days();

//format to a string
Date.today().toString("d-MMM-yyyy"); // 19-Nov-2007 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T03:26:28.220

像下面这样的东西应该会有所帮助。请注意，它不进行任何验证或检查（元素中的日期字符串是否正确？用户是否输入了数字？）因此您需要添加所有内容并处理错误。

```
function updateDate(el) {
  // get the text of the element
  var text = el.innerHTML;

  // Convert to a date object
  var b = text.split('-');
  var date = new Date(b[0], b[1] - 1, b[2]);

  // Ask for days to add
  var toAdd = prompt('How many days to add?');

  // Adjust date
  date.setDate(date.getDate() + Number(toAdd));

  // Write date to page
  el.innerHTML = date.getFullYear() + '-' + 
                 addZ(date.getMonth() + 1) + '-' +
                 addZ(date.getDate());

  // Helper just for this function
  function addZ(n) {
    return (n < 10? '0' : '') + n;
  }
} 
```

以及一些相关的 HTML：

```
<span id="dateSpan" onclick="updateDate(this)">2012-05-22</span> 
```

另请注意，innerHTML 也获取所有 HTML 内容，但对于这样的事情，它应该没问题。如果您只需要文本，请根据支持的功能测试使用[textContent](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Node3-textContent)或[innerText 。](http://msdn.microsoft.com/en-us/library/ms533899%28v=vs.85%29.aspx)

### 编辑

添加了一段 HTML 以使其正常工作。请注意，日期是 ISO8601 的缩写形式：年-月-日。

# objective-c - 为什么这个 NSSet 成员方法不起作用？

> ID：10694856
> 
> 赞同：2
> 
> 时间：2012-05-22T01:55:00.863
> 
> 标签：objective-c, cocoa, nsset

我在集合中有一个`NSSet`with `@"x"`，我正在尝试使用实例方法`member:`来检查它，如下所示：

```
NSSet *everythingOnStack = [[NSSet alloc] initWithObjects:program, nil];
NSSet *variablesOnStack =  [[NSSet alloc] initWithObjects:([everythingOnStack member:@"x"]),nil];   

NSLog(@"Variables on, %@",variablesOnStack);
NSLog(@"Everything on stack,%@",everythingOnStack); 
```

该`member:`方法似乎没有看到`@"x"`，我不确定为什么。下面是`NSLog()`输出。我阅读了文档，它似乎应该可以工作。使困惑。

```
2012-05-21 20:43:07.902 Calculator[21589:f803] Variables on, {(
)}
2012-05-21 20:43:07.904 Calculator[21589:f803] Everything on stack,{(
    (
    1,
    2,
    x,
    "+"
)
)} 
```

我正在通过斯坦福在线课程学习目标 C。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:19:54.477

该字符串`@"x"` *不是*的成员`everythingOnStack`。它是任何类型的集合的成员`program`（看起来像一个数组）。当你这样做时`[everythingOnStack member:@"x"]`（顺便说一下，括号是不必要的），你会`nil`回来，所以你最终得到一个空集 for `variablesOnStack`。

为了`@"x"`摆脱`everythingOnStack`，您必须将其从`program`数组中取出：

```
[[everythingOnStack member:program] objectAtIndex:3] 
```

请注意，这需要您知道您想要的对象在数组中的位置。我不确定这会如何影响您的设计——看起来您可能正在实施 RPN 计算器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:29:12.233

在我看来，您可能误解了这一行的作用： [[NSSet alloc] initWithObjects:program, nil]; 这会将一个对象，数组“程序”添加到您的集合中，它不会将“程序”中的每个对象添加到您的集合中。如果要将数组的每个成员添加到集合中，可以使用 NSSet *everythingOnStack = [NSSet setWithArray:program];

如果这样做了，那么“x”将成为您的集合的成员。但是，你会得到一个唯一的集合（我认为所有集合都是），所以如果你在“程序”中有两次相同的数字，它只会在集合中出现一次。

# eclipse - IntelliJ v11.x 中的 InstaSearch（eclipse 插件）功能？

> ID：10694865
> 
> 赞同：2
> 
> 时间：2012-05-22T01:56:49.970
> 
> 标签：eclipse, intellij-idea

从 eclipse 迁移到 intelliJ 时我怀念的一件事是[InstaSearch](http://marketplace.eclipse.org/content/instasearch)插件，它可以让您非常快速、非常简单且有效地搜索整个项目的源代码。

IntelliJ 中是否有这样的功能，或者通过插件烘焙或添加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T05:32:28.160

IntelliJ 支持在您的整个项目中进行搜索和替换。

> **在指定路径内的所有文件中查找文本**
> 1\. 在主菜单上，选择**Edit | 查找 | 在 Path 中查找**，或按**Ctrl+Shift+F**。
> 2\. 在[Find In Path 对话框](http://www.jetbrains.com/idea/webhelp/find-and-replace-in-path.html)中，指定以下选项：
> 
> *   要查找的文本（您可以从最近的历史记录下拉列表中选择一个）。
> *   搜索范围（项目、模块或目录）。
> *   搜索选项（区分大小写、整个单词和正则表达式）。

请参阅[此处](http://www.jetbrains.com/idea/webhelp/finding-and-replacing-text-in-project.html)的说明。

# javascript - 我可以将 $(this) 传递给 .getJSON 回调函数吗？任何解决方法？

> ID：10694867
> 
> 赞同：5
> 
> 时间：2012-05-22T01:57:02.510
> 
> 标签：javascript, jquery

我试图在每个 li 上获取 rel 的值并将其传递给 .getJSON 函数。然后，我想将回调中的 thumbnail_url 值添加到 li 后代的图像标签中。我的问题是如何将 $(this) 对象传递给回调函数。似乎 $(this) 为空。

```
$('ul.sample li').each(function () {

        var url = 'http://sampleurl/api/url?' + $(this).attr('rel');

        $.getJSON(url, function (data){
            $(this).find('img').attr('src') = data.thumbnail_url;
    })
}); 
```

HTML：

```
<ul class="sample">
   <li rel="value1">
       <img src="">
   </li>
   <li rel="value2">
       <img src="">
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T01:58:00.767

只需在回调之外分配它（就像我正在设置`self`），然后在回调内部使用（通过引用您设置的变量）：

```
$('ul.sample li').each(function () {

    var self = $(this); // using self to store $(this)
    var url = 'http://sampleurl/api/url?' + self.attr('rel');

    $.getJSON(url, function (data) {
        // now retrieving self - it is accessible from the callback
        self.find('img').attr('src') = data.thumbnail_url;
    });

}); 
```

原因是因为`this`在回调中`.each()`与在回调中不同`$.getJSON()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T02:12:02.467

如果您使用`$.ajax`而不是`$.getJSON`，您可以使用以下`context`选项：

```
$('ul.sample li').each(function () {
    var url = 'http://sampleurl/api/url?' + $(this).attr('rel');
    $.ajax({
        url : url,
        dataType : 'json',
        context : this,
        complete : function (data) {
            // 'this' will be what you passed as context 
            $(this).find('img').attr('src') = data.thumbnail_url;
        }
    });
}); 
```

# c++ - 为继承设计类

> ID：10694875
> 
> 赞同：0
> 
> 时间：2012-05-22T01:58:30.197
> 
> 标签：c++, templates, inheritance

假设我有一个类实体。
然后我有 n 个从 Entity 派生的类，
例如：

```
class Snake : public Entity{...};  
class Mouse : public Entity{...}; 
```

现在我有一个实体类玩家。
我可以创建一个继承自任何类型实体的类播放器吗？例如：

```
class Player : public Entity -->(but instead of entity be any type of entity) 
```

这可以做到吗？
这是通过使用模板实现的吗？
我读过模板可以在 cpp 文件中明确指定，即

```
template class Entity<Snake>; 
```

我正在努力实现以下目标

在我的玩家类中，我有一个 moveCamera 函数，现在只有当玩家移动时，相机才会移动。如果 AI Snake 移动，相机不应该移动。

这是我在实体类中的渲染函数，它是虚拟的

```
void Entity::Render(float interpolation)
{
  if(currentAnimation != 0){
    float x = this->currLocation.x - (this->currentVelocity.x * (1.0f - interpolation)) - camera->getLocation(L_FACTOR_CURRENT).x;
    float y = this->currLocation.y - (this->currentVelocity.y * (1.0f - interpolation)) - camera->getLocation(L_FACTOR_CURRENT).y;
    currentAnimation->Render(x,y);
  }
} 
```

这是我的 gameUpdate 函数，基本上将实体移动到其各自的世界坐标

```
void Entity::GameUpdate(float gameUpdateDelta)
{
  this->Move();
} 
```

因此，对于我的播放器的移动函数，我将调用相机的移动函数，然后调用基类的移动函数......现在可以调用基类移动函数的扩展类。
我的移动函数是虚拟的，因此是一条蛇和鼠标可以移动不同..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:37:14.780

您可能想要编写一个`Player`继承自 Template 参数的模板类。

```
template< typename Derived >
class Player: 
    public Derived, // we believe that Derived inherits Entity
    public IPlayer  // makes sense if Player is not a Entity only interface
{
   ... some declaration here ...

   void update(); // some virtual method from Entity interaface
   void player_action(); // some virtual method from IPlayer interaface

} 
```

创建具体类型的播放器时，您可以将其放置在您的场景中。

```
IPlayer* player1 = new  Player<Snake>("Player1");

Entity* playerEntity = dynamic_cast< Entity* >( player1 );
if( playerEntity ) // test if object can be placed on scene
{
    scene->add( playerEntity );
} 
```

您可能还需要知道如何编写类方法的部分模板特化。此外，您可能会发现[boost enable_if](http://www.boost.org/doc/libs/1_49_0/libs/utility/enable_if.html)是一个强大的玩具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T04:21:37.377

如果您可以发布当前设计的接口（仅是类定义），对人们的帮助会更有帮助。看起来你需要让玩家自己的蛇和老鼠。如果您希望某些操作与其他操作相关联，请使用观察者。

# java - java - 如何在java中使用joda-time正确格式化亚马逊S3帖子上传的日期？

> ID：10694878
> 
> 赞同：0
> 
> 时间：2012-05-22T01:59:28.903
> 
> 标签：java, amazon-s3, jodatime

在亚马逊关于上传到 S3 的[文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/HTTPPOSTForms.html#HTTPPOSTFormEncoding)中，它告诉我需要`expiration`像这样格式化策略文档中密钥的日期：

> 过期以 ISO8601 GMT 日期格式指定策略的过期日期。例如，“2007-12-01T12:00:00.000Z”指定策略在 2007-12-01 格林威治标准时间 12:00 之后无效。保单中要求到期。而且我似乎无法弄清楚如何让 joda-time 以
> 正确的格式打印日期。

但是，如果没有 -4:00 或本地时区的任何内容，我似乎无法让它在 GMT 中打印。

我尝试使用自定义格式化程序没有运气，有人可以在这里给我提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:11:32.063

您需要使用`LocalDate`and`LocalDateTime`表示。一探究竟：

```
DateTimeFormatter formatter = ISODateTimeFormat.dateTime();
System.out.print( formatter.print( new LocalDateTime() ) ); 
```

将打印如下内容：

```
2012-05-22T12:09:22.988 
```

# validation - SmartyStreets 地址验证 PHP 示例？

> ID：10694883
> 
> 赞同：6
> 
> 时间：2012-05-22T02:00:07.983
> 
> 标签：validation, street-address, smartystreets

我可以获得调用 SmartyStreets LiveAddress API 进行地址验证的示例 PHP 代码示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:35:24.483

[当然——我们的 GitHub 存储库](https://github.com/smartystreets/LiveAddressSamples/tree/master/php)中有示例代码。那里有3个例子：

1.  使用 cURL 向我们的 API 发出请求（可以同时处理多个地址）
2.  一个 GET 请求。简单，但每个请求只支持一个地址
3.  一个“SLAP”（单行地址处理）示例，展示了如果地址尚未拆分为街道、城市、州等组件，如何验证地址。

如果您还有其他问题，我很乐意提供帮助；我写了这些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-17T18:35:12.783

如果您在没有安全证书的测试系统上开发 SmartyStreet 代码，您可以添加此行来禁用证书测试：

```
if ($bTestSystem) curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-20T19:41:04.943

Smarty 街道使用与许多其他解决方案相同的方法。用户输入地址，然后执行查找，如果未找到地址，则向用户呈现可供选择的有效地址列表。这是一种较慢的方法，可能并不理想。

Addrexx 提供了一种可能是更好选择的新方法。Addrexx 解决方案允许用户从下拉列表中自动选择他们的信息。这加快了输入个人信息的过程。全面披露：我是 Addrexx 的开发人员。Addrexx 是一个 SaaS，包括用于 salesforce、magento、big commerce 和更多平台的完整集成包。

[您可以在http://addrexx.com/ecommerce.html](http://addrexx.com/ecommerce.html)看到 Addrexx 方法。

# php - 页面重定向或其他？

> ID：10694885
> 
> 赞同：0
> 
> 时间：2012-05-22T02:00:50.567
> 
> 标签：php, facebook, .htaccess, redirect

例如，Facebook 如何在登录网站时“重定向”用户？例如，当您最初登录时，您在 www.facebook.com，然后 URL 快速更改为 www.facebook.com/login.php，然后，假设您提交了有效的电子邮件/密码，您将被重定向回www.facebook.com 与您的新闻提要等。另外需要注意的是，如果您的电子邮件/密码无效，您将被重定向到 www.facebook.com/login.php，然后停在那里并要求重新登录。他们是否使用页面重定向来实现这一目标？如果是这样，他们是否在 PHP 中这样做......我会假设。还是他们使用.htaccess？还是我不知道的另一种完全不同的方法？

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:04:53.517

login.php 验证用户信息，设置 cookie，然后重定向。如果 Facebook 真的使用 PHP，那将是

```
header("Location: http://facebook.com/");
die(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:06:11.427

他们根据 if else 命令或 switch 类使用 php 标头函数。

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

至于页面/用户，它是来自 php 页面查询的 apache mod 重写规则

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# c# - 时间：2019-04-10 标签：c#asp.netmvcHttpRequest.URL

> ID：10694889
> 
> 赞同：0
> 
> 时间：2012-05-22T02:01:29.217
> 
> 标签：c#, asp.net-mvc, windows

我有一个 ASP.net Web 应用程序，它具有不同的功能和数据，具体取决于它登录的 URL。

在已部署的环境中一切正常，因为我可以在 IIS 中绑定多个主机，然后 Web 应用程序可以查询 request.URL 以找出要使用的代码和数据。

例如。[http://foo.bar.com将运行与](http://foo.bar.com)[http://test.bar.com](http://test.bar.com) 不同的代码

问题出现在我的开发机器上的 VS2010 调试中。我可以在配置中硬编码默认站点 url，但需要同时运行多个。例如 site1.localhost、site2.localhost、site3.localhost ....

我尝试在 system32/drivers/etc 中编辑我的主机文件，例如

```
127.0.0.1  localhost site1.localhost site2.localhost 
```

但是如果我在我的代码中点击 site1.localhost ， request.Url 总是 localhost

无论如何我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:49:25.463

如果您已将主机名映射到 中`system32/drivers/etc/hosts`，请尝试此代码。这应该返回正确的路径

```
 string host = Request.Headers["Host"];
     string pathAndQuery = Request.Url.PathAndQuery;

     string fullPath = host + pathAndQuery; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:38:34.893

基于 mfras3r 评论。我可以让它通过

在 IIS 中设置网站，将该网站指向我的 MVC 应用程序的目录。将所有 url 的绑定添加到 IIS 中的网站。将 url 作为条目添加到 /etc/hosts 中，指向 localhost。

构建应用程序。（不要运行它，因为它会因为 IIS 而搞砸）调试 -> 附加到 IIS 进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T02:52:42.493

我认为vs2010中的调试服务器不是功能齐全的IIS。它不支持多个站点。所以在你的情况下，最好使用“附加”或远程调试。这取决于您是否可以在开发机器上安装 IIS。

# sql-server - 使用 hierarchyid 查找所有叶节点记录

> ID：10694894
> 
> 赞同：3
> 
> 时间：2012-05-22T02:02:23.950
> 
> 标签：sql-server, sql-server-2008, hierarchyid

我将如何只查询“只有叶节点”（即没有子节点）的记录？

我试过这样的查询：

```
select *
from TableA tt
where tt.HierarchyId.GetDescendant(null, null) not in 
(
    Select  t.HierarchyId
    from TableA t
) 
```

但这似乎仍然返回了一些有孩子的节点。

我正在使用内置的 hierarchyid 数据类型（ms sqlserver 的一部分）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T02:48:30.237

```
SELECT A.HieracrchyId, A.HierarchyId.ToString()
  FROM dbo.TableA AS A 
  LEFT OUTER JOIN dbo.TableA AS B
  ON A.HierarchyId = B.HierarchyId.GetAncestor(1)
  WHERE B.HierarchyId IS NULL; 
```

# jquery - 复选框和文本字段 jQuery

> ID：10694898
> 
> 赞同：3
> 
> 时间：2012-05-22T02:03:18.823
> 
> 标签：jquery, class, button, checkbox, textfield

我在类检查中有 5 个复选框（名为 cb1、cb2、cb3、...），在类文本中有 5 个相应的文本字段（名为 tf1、tf2、tf3、...）。当一个或多个复选框被选中时，我想计算所有选中的复选框并将总和放入单击按钮时对应的文本字段中。

示例：如果选中 cb1 和 cb3，则 tf1 和 tf3 的值为 2。

到目前为止，我正在计算总选中复选框，如下所示：

```
$(':button').click(function() {
    total= $('.check:checked');
    count=total.length;
}); 
```

但我不知道如何在相应的文本字段中获取“计数”。任何帮助表示赞赏！

PS 我在不同的类中有不同的复选框和文本字段，因此它们被类引用很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:13:10.893

也许有点像这样：

```
$(':button').click(function() {
    var total= $('.check:checked'),
        count=total.length;

    $('.text').val(function() {
       return $('#' + this.id.replace(/tf/,'cb')).is(':checked') ? count : 0;
    });
}); 
```

每个具有类的元素`text`都将被更新为具有`count`或者`0`取决于其对应的复选框是否被选中的值。显然，如果您愿意，可以通过替换`0`为`''`（空字符串）来空白与未选中复选框对应的字段。

（有关将函数传递给[`.val()`方法](http://api.jquery.com/val/)的更多信息，请阅读[文档](http://api.jquery.com/val/)。）

请注意，您应该始终使用`var`或创建全局变量来声明变量。

工作演示：http: [//jsfiddle.net/aBSNy/](http://jsfiddle.net/aBSNy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T02:13:46.180

你可以这样做：

HTML：

```
<div>
    <input type="checkbox" name="check1" value="" />
    <input type="text" name="text1" value="" data-count-for="check1" />
</div>
...(other checkboxes)...
<div>
    <input id="trigger" name="trigger" type="button" value="Click me" />
</div>​ 
```

JavaScript（使用 jQuery 1.7+）：

```
jQuery("#trigger").on('click', function(event){
    event.preventDefault();
    // select checkboxes:
    var checkboxes = jQuery(':checkbox:checked');
    checkboxes.each(function(){
        // find text input assigned to each checked checkbox:
        var selector = '[data-count-for="' + jQuery(this).attr('name') + '"]';
        // assign it a total number of previously found checkboxes
        jQuery(selector).val(checkboxes.length);
    });
});​ 
```

在此处查看证明：http: [//jsfiddle.net/EMhuw/1/](http://jsfiddle.net/EMhuw/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T02:09:46.523

确保 textarea 和相应的复选框具有匹配的 id 和 name，因此您可以轻松地将它们绑定在一起，然后循环检查复选框的集合并将`name`复选框中的属性用作`id`textarea，如下所示：

**JavaScript：**

```
// your already-computed total
count = total.length;

// loop through the collection of checked checkboxes
$('.check:checked').each( function() {

    // assign the total to each textarea where the id matches a checkbox name attr
    $('#'+$(this).attr("name")).val(total);

}); 
```

**HTML：**

```
<input class="check" type="checkbox" name="check1" />
<input class="check" type="checkbox" name="check2" />
<input class="check" type="checkbox" name="check3" />
<input class="check" type="checkbox" name="check4" />
<input class="check" type="checkbox" name="check5" />

<textarea id="check1"></textarea>
<textarea id="check2"></textarea>
<textarea id="check3"></textarea>
<textarea id="check4"></textarea>
<textarea id="check5"></textarea> 
```

使用匹配的枚举 ids/names，您还会发现使用循环构造在服务器端生成更多复选框和文本区域更容易；因此，这可以扩展到不仅仅是 5 个元素。

# ios - IOS中有哪些不同的存储可用/设置>可用？

> ID：10694900
> 
> 赞同：2
> 
> 时间：2012-05-22T02:03:25.527
> 
> 标签：ios, storage

我使用了下面的方法，所以我得到了可用的存储空间.. 大约 198MB。

但是，当我检查手机时，我看到了不同的值，设置 > 常规 > 关于 > 可用 0 字节。

为什么会有不同？

{ ...

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

if (dictionary) {  
    NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
    NSNumber *freeFileSystemSizeInBytes = [dictionary objectForKey:NSFileSystemFreeSize];
    totalSpace = [fileSystemSizeInBytes floatValue];
    totalFreeSpace = [freeFileSystemSizeInBytes floatValue];
    NSLog(@"Memory Capacity of %f MiB with %f MiB Free memory available.", ((totalSpace/1024.0f)/1024.0f), ((totalFreeSpace/1024.0f)/1024.0f));
    } 
```

...

}

嗯..我用谷歌搜索了.. 2天..但我不知道确切..这就是为什么..（Iphone 200MB / iPod 160MB ..有不同的存储空间）

# android - ImageView 不显示默认的本地化图像，只是本地化

> ID：10694901
> 
> 赞同：0
> 
> 时间：2012-05-22T02:03:27.933
> 
> 标签：android, layout, android-imageview, android-2.2-froyo

我有一个本地化到 -pl 的图像。

所以，自然我有一个 drawable/aboutimage.png 和一个 drawable-pl/aboutimage.png

这非常有效，直到我将视图切换到一个活泼的片段视图寻呼机而不是列表视图。有趣的是它只拒绝在 android 2.2 上显示。2.3 甚至 4.0 都显示得很好。

我的 xml 在此过程中没有改变：

```
<ImageView
    android:id="@+id/routine_about_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="10dp"
    android:src="@drawable/aboutimage" /> 
```

我只是通过 Fragment 的 onCreateView 中的 LayoutInflater.inflate() 加载布局：

```
View v = null;
LayoutInflater vi = inflater;
v = vi.inflate(R.layout.routine_exercise_about_item, null); 
```

有什么想法吗？

# .net - 通过行键集合查询天蓝色表

> ID：10694904
> 
> 赞同：4
> 
> 时间：2012-05-22T02:04:32.147
> 
> 标签：.net, azure, azure-storage, azure-table-storage

我需要通过行键的集合（在一个分区中）来查找多个实体。什么是正确的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T04:08:01.667

这取决于您要优化的内容。事实证明，指定多个行键，即使它们都在同一个分区中，也会导致分区扫描。查询优化器不足以处理 OR 查询。分区扫描可能需要数十到数百毫秒，具体取决于分区的大小。它总是比点查询慢。

如果您想优化速度，您应该分别执行每个查询。不要使用任务并行库，使用开始/结束函数，它们可以更好地扩展。

如果延迟不是问题，请执行 OR 查询。它会更慢，但它会算作一次交易，所以它会更便宜。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T03:27:06.987

仅通过行键查询的问题（我正在解释要暗示的原始问题）：您最终将进行表扫描，因为该行键可能存在于任何分区中。而且，如果您单独执行这些查询，您最终会为每个查询进行表扫描（即使使用任务并行库，正如@GlennFerrieLive 在对原始问题的评论中所建议的那样）。

您可以使用`$filter`（如[本文所述](http://msdn.microsoft.com/en-us/library/windowsazure/dd894031)）或离散的行键列表（过滤器中限制为 15 个单独的比较）指定行键的范围。这应该只以一次表扫描结束，但仍然......表扫描。

如果可以在查询中指定分区键，您应该这样做，因为它会使您的查询返回得更快。好的，*更快*是相对的，因为我不知道您存储的数据量。

**编辑**：每次通过评论更新，因为您知道分区键，您可以按照上面的指导在单个过滤器中指定行键范围或离散行键。或者...如果您有更多的行键，您可以考虑通过 TPL 执行这些操作（考虑到没有表扫描，这现在很有意义），或者作为每个过滤器的单个行键，或者分组到范围或过滤列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T12:02:36.573

您可以在运行时创建过滤器字符串，并在异步情况下运行 ExecuteQuery 或 ExecuteQuerySegmentedAsync。例如在 C# 中：

```
string queryFilter = $"(PartitionKey eq '{<PK name>}') and" +
                $"({string.Join(" or", <YOUR LIST>.Select(tl => $"(RowKey eq '{<the property>}')"))})";

var query = new TableQuery<ExternalTranslationEntity>().Where(queryFilter).Take(<e.g yourList>.Count).
                Select(new List<string> { nameof(<if you want specific columns>) });

            TableContinuationToken? token = null;
            do
            {
                var segment = await _translationsTable.ExecuteQuerySegmentedAsync(query, token);

                if (segment.Results.Any())
                {
                    segment.Results.ForEach(r =>
                    {
                        //do whaterver you want
                    });
                }
                token = segment.ContinuationToken;
            } while (token != null); 
```

# php - 为什么上传的图片无法正常显示？

> ID：10694907
> 
> 赞同：0
> 
> 时间：2012-05-22T02:05:12.270
> 
> 标签：php, objective-c, ios

我上传了一个图片文件到php服务器，文件在服务器端可以接收但是不能在Preview中显示，服务器日志也获取不到图片文件类型，app代码片段如下：

```
@interface ImageUploader : NSObject <NSURLConnectionDataDelegate>
{
......
}

- (id)initWithURL:(NSURL*)theServerURL image:(UIImage*)theImage delegate:(id<ImageUploaderDelegate>)theDelegate;
- (void)startUpload;

@end

@implementation ImageUploader
......

- (void)startUpload
{
    NSURLRequest *request = [self postRequestWithURL:serverURL boundry:BOUNDRY image:image];
    connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
}

#pragma mark - Private Methods
- (NSURLRequest*)postRequestWithURL:(NSURL*)url boundry:(NSString*)theBoundry image:(UIImage*)theImage
{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:30];
    [request setHTTPShouldHandleCookies:NO];
    [request setHTTPMethod:@"POST"];
    [request setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", theBoundry] forHTTPHeaderField:@"Content-Type"];
    NSMutableData *postData = [NSMutableData data];
    NSData *imageData = UIImagePNGRepresentation(theImage);
    if (imageData) {
        [postData appendData:[[NSString stringWithFormat:@"--%@\r\n", theBoundry]dataUsingEncoding:NSUTF8StringEncoding]];
        [postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"imageFileFromIPhoneApp.png\"\r\n\r\n", FORM_FLE_INPUT]dataUsingEncoding:NSUTF8StringEncoding]];
        [postData appendData:[[NSString stringWithString:@"Content-Type: image/png\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [postData appendData:imageData];
    }
    [postData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", theBoundry]dataUsingEncoding:NSUTF8StringEncoding]];
    [request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"]; 
    [request setHTTPBody:postData];
    return request;
}

@implementation WonderfulMomentViewController
......
#pragma mark - UIImagePickerControllerDelegate

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    [picker dismissModalViewControllerAnimated:YES];
    // do something with selectedImage and originalImage
    NSString *queryURL = [NSString stringWithFormat:@"%@/modules/party.php?action=uploadWonderfulImage", HOST_DOMAIN];
    ImageUploader *imageUploader = [[ImageUploader alloc]initWithURL:[NSURL URLWithString:queryURL] image:selectedImage delegate:self];
    [imageUploader startUpload];
}
......
@end

===============================================
the php code below:

public function uploadWonderfulImage(){
    foreach($_FILES as $key => $value){
        error_log("$key=>$value");
        foreach($_FILES[$key] as $subkey => $subvalue){
            error_log("$subkey=>$subvalue");
        }
    }
    move_uploaded_file($_FILES["uploadFile"]["tmp_name"], $_FILES["uploadFile"]["name"]);
}

===============================================
the php log below:(note:the value of type is null)

[Tue May 22 09:34:43 2012] [error] [client 192.168.55.31] uploadFile=>Array
[Tue May 22 09:34:43 2012] [error] [client 192.168.55.31] name=>imageFileFromIPhoneApp.png
[Tue May 22 09:34:43 2012] [error] [client 192.168.55.31] type=>
[Tue May 22 09:34:43 2012] [error] [client 192.168.55.31] tmp_name=>/private/var/tmp/phpnbb3cf
[Tue May 22 09:34:43 2012] [error] [client 192.168.55.31] error=>0
[Tue May 22 09:34:43 2012] [error] [client 192.168.55.31] size=>868591 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:13:11.013

要使用 POST 上传图像，您必须将内容类型设置为 application/octet-stream。这是我正在使用的代码：

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"file\"; filename=\"attachment.png\"r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:data]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

编辑：这是我正在使用的 PHP 代码：

```
if (isset($_FILES["uploadedfile"]))
{
    echo $target_path = $target_path.basename($_FILES['uploadedfile']['name']); 
    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
        echo "1: The file ".basename( $_FILES['uploadedfile']['name'])." has been uploaded";
    } else{
        echo "2: There was an error uploading the file, please try again!";
    }
} 
```

# c# - 在 WPF DataGrid 中显示自定义宽度工具提示

> ID：10694908
> 
> 赞同：1
> 
> 时间：2012-05-22T02:05:16.730
> 
> 标签：c#, wpf, datagrid

我在 WPF DataGrid 中显示工具提示，但我想自定义它的宽度，使其不大于包含数据的单元格的大小。我尝试将路径设置为“宽度”和“实际宽度”，但它都忽略了它们。我究竟做错了什么？

```
<DataGridTextColumn Binding="{Binding Description}" Header="Message" Width="*">
<DataGridTextColumn.ElementStyle>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="TextTrimming" Value="CharacterEllipsis" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="ToolTipService.ShowDuration" Value="60000" />
                <Setter Property="ToolTip">
                    <Setter.Value>
                        <TextBlock TextWrapping="Wrap"
                            Width="{Binding RelativeSource={RelativeSource AncestorType=DataGridCell}, Path=ActualWidth}"
                            Text="{Binding Description}" />
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
</DataGridTextColumn.ElementStyle>
</DataGridTextColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:50:13.153

我发现这有助于解释为什么它不起作用，

[如何将绑定错误转换为运行时异常？](https://stackoverflow.com/questions/4225867/how-can-i-turn-binding-errors-into-runtime-exceptions)

所以你添加这个，

```
public class BindingErrorListener : TraceListener
{
    private Action<string> logAction;
    public static void Listen(Action<string> logAction)
    {
        PresentationTraceSources.DataBindingSource.Listeners
            .Add(new BindingErrorListener() { logAction = logAction });
    }
    public override void Write(string message) { }
    public override void WriteLine(string message)
    {
        logAction(message);
    }
} 
```

并将其添加到您的代码后面，

```
BindingErrorListener.Listen(m => MessageBox.Show(m));
InitializeComponent(); 
```

所以基本上结果是你的代码中有一个绑定错误，

```
Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.DataGridCell', AncestorLevel='1''. BindingExpression:Path=ActualWidth; DataItem=null; target element is 'TextBlock' (Name=''); target property is 'Width' (type 'Double') 
```

绑定错误发生在您将鼠标悬停在 DataGridTextColumn 上之前，所以我想知道是否在将 TextBox 添加到可视化树之前创建了绑定，因此它没有祖先等。

到目前为止，这告诉您为什么存在问题，但我找不到解决方案。

# jdbc - 由于设置了类路径，java 程序没有运行

> ID：10694918
> 
> 赞同：1
> 
> 时间：2012-05-22T02:06:55.700
> 
> 标签：jdbc, java

我想练习用java开发数据库程序，所以我`E:\software\installed\java\jre\lib`通过声明一个新的环境变量来设置类路径`classpath`并给出值，`E:\software\installed\java\jre\lib`但现在我无法运行任何程序（甚至不是非数据库）我得到一个错误

```
Error: Could not find or load main class MysqlConnect 
```

但是当我删除`classpath`变量时，我能够运行非数据库程序。什么是可能的问题，请让我知道解决方案。我已经设置了路径`E:\software\installed\java\bin`

没有任何帮助我尝试在 java 中使用类路径开关，这没有帮助（`java -cp C:\Program Files\MySQL\MySQL Server 5.5 MysqlConnect`）也没有设置路径有帮助（`set CLASSPATH=%CLASSPATH%:C:\Program Files\MySQL\MySQL Server 5.5:C:\Program Files\MySQL\MySQL Server 5.5\mysql-connector-java-5.1.20-bin.jar`）都给出了错误

`Error: Could not find or load main class MysqlConnect`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:15:48.963

您不应该`classpath`使用系统变量为您的程序定义 a 。标准方法是使用命令行`-cp`或`-classpath`选项。看看`java`如果你不带参数运行它会打印什么。

您会发现[**本教程中提到了这一点**](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)。它说：

`The preferred way to specify the class path is by using the -cp command line switch. This allows the CLASSPATH to be set individually for each application without affecting other applications. Setting the CLASSPATH can be tricky and should be performed with care`

另外，看看默认的`CLASSPATH`environmetn 变量是如何包含`.`在其中的。如果您仍然决定在其中添加您的课程，请`.`为其他公民保留 并在 a 之后添加您的课程`;`，不要只是覆盖整个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:18:30.083

这是针对初学者的[jdbc 教程](http://www.raima.com/jdbc-tutorial/)，可以帮助您找到答案。如果您跳到**第 14 步**，它会给出一个如何使用类路径的示例。正如第一响应者所说，通过命令行使用它。

希望这会对您的特定情况有所帮助。本教程不是特定于数据库的，因此它适用于您正在使用的任何类型的数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:07:55.013

好的 atlast 我得到了应该输入的解决方案

`C:\Users\sarad mohanan\Desktop\rose>java -cp .;"c:\Program Files\MySQL\MySQL Server 5.5\mysql-connector-java-5.1.20-bin.jar" MysqlConnect MySQL Connect Example. Connected to the database Disconnected from database`

我们必须`.;`在原始路径`.`包含默认类路径之前添加。pravel veller 之前说过，但我当时不明白

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T02:38:54.343

我想建议使用像 Eclipse 这样的好工具。您可以通过添加或删除 jar 文件和库来间接测试 CLASSPATH 和您的环境。

显然，默认 CLASSPATH 中的库与 E 驱动器中的库不同。您可以通过了解您的 CLASSPATH 来比较这些文件。在 Windows 中，执行“回显 %CLASSPATH%”。

Eclipse 可以通过实验来帮助您，而无需重新启动或任何烦人的步骤。而这东西并不容易。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-22T02:16:15.400

Crete o 设置环境变量，如果您使用 windows `JAVA_HOME=E:\software\installed\java`，并且在附加 Java bin 目录之后`%JAVA_HOME%\bin`。请注意，路径之间用分号分隔`(;)`，希望对您有所帮助。这对我有用！！！！我不明白。发生什么事？。

# php - 如何获得小时分钟和秒？

> ID：10694922
> 
> 赞同：0
> 
> 时间：2012-05-22T02:07:04.937
> 
> 标签：php

未来时间是：`2012-05-26 00:00:00`

假设有三个变量：`$hour $minute $second`

现在，我想用未来的时间减去现在的时间。然后给左边的小时`$hour`，给左边的分钟`$minute`，给左边的秒`$second`。

对不起，我是 php 的新手，现在我被卡住了如何进行数学运算？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:13:09.493

一个非常好的日期和时间资源..

[http://www.php.net/manual/en/function.time.php](http://www.php.net/manual/en/function.time.php)

- 这里有一些样本做类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:22:07.550

检查[date_diff](http://www.php.net/manual/en/datetime.diff.php)函数。您在那里提出的问题有确切的解决方案。

这是记录如何格式化输出[的页面 (DateInterval::format) 。](http://www.php.net/manual/en/dateinterval.format.php)

```
$now = date_create();
// use "now" and necessary DateTimeZone in the arguments
$otherDate = date_create('2020-04-13');
$interval = date_diff($now, $futureDate);
echo $interval->format('%a days'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T02:17:40.070

以下是时分秒差的数学运算

```
$future_datetime = '2012-05-26 00:00:00';
$future = strtotime($future_datetime); //future datetime in seconds
$now_datetime = date('Y-m-d H:i:s');
$now = date('U'); //now datetime in seconds

//The math for calculating the difference in hours, minutes and seconds
$difference = $future - $now;
$second = 1;
$minute = 60 * $second;
$hour = 60 * $minute;
$difference_hours = floor($difference/$hour);
$remainder = $difference - ($difference_hours * $hour);
$difference_minutes = floor($remainder/$minute);
$remainder = $remainder - ($difference_minutes * $minute);
$difference_seconds = $remainder;
echo "The difference between $future_datetime and $now_datetime is $difference_hours hours, $difference_minutes minutes and $difference_seconds seconds"; 
```

# android - 如何在android中一次同时从复选框和微调器中获取价值

> ID：10694925
> 
> 赞同：0
> 
> 时间：2012-05-22T02:07:58.430
> 
> 标签：android, checkbox, bind, android-spinner

我有这样的复选框和微调器：![在此处输入图像描述](../Images/91bd6250a5e460dcdfdda4dba00c3f15.png)

在上面的图片中：第一个微调器`asiaSpinner`有不同的国家和其他国家`europeSpnner`和`africaSpinner`.

如果我检查`Asia`并从微调器中选择`japan`并检查`Europe`并`Germany`从微调器中选择。然后点击`set Details`按钮。设置日本和德国的详细信息以及各自的信息。

我想设置以下字段并保存在数据库中，我检查了什么。如果我只检查一个然后一个，如果我检查所有然后保存所有。

![在此处输入图像描述](../Images/073a195464685f1f0fda40aae6b3e79d.png)

我的主要意图是如何绑定复选框和微调器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:58:28.787

每个微调器都应该有一个 OnItemSelectedListener，如下所示：

```
Spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onNothingSelected(AdapterView<?> parent) {
    }
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        //  Get/set your info from the spinner here (depends on how you are populating the spinner
    }
}); 
```

然后只需检查每个复选框的状态：

```
final CheckBox asiaCk = (CheckBox) findViewById(R.id.asia_cb);
if (asiaCk.isChecked()) {
    // Set whatever data you need appropriately
} 
```

# sencha-touch - 我需要帮助煎茶计算器实时工作

> ID：10694926
> 
> 赞同：1
> 
> 时间：2012-05-22T02:08:10.923
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试构建一个实时绑定数据的计算器，而无需用户按下计算按钮。到目前为止，我可以让我的应用程序正常工作，但用户必须点击计算按钮才能执行我不想要的计算。我现在的问题是如何让我的计算器实时工作，这意味着一旦第一个、第二个和第三个文本字段被填满，第四个文本字段将自动生成答案而无需按下计算按钮。1 + 1 + 1 = (3) 一旦前 3 个文本字段被填充，3 将实时自动生成。到目前为止，以下是我的代码：

```
Ext.define("ikhlas.view.login", {
extend: 'Ext.Panel',
xtype: 'loginpanel',

    config:{
        title: 'Login',
        iconCls: 'more',
        styleHtmlContent: true,

    layout:{
        type: 'vbox',

        },

    items: [
        {
       xtype: 'container',
       iconCls: 'add',

    items: [

        {
            xtype: 'textfield',
            name: 'email',
            id: 'txtField1',
            placeHolder: 'Sum 1'
        },
        {
            xtype:  'spacer',
            height:   10,
        },
        {
            xtype: 'textfield',
            name: 'password',
            id: 'txtField2',
            placeHolder: 'Sum 2'
        },
        {
            xtype:  'spacer',
            height:   10,
        },
        {
            xtype: 'textfield',
            name: 'password',
            id: 'txtField3',
            placeHolder: 'Sum 3'
        },
        {
            xtype:  'spacer',
            height:   10,
        },
        {
            xtype: 'textfield',
            id: 'txtField4',
            name: 'password',
            placeHolder: 'Sum 4'
        },

   ]},
        {
            xtype: 'button',
            text: 'Calculate',
            ui: 'confirm',
            width: '30%',
            height: '6%',
            flex: 1,
            left: '55%',
            top: '65%',
            action: 'submitBtn'
        },

    ]}
}); 
```

我的控制器看起来像这样：

```
Ext.define('ikhlas.controller.SubmitController',{
extend: 'Ext.app.Controller',

config:{

refs:{
   submitBtn: '#submitBtn',
   txtField1: '#txtField1',
   txtField2: '#txtField2',
   txtField3: '#txtField3',
   txtField4: '#txtField4'
},

    control:{
        'button[action=submitBtn]':{
            tap :'submitbutton'
        }
    }
},

submitbutton:function(){

    var value1 = Ext.getCmp('txtField1').getValue();
    var value2 = Ext.getCmp('txtField2').getValue();
    var value3 = Ext.getCmp('txtField3').getValue();
    var value4;

    value4 = value1 * value2 * value3;
    Ext.getCmp('txtField4').setValue(value4);
} 
```

});

到目前为止，该应用程序在代码提供方面运行良好，但我需要一个实时计算，这是我的目标。希望有人能帮忙。我的商店和我的模型现在都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:50:30.027

我自己没有尝试过，但我认为你必须听`change`你的文本字段的事件，每当值发生变化时，你必须重新计算值。

因此，对于您的每个输入文本字段，将其添加到您的控制器中：

```
control: {
    'button[action=submitBtn]': {
        tap: 'submitbutton'
    },
    // this should call your submitbutton function which calculates the values
    // every time the value of textfield1 changes
    txtField1: {
        change: 'submitbutton', 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T06:40:24.540

# **一个简单的计算器**

Ext.define('Calc.view.Main', { extend:'Ext.form.Panel', fullscreen:true,

```
config: {

    items: [
             {

               layout:'vbox',
               style:'background-color:blue',
               flex:1,

               items:[
                    {
                       xtype:'textareafield',
                       name:'display',
                       style:'border:5px inset blue',
                       id:'display',
                       value:"0"

                   }
               ]
              },
              {
                layout:'hbox',
                style:'background-color:#cccccc',
                flex:1,
                items :[

                          {
                          xtype:'button',
                          text:'1',
                          style:'border:5px inset blue',
                          flex:1,
                          ui:'confirm',
                          handler: function() {

                               var num=Ext.getCmp('display').getValue();
                               if(num==0) {
                                Ext.getCmp('display').setValue("1");
                               }
                               else
                               {
                               num=num+"1";
                               Ext.getCmp('display').setValue(num);
                             }
                               console.log(num);
                          }

                  },
                 {
                          xtype:'button',
                          text:'2',
                          flex:1,
                          style:'border:5px inset blue',
                          ui:'confirm',
                          handler: function() {
                               console.log("print 2");
                               var num=Ext.getCmp('display').getValue();
                               if(num==0) {
                                Ext.getCmp('display').setValue("2");
                               }
                               else
                               {
                               num=num+"2";
                               Ext.getCmp('display').setValue(num);
                             }
                               console.log(num);
                               /*Ext.getCmp('display').setValue("2");
                               var num=Ext.getCmp('display').getValue();
                               num=num*10+1;
                               Ext.getCmp('display').setValue(num);
                               console.log(num);*/
                          }

                  },
                     {
                          xtype:'button',
                          text:'3',
                          style:'border:5px inset blue',
                          flex:1,
                          ui:'confirm',
                          handler: function() {
                               console.log("print 3");
                                var num=Ext.getCmp('display').getValue();
                                if(num==0) {
                                Ext.getCmp('display').setValue("3");
                               }
                               else
                               {
                               num=num+"3";
                               Ext.getCmp('display').setValue(num);
                             }
                               console.log(num);
                          }

                  }
                 ]
                 },
                 {
                  layout:'hbox',
                  style:'background-color:#909090',
                  flex:1,
                  items:[      
                          {
                           xtype:'button',
                           text:'4',
                           style:'border:5px inset blue',
                           flex:1,
                           ui:'confirm',
                           handler: function() {
                               console.log("print 4");

                                var num=Ext.getCmp('display').getValue();
                                if(num==0) {
                                Ext.getCmp('display').setValue("4");
                               }
                               else
                               {
                               num=num+"4";
                               Ext.getCmp('display').setValue(num);
                               console.log(num);
                          }
                        }

                           },      
                         {
                           xtype:'button',
                           text:'5',
                           flex:1,
                           style:'border:5px inset blue',
                           ui:'confirm',
                           handler: function() {
                               console.log("print 5");
                                var num=Ext.getCmp('display').getValue();
                                if(num==0) {
                                Ext.getCmp('display').setValue("5");
                               }
                               else
                               {
                               num=num+"5";
                               Ext.getCmp('display').setValue(num);
                             }
                               console.log(num);
                          }

                         },      
                          {
                           xtype:'button',
                           text:'6',
                           flex:1,
                           style:'border:5px inset blue',
                           ui:'confirm',
                           handler: function() {
                               console.log("print 6");
                               var num=Ext.getCmp('display').getValue();
                               if(num==0) {
                                Ext.getCmp('display').setValue("6");
                               }
                               else
                               {
                               num=num+"6";
                               Ext.getCmp('display').setValue(num);
                             }
                               console.log(num);
                          }

                          }       
                        ]
                      },
                      {
                         layout:'hbox',
                         style:'background-color:#A0A0A0',
                         flex:1,
                         items:[
                                 {
                                   xtype:'button',
                                   text:'7',
                                   style:'border:5px inset blue',
                                   flex:1,
                                   ui:'confirm',
                                   handler: function() {
                               console.log("print 7");
                                var num=Ext.getCmp('display').getValue();
                                if(num==0) {
                                Ext.getCmp('display').setValue("7");
                               }
                               else
                               {
                               num=num+"7";
                               Ext.getCmp('display').setValue(num);
                             }
                               console.log(num);
                          }

                                   },
                                  {
                                    xtype:'button',
                                    text:'8',
                                    style:'border:5px inset blue',
                                    flex:1,
                                    ui:'confirm',
                                    handler: function() {
                               console.log("print 8");
                                var num=Ext.getCmp('display').getValue();
                                if(num==0) {
                                Ext.getCmp('display').setValue("8");
                               }
                               else
                               {
                               num=num+"8";
                               Ext.getCmp('display').setValue(num);
                               console.log(num);
                             }
                          }

                                   },
                                    {
                                     xtype:'button',
                                     text:'9',
                                     style:'border:5px inset blue',
                                      flex:1,
                                      ui:'confirm',
                                      handler: function() {
                               console.log("print 9");
                                var num=Ext.getCmp('display').getValue();
                                if(num==0) {
                                Ext.getCmp('display').setValue("9");
                               }
                               else
                               {
                               num=num+"9";
                               Ext.getCmp('display').setValue(num);
                               }
                               console.log(num);
                             }
                            }

                                 ]
                              },        
                              {
                                layout:'hbox',
                                style:'background-color:#808080',
                                flex:1,
                                items: [ 
                                         {
                                           xtype:'button',
                                           text:'+',
                                           style:'border:5px inset blue',
                                           flex:1,
                                           ui:'confirm',
                                           handler: function() {
                                             var num = new Array();
                                             num=Ext.getCmp('display').getValue();

                                                  var len=num.length;
                                                  console.log(len);
                                                  var sub=num.substr(len-1,len);

                                                  console.log(sub);

                                                  if(sub!= "+" && sub!="-" && sub!="*" &&sub!="/")
                                                  { 
                                                    num=num+"+";
                                                   Ext.getCmp('display').setValue(num);
                                                  }

                                                console.log("print +");
                                           }
                          },

                                        {
                                         xtype:'button',
                                         text:'0',
                                         flex:1,
                                         style:'border:5px inset blue',
                                         ui:'confirm',
                                         handler: function() {
                               console.log("print 0");
                                var num=Ext.getCmp('display').getValue();
                                if(num==0) {
                                  num=num+"0";
                                Ext.getCmp('display').setValue(num);
                               }
                               else
                               {
                               num=num+"0";
                               Ext.getCmp('display').setValue(num);
                               console.log(num);
                             }
                          }

                                       },
                                        {
                                          xtype:'button',
                                          text:'=',
                                          flex:1,
                                          style:'border:5px inset blue',
                                          ui:'confirm',
                                          handler: function() {
                               console.log("print =");
                               var exp=new Array();
                               exp=Ext.getCmp('display').getValue();

                              var len=exp.length;

                              var sub=exp.substr(len-1,len); 
                              console.log(sub);

                                if(sub!= "+" && sub!="-" && sub!="*" && sub!="/") 
                               {

                                 console.log(eval(exp));
                                 Ext.getCmp('display').setValue(eval(exp));
                                }

                                         }
                                        }  
                                        ]
                                       },      
                                          {
                                            layout:'hbox',
                                            style:'background-color:#2FAA96',
                                            flex:1,
                                            items: [
                                            {
                                             xtype:'button',
                                             text:'-',
                                              flex:1,
                                              style:'border:5px inset blue',
                                             ui:'confirm',
                                             handler: function() {
                                             console.log("print -");
                                             var num = new Array()
                                             num=Ext.getCmp('display').getValue();

                                             var len=num.length;
                                             var sub=num.substr(len-1,len);
                                             if(sub!= "+" && sub!="-" && sub!="*" &&sub!="/")
                                             {
                                                  num=num+"-";
                                                   Ext.getCmp('display').setValue(num);
                                                console.log("print -");
                                             }
                                           }

                                             },   
                                             {
                                             xtype:'button',
                                              text:'*',
                                              style:'border:5px inset blue',
                                             flex:1,
                                             ui:'confirm',
                                             handler: function() {
                                              console.log("print *");
                                              var num = new Array()
                                               num=Ext.getCmp('display').getValue();
                                             var len=num.length;
                                             var sub=num.substr(len-1,len);
                                              if(sub!= "+" && sub!="-" && sub!="*" &&sub!="/")
                                                {
                                                  num=num+"*";
                                                   Ext.getCmp('display').setValue(num);
                                                console.log("print *");
                                           }
                                         }

                                              },
                                              {
                                                xtype:'button',
                                                text:'/',
                                                style:'border:5px inset blue',
                                                 flex:1,
                                               ui:'confirm',
                                               handler: function() {
                                               console.log("print /");
                                             var num = new Array()
                                             num=Ext.getCmp('display').getValue();
                                             var len=num.length;
                                             var sub=num.substr(len-1,len);
                                             if(sub!= "+" && sub!="-" && sub!="*" &&sub!="/")
                                                {
                                                  num=num+"/";
                                                   Ext.getCmp('display').setValue(num);
                                                console.log("print /");
                                                }
                                               }

                                               },
                                               ]
                                             },
                                             {
                                              layout:'hbox',
                                              flex:8,
                                              style:'background-color:red',
                                              items: [
                                              {
                                                xtype:'button',
                                                text:'clear',
                                                style:'border:5px inset blue',
                                                flex:1,
                                                ui:'small',
                                                handler: function() {
                                                  var cl=Ext.getCmp('display').getValue();
                                                  cl="";
                                                  Ext.getCmp('display').setValue(cl);
                                                }
                                              },
                                              {
                                                xtype:'button',
                                                text:'cancel',

                                                flex:2,
                                                ui:'back',
                                                handler:function() {
                                                  var no= new Array();
                                                  no=Ext.getCmp('display').getValue();
                                                  var len=no.length;
                                                  var sub=no.slice(0,len-1)

                                                  console.log(sub);
                                                  Ext.getCmp('display').setValue(sub);

                                                }

                                              }
                                              ]
                                             }

                                            ]
                                            } 
```

});

# javascript - 什么是开始使用交互式 Javascript 幻灯片/图像查看器的简单方法？

> ID：10694928
> 
> 赞同：0
> 
> 时间：2012-05-22T02:08:40.830
> 
> 标签：javascript, image

我对 Javascript 非常陌生。我想做的是其中一排较小的图像，当您单击其中一个时，它会弹出较大的左右箭头，以便在照片中滑动。

开始做这样的事情最简单的方法是什么？

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:21:04.803

查看[Web Resource Depot 上的画廊插件](http://www.webresourcesdepot.com/category/goodies/gallery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:23:10.387

您知道我们不是您的研究网站，但由于您要求**最简单**的方法，我建议您使用[HighSlide JS](http://highslide.com)。它不需要 JQuery，高度个性化，附带示例，您可以直接复制粘贴和一个不错的教程。

当然，如果您将[JQuery](http://jquery.com/)库包含到您的页面中，您也可以尝试[这些更高级的插件](http://www.webdesignerdepot.com/2011/08/25-jquery-image-galleries-and-slideshow-plugins/)之一。正如@Nupul 所指出的，还有一些 JQuery[轮播插件。](http://www.tripwiremagazine.com/2012/01/jquery-carousel.html)

# c# - 检查手是否被跟踪

> ID：10694932
> 
> 赞同：-4
> 
> 时间：2012-05-22T02:09:30.597
> 
> 标签：c#, kinect, openni

如果我握拳或张开手，我想跟踪我的人。
如果您可以在 C# 中提供示例代码，将不胜感激？
非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:47:05.790

这个演示有一个简单的闭合和张开手分类器： [Kinect hand tracking](http://kinecthandtracking.codeplex.com/)

然而，这在使用 Kinect 的许多场景中是一项艰巨的任务。

# jquery - 如何使用 JQuery 将页面动态加载到 JSF 中的 DIV

> ID：10694940
> 
> 赞同：0
> 
> 时间：2012-05-22T02:10:59.690
> 
> 标签：jquery, asp.net-mvc-3, jsf, dynamic, load

在 MVC3 中，我会做这样的事情......

```
$('#myButton').click(function(){
  var route = '/Controller/Method?id=5';
  $('#myDiv').load(route);
}); 
```

有谁知道如何在 JSF 中做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:23:35.653

使用[Ajax jQuery 方法并使用](http://api.jquery.com/jQuery.ajax/)[appendTo 方法](http://api.jquery.com/appendTo/)将结果放在 div 中， 如下所示：

```
result.appendTo($('#myDiv')); 
```

# javascript - 选择包含具有特定值的 div 的 div

> ID：10694942
> 
> 赞同：1
> 
> 时间：2012-05-22T02:11:38.643
> 
> 标签：javascript, jquery

我有几个外部 div，它们都包含 3 个内部 div `class1` `class2` `class3`。我想根据其内部 div 的 value 属性选择外部 div `class1`。例如，我想选择第一个 div，因为它的`class1`div 具有 value `x`。我如何用 jquery 做到这一点？

```
<div> <-----this is the div I want to select
  <div class="class1" value="x"></div>
  <div class="class2" value="y"></div>
  <div class="class3" value="z"></div>
</div>

<div> 
  <div class="class1" value="a"></div>
  <div class="class2" value="b"></div>
  <div class="class3" value="c"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:13:17.160

我的第一个想法是：

```
$('.class1[value="x"]').parent(); 
```

但我不确定语法（编辑：它有效）。然而，这也可以工作：

```
$('.class1').filter(function() {
    return $(this).attr("value") == "x";
}).parent(); 
```

但是请注意，这些只会返回第*一个*父级（在具有匹配“值”属性的多个子 div 的情况下）。如果你想对多个父匹配做某事，你可以遍历结果`$.each`并单独查看它们：

```
$('.class1[value="x"]').each(function() {
    var parent = $(this).parent();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:18:04.587

另一种方法是使用`:has`选择器

```
var elem = $('div:has(.class1[value="x"])'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T02:21:46.020

```
$('div').has('div[value=x]'); 
```

[演示](http://jsbin.com/ekucen/edit#javascript,html,live)

```
$('div:has([value=x])').closest('div'); 
```

[演示 2](http://jsbin.com/ekucen/2/edit#javascript,html,live)

```
$('div[value=x]').parents('div'); 
```

[演示 3](http://jsbin.com/ekucen/4/edit#javascript,html,live)

```
$('div>div[value=x]').parent('div'); 
```

[演示 4](http://jsbin.com/ekucen/5/edit)

```
$.fn.getChildVal = function(val){  
  $('[value='+val+']').parent().css({background:'red'});
};

$('div').getChildVal('x'); 
```

[插入 ：）](http://jsbin.com/ekucen/6/edit)

从文档：

[http://api.jquery.com/closest](http://api.jquery.com/closest)
[http://api.jquery.com/has](http://api.jquery.com/has)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T02:18:19.463

你可以这样做。

```
 $(document).ready(function () {
            $("div.class1 [value='x']").parent('div');
        }); 
```

# c++ - 基于编译时间值的 c++ 模板特化

> ID：10694943
> 
> 赞同：13
> 
> 时间：2012-05-22T02:11:52.390
> 
> 标签：c++, templates, metaprogramming, compile-time-constant

我正在慢慢进入模板元编程，但我不确定如何实现以下内容：

```
// hpp file
enum MyEnum { Alive = 0, Dead };
class A {
    public:
        template<typename T, typename O, MyEnum ls>
        static int Register();
};

// elsewhere in the code...
A::Register<IType1, Type1, Dead>(); 
```

在编译时，我会知道第三个模板类型是什么枚举值（编译时不变），要么死要么活。是否可以为 Register 函数定义两个主体，例如：

```
// desired hpp file
template<typename T, typename O, Alive>
int Register();

template<typename T, typename O, Dead>
int Register();

// corresponding desired .inc file
template<typename T, typename O, Alive>
int Register() { // Alive specific implementation ...  }

template<typename T, typename O, Dead>
int Register() { // Dead specific implementation ...  } 
```

我看过： [C++ Template Specialization with Constant Value](https://stackoverflow.com/questions/4840819/c-template-specialization-with-constant-value)

但我一直无法弄清楚如何使其适用于这种情况。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T02:32:04.130

模板函数不能部分特化。解决方案是将其包装在一个结构中：

```
template<typename T, typename O, MyEnum ls>
struct foo;

template<typename T, typename O>
struct foo <T, O, Alive> {
  static int Register() {
    // ...
  }
};

template<typename T, typename O>
struct foo <T, O, Dead> {
  static int Register() {
    // ...
  }
};

template<typename T, typename O, MyEnum ls>
int Register() {
  return foo<T, O, ls>::Register();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-09T09:55:10.430

在这里聚会很晚，但是。

我认为在概念上更简单且更易于阅读的一种方法是简单地将枚举的不同值设置为不同*类型*（在命名空间内，以保持干净），并利用（模板）函数重载：

```
namespace State {
  struct Dead {};
  struct Alive {};
}

template<typename T, typename O>
int Register(State::Dead) {
   return 1;
}

template<typename T, typename O>
int Register(State::Alive) {
   return 2;
} 
```

你这样称呼他们：

```
int main() {
   Register<int,int>(State::Dead());
   Register<int,int>(State::Alive());
   return 0;
} 
```

# jquery - 悬停和单击状态具有不同图像的锚点/图像

> ID：10694945
> 
> 赞同：0
> 
> 时间：2012-05-22T02:12:13.360
> 
> 标签：jquery, html, css

因为我以前没有这样做过，所以对如何做到这一点有点困惑，但我有 3 张图片：

默认状态为一张图片：1.png，悬停状态为第二张图片：2.png，点击链接/图片时的第三张图片：3.png

我将如何设置这 3 个图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:15:59.783

您可以通过 css 类来做到这一点。例如：

```
<div class="image"></div>

<style type="text/css">   
    .image {
      background: url(1.png) no-repeat top left;
    }
    .image:hover {
      background: url(2.png) no-repeat top left;
    }
    .image:active {
      background: url(3.png) no-repeat top left;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:16:18.120

您可以将它们设置为三个不同的图像并通过 css 控制它们，如下所述。

```
#my-image {
    background: url("/1.png");
}

#my-image:hover {
    background: url("/2.png");
}

#my-image:active {
    background: url("/3.png");
} 
```

**但是一个常用的技术是 css-sprites。**您将这 3 个图像组合成一个图像。假设每个图像图像是 100x100 像素，因此您制作的图像是 100x300 像素。然后你控制`background-position`. 这消除了用户缺乏响应能力的问题，并且在您的服务器上更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:54:36.840

以上两种解决方案将无法正常工作，因为对于 a:active 图像不会永久更改。您必须为此使用 jquery，每个人也都这样做：

```
 <html>
                 <head>
                  <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
                  <script type="text/javascript">
                      $(document).ready(function(){
                        $("#my_link").hover(function(){
                          $(this).removeClass("class_1").addClass("class_2");
                          },function(){
                          $(this).removeClass("class_2").addClass("class_1"); 
                       });

                   $("#my_link").click(function(){
                        $(this).removeClass("class_1").addClass("class_3");
                   });
              });

             </script> 
             <style type="text/css">
                .class_1{background: url("/1.png") no-repeat top left;}
                .class_2{background: url("/2.png") no-repeat top left;}
                .class_3{background: url("/3.png") no-repeat top left;}  
             </style>
         </head>
         <body>
              <a id="my_link" class="class_1" href="#" >Click here</a>
         </body>
       </html> 
```

这对我来说很好。我希望它会起作用！

# json - 如何在不登录的情况下从 Rallydev REST API 获取 JSON 数据

> ID：10694949
> 
> 赞同：1
> 
> 时间：2012-05-22T02:12:55.853
> 
> 标签：json, rally

我正在尝试做的是在没有登录的情况下从 Rallydev 获取 JSON 数据（无论它是什么，只要确保我可以得到任何东西都可以），以确保 Rallydev 处于打开状态。我尝试了几种方法，但每种方法都需要用户名和密码。有人会为此提供一个URI吗？谢谢你们。您给予的任何东西都会受到赞赏。

```
String url = "link";
Client client = Client.create();
WebResource webResource = client.resource(url);
String s = webResource.get(String.class);

try { 
    // check if RallyDev service is up
    if (s.contains("Hello it is now "))
        _log.information("RallyDev is working... at " + new Date());

} catch (Exception e) {
    _log.error(ErrorCodeEnum.INTERNAL_ERROR, "RallyDev service might be down!!! in " + new Date(), e);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:33:06.870

好的，所以无论是 Jersey 客户端还是针对 Rally 的普通旧 HTTP GET，我都会回到我原来的评论，即开发一个 Java 应用程序来做到这一点有点矫枉过正。您可以在 Linux 中使用单行 curl 命令完成相同的操作：

```
 curl -u 'rallyuser@company.com:rallypassword' https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement.js?pagesize=1 
```

对此的有效（Rally 已启动并做出响应）响应可能如下所示：

```
 {"QueryResult": {"_rallyAPIMajor": "1", "_rallyAPIMinor": "33", "Errors": [], "Warnings": [], "TotalResultCount": 84, "StartIndex": 1, "PageSize": 1, "Results": [{"_rallyAPIMajor": "1", "_rallyAPIMinor": "33", "_ref": "https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement/12345678910.js", "_refObjectName": "My Story Name", "_type": "HierarchicalRequirement"}]}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:35:13.850

看起来您正在使用 Jersey 客户端在 Java 中设置 REST 连接。您真的需要在不提供凭据的情况下执行此操作吗？您需要传递某种凭据，因为 Rally 中的任何可查询端点都需要 HTTP 基本身份验证。

如果您正在寻找适当的 REST 语法和端点来制定有效的查询，您可能希望查看我们关于 REST 查询的 Webservices API 文档：

[https://rally1.rallydev.com/slm/doc/webservice/rest.jsp](https://rally1.rallydev.com/slm/doc/webservice/rest.jsp)

例如，执行查询并返回 JSON 格式结果的有效 REST URL 如下所示。针对以下示例 URL 的 GET 查询用户拥有的用户故事：user@company.com：

[https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement.js?query=(Owner](https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement.js?query=(Owner) = "user@company.com")&pagesize=1

这将返回第一个匹配的用户故事。

在 Java 中访问 Rally REST 服务的简单示例如下：

[http://www.rallydev.com/help/basic-rest-client-operations-java](http://www.rallydev.com/help/basic-rest-client-operations-java)

Rally 的完整（alpha-release）Java REST API 工具包在这里：

[http://www.rallydev.com/developer/java-toolkit-rally-rest-api](http://www.rallydev.com/developer/java-toolkit-rally-rest-api)

以上所有内容对于仅确定 Rally 服务是否启动似乎有点过头了。[您可以在http://status.rallydev.com](http://status.rallydev.com)上通过 RSS 订阅 Rally 的状态更新，这是了解系统状态信息的好方法。

我希望这会有所帮助 - 如果答案偏离目标，请提供一些进一步澄清的评论，我们会尽力回答。

# windows-phone-7 - 使用 RestSharp 反序列化 XML

> ID：10694953
> 
> 赞同：0
> 
> 时间：2012-05-22T02:13:36.917
> 
> 标签：windows-phone-7, deserialization, restsharp

我正在为一个 WP7 项目尝试 RestSharp。使用 RestSharp 反序列化某些 XML 时遇到一些麻烦。对象为空。以下是一些相关的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<api_response xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <response_data>
        <employee_information>
          <employee>
            <employee_sf_name>David</employee_sf_name>
            <employee_first_name>Dave</employee_first_name>
            <employee_last_name>Jones</employee_last_name>
          </employee>
        </employee_information>
    </response_data>
</api_response> 
```

这是我的要求：

```
public static void executeRequest(Action<string> callback, string method)
    {
        var client = new RestClient();
        var request = new RestRequest(Method.POST);
        client.BaseUrl = App.url + method;
        request.AddParameter("secret_key", Application.secret_key);
        request.AddParameter("email", Application.email);
        request.AddParameter("password", Application.password);

        client.ExecuteAsync<Employee>(request, response =>
        {
            callback(response.Content); //prints the response as output
            Debug.WriteLine("firstname " + response.Data.employee_first_name);
        });
    } 
```

这是 Employee 对象：

```
public class Employee
{
    public Employee() { }
    public int employee_id { get; set; }
    public String employee_first_name { get; set; }
    public String employee_last_name { get;  set; }

} 
```

由于响应恢复正常，我尝试在单独的函数中对其进行反序列化，但没有成功：

```
public static void parse(string data)
    {
        Debug.WriteLine(data);
        XmlDeserializer xml = new XmlDeserializer();
        Employee employee = new Employee();
        employee = xml.Deserialize<Employee>(new RestResponse() { Content = data });

        Debug.WriteLine("last name " + employee.employee_last_name);
        Debug.WriteLine("firstname " + employee.employee_first_name);   

    } 
```

如果有人能对这个问题有所了解，请提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T12:33:48.043

首先，结束标签必须是结束标签。在我修复它之后，我设置了一个封闭类：

```
public class employee_information
{
    public Employee employee { get; set; }
} 
```

然后保留您原来的 Employee 类：

```
public class Employee
{
    public Employee() { }
    public int employee_id { get; set; }
    public String employee_first_name { get; set; }
    public String employee_last_name { get; set; }

} 
```

然后，反序列化它：

```
var empInfo = xml.Deserialize<employee_information>((new RestResponse() {Content = data})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:54:12.477

添加`request.RootElement = "employee";`应该适用于您现有的代码。如果您不想从树的底部开始，则需要创建与整个层次结构匹配的类。

# asp.net - Lambda函数在mvc3视图中对某些值进行颜色编码？

> ID：10694956
> 
> 赞同：0
> 
> 时间：2012-05-22T02:14:18.940
> 
> 标签：asp.net, asp.net-mvc-3, lambda

我在一个 razor mvc3 视图中有以下代码，该视图在几个网格和表格中复制为颜色代码值：

```
 @{var val= @@item.value * 100);}
        @if(@val < 85) { <div style='color: #C11B17' > @val.ToString("0.0")%</div> }         
        @if(@val >= 85 && osi <=95 ) { <div style='color: #AF7817' > @val.ToString("#.0")%</div> }         
        @if(@val > 95 && osi <=115) { <div style='color: green' > @val.ToString("#.0")%</div> }                  
        @if(@val > 115) { <div style='color: blue' > @val.ToString("#.0")%</div> } 
```

如何重写等效的 lambda 函数，以便在我的视图中重用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:34:00.590

您可以在非渲染块中编写此方法并根据需要调用它：

```
@{
  Func<Decimal, string> helperMethod = (Decimal val) => 
  {
      var template = "<div style='color: {0}' > {1}%</div>";
      var color = ""
      var format = "#.0";
      if(val < 85) { color = "#C11B17"; format = "0.0"; }         
      else if(val >= 85 && osi <=95 ) { color = "#AF7817"; }         
      else if(val > 95 && osi <=115) { color = "green"; }                  
      else if(val > 115) { color = "blue"; }
      else return "";
      return String.Format(template, color, val.ToString(format));
  };
} 
```

现在您可以在该模板中的任何位置调用该方法：

```
@Html.Raw(helperMethod(item.Value*100)) 
```

# asp.net - IIS 上的 500 个内部服务器

> ID：10694958
> 
> 赞同：0
> 
> 时间：2012-05-22T02:14:59.910
> 
> 标签：asp.net, iis, datatables

我在使用 IIS 7.0 的服务器上托管的 MVC 2.0 中对我的数据表使用服务器端处理。我有一个控制器用来处理传入的请求。当我在 localhost 上查看页面时，它工作正常，这是它发送的请求标头的示例

```
http://localhost:42417/EmissionByRegion/DataProviderAction?_=1337611318226&sEcho=1&iColumns=40&sColumns=&iDisplayStart=0&iDisplayLength=10&mDataProp_0=0&mDataProp_1=1&mDataProp_2=2&mDataProp_3=3&mDataProp_4=4&.......[it
 goes on till 39 columns] 
```

这会得到一个有效的 json 响应，并且一切正常。但是，当我在使用 IIS 的服务器上发布此代码时，会使用相同的请求参数回发到服务器。在这种情况下，我收到以下错误

```
500 - Internal server error.
The page cannot be displayed because an internal server error has occurred.
Module IsapiFilterModule
Notification AuthenticateRequest
Handler ExtensionlessUrlHandler-Integrated-4.0
Error Code 0x8007007a 
```

我该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T02:26:27.720

您应该做的第一件事是通过将以下内容添加到 web.config 的 system.webServer 部分来启用详细错误模式：

`<httpErrors errorMode="Detailed" />`

# html - html 表单跨越引导选项卡导致奇数间距

> ID：10694961
> 
> 赞同：1
> 
> 时间：2012-05-22T02:15:26.270
> 
> 标签：html, tabs, twitter-bootstrap

我有一个跨越可切换选项卡左引导布局的表单。我也在使用引导表单控件。本质上，我想要三个 textarea，可以通过选择关联的选项卡来单独查看它们，然后在提交时，我会使用所有三个 textarea 的内容来执行更新。

代码位于[http://jsfiddle.net/timburgess/rhNxF/8/](http://jsfiddle.net/timburgess/rhNxF/8/)

选项卡按预期运行。但是，当在选项卡内容中显示文本区域时，它与选项卡控件的间距相当大。查看html，我看不到任何会导致这种情况的东西。我总是可以做一个 CSS hack，但我想知道我是否在这里遗漏了什么？我尝试设置不同的 span2、span4 等类，但它们没有区别。

理想情况下，我希望在选项卡旁边有 textarea，在 textarea 右侧有警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:18:53.183

这是因为：

```
.form-horizontal .controls {
    margin-left: 160px;
} 
```

在`bootstrap.css`. 您需要在 CSS 中覆盖它。

# c# - 在 C# 中移动文件时遇到问题？

> ID：10694970
> 
> 赞同：2
> 
> 时间：2012-05-22T02:16:56.633
> 
> 标签：c#, file-io, visual-c#-express-2010

我正在制作一个软件，它将文件从下载文件夹移动到目录中的特定子文件夹。用户通过组合框选择子文件夹。我不断收到此错误：`System.IO.IOException: Cannot create a file when that file already exists.`此外，这些错误出现在安装我的程序的人的计算机上......异常和事情。我怎么关掉它。另外，为什么我会收到此错误？这是我的代码：

```
 string pathUser4 = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
        string pathDownload4 = (pathUser4 + @"\Downloads\");
        string sourceFile = pathDownload4 + listBox1.Text;

        string pathdoc5 = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        string pathDownload5 = (pathdoc5 + @"\iracing\setups\");
        string destinationFile = pathDownload5 + comboBox1.Text;

        File.Move(sourceFile, destinationFile);
        if (comboBox1.Text == "Select File Destination")
        {
            MessageBox.Show("Please Select A Destination Folder", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error); 
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T02:23:59.263

每个 File.Move 都应该包装在一个 try/catch 块中，因为您永远不能期望 IO 操作执行时不会出错。它可能很简单，例如用户打开了文件句柄，或者目标文件夹中存在的文件，无论哪种方式，您都不希望单个文件引发停止整个操作的异常。您将希望捕获异常并将它们记录到错误日志文件或事件日志中，这样您就可以看到发生的错误，但不会中断任何事情。

其次，对于任何桌面应用程序，我会添加全局错误处理来记录任何未捕获的错误。您可以通过将此代码放在程序的开头来做到这一点，

```
AppDomain.CurrentDomain.UnhandledException += (a, exception) => File.AppendAllText("errorlog.txt", exception.ToString() + "\n" 
```

这将使用户永远不会看到抛出丑陋的异常。还要确保您没有向用户提供 .pdb 文件，因为这将导致异常包含编译它的计算机的路径，其中可能包含您的用户名和您不希望客户端看到的其他敏感信息。

* * *

您可以在初始化主窗口时注册全局异常处理，您希望它是您在其他任何事情之前做的第一件事，因为您永远不知道何时会抛出异常，因此您必须进行防御性思考。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        AppDomain.CurrentDomain.UnhandledException += (a, exception) => File.AppendAllText("errorlog.txt", exception.ToString() + "\n");
        InitializeComponent();
    }
} 
```

C# 广泛使用异常，因此如果您不熟悉这种类型的错误处理，这将是一个很好的学习概念。所有异常都派生自 Exception 类，因此当您编写 catch (Exception e) 时，它将捕获所有异常（因为基引用可以包含派生类型的对象），但是如果您知道某个方法将抛出的特定异常，您可以捕获一个更具体的异常（总是在更一般的捕获之前）并以特定的方式处理它。在此示例中，您可能有一个来自 File.Move() 的 IOException，您希望以不同的方式捕获和处理。

```
try 
{
    string pathUser4 = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
    string pathDownload4 = (pathUser4 + @"\Downloads\");
    string sourceFile = pathDownload4 + listBox1.Text;

    string pathdoc5 = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    string pathDownload5 = (pathdoc5 + @"\iracing\setups\");
    string destinationFile = pathDownload5 + comboBox1.Text;

    File.Move(sourceFile, destinationFile);
    if (comboBox1.Text == "Select File Destination")
    {
        MessageBox.Show("Please Select A Destination Folder", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error); 
    }
}
catch (Exception e)
{
    File.AppendAllText("ErrorLog.txt", e.ToString() + "\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T02:44:19.533

该错误可能是由您的代码或某些无效输入引起的。

正如@Despertar 提到的，我建议所有程序都在您的代码中包含错误处理和日志功能。这对您的调试非常有帮助。
但我建议使用开源日志库，不要自己做。例如，log4net、NLog 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T02:37:20.087

[来自 MSDN 的 File.Move 示例代码](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)应该让您指出需要处理的各种事情，例如已经存在的文件和基本错误处理。

```
using System;
using System.IO;

class Test 
{
    public static void Main() 
    {
        string path = @"c:\temp\MyTest.txt";
        string path2 = @"c:\temp2\MyTest.txt";
        try 
        {
            if (!File.Exists(path)) 
            {
                // This statement ensures that the file is created,
                // but the handle is not kept.
                using (FileStream fs = File.Create(path)) {}
            }

            // Ensure that the target does not exist.
            if (File.Exists(path2)) 
            File.Delete(path2);

            // Move the file.
            File.Move(path, path2);
            Console.WriteLine("{0} was moved to {1}.", path, path2);

            // See if the original exists now.
            if (File.Exists(path)) 
            {
                Console.WriteLine("The original file still exists, which is unexpected.");
            } 
            else 
            {
                Console.WriteLine("The original file no longer exists, which is expected.");
            }           

        } 
        catch (Exception e) 
        {
            Console.WriteLine("The process failed: {0}", e.ToString());
        }
    }
} 
```

# python - PyQt 更新界面

> ID：10694971
> 
> 赞同：4
> 
> 时间：2012-05-22T02:17:00.930
> 
> 标签：python, pyqt

我正在尝试通过`QThread`PyQt 中的 a 更新 Qt GUI 对象中的文本，但我只是收到错误消息`QPixmap: It is not safe to use pixmaps outside the GUI thread`，然后它崩溃了。我真的很感激任何帮助，谢谢。

```
class MainWindow(QMainWindow, Ui_MainWindow):

    def __init__(self, parent = None):
        QMainWindow.__init__(self, parent)
        self.setupUi(self)
        self.output = Output()

    def __del__ (self):
        self.ui = None

    @pyqtSignature("")
    def on_goBtn_released(self):
        threadnum = 1
        #start threads
        for x in xrange(threadnum):
            thread = TheThread() 
            thread.start()

class Output(QWidget, Ui_Output):

    def __init__(self, parent = None):
        QWidget.__init__(self, parent)
        self.setupUi(self)
        self.ui = Ui_Output
        self.show()

    def main(self):
        self.textBrowser.append("sdgsdgsgsg dsgdsg dsgds gsdf")

class TheThread(QtCore.QThread):

    trigger = pyqtSignal()

    def __init__(self):
        QtCore.QThread.__init__(self)

    def __del__(self):
        self.wait()

    def run(self):
        self.trigger.connect(Output().main())
        self.trigger.emit() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T03:20:53.387

```
self.trigger.connect(Output().main()) 
```

这条线是有问题的。您正在线程中实例化一个看起来像小部件的类。这是错误的。您不应该在不同的线程中使用 GUI 元素。所有与 GUI 相关的代码都应该与事件循环在同一个线程中运行。

上述行在设计方面也是错误的。您从线程发出自定义信号，这是一个好方法。但是处理这个信号的对象应该是拥有/创建线程的对象，即你的`MainWindow`

您也不会保留对线程实例的引用。您在方法中创建它，但它是本地的。所以它会被垃圾收集，你可能会看到一个警告，它在完成之前就被删除了。

这是一个最小的工作示例：

```
import sys
from PyQt4 import QtGui, QtCore
import time
import random

class MyThread(QtCore.QThread):
    trigger = QtCore.pyqtSignal(int)

    def __init__(self, parent=None):
        super(MyThread, self).__init__(parent)

    def setup(self, thread_no):
        self.thread_no = thread_no

    def run(self):
        time.sleep(random.random()*5)  # random sleep to imitate working
        self.trigger.emit(self.thread_no)

class Main(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(Main, self).__init__(parent)
        self.text_area = QtGui.QTextBrowser()
        self.thread_button = QtGui.QPushButton('Start threads')
        self.thread_button.clicked.connect(self.start_threads)

        central_widget = QtGui.QWidget()
        central_layout = QtGui.QHBoxLayout()
        central_layout.addWidget(self.text_area)
        central_layout.addWidget(self.thread_button)
        central_widget.setLayout(central_layout)
        self.setCentralWidget(central_widget)

    def start_threads(self):
        self.threads = []              # this will keep a reference to threads
        for i in range(10):
            thread = MyThread(self)    # create a thread
            thread.trigger.connect(self.update_text)  # connect to it's signal
            thread.setup(i)            # just setting up a parameter
            thread.start()             # start the thread
            self.threads.append(thread) # keep a reference

    def update_text(self, thread_no):
        self.text_area.append('thread # %d finished' % thread_no)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    mainwindow = Main()
    mainwindow.show()

    sys.exit(app.exec_()) 
```

# wpf - WPF 中的嵌入式超链接和本地化

> ID：10694973
> 
> 赞同：3
> 
> 时间：2012-05-22T02:17:08.707
> 
> 标签：wpf, localization, hyperlink

我在 WPF 应用程序中有一个 TextBlock，我想向用户显示类似于以下内容的消息：

[重试](http://stackoverflow.com)或[返回。](http://stackoverflow.com)

我可以这样做：

```
<TextBlock>
    <Hyperlink Command="{Binding RetryCommand}">
        <Run Text="Retry" />
    </Hyperlink>
    <Run Text=" or " />
    <Hyperlink Command="{Binding GoBackCommand}">
        <Run Text="go back." />
    </Hyperlink>
</TextBlock> 
```

但是，这种方案对本地化不是很友好；在本地化过程中需要重新排列句子的情况下尤其成问题。我更希望能够`"[Retry]({0}) or [go back.]({1})."`在 resx 文件中指定类似的内容并将超链接动态插入到本地化字符串中。有没有一种干净简单的方法可以做到这一点？

在另一个应用程序中，我们使用了一个非常复杂的解决方案，涉及扩展 TextBlock 类和动态构造 Inlines 属性，但对于应该是一个常见问题的问题，它似乎有很多代码。

相关问题：[将带有占位符 (`{0}`) 的字符串添加到资源中是个好主意吗？](https://stackoverflow.com/questions/6122490/is-adding-strings-with-placeholders-0-into-resources-a-good-idea),[如何在本地化文本中嵌入链接](https://stackoverflow.com/questions/1746693/how-to-embed-links-in-localized-text)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-20T02:55:12.320

所以我想一个解决方案是自定义控件。但是，我能够使用 IMultiValueConverter 来完成工作。

```
public class TextBlockFormatToHyperlinkConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values.Length >= 3)
        {
            var tblk = values[0] as TextBlock;
            var format = values[1] as string;
            var tokens = Tokenizer.ParseTokens(format);
            int hyperLinkIndex = 0;
            for (int i = 2; i < values.Length; i++)
            {
                var token = tokens.FirstOrDefault((p) => string.Equals(p.Value as string, "{" + hyperLinkIndex + "}"));
                if (token != null)
                {
                    token.Value = values[i];
                }
                hyperLinkIndex++;
            }

            tblk.Inlines.Clear();
            foreach (var token in tokens)
            {
                if (token.Value is Hyperlink)
                    tblk.Inlines.Add((Hyperlink)token.Value);
                else
                    tblk.Inlines.Add(new Run(token.Value as string));
            }

            return tblk;
        }
        return null;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    private class Token
    {
        public object Value { get; set; }
        public Token(object value)
        {
            Value = value;
        }
    }
    private class HyperlinkToken : Token
    {
        public HyperlinkToken(object value) : base(value) { }
    }

    private static class Tokenizer
    {
        public static List<Token> ParseTokens(string format)
        {
            var tokens = new List<Token>();
            var strings = Regex.Split(format, @"({\d+})");
            foreach (var str in strings)
            {
                if (Regex.IsMatch(str, @"({\d+})"))
                {
                    tokens.Add(new HyperlinkToken(str));
                }
                else
                {
                    tokens.Add(new Token(str));
                }
            }
            return tokens;
        }
    }
} 
```

然后在 XAML 中我像这样使用它：

```
<TextBlock x:Name="tblk_LogFileLink" TextWrapping="Wrap">
    <TextBlock.Tag>
        <MultiBinding Converter="{StaticResource TextBlockFormatToHyperlinkConverter}">
            <Binding x:Name="textblock" ElementName="tblk_LogFileLink"/>
            <Binding x:Name="formatString" Source="Click to open the {0}."/>
            <Binding x:Name="firstHyperlink">
                <Binding.Source>
                    <Hyperlink NavigateUri="{Binding LogPath}">
                        <Run Text="{x:Static localization:Resources.LBL_LOG_FILE}"/>
                    </Hyperlink>
                </Binding.Source>
            </Binding>
        </MultiBinding>
    </TextBlock.Tag>
</TextBlock> 
```

如果您的字符串格式需要更多，您可以向 MultiBinding 添加多个超链接。

这使我能够本地化整个字符串，同时仍然提供超链接文本。

# matlab - MATLAB 实现中的 RCGA 求解

> ID：10694976
> 
> 赞同：0
> 
> 时间：2012-05-22T02:17:55.577
> 
> 标签：matlab

现在，我想通过在 MATLAB 中使用 RCGA（实码遗传算法）来练习解决一些问题。任何帮助者可以为我提供一些关于此的示例项目 matlab 文件吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:08:23.127

几年前我写了[一篇关于遗传算法在 MATLAB 中的应用的文章，附带了示例数据和 MATLAB 代码。](http://www.mathworks.com/company/newsletters/digest/2005/nov/genalgo.html)尽管该示例未使用真实编码，但它确实演示了如何应用自定义染色体编码，因此也许这将是您可以适应的起点。

# php - 如何将电子邮件转发到 PHP 脚本？

> ID：10694982
> 
> 赞同：0
> 
> 时间：2012-05-22T02:18:36.740
> 
> 标签：php, procmail, email-forwarding, fetchmail

我试图弄清楚如何使用[fetchmail](http://www.fetchmail.info/)将电子邮件转发（或管道）到 PHP 脚本。我从来没有这样做过，甚至不确定我是否走在正确的轨道上。从我读过的内容来看，我认为我需要使用 MDA 来转发邮件。我使用[procmail](http://www.procmail.org/)作为我的 MDA。

这是我的 fetcmailrc 文件

```
set daemon 150
set logfile /local/web/sites/sitename/mail/fetchmail.log
poll blahblah with proto IMAP
user Username there with password userpassword is Username here
ssl
fetchall
no rewrite
mda "/usr/bin/procmail -d Username -f %F -d %T $HOME/.procmailrc"; 
```

这是我的 procmailrc 文件。您可以在底部看到我正在尝试将电子邮件传输到 PHP 脚本。

```
SHELL=/bin/csh
DEFAULT=/var/mail/Username/ 
MAILDIR=/var/mail/Username/    

:0
! `/usr/local/bin/php -f /local/web/sites/stack/htdocs/bin/catchmail.php` 
```

我运行 fetchmail 并且转发（到 PHP 的管道）不起作用。我的 fetchmail.log 说：

```
procmail:  Insufficient prvileges
procmail:  Unknown user 
```

任何指针？我是否朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:36:10.440

You are not piping to PHP, you are sending email to the address that your PHP script outputs. You probably want to change the exclamation mark (`!`) to a pipe (`|`) in order for the recipe to do what you describe.

The error message from Procmail indicates that you are invoking it incorrectly, or that it lacks a setuid bit or something like that. I'm no Fetchmail expert but the `mda` line looks fishy -- you hardly want two conflicting `-d` flags at the very least. Maybe that's the problem right there. The path to the `.procmailrc` will be deduced by Procmail with the `-d` option. Try with something simpler, like this:

```
mda "/usr/bin/procmail -f %F -d %T" 
```

By the way, the assignment `SHELL=/bin/csh` seems really out of line. In my experience, attempting to use `csh` or `tcsh` with Procmail simply doesn't work. (Anyway, read [Csh Programming Considered Harmful](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/).) If you know exactly what you are doing, please explain why you have it there. Otherwise, take it out before you do anything else.

# lang - 如何在 LANSA 中创建浮点变量

> ID：10694983
> 
> 赞同：1
> 
> 时间：2012-05-22T02:18:39.307
> 
> 标签：lang

我有这样的东西

```
Define Field(#FLTPOINT) Type(*DEC) Length(7) Decimals(0) 
```

我不确定这是否是在 RDML 或 RDMLX 中定义它的最佳方式。如何在 LANSA 中创建浮点变量？

（实际上，那里有任何 LANSA 开发人员吗？在我开始从事这项工作之前，我从未听说过它！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:09:02.890

您的 DEFINE 将创建一个固定长度的小数。创建浮点使用；

```
Define Field(#FLTPOINT) Type(*FLOAT) 
```

# java - InputStream 的 available() 倾向于停止

> ID：10694985
> 
> 赞同：3
> 
> 时间：2012-05-22T02:19:02.747
> 
> 标签：java, sockets, io

这是一个有点晦涩的问题，似乎只在我使用某些计算机时才会发生。我今天在我们学校的 XP 计算机上遇到了这个问题，我似乎无法在我的家用计算机 (W7) 上复制它。

无论如何，每当我使用此代码（其中：）时，在 Java 中读取/写入套接字往往会出现问题`int avail, InputStream socket, byte[] buffer, String output`：

```
 while( (avail = input.available()) > 0 )
                    {
                        read = input.read( buffer );
                        output += new String( buffer, 0, read );
                    } 
```

这似乎是有道理的（读取所有数据，直到没有数据可用于临时缓冲区，然后是字符串），但在我们学校的计算机上（使用 IE7 测试它），整个事情不知何故暂停了。我在想 input.available() 导致它以某种方式阻塞，因为线程只是继续运行而没有到达端点......实际上只是在某处暂停。

**哦，我忘了提一下：**每当我在调试模式下运行它并逐步执行每一行时，它完全像它应该的那样工作......这让我更加困惑。

当我回到家复制这个问题时，它工作得很好（只使用 Firefox 和 IE8）。我不知道有什么更好的选择。

PS：如果缓冲区足够大，我只是使用：

```
 read = input.read( buffer );
                    output += new String( buffer, 0, read ); 
```

它工作得很好，但总是担心发送的数据会超过缓冲区大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T02:26:15.387

你在想`available()`错误的方法。该方法告诉您[*现在*](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available%28%29)[可以读取大约多少字节](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available%28%29)*，而不会阻塞。对于您正在尝试做的事情，普遍接受的成语是*

 *```
int length;
while ((length = in.read(buffer)) != -1) {
    output += new String(buffer, 0, length);
} 
```

或类似的东西（未编译/测试）。

**更新：**我认为您误解了“流结束”的概念。“流的结束”并不意味着您要读取的所有数据都已被读取。这意味着没有，也永远不会有其他可阅读的内容。例如，这可能意味着您正在读取一个文件并且已经结束，或者这可能意味着您正在从内存中的字节数组中读取并且已经结束。这些是“流的结束”。

在您的问题中，您表示或至少暗示您正在[从 Socket 读取](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#getInputStream%28%29)。您是否知道在关联的 Socket 或连接的远程端关闭之前，您永远不会到达该流的末尾？仅仅因为您从它那里收到了一些数据并不能使它成为流的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:31:57.517

为什么不使用缓冲阅读器？就像是：

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(input));
    String output = "";
    try {
        String readLine = null;
        while ((readLine = reader.readLine()) != null) {
            output += readLine + "\n";
        }
    } catch (IOException e) {
        System.err.println("Error: " + e);
    }
    System.out.println("Read from Socket:" + output); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T03:41:29.760

您的代码无效。这是对`available()`. 它所做的只是告诉你有多少字节可用于读取而不阻塞。它不能用于指示对等方将发送多少字节，并且它与对等方消息没有必然关系。TCP 中没有消息，只有一个字节流。如果要读取 EOS，只需删除`available()`测试并读取，直到它返回 -1。如果您想阅读一条消息，对等方将不得不以某种方式为您划界，例如通过带外终止符、长度词前缀或自描述协议（如对象序列化或 XML）。

它在调试模式下“工作”，因为您正在从根本上改变断点的时间。这进一步证明了您所做的事情是不正确的。*

# java - 计算不相交的有向图

> ID：10694986
> 
> 赞同：4
> 
> 时间：2012-05-22T02:19:03.450
> 
> 标签：java, arrays, math, directed-graph

我有一个`boolean[][]`名为 的二维数组`matrix`，它对有向图进行编码，如果`matrix[i][j] == true`，则顶点*j*连接到顶点*i*（反之不一定为真）。
我正在尝试创建一个 Java 方法来确定我有多少不相交的有向图。

因此，对于**Example**，如果顶点 0 连接到顶点 1，并且顶点 2 连接到顶点 3 `(<code>[{{0,0,0,0},{1,0,0,0},{0,0,0,0},{0,0,1,0}}]</code> would be the 2D array)`，我将有 2 个不相交的有向图。

如果没有连接，则不*相交的有向图的数量将等于顶点的数量。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T02:35:27.280

从树中所有节点的列表开始。考虑这些您未访问的节点。

然后重复以下过程，直到您的未访问节点列表消失。

1.  创建一个空集，即“节点集”，以表示存在于当前节点图中的节点。
2.  从当前节点开始执行搜索。对于您在搜索中遇到的每个节点，将其从未访问的节点列表中删除，然后：（1）如果该节点已存在于另一个节点集中，则合并当前节点集和另一个节点集并停止搜索该节点，或 (2) 如果该节点已存在于当前节点集中，则停止从该节点搜索，或 (3) 如果您从未见过该节点，则将其添加到当前节点集中。

此过程完成后，您的节点集对应于每个不相交图中唯一存在的节点，因此节点集的数量就是您寻求的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:59:26.690

似乎您不需要强连接，因此非常有效的[不相交集森林](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)算法可以完成这项工作。在联合阶段之后，您只需计算 parent = self 的节点

PS [Sedgewick 关于它的演讲](http://www.cs.princeton.edu/~rs/AlgsDS07/01UnionFind.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:27:02.930

```
public int countDisjointSubgraphs() {
    int len = matrix.length;
    int[] nodes = new int[len];
    for (int i = 0 ; i < len ; i++) nodes[i] = i;
    for (int i = 0 ; i < len ; i++) {
        for (int j = 0 ; j < len ; j++) {
            if (matrix[i][j] || matrix[j][i])
                for (int k = 0 ; k < len ; k++)
                    if (nodes[k] == nodes[i]) nodes[k] = j;
        }
    }
    ArrayList<Integer> list = new ArrayList<Integer>();
    for (int i : nodes)
        if (list.indexOf(i) < 0) list.add(i);
    return list.size();
} 
```

# css - 具有相对路径的 LESS CSS 背景

> ID：10694990
> 
> 赞同：12
> 
> 时间：2012-05-22T02:19:52.200
> 
> 标签：css, less

在使用 LESS 作为我的网站的样式表时，我遇到了一个问题。就个人而言，我宁愿在 CSS 中使用相对路径而不是绝对路径（只是我的习惯），但是现在当我使用带有导入功能的 LESS 时，我遇到了如下所示的问题。

我`main.less`在根文件夹中有一个文件

```
@import "inc/inc.less"; 
```

和文件`inc.less`夹中的文件`inc`

```
.homeBgr {  
    background: url('icons/Home.gif');
} 
```

图片`Home.gif`在文件夹中`/root/inc/icons`

```
 - main.less
      - inc
         - inc.less
         - icons
            - Home.gif 
```

`lessc`输出是

```
.homeBgr {  
    background: url('icons/Home.gif');
} 
```

然而，我的期望是

```
.homeBgr {  
   background: url('inc/icons/Home.gif');
} 
```

如果我使用 less.js 作为客户端编译器，我会得到预期的输出，但是如果我使用`lessc`，我不会。

有没有人遇到过同样的问题，并且有解决方案？或者真的，关于如何使它工作的任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T03:09:02.690

你必须使用 .less 的转义功能。它看起来像这样。如果这不起作用，您需要将其调整为根文件夹，请使用 chrome firebug 之类的东西来检查路径。不过，您至少可以在其逃脱后对其进行调整。

```
background: ~"url('inc/icons/Home.gif')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:40:50.450

不要将 main.less 放在 root 中，而将其他 less 文件放在 /inc 中，而是将所有 less 文件放入“css”、“styles”或“less”文件夹中。然后，您可以通过执行“../icons/home.gif”来使用一致的图像相对路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-25T08:57:43.173

相对图像路径与生成的 CSS 文件有关，与 LESS 文件无关。

# feedburner - 每个 Feedburner 提要是否自动支持 PubSubHubbub

> ID：10694993
> 
> 赞同：2
> 
> 时间：2012-05-22T02:20:09.237
> 
> 标签：feedburner, websub

我[在这里读到](http://smarterware.org/2746/how-to-pubsubhubbub-enable-your-sites-feed)这是一个必须打开的选项，但也许从那以后它已经改变了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:14:03.047

我希望谷歌的人来这里并对此做出回应，但我相信所有提要都有“发现”部分，这意味着它们都指向谷歌托管的集线器，但是，实时方法只有在发布者 ping 集线器时才有效以及当其提要已更新时，这可以通过 Pingshot 完成。

这是我们在[Superfeedr](http://superfeedr.com)上看到的这些提要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T13:01:43.970

我最近一直在做一些 PuSH 的事情，因为 FeedBurner 仍然是主要参与者之一，所以值得注意的是，至少到今天为止，我所看到的是任何提要，无论 Pingshot 设置如何，都会发布`rel=self`和`rel=hub`链接标签，订阅者可以使用该信息订阅主题，并在内容更改时在回调中接收 webhook。基本上，*是***的，所有 Feedburner 提要都支持**PuSH 。如果有活动订阅，我还没有找到不通过集线器发布内容更改的 Feedburner 提要。

确实，只有在源提要中有新内容可用时对 Feedburner 进行 ping 操作时，才会发生*实时推送，但是我所看到的文档对于一般行为非常不清楚。*它实际上使 PuSH 似乎与 Pingshot 相关联，正如我刚才所说，情况似乎并非如此。

一些额外的信息：

*   我为我测试过的提要获得的租约是 5 天
*   即使/当提要通过 HTTPS（[示例](https://feeds.feedburner.com/freakonomicsradio)）提供时，`rel=self`地址**也不**是HTTPS，因此推送主题可能与您可能已捕获或用于轮询目的的提要地址不同。
*   [集线器的 Web 界面（示例](https://pubsubhubbub.appspot.com/topic-details?hub.url=http%3A%2F%2Ffeeds.99percentinvisible.org%2F99percentinvisible)）上有一些有趣且有用的页面，尽管我不确定为什么某些看起来应该有数据的东西没有，所以请谨慎使用。

# unit-testing - rdmd 没有运行单元测试

> ID：10694994
> 
> 赞同：2
> 
> 时间：2012-05-22T02:20:09.450
> 
> 标签：unit-testing, d

我有一个带有单元测试块的类文件，就像这样

```
class SomeClass {
  // class stuff...
  unittest {
    // unit test stuff...
  }
} 
```

当我跑步时，`rdmd --main -unittest someclass.d`什么也没有发生。只是为了更好地衡量，我确保在单元测试块中有一些失败的断言，但再次没有任何反应。我错过了什么？

我正在使用 rdmd build 20120401 在 Ubuntu 上运行所有这些。

这是`rdmd`with的输出`--chatty`：

```
rdmd -unittest --main --chatty linkedlist.d
'dmd' '-unittest' '-v' '-o-' 'linkedlist.d' '-I.'
'/tmp/.rdmd-1000/home/david/D_Finger_Exercises/linkedlist.d.6374859E23D5272488D4E396AEDC7BE1' 
```

这是我一直在使用的文件的链接：[https ://github.com/davidk01/D-Finger-Exercises/](https://github.com/davidk01/D-Finger-Exercises/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:07:44.190

我无法重现您的错误。这是我的测试代码：

```
class SomeClass {
  // class stuff...
  unittest {
    import std.stdio;
    writeln("unittested");
  }
} 
```

将上面的代码保存在一个名为 test.d 的文件中，我运行：

rdmd -unittest --main test.d

并将“单元测试”打印到标准输出。

您可能希望将 --chatty 添加到标志中，以便准确了解 dmd 是如何被调用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:41:22.860

您是否尝试使用 -debug 标志运行它？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T03:07:43.863

您的`LinkedList`课程是模板化的。该`unittest`块针对该模板的每个实例化运行；即零次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T02:28:15.660

您的文件没有`main`功能，因此不会运行。添加一个`main`函数，您的单元测试将按预期调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T04:28:17.723

尝试重新排序参数。无论出于何种原因，至少对我而言，rdmd 仅`-unittest` `-I`在 rdmd 参数 ( ) 之前才承认 dmd 参数 ( etc `--main`)。我相信在文档中有一个非常简短的提及，但我不确定。

# ruby-on-rails-3 - gem install json -v 1.7.3 给出“请更新您的 PATH 以包含构建工具”

> ID：10694997
> 
> 赞同：71
> 
> 时间：2012-05-22T02:20:46.817
> 
> 标签：ruby-on-rails-3, json, windows-8, build-tools

当我运行时：

```
rails new blog 
```

我得到：

```
Installing json (1.7.3)
Gem::InstallError: The 'json' native gem requires installed build tools.

Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'
An error occurred while installing json (1.7.3), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.3'` succeeds before bundling. 
```

当我运行时：

```
gem install json -v 1.7.3 
```

我得到：

```
Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit' 
```

我正在使用 Windows 8。我确实有`c:\ruby193\bin`我的路径。我该怎么做才能纠正这些错误？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-05-22T02:56:47.290

确保安装了 devkit（勾选将更新路径的复选框）：您可能还需要重新安装 ruby​​。

**安装 DevKit**

从这里下载开发工具包[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)

此时的 DevKit url 用于 Ruby 1.8.7 和 1.9.3：[DevKit-tdm-32-4.5.2](https://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe)

用于 Ruby 2.0 及更高版本（仅限 32 位版本）： [DevKit-mingw64-32-4.7.2](http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe)

用于 Ruby 2.0 及更高版本（仅限 x64 - 64 位） [DevKit-mingw64-64-4.7.2](http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe)

按照[此处](https://github.com/oneclick/rubyinstaller/wiki/development-kit)的说明进行操作。

或简短说明：

> 解压拉链
> 
> 打开命令行并转到解压缩的文件夹
> 
> ruby dk.rb 初始化
> 
> ruby dk.rb 安装
> 
> gem install rdiscount --platform=ruby

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-30T11:22:15.987

有时当您运行时，您会`ruby dk.rb init`遇到这样的错误

![红宝石错误](../Images/5971e3d0475f7fc75798044a11a2cdf3.png)

要解决此问题，您必须更改命令提示符窗口的编码。执行此类型`chcp 1256` ，您将收到此消息：活动代码页：1256

现在您可以毫无问题地运行该命令。

祝你好运 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-29T02:14:22.083

如果你知道你已经安装了正确的 DevKit（例如：通过[Chocolatey](https://chocolatey.org/packages/ruby2.devkit)），那么你只需要运行包含的脚本来设置环境变量。

在命令中：

```
C:\> d:\path\to\DevKit2\devkitvars.bat 
```

在 PowerShell 中：

```
PS> . d:\path\to\DevKit2\devkitvars.ps1 
```

这些脚本将在您当前的命令窗口中设置正确的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-14T07:50:47.520

### 删除`DevKit folder`您之前的旧版本`extract`，您将从以下其中之一下载新版本`links`，具体取决于您的`configuration`：

此时的 DevKit url 用于 Ruby 1.8.7 和 1.9.3：[https ://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe](https://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe)

用于 Ruby 2.0 及更高版本（仅限 32 位版本）：[http ://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe2](http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe2)

用于 Ruby 2.0 及更高版本（仅限 x64 - 64 位）[http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe3](http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe3)