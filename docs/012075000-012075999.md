# StackOverflow 问答 12075000-12075999

# python - 在 Matplotlib 极坐标图上设置径向轴

> ID：12075001
> 
> 赞同：6
> 
> 时间：2012-08-22T14:08:33.950
> 
> 标签：python, matplotlib

我在极坐标图上绘制方位仰角曲线，其中仰角是径向分量。默认情况下，Matplotlib 绘制从中心 0 到周边 90 的径向值。我想扭转它，所以 90 度在中心。我尝试通过调用 ax.set_ylim(90,0) 来设置限制，但这会导致抛出 LinAlgError 异常。ax 是通过调用 add_axes 获得的坐标区对象。

可以这样做吗？如果可以，我该怎么办？

编辑：这是我现在使用的。基本绘图代码取自 Matplotlib 示例之一

```
# radar green, solid grid lines
rc('grid', color='#316931', linewidth=1, linestyle='-')
rc('xtick', labelsize=10)
rc('ytick', labelsize=10)

# force square figure and square axes looks better for polar, IMO
width, height = matplotlib.rcParams['figure.figsize']
size = min(width, height)
# make a square figure
fig = figure(figsize=(size, size))
ax = fig.add_axes([0.1, 0.1, 0.8, 0.8], projection='polar', axisbg='#d5de9c')

# Adjust radius so it goes 90 at the center to 0 at the perimeter (doesn't work)
#ax.set_ylim(90, 0)

# Rotate plot so 0 degrees is due north, 180 is due south

ax.set_theta_zero_location("N")

obs.date = datetime.datetime.utcnow()
az,el = azel_calc(obs, ephem.Sun())
ax.plot(az, el, color='#ee8d18', lw=3)
obs.date = datetime.datetime.utcnow()
az,el = azel_calc(obs, ephem.Moon())
ax.plot(az, el, color='#bf7033', lw=3)

ax.set_rmax(90.)
grid(True)

ax.set_title("Solar Az-El Plot", fontsize=10)
show() 
```

由此产生的情节是

![在此处输入图像描述](../Images/a6538ea21606747fd4d10a79ad7b3bef.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T16:02:33.153

我设法把他的径向轴倒置了。我不得不重新映射半径，以匹配新轴：

```
fig = figure()
ax = fig.add_subplot(1, 1, 1, polar=True)

def mapr(r):
   """Remap the radial axis."""
   return 90 - r

r = np.arange(0, 90, 0.01)
theta = 2 * np.pi * r / 90

ax.plot(theta, mapr(r))
ax.set_yticks(range(0, 90, 10))                   # Define the yticks
ax.set_yticklabels(map(str, range(90, 0, -10)))   # Change the labels 
```

请注意，这只是一个技巧，轴仍然是中心的 0 和外围的 90。您必须对正在绘制的所有变量使用映射函数。

# mysql - 使用 MySQL 查找重复并在一行上显示

> ID：12075006
> 
> 赞同：2
> 
> 时间：2012-08-22T14:08:53.307
> 
> 标签：mysql, sql

我想使用 MySQL 来查找重复项，然后将这些项目显示为一个组合记录。例如，我有两列：名称和水果。记录样本可能如下所示：

Joe - Peaches
Faye - 香蕉
Joe - Starfruit
Sam - Apples

我想将此数据显示为：

乔 - 桃子，杨桃
Faye - 香蕉
山姆 - 苹果

那可能吗？你能帮我启动 MySQL 查询吗？我正在为我的应用程序使用 VB.NET。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:14:15.967

为此使用`GROUP_CONCAT`。

```
SELECT personName, GROUP_CONCAT(fruitName) fruitList
FROM tableName
GROUP BY personName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:14:04.857

你会想在这里使用 group_concat 。

```
SELECT name, group_concat(fruit)
FROM table
GROUP BY name 
```

# c# - 在 Silverlight 中显示与复选框关联的分层数据

> ID：12075011
> 
> 赞同：2
> 
> 时间：2012-08-22T14:09:15.917
> 
> 标签：c#, .net, silverlight, silverlight-5.0, hierarchical-data

您好，提前感谢您的帮助，我有一个父对象列表，其中每个父对象都有一个子对象列表。我想以一种用户可以选择子对象的方式显示数据，按下按钮，然后我将通过使用 xml 序列化程序序列化对象将选定的子对象及其父对象保存在 xml 中。显示应该是什么样子的想法是：

```
<sdk:Label x:Name="ParentLabel" content="ParentNameString" />
    <CheckBox x:Name="ChildCheckBox1" Content="ChildNameString" />
    <CheckBox x:Name="ChildCheckBox2" Content="ChildNameString" />
    <CheckBox x:Name="ChildCheckBox3" Content="ChildNameString" />
<sdk:Label x:Name="ParentLabel2" content="ParentNameString" />
    <CheckBox x:Name="ChildCheckBox4" Content="ChildNameString" />
    <CheckBox x:Name="ChildCheckBox5" Content="ChildNameString" />
    <CheckBox x:Name="ChildCheckBox6" Content="ChildNameString" /> 
```

我知道 DataGrid 控件中有复选框列的选项，但是我可以通过 Header/children 显示层次关系吗？或者是否有一个允许标题和关联子元素的列表框控件中的数据模板选项？你会推荐什么？再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:56:07.973

如果你有一个单一的级别，`Parent`你`Child`可以做这样的事情。

带有一些示例数据的简单代码隐藏

```
namespace SilverlightApplication2
{
    public partial class MainPage : UserControl 
    {
        public ObservableCollection<Parent> ParentList { get; set; }

        public MainPage()
        {
            Populate();
            InitializeComponent();
        }

        private void Save_Click(object sender, RoutedEventArgs e)
        {
          foreach (var child in ParentList
            .SelectMany(p => p.Children)
            .Where(c => c.IsSelected))
          {
            //Save the child
            Debug.WriteLine(string.Format("Child {0} saved", child.Name));
          }
        }

        private void Populate()
        {
            ParentList = new ObservableCollection<Parent>();
            ParentList.Add(new Parent
            {
                Name = "John",
                Children = new List<Child> { new Child { Name = "Paul" }, new Child { Name = "Pat" } }
            });

            ParentList.Add(new Parent
            {
                Name = "Mike",
                Children = new List<Child> { new Child { Name = "Bob" }, new Child { Name = "Alice" } }
            });

            ParentList.Add(new Parent
            {
                Name = "Smith",
                Children = new List<Child> { new Child { Name = "Ryan" }, new Child { Name = "Sue" }, new Child { Name = "Liz" } }
            });
        }
    }

    public class Parent
    {
        public string Name { get; set; }
        public List<Child> Children { get; set; }
    }

    public class Child
    {
        public string Name { get; set; }
        public bool IsSelected { get; set; }
    }
} 
```

您的 xaml 将是这样的。

```
<UserControl x:Class="SilverlightApplication2.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:my="clr-namespace:SilverlightApplication2"
             x:Name="MainUserControl"
             Width="400"
             Height="300"
             mc:Ignorable="d">
    <UserControl.Resources>
        <DataTemplate x:Key="ChildTemplate">
            <StackPanel Orientation="Horizontal">
                <CheckBox IsChecked="{Binding IsSelected}"/>
                <TextBlock Text="{Binding Name}" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="ParentTemplate">
            <StackPanel>
                <TextBlock Text="{Binding Name}" />
                <ListBox ItemsSource="{Binding Path=Children}" ItemTemplate="{StaticResource ChildTemplate}"/>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>
    <StackPanel x:Name="LayoutRoot" Background="White">
        <ListBox ItemsSource="{Binding ElementName=MainUserControl, Path=ParentList}" ItemTemplate="{StaticResource ParentTemplate}"/>
    </StackPanel>
</UserControl> 
```

这导致了这样的视图。为了简单起见，我省略了所有样式，我相信你可以让它更性感；）

![在此处输入图像描述](../Images/b3064efe5a2f4c206150d039d2e19608.png)

现在你可以在后面的代码中只`Child`处理`IsSelected`true

如果您有多个级别......即......**您的孩子有孩子**，您将不得不使用[HierarchicalDataTemplate](http://msdn.microsoft.com/en-us/library/system.windows.hierarchicaldatatemplate%28v=vs.95%29.aspx)

# maven - Maven：继承依赖的资源

> ID：12075016
> 
> 赞同：0
> 
> 时间：2012-08-22T14:09:24.297
> 
> 标签：maven

我有一个项目依赖于另一个项目。在第二个中，有一些资源。从第一个开始，我正在执行以下操作：

```
ClassLoader.getSystemResourceAsStream(filename); 
```

它无法从依赖项中获取资源。知道为什么会发生这种情况吗？

谢谢，越月者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:17:25.607

如果您尝试加载类路径上的文件，您可能是指`getResourceAsStream`.

另一种可能性是，当您运行它时，您没有使用完整的类路径运行它。

# nullpointerexception - 空指针异常 - ANTLR TreeWalker

> ID：12075017
> 
> 赞同：1
> 
> 时间：2012-08-22T14:09:36.393
> 
> 标签：nullpointerexception, antlr, abstract-syntax-tree

我在 TreeWalker 中不断收到 NullPoiterException，但我似乎无法找出原因。

我无法发布整个语法，因为它太长了。

这是 treeWalker 中的规则，antlrWorks 说问题是：

```
collection_name returns [MyType value]
    : ID { $value = (MyType) database.get($collection_name.text); }
    ; 
```

请注意，数据库是一个 HashMap。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:12:33.613

> 我无法发布整个语法，因为它太长了。

以下内容更具“可读性”，并且与您的原始规则完全相同：

```
collection_name returns [MyType value]
 : ID { $value = (MyType) database.get($ID.text); }
 ; 
```

也许做一些健全性检查：

```
collection_name returns [MyType value]
 : ID 
   {
     Object v = database.get($ID.text);
     if(v == null) {
       throw new RuntimeException($ID.text + " unknown in database!");
     }
     $value = (MyType) v;
   }
 ; 
```

## 编辑

正如您已经发现的那样，`.text`在树文法中（仅在解析器文法中）不可能访问规则的属性。在树文法中，每个规则都是类型`Tree`的，并且知道 a`.start`和`.end`属性。在解析器语法和树语法中都可以访问相同的标记。所以`$ID.text`工作正常。

# php - 没有得到任何点击 Facebook 喜欢按钮

> ID：12075019
> 
> 赞同：0
> 
> 时间：2012-08-22T14:09:39.973
> 
> 标签：php, facebook

我第一次使用 facebook API。

当用户单击“Page1.php”上的链接（例如网站的“Win Prize”）时，我正在这样做，所以它会出现“Page2.php”。

“Page2.php”将检查用户是否已登录 facebook 并喜欢 facebook 页面。

IF NOT 则显示 facebook like 按钮。当用户单击此按钮页面将被用户喜欢并重定向到“WinPrize.php”。

这是我的“Page2.php”代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<title>Facebook Page Like</title>
</head>

<body>
<?php
require 'src/facebook.php';
//Puted here APP ID
$app_id = "XXXXXXXXXXXX";
//Puted here app_secret key
$app_secret = "XXXXXXXXXXXXXXXXXXXXXXXXXXX";

//Putted here one pageID
$pageid="XXXXXXXX";

$appurl = "http://www.manektech.net/likeornot/";

//leave it as it is 
$facebook = new Facebook(array(
'appId' => $app_id,
'secret' => $app_secret,
'cookie' => true
));

// Get User ID
$user = $facebook->getUser();

if($user)
{
    try
    {
        // Proceed knowing you have a logged in user who's authenticated.
        $likeID = $facebook->api(
            array( 
                'method' => 'fql.query',
                'query' => 'SELECT uid, page_id FROM page_fan WHERE uid="'.$user.'" AND page_id="'.$pageid.'"'
            )
        );

        if(empty($likeID))
        { ?>
            <div id="fb-root"></div>
            <script type="text/javascript">
            <!--
                window.fbAsyncInit = function () {

                                        //Putted here my orignal APP ID
                    FB.init({ appId: 'APP_ID', status: true, cookie: true, xfbml: true });
                    FB.Event.subscribe('edge.create', function (href, widget) {
                        window.location = "http://www.google.com";
                    });
                };
                (function () {
                    var e = document.createElement('script');
                    e.type = 'text/javascript';
                    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
                    e.async = true;
                    document.getElementById('fb-root').appendChild(e);
                } ());
            //-->
            </script>
            <iframe src="XXX....XXX" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true"></iframe>
<?php   }
        else
        {
            header("Location: http://www.girlslovecars.com/spinwheel.php");
            exit();
        }   
    }
    catch (FacebookApiException $e)
    {
        error_log($e);
    }
}

if ($user)
{
    $logoutUrl = $facebook->getLogoutUrl();
}
else
{
    $params = array(
        'scope' => 'user_likes,read_stream,publish_stream',
        'redirect_uri' => $appurl
    );
    $loginUrl = $facebook->getLoginUrl($params);
}

?>

<?php if(!$user){ ?>
    <div>
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
    </div>
<?php } ?>  

</body>
</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:17:40.550

edge.create 事件仅在您使用 XFBML 嵌入 like 按钮时才会触发 - 它不适用于 iframe 版本（我想您正在使用它，`<iframe>`在您的脚本块之后看到代码中的元素） .

# android - 在 TextView 中显示列表

> ID：12075029
> 
> 赞同：0
> 
> 时间：2012-08-22T14:10:11.750
> 
> 标签：android

我正在为一个有趣的应用程序制作一个假的命令行系统，我想在同一个 TextView 中显示输入和输出，如下所示：

```
>something
>something else
>even more stuff
>etcetera. 
```

我已经想出了如何将 EditText 中的文本存储到字符串中并添加 \n 和 >，但我不能在整个过程中使用字符串：为了避免堵塞 RAM，我想删除之后的行，比如说50？我认为使用 Lists 会容易得多。

但是，这不起作用：

```
log.setText((CharSequence) logText); 
```

但是会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:22:23.323

这种方法：

[http://developer.android.com/reference/android/text/TextUtils.html#join(java.lang.CharSequence](http://developer.android.com/reference/android/text/TextUtils.html#join(java.lang.CharSequence) , java.lang.Iterable)

返回由每个元素组成的字符串（转换为字符串或使用 toString 值），每个元素之间由分隔符分隔。因此，您可以轻松地将所有项目连接到一个字符串中。

您还可以使用[http://developer.android.com/reference/java/util/AbstractList.html#subList(int](http://developer.android.com/reference/java/util/AbstractList.html#subList(int) , int) 来限制所述列表中的项目数。

根据您的问题，我假设 logText 是某种列表，因此您可以致电

```
log.setText(TextUtils.join("\n>", logText.subList(0, 50)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:14:00.067

也许您可以将所有字符串放在一个列表中，每次添加一个时，从包含所有项目的列表中重新创建一个字符串，并将其影响到您的文本视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:28:19.227

您可以使用`ListView`不带分隔符的 a 并使用`ArrayAdapter`.

这样您就不必担心内存问题，并且用户可以轻松滚动浏览以前的命令。

# php - 使用php更改mysql数据库中的值

> ID：12075033
> 
> 赞同：0
> 
> 时间：2012-08-22T14:10:30.723
> 
> 标签：php, mysql

我有以下代码：

```
$do_id=$_GET['id'];
$new_workorder=$_GET['workorder'];

//get current workorder on file for record that will be updated
$query = "SELECT workorder FROM jvltodos WHERE id = '$do_id' LIMIT 1";
$bla = mysql_query($query);
$workorder_old = mysql_fetch_row($bla);

//get record for workorder on file that will have the new workorder
$query = "SELECT id FROM jvltodos WHERE workorder = '$new_workorder' LIMIT 1";
$bla = mysql_query($query);
$id_fix = mysql_fetch_row($bla);

if (isset($new_workorder) && $new_workorder!=$workorder_old) {
    //update the changed record
    $query = "UPDATE jvltodos
        SET workorder={$new_workorder}
        WHERE id = {$do_id}";
    $result = mysql_query($query);

    //update the record that had the old workorder
    $query = "UPDATE jvltodos
        SET workorder={$workorder_old}
        WHERE id = {$id_fix}";
    $result = mysql_query($query);
} 
```

我将 'id' 和 'workorder' 传递到 url，所以我先获取它们。有了这个，我将带有“id”的记录更新为新的“工作订单”。到目前为止，一切都很好。但我想找到具有该“工作订单”的记录，并使用旧“ID”中的“工作订单”对其进行更新。（简单来说：当我增加/减少'workorder'时，我想切换两条记录）对我来说它看起来很简单，但它不起作用。第一件事（使用新的工单更新 id 有效.. 但其他记录保持不变.. 它保留了已经存在的工单） 我错过了什么？（一定很简单，我只是忽略了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:03:47.970

@andrewsi 谢谢你的建议！我把代码拿出来，把它复制到另一个页面上，然后做了一些回声，看看发生了什么，这样我就很容易找出问题所在。

示例：$bla = mysql_query($query); $workorder_old = mysql_fetch_row($bla);

我想要的 $workorder_old 应该是一个数字。但是，这并没有发生，而是返回了……一个数组。当我将代码更改为...

```
$bla = mysql_query($query);
$bla = mysql_fetch_row($bla);
$workorder_old = $bla[0]; 
```

......它就像一个魅力。

小提示：我已经习惯了一步（另一种语言）获取数据，以至于我忘记了我需要在 PHP 中执行几个步骤。猜猜是时候把它扔进一个函数中了.. :-)

# r - ggplot legends - 更改标签、顺序和标题

> ID：12075037
> 
> 赞同：58
> 
> 时间：2012-08-22T14:10:44.577
> 
> 标签：r, ggplot2

我正在努力修改我的情节中的传说。这是一个可重现的示例：

```
dtt <- structure(list(model = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("ma", "mb", "mc"), class = "factor"), year = c(2005L, 2006L, 2007L, 2008L, 2009L, 2010L, 2005L, 2006L, 2007L, 2008L, 2009L, 2010L, 2005L, 2006L, 2007L, 2008L, 2009L, 2010L), V = c(0.16, 0.14, 0.11, 0.13, 0.15, 0.16, 0.24, 0.17, 0.12, 0.13, 0.15, 0.15, 0.2, 0.16, 0.11, 0.12, 0.12, 0.15), lower = c(0.11, 0.11, 0.07, 0.09, 0.11, 0.12, 0.16, 0.12, 0.04, 0.09, 0.09, 0.11, 0.14, 0.1, 0.07, 0.08, 0.05, 0.1), upper = c(0.21, 0.19, 0.17, 0.17, 0.19, 0.2, 0.29, 0.23, 0.16, 0.17, 0.16, 0.2, 0.26, 0.27, 0.15, 0.16, 0.15, 0.19)), .Names = c("model", "year", "V", "lower", "upper"), class = "data.frame", row.names = c(NA, -18L)) 
```

我的情节是这样生成的：

```
ggplot(dtt, aes(x=year, y=V, group = model, colour = model, ymin = lower, ymax = upper)) +
    geom_ribbon(alpha = 0.35, linetype=0)+ 
    geom_line(aes(linetype=model), size = 1.5) +       
    geom_point(aes(shape=model), fill = "white", size = 4)  +      
    theme(legend.position=c(.6,0.8)) +
    theme(legend.background = element_rect(colour = 'black', fill = 'grey90', size = 1, linetype='solid')) 
```

产生这个： ![在此处输入图像描述](../Images/bd5a0fc12e92f68cbcc3d62429fb34d9.png)

现在，我想做的是

1.  更改图例的标题
2.  更改图例项出现的顺序
3.  更改图例项的文本。

我已经摆弄了几个小时试图做到这一点，但没有太大的成功。到目前为止，我管理的最好的方法是添加以下内容：

```
scale_colour_hue(name = "Model 1",
    breaks=c("mb", "ma", "mc"),
    labels=c("MBB", "MAA", "MCC")) 
```

但它产生了这种可憎的： ![在此处输入图像描述](../Images/b7848f978a7701044c022f6bcc2f3b9e.png)

如您所见，现在多了一个不需要的图例，并且图例中的形状与情节中的形状不匹配！

最后，我想在图例中显示蓝色和绿色线是虚线，而不是实线 - 但我完全不知道该怎么做。

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-22T14:56:17.987

你需要做两件事：

1.  在绘图之前重命名和重新排序因子水平
2.  将每个图例的标题重命名为相同的标题

编码：

```
dtt$model <- factor(dtt$model, levels=c("mb", "ma", "mc"), labels=c("MBB", "MAA", "MCC"))

library(ggplot2)
ggplot(dtt, aes(x=year, y=V, group = model, colour = model, ymin = lower, ymax = upper)) +
  geom_ribbon(alpha = 0.35, linetype=0)+ 
  geom_line(aes(linetype=model), size = 1) +       
  geom_point(aes(shape=model), size=4)  +      
  theme(legend.position=c(.6,0.8)) +
  theme(legend.background = element_rect(colour = 'black', fill = 'grey90', size = 1, linetype='solid')) +
  scale_linetype_discrete("Model 1") +
  scale_shape_discrete("Model 1") +
  scale_colour_discrete("Model 1") 
```

![在此处输入图像描述](../Images/a9a68f98e8345bc20cbba2a400f108e6.png)

但是，我认为这真的很难看，也很难解释。使用方面要好得多：

```
ggplot(dtt, aes(x=year, y=V, group = model, colour = model, ymin = lower, ymax = upper)) +
  geom_ribbon(alpha=0.2, colour=NA)+ 
  geom_line() +       
  geom_point()  +      
  facet_wrap(~model) 
```

![在此处输入图像描述](../Images/9df534812e3aa77ca531553e1015c8b2.png)

# python - 对 .pyd 文件进行逆向工程有多难？

> ID：12075042
> 
> 赞同：20
> 
> 时间：2012-08-22T14:10:52.033
> 
> 标签：python, reverse-engineering, pyc, pyd

阅读后[如何保护 Python 代码？](https://stackoverflow.com/questions/261638/how-do-i-protect-python-code)，我决定在 Windows 上尝试一个非常简单的扩展模块。我之前在 Linux 上编译过自己的扩展模块，但这是我第一次在 Windows 上编译。我期待得到一个 .dll 文件，但我得到了一个 .pyd 文件。[Docs](http://docs.python.org/faq/windows.html#is-a-pyd-file-the-same-as-a-dll)说它们是一样的，但它必须有一个`init[insert-module-name]()`功能。

可以安全地假设，对它们进行逆向工程就像对 dll 文件一样困难。如果不是，从 .pyc 文件到 .dll 文件的逆向工程难度如何？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T14:20:23.877

正如您已经发现的那样，它们等同于具有特定结构的 DLL 文件。原则上，它们同样难以逆向工程，它们是机器代码，只需要很少的元数据，而且代码可能已经被优化得面目全非。

但是，所需的结构，并且知道许多函数将处理`PyObject *`s 和其他明确定义的 CPython 类型，可能会产生一些影响。它不会真正帮助将汇编代码映射到 C（如果有的话，由于 CPython 特定的宏，它会变得更难）。主要与 Python 类型交互的代码看起来与操作 C 结构的代码完全不同（并且相对臃肿）。这可能会使它更难理解，或者它可能会泄露一些没有什么有趣的代码，并允许逆向工程师跳过它并更早地获取您的商业机密。

这些问题都不适用于纯 C 代码（即不与 Python 交互）的代码片段。你可能有很多这样的。因此，它最终不应该产生重大影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:17:52.367

它们基本上是本机代码。但是因为每个函数都有有趣的参数列表，所以可能很难看到每个函数的作用。我会说它们和 dll 一样难，如果不是更难的话。

# jquery - 用什么代替 jQuery 模板？

> ID：12075043
> 
> 赞同：1
> 
> 时间：2012-08-22T14:10:56.217
> 
> 标签：jquery, jquery-ui, jsrender

既然 jQuery 模板将来会过时，那么有什么好的替代品来代替它呢？JsRender 是否成熟到可以整合到企业级应用程序中？还有哪些其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:19:56.543

这些是我的偏好

[Underscore.js](http://underscorejs.org/#template)是最直接的解决方案，因为它只是嵌入了 javascript。我几乎所有的模板需求都使用它，除了当我实际构建一个完整的网络应用程序时

[车把](http://handlebarsjs.com/)很复杂。如果您要编写大量依赖于大量逻辑的模板代码，则最好使用它，因为这就是简单地嵌入 javascript 会导致代码混乱的地方。它被认为主要是无逻辑的，虽然在你的视图中没有任何显示逻辑可能是违反直觉的，但它更干净，并且随着你的应用程序的增长，它的回报越来越多。

# php - PHP和mysql的二进制日志文件

> ID：12075049
> 
> 赞同：4
> 
> 时间：2012-08-22T14:11:22.337
> 
> 标签：php, mysql, database

我正在尝试使用 PHP 从我正在运行的虚拟机中恢复 MySQL 二进制日志文件的内容。我在虚拟机和 LAMP 上运行 CentOS。

我有 4 台虚拟机在虚拟网络上运行，它们都位于同一个子网中，并且 MySQL 数据库已启动并正在运行，并且复制正在运行。

我正在尝试使用 PHP 恢复 master 的 bin 日志的内容。通常可以使用以下命令恢复文件的内容：

```
shell> mysqlbinlog [options] log_file 
```

我编写了一个在本地机器上执行 shell 命令的 PHP 脚本：

```
$cmd="mysqlbinlog /var/lib/mysql/provider-bin.000003";
echo "<pre>".shell_exec($cmd); 
```

我检查了 provider-bin.000003 是否存在，并且 shell_exec 函数可以工作并且没有被禁用。

当我在控制台上执行命令时出现问题，我得到了 bin 文件的内容，但是 PHP 脚本没有输出预期的结果。

它正在输出以下内容：

```
/*!40019 SET @@session.max_insert_delayed_threads=0*/;
/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
DELIMITER /*!*/;
DELIMITER ;
# End of log file
ROLLBACK /* added by mysqlbinlog */;
/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/; 
```

**更新：执行**

我也尝试过使用 exec 函数，它输出相同：

```
$cmd="mysqlbinlog /var/lib/mysql/provider-bin.000003";

print_r(exec($cmd,$ret_value)) . "<br />DONE";

echo "<pre>".shell_exec($cmd." 2>&1"); 
```

非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:50:20.110

几天前我已经弄清楚了，所以这是解决方案。

虽然 mysqlbinlog 由 PHP 执行，但如果从浏览器运行，它仍然无法读取 MySQL 的二进制文件，由于某种原因，它显示文件不存在。那从来都不是我的计划，所以 cron 作业和 sh 文件为我解决了问题。

Cron 作业将以 root 身份运行脚本，而不会将其内容暴露给外界。

现在我的循环复制故障转移脚本运行良好。

# java - 使用休眠过滤非原始类型

> ID：12075054
> 
> 赞同：2
> 
> 时间：2012-08-22T14:11:31.437
> 
> 标签：java, hibernate, soft-delete

在我的数据库中，我不删除对象。而是完成了软删除。表示将 delted 标志设置为 true。这应该由休眠使用@Filter 注释过滤。这可行，但我遇到的问题是字段没有被过滤。

例如，我有一个子类和一个包含子类的父类。如果子对象被删除并且父对象被加载，则父对象包含子对象（尽管已正确设置已删除标志）。但我希望像处理集合一样过滤子对象。有没有办法做到这一点？

我试着把这个领域当作收藏品，但这对我不起作用。

```
@Entity
@FilterDef(name = deletedFilter, parameters = @ParamDef(name = deletedParam, type = "boolean"))
@Filter(name = deletedFilter, condition = ":deletedParam = deleted")
public class Child {}

@Entity
public class Parent {
    @OneToOne
    @Filter(name = deletedFilter, condition = ":deletedParam = deleted")
    private Child child = new Child();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:00:03.807

休眠过滤器不适用于`@OneToOne`关系。

[https://hibernate.onjira.com/browse/HHH-4026](https://hibernate.onjira.com/browse/HHH-4026)

解释是对问题的评论：过滤器会改变关系的基数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-25T10:14:24.377

如果布尔标志不起作用，您可以改用**整**数值。并可以进行相应的检查。

# sql - sql server count() 函数？

> ID：12075056
> 
> 赞同：0
> 
> 时间：2012-08-22T14:11:36.367
> 
> 标签：sql, sql-server, tsql

我有这个 Sql Query 向我显示 Project 下有多少任务，但它不显示 Projects with 0 task 的问题有人可以帮助我吗？

```
SELECT Projects.projectName AS [Project Name],
    COUNT(Projects_tasks.taskID) AS #tasks,
    Projects.projectID AS [Project ID]

FROM Projects

INNER JOIN Projects_tasks
ON Projects.projectID = Projects_tasks.projectID 

GROUP BY Projects.projectName,
    Projects_tasks.taskID,
    Projects.projectID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:14:03.117

采用`Left Join`

```
SELECT     Projects.projectName AS [Project Name],
                  ISNULL(COUNT(Projects_tasks.taskID),0) AS #tasks, Projects.projectID AS [Project ID]

FROM       Projects LEFT JOIN
                  Projects_tasks ON Projects.projectID = Projects_tasks.projectID 

GROUP BY Projects.projectName,Projects.projectID 
```

还删除`column`您在`group by`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:14:37.853

使用 LEFT 连接、ISNULL()，并且不要按您正在计算的列进行分组。

```
SELECT     Projects.projectName AS [Project Name],
                  ISNULL(COUNT(Projects_tasks.taskID), 0) AS #tasks, Projects.projectID AS [Project ID]

FROM       Projects LEFT JOIN
                  Projects_tasks ON Projects.projectID = Projects_tasks.projectID 

GROUP BY Projects.projectName,Projects.projectID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:14:01.113

您应该使用 LEFT JOIN 来确保包含 0 个任务的项目也包括在内

```
SELECT     Projects.projectName AS [Project Name],
           ISNULL(COUNT(Projects_tasks.taskID),0) AS #tasks, Projects.projectID AS [Project ID]
FROM       Projects LEFT JOIN
                  Projects_tasks ON Projects.projectID = Projects_tasks.projectID 

GROUP BY Projects.projectName,Projects_tasks.taskID,Projects.projectID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:14:48.427

尝试将 INNER JOIN 更改为 LEFT JOIN

您没有看到 0，因为没有要加入的任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T14:15:09.100

使用`LEFT JOIN`. 并且还`COALESCE`可以转换`null`值。`COALESCE`必须在`COUNT`函数内部，因为该列`Projects_tasks.taskID`可以是**NULL**。

```
SELECT Projects.projectName AS [Project Name],
       COUNT(COALESCE(Projects_tasks.taskID, 0)) AS #tasks,
       Projects.projectID AS [Project ID]
FROM   Projects
         LEFT JOIN Projects_tasks
            ON Projects.projectID = Projects_tasks.projectID 
GROUP BY Projects.projectName,
    Projects_tasks.taskID,
    Projects.projectID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T14:15:52.860

我怀疑您的查询是否会返回超过 1 个任务作为任务数。Projects_tasks.taskID 不应在 group 子句中。对于您的问题，您必须使用 LEFT JOIN 而不是内部连接，它会起作用。

```
SELECT Projects.projectName AS [Project Name],
    sum(case when Projects_tasks.taskID is null then 0 else 1 end) AS #tasks,
    Projects.projectID AS [Project ID]

FROM Projects  

LEFT JOIN Projects_tasks
ON Projects.projectID = Projects_tasks.projectID 

GROUP BY Projects.projectName,
    Projects.projectID 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T14:53:16.863

尝试将 INNER JOIN 更改为 LEFT JOIN

```
SELECT     Projects.projectName AS [Project Name],
       ISNULL(COUNT(Projects_tasks.taskID),0) AS #tasks, Projects.projectID AS [Project ID]

FROM Projects LEFT JOIN Projects_tasks ON Projects.projectID = Projects_tasks.projectID

GROUP BY Projects.projectName,Projects_tasks.taskID,Projects.projectID 
```

# matlab - Matlab的冒号运算符叫什么？

> ID：12075057
> 
> 赞同：1
> 
> 时间：2012-08-22T14:11:38.493
> 
> 标签：matlab, colon

在向人们介绍 Matlab 时，如果我可以将 Matlab 的冒号运算符称为“冒号运算符”之外的其他东西，那就太好了。您可以在此[Mathworks 博客上阅读](http://blogs.mathworks.com/loren/2006/11/10/all-about-the-colon-operator/)中所读到的，运算符有许多不同的上下文。我专门指的是该列表中的第一个用途，即创建一个数字列表。

有没有人有一个聪明的短语来指代这个操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:13:51.520

我将其称为“范围运算符”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:12:35.143

我认为[线性空间矢量生成器也会...](http://www.mathworks.com.au/help/matlab/ref/linspace.html)

# c# - 使用 Naudio 将每个 WAV 通道保存为单通道 WAV 文件

> ID：12075062
> 
> 赞同：5
> 
> 时间：2012-08-22T14:12:14.070
> 
> 标签：c#, audio, naudio, waveform, wave

我正在尝试将 WAV 文件（PCM、48kHz、4 通道、16 位）转换为单通道 WAV 文件。

[我尝试像这个答案](https://stackoverflow.com/questions/10421636/easiest-way-to-read-2-channel-samples-into-array-from-wavestream)一样将 WAV 文件拆分为 4 个字节数组，并创建了一个 WaveMemoryStream ，如下所示，但不起作用。

```
byte[] chan1ByteArray = new byte[channel1Buffer.Length];
Buffer.BlockCopy(channel1Buffer, 0, chan1ByteArray, 0, chan1ByteArray.Length);
WaveMemoryStream chan1 = new WaveMemoryStream(chan1ByteArray, sampleRate, (ushort)bitsPerSample, 1); 
```

我在创建 WAVE 标头时遗漏了什么吗？还是有更多将 WAV 拆分为单声道 WAV 文件的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T21:11:32.037

基本思想是源波形文件包含交错的样本。一个用于第一个通道，一个用于第二个通道，依此类推。这是一些未经测试的示例代码，可让您了解如何执行此操作。

```
var reader = new WaveFileReader("fourchannel.wav");
var buffer = new byte[2 * reader.WaveFormat.SampleRate * reader.WaveFormat.Channels];
var writers = new WaveFileWriter[reader.WaveFormat.Channels];
for (int n = 0; n < writers.Length; n++) 
{
    var format = new WaveFormat(reader.WaveFormat.SampleRate,16,1);
    writers[n] = new WaveFileWriter(String.Format("channel{0}.wav",n+1), format);
}
int bytesRead;
while((bytesRead = reader.Read(buffer,0, buffer.Length)) > 0) 
{
    int offset=  0;
    while (offset < bytesRead) 
    {
        for (int n = 0; n < writers.Length; n++) 
        {
            // write one sample
            writers[n].Write(buffer,offset,2);
            offset += 2;
        }           
    }
}
for (int n = 0; n < writers.Length; n++) 
{
    writers[n].Dispose();
}
reader.Dispose(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-04T14:23:05.370

根据 Mark Heath 的回答，我在一个包含 32 个通道的 32 位浮动 WAV 上苦苦挣扎，并通过简化他的建议来设法让它工作。我猜这个和平代码也适用于四声道音频 WAV 文件。

```
 var reader = new WaveFileReader("thirtytwochannels.wav");
    var writers = new WaveFileWriter[reader.WaveFormat.Channels];
    for (int n = 0; n < writers.Length; n++)
    {
        var format = new WaveFormat(reader.WaveFormat.SampleRate, 16, 1);
        writers[n] = new WaveFileWriter(string.Format($"channel{n + 1}.wav"), format);
    }

    float[] buffer;
    while ((buffer = reader.ReadNextSampleFrame())?.Length > 0)
    {
        for(int i = 0; i < buffer.Length; i++)
        {
            // write one sample for each channel (i is the channelNumber)
            writers[i].WriteSample(buffer[i]);
        }
    }

    for (int n = 0; n < writers.Length; n++)
    {
        writers[n].Dispose();
    }
    reader.Dispose(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-01T19:46:31.587

这是我使用的一种方法，可以设置输出单声道格式，例如BitsPerSample、SampleRate

```
using NAudio.Wave;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;

namespace DataScraper.TranscriptionCenter
{
    public class MP3ToWave
    {
        /// <summary>
        /// Converts an MP3 file to distinct wav files, using NAudio
        /// They are saved in the same directory as the MP3 file
        /// </summary>
        /// <param name="MP3FileIn">The MP3 file</param>
        /// <returns>Returns the WAV files</returns>
        public static string[] MP3FilesToTranscriptionWaveFiles(string MP3FileIn)
        {
            FileInfo MP3FileInfo = new FileInfo(MP3FileIn);
            if (MP3FileInfo.Exists == false)
                throw new Exception("File does not exist? " + MP3FileIn);
            Mp3FileReader readerMP3 = null;
            WaveStream PCMStream = null;
            WaveFileReader readerWAV = null;
            List<string> ListFilesOut = null;
            WaveFileWriter[] FileWriters = null;
            MemoryStream TempStream = null;
            WaveFormatConversionStream WaveFormatConversionStream_ = null;
            WaveFormat SaveWaveFormatMono = new WaveFormat((16 * 1000), 
                    16, 
                    1);
            try
            {
                readerMP3 = new Mp3FileReader(MP3FileInfo.FullName);
                PCMStream = WaveFormatConversionStream.CreatePcmStream(readerMP3);
                WaveFormatConversionStream_ = new WaveFormatConversionStream(new     WaveFormat(SaveWaveFormatMono.SampleRate, 
                    SaveWaveFormatMono.BitsPerSample, 
                    PCMStream.WaveFormat.Channels),
                    PCMStream);

                //Each filepath, each channel
                ListFilesOut = new List<string>    (WaveFormatConversionStream_.WaveFormat.Channels);

                //Each is a wav file out
                for (int index = 0; index <     WaveFormatConversionStream_.WaveFormat.Channels; index++)
            {
                ListFilesOut.Add(MP3FileInfo.Directory.FullName + "\\" + Path.GetFileNameWithoutExtension(MP3FileInfo.Name) + "_" + index.ToString() + ".wav");
            }

            //Initialize the writers
            FileWriters = new WaveFileWriter[WaveFormatConversionStream_.WaveFormat.Channels];
            for (int index = 0; index < WaveFormatConversionStream_.WaveFormat.Channels; index++)
            {
                FileWriters[index] = new WaveFileWriter(ListFilesOut[index], SaveWaveFormatMono);
            }

            TempStream = new MemoryStream(int.Parse("" + WaveFormatConversionStream_.Length));
            WaveFileWriter NewWriter = new WaveFileWriter(TempStream, WaveFormatConversionStream_.WaveFormat);
            byte[] BUFFER = new byte[1024];
            int ReadLength = WaveFormatConversionStream_.Read(BUFFER, 0, BUFFER.Length);
            while (ReadLength != -1 && ReadLength > 0)
            {
                NewWriter.Write(BUFFER, 0, ReadLength);
                ReadLength = WaveFormatConversionStream_.Read(BUFFER, 0, BUFFER.Length);
            }
            NewWriter.Flush();

            TempStream.Position = 0;
            readerWAV = new WaveFileReader(TempStream);

            float[] buffer = readerWAV.ReadNextSampleFrame();

            while(buffer != null && buffer.Length > 0)
            {
                for(int i = 0; i < buffer.Length; i++)
                {
                    FileWriters[i].WriteSample(buffer[i]);
                }
                buffer = readerWAV.ReadNextSampleFrame();
            }
        }
        catch (Exception em1)
        {
            throw em1;
        }
        finally
        {

            try
            {
                //Flush each writer and close
                for (int writercount = 0; writercount < FileWriters.Length; writercount++)
                {
                    FileWriters[writercount].Flush();
                    FileWriters[writercount].Close();
                    FileWriters[writercount].Dispose();
                }
            }
            catch
            {

            }

            try { readerWAV.Dispose(); readerWAV = null; }
            catch { }

            try { WaveFormatConversionStream_.Dispose(); WaveFormatConversionStream_ = null; }
            catch { }

            try { PCMStream.Dispose(); PCMStream = null; }
            catch { }

            try { readerMP3.Dispose(); readerMP3 = null; }
            catch { }

            try
            {
                TempStream.Close(); TempStream.Dispose();
            }
            catch
            {

            }
        }
            return ListFilesOut.ToArray();
        }
    }
} 
```

# php - mac os上的Cakephp烘焙视图问题

> ID：12075064
> 
> 赞同：0
> 
> 时间：2012-08-22T14:12:17.970
> 
> 标签：php, cakephp, scaffolding

我是蛋糕新手，在烘焙时遇到了一些问题...我在 MAC OS 上的 MAMP 服务器上使用 cake php 2.2.1。我已经关闭了复数/单数感染器......我试着烤一些桌子：

```
CREATE TABLE users (
    id INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    password CHAR(40) NOT NULL,
    email VARCHAR(40) NOT NULL,
    group_id INT(11) NOT NULL,
    created DATETIME,
    modified DATETIME
);# MySQL returned an empty result set (i.e. zero rows).

CREATE TABLE users_groups (
    id INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    created DATETIME,
    modified DATETIME
);# MySQL returned an empty result set (i.e. zero rows).

CREATE TABLE novosti (
    id INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    url VARCHAR(255) NOT NULL UNIQUE KEY,
    user_id INT(11) NOT NULL,
    title VARCHAR(255) NOT NULL,
    body TEXT,
    published INT(1) DEFAULT 1,
    created DATETIME,
    modified DATETIME
);# MySQL returned an empty result set (i.e. zero rows).

CREATE TABLE meta (
    id INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    controller VARCHAR(255) NOT NULL UNIQUE KEY,
    action_name VARCHAR(255) NOT NULL,
    action_id VARCHAR(255),
    title VARCHAR(255) NOT NULL,
    keywords VARCHAR(255) NOT NULL,
    description VARCHAR(255) NOT NULL,
    created DATETIME,
    modified DATETIME
);# MySQL returned an empty result set (i.e. zero rows). 
```

因此，当我“全部烘烤蛋糕”-“users_groups”时，我没有收到错误，但是如果“全部烘烤蛋糕”其他 3 个表我得到了同样的错误，所以我得到了一个模型和一个控制器文件，但没有得到视图文件......所以问题出在烘焙视图文件中。这是我的控制台日志：

```
What would you like to Bake? (D/M/V/C/P/F/T/Q) 
> v   
---------------------------------------------------------------
Bake View
Path: /Applications/MAMP/htdocs/app/View/
---------------------------------------------------------------
Use Database Config: (default/test) 
[default] > 
Possible Controllers based on your current database:
---------------------------------------------------------------
 1\. Meta
 2\. Novosti
 3\. Users
 4\. UsersGroups
Enter a number from the list above,
type in the name of another controller, or 'q' to exit  
[q] > 1
Would you like bake to build your views interactively?
Warning: Choosing no will overwrite Meta views if it exist. (y/n) 
[n] > y
Would you like to create some CRUD views
(index, add, view, edit) for this controller?
NOTE: Before doing so, you'll need to create your controller
and model classes (including associated models). (y/n) 
[y] > y
Would you like to create the views for admin routing? (y/n) 
[n] > n
Error: Table action for model Action was not found in datasource default.
#0 /Applications/MAMP/htdocs/lib/Cake/Model/Model.php(3180): Model->setSource('action')
#1 /Applications/MAMP/htdocs/lib/Cake/Model/Model.php(1301): Model->getDataSource()
#2 /Applications/MAMP/htdocs/lib/Cake/Model/Model.php(1389): Model->schema()
#3 /Applications/MAMP/htdocs/lib/Cake/Model/Model.php(1375): Model->hasField('title', false)
#4 /Applications/MAMP/htdocs/lib/Cake/Model/Model.php(863): Model->hasField(Array)
#5 /Applications/MAMP/htdocs/lib/Cake/Console/Command/Task/ViewTask.php(459): Model->__get('displayField')
#6 /Applications/MAMP/htdocs/lib/Cake/Console/Command/Task/ViewTask.php(284): ViewTask->_associations(Object(Meta))
#7 /Applications/MAMP/htdocs/lib/Cake/Console/Command/Task/ViewTask.php(223): ViewTask->_loadController()
#8 /Applications/MAMP/htdocs/lib/Cake/Console/Command/Task/ViewTask.php(90): ViewTask->_interactive()
#9 /Applications/MAMP/htdocs/lib/Cake/Console/Command/BakeShell.php(110): ViewTask->execute()
#10 /Applications/MAMP/htdocs/lib/Cake/Console/Command/BakeShell.php(131): BakeShell->main()
#11 /Applications/MAMP/htdocs/lib/Cake/Console/Command/BakeShell.php(131): BakeShell->main()
#12 /Applications/MAMP/htdocs/lib/Cake/Console/Shell.php(393): BakeShell->main()
#13 /Applications/MAMP/htdocs/lib/Cake/Console/ShellDispatcher.php(201): Shell->runCommand(NULL, Array)
#14 /Applications/MAMP/htdocs/lib/Cake/Console/ShellDispatcher.php(69): ShellDispatcher->dispatch()
#15 /Applications/MAMP/htdocs/app/Console/cake.php(33): ShellDispatcher::run(Array)
#16 {main} 
```

帮助PLZ伙计们％）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:23:14.453

我只是有一个类似的问题。在您的“元”表中，您有一个名为“action_id”的字段。Cake 正在尝试与名为操作的表/模型建立关联。看起来你错过了那张桌子。创建您的操作表并尝试。我也看到了另一个我遇到的问题。Cake 喜欢让你拥有最少的 id、name、created 和 modified。有时它可以在没有名称的情况下工作，但是当我没有它时我会看到问题。

祝你好运！

吉姆

# php - ZF Datagrid 编辑表单验证失败导致忽略元素

> ID：12075066
> 
> 赞同：0
> 
> 时间：2012-08-22T14:12:29.733
> 
> 标签：php, zend-framework, zfdatagrid

我有实体的编辑表格。有元素

```
 $feedback = new FeedbackViewer('Feedback');
    $feedback->setLabel('Feedback')->setRequired(false);
    $feedback->setPostId($this->testimonialId);
    $feedback->setAppId($this->config->testimonials->appId);
    $feedback->setIgnore(true);
    $this->addElement($feedback); 
```

此反馈查看器使用另一个 zf 数据网格加载 iframe，该数据网格在表单内显示反馈。我在 ZF 数据网格中使用这种形式

```
$entityId = $this->getRequest()->getParam('edit');
        if ($entityId) {
            $entityForm = call_user_func($formCallback, $entityId);
            $form->setUsePreDefinedFormElements(true);
            $form->setForm($entityForm);
        } 
```

但 ZF 数据网格在保存操作后触发错误验证失败。删除反馈元素使其正确保存。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:33:54.133

```
 $grid->setForm($form);
                if($action != 'show') {
                $form->getForm()->getElement('form_reset')->setLabel(null);
                $form->getForm()->getElement('form_submit')->setLabel(null);

                $gridParam = $this->getRequest()->getParam('grid');
                $startParam = $this->getRequest()->getParam('start');

                if ($gridParam) {
                        if ($gridParam == 'all') {
                                $gridParam = 'index';
                        }

                        // Attach to event listener custom redirect action
                        $grid->listenEvent('crud.after_update', array($this, 'setGridRedirectCallback'), array('action' => $gridParam, 'page' => $startParam));
                        $grid->listenEvent('crud.after_delete', array($this, 'setGridRedirectCallback'), array('action' => $gridParam));
                        $form->getForm()->getElement('form_reset')->setAttribs(array('onclick' => 'window.location.href = "/admin/' . $gridParam . (($startParam) ? '/start/' . $startParam : '') . '";'));
                } 
```

我通过将其放入 If 标记中解决了这个问题，但找不到更好的解决方案。

# ms-access - 非 Recordsource - 不随行更新

> ID：12075067
> 
> 赞同：0
> 
> 时间：2012-08-22T14:12:30.060
> 
> 标签：ms-access, ms-access-2010, continuous-forms

我有一个表格，用于将信息输入到表格中。

表定义：

```
Field0 - AutoNumber
Field1 - Text
Field2 - Number (Loose Referential Integrity)
Field3 - Number (Loose Referential Integrity) 
```

控制 - 记录来源：

```
TextBox - Field1
ComboBox1 - `Unbound`
ComboBox2 - Field2
ComboBox3 - Field3 
```

关于表格：

```
New Record - ComboBox1 defines the selections available in ComboBox2
Edit/View Record - ComboBox1.Value is deduced by the ComboBox2.Value 
```

最初，这个表单是用单表单布局设计的，但最终用户想要更多的连续表单布局，现在当我查看值列表时，ComboBox1 是所有相同的值`Rows`。我最初是使用`Form_Current`事件来处理向后的继承，以从 ComboBox2 派生 ComboBox1 的值。这不像最初是单一表格时那样工作。

如何将 Single-Form Form_Current 方法迁移到 Continuous Form 逻辑，以便将每一行作为其自己的单个实体进行评估？

目前，如果我查看单行，它会从 ComboBox2 评估 ComboBox1，但它会评估连续表单中的所有行，而不仅仅是我当前所在的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:14:54.263

这是一个不断出现的问题。您不能明智地以连续形式使用未绑定的控件。根据您在做什么，有各种解决方法。最好的办法通常是将编辑留给弹出式表单。

替代方法包括将文本框设置为绑定值并仅将组合框标记为“编辑某某”。

# sql - 如果所有孩子都符合条件，则选择父母

> ID：12075068
> 
> 赞同：11
> 
> 时间：2012-08-22T14:12:32.533
> 
> 标签：sql, sql-server-2008-r2

我有这样的表设置：

```
Parent
------
id, ...

Child
-----
id, parent_id, x, y 
```

*如果 Child 中包含给定 parent_id 的所有*行都满足涉及 x 和 y 的标准（在我的情况下为 x = y），我想找到父母或不同的 parent_id（s ）。

例如：

```
Parent
------
id
 1
 2
 3

Child
id, parent_id, x, y
1,      1,     2, 3
2,      1,     3, 4
3,      2,     5, 5
4,      2,     6, 7
5,      3,     8, 8
6,      3,     9, 9 
```

将导致 3。目前，我有一个查询，可以找到*任何*孩子符合条件的 parent_ids。然后，如果所有孩子都符合标准，我会使用它来检索这些记录并在代码中检查它们。使用示例数据，我得到 parent_id 2 和 3，得到两个包含所有子项的父记录，并进行评估。如果可能的话，我想用一个查询来做到这一点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T14:17:21.457

您可以使用`NOT EXISTS`

```
SELECT id 
FROM Parent p
WHERE NOT EXISTS
(
   SELECT 1 FROM Child c
   WHERE c.parent_Id = p.id
   AND c.x <> c.y
) 
```

编辑：这是 sql-fiddle：[http ://sqlfiddle.com/#!3/20128/1/0](http://sqlfiddle.com/#!3/20128/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:17:25.713

这是你需要的吗？

```
 select id from parent where id not in(
    select parent_id from child 
    where x<>y
    group by parent_id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T11:22:08.827

应该先加入2张桌子，因为父母没有满足的孩子

并且应该为 pa_id 列添加索引

```
SELECT DISTINCT pa.id 
FROM pa INNER JOIN c ON c.pa_id = pa.id 
WHERE NOT EXISTS ( SELECT 1 FROM c WHERE c.parent_Id = p.id and c.x <> c.y ) 
```

# cloudbees - 通过 CloudBees 上的 Github 拉取请求触发 iOS 构建/测试作业

> ID：12075073
> 
> 赞同：1
> 
> 时间：2012-08-22T14:12:55.310
> 
> 标签：cloudbees

我希望 Jenkins 在 Github 拉取请求上评论合并是通过还是失败（很像 Travis CI）。我知道这是[BuildHive](http://wiki.cloudbees.com/bin/view/DEV/BuildHive)的一个功能。但是，我在 BuildHive 上找不到使用[客户提供的 slaves](http://wiki.cloudbees.com/bin/view/DEV/Customer+Provided+Slaves)的选项。我的问题是双重的：

1.  是否可以选择将构建限制为 BuildHive 上客户提供的从站？
2.  有没有办法可以使用 DEV@cloud 启用对拉取请求的评论（实际作业必须在客户提供的从属设备上运行）？如果是这样，你能指出我正确的方向来进行这个设置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:56:39.700

DEV@cloud 可以像 BuildHive 一样通过一些额外的配置来验证拉取请求。见[http://wiki.cloudbees.com/bin/view/DEV/Github+Pull+Request+Validation](http://wiki.cloudbees.com/bin/view/DEV/Github+Pull+Request+Validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T02:00:12.933

Answering in the order of your questions:

1.  BuildHive uses the Validated Merge plugin for Git from Jenkins Enterprise to enable Jenkins to perform pull requests and run the builds before doing a push to the main repo. That said, currently you cannot use Customer Provided Executors with BuildHive.
2.  DEV@cloud: Normally, all Jenkins Enterprise plugins are available in a paid tier of DEV@cloud. However, this plugin is not - as the plugin sets up a git server within Jenkins - not easily achievable in a cloud setup. I have created a [ticket](https://cloudbees.zendesk.com/tickets/5091) on CloudBees support requesting that the plugin be made available and the engineering team will investigate into delivering the feature.

Meanwhile, if you like you can use [Jenkins Enterprise](http://www-staging.cloudbees.com/jenkins-enterprise-by-cloudbees-download.cb) to use the feature (however it is an on-premises solution).

# javascript - 有没有办法在一个延迟失败后继续？

> ID：12075074
> 
> 赞同：2
> 
> 时间：2012-08-22T14:12:58.063
> 
> 标签：javascript, jquery, ajax, jquery-deferred

我正在处理未知数量的 ajax 请求。请求可能会在 404 中失败。这会导致整个链失败。

有没有办法在一个延迟失败后继续？

```
var deferreds = [];
// fill deferreds with a number of ajax requests.
$.when.apply($, deferreds)
 .done(function(){
     // handle done
 }).fail(function(){
     // handle fail
     // would like to fix/resolve the failed deferred and continue with the rest
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:22:51.010

您必须创建自己的延迟对象，等待其他延迟对象成功或失败。

```
var myDeferred = $.Deferred();
var origDeferred = $.ajax(...);
// if request is ok, i resolve my deferred
origDeferred.done(function() {
  myDeferred.resolve.apply(this, arguments);
});
// if request failed, i also resolve my deferred
origDeferred.fail(function() {
  myDeferred.resolve.apply(this, arguments);
}); 
```

在这种情况下，您的延期将始终得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T02:42:25.233

这样做怎么样！

```
var defArr = []; // Array of Deferreds

var recur = function(){
  $.when.apply($, defArr).done(function(){
    // Only do what event, when all are done, fail or resolved
    $.get("/media.php?i=done");
  }).fail(function(oDef){
    // Remove fail def from defArr
    defArr.splice(defArr.indexOf(oDef), 1)
    // do it again with all defArr into $.when
    recur();
  });
}

recur(); 
```

# javascript - 屏幕旋转时jQuery自动运行

> ID：12075075
> 
> 赞同：0
> 
> 时间：2012-08-22T14:12:59.380
> 
> 标签：javascript, jquery, mobile, resize

我对 jQuery 和 JS 有点陌生，我正在尝试使文本大小可调整为移动网站上的屏幕宽度

我在网上搜索答案并想出了这个解决方案

```
 (function($) {
                $.fn.textfill = function(maxFontSize) {
                    maxFontSize = parseInt(maxFontSize, 10);
                    return this.each(function(){
                        var ourText = $("span", this),
                            parent = ourText.parent(),
                            maxHeight = parent.height(),
                            maxWidth = parent.width(),
                            fontSize = parseInt(ourText.css("fontSize"), 10),
                            multiplier = maxWidth/ourText.width(),
                            newSize = (fontSize*(multiplier-0.1)),
                            textHeight = ourText.height();
                            if(newSize > 35){
                                ourText.css("fontSize",35);
                            }
                            else{
                                ourText.css(
                                    "fontSize", 
                                    (maxFontSize > 0 && newSize > maxFontSize) ? 
                                        maxFontSize : 
                                        newSize
                                );
                            }
                    });
                };
            })(jQuery);

            $(document).ready(function() {
                    $('.jtextfill').textfill({ maxFontPixels: 36 });
            }); 
```

但是只有当页面第一次重新加载而不是在窗口调整大小时，所以我将它全部输入到一个函数中并添加

```
 $(document).ready(function () {
            resizeTextHeb();
            $(window).resize(function() {
                resizeTextHeb();
            });
        }); 
```

但现在在 iPhone/iPad/Android 等设备上，它不会在屏幕旋转时重新加载该功能。屏幕旋转不作为窗口调整大小吗？我该怎么做才能让它发挥作用？谢谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:43:21.880

您可以为此使用媒体查询，而无需使用 js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:37:12.873

您的函数名称在主要问题上是“resizeTextHeb()”，任何函数名称问题！？我建议您使用 google chrome js 控制台进行错误报告或 FF 浏览器上的错误控制台。，无论如何，如果它确实提醒你，那么主要问题是你的功能，而不是定位方法。

# objective-c - 汇编函数中的 EXC_BAD_ACCESS

> ID：12075076
> 
> 赞同：0
> 
> 时间：2012-08-22T14:13:03.117
> 
> 标签：objective-c, assembly

我正在尝试在程序集中编写一个可从 Objective-C 代码调用的函数。我通过设置`%rax`和直接返回得到了简单的结果，但是当我尝试使用堆栈来存储局部变量时，我得到`EXC_BAD_ACCESS`. 有人可以看看这个并告诉我出了什么问题吗？我的程序集如下所示：

```
.global _fn
_fn:
pushq %rbp
movq %rsp, %rbp
subq 0x8, %rsp
addq 0x8, %rsp
popq %rbp
ret 
```

Xcode 转储此内容并指示崩溃发生在`sub 0x8,%rsp`我从以下位置调用`fn`时`main`：

```
0x0000000100020000  <+0000>  push   %rbp
0x0000000100020001  <+0001>  mov    %rsp,%rbp
0x0000000100020004  <+0004>  sub    0x8,%rsp
0x000000010002000c  <+0012>  add    0x8,%rsp
0x0000000100020014  <+0020>  pop    %rbp
0x0000000100020015  <+0021>  retq 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:27:24.110

仅仅从 8 中减去`rsp`不应导致异常。

您很可能需要在常量前面加上美元符号。如果不这样做， (g)as 会将这些数字视为相应地址的内存操作数。

在 x86 平台上访问地址 8 处的内存通常与 NULL 指针取消引用一样好。

# css - 使用 CSS 包装盒

> ID：12075082
> 
> 赞同：10
> 
> 时间：2012-08-22T14:13:13.157
> 
> 标签：css

我正在尝试使用 CSS 布局解决经典的盒子包装/背包问题。

我想以一种尽量减少元素之间空白的方式排列许多盒子，就像这样；

[![描述我想要达到的目标的图片](../Images/359a7906327cc0b0d444adc1a362de8b.png)](https://i.stack.imgur.com/UHgrN.png)
[（来源：[tydus.net](http://tydus.net/img/xaZll.png)）]

CSS3 列在这里工作得很好——盒子是按顺序排列的，但是所有的空白都被有效地消耗了。有一个很小的问题 - 盒子是“剪切”的，或者跨越多个列。不能那样做。

我在一些盒子之后使用了经典的 div.clearer，但这没有效果 - 盒子仍然跨越那些 CSS3 列。有一个 column-span CSS 属性，但尚不支持任何浏览器；(

或者，我可以自己定义列并手动排列盒子，但实际上盒子的高度变化非常频繁。

最后一个问题：有没有办法使用纯 CSS 以最小化盒子之间的空白的方式排列盒子？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:13:46.130

虽然我自己还没有尝试过，但一个可能的答案可能是使用[jQuery Masonry 插件](http://masonry.desandro.com/)。这似乎符合您所说的要求。

在纯 CSS 和 HTML 中执行此操作将非常困难，您可能不得不放弃一些愿望/要求......

# sql - SQL 查询以提取客户 1 天间隙出生日期的平均值

> ID：12075083
> 
> 赞同：0
> 
> 时间：2012-08-22T14:13:22.890
> 
> 标签：sql, sql-server, sql-server-2008

我有一个下表的要求。

条件：-
1> 我必须采取平均工资克林茨，谁有 1 天的出生日期差距。
2> 如果客户之间的差距没有最近的 1day dob 的差距，则无需考虑该客户。

请看结果。

桌子：

```
ClientID    ClinetDOB's         Slaries
1           2012-03-14              300  
2           2012-04-11              400  
3           2012-05-09              200  
4           2012-06-06              400  
5           2012-07-30              600  
6           2012-08-14              1200  
7           2012-08-15              1800  
8           2012-08-17              1200  
9           2012-08-20              2400  
10          2012-08-21              1500 
```

结果应该看起来像这样：-

```
ClientID    ClinetDOB's         AVG(Slaries)
7           2012-08-15              1500        --This avg of 1200,1800(because clientID's 6,7 have dob's have 1day gap)    
10          2012-08-20              1950        --This avg of 2400,1500(because clientID's 9,10 have dob's have 1day gap)) 
```

请帮忙。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:57:12.090

自联接会将当前记录与具有昨天日期的所有记录连接起来。在此上下文中，group by 允许计算具有相同日期的许多记录。`t1`需要单独核算，所以Salary后面加上，count(*)递增计算平均值。

[这是带有示例的 Sql Fiddle](http://sqlfiddle.com/#!3/26fab/5)。

```
select t1.ClientID, 
       t1.ClinetDOBs,
       (t1.Slaries + sum (t2.Slaries)) / (count (*) + 1) Avg_Slaries
  from table1 t1
 inner join table1 t2
    on t1.ClinetDOBs = dateadd(day, 1, t2.ClinetDOBs)
 group by t1.ClientID, 
       t1.ClinetDOBs,
       t1.Slaries 
```

# android - 创建激活后在后台运行的温度感应 Android 应用程序

> ID：12075084
> 
> 赞同：0
> 
> 时间：2012-08-22T14:13:33.463
> 
> 标签：android, battery, temperature

我正在开发一个 Android 应用程序，它将跟踪手机电池的温度。当电池的温度超过某个特定值时，另一个活动将发出警报，即警报。

如何让我的应用程序跟踪电池温度并将该信息发送到另一个活动（警报系统）以比较值并确定是否触发警报？

我正在使用 Eclipse 和 Android 4.1.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:16:50.333

有一个传感器。对于安卓：

[http://developer.android.com/reference/android/os/BatteryManager.html#EXTRA_TEMPERATURE](http://developer.android.com/reference/android/os/BatteryManager.html#EXTRA_TEMPERATURE)

也相关：[Android 硬件电池温度，传感器在哪里？](https://stackoverflow.com/questions/7713415/android-hardware-battery-temperature-where-is-the-sensor)

# gtk - 如何修复“错误：gdk-pixbuf/gdk-pixdata.h：没有这样的文件或目录？”

> ID：12075086
> 
> 赞同：0
> 
> 时间：2012-08-22T14:13:45.553
> 
> 标签：gtk, vala, gdk, gdkpixbuf

我需要旋转一个 Pixbuf。vala 代码包含

```
using Gst, GLib, Posix, Sqlite, Gdk;
public class RotateSaveImage
{
    public void RotateSaveImage(string input, string output)
    {
        var img = new Pixbuf.from_file(input);
        var rotate_image = img.rotate_simple(PixbufRotation.CLOCKWISE);
        rotate_image.save(output, "jpeg");
    }
} 
```

生成文件包含

> test_VALAFLAGS = --vapidir=@VAPIDIR@ --pkg gstreamer-0.10 --pkg glib-2.0 --pkg gio-2.0 --pkg posix --thread --pkg gstreamer-app-0.10 --pkg sqlite3 --pkg gtk+ -3.0

不应该 --pkg gtk+-3.0 添加 gdk-pixbuf/gdk-pixdata.h 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:45:02.400

Autotools 将仅使用 valac 将 Vala 代码转换为 C，然后将使用它对构建 C 的支持来实际编译为机器代码。这意味着您需要将相关信息添加到*_CFLAGS 和*_LDFLAGS。通常这是通过在您的 configure.ac 中添加类似这样的内容来完成的：

```
PKG_CHECK_MODULES(GIO_PIXBUF, gio-2.0)
AC_SUBST(GIO_CFLAGS)
AC_SUBST(GIO_LIBS)
PKG_CHECK_MODULES(GSTREAMER, gstreamer-0.10)
AC_SUBST(GSTREAMER_CFLAGS)
AC_SUBST(GSTREAMER_LIBS)
PKG_CHECK_MODULES(GSTREAMER_APP, gstreamer-app-0.10)
AC_SUBST(GSTREAMER_APP_CFLAGS)
AC_SUBST(GSTREAMER_APP_LIBS)
PKG_CHECK_MODULES(SQLITE, sqlite3)
AC_SUBST(SQLITE_CFLAGS)
AC_SUBST(SQLITE_LIBS)
PKG_CHECK_MODULES(GTK, gtk+-3.0)
AC_SUBST(GTK_CFLAGS)
AC_SUBST(GTK_LIBS) 
```

Makefile.am 中的类似内容：

```
test_VALAFLAGS = --vapidir=@VAPIDIR@ --pkg gstreamer-0.10 --pkg glib-2.0 --pkg gio-2.0 --pkg posix --thread --pkg gstreamer-app-0.10 --pkg sqlite3 --pkg gtk+-3.0

test_CFLAGS = $(GIO_CFLAGS) $(GSTREAMER_CFLAGS) $(GSTREAMER_APP_CFLAGS) $(SQLITE_CFLAGS) $(GTK_CFLAGS)

test_LDFLAGS = $(GIO_LIBS) $(GSTREAMER_LIBS) $(GSTREAMER_APP_LIBS) $(SQLITE_LIBS) $(GTK_LIBS) 
```

# android - 如何将项目库保留在项目结构中？

> ID：12075091
> 
> 赞同：0
> 
> 时间：2012-08-22T14:13:59.190
> 
> 标签：android, android-library

我`ActionBarSherlock`在我的项目中使用项目作为库。我想将它保存在版本控制系统中，但由于某种原因我不能将它存储在项目的文件夹结构中。我试图将库的文件夹移动到`my_project/libs/`文件夹，但事情就是无法编译。这是否意味着禁止将“项目作为库”保留在项目文件夹中？如果不是 - 如何让事情发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:43:12.137

您可以将两个项目都放在父目录中，而不是尝试将 ABS 放入您的项目中。

这是一个[例子](http://code.google.com/p/iosched/source/browse/)。

注意 ABS 库项目是如何在`gi/libprojects/abs`和 android 应用程序项目在`git/android`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:20:43.700

我是否理解正确，您希望 ABS Lib位于项目*内*的 Libs 文件夹中？

为什么？为此，您必须重命名 ABS 项目和清单的所有包名。我什至不确定这是否会奏效。如果 ABS 是一个 .jar 文件，那就很容易了。但是另一个项目中的一个Android项目......我不建议你这样做。

# matlab - MATLAB 中的 deconv() 函数不会反转 conv() 函数

> ID：12075093
> 
> 赞同：1
> 
> 时间：2012-08-22T14:13:59.840
> 
> 标签：matlab, convolution

我想在 MATLAB 中将包含两个尖峰（称为 Spike）的时间序列与指数内核（k）进行卷积。将卷积响应称为“calcium1”。我想使用与内核的反卷积来恢复原始尖峰（“reconSpike”）数据。我正在使用以下代码。

```
k1=zeros(1,5000);
k1(1:1000)=(1.1.^((1:1000)/100)-(1.1^0.01))/((1.1^10)-1.1^0.01);
k1(1001:5000)=exp(-((1001:5000)-1001)/1000);
k1(1)=k1(2);

spike = zeros(100000,1);
spike(1000)=1;
spike(1100)=1;

calcium1=conv(k1, spike);
reconSpike1=deconv(calcium1, k1); 
```

问题是，在 reconSpike 结束时，我得到了一大块原始数据中没有的非常大的高振幅波。任何人都知道为什么以及如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:58:46.537

您**永远**不应期望去卷积可以简单地**撤消**卷积。这是因为反卷积是一个[不适定问题](http://en.wikipedia.org/wiki/Well-posed_problem)。

问题来自卷积是一个积分算子的事实（在连续情况下，您写下一个积分`int f(x) g(x-t) dx`或类似的东西）。现在，计算积分的逆运算（反*卷积*）是应用微分。不幸的是，差分放大了输入中的噪声。因此，如果您的积分只有轻微的错误（并且浮点不准确可能已经足够了），那么在微分后您最终会得到完全不同的结果。

有一些可能如何减轻这种放大，但这些必须在每个应用程序的基础上进行尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:42:03.270

您遇到了 MATLAB 反卷积算法的问题，或浮点精度问题（或两者兼而有之）。我怀疑它是浮点精度，因为在反卷积期间发生了所有除法和减法，但可能值得直接联系 MathWorks 询问他们的想法。

根据 MA​​TLAB 文档，如果`[q,r] = deconv(v,u)`, then`v = conv(u,q)+r`也必须成立（即 的输出`deconv`应始终满足这一点）。在您的情况下，这是严重违反的。将以下内容放在脚本的末尾：

```
[reconSpike1 rem]=deconv(calcium1, k1);
max(conv(k1, reconSpike1) + rem - calcium1) 
```

我得到 6.75e227，它不为零；-) 接下来尝试将长度更改`spike`为 6000；你会得到一个小数字（~1e-15）。逐渐增加长度`spike`；误差会越来越大。请注意，如果您只将一个非零元素放入尖峰，则不会发生此行为：错误始终为零。这说得通; MATLAB 需要做的就是将所有内容除以相同的数字。

这是一个使用随机向量的简单演示：

```
v = random('uniform', 1,2,100,1);
u = random('uniform', 1,2,100,1);
[q r] = deconv(v,u);
fprintf('maximum error for length(v) = 100 is %f\n', max(conv(u, q) + r - v))
v = random('uniform', 1,2,1000,1);
[q r] = deconv(v,u);
fprintf('maximum error for length(v) = 1000 is %f\n', max(conv(u, q) + r - v)) 
```

输出是：

```
maximum error for length(v) = 100 is 0.000000
maximum error for length(v) = 1000 is 14.910770 
```

我不知道你真正想要完成什么，所以很难提供进一步的建议。但我只想指出，如果您遇到脉冲堆积的问题，并且您想提取有关每个脉冲的信息，这可能是一个棘手的问题。我认识一些从事此类工作的人，所以如果您需要一些参考资料，请告诉我，我会问他们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:28:09.343

如果你保持尖峰向量与 k1 向量相同的长度，它对我有用。IE：

```
 k1=zeros(1,5000);
    k1(1:1000)=(1.1.^((1:1000)/100)-(1.1^0.01))/((1.1^10)-1.1^0.01);
    k1(1001:5000)=exp(-((1001:5000)-1001)/1000);
    k1(1)=k1(2);

    spike = zeros(5000, 1);
    spike(1000)=1;
    spike(1100)=1;

    calcium1=conv(k1, spike);
    reconSpike1=deconv(calcium1, k1); 
```

你有什么理由让它们与众不同？

# haskell - GADT 类型的奇怪类型推理行为（对于固定长度向量）

> ID：12075100
> 
> 赞同：6
> 
> 时间：2012-08-22T14:14:05.277
> 
> 标签：haskell, ghc, typeclass, gadt

我有以下 GADT

```
data Vec n a where
    T    :: Vec VZero a
    (:.) :: (VNat n) => a -> (Vec n a) -> (Vec (VSucc n) a) 
```

使用类对固定长度向量进行建模

```
class VNat n

data VZero
instance VNat VZero

data VSucc n
instance (VNat n) => VNat (VSucc n) 
```

我试图在向量上编写一个附加函数：

```
vAppend :: Vec n b -> Vec m b -> Vec nm b
vAppend T T = T   -- nonsense, -- its just a minimal def for testing purposes 
```

类型检查器不喜欢它：

```
 Could not deduce (nm ~ VZero)
    from the context (n ~ VZero)
      bound by a pattern with constructor
                 T :: forall a. Vec VZero a,
               in an equation for `vAppend'
      at VArrow.hs:20:9
    or from (m ~ VZero)
      bound by a pattern with constructor
                 T :: forall a. Vec VZero a,
               in an equation for `vAppend'
      at VArrow.hs:20:11
      `nm' is a rigid type variable bound by
           the type signature for vAppend :: Vec n b -> Vec m b -> Vec nm b
           at VArrow.hs:20:1
    Expected type: Vec nm b
      Actual type: Vec VZero b
    In the expression: T
    In an equation for `vAppend': vAppend T T = T
Failed, modules loaded: Vectors. 
```

谁能解释类型变量的 GHC 问题`nm`？`~`错误消息中的确切含义是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T15:06:46.197

就目前而言，您是说您可以通过附加*任意*两个向量来获得*任意长度的向量。*如果您废弃应该在给定任意两个向量的情况下产生长度为 VZero 的向量的签名推断——这是有道理的，但不是您想要的。您需要一个与您的 s 关联的类型来约束on 向量的结果类型。自然的方式是某种类型的家族，但我无法在课堂上得到它。无论如何，通过扩展的提升类型（在 ghc-7.4 及更高版本中）更清楚地实现了这一整套想法——尽管也许你是故意试图避免这种扩展？这摆脱了令人讨厌的未封闭字符*`ghc``vAppend``Plus``VNat``vAppend``VNat``DataKinds``VSucc`，它承认`VSucc Char`等等。如果你不想避免`DataKinds`，那么你的模块可能看起来像这样：*

 *```
{-#LANGUAGE  GADTs, TypeFamilies, DataKinds, TypeOperators#-}

data Vec n a where                 -- or: data Vec :: VNat -> * -> * where
    T    :: Vec VZero a
    (:.) :: a -> Vec n a -> Vec (VSucc n) a 
                                   -- no class constraint

data VNat  =  VZero |  VSucc VNat  -- standard naturals

type family n :+ m :: VNat         -- note the kind of a ":+" is a promoted VNat
type instance VZero :+ n = n
type instance VSucc n :+ m = VSucc (n :+ m)

vAppend :: Vec n b -> Vec m b -> Vec (n :+ m) b
vAppend T v = v  
vAppend (a :. u) v  = a :. (vAppend u v) 
```

编辑：看着这个，我突然想到`Plus`- 或`:+`- 类型系列的行应该明确限制参数的种类

```
type family (n::VNat) :+ (m::VNat) :: VNat 
```

将诸如此类的垃圾类型拒之门外`Char :+ VZero`-也就是说，与过去喜欢使用`DataKinds`诸如`data VSucc n`. 此外，我们可以看到这两个实例完全指定了它，尽管我不知道编译器对此有多大用处。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-22T14:33:35.440

类型签名中的所有类型变量都是通用量化的。这意味着如果你说函数有类型

```
Vec n b -> Vec m b -> Vec nm b 
```

那么对于、和的任何选择`n`，此类型必须是有效的。特别是，例如，`m``nm``b`

```
Vec VZero Int -> Vec VZero Int -> Vec (VSucc VZero) Int 
```

也必须是您的函数的有效类型。但是，追加两个向量没有这样的通用类型。有约束`nm`，即`nm`类型级数和 的`n`总和`m`。你必须在函数的类型中表达这些约束，否则你会得到类型错误。

就您而言，GHC 抱怨在您的定义中，`nm`is 实际上`VZero`，因此您正在假设`nm`您的类型表明您不允许这样做。这`~`只是 GHC 类型相等的符号。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-22T15:31:23.837

通过对 GADT 的值进行模式匹配来编写函数时，GHC 在对每个子句进行类型检查时使用有关函数运行时预期行为的信息。您的`vAppend`函数只有一个子句，该模式匹配 type 的值和 type`Vec n b`的另一个值`Vec m b`。GHC 的理由是，如果在运行时`vAppend`应用于与模式匹配的实际参数`T`，则实际参数的实际类型必须是 form `Vec VZero b`，这是一种比`Vec n b`or提供更多信息的类型`Vec m b`。这种推理在 GHC 中实现的方式是，在对唯一子句 of 的 RHS 进行类型检查时`vAppend`，它记录了一个假设，该假设`n`肯定确实是`VZero`、书面`n ~ VZero`的，并且同样如此。`m ~ VZero`.

您为函数编写的类型规定了它必须履行的合同。您收到的错误消息是因为必须通过实施来履行的合同`vAppend`过于笼统。你是说给定两个长度为`n`和的向量`m`，`vAppend`必须产生一个可以被认为是*任意*大小的向量。实际上，GHC 注意到您的实现不履行此合同，因为您的 RHS 的类型 与 RHS`Vec VZero b`的预期类型不匹配`Vec nm b`，并且没有假设说`nm ~ VZero`. 事实上，GHC 告诉我们，唯一可用的假设是上一段中的假设。

您履行本合同的唯一可能方式是写成`undefined`您的条款的 RHS。这显然不是你想要的。获得正确类型的技巧`vAppend`是以某种方式将输出向量的大小与两个输入向量的各自大小相关联。这可能是这样的：

```
type family Plus n m
type instance Plus VZero m = m
type instance Plus (VSucc n) m = VSucc (Plus n m)

vAppend :: Vec n b -> Vec m b -> Vec (Plus n m) b
vAppend T T = T 
```

我们在这里所做的是，长度是由输入的长度决定的`vAppend`，通过类型上的一些函数调用`Plus`。在两个输入长度都是 的情况下`VZero`，我们知道这与和`Plus n m`相同。由于是第一类族实例的形状，GHC 知道它与. 因此，在这个分支中，GHC 需要一个 RHS 类型，我们可以很容易地构造它！`Plus VZero VZero``n ~ VZero``m ~ VZero``Plus VZero VZero``VZero``Vec VZero b`*

# eclipse - 为什么重新启动计算机会对 Java 构建路径造成严重破坏？

> ID：12075103
> 
> 赞同：2
> 
> 时间：2012-08-22T14:14:15.277
> 
> 标签：eclipse, buildpath

我确定我们都去过那里，我在 Eclipse 上有一个 JSF (Java) 项目，昨天构建得很好，我称之为退出过夜，关掉我的电脑，第二天再回来只是为了找到缺少的 JAR 错误，其中一些是由于实际缺少类，其他的我可以通过导航我的构建路径清楚地找到。那是怎么回事？当我不在时，Windows 是否在对我进行计划并重新索引文件或其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:42:13.203

所以这可能是依赖于 Eclipse Java EE Juno 的 IDE，但是在重新启动时它创建了我的 src 文件夹的副本作为库，这导致了一些 Hibernate - 重复映射错误

# iphone - 如何在 iphone sdk 中的 annotationView 上检测长手势

> ID：12075110
> 
> 赞同：0
> 
> 时间：2012-08-22T14:14:42.163
> 
> 标签：iphone, sdk

我正在研究 MapView 并且我想在 annotationView 上添加 longGesture 以删除特定的注释，为此我在委托中的每个 annotationView 上添加了 longGesture - (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id )annotation

但是 annoattaionView 没有检测到长手势。有没有办法在 mapview 的 AnnotationView 上添加长手势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:25:40.967

问题是`MKAnnotationView`已经有一个长的手势识别器来拖动它，因此根据持续时间（不确定拖动的持续时间），它将转到那个手势识别器，如果你不需要拖动，你可以简单地删除那个长手势识别器通过获取视图的所有手势识别器然后执行`isKindOfClass`for `UILongGesture`，删除它然后添加你自己的。

`UILongGesture`或者尝试在可能工作的低时间。

如果您不需要 MKAnnotationView 手势识别器的默认行为，您也可以像这样禁用注释视图：

`[myAnnotationView setEnabled:NO];`然后将您的识别器添加到注释视图。

希望有帮助。

# php - 值可以为空（空）的 SQL 语句

> ID：12075114
> 
> 赞同：0
> 
> 时间：2012-08-22T14:14:50.830
> 
> 标签：php, sql

我有一些搜索功能，允许用户从下拉列表中选择一个名称，或者在搜索字段中输入一个人名或其中的一部分（通配符功能）。

我遇到的问题是，如果使用下拉选项，则搜索字段将不会出现，反之亦然。

我尝试了如下一些 SQL（请注意变量代表通过表单发送的数据）：

```
SELECT id, name, age FROM player
    WHERE player.id = '$id'
        OR player.name LIKE '%$text%' 
```

使用上述内容时，通配符功能可以正常工作。

但是，如果您从下拉列表中选择一个玩家，则它会返回所有玩家。这是因为 for 的值`$text`是空的（空）并且 LIKE '%%' 表示选择所有内容，因此它会选择所有名称。

然后我尝试了以下方法：

```
SELECT id, name, age FROM player
    WHERE player.id = '$id'
        AND player.name LIKE '%$text%' 
```

现在下拉功能按预期工作，但通配符搜索不起作用。这是因为我假设 AND 要求两个语句都为真，并且因为`$id`当只指定通配符条目时什么都没有（空），条件永远不会为真。

任何人都可以帮助我使用一些 sql 以确保下拉列表和通配符搜索彼此隔离工作吗？

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:22:27.430

```
$params = ''

if($id !== ''){
  $params = "player.id = '$id'";
} else if($text !== ''){
  $params = "player.name LIKE '%$text%'";
}

$sql = "SELECT id,name,age FROM player WHERE {$params}";

mysql_query($sql);  //if using mysql_ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:18:13.957

有条件地要求`id`：

```
$idCondition = "";
if ($id) {
    $idCondition = "player.id = '$id' AND ";
}

$query = "SELECT id, name, age FROM player WHERE {$idCondition}player.name LIKE '%$text%'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:24:09.243

```
"SELECT id, name, age FROM player
WHERE (player.id = '$id' AND '$id' <> '')
    OR (player.name LIKE '%$text%' AND '$text' <>'')" 
```

# objective-c - 在 Objective-C 中下载和解析文本文件

> ID：12075119
> 
> 赞同：2
> 
> 时间：2012-08-22T14:15:09.070
> 
> 标签：objective-c, download

到目前为止，我已将应用程序数据以 plist 格式保存在远程服务器上。下载和解析这种格式相对容易：

```
NSURL *url = [NSURL URLWithString:@"http://www.mysite.com/data.plist"];
NSDictionary *plistData = [NSDictionary dictionaryWithContentsOfURL:url]; 
```

**如何使用 Objective-C 下载任意格式的文本文件？**

任意格式的一个例子是一个文件，它是由几个空行分隔的两部分 CSV 数据。当然我会提前知道格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:20:35.290

`-[NSString initWithContentsOfURL:encoding:error:`像这样使用

```
NSURL *url = [NSURL URLWithString:@"http://www.mysite.com/data.plist"];
NSError *error = nil;
NSString *text = [[NSString alloc] initWithContentsOfURL: url
                                                encoding: NSUTF8StringEncoding
                                                   error: &error]; 
```

这将为您提供您可以根据需要处理的文件内容。

# magento - 如何知道 Magento 以编程方式调用了什 么路由器？

> ID：12075120
> 
> 赞同：0
> 
> 时间：2012-08-22T14:15:13.530
> 
> 标签：magento

这是某个模块的 config.xml：

```
<config>
    <modules>
        <My_Example>
            <version>1.0.0.0</version>
        </My_Example>
    </modules>

    <frontend>
        <routers>
            <first>
                <use>standard</use>
                <args>
                    <module>My_Example</module>
                    <frontName>test</frontName>
                </args>
            </first>
            <second>
                <use>standard</use>
                <args>
                    <module>My_Example</module>
                    <frontName>test</frontName>
                </args>
            </second>
        </routers>
    </frontend>
</config> 
```

我**故意**创建了相同的部分。我在某处读过 magento 称为最后一个。但我想通过 *var_dump*在*测试控制器中获取这些信息。*是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:48:58.793

您可以通过以下方式在控制器中获取模块的路由名称：

```
Mage::app()->getRequest()->getRouteName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:20:40.550

您不能在 magento 中使用 var_dump。由于 php 内存限制，它将无法工作。Magento 有一些内置的调试功能。谷歌它以获取更多信息。

# javascript - 如何阻止 img src 在脚本中使用当前 URL 和 URL

> ID：12075124
> 
> 赞同：0
> 
> 时间：2012-08-22T14:15:39.083
> 
> 标签：javascript, image, url, html, src

我在标签中有一个图像，因此在单击此图像时，每次`div`单击此图像时，javascript 都会显示/隐藏另一个标签。`div`此脚本用于 Wordpress 上的小部件，因此它出现在网站的每个页面上。

问题是，此`div`标签内的图像不显示。我已右键单击“无图像”图标并选择“在新选项卡中打开图像”，并且 URL 显示： 而`www.DOMAIN.com/www.DOMAIN.com/image` 不是.`img src``www.DOMAIN.com/image`

如果我将其更改`src URL`为`=image`它可以工作，但如果我从任何其他页面尝试此操作，它也包含该页面，即 `www.DOMAIN.com/contact/image` 这不是找到图像的位置。

我可以在`div`标签、标签或`img`标签或类似的东西中放入一些编码来使用我指定的绝对位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:17:22.487

在你的属性`http://`前面使用。`src`例如，`src="http://DOMAIN.com/image`代替`src="DOMAIN.com/image"`.

# batch-file - 使用批处理脚本删除目录中除 .bak .$av 和 .pen 之外的所有文件

> ID：12075125
> 
> 赞同：0
> 
> 时间：2012-08-22T14:15:45.370
> 
> 标签：batch-file, extension-methods, delete-file

我想知道如何删除每个扩展名的文件（使用批处理脚本），但扩展名为 .bak、.$av 和 .pen 的文件除外

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:25:03.843

在尝试之前，请备份您的文件，这样您就不会永远丢失数据！

**注意：**使用风险自负，它会大量删除所有内容！

```
SET /p ExcludeFiles = What file type should be kept (NOT deleted)? Type the file name(s) inside parantheses. 

Example: (bak) or ($av pen)     

SET /p MapDrive = What drive letter is the folder in? 

Example: c or n  

SET /p Directory = Drag the folder you would like to modify into this command prompt then press ENTER.     

%MapDrive%:
cd %Directory%

attrib +a *.* /s
echo %date%
for %%i in %ExcludeFiles% do attrib -a *.%%i /s
echo %date%
del %Directory%\*.* /s /a:a /q

echo %date%
attrib +a %Directory%\*.* /s
echo %date% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:27:06.737

您没有指定要使用的操作系统或脚本语言，这会有所帮助。

然而，这里是一种通用类型的脚本，用相当通用的术语来说。

一种相当通用的方法是创建一个子文件夹，将要保留的文件复制或移动到子文件夹中，删除要清除的文件夹中的所有文件，然后将保存在子文件夹中的文件移回原始文件夹。

大多数删除文件类型的命令旨在让您指定要删除的文件，而不是您不想删除的文件。

实际上，对于这个问题，我现在想知道为什么这不是删除命令的一个很好的扩展。

现在，如果您需要执行文件树删除意味着遍历文件目录层次结构以删除您想要保留的文件之外的文件，那将更加困难。一种方法是遍历文件树并对每个目录执行相同的操作。

另一种选择是生成文件夹中所有文件的列表，并使用诸如 sed 之类的实用程序来修改文件列表，以便您创建一个临时脚本，然后执行该脚本。该脚本将由实用程序修改，以便从列表中删除您想要保留的那些文件，并且您想要删除的文件将在列表中修改该文件名的行以执行删除。

不过，在部署动态脚本执行方法之前，我肯定会做一些认真的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:09:39.320

使用 FINDSTR 忽略具有特定扩展名的文件名。将 DIR /B 的结果通过管道传输到 FINDSTR 并使用 FOR /F 处理结果。

```
for /f "eol=: delims=" %%F in ('dir /b /a-d^|findstr /vire "\.bak \.\$av \.pen"') do @del "%%F" 
```

如果从命令行运行，则更`%%F`改为`%F`.

# macos - 将 NSWindow 显示为工具栏工作表

> ID：12075129
> 
> 赞同：1
> 
> 时间：2012-08-22T14:15:57.023
> 
> 标签：macos, cocoa, nswindow, nsopenpanel, cocoa-sheet

你如何`NSWindow`从工具栏中显示一个，如下`NSOpenPanel`图所示？

![在此处输入图像描述](../Images/74b68d8f6d494ff7ecd8419f13ad1fbc.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:27:21.223

从 NIB 文件的窗口属性中取消选中*Visible At Launch*，然后使用[beginSheet](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/beginSheet%3amodalForWindow%3amodalDelegate%3adidEndSelector%3acontextInfo%3a)：

```
[NSApp beginSheet:sheetWindow
           modalForWindow:mainWindow
           modalDelegate:self
           didEndSelector:@selector(sheetDidEnd:returnCode:contextInfo:)
           contextInfo:NULL]; 
```

此外，`NSSavePanel`提供[beginSheetModalForWindow](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nssavepanel_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSavePanel/beginSheetModalForWindow%3acompletionHandler%3a)作为便捷方法：

```
[savePanel beginSheetModalForWindow:mainWindow completionHandler:^(NSInteger result) {
    if (result != NSFileHandlingPanelOKButton) return;
    // Do something
}]; 
```

# ruby-on-rails - Rails 3 多租户应用程序设计 - 是否使用子域？

> ID：12075132
> 
> 赞同：3
> 
> 时间：2012-08-22T14:16:12.220
> 
> 标签：ruby-on-rails, routing, subdomain, multi-tenant

我有一个多租户 rails 3 应用程序。我正在使用共享数据库方法（租户 ID 的所有范围）。

我可以想到 3 种不同的方法来设计应用程序控制器路由：

1) 每个租户都有 basecamp 风格的子域，例如 customer1.myapp.com/projects 、 customer2.myapp.com/projects

2) 使用租户标识符限定每个路由，例如 myapp.com/customer1/projects 、 myapp.com/customer2/projects

3) 让路由对多租户透明。假设@user 对象具有tenant_id 属性，则Tenant_id 是通过当前登录的用户（例如应用程序控制器中的before_filter）获得的。例如 myapp.com/projects

我的问题是：

**A) 从安全性、易于开发、代码可扩展性和最终用户的角度来看**，这些方法中的每一个是否有任何优点或缺点？还是纯粹是开发人员风格的问题？

B) 对于#1，是否可以有一个通用的登录 URL（例如 login.myapp.com）在成功认证后将用户转发到 customer1.myapp.com？跨子域共享会话cookie不会有问题吗？

# php - 使用 AJAX 运行 PHP 代码

> ID：12075143
> 
> 赞同：8
> 
> 时间：2012-08-22T14:16:38.617
> 
> 标签：php, javascript, ajax, jquery

我编写了一些 JavaScript 代码，这些代码将从 Google Maps API 读取并获取 JSON 对象列表。然后它将每个 JSON 对象转换为 XML 对象。一位同事需要将此列表转换为 XML，然后附加到现有的 XML 文件，然后将其保存到我们的服务器。所以我写了一些PHP代码来做到这一点。

现在这是我第一次使用 PHP，但我设法轻松地编写了 PHP 代码。我要做的下一件事是编写一些 javascript 来运行 PHP 文件，并将 XML 对象发送到 PHP，在那里它可以附加和保存 XML。我想我会使用 jQuery 的`$.ajax`函数。我开始使用一个简单的示例尝试将字符串回显到某些`<pre>`标签中。所以这是我的代码：

Javascript（位于 index.php 中）

```
<script>
    var scriptString = 'THIS IS MY STRING';
    $('#clickMe').click(function(){
        $.ajax(
        {
            method:'get',
        url:'index.php',
        data:
        {
            'myString': scriptString
        }
        });
    });
    </script> 
```

PHP & HTML（也位于 index.php 中）

```
<button type="button" id="clickMe">CLICK ME TO RUN PHP</button>
<pre>
    <?php
        echo $_GET['myString'];
    ?>
</pre> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T14:19:30.987

*   不要包含`=`在您的数据变量名称中（只是说`'myString': scriptString`）

*   `$.ajax`始终包含( `method: 'get'`)的表单提交方法

*   在 PHP 代码中`$myString`，使用`$_GET['myString']`

*   考虑使用 a`<button>`而不是 a`<div>`将数据发送到服务器 - 这是更标准的。

但最重要的是：

*   您实际上并没有对返回的数据做任何事情！您还需要选项中`success`的一个函数来`$.ajax`处理来自服务器的数据。

试试这个代码：

(JavaScript)

```
var scriptString = 'THIS IS MY STRING';
$('#clickMe').click(function(){
    $.ajax({
      method: 'get',
      url: 'index.php',
      data: {
        'myString': scriptString,
        'ajax': true
      },
      success: function(data) {
        $('#data').text(data);
      }
    });
}); 
```

（PHP 和 HTML）

```
<?php
if ($_GET['ajax']) {
  echo $_GET['myString'];
} else {
?>
<button type="button" id="clickMe">CLICK ME TO RUN PHP</button>
<pre id="data"></pre>
<?php } ?> 
```

请注意，PHP 代码现在将根据是否处理 AJAX 请求来执行不同的操作。对于 AJAX 请求，您不想返回页面的 HTML - 只是您感兴趣的数据。因此，最好有两个页面：一个`index.php`页面和一个`ajax.php`处理 AJAX 请求的页面。

此外，在这个简单的示例中，您可以只使用纯 HTML 表单，不需要任何 JavaScript 或 AJAX。

# c# - 需要如何继承具有模板类型的字典类

> ID：12075147
> 
> 赞同：1
> 
> 时间：2012-08-22T14:16:40.660
> 
> 标签：c#, dictionary

我被这个问题挂了。我有一个继承字典的类。但字典应该是模板类型。我成功了，直到将字典类继承给一个类。但是我没有得到如何将派生字典作为模板。请在这方面提供帮助。请在下面获取我的代码。

```
public class MGDDictionary<TKey, TValue> : Dictionary<string,string>
    {
        public MGDDictionary()
        {

        }

        public static SelectedOption value { get; set; }

        public override string ToString()
        {
            return EntitySerializer.ObjToString<MGDDictionary<TKey, TValue>>(serializer, this);
        }
        public static MGDDictionary<TKey, TValue> FromString(string objectStream)
        {
            return EntitySerializer.FromString<MGDDictionary<TKey,TValue>>(serializer,objectStream);
        }
    } 
```

在上面的代码中，我需要这一行是一个继承字典的类，其中包含一个模板。

`public class MGDDictionary<TKey, TValue> : Dictionary<string,string>`

更多 提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:19:26.633

你的类是通用的是没有意义的。我认为您可以更改它以删除类型参数：

```
public class MGDDictionary : Dictionary<string,string>
{
    public MGDDictionary()
    {

    }

    public static SelectedOption value { get; set; }

    public override string ToString()
    {
        return EntitySerializer.ObjToString<MGDDictionary>(serializer, this);
    }
    public static MGDDictionary FromString(string objectStream)
    {
        return EntitySerializer.FromString<MGDDictionary>(serializer,objectStream);
    }
} 
```

另一方面，创建自己的集合类并不是一个好主意。一般来说，更喜欢组合而不是继承。

另请注意，在名称和静态性方面，几乎可以肯定调用*静态*`value`属性是一个坏主意......

# perl - 从 Net::Google::Calendar 返回的结果是什么 Date 数据类型

> ID：12075148
> 
> 赞同：0
> 
> 时间：2012-08-22T14:16:44.437
> 
> 标签：perl, date, google-calendar-api

```
use Net::Google::Calendar;
my $cal = Net::Google::Calendar->new;
$cal->login(...);

 my $c;
 for ($cal->get_calendars) {
    $c = $_ if ($_->title eq 'Custom');
 }
 $cal->set_calendar($c);

 for my $event ($cal->get_events) {
    print "<pre>" . $event->title . " ". Dumper($event->when) ." </pre>";
 } 
```

标题可以正常返回，但我还需要日期，希望能按日期过滤掉我需要的事件（就像我处理该帐户的日历一样，我认为这个模块无论如何都不支持更高级的方式）。打印结果显示肯定有一些东西：

```
VAR1 = bless(
    {
        'local_rd_secs' => 0,
        'local_rd_days' => 734733,
        'rd_nanosecs'   => 0,
        'locale'        => bless(
            {
                'default_time_format_length' => 'medium',
                'native_territory'           => 'United States',
                'native_language'            => 'English',
                'native_complete_name'       => 'English United States',
                'en_language'                => 'English',
                'id'                         => 'en_US',
                'default_date_format_length' => 'medium',
                'en_complete_name'           => 'English United States',
                'en_territory'               => 'United States'
            },
            'DateTime::Locale::en_US'
        ),
        'local_c' => {
            'hour'           => 0,
            'second'         => 0,
            'month'          => 8,
            'quarter'        => 3,
            'day_of_year'    => 231,
            'day_of_quarter' => 49,
            'minute'         => 0,
            'day'            => 18,
            'day_of_week'    => 6,
            'year'           => 2012
        },
        'utc_rd_secs'     => 0,
        'formatter'       => undef,
        'tz'              => bless( { 'name' => 'UTC' }, 'DateTime::TimeZone::UTC' ),
        'utc_year'        => 2013,
        'utc_rd_days'     => 734733,
        'offset_modifier' => 0
    },
    'DateTime'
); 
```

'DateTime' 是暗示性的，但`$event->when->day`根据 DateTime 给出 的，`Can't call method "day" without a package or object reference`我认为我在使用 Perl 时很愚蠢。如何使用返回的日期对象（或任何它），以便我可以直接读取日期和/或使其可读？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:25:46.550

我从未使用过该模块，但浏览它的文档时，我注意到

> `when [<start> <end> [allday]]`
> 
> ...
> 
> 返回两个描述开始和结束的 DateTime 对象和一个标志，表明它是否是全天事件。

因此，您可以尝试类似`( $event->when )[0]->day`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:30:42.750

`ref($event)`显示事件的包是`Net::Google::Calendar::Entry`. 它的文档显示了这个问题：

```
when [<start> <end> [allday]]
...
    Returns two DateTime objects depicting the start and end and a flag
    noting whether it's an all day event. 
```

当您将其传递给`Data::Dumper`两个`DateTime`对象时，将是`Dumper`的参数。to的第二个参数`Dumper`通常是一个数组引用，用作在输出中使用的变量名而不是`$VAR1`等，但由于结束日期`undef` `Data::Dumper`使用它的默认值。

`$event->when->day`显然，当您尝试调用`day`数组时，情况会有所不同。

# c# - 如何制作具有多个项目和不同输出的安装程序包？

> ID：12075152
> 
> 赞同：3
> 
> 时间：2012-08-22T14:16:59.803
> 
> 标签：c#, windows-installer, setup-project, main, setup-deployment

我有三个应用程序，App1、App2 和 App3。App3 是最终需要安装在用户计算机上的主要应用程序。它应该是这样的：

安装开始时，它应该运行 App1，它会执行一些身份验证，例如检查客户端计算机的用户名和计算机名称。如果失败，则停止安装并删除整个安装文件。如果它通过了身份验证，则跳转到 App2，即安全检查 2，该窗口将要求提供时间线，我们已通过电子邮件向用户提供了该时间线。如果通过了，则安装主应用程序。

现在，我已经为 Main App [App3] 制作了设置项目，而我有 App1 和 App2 的单独项目。我想将所有这些文件合并到一个解决方案中，并且只形成一个 MSI 文件。我将 App1 和 App2 添加为现有项目，但是当我将项目启动设置为 App1 时，这是唯一执行的应用程序。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:11:29.310

任何设置创作工具都支持这一点。你可以在这里找到一个列表： [http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

对于基于 MSI 的安装程序，您可以使用[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368066%28v=vs.85%29.aspx)执行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:46:29.333

我出去发现了很多不同的选项，但是具有很多功能的最合理和最简单的方法是[Advanced Installer](http://www.advancedinstaller.com/)。我使用高级安装程序完成了任务。我肯定会推荐它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T15:18:57.650

您可以编写一个批处理文件，一个一个地运行三个单独的 EXE。要记住的是，它不会是一个 MSI 打包 3 个单独的 EXE，而是 1 个批处理文件和 3 个 EXE。

# c# - 无法为 Excel 格式化 Xml

> ID：12075157
> 
> 赞同：0
> 
> 时间：2012-08-22T14:17:20.100
> 
> 标签：c#, xml, excel, xelement

我正在尝试格式化 XML 文件，以便可以使用 Microsoft Excel 直接打开它。

我遇到的问题是由于默认命名空间和别名 ss: 命名空间是相同的。否则我无法让 excel 接受该文件。

当尝试下面的代码时，我在 WorkSheet 节点上获得了一个额外的 xmlns="" 属性。这使 Excel 无法打开该文件。

```
XNamespace nsDefault = "urn:schemas-microsoft-com:office:spreadsheet";
XElement workbook = new XElement(nsDefault + "Workbook", 
    new XAttribute("xmlns", nsDefault),
new XAttribute(XNamespace.Xmlns + "ss", nsDefault));

XElement worksheet = new XElement("Worksheet");
worksheet.SetAttributeValue(nsDefault + "Name", "Shipping");

XElement table = new XElement("Table");

XElement row = new XElement("Row");
XElement cell = new XElement("Cell");
XElement data = new XElement("Data");
data.SetAttributeValue(nsDefault + "Type", "String");
data.Value = "qwerty";

cell.Add(data);
row.Add(cell);
table.Add(row);

worksheet.Add(table);
workbook.Add(worksheet);

workbook.Save(@".\Xml\Test.xml"); 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:44:31.557

你最好使用`Open XML SDK`微软提供的。从此处获取有关它的更多信息：

[http://msdn.microsoft.com/en-us/library/office/hh180830.aspx](http://msdn.microsoft.com/en-us/library/office/hh180830.aspx)

[http://blogs.msdn.com/b/chrisquon/archive/2009/07/22/creating-an-excel-spreadsheet-from-scratch-using-openxml.aspx](http://blogs.msdn.com/b/chrisquon/archive/2009/07/22/creating-an-excel-spreadsheet-from-scratch-using-openxml.aspx)

# vb.net - 有谁知道为什么这个应用程序在执行存储过程时会超时？

> ID：12075164
> 
> 赞同：0
> 
> 时间：2012-08-22T14:17:30.520
> 
> 标签：vb.net

我一直在尝试执行存储过程，但每次单击从我的应用程序执行它时，它都会超时并出现以下错误：

```
Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. 
```

如果需要对下面的例程进行任何更改，有什么想法吗？

```
Private Sub Reset()
    Dim connectionString As String = ConfigurationManager.ConnectionStrings("constring").ConnectionString
    Dim storedProcName As String = "insertnewSP"
    Dim conn As SqlConnection = New SqlConnection(connectionString)
    conn.Open()
    Dim command As SqlCommand = New SqlCommand(storedProcName, conn)
    command.CommandType = CommandType.StoredProcedure
    command.ExecuteNonQuery()
    command.Dispose()
    conn.Close()
    conn.Dispose()
End Sub
Protected Sub Refresh_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Refresh.Click
    ' Clean up text to return the Gridview to it's default state
    Reset()
    strsearch.Text = ""
    SearchString = ""
    gridView1.DataBind()
End Sub 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:46:48.870

您的 CommandTimeout 可能在调用完成之前到期，试试这个：

```
Private Sub Reset()
    Dim connectionString As String = ConfigurationManager.ConnectionStrings("constring").ConnectionString
    Dim storedProcName As String = "insertnewSP"
    Dim conn As SqlConnection = New SqlConnection(connectionString)
    conn.Open()
    Dim command As SqlCommand = New SqlCommand(storedProcName, conn)
    command.CommandType = CommandType.StoredProcedure
    command.CommandTimeout = 180
    command.ExecuteNonQuery()
    command.Dispose()
    conn.Close()
    conn.Dispose()
End Sub

Protected Sub Refresh_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Refresh.Click
    ' Clean up text to return the Gridview to it's default state
    Reset()
    strsearch.Text = ""
    SearchString = ""
    gridView1.DataBind()
End Sub 
```

# python - dict中var的奇怪行为

> ID：12075168
> 
> 赞同：1
> 
> 时间：2012-08-22T14:17:41.470
> 
> 标签：python

```
>>> x = { 'a' : 'b' , 'c' : 'd' }

>>>'a' and 'c' in x
True

>>>'a' and 'b' in x
False

>>>'b' and 'c' in x
True 
```

如果检查键，即使没有这样的键`in <dict>`，最后一个查找的键怎么会`b`返回？`true``b`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:18:24.607

你要`'b' in x and 'c' in x`

您误解了`and`运算符的工作原理（并且您的运算符优先级错误）。 `in`的优先级高于`and`，因此您的表达式被解析为：

```
if 'b' and ('c' in x): 
```

这与以下内容相同：

```
if 'c' in x: 
```

因为`bool('b')`总是`True`因为`'b'`是一个非空字符串。

这是[python中的运算符优先级表](http://docs.python.org/reference/expressions.html#summary)

请注意，即使`and`优先级高于`in`，您仍然不会得到您想要的，因为`('b' and 'c') in x`会减少到`'c' in x`since `'b' and 'c'`returns `'c'`。

重写表达式的一种方法是：

```
if all( key in yourdict for key in ('b', 'c') ): 
```

这对于仅检查 2 个键来说是多余的，但如果您有更多键要检查，它很快就会变得有用。

作为最后的评论，您可能正在尝试应用运算符链接（这真的很整洁）。然而，一些运营商不适合链接（`in`就是其中之一）。像这样的表达式`3 > 10 > 100 > 1000`确实通过一些奇怪的 python 黑魔法起作用。根据我的经验，关系运算符可以很好地链接（'<'，'>'，'=='，'<='，'>='），但大多数其他运算符并没有以直观的方式链接。一般来说，

```
a operator b operator c operator ... 
```

相当于：

```
(a operator b) and (b operator c) and (c operator ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T14:20:00.533

这相当于您目前拥有的：

```
>>> 'a' and ('c' in x)
True

>>> 'a' and ('b' in x)
False

>>> 'b' and ('c' in x)
True 
```

你想要这个：

```
>>> 'a' in x and 'c' in x
True

>>> 'a' in x and 'b' in x
False

>>> 'b' in x and 'c' in x
False 
```

或者，您可以使用集合和`<=`（子集）运算符：

```
>>> set(['a', 'c']) <= set(x.keys())
True

>>> set(['a', 'b']) <= set(x.keys())
False

>>> set(['b', 'c']) <= set(x.keys())
False 
```

在 Python 2.7 及更高版本中，`set(['a', 'c'])`可以替换为`{'a', 'b'}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:20:34.737

`'b'`是真的，`'c' in x`也是真的。`(True and True) == True`. 你需要`'b' in x and 'c' in x`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:21:22.780

`and`没有做你认为它正在做的事情。

```
'a' and 'c' in x 
```

方法：

```
bool('a') and ('c' in x) 
```

意思是：

```
True and True 
```

这`True`当然意味着:)

你需要做：

```
('a' in x) and ('c' in x) 
```

# validation - Symfony 2 UniqueEntity 约束验证器

> ID：12075172
> 
> 赞同：1
> 
> 时间：2012-08-22T14:17:57.180
> 
> 标签：validation, symfony-2.1

有人可以解释一下为什么 UniqueEntity**约束**类定义：

```
// ...

public $service = 'doctrine.orm.validator.unique';

public function validatedBy()
{
    return $this->service;
}

//... 
```

而不仅仅是：

```
public function validatedBy()
{
    return "UniqueEntityValidator";
} 
```

UniqueEntityValidator 类存在并且具有它需要的所有逻辑。这里的服务点是什么？

我问这个是因为由于某些依赖关系，现在我不能在 Symfony 框架之外使用 UniqueEntity。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:33:50.877

正如本[节中针对 Validator 组件](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html#constraint-validators-with-dependencies)所描述的，它`validatedBy()`返回一个别名，而不是直接返回一个服务。`Validator`这允许您在 DIC中配置自己的服务：

```
services:
validator.unique.your_validator_name:
    class: Fully\Qualified\Validator\Class\Name
    tags:
        - { name: validator.constraint_validator, alias: doctrine.orm.validator.unique } 
```

由于这个`UniqueEntity`约束是桥的一部分，这意味着你应该在 Symfony2 上下文中使用它。这就是为什么你不能真正在框架之外使用它。

但是您可以将此`service`值更改为类名。属性是公开的：[https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Validator/Constraints/UniqueEntity.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Validator/Constraints/UniqueEntity.php)，根据上面给出的文档，它将起作用。

# paypal - 定期付款、Payflow 和 Express Checkout

> ID：12075173
> 
> 赞同：2
> 
> 时间：2012-08-22T14:18:01.750
> 
> 标签：paypal, payflowlink

我有一个网站，我提供每月大约 49 美元的服务。我决定使用 PayFlow 来支持支付。我在 manager.paypal.com 上有一个帐户，在那里我设置了几个选项。

我只想提供以下功能：在我的网站上，有一个“购买”按钮。客户点击后，他/她会被直接重定向到支付流服务器上托管的支付网站。他选择支付方式（通过信用卡支付或通过贝宝快速结账支付）。在填写信用卡数据或登录贝宝账户后，他/她会看到信息显示他/她每月将被收取 49 美元的费用。在他/她确认此信息后，会创建重复配置文件。

我在实现这个功能时遇到了问题。

当我通过简单的销售调用调用 API 时 - 没有重复：

```
"&TRXTYPE=S&AMT=49.00&CREATESECURETOKEN=Y&SECURETOKENID=secureTokenID&USER=username&VENDOR="vendorname&PARTNER=PayPal&PWD=password"; 
```

通过贝宝帐户或信用卡付款时它工作正常

在 [https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_RecurringBilling_Guide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_RecurringBilling_Guide.pdf)

我读到要为信用卡配置文件创建配置文件，我需要像这样进行 Api 调用：

```
"TRXTYPE=R&TENDER=C&PARTNER=PayPal&VENDOR=Acme&USER=Acme&PWD=a1b2c3d4&ACTIO
N=A&PROFILENAME=RegularSubscription&AMT=42.00&ACCT=4012888888881881&EXPDATE
=0203&START=12012008&PAYPERIOD=WEEK&TERM=12&OPTIONALTRX=S&OPTIONALTRXAMT=2.
00&COMMENT1=First-time customer" 
```

对于贝宝账户：

```
PARTNER=partner&VENDOR=vendor&PWD=password&USER=user&TRXTYPE=A&ACTION=S&TENDER=P&RETURNURL=http://return.com&CANCELURL=http://cancel.com&AMT=10.00&BA_DESC=purchase Time Magazine&BILLINGTYPE=MerchantInitiatedBilling&BA_CUSTOM=add magazine subscription&PAYMENTTYPE=any 
```

但是，要进行此 API 调用，我需要 BAID。上面写着要获得 BAID，首先我必须像这样进行 API 调用

```
PARTNER=partner&VENDOR=vendor&PWD=password&USER=user&TRXTYPE=A&ACTION=S&TENDER=P&RETURNURL=http://return.com&CANCELURL=http://cancel.com&AMT=10.00&BA_DESC=purchaseTimeMagazine&BILLINGTYPE=MerchantInitiatedBilling&BA_CUSTOM=addmagazinesubscription&PAYMENTTYPE=any 
```

但是使用这个我遇到了我被重定向到直接到[https://www.sandbox.paypal.com](https://www.sandbox.paypal.com)的问题。

我究竟做错了什么？我的 API 调用应包含哪些参数以提供定期付款取决于客户的决定？在我的页面上生成按钮 BUY 之前（在重定向到 payflow 上托管的页面之前）我不知道客户将选择哪个选项（通过信用卡或 paypal 账户支付），因此应该是通用 API 调用来处理这两个选项.

谢谢你的帮助。最好的问候， Maciek

# php - 如何将自定义数据传递给模板

> ID：12075176
> 
> 赞同：5
> 
> 时间：2012-08-22T14:18:17.967
> 
> 标签：php, silverstripe

我一般是 OOP 框架的新手，尤其是 Silverstripe。我确定我错过了一些重要的东西！

我目前正在尝试为我的主页创建一个 twitter 提要。在我的 Page_controller 我有：

```
public function getTwitterFeed() { ... } 
```

...获得一组推文。我可以以任何我喜欢的方式格式化这些数据，因此数据的结构和函数应该是无关紧要的。

在 Silverstripe 教程中，他们给出了以下示例：

```
public function LatestNews($num=5) {
    $holder = NewsHolder::get()->First();
    return ($holder) ? News::get()->filter('ParentID', $holder->ID)->sort('Created', 'DESC')->limit($num) : false;
} 
```

然后在模板中调用如下：

```
<% loop LatestNews %>
    <% include NewsTeaser %>
<% end_loop %> 
```

然而，这个函数基于一个 DataModel 对象（NewsHolder）并且从数据库中获取数据（我的 twitter 函数不是）。

那么这个函数应该返回什么类型的变量呢？数组？一个东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T15:16:55.203

在 SilverStripe 3.0 中有 2 个东西叫做`<% loop %>`和`<% with %>`

*   `<% loop %>`期望实现 SS_List 的任何东西（例如：DataList、ArrayList）
*   `<% with %>`接受我认为扩展 ViewAbleData 的任何类型的对象（例如：DataObject、ArrayData、...）

（在 SilverStripe 2.x 中`<% control %>`，两者兼而有之）

那么，你想做什么`<% loop TwitterFeed %>`？然后你需要返回一个 ArrayList

一个简短的例子（未经测试，但应该工作）：

```
 public function getTwitterFeed() {
            return new ArrayList(array(
                    new ArrayData(array(
                            'Name' => 'Zauberfisch',
                            'Message' => 'blubb',
                    )),
                    new ArrayData(array(
                            'Name' => 'Foo',
                            'Message' => 'ohai',
                    )),
                    new ArrayData(array(
                            'Name' => 'Bar',
                            'Message' => 'yay',
                    ))
            ));
    }

    <% loop TwitterFeed %>
            $Name wrote: $Message<br />
    <% end_loop %> 
```

因此，只需将您从 twitter 获得的数组转换为 ArrayData 对象并将它们全部放入 ArrayList （每条推文应该是 1 个 ArrayData 对象）

# php - 我可以使用 Sphinx Search 创建元搜索引擎吗？

> ID：12075181
> 
> 赞同：0
> 
> 时间：2012-08-22T14:18:39.987
> 
> 标签：php, webserver, sphinx

我想在 php 中创建一个简单的应用程序，在许多特定的搜索引擎上进行搜索并返回格式正确的结果。是否可以使用 Sphinx 作为元搜索引擎，还是太慢了？我不想索引 Mysql 数据库上的所有内容，但同时我不知道这种方法是否会非常消耗资源。我预计每天至少有 200000 个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:53:51.213

并不真地。Sphinx 索引数据库中的数据。它设计用于索引相对静态数据。即变化不大的数据。然后对这些数据进行了广泛的质疑......

元搜索将联系多个搜索引擎，组合结果并显示。

你真的不需要一个“搜索引擎”（这就是 sphinx 是什么）来支持这个 - 实际的搜索发生在远程服务上。

组合所有数据只是一个数据操作项目。大部分工作将通过它们的 API（甚至是抓取）联系各种搜索引擎，然后获得一致的数据格式。显示结果相对简单。

（例外情况，如果您的“元搜索引擎”在本地缓存整个数据集，然后需要搜索它们。假设您下载了 wikipedia 转储、地名转储，然后想要搜索它们。Sphinx 将对此有所帮助。但它没有听起来那是你想要的。）

* * *

您可能希望它“集群”结果，即组合来自多个远程引擎的相似结果。Carrot2 是一个伟大的项目，几乎是理想的... [http://project.carrot2.org/](http://project.carrot2.org/)

# forms - 使用表单事件时的 Symfony 表单字段顺序

> ID：12075183
> 
> 赞同：3
> 
> 时间：2012-08-22T14:18:55.347
> 
> 标签：forms, events, symfony, fieldtype

我正在创建一个类似于[这里](https://stackoverflow.com/questions/10186185/symfony2-chained-selectors/12052574#12052574)想要的动态表单。

好吧，我设法让它工作。但我希望该类型的本机字段可以出现在动态下拉列表之后。这不是开箱即用的，因为在 PRE_SET_DATA 事件中将保管箱添加到表单中（在构建表单并添加名称字段之后），如您所见：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('country', 'entity', array(
        'class'=>'TestBundle:Country', 
        'property'=>'name', 
        'property_path'=>false //Country is not directly related to City
    ));
    $builder->add('name');

    $factory = $builder->getFormFactory();

     (...)

     $builder->addEventListener(FormEvents::PRE_SET_DATA, function (DataEvent $event) use ($refreshStates, $setCountry)
    {
        $form = $event->getForm();
        $data = $event->getData();

        if($data == null)
            return;

        if($data instanceof City){
            $country = ($data->getId()) ? $data->getState()->getCountry() : null ;
            $refreshStates($form, $country);
            $setCountry($form, $country);
        }
    }); 
```

我尝试对名称字段执行相同的操作，将其添加到 buildForm 函数的开头：

```
$addBaseFields = function ($form) use ($factory)
    {
        $form->add($factory->createNamed('text', 'name'));
    }; 
```

然后我在事件中添加了它：

```
 $builder->addEventListener(FormEvents::PRE_SET_DATA, function (DataEvent $event) use ($refreshStates, $setCountry)
    {
        $form = $event->getForm();
        $data = $event->getData();

        if($data == null)
            return;

        if($data instanceof City){
            $country = ($data->getId()) ? $data->getState()->getCountry() : null ;
            $refreshStates($form, $country);
            $setCountry($form, $country);
            $addBaseFields($form);
        }
    }); 
```

这种作品。但是，html5 字段验证停止工作。例如：如果我将名称定义为“数字”类型而不是“文本”：`$form->add($factory->createNamed('number', 'name'));` 它将接受任何内容，任何文本。

有没有更好的方法来做到这一点，所以我仍然可以使用数字浏览器验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:56:08.827

这是 2.0 和 2.1 版本的 Symfony 错误，与表单事件无关。

当在“数字”字段中输入诸如“9fgda”之类的字符串时，不会出现验证错误，并且字符串值“9fgda”会转换为数值“9”并且不会出错。

这是因为 NumberFormatter，应该在 2.2 版中修复。

有关此错误的更多信息在[这里](https://github.com/symfony/symfony/issues/5707)

# c# - 使用 .net 4.0 引用 Windows shell 接口

> ID：12075188
> 
> 赞同：8
> 
> 时间：2012-08-22T14:19:23.580
> 
> 标签：c#, c#-4.0, windows-shell

我正在使用以下代码来引用 shell dll

```
 Type t = Type.GetTypeFromProgID("Shell.Application");

            Shell s = (Shell)Activator.CreateInstance(t);

            Console.WriteLine("success");
            Console.ReadLine(); 
```

它在我的 Windows 7 开发机器上运行良好。但是当我尝试在 Win 2003 服务器上运行 exe 时，我得到了这个异常

```
Unable to cast COM object of type 'System.__ComObject' to interface type 'Shell3
2.Shell'. This operation failed because the QueryInterface call on the COM compo
nent for the interface with IID '{866738B9-6CF2-4DE8-8767-F794EBE74F4E}' failed
due to the following error: No such interface supported (Exception from HRESULT:
0x80004002 (E_NOINTERFACE)). 
```

我从[C# 获得了一些帮助：引用 Windows shell 界面](https://stackoverflow.com/questions/1924974/c-referencing-a-windows-shell-interface)但没有运气。

我正在使用 Microsoft Shell 控件和自动化参考来引用 shell，即 Interop.Shell32 dll

如果有人可以指导它会非常有帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T16:22:44.470

好的，这就是我解决问题的方法，以防它帮助某人

这就是我的新代码的样子

```
Type t = Type.GetTypeFromProgID("Shell.Application");

dynamic shell = Activator.CreateInstance(t);

//This is browse through all the items in the folder
var objFolder = shell.NameSpace(@"\\fileshares\Files\test");

foreach (var item in objFolder.Items())
{
    //This is to get the file's comments for each files in the folderitem

    string file_version = objFolder.GetDetailsOf(item, 14).ToString();

     Console.WriteLine(file_version);

} 
```

该脚本结合了来自 [http://nerdynotes.blogspot.com/2008/06/vbnet-shell32-code-compiled-on-vista.html的帮助](http://nerdynotes.blogspot.com/2008/06/vbnet-shell32-code-compiled-on-vista.html)

和

[http://foro.h-sec.org/net/problemas-en-net/](http://foro.h-sec.org/net/problemas-en-net/)

第二个链接是西班牙语的，我用谷歌翻译把它变成了英文

感谢所有回答这个问题的人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:27:02.603

看看这个： http: [//nerdynotes.blogspot.com/2008/06/vbnet-shell32-code-compiled-on-vista.html](http://nerdynotes.blogspot.com/2008/06/vbnet-shell32-code-compiled-on-vista.html)我认为这是同一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T20:32:28.180

代替

```
Type t = Type.GetTypeFromProgID("Shell.Application");

dynamic shell = Activator.CreateInstance(t); 
```

我用了

```
var shell = (IShellDispatch4) new Shell(); 
```

shell.Namespace 然后按预期工作。

结果表明，shell 对象的引用默认为 IShellDispatch5，不能在 XP 或 2003 中使用。

# php - PHP注册：SQL不添加项目

> ID：12075189
> 
> 赞同：0
> 
> 时间：2012-08-22T14:19:24.610
> 
> 标签：php, sql

在我输入字段并按“注册”后，我的数据库根本不会受到影响。我的 HTML 代码：

```
<div id="register_details"><?php require_once('functions/reg.php');?>
<form action="" method="post" id="loginForm">
<table cellpadding="2" cellspacing="0" border="0">
<tr>
<td>Email ID&#42; &#58; &nbsp;</td>
<td><input class="input" type="text" name="email" /></td>
</tr>
<tr>
<td>Password&#42; &#58; &nbsp;</td>
<td><input class="input" type="password" name="password" /></td>
</tr>
<tr>
<td colspan="2" align="right"><input class="button" type="submit" name="submit" value="Register" /></td>
</tr>
</table>
</form>
</div> 
```

这是我的 php 文件：

```
<?php
require_once 'sys.class.php';
$reg = new Registration;
$reg->SetEmail($_POST['email']);
$reg->SetPassword($_POST['password']);
$error = $reg->InsertUserToSql(); // see notes at the class

if(!empty($error['2']))
{
echo $error['2'];
}
?> 
```

错误仅在这 2 个中。我的`sys.class.php`文件没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:29:43.663

你必须像这样改变你的代码

```
<?php
require_once 'sys.class.php';
$reg = new Registration;
$email=$reg->SetEmail($_POST['email']);
$pass=$reg->SetPassword($_POST['password']);
$error = $reg->InsertUserToSql($emai,$pass); //pass the values to the method

if(!empty($error['2']))
{
echo $error['2'];
}
?> 
```

在您的注册课程中，在`InsertUserToSql()`

```
function InsertUserToSql($email,$pass){
$sql="INSERT INTO tbl_name(`email`,`pass`) values(".$email.",".$pass.")";

} 
```

所以像上面的代码一样，你可以传递这个值并在注册类中使用。

# jquery - AJAX 搜索返回按钮

> ID：12075193
> 
> 赞同：0
> 
> 时间：2012-08-22T14:19:36.790
> 
> 标签：jquery, ajax

我正在尝试使用我构建的 AJAX 搜索来解决后退按钮的使用问题，但遇到了一些麻烦。我按照[上一个问题](https://stackoverflow.com/questions/7956563/remember-ajax-added-data-when-hitting-back-button)`localStorage`的指示使用以下代码：

```
// Replace the search result table on load.
if (('localStorage' in window) && window['localStorage'] !== null) {
    if ('myTable' in localStorage && window.location.hash) {
        $("#myTable").html(localStorage.getItem('myTable'));
    }
}

// Save the search result table when leaving the page.
$(window).unload(function () {
    if (('localStorage' in window) && window['localStorage'] !== null) {
        var form = $("#myTable").html();
        localStorage.setItem('myTable', form);
    }
}); 
```

我无法弄清楚如何正确清除`localStorage`. 使用上面的代码，用户可以执行搜索、单击链接、单击返回，他们的结果将被重新填充。但是，如果他们离开站点并稍后返回或刷新搜索页面，他们的结果仍然存在。我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:27:08.813

像这样的东西？

```
localStorage.clear(); // <-- clears all local storage for domain 
```

或单个项目

```
localStorage.removeItem('myTable'); 
```

如果您不喜欢 localStorage 在客户端手动删除之前一直存在的方式，还有 sessionStorage [https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

> 会话存储
> 
> 这是一个全局对象 (sessionStorage)，它维护一个在页面会话期间可用的存储区域。只要浏览器打开并在页面重新加载和恢复后仍然存在，页面会话就会持续。在新选项卡或窗口中打开页面将导致启动新会话。
> 
> // 将数据保存到当前会话的存储区

```
sessionStorage.setItem("username", "John"); 
```

> // 访问一些存储的数据

```
alert( "username = " + sessionStorage.getItem("username")); 
```

> sessionStorage 对象对于挂在临时数据上最有用，如果浏览器被意外刷新，应该保存和恢复这些临时数据。

# objective-c - 如何获取 NSPopUpButton 选定对象？

> ID：12075195
> 
> 赞同：8
> 
> 时间：2012-08-22T14:19:44.607
> 
> 标签：objective-c, cocoa, nsmutablearray, cocoa-bindings, nspopupbutton

我有一个学生班：

```
@interface student : NSObject{    
    NSString *name;
    NSDate *date;
} 
```

我有一个用于学生列表的 NSMutableArray，我将它绑定到这样的 NSPopUpButton

内容：学生数组、排列对象 内容值：学生数组、排列对象、名称

现在我可以像这样得到学生对象：

```
-(IBAction)studentPopupItemSelected:(id)sender
{ 
    NSPopUpButton *btn = (NSPopUpButton*)sender;

    int index = [btn indexOfSelectedItem];  
    student *std = [studentArray objectAtIndex:index];

    NSLog(@"%@ => %@", [std name], [std date]);
} 
```

有什么方法可以直接从 NSPopUpButton 获取学生对象？？？？像：

```
NSPopUpButton *btn = (NSPopUpButton*)sender;
student *std = (student *)[btn objectValueOfSelectedItem]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T16:08:24.030

你这样做的方式很好。还有另一种方法，但不一定更好。

基本上弹出按钮包含一个菜单，并且在菜单中有菜单项。

在菜单项上有一个名为presentedObject 的属性，您可以使用它来创建与学生的关联。

因此，您可以通过创建菜单项并将它们添加到菜单中来手动构建弹出按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T15:52:12.940

我相信你的做法是最好的。由于`NSPopUpButton`您的数组正在填充它，它实际上并不包含该对象，它只知道它在哪里。我个人会使用

```
-(IBAction)studentPopupItemSelected:(id)sender {
     student *std = [studentArray objectAtIndex:[sender indexOfSelectedItem]];
     NSLog(@"%@ => %@", [std name], [std date]);
} 
```

在查看文档后，`NSPopUpButton`我确信这是获取对象的最有效方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T21:51:27.870

我通过利用一旦用户在 NSPopUpButton 的 NSMenu 中选择了适当的 NSMenuItem 就会发送的“ **NSMenuDidSendActionNotification ”解决了这个问题。**

您可以像这样在例如“awakeFromNib”中注册观察者

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(popUpSelectionChanged:)
                                             name:NSMenuDidSendActionNotification
                                           object:[[self myPopUpButton] menu]]; 
```

如果您有多个 NSPopUpButton，您可以为每个注册一个观察者。不要忘记删除 dealloc 中的观察者：

```
[[NSNotificationCenter defaultCenter] removeObserver: self]; 
```

在 popUpSelectionChanged 中，您可以检查标题，以便知道哪个菜单实际发送了通知。您可以在 Attributes Inspector 的 Interface Builder 中设置标题。

```
- (void)popUpSelectionChanged:(NSNotification *)notification {    
    NSDictionary *info = [notification userInfo];
    if ([[[[info objectForKey:@"MenuItem"] menu] title] isEqualToString:@"<title of menu of myPopUpButton>"]) {
        // do useful things ...
    }
} 
```

# ruby-on-rails - 使用 Rails 更新多对多关系

> ID：12075199
> 
> 赞同：2
> 
> 时间：2012-08-22T14:19:57.503
> 
> 标签：ruby-on-rails, ruby, activerecord, many-to-many

我很好奇是否可以更新未在 ActiveRecord 中注册为模型的连接表中的一堆记录。

我有 2 个班级，比如说 A 和 B，由表 AsBs 加入。

```
class A < ActiveRecord::Base
  attr_accessible :A_name, :B_ids
  has_and_belongs_to_many :Bs, join_table: :AsBs
end

class B < ActiveRecord::Base
  attr_accessible :B_name, :A_ids
  has_and_belongs_to_many :As, join_table: :AsBs
end

class CreateAsBs < ActiveRecord::Migration
  def up
    create_table :AsBs, id: :false do |t|
      t.integer :A_id
      t.integer :B_id
    end
   end
end 
```

我还有一个带有 B 记录复选框的表单，它返回一个参数哈希，如下所示

```
params[:my_form]
>> { "B_name_1" => "1", "B_name_2" => "0", "B_name_3" => "0"} 

#What means the user has chosen only first checkbox 
```

我需要的是更新 AB 关系，使用该参数散列或其他基于其内容的自定义散列。最终我需要这个简单的例子来创建一个

```
A_id | B_id
  1  |  1 
```

在我的 :AsBs 表中记录并删除 1-2 和 1-3 记录（如果有）。

我显然可以创建一个 AsBs 模型并手动编辑它，但我希望对 @a.Bs 或 @a.B_ids 使用 update / update_all / update_attributes 之类的东西

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:30:18.373

如果我理解正确你应该能够做到

```
@b.as = [@a]
@b.save 
```

# dart - 如何在飞镖语言上向网页显示直接消息

> ID：12075202
> 
> 赞同：0
> 
> 时间：2012-08-22T14:20:06.340
> 
> 标签：dart

如何在 php
echo "helloworld" 上显示消息；
但在飞镖我尝试

```
#import ('dart:html');
void main () {
  var textElement = new Element.html("Hello world");
  window.document.body.nodes.add(textElement );
} 
```

但它不起作用，我不喜欢`document.query('#idname').innerHTML`
任何方式做我想做的事，谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:30:18.060

您需要向页面添加一个实际元素。

```
#import ('dart:html');
void main () {
  var textElement = new Element.html("<p>Hello world</p>");
  document.body.nodes.add(textElement );
} 
```

那是您使用`<p>Hello world</p>`而不是仅使用`Hello world`.

# asp.net - 第三方报告工具

> ID：12075204
> 
> 赞同：0
> 
> 时间：2012-08-22T14:20:10.693
> 
> 标签：asp.net, report, reporting, data-warehouse

有谁知道可以让我从自己的数据库构建报告和图表的报告工具？

一位客户正在寻求一种可供非技术型业务人员使用的报表生成器。我们的想法是，我们提供一个数据仓库，并在此基础上构建第三方报告解决方案。

理想情况下，该工具将基于 Web，并允许将报告保存/上传到定制的报告管理应用程序。

这将理想地与 asp.net 环境集成。

有没有人遇到过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:32:17.333

也看看[List Label](http://www.combit.net/en/reporting-tool/report-generator-List-Label)。我们已经在一些项目中使用了它。我听说下一个版本 (18) 将（今年秋天）将报表设计器带入所有标准浏览器。它非常可定制且易于集成到其他项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:29:03.097

OBIEE、Microstrategy、Cognos、SAP Business Objects、Microsoft SSAS / BI……等等。所有这些都很昂贵，并且都需要大量时间来构建一个“非技术”人员可以使用的结构。您是否考虑过为业务用户提供 Excel 导出来构建数据透视表？这完全取决于客户的规模。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T17:01:30.647

您需要的是一个**临时**报告解决方案。

**不要将其与事务或仪表板解决方案混淆。**

业务/数据分析师使用临时报告来回答他们自己的问题。

这些类型的报告中预先构建了许多业务对象，例如客户、销售和其他必需的对象（开发人员当然会构建它们）。最终用户所做的是将它们拖到报告中并对其应用过滤器以获得答案。

据我所知，Pentaho 提供临时报告。查看以下链接： [http ://wiki.pentaho.com/display/ServerDoc1x/Creating+Reports+using+Adhoc+Reporting](http://wiki.pentaho.com/display/ServerDoc1x/Creating+Reports+using+Adhoc+Reporting)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T07:02:16.220

我对[FineReport](http://www.finereport.com/en/products/download)印象深刻，它对非技术用户非常友好。用户只需拖放即可创建很酷的报告。它的服务程序是jar包的形式，可以打包部署在应用服务器上。并且使用finereport生成的HTML可以随意嵌入到应用程序页面（JSP）中。

# jquery - JSTree 竞态条件，其中 AJAX 成功回调可能有错误的节点

> ID：12075212
> 
> 赞同：1
> 
> 时间：2012-08-22T14:20:42.607
> 
> 标签：jquery, jstree, race-condition

我有一个 jstree 的 json_data 实现，它允许用户打开树中的不同节点并查看内容。本质上是这样的：

```
 .jstree({
                "plugins" : [ "json_data", "ui" ],
                "ui" : { "select_multiple_modifier": "on",
                         "selected_parent_close": "deselect" },
                "json_data" : {
                    "ajax" : {
                        "url": function(node) {
                            ... return a url ...
                        },
                        "success": function(metadata, textStatus, jqXHR) {
                            var parent = this._get_node();  // <- RACE CONDITION
                            return parseMetaDataNodes(metadata, parent);
                        }
                    }
                } 
```

如果用户在第一个返回的 AJAX 响应之前以某种方式单击了两个节点，它将认为它们在树中都有相同的“父节点”，从而破坏了行为。

有谁知道：

1.  *在成功*回调中获取正确节点的更好方法？
2.  一种锁定树的方法，使其在第一个返回之前不接受点击？（不太理想，但也可能有效。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:52:12.787

我遇到了一个类似的问题，我最终选择了你的第二个解决方案，即防止进一步的 select_node 函数执行，直到一个标志被清除：

```
 $("#treeHost").jstree({Your Plugin setup code}).bind("before.jstree", function(event, data) {
                if (data.func == "select_node" && !canSelectNodes) {
                    event.stopImmediatePropagation();
                    return false;
                }
            }) 
```

根据官方文档，`before.jstree`是一个可以绑定的特殊事件，以防止操作执行。我检查要执行的函数是否为，如果是，如果为假`select_node`，则不要执行它。`canSelectNodes`

这样，您可以`canSelectNodes`在代码的其他地方切换标志 true 或 false，以防止树接受节点选择。

# java - 玩！框架：使用会话进行身份验证

> ID：12075215
> 
> 赞同：6
> 
> 时间：2012-08-22T14:20:51.530
> 
> 标签：java, authentication, login, web, playframework-2.0

所以我正在使用 Play！网站项目的框架。
我正在使用会话来确定用户是否已登录：

```
session("connected", user.getId().toString()); 
```

然后，我可以在需要时轻松识别谁是用户。

我有两个问题：

1.  这是最佳做法吗？
2.  **我的简单**登录系统是否存在漏洞，如何消除它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:33:04.007

它既简单又安全，因为会话范围的 cookie 是使用密钥签名的。如果不需要为每个会话存储大量数据，那应该没问题。

查看现有的解决方案（即 zentasks 示例）。

**编辑**：

另一方面，您可以考虑使用 Play Authenticate，我在[samples/java/play-authenticate-usage的](https://github.com/biesior/play-authenticate/tree/2.0.4_sessions/samples/java/play-authenticate-usage)[fork（分支 2.0.4_session）](https://github.com/biesior/play-authenticate/tree/2.0.4_sessions)中添加了会话处理，它只有 3 次提交，因此很容易合并它到现有的实现。`play-authenticate-usage`

# vba - 如何将远程 MS Word 文档与 VBA 宏中的活动文档合并？

> ID：12075217
> 
> 赞同：0
> 
> 时间：2012-08-22T14:21:10.633
> 
> 标签：vba, ms-word

### 前端

在“前端”中，我有一个宏链接到 Word 中命令栏中的按钮。此按钮的目的是允许用户将当前文档与其以前的版本进行比较。

### 后端

在后端，我有一个 Java EE 服务器和运行一些 servlet 的 Alfresco。当给定文档的名称时，这些 servlet 之一当前返回 .doc 文档。所以我只需要用包含我想要的版本的好名字来调用它，它就会返回我要求的文档。

### 理想的工作流程

因此，用户的理想工作流程如下：

*   用户打开一个 MS Word 文档
*   用户单击命令栏中的按钮
*   用户获得一个新文档，其中包含其当前文档和服务器返回的文档的合并版本

### 我想知道的

对我来说具有挑战性的部分是关于 VB6 的部分。我知道我可以合并文档`ActiveDocument.Merge FileName:="path_to_file", MergeTarget:=wdMergeTargetSelected`但是

1.  如何调用返回可在 VB 脚本中使用的 Word 文档的 servlet？
2.  如何解释此调用的结果，以便我可以将其传递给 Merge 函数并创建我的合并文档？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:40:51.867

您使用打开一个文档`Documents.Open`。有关不同选项和参数的帮助，请参阅 F1-help。

```
Option Explicit

Sub OpenDoc()

    Dim oDoc As Document

    Set oDoc = Documents.Open(FileName:="FILENAME.docx")

    Call oDoc.Merge("PATH-TO-OTHER-DOCUMENT.docx")

    Set oDoc = Nothing

End Sub 
```

# c# - C# 中的正则表达式匹配“...”

> ID：12075218
> 
> 赞同：1
> 
> 时间：2012-08-22T14:21:13.547
> 
> 标签：c#, regex

我正在尝试在 C# 程序的各种字符串中查找并删除任何出现的“...”。"..." 的任何一侧都可以是任何东西，但它永远不会位于字符串的开头或结尾。

我试过 "\.{3}"、"[\.]{3}" 和 ""(\.\.\.)"。这些似乎都不起作用。

有人知道出了什么问题吗？

## 编辑

固定的。我以为“……”实际上是“……”。这是我试图匹配的单个字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:23:24.657

你可以简单地使用

```
string result = source.Replace("...", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:24:35.333

您是否考虑过只使用 String.Replace 方法？它可能比正则表达式更快。

```
string s = "weioufhw...wefwef...wefwef...wefwef...";
string newS = s.Replace("...",""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:26:15.670

你忘记了逃避。使用`"\\.{3}"`或`@"\.{3}"`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T14:32:27.090

实现你的目标可能最好的方法是[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)方法

您可以在这样的字符串上使用：

```
string testString = "...a...b...c...";
string resultString = testString.Replace("...",""); 
```

结果应该是简单的“abc”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T14:24:48.313

只需进行搜索和替换（Ctrl + h）并在查找字段中填写“...”并确保替换字段为空，然后选择替换所有文件或仅替换当前文件的选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T14:24:53.843

如果您真的想使用正则表达式，这将起作用

```
 private void Test()
    {
        string regex = "\\.{3}";
        System.Text.RegularExpressions.RegexOptions options = ((System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace | System.Text.RegularExpressions.RegexOptions.Multiline) 
                    | System.Text.RegularExpressions.RegexOptions.IgnoreCase);
        System.Text.RegularExpressions.Regex reg = new System.Text.RegularExpressions.Regex(regex, options);
    } 
```

# internet-explorer - 如何在 IE9 中禁用高速缓存？

> ID：12075219
> 
> 赞同：2
> 
> 时间：2012-08-22T14:21:14.077
> 
> 标签：internet-explorer, internet-explorer-9

是否有任何选项可以关闭 Internet Explorer 9 中的缓存。我需要修复浏览器兼容性问题的原因。每当测试页面时，我都需要清除缓存。对我来说似乎有点浪费时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:22:24.187

检查此链接 --> [http://www.practicalecommerce.com/articles/2317-Internet-Explorer-9-Managing-Cookies-and-Cache-](http://www.practicalecommerce.com/articles/2317-Internet-Explorer-9-Managing-Cookies-and-Cache-)

基本上它只是：

*   按f12
*   点击缓存
*   选择诸如“始终从服务器刷新”之类的内容（我的语言不同）

# ruby - 使用 Sinatra 和 AWS SDK for ruby 从 Amazon S3 下载 Zip 文件

> ID：12075220
> 
> 赞同：1
> 
> 时间：2012-08-22T14:21:21.897
> 
> 标签：ruby, amazon-s3, amazon-web-services, sinatra

我正在使用以下代码。我没有收到任何错误，但文件没有下载。

```
@bucket = @s3.buckets['bucket_name']
File.open('file_name.zip','wb') do |file|
    @bucket.objects['file_name.zip'].read do |chunk|
      file.write(chunk)
    end
end 
```

# ocaml - 在参数化模块上创建参数化模块

> ID：12075225
> 
> 赞同：9
> 
> 时间：2012-08-22T14:21:46.463
> 
> 标签：ocaml, functor

我正在尝试编写一个在另一个模块上实现算法的模块，该模块可以以各种方式实现。所以我的想法是将第一个模块写为

```
module type Base = sig
  type t
  val f : t -> t
end 
```

然后我编写了第二个模块，该模块通过与以下兼容的模块进行参数化`Base`：

```
module type BasedOnBase = functor (B : Base) -> sig
  type b
  val g : B.t -> b
end 
```

现在我正在尝试编写一个在兼容的模块上参数化的模块，`BasedOnBase`这就是我卡住的地方。我天真的方法不起作用，我试过了

```
(* won't compile *)

module type Alg = functor (BoB : BasedOnBase) -> sig
  val h : BoB.b -> bool
end 
```

也

```
(* won't compile *)

module type Alg = functor (BoB : functor (B : Base) -> BasedOnBase) -> sig
  val h : BoB.b -> bool
end 
```

但两次尝试都会导致此错误：

```
[...]
Error: Unbound type constructor BoB.b 
```

所以我显然在这里遗漏了一些东西，但我似乎无法解决这个问题。我将如何以完全不同的方式实现我想要的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T15:21:21.960

你可以这样写：

```
module type Alg = functor (BoB : BasedOnBase) -> functor (B:Base) -> sig
  type t
  val h : t -> bool
end with type t = BoB(B).b 
```

有了这个，您需要`B:Base`在实例化类型模块时传递一个模块`Alg`，而您的问题并非如此。

编辑：甚至这个：

```
module type Alg =
  functor (BoB : BasedOnBase) ->
  functor (B : Base) -> sig
    val h : BoB(B).b -> bool
  end 
```

# google-app-engine - 在谷歌数据存储中存储多值/重复数据的最佳做法是什么？

> ID：12075227
> 
> 赞同：1
> 
> 时间：2012-08-22T14:21:57.560
> 
> 标签：google-app-engine, nosql, google-cloud-datastore

我有一个简单的场景，我有 4 个实体。

1.  **目的地**：名称、位置、标签（多值）、创建者、上次修改者、创建者、上次修改者

2.  **Trip** : 包含多个***Destinations***、名称、标签（多值）、created、last modified、created by、last modified by

3.  **问题**：问题，多个***答案***，创建，最后修改者，创建者，最后修改者

4.  **答案**: ***Destinations*** (multiple), ***Trips*** (multiple), created, last modified, created by, last modified by

我正在使用谷歌数据存储。存储此类数据的最佳方法应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:45:45.483

我想我找到了我的问题的答案。现在我正在使用`ndb.KeyProperty`in`Google Datastore`来解决我的问题。

```
class Trip(ndb.Model):
    name = ndb.StringProperty()
    details = ndb.TextProperty()
    turl = ndb.StringProperty()
    links = ndb.StringProperty(repeated = True)
    tags = ndb.StringProperty(repeated = True)
    destinations = ndb.KeyProperty(Destination1, repeated = True)

class Destination1(ndb.Model):
    name = ndb.StringProperty()
    location = ndb.StringProperty()
    durl = ndb.StringProperty()
    description = ndb.StringProperty()
    deatils = ndb.StringProperty()
    tags = ndb.StringProperty(repeated = True)
    links = ndb.StringProperty(repeated = True) 
```

我之前使用`repeated=True`的不支持嵌套的概念。`StructredProperty`

# javascript - 在 onmousedown 的 Raphael 函数中包含 labelPath

> ID：12075228
> 
> 赞同：1
> 
> 时间：2012-08-22T14:22:05.810
> 
> 标签：javascript, text, for-loop, raphael, onmousedown

澳大利亚地图的 Raphael 示例具有以下脚本（已修改为在形状路径顶部的文本标签中包含名称）：

```
 <script type="text/javascript" charset="utf-8">
        window.onload = function () {
            var R = Raphael("paper", 800, 600);
            var attr = {
                fill: "#eee",
                stroke: "#666",
                "stroke-width": 1,
                "stroke-linejoin": "round"
            };
function labelPath( pathObj, text, textattr )
{
    if ( textattr == undefined )
        textattr = { 'font-size': 11, fill: '#000', stroke: 'none', 'font-family': 'Arial,Helvetica,sans-serif', 'font-weight': 40 };

    var bbox = pathObj.getBBox();
    var textObj = pathObj.paper.text( bbox.x + bbox.width / 2, bbox.y + bbox.height / 2, text ).attr( textattr );
    return textObj;

}
            var alb = {};
        alb.cudhi = R.path("m 619.04203,203.24913 -3.9,5.4 -4.2,3.6 -8.7,5.4 -6.9,8.1 -3,2.7 -5.1,5.4 -2.7,0 -2.1,0 -6,2.7 -3,0 -3.9,-5.4 -5.7,-9 -3,-7.2 3,-5.4 0,-6.3 -8.1,-13.5 -1.8,-4.5 0,-3.6 -6.9,-5.4 -5.1,7.2 -4.8,-7.2 -6,-12.6 -3.9,-8.1 -3.9,-9 3,-8.1 0,-8.1 0,-6.3 -9,-8.1 -4.8,-8.1 -5.1,-5.4 -0.9,-6.3 -1.2,-9 -3.9,0 -8.7,-4.5 -10.8,-6.3 -5.1,-7.2 -1.8,-10.8 -1.2,-6.3 -3.9,-9 0,-9.9 -1.8,-13.5 1.8,-4.5 2.1,-3.6 4.8,0 6,-2.7 6,-2.7 4.8,7.2 9,14.4 9.9,13.5 9.6,6.3 4.2,1.8 10.8,0.9 18.6,-5.4 5.1,3.6 4.8,4.5 9.9,9.9 0.9,0.9 5.1,5.4 5.7,6.3 6.9,9.9 0,9.9 9,2.7 3,0.9 10.8,9.9 7.8,11.7 1.2,0.9 9.9,9 8.7,0.9 0.9,6.3 -0.9,10.8 -0.9,11.7 -2.1,4.5 -3,5.4 -7.8,6.3 -1.8,7.2 0,2.7 -1.2,3.6 -0.9,4.5 -3.9,2.7 -3.9,6.3 z").data('id', 'alb["cudhi"]').attr(attr);
        alb.kruje = R.path("m 447.14203,127.64913 -4.8,-9.9 -6,-6.3 -3.9,-6.3 -3.9,-5.4 -6,-6.3 -3.9,-7.2 -1.8,-9 -5.1,-9 -3,-9.9 3,-2.7 6,0 10.8,2.7 3.9,0 6,0 9.9,-5.4 9.9,-4.5 11.7,-5.4 3.9,9 1.2,6.3 1.8,10.8 5.1,7.2 10.8,6.3 8.7,4.5 3.9,0 1.2,9 0.9,6.3 5.1,5.4 4.8,8.1 9,8.1 0,6.3 0,8.1 -3,8.1 3.9,9 3.9,8.1 6,12.6 4.8,7.2 -6.9,4.5 -7.8,6.3 -9,7.2 -3.9,6.3 -3.9,4.5 -3.9,7.2 -2.1,-3.6 -3,-4.5 -5.7,-0.9 -6,0 0,-12.6 4.8,1.8 3,-0.9 0.9,-3.6 -2.7,-9.9 -2.1,-5.4 -3,-3.6 -10.8,-4.5 -9,-6.3 -4.8,-5.4 -9.9,-6.3 -3.9,-8.1 -2.1,-9.9 -3,-8.1 z").data('id', 'alb["kruje"]').attr(attr);

labelPath( alb["cudhi"], "Cudhi" );
labelPath( alb["kruje"], "Kruje" );

            var current = null;
            for (var state in alb) {
                alb[state].color = Raphael.getColor();
                (function (st, state) {
                    st[0].style.cursor = "pointer";
                    st[0].onmousedown = function () {
                        current && alb[current].animate({fill: "#eee", stroke: "#666"}, 500) && (document.getElementById(current).style.display = "");
                        st.animate({fill: st.color, stroke: "#ccc"}, 500);
                        st.toBack();
                        R.safari();
                        document.getElementById(state).style.display = "block";
                        current = state;
                    };
                    if (state == "durres") {
                        st[0].onmousedown();
                    }
                })(alb[state], state);
            }
        };
        </script> 
```

现在，“onmousedown”函数在指针位于路径上时起作用，但是，当鼠标位于文本/标签路径上时它不起作用。

有没有办法通过修改“ `for (var state in alb)`”循环以包含 labelPath 来添加此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:12:32.293

有很多方法可以解决这个问题。您可以将`alb`对象的成员设置为集合而不是路径，然后将标签添加到这些集合中——这样，标签和路径将共享相同的单击处理程序。不幸的是，这也会使您的路径动画也适用于标签，因此可能不可行。

或者，您可以分配`data`（使用 Raphael 的内置[Element.data](http://raphaeljs.com/reference.html#Element.data)方法）给特定键，使用相同的值用于属于一起的项目。例如，路径和标签都将具有数据 'click-group' = 'Cudhi'。然后，您可以使用 Paper.forEach 来识别配对在一起的每个元素并为其分配适当的点击处理程序。

这是一个[演示这种机制的小提琴](http://jsfiddle.net/kevindivdbyzero/QzBXD/)。

我相信还有其他方法可以做到这一点！使用`Paper.forEach`和`Element.data`/或`Element.id`对我来说似乎是特别有前途的工具。

# c++ - 关于 .lib 文件、.dll 文件、后期绑定、嵌入式应用程序的基本问题？

> ID：12075229
> 
> 赞同：1
> 
> 时间：2012-08-22T14:22:07.883
> 
> 标签：c++, dll, opencv, embedded, shared-libraries

在过去的 4 个月里，我开始使用 OpenCV 和 OpenSceneGraph 等第 3 方库，我有一些基本问题......

1.）当我们使用任何函数时，我们在程序中提到的lib文件（包含函数）（例如-lcv.lib，-lhighgui.lib）会依次调用bin文件夹中的相应.dll文件吗？这个调用发生在运行时？

2.) 使用 CMAKE、MAKE 和 Visual Studio 解决方案文件从源代码中静态构建和动态构建 lib 文件和 dll 文件有什么区别？

3.) 使用 .dll 的好处仅仅是为了减小可执行代码的大小吗？

4.）在嵌入式视觉应用程序（或任何使用库的嵌入式应用程序）中，整个可执行代码是否转储在处理器/控制器/芯片中？嵌入式应用程序中是否有后期绑定或运行时调用的概念？

请对这些问题提供一些见解，以便我可以了解我使用的代码中发生了什么......提前谢谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T05:22:06.163

> 1.) when we use any function does the lib files (containing the function) which we mention (e.g. -lcv.lib , -lhighgui.lib) in our program in turn call the respective .dll files found in the bin folder?does this call take place at runtime?

yes, the libs contain only information for the linker to be able to resolve the functions addressed in your exe. the actual code is loaded during runtime.

> 2.)whats the difference between static build and dynamic build of the lib files and dll files from the source code using CMAKE,MAKE and Visual Studio Solution files?

none, visual studio just makes it a bit more convenient (subjectively).

> 3.)is the benefit of using .dll only to reduce the size of the executable code?

it is possible (if compatible with previous version e.g. interface not changed) to change the dll contents without recreating the exe.

one can also lazy load libraries (i.e. not link with a .lib file and instead use LoadLibrary/GetProcAddress) at a later point and thus one could have optional functionality in a dll and if it is there enable but still be able to run if the dll is not found.

> 4.)in embedded vision applications (or any embedded application using libraries) is the whole executable code dumped in the processor/controller/chip?is there any concept of late binding or runtime call in embedded applications?

it depends on the OS, often (at least in the embedded projects I have been involved so far) static libs are used because the OS on the embedded device doesn't support shared libraries. if the OS supports it then fine but often the hardware/software on embedded devices is very limited.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:50:27.633

是的，关键是要消除重复，这样您就没有 100 个应用程序都在其可执行文件中内置了相同库的副本。理论上，这也将允许在一个地方完成对库的更新，而不是更新 100 个应用程序。

动态链接是操作系统支持的功能。所以答案取决于您在嵌入式系统上运行的操作系统。许多嵌入式目标都在运行 Linux，因此在这种情况下，您的行为与在 PC 上完全相同。

微控制器上较小的操作系统通常不支持动态链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:51:01.577

默认情况下，dll 在应用程序启动时加载，但您可以手动更改加载 dll（不记得它是如何工作的，但有点无聊）。静态构建意味着您需要的所有 opencv 函数都在 .exe 文件中，而不是在您机器上的某个位置。

我会说对于真正的嵌入式应用程序，最好使用静态链接，因为您通常只运行一个程序。在您的机器上，您将有 20 个使用 opencv 的程序，因此如果您让它们动态加载 dll，它应该会在您的机器上节省大量内存。由于 opencv 每 3 个月更改一次版本，我会说最好将 opencv 作为静态链接分发。对于大型程序，它更有意义....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T15:16:57.650

您可以将代码编译为单个巨大的可执行文件，将所有模块复制到自身中，或者将它们编译为一个小的可执行文件和一组动态可加载的模块，以 DLL 或共享库的形式。共享库/DLL 使您的可执行代码模块化、可维护并允许可执行代码的可重用性，从而使您的可执行文件的大小更小。您可以独立且轻松地将修复程序发送到您的动态模块，而无需触及您的主要可执行文件。此外，许多可执行文件可以在运行时共享和加载相同的 DLL/共享库，从而实现可重用性并减少磁盘空间需求。

现在，您的动态模块可以使用其他 3rd 方库，这些库可以作为动态模块本身再次发布。这意味着每当您的动态模块被引用时，系统将尝试定位并解析它所依赖的模块。因此，它是一个依赖解决链。

据我了解，嵌入式系统使用小型嵌入式操作系统。您可以将您的应用程序发送到操作系统可以引用的某种内存上；它可以是可插入的磁盘驱动器或嵌入式存储设备或其他东西，具体取决于嵌入式系统的复杂程度。如果操作系统支持动态加载共享模块，那么您当然可以将您的应用程序作为一组可执行和动态模块发布。

# c++-cli - 如何使用 C++/CLI ClickOnce App 引导 C++ 2010 Redistributable？

> ID：12075235
> 
> 赞同：0
> 
> 时间：2012-08-22T14:22:23.063
> 
> 标签：c++-cli, clickonce, bootstrapper, prerequisites

我有一个旧的 C++ 应用程序，最近添加了 CLR 支持。这样我就可以使用 mage.exe 生成将应用程序创建为 ClickOnce 应用程序所需的清单文件。经过一些令人沮丧的工作，我能够创建清单文件。

现在，我想创建 setup.exe 文件，类似于在 C# 项目中使用“发布”选项时所获得的文件。该文件将检查 .NET Framework 4.0、Windows Installer 3.1 和 Visual C++ 2010 x86 Redistributable 的先决条件，并在必要时进行安装。

我曾尝试使用 Bootstrapper Manifest Generator，但我不确定如何让它检查并安装所有 3 个先决条件并启动我拥有的 ClickOnce .application 文件。该产品的文档有点零碎。

我还尝试使用 msbuild /target:publish 来模仿您在 C# 项目中看到的发布选项，但没有成功。

我什至尝试编辑 .vcxproj 文件以包含 BootstrapperFile （如此处所示：http: [//msdn.microsoft.com/en-us/library/ms164294.aspx](http://msdn.microsoft.com/en-us/library/ms164294.aspx)和[CustomAction 在开发计算机上成功，在部署计算机上失败](https://stackoverflow.com/questions/3373890/customaction-succeeds-on-development-computer-fails-on-deployment-computer)）徒劳无功。

是否可以在我的应用程序清单 (myapp.exe.manifest) 中添加一些依赖项，类似于如何将 CLR 设置为 preRequisite？

```
<dependency>
    <dependentAssembly dependencyType="preRequisite" allowDelayedBinding="true">
          <assemblyIdentity name="Microsoft.Windows.CommonLanguageRuntime" version="4.0.30319.0" />
</dependentAssembly>
</dependency> 
```

那么，任何人都可以就我如何生成一个安装包来检查我上面提到的先决条件，如有必要进行安装，然后启动我的 ClickOnce .application 文件提供任何指导吗？我认为这里的难点在于它是一个 C++ CLI Clickonce 应用程序，并且没有 IDE 支持来创建安装包。

# java - Proguard 混淆在使用 Maven 的 Jenkins 构建中失败 - 无法读取 classes.jar

> ID：12075238
> 
> 赞同：2
> 
> 时间：2012-08-22T14:22:29.320
> 
> 标签：java, linux, maven, jenkins, proguard

我正在使用 Jenkins 在 Linux 机器上构建一个 Maven 项目并收到以下错误：

> [proguard] 错误：无法读取 [/usr/lib/jvm/java-6-openjdk-amd64/Classes/classes.jar] （没有这样的文件或目录）

我已经安装了 JDK 并将 JAVA_HOME 变量设置为：/usr/lib/jvm/java-6-openjdk-amd64

但是，如果我查看 Jenkins 的“系统信息”部分，我会得到两个 java home 位置：

> java.home: /usr/lib/jvm/java-6-openjdk-amd64/jre
> 
> JAVA_HOME：/usr/lib/jvm/java-6-openjdk-amd64

当我在 MacOS 上运行项目时，proguard 插件可以完美运行，所以我知道它与我的项目设置无关。我在 Jenkins 中缺少的东西或 Java 是如何安装在我的服务器上的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T11:02:06.710

您正在使用 proguard 插件吗？您是否在 pom.xml 中包含以下内容？

```
<libs>
    <lib>${java.home}/Classes/classes.jar</lib>
</libs> 
```

我猜，你的开发环境是一个 mac 盒子，而你的 jenkins 是在一个 linux 盒子里运行的。所以这就是问题所在。
以下设置可以在 linux 中运行。而且如果你在mac上安装Oracle Jdk 1.7或者1.8也可以。

```
<libs>
     <lib>${java.home}/lib/rt.jar</lib>
</libs> 
```

我的观点是，问题的关键在于 libs 设置来自使用苹果 java6 的 mac，而 jenkins 在 linux 上。

# android - Android - 对 SmsManager 的一些更改 - 启动一个活动

> ID：12075243
> 
> 赞同：0
> 
> 时间：2012-08-22T14:22:43.733
> 
> 标签：android

我对 SmsManager 进行了一些更改。因此，我不想抛出异常，而是希望 SmsManager 与之通信或启动活动。

我可以这样做吗？如果答案是肯定的，我该怎么做？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:33:06.667

```
PendingIntent sentPI = PendingIntent.getBroadcast(context, 0,new Intent("SMS_SENT"), 0);  

public class MessageSentReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                    Toast.makeText(context, "SMS Sent", Toast.LENGTH_SHORT).show();
                break;
            default:
                    Toast.makeText(context, "SMS Failed To Sent", Toast.LENGTH_SHORT).show();
                break;
            }
        }
    } 

this.registerReceiver(new MessageSentReceiver() , new IntentFilter("SMS_SENT")); 
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage("Phone_No", null, "Text Body", sentPI, null); 
```

通过这种方式，您可以获得已发送消息的通知。
如果您想要消息传递的通知，那么您可以以与已发送通知相同的方式实现它。[您可以从Developer.android](http://developer.android.com/guide/components/intents-filters.html)
获取有关意图和待处理意图的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:18:07.297

使用 SMSManager，您可以使用`SmsManager.getDefault()`方法发送短信。

```
SmsManager smsManager = SmsManager.getDefault();
    smsManager.sendTextMessage("phoneNo", null, "sms message", null, null); 
```

[在这里你可以找到一些与你有关的](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html)。
要启动另一个活动，您可以使用[Intent](http://developer.android.com/reference/android/content/Intent.html)。

# php - PHP NuSOAP Web 服务错误

> ID：12075244
> 
> 赞同：0
> 
> 时间：2012-08-22T14:22:44.860
> 
> 标签：php, service, web, nusoap

我有一个带有 NuSOAP 的 PHP Web 服务我有一个复杂的类型，然后与堆栈上的另一个帖子相同，请参见下文：

```
#SERVER    
$server->wsdl->addComplexType('User',
'complexType','struct', 'all', '',
array(  'id' => array('name' => 'id', 'type' => 'xsd:int'),
    'username' => array('name' => 'username','type' => 'xsd:string'),
    'password' => array('name' => 'password','type' => 'xsd:string'),
    'email' => array('name' => 'email','type' => 'xsd:string'),
    'authority' => array('name' => 'authority','type' => 'xsd:int'),
    'isActive' => array('name' => 'isActive','type' => 'xsd:int'),
    'area' => array('name' => 'area','type' => 'xsd:string')
)
);
$server->register('ws_getUser',
    array('user_id' => 'xsd:integer'),
    array('user' =>  'tns:User'),
    $namespace,
    "$namespace#ws_getUser",
    'rpc',
    'encoded',
    'Retorna un usuario'
);

function ws_getUser($user_id){
    return new soapval('return', 'tns:User', getUser($user_id));
}

#CLIENT
require_once('./classes/nusoaplib/nusoap.php');
$client = new soapclient('http://localhost/api.php?wsdl');
$result = $client->__call('ws_getUser', array('id' => '1', 'username' => 'user', 'password' => 'pass', 'email' => 'user@email.co.za', 'authority' => '1', 'isActive' => '1', 'area' => 'usa'));

// Display the result
var_dump($result); 
```

但是我不断从服务中收到错误，我尝试了很多不同类型的复杂类型更改，但不断收到相同的错误。

# 错误

致命错误：未捕获的 SoapFault 异常：[Client] 看起来我们在 C:\wamp\www\api.php:26 中没有 XML 文档堆栈跟踪：#0 C:\wamp\www\api.php(26): SoapClient ->__call('ws_getUser', Array) #1 {main} 在第 26 行的 C:\wamp\www\api.php 中抛出

我在 PHP 5.4.3 和 Nusoap 库 0.9.5 中使用 wamp 如果有人能告诉我问题是什么谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:28:17.840

我使用 wamp 弄清楚了我启用了soap扩展，每次我注册客户端或服务器时，它都会找到默认soap的类而不是nusoap

正确的 $client = new nusoap_client('http://localhost/nusoap/server.php?wsdl'); 错误的 $client = new soapclient('http://localhost/nusoap/server.php?wsdl');

与服务器相同。

我收到的 php 错误是因为这个，而且它的格式不正确。普通soap ext 将其作为stdClass 返回。

# java - PMD 错误 - AvoidThrowingRawExceptionTypes

> ID：12075245
> 
> 赞同：3
> 
> 时间：2012-08-22T14:22:45.763
> 
> 标签：java, exception-handling, pmd

我有一个类如下，当我运行 PMD 规则时，我得到一个 PMD Alert 类型`AvoidThrowingRawExceptionTypes`。我无法解决这个问题，因为当我在构造函数 throws 子句中添加任何其他异常类型时，我遇到了错误

```
new PersistenceManager(CommonConstants.IP_DB) 
```

如何解决这个问题？有人可以帮我吗？

```
public class PersistenceManager implements CommonConstants {
.....

/**
     * Stores the persistence mgr for IPMasterData_DB
     */
    public static PersistenceManager IPMasterData_DB  = new PersistenceManager(
                                                              CommonConstants.IP_DB);
     /**
             * Configures the data source according to the resource passed.
             * 
             * @param dbName
             *        Databasename
             */
            protected PersistenceManager(String dbName) throws Exception{
                String resourceName = "";
                if (LOGGER == null) {
                    LOGGER = Logger.getLogger(PersistenceManager.class);
                }
                try {

                    resourceName = getConfigFileName(dbName);

                    this.sessionFactory = new Configuration().configure(resourceName)
                            .setProperty("hibernate.jdbc.batch_size",
                                    PersistenceManager.getBatchSize(dbName))
                            .buildSessionFactory();
                } catch (HibernateException ex) {
                    ex.printStackTrace();
                    LOGGER
                            .error("Exception building SessionFactory for configKey ",
                                    ex);
                    throw new RuntimeException(ErrorConstants.SESSIONFACTORY_BUILD, ex);
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:30:31.760

抛出专门的异常而不是一般的异常是一种很好的编程习惯。`PMD`可以检测到并就此向您提供建议，而这正是我们所做的。

将您的异常包装在一个专门的异常中并抛出它，而不是抛出`RuntimeException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T06:58:56.053

据我了解，PMD 批评的不是 throws 子句而是`throw new RuntimeException(..`. 您可以让 throws 子句保持原样，但抛出一个新的（更具体的）RuntimeException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-23T07:32:52.143

PMD 指的是编程错误检测器。一个好的做法是 java 抛出特定的错误/异常，而不是抛出通用/一般异常。

例如，ArrayIndexOutOfBoundsException 是 java 中 RuntimeException 的子类。如果您知道您的代码可能会在某些时候抛出 ArrayIndexOutOfBoundsException，但您必须抛出 ArrayIndexOutOfBoundsException 而不是一般异常 -RuntimeException。

# php - JMSSerializerBundle 安装：可捕获的致命错误：参数 1 传递给 JMSSerializerBundle\Twig\SerializerExtension::__construct()

> ID：12075247
> 
> 赞同：0
> 
> 时间：2012-08-22T14:22:55.170
> 
> 标签：php, symfony

我尝试安装 JSMSerializerBundle，但在 1.1 版本中使用元数据库事件。当我想清除我的缓存时，它失败并出现错误：

> [ErrorException]
> 可捕获的致命错误：
> 传递给的参数 1`JMS\SerializerBundle\Twig\SerializerExtension::__construct()`必须是 的实例`JMS\SerializerBundle\Serializer\SerializerInterface`，`Symfony\Component\Serializer\Serializer`给定的实例，
> 
> `/opt/lampp/htdocs/Korum/app/cache/dev_new/appDevDebugProjectContainer__5033ecec2dcbc__.php`在第 2397 行调用并在`/opt/lampp/htdocs/K/vendor/bundles/JMS/SerializerBundle/Twig/SerializerExtension.php`第 37行定义

事实上，`AppKernel`代码对我来说似乎很奇怪`$this`：

```
// in AppKernel::registerBundles()
$bundles = array(
    // ...
    new JMS\SerializerBundle\JMSSerializerBundle($this),
    // ...
); 
```

你也有这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:24:59.617

我解决了我的问题。

这是 config.yml 中的配置问题，与 AppKernel 中未注册的 Bundle 问题有关。

# jquery - Jquery 自动完成附加属性

> ID：12075251
> 
> 赞同：0
> 
> 时间：2012-08-22T14:23:14.450
> 
> 标签：jquery, html, jquery-ui

目前我正在尝试将一个附加值从我的数据库传递到自动完成文本字段，但发现它不成功。

下面是我当前自动完成的 javascript 代码。

```
 var fullurl = app.php
    $.getJSON(fullurl, function(result) {
        var elements = [];
        $.each(result, function(i, val) {
            elements.push(val.name);
        });

        $('#App').autocomplete({
            source : elements,
            minLength : 0
        }).focus(function() {
            if ($(this).autocomplete('widget').is(':visible')) {
                return;
            }
            $(this).data('autocomplete').search($(this).val());
        });
    }); 
```

目前，一旦通过自动完成选择了一个选项，这将返回以下 html

```
<input type="text" rel="" id="App" class="input-xlarge ui-autocomplete-input" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true"> 
```

因此，一旦我使用诸如此类的简单 jquery 语句检查所选值是什么，我只会得到应用程序名称。

```
var searched = $('#App').val(); //returns my value 
```

如何将一些额外的数据传递到我的自动完成中，例如 rel 属性中的 App ID 值。因此，当我编写类似下面的内容时，我也会得到应用程序 ID。

```
var searched = $('#App').val(); //returns my value
var applicationID = $('#App').attr('rel'); //how do I implement this? the AppID should get passed thru the db. 
```

谢谢你。

# spring - java.sql.SQLException: operation not allowed: 在将数据插入 Oracle clob 数据类型时，流类型不能用于批处理

> ID：12075253
> 
> 赞同：11
> 
> 时间：2012-08-22T14:23:25.133
> 
> 标签：spring, hibernate, jsp, oracle10g, clob

我正在使用带有 Spring 3.0.2 版的 Hibernate Tools 3.2.1.GA。我想将数据插入到 Oracle (10g) 数据库字段的类型`clob`如下。

```
Clob c=Hibernate.createClob(request.getParameter("someTextFieldValueOnJSPPage");
pojoObj.setSomeClobProperty(c); 
```

它工作得很好但是当我尝试使用[CKEditor](http://ckeditor.com/blog/CKEditor_for_Java_released)插入数据流时， 我的 JSP 页面上的[演示](http://ckeditor.com/demo)`<textarea></textarea>`（CKEditor 只是呈现一个 HTML元素）可能涉及格式化文本以及图像、flash 等，它会引发以下异常.

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.exception.GenericJDBCException: could not update: [model.Cms#1] 
```

* * *

```
org.hibernate.exception.GenericJDBCException: could not update: [model.Cms#1] 
```

* * *

```
java.sql.SQLException: operation not allowed: streams type cannot be used in batching 
```

如何解决该异常？这是[Oracle驱动程序问题](http://srikanth-myjavaj2eeblog.blogspot.in/2008/08/javasqlsqlexception-operation-not.html)还是其他问题？我正在使用`ojdbc14.jar`, `Oracle JDBC Driver version - 9.0.2.0.0`。

* * *

**更新：**

使用该`Clob`类型的实体之一是

```
public class Cms  implements java.io.Serializable
{
     private BigDecimal cmsId;
     private Clob aboutUs;     //I'm currently dealing with this property.
     private Clob contactUs;
     private Clob privacyPolicy;
     private Clob returnPolicy;
     private Clob shippingPolicy;
     private Clob termsOfUse;
     private Clob exchangeLinks;
     private Clob disclaimer;
     private Clob aboutProducts;
     private Clob purchasingConditions;
     private Clob faq;

    //Parameterized constructor(s) along with the default one as and when needed.

    //Getters and setters.
} 
```

* * *

在我的 Spring 控制器类中，我使用以下代码对`Clob`Oracle 中的类型执行插入操作。

```
Cms c=new Cms();
c.setCmsId(new BigDecimal(0));
c.setAboutUs(Hibernate.createClob(request.getParameter("txtAboutUs")));
session.save(c);
session.flush();
session.getTransaction().commit();
model.put("status", "1");
model.put("msg","Insertion done successfully.");
//setParameter(cb); 
```

where`model`是Spring 控制器类中方法`Map model`的一个形式参数，`submit()`当在 JSP 页面上单击提交按钮时调用该方法。

* * *

我在 Spring 控制器类中使用以下简单方法检索数据

```
private void getData(Map model)
{
    Session session=NewHibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Cms>list=session.createQuery("from Cms order by cmsId desc").list();
    model.put("list", list);

    session.flush();
    session.getTransaction().commit();
} 
```

尝试按照[此处](https://stackoverflow.com/q/1644559/1391249)提到的方法进行操作，但无济于事（我面临与该问题中指定的相同异常）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-28T03:51:43.913

问题中提到的抛出异常是由于旧版本的 Oracle 驱动程序似乎不适用于 Oracle clob 数据类型。我正在使用`Oracle JDBC Driver version - 9.0.2.0.0`. [我从这里](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html)下载了一个新版本，它`Oracle JDBC Driver version - 10.2.0.5.0`在所有情况下都适用于我的应用程序。

在互联网的某个地方，有人说如果 CKEditor 保存的数据在插入 Oracle clob 数据类型时被转换（编码）为 base64，则该方法将在不更新驱动程序的情况下工作（意味着使用旧版本的Oracle 驱动程序）（这显然需要在从数据库中检索数据时从 base64 解码）。

但我确实没有付诸实践，因为我下载的新版本的驱动程序对我来说很好用。所以，我不确定后面的方法，我把它留给读者。

# bash - bash：将五行输入组合到每行输出

> ID：12075260
> 
> 赞同：3
> 
> 时间：2012-08-22T14:23:48.970
> 
> 标签：bash, shell, unix

我有一个输入文件如下：

```
MB1 00134141 
MB1 12415085 
MB1 13253590
MB1 10598105
MB1 01141484
...
...
MB1 10598105 
```

我想将 5 行合并为一行。我希望我的 bash 脚本处理 bash 脚本以产生如下输出 -

```
MB1 00134141 MB1 12415085 MB1 13253590 MB1 10598105 MB1 01141484
...
...
... 
```

我已经编写了以下脚本并且它可以工作，但是对于大小为 23051 行的文件来说速度很慢。我可以编写更好的代码以使其更快吗？

```
#!/bin/bash
file=timing.csv
x=0
while [ $x -lt $(cat $file | wc -l) ]
do
   line=`head -n $x $file | tail -n 1`
   echo -n $line " "
   let "remainder = $x % 5"
   if [ "$remainder" -eq 0 ] 
   then
        echo ""
   fi
   let x=x+1
done
exit 0 
```

我尝试执行以下命令，但它弄乱了一些数字。

```
cat timing_deleted.csv | pr -at5 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-15T17:52:28.373

使用 tr：

```
cat input_file | tr "\n" " " 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T14:50:47.143

使用粘贴命令：

```
 paste -d ' ' - - - - - < tmp.txt 
```

* * *

`paste`好得多，但我不能让自己删除我以前`mapfile`的基于解决方案。

[更新：与[4.2.35](ftp://ftp.gnu.org/gnu/bash/bash-4.2-patches/bash42-035)版本一起使用时`mapfile`读取了太多行]`-n`

```
#!/bin/bash
file=timing.csv
while true; do
    mapfile -t -n 5 arr
    (( ${#arr} > 0 )) || break
    echo "${arr[*]}"
done < "$file"
exit 0 
```

我们不能这样做`while mapfile ...; do`，因为`mapfile`即使它没有读取任何输入，它也以状态 0 存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T14:26:58.687

使用 sed，但这个不会处理最后几行不加到 5 的因素：

```
 sed 'N;N;N;N;s/\n/ /g;' input_file 
```

该`N`命令读取下一行并将其附加到当前行，保留换行符。该脚本为它读取的每一行额外读取四行，在缓冲区中累积 5 行的块。对于每个这样的块，它用空格替换所有换行符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T14:27:54.553

`xargs`如果您的输入始终包含每行一致数量的空格，则可以使用：

```
cat timing_deleted.csv | xargs -n 10 
```

这将从`cat timing_deleted.csv`10 ( `-n 10`) 个空白字符中获取输入并将输入组合起来。每列中的空格，例如`MB1 00134141`，算作空白字符 - 以及每行末尾的换行符。因此，对于 5 行，您需要使用 10。

**编辑**
正如查尔斯评论的那样，您可以跳过使用`cat`并直接将数据推送到`xargs`：

```
xargs -n 10 < timing_deleted.csv 
```

我没有注意到使用非常大的文件有任何性能提升，但它不需要多个命令。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-22T14:44:07.200

在纯 bash 中，没有外部进程（为了速度）：

```
while true; do
  out=()
  for (( i=0; i<5; i++ )); do
    read && out+=( "$REPLY" )
  done
  if (( ${#out[@]} > 0 )); then
    printf '%s ' "${out[@]}"
    echo
  fi
  if (( ${#out[@]} < 5 )); then break; fi
done <input-file >output-file 
```

这可以正确处理行数不是 5 的倍数的文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T16:32:10.577

一个 awk 脚本可以做到这一点。我猜也是一个 sed 替换。我不太了解 sed，所以给你。

```
NF{ 
    if(i>=5){
        line = line "\n";
        i=0;
    }else{
        line = line " " $0;
        i++;
    }
}

END{
    print line;
} 
```

称之为merge.awk。这是您调用它的方式：

```
 awk -f merge.awk filetomerge.txt 
```

或者 `cat filetomerge.txt | awk -f merge.awk`

也应该相当快。

# tsql - TSQL：用分号分隔的值将一列拆分为多行

> ID：12075263
> 
> 赞同：2
> 
> 时间：2012-08-22T14:24:08.993
> 
> 标签：tsql

尝试从旧数据库迁移到存储数据方式的新数据库有点不同。

在一种特定情况下，我有一列包含分号分隔的值，我想将其分成多行。

这是一个例子：

```
SELECT 
    p.idperson, 
    p.roleperson
FROM person p 
```

上面的 TSQL 生成以下输出

```
idperson roleperson
1001    ;214401;
1002    ;214201;214401;
1003    ;212101; 
```

我想将其转换为：

```
idperson roleperson
1001    214401
1002    214401
1002    214201
1003    212101 
```

也就是说，我想将具有多个值的行分成两行。在不创建游标或循环的情况下这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T14:24:08.993

在写这篇文章时，我想出了一个使用交叉应用和自定义拆分功能的简单方法。因此，我将发布我如何使用这个自包含的 SQL 来解决它的问题，而不是仅仅问这个问题；）

```
-- set up a split function
GO
CREATE FUNCTION [dbo].[TempSplit] (@sep char(1), @s varchar(512))
RETURNS table
AS
RETURN (
    WITH Pieces(pn, start, stop) AS (
      SELECT 1, 1, CHARINDEX(@sep, @s)
      UNION ALL
      SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)
      FROM Pieces
      WHERE stop > 0
    )
    SELECT pn,
      SUBSTRING(@s, start, CASE WHEN stop > 0 THEN stop-start ELSE 512 END) AS s
    FROM Pieces
  )
GO

-- set up some test data
DECLARE @personroles TABLE 
    (
        idperson INT,
        rawroleoptions NVARCHAR(MAX)
    )

INSERT INTO @personroles VALUES (1, ';1;2;3;')
INSERT INTO @personroles VALUES (2, ';4;5;6;')
INSERT INTO @personroles VALUES (3, ';7;')

-- the actual work --
;WITH data AS
(
    SELECT 
        p.idperson,
        p.rawroleoptions

    FROM @personroles p
)
SELECT * FROM data r
CROSS APPLY  
    (SELECT s AS [ExtractedValue] FROM dbo.TempSplit(';',r.rawroleoptions) WHERE LEN(s)>0) d

-- clean up --
GO
DROP FUNCTION dbo.TempSplit
GO 
```

运行上述内容后，这就是 SQL 输出的内容。

![值拆分为新行](../Images/477b7d389b4b58b3eef6630468ea49d6.png)

# hadoop - Hadoop 作业在本地模式下运行。但是 Oozie 作业以分布式模式运行

> ID：12075266
> 
> 赞同：0
> 
> 时间：2012-08-22T14:24:12.660
> 
> 标签：hadoop, cloudera, oozie

在我们的集群上，即使是最简单的作业“wordcount”也在本地模式下运行。但是之前有一些作业使用 oozie 运行，我们观察到它们以集群模式运行。本地 hadoop 作业与使用 oozie 运行的 hadoop 作业是否存在冲突？这是错误堆栈跟踪-

```
java.lang.IllegalArgumentException: Can't read partitions file
    at org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.setConf(TotalOrderPartitioner.java:111)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:62)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:560)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:639)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210) 
```

引起：java.io.FileNotFoundException：文件_partition.lst 不存在。在 org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:408) 在 org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:251) 在 org.apache.hadoop.fs.FileSystem.getLength (FileSystem.java:825) 在 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:1480) 在 org.apache.hadoop.io.SequenceFile$Reader.(SequenceFile.java:1475) 在 org. org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.setConf(TotalOrderPartitioner.java:82) 上的 apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.readPartitions(TotalOrderPartitioner.java:296)

我们的工作在没有安装 Oozie 的测试集群上运行良好。因此不确定这两件事是否相关。提前致谢。

我们正在使用 Cloudera 发行版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:41:44.227

听起来他们确实使用了不同的配置。我首先要确保您正在运行的所有内容都使用相同的 HADOOP_HOME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:03:29.217

经过多次重试，我们现在切换到 BigInsights。我个人认为 CDH 是一种很棒的 Hadoop 风格。但由于我们没有完成原始安装，依赖的开销对我们的项目来说太大了。正如我们之前在 BigInsights 上取得的成功一样，我们希望复制它。

# java - 无法从项目文件夹 xsd 读取 xsd 文件

> ID：12075275
> 
> 赞同：1
> 
> 时间：2012-08-22T14:24:46.537
> 
> 标签：java, xml, jaxb

我正在尝试在 WEB-INF 内的 xsd 文件夹下验证我的项目中的 xsd。请找到我开发的代码

```
JAXBContext jc = JAXBContext.newInstance(OTAHotelResRQ.class);

JAXBSource source = new JAXBSource(jc, reqJAXB);

SchemaFactory sf =SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI); 

Schema schema = sf.newSchema(new File("XSD/OTA_HotelResRQ.xsd"));

Validator validator = schema.newValidator();

validator.validate(source); 
```

但我无法从 XSD 读取它。它显示以下异常

```
java.lang.RuntimeException: org.apache.cxf.interceptor.Fault: schema_reference.4: Failed to read schema document 'file:///D:/hayyat/softwares/jboss-4.2.3.GA/bin/XSD/OTA_HotelResRQ.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
    at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:116)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:322)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:154) 
```

所以请解决我的问题。

问候纳尔西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:27:51.043

将 XSD 放在类路径中（WEB-INF/classes 或 lib 中的 jar）并从类路径中读取。

[如何在 Web 应用程序中读取属性文件？](https://stackoverflow.com/questions/3160691/how-to-read-properties-file-in-web-application)

[从类路径资源（XML 文件）获取输入流](https://stackoverflow.com/questions/793213/getting-the-inputstream-from-a-classpath-resource-xml-file)

# caching - 继承 FBSessionTokenCachingStrategy 时出错

> ID：12075283
> 
> 赞同：1
> 
> 时间：2012-08-22T14:25:03.473
> 
> 标签：caching, token, facebook-ios-sdk

我正在尝试将 facebook-ios SDK 3.0 集成到我的应用程序中 - 我正在使用 rails/devise 作为我的应用程序的后端来管理用户。

现在我正在尝试[按照这里的建议派生一个自定义类 FBSessionTokenCachingStrategy](http://developers.facebook.com/docs/reference/ios/3.0/class/FBSessionTokenCachingStrategy)

问题是当我尝试在这样的子类中继承此类时：

```
#import <Foundation/Foundation.h>
#import <FacebookSDK/FacebookSDK.h>

@interface CustomFBSessionTokenCachingStrategy : FBSessionTokenCachingStrategy

@end 
```

我收到以下错误“尝试使用转发类 'FBSessionTokenCachingStrategy' 作为 'CustomFBSessionTokenCachingStrategy' 的超类”

这对我来说可能是一个非常愚蠢的错误——如果是这样，我很抱歉——但我不知道为什么我不能继承这个类！如果有人能在这里指出我正确的方向，我将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:37:49.733

`FBSessionTokenCachingStrategy.h`不包含在`FacebookSDK.h`. 您需要添加其导入：

```
#import <Foundation/Foundation.h>
#import <FacebookSDK/FBSessionTokenCachingStrategy.h>

@interface CustomFBSessionTokenCachingStrategy : FBSessionTokenCachingStrategy

@end 
```

# iphone - AudioUnitSampleType 类型的样本中的值范围是多少？

> ID：12075284
> 
> 赞同：0
> 
> 时间：2012-08-22T14:25:04.943
> 
> 标签：iphone, ios, core-audio, sample, audiounit

AudioUnitSampleType 是一个 SInt32。当我将它记录到控制台时，我得到的读数大约在 -22000 到 22000 之间。

有人可以解释这些值代表什么吗？他们如何描述波形？我想因为它们是正的和负的，所以轴位于波形的中心。

我如何将这些值转换为分贝，以使 0 dB 最大声？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:46:00.217

尽管样本类型是 32 位 int，但您收到的值通常适合 16 位 int（即 32767..-32767）。32767（或浮点 1.0）对应 0dB。

将样本转换为浮点值后，以分贝为单位的功率如下所示：

```
double sampleValue = (double)intSampleValue / 32767.0;
double db = 20.0 * log10(value); 
```

我已将上述计算作为双精度进行以避免溢出。

# c# - 我可以从 MethodDefinition (Cecil) 获取 MethodInfo 吗？

> ID：12075288
> 
> 赞同：3
> 
> 时间：2012-08-22T14:25:16.473
> 
> 标签：c#, .net, reflection, mono.cecil

我想使用 MethodInfo，有没有办法将 Cecil 的 MethodDefinition 转换为 MethodInfo？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:48:29.813

不——这两种结构虽然内容相似，但彼此之间几乎没有任何关系。

引用Google Groups 上的[这个帖子：](https://groups.google.com/forum/?fromgroups=#!topic/mono-cecil/Lc4LVwMq2e4)

> Cecil 不适用于 CLR 的反射 API；它有自己的内部模型，它自己加载所有程序集，绕过 CLR 的加载机制。

该线程提供了一些关于如何绕过这一事实的想法，但它也正确地指出，在大多数情况下，正确的答案是只使用 CLR 的反射系统，如果那是你真正想要的。

# jquery - 使 ASP.NET 代码块仅对 .aspx 前端页面上的调试/开发可见

> ID：12075290
> 
> 赞同：1
> 
> 时间：2012-08-22T14:25:17.480
> 
> 标签：jquery, asp.net, debugging

*ASP.NET 前端 .aspx 页面（部署时隐藏代码）。*

我试图简单地为我们的开发人员提供一个自动填充这个巨大表单的按钮，我唯一能找到的是：

```
<script>
    $(function () {
        <% If (Context.IsDebuggingEnabled) Then %>
            $('#fillForm').show().on('click', function () {
                // nothing special here, loops through items and fills them in
            });
        <% End If %>

        // other normal JS code here
    });
</script> 
```

问题是当项目被推入*现场*测试环境时，他们仍然看到按钮！它以: 开头`display:none;`，不知何故，即使在部署时，这段代码也会被命中！

**解决方案:: 感谢@Icarus** 测试环境 web.config 也有

`<compilation debug="true">`

为了让它只在我们的开发环境中工作，我必须这样做：

```
<% If (System.Configuration.ConfigurationManager.AppSettings("Environment").ToUpper() = " DEVELOPMENT") Then %>
  // stuff here
<% End if %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:39:55.710

这意味着您`Web.config`的生产中仍然有`debug=true`编译部分。`false`在部署到生产环境时，您应该始终将标志设置为。这会影响性能，并且它可能会暴露更多关于异常的详细信息，而不是希望用户能够看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:28:33.947

根据您的说法，`Context.IsDebuggingEnabled`在您的实时测试环境中必须是正确的。

# javascript - 这个字符串拆分器可以重构或改进吗？

> ID：12075292
> 
> 赞同：0
> 
> 时间：2012-08-22T14:25:30.353
> 
> 标签：javascript, jquery

以下代码片段执行以下操作：

给定一个类似: 的字符串 `"key1=value1;key2=value2;key3=value3"`，它将执行 key1 的查找并使用 jQuery 将 value 设置为 value1：

```
$("#key1").val("value1"); 
```

我的目标是不假设字符串的格式正确，因此它可能没有 a `;`，或者它可能没有`=`. 所以代码应该保护自己不崩溃。

如何使用正确的 javascript 样式/习语来改进这一点：

```
var myString = "key1=value1&key2=value2;key3=value3";
var kvp = myString.split(";");
if (kvp && kvp.length) {
    for (var x = 0; x < kvp.length; x++) {
        var parts = kvp[x];
        if (parts && parts.length && parts.indexOf("=") >= 0) {
           var kv = parts.split("=");
           $("#" + kv[0]).val(kv[1]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:38:16.543

我会将其拆分为一个解析字符串的函数和一个执行 DOM 操作的函数。就像是：

```
function parseString (str, sep, eq) {
  sep = sep || ';';
  eq = eq || '=';

  var result = {};

  if(!str)
    return result;

  var pairs = str.split(sep);
  for (var i = 0, len = pairs.length; i < len; i++) {
    var pair = pairs[i].split(eq);

    // Disregard if we don't have a key
    if(!pair[0].length)
      continue;

    result[pair[0]] = pair[1];
  }

  return result;
}

function setValues(params) {
  for(id in params)
    $('#' + id).value(params[id]);
}

// Add values for ids as specified in myString

var myString = "key1=value1;key2=value2;key3=value3";
setValues(parseString(myString)); 
```

**更新：**

如果您知道代码将在现代 JS 引擎上运行，您可以使用`Array.prototype.map`和`Array.prototype.reduce`以获得更简洁的代码。这仅适用于符合 ES5 的引擎（即，不适用于 IE < 9）。

```
function parseString (str, sep, eq) {
  sep = sep || ';';
  eq = eq || '=';

  if(!str)
    return {};

  function splitPair (pair) { return pair.split(eq) }

  function addResult (result, pair) {
    if(pair[0].length)
      result[pair[0]] = pair[1];

    return result;
  }

  return str.split(sep)
    .map(splitPair)
    .reduce(addResult, {});
} 
```

使用示例`parseString`：

```
console.log(parseString('key1=value1;key2=value2;key3=value3'));
{ key1: 'value1', key2: 'value2', key3: 'value3' }

console.log(parseString('=value1;key2=value2;key3=value3'));
{ key2: 'value2', key3: 'value3' }

console.log(parseString(';key1=value1;key2=value2;key3=value3'));
{ key1: 'value1', key2: 'value2', key3: 'value3' }

console.log(parseString('key1=value1;key2=value2;key3=value3;'));
{ key1: 'value1', key2: 'value2', key3: 'value3' }

console.log(parseString('key1=value1'));
{ key1: 'value1' }

console.log(parseString('key1='));
{ key1: '' }

console.log(parseString('key1'));
{ key1: undefined }

console.log(parseString(''));
{}

console.log(parseString());
{} 
```

# c - 在 Linux 上安装 FTDI 设备驱动程序

> ID：12075293
> 
> 赞同：2
> 
> 时间：2012-08-22T14:25:32.463
> 
> 标签：c, linux-kernel

我试图在 ubuntu 10.04 上安装来自 FTDI (http://www.ftdichip.com/Drivers/VCP/Linux/ftdi_sio.tar.gz) 的虚拟 COM 驱动程序。

我下载了文件并尝试编译它。但它显示如下错误：

谁能告诉我原因？我安装了linux内核开发包

下面是make的输出。由于尺寸限制，我删除了一些部分

```
须藤制作
gcc -Wall -D__KERNEL__ -DMODULE -I/lib/modules/2.6.32-41-generic/build/include -D__SMP__ -DSMP -DMODVERSIONS -include /lib/modules/2.6.32-41-generic/build/include/ linux/modversions.h -I/usr/src/linux-2.6.32-41-generic/drivers/usb/serial/ -O -c -o ftdi_sio.o ftdi_sio.c
在 /lib/modules/2.6.32-41-generic/build/include/linux/kernel.h:11 包含的文件中，
                 来自 ftdi_sio.c:251:
/lib/modules/2.6.32-41-generic/build/include/linux/linkage.h:5:25：错误：asm/linkage.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/kernel.h:15 包含的文件中，
                 来自 ftdi_sio.c:251:
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h:17:24：错误：asm/bitops.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/kernel.h:15 包含的文件中，
                 来自 ftdi_sio.c:251:
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h：在函数“get_bitmask_order”中：
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h:29：警告：函数“fls”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h：在函数“hweight_long”中：
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h:45：警告：函数“hweight32”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h:45：警告：函数“hweight64”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h：在函数“fls_long”中：
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h:132：警告：函数“fls64”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h：在函数'__ffs64'中：
/lib/modules/2.6.32-41-generic/build/include/linux/bitops.h:147：警告：函数'__ffs'的隐式声明
在 ftdi_sio.c:251 包含的文件中：
/lib/modules/2.6.32-41-generic/build/include/linux/kernel.h:21:21：错误：asm/bug.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/preempt.h:9 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/spinlock.h:50，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:7，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:56:29：错误：asm/thread_info.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/preempt.h:9 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/spinlock.h:50，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:7，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:65：警告：在参数列表中声明了“struct thread_info”
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:65: 警告：它的范围只是这个定义或声明，这可能不是你想要的
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在函数'set_ti_thread_flag'中：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:67：警告：函数“set_bit”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:67：错误：取消引用指向不完整类型的指针
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:70：警告：在参数列表中声明了“struct thread_info”
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在函数'clear_ti_thread_flag'中：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:72：警告：函数“clear_bit”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:72：错误：取消引用指向不完整类型的指针
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:75：警告：在参数列表中声明了“struct thread_info”
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在函数'test_and_set_ti_thread_flag'中：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:77：警告：函数“test_and_set_bit”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:77：错误：取消引用指向不完整类型的指针
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:80：警告：在参数列表中声明了“struct thread_info”
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在函数'test_and_clear_ti_thread_flag'中：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:82：警告：函数“test_and_clear_bit”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:82：错误：取消引用指向不完整类型的指针
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:85：警告：在参数列表中声明了“struct thread_info”
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h：在函数'test_ti_thread_flag'中：
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:87：警告：函数“test_bit”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/thread_info.h:87：错误：取消引用指向不完整类型的指针
在 /lib/modules/2.6.32-41-generic/build/include/linux/list.h:6 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/preempt.h:11，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/spinlock.h:50，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:7，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/prefetch.h:14:27：错误：asm/processor.h：没有这样的文件或目录
/lib/modules/2.6.32-41-generic/build/include/linux/prefetch.h:15:23：错误：asm/cache.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/preempt.h:11 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/spinlock.h:50，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:7，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/list.h:7:24：错误：asm/system.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:7 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/spinlock.h：在函数'smp_mb__after_lock'中：
/lib/modules/2.6.32-41-generic/build/include/linux/spinlock.h:137：警告：函数“smp_mb”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:7 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/spinlock.h:321:24：错误：asm/atomic.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:9 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/wait.h:26:25：错误：asm/current.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:15 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/seqlock.h：在函数'write_seqlock'中：
/lib/modules/2.6.32-41-generic/build/include/linux/seqlock.h:64：警告：函数“smp_wmb”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/seqlock.h：在函数“read_seqbegin”中：
/lib/modules/2.6.32-41-generic/build/include/linux/seqlock.h:93：警告：函数“cpu_relax”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/seqlock.h:96：警告：函数“smp_rmb”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/bitmap.h:8 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/nodemask.h:95，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:16，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/string.h:21:24：错误：asm/string.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:16 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/nodemask.h：在函数'__first_node'中：
/lib/modules/2.6.32-41-generic/build/include/linux/nodemask.h:239：警告：函数“find_first_bit”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/nodemask.h：在函数'__next_node'中：
/lib/modules/2.6.32-41-generic/build/include/linux/nodemask.h:245：警告：函数“find_next_bit”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/nodemask.h：在函数'__first_unset_node'中：
/lib/modules/2.6.32-41-generic/build/include/linux/nodemask.h:263：警告：函数“find_first_zero_bit”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:20:22：错误：asm/page.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:353：错误：'atomic_long_t'之前的预期说明符限定符列表
在 /lib/modules/2.6.32-41-generic/build/include/linux/notifier.h:13 包含的文件中，
                 从 /lib/modules/2.6.32-41-generic/build/include/linux/memory_hotplug.h:6，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:666，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/mutex.h：在函数“mutex_is_locked”中：
/lib/modules/2.6.32-41-generic/build/include/linux/mutex.h:118：警告：函数“atomic_read”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/notifier.h:14 包含的文件中，
                 从 /lib/modules/2.6.32-41-generic/build/include/linux/memory_hotplug.h:6，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:666，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/rwsem.h:22:65：错误：asm/rwsem.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/memory_hotplug.h:6 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:666，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/notifier.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/notifier.h:62：错误：字段“rwsem”的类型不完整
在 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h：在函数“populated_zone”中：
/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:699：错误：“struct zone”没有名为“present_pages”的成员
/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h：在函数“is_normal”中：
/lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:748：错误：“struct zone”没有名为“zone_pgdat”的成员
在 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:7 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/topology.h:34:26：错误：asm/topology.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/mmdebug.h:4 包含的文件中，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:8，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/autoconf.h:991:1：警告：“CONFIG_NR_CPUS”重新定义
在 /lib/modules/2.6.32-41-generic/build/include/linux/mmzone.h:12 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:4，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/threads.h:16:1: 警告：这是之前定义的位置
在 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:12 包含的文件中，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h：在函数'allocflags_to_migratetype'中：
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:121：警告：函数“WARN_ON”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h：在函数“gfp_zone”中：
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:219: error: 'ZONE_DMA' undeclared (首先在这个函数中使用)
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:219: 错误：（每个未声明的标识符只报告一次
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:219：错误：对于它出现的每个函数。）
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:219: error: 'ZONE_HIGHMEM' undeclared (首先在这个函数中使用)
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h：在函数'alloc_pages_node'中：
/lib/modules/2.6.32-41-generic/build/include/linux/gfp.h:284：警告：函数“cpu_to_node”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/time.h:9 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/ktime.h:24，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/timer.h:5，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h:8，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:11，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:162，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/math64.h:5:23：错误：asm/div64.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/time.h:9 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/ktime.h:24，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/timer.h:5，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h:8，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:11，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:162，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/math64.h：在函数“div_u64_rem”中：
/lib/modules/2.6.32-41-generic/build/include/linux/math64.h:43：警告：函数“do_div”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:8 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/ktime.h:25，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/timer.h:5，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h:8，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:11，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:162，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/timex.h:170:23：错误：asm/timex.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/ktime.h:25 包含的文件中，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/timer.h:5，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h:8，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:11，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:162，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
/lib/modules/2.6.32-41-generic/build/include/linux/jiffies.h:257:31：错误：#if 中除以零
在 /lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:11 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:162，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h:26：错误：'atomic_long_t'之前的预期说明符限定符列表
/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h：在函数“cancel_delayed_work”中：
/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h:240：错误：“struct work_struct”没有名为“data”的成员
/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h：在函数'__cancel_delayed_work'中：
/lib/modules/2.6.32-41-generic/build/include/linux/workqueue.h:255：错误：'struct work_struct'没有名为'data'的成员
在 /lib/modules/2.6.32-41-generic/build/include/linux/kmemtrace.h:12 包含的文件中，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:13，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:162，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/trace/events/kmem.h：在函数“trace_kmalloc”中：
/lib/modules/2.6.32-41-generic/build/include/trace/events/kmem.h:47：警告：函数“smp_read_barrier_depends”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/slab.h:162 包含的文件中，
                 来自 ftdi_sio.c:254:
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:53：错误：'atomic_long_t'之前的预期说明符限定符列表
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:142：错误：此处未声明“PAGE_SHIFT”（不在函数中）
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h：在函数“kmalloc_large”中：
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:232：警告：函数“get_order”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:236: error: 'PAGE_SIZE' undeclared (第一次在这个函数中使用)
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h：在函数“kmalloc”中：
/lib/modules/2.6.32-41-generic/build/include/linux/slub_def.h:246: error: 'PAGE_SIZE' undeclared (第一次在这个函数中使用)
在 /lib/modules/2.6.32-41-generic/build/include/linux/fs.h:369 包含的文件中，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/tty.h:9，
                 来自 ftdi_sio.c:255:
/lib/modules/2.6.32-41-generic/build/include/linux/dcache.h：在函数“dget”中：
/lib/modules/2.6.32-41-generic/build/include/linux/dcache.h:336：警告：函数“BUG_ON”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/dcache.h:337：警告：函数“atomic_inc”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/fs.h:470 包含的文件中，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/tty.h:9，
                 来自 ftdi_sio.c:255:
/lib/modules/2.6.32-41-generic/build/include/linux/quota.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/quota.h:384：错误：字段“dqptr_sem”的类型不完整
在 /lib/modules/2.6.32-41-generic/build/include/linux/tty.h:9 包含的文件中，
                 来自 ftdi_sio.c:255:
/lib/modules/2.6.32-41-generic/build/include/linux/fs.h:748：错误：字段“i_alloc_sem”的类型不完整
/lib/modules/2.6.32-41-generic/build/include/linux/fs.h:926：错误：'atomic_long_t'之前的预期说明符限定符列表
在 /lib/modules/2.6.32-41-generic/build/include/linux/tty.h:9 包含的文件中，
                 来自 ftdi_sio.c:255:
/lib/modules/2.6.32-41-generic/build/include/linux/fs.h:1337：错误：字段“s_umount”的类型不完整
/lib/modules/2.6.32-41-generic/build/include/linux/fs.h：在函数“file_accessed”中：
/lib/modules/2.6.32-41-generic/build/include/linux/fs.h:1738：错误：“结构文件”没有名为“f_flags”的成员
/lib/modules/2.6.32-41-generic/build/include/linux/fs.h：在函数“put_write_access”中：
/lib/modules/2.6.32-41-generic/build/include/linux/fs.h:2130：警告：函数“atomic_dec”的隐式声明
在 /usr/include/asm/termios.h:1 包含的文件中，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/termios.h:5，
                 来自 /lib/modules/2.6.32-41-generic/build/include/linux/tty.h:11，
                 来自 ftdi_sio.c:255:
/lib/modules/2.6.32-41-generic/build/include/asm-generic/termios.h:51:25：错误：asm/uaccess.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/module.h:14 包含的文件中，
                 来自 ftdi_sio.c:258:
/lib/modules/2.6.32-41-generic/build/include/linux/elf.h:7:21：错误：asm/elf.h：没有这样的文件或目录
在 ftdi_sio.c:258 包含的文件中：
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:20:23：错误：asm/local.h：没有这样的文件或目录
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:21:24：错误：asm/module.h：没有这样的文件或目录
在 ftdi_sio.c:258 包含的文件中：
/lib/modules/2.6.32-41-generic/build/include/linux/module.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:302：错误：字段“arch”的类型不完整
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:319：错误：“Elf_Sym”之前的预期说明符限定符列表
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:455：错误：在 '* ' 令牌
/lib/modules/2.6.32-41-generic/build/include/linux/module.h：在函数'__module_get'中：
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:470：警告：函数“local_inc”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:470：警告：函数“__module_ref_addr”的隐式声明
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:472：警告：函数“local_read”的隐式声明
在 ftdi_sio.c:258 包含的文件中：
/lib/modules/2.6.32-41-generic/build/include/linux/module.h：在顶层：
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:712：警告：在“Elf_Ehdr”的声明中，类型默认为“int”
/lib/modules/2.6.32-41-generic/build/include/linux/module.h:712: 错误：在 '*' 标记之前需要 ';'、',' 或 ')'
在 /lib/modules/2.6.32-41-generic/build/include/linux/usb.h:14 包含的文件中，
                 来自 ftdi_sio.c:261:
/lib/modules/2.6.32-41-generic/build/include/linux/delay.h:14:23：错误：asm/delay.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/usb.h:14 包含的文件中，
                 来自 ftdi_sio.c:261:
/lib/modules/2.6.32-41-generic/build/include/linux/delay.h：在函数'ndelay'中：
/lib/modules/2.6.32-41-generic/build/include/linux/delay.h:39：警告：函数“udelay”的隐式声明
在 /lib/modules/2.6.32-41-generic/build/include/linux/interrupt.h:12 包含的文件中，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/usb.h:15，
                 来自 ftdi_sio.c:261:
/lib/modules/2.6.32-41-generic/build/include/linux/hardirq.h:10:25：错误：asm/hardirq.h：没有这样的文件或目录
在 /lib/modules/2.6.32-41-generic/build/include/linux/interrupt.h:13 包含的文件中，
                 来自/lib/modules/2.6.32-41-generic/build/include/linux/usb.h:15，
                 来自 ftdi_sio.c:261:
/lib/modules/2.6.32-41-generic/build/include/linux/irqflags.h:57:26：错误：asm/irqflags.h：没有这样的文件或目录

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:58:19.077

我在想你错过了 asm 符号链接。我没有经历所有事情，但是很多这些错误都缺少“asm/XXXX.h”。

我们来看看第一个错误。检查内核中的包含目录：

```
#/usr/src/linux/include> ls 
```

在这个目录中你应该有一个“linux”目录，它应该包含linkage.h。打开这个我们看到：

```
#include <asm/linkage.h> 
```

所以它在/usr/src/linux/include 中寻找一个“asm”目录。你那里有吗？它是否指向您系统的正确架构？这是我的 linux/include 的顶部

```
mike@linux-4puc:/usr/src/linux/include> ls -l
total 120
drwxr-xr-x  3 root root  4096 Aug  1 10:51 acpi
lrwxrwxrwx  1 root root    47 Aug  1 12:08 asm -> /usr/src/linux-3.1.10-1.16/arch/x86/include/asm 
```

我的系统最初没有这个符号链接，所以我必须在开始时添加它：

```
mike@linux-4puc:/usr/src/linux/include> ln -s /usr/src/linux-3.1.10-1.16/arch/x86/include/asm asm 
```

# oauth-2.0 - 谷歌融合表 400 invalid_grant

> ID：12075294
> 
> 赞同：1
> 
> 时间：2012-08-22T14:25:39.647
> 
> 标签：oauth-2.0, google-fusion-tables

我正在尝试使用来自 Java 的谷歌融合表 API。我得到`400 Bad Request`和 `"error" : "invalid_grant"`。

我正在使用服务帐户 API 和 OAuth2.0 来授权我的请求。

1) 我已经下载了我的密钥并使用下面的凭据片段。

```
GoogleCredential credential = new GoogleCredential.Builder()
            .setTransport(HTTP_TRANSPORT)
            .setJsonFactory(JSON_FACTORY)
            .setServiceAccountId("[[293873940759-je0f8o4j90nmqvlbl6ofbtm0492paikd@developer.gserviceaccount.com]]")

.setServiceAccountPrivateKeyFromP12File(KeyResources.INSTANCE.getFileFromPath("b9b48154142d235bbd711c3eb8f86bb2ec155faf-privatekey.p12"))
    .setServiceAccountScopes("oauth2:https://www.googleapis.com/auth/fusiontables")
    .build(); 
```

2）我正在使用下面的代码连接到代码片段。

```
Credential credential = ServiceAccount.INSTANCE.getCredentials();
         Fusiontables fusiontables = new Fusiontables.Builder(ServiceAccount.HTTP_TRANSPORT, ServiceAccount.JSON_FACTORY, credential)

.setApplicationName("sfdgdfgdfgdfgdfgdfgf345q23")
         .setHttpRequestInitializer(credential)
         .build();

     Fusiontables.Table.List listTables = fusiontables.table().list(); 
```

这是我得到的错误。

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_grant"
}
at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:340)
at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:508) 
```

任何帮助都会很棒。

谢谢， Ganesh V

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:04:25.740

我认为您必须删除服务帐户 ID 周围的“[]”。

除此之外，如果您在更改服务帐户 ID 后收到 403 未经授权的错误，可能是因为您没有将表的编辑权限授予您的服务帐户。要更改访问权限，只需将您的融合表共享给您的服务帐户电子邮件并授予“可以编辑”访问权限。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T10:13:03.043

我认为您需要设置用户电子邮件，因为服务帐户需要委派用户帐户：

```
GoogleCredential credential = new GoogleCredential.Builder()
            ...
            .setServiceAccountUser(UserEmail) 
```

并确保服务**Fusion Tables API**已打开，并在用户的所有者域控制台中为您的服务帐户授予正确的范围：

> [https://www.googleapis.com/auth/fusiontables](https://www.googleapis.com/auth/fusiontables)

# objective-c - 无法打开 UIManagedDocument 进行编辑

> ID：12075301
> 
> 赞同：1
> 
> 时间：2012-08-22T14:25:54.160
> 
> 标签：objective-c, xcode, core-data, nsfetchedresultscontroller

我有一个关于 CoreData 的问题，其上下文来自 UIManagedDocument。

在下面的这个片段中，它从不记录“打开文档时出错”，但总是“文档仍然关闭” - 为什么我不能打开文档？请问有什么想法吗？

```
-(void)openDocument
{
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory     inDomains:NSUserDomainMask] lastObject];
url = [url URLByAppendingPathComponent:@"Default Date Database"];

    UIManagedDocument *document = [[UIManagedDocument alloc] initWithFileURL:url];

    if ([[NSFileManager defaultManager] fileExistsAtPath:[url path]])
    {
        [document openWithCompletionHandler:^(BOOL success){
            if (!success) {
            // Handle the error.
            NSLog(@"Error opening the document");
           }
        }];
    }
    else
    {
        [document saveToURL:url forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success){
        if (!success) {
            // Handle the error.
            NSLog(@"Error saving the file");
            }
        }];
    }

    self.theDocument = document;

    if (self.theDocument.documentState == UIDocumentStateClosed)
    {
        NSLog(@"Document still closed!");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:32:17.523

`openWithCompletionHandler`是一种*异步*方法。它只启动一个后台线程来打开和读取文档。当您检查时`documentState`，这个后台线程可能还没有完成，因此状态仍然是“关闭”。

`openWithCompletionHandler`当文档已打开（或失败时）时执行 completionHandler 块。

# jquery - jQuery定位后如何显示图像

> ID：12075302
> 
> 赞同：1
> 
> 时间：2012-08-22T14:25:55.437
> 
> 标签：jquery, html, css

脚本是：

```
function correctMe(){
var top_move = parseInt($('#image').css('height')) / 2;
$('#image').css({position : 'relative', top: '50%', marginTop: '-' + top_move + 'px'});
    $('#image').fadeIn(100);
} 
```

html是：

```
<img id="image" onload="correctMe()" src="image.jpg" style="display: none;"/> 
```

我的目标是：

1.  加载图像
2.  通过 jQuery 定位它
3.  展示下。

我的代码不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:19:37.027

而不是使用`display: none`try `visibility: hidden`。

```
<img id="image" onload="correctMe()" src="image.jpg" style="visibility: hidden;"/> 
```

接着：

```
function correctMe(){
    var $image = $('#image'),
        top_move = parseInt($image.css('height'), 10) / 2;

    $image
        .css({
            position: 'relative',
            top: '50%',
            marginTop: - top_move,
            opacity: 0,
            visibility: visible
        })
        .animate({
            opacity: 1
        }, 100); 
} 
```

PS：不`opacity: 0`直接设置样式的原因是IE<9下不行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:41:58.203

如果我理解这一点，问题是图像没有正确淡入，其余工作正常。这也是我在您提供的站点链接上观察到的。你没有淡入的原因是因为图像没有隐藏。您必须先使用 css 或 js 隐藏图像才能使其淡入...

另外，我不明白你为什么通过 jquery 设置一些静态属性。为什么不在你的样式表中声明它们呢？我只会使用 js 来设置 margin-top，因为它是唯一的计算值。

正如其他人所提到的，缓存 jQuery 选择器总是一个好主意，可以提高你的性能！

我设置了一个小例子给你演示：http: [//jsfiddle.net/HRejn/](http://jsfiddle.net/HRejn/)

jQuery：

```
var $image = $('#image');
var top_move = parseInt($image.height() / 2);
alert(top_move);
$image.css('margin-top', top_move + 'px');
$image.fadeIn(100); 
```

CSS：

```
#image {
    position: relative;
    top: 50%;
    display: block; 
    display: none;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:44:59.923

**希望这可以帮助**

```
 <html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <title>Position And Load</title>
    </head>
  <body>
    <div id="imageLoader" style="height:100%;width:100%;border:1px solid #B0B0B0">
        <img id="image" onload="loadImage();" src="http://www.paulmarc.org/sites/default/files/books/images/tux.png" style="display:none;"/>
    </div>
  </body>
  <script type="text/javascript">
    function loadImage(){
        var top_move = parseInt($('#image').css('height')) / 2;
        $('#image').css({
            position: 'relative',
            top: '50%',
            marginTop: '-' + top_move + 'px',
        }); 
        $('#image').fadeIn(1000, function(){                
            $('#image').css({
                height:'128px',
                width:'128px',
                display:'block'
            });         
        });     
    }
    </script>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:32:14.160

[http://jsfiddle.net/bw2vy/1/](http://jsfiddle.net/bw2vy/1/)

你有没有尝试过：

```
function correctMe(){
var top_move = parseInt($('#image').css('height')) / 2;
$('#image').css({position : 'relative', top: '50%', marginTop: '-' + top_move + 'px'});
$('#image').fadeIn(100); 
} 
```

将图像包装在 div 中？最初尝试不使用 onload - 在 href 中使用 onclick 来检查它是否有效。

```
<div style="padding:20px; background: #ffcc00;"><img id="image" src="../images/icons/folder_magnify.png" width="50" height="50" /></div>

<a href="#" onclick="correctMe();">movenshow</a> 
```

然后放到：

```
<div style="padding:20px; background: #ffcc00;"><img id="image" onload="correctMe()" src="../images/icons/folder_magnify.png" width="50" height="50" style="display:none;" /></div> 
```

似乎是为我做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T14:32:25.360

尝试这个

首先确保元素没有多个#image

```
function correctMe(){
    var top_move = parseInt($('#image').css('height')) / 2;

    $('#image').css("position" : 'relative');
    $('#image').css("top" : 'relative');
    $('#image').css("marginTop" : '-'+top_move.toString()+'px');

    $('#image').fadeIn(100);
} 
```

# arduino - 划分浮点数时丢失数字 C++ (Arduino)

> ID：12075303
> 
> 赞同：6
> 
> 时间：2012-08-22T14:25:59.033
> 
> 标签：arduino

我正在尝试将 gps 从字符串读取到我的 Arduino 上的浮点数。该字符串可以很好地处理所有数字，但是当我将它划分为浮点数时，我丢失了 4 个数字。这是我的代码：

```
gpsStrings[0].replace(".", "");
lat = gpsRawData[0].toFloat();
lat = lat / 1000000.0; 
```

在仍然有小数点的字符串上使用 .toFloat 会产生相同的结果，小数点后只有两个数字。

示例编号：

```
42427898 :: 42.43 - what happens
42427898 :: 42.427898 - what I want to happen 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:55:46.303

好吧我错了，默认的打印功能只使用两位精度。所以我不得不在声明中添加我想要的数字。

```
print(lat, 20); 
```

将在串行监视器上给出 20 位精度，其中

```
print(lat) 
```

只给了两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:49:30.000

您想使用 Double 而不是浮点数。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Primitive_data_type](http://en.wikipedia.org/wiki/Primitive_data_type)和[http://en.wikipedia.org/wiki/Double_precision#Double-precision_examples](http://en.wikipedia.org/wiki/Double_precision#Double-precision_examples)。

# php - 根据在 HTML 选择框中选择的内容运行特定的 MySQL 查询

> ID：12075304
> 
> 赞同：0
> 
> 时间：2012-08-22T14:25:59.147
> 
> 标签：php, javascript, mysql

这个问题并不是关于某些代码出了什么问题。这是关于如何去做某事。这就是为什么没有发布代码的原因。有没有办法根据 HTML 选择框中的选择来运行特定的 MySQL 查询？此处必须使用表格还是有其他方法？

我现在已经添加了代码并尝试使用 switch 语句方式；但是，这两个文本框没有被填充。有任何想法吗？虚线之间的文本实际上并不在代码中，而只是用于问题的占位符。

```
<?php
---db login info here---

switch($_GET['string'])
{
    case "another string":
       $query = mysql_query("SELECT field1 FROM table1 WHERE id = '1'");
       $row = mysql_fetch_row($query);
       break;
}

echo "<script type='text/javascript'>";
echo "document.getElementById('textbox').value = '$row[0]'";
echo "document.getElementById('textbox2').value = '$row[1]'";
echo "</script>";   
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:29:04.680

是的，有可能。您可以使用表单或 javascript URL 调用或 ajax 来执行此操作。

你需要做什么，根据在选择框中选择的值，你需要在switch case或者if条件下运行sql语句。最好的选择是这类操作的 switch case。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:33:27.890

有更多方法可以做到这一点

1.  将 MySQL 放入每个选项的值中*（当您不再需要您的数据库时非常有用）* <--**不要这样做，这非常不安全**

    ```
    mysql_query($_GET["selectbox"]); 
    ```

2.  用 MySQL 查询创建一个数组，并将键放在每个选项的值中

    ```
    $mysqlqueryarr = array("SELECT banana FROM monkey","UPDATE monkey SET mouth='open'");
    mysql_query($mysqlqueryarr[$_GET["selectbox"]]); 
    ```

3.  切换执行查询的内容

    ```
    switch($_GET['selectbox']){
    case 'monkey':
       mysql_query("SELECT monkey FROM zoo");
       break;
    case 'dog':
       mysql_query("SELECT dog FROM farm");
       break;
    } 
    ```

4.  制作一个超长 if(){ ... }else if(){ ... }else if(){ 等。查找选择框中的内容并执行 SQL

    ```
    if(isset($_GET['selectbox']) && $_GET['selectbox'] == "foood"){
         mysql_query("UPDATE wishlist SET needs = needs");
    } else if(isset($_GET['selectbox']) && $_GET['selectbox'] == "satisfied") {
         mysql_query("UPDATE wishlist SET needs = NULL");
    } 
    ```

这就是我所知道的所有方式，

# iphone - Xcode - 在 iPhone 模拟器上运行应用程序时复制文件

> ID：12075305
> 
> 赞同：0
> 
> 时间：2012-08-22T14:25:59.170
> 
> 标签：iphone, ios, xcode

由于某种原因，当我尝试运行 Xcode 时，它​​已停止将文件复制到应用程序。

过去，我拖入一个文件，勾选“将项目复制到目标组的文件夹（如果需要）”选项，一切都很好。

然而，最近，我不得不进入 Targets / Build Phases / Copy Bundle Resources 并手动添加每个文件以将其添加到应用程序中。

有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:55:03.840

在您选中“将项目复制到目标组的文件夹”的同一视图中，您必须检查要访问文件的目标！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:55:49.140

如果发生类似情况，请执行以下操作。

1.  关闭项目，**而不是 Xcode**。
2.  打开组织者。转到*项目*-> 删除所需项目的派生数据。
3.  退出 Xcode。
4.  转到`Project`Finder 中的文件夹。打开 ---.xcodeproj 文件的包。除项目设置文件外，删除所有文件。
5.  现在打开 Xcode 和你的项目。首先，它将对您的项目进行一些索引。然后构建并运行。

现在它将添加所有文件。

# java - 利用负循环寻找图上两个节点之间的零/负权重路径

> ID：12075308
> 
> 赞同：0
> 
> 时间：2012-08-22T14:26:16.000
> 
> 标签：java, graph, depth-first-search, backtracking, weighted

我真的很难在标题中描述这一点，但我会以更长的格式试一试。

我真的被这个问题难住了，我不是在寻找答案，只是一点帮助或一些需要阅读的特定主题。

我所拥有的是一个有向图，具有各种权重的边，包括负数和正数。我试图做的是编写一个算法，该算法提供了两个位于图上的节点（并假设它们是连接的）在它们之间找到一条路径，导致路径的总权重为零或负数。路径可以多次包含节点（希望允许路径抵消包含边的正权重）。

我目前正在阅读 Russel 和 Norvig 的人工智能，但由于各种问题（算法不断循环负循环），我正在努力寻找一种方法将文本中的逻辑应用于我的问题。我不完全了解如何为此使用 Backtrack 和 AStar 等方法

如果有人可以为我指出正确的方向，这将有助于我更好地理解我的问题，那将是一个很大的帮助，我可以很好地处理 DFS 和 BFS 以及与图表相关的许多其他事情，但必须找到一条路径两个节点之间的重量限制真的让我很困惑。

谢谢

下面我包含了一个示例图，我需要能够找到从 Start 到 Goal 的路径，其中路径的总权重不超过零。

示例图 [http://i144.photobucket.com/albums/r166/ZooropaTV/bu.jpg](http://i144.photobucket.com/albums/r166/ZooropaTV/bu.jpg)

*刚刚意识到我一直在做的很多搜索/阅读都被误导了，因为我的目标不一定是找到按重量计算的最短路径，而是通过访问所需的最少节点数，我需要换个思路现在关于它，但仍然想要任何建议*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:49:43.047

我认为这就是您想要的：Floyd–Warshall 算法[http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)

您必须对其进行修改以满足您的需要，但它会检测负循环，从而使您可以找到零权重或更轻的路径。

# facebook - 脸书秀： 喜欢 404 Not Found

> ID：12075312
> 
> 赞同：0
> 
> 时间：2012-08-22T14:26:30.733
> 
> 标签：facebook, facebook-like, facebook-opengraph

我的博客上有标准的 fb like 按钮，当用户点击它并喜欢该页面时，在他的 Facebook 活动日志中只有“喜欢 404 Not found.”，但有正确的页面链接。博客是实时运行的，对于某些页面，点赞工作正常。也就是说，当用户单击某个“随机页面”上的“喜欢”按钮时，它在他的活动中显示为“喜欢随机页面”，并带有正确的拇指图像。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:29:44.970

尝试使用[Facebook Linter](http://developers.facebook.com/tools/debug)访问您的网站。Facebook 缓存其缩略图和片段处理程序的结果，但 Linter 将从您的站点获取新副本。

# xml - VBScript 遍历 XML 子节点并检索值

> ID：12075314
> 
> 赞同：5
> 
> 时间：2012-08-22T14:26:31.143
> 
> 标签：xml, vbscript

我有客户提供的以下 XML，我需要从中提取以下项目：

*   `<CustomerProductName>`
*   `<ProductName>`
*   `<ProductAssetName>`

将每个`<CustomerProducts>`部分视为单独的顺序。

我可以毫无问题地获取`<CustomerProducts>`并提取并迭代每个部分中的值。`<CustomerProductName>`

但我看不出我是如何得到它下面的值的。如果有人能给我一些关于如何实现这一目标的指示，我将不胜感激，因为我已经尝试了一天多。

基本代码在 XML 下面

```
<?xml version="1.0"?>
<Products_Root>
    <Products_IPN VendorID="11344" >
        <CustomerProducts CustomerProductName="Test" ProductCount="7">
            <Products ProductType="BOOK" ProductName="Donald" >
                <ProductComponents ProductAssetName="Donald.pdf" />
                <ProductSpecs SpecClass="MEASUREMENT" SpecType="MARGINS" SpecValue="PER FILE"/>
                <ProductSpecs SpecClass="OPERATION" SpecType="BIND" SpecValue="SADDLE"/>
            </Products>
            <Products ProductType="BOOK" ProductName="Duck">
                <ProductComponents ProductAssetName="Duck.pdf"/>
                <ProductSpecs SpecClass="MEASUREMENT" SpecType="MARGINS" SpecValue="PER FILE"/>
                </Products>
        </CustomerProducts>
        <CustomerProducts CustomerProductName="Test2" ProductCount="2">
            <Products ProductType="BOOK" ProductName="Micky">
                <ProductComponents ProductAssetName="Mouse.pdf" />
                <ProductComponents ProductAssetName="Mouse.pdf" />
                <ProductSpecs SpecClass="MEASUREMENT" SpecType="MARGINS" SpecValue="PER FILE"/>
            </Products>
            <CustomerProductSpecs SpecClass="OPERATION" SpecType="KITTING" SpecValue="SHRINKWRAP KIT"/>
        </CustomerProducts>
        <CustomerProducts CustomerProductName="Test3" ProductCount="6">
            <Products ProductType="BOOK" ProductName="Minnie">
                <ProductComponents ProductAssetName="Mouse" />
                <ProductSpecs SpecClass="MEASUREMENT" SpecType="MARGINS" SpecValue="PER FILE"/>
            </Products>
        </CustomerProducts>
    </Products_IPN>
</Products_Root> 
```

到目前为止，这是我的 VBScript 代码

```
Dim xmlDoc, objNodeList, plot

Set xmlDoc = CreateObject("Msxml2.DOMDocument")
xmlDoc.setProperty "SelectionLanguage", "XPath"
xmlDoc.load("E:\dropbox\Dropbox\Hobbs\Xerox Example Files\test.xml")

Set objNodeList = xmlDoc.getElementsByTagName("CustomerProducts")

plot="No Value"
If objNodeList.length > 0 then
    For each x in objNodeList
        JobName=x.getattribute("CustomerProductName")
        msgbox JobName
    Next
Else
    msgbox chr(34) & "CustomerProducts" & chr(34) & " field not found."
End If 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T14:36:12.810

您已经将选择语言设置为 XPath，也许您也应该*使用*它。:)

```
Option Explicit

Dim xmlDoc, CustomerProducts, Products
Dim plot, CustomerProductName, ProductName

Set xmlDoc = CreateObject("MSXML2.DOMDocument")
xmlDoc.setProperty "SelectionLanguage", "XPath"
xmlDoc.load "products.xml"

plot = "No Value"

For Each CustomerProducts In xmlDoc.SelectNodes("//CustomerProducts")
  CustomerProductName = CustomerProducts.getAttribute("CustomerProductName")

  For Each Products In CustomerProducts.SelectNodes("./Products")
    ProductName = Products.getAttribute("ProductName")

    MsgBox CustomerProductName & " - " & ProductName
  Next
Next 
```

# javascript - 图片图表-google

> ID：12075316
> 
> 赞同：0
> 
> 时间：2012-08-22T14:26:32.257
> 
> 标签：javascript, google-visualization

我正在尝试从谷歌 api 获取类似于下面的雷达图。除了平均分布的 0,0.5,1,1.5,2,2.5,3 之外，我可以获得所有内容

![采样雷达](../Images/a75405e20bca93b5d6dca72fa214c56d.png)

在我的图表中，目前它从给定的数据和最大值中取出最小值，并在 .its 之间进行除法，所以如果 6 是我的最大值，最小值是 3。在圆的中心它是 3，然后下一个 cud 是 3.4，最后一个极端边缘是 6。我应该在下面的代码中进行什么更改。以获得均匀分布（比如 0 到 6）。

```
 function drawVisualization() {
      var options = {};
      // Chart API chart type 'rs' is radar chart
      options.cht = 'r';
      // set the line colors
      options.colors = ['#00FF00'];

      // fill the area under the lines
      //options.fill = true;

      // create a grid for the chart
     // options.chg = '25.0,25.0,4.0,4.0';
      //  options.chxl: '0:|1|2|3|4|5|6';
var arr = [["165q",1.3333333333333],["160q",6],["161q",6.6666666666667],["162q",7],["163q",8],["164q",5]];
      //var pi = '\u03C0';

      dataTable = google.visualization.arrayToDataTable(arr, true);
      // Treat first row as data as well.

      var chart = new google.visualization.ImageChart(document.getElementById('visualization'));
      chart.draw(dataTable, options);
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:59:10.147

尝试将`axis-range: chxr`参数与参数一起使用`custom axis labels: chxl`：

[https://developers.google.com/chart/image/docs/chart_params#axis_range](https://developers.google.com/chart/image/docs/chart_params#axis_range)

[https://developers.google.com/chart/image/docs/chart_params#axis_labels](https://developers.google.com/chart/image/docs/chart_params#axis_labels)

# php - PHP MYSQL db 引用错误

> ID：12075318
> 
> 赞同：-2
> 
> 时间：2012-08-22T14:26:33.837
> 
> 标签：php, mysql

我想检查我的数据库，看看是否有任何用户的确认码与注册用户在其注册表单上输入的确认码相同。但是我不断收到错误消息：

```
"Warning: mysql_result() expects parameter 1 to be resource, boolean given in /home/elight5/public_html/test/student_register.php on line 15" 
```

据我所知，这意味着有一个未定义的变量，但我知道数据库中的值已正确命名......我的语法有问题吗？我一直在整个网站上使用相同的语法，没有任何问题......

关于/在我的代码中的任何建议或错误？

```
function confirmcode_exists($confirmcode){
    $confirmcode = sanitize($confirmcode);
    return (mysql_result(mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `confirmcode` = '$confirmcode'"), 0) == 1) ? true : false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:45:55.203

的错误[`mysql_result()`](http://php.net/mysql_result)是说明您的 MySQL 查询失败。

您的实际 SQL 查询看起来语法不正确，这很可能意味着表或列拼写错误，或者您的连接无权访问该表，或者连接可能完全无效。

尝试将您的代码更新为以下内容；这应该向您显示您的实际错误是什么：

```
$result = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `confirmcode` = '$confirmcode'");
if (!$result) {
    // query error
    die('Error: ' . mysql_error());
}
return (mysql_result($result, 0) == 1); 
```

# sql - 如何显示具有关联空值的所有查找值？

> ID：12075322
> 
> 赞同：-1
> 
> 时间：2012-08-22T14:26:43.757
> 
> 标签：sql, database

问题：

假设我在查找表中有条件代码 A、B、C

我得到一个查询结果说

```
Maker  Condition InspectionYear Count  
Toyota      A    2009           1 
```

我应该如何编写 Sql 来显示这个结果？

```
Maker  Condition InspectionYear Count  
Toyota      A    2009           1
Toyota      B    2009           0
Toyota      C    2009           0 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-22T14:36:55.727

您似乎正在根据“计数”字段过滤结果。如果我没有误会，你为什么不取消计数限制？

# c# - Mvc3 无法在 JSON 中绑定参数

> ID：12075324
> 
> 赞同：0
> 
> 时间：2012-08-22T14:26:44.907
> 
> 标签：c#, asp.net-mvc-3, jquery

我有一个简单的 jQuery ajax 方法：

```
 var sendData = { personId: "@(Guid.Empty)"};
        $.ajax({
            type: "POST",
            url: "@(Url.Action("Dialog", "Dialog")",
            data: sendData;
        }).done(function (e) {
            $('#dialog').html(e);
            window.resizeDialog();
        }); 
```

在对话框控制器中：

```
 public ActionResult PersonInfo(Guid personId)
    {
         ....
    } 
```

jQuery 会将 personId 作为 Guid 传递给控制器​​，控制器将完成它的工作并返回一个 PartialView 作为对话框。

这很好用，并且在一些拥有众多用户的大型项目中被大量使用。

但很少（每 10.000 次点击中大约 1 次）我的记录器会收到此异常：

```
22-8-2012 14:17:27 ERROR: The parameters dictionary contains a null entry for parameter 'personId' of non-nullable type 'System.Guid' for method 'System.Web.Mvc.ActionResult PersonInfo(System.Guid)' in 'Site.Controllers.DialogController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.
Parameter name: parameters at System.Web.Mvc.ActionDescriptor.ExtractParameterFromDictionary(ParameterInfo parameterInfo, IDictionary`2 parameters, MethodInfo methodInfo)
at System.Web.Mvc.ReflectedActionDescriptor.<>c__DisplayClass1.b__0(ParameterInfo parameterInfo)
at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.b__12()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.b__14()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.b__14()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

我尝试的是更改 $.ajax 方法的 DataType，但没有帮助。现在我发现大多数（不是全部）错误来自 IE8（90%）。

这里可能出了什么问题，我该如何防止这种情况？对于某些方法，我将所有参数设为可空，稍后我将在该方法中检查空，但这不是最优的，因为请求将失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:32:22.193

我会说这更有可能是您发送的数据的问题。我注意到您正在发布 JSON 对象“原始”（没有任何类型的解析），这可能是问题所在。尝试使用[JSON.parse或](http://msdn.microsoft.com/en-us/library/cc836466%28v=vs.85%29.aspx)[JSON2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js) （跨浏览器）等 3rd 方库，看看您的问题是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:30:59.693

您忘记引用您的字符串，因此您的结果 javascript 如下所示：

```
var sendData = { personId: 00000000-0000-0000-0000-000000000000}; 
```

这将导致`0`或根本不起作用。尝试以下操作：

```
var sendData = { personId: "@(Guid.Empty)"}; 
```

# java - webdriver 查找但不访问元素

> ID：12075325
> 
> 赞同：0
> 
> 时间：2012-08-22T14:26:48.680
> 
> 标签：java, webdriver, selenium-webdriver

使用java webdriver一个接一个地选择页面元素有技巧吗？我正在尝试以 iframe 内的形式设置值。

我首先切换 iframe，然后可以访问和更改第一个下拉列表中的值。我可以从其他页面创建 WebElement，但我根本无法与它们交互。

下面的代码允许我更改第一个下拉列表的值。

```
driver.switchTo().frame(0)

WebElement fromList = driver.findElement(By.id("foo"));
r.selectItemByText(fromList, "var"); 
```

之后我无法访问任何元素。我可以毫无错误地找到它们，但我不能对它们做任何事情，因为它说它们没有数据。

```
WebElement fromList = driver.findElement(By.id("bar"));
r.selectItemByText(fromList, "foo");** 
```

第二行返回此错误：

```
NoSuchElementException: Cannot locate element with value 'foo' 
```

如果我删除它，我不会收到任何错误，因此代码只会看到元素而不是它的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:40:33.880

如果元素位于不同的框架上，则必须切换回默认框架，然后再切换回默认框架。

就像是：

```
driver.switchTo().defaultContent(); 
```

原因是因为一旦你切换到一个框架，如果你切换到另一个框架，搜索将只有子框架到那个原始框架。因此，您必须切换回顶部框架，然后再次返回。

# spring - Spring Hibernate PostgreSQL 配置问题

> ID：12075327
> 
> 赞同：0
> 
> 时间：2012-08-22T14:26:50.047
> 
> 标签：spring, hibernate

我在配置 spring hibernate 和 postgresql 时遇到了各种问题。我尝试解决一个问题，但我遇到了一些不同的问题。我正在使用 spring 3.1.0 发布版本和休眠 4.1.4.Final 我收到错误 BeanFactory 未初始化或已关闭 - 在通过 ApplicationContext 访问 bean 之前调用“刷新”

我的 web.xml 是

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
</web-app> 
```

我的调度程序servlet是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:util="http://www.springframework.org/schema/util"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">
<mvc:annotation-driven> </mvc:annotation-driven>
<context:component-scan base-package="com.max.ade.common.model" />
<context:component-scan base-package="com.max.ade.daoImpl" />
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="org.postgresql.Driver" />
    <property name="url" value="jdbc:postgresql://localhost:5432/TestUserDB" />
    <property name="username" value="postgres" />
    <property name="password" value="root123" />
</bean>
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.annotation.AnnotationSessionFactoryBean">

    <property name="dataSource" ref="dataSource" />
    <property name="configLocation" value="classpath:hibernate.cfg.xml" />
    <!-- Scan packages for annotated entities -->
    <property name="packagesToScan" value="com.max.ade.common.model" />
</bean>
<!-- Transaction support beans -->
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>
<tx:annotation-driven transaction-manager="transactionManager"></tx:annotation-  driven>
</beans> 
```

问题解决后，上面是我的 dispatcher-servlet.xml 文件结构。除了提到的问题（BeanFactory 未初始化或已关闭 - 在通过 ApplicationContext 访问 bean 之前调用“刷新”）之外，配置的工作方式是否与 hibernate 3.6.4 和 hibernate 4.1.4 不同

任何具体的指针都会有很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:55:26.413

好像您正在混合使用休眠 3 和休眠 4，

尝试改变这一点

```
class="org.springframework.orm.hibernate3.HibernateTransactionManager"> 
```

对此

```
class="org.springframework.orm.hibernate4.HibernateTransactionManager"> 
```

问候

# linux - linux下的eclipse安装

> ID：12075335
> 
> 赞同：1
> 
> 时间：2012-08-22T14:27:14.507
> 
> 标签：linux, eclipse, eclipse-cdt

我正在尝试为 c++ 开发人员安装 eclipse IDE。我已经从 Eclipse 下载了 tar.gz 并使用 tar -xzvf 解压缩/解压缩它...但是现在当我双击或运行 eclipse 时没有任何反应。在使用相同的方法之前我已经这样做了，并且它有效。我不知道为什么现在什么都没有发生。

我也知道 sudo apt-get install eclipse-platform 方法。但我不想安装 eclipse 平台，只安装 c/c++ 开发人员的 IDE。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:35:44.433

在终端中尝试`chmod +x eclipse`或从终端运行它：`./eclipse`.

**编辑：**

根据您在此答案中的评论信息，您拥有 32 位系统，而您的 Eclipse 是 64 位版本。您不能在 32 位系统上运行 64 位应用程序。

因此，您必须下载 32 位版本的 eclipse（或使用 VMWare 虚拟化 64 位系统，例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:42:38.047

对于 Eclipse，您需要启动并运行 JVM，因为它是一个 Java 应用程序。您可以安装您选择的 JRE（我个人使用 OpenJDK 6，因为我也进行 Java 开发）。

# php - PHP fgetcsv() 分隔符

> ID：12075336
> 
> 赞同：3
> 
> 时间：2012-08-22T14:27:15.100
> 
> 标签：php, csv, fgetcsv, readfile

关于[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)文档，函数内部有一些参数`fgetcsv()`：句柄、长度、分隔符、外壳和转义。

现在，我有两个问题：

1.  外壳具体是做什么的？
2.  我有一个每行 5 列的 csv 文件。想象它是这样的：*1,2,3,4,5*

所以索引是从 0 到 4。但是每当我想从索引 4 中获取日期时，就会返回一个空值。除非我在它后面加上一个逗号（通过在它后面填充一个额外的列，使内容如下：*1,2,3,4,5,6*）。我该如何解决这个问题？由于csv文件每行最后一项后缺少逗号，似乎存在一些问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:33:17.883

 1.`enclosure`参数是封装特定字段数据的字符，或“索引”。默认情况下，参数是 a `"`，这意味着您可以将字符串“包围”在`"`字符中。

例子：

```
1,2,"this is three",4 
```

 2\. 根据评论，您正在打电话`fgetcsv($handle, 10000, ',')`。您正在阅读的行可能超过 10000 个字符。尝试将长度更改为`0`，这将是“无限制”，看看是否有帮助。另一种解决方案是尝试将列的值括在双引号中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:35:54.767

Enclosure 是*包含*字段的字符。它是一种额外的分隔符。

例如`hello,world`有一个逗号作为**字段**分隔符，没有**文本**分隔符，而`"hello","world"`有一个引号作为**文本**分隔符。一些系统使用分隔值和非分隔值分别表示文本和数字字段（我相信 Microsoft Excel 会这样做）。这允许字段在其值中包含字段分隔符：

```
"Hello,world","Second Field","Third, and last, field". 
```

其他一些系统仅包含包含字段分隔符的值或包含空格的值，这意味着在这些系统上*，未分隔的值不一定是 numeric*。

如果您有一个“微不足道”的情况 - 未分隔的值，值内没有转义的字段分隔符（即，没有 'A,firstpartB\,secondpartB,C' 的东西） - 您可以完全跳过 CSV 转换并运行

```
 $line = fgets($file, MAX_EXPECTED_LINE_LEN);
  // This splits '  A, B, C ' into 'A', ' B' and ' C' (note spaces)
  $row = explode(',', trim($line)); // other delimiters can be used 
```

或者

```
 // Consider "  , ", "," and ", " as the same delimiter
  // i.e. ' Alpha , Beta   ,    Gamma  ' gets split into 'Alpha', 'Beta' and 'Gamma'
  $row = preg_split('#\\s*,\\s*#', trim($line)); 
```

我似乎无法重现您遇到的问题；它可能与行尾的不同编码（即，CRLF 而不是 LF）有关吗？

在紧要关头，您可以将和`fgetcsv`两个组件分开，操纵调用之间的界限（使用，或者如果情况更糟，则通过附加缺少的逗号）。`fgets``str_getcsv()``trim`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T10:54:22.677

它以这种方式对我有用：

```
while ($row = $stmt -> fecht()){
     echo "\"";
     echo $row['email'];
     echo "\"";
     // Export every row to a file
     $arr = array(',');
     fputcsv($data, $arr, ";", '"' );
} 
```

# javascript - 使用 REGEX 处理电子邮件

> ID：12075337
> 
> 赞同：0
> 
> 时间：2012-08-22T14:27:15.367
> 
> 标签：javascript, asp.net, regex, email-validation

我一直在尝试将此正则表达式用于 javascript 中的电子邮件，但我似乎找不到一个真正有效的！我只需要删除电子邮件地址不需要的所有特殊字符（< > ? / | [ ] { } ( ) * & ^ % $ # ! ~ ` 'space' 等）

```
function validateForOnlyEmail(txt) { txt.value = txt.value.replace(/[^A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}]+/g, ''); } 
```

谢谢！

**更新**

好的，我将如何使用 RegEX 阻止上面的那些特殊字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:39:28.843

如果您想验证电子邮件地址正则**表达式**不是正确的选择..

使用我们自己的**极客**[SLaks推荐的](https://stackoverflow.com/questions/1903356/email-validation-regular-expression/1903368#1903368)[MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

 **```
try 
{
   address = new MailAddress(address).Address;
} 
catch(FormatException) 
{
   //address is invalid
} 
```**

# ms-office - Office 加载项混淆和功能区控件事件处理程序

> ID：12075338
> 
> 赞同：0
> 
> 时间：2012-08-22T14:27:20.723
> 
> 标签：ms-office, add-in, powerpoint, obfuscation, ribbon

我们有一个混淆的 PowerPoint 加载项。我们已经从功能区类（由 Visual Studio 加载项向导生成的类）中排除了功能区事件处理程序的混淆。
我们现在面临以下问题：一些事件处理程序被正确调用，而另一些则没有。
例如，一些“按钮点击”事件被调用，一些没有，一些回调被调用而一些没有（例如，loadImage回调被调用，因为图标被正确显示），一些getEnabled回调被调用，一些被调用不是等等。所有事件处理程序和所有回调都用该属性装饰

```
 [Obfuscation(Exclude = true, Feature = "renaming")] 
```

Ildasm 显示事件处理程序并且回调没有被混淆。
为什么有些事件处理程序被调用而有些则没有？
为什么有些回调被调用而有些则没有？
有没有办法让 PowerPoint 创建一个活动日志，以提供有关加载项创建的自定义功能区的更多信息（例如是否找到了来自ribbon.xml 文件的回调）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:43:44.443

[您是否启用了此处](http://msdn.microsoft.com/en-us/library/bb608619%28v=vs.90%29.aspx)所述的“显示加载项用户界面错误” ？好吧，它不会创建日志文件，而是为每个错误显示一个消息框。因此，对于每个未找到的回调，您应该看到一条消息“回调函数 ... 未找到”。如果没有显示，我认为您应该检查回调代码中发生的情况，因为您可以假设回调被调用。

# php - MySQL int 列允许 null 但输入 null 作为零

> ID：12075342
> 
> 赞同：3
> 
> 时间：2012-08-22T14:27:26.390
> 
> 标签：php, mysql, database

我环顾四周，注意到一些人遇到了同样的问题，但他们的疏忽似乎不适用于这里。

我有一个 PHP 函数可以将一组值添加到表中。它首先检查值是否为空，如果是，则将它们替换为`NULL`, 以便将 a`null`放在表字段中。我放入的每个字段都`null`允许在其中放置`null`a `0`。

这是一些代码：

```
public static function AddGame($array, $tId)
{
    global $db; // Bring DB into scope
    // Get IDs from particular names
    $locId = $array['fLocation'];
    // Ensure empty values are SQL null
    $hTeamId = "'{$array['fHomeTeam']}'";
    $vTeamId = "'{$array['fVisitTeam']}'";
    $hScore = "'{$array['fHomeScore']}'";
    $vScore = "'{$array['fVisitScore']}'";
    $hHoldFor = "'{$array['fHomeHoldFor']}'";
    $vHoldFor = "'{$array['fVisitHoldFor']}'";
    // Prepare row for insertion
    $row = "'','$tId','$locId',$hTeamId,$vTeamId,'{$array['fDate']}','{$array['fTime']}',$hScore,$vScore,'{$array['fGameType']}',$hHoldFor,$vHoldFor";
    $stmt = $db->prepare("INSERT INTO `game` VALUES($row)");
    if($stmt->execute()) return true;
    else return false;
} 
```

我已经在多行调试了这个函数并转储了 $row 字符串，它显示了这个，这是预期的：

> '','1','1','21','21','10/10/12','10:30AM','NULL','NULL','pool','NULL','无效的'

然而，当我检查表格文本类型字段时，字面上的值`NULL`不是我想要的，而且 int 字段也显示为`0`. 如果我将值留空或作为 PHP 的 null ，则文本字段显示为空（或`null`我想要的正确），但整数仍显示为`0`.

我希望这只是由于我间接插入值的方式造成的。

这是显示创建表`game`

```
创建表`游戏`（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tId` int(11) 非空，
  `盖子` int(11) 非空，
  `hTeamId` int(11) 默认为空，
  `vTeamId` int(11) 默认为空，
  `date` 文本不为空，
  `time` 文本不为空，
  `hScore` int(11) 默认为空，
  `vScore` int(11) 默认为空，
  `type` 文本不为空，
  `hHoldFor` 文本，
  `vHoldFor` 文本，
  主键（`id`）
) 引擎=InnoDB AUTO_INCREMENT=17 默认字符集=latin1

```

更新：

```
插入“游戏”值（'','1','1','','','10/09/12','9:30AM','','','pool','winner池 A','池 B 的获胜者')

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T14:31:31.157

您在物理上将所需`NULL`列的值设置为字符串`'NULL'`

`NULL`!=`'NULL'`

如果将这些列的表结构设置为`NULL`，则可以从查询中省略它们，它们将自动`NULL`插入。

改为这样做：

```
if(!empty($hHoldFor)) $hHoldFor = $array['fHomeHoldFor']; 
```

**更新**

我正在进一步研究您的示例，并且存在第二个失败点。

```
$row = ... ",'$hHoldFor','$vHoldFor'"; 
```

上面的行，如果你设置`$hHoldFor = NULL`了，将在 周围插入引号`NULL`，把它变成一个字符串`NULL`。

尝试这个：

```
if(!empty($hHoldFor)) $hHoldFor = "'{$array['fHomeHoldFor']}'";
...  
$row = ... ",$hHoldFor,$vHoldFor"; 
```

这将删除 QUERY 字符串中该值周围的单引号并将它们添加到变量本身。

**更新 2**

这是使用您的架构的[SQLFiddle 。](http://sqlfiddle.com/#!2/d5850/1)它返回`NULL`NULL 列。你能做一个`echo "INSERT INTO`游戏`VALUES($row)";`并发布输出吗？问题是 PHP 正在将 ' 转换`NULL`为`'NULL`' 仍在某处。这将帮助我们深入了解它。

**更新 3**

问题和想的一样。您的 PHP 正在将一个空白字符串 , 插入`''`到您的数据库中，这不是一个`NULL`值。`NULL`是一个类型，`''`是一个没有长度的字符串。

```
INSERT INTO `game` VALUES('','1','1','','','10/09/12','9:30AM','','','pool','winner of pool A','winner of pool B') 
```

尝试这个：

```
public static function AddGame($array, $tId)
{
    global $db; // Bring DB into scope
    // Get IDs from particular names
    $locId = $array['fLocation'];
    // Ensure empty values are SQL null
    $hTeamId = (strlen($array['fHomeTeam']) != 0 ? "'{$array['fHomeTeam']}'" : 'NULL');
    $vTeamId = (strlen($array['fVisitTeam']) != 0 ? "'{$array['fVisitTeam']}'" : 'NULL');
    $hScore = (strlen($array['fHomeScore']) != 0 ? "'{$array['fHomeScore']}'" : 'NULL');
    $vScore = (strlen($array['fVisitScore']) != 0 ? "'{$array['fVisitScore']}'" : 'NULL');
    $hHoldFor = (strlen($array['fHomeHoldFor']) != 0 ? "'{$array['fHomeHoldFor']}'" : 'NULL');
    $vHoldFor = (strlen($array['fVisitHoldFor']) != 0 ? "'{$array['fVisitHoldFor']}'" : 'NULL');
    // Prepare row for insertion
    $row = "'','$tId','$locId',$hTeamId,$vTeamId,{$array['fDate']}','{$array['fTime']}',$hScore,$vScore,'{$array['fGameType']}',$hHoldFor,$vHoldFor";
    $stmt = $db->prepare("INSERT INTO `game` VALUES($row)");
    if($stmt->execute()) return true;
    else return false;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T14:35:05.203

你不能插入`'NULL'`. 删除 . 周围的单引号`NULL`。

你的字符串

```
'','1','1','21','21','10/10/12','10:30AM','NULL','NULL','pool','NULL','NULL' 
```

应该看起来像

```
'','1','1','21','21','10/10/12','10:30AM',NULL,NULL,'pool',NULL,NULL 
```

`INSERT`每当制作(ie. `INSERT INTO table (col1, col2) VALUES ...`)时，您还应该定义一个列列表

**编辑 1**

我建议您浏览一下您的`SHOW CREATE TABLE tbl_name`

**编辑 2**

[对此进行测试](http://sqlfiddle.com/#!2/8a4a5/1)后，我仍然会说问题在于您如何插入数据。

`(18,1,1,21,21,'10/10/12','10:30AM',NULL,NULL,'pool',NULL,NULL)`

作品。

`('18','1','1','21','21','10/10/12','10:30AM','NULL','NULL','pool','NULL','NULL')`

不工作：`Incorrect integer value: 'NULL' for column 'hScore' at row 1:`

**编辑 3**

这是您的课程的改进版本：

```
public static function AddGame($array, $tId)
{
    global $db; // Bring DB into scope

    // Get IDs from particular names
    $locId = $array['fLocation'];

    // Ensure empty values are SQL null
    $hTeamId = empty($array['fHomeTeam']) ? 'NULL' : "'" . $array['fHomeTeam'] . "'";
    $vTeamId = empty($array['fVisitTeam']) ? 'NULL' : "'" . $array['fVisitTeam'] . "'";
    $hScore = empty($array['fHomeScore']) ? 'NULL' : "'" . $array['fHomeScore'] . "'";
    $vScore = empty($array['fVisitScore']) ? 'NULL' : "'" . $array['fVisitScore'] . "'";
    $hHoldFor = empty($array['fHomeHoldFor']) ? 'NULL' : "'" . $array['fHomeHoldFor'] . "'";
    $vHoldFor = empty($array['fVisitHoldFor']) ? 'NULL'  : "'" . $array['fVisitHoldFor'] . "'";

    // Prepare row for insertion
    $row = "$tId,$locId,$hTeamId,$vTeamId,'{$array['fDate']}','{$array['fTime']}',$hScore,$vScore,'{$array['fGameType']}',$hHoldFor,$vHoldFor";
    $stmt = $db->prepare("INSERT INTO game (tId, Lid, hTeamId, vTeamId, date, time, hScore, vScore, type, hHoldFor, vHoldFor) VALUES($row)");
    if($stmt->execute()) return true;
    else return false;
} 
```

非`NULL`值将用引号括起来，否则将被赋值`NULL`。我还为`INSERT`和 exclude定义了列列表`id`，因为它是一个`AUTO_INCREMENT`列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:30:28.437

您的列是否允许`NULL`值？再次检查 DDL，也许您已将其设置`DEFAULT VALUE`为零。

当您尝试`null`在列中插入值时，不要用单引号括起来。例子

```
INSERT INTO tableName (colName, ColNameB) VALUES (1, NULL) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T18:23:10.557

就我而言，我必须显示三种情况：Case-empty、Case-yes 和 Case-no。我计划使用空、一和零。但是 null 始终保存为 0。我正在工作的列接受了 null 条目，但我所有的 null 都被保存为零。我的解决方案是将 Case-empty 视为零，将 Case-yes 视为第一，将 case-no 视为第二。这是一种解决方法，但解决了问题。

# c++ - 提取向量的所有其他元素

> ID：12075343
> 
> 赞同：6
> 
> 时间：2012-08-22T14:27:26.520
> 
> 标签：c++, stdvector

有没有比遍历原始向量并比较每个索引是否更快的方法将 a 拆分`std::vector`为两个半大小（一个包含奇数索引的值，另一个包含偶数索引的值）？`std::vectors``index%2==0`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T14:43:08.563

我不确定*更好*是什么意思，但如果 C++11 你可以使用[std::partition_copy](http://en.cppreference.com/w/cpp/algorithm/partition_copy)：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>

int main()
{
    std::vector<int> v1;
    for (int i = 0; i < 100; i++) v1.push_back(i);

    std::vector<int> v2;
    std::vector<int> v3;

    bool toggle = false;
    std::partition_copy(v1.begin(),
                        v1.end(),
                        std::back_inserter(v2),
                        std::back_inserter(v3),
                        [&toggle](int) { return toggle = !toggle; });

    std::cout << v2.size() << "\n";
    std::cout << v3.size() << "\n";

    return 0;
} 
```

请参阅在线演示[http://ideone.com/pa9rW](http://ideone.com/pa9rW)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T14:33:52.867

```
// Make sure the vector is not empty
if(!v.empty()){
    for(size_t i = 0; i < (v.size() - 1); i+=2){
        v1.push_back(v[i]);
        v2.push_back(v[i + 1]);
    }

    if(v.size() % 2) v1.push_back(v.back());
} 
```

正如多人评论中所述，您必须检查向量是否为空。您可以通过在循环之前调整两个向量的大小来避免推回调用，即。

```
// Make sure the vector is not empty
if(!v.empty()){
    v1.resize((v.size() + 1) / 2);
    v2.resize(v.size() / 2);
    for(size_t i = 0, j = 0; i < (v.size() - 1); i+=2, j++){
        v1[j] = (v[i]);
        v2[j] = (v[i + 1]);
    }

    if(v.size() % 2) v1.push_back(v.back());
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-16T08:44:38.710

现在是老 Q，但是因为没有人建议使用迭代器，`std::next`但是：

```
// assert myvec.size() % 2 == 0
const unsigned long n = myvec.size() / 2;
std::vector<T> v1(n), v2(n);
std::vector<T>::iterator it = myvec.begin(), i1 = v1.begin(), i2 = v2.begin();
while (it != myvec.end()) {
    v1[*i1] = myvec[*it];
    it = std::next(it);
    i1 = std::next(i1);
    v2[*i2] = myvec[*it];
    it = std::next(it);
    i2 = std::next(i2);
} 
```

# html - 是否允许在段落标签内使用脚本标签？- HTML5

> ID：12075344
> 
> 赞同：2
> 
> 时间：2012-08-22T14:27:34.353
> 
> 标签：html

是否允许使用`script tag`内部`paragraph tag`？- HTML5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:18:49.027

是的你可以。不建议在可以避免的情况下使用内联脚本，但它在语法上是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:20:38.187

是的。

```
<html>
  <head>
    <title></title>
  </head>
  <body>
    <p>
      <script>
      </script>
    </p>
  </body>
</html> 
```

签入[http://validator.w3.org/check](http://validator.w3.org/check)，覆盖`DOCTYPE`到`HTML5`

# c++ - 如何在 C++ 中初始化线程局部变量？

> ID：12075349
> 
> 赞同：10
> 
> 时间：2012-08-22T14:27:51.857
> 
> 标签：c++, multithreading, gcc, thread-local, thread-local-storage

> **可能重复：**
> [gcc 中的 C++11 thread_local - 替代方案](https://stackoverflow.com/questions/9142453/c11-thread-local-in-gcc-alternatives)
> [有没有办法使用 GCC 的 __thread 完全模拟 thread_local？](https://stackoverflow.com/questions/12063073/is-there-any-way-to-fully-emulate-thread-local-using-gccs-thread)

我想使用 c++11`thread_local`来创建和使用 thread_local 变量，但由于 gcc 尚不支持它，我正在使用 gcc 特定`__thread`的 . 我声明变量的方式是

```
myClass
{
public:

  static __thread int64_t m_minInt;

};
__thread int64_t myClass::m_minInt = 100; 
```

当我编译它时，我收到一个错误，例如

```
error: ‘myClass::minInt’ is thread-local and so cannot be dynamically initialized 
```

如何正确地做到这一点？

PS：gcc版本：4.6.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:35:12.507

您需要使用延迟初始化。

```
myClass
{
public:

  static __thread int64_t m_minInt;
  static __thread bool m_minIntInitialized;

  static int64_t getMinInt();
};
__thread int64_t myClass::m_minInt;
__thread bool myClass::m_minIntInitialized;

int64_t myClass::getMinInt()
{
  if (!m_minIntInitialized)  // note - this is (due to __thread) threadsafe
  {
    m_minIntInitialized = true;
    m_minInt = 100;
  }

  return m_minInt;
} 
```

`m_minIntInitialized`保证为零。

在大多数情况下（[ELF 规范](http://www.akkadia.org/drepper/tls.pdf)），它被放置到 .tbss 部分，该部分是零初始化的。

对于 C++ - [http://en.cppreference.com/w/cpp/language/initialization](http://en.cppreference.com/w/cpp/language/initialization)

> 对于所有其他非局部静态和线程局部变量，零初始化发生。实际上，将要进行零初始化的变量放在程序映像的 .bss 段中，该段不占用磁盘空间，并在加载程序时被操作系统清零。

# javascript - 隐藏具有某些类 $.each、for 等的元素的有效方法

> ID：12075352
> 
> 赞同：0
> 
> 时间：2012-08-22T14:27:56.363
> 
> 标签：javascript, jquery

我有一个填充有类的数组。我需要遍历这个数组并隐藏该特定类的任何元素。

```
// Array of classes
// hide.length ~ 100 
```

这是我目前的实现：

```
// Hide all elements with these class names
$.each(hide, function(key, filter_class){
  $('li.'+filter_class, '.result_row_items').hide();
}); 
```

我相信这将是一种更有效（性能方面）的方式：

```
for(i=0;i<hide.length;i++){
  $('li.'+hide[i], '.result_row_items').hide();
} 
```

这会更好吗？

```
// Create string of class names
var classes = '';
for(i=0;i<hide.length;i++){
  classes += 'li.'+ hide[i] + ', '
}
// Remove trailing comma and space
classes = classes.substring(0, classes.length - 2);
$(classes, '.result_row_items').hide(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:38:19.463

也许是这样的？

```
$(hide).filter('.class').hide(); 
```

或者

```
for (var i = 0; class = classes[i++];) {
    $('li.'+ class).hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:30:17.827

那样的事情怎么样？

```
$("li." + hide.join(",li."), ".result_row_items").hide(); 
```

**演示：http:** [//jsfiddle.net/B9fXP/](http://jsfiddle.net/B9fXP/)

# asp.net - 您可以仅使用唯一的 url 绕过登录到 asp.net 站点吗？

> ID：12075353
> 
> 赞同：0
> 
> 时间：2012-08-22T14:27:59.797
> 
> 标签：asp.net, url, login

我只是好奇你是否可以绕过登录到一个 asp.net 网站，让你们知道，我无法控制使用唯一的 url？

我有该站点的登录凭据，并尝试使用这些凭据来执行此操作，但无济于事。

那么这可能吗？我唯一能想到的是

```
http://username:password.awesomesauce.com/login/login.aspx 
```

仅供参考，我可以很好地登录，我只需要这个通过 3rd 方应用程序登录到该站点。每次使用应用程序登录都是一个很大的痛苦，有时许多功能会失败，因为它在保持经过身份验证的登录方面很麻烦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:32:22.250

不，这通常是不可能的。

这将是一个非常具体的自定义案例——没有标准，因为所有登录名都是不同的，并且数据库等的身份验证方法都是不同的。

FTP 可以这样工作，但这是因为身份验证是协议的一部分，而在 Web 表单中则不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:48:17.003

我使用了一个名为*Live HTTP Headers 0.17*的 firefox 插件，在登录网站时跟踪 url 操作。打开捕获选项后，我登录了，它给了我这个

![图像](../Images/4212855fcc541c88d97f8f3abb2ef498.png)

然后我从 Content-Length 类别中获取内容并将其附加到 url 中，如下所示

`https://www.TROLLFACE.com/login/login.aspx?__LASTFOCUS=&__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2FwEPDwUJMTI2OTI3NTE1D2QWAmYPZBYCAgMPZBYMAiAPDxYCHgdWaXNpYmxlaGRkAiEPDxYCHwBoZGQCJg8WAh4LXyFJdGVtQ291bnQCGhYCAhkPZBYCAgEPFgIeBXN0eWxlBQtib3JkZXI6MHB4O2QCKA8WAh8AaGQCKg8PFgIeC05hdmlnYXRlVXJsBRZqYXZhc2NyaXB0Om9wZW5DaGF0KCk7ZGQCOQ8PFgIeBFRleHQFKUNvcHlyaWdodCAmY29weTsgMjAxMiBCIE8gWCBQYXJ0bmVycywgTExDZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFGGN0bDAwJGJ0bkNoZWNrSW52ZW50b3J5MdYH4EkMQWCgv%2FEOSMLJPNZ21rMa&ctl00%24cphMain%24txtUsername=USERNAME-GOES-HERE&ctl00%24cphMain%24txtPassword=PASSWORD-GOES-HERE8&ctl00%24cphMain%24btnLogin=Log+In`

请注意**USERNAME-GOES-HERE**和**PASSWORD-GOES-HERE**

到目前为止，它每次都有效，有效地跳过了登录。

# java - 在插入 derbyDB varchar 字段之前搜索 java 字符串中的“特殊”字符

> ID：12075355
> 
> 赞同：2
> 
> 时间：2012-08-22T14:28:00.270
> 
> 标签：java, regex, insert, escaping, derby

我正在尝试从 MS Access 转换为 DerbyDB。然而，一些 varchar 字段具有“特殊”字符，例如换行符、制表符、百分号、外来字符等。

我创建了一个快速方法...

```
public String charCheck(String s)
{

    errLog.add(1, "converting string from " + s);
    s.replaceAll("'", "''");//an apostrophe is escaped with an apostrophy in Derby...
    s.replaceAll("%", "\\%");//a percent sign
    s.replaceAll("\\s+n", " ");//whitespace characters (newlines and tabs etc)
    s.replaceAll("/", "\\/");//the 'divide' \ character, 
    s.replaceAll("<", "\\<");//mathematical symbol less than
    s.replaceAll(">", "\\>");//mathematical symbol greater than
    errLog.add(1, "to " + s);

    return s;
}//end method 
```

每当我确定我需要一个 varchar（或 long varchar）数据类型时，我都会运行它。奇怪的是，我的错误日志打印出消息，但在输出中的空白字符似乎没有改变（即制表符和换行符，不会转换为简单的空格），并且字符串中的任何撇号都不会被替换。

此方法的输出样本产生以下结果。

```
converting string from 2\.   FIN DE L’ESSAI
to 2\.   FIN DE L’ESSAI 
```

所以字符串显然保持不变，当我运行插入语句时，这让 derbyDB 感到不安，而且我也没有找到任何关于将多条记录插入表中的转义序列的明显文档，我想使用一个语句，然后在之后添加转义关键字它，即

```
stmt.execute("{call "+ sqlInsertStatement +"}{escape '" + escapeCharacter +"'" ); 
```

我还从文档中读到，*escape*关键字在上述语句中可能没有用，如果是这样，我该怎么做

我需要知道去哪里对我得到的插入错误进行排序。

如果我将插入语句直接复制并粘贴到 ij 中，然后删除记录将插入的特殊字符，我只是不明白为什么它没有在第一个实例中被转换。

我也尝试过用双引号包围 varchar 和 longvarchar 字段，但是 derby 再次抛出一个错误，指出找到了双引号！

我想解决这个问题，因为我觉得我很接近......

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:29:12.423

字符串是不可变的，您对它们执行的所有操作都会产生新的字符串。您需要将当前引用分配给新字符串。

例子：

`s= s.replaceAll("'", "''");`

如果只是替换，那么[replace()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)可能是比使用[replaceAll()更好的选择](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:32:25.907

而不是通过`String`，将`String`转换为`char`数组，然后使用 do...while 循环`char`依次使用 if 测试替换每个字符。然后将数组转回字符串然后返回

# javascript - 鼠标后滑动菜单

> ID：12075360
> 
> 赞同：1
> 
> 时间：2012-08-22T14:28:07.317
> 
> 标签：javascript, menu, slide

我想做这样的事情：

[http://www.minecraftforge.net/forum/index.php](http://www.minecraftforge.net/forum/index.php)

你可以悬停菜单吗？它在悬停时滑动了一些阴影，我该怎么做？是那个JS吗？如果是，是否有教程？还是可以用 CSS3 来实现？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:49:55.347

我认为这是插件：[jQuery lavalamp](http://nixboxdesigns.com/projects/jquery-lavalamp/)。

我认为这不能仅通过 CSS 来实现。您可以使用 css3 和一些转换，但我认为它至少需要一些最小的 javascript。

# node.js - 使用jade使用动态链接渲染iframe

> ID：12075363
> 
> 赞同：3
> 
> 时间：2012-08-22T14:28:11.823
> 
> 标签：node.js, express, pug

我有一个 .jade 视图，其中包含：

```
iframe(width='800', height='166', scrolling='no', frameborder='no', src= srcStr) 
```

我尝试通过执行以下操作使用来自用户的输入源 url 来呈现它：

```
var string = req.body.code;
res.render('embedview', { srcStr: string}); 
```

现在，渲染的页面将只显示一个没有任何内容的 iframe，即使在我查看其源代码时 iframe 代码看起来正确（带有 src="..." 属性）。几乎看起来它首先使用 src="" 加载 iframe，然后在不重新加载的情况下粘贴源 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:29:14.767

您的翡翠标记或生成的 HTML 标记不是问题。一旦我提供了一个支持从不同域进行 iframe 的页面的 url，我的代码片段就可以正常工作了。

例如 www.google.com 不支持此功能。您可以在下面的响应中看到 curl -v [http://www.google.com](http://www.google.com)的标头**X-Frame-Options**

```
< HTTP/1.1 200 OK
< Date: Wed, 22 Aug 2012 22:21:45 GMT
< Expires: -1
< Cache-Control: private, max-age=0
< Content-Type: text/html; charset=ISO-8859-1
 ...
< X-XSS-Protection: 1; mode=block
< X-Frame-Options: SAMEORIGIN
< Transfer-Encoding: chunked 
```

如果您控制所提供页面的代码，则可以关闭此选项。这是防止点击劫持的安全措施。你可以在这里阅读更多关于它的信息 [https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)

# java - Java 读取文件并匹配当前时间

> ID：12075365
> 
> 赞同：-1
> 
> 时间：2012-08-22T14:28:20.137
> 
> 标签：java, file, metatag

我有这个标签

```
<META HTTP-EQUIV="Expires" CONTENT="Thu, 23 Aug 2012 09:30:00 GMT"> 
```

在文件中。我必须在文件中找到这个标签并从中取出内容部分并与当前日期和时间匹配。如果文件中的日期和时间早于当前时间，则设置一个标志。有人可以帮我做到这一点，我是新手吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:46:09.100

1.  内容文件看起来像一个 HTML 文件。所以使用[JSoup](http://jsoup.org/)之类的库来检索 META 标记的 CONTENT 属性的值。
2.  然后使用`SimpleDateFormat`将字符串转换为`Calendar`/`Date`对象。
3.  然后使用[`after()`/`before()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html) API 进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:49:50.050

这可能会帮助您入门：

```
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Scanner;

public class FindStringInFileTest {

    public static void main(String[] args) {

        File f = new File("c:/test.txt");
        String res = find(f);

        if (res != null) {
            System.out.println("Found Meta Http-Equiv tag");
            System.out.println(res);//print META HTTP-EQUIV line
            //check the line for whatver dates etc here
        } else {
            System.out.println("Couldnt find Meta Http-Equiv tag");
        }

    }

    public static String find(File f) {
        String result = "";
        Scanner in = null;
        try {
            in = new Scanner(new FileReader(f));
            while (in.hasNextLine()) {
                String tmp = in.nextLine();
                if (containsMetaHttpEquiv(tmp)) {
                    result = tmp;//assign line which has META HTTP-EQUIV tag
                    break;//so we dont check more
                } else {
                    result = null;
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                in.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return result;
    }

    public static boolean containsMetaHttpEquiv(String str) {
        if (str.contains("<META HTTP-EQUIV=\"Expires\" CONTENT=")) {
            return true;
        }
        return false;
    }
} 
```

它将读入文本文件并检查`META HTTP-EQUIV`标签，然后返回包含标签的行/字符串，或者`null`如果找不到`META HTTP-EQUIV`标签。`substring()`然后，您将使用and方法提取日期`indexOf()`，然后将其解析为 a `SimpleDateFormat`，然后比较 2 个日期，并将标志适当的标志写入文件。

编辑：

以下是从 HTTP-EQUIV META 标签中提取内容所需的方法：

```
public static String getContentOfMetaTag(String tag) {
    String search = "CONTENT=";
    return tag.substring(tag.indexOf("CONTENT=") + search.length() + 1, tag.indexOf('>') - 1);
} 
```

`String`您将使用返回的 from调用此方法`find(new File)`（在调用之前确保它不为空`getContentOfMetaTag(String tag)`）

# opengl-3 - OpenGL 3.2 核心配置文件中的 NURBS 曲面

> ID：12075368
> 
> 赞同：0
> 
> 时间：2012-08-22T14:28:29.990
> 
> 标签：opengl-3, glu, nurbs

是否可以在 OpenGL 3.2 核心配置文件中绘制 NURBS（非均匀有理 B 样条）曲面？

我假设使用 GLU 库的 NURBS 渲染不支持核心配置文件。

是否有任何开源库可以实现与 GLU 相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:38:23.253

将 GLU 与 OpenGL 3.1 及更高版本的核心配置文件一起使用，并不会真正起作用。GLU 位于许多已弃用的 OpenGL 函数之上，您的应用程序很可能无法链接或正常工作。

至于 GLU 中的 NURBS 实现，源代码可在 SGI 的开源网站[http://oss.sgi.com/projects/ogl-sample/](http://oss.sgi.com/projects/ogl-sample/)中获得。您可能可以修复库以使用更现代的 OpenGL 方法。

[这篇文章](https://stackoverflow.com/questions/10993486/what-about-nurbs-and-opengl-4-2-core/14431206#14431206)中还提供了更多详细信息。

# c# - 在主窗体之上显示非 UI 线程窗体

> ID：12075369
> 
> 赞同：0
> 
> 时间：2012-08-22T14:28:29.840
> 
> 标签：c#, .net, winforms

我们有一个基于表单的应用程序。它有两个在非 UI 线程上运行的模式对话框。现在应用程序有 3 种形式。一个主窗体和两个在非 UI 线程上运行的窗体。

如果用户选择了应用程序，我们需要在主窗体顶部显示非 UI 线程窗体。

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:31:07.820

Form 有一个[TopMost](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.topmost.aspx)属性，可以做你想做的事。由于线程不佳，您可能会得到不同的结果。

```
myDialogForm.TopMost = true;

// Then either
myDialogForm.Show();
// or
myDialogForm.ShowDialog(parentForm); 
```

# jquery - 单击链接时jquery循环停止循环

> ID：12075370
> 
> 赞同：0
> 
> 时间：2012-08-22T14:28:29.793
> 
> 标签：jquery, cycle, jquery-cycle

我有一个带有三个横幅和三个横幅链接的 jquery 循环。

```
<div id="adverts" style="position: relative; width: 960px; height: 246px; ">
   <img class="im" src="/uploads/ssp/album_2/image_59.jpg" alt="open" data-id="http://co.uk/content/2/207/eis-fund-3.html" height="246" width="960" style="position: absolute; top: 0px; left: 0px; display: block; z-index: 4; opacity: 1; width: 960px; height: 246px; ">    
    <img class="im" src="/uploads/ssp/album_2/image_60.jpg" alt="extended" data-id="" height="246" width="960" style="position: absolute; top: 0px; left: 0px; display: none; z-index: 3; opacity: 0; width: 960px; height: 246px; ">
    <img class="im" src="/uploads/ssp/album_2/image_61.jpg" alt="Welcome" data-id="" height="246" width="960" style="position: absolute; top: 0px; left: 0px; display: none; z-index: 3; opacity: 0; width: 960px; height: 246px; ">
</div>

<ul id="nav">   
<li class=""><a href="#">open</a></li>
<li class=""><a href="#">extended</a></li>
<li class="activeSlide"><a href="#">Welcome</a></li></ul>

$(document).ready(function () {

    $('#adverts').cycle({
        fx: 'fade',
        pager: '#nav',
        speed: 300,
        // callback fn that creates a thumbnail to use as pager anchor 
        pagerAnchorBuilder: function (idx, slide) {
            return '<li><a href="#">' + slide.alt + '</a></li>';
        }
    });

    $(".im").click(function () {
        var url = $(this).attr('data-id');
        window.location = url;
    });

}); 
```

当前，当您单击链接时，它会转到正确的横幅。但是，我希望它停止循环并仅在用户单击另一个横幅时更改，或者在单击发生后将每 3 秒更改一次的速度提高到 10 次？

Rgds乌兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:47:53.210

您可能需要查看`stop`or`pause`命令：http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

IE

```
$('#adverts').cycle('stop') 
```

# c++ - cmake - find_library - 自定义库位置

> ID：12075371
> 
> 赞同：62
> 
> 时间：2012-08-22T14:28:30.427
> 
> 标签：c++, windows, cmake

我目前正在尝试让 CMake 为我的项目运行（在 Windows 上）。我想使用安装所有库的自定义位置。为了向 CMake 告知该路径，我尝试这样做：

```
set(CMAKE_PREFIX_PATH D:/develop/cmake/libs) 
```

但是当我试图找到图书馆时

```
find_library(CURL_LIBRARY NAMES curl curllib libcurl_imp curllib_static) 
```

CMake 找不到它。当我将前缀路径设置为

```
set(CMAKE_PREFIX_PATH D:/develop/cmake/libs/curl) 
```

...图书馆位于。

所以我的问题是：如何正确配置 CMake 以在自定义位置使用目录结构，如下所示：

```
D:/develop/cmake/libs/
-> libA
   -> include
   -> lib
-> libB
   -> include
   -> lib
-> ...
   -> include
   -> lib 
```

在“include”中是公共头文件，在“lib”中是编译的库。

希望有人可以帮助我 - 在此先感谢

编辑：我目前的解决方法是，在我搜索库之前执行此操作：

```
set(CUSTOM_LIBRARY_PATH D:/develop/cmake/libs)
file(GLOB sub-dir ${CUSTOM_LIBRARY_PATH}/*)
foreach(dir ${sub-dir})
    if(IS_DIRECTORY ${dir})
        set(CMAKE_PREFIX_PATH ${CMAKE_PREFIX_PATH};${dir})
    endif()
endforeach() 
```

但是那样boost的默认模块直到它才会找到它，因为boost的目录结构有点不同。

```
boost -> include -> boost-1_50 -> *.hpp 
```

当我移动内容时，如果可以找到“boost-1_50”以“包含”该库，但这样就不可能处理多个版本，对吧？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-23T07:50:12.927

最简单的解决方案可能是添加`HINTS`到每个[`find_*`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3afind_library)请求。

例如：

```
find_library(CURL_LIBRARY
    NAMES curl curllib libcurl_imp curllib_static
    HINTS "${CMAKE_PREFIX_PATH}/curl/lib"
) 
```

对于 Boost，我强烈建议使用[*FindBoost*](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module%3aFindBoost)标准模块并将`BOOST_DIR`变量设置为指向您的 Boost 库。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-29T22:43:45.807

我看到有两个人把这个问题放到了他们的最爱中，所以我将尝试回答对我有用的解决方案：我没有使用查找模块，而是为所有已安装的库编写配置文件。这些文件非常简单，也可用于设置非标准变量。CMake 将（至少在 Windows 上）在

```
CMAKE_PREFIX_PATH/<<package_name>>-<<version>>/<<package_name>>-config.cmake 
```

（可以通过环境变量设置）。因此，例如升压配置在路径中

```
CMAKE_PREFIX_PATH/boost-1_50/boost-config.cmake 
```

在该配置中，您可以设置变量。我的 boost 配置文件如下所示：

```
set(boost_INCLUDE_DIRS ${boost_DIR}/include)
set(boost_LIBRARY_DIR ${boost_DIR}/lib)
foreach(component ${boost_FIND_COMPONENTS}) 
    set(boost_LIBRARIES ${boost_LIBRARIES} debug ${boost_LIBRARY_DIR}/libboost_${component}-vc110-mt-gd-1_50.lib)
    set(boost_LIBRARIES ${boost_LIBRARIES} optimized ${boost_LIBRARY_DIR}/libboost_${component}-vc110-mt-1_50.lib)
endforeach()
add_definitions( -D_WIN32_WINNT=0x0501 ) 
```

非常简单 + 当您编写一些辅助函数时，可以进一步缩小配置文件的大小。我对这个设置的唯一问题是我没有找到一种方法让配置文件优先于查找模块 - 所以你需要删除查找模块。

希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-20T07:53:58.273

通过添加多个路径来使用 CMAKE_PREFIX_PATH（用分号分隔，**没有空格**）。您可以将其设置为环境变量，以避免在您的 cmake 配置文件中包含绝对路径

请注意，cmake 将在[以下任何文件夹](http://www.cmake.org/cmake/help/v3.0/command/find_package.html?highlight=find_package)中查找配置文件， 其中 CMAKE_PREFIX_PATH 中的任何路径和名称是您要查找的库的名称

```
<prefix>/                                               (W)
<prefix>/(cmake|CMake)/                                 (W)
<prefix>/<name>*/                                       (W)
<prefix>/<name>*/(cmake|CMake)/                         (W)
<prefix>/(lib/<arch>|lib|share)/cmake/<name>*/          (U)
<prefix>/(lib/<arch>|lib|share)/<name>*/                (U)
<prefix>/(lib/<arch>|lib|share)/<name>*/(cmake|CMake)/  (U) 
```

在您的情况下，您需要将以下两个路径添加到 CMAKE_PREFIX_PATH ：

```
D:/develop/cmake/libs/libA;D:/develop/cmake/libB 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-28T14:36:01.343

您有一层额外的嵌套。CMAKE 将搜索`$CMAKE_PREFIX_PATH/include`标题和`$CMAKE_PREFIX_PATH/libs`库。

来自 CMAKE[文档](http://www.cmake.org/Wiki/CMake_Useful_Variables)：

> 对于 CMAKE_PREFIX_PATH 列表中的每个路径，CMake 将在 FIND_PATH() 被调用时检查“PATH/include”和“PATH”，在 FIND_PROGRAM() 被调用时检查“PATH/bin”和“PATH”，以及“PATH/lib 和” PATH" 当 FIND_LIBRARY() 被调用时。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-23T11:52:19.240

无法以您想要的方式自动设置`CMAKE_PREFIX_PATH`。我看到以下解决此问题的方法：

1.  将所有库文件放在同一个目录中。也就是说，`include/`将包含所有库的标头，`lib/`- 二进制文件等。仅供参考，这是大多数类 UNIX 系统的常见布局。

2.  将全局环境变量设置`CMAKE_PREFIX_PATH`为`D:/develop/cmake/libs/libA;D:/develop/cmake/libs/libB;...`. 当你运行 CMake 时，它​​会自动获取这个 env var 并填充它自己的`CMAKE_PREFIX_PATH`.

3.  编写一个包装器 .bat 脚本，该脚本将使用参数调用`cmake`命令。`-D CMAKE_PREFIX_PATH=...`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-07-25T14:17:57.147

我遇到过类似的情况。我通过在之前添加以下代码解决了这个问题`find_library()`：

```
set(CMAKE_PREFIX_PATH /the/custom/path/to/your/lib/) 
```

然后它可以找到图书馆的位置。

# squeak - 哪个 VM 适合哪个系统上的哪个 Pharo/Squeak 版本？

> ID：12075373
> 
> 赞同：3
> 
> 时间：2012-08-22T14:28:32.477
> 
> 标签：squeak, pharo

是否有一个地方（网站）可以找到有关特定操作系统上特定 Pharo 或 Squeak 版本需要哪个 VM（最小/最大）的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:13:13.477

我不知道是否记录了确切的信息，但我可以尝试给你一个简短的解释......即使是 Pharo 和 Squeak 路径在过去的时间里也有很大的分歧。

Pharo 官方 VM 是 CogVM，它是一个带有 JIT 的 StackVM。然后它还具有用于不允许代码生成的平台的 StackVM。

Pharo 的官方虚拟机列在[http://www.pharo-project.org/pharo-download](http://www.pharo-project.org/pharo-download)中，它们可以肯定地从 Pharo 1.2 到 Pharo 2.0 工作。[您还可以在 CI 服务器https://ci.lille.inria.fr/pharo/view/Cog/](https://ci.lille.inria.fr/pharo/view/Cog/)中查看完整的构建虚拟机集。

对于旧版本，Pharo（1.0 和 1.1）保留一键分发的历史记录，其中 vm 与图像一起冻结。你可以在这里找到它们：[https ://gforge.inria.fr/frs/?group_id=1299](https://gforge.inria.fr/frs/?group_id=1299)

另一方面，对于 Squeak，相同的 CogVM 应该在其最新版本中工作，否则您应该从[http://squeakvm.org/index.html](http://squeakvm.org/index.html)获得解释器 VM 。

希望它有点帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:07:12.577

正如@guillepolito 所说，今天最好的办法是从 Pharo 持续集成 Jenkins 服务器中获取那些（或选择一键式）。

Squeak VM 在我的实践中已经逐渐淡出。我保留了其中的一些，但是当我使用 Pharo 时，我尝试从 Jenkins 源代码构建我自己的版本，因为从使用这些源代码中可以学到很多东西。

在主要平台上构建它们并不难，至少你知道下面是什么。

主要问题是艾略特米兰达一直在他的角落里做他的事情，而不是在共享源三上工作。这就是卡车数量少的问题。

# php - 获取magento类别view.phtml的特定属性

> ID：12075378
> 
> 赞同：1
> 
> 时间：2012-08-22T14:28:47.310
> 
> 标签：php, magento

我正在尝试在我的 Magento 类别页面上创建一个[Asos样式的标题。](http://www.asos.com/Women/Dresses/Cat/pgecategory.aspx?cid=8799)

在这个框中，我已经拉入了类别标题和类别描述，我还有些需要将特定属性从分层导航拉入类别 view.phtml 页面。

目前我有

`<?php $prod = Mage::getModel('catalog/product')->load($productId); $att = $prod->getResource()->getAttribute('product')->getFrontend()->getValue($prod); echo $att; ?>`

但它只是拉入单词`No`而不是它在此特定类别的分层导航中显示的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T20:16:39.450

来自 code/core/mage/catalog/block/product/view/attributes.php

```
 public function getAdditionalData(array $excludeAttr = array())
    {
        $data = array();
        $product = $this->getProduct();
        $attributes = $product->getAttributes();
        foreach ($attributes as $attribute) {
//            if ($attribute->getIsVisibleOnFront() && $attribute->getIsUserDefined() && !in_array($attribute->getAttributeCode(), $excludeAttr)) {
            if ($attribute->getIsVisibleOnFront() && !in_array($attribute->getAttributeCode(), $excludeAttr)) {
                $value = $attribute->getFrontend()->getValue($product);

                if (!$product->hasData($attribute->getAttributeCode())) {
                    $value = Mage::helper('catalog')->__('N/A');
                } elseif ((string)$value == '') {
                    $value = Mage::helper('catalog')->__('No');
                } elseif ($attribute->getFrontendInput() == 'price' && is_string($value)) {
                    $value = Mage::app()->getStore()->convertPrice($value, true);
                }

                if (is_string($value) && strlen($value)) {
                    $data[$attribute->getAttributeCode()] = array(
                        'label' => $attribute->getStoreLabel(),
                        'value' => $value,
                        'code'  => $attribute->getAttributeCode()
                    );
                }
            }
        }
        return $data;
    }
} 
```

很确定这是显示带有您的属性的“否”或“不适用”的负责部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:35:02.030

尝试这个：

```
Mage::getResourceModel('catalog/product')->getAttributeRawValue($productId, 'attribute_code', $storeId); 
```

感谢[@Daniel Kocherga在](https://stackoverflow.com/users/1051445/daniel-kocherga)[这里](https://stackoverflow.com/questions/6924226/magento-product-attribute-get-value)的原始答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T05:48:23.293

我不确定，但请参阅下面的 URL。我认为这对你很有帮助。

**如何将属性添加到类别中的产品网格**

[http://www.magentocommerce.com/wiki/4__-_themes_and_template_customization/catalog/add-attributes-to-product-grid](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/add-attributes-to-product-grid)

**Magento 属性：每个类别使用不同的可过滤属性**

[http://www.human-element.com/Blog/ArticleDetailsPage/tabid/91/ArticleID/68/Magento-Attributes-Using-Different-Filterable-Attributes-Per-Category.aspx](http://www.human-element.com/Blog/ArticleDetailsPage/tabid/91/ArticleID/68/Magento-Attributes-Using-Different-Filterable-Attributes-Per-Category.aspx)

**在产品页面上获取 Magento 类别属性的数据**

[http://spenserbaldwin.com/magento/get-data-for-new-magento-category-attribute](http://spenserbaldwin.com/magento/get-data-for-new-magento-category-attribute)

# iphone - 将 UIGestureRecognizer 传递给下面的 UIView

> ID：12075381
> 
> 赞同：1
> 
> 时间：2012-08-22T14:28:56.513
> 
> 标签：iphone, objective-c, uigesturerecognizer

我目前正在实现一个益智游戏，玩家必须在框架上拖放图像。我已将 UIPanGestureRecognizer 附加到拼图的每个部分，并且效果很好。但是，我遇到了“L”形部件的问题。该块的空白区域正在“阻止”手势识别，并阻止底部的块接收事件。

例如，“x”是我的“L”形块，我不能触摸“a”：

```
xxx
xa 
```

我已经尝试了几件事，例如定义`shouldReceiveTouch`委托，以便在触摸“L”的空白区域时返回 no，但它不会将触摸传递给下面的视图。

我也定义`panRecognizer.cancelsTouchesInView = NO;`了，但这也不起作用。

我正在考虑使用 nextresponder，但 UIGestures 似乎不可能。

如果有人有其他想法，那真的很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:50:35.493

这似乎是一份工作`-(BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event`。编写一个`UIView`( `MyLView`) 的子类，它会覆盖此方法并`YES`在触摸位于实际“L”内时返回。

因此，如果您的视图是 90\. x 120\. 并且“L”是 30\. 宽，如下所示：

```
x00
x00
x00
xxx 
```

您的实现可能如下所示：

```
-(BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
  return point.x < 30\. || point.y > 90.; 
} 
```

从未对此进行过测试，但这就是它从苹果文档中读取的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:34:27.423

默认情况下，如果子视图无法响应触摸，它将通过响应者链，在这种情况下，这意味着超级视图，因此我建议将较小的视图子视图设置为超级视图，这样手势就不会“阻塞”你需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T22:56:25.937

不确定这是否对您的场景有所帮助，但如果您希望上视图忽略任何用户输入（触摸事件），那么您可以调用：

```
self.pieceX.userInteractionEnabled = NO; 
```

当然你也可以在对应的 UIGestureRecognizer 委托方法中切换这个状态。

# javascript - 在 JSON 中存储电子邮件验证正则表达式字符串

> ID：12075382
> 
> 赞同：4
> 
> 时间：2012-08-22T14:28:58.763
> 
> 标签：javascript, regex, json, email-validation

我有一个用于验证电子邮件地址的正则表达式字符串，我想通过 json 将它发送到我的应用程序。[我从dojo/Json](http://dojotoolkit.org/reference-guide/1.8/dojo/json.html)收到错误消息：

```
Uncaught SyntaxError: Unexpected token ] 
```

所以我把我的 JSON 文件放到[JSONLint 中](http://jsonlint.com/)，得到了这个稍微更具体的错误：

```
Parse error on line 3:
... {        "regex": "^(([^<>()[\]\\.,;:\
----------------------^
Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

这是我的 json 文件内容：

```
{
"Email Address": {
    "regex": "^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$"
    }
} 
```

Json.org 似乎没有说明任何关于转义正则表达式字符的内容......并且字符串本身被正确转义，因为我可以在 js 控制台中为该正则表达式字符串设置一个变量。

任何人都知道我能做些什么来让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:41:33.990

这不起作用，因为您在字符串中使用 "。

一种解决方法是将每个 " 替换为 /'\ 之类的东西，然后再次解析它的内容将每个 /'\ 替换为 " ，这样就可以了。

将寻找更好的方法，但同时希望这会有所帮助。

更新：

每个 base 64 对其进行编码然后对其进行解码：类似于[http://decodebase64.com/](http://decodebase64.com/)

并在您进行字符串化时保存 base 64 编码正则表达式，然后在您解析 base 64 解码并将其存储回来..

所以基本上

-当想要字符串化时 -base64 编码正则表达式 -用 base 64 覆盖普通正则表达式 -Stringify json

- 当想要解析 JSON - 解析它 - 获取 base 64 reg ex - 解码它 - 替换它

# nosql - 在 Cassandra 中存储订购的商品

> ID：12075383
> 
> 赞同：3
> 
> 时间：2012-08-22T14:28:59.730
> 
> 标签：nosql, cassandra

我正在开发应该使用 Apache Cassandra 来存储数据的 Web 应用程序。我需要存储每个项目的评分，然后获取评分最高的项目列表。

所以任务 - 以排序顺序存储项目的一些附加信息，以摆脱客户端排序或使用 ORDER BY 排序。

一种可能的选择是创建索引列族：

```
userId {
    100_ItemId1 : null, 
    90__ItemId2 : null,
    80__ItemId3 : null,
    80__ItemId4 : null
} 
```

*注意：* userId 是行的键，100、90、80 - 是评分值

但是这里有一个删除的问题，我们应该知道以前的评级值来删除索引，它可能需要在 Column Family 中存储反转的信息：

```
reversed_userId{
   ItemId1 : 100_ItemId1, 
   ItemId2 : 100_ItemId2,
   ...
} 
```

您能否说有一些模式可以有效地存储订购的物品？

PS：我不会使用 OrderPreservingPartitioner，因为它可以应用于整个 KeySpace，并且会损坏负载平衡和性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:26:57.300

我希望您会很高兴知道在 CQL 3 中您现在可以使用复合键结构进行排序。

[http://www.datastax.com/dev/blog/whats-new-in-cql-3-0](http://www.datastax.com/dev/blog/whats-new-in-cql-3-0)

例如：

```
 CREATE TABLE SortedPosts (
     post_id int,
     sort_order int,
     post_title text,
     PRIMARY KEY(post_id, sort_order)
 ); 
```

sort_order 将对其进行排序。你可以：

```
SELECT * FROM SortedPosts WHERE post_id = 1 ORDER BY sort_order ASC
SELECT * FROM SortedPosts WHERE post_id = 1 ORDER BY sort_order DESC 
```

# c# - 如何在 C# 中自动插入可选的花括号？

> ID：12075384
> 
> 赞同：2
> 
> 时间：2012-08-22T14:28:59.150
> 
> 标签：c#, visual-studio, resharper

在 C# 中（如在 Java 中），花括号是可选的，例如只包含单个语句的 if 块和循环：

```
if (condition) DoSomething(); 
```

我正在寻找一种工具，可以为我的整个解决方案插入缺少的可选花括号，将上面的代码变成这样的东西：

```
if (condition) {
    DoSomething();
} 
```

我知道 Eclipse 可以为 Java 做到这一点。不幸的是，我不知道有什么工具可以为 C# 做到这一点。我将不胜感激建议！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:30:22.210

JetBrains [Resharper](http://www.jetbrains.com/resharper/)让您可以通过短击键进行此类代码重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:52:41.127

你可以写一个*ReSharper Replace Pattern*。
通过（在 ReSharper 5.1.3 ReSharper->Tools->Pattern Catalog->Add Pattern 中）将模式添加到 Pattern Catalog。

然后你像这样写你的模式：

![在此处输入图像描述](../Images/1bba1821ae10b3ac1fefb59592b989ee.png)

不幸的是，这不适用于 if-else。所以你需要另一个像这样的模式：

![在此处输入图像描述](../Images/c0a13572a1c7ae199ca016f744f3e769.png)

*然后您可以在Pattern Catalog*对话框中设置模式的严重性，然后可以单击*Search now*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:57:07.847

使用 ReSharper，转到`ReSharper | Options -> Code Editing | C# | Formatting Style | Braces Layout`并将`Force Braces`部分中的必要选项更改为`Add braces`. 然后在解决方案资源管理器中找到您的解决方案，调用上下文菜单并从中进行选择`Cleanup code...`。选择`Default: Reformat code`并按下`Run`。但要小心！它还会重新格式化您解决方案中的所有代码文件。如果您第一次这样做，请务必备份，以防您不喜欢 ReSharper 的默认格式。也许您需要使用格式化程序设置以使其适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:32:24.423

你可以使用大括号完成器

[http://visualstudiogallery.msdn.microsoft.com/0e33cb22-d4ac-4f5a-902f-aff5177cc94d](http://visualstudiogallery.msdn.microsoft.com/0e33cb22-d4ac-4f5a-902f-aff5177cc94d)

# php - 合并不同的字符串

> ID：12075386
> 
> 赞同：0
> 
> 时间：2012-08-22T14:29:05.963
> 
> 标签：php, json, merge, diff

我有一些 PHP 函数给出了两个 JSON 文件，将它们合并为一个以满足某些规范。但是，我需要使用 PHP 添加一个功能，该功能可以合并两个文件的内容字符串。这些字符串可能具有在它们之间的某些点上不同的文本。

例子

**JSON-1**

```
"elements":[

...
{
            "type": "text",            
            "content": "It went up the tree! Then climbed down.",           
        },
...
] 
```

**JSON-2**

```
"elements":[

...
{
            "type": "text",            
            "content": "I saw your cat. It went up the tree! Then it run away!",           
        },
...
] 
```

我需要合并的文件就像

**JSON合并**

```
"elements":[

...
{
            "type": "text",            
            "content": "<la>I saw your cat.</la> It went up the tree! <po>Then climbed down.<po> <li> Then it run away!</li>",           
        },
...
] 
```

关于我该怎么做的任何想法？我想过“爆炸”数组中的内容，然后相互迭代以查看匹配的内容。但是，类似的词，在不同的上下文中会匹配并弄乱代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:35:22.227

FineDiff呢？

[http://www.raymondhill.net/finediff/finediff-code.php](http://www.raymondhill.net/finediff/finediff-code.php)

[http://www.raymondhill.net/finediff/viewdiff-ex.php](http://www.raymondhill.net/finediff/viewdiff-ex.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T15:22:41.160

试试 Text_Diff： http: [//www.horde.org/libraries/Horde_Text_Diff/](http://www.horde.org/libraries/Horde_Text_Diff/)

# javascript - 没有为 Ajax 添加的新元素注册 Jquery 事件

> ID：12075389
> 
> 赞同：1
> 
> 时间：2012-08-22T14:29:10.567
> 
> 标签：javascript, jquery, html, ajax

### 你好，

**编辑：**正如你们大多数人建议的那样，我尝试使用`.on()`而不是`.live()`。但它没有帮助。这个问题不仅在于 ajax 调用，甚至尝试使用 jquery 添加新元素，事件未注册到新创建的元素。
*我在下面更改了我的脚本*。
如果在现有表上触发单击事件，我将添加新表。单击事件对于第一个表触发良好，但对于脚本新添加的下一个表则不触发。
我认为问题出在`.each()`. 此功能不适用于新添加的元素。有什么方法可以解决这个问题吗？

* * *

我有一个 html 页面，其中内容由 ajax 事件更改。我想将点击事件注册到我的页面包含的所有表中。第一次它工作正常但是一旦内容被 ajax 更改，事件就会被触发..
*HTML：*

```
<head>
   <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
 </head>
<style>
 table{
  border-collapse:collapse;
 }
 table td{
  border:1px solid;
 }
</style>
 <body>
  <table clk="true">
   <thead>
        <tr>
         <td>S.No</td>
         <td>Name</td>
        </tr>
   </thead>
   <tbody>
     <tr><td>1</td> <td>Rama Rao</td></tr>
     <tr><td>2</td> <td>Tom Cruise</td></tr>
     <tr><td>3</td> <td>Tom Honks</td></tr>
     <tr><td>4</td> <td>Will Smith</td></tr>
   </tbody>
  </table>
 </body> 
```

*脚本：*

```
$('table').each(function(){
    if($(this).attr('clk')=="true"){
       $(this).find('tbody tr td').live('click',function(){
         var str= $('table').html();
         str = '<table  clk="true">'+str+'</table>';
         $('table').after(str);
       });
     }
   }); 
```

**注意**：如果表仅具有属性 clk="true"，则应注册事件。检查我认为*“每个”*循环是强制性的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:33:53.183

使用`on()`代替`live()`

你想要这样的东西吗？

[jsfiddle](http://jsfiddle.net/MWEMu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:40:05.297

您应该在`on`为动态加载的元素附加事件处理程序时使用该方法。该`live`方法在最新版本的 jQuery 中已被弃用（如果还没有，那么它将被弃用）。

例子：

```
$(document).on('tbody td', 'click', function(){
    alert('hi');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:48:59.470

我猜您需要将代码放在**成功**`$.ajax()`回调中：

```
$.ajax({
    url: 'page.html',
    success: function(data) {
        $('table[clk=true] tbody tr td').on('click', function() {
            alert("Hi..");
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:35:34.837

`.live`不能正常工作`.find`。试试这个：

```
$('table[slk=true] tbody td').live('click',function(){
    alert("Hi");
}) 
```

甚至更好，

```
$('table[slk=true]').delegate('tbody td', 'click', function(){
    alert("Hi");
}); 
```

如果还添加了新表，请以这种方式进行。

```
$(document).delegate('table[slk=true] tbody td', 'click', function(){
    alert("Hi");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T14:36:03.800

我想你想要这样的东西：

```
$("table[clk='true']").on("click", "tbody td", function(){
    alert("Hi.."); 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T00:47:22.093

您需要将委托事件附加到由 ajax 更改的元素的父容器。前任。如果您设置了整个表格，则需要将事件附加到正文上。

```
$('body').on('click', 'td', function(){ 
    // your function here
}); 
```

如果您将委托事件附加到由 ajax 重新加载的元素，它将不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T14:42:49.157

似乎您使用的是 jQuery 版本 1.7.1，不推荐使用 live 方法。所以，使用下面的方法。它会工作的。

```
$('table').each(function(){
   if($(this).attr('clk')=="true"){
       var cells = $(this).find('td');
       $('body').on('click', cells, function(){
       alert('hi');
       });
   }
}); 
```

​</p>

# svn - SVN：如何仅从 repo 中检索具有指定掩码的文件

> ID：12075395
> 
> 赞同：1
> 
> 时间：2012-08-22T14:29:28.623
> 
> 标签：svn

有一个大型的 SVN 存储库。我只想检索带有（一个）指定掩码或隐式给出名称的文件（很多！）。有很多符合条件的文件，分布在目录结构的各个位置。有什么方法可以通过简单的步骤用目录检索它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:01:45.413

干得好...

**编辑**（来自评论）首先获取存储库的空签出

```
svn co --depth=empty URLREPO 
```

然后创建一个包含`list_of_files.txt`您要更新的所有文件的路径的文件并尝试这个...

```
svn update `cat list_of_files.txt` 
```

这些你要牢记...

*   必须指定绝对路径。
*   如果你指定一个目录，所有的内容都会被更新。

对于创建`list_of_files.txt`，您可以使用 UNIX`find`命令。

希望这可以帮助！！！

# javascript - 向终端提示添加颜色会导致较大的空白

> ID：12075396
> 
> 赞同：5
> 
> 时间：2012-08-22T14:29:36.340
> 
> 标签：javascript, node.js, command-line-interface, ansi, readline

我正在编写一个简单的 cli 脚本，并想为以下代码添加一些颜色：

```
rl.question('Enter destination path: ', function(answer) {
     // ...                                                                                                                                
});                                                                                                                                  
rl.write('/home/' + user + '/bin'); 
```

在终端中显示：

```
Enter destination path: /home/jmcateer/bin_ 
```

但我想为提示添加一些颜色，我做了以下操作：

```
rl.question('\u001b[1;36mEnter destination path:\u001b[0m ', function(answer) {

});                                                                                                                                  
rl.write('/home/' + user + '/bin'); 
```

命令行提示符最终显示：

```
Enter destination path:                 /home/jmcateer/bin_ 
```

它可以工作，但是我宁愿没有大量的空白。有没有人对如何处理这个有任何想法？

编辑：

我无法通过退格来删除空格...当我尝试使用退格键时，空格会像这样跳到另一端

```
Enter destination path:                 /home/jmcateer/bin_
Enter destination path: /home/jmcateer/bi                _
Enter destination path: /home/jmcateer/b                _
...
Enter destination path:                 _ 
```

此时退格无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:21:31.417

当您在`rl.setPrompt(prompt, length)`没有第二个参数[的情况下调用时，内部`_promptLength`变量将设置为提示字符串的长度](https://github.com/joyent/node/blob/606a9339891a68144c6047356480f199ce04ae4c/lib/readline.js#L155)；*不*解释ANSI X3.64 转义序列。内部方法从][3]`_getCursorPos`计算光标位置；`_promptLength`因此，在长度中包含转义序列会导致光标的位置比应有的位置更远。

为了完全解决这个问题，Node 的 readline 库应该在设置`_promptLength`. 要解决此问题，您可以手动计算不带转义序列的提示字符串的长度，并将其作为第二个参数传递给`rl.setPrompt(prompt, length)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T04:05:29.537

我也遇到了类似的问题。Basil Crow 在他对问题原因的出色回答中是正确的，因为确实是 ANSI 转义序列导致了长度故障；然而，`Interface.setPrompt()`不仅仅是问题——它是*解决方案*！

似乎这种长度的误读（我在 bash 中玩弄时巧妙地避免了这一点）**会影响整个 Interface 对象的写出过程**`Interface.setPrompt()`，即，当未指定长度参数时，任何以任何容量调用的东西都会受到影响。

为了克服这个问题，你可以做以下两件事之一：

**重新定义`Interface.setPrompt()`以始终指定提示输出的长度，以便像这样的方法`Interface.question()`再次正常运行：**

```
// I'm using the 'color' npm library for the sake of convenience. It is not required
// and you can use normal regex to strip color codes and what not.
var colors   = require('colors'),
    readline = require('readline');

var rl = readline.createInterface(process.stdin, process.stdout);

/* Overcome some bugs in the Nodejs readline implementation */
rl._setPrompt = rl.setPrompt;
rl.setPrompt = function(prompt, length)
{
    rl._setPrompt(prompt, length ? length : prompt.split(/[\r\n]/).pop().stripColors.length);
};

var str = '[' + '?'.green + '] Blackbeard walks under the black flag with a ____? ';

rl.question(str, function(answer)
{
    var answ = 'scallywag swagger';
    console.log(
        'You answered "' + ((answer == answ) ? answer.green : answer.red)
        + '". The correct answer is', '"' + answ.green + '".');
}); 
```

**重新定义`Interface.write()`以使用`Interface.setPrompt()`将写出字符串和字符串的真实长度都传递给 setPrompt 方法：**

```
var colors   = require('colors'),
    readline = require('readline');

var rl = readline.createInterface(process.stdin, process.stdout);

/* Overcome some bugs in the Nodejs readline implementation */
rl._write = rl.write; 
rl.write = function(d, key)
{
    // "key" functionality is lost, but if you care enough you can add it back
    rl.setPrompt(d, d.split(/[\r\n]/).pop().stripColors.length);
    rl.prompt(true);
};

var str = '[' + '?'.green + '] Blackbeard walks under the black flag with a ____? ';
rl.write(str);

rl.on('line', function(answer)
{
    var answ = 'scallywag swagger';
    console.log(
        'You answered "' + ((answer == answ) ? answer.green : answer.red)
        + '". The correct answer is', '"' + answ.green + '".');
    rl.prompt(true);
}); 
```

两者的结果是相同的：![上述脚本的输出](../Images/60fea47aebcfd6c295d4fb09d50c8e21.png)

或者你可以两者都做。或者您可以`readline.Interface.prototype`直接修改（并全局应用您的修复）而不是对象实例本身。这里有很多选择。

希望这对某人有帮助！

编辑——另见：[https ://github.com/joyent/node/issues/3860](https://github.com/joyent/node/issues/3860)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:25:51.943

当然，您需要`rl.write`使用 CSI 序列修改您的字符串，`n D`其中`n`将光标移回的字符数。

这是一个可以试验的片段：

```
var rl = require('readline').createInterface({input: process.stdin, output: process.stdout});

rl.question('\u001b[1;36mEnter destination path: \u001b[0m', function(answer) {

});                                                                                               
rl.write('\u001b[11 D/home/jp/bin'); 
```

注意最后一行中的`11`and the吗？代表要向后移动的字符数`D`。那么显然是字符数。`D``11`

查看所有有趣的终端代码：[http ://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)

# python - 如何使用 pycogent 在 python 2.7 中创建祖先序列？

> ID：12075402
> 
> 赞同：1
> 
> 时间：2012-08-22T14:30:03.313
> 
> 标签：python, module, numpy, python-2.7, dna-sequence

我正在研究一个生物信息学项目，并尝试在 python 2.7 中运行一个名为 pycogent 的模块。我的目标是从一个由对齐的 16s Fastq 序列组成的文件中创建一个祖先序列。

我的python代码如下：

```
from cogent import LoadSeqs
aln = LoadSeqs('FullStrep.fasta')
lf.setAlignment(aln)
lf.optimise(show_progress=False, local=True)
ancestors = lf.likelyAncestralSeqs()
print ancestors 
```

但是，我收到以下错误消息。

```
Traceback (most recent call last):
  File "/Users/paulfryling/Desktop/Mypythonproj/pycogentancestor", line 1, in <module>
    from cogent import LoadSeqs
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/cogent/__init__.py", line 5, in <module>
    import numpy
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/__init__.py", line 137, in <module>
    import add_newdocs
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/add_newdocs.py", line 9, in <module>
    from numpy.lib import add_newdoc
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/lib/__init__.py", line 4, in <module>
    from type_check import *
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/lib/type_check.py", line 8, in <module>
    import numpy.core.numeric as _nx
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/__init__.py", line 5, in <module>
    import multiarray
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/multiarray.so, 2): no suitable image found.  Did find:
    /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/multiarray.so: no matching architecture in universal wrapper
>>> 
```

任何帮助或指导将不胜感激。

此致，

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T23:18:32.163

你遇到的问题是你没有 PyCogent 的一些依赖项，而且它有不少，但如果你有以下三个，你将能够使用几乎所有东西。

您需要安装的第一件事是 Python**，因为您在 Mac OS X 中选择您正在使用的当前操作系统版本：

*   [32 位版本：Panther (10.3)、Tiger (10.4)、Leopard (10.5) 或 Snow Leopard (10.6)](http://www.python.org/ftp/python/2.7.1/python-2.7.1-macosx10.3.dmg)。
*   [64 位版本：Snow Leopard (10.6)、Lion (10.7) 或 Mountain Lion (10.8)](http://www.python.org/ftp/python/2.7.1/python-2.7.1-macosx10.6.dmg)。

接下来你需要的是 NumPy，你可以从这里类似地下载它：

*   [黑豹（10.3）或老虎（10.4）](http://sourceforge.net/projects/numpy/files/NumPy/1.5.1/numpy-1.5.1-py2.7-python.org-macosx10.3.dmg/download)。
*   [豹 (10.5)](http://sourceforge.net/projects/numpy/files/NumPy/1.5.1/numpy-1.5.1-py2.7-python.org-macosx10.5.dmg/download)。
*   [雪豹 (10.6)、狮子 (10.7) 或山狮 (10.8)](http://sourceforge.net/projects/numpy/files/NumPy/1.6.1/numpy-1.6.1-py2.7-python.org-macosx10.6.dmg/download)。

接下来你需要安装 Matplotlib：

*   [黑豹 (10.3)、虎 (10.5) 或豹 (10.5)](http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-1.1.0/matplotlib-1.1.0-py2.7-python.org-macosx10.3.dmg/download)。
*   [雪豹 (10.6)、狮子 (10.7) 或山狮 (10.8)](http://sourceforge.net/projects/matplotlib/files/matplotlib/matplotlib-1.1.0/matplotlib-1.1.0-py2.7-python.org-macosx10.6.dmg/download)。

一旦你拥有了所有这些，你将需要安装 PyCogent 库，这样做：

1.  下载此[文件](http://sourceforge.net/projects/pycogent/files/PyCogent/1.5.1/PyCogent-1.5.1.tgz/download)并将其解压缩到您的计算机中。

2.  从终端转到下载此文件的文件夹，然后在 PyCogent 文件夹中运行以下命令：

* * *

```
python setup.py build
sudo python setup.py install 
```

这应该就是全部了。

如果需要，您可以安装[可选 installs](http://pycogent.sourceforge.net/install.html#optional-installs)。

** 虽然您的计算机中可能安装了一个 Python，但最好确保您拥有来自 Python.org 的 Python，因为它还与 Matplotlib 兼容，这是 PyCogent 的另一个依赖项。

# c - gcc：减少 libc 所需的版本

> ID：12075403
> 
> 赞同：20
> 
> 时间：2012-08-22T14:30:11.367
> 
> 标签：c, linux, gcc, linker, libc

我正在尝试在一些旧的 32 位 RedHat 发行版上运行新编译的二进制文件。
该二进制文件在运行 libc v2.12 的 CentOS 32 位 VM 上编译为 C（非 ++）。

RedHat 抱怨 libc 版本：

```
加载共享库时出错：需要 glibc 2.5 或更高版本的动态链接器
```

由于我的程序相当简单，它很可能没有使用 libc 中的任何新内容。

**有没有办法降低 libc 版本要求**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-22T14:43:25.427

未经测试的可能解决方案

> **什么是“加载共享库时出错：需要 glibc 2.5 或更高版本的动态链接器”？**
> 
> 此错误的原因是您要运行的动态二进制文件（或其依赖的共享库之一）只有 .gnu.hash 部分，但目标机器上的 ld.so 太旧而无法识别 .gnu.hash；它只识别老式的 .hash 部分。
> 
> 这通常发生在使用较新版本的 GCC 构建相关的动态二进制文件时。解决方案是使用 -static 编译器命令行选项（以创建静态二进制文件）或以下选项重新编译代码：
> 
> ```
> -Wl,--hash-style=both 
> ```
> 
> 这告诉链接编辑器 ld 创建 .gnu.hash 和 .hash 部分。
> 
> 根据[此处的 ld 文档](http://sourceware.org/binutils/docs/ld/Options.html)，老式 .hash 部分是默认设置，但编译器可以覆盖它。例如，RHEL（Red Hat Enterprise Linux）服务器版本 5.5 上的 GCC（版本 4.1.2）具有以下行：
> 
> ```
> $ gcc -dumpspecs
> ....
> *link:
> %{!static:--eh-frame-hdr} %{!m32:-m elf_x86_64} %{m32:-m elf_i386} --hash-style=gnu   %{shared:-shared}   ....
>                                                                    ^^^^^^^^^^^^^^^^
> ... 
> ```
> 
> 有关详细信息，[请参阅此处](http://crtags.blogspot.com/2010/11/elf-elf-elf-dont-do-it.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T14:58:49.127

我已经遇到了同样的问题，试图为一台我没有编译过的旧机器编译一个小工具（我写的）。我在最新的机器上编译它，并且二进制文件至少需要 GLIBC 2.14 才能运行。

通过转储二进制文件（使用 xxd），我发现：

```
....
5f64 736f 5f68 616e 646c 6500 6d65 6d63  _dso_handle.memc
7079 4040 474c 4942 435f 322e 3134 005f  py@@GLIBC_2.14._
.... 
```

因此，我通过调用自制的 memcpy 替换了代码中的 memcpy 调用，并且对 glibc 2.14 的依赖神奇地消失了。

很抱歉，我无法真正解释它为什么起作用，或者我无法解释为什么它在修改之前不起作用。

希望它有所帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T08:50:15.310

好吧，为了在优雅和蛮力之间找到一些平衡，我下载了一个**与目标内核**版本匹配的 VM，从而修复了库问题。
整个过程（下载 + yum install gcc）不到 30 分钟。

参考：[虚拟机](http://www.thoughtpolice.co.uk/vmware/)、[内核版本映射表](http://en.wikipedia.org/wiki/CentOS#Release_history)

# c# - 将数据发布到包含参数的 url 时回发导致白屏

> ID：12075406
> 
> 赞同：0
> 
> 时间：2012-08-22T14:30:15.347
> 
> 标签：c#, asp.net, .net, postback, fatal-error

我在 .net 回发系统中遇到了意外行为和/或错误。

我有一个使用母版页提供公共元素的页面，表单输入在子页和母版页之间拆分。表单提交按钮位于母版页上，我正在尝试在母版页上处理回发。

每当我尝试提交表单包含任何非空值**且**url 包含参数的数据时，页面都无法正确处理。如果页面本身在任一条件下提交，则不会发生这种情况。

表单回发方法是post。

该页面无法加载，并且在 Firefox 中返回 no element found 错误。

我已经检查了正确的类名等，并且在非表单元素中确实有空属性，但是由于页面一开始正确加载，我认为这不相关。我还检查了无限循环代码。

这是当前的回发处理代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        save_page();
    }

    page_render();
}

//save
private void save_page()
{
    dev_text.Text = "save in progress";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:13:46.800

只有在将 HTML 发送到浏览器时，才能在服务器上的 HTML 元素中设置文本。通常，一旦页面的整个处理完成，就会发生这种情况......所以通常在用户启动回发之后很长一段时间。

与其在服务器上设置文本，不如考虑在提交时直接在浏览器上设置文本。就像是...

```
function setSavingText(){
   // Vanilla javascript...
   document.getElementById("<%=dev_text.ClientId%>").innerHTML = "save in progress";
   // JQuery...
   $("#<%=dev_text.ClientId%>").text("save in progress");
}

<asp:Button runat="server" ... OnClientClick="setSavingText();" /> 
```

上面的函数包含一个用于 vanilla（普通）javascript 的行和一个用于[jQuery 库](http://jquery.com)的行。你只需要**其中**之一。

# asp.net-mvc - ASP.NET MVC WebApi 和 EF 延迟加载 = 永远加载？

> ID：12075410
> 
> 赞同：2
> 
> 时间：2012-08-22T14:30:20.450
> 
> 标签：asp.net-mvc, linq, entity-framework, asp.net-web-api

在我的 ASP.NET MVC WebApi 项目中，我有一个存储库（带有接口），它通过一个简单的 Linq SingleOrDefault 命令查询数据库，然后将所有内容输出到控制器。（EF = 数据库优先针对 Oracle DB）

问题是，当我打开延迟加载（通过 EDMX 文件属性）时，get 将永远加载并且没有响应。如果我关闭延迟加载一切正常？

更奇怪的是，当我将所有查询放在控制台应用程序中并通过 Console.WriteLine 输出所有内容时，它是否也适用于延迟加载？

**界面：**

```
Public Interface IMedienRepository
    Function [Get](id As Integer) As MEDIEN
End Interface 
```

**存储库**

```
Private db As EFEntities
Public Sub New()
    db = New EFEntities
End Sub

Public Function [Get](id As Integer) As MEDIEN Implements IMedienRepository.[Get]
    Dim _medien = db.MEDIEN.SingleOrDefault(Function(m) m.MEDIENNR = id)

    If _medien Is Nothing Then
        Throw New NotFoundException()
    End If

    Return _medien.SingleOrDefault()
End Function 
```

**控制器**

```
Private _repository As IMedienRepository
Public Sub New()
    Me.New(New MedienRepository())
End Sub
Public Sub New(repository As IMedienRepository)
    _repository = repository
End Sub

Public Function GetValue(id As Integer) As MEDIEN
    Try            
        Return _repository.Get(id)
    Catch generatedExceptionName As NotFoundException
        Throw New HttpResponseException(New HttpResponseMessage() With { _
         .StatusCode = System.Net.HttpStatusCode.NotFound _
        })
    End Try
End Function 
```

**仅供参考：即使我将查询直接放入控制器也无法正常工作！**

如果有人知道这个问题并且可以帮助我，我将不胜感激，因为我喜欢在我的 MVC 视图中使用延迟加载功能。

`db.ContextOptions.LazyLoadingEnabled = False`我目前的工作是通过 WebApi 为调用关闭延迟加载 ( ) ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:48:10.300

鉴于您描述的行为，我怀疑延迟加载导致（出于某种原因）从数据库加载大量数据，这需要很长时间并且看起来没有响应。关闭延迟加载可确保只返回查询的第一个“级别”，而不填充任何集合属性。

如果这些调用是针对 WebAPI 的，我不确定您是否会从延迟加载中获得任何真正的好处。API 调用在查询数据库和返回严格定义的结果集的方式上应该是非常确定的。编写性能良好的 API 很困难（只需询问 StackOverlow 团队！），查询性能至关重要。

# php - 使用空格访问 JSON 输出

> ID：12075412
> 
> 赞同：1
> 
> 时间：2012-08-22T14:30:27.530
> 
> 标签：php, json

如果 JSON 字符串的名称中有空格`"Some Items"`（有更准确的术语吗？），在使用它之后如何在 PHP 中访问`json_decode($json_string)`它？从 API 返回的数据是否也需要此名称？

**JSON字符串**

```
{"Some Items":[{"post_id":"1284"},{"post_id":"1392"},{"post_id":"1349"}]} 
```

**这些不起作用**

```
$data = json_decode($json_string);
$data = $data->"Some Items";    // invalid PHP
$data = $data["Some Items"];    // Cannot use object of type stdClass as array 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:35:52.380

您需要使用花括号 ( `$object->{'...'}`) 语法：

```
$data->{'Some Items'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:50:17.287

如果您不喜欢花括号的想法，您可以使用动态访问器业务：

```
$someitems = "Some Items";
var_dump($data->$someitems); 
```

或者，您可以将 $data 转换为数组并使用方括号：

```
$data = (array)json_decode($json_str);
var_dump($data['Some Items']); 
```

`json_decode`有一个开关，所以你不需要使用铸造。

```
$data = json_decode($json_str, true);
var_dump($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:35:38.893

尝试这个

```
$data->{'Some Items'}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T14:36:24.287

试试看

```
<?php
$json = '{"Some Items":[{"post_id":"1284"},{"post_id":"1392"},{"post_id":"1349"}]}';
$decoded = json_decode($json);

// for example
echo($decoded->{"Some Items"}[0]->post_id);
?> 
```

# asp.net-mvc - 带有通用提供程序的 ASP.NET MVC 4 中的错误

> ID：12075415
> 
> 赞同：5
> 
> 时间：2012-08-22T14:30:31.183
> 
> 标签：asp.net-mvc, authentication, sql-server-ce

我创建了一个全新的简单 ASP.NET MVC 4 Internet 项目，然后我使用 ADO.NET 实体数据模型设计器创建了模型，然后我安装了**System.Web.Providers**（通用提供程序）并配置了 Web.config 以便拥有两个不同的数据源，都使用**SQL CE 4.0**。

这些是我的连接字符串：

```
<add name="DefaultConnection" connectionString="Data Source=C:\maindb.sdf" providerName="System.Data.SqlServerCe.4.0" />
<add name="MyEntitiesModelContainer" connectionString="metadata=res://*/MyEntitiesModel.csdl|res://*/MyEntitiesModel.ssdl|res://*/MyEntities.msl;provider=System.Data.SqlServerCe.4.0;provider connection string=&quot;Data Source=C:\myentities.sdf&quot;" providerName="System.Data.EntityClient" /> 
```

该应用程序有效。但是当我尝试登录时，这是我得到的异常：

***要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的一个实例。***

我还在`<add key="enableSimpleMembership" value="true" />`Web.config 中添加了，因为不同论坛上的某个人解决了这个问题。这不是我的情况，同样的错误仍然存​​在。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:44:53.410

ASP.NET MVC4 附带简单的成员资格，并且简单的成员资格与 SQL CE 开箱即用，您不需要（实际上不能使用）具有简单成员资格的通用提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:35:09.980

从[这个](http://forums.asp.net/t/1661378.aspx/1)ASP.NET 论坛帖子：

> 感谢您的提示。现在我能够看到提供程序被劫持了，我添加了

```
<appSettings>     
    <add key="enableSimpleMembership" value="true" />
</appSettings> 
```

> 现在一切似乎都运行良好。

# actionscript-3 - AS3 if 或 removeChild 不工作

> ID：12075417
> 
> 赞同：0
> 
> 时间：2012-08-22T14:30:58.667
> 
> 标签：actionscript-3, if-statement, removechild

首先，我不得不说在 AS3 中添加 - 删除子项对我来说是新事物......

我设法添加了我想要的任何东西，但问题是当出现新结果时，前一个结果必须消失，而新结果将显示在同一个位置。那么问题就在这里。他们似乎一个接一个地生产孩子。这是我尝试使用 if 删除Child 的代码

```
//--------------------------μεταβλητές-----------------------------
var iStr:String;
var iffpD:String;
var iRankP:String;
var iq0:Number;
var iq1:String;
var iq2:String;
var iq3:String;
var iq4:String;
var iq5:String;
var iq6:String;
var iq7:String;
var iFree:String;
var iclimc:String;
var ishootr:String;
var ispecialf:String;
var Ranked:Number;
var i:Number;
var day:Number;
var Powered:Number;
var PPD:Number;
var RankN:Array = new Array(0);
var rankupday:Array = new Array(0);
var rankpointup:Array = new Array(0);
var apotelesma:Number;
var oloioibathmoi:Array = new Array(P0,P1,P2,P3,CO0,CO1,CO2,CO3,S0,S1,S2,S3,L0,L1,L2,L3,CPT0,CPT1,CPT2,CPT3,M0,M1,M2,M3,COM0,COM1,COM2,COM3,LC0,LC1,LC2,LC3,C0,C1,C2,C3,G0,G1,G2,G3,FM0,FM1,FM2,FM3,SM0,SM1,SM2,SM3,NF0,NF1,NF2,NF3,WCF0,WCF1,WCF2,WCF3,LF0,LF1,LF2,LF3,Gow0,Gow1,Gow2,Gow3)

//----------------------------restricts--------------------------------
Str.restrict = "0-9\\.";
ffpD.restrict = "0-9";
RankP.restrict = "0-9";
q1.restrict = "0-9";
q2.restrict = "0-9";
q3.restrict = "0-9";
q4.restrict = "0-9";
q5.restrict = "0-9";
q6.restrict = "0-9";
q7.restrict = "0-9";
Free.restrict = "1-3";
climc.restrict = "0-3";
shootr.restrict = "0-3";
specialf.restrict = "0-3";

//--------------------------borders--------------------------------------
Str.border = true;
ffpD.border = true;
RankP.border = true;
q1.border = true;
q2.border = true;
q3.border = true;
q4.border = true;
q5.border = true;
q6.border = true;
q7.border = true;
Free.border = true;
climc.border = true;
shootr.border = true;
specialf.border = true;

//--------------------i = noti.text-------------------------------------

iStr= Str.text;
iffpD= ffpD.text;
iRankP= RankP.text;
iq1= q1.text;
iq2= q2.text;
iq3= q3.text;
iq4= q4.text;
iq5= q5.text;
iq6= q6.text;
iq7= q7.text;
iFree= Free.text;
iclimc= climc.text;
ishootr= shootr.text;
ispecialf= specialf.text;
day = 0
i = 0
apotelesma = 0
//---------------------button------------------------------------------

btn.addEventListener(MouseEvent.CLICK, Calco);

function Calco(event:MouseEvent):void
{

        **if(bathmos1 && bathmos1.parent)
        {
            bathmos1.parent.removeChild(bathmos1);
            bathmos1 = null;
        }

        if(bathmos0 && bathmos0.parent)
        {
            bathmos0.parent.removeChild(bathmos0);
            bathmos0 = null;
        }

        if(bathmos2 && bathmos2.parent)
        {
            bathmos2.parent.removeChild(bathmos2);
            bathmos2 = null;
        }**

    iStr= Str.text;
    iffpD= ffpD.text;
    iRankP= RankP.text;

    iq1= q1.text;
    iq2= q2.text;
    iq3= q3.text;
    iq4= q4.text;
    iq5= q5.text;
    iq6= q6.text;
    iq7= q7.text;
    iFree= Free.text;
    iclimc= climc.text;
    ishootr= shootr.text;
    ispecialf= specialf.text;
    Ranked = Number(RankP); 

    Powered = Number(iStr);
    PPD = (Number(iFree) * 5) + (Number(iclimc) * 5/2) + (Number(ishootr) * 5) + (Number(ispecialf) * 10) + (9 / 5)
    //------------------------------------------rank finder RankN--------------------------------
    if (Number(iRankP) < 15) {
        RankN[0] = "1"
    } else if (Number(iRankP) < 45) {
        RankN[0] = "2"
    } else if (Number(iRankP) < 80 ) {
        RankN[0] = "3"
    } else if (Number(iRankP) < 120 ) {
        RankN[0] = "4"
    } else if (Number(iRankP) < 170 ) {
        RankN[0] = "5"
    } else if (Number(iRankP) < 250 ) {
        RankN[0] = "6" 
    } else if (Number(iRankP) < 350 ) {
        RankN[0] = "7"
    } else if (Number(iRankP) < 450 ) {
        RankN[0] = "8"
    } else if (Number(iRankP) < 600 ) {
        RankN[0] = "9"
    } else if (Number(iRankP) < 800 ) {
        RankN[0] = "10"
    } else if (Number(iRankP) < 1000 ) {
        RankN[0] = "11" 
    } else if (Number(iRankP) < 1400 ) {
        RankN[0] = "12" 
    } else if (Number(iRankP) < 1850 ) {
        RankN[0] = "13"
    } else if (Number(iRankP) < 2350 ) {
        RankN[0] = "14"
    } else if (Number(iRankP) < 3000 ) {
        RankN[0] = "15"
    } else if (Number(iRankP) < 3750 ) {
        RankN[0] = "16"
    } else if (Number(iRankP) < 5000 ) {
        RankN[0] = "17"
    } else if (Number(iRankP) < 6500 ) {
        RankN[0] = "18"
    } else if (Number(iRankP) < 9000 ) {
        RankN[0] = "19"
    } else if (Number(iRankP) < 12000 ) {
        RankN[0] = "20"
    } else if (Number(iRankP) < 15500 ) {
        RankN[0] = "21"
    } else if (Number(iRankP) < 20000 ) {
        RankN[0] = "22"
    } else if (Number(iRankP) < 25000 ) {
        RankN[0] = "23"
    } else if (Number(iRankP) < 31000 ) {
        RankN[0] = "24"
    } else if (Number(iRankP) < 40000 ) {
        RankN[0] = "25"
    } else if (Number(iRankP) < 52000 ) {
        RankN[0] = "26"
    } else if (Number(iRankP) < 67000 ) {
        RankN[0] = "27"
    } else if (Number(iRankP) < 85000 ) {
        RankN[0] = "28"
    } else if (Number(iRankP) < 110000 ) {
        RankN[0] = "29"
    } else if (Number(iRankP) < 140000 ) {
        RankN[0] = "30"
    } else if (Number(iRankP) < 180000 ) {
        RankN[0] = "31"
    } else if (Number(iRankP) < 225000 ) {
        RankN[0] = "32"
    } else if (Number(iRankP) < 285000 ) {
        RankN[0] = "33"
    } else if (Number(iRankP) < 355000 ) {
        RankN[0] = "34"
    } else if (Number(iRankP) < 435000 ) {
        RankN[0] = "35"
    } else if (Number(iRankP) < 540000 ) {
        RankN[0] = "36"
    } else if (Number(iRankP) < 660000 ) {
        RankN[0] = "37"
    } else if (Number(iRankP) < 800000 ) {
        RankN[0] = "38"
    } else if (Number(iRankP) < 950000 ) {
        RankN[0] = "39"
    } else if (Number(iRankP) < 1140000 ) {
        RankN[0] = "40"
    } else if (Number(iRankP) < 1350000 ) {
        RankN[0] = "41"
    } else if (Number(iRankP) < 1600000 ) {
        RankN[0] = "42"
    } else if (Number(iRankP) < 1875000 ) {
        RankN[0] = "43"
    } else if (Number(iRankP) < 2185000 ) {
        RankN[0] = "44"
    } else if (Number(iRankP) < 2550000 ) {
        RankN[0] = "45"
    } else if (Number(iRankP) < 3000000 ) {
        RankN[0] = "46"
    } else if (Number(iRankP) < 3500000 ) {
        RankN[0] = "47"
    } else if (Number(iRankP) < 4150000 ) {
        RankN[0] = "48"
    } else if (Number(iRankP) < 4900000 ) {
        RankN[0] = "49"
    } else if (Number(iRankP) < 5800000 ) {
        RankN[0] = "50"
    } else if (Number(iRankP) < 7000000 ) {
        RankN[0] = "51"
    } else if (Number(iRankP) < 9000000 ) {
        RankN[0] = "52"
    } else if (Number(iRankP) < 11500000 ) {
        RankN[0] = "53"
    } else if (Number(iRankP) < 14500000 ) {
        RankN[0] = "54"
    } else if (Number(iRankP) < 18000000 ) {
        RankN[0] = "55"
    } else if (Number(iRankP) < 22000000 ) {
        RankN[0] = "56"
    } else if (Number(iRankP) < 26500000 ) {
        RankN[0] = "57"
    } else if (Number(iRankP) < 31500000 ) {
        RankN[0] = "58"
    } else if (Number(iRankP) < 37000000 ) {
        RankN[0] = "59"
    } else if (Number(iRankP) < 43000000 ) {
        RankN[0] = "60"
    } else if (Number(iRankP) < 50000000 ) {
        RankN[0] = "61"
    } else if (Number(iRankP) < 100000000 ) {
        RankN[0] = "62"
    } else if (Number(iRankP) < 200000000 ) {
        RankN[0] = "63"
    } else if (Number(iRankP) < 500000000 ) {
        RankN[0] = "64"
    } else if (Number(iRankP) > 500000000 ) {
        RankN[0] = "65"
    }

    ertext.text = ""
    iq0 = Number(iffpD) - Number(iq1)-Number(iq2) -Number(iq3)-Number(iq4)-Number(iq5)-Number(iq6)-Number(iq7)
    if (Number(iStr) == 0 || Number(iffpD) >= 250 || Number(iffpD) == 0 || iq0 < 0 ) {
        ertext.text = "Fill Strenght, FFs per day, rank points!"
    } else {

        //while (RankN[day] != "65"){
        while (Number(iRankP) < 500000000){
            if (Number(iRankP) < 15) {
        RankN[day] = "1"
    } else if (Number(iRankP) < 45) {
        RankN[day] = "2"
    } else if (Number(iRankP) < 80 ) {
        RankN[day] = "3"
    } else if (Number(iRankP) < 120 ) {
        RankN[day] = "4"
    } else if (Number(iRankP) < 170 ) {
        RankN[day] = "5"
    } else if (Number(iRankP) < 250 ) {
        RankN[day] = "6" 
    } else if (Number(iRankP) < 350 ) {
        RankN[day] = "7"
    } else if (Number(iRankP) < 450 ) {
        RankN[day] = "8"
    } else if (Number(iRankP) < 600 ) {
        RankN[day] = "9"
    } else if (Number(iRankP) < 800 ) {
        RankN[day] = "10"
    } else if (Number(iRankP) < 1000 ) {
        RankN[day] = "11" 
    } else if (Number(iRankP) < 1400 ) {
        RankN[day] = "12" 
    } else if (Number(iRankP) < 1850 ) {
        RankN[day] = "13"
    } else if (Number(iRankP) < 2350 ) {
        RankN[day] = "14"
    } else if (Number(iRankP) < 3000 ) {
        RankN[day] = "15"
    } else if (Number(iRankP) < 3750 ) {
        RankN[day] = "16"
    } else if (Number(iRankP) < 5000 ) {
        RankN[day] = "17"
    } else if (Number(iRankP) < 6500 ) {
        RankN[day] = "18"
    } else if (Number(iRankP) < 9000 ) {
        RankN[day] = "19"
    } else if (Number(iRankP) < 12000 ) {
        RankN[day] = "20"
    } else if (Number(iRankP) < 15500 ) {
        RankN[day] = "21"
    } else if (Number(iRankP) < 20000 ) {
        RankN[day] = "22"
    } else if (Number(iRankP) < 25000 ) {
        RankN[day] = "23"
    } else if (Number(iRankP) < 31000 ) {
        RankN[day] = "24"
    } else if (Number(iRankP) < 40000 ) {
        RankN[day] = "25"
    } else if (Number(iRankP) < 52000 ) {
        RankN[day] = "26"
    } else if (Number(iRankP) < 67000 ) {
        RankN[day] = "27"
    } else if (Number(iRankP) < 85000 ) {
        RankN[day] = "28"
    } else if (Number(iRankP) < 110000 ) {
        RankN[day] = "29"
    } else if (Number(iRankP) < 140000 ) {
        RankN[day] = "30"
    } else if (Number(iRankP) < 180000 ) {
        RankN[day] = "31"
    } else if (Number(iRankP) < 225000 ) {
        RankN[day] = "32"
    } else if (Number(iRankP) < 285000 ) {
        RankN[day] = "33"
    } else if (Number(iRankP) < 355000 ) {
        RankN[day] = "34"
    } else if (Number(iRankP) < 435000 ) {
        RankN[day] = "35"
    } else if (Number(iRankP) < 540000 ) {
        RankN[day] = "36"
    } else if (Number(iRankP) < 660000 ) {
        RankN[day] = "37"
    } else if (Number(iRankP) < 800000 ) {
        RankN[day] = "38"
    } else if (Number(iRankP) < 950000 ) {
        RankN[day] = "39"
    } else if (Number(iRankP) < 1140000 ) {
        RankN[day] = "40"
    } else if (Number(iRankP) < 1350000 ) {
        RankN[day] = "41"
    } else if (Number(iRankP) < 1600000 ) {
        RankN[day] = "42"
    } else if (Number(iRankP) < 1875000 ) {
        RankN[day] = "43"
    } else if (Number(iRankP) < 2185000 ) {
        RankN[day] = "44"
    } else if (Number(iRankP) < 2550000 ) {
        RankN[day] = "45"
    } else if (Number(iRankP) < 3000000 ) {
        RankN[day] = "46"
    } else if (Number(iRankP) < 3500000 ) {
        RankN[day] = "47"
    } else if (Number(iRankP) < 4150000 ) {
        RankN[day] = "48"
    } else if (Number(iRankP) < 4900000 ) {
        RankN[day] = "49"
    } else if (Number(iRankP) < 5800000 ) {
        RankN[day] = "50"
    } else if (Number(iRankP) < 7000000 ) {
        RankN[day] = "51"
    } else if (Number(iRankP) < 9000000 ) {
        RankN[day] = "52"
    } else if (Number(iRankP) < 11500000 ) {
        RankN[day] = "53"
    } else if (Number(iRankP) < 14500000 ) {
        RankN[day] = "54"
    } else if (Number(iRankP) < 18000000 ) {
        RankN[day] = "55"
    } else if (Number(iRankP) < 22000000 ) {
        RankN[day] = "56"
    } else if (Number(iRankP) < 26500000 ) {
        RankN[day] = "57"
    } else if (Number(iRankP) < 31500000 ) {
        RankN[day] = "58"
    } else if (Number(iRankP) < 37000000 ) {
        RankN[day] = "59"
    } else if (Number(iRankP) < 43000000 ) {
        RankN[day] = "60"
    } else if (Number(iRankP) < 50000000 ) {
        RankN[day] = "61"
    } else if (Number(iRankP) < 100000000 ) {
        RankN[day] = "62"
    } else if (Number(iRankP) < 200000000 ) {
        RankN[day] = "63"
    } else if (Number(iRankP) < 500000000 ) {
        RankN[day] = "64"
    } else if (Number(iRankP) > 500000000 ) {
        RankN[day] = "65"
    }
            Powered = Powered + PPD
            apotelesma = ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 0/100)* iq0) +
                         ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 20/100)* Number(iq1)) +
                         ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 40/100)* Number(iq2)) +
                         ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 60/100)* Number(iq3)) +
                         ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 80/100)* Number(iq4)) +
                         ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 100/100)* Number(iq5)) +
                         ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 120/100)* Number(iq6)) +
                         ((((Number(RankN[day])-1)/20+(45/150))*((Powered/10)+40))* (1 + 200/100)* Number(iq7));

            apotelesma = apotelesma / 10;
            iRankP = String(Number(iRankP) + apotelesma);

            if (Number(RankN[day]) > Number(RankN[day - 1])) {
                rankupday[i] = String(day);
                rankpointup[i] = iRankP
                i ++
            }
            if (Number(RankN[day]) == 62 && Number(RankN[day-1]) == 61) {
                Gow.text = String(day);
            }
            day = day + 1
        }
    }
    rank1.text = rankupday[0];
    rank2.text = rankupday[1];
    rank3.text = rankupday[2];
    Goww.text = String(day);

    var bathmos0:MovieClip = new oloioibathmoi[RankN[rankupday[0]]-1];
    addChild(bathmos0);
    bathmos0.x = 60;
    bathmos0.y = 535;
    bathmos0.alpha=.5;
    var bathmos1:MovieClip = new oloioibathmoi[RankN[rankupday[1]]-1];
    addChild(bathmos1);
    bathmos1.x = 156;
    bathmos1.y = 535;
    bathmos1.alpha=.5;
    var bathmos2:MovieClip = new oloioibathmoi[RankN[rankupday[2]]-1];
    addChild(bathmos2);
    bathmos2.x = 256;
    bathmos2.y = 535;
    bathmos2.alpha=.5;

    day=0
} 
```

似乎“如果”不起作用......我如何检查是否有要删除的东西......
我放了完整的代码，“如果”在开头和结尾都带有**！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:29:22.440

我通常有这样的功能：

```
private function remove(child:DisplayObject):void
{
    if(child && child.parent)
    {
         child.parent.removeChild(child);
         child = null;
    }
} 
```

如您所见，它检查子项是否存在（不为空），然后如果它有一个父项，并且父项包含显示列表中的子项，如果是这样，它将删除它然后将其清空，您可能想要也可能不想要孩子null，那是你的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:42:24.613

```
var bathmos0:MovieClip = new oloioibathmoi[RankN[rankupday[0]]-1]; 
```

...这个变量 (bathmos0) 在你的函数范围内是本地的。当您尝试使用以下方法将其删除时，它在您的功能开始时不存在：

```
if(bathmos0 && bathmos0.parent)
{
bathmos0.parent.removeChild(bathmos1);
bathmos0= null;
} 
```

如果要删除剪辑，请为其命名：

```
var bathmos0:MovieClip = new oloioibathmoi[RankN[rankupday[0]]-1];
bathmos0.name = "bathmos0"; 
```

...然后按名称将其删除：

```
var mc:MovieClip = getChildByName("bathmos0");
if(mc && mc.parent)
{
    mc.parent.removeChild(mc);
    mc= null;
} 
```

要么这样，要么把你的`bathmosN`变量放在你的函数之外，这样当你尝试删除它们时它们就在范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T08:28:20.733

如果嵌套条件会更清楚一些，在检查其父级是否为 null**之前检查目标 MovieClip 是否为 null。**

此代码在逻辑上无法抛出空异常错误：

```
if(bathmos1 != null)
{
    trace("bathmos1 is not null");
    if(bathmos1.parent != null)
    {
        trace("bathmos1 parent is not null");
        bathmos1.parent.removeChild(bathmos1);
    }
    bathmos1 = null;
} 
```

因此，借用 Neil，您的可重用函数将是：

```
private function removeIfExists($child:DisplayObject):void
{
    if($child)
    {
        if($child.parent)
        {
            $child.parent.removeChild($child);
        }
        $child= null;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:40:33.460

有什么错误吗？你是什​​么意思'不工作'？要删除孩子，您必须检查多个条件。尝试这个：

```
if(bathmos1 != null && bathmos1.parent != null && stage.contains(bathmos1)){
  stage.removeChild(bathmos1);
}else
    trace("bathmos1 is not null: " + bathmos1 != null);
    trace("bathmos1's parent is not null: " + bathmos1.parent != null);
    trace("stage contains bathmos1: " + stage.contains(bathmos1));
} 
```

# java - OrgXML + Blender + JMonkey

> ID：12075425
> 
> 赞同：0
> 
> 时间：2012-08-22T14:31:23.567
> 
> 标签：java, eclipse, blender

我对 OrgXML 和 JMonkeyEngine 有疑问。我在搅拌机中创建了一个模型。之后，我将其导出为 OrgXML 格式。我得到了一些带有扩展名的文件：mash.xml、场景、材质和一些 jpg 格式的纹理。我正在阅读 JMonkey 网站上的教程，该网站上有一个示例：

```
// Load a model from test_data (OgreXML + material + texture)

Spatial ninja = assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
ninja.scale(0.05f, 0.05f, 0.05f);
ninja.rotate(0.0f, -3.0f, 0.0f);
ninja.setLocalTranslation(0.0f, -5.0f, -2.0f);
rootNode.attachChild(ninja);
// You must add a directional light to make the model visible!
DirectionalLight sun = new DirectionalLight();
sun.setDirection(new Vector3f(-0.1f, -0.7f, -1.0f).normalizeLocal());
rootNode.addLight(sun); 
```

这对于本示例是正确的。我在 Eclipse 中有一个漂亮的忍者。但是当我尝试对我的模型做同样的事情时，它不能正常工作。我在太空中有一把红剑（我创造的），没有任何纹理。我在我的项目目录中创建了 assets 文件夹，以及子文件夹“Models”和“Sword”。在“剑”目录中，我有从搅拌机导出的所有文件。有人知道我出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:14:00.840

我会尝试很多东西。

首先，您可能想弄清楚这是 Blender 中的导出问题还是 jmonkey 中的导入问题。打开 .mesh.xml 文件，看看里面是否有一堆坐标。

第二次尝试使用资产管理器而不是 .mesh.xml 导入 .scene。第三，尝试通过右键单击将 .scene 转换为 .j3o 文件。

我是一个新的 jmonkey 用户，我也想弄清楚所有这些东西。

# silverlight - Telerik RadMaskedTextBox 焦点遮罩光标间距

> ID：12075428
> 
> 赞同：1
> 
> 时间：2012-08-22T14:31:42.690
> 
> 标签：silverlight, xaml, telerik, controltemplate, maskedtextbox

在使用 RadMaskedTextBox 时，我不断遇到这种越来越烦人的细微差别，其中一旦字段获得焦点，光标似乎不会将自己定位在字段的开头。相反，我得到了这样的东西；

![在此处输入图像描述](../Images/598e32f4a2dde91466257d3cadb08911.png)

例如，这将来自下面的代码。请注意，在示例中，光标从字段开头开始 7 个空格。这正是我在我的掩码中设置的 # 的数量，以允许输入 7 个字符的数字，如下所示。

```
<telerik:RadMaskedTextBox 
         Value="{Binding Path=Parameters.Blah, Mode=TwoWay}" 
         MaskType="Standard"
         Placeholder=""
         Mask="#######"/> 
```

当光标在保持我的数字输入长度的同时获得焦点时，如何让光标回到字段的开头？我怀疑我在这里遗漏了一个空洞的细节。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:52:47.533

我不确定您要的是什么...但是如果您只想将光标放在 radmaskedtextbox 开头的焦点上（一旦您获得焦点，您可以单击文本框中的任意位置来移动光标）您应该使用这个属性：

```
SelectionOnFocus="CaretToBeginning" 
```

# git - 使用 Puppet 和 Hiera 的 Git 工作流

> ID：12075439
> 
> 赞同：3
> 
> 时间：2012-08-22T14:32:22.177
> 
> 标签：git, puppet

我们是一个 2 人团队，使用 puppet/Hiera 管理 20 台服务器。到目前为止，我们在开发清单时还没有使用过任何 VCS。

我在 puppetmaster 上配置了一个远程 Git 存储库，并将我们的清单和模块文件夹推送到主分支（用于开发）并推送了一个相同的生产分支。远程仓库有一个[发布后挂钩](https://github.com/adrienthebo/puppet-git-hooks/blob/master/post-receive/dynamic-environments)，它根据分支名称（或更新，如果存在）配置新环境，并且 puppetmaster 配置了动态环境以使其能够工作。[这个配置在puppet 博客](http://puppetlabs.com/blog/git-workflow-and-puppet-environments/)上有详细讨论。

我们的工作流程是让我们每个人都在本地主分支上开发，当我们准备好测试时，我们提交，然后推送，发布后挂钩更新开发环境。然后，我们可以使用`puppetd --test --environment development`. 如果一切都按预期工作，那么我们中的任何一个都可以将开发分支合并到生产中并推送它再次更新生产环境。

**问题**

1.  这是使用 Git 和 Puppet 的最佳工作流程吗？
2.  我们如何实际测试开发环境。我们有可以使用的备用服务器，但是我们是否使用与节点声明中指定的生产服务器相同的主机名来配置它们？如果我们这样做，那么来自 Hiera 的某些节点特定数据（例如 IP 地址）将是错误的。还是我们使用--environment development 开关在生产服务器上进行测试并使用--noop？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T10:17:40.917

我假设你配置了一个 jenkins 服务器来轮询你的 git 存储库

我理想的工作流程如下所示：

*   本地
    *   创建功能分支 feature/add-nfs-mount
    *   添加对模块/hiera/puppet labs 的修改
    *   添加与修改相关的 rspec 测试（理想情况下使用您的生产层次数据并验证配置/文件实际上包含预期值）
    *   运行 rspec-puppet
    *   通过 vagrant provisioning 进行测试
    *   推送功能分支
*   詹金斯
    *   ci 检测到推送，启动[我的测试](http://mestachs.wordpress.com/2013/06/27/how-do-you-puppet/)，[lint](http://mestachs.wordpress.com/2013/06/05/the-puppet-lint-fix-effect/)，......
    *   要求您的同事通过拉取请求审查您的更改
*   一旦合并 ci 开始构建[管道](https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin)
    *   再次启动测试
    *   升级到登台（在开发中合并功能分支）
    *   让傀儡提供分期
    *   手动/自动检查暂存平台的所需状态
    *   我们有一个手动步骤来推广到生产（合并开发在主）

希望这有帮助

斯蒂芬

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:41:02.693

您可能想要做的一件事是使用暂存 VM。在推送更改之前，如果一切正常，请在 VM 上测试它们，然后推送更改。

将 VCS 用于 puppet 与使用代码有点不同。有时你的推送“可能会破坏构建”，可以这么说。因此，请使用 Git 标签来描述一切正常的提交，这将帮助您确保不会恢复到“坏”提交之一。

# ios - iOS UIAlertView 中未使用的表达式结果

> ID：12075444
> 
> 赞同：1
> 
> 时间：2012-08-22T14:32:39.073
> 
> 标签：ios, string, uialertview

我仍然是 iOS 的新手，我有点难以创建结合常规文本和变量的警报视图。我在 initWithTitle 行上收到“未使用的表达式结果”警告，我不知道如何解决它。

```
name = @"foo";

//now create the alert
UIAlertView *myAlert = [[UIAlertView alloc]
                        initWithTitle: (@"Hello %@", name)
                        message: @"You're looking mighty fine today"
                        delegate: nil
                        cancelButtonTitle: @"I'm awesome"
                        otherButtonTitles: nil];

//show the alert
[myAlert show]; 
```

现在，有了警告，一切都编译了，但我的警报标题只是“foo”而不是“hello foo”。

如果我删除括号，我会在下一行收到语法错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:39:03.493

创建标题如下：

```
UIAlertView *myAlert = [[UIAlertView alloc]
                    initWithTitle: [NSString stringWithFormat:@"Hello %@",name]
                    message: @"You're looking mighty fine today"
                    delegate: nil
                    cancelButtonTitle: @"I'm awesome"
                    otherButtonTitles: nil]; 
```

# mysql - mysql中键'PRIMARY'的重复条目

> ID：12075445
> 
> 赞同：8
> 
> 时间：2012-08-22T14:32:41.807
> 
> 标签：mysql, primary-key, duplicates

我有一个名为的表`tbl_jobs`，它存储应用程序中运行的一些后台作业的元数据。架构是这样的：

```
CREATE TABLE `tbl_jobs` (
  `type` varchar(30) NOT NULL DEFAULT '',
  `last_run_on` datetime NOT NULL,
  `records_updated` text,
  PRIMARY KEY (`type`,`last_run_on`),
  UNIQUE KEY `index2` (`type`,`last_run_on`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$ 
```

每当作业运行时，它都会在表中创建一个条目，`type`其中 是不同作业的唯一标识符，`run time`并且`records updated`在该运行中。

有两个不同的作业同时运行，类型为 :`MAILER_UNLOCKED_REWARDS` 和`MAILER_ALMOST_UNLOCKED`.

当这些作业尝试插入具有相同时间戳的条目时，只有其中一个会被插入，而另一个会**因键**错误而引发重复条目。

例如，这两个作业运行以下内容：

```
INSERT INTO tbl_jobs
            (type,
             last_run_on,
             records_updated)
VALUES     ('MAILER_ALMOST_UNLOCKED',
            '2012-08-22 19:10:00',
            'f8a35230fb214989ac75bf11c085aa28:b591426df4f340ecbce5a63c2a5a0174') 
```

成功运行，但是当第二个作业运行插入命令时

```
INSERT INTO tbl_jobs
            (type,
             last_run_on,
             records_updated)
VALUES     ('MAILER_UNLOCKED_REWARDS',
            '2012-08-22 19:10:00',
            '8a003e8934c07f040134c30959c40009:59bcc21b33a0466e8e5dc50443beb945') 
```

它抛出了错误

```
Duplicate entry 'M-2012-08-22 19:10:00' for key 'PRIMARY' 
```

主键是`type`和`last_run_on`列的组合。

如果我删除第一个作业的条目，则插入成功，即它要求`timestamp`单独是唯一的。

但是，相同的冲突`timestamp`仅发生在这两个作业之间。还有其他作业插入相同`timestamp`。

关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:41:06.580

您是否在索引中使用整个“类型”字段？还是只有第一个字符？因为 MySQL 抱怨的关键是

```
M-2012-08-22 19:10:00 
```

而不是 MAILER_...

尝试运行：

```
 SHOW INDEXES FROM tbl_jobs; 
```

它应该给出如下内容：

```
+----------+------------+----------+--------------+-------------+-----------+-------------+    ----------+--------+------+------------+---------+---------------+
| Table    | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| tbl_jobs |          0 | PRIMARY  |            1 | type        | A         |           0 |     NULL | NULL   |      | BTREE      |         |               |
| tbl_jobs |          0 | PRIMARY  |            2 | last_run_on | A         |           0 |     NULL | NULL   |      | BTREE      |         |               | 
```

...

我怀疑它会在 PRIMARY 索引的 Sub_part 列中显示“1”：

```
+----------+------------+----------+--------------+-------------+-----------+-------------+    ----------+--------+------+------------+---------+---------------+
| Table    | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| tbl_jobs |          0 | PRIMARY  |            1 | type        | A         |           0 |        1 | NULL   |      | BTREE      |         |               |
| tbl_jobs |          0 | PRIMARY  |            2 | last_run_on | A         |           0 |     NULL | NULL   |      | BTREE      |         |               | 
```

...

顺便说一句，主键始终是唯一的，因此`index2`您声明的第二个索引是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T01:16:34.593

第一件事：你必须确保你的 PRIMARY KEY 被设置为 AUTO_INCREMENT。第二件事：您只需启用自动增量： **ALTER TABLE [表名] AUTO_INCREMENT = 1** 第三件事：当您执行插入命令时，您必须跳过此键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T17:55:14.460

如果我有系统关闭或网络问题，我会看到此错误。您的数据库中确实没有重复项。那是一个 MySQL 数据库错误。您需要做的就是：如果您进行了插入，但不是`true`，只需更改要插入的表格的一列 from `varchar`to`text`或`bigint`然后重做插入。这样就解决了问题。

```
If(!$insert)
{    
$alter=Mysql_query("alter table     

`table_name` change `table_name` 

`table_name` bigint(255) not null");    

If($alter){

//you then redo your insertion.     

} 

} 
```

# c# - 为什么 WatiN 冻结应用程序

> ID：12075448
> 
> 赞同：2
> 
> 时间：2012-08-22T14:32:46.650
> 
> 标签：c#, watin

我一直在做一个项目，并注意到 watin 库冻结了应用程序。这是代码：

```
using(var browser = new IE(url))
{
     if(!string.IsNullOrEmpty(user) && !string.IsNullOrEmpty(password))
     {
          browser.Link(Find.ById("overridelink")).Click();
     }
} 
```

如果找到 ID“overidelink”属性，上面的代码可以正常工作。如果它没有找到整个应用程序冻结。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:35:49.620

首先检查它是否存在，然后执行点击

```
if (Browser.Link(Find.ById("overridelink")).Exists)
{
    Browser.Link(Find.ById("overridelink")).Click();
} 
```

# jquery - 在 spans/divs 中定期更改两个文本

> ID：12075449
> 
> 赞同：0
> 
> 时间：2012-08-22T14:32:49.773
> 
> 标签：jquery, html, delay, fadein

好的，我在阅读和测试（就像一个魅力）这个问题时没有任何问题[changed-text-periodically-in-a-span-from-an-array-with-jquery](https://stackoverflow.com/questions/2771789/changing-text-periodically-in-a-span-from-an-array-with-jquery)。问题是当我想更改两个 div 时，而不仅仅是一个。它跳的不是 0,1,2,3,4,5，而是 0,2,4，我不清楚为什么。这是一个[jsFiddle代码](http://jsfiddle.net/Dv2KV/1/)

如果我将`ct== terms.length -1 ? 0 : ct+ 1`其作为第二次验证删除，则无济于事。

那么如何让它运行0,1,2,3,4,5呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:38:54.273

你打电话`rotateTerm`两次（每次淡出一次）：http: [//jsfiddle.net/Dv2KV/4/](http://jsfiddle.net/Dv2KV/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:39:47.183

您运行了两次 rotateTerm - 每个动画完成一次。我修复了这个问题，还删除了在标题内容上设置术语数据变量的位，因为它不需要......

[http://jsfiddle.net/Dv2KV/2/](http://jsfiddle.net/Dv2KV/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:39:56.427

你`rotateTerm`每次都打两次电话。您需要使用单独的函数或只调用`rotateTerm`一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T14:40:06.327

仅仅因为您的函数“rotateTerm”被调用了两次（淡出回调）！

[http://jsfiddle.net/Dv2KV/6/](http://jsfiddle.net/Dv2KV/6/)

# c# - 单例,临界区

> ID：12075451
> 
> 赞同：3
> 
> 时间：2012-08-22T14:33:00.020
> 
> 标签：c#, java, design-patterns

在单例设计模式的情况下应该更喜欢什么。

```
1)make whole getInstance() method synchronized 
OR
2)make only critical section synchronized. 
```

一个人的方法应该是什么，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:40:44.317

首先，尝试考虑是否*需要*惰性实例化。如果没有，则不涉及同步，因为您`INSTANCE`将在类加载时初始化。

如果您确实需要延迟初始化您的实例，请*不要*进行`getInstance`同步，因为这会导致您的所有线程在实例初始化后无缘无故地等待对方。

如果您将在内部使用同步块，则需要仔细检查 null（在同步块的外部和内部）以确保最终只有一个实例；此外，您需要您的实例为`volatile`.

最佳实践方法是拥有一个私有嵌套类`SingletonHolder`，在加载时初始化单例实例（但仅在`getInstance()`调用容器类时加载）。

但是，如果您不需要惰性实例化，最佳实践是使用带有一个常量的枚举。

* * *

长话短说，我想你会在这里找到这一切：[http ://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T14:38:02.713

鉴于[单例](http://en.wikipedia.org/wiki/Singleton_pattern)通常被认为是一种反模式，我会质疑你为什么想要它。

> 这种模式使单元测试变得更加困难，[6] 因为它将全局状态引入了应用程序。还应该注意的是，这种模式降低了程序中并行性的可能性，因为在多线程上下文中对单例的访问必须是串行的，例如，通过锁定。依赖注入的拥护者会认为这是一种反模式，主要是因为它使用了私有和静态方法

如果可能的话，我会尝试使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)来解决上述问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T14:50:18.107

我更喜欢使用 an ，`enum`因为它更简单，并且仍然是线程安全和延迟加载的。

```
enum Singleton {
    INSTANCE;
} 
```

我不会让它变得比它需要的更复杂。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T14:39:38.937

读`Item 3`自`Effective java` `enforce singleton with property with private constructed or an enum type`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T14:39:43.043

最好的解决方案是根本不使用单例。如果您需要在多线程环境中使用单例，请使整体`getInstance`同步或立即使用静态字段初始化（对于单元测试来说更糟）。

阅读[http://www.ibm.com/developerworks/java/library/j-dcl/index.html](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)

# ios - 在 App Store 中交换现有应用程序需要哪些步骤？

> ID：12075455
> 
> 赞同：1
> 
> 时间：2012-08-22T14:33:05.940
> 
> 标签：ios, xcode, app-store

这个问题毫无意义……所以让我试着解释一下。

我在 App Store 上已经有两个应用程序。让我们称它们为 Pro 和 Free。简而言之，我想复制 Pro，稍微更改副本（删除一些功能），然后通过上传副本来更新 Free。

（如果有人好奇，我想这样处理，因为我对 Pro 做了很多更改，我也需要对 Free 进行所有这些更改。但是复制 Pro 会更快，去掉 Pro 功能，并且将此副本重命名为免费。）

我的问题：除了更改副本的 Bundle Identifier 以匹配 Free 的 ID 之外，是否需要进行任何其他更改才能使其正常工作？

感谢您的考虑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:53:26.847

您只需要更改捆绑标识符和目标的产品名称。对于未来，如果您拥有同一个应用程序的免费版和专业版，并且它们共享大部分代码，您应该考虑只使用一个项目，并创建两个目标。通过这种方式，您可以在项目中决定将哪些资源绑定到目标 Pro 和目标 Free，仅此而已。在部署时，您只需选择正确的目标。检查[此链接](http://blog.just2us.com/2009/07/tutorial-creating-multiple-targets-for-xcode-iphone-projects/)

# django - 派生模型文件字段不可用

> ID：12075457
> 
> 赞同：0
> 
> 时间：2012-08-22T14:33:08.903
> 
> 标签：django, django-models, django-inheritance

我有一个基础模型和从中派生的模型。基本模型不是抽象的，所以它也有与之关联的表。

问题：我先创建一个基本实例，然后再创建一个派生实例。并将派生实例与基础相关联。但是我进入`FileField`派生类`None`，即使它在父类中保存和可用。为什么这样？我错过了什么吗？

一些示例代码：

```
def get_filepath(instance):
     return u''+instance.name

def BaseModel(models.Model):
     name = models.CharField(max_length=50)
     filepath = models.FileField(upload_to=get_filepath,
            max_length=255, null=True)
     #some other fields

def DerivedModel(BaseModel):
     type = models.CharField(max_length=50, null=True, blank=True) 
```

django shell 上的示例：

```
>>> obj = BaseModel.objects.create(name='y')
>>> obj.id
56
>>> obj.save()
>>> obj.id
56
>>> nf=ContentFile("this is dummy text")
>>> obj.filepath.save('dummyfile', nf)
>>> dobj=DerivedModel()
>>> dobj.basemodel_ptr=obj
>>> dobj.save()
>>> dobj.id
56
>>> dobj.filepath
<FieldFile: None>
>>> obj.filepath
<FieldFile: y> 
```

更新：@dgel 的回答：

*   `save_base()`它会保存派生对象吗？`dobj`之后没有得到 id。
*   之后`dobj.save()`，似乎基类中的属性被派生类中的属性覆盖。
*   我用 default添加`ctime`了创建时间。所以一旦我保存派生对象，就会更新以节省派生对象的时间。`BaseModel``datetime.datetime.utcnow``ctime`
*   当我通过*sqlitebrowser*查看数据库时，`filepath`该行的字段`BaseModel`为空。

* * *

```
>>> dobj.save_base(raw=True)
>>> dobj.id
>>> dobj.save()
>>> dobj.filepath
<FieldFile: None>
>>> obj.ctime
datetime.datetime(2012, 8, 23, 8, 50, 3, 171573)
>>> dobj.ctime
datetime.datetime(2012, 8, 23, 8, 51, 9, 946434)
>>> newdobj = DerivedModel.objects.get(id=dobj.id)
>>> newdobj.ctime
datetime.datetime(2012, 8, 23, 8, 51, 9, 946434) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:36:50.413

尝试这个：

```
dobj = DerivedModel()
dobj.basemodel_ptr=obj
dobj.save_base(raw=True) 
```

# mysql - MySQL中的用户直观排名

> ID：12075459
> 
> 赞同：1
> 
> 时间：2012-08-22T14:33:17.400
> 
> 标签：mysql, rank

到目前为止，网络上还没有答案，我指望你的专业知识来应对这个挑战：

考虑到用户键入的关键字的顺序，我需要对我的搜索结果（在产品标题上）进行排名。

例如：用户在搜索栏输入：数码相机佳能123

期望的排名应该是：

1.  数码相机佳能123
2.  数码相机佳能 123 ABC
3.  数码相机佳能123A
4.  数码相机canonying
5.  数码相机索尼
6.  数码摄像机
7.  相机佳能123A
8.  相机佳能
9.  123
10.  摄影师 1234
11.  炮制

你知道 MYSQL 查询是如何做到这一点的吗？

过滤停用词是一个很好的功能......

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:46:17.413

你试过全文索引吗？

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:59:10.997

尽管您可能可以通过一些 hack 使用 MySQL 来做到这一点，但我强烈建议您不要这样做。

如果您想通过大量调整选项获得良好且快速的搜索结果，我强烈建议您使用[Solr](http://lucene.apache.org/solr/)或[Sphinx](http://sphinxsearch.com/)

* * *

话虽如此，以下是您问题的真正答案：

搜索特定的词序：[MySQL Fulltext with specific word order](https://stackoverflow.com/questions/6288753/mysql-fulltext-with-particular-word-order)

过滤停用词相当容易：[http ://dev.mysql.com/doc/refman/5.5/en/fulltext-stopwords.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-stopwords.html)

# .net - Visual Studio 2012 InstallShield LE .NET Framework 4.5 先决条件

> ID：12075460
> 
> 赞同：12
> 
> 时间：2012-08-22T14:33:21.927
> 
> 标签：.net, installshield, visual-studio-2012, .net-4.5, prerequisites

我们有一个使用面向 .NET Framework 4.0 的 Visual Studio 2010 构建的应用程序。我们正在升级应用程序以使用 .NET Framework 4.5 并使用 Visual Studio 2012 编写。Microsoft 不再提供自己的安装项目类型，因此我们被迫使用此 InstallShield LE。但是，InstallShield 的先决条件部分似乎有一个明显的遗漏。没有声明必须安装 .NET Framework 4.5 的选项，只有 .NET Framework 4.0 选项。我花了几天时间试图定位信息来解决这个问题，但没有解决。Flexera Software 似乎也几乎无法接近，因为我似乎无法从该公司找到任何人来提供帮助。这并没有让我对他们的产品充满信心。如何获得 .NET Framework 4.5 作为先决条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T08:13:59.043

您可以尝试[Advanced Installer](http://www.advancedinstaller.com/)。它完全支持 .NET Framework 4.5 和 Windows 8。

您还可以尝试搜索支持 .NET Framework 4.5 或至少允许您创建自己的自定义先决条件的不同设置创作工具。这是一个可以帮助您入门的列表：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:49:46.177

Visual Studio 的 InstallShield Limited Edition 尚未针对 Visual Studio 2012 和 .NET 4.5 的版本进行更新。待定更新将包括您提到的随 Visual Studio 2012 提供的新可再发行组件的新先决条件。

InstallShield 的 Professional 和 Premier 版还带有一个先决条件编辑器，允许为新的可再发行组件创建先决条件，而无需等待，例如 Flexera Software 发布它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-24T21:57:42.400

您可以从以下网址直接从 flexera 下载 PRQ：

[http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.5%20Web.prq](http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.5%20Web.prq) [http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.5 .1%20Web.prq](http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.5.1%20Web.prq) [http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.5.2%20Web.prq](http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.5.2%20Web.prq) [http://saturn.installshield.com/is/prerequisites/Microsoft %20.NET%20Framework%204.6%20Web.prq](http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.6%20Web.prq) [http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.6.1%20Web.prq](http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.6.1%20Web.prq) [http://saturn.installshield.com /is/prerequisites/Microsoft%20.NET%20Framework%204.7%20Web.prq](http://saturn.installshield.com/is/prerequisites/Microsoft%20.NET%20Framework%204.7%20Web.prq)

奇怪的是，它们并非全部可用。例如，缺少 4.6.2。上面的某些链接也可以将“Web”替换为“Full”。

查尔斯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T18:31:56.007

当我试图找出最适合我的选择时（Wix vs. Installshield LE），我遇到了这个问题，我使用 VS 2012 Ultimate，我看到了 4.5 选项....

![在此处输入图像描述](../Images/9944c7d430c2b3a79065a1b373094592.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-24T11:39:53.700

您可以按照以下步骤操作： 1>为.net框架创建一个先决条件文件，内容如下：

```
<?xml version="1.0" encoding="utf-8"?>
<SetupPrereq>
  <conditions>
    <condition Type="2" Comparison="2" Path="HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" FileName="Release" ReturnValue="378389"></condition>
  </conditions>
  <operatingsystemconditions>
    <operatingsystemcondition MajorVersion="6" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="1" ProductType="2|3"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="1" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="4" ProductType="2|3"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="1" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="2" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="2" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="3" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="3" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="10" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="10" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
  </operatingsystemconditions>
  <files>
    <file LocalFile="&lt;ISProductFolder&gt;\SetupPrerequisites\Microsoft .net\4.5\Full\dotnetfx45_full_x86_x64.exe" URL="http://go.microsoft.com/fwlink/?LinkId=255995" CheckSum="D02DC8B69A702A47C083278938C4D2F1" FileSize="0,50352408"></file>
  </files>
  <execute file="dotnetfx45_full_x86_x64.exe" cmdline="/showrmui /passive " cmdlinesilent="/q /norestart" returncodetoreboot="1641,3010" requiresmsiengine="1"></execute>
  <properties Id="{72D7E3D1-C9DF-4FA6-9F9B-4E5117AB2919}" Description="This prerequisite installs the .NET Framework 4.5 full standalone package." AltPrqURL="http://saturn.installshield.com/is/prerequisites/microsoft .net framework 4.5 full.prq"></properties>
  <behavior Reboot="2"></behavior>
</SetupPrereq> 
```

将该文件命名为 Microsoft .NET Framework 4.5 Full.prq 并将其复制到 [Installshield 安装文件夹\SetupPrerequisites] 中，然后您可以在项目助手的安装要求部分中看到此先决条件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-24T11:50:28.370

您可以按照以下步骤操作： 1>为.net框架创建一个先决条件文件，内容如下：将该文件命名为Microsoft .NET Framework 4.5 Full.prq并将其复制到[Installshield安装文件夹\SetupPrerequisites]中，然后当您在 Visual Studio 中打开 Installshield2013 项目并从可再发行列表中选择并安装它时，您可以在应用程序和数据部分的可再发行部分中看到此先决条件。

内容如下：

```
<?xml version="1.0" encoding="utf-8"?>
<SetupPrereq>
  <conditions>
    <condition Type="2" Comparison="2" Path="HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" FileName="Release" ReturnValue="378389"></condition>
  </conditions>
  <operatingsystemconditions>
    <operatingsystemcondition MajorVersion="6" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="1" ProductType="2|3"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="1" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="4" ProductType="2|3"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="1" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="2" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="2" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="3" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="6" MinorVersion="3" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="10" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="1"></operatingsystemcondition>
    <operatingsystemcondition MajorVersion="10" MinorVersion="0" PlatformId="2" CSDVersion="" Bits="4"></operatingsystemcondition>
  </operatingsystemconditions>
  <files>
    <file LocalFile="&lt;ISProductFolder&gt;\SetupPrerequisites\Microsoft .net\4.5\Full\dotnetfx45_full_x86_x64.exe" URL="http://go.microsoft.com/fwlink/?LinkId=255995" CheckSum="D02DC8B69A702A47C083278938C4D2F1" FileSize="0,50352408"></file>
  </files>
  <execute file="dotnetfx45_full_x86_x64.exe" cmdline="/showrmui /passive " cmdlinesilent="/q /norestart" returncodetoreboot="1641,3010" requiresmsiengine="1"></execute>
  <properties Id="{72D7E3D1-C9DF-4FA6-9F9B-4E5117AB2919}" Description="This prerequisite installs the .NET Framework 4.5 full standalone package." AltPrqURL="http://saturn.installshield.com/is/prerequisites/microsoft .net framework 4.5 full.prq"></properties>
  <behavior Reboot="2"></behavior>
</SetupPrereq> 
```

# java - 通过java创建带有超链接的pdf文件

> ID：12075462
> 
> 赞同：0
> 
> 时间：2012-08-22T14:33:29.257
> 
> 标签：java, pdf, itext

我正在尝试使用 Java 创建 PDF 文件。我所看到的是我必须拥有 iText 库，所以我去了，我得到了它。

这是我写的一段代码，但它充满了错误......这里出了点问题。

```
//com.lowagie.text.pdf.PdfWriter

public class document  {
    Document document = new Document (PageSize.A4, 50, 50, 50, 50);

    PdfWriter writer = PdfWriter.getInstance(document, \
    new FileOutputStream("C:\ITextTest.pdf"));
    document.open(); 

    document.add(new Paragraph("First page of the document."));
    //document.add(new Paragraph("Some more text on the \ first page with different color and font type.", 
    //FontFactory.getFont(FontFactory.COURIER, 14, Font.BOLD, new Color(255, 150, 200))));

    document.close(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:38:49.820

我不知道其余的，但这肯定是一个错误。请纠正这个：

```
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("C:\\ITextTest.pdf")); 
```

1.  那里有一个不必要`\`的东西。

2.  您需要`\`在文件路径中转义。所以添加一个额外的`\`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:23:34.423

尝试这个：

```
import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;
import java.io.FileOutputStream;
import java.io.File;
import java.io.FileNotFoundException;

public class MyPDF {
    public static void main(String[] args) {

        Document document = new Document(PageSize.A4, 50, 50, 50, 50);
        try {

            PdfWriter.getInstance(document, new FileOutputStream(new File(
                    "Test.pdf")));
            document.open();
            String content = "pdf data...";
            Paragraph paragraph = new Paragraph(content);
            document.add(paragraph);

        } catch (DocumentException e) {
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } finally {
            document.close();
        }
    }
} 
```

# jquery - Jquery在两个元素之间拖放

> ID：12075472
> 
> 赞同：1
> 
> 时间：2012-08-22T14:34:03.897
> 
> 标签：jquery, jquery-ui

我需要制作一个在屏幕中间按特定顺序有 5 个图像的应用程序，然后我希望能够将图像从这个图像列表中拖出屏幕一侧的某个地方。然后可以将元素拖回列表中，但要将其自身移回其原始位置，因为列表必须以正确的顺序排列，例如 1.2.3.4.5 并且将 3 和 4 拖出会使图像列表为 1.2.5。这可以在jquery中做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:47:38.383

最好的选择是使用 jQuery UI 及其可排序功能。它允许您在 html 列表之间拖放。

[http://jqueryui.com/demos/sortable/#connect-lists](http://jqueryui.com/demos/sortable/#connect-lists)

```
$(function() {
    $( "#sortable1, #sortable2" ).sortable({
        connectWith: ".connectedSortable"
    }).disableSelection();
}); 
```

在上面的示例中，您需要列出 ID 为 #sortable1、#sortable2 的列表。connectWith 允许您定义这些列表将连接到哪个元素。通过将 .connectedSortable 应用于#sortable1、#sortable2，您将能够在它们之间进行拖放。

# sql - perl 在需要 0 时使用 2 个绑定变量调用

> ID：12075473
> 
> 赞同：0
> 
> 时间：2012-08-22T14:34:06.533
> 
> 标签：sql, perl, dbi

我有这个代码：

```
 my (@matches, @vars);  

    if ($date_to) {
            push(@matches, q{ m.mentioned_at <= ? });
            push(@vars, $date_to);
        }

        if ($person) {
            push(@matches, q{ t.name like ? });
            push(@vars, $person);
        }
    if ($show) {
            push(@matches, q{ t.name like ? });
            push(@vars, $show);
        }  
    if (@vars){
        my $where = join (' and ', @matches);
        $where = qq{where $where} if @matches  
        $res = $db->do({ page => $.p, per_page => $.s }, q{
                      select m.id, m.body, m.link,
                      count(distinct(m.id)) as num_items
                      from mentions m
                      $where 
                      group by m.id, m.body, m.link,
                      order by m.created_at desc
               }, @vars );
     }   

     print STDERR Dumper ($where);    
     $VAR1 = 'where  m.mentioned_at <= ?  and  t.name like ? ';`  
     print STDERR Dumper (@vars);   
     $VAR1 = '2012/06/01';  
     $VAR2 = 'Adby Phil';` 
```

为什么我有这个错误：

```
called with 2 bind variables when 0 are needed  
Can't use an undefined value as an ARRAY reference 
```

似乎它没有看到 $where 子句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:38:35.630

我认为您已经`do()`切换了参数的顺序：

```
$rv  = $dbh->do($statement, \%attr, @bind_values); 
```

看起来你首先有 \%attr，然后是 $statement。

另外，请注意它`do()`不会返回语句句柄，因此您无法获取数据。您可能需要更传统的准备和执行序列。

# c# - 来自 C# 的 Oracle 连接不读取数据

> ID：12075475
> 
> 赞同：1
> 
> 时间：2012-08-22T14:34:11.657
> 
> 标签：c#, asp.net, oracle

所以下面的代码不会进入循环来填充我的列表框。我的列表框显示“全选”并测试输出“进入循环”。什么会导致尝试不失败但循环也不执行？

```
conn.Open();
OracleCommand executeQuery = new OracleCommand(sql, conn);
executeQuery.CommandType = CommandType.Text;

OracleDataReader dr = executeQuery.ExecuteReader();

lstInstructors.Items.Clear();
lstInstructors.Items.Add(new ListItem("Select All", "%"));

string test = "entering loop";

while (dr.Read())
{
    test = "start reading items";
    lstInstructors.Items.Add(new ListItem(dr.GetValue(0).ToString()));
    test += dr.GetValue(0).ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:53:24.290

“sql”的值在哪里设置？

完成填充列表框的另一种方法是填充数据表，然后将其绑定到列表框。

```
OracleDataAdapter da = new OracleDataAdapter();
DataTable dt = new DataTable();
var sql = "some sql string";
OracleCommand executeQuery = new OracleCommand(sql, conn);
using (da = new OracleDataAdapter(executeQuery))
{
    da.Fill(dt);
}
lstInstructors.DataSource = dt;
lstInstructors.DataTextField = "Field Name from sql";
lstInstructors.DataValueField = "Field Value from sql";
lstInstructors.DataBind();
lstInstructors.Items.Insert(0, new ListItem("Choose", "Choose"));
lstInstructors.SelectedValue = "Choose"; 
```

一定要包括使用 System.Data

我已经从 SqlDataAdapter 改编了这个，所以可能存在一些语法差异。

# jquery - XML Jquery 本地文件夹

> ID：12075478
> 
> 赞同：0
> 
> 时间：2012-08-22T14:34:31.773
> 
> 标签：jquery, xml

我正在尝试首先在本地显示图像进行测试，然后将 html 上传到服务器，当前代码在 Chrome 上没有显示任何数据，在 FF 和 IE 中它显示得很好，但我的问题是，脚本是不显示“imagens”文件夹内的 imagemNode，它只显示位置。我试图为该位置创建一个 var，但仍然无法正常工作。这是我的脚本

```
 <script type="text/javascript">         
    $(document).ready(function()
    {       
        $.get('topico765.xml', function(d)
        {
            $('body').append('<h1>XML com jQuery<img src="imagens/13451.jpg"/></h1>');
            $('body').append('<dl/>');

            $(d).find('tela').each(function()
            {
                var $slide = $(this); 
                <!--var topicoNode = $slide.attr("nome");
                var textoNode = $slide.children("texto").text();
                <!--var location = "imagens/";
                var imagemNode = $slide.children("imagem")
                var html = '<dt><img class="imagem" alt="'+$(imagemNode).text()+'" src="imagens/"'+imagemNode+'"/></dt>';
                html += '<dd> <span class="loadingPic" alt="Carregando" />';
                html += '<p>Posicao Intervencao Y: '+intervencaoY+'</p>';
                html += '<p>'+textoNode+'</p>';
                html += '</dd>';
                $('dl').append($(html));
                $('.loadingPic').slideUp(2000);
            });
        });
    });
    </script> 
```

我的 XML 是发送给我们的第三方公司，因此我们无法更改任何内容，否则我只需将路径“imagens”放在标签的开头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:39:06.050

小错误修复：

```
var html = '<dt><img class="imagem" alt="" src="'+location+''+(imagemNode)+'"/></dt>'; 
```

# objective-c - 使用 Core Data 时提高 UI 性能

> ID：12075480
> 
> 赞同：2
> 
> 时间：2012-08-22T14:34:37.000
> 
> 标签：objective-c, ios, cocoa-touch, design-patterns, core-data

我一直在我的项目中使用 Core Data，我一直依靠它的数据故障系统来返回缓存的数据，但是我遇到了一些性能问题，尤其是在基于此配置其视图的 UITableView 中显示数据时获取的数据。

它基本上通过它们的唯一 ID 获取一些 NSManagedObject 实例，并总结存储在 NSNumber 中的值。它在 for 循环中对大约 40 个不同的对象执行此操作，并且每次重新加载 UITableView 时都会执行此操作。

是否有任何建议的方法来监听核心数据 NSManagedObjects 中的更改或在我的级别缓存数据的方法，或者我应该依赖数据故障而只是我做错了什么？

如果您能给我指出一个处理这种情况的好模式，我将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:58:33.483

NSFetchedResultsController 提供了一个很好的机制来处理错误并为 UITableView 提供一个干净的接口。使用 Instruments 和 Time Profiler 可以很好地了解性能问题的具体位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:54:37.410

您可以直接使用 Core Data 检索属性的总和。阅读标题为[获取特定值](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW1)的部分。

这应该是您需要的唯一提示：

```
NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"Count"];
NSExpression *sumOfCountExpression = [NSExpression expressionForFunction:@"sum:"
                                          arguments:[NSArray arrayWithObject:keyPathExpression]]; 
```

这不应该太慢而导致问题，除非您重新加载表太多次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:00:48.913

您需要做的第一件事是使用 NSFetchedResultsController。它可以与 UITableview 一起使用，并且非常适合您在此处尝试完成的工作。第二件事，将 fetchBatchSize 分配给您的 fetch 请求。您不需要将所有记录保存在内存中。

# php - 内存类或变量中的 PHP

> ID：12075486
> 
> 赞同：0
> 
> 时间：2012-08-22T14:35:02.053
> 
> 标签：php

嗨，无论如何要将变量存储到内存中，直到服务器重新启动或使用 PHP 手动重新创建相同的变量。

实际上问题是我需要在我的应用程序中有一个路由器，它有几个配置来路由不同 API 上的 URL。我不想在每次请求登陆时加载我的配置，所以我正在寻找一种方法将配置数据保存到内存中，直到我手动重新创建相同的数据。

请建议是否有办法这样做。

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:42:47.213

PHP 将所有变量存储在内存中，直到进程退出（如果变量是全局变量）或直到作用域结束（如果变量是局部变量）。

我认为您感到困惑的地方是 Apache（或您正在使用的任何网络服务器）连续运行，但它只为每个请求启动 PHP，因此 PHP 永远不会连续运行。

要跨不同请求存储内容，您需要使用外部持久性。您可以使用 PHP 会话、数据库、平面文件等来执行此操作，但这些都不会将数据存储在内存中。

即使它是外部的，你也可以使用像[memcached](http://memcached.org/)这样的缓存服务器将数据连续存储在内存中，然后使用 PHP 通过[`Memcached`](http://php.net/manual/en/book.memcached.php)类访问它。

# grails - 如何解决 Grails 2.x 依赖冲突

> ID：12075494
> 
> 赞同：0
> 
> 时间：2012-08-22T14:35:12.290
> 
> 标签：grails, grails-2.0

今天我清理了一个**Grails 2.1**项目的 .grails 目录，经过将近 3 周的工作，没有任何问题。我得到的错误是

```
| Error Fatal error during compilation java.lang.NoSuchMethodError: org.apache.log4j.Logger.isTraceEnabled()Z 
```

我也在圣杯战争中得到：

```
 SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/asm/asm-parent/3.0/asm-parent-3.0.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/asm/asm/3.0/asm-3.0-javadoc.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/asm/asm-tree/3.0/asm-tree-3.0-sources.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/asm/asm-tree/3.0/asm-tree-3.0-src.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/asm/asm-tree/3.0/asm-tree-3.0-javadoc.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/log4j/log4j/1.2.9/log4j-1.2.9-javadoc.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/org/apache/ant/ant-parent/1.7.0/ant-parent-1.7.0.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/org/apache/ant/ant/1.7.0/ant-1.7.0-javadoc.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/org/apache/ant/ant-launcher/1.7.0/ant-launcher-1.7.0-sources.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/org/apache/ant/ant-launcher/1.7.0/ant-launcher-1.7.0-src.jar

    SERVER ERROR: Bad Gateway url=http://m2repo.spockframework.org/ext/org/apache/ant/ant-launcher/1.7.0/ant-launcher-1.7.0-javadoc.jar 
```

依赖关系报告显示冲突

选定的模块被驱逐

antlr 由 antlr 2.7.7 2.7.6

[这里](https://docs.google.com/file/d/0B0kgrli87HgRUjBzN1I0RGJTSTg/edit?pli=1)

这是我的 BuildConfig.groovy

```
grails.servlet.version = "2.5" 
grails.project.class.dir = "target/classes"
grails.project.test.class.dir = "target/test-classes"
grails.project.test.reports.dir = "target/test-reports"
grails.project.target.level = 1.6
grails.project.source.level = 1.6

grails.project.dependency.resolution = {
inherits("global") {   }
log "error" 
checksums true

repositories {
    inherits true 
    grailsPlugins()
    grailsHome()
    grailsCentral()
    mavenCentral()
}
dependencies {
    compile 'com.oracle:ojdbc14:10.2.0.2'
}

plugins {
    runtime ":hibernate:$grailsVersion"
    runtime ":jquery:1.7.1"
    runtime ":resources:1.1.6"
    compile (":twitter-bootstrap:2.0.2.25") { excludes 'svn' }
    compile ":audit-logging:0.5.4"
    compile ":quartz:0.4.2"
    compile (":joda-time:1.4")
    compile ":build-test-data:2.0.3"

    compile ":excel-import:1.0.0"

    runtime ":cached-resources:1.0"
    runtime ":cache-headers:1.1.5"
    runtime ":cached-resources:1.0"
    runtime ":zipped-resources:1.0"
    // compile ":cache:1.0.0"

    //provided ":code-coverage:1.2.5"
    //provided ":db-reverse-engineer:0.3"

    //provided ":grails-melody:1.13"
    //provided ":codenarc:0.17"
    //provided ":p6spy:0.5"
    //provided ":app-info:0.4.3"

    build ":tomcat:$grailsVersion"
    test(":spock:0.6") 
}
} 
```

任何建议如何解决这个问题？

# jquery - 只更改一个文本框而不是全部

> ID：12075495
> 
> 赞同：1
> 
> 时间：2012-08-22T14:35:21.330
> 
> 标签：jquery, textbox

输入密码后，我正在尝试用常规文本框替换密码文本框。此代码仅在第一个密码文本框不为空时才有效，但它也会在每个密码文本框上执行代码。

```
if ($('input[type=password]').val() != "") {
                    $('input[type=password]').hide(); 
                    $('input[class=showPswd]').show(); 
                } 
```

我认为这样的事情会起作用，但事实并非如此。

```
if ($('input[type=password]').val() != "") {
                        $(this).find('input[type=password]').hide(); 
                        $(this).find('input[class=showPswd]').show(); 
                    } 
```

如何让代码查看每个密码文本框并在文本框为空时仅替换该文本框？

谢谢

编辑：这是一般布局。还有更多行几乎相同。

```
 <td class="style1">
                    QA :</td>
                <td class="style2">
                <asp:DropDownList ID="DropDownList4" runat="server">                   
                    </asp:DropDownList>
                    </td>

                <td style="vertical-align:middle">
                    <asp:TextBox ID="TextBox4" runat="server" textmode="Password"></asp:TextBox>
                        <asp:TextBox ID="TextBox21" runat="server" style="display:none;" class="showPswd" value="Accepted"></asp:TextBox>

                    <asp:Label ID="Label4" runat="server" Text=""
                    ></asp:Label>
                    </td>                
            </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:38:00.680

利用[**`each()`**](http://api.jquery.com/jQuery.each/)函数，对每个输入密码的文本框进行操作，如下所示

```
 $('input[type=password]').each(
    function ()
    {
    if ($(this).val() != "")  
     { 
              $(this).hide(); 

              //just replace this line as you need not sure what is does 
              //$(this).find('input[class=showPswd]').show();
     } 

  }); 
```

# android - Android：从互联网下载文件时关闭互联网如何处理？

> ID：12075496
> 
> 赞同：1
> 
> 时间：2012-08-22T14:35:27.200
> 
> 标签：android, download, inputstream

Android：我正在使用以下方法从 Internet 下载文件：

```
InputStream in = null;
try {
    in = connection.getInputStream();
} catch (IOException e) {
    e.printStackTrace();
}
byte[] buffer = new byte[1024];
int length = 0;
try {
    while ((length = in.read(buffer)) != -1) {
        try {
            fout.write(buffer, 0, length);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} catch (IOException e) {
    e.printStackTrace();
}
try {
    fout.close();
} catch (IOException e) {
    e.printStackTrace();
}
try {
    in.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

问题是当网络关闭时，read inoutstream 在某些设备上停止读取，但在其他设备上继续读取！如何解决这个问题呢？提前致谢。

**编辑：** 我找到了解决方案，我必须设置连接的超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:51:46.477

建立连接时，将其放入 a`try-catch`以了解建立连接是否失败。`catch`在块中处理您的问题。我不完全知道您是如何建立连接的，因此无法进一步建议。

# kohana - 响应 Cookie 未在 Kohana 中设置

> ID：12075501
> 
> 赞同：1
> 
> 时间：2012-08-22T14:35:40.107
> 
> 标签：kohana, kohana-3, kohana-3.2

我正在尝试从 Kohana 3.2 中外部请求的响应中提取 cookie 的值

```
$response = Request::factory('http://myurl')->execute();
echo $response->cookie('cookie'); 
```

现在在我上面的示例中，来自“http://myurl”的服务器响应正在设置 cookie `cookie`。事实上，如果我这样做，`print_r($response->headers());`我可以看到在 set-cookie 标头中设置的 cookie。

但是，当我只是尝试从中访问 c​​ookie 时，`$response->cookie('cookie');`我什么也得不到。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:16:51.907

我遇到了完全相同的问题-我使用它解决了`$response->headers('Cookie')`

# php - MySQL select * with distinct id

> ID：12075502
> 
> 赞同：32
> 
> 时间：2012-08-22T14:35:43.223
> 
> 标签：php, mysql

我正在尝试选择具有不同 ID 的行，但返回所有字段。

```
SELECT * DISTINCT(ID) FROM table WHERE ... 
```

我最终需要 ID、城市、州和邮编。如何获取不重复 ID 的行并将所有字段返回到我的 mysql_fetch_array 中？

我尝试了以下方法：

```
SELECT * DISTINCT(ID) FROM table WHERE ...

SELECT DISTINCT ID * FROM table WHERE ...

SELECT ID,City,State,Zip DISTINCT ID FROM ...

SELECT ID,City,State,Zip DISTINCT(ID) FROM ... 
```

我在这里阅读其他问题，但似乎没有任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-22T14:37:43.113

尝试使用`GROUP BY`：

```
 select id, city, state, zip
    from mytable
group by id 
```

`id`请注意，如果有重复，这将为每个返回一个任意地址。

演示：[http ://www.sqlfiddle.com/#!2/c0eba/1](http://www.sqlfiddle.com/#!2/c0eba/1)

# objective-c - iOS 上的 Objective-c 是否有任何类似 MVVM 的框架？

> ID：12075504
> 
> 赞同：7
> 
> 时间：2012-08-22T14:35:44.597
> 
> 标签：objective-c, ios, model-view-controller, mvvm

是否有在 iOS（iPhone/iPad）上广泛使用的 Objective-C 的 MVVM 框架？

我是一名刚开始使用 iOS 的 .net 开发人员（阅读教程，完成了几个简单的测试应用程序），从第一个角度来看，iOS 的 MVC 在我看来很像 WinForms（如果我错了，请纠正我）。WinForms 通过 MVVM “进化”为 WPF，使得关注点分离变得更加容易。

有没有类似于 MVVM for iOS 的东西？在 MonoTouch 世界中，我至少看到[mvvmcross](https://github.com/slodge/MvvmCross)应用了 MVVM。Objective-C 呢？或者通常在 iOS 世界中不需要这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:06:45.343

MvvmCross 严重依赖反射，以及公共 c# 属性和事件。我确实看过尝试将框架扩展到 objC 和 uikit 的想法，但实际上它的函数/选择器 API 的结构似乎并不适合 mvvm 的数据绑定部分

# objective-c - 设置为 nil 的界面元素仍然存在于应用程序中

> ID：12075505
> 
> 赞同：0
> 
> 时间：2012-08-22T14:35:46.537
> 
> 标签：objective-c, ios, interface, release, null

在我的游戏中，我使用以下代码以编程方式分配了一些 UIImageViews：

```
blocks[1] = [[UIImageView alloc] initWithFrame: CGRectMake(200, y1, kBlockHeight, kBlockHeight)];
blocks[2] = [[UIImageView alloc] initWithFrame: CGRectMake(320, y2, kBlockHeight, kBlockHeight)];
blocks[3] = [[UIImageView alloc] initWithFrame: CGRectMake(440, y3, kBlockHeight, kBlockHeight)];
blocks[4] = [[UIImageView alloc] initWithFrame: CGRectMake(560, y4, kBlockHeight, kBlockHeight)];

blocks[1].backgroundColor = [UIColor blackColor];
blocks[2].backgroundColor = [UIColor blackColor];
blocks[3].backgroundColor = [UIColor blackColor];
blocks[4].backgroundColor = [UIColor blackColor];

[self.view addSubview: blocks[1]];
[self.view addSubview: blocks[2]];
[self.view addSubview: blocks[3]];
[self.view addSubview: blocks[4]]; 
```

它工作正常，但是当我尝试摆脱对象并重新启动时，

```
for (int i = 1; i<= 4; i++) {
    blocks[i] = nil;
    //ARC won't let me call [blocks[i] release];
    NSLog(@"releasing blocks");
} 
```

他们仍然留在屏幕上。它们不与任何东西交互，但仍保持在屏幕上绘制。为什么会这样，我应该怎么做才能摆脱这些物体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:42:51.190

您的 UIImageViews 仍由您的 viewController 的视图保留。尝试使用：

```
for (int i = 1; i<= 4; i++) {
    [blocks[i] removeFromSuperview];
    blocks[i] = nil;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:43:19.820

试试这个，

```
for (int i = 1; i<= 4; i++) {
    [blocks[i] removeFromSuperview];
    blocks[i] = nil; //removing from parent will not release so then you have to assign nil
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:43:04.833

方法`addSubview:`文档说：

> 要添加的视图。该视图由接收方保留。添加后，此视图显示在任何其他子视图之上。

将指针设为 nil 不会释放视图，直到它从其父视图中删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T14:43:06.363

从以下文档`addSubview`：

```
 This method retains view and sets its next responder to the receiver, which is its new superview. 
```

即，父视图仍然有一个指针。没关系，您将原始指针归零。如果你想摆脱一个视图，使用

```
 [view removeFromSuperview];
  view = nil; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T14:54:24.813

您混淆了两件不同的事情 - 内存分配和视图层次结构的组成。您需要通过向它们发送`removeFromSuperview`消息来从视图层次结构中删除这些视图。如果您的应用程序没有其他部分拥有它们，那么这些对象将被释放，但不要将此释放与视图层次结构的修改混淆，这是非常不同的。

# c# - ADO.Net 实体框架，读取数据时遇到致命错误

> ID：12075506
> 
> 赞同：0
> 
> 时间：2012-08-22T14:35:46.343
> 
> 标签：c#, mysql, entity-framework, mysql-connector

将 MySql 与 Entity 框架一起使用时出现以下错误。我在 EntityConnectionStringBuilder 的连接字符串上将默认连接超时设置为 300000。如何在实体框架中解决这个问题？

```
 Unhandled Exception: System.Data.EntityCommandExecutionException: An    
    error occurred while reading from the store provider's data reader. See the  
    inner exception for details. ---> MySql.Data.MySqlClient.MySqlException: Fatal 
    error encountered during data read. ---> MySql.Data.MySqlClient.MySqlException: 
    Reading from the stream has failed. ---> System.IO.EndOfStreamException: Attempted 
    to read past the end of the stream. 
```

更新：我们如何为 ado.net 实体框架设置 net_read_timeout？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:26:14.670

像这样

```
data.Database.ExecuteSqlCommand("set net_write_timeout=99999; set net_read_timeout=99999"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:43:08.370

内部异常说什么？

未处理的异常：System.Data.EntityCommandExecutionException 不指向超时错误，它可能是简单的 int，需要在您的 EF 查询中使用为空。

你能把查询发给吗？

干杯

# jsrender - 如何在 jsRender 的 {{for}} 部分引用组名？

> ID：12075522
> 
> 赞同：0
> 
> 时间：2012-08-22T14:36:20.767
> 
> 标签：jsrender

```
{{for Person}}
<input type="text" value="{{>Name}}" name="{{>#data}}.Name" id="{{:#data}}.Name" />
{{/for}} 
```

如何输出名称和 ID 为的输入`Person.Name`？

我尝试了几种方法，但到目前为止没有成功。我应该如何获取 for 变量的名称？

谢谢。

- - - - - - - - 更新 - - - - - - - - -

上面的示例代码可能过于简洁。我正在处理的是一个名为 的实体`InjuryZone`，每个区域有近一百个复选框：

```
<input type="checkbox" value="true" name="InjuryZones.UpperLeg" id="InjuryZones_UpperLeg" />
<input type="checkbox" value="true" name="InjuryZones.Knee" id="InjuryZones_Knee" />
... 
```

我在想我应该能够使用一些类似的表达方式`#data`来避免在and中`InjuryZones`到处重复。`name``id`

但我的理解是`#data`显示实际值而不是属性的名称。我们如何重复后面的字符串`{{for`？可能吗？

# java - 如何在 JUNG2 中找到图形的绘制位置？

> ID：12075524
> 
> 赞同：3
> 
> 时间：2012-08-22T14:36:26.170
> 
> 标签：java, graphing, jung

我正在使用 JUNG 库在 Java 中创建图形。我需要将图表拟合到其父框架并设置视图，以便图表显示在视图的中心。

我已经设法使用此处的代码将缩放设置为正确的大小： [如何在 Jung 可视化上手动设置缩放？](https://stackoverflow.com/questions/9761391/how-to-manually-set-the-zoom-on-a-jung-visualisation)但是缩小的图仍然在同一个地方。我还编写了一个函数来使用这里的代码移动图形：[How to programatically pan a VisualizationViewer with Jung (the java library)?](https://stackoverflow.com/questions/5745183/how-to-programatically-pan-a-visualizationviewer-with-jung-the-java-library) .

问题仍然是我如何计算出需要将图形从其当前位置平移到视图中心的程度。如何找到图表的当前位置？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:45:43.037

似乎这样做的方法是使用**ScalingControl**。使用缩放控件很容易确保图形适合其父框架，执行此操作的代码是：

```
ScalingControl visualizationViewerScalingControl
            = new CrossoverScalingControl();

visualizationViewer.scaleToLayout(visualizationViewerScalingControl); 
```

我通过查看同样实现 SatelitteView 的 SatelliteViewDemo 的源代码找到了执行此操作的方法；这允许在全尺寸版本旁边缩小图形视图。

# google-chrome-extension - NPAPI 插件安全问题是否与连接到互联网的可下载应用程序相同

> ID：12075526
> 
> 赞同：0
> 
> 时间：2012-08-22T14:36:31.280
> 
> 标签：google-chrome-extension, firefox-addon, npapi

我想构建一个跨平台帮助应用程序，让我的用户扫描桌面文件系统并查找/上传他们之前上传的原始、高分辨率版本的 JPG 图像。扫描可能会尝试通过文件名、EXIF 数据或通过使用计算机视觉算法比较视觉属性来进行匹配。

我读了以下内容，有点害怕：

> **安全考虑** 在你的扩展中包含一个 NPAPI 插件是危险的，因为插件可以不受限制地访问本地机器。如果您的插件包含漏洞，攻击者可能能够利用该漏洞在用户计算机上安装恶意软件。相反，尽可能避免包含 NPAPI 插件。

我的另一个选择是构建一个在后台运行的下载/安装本机桌面应用程序。但是这种方法也可以通过互联网不受限制地访问本地机器+我的服务器。

这两种方法都需要用户下载/安装本机代码 - 但 NPAPI 插件承诺更容易访问和通用框架。那么安全问题是否相同，或者一种方法通常优于另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:58:53.603

本质上，插件和常规应用程序都具有相同的访问权限 - 因此安装任何一个都需要相当多的信任。然而，攻击面有所不同：虽然应用程序通常只能由用户启动，但每个网站都可以访问插件（限制对选定网站的访问是可能的，但这种保护本身可能会失败）。此外，如果您想将 NPAPI 插件打包到 Chrome 扩展程序中，您必须考虑[Chrome 网上应用店需要在接受此类扩展程序之前进行人工审核](http://developer.chrome.com/extensions/npapi.html)（并且从您自己的站点分发扩展程序对于 Chrome 21 中所做的更改非常没有希望）。但它可能会提供更好的用户体验。总而言之：这不是一个容易做出的选择。

# shell - 将 stderr 和 stdout 复制到文件以及 ksh 中的屏幕

> ID：12075527
> 
> 赞同：4
> 
> 时间：2012-08-22T14:36:33.800
> 
> 标签：shell, ksh, io-redirection

我正在寻找一种解决方案（类似于下面的 bash 代码），除了 Solaris 上的 ksh 中的屏幕之外，还将 stdout 和 stderr 复制到一个文件中。

以下代码在 bash shell 中运行良好：

```
#!/usr/bin/bash

# Clear the logfile
>logfile.txt

# Redirect all script output to a logfile as well as their normal locations
exec >  >(tee -a logfile.txt)
exec 2> >(tee -a logfile.txt >&2)
date
ls -l /non-existent/path 
```

出于某种原因，这会在 Solaris 上引发语法错误。我认为这是因为我无法进行流程替换，并且我已经看到一些建议使用 的帖子`mkfifo`，但我还没有想出一个可行的解决方案。

有谁知道除了默认位置之外可以将所有输出重定向到文件的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:23:49.300

您使用的是哪个版本的 ksh？ksh88`>()`不支持，但 ksh93 支持 - bash 代码应该在 ksh93 上保持不变（除了`#!`行之外）。

如果你被 ksh88 卡住了（可怜的东西！），那么你可以使用命名管道来模拟 bash/ksh93 的行为：

```
#!/bin/ksh 
# Clear the logfile  
>logfile.txt  

pipe1="/tmp/mypipe1.$$"
pipe2="/tmp/mypipe2.$$"
trap 'rm "$pipe1" "$pipe2"' EXIT
mkfifo "$pipe1"
mkfifo "$pipe2"
tee -a logfile.txt < "$pipe1" &
tee -a logfile.txt >&2 < "$pipe2" &

# Redirect all script output to a logfile as well as their normal locations  
exec >"$pipe1"
exec 2>"$pipe2"

date   
ls -l /non-existent/path 
```

上面是第二个版本，可以将 stderr 重定向到不同的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:50:22.747

这个怎么样：

```
(some commands ...) 2>&1 | tee logfile.txt 
```

添加`-a`到`tee`命令行以便后续调用追加而不是覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-15T16:53:18.537

在 ksh 中，以下内容对我来说效果很好

```
LOG=log_file.$(date +%Y%m%d%H%M%S).txt
{
ls
date
... whatever command
} 2>&1 | tee -a $LOG 
```

# git - 如何以 7zip 格式制作 git 存档？

> ID：12075528
> 
> 赞同：2
> 
> 时间：2012-08-22T14:36:35.827
> 
> 标签：git, 7zip

7zip 往往比 tar.gz 或 zip 压缩得更好，但`git archive`只支持这两种相当古老的格式。

有什么简单的方法可以将`git archive`compress 输出为 7zip？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:40:19.047

使用`git archive master | xz -z > archived.xz`. 注意`xz`和`7z`使用相同的压缩算法。然后，您可以使用`xz -d`.

# apache - 快速图像检索

> ID：12075529
> 
> 赞同：0
> 
> 时间：2012-08-22T14:36:37.670
> 
> 标签：apache, http, caching, file-io, webserver

我有一个展示产品的网站。每个页面显示 16 种产品，网站上大约有 70,000 种产品。每个页面的 HTML 都是使用 PHP 生成的。

产品信息存储在数据库中。大致上，结果的第一页（如果我想首先显示最便宜的商品）将像这样显示（仅限伪代码）：

```
// run sql to fetch product titles and image filenames
SELECT itemTitle, itemImageFileName FROM items ORDER BY itemPrice ASC LIMIT 16

// loop through and display items
for (i=0; i<16; i++) {
    echo "<p>$itemTitle</p>";
    echo "<img src=$itemImageFileName height='100px' width='80px'>";
} 
```

当我这样做时，图像标题首先出现，然后图像在大约半秒到一秒后加载。我想知道如何加速图像加载。

所有图像都存储在一个包含 70,000 张图像的文件夹中。几乎所有图像的大小都小于 50KB。每个图像文件名的格式为：id_width_height.jpg。例如，文件名可能类似于：32193_80_100.jpg

我想知道瓶颈是否是服务器需要一些时间才能找到所需的文件，因为文件夹中有 70,000 个文件。有没有办法可以加速这个？图像加载缓慢还有其他原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:42:53.550

首先，我会在 Chrome/Firefox 的网络选项卡中检查图像请求。这将回答查找或下载是否是关键部分的问题。你有链接吗？

70.000 实在太多了。我会将文件名拆分并创建子文件夹，例如：/htdocs/img/32193/80_100.jpg

# haskell - Haskell quasiquotation 如何用于替换 Haskell 级别的令牌？

> ID：12075530
> 
> 赞同：15
> 
> 时间：2012-08-22T14:36:42.540
> 
> 标签：haskell, metaprogramming, dsl

[在haskellwiki](http://www.haskell.org/haskellwiki/Quasiquotation)中描述的准引用主要被显示为在 Haskell 中嵌入其他语言而不会弄乱字符串引用的有用工具。

**问题是：**对于 Haskell 本身，将现有的 Haskell 代码放入一个 quasiquoter 以仅替换标记并将结果传递给 ghc 有多容易？也许模板 Haskell 是这里的关键？

我一直在寻找代码示例，但没有找到。一些 EDSL 可以通过减小其组合运算符的大小来受益于这种能力（例如，将 'a .|. b .>>. c' 转换为 '[myedsl|a | b >> c]'）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T17:27:32.650

您可以构建操作 Haskell 代码的准引用器，例如，使用[haskell-src-meta](http://hackage.haskell.org/package/haskell-src-meta)包。它将有效的 Haskell 代码解析为 AST，然后您可以对其进行修改。

在这种情况下，修改 AST 的最简单方法是使用[Data.Generics](http://hackage.haskell.org/package/syb-0.3.7)将通用转换应用于整个 AST，将运算符替换为其他运算符。

我们将从为通用 Haskell 表达式构建转换函数开始。表示表达式的数据类型是[template-haskell](http://hackage.haskell.org/package/template-haskell)包中的[Exp 。](http://hackage.haskell.org/packages/archive/template-haskell/latest/doc/html/Language-Haskell-TH-Syntax.html#t%3aExp)

例如，要将运算符转换`>>`为`.>>.`我们将使用类似的函数

```
import Language.Haskell.TH (Exp(..), mkName)

replaceOp :: Exp -> Exp
replaceOp (VarE n) | n == mkName ">>" = VarE (mkName ".>>.")
replaceOp e = e 
```

这会更改变量表达式 ( `VarE`)，但不能对任何其他类型的表达式执行任何操作。

现在，要遍历整个 AST 并替换所有出现的 ，`>>`我们将使用函数[`everywhere`](http://hackage.haskell.org/packages/archive/syb/0.3.7/doc/html/Data-Generics-Schemes.html#v%3aeverywhere)和[`mkT`](http://hackage.haskell.org/packages/archive/syb/0.3.7/doc/html/Data-Generics-Aliases.html#v%3amkT)from `Data.Generic`。

```
import Data.Generics (everywhere, mkT)

replaceEveryOp :: Exp -> Exp
replaceEveryOp = everywhere (mkT replaceOp) 
```

为了进行多次替换，我们可以改变函数，使其接受任何运算符的关联列表来替换。

```
type Replacements = [(String, String)]

replaceOps :: Replacements -> Exp -> Exp
replaceOps reps = everywhere (mkT f) where
    f e@(VarE n) = case rep of
        Just n' -> VarE (mkName n')
        _ -> e
        where rep = lookup (show n) reps
    f e = e 
```

[顺便说一句，这是一个很好的例子，它通过使用视图模式](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/syntax-extns.html#view-patterns)语言扩展来编写更好的函数。

```
{-# LANGUAGE ViewPatterns #-}

replaceOps :: Replacements -> Exp -> Exp
replaceOps reps = everywhere (mkT f) where
    f (VarE (replace -> Just n')) = VarE (mkName n')
    f e = e

    replace n = lookup (show n) reps 
```

现在剩下要做的就是构建“myedsl”准报价器。

```
{-# LANGUAGE ViewPatterns #-}

import Data.Generics (everywhere, mkT)
import Language.Haskell.Meta.Parse (parseExp)
import Language.Haskell.TH (Exp(..), mkName, ExpQ)
import Language.Haskell.TH.Quote (QuasiQuoter(..))

type Replacements = [(String, String)]

replacements :: Replacements
replacements =
    [ ("||", ".|.")
    , (">>", ".>>.")
    ]

myedls = QuasiQuoter
    { quoteExp  = replaceOpsQ
    , quotePat  = undefined
    , quoteType = undefined
    , quoteDec  = undefined
    }

replaceOpsQ :: String -> ExpQ
replaceOpsQ s = case parseExp s of
    Right e -> return $ replaceOps replacements e
    Left err -> fail err

replaceOps :: Replacements -> Exp -> Exp
replaceOps reps = everywhere (mkT f) where
    f (VarE (replace -> Just n')) = VarE (mkName n')
    f e = e

    replace n = lookup (show n) reps 
```

如果您将上述内容保存到它自己的模块（例如`MyEDSL.hs`）中，那么您可以导入它并使用准引用器。

```
{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE QuasiQuotes #-}

import MyEDSL

foo = [myedsl| a || b >> c |] 
```

请注意，我使用`||`而不是`|`因为后者不是 Haskell 中的有效运算符（因为它是用于模式保护的句法元素）。

# sharepoint - 向自定义列表添加内容时如何隐藏字段

> ID：12075534
> 
> 赞同：0
> 
> 时间：2012-08-22T14:36:55.520
> 
> 标签：sharepoint, sharepoint-2007

我有一个自定义列表，为它创建了一个视图。普通用户的一个视图另一个管理员的视图。当您向列表中添加新内容时，我想对普通用户隐藏的字段就在那里。是否有某个地方可以修复或更改此设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:47:38.850

您可以将其添加到视图后面的控制器中：

```
public ActionResult Index()
{
    ViewBag.isAdmin = isAdmin();
    return View();  
}

private Boolean isAdmin()
{
    if (User.IsInRole("admin"))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

然后在视图中，将您需要的上下文包装为：

```
 @{
     if (ViewBag.isAdmin)
     {                                          
     //....only admins can see me!
     }

 } 
```

# python - 烧瓶登录：无法理解它是如何工作的

> ID：12075535
> 
> 赞同：79
> 
> 时间：2012-08-22T14:36:56.937
> 
> 标签：python, mysql, flask-login

我试图了解它是如何[`Flask-Login`](https://flask-login.readthedocs.org/en/latest/)工作的。

我在他们的文档中看到他们使用预先填充的用户列表。我想玩一个数据库存储的用户列表。

但是，我不了解此[`Flask-Login`](https://flask-login.readthedocs.org/en/latest/)模块中的某些内容。

```
@login_manager.user_loader
def load_user(userid):
    #print 'this is executed',userid
    return user(userid, 'asdf') 
```

每次请求都会调用此代码？这用于加载我的用户对象的所有详细信息？

现在，我有这个代码：

```
@app.route('/make-login')
def make_login():
    username = 'asdf'
    password = 'asdf'
    user_data = authenticate(username, password)
    user_obj = user(user_data[0], user_data[1])
    login_user(user_obj)
    return render_template('make-login.html') 
```

当我访问 /make-login 时，我想登录。

我的用户类：

```
class user(object):
    def __init__(self, id, username, active=True):
        self.username = username
        self.id = id
        #self.active = active
    def is_authenticated(self):
        return True  

    def is_active(self):
        return True

    def is_anonymous(self):
        return False

    def get_id(self):
        return 5 
```

另外，我写了另外两个函数来验证/注册

```
def authenticate(username, password):

    cursor = db.cursor()
    password = md5.md5(password).hexdigest()
    try:
        query = "SELECT * FROM `users` WHERE `username` = %s AND `password` = %s"
        cursor.execute(query, (username, password))
        results = cursor.fetchall()
        #print results[0][0]
        #print "here i am"
        if not results:
            return False
        else:
            user_data = [results[0][0], results[0][1]]
            return user_data
            #self.authenticated = True
            #self.user_id = results[0][0]
            #session['username']  = results['username']
            #print type(results)
    except db.Error, e:
        return 'There was a mysql error'    

def register(username, password, email, *args):
    cursor = db.cursor()
    password = md5.md5(password).hexdigest()
    try:
        #query = "INSERT INTO `users` (`username`, `password`, `email`) VALUES ('%s', '%s', '%s')" % (username, password, email)
        query = "INSERT INTO `users` (`username`, `password`, `email`) VALUES (%s, %s, %s)"
        cursor.execute(query, (username, password, email))
        db.commit()
        return True
    except db.Error, e:
        print 'An error has been passed. %s' %e
        db.rollback()
        return False 
```

我不知道如何使它[`Flask-Login`](https://flask-login.readthedocs.org/en/latest/)与 MySQL 一起工作。另外，我不知道用户是否已登录。如何获取用户 ID 或用户名？

任何人都可以在某些行中向我解释这是如何[`Flask-Login`](https://flask-login.readthedocs.org/en/latest/)工作的？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-22T21:38:17.337

Flask-login 实际上没有用户后端，它只是处理会话机制以帮助您登录和注销用户。你必须告诉它（通过装饰方法），什么代表一个用户，你还需要弄清楚如何知道用户是否“活跃”（因为“活跃”在不同的应用程序中可能意味着不同的东西）。

您应该阅读[文档](https://flask-login.readthedocs.org/en/latest/)并确定它做什么*和不做什么*。在这里，我只专注于将它与 db 后端连接起来。

首先，定义一个用户对象；它代表您的用户的属性。然后，该对象可以查询数据库、LDAP 或其他任何东西，它是将登录机制与数据库后端连接起来的钩子。

为此，我将使用[登录示例脚本。](https://gist.github.com/bkdinoop/6698956)

```
class User(UserMixin):
    def __init__(self, name, id, active=True):
        self.name = name
        self.id = id
        self.active = active

    def is_active(self):
        # Here you should write whatever the code is
        # that checks the database if your user is active
        return self.active

    def is_anonymous(self):
        return False

    def is_authenticated(self):
        return True 
```

一旦你创建了用户对象，你需要编写一个加载用户的方法（基本上，`User`从上面创建一个类的实例）。使用用户 ID 调用此方法。

```
@login_manager.user_loader
def load_user(id):
     # 1\. Fetch against the database a user by `id` 
     # 2\. Create a new object of `User` class and return it.
     u = DBUsers.query.get(id)
    return User(u.name,u.id,u.active) 
```

完成这些步骤后，您的登录方法将执行以下操作：

1.  检查用户名和密码是否匹配（针对您的数据库） - 您需要自己编写此代码。

2.  如果身份验证成功，您应该将用户实例传递给`login_user()`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-22T22:28:36.560

Flask-login 将在每次请求之前尝试加载用户。所以是的，您下面的示例代码将在每个请求之前被调用。它用于检查当前会话中的用户 ID，并将加载该 ID 的用户对象。

```
@login_manager.user_loader
def load_user(userid):
    #print 'this is executed',userid
    return user(userid, 'asdf') 
```

如果您查看 github 上的 Flask-login 源代码，函数 init_app 下有一行：

```
app.before_request(self._load_user) 
```

因此，在每次请求之前，都会调用 _load_user 函数。_load_user 函数实际上根据条件调用另一个函数“reload_user()”。最后， reload_user() 函数调用您编写的回调函数（示例中的 load_user() ）。

此外，flask-login 仅提供登录/注销用户的机制。它不关心您是否使用 mysql 数据库。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-23T15:29:59.637

根据[Flask-Login](https://flask-login.readthedocs.org/en/latest/#how-it-works)的文档，必须返回用户对象，如果未找到用户 ID，则应返回 None 而不是 Exception。

```
@login_manager.user_loader
def load_user(userid):
    try:
        #: Flask Peewee used here to return the user object
        return User.get(User.id==userid)
    except User.DoesNotExist:
        return None 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-02T12:45:56.410

您可能希望使用[Flask-Security](https://pythonhosted.org/Flask-Security/)，它将 Flask-Login 与 SQLAlchemy 结合起来进行数据库访问，并自动执行大部分用户记录的后端处理。

[快速入门](https://pythonhosted.org/Flask-Security/quickstart.html)教程将帮助您入门。将 app.config['SQLALCHEMY_DATABASE_URI'] 设置为 MySQL 数据库连接字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-28T18:27:13.320

在解释完所有内容后，我将尝试使用代码给出一个简单的使用示例，同时在下面回答：

> 完成这些步骤后，您的登录方法将执行以下操作：
> 
> 1.  检查用户名和密码是否匹配（针对您的数据库） - 您需要自己编写此代码。
> 2.  如果身份验证成功，您应该将用户实例传递给 `login_user()`

假设这是项目的结构：

```
├─stackoverflow
  │   run.py
  │
  └───site
      │   forms.py
      │   models.py
      │   routes.py
      │   site.db
      │   __init__.py
      │
      ├───static
      │       main.css
      │
      └───templates
              about.html
              account.html
              home.html
              layout.html
              login.html
              register.html 
```

我们最感兴趣的是模型：

```
# models.py
from site import db, login_manager
from flask_login import UserMixin

@login_manager.user_loader
def load_user(user_id):
    return User.query.get(int(user_id))

class User(db.Model, UserMixin):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(20), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    image_file = db.Column(db.String(20), nullable=False, default='default.jpg')
    password = db.Column(db.String(60), nullable=False)

    def __repr__(self):
        return f"User('{self.username}', '{self.email}', '{self.image_file}')" 
```

我们将在用户登录时调用它，更准确地说是在用户注册之后——在用户存在之后。

具体来说，需要实现的两个步骤的答案可以在以下两行代码中找到：

> 1.  检查用户名和密码是否匹配（针对您的数据库） - 您需要自己编写此代码。

A：`if user and bcrypt.check_password_hash(user.password, form.password.data):`

> 2.  如果身份验证成功，您应该将用户实例传递给 `login_user()`

A：`login_user(user, remember=form.remember.data)`

```
# routes.py

from flask import render_template, url_for, flash, redirect, request
from site import app, db, bcrypt
from site.forms import RegistrationForm, LoginForm
from site.models import User
from flask_login import login_user, current_user, logout_user, login_required

@app.route("/")
@app.route("/home")
def home():
    return render_template('home.html', title="Welcome")

@app.route("/register", methods=['GET', 'POST'])
def register():
    if current_user.is_authenticated:
        return redirect(url_for('home'))
    form = RegistrationForm()
    if form.validate_on_submit():
        hashed_password = bcrypt.generate_password_hash(form.password.data).decode('utf-8')
        user = User(username=form.username.data, email=form.email.data, password=hashed_password)
        db.session.add(user)
        db.session.commit()
        flash('Your account has been created! You are now able to log in', 'success')
        return redirect(url_for('login'))
    return render_template('register.html', title='Register', form=form)

@app.route("/login", methods=['GET', 'POST'])
def login():
    if current_user.is_authenticated:
        return redirect(url_for('home'))
    form = LoginForm()
    if form.validate_on_submit():
        user = User.query.filter_by(email=form.email.data).first()
        if user and bcrypt.check_password_hash(user.password, form.password.data):
            login_user(user, remember=form.remember.data)
            next_page = request.args.get('next')
            return redirect(next_page) if next_page else redirect(url_for('home'))
        else:
            flash('Login Unsuccessful. Please check email and password', 'danger')
    return render_template('login.html', title='Login', form=form)

# Views that require your users to be logged in can be decorated with the `login_required` decorator

@app.route("/account")
@login_required
def account():
    return render_template('account.html', title='Account')

# When the user is ready to log out:

@app.route("/logout")
@login_required
def logout():
    logout_user()
    return redirect(url_for('home')) 
```

然后，您可以使用代理访问已登录的用户，该`current_user`代理在每个模板中都可用：

```
{% if current_user.is_authenticated %}
  Hi {{ current_user.username }}!
{% endif %} 
```

默认情况下，当用户尝试`login_required`在未登录的情况下访问视图时，Flask-Login 将闪烁一条消息并将他们重定向到登录视图。（如果未设置登录视图，它将以 401 错误中止。）

登录视图的名称可以设置为`LoginManager.login_view`：

`login_manager.login_view = 'login'`

```
# __init__.py

from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from flask_bcrypt import Bcrypt
from flask_login import LoginManager

app = Flask(__name__)
app.config['SECRET_KEY'] = 'ENTER_SECRET_KEY'
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///site.db'
db = SQLAlchemy(app)
bcrypt = Bcrypt(app)
login_manager = LoginManager(app)
login_manager.login_view = 'login'
login_manager.login_message_category = 'info'

from site import routes 
```

最后，运行项目：

```
# run.py

from site import app

if __name__ == '__main__':
    app.run(debug=True) 
```

#### 我希望，除了一个很好的解释之外，这个简单的例子是有帮助的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T17:25:25.130

这是一个使用登录的 Flask 示例：[https](https://bitbucket.org/leafstorm/flask-login/src/3160dbfc7cfc/example/login-example.py) : //bitbucket.org/leafstorm/flask-login/src/3160dbfc7cfc/example/login-example.py 您需要为每个需要登录的方法使用@login_required。例如，

```
@app.route('/make-login')
@login_required
def make_login():
    ... 
```

# ruby - 使用正则表达式评估和修改 Ruby 中的字符串？

> ID：12075540
> 
> 赞同：2
> 
> 时间：2012-08-22T14:37:10.180
> 
> 标签：ruby, regex

我想修改使用 Ruby 的字符串的一部分。

字符串是`[x, y]`一个`y`整数，我想将其更改为它的字母。所以说`[1, 1]`会变成`[1, A]`和`[1, 26]`会变成`[1, Z]`。

正则表达式会帮助我做到这一点吗？还是有更简单的方法？我对正则表达式不是很擅长，我现在正在阅读这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:51:20.860

我能想到的最短方法如下

```
string = "[1,1]"
array = string.chop.reverse.chop.reverse.split(',')
new_string="[#{array.first},#{(array.last.to_i+64).chr}]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:40:12.233

也许这有帮助：

因为我们没有字母表，但我们可以查找位置，创建一个。这是一个转换为数组的范围，因此您无需自己指定。

```
alphabet = ("A".."Z").to_a 
```

然后我们尝试从字符串中获取整数/位置：

```
string_to_match = "[1,5]"
/(\d+)\]$/.match(string_to_match) 
```

也许正则表达式可以改进，但是对于这个例子来说它是有效的。MatchData 中的第一个引用是在“string_to_match”中保存第二个整数。或者您可以通过“$1”获得它。不要忘记将其转换为整数。

```
position_in_alphabet = $1.to_i 
```

我们还需要记住，数组的索引从 0 开始，而不是 1

```
position_in_alphabet -= 1 
```

最后，我们可以看看我们真正得到了哪个char

```
char = alphabet[position_in_alphabet] 
```

例子：

```
alphabet = ("A".."Z").to_a #=> ["A", "B", "C", ..*snip*.. "Y", "Z"]
string_to_match = "[1,5]" #=> "[1,5]"
/(\d+)\]$/.match(string_to_match) #=> #<MatchData "5]" 1:"5">
position_in_alphabet = $1.to_i #=> 5
position_in_alphabet -= 1 #=> 4
char = alphabet[position_in_alphabet] #=> "E" 
```

问候~

# php - php中的简单水平线图

> ID：12075541
> 
> 赞同：2
> 
> 时间：2012-08-22T14:37:10.917
> 
> 标签：php, mysql, css

使用 php 和 mysql 动态生成的三个值
主队机会：45
平局机会：30
客队机会 25
总计 100（100%）

现在我需要用这些值绘制水平线图（下面的例子）

[http://imageshack.us/photo/my-images/210/graphaw.jpg/](http://imageshack.us/photo/my-images/210/graphaw.jpg/)

我怎么画这个，我正在寻找你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:20:59.187

我以前有过这方面的经验，当有很多用户时必须渲染多个图表时，它最终会给服务器带来压力。

您应该使用 html5 canvas 或 svg 等来执行此操作。

有几个不错的。

对于实际图表，请查看 jquery 插件“flot”。

否则，请查看 jqueryui.com 中提供的任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:42:26.030

PHP GD 可能适合您。祝你好运！

[http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

# html - 即显示：无错误

> ID：12075543
> 
> 赞同：-4
> 
> 时间：2012-08-22T14:37:14.650
> 
> 标签：html, css

在 ie9 中，我注意到`display: none`在以下情况下似乎不起作用：

```
<span class="commentsList" id="viewComments-<?php echo $row->idwallPosts; ?>" style="width: 104%; display: none"></span> 
```

有人知道如何修复这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:24:44.663

您可以在 CSS 中设置一个规则，该规则链接到该对象的类/ID 并覆盖您的“display:none;” 规则。你不能给我们一个链接到你的网站吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:55:52.017

尝试`position:realtive`在你的课堂上使用`display:none`

# python - 将迭代器分组为大小为 n 的块的最 Pythonic 方式

> ID：12075547
> 
> 赞同：0
> 
> 时间：2012-08-22T14:37:20.320
> 
> 标签：python, iterator

> **可能重复：**
> [如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)

如果您有一个`iter`带有 values的迭代器`i0, i1, i2, ...`，那么获取其值的迭代器的最 Pythonic 方法是什么

```
[i0, i1, i2], [i3, i4, i5], ... 
```

以上将是一个假设的输出`groupby(iter, 3)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:42:35.740

itertools 模块对此有一个名为[`grouper`](http://docs.python.org/library/itertools.html#recipes). 这是直接从 itertools 文档中复制的摘录。

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:37:20.320

我能找到的最佳解决方案（需要`itertools`）：

```
groupby = lambda s,n : izip(*[iter(s)]*n) 
```

但感觉有点hacky，很难阅读

# php - Symfony，从控制器读取实体字段

> ID：12075549
> 
> 赞同：1
> 
> 时间：2012-08-22T14:37:22.007
> 
> 标签：php, symfony, doctrine

我正在尝试在 Symfony 2 中制作某种“可重用”的基本控制器。给定实体的名称，是否可以读取该实体的*模式*？也就是说，实体字段的列表以及每个字段的名称和类型。

这是为了在管理面板和其他类似操作中自动生成输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:49:14.133

[**SensioGeneratorBundle**](https://github.com/sensio/SensioGeneratorBundle)提供 CRUD 生成功能。

其[源代码](https://github.com/sensio/SensioGeneratorBundle)可在 GitHub 上获得。
它的[文档](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/index.html)写得很好；您可能应该在做出决定之前阅读它。

这个包可以生成一个基于 Doctrine 实体的 CRUD 控制器。设置应用程序后，运行以下命令：

```
php app/console generate:doctrine:crud 
```

它将生成表单、控制器和视图。
生成的类很容易扩展。

# activerecord - 使用 has_one 关联进行急切加载

> ID：12075554
> 
> 赞同：0
> 
> 时间：2012-08-22T14:37:30.110
> 
> 标签：activerecord, ruby-on-rails-3.1, ruby-on-rails-3.2

我有两个模型，即问题和选择，如下所示

```
class Question < ActiveRecord::Base

  has_many :choices, :dependent => :destroy
  accepts_nested_attributes_for :choices, :allow_destroy => true
end

class Choice < ActiveRecord::Base
  attr_accessible :text
  belongs_to :question
end 
```

这里每个问题有 3 个或更多选项，在这 3 个选项中是正确的，它存储在问题表的答案列中。即问题。答案

**问题**：当我显示所有我想显示选择文本的问题时，这意味着`@choice Choice.find(@question.answer)`它会显示正确的答案（即），`@choice.text`但它会导致`n+1`问题。

我们可以通过一个查询或像...这样的急切加载来实现这一点吗？

看法：

```
 %table
      %tr
        %th No
        %th Question  
        %th Answer
      - @review_questions.each_with_index do |question,index|
        %tr
          %td= index+1
          %td= question.text
          %td= question.answer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:26:58.027

急切加载是一次收集所有需要的数据，在某些`n+1`情况下使用完整

这些将运行两个查询

1.  查找所有问题

2.  一个查询中所有问题的所有问题选择并缓存它

您可以通过以下方式访问每个问题的选项

```
@question.each do |question|
 choices = question.choices
 correct_choice = choices.detect{|choice| choice.id = question.answer}  
end 
```

并通过以下方式找到答案的选择

```
// return the choice with id @question.answer 
```

有关急切加载的更多详细信息

[http://railscasts.com/episodes/22-eager-loading](http://railscasts.com/episodes/22-eager-loading)

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

**示例如何使用**

控制器：

```
@questions = Question.all(:include=>:choices) 
```

问题模型：

```
def correct_answer
   choices.detect{|choice| choice.id = self.answer}  
end 
```

观点：（对不起，我不太擅长haml，从来没有尝试过，如果有任何问题，请纠正）

```
%table
  %tr
    %th No
    %th Question  
    %th Answer
  - @questions.each_with_index do |question,index|
    %tr
      %td= index+1
      %td= question.text
      %td= question.correct_answer.text 
```

# cakephp - CakePHP - 将相关模型详细信息拉入编辑屏幕

> ID：12075557
> 
> 赞同：0
> 
> 时间：2012-08-22T14:37:37.037
> 
> 标签：cakephp

这是我的模型关系：

```
expenseClaim hasMany expenses
expenses HABTM expenseCodes
expenseCodes HABTM expenses 
```

在我的 costsClaim edit() 函数中，我将所有相关的费用（每行一个）拉入一个表单中，以便用户可以编辑。

在每一行（费用）上，我都有一个下拉菜单，因此他们可以选择费用代码（与费用声明 add() 函数相同）。

但是，在编辑视图中，用户先前选择的费用代码尚未从数据库中填充...

我怎样才能将费用索赔、费用和昂贵的代码都拉到同一页面中？

我试过了：

```
$this->ExpenseClaim->recursive = 2; 
```

没有成功。

费用索赔模型：

```
 <?php
App::uses('AppModel', 'Model');
/**
 * ExpenseClaim Model
 *
 * @property User $User
 * @property ClaimStatus $ClaimStatus
 * @property Expense $Expense
 */
class ExpenseClaim extends AppModel {

/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'id';

/**
 * Model validation
 *
 */

    public $validate = array(
        'user_id' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'Error - the user_id is missing',
            ),
        ),
        'approved' => array(
            'boolean' => array(
                'rule' => array('boolean'),
                'message' => 'Error - approved should be boolean',
            ),
        ),
        'date_submitted' => array(
            'datetime' => array(
                'rule' => array('datetime'),
                'message' => 'Error - date submitted cannot be blank',
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'ClaimStatus' => array(
            'className' => 'ClaimStatus',
            'foreignKey' => 'claim_status_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

/**
 * hasMany associations
 *
 * @var array
 */
    public $hasMany = array(
        'Expense' => array(
            'className' => 'Expense',
            'foreignKey' => 'expense_claim_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

} 
```

# eclipse - 未找到 SVN 存储库

> ID：12075561
> 
> 赞同：0
> 
> 时间：2012-08-22T14:37:43.540
> 
> 标签：eclipse, svn, unix

使用我的 svn 客户端，我得到了错误

> svn：在中找不到存储库

我尝试使用 telnet 连接到 svn 服务器并且它工作，但为什么我找不到存储库？有没有办法检查我的存储库是否已损坏，任何有用的命令都会受到重视。

谢谢

# python - 如何在python中处理超过24小时的时间值？

> ID：12075562
> 
> 赞同：10
> 
> 时间：2012-08-22T14:37:43.043
> 
> 标签：python, date, time, format

我正在处理大量同时具有值​​和时间的数据（以字符串形式）。

我正在使用以下代码将字符串时间值转换为日期时间值：

```
time = datetime.datetime.strptime(time, " %H:%M:%S.%f") 
```

唯一的问题是我的一些数据格式为：24:00:00.004。
所以有些数据实际上是超过24小时的

Python 给了我这个错误：ValueError: time data '24:00:00:004' does not match format '%H:%M:%S.%f'

关于如何处理这个问题的任何想法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T14:42:19.510

该`%H`参数只能解析 0-23 范围内的值。您必须手动处理这些特定的时间戳：

```
try:
     time = datetime.datetime.strptime(time, " %H:%M:%S.%f")
except ValueError:
     time = time.replace(' 24', ' 23')
     time = datetime.datetime.strptime(time, " %H:%M:%S.%f")
     time += datetime.timedelta(hours=1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T14:49:57.690

尝试分别解析小时数：

```
hours, rest = time.split(':', 1)
time = datetime.timedelta(hours=int(hours)) + datetime.datetime.strptime(rest, "%M:%S.%f") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T14:51:53.573

似乎您的数据不包含日期，但时间跨度，因此您可能应该将数据存储为[`timedelta`](http://docs.python.org/release/2.5.2/lib/datetime-timedelta.html)而不是`datetime`.

* * *

您可以使用[此](http://kbyanc.blogspot.de/2007/08/python-reconstructing-timedeltas-from.html)`timedelta`函数从您的字符串创建一个：

```
import re
from datetime import timedelta

def parseTimeDelta(s):
    d = re.match(
            r'((?P<days>\d+) days, )?(?P<hours>\d+):'
            r'(?P<minutes>\d+):(?P<seconds>\d+)\.(?P<milliseconds>\d+)',
            str(s)).groupdict(0)
    return timedelta(**dict(( (key, int(value))
                              for key, value in d.items() ))) 
```

* * *

`'24:00:00.004'`像这样解析你的时间字符串

> >>>t = parseTimeDelta('24:00:00.04')

会产生一个像这样表示的时间增量

> >>> 打印
> 1 天，0:00:00.004000

# java - Web 应用程序从我的电脑中获取信息

> ID：12075564
> 
> 赞同：-2
> 
> 时间：2012-08-22T14:37:49.447
> 
> 标签：java, python, web, project

我有项目，这是我第一次在网络应用程序上工作。

我的项目在我的电脑上有两部分，第一部分在网络服务器上。

我必须从网页连接到我的电脑才能获取信息。

我应该为这个项目学习什么语言。

我的经历

C++,java,python

我的平台 Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:40:40.960

C++、Java 和 Python 中的任何一个都可以用于您的计算机和服务器之间的通信。除此之外，这些“最佳语言”问题通常是无法回答的。任何语言都应该能够完成这项任务。只有在非常具体的要求级别上，您才能提出一种语言更适合该任务的论点。最重要的是，不同的人喜欢不同的语言，争论他们的个人品味没有什么意义。

简而言之，用你喜欢的。

当然，为了构建网页，您可能需要了解一些 HTML、CSS 和可能的 javascript。

# javascript - 使用 jquery.load 并尝试避免两次包含相同的代码

> ID：12075570
> 
> 赞同：0
> 
> 时间：2012-08-22T14:38:13.073
> 
> 标签：javascript, jquery, html, css

我正在使用 JQuery.load() 将文件的内容拉入网页。实现这一点的 javascript 位于一个单独的 .js 文件中，以保持整洁。

```
/* Pulls in file contents */
    $(function() {
    $('.div').load('file.html');
}); 
```

但是，当在我用来交叉淡入淡出图像的 jquery 动画中拉取文件时——其代码也在 .js 文件中——不起作用。

```
/* Crossfade code */
$(function(){
$(".appearing-image img").css("opacity",0).fadeTo(300, 0);
$(".appearing-image img").mouseover(function () {
        $(this).fadeTo(200, 1);
    });
$(".appearing-image img").mouseout(function () {
        $(this).fadeTo(200, 0);
    });
}); 
```

我发现让它工作的唯一方法是将它包含在 .load() 代码中。

```
/* Pulls in file contents and executes animation */
$('.div').load('file.html',     $(function(){
            /* Crossfade images */
            $(".appearing-image img").css("opacity",0).fadeTo(300, 0);
            $(".appearing-image img").mouseover(function () {
            $(this).fadeTo(200, 1);
            });
            $(".appearing-image img").mouseout(function () {
            $(this).fadeTo(200, 0);
            });
        });
    }); 
```

这样可行。

但是，页面上的其他图像不会交叉淡入淡出，除非代码本身也包含在内，与 .load() 分开，这意味着我现在包含了两次代码。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:43:24.897

使用外部函数，例如`crossfade()`

```
/* Crossfade code */
function crossfade(){
$(".appearing-image img").css("opacity",0).fadeTo(300, 0);
$(".appearing-image img").mouseover(function () {
        $(this).fadeTo(200, 1);
    });
$(".appearing-image img").mouseout(function () {
        $(this).fadeTo(200, 0);
    });
}

/* Pulls in file contents and executes animation */
$('.div').load('file.html', function(){
    /* Crossfade images */
    crossfade();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:44:46.107

您可以使用

```
$(window).bind('setup', function() {
   //code
}); 
```

在文档准备好之前加载一些东西

# facebook - 无法通过服务器端身份验证从 Facebook 获取访问令牌

> ID：12075576
> 
> 赞同：0
> 
> 时间：2012-08-22T14:38:31.493
> 
> 标签：facebook, token, facebook-access-token

我尝试获取类似此文档的 access_token：[https ://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

但它不起作用！

我有这个错误：

```
{
   "error": {
      "type": "OAuthException",
      "message": "Error validating verification code."
   }
} 
```

在文档中它说我们可以使用：

```
https://graph.facebook.com/oauth/access_token?
     client_id=YOUR_APP_ID&redirect_uri=YOUR_URL&
     client_secret=YOUR_APP_SECRET&code=THE_CODE_FROM_ABOVE 
```

client_id 是我的 app_id
client_secret 是应用程序密码
redirect_uri 是网站的 url（应用程序配置中的站点 URL）（我在最后尝试了 / 和没有）

所以我的网址是：

```
https://graph.facebook.com/oauth/access_token?client_id=14588084****&redirect_uri=http%3A%2F%2Fwww.mywebsite.com&client_secret=693ce9538e1f14e0*********&code=AQCVmlM9peMiL8Pv3mdi7c3FifwGLQDECdtN0oGMW4I6cisebeawDdSHP_crQlhsZxHKDOFT6zOrqeaoiL2pkQSkqAvwoPZdw0o1uCoLpUVjchghgfhgfhEXb2XS3UBD7iEc8eZ_YLF0cbVWL5i58sj3Rsr9vVFtfYwfghghgfhgfTkwajGcRp9n-lWWcepxghgIwzMMYLv8e__iDoMDiSNg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:46:32.273

自从我上次编写 Facebook 应用程序以来已经有好几年了。不确定这是否有帮助： [Facebook 访问令牌和 AJAX 调用](https://stackoverflow.com/questions/11782809/facebook-access-token-and-ajax-calls)

# postgresql - 删除 postgreSql 中的所有视图

> ID：12075582
> 
> 赞同：15
> 
> 时间：2012-08-22T14:38:44.303
> 
> 标签：postgresql, view

这似乎是一个非常简单的问题，但我找不到答案！如何从 postgreSQL 控制台批量删除视图？我有 10,000 次查看，只是为了测试一些东西，现在我无法摆脱它们！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T14:48:50.623

您可以像这样从元表中选择视图（如果您使用旧版本，实际选择可能会有所不同，请参见此处，例如[http://www.alberton.info/postgresql_meta_info.html](http://www.alberton.info/postgresql_meta_info.html)）

```
SELECT 'DROP VIEW ' || table_name || ';'
  FROM information_schema.views
 WHERE table_schema NOT IN ('pg_catalog', 'information_schema')
   AND table_name !~ '^pg_'; 
```

所以你根据你的实际版本修复这个选择，运行它，将结果保存到 .sql 文件中，然后运行 ​​.sql 文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-28T12:40:32.913

我添加了这个答案，它引用了@greg 的评论，而@greg 又引用了一个似乎已经消失的答案，来自一个名为 justbob 的用户。这条评论对我帮助很大，但可能很容易被其他人忽视。

虽然它没有回答 samachs 的问题，但因为他的观点已经提出，它可能会帮助像我这样在谷歌搜索删除批量操作中所有视图的方法后发现这个问题的其他人。

我有一些视图依赖于另一个视图，并且是由不断发展的脚本生成的。因此脚本中会添加或删除一些视图。为了限制在添加或删除视图时我必须进行更改的地方，我想在再次创建它们之前将它们全部放在脚本的开头。

我现在使用的解决方案是在一个单独的模式中创建所有视图，该模式只包含视图。

在我的脚本的开头，我在创建视图之前有以下语句：

```
DROP SCHEMA IF EXISTS dbview_schema CASCADE;
CREATE SCHEMA dbview_schema; 
```

之后，我在自己的架构中重新创建所有视图：

```
CREATE VIEW dbview_schema.my_view AS
  SELECT * FROM my_table
  ORDER BY my_table.my_column; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-22T14:48:23.833

测试一下，看看它是否有效。我将其从内存中提取出来，因此可能存在一些语法问题。

```
BEGIN TRANSACTION;
    DO $$DECLARE r record;
         DECLARE s TEXT;
        BEGIN
            FOR r IN select table_schema,table_name
                     from information_schema.views
                     where table_schema = 'public'
            LOOP
                s := 'DROP VIEW ' ||  quote_ident(r.table_schema) || '.' || quote_ident(r.table_name) || ';';

                EXECUTE s;

                RAISE NOTICE 's = % ',s;

            END LOOP;
        END$$;
    ROLLBACK TRANSACTION; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-19T19:45:20.730

当我首先删除特定视图时，我会使用以下脚本进行备份；

```
WITH dump_options AS (
  -- feel free to add any dump options
  SELECT '--file=/tmp/create_views.sql --host=... my_db_name' AS dump_options
)
SELECT
    format(e'pg_dump --schema-only --format=plain \\\n%s \\\n%s', 
      string_agg(
        format('--table="%s.%s"', v.schemaname, v.viewname),
        e' \\\n'
      ),
      d.dump_options
    ) create_views
  FROM pg_views v, dump_options d
  WHERE 
    v.schemaname NOT IN (
      'pg_catalog',
      'information_schema',
      'any_other_schema'
    ) AND
    v.viewname NOT IN (
      'pg_stat_statements'
    ) AND
    (v.schemaname, v.viewname) NOT IN (
      ('a_particular_schema', 'a_particular_view')
    )
    -- AND ...

  GROUP BY d.dump_options 
```

该脚本创建了一个转储命令，当我们运行它时，它将备份所有具有所有者和权限的视图；

```
pg_dump --schema-only --format=plain \
--table="a_schema.a_view" \
--table="another_schema.another_view" \
... \
--file=/tmp/create_views.sql --host=... my_db_name 
```

最后，我使用以下命令删除视图（推荐使用 psql）；

```
SELECT
    format('DROP VIEW IF EXISTS %I.%I;', v.schemaname, v.viewname) drop_views
  FROM pg_views v
  WHERE -- the very same where clause used above 
    v.schemaname NOT IN (
      'pg_catalog',
      'information_schema',
      'any_other_schema'
    ) AND
    v.viewname NOT IN (
      'pg_stat_statements'
    ) AND
    (v.schemaname, v.viewname) NOT IN (
      ('a_particular_schema', 'a_particular_view')
    )
    -- AND ...
  ;  -- \gexec 
```

# django - mod_wsgi、django、apache：未能在 httpd.conf 中加载“mod_wsgi.so”模块

> ID：12075586
> 
> 赞同：1
> 
> 时间：2012-08-22T14:39:00.030
> 
> 标签：django, apache, mod-wsgi

我试图将 wsgi_module 加载到 httpd.conf 文件/redhat 中：

```
 ...
   LoadModule wsgi_module modules/mod_wsgi.so 
```

但是当我重新启动服务器时，出现以下错误：

```
Starting httpd: httpd: Syntax error on line 201 of /etc/httpd/conf/httpd.conf: Cannot load /etc/httpd/modules/mod_wsgi.so into server: libpython2.5.so: cannot open shared object file: No such file or directory 
```

这很奇怪，因为文件和目录存在..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:06:18.020

您的 mod_wsgi 副本是针对与您所拥有的不同版本的 python 编译的。看起来它正在寻找python 2.5版。如果您`python -V`在您的系统上运行，请查看您安装的版本并尝试查找针对该版本构建的 mod_wsgi（python 将输出类似的`2.7.3`内容，即 python 2.7）。

要么就是那个，要么你的 libpython2.5.so 副本不在 apache 的库路径中。您可以尝试将其符号链接到 apache 库路径中的 lib 目录之一，或者您可以添加 libpython2.5.so 所在的目录并将其添加到 apache 的库路径中。这个[serverfault question](https://serverfault.com/questions/151328/setting-apache2-path-environment-variable)有一些答案可以帮助您进行设置。

另一个很好的参考： [Python 可执行文件没有找到 libpython 共享库](https://stackoverflow.com/questions/7880454/python-executable-not-finding-libpython-shared-library)

# javascript - JQuery 延迟。使用 $.when 和 .progress()

> ID：12075588
> 
> 赞同：16
> 
> 时间：2012-08-22T14:39:03.910
> 
> 标签：javascript, jquery, progress, jquery-deferred

我正在编写一个充满异步任务的解析器。我使用 JQuery 承诺来控制和排序异步任务。这是构造函数的伪代码版本：

```
 /**
     * @constructor
     */
    function Parser(json)
    {   
        return $.when(
            this.delete().then(this.insert(json)),
            this.doSomething(),
            this.doSomethingElse().then(this.update(json))
        ) 
    }; 
```

这是一个示例函数的样子：

```
Parser.prototype.doSomething = function()
{   
    var dfd = $.Deferred();

    exampleTask(dfd.reject, dfd.resolve);

    return dfd.promise();
}; 
```

来自 JQuery 文档：

> 在将多个 Deferred 对象传递给 jQuery.when 的情况下，该方法从一个新的“主” Deferred 对象返回 Promise，该对象跟踪它已传递的所有 Deferred 的聚合状态

如何使用 .progress() 通知任何关心 Parser 整体进度的人？例如

```
var parser = new Parser(json);
parser.progress(function(prog){console.log(prog}); 
```

这是我正在尝试做的事情：http: [//jsfiddle.net/ashanova/RjULA/2/](http://jsfiddle.net/ashanova/RjULA/2/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-22T14:52:58.427

用于[`deferred.notify()`](http://api.jquery.com/deferred.notify/)调用`progressCallbacks`. 例如：

```
function doSomething() {   
    var dfd = $.Deferred();

    var count = 0;
    var intervalId = setInterval(function() {
        dfd.notify(count++);
        count > 3 && clearInterval(intervalId);
    }, 500);

    return dfd.promise();
};

var promise = doSomething();

promise.progress(function(prog) {
  console.log(prog);
});​ 
```

[**演示**](http://jsfiddle.net/zfqJ8/2/)。

# linux - linux中的top -c命令过滤基于进程名列出的进程

> ID：12075591
> 
> 赞同：183
> 
> 时间：2012-08-22T14:39:32.883
> 
> 标签：linux, unix, process, top-command

```
top -c 
```

顶部列出了所有进程，有很好的选项可以使用选项 -u 按用户名过滤进程，但我想知道是否有任何简单的方法可以根据顶部输出的 COMMAND 列下列出的进程名来过滤进程。

例如，我想要 top -some option -substring of processname 和 top 显示仅在其命令名称中包含此子字符串的 pid

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-08-22T14:49:19.657

使用 pgrep 获取 pid 的匹配命令行：

```
top -c -p $(pgrep -d',' -f string_to_match_in_cmd_line) 
```

top`-p`需要一个逗号分隔的 pid 列表，所以我们`-d','`在 pgrep 中使用。pgrep 中的`-f`标志使其匹配命令行而不是程序名称。

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2014-06-17T21:25:05.930

它可以交互完成

运行后`top -c`，点击`o`并在列上编写过滤器，例如显示 COMMAND 列包含字符串 foo 的行，写入`COMMAND=foo`

如果您只想要一些基本输出，这可能就足够了：

```
top -bc |grep name_of_process 
```

* * *

## 回答 #3

> 赞同：116
> 
> 时间：2016-01-09T01:58:18.443

您可以`top`在它运行时添加过滤器。只需按`o`键，然后输入过滤器表达式。

例如，要监视包含字符串“java”的所有进程，请使用过滤器表达式`COMMAND=java`。

`o`您可以通过再次按来添加多个过滤器。

您可以按用户过滤`u`。用 清除所有过滤器`=`。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-06-17T20:50:59.267

@perreal 的命令效果很好！如果您忘记了，请分两步尝试...

示例：过滤顶部以仅显示名为 yakuake 的应用程序：

```
$ pgrep yakuake
1755

$ top -p 1755 
```

有用的顶部交互命令 'c' ：切换完整路径与命令名称 'k' ：按 PID 杀死 'F' ：过滤... 用箭头选择... 然后按 's' 设置排序

下面的答案也很好......我今天正在寻找但找不到它。谢谢

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-12-26T06:54:27.467

在 StackOverflow 上寻找了这么多答案后，我还没有看到适合我需要的答案。

也就是说，使用给定的关键字使 top 命令保持刷新，并且我们不必在新进程产生时一次又一次地 CTRL+C / top。

于是我做了一个新的...

这是无需重启的版本。

```
__keyword=name_of_process; (while :; do __arg=$(pgrep -d',' -f $__keyword); if [ -z "$__arg" ]; then top -u 65536 -n 1; else top -c -n 1 -p $__arg; fi; sleep 1; done;) 
```

修改 __keyword，它应该可以工作。（Ubuntu 2.6.38 测试）

2.14.2015 添加：上面的代码缺少系统工作负载部分。对于关心“平均负载”部分的人：

```
__keyword=name_of_process; (while :; do __arg=$(pgrep -d',' -f $__keyword); if [ -z "$__arg" ]; then top -u 65536 -n 1; else top -c -n 1 -p $__arg; fi; uptime; sleep 1; done;) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-12-23T12:43:16.013

在`htop`中，您可以简单地搜索

```
/process-name 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-10T14:21:12.207

我最终使用了一个带有以下代码的 shell 脚本：

```
#!/bin/bash

while [ 1 == 1 ]
do
    clear
    ps auxf |grep -ve "grep" |grep -E "MSG[^\ ]*" --color=auto
    sleep 5
done 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-21T08:45:30.487

当进程列表超过 20 个进程时，大多数答案在这里都失败了。那就是`top -p`期权限制。对于那些不支持使用`o`选项过滤的旧顶部的用户，这里是一个可编写脚本的示例，用于获取全屏/控制台输出（此输出中缺少摘要信息）。

```
__keyword="YOUR_FILTER" ; ( FILL=""; for i in  $( seq 1 $(stty size|cut -f1 -d" ")); do FILL=$'\n'$FILL; done ;  while :; do HSIZE=$(( $(stty size|cut -f1 -d" ")  - 1 ));  (top -bcn1 | grep "$__keyword"; echo "$FILL" )|head -n$HSIZE; sleep 1;done ) 
```

一些解释

```
__keyword = your grep filter keyword
HSIZE=console height
FILL=new lines to fill the screen if list is shorter than console height
top -bcn1 = batch, full commandline, repeat once 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-22T16:32:06.773

那这个呢？

```
top -c -p <PID> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-13T09:51:03.840

这个期望脚本将按名称过滤进程并显示新创建的进程。它基本上是通过为您发送 'o' 和 'COMMMAND=my_program' 来自动化用户与 top 的交互。类似于@nos 答案。

**文件：topname.exp**

```
#!/usr/bin/expect -- 

if {[llength $argv] < 1 } {
  send_user "Usage: topname process_name top_cmd_args \n"
  exit 1
}
set keyword [lindex $argv 0]

spawn top {*}[lrange $argv 1 end]

expect {

    -re .
     {
        send "o\r"
        expect "*add filter*"
        send "COMMAND=${keyword}\r"
        interact
    }

} 
```

所以你会像这样使用它：

./topname.exp my_program

./topname.exp java`# this filters java processes`

它还传递了 top 接受的其他标志，例如 -u

./topname.exp java -u root`# this filters java processes by root user`

./topname.exp java -u root -d 1`# this filters java processes by root user and delay top update by 1 second`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-16T19:18:11.243

对于 Mac 上的任何人，其中 top 不支持其他答案中显示的那种过滤（并且 pgrep args 略有不同）......此函数将为匹配第一个 arg 中的模式的进程启动 top （根据pgrep），并将任何其他参数传递给顶部。

```
function topnamed() {
    name=$1
    shift
    top -pid $(pgrep -d ' -pid ' -fi "$name") 99999999 $@
} 
```

（“-fi”中的“i”使其不区分大小写。）

显示任何“python”进程的基本示例：

```
topnamed python 
```

带有顶部附加参数的示例：

```
topnamed python -o mem 
```

除非我遗漏了某些东西，否则 pgrep （至少在当前版本的 MacOS 中）会添加一个尾随分隔符，即使手册页说它是“要在每个之间打印”。所以最后的 99999999 是一个虚拟值，以防止它爆炸。（也许有更好的解决方法。）

它的缺点（在其他答案中提到）仅包括启动时的进程。

# sql-server-2008 - 为电话警报消息格式化 SQL 查询的替代和最佳方法

> ID：12075592
> 
> 赞同：0
> 
> 时间：2012-08-22T14:39:33.533
> 
> 标签：sql-server-2008, tsql, alert, smartphone

我正在创建一个电子邮件警报，它很可能会被发送到智能手机（电子邮件或短信），并在我们遇到生产问题时用来唤醒人们。使用 EXEC msdb.dbo.sp_send_dbmail 发送电子邮件并提供执行存储过程的 @query 参数。

目前，报告看起来像这样，正如你所看到的，当事情环绕并且不是 Courier 字体时，它们看起来很糟糕。

格式化它的最佳方法是什么？用表格代替 HTML 电子邮件？是否有任何 T-SQL 实用程序可以做到这一点？这可能是 C# 而不是 T-SQL 的工作吗（我也可以编写代码）。

> ```
> > Rating     Airline    Feed             LocalDateTimeLastMsgRcvd
> > AlertMinutes CountMessageInLastHour AvgCountPerSameHour
> > ---------- ---------- ---------------- ------------------------ ------------ ---------------------- ------------------- GOOD       ABC        Feed1             2012-08-22 07:15                   10               
> > 420                 351 BAD        ABC        ABC-Feed2        
> > 2012-08-22 07:04                   10                     48          
> > 56 GOOD       ABC        ABC-Feed3         2012-08-22 06:40           
> > 75                      1                   1 GOOD       DEF       
> > DEF               2012-08-22 07:15                   10               
> > 597                 858 
> ```

我正在考虑三个想法：

1）使用T-SQL将每个元素写入临时表的不同行：

```
Row=1
Rating=Good
Feed=ABC 
LocalDateTimeLastMsgRcvd=2012-08-22 07:04 
etc.. 
```

.

2) 与上述类似，但使用 XML 包装器

3) 与上面类似，但使用`<TR><TD>`包装器来制作 HTML 表格。

我目前在这里查看选项 c：http: [//msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx)，它可能适用于大多数智能手机电子邮件，但可能不适用于 SMS。有些人会将其转发到他们的短信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:48:52.300

格式化不是众所周知的存储过程或 SQL。可能值得考虑 XML 输出，可能还有 XSLT。

[在当前输出中使用“pre”标签](http://www.w3schools.com/TAGs/tag_pre.asp)来保留间距和换行符。

我见过 SMS 消息需要 24 小时才能送达。它不经常发生在我身上，但它确实经常发生。（也许一年一次，而且我不像大多数人那样发短信。）

*   仅发送关键信息，并且
*   使其少于 160 个字符。

在电话上，我想我宁愿读你的 #1 之类的东西，但我想这可能取决于有多少信息是关键的。宽大的桌子——你的桌子让我觉得很宽——我很难在电话上阅读。

依赖人们将某些电子邮件转发到他们的 SMS 是否有意义实际上取决于应用程序。你是这里唯一能判断这是否可靠的人。

# maven - maven 确定插件的默认生命周期阶段

> ID：12075598
> 
> 赞同：1
> 
> 时间：2012-08-22T14:39:42.057
> 
> 标签：maven, plugins, lifecycle

我正在使用一个 Maven 插件，我正在尝试确定它绑定到的默认目标。是否有运行命令来解决这个问题？

我能够进入源代码并找到`@phase`注释，但如果可能的话，我希望能够从命令行中找出它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:58:15.730

您可以使用 maven-help-plugin 获取此类信息：

例如对于 maven-compiler-plugin：

```
mvn help:describe -DartifactId=maven-jar-plugin -DgroupId=org.apache.maven.plugins -Ddetail=true -Dgoal=jar 
```

# xml - 在 Notepad++ 中删除 XML 节点

> ID：12075600
> 
> 赞同：2
> 
> 时间：2012-08-22T14:39:45.100
> 
> 标签：xml, localization, notepad++, translation

我有一个具有以下结构的大型 XML。现在，我想摆脱`<tuv xml:lang="en-GB"><seg>CONTENT</seg></tuv>`节点，因此对于每个单元，只有 de-DE 部分保留 ( `<tuv xml:lang="de-DE"><seg>CONTENT</seg></tuv>`)。有没有办法用 Notepad++ 或其他工具做到这一点？我不是很喜欢编码，所以越简单越好。

我有的：

```
<tu tuid="ID_0">
<tuv xml:lang="en-GB">
<seg>Hello!</seg>
</tuv>
<tuv xml:lang="de-DE">
<seg>Hallo!</seg>
</tuv>
</tu>
<tu tuid="ID_1">
<tuv xml:lang="en-GB">
<seg>This is a test content! :)</seg>
</tuv>
<tuv xml:lang="de-DE">
<seg>Das ist ein Testinhalt! :)</seg>
</tuv>
</tu>
<tu tuid="ID_2">
<tuv xml:lang="en-GB">
<seg>All your base are belong tu us ...</seg>
</tuv>
<tuv xml:lang="de-DE">
<seg>Och nö, echt jetzt?</seg>
</tuv>
</tu> 
```

我想要的是：

```
<tu tuid="ID_0">
<tuv xml:lang="de-DE">
<seg>Hallo!</seg>
</tuv>
</tu>
<tu tuid="ID_1">
<tuv xml:lang="de-DE">
<seg>Das ist ein Testinhalt! :)</seg>
</tuv>
</tu>
<tu tuid="ID_2">
<tuv xml:lang="de-DE">
<seg>Och nö, echt jetzt?</seg>
</tuv>
</tu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T23:26:26.300

这可以通过 Notepad++ 正则表达式查找和搜索来完成。
点击`**Ctrl**`+`**H**`打开查找/替换对话框

*   找什么 ：`<tuv xml:lang="en-GB">\r\n.*\r\n.*\r\n`
*   替换为：（留空）
*   搜索方式：正则表达式
*   点击`Replace All`

# sql - Rails: where vs map(&:attribute)

> ID：12075602
> 
> 赞同：0
> 
> 时间：2012-08-22T14:39:53.993
> 
> 标签：sql, ruby-on-rails, activerecord, map

假设我们有 3 个用户`[User name="A"], [User name="B"], [User name="C"]`

（检查存在）之间是否有区别：

`if User.where(name: "A").first`

和

```
User.all.map(&:name).include? "A" 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:41:48.780

Using `where`only 通过 SQL 检索与名称匹配的用户。

映射加载所有用户，构建他们的姓名数组，并检查“A”。

对于少数用户，*性能*差异可以忽略不计，但内存和时间都会在某个点之后受到很大影响，并且`where`会*好得多*。在数据库中进行工作将是比天真地检索*所有*数据并在 Ruby 中进行工作更好的选择。

# forms - 交互式 PDF 表单验证

> ID：12075603
> 
> 赞同：1
> 
> 时间：2012-08-22T14:39:54.820
> 
> 标签：forms, validation, pdf, interactive

我希望有人可以帮助我解决我无法找到解决方案的挑战。我需要在 PDF 文档中创建一个交互式表单。主要问题之一是我有 3 个字段，我需要用户输入整数。在所有 3 个字段都填写完毕后，我需要确保结果等于 100%。这甚至是可能的吗？

我希望我的问题是有道理的。一般来说，我想我需要知道我是否可以将编程验证应用于 PDF 表单字段，并能够确定同一 PDF 文档中其他字段的值。

预先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:46:13.477

您可以使用[JavaScript for Acrobat](http://www.adobe.com/devnet/acrobat/javascript.html)来实现此目的。

# windows-8 - Winrt 包中的 System.Runtime.InteropServices.COMException

> ID：12075610
> 
> 赞同：2
> 
> 时间：2012-08-22T14:40:12.277
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winrt-xaml

我正在**Windows 8 (XAML)**中开发应用程序。

该应用程序在本地计算机上运行良好，但是当我在**发布模式下**创建一个包并测试该应用程序时，它崩溃了。

我在我的计算机中看到了应用程序日志并发现了这个错误

> 应用程序：MyApp.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.Runtime.InteropServices.COMException 堆栈：在 System.Threading.WinRTSynchronizationContext+Invoker.b__0(System.Object) 在 System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(System.对象）在 System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() 在 System.Threading。

# c# - Presenter 中的单元测试方法，MVP

> ID：12075613
> 
> 赞同：1
> 
> 时间：2012-08-22T14:40:19.167
> 
> 标签：c#, unit-testing, c#-4.0, moq, mvp

我试图测试一种组成控件集合的方法。它调用两种方法：

1.  复制原始集合。
2.  对新集合进行排序。

理想情况下，我希望能够传入一个集合并进行测试以查看它是否正确排序。我还想验证方法 1) 是否被调用了两次，请参见下面基于以下内容的尝试： [使用 RhinoMock 的示例](https://sqa.stackexchange.com/questions/1035/unit-testing-the-presenter-in-an-mvp-context-using-mock-objects)

当我尝试创建 MainPresenter 实例时，以下测试会产生错误。错误的一般要点是“无法从 Moq.Mock 转换为”FrazerMann.CsvImporter.UserInterface.IMainForm。+ IFileDialog 的一个类似的。

```
 [Test]
    public void ComposeCollectionOfControls_CallSequence_4Calls()
    {
        var main = new Mock<IMainForm>();
        var dialog = new Mock<IFileDialog>();
        var temp = new Mock<IMainPresenter>();

        temp.Setup(s => s.PopulateLists<Control>(It.IsAny<TableLayoutPanel>(), It.IsAny<List<Control>>()));

        var testObject = new MainPresenter(main.Object, dialog.Object);
        testObject.ComposeCollectionOfControls(It.IsAny<object>(), It.IsAny<EventArgs>());
        temp.Verify(v => v.PopulateLists<Control>(It.IsAny<TableLayoutPanel>(), It.IsAny<List<Control>>()), Times.Once());          
    } 
```

我想测试 ComposeCollectionOfControls 以确保 PopulateList() 被调用两次。

```
public interface IMainPresenter
{
    void PopulateLists<T>(TableLayoutPanel userInputs, List<T> container) where T : Control;
    int SortList<T>(T control1, T control2) where T : Control;
}

public class MainPresenter:IMainPresenter
{
    UserInputEntity inputs;

    IFileDialog _dialog;
    IMainForm _view;

    public MainPresenter(IMainForm view, IFileDialog dialog)
    {
        _view = view;
        _dialog = dialog;
        view.ComposeCollectionOfControls += ComposeCollectionOfControls;
        view.SelectCsvFilePath += SelectCsvFilePath;
        view.SelectErrorLogFilePath += SelectErrorLogFilePath;
        view.DataVerification += DataVerification;
    }

    public void ComposeCollectionOfControls(object sender, EventArgs e)
    {
        PopulateLists<TextBox>(_view.ColumnNameCtrls, _view.SortedColumnNameCtrls);
        _view.SortedColumnNameCtrls.Sort(SortList<TextBox>);
        PopulateLists<ComboBox>(_view.ColumnDataTypeCtrls, _view.SortedColumnDataTypeCtrls);
        _view.SortedColumnDataTypeCtrls.Sort(SortList<ComboBox>);
    }
} 
```

有人可以给我一些关于如何做到这一点的指示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:02:27.797

您看到的错误是因为您传递的是模拟类本身（类型为`Moq.Mock`），而不是 Moq 为您创建的模拟对象。

代替：

```
var testObject = new MainPresenter(main, dialog); 
```

你需要：

```
var testObject = new MainPresenter(main.Object, dialog.Object); 
```

* * *

顺便说一句，显式验证诸如对特定方法的调用次数之类的事情通常被认为是不好的做法。这会导致您的测试与特定实现之间的紧密耦合，从而导致脆弱的测试。

通过测试调用一个方法的次数，当代码的最终结果仍然正确时，您通常会在重构某些代码后发现测试失败。

最好测试所涉及对象的最终状态，并使您的测试不知道该状态是如何达到的。

# html - html选择按值排序的选项ie

> ID：12075617
> 
> 赞同：1
> 
> 时间：2012-08-22T14:40:33.817
> 
> 标签：html, internet-explorer, sorting, select, option

我有以下问题：我的下拉菜单应该按字母顺序排列，并且可以在 Firefox 中使用，但 Internet Explorer 似乎按值排序项目而不是按顺序排列 - 我该如何更改？（我无法更改值，因为它们是 ID）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:17:11.150

I've noticed the same behavior. Safari and Firefox keep the list elements ordered as provided in the HTML code, while Internet Explorer does sort them by value - which i'd consider a bug.

This happens with the latest versions of these browsers as of september 2012.

There seem to be no information regarding this issue... like everyone is using sequential values for their combos and lists.

# php - 编码风格：语句内的函数调用

> ID：12075618
> 
> 赞同：2
> 
> 时间：2012-08-22T14:40:38.263
> 
> 标签：php, optimization, coding-style

好的，首先，我怀疑这将被关闭。

是的，我有一个关于在语句中使用函数调用而不是首先分配给变量的问题。

例如：

*（代码在php中，但问题普遍适用。另外，代码过于简化）*

```
if (myAmazingFunction() === true) {
    // do something amazing
} 
```

代替

```
$amazingresult = myAmazingFuncton();
if ($amazingResult === true) {
    // do something amazing
} 
```

问题是：

1.  每种方法是否有任何性能或其他潜在的利弊
2.  从风格上讲，是否有任何一种方法被认为比另一种更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:45:36.300

在大多数语言中，不会有性能差异。在第一种情况下，编译器会先为函数调用的结果分配存储空间，然后再检查它是否为`true`. 在第二种情况下，您只是将其明确化。

如果您正在调试，有时第二种形式更容易，因为您可以在第二行设置断点并在进行比较之前检查函数返回的值 - 但随后您可以通过执行路径看到函数的结果代码无论如何都在您给出的示例中。正如 Zac 在他的评论中所说，您还可以在不重新运行函数的情况下重新使用该值。

从风格上讲，这在很大程度上是主观的。我在这里要说的唯一一件事是，如果您的变量名称使函数输出的目的明确，那么您可能会添加一些东西以使其他人能够轻松理解您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:08:30.510

@DavidM 的回答是正确的。但是，我想从风格上补充一点，我认为这取决于函数的名称及其上下文。

例子：

```
if ($food->tastesGood()) {
    echo 'Mmmm!';
}

// vs.

$foodTastesGood = $food->tastesGood();
if ($foodTastesGood) {
    echo 'Mmmm!';
} 
```

在这种情况下，很明显方法的返回值将`tastesGood()`是来自方法名称及其上下文的布尔值。使用临时变量不会给你的代码增加任何东西，只会让它变得多余且一目了然。另外，如果变量在使用之前没有定义，那么你必须去找到定义来理解条件。在这些情况下，我会说使用变量会更糟。

另一个例子：

```
if ($dishes->wash() !== FALSE) {
    echo 'Sparkly!';
}

// vs.

$dishesAreClean = $dishes->wash() !== FALSE;
if ($dishesAreClean) {
    echo 'Sparkly!';
} 
```

在这种情况下，我们不能`wash()`从它的名称中真正推断出方法的返回类型，事实上，它似乎在成功和`FALSE`错误时都不返回任何内容。然后检查盘子是否干净需要我们确保没有错误，但第一种情况不会产生特别可读或自记录的代码。然而，第二种情况通过临时变量添加了关于正在发生的事情的非常明确的信息。在这些情况下，我会说使用变量会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:45:44.660

**每种方法是否有任何性能或其他潜在的利弊**

在性能方面，分配一个仅在 if 条件中使用的额外变量将使用额外的内存和一行无用的代码。所以它会使用更多的内存。会引人注目吗？可能不是。

**从风格上讲，是否有任何方法被认为是不好的**

在您的语句中使用该方法`if`是完全有效的，我认为这是一种更好的方法，因为您可以阅读代码并准确查看`if`条件中正在测试的值。无需查找变量并搜索受影响的位置。

# jquery-ui - Jquery ui 选项卡操作

> ID：12075623
> 
> 赞同：0
> 
> 时间：2012-08-22T14:40:44.020
> 
> 标签：jquery-ui

我的页面中有 3 个 jquery ui 标签。对于每个选项卡，我调用了一些函数。

$( "#tabs" ).tabs({

```
 select: function(event, ui) {
            var text = ui.tab.text;
            $("#tab1, #tab2, #tab3").empty();
            switch(text){
                case 'tab1':
                    //function
                    break;
                case 'tab2':
                    //function
                    break;
                case 'tab3':
                    //function
                    break;
            }
        }
    }); 
```

在某些情况下，我必须打开 tab2，例如，通过 #tab1 div 中的按钮，但使用不同的逻辑。从这里我使用：

```
$("#tab2").html("text tab2");
$("#tabs" ).tabs("select", 1); 
```

此操作将 'text tab2' 添加到 #tab2 块，但 'tabs(select, 1)' 事件打开第二个选项卡并执行上述 switch case 'tab2' 中的功能。

如何在不使用“选择”选项的情况下在选项卡中添加文本并打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:16:15.667

所以，我没有找到任何解决这个问题的方法，但我通过另一种方法解决了这个问题，通过发送到选项卡的 cookie 变量禁用“select case tab2 函数”。

```
$("#tabs").tabs({
select: function(event, ui) {
        var text = ui.tab.text;
        var type = "";
        $("#tab1, #tab2, #tab3").empty();
        var cook = $(this).tabs("option", "cookie");
        if(cook){
            type = cook.type;
        }
        switch(text){
            case 'tab1':
                //function
                break;
            case 'tab2':
                if(type!='extern'){
                      //function
                }
                break;
            case 'tab3':
                //function
                break;
        }
        //remove the cookie
        $(this).tabs({cookie: {type: ""}});
    }
}); 
```

要通过另一个链接打开选项卡，使用 'selected' 选项而不通过 case 'tab2'：

```
$("#tab2").html("text tab2");
$("#tabs" ).tabs({cookie: {type: "extern"}});
$("#tabs" ).tabs("select", 1); 
```

# c# - 如何让 TKageyu.Utils 在我的项目中工作？（用于提取 256 像素图标）

> ID：12075625
> 
> 赞同：0
> 
> 时间：2012-08-22T14:40:50.243
> 
> 标签：c#, .net

我正在用 C#（.net 4.0，VS 2012）制作一个小应用程序，作为其中的一部分，我需要提取另一个 EXE 文件的图标。我发现我可以将 ExtractVistaIcon 与 TKageyu.Utils 结合使用。问题是，没有像 VS.net 2012 所说的那样的 TKageyu.Utils。

```
using TKageyu.Utils; 
```

结果：

> “找不到类型或命名空间名称‘TKageyu’”

我该怎么办？我在哪里可以得到它？

* * *

我尝试使用它的代码：

```
using (TKageyu.Utils.IconExtractor IconEx = new TKageyu.Utils.IconExtractor(fullPath))
{
      Icon icoAppIcon = IconEx.GetIcon(0); // Because standard System.Drawing.Icon.ExtractAssociatedIcon() returns ONLY 32x32.
      picboxAppLogo.Image = ExtractVistaIcon(icoAppIcon);
} 
```

原始代码取自： [在应用程序中使用 256 x 256 Vista 图标](https://stackoverflow.com/questions/220465/using-256-x-256-vista-icon-in-application) （当我开始工作时将由我编辑）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:07:31.173

感谢@Simon McKenzie，我找到了解决问题的方法：

1.  转到[http://www.codeproject.com/Articles/26824/Extract-icons-from-EXE-or-DLL-files](http://www.codeproject.com/Articles/26824/Extract-icons-from-EXE-or-DLL-files) 下载应用程序
2.  在 Visual Studio 中打开 SLN 文件（我在 2012 年做过）
3.  打开 Form1.cs，复制名称空间和包含（只是为了确保..）
4.  转到您的项目并将命名空间粘贴到您需要的文件中，同时检查您是否拥有其他文件中所需的命名空间的所有包含。
5.  用它！:)

我这样使用它：

```
using (TKageyu.Utils.IconExtractor IconEx = new TKageyu.Utils.IconExtractor(fullPath))
        {
            Icon icoAppIcon = IconEx.GetIcon(0); // Because standard System.Drawing.Icon.ExtractAssociatedIcon() returns ONLY 32x32.
            Bitmap hBitmap = ExtractVistaIcon(icoAppIcon);
            IntPtr hLBitmap = hBitmap.GetHbitmap();
            ImageSource wBitmap = Imaging.CreateBitmapSourceFromHBitmap(hLBitmap, IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());
            IconBox_1.Source = wBitmap;
            IconBox_S.Source = wBitmap;
            IconBox_C.Source = wBitmap;
            IconBox_W.Source = wBitmap;
        } 
```

# c# - 定义实现泛型的接口依赖

> ID：12075627
> 
> 赞同：1
> 
> 时间：2012-08-22T14:40:58.170
> 
> 标签：c#, .net, generics

对于许多人来说，这将是泛型 101，但下面是示例代码，因此我可以更好地理解。

```
public interface IRecordedItemsProcessor<T>
{
    ObservableCollection<RecordedItem> Load(string name);
    void Save();
    RecordedItem Parse(T itemToParse);
}

public class FileLoadingProcessor : IRecordedItemsProcessor<string>
{
    public ObservableCollection<RecordedItem> Load(string name)
    {
    }

    public void Save()
    {
    }

    public RecordedItem Parse(string itemToParse)
    {
    }
}

public class MyClass
{
    public MyClass(IRecordedItemsProcessor<T> processor)
    {

    }

} 
```

问题是它`MyClass`需要依赖`IRecordedItemsProcessor<T>`但不会编译，因为它不知道是什么`T`。如何解决？让 MyClass 实现 a 看起来很奇怪，因为它需要做的就是调用 Load/Save

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:43:43.550

**第一个解决方案**是最简单的：将泛型声明提升到类级别，例如

```
public class MyClass<T>
{
    public MyClass(IRecordedItemsProcessor<T> processor)
    {

    }
} 
```

然后你可以实例化`MyClass`如下：

```
var myClass = new MyClass<string>(new FileLoadingProcessor());
Console.WriteLine (myClass); 
```

**第二种解决方案**是从构造函数中删除通用输入并推断类型。然后你不需要从调用中准确指定泛型。类声明将如下所示：

```
public class MyClass
{
    public void Process<T>(IRecordedItemsProcessor<T> processor)
    {

    }
} 
```

然后你可以简单地打电话

```
var my = new MyClass();
my.Process(new FileLoadingProcessor()); 
```

想法是您始终需要显式指定类级别的泛型，但编译器可以推断方法级别的泛型。

**第三种解决方案**是将创建机制封装在内部`MyClassFactory`。这是相当灵活的，但它可能看起来有点复杂，因为`IRecordedItemsProcessor<T>`没有在类级别定义泛型的后代，所以我们应该去实现接口并获取泛型类型。只有这样我们才能构造 Generic `MyClass`。清单如下：

```
public class MyClassFactory
{
    public MyClass<T> MakeMyClassFor<T>(IRecordedItemsProcessor<T> processor)
    {
        var processorGenericType = processor.GetType()
                                            .GetInterfaces()
                                            .Single(intr=>intr.Name == "IRecordedItemsProcessor`1")
                                            .GetGenericArguments()[0];
        var myClassType = typeof(MyClass<>).MakeGenericType(processorGenericType);
        return Activator.CreateInstance(myClassType, processor) as MyClass<T>;
    }
} 
```

现在您可以非常简单地创建 MyClass

```
 var myClassFactory = new MyClassFactory();
 var res = myClassFactory.MakeMyClassFor(new FileLoadingProcessor());
 Console.WriteLine (res); 
```

所有这三种方法都有其优点和缺点。考虑考虑使用它们的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:34:59.670

您可以从非通用标记接口继承，这消除了在您的类中了解 T 的需要：

```
public interface IRecordedItemsProcessor 
{
}

public interface IRecordedItemsProcessor<T> : IRecordedItemsProcessor
{
    ObservableCollection<RecordedItem> Load(string name);
    void Save();
    RecordedItem Parse(T itemToParse);
} 
```

然后你可以使用任何 IRecordedItemsProcessor 像：

```
public class MyClass
{
    public MyClass(IRecordedItemsProcessor processor)
    {

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:59:38.663

您可以执行以下操作：

1.  创建一个新接口`IRecordedItemsProcessor`（非泛型）
2.  移动`Load`到`Save`这里`IRecordedItemsProcessor`
3.  从此`IRecordedItemsProcessor<T>`继承`IRecordedItemsProcessor`
4.  在其构造函数中生成`MyClass`期望`IRecordedItemsProcessor`

这清楚地表明，`MyClass`它并不关心处理器可能能够解析什么类型，甚至根本不关心它可以解析事物——它只知道它可以保存和加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:00:58.257

所写的泛型类型是在`MyClass`构造函数上声明的，这意味着泛型类型必须在`MyClass`级别定义：

```
public class MyClass<T>
{
    public MyClass(IRecordedItemsProcessor<T> processor)
    {

    }
} 
```

但是，如果泛型类型是在方法级别声明的，则只需在方法级别定义它：

```
public class MyClass
{
    public void MyMethod<T>( IRecordedItemsProcessor<T> processor )
    {

    }
} 
```

**编辑**
根据您的评论：

> 我想要一个可以调用加载/保存方法但不担心 T 的类。

然后你需要 2 个接口：1 个用于加载/保存，然后一个用于解析。在这种情况下，您可以使用继承：

```
public interface IRecordedItems
{
    ObservableCollection<RecordedItem> Load( string name );
    void Save();
}

public interface IRecordedItemsProcessor<T> : IRecordedItems
{
    RecordedItem Parse( T itemToParse );
}

public class MyClass : IRecordedItems
{
    #region Implementation of IRecordedItems

    public ObservableCollection<RecordedItem> Load( string name )
    {
        throw new NotImplementedException();
    }

    public void Save()
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

**编辑 2**
根据您的[要点示例](https://gist.github.com/3426916)，可以将类型依赖项移出接口并直接移入接口方法：

```
public class RecordedItem {}

public interface IRecordedItemsProcessor
{
    ObservableCollection<RecordedItem> Load( string name );

    void Save();

    RecordedItem Parse<T>( T itemToParse );
}

public class MyClass
{
    private readonly IRecordedItemsProcessor _processor;

    public MyClass( IRecordedItemsProcessor processor )
    {
        _processor = processor;

        processor.Parse<string>( "foo" );
        processor.Parse<int>( 10 );
        processor.Parse<RecordedItem>( new RecordedItem() );
    }
} 
```

# silverlight - 在 XAML 中绑定 Run 对象

> ID：12075631
> 
> 赞同：0
> 
> 时间：2012-08-22T14:41:13.510
> 
> 标签：silverlight, xaml, embedded, silverlight-3.0

我有 2 个问题。

第一个。我正在将 Silverlight 用于 Windows Embedded Compact 7，但我遇到了一些绑定问题。

我有这样的模板

```
<Style TargetType="RadioButton" x:Key="VoltageTab">
    <Setter Property="Width" Value="95"/>
    <Setter Property="Height" Value="61"/>
    <Setter Property="Margin" Value="193,0,192,3"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
    <Setter Property="VerticalAlignment" Value="Bottom"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid Background="#00000000">
                            <Image x:Name="UnCheckedimg" Source="12.png"/>
                            <Image x:Name="Checkedimg" Visibility="Collapsed" Source="11.png"/>
                            <TextBlock x:Name="ModeName" FontSize="20" FontFamily="Alternate_Gothic_No.ttf#Alternate-Gothic-No3" Text="VOLTAGE" Foreground="#D25A32" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,4,0,0" />
                            <TextBlock  x:Name="ModeValue" FontSize="20" FontFamily="Alternate_Gothic_No.ttf#Alternate-Gothic-No3" Text="{TemplateBinding Content}" HorizontalAlignment="Center"  VerticalAlignment="Bottom" Margin="0,0,0,2"/>
                            <TextBlock x:Name="ModeNameChecked" Visibility="Collapsed" FontSize="34" FontFamily="Alternate_Gothic_No.ttf#Alternate-Gothic-No3" Text="VOLTAGE" Foreground="Black" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,0,0" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

我使用 TemplateBinding 来绑定 ModeValue 文本块，但我需要另一个绑定来绑定 ModeName。有人可以指出我该怎么做吗？

2.  我有另一种风格

编辑：第 2 种风格贴在下面，因为编辑没有让我把它贴在这里

如果我只将文本放入内容中，它可以正常工作，但我希望你运行对象，以便我可以格式化按钮内的文本。

这可能吗？如果没有，还有其他方法可以实现吗？

请记住，我使用 Silverlight For Windows Embedded。

最好的问候，卢卡

* * *

```
 <Style x:Key="FunctionSelectButton" TargetType="RadioButton">
    <Setter Property="Width" Value="154"/>
    <Setter Property="Height" Value="61"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid Background="#00000000">
                        <Image x:Name="NormalImg" Source="mode_unpressed.png" Stretch="None"/>
                        <TextBlock x:Name="NormalText" Foreground="#D25A32" FontSize="26" FontFamily="Alternate_Gothic_No.ttf#Alternate-Gothic-No3" HorizontalAlignment="Center" Text="{TemplateBinding Content}" VerticalAlignment="Center" Margin="0,0,0,0"></TextBlock>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

更容易表示的图像->![图片](../Images/4a1c7aede04f70006c9481654cd9a031.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:52:27.330

要回答您的第一个问题，[请看这里](http://www.codeproject.com/Articles/177974/How-to-implement-Template-Binding-in-Silverlight-C)。

不过，您的第二个问题，我不确定我是否完全理解问题是什么，但我认为您正在寻找的是将其设置为带有 contenttemplate 的 ContentPresenter，而不是像；

```
<Style x:Key="FunctionSelectButton" TargetType="RadioButton">
    <Setter Property="Width" Value="154"/>
    <Setter Property="Height" Value="61"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid>
                        <Image x:Name="NormalImg" Source="mode_unpressed.png" Stretch="None"/>
                        <ContentPresenter x:Name="contentPresenter"
                                          Margin="{TemplateBinding Padding}"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}" />

<!--
<TextBlock x:Name="NormalText" Foreground="#D25A32" FontSize="26" FontFamily="Alternate_Gothic_No.ttf#Alternate-Gothic-No3" HorizontalAlignment="Center" Text="{TemplateBinding Content}" VerticalAlignment="Center" Margin="0,0,0,0"></TextBlock>
-->
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

* * *

```
<Button Content="{Binding RPE-2WIRE}" Style="{StaticResource FunctionSelectButton}" FontFamily="Alternate_Gothic_No.ttf#Alternate-Gothic-No3" Foreground="#D25A32" FontSize="26" /> 
```

至少我认为你是这么说的：）

# java - 向 WinSCP 提供命令

> ID：12075634
> 
> 赞同：0
> 
> 时间：2012-08-22T14:41:24.100
> 
> 标签：java, runtime.exec, winscp

我有启动 WinSCP 工具进程并连接到 Unix 机器然后调用位于 Unix 机器上的 xxxx.exe 的 Java 代码。

问题是 xxxx.exe 接受 File 类型的参数。所以我需要将它上传到远程机器，然后传递给 xxxx.exe.... 这是失败的，我试图尽可能避免临时文件夹。

小码

```
Process p = Runtime.getRuntime().exec("rTool\\WinSCP.com /script=folder\\code.txt < C:\\FILESTOUPLOADS\\upload1.txt" ); 
```

登录信息`code.txt`按以下方式输入`WinSCP.com`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:52:10.407

文件重定向（即“<”符号）由`Runtime.exec()`不使用的命令处理器处理。正如评论中已经提到的，首先使用 exec 的 String[] 版本，这样您就不会遇到命令解析问题。其次，您需要调用命令处理器来处理文件重定向（例如使用“cmd.exe /k”），或者在java 中[自己处理。](https://stackoverflow.com/questions/2969766/process-requires-redirected-input)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:54:45.687

为什么不使用`ProcessBuilder` 更改工作目录并从该目录设置文件的路径

> public ProcessBuilder directory（文件目录）设置此流程构建器的工作目录。随后由该对象的 start() 方法启动的子进程将使用它作为其工作目录。参数可以为null——表示使用当前Java进程的工作目录，通常是系统属性user.dir命名的目录，作为子进程的工作目录。
> 
> 参数：directory - 新的工作目录返回：此流程构建器

# javascript - 深入了解 Ember.js

> ID：12075639
> 
> 赞同：6
> 
> 时间：2012-08-22T14:41:47.517
> 
> 标签：javascript, ember.js

我刚刚被告知我必须从事的一些项目使用 Ember.js 框架。它看起来很有趣，我想获得更多关于它的知识。我也看过官方网站，但我认为仍然缺乏适合初学者的教程。此外，我只是对 Javascript 有基本的了解。我应该先从哪里开始？Javascript 还是直接使用 Ember.js？

编辑：我希望看到所有 Javascript 开发人员和初学者的建议，他们是如何开始学习 Javascript 的。

我打算做的是，阅读 Eloquent Javascript 并直接进入 Ember.js。如果我被困在任何事情上，我可以参考 SO。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T16:02:45.287

就个人而言，作为@sl7_7，我开始使用 Ember 学习 JS。所以我的回答应该是 Ember 特定的。

我通过阅读我找到的一些教程、指南和示例来学习它们，但主要是通过阅读源代码。

有很多可用的示例，但有时很难找到。首先，有用的博客列表：

*   [https://github.com/emberjs/ember.js/wiki](https://github.com/emberjs/ember.js/wiki)
*   [http://emberjs.com/](http://emberjs.com/)
*   [https://kippt.com/zaplitny/emberjs](https://kippt.com/zaplitny/emberjs)
*   [http://trek.github.com/](http://trek.github.com/)你**应该**阅读它
*   [http://emberjs.tumblr.com/](http://emberjs.tumblr.com/)（好像还没更新？）
*   [http://codebrief.com/](http://codebrief.com/) - Gordon L. Hempton 撰写的博客
*   [http://www.cerebris.com/blog/](http://www.cerebris.com/blog/) - 由 Dan Gebhardt 撰写
*   [http://www.emberist.com/](http://www.emberist.com/) - 另一个非常有趣的 Ember 博客，由 Peter Wagenet 撰写
*   [http://www.tuanleaded.com/blog/2012/04/getting-started-with-ember-js-the-missing-to-dos-manual/](http://www.tuanleaded.com/blog/2012/04/getting-started-with-ember-js-the-missing-to-dos-manual/)

然后，一些例子：

*   [https://github.com/bazzel/ember-sample2](https://github.com/bazzel/ember-sample2) - 一个用 Coffeescript 编写的简单且最新的 Rails 和 Ember 示例。它包含一个有用的`Ember.Router`例子
*   [https://github.com/elucid/ember-tunes](https://github.com/elucid/ember-tunes) - 另一个简单的 Ember 示例
*   [https://github.com/ghempton/ember-router-example](https://github.com/ghempton/ember-router-example) - 一个`Ember.Router`例子
*   [https://github.com/pangratz/dashboard/](https://github.com/pangratz/dashboard/) - 一个简单的 Github 仪表板
*   [https://speakerdeck.com/bestie/tastebuds-radio-a-rapidly-](https://speakerdeck.com/bestie/tastebuds-radio-a-rapidly-developed-ember-dot-js-app) Developed-ember-dot-js -app - “快速开发的应用程序”上的扬声器平台

我可能忘记了很多网站，所以只需添加评论，我会更新我的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T14:48:37.467

你必须先学习javascript。`Ember.js`是 javascript 的库，因此是用 javascript 编写的，因此是通过 javascript 接口的。开始`ember.js`是先跑步，然后才能走路。

也就是说，这里有一些资源可以帮助您入门：

**Javascript：**

[Mozilla 教程](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)

**Ember.js：**

[土坯教程](http://www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T14:35:47.107

你最好先学习 Javascript。你可以前往Richard Bovell 的[Javascript.is(sexy)](http://javascriptissexy.com/)。他在教授 JS 基本和高级概念方面做得非常出色。

# excel - Excel：如何在其他单元格中使用条件格式？

> ID：12075641
> 
> 赞同：1
> 
> 时间：2012-08-22T14:41:48.133
> 
> 标签：excel

如何在单元格 A1 中使用条件格式 if `B1 = "foo"`. 例如，`B1 = IF("FOO";;)`A1 是**黄色**。是 Excel 2007。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:50:04.253

对单元格 A1 使用以下分生孢子格式公式

```
=($B$1="Foo") 
```

![在此处输入图像描述](../Images/3b9ac0cdaf5580e8ae7d16f2111813d7.png)

*请注意*，如果要将其应用于整个 A 列，请进行以下两项调整。

1 - 更改公式以从公式中的行中删除 $ 以便它读取`=($B1="Foo")`

2 - 确保格式应用于整个列![在此处输入图像描述](../Images/f8d50f8a53d3f108a35492936033c6e0.png)

# ssh - 如何通过 SSH 启动进程，使其继续运行？

> ID：12075642
> 
> 赞同：7
> 
> 时间：2012-08-22T14:41:50.387
> 
> 标签：ssh, amazon-ec2, sh, bitnami

我有三个文件：monitor.sh，它启动 python 脚本：

```
sudo python ./webCheck &
sudo python ./apiCheck & 
```

和其他人，webCheck 和 apiCheck：它应该在我关闭终端后在后台运行。它无限循环地检查我的其他网站的可用性。

我无法让它工作，我正在尝试 nohup，但无法正确使用语法。webCheck 必须使用 sudo 运行。nohup 是否也包含在 sh 脚本中？我想因为 monitor.sh 应该只是启动其他两个，所以一个不需要 nohup。

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T14:50:09.190

您应该能够使用：

`sudo nohup python ./webCheck &`

`sudo nohup python ./apiCheck &`

我认为您的 monitor.sh 不需要它，因为启动其他两个需要相对较短的时间。但是，如果这两项检查将成为 monitor.sh 的子项，我并不肯定，这最终可能会成为一个问题。

# c# - 用 Kinect Skeleton 关节模拟多点触控（SDK1.5）

> ID：12075644
> 
> 赞同：3
> 
> 时间：2012-08-22T14:41:52.963
> 
> 标签：c#, wpf, image-manipulation, kinect

> **可能重复：**
> [C# 使用 Kinect 模拟多点触控](https://stackoverflow.com/questions/11454572/c-sharp-simulating-multitouch-with-kinect)

我正在尝试使用 WPF 和 Kinect SDK 1.5 编写图像处理应用程序。

在网上看了一些文章，我看到可以使用 WPF Touch 提供的方法来操作图像，但是我不知道如何将我的骨架的手关节与多点触控点相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:41:58.860

请参阅[C# Simulating multitouch with Kinect](https://stackoverflow.com/questions/11454572/c-sharp-simulating-multitouch-with-kinect)因为它是重复的，并查看[anathonlines 的答案](https://stackoverflow.com/questions/11454572/c-sharp-simulating-multitouch-with-kinect/11473131#11473131)：

“您想要的是[将消息发送](https://stackoverflow.com/questions/5083954/send-message-in-c-sharp)到相关窗口。您需要编写的消息就是消息。您可以在[此处](http://social.msdn.microsoft.com/Forums/en-US/tabletandtouch/thread/e5c87731-86e4-4c25-9278-86cb0dd4ff8a/)[`WM_TOUCH`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317341%28v=vs.85%29.aspx)找到一个非常有用的讨论线程。”`WM_TOUCH`

# android - 检测 BaseAdapter.notifyDataSetChanged() 何时完成

> ID：12075645
> 
> 赞同：32
> 
> 时间：2012-08-22T14:41:54.163
> 
> 标签：android, baseadapter

我想知道什么时候`BaseAdapter.notifyDataSetChanged()`完成，然后做一些事情。我的代码：

```
BaseAdapter.notifyDataSetChanged();  
mScroller.startScroll(oldX, 0, dx, 0); 
```

`mScroller`完成前滚动 `notifyDataSetChanged()`。我想在完成后`mScroller`滚动到。`oldX``notifyDataSetChanged()`

请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-08-16T20:49:34.390

`BaseAdapter`支持注册一个`DataSetObserver`可以监听`onChanged`事件的位置，而不是扩展。

该`notifyDataSetChanged`方法将导致此事件触发。

```
adapter.registerDataSetObserver(new DataSetObserver() {
    @Override
    public void onChanged() {
        // ...
    }
});

...

adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-23T06:33:32.700

我有同样的问题，试试这个对我来说非常有效。您正在覆盖方法 notifyDataSetChanged()。您可以在 Adapter 类中执行此操作。只需复制我发布的代码并将我 setSelection() 的行替换为您需要做的任何事情。

```
@Override
public void notifyDataSetChanged()
{
    super.notifyDataSetChanged();

    parentGlobal.setSelection(this.getCount() - 1);  //This is how we start Activity fully scrolled to bottom
} 
```

话虽如此，如果您想知道，“parentGlobal”是我在 Activity 中将 Adapter 设置为的 ListView。在适配器的构造函数中，我传入了 ListView，然后将其设为“全局”。如果“全球”不是 Java 术语，我深表歉意，我来自 C++ 世界。

//进入活动：

```
lv_main = (ListView) findViewById(R.id.listView_conversation);
    adapter_main = new Adapter_Conversation(ConversationActivity.this, R.layout.layout_list_conversation,
            list_main_UI, lv_main, main_list_item_margin_px);
    lv_main.setAdapter(adapter_main); 
```

//进入适配器

```
public Adapter_Conversation(AppCompatActivity activity, @LayoutRes int resource,
                            ArrayList<Adapter_GetSet_Conversation> list_conversation, ListView lv_main,
                            int item_margin_px) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-19T04:36:48.197

这已经晚了，但可能对以后来的人有帮助。

如果你熟悉`RxJava2`和`Completable`，你可以检测`notifyDataSetChanged()`到 UI 上的任何操作是否完成。

```
 Completable.fromAction {
            // notifyDataSetChanged() here
        }
                .subscribe(object : DisposableCompletableObserver() {
                    override fun onComplete() {
                        recyclerView.scrollTo(position)
                    }

                    override fun onError(e: Throwable) {
                        // handle error here
                    }
                }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-14T08:20:34.423

我遇到了同样的问题，我最终这样做了-

```
 BaseAdapter.notifyDataSetChanged();  
 new Handler().postDelayed(new Runnable() {
      @Override
              public void run() {
                 mScroller.startScroll(oldX, 0, dx, 0);
                //write scroll code here
               }
       },50);  //scroll after 50ms 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-21T09:56:58.913

请参阅以下（更现代的）带有 kotlin 扩展功能的实现：

```
fun <VH : ViewHolder> RecyclerView.Adapter<VH>.notifyDataSetChanged(
    completion: () -> Unit
) {
    val adapter = this
    val observer = object : RecyclerView.AdapterDataObserver() {
        override fun onChanged() {
            super.onChanged()
            adapter.unregisterAdapterDataObserver(this)
            completion.invoke()
        }
    }
    registerAdapterDataObserver(observer)
    notifyDataSetChanged()
} 
```

# php - 想让 jquery 执行多个操作还是有其他方法

> ID：12075647
> 
> 赞同：0
> 
> 时间：2012-08-22T14:42:06.870
> 
> 标签：php, jquery, html

基于上一个[问题](https://stackoverflow.com/questions/12063625/how-to-show-hidden-data-types-in-php-loop)，

是否可以让 jquery 按钮一次做两件事？现在我有这个：

```
<td>
 <a href="#'.$row['abstractid'].'">
   <button onClick="$(\'.hide\').toggle();">Read Abstract
   </button>
 </a>
</td> 
```

这有效（耶！） - 它既跳转到并显示使用该数据库 ID 号隐藏的 div - 但由于这些结果是循环的，它会显示所有这些结果。现在，它转到页面上的正确位置，但它仍然显示所有结果，而不仅仅是一个结果。

我可以制作这个按钮，所以 onClick 它不仅可以切换隐藏**，还可以**设置要拉取的查询的数据库 ID 号，因此它只显示一组结果 - 或者只显示一个数据库 ID 集而隐藏其他数据库 ID 集？我是否必须将表 id 设置为数据库 id 并赋予该类 hidden 而不是将其放入 div 中？

示例：现在是：

```
<div id="'.$row['abstractid'].'" style="display:none;" class="hide">
<table>
stuff
</table> 
```

但我需要做到吗

```
<table id="'.$row['abstractid'].'" style="display:none;" class="hide"> 
```

反而？这在理论上对我来说是有道理的，但我认为我的 CSS 必须有点创意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:58:09.393

你可以使用 `onclick="function() {$(\'.hide\').toggle();$(\'.hide\').toggle();}"`

但是，我不建议这样做。我的建议是：

`<button class="read-abstract">Read Abstract</button>`

然后

```
<script>
$(document).ready( function() {
    $(".read-abstract").live( "click", function() {
        // do stuff here
    });
}
</script> 
```

有关不显眼的 Javascript 的更多信息：[http ://en.wikipedia.org/wiki/Unobtrusive_JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

关于显示和隐藏值，我总是这样处理：

HTML：

```
<button data-hide-id="1" class="read-abstract">Read Abstract</button>
<table id="table-1" class="hide">
    <tr>
        <td>Contents will show hide on click of read abstract</td>
    </tr>
</table> 
```

JS（在`<head>`）：

```
<script type="text/javascript">
$(document).ready( function() {
    $(".read-abstract").live( "click", function() {
        $("#table-" + $(this).data("hide-id") ).toggle();
    });
}
</script> 
```

工作示例：http: [//jsfiddle.net/sZREt/](http://jsfiddle.net/sZREt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:55:11.750

1.  您使用“隐藏”类切换所有项目，而不仅仅是特定项目
2.  您不需要将按钮放入锚点（我什至不知道是否允许）。如果你需要它看起来像一个按钮，你可以使用 CSS。
3.  ID 必须以字母而不是数字开头。我猜你`abstractid`是一个数字，所以我在前面`abstr`
4.  如果你给一个元素类`hide`（可能隐藏它），那么你真的不需要内联样式。

这是更新的代码：

```
<a href="#abstr'.$row['abstractid'].'" onclick="$(\'#abstr'.$row['abstractid'].'\').toggle()">Read Abstract</a>

<table id="abstr'.$row['abstractid'].'" class="hide"> 
```

# javascript - 在fancyBox中打开网站的不同背景

> ID：12075648
> 
> 赞同：0
> 
> 时间：2012-08-22T14:42:08.650
> 
> 标签：javascript, fancybox

我想在fancyBox 中打开一个页面。页面something.php 有黑色背景，但如果我通过fancyBox 打开something.php 页面的背景是白色的。你有什么想法吗？我认为通过 fancyBox 打开的所有页面都有隐含的白色背景。如何将页面的背景更改为不同的颜色。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:10:54.510

这完全取决于您打开*something.php*的方式，它与覆盖颜色无关。

如果你打开*something.php*使用`type: "iframe"`然后*something.php*将表现为任何具有自己的布局和css 样式的普通网页。在这种情况下，*something.php*背景应该是黑色的。

另一方面，如果您通过某些方式打开*something.php*`ajax`（很可能是您正在做的事情，因为我没有`type`在您的代码中看到任何定义）

```
$(document).ready(function() { 
 $(".various").fancybox({ 
  maxWidth   : 1000, 
  maxHeight  : 700, 
  fitToView  : false, 
  width      : '100%', 
  height     : '100%', 
  autoSize   : false, 
  closeClick : false, 
  openEffect : 'none', 
  closeEffect: 'none', 
  overlayColor  : 'black'  //<-- this is NOT a valid option for v2.x
 });
}); 
```

....然后*something.php*将继承 fancybox 的背景颜色（`.fancybox-skin`选择器，`#F9F9F9`默认情况下）

如果这是您打算打开页面的方式，那么您有两种选择：

1.  *在something.php*中设置一个包装容器，并在您的主页中为该包装设置一些CSS 样式（从您启动fancybox）

2.  `.fancybox-skin`在您自己的 CSS 文件或 CSS 内联声明中更改背景颜色。如果是第一个，请确保在 fancybox CSS 文件之后加载您的 CSS 文件。

    ```
    .fancybox-skin {
     background-color: #000;
    } 
    ```

**编辑**：

对于内容背景颜色，您可以组合：

```
.fancybox-inner {
 background-color: #000; /* black */
} 
```

...以及内容周围的边框：

```
.fancybox-skin {
  background-color: #ff0000; /* red */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T14:52:36.877

它可能会根据您使用的 fancyBox 版本而改变。但是尝试设置`'overlayColor'` fancyBox的参数。

# css - CSS 选择器将样式应用于除第一个图像之外的所有图像

> ID：12075655
> 
> 赞同：10
> 
> 时间：2012-08-22T14:42:19.803
> 
> 标签：css, css-selectors

我以为我可以使用高级 CSS 选择器来做到这一点，但很挣扎。

我在[这里](http://jsfiddle.net/7HZEK/1/)有一个 JS Fiddle和下面的例子

基本上，我怎样才能在这里定位每张图片，除了第一个？我不想使用类或 ID，我只想使用高级选择器，如果可能的话。

所以像 .entry-content img:first-child 之类的东西（虽然我知道那行不通）

```
<div class='entry-content'>
    <div>
        <img src='http://placedog.com/400/300'/>
    </div>
    <div>
        <img src='http://placedog.com/400/300'/>
    </div>        
     <div>
        <img src='http://placedog.com/400/300'/>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T14:52:03.507

如果要选择除第一个之外的所有 img 标签，请使用`:not`子类：

```
.entry-content div:not(:first-child) img 
```

工作示例： http: [//jsfiddle.net/GrAaA/](http://jsfiddle.net/GrAaA/)

浏览器支持：[http :](http://caniuse.com/#search=%3Afirst-child)
`:not` [//caniuse.com/#search=%3Anot http://caniuse.com/#search=%3Afirst-child](http://caniuse.com/#search=%3Anot)
`:first-child`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T14:44:57.120

您需要排除第一个孩子中的图像`div`，而不仅仅是第一个`img`孩子，因为每个`img`都是其第一个也是唯一的孩子，`div`而`div`元素本身是兄弟姐妹。

为此，您可以使用此选择器：

```
.entry-content div + div img 
```

这会选择每个`div`紧随其后的图像`div`，因此不会匹配您的第一个图像。

如果您有其他兄弟姐妹`div`，`.entry-content`则可能需要使用通用兄弟姐妹选择器：

```
.entry-content div ~ div img 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:47:59.130

将样式应用于所有图像。然后将样式应用于否定其他样式的第一个孩子。确保第一个孩子的样式在样式表中其他图像的样式之后，以便浏览器以正确的顺序应用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:49:56.290

这应该有帮助

```
.entry-content div:first-child img {
     border: none;
}​ 
```

# asp.net - 如何使用部署到自定义 bin 文件夹的程序集？

> ID：12075659
> 
> 赞同：0
> 
> 时间：2012-08-22T14:42:32.927
> 
> 标签：asp.net, iis, web-config, probing

```
MainApp/bin 
```

这里有一些自定义 dll：

```
MainApp/bin/Custom_Dlls 
```

我在 MainApp 下的 web.config 文件中添加了如下探测：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <probing privatePath="bin;bin\Custom_Dlls" />
    </assemblyBinding>
</runtime> 
```

当我运行我的 .aspx 网页时，其 dll 位于 Custom_Dlls 文件夹下，它向我显示一条错误消息“无法加载类型 ...”，这意味着它找不到 dll。

```
System.Web.HttpParseException (0x80004005): Could not load type <AssemblyName>.WebForm1'. 
```

我也尝试过使用完整的物理路径“file:///C:\MainApp\bin\Custom_Dlls”，但不起作用。

有什么帮助吗？还有什么我需要做的吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:43:59.433

您可以签署您的程序集并将其部署到 GAC。这将为您完成工作。另一种方法是在运行时加载程序集。看看我关于加载插件的帖子： [VB.NET 动态插件组件](https://stackoverflow.com/questions/12055308/vb-net-dynamic-plugin-components/12058493#12058493)

# php - 将 if echo 语句添加到我的搜索引擎

> ID：12075666
> 
> 赞同：0
> 
> 时间：2012-08-22T14:42:52.333
> 
> 标签：php, if-statement

我有一个搜索引擎，由于残奥会，我希望人们能够看到我放置在我网站顶部的 h1 倒计时。下面将是来自我的数据库的循环结果。有什么想法我哪里出错了吗？因为在 this 中`if`，它根本不会回显`h1`标签。我想高于我的结果。

```
$query = " SELECT * FROM scan WHERE "; 

$terms = array_map('mysql_real_escape_string', $terms);
$i     = 0;
foreach ($terms as $each) {
    if ($i++ !== 0) {
        $query .= " OR ";
    }
    $query .= "keywords LIKE '%{$each}%'";
}
// Don't append the ORDER BY until after the loop
$query .= "ORDER BY rank";

$query   = mysql_query($query) or die('MySQL Query Error: ' . mysql_error($connect));
$numrows = mysql_num_rows($query);
if ($numrows > 0) {

    while ($row = mysql_fetch_assoc($query)) {
        $id          = $row['id'];
        $title       = $row['title'];
        $description = $row['description'];
        $keywords    = $row['keywords'];
        $link        = $row['link'];
        $rank        = $row['rank'];

        echo '<h2><a class="ok" href="' . $link . '">' . $title . '</a></h2>' . PHP_EOL;
        echo '<p maxlength="10" class="kk">' . $description . '</p>' . PHP_EOL;
        echo '<p><a class="okay" href="' . $link . '">' . $link . '<br><br><span class="keywords"></p>' . PHP_EOL;
    }
} else {
    echo "No results found for \"<b>{$k}</b>\"";
}

if ($k = "Paralympics 2012") {
    echo "<h1> Countdown to Paralympics: 7 Days </h1>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:46:20.760

```
if ($k = "Paralympics 2012") {
    echo "<h1> Countdown to Paralympics: 7 Days </h1>";
} 
```

将始终打印`<h1>`. 你在做分配而不是比较。尝试：

```
if ($k == "Paralympics 2012") 
```

此外，验证 $k 是您在调试时所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:46:50.887

一等于 ( `=`)*分配*，二/三 ( `==`/ `===`)*比较*。线

```
if ($k = "Paralympics 2012") { 
```

分配`$k`给一个字符串，它总是返回 true，因为除了空字符串 ( `""`) 之外的任何字符串都是真实的。尝试这个：

```
if ($k === "Paralympics 2012") { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:50:08.423

首先，`<h1>`总是显示，与您的问题状态相反*。*由于您正在使用以下方式分配非假值，因此它总是显示：

```
if ($k = "Paralympics 2012") { 
```

更新它以使用比较来解决该逻辑问题。

```
if ($k == "Paralympics 2012") { 
```

接下来，要让它显示在结果上方，您需要将其实际移动到结果`if-statement`所在的循环上方`echo`。尝试将它放在`if ($numrows > 0) {`块中，如下所示：

```
if ($numrows > 0) {
    if ($k == "Paralympics 2012") {
        echo "<h1> Countdown to Paralympics: 7 Days </h1>";
    }
    while ($row = mysql_fetch_assoc($query)) {
        ... 
```

# java - 如何以特定顺序将文件中的记录保存到表中

> ID：12075667
> 
> 赞同：-3
> 
> 时间：2012-08-22T14:43:02.550
> 
> 标签：java, file

假设文件中有以下记录：

## 姓名分数等级

## 艾伦 95 A

## 公羊 80 B

## 法案 100 A

## 苍白 81 B

乔恩 63 C

现在我想从文件中读取记录并使用Java将它们一一保存到DB，但顺序是：“A”级的记录将首先保存到DB，然后是“B”级，然后是“C”级。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:45:10.620

一种方法是为所有属性（名称、分数、等级）编写带有 getter/setter 的类

读取文件并为每条记录创建实例

添加比较器以根据“等级”对它们进行排序

然后将它们插入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:46:26.150

实现你自己的迷你解析器。阅读文本，将其存储在`String`. 从头开始阅读，一直阅读直到遇到成绩，然后相应地拆分，并根据成绩将其插入到您的数据库中。我认为提供一个片段不适合这个问题，似乎是一个家庭作业。

# python - 如何在python中为谷歌应用引擎加入两个数据模型

> ID：12075672
> 
> 赞同：0
> 
> 时间：2012-08-22T14:43:10.600
> 
> 标签：python, google-app-engine, datamodel

我正在尝试/学习在 python 中进行应用程序，该应用程序将包含有关大学及其部门的信息。

我遇到的问题是我想使用数据模型，（我对它们知之甚少）。

我想要两个数据库。一个将包含部门，而另一个将包含大学和部门列表。

感谢帮助！！！

* * *

感谢您的快速答复。我找到了一些教程，例如： [http](http://www.youtube.com/watch?v=rRCx9e38yr8&list=PLDA31F43DE4107B05) ://www.youtube.com/watch?v=rRCx9e38yr8&list= PLDA31F43DE4107B05 http://blog.notdot.net/2010/10/Modeling-relationships-in-App-Engine

我开始阅读它们，有些事情变得更有意义了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:05:39.130

如果您指的是数据库的结构，您可能想阅读更多关于 ER 图和关系数据库的信息。我可以向您简要介绍可能对您有用的关系数据库模型。至少我认为它可以在同一个数据库中有三个表。一个用于映射到大学的部门 ID。另一个将具有课程名称和唯一 ID 的部门映射到提供该课程的部门。第三个将唯一的学生 ID 与课程 ID 进行映射。然后，您可以将其他表从学生信息映射到学生 ID。以及带有教授信息的教授 ID，带有他们将要教授的课程 ID 的教授 ID……这可以根据您要存储的数据进行。

另外请记住，如果您想为应该使用 InnoDB 引擎的 id 创建外键，因为 MyISAM 不允许外键。

# silverlight - 在 tfspreview 上构建 silverlight 应用程序

> ID：12075680
> 
> 赞同：2
> 
> 时间：2012-08-22T14:43:29.407
> 
> 标签：silverlight, tfs, build-automation, azure-devops

[我正在尝试在tfspreview](http://tfspreview.com/)上为包含 SL5 项目的解决方案设置自动构建，但是当我将新构建排入队列时，我从代理那里收到错误，抱怨它找不到 Microsoft.Silverlight.CSharp.targets。通常我会在构建服务器上安装 silverlight sdk/tools，但在 tfspreview 上我没有这样的权限。任何想法来解决这个问题？

在此先感谢，马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:53:42.120

很抱歉回答我自己的问题，但 5 个月后我认为是可以接受的。TFS 团队已在未指定日期解决了该问题。现在将 X86 指定为构建平台就足够了，它可以工作了。

# c# - 我可以让 C# 编译器将编译时间存储到程序集中吗？

> ID：12075682
> 
> 赞同：0
> 
> 时间：2012-08-22T14:43:40.197
> 
> 标签：c#, compilation

> **可能重复：**
> [显示构建日期](https://stackoverflow.com/questions/1600962/displaying-the-build-date)

我希望能够检索编译特定 C# 程序集的时刻，以便我可以显示编译时间以及版本号。

是否可以告诉 C# 编译器以某种方式将编译发生的时间嵌入到程序集中？

# asp.net - ASP.NET 是否使用已知值隐式验证控件

> ID：12075685
> 
> 赞同：0
> 
> 时间：2012-08-22T14:43:47.760
> 
> 标签：asp.net, sql

我有一个复选框列表，其中一些项目的值参数设置为数据集过滤器。这些值是否在回发时进行验证，以确保它们在有效复选框的范围内，或者用户是否可以将无效复选框注入具有有害（sql 注入）值的列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:15:44.467

用户可以在浏览器上已经呈现的页面上注入任何他想要的东西；但是，与列表中的复选框关联的实际值将在`ViewState`. 反过来`ViewState`又是散列的（至少默认情况下），因此，有人通过其中一个复选框来操作回传到服务器的值的唯一方法是通过操作`ViewState`将立即抛出异常的值。

话虽如此，散列并不是万无一失的，您应该采取措施确保 ViewState 没有被篡改。例如，您还可以[加密](http://msdn.microsoft.com/en-us/library/ms178199%28v=vs.85%29.aspx)ViewState 以使其更加困难，但会导致性能损失。

在允许使用它之前，我会简单地以编程方式验证该值。借用上面 Uwe 的话，*永远不要相信用户输入*。

# c# - MongoDB C# 驱动程序 - 如何使用字典列表插入批处理

> ID：12075686
> 
> 赞同：9
> 
> 时间：2012-08-22T14:43:52.050
> 
> 标签：c#, mongodb, serialization, mongodb-.net-driver

我是 mongodb + C# 驱动程序的新手，所以请原谅我的任何天真。

我正在尝试对一组键值对进行批量插入，因此我的数据结构是`List<Dictionary<string,string>>`.

这是我的持久性代码示例：

```
public void Persist(string collectionName, List<Dictionary<string, string>> documents)
{
  string connectionString = ConfigurationManager.ConnectionStrings[CONNECTION_STRING_KEY].ConnectionString;
  MongoServer server = MongoServer.Create(connectionString);
  MongoCredentials credentials = new MongoCredentials("MYUser", "MyPassword");
  MongoDatabase myDb = server.GetDatabase("myDb", credentials);

  var collection = myDb .GetCollection(collectionName);

  using (server.RequestStart(myDb ))
  {
    var result = collection.InsertBatch(documents);
  }
} 
```

我收到关于序列化的错误：

> MongoDB.Bson.BsonSerializationException：序列化器 DictionarySerializer 预期 DictionarySerializationOptions 类型的序列化选项，而不是 DocumentSerializationOptions。

我缺少设置吗？

**编辑：更多信息**

我的字典是我的实体。意思是，我没有创建一个对象来保存属性，而是将它们转储到`Dictionary`. 从 mongo 文档看来，这应该只是转换为 mongo `Document`。

**进一步编辑：扭曲问题**

通过将 using 语句更改为：

```
using (server.RequestStart(myDb))
  {
    foreach(var doc in documents)
      collection.Insert(new BsonDocument(doc));
    //var result = collection.InsertBatch(typeof(Dictionary<string, string>), documents);
  } 
```

但是，我关心的是性能，因为在真实情况下，我很容易拥有 10k+ 字典。使用此代码，驱动程序是否足够聪明来批量处理这些？有没有办法保留 InsertBatch 但完成同样的事情？

当然，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T21:46:57.920

使用您使用的新代码，`.Insert`驱动程序*不会*批处理这些插入，并且您将获得比`InsertBatch`.

试试这个：

```
collection.InsertBatch(documents.Select(d => new BsonDocument(d))); 
```

# constructor - 使用 Boost.spirit，有没有办法将附加参数传递给属性构造函数？

> ID：12075689
> 
> 赞同：3
> 
> 时间：2012-08-22T14:44:03.227
> 
> 标签：constructor, attributes, boost-spirit, boost-spirit-qi

也许是一个菜鸟问题，我有一段这样的代码：

```
struct S {
    S() {...}
    S(int v) {
        // ...
    }
};
qi::rule<const char*, S(), boost::spirit::ascii::space_type> ip=qi::int_parser<S()>();
qi::rule<const char*, std::vector<S>(), boost::spirit::ascii::space_type> parser %= ip % ',';
... 
```

上面的规则可以工作，但是如果 S 构造函数需要额外的参数，代码就会中断，例如：

```
struct S {
    S(T t) {...}
    S(T t, int v) {
        // ...
    }
}; 
```

我花了几天时间寻找解决方案，但到目前为止还没有运气。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:10:43.897

没有直接的方法，但您可能可以明确地初始化事物：

```
qi::rule<It, optional<S>(), Skipper> myrule;

myrule %= 
       qi::eps [ _val = phoenix::construct<S>(42) ] >>
       int_parser<S()>; 
```

但是，由于您是从 int_parser 返回它，所以我的直觉说默认初始化应该是合适的（或者 S 类型可能没有单一的、明确的责任？）。

## **编辑**

作为对评论的回应，您似乎想要这样：

```
T someTvalue;    

myrule = qi::int_ 
   [ qi::_val = phx::construct<S>(someTvalue, qi::_1) ]; 
```

或者，如果`someTvalue`是语法构造函数之外的变量，并且可能在解析器执行期间更改值（并且它的寿命足够长！），您可以这样做

```
myrule = qi::int_ 
   [ qi::_val = phx::construct<S>(phx::ref(someTvalue), qi::_1) ]; 
```

希望有帮助

# .net - 如何嵌套资源标识符？

> ID：12075698
> 
> 赞同：5
> 
> 时间：2012-08-22T14:44:48.923
> 
> 标签：.net, msdn, resx

MSDN 上的资源页面[名称如下所述。](http://msdn.microsoft.com/en-us/library/ms229037(v=vs.100))

> **请务必使用点分隔符（“.”）来嵌套具有清晰层次结构的标识符。**
> 
> 例如，诸如`Menus.FileMenu.Close.Text`和之类的名称`Menus.FileMenu.Close.Color`符合本指南。

我该怎么做呢？当我尝试这样做时，我被告知资源标识符中的点无效，就像这样。

[![令人失望。](../Images/d7d2bdda18df0815701f284c5aa58ab8.png)](https://i.imgur.com/9874h.png)

我可以理解为什么它无效^([1])，这就是为什么我一直认为不可能嵌套资源标识符，并且直到现在才尝试过......但 MSDN 说我可以。我错过了什么？

[1] 通过查看自动生成的`Resource.Designer.cs`文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:11:19.120

我也看到了这个，看起来它已经存在了几年了。

强类型生成器生成一个强类型类，并将每个资源映射到该类的属性。资源名称（标识符）将用作属性的名称。带有点字符的标识符在 C# 中无效（正如您在问题中声明的那样）。但是，生成器会将点替换为下划线，因此您仍然可以获得有效的强类型类。

我通常只是用下划线替换点。奇怪的是，他们仍然没有在指导方针中改变这一点。（或者也许我错过了什么？）

# android - 如何在 android-application 内更改语言（区域设置）后刷新 PreferenceActivity（从 TabHost 启动）

> ID：12075699
> 
> 赞同：0
> 
> 时间：2012-08-22T14:44:49.227
> 
> 标签：android, android-tabhost, preferenceactivity

我是android新手，想问一个问题。我的应用程序用户可以从应用程序的设置中更改语言。在用户做出您的选择后，我会更新配置。但是我如何在不重新启动整个应用程序的情况下更新屏幕中的所有视图（在带有 TabHost 的 PreferenceActivity 中）（我知道这种变体，但我在 Google 中阅读的这种方式是不可取的）。更改应用程序中的语言，我们应该分两步： 1\. 使用我们的新语言环境创建新配置，然后升级配置；2\. 通过重新启动应用程序来更新视图或通过重置 ContenView 来更新视图。就我而言，我第一次 addPreferencesFromResource(R.xml.ulticlockwidget_settings)。您能否向我建议如何更改我的应用程序中的语言并正确更改屏幕上的整个视图？我将不胜感激所有的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:29:05.683

如果您的应用程序没有太多偏好，您可以随时将它们一一获取并重置它们的文本。当您再次设置文本时，它会自动找到具有新*语言环境的正确文本*

另一种选择是重新启动首选项活动。您不必重新启动整个应用程序。只需再次打开首选项活动并完成（）旧的首选项活动实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:59:29.487

如果您想在更改语言后刷新活动，您可以`setContentView(R.layout.yourLayout)` 再次使用和阅读活动内容。

# jquery - jquery mobile 1.1.1 导致导航栏将所有按钮显示为活动状态

> ID：12075700
> 
> 赞同：0
> 
> 时间：2012-08-22T14:44:55.647
> 
> 标签：jquery, jquery-mobile

自从将我的 Web 应用程序升级到 jquery mobile 1.1.1 后，导航栏出现了问题。虽然只有一个按钮具有活动类，但所有按钮都处于活动颜色。知道出了什么问题吗？这是我的一个页面的标题示例：

```
<div data-role="page" id="mainMenu" class="menuPage" data-theme="b">    

        <div data-role="header" data-posistion="fixed" data-id="constantNav">
            <h1>Main menu</h1>  

            <div id="navbarHolder">
               <div data-role='navbar'>
                  <a href='main.jsp' class='ui-state-persist ui-btn-active' data-icon='home' style='width: 10%;'></a>
                  <a href='page1.jsp' class='ui-state-persist' data-icon='icon1' style='width: 10%;'></a>
                  <a href='page2.jsp' class='ui-state-persist' data-icon='icon2' style='width: 10%;'></a>
                  ... other buttons
               </div>
            </div>
        </div><!-- /header --> 
```

提前致谢！

坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:06:10.203

从非活动栏中删除 ui-state-persist 类，问题将得到解决。

我希望这有帮助。

# c - 这种字符串检索方法有什么缺点吗？

> ID：12075702
> 
> 赞同：1
> 
> 时间：2012-08-22T14:44:57.417
> 
> 标签：c, string, dynamic, input, stdin

不久前，我在这个网站上看到了一个功能，我对它进行了一些修改以供我使用。

它是一个使用 getc 和 stdin 检索字符串并精确分配包含该字符串所需的内存的函数。然后它只返回一个指向已分配内存的指针，该内存填充了所述字符串。

我的问题是这个函数有什么缺点（除了以后必须手动释放分配的内存）吗？你会做些什么来改进它？

```
char *getstr(void)
{
    char *str = NULL, *tmp = NULL;
    int ch = -1, sz = 0, pt = 0;

    while(ch)
    {
        ch = getc(stdin);
        if (ch == EOF || ch == 0x0A || ch == 0x0D) ch = 0;
        if (sz <= pt)
        {
            sz++; 
            tmp = realloc(str, sz * sizeof(char));
            if(!tmp) return NULL;
            str = tmp;
        }
        str[pt++] = ch;
    }

    return str;
} 
```

在使用您的建议后，这里是我更新的代码，我决定只使用 256 字节作为缓冲区，因为此函数用于用户输入。

```
char *getstr(void)
{
    char *str, *tmp = NULL;
    int ch = -1, bff = 256, pt = 0;

    str = malloc(bff);
        if(!str) 
        {
            printf(\nError! Memory allocation failed!");
            return 0x00;
        }
    while(ch)
    {
        ch = getc(stdin);
        if (ch == EOF || ch == '\n' || ch == '\r') ch = 0;
        if (bff <= pt)
        {
            bff += 256; 
            tmp = realloc(str, bff);
            if(!tmp) 
            {
                free(str);
                printf("\nError! Memory allocation failed!");
                return 0x00;
            }
            str = tmp;
        }
        str[pt++] = ch;
    }
    tmp = realloc(str, pt);
    if(!tmp)
    {
        free(str);
        printf("\nError! Memory allocation failed!");
        return 0x00;
    }
    str = tmp;

    return str;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:48:07.603

是的，主要问题是它`realloc`非常慢，并且为每个角色重复调用它通常是一个坏主意。

尝试分配固定数量的内存开始，比如`N=100`字符，当你需要更多时，得到类似的东西`2*N`，然后`4*N`等等。您最多只会超支两倍的内存，但会节省*很多*运行时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:50:32.510

1.  它无缘无故地依赖于 '\n'=='0xa' 和 '\r' =='\0d' 。如果您的意思是`\r`and `\n`，请使用它们。
2.  它可能会非常慢，为您阅读的每个字符重新分配。
3.  `sizeof(char)`保证为1，所以没有意义。
4.  如果您分配了一块内存，则 realloc 失败，您将返回 NULL 而不返回或释放`str`，从而泄漏内存。
5.  该接口没有提供指示部分失败的方法，如 #4 中所示。您所能做的就是返回一个字符串或不返回。给定一个巨大的输入字符串，您无法表明您已经阅读了部分而不是全部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T14:54:08.610

这是前几个观察结果，其他答案包括更多：

1.  它一次将缓冲区增加 1 个字节，因此进行了不必要的多次`realloc()`调用。
2.  如果`realloc()`失败，则先前的缓冲区丢失。
3.  不是`[getline()](http://linux.die.net/man/3/getline)`，虽然它当然更便携。
4.  硬编码换行和回车的 ASCII 值也不是很便携，使用`'\n'`and`'\r'`代替。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T14:56:30.187

IMO 过于节俭，并且犯了牺牲性能以节省无限量内存的错误，我认为这在大多数情况下毫无意义。像 realloc 这样的分配调用对系统来说可能很费力，在这里它是为每个字节完成的。

最好只有一个本地缓冲区，比如 4KB 来读入，然后根据实际读入的长度分配返回字符串。请记住，普通系统上的堆栈*无论如何都是 4-8MB，无论您是否全部使用它。如果读取的字符串长度超过 4KB，您可以编写一个类似的循环来分配并复制到返回字符串中。所以一个类似的想法，但是堆分配将每 4096 个字节而不是每个字节发生一次，所以，例如，你有 4096 的初始缓冲区，当它用完时你 malloc 4096 作为返回字符串并复制，继续读入缓冲区（从头开始），如果再读取 1000 个字节，则重新分配到 5097 并返回。

我认为初学者的一个常见错误是痴迷于通过逐字节接近堆分配来最小化堆分配。即使 KB by KB 也有点小；系统以页面 (4 KB) 为单位分配，您不妨调整一下。

*为函数内部的本地存储提供的内存。

# asp.net - 是否允许 global.asax、application_start、静态变量和统一容器参加聚会？

> ID：12075705
> 
> 赞同：0
> 
> 时间：2012-08-22T14:45:19.047
> 
> 标签：asp.net, iis, static, unity-container

我在 Global Application_Start 事件中构建一个 Unity 容器，然后将其存储在一个静态变量中，然后通过 GLobal 类实现的接口上的方法使其全局可用，然后可用，正确地投射到 HttpContext.Current .ApplicationInstance ，它在一段时间内运行良好。当应用程序池回收时，静态变量被清除，Application_Start 事件似乎没有重新执行，并且容器没有任何它开始时的注册。

有没有其他人遇到过这个问题？并能够解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:27:00.633

我猜您使用的是经典的 ASP.NET Web 表单。在那种情况下，我会提倡使用`HttpApplicationState`（通过可用`HttpContext.Current.Application`）来存储容器。

查看对 Chris Tavares[对此问题](https://stackoverflow.com/questions/10880102/mvc3-unity-framework-with-multiple-configurations)的回答的评论。Chris 是 Unity 的首席维护者。他知道他在说什么。

# asp.net - 如何在 asp.net 4.0 中禁用浏览器后退按钮？

> ID：12075714
> 
> 赞同：-9
> 
> 时间：2012-08-22T14:45:48.960
> 
> 标签：asp.net

如何在单击或双击浏览器时禁用 asp.net 4.0 中的浏览器后退按钮？

请尽快回复我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:47:36.830

asp.net 是服务器端脚本，不能更改浏览器中的任何内容，浏览器位于客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:48:44.353

没有办法做到这一点。因为此功能是在浏览器中构建的，而不是在您的网站中。解决方法的唯一方法是打开一些没有按钮面板的窗口，尽管这对所有浏览器都没有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:51:45.387

您可以发回 javascript 以获得您想要的行为。

如以下文章所示，您有两种选择：

1.  在新窗口中打开。
2.  使用历史转发禁用（对用户）该功能。

[http://viralpatel.net/blogs/disable-back-button-browser-javascript/](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

# asp.net - WcfAjaxEnabled - 回发

> ID：12075717
> 
> 赞同：0
> 
> 时间：2012-08-22T14:46:05.070
> 
> 标签：asp.net, ajax, wcf

我在网站上启用了 wcf ajax（这是一个网络聊天）。

出于某种原因，当我需要执行回发时，我的 wcf 服务以意外的方式工作（例如通话中的大延迟、下班等）。

当我也尝试从受保护的页面通过 javascript 调用一些 wcf 函数时，就会发生奇怪的事情（许多页面都受 web config 的身份验证模式 = 形式的保护）。

上述问题是不是同一个原因造成的？但这可能是什么原因？

编辑：

我注意到只有当我的网站包含带有 sessionStart 和 SessionEnd 事件处理程序的全局 asax 文件时才会出现上述问题（即使这些事件处理程序是空的，即没有任何指令也是如此）。

@EDIT：好的，关于回发的问题是由于 devExpress 控制（验证码）。如果我使用一个简单的按钮来做一些 postabck 一切正常。也许那个组件在我的页面中注入了一些错误的脚本，我不知道。因此，仅通过登录对受保护页面的访问仍然存在疑问。重要的是要知道登录问题仅发生在登录页面放置在内部（嵌套）应用程序上的生产站点上，而在登录机制位于同一应用程序上的测试站点上一切正常。但是，此时我通过更改聊天访问的登录逻辑来解决。我已经删除了该聊天管理页面的 Web 配置中的保护，并在其 init 事件中检查了用户凭据。如果它没有被记录，那么我执行一个简单的重定向到登录页面并且一切正常。

@@EDIT 好吧，我找到了确切的原因并解决了它。请看这里：http: [//blogs.msdn.com/b/silverlightws/archive/2009/09/30/having-a-pollingduplex-service-and-any-other-wcf-service-in-the -same-website-causes-silverlight-calls-to-be-slow.aspx](http://blogs.msdn.com/b/silverlightws/archive/2009/09/30/having-a-pollingduplex-service-and-any-other-wcf-service-in-the-same-website-causes-silverlight-calls-to-be-slow.aspx)

# sharepoint-2010 - 更新项目 Sharepoint 选择字段

> ID：12075723
> 
> 赞同：1
> 
> 时间：2012-08-22T14:46:24.110
> 
> 标签：sharepoint-2010

我在 Sharepoint 2010 中有一个带有选择列的列表。用户可以输入自己的文本值，而不是从现有值中选择。

那么如果该字符串与现有值不同，如何在项目字段（类型选择）中写入文本字符串？以编程方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:45:22.373

您可以将其设置为字符串。这就是选择字段的值在内部存储的方式。

```
SPListItem item = ...
item["ChoiceFieldInternalName"] = "Whatever value you want";
item.Update(); 
```

现在，如果它是查找字段或用户字段，它们会有些不同（例如，您必须使用 SPFieldLookupValue 或 SPFieldUserValue 对象来解码字符串），但选择很容易。

# testing - 如何控制 Maven 中测试的执行顺序？

> ID：12075725
> 
> 赞同：22
> 
> 时间：2012-08-22T14:46:25.760
> 
> 标签：testing, maven

我需要按顺序运行测试。我在任何地方都找不到充分的记录。我宁愿从命令行执行此操作。就像是

```
 mvn -Dtest=test1,test2,test3,test5 test 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-22T15:09:31.720

您不能指定测试的运行顺序。

解决方法是将[runOrder 参数](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#runOrder)设置为按字母顺序排列。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <runOrder>alphabetical</runOrder>
    </configuration>
</plugin> 
```

然后你需要重命名你的测试以获得预期的顺序。

但是，进行依赖测试并不是一个好主意。单元测试必须是第[一个](https://web.archive.org/web/20190914234457/https://pragprog.com/magazines/2012-01/unit-tests-are-first)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-26T13:26:07.677

您可以创建一个测试套件来运行所有测试并运行它。

使用junit 4：-

```
@RunWith(Suite.class)
@Suite.SuiteClasses({Test1.class,
                     Test2.class,
                     Test3.class,
                     Test4.class,
                     Test5.class
})
public class TestSuite
{
} 
```

这将以正确的顺序运行它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-25T15:41:09.540

如果您确实需要测试顺序，那么您应该使用[testng](https://testng.org/doc/)而不是 JUnit，您可以在其中定义测试之间的依赖关系并基于特定的测试顺序。我知道在实践中，独立范式不起作用的时代。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T15:32:51.383

有一个 Maven [Surefire](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html)插件，允许您指定[测试顺序](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#runOrder)。

如果您的测试需要按顺序运行，因为它们相互依赖，我强烈建议您不要这样做。每个测试都应该是独立的并且能够独立运行。如果每个测试都是独立的，那么它们运行的​​顺序无关紧要。拥有独立的测试还意味着您可以重复运行单个测试，而无需重新运行整个测试链。这是一个巨大的时间节省。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-22T15:40:22.850

如果您的单元测试需要按特定顺序运行，可能是因为您的测试设计不当，或者您的应用程序设计不当。您的单元测试应该彼此独立。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-08T11:19:43.723

surefire-plugin的`runOrder`参数会有所帮助，但只有按顺序执行类时才会有所帮助。在一个类中排序测试方法没有帮助（surefire-plugin 2.22.2，junit 5.6.1）。要使用 jUnit 实现测试类中的顺序，请使用 jUnit 通过*@TestMethodOrder(MethodOrderer.Alphanumeric.class)* (jUnit 5) 控制类中测试顺序的功能。

# asp.net-mvc - 我可以使用 Visual C# 2010 express 创建 MVC 应用程序吗？

> ID：12075727
> 
> 赞同：1
> 
> 时间：2012-08-22T14:46:37.330
> 
> 标签：asp.net-mvc, visual-studio-2010

我来自java，所以这对我来说是全新的。我安装了 Visual C# 2010 Express，我想创建一个 ASP.NET MVC 3.0（我下载并安装）应用程序。那可能吗？我应该安装 Visual Web Developer 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:49:23.240

是的。要创建 Web 应用程序，您需要 Visual Web Developer Express。Visual C# 2010 Express 如果用于控制台应用程序和 Windows 窗体应用程序。

[您可以从此处](http://www.asp.net/mvc)安装包含 ASP.NET MVC 4 的 Visual Studio 2012 Express 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:48:51.090

我相信你需要安装[Visual Web Developer](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express)，是的。基本上 Visual C# Express 适用于非 Web 应用程序 IIRC。

请注意，如果您仍然要安装新版本，您不妨升级到现在可用的 VS 2012（包括 Express 版本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:52:35.290

请访问[http://www.asp.net/mvc](http://www.asp.net/mvc)并按照概述中的步骤操作

# ruby-on-rails - 无法在 Rails 3 中将字符串和 Fixnum 转换为 JSON

> ID：12075731
> 
> 赞同：1
> 
> 时间：2012-08-22T14:46:51.627
> 
> 标签：ruby-on-rails, ruby, json, parsing

```
 JSON.parse('abc'.to_json) gives this error (in rails):

    JSON::ParserError: 757: unexpected token at '"abc"'
    from /Users/mpapper/.rvm/gems/ruby-1.9.2-p290@dfc-site/gems/json-1.7.4/lib/json/common.rb:155:in `parse'
    from /Users/mpapper/.rvm/gems/ruby-1.9.2-p290@dfc-site/gems/json-1.7.4/lib/json/common.rb:155:in `parse'
    from (irb):20
    from /Users/mpapper/.rvm/gems/ruby-1.9.2-p290@dfc-site/gems/railties-3.1.3/lib/rails/commands/console.rb:45:in `start'
    from /Users/mpapper/.rvm/gems/ruby-1.9.2-p290@dfc-site/gems/railties-3.1.3/lib/rails/commands/console.rb:8:in `start'
    from /Users/mpapper/.rvm/gems/ruby-1.9.2-p290@dfc-site/gems/railties-3.1.3/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:41:in `require'
    from script/rails:41:in `<main>' 
```

同样，这失败了：

```
 JSON.parse(100.to_json) 
```

这也是（略有不同的错误）：

```
 JSON.parse(1.to_json) 
```

为什么我不将输出的 json 包装在 {} 中以使其看起来像真正的 json？因为我正在编写应该能够获取任何对象并将其序列化为 JSON 并再次将其拉回的代码。

我认为问题出在此：JSON 看起来像一组编码的键值对，都放在 {} 中。但是 rails (3.x) 中的 to_json 方法根本不输出任何 {}。

鉴于此，我真正想要的只是一种将任意 ruby​​/rails 对象序列化为字符串并再次返回的简单方法。已经有许多对象具有 to_json 方法（String、Fixnum、Array、Hash），但 String 和 Fixnum 版本不会生成可以解析的 Json。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:57:54.360

在[JSON RFC](http://www.ietf.org/rfc/rfc4627.txt)中，我们有声明

> JSON 文本是一个序列化的对象或数组。

这几乎概括了它。在顶层，您的 JSON 必须是数组或对象之一。

您的代码可以简单地执行以下操作：

```
json = {'myprotocol' => whatever}.to_json
result = JSON.parse(json)['myprotocol'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:53:02.917

这不是`JSON`你要找的。试试这个：

```
ActiveSupport::JSON.decode('abc'.to_json)
ActiveSupport::JSON.decode(1.to_json) 
```

# jquery - jQuery：在视口中居中花式框

> ID：12075734
> 
> 赞同：3
> 
> 时间：2012-08-22T14:46:57.797
> 
> 标签：jquery, css, fancybox-2

我目前正在使用fancybox 版本2 在单击缩略图时显示我的图像，但我似乎无法让fancybox 垂直放置在视口中间，因为水平方向很好。

我已经尝试了很多东西，这是最新的：

**CSS**

```
.fancybox-wrap { 
    position: fixed !important;
    top: 50px !important;
} 
```

**jQuery**

```
jQuery(document).ready(function() {
    $(".fancybox-wrap").css("position", "absolute");

    // fancybox initialisation etc

});

$(window).scroll(function() {
    $('.fancybox-wrap').css('top', $(this).scrollTop() + "50px");
}); 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-24T05:49:34.677

您唯一需要做的就是添加到网站 css

```
html, body {height: 100%;} 
```

而fancybox 会将图像定位在屏幕中心而不是页面中心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T03:14:08.093

```
$(window).bind('resize', function() {
    var top = ($(window).height() / 2) - ($(".fancybox-wrap").outerHeight() / 2);
    var left = ($(window).width() / 2) - ($(".fancybox-wrap").outerWidth() / 2);
    $(".fancybox-wrap").css({ top: top, left: left});
}).trigger('resize'); 
```

[http://jsfiddle.net/aGhxK/23/](http://jsfiddle.net/aGhxK/23/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:16:14.110

这设置`left`和`top`使用`position: absolute`动态：

[http://jsfiddle.net/aGhxK/1/](http://jsfiddle.net/aGhxK/1/)

# android - GCMRegistrar.getRegistrationId(this) 始终返回空字符串，即使在成功调用注册后也是如此

> ID：12075735
> 
> 赞同：12
> 
> 时间：2012-08-22T14:46:59.670
> 
> 标签：android, google-cloud-messaging

我正在实施 GCM - 我做的第一件事是调用 GCMRegistrar.getRegistrationId 来查看设备是否已注册。不是（返回空字符串），所以我对 GCMRegistrar.register 进行了异步调用。正如预期的那样，我的意图服务（从 GCMBaseIntentService 派生）调用了它的 onRegistered() 方法，以及我的服务器可以用来向该设备发送 GCM 消息的令牌。到现在为止还挺好。

但是，下次我运行该应用程序时，我希望第一次调用 GCMRegistrar.getRegistrationId 以返回我在意图服务的 onRegistered 函数中返回的令牌。但我又得到了空字符串。我认为 GCM 客户端库（gcm.jar）会将 GCM 注册 ID（令牌）保存到私有 SharedPreferences 对象——事实上，GCMRegistrar 类的文档（[http://developer.android.com/guide/ google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html)）声明“注意：此类使用私有 SharedPreferences 对象来跟踪注册令牌”

我没有取消注册设备、卸载应用程序或更新版本代码。有什么我想念的想法吗？谢谢

注意——这个问题已经发布在 android-gcm 标签下的谷歌群组中。网址在这里：

[https://groups.google.com/forum/#!topic/android-gcm/4FPqZLzlvE4](https://groups.google.com/forum/#!topic/android-gcm/4FPqZLzlvE4)

马克·墨菲（Commons Guy）对问题的初步诊断非常有帮助，但没有具体的问题浮出水面

**更新编辑 - 这是我的 AndroidManifest.xml 的相关部分**

```
 <receiver android:name=".push.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.myapp.package.name" />
        </intent-filter>
    </receiver>

    <service android:name=".push.GCMIntentService" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:34:13.763

* **"category android:name="*写下你的完整包名*" />"***

像上面一样在清单中提供您的包裹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:16:52.977

检查您是否`GCMRegistrar.unregister(this);`在应用关闭时调用的某个地方调用了方法。也许在`onDestroy()`?? 在我们的例子中，这是问题所在:)

该方法实际上是从 Google 服务中取消注册设备，因此在您打开应用程序并调用注册操作之前，它不会获得令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T12:39:55.020

请查看示例应用程序的文档。在清单中它说：

```
 By default, it must be named .GCMIntentService, unless the
      application uses a custom BroadcastReceiver that redefines its name. 
```

在您的清单中，您正在使用

```
<service android:name=".push.GCMIntentService" /> 
```

您没有将此服务放在根级别，也没有制作自定义广播接收器。这应该是：

```
<service android:name=".GCMIntentService" /> 
```

我遇到了同样的问题，将服务移动到我的包的根目录解决了这个问题。不过，这是一种愚蠢的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T06:27:59.850

还将 GCM 权限添加到您的清单中并验证 google gmc 密钥。

应用接收 GCM 消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T19:49:46.920

不用担心，如果 getRegistrationId 返回空字符串，那是因为有时注册到 GCM 云需要时间。您应该等待 onRegistration 方法在 GCMIntent 服务类中触发。

注册后，您将收到registrationID，然后您可以使用它做任何您想做的事情（很可能您必须将它发送到您的Web数据库，您可以从onRegistration回调方法调用Async）。

@Override protected void onRegistered(Context arg0, String arg1) {

```
 //Log.i("Registration", arg1.toString());  
    // This is where you need to call your server to record the device registration id.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-06T21:16:01.670

我仔细检查了 AndroidManifest 以确保我们的服务定义正确。最后，我使用了一个涉及写入共享偏好的技巧。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-05-02T21:41:56.060

将派生自 GCMIntent 服务的服务类放在应用程序的根包中。**我的意思是，如果您的应用程序包是** **com.stackoverflow.android ，那么** ***您的服务类应该驻留在此包***中，而不是在您的应用程序项目的其他包中。确保将所有必需的权限放在清单文件中

# android - 如何在 ActionBarSherlock 上更改 IcsSpinner 的文本颜色？

> ID：12075742
> 
> 赞同：5
> 
> 时间：2012-08-22T14:47:24.193
> 
> 标签：android, android-actionbar, actionbarsherlock

我的操作栏目前是这样的：

![在此处输入图像描述](../Images/23640842c3f68703fb6e692b5578564a.png)

我希望它是这样的：

![在此处输入图像描述](../Images/dc76df5571a3aa8e91d3eff6a7bd1da2.png)

忽略标志旁边的黑线。主要是我想要的是`change the color of the text in the IcsSpinner to white`

我的活动代码是：

```
 ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this,
            R.layout.sherlock_spinner_item, cities);
    listAdapter
            .setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
    setContentView(mViewPager);
    final ActionBar bar = getSupportActionBar();
    bar.setCustomView(R.layout.custom_actionbar);
    bar.setIcon(R.drawable.logo);
    bar.setDisplayShowCustomEnabled(true);
    IcsSpinner citySpinner = (IcsSpinner) (bar.getCustomView())
            .findViewById(R.id.city_spinner);
    citySpinner.setAdapter(listAdapter); 
```

我的 custom_actionbar.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="right|center_vertical"
    android:orientation="horizontal" >

    <com.actionbarsherlock.internal.widget.IcsSpinner
        android:id="@+id/city_spinner"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"/>

</RelativeLayout> 
```

我什至希望微调器是`just left to the refresh icon`. 就像第二张图片一样。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T15:10:43.097

您需要使用`getSupportActionBar().getThemedContext()`作为`Context`给适配器的实例以膨胀布局。这将使用适合在操作栏中填充小部件的任何主题，而不是为您的活动内容设置的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:29:52.373

只是为了补充接受的答案：在尝试使用构造函数创建新的 ArrayAdapter 时遇到一些奇怪的 NullPointerException 后，这对我有用

```
 ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    ArrayAdapter<CharSequence> adapter = 
        ArrayAdapter.createFromResource(actionBar.getThemedContext(),
        R.array.action_list, android.R.layout.simple_spinner_dropdown_item);
    actionBar.setListNavigationCallbacks(adapter, this);
    actionBar.setDisplayShowTitleEnabled(false); 
```

# email - 如何在 Alfresco 4 中发送电子邮件

> ID：12075743
> 
> 赞同：1
> 
> 时间：2012-08-22T14:47:29.357
> 
> 标签：email, alfresco-share

我是 Alfresco（第 4 版）的新手，我想创建 webscript（实际上是 lib.js）来发送具有以下签名功能的电子邮件：

```
function sendMail(to, subject, templatePath, templateArgs ) 
```

当满足某些条件时，将从其他 webscript 调用此函数。我找到了这样的脚本：

```
var mail = actions.create("mail");
mail.parameters.to = "receiver_email@some.domain";
mail.parameters.subject = "Test subject";
mail.parameters.template = companyhome.childByNamePath("Data Dictionary/Email Templates/Workflow Notification/wf-email.html.ftl");

var templateArgs = new Array();
templateArgs['workflowTitle'] = "workflowTitle";
templateArgs['workflowPooled'] = true;
templateArgs['workflowDescription'] = "workflowDesc";
templateArgs['workflowId'] = "workflowId";

var templateModel = new Array();
templateModel['args'] = templateArgs;
mail.parameters.template_model = templateModel;

mail.execute(search.findNode("workspace://SpacesStore/9e15aaac-b30b-4266-984f-21fe273a6113")); 
```

但我不知道如何把它放在我的代码中，因为我不知道三件事：

*   我可以在我的场景中使用此代码，即制作可以导入并用于发送各种电子邮件**的js lib吗？**

*   如果可以，我在哪里可以找到对操作的引用（在文件开头要导入什么）？

*   我应该把什么作为 mail.execute 函数的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:23:09.537

mail.execute 是“反对”规则。这意味着代码要求您针对 alfresco 中的节点执行该函数。因此，当您在上传文档时发送电子邮件时，mail.execute 使用新创建的节点，因此您可以在邮件中附加指向新创建文件的链接。

无论如何，您可以简化它，并创建一个规则，该规则在创建/更新时触发某些内容，并使用 sendmailaction.js 作为您在上面发布的内容，自动发送给您想要的用户。

否则你可以创建这样的东西：

```
function sendMail()
{
    var mail = actions.create("mail");
    mail.parameters.to = bpm_groupAssignees.properties["cm:email"];
    mail.parameters.subject = "New File uplodaded with name " + document.name;
    mail.parameters.from = initiator.properties["cm:email"];
    mail.parameters.text = "Kindly approve the document: " + document.name;
    mail.execute(document);
}
sendMail(); 
```

# tsql - Sybase 视图查询 - 硬编码值有效，但变量失败

> ID：12075748
> 
> 赞同：1
> 
> 时间：2012-08-22T14:47:39.367
> 
> 标签：tsql, sybase, ibatis

有谁知道为什么这会在大约 1 秒内起作用：

```
select Q.USR_LOAD_NBR from QUAD0066..QTS_LOAD_INFO Q where Q.KY_TO_STP = 2142870 
```

但这需要超过 10 秒（最多 5 分钟）：

```
declare @groupId int
set @groupId = 2142870
select Q.USR_LOAD_NBR from QUAD0066..QTS_LOAD_INFO Q where Q.KY_TO_STP = @groupId 
```

我在使用这个查询时遇到了与 ibatis 完全相同的问题，除了 ibatis 在 15 秒内超时并导致我的代码失败。（少于 1 秒硬编码，使用 int 参数超时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:12:30.320

你有错误吗？您是否使用不同的程序（例如 ase isql 和交互式 sql）运行此代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:36:20.060

当您对值进行硬编码时，查询优化器可以选择可能的最佳计划。当值是变量时不会发生这种情况，因为查询优化器不知道该值可能是什么。

现在你可以做的是为`KY_TO_STP`列创建一个索引，prolly 你是一个非聚集的：

```
create nonclustered index on QTS_LOAD_INFO(KY_TO_STP) 
```

`unique`如果您希望每个值都是唯一的，则可以添加`KY_TO_STP`，并且可以替换`nonclustered`为`clustered`if`KY_TO_STP`是主键，或者如果您可以用它唯一地标识每一行（但不要忘记每个表只能有一个聚集索引）。

# jquery - 从jquery中的li获取选定的值

> ID：12075749
> 
> 赞同：0
> 
> 时间：2012-08-22T14:47:39.113
> 
> 标签：jquery, this

使用 jquery 找出单击事件的值。每次`delete`单击该类时，该`hidden`变量都会返回第一个`hdid`而不是 clicked `hdid`。当我使用`this`它时，它会返回整个`delete`类，但我只需要选择类的“hdid”。问题是我如何使用`this`将变量设置为选定的`hdid`

```
<form id="frmDelete" method="post" action="delete-class.php">
            <ul id="class">
                <li>
                    <div class="delete">ED 123-123<input type="hidden" name="hdid" id="hdid" value="6"/></div>
                </li>
                <li>
                    <div class="delete">EDU 121-101<input type="hidden" name="hdid" id="hdid" value="7"/></div>
                </li>
                <li>
                    <div class="delete">STU 120-456<input type="hidden" name="hdid" id="hdid" value="8"/></div>
                </li>               
            </ul>
        </form>
    </div>
    <script>
        $(function() {
            $(".delete").click(function() {
                var hidden = $('#hdid').val();
                console.log(hidden);
                console.log(this);
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:50:25.040

```
$(function() {
        $(".delete").click(function() {
            var hidden = $(this).find("hidden").val();
            console.log(hidden);
        });
    }); 
```

并且 id 应该是唯一的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:50:59.537

```
$(function() {
    $(".delete").click(function() {
        var $div = $(this);
        console.log($div.children("input").prop("name"));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:51:18.517

您在同一页面上有多个 ID 为 hdid 的元素。拥有多个具有相同 ID 的元素并不是一个好主意。

由于您`$('#hdid')`用于搜索元素，因此您始终会获得第一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:54:34.163

`id=""`应该是唯一的，如果您想要多个元素`hdid`使用该`class`属性。正是这导致了您的问题。所以'修复' html 就像

```
<div class="delete">ABC<input type="text" name="hdid1" class="hdid" /> 
```

和js喜欢

```
$(function() {             
    $(".delete").click(function() {                 
        var hidden = $(this).children('input.hdid').val();                 
        console.log(hidden);                 
        console.log(this);             
    });         
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T14:55:27.350

您的问题是您有多个具有相同 ID 的元素。这实际上是不允许的，因此当询问 ID 为“hdid”的元素的值时，jQuery 将只取它找到的第一个元素的值。

这里一种可能的解决方案是只有一个隐藏的输入字段，并在单击特定项目时更新其值，然后提交表单。您可以使用属性存储要删除的项目的 ID `data-*`（假设您使用的是 HTML 5）：

```
<form id="frmDelete" method="post" action="delete-class.php">
    <input type="hidden" name="hdid" id="hdid" />
    <ul id="class">
        <li>
            <div class="delete" data-id="6">ED 123-123</div>
        </li>
        <li>
            <div class="delete" data-id="7">EDU 121-101</div>
        </li>
        <li>
            <div class="delete" data-id="8">STU 120-456</div>
        </li>               
    </ul>
</form>

<script>
    $(function() {
        $(".delete").click(function() {
            $('#hdid').val($(this).data('id'));
            var hidden = $('#hdid').val();
            console.log(hidden);
            console.log(this);
        });
    });
</script> 
```

# javascript - html表格的浮动水平滚动条

> ID：12075757
> 
> 赞同：4
> 
> 时间：2012-08-22T14:48:04.897
> 
> 标签：javascript, jquery, css, asp.net-mvc, telerik-mvc

我有一个非常高的 html 表。网页必须垂直滚动才能到达表格底部的滚动条。如果在用户滚动页面并且表格可见时，我可以在浏览器窗口底部浮动表格的水平滚动条，那就太好了。这样的事情能做到吗？

这是一个 jsFiddle 的例子：http: [//jsfiddle.net/RurTZ/1/](http://jsfiddle.net/RurTZ/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:43:37.213

@KDavid的[Grid建议很好，但是如果您正在寻找更轻的东西，我使用](http://www.matts411.com/post/grid/)[floatingScrollbar jQuery 插件](https://gist.github.com/cowboy/846423)（[演示](http://bit.ly/12v0Nx0)）取得了成功。

在确保插件 JS 被加载后，神奇的调用发生了：

```
$('.your-div').floatingScrollbar(); 
```

我还必须将 div CSS 设置为：

```
.your-div {
  overflow-x: auto;
  width: 100%;
} 
```

这是您的 jsFiddle 的一个分支，它可以正常工作：http: [//jsfiddle.net/RxTQM/1/](http://jsfiddle.net/RxTQM/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:52:41.740

是的，将它放在`<div>`标签内，并添加`overflow:scroll;`到 div 的样式中。

# gnuplot - 绘制 FFTW gnuplot

> ID：12075761
> 
> 赞同：1
> 
> 时间：2012-08-22T14:48:14.187
> 
> 标签：gnuplot

我怎样才能在 Gnuplot 中绘制像这里看到的那样的图：[http](http://www.fftw.org/accuracy/G4-1.06GHz-gcc3.4/) ://www.fftw.org/accuracy/G4-1.06GHz-gcc3.4/ ，即带有明确的 x 轴？我有一个这样的数据集：

```
2   1066.7
4   3122.9
8   4715.2
16  5538.5
32  5757.3
64  5891.4
128 5398.3
256 5280.2
512 5178.4
1024    4048.6
2048    4383
4096    3794.4 
```

每次绘制时，x 轴都是线性比例，因此我的所有值都集中在 y 轴上。我希望每个 x 值都是等距的，就像在链接图中一样。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T14:52:49.077

在 gnuplot 中，您需要告诉它使用对数坐标轴（以 2 为底）

```
set logscale x 2
set xtics 2 #label powers of 2 instead of the default
plot 'dataset.dat' w lines 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:53:50.827

你的 x 轴应该有一个对数刻度。您可以将其设置为 2

```
set logscale x 2 
```

# wordpress - WordPress插件测试单元测试或验收测试或两者兼而有之

> ID：12075764
> 
> 赞同：2
> 
> 时间：2012-08-22T14:48:21.097
> 
> 标签：wordpress, selenium, tdd, phpunit

我正在构建一个 WordPress 插件，我想使用测试驱动开发来构建。

我要测试/构建的第一件事是登录表单。

我不确定是否应该对它进行单元测试、验收测试或两者兼而有之。

我将使用 PHPUnit 和 Selenium。

我开始看的第一件事是显示登录表单。对返回的 HTML 进行单元测试是一种好习惯吗？

此外，此表单可能包含有关登录失败的错误消息。这是一个不同的单元测试还是最好留给验收测试？

如果我需要清除任何内容，我会发布一些代码示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:00:59.877

（Ian 在 Twitter 上联系我，并要求我提供一些反馈）

首先，我会说我没有使用 PHPUnit 和 Selenium 的组合来进行验收测试。我使用 Behat + Mink 来做到这一点，但我认为这不是问题所在。

要测试登录表单，您可以进行单元测试和验收测试。这只是一个你是否觉得两者都做有价值的问题。我认为从构建 WordPress 插件的角度来看，您将在创建测试以配合验收测试的时间上获得更好的回报。

其他一些答案：

1.  吐出 HTML 的单元测试是完全可以接受的。毕竟，目标是确保各个代码模块正常工作
2.  测试失败登录时发生的错误消息应该是一个单独的测试。这些天，我喜欢在单元级别练习“每个测试一个断言”

希望这可以帮助！

# asp.net - 自定义复合控件上的 RequiredFieldValidators

> ID：12075774
> 
> 赞同：1
> 
> 时间：2012-08-22T14:48:57.860
> 
> 标签：asp.net, vb.net, validation, user-controls

我设计了一个自定义复合控件。为简单起见，假设它看起来像这样：

```
Public Class MyCustomControl
    Inherits CompositeControl

Private _textbox As TextBox

Public Property Text As String
    Get
        EnsureChildControls()
        Return _textbox.Text
    End Get
    Set(value As String)
        EnsureChildControls()
        _textbox.Text = value
    End Set
End Property

Protected Overrides Sub CreateChildControls()
    _textbox = New TextBox() With {.ID = "textbox"}
    Controls.Add(_textbox)
End Sub 
```

现在我试图让消费者`MyCustomControl`使用 a`RequiredFieldValidator`来确保在`_textbox`提交表单时（在客户端）填写内部。

我试过的：

*   添加`<ValidationProperty("Text")>`到`MyCustomControl`类并用于`ControlToValidate="customControlID"`（`RequiredFieldValidator`见[这里](http://support.microsoft.com/kb/310082)）
*   `ControlToValidate="customControlID:textbox"`通过以及直接附加验证器`ControlToValidate="customControlID_textbox"`
*   添加了一个`IsRequired`属性`MyCustomControl`，将其`RequiredFieldValidator`作为子控件添加到其中`.ControlToValidate = _textbox.ID`

第三种方法似乎确实有效（有一些我尚未调查的 javascript 错误），但我真的很想让第一种方法工作（使用`ValidationProperty`属性）。

**TLDR：有没有办法使用该`ValidationProperty`属性在自定义复合控件上实现客户端验证？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:29:34.963

您的代码可以使用 ValidationProperty 属性（至少是运行 VS 2010 的简化版本）。确保您已定义 RequiredFieldValidator 的 Text 属性，以便在字段无效时实际显示一条消息。

根据关于验证摘要的评论进行编辑：

确认您的RequiredFieldValidator、ValidationSummary 以及将触发回发的控件设置了（并且相同）您的ValidationGroup 属性。

# android - 为安卓制作我自己的字体

> ID：12075778
> 
> 赞同：4
> 
> 时间：2012-08-22T14:49:13.693
> 
> 标签：android, android-fonts

嗨，我想在 android 中为阿拉伯语文本制作自己的字体。我用谷歌搜索，发现了字体结构等工具。问题是我认为这些工具会让我生成不是特定于 android 的 ttf 字体，而且它在 android 设备上可能看起来不太好我是对的????。我感到困惑:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:02:25.323

由于 Android 支持[TrueType](http://en.wikipedia.org/wiki/TrueType)字体，因此在您的应用中放入任何 TTF 都不会有任何问题。

可能出现的主要问题是，如果您的字体作为小细节，渲染软件将在低分辨率屏幕上将其删除，或者在渲染器完全失败时将其替换为 Droid（请参阅[this ）。](http://www.androidguys.com/2008/08/18/fun-with-fonts/)

# c++ - 如果显式定义了构造函数，是否必须初始化类成员？

> ID：12075781
> 
> 赞同：4
> 
> 时间：2012-08-22T14:49:17.687
> 
> 标签：c++, constructor, initialization, class-members

我的大学课程书指出：

> 当为类声明构造函数时，类对象的初始化变得强制性。

链接到[本书的特定页面。](http://books.google.co.in/books?id=TN9wQjjDwp0C&lpg=PP1&ots=kD54R42bUr&dq=object%20oriented%20programming%20in%20c%2B%2B&pg=PA146#v=onepage&q&f=false)

我们可以声明什么都不做的构造函数，因此初始化肯定不是强制性的，不是吗？

如果不是，作者的意思是说，如果我们显式声明构造函数，我们应该在*风格上*初始化类成员，也就是说，它是作为规则还是指南？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T14:52:49.373

如果出现以下情况，我们必须在构造函数中初始化成员：

1.  成员没有默认构造函数。
2.  成员是引用/常量引用。
3.  成员是常量。（感谢阿努比斯先生）

如果我们不想要任何奇怪的行为，应该初始化成员：

1.  成员是指针
2.  成员是标准的吊舱类型

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T14:51:25.787

> 当为类声明构造函数时，类对象的初始化变得强制性。

这是真的，但初始化不必是明确的。请注意该术语`objects`而不是`member`.

如果您不明确地这样做，类类型成员将被默认初始化。

```
class A {};
class B
{
   A a;
   int x;
   B()
   {
      //a is initialized here, although you didn't do it explicitly

      //x is not initialized, nor is it mandatory to initialize it
      //but x is not an object
   }
}; 
```

当然，“强制”是一个强词。初始化 不是强制性的`x`，但在你这样做之前你不能对它做任何事情。:)

# java - Android：我应该如何优化此 AIDL 代码并避免竞争条件

> ID：12075786
> 
> 赞同：0
> 
> 时间：2012-08-22T14:49:29.223
> 
> 标签：java, android, android-service, aidl

我正在创建一个媒体播放器应用程序。

当我启动或恢复应用程序时，我想检查媒体播放器是否已经在播放歌曲。

因此，如果是，我会将我的 Pause/Play 设置`ToggleButton`为**Pause**，否则它没有更早播放，那么按钮将设置为**Play**。

（例如，如果用户已经在使用媒体播放器并通过按主页或返回按钮离开应用程序，现在他恢复播放器。那么应该正确配置按钮。）

实际的 MediaPlayer 对象是在服务中实现的，所有的通信都是通过`AIDL interface`方法完成的。

马上，

1.  在`onResume`我打电话`AsynTask method`时，它将检查所有正在运行的服务并检查我`MusicService`是否也在运行。
2.  如果是，那么我打电话`aidl method`来检查是否 `mediaPlayer.isPlaying()`是真的。
3.  如果是，`toggleButton`则将设置为暂停（即当前播放），否则播放。

**问题：** 这`AsyncTask`是在创造竞争条件。那是有时它按预期运行，有时它只是抛出错误

代码：

```
// In onResume
protected void onResume() {
    new PlayerStatusCheck().execute();
}

//AsyncTask Class
class PlayerStatusCheck extends AsyncTask {
    boolean isServiceAvailable;
    private boolean isMyServiceRunning() {
        ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager
                .getRunningServices(Integer.MAX_VALUE)) {
            if (com.example.playingworking.MusicService.class.getName()
                    .equals(service.service.getClassName())) {
                return true;
            }
        }
        return false;
    }

    @Override
    protected Object doInBackground(Object... params) {
        isServiceAvailable = isMyServiceRunning();
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        try {
            if (!isServiceAvailable) {
                doInBackground(null);
            } else {
                if (aidlObject.isMediaPlaying()) {
                    tbPlayPause.setChecked(true);
                } else {
                    tbPlayPause.setChecked(false);
                }
            }
        } catch (RemoteException e) {
            Toast.makeText(MainActivity.this,
                    "MainActivity onPostExecute: " + e.toString(),
                    Toast.LENGTH_SHORT).show();
        }
    }
} 
```

**MusicService 中的代码：**

```
//In IBinder onBind()
public boolean isMediaPlaying(){
    if(mediaPlayer.isPlaying()){
        return true;
    }
    return false;
} 
```

请建议...谢谢

# .net - Tumblr C# 访问令牌 oauth_signature 与预期值不匹配 401 错误

> ID：12075787
> 
> 赞同：2
> 
> 时间：2012-08-22T14:49:31.860
> 
> 标签：.net, oauth, tumblr

我正在开发一个 .net 应用程序来访问我的 tumblr 帐户。

在 ouath 握手中，我正在通过授权步骤。但是，当尝试获取我的访问令牌时（在我在 tumblr 上授权我的帐户以授予我的应用程序权限之后）我收到 oauth_signature 的 401 错误与预期值不匹配

这是我为获取访问令牌而调用的网址……这种格式有问题吗？（出于隐私目的，我为我的消费者密钥、oauth 令牌和 oauth 验证器添加了一些 z）。这与我用于 twitter 的格式相同，效果很好。

有任何想法吗？

[http://www.tumblr.com/oauth/access_token?oauth_callback=oob&oauth_consumer_key=UDwa2ZMvBGU53XXXXXXXXXXXXXXXXXXXXXX&oauth_nonce=9299949&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1345645132&oauth_token=kg6M3FeYUoHVEMRQZZZZZZZZZZZZZZZZZZZZZZZZ&oauth_verifier=BgXcqcmyiSuJWHggMzCQcZZZZZZZZZZZZZZZZZZZZ&oauth_version=1.0&oauth_signature=iPbc5kE5LbudXJm1MVc0VNeIQxA%3D](http://www.tumblr.com/oauth/access_token?oauth_callback=oob&oauth_consumer_key=UDwa2ZMvBGU53XXXXXXXXXXXXXXXXXXXXXX&oauth_nonce=9299949&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1345645132&oauth_token=kg6M3FeYUoHVEMRQZZZZZZZZZZZZZZZZZZZZZZZZ&oauth_verifier=BgXcqcmyiSuJWHggMzCQcZZZZZZZZZZZZZZZZZZZZ&oauth_version=1.0&oauth_signature=iPbc5kE5LbudXJm1MVc0VNeIQxA%3D)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T02:00:44.173

原来，在设置 URL 以请求授权的步骤中获得的 oauth 令牌秘密也需要保存，然后在最后一步中使用，以获取访问令牌和秘密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-30T14:41:00.287

您只需要在执行调用后提取 oauth_token_secret

```
https://www.tumblr.com/oauth/request_token 
```

第二次调用的参数：

```
$params = array(
            "oauth_consumer_key" => $this->key,
            "oauth_nonce" => time(),
            "oauth_signature_method" => "HMAC-SHA1",
            "oauth_timestamp" => time(),
            "oauth_token" => $tumblr_oauth_token,
            "oauth_verifier" => $oauth_verifier,
            "oauth_version" => "1.0",
        ); 
```

然后使用`token_secret`for `oauth_signature`：

```
$secret = encode_rfc3986($token)."&".encode_rfc3986($token_secret);
$params['oauth_signature']=encode_rfc3986(base64_encode(hash_hmac('sha1',$baseString, $secret, TRUE))); 
```

全部完成。该问题是由于`oauth_signature`.

# c# - 只有继承和隐式多态映射的类才会出现代理的持久性？

> ID：12075789
> 
> 赞同：1
> 
> 时间：2012-08-22T14:49:41.283
> 
> 标签：c#, inheritance, nhibernate-mapping

我的实体看起来像这样简化： ![baseobject 和 product 是抽象的](../Images/b8e6b477e54d03b525dd01989e8b0f51.png)

我使用xml文件映射。除了抽象类之外，我为每个类都有一个表和一个 xml 文件。因为我使用延迟加载，所以我有很多代理。奇怪的是，当我调用`Refresh(obj)`其中一个时，它每次都有效，除非对象是 Product1Proxy 或 Product2Proxy 类型。然后我得到一个“...代理没有持久性”错误。

**我尝试了什么？**

*   添加`<mapping assembly="Project.DomainModel"/>`到 App.config
*   检查所有 .hbm.xml 文件是否都是嵌入式资源（它们是）
*   我的课是公开的
*   他们有一个公共的默认构造函数

我的 NHibernate 版本是 3.3。

我的最后一个想法是我应该为我的产品使用另一个映射，但是为什么它会与 CustomerProxy（和其他）一起使用呢？在我看来，Customer 和 BaseObject 与 Product 和 Product1 具有相同的关系。

**会不会是继承映射？还有其他我看不到的问题吗？**

**更新：**现在我尝试在调用对象之前取消代理对象`Refresh(obj)`，但该方法仍然返回例如 Product1Proxy。然后我尝试`myObject is INHibernateProxy`了，但总是评估为假。为什么 NHibernate 不能识别它自己的代理？

**update2：**我刚刚注意到类型为 Product1Proxy 的 myObject 声明其基本对象是*Product*而不是*Product1*。我完全错了还是应该这样？

**更新3：**

```
session.Refresh((NHibernate.Proxy.INHibernateProxy)product); 
```

例如，这会导致无效的转换异常（Product1Proxy 无法转换为 INHibernateProxy）。

```
if (kitProduct is NHibernate.Proxy.INHibernateProxy) {
...
} 
```

从来都不是真的……

如果我称之为

```
IList kitProductTemplates = ProductManager.Instance.LoadProductTemplates(checkBoxShowHidden.Checked); 
```

Product1 的列表（返回真正的 Product1，没有代理），但如果我使用 foreach 遍历该列表，则对象是代理。查询如下所示：

```
public IList LoadAllTemplates(bool showHidden)
{
    IList loadedObjects = (IList)new ArrayList();
    try
    {
        ISession session = HibernateSessionManager.Instance.GetSession();
        ICriteria crit = session.CreateCriteria(typeof(Product1));
        crit.Add(Restrictions.Eq("IsTemplate", true));
        crit.SetResultTransformer(new DistinctRootEntityResultTransformer());
        crit.AddOrder(Order.Asc("Name"));
        crit.SetFetchMode("PickingList", FetchMode.Join);
        crit.SetFetchMode("SOP", FetchMode.Join);

        if (!showHidden) {

            crit.Add(Restrictions.Eq("IsHidden", false));
        }
        loadedObjects = crit.List();
    }
    catch (Exception ex)
    {
        throw (ex);
    }
    return loadedObjects;
} 
```

（这是我刚刚发现的，否则我会早点添加它）

**update4：**我可以再次缩小问题范围。当它是第一次加载对象时的会话时，它不会发生。但我不能保证对于每个可能的用例。

最好的问候， 期待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:58:32.857

您应该有一个被代理的抽象类的映射。

代理是根据 NH 可用的信息生成的，而不涉及 DB（这是拥有代理的全部意义）。当您有对 a 的引用时`Product`，它可能是 a`Product1`或 a `Product2`，然后 NH 会生成一个继承自`Product`( `ProductProxy`) 的代理。要知道代理是否实际上应该是`Product1`or `Product2`，它必须接触数据库，这不是我们想要的。

解决问题：映射`Product`和映射`Product1`并`Product2`使用子类或连接子类。避免引用`BaseObject`, 以避免`BaseObjectProxy`生成 '。

**编辑：**如果您仍然需要参考`BaseObject`，请使用`<any>`.

**编辑 2**：请注意，除非您在事务开始时，否则您永远不知道是否从查询中获得代理。每当为产品创建代理时，NH 都会从返回相同产品的每个查询中不断返回此代理。即使查询不会返回代理。这是为了确保您始终为同一事物获得相同的实例。

例子：

在 DB 中，您有 ID 为 1、2 和 3 的 Product1。

```
// NH creates a proxy.
var proxy = session.Load<Product>(1);

// NH returns all Product1 instances, including the proxy
var allProducts = session.CreateCriteria(typeof(Product1)).List(); 
```

allProducts 包含一个 id 为 1 的代理和一个 id 为 2 和 3 的非代理。

# domain-driven-design - A生命取决于B => A和B在同一聚合中？

> ID：12075800
> 
> 赞同：1
> 
> 时间：2012-08-22T14:50:13.447
> 
> 标签：domain-driven-design

遵循 DDD 方法，当我有两个实体`A`并且`B`where`B`的生命周期取决于`A`生命周期时（我的意思是`B`仅在存在时才`A`存在 - 例如`A`表示 an`Application`并表示an`B`的运行），我应该推断出它并属于同一个聚合根在哪里？`Instance``Application``A``B``A`

我读过很多文章和书籍，他们总是说在聚合内部，有一个根实体和其他元素。这些其他元素可能是其他实体或值对象。内部实体的身份对于聚合是本地的，因此它们仅在聚合内部才有意义。我应该从最后一句话（即本地身份）中解释内部实体的生命周期取决于根实体之一吗？

我已经举例说明了`Stackoverflow`，其中两个实体`A`和`B`的`B`生命周期取决于`A`的生命周期（即`B`仅在存在时才`A`存在），它们位于不同的聚合中。通常，这是因为提出问题的人有兴趣拥有两个存储库（一个用于`A`，另一个用于`B`），而在遵循 DDD 时，应仅为根聚合创建存储库。

感谢澄清这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:34:44.273

聚合的中心功能是围绕集群或相关实体创建一致性边界。这种一致性边界取决于手头的用例，甚至可能由于技术要求（例如性能等）而在单个用例内发生变化。

> 我应该推断出 A 和 B 属于同一个聚合，其中 A 是根吗？

情况可能是这样，但是您也可以有一个情况，其中`Application`和都是通过 ID`Instance`聚合和`Instance`引用。`Application`要考虑的一个是最终一致性的概念。例如，是否可以删除一个应用程序实例，从而以最终一致的方式删除相应的应用程序实例？

> 我应该从最后一句话（即本地身份）中解释内部实体的生命周期取决于根实体之一吗？

是的。聚合应封装其组成实体。外部引用只能通过 ID 或直接引用对其他聚合进行，但推荐的方法是通过 ID 引用。

查看[Vaughn Vernon 的有效聚合设计](http://dddcommunity.org/library/vernon_2011)

# shell - 如何确定文件结尾并且不将其发送到管道文件？

> ID：12075801
> 
> 赞同：0
> 
> 时间：2012-08-22T14:50:13.217
> 
> 标签：shell, unix

我需要检查Unix文件中文件结束信号的位置，并将其设置为不发送到管道文件。

我需要这个，因为我需要使用**cat**发送文件列表，当它到达第一个文件的 eof 时，它被发送到管道并被关闭。因此，该过程停止。

有人可以帮助解决这个问题吗？

提前致谢。

**编辑**代码：

```
mkfifo file.pipe cat file1.txt file2.txt > mkfifo.pipe 
```

发送 file1.txt 的内容后，它发送 EOF 并关闭管道文件。因此不发送 file2.txt。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T00:35:20.747

1.  这似乎对我在 Linux 上运行良好：

    ```
    $ mkfifo fifo
    $ yes aaa | head -n 1000 > a
    $ yes bbb | head -n 1000 > b
    $ cat fifo > result &
    $ cat a b > fifo
    $ wc result
    2000 2000 8000 result 
    ```

    我真的认为您应该从命名管道的两端向我们展示您的实际代码。您还应该告诉我们更多关于您的环境的信息。“Unix”并没有真正的帮助；告诉我们您的操作系统和硬件平台。

2.  没有“EOF 字符”这样的东西，因此它不能以任何形状或形式包含在文件中。当到达文件结尾时，相应的[`read()`](http://linux.die.net/man/2/read)系统调用将返回`0`，并且*将由*用户空间转换为它必须报告文件结尾的任何方案。

    因此，在这种特殊情况下`cat`，除了其参数的内容外，不会通过管道发送任何内容 - 它只是在完成输入后关闭管道。

# javascript - 我们可以得到 jQuery Validate 错误类型吗？

> ID：12075804
> 
> 赞同：2
> 
> 时间：2012-08-22T14:50:21.047
> 
> 标签：javascript, jquery-validate

我正在使用 jQuery 验证插件。有没有办法从 jQuery 表单验证中获取错误类型？例如，

```
$('registration-form').validate({
    rules: {
        email: {
            required: true,
            email: true
        }
    },
    messages: {
        email: {
            required: "This is a required field.",
            email: "This is not a valid email address"
        }
    },
    errorPlacement: function(error, element) {
        error.appendTo(element.parent());
    }
}); 
```

我只想将“必需”错误生成的错误消息放在 html 页面某处的“div”内，而不是将其附加到“element.parent()”。如果我能得到错误类型，例如“必需”或“电子邮件”错误，我可以编写代码来执行此操作。

任何帮助表示赞赏！谢谢！

aobs

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-22T15:02:54.853

您可以轻松编辑插件。您可以为每个验证添加一个参数（请参阅正则表达式）以确定哪个参数被捕获。

# git - Git子模块工作流程问题

> ID：12075809
> 
> 赞同：7
> 
> 时间：2012-08-22T14:50:30.077
> 
> 标签：git, git-submodules

我们最近在使用 Git 存储库时遇到了很多问题。我们是 git 子模块的用户，我们的应用程序之间共有 4 个共享存储库。

例如，存储库“网站”共有 3 个子模块。

```
[submodule "vendor/api"]
    path = vendor/api
    url = git@your.cool.domain.com:api
[submodule "vendor/auth"]
    path = vendor/auth
    url = git@your.cool.domain.com:auth
[submodule "vendor/tools"]
    path = vendor/tools
    url = git@your.cool.domain.com:tools 
```

我们已经正确签出了我们的主存储库“网站”。现在我的一位同事做了一个推，然后我`git pull; git status`：

```
# On branch master
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   vendor/api (new commits)
#   modified:   vendor/auth (new commits)
#   modified:   vendor/tools (new commits)
#
no changes added to commit (use "git add" and/or "git commit -a")

mcfly@future:~/projects/website$ git diff

diff --git a/vendor/api b/vendor/api
index 41795fc..b582d80 160000
--- a/vendor/api
+++ b/vendor/api
@@ -1 +1 @@
-Subproject commit 41795fc4dde464d633f4c0f01eebb6ab1ad55582
+Subproject commit b582d802419b0ee7bc3959e7623fec0b94680269
diff --git a/vendor/auth b/vendor/auth
index a00369b..4599a71 160000
--- a/vendor/auth
+++ b/vendor/auth
@@ -1 +1 @@
-Subproject commit a00369bf29f14c761ce71f7b95aa1e9c107fb2ed
+Subproject commit 4599a7179c9b7ca4afa610a15ffa4a8fc6ebf911
diff --git a/vendor/tools b/vendor/tools
index f966744..c678cf6 160000
--- a/vendor/tools
+++ b/vendor/tools
@@ -1 +1 @@
-Subproject commit f966744359510656b492ae3091288664cdb1410b
+Subproject commit c678cf6f599fc450e312f0459ffe74e593f5890f 
```

那有什么问题`git diff`？问题是每个子模块的新提交都比将被覆盖的提交旧。这不是我们想要的，因为在存储库上正确指向`41795fc4dde464d633f4c0f01eebb6ab1ad55582`，`a00369bf29f14c761ce71f7b95aa1e9c107fb2ed`并且`f966744359510656b492ae3091288664cdb1410b`如果我们将此修改添加到我们的下一次提交中，我们可能会阻止这些事情。我不知道为什么它得到了最旧的版本而不是最新的版本。

我试图自己解决这个问题，但没有成功：

```
mcfly@future:~/projects/website$ git pull; git submodule foreach git pull 
```

执行最后一个命令是不正确的，因为我们可能会将“网站”的指针更新为每个子模块的最新版本，而我们不希望这样。我们希望保留它在存储库中的正确修订。

我要解释的一件事是我们通常在这个子模块中工作，例如：

```
mcfly@future:~/projects/website$ cd vendor/api
mcfly@future:~/projects/website/vendor/api$ git checkout master
mcfly@future:~/projects/website/vendor/api$ echo "lorem ipsum" >> example.file
mcfly@future:~/projects/website/vendor/api$ git add example.file; git push 
```

当我们做一个`git submodule update`'master'分支时，每个子模块都会丢失。

最后，什么是正确的方法`push`，`pull`并且使用子模块并且没有所有这些问题？

先感谢您

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T15:41:24.273

查看[git-scm 文档](http://git-scm.com/book/en/Git-Tools-Submodules)并将其传递给您的团队。您看到的现象在[“使用子模块克隆项目”](http://git-scm.com/book/en/Git-Tools-Submodules#Cloning-a-Project-with-Submodules)部分中进行了准确描述。

首先，您观察到的初始状态`git diff`显示了这些提交哈希的意外相反结果，表明您在父 repo 中合并了子模块更新，但没有在`git submodule update`本地运行。`git submodule update`每次在主项目中拉下子模块更改时，您都必须运行。为什么？子模块的指针，即父存储库认为的状态`vendor/auth`，实际上并不是`HEAD`子模块存储库的提交`vendor/auth`。在您了解 git 如何跟踪子模块状态之前，这有点令人困惑。同样，[git-scm 文档](http://git-scm.com/book/en/Git-Tools-Submodules#Cloning-a-Project-with-Submodules)值得一读。

其次，设计`git submodule update`放弃`master`子模块上的分支。查看这些文档的[“子模块问题”](http://git-scm.com/book/en/Git-Tools-Submodules#Issues-with-Submodules)部分。与 git 一样，手册页告诉我们需要知道的内容：

```
update
   Update the registered submodules, i.e. clone missing submodules and checkout the commit specified in the index of the containing repository. This will
   make the submodules HEAD be detached unless --rebase or --merge is specified or the key submodule.$name.update is set to rebase, merge or none.  none
   can be overridden by specifying --checkout. 
```

`HEAD`每次发布时，您都会将子模块置于“分离”状态，`git submodule update`而无需争论。

那么如何在没有这些问题的情况下使用子模块呢？首先，问问你自己和你的团队：我们真的需要他们吗？在某些情况下，子模块是一个强大且有用的功能，但它们更多地是为 3rd 方库设计的，而不是拆分为子存储库的活动项目。您当然可以以这种方式使用它们，但管理开销可能会迅速超过您获得的任何好处。除非您的存储库非常大，或者您的子模块是完全模块化的，否则值得问[“我们使用单个存储库会更好吗？”](https://softwareengineering.stackexchange.com/q/161293/57052) 即使答案是“否”，请检查[子树合并，](http://git-scm.com/book/en/Git-Tools-Subtree-Merging)这对于您的用例可能更成功。

If you'd still like to use submodules, check out [the docs](http://git-scm.com/book/en/Git-Tools-Submodules#Issues-with-Submodules) linked above, as well as the many [questions](https://stackoverflow.com/questions/1596822/git-submodules-workflow) and [answers](https://stackoverflow.com/a/1979194/877115) on SO and other sites about submodule workflows. They should help you achieve a saner process.

# android - 使用 OAuth 和 AccountManager 进行身份验证

> ID：12075811
> 
> 赞同：0
> 
> 时间：2012-08-22T14:50:37.143
> 
> 标签：android, oauth, accountmanager

我在使用 OAuth 和 YouTube 进行身份验证时遇到问题。授权令牌的检索顺利，但 gdata.youtube.com 声称授权密钥无效。我已经使用 invalidateAuthToken 重新生成了密钥，所以密钥还没有过期。

我错过了什么？

选择账户

```
Intent intent = accountManager.getAccountManager().newChooseAccountIntent(
    null, 
    null, 
    new String[]{"com.google"}, 
    true, 
    null,
    AUTH_TOKEN_TYPE, 
    new String[] {"text"}, 
    null);

startActivityForResult(intent, REQUEST_AUTHENTICATE); 
```

获取授权令牌。

```
Bundle options = new Bundle();
options.putString("client_id", "67674xxxxxx.apps.googleusercontent.com");

accountManager.getAccountManager().getAuthToken(
    account, 
    AUTH_TOKEN_TYPE, 
    options, 
    (Activity)context, 
    accountManagerCallback, 
    null); 
```

Http请求

```
URL feedUrl = new URL(build_query(action, arguments));

final HttpGet httpGet = new HttpGet(feedUrl.toURI());
HttpParams httpParameters = new BasicHttpParams();      
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

final DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);

inputStream = timedCall(new Callable<InputStream>() {
    @Override
    public InputStream call() throws Exception {
            httpGet.addHeader("Authorization", "Bearer " + authAccount.getActiveAccountAuthToken());
            httpGet.addHeader("X-GData-Key", "key=");   

            HttpResponse response = httpClient.execute(httpGet);
            int responseCode = response.getStatusLine().getStatusCode();

            if(responseCode == 401) {
                response.getEntity().consumeContent();
                throw new AuthAccountException(responseCode);
            }
            return response.getEntity().getContent();
        }       
    },
    15, TimeUnit.SECONDS); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:34:29.643

我使用了错误的范围。我没有收到访问令牌，而是收到了客户端登录令牌。OAuth 2.0 的正确范围是[https://gdata.youtube.com](https://gdata.youtube.com)

# symfony - 每次重新加载页面时，如何强制资产渲染资产？

> ID：12075812
> 
> 赞同：12
> 
> 时间：2012-08-22T14:50:44.103
> 
> 标签：symfony, less, assetic

如何在每次重新加载页面时强制assetic呈现资产（无论资产是否被修改）？

关于我的问题的更多解释：

我目前正在开发一个 Symfony2 项目，我使用 Assetic 来管理和编译 .less 文件。我得到了一切正常工作，但我有一个小问题，我想解决。

在 config.yml 中，我将资产 use_controller 设置为 true。

```
# Assetic Configuration
assetic:
debug:          %kernel.debug%
use_controller: true 
```

结果是 Symfony 每次修改 .less 文件时都会动态呈现新的 .css 文件。这很棒。

我的问题是我使用了一个主 project.less 文件，我在其中导入了所有其他 .less 文件

```
// Import Twitter Bootstrap
@import "../../../../../../vendor/twitter/bootstrap/less/bootstrap.less";

// Import Foo
@import "foo.less";

... 
```

它允许我保持一个干净的结构，也可以从供应商那里导入 .less 文件，例如：twitter bootstrap。

在我的 Twig 模板中，我只调用这个主文件。

```
{% stylesheets '@ProjectWebBundle/Resources/public/less/project.less' filter='less' %}
        <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
{% endstylesheets %} 
```

由于这个主 .less 文件从未被修改过，因此 Assetic 不会重新编译资产。这就是为什么我希望它渲染文件不管它们是否被修改。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T09:47:36.940

我正在使用 Assetic 的 Lessphp 过滤器来缓存文件。对于我自己，我创建了一个扩展默认 Assetic 过滤器的类，并使用当前时间触及每个文件

```
<?php

namespace Xxx\AssetsBundle\Assetic\Filter;

use Assetic\Asset\AssetInterface;
use Assetic\Filter\LessphpFilter;

class LessphpNonCachedFilter extends LessphpFilter
{
    public function filterLoad(AssetInterface $asset)
    {
        $root = $asset->getSourceRoot();
        $path = $asset->getSourcePath();

        $filename = realpath($root . '/' . $path);

        if (file_exists($filename)) {
            touch($filename);
        }

        parent::filterLoad($asset);
    }
} 
```

您必须在参数部分（services.yml）中设置“assetic.filter.lessphp.class”：

```
parameters:
    assetic.filter.lessphp.class: Xxx\AssetsBundle\Assetic\Filter\LessphpNonCachedFilter 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-13T14:58:41.500

**AFAIK还**没有完美的解决方案

 **我用：

```
php app/console assetic:dump --watch 
```

每次检测到模板上引用的任何 .less 文件发生更改时，它都会编译您的 .less 文件。

要*强制*编译，您必须在“主”文件（@imports 其他文件的文件）中进行任何更改。但是，好消息是这足以“触摸”文件来做到这一点。因此，您可以在每次需要时手动触摸它：

```
touch ~/web/css/main.less; 
```

或者，我通常做的是设置一个脚本，每 60 秒左右接触一次这个“主”文件：

```
while true; do
    sleep 60
    touch ~/web/css/main.less
done 
```

这应该适用于linux和mac。

希望能帮助到你。至少暂时:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T05:20:03.013

我创建[了一个简单的脚本](https://github.com/slavafomin/symfony/tree/master/assetic-watch)来解决这个问题。请尝试一下，如果有帮助，请告诉我。

```
#!/bin/bash

# assetic-watch: A very simple shell-script to recursively and efficiently
# watch for asset changes and to trigger automatic recompilation.
#
# By Slava Fomin II <s.fomin@betsol.ru>  
# Feel free to contact me.
# From Russia with Love.
# Let's make this World a Better place!
# --------------------------------------

#===============#
# CONFIGURATION #
#===============#

# Path relative to "Symfony/src" directory.
# File changes under specified directory will trigger recompilation
# of all assets.
WATCH_PATH="Name/Bundle/NameBundle/Resources/public/css"

# Environment.
ENV="dev"

# Additional options for "app/console".
OPTS=""

# inotifywait events to watch for.
INW_EVENTS="close_write,moved_to,create"

# Optional inotifywait arguments.
INW_OPTS=""

# Relative path to the Symfony root directory.
SYMFONY_PATH="../"

#============#
# PROCESSING #
#============#

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
CONSOLE_PATH="$SCRIPT_DIR/${SYMFONY_PATH}/app/console"
SRC_PATH="$SCRIPT_DIR/${SYMFONY_PATH}/src/$WATCH_PATH"

quietly() { "$@" > /dev/null 2>&1; }

while true; do
    quietly inotifywait --recursive -e $INW_EVENTS $INW_OPTS $SRC_PATH
    php $CONSOLE_PATH assetic:dump --env=$ENV $OPTS
done 
```

我真的希望 Symfony 开发人员能够在未来版本的 Assetic 包中解决这个问题。我相信这是一个严重的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T15:37:01.127

`use_controller: false`完成修改后，您应该传递并编译您的资产。

如果你想编译你的资产：

```
php app/console assetic:dump 
```**

# c# - 正则表达式捕获

> ID：12075820
> 
> 赞同：1
> 
> 时间：2012-08-22T14:51:22.823
> 
> 标签：c#, regex

我无法从字符串中捕获值。我只想要我不想捕获的数字`T`or `:`。这个失败的测试说明：

```
[TestMethod]
public void RegExTest()
{
    var rex = new Regex("^T([0-9]+):"); //as far as I understand, the () denote the capture group
    var match = rex.Match("T12:abc");
    Assert.IsTrue(match.Success);
    Assert.IsTrue(match.Groups[0].Success);
    Assert.AreEqual("12", match.Groups[0].Captures[0]); //fails, actual is "T12:"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:00:54.057

从零开始的组集合表示从索引 1 捕获组。
`Groups[0]`始终表示整个匹配。
因此你需要做`Groups[1]`而不是`Groups[0]`上面。

> MatchGroups 属性返回一个 GroupCollection 对象，该对象包含表示单个匹配中捕获的组的 Group 对象。集合中的第一个 Group 对象（在索引 0 处）表示整个匹配。后面的每个对象代表单个捕获组的结果。

[集团收藏](http://msdn.microsoft.com/en-us/library/30wbz966.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:09:04.250

所以你想匹配**T**和之间的数字**：**

这是一个简单`Regex`的

```
@"(?<=T)\d+(?=:)"//no need of groups here 
```

**关于您的正则表达式：**

你的正则表达式

```
^T([0-9]+): 
```

应该是这样的

```
T(\d+)://^ is not needed and [0-9] can be represented as \d 
```

这里

```
Group[0] would be T:12//a full match
Group[1] would be 12//1st match within ()i.e.1st ()
Group[2] would be //2nd match within ()i.e 2nd () 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:56:41.110

通过命名组得到它。

```
[TestMethod]
public void RegExTest()
{
    var rex = new Regex("^T(?<N>[0-9]+):");
    var match = rex.Match("T12:abc");
    Assert.IsTrue(match.Success);
    Assert.IsTrue(match.Groups[0].Success);
    Assert.AreEqual("12", match.Groups["N"].Value);
} 
```

应该更加努力：[如何访问 .NET Regex 中的命名捕获组？](https://stackoverflow.com/questions/906493/regex-named-capturing-groups-in-net)

# php - "DateTime->modify('+0 days')" 修改DateTime对象

> ID：12075821
> 
> 赞同：6
> 
> 时间：2012-08-22T14:51:23.107
> 
> 标签：php, datetime

谁能详细说明为什么以下`DateTime->modify()`代码会产生那些奇怪的矛盾结果，具体取决于 PHP 版本（这是一个错误吗？在哪个 PHP 版本中？）。

我希望所有示例都产生创建对象的相同日期和时间，但显然情况并非如此。

唯一可行的例子是中间的那个，`DateTime`对象是从 UNIX 时间戳创建的，并且时区是在之后设置的（它不能在构造时设置，因为这将被忽略）。

PHP 5.4.4 和 5.4.6：

```
FROM TIMESTAMP, NO TZ:
2012-08-21 22:00:00 GMT+0000 (offset 0)  <-- different 
2012-08-21 23:00:00 GMT+0000 (offset 0)  <-- from this
FROM TIMESTAMP, WITH TZ:
2012-08-22 00:00:00 CEST (offset 7200)
2012-08-22 00:00:00 CEST (offset 7200)
FROM STRING:
2012-08-22 00:00:00 CEST (offset 7200)
2012-08-22 00:00:00 CEST (offset 7200) 
```

PHP 5.2.0：

```
FROM TIMESTAMP, NO TZ:
2012-08-21 22:00:00 GMT+0100 (offset 7200)
2012-08-21 22:00:00 GMT+0100 (offset 7200)
FROM TIMESTAMP, WITH TZ:
2012-08-22 00:00:00 CEST (offset 7200)
2012-08-22 00:00:00 CEST (offset 7200)
FROM STRING:
2012-08-22 00:00:00 CEST (offset 7200)  <-- different
2012-08-21 23:00:00 CEST (offset 7200)  <-- from this 
```

代码：

```
<?php
  $tz = new DateTimeZone('Europe/Berlin');

  echo "FROM TIMESTAMP, NO TZ:\n";

  $date = new DateTime('@'.strtotime('2012-08-22 00:00:00 CEST'));
  echo $date->format('Y-m-d H:i:s T').' (offset '.$date->getOffset().")\n";

  $date->modify('+0 days');
  echo $date->format('Y-m-d H:i:s T').' (offset '.$date->getOffset().")\n";

  echo "FROM TIMESTAMP, WITH TZ:\n";

  $date = new DateTime('@'.strtotime('2012-08-22 00:00:00 CEST'));
  $date->setTimezone($tz);
  echo $date->format('Y-m-d H:i:s T').' (offset '.$date->getOffset().")\n";

  $date->modify('+0 days');
  echo $date->format('Y-m-d H:i:s T').' (offset '.$date->getOffset().")\n";

  echo "FROM STRING:\n";

  $date = new DateTime('2012-08-22 00:00:00 CEST', $tz);
  echo $date->format('Y-m-d H:i:s T').' (offset '.$date->getOffset().")\n";

  $date->modify('+0 days');
  echo $date->format('Y-m-d H:i:s T').' (offset '.$date->getOffset().")\n";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:06:06.970

使用`DateTime::add()`和指定适当`DateInterval "P0D"`的日期不会更改日期。我认为这是 PHP 中的一个错误，请善待并报告它。

# android - 从android中的JPEG标头中提取曝光时间

> ID：12075827
> 
> 赞同：1
> 
> 时间：2012-08-22T14:51:41.120
> 
> 标签：android, jpeg

我正在做一个相机应用程序，我需要提取标题中图片的曝光时间。我正在通过网络传输图像，我需要在实际图片之前传输曝光时间。

现在我知道在像 irfanview 这样的程序中，您可以提取曝光时间，但我需要使用 Android SDK 来完成，所以我想知道这是否可能，或者是否有人已经这样做了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:55:28.173

试试这个：

```
 try {
        ExifInterface exif = new ExifInterface("test.jpg");
        String exposure = exif.getAttribute(ExifInterface.TAG_EXPOSURE_TIME);
    } catch (IOException e) {
        // Handle IO error
    } 
```

# java - Java - 带重音符号的 InetSocketAddress 主机名

> ID：12075828
> 
> 赞同：6
> 
> 时间：2012-08-22T14:51:42.733
> 
> 标签：java, sockets, diacritics, host, hostname

我在与主机名中有一些重音符号 (é è ô...) 的服务器建立连接时遇到问题。

例如 ：

```
String oUrl = "www.hôtel.fr";   
System.out.println(oUrl);
InetSocketAddress isa = new InetSocketAddress(oUrl.toString(), 80);
System.out.println(isa.isUnresolved()); 
```

ISA 永远无法解决。它适用于 www.google.fr。

我尝试对主机进行 URLEncode（使用 UTF-8 字符集的 URLEncoder，因此主机名是 www.h%C3%B4tel.fr），但没有结果。

有人有一些线索吗？我在网上找不到任何东西。

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:58:05.507

在域名中，变音符号、重音符号等必须通过punycode进行转换。在您的示例中，它将以`http://www.xn--htel-vqa.fr/`. 如果没有经过测试，[IDN](http://docs.oracle.com/javase/6/docs/api/java/net/IDN.html)类可能会有所帮助。

# iphone - CoreData '这个 NSPersistentStoreCoordinator 没有持久存储。它无法执行保存操作。

> ID：12075831
> 
> 赞同：27
> 
> 时间：2012-08-22T14:51:46.370
> 
> 标签：iphone, objective-c, ipad, core-data, icloud

我一直按照[这些](https://goddess-gate.com/dc2/index.php/post/452)说明来帮助将 iCloud 支持与 CoreData 集成，但我遇到了一些错误。

我的 AppDelegate 中有这个：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if (persistentStoreCoordinator != nil) {
        return persistentStoreCoordinator;
    }

    //NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Little_Wedding_Book_Universal.sqlite"];
    NSString *storePath = [[NSString stringWithFormat:@"%@", [self applicationDocumentsDirectory]] stringByAppendingPathComponent:@"appname.sqlite"];
    NSURL *storeURL = [NSURL fileURLWithPath:storePath];

    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    NSPersistentStoreCoordinator* psc = persistentStoreCoordinator;

    if (IOS_VERSION_GREATER_THAN_OR_EQUAL_TO(@"5.0"))
    {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSFileManager *fileManager = [NSFileManager defaultManager];

            // Migrate datamodel
            NSDictionary *options = nil;

            // this needs to match the entitlements and provisioning profile
            NSURL *cloudURL = [fileManager URLForUbiquityContainerIdentifier:@"J9VXW4WCE8.com.company.appname"];
            NSString* coreDataCloudContent = [[cloudURL path] stringByAppendingPathComponent:@"data"];
            if ([coreDataCloudContent length] != 0) {
                // iCloud is available
                cloudURL = [NSURL fileURLWithPath:coreDataCloudContent];

                options = [NSDictionary dictionaryWithObjectsAndKeys:
                           [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                           [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                           @"appname.store", NSPersistentStoreUbiquitousContentNameKey,
                           cloudURL, NSPersistentStoreUbiquitousContentURLKey,
                           nil];
            }
            else
            {
                // iCloud is not available
                options = [NSDictionary dictionaryWithObjectsAndKeys:
                           [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                           [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                           nil];
            }

            NSError *error = nil;
            [psc lock];
            if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
            {
                NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
                abort();
            }
            [psc unlock];

            dispatch_async(dispatch_get_main_queue(), ^{
                NSLog(@"asynchronously added persistent store!");
                [[NSNotificationCenter defaultCenter] postNotificationName:@"RefetchAllDatabaseData" object:self userInfo:nil];
            });

        });

    }
    else
    {
        NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                 [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                                 nil];

        NSError *error = nil;
        if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
        {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }

    return persistentStoreCoordinator;
} 
```

在另一个视图控制器中，我创建了一个我的实例`AppDelegate`，创建一个对象并调用`[appDelegate saveContext];`这是应用程序崩溃的地方。这一直很完美（直到现在，添加了 iCloud 支持）。

```
-(void)saveContext
{
    NSError *error;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            // Update to handle the error appropriately.
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            exit(-1);  // Fail
        }
    }
} 
```

所以它在这个方法上崩溃了，控制台给了我这个消息：

```
'NSInternalInconsistencyException', reason: 'This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.' 
```

不知道怎么办，求救！

编辑：控制台日志如下：

启动应用程序后，我得到：

```
2012-08-22 17:39:47.906 appname[24351:707] asynchronously added persistent store!
2012-08-22 17:39:47.955 appname[24351:707] asynchronously added persistent store! 
```

当应用程序崩溃时跟进：

```
2012-08-22 17:41:31.657 appname[24351:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.'
*** First throw call stack:
(0x3749d88f 0x351a2259 0x36bf0fe7 0x36c59287 0xd648b 0x149e0b 0x373f73fd 0x3118ce07 0x3118cdc3 0x3118cda1 0x3118cb11 0x3118d449 0x3118b92b 0x3118b319 0x31171695 0x31170f3b 0x33bb322b 0x37471523 0x374714c5 0x37470313 0x373f34a5 0x373f336d 0x33bb2439 0x3119fcd5 0xd53dd 0xd5378)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-25T21:47:44.490

我有同样的问题，我的解决方案是删除应用程序并重新安装它，因为数据库中的修改。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-22T17:50:48.897

您可能正在`persistentStoreCoordinator`从两个（或更多）不同的线程调用方法。无论是直接的还是间接的。

正如所写的那样，该方法不是线程安全的。

可能你有其他方法有同样的问题。通常`managedObjectContext`存在并以类似的方式编写。

有两种方法可以解决这个问题：

*   用于`@synchronize`使这些方法线程安全
*   将初始化代码从它们中移出并放入 init 方法中，并将它们修改为断言/除非 ivar 是`nil`

您可能做错的第二件事是修改上下文（例如向其中添加新的托管对象），然后在存储初始化之前尝试保存它。

要解决此问题，请确保执行以下任一操作：

*   除非您知道其中已经至少有一个托管对象（暗示存储已加载），否则您不会将任何托管对象添加到上下文中
*   如果您需要在不检查是否已经存在的情况下将托管对象添加到上下文中（例如，在您最初创建空存储之后），请确保存储已经初始化（例如，当您收到`RefetchAllDatabaseData`通知并注意到时执行此操作数据库为空）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-15T22:06:32.280

我通过从模拟器中删除应用程序并再次运行它来解决它。我猜这是因为以前版本的应用程序中没有核心数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-20T19:32:52.053

通过将 let moc = DataController().managedObjectContext 移动到类的顶部而不是留在 func seedPerson() 内部来解决

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-28T19:33:59.580

我在测试期间看到了这个错误，当时我启动了一些临时`NSManagedObjectContext`的 s 而没有在任何地方挂起它们——上下文会被 ARC 随机从我下面释放出来。

最终的工作是在测试中保留对 MOC 的引用，并为每个测试重新设置它。

不确定这与非测试环境的相关性如何，但特别是如果您使用的是子/兄弟上下文，则值得确保它们实际上仍然存在。:P

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-08T09:53:12.827

我有同样的问题。我收到错误**的原因是因为我****在我的 CoreData 实体模式中做了一些小改动**（基本上我添加了 2-3 个新属性）。我忘记了它，因为在我们运行它之前它不会给出任何错误。所以发生的事情是，之前运行的应用程序已经拥有具有先前模式的持久性存储。所以新模式指向同一个商店。这就是为什么我们在尝试访问新属性时运行它时出现错误的原因。

**解决方案**：**从设备/模拟器中删除应用程序。并重新安装它**。（新版本将具有新架构，因此不会崩溃。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-22T07:58:40.530

更新重新。XCODE 4.6.3 和 MACOSX 10.9.5：

为了解决这个问题，我在 xcode 派生数据位置删除了与产品相关的 app 目录：

rm -rd /用户//库/开发人员/Xcode/DerivedData/。显然，在使用对象模型后数据会变得混乱。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-01T09:59:33.103

我也遇到了这个问题。为此，我首先检查了核心数据迁移代码，因为在我的情况下代码是正确的，我已经从设备中删除了我的应用程序并重新安装它。它有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-08T12:34:28.297

对我来说，我发现我的情况`addPersistentStoreWithType`总是返回`nil`。所以没有成功创建持久存储。然后，我打印`storeURL`

```
~/Library/Developer/CoreSimulator/Devices/1F8C6299-1F80-4212-9FE2-CA33BD365851/data/Containers/Data/Application/9CA7B7BB-A835-4BC2-B12D-23B84D420F91/Library/Documentation/my-database.sqlite 
```

这是一个我们无法写入数据的目录。所以我检查了我的代码，发现了一个愚蠢的错误。 [![在此处输入图像描述](../Images/5c9971b8ee5ebcaee3b72196f24bffab.png)](https://i.stack.imgur.com/Hrm94.png)

*   我应该使用`NSDocumentDirectory`而不是`NSDocumentationDirectory`. Xcode 中的代码完成在文档目录枚举之前提供了文档目录。

*   当我使用 时 `NSDocumentationDirectory`，`NSPersistentStoreCoordinator`总是试图在 中创建持久存储`.../Library/Documentation/my-database.sqlite`，这是一个无效的路径。

*   相反，正确的路径应该是`.../Documents/BeeLocation.sqlite`.

# c# - 引发类型实现接口的对象的事件

> ID：12075832
> 
> 赞同：2
> 
> 时间：2012-08-22T14:51:50.577
> 
> 标签：c#, .net, events, interface

我在尝试从另一个类中引发类型实现接口（事件所在）的对象的事件时遇到问题。

这是我的代码：

**IBaseForm**接口****

 **```
public interface IBaseForm
{
    event EventHandler AfterValidation;
} 
```

**实现接口 IBaseForm**的 Form****

 **```
public partial class ContactForm : IBaseForm
{
    //Code ...

    public event EventHandler AfterValidation;
} 
```

**我的控制器**：发生错误的地方

错误信息 ：

> *AfterValidation 事件只能出现在 += 或 -= 的左侧（除非从 IBaseForm 类型中使用）*

```
public class MyController
{
    public IBaseForm CurrentForm { get; set; }

    protected void Validation()
    {
        //Code ....

        //Here where the error occurs
        if(CurrentForm.AfterValidation != null)
            CurrentForm.AfterValidation(this, new EventArgs());
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:56:16.677

您不能从定义类之外引发事件。

您需要`Raise()`在界面上创建一个方法：

```
public interface IBaseForm
{
    event EventHandler AfterValidation;

    void RaiseAfterValidation();
}

public class ContactForm : IBaseForm
{
    public event EventHandler AfterValidation;

    public void RaiseAfterValidation()
    {
        if (AfterValidation != null)
            AfterValidation(this, new EventArgs());
    }
} 
```

在你的控制器中：

```
protected void Validation()
{
    CurrentForm.RaiseAfterValidation();
} 
```

但是，如果您想从定义类之外触发事件，这通常是一种设计气味……通常在`IBaseForm`实现中应该有一些触发事件的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:21:02.983

[事件](http://msdn.microsoft.com/library/8627sbea.aspx)本质上是.NET 中的一种结构，它标识两种方法——一种方法`add`和一种`remove`方法；每个都接受一个[委托](http://msdn.microsoft.com/library/900fyy8e.aspx)作为参数。

尽管事件通常与将传入的委托组合*到*类型的字段或*从中*删除传入的委托的方法一起使用`[MulticastDelegate](http://msdn.microsoft.com/library/system.multicastdelegate.aspx)`，但这是一个实现细节。虽然创建事件的正常目的是**让其他代码传入他们希望**在某些情况下调用的委托，但 .NET 中的*事件*机制并不关心传入的委托做了什么（*如果有的话）。*

在某些情况下，与事件关联`add`的方法和方法简单地丢弃传入的委托可能是完全合法和合乎逻辑的。`remove`例如，一个不可变的集合类型可能会实现`[IObservableCollection](http://msdn.microsoft.com/library/ms668604.aspx)`（以便于与例如应该自动更新以显示当前集合状态的控件一起使用），但丢弃传递给更新通知事件的任何委托。如果集合永远不会被更新，它就永远不需要使用订阅者列表，因此它没有理由保留一个。

因为**不要求事件必须对**传入的委托执行任何操作，所以 .NET 事件本身不可能提供除了公开`add`和`remove`方法之外的任何功能。

尽管 .NET 中*事件*类型的描述符包括一个属性，该属性可以指定除了*add*和*remove之外的**raise 方法*，但该功能在实践中从未使用过。.NET 的初步设计可能打算使用它，并且删除类型的*任何*成员可能会在某些极端情况下（例如反序列化）导致兼容性问题，但在这些问题之外，该属性也可能不存在。****

# excel - 将数据粘贴到不同工作表的正确日期列中

> ID：12075834
> 
> 赞同：1
> 
> 时间：2012-08-22T14:51:54.370
> 
> 标签：excel, vba

我有一个每天更新的工作簿，并且该工作簿的副本保存为该日期。我要做的是为一年中的每个日期制作一个包含一列的表格，并将数据保存到正确的日期列中，以便获得每日记录和运行总计。

我使用了 IF 函数，它工作得很好，除非您更改日期时不保存上一列日期。我想我需要一个宏，但不知道从哪里开始。

在此先感谢您的帮助！

这是我的代码：

```
Sub KPI()

Dim lct As Long 
lct = Application.WorksheetsFunction.Match(Worksheets("KPI").Range("A1"), Worksheets("KPI").Range("H2:BP2"), 0) 

Worksheets("Shift Summary").Activate 
Range("F15").Select 

If Range("A4") = "I2" Then 

    Worksheets("KPI").Activate Cells(lct, 3).Select 
        Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _ 
        :=False, Transpose:=False 

End If 

If Range("A4") = "J2" Then 

    Worksheets("KPI").Activate Cells(lct, 21).Select Selection.PasteSpecial         Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _ :=False, Transpose:=False 
End If 

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:46:14.293

好的，这段代码应该可以帮助您入门。

我为`Shift Summary`工作表命名了两个范围

`Date = Range("B1")` `Safety = Range("F13:F22")`

下面的代码应该为您提供一个很好的开始，以获取您可能需要的所有其他元素。在错误检查等方面可能还有更多要添加的内容，但是就目前而言，这应该会让您顺利进行。

```
Sub UpdateSummary()

Dim wksShift As Worksheet, wksSummary As Worksheet
Dim myDate As Date

Set wksShift = Sheets("Shift Summary")
myDate = wksShift.Range("Date")

Set wksSummary = Sheets("KPI")

With wksSummary

    Dim myRange As Range
    Set myRange = .Rows("2:2").Find(myDate, LookAt:=xlWhole, LookIn:=xlFormulas)

    If Not myRange Is Nothing Then 

        wksShift.Range("Safety").Copy

        myRange.Offset(1).PasteSpecial xlPasteValues

    End If

End With

End Sub 
```

# c# - C# 正则表达式没有删除所有不需要的字符？

> ID：12075835
> 
> 赞同：2
> 
> 时间：2012-08-22T14:52:01.747
> 
> 标签：c#, regex, string

我要清理的字符串看起来像

```
"\r\nPasswordchanged?\r\r\n"    string 
```

我用了这个方法

```
public string[] cleanStrings(string[] clean)
    {
        int j = 0;
        foreach (string data in clean)
        {
            string temp = System.Text.RegularExpressions.Regex.Replace(data, @"\r\n+", "");
            if (temp.Equals("&nbsp;"))
            {
                temp = "";
            }
            clean[j] = temp;
            j++;
        }
        return clean;
    } 
```

结果是

```
"Passwordchanged?\r"    string 
```

我以为我的正则表达式会删除所有`\r`和`\n`

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:53:39.137

请改用字符类，特别是`[\r\n]`. 这样，字符类中的任何字符都将匹配。

```
string result = Regex.Replace(data, @"[\r\n]", ""); 
```

您当前的模式 ,`\r\n+`将仅匹配 an`\r`后跟一个或多个`\n`字符，因此它无法匹配`\r`例如其他独立字符。

# vba - VBA：数据转换

> ID：12075839
> 
> 赞同：1
> 
> 时间：2012-08-22T14:52:14.923
> 
> 标签：vba, excel, etl

我有一个 CSV 文件，其中包含以下格式的数据：

```
ID,Var1.1|var2.1|var3.1,var1.2|var2.2|var3.2,...,Var1.n|var2.n|var3.n 
```

where在行中`ID`是唯一的，并且`n`随每一行而变化。

我想将它在 VBA 中转换为以下格式：

```
ID,Var1.1,var2.1,var3.1
ID,Var1.2,var2.2,var3.2     
.    
.    
.    
ID,Var1.n,var2.n,var3.n 
```

手动，我一直在做的是将数据导入 excel 并转置管道变量，然后使用“文本到列”功能将它们拆分。在此之后，我从转置中取出顶部条目并将其粘贴到拆分数据左侧的列中 n 次。

知道如何在 VBA 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:16:47.620

如果您已经手动执行此操作，那么您只需让 excel 为您记录 VBA。一旦你打开excel，从开发人员选项卡中点击“记录宏”。然后手动完成您正在执行的所有步骤，然后点击停止录制。

之后，您可以重新运行宏来检查操作或单击“编辑宏”以启动 VBA 编辑器并清理代码。这应该为您提供一个非常好的 VBA 代码基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:35:38.583

这可以完成工作：

```
Dim i As Long
Dim j As Long
Dim sIn As String
Dim sOut As String
Dim sc() As String
Dim sp() As String
Dim FSO As FileSystemObject: Set FSO = New FileSystemObject
Dim txsIn As TextStream
Dim txsOut As TextStream

Set txsIn = FSO.OpenTextFile("C:\mydir\testIn.txt", ForReading)
Set txsOut = FSO.CreateTextFile("C:\mydir\testOut.txt")

Do Until txsIn.AtEndOfStream
    sIn = txsIn.ReadLine 
    sc = Split(sIn, ",")
    For i = 1 To UBound(sc) ' element 0 contains the ID
        sp = Split(sc(i), "|")
        sOut = sc(0) ' ID
        For j = 0 To UBound(sp)
            sOut = sOut & "," & sp(j) ' varX.X
        Next j
        txsOut.WriteLine sOut
    Next i
Loop
' testOut.txt now contains the desired output 
```

以上需要设置如下引用：Tools > References... > set checkmark next to Microsoft Scripting Runtime。

如果您不想设置引用，请使用后期绑定。用这些替换最后 3`Dim`行：

```
Dim FSO As Object: Set FSO = CreateObject("Scripting.FileSystemObject")
Dim txsIn As Object
Dim txsOut As Object 
```

# javascript - Android Calcualtor：更高的屏幕和更边缘的边缘

> ID：12075852
> 
> 赞同：0
> 
> 时间：2012-08-22T14:52:59.003
> 
> 标签：javascript, android, android-layout, calculator

嗨，我现在正在为一个 android 计算器显示布局，并且刚刚导入“display-7 ttf 用于显示。数字可以使用新字体正确显示在屏幕上，但我不知道为什么使用新字体后字体，显示屏幕的高度变得更短，边缘更小。

更重要的是，Eclipse Graphics Layout 中的 Preview 仍然正确显示，但在 Emulator 中显示缩短了。

简而言之，我希望屏幕更高，边缘更边缘。

布局代码如下。有没有人建议修改？非常感谢！

**Main Activity 中字体的代码：**

```
Display = (EditText) findViewById(R.id.ansEditText); 
Typeface face=Typeface.createFromAsset(getAssets(),"fonts/digital-7 (italic).ttf"); 
Display.setTypeface(face); 
```

**相关布局代码：**

```
<EditText
        android:id="@+id/ansEditText"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_span="5"
        android:layout_weight="1"
        android:background="#FFFFFF"
        android:clickable="false"
        android:ems="10"
        android:focusable="false"
        android:gravity="right|center_vertical"
        android:inputType="numberDecimal"
        android:longClickable="false"
        android:textColor="@color/display_text_color"
        android:textSize="@dimen/display_text_size"
        android:textStyle="bold" >

        <requestFocus />
    </EditText> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:35:24.020

如果在您的自定义字体中字母的大小与默认字体不同，则可以看到差异是正常的。但是 Display 不会改变大小，它是由硬件属性/模拟器设置给出的，只有 EditText 会改变。

所以我看到了 2 个选项

1.  将您的布​​局包装在 ScrollView/Horizo​​ntalScrollView 中并使其尽可能大
2.  更改 EditText 属性（例如，较小的 textSize 可以为您提供所需的效果）

我希望我正确理解了这个问题（一张图片很有用），我的回答对你有帮助。

# c# - 删除多对多关系中的实体会在关系表中留下孤儿

> ID：12075853
> 
> 赞同：6
> 
> 时间：2012-08-22T14:52:59.313
> 
> 标签：c#, entity-framework-4, ef-code-first, entity-framework-4.3

删除多对多关系中的记录时，关系表有孤立记录。我在 DbContext 中设置了以下多对多关系。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  modelBuilder.Entity<Car>()
     .HasMany(u => u.Owners)
     .WithMany(l => l.Cars)
     .Map(ul =>
     {
       ul.MapLeftKey("CarId");
       ul.MapRightKey("OwnerId");
       ul.ToTable("CarOwners");
     });
} 
```

我的所有者模型具有虚拟属性 Cars：

```
public virtual ICollection<Car> Cars { get; set; } 
```

我的汽车模型具有虚拟财产所有者：

```
public virtual ICollection<Owner> Owners { get; set; } 
```

我按如下方式删除 Car（db 是我的 DbContext，car 是 Car 模型）。

```
db.Cars.Remove(car);
db.SaveChanges() 
```

当我删除汽车时，我希望表 CarOwners 中具有该 CarId 的所有记录也会被删除，但事实并非如此。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:33:48.070

解决方案是：

```
ALTER TABLE [dbo].[CarOwners]  WITH CHECK ADD  CONSTRAINT [FK_Car_Owners] FOREIGN KEY([CarId])
REFERENCES [dbo].[Car] ([Id])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[CarOwners]  WITH CHECK ADD  CONSTRAINT [FK_Owner_Cars] FOREIGN KEY([OwnerId])
REFERENCES [dbo].[Owner] ([Id])
ON DELETE CASCADE
GO 
```

注意：如果您要向包含数据的现有表添加约束，则必须确保首先删除孤立记录......否则`ADD CONSTRAINT`将会失败。

# java - 使用 poi 或 jxl api 转换 Excel 单元格值类型

> ID：12075854
> 
> 赞同：0
> 
> 时间：2012-08-22T14:52:59.800
> 
> 标签：java, excel, apache-poi, jxl

我有一个包含数值的 Excel 文件，但它们存储为标签。所以我想使用 jxl 或 poi api 来设置它们的值类型。但是我不知道使用哪种方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:00:20.247

我使用 poi 库，这是我的 ExcelParser 类：

```
public class ExcelParser {

    private HSSFWorkbook wb;

    public ExcelParser(File xlsFile) throws Exception{

        wb = new HSSFWorkbook(new FileInputStream(xlsFile));
    }

    public String getValue(String sheetName, int rowNum, int celNum) throws Exception{
        try{
            HSSFSheet sheet = null;
            for(int i=0; i<wb.getNumberOfSheets();i++){
                if(wb.getSheetName(i).trim().toLowerCase().equals(sheetName.trim().toLowerCase())){
                    sheet = wb.getSheetAt(i);
                    break;
                }
            }
            if(sheet == null){
                throw new Exception("Sheet name '"+sheetName+"' not found.");
            }

            HSSFRow row     = sheet.getRow(rowNum);        
            if(row == null){return "";}
            HSSFCell cell   = row.getCell(celNum);
            if(cell== null){return "";}

            if(cell.getCellType() == HSSFCell.CELL_TYPE_NUMERIC){
                return String.valueOf(cell.getNumericCellValue()).trim();
            } else if (cell.getCellType() == HSSFCell.CELL_TYPE_STRING){
                return cell.getStringCellValue().trim();        
            }  else if (cell.getCellType() == HSSFCell.CELL_TYPE_ERROR){
                return "";//cell.getErrorCellValue();        
            }else if (cell.getCellType() == HSSFCell.CELL_TYPE_FORMULA){
                try{

                    return cell.getStringCellValue().trim();
                } catch (Exception e) {
                    return "";
                }
            } else{
                return cell.getStringCellValue().trim();
            }
        }
        catch (Exception e) {
            throw new Exception(e.getMessage()+" in row:"+rowNum+" col:"+celNum+" sheet:"+sheetName);
        }
    }
} 
```

警告，此类仅适用于 xls 文件，如果您使用 xlsx 文件，则必须使用

```
XSSF 
```

类而不是

```
HSSF 
```

# image - Boost.GIL 从 istream 加载图像

> ID：12075861
> 
> 赞同：2
> 
> 时间：2012-08-22T14:53:16.937
> 
> 标签：image, boost, load, istream, boost-gil

我正在尝试将图像从 std::istream 加载到 Boost.GIL 图像上。我在网上搜索过，但还没有找到好的解决方案。
任何帮助将不胜感激。
非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:07:58.370

从这里查看新版本的 gil io：[http](http://code.google.com/p/gil-contributions/source/browse/trunk/gil_2.zip) ://code.google.com/p/gil-contributions/source/browse/trunk/gil_2.zip这还不是 boost 的正式部分，但它可以工作很好，很稳定，它支持你需要的东西。你没有说你要阅读什么格式，但要阅读 jpeg，你会有这样的代码：

```
using namespace boost::gil;
image_read_settings<jpeg_tag> readSettings;
rgb8_image_t newImage;
read_image(stream, newImage, readSettings); 
```

还支持读取 png、bmp、raw、targa 和 tiff。

# c++ - 如何使用 C 或 C++ 函数获取特定文件夹中的文件数？

> ID：12075864
> 
> 赞同：2
> 
> 时间：2012-08-22T14:53:25.413
> 
> 标签：c++, c, dirent.h

> **可能重复：**
> [计算目录中具有给定扩展名的文件数 - C++？](https://stackoverflow.com/questions/1935274/count-number-of-files-with-a-given-extension-in-a-directory-c)

如何使用 c 或 c++ 函数获取特定文件夹中的文件数？是否有任何 c 库函数可以获取给定目录中的文件数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T15:18:11.923

这是一个使用 opendir/readdir/closedir 的工作示例（这里没有递归）：

```
void listdir(char *dir) {
  struct dirent *dp;
  DIR *fd;

  if ((fd = opendir(dir)) == NULL) {
    fprintf(stderr, "listdir: can't open %s\n", dir);
    return;
  }
  while ((dp = readdir(fd)) != NULL) {
  if (!strcmp(dp->d_name, ".") || !strcmp(dp->d_name, ".."))
    continue;    /* skip self and parent */
  printf("%s/%s\n", dir, dp->d_name);
  }
  closedir(fd);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T14:56:05.240

我认为没有任何标准方法可以列出目录中的文件。我记得以前必须这样做时，我最终使用了 Boost Filesystem。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T15:34:27.900

有了`boost::filesystem`它可能看起来像这样：

```
#include <iostream>
#include <algorithm>
#include <iterator>
#include <boost/filesystem.hpp>
#include <boost/iterator/filter_iterator.hpp>
namespace fs = boost::filesystem;

int main()
{
    fs::path p("D:/mingw/include");
    fs::directory_iterator dir_first(p), dir_last;

    auto pred = [](const fs::directory_entry& p)
    {
        return fs::is_regular_file(p);
    };

    std::cout <<
        std::distance(boost::make_filter_iterator(pred, dir_first, dir_last),
                      boost::make_filter_iterator(pred, dir_last, dir_last));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:58:42.230

您需要使用 打开目录`opendir()`，并使用 ... 循环浏览整个目录`readdir()`，并计算您执行了多少次。

记住那个'。和 '..' 是特殊条目，不算数。

如果您只需要计算文件而不计算目录，则必须在 dir 结构 (man `stat`) 中显式检查。

如果您需要文件夹*及其子文件*夹中的文件数量，那么您将不得不在目录中递归（“walk”） - 并且可能取决于平台，检查符号链接。

# javascript - 使用 AJAX 刷新另一个 div 后将焦点设置在文本字段上

> ID：12075867
> 
> 赞同：1
> 
> 时间：2012-08-22T14:53:37.783
> 
> 标签：javascript, html, ajax

我现在一直对以下问题感到头疼，希望你们能指出我（可能是显而易见的）解决方案。

我有一个简单的 Web 应用程序，它需要输入一个输入字段（type="text"）。当页面加载时，光标已准备好接受输入。一旦用户离开（onBlur），AJAX 部分就会启动，我会在数据库中查找代码，并根据结果右侧的框变为绿色或保持红色。

更改后，我希望清除输入字段并准备好接收新输入。清除该字段确实有效，但是将焦点设置为它不起作用。我尝试了 focus() 和 select()，不行...我尝试折叠 setTimeout，不行。使用当前代码，它在 FF、chrome 和 IE 中不起作用。我希望你们能给我一个提示。

这是网页代码：

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
function checkTicket(tno) {
    var xmlhttp;
    if (tno=='') {
        document.getElementById('inside').innerHTML='0';
        document.getElementById('validbox').style.backgroundColor='#FF0000';
        return;
    }
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById('inside').innerHTML=xmlhttp.responseText;
            if (document.getElementById('inside').innerHTML=='1') {
                document.getElementById('validbox').style.backgroundColor='#00FF00';
            } else {
                document.getElementById('validbox').style.backgroundColor='#FF0000';
            }
            set_focus();
        }
    }
    xmlhttp.open("GET","check_eticket.php?t="+tno,true);
    xmlhttp.send();
}
function set_focus() {
    document.form.ticketnumber.value='';
    document.form.ticketnumber.focus();
}
</script>
</head>

<body onLoad="set_focus()">
<div id="wrapper" style="position: absolute; top: 50%; height: 400px; margin-top: -200px; width: 99%;">
    <div id="innerwrap" style="width: 75%; margin-left: auto; margin-right: auto;">
        <div style="float: left; width: 50%; margin-left: auto; height: 400px; padding-top: 115px;">
            <span style="font-size: 3em; font-weight: bold; text-align: center;">TOEGANGSCODE:<br /></span>
            <form name="form">
                <input name="ticketnumber" id="ticketnumber" type="text" onBlur="checkTicket(this.value)" size="11" style="font-size: 3.55em; font-weight: bold;" />
            </form>
        </div>
        <div id="validbox" style="float: right; width: 50%; background-color: #FF0000; height: 400px; margin-right: auto;">
            <div id="inside" style="display: none;">0</div>
        </div>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:31:36.200

问题实际上很简单：页面的“视口”正在失去焦点。

网页上的所有“活动”元素（表单字段、锚点）都会收到一个“tabindex”。当您填写该字段并按“制表符”时，焦点将移至下一个“活动”元素。

在您的页面上，没有“下一个”元素。然后浏览器会将焦点设置到浏览器界面中的下一个元素：在我的例子中（Firefox 14.01），下一个元素是浏览器顶部的选项卡。

此选项卡不是您网页的一部分。因此，我的浏览器会阻止页面“窃取”焦点。

答案其实很简单：只需添加一个额外的活动元素。对于 html4.01，以下标签可以接收焦点：A、AREA、BUTTON、INPUT、OBJECT、SELECT 和 TEXTAREA（参见[div 上的标签索引](https://stackoverflow.com/questions/3059203/tab-index-on-div)）。html5 规范告诉我，您可以使用制表符将任何 html 元素添加到此列表中，但遗憾的是，这（还没有？）对我有用。

现在，我建议您在页面上添加一个锚点，如下面的解决方案所示。

```
<html>
<head>
<script type="text/javascript">
function checkTicket(tno) {
    var xmlhttp;
    if (tno=='') {
        document.getElementById('inside').innerHTML='0';
        document.getElementById('validbox').style.backgroundColor='#FF0000';
        return;
    }
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById('inside').innerHTML=xmlhttp.responseText;
            if (document.getElementById('inside').innerHTML=='1') {
                document.getElementById('validbox').style.backgroundColor='#00FF00';
            } else {
                document.getElementById('validbox').style.backgroundColor='#FF0000';
            }
            set_focus();
        }
    }
    xmlhttp.open("GET","check_eticket.php?t="+tno,true);
    xmlhttp.send();
}
function set_focus() {
    document.form.ticketnumber.value='';
    document.form.ticketnumber.focus();
}
</script>
</head>

<body onLoad="set_focus()">
<div id="wrapper" style="position: absolute; top: 50%; height: 400px; margin-top: -200px; width: 99%;">
    <div id="innerwrap" style="width: 75%; margin-left: auto; margin-right: auto;">
        <div style="float: left; width: 50%; margin-left: auto; height: 400px; padding-top: 115px;">
            <span style="font-size: 3em; font-weight: bold; text-align: center;">TOEGANGSCODE:<br /></span>
            <form name="form">
                <input name="ticketnumber" id="ticketnumber" type="text" onBlur="checkTicket(this.value)" size="11" style="font-size: 3.55em; font-weight: bold;" />
            </form>
        </div>
        <div id="validbox" style="float: right; width: 50%; background-color: #FF0000; height: 400px; margin-right: auto;">
            <div id="inside" style="display: none;">0</div>
        </div>
        <a href="">bang!</a>
    </div>
</div>
</body>
</html> 
```

# javascript - 在localStorage中存储plupload文件列表

> ID：12075871
> 
> 赞同：0
> 
> 时间：2012-08-22T14:53:54.120
> 
> 标签：javascript, html, plupload

我正在构建一个 Web 应用程序，我希望用户能够在多个页面上选择文件，然后一次全部上传。我的计划是用来`window.localStorage`存储文件，然后遍历该列表并上传。

我已成功将文件对象数组保存到 localStorage，但是当我尝试手动将它们添加到队列时`uploader.files.push(file)`（文档说文件是文件对象数组），没有上传任何内容。

有没有办法手动建立上传队列？

另一种可接受的解决方案是将对本地文件的引用存储在 localStorage 中。从我正在阅读的内容来看，我不知道这是否可能。

# ssh - 在 ssh 中创建 tar 文件

> ID：12075881
> 
> 赞同：3
> 
> 时间：2012-08-22T14:54:39.407
> 
> 标签：ssh, tar

我想将一个文件夹压缩成一个文件。此文件不应保存在本地计算机上，而应保存在可通过 ssh 访问的另一个计算机上。

我可以做这样的事情吗？

```
tar cfv ssh://user:pass@server:/tmp/myfile.tar myfolder/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T13:12:48.860

无需临时文件：

```
tar cfv - myfolder/ | ssh user@server 'cat > /tmp/myfile.tar' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:59:12.527

让我们尝试以简单的方式做到这一点。这可能是一种非常简单的方法，但它可以完成工作。

```
tar cfv myfile.tar myfolder/ && scp myfile.tar user:pass@server:/tmp/myfile.tar && rm myfile.tar 
```

（未测试，如有错误请见谅）

# c# - 在 asp.net 中将数据更新到 gridview

> ID：12075882
> 
> 赞同：2
> 
> 时间：2012-08-22T14:54:39.567
> 
> 标签：c#, asp.net, gridview

我对 asp.net 比较陌生。所以如果我的查询对于我的网格设计来说是幼稚的，请多多包涵：

```
<asp:GridView runat ="server"  GridLines = "Both" DataKeyNames="book_id"AutoGenerateColumns ="false" CellPadding ="5" CellSpacing ="5" allowpaging="True" allowsorting="True"
 ID="gv_table1" EmptyDataText ="No data exists"       OnRowEditing="gv_RowEditing"
OnRowCancelingEdit="gv_RowCancelingEdit" OnRowUpdating="gv_RowUpdating" OnRowDeleting="gv_RowDeleting">
    <Columns>

<asp:BoundField HeaderText="Book ID"  DataField="book_id">

</asp:BoundField>

<asp:BoundField DataField="book_name"   HeaderText="Book Name">

</asp:BoundField>
<asp:BoundField DataField="author_name" HeaderText="Author Name">

</asp:BoundField>
<asp:BoundField DataField="publisher" HeaderText="Publisher">

</asp:BoundField>
<asp:BoundField DataField="year_edition" HeaderText="Year/Edition">

</asp:BoundField>
<asp:BoundField DataField="total_no" HeaderText="Total No">

</asp:BoundField>
<asp:BoundField DataField="available" HeaderText="Available">

</asp:BoundField>
<asp:BoundField DataField="tags" HeaderText="Tags">

</asp:BoundField>
<asp:BoundField DataField="fare" HeaderText="Fare">

</asp:BoundField>
<asp:BoundField DataField="state" HeaderText="State">

</asp:BoundField>
 <asp:templatefield HeaderText ="Options">
                                <itemtemplate >

                                        <asp:linkbutton id="btnEdit" runat="server" commandname="Edit" text="Edit" />

                                        <asp:linkbutton id="btnDelete" runat="server" commandname="Delete" text="Delete" />
                                </itemtemplate>
                                <edititemtemplate>
                                        <asp:linkbutton id="btnUpdate" runat="server" commandname="Update" text="Update" />
                                        <asp:linkbutton id="btnCancel" runat="server" commandname="Cancel" text="Cancel" />
                                </edititemtemplate>
                        </asp:templatefield>

</Columns>
</asp:GridView> 
```

我背后的代码：

```
public void gv_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {

        int bookid = Convert.ToInt32(gv_table1.DataKeys[e.RowIndex].Values["book_id"].ToString());
        string bookname =(gv_table1.Rows[e.NewValues].Cells[1].Controls[0] as TextBox).Text;
        string bookname = (gv_table1.Rows[e.RowIndex].FindControl("author_name") as TextBox).Text;

        string book = gv_table1.Rows[e.RowIndex].Cells[1].Text ;
} 
```

我可以删除但不能编辑数据。我无法获得我在网格视图中输入的更改值。我尽最大努力让我在编辑或更改之前获得了网格视图中的值。先谢谢朋友。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:08:46.933

我认为我们不能使用 Find 控制方法访问绑定字段。`author_name`是绑定字段内的数据字段的名称，您无法使用 FindControl 访问它，它不是控件。

使用 e.RowIndex 获取更新的值。

```
public void gv_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    string bookname = ((TextBox)(gv_table1.Rows[e.RowIndex].Cells[1].Controls[0])).Text;

                         // OR
    string bookname =(gv_table1.Rows[e.RowIndex].Cells[1].Controls[0] as TextBox).Text;
    gv_table1.EditIndex = -1;  // reset the edit index
    // Again Bind the gridview to show updated data
} 
```

**更新答案：**

**问题：** `The problem is that you are binding your gridview on each post back`

**解决方案：**

为了测试它，我创建了一个添加两列的gridview，如果我在每个回发上绑定gridview，我会得到旧值。为了避免它，只需`Page.IsPostBack`在绑定网格之前添加检查。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack) // If you not place this check then you will get the old values because GridView in Bind on every postback
    {
        BindGrid(); // Bind you grid here
    }
} 
```

**我的完整代码：**

```
// Aspx Code
<asp:GridView ID="GridView1" AutoGenerateColumns="false" runat="server" 
    AllowPaging="True" 
     onrowediting="GridView1_RowEditing" onrowupdating="GridView1_RowUpdating" onrowcancelingedit="GridView1_RowCancelingEdit" 
    >        
    <Columns>
        <asp:BoundField DataField="Name" HeaderText="Name" />
        <asp:BoundField DataField="City" HeaderText="Name" />
        <asp:CommandField ShowEditButton ="true" ShowCancelButton="true"  ShowDeleteButton="true" />
    </Columns>
</asp:GridView>

// Aspx Code Behind
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack) // If you not place this check then you will get the old values because GridView in Bind on every postback
    {
        BindGrid();
    }
}
private void BindGrid() // function for binding gridview
{
    DataTable dt = new DataTable();
    dt.Columns.Add("Name");
    dt.Columns.Add("City");

    DataRow r = dt.NewRow();
    r[0] = "Name 1";
    r[1] = "City 1";

    DataRow r1 = dt.NewRow();
    r1[0] = "Name 2";
    r1[1] = "City 2";

    dt.Rows.Add(r);
    dt.Rows.Add(r1);

    GridView1.DataSource = dt;
    GridView1.DataBind();
}

protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex; // setting new index
    BindGrid();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = GridView1.Rows[e.RowIndex];
    string newvalue = ((TextBox)row.Cells[0].Controls[0]).Text;
     GridView1.EditIndex = -1; // Again reset
}

protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
    GridView1.EditIndex = -1; // reseting grid view
    BindGrid();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:14:21.323

而不是`boundfiled`，我更喜欢使用`TemplateField`它的简单性。

**测试示例代码：****从页脚添加新记录并更新所选行**

 ***默认.aspx：**

```
 <asp:GridView ID="gvstatus" runat="server" AutoGenerateColumns="False" 
             CellPadding="4" ForeColor="#333333" GridLines="None" 
            onrowcancelingedit="gvstatus_RowCancelingEdit" 
            onrowediting="gvstatus_RowEditing" onrowupdating="gvstatus_RowUpdating" 
            onselectedindexchanged="gvstatus_SelectedIndexChanged" ShowFooter="True" 
            onrowcommand="gvstatus_RowCommand" Width="600px" AllowPaging="True" 
            onpageindexchanging="gvstatus_PageIndexChanging">
            <Columns>

 <asp:TemplateField HeaderText="SrNo " HeaderStyle-HorizontalAlign="Left">
            <ItemTemplate>
                    <%# Container.DataItemIndex + 1 %>
                </ItemTemplate>
 </asp:TemplateField>

 <asp:TemplateField HeaderText="ID" Visible="false">
      <ItemTemplate>
      <asp:Label ID="lblid" runat="server" Text='<%# Bind("columnname_id") %>'> </asp:Label>
     </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="EmpName">
      <ItemTemplate>
        <asp:Label ID="lblEmpName" runat="server" Text='<%# Bind("columnname_EmpName") %>'></asp:Label>
       </ItemTemplate>
       <EditItemTemplate>
           <asp:TextBox ID="txtEmpName" runat="server"  Text='<%# Bind("columnname_EmpName") %>'></asp:TextBox>
        </EditItemTemplate>
        <FooterTemplate>
              <asp:TextBox ID="txtfEmpName"  runat="server"></asp:TextBox>
        </FooterTemplate>
</asp:TemplateField>

 <asp:TemplateField HeaderText="empSalary" >
        <ItemTemplate>
           <asp:Label ID="lblempSalary" runat="server" Text='<%# Bind("columnname_EmpSalary") %>'></asp:Label>
        </ItemTemplate>
        <EditItemTemplate>
             <asp:TextBox ID="txtempSalary" runat="server"  Text='<%# Bind("columnname_EmpSalary") %>'></asp:TextBox>
         </EditItemTemplate>
         <FooterTemplate>
            <asp:TextBox ID="txtfempSalary" runat="server" ></asp:TextBox>
         </FooterTemplate>
</asp:TemplateField>

 <asp:TemplateField ShowHeader="False" ItemStyle-Width="190px">
         <ItemTemplate>
             <asp:Button ID="btnedit" runat="server" CausesValidation="False" 
                            CommandName="Edit" Text="Edit"></asp:Button>
          </ItemTemplate>
          <EditItemTemplate>
               <asp:Button ID="btnupdate" runat="server" CausesValidation="True" 
                            CommandName="Update" Text="Update"></asp:Button>
                        &nbsp;<asp:Button ID="btncancel" runat="server" CausesValidation="False" 
                            CommandName="Cancel" Text="Cancel"></asp:Button>
         </EditItemTemplate>
        <FooterTemplate>
            <asp:Button ID="btnadd" runat="server" Text="Add" CommandName="Add" />
        </FooterTemplate>
 </asp:TemplateField>
            </Columns>
            <PagerStyle BackColor="#A86E07" ForeColor="White" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
          <HeaderStyle BackColor="#A86E07" Font-Bold="True" ForeColor="White" />
        <EditRowStyle BackColor="#d9d9d9" />
    <AlternatingRowStyle BackColor="White" ForeColor="#A86E07" />
 </asp:GridView> 
```

**代码隐藏：**

```
 protected void Page_Load(object sender, EventArgs e)
    {
       if (!Page.IsPostBack)
       {
         gvBind(); //Bind gridview 
       }
     }

public void gvBind()
{
    SqlDataAdapter dap = new SqlDataAdapter("select id, empName,empSalary from myTable", conn);
     DataSet ds = new DataSet();
     dap.Fill(ds);
     gvstatus.DataSource = ds.Tables[0];
     gvstatus.DataBind();
} 
```

* * *

```
protected void gvstatus_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        //Update the select row from girdview
        lblmsg.Text = "";
        try
        {
            GridViewRow row = (GridViewRow)gvstatus.Rows[e.RowIndex];
            Label lblid = (Label)gvstatus.Rows[e.RowIndex].FindControl("lblid");
            TextBox txtname = (TextBox)gvstatus.Rows[e.RowIndex].FindControl("txtEmpName");
            TextBox txtSalary = (TextBox)gvstatus.Rows[e.RowIndex].FindControl("txtempSalary");
            string empName = txtname.Text;
            string empSalary = txtSalary.Text;
            string lblID=lblid.Text;
            int result = UpdateQuery(empName, empSalary,lblID);
            if (result > 0)
            {
                lblmsg.Text = "Record is updated successfully.";
            }
            gvstatus.EditIndex = -1;
            gvBind();
        }
        catch (Exception ae)
        {
            Response.Write(ae.Message);
        }

    } 
```

* * *

```
protected void gvstatus_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        gvstatus.EditIndex = -1;
        gvBind();
    }
 protected void gvstatus_RowEditing(object sender, GridViewEditEventArgs e)
    {
        lblmsg.Text = "";
        gvstatus.EditIndex = e.NewEditIndex;
        gvBind();
    }

  protected void gvstatus_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        //Add new record to database form girdview footer
        if (e.CommandName == "Add")
        {
            string empName = ((TextBox)gvstatus.FooterRow.FindControl("txtfempName")).Text;
            string empSalry = ((TextBox)gvstatus.FooterRow.FindControl("txtfempSalary")).Text;
            int result = InsertNewRecord(empName, empSalry);
            if (result > 0)
            {
                lblmsg.Text = "Record is added successfully.";
            }
            gvstatus.EditIndex = -1;
            gvBind();

        }
    } 
```

* * *

```
 public void UpdateQuery(string empName, string empSalary, string lblID)
    {
        SqlCommand cmd = new SqlCommand("update myTable set empName='" + empName + "',empSalary='" + empSalary + "' where  id='" + lblID + "'", conn);
        conn.Open();
        int temp = cmd.ExecuteNonQuery();
        conn.Close();
        return temp;
    }

public void InsertNewRecord(string empName, string empSalary)
    {
        SqlCommand cmd = new SqlCommand("your insert query ", conn);
        conn.Open();
        int temp = cmd.ExecuteNonQuery();
        conn.Close();
        return temp;
    } 
```

[http://satindersinght.blogspot.in/2012/08/how-to-addupdate-record-using-gridview.html](http://satindersinght.blogspot.in/2012/08/how-to-addupdate-record-using-gridview.html)

如果您觉得有帮助，请标记答案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:39:28.163

我为你写了所有的代码，即使你可能不需要其中的一些。希望你能从中学习并应用到你的身上。但是这段代码确实有效。但首先，如果我是你，我会为书籍 ID 创建一个项目模板并使其成为标签。那么这将是你的控制。还需要使用参数来防止sql注入。有很多方法可以做到这一点，但这就是我的做法。希望它会有所帮助。

```
 protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    //Identify your control i.e. the primary key (lblbookid is the name of the item template)
    GridViewRow row = GridView1.Rows[e.RowIndex];
    Label bookidLabel = (Label)row.FindControl("lblbookid");

    //connect to db which you probably already have
    string strSQLConnection = ("server=blah;database=blah;uid=blah;pwd=blah");
    SqlConnection sqlConnection = new SqlConnection(strSQLConnection);

    SqlCommand cmd = new SqlCommand();

    cmd.CommandText = "UPDATE yourtable SET book_name = @book_name WHERE book_id = @book_id";

    //parameters
    cmd.Parameters.Add("@bookid", SqlDbType.Char).Value = bookidLabel.Text;
    cmd.Parameters.Add("@book_name", SqlDbType.Char).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[2].Controls[0]).Text;
    cmd.Parameters.Add("@book_author", SqlDbType.Char).Value = ((TextBox)GridView1.Rows[e.RowIndex].Cells[3].Controls[0]).Text;

    cmd.Connection = sqlConnection;
    sqlConnection.Open();
    cmd.ExecuteNonQuery();

    sqlConnection.Close();

    GridView1.EditIndex = -1;
    BindData();
} 
```*

# c - 在位域结构上转换字节序（再次）

> ID：12075887
> 
> 赞同：4
> 
> 时间：2012-08-22T14:54:49.627
> 
> 标签：c, endianness, bit-fields

之前有人问过这个问题，但是当移动到具有相反字节序的平台时（在这种情况下从大到小），我仍然对如何处理位域结构感到有些困惑。所以如果我有这个：

```
typedef struct
{
    unsigned short a :5;
    unsigned short b :1;
    unsigned short c :5;
    unsigned short d :5;
} protocol_type;

typedef union
{
  protocol_type cmd;
  unsigned short word;
}protocol_cmd_type; 
```

处理这个问题的正确方法是这样吗？

```
typedef struct
{
    unsigned short d :5;
    unsigned short c :5;
    unsigned short b :1;
    unsigned short a :5;
} protocol_type;

typedef union
{
  protocol_type cmd;
  unsigned short word;
}protocol_cmd_type; 
```

或者是其他东西？

这就是我所做的，但它并没有给出我期望的结果。然而，这段代码还有其他问题，所以我不确定上面是否真的错了。希望在这里获得洞察力，以便我可以将这部分从列表中删除。

事实上，我仍然需要让代码在两个平台上都能正常工作，所以我会围绕#defines 进行包装，但我不想在这里把东西弄得乱七八糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:17:08.633

您需要担心的不仅仅是字节序问题。请注意，位域在内存中的布局细节并未由 C 标准定义，这意味着两个编译器可以生成不同的结果，即使它们针对的是具有相同字节序的平台。有些人可能会将列出的第一个位域视为最低地址位，而其他人可能会将其视为最高地址位。

您有两种选择来解决此问题。

首先是健康剂量`#ifdef`：

```
typedef struct
{
#ifdef CPU_IS_BIG_ENDIAN
    unsigned short a :5;
    unsigned short b :1;
    unsigned short c :5;
    unsigned short d :5;
#else
    unsigned short d :5;
    unsigned short c :5;
    unsigned short b :1;
    unsigned short a :5;
#endif
} protocol_type; 
```

这会导致结构定义混乱，但允许其余代码保持干净。由于您有跨越字节边界的字段，因此您基本上必须为每个目标架构/平台提出一个新的结构定义（可能通过反复试验）。如果您必须支持多个编译器对同一平台的位域进行不同的排序，那么您的定义将变得更加复杂。

另一种选择是完全避免位域并使用位掩码：

```
typedef unsigned char protocol_type[2];
#define extract_a(x) ((x[0] & 0xF8) >> 3)
#define extract_b(x) ((x[0] & 0x04) >> 2)
#define extract_c(x) (((x[0] & 0x03) << 3) | ((x[1] & 0xE0) >> 5))
#define extract_d(x) ((x[1] & 0x1F)) 
```

这需要使用 getter/setter 方法，但是您可以避免大多数可移植性问题，因为您明确指定了所有内容的位顺序和字节顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:07:39.617

我会保留您最初的内容，但会颠倒`word`引用之前的字节顺序（如果需要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:49:55.557

我想说以下结构是**不可**移植的，因为它不会将内存中结构使用的位模式从小端更改为大端或 verse vica：

```
typedef struct
{
    unsigned short a :5;
    unsigned short b :1;
    unsigned short c :5;
    unsigned short d :5;
} protocol_type; 
```

证明：

大端内存布局：

```
 d4   d3   d2   d1   d0   c4   c3   c2   c1   c0   b0   a4   a3   a2   a1  a0
<-             byte 1                -> <-              byte 0              ->  
MSB                                 LSB MSB                                LSB
[              address 1              ] [               address 0            ] 
```

小端内存布局：

```
 c1   c0   b0   a4   a3   a2   a1  a0   d4   d3   d2   d1   d0   c4   c3   c2 
<-             byte 0               -> <-              byte 1               ->  
MSB                                LSB MSB                                 LSB
[              address 1             ] [               address 0             ] 
```

从这里我看不出如何在小端和大端机器上重新排序`a`, `b`, `c`, 并形成相同的位模式。`d`原因是结构的成员`c`跨越了字节边界。

* * *

以下结构可能是可移植的：

```
typedef struct
{
    unsigned short e :5;
    unsigned short f :3;
    unsigned short g :3;
    unsigned short h :5;
} protocol_type; 
```

要在切换字节序时将位模式保留在内存中，只需像这样修改它：

```
typedef struct
{
    unsigned short g :3;
    unsigned short h :5;
    unsigned short e :5;
    unsigned short f :3;
} protocol_type; 
```

* * *

OP 问题的一个可能解决方案是通过以下方式修改结构：

```
typedef struct
{
#if defined(BIGENDIAN)
        unsigned short a :5;
        unsigned short b :1;
        unsigned short c0 :2;
        unsigned short c1 :3;
        unsigned short d :5;
#elif defined(LITTLEENDIAN)
        unsigned short c1 :3;
        unsigned short d :5;
        unsigned short a :5;
        unsigned short b :1;
        unsigned short c0 :2;
#else
#error "endianess not supported"
#endif
} protocol_type;

#define pt_c(pt) (pt.c0 & (pt.c1 << 2))

foo(void)
{
   protocol_type pt;

   ... /* some assignment to pt ... */
   /* to then access the original value of member c use the macro */

   unsigned short c = pt_c(pt); 
```

# jquery - 无法使用来自服务器的数据填充 observableArray

> ID：12075890
> 
> 赞同：0
> 
> 时间：2012-08-22T14:55:06.303
> 
> 标签：jquery, ajax, knockout.js

当我从服务器获取数据时，我无法在我的 observableArray 中插入任何值，但其他元素获取数据。

JS**标记**：

```
var itemViewModel = {
    item: {},
    isLoaded: ko.observable(false),
    comments: ko.observableArray([]),
    loadcontent: function (getID) {
        $.ajax({
            url: '/api/item/details/' + getID,
            dataType: 'json',
            success: function (data) {
                itemViewModel.item = data;
                $.each(data.Comments, function (index) {
                    itemViewModel.comments.push(data.Comments[index]);
                    console.log(data.Comments[index]);
                    console.log(itemViewModel.comments);
                });
                itemViewModel.isLoaded(true);
                itemDetailBindings();
                console.log(itemViewModel.item);
                console.log(itemViewModel.comments);
            }
        });
    }
}; 
```

**结果**：

```
Object
[]
Object
[]
Object
[]
[]
Object
[] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:00:56.187

你不需要`itemViewModel`inside`success`方法，

```
success: function (data) {
                    item = data;
                    $.each(data.Comments, function (index) {
                        comments.push(data.Comments[index]);
                        console.log(data.Comments[index]);
                        console.log(comments);
                    });
                    isLoaded(true);
                    itemDetailBindings();
                    console.log(item);
                    console.log(comments);
                } 
```

# android-emulator - AVD 模拟器未启动

> ID：12075896
> 
> 赞同：0
> 
> 时间：2012-08-22T14:55:33.213
> 
> 标签：android-emulator, avd

我一定做了什么，但不知道是什么。当我开始使用 9patch 工具时，我正在愉快地编程。然后发生了一些事情来阻止 AVD 运行。我做了所有事情——卸载了 Eclipse、SDK、JDK，重新安装了它们（几次！），但仍然是同样的错误。我使用 Eclipse 1.3.2、带有 r20 的 SDK、JDK 7。我查看了每个人的答案，但没有任何帮助。当一切正常并且我启动 AVD 管理器时，批处理文件的“黑匣子”会随着它的启动而闪烁，所以我知道一切正常。但现在我不明白。我得到下面的对话框。有谁有想法吗？我濒临放弃！

为 AVD 'first' 启动模拟器无法创建上下文 0x3005 模拟器：警告：无法使用软件渲染器初始化 OpenglES 模拟。无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:13:17.123

坐了几天，然后和一个发现问题的朋友在一起。在主xml的主要Linearlayout中，我删除了这两行： android:layout_width="fill_parent" android:layout_height="fill_parent"

我仍然收到上面的错误警告，但项目上传并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:04:58.460

刚遇到这个问题，但我认为它不是来自您的代码。就我而言，我只是启动它而不启动/运行任何项目。

# php - 异步加载数据会加速页面加载吗？

> ID：12075900
> 
> 赞同：2
> 
> 时间：2012-08-22T14:55:43.120
> 
> 标签：php, javascript, jquery, mysql, login

在我当前的网页上，我使用 php 从 mysql db 加载表格内容。但是数据库包含大约 1500 多行，并且它们都是加密的。所以每次加载它们大约需要 3 秒。所以我想通过 jquery 加载它们。这会更快吗？它仍然安全吗，我当前的 php 看起来会话 ['loggedin'] 变量是否为 1？我也可以用jquery进行登录吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:59:34.307

异步加载大型数据集不会更快。实际上它会更慢（更多请求）。但是这样做可能允许您一次加载较小的数据块，并获得一个响应更快的站点。

不过，这与 jQuery 无关。jQuery 只是一个常用的 JavaScript 框架，恰好包含一些漂亮的 ajax 功能。

至于您的顺序问题，异步请求就像任何其他请求一样由服务器处理，所以这不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:01:22.280

当然，如果您使用 ajax，您可以允许显示页面的其余部分，这样用户在查询完成时就不会留下空白页面。

Ajax 将只调用另一个 php 脚本，因此您可以在该脚本中执行所有相同的安全检查。

如果您使用的是 jquery，我只会使用[.load()](http://api.jquery.com/load/ "。加载（）")，因为它非常简单。

# objective-c - iPad 绘图：将图像绘制到 CGContext

> ID：12075903
> 
> 赞同：2
> 
> 时间：2012-08-22T14:55:50.383
> 
> 标签：objective-c, ios, core-graphics, cgcontext

在我的 iPad 绘图应用程序中，我有一个 768 x 1024 的缓冲区上下文，我创建并使用它来加速我的绘图。

这是调用 drawRect 时我当前正在执行的代码，它只是将我已经存在的绘图复制到屏幕上：

```
CGContextRef context = UIGraphicsGetCurrentContext();

CGImageRef image = CGBitmapContextCreateImage([DrawingState sharedState].context);
CGContextDrawImage(context, CGRectMake(0, 0, 768, 1024), image);
CGImageRelease(image); 
```

此代码按预期工作：它从我的背景上下文中收集图像并将其绘制到我当前的上下文中，然后释放图像。有用！

但是，我正在做一些性能调整以加快绘图速度，我正在尝试使用此代码，其中“rect”是 drawRect 传入的矩形

```
CGContextRef context = UIGraphicsGetCurrentContext();

CGImageRef image = CGBitmapContextCreateImage([DrawingState sharedState].context);
CGImageRef subImage = CGImageCreateWithImageInRect(image, rect);
CGContextDrawImage(context, rect, subImage);
CGImageRelease(subImage);
CGImageRelease(image); 
```

这不起作用；图像没有出现在正确的位置，甚至可能不是正确的图像（无法判断，因为如果图像出现在错误的位置，图像的一部分甚至不会绘制，因为它会在 drawRect 之外矩形。）知道发生了什么吗？

下面是我如何初始化 [DrawingState sharedState].context。这部分应该没问题，但我想我会把它包括在内以保持完整性。

```
if(context != NULL)
{
    CGContextRelease(context);
    context = NULL;
}
if(bitmapData != NULL)
{
    free(bitmapData);
    bitmapData = NULL;
}
if(colorSpace != NULL)
{
    CGColorSpaceRelease(colorSpace);
    colorSpace = NULL;
}

CGSize canvasSize = CGSizeMake(screenWidth, screenHeight);

int bitmapByteCount;
int bitmapBytesPerRow;

bitmapBytesPerRow   = (canvasSize.width * 4);
bitmapByteCount     = (bitmapBytesPerRow * canvasSize.height);

colorSpace = CGColorSpaceCreateDeviceRGB();

bitmapData = malloc( bitmapByteCount );

if( bitmapData == NULL ){
    NSLog(@"Buffer could not be alloc'd");
}

//Create the context
context = CGBitmapContextCreate(bitmapData, canvasSize.width, canvasSize.height, 8, bitmapBytesPerRow, colorSpace, kCGImageAlphaPremultipliedFirst); 
```

根据要求，我尝试执行的实际优化如下。我正在将缓冲区图像（在进行其他绘制之前）绘制到我的缓冲区上下文中，然后将我的缓冲区上下文复制到当前上下文中。

原始代码：

```
CGContextClearRect([DrawingState sharedState].context, CGRectMake(0, 0, 768, 1024));
if(bufferImage != NULL)
{
    CGContextDrawImage([DrawingState sharedState].context, CGRectMake(0, 0, 768, 1024), bufferImage);
} 
```

优化代码：

```
CGContextClearRect([DrawingState sharedState].context, rect);
if(bufferImage != NULL)
{
    CGImageRef subImage = CGImageCreateWithImageInRect(bufferImage, rect);
    CGContextDrawImage([DrawingState sharedState].context, rect, bufferImage);
    CGImageRelease(subImage);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:29:02.357

这个问题的简短答案是我想使用 CGContextClipToRect 而不是尝试获取子图像。CGContextClipToRect(CGContextRef, CGRect) 用于自动将任何绘图剪辑到提供的矩形之外的上下文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:13:38.040

我怀疑你想使用相同的`rect`值来创建子图像和绘图。

如果您阅读[文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)，`CGImageCreateWithImageInRect`获取图像和 rect 参数的交集，同时`CGContextDrawImage`将图像绘制成 rect。

我不知道您打算如何将其用作优化，但您的结果听起来像我对您的代码的期望。

# c# - Linq 中 lambda/方法语法的左外连接

> ID：12075905
> 
> 赞同：30
> 
> 时间：2012-08-22T14:56:02.000
> 
> 标签：c#, .net, linq

> **可能重复：**
> [如何使用 linq 扩展方法执行左外连接](https://stackoverflow.com/questions/584820/how-do-you-perform-a-left-outer-join-using-linq-extension-methods)

我找不到Linq lambda（带有扩展方法）的左外连接示例，至少不是一个清晰的示例。

假设我有下表：

```
Parent
{
    PID     // PK
}

Child
{
    CID     // PK
    PID     // FK
    Text
} 
```

我想加入 Parent with Child，对于每个失踪的孩子，我希望 Text 的默认值为“[[Empty]]”。如何使用 linq lambda 语法做到这一点？

我目前有以下内容：

```
var source = lParent.GroupJoin(
    lChild,
    p => p.PID,
    c => c.PID,
    (p, g) =>
        new // ParentChildJoined
        {
            PID = p.PID;
            // How do I add child values here?
        }); 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-22T15:44:43.853

你很近。以下将为每个孩子选择`PID`,`CID`和,对于没有孩子的每个父母选择 ,和：`Text``PID``CID = -1``Text = "[[Empty]]"`

```
var source = lParent.GroupJoin(
    lChild,
    p => p.PID,
    c => c.PID,
    (p, g) => g
        .Select(c => new { PID = p.PID, CID = c.CID, Text = c.Text })
        .DefaultIfEmpty(new { PID = p.PID, CID = -1, Text = "[[Empty]]" }))
    .SelectMany(g => g); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T15:03:51.690

```
from p in Parent
join c in Child on p.PID equals c.PID into g
from c in g.DefaultIfEmpty()
select new 
{
   p.PID,
   CID = c != null ? (int?)c.CID : null, // Could be null
   Text = c != null ? c.Text : "[[Empty]]"
} 
```

使用 lambda：

```
class ChildResult
{
   public int PID { get; set; }
   public int? CID { get; set; }
   public string Text { get; set; }
}

lParent.SelectMany(p => p.Childs.Any() ?
  p.Childs.Select(c => new ChildResult() { PID = c.PID, CID = c.CID, Text = c.Text }) :
  new [] { new ChildResult() { PID = p.PID, CID = null, Text = "[[Empty]]" } } ); 
```

# jquery - 只允许点击一次，不允许双击

> ID：12075908
> 
> 赞同：2
> 
> 时间：2012-08-22T14:56:11.043
> 
> 标签：jquery

我需要让我的提交按钮只单击一次以防止双击。

这是某人发布的一种方法：

```
 $(document).ready(function () { 
      $("#submit").one('click', function (event) 
      {   
         event.preventDefault(); 
         //do something 
         $(this).prop('disabled', true); 
      }); 
    }); 
```

1）据我了解，.one 只会被触发一次。如果是这样，我不确定 event.preventDefault() 和 $(this).prop('disabled', true) 的需求是什么，因为点击只完成一次。这本身就是解决办法。从测试中，我注意到如果我双击，它只发生一次（尝试没有 preventdefault 和禁用）

2) 如果 .one 没有按照我在 1) 中假设的那样做，我理解 $(this).prop('disabled', true); 的部分。禁用按钮但不太明白为什么我们需要 event.preventDefault(); 据我了解，它将阻止默认操作，在这种情况下是提交。如果这是真的，那么 event.preventDefault(); 有什么用？因为我们确实想提交它，但只提交一次。

3） .one 本身不会阻止双击。我对此是否正确？所以不需要其余的逻辑，正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:59:05.603

在我看来，他想阻止提交按钮的默认操作，也就是将表单发布到服务器。

禁用按钮本身会使它在大多数浏览器中看起来呈灰色，因此它只是直接表明按钮已被单击。提供动作的视觉反馈使其对最终用户更有用。

所以：按钮的点击只能执行一次，因此是一次，但他不希望提交表单。可能在`//do something`他想打一个ajax调用左右。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:00:23.493

我认为回答这个问题的人一定考虑过防故障解决方案，

`event.preventDefault();` - 实现的目的`.click`是在表单数据实际提交之前对其进行处理。如果您有`<input type="submit"`which 将在执行处理程序之前提交表单，除非它被阻止。

`e.preventDefault()``<button>`如果您使用或，则不需要`<input type="button"..`。

`$(this).prop('disabled', true);`- 防止键盘`space`等同于单击按钮。

并将`.one`防止双击。

# c# - 如何使用命名空间删除未使用的

> ID：12075909
> 
> 赞同：74
> 
> 时间：2012-08-22T14:56:12.343
> 
> 标签：c#, asp.net, visual-studio-2010

我正在使用 Visual Studio 2010，想知道是否有一种方法可以自动删除页面顶部未使用的所有命名空间，例如

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq; 
```

在上面的例子中 System.Collections.Generic 没有被使用，有没有办法知道没有试错。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-22T14:56:43.997

是的，您可以右键单击页面并从菜单中选择；

```
Organise Usings > Remove Unused Usings 
```

或者，如果您喜欢快捷方式，请使用；

```
Ctrl + R + G 
```

我一直在使用它来清理代码，并使代码编译更快。

或者您可以使用[PowerCommands](http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99)删除整个项目的未使用使用

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2017-05-10T05:07:44.020

在 Visual Studio 2017 中，我使用这个非常简单的组合键：++`CTRL`删除未使用的`R``G``imports/namespaces`

**更新：**

在 VS for Mac 中：

不幸的是，没有默认的键绑定，但您始终可以编辑您的首选项。

> `Visual Studio`->`Preferences`

[![在此处输入图像描述](../Images/aff6878fa52d1e86ecee1a79e777e74d.png)](https://i.stack.imgur.com/yHqev.png) 就我而言，它被绑定为`⌘</kbd>+`R`+`G``

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-07-20T11:27:55.403

您可以安装一个名为：Productivity Power Tools 2015（来自 Microsoft）的扩展程序，并且它具有在您保存文件时自动删除未使用的选项的选项。之后不再需要工作。

[![在此处输入图像描述](../Images/1dd87780d20dc75682c560c1fabcf420.png)](https://i.stack.imgur.com/AeHi3.jpg)

[![在此处输入图像描述](../Images/eb62bd5adc9b9b5c98e864cc686167e9.png)](https://i.stack.imgur.com/U1sVC.jpg)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2019-11-11T14:07:53.583

如果您使用的是 Visual Studio 2019，您可以：

*右键单击您的解决方案*->*分析和代码清理*->*配置代码清理*->*创建配置文件（删除和排序使用），然后运行它*。

[![在此处输入图像描述](../Images/e70a8a9b49d155387047deb5832da8a9.png)](https://i.stack.imgur.com/V0Ah0.png) [![在此处输入图像描述](../Images/e15eba994213afe5089b5883f39cbbc6.png)](https://i.stack.imgur.com/F9Mzo.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-22T15:08:08.527

和其他人一样的答案。如果您是键盘忍者（`Shift`+`F10`弹出上下文菜单），请使用以下命令：

`Shift`+ `F10`, `O`,`R`

* * *

您将上下文菜单的*特殊键称为什么？*而不是按`Shift`+ `F10`（我的键盘没有那个*特殊键，*这就是我使用`Shift`+的原因`F10`），而是更短：

`whateverThatKeyCalled`, `O`,`R`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-05-31T12:36:23.700

对于 VS 2019 或 ReSharper。如果您将未使用的使用添加到文件的顶部，例如会`using System.IO;`出现灯泡。单击灯泡可以选择从文件、文件夹、项目或整个解决方案中删除未使用的用途。

[![在此处输入图像描述](../Images/52b115d9ce045c79487434fac8c2acc3.png)](https://i.stack.imgur.com/EA5um.png)

[![在此处输入图像描述](../Images/da2e1ff7c2bb79a5472f9b1e250ccd71.png)](https://i.stack.imgur.com/5Y6P9.png)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-05-24T17:03:42.690

我知道 OP 指定了 VS 2010，但那是不久前的事了，这个功能直接内置到 VS 2017 中。从菜单，工具 -> 选项，然后找到下面的复选框。

之后，任何时候你使用`CTRL`+ `K`, `CTRL`+`D`它们都会被删除。

[![删除不必要的使用](../Images/e241a5ead091390ec97c5ec353ba9979.png)](https://i.stack.imgur.com/MIjmF.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-22T14:58:50.440

正如 saj 所说，您可以使用`Remove Unused Usings`，如果您同时对 usings 进行排序，效果会更好，甚至更好。Resharper 4.5 可以帮助您为整个项目执行此操作，这是 VS2010 中缺少（并且缺少）的功能。

以下线程中提供了更多信息：[删除整个程序集中未使用的 Using](https://stackoverflow.com/questions/2335940/remove-unused-usings-across-entire-assembly)

* * *

**提示：**上面的线程是指提出一个宏来删除整个解决方案中未使用的使用的博客。[在整个解决方案中组织使用](https://docs.microsoft.com/en-us/archive/blogs/djpark/organize-usings-across-your-entire-solution)。我刚试了一下，它就像一个魅力！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-01-16T00:45:20.670

我正在使用 Visual Studio 2019，由于某种原因，我的项目设置的警告级别为 3，这会阻止 Visual Studio 清理使用。确保此值设置为 4。

![设置 -> 构建 -> 警告级别 = 4](../Images/66d76e993c8214951ee8f00fcf6362db.png)

# jquery - 在backbonejs中重用视图

> ID：12075913
> 
> 赞同：1
> 
> 时间：2012-08-22T14:56:21.700
> 
> 标签：jquery, backbone.js, backbone-events, backbone-views

我想在不丢失任何绑定事件的情况下呈现一个视图及其子视图。现在我正在渲染一次主视图，然后将其子视图附加到一个元素。当父视图再次渲染时，它会清除`el`绑定的子视图。

这是我现在拥有的：

```
render: function() {     
    var html = this.template({model:this.model.toJSON(), otherModel:window.otherModel.toJSON()});

    this.$el.html(html);
    this.openList();
}

OpenList: function(){
    if(typeof(this.ListView)=="undefined"){
        this.ListView = new App.ListView({el:this.$("#ListView-tab"),collection:this.model.list});
    }
    this.ListView.collection.fetch();
} 
```

我已经阅读了一些解决此问题的方法：

a) 填充渲染

此选项将放入初始渲染，`initialize`然后在`render`函数中使用 jquery 添加信息

```
 initialize: function() {
      var html = this.template({model:this.model.toJSON(), otherModel:window.otherModel.toJSON()});

}

 render: function() {     
    this.$('.title').text(this.model.get('title'));
    this.$('.date').text(this.model.get('date'));

} 
```

b) 分离和委派事件

`detach()`每次渲染父视图时，子视图、`el`重新附加视图和视图`delegateEvents()`

```
render: function() {
    if(typeof(this.ListView)!="undefined"){
        this.ListView.$el.detach
    }     
    var html = this.template({model:this.model.toJSON(), otherModel:window.otherModel.toJSON()});

    this.$el.html(html);
    this.openList();
}

OpenList: function(){
    if(typeof(this.ListView)=="undefined"){
        this.ListView = new App.ListView({collection:this.model.list});
    }
    if(this.ListView.$el.parent().length)this.$("#ListView-tab").append(this.ListView.el); //if not already appended
    this.ListView.collection.fetch();
    this.ListView.delegateEvents();
} 
```

c）最后的选择是保留我的大部分代码，只需将以下代码放在`render`父视图中

```
if(typeof(this.ListView)!="undefined"){
    this.ListView=undefined;
} 
```

这将使子视图无效并在每次主视图呈现时重新创建它。

我发布的方法有问题吗？我倾向于选项 c)，因为它是确保一切都将被重新创建并使其事件正常工作的最简单方法。

# c# - C# 从 HttpContext.Current.Cache 中检索缓存过期日期

> ID：12075914
> 
> 赞同：1
> 
> 时间：2012-08-22T14:56:22.713
> 
> 标签：c#, caching, httpcontext.cache

我正在使用 .net 4.0`HttpContext.Current.Cache.Add()`将对象插入到我的应用程序的缓存中。在 .aspx 控制面板页面中，我想显示所有缓存的对象及其各自的到期日期，这些到期日期是我在插入它们时指定的。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:29:46.733

如果我正确理解您，您想显示插入的*静态到期日期*，对吗？如果是这样，您只需要存储到期日期并将其传递到您的控制面板。如果您使用的是 asp.net mvc，则可以将此日期作为 ViewModel 的属性发送。让你举个例子来说明我在说什么：

```
public DateTime InsertItemOnCache(object item, DateTime expiration)
{

    DateTime dateExpiration;
    //Here you construct your cache key. 
    //You can use your asp.net sessionID if you want to your cache 
    //to be for a single user.
    var key = string.Format("{0}--{1}", "Test", "NewKey");

    if (expiration != null)
    {
        dateExpiration = expiration;
    }
    else
    {
        //Set your default time
        dateExpiration = DateTime.Now.AddHours(4);
    }
    //I recommend using Insert over Add, since add will return null if there are
    //2 objects with the same key
    HttpContext.Current.Cache.Insert(key, item, null, dateExpiration, Cache.NoSlidingExpiration);

    return dateExpiration;
} 
```

但是，如果您希望“即时”到期日期，则必须使用反射。为此，请参阅建议作为对您问题的评论的帖子。

# excel - Excel - 转到某个工作表的按钮

> ID：12075921
> 
> 赞同：9
> 
> 时间：2012-08-22T14:56:50.303
> 
> 标签：excel, excel-2007

我正在尝试创建一个按钮以将我带到我的索引表。我知道如何使用宏或超链接来做到这一点，但我的用户不是“聪明”用户，如果我使用宏，我会整天打电话给我。

除了使用超链接之外，有谁知道我该如何解决这个问题？我在想一个带有超链接的按钮，但还没有找到方法！

谢谢！:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-22T15:01:45.163

在 Excel 2007 中，转到插入/形状并选择一个形状。为它着色并输入您想要的任何文本。然后右键单击形状并插入超链接

![在此处输入图像描述](../Images/b94b0d310aa6c8f9905ecaba66c500d6.png)

![在此处输入图像描述](../Images/71ad235218080dbd40e50f8b3c12a13c.png)

形状的一些技巧..

如果您想轻松定位带有单元格的形状，请在移动形状时按住 Alt，它将锁定到单元格。如果您不希望形状随行/列一起移动或调整大小，请右键单击形状，选择大小和属性，然后选择最有效的设置。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-22T15:22:40.490

或者，如果您使用的是启用宏的工作簿：

从开发人员中添加任何控件 - >插入（可能是一个按钮）

当它询问要分配什么宏时，选择新建。对于生成的模块的代码，输入如下内容：

```
Thisworkbook.Sheets("Sheet Name").Activate 
```

但是，如果您没有在工作簿中使用宏。[Ooo 的方法](https://stackoverflow.com/a/12076024/1316573)绝对是优越的，因为超链接无需信任文档即可工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-23T17:43:13.943

您必须将 Button 添加到 excel 工作表（例如`sheet1`），您可以从中转到另一个工作表（例如`sheet2`）。

可以从 Excel 的开发人员选项卡中添加按钮。**如果没有开发人员选项卡，请按照以下步骤启用。**

GOTO 文件 -> 选项 -> 自定义功能区 -> 在右侧面板上启用开发人员复选框 -> 完成。

**添加按钮：-**

开发人员选项卡 -> 插入 -> 选择第一项按钮 -> 选择按钮的位置 -> 完成。

**为按钮命名：-**

右键单击按钮-> 编辑文本。

**添加用于进入 sheet2 的代码：-**

右键单击按钮->分配宏->新建->（Microsoft Visual Basic将打开按钮代码）->粘贴下面的代码

```
Worksheets("Sheet2").Visible = True
Worksheets("Sheet2").Activate 
```

使用“Excel 宏启用模板（*.xltm）”保存文件，通过该模板将代码附加到 excel 表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-01T14:24:09.267

您无需创建按钮。该设施默认存在。

只需右键单击 Excel 窗口左下角的箭头按钮。这些是箭头按钮，如果您左键单击，可以向左或向右移动一个工作表。

如果您右键单击这些箭头，Excel 将弹出一个对话框，其中包含工作表列表，您可以从中单击以将所选工作表设置为活动状态。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T14:58:22.923

他们有什么理由不能在需要时单击您的工作表的选项卡？

# mysql - 使用 mysql 安装 bugzilla

> ID：12075924
> 
> 赞同：0
> 
> 时间：2012-08-22T14:57:10.033
> 
> 标签：mysql, bugzilla

我正在尝试安装 Bugzilla 作为设置 Testopia 的一部分。我正在使用 3.6.3，因为我们公司网站使用它，并且在可预见的将来没有升级计划。我已经安装了 mysql，但是当我运行`/usr/bin/perl install-module.pl DBD::mysql`脚本时它失败了。错误消息虽然不是很有描述性。我已将其包括在下面：

> 运行 Mkbootstrap for DBD::mysql () chmod 644 mysql.bs rm -f blib/arch/auto/DBD/mysql/mysql.so LD_RUN_PATH="/home/y/lib/mysql:/lib64" /usr/bin/ perl myld gcc -shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic dbdimp.o mysql.o - o blib/arch/auto/DBD/mysql/mysql.so \ -L/home/y/lib/mysql -lmysqlclient -lz -lcrypt -lnsl -lm -lssl -lcrypto \
> 
> /usr/bin/ld: 搜索时跳过不兼容的 /home/y/lib/mysql/libmysqlclient.so -lmysqlclient /usr/bin/ld: 找不到 -lmysqlclient collect2: ld 返回 1 退出状态 make: *** [blib/ arch/auto/DBD/mysql/mysql.so] 错误 1 ​​CAPTTOFU/DBD-mysql-4.021.tar.gz /usr/bin/make -- NOT OK 由于 note pragma 正在跳过测试运行 make install Make 已返回错误状态，安装似乎不可能

我不知道为什么 libmysqlclient.so 不兼容。安装的 mysql 版本是否太旧或者对于这个版本的 Bugzilla 来说太新？错误消息未指定。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:03:26.293

[这看起来像这样](https://serverfault.com/questions/132061/need-help-getting-perl-module-dbdmysql-installed-for-bugzilla-on-redhat)，建议您更新操作系统。

希望这会有所帮助

# javascript - RegExp的序列化

> ID：12075927
> 
> 赞同：43
> 
> 时间：2012-08-22T14:57:26.583
> 
> 标签：javascript, json, stringify

因此，我有兴趣发现`JSON.stringify`将 RegExp 简化为空的对象文字（[小提琴](http://jsfiddle.net/3mHrw/)）：

```
JSON.stringify(/^[0-9]+$/) // "{}" 
```

这种行为是预期的吗？我意识到 RegExp 是一个没有要序列化的属性的对象。也就是说，日期也是对象。然而`JSON.stringify()`设法产生一个有意义的字符串：

```
JSON.stringify(new Date) // "2014-07-03T13:42:47.905Z" 
```

我希望 JSON 能够通过使用.`RegExp.prototype.[toString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/toString)`

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-03-21T23:08:05.033

If somebody would be interested, there is a nice workaround. I don't think, that current behaviour is correct. For example, `Date` instance is not serialized to empty object like `RegExp`, though it is an `object` and also has no JSON representation.

```
RegExp.prototype.toJSON = RegExp.prototype.toString;

// sample
var foo = { rgx: /qux$/ig, date: new Date }

JSON.stringify(foo);
//> {"rgx":"/qux$/gi","date":"2014-03-21T23:11:33.749Z"}" 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-10-29T14:16:31.997

JSON.stringify和[JSON.parse都](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)[可以](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)通过使用和 reviver 参数进行自定义以进行自定义序列化和反序列化。`replacer`

```
var o = {
  foo: "bar",
  re: /foo/gi
};

function replacer(key, value) {
  if (value instanceof RegExp)
    return ("__REGEXP " + value.toString());
  else
    return value;
}

function reviver(key, value) {
  if (value.toString().indexOf("__REGEXP ") == 0) {
    var m = value.split("__REGEXP ")[1].match(/\/(.*)\/(.*)?/);
    return new RegExp(m[1], m[2] || "");
  } else
    return value;
}

console.log(JSON.parse(JSON.stringify(o, replacer, 2), reviver));
```

你只需要想出你自己的序列化格式。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-08-22T14:59:12.860

是的，因为 JSON 中没有 RegExp 对象的规范表示。因此，它只是一个空对象。

*编辑*——现在是 2018 年；建议使用`.toJSON()`等解决方案的答案可能很好，尽管我会将该方法添加到原型中

```
Object.defineProperty(RegExp.prototype, "toJSON", {
  value: RegExp.prototype.toString
}); 
```

等等。这确保了函数名称不可枚举，这使得猴子补丁更加卫生。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-11T00:52:38.183

以下是我解决此问题的方法：

将其序列化为字符串：

```
var pattern = /foobar/i;
var serialized = JSON.stringify(pattern.toString()); 
```

然后使用另一个正则表达式对其进行补水：

```
var fragments = serialized.match(/\/(.*?)\/([a-z]*)?$/i);
var rehydrated = new RegExp(fragments[1], fragments[2] || ''); 
```

保留模式和标志 - 希望这对某人有所帮助！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-03T07:27:17.500

```
RegExp.prototype.toJSON = RegExp.prototype.toString;

var regexp = /^[0-9]+$/;
var foo = { rgx: regexp.source, date: new Date };
var stringified = JSON.stringify(foo);
new RegExp(JSON.parse(stringified).rgx) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-07T17:09:36.803

我认为一个好的方法是这样的：

```
function stringifyFilter(key,value) {
    if (value instanceof RegExp) {
        return value.toString();
    }

    return value;
}

var myObj = {
    text : 'Howdy ho!',
    pattern : /[a-z]+/i
}

JSON.stringify(myObj,stringifyFilter); // output: {"text":"Howdy ho!","pattern":"/[a-z]+/i"} 
```

# java - 向 DerbyDB 添加多条记录时的转义序列

> ID：12075928
> 
> 赞同：0
> 
> 时间：2012-08-22T14:57:32.503
> 
> 标签：java, sql, escaping, derby

我正在将 Ms AccessDB 转换（或尝试）转换为 derby。

当我从访问中的某些 varchar / text / memo 字段中提取数据时，它们充满了撇号、数学符号（百分比、小于等）以及可能的外来字符

我需要保留这些并测试它们，以便我可以使用“转义序列”来确保它们被放入数据库。

但是，现在我无法将数据导入数据库，而不会在这些字段上失败。当 SQL 失败时，我输出 SQL 字符串，并将其剪切并传递到 ij 中。然后我只修改了第一条记录，总是这些字符让我感到悲伤。

我试图通过用“双引号”括起来来修改字符串，但这只会给出一个不同的错误（说明它在第 1 列 x 处有 'enounterd """，这始终是双引号的第一次出现）。

我还没有在 derby 中找到改变字符串行为的设置。有吗？

我还尝试将 SQL 语句设置为preparedStatement，然后再次使用{callpreparedStatement}，这也失败了。我不能在正常的语句中使用 {escape "escape char}，因为 derby 只是对我说不正确的语法。

其他人如何设法将带有奇怪字符的用户内容放入 derby 的字段中？我是否需要将我的字段更改为 CLOB 或 varchar / long Varchar 以外的其他内容？我的问题是由于使用了错误的字符集（例如 iso 而不是 UTF-8）引起的，我如何知道它是什么，如何更改它？

下面是我将它发送到 derby 时失败的 SQL 插入示例（通过我的 JAVA '程序'）

> 插入 S1.SORTIEDESSAI (OBS, DATEDUSORTIE, CONTREINDIC, FIN, PEVU, REFUS, INVDECISN, ADMIN, MOTIF_DE_LA_SORTIE, NOMVALIDEE, DATEVALIDEE) 值 ('"0001/0001"' , '2007-07-15' , false , true , '"null"' , '"null"' , '"null"' , '"null"' , '"2\. FIN DE L'ESSAI"' , '"DR SIMON"' , '2011-04-19' )

注意：实际上我看了上面的内容并注意到列名的顺序不好？昨天还好，不知道为什么会变？与 Access 以随机顺序从 resultSetMetaData 返回列名有关，这将是一个惊喜。

现在我建议在解决这个问题时推迟任何进一步的答案，好的解决了这个问题，我是否需要设置另一个关于这种行为的问题......回到主线程......

好的，正如您在我的 SQL 语句中看到的那样，我已将任何 varchar 字段用双引号括起来。这总是失败（甚至直接通过 ij）。帮助 帮助 帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:22:19.973

我不太确定您的问题是什么，但通常您可以使用以下形式的 PreparedStatement 输入这些字符：INSERT INTO tablename (columnname) values (?)，然后使用 PreparedStatement.setString() 方法提供该列的字符数据。

# ruby-on-rails - Rails 表单提交到新页面

> ID：12075930
> 
> 赞同：0
> 
> 时间：2012-08-22T14:57:40.950
> 
> 标签：ruby-on-rails

如果我有一个表单，通过虚拟属性获取名称、日期和另一个布尔值的集合，我如何将它们提交到新页面和操作。这与 CRUD 无关。它会简单地进行一些处理，然后在新页面上吐出值。

**人选.erb**

```
<%= render :partial => 'myForm' %> 
```

**_myForm.html**

```
<%= simple_form_for(@person) do |f| %>
<%= f.input :names, :collection => People.all, as => :check_boxes %>
<%= f.input :DateTime %>
<%= f.check_box :paid %>
<%= f.submit %> 
```

**person_controller.erb**

```
def personReport
  #Some Random Processing
end 
```

**personReport.html.erb**

```
#Display the personReport processing data 
```

同样，我正在尝试通过 personReport 操作提交要处理的表单，然后显示到一个名为 personReport.html.erb 的新页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:33:04.287

在您的路线中

```
 match "/person/personreport" => "person#personReport", :as => personreport 
```

以你的形式

```
 <%= simple_form_for(@person, :url => personreport_path) do |f| %> 
```

这会将数据发送到您的 personReport 操作，您可以在其中处理数据，然后默认情况下该操作将呈现 personReport.html.erb

# glassfish - glassfish负载均衡器工作原理

> ID：12075932
> 
> 赞同：0
> 
> 时间：2012-08-22T14:57:44.947
> 
> 标签：glassfish, webserver, load-balancing, session-replication

我在 glassfish 3.1.1 和 iPlanet Web Server 上配置了具有两个实例的集群作为负载均衡器（在同一台机器上）。对于 glassfish 提供的测试应用程序，一切正常（并且此应用程序启用了会话复制）。

但是当我尝试让自己的应用程序工作时，会发生以下情况：当我在特定实例的端口（即 28080 和 28081）上发送请求时它会响应，但是当我尝试通过负载均衡器（端口 81）发送请求时我得到错误 404。我的应用程序尚未启用会话复制，但它可以建立连接并为每个实例创建另外两个会话。我想用负载均衡器获得类似的效果。

所以我想确定：

1.  负载均衡器是否需要会话复制才能正常工作？
2.  有谁知道这个错误的任何其他原因？

来自 iPlanet 日志的消息：

```
[23/Aug/2012:05:44:16] failure ( 4120) myHost: for host 127.0.0.1 trying to GET /myApp/login.jsp, service-j2ee reports: PWC6117: File "c:/webserver7/https-myHost/docs/myApp/login.jsp" not found 
```

附加结论：

（81 - iPlanet 上的 http-listener 端口）

当我发送时`GET http://localhost:81/testApp`，负载均衡器将其传递给 glassfish 并返回正确的站点。但是当我对我的测试应用程序尝试相同的操作时，`GET http://localhost:81/myApp`iPlanet 在它自己的资源中查找这个站点（文档目录如上面的日志）

myHost-obj.conf 的片段：

```
<Object name="default">
AuthTrans fn="match-browser" browser="*MSIE*" ssl-unclean-shutdown="true"
NameTrans fn="name-trans-passthrough" name="lbplugin" config-file="C:/WebServer7/https-myHost/config/loadbalancer.xml"
NameTrans fn="assign-name" name="perf" from="/.perf"
NameTrans fn="ntrans-j2ee" name="j2ee"
NameTrans fn="pfx2dir" from="/mc-icons" dir="C:/WebServer7/lib/icons" name="es-internal"
PathCheck fn="uri-clean"
PathCheck fn="check-acl" acl="default"
PathCheck fn="find-pathinfo"
PathCheck fn="find-index-j2ee"
PathCheck fn="find-index" index-names="index.html,home.html,index.jsp"
ObjectType fn="type-j2ee"
ObjectType fn="type-by-extension"
ObjectType fn="force-type" type="text/plain"
Service method="(GET|HEAD)" type="magnus-internal/directory" fn="index-common"
Service method="(GET|HEAD|POST)" type="*~magnus-internal/*" fn="send-file"
Service method="TRACE" fn="service-trace"
Error fn="error-j2ee"
AddLog fn="flex-log"
</Object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:26:53.000

首先，如果您正在运行 Load Balancer 插件，那么您可能有一份支持合同（在将插件投入生产之前需要 GlassFish 许可证）。如果是这样，致电支持是一个不错的选择。

要回答您的第一个问题，负载均衡器不需要会话复制即可工作。

作为一个无耻的插件，我有一个由[5 部分组成的 youtube 系列](https://blogs.oracle.com/jclingan/entry/glassfish_server_load_balancing_plugin)来设置它。您可以跳过有关下载和安装的视频，直接进入设置/配置/测试。根据您的描述，我怀疑问题不是插件本身，而是 loadbalancer.xml 配置。查看 loadbalancer.xml 并查看是否配置了 myApp。

希望这可以帮助。

# c++ - 在 MessageBox 中显示变体类型值

> ID：12075937
> 
> 赞同：0
> 
> 时间：2012-08-22T14:57:56.653
> 
> 标签：c++, directshow, win32com

呵呵我有一个小问题事实上我希望能够看到我插入的设备列表我想在 MessageBox() 中首先看到它们但是这个变体让我很恼火 (^_^) 我尝试了很多方法但没有结果

```
 IMoniker *tmpMonk=NULL;
ULONG done;
VARIANT varName;
while(this->deviceClassEnum->Next(1,&tmpMonk,&done)==S_OK)
{
    IPropertyBag *tmpBag=NULL;
    tmpMonk->BindToStorage(0,0,IID_IPropertyBag,(void **)&tmpBag);
    VariantInit(&varName);
    checkIt(tmpBag->Read(L"FriendlyName",&varName,0));
            // this i wana see what is inside but huuuuuuuuuuuuuh
    MessageBox(this->app,TEXT((LPCSTR)varName.bstrVal),"",NULL);
    VariantClear(&varName);
    tmpBag->Release();
} 
```

其次如何能够从设备切换到另一个。从任何菜单或列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:00:58.113

您需要调用`MessageBoxW`而不是`MessageBox`. 并取下石膏。所以它看起来像：

```
MessageBoxW(this->app, varName.bstrVal , L"", NULL); 
```

这是字符编码的问题；COM 中使用的字符串是 type`BSTR`的，可以和`PWSTR`/ `PCWSTR`types 一样使用。这与`PCSTR`.

请记住，强制转换只是告诉编译器“嘿，我知道我在做什么，闭嘴”。除了编译器的消息实际上试图帮助您之外，您告诉他们离开。下次听他们的。

# php - 如何访问此数组中的 id 值？

> ID：12075944
> 
> 赞同：-1
> 
> 时间：2012-08-22T14:58:21.347
> 
> 标签：php, arrays

当我这样做时，`print_r`我得到了这个数组：

```
Array (
   [0] => Array (
      [id] => 5280
   )
) 
```

如何使用 PHP 访问 id 值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T14:59:45.590

你可以像这样访问它

```
$id_value = $your_array[0]['id']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:00:21.173

尝试

```
$mapped = array_map("current",$array);
echo $mapped[0]; 
```

如果根数组上有多个数组，这很有用，
例如：`Array(Array(),Array()..)`

# visual-studio-2010 - 用 InstallShield/WIX 替换 VDPROJ 设置文件

> ID：12075946
> 
> 赞同：6
> 
> 时间：2012-08-22T14:58:23.813
> 
> 标签：visual-studio-2010, wix, windows-installer, installshield, vdproj

我们的产品目前通过 4-5 个 MSI 安装，这些 MSI 由`.vdproj`文件创建，这些文件由 vs 2010 项目的输出和合并模块中的附加信息创建。

由于 VS2012 不再支持 VS 安装项目（哦不！），我一直在寻找 InstallShield 和 WIX 作为可能的替代品（哦，不！）所以我们必须找到其他东西。

我在 InstallShield 上玩过一些游戏，但我无法真正掌握它，除了安装产品之外​​，安装程序还必须接受一些参数，例如数据库名称和位置等。我不能似乎找到了一种方法将此信息获取到 InstallShield 项目中 -虽然这是使用*Visual Studio 的 InstallSHield 限量版*

我不确定哪个最好用？有人有从 VDPROJ 转换为 WIX 或 IS 的经验吗？

**编辑** 看起来 WIX 将是最简单的，我正在努力掌握它。我似乎找不到任何有用的帖子可以让我将项目输出定向到我的 WIX 安装程序，以及如何创建变量。（不使用插件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:46:44.623

很难给出一个简单的答案，因为您实际上是在问非常高层次的问题，这些问题需要了解您的安装需求以及在创建安装程序的艺术方面的大量培训。

就我个人而言，我的安装程序是 100% WiX、100% InstallShield（限量版和首映版）以及两者的混合。

限量版是有限的，但它也做了一些非常好的事情，并提供了一些实际上并不存在和/或易于在 WiX 中实现的功能。

一个好的策略是将 InstallShield LE 用作一个简单的容器，然后在 WiX 中进行大部分创作。我在我的博客中描述了这种模式：

[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

InstallShield Professional 及更高版本有一个用于迁移 VDPROJ 项目的工具，但我会谨慎使用它。大多数 VDPROJ 安装程序都有一些糟糕的创作，最好重构而不是迁移。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-18T23:15:45.683

我强烈建议查看 Wix#。请参阅[http://www.codeproject.com/Articles/31407/Wix-WixSharp-managed-interface-for-WiX](http://www.codeproject.com/Articles/31407/Wix-WixSharp-managed-interface-for-WiX)。
另请参阅 CodePlex 主页：[http ://wixsharp.codeplex.com/](http://wixsharp.codeplex.com/)

对于主要使用 C#、Wix# 编码的开发人员来说，这可能是最简单、最舒适的技能组合，而且它是免费的，并且直接集成到 Visual Studio 环境中。我在 Visual Studio 2012 和 2013 中使用它取得了巨大的成功。

对于需要创建 Windows Installer MSI 来部署他们的应用程序的 C# 开发人员，Wix# 可能是 Microsoft 从 VS2012 开始从 Visual Studio 中删除的“打包和部署”项目类型的最佳替代品。Wix 是 WiX (Windows Installer Xml) 工具集的 C# 前端。使用 Wix# 允许以 C# 语言构建完整的 Windows Installer MSI。

Wix# 对于广泛的安装/部署场景很有用，并且非常适合持续集成场景。有用于部署 Windows 桌面应用程序、安装 Windows 服务和安装 ASP.NET 网站以及更多类型的安装的 Wix# 示例。

Wix# 处理典型的安装程序要求，简单项目的 Wix# 安装程序代码确实很简单。对于更复杂且需要高级功能的应用程序安装，Wix# 可以在需要时利用完整 WiX 工具集的强大功能。例如，在安装 .NET 应用程序时，典型的要求是安装应用程序 exe 和 dll 文件，并在目标系统上定制一些 .NET 配置文件和/或注册表项。

下面是一个简单的 Wix# 安装程序的 C# 代码示例，该安装程序在目标系统上安装应用程序并修改一些配置文件。此示例假定您已经编写了一个名为“TailorMyConfig.exe”的实用程序，例如，一个使用 ConfigurationManager.AppSettings 例程的简单 C# 程序，并且您正在将该 exe 与您的应用程序一起部署。

```
using System;
using System.Windows.Forms;
using System.Diagnostics;
using Microsoft.Deployment.WindowsInstaller;
using WixSharp;

class Script
{
    static public void Main(string[] args)
    {
        var project = new Project("MyProduct",
                          new Dir(@"%ProgramFiles%\My Company\My Product",
                              new File(@"Files\Bin\MyApp.exe"),
                              new File(@"Files\Bin\TailorMyConfig.exe")),
                          new ManagedAction("UpdateConfigFile"));

        project.Id = new Guid("6f330b47-2577-43ad-9095-1861ba25889b");

        Compiler.BuildMsi(project);
    }
}

public class MyCustomAction
{
    [CustomAction]
    public static ActionResult UpdateConfigFile(Session session)
    {
        if (DialogResult.Yes == MessageBox.Show("Config file update ready to run.\n Update config file(s) now?", 
                                                "Config Tailoring Utility",
                                                MessageBoxButtons.YesNo))
        {
            Process.Start("TailorMyConfig.exe", "Run utility to tailor config file to current system");
        }
        return ActionResult.Success;
    }
} 
```

请注意，有一些“更好”的方法可以使用 WiX XML 功能修改配置文件。为简单起见，上面的示例假定使用自定义编写的 C# exe 实用程序来修改配置文件。我建议改用 WiX XML 功能来执行此操作。您可以使用“XML 注入”的 Wix# 技术将几乎所有 WiX XML 功能直接合并到您的 Wix# 设置中。

请记住，Wix# 只是一个发出 WiX XML 语法的 C# 前端。在 Wix# 发出 WiX XML（wxs 文件）之后，可以轻松地对该 wxs 文件进行后处理以插入其他 WiX XML 功能。然后生成的 wxs 文件由 WiX 工具集编译成 MSI。

有关使用 XML 注入将 WiX XML 功能合并到 Wix# (C#) 安装中的示例，请查看此处[在 Wix# 中，当仅部署注册表项时，如何避免在目标系统上创建物理文件夹？](https://stackoverflow.com/questions/26558933/in-wix-how-to-avoid-creating-a-physical-folder-on-the-target-system-when-depl/26600575#26600575) 在那个问题中，请参阅我的答案，该答案使用将委托连接到“WixSourceGenerated”事件的技术。

然后，您可以使用这种 XML 注入方法将一些 WiX XML 插入到您的安装程序中，从而完成配置文件的编辑。修改配置文件的一些典型 WiX XML 示例如下： [如何在安装期间修改 .NET 配置文件？](https://stackoverflow.com/questions/289773/how-to-modify-net-config-files-during-installation)

安装程序的另一个典型要求是在目标系统上添加或修改 Windows 注册表项。Wix# 使用“RegValue”类提供直接支持。使用 Wix# 的好处是，您还可以免费获得完整的“卸载”功能，包括将注册表项卸载/恢复到预安装状态。这是基于 WiX 工具集和 Windows Installer 技术构建的 Wix# 的自然结果。仅注册表 Wix# 安装程序的示例如下：[在 Wix# 中，仅部署注册表项时，如何避免在目标系统上创建物理文件夹？](https://stackoverflow.com/questions/26558933/in-wix-how-to-avoid-creating-a-physical-folder-on-the-target-system-when-depl/26600575#26600575)

Wix# 方法在我的环境中非常有用，它允许使用熟悉的 C# 技能集，而无需一头扎进 WiX XML 安装程序技术的全部复杂性。

第一个接受的答案提倡这种方法：

> 一个好的策略是将 InstallShield LE 用作一个简单的容器，然后在 WiX 中进行大部分创作。我在我的博客中描述了这种模式：http: [//blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

虽然这是一种很好且可行的方法，但我在这里建议的方法具有以下优点：

使用 Wix# PLUS WiX 方法的优势

*   无需处理 InstallShield LE 或任何其他专有安装程序产品
*   大多数安装程序都是用 C# 代码编写的，这是一种熟悉的技能
*   无需预先学习完整的 WiX 工具集环境；您可以从 C# 代码开始，然后根据需要使用 XML 注入添加高级 WiX 功能。
*   该方法在持续集成环境中运行良好，所有组件都适合安装在构建服务器上的 XCopy-deploy，并且所有组件都非常适合通过脚本实现自动化，例如 Powershell 脚本。
*   如果 Microsoft 再次更改与 Visual Studio 捆绑的安装程序工具的路线，您将不会受到影响。

IS LE + WIX 的共同点

*   建立在 WiX 工具集功能之上，因此 WiX XML 的所有功能都可以合并到安装程序中
*   在 SO 和其他地方提供了许多针对部署问题的 WiX 解决方案的优秀“操作指南”
*   生成真正的 MSI Windows 安装程序，具有卸载功能和该技术的所有强大功能。
*   在创建安装程序时，您需要了解有关 WiX 和 Windows Installer 技术的更多信息。高级功能通常需要放入 WiX XML。
*   两者都或多或少地无缝集成到 Visual Studio 环境中。（如果有的话，Wix# 方法会有一点优势）

因此，虽然另一种方法是可行的解决方案，但我建议将 Wix# + WiX 工具集作为 VS2012、VS2013、VS201x 的最小恶化路径。或许最大的优势在于，无论微软的营销经理为包含或从中提取部署技术做了什么幕后交易，您都不必*再次*更改底层部署技术和方法，从而*再次*被 Microsoft 蒙蔽双眼。视觉工作室。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T09:38:55.013

对于免费工具，WiX 是您的最佳选择。如果您也对商业工具感兴趣，[Advanced Installer](http://www.advancedinstaller.com)可以帮助您更快地创建/转换项目，而无需任何脚本。它还具有用于导入 VDPROJ 的预定义项目模板。您需要企业许可证，因为您需要访问其*对话框编辑器*和*SQL 脚本*功能。但是您可以在试用期内测试所有这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T06:21:21.620

如果你想移动到其他安装系统 - NSIS 或 Inno Setup 试试这个 Visual Studio 扩展：http: [//visualstudiogallery.msdn.microsoft.com/5e57fe9a-ae5d-4740-a1c3-7a8e278e105b](http://visualstudiogallery.msdn.microsoft.com/5e57fe9a-ae5d-4740-a1c3-7a8e278e105b)*

# objective-c - 为什么多线程在这个实现中不起作用？

> ID：12075947
> 
> 赞同：0
> 
> 时间：2012-08-22T14:58:25.773
> 
> 标签：objective-c, ios, multithreading

Q1：我可以调用一个方法并让它从另一个当前正在主线程上执行的方法内部在后台线程上执行吗？

Q2：作为上述的扩展，我可以调用一个方法并让它从另一个当前正在其他后台线程本身上执行的方法内部在后台线程上执行吗？

Q3：最后一个问题是：如果我在某个线程（主/后台）上初始化某个对象 X 的一个实例，然后在某个其他后台线程上执行该对象 X 的方法 Y，这个方法 Y 可以吗？发送消息并更新一个`int property`（例如那个对象 X，或者这样的通信是不可能的？

我问最后一个问题的原因是因为我一遍又一遍地重复它，我不知道这里出了什么问题：

以下代码返回零加速度和零度值：

运动处理器.m

```
@implementation MotionHandler

@synthesize currentAccelerationOnYaxis; // this is a double

-(void)startCompassUpdates
{
    locationManager=[[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate=self;
    [locationManager startUpdatingHeading];
    NSLog(@"compass updates initialized");
}

-(int) currentDegrees
{
    return (int)locationManager.heading.magneticHeading;
}
-(void) startAccelerationUpdates
{
    CMMotionManager *motionManager = [[CMMotionManager alloc] init];
    motionManager.deviceMotionUpdateInterval = 0.01;
    [motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue currentQueue]
                                       withHandler:^(CMDeviceMotion *motion, NSError *error)
                                       {
                                           self.currentAccelerationOnYaxis = motion.userAcceleration.y;
                                       }
    ];
}

@end 
```

测试者.m

```
@implementation Tester

-(void)test
{
    MotionHandler *currentMotionHandler = [[MotionHandler alloc] init];

    [currentMotionHandler performSelectorInBackground:@selector(startCompassUpdates) withObject:nil];

    [currentMotionHandler performSelectorInBackground:@selector(startAccelerationUpdates) withObject:nil];

    while(1==1)
    {
        NSLog(@"current acceleration is %f", currentMotionHandler.currentAccelerationOnYaxis);
        NSLog(@"current degrees are %i", [currentMotionHandler currentDegrees]);
    } 
```

SomeViewController.m

```
@implementation SomeViewController
-(void) viewDidLoad
{
    [myTester performSelectorInBackground:@selector(test) withObject:nil];
}
@end 
```

**但是**，以下代码通常会返回这些值：

测试者.m

```
@interface Tester()
{
    CLLocationManager *locationManager;
    double accelerationOnYaxis;
    // more code..
}
@end

@implementation Tester

- (id) init
{
    locationManager=[[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate=self;
    [locationManager startUpdatingHeading];

    // more code..
}

-(void) test
{
    CMMotionManager *motionManager = [[CMMotionManager alloc] init];
    motionManager.deviceMotionUpdateInterval = 0.01;
    [motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue]
                                       withHandler:^(CMDeviceMotion *motion, NSError *error)
     {
         accelerationOnYaxis = motion.userAcceleration.y;
     }
     ];

     while(1==1)
    {
        NSLog(@"current acceleration is %f", accelerationOnYaxis);
        NSLog(@"current degrees are %i", locationManager.heading.magneticHeading);
    }
} 
```

SomeViewController.m

```
@implementation SomeViewController

-(void) viewDidLoad
{
    [myTester performSelectorInBackground:@selector(test) withObject:nil];
} 
```

第一个版本有什么问题？我真的很想使用第一个，因为它在设计方面似乎要好得多。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:13:33.340

您应该查看[来自 Apple 的 Grand Central Dispatch 文档](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。它允许您在基于块的结构中使用多个线程。

2 个重要功能是`dispatch_sync()`和`dispatch_async()`。

一些例子：

在后台线程上执行某个代码块并等待它完成：

```
__block id someVariable = nil;
dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    // do some heavy work in the background

    someVariable = [[NSObject alloc] init];
});

NSLog(@"Variable: %@", someVariable); 
```

此函数修改变量 someVariable，您可以稍后使用。请注意，主线程将暂停以等待后台线程。如果这不是你想要的，你可以使用`dispatch_async()`如下：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    // do some heavy work in the background

    NSObject *someVariable = [[NSObject alloc] init];

    // notify main thread that the work is done
    dispatch_async(dispatch_get_main_queue(), ^{
        // call some function and pass someVariable to it, it will be called on the main thread
        NSLog(@"Variable: %@", someVariable);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:06:34.223

调用与以当前对象、选择器和参数对象为参数`performSelectorInBackground:withObject:`调用的`detachNewThreadSelector:toTarget:withObject:`方法相同[（线程编程指南）](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW19)。无论您在哪里调用它，都会创建一个新线程来执行该选择器。所以回答你的前两个问题：是的，是的。`NSThread`

对于您的最后一个问题，只要此 Object X 在两种方法中都是同一个对象，就可以更新 X 的任何属性。但是，请注意这可能会产生意想不到的结果（即参见[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ConcurrencyandApplicationDesign/ConcurrencyandApplicationDesign.html#//apple_ref/doc/uid/TP40008091-CH100-SW1)）。如果多个方法正在更新 X 的属性，则可以覆盖或忽略值。但是，如果您只是从方法 Y 更新它并从所有其他方法读取它，则不应出现此类问题。

# ios - 如何向 UINavigationBar 添加按钮

> ID：12075953
> 
> 赞同：2
> 
> 时间：2012-08-22T14:58:37.723
> 
> 标签：ios, uinavigationcontroller, uibarbuttonitem

我需要这样的东西 [http://anishusite.appspot.com/hbimgs/Bills220.png](http://anishusite.appspot.com/hbimgs/Bills220.png)

能够从导航栏中更改日期...这是如何完成的？我尝试添加一个带有数千个按钮的工具栏和一个带有日期标签的视图，但效果不佳

[http://osmorphis.blogspot.ro/2009/05/multiple-buttons-on-navigation-bar.html](http://osmorphis.blogspot.ro/2009/05/multiple-buttons-on-navigation-bar.html)

这是代码：

```
 //first create the view 
UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(0, 6, 157, 33)];
[titleView setBackgroundColor:[UIColor clearColor]];

//add the buttons to the view
UIButton *prevButton = [UIButton buttonWithType:UIButtonTypeCustom];
[prevButton setFrame:CGRectMake(0, 1, 32, 32)];
[prevButton setBackgroundImage:[UIImage imageNamed:@"36-circle-west"] forState:UIControlStateNormal];
[prevButton addTarget:self action:@selector(prevMonth) forControlEvents:UIControlEventTouchUpInside];
[titleView addSubview:prevButton];

UIButton *nextButton = [UIButton buttonWithType:UIButtonTypeCustom];
[nextButton setFrame:CGRectMake(145, 1, 32, 32)];
[nextButton setBackgroundImage:[UIImage imageNamed:@"20-circle-east"] forState:UIControlStateNormal];
[nextButton addTarget:self action:@selector(nextMonth) forControlEvents:UIControlEventTouchUpInside];
[titleView addSubview:nextButton];

[self.dateLabel setFrame:CGRectMake(33, 1, 90, 33)];
[self.dateLabel setBackgroundColor:[UIColor clearColor]];
[self.dateLabel setTextAlignment:UITextAlignmentCenter];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterNoStyle];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
[dateFormatter setDateFormat:@"MMMM,YYYY"];
NSString *dateString = [dateFormatter stringFromDate:self.beginDate];
NSLog(@"the title date string: %@",dateString);

[self.dateLabel setText:dateString];
[self.dateLabel setTextColor:[UIColor whiteColor]];
[self.dateLabel setBackgroundColor:[UIColor clearColor]];
[self.dateLabel setFont:[UIFont fontWithName:@"System" size:17.0]];

//create the toolbar itself

UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 240, 44)];
[toolbar setBackgroundColor:[UIColor clearColor]];

NSMutableArray *items  = [NSMutableArray arrayWithCapacity:3];

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addTransaction)];
addButton.style = UIBarButtonItemStyleBordered;

UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

UIBarButtonItem *theView = [[UIBarButtonItem alloc] initWithCustomView:titleView];

[items addObject:theView];
[items addObject:spacer];
[items addObject:addButton];

[toolbar setItems:items animated:NO];

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:toolbar]; 
```

[http://www.shareimages.com/image.php?61601-qpyWmpSfk5.kmpyWmak-screen.png](http://www.shareimages.com/image.php?61601-qpyWmpSfk5.kmpyWmak-screen.png)

如您所见，它看起来并不好。标签未显示...这些按钮似乎只有在上半部分点击时才起作用。（当被点击时，这些方法被称为 ok ）......有什么想法吗？顺便说一句，导航栏有一个背景图片，但是工具栏把它盖住了..为什么？我用清晰的彩色背景制作了工具栏....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:05:22.320

UINavigationItem 有一个 titleView 属性。您可以将其设置为您创建的任何视图。因此，创建一个具有透明背景的 UIToolbar 子类，向其中添加按钮和文本标签，然后：

```
self.navigationItem.titleView = myCustomView; 
```

其中 myCustomView 是包含箭头按钮和标签的视图。此视图可能是 UIToolbar 子类，请阅读[不能 UIToolBar 是透明的吗？](https://stackoverflow.com/questions/2468831/couldnt-uitoolbar-be-transparent)有关创建透明 UIToolbar 子类的技巧，然后添加您的按钮：

flex spacer，左箭头，带有堆叠 UILabel 的自定义视图，右箭头，flex spacer

# entity-framework - 实体框架通过外键查找实体

> ID：12075957
> 
> 赞同：0
> 
> 时间：2012-08-22T14:58:49.313
> 
> 标签：entity-framework, ef-code-first, poco

我假设这是大多数人的面包和黄油..

我有 Roles、Permissions 和 RolePermissions 实体来建模多对多关系。

```
public class RolePermission
{
    [Key]
    public int ID { get; set; }

    //[Key, ForeignKey("Role"), Column(Order = 0)]
    public int RoleID { get; set; }

    //[Key, ForeignKey("Permission"), Column(Order = 1)]
    public int PermissionID { get; set; }

    //Navigational Properties
    public virtual Role role { get; set; }
    public virtual Permission permission { get; set; }
} 
```

我有一个 ActionResult 可以根据传入的 RoleID 和 PermissionId 删除给定的 RolePermission。

```
public ActionResult Remove(int Roleid, int Permissionid)
{
  RolePermission rolepermission = db.RolePermissions
    .Include(p => p.PermissionID == Permissionid)
    .SingleOrDefault(p => p.RoleID == Roleid);

  db.RolePermissions.Remove(rolepermission);
  db.SaveChanges();
  return RedirectToAction("Index");  
} 
```

上面的 RolePermission rolepermission.. 语句失败

```
The Include path expression must refer to a navigation property defined on the type. Use dotted paths for reference navigation properties and the Select operator for collection navigation properties.
Parameter name: path 
```

..我并不感到惊讶，因为它一开始就有一股代码味道。

我所追求的是相当于

```
Delete from RolePermission
Where RoleID = roleid
AND PermissionID = permissionid 
```

有什么指导吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:05:59.537

由于您将`RolePermission`公开作为一个实体（这对于多对多关系来说有点不寻常），您应该能够只查询连接表中的记录并将其删除：

```
public ActionResult Remove(int Roleid, int Permissionid)
{
    RolePermission rolepermission = db.RolePermissions
        .SingleOrDefault(rp => rp.RoleID == Roleid
                            && rp.PermissionID == Permissionid);

    if (rolepermission != null)
    {
        db.RolePermissions.Remove(rolepermission);
        db.SaveChanges();
    }
    return RedirectToAction("Index");  
} 
```

# jquery - 日历的 jQuery UI 最小/最大日期差异

> ID：12075967
> 
> 赞同：1
> 
> 时间：2012-08-22T14:59:10.297
> 
> 标签：jquery, date, user-interface, calendar

我正在使用一个插件，它在预订表单上使用 jquery UI 作为其日历，并希望显示警报，并且如果第二个日期小于第一个日期的 7 天，或者如果从第一次约会开始超过 30 天。

所以`[01.01.2012] + [02.01.2012]`行不通

但是 `[01.01.2012] + [15.01.2012]`会起作用，知道如何通过jquery实现这一点吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:29:10.153

您可以使用 javascipt 日期对象来做到这一点。假设 Date1 您的第一个日期对象和 Date2 第二个。

```
var dateMin = new Date(Date.parse(Date1)); //you may not need to parse. 
var dateMax = new Date(Date.parse(Date1)); //new Date(Date1) may work. Not sure

dateMin.setDate(Date1.getDate() + 7);
dateMax.setDate(Date1.getDate() + 15);

if (Date2 < dateMax && Date2 > dateMin) {
    //code
} else {
    //alert
} 
```

你也可以对月、年、小时等做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:35:54.537

[**jsFiddle 演示**](http://jsfiddle.net/JmYCN/)

基本上这里的要点是您需要`Date.parse()`两个日期（将它们带入毫秒）然后将这些毫秒除以 / 1000（以获取秒数）/ 60（以获取分钟数）/ 1440（以获取天数）。

然后测试看看它是否超过 7 并且繁荣你都准备好了！

```
$('#submit').on('click', function () {
    var toDate = Date.parse($('#toDate').val()),
        fromDate = Date.parse($('#fromDate').val()),
        difference = toDate - fromDate;

    var days = difference / 1000 / 60 / 1440;

    if ( days < 7 ) {
        alert('Please give at least 7 days between the dates!');
        return false; // stop from submitting        
    }

    // VALID
    else {
        alert('success!');
    }
});​ 
```

# ruby-on-rails-3 - 使用 Thin 强制 SSL

> ID：12075973
> 
> 赞同：2
> 
> 时间：2012-08-22T14:59:17.743
> 
> 标签：ruby-on-rails-3, ssl, thin

我最近在我们的服务器上安装了 Thin。现在我的客户要求我在整个应用程序上实施 SSL。所以我在网上搜索了实现 SSL 的指南。我找到[了这个](https://stackoverflow.com/questions/7125663/rack-ssl-not-working-with-thin)，这似乎很容易。我得到了证书和密钥，然后如图所示启动了服务器。服务器启动时没有任何问题，但是当有人尝试连接时，我收到以下错误消息：

> 在抛出“std::runtime_error”的实例后调用终止 what()：此事件机器上的加密不可用已中止

服务器停止，浏览器显示“连接重置”页面。我环顾四周，有人说这与未安装 libssl 有关，所以我查看了 /usr - 文件夹，她就在那里。

然后我搜索了其他解决方案，但遗憾的是，它们中的大多数似乎都需要 Apache 或 Nginx，这不是一个选项。

任何想法如何让 Thin 与 SSL 一起工作？

系统的更多信息：

VHost Debian 6 x64 Rails 3.2.8 Ruby 1.8.7 Thin 1.4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:09:54.057

好的，我通过更新解决了这个问题。我请求我们的管理员安装 RVM，最后他允许我这样做，但问题是：

通过阅读 Ruby 1.8.7 以来的补丁说明，我注意到了一些事情。Ruby 似乎存在一些 SSL 问题，这些问题已在 Ruby 1.9.x 中得到修复。现在我用 Rails 3.2.8 运行 Ruby 1.9.3，一切正常！

# jquery - ajaxFileUpload 在 Chrome 中停止工作

> ID：12075977
> 
> 赞同：1
> 
> 时间：2012-08-22T14:59:36.427
> 
> 标签：jquery, google-chrome

我们已经在我们的项目中实现了 ajaxFileUpload jQuery 插件，并且一直工作到昨天，当它在 Chrome（版本 21.0.1180.79 m）中停止工作时。但是它确实适用于 FF 和 IE 浏览器。没有代码被修改。这是代码片段：

```
$.ajaxFileUpload({
            url: 'AjaxFileUploader.ashx',
            secureuri: false,
            fileElementId: 'upfile',
            dataType: 'json',
            data: { name: 'logan', id: 'id' },
            success: function (data, status) {
                PreviewImage(data);
            },
            error: function (data, status, e) {
            }
        }); 
```

我尝试通过 Chrome 开发者工具运行它以查看是否可以看到任何异常，但没有成功。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:23:24.733

转到工具 -> 扩展并禁用任何奇怪的扩展。这为我修好了。

一个扩展将 HTML 插入 AjaxFileUpload 用于返回 json 的背景 iframe。由于此元素的 HTML 破坏了 json 响应，因此 eval 失败。

在 Chrome 更新之前，一切都运行良好，所以大概关于此更新的某些内容改变了扩展程序的行为。不酷。

# excel - 无法在 AppHarbor 上使用 Excel dll

> ID：12075978
> 
> 赞同：0
> 
> 时间：2012-08-22T14:59:37.240
> 
> 标签：excel, appharbor

我在将 excel 文件上传到 AppHarbor 然后打开它时遇到问题，即使它在本地运行良好。我正在将文件上传到 App_Data 并将 AppHarbor 设置设置为写入文件目录。该文件实际上已上传好（我认为），但是当我尝试使用 Excel dll 时：

```
var excel = new Application(); 
```

它会生成此错误：

> System.Runtime.InteropServices.COMException (0x80040154)：检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154（REGDB_E_CLASSNOTREG） ））。在 System.RuntimeTypeHandle.CreateInstance（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandleInternal& ctor，Boolean& bNeedSecurityCheck）

我在我的项目中有对 Microsoft.Office.Interop.Excel 的引用，甚至尝试在本地复制它并在那里引用它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:07:57.190

Interop 库仅用作 Excel 应用程序的接口，必须安装在运行代码的任何位置。似乎它在 AppHarbor 上不可用。

# java - 尝试，捕捉，最后执行

> ID：12075984
> 
> 赞同：4
> 
> 时间：2012-08-22T14:59:45.540
> 
> 标签：java, try-catch, try-finally

> **可能重复：**
> [在 finally 块中抛出异常](https://stackoverflow.com/questions/481446/throws-exception-in-finally-blocks)

*   只有在 try 块中抛出异常时才会执行 catch 块。

*   finally 块总是在 try(-catch) 块之后执行，无论是否抛出异常。

我的问题是**如果**我在 finally 块中遇到异常而不是如何处理它？？？？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T15:02:25.333

这是 Java 语言规范中众所周知的问题/陷阱，从某种意义上说，如果在 finally 子句中抛出异常（没有在嵌套的 try-catch 中处理它），原始异常就会丢失。您将需要嵌套一个新的 try-catch 来捕获新的异常，并在那里处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T15:04:46.807

您必须**在 finally 块中处理异常**

喜欢

```
finally{
    try
    {
       ///
    }
    catch(Exception e)
    {
      ///  
    }
} 
```

# javascript - 如何在javascript中使用循环将函数增加1

> ID：12075987
> 
> 赞同：0
> 
> 时间：2012-08-22T14:59:55.567
> 
> 标签：javascript

我想运行一个循环，自动将函数名称增加 1。为了更容易理解：

我目前的代码：

```
 for(var i = 1; i <= 2; i++) {
                var fn = 'this.getExterior',
                    el = (fn + i + '()').getInnerItems();
} 
```

我想增加函数名称并检索类似 this.getExterior1、this.getExterior2 的内容。上面的代码给了我一个对象而不是一个函数。有人可以给我一个解决方案如何实现它。非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:02:16.987

您不能真正将字符串用作代码（`eval`可以，但在这里没有必要）。您可以使用以下`[]`语法：

```
el = this["getExterior" + i]().getInnerItems(); 
```

（另外，`function`is 是一个关键字；您不能将其用作变量名。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:02:07.223

这将是 ：

```
var el = this['getExterior'+i]().getInnerItems(); 
```

在 javascript 中，任何属性或对象都可以通过这种方式访问

`object.property`是相同的`object['property']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:02:28.890

类似于以下内容：

```
var i, fn;

for (i = 1; i <= 2; ++i) {
  fn = 'getExterior' + i;
  el = this[fn]().getInnerItems();
} 
```

# ruby - 从 Jenkins 解析 JSON，一次哈希，然后为零

> ID：12075988
> 
> 赞同：1
> 
> 时间：2012-08-22T14:59:56.620
> 
> 标签：ruby, json, jenkins, httparty

Jenkins 给了我来自[http://jenkins.net/jobs/MyJob/lastBuild/api/json的 JSON](http://jenkins.net/jobs/MyJob/lastBuild/api/json)

然后我使用 HTTParty 来获得它：

```
response = self.get( url, options )
change = response['changeSet']['items'][0] 
```

这给了我最后更改的内容。change.class 返回“哈希”。如果我试试这个：

```
change = response['changeSet']['items'][0]['revision'] 
```

正如查看 JSON 所暗示的那样，我得到“NilObject 上的未定义方法'[]'”。

我究竟做错了什么？

编辑3：

当然，问题出在用户和键盘之间。该方法首先在另一个 JSON 上调用，因为它正在轮询多个项目的更改，并且其中一个返回的 JSON 对象不包含这些键。哦！对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:40:54.300

如果您遇到这种错误，您将按下一个空键，然后尝试使用它，就好像它已被填充一样。没有看到你的 JSON 是什么，很难说，但其中之一是失败的。您需要检查这些：

```
response['changeSet']
response['changeSet']['items']
response['changeSet']['items'][0] 
```

如果其中任何一个最终出现，`nil`那么您可以查明问题所在。JSON 以任意结构返回，因此将一堆调用链接在一起而不进行任何类型的测试可能会导致麻烦。

# c# - 单例反模式

> ID：12075993
> 
> 赞同：0
> 
> 时间：2012-08-22T15:00:14.280
> 
> 标签：c#, java, design-patterns

> **可能的重复：**
> [单身人士有什么不好的？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)
> [单例设计模式：陷阱](https://stackoverflow.com/questions/1448393/singleton-design-pattern-pitfalls)

我听到很多这样的消息，但找不到确切的理由。

```
Avoid the singleton anti-pattern and replace it with DI. 
```

但为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:02:09.397

有状态的单例更难进行单元测试。

我使用我认为没有问题的无状态单例。

由于单例可以实现接口，因此可以使用依赖注入来传递它们（并且应该尽可能地传递）

# c# - 寻找在 WPF 中显示数据行的最简单方法

> ID：12075994
> 
> 赞同：2
> 
> 时间：2012-08-22T15:00:16.193
> 
> 标签：c#, .net, wpf, windows

我很少使用 WPF，所以我正在寻找最简单最直接的方法来完成这项任务。

基本上我有一个字典，其中键是一些标识符，值是描述。我希望显示描述的网格/列表视图，目的是通过未显示的标识符添加/删除行。

如何快速轻松地完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:13:17.113

绑定到字典列表的示例代码。要显示值，请将 Key 替换为 Value。Dictionary 不是一个可观察的集合，因此 UI 不会动态选择插入和删除。

```
<ListView ItemsSource="{Binding Path=GabeLib.DLFTSwordReverse, Mode=OneWay}" DisplayMemberPath="Key" 
                                      VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling" ScrollViewer.IsDeferredScrollingEnabled="True"  
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Visible"/> 
```

如果您设置 Mode=TwoWay，我认为您甚至可以更新值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:23:31.670

你不能那样做。要添加新行，您需要对其进行设置。但是在隐藏键列的情况下，您将无法完成此操作。如果您只需要更新看[这里](https://stackoverflow.com/questions/800130/two-way-data-binding-with-a-dictionary-in-wpf)