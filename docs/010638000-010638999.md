# StackOverflow 问答 10638000-10638999

# php - 上传图片时调整图片大小

> ID：10638004
> 
> 赞同：0
> 
> 时间：2012-05-17T14:46:25.047
> 
> 标签：php, .htaccess, image-processing, imagemagick

我的网站上有一个上传系统，它检测图像是否大于某个尺寸，如果是，则使用以下代码将其调整为该尺寸：

```
<?php
if($count >= "1"){
    echo "<h3>The Name : ".$_POST['textfield']. " already exists. </h3>";
    echo "<h3>Please choose a unique name for this photo</h3>";
}else{  
if (($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg"))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("uploads/images/photography/" . $_FILES["file"]["name"]))
      {
      echo "<h3>".$_FILES["file"]["name"] . " already exists. </h3>";
      }
    else
      {

// Temporary upload image name 
$original_image = $_FILES["file"]["tmp_name"]; 

// Get the image dimensions 
$size=getimagesize( $original_image ); 

if((($size[0])<1600) || (($size[1])<1600)){

$new_image = $_FILES["file"]["name"]; 

move_uploaded_file($_FILES["file"]["tmp_name"], "uploads/images/photography/" . $_FILES["file"]["name"]);

echo "File uploaded<br><br>"; 

echo "<img src=\"watermark.php?path=".$new_image."\" width=\"900\"><br><br>"; 

}else{

// Name to save the image as - in this case the same as the original 
$new_image = $_FILES["file"]["name"]; 

// Maximum image width 
$max_width = "1600"; 

// Maximum image height 
$max_height = "1600"; 

// Resize the image and save 
exec("convert -size {$size[0]}x{$size[1]} $original_image -thumbnail $max_widthx$max_height $new_image"); 

echo "File uploaded<br><br>"; 

echo "<img src=\"watermark.php?path=".$new_image."\" width=\"900\"><br><br>"; 

$copy = copy($new_image, "uploads/images/photography/".$new_image);
$unlink = unlink($new_image);

}

      echo "Stored in: " . "uploads/images/photography/" . $_FILES["file"]["name"];

      $date = date("d/m/y");

      $query  = mysql_query ('INSERT INTO  `ap_photos_list` ( `photo_id` ,  `category_id` ,  `subcategory_id` ,  `photo_name` ,  `photo_size` ,  `upload_date` ,  `filename` ) VALUES ("",  "'.$_REQUEST['category'].'",  "'.$_REQUEST['sub_category'].'",  "'.$_POST['textfield'].'",  "'.($_FILES["file"]["size"] / 1024).'KB",  "'.$date.'",  "'. $_FILES["file"]["name"].'")');

      $sizes = mysql_query("SELECT * FROM ap_sizes ORDER BY id ASC");

      while($row = mysql_fetch_assoc($sizes)){
            $query  = mysql_query ('INSERT INTO  `ap_photos` ( `photo_id` ,  `category_id` ,  `subcategory_id` ,  `photo_name` ,  `photo_size` ,  `upload_date` ,  `filename` , `price` , `size` ) VALUES ("",  "'.$_REQUEST['category'].'",  "'.$_REQUEST['sub_category'].'",  "'.$_POST['textfield'].'",  "'.($_FILES["file"]["size"] / 1024).'KB",  "'.$date.'",  "'. $_FILES["file"]["name"].'" , "'.$row['price'].'" , \''.$row['size'].'\')');
      }
      }
    }
  }
else
  {
  echo "<h3>Invalid file</h3>";
  }
}
?> 
```

但是，会出现以下错误或问题之一：

*   我收到以下错误：

    1.  `Warning: copy(DSC00103.JPG) [function.copy]: failed to open stream: No such file or directory in /homepages/19/d372249701/htdocs/ap-photo/admin/new_photo.php on line 220`
    2.  `Warning: unlink(DSC00103.JPG) [function.unlink]: No such file or directory in /homepages/19/d372249701/htdocs/ap-photo/admin/new_photo.php on line 221`
*   或者它只是不传输图像

这两个结果都表明我上传的图像不存在？！？

任何解决方案的建议将不胜感激。

**更新 1**

我出于版权目的保护文件的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} $
RewriteRule \.(gif|jpg|png|JPG)$ - [L,F]
ErrorDocument 403 /admin/uploads/error-docs/403.shtml 
```

**更新 2**

我浏览了代码并确定问题出在：

*   `exec("convert -size {$size[0]}x{$size[1]} $original_image -thumbnail $max_widthx$max_height $new_image");`

和

*   `$copy = copy($new_image, "/homepages/19/d372249701/htdocs/ap-photo/admin/uploads/images/photography/".$new_image); $unlink = unlink($new_image);`

我怀疑是回声。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:38:21.710

有几件事要检查：

*   您尝试保存的目录是否可写？（上传/图片/摄影）
*   图像是否比您的 PHP 设置允许的更大？（通常在 php.ini 中，upload_max_filesize）

编辑

您需要“复制”脚本中上传位置的绝对路径，该路径*应*以类似的内容开头

```
/homepages/19/d372249701/htdocs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:39:26.617

似乎您的 upload_max_filesize 设置为默认的 2MB。请使用以下内容设置 .htaccess：

```
php_value upload_max_filesize    110M
php_value post_max_size          120M 
```

有关更多信息，请参阅[此处](http://php.net/manual/en/features.file-upload.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:25:57.110

我会尝试：

1/ 在上传过程中显示任何带有 php 错误的错误：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

2/ 在不同阶段用 echo 显示变量以查看它们包含的内容。

例如

```
$original_image = $_FILES["file"]["tmp_name"];
echo "original image = $original_image<br>"; 
```

3/ 隔离代码的各个部分并检查每个步骤是否有效。

编辑答案：

老实说，我没有阅读 Imagemagick 代码！

```
-size {$size[0]}x{$size[1]} is not required 
```

我这样编写代码，这样可以更轻松地检查 Imagemagick 代码，因为您可以添加回显以显示 $cmd 的内容

```
$cmd = "$original_image -thumbnail $max_widthx$max_height ";
exec(" convert $cmd $new_image"); 
```

Imagemagick 不适用于错误检查，但您可以添加以下内容：

```
$array=array(); 
echo "<pre>"; 
$cmd = "$original_image -thumbnail $max_widthx$max_height ";
exec(" convert $cmd $new_image 2>&1", $array);  
echo "<br>".print_r($array)."<br></pre>"; 
```

$new_image 只需要是带有图像名称的保存位置的相对路径。

# asp.net - 如果按下选项卡按钮，它会从左到右在控件中移动。有没有办法强制推动标签按钮的移动？

> ID：10638008
> 
> 赞同：0
> 
> 时间：2012-05-17T14:46:35.883
> 
> 标签：asp.net, webforms

我有一个带有控件（例如文本框）的表格。如果我点击选项卡按钮，我希望它移动到下一个控件。我在带有文本框的表格中有 3 列。如果我点击选项卡按钮，它会移动到右侧的下一个控件。

有没有办法设置它垂直向下穿过第一列，然后垂直向下穿过下一列，最后到达最后一列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:51:07.733

您可以设置表单控件的 tabindex 属性来设置它们的选项卡顺序。

[这是一个简单的 JSFiddle 示例](http://jsfiddle.net/NcZfE/)

```
<div id='left'>
    <input type='text' tabindex=1 /><br>
    <input type='text' tabindex=2 />
</div>

<div id='right'>
    <input type='text' tabindex=3 /><br>
    <input type='text' tabindex=4 />
</div>

<div style='clear:left'></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:51:11.410

您可以使用ASP 控件上的**TabIndex属性进行设置。**如果您想在不是 ASP 控件的东西上执行此操作，您还可以尝试使用[jQuery tabIndex 插件之类的东西。](http://fluidproject.org/blog/2008/01/11/jquery-tabindex-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:51:28.607

如何利用`TabIndex`财产？

这里有一些关于这个主题的阅读： [ASP.NET Web 服务器控件中的 Tab 键顺序、焦点和访问键](http://msdn.microsoft.com/en-us/library/ms178231.aspx)

# php - JS中变量传递的问题，视频幻灯片

> ID：10638011
> 
> 赞同：0
> 
> 时间：2012-05-17T14:46:40.837
> 
> 标签：php, javascript, html, flowplayer

我正在尝试在用户现在发布视频之前为我的视频获取一个预览系统，为此我需要能够从数据库中检索多个文件并相应地创建视频。我有一个按钮

```
<a class="btnGray clickable floatRight" style="position:relative;" onclick="startVideo('<?=$content[ReleaseSystem::contentID]?>','<?=$video['filename']?>');"><?=$lang[109]?></a> 
```

此按钮链接到以下功能

```
function startVideo(id,link) {
    $("#"+id).fadeIn("slow", function() {
        $f("player", {src: "players/nobranding.swf", wmode: 'opaque'},
            {
                clip: { autoPlay: true },
                playlist: ['videos/IMPORTS/'+link,],
                plugins: { controls: { playlist: true }}
            }
        ).ipad();
    });
} 
```

现在奇怪的是，当我不通过按钮上的链接时，视频播放器会加载，但是当我尝试向它发送链接时，整个功能就会崩溃。我不确定为什么会这样。

这也是我的播放器html代码

```
<div id="videoFlyout<?=$content[ReleaseSystem::contentID]?>" class="popUpWrapper" style="display:none;position:absolute;top:10px;left:auto;">
    <div class="firstPopupDiv" style="left:center;height:425px;width:620px;">
        <div class="popupDivInner" style="display:block;" class="hideSteps">
            <div id="<?=$content[ReleaseSystem::contentID]?>">
                <center><a id="player" style="display:block; height:365px; width:620px;"></a></center>
            </div>
            <a class="btnRed clickable floatRight" style="position:relative;" onclick="closeVideo(<?=$content[ReleaseSystem::contentID]?>);"><?=$lang[109]?></a>
            <a class="btnGray clickable floatRight" style="position:relative;" onclick="startVideo('<?=$content[ReleaseSystem::contentID]?>','<?=$video['filename']?>');"><?=$lang[109]?></a>
        </div>
    </div>
</div> 
```

这是我渲染的 HTM

```
<div id="videoFlyout280" class="popUpWrapper" style="position: absolute; top: 10px; left: auto; display: none;">
    <div class="firstPopupDiv" style="left:center;height:425px;width:620px;">
        <div class="popupDivInner" style="display:block;">
            <div id="280" style="">
            <center>
            <a id="player" style="display:block; height:365px; width:620px;">
                <object id="player_api" width="100%" height="100%" type="application/x-shockwave-flash" data="players/nobranding.swf">
                    <param value="true" name="allowfullscreen">
                    <param value="always" name="allowscriptaccess">
                    <param value="high" name="quality">
                    <param value="false" name="cachebusting">
                    <param value="#000000" name="bgcolor">
                    <param value="opaque" name="wmode">
                    <param value="config={"clip":{"autoPlay":true},"playlist":[{"url":"videos/IMPORTS/video_1011_281_1337198589_VID_20120511_00000.3GP","autoPlay":true}],"plugins":{"controls":{"playlist":true}},"playerId":"player"}" name="flashvars">
                </object>
            </a>
            </center>
        </div>
        <a class="btnRed clickable floatRight" onclick="closeVideo(280);" style="position:relative;">Cancel</a>
        <a class="btnGray clickable floatRight" onclick="startVideo('280','video_1011_280_1337183112_testCat.mp4');" style="position:relative;">Cancel</a>
        </div>
    </div>
</div>
<div id="videoFlyout281" class="popUpWrapper" style="position: absolute; top: 10px; left: auto;">
    <div class="firstPopupDiv" style="left:center;height:425px;width:620px;">
        <div class="popupDivInner" style="display:block;">
            <div id="281" style="">
            <center>
                <a id="player" style="display:block; height:365px; width:620px;"> </a>
            </center>
            </div>
            <a class="btnRed clickable floatRight" onclick="closeVideo(281);" style="position:relative;">Cancel</a>
            <a class="btnGray clickable floatRight" onclick="startVideo('281','video_1011_281_1337198589_VID_20120511_00000.3GP');" style="position:relative;">Cancel</a>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:58:44.887

如果没有错误消息和呈现的 HTML，很难准确地判断发生了什么，但突出的一件事是`startVideo(<?=$video['filename']?>);`应该是`startVideo('<?=$video['filename']?>');`，看起来你的意思是传入一个字符串，而你正在传递 JavaScript 解释为`undefined`全局变量的内容。

如果这能很好地解决您的问题！否则张贴上述项目以供进一步调查。

# dynamics-crm - 如何自动打开在工作流中创建的实体

> ID：10638012
> 
> 赞同：1
> 
> 时间：2012-05-17T14:46:48.743
> 
> 标签：dynamics-crm, dynamics-crm-2011

我遇到了需要在工作流程结束时打开新创建的报价单的情况。我有一种感觉，这将需要我创建一个使用“window.open”的非常简单的自定义工作流程，但如果有人有更好的主意，我想避免这种情况。

因此，我需要在工作流中创建新报价后立即打开它。有人对如何做到这一点有任何好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:02:44.720

工作流程是*异步*的；它们在*服务器*上运行（而不是客户端）并且不实时运行。例如，由创建记录触发的工作流将在创建记录*后*的某个时间在服务器上运行（取决于系统负载等 - 它可能是一两秒，也可能是半小时后。如果您已停止服务器上的 CRM Async 服务，它们很可能永远不会运行。）

因为它们在服务器上运行，所以用户与它们没有交互。结果，您无法打开窗口，因为没有用户参与打开窗口...

您可能想要做的是使用**Dialogs**（在 CRM 2011 中引入）。您将无法使用`window.open()`，但只要您在服务器上安装了最近的更新汇总，您就可以向用户提供指向大多数 CRM 记录的超链接。

对话框的设置与工作流非常相似，并且它们在后台使用相同的机制。不同之处在于它们是同步的（即实时运行）并且它们是客户端的。Technet 上有一些详细信息：[http ://technet.microsoft.com/en-us/library/gg334463.aspx](http://technet.microsoft.com/en-us/library/gg334463.aspx)

# android - 在 Unity 的 android 插件中访问 java 文件

> ID：10638013
> 
> 赞同：1
> 
> 时间：2012-05-17T14:46:50.570
> 
> 标签：android, plugins, unity3d

我正在使用 android NDK 编写一个插件。现在我已经完成了以下工作： 1- 用 C++ 编写了简单的函数并制作了一个 .so（共享库）。代码如下：

```
#include <jni.h>
 #include <string.h>
#include <android/log.h>

#define DEBUG_TAG "NDK_AndroidNDK1SampleActivity"
extern "C" {

static JavaVM   *gJavaVM;
static JNIEnv *env; 
static jobject  gInterfaceObject, gDataObject;
JNIEXPORT jstring JNICALL Java_com_gvs_tes_NdkTestActivity_getNumbr(JNIEnv * env,jobject obj);
JNIEXPORT void JNICALL Java_com_gvs_tes_NdkTestActivity_getActivity(JNIEnv * env, jobject obj);};

JNIEXPORT jstring JNICALL Java_com_gvs_tes_NdkTestActivity_getNumbr(JNIEnv * env,jobject obj)
{
    jboolean isCopy;
    jstring szLogThis =(jstring) "hellog";
    __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", szLogThis);
    return szLogThis;

}

JNIEXPORT void JNICALL Java_com_gvs_tes_NdkTestActivity_getActivity(JNIEnv * env, jobject obj)
{
    jstring logs =(jstring) "Function Started";
    __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", logs);
    if(env)
    {
        jstring logs =(jstring) "env not null";
        __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", logs);

    }
    jclass interfaceClass = env->FindClass("com/gvs/tes/testClass");
    if(!interfaceClass)
    {
        jstring logThis =(jstring) "Activity Class Could not be get";
        __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", logThis);
        return;

    }
    jmethodID altmethod = env->GetMethodID(interfaceClass, "<init>","()V"); 
    jobject objClas = env->NewGlobalRef(env->NewObject(interfaceClass, altmethod)); 

    jmethodID method = env->GetMethodID(interfaceClass, "chekClas","(I)V");
    if(!method)
    {
        jstring logThis =(jstring) "Function Could not be get";
        __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", logThis);
        return;
    }
    jint val = 3;
    env->CallVoidMethod(objClas, method, val);

    logs =(jstring) "Function Ended";
    __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", logs);

} 
```

2- 我将 .so 文件复制到 [myUnityProject]/Assets/Plugins/Android 文件夹。3-然后我编写了以下脚本来调用函数

```
using UnityEngine;
using System.Collections;
using System.Runtime.InteropServices;

public class myScript : MonoBehaviour {
//[DllImport ("ndktest")]
//private static extern string Java_com_gvs_tes_NdkTestActivity_getNumbr();
[DllImport ("ndktest")]
private static extern void Java_com_gvs_tes_NdkTestActivity_getActivity();
// Use this for initialization
void Start () {
    print("hello start");
    //print ("CHECKING return value :       "+Java_com_gvs_tes_NdkTestActivity_getNumbr().ToString());
    Java_com_gvs_tes_NdkTestActivity_getActivity(); // PROBLEM OCCURS HERE
    print("after Function call inside script");
}

// Update is called once per frame
void Update () {

}
} 
```

现在我的主要问题是“如何访问我的 Android 项目中存在的 Java 文件”。如果我做的愚蠢错误，请指出我正确的方向因为我唯一的目的是能够使用 SDK（在 java 中为 android 构建）在我的 Unity 应用程序中。非常感谢任何帮助。

# javascript - 是否可以为一个 onkeypress 事件设置多个功能

> ID：10638016
> 
> 赞同：0
> 
> 时间：2012-05-17T14:47:03.790
> 
> 标签：javascript

我有这个：

```
signin_input.onkeypress = function()
{
    label.style.opacity = 0;
} 
```

但有时我想运行额外的代码，所以我用这个覆盖它：

```
signin_input.onkeypress = function( event ) 
{
    signin_label.style.opacity = 0; // just add in previous function here
    if( event.keyCode === 13 )
    {
        new ControlType( 'signin' ).invoke();
        return false; 
    }
} 
```

并将旧函数中的一行包含在新函数中。

但是，这有点低效，因为我写了两次 onkeypress。

有没有办法让两者都运行。是否有某种内部 JavaScript 构造允许这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:50:04.763

开始阅读 DOM 事件...设置元素的属性是古老的方式...使用`addEventListener()`或**正常**`removeEventListener()`使用（意味着不是 IE 系列）。或为 IE6使用or （我也想 IE7 ）**`attachEvent()``detachEvent()`**

 **最好的方法...使用一些 js 库，我推荐 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:50:40.070

我知道你正在做这样的事情：

```
signin_input.onkeypress = function1;
signin_input.onkeypress = function2; 
```

你可以这样做：

```
signin_input.onkeypress = function(){
    if (condition1) function1();
    if (condition2) function2();
}; 
```**

# php - 反转 foreach 结果

> ID：10638024
> 
> 赞同：1
> 
> 时间：2012-05-17T14:47:23.177
> 
> 标签：php

我试图在我的 foreach 循环中反转结果，我知道我可以尝试使用 array_reverse 但这不会反转循环的输出。

结果目前看起来像这样

```
[new Date(2012, 05, 16), 630.10, 615.94],
[new Date(2012, 05, 15), 615.00, 603.75],
[new Date(2012, 05, 14), 608.50, 600.58],
[new Date(2012, 05, 11), 614.55, 604.77],
[new Date(2012, 05, 10), 616.19, 610.23], 
```

我想要的输出是

```
[new Date(2012, 05, 10), 616.19, 610.23], 
[new Date(2012, 05, 11), 614.55, 604.77],
[new Date(2012, 05, 14), 608.50, 600.58],
[new Date(2012, 05, 15), 615.00, 603.75],
[new Date(2012, 05, 16), 630.10, 615.94], 
```

这是我的代码。

```
foreach($stockcontentex as $stockexplode){
    $stockex = explode(',',$stockcontentex[$i++]);
    $stockexdate = explode('-', $stockex[0]);
    $stockYear = $stockexdate[0];
    $stockMonth = $stockexdate[1];
    $stockDay = $stockexdate[2];
    $stockHigh = $stockex[2];
    $stockLow = $stockex[3];
    $_str .= '[new Date('.$stockYear.', '.$stockMonth.', '.$stockDay.'), '.$stockHigh.', '.$stockLow.'],'. "\n";

    } 
```

任何帮助表示赞赏，我不确定是否需要任何其他信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:49:20.023

使用`array_reverse`然后交换这个：

```
$stockex = explode(',',$stockcontentex[$i++]); 
```

有了这个：

```
$stockex = explode(',',$stockexplode); 
```

或者，您可以切换`.=`为：

```
 $_str = '[new Date('.$stockYear.', '.$stockMonth.
           ', '.$stockDay.'), '.$stockHigh.', '.$stockLow.'],'. "\n" . $_str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:56:24.557

虽然我个人会接受@cwallenpoole 的回答，但另一种选择是：

```
$stockcount = count($stockcontentex);
for ($i = $stockcount; $i >= 0; $i--) {
    $stockex = explode(',',$stockcontentex[$i++]);
    $stockexdate = explode('-', $stockex[0]);
    $stockYear = $stockexdate[0];
    $stockMonth = $stockexdate[1];
    $stockDay = $stockexdate[2];
    $stockHigh = $stockex[2];
    $stockLow = $stockex[3];
    $_str .= '[new Date('.$stockYear.', '.$stockMonth.', '.$stockDay.'), '.$stockHigh.', '.$stockLow.'],'. "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T14:06:23.003

我创建了这种方法来反转对数组的循环遍历：（
*在本例中为模拟的反向 foreach）*

```
if(!empty($array)) {
    $value = end($array);
    $key = key($array);
    do {

        /**
         * Do your stuff here
         * Could be old code/stuff here that worked with foreach($array as $key => $value)
         */

        $value = prev($array);
        $key = key($array);
    } while($key !== null);
} 
```

**注意：**这有点骇人听闻。但它应该适用于您想要反向遍历的每种（关联）数组。

# ruby-on-rails - Rails 表单没有方法错误

> ID：10638025
> 
> 赞同：0
> 
> 时间：2012-05-17T14:47:31.073
> 
> 标签：ruby-on-rails

我正在尝试将一个简单的表单放在一起，但是每当我将表单字段插入到 html 中时，我都会不断收到 no method 错误。

这里有什么问题？

**错误：**

```
undefined method `name' for #<Upload id: nil, created_at: nil, updated_at: nil> 
```

**新的.html.erb**

```
<h1>Uploads#new</h1>
<p>Find me in app/views/uploads/new.html.erb</p>

<% form_for :upload, :url => uploads_path do |f| %>
<p>
    Name: <%= f.text_field :name %>
</p>
<p><%= submit_tag "Create Upload" %></p>
<% end %> 
```

**上传.rb**

```
class Upload < ActiveRecord::Base
has_many :tasks

end 
```

**uploads_controller.rb**

```
class UploadsController < ApplicationController
def index
@uploads = Upload.find(:all)
end

def new
@upload = Upload.new
end

def create
@upload = Upload.new(params[:project])
if @upload.save
    flash[:notice] = "Film successfully uploaded"
    redirect_to uploads_path
else
    render :action => 'new'
end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:53:55.283

通过查看错误，您的上传模型似乎没有名称属性。如果你添加了这个，也许你忘记了迁移你的数据库？

# asp.net-mvc - asp.net mvc3，我应该把我的代码放在哪一层？

> ID：10638026
> 
> 赞同：1
> 
> 时间：2012-05-17T14:47:36.787
> 
> 标签：asp.net-mvc, asp.net-mvc-3, repository-pattern, service-layer

我正在使用 asp.net mvc3 构建一个应用程序。我在这个项目中添加了两个层，存储库和服务层。我的一些代码，我不确定我应该把它们放在哪一层。

在我的注册页面上，要创建一个帐户，我只要求用户输入他们的电子邮件和密码，它使用 UserRegisterViewModel。在我将它添加到数据库之前，我的用户表需要更多信息。

我需要从 UserRegisterViewModel 创建一个用户实体：

```
user.ip= "1.1.1.1";
user.createddate="11/11/1911";
.... 
```

所以上面的代码，我应该把它们放在哪里？webui、repository 或服务层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:56:52.193

您只能从请求中获取 IP 地址，因此您可以在 Action 中“获取”它

像这样的东西

```
[HttpPost]
public ActionResult Login(UserRegisterViewModel model) {
    if(ModelState.IsValid) {
        SaveLogonToAudit(model.Username);
    }
    return View(model);
}

private void SaveLogonToAudit(string username) {
    var user = new UserAccount(username, Request.Browser.Browser, Request.Browser.Type, Request.UserHostAddress);
    user.Save();
} 
```

User 实体可以存在于另一个层中，您的 UserRegisterViewModel 将存在于 MVC UI 层中。在您的视图中拥有一个代表数据的 ViewModel 和代表您的用户实体的另一层中的一个完全独立的类是完全正常的。这是很好的设计。您的 User 实体可以在 ServiceLayer 中并具有与之关联的业务规则。然后该类将调用您的存储库层以保存其数据。

我同意 Leon Cullens 的观点，CreateDate 应该存在于 User 实体中，这就是为什么你看不到我设置它的原因。用户实体应该处理它自己的调用您的 RepositoryLayer 的 CRUD 操作。在 ctor 中设置 CreateDate 或更好的是，有一个基类，其中包含用户将在内部使用的 CreateDate、CreatedBy、LastUpdateDate、LastUpdatedBy。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:17:47.600

我会在“用户”实体的构造函数中添加“CreatedDate”，并在接收 ViewModel 对象的控制器中添加 IP 地址。

我想你不知道：你可以使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)将 ViewModels 映射到 Entities 。

# android - main.xml 文件不可访问/不可访问

> ID：10638029
> 
> 赞同：2
> 
> 时间：2012-05-17T14:47:50.897
> 
> 标签：android, xml, android-layout

我从 Internet 上下载了一个示例，以了解有关增强现实的更多信息。

当我尝试导入项目时，eclipse找不到任何项目然后，我决定

在我创建的新项目中一一复制所有文件。但是，当我试图修复一些

错误，我无法修复，错误显示：“主要无法解决或不是字段”

这个错误出现在'setContentView(R.layout.main);'周围 尽管如此，在资源文件中

有一个 main.xml 文件，但 Eclipse 找不到它。

有什么建议可以解决此类错误吗？

**日志猫**：

```
05-17 16:56:16.975: E/AndroidRuntime(12497): FATAL EXCEPTION: main 
```

05-17 16:56:16.975：E/AndroidRuntime(12497)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.imrannazar.sobel/com.imrannazar.sobel.Sobel}：android.view.InflateException：二进制XML 文件第 3 行：膨胀类 com.imrannazar.sobel.OverlayView 时出错 05-17 16:56:16.975: E/AndroidRuntime(12497): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.app.ActivityThread .access$1500(ActivityThread.java:117) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 05-17 16:56: 16.975: E/AndroidRuntime(12497): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.os.Looper.loop(Looper.java:130) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在android.app.ActivityThread.main(ActivityThread.java:3691) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-17 16:56 :16.975: E/AndroidRuntime(12497): at java.lang.reflect.Method.invoke(Method.java:507) 05-17 16:56:16.975: E/AndroidRuntime(12497): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 05-17 16:56:16.975: E/AndroidRuntime(12497): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 05 -17 16:56:16.975: E/AndroidRuntime(12497): at dalvik.system.NativeStart.main(Native Method) 05-17 16:56:16.975: E/AndroidRuntime(12497): Caused by: android.view. InflateException：二进制 XML 文件第 3 行：错误膨胀类 com.imrannazar.sobel.OverlayView 05-17 16:56:16.975: E/AndroidRuntime(12497): at android.view.LayoutInflater.createView(LayoutInflater.java:508) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java :623) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:408) 05-17 16:56:16.975: E/AndroidRuntime(12497):在 android.view.LayoutInflater.inflate(LayoutInflater.java:320) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:276) 05-17 16 :56:16.975: E/AndroidRuntime(12497): 在 com.android.internal.policy.impl.PhoneWindow。setContentView(PhoneWindow.java:215) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.app.Activity.setContentView(Activity.java:1663) 05-17 16:56:16.975: E/ AndroidRuntime(12497): 在 com.imrannazar.sobel.Sobel.onCreate(Sobel.java:74) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java :1047) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 05-17 16:56:16.975: E/AndroidRuntime(12497): ... 11 更多 05-17 16:56:16.975: E/AndroidRuntime(12497): 由: java.lang.NoSuchMethodException 05-17 16:56:16.975: E/AndroidRuntime(12497): at java.lang. Class.getDeclaredConstructors(Native Method) 05-17 16:56:16.975: E/AndroidRuntime(12497): at java.lang.Class.getConstructor(Class.java:472) 05-17 16:56:16.975: E/AndroidRuntime(12497): 在 android.view.LayoutInflater.createView(LayoutInflater.java:480) 05-17 16:56:16.975: E/AndroidRuntime(12497): ... 21 更多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:57:34.153

我认为你有一个像这样的进口：

```
import android.R; 
```

删除它，您的问题应该消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:58:38.620

寻找

```
import android.R 
```

删除它，然后清理你的项目，事情应该会重新开始工作

# sql - 如何在层次结构中定位行

> ID：10638030
> 
> 赞同：0
> 
> 时间：2012-05-17T14:47:51.817
> 
> 标签：sql, join, sql-server-2008-r2, hierarchy, hierarchyid

我正在尝试检查特定 ID 是否可以位于层次结构中。

我有一个以分层方式存储的类别列表。例子

```
(0x,       0, 1,  'root'),
(0x58,     1, 2,  'Market Zone'),
(0x5AC0,   2, 3,  'Informática'),
(0x5AD6,   3, 8,  'Accesorios Robótica'),
(0x5ADA,   3, 9,  'Accesorios Eléctricos'),
(0x5ADE,   3, 10, 'Equipos'),
(0x5ADEB0, 4, 12, 'Portátiles'),
(0x5ADED0, 4, 11, 'Accesorios Portátil'),
(0x5ADEF0, 4, 13, 'Máquinas de Oficina'),
(0x5ADF08, 4, 14, 'PC y TPV'),
(0x5ADF18, 4, 15, 'Accesorios PC y TPV'),
(0x5ADF28, 4, 16, 'Servidores'),
(0x5AE1,   3, 17, 'Iluminación'),
(0x5AE3,   3, 18, 'Periféricos - Informática'),
(0x5AE358, 4, 41, 'Cajas Externas') 
```

items 表有一个字段链接到该项目所属的类别。我想要实现的是（按级别）仅列出具有项目的类别“分支”。

我希望这次足够清楚。

谢谢你的帮助。

PS：请原谅我关于西班牙语描述符，但应用程序是西班牙语的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:31:39.453

根据您的示例，以下方法可以解决问题：

```
Select left(category, 3)
 From categoryTree
Where right(category, 2) in ('17', '23') 
```

我会使用 like 或 charindex 使这个更通用，但我在我的 iPhone 上。输入代码很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:21:42.873

尝试：

```
DECLARE @CategoryId INT
SET @CategoryId = 23;

WITH Category_CTE (CategoryId, ParentId, Lvl) AS 
(
    SELECT CategoryId, ParentId, 1 lvl
    FROM Category
    WHERE CategoryId = @CategoryId
UNION ALL
    SELECT c.CategoryId, c.ParentId, Lvl+1 lvl
    FROM Category c
    INNER JOIN Category_CTE cte ON cte.ParentId = c.CategoryId
)
SELECT *
FROM Category_CTE
ORDER BY Lvl DESC 
```

上面的查询将返回结果：

```
CategoryId  ParentId    Lvl
----------- ----------- -----------
0           NULL        4
2           0           3
21          2           2
23          21          1 
```

类别表数据：

```
CategoryId  ParentId    CategoryName
----------- ----------- ------------
0           NULL        Category 1
1           0           Category 2
12          1           Category 3
13          1           Category 4
2           0           NULL
21          2           NULL
23          21          NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:01:18.913

在 Oracle 中，您可以使用`CONNECT_BY_ROOT`运算符仅显示根元素。您可能还需要`DISTINCT`在外部查询中使用。

# entity-framework - T4 关系生成

> ID：10638031
> 
> 赞同：0
> 
> 时间：2012-05-17T14:47:55.373
> 
> 标签：entity-framework, code-generation, t4

假设我有以下表格和关系：

```
CREATE TABLE [dbo].[Customers] (
    [CustomerID] [int] IDENTITY(1,1) NOT NULL,
    [Description] [nvarchar](255) NOT NULL
 CONSTRAINT [PK_Customers] PRIMARY KEY CLUSTERED ([CustomerID] ASC) 

CREATE TABLE [dbo].[Orders](
    [OrderID] [int] IDENTITY(1,1) NOT NULL,
    [CustomerID] [int] NOT NULL,
        ...
 CONSTRAINT [PK_Orders] PRIMARY KEY CLUSTERED ([OrderID] ASC)

ALTER TABLE [dbo].[Orders]  WITH CHECK ADD  CONSTRAINT [FK_Orders_Customers] 
    FOREIGN KEY([CustomerID]) REFERENCES [dbo].[Customers] ([CustomerID]) 
```

我正在使用一些 T4 模板来生成简单的 POCO 类，其中每个数据库列都有一个属性。这很容易，也很有趣。事实上，我拥有的代码能够为每个表生成一个类，如下例所示

```
public class Customer {
    public int CustomerID { get; set; }
    public string Description { get; set; }
} 
```

我现在还想创建映射表（1-N，1-1）之间关系的代码，以便获得例如像这样的类

```
public class Customer {
    public int CustomerID { get; set; }
    public string Description { get; set; }
    public IList<Order> Orders { get; set; }
} 
```

不幸的是，我的代码不起作用。这里是：

```
foreach ( NavigationProperty navProperty in entity.NavigationProperties.Where( p => p.DeclaringType == entity ) ) {
    string elementType = ((EntityType)( (RefType)navProperty.ToEndMember.TypeUsage.EdmType ).ElementType).Name;
    string relationshipName = navProperty.ToEndMember.DeclaringType.FullName;
    string targetRoleName = navProperty.ToEndMember.Name;
    if ( navProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ) {
        <#=Accessibility.ForProperty( navProperty ) #> IList<<#=navProperty.Name#>> <#=navProperty.Name#> { get; set; }
    }
} 
```

不幸的是，这会生成这样的代码：

```
public class Customer {
    public int CustomerID { get; set; }
    public string Description { get; set; }
    public IList<Orders> Orders { get; set; }   // NOTE THE PLURAL IN THE TYPE NAME!!!
} 
```

这是实体集名称而不是实体名称。我必须做些什么来解决这个问题？

**注意**：我将 EF 用于 .NET 3.5 版本。我还包括`EF.Utility.CS.ttinclude`Visual Studio 10 中可用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:47:48.640

找到了解决方案。这是正确的代码：

```
foreach ( NavigationProperty navProperty in entity.NavigationProperties.Where( p => p.DeclaringType == entity ) ) {
    string elementType = ((EntityType)( (RefType)navProperty.ToEndMember.TypeUsage.EdmType ).ElementType).Name;
    if ( navProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ) {
        <#=Accessibility.ForProperty( navProperty ) #> IList<<#= elementType #>> <#=navProperty.Name#> { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:10:27.787

而不是使用

```
navProperty.name 
```

在您的列表声明中

你能用吗

```
navProperty.ToEndMember 
```

通过该属性，我认为您应该能够找到真正的非复数类名

# mfc - 将另一种格式的 DICOM 文件保存到磁盘中的指定位置 - MFC

> ID：10638036
> 
> 赞同：0
> 
> 时间：2012-05-17T14:48:08.243
> 
> 标签：mfc, save, jpeg, dicom

我正在使用**CxImgDCM**，这是一个派生自 CxImage 的类来处理 DICOM 文件。我需要以另一种格式保存 DICOM 图像，如**JPEG**、**TIFF**等。这些函数存在于 CxImgDCM 类中，但我需要使用 CFileDialog 类将其保存在所需位置。我已经获得了文件格式并打开了“另存为”对话框。**在IDOK**条件下我该怎么做才能将我的图像保存在首选位置。代码如下：-

```
if(dlg.m_FileType == 0)
{   
            // Save as JPEG File
    CString strFilter = "*.jpg";
    CFileDialog FileDlg(FALSE, CString("*.jpg"), NULL, OFN_HIDEREADONLY |  OFN_OVERWRITEPROMPT, CString(strFilter));

    if (FileDlg.DoModal() == IDOK)  
    {  
                    // What should I do here? 
                    // There is a Save_DCM_as_JPG("filePath") function. 
                    // But how do I select the location to save it and write the file there?
    }
} 
```

注意：“filePath”参数是源，而不是目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:55:53.800

```
Save_DCM_as_JPG(FileDlg.GetPathName()); 
```

# python - 如何在自定义 pypi 存储库上上传 Windows 安装程序？

> ID：10638040
> 
> 赞同：1
> 
> 时间：2012-05-17T14:48:16.980
> 
> 标签：python, pypi

我们正在使用本地 pypi 存储库（由[djangopypi](https://github.com/benliles/djangopypi)提供支持），但我找不到将 Windows 安装程序上传到它的方法。我下载了 MySQL-python 的二进制发行版，我想将其提供给我，这样我就可以将它安装在 Windows 机器上，而无需在本地编译它的完整设置。

有没有办法上传包，即使它还没有在我的机器上构建？

# javascript - 切换元素不适用于 jQuery

> ID：10638042
> 
> 赞同：0
> 
> 时间：2012-05-17T14:48:21.850
> 
> 标签：javascript, jquery

我想仅在满足特定条件时才执行 JQuery 切换功能（它切换输入字段以使其可供客户端访问）。（我正在使用 JavaScript 测试条件。）我可以这样做吗？出于某种原因，当我在 JavaScript 函数中设置 JQuery 切换函数时它不起作用，所以我不确定我是否做错了什么，或者这是否根本无法完成。

```
<script type="text/javascript">
function conditionalToggle()
{
   if (conditionIsMet)
   {
      // JQuery toggle call here
   }
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:50:22.703

你可能没有正确使用 jQuery，或者没有执行函数，或者（新 jQuery 用户最常见的错误）没有等待 DOM 准备好：

```
function foo(){
    if ("foo" === "foo")
        $('#elementId').toggle();
}

$(function(){ // functions inside $() runs after the DOM is ready.
    foo();
}); 
```

`elementId`您的元素 ID 的占位符在哪里。
[**简单的演示**](http://jsfiddle.net/nEUM8/)

* * *

请注意，您可以使用此`toggle`重载：

```
$('#elementId').toggle(showTheElementOrNot); 
```

`toggle( showOrHide )`
`showOrHide`一个布尔值，指示是显示还是隐藏元素。

[**jQuery 文档**](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:52:46.777

如果在 ready() 函数中，jQuery 应该可以工作

```
<script type="text/javascript">
$(function() {
   function conditionalToggle(){
      if (conditionIsMet) {
         $(element).toggle();
      }
   }
});
</script> 
```

或者只是这样做：

```
<script type="text/javascript">
    function conditionalToggle() {
       if (conditionIsMet) {
          element.style.display = element.style.display=='block' ? 'none' : 'block';
       }
    {
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:43:51.703

你可以在 DOM 准备好时这样做，如果你仍然有问题，你也可以这样做：

```
<script type="text/javascript">
   $(window).load(function() {
        conditionIsMet && $('#elementId').toggle();
   });
</script> 
```

# antlr - 找不到模板 StringTemplate

> ID：10638043
> 
> 赞同：1
> 
> 时间：2012-05-17T14:48:24.970
> 
> 标签：antlr, antlr3, stringtemplate, stringtemplate-4

我正在尝试在谷歌应用引擎中创建一个 wiki 应用。我正在使用字符串模板。但我不了解模板文件层次结构。

这是代码。

*   完成必要的进口。

    ```
    public class Add extends HttpServlet{

    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    // TODO Auto-generated method stub
    //super.doPost(req, resp);
    DatastoreService datastoreService = DatastoreServiceFactory.getDatastoreService();

    String title = req.getParameter("title");
    Entity articleEntity = new Entity("Article", normalize(title));
    articleEntity.setProperty("title", title);

    UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();
    if(user != null){
        String author = user.getNickname();
        articleEntity.setProperty("author", author);
    }else{
        String author = "Anonymous";
        articleEntity.setProperty("author", author);
    }

    String content = req.getParameter("content");
    Text myContent = new Text(content);
    articleEntity.setProperty("content", myContent);

    datastoreService.put(articleEntity);

    resp.sendRedirect("index.jsp");
     }

      private String normalize(String str){
    String trimmedLower = str.toLowerCase().trim();
    String urlReady = trimmedLower.replace(" ", "-");
    return urlReady;
    }

    } 
    ```

这是目录结构。 ![目录](../Images/0132acd5226892493a00382bc12f1256.png)

我收到此错误

```
HTTP ERROR 500

Problem accessing /page. Reason:

Can't find template retrieve-article.st; group hierarchy is [xhtml] 
```

造成的：

```
java.lang.IllegalArgumentException: Can't find template retrieve-article.st; group hierarchy is [xhtml]
at       org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:507)
at org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:392)
at org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:404)
at in.isuru.wiki.Page.doGet(Page.java:42)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:362)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

由码头提供支持：//

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:39:55.333

尽量避免在模板名称中使用“-”。三

# ruby-on-rails - Rails：一些 attr_accessor 出现在视图中，但不是全部

> ID：10638044
> 
> 赞同：0
> 
> 时间：2012-05-17T14:48:25.810
> 
> 标签：ruby-on-rails, model-view-controller, debugging, e-commerce

我正在为电子邮件模板进行一些调试。一些 attr_accessor 出现了，例如 @bulk_order.date 和 @bulk_order.customer_number。大多数不是。我仔细检查了终端，没有发现任何重要的东西。我使用的是 ActiveModel，而不是 ActiveRecord。我会注意到这最初并没有发生，有点突然。

导轨 3.0.7，Mac OS X 红宝石 1.8.7

![_form.html.haml](../Images/d101eab78dc49349f1b740850d543123.png)

上面是表单本身，下面是视图，如您所见，调试过程中只显示了 2 个值。

![看法](../Images/5c7641b5852d7ce1092a6a4b13bff2bc.png)

非常感谢任何输入！

# c# - Silverlight 4 应用程序，控件消失了？

> ID：10638053
> 
> 赞同：0
> 
> 时间：2012-05-17T14:48:56.937
> 
> 标签：c#, silverlight, silverlight-4.0

试图弄清楚为什么我的silverlight应用程序在我运行它时突然什么都不显示（右键单击显示silverlight），而当我打开VS2010创建的html文档时也什么也不显示？

这突然发生了，我不知道为什么。我什至删除了我所有的代码，除了一个事件。

银光代码：

```
<UserControl x:Class="Test.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="395" d:DesignWidth="399"
             xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk">

    <Grid x:Name="LayoutRoot" Background="White">
        <Image Height="96"
               HorizontalAlignment="Left"
               Margin="55,34,0,0"
               Name="image1"
               Stretch="Fill"
               VerticalAlignment="Top"
               Width="71" />
        <Image Height="96"
               HorizontalAlignment="Left"
               Margin="155,34,0,0"
               Name="image2"
               Stretch="Fill"
               VerticalAlignment="Top"
               Width="71" />
        <Image Height="96"
               HorizontalAlignment="Left"
               Margin="257,34,0,0"
               Name="image3"
               Stretch="Fill"
               VerticalAlignment="Top"
               Width="71" />
        <Image Height="96"
               HorizontalAlignment="Left"
               Margin="55,270,0,0"
               Name="image4"
               Stretch="Fill"
               VerticalAlignment="Top"
               Width="71" />
        <Image Height="96"
               HorizontalAlignment="Left"
               Margin="155,270,0,0"
               Name="image5"
               Stretch="Fill"
               VerticalAlignment="Top"
               Width="71" />
        <Image Height="96"
               HorizontalAlignment="Left"
               Margin="257,270,0,0"
               Name="image6"
               Stretch="Fill"
               VerticalAlignment="Top"
               Width="71" />
        <Button Content="Draw/Next"
                Height="23"
                HorizontalAlignment="Left"
                Margin="155,159,0,0"
                Name="button1"
                VerticalAlignment="Top"
                Width="71" />
        <sdk:Label Height="43"
                   HorizontalAlignment="Left"
                   Margin="33,173,0,0"
                   Name="label1"
                   VerticalAlignment="Top"
                   Width="44"
                   Content=""
                   FontSize="32" />
        <sdk:Label FontSize="32"
                   Height="43"
                   HorizontalAlignment="Right"
                   Margin="0,173,52,0"
                   Name="label2"
                   VerticalAlignment="Top"
                   Width="44"
                   Content="" />
        <Button Content="Restart"
                Height="23"
                HorizontalAlignment="Left"
                Margin="155,217,0,0"
                Name="button2"
                VerticalAlignment="Top"
                Width="71"
                Click="button2_Click" />       
    </Grid>
</UserControl> 
```

后面的代码：

```
public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:24:21.280

删除所有内容并重新创建后解决。非常奇怪的行为。

# video-streaming - 音频或视频的实时流媒体是如何完成的？

> ID：10638054
> 
> 赞同：1
> 
> 时间：2012-05-17T14:49:03.440
> 
> 标签：video-streaming, audio-streaming, live-streaming

我试图了解就缓冲区管理而言，实时音频流是如何完成的。

对于音频案例：如果您有一个源以 44100hz +/- 时钟误差捕获帧，而带有声卡 DAC 的接收器以 44100hz +/- 时钟误差消耗帧。

由于每一端的时钟错误，接收器处的缓冲区将（最终）失控或运行不足。

对于一个源向多个接收器进行实时流式传输，流控制流是不可能的。

我对解决方案的唯一猜测是跟踪接收器的缓冲区填充（比网络抖动效应更长的时间）并插入样本或丢弃样本。

对此的任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-22T16:33:30.223

这很**重要**。通过网络流式传输连续、长期、实时的音频通常在行业中完成，这不是开玩笑的事情。假设两个振荡器的偏差很小以至于可以忽略不计，这太简单了。

（顺便说一句，在某些情况下说这无关紧要是可以的。例如，当看到两个邪恶的成年人掉进敞开的坟墓时，帕格斯利亚当问他的姐姐星期三亚当斯的问题。他问“他们死了吗？”她干巴巴地回答，“这有关系吗？”）

以下是解决问题的三种可能方法，如果您能想到更多或更好的解决方案，请分享：1）实现某种锁频环，从而稍微调整接收器的时钟以适应输入流 2）在接收器执行采样率转换以纠正错误 3) 监控缓冲区或队列中的样本数，以便在即将发生欠载或溢出时生成或丢弃一些样本，以避免音频质量严重下降。

如果您可以控制接收器的时钟，那么第一个解决方案是最好的。我不确定如何使用 ALSA 或 PulseAudio 之类的高级音频软件模块来做到这一点（任何建议都非常感谢！）从哲学上讲，执行采样率转换可能很好，但 CPU 密集度会远远超过它的价值（并添加不必要的失败风险）所以我赞成监测缓冲区深度（如 May 所建议的那样）并在不显眼的情况下将样本滑入或滑出。

还有什么想法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T03:12:35.613

时钟不同步的情况肯定是这样。事实是，没关系。

假设时钟关闭多达 5Hz（这比正常值高几个数量级）。在一个小时的过程中，时钟只漂移了 0.4 秒，这比通常的 2-5 秒的缓冲时间要短。

网络问题通常比时钟同步问题更频繁地导致重新缓冲。实际上，时钟通常相差 1Hz 或更小，这几乎不是问题。

现在，如果您想同步播放，那完全不是问题。幸运的是，流式音频的听众通常不会这样做。

# ruby-on-rails - 嵌套记录无法验证，因为其嵌套的 belongs_to 不保存

> ID：10638055
> 
> 赞同：0
> 
> 时间：2012-05-17T14:49:05.237
> 
> 标签：ruby-on-rails, validation, nested-attributes, belongs-to

我正在尝试创建一个嵌套的子孙记录。孩子属于父母和孙子女。孩子不会 validates_presence_of 孙子，因为它还没有被保存。

我正在使用 Rails 2.3.11、Formtastic、InheritedResources 和 Haml，其他一切似乎都正常工作 - 例如，孙子的验证错误在父表单中正确填充，无效值被记住并呈现给用户. 除非一切都有效，否则父模型甚至不会尝试更新，就像它应该的那样。

我的代码是这样的，虽然在不同的问题域中：

```
class Project < ActiveRecord::Base
  has_many :meetings, :dependent => :destroy
  accepts_nested_attributes_for :meetings
end

class Meeting < ActiveRecord::Base
  belongs_to :project
  belongs_to :task
  accepts_nested_attributes_for :task
  validates_presence_of :task_id, :project_id
end

class Task < ActiveRecord::Base
  has_many :meetings, :dependent => :destroy
end 
```

项目总是已经存在，并且可能已经有我们不想看到的会议。任务可能通过其他会议属于其他项目，但在这种情况下，任务和会议总是新的。

在控制器中，我只在新操作上建立一个空白记录

```
@project.meetings.build 
```

并像这样保存数据：

```
@project.update_attributes(params[:project]) 
```

并且在视图中

```
- semantic_form_for @project do |f|
  - f.semantic_fields_for :meetings do |m|
    - next unless m.object.new_record?
    = m.semantic_errors :task_id
    - m.object.build_task unless i.object.task
    - m.semantic_fields_for :task do |t|
      - f.inputs do
        = t.input :task_field
        = m.input :meeting_field 
```

当我尝试保存表单时，我收到“任务不能为空白”的验证错误。好吧，当然，任务尚未保存，我正在尝试验证，但我没有它的 ID。

是否有一种简单而优雅的方法来确保在子记录之前构建孙记录（任务）？

我在会议模型中尝试过这样的事情：

```
before_validation_on_create do |meeting|
  meeting.task.save if meeting.task.valid?
end 
```

这似乎保存了任务，但会议仍然没有得到正确的 ID。同样的错误，但创建了任务记录。

我也试过这个：

```
before_validation_on_create do |meeting|
  new_task = meeting.task.save if meeting.task.valid?
  meeting.task = new_task
end 
```

其中有引发 ActiveRecord::RecordNotFound "Couldn't find Task with ID=XX for Meeting with ID="的奇怪行为 - 我有点明白，但似乎是一条红鲱鱼。

我还尝试将：inverse_of 添加到所有关系并验证：task 而不是：task_id。奇怪的是，后者失败了，但似乎没有给出错误信息。

我在这里的实际目标是创建多个任务，每个任务都有一个关于先前选择的项目的初始会议......所以我可以对我的问题采取另一种方法 - 我可以在控制器中做一些简单而丑陋的事情，或者创建第一个在项目的 after_create 会议上。但这太漂亮了，太接近工作了。我在 :task_field 和 :meeting_field 上得到正确的验证错误这一事实表明我走在正确的轨道上。

我知道问题出在哪里，但不知道如何解决：我怀疑我遗漏了一些明显的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:39:02.333

好吧，我找到了一个解决方案，基于一个类似的问题，但它的短处是“rails 2.3 似乎不太擅长这个”。我想我可以用比我见过的任何其他答案更简洁的方式来回答这个问题。

您所做的是跳过 :task_id 的验证，但前提是任务有效！我见过的大多数其他答案都使用 proc，但我认为使用委托更具可读性，如下所示：

```
delegate :valid?, :to => :task, :prefix => true, :allow_nil => true
validates_presence_of :task_id, :unless => :task_valid? 
```

我还有另一个隐藏在水线下的问题 - 在这种情况下，“项目”实际上是我想要保护的一种特殊记录，它的验证（故意）仅针对这个特殊记录失败，我还设置了只读？为真为特殊记录。

即使我实际上并没有*更改*该特殊记录，它仍然需要验证并且不能只读以通过它更新子级。出于某种原因，我没有看到该验证的错误消息。为了解决这个问题，我对项目进行了验证：on => :create，然后我取出了只读？事物。

但一般的解决方案是“如果对象本身有效，则不验证未构建的 belongs_to 对象的存在”。Nil 永远不会有效，因此如果您只有一个 object_id，验证仍然有效。

*（除非您有答案或链接，否则请不要对真诚的问题投反对票。我知道其他人已经以其他方式提出了该问题，我阅读了许多其他问题，似乎都不是同样的问题，我还没有找到解决方案。）*

# javascript - 使用 Google Chrome 逐行调试 Javascript

> ID：10638059
> 
> 赞同：45
> 
> 时间：2012-05-17T14:49:13.083
> 
> 标签：javascript, jquery, debugging, google-chrome, google-chrome-devtools

如何在不进入 javascript 库的情况下使用 Google Chrome 开发人员工具逐行遍历我的 javascript 代码？

例如，我在我的网站上大量使用 jQuery，我只想调试我编写的 jQuery，而不是 jquery 库中的 javascript/jquery。我如何只单步执行我自己的 jquery/javascript 而不必单步执行 jquery 库中的数百万行？

因此，如果我有以下内容：

```
function getTabFrame() {
    $.ajax({
        url: 'get_tab_frame.aspx?rand=' + Math.random(),
        type: 'GET',
        dataType: 'json',
        error: function(xhr, status, error) {
            //alert('Error: ' + status + '\nError Text: ' + error + '\nResponse Text: ' + xhr.responseText);
        },
        success: function(data) {
            $.each(data, function(index, item) {
                // do something here
            });
        }
    });
} 
```

如果我将断点放在`$.ajax({`，如果我开始调试它停止的地方，如果我然后按 F11，它会直接进入 jQuery 库。我不希望这种情况发生，我希望它转到下一行，即`url: 'get_tab_frame.aspx?rand=' + Math.random(),`.

我曾尝试按 F10，但这直接`}`导致功能关闭。而 F5 只是转到下一个断点，而不是逐行逐行执行。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-17T14:56:30.960

假设您在 Windows 机器上运行...

1.  敲`F12`键
2.  在开发人员工具中选择`Scripts`或选项卡`Sources`
3.  单击顶层的小文件夹图标
4.  选择**您的**JavaScript 文件
5.  通过单击左侧的行号添加断点（添加一个小蓝色标记）
6.  执行你的 JavaScript

然后在执行调试期间你可以做一些步进动作......

*   `F8`继续：将一直持续到下一个断点
*   `F10`跳过：跳过下一个函数调用（**不会**进入库）
*   `F11`Step into：进入下一个函数调用（**将** 进入库）
*   `Shift + F11`Step out：跳出当前函数

**更新**

阅读您更新的帖子后；要调试您的代码，我建议暂时使用[jQuery Development Source Code](http://code.jquery.com/jquery-latest.js)。虽然这并不能直接解决您的问题，但可以让您更轻松地进行调试。对于您要实现的目标，我相信您需要进入库，因此希望生产代码可以帮助您破译正在发生的事情。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-02-11T18:00:22.437

*...如何在不进入 javascript 库的情况下使用 Google Chrome 开发人员工具逐行遍历我的 javascript 代码？...*

* * *

记录在案：目前（2015 年 2 月）Google Chrome 和 Firefox 都具有您（和我）需要避免进入库和脚本，并超出我们感兴趣的代码的内容，它被称为 Black Boxing：

![在此处输入图像描述](../Images/a07d8fe362db0513f04a2a33220cd160.png)

> 当您对源文件进行黑箱处理时，调试器在单步执行您正在调试的代码时不会跳转到该文件。

更多信息：

*   Chrome：[黑盒 JavaScript 源文件](https://developer.chrome.com/devtools/docs/blackboxing)
*   Firefox：[调试器中的黑盒库](https://hacks.mozilla.org/2013/08/new-features-of-firefox-developer-tools-episode-25/)

# regex - 通过正则表达式替换匹配中的单个字符

> ID：10638060
> 
> 赞同：8
> 
> 时间：2012-05-17T14:49:13.520
> 
> 标签：regex

我有一个简单的模式，我正在尝试对其进行查找和替换。当它们被数字包围时，它需要用句点替换所有破折号。

替换这些中的句点：

```
3-54
32-11
111-4523mhz 
```

像这样：

```
3.54
32.11
111.4523mhz 
```

但是，我不想替换以下任何内容中的破折号：

```
Example-One
A-Test 
```

我尝试过使用以下内容：

```
preg_replace('/[0-9](-)[0-9]/', '.', $string); 
```

但是，这将替换整个匹配，而不仅仅是中间。你如何只替换匹配的一部分？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T14:51:53.627

```
preg_replace('/([0-9])-([0-9])/', '$1.$2', $string); 
```

应该做的伎俩:)

**编辑：**更多解释：

通过在正则表达式中使用`(`和，您可以创建一个组。`)`该组可用于替换。`$1`被第一个匹配组`$2`替换，被第二个匹配组替换，依此类推。

这意味着如果您（例如）更改`'$1.$2'`为`'$2.$1'`，则该操作将交换两个数字。在您的情况下，这不是有用的行为，但也许它可以帮助您更好地理解原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:53:00.543

根据您使用的正则表达式实现，您可以使用非捕获组：

```
preg_replace('/(?<=[0-9])-(?=[0-9])/', '.', $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:52:21.600

您可以使用反向引用来保留要保留的匹配部分：

```
preg_replace('/([0-9])-([0-9])/', '$1.$2', $string); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-07-15T02:32:30.450

以下是实现相同目标的几种方法。

```
import java.util.Arrays;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * Created by Rituraj_Jain on 7/14/2017.
 */
public class Main {

    private static final Pattern pattern = Pattern.compile("(\\S)-(\\S)");
    private static final String input = "Test-TestBad-ManRituRaj-Jain";

    public static void main(String[] args) {
        Matcher matcher = pattern.matcher(input);
        String s = matcher.replaceAll("$1 $2");
        System.out.println(s);

        System.out.println(input.replaceAll(pattern.pattern(), "$1 $2"));

    }
    public static void main1(String[] args) {
        Matcher matcher = pattern.matcher(input);
        StringBuffer finalString = new StringBuffer();
        while(matcher.find()){
            String replace = matcher.group().replace("-", " ");
            matcher.appendReplacement(finalString, replace);
        }
        matcher.appendTail(finalString);
        System.out.println(input);
        System.out.println(finalString.toString());
    }
} 
```

# git - “别名” git 作者/提交者？

> ID：10638062
> 
> 赞同：31
> 
> 时间：2012-05-17T14:49:23.753
> 
> 标签：git, github

因此，我设法将 GitHub 项目作为`domenic <domenic@domenicdenicola.com>`和`Domenic Denicola <domenic@domenicdenicola.com>`. 这很烦人，尤其是在生成摘要时。

我知道[如何追溯更改作者/提交者](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)。但是，这对于已经推送和公开的项目会产生很多不良后果，例如更改所有哈希值（从而使人们制作的链接无效，或对它们的评论）；丢失标签；而且我担心 GitHub 甚至可能最终将“Domenic Denicola 5 分钟前提交”附加到项目中的每一个提交中。所以这不是一个选择。

我希望有某种方式可以告诉 Git，“这两位作者/提交者是同一个人；这样算他们。” 在那儿？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-19T10:24:23.470

在您的存储库中设置一个`.mailmap`文件。有关详细信息，请参阅`git help shortlog`，或查看[Git 本身](https://github.com/git/git/blob/master/.mailmap)的内容。

请参阅`Mapping authors`部分：[https ://git-scm.com/docs/git-shortlog#_mapping_authors](https://git-scm.com/docs/git-shortlog#_mapping_authors)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-08T20:13:09.303

如果您用于提交的电子邮件与与您的帐户关联的电子邮件不同，您可以在[https://github.com/settings/emails](https://github.com/settings/emails)添加其他电子邮件。

我在使用 Source Tree 提交到 GitHub 时遇到了这个问题。它使用名称提交：pcuser@pcFQDN，这不是我的电子邮件地址。将此虚假地址添加到我的 GitHub 帐户使我的所有提交都显示为我。它不需要验证地址。

# wpf - 如何找到可视化树中的哪个元素正在创建控件的某些可视化部分

> ID：10638063
> 
> 赞同：0
> 
> 时间：2012-05-17T14:49:28.667
> 
> 标签：wpf, xaml, wpf-controls

假设我有一个复杂的用户控件（如 GridView），并且我从 Blend 软件中提取了样式。现在，由于 GridView 是一个包含子部分的复杂控件，我如何知道哪个 xaml 元素负责某些视觉呈现？举个例子，我怎么会发现女巫元素在选定的单元格周围绘制边框？

是否有一些软件可以帮助检查整个视觉结构，以及每个部分是如何绘制的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:57:32.150

您可以使用下一个免费软件查看可视化树和不同的属性：

[窥探](http://blois.us/Snoop/), [wpfinspector](http://wpfinspector.codeplex.com/)

# c++ - 如何使用 C++ 检查进程是否正在运行

> ID：10638068
> 
> 赞同：3
> 
> 时间：2012-05-17T14:49:47.290
> 
> 标签：c++, winapi, visual-c++

如果一个进程没有运行，我不应该显示某些上下文菜单选项？我正在检查进程是否正在运行或不使用进程名称。

但问题是，进程名称在不同的 Windows 平台上显示方式不同。

即windows任务栏上的windows 64位进程名是“ **applicationname.exe** ”

**某些 windows xp 机器显示与“ applica~2.exe** ”相同的进程名称

请让我知道检查进程是否正在运行的一致方法？

我的开发环境是 C++ 和 Visual Studio 2010

```
 DWORD getProcessID(const std::wstring& processName)
   {
       PROCESSENTRY32 info;
       info.dwSize = sizeof(info);

       HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, NULL);
       if ( snapshot == INVALID_HANDLE_VALUE )
             return 0;

       Process32First(snapshot, &info);
       if ( !processName.compare(info.szExeFile) )
       {
             CloseHandle(snapshot);
             return info.th32ProcessID;
       }

       while ( Process32Next(snapshot, &info) )
       {
              if ( !processName.compare(info.szExeFile) )
               {
                    CloseHandle(snapshot);
                    return info.th32ProcessID;
               }
       }

      CloseHandle(snapshot);
     return 0;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:06:17.457

`EnumProcesses`是枚举活动进程的另一种方法。

不同之处在于您需要为 PIDs,call 分配空间，`EnumProcesses`使用访问标志打开每个进程，`PROCESS_QUERY_INFORMATION`然后调用`GetProcessImageFileName`它的句柄并进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:26:02.507

使用 WMI 询问[Win32_Process](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)的实例允许您检查正在运行的进程的完整路径，以查找您需要查看的匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:13:21.993

您是相关流程的作者吗？如果是这样，更稳健的设计将是使用 IPC 直接询问过程。这样，您不必进行轮询，也不会遇到烦人的问题，例如如果您检测到进程、创建上下文菜单然后进程停止会发生什么？

# .net - 通过 .net webservice 到非 .net-Python 客户端的 SQL 查询结果

> ID：10638071
> 
> 赞同：0
> 
> 时间：2012-05-17T14:49:54.977
> 
> 标签：.net, python, sql-server, web-services, suds

我希望使用一个包含使用 Python 客户端的 SQL Server 查询结果的 .net Web 服务。我已经使用 Python Suds 库来连接到相同的 Web 服务，但没有使用一组结果。我应该如何构造数据，以便 Python 客户端有效地传输和使用它。最多应有 40 行数据，每行 5 列包含 60 个字节的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:48:31.817

Suds 是一个通过 SOAP 连接的库，因此您可能已经将“有效传输”吹到了窗外，因为这是一种特别冗长的网络格式。您的最大数据大小相对较小，因此几乎可以肯定应该在单个消息中传回，这样 SOAP 开销只会产生一次。因此，您应该创建一个返回结果列表或数组的 Web 服务，然后调用它一次。这应该直接序列化为单个 XML 主体，然后 Suds 允许您访问该主体。

# javascript - 带有空文件夹的 dijit.tree

> ID：10638072
> 
> 赞同：0
> 
> 时间：2012-05-17T14:49:54.957
> 
> 标签：javascript, drop-down-menu, treeview, dojo

我创建了一个在下拉列表中显示 dijit.tree 的树选择。现在我不希望用户选择一个文件夹，即使它是空的。用户应该只能选择末端节点或叶子。dijit.tree 将所有空文件夹视为叶子。我该如何排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:12:43.610

您需要覆盖 _onClick 或 setSelected 方法。如果您使用多父模型 ForestStoreModel，这会变得复杂。

见[fiddle.net](http://jsfiddle.net/seeds/zawSX/2/)

尝试这样做，这仅适用于选择多个 false：

```
 getIconClass: function fileIconClass(item, nodeExpanded) {
        var store = item._S,
            get = function() {
                return store.getValue(item, arguments[0]);
            };
        // scope: dijit.Tree
        if (item.root || get("isDir")) {

            if (!item || this.model.mayHaveChildren(item) || get("isDir")) {
                return (nodeExpanded ? "dijitFolderOpened" : "dijitFolderClosed");
            } else {
                return "dijitLeaf";
            }

        } else {

            return "dijitLeaf";

        }
    },
    onClick: function(item, treeNode, e) {

        var store = item._S,
            get = function() {
                return store.getValue(item, arguments[0]);
            };
        if (get("isDir")) this.set("selectedItems", []);
    } 
```

适应你认为合适的，匹配你的 json 数据 - 特别是*isDir*，上面适用于这样的 json 样本

```
{
    identifier: 'id',
    label: 'foo',
    items: [
        {
        id: 'item1',
        foo: 'file1',
        isDir: false},
    {
        id: 'item2',
        foo: 'emptyDir',
        isDir: true},
    {
        id: 'item3',
        foo: 'dir',
        isDir: true,
        children: [
            {
            id: 'item3_1',
            foo: 'fileInDir',
            isDir: false}
        ]}
    ]
} 
```

# php - max_input_vars 设置，即使在 php.ini 中注释

> ID：10638075
> 
> 赞同：6
> 
> 时间：2012-05-17T14:50:00.677
> 
> 标签：php, post, ini

我的 PHP 应用程序中有一个奇怪的问题。在我的 php.ini 中，我已经注释掉了该`max_input_vars`指令，但是当提交 1-2k 表单时（我知道它有点大），最后 200 个帖子值被截断。奇怪的是我什至重新启动了我的 Apache。我的`phpinfo()`显示限制设置为 1000。这是默认值吗？怎么做`max_input_vars`无限制？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T14:51:21.253

根据[**手册**](http://fr2.php.net/manual/en/info.configuration.php)，确实有一个默认值`1000`for `max_input_vars` *（查看页面开头的表格）*。

如果您想要一个不同于此默认值 1000 的值，则必须指定它——并且不要在配置中注释该指令。

据我所知，没有办法`max_input_vars` *无限*；当然，您可以将其设置为*足够高的*值，但请记住，最近已添加此指令作为安全措施。此外，将 设置为无限制没有意义，`max_input_vars`因为恶意用户可能会发送大量数据并耗尽您的内存。

# xcode - 在头文件中导入文件

> ID：10638077
> 
> 赞同：1
> 
> 时间：2012-05-17T14:50:05.187
> 
> 标签：xcode

我想知道是否可以导入头文件，但不包含该头文件中包含的任何头文件。

假设我有导入 B 类的 A 类。在 B 类中，我导入 C 类。有什么办法可以从 A 类中隐藏 C 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:51:55.763

不，你不能这样做：一旦你导入一个文件，它的所有导入也会进来。

但是，如果您只想使用`ClassA`，则可以在自己的标头中*前向声明*`ClassA`它，而不是导入的标头：

```
@class ClassA; 
```

现在可以制作 type 的变量`ClassA*`，`ClassA*`用作返回类型或参数类型等。同时，`ClassA`不会加载 's header 的依赖项。

一般而言，减少在标头中导入的标头数量是一个好主意，例如将与实现（而不是接口）相关的导入移动到 .m 文件中，并使用*类扩展*。

# ruby - DataMapper 范围可以使用关联模型的范围吗？

> ID：10638080
> 
> 赞同：1
> 
> 时间：2012-05-17T14:50:12.960
> 
> 标签：ruby, ruby-datamapper

假设我有一个用于食肉动物的 DataMapper 范围，如下所示：

```
class Animal
  #...
  def self.carnivores
    all(:diet => 'meat')
  end
  #...
end 
```

我可以在协会的范围内重用该范围吗？

```
class Zoo
  #...
  def self.with_carnivores
    # Use `Animal.carnivores` scope to get zoos that have some?
    all(:animals => ???)
  end
  #...
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:32:57.060

您可以通过从关联中“反向”执行此操作。

```
 class Zoo
  #...
  def self.with_carnivores
    # Assuming `Animal belongs_to :zoo`
    Animal.carnivores.zoo
  end
  #...
end

class Habitat
  #...
  def self.with_carnivores
    # Assuming `Animal has_many :habitats`
    Animal.carnivores.habitats
  end
  #...
end 
```

# java - 如何使用 JList 中的文件填充 JTextArea

> ID：10638084
> 
> 赞同：1
> 
> 时间：2012-05-17T14:50:32.507
> 
> 标签：java, swing, file-io, textarea, jlist

我正在创建一个应用程序，该应用程序从选定的目录中获取 .java 和 .class 文件的列表并将它们放在 JList 中。我正在使用 Netbeans 7.1.2。

我已经像我想要的那样在 JList 中显示了所有文件，我似乎无法做的是在 jTextArea 中打开选定的 .java 文件。

我需要从 JList 获取文件以将其传递到 JTextArea 但它不起作用

```
 try
     {
         FileReader reader= new FileReader( jlist.getSelectedValue() );
         BufferedReader br = new BufferedReader( reader);
         textarea.read( br );
         br.close();
         textarea.requestFocus();               
     } 
     catch(Exception e2) {} 
```

有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:09:37.487

如果要将文件读入 JTextArea，则需要使用`read(...)`传入 BufferedFileReader 的方法而不是该方法。`write(...)`这对你来说应该是有意义的，因为你的目标是阅读，而不是写作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:17:07.137

如果您遇到问题，您应该显示/记录您的异常，而不是安静地吞下它们。您的代码可能会遇到一个与它相关联的有用异常的问题，但在您编写告诉您异常的代码之前您不会知道。

你可以从这个开始：

```
try
{
     File file = (File)jlist.getSelectedValue();
     FileReader reader = new FileReader( file );
     textarea.read( br );
     br.close();
     textarea.requestFocus(); 
}
catch(Exception e)
{
    JOptionPane.showMessageDialog(null, e.toString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:59:41.193

```
textarea.write( bw ); 
```

这能编译吗？write 方法似乎用于将 textarea 的内容写入文件，而不是相反。

此外，如果出现问题，请确保不要捕获异常并忽略它。异常跟踪对于了解问题所在非常有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T14:52:56.390

一旦您将某些内容添加到 JList - 一个可视组件 - 它就不再是对象列表，因此。您只有一个索引为 0 到 n 的数组，您可以从中选择，但其中没有任何内容。您可以做的是创建一个文件数组（新文件 []）并将所有文件存储在其中，以便您可以随时访问它们。

# php - PHP中的字谜算法

> ID：10638087
> 
> 赞同：3
> 
> 时间：2012-05-17T14:50:42.243
> 
> 标签：php, algorithm, anagram

我完全是 PHP 的新手。今天我遇到了一个我不知道如何解决的问题，即使在搜索谷歌和挖掘 SOF 之后。这是Anagram算法。

所以基本上，我理解这里的问题：当用户输入一个字符串时，我将它拆分并与我的库（给定数组）进行比较，然后我必须将它加入 2-3-...等字符以再次比较，这正是我现在卡住的地方，我不知道如何加入数组的元素。

这是我正在实现的代码，也是一个示例字典。

我有一个自制的字典，其中包含数组 $dict 中的这些元素。我有一个表格供用户输入字符串，输入的字符串将传递给下面的代码并声明为 $anagram。我必须拆分输入的字符串以与我的字典进行比较。但我不知道如何加入它们，比如比较 2 个字母、3 个字母......等等......等等，与字典。

```
<?php

$dict = array(
'abde',
'des',
'klajsd',
'ksj',
'hat',
'good',
'book',
'puzzle',
'local',
'php',
'e');

$anagram = $_POST['anagram'];
//change to lowercase
$anagram = strtolower($anagram);

//split the string
$test = str_split($anagram);

//compare with $dict for the first split without joining
for ($i=0; $i<strlen($anagram); $i++) {
    if ($test[$i]==$dict[$i]) {
        echo $test[$i]."<br />";
    }
}

//problem: how to join elements of the array in the loops
//like user inputs "hellodes"
//after echo "e", how to join the elements like: h-e,h-l,h-l,h-o,h-d,h-e,h-s
//and then h-e-l,h-e-l,h-e-o...etc...
?> 
```

我希望算法尽可能简单，因为我完全是新手。我很抱歉，因为我的英语不太好。最好的问候， Khiem Nguyen。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T14:03:32.343

（我将此作为单独的答案添加，因为它处理问题的方式与我在第一期中提到的不同）

这是一种更复杂的方法，可以确定字典中的哪些单词是您要查找的单词的一部分；我将把它留给读者来弄清楚它是如何工作的。

它使用因式分解来确定一个词是否是另一个词的字谜。它将做的是为每个字母分配一个唯一的主要值；您可以通过将所有值相乘来计算给定单词中字母的值。例如，CAT 是 37 * 5 * 3 或 510。如果您的目标词因数相同，则可以确定一个是另一个的字谜。

我已经按照它们在英国英语中的常见程度对质数进行了排序，以保持生成的因子更小。

```
<?php

function factorise($word)
{
    // Take a number, split it into individual letters, and multiply those values together
    // So long as both words use the same value, you can amend the ordering of the factors 
    // as you like

    $factors = array("e" => 2, "t" => 3, "a" => 5, "o" => 7, "i" => 11,
        "n" => 13, "s" => 17, "h" => 19, "r" => 23, "d" => 29,
        "l" => 31, "c" => 37, "u" => 41, "m" => 43, "w" => 47,
        "f" => 53, "g" => 59, "y" => 61, "p" => 67, "b" => 71,
        "v" => 73, "k" => 79, "j" => 83, "x" => 89, "q" => 97,
        "z" => 101);

    $total = 1;

    $letters = str_split($word);

    foreach ($letters as $thisLetter) {
        if (isset($factors[$thisLetter])) {
            // This will skip any non-alphanumeric characters.
            $total *= $factors[$thisLetter];
        }
    }

    return $total;
}

$searchWord = "hasted";

$dict = array("abde", "des", "klajsd", "ksj", "hat", "hats");

$searchWordFactor = factorise($searchWord);

foreach ($dict as $thisWord) {
    // Factorise each word that we're looking for
    // If the word we've just factored is an exact divisor of the target word, then all the 
    // letters in that word are also present in the target word
    // If you want to do an exact anagram, then check that the two totals are equal

    $dictWordFactor = factorise($thisWord);

    if (($searchWordFactor % $dictWordFactor) == 0) {
        print ($thisWord . " is an anagram of " . $searchWord . "<br/>");
    }
} 
```

对于它的价值，我认为这是一个更优雅的解决方案 - 您可以通过预先计算字典中的值来加速它。如果您通过并计算出字典中每个单词的因素，您可以直接在数据库中进行搜索：

```
SELECT word FROM dictionary WHERE wordFactor='$factorOfThisWord' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:10:08.173

我不太明白你的代码在做什么；但如果你想要一个简单的字谜检查器，伪代码将类似于：

```
get array of letters in my anagram
for each word in the dictionary
    get array of letters in this word
    for each letter in my anagram
        is this letter also in the word?
            if no, move on to the next word
    if we get here, it's an anagram 
```

您可以做一些额外的事情 - 您可以确保字谜和字典单词的长度相同（如果不是，它们就不能是字谜）；并且您还需要弄清楚如何处理字典单词中多次出现但在字谜词中只出现一次的字母（例如，上面的代码会将“aa”报告为“a”的字谜）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T15:52:58.277

试试字符串洗牌功能？

```
str_shuffle ( string $str ) 
```

这是一些伪代码：

```
Get random string from array
store string copy (Not shuffled)
string shuffle another copy
echo shuffled string
get users guess
parse guess (Remove illegal characters)
if parsed guess = string
    reward
else
    ?let user try again? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:27:44.043

我无法理解您的问题、您对代码的解释以及代码本身。您想检查任意单词是否是字典中某个单词的字谜？

这很简单——创建一个包含 26 个整数的数组。遍历小写的输入单词，为每个字母将 array[letter - 'a'] （或任何 php 等效项）增加 1。

然后遍历字典并为每个单词以相同的方式生成 array_dict，并检查 i = 0...25 if array[i] == array_dict[i]。如果它们都相同，则这些词是字谜。当然，在每个单词之后将 array_dict 设置回零。

另一种方法是对字符串中的字母进行排序，然后简单地比较排序后的字符串。如果允许您修改/预处理字典，这很好 - 您保持字典预先排序，然后只需对输入单词进行排序并将其与字典单词进行比较。最佳解决方案可能是创建一个（用 C# 术语，我不知道 php 抱歉）

```
Dictionary<string, List<string>> 
```

并通过对每个单词进行排序，在字典中查找它来预处理您的字典，如果列表不存在，则创建它，并在任何一种情况下将单词添加到列表中。然后，当用户输入单词时，您可以对其进行排序并返回 dictionary[sortedword] 作为结果 - 在基本恒定的时间内找到所有字谜（输入字符串长度为 nlogn，但字典大小为常数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T15:58:04.147

```
$dictionary = array("kayak");

$anagram = "kayak";

$anagramSorted = sortString($anagram);

foreach ($dictionary as $word)
{
    $wordSorted = sortString($word);
    if ($wordSorted == $anagramSorted)
    {
       echo 'true';
    }
}

function sortString($s)
{
    $chars = array();
    $length = strlen($s);
    for ($i=0;$i<$length;$i++)
    {
       $chars[] = $s[$i];
    }
    sort($chars);

    return implode("",$chars);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-07T10:42:43.900

此函数将获取字符串并返回字符串中存在的计数字谜。

```
function countingAnagrams($str)
    {
        $str_arry = [];
        $anagrams = 0;
        $str_arry= explode(' ', $str);
        for ($i = 0; $i < count($str_arry); $i++) {
            $str_cmp = $str_arry[$i];
            for($k = 0; $k < count($str_arry); $k++){
                if($i != $k){
                    $str_rev = $str_arry[$k];
                    if (count_chars($str_cmp, 1) == count_chars($str_rev, 1))
                    {
                        unset($str_arry[$i]);
                        $str_arry = array_values($str_arry);
                        $anagrams++;
                    }
                }
            }
        }
        return $anagrams;
    }

echo  countingAnagrams('cars are residing on my arcs'); 
```

# java - 访问 Java Singleton 私有成员的正确方法

> ID：10638088
> 
> 赞同：2
> 
> 时间：2012-05-17T14:50:47.883
> 
> 标签：java, singleton

如果您有一个如下所示的 Java Singleton：

```
public class MySingleton {

private static MySingleton instance;

private int member;

public static MySingleton getInstance(){
    if(instance==null){
        instance = new MySingleton();
    }
    return instance;
}

private MySingleton(){
    //empty private constructor
}

public int getMemberA(){
    return member;
}

public int getMemberB(){
    return instance.member;
}

} 
```

... getMemberA 和 getMemberB 之间有区别吗？也就是说，使用`instance.xxx`和 just访问成员之间有区别`xxx`吗？

注意：我知道使用单例模式的优缺点！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T14:54:22.970

是的，有区别。

您的单例实现当前不是线程安全的，这意味着可以调用除引用`getMemberB()`的实例*之外*`instance`的实例，此时您将获得不同的结果。

如果您的实现是线程安全的（因此实际上只能创建一个实例），那么它们将是等效的，并且更简单的形式将是更可取的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T14:53:17.420

没有功能上的区别，但我发现`getMemberA()`眼睛更容易。

请注意，您的单例不是线程安全的。两个线程同时调用`getInstance()`可能会导致创建两个对象。如果发生这种情况，单身合同将被打破，所有赌注都将被取消。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:56:39.653

但是，在行为上没有区别，我宁愿使用“return member”甚至“return this.member”，因为这看起来更直观。

线程安全是一个完全不同的话题，这个简单的单例不满足任何线程安全的单例要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:26:34.757

您的单例模式实现使用延迟加载技术。但它不是线程安全的。我们可以使用`synchronized`关键字使`getInstance()`方法线程安全，但这会损害性能。我们最好对私人单例成员进行仔细检查。

```
public class MySingleton {

    private volatile static MySingleton instance;

    public static MySingleton getInstance(){
        if (instance == null) {
            synchronized (MySingleton.class) {
                if (instance == null) {
                    instance = new MySingleton();
                }
            }
        }
        return instance;
    }

    private MySingleton(){
        //empty private constructor
    }
} 
```

# javascript - MS VS 2005 和 HTTP POST/CORS/Firefox 中的 Scrptservice Web 服务

> ID：10638089
> 
> 赞同：0
> 
> 时间：2012-05-17T14:50:52.803
> 
> 标签：javascript, asp.net, firefox, cross-site

我正在尝试使用 VS2005 和 IIS6 开发 Ajax Webservice。它的目的是基于过滤的 MS Access 表查询数据库并以文本/csv（不是我的选择！）的形式返回记录。服务必须可以从任何客户端浏览器访问（只要它支持 Ajax 和 XMLHTTPRequest 对象），最有可能是 Linux 服务器。这显然涉及到跨站HTTP请求的现象。当客户端是 MS IE 8 时，它可以毫不费力地工作，这可能是因为该 Web 工具的安全性实施过于草率。问题出现在 Firefox 12 中，调用服务的函数返回 HTTP/1.1 403 Forbidden。VB中的Web服务代码如下：

```
Option Explicit On
Option Strict On

Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel
Imports System.Web.Script.Services

Imports System
Imports System.Data
Imports System.Data.OleDb
Imports System.Data.Odbc

<System.Web.Services.WebService(Namespace:="http://chpt.co.uk/CastusDataTransport")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> <ScriptService()> _
Public Class TransferToolData
    Inherits System.Web.Services.WebService

    Const AccConStr As String = "Provider=Microsoft.Jet.OLEDB.4.0; Data       Source=c:\inetpub\wwwroot\Castus_Server\App_Data\db1.mdb"

<WebMethod()> _
Public Function GetJobRecords(ByVal ClientID As Long) As String

    LogGrabJobData("Request for Job Data")

    Return GrabJobData(ClientID)
End Function

Private Function GrabJobData(ByVal ID As Long) As String

    Dim strData As String
    Dim MyDB As New OleDbConnection
    Dim drGet As OleDbDataReader
    Dim cmdRetrieve As New OleDbCommand
    Dim cs As String
    Dim RecCount As Long

    cs = AccConStr
    MyDB = New OleDbConnection(cs)
    cmdRetrieve.Connection = MyDB
    cmdRetrieve.CommandText = "SELECT * FROM Job_Data WHERE Client_ID = " & ID.ToString
    cmdRetrieve.Connection.Open()
    drGet = cmdRetrieve.ExecuteReader
strData = "’Job_ID’, ’Client_ID’, ’Status_ID’, ’Product_ID’, ’Serial_No’, ’Date_IN’, ’RA_Scale’, ’Location’, ’Manager’, ’Operator’, ’Stage’\n"

    RecCount = 0

    Do While (drGet.Read())
        strData &= Convert.ToString(drGet.Item("Job_ID")) & ","
        strData &= Convert.ToString(drGet.Item("Client_ID")) & ","
        strData &= Convert.ToString(drGet.Item("Status_ID")) & ","
        strData &= Convert.ToString(drGet.Item("Product_ID")) & ","
        'strData &= DelimitTextQuotes(Convert.ToString(drGet.Item("Client_Ref"))) & ","
        strData &= DelimitTextQuotes(Convert.ToString(drGet.Item("Serial_No"))) & ","
        strData &= Format(drGet.Item("Date_IN"), "d") & ","
        'strData &= DelimitTextQuotes(Convert.ToString(drGet.Item("Notes"))) & ","
        strData &= Convert.ToString(drGet.Item("RA_Scale")) & ","
        strData &= DelimitTextQuotes(Convert.ToString(drGet.Item("Location"))) & ","
        strData &= DelimitTextQuotes(Convert.ToString(drGet.Item("Manager"))) & ","
        strData &= DelimitTextQuotes(Convert.ToString(drGet.Item("Operator"))) & ","
        strData &= Convert.ToString(drGet.Item("Stage")) & "\n"

        RecCount += 1
    Loop

    Return strData
End Function 
```

客户端以最普通的方式调用它：

```
function makeCall(){        
    var xmlHttp;
try {
        xmlHttp = new XMLHttpRequest();
    } catch (e) {
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                alert("This sample only works in browsers with AJAX support"); 
                return false;
            }
        }
    }

    // Create result handler 
    xmlHttp.onreadystatechange=function(){
        if(xmlHttp.readyState == 4){
            document.getElementById("result").value = xmlHttp.responseText;
        }
    }
         var url;
    url = "http://chpt.co.uk/Castus_Server/TransferToolData.asmx/GetJobRecords";
    var body = '{"ClientID":';
    body = body + document.getElementById("num1").value + '}';
    xmlHttp.open("POST", url, true);
    xmlHttp.setRequestHeader("Content-type", "application/json");
    xmlHttp.send(body);
} 
```

403 错误似乎来自客户端的 Preflight 请求（我注意到 IE 只是跳过了 - 这是一个*糟糕的设计错误*，我希望其他浏览器现在会降低自己的水平）。IIS Web 应用程序配置为返回以下 HTTP 标头：

```
Access-Control-Allow-Origin "*"
Access-Control-Allow-Headers  Origin,cache-control,man,messagetype,x-requested-with
Access-Control-Allow-Methods POST,OPTIONS 
```

Firefox 浏览器/服务器发送以下标头：

```
Request URL:
http://chpt.co.uk/Castus_Server/TransferToolData.asmx/GetJobRecords

Request Method:
OPTIONS

Status Code:
HTTP/1.1 403 Forbidden

Request Headers
15:05:03.984

  Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
  Accept-Encoding:gzip, deflate
  Accept-Language:en-gb,en;q=0.5
  Access-Control-Request-Headers:content-type
  Access-Control-Request-Method:POST
  Cache-Control:no-cache
  Connection:keep-alive
  Host:chpt.co.uk
  Origin:null
  Pragma:no-cache
  User-Agent:Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0

Response Headers
?1984ms

   Access-Control-Allow-Headers:Origin,cache-control,man,messagetype,x-requested-with
   Access-Control-Allow-Methods:POST
   Access-Control-Allow-Origin:*
   Access-Control-Max-Age:120
   Content-Length:1827
   Content-Type:text/html
   Date:Thu, 17 May 2012 14:04:54 GMT
   MicrosoftOfficeWebServer:5.0_PubServer:Microsoft-IIS/6.0
   X-Powered-By:ASP.NET 
```

现在我已经阅读了关于这个主题的“圣经”网页，[https://developer.mozilla.org/en/http_access_control#Access-Control-Allow-Methods][1] 并且学到了一些东西但不是解决方案我现在的问题。只是想知道是否有人能看到我哪里出错或指出我正确的方向。希望我没有让每个人感到无聊，并且我已经提供了足够的关于我的困境的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:02:07.397

很明显，似乎没有人知道这个问题，我不能再浪费时间了（我已经设计并提供了一个解决方案），我将关闭这个问题。使用 ScriptService() Web 服务时，跨站点 HTTP 请求 API 似乎只是一个小故障。我会在几个月后再试一次，看看问题是否已经“自行解决”！当我有解决方案时，我会在这里发布... Jim McGoldrick cablesafe.co.uk

# less - 如何在没有#的情况下在 LESS 中获得颜色？

> ID：10638092
> 
> 赞同：1
> 
> 时间：2012-05-17T14:51:04.283
> 
> 标签：less

我有一个服务，它返回一个可爱的 svg 渐变以在 IE 中使用，我正在尝试将它与这样的更少的 mixin 一起使用——

```
.Gradient(@start, @stop) {
  background-image: url("/imageService/GradientSvg?startColor=@{start}&endColor=@{stop}");
} 
```

问题是，这些颜色以 # 开头，这会截断服务器接收到的 url。

我需要一种在没有# 的情况下获取颜色的方法。我不介意它的 RGB 值或没有前缀的十六进制值。

我曾尝试使用这样的 javascript 调用对 # 进行 url 编码

```
 background-image: url(`"/shop/image/GradientSvg?startColor=@{start}&endColor=@{stop}".replace("#","%23")`); 
```

而且我认为它会起作用，除了我在服务器上进行的处理较少，并且以这种方式完成时它无法评估 javascript。

有什么想法可以以一种可以在 url 中使用的方式提取颜色吗？我对服务的工作方式很灵活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:44:56.643

这是我想出的解决方案。我使用颜色函数来应用一点点透明度。这确保了我总是以 RGBA 颜色结束，而不是以 # 开头。

```
.Gradient(@start, @stop) {
  @startRgb: fadeout(@start,1%);
  @stopRgb: fadeout(@stop,1%);
  background-image: url("/ImageService/GradientSvg?startColor=@{startRgb}&endColor=@{stopRgb}"); 
```

url 现在总是包含颜色的 rgba 符号，我的服务很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:03:12.257

如果您不介意每种颜色有两个变量，则可以使用该`color`函数来转换字符串：

```
@myColorString: "FFD700";
@myColor: color("#@{myColorString}"); 
```

使用您需要的任何变量。

```
color: @myColor;
background-image: url("/colors?color=@{myColorString}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:56:11.963

您可以将颜色作为字符串而不是颜色传递吗？所以当你调用你的 mixin 时，它看起来像这样？：

```
.Gradient("000000", "FFFFFF"); 
```

如果您需要将这些颜色定义为其他地方的颜色，您可以尝试使用反引号来解析 Javascript 中的值。所以它会是这样的：

```
@noHash: ~`"@{start}".substring(1)`; 
```

不过，我不确定将这些颜色值传递给 JS 时的外观。它们可能是颜色对象，需要转换为字符串。我想我得有时间试试……

# java - 从Java中的字符串中获取特定值

> ID：10638119
> 
> 赞同：-6
> 
> 时间：2012-05-17T14:52:33.623
> 
> 标签：java, regex, string

我想从字符串中获取一些值。例如：

```
String string= "Name: armand," + "Age: 22," + "etc"; 
```

例如，我如何使用正则表达式获取名称？

我对正则表达式很不好，所以我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:00:00.403

> 抱歉，它实际上看起来像这样名称：armand，年龄：22 等。但是我的正则表达式很糟糕，这对我来说很难解决。

给定`String s = "Name:armand,Age:22";`

这里有一个提示：

`s.split(",")[0].split(":")`会给你`armand`，

`s.split(",")[1].split(":")`会给你`22`

不需要正则表达式知识。

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。- 杰米扎温斯基

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:01:46.973

取决于您真正想要做什么，例如，如果您只想获取给定键的值，假设键和值用冒号分隔，键/值用逗号分隔，您可以以这种方式拆分字符串首先是逗号，然后是冒号：

```
String[] couple = string.split(",");

 for(int i =0; i < couple.length ; i++) {
    String[] items =couple[i].split(":");
    items[0]; //Key
    items[1]; //Value
} 
```

如果你想用正则表达式来做，你可以这样做：

```
 String string = "Name:armand,Age:22,";
    Pattern pattern = Pattern.compile("(\\w+?):(\\w+?),");
    Matcher matcher = pattern.matcher(string);
    while (matcher.find()) {
        String key = matcher.group(1);
        String value = matcher.group(2);

        System.out.println("Key : " + key + " value : " + value);
    } 
```

# c - 如何找出在 Linux 上使用 unix 域套接字连接的两个客户端之间缓冲的数据

> ID：10638124
> 
> 赞同：4
> 
> 时间：2012-05-17T14:52:48.183
> 
> 标签：c, sockets, unix

我有一个生产者和一个使用 Unix 域套接字连接的客户端。netstat -nap 命令显示 TCP/IP 套接字的两个进程之间缓冲的数据量，但不显示 Unix 域套接字的数据量

如何从代码外部找出 Unix 域套接字的发送缓冲区和接收缓冲区大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T00:40:55.990

netstat 不符合 POSIX 标准。这意味着您可能无法在不同的操作系统上运行 netstat 获得相同的信息。tcp/ip 缓冲区设置通常是默认系统设置。

您必须在两个盒子上登录才能运行 netstat 以获取套接字的 tcp 内部信息。我敢肯定你已经知道了，但我想澄清一下。从 Linux 到另一个操作系统，tcp 系统信息位于完全不同的位置，比如 Solaris。

`uname -a`UNIX 机器上 的输出是什么？

# arm - 什么是 ARM Thumb 指令集？

> ID：10638130
> 
> 赞同：58
> 
> 时间：2012-05-17T14:53:04.563
> 
> 标签：arm, thumb, instruction-set

在“ARM11TechnicalRefManual”第 1-34 节的“Thumb 指令集”下，它说：

“Thumb 指令集是最常用的 32 位 ARM 指令的子集。Thumb 指令的长度为 16 位，对应的 32 位 ARM 指令对处理器型号的影响相同。”

任何人都可以解释更多关于这个特别是第二句话的内容，并说处理器是如何执行它的吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-17T15:22:29.820

ARM 处理器有 2 个指令集，传统的 ARM 集，其中指令都是 32 位长，以及更精简的 Thumb 集，其中最常见的指令是 16 位长（有些是 32 位长）。开发人员可以选择运行哪个指令集，并且只能激活一组（即一旦处理器切换到 Thumb 模式，所有指令都将被解码为使用 Thumb 而不是 ARM）。

尽管它们是不同的指令集，但它们共享相似的功能，并且可以使用相同的汇编语言来表示。例如，指令

```
ADDS  R0, R1, R2 
```

可以编译为 ARM (E0910002 / 11100000 10010001 00000000 00000010) 或 Thumb (1888 / 00011000 10001000)。当然，它们执行相同的功能（添加 r1 和 r2 并将结果存储到 r0），即使它们具有不同的编码。这就是*Thumb 指令的含义是 16 位长，并且有对应的 32 位 ARM 指令，对处理器型号有相同的影响。*

Thumb 编码中的每条*指令在 ARM 中也有对应的编码，即“子集”语句的意思。

* * *

*: 不完全正确，ARM 中没有“IT”指令，尽管 ARM 无论如何都不需要“IT”（汇编器会忽略它）。

# iphone - 找出带有矩形字体的字符串的行数？

> ID：10638131
> 
> 赞同：0
> 
> 时间：2012-05-17T14:53:05.947
> 
> 标签：iphone, objective-c, ios, uitextview

我想找出一个字符串在设置为矩形内的字体时会有多少行。有没有办法做到这一点？

我有这段代码，但我试图让它处理得更快一点，因为它在滚动视图中被大量使用：

```
CGSize maximumSize = CGSizeMake(MESSAGE_FRAME.size.width - 16, 1000000);

    CGSize expectedSize = [message sizeWithFont:[UIFont fontWithName:@"Crimson" size:15]
                              constrainedToSize:maximumSize
                                  lineBreakMode:UILineBreakModeWordWrap];

return expectedSize.height; 
```

我知道这会返回行高：

```
NSLog(@"%f", [[UIFont fontWithName:@"Crimson" size:15] lineHeight]); 
```

因此，如果我可以将其乘以另一个值，它可能会更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:16:32.893

我想不出另一种选择，而且我怀疑是否会有一种效率更高的方法（毕竟，有什么魔法可以达到行数并避免自动换行计算？）。

无论如何，与其缩短计算周期而不是伤害我们的大脑，考虑是否需要在视图滚动时一遍又一遍地完成。我的猜测是否定的。

我认为加快速度的方法是进行传统的大小计算并缓存结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:17:31.017

我不知道有什么不同的方法，但我有一个小建议，我在表格视图中的类似案例中做了。如果您的数据存储在某处（在我的情况下，我从网络接收文本并将其存储在数据库中），我仅在第一次收到文本时使用这种方式计算大小，然后存储此答案。加载数据时，我将大小放入数组中，以便快速检索值。

只是一个建议，希望对你有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-04T22:06:58.083

对于iOS7及以上，[官方认可的方式](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/TextLayout/Tasks/CountLines.html)是使用TextKit：

```
func numberOfLinesForString(string: String, size: CGSize, font: UIFont) -> Int {
    let textStorage = NSTextStorage(string: string, attributes: [NSFontAttributeName: font])

    let textContainer = NSTextContainer(size: size)
    textContainer.lineBreakMode = .ByWordWrapping
    textContainer.maximumNumberOfLines = 0
    textContainer.lineFragmentPadding = 0

    let layoutManager = NSLayoutManager()
    layoutManager.textStorage = textStorage
    layoutManager.addTextContainer(textContainer)

    var numberOfLines = 0
    var index = 0
    var lineRange : NSRange = NSMakeRange(0, 0)
    for (; index < layoutManager.numberOfGlyphs; numberOfLines++) {
        layoutManager.lineFragmentRectForGlyphAtIndex(index, effectiveRange: &lineRange)
        index = NSMaxRange(lineRange)
    }

    return numberOfLines
} 
```

# c++ - boost::interprocess::map - 如何使用 basic_string 作为类型更新值

> ID：10638134
> 
> 赞同：1
> 
> 时间：2012-05-17T14:53:14.237
> 
> 标签：c++, map, allocation, boost-interprocess, stdstring

我有以下代码：

```
 typedef managed_shared_memory::segment_manager segment_manager_t;
    typedef allocator<void, segment_manager_t> void_allocator;
    typedef allocator<char, segment_manager_t> char_allocator;
    typedef basic_string<char, std::char_traits<char>, char_allocator> char_string;
    typedef std::pair<const char_string, char_string> map_value_type;
    typedef allocator<map_value_type, segment_manager_t>  map_value_type_allocator;
    typedef map< char_string, char_string, std::less<char_string>, map_value_type_allocator>  complex_map_type;

........

           managed_shared_memory segment(open_only,shm_name.c_str());

           //An allocator convertible to any allocator<T, segment_manager_t> type
           void_allocator alloc_inst (segment.get_segment_manager());

               complex_map_type *myMap = segment.find_or_construct<complex_map_type>("myMap")(std::less<char_string>(), alloc_inst);

              //Here I am trying to update value. Key exists in the map.
               (*myMap)[char_string(key.c_str(), alloc_inst)] = char_string(val.c_str(), alloc_inst); 
```

谁能给我最后一行的正确语法？最后一行给了我一个编译错误。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:47:54.183

我已经得到了答案。

```
char_string key(var.c_str(), alloc_inst);
complex_map_type::iterator it = myMap->find(key);

if( it != myMap->end() )
 (*it).second = char_string(new_value.c_str(), alloc_inst); 
```

# macos - CGContextClip() 使用反向路径

> ID：10638136
> 
> 赞同：6
> 
> 时间：2012-05-17T14:53:22.240
> 
> 标签：macos, cocoa, quartz-graphics, macos-carbon

我想在我的上剪裁绘图，`CGContext`但我需要它，即我想在我的剪裁路径中添加几个矩形，`CGContextAddRect()`并且剪裁应该以我添加到剪裁中的所有矩形的方式完成路径不受任何绘图操作的影响。通常，它只是相反的方式，即绘图函数绘制到已添加到剪切路径的矩形，而未添加到剪切路径的区域不受影响。所以我想我需要的只是一种在调用`CGContextClip()`. 回到 QuickDraw 时代，这可以通过使用区域然后调用来轻松完成`XorRgn()`对于每个矩形。但是使用 Quartz 似乎更复杂。有没有人有一个简单的解决方案来实现这一点，或者我是否需要自己进行所有这些路径反转计算？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:18:47.563

您可以将整个边界添加为矩形，然后添加要从绘图中排除的矩形并使用`CGContextEOClip`.

例子：

```
- (void)drawRect:(NSRect)dirtyRect
    CGContextRef ctx = [[NSGraphicsContext currentContext] graphicsPort];
    //Fill the background with gray:
    CGContextSetRGBFillColor(ctx, 0.5, 0.5, 0.5, 1);
    CGContextFillRect(ctx, NSRectToCGRect(self.bounds));
    CGContextAddRect(ctx, NSRectToCGRect(self.bounds));
    //Add some rectangles:
    CGContextAddRect(ctx, CGRectMake(10, 10, 100, 100));
    CGContextAddRect(ctx, CGRectMake(120, 120, 50, 100));
    //Clip:
    CGContextEOClip(ctx);
    //Fill the entire bounds with red:
    CGContextSetRGBFillColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextFillRect(ctx, NSRectToCGRect(self.bounds));
} 
```

如果您在最后绘制图像而不是填充红色矩形，效果会变得更加明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:51:57.840

一种方法是将剪切路径绘制到位图上下文，反转生成的位图，并通过调用将其用作原始图像上的蒙版[`CGContextClipToMask()`](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html)。

# image - AS3 / AIR / Mobile - 将位图保存到文件

> ID：10638137
> 
> 赞同：5
> 
> 时间：2012-05-17T14:53:30.073
> 
> 标签：image, actionscript-3, bitmap, bitmapdata

我认真地到处寻找，但找不到解决方案。我的应用程序很容易将 UTF 字节保存为 XML 文件在 iOS 和 Android 允许的缓存位置。

但我不知道如何将 Bitmap / BitmapData 保存到同一缓存文件夹中的文件中。创建文件很好....

```
_fs.open(_f, FileMode.WRITE);

//What goes in here to save the Bitmap?

_fs.close(); 
```

对此的任何帮助将不胜感激。

谢谢

更新：代码如下...

```
 _smallLogo = Bitmap(_loader.content);
        //this.addChild(_smallLogo);

        var jpg:JPGEncoder = new JPGEncoder(100);
        var bd:BitmapData = new BitmapData(_smallLogo.width, _smallLogo.height);
        bd.draw(_smallLogo);
        var ba:ByteArray  = jpg.encode(bd);

        //3
        _fs.open(_f, FileMode.WRITE);
        _fs.writeBytes( ba, 0, ba.length );         
        _fs.close(); 
```

* * *

更新 - 已回答

```
//SAVE
_smallLogo = Bitmap(_loader.content);           
var jpg:JPGEncoder = new JPGEncoder(100);
var ba:ByteArray  = jpg.encode(_smallLogo.bitmapData);

_fs.open(_f, FileMode.WRITE);
_fs.writeBytes( ba, 0, ba.length );         
_fs.close(); 
```

* * *

```
//OPEN
private function getLogo():void {
    var ba:ByteArray = new ByteArray();

    _fs.open(_f, FileMode.READ);
    _fs.readBytes(ba);          
    _fs.close();

    var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, getBitmapData);
    loader.loadBytes(ba);
}

private function getBitmapData(e:Event):void {
    var decodedBitmapData:BitmapData = Bitmap(e.target.content).bitmapData;
    var newBMP:Bitmap = new Bitmap();
    newBMP.bitmapData = decodedBitmapData;

    this.addChild(newBMP);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T14:12:59.950

如果您正在写入设备缓存并且更关心速度而不是文件大小，您可以考虑使用：

```
bd.encode(bd.rect, new PNGEncoderOptions(true), ba); 
```

请注意，如果没有 fastCompression = true，png 编码器比 jpeg 编码器慢

有关 as3 png 编码性能的更多信息在[这里](http://jacksondunstan.com/articles/2143)

如果您首先需要速度（对于编码和解码），您可以以原始格式编写位图数据，如果您已经知道大小，则没有标头，或者如果您想嵌入图像大小并允许更轻松查看，则使用 bmp 等基本标头你的缓存

顺便说一句，我不确定你为什么首先需要重新编码位图：看起来位图已经来自加载器，所以`_loader.contentLoaderInfo.bytes`应该已经为你提供了刚刚加载的文件的 ByteArray，它应该已经编码，并且将避免对可能已经压缩的文件进行有损压缩。

# mysql - MySQL在列搜索中选择

> ID：10638143
> 
> 赞同：0
> 
> 时间：2012-05-17T14:53:53.943
> 
> 标签：mysql, search, sql

我有一个表格，其中包含如下数据。我想获取包含在类别列“2”中的行？我应该如何设置查询？我需要它来更新行。类别列具有“文本”类型。

```
id  category
-------------------
13  -1-,
14  -2-,
15  -1-,-2-,-3-,-4-,
16  -2-,-4-, 
```

更新后数据应该是这样的：

```
id  category
-------------------
13  -1-,
14  -5-,
15  -1-,-5-,-3-,-4-,
16  -5-,-4-, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:56:03.050

像这样选择这些类别：

```
select * from your_table where category like '%-2-%' 
```

但是您的示例看起来像是要替换`2`为`5`. 可以这样做：

```
update your_table set category = replace(category, '-2-', '-5-') 
```

这样你就不需要`where`从句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:55:43.873

```
SELECT *
FROM tablename
WHERE category LIKE '%-2-%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:55:58.713

```
SELECT * FROM table WHERE category LIKE '%2%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:56:04.750

```
SELECT * FROM table WHERE category like '%-2-%' 
```

# c# - .net SiteMap 菜单显示

> ID：10638146
> 
> 赞同：2
> 
> 时间：2012-05-17T14:53:58.553
> 
> 标签：c#, asp.net, sitemap

我的站点有一个菜单，使用站点地图文件和角色提供程序根据角色生成链接。

手动创建菜单时，链接如下所示：

```
Link1 | Link2 | Link3 | etc... 
```

现在它在悬停类型的菜单上，这是我不想要的：

```
Link1
  |___ Link2___Link3
  |___ Link4 
```

我怎样才能让它看起来像第一种类型？

我第一次使用站点地图进行菜单导航，所以不太清楚如何创建`<siteMapNodes>`

我认为这是由于：

`<siteMapNode url="~/Reporting.aspx" title="Reporting" description="" roles="MyRole" > <siteMapNode url="~/Auditing.aspx" title="Auditing" description="" roles="MyRole"/> <siteMapNode url="~/TeamManager.aspx" title="Team Manager" description="" roles="MyRole"/> </siteMapNode>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:12:28.330

如果站点地图代码中的 XML 是嵌套的，则站点地图将嵌套项目。

以下将显示：
Link1 | 链接2 | 链接3

```
 <siteMapNode url="Link1Url" title="Link1" />
    <siteMapNode url="Link2Url" title="Link2" />
    <siteMapNode url="Link3Url" title="Link3" /> 
```

以下将显示：
Link1
   |-Link2
   |-Link3

```
 <siteMapNode url="Link1Url" title="Link1">
        <siteMapNode url="Link2Url" title="Link2" />
        <siteMapNode url="Link3Url" title="Link3" />
    </siteMapNode> 
```

您的完整 Web.sitemap 将如下所示：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" enableLocalization="true" >
        <siteMapNode url="~/" title="Home">
            <siteMapNode url="Link1Url" title="Link1" />
            <siteMapNode url="Link2Url" title="Link2" />
            <siteMapNode url="Link3Url" title="Link3" />
        </siteMapNode>
    </siteMap> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:26:29.210

如果您使用的是菜单类结构，我还建议使用 jQuery 插件从站点集合构建导航。

# dynamics-crm-2011 - CRM 2011 Post Operation Plugin - 尝试保存引用实体时不存在主实体

> ID：10638152
> 
> 赞同：4
> 
> 时间：2012-05-17T14:54:28.387
> 
> 标签：dynamics-crm-2011

我正在尝试为现场 Dynamics CRM 2011 安装创建一个插件。

我已将插件注册如下：

*   消息：创建
*   主要实体：联系人
*   执行阶段：术后
*   执行方式：同步
*   执行顺序：1

插件代码如下：

```
public void Execute(IServiceProvider serviceProvider)
{
    var pluginExecContext = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));

    var orgServiceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
    var orgService = orgServiceFactory.CreateOrganizationService(pluginExecContext.UserId);
    var orgServiceContext = new OrganizationServiceContext(orgService);

    var tracingService = (ITracingService)serviceProvider.GetService(typeof(ITracingService));

    if (pluginExecContext.InputParameters.Contains("Target") &&
            pluginExecContext.InputParameters["Target"] is Entity)
    {
        var target = (Entity)pluginExecContext.InputParameters["Target"];

        if (target.LogicalName != Contact.EntityLogicalName) 
            return;

        try
        {
            var customerServicesUser = orgServiceContext.CreateQuery(SystemUser.EntityLogicalName)
                .Where(x => (string)x["fullname"] == "Customer Services").FirstOrDefault();

            if (customerServicesUser == null)
                throw new InvalidPluginExecutionException("No Customer Services user exists.");

            var sendEmail = new cdi_sendemail
                {
                    cdi_fromrecordowner = false,
                    cdi_contactid = new EntityReference(Contact.EntityLogicalName, pluginExecContext.PrimaryEntityId),
                    cdi_fromid = new EntityReference(SystemUser.EntityLogicalName, customerServicesUser.Id)
                };

            tracingService.Trace("PostContactCreate plug-in: Creating the cdi_sendemail entity.");
            orgService.Create(sendEmail);
        }
        catch (FaultException<OrganizationServiceFault> ex)
        {
            throw new InvalidPluginExecutionException("An error occurred in the PostContactCreate plug-in.", ex);
        }
        catch (Exception ex)
        {
            tracingService.Trace("PostContactCreate plug-in: {0}", ex.ToString());
            throw;
        }
    }
} 
```

当我使用 pluginregistration 工具分析插件并调试故障异常时，我收到以下错误：

> 联系人 ID = abbc7e0a-20a0-e111-a36e-005056860004 不存在。

我有点理解，因为插件在尚未提交的 SQL 事务中执行。CRM SDK 示例中的“FollowupPlugin”也创建了一个引用实体，它声明它需要异步注册，这也是有意义的，因为这允许 SQL 事务提交。

所以我想我的问题是，如何在同步插件中创建引用实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:49:09.603

查看[SDK 示例以获得非常相似的示例](http://msdn.microsoft.com/en-us/library/gg594416.aspx)- 我认为您需要在沙箱中注册。

> 为帐户实体、在 Create 消息上和异步模式下注册此插件。**或者**，您可以**在沙箱中的后期事件上注册插件**。

# c# - 从子窗体中获取 CheckBox 值

> ID：10638153
> 
> 赞同：0
> 
> 时间：2012-05-17T14:54:35.073
> 
> 标签：c#, winforms

我有一个 mainForm 和所有者表单 cameraViewVS(child)。我在第二种形式中有一个复选框，当我选中或取消选中时，我想在第一种形式中检索它的值，我在 mainForm 中使用了这样的 propertyName

```
public bool propertyZoomCam
{
  get { return f1.checkBoxZoomCam.Checked; }
} 
```

当我只显示一次 f2 的实例时，我在 f1 中调用此属性。

```
public void timer()
{
  for (int l = 0; l < 2; l++)        
  {            
    cameraInstance[l].Start();
    if (cameraInstance[l].MoveDetection == true)
    {
      foreach (Form S in Application.OpenForms)
      {
        var frm = S as Formes.CameraViewVS;
        if (frm != null && frm.Addresse == cameraInstance[l].adresse) {
          // Match, activate it
          cameraInstance[l].MoveDetection = false;
          frm.WindowState = FormWindowState.Normal;
          frm.Activate();
          return;
        }
      }
      // No match found, create a new one
      var f1 = new Formes.CameraViewVS(cameraInstance[l], adresseIPArray[l]);
      f1.Show(this);
      if(propertyZoomCam)
        zoom = 15;
    }
  }
} 
```

我只检索第一个假值，因为它的开始值是假的，当我更改检查或取消选中时，我不会检索它的值。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:48:25.340

在代码中进行以下更改：

1.  在表单级别声明一个变量，该变量将保存对子表单的引用。

2.  现在将 Timer 函数中的变量 f1 和 frm 替换为 frmCamera，并且不要在 timer 函数中声明变量 f1 和 frm。

3.现在更新属性代码。

```
Formes.CameraViewVS frmCamera;

public bool propertyZoomCam
{
    get 
    {
        if (frmCamera!=null)
            return frmCamera.checkBoxZoomCam.Checked; 
        else 
            return false;
    }
}

public void timer()
{
  for (int l = 0; l < 2; l++)        
  {            
    cameraInstance[l].Start();
    if (cameraInstance[l].MoveDetection == true)
    {
      foreach (Form S in Application.OpenForms)
      {
        frmCamera = S as Formes.CameraViewVS;
        if (frmCamera != null && frmCamera.Addresse == cameraInstance[l].adresse) {
          // Match, activate it
          cameraInstance[l].MoveDetection = false;
          frmCamera.WindowState = FormWindowState.Normal;
          frmCamera.Activate();
          return;
        }
      }
      // No match found, create a new one
      frmCamera = new Formes.CameraViewVS(cameraInstance[l], adresseIPArray[l]);
      frmCamera.Show(this);
      if(propertyZoomCam)
        zoom = 15;
    }
  }
} 
```

当再次触发计时器事件时，您丢失了相机表单的引用，所以现在我们将表单存储在属性中使用的同一对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:36:44.763

您应该在此处查看一些 oif 事项：

1.  如上面的答案所述，您在属性代码中引用了一个局部变量。这仅在您访问该变量创建范围内的属性时才有效，这大大限制了您希望实现的使用。我不会说你永远不应该这样做，但我想不出一个有效的用例。
2.  对 Show() 的调用会创建一个无模式表单并立即返回，因此除非 onload 代码修改复选框的状态，否则它几乎不会与创建时的状态有任何不同，您已经知道了。
3.  最后，对于您的最终目标而言，最重要的是，使用计时器可能是处理复选框更改的一种低效方式。如果您希望您的应用程序在单击子表单中的复选框时在父表单中做出反应，您需要使用事件。当子窗体检测到用户更改了复选框的状态时，它应该触发一个事件。主窗体可以监听这个事件并做出适当的响应，而不是等待下一个定时器周期。您应该阅读*事件*和*委托*来实现这一点。关于 SO 有很多问题可以解决这些技术。

# codeigniter - 尊重 MVC 框架

> ID：10638154
> 
> 赞同：0
> 
> 时间：2012-05-17T14:54:39.607
> 
> 标签：codeigniter, controller

我正在使用[CodeIgniter 框架](http://codeigniter.com/)来构建一个 Web 应用程序，如下所示。

我的默认控制器是这样的，

```
class Start extends CI_Controller {
    public function index() 
    {  
        $view_data = array(
            'foo' => 'bar',
            'top_bar_view' => 'top_bar_view',
            'top_bar_params' => array(
                'param1' => 'val1',
                'param2' => 'val2',
                'param3' => 'val3', 
                'param4' => 'val4',
                'param5' =>  'val5'
            )
        );
        $this->load->view('main_view', $view_data);
    }
} 
```

它加载 main_view，这是一种母版页，我在其中加载我使用 $view_data 传递的视图文件。

然后，在这个 top_bar_view 上，我想调用一个控制器，以便根据一些数据构建一个菜单。现在，我在这个局部视图中使用 AJAX 调用来完成此操作。

```
script type="text/javascript">
    $(function() {
        $.post('index.php/menu/givemenu', {}, function(data) { 
             $('#topMenuBar').append(data); });
        });

<img alt="alt_data" src="assets/img/<?php echo $image_name; ?>" />
<div>
    <img alt="<?php echo $descricao_editora; ?>" src="assets/img/<?php echo $image_name; ?>" />
</div>
<div class="divSpacer20pxRight"></div>
<div class="divTituloProduto">
    <?php echo $titulo_produto; ?>
</div>
<div class="clear"></div>
<div id="topMenuBar" class="divTopMenuBar"></div>
<div class="clear"></div> 
```

这是否正确并尊重 MVC 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:06:29.657

我个人不喜欢这种解决方案，但“它是否正确”是相对的，但我会创建一个`MY_Controller`从我所有其他控制器扩展的方法并添加该`givemenu`方法，以便我可以从所有控制器调用它。在您的控制器`index`方法上，您调用它并将其返回添加到您的数组并将其传递给视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:57:33.997

有很多方法可以做到这一点。为什么不创建一个帮助程序或库来完成您的 givemenu 方法的工作？

或者使用像 Lex 这样的模板解析器？[https://github.com/happyninjas/lex](https://github.com/happyninjas/lex)

如果您只包含一些内容，它将使您的控制器和视图更易于维护，并且意味着您不必依赖 JavaScript。

# android - 在 android 模拟器中安装 .apk 时出错

> ID：10638159
> 
> 赞同：1
> 
> 时间：2012-05-17T14:54:56.063
> 
> 标签：android, eclipse, apk

我是android开发的新手。我已经安装了 eclipse 并更新了所有的 android 包。现在我正在尝试运行我的应用程序开发人员提供的 .apk 文件以在模拟器中对其进行测试。

我通过网络下载安装它。下载软件包后，当我单击它时，它会显示“正在安装”。然后它说未安装。该应用程序在我的手机上运行良好。但我想用不同的屏幕分辨率和尺寸、屏幕截图等来测试它。

我已经用从 2.3 到 4.0 的几个不同的模拟器进行了尝试，我得到了同样的错误。
我在mac上运行eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:07:05.617

如果您在模拟器中下载 apk，然后尝试将其直接安装在模拟器中，则可能是因为模拟器不包含 Android Market（现在是 Google Play）的问题。

先在你的Mac上下载apk，然后使用adb安装，如下：

```
adb install <apk_file> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:11:34.540

从模拟器中卸载应用程序后，打开终端并进入安装 android-sdk 的目录，然后转到平台工具。`adb install yourAppName.apk` 如果失败，请给出命令发布错误日志。（要查看错误日志，请打开另一个终端并转到 android-sdk-installation 目录 > 平台工具，输入命令`adb logcat`。在安装 apk 时保持日志运行。）

# input - Opera输入滚动字幕？

> ID：10638161
> 
> 赞同：1
> 
> 时间：2012-05-17T14:54:59.757
> 
> 标签：input, cross-browser, opera, marquee

我`type='submit'`在具有固定宽度（但不是固定高度）的 div 中有一个输入（）。在所有浏览器中，文本都会换行，除了 Opera，其中所有文本都在一行上，并且溢出是隐藏的（即使设置`overflow:visible`也不能解决这个问题）。

然而，我发现了一些奇怪的事情，当我试图选择输入的内容时，它开始滚动！这是 Opera 中的一些奇怪之处吗？我在任何地方都找不到它的记录。我无法在任何其他浏览器上复制此行为。我们在网站上确实有一些 jQuery，但没有滚动选取框，也没有影响这个元素。此刻我的脑海里充满了WTF！

HTML：

```
<li class="last">
  <input id="product-renewal" name="product" type="submit" value="Quite a long bit of text in here"/>
</li> 
```

CSS：

```
li.last{
  flat:left;
  display: list-item;
  list-style-type:none;
  text-align:left;
}
input{
  border: 0;
  margin: 1px 0;
  padding: 125px 0 10px;
  white-space: normal;
  overflow: visible;
  width:150px;
} 
```

我剪了一点，但这是应该相关的一切。

我已经检查了 JS 是否关闭：它仍然可以，所以这绝对是一些原生的歌剧行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:40:56.330

哇，这是一些时髦的行为。我的意思是，我想这很酷，因为它会在输入按钮上向您显示全文，但它非常古怪。我假设您正在用图像替换按钮，并且您需要它具有特定的大小？

这给了我在 Opera 和 Chrome 中相同的行为。除此之外没有测试。

[http://jsfiddle.net/nLS9M/2/](http://jsfiddle.net/nLS9M/2/)

```
<ul>
    <li class="last">
        <button id="product-renewal" name="product" type="submit">Quite a long bit of text in here</button>
    </li>
</ul>

li.last{
  flat:left;
  display: list-item;
  list-style-type:none;
  text-align:left;
}
button{
  border: 0;
  margin: 1px 0;
  padding: 125px 0 10px;
  white-space: normal;
  overflow: visible;
  width:150px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:10:55.183

这是 Opera 中的一个已知问题/错误。（我在“我知道”中说“已知”，我想这不是“众所周知”:-)）

Opera 不支持多行自动换行`<input type="button">`或 type=submit，但会滚动到焦点溢出的文本。

# ios - ARC 的编译器指令

> ID：10638163
> 
> 赞同：2
> 
> 时间：2012-05-17T14:55:01.290
> 
> 标签：ios, ios5, automatic-ref-counting

如何放置编译器指令以排除非 ARC 代码，以便共享代码可用于使用 ARC 的项目和不使用 ARC 的项目？

例如：

```
MyClass *myClass = [MyClass alloc]init];
...

#if NOT_USING_ARC 

[myClass release];

#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T02:20:27.803

您可以使用：

```
#if __has_feature(objc_arc)
    ...
#else
    ...
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:02:05.410

有一个重构可以将你的类转换为与 ARC 兼容。

在 XCode 菜单中：编辑 - 重构 - 转换为 Objective-C ARC。

另一种选择是通过`-fno-objc-arc`为这些文件添加编译器标志来禁用单个文件的 ARC。

您在 Targets -> Build Phases -> Compile Sources 中添加编译器标志。您必须双击编译器标志下行的右列。您也可以通过按住 cmd 按钮选择文件，然后按 Enter 调出标志编辑框，将其添加到多个文件中。

# sql-server - 客户端-服务器数据库应用程序：如何通知客户端数据已更改？

> ID：10638164
> 
> 赞同：9
> 
> 时间：2012-05-17T14:55:03.613
> 
> 标签：sql-server, delphi, client-server

是否有可能知道数据库中某些表的内容何时以及是否发生了变化？我的 SQL Server 如何通知客户端应用程序数据已被其他用户更改？如何使用 dbGo 实现查询通知？

我的客户是否需要轮询数据库，或者是否有回调机制？

我的客户端是一个 Delphi 应用程序`TADODataSet`，我的服务器是 SQL Server 2005/2008，为多个客户端提供服务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T13:24:46.233

[`Delphi dbGo`](http://docwiki.embarcadero.com/RADStudio/en/DbGo_Overview)控件不支持，因此[`Query Notifications`](http://msdn.microsoft.com/en-us/library/ms130764.aspx)要么轮询数据库，要么尝试检查以下内容：

*   [`WMI Provider for Server Events - MSSQL Service Broker`](https://stackoverflow.com/questions/7843019/how-to-use-sqlserver-service-broker-sqlnotifications-with-delphi7)
*   [`DA-SOFT AnyDAC TADEventAlerter component - Query Notifications mechanism`](http://www.da-soft.com/anydac/docu/frames.html?frmname=topic&frmfile=uADCompClient_TADEventAlerter.html)
*   [`Devart SDAC TMSChangeNotification component - Query Notifications mechanism`](http://www.devart.com/sdac/components.html#tmschangenotification)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:47:00.373

不，您必须建立自己的“中间层”才能做到这一点。最简单的方法是轮询服务器。一个更复杂的解决方案是构建您自己的“中间层”服务器，该服务器轮询数据库并将通知推送到客户端（使用您自己的客户端连接）。

一个中间解决方案是在服务器上有一个单独的客户端轮询您需要“监视”的表并将“通知标志”写入另一个可由客户端轮询的数据库表。至少通过这种方式，客户端可以使用最少的数据轮询一个简单的表，该表列出了已更改的内容，然后可以由另一个选择查询读取。客户方面的努力要少得多。

# css - Firefox 中的垂直居中

> ID：10638168
> 
> 赞同：0
> 
> 时间：2012-05-17T14:55:16.260
> 
> 标签：css

我有一个非常简单的按钮。当您在 Safari 或 Chrome 中看到该文本时，该文本垂直居中显示为正方形。但是在 Firefox 中，文本不是垂直居中的（它向下看）如何解决这个问题？

[http://jsfiddle.net/yyL5T/5/](http://jsfiddle.net/yyL5T/5/)

HTML：

```
<div class="buy">mmmmm</div> 
```

CSS：

```
body {
  font-family:Tahoma;
  color:#fff; 
  font-size:11px; 
  letter-spacing:1px;
}

.buy {
  position:absolute;
  width: 70px;
  height: 20px;
  line-height:20px;
  top:50px;
  left:50px;
  text-align:center;
  background-color:#bbb;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:06:09.927

```
.comprar {
    position:absolute;
    top:50px;
    left:50px;
    text-align:center;
    background-color:#bbb;
    padding: 5px 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:26:59.090

当 div 不是很高时，Firefox 似乎有一些问题使文本居中。（我不知道为什么）。在这种特定情况下： font-family: Tahoma; 字体大小：11px；如果我们希望它在 div 中很好地居中，则 div 需要为 23px 或更大

```
.buy {
  position:absolute;
  width: 70px;
  height: 25px; /* this is what changes */
  line-height:25px; /* this is what changes */
  top:50px;
  left:50px;
  text-align:center;
  background-color:#bbb;
} 
```

在这里玩：http: [//jsfiddle.net/yyL5T/8/](http://jsfiddle.net/yyL5T/8/)

# sql-server - 避免在查询中重复 SQL 片段？

> ID：10638176
> 
> 赞同：1
> 
> 时间：2012-05-17T14:55:44.457
> 
> 标签：sql-server, sql-server-2008

我有这个查询（伪代码）

```
SELECT 
    a = 1,
    b = 2,
    c = CASE 
            WHEN ISNULL(
                         (SELECT MONTH(GETDATE()) <---long query
                         ), 0) = 0 THEN 'found'
            ELSE 
              SELECT MONTH(GETDATE())     <--- repeated long query
        END 
```

问题是`SELECT MONTH(GETDATE())`which 实际上是很长的查询。

这个“长表达式”是否有任何解决方法不在查询中出现两次？

ps

我有一个计算`SELECT MONTH(GETDATE())`外部变量的解决方案......但我试图弄清楚是否有一个内联解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:59:05.553

您有多种选择：

*   用户定义函数 (UDF)
*   意见
*   公用表表达式 (CTE)
*   交叉/外部应用

根据处理数据的方式，将确定哪个是最合适的。您的问题没有提供足够的细节来明确提供建议，但这些值得一看。

使用 UDF 时要小心，因为它们会很快影响性能。我个人的经验法则是为简单的数据转换或数学计算编写一个 UDF。我尽量避免在函数中执行复杂的基于集合的操作，并且更喜欢视图或 CTE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T06:49:51.553

您的示例中子查询的特定使用模式可以这样重写：

```
…
c = COALESCE(CAST(NULLIF((*subquery*), 0) AS varchar(10)), 'found')
… 
```

正如 Mikael Eriksson 在他的评论中正确指出的那样，您可能需要使用`ISNULL`而不是`COALESCE`here，因为其中一个参数包含一个子查询，并且`ISNULL`在这种情况下可能（或者实际上将）更有效，如您所见详细说明在[这个答案](https://stackoverflow.com/questions/10668140/isnull-and-coalesce-proper-usage/10669660#10669660)中。

所以这是固定版本：

```
…
c = ISNULL(CAST(NULLIF((*subquery*), 0) AS varchar(10)), 'found')
… 
```

但是请注意，如果您最终切换到，如果您决定更改它`ISNULL`，则应该注意第二个字符串 ( ) 的长度。`'found'`问题是，`ISNULL`将（尝试）将第二个参数转换为第一个参数的确切类型，包括指定字符串的最大长度（`10`在这种情况下）。如果您的第二个参数变为类似于`'NULL or zero is found'`而不是 just `'found'`，`ISNULL`则不会返回整个字符串，而是仅返回前 10 个字符 ( `'NULL or ze'`)。因此，您还需要记住更改第一个参数的类型（`varchar(20)`例如，更改为 ）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T19:42:44.370

```
SELECT 
    a = 1,
    b = 2,
    c = CASE 
            WHEN ISNULL([l], 0) = 0 THEN 'found'
            ELSE [l]
        END
from tbl
cross apply (
SELECT MONTH(GETDATE()) as [l]
) as [x] 
```

此外，如果您的原始查询代表您实际获得的内容（即，如果“长表达式”返回 null，则返回一个值），请考虑使用`COALESCE`case 语句而不是 case 语句。或者只是使用`ISNULL([l], 'found')`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T15:03:31.843

使用 CTE 的示例

```
;WITH CTE AS
(
    SELECT CASE WHEN ISNULL(MONTH(GETDATE()),0) = 0 
    THEN 'FOUND' ELSE  ISNULL(MONTH(GETDATE()),0) END Col1
),
SELECT a = 1,b = 2, C = col1
FROM Table1, CTE 
```

如果你有任何钥匙，可以用来加入

```
SELECT a = 1,b = 2, C = CASE WHEN ISNULL(v.col1,0) = 0 THEN 'Found' ELSE v.col1 END
        FROM Table1 a
OUTER APPLY (SELECT ISNULL(MONTH(DateCol),0) Col1 FROM TABLEName b
                a.id = b.id) v 
```

# mongodb - 将所有条目的字段值更新为单个值 - mongodb

> ID：10638178
> 
> 赞同：0
> 
> 时间：2012-05-17T14:55:46.087
> 
> 标签：mongodb

我有一个叫做人的集合和一个叫做语言的领域。

我想将所有条目的“语言”字段值更新为“英语”。

我跑了

> db.people.update({}, { $set : { "language" : "english" }});

我收到此错误

> E11000 重复键错误索引：country.people.$RK_INDEX 重复键

谁能告诉我实现这一目标的正确方法。

问候伊苏鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:19:42.003

你可能想要：

```
db.people.update({}, {$set: {"language": "english"}}, false, true); 
```

其中 false 是“upsert”，true 是“multi”（允许更新多个记录）。

您在该字段上有唯一索引吗？（这是我能想到的唯一原因会导致您的错误。）如果是，它可能不应该是唯一索引。

# com - 注册免费 COM 并单击一次 Winform

> ID：10638186
> 
> 赞同：0
> 
> 时间：2012-05-17T14:56:03.053
> 
> 标签：com, clickonce

我已经阅读了这里的许多问题，但似乎没有一个符合要求，所以这里是：

我正在尝试将第 3 方 COM dll 集成到我们的 clickonce 部署应用程序中：

我必须使用第 3 方提供的 TLB（使用 tlbimp）生成互操作程序集。当 COM dll 被注册时，这个程序集与 COM dll 一起工作得很好。未注册时，您会按预期获得异常。[然后，我使用此处](http://msdn.microsoft.com/en-us/library/ms973913.aspx)描述的无注册方法来生成清单文件。这解决了我本地机器上的问题。

现在问题来了。Clickonce 部署失败，并显示“xxx.manifest 文件已存在。我使用了 brendan_maclean 的复制[方法](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/ee94b07c-28de-4728-8e1e-37fd66e5f3d5)来解决问题：dll。但我无法让它适用于清单文件。

有没有人有任何想法？我不想在更改清单以删除清单的额外链接后辞职。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:16:22.330

好的，所以问题是我遵循的教程不适用于无注册 COM，因为您在应用程序的清单中手动创建清单条目。真正需要发生的是，您创建的 sxs 清单必须由项目引用，就像您引用任何其他程序集（即项目->引用）一样。

这样，构建过程将链接添加到清单本身。

# c# - 显示标记 Google Map API 的标签

> ID：10638195
> 
> 赞同：1
> 
> 时间：2012-05-17T14:56:27.577
> 
> 标签：c#, wpf, actionscript-3, flash

我的 WPF 应用程序将 Flash API 用于谷歌地图。一切正常，除了当用户点击气球时我需要显示一些自定义细节。

动作脚本代码如下：

```
var map:Map = new Map(); 
map.key = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"; 
map.sensor = "true"; 
var marker : Marker; 
map.setSize(new Point(stage.stageWidth, stage.stageHeight)); 
map.addEventListener(MapEvent.MAP_READY, onMapReady); 
this.addChild(map);  

var CustN:String;

function onMapReady(event:Event):void 
{   
    var centerLL : LatLng = new LatLng(38.05,-77.036562); 
    map.setCenter( centerLL, 10, MapType.NORMAL_MAP_TYPE); 
    map.addControl(new ZoomControl());
    map.addControl(new PositionControl()); 
    map.addControl(new MapTypeControl());   
    marker = new Marker( centerLL );  
    map.addOverlay( marker );   
    ExternalInterface.addCallback("Search",onSearch); 
}

function onSearch(lat:Number, lon:Number, CustName:String ):void 
{
    CustN  = CustName; 
    var centerLL : LatLng = new LatLng(lat,lon); 
    map.setCenter(centerLL, 10, MapType.NORMAL_MAP_TYPE);   
    marker = new Marker( centerLL );  
    marker.addEventListener(MapMouseEvent.CLICK, onMapClick); 
    map.addOverlay( marker ); 
}

function onMapClick(event:MapMouseEvent):void 
{  
    map.openInfoWindow(event.latLng, new InfoWindowOptions({title: "Click Event", content: CustN})); 
} 
```

我从我的 C# 代码中调用 onSearch 函数，如下所示：

```
 foreach (var rec in LstCoOrdinates)
        {
            XElement call = new XElement("invoke", new XAttribute("name", "Search"), new XAttribute("returntype", "xml"), new XElement("arguments", new XElement("number", rec.latitude)),
                new XElement("arguments", new XElement("number", rec.longitude)), new XElement("arguments", new XElement("string", rec.name)));
            axFlash.CallFunction(call.ToString(SaveOptions.DisableFormatting));
        } 
```

我需要显示与单击的气球对应的名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:10:43.300

您可以在 g 标记中指定 DisplayObject .icon 属性。并在点击时更改它的可见性。预定义标签或点击任何您需要的标签。

```
marker = new Marker( centerLL );  
marker.icon = new LabelSprite();
marker.icon.visible = false;
marker.addEventListener(MapMouseEvent.CLICK, onMapClick); 
map.addOverlay( marker );

function onMapClick( e:Event ):void
{
  if(selectedMarker) 
     selectedMarker.icon.visible = false;

  selectedMarker = e.currentTarget as Marker;
  selectedMarker.icon.visible = true;
}

public class LabelSprite extends Sprite
{
  private var labelTextField:TextField;

  public function LabelSprite()
  {
    labelTextField = new TextField();
    addChild(labelTextField);
  }

  public function set labelText(value:String):void
  {
    labelTextField.text = value;
  }
} 
```

# arrays - 使用阵列映射网络驱动器

> ID：10638197
> 
> 赞同：0
> 
> 时间：2012-05-17T14:56:37.623
> 
> 标签：arrays, vbscript, for-loop, wsh

问题在线 (objNetwork.MapNetworkDrive CStr(colDrives.Item(i)), CStr(newMappingArray(j)), TRUE)，我的脚本实际上尝试重新连接网络驱动器。它失败是因为它没有将其检测为字符串？

我试图在路径和驱动器号周围使用“”，但它可以工作，所以我不知道从这里去哪里..

代码描述它需要一个共享名称列表，检查是否有任何远程路径映射到驱动器。如果它们是，那么它会通过它们。取消映射它们，使用相同的驱动器号并使用新的路径引用重新映射它们（使用当前登录的凭据..

下面的代码

```
On Error Resume Next

''''''''''''''''''''''''''''' ARRAY SETUP '''''''''''''''''''''''''''''
DIM oldMappingArray(5)
oldMappingArray(0) = "\\DDCSHRNASP02\u_amr_project"
oldMappingArray(1) = "\\DDCSHRNASP02\U_AMS_Deployment"
oldMappingArray(2) = "\\DDCSHRNASP02\u_corp_share"
oldMappingArray(3) = "\\DDCSHRNASP02\u_dcwb_control_room"
oldMappingArray(4) = "\\DDCSHRNASP02\u_dis"
oldMappingArray(5) = "\\DDCSHRNASP02\u_dis15"

oldMappingArrayLength = UBound(oldMappingArray)

DIM newMappingArray(5)
newMappingArray(0) = "\\EUCPRDNAS02\u_amr_project"
newMappingArray(1) = "\\EUCPRDNAS02\U_AMS_Deployment"
newMappingArray(2) = "\\EUCPRDNAS02\u_corp_share"
newMappingArray(3) = "\\EUCPRDNAS02\u_dcwb_control_room"
newMappingArray(4) = "\\EUCPRDNAS02\u_dis"
newMappingArray(5) = "\\EUCPRDNAS02\u_dis15"

newMappingArrayLength = UBound(newMappingArray)

''''''''''''''''''''''''''''' WMI SETUP '''''''''''''''''''''''''''''
Set objNetwork = CreateObject("Wscript.Network")
Set colDrives = objNetwork.EnumNetworkDrives
colDrivesLength = colDrives.count
wscript.echo colDrivesLength

''''''''''''''''''''''''''''' MAIN LOOP '''''''''''''''''''''''''''''
For i=0 to colDrivesLength-1 Step 2
    'Gets every other in the array, making i equal to a PATH
wscript.echo i
For j=0 to oldMappingArrayLength
    'count through all of the old path names
    wscript.echo j
    wscript.echo "Drive Letter = " + colDrives.Item(i) 'Drive letter
    wscript.echo "Current Path = " + colDrives.Item(i+1) 'Path of the Drive Above

    wscript.echo "Tested Path = " + oldMappingArray(j) 'Path Currently Testing

    if colDrives.Item(i+1) = oldMappingArray(j) then
        'If the drive path from enumeration is equal to the old drive mapping array...
        wscript.echo "Item being added -> " + colDrives.Item(i)
        wscript.echo "to be mapped ---> " + newMappingArray(j)

        objNetwork.RemoveNetworkDrive colDrives.Item(i), True, True
        WScript.sleep 3000 'Wait 1.0 seconds
        objNetwork.MapNetworkDrive CStr(colDrives.Item(i)), CStr(newMappingArray(j)), TRUE
        exit For 'ends the oldMappingArrayLength loop if a match was found
    End If
Next
Next

Set objNetwork = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:33:02.177

没有测试它，这似乎是一个耗时且复杂的映射驱动器号的过程，所以我不会用它来打破我的头脑，但 wscript.echo "to be mapped ---> " + newMappingArray(j) 必须是罪魁祸首。+ 不是 VbScript 上的连接，但 & 是。

所以无论你在哪里使用 + 它都应该变成 &

您可以通过使用以下方式来构建您的数组来缩短您的脚本

```
oldMappingArray = ("u_amr_project", "U_AMS_Deployment", ...) 
```

然后如果你需要整个字符串使用

```
"\\DDCSHRNASP02\" & oldMappingArray(j) 
```

# xaml - 多转换器使用

> ID：10638201
> 
> 赞同：0
> 
> 时间：2012-05-17T14:56:49.860
> 
> 标签：xaml, data-binding, datatrigger

这是我想使用多转换器实现的伪代码。

```
IF vm.AvatarFilePath IS NOT NULL THEN
    Image.Source = {Binding AvatarPath}
ELSE
    If vm.Gender == {x:Static vm:Gender.Female} THEN
        Image.Source = {StaticResource Img_Female}
    ELSE
        Image.Source = {StaticResource Img_Male}
    ENDIF
ENDIF 
```

请注意，我不相信多转换器是正确的方法，我在此处发布了一个类似的问题，试图[用 DataTriggers 解决这个问题](https://stackoverflow.com/questions/10636061/datatrigger-usage)。

我对 MultiConverter 实现的尝试（如下）有问题：

1.  它与 {Dependency.UnsetValue} 一起崩溃，这表明绑定是错误的
2.  它可能会或可能不会返回正确的类型 BitmapSource。它需要处理图像的两个源，一个由 Gender 确定，一个基于 Resx 的源，或者一个文件路径。我不知道如何仅通过检查结果来捕获错误的文件路径，因为没有引发错误（我可以做一个 File.Exists 但似乎有点矫枉过正）。
3.  为单元测试公开代码这一事实并不像看起来那么有用，因为我不知道有一种简单且便宜的方法来比较图像相等性（请参阅下面的单元测试）。

如何开始清理此转换器代码和绑定？

干杯，
贝里尔

# Converter.转换代码

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture) 
{
    values.ThrowIfNull("values");
    foreach (var value in values) {
        if (value != null && value.ToString().Equals("{DependencyProperty.UnsetValue}")) return Binding.DoNothing;
    }

    values[1].ThrowIfNull("gender (value[1])");

    var avatarPath = values[0] as string;
    BitmapSource result;

    if (string.IsNullOrWhiteSpace(avatarPath)) {
        var gender = (Gender) values[1];
        object bitmapSource;
        switch (gender)
        {
            case Gender.Female:
                bitmapSource = DomainSubjects.Img_Female;
                break;
            default:
                bitmapSource = DomainSubjects.Img_Male;
                break;
        }
        result = BitmapHelper.GetBitmapSource(bitmapSource);
    }
    else {
        var bi = new BitmapImage();
        bi.BeginInit();
        bi.UriSource = new Uri(avatarPath, UriKind.RelativeOrAbsolute);
        bi.EndInit();
        result = bi;
    }

    return result;
} 
```

# 位图助手代码

```
public static BitmapSource GetBitmapSource(object source)
{
    BitmapSource bitmapSource = null;

    if (source is Icon)
    {
        var icon = source as Icon;

        // For icons we must create a new BitmapFrame from the icon data stream
        // The approach we use for bitmaps (below) doesn't work when setting the
        // Icon property of a window (although it will work for other Icons)
        //
        using (var iconStream = new MemoryStream())
        {
            icon.Save(iconStream);
            iconStream.Seek(0, SeekOrigin.Begin);
            bitmapSource = BitmapFrame.Create(iconStream);
        }
    }
    else if (source is Bitmap)
    {
        var bitmap = source as Bitmap;
        var bitmapHandle = bitmap.GetHbitmap();
        bitmapSource = Imaging
            .CreateBitmapSourceFromHBitmap(bitmapHandle, IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());
        bitmapSource.Freeze();
        DeleteObject(bitmapHandle);
    }
    return bitmapSource;
} 
```

# xml绑定

```
<Image Grid.Column="1" Grid.Row="4" 
       HorizontalAlignment="Center" Margin="10, 0" Width="96" Height="96" Stretch="UniformToFill"
       >
    <Image.Source>
        <MultiBinding Converter="{StaticResource avatarPathConv}">
            <Binding Path="AvatarPath"/>
            <Binding Path="Gender"/>
        </MultiBinding>
    </Image.Source>
</Image> 
```

# 无用的单元测试（加分！）

```
 [Test]
    public void Convert_AvatarPath_IfBadString_DefaultImage() {
        var conv = new AvatarPathConverter();
        var result = conv.Convert(new object[] {"blah", Gender.Male}, null, null, CultureInfo.InvariantCulture);
        Assert.That(result, Is.EqualTo(DomainSubjects.Img_Male));
    } 
```

# javascript - 上传文件时将数据从 javascript 传递到 django 视图

> ID：10638202
> 
> 赞同：0
> 
> 时间：2012-05-17T14:56:51.367
> 
> 标签：javascript, django, file-upload

我创建了一个使用和上传文件的`no javascript`代码。它使用一个元素来选择文件。单击按钮后，文件上传没有任何问题。django 视图可以从中获取文件`html form``django view``html5 input``submit``request.FILES`

```
def upload_file(request,template_name):
    to_return = {}
    store_message="failure"
    if request.method == 'POST':
        if request.FILES.has_key('fselect'):
            file = request.FILES['fselect']
            with open('/uploadpath/%s' % file.name, 'wb+') as dest:
                for chunk in file.chunks():
                    dest.write(chunk)
            store_message="success"
    to_return['store_message']= store_message
    if store_message == "failure":
        return redirect('home')
    reqctx = RequestContext(request,to_return)
    return return render_to_response(template_name,reqctx) 
```

html表单是

```
 <form enctype="multipart/form-data" method="post" action="{% url uploaded %}"> {% csrf_token %}
    <input type="file" name="fselect" id="fselect">    </input>
    <input type="submit" id="uploadbtn" value="upload">    
    </form> 
```

现在我想用一些`javascript`来调用`django`视图。我已经编写了上传视图的 ajax 版本

```
def ajax_upload_file(request):
    to_return = {}
    store_message="failure"
    if request.method == 'POST':
        if request.FILES.has_key('fselect'):
            file = request.FILES['fselect']
            with open('/uploadpath/%s' % file.name, 'wb+') as dest:
                for chunk in file.chunks():
                    dest.write(chunk)
            store_message="success"
     to_return['store_message']= store_message
     serialized = simplejson.dumps(to_return)
     if store_message == "failure":
        return HttpResponseServerError(serialized, mimetype="application/json")
     else:
        return HttpResponse(serialized, mimetype="application/json") 
```

我对如何将`file`对象从`javascript`代码传递到 django 视图感到困惑。

javascript代码

```
$(document).ready(function(){
  $('#fselect').change(function(){uploadFile()});

}
function uploadSubTitleFile(){
    //check if it is a subtitle file?
    var file=document.getElementById('fselect').files[0];
    var data = {  };//how to pass the data
    var args = { type:"POST", url:"ajax_upload/", data:data, complete:done };    
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:44:42.760

对于简单的答案，你没有。将您的表单发送到隐藏的 iframe 中，并让 javascript 调用其父窗口。

> 由于文件上传是通过 iframe 进行的，HTTP 状态码等传统响应数据无法直接获得，连接管理器无法合理判断成功或失败（事务超时除外）。相反，回调的上传处理程序将在事务完成时接收包含 iframe 文档正文的响应对象，作为字符串。
> 
> — [http://developer.yahoo.com/yui/connection/#upload](http://developer.yahoo.com/yui/connection/#upload)

我的建议是，找一个体面的库来为你做这件事并使用它：

*   [https://github.com/GoodCloud/django-ajax-uploader](https://github.com/GoodCloud/django-ajax-uploader)
*   [http://www.uploadify.com/](http://www.uploadify.com/)
*   …</li>

使用最近的浏览器，可以在不依赖 iframe 的情况下做到这一点：[Sending multipart/formdata with jQuery.ajax](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)

# magento - 如何在magento上集成sugarcrm？

> ID：10638204
> 
> 赞同：3
> 
> 时间：2012-05-17T14:56:52.967
> 
> 标签：magento, sugarcrm

我需要在我的magento站点上集成sugarcrm。（使用Wampserver2.2）我可以在其中安装**sugarcrm** ...在magento文件夹中还是在www目录中？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:53:52.240

检查 Magento 扩展 [SugarCRM 桥](http://www.magentocommerce.com/magento-connect/sugarcrm-bridge.html)

这将有助于扩大 Magento 和 SugarCRM 之间的联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:00:47.097

SugarCRM 和 Magento 是两个不同的应用程序；并且应该这样安装。

通常，如果您使用 Apache 作为您的网络服务器，您会将它们放在两个单独的[**虚拟主机**](http://httpd.apache.org/docs/2.2/en/vhosts/)中——这样，每个虚拟主机都是独立的，将有自己的 URL，您将能够更新每个虚拟主机而不会冒险在这个过程中打破另一个。

请注意，无论您如何部署这两个应用程序*（无论是在单个虚拟主机中混合，这不是一个好主意，还是使用两个不同的虚拟主机）*，它们仍然是两个不同的、独立的应用程序，不共享任何事物 ; 尤其是他们的数据库。

例如，我的意思是 Magento 中的客户不会出现在 SugarCRM 中；订单或任何其他类型的数据相同。

# mule - 将 Mule 1.3“模型”元素转换为 Mule 3 等效项

> ID：10638206
> 
> 赞同：2
> 
> 时间：2012-05-17T14:56:56.547
> 
> 标签：mule

我正在将 Mule 1.3 应用程序升级到 Mule 3.2.1（最新版本）。Mule 1.3 配置文件有一个“model”元素和许多“mule-descriptor”子元素。

```
<model name="theModel">
  <mule-descriptor name="theName" implementation="com.company.SomeClass">
    <inbound-router>
      <endpoint address="servlet://service/foo" transformers="ACustomTransformer" responseTransformers="AnotherCustomTransformer" />
      <endpoint address="vm://anEndpoint"/>
    </inbound-router>
    <outbound-router>
      <router className="org.mule.routing.outbound.FilteringOutboundRouter">
        <endpoint address="Authenticator">
          <properties>
            <property name="propName" value="propValue" />
          </properties>
        </endpoint>
        <filter expression="/data = null" className="org.mule.routing.filters.xml.JXPathFilter" />
      </router>
      <router className="org.mule.routing.outbound.OutboundPassThroughRouter">
        <endpoint address="RequestValidator" />
      </router>
    </outbound-router>
    <properties>
      <property name="someProp" value="someValue" />
    </properties>
  </mule-descriptor>
  <!-- more <mule-descriptor> elements -->
</model> 
```

我如何将其转换为等效的 Mule 3？谢谢。

* * *

# **编辑 - 2012 年 5 月 29 日**

**1)**一些 mule 描述符有指向自己的入站路由器。

```
<mule-descriptor name="theName" implementation="com.company.SomeClass">
  <inbound-router>
    <endpoint address="theName" />
  </inbound-router>
</mule-descriptor> 
```

这些应该如何转换为 Mule 3 流？当我使用您的答案中的信息将这些转换为流时，我在启动时收到一条错误消息，这似乎是说它无法引用流，因为它仍在创建中（如循环依赖）：

`Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ref:RequestValidator.20': Cannot resolve reference to bean 'RequestValidator' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'RequestValidator': Cannot create inner bean '(inner bean)' of type [org.mule.config.spring.factories.InboundEndpointFactoryBean] while setting bean property 'messageSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': 1 constructor arguments specified but no matching constructor found in bean '(inner bean)' (hint: specify index/type/name arguments for simple parameters to avoid type ambiguities)`

**2)**一个 mule-descriptor 使用`BridgeComponent`Mule API 中的类作为其实现。这些应该如何处理？这个类在 Mule 3 中不存在。

```
<mule-descriptor name="theName" implementation="org.mule.components.simple.BridgeComponent">
  <inbound-router>
    <endpoint address="vm://theInboundAddress" />
  </inbound-router>
  <outbound-router>
    <router className="org.mule.routing.outbound.FilteringOutboundRouter">
      <endpoint address="vm://theOutboundAddress" />
    </router>
  </outbound-router>
</mule-descriptor> 
```

**3)**`<outbound-router>`另一个 mule 描述符在其元素中具有“matchAll”属性。这应该如何转换为 Mule 3 流？

```
<mule-descriptor name="theName" implementation="com.company.SomeClass">
  <inbound-router>
    <endpoint address="servlet://theInboundEndpoint" />
  </inbound-router>
  <outbound-router matchAll="true">
    <router className="org.mule.routing.outbound.OutboundPassThroughRouter">
      <endpoint address="firstOutboundEndpoint" />
    </router>
    <router className="org.mule.routing.outbound.FilteringOutboundRouter" transformer="MyTransformer">
      <endpoint address="vm://secondOutboundEndpoint" />
      <filter pattern="Error*" className="org.mule.routing.filters.WildcardFilter" />
    </router>
  </outbound-router>
</mule-descriptor> 
```

**4)** Mule 1.x 配置有一些`<endpoint-identifier>`元素的名称与某些`<mule-descriptor>`元素的名称相同。这些名称也用作`<mule-descriptor>`. 例如：

```
<endpoint-identifiers>
  <endpoint-identifier name="TheEndpointName" value="vm://theEndpointAddress" />
</endpoint-identifiers>

...

<model name="...">
  <mule-descriptor name="TheEndpointName" implementation="...">
    <inbound-router>
      <endpoint address="TheEndpointName" />
    </inbound-router>
    ...
  </mule-descriptor>
  ...
</model> 
```

我的猜测是 Mule 3 等效项应该类似于下面的代码。这个对吗？

```
<flow name="TheEndpointName">
  <!--
    My first guess was:
    <inbound-endpoint ref="TheEndpointName" />
  -->
  <vm:inbound-endpoint path="theEndpointAddress" />
  ...
</flow> 
```

再次感谢你。

# 编辑 2012 年 5 月 30 日

**5)**一些 mule 描述符使用`RestServiceWrapper`来自 Mule API 的类。当我将其转换为 Mule 3`<flow>`时，出现此错误：

`The required object/property 'serviceUrl' is null`

我注意到 Mule 1.x 配置中的 mule-descriptor 设置了一个名为“urlFromMessage”的属性，这似乎是说，而不是在 XML 配置文件中提供 URL，它将作为属性提供给 Mule信息。`RestServiceWrapper`但是，“urlFromMessage”属性在 Mule 3 版本的类中不存在。我应该在 Mule 3 中使用不同的组件类吗？由于这个类是 Mule API 的一部分，有没有我应该使用的标准 XML 标签？谢谢。

```
<mule-descriptor name="theName" implementation="org.mule.components.rest.RestServiceWrapper">
  <inbound-router>
    ...
  </inbound-router>
  <properties>
    <property name="urlFromMessage" value="true" />
  </properties>
</mule-descriptor> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:29:21.067

*   `model`已被弃用。
*   `flow`已更换`mule-descriptor`

还有更多，请查看为 Mule 3 转换的配置：

```
<flow name="theName">
    <composite-source>
        <vm:inbound-endpoint path="anEndpoint">
            <transformer ref="ACustomTransformer" />
            <response>
                <transformer ref="AnotherCustomTransformer" />
            </response>
        </vm:inbound-endpoint>
        <servlet:inbound-endpoint path="/service/foo" />
    </composite-source>
    <component>
        <singleton-object class="com.company.SomeClass">
            <property key="someProp" value="someValue" />
        </singleton-object>
    </component>
    <outbound-endpoint ref="Authenticator">
        <expression-filter expression="/data = null"
            evaluator="jxpath" />
        <property key="propName" value="propValue" />
    </outbound-endpoint>
    <outbound-endpoint ref="RequestValidator" />
</flow> 
```

**注意：此配置对 Mule 3.2.1 有效，但我不能保证它完全符合您的要求，您必须对其进行测试和调整！**

更多答案：

1) 为流和端点使用不同的名称，它们现在在后台注册为单独的 bean，因此不能共享相同的名称。这给出了：

```
<flow name="theFlowName">
    <inbound-endpoint ref="theInboundName" />
    <component>
        <singleton-object class="com.company.SomeClass" />
    </component>
</flow> 
```

2）使用[桥接模式](http://www.mulesoft.org/bridge)：

```
<pattern:bridge name="theName"
                inboundAddress="vm://theInboundAddress"
                outboundAddress="vm://theOutboundAddress" /> 
```

3）使用[`all`路由消息处理器](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-All)，并使用`processor-chain`将多个消息处理器组合为一个：

```
<flow name="theName">
    <servlet:inbound-endpoint path="/theInboundEndpoint" />
    <component>
        <singleton-object class="com.company.SomeClass" />
    </component>
    <all>
        <outbound-endpoint ref="firstOutboundEndpoint" />
        <processor-chain>
            <transformer ref="MyTransformer" />
            <wildcard-filter pattern="Error*" />
            <vm:outbound-endpoint path="secondOutboundEndpoint" />
        </processor-chain>
    </all>
</flow> 
```

4）您不能在流中声明全局端点，并且您需要为端点和流使用不同的名称，因此实际的 Mule 3 配置等效项是：

```
<vm:endpoint name="TheEndpointName" path="theEndpointAddress" />

<flow name="TheFlowName">
    <inbound-endpoint ref="TheEndpointName" />
    <component>
        <singleton-object class="..." />
    </component>
</flow> 
```

5) 大多数 Mule 默认组件现在都可以作为 XML 元素使用，因此您确实需要使用：

```
<http:rest-service-component serviceUrl="..." /> 
```

`urlFromMessage`不见了：相反，您可以使用[Mule 表达式](http://www.mulesoft.org/documentation/display/MULE3USER/Expressions+Configuration+Reference#ExpressionsConfigurationReference-EvaluatorReference)以动态方式从飞行消息中提取 URL。例如，如果 URL 在名为`svcURL`use 的入站属性中提供：

```
<http:rest-service-component serviceUrl="#[header:INBOUND:svcURL]" /> 
```

# c# - IIS7 401 错误重定向（混合身份验证）

> ID：10638211
> 
> 赞同：2
> 
> 时间：2012-05-17T14:57:12.360
> 
> 标签：c#, asp.net, iis-7

好的，所以我有一个 Web 应用程序，我开发了一种混合身份验证模式。我制作了两个用于登录的页面（我使用的是 IIS7），一个用于名为 login.aspx 的表单登录，另一个用于名为 winlogin.aspx 的 Windows 登录。Web 配置如下所示：

```
<authentication mode="Forms">
      <forms cookieless="UseCookies" defaultUrl="Default.aspx" loginUrl="Login.aspx" name="xxx" path="/" protection="All" timeout="30"></forms>
    </authentication>
    <authorization>
      <deny users="?" />
      <allow users="*" />
    </authorization>
  </system.web>

<location path="WinLogin.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization> 
```

在 IIS 中，我已将 winlogin 页面 Anonymous Authentication 设置为 disabled 并将 windows authentication 设置为 enabled ，因此我能够获取 windows 身份验证弹出窗口（用于 windows 用户名和密码）。一切正常，我正在向表单发送带有 ["LOGON_USER"] 的 cookie，并且用户已通过身份验证。问题是在尝试按下弹出窗口上的取消按钮时（在 IIS 7 上设置默认错误页面（401.htm、500.htm ...）和功能设置以在服务器错误上仅显示自定义错误页面，即 401 .htm 页面被带到我这里。这种行为没关系，但是当我更改自定义错误页面（针对 401 错误）以返回到 Login.aspx 时（因此用户可以使用基于表单的身份验证）当用户点击取消时按钮，发生了一些奇怪的事情。当我加载 WinLogin.aspx 时，弹出窗口没有 t 出现，我被自动重定向到 Login.aspx 。我不知道为什么要这样做，这意味着发生了服务器错误（401）。奇怪.. .此页面设置为 401 错误，但功能设置设置为：“本地请求和自定义的详细错误...”我的弹出窗口再次出现，并且可以进行身份​​验证。如果有人可以解释这种行为。

# build - Typemock 自动部署和构建定义错误

> ID：10638212
> 
> 赞同：0
> 
> 时间：2012-05-17T14:57:12.543
> 
> 标签：build, typemock

我希望有一些 Typemock 大师可以帮助解决以下错误。

我们目前正在测试 Typemock (v7.0.6) 的自动部署功能，作为 TFS 2010 构建的一部分。我想解决的一个问题是以下错误，它在创建或编辑构建定义时发生：

```
Summary: There were 0 failures, 2 errors and 0 warnings loading custom activities and services.

Error: Could not load file or assembly 'file:///C:\Users\gmonk\AppData\Local\Temp\VSTFSBuild\a6c25fba-a63b-4b51-92de-db3a3f60dcd0\MockWeaver.dll' or one of its dependencies. The module was expected to contain an assembly manifest.

Error: Could not load file or assembly 'file:///C:\Users\gmonk\AppData\Local\Temp\VSTFSBuild\a6c25fba-a63b-4b51-92de-db3a3f60dcd0\ProfileLinker.dll' or one of its dependencies. The module was expected to contain an assembly manifest. 
```

我没有深入的了解，但据我了解，当您创建或编辑构建定义时，CustomBuildActivities 目录中的所有程序集都会转移到您的本地计算机并由 Visual Studio（？）加载。

### 更多信息

此错误出现在每个客户端的 Visual Studio 输出窗口中，无论其计算机上是否安装了 Typemock。请注意，错误中的路径确实存在于本地计算机上，并且所有文件都在那里。

我们自定义程序集的路径是“C:\TFS\Global\CustomBuildActivities”</p>

服务器路径是“$/Global/CustomBuildActivities”</p>

在这些目录中存在并签入以下文件：

*   TypeMock.Configuration.exe
*   配置文件
*   Typemock.ArrangeActAssert.dll
*   TypeMock.CLI.Common.dll
*   TypeMock.dll
*   TypeMock.Integration.dll
*   Typemock.Interceptors.dll
*   Typemock.Isolator.VisualBasic.dll
*   TypeMock.TFS2010.dll
*   黑名单.dat
*   排除.dat
*   命名空间.dat
*   typemockconfig.xml
*   MockWeaver.dll *
*   ProfileLinker.dll *

*在输入时——这些文件来自我本地安装的 Typemock 的 x64 目录。我还尝试了 x86 版本以及各自目录中的两个版本。

构建服务器是 Windows Server 2008 64 位，开发机器是 Windows 7 32 位。

TFS 构建控制器设置为在“$/Global/CustomBuildActivities”中查找自定义程序集（即“自定义程序集的版本控制路径”）

服务器上没有安装 Typemock。

构建模板 (XAML) 根据[文档](http://docs.typemock.com/isolator/Default.aspx##typemock.chm/Documentation/TFSBuild.html)具有相关的 Typemock 构建活动。（我们正在使用 TypemockRegister/Start/Stop，这些活动可以在构建日志中看到，不会产生错误）。但是，当构建模板没有 Typemock 活动时，仍然会出现上面显示的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:38:57.533

我想我有同样的问题，但你需要做的就是注册这些 dll。

1.  从 Microsoft Visual Studio 2010 下的 Visual Studio 工具打开你的可视化 stdio 命令提示符。
2.  输入`regsvc32 "C:\Program files\Typemock\Isolator\7\AutoDeploy\x64\ProfileLink.dll"` 或`regsvc32 "C:\Program files\Typemock\Isolator\7\AutoDeploy\x64\MockWeaver.dll"`

问题消失了。

# java - 删除表已解决，但如何干净利落？

> ID：10638215
> 
> 赞同：0
> 
> 时间：2012-05-17T14:57:30.320
> 
> 标签：java, database, sqlite

我想以允许擦除表中所有数据的方法执行 SQL 查询。我的解决方案有效，但我认为这不是很干净，陪审团会欣赏的。

现在，我在参数中调用一个带有日期的方法，但我不需要使用它。这是我找到的唯一解决方案。当我尝试放置一个 void 时，从逻辑上讲，我不能使用这种使用 return 的方法。

```
public long Effacer(String date) {
    return ourDatabase.delete(DATABASE_TABLE, null, null);
} 
```

那么对你来说，放下我的桌子并重新创建它的方式更干净。我已经创建了一个方法 une DbHelper 但我不知道以后我怎么能打电话给她。我相信这是更干净的方式，但我只是一个初学者，所以我不确定。你在想什么 ？

（我已经在代码中进行了任何测试）这是我的代码：

HotOrNot.java

```
public class HotOrNot
{
    public static final String  KEY_ID              = "id_operation";
    public static final String  KEY_MONTANT         = "montant";
    public static final String  KEY_DESCRIPTION     = "description";
    public static final String  KEY_DATE            = "date";

    private static final String DATABASE_NAME       = "MyBudget";
    private static final String DATABASE_TABLE      = "Operations";
    private static final int    DATABASE_VERSION    = 1;

    private DbHelper            ourHelper;
    private final Context       ourContext;
    private static SQLiteDatabase       ourDatabase;

    public static class DbHelper extends SQLiteOpenHelper
    {
        // Constructeur
        public DbHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_DATE
                    + " TEXT NOT NULL, " + KEY_MONTANT + " TEXT NOT NULL, "
                    + KEY_DESCRIPTION + " TEXT NOT NULL);");
        }

        /* @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) */
        public void onUpgrade(SQLiteDatabase ourDatabase)
        {
            ourDatabase.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(ourDatabase);
        }

        public void onDelete()
        {
            ourDatabase.execSQL("DROP TABLE " + DATABASE_TABLE);
            ourDatabase.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_DATE
                    + " TEXT NOT NULL, " + KEY_MONTANT + " TEXT NOT NULL, "
                    + KEY_DESCRIPTION + " TEXT NOT NULL);");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            // TODO Auto-generated method stub

        }

    }
    // constructeur
    public HotOrNot(Context c)
    {
        ourContext = c;
    }

    public HotOrNot open() throws SQLException
    {
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        /*ourDatabase.execSQL("DROP TABLE " + DATABASE_TABLE);
        ourDatabase.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_DATE
                + " TEXT NOT NULL, " + KEY_MONTANT + " TEXT NOT NULL, "
                + KEY_DESCRIPTION + " TEXT NOT NULL);");
                */
        //ourDatabase = ourHelper.

        //ourDatabase = ourHelper.onUpgrade(ourDatabase);*/
        return this;
    }

    public void close()
    {
        ourHelper.close();
    }

    public long createEntry(String date, String montant, String description)
    {
        ContentValues cv = new ContentValues();
        cv.put(KEY_DATE, date);
        cv.put(KEY_MONTANT, montant);
        cv.put(KEY_DESCRIPTION, description);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);
    }

    public String getData()
    {
        String[] columns = new String[]
        { KEY_DATE, KEY_MONTANT, KEY_DESCRIPTION };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
                null, null);
        String result = "";

        int iDate = c.getColumnIndex(KEY_DATE);
        int iMontant = c.getColumnIndex(KEY_MONTANT);
        int iDescription = c.getColumnIndex(KEY_DESCRIPTION);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
        {
            result = result + c.getString(iDate) + " " + c.getString(iMontant)
                    + " " + c.getString(iDescription) + "\n";
        }

        return result;
    }

    public String getSolde()
    {
        // Création de notre requete et alias
        String query = "SUM(id_operation) AS " + KEY_ID;
        String[] otherColumns = new String[]{ query };
        Cursor cursorBidon = ourDatabase.query(DATABASE_TABLE, otherColumns, null, null, null, null, null);
        cursorBidon.moveToFirst();
        int iOperation = cursorBidon.getColumnIndex(KEY_ID);
        String monSolde = "";
        monSolde = monSolde + cursorBidon.getString(iOperation);
        return monSolde;
    }

    /*
    public void Erase(SQLiteDatabase db)
    {
        db.execSQL("DROP TABLE " + DATABASE_TABLE);
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_DATE
                + " TEXT NOT NULL, " + KEY_MONTANT + " TEXT NOT NULL, "
                + KEY_DESCRIPTION + " TEXT NOT NULL);");
    }*/

    public long Erase(String date)
    {
        return ourDatabase.delete(DATABASE_TABLE, null, null);
    }

} 
```

SQLiteExample.java（仅当我们单击删除按钮时的一部分）

```
 case R.id.bSQLDelete:
            boolean samarche = true;
            try
            {
                String date = sqlDate.getText().toString();
                HotOrNot entryyy = new HotOrNot(SQLiteExample.this);
                entryyy.open();
                //entryyy.Effacer(date);
                entryyy.close();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:19:40.943

我不知道为什么有些人对我的评价是负面的，我们不能说我什么都不做，我们可以在评论中看到我的任何测试。此外，我有一个适用于我的问题的解决方案，如果我没有搜索，我永远不会找到这种方式。问题只是这样做的方式和我想要任何干净的事实，所以我们可以说我的帖子只是由对计算的兴趣创建的。

好吧，因为我不像那些在没有帮助的情况下批评的人，所以我给你解决方案，因为我个人认为对方。这是我公司的一个人找到的解决方案。在 DbHelper 类中调用 onDelete 方法的解决方案是：

```
DbHelper dbHelper = new DbHelper(arg0.getContext());
dbHelper.onDelete(); 
```

带着敬意，

# xml - 如何在 XSL 中计算日期值...？

> ID：10638219
> 
> 赞同：0
> 
> 时间：2012-05-17T14:57:46.213
> 
> 标签：xml

我对 XSLT/XML 很陌生...尝试使用日期计算进行 XSL 转换，但是当我使用 XSLT 在线工具（例如[http://www.xsltcake.com/ ）对其进行测试时没有得到任何结果](http://www.xsltcake.com/)

这是 XML：

`<record>`
`<field name="Identifier">00000ZG7</field>`
`<field name="ContestNumber">00000ZG7</field>`
`<field name="CareerSiteNo3">spool</field>`
`<field name="OpeningDate">2012-05-14</field>`
`<field name="EndDate">2012-05-14T10:05:00-04:00</field>`
`<field name="HotJobFlag">false</field>`
`</record>`

这是 XSLT：
`<?xml version="1.0" encoding="UTF-8"?>`
`<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="http://www.abc.com/ws/integration/toolkit/2005/07" xmlns:fct="http://www.abc.com/xsl_functions" xmlns:xs="http://www.w3.org/2001/XMLSchema">`
`<xsl:output method="text" encoding="UTF-8"/>`
`<xsl:param name="delimiter">,</xsl:param>`
`<xsl:template match="ns:record">`
`<xsl:value-of select="ns:field[@name='Identifier']"/>`
`<xsl:value-of select="$delimiter"/>`
`<xsl:value-of select="ns:field[@name='ContestNumber']"/>`
`<xsl:value-of select="$delimiter"/>`
`<xsl:value-of select="ns:field[@name='CareerSiteNo3']"/>`
`<xsl:value-of select="$delimiter"/>`
`<xsl:value-of select="ns:field[@name='OpeningDate']"/>`
`<xsl:value-of select="$delimiter"/>`
`<xsl:variable name="End2Days" select="ns:field[@name='EndDate']"/>`
`<xsl:choose>`
`<xsl:when test="ns:field[@name='CareerSiteNo3']='spool'">`
`<xsl:value-of select="(xs:date($End2Days)+((xs:dayTimeDuration('P2D'))"/>`
`</xsl:when>`
`<xsl:otherwise>`
`<xsl:value-of select="(xs:date($End2Days)+((xs:dayTimeDuration('P14D'))"/>`
`</xsl:otherwise>`
`</xsl:choose>`
`<xsl:value-of select="$delimiter"/>`
`<xsl:value-of select="ns:field[@name='HotJobFlag']"/>`
`<xsl:text>&#10;</xsl:text>`
`</xsl:template>`
`</xsl:stylesheet>`

如果我取出零件`<xsl:choose>`，我可以得到一行结果。但是，如果我包含选择节点，我不会得到任何结果。基本上我想要做的是当“CareerSiteNo3”是“假脱机”时，只需从结束日期值添加 2 天，否则添加 14 天。

请告诉我我做错了什么......非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:11:26.547

您正在代码中使用 XSLT 2.0 功能；您确定您尝试的在线测试工具支持 XSLT 2.0 吗？

# iphone - 在触摸时更改条形按钮项目的选择器

> ID：10638222
> 
> 赞同：1
> 
> 时间：2012-05-17T14:57:58.070
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我有一个导航栏，上面有一个 bar buttonitem。我将如何在第一次按下时更改选择器。我基本上想让第一次按下触发“showMenuView”选择器，然后在显示时将 barbuttonitem 选择器更改为“hideMenuView”

这是我到目前为止的代码：

```
 UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"globe.png"] style:UIBarButtonItemStyleBordered target:self action:@selector(showMenuView:)]; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:00:34.360

你可以设置一个新的动作。

```
[button setAction:@selector(hideMenuView:)]; 
```

但我认为使用一种`toggleMenuView:`方法是更好的做法，有一个 BOOL 变量指示您的菜单是否可见，然后在 toggleMenuView 中隐藏或显示它：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:59:31.310

你可以打电话`setAction:`

```
[button setAction:@selector(hideMenuView)]; 
```

# sql - SQL Merge 语句在 Oracle 11g 中有效，但在 9i 中无效

> ID：10638223
> 
> 赞同：2
> 
> 时间：2012-05-17T14:58:06.747
> 
> 标签：sql, oracle11g, oracle9i

我有一个 SQL MERGE 语句在 Oracle 11g（开发环境）中完美运行，但是当我尝试在 Oracle 9i（生产环境）中运行它时，它给了我以下错误：ORA-00905：缺少关键字。

有什么方法可以在 Oracle 9i 中完成这项工作？这是声明：

```
MERGE INTO non_asset dst
   USING (SELECT tag, comments, computer_role
            FROM non_asset_backup
           WHERE sub_group = 'AALVOIP') src
   ON (dst.tag = src.tag)
   WHEN MATCHED THEN
      UPDATE
         SET dst.comments = src.comments,
             dst.computer_role = src.computer_role 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:05:14.900

在 9 *i*中，the`WHEN MATCHED`和`WHEN NOT MATCHED`分支机构都是强制性的。在 10 *g*和之后，其中一个可能会丢失（但显然不能同时丢失）。请参阅[http://docs.oracle.com/cd/B10501_01/server.920/a96540/statements_915a.htm#2080942](http://docs.oracle.com/cd/B10501_01/server.920/a96540/statements_915a.htm#2080942)与[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9016。 htm#i2081218](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9016.htm#i2081218)

# asp.net - “检测到 Autofac 循环组件依赖”错误

> ID：10638241
> 
> 赞同：6
> 
> 时间：2012-05-17T14:59:19.127
> 
> 标签：asp.net, dependency-injection, inversion-of-control, ioc-container, autofac

我是 IoC 的新手，正在我当前的项目中使用 Autofac。

我有以下两个课程：

```
public class UserService : IUserService
{
    private readonly IUserRepository _repo;
    private readonly IMailService _mailService;
    public UserService(IUserRepository repo, IMailService mailService)
    {
        _repo = repo;
        _mailService = mailService;
    }
}

public class MailService : IMailService
{
    private readonly IMailRepository _repo;
    private readonly IUserService _userService;
    public MailService(IMailRepository repo, IUserService userService)
    {
        _repo = repo;
        _userService = userService;
    }
} 
```

最初，我的 UserService 类不需要 MailService 类的实例，但现在它需要，并且自从将它引入到 UserService 构造函数中，就出现了这个循环依赖错误，作为一个新手，我不知道如何解决这个问题。

这就是我的课程目前在 Autofac 中的注册方式：

```
var builder = new ContainerBuilder();

// controllers                      
builder.RegisterControllers(Assembly.GetAssembly(typeof(UsersController)));

// register other classes
builder.RegisterType<UserRepository>().As<IUserRepository>();
builder.RegisterType<MailRepository>().As<IMailRepository>();
builder.RegisterType<UserService>().As<IUserService>();
builder.RegisterType<MailService>().As<IMailService>(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T15:50:30.233

如果一个 UserService 需要一个 IMailService 而一个 MailService 需要一个 IUserService 你有一个依赖循环。我看到了几个选项：

1.  您的 UserService 是否立即需要 IMailService？当它需要发送消息时，您可以传递一个吗？

2.  可以按需查询解析器 - 也就是说，不要在构造函数中将 IUserService 传递给 MailService 而是编写 MailService 以在需要时解析 IUserService？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-27T19:12:27.180

[Autofac 有关于如何处理循环依赖](http://autofac.readthedocs.org/en/latest/advanced/circular-dependencies.html)的文档，这可能会有所帮助。如果您遵循那里的指导，您可以让它工作（归结为：使依赖项之一成为属性而不是构造函数依赖项）。

# android - 黑莓剧本无索引标志

> ID：10638253
> 
> 赞同：2
> 
> 时间：2012-05-17T14:59:48.160
> 
> 标签：android, filesystems, blackberry-playbook, playbook

我有一个简单的 android 应用程序，它将数据存储到 Android/data/{application-name} 文件夹中。它保存在“data.xml”文件中。

我已将此应用程序转换为剧本。一切正常，除了这个数据文件列在文档库的内置文件浏览器中，用户可以在没有任何警告的情况下删除它。

有什么办法，我怎样才能阻止我的数据文件夹的 indexig？我试过 .noindex 和 .metadata_never_index 但没有任何效果。

使用其他扩展是我的最后选择。

谢谢你的帮助。

# c# - 使用 c# 查找最少使用的 CPU 内核

> ID：10638256
> 
> 赞同：4
> 
> 时间：2012-05-17T15:00:03.710
> 
> 标签：c#, winforms, cpu-usage

我正在编写一个小型 winforms 应用程序，它可以打开另一个程序的多个实例。为了优化性能，我正在寻找一种方法来找到最少使用的 CPU 内核来分配进程。

我还希望能够看到每个核心的使用百分比。没什么花哨的，TextBox 或 Label 就可以了。

`PerformanceCounter`遇到这些答案后，我一直在尝试使用：

[查找核心编号](https://stackoverflow.com/questions/1542213/how-to-find-the-number-of-cpu-cores-via-net-c)

[超过 2 个内核的 CPU 使用率](https://stackoverflow.com/questions/5537286/how-to-get-cpu-usage-for-more-than-2-cores)

我尝试按如下方式实现这些：

```
 StatusBarOutput.Text = "";
        //ignoring posible hyper-threading for simplicity's sake
        var coreUsages = new PerformanceCounter[Environment.ProcessorCount];

        for (var i = 0; i < coreUsages.Length; i++)
        {
            coreUsages[i] = new PerformanceCounter("Processor", "% Processor Time", i.ToString());

            //using the status bar as output for now, doesn't really matter
            StatusBarOutput.Text += "   |   " + coreUsages[i].CounterName + " ~ " + coreUsages[i].NextValue();
        } 
```

我得到的输出是：

![输出](../Images/17ed423021a7b677fc2b1789573a1d14.png)

同时，任务管理器显示：

![输出](../Images/ed108cccd9dc09384799eec3f38897aa.png)

不知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T15:03:54.933

操作系统在确定使用哪个内核方面可能要好得多。MS 的人花了很多时间优化这个特定方面。

如果你试图接管它，你会为每个新的服务包、操作系统版本、硬件风格等维护它吗？

您最好的选择可能是花一些时间优化流程，而不是试图猜测操作系统。

**更新：**

使用性能计数器，它并不像抓取您找到的第一个值那么简单。您需要至少轮询两次（中间有一段时间）才能获得值。

这不一定是我在现实世界场景中实现它的方式，但这里有一个想法：

```
var coreUsages = new PerformanceCounter[Environment.ProcessorCount];

for (var i = 0; i < coreUsages.Length; i++)
{
     coreUsages[i] = new PerformanceCounter("Processor", "% Processor Time", i.ToString());
     coreUsages[i].NextValue();
}

Thread.Sleep(1000);

for (var i = 0; i < coreUsages.Length; i++)
{
     //using the status bar as output for now, doesn't really matter
     Trace.WriteLine("   |   " + coreUsages[i].CounterName + " ~ " + coreUsages[i].NextValue());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:37:28.210

啊! 我**可能会**看到它是什么。

在这行代码中：

```
 coreUsages[i].NextValue(); 
```

[NextValue()](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.nextvalue.aspx)返回一个浮点数。

如果您将 0.35（或 35%）转换为整数，您将得到 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:39:56.720

出于实验的目的，我想您可以`GetCurrentProcess()`从`Process`. `System.Diagnostics`从返回的过程中，您可以`ProcessAffinity`根据您的代码将属性设置为您检测到的使用率最低的内核，以计算每个内核的使用率。

正如其他人所提到的，在实际应用程序中尝试这样做是一个坏主意。

# iphone - 我是否还需要在使用 ARC 的 viewDidUnload 中将 IBOutlet 属性设置为 null

> ID：10638258
> 
> 赞同：10
> 
> 时间：2012-05-17T15:00:10.760
> 
> 标签：iphone, objective-c

我还需要在使用 ARC 的 viewDidUnload 中将 IBOutlet 属性设置为 null 吗？

因为它仍然会生成以下评论：

// 释放主视图的所有保留子视图。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T15:17:47.713

好吧，nilling outlet 的主要目的是不创建僵尸，泄漏和奇怪的情况，当子视图没有超级视图时，当视图从视图控制器卸载时可能发生。

现在使用最新版本的 Xcode，如果您在标题内或私有声明中拖动视图元素，它会自动将 Outlet 设置为弱（针对 iOS>=5），并且在这种情况下`viewDidUnload`它可能会编写的方法`[self setYourOutlet:nil];`是不必要的，但这是一个很好的做法。如果您需要针对较低的ioses，因为您不能使用弱引用。我建议总是使用，因为这是一个好习惯。

更新

我想完成答案以避免误解（仅谈论iOS5）注意IB仅在主视图的子视图时才将出口设置为弱。通常它发生在包含来自视图控制器的视图的 xib 中。

有时可能会发生，您需要在运行时根据某些条件交换两个视图，而无需以编程方式或在不同的 xib 中创建它们。例如，您的主视图由 vc 拥有，并且在同一个 xib 中您创建了另外两个在那个时候没有超级视图的视图。如果您尝试使用相同的技术将它们连接起来，则创建的参考将是`strong`. 在运行时，您现在可以交换视图，只需在超级视图中添加或删除，当然您应该在`viewDidUnload`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T16:10:55.680

我将在这里扩展 Andrea 的答案（为他投票！）因为答案并不直接，除非您只指 UI 组件，在这种情况下它们*都*应该很弱。

IBOutlets 是你定义的任何东西。如果您使用：

`@property (nonatomic, strong) IBOutlet UIView *someView;`

卸载父视图/窗口时，您应该将其设为 nil。

如果你这样做：

`@property (nonatomic, weak) IBOutlet __weak UIView *someView;`

您不必为零变量，因为它将自动归零。

你如何零完全取决于你。在 ARC 之前，我使用过：

`[someView_ release], someView_ = nil;`

现在您有两个选择：使用 setter（使用 with 创建`@synthesize`）或直接设置底层 ivar。结果是相同的——在这两种情况下，对象的生命周期限定符都会记录它的最终使用并释放它。

所以，继续这样做：

`self.someView = nil`

或者

```
@synthesize someView = someView_;
...
someView_ = nil; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T16:23:27.673

对于标记为强的 IBOutlets，您仍然希望在 viewDidUnload 中将它们清零。

**为什么：**

当您收到内存不足通知时，当前不可见的任何视图都可能会自行卸载（调用 viewDidUnload）以节省内存。通过取消您的网点，您将放弃所有权并让它们被释放。当再次加载视图时（再次显示时），将再次设置出口并调用 viewDidLoad。

# javascript - DOM Storage 可以存储什么？

> ID：10638259
> 
> 赞同：1
> 
> 时间：2012-05-17T15:00:17.473
> 
> 标签：javascript, html, dom, local-storage, session-storage

任何对象都可以存储在[DOM Storage](https://developer.mozilla.org/en/DOM/Storage)中吗？

当我执行以下操作时：

```
// where val is a string and response is an array of objects.
sessionStorage.results= { val: response }; 
```

当我检查`sessionStorage.results`我得到的价值时`"[object Object]"`

我可以存储这样的对象吗？还是 Storage 只存储字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T15:02:47.503

您只能将字符串存储在任何类型的[(DOM-)storage](https://developer.mozilla.org/en/DOM/Storage)中。要存储数据对象（简单：没有循环引用，没有特殊的构造函数），您可以将它们转换为 JSON 并从字符串返回以恢复它们。另请参阅[此答案](https://stackoverflow.com/a/10109307/1048572)（[改进](https://stackoverflow.com/a/3146971/1048572)）。

# ruby-on-rails - 卸载Passenger安装的nginx

> ID：10638260
> 
> 赞同：9
> 
> 时间：2012-05-17T15:00:19.037
> 
> 标签：ruby-on-rails, nginx, package, passenger, uninstallation

如何在 Ubuntu 11.04 上卸载作为乘客安装的一部分安装的 nginx？

我应该`gem uninstall passenger`吗？那也会删除 nginx 吗？

这是我跑步时看到的`apt-get remove`：

```
sudo apt-get remove nginx-common nginx-full
Reading package lists... Done
Building dependency tree       
Reading state information... Done
**Package nginx-common is not installed, so not removed
Package nginx-full is not installed, so not removed**
The following packages were automatically installed and are no longer required:
  nspluginwrapper linux-headers-2.6.38-13-generic libmysqlclient-dev libaprutil1-ldap libaprutil1-dev libmysqlclient16 libdb4.8-dev libaprutil1-dbd-sqlite3
  apache2.2-bin linux-headers-2.6.38-14-generic linux-headers-2.6.38-12 linux-headers-2.6.38-13 linux-headers-2.6.38-14 mysql-common linux-headers-2.6.38-12-generic
Use 'apt-get autoremove' to remove them. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:25:37.083

您很可能曾经`passenger-install-nginx-module`安装它。如果你运行`gem uninstall passenger`它，它也会删除依赖的模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:19:09.447

卸载在官方手册《[Phusion Passenger 用户指南，Nginx 版](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#uninstalling)》中有介绍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-09T04:56:06.360

使用以下命令完全删除 Nginx：

```
sudo apt-get purge nginx-*
sudo apt-get autoremove 
```

或者

**对于 Debian/Ubuntu**

```
sudo apt-get remove -y passenger 
```

**红帽/CentOS**

```
sudo yum remove -y passenger 
```

**macOS + 自制软件**

```
brew uninstall passenger 
```

**红宝石**

```
gem uninstall passenger 
```

希望这能解决您的问题！

# c++ - Microsoft HTTP Server API - 使用 SSL，如何要求客户端证书？

> ID：10638272
> 
> 赞同：16
> 
> 时间：2012-05-17T15:01:30.280
> 
> 标签：c++, windows, client-certificates

我目前正在使用 Microsoft HTTP Server API 版本 2.0 ( [http://msdn.microsoft.com/en-us/library/windows/desktop/aa364510(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364510(v=vs.85).aspx) ) 实现一个小型 HTTP 服务器。

我需要在服务器端启用 HTTPS，并且在客户端请求进来时还需要客户端证书（我需要客户端能够验证服务器和服务器来验证客户端，并且它们应该通过 SSL 进行通信）。

到目前为止，我已经能够启用服务器端 SSL，因此我可以安全地连接到 { [https://127.0.0.1:9999/hello](https://127.0.0.1:9999/hello) } 站点，向服务器发出请求并接收响应，但我无法打开请求客户端证书的功能（并验证它）。

我在我的应用程序代码中说我正在监听“{ [https://127.0.0.1:9999/hello](https://127.0.0.1:9999/hello) }” URL（这是我添加到 URL 组的 URL），然后我使用 netsh.exe 工具绑定了 9999端口到 SSL：

```
C:\>netsh http add sslcert ipport=0.0.0.0:9999 certhash=e515b6512e92f4663252eac72c28a784f2d78c6 appid={2C565242-B238-11D3-442D-0008C779D776} clientcertnegotiation=enable 
```

我不确定这个“clientcertnegotiation=enable”到底应该做什么，文档说它应该“打开证书协商”。所以现在我向我的 HTTP 服务器代码添加了一个额外的函数调用：

```
 DWORD answer = 0;
  HTTP_SSL_CLIENT_CERT_INFO sslClientCertInfo;
  ULONG bytesReceived;
  answer = HttpReceiveClientCertificate(hReqQueue, pRequest->ConnectionId, 0,
      &sslClientCertInfo, sizeof( HTTP_SSL_CLIENT_CERT_INFO ), &bytesReceived, NULL ); 
```

我知道现在应该提示客户提供证书，但它不起作用（我可能做错了什么，所以这就是我在这里写我的问题的原因）。“答案”的值为 1168 (ERROR_NOT_FOUND)。我使用 firefox 浏览器作为客户端，并在那里添加了一个证书：工具->选项->查看证书->导入，所以 firefox 可能应该使用该证书或提示输入一些证书，但我怀疑 firefox 没有'根本不会收到服务器对客户端证书的请求。

无论如何，HTTP 服务器应该在什么时候请求客户端证书？我认为它应该是在收到请求之后。为了演示我到底在做什么，我使用了 Microsoft 的 HTTP Server 示例应用程序代码 ( [http://msdn.microsoft.com/en-us/library/windows/desktop/aa364640(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364640(v=vs.85).aspx)），我已经sligthly修改：

```
#include "precomp.h"
#include <iostream>

//
// Macros.
//
#define INITIALIZE_HTTP_RESPONSE( resp, status, reason )    \
do                                                      \
{                                                       \
    RtlZeroMemory( (resp), sizeof(*(resp)) );           \
    (resp)->StatusCode = (status);                      \
    (resp)->pReason = (reason);                         \
    (resp)->ReasonLength = (USHORT) strlen(reason);     \
} while (FALSE)

#define ADD_KNOWN_HEADER(Response, HeaderId, RawValue)               \
do                                                               \
{                                                                \
    (Response).Headers.KnownHeaders[(HeaderId)].pRawValue =      \
                                                      (RawValue);\
    (Response).Headers.KnownHeaders[(HeaderId)].RawValueLength = \
        (USHORT) strlen(RawValue);                               \
} while(FALSE)

#define ALLOC_MEM(cb) HeapAlloc(GetProcessHeap(), 0, (cb))

#define FREE_MEM(ptr) HeapFree(GetProcessHeap(), 0, (ptr))

//
// Prototypes.
//
DWORD DoReceiveRequests(HANDLE hReqQueue);

DWORD SendHttpResponse(HANDLE hReqQueue, PHTTP_REQUEST pRequest, USHORT StatusCode, PSTR pReason, PSTR pEntity);

DWORD SendHttpPostResponse(HANDLE hReqQueue, PHTTP_REQUEST pRequest);

/*******************************************************************++

Routine Description:
main routine

Arguments:
argc - # of command line arguments.
argv - Arguments.

Return Value:
Success/Failure

--*******************************************************************/
int __cdecl wmain(int argc, wchar_t * argv[])
{
ULONG           retCode;
HANDLE          hReqQueue      = NULL;  //request queue handle
int             UrlAdded       = 0;
HTTPAPI_VERSION HttpApiVersion = HTTPAPI_VERSION_2;

retCode = HttpInitialize( 
            HttpApiVersion,
            HTTP_INITIALIZE_SERVER ,
            NULL                     
            );

if (retCode == NO_ERROR)
{
  // If intialize succeeded, create server session
  HTTP_SERVER_SESSION_ID serverSessionId = NULL;
  retCode = HttpCreateServerSession(HttpApiVersion, &serverSessionId, 0);
  if (retCode == NO_ERROR)
  {
    // server session creation succeeded

    //create request queue
    retCode = HttpCreateRequestQueue(HttpApiVersion, NULL, NULL, 0, &hReqQueue);
    if (retCode == NO_ERROR)
    {
      //create the URL group
      HTTP_URL_GROUP_ID urlGroupId = NULL;
      retCode = HttpCreateUrlGroup(serverSessionId, &urlGroupId, 0);
      if (retCode == NO_ERROR) 
      {
        retCode = HttpAddUrlToUrlGroup(urlGroupId, L"https://127.0.0.1:9999/hello", 0, 0);
        if (retCode == NO_ERROR)
        {
          //Set url group properties 

          //First let's set the binding property:
          HTTP_BINDING_INFO bindingInfo;
          bindingInfo.RequestQueueHandle = hReqQueue;
          HTTP_PROPERTY_FLAGS propertyFlags;
          propertyFlags.Present = 1;
          bindingInfo.Flags = propertyFlags;
          retCode = HttpSetUrlGroupProperty(
                    urlGroupId,
                    HttpServerBindingProperty,
                    &bindingInfo,
                        sizeof( HTTP_BINDING_INFO ));

          DoReceiveRequests(hReqQueue);
        }

        HttpCloseUrlGroup(urlGroupId);
      }//if HttpCreateUrlGroup succeeded

      HttpCloseRequestQueue(hReqQueue);
    }//if HttpCreateRequestQueue succeeded

    HttpCloseServerSession(serverSessionId);        
  } // if HttpCreateServerSession succeeded

  HttpTerminate(HTTP_INITIALIZE_SERVER, NULL);
}// if httpInialize succeeded

return retCode;

}//main

/*******************************************************************++

Routine Description:
The function to receive a request. This function calls the  
corresponding function to handle the response.

Arguments:
hReqQueue - Handle to the request queue

Return Value:
Success/Failure.

--*******************************************************************/
DWORD DoReceiveRequests(IN HANDLE hReqQueue)
{
ULONG              result;
HTTP_REQUEST_ID    requestId;
DWORD              bytesRead;
PHTTP_REQUEST      pRequest;
PCHAR              pRequestBuffer;
ULONG              RequestBufferLength;

//
// Allocate a 2 KB buffer. This size should work for most 
// requests. The buffer size can be increased if required. Space
// is also required for an HTTP_REQUEST structure.
//
RequestBufferLength = sizeof(HTTP_REQUEST) + 2048;
pRequestBuffer      = (PCHAR) ALLOC_MEM( RequestBufferLength );

if (pRequestBuffer == NULL)
{
    return ERROR_NOT_ENOUGH_MEMORY;
}

pRequest = (PHTTP_REQUEST)pRequestBuffer;

//
// Wait for a new request. This is indicated by a NULL 
// request ID.
//

HTTP_SET_NULL_ID( &requestId );

for(;;)
{
    RtlZeroMemory(pRequest, RequestBufferLength);

    result = HttpReceiveHttpRequest(
                hReqQueue,          // Req Queue
                requestId,          // Req ID
                0,                  // Flags
                pRequest,           // HTTP request buffer
                RequestBufferLength,// req buffer length
                &bytesRead,         // bytes received
                NULL                // LPOVERLAPPED
                );
          if(NO_ERROR == result)
    {

        DWORD answer = 0;
        HTTP_SSL_CLIENT_CERT_INFO sslClientCertInfo;
        ULONG bytesReceived;
        answer = HttpReceiveClientCertificate(hReqQueue, pRequest->ConnectionId, 0,
                &sslClientCertInfo, sizeof( HTTP_SSL_CLIENT_CERT_INFO ), &bytesReceived, NULL );

        if (answer != NO_ERROR)
        {
          result = SendHttpResponse(hReqQueue, pRequest, 401, "Unauthorized request", "Unauthorized request");
        }
        else
        {
          result = SendHttpResponse(hReqQueue, pRequest, 200, "OK", "OK");
        }

        if (result != NO_ERROR)
        {
          break; //if failed to send response, stop listening for further incoming requests
        }
        //
        // Reset the Request ID to handle the next request.
        //
        HTTP_SET_NULL_ID( &requestId );
    }
    else
    {
        break;
    }

}
if(pRequestBuffer)
{
    FREE_MEM( pRequestBuffer );
}

return result;
}

/*******************************************************************++

Routine Description:
The routine sends a HTTP response

Arguments:
hReqQueue     - Handle to the request queue
pRequest      - The parsed HTTP request
StatusCode    - Response Status Code
pReason       - Response reason phrase
pEntityString - Response entity body

Return Value:
Success/Failure.
--*******************************************************************/

DWORD SendHttpResponse(
IN HANDLE        hReqQueue,
IN PHTTP_REQUEST pRequest,
IN USHORT        StatusCode,
IN PSTR          pReason,
IN PSTR          pEntityString
)
{
HTTP_RESPONSE   response;
HTTP_DATA_CHUNK dataChunk;
DWORD           result;
DWORD           bytesSent;

INITIALIZE_HTTP_RESPONSE(&response, StatusCode, pReason);
ADD_KNOWN_HEADER(response, HttpHeaderContentType, "text/html");

if(pEntityString)
{
    // 
    // Add an entity chunk.
    //
    dataChunk.DataChunkType           = HttpDataChunkFromMemory;
    dataChunk.FromMemory.pBuffer      = pEntityString;
    dataChunk.FromMemory.BufferLength = 
                                   (ULONG) strlen(pEntityString);

    response.EntityChunkCount         = 1;
    response.pEntityChunks            = &dataChunk;
}

result = HttpSendHttpResponse(
                hReqQueue,           // ReqQueueHandle
                pRequest->RequestId, // Request ID
                0,                   // Flags
                &response,           // HTTP response
                NULL,                // pReserved1
                &bytesSent,          // bytes sent  (OPTIONAL)
                NULL,                // pReserved2  (must be NULL)
                0,                   // Reserved3   (must be 0)
                NULL,                // LPOVERLAPPED(OPTIONAL)
                NULL                 // pReserved4  (must be NULL)
                ); 

if(result != NO_ERROR)
{
    wprintf(L"HttpSendHttpResponse failed with %lu \n", result);
}

return result;
} 
```

所以我的问题是，如何启用需要客户端证书的功能，以及在收到证书后如何验证证书（当前示例代码仅尝试从客户端接收证书，缺少验证部分）？我真的没有从互联网上找到任何使用 Microsoft HTTP Server API 并需要客户端证书的示例。

已经提前谢谢大家了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-28T04:58:27.230

[`HTTP_SERVICE_CONFIG_SSL_PARAM`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364647%28v=vs.85%29.aspx)最终传递给的结构[`HttpSetServiceConfiguration`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364503%28v=vs.85%29.aspx)用于启用客户端证书（通过`HTTP_SERVICE_CONFIG_SSL_FLAG_NEGOTIATE_CLIENT_CERT`标志）和默认验证步骤（通过`DefaultCertCheckMode`）的协商。

您可以通过调用来检索证书以手动进行额外的验证[`HttpReceiveClientCertificate`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364494%28v=vs.85%29.aspx)。

有几个不错的例子，但大多数似乎都是从 .net 调用的。配置显示在[p/Invoke 页面](http://www.pinvoke.net/default.aspx/httpapi/HttpSetServiceConfiguration.html)上的示例中，删除 .net 开销留给读者作为练习：

```
HTTPAPI_VERSION httpApiVersion = new HTTPAPI_VERSION(1, 0);
retVal = HttpInitialize(httpApiVersion, HTTP_INITIALIZE_CONFIG, IntPtr.Zero);
if ((uint)NOERROR == retVal)
{
HTTP_SERVICE_CONFIG_SSL_SET configSslSet = new HTTP_SERVICE_CONFIG_SSL_SET();
HTTP_SERVICE_CONFIG_SSL_KEY httpServiceConfigSslKey = new HTTP_SERVICE_CONFIG_SSL_KEY();
HTTP_SERVICE_CONFIG_SSL_PARAM configSslParam = new HTTP_SERVICE_CONFIG_SSL_PARAM();

IPAddress ip = IPAddress.Parse(ipAddress);

IPEndPoint ipEndPoint = new IPEndPoint(ip, port);
// serialize the endpoint to a SocketAddress and create an array to hold the values.  Pin the array.
SocketAddress socketAddress = ipEndPoint.Serialize();
byte[] socketBytes = new byte[socketAddress.Size];
GCHandle handleSocketAddress = GCHandle.Alloc(socketBytes, GCHandleType.Pinned);
// Should copy the first 16 bytes (the SocketAddress has a 32 byte buffer, the size will only be 16,
//which is what the SOCKADDR accepts
for (int i = 0; i < socketAddress.Size; ++i)
{
    socketBytes[i] = socketAddress[i];
}

httpServiceConfigSslKey.pIpPort = handleSocketAddress.AddrOfPinnedObject();

GCHandle handleHash = GCHandle.Alloc(hash, GCHandleType.Pinned);
configSslParam.AppId = Guid.NewGuid();
configSslParam.DefaultCertCheckMode = 0;
configSslParam.DefaultFlags = HTTP_SERVICE_CONFIG_SSL_FLAG_NEGOTIATE_CLIENT_CERT;
configSslParam.DefaultRevocationFreshnessTime = 0;
configSslParam.DefaultRevocationUrlRetrievalTimeout = 0;
configSslParam.pSslCertStoreName = StoreName.My.ToString();
configSslParam.pSslHash = handleHash.AddrOfPinnedObject(); 
configSslParam.SslHashLength = hash.Length;
configSslSet.ParamDesc = configSslParam;
configSslSet.KeyDesc = httpServiceConfigSslKey;

IntPtr pInputConfigInfo = Marshal.AllocCoTaskMem(Marshal.SizeOf(typeof(HTTP_SERVICE_CONFIG_SSL_SET)));
Marshal.StructureToPtr(configSslSet, pInputConfigInfo, false);

retVal = HttpSetServiceConfiguration(IntPtr.Zero,
    HTTP_SERVICE_CONFIG_ID.HttpServiceConfigSSLCertInfo,
    pInputConfigInfo,
    Marshal.SizeOf(configSslSet),
    IntPtr.Zero);

if ((uint)ERROR_ALREADY_EXISTS == retVal)  // ERROR_ALREADY_EXISTS = 183
{
    retVal = HttpDeleteServiceConfiguration(IntPtr.Zero,
    HTTP_SERVICE_CONFIG_ID.HttpServiceConfigSSLCertInfo,
    pInputConfigInfo,
    Marshal.SizeOf(configSslSet),
    IntPtr.Zero);

    if ((uint)NOERROR == retVal)
    {
    retVal = HttpSetServiceConfiguration(IntPtr.Zero,
        HTTP_SERVICE_CONFIG_ID.HttpServiceConfigSSLCertInfo,
        pInputConfigInfo,
        Marshal.SizeOf(configSslSet),
        IntPtr.Zero);
    }
} 
```

有一个[单独的 pastebin](http://pastebin.com/pVg5PCZL#)用于`netsh`进行配置，但会访问收到的证书：

```
for(;;)
{
    RtlZeroMemory(pRequest, RequestBufferLength);

    result = HttpReceiveHttpRequest(
                hReqQueue,          // Req Queue
                requestId,          // Req ID
                0,                  // Flags
                pRequest,           // HTTP request buffer
                RequestBufferLength,// req buffer length
                &bytesRead,         // bytes received
                NULL                // LPOVERLAPPED
                );
          if(NO_ERROR == result)
    {

        DWORD answer = 0;
        HTTP_SSL_CLIENT_CERT_INFO sslClientCertInfo;
        ULONG bytesReceived;
        answer = HttpReceiveClientCertificate(hReqQueue, pRequest->ConnectionId, 0,
                &sslClientCertInfo, sizeof( HTTP_SSL_CLIENT_CERT_INFO ), &bytesReceived, NULL );

        if (answer != NO_ERROR)
        {
          result = SendHttpResponse(hReqQueue, pRequest, 401, "Unauthorized request", "Unauthorized request");
        }
        else
        {
          result = SendHttpResponse(hReqQueue, pRequest, 200, "OK", "OK");
        }

        if (result != NO_ERROR)
        {
          break; //if failed to send response, stop listening for further incoming requests
        }
        //
        // Reset the Request ID to handle the next request.
        //
        HTTP_SET_NULL_ID( &requestId );
    }
    else
    {
        break;
    }

} 
```

# scroll - TreeTable 滚动到项目

> ID：10638273
> 
> 赞同：3
> 
> 时间：2012-05-17T15:01:37.113
> 
> 标签：scroll, vaadin, treetable

我使用 TreeTable。单击按钮时，我想展开项目并选择父项目内的项目之一。但我也想滚动到所选项目。如果项目可见（所有父项目均已展开），则一切正常。但是，如果一开始不可见（某些父项已折叠），则滚动到最近的可见父项。

我的代码看起来像这样：

```
testButton.addListener(new Button.ClickListener() {

    public void buttonClick(ClickEvent event) {
       // expanding items for selected one
       ItemId parentId = selectedItem.getParent();
       while (parentId ! = null) {
         treeTable.setCollapsed(parentId , false);
         parentId = parentId.getParent();
       }
       // select the item
       treeTable.select(selectedItem);
       // scroll to seledcted item
       treeTable.setCurrentPageFirstItemId(selectedItem);
    }
}); 
```

是否有任何解决方案可以滚动到所选项目，而不是滚动到所选项目最近的可见父项目？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T12:43:55.717

我把它放在方法的第一行：

```
treeTable.focus(); 
```

它看起来像它的作品。(Vaadin 6.7.9)

# javascript - JQUERY 可排序插件，当可拖动元素悬停在指定元素时启动功能

> ID：10638277
> 
> 赞同：0
> 
> 时间：2012-05-17T15:01:48.630
> 
> 标签：javascript, jquery, jquery-plugins, jquery-ui-sortable

当可拖动元素悬停在指定的元素上时如何启动功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:07:19.437

在这里试试：http: [//jqueryui.com/demos/draggable/#event-stop](http://jqueryui.com/demos/draggable/#event-stop)。在事件下，查看停止事件。当您停止移动鼠标时它会触发。

**更新**

尝试将[jQuery 悬停](http://api.jquery.com/hover/)在要对悬停做出反应的元素上。

# jquery - jquery下拉验证提交

> ID：10638279
> 
> 赞同：1
> 
> 时间：2012-05-17T15:01:57.633
> 
> 标签：jquery, html, jquery-validate

我正在尝试使此下拉菜单验证正常工作，我希望有人能让我到达终点。此时验证适用于所有文本字段，包括电子邮件和电话，以及下拉菜单。我的问题是，如果我第一次发送表单并收到错误，它会重定向回来说明错误。现在，如果用户正确选择所有字段并尝试重新提交，则提交按钮不会发送。为了我的个人健康和理智，请有人帮助我。

这是我服务器上文件的链接：http: [//amckeedesignportfolio.com/eLearningModule/newForm.php](http://amckeedesignportfolio.com/eLearningModule/newForm.php)

这是代码：

```
 <html>

    <head>
        <title>NJR Medical No-Bite V Survey</title>
        <link rel="stylesheet" type="text/css"
        href="style.css">
        <script type="text/javascript" src="js/jquery-1.5.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.validate.min.js"></script>
        <script type="text/javascript" src="js/additional-methods.min.js"></script>
        <script type="text/javascript">
            jQuery.validator.setDefaults({
                debug: true,
                success: "valid"
            });;
            $(document).ready(function () {
                // validate signup form on keyup and submit
                $("#contactForm").validate({
                    rules: {
                        fName: "required",
                        lName: "required",
                        telephone: "required",
                        email: {
                            required: true,
                            email: true
                        },
                        telephone: {
                            required: true,
                            phoneUS: true
                        },
                        position: "required",
                        hospital: "required",
                        hospitalCity: "required",
                        hospitalState: "required",
                        area: "required",
                        experience: "required",
                        question1: "required",
                        question2: "required",
                        question3: "required",
                        question4: "required",
                        question5: "required",
                        question6: "required",
                        question7: "required",
                        question8: "required",
                        question9: "required",
                        question10: "required",
                        question11: "required",
                    },
                    messages: {
                        fName: "Please enter your firstname.",
                        lName: "Please enter your lastname.",
                        telephone: "Please enter a valid telephone number.",
                        email: "Please specify a valid email address.",
                        position: "Please enter your current position.",
                        hospitalCity: "Please enter your current hospital.",
                        area: "Please enter the current floor or area you work.",
                    }
                });
                /* state validation*/
                $validator.addMethod("required", function (value, element) {
                    return this.optional(element) || (value.indexOf("") == -1);
                }, "Please select a option.");
            });
        </script>
    </head>

    <body>
        <div id="wrapper">
            <div class="ribbonForm">
                <img src="images/logoLarge.png" alt="NJR Medical Logo" height="60" width="280"
                />
                <h1>Contact Form</h1>
                <h2 class="please">Please take a few minutes to fill out the contact info and short survey
                    so that you can proceed with entering the NJR Medical No-Bite V eLearning
                    Module. All of the questions and contact info must be completed before
                    proceeding to the module.</h2>
                <form name="request" action="newSurveyProcess.php"
                method="POST" id="contactForm" onSubmit="valid_check();">
                    <h2>First Name :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="fName" type="text" class="box" />
                    </div>
                    <h2>Last Name :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="lName" type="text" class="box" />
                    </div>
                    <h2>Contact Number :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="telephone" type="text" class="box" />
                    </div>
                    <h2>Email Address :
                        <span style="padding-left:37px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="email" type="text" class="box" />
                    </div>
                    <h2>Position :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="position" type="text" class="box" />
                    </div>
                    <h2>Hospital :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="hospital" type="text" class="box" />
                    </div>
                    <h2>Hospital City :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="hospitalCity" type="text" class="box" />
                    </div>
                    <h2>Hospital State :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <select name="hospitalState" class="required">
                        <option value="" selected="selected">state</option>
                        <option value="AK">AK</option>
                        <option value="AL">AL</option>
                        <option value="AR">AR</option>
                        <option value="AZ">AZ</option>
                        <option value="CA">CA</option>
                        <option value="CO">CO</option>
                        <option value="CT">CT</option>
                        <option value="DC">DC</option>
                        <option value="DE">DE</option>
                        <option value="FL">FL</option>
                        <option value="GA">GA</option>
                        <option value="HI">HI</option>
                        <option value="IA">IA</option>
                        <option value="ID">ID</option>
                        <option value="IL">IL</option>
                        <option value="IN">IN</option>
                        <option value="KS">KS</option>
                        <option value="KY">KY</option>
                        <option value="LA">LA</option>
                        <option value="MA">MA</option>
                        <option value="MD">MD</option>
                        <option value="ME">ME</option>
                        <option value="MI">MI</option>
                        <option value="MN">MN</option>
                        <option value="MO">MO</option>
                        <option value="MS">MS</option>
                        <option value="MT">MT</option>
                        <option value="NC">NC</option>
                        <option value="ND">ND</option>
                        <option value="NE">NE</option>
                        <option value="NH">NH</option>
                        <option value="NJ">NJ</option>
                        <option value="NM">NM</option>
                        <option value="NV">NV</option>
                        <option value="NY">NY</option>
                        <option value="OH">OH</option>
                        <option value="OK">OK</option>
                        <option value="OR">OR</option>
                        <option value="PA">PA</option>
                        <option value="RI">RI</option>
                        <option value="SC">SC</option>
                        <option value="SD">SD</option>
                        <option value="TN">TN</option>
                        <option value="TX">TX</option>
                        <option value="UT">UT</option>
                        <option value="VA">VA</option>
                        <option value="VT">VT</option>
                        <option value="WA">WA</option>
                        <option value="WI">WI</option>
                        <option value="WV">WV</option>
                        <option value="WY">WY</option>
                    </select>
                    <h2>Area / Floor that you work :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <input name="area" type="text" class="box" />
                    </div>
                    <h2>I have worked in an ICU for:
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <select name="experience" class="required">
                        <option value="" selected="selected">select year range</option>
                        <option value="2">2 yrs</option>
                        <option value="2-4">2-4yrs</option>
                        <option value="5-10">5-10yrs</option>
                        <option value="11-20">11-20yrs</option>
                        <option value="+20yrs">more than 20yrs</option>
                    </select>
                    <h2>Comments :
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <div class="textbox_holder">
                        <textarea name="message" rows="5" cols="60"></textarea>
                    </div>
                    <h1>Survey Questions</h1>
                    <h2>Please be aware that you must select an answer to every question or your
                        form will not process and allow you to proceed. You must be allowed to
                        proceed for "The No- Bite V eLearning Module" to begin.
                        <span style="padding-left:
                                        25px;"></span>
                    </h2>
                    <h2>1\. How often do you have a patient who resists oral care?
                        <span style="padding-left:
                                        25px;"></span>
                    </h2>
                    <br/>
                    <select name="question1" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Never">Never</option>
                        <option value="Rarely">Rarely</option>
                        <option value="Sometimes">Sometimes</option>
                        <option value="Always">Always</option>
                    </select>
                    <h2>2\. How often do you have a patient bite on oral swabs with oral care?
                        <span
                        style=" 
                                        padding-left:25px;"></span>
                    </h2>
                    <select name="question2" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Never">Never</option>
                        <option value="Rarely">Rarely</option>
                        <option value="Sometimes">Sometimes</option>
                        <option value="Always">Always</option>
                    </select>
                    <h2>3\. Have you ever had a patient break or damage a green swab from biting
                        it?
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <select name="question3" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <h2>4\. How often do you have a patient bite on a Yankauer suction with oral
                        care?
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <select name="question4" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Never">Never</option>
                        <option value="Rarely">Rarely</option>
                        <option value="Sometimes">Sometimes</option>
                        <option value="Always">Always</option>
                    </select>
                    <h2>5\. Have you ever had a patient break or damage a Yankauer suction from
                        biting it?
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <select name="question5" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <h2>6\. Have you ever been biten during mouth care.?
                        <span style="padding-left:
                                                25px;"></span>
                    </h2>
                    <select name="question6" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <h2>7\. Do you think patients who bite down and resist oral care tend to receive
                        inadequate oral hygiene?
                        <span style="padding-
    left:25px;"></span>
                    </h2>
                    <select name="question7" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <h2>8\. How often do you have a Naso-Tracheal Suction Catherer coil in the
                        back of a patient's mouth upon insertion?
                        <span style="padding-left:25px;"></span>
                    </h2>
                    <select name="question8" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Never">Never</option>
                        <option value="Rarely">Rarely</option>
                        <option value="Sometimes">Sometimes</option>
                        <option value="Always">Always</option>
                    </select>
                    <h2>9\. Do you think that patients who have a Naso- Tracheal Suction Catheter
                        coil in the back of a patient's mouth receive inadequate Naso-Tracheal
                        Suctioning?
                        <span style="
                                                padding-left:25px;"></span>
                    </h2>
                    <select name="question9" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <h2>10\. How often do you have a patient bite an Oral-Pharnygeal Suction Catheter?
                        <span
                        style="padding-left:25px;"></span>
                    </h2>
                    <select name="question10" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Never">Never</option>
                        <option value="Rarely">Rarely</option>
                        <option value="Sometimes">Sometimes</option>
                        <option value="Always">Always</option>
                    </select>
                    <h2>11\. Have you ever had a patient damage an Oral- Pharnygeal Suction Catheter
                        from biting it?
                        <span style="padding-
    left:25px;"></span>
                    </h2>
                    <select name="question11" class="required">
                        <option value="" selected="selected">--select--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <h3>
                        <input name="submit" type="submit" value="submit" />
                    </h3>
                </form>
                <!--closes form-->
            </div>
            <!--closes ribbonForm -->
        </div>
        <!--closes wrapper-->
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:49:07.440

能否请您删除以下部分

```
jQuery.validator.setDefaults({
                debug: true,
                success: "valid"
            });; 
```

现在它的工作..请检查链接[http://jsfiddle.net/R5egy/3/](http://jsfiddle.net/R5egy/3/)

# php - PHP中带有计数器的for循环不起作用

> ID：10638282
> 
> 赞同：0
> 
> 时间：2012-05-17T15:02:07.633
> 
> 标签：php, for-loop, counter, jquery-masonry

我正在开展一个学校项目，以从报纸上获取 RSS 提要，并将它们设计成[Masonry](http://masonry.desandro.com)布局。[我可以使用Simplepie](http://www.simplepie.org)类将 rss 提要转换为 html，但我想为每篇文章提供一个从 1 到 5 的列大小，并带有一个计数器。

这是我在 html 中得到的：

```
<div class="post col1 col2 col3 col4 col5 col1 col2 col3 col4 col5"> <!-- begin post -->
<h3 class="title"><a href="http://feedproxy.google.com/~r/dso-nieuws-sport/~3/zfFYeKYGagk/detail.aspx">Bergen naar halve finales play-offs basket</a></h3> 
```

相反，我希望第一篇文章有​​“post col1”类，第二篇文章有“post col2”，五篇文章后第六篇应该再次得到“col1”，依此类推..

这是我的 PHP 代码：

```
<?php if ($sportfeed->data): ?>
 <?php $sportitems = $sportfeed->get_items(); ?>

      <?php foreach($sportitems as $sportitem): ?>

            <?php $enclosure = $sportitem->get_enclosure(0); ?>

                  <?php if ($enclosure):?> 

                    <div class="post

                    <?php  $teller = 1;
                           for ($i = 1; $i <= 10 /* aantal artikels in feed */; $i++) {
                           if ($teller == 1) {

                             echo " col1";
                             ++$teller;

                              } else if ($teller ==2) 
                              {
                                echo " col2"; 
                                ++$teller;
                               } else if ($teller ==3) 
                               {
                                 echo " col3"; 
                                 ++$teller; 
                                 } else if ($teller ==4) 
                                 {
                                     echo " col4"; 
                                     ++$teller;
                                  } else 
                                  { echo " col5"; 
                                  $teller =1; 
                                  }

                            }?>"> <!-- begin post -->
                    <h3 class="title"><a href="<?php echo $sportitem->get_permalink(); ?>"><?php echo $sportitem->get_title(); ?></a></h3>
                    <img src ="<?php echo $enclosure->get_link(); ?> "class="img_artikel"/>
                    </div> <!-- einde post -->  

                  <?php endif; ?> 

       <?php endforeach; ?> 
```

提前非常感谢！这将意味着很多，让我的项目继续下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:24:02.130

你使用了很多`<?php`和`?>`标签，而你只需要一对。
您还使用`endif`, `endforeach`while`}`对我来说似乎更合乎逻辑。我重新格式化了你的代码：

```
if ($sportfeed->data)
{
    $sportitems = $sportfeed->get_items(); 
    $teller = 1;
    foreach($sportitems as $sportitem)
    {
        $enclosure = $sportitem->get_enclosure(0); 
        if ($enclosure)
        {
            echo '<div class="post col' . $teller;
            $teller = $teller == 5 ? 1 : $teller + 1;

            echo '"> <!-- begin post --><h3 class="title"><a href="' . $sportitem-    >get_permalink(); . '">' . $sportitem->get_title(); . '</a></h3>';
            echo '<img src="' . $enclosure->get_link(); . '"class="img_artikel"/></div>    <!-- einde post -->';
        }
    }
} 
```

`for`如果我确实了解您想要实现的目标，则不需要整个循环。上面的代码应该打印如下输出：

```
<div class="post col1"> .... </div>
<div class="post col2"> .... </div>
<div class="post col3"> .... </div>
<div class="post col4"> .... </div>
<div class="post col5"> .... </div>
<div class="post col1"> .... </div>
<div class="post col2"> .... </div> 
```

希望它有所帮助: *)（我想你也是荷兰人，哈哈）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:25:16.007

```
<?php
if ($sportfeed->data):
    $sportitems = $sportfeed->get_items();
    $i = 1;
    foreach($sportitems as $sportitem):
        $enclosure = $sportitem->get_enclosure(0);
        if ($enclosure):
            echo '<div class="post';
            if ($i % 5 == 0) {
                echo " col5";
            } else {
                echo " col" . ($i % 5);
            }
            echo '"> <!-- begin post -->';
 ?>
     <h3 class="title"><a href="<?php echo $sportitem->get_permalink(); ?>"><?php echo $sportitem->get_title(); ?></a></h3>
     <img src ="<?php echo $enclosure->get_link(); ?> "class="img_artikel"/>
 </div> <!-- einde post -->  
        <?php endif; ?>
        <?php $i++; ?>
    <?php endforeach; ?>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:21:45.377

```
$teller = 1;
for ($i = 1; $i <= 10 ; $i++) {
   if($i%6==0)
    {
       $teller=1;
       echo " col1";
    }else{
      echo " col".$teller;
    }
    $teller++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:17:43.107

尝试使用模数而不是创建计数器；`$teller = $i % 5`将返回余数，所以它会给你一个从 0 到 4 的数字。

```
for ($i = 1; $i <= 10 /* aantal artikels in feed */; $i++) {
    $teller = $i % 5;

    if ($teller == 0) {
        echo " col5";
    } else {
        echo " col" . $teller;
    }
} 
```

应该管用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T15:44:30.383

我想你快到了，但我认为问题是如果出纳员 = 1 然后你增加它所以它等于 2 执行第二个块等等，只需尝试将它全部放在循环中并在最后增加一次......

我认为这样的事情会起作用：

```
<?php  $teller = 1;                            
 for ($i = 1; $i <= 10; $i++)
{                           
   if ($teller == 1) 
   {                               
      echo " col1";
   } 
   else if ($teller ==2)
   { 
      echo " col2";                                
    } 
    else if ($teller ==3)                                
    {                                 
    echo " col3";        
    } 
     else if ($teller ==4)                                   
    {                                      
      echo " col4"; 
               } 
   else                                    
   {
     echo " col5"; 
      $teller =1;
   } 

echo " '>";              
echo"<h3 class='title'> <a href='#'></a></h3>";                   
echo"<img src ='#' class='img_artikel'/>";                 
echo"</div>"; 
$teller++;
}

?> 
```

# linux - 当两个进程试图同时执行一个 perl 文件时，会发生“文本文件忙”吗？

> ID：10638283
> 
> 赞同：9
> 
> 时间：2012-05-17T15:02:09.000
> 
> 标签：linux

当我尝试执行 perl 文件而该文件当前正被另一个进程使用时，我收到此消息 - “文本文件忙”。

根据这个[/usr/bin/perl: bad interpreter: Text file busy](https://stackoverflow.com/questions/1384398/usr-bin-perl-bad-interpreter-text-file-busy)，当我尝试执行 perl 文件打开以进行写入时，会发生此问题。

但是文件的权限是-r-xr-xr-x。它不提供写入权限。

当两个进程试图同时执行一个 perl 文件时，会发生“文本文件忙”吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T15:11:26.847

不，这不会仅仅因为两个 Perl 脚本同时执行而发生。

更可能的解释是，当操作系统试图读取它的 shebang 行以确定要使用的解释器时，脚本本身是可写的。

如果外部进程试图升级或修改 Perl 解释器本身，或者它所依赖的共享库之一，也会发生这种情况。请注意，文件权限通常不适用于超级用户帐户，例如 root，因此任何以超级用户身份运行的进程仍然可以尝试修改 Perl 解释器，尽管没有`+w`设置任何位。

（也就是说，在 POSIX 风格的操作系统上，大多数表现良好的操作系统升级工具会将升级版本的二进制文件写入同一文件系统上的新文件，完成后关闭该文件，并将其重命名为原始文件（原子操作）——这样附加的 inode`/usr/bin/perl`本身就永远不会打开以供写入。因此，在表现良好的系统上，您看到的错误在实践中不应该出现）。

您可以使用该`fuser`命令查看谁为您的脚本或其解释器打开了文件：

```
$ sudo fuser /usr/bin/perl -uv
                     USER        PID ACCESS COMMAND
/usr/bin/perl:       root      16579 f.... (root)python 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-15T06:14:58.843

> 但是文件的权限是-r-xr-xr-x。它不提供写入权限。

权限可以在打开脚本写入后，脚本运行前设置。

下面的代码示例`your-script`在当前目录中编写一个新的 perl 脚本，使其可执行，同时删除写权限，并尝试运行 perl 脚本。最终权限是，`-r-xr-xr-x`但文件仍然打开以进行写入，这就是脚本生成*“文本文件忙”*错误的原因：

```
#!/usr/bin/env python3
import os
import stat
import subprocess

file = open('./your-script', 'w') # specify full path
try:
    file.write("#!/usr/bin/perl\nprint 'unreachable';") 
    file.flush() # make sure the content is sent to OS
    os.chmod(file.name, 0o555) # make executable
    print(stat.filemode(os.stat(file.name).st_mode)) # -r-xr-xr-x
    subprocess.call(file.name) # run it
except Exception as e:
    print(e)
finally:
    os.remove(file.name) 
```

# jquery - jQuery UI 可排序

> ID：10638284
> 
> 赞同：0
> 
> 时间：2012-05-17T15:02:15.833
> 
> 标签：jquery, jquery-ui

我有一个 ul，有点像这样：

```
<ul id="sortable">
   <li data-name="name1">
   <li data-name="name2">
   <li data-name="name3">
</ul> 
```

我正在使用 jQuery 可排序，我需要知道，当排序发生变化时，lis 的顺序是什么。我在用：

```
$("#sortable").sortable({ 
        axis: 'y',
        stop: function(evt, ui){
            console.log($("#sortable").sortable('toArray'));
        }
    }); 
```

“toArray”的问题在于它仅依赖于项目的唯一 ID，出于某种原因，我不能在这些 lis 上使用该属性。

有没有办法让 toArray，返回一个带有数据属性数据名而不是 id 的数组？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:06:01.870

尝试

```
$("#sortable").sortable('toArray', { attribute: 'data-name' }) 
```

[工作示例](http://jsfiddle.net/sSkPx/)

# c++ - unique_ptr 设置

> ID：10638289
> 
> 赞同：1
> 
> 时间：2012-05-17T15:02:44.467
> 
> 标签：c++, c++11, unique-ptr

我有以下情况：

```
if (condition)
{
    std::unique_ptr<AClass> a(new AClass);

    // code that breaks various laws of physics
} 
```

但我需要更改它，因为指针现在可能是两种类型之一，但如果我这样做：

```
if (condition)
{
    if (whichOne)
        std::unique_ptr<AClass> a(new AClass);
    else
        std::unique_ptr<AClass> a(new BClass);

    // code that fixes various laws of physics
} 
```

它无法编译，因为 a 超出范围。

我试过

```
std::unique_ptr<AClassBase>;

if (condition)
{
    if (whichOne)
        a(new AClass);
    else
        a(new BClass);

    // code that tweaks various laws of physics
} 
```

但这失败了，因为需要使用不是来自基类的成员函数，而且我无权访问基类的代码。

必须有一种优雅的方式来解决这个问题，但我看不到它，你能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:05:13.573

> 它无法编译，因为 a 超出范围

使用`reset`成员函数来解决这个问题：

```
std::unique_ptr<AClassBase> a;

if (condition)
{
    if (whichOne)
        a.reset(new AClass);
    else
        a.reset(new BClass);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T15:22:21.580

你能重构成

```
 std::unique_ptr<AClassBase> base;
   if( condition ) 
   {
      if(whichone)
      {
         std::unique_ptr<AClass> a(new AClass);
         // Break laws of physics with an AClass

         base = std::move(a);
      }
      else
      {
         std::unique_ptr<BClass> b(new BClass);
         // Break laws of physics with an BClass

         base = std::move(b);
      }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:26:31.347

一种选择是使用`?:`：

```
std::unique_ptr<AClassBase> a(whichOne ? (new AClass) : (new BClass)); 
```

但我个人只有在整行可以容纳不到 70 个字符左右的情况下才会这样做。

否则，正如其他人所建议的那样，我会`reset`在创建共享指针后使用它来设置共享指针的目标。

# python - ForeignKey vs OneToOne 字段 django

> ID：10638293
> 
> 赞同：9
> 
> 时间：2012-05-17T15:02:48.850
> 
> 标签：python, django, django-models

我需要用一些额外的字段来扩展 django 用户。我在那里找到了两种不同的方式

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    #other fields 
```

或者

```
class UserProfile(models.Model):
    user = models.ForeignKey(User)
    #other fields 
```

他们不一样吗？同步它们后，我发现 mysql 数据库没有区别

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:04:22.373

不，你为什么会这样想？ForeignKey 是一对多的关系——即一个用户可以有许多个人资料。顾名思义，OneToOne 是一对一的关系——用户只能拥有一个配置文件，这听起来更有可能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T15:16:45.920

正如@Daniel Roseman 所说，这是两种不同类型的 rdbms 关系。

您会发现它在您将（可能是错误地）为给定用户拥有多个配置文件的情况下有所区别。在这种情况下`myuser.get_profile()`会引发`MultipleObjectsReturned`异常，因为本质上它是在后台进行[`get()`](https://docs.djangoproject.com/en/1.2/ref/models/querysets/#get)查询。

# ios - 在 iOS 中使用多个语音处理 IO 音频单元

> ID：10638297
> 
> 赞同：4
> 
> 时间：2012-05-17T15:03:07.677
> 
> 标签：ios, audio, core-audio

我正在 iOS 上开发一个 VOIP 项目。根据 Apple 文档的建议，我使用 VoiceProcessingIO 音频单元来获得回声消除支持。

由于我的应用程序需要在渲染和捕获端进行单独的操作（例如，关闭扬声器但让麦克风继续），所以我创建了两个音频单元，一个具有捕获端口关闭，而另一个具有渲染端口关闭。

当前代码运行良好，直到我了解回声消除的工作原理：它需要比较来自麦克风和扬声器的信号。所以我担心的是：像我的方法一样使用两个语音处理音频单元是否安全？此外，由于音频消除主要来自捕获端，是否可以使用 RemoteIO 音频单元进行渲染（连接到扬声器）？

我不是 100% 有信心，因为我只是进入这个区域很短的时间。我也从 developer.apple.com 尝试过，但我从 developer.apple.com 找到的所有示例通常只使用一个音频单元。

任何人都可以提供一些提示吗？我的方法对 VoiceProcessingIO 单元的功能有任何潜在影响吗？

谢谢，福州

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:26:39.937

Firstly, VoiceProcessingIO is (as of me writing this) only echo suppression, not echo cancellation. It essentially just turns off the input if the output is too loud. This means that e.g. in a VOIP call, the far end won't be able to hear you while they are talking. Full echo cancellation would keep the input turned on, but attempt to subtract the echoes of the output.

I would suggest only using one unit, and handle the "shutdown speaker" case yourself programmatically. Your output callback might look like this:

```
OSStatus output_callback(
    void *inRefCon,
    AudioUnitRenderActionFlags  *ioActionFlags,
    const AudioTimeStamp        *inTimeStamp,
    UInt32                      inInputBusNumber,
    UInt32                      inNumberFrames,
    AudioBufferList             *ioData)
{
  my_context_t *context = inRefCon;
  audio_sample_t *dst = (audio_sample_t *)ioData->mBuffers[0].mData;

  if (context->muted) {
    memset(dst, 0, inNumberFrames * sizeof(audio_sample_t));
  } else {
    get_output_samples(context, dst, inNumberFrames);
  }
  return noErr;
} 
```

Giving silence to echo suppression should not affect it adversely.

# xml - PeopleSoft Rowset 仅复制当前行

> ID：10638298
> 
> 赞同：1
> 
> 时间：2012-05-17T15:03:11.783
> 
> 标签：xml, peoplesoft, publisher, rowset

我有一个页面上有几个子记录的记录。我在页面上有一个按钮，通过行集通过 XML Publisher 触发报告。我遇到的问题是我传递给报表的行集包含缓冲区中的所有内容——我只想在报表上显示当前上下文。我现在拥有的：

```
&rs_resp = CreateRowset(Record.AVZ_JD_RESP_TBL);
&rs_expr = CreateRowset(Record.AVZ_JD_EXPR_TBL);
&rs_skls = CreateRowset(Record.AVZ_JD_SKLS_TBL);
&rs_dtl = CreateRowset(Record.AVZ_JD_DTL_TBL, &rs_resp, &rs_expr, &rs_skls 
```

&RS0 = GetLevel0().GetRow(1).GetRowset(Scroll.AVZ_JD_DTL_TBL);
&RS0.CopyTo(&rs_dtl);

然后我开始报告：

```
&oReportDefn.SetRuntimeDataRowset(&rs_dtl);   
&oReportDefn.ProcessReport(&MyTemplate, &LanguageCd, &AsOfDate, &OutFormat); 
```

我以前在每个行集（父和子）上使用 Rowset.Fill，但我的 copyto 方法似乎“更干净”（当然代码更少:-)）。有没有办法只复制当前上下文？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:46:00.883

如果我理解这个问题，你可以这样做：

```
Getrow().Copyto(&rs_dtl(1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:54:10.563

我认为当您执行行集复制时，所有行都会被复制 -
    `&RS0.CopyTo(&rs_dtl);`

您可以控制为报表上的每一行创建新页面，方法是在 for-each 循环中使用分页符（您将使用它来遍历模板中的行集）：
   `<?split-by-page-break:?>`

如果您只想打印最新的 effdt 行，请仅将最新的 effdt 行复制到 &rs_dtl 行集。您可以通过首先使用基于键对 &RS0 行集进行排序来做到这一点
    `&RS0.sort(keyfield1,keyfield2,"A");`

然后循环遍历排序的行集，检查给定键集的最大 effdt。

使用插入行函数将行插入 &rs_dtl。
    `&rs_dtl.Insertrow(&rownumber);`

请告诉我这是否有效。

# css - 指针事件允许在某些项目上

> ID：10638301
> 
> 赞同：1
> 
> 时间：2012-05-17T15:03:16.993
> 
> 标签：css

我有一个导航栏，它在我的页面底部一直运行我正在使用指针事件，因此允许用户单击导航栏，但我有带有链接的图像，因为有一个指针事件，所以现在不起作用：无； .

我如何在页脚中的图像上允许指针事件，而不是页脚本身？

```
#footer {
    position:fixed;
    left:0px;
    bottom:0px;
    height:80px;
    width:100%;
    padding-top: 0px;
    background-position: top !important;
     pointer-events:none;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:06:54.857

```
#footer a {
  pointer-events:  auto;
} 
```

# php - Mediawiki 从其他页面内容构建页面

> ID：10638302
> 
> 赞同：1
> 
> 时间：2012-05-17T15:03:23.200
> 
> 标签：php, mediawiki, wiki

使用 Mediawiki，我无法构建一个从 wiki 的一组其他页面获取信息的主页。假设每个页面都有“进行中”，“完成”之类的状态......然后我希望主页显示每个页面的表格及其状态。

如何指定每个页面的状态，以便主页能够获取此信息并显示想要的表格？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:21:57.057

您可以使用 MediaWiki 的（内置）[模板系统](http://www.mediawiki.org/wiki/Help%3aTemplates)（[快速介绍](http://meta.wikimedia.org/wiki/Help%3aA_quick_guide_to_templates)）。

您可以为每个页面的状态创建一个模板，只包含这些单词。您可以将它包含在主页、子页面本身或任何其他地方。要更新状态，您需要编辑模板。

或者您可以将页面本身用作模板。使用[`<onlyinclude>`语法](http://meta.wikimedia.org/wiki/Help%3aTemplate#Noinclude.2C_includeonly.2C_and_onlyinclude)，您可以告诉模板系统仅使用单个片段来转换其他页面，这里是状态信息。包含这样一个页面将需要前面的命名空间，例如，如果它在默认（“文章”）命名空间中没有前缀，它会是`{{:Subpage}}`. 这个系统有点复杂，但您只需要一次编辑即可更改页面和状态。另请参阅[帮助：高级模板](http://meta.wikimedia.org/wiki/Help%3aAdvanced_templates)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:00:04.350

[Semantic MediaWiki](http://semantic-mediawiki.org/)为将属性附加到页面并以各种方式显示它们提供了非常好的支持。您`[[status::in progress]]`在文章中写下类似的内容，然后您可以在主页上列出所有这些状态。

如果您只想显示固定页面列表的状态，这有点矫枉过正，但提供了很大的灵活性（例如，您可以按状态自动排序页面，或者只列出具有给定状态的页面或任何）。

# jquery - 更新css 掉入可投放区域时

> ID：10638305
> 
> 赞同：1
> 
> 时间：2012-05-17T15:03:29.583
> 
> 标签：jquery, css

我已经使用 jQuery 实现了一个 droppable，如下所示：

```
$( ".myVal" ).droppable({ drop: function( event, ui ) 
            { 

            } 
        }); 
```

我正在将一个`<li>`元素拖入可放置区域。我可以将新的 css 应用于`<li>`刚刚添加的内容，而不是仅将文本拖放到该区域中，文本包含新的 css 样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:11:12.763

或者你可以（因为 li 将从新容器中继承样式）

```
/*OnlyCss*/
    .myVal ul li{
        color:red;
        background:blue;
    } 
```

没有必要用 jQuery 来做，但如果你仍然想这样做（但这只有在被删除的元素必须与其他元素不同时才有意义 - 在新容器中 -）：

**注意：** *假设 .draggable 元素是* `li`

```
/*javascript*/
    $( ".myVal" ).droppable({ drop: function( event, ui ) 
            { 
                  ui.draggable.css({'color':'blue','background':'red'});
            } 
        }); 
```

甚至

```
/*javascript+css*/
    $( ".myVal" ).droppable({ drop: function( event, ui ) 
            { 
                 ui.draggable.addClass('justDropped');
            } 
        }); 
   /*combined with*/ 
    .justDropped{
        color:red;
        background:blue;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:10:04.957

```
$( ".myVal" ).droppable({ drop: function( event, ui ) 
        { 
              $(this).find("li").addClass("newClass");
        } 
    }); 
```

我认为这就是你所需要的。

所以：

**CSS**

```
.myVal ul li{
    //styles
} 
```

也是个好主意:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:10:18.637

查看[http://jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)在 events 下有一个 drop 事件，您可以在删除元素后使用它来执行任何您想要的转换。

# android - android adview admob 广告后退按钮不会返回到原始活动

> ID：10638311
> 
> 赞同：2
> 
> 时间：2012-05-17T15:03:45.457
> 
> 标签：android, admob, back, adview

我在我的应用程序活动的底部放置了一个 admob 广告，当点击/按下广告时，它会打开带有广告网址的手机浏览器。当您从此处单击后退按钮时，它会返回到手机的主屏幕，而不是我的应用程序的活动。我已经看到其他带有广告的应用程序，当您单击广告然后单击返回时，它会将您带回到应用程序而不是手机的主屏幕。我希望后退按钮将用户带回我的应用程序。有谁知道可能出了什么问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:25:14.920

我认为这是特定广告创意的问题。如果您尝试单击 AdMob 测试广告（您可以指定`adRequest.addTestDevice(AdRequest.TEST_EMULATOR)`在模拟器上获取测试广告），它会在按下返回按钮后返回应用程序。

# facebook-graph-api - 如何通过 Facebook 的图形 API 将自定义参数传递给自己？

> ID：10638313
> 
> 赞同：0
> 
> 时间：2012-05-17T15:03:49.800
> 
> 标签：facebook-graph-api

我希望通过调用 Facebook 的图形 API 将自定义参数/标识符传递给自己（以帮助我确定我从哪里发送原始图形 api 调用，以及其他有用的信息）。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:09:51.477

不，这不可能通过将参数附加到图形调用来实现，因为 API 仅根据构建 API 的规范返回响应。

# android - 在 Android 中将动画转换为正确的位置

> ID：10638315
> 
> 赞同：2
> 
> 时间：2012-05-17T15:03:58.847
> 
> 标签：android, android-layout, android-animation

我在我的应用程序中为图像创建了动画。图像开始从中间到屏幕的左上角。现在我需要确保图像放置在左上角的所有设备中的正确位置。目前它被放置在左上角的不同设备的不同位置。我该如何解决？我的代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fillAfter="true">
    <translate
        android:fromXDelta="0%p"
        android:toXDelta="-36%p"
        android:fromYDelta="0%p"
        android:toYDelta="-30.9%p"
        android:duration="500"
        android:fillAfter="true" />
</set> 
```

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:07:16.730

我得到了一些很好的结果，所以希望这对你或任何人有帮助。这个想法很简单。

通过 xml 将您想要动画的内容定位到**它的最终位置，**然后我使用`TranslateAnimation`并将其**从值**设置为任何浮点值并将**值**设置为**0**。以这种方式，小部件/视图动画并停留在您在 xml 中放置它的位置。

一个小例子，用于`TextView`将屏幕外部的 a 设置为在 xml 中指定的位置。

```
//This is just for getting the from value, from where animation starts.
WindowManager wm = (WindowManager) mContext
        .getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay();
int width = display.getWidth();

Animation  moveRighttoLeft = new TranslateAnimation(width, 0, 0, 0);
moveRighttoLeft.setDuration(700);

AnimationSet animation = new AnimationSet(false);
animation.addAnimation(moveRighttoLeft);
myTextView.setAnimation(animation); 
```

这是xml的

```
<TextView
    android:id="@+id/mytextview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="This is a Text View"
    android:layout_marginLeft="30dp"/> 
```

# python - Django：选择热门/最受欢迎的文章

> ID：10638316
> 
> 赞同：0
> 
> 时间：2012-05-17T15:04:09.987
> 
> 标签：python, django, orm

我有以下型号

```
class Article(models.Model):
    title = models.CharField(max_length=255, db_index=True)
    slug = UniqueSlugField(prepopulate_from='title', unique=True)
    favorited = models.ManyToManyField(to=User, blank=True)
    tags = TaggableManager()
    ...

class Vote(models.Model):
    article = models.ForeignKey(to=Article)
    voter = models.ForeignKey(to=User, related_name='voter')
    timestamp = models.DateTimeField(auto_now_add=True)
    ... 
```

我使用以下代码行以降序获取所选标签的热门文章

`Vote.objects.filter(tags__in=[tag]).annotate(num_articles=Count('article')).order_by('-num_articles')`

如何构建orm查询，通过模型的以下字段获取热门`Article.favorited`文章`Vote`？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:20:01.863

为什么会通过`Vote`模型获得“热门文章”？当您运行查询时，您最终会得到一个查询集`Vote`s。然后，您必须发出额外的查询以从中获取`Article`s。

你应该使用：

```
Article.objects.filter(tags=tag).annotate(vote_count=Count('vote')).order_by('-vote_count') 
```

然后，你有一个适当的`Article`s 查询集，你就可以开始了。

如果您想要收藏夹，您可以修改上面的内容以使用`user`而不是`vote`：

```
Article.objects.filter(tags=tag).annotate(favorite_count=Count('user')).order_by('-favorite_count') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:23:59.773

使用连接

```
Article.objects.filter(favorited__in=[...]).annotate(
        vc=models.Count('vote')).order_by('-vc') 
```

或者通常更快（更少的连接），但更复杂，更有限（不再是 QuerySet 但通常不是大问题）子查询版本

```
qs = Article.objects.filter(favorited__in=[...])
top_votes = Vote.objects.filter(article__in=qs).values('article').annotate(
         vc=models.Count('pk')).values_list('article', 'vc').order_by('-vc')

# normally you may only want Top N
top_n_pks = tuple(pk for pk, vc in top_votes[:N])
tops = sorted(Article.objects.filter(pk__in=top_n_pks).order_by(),
         key=lambda x: top_n_pks.index(x.pk)) 
```

# javascript - JQuery Onclick 从跨度获取值并将其添加到输入值

> ID：10638334
> 
> 赞同：0
> 
> 时间：2012-05-17T15:05:28.033
> 
> 标签：javascript, jquery

我有一个 jquery 点击事件设置：

```
$(".clickhere").click(function(){
    ...
}); 
```

我也有一个 id 的跨度`spanval`。

```
<span id="spanval">1</span> 
```

最后我有一个带有`input`...的表格

```
<input id="spanvalue" name="spanvalue" value="whatever_the_value_of_the_span_is" /> 
```

所以，我需要做的是以下几点：

如果单击 class of `clickhere`，则获取 中的文本`span`并将其放入`spanvalue`' 值中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T15:07:39.730

```
$(".clickhere").click(function(){
    $('#spanvalue').val($('#spanval').text());
}); 
```

[**现场演示**](http://jsfiddle.net/Skcjn/)

请注意，您的 DOM 元素命名真的很令人困惑......（`spanvalue`VS `spanval`）

# sql - SQL：如何确保所有 SELECT 案例都被表示，即使不是所有案例都被执行？

> ID：10638335
> 
> 赞同：4
> 
> 时间：2012-05-17T15:05:31.573
> 
> 标签：sql, tsql, select, sql-server-2008-r2, case

这是我的代码

```
SELECT
  CASE
       WHEN Money >= 20000 THEN '$ 20,000 + '
       WHEN Money BETWEEN 10000 AND 19999 THEN '$ 10,000 - $ 19,999'
       WHEN Money BETWEEN  5000 AND  9999 THEN '$  5,000 - $  9,999'
       WHEN Money BETWEEN     1 AND  4999 THEN '$      1 - $  4,999'
       ELSE '$      0'
   END AS [MONEY],
       COUNT(*) AS [#],
       MAX(Money) AS [MAX]
  FROM MyTable
 WHERE MoneyType = 'Type A'
 GROUP BY 
  CASE
       WHEN Money >= 20000 THEN '$ 20,000 + '
       WHEN Money BETWEEN 10000 AND 19999 THEN '$ 10,000 - $ 19,999'
       WHEN Money BETWEEN  5000 AND  9999 THEN '$  5,000 - $  9,999'
       WHEN Money BETWEEN     1 AND  4999 THEN '$      1 - $  4,999'
       ELSE '$      0'
   END
 ORDER BY MAX DESC 
```

现在我的问题是我希望所有案例都在我的结果集中显示一行，但是，因为我没有任何介于 1 和 4999 之间的值，所以该行不会显示。我仍然希望该行显示出来，并且只包含 0 的列（当然第一列除外）。任何人都可以告诉我如何修改代码来完成这个？也许我需要用不同的方式来做......谢谢！

我正在寻找的结果集示例...

```
 |  [MONEY]              |   [#]   |    [MAX]    |
  |  $ 20,000+            |   2     |    30,000   |
  |  $ 10,000 - $ 19,999  |   8     |    19,000   |
  |  $  5,000 - $  9,999  |   4     |     8,000   |
  |  $      1 - $  4,999  |   0     |     0       |     <-- Row currently doesn't show
  |  $      0             |   12    |     0       | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:21:05.700

您可以使用 CTE 构建一个查找表，然后使用该表而不是 Case 语句对其进行分组。您需要进行其他三项更改

*   COUNT 必须是 COUNT(t.Money)，否则当您期望零时您将得到 1。
*   您可能想合并您的 MAX(Money) 但我不确定当它为 NULL 时您希望它是什么
*   您实际上不能按 MAX(MONEY) 订购，因为它可能为空。所以最好也使用 CTE 来控制订单

```
WITH Ranges AS
( SELECT 1 id , '$ 20,000 +'  description
  UNION SELECT 2 , '$ 10,000 - $19,999'
  UNION SELECT 3, '$  5,000 - $ 9,999'
  UNION SELECT 4, '$      1 - $ 4,999'
  UNION SELECT 5, '$      0')

SELECT
       r.Description as money,
       COUNT(t.Money) AS [#],
       MAX(Money) AS [MAX]
  FROM 
       Ranges r
       LEFT JOIN
        MyTable t
       ON r.ID =   CASE
                    WHEN Money >= 20000 THEN 1
                    WHEN Money BETWEEN 10000 AND 19999 THEN 2
                    WHEN Money BETWEEN  5000 AND  9999 THEN 3
                    WHEN Money BETWEEN     1 AND  4999 THEN 4
                    ELSE 5
                 END 
        AND  MoneyType = 'Type A' 
 GROUP BY 
  r.id,
  r.Description
 ORDER BY r.id asc 
```

[现场演示](http://www.sqlfiddle.com/#!3/a8b48/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T15:22:24.490

您可以将描述性文本存储在真实或临时表中并相应地加入，例如；

```
;with ranges(min,max,caption) as (
    select 10000, 19999, '$ 10,000 - $19,999' union
    select 5000, 9999,   '$  5,000 - $ 9,999' union
    select 1, 4999,      '$      1 - $ 4,999'
)
select
    isnull(r.caption, 'no description'),
    count(m.money) as [#],
    isnull(max(m.money), 0)
from
    mytable m
full outer join 
    ranges r on m.money between r.min and r.max
group by
    r.caption 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:14:58.113

您可以添加这些值，然后插入一个附加组（无法访问 SSMS 进行测试）：

```
SELECT [MONEY], SUM([#]) AS [#], MAX([MAX]) AS [MAX] FROM
(SELECT
  CASE
       WHEN Money >= 20000 THEN '$ 20,000 + '
       WHEN Money BETWEEN 10000 AND 19999 THEN '$ 10,000 - $19,999'
       WHEN Money BETWEEN  5000 AND  9999 THEN '$  5,000 - $ 9,999'
       WHEN Money BETWEEN     1 AND  4999 THEN '$      1 - $ 4,999'
       ELSE '$      0'
   END AS [MONEY],
       COUNT(*) AS [#],
       MAX(Money) AS [MAX]
  FROM MyTable
 WHERE MoneyType = 'Type A'
 GROUP BY 
  CASE
       WHEN Money >= 20000 THEN '$ 20,000 + '
       WHEN Money BETWEEN 10000 AND 19999 THEN '$ 10,000 - $19,999'
       WHEN Money BETWEEN  5000 AND  9999 THEN '$  5,000 - $ 9,999'
       WHEN Money BETWEEN     1 AND  4999 THEN '$      1 - $ 4,999'
       ELSE '$      0'
   END
 UNION ALL
 SELECT '$      0' AS [MONEY], 0 AS [#], 0 AS [MAX]
 UNION ALL
 SELECT '$      1 - $ 4,999' AS [MONEY], 0 AS [#], 0 AS [MAX]
 UNION ALL
 SELECT '$  5,000 - $ 9,999' AS [MONEY], 0 AS [#], 0 AS [MAX]
 UNION ALL
 SELECT '$ 10,000 - $19,999' AS [MONEY], 0 AS [#], 0 AS [MAX]
 UNION ALL
 SELECT '$ 20,000 + ' AS [MONEY], 0 AS [#], 0 AS [MAX]
 ) SUB
GROUP BY [MONEY] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T15:21:05.013

嗯......我会做什么：

而不是从表 t

我会从子查询中选择

```
From 
(
 Select Money, 1 as ForReal from Table t
 Union
 Select 1, 0
 Union
 Select 5000, 0
 Union 
 Select 10000, 0
 Union
 Select 20001, 0
) 
```

我的首选是 Max (Money*ForReal)，所以你得到你的分组，0 作为 MaxAmount..

# c# - 如何从任何 .net 类中获取所有公共属性和方法？

> ID：10638340
> 
> 赞同：-4
> 
> 时间：2012-05-17T15:05:49.720
> 
> 标签：c#

我需要编写简单的应用程序来获取类名（假设该类出现在应用程序 AppDomain 中）并打印到控制台

```
 all the public properties 
 values of each properties 
 all the method in the class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:23:43.390

```
var p = GetProperties(obj);
var m = GetMethods(obj); 
```

-

```
public Dictionary<string,object> GetProperties<T>(T obj)
{
    return typeof(T).GetProperties().ToDictionary(p=>p.Name,p=>p.GetValue(obj,null));
}

public MethodInfo[] GetMethods<T>(T obj)
{
    return typeof(T).GetMethods(BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance | BindingFlags.Static);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:17:09.487

您可以使用通过调用方法获得`GetValue`的`PropertyInfo`对象的方法来获取它`GetProperties`

```
foreach(PropertyInfo pi in myObj.GetType().GetProperties())
{
     var value = pi.GetValue(myObj , null);
} 
```

`PropertyInfo`对象包含许多方法，可以检索您想要的有关名称等属性的信息，它是只读的..etc

[http://msdn.microsoft.com/en-us/library/b05d59ty.aspx](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:19:16.810

这是代码。. .

```
void Main()
{

    Yanshoff y = new Yanshoff();
    y.MyValue = "this is my value!";

    y.GetType().GetProperties().ToList().ForEach(prop=>
    {
        var val = prop.GetValue(y, null);

        System.Console.WriteLine("{0} : {1}", prop.Name, val);
    });

    y.GetType().GetMethods().ToList().ForEach(meth=>
    {
        System.Console.WriteLine(meth.Name);
    });

}

// Define other methods and classes here

public class Yanshoff
{
    public string MyValue {get; set;}

    public void MyMethod()
    {
         System.Console.WriteLine("I'm a Method!");
    }

} 
```

# java - 英镑符号（£ 或 ₤）等字符的 URI 编码问题

> ID：10638343
> 
> 赞同：1
> 
> 时间：2012-05-17T15:06:08.250
> 
> 标签：java, jsp, tomcat, character-encoding

我在尝试在 DB 中插入特殊符号（如英镑字符（£ 或 ₤）时遇到问题。这些被显示为?? 在前端

我们使用 tomcat 作为应用服务器，并有以下配置

```
URIEncoding="UTF-8" 
```

在将文本插入数据库之前，我们正在执行以下检查

```
String Text = new String(request.getParameter("Text").getBytes("8859_1"),"UTF-8"); 
```

我对上面的代码做了什么不太了解

但是当我`"URIEncoding="UTF-8"` 从 tomcat server.xml 中删除时，这些字符加载正常

根据 [http://confluence.atlassian.com/display/DOC/Configuring+Tomcat%27s+URI+encoding](http://confluence.atlassian.com/display/DOC/Configuring+Tomcat%27s+URI+encoding)默认tomcat使用`"ISO-8859-1"`编码

有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:11:11.260

您要求 Tomcat 为您提供格式化为 UTF-8 的值，然后将其转换为基于 ISO-8859-1 字符集代码点的字节数组。然后，您将这些值直接转换回 UTF-8 代码点，这会导致字符出现乱码。

只需删除转换内容，将`URIEncoding="UTF-8"`条目保留在您的配置中，它应该可以正常工作。

另外，请记住，您的输出编码很重要。如果您要发回 UTF-8 编码的页面，但在页面的元标记或`Content-Encoding`HTTP 响应标头中设置了不同的编码，您将得到某些字符的乱码结果。

# c# - 杂志/期刊类结构和/或设计模式

> ID：10638346
> 
> 赞同：0
> 
> 时间：2012-05-17T15:06:12.407
> 
> 标签：c#, xml, class, design-patterns

我有一个包含我们所有校友杂志的 xml 文档。

```
<Magazine>
  <Volumes>
    <Volume>
      <Issues>
        <Issue>
          <Sections>
            <Section>
              <Articles>
                <Article>
                  <Images>
                    <Image>
                    </Image>
                    ...
                  </Images>
                </Article>
                ...
              </Articles>
            </Section>
            ...
          </Sections>
        </Issue>
        ...
      </Issues>
    </Volume>
    ...
  </Volumes>
</Magazine> 
```

我为：Volume、Issue、Section、Article 和 Image 创建了一个类。

我的问题是：
我应该创建一个超类和子类的层次结构吗？
即——图像继承文章继承部分继承问题继承卷
**或者**
我是否将它们分开并使用通用集合作为父类的属性？
即——Volume.Issues、Issue.Sections、Section.Articles、Article.Images
**或**
其他我完全不知道的东西？

这些选择的优点/缺点/缺点是什么？

编辑：如果我使用的是问题对象，我还需要知道卷号和卷年，以及每个部分中的文章标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:29:04.513

如果所有类都具有共同的属性/方法，则可以使用继承，否则继承将毫无意义。

您可以使用[`Linq To XML`](http://msdn.microsoft.com/en-us/library/bb387061.aspx)从 xml 文档中获取所需的所有数据，而无需将其映射到类，或[`Linq to Object`](http://msdn.microsoft.com/en-us/library/bb397937.aspx)在映射后使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:35:57.447

对于您的情况，继承听起来完全错误。仅当域类之间存在自然的层次关系时才应使用它。一个经典的例子是

```
-Employee 
--Contractor
--Permanent 
```

他们仍然需要姓名、地址和类似的方法，例如：hire()、fire()、pay()。

在您的情况下，继承没有关系，这是一个经典示例，说明为什么您应该**支持组合而不是继承**。

图片不是文章，但文章有图片。这可以应用于您的整个结构。

一切都是关于“有一个”而不是“是一个”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:39:58.363

确切的答案是只有当您知道您打算如何在应用程序中使用这些数据、如何存储数据、如何显示等时才知道。

通常，文章是一个有用的起点类（类似于博客文章等）。您不需要杂志内的文章（而不是 MagazineIssue）

```
 //search all articles in some Magazine issue
    public IList<Article> GetArticles(long ISBN, string issueNumber)
    {
        //implementation
    } 
```

在某些情况下，您也不需要 Section 类。

```
public class Article
{
    //can be immutable
    public MagazineIssueView Issue { get; set; }

    public string Author { get; set; }

    public IList<Section> Sections { get; set; }

    public IList<Image> GetAllArticleImages()
    {
        return Sections
            .SelectMany<Section, ContentBlock>(s => s.SectionContent)
            .Where(c => c is Image)
            .Cast<Image>()
            .ToList();
    }
}

public class MagazineIssueView
{
    public long ISBN { get; set; }

    //if you have internal Magazines list, it can be also internal MagazineId
    public string MagazineName { get; set; }

    public DateTime IssueDate { get; set; }

    public string IssueNumber { get; set; }
}

public class Section
{
    public string SectionTitle { get; set; }
    public int Order { get; set; }

    public IList<ContentBlock> SectionContent { get; set; }
}

public abstract class ContentBlock
{
}

public class Image: ContentBlock
{
}

public class Paragraph: ContentBlock
{
} 
```

# excel - 最后两行没有格式化，但被正确复制，没有理由

> ID：10638350
> 
> 赞同：0
> 
> 时间：2012-05-17T15:06:35.943
> 
> 标签：excel, vba

由于某种原因，当此脚本导出到 PO 跟踪选项卡时，最后两行未格式化...我不知道为什么据我所知代码应该考虑到这一点。如果有人可以看看下面的代码并告诉我我需要在哪里调整它，我们将不胜感激。

```
Option Explicit

Sub PO_Tracking()

Dim wsPOD As Worksheet
Dim wsPOT As Worksheet
Dim wsPOA As Worksheet
Dim cel As Range
Dim lastrow As Long, i As Long, Er As Long

Set wsPOD = Sheets("PO Data")
Set wsPOT = Sheets("PO Tracking")
Set wsPOA = Sheets("PO Archive")

With Application
    .ScreenUpdating = False
    .DisplayAlerts = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
End With

With wsPOD
    'first bring columns F:G up to match their line
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(5), .Columns(6))

        If cel = vbNullString And cel.Offset(, -2) <> vbNullString Then
            .Range(cel.Offset(1), cel.Offset(1, 1)).Copy cel
            cel.Offset(1).EntireRow.Delete
        End If

    Next

    'now fil columns A:D to match PO Date and PO#
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(5), .Columns(1))

        If cel = vbNullString And cel.Offset(, 5) <> vbNullString Then
            .Range(cel.Offset(-1), cel.Offset(-1, 3)).Copy cel
        End If
    Next
'Blow away rows that are useless
    lastrow = wsPOD.Range("A6").End(xlDown).Row
    wsPOD.Range("M5:P5").Copy wsPOD.Range("M6:P" & lastrow)
    Calculate

    With Intersect(ActiveSheet.UsedRange, ActiveSheet.Columns("N"))
        .AutoFilter 1, "<>Different"
        .SpecialCells(xlCellTypeVisible).EntireRow.Delete
    End With

    With Intersect(ActiveSheet.UsedRange, ActiveSheet.Columns("P"))
        .AutoFilter 1, "<>"
        .SpecialCells(xlCellTypeVisible).EntireRow.Delete
    End With
    lastrow = wsPOD.Range("A6").End(xlDown).Row
    wsPOD.UsedRange.Copy Sheets.Add.Range("A1")

'Final Adjustments before transfering over to new sheet.
    With ActiveSheet
        .AutoFilterMode = False
        Intersect(.UsedRange, .Columns("A")).Cut .Range("Q1")
        Intersect(.UsedRange, .Columns("D")).Cut .Range("R1")
        Intersect(.UsedRange, .Columns("C")).Cut .Range("S1")
        Intersect(.UsedRange, .Columns("B")).Cut .Range("T1")
        Intersect(.UsedRange, .Columns("G")).Cut .Range("U1")
        Intersect(.UsedRange, .Columns("F")).Cut .Range("V1")
        Intersect(.UsedRange, .Range("Q:V")).Copy wsPOT.Cells(Rows.Count, "B").End(xlUp).Offset(1)
        .Delete
    End With

    lastrow = wsPOD.Cells(Rows.Count, "B").End(xlUp).Row
    wsPOT.Range("R1:X1").Copy
    wsPOT.Range("B3:H" & lastrow).PasteSpecial xlPasteFormats
    wsPOT.Range("N2:O2").Copy wsPOT.Range("N3:O" & lastrow)
    wsPOT.Range("P1:Q1").Copy wsPOT.Range("I3:J" & lastrow)
    wsPOT.Range("K3:K" & lastrow).Borders.Weight = xlThin
End With

Application.CutCopyMode = False

End Sub 
```

这是excel表。

[http://dl.dropbox.com/u/3327208/Excel/Last%20two%20rows.xlsm](http://dl.dropbox.com/u/3327208/Excel/Last%20two%20rows.xlsm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:16:41.087

您是否逐行浏览了代码，以确切了解它对您的电子表格做了什么？到目前为止，这是了解代码失败原因的最佳方法，因为一旦运行它，您就会看到失败行。此外，这是从其他开发人员那里获得出色答案的最佳方式，因为如果您仍然不明白它为什么会中断，您可以查明您的问题，从而使我们更容易进行故障排除。

我逐步浏览了代码——因为我帮助构建了它！根据我的记忆，它甚至似乎没有做它应该做的事情。

# python - 从你的类属性制作__builtin__？

> ID：10638352
> 
> 赞同：0
> 
> 时间：2012-05-17T15:06:45.053
> 
> 标签：python, class, attributes, built-in

```
>>> import __builtin__
>>> class MyClass:
...     def __init__(self):
...             self.a = 2
...             __builtin__.a = self.a
...
>>> myclass = MyClass()
>>> myclass.a = 4
>>> a = 2
>>> print a
2
>>> print myclass.a
4 
```

我希望`a`并`myclass.a`具有相同的价值。他们为什么不呢？

PS。为什么你会这样使用`__builtin__`是另一个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:08:10.667

Python 没有引用。分配一个值，例如使用`=` [重新绑定名称](http://docs.python.org/reference/executionmodel.html#naming-and-binding)。

如果你想要这样的行为，你需要一个可变对象，例如一个包含一个元素的列表：

```
>>> import __builtin__
>>> class MyClass:
...     def __init__(self):
...         self.a = [2]
...         __builtin__.a = self.a
...
>>> myclass = MyClass()
>>> myclass.a[0] = 4
>>> a[0] = 2
>>> print a
[2]
>>> print myclass.a
[2]
>>> 
```

但是，请重新考虑您是否**真的**想将这样的东西放入`__builtins__`.

# ruby-on-rails - `should be_invalid` 和 `should_not be_valid` 之间有什么功能上的区别吗？

> ID：10638360
> 
> 赞同：1
> 
> 时间：2012-05-17T15:07:25.287
> 
> 标签：ruby-on-rails, validation, rspec

两种调用都确保模型无效。

有什么功能上的区别吗？两者之间是否存在普遍的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:14:19.327

`be_...`rspec匹配器没有魔法。如果匹配器未在 rspec 中定义，它只会调用`be_`带有`?`符号的任何方法名称。因此`be_valid`调用`valid?`在“activerecord/lib/active_record/validations.rb”中定义的方法和`invalid?`在“activemodel/lib/active_model/validations.rb”中定义的“be_invalid”调用。这是后者的源代码：

```
def invalid?(context = nil)
  !valid?(context)
end 
```

所以我想答案可能是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:12:08.083

对开发人员来说只是一个“结冰”:) 与：

```
flag = true

if not flag
  ...
end

unless flag
  ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:16:11.217

我知道没有功能差异。

“最佳实践”是使用给定规范最具可读性和交流性的任何内容。

# php - 注册和登录最佳实践

> ID：10638363
> 
> 赞同：3
> 
> 时间：2012-05-17T15:07:32.120
> 
> 标签：php, javascript, facebook-javascript-sdk, facebook-php-sdk, facebook-authentication

我对 facebook 开发相当陌生，但对 PHP 和 JavaScript 有经验。

我一直在阅读 SDK 文档和有关 facebook 集成的各种文章，但发现一些基本问题仍然存在于我的脑海中！

我正在努力实现以下目标：

*   创建一个仅使用 facebook 进行注册和登录的网站
*   使用 PHP 将注册用户的 facebook 用户 ID 存储在我的应用服务器上的数据库中，以及这些用户的一些有限的应用特定信息。所有“通用”信息（电子邮件地址等）都应从 facebook 获取。
*   当用户登录时，获取该用户的数据库记录和 Facebook 内容的组合。

到目前为止我所取得的成就：

*   我使用注册插件向未注册用户显示注册按钮，并为登陆页面时注销的用户显示登录按钮。如果用户已经登录，我会使用 javascript 和 jquery 隐藏登录按钮。
*   我还有一个页面，它接收注册用户并解释signed_request，将用户的ID添加到我数据库中的用户表中。

我的困惑出现的地方：

*   我想使用 Javascript SDK 进行用户身份验证（因为它真的很容易）——这显然是在客户端异步完成的。
*   话虽如此，一旦用户使用 JS SDK 登录，我需要从我的数据库中获取一些数据。我很高兴通过 AJAX 请求来做到这一点，*但是*这需要将 facebook 用户 ID 作为该请求的一部分传递。当然，这很容易被精明的用户欺骗/更改，因此他们可以以其他人的身份登录到我的应用程序？

**问题：** 如何安全地将有关使用 JS API 登录的用户的信息传递到我的服务器？

如果答案是“你不能”，那么为什么还要麻烦使用 JS API 进行身份验证呢？这仅适用于真正轻触的应用程序吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:28:56.570

简单的答案是，您使用 cookie。[这篇 Facebook 博客文章](https://developers.facebook.com/blog/post/534/)有一个清晰的示例，说明了如何实现客户端登录并将该数据公开给服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:21:38.647

看看签名的请求：[https ://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

它为您提供了有关签名请求如何工作以及您可以/应该如何使用它们的一个很好的小入门。如果我正确理解您的问题，这应该回答您关于为什么/如何提供额外安全层的问题。发送一个签名请求，只有您的应用程序拥有自己的 app_secret 才能解码。

# eclipse-plugin - 将图像添加到标签建议

> ID：10638366
> 
> 赞同：0
> 
> 时间：2012-05-17T15:07:42.637
> 
> 标签：eclipse-plugin, swt, eclipse-rcp

在我的项目中，我需要在一个组合中创建一些播放、暂停、停止按钮。为此，我创建了一个组合并在其中添加了这些按钮。我还为每个按钮添加了图像。但是画完之后就不好看了。我的意思是按钮上的图像看起来不太好。客户不满意。现在是否可以将图像添加到标签并为标签提供一些切换按钮操作？我知道我可以将图像添加到标签。但是当我单击标签时，它没有给出按钮效果..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:42:37.593

如果您想要自定义“按钮”外观，您可以使用带有自定义图像的标签（一个用于正常状态，一个用于“推送”状态。类似于：

```
final Label stop = new Label(composite, SWT.NONE);
stop.setSize(STOP_IMG.getImageData().width, STOP_IMG.getImageData().height)

stop.setBackgroundImage(STOP_IMG);
stop.addMouseListener(new MouseAdapter()
{
    @Override
    public void mouseUp(MouseEvent e)
    {
        stop.setBackgroundImage(STOP_IMG);              
    }

    @Override
    public void mouseDown(MouseEvent e)
    {
        stop.setBackgroundImage(STOP_DOWN_IMG);
        // DO ACTION
    }           
}); 
```

对于一个漂亮的 UI，您还可以添加一个 MouseTrack 侦听器，并为鼠标悬停状态提供不同的图像。

这样做的缺点是您使其难以访问，因为它只会响应鼠标事件。如果您采用这种方法，您应该考虑创建自己的扩展 MouseAdapter 的类，并在构造函数中调用标签、图像和操作，这样您就不会得到大量非常相似的匿名类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:33:59.973

我过去曾使用工具栏来达到很好的效果。

这将创建一个工具栏，其中包含一个行为类似于常规按钮的项目：

```
//Toolbar button
ToolBar toolBar = new ToolBar(composite,SWT.FLAT);
ToolItem toolItem = new ToolItem(toolBar,SWT.PUSH);
toolItem.setImage(image); 
```

这将是一个工具栏，其中包含一个具有切换行为的项目：

```
//Create a toggle effect
ToolBar toggleToolBar = new ToolBar(composite,SWT.FLAT);
ToolItem toggleToolItem = new ToolItem(toggleToolBar,SWT.CHECK);
toggleToolItem.setImage(image); 
```

# javascript - 创建复选框的最快方法

> ID：10638369
> 
> 赞同：1
> 
> 时间：2012-05-17T15:08:02.603
> 
> 标签：javascript, google-chrome, google-chrome-extension, client-side

我有一个为搜索引擎创建全选功能的 Google Chrome 扩展程序，但速度很慢（1-14 秒，250-1000 个结果）有没有更快的方法来做到这一点？我的代码如下：

```
var dropdownvalue = dropdown.options[dropdown.selectedIndex].value;
if ((dropdownvalue == "createFullCheckboxes") || (dropdownvalue == "createNameCheckboxes")) {
    var div_embed1 = document.getElementById('results-pane');

    if (div_embed1) {
        div_embed1.innerHTML = '<form id="checkbox-form">' + div_embed1.innerHTML + '</form>';
    }

    var i;
    var x = document.getElementsByClassName('name');

    for (i = 0; i < x.length; i++) {
        x[i].innerHTML = '<input id="checkbox" type="checkbox">' + x[i].innerHTML + '';
    }

    checkedAll();
    return;
}​ 
```

我尝试将 for 循环更改为：`for (var i = 0, len = x.length; i < len; i++){`但只有 20 毫秒的差异。`CheckedAll()`是一个简单地选择所有复选框的函数。

另一部分（未显示）循环通过选定的复选框并实际上使全选工作在 92 毫秒时快得多，即使对于 1000 个结果它仍然很快。

这是来自 chrome 开发工具的片段：

![时间快照](../Images/8b5f5283245cddcd285ed835d6f486a7.png)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:19:34.070

我会测试：

```
var x = document.getElementsByClassName('name');
var h = '<input class="checkbox" type="checkbox">';
var i = x.length;
while(i--){ x[i].innerHTML = h + x[i].innerHTML; } 
```

相等测试应该比小于测试快。

尝试 Duffs 设备：（推测，因为我们不知道标记渲染和可能产生负面影响的原型属性）（注意删除 id= 以避免重复 ID）替换为类）

```
function process(xi, h) {
    xi.innerHTML = h + xi.innerHTML;
}
var x = document.getElementsByClassName('name');
var h = '<input class="checkbox" type="checkbox">';
var iterations = Math.floor(x.length / 8);
var leftover = x.length % 8;
var i = 0;

if (leftover > 0) {
    do {
        process(x[i++], h);
    } while (--leftover > 0);
}

do {
    process(x[i++], h);
    process(x[i++], h);
    process(x[i++], h);
    process(x[i++], h);
    process(x[i++], h);
    process(x[i++], h);
    process(x[i++], h);
    process(x[i++], h);
} while (--iterations > 0); 
```

# android - 如何使用 Robotium 测试点击软键盘“搜索”按钮？

> ID：10638370
> 
> 赞同：5
> 
> 时间：2012-05-17T15:08:05.537
> 
> 标签：android, keyboard, robotium

我想用 Robotium 测试下一件事：在搜索字段中输入一些文本，我这样做了，然后单击我没有做的软键盘“搜索”按钮 (android:imeOptions=actionSearch)。我尝试了 solo.sendKey(Solo.Enter) 但没有成功。我不确定这是否重要，但根本没有显示软键盘——我试图以某种方式实现这一点，但也没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T07:59:46.857

最后！[Robotium 5.1](http://code.google.com/p/robotium/wiki/Changelog#Robotium_5.1)自豪地呈现给您`pressSoftKeyboardSearchButton()`。

对于旧版本，您可以使用此代码（不够干净，但有效）：

```
solo.enterText(0, "ItemToSearchFor");
solo.sleep(1000);
solo.clickInList(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:37:08.420

您是否尝试发送此密钥代码？ [http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_SEARCH](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_SEARCH) 像这样

独奏.sendKey(KeyEvent.KEYCODE_HOME);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:17:12.997

你不能使用keycode，你可以做的是知道关键位置并按下它。因为软键盘是位图，而不是视图。

# c++ - 适用于矩阵稀疏模式的哈希函数

> ID：10638373
> 
> 赞同：0
> 
> 时间：2012-05-17T15:08:21.430
> 
> 标签：c++, hash, hashmap, sparse-matrix, unordered-map

我正在使用以一般稀疏格式（压缩行）存储的稀疏矩阵。即我存储矩阵：

```
0 x y 0
0 0 0 0 
z 0 0 0 
```

形式为：

*   矩阵尺寸：[3,4]
*   每行的偏移量：[0,2,2,3]
*   每个非零条目的列：[1,2,0]
*   非零元素：[x,y,z]

我正在寻找允许我“缓存”稀疏模式的哈希函数（即上面带有整数的前三个向量）。为此，我想我需要一个好的哈希函数，我可以将它提供给我计划使用的哈希映射实现，即 C++ 的`std::unordered_map`.

有没有人有一些关于如何为这样的问题找到一个好的散列函数的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:12:31.587

如果您的 CSR 表示每个矩阵都是唯一的，即非零元素以从左到右、从上到下的顺序出现，那么您可以散列所有向量并使用[`boost::hash_combine`](http://www.boost.org/doc/libs/1_33_1/doc/html/hash_combine.html)(如果您不希望依赖Boost，只需复制粘贴它，它很短）。

# objective-c - JSON错误从目标c应用程序中的ruby on rails服务器解析字典

> ID：10638375
> 
> 赞同：1
> 
> 时间：2012-05-17T15:08:28.990
> 
> 标签：objective-c, ruby-on-rails

我有一个小型 Rub​​y on Rails 服务器，它回复来自 Objective-c 客户端的请求。由于我需要从不同的表中累积数据，我决定将其放入字典（在 rails 中散列），然后将其作为 JSON 发送，并在客户端上使用 iOS 5 JSON 框架来重建字典。以下是我的代码中更简单的部分：

```
format.json { render :json => {:message_type => 'getBaseOpReply',
       :base_longitude => @operator.base_longitude,             
       :base_latitude => @operator.base_latitude} } 
```

在客户端上，我使用连接数据委托，`connection:didReceiveData`我在其中累积数据，`responseData`并在其中`connectionDidFinishLoading`做：

```
NSError *error;
NSMutableDictionary *dict = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error]; 
```

我收到以下错误： `ErrorDomain=NSCocoaErrorDomain Code=3840 ... JSON text did not start with array or object`等。

我尝试了所有不同的选项，但`JSONObjectWithData:options:error:`我得到了相同的错误，除非我使用`NSJSONReadingAllowFragments`. `Invalid value`然后在字符 0 周围的说法有点不同。

我认为我的服务器没有正确构建字典，但请帮助我。提前致谢！

# font-face - 正文的非网络安全字体

> ID：10638378
> 
> 赞同：0
> 
> 时间：2012-05-17T15:08:39.263
> 
> 标签：font-face

我知道这可能是一个开放式问题，但我希望一些@font-face 专家能给我一些关于最佳实践的见解。

在这个时间点，是否可以为正文使用 @font-face 嵌入字体？我正在与设计师争论并认为不，因为如果字体需要一两分钟才能下载，FOUT 可能会导致内容布局发生重大变化。

问题是 - 我是否应该担心字体下载需要一些时间并可能导致正文渲染发生重大变化的可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:16:16.337

很晚了，但这是我的观点：您对使用字体字体的主要关注点不是加载时间，而是渲染。只有（非常）数量有限的字体可以在所有浏览器和 ios 中呈现良好。现在，只要文本可读（小的无衬线字体，行间距很好）并且渲染良好，从性能的角度来看并没有真正的区别（字体只会下载一次，您可以在加载之前加载它加载您的内容以避免任何转移）。

# list - Common Lisp - 扁平化可能包含符号的列表

> ID：10638379
> 
> 赞同：0
> 
> 时间：2012-05-17T15:08:41.340
> 
> 标签：list, common-lisp, quote, flatten

这是[99 个 Lisp 问题](http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/L-99_Ninety-Nine_Lisp_Problems.html)中的第 7 个：通过将每个列表替换为其元素（递归地），将列表（可能将列表作为元素保存）转换为“平面”列表。我尝试了几种解决方案，例如从 # [2680864](https://stackoverflow.com/questions/2680864/how-to-remove-nested-parentheses-in-lisp)或[从这里](http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/p07.lisp)。它们都可以工作，但是如果我正在展平包含引用元素的列表，我会遇到问题。例如：

```
> '(a 'b c)
(A 'B C)

> '(a (quote b) c)
(A 'B C)

> (flatten '(a 'b c))
(A QUOTE B C) 
```

在后一种情况下，我想得到：

```
(A 'B C) 
```

' 的内部表示似乎妨碍了这项任务！SBCL、CLISP、ECL……它们的行为方式都相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:27:42.123

列表中的引用元素？这通常没有意义。你为什么要引用它？

`(a b c)`是三个符号的列表。为什么要引用列表中的元素？喜欢在`(a 'b c)`？为什么？引用的目的是什么？

在 Common Lisp`'`中是一个扩展`'a`为`(QUOTE A)`. 由于这是一个普通列表，典型的展平操作会将符号收集到展`QUOTE`平`A`列表中。这是因为 flatten 函数通常会检查某物是否为原子。如果你不想要这个，你的 flatten 函数需要检查某个东西是一个原子还是一个二元素列表，`QUOTE`它的第一个符号是。

但正如我上面所说，默认用法只是扁平化符号，因为引用的符号通常在列表中没有用。否则，您需要扩展 flatten 功能。

例如：

```
(defun flatten (l &key (test #'atom))
  (cond ((null l) nil)
        ((funcall test l) (list l))
        (t (loop for a in l nconc (flatten a :test test)))))

CL-USER > (flatten '(a (('b) c) ('d) )
                   :test (lambda (item)
                           (or (atom item)
                               (and (eq (first item) 'quote)
                                    (null (cddr item))))))

(A (QUOTE B) C (QUOTE D)) 
```

# jboss7.x - JBoss AS 7.x 绑定 IP / DNS 以从 Internet / Intranet 访问服务器

> ID：10638380
> 
> 赞同：0
> 
> 时间：2012-05-17T15:08:46.657
> 
> 标签：jboss7.x

> **可能重复：**
> [如何使用 JBoss AS 7 在 Internet 上部署应用程序](https://stackoverflow.com/questions/9842197/how-to-deploy-an-application-over-the-internet-with-jboss-as-7)

我正在尝试通过指定 DNS / 静态 IP 来访问 JBoss AS 7.1.1 最终版本。

按照本文中提到的步骤，我按照以下步骤操作：

1.  调整`standalone.conf`

    补充：`JAVA_OPTS=”$JAVA_OPTS -Djboss.bind.address=172.xx.xxx.xx`并重新启动服务器。当 JBoss 启动时，我看到指定的 IP，但我无法从浏览器访问服务器 [ `http://172.xx.xxx.x:8080`]

2.  我也修改了`standalone.xml`——接口标签like or 0.0.0.0

    当 JBoss 启动时，我看到指定的 IP，但我无法从浏览器访问服务器 [ `http://172.xx.xxx.x:8080`]

请让我知道缺少什么。非常关键。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:56:51.780

绑定特定 IP 的最简单方法是使用命令行中的“-b”选项。例如

```
$ ./standalone.sh -b 172.xx.xx.xx 
```

有关更多信息，请参阅[文档](https://docs.jboss.org/author/display/AS71/Command+line+parameters)

# line - 什么是反向换行

> ID：10638382
> 
> 赞同：9
> 
> 时间：2012-05-17T15:08:59.700
> 
> 标签：line

实际上，我用谷歌搜索了一段时间，但没有成功。这对我来说太抽象了。无论如何，我的英语坏了。我想知道以下两点：什么是反向换行？反向换行和换行有什么区别？那么，有没有人可以给我一个例子或做出解释？非常感谢你。PS：我这里是发票。不知道我有没有给你说清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:13:06.093

反向换行使光标回到上一行。常规换行使光标转到下一行。

编辑：ThePower 是正确的，这些术语起源于行式打印机的时代，“进纸”的意思是通过打印机送纸，在这种情况下是一行，反向换行将纸张向后移动一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-17T22:29:17.803

一些早期的计算机打印机能够打印**下标**和**上标**，并且首先通过向上或向下滚动半行而不是整行来做到这一点。

例如，在这本[旧打印机手册](http://www.manualsdir.com/manuals/373871/brother-hl-1670n-hl-2170w-hl-6050d-hl-5250dn-hl-5070n-hl-2460-hl-6050dn-hl-2150n-hl-2700cn-hl-2130-hl-s7000dn-hl-3040cn-hl-1650-hl-6050-hl-5240-hl-5240l-hl-1470n-hl-3070cw-hl-5170dn-hl-3450cn-hl-3140cw-hl-5470dw-hl-5140-hl-5440d-hl-7050-hl-2240-hl-5040-hl.html?page=60)中可以找到。

我们来看看相关的垂直命令：

```
 line feed  and  reverse      line feed, and  
half line feed  and  reverse half line feed

     Line feed goes down one      line.  Reverse goes up one      line.
Half line feed goes down one half line.  Reverse goes up one half line. 
```

# visual-studio-2010 - 多项目 sln。进入各自独立的 sln

> ID：10638384
> 
> 赞同：1
> 
> 时间：2012-05-17T15:09:01.370
> 
> 标签：visual-studio-2010

采用多项目 sln 并从每个项目创建两个单独的 sln 的正确方法是什么？它们都已创建好，我只需要将它们分开即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:15:11.497

右键单击解决方案中的项目>删除

创建新项目>右键单击>添加>现有项目>在文件系统中查找项目

如果项目相互依赖，您需要：

*   编译并将它们作为二进制文件相互添加，或者
*   首先不要分开解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:16:13.120

如果您关闭多项目解决方案并打开单个项目，将创建一个解决方案（仅继续该项目）。如果您编译项目，系统将提示您是否要保存解决方案。

# paypal - Paypal 定期付款

> ID：10638385
> 
> 赞同：5
> 
> 时间：2012-05-17T15:09:06.130
> 
> 标签：paypal

我从客户那里得到了增强，如果可能的话，我的回答很麻烦。

我拥有的是一个提供 seo 服务的网站。客户端键入短语而不是选择服务选项等。有几个服务选项，例如：

*   单次付款 - 服务仅每 90 天有效
*   会员资格 - 客户声明每 90 天支付一笔款项（循环支付）
*   会员资格 + 额外支持 - 与会员资格相同，但 + 额外金额

1) 假设客户选择了第一个选项，并在 90 天后决定继续服务。是否可以在无需客户干预的情况下通过贝宝设置定期付款*（我们不会在数据库中存储任何信用卡号码）。

2）假设客户选择了第二个选项，大约 10 天后决定获得额外的支持。是否可以更改我们每 90 天向客户收取的金额，而不受他的干扰*。

```
* client don't have to fill up payment form (paypal side) once again. 
```

如果有人能帮助我解决这个问题，我将不胜感激。如果有可能我必须获得哪个贝宝账户。谢谢马切克

* * *

谢谢您的回复。但是我还是不明白。您知道我（作为商家）如何从我的网站/商店管理面板（不是贝宝个人资料网站）取消订阅者的订阅吗？

在 PDF“定期付款 API 概述”中，我读到“注意：目前没有 API 访问权限允许商家修改或取消配置文件。” 并且限制：“您不能使用 Recurring Payments API 修改或取消定期付款配置文件”。

这个问题我能做些什么？也许还有另一个 Paypal API 可以让我做我想做的事。

顺便阅读 PayPal 支付标准集成指南，我发现如果没有订阅者的登录，就无法升级他的帐户。是否可以在没有登录的情况下升级（每月收取更多费用）？

谢谢马切克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:11:01.587

是的，PayPal 有一个“订阅”模式来处理这类事情，包括修改订阅的能力。请参阅[https://www.paypal.com/pdn-recurring](https://www.paypal.com/pdn-recurring)。

# extjs - ExtJS可折叠面板在展开时不呈现工具栏？

> ID：10638388
> 
> 赞同：0
> 
> 时间：2012-05-17T15:09:14.677
> 
> 标签：extjs, grid, panel, paging, toolbar

我在可折叠面板中使用工具栏渲染网格时遇到了麻烦。正如您在底部的代码中看到的那样，我有阅读器、存储、带有 bbar 和面板的网格。当我将面板的可折叠属性设置为**假**网格时，工具栏会完美呈现。但是，当我将面板可折叠属性设置为**true**然后展开面板时，我看不到工具栏。我想在面板上显示带有工具栏的网格和数据展开没有任何麻烦。如何修复此代码？

谢谢大家。

```
var reader_DailyActivity = new Ext.data.JsonReader({
    totalProperty       : 'total',
    successProperty : 'success',
    root            : 'data',
    fields          : [
                        {name: 'date'},
                        {name: 'time'},
                {name: 'description'},
                {name: 'speed'},
                {name: 'distance'},
                {name: 'type'},
                {name: 'source'}
            ]
});

var store_DailyActivity = new Ext.data.Store({
    id      : 'dailyActivityStoreID',
    reader      : reader_DailyActivity
});

var pagingToolbar = new Ext.PagingToolbar({
    pageSize    : 20,
    buttonAlign     : 'center',
    store       : store_DailyActivity
});

var DailyActivityGrid = new Ext.grid.GridPanel({
    id          : 'dailyActivityGrid',
    store           : store_DailyActivity,
    loadMask        : true,
    height          : 300,
    autoScroll      : true,
    viewConfig      : { 
        emptyText       : 'No Record Found',
        deferEmptyText  : false,
        forceFit        : true
    },
    columns         :[
                    {header: 'Date', dataIndex: 'date'},
                    {header: 'Time', dataIndex: 'time'},
                    {header: 'Description', dataIndex: 'description'},
                    {header: 'Speed', dataIndex: 'speed'},
                    {header: 'Distance', dataIndex: 'distance'},
                    {header: 'Type', dataIndex: 'type'},
                    {header: 'Source', dataIndex: 'source'}
                ],
    bbar        : pagingToolbar
});

var VehicleDetail = new Ext.Panel({
    title       : 'Activity Details',
    id      : 'panel_DetailID',
    collapsible : true,
    collapsed   : true,
renderTo    : 'renderedDivID',
    items       : DailyActivityGrid,
    listeners   : {
        'expand' : function(hede)
        {
            var panelMask = Ext.getCmp('panel_DetailID');
            // mask grid panel
            panelMask.getEl().mask('Please Wait');

        Ext.Ajax.request({                 
                url: 'url comes here',
                params: 
                {
                    param1  : reqParam1,
            start   : 0,
            limit   : 20
                },
                success: function (result, request) 
                {                   
                    var resData = Ext.util.JSON.decode(result.responseText);
                    store_DailyActivity.loadData(resData);
                    // unmask grid panel
                    panelMask.getEl().unmask();
                },
                failure: function ()
                {
                    console.log('error');
                }
        });
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:57:03.410

请尝试删除 GridPanel 的高度。我在 RowExpander 中遇到了同样的问题，我试图在扩展器上加载网格。就我而言，Grid 显示正常，但由于高度限制，tbar 和 bbar 没有显示。因此，我尝试移除网格的高度，它为我带来了成功。您的问题与我的类似，因此请尝试此建议。希望它有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:58:11.963

您可以尝试几件事：

1.  给包含面板一个布局配置`layout: 'fit'`。
2.  使用明确的停靠项目，即删除`bbar: pagingToolbar`并放入：

> ```
> dockedItems: [{
>     xtype: 'pagingtoolbar',
>     dock: 'bottom',
>     pageSize: 20,
>     buttonAlign: 'center',
>     store: store_DailyActivity
> }], 
> ```

# java - 我如何知道是否在被测单元上调用了方法？

> ID：10638396
> 
> 赞同：4
> 
> 时间：2012-05-17T15:09:33.193
> 
> 标签：java, testing, tdd, mockito

我正在`Derived`使用 mockito 在 TDD 中编写一个新类（），我有以下情况：

类基：

```
public abstract class Base<T>{
    //.......
    protected final T baseCreate(T entity){
        // implementation
    }
} 
```

派生类（这是我使用 TDD 编写的类）：

```
public class Derived extends Base<MyObject> {
    //.......
    public MyObject create(MyObject entity){
        baseCreate(entity);    //This is what I want the implementation to be
    }
} 
```

当我开始编写测试时，将迫使我调用该`baseCreate`方法——我不明白该怎么做。有没有办法使用 mockito 来验证`create(...)`方法 in`Derived`调用类中的`baseCreate(...)`方法`Base`？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:14:41.843

单元测试是为了测试类的行为，而不是它的实现。所以你不应该关心`Base`'s`baseCreate()`是否被显式调用，而是调用`Derived`'s`cerate()`是否完全符合你从外部观察者的角度所期望的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T18:07:06.657

Attila 适用于大多数情况。您要测试的是 create 实际上做了您认为它应该做的事情，而不是它是如何做的。您在这里的情况听起来像，“我已经知道 baseCreate 做了我想要它做的事情，所以我不想重新测试它，只是它被调用了。” *可能*是这种情况，但如果是这样，那么您的超类实际上更像是一个合作者。这是支持委托而不是继承的部分原因。尽管如此，有时很难回过头来改变那个设计决定，所以你必须测试你所拥有的。

您仍然应该倾向于仅检查“create”是否总体上执行了您希望它执行的操作，但是您可能会遇到这样的情况，baseCreate 确实在做很多需要设置大量协作者的事情，这使得它难以测试且易碎。在这种情况下，您会想要使用“间谍”。除非您专门创建另一个期望，否则间谍会包装“真实”对象并委托给真实的方法调用。

如果你可以公开 baseCreate，你可以像这样使用 Mockito：

```
@RunWith(MockitoJUnitRunner.class)
// We prepare PartialMockClass for test because it's final or we need to mock private or static methods
public class YourTestCase {
    @Spy
    private Derived classUnderTest = new Derived();

    @Test
    public void privatePartialMockingWithPowerMock() {        
        MyObject myObject = new MyObject();
        when(classUnderTest.baseCreate(myObject)).thenReturn(myObject);

        // execute your test
        classUnderTest.create(myObject);

        verify(classUnderTest).baseCreate(myObject);
    }
} 
```

如果您不能公开 baseCreate，我认为您可以使用[PowerMock](http://code.google.com/p/powermock/wiki/MockitoUsage13)。它可以让您验证私有方法，但我认为它也没有任何理由不能执行受保护的方法。

```
@RunWith(PowerMockRunner.class)
// We prepare PartialMockClass for test because it's final or we need to mock private or static methods
@PrepareForTest(Derived.class)
public class YourTestCase {
    @Test
    public void testCreate() {        
        Derived classUnderTest = PowerMockito.spy(new Derived());
        MyObject myObject = new MyObject();

        // use PowerMockito to set up your expectation
        PowerMockito.doReturn(myObject).when(classUnderTest, "baseCreate", myObject);

        // execute your test
        classUnderTest.create(myObject);

        // Use PowerMockito.verify() to verify result
        PowerMockito.verifyPrivate(classUnderTest).invoke("baseCreate", myObject);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:34:43.427

`Derived`你说你正在使用 TDD - 所以大概，有一些关于其中一个或`Base`两个所需行为的规范。因此，您将围绕该规范编写一些测试。这些测试不需要你进行`Derived`扩展`Base`——它们只需要每个类的某些行为；这将是您可以在完全不使用继承的情况下实现的行为。

一旦您的测试通过，TDD 的下一个阶段就开始了。这是“重构”阶段，您可以在其中寻找类设计方式的改进。这是您决定进行`Derived`扩展`Base`并进行`create`方法调用的地方`baseCreate`。奇妙的是，当您进行重构时，您已经进行了一些测试，以确保它正常工作。

# asp.net-mvc - 如何根据用户是否在角色中将参数传递给 Razor 的扩展

> ID：10638400
> 
> 赞同：0
> 
> 时间：2012-05-17T15:09:53.230
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有以下内容：

```
@Html.NavLinks(@Model.menuItems, (string)ViewBag.FilePath) 
```

现在我想添加另一个基于用户角色的参数

```
User.IsInRole("Admin")
User.IsInRole("Guest1")
User.IsInRole("Guest2") 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:14:09.993

根据您提供的信息，我可以考虑以两种方式之一扩展帮助程序 NavLink：

1.  添加用于传递用户角色的参数
2.  仅传递包含您的方法所需的所有字段的类/接口类型的参数

# javascript - 以数组为参数执行函数

> ID：10638403
> 
> 赞同：0
> 
> 时间：2012-05-17T15:10:03.243
> 
> 标签：javascript, jquery, underscore.js

我有一个元素随机计数的数组，例如：

```
var array = [1, 2]; 
```

我想用下一个参数执行一些函数：

```
functionName(SOME_CONST, array[0], array[1]) 
```

考虑到数组可能有不同数量的参数，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:16:17.957

查看[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)了解有关如何使用 Function.prototype.apply 方法的详细信息。

只要您想将数组中的所有项目用作您正在调用的函数中的参数，您就可以使用：

```
function some_method(a, b, c) {}

var array = [1,2];
some_method.apply(this, ['SOME_CONST'].concat(array)); 
```

这将导致调用 some_method，其中 a 是“SOME_CONST”，b 和 c 是数组中的前两个元素。如果数组中有更多元素，它们将出现在 some_method 函数的参数列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:13:28.080

您可以只调用函数并传入数组本身而不是像这样的元素

```
function functionName(SOME_CONST, myArray){
  //myArray contains the same elemnts here too
} 
```

然后你可以像这样调用函数

```
 var myArray = [1,2];
   functionName(CONST_VAL,myArray); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:13:43.257

最简单的解决方案是将整个数组传递给函数并让函数对其进行迭代。这将允许可变长度数组。

```
functionName(SOME_CONST, array) {
  for (var ii = 0, len = array.length; ii < len; ii++) {
    // do something.
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T15:18:11.630

使用[`.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply), 和数组连接，我的意思是创建新数组，让`SOME_CONST`第一个元素成为第一个元素并加入你已经拥有的另一个数组。

你可以这样做，

```
var array = [1, 2];
functionName.apply(thisObj || window, [SOME_CONST].join(array));

function functionName(a, b, c){
 //a is SOME_CONST, b is 1 and c is 2    
} 
```

`thisObj`是您正在调用的函数的范围/上下文。如果您没有`thisObj`刚刚通过的`window`对象

# javascript - 在 JavaScript 中检查日期格式

> ID：10638405
> 
> 赞同：0
> 
> 时间：2012-05-17T15:10:06.707
> 
> 标签：javascript, jquery, date

我想在使用 JavaScript (jQuery) 发布帖子之前检查日期格式是否为 (dd/mm/yyyy)。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T15:13:15.907

您可以使用正则表达式：

```
/^\d{2}\/\d{2}\/\d{4}$/.test(str) 
```

当然，这不会检查有效日期，但在这种情况下，您总是可以让您的服务器端代码抛出错误。如果您想要更多客户端验证，请查看[Javascript：如何验证 MM-DD-YYYY 格式的日期？](https://stackoverflow.com/questions/276479/javascript-how-to-validate-dates-in-format-mm-dd-yyyy); 很容易适应您的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:13:08.733

考虑到日期小于等于 12 的情况的模糊性，我认为这将非常困难

# silverlight - 更改 Silverlight 视图

> ID：10638407
> 
> 赞同：0
> 
> 时间：2012-05-17T15:10:14.680
> 
> 标签：silverlight, xaml, mvvm

我正在尝试从现有视图创建一个扩展，其中我有一个文本控件列表，并且在新项目中我想使用此控件并将这些文本框之一更改为单选按钮。

使用 MVVM 可以很容易地使用相同的代码，而无需重复代码，但对于 XAML 视图，我没有找到在不创建副本的情况下进行此更改的好方法。

例子：

具有主要用户控件的核心项目

```
<UserControl x:Class="SilverlightApplication4.MainPage" Name="test"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <StackPanel>
            <TextBlock>
            asdfasdf
            this is a test
            </TextBlock>
            <Button Height="120" Name="asdf" Content="This is a Button">

            </Button>
        </StackPanel>

    </Grid>
</UserControl> 
```

现在我有第二个项目，我想将 TextBlock 更改为其他内容。

```
<UserControl x:Class="SilverlightApplication1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
             xmlns:core="clr-namespace:SilverlightApplication4;assembly=SilverlightApplication4" d:DesignHeight="300" d:DesignWidth="400">
<core:MainPage>
   <!-- how do i change the type of child elements?-->
</core:MainPage>

</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:14:00.860

解决方案是使用 ContentControl 并通过 Caliburn.Micro 将其绑定到 ViewModel。

我在我的另一个问题中添加了一个示例和代码（在 XAML 部分下方）：[EF/Silverlight 应用程序的项目结构](https://stackoverflow.com/questions/10583451/project-structure-for-ef-silverlight-application)

# javascript - 使用 .play() 通过按 enter 键来播放/暂停视频

> ID：10638408
> 
> 赞同：1
> 
> 时间：2012-05-17T15:10:16.193
> 
> 标签：javascript, google-chrome, html5-video

我正在寻找一种在 Chrome 中启动和停止 HTML 5 视频的方法（我正在使用`impress.js`，所以它只能在 Chrome 中工作），方法是按 enter 键。

我知道它与`.play()`函数有关，但我对 JavaScript 很陌生。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:16:16.083

```
var video = document.getElementById('video-element-id-here');

document.onkeypress = function(e) {
    if ( (e || window.event).keyCode === 13 /* enter key */ ) {
        video.paused ? video.play() : video.pause();
    }
}; 
```

OP：也请看评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:25:10.927

```
var myVideo = document.getElementById('vid-id');

document.documentElement.addEventListener("keyup", function(e) {
    var ev = e || window.event; // window.event for IE fallback
    if(ev.keyCode == 13) {
        // toggle play/pause
        if(myVideo.paused) { myVideo.play(); }
        else { myVideo.pause(); }
    }
}); 
```

**注意：** `keyup`每次按下仅触发一次，当一个键被释放时。 如果用户按住键`keydown`，将重复触发。`keypress`

# php - 选择上传文本的类别

> ID：10638409
> 
> 赞同：0
> 
> 时间：2012-05-17T15:10:16.877
> 
> 标签：php, upload, categories

我正在建立一个文本上传网站。当您在本网站上发布文字时：[http ://www.youngcreativity.se/post.php](http://www.youngcreativity.se/post.php)

我想要一个按钮，您可以在其中选择文本类别。

当用户选择例如诗歌时，他/她的文本应该上传到诗歌类别。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:26:51.377

你已经接近了，你只需要在你的选择框中添加一个“名称”属性，比如

```
<select name="category">...</select> 
```

# css - 在页面底部保留页脚 DIV

> ID：10638413
> 
> 赞同：0
> 
> 时间：2012-05-17T15:10:39.330
> 
> 标签：css, html, footer, sticky-footer

我正在开发一个响应式站点，并且无论正在使用的浏览器窗口的宽度如何，我都试图将 DIV 保持在页面底部。我已经尝试过“Sticky Footer”方法“http://ryanfait.com/sticky-footer/”，但它需要您定义页脚的高度，并且页脚的高度会随着浏览器宽度的调整而变化。

是否有任何其他方法可以在您不必定义页脚高度的情况下使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:19:20.147

那是你需要的吗？

```
#footer { position: fixed: bottom: 0; left: 0; } 
```

[例子](http://jsfiddle.net/5uMj4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:20:45.443

将高度更改为最小高度。应该管用。[http://jsfiddle.net/Mrhh3/](http://jsfiddle.net/Mrhh3/)

# python - 将服务器目录树中的 html 文件加载到 iframe 中失败

> ID：10638414
> 
> 赞同：1
> 
> 时间：2012-05-17T15:10:41.353
> 
> 标签：python, html, web-services, flask, web-frameworks

我有一个使用 Flask Web 框架在我的机器上运行的本地服务器。我想要的是将存储在应用程序目录树内的文件夹中的 html 文件加载到 iframe 中。iframe src 指向“fld/file.html”，所以我会说该文件在范围内，但到目前为止我还无法加载它。我不断收到“未找到”错误。

我究竟做错了什么？是安全问题吗？我可以使用另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:18:04.360

将 HTML 文件放在您的静态文件夹中：http: [//flask.pocoo.org/docs/quickstart/#static-files](http://flask.pocoo.org/docs/quickstart/#static-files)

# php - PHP PDO 参数号无效：未使用 Q 标记参数定义参数

> ID：10638417
> 
> 赞同：0
> 
> 时间：2012-05-17T15:10:51.937
> 
> 标签：php, mysql, pdo

**编辑**：您不允许在标题中使用“问题”一词。Q-mark的意思是“问号”

**编辑 2**：意识到我应该从虚拟客户记录中删除我的个人联系信息

我正在尝试制作一些基本功能以减少对最近项目的维护。其中包括以下简单功能，因此我可以在以后向数据库添加列，而无需更改更新查询：

```
function update( $table, $fields ) {
    global $db; // A slightly modified PDO object
    if( count( $fields ) > 0 ) {
        $query = "UPDATE `" . $table . "` SET ";
        foreach( $customer as $key => $value ) {
            $query .= "`" . $key . "` = ?, ";
        }
        $query = substr( $query, 0, -2 );
        $query .= " WHERE `id` = " . $_REQUEST['id'];
        $db->prepare( $query );
        $db->execute( $fields );
    } else { return true; }
} 
```

当我传递一个或两个字段时，此函数正在工作，但当我尝试传递更多字段时，它失败了。`$fields`这是我收到的查询、值和错误：

询问：

```
string 'UPDATE `customers` SET `5v` = ?, `contactaddress` = ?, `contactaddress2` = ?, `contactcity` = ?, `contactemail` = ?, `contactname` = ?, `contactphone` = ?, `contactstate` = ?, `contactzip` = ?, `corrugated` = ?, `name` = ?, `permalok` = ?, `residential` = ?, `secureseam` = ?, `tax` = ? WHERE `id` = 1' (length=301) 
```

$字段：

```
array
  '5v' => string '120' (length=3)
  'contactaddress' => string '999 Street Dr' (length=13)
  'contactaddress2' => string 'Apt 2' (length=7)
  'contactcity' => string 'City' (length=9)
  'contactemail' => string 'steven.abarnett@gmail.com' (length=25)
  'contactname' => string 'Steven Barnett' (length=14)
  'contactphone' => string '(555) 555-5555' (length=14)
  'contactstate' => string 'KY' (length=2)
  'contactzip' => string '55555' (length=5)
  'corrugated' => string '90' (length=2)
  'name' => string 'Steven's Metals' (length=15)
  'permalok' => string '130' (length=3)
  'residential' => string '100' (length=3)
  'secureseam' => string '130' (length=3)
  'tax' => string '6' (length=1) 
```

错误：

```
string 'Statement execution failed: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined' (length=96) 
```

谷歌搜索这个错误，这听起来像是*命名*参数的问题，而不是*问号*参数。为什么我会收到此错误？

**更新**：

我一直在继续调试和实验并跟踪错误，我发现它不是语句执行失败，而是尝试在之后获取结果。

在我修改过的 PDO 对象中，我的`execute()`方法中有以下代码：

```
 // Load from database
    try {
        $this->stmt->execute( $args );
        $this->lastid = $this->dbh->lastInsertId();
        $this->data = $this->stmt->fetchAll();
    } catch (PDOException $e) {
        $this->error = 'Statement execution failed: ' . $e->getMessage();
        return false;
    } 
```

在该部分的每一行之间放置`echo`语句`try{}`表明前两行运行顺利，但第三行抛出异常。

当我打电话时，我的查询是否会因一般错误而失败`PDOStatement::fetchAll()`？

**最后更新：**

事实证明，[PDO 和 Mysql 已经 6 年没玩得很好了](https://bugs.php.net/bug.php?id=35793)。一般的解决方案似乎是在每次调用后取消设置 PDOStatement 对象`PDOStatement::execute()`，但这对我不起作用。问题源于 MySQL 一次只能打开一个指向记录集中记录的游标，因此另一种建议的解决方案是使用`PDOStatement::fetchAll()`而不是`PDOStatement::fetch()`OR 来调用`PDOStatement::closeCusor()`. 同样，这对我不起作用。我的问题来自 MySQL 的某些安装，它会在 、 和 查询期间创建一个游标`INSERT`（`UPDATE`所有`DELETE`这些都没有返回数据），因为它指向空数据，所以无法关闭。

我的解决方案是仅`PDOStatement::fetchAll()`在运行返回数据的查询时调用。我有一个`queryhash`用于缓存的变量（我对 PDO 类所做的重大修改），它被设置`false`为这三种查询类型（因为您需要将查询发送到数据库而不是推迟到缓存）。我只是修改了我的`execute()`函数来检查这个变量，并且只有`fetchAll()`在它没有设置为 false 时才调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:13:46.413

您应该使用索引数组而不是关联数组。

```
array(
    '120',
    '750 Shaker Dr',
    'Apt 505',
    'Lexington', 
    'steven.abarnett@gmail.com', 
    'Steven Barnett', 
    '(859) 402-7760', 
    'KY',
    '40504', 
    '90',
    "Steven's Metals",
    '130',
    '100',
    '130',
    '6'
)
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T15:14:34.210

从 PHP 5.2 开始，传递给的数组的`execute()`键必须与语句字符串中的键相同。由于您使用过`?`，因此 PDO 期望将数字索引数组传递给`execute()`非关联数组。构造`$fields`数组时，只需以正确的顺序将每个值附加到它上面，不要指定键。或者，将它们提取到数字索引数组中`array_values()`：

```
$db->execute(array_values($fields)); 
```

请参阅上的[文档`PDOStatement::execute()`](http://php.net/manual/en/pdostatement.execute.php)

> 5.2.0 input_parameters 中的键必须与 SQL 中声明的键匹配。在 PHP 5.2.0 之前，这被默默地忽略了。

# java - 如何让我的程序找到唱片店？

> ID：10638418
> 
> 赞同：1
> 
> 时间：2012-05-17T15:10:52.697
> 
> 标签：java, java-me, midp, rms

我刚刚开始使用 J2ME 和唱片存储。这似乎是打开一个名为“foo”的唱片店的正确方法，*而不是*创建一个新的：

```
RecordStore.openRecordStore("foo", false) 
```

好吧，我明白了。但是我应该把实际文件放在哪里让我的程序找到它呢？我正在使用 NetBeans 7.1.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:22:41.867

你不需要知道文件在哪里，J2Me把文件放在某个地方，如果store已经存在，你可以打开它，或者如果它不存在，在open方法中使用true来创建它。

```
RecordStore rs = RecordStore.openRecordStore("foo", true); 
```

要写入您的记录存储，请使用以下命令：

```
String s = "your-data";
byte[] rec = s.getBytes();
rs.addRecord(rec, 0, rec.length); 
```

读书 ：

```
RecordEnumeration re = rs.enumerateRecords(null, null, false);
while (re.hasNextElement()){
   String s = new String(re.nextRecord());
} 
```

并在每次操作后关闭您的 recordStore：

```
 rs.closeRecordStore(); 
```

* * *

**更新**

> 如何读取文件的内容？

将现有文件作为普通文件读取：

```
InputStream is = getClass().getResourceAsStream("/res/foo");
StringBuffer sb = new StringBuffer();
int chars;
while ((chars = is.read()) != -1)
    sb.append((char) chars);
String str = new String(String.valueOf(sb).getBytes("UTF-8")); 
```

并使用上面的代码将字符串写入您的recordStore。

# tsql - 与 ComboBox 结合使用的存储过程列表和参数号

> ID：10638421
> 
> 赞同：0
> 
> 时间：2012-05-17T15:11:09.590
> 
> 标签：tsql, c#-4.0, stored-procedures, combobox

我正在尝试获取所有用户定义的存储过程的列表以填充组合框。这个想法是手动创建一个包含以下列的表：

> SProc 名称、输入数量、参数 1、参数 2 ...

用户应该单击一个按钮，一个 SProc 从该表中选择所有这些数据，将其加载到一个数组中并填充组合框。

然后，用户应从组合框中选择一个存储的过程名称，并显示所需的参数数量（带有相关名称）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:29:07.703

根据我们在 SO chat 中的讨论：

```
SELECT
    sprocs.ROUTINE_NAME,
    parms.PARAMETER_NAME,
    parms.DATA_TYPE
FROM
    INFORMATION_SCHEMA.ROUTINES sprocs
    LEFT OUTER JOIN INFORMATION_SCHEMA.PARAMETERS parms ON parms.SPECIFIC_NAME = sprocs.ROUTINE_NAME
WHERE
    sprocs.ROUTINE_TYPE = 'PROCEDURE'
    --AND PATINDEX('/*<SomeKeyToSearch>*/', sprocs.ROUTINE_DEFINITION) > 0 
```

这将为您提供所有存储过程及其参数和数据类型的列表。请注意，您还需要密切注意数据类型（精度、比例、最大长度等），因为这将用于允许用户调用任意存储过程。在 C# 应用程序中获得整个表格后，您可以根据您想要的任何标准进行分组/排序/限制。如果您想确保从上述查询中只返回特定的存储过程，只需使用您可以搜索的某种键向存储过程添加顶级注释。

祝你好运。

# c# - 如何使用 Moq.MockRepository.Of() 方法

> ID：10638422
> 
> 赞同：8
> 
> 时间：2012-05-17T15:11:09.420
> 
> 标签：c#, unit-testing, mocking, moq

Moq.MockRepository.Of() 和 Moq.MockRepository.OneOf() 的正确用法是什么？我已经尝试过这样的事情来试图弄清楚。

```
var mr = new MockRepository(MockBehavior.Strict);
var m = mr.Of<ISomeInterface>();
foreach (var obj in m)
    cnt++; 
```

我发现 cnt 只是不断增加，没有尽头。是什么赋予了？有关这方面的文档不会出现。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T08:37:56.593

您可以使用`Moq.MockRepository.Of()`通过表达式创建模拟。这最好用一个例子来解释：

```
public interface ITest
{
    String Say();
    Int32 DoSomething(Int32 a, Int32 b);
}

class Program
{
    public static void Main()
    {
        var repo = new MockRepository(MockBehavior.Strict);
        var mock = repo.Of<ITest>()
                       .Where(s => s.Say() == "Hi!")
                       .Where(s => s.DoSomething(5, 4) == 20)
                       .Where(s => s.DoSomething(4, 5) == 9)
                       .Where(s => s.DoSomething(It.IsAny<Int32>(), 7) == 99)
                       .First();

        Console.WriteLine(mock.Say());                 // prints Hi!
        Console.WriteLine(mock.DoSomething(5, 4));     // prints 20
        Console.WriteLine(mock.DoSomething(4, 5));     // prints 9
        Console.WriteLine(mock.DoSomething(23423, 7)); // prints 99
        Console.WriteLine(mock.DoSomething(0, 0));     // Fail due to MockBehavior.Strict

        Console.ReadKey();
    }
} 
```

# c - memcpy uint32_t 和 char* 转换为 char*

> ID：10638426
> 
> 赞同：-1
> 
> 时间：2012-05-17T15:11:11.667
> 
> 标签：c, char, buffer, memcpy

这对我不起作用：

```
char buff[11];
char* msg_ptr;
msg_ptr = buff;
uint8_t id; 
uint32_t msg_length;
char msg[] = "hallo";
id = 77;
msg_length = 5;

memcpy(buff, &id, sizeof(uint8_t));
memcpy(buff+1, &msg_length, sizeof(uint32_t));
strcpy(buff+5, msg);

printf("id :%d\n",*(uint8_t*)msg_ptr);
msg_ptr++;

printf("msg_length: %d\n", *msg_ptr);

msg_ptr++;
printf("msg: %s\n", msg_ptr); 
```

Id 和 msg_lentgh 显示在 konsole 上，但之后出现分段错误。我是C新手，请尽可能详细。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:36:08.573

```
msg_ptr = msg+1 
```

那是你的问题。您应该执行 *msg_ptr++* 以转到下一个位置（即 *msg_len*）。相反，您将指针更改为指向*msg*字符串中的“a”。

代码中还有 2 个错误：

*   您没有考虑字符串的终止 '\0'。你有 1 + 4 + 5 + 1，最后一个是终止的 '\0'。此外，在处理字符串时使用*strncpy*，它处理复制字符串终止符。*memcpy*将完全按照您的要求进行复制。你正在破坏你的堆栈。

*   在最后一行，您必须将字符串打印为数字。使用 %s。

这是[Wikipedia](http://en.wikipedia.org/wiki/C_string_handling)对 C 字符串和[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)的看法。

# java - 从 Java 到第三方 C++ 库的 JNI 回调系统

> ID：10638432
> 
> 赞同：1
> 
> 时间：2012-05-17T15:11:35.017
> 
> 标签：java, callback, java-native-interface

我已经做了一些研究，包括在 StackOverflow 中，但我仍然有一些问题需要处理，我有点需要你的帮助。

所以，我有一个 Java 库，它被用作第 3 方 C++ 库的包装器。这个 C++ 库是所有逻辑所在。因此，它具有异步行为，并且需要注册回调以获取其事件的通知。我希望能够从 Java 注册回调，并能够在 Java 中获得它们各自事件的通知。

目前我有这样的事情：

1.  用于注册回调的 Java 方法（此回调在 Java 中注册）并调用将在 3rd 方库中注册回调的 C++“本机”方法（这是通过 C++ 完成的）；
2.  另一个 Java 方法，名为“fireMyEvent”，由我的第 3 方的 lib 回调（来自 C++）调用。

这里的问题是，当我的第 3 方的 lib 回调被触发时，我无法访问 JNIEnv，也无法访问作业对象。

我在 StackOverflow 上看到了如何通过缓存 JavaVM 指针来访问 JNIEnv 指针。不过，我不确定如何访问 jobject 实例，以便能够调用我的 CallVoidMethod：

```
env->CallVoidMethod(theJObjectThatIWant, methodId, ...) 
```

我虽然在调用在我的 3rd 方库中注册回调的 C++ 方法期间缓存对象，但我不确定这在有多个“Java 包装器对象”的情况下是否可以接受（我m 指的是通过 JNI 包装 C++ 功能的对象）在应用程序中。

您对克服这种情况有何建议？

我希望我已经把我的问题说清楚了，如果我的研究不足以在这个论坛中找到一个已经存在的答案，我深表歉意:(。

非常感谢和问候。

**编辑**：缓存“ *jobject* ”似乎不起作用，因为我最终遇到了执行“ *CallVoidMethod* ”方法的“访问冲突”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:14:52.547

要在本机调用结束后缓存 Java 引用，需要全局引用。

请参阅[此 JNI 参考中的“本地和全局参考”](http://java.sun.com/docs/books/jni/html/refs.html#27423)。

# android - 如何仅为视图设置触摸事件

> ID：10638433
> 
> 赞同：1
> 
> 时间：2012-05-17T15:11:38.080
> 
> 标签：android, view, touch

我正在使用来自 android 开发者博客的 android 触摸示例，但触摸适用于屏幕上的任何位置，不仅在具有触摸的视图上：使用代码是：

```
package pit.opensource.touch;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;

public class TouchExampleView extends View {
    private static final int INVALID_POINTER_ID = -1;

    private Drawable mIcon;
    private float mPosX;
    private float mPosY;

    private float mLastTouchX;
    private float mLastTouchY;
    private int mActivePointerId = INVALID_POINTER_ID;

    View currentView;

    private ScaleGestureDetector mScaleDetector;
    private float mScaleFactor = 1.f;

    public TouchExampleView(Context context) {
        this(context, null, 0);

        currentView = this;

    }

    public TouchExampleView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public TouchExampleView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        mIcon = context.getResources().getDrawable(R.drawable.ic_launcher);
        mIcon.setBounds(0, 0, mIcon.getIntrinsicWidth(), mIcon.getIntrinsicHeight());

        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // Let the ScaleGestureDetector inspect all events.
        mScaleDetector.onTouchEvent(ev);

        final int action = ev.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {
            final float x = ev.getX();
            final float y = ev.getY();

            int viewTop = currentView.getPaddingTop();
            int viewLeft = currentView.getPaddingLeft();

            int viewWidth = currentView.getWidth();
            int viewHeight = currentView.getHeight();

            Log.d("Top",viewTop+"");
            Log.d("Left",viewLeft+"");
            Log.d("Width",viewWidth+"");
            Log.d("Height",viewHeight+"");

            if(x>(viewLeft + viewWidth) || y>(viewTop+viewHeight)) 
            {
                return false; 
            }else{
                mLastTouchX = x;
                mLastTouchY = y;
                mActivePointerId = ev.getPointerId(0);
            }

            break;
        }

        case MotionEvent.ACTION_MOVE: {
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

            break;
        }

        case MotionEvent.ACTION_UP: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_CANCEL: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_POINTER_UP: {
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                    >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
                    final int pointerId = ev.getPointerId(pointerIndex);
                    if (pointerId == mActivePointerId) {
                        // This was our active pointer going up. Choose a new
                        // active pointer and adjust accordingly.
                        final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                        mLastTouchX = ev.getX(newPointerIndex);
                        mLastTouchY = ev.getY(newPointerIndex);
                        mActivePointerId = ev.getPointerId(newPointerIndex);
                    }
                    break;
        }
        }

        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.save();
        canvas.translate(mPosX, mPosY);
        canvas.scale(mScaleFactor, mScaleFactor);
        mIcon.draw(canvas);
        canvas.restore();
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            mScaleFactor *= detector.getScaleFactor();

            // Don't let the object get too small or too large.
            mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

            invalidate();
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:47:54.287

`View.OnTouchListener`为要处理触摸事件的视图实现。

否则，调用`getDrawingRect(Rect outRect)`以获取视图边界。然后使用 . 检查此视图边界是否包含触摸点坐标`outRect.contains(touchX, touchY)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:33:07.207

对于 onTouch 事件，如果您不希望将事件进一步传递给其他层，则返回 true。

# java - 如何在 RCP 浮动窗口中排列多个视图？

> ID：10638435
> 
> 赞同：3
> 
> 时间：2012-05-17T15:11:43.333
> 
> 标签：java, eclipse, eclipse-rcp

可以将视图从 Eclipse RCP 应用程序中拉出到它们自己的浮动窗口中。该浮动窗口可以有多个视图堆叠在一起。但是，据我所知，它不能在像主 RCP 应用程序窗口这样的布局中同时显示多个视图。

我通过创建一个新的“窗口”来解决这个问题（请参阅[Eclipse RCP 应用程序 - 以编程方式创建一个窗口](https://stackoverflow.com/questions/864224/eclipse-rcp-application-create-a-window-programatically)）。但是，这有许多缺点：

1.  新窗口有一个菜单栏，我真的不想要。
2.  它允许标记为不允许重复的视图的两个副本（每个窗口一个）。
3.  不能在两个窗口之间拖动视图。

我的问题：当您将视图拉出到自己的窗口中时，是否有任何方法可以配置 Eclipse RCP 创建的浮动视图的行为，以便其他视图可以停靠在它旁边？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:31:21.610

不，这是您无法更改的内部实现。

# tsql - 第一个空格后的 SQL 修剪

> ID：10638437
> 
> 赞同：-4
> 
> 时间：2012-05-17T15:11:52.697
> 
> 标签：tsql

我需要修剪字符串中第一个空格之后的所有内容。

示例：阿司匹林口服

我只需要阿斯普林。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T15:17:16.823

在 TSQL 中：

```
declare @test varchar(30)
select @test = 'Asprin Oral'

select substring(@test, 1, charindex(' ', @test + ' ')-1) 
```

或像@GilM 所说：

```
declare @test varchar(30)
select @test = 'Asprin Oral'

select LEFT(@test, CHARINDEX(' ', @test+' ')-1) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T15:14:28.020

你可以`String.Split(' ')`在空格上做一个并占据`[0]`结果的位置。

[String.Split()](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

# c++ - 当要测试的类很复杂时，如何编写单元测试？

> ID：10638442
> 
> 赞同：4
> 
> 时间：2012-05-17T15:12:00.010
> 
> 标签：c++, unit-testing, tdd, code-coverage, cxxtest

我正在尝试使用**TDD**使用 VS 2010 在 C++ 中编写西洋双陆棋游戏。

我已经设置了[CxxTest](http://cxxtest.com)来编写测试用例。

第一个要测试的类是

```
class Position
{
public:
...
...
bool IsSingleMoveValid(.....)
...
...
} 
```

我想为函数**IsSingleMoveValid()**编写一个测试，我想测试应该证明该函数可以正常工作。不幸的是，要测试的案例太多了，即使我测试了几个案例，有些可能会逃脱。

你有什么建议？TDD 如何处理这些问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T15:20:45.327

一些指导方针：

1.  测试**常规案例**。在您的问题中：测试您知道有效的合法动作。您可以采用简单的方法，只使用少量测试用例，或者您可以编写一个循环，生成所有可能在您的应用程序中发生的合法移动并测试它们。
2.  测试**边界情况**。这并不真正适用于您的问题，但是为了测试`f(x)`您知道`x`必须位于范围内的形式的简单数值函数`[x_min, x_max)`，您通常还会测试`f(x_min-1), f(x_min), f(x_max-1), f(x_max)`. （如果您的内部棋盘表示带有溢出边缘，则它可能与棋盘游戏相关）
3.  测试**已知错误**。如果您遇到了您的 .com 无法识别的合法举动，请将其`IsSingleMoveValid()`添加为测试用例，然后修复您的代码。保留这样的测试用例以防止未来的回归是有用的（一些未来的代码添加/修改可能会重新引入这个错误，并且测试会捕获它）。

**测试覆盖率**（测试覆盖的代码行的百分比）是一个可以通过[gcov](http://gcc.gnu.org/onlinedocs/gcc/Gcov.html)等工具计算的目标。您应该自己进行成本效益分析，以测试代码的彻底程度。但是对于像游戏程序中的合法移动检测这样重要的东西，我建议你在这里保持警惕。

其他人已经评论了将测试分解为较小的子测试。其命名法是，这种孤立的功能是用**单元测试**来测试的，而高级代码中这些功能之间的协作是用**集成测试**来测试的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:14:02.603

通常，通过将复杂类分解为多个更简单的类，每个类都执行定义明确且易于测试的任务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:14:48.420

如果您正在编写测试，那么最简单的做法是将您的`IsSingleMoveValid`函数分解为更小的函数并单独测试它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T15:43:26.737

正如您在 Wikipedia 上看到的那样，[**TDD** - 测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)意味着首先编写测试。

在您的情况下，这意味着建立所有有效的移动并为它们编写一个测试函数。然后，您为每个中断测试编写代码，直到所有测试通过。

> ...不幸的是，有很多案例要测试，即使我测试了几个案例，有些可能会逃脱。

正如其他人所说，当一个函数太复杂时，是时候重构了！

我强烈建议您阅读 Martin Fowler 的《[重构 - 改进现有代码的设计》](http://www.amazon.ca/Refactoring-Improving-Design-Existing-Code/dp/0201485672)一书，并由 Kent Beck 和其他人贡献。它既是一本学习书，也是一本参考书，这使得它在我看来非常有价值。

This is probably the best book on refactoring and it will teach you how to split your function without breaking everything. Also, refactoring is a really important asset for TDD. :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T15:23:03.673

没有“太多的案例无法测试”这样的事情。如果可以编写处理一组案例的代码，则需要考虑。如果它们可以被编写并被思考，那么我们也可以编写测试它们的代码。平均而言，对于您编写的每 10 行（可测试）代码，您可以添加一个与之关联的测试代码的常数因子。

当然，整个技巧是知道如何编写与*可测试*描述相匹配的代码。

因此，您需要首先为所有案例编写测试。

如果有一个大的，让我们说为了讨论你有一组可数的可能情况来测试（即：对于所有 n 和 m 整数， add(n,m) == n+m ），但你的实际代码真的很简单；返回 n+m。这当然是微不足道的，但不要错过重点：您不需要测试棋盘中所有可能的移动，TDD 旨在使您的测试涵盖所有代码（即：测试执行所有 if 分支您的代码），不一定是所有可能的值或状态组合（呈指数级增长）

一个具有 80-90% 行覆盖率的项目，意味着您的测试在每 10 行代码中执行 9 行。通常，如果您的代码中存在错误，则在大多数情况下会在走特定代码路径时得到证明。

# sencha-touch-2 - 不显示主应用程序面板

> ID：10638446
> 
> 赞同：1
> 
> 时间：2012-05-17T15:12:05.330
> 
> 标签：sencha-touch-2

我是 Sencha 的新手。当我运行我的应用程序时，我的主面板不显示，只显示 NestedList。浏览器显示以下消息：

> 未捕获的类型错误：无法调用未定义的方法“getId”

我不知道如何解决它。我会很高兴任何提示。 [这是我的应用](http://www.senchafiddle.com/#VovtL#o7GJJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:51:13.953

您应该修改 3 件事以使您的应用程序正常工作：

*   删除`fullscreen: true`配置，因为它会破坏您的应用程序布局，因为它不是您应用程序的最外层组件。
*   `this.detailCard`从您的拆分视图中删除，`setItems`因为它**没有定义**，也**没有强制定义**。所以：`this.setItems([this.nestedList]);`就够了。
*   添加`layout: 'card'`到您的拆分视图配置。

我已经测试过了，效果很好。希望它可以帮助你。

# c - C编译器如何决定是调用库函数还是系统调用

> ID：10638448
> 
> 赞同：0
> 
> 时间：2012-05-17T15:12:30.137
> 
> 标签：c, function, compiler-construction, system-calls

我知道那`read`是系统调用。但是当我阅读`man 2 and man 3` read 时，它向我展示了不同的解释。所以，我怀疑它`read`有库函数和系统调用。在这种情况下，如果我`read`在我的 c 程序中使用，编译器是否会考虑读取为`library`函数，或者`system call`请解释一下这种混淆。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:17:00.370

它没有。系统调用存在于 libc（C 标准库）中，就像库函数一样。libc 中系统调用的实现只是“存根”，它调用调用内核的特定于系统的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:20:28.337

我假设你在 Linux 上。在该平台上，手册页`read(2)`描述了 Linux 系统调用，同时`read(3)`描述了 POSIX 规范`read`（如果您安装了 POSIX 手册页）。后者属于类别`3`，因为 POSIX 没有指定系统调用和库函数之间的区别。

libc 中只有一个`read`，它是系统调用（一个薄包装）。

# html - 如何从 .NET 中的标签中提取文本内容？

> ID：10638450
> 
> 赞同：1
> 
> 时间：2012-05-17T15:12:39.467
> 
> 标签：html, vb.net, string, parsing, split

我正在尝试编写一个 vb.net 函数来从标签中提取特定的文本内容；我写了这个函数

```
Public Function GetTagContent(ByRef instance_handler As String, ByRef start_tag As String, ByRef end_tag As String) As String
    Dim s As String = ""
    Dim content() As String = instance_handler.Split(start_tag)
    If content.Count > 1 Then
        Dim parts() As String = content(1).Split(end_tag)
        If parts.Count > 0 Then
            s = parts(0)
        End If
    End If
    Return s
End Function 
```

但它不起作用，例如使用以下调试代码

```
 Dim testString As String = "<body>my example <div style=""margin-top:20px""> text to extract </div> <br /> another line.</body>"

    txtOutput.Text = testString.GetTagContent("<div style=""margin-top:20px"">", "</div>") 
```

我只得到“正文>我的示例”字符串，而不是“要提取的文本”

谁能帮我？tnx 提前

* * *

我编写了一个新例程，以下代码有效，但是我会知道是否存在更好的性能代码：

```
 Dim s As New StringBuilder()
    Dim i As Integer = instance_handler.IndexOf(start_tag, 0)
    If i < 0 Then
        Return ""
    Else
        i = i + start_tag.Length
    End If
    Dim j As Integer = instance_handler.IndexOf(end_tag, i)
    If j < 0 Then
        s.Append(instance_handler.Substring(i))
    Else
        s.Append(instance_handler.Substring(i, j - i))
    End If
    Return s.ToString 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:41:33.660

XPath 是完成此任务的一种方式。我相信其他人会建议使用 LINQ。下面是一个使用 XPath 的示例：

```
Dim testString As String = "<body>my example <div style=""margin-top:20px""> text to extract </div> <br /> another line.</body>"
Dim doc As XmlDocument = New XmlDocument()
doc.LoadXml(testString)
MessageBox.Show(doc.SelectSingleNode("/body/div").InnerText) 
```

显然，更复杂的文档可能需要比 simple 更复杂的 xpath `"/body/div"`，但它仍然非常简单。

如果需要获取与路径匹配的多个元素的列表，可以使用`doc.SelectNodes`.

# ruby-on-rails - 从一个控制器操作多次更新模型

> ID：10638451
> 
> 赞同：0
> 
> 时间：2012-05-17T15:12:40.017
> 
> 标签：ruby-on-rails

我正在寻找最佳实践。这是场景：

客户可以通过表单为一个或多个小部件付费。所以我有一个 Payments 模型和一个 Widgets 模型。它们之间没有关联（付款与客户相关联）。处理这个问题的最佳方法是什么？

在付款控制器中，我可以这样做：

```
def create
  @customer = Customer.find(params[:customer_id])
  if @customer.payments.create!(params[:payment])
    how-many-widgets = params[:payment][:number].to_i
    while how-many-widgets > 0
      widget = Widgets.new
      ... update widget ...
      widget.save!
      how-many-widgets = how-many-widgets - 1
    end
  end
  redirect_to @customer
end 
```

这是最好的方法吗？还是有一些更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:35:13.940

如果您正在保存和更改内容，那么您应该在模型而不是控制器中执行此代码是一个不错的选择。如果我要重构你的代码，它看起来有点像这样：

```
def create
  @customer = Customer.find(params[:customer_id])
  if @customer.payments.create!(params[:payment])
    params[:payment][:number].times do
      Widget.create(params[:widget])
    end
  end
  redirect_to @customer
end 
```

如果`Widget.create`不是您要查找的内容，请提出一个自定义方法，该方法将参数输入，转换它们，然后吐出正确的对象。此外，如果小部件应该与客户或付款相关，请不要犹豫将它们关联起来——例如，如果您查看该代码并说：“我还需要将当前用户/客户/付款传递给小部件"这将是一个很好的暗示，小部件应该以某种方式与该模型相关联。

# php - 使用 php 存储 cookie 并在 html 表单值中检索它们

> ID：10638453
> 
> 赞同：0
> 
> 时间：2012-05-17T15:12:48.660
> 
> 标签：php, html, cookies

嗨朋友们，我创建了一个如下的表单并尝试为每个字段设置 cookie，我成功为输入文本框设置 cookie，但我未能为 textarea 字段和下拉列表以及复选框。表格如下......

```
<input name="date" type="text" size="10" value="<?php if(isset($_COOKIE["date"])) echo $_COOKIE["date"];?>" onblur="setCookie(this.name,this.value,60*60*2)" /></td>
          Order Number:
          <input name="order_num" type="text" size="10" value="<?php if(isset($_COOKIE["order_num"])) echo $_COOKIE["order_num"];?>" onblur="setCookie(this.name,this.value,60*60*2)" />
         First Name:
          <td><input name="fname" type="text" value="<?php if(isset($_COOKIE["fname"])) echo $_COOKIE["fname"];?>" onblur="setCookie(this.name,this.value,60*60*2)"/></td>
          Last Name:
          <td><input name="lname" type="text" value="<?php if(isset($_COOKIE["lname"])) echo $_COOKIE["lname"];?>" onblur="setCookie(this.name,this.value,60*60*2)"/>

          Image Submitted:
          <input name="image" type="text" value="<?php if(isset($_COOKIE["image"])) echo $_COOKIE["image"];?>" onblur="setCookie(this.name,this.value,60*60*2)"/>
          General Comments:
         <textarea name="gen_comments" cols="50" rows="6"  onblur="setCookie(this.name,text,60*60*2)" ><?php if(isset($_COOKIE["gen_comments"])) { echo $_COOKIE["gen_comments"];}?></textarea>

          Internal Comments:
          <textarea name="int_comments" cols="50" rows="6" onblur="setCookie(this.name,text,60*60*2)"><?php if(isset($_COOKIE["int_comments"])) { echo $_COOKIE["int_comments"];}?></textarea>
         Quality of the File:
           <select name="quality" onchange="" >
           <option >Select One</option><option name="good" value="<?php if(isset($_COOKIE["good"])) echo $_COOKIE["good"];?>">Good</option><option value="ok">A bit low but we can use it</option><option value="low">Low. We are concerned it might effect the qaulity of the final</option><option value="not good">Not good. We cannot work with it</option><option value="test2">test2</option><option value="test">test</option><option value="lkdjfalkdjlaksjdla dlkajsdaksjdlkajsdlkjaslkdjas alksdjaslkdjlaksjdla">Lisa1</option><option value="bbb">aaa</option>        <!--option value="good">Good</option>
           <option value="ok">A bit low but we can use it</option>
           <option value="low">Low. We are concerned it might effect the qaulity of the final </option>
           <option value="not good">Not good. We can't work with it</option-->
            </select> 
          <input type="button" name="qofoption" id="qofoption" value="Add New Option" 
          onClick="optionWindow('http://www.lightaffection.com/Hema2/addnewoption.php?option=qof','optionwindow','400','200')"/>        </td>
        </tr>
        <tr><div name="qofdiv"></div></tr>
        <tr>
          <td align="right">Image Proportions and Content:</td>
          <td colspan="2" style="padding-right:4px">
           <select name="imageprop" id="imageprop">
           <option>Select One</option><option value="test2">test2</option><option value="not good">Too much details for a Night Light</option><option value="good">Good</option><option value="test">test</option><option value="asdas">asdsa</option><option value="bbb">bbb</option>
          <td><b>How would you like us to proceed?</b></td><td></td></tr>

         <input type="checkbox" name="proceed_opt[]" value="I will upload new Image">
              Insert Option &quot;I will upload new Image&quot;</td></tr>
        <tr><td></td><td colspan="2">
                &nbsp; 
              <input type="checkbox" name="proceed_opt[]" value="I approve this sample for a Night Light">
              Insert Option &quot;<font face="Arial, Helvetica, sans-serif" size="2">I approve this sample for a Night Light</font>&quot; </td></tr><tr><td></td><td colspan="2">
                &nbsp; 
              <input type="checkbox" name="proceed_opt[]" value="Select One">
              Insert Option &quot;<font face="Arial, Helvetica, sans-serif" size="2">Select One</font>&quot; </td></tr>     
         <tr><td></td><td colspan='2'> &nbsp;
         <input type="checkbox" name="proceed_opt[]" value="other">
              Insert Option &quot;Other See comments&quot;</td></tr>

          <td> Ship by date: <input name="shipdate" type="text" /><br />
          <br />
          Update Order Status to: <select name="orderstatus">
            <option>Do not change</option>
            <option>Waiting for designer</option>
            <option>Waiting for customer response</option>
          </select>
          <br />
          <input name="ordermanager" type="checkbox" value="" /> Update Order Manager <br />
          <input name="createhtml" type="checkbox" value="" /> Create an HTML page <br />
          <input name="sendemail" type="checkbox" value="" /> Send Email to Customer <br />      </td>

    </form> 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:19:48.273

关于如何使用 PHP 设置/读取/删除 cookie 的简单示例：

```
<?php

// set a cookie
setcookie("cookiename", "cookievalue", time()+3600);

// read a cookie
if (isset($_COOKIE["cookiename"])) {
  $mycookievalue = $_COOKIE["cookiename"];
}

// delete a cookie
setcookie("cookiename", "", time()-3600);

?> 
```

*对于您的实际情况，只需对您需要存储的每个字段重复。*

**例如，**

```
<?php
foreach($_POST as $key =>$value) {
  setcookie($key, $value, time()+3600);
}
?> 
```

* * *

# 了解更多

**cookie 语法：**

```
setcookie(name, value, expire, path, domain); 
```

**你在哪里可以读到这个：**

[W3C - PHP Cookie](http://www.w3schools.com/php/php_cookies.asp)

[PHP.net Cookie](http://php.net/manual/en/features.cookies.php)

[PHP Cookie 教程](http://www.tizag.com/phpT/phpcookies.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:27:01.580

要回答您的问题，尽管有更好的方法可以做到这一点：

必须在发送标头之前设置 PHP cookie（在给出任何输出之前，因此您无法根据需要设置它们）

您有以下选择：

```
 -set the cookies using javascript
 -Create a file which acts as the forms action, and in that file pull all the $_POST values and set them there. 
```

但我再次重申，有更好的方法可以做到这一点。

# c - 静态分析的“继续”和“中断”

> ID：10638454
> 
> 赞同：2
> 
> 时间：2012-05-17T15:12:51.353
> 
> 标签：c, static-analysis, break, continue

我知道已经有很多关于 break 和 continue 是否应该被认为是有害的讨论（底线或多或少取决于它；在某些情况下，它们提高了清晰度和可读性，但在其他情况下，它们没有）。

假设一个新项目正在开始开发，计划进行夜间构建，包括运行静态分析器。它是否应该成为项目编码指南的一部分，以避免（或强烈反对）使用`continue`and `break`，即使它会牺牲一点可读性并需要过多的缩进？我最感兴趣的是这如何应用于 C 代码。

本质上，使用这些控制运算符是否会使代码的静态分析显着复杂化，可能导致额外的假阴性，否则如果不使用 break 或 continue 会记录潜在错误？

（当然，证明任意程序正确性的完整静态分析是一个无法确定的命题，因此请保留对您所拥有的任何实践经验的回复，而不是理论上的不可能）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:23:01.307

我的直接反应是，您必须跳过这些障碍以避免`break`并且`continue`可能会损害整个代码，并使静态分析（或其他任何事情）变得更加困难。

不过，这将取决于您正在处理的确切类型的代码。举个例子，如果你有一些真正最好作为`switch`语句实现的东西，那么禁止`break`基本上会迫使你使用嵌套`if`/ `else`s，这将使代码更难以正确分析，并且根据情况，将是也很可能对输出代码产生负面影响。

# visual-studio - 配置服务引用对我的项目有何影响？

> ID：10638455
> 
> 赞同：0
> 
> 时间：2012-05-17T15:12:52.023
> 
> 标签：visual-studio, service-reference

我有一个带有服务引用的 C# Visual Studio 控制台应用程序。提供该服务的公司提供两种 API，一种用于测试，一种用于实时。它们应该本质上是相同的服务，但不同服务器的 URL 不同。

当我右键单击服务引用并选择配置服务引用时，我可以输入实时服务的 URL；我的项目可以正确编译。

我是新手，不确定是否应该重新配置服务，或者是否应该删除它并重新添加它？我不知道是否应该手动更改或清理 .config 文件。

所以我想我的问题是——我应该注意这个过程的陷阱或更好的做法吗？

非常感谢任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:43:05.383

我自己使用过服务引用，到目前为止，仅更新服务引用从未遇到任何问题。如果您喜欢/需要更改配置，可以通过编辑生成的 .config 文件

# mysql - 在 WPF 中使用 MySQL 的实体框架 5.0 代码优先

> ID：10638456
> 
> 赞同：5
> 
> 时间：2012-05-17T15:12:52.990
> 
> 标签：mysql, wpf, entity-framework, ef-code-first

本演练适用于 SQL Express： http: [//msdn.microsoft.com/en-us/library/gg197522 (v=VS.103).aspx](http://msdn.microsoft.com/en-us/library/gg197522(v=VS.103).aspx)

我希望它与 MySQL 一起工作。我已经进行了一些研究，但我发现的所有技术都无法为我做到这一点。理想情况下，我想做这样的事情：

```
 <entityFramework>
    <defaultConnectionFactory type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data" />
  </entityFramework> 
```

这不起作用（我安装了 MySQL Connector Net 6.5.4 并引用了 MySql.Data）。我已经尝试从 IDbConnection 工厂派生，如此处所示： [http ://www.vworker.com/RentACoder/misc/BidRequests/ShowBidRequest.asp?lngBidRequestId=1563829](http://www.vworker.com/RentACoder/misc/BidRequests/ShowBidRequest.asp?lngBidRequestId=1563829)

然后使用：

```
 <entityFramework>
<defaultConnectionFactory type="SchoolModel.MySqlConnectionFactory, SchoolModel" /> 
```

但这也不起作用。任何人都可以给我一些关于如何让它工作的指示吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:41:38.017

要在 VS2012 上使用带有代码优先 EF5 的连接器 6.5.4，您需要：

1.  安装 MySql 连接器 6.5.4 msi
2.  以管理员身份打开 VS2012 x86 命令提示符并执行：

    gacutil /i "C:\Program Files (x86)\MySQL\Connector NET 6.5.4\Assemblies\v4.0\mysql.data.dll" gacutil /i "C:\Program Files (x86)\MySQL\Connector NET 6.5.4\Assemblies\v4.0\mysql.data.entity.dll"

3.  将此代码添加到项目的 App.config`<configuration>`部分：

    ```
    <system.data> 
        <DbProviderFactories> 
            <remove invariant="MySql.Data.MySqlClient" />
            <add  
                name="MySQL Data Provider"
                invariant="MySql.Data.MySqlClient"
                description=".Net Framework Data Provider for MySQL"
                type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, 
                Version=6.5.4.0, Culture=neutral, 
                PublicKeyToken=c5687fc88969c44d"
            /> 
        </DbProviderFactories> 
    </system.data> 
    ```

4.  现在添加对 MySql.Data 和 MySql.Data.Entity 的引用到您的解决方案和一些类似这样的代码（我创建 MySqlConnection，然后将其传递给 MyDbContext 的构造函数）

    ```
    public class MyDbContext : DbContext
    {
        public MyDbContext(DbConnection connection) : base(connection, true) { }    ​

        public DbSet<Product> Products { get; set; }
    }

    [Table("sund_jshopping_products")]
    public class Product
    {
        [Key]
        [Column("product_id")]
        public int Id { get; set; }
        [Column("product_ean")]
        public string Ean { get; set; }
        [Column("product_manufacturer_id")]
        public int OperatorId { get; set; }
        [Column("months_status")]
        public string MonthsStatus { get; set; }
        [Column("extra_field_5")]
        public string SideId { get; set; }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:24:30.803

连接器 6.5.4 不支持 EF 5 的代码优先。实际上它不支持代码优先。

您可以尝试使用点网连接器（至少试用版）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:58:14.770

您在设置数据库连接时是否将**数据源设置为 MySQL 。**此外，在直接从代码尝试连接之前，请单击并确保**“测试连接”成功。**

![在此处输入图像描述](../Images/d1eec21d84ea7f23ceb764f493813afb.png)

![在此处输入图像描述](../Images/0960a51dbc41cb2d1c755db1af1b480e.png)

# vb.net - 什么是Java中 List 的 VB.NET 等价物

> ID：10638457
> 
> 赞同：1
> 
> 时间：2012-05-17T15:12:59.597
> 
> 标签：vb.net, generics

我在这里严格寻找语言转换：

```
List<?> 
```

我已经有一个解决方法我只是很惊讶我找不到与带有通配符的“原始”通用列表的变量类型的 vb.net 等效项。这里的 Java 机制使您能够引用列表，而不管 T 是什么。Java 甚至可以让您走得更远并执行以下操作：

```
List<? extends Number>
List<? super Double> 
```

我试过了：

```
List(Of ) 
```

那没有用。这似乎只适用于 GetType 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:15:07.740

这些不是 C# 泛型声明，它们是 Java 声明，因此在 VB.NET 中没有等价物。

正如 Konrad 在上面的评论中所说，Java 和 C# 具有完全不同的通用实现。C# 通过扩展工作，Java 通过擦除工作。因此在 C# 中没有可用的“原始”泛型类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T15:14:50.650

你在谈论

```
List(of T)
List(of String) 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:17:22.930

请参阅MSDN 上[的 Visual Basic (Visual Basic) 中的泛型类型。](http://msdn.microsoft.com/en-US/library/w256ka79%28v=vs.100%29.aspx)您正在寻找的东西称为类型约束。您必须将其与执行所需限制的方法或类的声明结合起来。

要接受任何类型，您可以执行以下操作：

```
Public Sub testSub(Of t)(arg As List(Of t))
    'Do something.
End Sub 
```

或者要将其限制为例如值类型，您可以执行以下操作：

```
Public Sub testSub(Of t As Structure)(arg As List(Of t))
    'Do something.
End Sub 
```

您正在寻找的是.Net Framework 中不允许的纯通用属性。下面的代码将无法编译。

```
Public Property testSub(Of t) As List(Of t)
    Get
    End Get
    Set
    End Set
End Property 
```

您可以获得的最接近的是：

```
Public Class testClass(Of T)
    Public Property testSub As List(Of t)
        Get
        End Get
        Set
        End Set
    End Property 
End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T13:15:36.543

好的，我的目标是能够在 MyBaseClass 上拥有一个指向它的集合的 Collection 属性，该集合是 MyCollection(Of T) 类型，其中 T 是 MyBaseClass 的一种类型。基类不知道什么会继承它。因此，它需要分配 MyCollection 的任何实现并获得早期绑定和智能感知。

我也需要吃蛋糕（早期装订和后期装订）。

这是我在 MyBaseClass 中所做的：

```
 Public Event pCollectionChanged(Value As IList)
  Private _pCollection As IList
  <XmlIgnore()> _
  <System.ComponentModel.Browsable(False)> _
  Public Property pCollection As IList
    Get
      Return _pCollection
    End Get
    Set(Value As IList)
      If _pCollection Is Value Then Exit Property
      _pCollection = Value
      RaiseEvent pCollectionChanged(Value)
    End Set
  End Property

  Public Function Collection(Of t As MyBaseClass)() As MyCollection(Of t)
    Return pCollection
  End Function 
```

现在我可以将 MyCollection(Of any) 分配给 pCollection，我可以通过调用代码来做到这一点：

```
Dim MyObject As New MyBaseClassSubType    
MyObject.Collection(Of MyBaseClassSubType).MyNeatoCollectionMethod 
```

而在我刚刚拥有 Collection As IList 之前，我无法访问 MyNeatoCollectionMethod

多田！感谢所有回答的人。

# javascript - 最小的 JavaScript 框架

> ID：10638470
> 
> 赞同：0
> 
> 时间：2012-05-17T15:13:52.260
> 
> 标签：javascript, frameworks

像 jQuery 或原型这样的 javascript 框架是最小的并且具有 DOM 操作和动画？我正在寻找可用于构建自定义“网络小部件”的东西，而不会在网站大小上增加大量占用空间。我绝对需要通过 css 选择器进行 DOM 查询。有没有这样的东西缩小了 5kb 左右？

**编辑**

应该说我需要 CSS3 选择器跨平台，包括 IE7+

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:17:32.457

由于您没有指定浏览器版本或任何内容，答案是您不需要任何框架。当前所有的框架都是在标准 JS 之上编写的，因此您可以直接使用该功能，并且 querySelector(All) 可以为您处理选择器查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:28:36.383

您最好的选择可能是使用[Sizzle](http://sizzlejs.com/)，这是 jQuery 在内部用作其选择器引擎的。它支持几乎所有 CSS3 选择器，网站声明：

> 只有 4KB 压缩和压缩

该`Sizzle`函数返回一个元素数组。例如：

```
var elems = Sizzle(".myElems"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:16:05.267

没有链接我就可以回答这个问题了...

阅读**Wikipedia**[*中 JavaScript 框架*](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)的比较

 **第二行是每个框架的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:18:19.913

以 zepto 为例：

[http://zeptojs.com/](http://zeptojs.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T15:28:59.363

也许[http://xuijs.com/](http://xuijs.com/)可以帮助你或[http://quojs.tapquo.com/](http://quojs.tapquo.com/)**

# asp.net - 来自文件的图像，服务器 MapPath

> ID：10638475
> 
> 赞同：2
> 
> 时间：2012-05-17T15:14:25.673
> 
> 标签：asp.net

为什么会这样：

```
System.Drawing.Image imageBmp =
System.Drawing.Image.FromFile(Server.MapPath("~/Images/Image.jpg"));
imageBmp.Save(Server.MapPath("~/Images2/Image.jpg"),  
System.Drawing.Imaging.ImageFormat.Bmp);
Bitmap bmp = new Bitmap(imageBmp); 
```

这不是吗？（文件名正确）

```
var fileName = Request.QueryString["name"];
System.Drawing.Image imageBmp = 
System.Drawing.Image.FromFile(Server.MapPath("~/Images/" + fileName));
imageBmp.Save(Server.MapPath("~/Images/" + fileName),
System.Drawing.Imaging.ImageFormat.Bmp);
Bitmap bmp = new Bitmap(imageBmp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:18:12.633

此行将尝试将文件保存到自身`imageBmp.Save(Server.MapPath("~/Images/" + fileName), System.Drawing.Imaging.ImageFormat.Bmp);`

它应该是`imageBmp.Save(Server.MapPath("~/Images2/" + fileName), System.Drawing.Imaging.ImageFormat.Bmp);`

# firefox - 字体真棒无法在 Firefox 上正确显示

> ID：10638476
> 
> 赞同：12
> 
> 时间：2012-05-17T15:14:27.503
> 
> 标签：firefox, font-awesome

我正在尝试在安装在客户网站上的小部件中使用字体真棒图标。字体真棒图标在 Safari 和 Chrome 中正确显示，但在 Firefox 中没有。但是，在我们的网站上预览它时，它仍然在 Firefox 中正确显示。这是否与 Firefox 如何跨域显示第三方字体有关？

任何想法将不胜感激。谢谢。

注意：这是使用 Firefox V9 及更高版本测试的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T06:42:38.763

如果字体所在的服务器发送正确的 CORS 标头，Firefox 仅允许跨域链接字体。它这样做是因为规范非常清楚地说明要这样做，在[http://dev.w3.org/csswg/css3-fonts/#default-same-origin-restriction](http://dev.w3.org/csswg/css3-fonts/#default-same-origin-restriction)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:24:28.440

我注意到一个奇怪的行为，可能与 Firefox 安全策略有关。我在这样的项目配置中遇到了同样的问题：

*   **/site/html** <--- 所有 .html 文件所在的位置
*   **/site/resources/...** <--- 所有的**css**、**font**、 img 、 js 东西都在哪里

现在，我将 font-awesome.min.css 包含在位于 /site/html 目录下的 html 文件中，并尝试了您的问题。但是当你下载 Font Awesome 包时，它附带了在 firefox 中实际工作的 html 演示文件。有什么诀窍？！

他们的项目结构有嵌套在“html”文件夹内的“resources”文件夹（他们称之为“assets”）。这似乎平息了firefox的安全策略。最后，我的回答是：得到如下配置

*   **/site/html** <--- 所有 .html 文件所在的位置
*   **/site/html/resources/...** <--- 所有的**css**、**font**、 img 、 js 东西都在哪里

它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T15:30:42.060

如果您在 S3 上托管字体，则必须在存储桶上启用 CORS。有关详细信息，请参阅[我](https://stackoverflow.com/a/18130030/302246)对其他问题的回答

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-18T22:16:03.637

MaxCDN 发现并[修复了这个问题](https://github.com/MaxCDN/bootstrap-cdn/issues/27)。他们设置了正确的 CORS 标头并将此行嵌入到您的网站应该可以工作：

```
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-25T10:42:53.377

Firefox blocks Cross-Origin Request.

Firefox disallows reading the remote resource due to Same Origin Policy for below CDN:

[https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css](https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css)

I dug little to fix CORS issue instead I replaced above CDN with below one and icons rendering fine:

**`<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css" media="all" rel="stylesheet" type="text/css">`**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-26T14:13:43.910

**使用直接链接来包含 css 文件，还要确保在调试控制台中不会出现跨域错误。**

### 例如，当您从以下位置访问您的网站时：

`http://www.domain.tld`确保从同一路径链接 css 文件，包括`www`

像这样：`http://www.domain.tld/css/style.css`

并且当您从`http://`> 链接 css 文件也从同一路径访问时`www.`

```
http://domain.tld/css/style.css 
```

我前段时间遇到了这个问题，并通过修改 css 路径以从“相同”网址/路径请求 css 文件来修复它。

**示例：** 您可以在此路径中查看字体真棒图标

[http://webake.ro/](http://webake.ro/)

**但不是在这个：**

[http://www.webake.ro/](http://www.webake.ro/)

因为字体是从[http://domain.tld](http://domain.tld)路径中链接的，而没有添加 www。在里面

`link href=`

来自“ [http://webake.ro](http://webake.ro) ”的字体已被跨域资源共享策略阻止加载：请求的资源上不存在“Access-Control-Allow-Origin”标头。因此，不允许访问源“ [http://www.webake.ro ”。](http://www.webake.ro)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-14T22:15:53.440

将您的字体转换为 base64 并通过 CSS 包含。通过这种方式，您可以通过浏览器代码推送字体，并且字体文件不会以通常需要跨域权限的方式下载。[这也是](https://en.wikipedia.org/wiki/Security_Technical_Implementation_Guide)禁用可下载字体的 DISA STIG 问题，但可能不是您的问题。 [该解决方案可以在这篇文章中看到，](https://stackoverflow.com/a/44529306/7470581)也可以在这里复制：

您只需要*Base64*字体并将其包含在 CSS 文件中。包含对新 FontAwesomeB64.css 的调用后，请确保删除对可下载 WOFF 文件的调用

使用[https://www.base64encode.org/](https://www.base64encode.org/)对 WOFF Font-Awesome 字体文件进行编码。

编辑生成的文件并添加这些行。当您到达 src:url 行时，请确保将其直接运行到您收到的 base64 信息中（不要使用我在此处显示的大于和小于符号。）在该 base64 信息的末尾添加单引号、括号、分号和花括号结束：

```
@font-face { 
font-weight: 400;
font-style: normal;
font-family: 'FontAwesome';
src:url(data:application/x-font-woff;base64,<insert base64 code here>);} 
```

您现在有一个 Font-Awesome 字体的 base64 CSS 文件，它绕过了浏览器中的所有字体下载拒绝设置。

我发现这适用于所有字体，下载时有点重，但值得保证功能。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-06-04T01:45:48.467

```
@font-face{font-family:'FontAwesome-webfont'; 
```

相信我，这确实有效。

# sql - Oracle 特定选择

> ID：10638483
> 
> 赞同：0
> 
> 时间：2012-05-17T15:14:42.160
> 
> 标签：sql, oracle

我有一张如下表

```
OWNERID 
PET_QUANTITY 
PET_TYPE 
```

PET_TYPE 是 DOG、CAT 或 BIRD

每个所有者/宠物有一条记录，因此如果有一只狗和一只鸟，则将有两条记录，并且 pet_quantity 在两条记录中均为 2。

我想要该人有两只宠物并且宠物是狗和猫的所有 owner_ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:23:14.047

首先，数据模型相当不幸，因为`PET_QUANTITY`特定行的值取决于其他行中的数据。这违反了基本的规范化规则。而这反过来又会产生一种情况，您将不可避免地不同步，因此您必须确定规则是否`PET_QUANTITY`规则或表中的行数是否规则。正确规范化的数据模型会为您提供更好的服务。

假设`PET_QUANTITY`在存在差异时进行规则，一种选择是使用`INTERSECT`

```
SELECT owner_id
  FROM your_table
 WHERE pet_quantity = 2
   AND pet_type = 'CAT'
INTERSECT
SELECT owner_id
  FROM your_table
 WHERE pet_quantity = 2
   AND pet_type = 'DOG' 
```

另一个是做类似的事情

```
SELECT owner_id, COUNT(DISTINCT pet_type)
  FROM your_table
 WHERE pet_quantity = 2
   AND pet_type IN ('DOG', 'CAT')
 GROUP BY owner_id
HAVING COUNT(DISTINCT pet_type) = 2 
```

# database - DB2 提交然后获取诊断

> ID：10638488
> 
> 赞同：0
> 
> 时间：2012-05-17T15:15:04.400
> 
> 标签：database, db2, commit

假设您有一个更新 5 行的更新语句。所以 Get Diagnostics ROW_COUNT = 5。如果您提交然后尝试 Get Diagnostics ROW_COUNT 现在是否 = 0？

# android - 如何通过意图 ACTION_IMAGE_CAPTURE 从其他应用调用的自定义相机应用返回图像

> ID：10638491
> 
> 赞同：0
> 
> 时间：2012-05-17T15:15:05.957
> 
> 标签：android

我设法构建了一个简单但有效的自定义相机应用程序。到目前为止，我可以直接启动它并让它拍照。我还添加了适当的意图过滤器，将其作为可用应用程序发布，以回复另一个应用程序的意图调用，其中包含如下代码行：`Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);`

问题是：**如何编码我的相机应用程序以将图像发送回传递 URI 进行保存的外部应用程序？**

目前我有一个方法可以检测相机是直接启动还是调用来回复意图过滤器：这个方法是`isImageCaptureIntent`（工作）。

我想我必须在`onPictureTaken`方法中写一些东西，`PictureCallback`但是一旦我尝试写入 OutputStrems，所有尝试都会在 NullPointerExceptions 中停止。

请注意，`mSaveUri`这行代码中已经填充了调用应用程序提供的正确 URI：`mSaveUri = (Uri) myExtras.getParcelable( MediaStore.EXTRA_OUTPUT );`

这是方法：

```
 PictureCallback myPictureCallback_JPG = new PictureCallback() {

    @Override
    public void onPictureTaken(final byte[] arg0, Camera arg1) {);

        if (isImageCaptureIntent()) {

            if (mSaveUri != null) {
                OutputStream outputStream = null;
                try {
                    outputStream = getContentResolver()
             .openOutputStream(mSaveUri);  <== HERE I GET NullPointerException
                    outputStream.write(arg0);
                    outputStream.close();
                    setResult(RESULT_OK);
                    finish();
                } catch (IOException ex) {
                    // ignore exception
                } finally {
                }
            } 
        }
        camera.startPreview();
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:45:01.677

这个问题也有类似的问题。一篇帖子说这是 HTC 设备上的问题。这里：

*   [getContentResolver().openOutputStream(uri) 提供者不支持文件](https://stackoverflow.com/questions/3926553/getcontentresolver-openoutputstreamuri-no-files-supported-by-provider)
*   [Android相机应用程序中的空指针异常](https://stackoverflow.com/questions/10300928/null-pointer-exception-in-android-camera-application)
*   [保存图片拍摄的图片路径时出现NullPointerException](https://stackoverflow.com/questions/9767683/nullpointerexception-when-saving-the-path-of-an-image-taken-by-a-picture)

无论如何，我建议发送请求以捕获图像，并接收到它的路径，并使用 MODE_WORLD_READABLE 作为文件，或使用外部存储路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T06:34:42.993

```
 mBitmap = BitmapFactory.decodeByteArray(data, 0, data.length, opt);

        Matrix mtrxFreeze = new Matrix();
        mtrxFreeze.postRotate(90);

        mBitmap = Bitmap.createBitmap(mBitmap, 0, 0, mBitmap.getWidth(),
                mBitmap.getHeight(), mtrxFreeze, true); 
```

# magento - Magento 运送 USPS 在生产模式后无法正常工作

> ID：10638495
> 
> 赞同：0
> 
> 时间：2012-05-17T15:15:17.563
> 
> 标签：magento, shipping, usps

我已经建立了一个 magento 商店，并通过支付网关提供商 USAEPAY 将 USPS 运输集成到其中。现在整合后我尝试从usps申请运输api。在我从 USPS 获得运输 api 后，我得出一个结论，即测试 api 不适用于 magento。所以我要求一个生产API。他们为我提供了生产 api。

现在我的 API 为 [http://production.shippingapis.com/ShippingAPI.dll](http://production.shippingapis.com/ShippingAPI.dll) https://production.shippingapis.com/ShippingAPI.dll

不，我没有在 SSL 上运行。我得到的只是一个错误，因为目前无法使用运输方式。- 一次又一次地显示默认错误代码。

我将表率固定为

美国 | * | * | 0.010 | 1

我检查了数据库的条目，发现一个条目为

1 1 美国 0 * 包裹重量 0.0100 1.0000 0.0000

我无法弄清楚 wts 丢失了。请帮忙。我必须让这个运输模块工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:11:18.163

尝试在使用**有效邮政编码信息**以用户或访客用户身份**登录后**检查它，并保持 USPS 运输方式设置与 Magento 安装后相同。

 **希望它会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:03:46.393

已经完成了，有几件事要检查..

1.  邮编输入商店。
2.  输入邮编以便发货。
3.  是否在生产模式下运送 API。

最好的方法是启用调试模式，然后检查在 VAR 文件夹中创建的日志转储。**

# objective-c - RestKit 实体映射和父实体映射

> ID：10638498
> 
> 赞同：6
> 
> 时间：2012-05-17T15:15:44.173
> 
> 标签：objective-c, cocoa-touch, core-data, restkit

我有一个 Person 类（名字和姓氏的属性）和另一个实体 Worker（工资和头衔的属性）。在我的核心数据模型中，Person 实体被设置为 Worker 实体的父实体。在我的 AppDelegate 中，我设置了我的映射...

```
RKManagedObjectMapping* personMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Person" inManagedObjectStore:objectManager.objectStore];
[personMapping mapKeyPath:@"firstName" toAttribute:@"firstName"];
[personMapping mapKeyPath:@"lastName" toAttribute:@"lastName"];    
[objectManager.mappingProvider addObjectMapping:personMapping];

RKManagedObjectMapping* workerMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Worker" inManagedObjectStore:objectManager.objectStore];
[workerMapping mapKeyPath:@"wage" toAttribute:@"wage"];
[workerMapping mapKeyPath:@"title" toAttribute:@"title"];
[objectManager.mappingProvider setMapping:workerMapping forKeyPath:@"workers"];    

RKManagedObjectSeeder* seeder = [RKManagedObjectSeeder objectSeederWithObjectManager:objectManager];
[seeder seedObjectsFromFiles:@"people.json", nil]; 
```

...在people.json中...

```
{
    "workers":
    [
        {
            "firstName":"Rob",
            "lastName":"Johnson"
        },
        {
            "firstName":"John",
            "lastName":"Roberts"
        }
    ]
} 
```

...现在当我运行它时，没有任何对象被播种。如何表达 Worker 类与 Person 具有相同映射的事实？我可以将它们添加到该映射中，但感觉不对。

此外，在使用...注册人员映射时

```
[objectManager.mappingProvider addObjectMapping:personMapping]; 
```

...我不使用 RKManagedObjectMapping 方法 setMapping:forKeyPath: 因为我们永远不会在这个应用程序中只体验一个 Person ，所以我们永远不会映射它。但我仍然希望它注册。对于 Person 的子实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:00:51.757

您没有告诉对象映射器对`firstName`and`lastName`字段做任何事情。您只为`wage`和定义了映射`title`。为了让您的播种工作，您需要为 JSON 的结构以及您的 Web 服务定义映射，并添加如下内容：

```
[workerMapping mapKeyPath:@"workers.firstName" toAttribute:@"firstName"];
[workerMapping mapKeyPath:@"workers.lastName" toAttribute:@"lastName"]; 
```

然后，当您运行播种时，您的工作映射器将知道如何将这些值从您的值映射`people.json`到您的新`Worker`对象。

# drupal - 如此多的教程指南，但是如何过滤 Drupal 7 视图以显示具有分类术语的节点？

> ID：10638499
> 
> 赞同：0
> 
> 时间：2012-05-17T15:15:47.817
> 
> 标签：drupal

尽管该主题有很多帖子退出，但似乎没有人指导用户如何使用此功能。我需要过滤一个视图块，以便它显示具有特定分类术语的节点。我有一个名为 Sections 的分类词汇，其中包含 Analysis、Sports 等术语，我的文章内容类型有一个用术语标记它们的文件。换句话说，文章节点用 Sections vocab 中的术语标记。我只需要一种显示块的方法，例如带有 Sports 标记的节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:08:34.663

如果您遵循任何 D6 教程，主要的变化是分类术语现在被标记为一个字段。

因此，创建 View on Node 表，并根据需要添加字段。然后，将过滤器添加到您用于在“部分”词汇表中标记术语的字段名称中。

您将获得一个多选列表以选择应过滤的术语。

# javascript - 删除第一组字段上的删除按钮

> ID：10638500
> 
> 赞同：6
> 
> 时间：2012-05-17T15:16:03.487
> 
> 标签：javascript, jquery, html, css

[http://jsfiddle.net/NzbRQ/2/](http://jsfiddle.net/NzbRQ/2/)

我允许用户添加多行字段，但我不想在第一行字段上包含删除链接，因此他们无法删除所有字段。

另外，如何将其限制为仅 3 行字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:26:23.610

试试这个小提琴：[小提琴](http://jsfiddle.net/NzbRQ/7/)

对于在第一行隐藏删除的第一部分，我在页面加载时调用了以下内容：

```
$(".removeoutcome").hide(); 
```

然后为了确保他们不能添加超过 3 个或删除最后一个，我在您的`click`方法中添加了长度检查，请参阅：

```
$('.addoutcome').live('click', function() {
    if ($(".outcomegroup").length < 3) {
        $('#template').clone().removeAttr('id').insertAfter($(this).closest('.outcomegroup')).find('.minus').show();
        renumber();
    }
});

$('.removeoutcome').live('click', function() {
    if ($(".outcomegroup").length > 1) {
        $(this).closest('.outcomegroup').remove();
        renumber()
    }
}); 
```

另外，附带说明一下，`live`现在已弃用，因此如果您使用的是 jQuery 1.7，请将这些方法更改为，[`on`](http://api.jquery.com/on/)或者如果您是 1.7 之前的版本，请使用[`delegate`](http://api.jquery.com/delegate/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T15:22:18.747

您可以使用以下代码隐藏第一个元素的 del 并将其限制为仅添加 3 个集合

```
var count = 3;
$('.minus').first().hide();
$('.addoutcome').live('click', function() {
 count--;
   if(count < 0 )return;  
    $('#template').clone().removeAttr('id').insertAfter($(this).closest('.outcomegroup')).find('.minus').show();

}); 
```

这是工作小提琴[http://jsfiddle.net/joycse06/uW9NQ/](http://jsfiddle.net/joycse06/uW9NQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:21:45.237

更新：http: [//jsfiddle.net/NzbRQ/5/](http://jsfiddle.net/NzbRQ/5/)

首先，放弃`.live`。我添加了`section`以提供比 更具体的选择器`body`，但您可能可以在原始 DOM 中使用更好的选择器。

只是不要用一些简单的逻辑删除最后一行。您显示未来“del”链接的逻辑实际上已经存在！你甚至根本不需要最后一行删除逻辑，因为不显示“del”就足够了，但我只是彻底。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:38:08.397

我不知道为什么有人没有密切关注这一行：

```
.find('.minus').show(); 
```

他肯定在哪里隐藏`del`元素。简而言之，您唯一需要做的就是添加正确的 CSS 规则：

```
.minus { display: none; } 
```

就是这样，第一个元素不会显示`del`链接，其他元素会。

简单地限制为三个元素。

```
$("[parent element]").on('click', '.addoutcome', function() {
  if($('.addoutcome').length > 2) return;    
  ...
}); 
```

需要一个更好的选择器`[parent selector]`，并且完全取决于您的布局。基本上，它是包装所有这些元素的元素，它们的父元素。

# django - Django：Facebook 评论集成

> ID：10638503
> 
> 赞同：6
> 
> 时间：2012-05-17T15:16:09.480
> 
> 标签：django, facebook

我想在 Django 网站上集成 Facebook 评论，我应该使用什么将 Facebook 评论集成到页面中？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T15:25:09.740

它可以通过javascript完成。只需添加 Facebook SDK 并在模板底部添加评论。只要确保有某种 slug 来唯一标识页面

```
<body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
  FB.init({
    appId      : 'YOUR_APP_ID', // App ID
    channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });
};

(function(d){
  var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  ref.parentNode.insertBefore(js, ref);
}(document));
</script>

...

<div
   class="fb-comments" 
   data-href="{{ my_object.slug }}" 
   data-num-posts="2" 
   data-width="470"></div> 
```

[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# haskell - 转移/减少快乐中的冲突

> ID：10638508
> 
> 赞同：2
> 
> 时间：2012-05-17T15:16:21.630
> 
> 标签：haskell, shift-reduce-conflict, happy

如何制定正确的规则来解析 if-then[-else] 案例？这是一些语法：

```
{
 module TestGram (tparse) where
}

%tokentype    { String  }
%token one    { "1"     } 
       if     { "if"    }
       then   { "then"  }
       else   { "else"  }

%name tparse  

%%

statement : if one then statement else statement {"if 1 then ("++$4++") else ("++$6++")"}
          | if one then statement                {"if 1 then ("++$4++")"}
          | one                                  {"1"}

{
 happyError = error "parse error"
} 
```

此语法正确解析以下表达式：

```
> tparse ["if","1","then","if","1","then","1","else","1"]
"if 1 then (if 1 then (1) else (1))" 
```

但是编译会引发有关移位/减少冲突的警告。快乐的文档包含此类冲突的示例： [http ://www.haskell.org/happy/doc/html/sec-conflict-tips.html](http://www.haskell.org/happy/doc/html/sec-conflict-tips.html)

显示了两种解决方案，第一种是更改递归类型（在这种情况下不清楚如何做）。第二个是不改变任何东西。这个选项对我来说没问题，但我需要咨询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T11:59:18.210

请注意，*可以*使用 LALR(1) 中的语法解决此问题，而不会发生 S/R 冲突：

```
stmt: open
    | closed

open: if one then stmt             {"if 1 then ("++$4++")"}
    | if one then closed else open {"if 1 then ("++$4++") else ("++$6++")"}

closed: one                            {"1"}
      | if one then closed else closed {"if 1 then ("++$4++") else ("++$6++")"} 
```

这个想法来自这个关于[解决悬空 else/if-else ambiguity 的](http://www.parsifalsoft.com/ifelse.html)页面。

基本概念是我们将语句分类为“开放”或“封闭”：开放语句是那些至少有一个*if*不与后面的*else*配对的语句；关闭的是那些根本没有*if*或确实有它们的那些，但它们都与*else*配对。

解析`if one then if one then one else one`因此解析：

*   `. if`—**班次**
*   `if . one`—**班次**
*   `if one . then`—**班次**
*   `if one then . if`—**班次**
*   `if one then if . one`—**班次**
*   `if one then if one . then`—**班次**
*   `if one then if one then . one`—**班次**
*   `if one then if one then (one) . else`—按规则 1**减少**`closed`
*   `if one then if one then closed . else`—**班次**
*   `if one then if one then closed else . one`—**班次**
*   `if one then if one then closed else (one) .`—按规则 1**减少**`closed`
*   `if one then (if one then closed else closed) .`—按规则 2**减少**`closed`
*   `if one then (closed) .`—按规则 2**减少**`stmt`
*   `(if one then stmt) .`—按规则 1**减少**`open`
*   `(open) .`—按规则 1**减少**`stmt`
*   `stmt .`- 停止

（当减少发生时，我已经说明了发生了哪个减少规则，并在被减少的标记周围加上了括号。）

我们可以看到解析器在 LALR(1) 中没有歧义（或者更确切地说，Happy or`bison`会告诉我们;-)），并且遵循规则会产生正确的解释，内部*if与**else*一起被归约。

# android - 为什么我运行时eclipse中的.apk文件一直消失

> ID：10638509
> 
> 赞同：0
> 
> 时间：2012-05-17T15:16:26.107
> 
> 标签：android, eclipse

好的，所以当我尝试在 Eclipse 中运行 android 应用程序时，.apk 文件从文件列表中消失并导致错误。我已经在互联网上广泛搜索了可能遇到此问题但没有找到任何东西的其他人。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:35:03.033

好吧，如果代码/资源（或项目中的任何其他内容）发生了变化，则需要重新编译，因此首先需要删除旧的 apk 并创建一个新的。

另外，请检查您是否拥有最新版本的 adt、sdk 和 eclipse。

# google-maps - 如何更改 Google Maps 中 KML 和 Tile Overlays 的分层？

> ID：10638510
> 
> 赞同：2
> 
> 时间：2012-05-17T15:16:26.793
> 
> 标签：google-maps, google-maps-api-3, overlay, kml, layer

我正在开发一个项目，在该项目中，我利用瓷砖覆盖*（视觉）*来显示空间、建筑物名称、可访问性和停车位以及 KML 多边形*（功能）*的渲染，以允许用户单击各种建筑物或兴趣点以提供更多信息。我当前的问题在于这些不同元素的组织。

目前，KML 多边形出现在所有图块覆盖层之上，包括建筑物名称和停车场，我希望它们位于 KML 多边形之上，否则它们会被多边形部分遮挡。简而言之，这是当前的分层：

*   KML 多边形
*   建筑物名称*（透明）*
*   可访问性*（透明）*
*   停车场*（透明）*
*   空间渲染*（不透明）*
*   谷歌地图

理想情况下，我希望 KML 多边形出现在这些图块叠加层中，即在空间渲染的正上方。因此，我希望获得这种分层：

*   建筑物名称*（透明）*
*   可访问性*（透明）*
*   停车场*（透明）*
*   KML 多边形
*   空间渲染*（不透明）*
*   谷歌地图

无论如何要重新排列 KML 的瓷砖覆盖层来实现这一点？

瓷砖叠加：

```
map.overlayMapTypes.insertAt(0, renderMapType);
map.overlayMapTypes.insertAt(1, parkingMapType);
map.overlayMapTypes.insertAt(2, accessMapType);
map.overlayMapTypes.insertAt(3, nameMapType); 
```

**编辑：**

请允许我更清楚地解释地图。

当 Google 地图在“地图”中时，会显示渲染并且大多数 KML 多边形是不可见的，渲染中未显示的多边形仍然可见，以便用户仍然知道它们的存在。当 Google 地图处于“卫星”模式时，不会显示渲染，所有 KML 多边形都是可见的，并将它们各自的元素叠加在卫星图像上，使用户更容易看到它们。

在任何一种情况下，都可以使用可访问性、停车和名称叠加层，并且由于总是至少有一些 KML 多边形必须是可见的，因此我已经求助于寻找一种重新排序图层的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:30:50.437

要实际更改图层顺序，您需要使用自定义图块叠加并将其放置在正确的窗格中。这是我编写的免费使用的实现。它现在创建的大部分功能都存在于地图 API 中。

[http://search.missouristate.edu/map/mobile/examples/tileoverlay.htm](http://search.missouristate.edu/map/mobile/examples/tileoverlay.htm)

您可能需要调整在哪个窗格中绘制叠加层。这是适用的源代码行：

```
this.getPanes().mapPane.appendChild(this.settings.div_); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:26:45.723

您无法轻松更改图层顺序，但您可以在 KML 中使用透明多边形来获得相同的效果。

# .net - 在公共 .net 应用程序中使用执行 SQL 功能是否安全？

> ID：10638511
> 
> 赞同：2
> 
> 时间：2012-05-17T15:16:32.497
> 
> 标签：.net, sql, database, linq, c#-4.0

我正在计划一个将在 C# 4.0 中构建的程序。我正在考虑使用 LINQ to SQL，但这是我的问题。因为这个应用程序是公开的，所以任何人都可以在大约 5 分钟的时间内对其进行去混淆处理并在 .net reflector 中打开它。然后他们可以轻松地进行更改以转储我的表或插入/删除/更新数据。我知道这一点，因为凭借我使用这些程序的基本逆向工程技能，我什至可以做到。

有没有一种方法可以在.net 中执行安全可靠的数据库事务（或至少更安全）。现在我知道你永远不可能 100% 安全，你能做的只有这么多。这是一个非常开放的话题，但我只是在寻找关于你为确保这种类型的安全所做的或知道的人所做的事情的建议事物。

我只是希望它足够安全，以至于有人需要真正尝试造成伤害，而不是仅仅将它开放给全世界看。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:24:12.033

如果您正在寻找一种方法使您的代码不可读/无法使用 Reflector 进行检查，那么没有万无一失的方法。您可以使用代码混淆，但它也可以被破坏。它只会让它变得更难一些。（更多[在这里](https://www.inetsolution.com/turnleft/post/NET-Obfuscation-A-Waste-of-Time.aspx)。）

但是，有一些方法可以构建一个不允许用户恶意影响您的数据库的安全 .NET 应用程序。几乎每个 .NET 应用程序都以某种方式使用数据库。

你的问题有点笼统。为了有效地保护您的数据库和应用程序，您需要知道危险，知道如何配置您的 SQL Server，知道如何进行防御性编码。你问的很好，但答案不是一个快速而简单的答案。真正的答案是“开始研究和学习”。

听起来您在谈论的是 WinForms 应用程序，而不是 .NET，但您要解决的特定漏洞 - SQL 注入（或者在这种情况下，可能是 SQL 篡改，因为您担心有人反编译应用程序） - 是两者共有。就保护数据库而言，最大的区别在于如何加密 .config 文件。它在 WinForms 中略有不同。 [这是一篇文章，展示了如何做到这一点](http://www.codeproject.com/Articles/18209/Encrypting-the-app-config-File-for-Windows-Forms-A)。

防御性编码是一个因素。[本文](http://msdn.microsoft.com/en-us/library/ff648339.aspx)中的课程适用于WinForms 世界，甚至在 .NET 之外，即使它是面向 ASP.NET 的。

在您的情况下，您需要关注的**具体**做法是最小特权的做法。从我链接到的文章中：

> **使用最低权限的数据库帐户**
> 
> 您的应用程序应使用最低权限帐户连接到数据库。如果您使用 Windows 身份验证进行连接，则从操作系统的角度来看，Windows 帐户的权限应该是最低的，并且应该具有有限的权限和访问 Windows 资源的能力。此外，无论您使用Windows身份验证还是SQL身份验证，相应的SQL Server登录都应该受到数据库中的权限的限制。
> 
> 考虑在 Microsoft Windows Server 2003 上运行的 ASP.NET 应用程序的示例，该应用程序访问同一域中不同服务器上的数据库。默认情况下，ASP.NET 应用程序在网络服务帐户下运行的应用程序池中运行。此帐户是最低特权帐户。

因此，您需要以最小权限的原则来设计数据库，这样即使有人反编译了您的应用程序，他们也不会做任何恶意的事情。

创建一个特定的用户（或多个用户）并只为用户提供他们需要的访问权限。需要从表 X 中读取，但不写入？没问题。只授予他们对表的 SELECT 权限。不要授予更改、编辑、插入或查看权限。简而言之，提前计划，*知道*他们需要什么权限，并相应地设计数据库。

* * *

或者（这不是推荐的方法）从没有权限的用户开始并开发应用程序，并在您进行时授予权限。这应该在测试/开发数据库而不是生产数据库上完成，如果您遵循良好的安全实践，则应该记录在案，但这是另一个问题。这种方法会奏效，只是它不是最自律的。

对于 ServerFault.com 来说，如何做到这一点更多的是一个问题，但[如果您使用的是 SQL Server](http://msdn.microsoft.com/en-us/library/bb283235%28SQL.90%29.aspx)，MSDN 会提供大量指导，并且其他数据库系统也同样有充分的文档记录。

* * *

其他选项包括不提供对数据库的直接访问。使用[Web 服务](http://msdn.microsoft.com/en-us/library/t745kdsh.aspx)或[WCF](http://msdn.microsoft.com/en-us/library/ms731082.aspx)在您的服务器上公开服务。客户端只调用暴露的函数，对底层数据库一无所知，因此不存在直接访问的风险。我们之所以选择此选项，是因为它增强了安全性，并且使我们不必在数据库发生更改时重新编译和重新部署客户端代码。假设我们想从 SQL Server 切换到大型机的 DB@ 数据库（反之亦然），我们只需更改 Web 服务中的代码，而不是数百个客户端中的代码。

但是，即使使用这种方法，您仍然需要将服务设计为安全的，因此仍然需要学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:22:13.140

即使您生成的 .exe 对 Reflector 和类似工具可见，但这并不意味着必须连接到您的数据库。

如果您有 SQL 注入漏洞，那就不同了，应该单独修复 - 但您应该研究加密数据库交互的方法。

这个问题和相关答案应该给你一个很好的概述： [如何安全地配置数据库连接](https://stackoverflow.com/questions/2966857/how-to-configure-database-connection-securely)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:33:47.160

如果您从应用程序直接连接到数据库，用户可以从 app.config 获取连接字符串并直接连接到数据库，甚至无需反映您的代码。当然，您可以加密您的连接字符串，但是只要稍微使用反射和调试，无论如何都可以提取它。
所以我会说你的数据库无论如何都不会受到保护。

您可以通过以下方式保护数据库：放弃（使其成为应用程序本地），保护数据库，而不是应用程序 DAL，选择服务方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T16:33:40.690

这个问题表明你有点忽略了这一点。

如果用户有权访问您的数据库或某些公共 Web 服务或任何公共接口，那么您需要某种方式来验证和授权该访问。

无论攻击者是否知道您的客户端是如何工作的，该接口都可能受到攻击。保护客户只能减慢他们的速度。

# f# - 如何在条件中断言一个元组

> ID：10638515
> 
> 赞同：3
> 
> 时间：2012-05-17T15:16:37.643
> 
> 标签：f#

给定元组：

```
let tuple = (true, 1) 
```

我如何在条件中使用这个元组？像这样的东西：

```
if tuple.first then //doesnt work 
```

或者

```
if x,_ = tuple then // doesnt work 
```

我不想这样做：

```
let isTrue value = 
   let b,_ = value
   b

if isTrue tuple then // boring 
```

有没有一种很好的方法来评估条件内的元组值而不创建单独的函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T15:19:56.200

该[`fst`](http://msdn.microsoft.com/en-us/library/ee370480.aspx)功能可以在这里为您提供帮助。

> 返回元组的第一个元素

一个例子：

```
let tuple = (true, 1)
if fst tuple then
    //whatever 
```

第二个元素还有一个[`snd`](http://msdn.microsoft.com/en-us/library/ee340353)。

另一种选择是使用[模式匹配](http://msdn.microsoft.com/en-us/library/dd547125.aspx)：

```
let tuple = (true, 1)

let value = 
    match tuple with
    | (true, _) -> "fst is True"
    | (false, _) -> "fst is False"

printfn "%s" value 
```

这可以让您匹配更复杂的场景，这是 F# 中非常强大的构造。[查看MSDN 文档](http://msdn.microsoft.com/en-us/library/dd547125.aspx#tuple)中的元组模式以获取一些示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T15:21:30.317

您正在寻找的功能是“fst”。

```
let v = (true, 3)
if fst v then "yes" else "no" 
```

"fst" 将得到一个元组的前半部分。“snd”将获得下半场。

有关其他信息，[MSDN 在此处提供信息](http://msdn.microsoft.com/en-us/library/dd233200.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:21:51.147

您可以使用[fst](http://msdn.microsoft.com/en-us/library/ee370480.aspx)功能：

```
if tuple |> fst then
    ... 
```

# xcode - 动态改变 UINavigationBar 的背景图片 (Pre-iOS5)

> ID：10638525
> 
> 赞同：0
> 
> 时间：2012-05-17T15:17:11.647
> 
> 标签：xcode

我正在尝试创建一个基于类的属性为 UINavigationBar 动态着色的视图，但我在这样做时遇到了麻烦。关于我应该如何做到这一点的任何想法？

我遇到的主要问题是我有其他类导入了我试图在其中执行此操作的特定类，最终发生的是这些视图也获得了这个动态导航栏。

这甚至可能吗？仅限 iOS5 之前的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:13:57.673

```
[myToolbar insertSubview:[[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"toolbar_40.png"]] autorelease] atIndex:0]; 
```

# c++ - 默认构造函数是在什么条件下生成的？

> ID：10638527
> 
> 赞同：4
> 
> 时间：2012-05-17T15:17:19.837
> 
> 标签：c++, constructor, default-constructor

我有以下课程：

```
class Tileset { //base class

public:
    static std::vector<Tileset*> list;
    virtual ~Tileset() = 0;

protected:
    std::vector<Tile> tiles_list;
    sf::Texture sheet;

private: //non copiable
    Tileset(const Tileset&);
    Tileset& operator=(const Tileset&);
}; 
```

where`sf::Texture`有一个默认构造函数

据我了解，应该生成一个默认构造函数，因为每个成员也可以默认构造。然而，当我尝试在不调用`Tileset`构造函数的情况下构造派生对象时出现编译器错误。有人可以解释为什么没有生成默认构造函数吗？

编辑：忘了提到`Tile`该类没有默认构造函数。我不确定这是否会改变

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T15:21:01.583

如果以下任何一项为真，则不会生成默认构造函数

*   声明了一个用户定义的构造函数
*   该类型有一个`const`或引用字段

您声明了一个构造函数，因此 C++ 不会提供默认生成的构造函数。在这种情况下，尽管 的所有字段`Tileset`都有有用的默认构造函数，所以在这里定义默认构造函数非常容易

```
Tileset() { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:19:47.450

当您不提供任何构造函数时，编译器才会为您的类生成默认构造函数。如果您提供构造函数（甚至是复制构造函数），那么编译器将不会生成默认构造函数。

“提供”我的意思是当你在你的类中*声明*和“可选地”*定义*一个构造函数时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:24:07.400

来自 C++ 规范，12.1.5

> 如果类 X 没有*用户声明*的构造函数，则隐式声明默认构造函数。*隐式声明的*默认构造函数是`inline public`其类的成员。

您的`Tileset`类声明了一个构造函数，因此 C++ 编译器没有为您声明一个隐式构造函数。这种行为的基本原理是，由于您提供了带参数的构造函数，因此您可能需要这些参数才能正确初始化类的实例。这里的假设是，如果除了非默认构造函数之外还需要默认构造函数，您只需声明它即可。

# javascript - 如何在 JavaScript 中解析格式为“YYYYmmdd”的日期？

> ID：10638529
> 
> 赞同：21
> 
> 时间：2012-05-17T15:17:26.513
> 
> 标签：javascript, date

这是一个菜鸟问题：

如何在`"YYYYmmdd"`没有外部库的情况下解析格式的日期？如果输入字符串不是这种格式，我想得到`invalid Date`（或者未定义，如果它更容易的话）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-17T15:22:20.567

```
function parse(str) {
    if(!/^(\d){8}$/.test(str)) return "invalid date";
    var y = str.substr(0,4),
        m = str.substr(4,2),
        d = str.substr(6,2);
    return new Date(y,m,d);
} 
```

用法：

```
parse('20120401'); 
```

**更新：**

正如 Rocket 所说，js 中的月份是从 0 开始的......如果月份**在你的字符串中不是从 0 开始的，请使用这个**

```
function parse(str) {
    if(!/^(\d){8}$/.test(str)) return "invalid date";
    var y = str.substr(0,4),
        m = str.substr(4,2) - 1,
        d = str.substr(6,2);
    return new Date(y,m,d);
} 
```

**更新：**

更严格地检查日期的有效性。采用 HBP 的方式来验证日期。

```
function parse(str) {
    var y = str.substr(0,4),
        m = str.substr(4,2) - 1,
        d = str.substr(6,2);
    var D = new Date(y,m,d);
    return (D.getFullYear() == y && D.getMonth() == m && D.getDate() == d) ? D : 'invalid date';
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T15:45:24.570

验证数字的更强大的版本：

```
 function parse (str) {
        // validate year as 4 digits, month as 01-12, and day as 01-31 
        if ((str = str.match (/^(\d{4})(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])$/))) {
           // make a date
           str[0] = new Date (+str[1], +str[2] - 1, +str[3]);
           // check if month stayed the same (ie that day number is valid)
           if (str[0].getMonth () === +str[2] - 1)
              return str[0];
        }
        return undefined;
 } 
```

参见小提琴：http: [//jsfiddle.net/jstoolsmith/zJ7dM/](http://jsfiddle.net/jstoolsmith/zJ7dM/)

我最近写了一个功能更强大的版本，你可以在这里找到：http: [//jsfiddle.net/jstoolsmith/Db3JM/](http://jsfiddle.net/jstoolsmith/Db3JM/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-12T02:01:54.367

可能是简单的答案，没有检查，但很快......

```
var date = parseInt(date);
new Date(date / 10000, date % 10000 / 100, date % 100); 
```

或者，如果基于源的月份不为零，

```
new Date(date / 10000, (date % 10000 / 100) - 1, date % 100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T09:35:13.677

结合 HBP 的答案和这个[答案](https://stackoverflow.com/a/1494700/1293033)来获得一个解析 YYYYMMDDHHmm 的函数，这是一个[小提琴](http://jsfiddle.net/orrgal/x4touoLd/2/)

```
var parseTS=function(str){
                // validate year as 4 digits, month as 01-12, and day as 01-31
                if ((str = str.match (/^(\d{4})(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])([0-5]\d)$/))) {
                    // make a date
                    str[0] = new Date (+str[1], +str[2] - 1, +str[3], +str[4], +str[5]);
                    // check if month stayed the same (ie that day number is valid)
                    if (str[0].getMonth () === +str[2] - 1) {
                        return str[0];
                    }
                }
                return undefined;
            };

    console.log(parseTS('201501012645')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-11T21:30:35.750

仅使用字符串中的数字的示例：

```
function toDate(str) {
  var m = str.split(/\D/);
  return new Date(+m[0], +m[1] - 1, +m[2], +m[3], +m[4], +m[5]);
}

console.log(toDate("2020-08-23 23:34:45"));
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-25T12:06:45.950

使用更新的语言特性来解构赋值：

```
// Parse YYYYMMDD to Date
function parseYMD(s) {
  let [C,Y,M,D] = s.match(/\d\d/g);
  return new Date(C+Y, M-1, D);
}

['20211125', // Valid date
 '2021112',  // Invalid input
 '20219999'  // Invalid date components
].forEach(d => 
  console.log(`${d} -> ${parseYMD(d).toDateString()}`)
);
```

请注意，这不会验证日期组件，任何 8 位或更多位的字符串都会生成有效的日期。其他任何事情都会产生无效的日期。如果需要严格解析，请考虑：

```
// Parse YYYYMMDD to Date. If any part is out of
// range, return an invalid Date.
function parseYMD(s) {
  let [C,Y,M,D] = s.match(/\d\d/g);
  let d = new Date(C+Y, M-1, D);
  let [yr,mo,da] = d.toLocaleDateString('en-CA').split(/\D/); 
  if (yr != C+Y || mo != M || da != D) {
    d.setTime(NaN);
  }
  return d;
}

['20211125', // Valid date
 '2021112',  // Invalid input
 '20219999'  // Invalid date components
].forEach(d => 
  console.log(`${d} -> ${parseYMD(d).toDateString()}`)
);
```

# android - 安卓日历 API

> ID：10638531
> 
> 赞同：2
> 
> 时间：2012-05-17T15:17:31.607
> 
> 标签：android, android-calendar

我正在尝试设计一个 android 应用程序，它将为多个企业获取日历事件。我需要每个人都有自己的安全日历。该应用程序将在调用时获取每个日历。

如果可能的话，我也想使用通知。

有什么好方法可以做到这一点？我可以只使用 Google Calendar 并且该应用程序可以使用 Google calendar api 吗？

如果我在我的网络服务器上的 MySQL 中构建数据，那么我也许可以使用通知？

想法？

最后一件事......如果我确实使用通知，那么应用程序将需要在设备的后台保持运行，对吗？

# mapping - knockout.js - 映射插件和其他属性

> ID：10638533
> 
> 赞同：2
> 
> 时间：2012-05-17T15:17:40.537
> 
> 标签：mapping, knockout.js

我想使用这种技术将具有许多字段的非常大的对象映射到 javascript 对象中：

var viewModel = ko.mapping.fromJS(data);

但是，我还希望能够向 viewModel 添加其他属性/功能。那怎么做？

**编辑**——这是答案：

这个问题的答案如下：

```
function MyModelOject(data) {
    var self = this;    
    ko.mapping.fromJS(data, {}, this);

    // other functions go here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:09:29.023

```
function MyModelOject(data) {
    var self = this;    
    ko.mapping.fromJS(data, {}, this);

    // other functions go here
} 
```

# android - Android sqlite插入空错误

> ID：10638537
> 
> 赞同：1
> 
> 时间：2012-05-17T15:17:54.843
> 
> 标签：android, sqlite, nullpointerexception

我试图在 MainActivity 的 onCreate 期间自动将值插入到 sqlite 数据库中。

这是一些代码：

```
public static final String KEY_RULEID = "_id";
public static final String KEY_RULE = "rule";
public static final String KEY_TYPE = "type";
public static final String KEY_ENABLED = "enabled";     
private static final String rulesc = "??????";
private static final int typesc = 0;
private static final String enabledsc = "TRUE";

private SQLiteDatabase db;

    /* insert default rules into the database */
private void insertDefaultRule(String rule, int type, String enabled) {
    ContentValues defaultValues = new ContentValues();
    defaultValues.put(KEY_RULE, rulesc);
    defaultValues.put(KEY_TYPE, typesc);
    defaultValues.put(KEY_ENABLED, enabledsc);
    System.out.println("line 175");
    db.insert(Constants.DATABASES_TABLE_RULES, null, defaultValues);
} 
```

第 175 行被打印到系统日志中，所以我知道 db.insert 行是错误的来源。主要错误是 NullPointerException 但这是另一半，可能会有所帮助。

```
java.lang.NullPointerException
E/AndroidRuntime(7178):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
E/AndroidRuntime(7178):     at com.prototype.sample.RulesDatabaseAdapter.open(RulesDatabaseAdapter.java:55)
E/AndroidRuntime(7178):     at com.prototype.sample.RulesDatabaseAdapter.insertDefualtRules(RulesDatabaseAdapter.java:155)
E/AndroidRuntime(7178):     at com.prototype.sample.MessagesList.DefaultRules(MessagesList.java:88)
E/AndroidRuntime(7178):     at com.prototype.sample.MessagesList.onCreate(MessagesList.java:53)
E/AndroidRuntime(7178):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(7178):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
E/AndroidRuntime(7178):     ... 11 more 
```

**编辑**：添加信息。这个类确实扩展了 SQLiteOpenHelper。

Constants.DATABASES_TABLE_RULES 在 Constants 类中定义如下：

```
 public final static String DATABASES_TABLE_RULES = "rules"; 
```

打开数据库的代码：

```
 /* opens the database */
public RulesDatabaseAdapter open() throws SQLException {
    db = DBHelper.getWritableDatabase();
    return this;
} 
```

# string - 用带有符号的bash分割字符串

> ID：10638538
> 
> 赞同：25
> 
> 时间：2012-05-17T15:17:56.550
> 
> 标签：string, bash, sed, awk

例如，我有一个字符串：`test1@test2`.

我需要得到`test2`这个字符串的一部分。我怎么能用 bash 做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-17T15:18:51.200

使用[参数扩展](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_02)：

```
str='test1@test2'
echo "${str#*@}" 
```

1.  该`#`字符表示*删除与模式匹配的扩展的最小前缀。*
2.  该`%`字符表示*删除与模式匹配的扩展的最小后缀。*（所以你可以做得到`"${str%@*}"`的`"test1"`部分。）
3.  该`/`字符表示*删除与以下模式匹配的扩展的最小和第一个子字符串。*Bash 有它，但它不是 POSIX。

如果将模式字符加倍，它会贪婪地匹配。

1.  `##`表示*删除匹配模式的扩展的最大前缀。*
2.  `%%`表示*删除匹配模式的扩展的最大后缀。*
3.  `//`表示*删除与模式匹配的扩展的所有子字符串。*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-17T19:02:45.833

```
echo "test1@test2" | awk -F "@" '{print $2}' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-18T01:01:09.610

Bash 中的另一种方式：

```
IFS=@ read -r left right <<< "$string"
echo "$right" 
```

请注意，此技术还提供了字符串的第一部分：

```
echo "$left" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-17T15:18:49.850

```
echo "test1@test2" | sed 's/.*@//' 
```

# java - 为什么priorityQueue 在编译时不需要类似的接口？

> ID：10638541
> 
> 赞同：1
> 
> 时间：2012-05-17T15:18:05.270
> 
> 标签：java

以下代码通过编译是合法的。为什么可以将 PriorityQueue 定义为仅获取 instanceof Comparable 的元素？

```
...
PriorityQueue<Object> q = new PriorityQueue<Object>();
q.add(new Object());
... 
```

但它抛出了预期的异常：

```
Exception in thread "main" java.lang.ClassCastException: java.lang.Object cannot be cast     to java.lang.Comparable
    at java.util.PriorityQueue.siftUpComparable(PriorityQueue.java:595)
    at java.util.PriorityQueue.siftUp(PriorityQueue.java:591)
    at java.util.PriorityQueue.offer(PriorityQueue.java:291)
    at java.util.PriorityQueue.add(PriorityQueue.java:268)
    at ReentrantLockExample.main(ReentrantLockExample.java:12) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:21:31.777

因为它还*允许*您为`Comparator`不是`Comparable`. 这也会影响`TreeSet`,`TreeMap`和基本上所有其他已排序的集合。

如果您想在自己的代码中避免它，请首选工厂方法而不是构造函数，因为您可以在不同的工厂方法上指定不同的类型约束。例如，番石榴[提供](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Sets.html)

```
<E extends Comparable> TreeSet<E> Sets.newTreeSet();
<E> TreeSet<E> Sets.newTreeSet(Comparator<? super E> comparator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:21:29.293

*只要*您`Comparable`提供.*`Comparator`*

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)中：

> 优先级队列的元素根据其自然顺序或`Comparator`在队列构造时提供的顺序进行排序，具体取决于使用的构造函数。优先级队列不允许`null`元素。依赖于自然排序的优先级队列也不允许插入不可比较的对象（这样做可能会导致`ClassCastException`）。

# xml - SmartGWT：TreeGrid 展开空文件夹重置树

> ID：10638542
> 
> 赞同：0
> 
> 时间：2012-05-17T15:18:11.177
> 
> 标签：xml, datasource, smartgwt, treegrid

我正在使用来自 XML 类型 DataSource 的数据构建 TreeGrid，如 SmartClient 展示中所示。

我正在使用 Windows XP 和 SmartGWT 3.0 版、GWT SDK 2.4.0（使用 Eclipse IDE）。

但是，问题是当我尝试展开一个空文件夹时，**树会自行关闭/重置**并将**所有选择重置为无**（因为我使用的是复选框树选择类型），并且我也收到此错误（警告）：

```
[ERROR] [testtree] - 15:19:26.637:XRP0:WARN:ResultTree:isc_ResultTree_0 (created by: isc_TreeGrid_0):Adding node to tree with id property set to:1\. A node with this ID is already present in this Tree - that node will be replaced. Note that this warning may be disabled by setting the reportCollisions attribute to false. 
```

这实际上与此非常相似（[http://forums.smartclient.com/showthread.php?t=20167](http://forums.smartclient.com/showthread.php?t=20167)），但是他没有解释解决方案。:(

这是我用于 XML 数据源的测试值：

```
...
<record>
<id>1</id>
<parentId>0</parentId>
<name>test1</name>
</record>

<record>
<id>2</id>
<parentId>1</parentId>
<name>test41</name>
</record>

<record>
<id>3</id>
<parentId>2</parentId>
<name>test2</name>
</record>

<record>
    <id>4</id>
    <parentId>3</parentId>
    <name>test212</name>
</record> 
```

这是问题的截图；（抱歉没有足够的代表无法发布图片） **在**我点击展开按钮之前： [链接（imgur 图片）](http://imgur.com/Gtzh6) ，**之后**：[链接](http://imgur.com/zr1Nk)

根据上图，如果我尝试展开，就会出现这个问题`'test212'`，或者`'test2'`。

这是我的 TreeGrid 属性的片段：

```
...
TreeGrid test = new TreeGrid();
test.setAutoFetchData(true);
test.setDataSource(SingletonDS.getInstance());
test.setSelectionAppearance(SelectionAppearance.CHECKBOX);
test.setShowPartialSelection(true);
test.setShowSelectedStyle(false);

layout.addMember(test); 
```

这是我的单例数据源的属性：

```
...    
singleton.setDataFormat(DSDataFormat.XML);

singleton.setID("singletonDS");

DataSourceIntegerField idField = new DataSourceIntegerField("id", "ID");
idField.setPrimaryKey(true);
DataSourceIntegerField parentIdField = new DataSourceIntegerField("parentId", "Parent ID");
parentIdField.setForeignKey(singleton.getID()+".id");
parentId.setRootValue(0);
DataSourceTextField nameField = new DataSourceTextField("name", "Name");

singleton.setFields(idField, parentIdField, nameField);
... 
```

注意：XML 数据已正确传递到网格中。

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T06:33:53.273

我想我终于找到了解决方案。这不是错误，这是我自己的笨拙错误。

广泛调试项目后发现`idParent`GET参数中有一个参数，我没有处理。结果，servlet 总是输出完整的 XML 数据，从而产生这个错误。

# java - 3路归并排序

> ID：10638549
> 
> 赞同：2
> 
> 时间：2012-05-17T15:18:32.203
> 
> 标签：java, arrays, merge, mergesort

我有一个任务是在java中实现类似3路mergeshort的东西。我将有一个整数数组作为输入，我必须执行以下操作：

在具有 3 路除法的数组中实现合并排序，并打印数组的 3 个排序分区。例如，如果我将以下数组作为输入，`[9 23 10 90 70 10 3 23]`则输出将首先是 3 个分区 sorted:`[9 10 24]` `[70 90]` `[3 10 23]`然后是最终数组 sorted `[3 9 10 10 23 24 70 90]`。

这是我迄今为止实施的：

```
public static void mergesort(int[] data) {
    int elements = data.length - 1;
    int length1;
    int length2;
    int length3;

    if (elements % 3 == 0) {
        length1 = elements / 3;
        length2 = elements / 3;
        length3 = elements / 3;
    } else if (elements % 3 == 1) {
        length1 = (elements / 3) + 1;
        length2 = elements / 3;
        length3 = elements / 3;
    } else { //if (elements % 3 == 2)
        length1 = (elements / 3) + 1;
        length2 = elements / 3;
        length3 = (elements / 3) + 1;
    }

    Arrays.sort(data, 0, length1 - 1);
    Arrays.sort(data, length1, length1 + length2 - 1);
    Arrays.sort(data, length1 + length2, length1 + length2 + length3 - 1);

    merge(data, 0, length1, length1 + length2);
    merge(data, 0, length1 + length2, length1 + length2 + length3);
}

private static void merge(int[] data, int first, int n1, int n2) {
    int[] temp = new int[n1 + n2];
    int copied = 0;
    int copied1 = 0;
    int copied2 = 0;
    int i;

    while ((copied1 < n1) && (copied2 < n2)) {
        if (data[first + copied1] < data[first + n1 + copied2]) {
            temp[copied++] = data[first + (copied1++)];
        } else {
            temp[copied++] = data[first + n1 + (copied2++)];
        }
    }

    while (copied1 < n1) {
        temp[copied++] = data[first + (copied1++)];
    }
    while (copied2 < n2) {
        temp[copied++] = data[first + n1 + (copied2++)];
    }

    for (i = 0; i < n1 + n2; i++) {
        data[first + i] = temp[i];
    }
} 
```

我所做的是首先根据情况将数组拆分为 3 部分，然后对数组的 3 部分进行排序，然后尝试合并前 2 部分，然后将合并的部分与最后一部分合并。

我已经为初学者实现了这两种方法，但首先我非常确信合并方法很糟糕而且是错误的，其次我相信我在这个问题上的方法有问题我觉得即使是合并排序方法也是错误的执行得非常好。

我想要的是关于我应该在这个问题上做什么以及我的实施完全错误的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:42:50.593

```
void merge(int arr1[], int arr2[])
{
  int p1 = 0;
  int p2 = 0;
  int arr3[] = new int[arr1.length + arr2.length];

  while(p1 < arr1.length && p2 < arr2.length)
  {
    if(arr1[p1] > arr2[p2])
    {
      arr3[p2] = arr2[p2];
      p2++;
    }
    else
    {
      arr3[p1] = arr1[p1];
      p1++;
    }
  }

  //Now just add the code for just concatenating any remaining elements in 
  // either arr1 or arr2
  //This will happen if the lengths of arr1 and arr2 differ 

} 
```

这是合并两个数组的基本代码（未测试，可能会错过边界条件）。尝试将其合并到您的代码中。

# android - Google checkout 在我的国家/地区不可用，我如何在 GooglePlay 中发布付费应用程序？

> ID：10638556
> 
> 赞同：5
> 
> 时间：2012-05-17T15:18:52.023
> 
> 标签：android, google-checkout

遗憾的是，在我的国家 GoogleCheckout 不可用。我想制作一个付费应用程序，我已经开始使用它，但它不是很好，我无法将它作为付费应用程序上传到 GooglePlay，只能免费。

有什么办法或解决方案以某种方式制作结帐帐户并从其他国家或其他地方发布？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:16:13.757

您所在的国家/地区可以使用 AdSense 吗？对于某些国家/地区，您可以在 Google Play 上销售应用程序并通过 AdSense 接收 Google Checkout 付款。

有关更多信息，请参阅此链接：

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=189263](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=189263)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T14:35:29.417

这个问题有点老了，但我会尝试回答，以防它帮助其他人。

我不知道这是否可行，但是当您想要下载您所在国家/地区不可用的内容时，它可以解决类似的问题。它让我下载了以前无法使用的 Google 钱包。

让我强调一下，我不知道法律问题！当我实际搬迁并需要更改我在 Google Play 中的位置时，我使用了此修复程序。

您需要一张带有美国账单地址的信用卡（或您需要的内容所在的任何其他国家/地区）。您还需要一个 Google 电子钱包帐户。

1) 登录您的 Google 电子钱包帐户以管理您的付款方式[https://wallet.google.com/manage/paymentMethods](https://wallet.google.com/manage/paymentMethods)

2) 添加一张新卡或将您的默认付款方式更改为账单地址位于您所需国家/地区的一种

3) 打开 Play 商店并导航到任何可供下载的项目

4) 点击开始下载，直到到达“接受并购买”屏幕（无需完成购买）。您现在应该看到货币已更改为所需国家/地区的货币

5) 关闭 Play 商店并清除浏览器缓存。在 Android 手机上设置 > 应用程序 > Google Play 商店 > 清除数据

6) 重新打开 Play 商店。您现在应该会看到与您的默认付款方式的帐单国家/地区相匹配的 Play 商店。在我的手机上，这并没有立即发生，而是花了几分钟。我试图购买在美国（Nexus 4）可用的手机，现在看到它可用。

# svg - Visio 生成 SVG

> ID：10638557
> 
> 赞同：2
> 
> 时间：2012-05-17T15:18:53.473
> 
> 标签：svg, visio

我正在使用 Visio 以图形方式编辑我的游戏的形状，从中导出 SVG，然后解析 SVG。当一个形状旋转时，transform属性是这样的

变换=“翻译（273.238,7.61209）旋转（-45）”

在这里，形状围绕原点旋转，这需要改变平移坐标。但是，对于我的游戏，我需要 Visio 使用可选的 cx 和 cy 参数进行旋转并将形状的中心作为旋转形状的原点发送。这将为我提供所需的正确翻译坐标。

如何让 Visio 做到这一点？或者有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:39:59.377

您不能让 visio 执行此操作。

您必须编写一个程序来转换导出后的转换属性。

# html - 正确显示 jQuery UI 图标

> ID：10638558
> 
> 赞同：0
> 
> 时间：2012-05-17T15:18:56.040
> 
> 标签：html, css, jquery-ui

我一直在尝试创建包含两个图标的图标集，我试图做的是导入 jQuery UI css 文件并从示例中复制 html，但是它不起作用。

有人可以帮我在[这个](http://jsfiddle.net/RKwky/)小提琴中制作图标看起来像[这些](http://jquery-ui.googlecode.com/svn/tags/1.8.2/tests/static/icons.html)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:24:08.460

您必须向容器和图标添加一些 CSS：

```
li.ui-state-default {
    padding: 4px 0; /* this will add some space top/bottom */
    float: left;  /* LI is a block by default so it take full width */
    /* display: inline-block; you could also use inline-block instead of float */
}

.ui-icon {
    margin: 0 4px; /* this gives the icon left/right space */
}​ 
```

[**演示**](http://jsfiddle.net/didierg/hHwMg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:25:40.190

由于您失去了悬停/活动状态，因此您不会在功能上完全匹配，但您可以通过添加一些填充并将 li 设置为内联块来使其非常接近。

```
li{
    display:inline-block;
    margin:.25em 0 0 .25em; /*Just for spacing in the demo*/
    padding:.25em;
} 
```

[http://jsfiddle.net/RKwky/3/](http://jsfiddle.net/RKwky/3/)

# ruby-on-rails - 在 Ruby on Rails 中从数据库中预加载数据

> ID：10638564
> 
> 赞同：1
> 
> 时间：2012-05-17T15:19:27.393
> 
> 标签：ruby-on-rails, ruby

我正在尝试做这样的事情来预加载所有数据，所以每次循环运行时我都不必调用数据库。

```
# Get all data and do some eager loading
bets = Bet.find(:all, :include => :team_id)

games = Game.find(:all)

games.each do |game|
  bets.find_all_by_user_id(user.id) # Now I want to get the specific bets, but I can't do  find() on the returned array
end 
```

和我尝试过的另一种方式

```
bets = Bet.where(:user_id => users) # users are an array of ID's

games = Game.find(:all)

games.each do |game|
  bets.find_all_by_user_id(user.id) # This works, but it makes a db call every time, which makes the site really slow.
end 
```

所以基本上我要做的是加载所有数据，然后在循环中使用它而无需联系数据库。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:30:32.347

您可能必须在之前的某个时间点进行调用，将数据保存在变量中，然后在循环中访问该变量。像这样的东西：

```
games = Game.all

bets = Bet.all

games.each do |game|
    bets.select {|b| b.user_id == user.id}
end 
```

不要在数组中使用查找器方法：如果这样做，您将再次查询数据库。坚持使用[Ruby 可枚举方法](http://ruby-doc.org/core-1.9.3/Enumerable.html)来处理您已有的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:58:18.510

我不确定您要做什么...您从哪里获得*用户*变量。为什么你需要在每场比赛中显示**所有**投注？所以，我希望您的投注属于用户并发布到某个游戏。并且您需要列出用户参与的每场比赛的所有投注？因此，在用户中应该是：

```
has_many :bets    
has_many :games, :through => :bets 
```

现在：

```
user.games.all( :include => :bets ).each do |game|
  game.bets # will be already loaded
end 
```

此处： *:include - 命名应该一起加载的关联。命名的符号是指已定义的关联。*[- 从Rails API](http://apidock.com/rails/ActiveRecord/Base/find/class)引用。

# wpf - WPF dataGgridCell 编辑模式

> ID：10638565
> 
> 赞同：2
> 
> 时间：2012-05-17T15:19:28.950
> 
> 标签：wpf, datagridcell, editmode

我需要让 datagridcell 始终处于编辑模式。我没有找到任何选项来制作 datagrid 单元格编辑模式，所以我使用控件模板在 datagrid 单元格下使用了 TextBox。

我可以在文本框中书写，但数据网格单元格内容永远不会更新。如何用我在文本框中写的任何内容更新数据网格单元格内容？这是风格：

```
 <Style TargetType="{x:Type DataGridCell}" x:Key="DatagridCellWithTextbox">
            <Setter Property="BorderThickness" Value="2"></Setter>
            <Setter Property="Foreground" Value="{DynamicResource ContentNormalBrush}"/>
            <Setter Property="Margin" Value="0"></Setter>
            <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type DataGridCell}">
                        <Grid Background="{TemplateBinding Background}">
                          <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <TextBox x:Name="txtCell" Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content.Text}" VerticalContentAlignment="Top" Focusable="True" />
                          </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
          </Style> 
```

谢谢迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T22:13:48.350

您是否尝试过[DataGridCell.IsEditing 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcell.isediting.aspx)？

```
<Style TargetType="{x:Type DataGridCell}">
    <Setter Property="IsEditing" Value="True" />
</Style> 
```

**编辑：**

[您可以将DataGrid.CellEditEnding 事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.celleditending)中的编辑模式设置`Cancel`属性保持为.`True`

```
<DataGrid CellEditEnding="DataGrid_CellEditEnding" 
```

.

```
private void DataGrid_CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
{
    e.Cancel = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-18T08:50:00.113

我知道这个问题很老，但我最近为此开发了自己的解决方案。

我所做的只是继承`DataGridTextColumn`并覆盖该`GenerateElement`方法：

```
public class EditingTextBoxColumn : DataGridTextColumn
{
    protected override FrameworkElement GenerateElement(DataGridCell cell, object dataItem)
    {
        var textbox = base.GenerateEditingElement(cell, dataItem) as TextBox;
        textbox.IsReadOnly = IsReadOnly;
        return textbox;
    }
} 
```

这也适用于其他类型的列。当然，这只适用于`DataGridColumn`已经存在的类型（`DataGridTextColumn`等`DataGridComboBoxColumn`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T08:41:39.580

我知道这是旧的，但我想我有一个更好的答案。使用只读 DataGridTemplateColumn 并设置 CellTemplate。绑定在 CellTemplate 中无法正常工作，但您可以使用不同的 RelativeSource 来修复它：

```
<DataGridTemplateColumn Width="Auto" Header="Select" IsReadOnly="True">
  <DataGridTemplateColumn.CellTemplate>
    <DataTemplate DataType="models:DealAcctListItem">
      <CheckBox IsChecked="{Binding RelativeSource=
                           {RelativeSource AncestorType=DataGridCell}, 
                           Path=DataContext.IsSelected}" />
    </DataTemplate>
  </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

这比试图让 DataGrid 的编辑模式正常工作要容易得多。

# mysql - 多个 MySQL 数据库连接的好处和坏处

> ID：10638566
> 
> 赞同：1
> 
> 时间：2012-05-17T15:19:32.267
> 
> 标签：mysql, security, database-design

为一个客户开发一个应用程序，我将它组织成两个数据库，一个用于公共访问，一个用于后端计算、分析和访问足够特权的用户。此外，后端数据库很大，所以我也希望通过减少对巨型数据库的调用来加快公共体验。实现它不是问题。一切正常。最终我希望将后端和前端划分为子域，并通过 curl 后端进行通信以获得 XML 响应。

我在这里阅读了很多关于在单个应用程序中连接到多个 MySQL 数据库的帖子，并且大多数人在没有任何技术理由的情况下建议不要这样做。我没有接受过数据库架构或网络安全方面的正式培训，所以我希望有人能向我解释为什么在单个应用程序中连接多个数据库是个坏主意。如果这是一个很大的禁忌，最好的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T20:49:56.063

因此，我已经很久没有提出这个问题了，虽然它含糊不清且被误导，但它最近获得了支持。所以也许像 12 年 5 月傻傻的染色草坪这样的新手也会有同样的好奇心。

在应用程序中使用多个数据库连接没有*一般*的正面或负面的影响，它始终是一个*特定于案例的*问题。我认为对初学者的很多误解源于使用 WordPress 或类似的东西，它们完全依赖于单一的全球连接。您可能需要访问应用程序中的不同数据库的原因有很多；这就是为什么像 Doctrine 和 Propel 这样的 ORM（是的，我知道，我偏爱 Symfony）使得在应用程序中配置多个连接变得如此容易。

如果某人——只熟悉 MySQL 和全局数据库——真正有兴趣了解数据库架构和不同数据库引擎的应用，她/他应该阅读 NoSQL。他/她应该设想一个用例，其中应用程序的某些部分需要 MySQL 的可靠性、严格定义和关系功能，而其他部分将受益于`key=>value`配对的速度和简单性，而不必维护 ACID。

简而言之，数据库不是应用程序，应用程序不应与“数据库”紧密联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:28:21.597

是的，在单个应用程序中使用多个数据库有优势也有劣势......

最好的是，当您使用多个数据库时，您的安全性很高..

最糟糕的是你必须同时管理两者，所以如果有任何错误，那么解决这个问题就很困难。

# ios - 如何从 iOS 照片（如相机胶卷）获取图像创建日期时间或上次修改日期时间？

> ID：10638567
> 
> 赞同：4
> 
> 时间：2012-05-17T15:19:32.987
> 
> 标签：ios, image, alasset

我是 iOS 的新手。最近，我正在开发一个 iOS 应用程序，需要检查图像（在 iOS **Photos**中）创建的日期时间和修改的日期时间，以按时间对这些图像进行排序。我使用**ALAssetsLibrary**枚举所有图像，我可以获得每个图像的以下属性：图像文件名、图像资产 url（在其中，我可以获得图像文件扩展名和唯一资产 ID）。但是有人可以告诉我如何获取图像文件的创建日期时间和最后修改的日期时间吗？

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T04:04:18.870

您可以使用 ALAssetPropertyDate 属性检索资产的创建日期：

```
ALAsset* asset;
...
NSDate* date = [asset valueForProperty:ALAssetPropertyDate]; 
```

我不确定检索上次修改日期的方法。

# jquery-mobile - jQuery mobile 中的轮播

> ID：10638570
> 
> 赞同：0
> 
> 时间：2012-05-17T15:19:44.110
> 
> 标签：jquery-mobile, carousel

[http://andrebrov.net/dev/carousel/](http://andrebrov.net/dev/carousel/)

上面的链接显示了一些使用轮播的幻灯片示例。

```
 var carousel  = new $.widgets.Carousel( {

            uuid : "carousel",

            args : { "scrollInterval" : 600,"itemWidth":290
            },
                value : [
                        { "title" : "Tron.Legacy",
                          "image" : "images/1.jpg"
                        },
                        { "title" : "Yogi Bear",
                          "image" : "images/2.jpg"
                        },
                        { "title" : "The Chronicles of Narnia: The Voyage of the Dawn Treader",
                          "image" : "images/3.jpg"
                        },
                        { "title" : "The Fighter",
                          "image" : "images/4.jpg"
                        },
                        { "title" : "Tangled",
                          "image" : "images/5.jpg"
                        }
                ]
            });                   
    </script > 
```

在上面的**value**属性代码中，我们给出了**title**和**image**属性。是否有可能我们可以将**<div>**部分作为输入而不是图像，以便我们可以将一些文本消息添加到图像或其他内容中。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:54:57.530

在你的轮播模板中写

```
<div style="height:100%;font-size:1.5em;width:500px">@{div}</div> 
```

并在轮播值中写入

```
"title" : "Tron.Legacy",
"image" : "images/1.jpg",
"div": '<div id="page1">first</div>' 
```

我遇到了和你一样的问题，但能够在轮播中添加 div。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:33:00.267

Twitter Bootstrap 项目有一个轮播，可以接受 div 和任何你想使用的标记。

[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:24:13.610

如果您想更改它，我查看了小部件代码，如果您查看 carousel.js 的这一部分：

```
this.applyTemplate = function(obj, _t) {
    for (var i in obj) {
        var token = "@{" + i + "}";
        while (_t.indexOf(token) != -1) {
            _t = _t.replace(token, obj[i]);
        }
    }
    return _t;
}; 
```

特别注意`var token = "@{" + i + "}";`

因为在 html 代码中有这个部分：

```
<div class="carousel-item">
    <div style="height:2em;font-size:1.5em;padding-bottom:15px;">@{title}</div>
    <div id="carousel_item_@{id}" >
        <div style="float:left;width:100%"><img src="@{image}" /></div>                                                 
    </div>
</div> 
```

如果您注意到 @{image} 和 @{title} 是标题和图像属性。因此，只需浏览代码，我会假设您的文本将替换 html 中的“@{something}”。所以几乎你可以添加一个“@{something}”，然后为你的对象添加一个属性：

```
{"something":"caption to add",
 "title":"blah",
 "img":"blah.jpg"} 
```

# google-chrome-extension - 我应该拥有我为其创建 Chrome Web 应用程序的网站吗？

> ID：10638581
> 
> 赞同：4
> 
> 时间：2012-05-17T15:20:20.197
> 
> 标签：google-chrome-extension

我正在尝试为某些网站创建一个 Chrome Web 应用程序。

我注意到 -[在 Developer Dashboard](https://chrome.google.com/webstore/developer/dashboard) - Google 要求我在以下位置拥有该网站`web_url`：

```
"launch": {"web_url": "http://example.org/"} 
```

错误消息：

```
This hosted web app specifies a web_url that is not matched by sites you own. Before you can publish this app, you must verify ownership of the web_url listed below.
Unmatched web_url 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T01:30:28.587

尝试将应用发布到 Chrome WebStore 的常见错误。

*   官方网站无效。
*   此托管网络应用程序的 web_url 不归开发者所有。

[我在这里](https://groups.google.com/a/googleproductforums.com/d/msg/drive/-/eAmhHsP4a7kJ.)回答了一个类似的问题。

我将清单中 web_url 的值设置为

1.  sites.google.com/site/conjointbiz
2.  semanticc.blogspot.co.uk
3.  [www.conjoint.biz](http://www.conjoint.biz) /

反过来。我实际上（显然）只是 3 的注册人。看来，谷歌自己的意思是注册人。

以下反映了我缺乏知识，因此无法给出更全面的答案。问题是在幕后检查所有权会发生什么。究竟什么是所有权？我目前不清楚拥有网站的公司如何将所有权移交给为该公司工作的开发人员。那就是这种情况下开发者注册的流程是什么？也不是我如何“可能要求他们 [网站所有者] 授予您一个允许您发布应用程序的协会......”

有人知道吗？

这是我以前的帖子：-我实际上并不拥有sites.google.com/site/conjointbiz 的网址，尽管它是“我的”网站。它是由 BT/Google 倡议为我创建的，我使用它是因为我可以将其修改为应用程序主页。所以，在我拥有那个 URL 之前。可能semanticc.blogspot.co.uk/ 博客也代表同样的问题？我确实拥有我可以使用的其他 URL，例如 www.conjoint.biz

...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:38:31.720

具体来说，您必须拥有您*上传到 Chrome 网上应用店的*Chrome 应用程序的网站。没有什么可以阻止您为不属于您的网站创建 Web 应用程序，然后在您自己的网站或任何其他第三方文件托管服务上提供 CRX 文件。

该限制存在于 Google 的网上应用店中，而不是浏览器本身。

# sql-server - 将索引移动到其他文件组

> ID：10638584
> 
> 赞同：0
> 
> 时间：2012-05-17T15:20:29.183
> 
> 标签：sql-server, sql-server-2008, tsql

是否有一个不错的脚本，它生成脚本以将聚集和非聚集索引（+堆）移动到其他文件组？

**在完美的世界**中，它看起来像过程，其中输入是表名，新文件组名作为字符串（因此也可以提供带有列的分区模式）和可选的索引名称（如果没有给出，则移动所有索引或堆）。该脚本会在 SSMS 的消息面板中输出结果（脚本），因此可以在运行前查看。它还会考虑企业版功能（在线），并且会为聚集索引制作漂亮的脚本，不能删除和重新-创建，像这里：

```
CREATE unique clustered INDEX PK_TableName
On dbo.TableName
(
    [ColumnName] ASC
)
WITH (DROP_EXISTING=ON, ONLINE=ON)
ON FileGroup 
```

它还将考虑包含的列、过滤的索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:31:50.717

看

[https://dba.stackexchange.com/questions/16708/moving-large-number-of-tables-to-different-filegroups](https://dba.stackexchange.com/questions/16708/moving-large-number-of-tables-to-different-filegroups)

和

[为索引列表生成 CREATE 脚本](https://stackoverflow.com/questions/1121522/generate-create-scripts-for-a-list-of-indexes)

您只需要稍微调整输出以包含新的文件组名称和“删除现有”子句...

# makefile - makefile 通过解析变量包含

> ID：10638585
> 
> 赞同：0
> 
> 时间：2012-05-17T15:20:30.010
> 
> 标签：makefile

这是一件简单的事情，我已经花了太多时间寻找解决方案......

我的makefile中有变量

```
$(targets): target1.o target2.o target3.o 
```

现在我想`include`根据这个变量为 target1.d target2.d target3.d 执行命令，正确的单行命令是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:24:23.330

```
targets_obj := target1.o target2.o target3.o
$(targets): $(targets_obj)
-include $(targets_obj:.o=.d) 
```

# iphone - UIImagePickerController 给了我一个黑色的预览

> ID：10638586
> 
> 赞同：6
> 
> 时间：2012-05-17T15:20:30.667
> 
> 标签：iphone, ios, uiimagepickercontroller

我`UIImagePickerController`用来拍照。我正在使用以下代码：

```
UIImagePickerController* UIPicker = [[UIImagePickerController alloc] init];
UIPicker.delegate = self;
UIPicker.sourceType= UIImagePickerControllerSourceTypeCamera;
[UIPicker setCameraCaptureMode:UIImagePickerControllerCameraCaptureModePhoto];
UIPicker.allowsEditing=NO;
[self presentModalViewController:UIPicker animated:YES];
[UIPicker release]; 
```

问题是我随机将预览显示为黑屏，如果它发生一次，那么它永远不会恢复，直到我们终止并重新启动应用程序。

我从中获得了正确的图像，但是当将相机作为源类型`UIImagePickerControllerDelegate`时，我在预览时遇到了这个问题。`UIImagePickerController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T02:19:52.547

我今晚在相机预览中遇到了同样的问题，问题的根本原因是……应用程序委托中完全不相关的代码修改了后台队列上的 UI。

显然，无需花费太多时间就能解决 AVFoundation 所依赖的脆弱的内部变量。

一旦我从后台队列中消除了对 UI 代码的调用，相机预览就变得快速而可靠。

这篇文章 ( [http://www.cocoanetics.com/2013/02/uiview-background-queue-debugging/](http://www.cocoanetics.com/2013/02/uiview-background-queue-debugging/) ) 对追踪从后台队列修改 UI 的位置非常有帮助。

我还建议您查看这个问题的答案（[iOS 7 UIImagePickerController 有黑色预览](https://stackoverflow.com/questions/19081701/ios-7-uiimagepickercontroller-has-black-preview?lq=1)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T11:31:38.337

如果它随机发生，我怀疑这是内存问题。UIImagePickerController 中的图像相当大。如果您设法以某种方式操纵图像，您的记忆可能无法支持。

# jquery - 如何在 Knockout 中查找哪个属性正在调用订阅的方法？

> ID：10638592
> 
> 赞同：4
> 
> 时间：2012-05-17T15:21:05.030
> 
> 标签：jquery, knockout.js

当我们将一个函数订阅多个属性时，有什么方法可以找到哪个属性正在调用订阅的函数？

代码示例。

```
var self = this;
$(document).ready(function(){

var myViewModel = 
{
    FirstName : ko.observable("Bert"),
    LastName : ko.observable("pual")
};
myViewModel.FirstName.subscribe(self.notifyChange);

myViewModel.LastName.subscribe(self.notifyChange);

ko.applyBindings(myViewModel);
});
notifyChange = function ( newValue ) {// want to find which property(FirstName/LastName) is calling the function } 
```

HTML

```
<body>
Enter your name:
<input id="source" data-bind="value: FirstName" />
<input id="Text1" data-bind="value: LastName" /> 
```

在这里，我为 FirstName 和 LastName 订阅了“notifyChange”功能。如果任何一个值发生更改，它将调用 notifyChange 函数，我想知道哪些属性更改会调用 notifyChange 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:38:11.313

You can't tell who actually called the function.

One choice would be to use your `notifyChange` function, but `bind` it in each case to the appropriate property. Now, `this` will be set to either the `FirstName` or `LastName` observable. Doing a `bind` does create a wrapper to the function, but at least your actual implementation in `notifyChange` will only exist once.

```
myViewModel.FirstName.subscribe(self.notifyChange.bind(myViewModel.FirstName));
myViewModel.LastName.subscribe(self.notifyChange.bind(myViewModel.LastName)); 
```

So, `this` inside of `notifyChange` will be the appropriate observable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-26T18:24:55.513

我意识到这个问题是在 6 年前提出并回答的。但也许我的回答对某人仍然有用。

接受的答案基于将 observable 作为回调函数的上下文传递。顺便说一句，您不必使用`bind()`，您可以将上下文作为第二个参数传递给`subscribe()`：

```
myViewModel.FirstName.subscribe(self.notifyChange, myViewModel.FirstName); 
```

淘汰赛在`bind()`内部使用。

但是，如果你（像我一样）不能改变你的回调函数中的上下文（我需要那个上下文中的属性和函数），为什么不简单地将你的回调函数包装在另一个函数中并将一个额外的参数传递给回调功能：

```
myViewModel.FirstName.subscribe(function (value) { self.notifyChange('FirstName', value); });
myViewModel.LastName.subscribe(function (value) { self.notifyChange('LastName', value); }); 
```

如果你在一个循环中使用它，假设你正在枚举你的 ViewModel 的属性，你可以像这样将整个东西包装在一个 IIFE 中：

```
// .. property is an enumerated reference to an ko.observer
// .. propertyName is a string identifying it (for instance 'FirstName')
(function (elementName) {
    property.subscribe(function(value) { 
        self.notifyChange(elementName, value);
    });
})(propertyName); 
```

# php - Zend Server Job 前任失败依赖

> ID：10638596
> 
> 赞同：4
> 
> 时间：2012-05-17T15:21:21.347
> 
> 标签：php

我使用 Zend Server Jobs 并设置 max concurrent jobs = 4，需要此设置 - 许多高优先级作业需要尽快提供服务。

此外，我还有低优先级的作业，执行时间长 5-7 分钟 - 繁重的数据库操作 - 我希望这个作业一次运行一个 - 如果并行运行竞争数据库资源和超时。我有创建它们的循环（大约 30 个作业），我正在使用 getJobsList() 检查队列中是否存在具有正确名称的作业，获取最大的作业 ID 并设置为下一个作业的前任。然而，即使工作已经创建（第二次迭代）也不会被 getJobsList() 拾取，并且后续迭代不会拾取最大/最新的工作 ID...

**创造就业机会是否涉及延迟？**createHttpJob() 并遵循 getJobsList() 不会返回最近创建的...

在设置了前任并且前任失败后 - 如超时 - 它会自动使依赖项失败。

**是否可以将前任设置为仅完成而不管状态如何**-只是不在队列中或已经在运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:11:04.643

我试图找出你的问题，它把我带到了一个我在一段时间前解决的问题，我在这里分享我的问题/解决方案，这样你就可以从你的问题中找到一些出路，假设你能够更好地解决你的问题有一些提示。

我有一个相当简单的问题，我有一个必须发布的消息表（以便它们的状态从 Pending 更新为 Sent 或 Error）。现在让单个 JOB 运行并执行所有这些发送创建的问题，因此我必须生成多个实例，这些实例由 crontab 每 5 秒启动一次（为此我必须编写睡眠逻辑，因为默认情况下 cron 仅每分钟启动一次）。现在，每个作业都计划以 5 秒的间隔开始，并具有手动分配的特定 JOB-WORKER-ID 作为脚本的参数，因为我想要每个作业的 ID，因此同时没有重复的 JOB-WORKER-身份证有效。

为此，我保留了一个类似 JOB_LOG 的表，它记录所有作业并存储它的 start_time、end_time 和每个作业执行期间发送的消息数。现在每次我开始新的工作时，我都会检查相同的 JOB-WORKER-ID 是否正在运行？通过向 JOB_LOG 表触发以下查询。

```
SELECT end_time FROM JOB_LOG WHERE job_worker_id = <N> ORDER BY JOB_LOG_ID DESC 
```

如果未指定 end_time，则表示 JOB 仍在运行，否则可以安全地启动新 JOB。:-)

表的表结构类似于以下内容：

```
job_log
 - job_log_id
 - start_time
 - end_time
 - message_sent_count
 - job_worker_id 
```

我知道我的回答并不能完全解决您的问题，但我发现有一些相似之处，您可以从内部找到一些线索。

祝你好运。

# python - 最小编辑距离重建

> ID：10638597
> 
> 赞同：11
> 
> 时间：2012-05-17T15:21:22.287
> 
> 标签：python, matrix, nlp, dynamic-programming

我知道在堆栈上以及在线上有类似的答案，但我觉得我错过了一些东西。给定下面的代码，我们需要重建导致最小编辑距离的事件序列。对于下面的代码，我们需要编写一个输出的函数：

```
Equal, L, L
Delete, E
Equal, A, A
Substitute, D, S
Insert, T 
```

**编辑：使用我的（部分正确的）解决方案更新了代码**

这是代码，以及我的部分解决方案。例如，它适用于我给出的（“lead”->“last”），但不适用于下面的示例（“hint”->“isnt”）。我怀疑这是因为第一个字符是相等的，这会导致我的代码失效。任何正确方向的提示或指示都会很棒！

```
def printMatrix(M):
        for row in M:
                print row
        print

def med(s, t):  
        k = len(s) + 1
        l = len(t) + 1

        M = [[0 for i in range(k)] for j in range(l)]
        MTrace = [["" for i in range(k)] for j in range(l)]

        M[0][0] = 0

        for i in xrange(0, k):
                M[i][0] = i
                MTrace[i][0] = s[i-1]

        for j in xrange(0, l):
                M[0][j] = j
                MTrace[0][j] = t[j-1]

        MTrace[0][0] = "DONE"

        for i in xrange(1, k):
                for j in xrange(1, l):

                        sub = 1
                        sub_op = "sub"
                        if s[i-1] == t[j-1]:
                                # equality
                                sub = 0
                                sub_op = "eq"

                        # deletion
                        min_value = M[i-1][j] + 1
                        op = "del"
                        if min_value > M[i][j-1] + 1:
                                # insertion
                                min_value = M[i][j-1] + 1
                                op = "ins"
                        if min_value > M[i-1][j-1] + sub:
                                # substitution
                                min_value = M[i-1][j-1] + sub
                                op = sub_op

                        M[i][j] = min_value
                        MTrace[i][j] = op                        

        print "final Matrix"
        printMatrix(M)
        printMatrix(MTrace)

############ MY PARTIAL SOLUTION

        def array_append(array,x,y):
            ops_string = MTrace[x][y]
            if ops_string == 'ins':
                array.append(("Insert",MTrace[0][y]))
            elif ops_string == 'sub':
                array.append(("Substitute",MTrace[x][0],MTrace[0][y]))
            elif ops_string == 'eq':
                array.append(("Equal",MTrace[x][0],MTrace[0][y]))
            elif ops_string == 'del':
                array.append(("Delete",MTrace[x][0]))

        i = len(s)
        j = len(t)

        ops_array = []
        base = M[i][j]
        array_append(ops_array,i,j)

        while MTrace[i][j] != "DONE":
            base = M[i][j]
            local_min = min(M[i][j-1],M[i-1][j],M[i-1][j-1])
            if base == local_min:
                i = i - 1
                j = j - 1
                array_append(ops_array,i,j)
            elif M[i][j-1] < M[i-1][j]:
                j = j -1
                array_append(ops_array,i,j)
            elif M[i-1][j] < M[i][j-1]:
                i = i - 1
                array_append(ops_array,i,j)
            else:
                i = i - 1
                j = j - 1
                array_append(ops_array,i,j)

        print ops_array
#########

        return M[k-1][l-1]      

print med('lead', 'last') 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-17T18:13:39.557

我认为在这种情况下，更深入地理解算法很重要。我不会给你一些伪代码，而是引导你完成算法的基本步骤，并向你展示你想要的数据是如何在最终的矩阵中“编码”的。当然，如果您不需要推出自己的算法，那么您显然应该使用其他人的算法，正如[MattH 建议](https://stackoverflow.com/a/10639697/577088)的那样！

### 大局

在我看来，这就像[Wagner-Fischer 算法](http://en.wikipedia.org/wiki/Wagner%E2%80%93Fischer_algorithm)的实现。基本思想是计算“附近”前缀之间的距离，取最小值，然后计算当前字符串对的距离。例如，假设您有两个字符串`'i'`和`'h'`. 让我们将它们沿矩阵的垂直轴和水平轴布置，如下所示：

```
 _ h
_ 0 1
i 1 1 
```

这里，`'_'`表示一个空字符串，矩阵中的每个单元格对应一个编辑序列，该序列将输入（`''`或`'i'`）接收到输出（`''`或`'h'`）。

从空字符串到任何长度为 L 的字符串的距离为 L，（需要 L 次插入）。任意长度为 L 的字符串到空字符串的距离也是 L（需要删除 L 个）。这涵盖了第一行和第一列中的值，它们只是递增。

从那里，您可以通过从上、左和左上值中取最小值并加一来计算任何位置的值，或者，如果字符串中该点的字母相同，则取上-左值不变。对于上`(1, 1)`表中的值，最小值为`0`，`(0, 0)`因此 的值为 ，这`(1, 1)`就是从到`1`的最小编辑距离（一次替换）。所以一般来说，最小编辑距离总是在矩阵的右下角。`'i'``'h'`

现在让我们再做一个，`is`比较`hi`. 同样，矩阵中的每个单元格对应于一个编辑序列，该序列将输入（`''`、`'i'`或`'is'`）接收到输出（`''`、`'h'`或`'hi'`）。

```
 _ h i
_ 0 1 2
i 1 1 #
s 2 # # 
```

我们首先扩大矩阵，`#`用作我们还不知道的值的占位符，并通过递增来扩展第一行和第一列。完成后，我们可以开始计算`#`上面标记的位置的结果。让我们从`(2, 1)`（在（行，列）中，即行主要符号）开始。在上、左上和左值中，最小值为`1`。表中对应的字母是不同的——`s`而且`h`——所以我们在最小值上加一来得到`2`，然后继续。

```
 _ h i
_ 0 1 2
i 1 1 #
s 2 2 # 
```

让我们继续讨论 at 的值`(1, 2)`。现在事情有点不同了，因为表中对应的字母是相同的——它们都是`i`. 这意味着我们可以选择在左上角的单元格中取值*而不加一*。这里的指导直觉是我们不必增加计数，因为在这个位置将相同的字母添加到两个字符串中。由于两条弦的长度都增加了 1，我们沿对角线移动。

```
 _ h i
_ 0 1 2
i 1 1 1
s 2 2 # 
```

有了最后一个空单元格，事情就恢复正常了。对应的字母是`s`和`i`，所以我们再次取最小值并加一，得到`2`：

```
 _ h i
_ 0 1 2
i 1 1 1
s 2 2 2 
```

`is`如果我们对以and开头的两个较长`hi`的单词`isnt`（忽略标点符号）和继续此过程，这是我们得到的表格`hint`：

```
 _ h i n t
_ 0 1 2 3 4
i 1 1 1 2 3
s 2 2 2 2 3
n 3 3 3 2 3
t 4 4 4 3 2 
```

这个矩阵稍微复杂一些，但是这里最终的最小编辑距离仍然只是`2`，因为这两个字符串的最后两个字母是一样的。方便的！

### 重新创建编辑序列

那么我们如何从这个表中提取编辑类型呢？关键是要意识到桌子上的移动对应于特定类型的编辑。因此，例如，从`(0, 0)`to向右移动`(0, 1)`将我们从`_ -> _`不需要编辑到`_ -> h`需要一次编辑、插入。`(0, 0)`同样，从到的向下移动`(1, 0)`将我们从`_ -> _`不需要编辑 到`i -> _`需要一次编辑 删除。`(0, 0)`最后，从到的对角线移动`(1, 1)`将我们从`_ -> _`不需要编辑 到`i -> h`，需要一次编辑，替换。

所以现在我们要做的就是反转我们的步骤，从左上角、左上角和左上角的单元格中追踪局部最小值回到原点，`(0, 0)`请记住，如果当前值与最小值相同，那么我们必须转到左上角的单元格，因为这是唯一不会增加编辑距离的移动。

以下是您可以采取的步骤的详细说明。从完成矩阵的右下角开始，重复以下操作，直到到达左上角：

1.  查看左上角的相邻单元格。如果它不存在，请转到步骤 3。如果该单元格确实存在，请记下存储在那里的值。
2.  左上角单元格中的值是否等于当前单元格中的值？如果是这样，请执行以下操作：
    *   记录一个空操作（即`Equal`）。在这种情况下不需要编辑，因为这个位置的字符是相同的。
    *   更新当前单元格，向上和向左移动。
    *   返回步骤 1。
3.  这里有很多分支：
    *   如果左边没有单元格，上面也没有单元格，那么你在左上角，算法已经完成。
    *   如果左侧没有单元格，请转到步骤 4。（这将继续循环，直到到达左上角。）
    *   如果上面没有单元格，请转到步骤 5。（这将继续循环，直到到达左上角。）
    *   否则，在左边的单元格、左上角的单元格和上面的单元格之间进行三向比较。选择具有最小值的那个。如果有多个候选人，您可以随机选择一个；它们在这个阶段*都是有效的。*（它们对应于具有相同总编辑距离的不同编辑路径。）
        *   如果您选择了上面的单元格，请转到步骤 4。
        *   如果您选择了左侧的单元格，请转到步骤 5。
        *   如果您选择了左上角的单元格，请转到步骤 6。
4.  你正在向上移动。请执行下列操作：
    *   在当前单元格记录输入字符的删除。
    *   更新当前单元格，向上移动。
    *   返回步骤 1。
5.  你向左移动。请执行下列操作：
    *   在当前单元格记录输出字符的插入。
    *   更新当前单元格，向左移动。
    *   返回步骤 1。
6.  你在对角线移动。请执行下列操作：
    *   在当前单元格处记录输入字符的替换，以代替当前单元格处的输出字符。
    *   更新当前单元格，向上和向左移动。
    *   返回步骤 1。

### 把它放在一起

在上面的示例中，有两种可能的路径：

```
(4, 4) -> (3, 3) -> (2, 2) -> (1, 2) -> (0, 1) -> (0, 0) 
```

和

```
(4, 4) -> (3, 3) -> (2, 2) -> (1, 1) -> (0, 0) 
```

反转它们，我们得到

```
(0, 0) -> (0, 1) -> (1, 2) -> (2, 2) -> (3, 3) -> (4, 4) 
```

和

```
(0, 0) -> (1, 1) -> (2, 2) -> (3, 3) -> (4, 4) 
```

所以对于第一个版本，我们的第一个操作是向右移动，即插入。插入的字母是`h`，因为我们要从`isnt`到`hint`。（这对应`Insert, h`于您的详细输出。）我们的下一个操作是对角线移动，即替换或无操作。在这种情况下，这是一个空操作，因为两个位置的编辑距离相同（即字母相同）。所以`Equal, i, i`。然后向下运动，对应于删除。删除的字母是`s`，因为我们再次从 移动`isnt`到`hint`。（一般情况下，要插入的字母来自输出字符串，而要删除的字母来自输入字符串。）那就是`Delete, s`. 然后是两个对角线运动，价值没有变化：`Equal, n, n`和`Equal, t, t`.

结果：

```
Insert, h
Equal, i, i
Delete, s
Equal, n, n
Equal, t, t 
```

执行这些说明`isnt`：

```
isnt   (No change)
hisnt  (Insertion)
hisnt  (No change)
hint   (Deletion)
hint   (No change)
hint   (No change) 
```

总编辑距离为 2。

我将把第二条最小路径作为练习。请记住，两条路径是完全等价的；它们可能不同，但它们会产生相同的最小编辑距离 2，因此完全可以互换。在您通过矩阵向后工作的任何时候，如果您看到两个不同的可能局部最小值，您可以取其中一个，并且保证最终结果是正确的

一旦你了解了这一切，编写代码就不难了。在这种情况下，关键是首先要*深入了解算法*。完成此操作后，对其进行编码就轻而易举了。

### 积累与重建

最后一点，您可能会选择在填充矩阵时*累积编辑。*在这种情况下，矩阵中的每个单元格都可以是一个元组：`(2, ('ins', 'eq', 'del', 'eq', 'eq'))`。您将增加长度，*并*附加与从最小先前状态的移动相对应的操作。这消除了回溯，从而降低了代码的复杂性；但它占用了额外的内存。如果这样做，最终的编辑序列将与矩阵的右下角的最终编辑距离一起出现。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T16:29:46.233

我建议你看看[python-Levenshtein](http://pypi.python.org/pypi/python-Levenshtein)模块。可能会让你走很长一段路：

```
>>> import Levenshtein
>>> Levenshtein.editops('LEAD','LAST')
[('replace', 1, 1), ('replace', 2, 2), ('replace', 3, 3)] 
```

您可以处理编辑操作的输出以创建详细说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T19:54:36.903

我不知道 python，但是如果有帮助，下面的 C# 代码可以工作。

```
public class EditDistanceCalculator
{
    public double SubstitutionCost { get; private set; }
    public double DeletionCost { get; private set; }
    public double InsertionCost { get; private set; }

    public EditDistanceCalculator() : this(1,1, 1)
    {
    }

    public EditDistanceCalculator(double substitutionCost, double insertionCost, double deletionCost)
    {
        InsertionCost = insertionCost;
        DeletionCost = deletionCost;
        SubstitutionCost = substitutionCost;
    }

    public Move[] CalcEditDistance(string s, string t)
    {
        if (s == null) throw new ArgumentNullException("s");
        if (t == null) throw new ArgumentNullException("t");

        var distances = new Cell[s.Length + 1, t.Length + 1];
        for (int i = 0; i <= s.Length; i++)
            distances[i, 0] = new Cell(i, Move.Delete);
        for (int j = 0; j <= t.Length; j++)
            distances[0, j] = new Cell(j, Move.Insert);

        for (int i = 1; i <= s.Length; i++)
            for (int j = 1; j <= t.Length; j++)
                distances[i, j] = CalcEditDistance(distances, s, t, i, j);

        return GetEdit(distances, s.Length, t.Length);
    }

    private Cell CalcEditDistance(Cell[,] distances, string s, string t, int i, int j)
    {
        var cell = s[i - 1] == t[j - 1]
                            ? new Cell(distances[i - 1, j - 1].Cost, Move.Match)
                            : new Cell(SubstitutionCost + distances[i - 1, j - 1].Cost, Move.Substitute);
        double deletionCost = DeletionCost + distances[i - 1, j].Cost;
        if (deletionCost < cell.Cost)
            cell = new Cell(deletionCost, Move.Delete);

        double insertionCost = InsertionCost + distances[i, j - 1].Cost;
        if (insertionCost < cell.Cost)
            cell = new Cell(insertionCost, Move.Insert);

        return cell;
    }

    private static Move[] GetEdit(Cell[,] distances, int i, int j)
    {
        var moves = new Stack<Move>();
        while (i > 0 && j > 0)
        {
            var move = distances[i, j].Move;
            moves.Push(move);
            switch (move)
            {
                case Move.Match:
                case Move.Substitute:
                    i--;
                    j--;
                    break;
                case Move.Insert:
                    j--;
                    break;
                case Move.Delete:
                    i--;
                    break;
                default:
                    throw new ArgumentOutOfRangeException();
            }
        }
        for (int k = 0; k < i; k++)
            moves.Push(Move.Delete);
        for (int k = 0; k < j; k++)
            moves.Push(Move.Insert);

        return moves.ToArray();
    }

    class Cell
    {
        public double Cost { get; private set; }
        public Move Move { get; private set; }

        public Cell(double cost, Move move)
        {
            Cost = cost;
            Move = move;
        }
    }
}

public enum Move
{
    Match,
    Substitute,
    Insert,
    Delete
} 
```

一些测试：

```
 [TestMethod]
    public void TestEditDistance()
    {
        var expected = new[]
            {
                Move.Delete, 
                Move.Substitute, 
                Move.Match, 
                Move.Match, 
                Move.Match, 
                Move.Match, 
                Move.Match, 
                Move.Insert,
                Move.Substitute, 
                Move.Match, 
                Move.Substitute, 
                Move.Match, 
                Move.Match, 
                Move.Match, 
                Move.Match
            };
        Assert.IsTrue(expected.SequenceEqual(new EditDistanceCalculator().CalcEditDistance("thou-shalt-not", "you-should-not")));

        var calc = new EditDistanceCalculator(3, 1, 1);
        var edit = calc.CalcEditDistance("democrat", "republican");
        Console.WriteLine(string.Join(",", edit));
        Assert.AreEqual(3, edit.Count(m => m == Move.Match)); //eca
    } 
```

# sql - 将插入/更新/删除/选择放入单个存储过程是一种不好的做法吗？

> ID：10638607
> 
> 赞同：1
> 
> 时间：2012-05-17T15:21:47.350
> 
> 标签：sql, stored-procedures

所以我们被告知存储过程已经过优化，我们永远不应该将 sql 语句放入代码中。

但我不想为我需要的每种查询或数据库操作创建 10,000 个存储过程。

所以我开始做这样的事情（将所有函数放入一个存储过程中）：

```
CREATE PROCEDURE [dbo].[spTABLENAME]
@Function nvarchar = null,
@ID int = null,
@MoreVariables int = null

AS
BEGIN
    SET NOCOUNT ON;

IF @Function = 'UPDATE'
    BEGIN
        UPDATE UPDATESTUFF WHERE ID = @ID;
    END
ELSE IF @Function = 'INSERT'
    BEGIN
        INSERT INTO TABLENAME (STUFF)
    END
ELSE IF @Function = 'SELECT'
    BEGIN
        SELECT * FROM TABLENAME  WHERE ID= @ID
    END
ELSE IF @Function = 'DELETE'
    BEGIN
        DELETE * FROM TABLENAME WHERE ID = @ID  
    END 
```

结尾

有人可以告诉我以这种方式做事是否有任何问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:27:12.610

使用单个“UPSERT”程序是相当普遍的，但一个也可能返回数据的程序对我来说感觉不合适......

要记住的另一件事是，如果您使用单独的存储过程，您可以从缓存计划中获得一些额外的好处，而您可能无法从一体化程序中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:33:12.237

当它们相关时，您应该只将多个 crud 语句组合到一个存储过程中。

SQL 受过程语言复杂性的影响。使它们太大最终将成为一个问题。

[http://en.wikipedia.org/wiki/SQL](http://en.wikipedia.org/wiki/SQL)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:30:48.380

这种方式违背了使用存储过程的意义和目的。

拥有一个可以确定是用户`INSERT`还是`UPDATE`用户的存储过程没有任何问题，例如，这取决于它们是否已经存在。但是拥有一个“通用”存储过程来做所有事情并不是很有帮助。

如果我是一名开发人员来处理您的项目并且我想编写一个数据访问类来操作您的用户，我宁愿遇到这些 `sp_AddUser`,等`sp_DeleteUser`，`sp_UpdateUserAddress`而不仅仅是：

`sp_doStuffToUsers`

在我看来，这本身就是一个足够好的理由！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T15:26:22.767

我认为根本不写 SQL 是不正确的。只要 SQL 很小，我们就可以在代码中包含 SQL。对于复杂的连接，我们可以创建视图然后在代码中使用它们。
如果查询非常大，或者您试图通过多次查询来获取或构建一些数据，则可以选择存储过程。
也就是说，您不需要将 SELECT/UPDATE/INSERT 捆绑到存储过程中，因为它会影响可读性并增加存储过程的复杂性，从而导致维护问题。

# android - Android：HTTP-Request 经常失败并且速度很慢

> ID：10638608
> 
> 赞同：1
> 
> 时间：2012-05-17T15:21:47.140
> 
> 标签：android, http, url, timeout, wifi

我正在使用以下愚蠢的代码来下载一些数据：

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet();
request.setURI(new URI(url));
request.setHeader("User-Agent","Android Browser");
HttpResponse response = client.execute(request);
in=response.getEntity().getContent();
len=(int)response.getEntity().getContentLength();
if (len<=0) return null;
data=new byte[len];
... 
```

以这种方式下载数据非常慢，并且经常因连接超时而失败。其他用户设备上也会发生同样的情况，因此我的网络配置不应该是原因。

另一方面，当我在普通浏览器中输入给定的“url”时，它可以正常工作，它很快并且几乎立即返回结果。我的 Android 设备和带有该浏览器的“普通”计算机在同一个 WLAN 网络上运行。那么这里有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:26:18.443

对我来说，在模拟器中运行应用程序（慢）和在手机中运行（快）之间存在巨大差异。超时可能是因为网络服务器在一段时间后关闭了连接。但也尝试使用缓冲阅读器。

```
 private static JSONArray getJSON(String url) {
    // initialize
    InputStream is = null;
    JSONArray res = null;

    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        res = new JSONArray(sb.toString());
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    return res;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:53:17.493

很可能您在引用的代码之外做了一些有趣的事情，您能否运行此函数并在日志中查看完成请求需要多长时间？

```
function check_fetch_time(String url) {
    long start = System.currentTimeMillis();

    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(url);
    HttpResponse response = client.execute(request);
    try {
        flushContent( response.getEntity().getContent() );
    } catch (Exception e) {}

    long elapsed = System.currentTimeMillis() - start;
    Log.v(TAG, "page fetched in " + elapsed + "ms");
} 
```

* * *

> 20 秒。是的，真的是几秒钟，而不是几毫秒。

好吧，这里肯定有什么不妥。能否请您打开手机上的浏览器并尝试访问网络？如果浏览器访问速度同样慢，这不是您的软件的问题，也许您的邻居正在用微波炉加热他们的香肠并破坏您的 wifi。但是，如果浏览器几乎是立即打开页面（在一两秒内），那么您的程序有些有趣。在这种情况下，我会创建空的 HelloWorld 项目，复制`check_fetch_time()`到那里再试一次。

# mod-rewrite - 用php重写网址

> ID：10638610
> 
> 赞同：1
> 
> 时间：2012-05-17T15:21:52.177
> 
> 标签：mod-rewrite, url-rewriting, url-routing

这个htaccess有什么问题？我正在尝试将所有带有问号（例如“www.mysite.com/?bla=bla”）的内容重定向到“www.mysite.com/router.php?bla=bla”

```
AddDefaultCharset UTF-8
RewriteEngine On
RewriteRule ^([\w]{1,7})$ short.php?p=$1 [L]
RewriteRule ^([\w]+)\.html$ html/$1.html [L]
RewriteRule ^([\w]+)\.php$ php/$1.php [L]
RewriteRule ^\?(.+)$ router.php?$1 [L] 
```

除最后一条规则外，每条规则都有效，它返回给我：

```
Forbidden

You don't have permission to access / on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:26:47.497

您无法访问`RewriteRule`. 相反，使用`RewriteCond`它来匹配它。在您拥有的位置使用`?`它会将其视为正则表达式的特殊字符。

而是使用：

```
# Prevent redirect loop
# Place above all other rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Non-empty querystring goes to router
RewriteCond %{QUERY_STRING} ^(.+)
# Rewrite to router appending existing querystring (QSA)
RewriteRule ^/?$ router.php [L,QSA] 
```

### 附录：

防止路由器进入 php 目录：

```
RewriteCond %{REQUEST_FILENAME} !^router\.php
RewriteRule ^([\w]+)\.php$ php/$1.php [L] 
```

# security - 匿名在线投票系统

> ID：10638613
> 
> 赞同：1
> 
> 时间：2012-05-17T15:22:04.190
> 
> 标签：security, voting, web-based

我在一个有几十名成员的小组中。我写了一个快速的网络投票系统，并且我想在其中添加一些“安全”元素。我正在尝试尽可能简单。我所做的是让用户在投票时必须输入一个秘密字符串（例如 GUID），我已将每个投票者存储在数据库中。

我想到的将秘密分发给用户的最安全的方法是在数据库中创建一堆秘密字符串，将它们打印出来并带到会议上，然后让人们从帽子里抽出秘密。这样，我相信我会获得两个主要好处：（1）我作为投票系统的作者，将无法确定哪些人投票支持什么（其他任何人也不会，只有秘密的持有者可以查看/更改该秘密所绑定的投票），并且（2）不是“任何人”都可以投票，因为有效秘密是先验已知的。

是否有一种可靠的方式来模拟实际存在的、从帽子中抽奖的过程，并且不影响上述主要好处。也许它无法做到，并且在某些时候必须有信任，或者我必须坚持让某人“得出”秘密（同时我保留了那些被告知个人秘密的人的记录）。

如果有人声称丢失了他们的秘密，我也不知道该怎么办，因为如果他们不诚实，而我只是让他们得出一个新的秘密，他们实际上将有两票可以投。如果不知道“丢失”的秘密是什么，我就无法进入并删除与之相关的投票（如果有的话）。

我现在的情况是，我认为我最好的选择基本上是让人们为每次投票获取新的秘密，并通过实体存在来分发秘密。是否有一种更优雅/自动化的方法来实现我还不知道的上述相同好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:28:15.473

这是一个难题。良好的电子投票系统通常是一个难题。有很多关于他们的文献。一个好的起点是阅读您可以找到的每篇[David Chaum](http://en.wikipedia.org/wiki/David_Chaum)的论文:-)

您正在处理无记名投票要求。

正如您自己指出的那样，您的系统具有重要的局限性，但我认为不可能做得更好。

问题是将秘密（代币）分发给选民，这样你，选举当局，不知道谁得到了哪个秘密*，所有选民都可以相信*. 最后一部分是问题所在。具有挑选帽子协议的物理会议可以完成这项工作，因为选民可以见证并证明您没有作弊（查看泄露的秘密）。我无法想象有任何协议可以让您在远程位置并执行相同的工作。例如，您可以生成秘密并将其交给第三方，第三方将其洗牌并提供给选民，但随后每个人都必须信任该第三方。再举一个例子，您可以通过匿名电子邮件地址分发秘密，但您不能确保只有授权选民才能获得秘密。我在这里看不到解决方案。除非从第一个选秀到最后一个选秀，一直监视着戴帽子的人，否则即使是帽子协议也很容易受到攻击。

所以问题是，既然你要亲自开会，为什么不同时进行投票呢？（反对意见：在投票前见面可能比在投票时更方便，等等......）

至少关于丢失令牌的选民的部分很容易回答：你不能给他们一个新的秘密。对他们来说太糟糕了。

顺便说一句，还有一个您没有解决的要求：选民可验证性。

在您的系统中，基本的选民可验证性非常简单：只需在选举后发布所有代币和相应的选票。但这允许选民向其他人证明他们的投票是什么（通过分享他们的代币或在选举前对其做出零知识承诺），这是他们不应该做的（以防止选民胁迫和投票购买）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:32:26.540

A solution would possibly be to build a server side service that when the vote opens it automates sending a random key to each user, this is usually done with a link that has a parameter on the URL. That way when they go to the site it is anonymous, yet everyone must have a key to vote. The key both combines the topic, and the random key generated for the user in a cryptic way so it is not easily duplicated, and the key is also stored server side for validation to make sure that it is only used once. I created a polling system using this method at one point.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-17T16:27:40.757

当他们访问该站点时，删除具有唯一 ID 的 cookie。然而，如果他们清除了他们的 cookie，你就完蛋了。

# jquery - jQuery部分验证

> ID：10638616
> 
> 赞同：0
> 
> 时间：2012-05-17T15:22:19.583
> 
> 标签：jquery, jquery-validate

我有一个包含许多字段的表单，这些字段逐渐显示。在显示下一个字段之前，我需要检查字段是否正常，所以我想通了：

```
switch (index){
          case '1': 
              addRules1();
              break;
          case '2':
            addRules2();
            break;
          case '3':
              addRules3();
              break;
          }
          if ($("#contractForm").valid()){
//go to next group of inputs 
```

`addRules`函数如下所示：

```
function addRules1(){
    $("#contractForm").validate({
        rules: {
        nom: {
           required: true,
           minlength: 2
         }
       },
       messages: {
           nom: {
           required: "the name!!",
           minlength: jQuery.format("At least {0} characters required!")
         }
       }        
    });                   
}
function addRules2(){

    $("#contractForm").validate({
        rules: {
        commune2: {
           required: true,
           minlength: 2
         }
       },
       messages: {
           commune2: {
           required: "the commune!!",
           minlength: jQuery.format("At least {0} characters required!")
         }
       }        
    }); 
}
function addRules3(){

    $("#contractForm").validate({
        rules: {
        addresseLivraison: {
           required: true,
           minlength: 2
         }
       },
       messages: {
           addresseLivraison: {
           required: "the addresse!!",
           minlength: jQuery.format("At least {0} characters required!")
         }
       }        
    });                                    
} 
```

对于第一组，一切都很好（也在调试器上），但对于第二组，它只是验证 OK 并继续前进。验证器需要重置还是什么？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:36:02.967

```
 switch (index){
  case '1': 
      addRules("nom","the Name!!");
      break;
  case '2':
     addRules("commune2","the commune!!");
     break;
  case '3':
      addRules("addresseLivraison","the addresse!!");
      break;
  } 
```

然后使用此功能：

```
function addRules(att,text){
    $("#contractForm").validate({
        rules: {
        att: {
           required: true,
           minlength: 2
         }
       },
       messages: {
           att: {
           required: text,
           minlength: jQuery.format("At least {0} characters required!")
         }
       }        
    });                   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:30:16.793

这不是您添加和删除规则的方式。根据[插件的文档](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)，

```
.rules('add', {
        required: true,
        number: true
});

.rules('remove', {
        required: true,
        number: true
}); 
```

注意：您必须在使用其中任何一种方法*之前*`.validate()`调用表单。

# excel - 在 Excel 中使用 VBA 对运行时添加的命令按钮的引用

> ID：10638620
> 
> 赞同：1
> 
> 时间：2012-05-17T15:22:28.587
> 
> 标签：excel, vba, button, runtime

在运行期间，用户可以将任意数量的 ActiveX 命令按钮添加到工作表 1。我需要使用 VBA 引用这些新按钮，但不知道如何。

我知道按钮名称将显示的逻辑进展：例如。

(节点#x2)-2=命令按钮#=i

我需要以某种方式引用这些新创建的按钮，我想是这样的：

```
Sheet1.Controls("CommandButton" & i).Select 
```

如果有人知道正确的语法或替代方法，请告知！

**更新**

```
Public Sub Node_Button_Duplication()
'
'Comments: Copies and pastes Node 1's button to the appropriate column

' Copy Node 1 button and paste in appropriate location
    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

End Sub 
```

**跟进**

```
Public Sub Node_Button_Duication()
'
'Comments: Copies and pastes Node 1's button to the appropriate column

Dim shp As Shape

' Copy Node 1 button and paste in appropriate location
    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

    Debug.Print Selection.Name

    Set shp = ActiveSheet.Shapes(Selection.Name)

    With shp.OLEFormat.Object.Object
        .Caption = "Test"
        .Left = 15
        .Top = 15
    End With

End Sub 
```

这给了我一个运行时错误“438：对象不支持这个属性或方法。我不是特别明白

```
shp.OLEFormat.Object.Object 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:53:42.330

```
Public Sub Node_Button_Duplication()
    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

    '~~> This will give you the name
    Debug.Print Selection.Name
End Sub 
```

**跟进**

如果您知道命令按钮的名称，那么您可以像这样更改属性。

```
Option Explicit

Sub Sample()
    Dim shp As Shape

    '~~> Since you already have the name replace "CommandButton1" by
    '~~> the name that you have
    Set shp = ActiveSheet.Shapes("CommandButton1")

    With shp.OLEFormat.Object
        .Object.Caption = "Test"
        .Left = 15
        .Top = 15
    End With
End Sub 
```

你也可以像这样结合上面两个

```
Public Sub Node_Button_Duplication()
    Dim shp As Shape

    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Cells(5, 10 + 7 * (NumNodes - 1) - 1).Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementLeft 47.25
    Selection.ShapeRange.IncrementTop -13.5

    '~~> This will give you the name
    Debug.Print Selection.Name

    Set shp = ActiveSheet.Shapes(Selection.Name)

    With shp.OLEFormat.Object
        .Object.Caption = "Test"
        .Left = 15
        .Top = 15
    End With

End Sub 
```

如果您需要遍历所有按钮，请使用此代码。

```
Sub CommanButtons()
    Dim wks As Worksheet
    Dim OLEObj As OLEObject

    '~~> set it as per the relevant sheet
    Set wks = Worksheets("sheet1")

    For Each OLEObj In wks.OLEObjects
        If TypeOf OLEObj.Object Is MSForms.CommandButton Then
            Debug.Print OLEObj.Object.Caption
        End If
    Next OLEObj
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-19T10:24:45.567

假设您有一个名为“cmdOriginal”的命令按钮（OLE 对象），并且您想要复制该按钮并将其粘贴到同一个工作表上，并将新按钮的名称和标题更改为“cmdButtonCopy”和“这是一个副本”。新添加的按钮在 OLEObjects 集合中具有最高的索引！将以下代码放在工作表的代码部分

```
Sub x1()
    Me.OLEObjects("cmdOriginal").Copy
    Me.Paste
    With Me.OLEObjects(Me.OLEObjects.Count)
        .Name = "cmdButtonCopy"
        .Caption = "This is a copy"
    End With
End Sub 
```

# c++ - FFT 使用 C++ 定点优化 ARM 设备的性能

> ID：10638622
> 
> 赞同：2
> 
> 时间：2012-05-17T15:22:30.103
> 
> 标签：c++, arm, fft, radix, tegra

我在手机和平​​板电脑中使用 OpenCV DFT，比如说 ARM 设备。代码是 C++ 的。我期待能够通过使用 ARM 寄存器和定点算法来优化 FFT 性能，但我只设法获得比 OpenCV 多一倍的时间，甚至不是同一时间。

我使用 RADIX-4 256 点 FFT。

有人知道 OpenCV 是做什么的，为什么优化如此困难？ARM 设备最快的 FFT 算法是什么？radix-4, radix-8, 256 点, 1024...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:23:49.240

OpenCV 的实现在 Tegra、Tegra 2 和 Tegra 3 设备上使用特定于设备的优化。在 Tegra 和 Tegra 2 上，实现是并行的，一些操作使用 GLSL 着色器在 GPU 上加速；在 Tegra 3 上，它还使用 NEON SIMD 指令对 CPU 上的一些操作进行矢量化，并使用 CUDA 来获得更好的 GPU 性能。鉴于 NVidia 将人力投入到优化工作中，利用他们对平台的深入了解，在不常见的操作中超越它可能是一项艰巨的任务。

[这篇文章](http://queue.acm.org/detail.cfm?id=2206309 "使用 OpenCV 的实时计算机视觉")主要是针对 Tegra 3 的，但是讨论了很多关于他们使用的技术类型以及他们通过优化但与设备无关的代码获得的性能加速。

# sql - 将局部变量添加到结果集的每一行

> ID：10638624
> 
> 赞同：0
> 
> 时间：2012-05-17T15:22:38.250
> 
> 标签：sql, tsql

我一直在玩一个大型数据库，在该数据库上我完成了许多汇总统计。我忍不住想，一定有比我正在做的更快的方法。

以以下查询为例：

```
select count(*), thing1, thing2, thing3 from myTable
group by thing1, thing2, thing3 
```

![在此处输入图像描述](../Images/b5a7883cc4556005821cf75b6f0d0c74.png)

1=真，0=假。如果我想从数据集中添加一个局部变量（例如`select @total=count(*) from peopleTable`）并将每一行除以@total，是否有一个典型的 SQL 解决方案？我知道如何在每行的基础上做到这一点，但不是像这样一次性完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:36:29.833

编辑：

现在我想你想要这个：

```
DECLARE @total int;
SET @total = (SELECT COUNT(*) FROM peopleTable)
SELECT COUNT(*) AS count_column
     , CAST(COUNT(*) AS float) / @total AS percent_total
     , @total AS total_ppl
     , thing1, thing2, thing3 
FROM myTable
GROUP BY thing1, thing2, thing3 
```

此查询为您提供了 COUNT 条分组记录、关于总 ppl 和总 ppl 的百分比计数。

# c# - C# 文本框上的多语言字体问题

> ID：10638626
> 
> 赞同：1
> 
> 时间：2012-05-17T15:22:40.847
> 
> 标签：c#, fonts, multilingual

在我的 C# winform 中，用户可以同时插入英语和波斯语字符。

我的问题是波斯语字符显示小于英文字符。我使用字体 Homa，这是一种波斯语字体。如何根据文本的语言更改文本的大小？

有趣的是，在我的笔记本电脑中，英文字符的显示与其他计算机不同。我已经在 Windows 7 上进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:43:26.270

```
if (System.Globalization.CultureInfo.CurrentCulture.Name == "fa-IR") 
{
    richTextBox1.Font = new Font("Homa", 30);
}

//fa          fa-IR       Persian
//fa-IR       fa-IR       Persian (Iran) 
```

# javascript - 从 Ext JS 2.0.2 中的 EditorGridPanel 中删除行

> ID：10638628
> 
> 赞同：1
> 
> 时间：2012-05-17T15:22:59.520
> 
> 标签：javascript, extjs

我是 Ext JS 的新手，我需要更新一个旧应用程序。EditorGridPanel 有一个“添加”按钮，它工作正常。但是，我需要添加一个“删除”按钮，从网格中删除该行。这是网格的代码。谢谢你的帮助。

```
 /*==== INVOICE DATA START =======================================================*/
    var iLineItemCM = new Ext.grid.ColumnModel([
         {id:'i_line_item_name', header: "Line Item Name", dataIndex:     'i_line_item_name', width: 280,
           editor: new Ext.form.TextField({allowBlank: false})}
        ,{header: "Amount", dataIndex: 'i_line_item_amt', width: 80, align: 'right', renderer: 'usMoney',
         editor: new Ext.form.NumberField({
               allowBlank: false,
               allowNegative: false,
               maxValue: 100000
           })}
        ]);

    var iLineItemRec =
        new Ext.data.Record.create([
            {name: 'i_line_item_name'    ,mapping: 'i_line_item_name'  ,type: 'string'}
           ,{name: 'i_line_item_amt'     ,mapping: 'i_line_item_amt'   ,type: 'string'}
         ]);

    var iLineItemStore = new Ext.data.Store({
        url: '',
        reader: new Ext.data.JsonReader({
               root: 'rows'
         },
           iLineItemRec
        )
    });

    var iLineItemGrid = new Ext.grid.EditorGridPanel({
        store: iLineItemStore,
        cm: iLineItemCM,
        width: 'auto',
        height: 'auto',
        //title:'Edit Plants?',
        frame:false,
        //plugins:checkColumn,
        clicksToEdit:1,
        viewConfig: {
            //forceFit: true,
            autoFit:true
      },
      id: 'iLineItemStore',
        tbar: [{
            text: 'Add Line Item',
            handler : function(){
               var r = new iLineItemRec({
                   i_line_item_name: '',
                    i_line_item_amt: ''
               });
                iLineItemGrid.stopEditing();
               iLineItemStore.insert(0, r);
               iLineItemGrid.startEditing(0, 0);
          }
      }]
    });

 /////////////////// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:04:24.113

来自单元选择模型的文档：[http ://docs.sencha.com/ext-js/2-3/#!/api/Ext.grid.CellSelectionModel](http://docs.sencha.com/ext-js/2-3/#!/api/Ext.grid.CellSelectionModel)

单元模型被指定为默认值。

```
getSelectedCell( ) : Array
Returns the currently selected cell's row and column indexes as an array (e.g., [0, 0]). 
```

所以......像

```
 { text: 'Remove', 
  tooltip:'Remove the selected item',
  handler: function(){ 
  iLineItemGrid.stopEditing();
  var r = iLineItemGrid.getSelectionModel().getSelectedCell();
  iLineItemStore.removeAt(r[1]); } } 
```

# iphone - 如何将ICarousel设置为一张一张图片滑动一次

> ID：10638631
> 
> 赞同：3
> 
> 时间：2012-05-17T15:23:11.800
> 
> 标签：iphone, ipad, icarousel

我正在使用 ICarousel 制作我的电子相册。当您滑动相册时，ICarousel 的默认设置是它会移动一段距离。我需要的是只为一张图片滑动一次。我发现 ICarousel 不是基于 ScrollView 的，所以我不知道如何实现我的目的，有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-06T17:01:25.777

使用最新版本的 iCarousel 更新了答案：

> iCarousel 现在通过设置 pagingEnabled=YES 支持单页滑动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T18:49:31.053

我建议关闭本机滚动并附加一个使用*scrollByNumberofItems*方法的 PanGestureRecognizer。

```
[iCarousel setScrollEnabled:NO]; 
```

然后在你的gestureRecognizer里面：

```
[iCarousel scrollByNumberOfItems:1 duration:0.25]; 
```

我自己试过这个，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:50:49.837

看来您必须使用由同一作者实现的另一个名为 SwipeView 的库。

发现问题here。 [https://github.com/nicklockwood/iCarousel/issues/247](https://github.com/nicklockwood/iCarousel/issues/247)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T13:50:48.620

我通过设置实现了 iCarouselTypeCoverFlow 类型：

```
//In ViewController.m
self.carousel.pagingEnabled = YES;

//In iCarousel.m change for smooth animation
-(void)scrollByOffset:(CGFloat)offset duration:(NSTimeInterbal)duration{
    if (duration > 0.0)
    {
        _decelerating = NO;
        _scrolling = YES;
        _startTime = CACurrentMediaTime();
        _startOffset = _scrollOffset;
//        _scrollDuration = duration;
// set constant duration instead
        _scrollDuration = 1.0;
        _endOffset = _startOffset + offset;
        if (!_wrapEnabled)
        {
            _endOffset = [self clampedOffset:_endOffset];
        }
        [_delegate carouselWillBeginScrollingAnimation:self];
        [self startAnimation];
    }
    else
    {
        self.scrollOffset += offset;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-03T06:58:39.863

修改 iCarousel 源代码 iCarousel.m 文件可以做到这一点！

```
- (void)didPan:(UIPanGestureRecognizer *)panGesture {

 ......

     case UIGestureRecognizerStateChanged: {
            CGFloat translation = _vertical? [panGesture translationInView:self].y: [panGesture translationInView:self].x;

            translation = translation * 0.35; // Add This line to change the really translation.

            ......
     }
} 
```

那解决了我的问题，希望能帮到你！</p>

# javascript - 如何更新到 addEventListener？

> ID：10638634
> 
> 赞同：6
> 
> 时间：2012-05-17T15:23:16.830
> 
> 标签：javascript, dom-events, addeventlistener

我即将更新我的代码以使用`addEventListener()`仅写入 Javascript 中的元素属性。

在我这样做之前，我想验证一些事情。

1.  我假设我不必调用`removeEventListener()`，如果我更新 DOM 并删除元素（通过`.innerHTML`write）。

2.  `addEventListener`支持流行的现代浏览器 - IE9、Chrome、Firefox、Safari

3.  现代浏览器上不会出现其他问题。

我问是因为我不想急于更新我的代码。

**笔记：**

属性与事件相关性（删除 on ）。

*   onkeypress - 按键
*   onblur -> 模糊
*   onfocus -> 聚焦

**研究**

[https://developer.mozilla.org/en/DOM/element.addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)（有兼容性图表）

[http://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)

**有关的**

[JavaScript 侦听器，“按键”不检测退格？](https://stackoverflow.com/questions/4843472/javascript-listener-keypress-doesnt-detect-backspace)

**笔记**

*   而不是返回false。用于`preventDefault()`阻止表单在输入时提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:52:02.917

1) 您不需要为此调用 removeEventListener，但如果您删除通过 addEventListener 附加到 eventListener 的 DOM 元素，则需要调用 removeEventListener ，**如果**您删除它的任何子元素，则不需要删除任何内容。

2) 所有主流浏览器都支持 addEventListener

3) 现代浏览器上没有其他与 addEventListener 相关的问题

4) onkeypress 不是事件名称而是属性，事件名称为keypress。其他名称相同*

避免使用 jQuery 以实现跨浏览器兼容性的快速代码：

```
Element.prototype.on = function(evt, fn) {
if (this.addEventListener)
    this.addEventListener(evt, fn, false);
else if (this.attachEvent)
    this.attachEvent('on' + evt, fn);
};

Element.prototype.off = function(evt, fn) {
    if (this.removeEventListener)
        this.removeEventListener(evt, fn, false);
    else if (this.detachEvent)
        this.detachEvent('on' + evt, fn);
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T15:55:06.500

1.  你不必。如果您不存储对 DOM 元素的引用（例如在意外的全局变量中），垃圾收集器应该清理它。

2.  那就是浏览器支持。对于较旧的 IE，有`attachEvent()`几乎*相同*的功能。

3.  没有什么你应该担心的。这是现代的方式。

**注意：**你可能想使用[jQuery](http://jquery.com/)来制作跨浏览器的东西。如果可能的话，它使用的引擎盖下`addEventListener`，可以回退到`attachEvent`旧的 IE 并且还[标准化你的事件对象](http://api.jquery.com/category/events/event-object/)，所以你不必担心差异。它也非常适合 DOM 操作和遍历。

# vim - vim：搜索和替换“&”

> ID：10638635
> 
> 赞同：17
> 
> 时间：2012-05-17T15:23:30.027
> 
> 标签：vim

为了在从当前行到另外 30 行的范围内将每次出现的“&”替换为“&&”，我发出`:.,+30s/\\&/\\&\\&/g`但 Vim 说“找不到模式”。我通过双反斜杠“\”转义特殊字符“&”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T15:28:58.037

您不需要在正则表达式的第一部分转义 & 符号。它仅在第二（替换）部分具有特殊含义。

您正在寻找显示“\&”的模式并将其替换为显示“\&\&”的模式。

替换的简单方法是：

```
:.,+30s/&/&&/g 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-17T15:27:02.010

尽量不要逃避一切 -`:.,+30s/&/&&/g`似乎对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-12T16:12:51.263

如果您需要更改**&**的位置，例如：`_&`到**&**必须在替换表达式的替换语句中转义，`&_`这也是有用的注释：

 **```
:.,+30s/ &/\& /g
           ^ 
```**

# node.js - node-http-proxy 路由器表中的通配符

> ID：10638636
> 
> 赞同：3
> 
> 时间：2012-05-17T15:23:32.553
> 
> 标签：node.js, node-http-proxy

有人可以告诉我如何在 node-http-proxy 的路由器表中使用通配符吗？

例如对于通配符子域，例如 *.domain.de
我知道使用了 RegEx，但我无法让它工作。
我试过了

```
'([a-zA-Z0-9_]).domain.de': '127.0.0.1:8085', 
```

和

```
 '([^.]*).domain.de' : '127.0.0.1:8085' 
```

但似乎没有人重定向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:22:42.797

我自己没有这样做，但我认为整个字符串需要是一个正则表达式。所以它会是这样的：

```
'[a-zA-Z0-9_]\.domain\.de': '127.0.0.1:8085', 
```

注意点的转义。事实上，如果该格式正确，这会更简单（尽管可能不那么安全）：

```
'.*\.domain\.de': '127.0.0.1:8085', 
```

甚至：

```
'\w*\.domain\.de': '127.0.0.1:8085', 
```

可悲的是，和往常一样，你应该“了解”这些东西——主要是通过阅读源代码:(这是让我在现实世界中无法使用 Node 的关键问题之一。

# javascript - 将下拉列表框转换为 UL LI？

> ID：10638638
> 
> 赞同：2
> 
> 时间：2012-05-17T15:23:50.113
> 
> 标签：javascript, jquery, css, drop-down-menu

我在这里有一个下拉列表框：

```
<select class="CountrySelectList" name="CountrySelectList" id="CountrySelectList" onchange="self.location='setlocale.aspx?returnURL=Default.aspx&amp;localesetting=' + document.getElementById('CountrySelectList').value" size="1">
    <option value="de-DE">Deutsch</option>
    <option selected="" value="en-US">English</option>
    <option value="fr-FR">Francais</option>
    <option value="it-IT">Italiano</option>
    <option value="es-ES">Español</option>
    <option value="pt-PT">Português</option>
    <option value="cs-CZ">Czech Republic</option>
    <option value="pl-PL">Polska</option>
    <option value="hu-HU">Hungary</option>
</select> 
```

将其转换为项目符号列表的最佳方法是什么，以便我可以像这样连续显示它们：（我的示例没有反映 dd- 但你明白了）

我想使用 jquery 还是 javascript？

```
UK | DE | CZ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:47:14.487

巴兹是对的。这不是最佳选择，但也许您别无选择？

```
var countryArr = [];
var $ul = $('<ul />');
countryArr = $('#CountrySelectList option').map(function() {
    return this.value
}).get();
$.each(countryArr, function() {
    $ul.append('<li>' + this.slice(3));
});
$('body').append($ul); 
```

**[小提琴](http://jsfiddle.net/uZRqM/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:29:59.210

*你不应该这样做。*您的 Javascript 将在每次页面加载时运行，从而不必要地浪费资源。

编写新标记不需要太多时间，这**是一个链接列表**，您可以轻松地使用 CSS 设置样式，使其看起来像您需要的那样。当您需要页面中的链接列表时，为什么要在标记中包含表单元素？

```
<ul id="CountrySelectList" class="CountrySelectList">
    <li>
         <a href="setlocale.aspx?returnURL=Default.aspx&amp;localesetting=de-DE">DE</a>
    </li>
    <li>
         <a class="selected" href="setlocale.aspx?returnURL=Default.aspx&amp;localesetting=en-US">US</a>
    </li>
    ...
</ul> 
```

[这是一个简单的 jsFiddle 演示](http://jsfiddle.net/aKK7D/1/)

# php - linux上的php apache

> ID：10638640
> 
> 赞同：0
> 
> 时间：2012-05-17T15:23:53.470
> 
> 标签：php, linux, apache

我的 PHP 应用程序和所有文件都归 www-data 所有，但是我目前使用我的用户名 ruser 登录到服务器。我正在同一台机器上开发，所以每次我想测试对我的 php 代码的更改时，我都必须在文件所有者之间来回切换。

这是最佳实践，还是有其他方法可以设置它以使我的开发更顺畅？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:25:28.723

使您的用户成为 www-data 组的一部分，或使 www-data 用户成为您组的一部分。然后授予组访问您的文件的权限：

```
usermod -a -G www-data yourusername 
```

就最佳实践而言，无论如何您都应该在不同的机器上进行开发。然后部署您的代码并使用脚本来设置适合您项目的任何安全配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:30:38.697

有几个选项可供您选择。

**1）**您可以将所有文件更改为 www-data 组，同时保持它们归您所有

从您网站的根目录运行：

> chmod -R ruser:www-data ./*

**2)**如果您的发行版支持，最好的方法是设置 ACL：http: [//bit.ly/Lat25d](http://bit.ly/Lat25d)

**3）**或者最简单的方法（仅在开发机器上 - 不要在实时服务器上执行此操作）是将站点根目录中的所有内容更改为 777

> chmod -R 777 ./*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:27:49.177

您可以将文件更改为由任何用户拥有，即使用以下命令：chown username:groupname file.php

仅当 Apache 将写入文件或覆盖文件时，才要求 Apache 拥有这些文件。

因此，将所有权更改为 FTP 用户，以避免不断更改所有权。

# c# - ASPxGridView 在调整大小时改变高度，可能吗？

> ID：10638649
> 
> 赞同：2
> 
> 时间：2012-05-17T15:24:12.847
> 
> 标签：c#, asp.net, devexpress, aspxgridview

我有一个 ASPxGridView 与 SettingsPager 设置为

```
Mode = ShowAllRecords, PageSize = 100000, CurrentPageNumberFormat = '', Visible = False 
```

我想要的是用滚动条显示所有记录并且根本没有页面大小。

当包含父 DIV 标记调整大小时，网格也应该调整它的高度。目前，我看到了一些记录，与父 div 的大小一样多。但是，当我调整大小时，我仍然在顶部和底部看到相同数量的记录和空的灰色部分。如果网格没有页面大小，我应该只能看到下面的行，对吧？

### 编辑：

这是我尝试过的 -

```
grid.setHeight(newHeight);
grid.AdjustControls(); 
```

还有[这里](http://www.devexpress.com/Support/Center/e/E1081.aspx)提到的解决方案，它可以很好地设置初始高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:35:35.803

在 DevExpress 网站上查看[此示例](http://devexpress.com/Support/Center/p/E1081.aspx)以执行您想要的操作。

**编辑：**要在调整包含的大小时做同样的事情`div`，而不仅仅是浏览器窗口，请将 JavaScript 代码更改为：

```
<script type="text/javascript">
    function adjustSize(newHeight) {
        grid.SetHeight(newHeight);
    }
</script> 
```

然后，在调整容器 div 高度大小的 JavaScript 中，调用`adjustSize(newHeight)`以调整网格的大小以匹配。

或者，更简单地说，只需调用`grid.SetHeight(whateverSize)`用于调整`div`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:06:53.027

有必要在以下位置指定/更正高度：

*   控制初始化；

*   窗口调整大小。

使用以下示例中的建议来完成此任务：

[如何在全屏模式下使用 ASPxPageControl 控件](http://devexpress.com/Support/Center/p/E3940.aspx)

[根据浏览器窗口高度更改客户端的 VerticalScrollableHeight](http://devexpress.com/Support/Center/p/E1081.aspx)

# android - Android 如何从相机捕获两个连续的帧

> ID：10638650
> 
> 赞同：3
> 
> 时间：2012-05-17T15:24:18.723
> 
> 标签：android

我正在尝试在 android 设备上编程光流。我的问题是从相机中获取两个连续的帧。

这是获得一帧的代码。

```
mCamera.setPreviewCallback(new PreviewCallback() {
        public void onPreviewFrame(byte[] data, Camera camera) {
            synchronized (SampleViewBase.this) {
                mFrame2 = data;
                SampleViewBase.this.notify();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:45:39.950

难道你不能这样做：

```
private byte[] currFrame;
private byte[] prevFrame;    

private void copyFrame(byte[] a){
        if(a != null) prevFrame = a;
}

mCamera.setPreviewCallback(new PreviewCallback() {
            public void onPreviewFrame(byte[] data, Camera camera) {
                synchronized (SampleViewBase.this) {
                    copyFrame(currFrame);              
                    currFrame = data;
                    SampleViewBase.this.notify();
                }
            }
        }); 
```

我不确定这是正确的 Java 语法，但只是`currentFrame`在分配`data`给它之前复制 , 。无论如何，我认为您也可以使用`VideoCapture`该类来获取已经采用`Mat`格式的帧。我不确定这个类在最新版本中是否仍然可用，但根据我对 Opencv 2.3 的经验，使用它来抓取相机帧比使用 Android 相机要快得多。

# java - 在java中通过字符串连接生成查询——变量值不被替换

> ID：10638653
> 
> 赞同：0
> 
> 时间：2012-05-17T15:24:26.323
> 
> 标签：java, database, csv, concatenation

我将以下代码作为从 CSV 文件读取并通过生成插入语句并执行它们将其内容存储到 DB 的方法的一部分。

```
 ....
 try 
    {
        while( (strLine = br.readLine()) != null)
        {
            query = baseQuery;
            st = new StringTokenizer(strLine, ",");   
            while(st.hasMoreTokens())
            {
                token = st.nextToken();
                if("TIMESTAMP".equals(values.get(tokenNumber)))
                    query += "'" + GeneralMethods.dateFormat(token) + "' , ";
                else
                    query += "'" + token + "' , ";
            }
            query = query.substring(0, query.length()-2) + ")";
            ds.insertData(query );
        }
    } catch (IOException e) 
    {            
        logger.error("IOException Occured while trying to read lines of CSV file: \n  " + e.getMessage());
        status = false;
    } 
```

一切正常，除了查询是用空值生成的。这将打印到日志中：

```
Failed to execute query: INSERT INTO c1_ds1 ( TIME , USER ) VALUES ('' , '' ) 
```

我相信问题出在这两行：

```
if("TIMESTAMP".equals(values.get(tokenNumber)))
                    query += "'" + GeneralMethods.dateFormat(token) + "' , ";
                else
                    query += "'" + token + "' , "; 
```

我已经在日志中打印了 (token) 变量，并且它正在从 CSV 文件中获取它应该做的值。有谁知道问题出在哪里？

我也试过这个：

```
query += "'"; query += token; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:27:23.360

查看[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)而不是通过字符串连接您的查询。这将让 DB 驱动程序为您处理转义和转换值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:29:17.747

具体有两种可能：

*   要么`token`是空的；或者
*   `GeneralMethods.dateFormat(token)`被调用并返回一个空字符串。

要找出它是什么，要么打印出更多诊断信息，要么使用调试器。

PS 一点一点地构建 SQL 查询是一种非常[不安全的做法](http://xkcd.com/327/)，因为您为[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击和其他问题敞开了大门。我强烈建议您重写代码以使用[`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html).

# clojure - 如何使用 lein 管理依赖项的依赖关系？

> ID：10638658
> 
> 赞同：2
> 
> 时间：2012-05-17T15:24:50.817
> 
> 标签：clojure, leiningen

我应该创建一个本地存储库来更改项目中依赖项的依赖项吗？

我有一个使用 docjure 的 clojure 项目。docjure 包含对 poi 3.6 的依赖项。

由于我正在阅读的生成的 Excel 文件中存在错误，我有一个 poi 3.8 的本地版本，我破解了该版本以解决该错误。

将我的 poi 3.8 jar 粘贴到我的项目 lib/ 目录中很容易，这样我的项目就可以在 repl 上运行。

但是，lein deps（或 jar 和 uberjar）愉快地清理了 lib/ 目录并重新安装了 poi 的 3.6 版本，从而破坏了我的构建。

我认为可能的解决方案有两个：

1 - 将我被黑的 poi 3.8 放入本地存储库 2 - 创建我自己的 docjure 本地副本并更新它的依赖项以指向该本地存储库。

我正在寻找确认在这种情况下这是“正确的事情”，或者有人指出做其他事情要容易得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:35:06.183

如果您还没有阅读 Leiningen 的可[重复性](https://github.com/technomancy/leiningen/wiki/Repeatability)wiki 页面，那么值得一读。引用其中的一部分：

> 如果代码是公开的，您应该向上游打开一个错误报告，让他们根据项目将其发布到 Clojars、Sonatype 或 Maven Central 等公共存储库中。如果他们有抵抗力或太慢，总是可以发布“Clojars forks”；有关详细信息，请参阅 lein help deploying。

最终的解决方案是尝试将您的更改推送到上游。然后你可以依赖你需要的版本，如果它比传递版本更高，我*认为Leiningen 会更喜欢那个版本。*

* * *

另一种选择可能是将您的 jar 包含在安全（签入）目录中。然后编写一个可以[挂钩到内置任务](https://github.com/technomancy/leiningen/blob/preview/doc/PLUGINS.md#hooks)的插件，并为您将 jar 复制到您的 lib 目录。我真的不知道这是否会成功，但值得研究。

# jquery - 在切换一定数量后选择最旧的切换类

> ID：10638660
> 
> 赞同：0
> 
> 时间：2012-05-17T15:25:01.037
> 
> 标签：jquery, jquery-isotope

我正在使用 Isotope 并希望制作一个正方形元素网格，单击时会放大到更大的尺寸。这一切都很好，但是我想确保在任何时候都只放大一定数量的元素。因此，例如，如果 3 是允许的最大值，那么当单击第四个元素时，第一个被放大的元素会再次缩小。

是否有任何明显的 jQuery 方法来跟踪这个，或者在同位素中确实有一些东西？我可以使用

```
$('.large-element').length; 
```

但是我不知道有任何明显的方法可以跟踪类切换的顺序。我猜数组也是一个不错的解决方案，但我对 JS 数组非常绝望。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:47:23.847

这是一个使用 JS 数组跟踪项目点击的工作示例：

```
<html>
    <head>
        <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
        <script type="text/javascript">
            var largeArr = [];

            $(document).ready( function() {

                $("div.item").click( function() {
                    if (largeArr.length == 3) {
                        largeArr[0].removeClass("item-large");
                        largeArr.shift();  
                    }
                    var item = $(this).addClass("item-large");                                                
                    largeArr.push(item); 
                });
            });
        </script>
        <style type="text/css">
            .item-large {
                font-size: 14px;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div class="item">Item 1</div>
        <div class="item">Item 2</div>
        <div class="item">Item 3</div>
        <div class="item">Item 4</div>
        <div class="item">Item 5</div>
    </body>
</html> 
```

这是它的一个[JSFiddle](http://jsfiddle.net/jwatts1980/Sqazu)。

# c# - 为什么它不起作用（C# 中的 SQL 命令？

> ID：10638661
> 
> 赞同：0
> 
> 时间：2012-05-17T15:25:04.153
> 
> 标签：c#, sql, sql-server-express

我想问你为什么这段代码不起作用？它没有任何错误，甚至 cmd.ExecuteNonQuery(); 返回1（如果在数据库中更改了一行），但在实际数据库中，绝对没有变化。对于其他数据库表，此代码可以正常工作，但我也无法从该表中删除一行 - 如果是“只读”，它的行为就像它一样，但我不知道为什么 - 昨天，一切正常并且现在，它突然停止工作:-(

```
string sConnectionString;

                sConnectionString = "Data Source=.\\SQLEXPRESS; AttachDbFilename=\"" + zdielaneInfo.Adresar + "\\rozvrh.mdf\";";
                sConnectionString += "Integrated Security=True;User Instance=True";
                SqlConnection objConn
                    = new SqlConnection(sConnectionString);
                objConn.Open();

                SqlCommand cmd = new SqlCommand("", objConn);
                if (zdielaneInfo.Edit)

                    cmd.CommandText = "UPDATE subject " +
                                        "SET name = @name, day = @day, timeStart = @timeStart, timeEnd = @timeEnd "
                                        + "WHERE id = @id";
                else
                    cmd.CommandText = "INSERT INTO subject (name, day, timeStart, timeEnd) " +
                                         "Values (@name, @day, @timeStart, @timeEnd)";
                cmd.Parameters.Add(new SqlParameter("@name", txbName.Text));
                cmd.Parameters.Add(new SqlParameter("@day", dniNaInt(cbDen.Text)));
                cmd.Parameters.Add(new SqlParameter("@timeStart", DateTime.Parse(txbStart.Text)));
                cmd.Parameters.Add(new SqlParameter("@timeEnd", DateTime.Parse(txbEnd.Text)));
                cmd.Parameters.Add(new SqlParameter("@id", zdielaneInfo.Id));
                cmd.ExecuteNonQuery();
                objConn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:29:32.617

也许桌子被锁定了。

从[这里](https://stackoverflow.com/questions/599453/find-locked-table-in-sql-server)，试试这个：

```
select  
    object_name(P.object_id) as TableName, 
    resource_type, resource_description
from
    sys.dm_tran_locks L
    join sys.partitions P on L.resource_associated_entity_id = p.hobt_id 
```

如果您的表格在结果集中，您就有答案了。

* * *

另一种可能性是您用来运行的用户。也许他的特权被撤销了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:50:19.167

您的问题看起来像 mdf 文件覆盖问题。

您正在访问放置在调试文件夹中并在每次运行应用程序时替换的 mdf 文件。

确保在您的项目中，如果您的解决方案中附加了数据库，则不会覆盖它。因此，在解决方案资源管理器中选择 mdf 文件并确保其“复制到输出”设置为“不复制”，然后手动将 mdf 文件复制到 project\bin\debug 文件夹，然后运行应用程序。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:01:37.600

停止使用用户实例 / attachdbfilename 选项（[用户实例已弃用](http://msdn.microsoft.com/en-us/library/ms143684.aspx)！）。在真正的 SQL Server 上创建数据库，然后使用连接字符串直接连接到它。使用这个不推荐使用的功能意味着每次启动程序时，您都会从数据库的*新*副本开始，而您昨天插入的内容不再存在 - 如果您使用来自两个不同应用程序的连接字符串连接到数据库，一个人不会看到另一个人正在改变的数据。

# java - 解密无法正常工作

> ID：10638675
> 
> 赞同：0
> 
> 时间：2012-05-17T15:25:51.383
> 
> 标签：java, java.util.scanner

我的解密程序无法正常工作...

```
 public static void decipherMessage() { 

    Scanner sc = new Scanner(in);

    System.out.println("Enter keyword: "); 
    String decipher = sc.nextLine(); 

    String plain = ("abcdefghijklmnopqrstuvwxyz"); 
    String cipher = decipher + "abcdefghijklmnopqrstuvwxyz";

    System.out.println("Enter enciphered message: ");
    String ciphMsg = sc.nextLine(); 

    String decipherMessage = ciphMsg.toLowerCase();

    char[] chars = cipher.toCharArray();
    Set<Character> charSet = new LinkedHashSet<Character>(); 

    for (char c : chars) {
        charSet.add(c);
    }

    StringBuilder cMap = new StringBuilder();
    for (Character character : charSet) {
        cMap.append(character);
        StringBuilder original = cMap;

    }
    for (int i = 0; i < 26; i++)
    {
        char cipherTextChar = cMap.charAt(i);
        char plainTextChar = plain.charAt(i);

        decipherMessage = decipherMessage.replace(cipherTextChar,plainTextChar); 

        System.out.println("Deciphered message");  
        System.out.println(decipherMessage);

    } 
```

纯文本字母应该替换加密字母

但是当我运行它时，它只是再次给出加密消息而不解密？

例子。

```
keyword: stack

plain : abcdefghijklmnopqrstuvwxyz

cipher: stackbdefghijlmnopqruvwxyz

message: overflow

ciphered message: mvhpbimw 
```

除非反过来。使用我在上面显示的代码，它只是再次给出加密消息，而不解密任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:56:00.130

您的代码确实替换了字符，只是不正确（假设`deciphMsg`和`decipherMessage`上面的用法是错字。它们应该是同一个变量。）

一个问题是您一次要替换一个*密码*字符。

例如，如果我的密码是“b”，它应该切换所有的 a 和 b，但如果我给它字符串

```
abababababab 
```

首先它将用 b 的捐赠替换所有的 a

```
bbbbbbbbbbbb 
```

然后用a替换所有b：

```
aaaaaaaaaaaa 
```

这不是预期的结果。

该解决方案基本上归结为一次替换一个*消息*字符。为此，您必须遍历该消息。您还可以使用地图来提高效率。

# asp.net-mvc - 在这种情况下如何定义带有两个参数的路由？

> ID：10638676
> 
> 赞同：0
> 
> 时间：2012-05-17T15:25:59.137
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, controller, asp.net-mvc-routing

我正在将 ASP.NET MVC3 与 Razor 一起使用，并希望定义一个允许我接收此类 URL 的路由。注意我是 MVC3 的新手：

```
/State/Florida/Town/Fort_Lauderdale
/State/Texas/Town/Irvine
/State/Alabama/Town/Auburn 
```

我希望现有的“States”控制器（StatesController 类）使用“Town”操作来处理它。我有这样的事情：

```
routes.MapRoute(
   "Towns",
   "{controller}/{state}/{action}/{town}",
   new { controller = "States", action = "Town", state= UrlParameter.Optional, town = UrlParameter.Optional } 
```

显然，州和城镇参数都不是可选的，我该怎么做？我不认为上面的路线是正确的，有没有办法表明该参数不是可选的？

这里的另一种情况是，虽然上面我假装在控制器 Town（字符串城镇）中通过单个操作来处​​理城镇，但我仍然需要能够使用 Razor 解析各个城镇文件。我最初想使用 Town() 控制器方法来使用 town 参数来提供城镇的 HTML 文件，但事实证明，我还希望能够获得有关城镇描述的动态数据。这是否意味着我最好的解决方案是创建一个专用的城镇控制器并为每个城镇创建一个操作方法？

有什么建议可以更好地处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:35:43.947

只需删除 UrlParameter.Optional

```
routes.MapRoute(
    "Towns",
    "{controller}/{state}/{action}/{town}",
    new { controller = "States", action = "Town" } 
```

我只想找一些更明确的东西，比如：

```
routes.MapRoute(
    "Towns",
    "State/{state}/Town/{town}",
    new { controller = "States", action = "Town" } 
```

确实，上一个中有一个错字（基于您发布的那个），因为控制器默认是状态，而 URL 是状态。

# c# - 使用 DataSet 解析 XML - 性能

> ID：10638679
> 
> 赞同：0
> 
> 时间：2012-05-17T15:26:10.893
> 
> 标签：c#, xml

根据我的要求，我想在我的 UI 中显示一些产品相关信息。

所有信息都来自一个 API URL。API 返回 XML 输出。XML 可能有超过 100 个标签。但根据我的要求，我只想要 30 到 50 个标签。这里我需要传递参数作为输入并获取产品信息。

我使用 .asmx 服务作为包装服务，所有的解析过程都在这里完成。

在页面后面的代码中，我使用服务并显示信息。

如何解析 XML？目前我打算做的是XML to DataSet-(ds.ReadXml(XML))

会影响性能吗？还有其他办法吗？请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:29:40.970

我会用`LINQ to XML`

更多信息在

[http://msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

对于旧版本的框架，请使用`XmlTextReader`

*使用 XmlTextReader 类以一种有效的、仅向前的方式处理大型 XML 文档。XmlTextReader 使用少量内存 避免使用 DOM，因为 DOM 将整个 XML 文档读入内存。如果将整个 XML 文档读入内存，应用程序的可伸缩性就会受到限制。将 XmlTextReader 与 XmlTextWriter 类结合使用允许您处理比基于 DOM 的 XmlDocument 类大得多的文档。*

[http://msdn.microsoft.com/en-us/library/ff647804.aspx](http://msdn.microsoft.com/en-us/library/ff647804.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:30:08.977

如果您想将结果绑定到控件，那么数据集方法（由您指示）是有意义的。但是，如果您需要这 30 / 50 个标签的文本值而没有父/子节点之间的内容，则可以使用 XmlDocument/XPath

# gzip - 通过PHP Gzip压缩到html网站

> ID：10638690
> 
> 赞同：0
> 
> 时间：2012-05-17T15:26:37.040
> 
> 标签：gzip

我的网站是 html 格式，我想启用 gzip 压缩，我的服务器通过 PHAR 扩展提供了 gzip 压缩。

你能指导我如何做 gzip 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T01:57:06.053

我更喜欢在 .htaccess 中启用 GZIP，假设您的主机允许您更改/添加 .htaccess 文件。如果他们这样做，我会写关于[如何启用 GZIP](http://salscode.com/web-resources/gzip-htaccess)：

```
#Gzip
<ifmodule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript text/javascript
</ifmodule>
#End Gzip 
```

# c++ - C++ 中对错误的未定义引用（使用单例类）

> ID：10638691
> 
> 赞同：1
> 
> 时间：2012-05-17T15:26:42.720
> 
> 标签：c++

我创建了一个名为 Client 的类，定义如下 client.h：

```
#ifndef __CLIENT_H__
#define __CLIENT_H__

#include <string>

using namespace std;

class Client {
public:
    Client(string n, string p) : name(n), password(p) {logged_in = true;}
    void set_name(string n, string p) {name=n; password=p; }
private:
    string name;
    string password;
    bool logged_in;
};

#endif 
```

然后我在 admin.h 中从名为 Admin 的客户端继承了一个单例类：

```
#ifndef __ADMIN_H__
#define __ADMIN_H__

#include "client.h"

using namespace std;

class Admin : public Client {
public:
    static Admin* get_admin(string n, string p)
    {
        if (Admin::n == 0)
            Admin::admin = new Admin(n, p);
        else
            Admin::admin->set_name(n, p);
        return Admin::admin;
    }
private:
    Admin(string n, string p) : Client(n, p) {Admin::n++;}
    static int n;
    static Admin* admin;
};

int Admin::n = 0;

#endif 
```

这是我的 main.cpp：

```
#include <iostream>
#include <string>
#include "client.h"
#include "admin.h"

using namespace std;

int main()
{
    Admin* administrator = Admin::get_admin("ghamar", "utcom90");
} 
```

问题是，当我想使用 g++ (g++ main.cpp) 编译 main.cpp 时，出现以下错误：

```
/tmp/cc15VnHc.o: In function `Admin::get_admin(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)':
main.cpp:(.text._ZN5Admin9get_adminESsSs[Admin::get_admin(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)]+0x5f): undefined reference to `Admin::admin'
main.cpp:(.text._ZN5Admin9get_adminESsSs[Admin::get_admin(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)]+0xa0): undefined reference to `Admin::admin'
main.cpp:(.text._ZN5Admin9get_adminESsSs[Admin::get_admin(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)]+0xd1): undefined reference to `Admin::admin' 
```

错误的重要部分说：

```
undefined reference to 'Admin::admin' 
```

有人可以帮我解决这个问题吗？非常感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:30:23.780

除了在类定义中声明静态成员外，您还需要在一个源文件中定义它们：

```
#include "admin.h"

int Admin::n = 0;
Admin* Admin::admin = 0; 
```

You should remove the definition of `n` from the header; that will give "multiple definition" errors if you include the header from more than one source file. The `= 0` bits are optional, since static objects are zero-initialised by default.

You should also remove the underscores from the start of the include guards; those are reserved, and using them could cause conflicts with names used by the standard library implementation.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:31:11.343

You have two problems here, and are only seeing the errors for one so far.

You need to define `Admin::n` and `Admin::admin` in a single source file. Currently the former is defined in a header (which will cause multiple-definition errors once more than one source file includes that header), and the latter is not defined at all.

Remove the definition of `Admin::n` from admin.h, and add the following to a single source file:

```
#include "admin.h"

int Admin::n = 0;
Admin* Admin::admin = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:29:19.880

您已声明`admin`，但未定义它（但您已定义`n`）：

```
int Admin::n = 0; 
Admin* Admin::admin;    // <-- add this 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T15:29:52.567

您需要`Admin`在类外部定义，因为它是静态的。

```
Admin* Admin::admin = NULL; 
```

# javascript - 数字后加空格

> ID：10638699
> 
> 赞同：1
> 
> 时间：2012-05-17T15:27:02.827
> 
> 标签：javascript, html

```
<select id="mySelect">
   <option>140 AAA</option>
   <option>141 BBB</option>
   <option>140 CCC</option>
   <option>140 EEE</option>
</select> 
```

我想用 JavaScript 在数字后添加几个空格。

**期望的输出**

```
<select id="mySelect">
   <option>140   AAA</option>
   <option>141   BBB</option>
   <option>140   CCC</option>
   <option>140   EEE</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:37:55.333

This method feels a bit, I dunno, icky. Howeve it's the first thing I can come up with in a pure JavaScript sense. Change the `10` to however many spaces you would like.

```
var selectEl = document.getElementById("mySelect");
for ( var i = 0; i < selectEl.options.length; i++ ) {
  var opt = selectEl.options[i];
  opt.innerHTML = opt.innerHTML.replace( /\s/, Array(10).join('&nbsp;') );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:31:14.327

您想要为最大长度属性输出一个填充字符串，还是只需要它来格式化和视觉效果？您可以在字符串的任一侧使用填充功能。

像这样的东西：

" " + day + " " 将在字符串中 day 的值的每一侧添加一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:32:04.077

如果您正在寻找数字和字母之间的更多填充，请尝试使用不间断空格。它将在 HTML 中显示为空格。

```
<option>140 &nbsp;&nbsp; EEE</option> 
```

如果您坚持使用javascript，请尝试使用jquery循环访问选项并调整它们

```
$('#mySelect > option').each (function ()
    {
    $(this).text ().replace (' ', ' &nbsp; '); 
    }); 
```

我没有测试过，但你明白了。

# bash - Bash - POST：在消息内容中发送图像

> ID：10638706
> 
> 赞同：1
> 
> 时间：2012-05-17T15:27:35.250
> 
> 标签：bash, post, bash4

我想使用 bash 脚本发送 POST 消息。在正文中应该有图像，但我不知道如何放置它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:36:29.053

您可以为此使用 cURL：

```
curl -F File=@/path/to/your/file http://your.url 
```

如果这不起作用，请在您的问题中添加更多详细信息。

# ajax - jQuery(document).ready() 不适用于 AJAX 加载的 jQuery-UI 小部件

> ID：10638707
> 
> 赞同：1
> 
> 时间：2012-05-17T15:27:37.293
> 
> 标签：ajax, jquery-ui, jquery

我正在使用 jQuery.ajax() 方法加载一些代码。在这段代码中，我想要一些 jQuery-UI 小部件（滑块和日历），但它们不会出现在 IE 中。

这里有一些示例代码，您可能可以帮助我理解我哪里出错了。

将加载 jQuery-UI 小部件的代码

```
<script>
jQuery(document).ready(function(){
  jQuery.ajax({
    type:'post',
    url: 'file.php',
    success: function (data) {
     jQuery('.somediv').empty().html(data); 
    }
  });
});
</script> 
```

加载的代码应该初始化 jQuery-UI 小部件

```
<script>
jQuery(document).ready(function(){
  jQuery('.datepicker-div').datepicker(someoptions);
  jQuery('.slider-div').slider(someoptions);
});
</script>
<div class="datepicker-div">
<div class="slider-div"> 
```

你可以看到它应该很简单。对于 FF 它工作正常，但不适用于 IE。

也许它与文档就绪声明无关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:30:56.357

只需在成功事件中调用初始化程序：

```
<script>
jQuery(document).ready(function(){
  jQuery.ajax({
    type:'post',
    url: 'file.php',
    success: function (data) {
      jQuery('.somediv').empty().html(data); 
      jQuery('.datepicker-div').datepicker(someoptions);
      jQuery('.slider-div').slider(someoptions);
    }
  });
});
</script> 
```

当然，您应该通过初始化函数来重构它：

```
function Initialize(){
  jQuery('.datepicker-div').datepicker(someoptions);
  jQuery('.slider-div').slider(someoptions);
} 
```

然后让你的成功调用它，以及`ready()`ebent：

```
<script>
jQuery(document).ready(function(){
  jQuery.ajax({
    type:'post',
    url: 'file.php',
    success: function (data) {
     jQuery('.somediv').empty().html(data); 
     Initialize();
    }
  });
});
</script> 
```

**更新**

我已经更仔细地阅读了你的问题，现在我完全理解了。你`ready()`在加载的代码中。那么你应该使用 jQuery 的[`load()`](http://api.jquery.com/load/)：

> ## ***脚本执行***
> 
> 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。两种情况的示例如下所示：
> 
> 在这里，作为文档的一部分加载到#a 中的任何 JavaScript 都将成功执行。
> 
> `$('#a').load('article.html');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:34:30.503

尝试在附加 html 之前删除脚本，然后将它们添加回来。

```
var outHTML = data.replace(/<script>/ig,"<div class='script'>").replace(/<\/script>/ig,"</div>");
outHTML = $(outHTML);
var script = outHTML.find("div.script").detach();
$(".somediv").html(outHTML);
var s = document.createElement("script");
s.textContent = script.text();
document.body.appendChild(s); 
```

编辑：

`.find("div.script")`可能需要`.filter("div.script")`根据您的 ajax 请求返回的内容进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:05:07.237

好的，我没有找到解决问题的方法，但我找到了解决方法。

解决方法非常简单。因为在除 IE 之外的每个浏览器中，通过 ajax 加载脚本都可以正常工作，我们必须识别 IE 并将行为更改为不加载脚本而是重定向到我想要加载的站点。我在 Joomla 2.5 中做这一切，所以有一些工作要做，但基本上是下面的代码解决了这个问题。

```
// preparing the url
// check for ie
if (jQuery.browser.msie) {
  window.location(url);
} else {
  // do the ajax
} 
```

# database - 在两个不同的 CMS 之间共享一张表，可能吗？

> ID：10638717
> 
> 赞同：1
> 
> 时间：2012-05-17T15:28:15.260
> 
> 标签：database, content-management-system

有没有办法在两个不同的 CMS 之间共享用户表？如果一个人在一个域中的一个 CMS 中注册，它将自动在另一个应用程序中注册，另一个域。
两个如何实现这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T18:40:43.137

除非有为此目的开发的插件，否则这是不可能的。

# python - 有人能解释一下python索引语法中的第三个表达式代表什么吗？

> ID：10638719
> 
> 赞同：1
> 
> 时间：2012-05-17T15:28:23.393
> 
> 标签：python

> **可能重复：**
> [Python Slice Notation 的良好入门](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

我昨晚第一次遇到它是为了反转一个字符串`"Hello"[::-1]`，但我不知道它是如何工作的。

```
"Hello"[::-1] # returns "olleH"
[1,2,3,4,5][::-1] # returns [5,4,3,2,1]
"Hello"[1:5:1] # returns "ello"
"Hello"[1:5:2] # returns "el" 
```

我对“python 索引中的第三个表达式”的搜索结果为空。这个表达式是什么以及它是如何工作的。显然 ::-1 颠倒了列表，但我无法弄清楚其他正值代表什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:50:05.300

实际上，第三个可选参数称为`step`or `stride`。它的默认值为**1**。

```
>>> 'hello'[::] # here the value of stride is 1, means take a step of one between two indexes
'hello'   

>>> 'hello'[::2] #take a step of 2 so starting from h -->l --> o 
'hlo'

>>> 'abcdef'[::-1] #negative step actually means 'abcdef'[-1:-len('abcdef')-1:-1]
'fedcba' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:31:51.703

在最后一个示例中，这些是与 step = 2 匹配的字符。

```
"Hello"[1:5:2] # returns "el"
  ^ ^ 
```

# sql-server-2008 - SQL Server 2008 OPENXML 插入

> ID：10638723
> 
> 赞同：1
> 
> 时间：2012-05-17T15:28:36.070
> 
> 标签：sql-server-2008, openxml

我有一个 XML 文档，其结构非常类似于基于架构的 Excel 电子表格。此文件中有两个工作表。如何将第二张工作表中的所有数据插入到我的 SQL 表中？我基本上想要直接导入，但 OPENXML 一直告诉我 0 行受影响。这是 XML 文档的示例：

```
<Worksheet ss:Name="Product Level Data">
<x:WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
<Print>
<ValidPrinterInfo/>
<PaperSizeIndex>1</PaperSizeIndex>
<Scale>100</Scale>
<FitWidth>1</FitWidth>
<FitHeight>1</FitHeight>
<HorizontalResolution>300</HorizontalResolution>
<VerticalResolution>300</VerticalResolution>
</Print>
<Zoom>100</Zoom>
<x:PageSetup>
<x:Header  ss:StyleID="systemtitle" Data="The SAS System"
/>
</x:PageSetup>
<Selected/>
<FreezePanes/>
<FrozenNoSplit/>
<SplitHorizontal>1</SplitHorizontal>
<TopRowBottomPane>1</TopRowBottomPane>
<ActivePane>2</ActivePane>
<Panes>
<Pane>
<Number>3</Number>
</Pane>
<Pane>
<Number>2</Number>
</Pane>
</Panes>
<ProtectObjects>False</ProtectObjects>
<ProtectScenarios>False</ProtectScenarios>
</x:WorksheetOptions>
<AutoFilter x:Range="R1C1:R545C10" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter><Table ss:StyleID="_body">
<ss:Column ss:AutoFitWidth="1" ss:Width="90"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="270"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="90"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="90"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="90"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="90"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="90"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="90"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="108"/>
<ss:Column ss:AutoFitWidth="1" ss:Width="108"/>
<Row ss:AutoFitHeight="1">
<Cell ss:StyleID="header__c" ss:Index="1"><Data ss:Type="String">ID</Data></Cell>
<Cell ss:StyleID="header__c" ss:Index="2"><Data ss:Type="String">Company Name</Data></Cell>
<Cell ss:StyleID="header__l" ss:Index="3"><Data ss:Type="String">Item</Data></Cell>
<Cell ss:StyleID="header__c" ss:Index="4"><Data ss:Type="String">Type</Data></Cell>
<Cell ss:StyleID="header__r1" ss:Index="5"><Data ss:Type="String">Total Time</Data></Cell>
<Cell ss:StyleID="header__r1" ss:Index="6"><Data ss:Type="String">Total Amount</Data></Cell>
<Cell ss:StyleID="header__r1" ss:Index="7"><Data ss:Type="String">Count Product</Data></Cell>
<Cell ss:StyleID="header__r" ss:Index="8"><Data ss:Type="String">Percentage Time</Data></Cell>
<Cell ss:StyleID="header__r" ss:Index="9"><Data ss:Type="String">Product Time</Data></Cell>
<Cell ss:StyleID="header__r" ss:Index="10"><Data ss:Type="String">Invalid Product Time</Data></Cell>
</Row>
<Row ss:AutoFitHeight="1">
<Cell ss:StyleID="data__l" ss:Index="1"><Data ss:Type="String">DF</Data></Cell>
<Cell ss:StyleID="data__l" ss:Index="2"><Data ss:Type="String">Dan's Fruit Company</Data></Cell>
<Cell ss:StyleID="data__l" ss:Index="3"><Data ss:Type="String">Apple</Data></Cell>
<Cell ss:StyleID="data__r" ss:Index="4"><Data ss:Type="String">Fruit</Data></Cell>
<Cell ss:StyleID="data__r1" ss:Index="5"><Data ss:Type="Number">2034004</Data></Cell>
<Cell ss:StyleID="data__r1" ss:Index="6"><Data ss:Type="Number">23423</Data></Cell>
<Cell ss:StyleID="data__r1" ss:Index="7"><Data ss:Type="Number">15789</Data></Cell>
<Cell ss:StyleID="data__r" ss:Index="8"><Data ss:Type="Number">100.0</Data></Cell>
<Cell ss:StyleID="data__r" ss:Index="9"><Data ss:Type="Number">0.000</Data></Cell>
<Cell ss:StyleID="data__r" ss:Index="10"><Data ss:Type="Number">0.000</Data></Cell>
</Row> 
```

这是我正在尝试的代码。这是我第一次尝试使用 OPENXML：

```
DECLARE @XMLDocPointer INT
, @strXML VARCHAR(10000)

SET @strXML = <large code block up there>

EXEC sp_xml_preparedocument @XMLDocPointer OUTPUT, @strXML

BEGIN TRANSACTION
INSERT INTO xml_staging_table
(
id
, company_name
, item
, type
, total_time
, total_amount
, count_product
, percent_time
, product_time
, invalid_product_time
)
SELECT id
, company_name
, item
, type
, total_time
, total_amount
, count_product
, percentage_time
, product_time
, invalid_product_time
FROM OPENXML(@XMLDocPointer,'/WORKSHEET/TABLE/ROW/CELL', 4) --What is the correct syntax here?
WITH 
(
id VARCHAR(10) 'id/.'
, company_name VARCHAR(500) 'company_name/.'
, item VARCHAR(10) 'item/.'
, type VARCHAR(50) 'type/.'
, total_time BIGINT 'total_time/.'
, total_amount BIGINT 'total_amount/.'
, count_product BIGINT 'count_product/.'
, percentage_time DECIMAL(5,2) 'percentage_time/.'
, product_time BIGINT 'product_time/.'
, invalid_product_time BIGINT 'invalid_product_time/.'
)
COMMIT

EXEC sp_xml_removedocument @XMLDocPointer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:40:51.777

不知道如何使用`OPENQUERY`- 这已被弃用，您应该直接使用[SQL Server 2005](http://msdn.microsoft.com/en-us/library/ms345122%28v=sql.90%29.aspx)和更新版本中的 XQuery 支持。

另外：您的 XML 不完整，因为它没有在`ss:`任何地方显示 xml 命名空间的定义 - 但忽略这一点 - 您应该能够使用如下 SQL 语句获取数据：

```
-- reduced huge XML to the actual relevant parts...
-- defined "dummy" XML namespace for ss: prefix
DECLARE @input XML = '<Worksheet ss:Name="Product Level Data" xmlns:ss="urn:test">
<Table ss:StyleID="_body">
  <Row ss:AutoFitHeight="1">
    <Cell ss:StyleID="data__l" ss:Index="1"><Data ss:Type="String">DF</Data></Cell>
    <Cell ss:StyleID="data__l" ss:Index="2"><Data ss:Type="String">Dan''s Fruit Company</Data></Cell>
    <Cell ss:StyleID="data__l" ss:Index="3"><Data ss:Type="String">Apple</Data></Cell>
    <Cell ss:StyleID="data__r" ss:Index="4"><Data ss:Type="String">Fruit</Data></Cell>
    <Cell ss:StyleID="data__r1" ss:Index="5"><Data ss:Type="Number">2034004</Data></Cell>
    <Cell ss:StyleID="data__r1" ss:Index="6"><Data ss:Type="Number">23423</Data></Cell>
    <Cell ss:StyleID="data__r1" ss:Index="7"><Data ss:Type="Number">15789</Data></Cell>
    <Cell ss:StyleID="data__r" ss:Index="8"><Data ss:Type="Number">100.0</Data></Cell>
    <Cell ss:StyleID="data__r" ss:Index="9"><Data ss:Type="Number">0.000</Data></Cell>
    <Cell ss:StyleID="data__r" ss:Index="10"><Data ss:Type="Number">0.000</Data></Cell>
  </Row>
 </Table>
</Worksheet>'

SELECT
    XmlCell.value('(.)[1]', 'varchar(50)')
FROM
    @Input.nodes('/Worksheet/Table/Row/Cell/Data') AS Nodes(XmlCell) 
```

这给了我一个输出：

```
DF
Dan's Fruit Company
Apple
Fruit
2034004
23423
15789
100.0
0.000
0.000 
```

**更新：**要处理“完整”输入XML ，并仅提取具有`StyleID`类似" 将其替换为我选择的内容 - 将其替换为您的实际 XML 命名空间作为前缀：`data....``ss:``ss:`

```
;WITH XMLNAMESPACES('urn:test' AS ss), 
XmlParsedData AS
(
SELECT
    CellStyle = XmlCell.value('@ss:StyleID', 'varchar(50)'),
    CellIndex = XmlCell.value('@ss:Index', 'int'),
    CellValue = XmlCell.value('(Data)[1]', 'varchar(50)')
FROM
    @Input.nodes('/Worksheet/Table/Row/Cell') AS Nodes(XmlCell)
)
SELECT *
FROM XmlParsedData
WHERE
    CelLStyle LIKE 'data%' 
```

这将为您提供如下输出：

```
CellStyle  CellIndex  CellValue
data__l        1      DF
data__l        2      Dan's Fruit Company
data__l        3      Apple
data__r        4      Fruit
data__r1       5      2034004
data__r1       6      23423
data__r1       7      15789
data__r        8      100.0
data__r        9      0.000
data__r       10      0.000 
```

# javascript - 如何在 knockout.js 中实现可计算的 observables

> ID：10638725
> 
> 赞同：0
> 
> 时间：2012-05-17T15:28:39.083
> 
> 标签：javascript, knockout.js

我想添加一些方法。`this`指令不能帮助我。

```
var viewModel = function () {
    firstName = ko.observable("Mike");
    lastName = ko.observable("Rassel")
    //fullName = ko.computed(function () { 
         //return firstName() + " " + lastName(); }, viewModel);
}

viewModel.fullName = ko.computed(function () { 
    return this.firstName() + " " + this.lastName(); }, viewModel); 
```

演示：http: [//jsfiddle.net/gJUqK/](http://jsfiddle.net/gJUqK/)

在本地与 2.1.0 它的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:53:30.273

`firstName`和`lastName`应该`fullName`是`myViewModel`实例的属性。

[如文档](http://knockoutjs.com/documentation/computedObservables.html)中所述，这将起作用。被`self`添加，因为在`fullName`可观察的回调函数内部`this`会指向别的东西。

```
function myViewModel()
{
    var self = this;

    this.firstName = ko.observable("Mike");
    this.lastName = ko.observable("Rassel");

    this.fullName = ko.computed(function() {
        return self.firstName() + ' ' + self.lastName();
    })
}

ko.applyBindings(new myViewModel()); 
```

在这里工作：http: [//jsfiddle.net/gJUqK/1/](http://jsfiddle.net/gJUqK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:42:38.577

部分问题在于，通过您调用的方式，`viewModel`绑定`this`到`fullName`函数的全局对象。

您可以通过创建`viewModel`构造函数并添加`fullName`到其原型来开始纠正此问题：

```
var ViewModel = function () {
  this.firstName = "Mike";
  this.lastName = "Rassel";
}

ViewModel.prototype.fullName = function () { 
  return this.firstName + " " + this.lastName; 
};

var view = new ViewModel(); // Call ViewModel with new
console.log(view.fullName()); // Prints "Mike Rassel" 
```

我不明白淘汰赛的东西，但希望这能让你更接近解决方案。

# tsql - T-SQL：空时从备用表中选择列

> ID：10638728
> 
> 赞同：2
> 
> 时间：2012-05-17T15:28:51.160
> 
> 标签：tsql, join, null

我有下表TableA，其中包含数据：

```
ID    ColA
0     10
1     null
2     20 
```

我有另一个表 TableB，其中包含以下数据。

```
ID    ColB   ColC
1     30     80
1     40     70 
3     50     100 
```

我需要在 TableA 中选择行，但是当行中的 ColA 为空时，我想检索 TableB 中 ColB 的值（如果存在）并使用它来代替 ColA。如果 ColB 中不存在值，则结果中 ColA 的值应为空。连接是在 TableA.ID 和 TableB.ID 上完成的。TableB 可以有多个 ID 列重复的行。TableB.ID 和 TableB.ColC 一起使一行唯一。因此，如果 ColC 的值限制为 70，我的结果应该如下所示：

```
ID   ColA
0     10 
1     40
2     20 
```

不知道该怎么做。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:32:04.520

```
select a.ID, COALESCE(a.ColA, b.ColB) as 'ColA'
from TableA a
left join TableB b on a.ID = b.ID and b.ColC = 70 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:31:13.410

如果我正确解释了您的问题，这似乎可以满足您的要求：

```
SELECT  a.ID,
        ISNULL(a.ColA, b.ColB) ColA
FROM    TableA a
        LEFT JOIN
                TableB b
                ON a.ID = b.ID
                AND b.ColC = 70 
```

正如您所说，我在 ColC 中确实“限制为 70 的值”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:33:44.873

听起来您正在寻找案例陈述。尝试`case when TableA.Value is null then TableB.Value end`

[SQL 案例语句](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

# c++ - 将 ntohs() 与字符串流一起使用

> ID：10638734
> 
> 赞同：2
> 
> 时间：2012-05-17T10:18:43.030
> 
> 标签：c++

当我`ntohs()`从`stringstream`.

对于以下代码：

```
read(ns, buf_receive, BUFFER_SIZE);

stringstreams ss(buf_receive);
char[2] a;
short int b;

ss << a[0] << a[1];
ss << b;

cout >> b; 
```

我的问题在于我收到的数据格式不是纯粹`short`的。所以我不能把这个函数直接放在 上`buf_receive`，像这样：`ntohs(buf_receive)`，我也不能把它用在 上`b`，像这样：`ntohs(b)`。

那么有没有一种好方法（不诉诸手动移位）来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:40:52.560

您始终可以创建一个包含 a 的类`short`，然后定义自定义`operator>>`并`operator<<`从流中读取/写入值，这些值分别通过调用`ntohs`和来处理字节顺序`htons`。

然后，`short`用您的新类类型替换示例中的用法。

作为其家庭作业，我不会提供实现。

# testdriven.net - 使用 TestDriven.Net 从 Visual Studio 运行 MBUnit 测试时出错

> ID：10638740
> 
> 赞同：0
> 
> 时间：2012-05-17T15:29:21.967
> 
> 标签：testdriven.net

我在尝试从 Visual Studio 执行单元测试时遇到以下错误。我已经摸索了一下，并重新安装了 Gallio 和 TD.Net，但仍然得到同样的错误。我有点不知道从哪里开始，搜索谷歌几乎一无所获......

```
Gallio.Loader.LoaderException: Gallio.Loader.LoaderException: Failed to setup the runtime. ---> Gallio.Runtime.RuntimeException: The runtime could not be initialized. ---> Gallio.Runtime.RuntimeException: Could not register component 'TDNetRunner.UI.PlaceholderPreferencePaneProvider' of plugin 'Gallio.TDNetRunner.UI' because it implements service 'Gallio.UI.PreferencePaneProvider' which was not found in the registry. 
```

在 Gallio.Runtime.Extensibility.PluginCatalog.RegisterComponents（IRegistry 注册表，IList`1 topologicallySortedPlugins, IList`GetSharedEnvironment() at Gallio.TDNetRunner.Core.LocalProxyTestRunner.CreateRemoteProxyTestRunner() at Gallio.TDNetRunner.Core.LocalProxyTestRunner.RunImpl(IFacadeTestListener testListener, String assemblyPath, String cref, FacadeOptions facadeOptions) at Gallio.TDNetRunner.Core.BaseProxyTestRunner.Run(IFacadeTestListener testListener, String assemblyPath, String cref, FacadeOptions facadeOptions) System.Runtime.Remoting.ServerException: Gallio.Loader.LoaderException: Gallio.Loader.LoaderException: 未能设置运行时。---> Gallio.Runtime.RuntimeException：无法初始化运行时。---> Gallio.Runtime.RuntimeException：无法注册插件“Gallio.TDNetRunner.UI”的组件“TDNetRunner.UI.PlaceholderPreferencePaneProvider”，因为它实现了服务“Gallio.UI。在注册表中找不到的 PreferencePaneProvider'。在 Gallio.Runtime.Extensibility.PluginCatalog.RegisterComponents（IRegistry 注册表，IList`1 topologicallySortedPlugins, IList`1 pluginDescriptors) at Gallio.Runtime.Extensibility.PluginCatalog.ApplyTo(IRegistry registry) at Gallio.Runtime.DefaultRuntime.RegisterLoadedPlugins() at Gallio.Runtime.DefaultRuntime.Initialize() --- 内部异常堆栈跟踪结束 --- 在Gallio.Runtime.DefaultRuntime.Initialize() at Gallio.Runtime.RuntimeBootstrap.Initialize(RuntimeSetup setup, ILogger logger) at Gallio.Runtime.Loader.GallioLoaderBootstrap.SetupRuntime(String runtimePath) --- 内部异常堆栈跟踪结束 ---在 Gallio.Loader.LoaderManager.LoaderImpl.SetupRuntime() 在 Gallio.Loader.Isolation.IsolatedEnvironmentManager.IsolatedInitializer.SetupRuntime() 在 Gallio.Loader.Isolation.IsolatedEnvironmentManager.IsolatedEnvironment.UnwrapException(Exception ex) 在 Gallio.Loader.Isolation.IsolatedEnvironmentManager .Gallio.Loader.SharedEnvironment.SharedEnvironmentManager.CreateSharedEnvironment() 上 Gallio.Loader.SharedEnvironment.SharedEnvironmentManager.GetSharedEnvironment() Gallio.TDNetRunner.Core.LocalProxyTestRunner.CreateRemoteProxyTestRunner() Gallio.TDNetRunner.Core.LocalProxyTestRunner() 上的 IsolatedEnvironment.SetupRuntime()。 RunImpl(IFacadeTestListener testListener, String assemblyPath, String cref, FacadeOptions facadeOptions) 在 Gallio.TDNetRunner.Core.BaseProxyTestRunner.Run(IFacadeTestListener testListener, String assemblyPath, String cref, FacadeOptions facadeOptions) 在 Gallio.TDNetRunner.Core.BaseProxyTestRunner.Run(IFacadeTestListener testListener , 字符串 assemblyPath, 字符串 cref, FacadeOptions facadeOptions) 在 Gallio.TDNetRunner.GallioResidentTestRunner.Run(ITestListener testListener, String assemblyFile,String cref) 在 TestDriven.TestRunner.AdaptorTestRunner.Run(ITestListener testListener, ITraceListener traceListener, String assemblyPath, String testPath) 在 TestDriven.TestRunner.ThreadTestRunner.Runner.Run()

0 次通过，1 次失败，0 次跳过，耗时 4.01 秒（MbUnit v3.3）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:59:38.860

我最近遇到了在 Windows 8（32 位）上运行 Visual Studio 2012 并安装了 JetBrains ReSharper 7.1.10000.900、GallioBundle 3.4.14.0 和 TestDriven.NET 3.4.2808 的类似问题，假设您正在运行类似于上述我的设置，我能够通过执行以下操作来解决这种情况：

1.  关闭 Visual Studio 的所有副本
2.  卸载 ReSharper 和 TD.Net
3.  首先重新安装 Gallio 和 ReSharper
4.  安装最新的 TestDriven（在我的例子中是 3.4.2808 Personal）
5.  启动 Visual Studio 并右键单击以运行测试。

# treeview - 如何在treeview中隐藏treecols？

> ID：10638744
> 
> 赞同：0
> 
> 时间：2012-05-17T15:29:26.900
> 
> 标签：treeview, firefox-addon, xul

我尝试通过将样式设置`treecols`为. 然而，树视图行的标签也消失了。如何在保持行可见的同时隐藏 treecols？`treeview``display: none`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:48:08.757

我*猜*`tree`你的意思是隐藏元素中的列标题。该`tree`元素支持隐藏单个列，因此当您`display: none`在列标题上使用样式时，整个列都会被隐藏。相反，您应该`height: 0px; overflow: hidden;`在元素上使用样式`treecols`- 从技术上讲，它不会被隐藏，但它也不会在屏幕上可见。

# java - 如何列出在 Floyd-Warshall 算法中传递的顶点

> ID：10638750
> 
> 赞同：2
> 
> 时间：2012-05-17T15:29:52.413
> 
> 标签：java, recursion, shortest-path, floyd-warshall

我似乎无法找到一种方法来列出在我的算法（floyd-warshall）计算最短路径时传递的顶点。有人告诉我必须使用递归，但我不知道如何使用递归。请给出伪代码/示例，不胜感激！

```
 import java.util.*;
    public class Main{
        public static final int INF = 9999999;
        public static int[][] path;
        public static int[] tax;
        public static void main(String[] adsf){
            Scanner pp = new Scanner(System.in);
            int testCases = pp.nextInt();
            pp.nextLine();
            pp.nextLine();
            while(testCases-- >0){
                String[] s1 = pp.nextLine().split(" ");
                int size = s1.length;
                path = new int[size][size];
                for(int i = 0; i < path.length; i++)
                    Arrays.fill(path[i],INF);
                tax = new int[size];
                for(int j = 0; j < path[0].length; j++){
                    path[0][j] = Integer.parseInt(s1[j]);
                    if(path[0][j]==-1)path[0][j]=INF;
                }
                for(int i = 1; i < path.length;i++){
                    s1 = pp.nextLine().split(" ");
                    for(int j = 0; j < path[0].length; j++){
                        path[i][j] = Integer.parseInt(s1[j]);
                        if(path[i][j]==-1)path[i][j]=INF;
                    }
                }
                for(int k=0; k<tax.length;k++){
                    tax[k] = pp.nextInt();
                } pp.nextLine();    
                sssp();
                }
                int x,y;
                while(pp.hasNextInt()){
                    x=pp.nextInt();
                    y=pp.nextInt();
                    int cost = path[x-1][y-1];
                    System.out.println((x-1)+" "+(y-1)+" "+cost);
                }
            }
        }
        public static void sssp(){
            for(int k=0;k<path.length;k++){
                for(int i=0;i<path.length;i++){
                    for(int j=0;j<path.length;j++){
                        path[i][j] = Math.min(path[i][j],path[i][k]+path[k][j]);
                    }
                }   
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:36:03.790

您不需要使用递归来进行路径重构（事实上，在 Java 中您永远*不必*使用递归，只是恰好用它来解决某些问题要方便得多，包括这个问题）。

为了能够找出除了长度之外的最短路径，您需要第二个二维数组来存储路径中节点的后继节点。看看[这篇文章](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm#Path_reconstruction)，我说的数组是`next`在他们的伪代码中调用的。

回想一下，该算法的逻辑如下：“如果您可以从`i`到`j`通过任何先前发现的路径`k`更快地从`i`到`j`通过，那么使用该路径`k`作为您当前的最短路径”。现在您需要做的就是将要执行的决定存储`k`在其他数组中，如下所示：

```
if (path[i][k] + path[k][j] < path[i][j]) {
    path[i][j] = path[i][k]+path[k][j];
    next[i][j] = k;
} 
```

Floyd-Warshal 完成后，您可以通过首先重构路径 from `i`to和 from to来重构路径 from to 。`j``i``k``k``j`

```
String GetPath (int i, int j) {
    if (path[i][j] == INF) return "no path";
    int intermediate = next[i][j];
    if (intermediate < 0) return " ";
    return GetPath(i,intermediate) + intermediate + GetPath(intermediate,j);
} 
```

# ruby-on-rails - Ruby on Rails - 回形针获取图像

> ID：10638760
> 
> 赞同：0
> 
> 时间：2012-05-17T15:30:14.903
> 
> 标签：ruby-on-rails, image, controller, paperclip

我正在使用 Paperclip 处理将照片上传到我的应用程序，但在检索它们时遇到了一些问题

我可以成功添加/删除/显示所有图像，但是如何仅检索模型的一张照片？比如第一个？

要全部检索它们，我正在使用：

```
<%= form_for @hotel, :html => {:multipart => true} do |f| %>
  <%= f.fields_for :hphotos do |hp|%>
     <%= image_tag(hp.object.hphoto.url(:medium))%>
  <%end%>
<%end%> 
```

效果很好，但在我的索引中，我只想为每个显示的酒店显示一张照片。我越来越 ：

```
undefined method `Hphotos'
I also ran across: undefined method `url' when testing 
```

我怀疑问题出在我的控制器中，但我不确定是什么，就在这里（我也在进行创建操作，效果很好）

```
 def index

   @hotels= Hotel.search(params)
   @hotels= <pagination>
#I think the issue is here
   @hotels.Hphotos.build #changing to @hotels.Hphoto.build or @hotels.hphotos.build won't work and I think my issue is here.
    respond_to do |format|
      format.html 
      format.json { render :json => @hotels }
    end
  end 
```

这工作正常：

```
def new
    @hotel = Hotel.new
    2.times { @hotel.hphotos.build }
end 
```

我在我的索引视图上这样做：

```
<% @hotels.each do |hotel|%>
(...)
<%= image_tag hotel.hphoto.url(:small) %>
(...)
<%end%> 
```

就像我说的，我只想检索第一张图片，但即使在索引中我也无法全部获取，所以我认为问题出在控制器上。

感谢阅读，欢迎任何提示，我有点卡住了:)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:54:08.807

在您的索引视图中，您调用的是hotel.hphoto，但它应该是 hphotos，因为它是一对多的关系。如果你想要第一个，你应该这样做：

```
hotel.hphotos.first.url(:small) 
```

# http - 这是 node.js http 模块中的错误吗？

> ID：10638767
> 
> 赞同：0
> 
> 时间：2012-05-17T15:30:37.137
> 
> 标签：http, node.js, tcp

我报告了以下问题：[https ://github.com/joyent/node/issues/3269](https://github.com/joyent/node/issues/3269)

我试图确定这是否真的是一个错误 - 或预期的行为。

由于我们只处理一台主机，不应该重用连接吗？（和http 1.1）

作为旁注......*如果*有多个主机，我可以看到这可能会发生。在多台主机的情况下，避免端口饥饿的最佳方法是什么？

（我在这里谈论的是协议，而不是特定的语言）

一般来说，在端口不足的情况下，webrequest 的正常行为是什么？失败？还是等等？

# javascript - 在javascript中，如何在变量的值更改时触发事件？

> ID：10638769
> 
> 赞同：31
> 
> 时间：2012-05-17T15:30:41.040
> 
> 标签：javascript

我有两个变量：

```
var trafficLightIsGreen = false; 
var someoneIsRunningTheLight = false; 
```

当两个变量符合我的条件时，我想触发一个事件：

```
if(trafficLightIsGreen && !someoneIsRunningTheLight){
    go(); 
} 
```

`go()`假设这两个布尔值可以随时更改，当它们根据我的条件发生变化时，我该如何触发我的方法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-17T15:35:59.377

在 Javascript 中更改给定值时不会引发任何事件。您可以做的是提供一组函数来包装特定值并在调用它们来修改值时生成事件。

```
function Create(callback) {
  var isGreen = false;
  var isRunning = false;
  return { 
    getIsGreen   : function()  { return isGreen; },
    setIsGreen   : function(p) { isGreen = p; callback(isGreen, isRunning); },
    getIsRunning : function()  { return isRunning; },
    setIsRunning : function(p) { isRunning = p; callback(isGreen, isRunning); }
  };
} 
```

现在您可以调用此函数并将回调链接到执行**go()**：

```
var traffic = Create(function(isGreen, isRunning) {
  if (isGreen && !isRunning) {
    go();
  }
});

traffic.setIsGreen(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:38:38.457

最可靠的方法是使用这样的设置器：

```
var trafficLightIsGreen = false; 
var someoneIsRunningTheLight = false;

var setTrafficLightIsGreen = function(val){
    trafficLightIsGreen = val;
    if (trafficLightIsGreen and !someoneIsRunningTheLight){
        go(); 
    };
};
var setSomeoneIsRunningTheLight = function(val){
    trafficLightIsGreen = val;
    if (trafficLightIsGreen and !someoneIsRunningTheLight){
        go(); 
    };
}; 
```

然后不是为变量赋值，而是调用setter：

```
setTrafficLightIsGreen(true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-11T05:20:44.267

```
//ex:
/*
var x1 = {currentStatus:undefined};
your need is x1.currentStatus value is change trigger event ?
below the code is use try it.
*/
function statusChange(){
    console.log("x1.currentStatus_value_is_changed"+x1.eventCurrentStatus);
};

var x1 = {
    eventCurrentStatus:undefined,
    get currentStatus(){
        return this.eventCurrentStatus;
    },
    set currentStatus(val){
        this.eventCurrentStatus=val;
    }
};
console.log("eventCurrentStatus = "+ x1.eventCurrentStatus);
x1.currentStatus="create"
console.log("eventCurrentStatus = "+ x1.eventCurrentStatus);
x1.currentStatus="edit"
console.log("eventCurrentStatus = "+ x1.eventCurrentStatus);
console.log("currentStatus = "+ x1.currentStatus); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:34:24.623

如果不使用轮询，就没有办法做到这一点`setInterval/Timeout`。

如果你只能支持 Firefox，你可以使用[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/watch](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/watch)

它将告诉您对象的属性何时更改。

您最好的解决方案可能是让它们成为对象的一部分，并添加您可以自己发送通知的 getter、setter，正如 JaredPar 在他的回答中所展示的那样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T15:37:35.037

```
function should_i_go_now() {
    if(trafficLightIsGreen && !someoneIsRunningTheLight) {
        go();
    } else {
        setTimeout(function(){
            should_i_go_now();
        },30);
    }
}
setTimeout(function(){
    should_i_go_now();
},30); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-24T14:28:52.893

您总是可以让变量成为对象的一部分，然后使用特殊函数来修改它的内容。或通过 访问它们`window`。

以下代码可用于在更改值时触发自定义事件，只要您使用`changeIndex(myVars, 'variable', 5);`与`variable = 5;`

例子：

```
function changeIndex(obj, prop, value, orgProp) {
    if(typeof prop == 'string') { // Check to see if the prop is a string (first run)
        return changeIndex(obj, prop.split('.'), value, prop);
    } else if (prop.length === 1 && value !== undefined &&
               typeof obj[prop[0]] === typeof value) {
        // Check to see if the value of the passed argument matches the type of the current value
        // Send custom event that the value has changed
        var event = new CustomEvent('valueChanged', {'detail': {
                                                          prop : orgProp,
                                                          oldValue : obj[prop[0]],
                                                          newValue : value
                                                       }
                                                     });
        window.dispatchEvent(event); // Send the custom event to the window
        return obj[prop[0]] = value; // Set the value
    } else if(value === undefined || typeof obj[prop[0]] !== typeof value) {
        return;
    } else {
        // Recurse through the prop to get the correct property to change
        return changeIndex(obj[prop[0]], prop.slice(1), value);
    }
};
window.addEventListener('valueChanged', function(e) {
    console.log("The value has changed for: " + e.detail.prop);
});
var myVars = {};
myVars.trafficLightIsGreen = false;
myVars.someoneIsRunningTheLight = false;
myVars.driverName = "John";

changeIndex(myVars, 'driverName', "Paul"); // The value has changed for: driverName
changeIndex(myVars, 'trafficLightIsGreen', true); // The value has changed for: traggicIsGreen
changeIndex(myVars, 'trafficLightIsGreen', 'false'); // Error. Doesn't set any value

var carname = "Pontiac";
var carNumber = 4;
changeIndex(window, 'carname', "Honda"); // The value has changed for: carname
changeIndex(window, 'carNumber', 4); // The value has changed for: carNumber 
```

如果您一直想从`window`对象中提取，您可以修改`changeIndex`为始终将 obj 设置为窗口。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-15T14:23:37.120

如果您愿意在检查之间有大约 1 毫秒的延迟，您可以放置

```
window.setInterval() 
```

例如，这不会使您的浏览器崩溃：

```
window.setInterval(function() {
    if (trafficLightIsGreen && !someoneIsRunningTheLight) {
        go();
    }
}, 1); 
```

# xslt-2.0 - 如何合并和连接两个单独源文件中每一行的数据？

> ID：10638770
> 
> 赞同：1
> 
> 时间：2012-05-17T15:30:41.593
> 
> 标签：xslt-2.0, saxon

我有两个源文件，我需要逐行组合它们。我很高兴将文件读入一个变量，我对逻辑很满意，但语法让我很难过。对于文件 1 中的每一行，我需要循环遍历文件 2 中的每一行并输出连接在一起的两个变量：

文件 1：

```
<rows>
    <row>1</row>
    <row>2</row>
    <row>3</row>
    <row>4</row>
</rows> 
```

文件 2：

```
<rows>
    <row>a</row>
    <row>b</row>
</rows> 
```

所需输出：

```
<rows>
    <row>1/a</row>
    <row>1/b</row>
    <row>2/a</row>
    <row>2/b</row>
    <row>3/a</row>
    <row>3/b</row>
    <row>4/a</row>
    <row>4/b</row>
<rows> 
```

我（糟糕的）尝试让 XSLT 工作：

```
<rows>
    <xsl:apply-templates select="document('file1.xml')/rows/row" />
</rows>

<xsl:template match="row">
    <xsl:apply-templates select="document('file2.xml')/rows/row" />
</xsl:template>  

<xsl:template match="row">
    <row><xsl:value-of select="???" />/<xsl:value-of select="???" /></row>
</xsl:template> 
```

（这些文件是我实际拥有的文件的简化版本）

如何使一个模板匹配一个“行”值而另一个匹配另一个（两个源文件使用相同的结构）。我该如何设置那些'???' 价值观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:03:14.433

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vDoc2">
    <rows>
        <row>a</row>
        <row>b</row>
    </rows>
 </xsl:variable>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <rows>
    <xsl:apply-templates/>
  </rows>
 </xsl:template>

 <xsl:template match="row">
   <xsl:apply-templates select="$vDoc2/*/row" mode="doc2">
     <xsl:with-param name="pValue" select="."/>
   </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="row" mode="doc2">
   <xsl:param name="pValue" />

   <row><xsl:sequence select="concat($pValue, '/', .)"/></row>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的第一个 XML 文档时：**

```
<rows>
    <row>1</row>
    <row>2</row>
    <row>3</row>
    <row>4</row>
</rows> 
```

**产生了想要的正确结果：**

```
<rows>
   <row>1/a</row>
   <row>1/b</row>
   <row>2/a</row>
   <row>2/b</row>
   <row>3/a</row>
   <row>3/b</row>
   <row>4/a</row>
   <row>4/b</row>
</rows> 
```

# aop - AOP（AspectJ）：有没有办法在处理程序建议中获取封闭方法的上下文参数？

> ID：10638773
> 
> 赞同：2
> 
> 时间：2012-05-17T15:30:45.713
> 
> 标签：aop, aspectj

我有一个 AspectJ*建议*，其*切入点*是`handler`类型切入点。

这是包含我要建议的*连接点的方法：*

```
public void foo(String p1) {
    try {
        // some code
    }
    catch(Exception ex) {
        // more code    
    }
} 
```

这是我方面的代码：

```
pointcut foopc(Exception ex) : handler(Exception) && args(ex) && withincode(public void foo(String));

before(Exception ex) : foopc(ex) {
    // advice body  
} 
```

我想要的是捕获变量`p1`并在建议正文中使用它（除了异常`ex`）。这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:55:03.467

我相信我已经想通了。如果有人有更好的答案或更合适的方法，我会接受它而不是我的。

方面内的代码：

```
pointcut fooExec(String p1) : 
    execution(public void foo(String)) && args(p1);

pointcut fooHandler(String p1, Exception ex) :
    cflow(fooExec(p1)) && handler(Exception) && args(ex)
    && withincode(public void foo(String));

before(String p1, Exception ex) : fooHandler(p1, ex) {
    // I can now use the variables p1 and ex.
} 
```

编辑：

我应该指出，其中的签名`execution`可以简单地是`* *(String)`，并且两个切入点可以像这样组合成一个：

```
pointcut fooHandler(String p1, Exception ex) :
    cflow(execution(* *(String) && args(p1))) 
    && handler(Exception) && args(ex)
    && withincode(public void foo(String)); 
```

# erlang - 如何在 gen_tcp:accept 上调用（和睡眠）并同时处理系统消息？

> ID：10638776
> 
> 赞同：4
> 
> 时间：2012-05-17T15:30:48.927
> 
> 标签：erlang, erlang-otp

我对 erlang/otp 世界还很陌生，所以我想这是一个非常基本的问题。不过，我想知道执行以下操作的正确方法是什么。

目前，我有一个高级主管的申请。后者将监督调用 gen_tcp:accept 的工作人员（睡在上面），然后为每个接受的连接生成一个进程。注意：对于这个问题，listen() 在哪里完成是无关紧要的。

我的问题是关于使这些工作人员（在 gen_tcp:accept 上睡觉的工作人员）尊重 otp 设计原则的正确方法，以便他们可以处理系统消息（处理关闭、跟踪等），根据什么我在这里读过：[http ://www.erlang.org/doc/design_principles/spec_proc.html](http://www.erlang.org/doc/design_principles/spec_proc.html)

所以，

*   是否可以为此使用 gen_fsm 或 gen_server 等可用行为之一？我的猜测是否定的，因为阻塞调用 gen_tcp:accept/1。是否仍然可以通过指定接受超时来做到这一点？如果是这样，我应该把 accept() 调用放在哪里？
*   或者我应该像上面链接中的示例一样从头开始编码（即：不使用现有行为）？在这种情况下，我想到了一个调用 gen_tcp:accept/2 而不是 gen_tcp:accept/1 的主循环（即：指定超时），然后立即编写一个接收块，这样我就可以处理系统消息。这是正确的/可以接受的吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:10:50.687

由于 Erlang 是事件驱动的，因此处理像 accept/{1,2} 那样阻塞的代码是很尴尬的。

就个人而言，我会有一个主管，它有一个`gen_server`听众，另一个主管接受工人。Handroll an accept worker to timeout ( `gen_tcp:accept/2`)，有效地轮询，（尴尬的部分）而不是接收状态消息。

这样，如果一个工人死亡，它会被它上面的主管重新启动。如果侦听器死了，它会重新启动，但不会在重新启动依赖于该侦听器的工作树和主管之前。当然，如果最高主管死了，它会重新启动。但是，如果您`supervisor:terminate_child/2`在树上，那么您可以有效地禁用该套接字的侦听器和所有接受器。稍后，`supervisor:restart_child/2`可以重新启动整个 listener+acceptor 工作池。

如果你想要一个应用程序来为你管理这个，[cowboy](https://github.com/extend/cowboy)实现了上面的。尽管是面向 http 的，但它很容易支持自定义处理程序来代替要使用的任何协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:40:57.850

我实际上在另一个问题中找到了答案：[使用 OTP 原则的非阻塞 TCP 服务器](https://stackoverflow.com/questions/6170613/non-blocking-tcp-server-using-otp-principles/6173232#6173232)和这里[http://20bits.com/article/erlang-a-generalized-tcp-server](http://20bits.com/article/erlang-a-generalized-tcp-server)

**编辑**：对我有帮助的具体答案是：[https ://stackoverflow.com/a/6513913/727142](https://stackoverflow.com/a/6513913/727142)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T19:51:06.763

您可以将其设置为类似于此的 gen_server：[https](https://github.com/alinpopa/qerl/blob/master/src/qerl_conn_listener.erl) ://github.com/alinpopa/qerl/blob/master/src/qerl_conn_listener.erl 。

如您所见，此进程正在执行 tcp 接受并处理其他消息（例如 stop(Pid) -> gen_server:cast(Pid,{close})。）

HTH，阿林

# facebook-graph-api - 我如何从 facebook graph api 获得 100x100 的正方形图片？

> ID：10638778
> 
> 赞同：1
> 
> 时间：2012-05-17T15:30:57.743
> 
> 标签：facebook-graph-api

我需要从 facebook graph api 获取 100x100 的正方形图片。图片必须像标准方形“50x50”图片一样裁剪，但尺寸必须为100x100。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:48:56.267

Graph API only* 提供以下尺寸（使用 type 参数指定图片尺寸）：

*   **正方形**：50x50 像素

*   **small** : 50 像素宽，可变高度

*   **正常**：100 像素宽，可变高度

*   **large**：大约 200 像素宽，可变高度

如果您希望图像为 100x100，则必须检索“正常”尺寸并自行裁剪，例如，如果您使用 php，请检查[imagecopyresampled](http://php.net/manual/en/function.imagecopyresampled.php)函数

***更新**：

正如下面的评论所指出的，这个答案在 2012 年 5 月是正确的，但现在你也可以选择使用**graph.facebook.com/ *`UID`*/picture?width= *`N`*&height=*`N`***来获得不同的尺寸，如最近的回答中所述杰里米。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:39:49.233

```
- (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
}

- (UIImage *)crop:(CGRect)rect andIm:(UIImage*) im {

    CGFloat scale = [[UIScreen mainScreen] scale];

    if (scale>1.0) {
        rect = CGRectMake(rect.origin.x*scale , rect.origin.y*scale, rect.size.width*scale, rect.size.height*scale);
    }

    CGImageRef imageRef = CGImageCreateWithImageInRect([im CGImage], rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    return result;
}

-(UIImage*)squareLargeFacebookProfilePhoto:(UIImage*) image{

    float startPosX=0.0;
    float startPosY=0.0;
    float newsizeW;
    float newsizeH;

    if (image.size.height>=image.size.width){
        newsizeW=200;
        float diff=200-image.size.width;
        newsizeH=image.size.height+diff/image.size.width*image.size.height;

        if (newsizeH>200){
            startPosY=(newsizeH-200.0)/8.0;
        }
    }
    else
    {
        newsizeH=200;
        float diff=200-image.size.height;
        newsizeW=image.size.width+diff/image.size.height*image.size.width;

        if (newsizeW>200){
            startPosX=(newsizeW-200.0)/2.0;
        }
    }

    UIImage *imresized=[self imageWithImage:image scaledToSize:CGSizeMake(newsizeW, newsizeH)];
    return [self crop:CGRectMake(startPosX, startPosY, 200, 200) andIm:imresized];

} 
```

网址[https://graph.facebook.com/user_id/picture?type=square](https://graph.facebook.com/user_id/picture?type=square)为我们提供了一张小型头像（50x50）

1）首先你必须从网址下载图像：

[https://graph.facebook.com/user_id/picture?type=large](https://graph.facebook.com/user_id/picture?type=large)

例如加载图像

```
NSURL * imageURL = [NSURL URLWithString:https://graph.facebook.com/user_id/picture?type=large];
NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage *image = [UIImage imageWithData:imageData]; 
```

2）然后只需调用将返回大小为（ 200x200 ）的大型 Facebook 个人资料图片的函数：

```
UIImage *LargeProfileImage=[self squareLargeFacebookProfilePhoto:image]; 
```

注意：代码是使用 ARC 内存管理编写的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T20:33:46.523

你也可以试试这个：

****[https://graph.facebook.com/INSERTUIDHERE/picture?width=100&height=100](https://graph.facebook.com/INSERTUIDHERE/picture?width=100&height=100)****

**不要忘记将“INSERTUIDHERE”替换为您尝试为其获取图像的用户的 UID。嵌入式红宝石在这里工作得很好。例如：...ook.com/<%= @problem.user.uid %>/pic...**

 **请注意，您可以将尺寸更改为您想要的任何尺寸（例如：50x50 或 500x500）。它应该从照片的中心裁剪和调整大小。它（出于某种原因）有时会更大或更小几个像素，但我认为这与原始照片的尺寸有关。耶，第一个答案！

这是我使用上面链接的 100 x 100 的愚蠢杯子。我会提供更多，但由于我是 n00b，所以阻止发布多个链接。

100 x 100：[https ://graph.facebook.com/8644397/picture?width=100&height=100](https://graph.facebook.com/8644397/picture?width=100&height=100)**

# javascript - iPhone - UI 自动化 - 使用 UIAKeyboard 键入

> ID：10638782
> 
> 赞同：2
> 
> 时间：2012-05-17T15:31:00.847
> 
> 标签：javascript, iphone, ios-ui-automation

我`UIAutomation`用来测试我的 iPhone 应用程序。
我的应用程序有一个`UISearchBar`，在我使它集中之后，
这行脚本显示该应用程序现在有 2 `UIAWindow`。

```
UIATarget.localTarget().frontMostApp().logElementTree(); 
```

第二个`UIAWindow`是`UIAKeyboard`小时候。

![在此处输入图像描述](../Images/1161f8014e597aca0fcd0885ebbb1244.png)

你知道如何获得第二个的参考`UIAWindow`，所以我可以得到一个参考`UIAKeyboard`吗？

我试过了

```
UIATarget.localTarget().frontMostApp().mainwindow()[1].keyboard().key()["Q"].tap(); 
```

但它不起作用。

**编辑 1：**
我使用这条线来获取键盘的参考。有用。

```
UIATarget.localTarget().frontMostApp().windows()[1].logElementTree(); 
```

但是当我尝试用键盘输入一些东西时：

```
UIATarget.localTarget().frontMostApp().keyboard().typeString("Hello world"); 
```

或者

```
UIATarget.localTarget().frontMostApp().keyboard().keys()["A"].tap; 
```

但他们不工作。

**你知道如何用键盘输入一些东西吗？**

* * *

**编辑：（** 只是为了让你们知道如何使 UIAKeyboard 为您工作）

* * *

UIATarget.localTarget().frontMostApp().keyboard().keys()["A"].tap;
**不起作用**
UIATarget.localTarget().frontMostApp().keyboard().keys()["A"].tap();
**作品**

和
UIATarget.localTarget().frontMostApp().keyboard().typeString("这是一条消息");
**作品**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:19:30.247

您发布的最后两个代码片段应该可以工作，但它们仅在您的键盘打开时才有效（在屏幕上可见）。执行此操作的另一种方法是访问文本字段（您想在其中键入您要键入的任何内容），然后调用函数`.setValue("Hello world")`或`.typeString("Hello world")`. 这两个是 textField 对象的函数。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T21:31:07.567

在屏幕上使用键盘键入：

```
UIATarget.localTarget().frontMostApp().keyboard().typeString("This is a message"); 
```

# vba - 如何使用 cmd 将文件从本地硬盘复制到带有密码的映射驱动器？

> ID：10638788
> 
> 赞同：0
> 
> 时间：2012-05-17T15:31:22.247
> 
> 标签：vba, copy, cmd, mapped-drive

我知道通过复制和粘贴可以更轻松地完成此操作，但这里的重点是使用 VBA 自动执行该过程，因此其他人只需单击一个按钮即可自动复制文件。我曾尝试在 cmd 下使用复制命令但失败了，因为这不会调用密码提示窗口，因此无法访问硬盘驱动器。有没有其他方法可以解决这个问题？用户名和密码是否不能作为命令的一部分嵌入并不重要。如果该命令可以设法弹出用户名和密码条目的窗口，那也是可以接受的。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:27:05.587

您可以使用 vba 提示输入用户名和密码，或将它们存储在文件中（以适合您的需要为准）

映射具有用户名和密码的驱动器的命令是

```
NET USE G: \\server\path password /user:username 
```

和

```
NET USE G: /delete 
```

完成映射驱动器后，您可以使用`object.Copy destination[, overwrite]`来复制文件，或者`SaveAs`如果您想要当前文件的副本

# java - 如何从引用的java项目访问静态资源（WEB-INF）文件夹中的文件？

> ID：10638790
> 
> 赞同：2
> 
> 时间：2012-05-17T15:31:25.153
> 
> 标签：java, spring, jakarta-ee, maven, pom.xml

我有一个 Web 应用程序，其中包含我的一个应用程序服务的配置 xml 文件，该文件作为 spring bean 公开。此外，我在同一个工作区中有一个独立的 java 应用程序（它从 pom.xml 引用我的 web 应用程序项目），它使用 Spring TestContext 框架运行测试，其中一个测试检查该 XML 文件的配置。

但是，我从独立应用程序访问此 xml 文件时遇到问题：

在设置测试之前，在我之前的配置中，该文件是通过 ServletContext 访问的，并且位于**WEB-INF/**文件夹中。但是，为了使它可以从测试项目中访问，我必须将它移动到**源/**文件夹并使用 getClassLoader().getResourceAsStream() 方法而不是 ServletContext 方法加载它。但它使编辑文件变得很麻烦，因为每次都必须重新部署应用程序。

是否可以将文件保存在*WEB-INF/*文件夹中，但在测试运行期间从引用项目中加载它？

PS 目前它是一个带有 Tomcat 服务器的 STS 项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:32:27.523

绝对将文件保存在 WEB-INF/ 文件夹下，如果那是它应该存在的地方。

对于从命令行执行的测试类。您可以在您知道位于类路径根目录中的文件（例如 application.properties 文件）上使用 getClassLoader().getResource()。从那里你知道你的项目的结构以及在哪里可以找到相对于属性文件的 WEB-INF/。由于它返回一个 URL，因此您可以使用它来找出您正在寻找的 XML 文件的路径。

```
URL url = this.getClass().getClassLoader().getResource("application.properties");
System.out.println(url.getPath());

File file = new File(url.getFile());
System.out.println(file);

// now use the Files' path to obtain references to your WEB-INF folder 
```

希望你觉得这很有用。我不得不对您的测试类的运行方式等做出假设。

看一下[File Class](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)，它的 getPath()、getAbsolutePath() 和 getParent() 方法可能对您有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T08:53:35.867

在测试运行之前，我最终使用了 Spring [MockServletContext](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/mock/web/MockServletContext.html)类并将其直接注入到我的服务 bean 中，因为我的服务已实现`ServletContextAware`：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "/test-ctx.xml" } ) 
public class SomeServiceTest {

@Autowired
private MyServletContextAwareService myService;

@Before
public void before(){
            //notice that I had to use relative path because the file is not available in the test project
    MockServletContext mockServletContext = new MockServletContext("file:../<my web project name>/src/main/webapp"); 

    myService.setServletContext(mockServletContext);        
} 
```

如果我有几个使用 Servlet Context 的类，那么更好的解决方案是使用[WebApplicationContext](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/WebApplicationContext.html)而不是默认的（当前由 DelegatingSmartContextLoader 提供），但它需要实现自定义[ContextLoader](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ContextLoader.html)类并将其类名传递给**@ContextConfiguration**注释。

**后来我想到的**另一种更清洁的解决方案**`ServletContext`是重构服务并注入 via`@Autowired`而不是弄乱`ServletContextAware`，并提供相应类型的 bean（实际上是一个`MockServletContext`实例）。**

 **~~`MockServletContext`将来可能会在 Spring 中添加对来自测试类的直接支持，请参阅[SPR-5399](https://jira.springsource.org/browse/SPR-5399)和[SPR-5243](https://jira.springsource.org/browse/SPR-5243)。~~

**SPRING 3.2 的更新** 在 Spring 3.2 中，servlet 上下文的初始化变得像添加一个`@WebAppConfiguration`注释一样简单：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration("file:../<my web project name>/src/main/webapp")
@ContextConfiguration(locations = { "/test-ctx.xml" } ) 
public class SomeServiceTest { 
```

详见[文章](http://www.swiftmind.com/de/2011/06/22/spring-3-1-m2-testing-with-configuration-classes-and-profiles/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-22T09:33:38.073

在一个 Maven 项目中，我遇到了同样的问题。我没有 servletContext，无法访问 WEB-INF 目录中的静态文件。我通过向 pom.xml 添加条目来找到解决方案，这使我可以访问该目录。它实际上包括这个类路径的路径。

PS：我使用的是Tomcat容器

```
<project>
    <build>
    <resources>
        <resource>
            <directory>src/main/webapp/WEB-INF</directory>
        </resource>
    </resources>
</project> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T23:37:20.553

这是一个类路径资源，所以把它放在类路径上：$webapp/WEB-INF/classes

Maven 项目在打包 webapp 时会将 $module/src/main/resources 中的内容复制到此位置。（前者是一个源路径，后者 - WEB-INF/classes - 总是由 servlet 容器放在类路径中，根据规范。）**

# r - 列出 CRAN 上所有可用的包到控制台

> ID：10638792
> 
> 赞同：7
> 
> 时间：2012-05-17T15:31:37.350
> 
> 标签：r

想要将 CRAN 上所有可用软件包的列表获取到 Windows 控制台。我知道这一定很容易，因为在 windows gui 上有一个可以单击安装的 manu 选项，此时会弹出另一个菜单界面，其中包含 CRAN 上可用的所有软件包。如果菜单是一个功能（它可能是我只是不知道它是什么），我会查看代码并弄清楚他们如何获得该列表。

所以您在这里看到的内容：（[按字母顺序排列的 LINK 包](http://lib.stat.cmu.edu/R/CRAN/web/packages/available_packages_by_name.html)）我想进入控制台，以便将其分配给一个对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T15:40:21.713

`?available.packages`没有出现在您的搜索结果中？你在问之前搜索过，不是吗？;-)

# ruby - Ruby .count 操作截断输入文件

> ID：10638796
> 
> 赞同：1
> 
> 时间：2012-05-17T15:31:48.350
> 
> 标签：ruby, file-io

我想读入一个文件并显示它有多大。.count 的行为就像 .count！并更改我的输入文件缓冲区的大小。所以现在 logfile.each 不会迭代。这是怎么回事？

```
logfile = open(input_fspec) 
puts "logfile size: #{logfile.count} lines" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:39:31.923

`count` will read all the lines from the input in order to do the counting. If you want to read the lines again (e.g. using `readline` or `each`) then you will need to call `logfile.rewind` to move back to the start of the file.

In fact, what `count` is actually returning is the number of lines that have not been read yet. For example, if you had already read through the file and called `count` afterwards then it would return 0.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:38:57.800

You could do this instead before you even open it:

```
File.size("input_fspec") 
```

# asp.net-mvc-3 - 模型绑定列表 MVC3 不读取值

> ID：10638799
> 
> 赞同：0
> 
> 时间：2012-05-17T15:31:52.893
> 
> 标签：asp.net-mvc-3, list, binding, model, action

我已经阅读了一些帖子，但我仍然觉得很难解决这个问题。我的问题是我的操作只从绑定列表中读取一些值。这就是我将列表发送到视图的方式：

```
public ActionResult RegisterSurvey()
    {
        RegisterSurveyModel model = new RegisterSurveyModel();

        var questions = new List<QuestionModel>();
        var survey = EFSurvey.Survey.FirstOrDefault();
        survey.QuestionSurvey
            .Where(x => x.AuditingDeleted == false)
            .Where(x => x.Active == true).ToList().ForEach((item) =>
            {
                var questionModel = new QuestionModel();
                ModelCopier.CopyModel(item, questionModel);
                questionModel.Answer = string.Empty;

                questions.Add(questionModel);

            });
        model.Questions = questions;
        return View(model);
    } 
```

这是我的模型：

```
public class RegisterSurveyModel
{
    public List<QuestionModel> Questions { get; set; } 
}

public class QuestionModel
{
    public int QuestionSurveyID { get; set; }
    public string Question { get; set; }
    public string Answer { get; set; }
    public bool Suggestion { get; set; }
} 
```

这是我的看法：

```
<div class="SiteSurveyContainer">
@using (Html.BeginForm())
{
    <div class="SurveyUp">
        @for (int i = 0; i < Model.Questions.Count(); i++)
        {
            if (!Model.Questions[i].Suggestion)
            {
            <p>@Model.Questions[i].Question</p>
            @Html.HiddenFor(x => Model.Questions[i].QuestionSurveyID);
            @Html.TextBoxFor(x => Model.Questions[i].Answer, new { @class = "surveyBox" });
            }
        }
    </div>
    <div class="SurveyBottom">
        <div class="line">
        </div>
        <p>
            Suggestions</p>
        @for (int i = 0; i < Model.Questions.Where(x => x.Suggestion == true).Count(); i++)
        {
            @Html.HiddenFor(x => Model.Questions[i].QuestionSurveyID);
            @Html.TextAreaFor(x => Model.Questions[i].Answer, new { @class = "surveyTextArea" })
        }
    </div>
    <div class="surveyBottomButton">
        <input type="submit" value="Submit Results" />
    </div>
} 
```

到现在为止还挺好。无论如何，当我回答所有调查问题时，我只得到前 4 个答案……很奇怪。任何人都知道为什么会这样？

![在此处输入图像描述](../Images/ed824d93ed04269abd1e15389f78fdde.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:50:09.307

您有多个输入控件在同一个表单中具有相同的名称。

建议的问题是所有问题的子集，因此它们在同一表格上重复两次。这将抛出 ModelBinder，因此您的接收操作可能只看到未重复的问题。

# backbone.js - Backbone.js 和 JQueryUI 对话框 - 事件未绑定

> ID：10638802
> 
> 赞同：1
> 
> 时间：2012-05-17T15:31:56.353
> 
> 标签：backbone.js, jquery-ui-dialog

我正在尝试在 JQuery 对话框中使用 Backbone.js。我已经设法让对话框呈现和打开，但它似乎并没有触发我的事件。我添加了一个测试事件来检查它，单击它没有预期的结果。

我已经尝试按照这篇博文中关于 delegateEvents 的说明进行操作[，](http://backbonefu.com/2011/08/using-backbone-js-with-jquery-ui-modals/)但没有任何区别。没有错误被抛出，事件只是不触发。为什么是这样？

```
Slx.Dialogs.NewBroadcastDialog.View = Backbone.View.extend({
    events: {
        "click .dialog-content": "clickTest"
    },
    clickTest : function () {
        alert("click");
    },
    render: function () {
        var compiledTemplate = Handlebars.compile(this.template);
        var renderedContent = compiledTemplate();

        var options = {
            title: Slx.User.Language.dialog_title_new_message,
            width: 500
        };
        $(renderedContent).dialog(options);
        this.el = $("#newBroadCastContainer");
        this.delegateEvents(this.events);
        return this;
    },
    initialize: function () {
        _.bindAll(this, 'render');
        this.template = $("#newBroadcastDialogTemplate").html();
        this.render();
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:13:50.307

你可能想试试这个。我不得不重构你的代码，希望你能明白

```
Slx.Dialogs.NewBroadcastDialog.View = Backbone.View.extend({
    el:"#newBroadCastContainer",
    template:$("#newBroadcastDialogTemplate").html(),
    events: {
        "click .dialog-content": "clickTest"
    },
    clickTest : function () {
        alert("click");
    },
    render: function () {
        var compiledTemplate = Handlebars.compile(this.template);
        var renderedContent = compiledTemplate();
        $(this.el).html(renderedContent).hide().dialog(this.options.dialogConfig);       
        return this;
    },
    initialize: function () {
    }
}); 
```

在视图定义之外实例化和渲染

```
var myDialog = new Slx.Dialogs.NewBroadcastDialog.View({dialogConfig:{title: Slx.User.Language.dialog_title_new_message,width: 500}});
myDialog.render(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:07:06.300

问题原来是由于我分配 this.el 而我应该分配 this.$el

这完美地工作：

```
Slx.Dialogs.NewBroadcastDialog.View = Backbone.View.extend({
    el: "#newBroadcastContainer",
    events: {
        "click .clicktest": "clickTest"
    },
    clickTest : function () {
        console.log("click");
    },
    render: function () {
        var compiledTemplate = Handlebars.compile(this.template);
        var renderedContent = compiledTemplate();

        var options = {
            title: Slx.User.Language.dialog_title_new_message,
            width: 500
        };

        this.$el = $(renderedContent).dialog(options);
        return this;
    },
    initialize: function () {
        _.bindAll(this, 'render');
        this.template = $("#newBroadcastDialogTemplate").html();
        this.render(); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:13:41.227

我在一个代码库上有两个代码库，我可以通过将对话框分配给 this.$el 来绑定事件，但是在另一个代码库中，这不知何故不起作用。我添加以下行 this.el = this.$el; 到代码，它现在正在工作。但是我仍然无法弄清楚为什么它在一个代码库而不是另一个代码库中工作，以及为什么将 $el 分配给 el 让它工作。

# calendar - Liferay：在列表页面中显示日历事件的相关资产

> ID：10638806
> 
> 赞同：2
> 
> 时间：2012-05-17T15:32:10.213
> 
> 标签：calendar, liferay

我正在定制liferay 的日历portlet 并为此创建了一个钩子。

我想直接在列表页面本身中显示与日历事件关联的所有“相关资产”，其中显示所有事件，而不是事件的详细视图页面。

目前 liferay 仅在我们单击事件以查看该事件的详细信息时才会显示“相关资产”。

![在此处输入图像描述](../Images/9f6e0d0981e8fde9e8f688ea72c8a634.png)

谁能帮我？

环境：Liferay 6.1

非常感谢萨布丽娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:00:28.903

我假设你已经有了 liferay 的源代码并且你知道如何创建一个钩子。

您将要修改的 JSP 将位于此路径中：

`portal-web/docroot/html/portlet/calendar`

因此，这里有一些步骤可以帮助您解决查询：

1.  您需要修改`event_iterator.jspf`：`row.addText(event.getTitle(), rowURL);`
2.  您必须调整从`view_event.jsp`in 中获取的以下代码`event_iterator.jspf`。

    ```
    <% 
    AssetEntry layoutAssetEntry = AssetEntryLocalServiceUtil.getEntry(CalEvent.class.getName(), event.getEventId());
    %>

    <%-- <liferay-util:buffer> is a tag which stores all that is written inside
         its body in a single variable string, in this case "relatedAssetsLinksBuffer"
    --%>

    <liferay-util:buffer var="relatedAssetsLinksBuffer">
        <c:if test="<%= enableRelatedAssets %>">
                <%=event.getTitle() %>
            <div class="entry-links">
                <liferay-ui:asset-links
                    assetEntryId="<%= layoutAssetEntry.getEntryId() %>"
                />
            </div>
        </c:if>
    </liferay-util:buffer> 
    ```

3.  现在步骤 1 中的行变为：`row.addText(relatedAssetsLinksBuffer, rowURL);`

我没有尝试过，但我认为它会起作用或至少会给您一些帮助来解决您的查询。

**Hooks 提示**（将来可能有用）**：** Liferay 在存储其 JSP 时遵循约定，因此对于 custom-jsps Hook（即为修改 liferay 的 JSP 而创建的钩子），您只需要搜索该特定 JSP 并修改它。

例如：您想修改日历 portlet 的第一页。所以 liferay portlet 的第一个页面总是 view.jsp 位于与 portlet-name 在本例中为“日历”同名的文件夹中，并且 view.jsp 将包含一些标签，例如`<%@ include />`或`<liferay-util:include />`包含其他文件以显示内容。因此，您始终可以从 view.jsp 开始并继续前进。顺便说一下，JSP 的名称在大多数情况下也是不言自明的。

希望这可以帮助。

# ruby-on-rails - 如何从 Rails Way 的视图中删除 API 逻辑？

> ID：10638807
> 
> 赞同：0
> 
> 时间：2012-05-17T15:32:26.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api

我想删除这个逻辑：

```
Suitcase::Hotel.find(id: hotel.id).images.first.url 
```

从视图。

[https://gist.github.com/2719479](https://gist.github.com/2719479)

我没有样板酒店。我使用 Suitcase gem 通过 API 获取此 url。

问题是因为 只有在这样做的情况下才`hotel`来自`@hotels = Suitcase::Hotel.find(location: "%#{headed}%")`API 接收我的图像`Suitcase::Hotel.find(id: hotel.id)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:38:57.387

If `Suitcase::Hotel.find(id: hotel.id).images.first.url` works then i would guess `hotel.images.first.url` will work too if `hotel` is an hotel instance.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:36:59.017

正在添加：

```
@hotel = Suitcase::Hotel.find(id: hotel.id) 
```

行动`#show`不起作用？

**编辑：**
在这种情况下，做一个帮手：

```
def hotel_image_url(hotel)
  Suitcase::Hotel.find(id: hotel.id).images.first.url
end 
```

但正如我[在这里](https://github.com/thoughtfusion/suitcase/blob/master/lib/suitcase/hotel/hotel.rb#L104)看到的，您可以简单地在控制器中编写：

```
@hotels_data = Suitcase::Hotel.find(ids: @hotels.map(&:id)) 
```

或者更优雅地添加到您的模型（或创建装饰器（这是更好的选择））：

```
def photo
  Suitcase::Hotel.find(id: self.id).images.first.url
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:18:42.467

我认为这应该可行，不确定第二个选项

```
class Search < ActiveRecord::Base

  attr_accessible :headed, :children, :localization, :arriving_date, :leaving_date, :rooms, :adults
  def hotels
    @hotels ||= find_hotels
  end

private

  def find_hotels
    return unless headed.present?
    @hotels = Suitcase::Hotel.find(location: "%#{headed}%")
    @hotels.each do |hotel|
      def hotel.image_url
        Suitcase::Hotel.find(id: hotel.id).images.first.url
      end
    end
  end
end

# or this, but I'm not sure if this works

@hotels.each do |hotel|
  image_url =  Suitcase::Hotel.find(id: hotel.id).images.first.url
  def hotel.image_url
    image_url
  end
end 
```

# iphone - 游戏引擎中执行安全状态更改的策略是什么？

> ID：10638809
> 
> 赞同：1
> 
> 时间：2012-05-17T15:32:34.767
> 
> 标签：iphone, ios, multithreading, opengl-es, concurrency

我在 OpenGL ES 中创建了一个运行循环，它由 CADisplayLink 以 60fps 调用。AFAIK CADisplayLink 在后台线程上调用它的目标。

我有大约 100 个状态变量供运行循环使用。

问题：从主线程，我想改变在运行循环中使用的状态变量来绘制一些东西。只有在所有状态变量都设置为其目标值之后，才必须绘制框架。

恐怕在某些时候，当我更改状态变量时，我还没有完成所有更改（在主线程上的同一运行循环迭代中的一个大方法中），例如几何形状的位置，有多个- 线程相关的崩溃或问题，CADisplayLink 将在我更新状态变量的方法中间启动，然后绘制垃圾或崩溃。

显然，当我只使用同步或原子属性时，它无济于事，因为它仍然不是事务性的。我想我需要交易。

我天真的方法是这样的：

运行循环读取的实例变量：

```
BOOL updatingState; 
```

如果updateState 为YES，run loop 方法将跳过绘图。

然后在开始更改状态之前，我将其设置为 YES。当一切都改变了，我把它设置回NO。

当然，现在的问题是：如果 - 当我改变这个时 - 运行循环方法正在读取值怎么办？

游戏引擎如何处理这个问题？他们有什么样的锁定机制，以便在绘制下一帧之前完成状态变量的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:57:16.383

您可能会发现读取-复制-更新策略很有用。一种可能的实现是每个对象实际上包含两个渲染参数副本，并且使用一个原子标志来告诉渲染线程使用哪个。您将需要在渲染器中使用读取内存屏障以确保在读取任何参数之前读取标志，并在更新程序线程中使用写入内存屏障以确保在翻转标志之前写入所有参数更新.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:54:02.347

完成此操作的常用方法是在绘制完成之前，在每次运行循环迭代中发生所有状态更新。也就是说，运行循环的示意图如下所示：

```
updateState();
draw(); 
```

使用此模型，绘图仅在达到一致状态后发生。

为此，您需要有一个模型，其中在每个 updateState() 上轮询诸如按键之类的事件，而不是异步发生，并在每次迭代中进行时间测量，以告诉您自上一帧以来经过了多少时间。

不过，我无法帮助您如何在 iOS 编程的具体案例中实现这一点，因为我对此一无所知。但我希望我能给你指出正确的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:54:51.813

我认为这是并发中的一个常见问题，因此有几种方法可以做到：

1.  使用不可变状态类来保存状态变量。
2.  使用锁定机制（如果不能使用不可变类）来保护状态变量。
3.  有多个可以修改的状态，但只有一个是“活动的”。这将允许您重用状态，并将减少复制和内存分配。

此外，考虑这种情况：

线程 1\. 开始画一些东西。
线程 1\. 读取状态 01 参数的 1/2（第一个状态）。
线程 2。用状态 02（第二个状态）交换状态 01。
线程 1\. 读取状态 02 的另外 1/2，但它与状态 01 参数不同。

所以最好的选择是不允许在绘图期间更新状态，所以选项 3 可能是最好的方法，因为您只需选择最新的状态并绘制它。假设您有两种状态：`drawingState`和`nonDrawingState`。在您的绘图函数中，您将始终使用`drawingState`to 绘制，而其他线程修改`nonDrawingState`. 完成绘图后，您可以交换状态并使用最新的状态修改继续绘图。

# python - web2py新控制器无效功能

> ID：10638810
> 
> 赞同：0
> 
> 时间：2012-05-17T15:32:39.423
> 
> 标签：python, web2py

我在使用 Web2py 的应用程序中有以下控制器

1.  一本书
2.  帐户
3.  阿贾克斯
4.  默认
5.  事实
6.  字母
7.  支付

除了 abook 之外，所有的工作都完美无缺，这是最后一个创建控制器，所以它是最新的，我注意到现在创建的每个新控制器都不起作用

```
# abook.py:

# -*- coding: utf-8 -*-
### required - do no delete
response.generic_patterns=['*']
import functions as fu
import os, uuid, string, datetime
if auth.user_id:
    session.language = fu.default_language(db,auth)
else:
    session.language = session.preferredLanguage
def user(): return dict(form=auth())
@auth.requires_login()
def setlanguage(language):
    if session.language == None:
        session.language = session.preferredLanguage
        T.force(session.languageIdentifiers[session.language])
        pass
    else:
        session.language = language
        T.force(session.languageIdentifiers[language])
        pass
    pass
### end requires

def index():
    return dict()

...
...
... 
```

并为每个功能制作了一个视图 HTML 模板

但我总是

```
invalid function (abook/FUNCTION_NAME) 
```

Web2py 版本：`1.99.7`

# wpf - 在 WPF 中使用带矩形的 DataTrigger 时遇到问题

> ID：10638816
> 
> 赞同：1
> 
> 时间：2012-05-17T15:33:07.480
> 
> 标签：wpf, xaml, animation, storyboard

我是 WPF 的新手，正在尝试对矩形的大小和位置的更改进行动画处理。我通过将矩形绑定到 INotifyPropertyChanged 属性来设置它。这工作正常，但变化可能是极端的，我希望它在视觉上不那么刺耳。

这工作正常：

```
<Rectangle Fill="{x:Static SystemColors.ControlBrush}" 
        Stroke="black">
<Rectangle.Style>
    <Style TargetType="{x:Type Rectangle}">
        <Setter Property="Canvas.Left" Value="{Binding Path=Coil.Left, Mode=OneWay}"/>
        <Setter Property="Canvas.Top" Value="{Binding Path=Coil.Top, Mode=OneWay}"/>
        <Setter Property="Width" Value="{Binding Path=Coil.Width, Mode=OneWay}"/>
        <Setter Property="Height" Value="{Binding Path=Coil.Height, Mode=OneWay}"/>
    </Style>
</Rectangle.Style> 
```

Coil.Left 是我的 INotifyPropertyChanged 对象中的一个 RectangleF 结构，并且包含矩形的画布的 DataContext 属性在创建对象后在我的代码中设置。

我也可以使用 EventTrigger 对其进行动画处理：

```
<Rectangle Fill="{x:Static SystemColors.ControlBrush}" 
        Stroke="black">
<Rectangle.Style>
    <Style TargetType="{x:Type Rectangle}">
        <Setter Property="Canvas.Left" Value="{Binding Path=Coil.Left, Mode=OneTime}"/>
        <Setter Property="Canvas.Top" Value="{Binding Path=Coil.Top, Mode=OneTime}"/>
        <Setter Property="Width" Value="{Binding Path=Coil.Width, Mode=OneTime}"/>
        <Setter Property="Height" Value="{Binding Path=Coil.Height, Mode=OneTime}"/>
    </Style>
</Rectangle.Style>
<Rectangle.Triggers>
    <EventTrigger RoutedEvent="Rectangle.MouseEnter">
        <EventTrigger.Actions>
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="Width" 
                                        To="{Binding Path=Coil.Width, Mode=OneWay}"
                                        Duration="0:0:5"/>
                    <DoubleAnimation Storyboard.TargetProperty="Height" 
                                        To="{Binding Path=Coil.Height, Mode=OneWay}"
                                        Duration="0:0:0.5"/>
                    <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" 
                                        To="{Binding Path=Coil.Left, Mode=OneWay}"
                                        Duration="0:0:5"/>
                    <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" 
                                        To="{Binding Path=Coil.Top, Mode=OneWay}"
                                        Duration="0:0:5"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger.Actions>
    </EventTrigger>
</Rectangle.Triggers> 
```

当我将鼠标移到 Rectangle 上时，它会通过动画更改为 Coil.Left、Top、Width 和 Height 的当前属性值，如预期的那样。

但是，我想要完成的是对 Coil 属性值的任何更改都是动画更改。所以我的计划是设置一个 DataTrigger 并使用一个转换器来始终返回 true，这样任何更改都会导致通过动画播放更改。

但无论我做什么，当我使用 DataTrigger 时，它甚至在打开窗口之前都会收到异常错误，我不知道为什么会这样。为了简单起见，我取出了转换器，只使用了一个直值：

```
<Rectangle Fill="{x:Static SystemColors.ControlBrush}" 
        Stroke="black">
<Rectangle.Style>
    <Style TargetType="{x:Type Rectangle}">
        <Setter Property="Canvas.Left" Value="{Binding Path=Coil.Left, Mode=OneTime}"/>
        <Setter Property="Canvas.Top" Value="{Binding Path=Coil.Top, Mode=OneTime}"/>
        <Setter Property="Width" Value="{Binding Path=Coil.Width, Mode=OneTime}"/>
        <Setter Property="Height" Value="{Binding Path=Coil.Height, Mode=OneTime}"/>
    </Style>
</Rectangle.Style>
<Rectangle.Triggers>
    <DataTrigger Binding="{Binding Path=Coil.Height}" Value="60">
        <DataTrigger.EnterActions>
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="Width" 
                                        To="{Binding Path=Coil.Width, Mode=OneWay}"
                                        Duration="0:0:5"/>
                    <DoubleAnimation Storyboard.TargetProperty="Height" 
                                        To="{Binding Path=Coil.Height, Mode=OneWay}"
                                        Duration="0:0:0.5"/>
                    <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" 
                                        To="{Binding Path=Coil.Left, Mode=OneWay}"
                                        Duration="0:0:5"/>
                    <DoubleAnimation Storyboard.TargetProperty="(Canvas.Top)" 
                                        To="{Binding Path=Coil.Top, Mode=OneWay}"
                                        Duration="0:0:5"/>
                </Storyboard>
            </BeginStoryboard>
        </DataTrigger.EnterActions>
    </DataTrigger>
</Rectangle.Triggers> 
```

关于为什么这会给我一个异常错误的任何想法？我确信这只是我对 WPF 缺乏经验的问题。这是我的第一个项目。

先感谢您。

- 约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T05:37:21.513

最近在读这个。尽管 and 有相似之处`EventTriggers`，但`DataTriggers`您可以`Binding`在内部使用`Storyboard`for the`EventTrigger`而不是 the `DataTrigger`。

因此，如果您尝试在如下条件内使用绑定，您将收到**System.Windows.Markup.XamlParseException错误，**`Storyboard`

```
<Style.Triggers>
  <DataTrigger Binding="{Binding Path=IsBarVisible, 
    Converter={StaticResource myBooleanToVisibiltyConverter}}" Value="Visible">
    <DataTrigger.EnterActions>
      <BeginStoryboard>
        <Storyboard>
          <DoubleAnimation
            Storyboard.TargetProperty="Value"
            From="{Binding Path=ProgressedAmout}"
            To="100"
            Duration="0:0:50"
          ></DoubleAnimation>
        </Storyboard>
      </BeginStoryboard>
    </DataTrigger.EnterActions>
  </DataTrigger>
</Style.Triggers> 
```

您可以使用 and`EventTrigger`作为回报或摆脱`Storyborad`'s `To`to`From`绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:03:43.107

对于一个`FrameworkElement`你`Rectangle`只能使用的`EventTrigger`. 在`Style`, 中`ControlTemplate`，`DataTemplate`您也可以使用`Trigger`/`MultiTrigger`和`DataTrigger`/ `MultiDataTrigger`。

这意味着让你`DataTrigger`融入`Rectangle`风格，它应该可以工作：

```
<Rectangle Fill="{x:Static SystemColors.ControlBrush}" Stroke="Black">
    <Rectangle.Style>
        <Style TargetType="{x:Type Rectangle}">
            ... 
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=Coil.Height}" Value="60">
                    ...
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Rectangle.Style>
</Rectangle> 
```

# html - 失去 :hover status on between 's in Chrome

> ID：10638819
> 
> 赞同：4
> 
> 时间：2012-05-17T15:33:25.670
> 
> 标签：html, css, hover

我试图通过在用户悬停在行上时更改行的背景颜色来实现简单的表格行悬停效果，这很简单：

```
tr:hover {
    background: red;
} 
```

但是，我注意到 chrome 中的一个错误，即在一行中的单元格之间有一个小空间，我丢失了`:hover`，并且`<tr>`当你在它上面移动时，即使我的鼠标仍在行上，也会打开/关闭样式。

我试过了`border-collapse: collapse`，`cellspacing="0"`但不明白为什么我失去了`<tr>`单元格之间的悬停，它只发生在单元格的两侧，而不是它们的上方/下方。它在 Firefox 中按预期工作。

这是一个[JSFiddle](http://jsfiddle.net/2Sgqy/3/)，在 Chrome 中，尝试慢慢地将鼠标从“第一”移动到“第二”，你会看到它们之间有一个非常薄的点，它`<tr>`失去了悬停背景。

我在[这里](http://code.google.com/p/chromium/issues/detail?id=128552)将其报告为 Chromium 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:40:43.480

我不知道为什么会这样，但是在`<td>`元素上设置定位似乎可以在 Chrome 中解决这个问题。

```
td {
    padding: 2px 5px;
    position:relative;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/2Sgqy/4/)**。

# algorithm - 子集推理 NP 完全？

> ID：10638822
> 
> 赞同：5
> 
> 时间：2012-05-17T15:33:27.650
> 
> 标签：algorithm, np-complete

考虑以下问题：

有 N 个硬币，编号为 1 到 N。

你看不到它们，但会得到关于它们的 M 事实，形式如下：

```
struct Fact
{
    set<int> positions
    int num_heads
} 
```

`positions`标识硬币的一个子集，并且`num_heads`是该子集中硬币正面的数量。

鉴于这些 M 事实，您需要计算出可能存在的最大正面数量。

这个问题是NP完全的吗？如果是，减少量是多少？如果不是，什么是多项式时间解？

例如：

```
N = 5
M = 3
fact1 = { {1, 2}, 1 } // Either coin 1 or coin 2 is a head
fact2 = { {4}, 0 } // Coin 4 is a tail
fact3 = { {2, 4, 5}, 2 } // Out of coins 2, 4 and 5, two are heads 
```

与事实相匹配的头部最多的配置是：

```
T H H T H 
```

所以答案是3个头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:46:19.737

假设你有一个 3-SAT 问题。您可以将该问题中的每个布尔变量 v 映射到两个硬币。称它们为“真（v）”和“假（v）”。这个想法是，如果 3-SAT 问题的解决方案中的 v 为真，那么 'true(v)' 是正面；否则 'false(v)' 是正面。对于每个 v，您添加硬币约束

```
{true(v), false(v)} has 1 heads, and has 1 tails 
```

在此之后，您可以翻译带有文字 l1、l2、l3 的 3-SAT 子句

```
l1 or l2 or l3 
```

硬币约束

```
{t/f(l1), t/f(l2), t/f(l3)} has at least 1 heads 
```

其中 t/f(l1) 是“true(l1)”或“false(l1)”，具体取决于子句中 l1 是肯定的（非否定的）还是否定的（否定的）。我们只需要证明“至少 1 个正面”可以在硬币问题中实现，因为“至少 1 个正面”不能直接表达。这可以通过以下设备完成。让 C1、C2、C3 是三个硬币，我们要声明约束“其中至少一个是正面”。创建另外三个硬币 X1、X2、X3 并放入约束

```
{X1, X2, X3, C1, C2, C3} has 4 heads 
```

但对 X1、X2、X3 没有其他约束。仅当 C1、C2、C3 中的至少一个是正面时，才满足此约束；硬币 X1..3 可用于提供剩余的所需正面。

请注意，这种减少根本没有使用问题的“最大正面数”方面；如果 3-SAT 公式不可满足，则根本不可能为代表布尔变量的硬币选择正面/反面状态。

这是从 3-SAT 到您的硬币问题的多项式简化，表明它是 NP 难的。为了证明它是 NP 完全的，只需观察硬币问题的解决方案可以在多项式时间内检查，QED。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:06:23.243

[三分之一的 3SAT](http://en.wikipedia.org/wiki/One-in-three_3SAT)微不足道地简化为问题的决策版本（是否存在配置？），这在 NP 中微不足道。最大化版本是 NP*难*的（但不完整，因为它不是一个决策问题），即使是承诺版本也必须有一个令人满意的配置：在决策缩减的输出中添加一个出现在所有子集中的额外硬币，创建一个糟糕的额外解决方案，其中硬币是正面，所有其他都是反面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:08:29.227

完美匹配可以直接减少这个问题 - 将边表示为硬币，因为图中的每个顶点都会创建一个事实，规定恰好有一个附带边是正面。当且仅当硬币有解时，原始图中存在完美匹配。

# javascript - JavaScript 变量范围不期望结果

> ID：10638823
> 
> 赞同：2
> 
> 时间：2012-05-17T15:33:31.810
> 
> 标签：javascript

`bar`第二个console.log发生了什么？不应该是“Andy”还是抛出参考错误？另外，为什么`foo`不是未定义的？

使用铬。

```
// lexical scope example
var bar = "Andy";
try {
    console.log(bar); // Andy
    (function() {
        console.log(bar); // undefined!
        var bar = "B",
            foo = "Last Name";
        console.log(bar); // B
        console.log(foo); // Last Name
    })();
    console.log(bar); // B
    console.log(foo); // Reference Error
} catch (e) {
    console.log(e);
}​ 
```

以上的JSFiddle：http: [//jsfiddle.net/2D9fj/3/](http://jsfiddle.net/2D9fj/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:43:30.183

var 声明被提升，在被解析后你的代码看起来像，（这就是为什么很多开发人员都在顶部定义他们的 var）

```
// lexical scope example
var bar = "Andy";
try {
    console.log(bar); // Andy
    (function() {
         var bar, foo;
        console.log(bar); // undefined!
        bar = "B";
        foo = "Last Name";
        console.log(bar); // B
        console.log(foo); // Last Name
    })();
    console.log(bar); // B
    console.log(foo); // Reference Error
} catch (e) {
    console.log(e);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:42:05.710

以开头的行`(function() {`创建一个范围/闭包，其中包含 bar、foo vars，其值在范围/闭包之外无效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:47:03.267

Andrew 的回答是正确的，但我认为提供一个仅说明提升概念的示例而不需要额外的代码会很有用。

```
// this: 
function foo() {
    console.log(x);
    var x = 1;
}

//is actually interpreted like this:
function foo() {
    var x;
    console.log(x);// undefined
    x = 1;
} 
```

此外，关闭与这个问题有关，但只是因为它使识别提升错误变得更加困难。

```
(function parent() {
  // x declared and assigned in parent scope
  var x = 2;

  function foo() {
      console.log(x); // 2 (closed around parent scope)
  }

  function bar() {
      console.log(x); // undefined (bar scope, x declaration is hoisted, but not defined yet)
      var x = 1;
  }
  function baz() {
      var x = 3;
      console.log(x); // 3 (baz scope, defined)
  }
  //run 
  foo();
  bar();
  baz();
}()); 
```

# java - Java 反射 - setAccessible(true) 的影响

> ID：10638826
> 
> 赞同：122
> 
> 时间：2012-05-17T15:33:38.183
> 
> 标签：java, reflection

我正在使用一些注释来动态设置类中字段的值。因为无论它是公共的、受保护的还是私有的，我都想这样做，所以`setAccessible(true)`每次在调用该`set()`方法之前，我都是在调用 Field 对象。`setAccessible()`我的问题是这个电话对球场本身有什么样的影响？

更具体地说，假设它是一个私有字段，并且这组代码调用`setAccessible(true)`. 如果代码中的其他地方是通过反射检索相同的字段，该字段是否已经可以访问？还是`getDeclaredFields()`and`getDeclaredField()`方法每次都返回 Field 对象的新实例？

我想另一种说明问题的方式是，如果我打电话`setAccessible(true)`，在我完成后将其设置回原始值有多重要？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-05-17T15:43:27.263

随着`setAccessible()`您更改 的行为`AccessibleObject`，即`Field`实例，而不是类的实际字段。这是[文档](https://docs.oracle.com/javase/10/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible(boolean))（摘录）：

> 值`true`指示反射对象在使用时应禁止检查 Java 语言访问控制

还有一个可运行的例子：

```
public class FieldAccessible {
    public static class MyClass {
        private String theField;
    }

    public static void main(String[] args) throws Exception {
        MyClass myClass = new MyClass();
        Field field1 = myClass.getClass().getDeclaredField("theField");
        field1.setAccessible(true);
        System.out.println(field1.get(myClass)); // no exception
        Field field2 = myClass.getClass().getDeclaredField("theField");
        System.out.println(field2.get(myClass)); // IllegalAccessException
    }

} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-17T15:41:09.893

该`getDeclaredField`方法每次都必须返回一个新对象，正是因为该对象具有可变`accessible`标志。所以不需要重新设置标志。您可以在[此博客文章](http://www.artima.com/weblogs/viewpost.jsp?thread=164042)中找到完整的详细信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-12T00:42:43.707

正如其他海报所指出的那样，`setAccessible`仅适用于您的实例`java.lang.reflect.Field`，因此不需要将可访问性设置回其原始状态。

然而...

如果你希望你的调用`field.setAccessible(true)`是持久的，你需要使用`java.lang.Class`和中的底层方法`java.lang.reflect.Field`。面向公众的方法会向您发送实例的*副本*`Field`，因此每次执行类似操作后它都会*“忘记”*`class.getField(name)`

```
import java.lang.reflect.*;
import sun.reflect.FieldAccessor;

public class Reflect {
    private static Method privateGetDeclaredFields;
    private static Method getFieldAccessor;

    public static Field[] fields(Class<?> clazz) throws Exception {
        return (Field[]) privateGetDeclaredFields.invoke(clazz, false);
    }

    public static <T> T get(Object instance, Field field) throws Exception {
        return ((FieldAccessor) getFieldAccessor.invoke(field, instance)).get(instance);
    }

    public static void set(Object instance, Field field, Object value) throws Exception {
        ((FieldAccessor) getFieldAccessor.invoke(field, instance)).set(instance, value);
    }

    static {
        try {
            // These are used to access the direct Field instances instead of the copies you normally get through #getDeclaredFields.
            privateGetDeclaredFields = Class.class.getDeclaredMethod("privateGetDeclaredFields", boolean.class);
            privateGetDeclaredFields.setAccessible(true);
            getFieldAccessor = Field.class.getDeclaredMethod("getFieldAccessor", Object.class);
            getFieldAccessor.setAccessible(true);
        } catch (Exception e) {
            // Should only occur if the internals change.
            e.printStackTrace();
        }
    }
} 
```

**更新**：此实现适用于 Java 8，未来版本会更改破坏此的后端。如果您真的希望继续此策略，同样的概念仍然适用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-23T09:45:52.903

```
import java.lang.reflect.Field;
import java.lang.reflect.Method;

public class PrivateVariableAcc {

    public static void main(String[] args) throws Exception {
        PrivateVarTest myClass = new PrivateVarTest();
        Field field1 = myClass.getClass().getDeclaredField("a");
        field1.setAccessible(true);
        System.out.println("This is access the private field-"
            + field1.get(myClass));
        Method mm = myClass.getClass().getDeclaredMethod("getA");
        mm.setAccessible(true);
        System.out.println("This is calling the private method-"
            + mm.invoke(myClass, null));
    }

} 
```

# powerbuilder - PowerBuilder AcceptText 不调用 ItemChanged

> ID：10638827
> 
> 赞同：0
> 
> 时间：2012-05-17T15:33:39.303
> 
> 标签：powerbuilder

我有一个数据窗口，用户可以在其中编辑数据，然后单击“保存”按钮。我已经在数据窗口上对`ItemChanged`事件进行了编码，以将旧值和新值存储在实例变量中，以便可以将它们保存在数据库中以供参考。如果用户在 DW 中编辑一个字段并且没有制表符，`ItemChanged`则不会被调用。因此，如果他们输入数据并立即单击“保存”，则不会填充实例变量。

我`AcceptText`首先在“保存”按钮中调用，该按钮应该在 DW 中获取所有输入的数据并调用`ItemChanged`（根据 PB 帮助）。但事实并非如此。奇怪的是，它似乎正在浏览“保存”按钮中的所有代码，然后浏览`ItemChanged`事件中的代码。

另一个奇怪的事情是，如果我调试它并在`ItemChanged`事件中放置一个断点，当我单击“保存”时，它将通过`ItemChanged`代码，但它不会执行“保存”按钮代码。我必须再次单击“保存”。仅当我调试时并且仅当我在那里有断点时 - 当我正常运行应用程序或在没有断点的情况下调试时，它会`ItemChanged`在 Save 按钮之后调用。

我从来没有见过这样的事情，所以我很感激你能提供任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:00:03.853

如果按照 Terry 的建议进行完全重建不能解决您的问题，请尝试迁移目标。我会直接去迁移，而不是尝试另一个完全重建。将迁移视为“不，*真正*重建一切”命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:20:34.003

当您看到没有意义的程序流程时，我在[我的 PB 故障排除指南](http://www.techno-kitten.com/PowerBuilder_Help/Troubleshooting/troubleshooting.html)中推荐的第一件事是重新生成所有内容，即进行完整构建。仅此一项就可以解决问题。（选择性再生也可以解决它，但是如果您对所需的依赖关系或序列有任何疑问，我倾向于使用系统导向的基因。）

如果您想知道如何进入 ItemChanged 的​​实例，我首先要看的是调试器中的调用堆栈窗格。如果它来自 AcceptText() 调用，您应该在双击当前级别上方的级别时看到它。如果 ItemChanged 上方没有调用堆栈，则可能是从列中跳出、按 Enter 或发布的 AcceptText()。有时，PBDEBUG 跟踪与[PBL Peeper 中的 Trace 页面](http://www.techno-kitten.com/PBL_Peeper/Online_Manual/Trace_Page/trace_page.html)相结合，可以在调试器没有的情况下阐明您是如何到达那里的。

这绝对是一种奇怪的行为，我希望 regen 能解决你的问题。

祝你好运，

特里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T17:18:24.090

在我使用 PB 的 19 年开发过程中，还没有见过或听到过这样的事情！只有对象已损坏并且您可以按照@Terry 所说的那样重新生成它。当然，您也可以尝试将 Windows、datawindows 导出到不同的 PBL 并尝试它是否可以在那里工作。大约 10 年前，我遇到了类似的问题，即 PBL 文件已损坏并且重新生成对象没有帮助。意外地，我尝试重新创建一个新应用程序，它在那里工作。慢慢地，随着更多的测试，这一点变得明显。希望您不要浪费我们在这样一个愚蠢的问题上浪费的时间！

# php - 为什么我的查询只更新奇数行

> ID：10638832
> 
> 赞同：1
> 
> 时间：2012-05-17T15:33:47.990
> 
> 标签：php, mysql

我目前正在编写代码以简单地在数据库表中一次更新一行。然而，只有奇数行被更新，而偶数行没有被更新。

这是我的PHP：

```
<?php
require_once ("connect.php");
$id = $_GET['id'];
$title = $_POST['title'];
$description = $_POST['description'];

$query = "UPDATE tbl_shows SET shows_title='$title', shows_description='$description' WHERE shows_id='$id'";
$result = mysql_query($query);

 if ($result) {
    header ("Location: shows.php?=success");
    exit ();
} else {
    echo "<p>Still doesn't work</p>";
        exit ();
}
?> 
```

我已经打印了我的 $id、$title 和 $description 变量，它们都按应有的方式显示。

如何更改我的代码，以便更新偶数和奇数行。

编辑：

回显 $id、$title、$description 和 $query 对于奇数行和偶数行显示相同。

什么 mysql_error() 输出：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在附近使用的正确语法（该行中的部分数据出现在此处并消除错误）第 1 行的 WHE'

查询：

```
UPDATE tbl_shows SET shows_title='Title is here', shows_description='Description is here' WHERE shows_id='2' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:35:32.910

**您的代码具有简单的 sql 注入漏洞**，这可能导致您看到的无意错误。例如，如果您的 $description 如下所示：

```
Best movie ever!!! You're going to love it! 
```

...那么您的连接查询将如下所示：

```
UPDATE tbl_shows SET shows_title='Title is here', shows_description='Best movie ever!!! You're going to love it!' WHERE shows_id='2' 
```

**这样做的问题是，撇号 in`you're`将导致值`show_description`to terminate**，并且查询的其余部分对 SQL 不再有意义。

至少，**使用 mysql_real_escape_string()**来清理你添加到查询中的变量，更好的是，使用 php 的 PDO 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:51:35.093

目前尚不清楚是什么原因导致偶数项无法从您发布的内容中更新。我建议您使用[mysql_error](http://www.php.net/manual/en/function.mysql-error.php)函数在 $result 为 false 时显示您收到的确切错误消息。根据 PHP 文档，mysql_result 仅在错误时返回 false，因此这是一个很好的迹象，表明可能发生了一些奇怪的事情。

# file - 如何从文件中读取 xxx 个字节，输出到变量

> ID：10638836
> 
> 赞同：2
> 
> 时间：2012-05-17T15:33:56.540
> 
> 标签：file, variables, batch-file, split, sequential

我试图将文件拆分为 8159 字节长的连续页面。我如何读取文件的 8159 字节并保存到全部！计数！变量？如果文件为 8159 或更少，它会读取文件并将其设置为 !all! 多变的。我如何在 :split 标签中只读取这么多字节并保存到变量中。

```
@echo off
setlocal EnableDelayedExpansion EnableExtensions
for /f "tokens=*" %%a in ("newhtml.html") do set FileSize=%%~za
echo FileSize is %FileSize% bytes
if %FileSize% GTR 8159 goto split

SETLOCAL DisableDelayedExpansion 
set "all="
FOR /F "usebackq delims=" %%a in (`"findstr /n ^^ newhtml.html"`) do (
    set "line=%%a"
    SETLOCAL EnableDelayedExpansion
    set "line=!line:#=#S!"
    set "line=!line:*:=!"
    for /F "delims=" %%p in ("!all!#L!line!") do (
        ENDLOCAL
        set "all=%%p"
    )
)
SETLOCAL EnableDelayedExpansion
if defined all (
set "all=!all:~2!"
set ^"all=!all:#L=^
[blank line, remove this comment]
[blank line, remove this comment]   
!"
set "all=!all:#S=#!"
)
echo the all variable is: !all!
goto end

:split
set count=0
set /a all_sub=%FileSize% / 8159
set /a all_rem=%FileSize% %% 8159
if %all_rem% NEQ 0 set /a all_ttl=%all_sub% + 1
echo %all_sub% full page(s), %all_rem% bytes(s) leftover, %all_ttl% total pages

for  %%a in ("newhtml.html") do (
    set /a count=count + 1
    echo Read 8159 bytes from this file newhtml.html, save to all!count!
    if !count! EQU %all_ttl% echo All done & goto end
)

goto end

:end 
```

需要帮助的部分是拆分标签，在读取文件的for循环中，如何一次只获取8159字节的数据并写入顺序变量。我想我应该做！所有！一个函数然后调用它？

编辑：我找到了这个文件（http://www.fourmilab.ch/splits/）来进行拆分，将其添加到 ALL 例程以重新组装的简短工作。非常感谢dbenham和jeb！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:13:22.087

为什么不简单地将文件读入*数组*？
如果没有任何行超过 ~8190 个字符，则每一行将是一个有效的条目。
然后你不需要换行等的替换技巧。

但这取决于您的实际问题。

```
@echo off
SETLOCAL DisableDelayedExpansion
set "all="
set count=0
FOR /F "usebackq delims=" %%a in (`"findstr /n ^^ aux1.txt"`) do (
    set "line=%%a"
    set /a count+=1
    SETLOCAL EnableDelayedExpansion
    set "line=!line:*:=!"
    for /F "delims=" %%p in (^"set "array[!count!]=!line!"^") do (
        ENDLOCAL
        %%p
    )
)

SETLOCAL EnableDelayedExpansion
for /L %%n in (1 1 %count%) do (
  echo Line%%n:!array[%%n]!
) 
```

# java - OSGI 服务版本控制实践？

> ID：10638840
> 
> 赞同：4
> 
> 时间：2012-05-17T15:34:26.957
> 
> 标签：java, service, osgi, versioning

我熟悉 OSGI Semantic Versioning - 技术白皮书。但是，我没有看到针对 OSGI 服务提出的任何版本控制概念。

简单情况：我提供注册为 com.services.payments.PaymentService 的服务，它执行方法 void makePayment(Integer amount, String accountNo)，我将其打包为 1.0 版。然后，我用修改后的界面更新服务。我删除此方法并添加新方法：makePaymentInDifferentWay (Integer amount, String accountNo) 并将新服务打包为捆绑版本 2.0。第一个捆绑包停止后，客户端将连接第二个服务，并且**崩溃**在服务调用时，因为方法签名不是二进制兼容的。当您处理 java 包时，这种情况得到了完美的解决，但是我没有看到 OSGI 服务有任何开箱即用的版本控制功能。我错过了什么吗？（我知道我可以通过设置像'service.version'这样的服务属性来预先设计版本控制方案，并在客户端通过这个属性过滤提供的服务，或者只是重命名一个API包或类名，但是为什么没有提供版本控制框？也许还有其他更标准的方式解决方案？也许有一些与服务相关的概念我根本没有掌握？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:18:38.600

服务是类型，类型在包中。所以服务的版本是包含服务类型的包的版本。OSGi 框架确保仅当客户端使用与服务提供者相同的服务类型包时才向客户端公开服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:10:14.617

客户端应该在其 Import-Package 语句（或 Require-Bundle）语句上有版本，例如：

```
Import-Package: com.services.payments;version="[1.0,2.0)" 
```

该服务会将包导出为：

```
Export-Package:  com.services.payments;version="1.0.0" 
```

停止第一个捆绑包并安装第二个捆绑包后，客户端将无法解析 resolve（由于所需的约束，`com.services.payments;version="[1.0,2.0)"`将不会满足。

此外，如果您有两个 API 包，一个包版本为“1.0.0”，第二个包版本为“2.0.0”，并且客户端导入“1.0.0”API，客户端将不会“看到”服务实现 API版本“2.0.0”。

# java - 使用 Java Socket 发送 HTTP 响应时遇到问题

> ID：10638848
> 
> 赞同：4
> 
> 时间：2012-05-17T15:35:24.000
> 
> 标签：java, http, sockets

我一直在尝试编写一个简单的 Web 服务器的开始，但似乎无法获得发送的响应。我已经尝试了所有可以想象的输出流类型，但似乎没有任何效果。我不知所措。这是我正在使用的两个类，对一些无关代码感到抱歉：

```
package edu.xsi.webserver;

import java.io.IOException;
import java.net.ServerSocket;

public class WebServer {

int port;
ServerSocket server;

public WebServer(int port) throws IOException{

    this.port = port;
    this.server = new ServerSocket(port);
    Thread t = new Thread(new ServerExec());
    t.start();

}

public class ServerExec implements Runnable {

    public void run(){

        int i = 0;
        while (true) {

            try {
                new WebSession(server.accept(), i++);
                System.out.println("Should print before session");
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    }

}

public static void main(String[] args) {

    try {
        WebServer webServer = new WebServer(8888);
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

这是处理响应的会话类。

```
package edu.xsi.webserver;

import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.util.Scanner;

public class WebSession implements Runnable {

Socket client;
int num;

public WebSession(Socket client, int num) {

    this.num = num;
    this.client = client;
    Thread t = new Thread(this);
    t.start();
}

public void run() {

    Scanner s = null;
    DataOutputStream out = null;

    try {

        s = new Scanner(client.getInputStream());
        out = new DataOutputStream(client.getOutputStream());

        //Get all input from header
        while (s.hasNextLine()) {
            System.out.println(s.nextLine());
        }
        out.writeBytes("HTTP/1.1 200 OK\r\n");
        out.writeBytes("Content-Type: text/html\r\n\r\n");
        out.writeBytes("<html><head></head><body><h1>Hello</h1></body></html>");

        s.close();
        out.flush();
        out.close();

    } catch(IOException ioe) {

        ioe.printStackTrace();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-30T14:49:40.273

我一直在为一个非常相似的问题而疯狂地挣扎。

在把头扎在墙上之后，我发现*我的*问题是如此微不足道，我一直在墙上敲了一会儿头。

基本上在我的输入 while 循环中，我正在检查空行，但我忘记检查**空行**（随后中断）。

不能保证它对你也一样，但这是我的一分钱：

```
in = session.getInputStream();
BufferedReader br = new BufferedReader(new InputStreamReader(in));
String line = null;
while ((line = br.readLine()) != null) {
    System.out.println(line);
    // this seems to be the key for me! 
    // somehow I never get out of this loop if I don't 
    // check for an empty line...
    if (line.isEmpty()) {
        break;
    }
}
out = new BufferedWriter(
    new OutputStreamWriter(
        new BufferedOutputStream(session.getOutputStream()), "UTF-8")
);
out.write(OUTPUT_HEADERS + OUTPUT.length() + OUTPUT_END_OF_HEADERS + OUTPUT);
out.flush();
out.close();
session.close(); 
```

我的常数是：

```
private static final String OUTPUT = "<html><head><title>Example</title></head><body><p>Worked!!!</p></body></html>";
private static final String OUTPUT_HEADERS = "HTTP/1.1 200 OK\r\n" +
    "Content-Type: text/html\r\n" + 
    "Content-Length: ";
private static final String OUTPUT_END_OF_HEADERS = "\r\n\r\n"; 
```

我的“会话”变量是一个`Socket`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T22:02:50.680

关闭 Scanner 会关闭底层输入流，从而关闭套接字。不要关闭它。关闭输出流也会关闭套接字。您不需要两者，您应该关闭输出流/写入器而不是输入流，以便刷新它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-06T04:39:59.340

以下代码将解决您的问题：

```
package com.cs.sajal;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class TestCls {

    public static void main(String[] args) {
        boolean flag = false;

        try {
            ServerSocket ss = new ServerSocket(8080);
            if (ss.isBound()) {
                while (flag = true) {
                    final Socket s = ss.accept();

                    Thread t1=new Thread(new Runnable (){String line = null;public void run(){try{ InputStream is = s.getInputStream();
                    BufferedReader br = new BufferedReader(
                            new InputStreamReader(is));

                    while ((line = br.readLine()) != null) {
                        System.out.println(line);
                    }
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                    }});

                    Thread t2=new Thread(new Runnable (){String line = null;public void run(){try{ OutputStream os = s.getOutputStream();
                    Scanner sc=new Scanner(System.in);
                    String inp=null;
                    String t="HTTP/1.1 200 OK\r\n";
                    byte[]s=t.getBytes("UTF-8");
                    os.write(s);

                    t="Content-Length: 788\r\n";
                    s=t.getBytes("UTF-8");
                    os.write(s);
                    t="Content-Type: text/html\r\n\r\n";
                    s=t.getBytes("UTF-8");
                    os.write(s);

                    t="\r\n\r\n<html><body><h1>this is output</h1><table cellpading=5 border=5><tr><td>name</td><td>age></td><td>height</td></tr></table></body></html>\r\n\r\n";
                    s=t.getBytes("UTF-8");
                    os.write(s);
                    t="Connection: Closed";
                    s=t.getBytes("UTF-8");
                    os.write(s);

                    os.flush();
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                    }});
                    t1.start();
                    t2.start();t1.join();
                    t2.join();

                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-11T13:21:20.660

尝试通过日期。

```
 String res = "HTTP/1.0 200 OK\n"
         + "Server: HTTP server/0.1\n";
         + "Date: "+format.format(new java.util.Date())+"\n"; 
   + "Content-type: text/html; charset=UTF-8\n"; 
         + "Content-Length: 38\n\n";
         + "<html><body>OK</body></html>";
out.write(res.getBytes());
out.flush();

private SimpleDateFormat format = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:Ss z"); 
```

# jquery - 滚动时如何保持jquery ui datepicker（坚持输入控件）？

> ID：10638854
> 
> 赞同：8
> 
> 时间：2012-05-17T15:35:46.620
> 
> 标签：jquery, css, jquery-ui, uidatepicker

在阅读了很多关于该主题的内容后，我仍然对如何解决问题一无所知。为了澄清问题，我希望日历与关联的输入控件一起滚动，而不是固定在任何屏幕位置。这是没有滚动的图像：（这也是我想在滚动上保留的） ![在此处输入图像描述](../Images/bb1ebdaebadae607d108be33a459ad5c.png)

这是滚动时的图像：（这不是我想要的）

![在此处输入图像描述](../Images/3239a528076b06ce297d72bf0c90bbeb.png)

任何提示将不胜感激。更新：这是一个密切描述问题的[链接](http://jsbin.com/ubahe5/110/edit#javascript,html,live)，我希望日历在滚动时粘在控件上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T17:51:38.963

我不确定你的是否是可滚动的 div，但这里发生的问题是 jQuery UI 日期选择器在可滚动的 div 内不会随 HTML 内容移动。

这是一个演示[http://jsfiddle.net/joycse06/m6A5q/embedded/result/](http://jsfiddle.net/joycse06/m6A5q/embedded/result/)演示问题的小提琴。单击输入并尝试滚动该 div。

发生这种情况是因为 jQuery UI 将日历 UI 创建为容器可滚动 div 的位置`absolute` `relative`或不`document`作为位置。`window`因此，当可滚动 div 滚动时，主窗口的滚动上下文不会更改，因此 datepicker 日历不会跟随该 div 中的其他 html 元素。

因此，解决方案可以是在滚动该 div 时隐藏日历，这很有意义，如果输入不可见，您可以隐藏 datepicker 日历。所以更新的代码将是

```
var datePicker = $('#datepicker').datepicker();

$(".demo").scroll(function() {
  datePicker.datepicker('hide');
  $('#datepicker').blur();
});

$(window).resize(function() {
  datePicker.datepicker('hide');
  $('#datepicker').blur();
}); 
```

滚动容器 div 或窗口时，它将隐藏日期选择器。这是一个工作小提琴[http://jsfiddle.net/joycse06/m6A5q/2/](http://jsfiddle.net/joycse06/m6A5q/2/)

我正在使用，`$('#datepicker').blur();`因为当用户滚动`.demo`日历隐藏但`input`仍然集中，所以当他向后滚动时，他可能会变得困惑。所以当我模糊它时，他将不得不`input`再次点击，日期选择器就会出现。

# php - 创建一个 json 输出

> ID：10638865
> 
> 赞同：-2
> 
> 时间：2012-05-17T15:36:08.550
> 
> 标签：php, json

我创建了一个 json 输出，这就是它现在的样子：

```
{"attributes":{"next":4189646},"images":{"0":{"id":"4188043","title":"Easter Island .... 
```

但我希望它看起来像：

```
{"attributes":{"next":4197237},"images":[{"id":4198434,"title":"Good Morning" ... 
```

我怎样才能摆脱`images`阵列ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:39:15.260

为了将数组编码为`[...]`而不是`{"0":...}`，数组必须是“纯”索引数组。

这可以通过[`array_values()`](http://php.net/array-values)首先运行它来轻松实现。

# javascript - 是否可以使用 for 循环编辑多个数组？

> ID：10638866
> 
> 赞同：0
> 
> 时间：2012-05-17T15:36:25.170
> 
> 标签：javascript, arrays, for-loop

是否可以像下面这样循环遍历一系列单独的数组？

```
var test;

var ratedItems0 = new Array();
var ratedItems1 = new Array();
var ratedItems2 = new Array();
var ratedItems3 = new Array();
var ratedItems4 = new Array();
var ratedItems5 = new Array();    

for(var i=0; i<6; i++)
{
    test = 'test add num: '+ i
    ["ratedItems"+(i+1)].push(test);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:44:28.567

您应该将数据重组为多维数组：

```
var ratedItems = new Array();
ratedItems[0] = new Array();
...

for(var i=0; i<ratedItems.length; i++) {
    var test = 'test add num: '+ i;
    ratedItems[i].push(test);
} 
```

或者，如果由于某种原因您不能以这种方式重组，您希望将每个元素作为 的属性引用`window`：

```
for(var i=0; i<6; i++) {
    var test = 'test add num: '+ i
    window["ratedItems"+(i+1)].push(test);
} 
```

所有全局变量都是`window`对象的成员变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:44:38.840

我相信是这样，但是为什么哦，你为什么要那样做呢？只需制作一个数组数组：

```
//init
var ratedItems = new Array();
for(var i=0; i<6; i++)
{
  ratedItems.push(new Array()); // Edited
}

// access
for(var i=0; i<6; i++)
{
  ratedItems[i].push(test)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:46:01.897

尝试将它们全部放在一个对象中或创建一个数组数组。

```
var test;

var bob = 
    {
ratedItems0 : new Array(),
ratedItems1 : new Array(),
ratedItems2 : new Array(),
ratedItems3 : new Array(),
ratedItems4 : new Array(),
ratedItems5 : new Array()
};

for(var i=0; i<6; i++)
{
    test = 'test add num: '+ i
    bob ["ratedItems"+(i+1)].push(test);
}​ 
```

# dojo - 程序化 dojox.grid.DataGrid 上的水平滚动条

> ID：10638873
> 
> 赞同：1
> 
> 时间：2012-05-17T15:36:58.337
> 
> 标签：dojo, dojox.grid.datagrid

如何不显示水平滚动条？

我正在尝试的一个例子是[http://jsfiddle.net/fdlane/gjkGF/3/](http://jsfiddle.net/fdlane/gjkGF/3/)

下面是我正在尝试做的示例页面。将容器 div 的宽度设置为大于网格宽度，我预计不会显示水平滚动条。

使用当前高度 200px 并且行数大于 6，垂直显示（良好）。但是，水平线也会显示（坏）。

我错过了什么？

谢谢

外劳

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/tundra/tundra.css" />
<link rel="stylesheet" type="text/css" title="Style" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dojox/grid/resources/Grid.css">
<link rel="stylesheet" type="text/css" title="Style" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dojox/grid/resources/tundraGrid.css">
<title>Grid Scrolling</title>
</head>
<body class="tundra">
<div id="container" style="width: 350px; height: 200px">
    <div id="myGrid">
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dojo/dojo.xd.js">    </script>
<script>
    dojo.require("dojo.store.Memory");
    dojo.require("dojo.data.ObjectStore");
    dojo.require("dojox.grid.DataGrid");

    dojo.ready(function () {

        var myStore = new dojo.store.Memory({
            data: [{ id: "RecId1", values: "fooValue1" },
            { id: "RecId2", values: "fooValue2" },
            { id: "RecId3", values: "fooValue3" },
            { id: "RecId4", values: "fooValue4" },
            { id: "RecId5", values: "fooValue5" },
            { id: "RecId6", values: "fooValue6" },
            { id: "RecId7", values: "fooValue7" },
            { id: "RecId7", values: "fooValue7"}]
        });

        dataStore = new dojo.data.ObjectStore({
            objectStore: myStore
        });

        var grid = new dojox.grid.DataGrid({

            store: dataStore,
            structure: [{
                name: "ID",
                field: "id",
                width: "100px"
            }, {
                name: "Values",
                field: "values",
                width: "100px"
            }]
        }, "myGrid");

        grid.startup();
    });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:58:34.350

将此样式覆盖添加到您的 head 元素：

```
<style>
  .dojoxGridScrollbox { overflow-x: hidden; }
</style> 
```

原因很可能是，当网格垂直溢出时，垂直（-y）滚动条出现并消耗 30（左右）像素的宽度，使得网格容器在水平方向上也溢出

您可以尝试使用网格调整大小功能 - 如果 borderlayout.resize 解决了您的问题，原因是它递归地调整其子项的大小（在某个计算的 abs 值）。使用 Grid，您会看到以下流程：

```
 resize: function(changeSize, resultSize){
                    // summary:
                    //              Update the grid's rendering dimensions and resize it

                    // Calling sizeChange calls update() which calls _resize...so let's
                    // save our input values, if any, and use them there when it gets
                    // called.  This saves us an extra call to _resize(), which can
                    // get kind of heavy.

                    // fixes #11101, should ignore resize when in autoheight mode(IE) to avoid a deadlock
                    // e.g when an autoheight editable grid put in dijit.form.Form or other similar containers,
                    // grid switch to editing mode --> grid height change --> From height change
                    // ---> Form call grid.resize() ---> grid height change  --> deaklock
                    if(dojo.isIE && !changeSize && !resultSize && this._autoHeight){
                            return;
                    }
                    this._pendingChangeSize = changeSize;
                    this._pendingResultSize = resultSize;
                    this.sizeChange();
            }, 
```

# javascript - 尝试编辑字符串中的所有内容

> ID：10638875
> 
> 赞同：0
> 
> 时间：2012-05-17T15:37:05.057
> 
> 标签：javascript, regex, replace

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:40:20.067

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:42:46.960

您不应该尝试使用正则表达式处理 HTML，因为有太多可能出错的地方。在这种情况下，如果您的标签为`<A HREF...>`怎么办？或者其他以,`a`等开头的标签呢？如果已经有属性怎么办？`<area>``<abbr>``<acronym>``target`

相反，请尝试将 HTML 视为 HTML 而不是纯文本。您触手可及的发动机。

```
var tmp = document.createElement('div');
tmp.innerHTML = itemdescription;
var links = tmp.getElementsByTagName('a'), l = links.length, i;
for( i=0; i<l; i++) {
    links[i].setAttribute("target","_blank");
}
editdescription = tmp.innerHTML; 
```

# c++ - 在C中将Windows控制台大小调整为全屏

> ID：10638876
> 
> 赞同：1
> 
> 时间：2012-05-17T15:37:07.243
> 
> 标签：c++, c, winapi

是否可以将 Windows 控制台应用程序中的控制台调整为全屏大小？

在打开控制台后，可以在窗口的首选项中执行此操作，但我无法弄清楚如何以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:45:41.047

您可以使用[GetConsoleWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)获取控制台窗口的句柄。

一旦你有了它，你应该能够使用[SetWindowPos调整它的大小](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)

在调整窗口大小之前，您可能还需要使用[SetConsoleScreenBufferSize调整控制台缓冲区的大小。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686044%28v=vs.85%29.aspx)

预计到达时间：

其他人提到使用 SetConsoleDisplayMode 以全屏（非窗口）模式显示控制台。我不确定这是否真的是你想要的。自 Windows 98 天以来，我还没有看到任何应用程序使用非窗口模式。

# cakephp - CakePHP 2.1 - Unit Testing Controllers $this->view and $this->contents equals null

> ID：10638879
> 
> 赞同：2
> 
> 时间：2012-05-17T15:37:20.413
> 
> 标签：cakephp, phpunit, cakephp-2.1

Swtiching a over to cakephp 2.1 and just starting to learn unit testing...

When I `ArticlesControllerTestCase::testView()`

and run

```
$this->testAction('articles/view/1'); 
debug($this->view); 
debug($this->contents); 
die; 
```

both `$this->view and $this->contents` is equal to null

I've emptied the beforeFilter calls and beforeRender calls to try and elimitate that...

I noticed that in the controller action, if I set `$this->render('view');` at the end of the method I get `$this->view` = 'what it is suppose to be', but `$this->contents` = 'to the same thing and does not contain the layout

any idea why this would be happening?

```
class ArticlesController extends MastersController {

    /*
     * Name
     */
    public $name = 'Articles';

    /*
     * Publicly Accessible Methods
     */
    public $allowed = array('view', 'index', 'category', 'news');

    /*
     * Default Search Params
     */
    public $presetVars = array(
        array('field' => 'title', 'type' => 'value'),
        array('field' => 'category_id', 'type' => 'value'),
        array('field' => 'status_id', 'type' => 'value'),           
    );

    /*
     * Admin Menu Options
     */
    public $adminMenu = array('index'=>array('Category'));

    /**
     * Before Filter Callback
     * (non-PHPdoc)
     * @see controllers/MastersController::beforeFilter()
     * @return void
     */
    public function beforeFilter(){
        parent::beforeFilter();
        $categories = $this->Article->Category->find('class', array('article', 'conditions'=>array('not'=>array('Category.name'=>'Content'))));
        $this->set(compact('categories'));
    }

    /**
     * View
     * @param $id
     * @see controllers/MastersController::_view()
     * @return void
     */
    public function view($id){
        parent::_view($id);
        $articleTitle = $this->Article->findField($id,'title');
        $recentNews = $this->Article->find('recentNews');
        $this->set('title_for_layout', $articleTitle);
        $this->set(compact('recentNews'));
    }
};

class MastersController extends AppController {

    /*
     * Name
     */
    public $name = 'Masters'; # expected to be overridden

    /**
     * View
     * Default view method for all controllers
     * Provides an individual record based on the record id
     * @param int $id: model id
     * @return void
     */
    protected function _view($id){
        $this->Redirect->idEmpty($id, array('action'=>'index'));
        ${Inflector::singularize($this->request->params['controller'])} = $this->{$this->modelClass}->find('record', array($id));
        ${Inflector::variable(Inflector::singularize($this->request->params['controller']))} = ${Inflector::singularize($this->request->params['controller'])};

        if(empty(${Inflector::singularize($this->request->params['controller'])})){
            return $this->Redirect->flashWarning('Invalid Id.', $this->referer());
        }       
        $this->set(compact(Inflector::singularize($this->request->params['controller']), Inflector::variable(Inflector::singularize($this->request->params['controller']))));
    }
}

class ArticlesControllerTestCase extends ControllerTestCase {

    /**
     * Fixtures
     *
     * @var array
     */
    public $fixtures = array('app.article');

    /**
     * Set Up
     *
     * @return void
     */
    public function setUp() {
        parent::setUp();
        $this->Articles = new TestArticlesController();
        $this->Articles->constructClasses();
    }

    /**
     * Tear Down
     *
     * @return void
     */
    public function tearDown() {
        unset($this->Articles);

        parent::tearDown();
    }

    /**
     * Test View
     *
     * @return void
     */
    public function testView() {
        $this->testAction('articles/view/1');
        debug($this->view); die;
    }
}

class ArticleFixture extends CakeTestFixture {

    /**
     * Fields
     *
     * @var array
     */
    public $fields = array(
        'id' => array('type' => 'integer', 'null' => false, 'default' => NULL, 'key' => 'primary'),
        'slug' => array('type' => 'string', 'null' => true, 'default' => NULL, 'length' => 120, 'collate' => 'latin1_swedish_ci', 'charset' => 'latin1'),
        'title' => array('type' => 'string', 'null' => false, 'default' => NULL, 'length' => 100, 'collate' => 'latin1_swedish_ci', 'charset' => 'latin1'),
        'body' => array('type' => 'text', 'null' => false, 'default' => NULL, 'collate' => 'latin1_swedish_ci', 'charset' => 'latin1'),
        'created' => array('type' => 'datetime', 'null' => false, 'default' => NULL),
        'modified' => array('type' => 'datetime', 'null' => false, 'default' => NULL),
        'status_id' => array('type' => 'integer', 'null' => false, 'default' => NULL),
        'category_id' => array('type' => 'integer', 'null' => false, 'default' => NULL),
        'indexes' => array('PRIMARY' => array('column' => 'id', 'unique' => 1)),
        'tableParameters' => array('charset' => 'utf8', 'collate' => 'utf8_general_ci', 'engine' => 'InnoDB')
    );

    /**
     * Records
     *
     * @var array
     */
    public $records = array(
        array(
            'id' => '1',
            'slug' => NULL,
            'title' => 'Test Article #1 without slug - published',
            'body' => '<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p><p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>',
            'created' => '2011-02-15 21:14:03',
            'modified' => '2011-02-15 21:14:03',
            'status_id' => '1',
            'category_id' => '5'
        ),
         );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-17T00:22:37.320

如果您被重定向，例如，如果会话数据不符合预期，某些身份验证代码会重定向到登录页面，则可能会发生这种情况。如果您没有在测试中设置所需的环境，您将被重定向。您可以通过检查以下值来检查`$this->headers`：

```
debug("Headers: " . print_r($this->headers)); 
```

如果您将其放入测试中并看到类似的`array('Location' => 'your_login_page')`内容，请确保您的测试环境包含使您的身份验证系统（或任何其他可能插入重定向）满意所需的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:51:01.853

您需要捕获 $this->testAction 的结果并指定要返回的内容（[http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers](http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers)）

例如

```
$result = $this->testAction('articles/view/1', array('return'=>'content'));

debug($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T05:44:49.470

如果您计划执行单元测试，您应该真正考虑测试每个单独的单元。话虽这么说，PHPUnit 在集成到 CakePHP 时相当健壮，可以提供您需要的东西，例如数据和方法模拟。

当我编写单元测试时，它看起来有点像这样：

```
function testSomeTestCaseWithDescriptiveMethodName(){
    $this->testAction("controller/action/arguments");
    $this->assertEqual([some value or data set], $this->vars["key"];
} 
```

这将允许您在不进行集成测试（包括视图、数据库访问等）的情况下针对创建的值进行测试。

我希望这有帮助。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T01:49:44.203

我想我知道导致问题的原因。您需要为 testAction() 提供方法。

```
$this->testAction('articles/view/1', array('method'=>'get')); 
debug($this->view); //should output the view
debug($this->contents);  //should output the contents 
```

恕我直言，文档（http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers）看起来默认是 GET。默认值实际上是 POST - 因此“发布”到文章/视图/1 将一无所获。

# iphone - How to implement smooth scrolling using both a UIScrollView and an UITableView?

> ID：10638880
> 
> 赞同：0
> 
> 时间：2012-05-17T15:37:27.543
> 
> 标签：iphone, ios, uitableview, uiview, uiscrollview

Is is possible to implement smooth scrolling using both a UIScrollView and placing a UITableView at somewhere starting in the middle of the screen? The UIScrollView contentSize is elongated to accomodate the additional height of the UITableView. The UITableView should be able to contain unlimited and unknown number of rows. Scrolling the entire view downwards will cause the upper non-tableview portion to first disappear and then it scrolls down just like a regular table view.

Put it in another way, I'd like to implement a table with some fixed content before the top row. Think of it like a "header area" for the tables, scrolls up and giving way to the entire table rows.

I probably know that I can implement a TableView and programatically make the first row to contain some fixed images. In this way, it will work as expected. But which is easier to implement?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:42:03.900

您真的不想将表格放在滚动视图中。当用户在表格上滚动时，它不会移动底层的滚动视图，因此您不会得到您正在寻找的效果。

改为实现 viewForHeaderInSection 并传入要在第一行上方显示的视图，或设置 tableViewHeader。

# asp.net - Mixed Mode Cookieless/Cookie Sessions in ASP.NET

> ID：10638885
> 
> 赞同：3
> 
> 时间：2012-05-17T15:37:43.720
> 
> 标签：asp.net, post, cookies, session-cookies, cookieless

Cookies in ASP.NET are causing me some problems.

For the most part, I want to use cookieless sessions. This is mainly to get around a problem where safari won't let me set the cookies from an iFrame. So that part all works fine. Cookieless sessions do the job.

However, I have a page which is called from a POST. It uses a post to pass in a hidden field from a form which then does some stuff....you don't really need to know what.

So it turns out that when cookieless sessions are on, the POST is disabled and only GETS can happen in ASP.NET web forms. This is breaking my functionality.

What I want to do is add a web.config to the folder that contains my POSTing pages to go back to normal cookie sessions so I can get my POSTs working again, but this doesn't work.

```
<?xml version="1.0"?>
 <configuration>
  <system.web>
     <sessionState cookieless="false" />
  </system.web>
 </configuration> 
```

Does anyone know a way of making a folder work with normal cookie sessions while the rest of the site works with cookieless sessions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:38:45.227

我找到了解决方案：

我所做的是创建一个 HTTP 处理程序（一个 .ashx 文件）。这从 Request.Form 中获取特定的 post 值，并将它们标记为 Querystring 参数。然后重定向到我的原始页面，该页面现在查找 Querystring 参数而不是 Form 参数。呸！

HTTP 处理程序是我的应用程序现在发布的内容——它是一个 Facebook 签名请求。

所以好消息是，我现在可以使用 HTTP 处理程序了——你每天都会学到一些东西。

# python - How to refresh a local pip cache

> ID：10638886
> 
> 赞同：2
> 
> 时间：2012-05-17T15:37:44.430
> 
> 标签：python, pip

Given a pip requirements file, how do you update a local cache of Python packages **without** installing anything or unnecessarily re-downloading packages that are currently up to date?

I've tried:

```
pip install --download="packages" --exists-action=w -r pip-requirements.txt 
```

However, it seems to automatically redownload everything, even if the correct version has already been downloaded. How do I prevent this?

Also, what's the difference between `--download=DIR` and `--download-cache=DIR`? The docs aren't very clear, and provided descriptions sound almost identical. It seems implied that specifying `--download=DIR` does not install anything whereas specifying `--download-cache=DIR` may or may not install anything.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:35:08.830

我认为这`pip install -r pip-requirements.txt`就是您所需要的，因为通常 pip 不会重新下载已安装的软件包。

即使你这样做，`pip install --upgrade -r pip-requirements.txt`我也希望它只会升级那些需要升级的东西。

你在里面工作`virtualenv`吗？那可能是你的问题。

# regex - Regex to evaluate a string with commas only integers VB.NET

> ID：10638887
> 
> 赞同：0
> 
> 时间：2012-05-17T15:37:49.673
> 
> 标签：regex, windows, vb.net, string

I have a string like this:

Correct Strings

```
Dim value As String = "45, 2111,56, 1, 9, 99, 62," 
```

Invalid Strings:

```
Dim value As String = "10.01, 12,, . , , " 
```

I need to evaluate this string that has this format indefinitely, The regex evaluate the commas who are in series and are only integers.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:43:51.590

这个应该工作：

```
^(\d+, ?)*\d*$ 
```

它允许逗号分隔的数字列表，逗号和下一个数字之间可能有空格。也允许空列表（空字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:53:57.057

**试试这个：**

```
Public Function test(ByVal test_strring$) As Boolean
        Try
            Dim pattern$ = "(?s)^(\d+\s*,\s*)+$"
            ' (?s)^(\d+\s*,\s*)+$
            ' 
            ' Match the remainder of the regex with the options: dot matches newline (s) «(?s)»
            ' Assert position at the beginning of the string «^»
            ' Match the regular expression below and capture its match into backreference number 1 «(\d+\s*,\s*)+»
            '    Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
            '    Note: You repeated the capturing group itself.  The group will capture only the last iteration.  Put a capturing group around the repeated group to capture all iterations. «+»
            '    Match a single digit 0..9 «\d+»
            '       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
            '    Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*»
            '       Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
            '    Match the character “,” literally «,»
            '    Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*»
            '       Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
            ' Assert position at the end of the string (or before the line break at the end of the string, if any) «$»

            Return Regex.IsMatch(test_strring, pattern, RegexOptions.None)
        Catch ex As Exception
            MsgBox(ex.ToString)
            Return False
        End Try
    End Function 
```

# git - Cloning SVN repository for Git

> ID：10638896
> 
> 赞同：3
> 
> 时间：2012-05-17T15:38:23.093
> 
> 标签：git, svn, msysgit, git-extensions

I'm using SVN for source control which is hosted by a repository hosting company. I'm considering migrating this to Git and testing the waters of migration by trying to migrate to a local Git instance. I've installed Git Extensions v2.31 and installed the msysgit version that I was offered during the installation.

Once installed, I then clicked on the 'Clone SVN repository' option and entered in the SVN repo location and other necessary details. Clicked on the Clone button. I was then presented with the following message in the Process output window (I've desensitised some info):

```
c:\Program Files (x86)\Git\bin\git.exe svn clone "https://foobar.domain.com/folder/name.svn" "c:/git/"
Initialized empty Git repository in c:/git/.git/
Error validating server certificate for 'https://foobar.domain.com:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: *.domain.com
 - Valid: from Mar 18 13:23:06 2012 GMT until Apr 20 16:16:05 2013 GMT
 - Issuer: GeoTrust, Inc., US
 - Fingerprint: a2:36:f0:ae:8c:c7:a3:f2:be:98:b3:0f:2e:f8:3a:07:9a:94:90:81 
```

At this point nothing else gets displayed, the progress bar is still indicating progress but nothing really happens. The issue seems similar to what is reported here: [Git and SVN on Windows](https://stackoverflow.com/questions/1239577/git-and-svn-on-windows)

However, I do not even get the option to reject/accept etc? Anyone got any ideas?

TIA

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T19:22:23.653

你仍然可以使用 Git 扩展来做到这一点。从 Git Extensions 中打开 Git Bash 并运行您在使用 GUI 时看到的命令：`git svn clone "https://foobar.domain.com/folder/name.svn" "c:/git/"`这将为您提供您在链接到的其他 SO 问题中看到的临时/永久拒绝/接受选项。

如果您已经尝试过“克隆 SVN 存储库”选项并且从未看到描述的成功，那么您的本地存储库实际上已经设置好了，只是还没有填充任何文件。在这种情况下，您不再需要进行克隆，只需进行一次提取即可。在您尝试克隆的项目上运行`git svn fetch`也会为您提供拒绝/接受/等选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T16:51:23.217

我建议您尝试使用[SmartGit](http://www.syntevo.com/index.html)进行克隆。它是否基于另一个引擎，而不是 git-svn 甚至 SVN，所以我认为你不会遇到这个问题。还有一些更喜欢 SmartGit 的理由：它将诸如分支、标签、忽略、EOL 之类的 SVN 概念转换为相应的 Git 概念，而 git-svn 则没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T14:12:25.227

如果您不介意使用终端并更好地了解 git 的工作原理，我建议您使用[git bash](http://msysgit.github.io/)。否则，您应该使用syntevo 的[SmartGit](http://www.syntevo.com/index.html)，因为它还提供不同的引擎和密钥管理，而且 IMPO，它是 Windows 中最好的 GUI 工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T16:53:10.620

Have a look at [SmartGit](http://www.syntevo.com/smartgit/index.html). Its SVN integration supports more features than *git-svn* and it's built upon a different SVN client library which usually handles the various authentication scenarios quite well.

# android - Binders Design Patterns in Android - Proxy,Mediator and Bridge Pattern?

> ID：10638897
> 
> 赞同：0
> 
> 时间：2012-05-17T15:38:23.953
> 
> 标签：android, design-patterns, android-service, android-binder

I come from C Background and have knowledge on C++(at least I know virtual functions, INheritance, Code -reuse and some OOPS concept), But still I am having hard time understanding the Design Patterns in C++/Java.I guess Binders Design Patterns are based on C++ Design pattern(correct me). DO i have to understand UML as well to understand them. Plz explain or direct a link with test source code on the above.

PS: I am trying to understand this [blog](http://blog.goggb.com/?post=1580) by **Tetsuyuki Kobayashi** and i am in no way related to him.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:53:41.183

我不会说 C++ Binder 是一种设计模式。我在这里放了一个链接[来](http://www.richelbilderbeek.nl/CppBinder.htm)解释它们。

我还要说设计模式并不是真正特定于语言的，它们基本上可以用任何（大多数）编程语言来实现。支持 OOP 的语言通常会使设计模式的实现更容易，但这可能会引起争议。

Gang of Four design patterns book 使用 UML 来解释设计模式，但我不会说您必须成为 UML 专家才能理解设计模式。如果 UML 困扰您，请尝试[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124)这本书，它更容易理解。

# wpf - Is it possible to add multiple, column-aligned controls as ListViewItems within XAML?

> ID：10638898
> 
> 赞同：0
> 
> 时间：2012-05-17T15:38:24.250
> 
> 标签：wpf, xaml, listview

I have a `ListView` in which I need to add a fixed amount of items to in the XAML. (I don't need to dynamically add items to the list and I want to handle data binding from within the xaml as well.)

I understand how to add text as `ListViewItems` simply with `<ListViewItem content="blah"/>`

What I want to do is something like:

```
<ListViewItem><TextBox/><Label/></ListViewItem> 
```

*where the TextBox is appointed to the first column in my listview and the label to the second.*

Is this at all possible to do within the XAML only? No code-behind. Would it be doable with a datagrid?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:44:05.690

如果您的 ListView 中只需要一行，多列，您可以将 ItemsPanel 更改为具有水平方向的 StackPanel

```
<ListView.ItemsPanel>
  <ItemsPanelTemplate>
    <StackPanel Orientation="Horizontal"></StackPanel>
  </ItemsPanelTemplate>
</ListView.ItemsPanel> 
```

如果您的 ListView 中需要多行，您仍然可以通过使用堆栈面板作为 ListViewItem 并在其中放置子控件来将多个元素（水平）放置在一行中。

```
<ListView>
  <ListViewItem>
    <StackPanel Orientation="Horizontal">
      <TextBox></TextBox>
      <Label></Label>
    </StackPanel>
  </ListViewItem>
</ListView> 
```

编辑：

要拥有具有某种类型控件的列，可以将 CellTemplate 分配给 GridView 的 Column。

```
<ListView>
<ListView.View>
    <GridView>
        <GridViewColumn Header="TextBoxColumn">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Anything}" />
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
    </GridView>
</ListView.View>
</ListView> 
```

但是，您仍然需要从代码隐藏中填充网格视图。

# c# - 创建一个进程并重定向其输入/输出并且不继承套接字句柄

> ID：10638901
> 
> 赞同：2
> 
> 时间：2012-05-17T15:38:35.307
> 
> 标签：c#, c++, winapi

是否可以创建一个进程并重定向其输入和输出，但将子进程设置为不继承套接字句柄？（也许以某种方式使用 CreateProcess 进行 pinvoke）如果我使用 UseShellExecute = true 孩子不会继承套接字，但我不能重定向输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:45:57.893

[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425)将[STARTUPINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331)作为其参数之一。此结构中的三个字段是输入、输出和错误句柄。

不要忘记设置`STARTF_USESTDHANDLES`标志。

编辑：所以你必须设置`bInheritHandles`参数。有关继承句柄的更多信息，请参阅[此页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724466)。

# git - How to achieve `git rm --cached` and `git rm -f`with LibGit2Sharp?

> ID：10638904
> 
> 赞同：1
> 
> 时间：2012-05-17T15:38:40.780
> 
> 标签：git, libgit2, libgit2sharp

1) I tried using `repo.Index.Remove(item.Filename);`, but it's giving me:

> Additional information: Unable to remove file 'file.txt'. Its current status is 'Modified'.

I need to find a way to do `git rm file.txt -f` (i.e. force removal).

2) I need a way to do `git rm file.txt --cached` so that the file is only removed from the repository (staged for removal), but still keeping it in the filesystem. Is there a way to do this in LibGit2Sharp?

3) Is it OK to call `repo.Index.Remove()` if the given path has never been part of the repository (i.e. the file is untracked)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:50:52.560

> 我需要找到一种方法来执行 git rm file.txt -f （即强制删除）。

没有内置的方法可以做到这一点。可能值得在[问题跟踪器](https://github.com/libgit2/libgit2/issues)中打开功能请求。

> 我需要一种方法来做 git rm file.txt --cached

虽然不会执行内容检查，但我认为`repo.Index.Unstage()`应该符合您的需要。该方法的文档说明*从暂存区域中删除自最近一次提交（添加、更新或删除）以来对文件的所有修改。*

> 如果给定的路径从未成为存储库的一部分（即文件未被跟踪），是否可以调用 repo.Index.Remove() ？

不，不是 ;) 与 git 类似，如果尝试删除具有以下状态之一的文件，LibGit2Sharp 将抛出：

*   文件状态.不存在
*   FileStatus.Removed
*   文件状态修改
*   FileStatus.Untracked

可以在**[此处](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp/FileStatus.cs#L9)**找到这些状态的含义说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:58:57.057

看起来这将适用于`git rm -f`：

```
File.Delete(RepositoryFullPath + "/" + item.Filename);

if (!item.Status.HasFlag(LibGit2Sharp.FileStatus.Untracked))
{
    repo.Index.Stage(RepositoryFullPath + "/" + item.Filename);
} 
```

我还不知道该怎么做`--cached`。

# powershell - how to add user information to a powershell table

> ID：10638911
> 
> 赞同：0
> 
> 时间：2012-05-17T15:39:07.887
> 
> 标签：powershell

Im attempting to learn powerscript and was wondering what i'm doing wrong here >

```
Foreach($result in $results){
$userEntry = $result.GetDirectoryEntry()

$row = $table.NewRow()
 $row.Name = $userEntry.displayName
 $row.UserID = $userEntry.sAMAccountName
 $row.Department = $userEntry.department

 $table.Rows.Add($row)
} 
```

What i want is for the userdata to output into the proper cells of my table, but what i'm getting is 'System.DirectoryServices.PropertyValueCollection" repeated in each cell.

when i use the same format but output with

```
Foreach($result in $results){
$userEntry = $result.GetDirectoryEntry()
Write-Output('' + "Name: " + $userEntry.displayName + "`r`n" + " " +"AccountInfo:"   +$userEntry.sAMAccountName + "`r`n" + " " + "Dept: " + $userEntry.department)

} 
```

It's correct

what's the difference with table information?

Thanks everyone, i'm now looking to add this information to a worksheet, have it currently as:

```
#Excel worksheet
$objExcel = new-object -comobject excel.application 
$objExcel.Visible = $True 
$objWorkbook = $objExcel.Workbooks.Add() 
$objWorksheet = $objWorkbook.Worksheets.Item(1) 
```

but now how would I get my foreach statement values to print onto the excel worksheet, or onto the workbook that is created with the statement??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:26:57.130

尝试使用 value 属性

$user.propertyName.value

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:44:37.097

我想说答案在于您的 $user.Foo 类型，以及 PowerShell 处理集合的方式。相比：

```
$user.Foo | Get-Member 
```

和

```
, $user.Foo | Get-Member 
```

因为 $user.Foo*看起来*像一个标量，但实际上是一个集合，所以 $row.Foo = $user.Foo 将显示类型而不是值。

你会怎么解决？两种选择：

```
$row.Foo = -join $user.Foo 
```

或者

```
$row.Foo = $user.Foo[0] 
```

HTH 巴特克

# javascript - 如何动态地将相同大小和位置的图像放在另一个 div 上？

> ID：10638913
> 
> 赞同：0
> 
> 时间：2012-05-17T15:39:25.413
> 
> 标签：javascript, html, css

我正在尝试将相同大小和位置的图像动态放置在另一个 div 上，但我无法使其工作。

这是我目前的尝试。

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript"  >
 $(document).ready(function() {
var div = document.getElementById("im");
var canvas = document.getElementById("img");

canvas.height = div.offsetHeight ;
canvas.width  = div.offsetWidth ;
canvas.offsetTop = div.offsetTop;
canvas.offsetLeft  = div.offsetLeft;

 });
</script>

</head>

<body>
<div>
<div id="im">
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
<p>&nbsp;</p>
</div><img id="img" src="axz.png" style="position:  absolute; z-index:100; border:dotted thick; "   />
<div   class="t">
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:51:15.283

看看我为你做的这个例子。

这是你想要的吗？

更新：

**现场演示：http:** [//jsfiddle.net/oscarj24/Byzn8/1/](http://jsfiddle.net/oscarj24/Byzn8/1/)

# orm - Doctrine DQL QueryBuilder 排除存在关系的实体

> ID：10638926
> 
> 赞同：3
> 
> 时间：2012-05-17T15:40:16.150
> 
> 标签：orm, symfony, doctrine-orm, associations, outer-join

我有两个实体

```
Order
  oneToMany:
    statuses:
       targetEntity: \Status
       mappedBy: order

Status
  manyToOne:
    order:
      targetEntity: \Order
      inversedBy: status
  fields:
    code:
      type:integer 
```

如您所见 - 一个订单一次可以有多个状态（例如“已发货”、“已付款”等状态）。

我想编写一个查询来获取我所有状态不为 6 的订单。我发现很难理解这一点。

假设我有三个订单。所有订单的状态均为“1”（新），其中一个订单的状态为“6”（正在审核）。我只想检索状态不为 6 的两个订单。

像这样写查询..

```
$qb->select('o')
    ->from('MyOrderBundle:Order', 'o')
    ->innerJoin('o.statuses', 'st')
    ->where(
    $qb->expr()->not(
        $qb->expr()->eq('st.code', 6)
        )
); 
```

从生成的 SQL 中排除状态行 6，但仍然包含结果集中的顺序（因为 code=1 的状态行匹配不等于 6 的条件）。我需要能够说“从我的结果集中排除任何具有 {something} 之类的关联的实体”。这里有可以帮助我的 DQL 关键字吗？

- 在教义用户组上交叉发布，如果我找到解决方案，将在这两个地方更新答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:28:45.283

我找到了一种最终使用子选择的方法，*这感觉有点笨拙*，但我想不出任何其他方法（其中 6,7,8,9 是我想从我的结果集中排除的状态）。

```
$qb->select('o')
->from('MyOrderBundle:Order', 'o')
->innerJoin('o.statuses', 'st')
->where(
    $qb->expr()->notIn(
        $qb2->select('DISTINCT(o2.id)')
        ->from('MyOrderBundle:Status', 'stat')
        ->innerJoin('stat.order','o2','WITH', $qb2->expr()->in('stat.code', (6,7,8,9)))->getDQL()
    )
); 
```

# android - PreferenceFragment 的 Fragment$InstantiationException

> ID：10638927
> 
> 赞同：1
> 
> 时间：2012-05-17T15:40:17.907
> 
> 标签：android, android-fragments, android-preferences

这对我来说是个谜。我不知道如何调试这种情况：

我遇到的问题是在“PreferenceFragment”类中。我开发了一个带有首选项标题的经典“设置”界面：

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
<header 
    android:fragment="debut.telebox.Config$PrefSystemeFragment"
    android:icon="@drawable/ic_action_prefsysteme"
    android:title="Paramètres Système"
    android:summary="Paramètres système"
    />
<header 
    android:fragment="debut.telebox.Config$PrefChainesFragment"
    android:icon="@drawable/ic_action_preffavoris"
    android:title="Paramètres pour les chaînes"
    android:summary="Favoris"
    />
<header 
    android:fragment="debut.telebox.Config$PrefAproposFragment"
    android:icon="@drawable/icon"
    android:title="A propos"
    android:summary="A propos de TeleBox"
    /> 
```

PreferenceActivity 是：

```
public class Config extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...
}

@Override
public void onDestroy() {
    super.onDestroy();
    ...
}

@Override
public void onBuildHeaders(List<Header> target) {
    loadHeadersFromResource(R.layout.prefentete, target);
    }

public static class PrefSystemeFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
} 
```

当我使用 Eclipse 直接在测试设备（Android 4.0.4 下的 Xoom 和 Nexus S）上运行这个应用程序时，我没有问题：我能够读取和写入参数。

但是当我导出应用程序然后在设备上运行它时，我得到运行时错误：

```
05-17 17:30:12.680: E/AndroidRuntime(6391):     at dalvik.system.NativeStart.main(Native Method)
05-17 17:30:12.680: E/AndroidRuntime(6391): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment debut.telebox.Config$PrefSystemeFragment: make sure class name exists, is public, and has an empty constructor that is public
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.app.Fragment.instantiate(Fragment.java:581)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.preference.PreferenceActivity.switchToHeaderInner(PreferenceActivity.java:1117)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.preference.PreferenceActivity.switchToHeader(PreferenceActivity.java:1150)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.preference.PreferenceActivity.onCreate(PreferenceActivity.java:551)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at debut.telebox.Config.onCreate(Unknown Source)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.app.Activity.performCreate(Activity.java:4465)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-17 17:30:12.680: E/AndroidRuntime(6391):     ... 11 more
05-17 17:30:12.680: E/AndroidRuntime(6391): Caused by: java.lang.ClassNotFoundException: debut.telebox.Config$PrefSystemeFragment
05-17 17:30:12.680: E/AndroidRuntime(6391):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-17 17:30:12.680: E/AndroidRuntime(6391):     at android.app.Fragment.instantiate(Fragment.java:571)
05-17 17:30:12.680: E/AndroidRuntime(6391):     ... 18 more
05-17 17:30:12.680: W/ActivityManager(161):   Force finishing activity debut.telebox/.Config
05-17 17:30:12.690: W/ActivityManager(161):   Force finishing activity debut.telebox/.TeleBox 
```

不幸的是，我在 Google Play 上上传了我的应用程序，却没有看到它无法正常工作......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T16:39:27.883

如果它在调试模式下工作而不是在导出时，ProGuard 可能已经做了一些事情来破坏你的类名。将以下行添加到`proguard-project.txt`项目中的文件中：

```
-keep class debut.telebox.** { *; } 
```

看看是否有帮助。

如果没有，只需将您的`PreferenceFragment`类移动到单独的公共 Java 类中，而不是使用静态内部类，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:17:13.423

我用`-keep class android.support.v4.** { *; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T04:34:49.773

由于我无法添加评论，我想添加到 CommonsWare 的答案，我注意到当 Java 文件上未引用类时会发生这种情况，因为 Proguard 的默认行为是删除未引用的类以进行空间优化。

我遇到了与 OP 的原始问题完全相同的问题 - 使用头文件将我的 PreferenceActivity 与 PreferenceFragment 的自定义扩展接口，在调试和 ClassNotFoundException 在签名构建时工作。显然，ADT 的生成源不考虑 android:fragment 引用（但话又说回来，自 13 年 8 月以来我没有更新 ADT）

有效的解决方案正是 CommonsWare 建议的：

```
-keep problematicpackage.** { *; } 
```

“problematicpackage”是我声明自定义片段的包。这 ** { *; } 表达式包括其在 -keep “指令”中的所有内容。

不过需要注意的一件事是：您可能不会使用此“指令”**来混淆、压缩或优化此包。**我不太关心元打包或超级版权，因为我会因为应该防故障的东西而失眠，但如果你需要这些功能，我建议你仔细阅读 Proguard 手册。

# xml - 用于 key / keyref 的 XML Schema 验证器

> ID：10638932
> 
> 赞同：2
> 
> 时间：2012-05-17T15:40:23.460
> 
> 标签：xml, schema, key, validation, keyref

是否有在线 XML 验证器报告 key 和 keyref 违规错误？

根据我的尝试，例如使用[corefiling](http://www.corefiling.com/opensource/schemaValidate.html)，它不起作用。在我看来，它只是忽略了 key 和 keyref 规范。

我想要的是针对 Schema 验证 XML 实例并在
- 有重复的键
- keyrefs 没有引用现有元素 的情况下得到错误

# java - Java 抽象和泛型类型

> ID：10638937
> 
> 赞同：2
> 
> 时间：2012-05-17T15:40:46.040
> 
> 标签：java, generics, abstraction

我在需要重写的抽象类中正确实现泛型时遇到问题。

```
public abstract class AbstractSerachView {
    DataStore<AbstractCriteria, AbstractResults, AbstractService> resultsStore;
    public abstract DataStore<AbstractCriteria, AbstractResults, AbstractService> getResultsStore();
} 
```

子类如下：

```
public class TravelSearchView extends AbstractSearchView {
    DataStore<TravelCriteria, TravelResults, TravelService> resultsStore;
    public DataStore<TravelCriteria, TravelResults, TravelService> getResultsStore() {
        return resultsStore;
    }
} 
```

这种抽象根本不起作用，尽管如果我能以某种方式完成这项工作，我将不胜感激。这里的正确方法是什么？我对泛型类型的经验很少。

问题是Eclipse在子类中提示错误：返回类型与AbstractSearchView.getResultsStore()不兼容

此外，如果我将子类 get 方法保留为 3 种抽象类型，并使用 3 种旅行类型覆盖变量，则一切正常，除了返回行，其中 Eclipse 指示：类型不匹配：无法从 DataStore 转换为 DataStore

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:53:08.993

如果您想用不同的返回类型覆盖，您的`AbstractSearchView`类需要为每个参数指定泛型参数。`DataStore``getResultsStore()`

```
public abstract class AbstractSearchView<C extends AbstractCriteria, R extends AbstractResults, S extends AbstractService> {
    DataStore<AbstractCriteria, AbstractResults, AbstractService> resultsStore;
    public abstract DataStore<AbstractCriteria, AbstractResults, AbstractService> getResultsStore();
}

public class TravelSearchView extends AbstractSearchView<TravelCriteria, TravelResults, TravelService> {
    DataStore<TravelCriteria, TravelResults, TravelService> resultsStore;
    public DataStore<TravelCriteria, TravelResults, TravelService> getResultsStore() {
        return resultsStore;
    }
} 
```

参数中的超类型边界 ( `X extends SomeClass`)`AbstractSearchView`确保子类`AbstractSearchView`只能使用每个参数的子类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T15:55:03.987

最好的方法是使基类（或接口）通用：

```
public abstract class AbstractSerachView<
    TCriteria extends AbstractCriteria>,
    TResults extends AbstractResults,
    TService extends AbstractService>
{
    DataStore<TCriteria, TResults, TService> resultsStore;
    public DataStore<TCriteria, TResults, TService> getResultsStore()
    {
        return resultsStore;
    }
} 
```

然后在实现中只提供具体类型

```
public class TravelSearchView
    extends AbstractSearchView<TravelCriteria, TravelResults, TravelService>
{
} 
```

此外，如您所见，实现类不需要覆盖`getResultsStore`方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T15:42:49.237

以下是您的替代方案：

a) 将超类类型签名更改为

```
 public DataStore<? extends AbstractCriteria, ? extends AbstractResults, ? extends AbstractService> getResultsStore(); 
```

b) 将类型参数作为一个整体添加到类中：

```
 abstract class AbstractSearchView<
     C extends AbstractCriteria,
     R extends AbstractResults,
     S extends AbstractService>
  public abstract DataStore<C, R, S> getResultsStore();
 } 
 class TravelSearchView extends AbstractSearchView<
     TravelCriteria, TravelResults, TravelService> {
   ...
 } 
```

问题在于它`DataStore<TravelCriteria, TravelResults, TravelService>`不是*的*子类型`DataStore<AbstractCriteria, AbstractResults, AbstractService>`，即使这些泛型类型参数分别是子类型。

# clojure - 如何在 Noir 中获取 JSON 发布数据

> ID：10638939
> 
> 赞同：4
> 
> 时间：2012-05-17T15:40:51.713
> 
> 标签：clojure, noir

不久前，Chris Granger 发布了[这个中间件](https://groups.google.com/forum/#!msg/clj-noir/INqvBo6oXIA/G2hfpUYIpjcJ)，以使 JSON 哈希值出现在 defpage 参数中的伞形“主干”元素下。

```
(defn backbone [handler]
  (fn [req]
    (let [neue (if (= "application/json" (get-in req [:headers "content-type"]))
       (update-in req [:params] assoc :backbone (json/parse-string (slurp (:body req)) true))
       req)]
    (handler neue)))) 
```

如何修改此代码以使 JSON 元素在 defpage 中显示为顶级参数；即摆脱 :backbone 伞？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:51:50.217

你可以做两件事。一种选择是将 的值替换为`:params`解析 JSON 后返回的映射。为此，只需将新映射与`:params`键相关联。

```
(assoc req [:params] (json/parse-string (slurp (:body req)) true)) 
```

另一个选项（如@dAni 建议的那样）是将解析的 JSON 的值合并到，以便`:params`地图中的现有值不会被覆盖。之所以需要使用`partial`而不是仅仅`merge`在这里使用，是因为最终的地图是从左到右的地图的合并结果。如果您希望 JSON 映射中的值优先，则您的解决方案有效。

```
(update-in req [:params]
  (partial merge (json/parse-string (slurp (:body req)) true))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:41:30.420

知道了。 `assoc`仅适用于一个元素，因此您必须将所有内容都放在`:backbone`保护伞下。要将*所有*JSON 元素推送到参数中，您必须使用`merge`. 因此将第 4 行更改为：

```
(update-in req [:params] merge (json/parse-string (slurp (:body req)) true)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T08:12:28.233

如果您不介意引入另一个依赖项，可以使用[ring-middleware-format 库。](https://github.com/ngrunwald/ring-middleware-format)

指示：

*   添加`[ring-middleware-format "0.1.1"]`到您的`project.clj`

*   然后在您的 中`server.clj`，添加以下代码：

代码：

```
(:require [ring.middleware.format-params :as format-params])

(server/add-middleware format-params/wrap-json-params)

(defn -main [& m]
; Start the server...
) 
```

现在任何传入的 JSON 都可以像表单 POSTdata 一样使用。

# javascript - 如何将数据输入到 Javascript 以进行客户端处理？

> ID：10638942
> 
> 赞同：0
> 
> 时间：2012-05-17T15:41:01.013
> 
> 标签：javascript

我对 JavaScript 比较陌生，我正在开发一个新的应用程序。根据四个下拉选择的结果，我想计算并显示一个宣布结果的文本框。下面的代码允许我在 html 表单上进行选择并按下“提交”按钮，但没有返回任何结果。

我很难调试，因为我不明白如何在屏幕上定期输出（document.write 似乎不起作用）来解释程序流。我什至不确定 js 是否正在运行……我是否需要从 HTML 中调用我的 js？我是否需要将我的 js 存储在外部文件中并调用该外部文件？

谢谢！

```
<html>
<head>
    <SCRIPT type="text\Javascript" EVENT="onclick">
    var valueCS ;
    var valueV ;
    var valueVCS ;
    var valueStorm ;
    var finalValue = valueCS + valueV + valueVCS + valueStorm;
    var startOutage ;
    var outageEnd ;

    document.write="total is "+finalValue;
    if(finalValue==0000) {startOutage="28"; outageEnd="1";} else
      (finalValue==0001) {startOutage="27"; outageEnd="1";} else
      (finalValue==1110) {startOutage="22"; outageEnd="4";} else
      (finalValue==1111) {startOutage="24"; outageEnd="4";} else
      document.write("Invalid entries")
    document.write("Start Outage: "+startOutage<br>"Outage End: "+outageEnd)
    </SCRIPT>
</head>
<body>
<form id = "outageSelector" method="post contServer=1000&vistaServer=100&vistaCSServer=10&storm=1&submitServerStatus=View+Outage+Groups">
    <fieldset>
        <legend><h1>Please choose the status of each system</h1></legend>
        <label>Is the contact server up?</label>
        <select id="contServer" name="contServer">
            <option valueCS=1000>Up</option>
            <option valueCS=0>Down</option>
        </select><br>
        <label>Is the Vista server up?</label>
        <select id="vistaServer" name="vistaServer">
            <option valueV=100>Up</option>
            <option valueV=0>Down</option>
        </select><br>
        <label>Is VistaCS up?</label>
        <select id="vistaCSServer" name="vistaCSServer">
            <option valueVCS=10>Up</option>
            <option valueVCS=0>Down</option>
        </select><br>
        <label>Is the outage due to a storm?</label>
        <select id="storm" name="storm">
            <option valueStorm=1>Yes</option>
            <option valueStorm=0>No</option>
        </select><br>
        <input type="submit" name="submitServerStatus" value="View Outage Groups" />
    </fieldset>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:42:53.467

要在屏幕上获得输出，您应该`console.log`与 Firebug、Chrome 开发工具或 IE 开发工具一起使用。请参阅[是否有一个 HTML5、JavaScript 和 CSS 调试器？](https://stackoverflow.com/questions/4445759/is-there-a-single-html5-javascript-and-css-debugger/4445828#4445828)

您的代码中的一个明显问题是

```
 if(finalValue=1110) 
```

应该是（用于比较的双等号）

```
if(finalValue==1110) 
```

但是还有另一个问题，以零开头的数字是八进制数。那是

```
010 == 8 // true 
```

好像您在使用位掩码

```
var mask = 0;
var flagA = 1, flagB = 2, flagC = 4;

// Add flagA and flagB to the mask
mask = mask | flagA; // or mask |= flagA
mask |= flagB;

// Now you can test which flags are on using bit testing

// is flagA set?
console.log(mask & flagA) // truthy value
// is flagC set?
console.log(mask & flagC) // false (0) 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:52:18.773

根本不使用`document.write`，而是[DOM](https://developer.mozilla.org/en/DOM/About_the_Document_Object_Model)操作。阅读[这些](http://www.howtocreate.co.uk/tutorials/javascript/dombasics) [介绍](http://www.htmlgoodies.com/primers/jsp/article.php/3594621/Javascript-Basics-Part-6.htm)。

此外，您还需要了解[事件驱动编程](http://en.wikipedia.org/wiki/Event-driven_programming)。您将需要[domevents](http://www.howtocreate.co.uk/tutorials/javascript/domevents) ( [intro](http://www.quirksmode.org/js/introevents.html) )，而且与服务器的异步通信也是基于事件的。`<SCRIPT type="text\Javascript" EVENT="onclick">`不是它的工作方式:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:21:21.730

您遇到的问题是您的 FORM。您所有的下拉菜单都具有相同的名称。此外，您的值格式不正确。

```
<form id="outageSelector" method="post" action="[SOME_DESTINATION]">
    <fieldset>
        <legend><h1>Please choose the status of each system</h1></legend>
        <label>Is the contact server up?</label>
        <select id="contServer" name="contServer">
            <option value=1000>Up</option>
            <option value=0>Down</option>
        </select><br>
        <label>Is the Vista server up?</label>
        <select id="vistaServer" name="vistaServer">
            <option value=100>Up</option>
            <option value=0>Down</option>
        </select><br>
        <label>Is VistaCS up?</label>
        <select id="vistaCSServer" name="vistaCSServer">
            <option value=10>Up</option>
            <option value=0>Down</option>
        </select><br>
        <label>Is the outage due to a storm?</label>
        <select id="storm" name="storm">
            <option value=1>Yes</option>
            <option value=0>No</option>
        </select><br>
        <input type="submit" name="submitServerStatus" value="View Outage Groups" />
    </fieldset>
</form> 
```

这是与幕后的 POST 一起发送的：

```
contServer=1000&vistaServer=100&vistaCSServer=10&storm=1&submitServerStatus=View+Outage+Groups 
```

**编辑：**这是一个修改后的 js 函数。

```
<script>
  function checkValues(){
    var e;
    e = document.getElementById("contServer");
    var valueCS = parseInt(e.options[e.selectedIndex].value);

    e = document.getElementById("vistaServer");
    var valueV = parseInt(e.options[e.selectedIndex].value);

    e = document.getElementById("vistaCSServer");
    var valueVCS = parseInt(e.options[e.selectedIndex].value);

    e = document.getElementById("storm");
    var valueStorm = parseInt(e.options[e.selectedIndex].value);

    var finalValue = valueCS + valueV + valueVCS + valueStorm;
    var startOutage = -1;
    var outageEnd = -1;        

    if(finalValue == 0) {
      startOutage = "28";
      outageEnd = "1";
    } else if (finalValue == 1) {
      startOutage = "27";
      outageEnd = "1";
    } else if (finalValue == 1110) {
      startOutage = "22";
      outageEnd = "4";
    } else if (finalValue == 1111) {
      startOutage = "24";
      outageEnd = "4";
    }

    var msg = "total: " + finalValue;        
    if(startOutage == -1){
      msg += " | Start Outage: " + startOutage + " | Outage End: " + outageEnd;
    }else{
      msg += " | Invalid entries";
    }

    alert(msg);
  }
</script> 
```

您需要修改您的表单才能使用。

```
<form id="outageSelector" method="post" action="" onsubmit="checkValues()"> ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:47:52.480

Juan 已经为您提供了 console.log，它非常有用，而且可能是最好的。Firebug、Chrome Dev 和 IE dev 也将允许您添加断点并观察本地和全局变量。

来自黑暗时代的旧式调试包括使用`alert("some string here");`来获取弹出窗口或向页面添加调试元素，然后使用

```
document.getElementById("debugElement").innerHTML("some string here"); 
```

# jquery - 滑块图像在 IE 之外不起作用

> ID：10638944
> 
> 赞同：0
> 
> 时间：2012-05-17T15:41:12.747
> 
> 标签：jquery, html, css

我已经应用了图像滑块，它在 IE 中运行良好，但在任何其他浏览器中都无法运行。图片标签上使用了以下 CSS。

```
style=" font-size: 0px; position: absolute; left: 0px; top: 0px;"

#wowslider-container1  .ws_bullets div{
    left:-50%;
}
#wowslider-container1 { 
    /*overflow: hidden;*/
    zoom: 1; 
    position: relative;
    width:900px;
    margin:0 auto;
    z-index:0;
}
#wowslider-container1 .ws_images{
    width:900px;
    height:300px;
    overflow:hidden;
    position:relative;
} 
```

我已经在浏览器中验证了图像显示以获取更多详细信息，您可以查看此 www.stepstrade.com 知道为什么要这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-25T18:12:12.243

要强制您的网站显示它在 IE9 中的显示方式，您所能做的就是在元区域中添加以下代码，通常是在标题中。

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

# php - 表单提交时的 MySQL 错误

> ID：10638946
> 
> 赞同：0
> 
> 时间：2012-05-17T15:41:17.067
> 
> 标签：php, mysql, syntax-error

更新：

非常感谢你们在这方面的帮助。我采取了不同的策略，决定只使用一张桌子。

* * *

我有一个由 3 个表组成的数据库。我有三个简短的表单，我想使用相同的 add_player.php 将表单数据写入数据库。

根据提交的表单（我在每个表单中都有一个定义 form_id 的隐藏字段），数据将被写入三个表之一：ff_offense、ff_kicker、ff_defense。

我收到一个意外的 } 错误。我知道我的语法不正确，但我对 PHP 的了解还不够，无法找出罪魁祸首。这是 add_player.php 的代码：

```
<?php
$con = mysql_connect("localhost","dariia","celtic03");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("football", $con);

if($form_id ="offense") {$query="INSERT INTO ff_offense (ID, PLAYER, POSITION, TEAM, PASS_YDS, RUSH_YDS, REC_YDS, RECEPTIONS, TD) 
    VALUES ('NULL','$_POST[PLAYER]','$_POST[POSITION]','$_POST[TEAM]','$_POST[PASS_YDS]','$_POST[RUSH_YDS]','$_POST[REC_YDS]','$_POST[RECEPTIONS]','$_POST[TD]')"}

    elseif($form_id="kicker") {$query="INSERT INTO ff_kicker {K_ID, K_PLAYER, K_TEAM, K_EXTRA_PTS, K_FG)
        VALUES ('NULL','$_POST[K_PLAYER]','$_POST[K_TEAM]','$_POST[K_EXTRA_PTS]','$_POST[K_FG]')"}

    elseif($form_id="defense")  { $query= "INSERT INTO ff_defense {D_ID, D_TEAM, D_SACKS, D_INT, D_TD}
        VALUES ('NULL','$_POST[D_TEAM]','$_POST[D_SACKS]','$_POST[D_INT]','$_POST[D_TD]')"} ;

$db->setQuery($query);
$db->query();   

if (!mysql_query($query,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

错误出现在第 11 行，这将是 VALUES 行`if($form_id="offense")`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:42:26.020

**更新**

您在查询中使用大括号而不是括号。

```
 $query="INSERT INTO ff_kicker {K_ID, K_PLAYER, K_TEAM, K_EXTRA_PTS, K_FG) 
```

应该

```
 $query="INSERT INTO ff_kicker (K_ID, K_PLAYER, K_TEAM, K_EXTRA_PTS, K_FG) 
```

您已多次执行此操作，因此请检查您的所有查询是否存在此错误。

**旧答案**

您应该使用比较运算符 ( `==`or `===`) 而不是赋值运算符：

```
if($form_id="offense") 
```

应该

```
if($form_id==="offense") 
```

需要注意的两点：

1.  您对 SQL 注入持开放态度
2.  mysql_* 将被弃用。您应该切换到[mysqli_*](http://us3.php.net/manual/en/book.mysqli.php)或[PDO](http://us3.php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T15:42:36.817

```
if($form_id="offense"). 
```

应该

```
 if($form_id=="offense") 
```

此外，您对 SQL 注入持开放态度，请确保清理您的输入。即使您确实清理了您的输入，我也会建议您开始使用 PDO，这更安全！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T15:43:35.720

如果要测试变量是否等于某个值，则必须使用[**比较运算符**](http://fr2.php.net/manual/en/language.operators.comparison.php)，即**`==`**

在这里，您使用的是[**赋值运算符**](http://fr2.php.net/manual/en/language.operators.assignment.php)，即**`=`**——它将您在其右侧写入的值，并将其放入您在其左侧写入的变量中。

基本上，您应该更新您的三个条件，使它们看起来像这样：

```
if($form_id == "offense")
elseif($form_id == "kicker")
elseif($form_id == "defense") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T15:45:01.203

看起来您的字符串后也缺少一些分号。

```
if($form_id == "offense") {
    $query="INSERT INTO ff_offense (ID, PLAYER, POSITION, TEAM, PASS_YDS, RUSH_YDS, REC_YDS, RECEPTIONS, TD) 
    VALUES ('NULL','$_POST[PLAYER]','$_POST[POSITION]','$_POST[TEAM]','$_POST[PASS_YDS]','$_POST[RUSH_YDS]','$_POST[REC_YDS]','$_POST[RECEPTIONS]','$_POST[TD]')";
} elseif($form_id=="kicker") {
    $query="INSERT INTO ff_kicker {K_ID, K_PLAYER, K_TEAM, K_EXTRA_PTS, K_FG)
        VALUES ('NULL','$_POST[K_PLAYER]','$_POST[K_TEAM]','$_POST[K_EXTRA_PTS]','$_POST[K_FG]')";
} elseif($form_id=="defense")  { 
    $query= "INSERT INTO ff_defense {D_ID, D_TEAM, D_SACKS, D_INT, D_TD}
        VALUES ('NULL','$_POST[D_TEAM]','$_POST[D_SACKS]','$_POST[D_INT]','$_POST[D_TD]')";
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T15:48:21.870

赋值运算符是`=`

检查条件是`==`

当我们也想检查数据类型时，我们使用`===`

所以你的情况有问题，应该如下所示

```
if(variable == 'string'){
    // logic
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T15:44:24.790

这些其他答案是正确的，但是在此声明的末尾也缺少一个分号，这就是导致语法错误的原因：

```
if($form_id ="offense") { $query="INSERT INTO ff_offense (ID, PLAYER, POSITION, TEAM, PASS_YDS, RUSH_YDS, REC_YDS, RECEPTIONS, TD) 
    VALUES ('NULL','$_POST[PLAYER]','$_POST[POSITION]','$_POST[TEAM]','$_POST[PASS_YDS]','$_POST[RUSH_YDS]','$_POST[REC_YDS]','$_POST[RECEPTIONS]','$_POST[TD]')"; } 
```

编辑：要清楚，所有声明都缺少分号，而不仅仅是一个。

# javascript - 使用 Greasemonkey 脚本添加动态 div 层（覆盖）？

> ID：10638947
> 
> 赞同：0
> 
> 时间：2012-05-17T15:41:18.603
> 
> 标签：javascript, css, overlay, greasemonkey, z-index

我是新手，所以请善待（；
我正在尝试使用 Greasemonkey 添加 div 层，但我无法让它正常工作。

我的最终目标是让用户在屏幕上绘制一个窗口（或单击两次），并且除此区域之外的所有内容都应该淡出（添加深色 div 层）。
但是，**现在**我只想为每个站点添加一个可见层。这是我的第一次尝试（根本没有用）：

```
var CSSNJE = '#Test_divnje {height:100px; width:100px; background-color:red;  
             position:absolute; top: 200px; left: 400px; z-index:2147483647}';
var CSSNJE = '<style type="text/css">'+ CSSNJE +'</style>';
  document.write(CSSNJE);

var DIVNJE = '<DIV id="Test_divnje"></DIV>';
  document.write(DIVNJE); 
```

我用谷歌搜索了这段代码，它适用于某些页面但不是很多：

```
makeLayer('LYR1',400,250,100,100,'red',1,2147483647);

function makeLayer(id,L,T,W,H,bgColor,visible,zIndex) {
  if (document.getElementById) {
    if (document.getElementById(id)) {
      alert ('Layer with this ID already exists!');
      return;
    }
    var ST = 'position:absolute'
    +'; left:'+L
    +'; top:'+T
    +'; width:'+W
    +'; height:'+H
    +'; clip:rect(0,'+W+','+H+',0)'
    +'; visibility:'
    +(null==visible || 1==visible ? 'visible':'hidden')
    +(null==zIndex  ? '' : '; z-index:'+zIndex)
    +(null==bgColor ? '' : '; background-color:'+bgColor);

    var LR = '<DIV id='+id+' style="'+ST+'"></DIV>'

    if (document.body) {
     if (document.body.insertAdjacentHTML)
         document.body.insertAdjacentHTML("BeforeEnd",LR);
     else if (document.createElement
          &&  document.body.appendChild) {
      var newNode = document.createElement('div');
      newNode.setAttribute('id',id);
      newNode.setAttribute('style',ST);
      document.body.appendChild(newNode);
     }
    }
   }
  } 
```

首先，我认为`z-index`我的 div 层太低了，我的 div 层就在可见层的后面（这就是为什么我的索引现在这么高）但是使用更高的索引并没有帮助。

我也尝试过使用`position:fixed`，因为我读到这可能会有所帮助，但没有。

如何制作有效的叠加层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:54:13.027

由于您刚开始，请使用[jQuery](http://jquery.com/)和（在本例中）[jQuery-UI](http://docs.jquery.com/UI)。它使编码变得非常简单，并且可以让你免于尝试以艰难的方式“重新发明轮子”。

在 jQuery-UI 中，问题要求的三分之二是在 1 行代码中完成的：

```
$("#dialog").dialog ( {modal: true} ); 
```

请注意，这是开箱即用的可拖动且可缩放的！

在 Firefox 上使用 Greasemonkey，使用 jQuery 和 jQuery-UI 几乎没有成本。脚本会被下载一次（在安装或编辑脚本时），然后从本地计算机运行。它又好又快。

这是一个完整的 Greasemonkey 脚本，它向 Stack Overflow 页面添加了带有可调整大小窗口的“层”：

```
// ==UserScript==
// @name        _Add a User-interactive layer to a web page.
// @namespace   _pc
// @include     http://stackoverflow.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js
// @resource    jqUI_CSS  http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css
// @resource    IconSet1  http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-icons_222222_256x240.png
// @resource    IconSet2  http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-icons_454545_256x240.png
// @grant       GM_addStyle
// @grant       GM_getResourceText
// @grant       GM_getResourceURL
// ==/UserScript==

//--- Add our custom dialog using jQuery. Note the multi-line string syntax.
$("body").append (
    '<div id="gmOverlayDialog">                                                     \
     Resize with the control in the lower-left, or by dragging any edge.<br><br>    \
                                                                                    \
     Click the x, or press the Escape key to close.                                 \
     </div>                                                                         \
    '
);

//--- Activate the dialog.
$("#gmOverlayDialog").dialog ( {
    modal:      true,
    title:      "Click and drag here.",
    zIndex:     83666   //-- This number doesn't need to get any higher.
} );

/**********************************************************************************
    EVERYTHING BELOW HERE IS JUST WINDOW DRESSING (pun intended).
**********************************************************************************/

/*--- Process the jQuery-UI, base CSS, to work with Greasemonkey (we are not on a server)
    and then load the CSS.

    *** Kill the useless BG images:
        url(images/ui-bg_flat_0_aaaaaa_40x100.png)
        url(images/ui-bg_flat_75_ffffff_40x100.png)
        url(images/ui-bg_glass_55_fbf9ee_1x400.png)
        url(images/ui-bg_glass_65_ffffff_1x400.png)
        url(images/ui-bg_glass_75_dadada_1x400.png)
        url(images/ui-bg_glass_75_e6e6e6_1x400.png)
        url(images/ui-bg_glass_95_fef1ec_1x400.png)
        url(images/ui-bg_highlight-soft_75_cccccc_1x100.png)

    *** Rewrite the icon images, that we use, to our local resources:
        url(images/ui-icons_222222_256x240.png)
        becomes
        url("' + GM_getResourceURL ("IconSet1") + '")
        etc.
*/
var iconSet1    = GM_getResourceURL ("IconSet1");
var iconSet2    = GM_getResourceURL ("IconSet2");
var jqUI_CssSrc = GM_getResourceText ("jqUI_CSS");
jqUI_CssSrc     = jqUI_CssSrc.replace (/url\(images\/ui\-bg_.*00\.png\)/g, "");
jqUI_CssSrc     = jqUI_CssSrc.replace (/images\/ui-icons_222222_256x240\.png/g, iconSet1);
jqUI_CssSrc     = jqUI_CssSrc.replace (/images\/ui-icons_454545_256x240\.png/g, iconSet2);

GM_addStyle (jqUI_CssSrc);

//--- Add some custom style tweaks.
GM_addStyle ( '                 \
    div.ui-widget-overlay {     \
        background: red;        \
        opacity:    0.6;        \
    }                           \
' ); 
```

# java - 使用 Mina 模拟 XMPP 服务器仅在部分时间有效

> ID：10638950
> 
> 赞同：4
> 
> 时间：2012-05-17T15:41:42.407
> 
> 标签：java, xmpp, apache-mina

我创建了一个处理 PLAIN 加密节的模拟 XMPP 服务器。我可以使用 Pidgin 并完成整个会话创建，直到 Pidgin 认为用户在实际的 XMPP 服务器上并发送常规 ping。

但是，似乎并非所有消息都得到正确处理，当我成功登录时，这只是运气。我在说，也许是我实际连接的时间的 1/10。其他时候，Pidgin 似乎错过了一条消息，或者我将消息转储到快速传输中。

如果我启用 Pidgin 的 XMPP 控制台插件，第一个连接总是成功的，但第二个用户无法通过，通常在 Pidgin 请求服务发现时死亡。

我的 Mina 代码是这样的：

```
 try
    {
        int PORT = 20600;

        IoAcceptor acceptor = null;
        acceptor = new NioSocketAcceptor();

        acceptor.getFilterChain().addFirst("codec", new ProtocolCodecFilter( new ProtocolCodecFactoryImpl()));
        acceptor.getFilterChain().addLast("executor", new ExecutorFilter(IoEventType.MESSAGE_RECEIVED));
        acceptor.setHandler( new SimpleServerHandler());    
        acceptor.getSessionConfig().setIdleTime(IdleStatus.BOTH_IDLE, 10);
        acceptor.bind( new InetSocketAddress(PORT));

    }
    catch (Exception ex)
    {
        System.out.println(ex.getMessage());
    } 
```

`SimpleServerHandler`负责消息/节处理和会话创建。该`messageReceived`函数如下所示：

```
@Override
public void messageReceived(IoSession session, Object msg) throws Exception
 {
    String str = msg.toString();
    System.out.println("MESSAGE: " + str);

    process(session, str);

} 
```

最后，进程负责解析消息，并写入响应。我确实在我的写作中使用了 sychonized：

```
public void sessionWrite(IoSession session, String buf)
{
    synchronized(session)
    {
        WriteFuture future = session.write(buf);
    }
} 
```

为简洁起见，我省略了我的处理代码，但它只是查找某些数据，制作响应和调用`sessionWrite(...)`

我的问题是，这种模式行得通吗？如果没有，我是否应该考虑将收到的消息推入队列并简单地处理来自定时器的队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:21:40.323

事实证明，Pidgin 会发送两个 IQ 节，但我没有正确处理它们。我的解码器现在确定一个节的结尾，并且只将一个节写入我从中读取的缓冲区。

现在像梦一样工作！

# c++ - 使用预处理器对 C/C++ 进行元编程

> ID：10638951
> 
> 赞同：13
> 
> 时间：2012-05-17T15:41:44.090
> 
> 标签：c++, c, coding-style, macros, metaprogramming

所以我有这棵巨大的树，它基本上是一个大开关/案例，带有字符串键和一个公共对象上的不同函数调用，具体取决于键和一个元数据。

每个条目基本上看起来像这样

```
} else if ( strcmp(key, "key_string") == 0) {
    ((class_name*)object)->do_something();
} else if ( ... 
```

where`do_something`可以有不同的调用，所以我不能只使用函数指针。此外，某些键需要将对象强制转换为子类。

现在，如果我要用更高级的语言编写代码，我会使用 lambda 字典来简化它。

我突然想到我可以使用宏将其简化为类似

```
case_call("key_string", class_name, do_something());
case_call( /* ... */ ) 
```

where`case_call`将是一个宏，可以将此代码扩展为第一个代码片段。

然而，我非常怀疑这是否会被认为是好的风格。我的意思是，它会减少打字工作并提高代码的干性，但它确实似乎在某种程度上滥用了宏系统。

你会沿着那条路走，还是宁愿把整件事都打出来？你这样做的理由是什么？

**编辑**

一些澄清：

此代码用作简化脚本 API 之间的粘合层，该 API 将 C++ API 的几个不同方面作为简单的键值属性访问。这些属性在 C++ 中以不同的方式实现：有些具有 getter/setter 方法，有些设置在特殊的结构中。脚本操作引用转换为公共基类的 C++ 对象。但是，某些操作仅在某些子类上可用，并且必须被取消。

再往前走，我可能会更改实际的 C++ API，但就目前而言，它必须被视为不可更改。此外，这必须在嵌入式编译器上工作，因此（遗憾的是）boost 或 C++11 不可用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:48:11.647

在我看来，这似乎是对宏的适当使用。毕竟，它们是为消除句法重复而设计的。然而，当你有句法重复时，这并不总是语言的错——可能有更好的设计选择可以让你完全避免这个决定。

一般的智慧是使用表将键映射到操作：

```
std::map<std::string, void(Class::*)()> table; 
```

然后查找并一次性调用该操作：

```
object->*table[key](); 
```

或用于`find`检查失败：

```
const auto i = table.find(key);
if (i != table.end())
    object->*(i->second)();
else
    throw std::runtime_error(...); 
```

但是，如果您说函数没有共同的签名（即，您不能使用成员函数指针），那么您实际上*应*该做什么取决于您的项目的细节，我不知道。可能是宏是消除您所看到的重复的唯一方法，或者可能是有更好的方法来解决它。

问问自己：*为什么*我的函数采用不同的参数？*为什么*我使用演员表？如果您要根据对象的类型进行调度，那么您可能需要引入一个通用接口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T15:57:02.087

我建议你稍微颠倒一下角色。您是说该对象已经是某个知道如何处理某种情况的类，因此`virtual void handle(const char * key)`在您的基类中添加 a 并让对象检查实现是否适用于它并执行任何必要的操作。

这不仅会消除冗长的 if-else-if 链，而且还会更安全，并为您处理这些事件提供更大的灵活性。

# ios - 为 xcode 项目设置默认字体样式、颜色和大小

> ID：10638954
> 
> 赞同：3
> 
> 时间：2012-05-17T15:41:54.347
> 
> 标签：ios, xcode, interface-builder

我正在开发的应用程序具有特定的配色方案，所以我想知道是否可以设置“默认”背景颜色、文本颜色和字体大小，以便每次在界面中创建新视图或标签时Builder 我不必更改所有这些参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:15:34.527

从 iOS 5 开始，`UIAppearance`所有标准 UI 元素都实现了协议。使用“外观代理”，您可以为给定应用程序中该类型的所有对象设置外观。更多信息可以在关于[“iOS 上的高级外观定制”的非常有用和信息丰富的 WWDC '12 会议中找到](https://developer.apple.com/videos/wwdc/2012/?id=216)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:47:36.487

如何创建一个已经具有您需要的特定背景颜色、文本颜色、字体大小等的 DanFViewController（从 UIViewController 子类化），然后从中派生所有应用程序的自定义视图？

这就是我在自己的应用程序中所做的，客户期望所有视图都有特定的外观和感觉。

# r - 如何在表格底部隐藏方差分析显着性水平

> ID：10638961
> 
> 赞同：4
> 
> 时间：2012-05-17T15:42:29.590
> 
> 标签：r, attributes, anova

假设我使用 比较了两个嵌套随机效应模型，`anova()`结果如下：

```
new.model: new
current.model: new 
              Df    AIC    BIC  logLik  Chisq Chi Df Pr(>Chisq)    
new.model      8 299196 299259 -149590                             
current.model  9 299083 299154 -149533 115.19      1  < 2.2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

我只想使用表格部分（见下文）：

```
 Df    AIC    BIC  logLik  Chisq Chi Df Pr(>Chisq)    
new.model      8 299196 299259 -149590                             
current.model  9 299083 299154 -149533 115.19      1  < 2.2e-16 *** 
```

我知道我可以通过使用属性（anova.object）$heading = NULL 将标题设置为空来摆脱标题部分（见打击），但我不知道如何摆脱底部部分：Signif . 代码：......

```
new.model: new
current.model: new 
```

我非常不想使用 data.frame （见下文），因为它将空白单元格更改为 NAs

```
data.frame(anova(new.model, current.model))
              Df      AIC      BIC    logLik    Chisq Chi.Df   Pr..Chisq.
new.model      8 299196.4 299258.9 -149590.2       NA     NA           NA
current.model  9 299083.2 299153.6 -149532.6 115.1851      1 7.168247e-27 
```

我想知道你们是否知道处理这种情况的方法。

[更新]：我最终使用 print.anova 编写了一个包装器：

```
anova.print = function(object, signif.stars = TRUE, heading = TRUE){
    if(!heading)
         attributes(object)$heading = NULL
    print.anova(object, signif.stars = signif.stars)
} 
```

例子：

```
dv = c(rnorm(20), rnorm(20, mean=2), rnorm(20))
iv = factor(rep(letters[1:3], each=20))
anova.object = anova(lm(dv~iv))

Analysis of Variance Table
Response: dv 
          Df Sum Sq Mean Sq F value    Pr(>F)    
iv         2 46.360 23.1798  29.534 1.578e-09 ***
Residuals 57 44.737  0.7849                      
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

anova.print(anova.object, F, F)
          Df Sum Sq Mean Sq F value    Pr(>F)
iv         2 46.360 23.1798  29.534 1.578e-09
Residuals 57 44.737  0.7849 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T15:50:58.853

编辑：`anova`有一个带有signif.stars作为参数的打印方法

```
anova(new.model, current.model, signif.stars=FALSE)

> x <- anova(lm(hp~mpg+am, data=mtcars))
> print(x, signif.stars=F)
Analysis of Variance Table

Response: hp
          Df Sum Sq Mean Sq F value    Pr(>F)
mpg        1  87791   87791 54.5403 3.888e-08
am         1  11255   11255  6.9924   0.01307
Residuals 29  46680    1610 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T16:04:13.637

前几天我们有一篇关于不显示 NA 的类似帖子。你可以这样做：

```
x <- as.matrix(anova(new.model, current.model))
print(x, na.print="", quote=FALSE) 
```

**使用`mtcars`数据集的更具重现性的示例：**

```
x <- as.matrix(anova(lm(hp~mpg+am, data=mtcars)))
print(x, na.print="", quote=FALSE) 
```

# apache-flex - Flex 3：带圆边的进度条

> ID：10638962
> 
> 赞同：0
> 
> 时间：2012-05-17T15:42:35.167
> 
> 标签：apache-flex, progress-bar, flex3, rounding

基于 Flex 3，我如何为进度条设置外观，使其看起来像[这个示例](http://static.micheljansen.org/uploads/progressbar-70pct-straight.png)，带有圆角/边缘？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:31:25.190

您可以为进度条创建自定义外观并设置 css 样式以引用您的自定义编程外观。您将需要以下程序化皮肤：

barSkin
maskSkin
trackSkin

所有这些都是 ProgressBar 组件的样式。

您可以参考默认皮肤以查看它们是如何完成的：

barSkin="ProgressBarSkin"
maskSkin="ProgressMaskSkin"
trackSkin="ProgressTrackSkin"

# java - 如何在没有确认的情况下在 j2me 应用程序中启动浏览器

> ID：10638972
> 
> 赞同：0
> 
> 时间：2012-05-17T15:42:57.577
> 
> 标签：java, java-me, midp, verisign

我正在开发第一个 j2me 应用程序，它应该只打开一个带有一些 url 的浏览器。我只用了一行代码

```
platformRequest(URL); 
```

当我运行它时 - 它总是问我“我真的想打开这样的 URL”

我该如何解决？在威瑞信上签名的应用程序能解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:30:54.373

是的，Singing 是访问此类 API 的唯一选择。[您必须使用Verisign](http://www.verisign.com/)、[Thawte](http://www.thawte.com/)等歌唱机构证书歌唱您的移动应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:35:48.117

即使在使用授权工具签名之后，我们也不能在所有 J2ME 设备中跳过这些提示。但是在签名之后，我们会得到额外的提示，比如“Access For ALL”。

# javascript - 如何推送到实际对象的最后一个状态，清除它并像新对象一样单独编辑？

> ID：10638979
> 
> 赞同：0
> 
> 时间：2012-05-17T15:43:19.203
> 
> 标签：javascript

如何在单击“创建”按钮时将对象的最后状态添加到数组并创建新的清理准备继续，如果单击“继续”按钮仅修改实际对象，现在修改部分数组中的所有对象？

说明材料：

HTML：

```
<button onclick="create()">Create</button>
<button onclick="add()">Continue</button> 
```

​ JavaScript：

```
var sections = [];

create = function() {
    sections.push(section);

    section.array = [];
    section.c = 0;

    section.add();

    $("body").append("<br>Add to array at moment last state of object and make new one<br>" + JSON.stringify(sections) + "<br >");
}

add = function() {
    section.add();

    $("body").append("<br>continue only this object<br>" + JSON.stringify(sections) + "<br >");
}

var section = {
    array: [],
    c: 0,
    add: function() {
        section.c++;
        section.array.push(section.c);
    }
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:02:36.583

您将需要创建新的部分对象，而不是重置一个`section`变量的属性（在您的`create`函数中）：

```
var sections = [],
section = makeSection();

function create() {
    sections.push(section); // add the current section
    section = makeSection(); // make a new one
    section.add();

    $("body").append("<br>Add to array at moment last state of object and make new one<br>" + JSON.stringify(sections) + "<br >");
}

function add() {
    section.add();
    $("body").append("<br>continue only this object<br>" + JSON.stringify(sections) + "<br >");
}

function makeSection() {
    return {
        array: [],
        c: 0,
        add: function() {
            section.c++;
            section.array.push(section.c);
        }
    }​;
} 
```

然而，我想说这是构造函数的情况：

```
function Section() {
    this.array = [];
    this.c = 0;
    // maybe do this automatically on constructing:
    // this.add();
    // sections.push(this);
}
Section.prototype.add = function() {
    this.c++;
    this.array.push(section.c);
} 
```

然后使用`new Section()`而不是`makeSection()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:02:51.457

试试这个：

```
sections.push(JSON.parse(JSON.stringify(section))); 
```

这有点hacky，但它会将对象的新副本推送到数组`sections`，而不是引用，有效地保存对象的状态。这段代码实际上是在使用 JSON 库`stringify`ing 然后`parse`ing 一个对象，该对象返回一个新对象。

# ruby-on-rails-3 - Twitter Bootstrap 在两个不同的 Rails 3.2 项目中展示了两种不同的方式

> ID：10638980
> 
> 赞同：0
> 
> 时间：2012-05-17T15:43:21.327
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, ruby-on-rails-3.2, simple-form

我在两个 Rails 3.2 项目中使用 SimpleForm 和 Twitter Bootstrap。不幸的是，我的表单在其中一个项目中没有正确呈现。

所有相关的宝石都是相同的版本。

正确显示的字段如下所示：

```
<form id="new_user" class="simple_form form-horizontal" novalidate="novalidate" method="post" action="/users" accept-charset="UTF-8" name="new_user">
    <div style="margin:0;padding:0;display:inline">
        <input type="hidden" value="✓" name="utf8"> <input type="hidden" value="I/WorRCjNpv7gnccGkL6/LETTgn6ao6Ycrgm0ky2slM=" name="authenticity_token">
    </div>
    <div class="control-group string required">
        <label class="string required control-label" for="user_first_name"><abbr title="required">*</abbr> First name</label>
        <div class="controls">
            <input id="user_first_name" class="string required" type="text" size="50" name="user[first_name]">
        </div>
    </div>
    <div class="control-group string required">
        <label class="string required control-label" for="user_last_name"><abbr title="required">*</abbr> Last name</label>
        <div class="controls">
            <input id="user_last_name" class="string required" type="text" size="50" name="user[last_name]">
        </div>
    </div>
    <div class="control-group email required">
        <label class="email required control-label" for="user_email"><abbr title="required">*</abbr> Email</label>
        <div class="controls">
            <input id="user_email" class="string email required" type="email" size="50" name="user[email]">
        </div>
    </div>
    <div class="control-group password required">
        <label class="password required control-label" for="user_password"><abbr title="required">*</abbr> Password</label>
        <div class="controls">
            <input id="user_password" class="password required" type="password" size="50" name="user[password]">
        </div>
    </div>
    <div class="control-group password optional">
        <label class="password optional control-label" for="user_password_confirmation">Password confirmation</label>
        <div class="controls">
            <input id="user_password_confirmation" class="password optional" type="password" size="50" name="user[password_confirmation]">
        </div>
    </div>
    <div class="control-group boolean optional">
        <label class="boolean optional control-label" for="user_admin">Admin</label>
        <div class="controls">
            <input type="hidden" value="0" name="user[admin]"> <label class="checkbox"><input id="user_admin" class="boolean optional" type="checkbox" value="1" name="user[admin]"></label>
        </div>
    </div>
    <div class="control-group string required">
        <label class="string required control-label" for="user_company"><abbr title="required">*</abbr> Company</label>
        <div class="controls">
            <input id="user_company" class="string required" type="text" size="50" name="user[company]">
        </div>
    </div>
    <div class="form-actions">
        <input class="btn btn-primary" type="submit" value="Create User" name="commit"> <a class="btn" href="/users"><span class="translation_missing" title="translation missing: en.helpers.links.cancel">Cancel</span></a>
    </div>
</form> 
```

而不正确的则呈现如下：

```
<form id="new_user" class="simple_form form-horizontal" novalidate="novalidate" method="post" action="/users" accept-charset="UTF-8" name="new_user">
    <div style="margin:0;padding:0;display:inline">
        <input type="hidden" value="✓" name="utf8"> <input type="hidden" value="TR4q4W8cEl82hI6+bebVsoYp8WD3k2xsyhhf1UXzCYg=" name="authenticity_token">
    </div>
    <div class="input string required">
        <label class="string required control-label" for="user_first_name"><abbr title="required">*</abbr> First name</label> <input id="user_first_name" class="string required" type="text" size="50" name="user[first_name]">
    </div>
    <div class="input string required">
        <label class="string required control-label" for="user_last_name"><abbr title="required">*</abbr> Last name</label> <input id="user_last_name" class="string required" type="text" size="50" name="user[last_name]">
    </div>
    <div class="input email required">
        <label class="email required control-label" for="user_email"><abbr title="required">*</abbr> Email</label> <input id="user_email" class="string email required" type="email" size="50" name="user[email]">
    </div>
    <div class="input password required">
        <label class="password required control-label" for="user_password"><abbr title="required">*</abbr> Password</label> <input id="user_password" class="password required" type="password" size="50" name="user[password]">
    </div>
    <div class="input password optional">
        <label class="password optional control-label" for="user_password_confirmation">Password confirmation</label> <input id="user_password_confirmation" class="password optional" type="password" size="50" name="user[password_confirmation]">
    </div>
    <div class="input boolean optional">
        <input type="hidden" value="0" name="user[admin]"> <label class="boolean optional control-label checkbox" for="user_admin"><input id="user_admin" class="boolean optional" type="checkbox" value="1" name="user[admin]"> Admin</label>
    </div>
    <div class="form-actions">
        <input class="btn btn-primary" type="submit" value="Create User" name="commit"> <a class="btn" href="/users"><span class="translation_missing" title="translation missing: en.helpers.links.cancel">Cancel</span></a>
    </div>
</form> 
```

我在两个项目上都遵循了相同的步骤（据我所知）。为什么 Twitter Bootstrap 会导致两者呈现不同？还是 SimpleForm？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:48:18.157

看起来问题出在简单的形式上。

Twitter Bootstrap 只处理样式，SimpleForm 生成 html。

您确定在两个项目中使用相同版本的 SimpleForm 吗？或者您可能忘记在后一个上调用 simple_form_for。

编辑：

安装后你是否运行了 twitter 引导生成器？

```
rails generate simple_form:install --bootstrap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:05:03.380

我发现了问题，尽管我仍然不确定它为什么会发生。这确实是一个 SimpleForm 问题，而不是 Twitter Bootstrap 问题。

config/initializers/simple_form.rb 文件在两者之间生成不同。我不确定为什么。

我在安装过程中确实遇到了一些由 MiniTest 引发的错误。

# sql - FROM 子句中的参数化 SQL

> ID：10638990
> 
> 赞同：2
> 
> 时间：2012-05-17T15:43:55.993
> 
> 标签：sql, parameterized-query

使用`OleDbCommand`. 我可以添加 SQL 参数，从而使查询免受 SQL 注入的影响，但是有没有办法在`FROM`cluase 中做到这一点。见下文

**这行得通**

```
query = "Select * From Company Where @param = 1";
OleDbCommand Command = new OleDbCommand(query, sqlConnStr);

DataTable Table = new DataTable();
DataSet dataSet = new DataSet();
Table = null;

//Add Parameters
Command.Parameters.AddWithValue("param", "ID");
Command.ExecuteNonQuery();
adapter.SelectCommand = Command;
adapter.Fill(dataSet);
Table = dataSet.Tables[0]; 
```

它返回一个漂亮的表，其中 id = 1

**但**

我正在寻找这样的东西，请注意 FROM CLAUSE

```
query = "Select * From @tableName Where @param = 1";
OleDbCommand Command = new OleDbCommand(query, sqlConnStr);

DataTable Table = new DataTable();
DataSet dataSet = new DataSet();
Table = null;

//Add Parameters
Command.Parameters.AddWithValue("param", "ID");
Command.Parameters.AddWithValue("tableName", "Company");
Command.ExecuteNonQuery();
adapter.SelectCommand = Command;
adapter.Fill(dataSet);
Table = dataSet.Tables[0]; 
```

DBMS 不断返回`"Error in From clause"`

PS一切都拼写正确 - 我三重检查

* * *

***致所有人 - 谢谢，但是我将坚持只使用参数化 SQL。我不喜欢 `Dynamic SQL`One BIT***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:55:08.763

您必须执行动态连接的 SQL 字符串，不幸的是，这会损害参数化 SQL 为您提供的任何好处。看到[这个帖子](https://stackoverflow.com/questions/1325044/dynamic-sql-passing-table-name-as-parameter)。

```
DECLARE @SQL varchar(250)
SELECT @SQL = 'Select * From ' + @TableName + ' Where ' + @param + ' = 1'
Exec(@SQL) 
```

不建议使用，如果您可以通过其他方式预先确定表名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:59:31.753

SQL 不支持将 FROM 子句参数化。你不能按照你尝试的方式去做。也许你可以这样做：

```
query = "Select * From" + tableName + "Where @param = 1"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:01:42.083

您不能使用参数化的对象名称。你将不得不做类似的事情

```
string.format("SELECT * FROM [{0}] WHERE [{1}] = 1", tableName, columnName); 
```

**这样做后果自负**

检查输入中的方括号可能是值得的，这是我目前能想到的“注入”上述示例的唯一方法。我不是黑客，也不精通 sql 注入。像这样的东西**可能会**起作用：

```
 if (tableName.Contains("]"))
        {
            throw new ArgumentException();
        } 
```

# c# - 将 Outlook 电子邮件内容发送到 asp.net 页面

> ID：10638994
> 
> 赞同：3
> 
> 时间：2012-05-17T15:44:09.780
> 
> 标签：c#, asp.net, oop

我在 Outlook 的文件菜单中创建了 Outlook 插件按钮。当我单击它时，我想将电子邮件的详细信息（例如主题、正文和附件）发送到 asp.net 网页。

我可以通过 c# 代码访问电子邮件内容。我需要做什么来确定信息是来自我的插件还是其他来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:50:52.337

您可以将其写入临时文件并从那里读取。在临时文件中添加一个关键字，该关键字将标识它来自您的插件应用程序。您可以检查此关键字是否存在，以确保提供网页内容的是您的插件。

# c# - 反向时间戳

> ID：10638996
> 
> 赞同：5
> 
> 时间：2012-05-17T15:44:22.287
> 
> 标签：c#, timestamp

我试图用时间戳将一些东西保存到日志表中，所以我首先这样做：

```
public static string TimeStamp(
   this DateTime datetime, string timestamptFormat = "yyyyMMddHHmmssffff")
   {
     return datetime.ToString(timestamptFormat);
   } 
```

然后我发现了一个这样的片段：

```
static public string ToReverseTimestamp(this DateTime dateTime)
{
return string.Format("{0:10}", DateTime.MaxValue.Ticks - dateTime.Ticks);
} 
```

我开始想知道反向时间戳到底有什么用，并遇到了[这篇文章](http://comments.gmane.org/gmane.comp.java.hadoop.hbase.user/20286)

现在我的问题是：如果第二个片段是正确的？以及如何将其转换回“正常”时间戳，或者如何从中获取可读的日期时间信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:58:23.840

确保在`DateTime`转换之前将其转换为世界时以避免时区问题：

```
public static string ToReverseTimestamp(this DateTime dateTime)
{
    return (long.MaxValue - dateTime.ToUniversalTime().Ticks).ToString();
} 
```

`DateTime`您可以通过将值解析`string`为 a `long`、计算并使用from`MaxValue - (MaxValue - x) = x`构造一个新值来将值转换回一个值：`DateTime``DateTimeKind.Utc``x`

```
public static DateTime FromReverseTimestamp(string timestamp)
{
    return new DateTime(long.MaxValue - long.Parse(timestamp), DateTimeKind.Utc);
} 
```

*例子：*

```
var input = DateTime.Now;                      // {17/05/2012 16:03:17} (Local)
var timestamp = ToReverseTimestamp(input);     // "2520650302020786038"
var result = FromReverseTimestamp(timestamp);  // {17/05/2012 18:03:17} (Utc) 
```